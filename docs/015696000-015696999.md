# StackOverflow 问答 15696000-15696999

# c++ - 迭代器返回垃圾

> ID：15696004
> 
> 赞同：3
> 
> 时间：2013-03-29T01:32:11.797
> 
> 标签：c++, vector, iterator

无法弄清楚我哪里出错了。据我了解，此代码应返回“1、2、3”，但我得到以下信息。我需要全局声明的向量及其迭代器，因为我将向量传递给实际代码中的函数，并且还需要在某些函数中更新迭代器。任何帮助表示赞赏！

```
#include <iostream>
#include <vector>

using namespace std;

vector<float> grid;
vector<float>::iterator gridPtr;

int main()

{
  grid.push_back(1);
  grid.push_back(2);

  gridPtr = grid.begin();

  grid.push_back(3);

  cout << "gridPtr: " << *gridPtr << endl;

  gridPtr++;

  cout << "gridPtr: " << *gridPtr << endl;

  gridPtr++;

  cout << "gridPtr: " << *gridPtr << endl;
} 
```

这将返回：

```
gridPtr: 2.62257e-33
gridPtr: 2
gridPtr: 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T01:34:20.873

`push_back()`可能使所有迭代器无效。也就是说，如果它必须重新分配后备存储，所有现有的迭代器都会失效。

如果您提前知道要推送多少元素，则可以使用`reserve()`预分配必要的内存，这将防止`push_back()`重新分配（从而使迭代器无效）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T01:34:30.687

来自[http://en.cppreference.com/w/cpp/container/vector/push_back](http://en.cppreference.com/w/cpp/container/vector/push_back)：

> 如果 new`size()`大于`capacity()`，则所有**迭代器和引用都无效。**

（强调我的。）

当您考虑幕后发生的事情时，这是有道理的。a`vector`通过填充动态分配的数组来工作；当它满了时，它需要重新分配一个更大的，然后把所有东西都搬过去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T01:34:46.647

`iterator`当您执行 a 时，您可能会使其无效`push_back`，如果您删除该行，它应该可以正常工作。以下将按预期工作：

```
grid.push_back(1);
grid.push_back(2);

gridPtr = grid.begin();
cout << "gridPtr: " << *gridPtr << endl;
gridPtr++;
cout << "gridPtr: " << *gridPtr << endl; 
```

正如凯文所提到的，使用`reserve`预先分配足够的内存也可以解决这个问题：

```
grid.reserve(3) ;
grid.push_back(1);
grid.push_back(2);

gridPtr = grid.begin();

grid.push_back(3) ;
cout << "gridPtr: " << *gridPtr << endl;
gridPtr++;
cout << "gridPtr: " << *gridPtr << endl;
gridPtr++;
cout << "gridPtr: " << *gridPtr << endl; 
```

# registry - HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion\GACChangeNotification\Default 的注册表值

> ID：15696011
> 
> 赞同：3
> 
> 时间：2013-03-29T01:32:46.287
> 
> 标签：registry, gac

我最近在学习 GAC，我发现 GAC 程序集可以在 Windows 注册表中找到，请参阅[如何使用 C# 获取 GAC 的位置？](https://stackoverflow.com/questions/1557141/how-can-i-get-the-location-of-the-gac-using-c/9887427#9887427). 通过 C# 代码，我可以从下面的任何注册表项中获取一个 byte[8] 数组

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion\GACChangeNotification\Default
```

例如：

```
名称：系统,2.0.0.0,,b77a5c561934e089,MSIL
c#代码中的值：字节[72,212,154,147,251,33,206,1]

```

我在谷歌搜索，找不到这个值的任何文档，有人知道如何利用这个值吗？

# python - HTTPCookieProcessor 不需要cookie jar？

> ID：15696013
> 
> 赞同：1
> 
> 时间：2013-03-29T01:33:00.517
> 
> 标签：python, urllib2

在我看到的关于在 python 中使用 urllib2 存储 PHP 会话值和查看受保护网页的每个示例中，cookie jar ( `cookielib.CookieJar()`) 总是像这样传递：

```
import urllib2
from cookielib import CookieJar

cj = CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj)) 
```

有人正在使用此代码并完全删除了 cookiejar，但仍然能够使用此脚本查看受会话保护的网页：

```
import urllib
import urllib2

opener = urllib2.build_opener(urllib2.HTTPCookieProcessor())

formValues = {
    "username":"user",
    "password":"pass"
}
data = urllib.urlencode(formValues)
response = opener.open("http://jshawl.com/python-playground/login.php", data)
print response.read()
secure = opener.open("http://jshawl.com/python-playground/protected2.php")
print secure.read() # prints content that is only viewable if $_SESSION variable is correct. 
```

在没有 cookie 罐的情况下如何存储 $_SESSION 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T00:47:08.187

HTTPCookieProcessor 的构造函数的 cookie jar 参数的默认值为 None。在这种情况下，HTTPCookieProcessor 实例化一个新的空 cookie jar。

See also [http://books.google.de/books?id=kQom0WiUbZQC&pg=PA438&lpg=PA438&dq=HTTPCookieProcessor&source=bl&ots=mrCFWZE_8q&sig=CEON7tOOalWEpePQsbVVa0XNzV0&hl=en&sa=X&ei=v9BNU4WtHpKkyAPZ3YGgDw&redir_esc=y#v=onepage&q=HTTPCookieProcessor&f=falsehttp://books. google.de/books?id=kQom0WiUbZQC&pg=PA438&lpg=PA438&dq=HTTPCookieProcessor&source=bl&ots=mrCFWZE_8q&sig=CEON7tOOalWEpePQsbVVa0XNzV0&hl=en&sa=X&ei=v9BNU4WtHpKkyAPZ3YGgfalseDw&redir_esc=yf#v=onepage](http://books.google.de/books?id=kQom0WiUbZQC&pg=PA438&lpg=PA438&dq=HTTPCookieProcessor&source=bl&ots=mrCFWZE_8q&sig=CEON7tOOalWEpePQsbVVa0XNzV0&hl=en&sa=X&ei=v9BNU4WtHpKkyAPZ3YGgDw&redir_esc=y#v=onepage&q=HTTPCookieProcessor&f=falsehttp://books.google.de/books?id=kQom0WiUbZQC&pg=PA438&lpg=PA438&dq=HTTPCookieProcessor&source=bl&ots=mrCFWZE_8q&sig=CEON7tOOalWEpePQsbVVa0XNzV0&hl=en&sa=X&ei=v9BNU4WtHpKkyAPZ3YGgDw&redir_esc=y#v=onepage&q=HTTPCookieProcessor&f=false)

# windows - 文本框离开事件抑制按钮单击

> ID：15696014
> 
> 赞同：0
> 
> 时间：2013-03-29T01:33:01.507
> 
> 标签：windows, forms, events, button, textbox

我有一个简单的 Windows 窗体：“消息”文本框具有 Enter 和 Leave 事件，允许用户仅在该字段上输入另一种语言的文本。“发送”按钮发送表单内容。用户填写 Message 并单击 Send 后，Textbox 的 Leave 事件会阻止按钮的 Click 事件触发。我需要两个处理程序来运行。

以下是相关代码：

```
private void Message_Enter(object sender, EventArgs e)
{
    inputLang = InputLanguage.CurrentInputLanguage;
    foreach (InputLanguage lang in InputLanguage.InstalledInputLanguages)
    {
        if (lang.LayoutName == "United States-International")
        {
            InputLanguage.CurrentInputLanguage = lang;
            break;
        }
    }
}

private void Message_Leave(object sender, EventArgs e)
{
    InputLanguage.CurrentInputLanguage = inputLang;
}

private void Send_Click(object sender, EventArgs e)
{
    string dest = ServerList.Text;
    string msg = Message.Text;
    if (dest.Length == 0 || msg.Length == 0 )
    {
        Log("Fill the destination server and the message");
        return;
    }
    if (context.SendMessage(dest, msg))
    {
        if (!ServerList.Items.Contains(dest))
        {
            ServerList.Items.Add(dest);
        }
    }
    else
    {
        if (ServerList.Items.Contains(dest))
        {
            ServerList.Items.Remove(dest);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:31:38.533

现在问题已经解决了。该问题是由输入语言的变化引起的。如果进入和离开处理程序做了其他事情，那么点击事件将正常触发。由于我需要更改输入语言，因此我通过监视 MouseDown、MouseClick 和 MouseUp 事件并在未自动生成时生成单击来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T12:25:48.017

我有同样的问题。当我更改输入语言然后在离开事件时将其设置回默认语言。当我单击其他组件时，它不会触发单击事件。我不得不点击两次。我认为这与专注有关。在更改输入语言后，我通过将焦点设置回表单来解决它。这是处理程序：

```
void textBoxSearch_LostFocus(object sender, EventArgs e)
    {
        InputLanguage.CurrentInputLanguage = InputLanguage.DefaultInputLanguage;
        this.Focus();
    } 
```

希望能帮助到你...

# c# - 线程防止所有者的垃圾收集

> ID：15696019
> 
> 赞同：5
> 
> 时间：2013-03-29T01:33:25.743
> 
> 标签：c#, multithreading, memory-leaks, garbage-collection

在我创建的库中，我有一个类 DataPort，它实现了类似于 .NET SerialPort 类的功能。它与某些硬件对话，并在数据通过该硬件进入时引发事件。为实现此行为，DataPort 启动一个线程，该线程预期与 DataPort 对象具有相同的生命周期。 **问题**是当 DataPort 超出范围时，它*永远不会被垃圾收集*

现在，因为 DataPort 与硬件通信（使用 pInvoke）并拥有一些非托管资源，所以它实现了 IDisposable。当您在对象上调用 Dispose 时，一切都会正确发生。DataPort 摆脱了它所有的非托管资源并终止了工作线程并消失了。但是，如果您只是让 DataPort 超出范围，那么垃圾收集器将永远不会调用终结器，并且 DataPort 将永远在内存中保持活动状态。我知道发生这种情况有两个原因：

1.  终结器中的断点永远不会被命中
2.  [SOS.dll](https://stackoverflow.com/a/227966/)告诉我 DataPort 还活着

**边栏：**在我们继续之前，我会说是的，我知道答案是“调用 Dispose() Dummy！” 但我认为即使你让所有引用都超出范围，*最终*应该会发生正确的事情，垃圾收集器应该摆脱 DataPort

**回到问题：**使用 SOS.dll，我可以看到我的 DataPort 没有被垃圾收集的原因是它启动的线程仍然具有对 DataPort 对象的引用——通过隐含的“this”参数线程正在运行的实例方法。正在运行的工作线程[不会被垃圾回收](https://stackoverflow.com/questions/4720991/garbage-collection-of-threads/4722230#4722230)，因此在运行的工作线程范围内的任何引用也不符合垃圾回收的条件。

线程本身基本上运行以下代码：

```
public void WorkerThreadMethod(object unused)
{
  ManualResetEvent dataReady = pInvoke_SubcribeToEvent(this.nativeHardwareHandle);
  for(;;)
  {
    //Wait here until we have data, or we got a signal to terminate the thread because we're being disposed
    int signalIndex = WaitHandle.WaitAny(new WaitHandle[] {this.dataReady, this.closeSignal});
    if(signalIndex == 1) //closeSignal is at index 1
    {
      //We got the close signal.  We're being disposed!
      return; //This will stop the thread
    }
    else
    {
      //Must've been the dataReady signal from the hardware and not the close signal.
      this.ProcessDataFromHardware();
      dataReady.Reset()
    }
  }
} 
```

Dispose 方法包含以下（相关）代码：

```
public void Dispose()
{
  closeSignal.Set();
  workerThread.Join();
} 
```

因为线程是 gc 根并且它持有对 DataPort 的引用，所以 DataPort 永远不符合垃圾收集的条件。因为永远不会调用终结器，所以我们永远不会向工作线程发送关闭信号。因为工作线程永远不会收到关闭信号，所以它会一直运行并保持该引用。确认！

对于这个问题，我能想到的唯一答案是去掉 WorkerThread 方法上的“this”参数（在下面的答案中有详细说明）。其他人能想到另一种选择吗？必须有更好的方法来创建具有相同生命周期的对象的线程！或者，这可以在没有单独线程的情况下完成吗？[我根据 msdn 论坛上的这篇文章](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/e36193cd-a708-42b3-86b7-adff82b19e5e/)选择了这个特定的设计，它描述了常规 .NET 串行端口类的一些内部实现细节

**从评论中更新**一些额外的信息：

*   有问题的线程已将 IsBackground 设置为 true
*   上面提到的非托管资源不会影响问题。即使示例中的所有内容都使用托管资源，我仍然会看到相同的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T01:33:25.743

为了摆脱隐含的“This”参数，我稍微更改了工作线程方法并将“this”引用作为参数传递：

```
public static void WorkerThreadMethod(object thisParameter)
{
  //Extract the things we need from the parameter passed in (the DataPort)
  //dataReady used to be 'this.dataReady' and closeSignal used to be
  //'this.closeSignal'
  ManualResetEvent dataReady = ((DataPort)thisParameter).dataReady;
  WaitHandle closeSignal = ((DataPort)thisParameter).closeSignal;

  thisParameter = null; //Forget the reference to the DataPort

  for(;;)
  {
    //Same as before, but without "this" . . .
  }
} 
```

令人震惊的是，**这并没有解决问题！**

回到 SOS.dll，我看到仍然有一个对 ThreadHelper 对象持有的 DataPort 的引用。显然，当您通过执行启动工作线程时`Thread.Start(this);`，它会创建一个私有 ThreadHelper 对象，该对象的生命周期与保存您传递给 Start 方法的引用的线程相同（我在推断）。这给我们留下了同样的问题。有些东西持有对 DataPort 的引用。让我们再试一次：

```
//Code that starts the thread:
  Thread.Start(new WeakReference(this))
//. . .
public static void WorkerThreadMethod(object weakThisReference)
{
  DataPort strongThisReference= (DataPort)((WeakReference)weakThisReference).Target;

  //Extract the things we need from the parameter passed in (the DataPort)
  ManualResetEvent dataReady = strongThisReferencedataReady;
  WaitHandle closeSignal = strongThisReference.closeSignal;

  strongThisReference= null; //Forget the reference to the DataPort.

  for(;;)
  {
    //Same as before, but without "this" . . .
  }
} 
```

**现在我们没事了。** 创建的 ThreadHelper 持有 WeakReference，这不会影响垃圾收集。我们只在工作线程开始时从 DataPort 中提取我们需要的数据，然后故意丢失对 DataPort 的所有引用。这在这个应用程序中是可以的，因为我们抓取的部分在 DataPort 的生命周期内不会改变。现在，当顶级应用程序丢失对 DataPort 的所有引用时，它就有资格进行垃圾收集。GC 将运行终结器，该终结器将调用 Dispose 方法，该方法将杀死工作线程。一切都很幸福。

然而，这真的很痛苦（或者至少是正确的）！有没有更好的方法来制作一个拥有与该对象相同生命周期的线程的对象？或者，有没有办法在没有线程的情况下做到这一点？

**结语：** 如果不是让一个线程花费大部分时间来执行 WaitHandle.WaitAny()，那将是很棒的，你可以有某种等待句柄，它不需要它自己的线程，但会在线程池上触发延续线程一旦触发。就像，如果硬件 DLL 可以在每次有新数据而不是发出事件信号时调用一个委托，但我不控制那个 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T05:55:28.093

我相信问题不在于您显示的代码，而在于使用此串行端口包装器类的代码。如果您没有“使用”声明，请参阅[http://msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)，您没有确定性清理行为。相反，您然后依赖垃圾收集器，但它永远不会获得仍然被引用的对象，并且线程的所有堆栈变量（无论是作为普通参数还是 this 指针）都算作引用。

# android - Android如何确定通知声音何时播放完毕

> ID：15696022
> 
> 赞同：1
> 
> 时间：2013-03-29T01:33:34.417
> 
> 标签：android, android-mediaplayer, android-notifications

我将自定义声音附加到我的`Notification`喜欢上：

```
notification.sound = Uri.parse("android.resource://" + packageName + "/" + soundResId); 
```

我可以通过取消来停止播放器`Notification`，但我想知道播放器何时完成自定义声音的播放。

我知道如果您已经开始播放声音并且有一个对象，您可以`MediaPlayer`使用 an来监听播放的声音。`OnCompletionListener``mediaPlayer`

但是，我如何知道我的自定义`Notification`声音何时播放完毕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:10:42.033

这是你的声音文件，所以你知道持续时间是多少。当您的通知被点击时，您将启动倒数计时器，当倒数计时器结束时，您的通知声音就会结束，需要几百微秒。

# javascript - 如何使用 JavaScript 按一天中的时间更改网页上的图像

> ID：15696023
> 
> 赞同：0
> 
> 时间：2013-03-29T01:33:48.067
> 
> 标签：javascript, image, time

我以前见过这种情况的变体，但我一直遇到导致头痛的障碍。

我想要做的是使用 JavaScript 在我所在地区（太平洋标准）的一天中更改我网页上的横幅图像。我知道我必须为该功能做的主要想法，但我对如何导入图像或将图像添加到以前不存在的网页感到困惑。

```
 function timeOfDayImage() {
    var now = new Date;
    var timeNow = now.getHours();

       if(timeNow < 8 || timeNow > 10){
            code
       }
       else {
          code
       } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:37:08.550

我会给你的身体元素一个类：

```
function timeOfDayImage() {
    var now = new Date();
    var timeNow = now.getHours();

    if (timeNow < 8 || timeNow > 10) {
        body.classList.add('it-is-time');
    }
} 
```

并使用 CSS 更改元素：

```
body #banner {
    background-image: url('images/one.png');
}

body.it-is-time #banner {
    background-image: url('images/two.png');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:40:37.980

您无需将图像导入网页。将`src`横幅图像的属性设置为新图像的 URL，浏览器会为您加载

```
function timeOfDayImage() {
   var now = new Date;
   var timeNow = now.getHours();
   if(timeNow < 8 || timeNow > 10){
      document.getElementById('image').src='http://www.images.com/banner1.jpg';
   }
   else {
      document.getElementById('image').src='http://www.images.com/banner2.jpg';
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T01:47:19.780

在横幅图片中使用 ID，如下所示：

```
<img id="banner" alt="Something appropriate" /> 
```

然后使用`getElementById`从 中选择参考`DoM`。`src`使用所选元素的变量引用更改源 ( ) 属性。如果需要，您还可以更改`alt`属性，以确保更改后的图像对屏幕阅读器具有描述性。

```
function timeOfDayImage() {
    var now = new Date;
    var timeNow = now.getHours();
    var img = document.getElementById("banner");
    if (timeNow < 8 || timeNow > 10) {
        img.src="someimage.png";
        img.alt="Something equally appropriate";
    } else {
        img.src="someimage.png";
        img.alt="Something appropriate here too";
    }
}

timeOfDayImage(); 
```

[摆弄一个不存在的图像（概念证明）](http://jsfiddle.net/HJkuG/1/)

# ruby-on-rails - PhusionPassenger::Rack::ApplicationSpawner 中的异常（任何东西）在生产中的 Rails 应用程序中

> ID：15696025
> 
> 赞同：0
> 
> 时间：2013-03-29T01:33:50.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, passenger

至少对我来说是一个很难解决的问题（因为不是很长时间就知道rails）。当我找到解决方案时，我会分享它，所以其他人不会像我那样浪费时间:)

在生产服务器中运行我的 rails 应用程序，重新启动 apache 并尝试访问应用程序后，您会收到以下**错误**：

> 乘客遇到以下错误：
> 
> 应用程序生成器服务器意外退出：连接被拒绝 - /tmp/passenger.1.0.16899/generation-0/spawn-server/socket.16909.15268580
> 
> 异常类：PhusionPassenger::Rack::ApplicationSpawner::Error

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:23:14.810

在我的一个应用程序文件（在这种情况下为帮助文件）中，我有以下代码：

```
include ActionView::Helpers::TagHelper

module MyHelper
   ...
end 
```

哪个在开发中运行良好`rails server`，但在乘客方面失败了。解决方案是移动`include`模块内部，如下所示：

```
module MyHelper
  include ActionView::Helpers::TagHelper
   ...
end 
```

这对你们大多数人来说可能很明显，从现在开始对我来说也很明显:)

# oracle - oracle中联合运算符的使用方法

> ID：15696029
> 
> 赞同：1
> 
> 时间：2013-03-29T01:34:28.543
> 
> 标签：oracle

我知道联合运算符用于（例如）在消除重复后返回两个表中的所有行。例子：

```
SELECT a_id 
FROM a 
UNION
SELECT b_id
FROM b; 
```

列出 A 和 B 中所有元素消除重复的结果是 {1,2,3,4,5,6,7,8}。如果你加入 A 和 B，你只会得到 {4,5}。您必须执行完全外部联接才能获得 1-8 的完整列表。我的问题是，如果我想使用 union 运算符从名为employees 的表中显示employee_id 和job_id（employee id 是数字数据类型，job_id 是VARCHAR2 数据类型），我该怎么做呢？

会不会是这样的：这显然不能在 oracle 中运行，

```
SELECT employee_id
UNION
SELECT job_id
FROM employees; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:32:49.963

如果您真的想将所有 EMPLOYEE_ID 和您要使用的所有 JOB_ID 合并在一起

```
SELECT TO_CHAR(EMPLOYEE_ID) FROM EMPLOYEES
UNION ALL
SELECT JOB_ID FROM EMPLOYEES 
```

如果您有 EMPLOYEE_ID 为 1、2 和 3 的行，而这些相同的行的 JOB_ID 为 1、11 和 111，您将得到一个包含六行的结果集，其中单列的值为

```
1
2
3
1
11
111 
```

通过使用 UNION ALL，Oracle 将允许重复项通过。

分享和享受。

# java - 消除 Java Sound 中的反馈？

> ID：15696032
> 
> 赞同：2
> 
> 时间：2013-03-29T01:34:31.180
> 
> 标签：java, audio, feedback-loop

我已经完成了一个用于视频会议的 Java 程序。它从包含双向音频的网络摄像机的麦克风/扬声器读取和写入。这个网络摄像机没有内置反馈减少，所以我必须自己做。

我可以手动测量延迟，并使用音量调节来切断麦克风以消除反馈，但你有更好的主意吗？

理想情况下，我的程序会消除反馈，而不必删除不需要的部分。假设我正在进行双向对话。我不想错过对方在说什么，仅仅因为我在同一时刻说话，尤其是因为有很大的延迟。

你能推荐一个图书馆，或者至少是一个消除反馈的策略吗？

此外，即使房间完全安静，我也想知道您在消除绒毛方面可能有的任何提示。同样，当房间安静时，我可以使用音量检测来静音，但是一旦有人开始说话，就会听到模糊的声音。（或者，你认为我应该单独问这个问题吗？）

# xpath - scrapy 找不到 text() 内容

> ID：15696033
> 
> 赞同：2
> 
> 时间：2013-03-29T01:34:37.400
> 
> 标签：xpath, scrapy

我不明白为什么scrapy 在[http://www.alize.gen.tr/index.php?is=urun_detay&id=37](http://www.alize.gen.tr/index.php?is=urun_detay&id=37)页面上看不到一些 //div/text() 。例如：

```
scrapy view http://www.alize.gen.tr/index.php?is=urun_detay&id=37 
```

和

```
scrapy shell http://www.alize.gen.tr/index.php?is=urun_detay&id=37

>>> hxs.select("//td[@class='urun_adi']/div/text()").extract() 
```

返回 [u'\r\n'] 但必须是 [u'\r\nANGORA GOLD']

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:39:04.347

为我工作：

```
stav@maia:~$ scrapy shell "http://www.alize.gen.tr/index.php?is=urun_detay&id=37"
2013-03-28 20:36:39-0600 [scrapy] INFO: Scrapy 0.17.0 started (bot: scrapybot)
...
>>> hxs.select("//td[@class='urun_adi']/div/text()").extract()
[u'\r\nANGORA GOLD'] 
```

你用的是什么版本的 Scrapy？

```
stav@maia:~$ scrapy version -v
Scrapy  : 0.17.0
lxml    : 2.3.2.0
libxml2 : 2.7.8
Twisted : 11.1.0
Python  : 2.7.3 (default, Aug  1 2012, 05:14:39) - [GCC 4.6.3]
Platform: Linux-3.2.0-39-generic-x86_64-with-Ubuntu-12.04-precise 
```

# c - 未定义对“环境”的引用？

> ID：15696039
> 
> 赞同：3
> 
> 时间：2013-03-29T01:35:45.920
> 
> 标签：c

我正在尝试使用“环境”变量，但它一直给我一个错误。这似乎是一个 makefile/build 错误，我似乎无法修复它。我已经搜索了答案，但我仍然迷路了。

这是我的c文件：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <dirent.h>
#include "cmd.h" 

int cmdExec() {
...
extern char **environ;
...

printf("Enter a command\n");
//gets (input);
scanf("%s%*[^\n]", input);

if (...) {
    ...
}
else if (strcmp(input, "environ") == 0) {
    int i;
    for (i = 0; environ[i] != NULL; i++) {
        printf("%s\n", environ[i]);
    }
    exit(0);
else
    ...

return 0;
} 
```

这是生成文件：

```
CC = gcc
CFLAGS = -c
CFLAGS-y = -std=c99

all: cmd

cmd.o: cmd.c cmd.h
    $(CC) $(CFLAGS) $(CFLAGS-y) cmd.c

cmd.exe: cmd.o
    $(CC) -o cmd.exe cmd.o  

clean:
    rm -rf *.o cmd.exe a.out 
```

这是输出：

```
make all 
gcc -c -std=c99 cmd.c
gcc   cmd.o   -o cmd
cmd.o:cmd.c:(.text+0x105): undefined reference to `environ'
cmd.o:cmd.c:(.text+0x127): undefined reference to `environ'
collect2: ld returned 1 exit status
make: *** [cmd] Error 1 
```

从我搜索的内容来看，这涉及链接库，但我不知道如何将其应用于我的具体情况。如果有人可以帮我一把，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T01:45:49.503

并非 Windows 上的所有（如果有的话）编译器都通过名为`environ`.

您可以使用例如[getenv](http://msdn.microsoft.com/en-us/library/tehxacec%28v=vs.100%29.aspx) () 来访问环境变量。

win32 API 提供[GetEnvironmentStrings](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683188%28v=vs.85%29.aspx) () 来访问所有变量。

某些平台允许您通过 main() 的附加参数访问环境，您可以将 main 函数声明为：

```
int main(int argc, char *argv[], char *environ[]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T02:02:05.787

`environ`全局变量由 POSIX 定义，Windows 不支持（除非您使用 Cygwin，它是在 Windows 之上实现的类似 POSIX 的层）。

据我所知，非标准定义

```
int main(int argc, char **argv, char **envp) { /* ... */ } 
```

Windows 也不支持。

但是快速的谷歌搜索出现了[这个答案](https://stackoverflow.com/a/2085346/827263)，它指向 Windows 特定[的 GetEnvironmentStrings](http://msdn.microsoft.com/en-us/library/ms683187%28VS.85%29.aspx)函数的文档：

```
LPTCH WINAPI GetEnvironmentStrings(void); 
```

> 如果函数成功，则返回值是指向当前进程的环境块的指针。
> 
> 如果函数失败，则返回值为`NULL`。

结果指向一个长字符串，其中环境变量由`'\0'`空字符分隔，环境由两个连续的空字符终止。

`LPTCH`是 Microsoft 的 typedef，用于指向`unsigned char`或者 16-bit的指针`wchar_t`。有关详细信息，请参阅参考文档。

# jquery - .draggable() 不与 Firefox 的弹性框合作

> ID：15696040
> 
> 赞同：0
> 
> 时间：2013-03-29T01:35:58.943
> 
> 标签：jquery

我构建了一个简单的 jsfiddle 来演示我的问题：http: [//jsfiddle.net/9MD43/](http://jsfiddle.net/9MD43/)

在 Chrome 上调整框的大小使框保持绿色，这就是我想要的。尝试在 Firefox 上调整盒子的大小会导致盒子变成红色，因为弹性盒子缩小到没有。Internet Explorer 10 的行为与 Chrome 类似，并将框保持为绿色（此示例中未显示）。

可以通过从脚本中删除 .draggable 命令来缓解该问题：

```
$("#outer").resizable().draggable(); // <-- removing .draggable() will keep the box green in Firefox after resizing 
```

标记很简单，没什么花哨的：

```
<div id="outer">
    <div id="content">
        <div id="list">
        </div>
    </div>
</div> 
```

“#outer”是弹性框，“#content”的弹性为 1。

“#content”是相对定位的，“#list”是绝对定位在其中的。在我的应用程序的完整版本中，我将项目动态添加到“#list”div 并应用了溢出：滚动，这就是为什么 CSS 在这个简单示例中看起来不寻常的原因。

这是 jquery 的 .draggable 和/或 Firefox 中的错误，是否有针对此问题的干净解决方法？

[编辑] 一个更简单的例子：http: [//jsfiddle.net/LXmuL/](http://jsfiddle.net/LXmuL/)

调整框的大小会在 Firefox 上折叠 flex，但在 Chrome 上不会。这可以通过盒子的背景颜色来观察。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:18:12.227

我发现了这个错误。

jquery 将绝对定位添加到可拖动元素。Firefox 在弹性框和绝对定位方面存在一个长期存在的错误：**[https](https://bugzilla.mozilla.org/show_bug.cgi?id=579776)** ://bugzilla.mozilla.org/show_bug.cgi?id=579776 。实际上，在我的示例中，将外框的位置设置为绝对位置就足以折叠 flex 框。

# php - __在 OOP 类中构造？

> ID：15696043
> 
> 赞同：0
> 
> 时间：2013-03-29T01:36:05.137
> 
> 标签：php, oop

我对 PHP5 的 OOP 风格很陌生，我注意到在示例类和生产类中`__construct`。`__deconstruct`

我已阅读此手册：

[http://php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php)

并查看了 StackOverflow 上的一系列问题/答案。我仍然无法理解它存在的实际含义是什么？

```
class foo {
   function __construct()
   {
     // do something 
   }

   public function Example ()
   {
    echo "Example Functions";
   }

   function __destruct()
   {
     // do something
   }
} 
```

同一个类可以在没有命中的情况下发挥相同的作用：

```
class foo {
       public function Example ()
       {
        echo "Example Functions";
       }
    } 
```

但是上面的例子中的手册指出，我的第一个函数将作为`__construct`

为什么这是 PHP5 OOP 类中的优先事项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:38:48.543

__解构

当一个类即将被垃圾收集时调用析构函数，它允许您在释放类之前执行最后一分钟的操作。

_constructor 只是对立面。它允许您在对象创建期间为其设置属性。

这是创建构造函数的旧方法，根据文档，它留在那里是为了向后兼容。

```
public function Example ()
{
  echo "Example Functions";
} 
```

“为了向后兼容，如果 PHP 5 找不到给定类的 __construct() 函数，并且该类没有从父类继承一个，它将按类的名称搜索旧式构造函数。实际上，这意味着唯一会出现兼容性问题的情况是该类有一个名为 __construct() 的方法，该方法用于不同的语义。”

[http://php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:41:49.023

```
class Foo {
    public function __construct() {
        print("This is called when a new object is created");
        // Good to use when you need to set initial values,
        // (possibly) create a connection to a database or such.
    }

    public function __destruct() {
        print("This is called when the class is removed from memory.");
        // Should be used to clean up after yourself, close connections and such.
    }
}

$foo = new Foo(); 
```

**添加，**

```
class Person {

    private $name; // Instance variable
    private $status; // Instance variable

    // This will be called when a new instance of this class i created (constructed)
    public function __construct($name, $age) {
        $this->name = ucfirst($name); // Change input to first letter uppercase.

        // Let the user of our class input something he is familiar with,
        // then let the constructor take care of that data in order to fit
        // our specific needs.
        if ($age < 20) {
            $this->status = 'Young';
        } else {
            $this->status = 'Old';
        }
    }

    public function printName() {
        print($this->name);
    }

    public function printStatus() {
        print($this->status);
    }
}

$Alice = new Person('alice', 27);
$Alice->printName();
$Alice->printStatus(); 
```

**/添加**

如果您运行上述代码并阅读注释，您应该能够理解何时以及如何使用构造函数和析构函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T01:49:23.930

您需要意识到一个类定义了一个*类型*，这意味着一种数据以及可以对该数据执行的操作。该数据在内部存储为成员变量。同样，这些操作由类的方法定义。构造函数用于初始化对象的初始内部状态（即其成员变量和任何内部操作）。

PHP 中的析构函数通常用于手动对象清理。由于 PHP 的“即发即弃”特性，它们并不经常使用。它们可用于在长时间运行的脚本中释放资源（数据库连接、文件句柄）。

# matlab - 如何在 MATLAB 中找到矩阵的所有行中出现的值的频率？

> ID：15696050
> 
> 赞同：0
> 
> 时间：2013-03-29T01:36:40.000
> 
> 标签：matlab, rows, frequency

我在 MATLAB 中有一个 161*32 矩阵（标记为“indpic”），我试图找出给定数字连续出现的频率。所以我认为我需要为每个值分别分析每一行，但我非常不确定如何去做（我只是 MATLAB 的新手）。这也意味着我对循环和诸如此类的东西非常无用。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:43:03.530

如果要计算特定数字在每一行中出现的次数，可以这样做：

```
sum(indpic == val, 2) 
```

`indpic`您的矩阵（*例如*图像）在哪里，并且是`val`要计算的所需值。

说明：检查每个元素与值的相等性会在计数值的位置产生一个带有“1”的布尔矩阵。对每一行求和（*即*沿^(第二)维求和得到所需的列向量，其中每个元素等于`val`在相应行中重复的次数）。

如果您想计算每个值在图像中重复的次数，这称为[*直方图*](http://en.wikipedia.org/wiki/Histogram)，您可以使用该[`histc`](http://www.mathworks.com/help/matlab/ref/histc.html)命令来实现。例如：

```
histc(indpic, 1:256) 
```

计算从 1 到 256 的每个值在 image 中出现的次数`indpic`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:42:54.193

像这样，

```
sum(indpic(rownum,:) == 7) 
```

显然将 7 更改为任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T06:07:25.147

你可以写

```
length(find(indpic(row_num,:)==some_value)) 
```

它会给你在矩阵“indpic”的“row_num”行中等于“some_value”的元素数量

# java - 当我使用 bufferedReader 时如何检测编码

> ID：15696063
> 
> 赞同：0
> 
> 时间：2013-03-29T01:37:51.857
> 
> 标签：java, encoding

我知道这个问题被问了很多次，但是我被这个问题困住了，我读过的任何东西都没有帮助我。

我有这个代码：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
String line;
while((line = reader.readLine()) != null)content += line+"\r\n";
reader.close(); 
```

我正在尝试获取此网页的内容[http://www.garazh.com.ua/tires/catalog/Marangoni/E-COMM/description/](http://www.garazh.com.ua/tires/catalog/Marangoni/E-COMM/description/)并且所有非拉丁符号都显示错误。

我尝试设置编码，如：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream(), "WINDOWS-1251")); 
```

在这一点上一切都很好！但我无法更改我尝试解析的每个网站的编码，我需要一些解决方案。

所以伙计们，我知道检测编码并不像看起来那么容易，但我真的需要它。如果有人有这样的问题，请解释一下你是如何解决的！

任何帮助appriciated！

这是我用来获取内容的函数的完整代码：

```
protected Map<String, String> getFromUrl(String url){
    Map<String, String> mp = new HashMap<String, String>();
    String newCookie = "", redirect = null;
    try{
        String host = this.getHostName(url), content = "", header = "", UA = this.getUA(), cookie = this.getCookie(host, UA), referer = "http://"+host+"/";
        URL U = new URL(url);
        URLConnection conn = U.openConnection();
        conn.setRequestProperty("Host", host);
        conn.setRequestProperty("User-Agent", UA);
        conn.setRequestProperty("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
        conn.setRequestProperty("Accept-Language", "ru-ru,ru;q=0.8,en-us;q=0.5,en;q=0.3");
        conn.setRequestProperty("Accept-Encoding", "gzip,deflate");
        conn.setRequestProperty("Accept-Charset", "utf-8;q=0.7,*;q=0.7");
        conn.setRequestProperty("Keep-Alive", "115");
        conn.setRequestProperty("Connection", "keep-alive");
        conn.setRequestProperty("Connection", "keep-alive");
        if(referer != null)conn.setRequestProperty("Referer", referer);
        if(cookie != null && !cookie.contentEquals(""))conn.setRequestProperty("Cookie", cookie);
        for(int i=0; ; i++){
            String name = conn.getHeaderFieldKey(i);
            String value = conn.getHeaderField(i);
            if(name == null && value == null)break; 
            else if(name != null)if(name.contentEquals("Set-Cookie"))newCookie += value + " ";
            else if(name.toLowerCase().trim().contentEquals("location"))redirect = value;
            header += name + ": " + value + "\r\n";
        }
        if(!newCookie.contentEquals("") && !newCookie.contentEquals(cookie))this.setCookie(host, UA, newCookie.trim());
        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            String line;
            while((line = reader.readLine()) != null)content += line+"\r\n";
            reader.close();
        }
        catch(Exception e){/*System.out.println(url+"\r\n"+e);*/}
        mp.put("url", url);
        mp.put("header", header);
        mp.put("content", content);
    }
    catch(Exception e){
        mp.put("url", "");
        mp.put("header", "");
        mp.put("content", "");
    }
    if(redirect != null && this.redirectCount < 3){
        mp = getFromUrl(redirect);
        this.redirectCount++;
    }
    return mp;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:42:46.803

[以 jsoup](http://jsoup.org/)为例。检测随机网站的字符编码是一个复杂的问题，因为存在/不存在的标题和 2 个不同的元标记。例如，您链接的页面不会在 Content-Type 标头中发送字符集。

而且你无论如何都需要一个 HTML 解析器，[你没想过使用正则表达式，是](https://stackoverflow.com/a/1732454/995876)吗？

这是示例用法：

```
Connection connection = Jsoup.connect("http://www.garazh.com.ua/tires/catalog/Marangoni/E-COMM/description/");
connection
    .header("Host", host)
    .header("User-Agent", UA)
    .header("Accept", "text/html,application/xhtml+xml,application/xmlq=0.9,*/*q=0.8")
    .header("Accept-Language", "ru-ru,ruq=0.8,en-usq=0.5,enq=0.3")
    .header("Accept-Encoding", "gzip,deflate")
    .header("Accept-Charset", "utf-8q=0.7,*q=0.7")
    .header("Keep-Alive", "115")
    .header("Connection", "keep-alive");

connection.followRedirects(true);

Document doc = connection.get();

Map<String, String> cookies = connection.response().cookies();

Elements titles = doc.select(".title");
for( Element title : titles ) {
    System.out.println(title.ownText());
} 
```

输出：

```
Шины Marangoni E-COMM
Описание шины Marangoni E-COMM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:51:49.280

您要查找“Content-Type”标头：

> 内容类型：文本/html；字符集=utf-8

那里的“字符集”部分就是您要查找的内容。

# c# - 从另一个表单访问类

> ID：15696066
> 
> 赞同：2
> 
> 时间：2013-03-29T01:38:01.490
> 
> 标签：c#, class

我正在努力从不同的形式中获取一个类而不使其成为静态的，这就是我想要做的：

```
//First form
public partial class SetupScreen : Form
{
    Control myObject;
    public Battleship myBattleship;

    public SetupScreen()
    {
        InitializeComponent();
        //Create Class Object
        myBattleship = new Battleship();
    }
}

//Launch second form 
public partial class GameScreen : Form
{
    Control myObject;
    Battleship myBattleship;
    Battleship fredBattleship;

    public GameScreen()
    {
        InitializeComponent();
        //Get the class
        myBattleship = SetupScreen.myBattleship;
    }
} 
```

我不断收到错误“非静态字段、方法或属性需要对象引用”

我希望整个表单都可以访问该类，而不仅仅是一个方法，因此我不想每次都通过它，因为这很麻烦

我不想让类成为静态的，因为它不能被删除，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:48:52.773

您收到此错误是因为您尝试以静态方式访问非静态字段。

你在哪里实例化 SetupScreen 和 GameScreen？

为什么不这样：

```
public partial class SetupScreen : Form
{
    private Control myObject;
    public Battleship myBattleship;
    private GameScreen gameScreen;

    public SetupScreen()
    {
        InitializeComponent();
        //Create Class Object
        myBattleship = new Battleship();
        gameScreen = new GameScreen(this);
    }
}

public partial class GameScreen : Form
{
    private Control myObject;
    private Battleship myBattleship;
    private Battleship fredBattleship;
    private SetupScreen setupScreen;

    public GameScreen(SetupScreen setupScreen)
    {
        InitializeComponent();

        this.setupScreen = setupScreen;
        myBattleship = this.setupScreen.myBattleship;

    }
} 
```

当然，这仅在您可以在 SetupScreen 中实例化 GameScreen 时才有效。如果你告诉我你在哪里/如何“启动”这些表格，我可以给你一个更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:51:24.233

您可以将您的第一个表单的引用传递给您的第二个表单，或者（我会做什么）`Battleship`在您的第二个表单上创建一个公共属性并以这种方式传递您的对象。

```
//First form
public partial class SetupScreen : Form
{
    Control myObject;
    public Battleship myBattleship;

    public SetupScreen()
    {
        InitializeComponent();
        //Create Class Object
        myBattleship = new Battleship();

        Form gameForm = new GameScreen(); // New form object
        gameForm.MyBattleship = myBattleship; // Set property
        gameForm.Show(); // Show form
    }
}

//Second form 
public partial class GameScreen : Form
{
    Control myObject;
    Battleship fredBattleship;

    public BattleShip MyBattleship { set; get; }

    public GameScreen()
    {
        InitializeComponent();
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-26T16:22:37.777

你必须使用单例模式。所以你的代码必须是这样的：

```
//First form
public partial class SetupScreen : Form
{
 public static SetupScreen setupScreenFrm;
 Control myObject;
 public Battleship myBattleship;

 public SetupScreen()
 {
    setupScreenFrm=this;
    InitializeComponent();
    //Create Class Object
    myBattleship = new Battleship();
 }
}

//Launch second form 
public partial class GameScreen : Form
{
 Control myObject;
 Battleship myBattleship;
 Battleship fredBattleship;

 public GameScreen()
 {
    InitializeComponent();
    //Get the class
    SetupScreen ssFrm=SetupScreen.setupScreenFrm;
    myBattleship = ssFrm.myBattleship;
 }
} 
```

首先，在您的应用程序开始时，创建一个 SetupScreen 表单。

现在您可以在任何地方访问 SetupScreen。

# c# - Windows Phone 导航在两者之间转换延迟和空白屏幕

> ID：15696075
> 
> 赞同：0
> 
> 时间：2013-03-29T01:39:11.903
> 
> 标签：c#, windows-phone-7

我正在使用 WP Toolkit 在我的应用程序页面之间进行转换，它工作正常，但是在从一个页面导航到另一个页面时，我在转换之间遇到了这种奇怪的延迟，它只是显示一个空白屏幕，显然看起来不太好，没有任何过渡，它会立即打开页面，没有任何延迟或空白屏幕。这花了我将近 2 天的时间，我不知道出了什么问题，如果有人可以帮助我或建议另一个页面转换库，我将不胜感激。

（我尝试了 WP7Contrib 转换，但我有同样的问题，不确定它是我的应用程序还是库）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T07:12:22.537

事实上，过渡之间的背景是黑色的，为了避免这种行为，我通过在 App.Xaml.cs 中设置背景解决了这个问题

```
 private void InitializePhoneApplication()
    {
        if (phoneApplicationInitialized)
            return;

        // Create the frame but don't set it as RootVisual yet; this allows the splash
        // screen to remain active until the application is ready to render.
        RootFrame = new TransitionFrame();

        var brush = new ImageBrush
        {
            ImageSource = new System.Windows.Media.Imaging.BitmapImage(new Uri("Images/Background.jpg", UriKind.Relative)),
            Opacity = 0.8d
        };

        RootFrame.Background = brush;

        RootFrame.Navigated += CompleteInitializePhoneApplication;

        // Handle navigation failures
        RootFrame.NavigationFailed += RootFrame_NavigationFailed;

        // Ensure we don't initialize again
        phoneApplicationInitialized = true;
    } 
```

这样，我的所有页面都有我的背景，并且在过渡期间不再显示黑色背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:06:26.653

我建议您在页面之间创建自己的幻灯片过渡。其实很简单。创建一个故事板，并分别在您正在导航的页面和您要进入的页面中的 onNavigatingFrom 和 onNavigatedTo 函数中播放它们。它只是为我提供了我在应用程序中想要的内容和方式。删除额外的引用会使您的代码更加优化。

# jquery - 带有简单 if else if 语句 jQuery 的可见性 CSS

> ID：15696078
> 
> 赞同：1
> 
> 时间：2013-03-29T01:39:38.913
> 
> 标签：jquery, regex, if-statement, visibility

我正在尝试使用正则表达式验证用户输入。如果用户未填写该字段，则会显示错误“请填写该字段”。问题是如果用户没有填写该字段，也会显示第二个错误。我怎样才能阻止这种情况发生？这是我尝试过的：

```
if (!regex.test($('#fname').val())) {
            $("#err2fname").removeClass("hidden"); //displays error if it doesn't match the regex
    }
    else if ($("#fname").val() == "" ) {
        $("#err2fname").addClass("hidden"); //hides if field is empty
    }
    else ($("#err2fname").addClass("hidden")); //hides if it matches the regex 
```

我创建了一个显示我的问题的[小提琴。](http://jsfiddle.net/Yb2Tv/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:50:12.957

```
 if ($("#fname").val() == "") {
        $("#errfname").removeClass("hidden");
        $("#err2fname").addClass("hidden");
    } else {
        $("#errfname").addClass("hidden");
        if (!regex.test($('#fname').val())) {
            $("#err2fname").removeClass("hidden");
        } else {
            $("#err2fname").addClass("hidden");
        }
    } 
```

我已经更新了你的小提琴。请试着看看这个[小提琴](http://jsfiddle.net/Yb2Tv/12/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T02:03:52.860

```
$("#fname").blur(function () {
    $("#errfname").toggleClass("hidden", this.value != "");
    $("#err2fname").toggleClass("hidden", !regex.test(this.value) && this.value.length);
}) 
```

[http://jsfiddle.net/SrHGX/1/](http://jsfiddle.net/SrHGX/1/)

# php - HTML 解析 - 将文本转换为链接

> ID：15696096
> 
> 赞同：0
> 
> 时间：2013-03-29T01:42:34.183
> 
> 标签：php, javascript, html, parsing, dom

假设我有这个文本：

> 亚伦与他兄弟在米利巴的罪有牵连（**民数记 20:8-13**），因此不被允许进入应许之地。当部落到达何珥山时，“在以东地的边缘”，摩西在上帝的命令下带领亚伦和他的儿子以利亚撒到了山顶，在所有人的视线中。他在那里脱下亚伦的祭司袍，给以利亚撒穿上；亚伦死在山顶上，享年 123 岁（**民数记 20:23-29**。比较**申命记 10:6**；**32** :50 ）

我想要做的是，**将上面的每个粗体文本转换为一个链接**，以及链接，如果它是：

*   编号。20:8-12，应该是：<a href="num20.8-12">Num. 20:8-13</a>
*   申命记。10:6；32:50，应该是：<a href="deut10.6">Deut. 10:6</a> <a href="deut32.50">申命记。32:50

这段文字的结构如下：

```
<DIV>
  <B>Aaron</B>
  <SPAN>
    Aaron was implicated in the sin of his brother at Meribah (Num. 20:8-13), and on that account was not permitted to enter the Promised Land. When the tribes arrived at Mount Hor, "in the edge of the land of Edom," at the command of God Moses led Aaron and his son Eleazar to the top of that mountain, in the sight of all the people. There he stripped Aaron of his priestly vestments, and put them upon Eleazar; and there Aaron died on the top of the mount, being 123 years old (Num. 20:23-29\. Comp. Deut. 10:6; 32:50)
  </SPAN>
</DIV> 
```

任何伟大的想法将不胜感激。谢谢 ：）

* * *

**编辑**

编码：

```
$chapters = array ("Deut", "Num");

$html = file_get_html($link);

foreach($html->find('div') as $dict) {
    $descr  = $dict->find('SPAN', 0)->innertext;    
    $descrl = preg_replace("/$chapters\. [0-9:-]*/", "<a href=\"$0\">$0</a>", $descr); //--> See description below

    echo $descrl . "<hr/>";
} 
```

说明：虽然我将 更改`$chapters`为单个单词，例如`Num`or `Deut`，但效果很好，但是当我将其更改为`$chapters`时，它不会返回任何链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:48:58.943

您没有指定规则，您应该为自己定义和改进；我已经处理了你的具体情况。

```
//replace against either book followed by period followed by space
//followed by one or more digit, comma, semicolon, space, or dash
txt.replace(/(Num|Deut)\. ([\d:,; -]+)/g, function (match, book, verses) {
    var link = '';
    //split the verse on semicolon + space as each must be linked
    verses.split(/;\s+/).forEach(function (elem) {
        //create the link; replace : with period
        link += '<a href="' + book.toLowerCase() + elem.replace(':', '.') + '">'
            + book + '. ' + elem + '</a> ';
    });
    return link;
}); 
```

[http://jsfiddle.net/XaVXW/](http://jsfiddle.net/XaVXW/)

# c# - 编译时检查控制器方法的动作链接

> ID：15696099
> 
> 赞同：8
> 
> 时间：2013-03-29T01:42:57.013
> 
> 标签：c#, asp.net-mvc

有没有办法创建一个强类型的控制器动作？例如：

在我使用的控制器中：

```
aClientLink = Url.Action("MethodName", "ControllerName", new { Params... }); 
```

我想使用：

```
aClientLink = Url.Action(Controller.MethodName,ControllerName); 
```

我不想重新发明轮子。我相信有人有一些聪明的解决方案。这将允许我向控制器方法添加编译时间检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T03:15:35.613

您可以创建自己的`HtmlHelper`使用表达式的扩展方法（与它们用于引用模型属性的方式相同）。

```
@* An expression used to indicate which property of the model should be
examined. It may or may not actually be executed. *@
@Html.IdFor( o => o.FirstName )

@* Don't actually evaluate the expression, just parse it for the method name *@
@Url.ActionFor( o => o.ControllerMethod() ) 
```

您可以查看 MVC 源以获取将表达式作为输入值的辅助方法示例，您可以[在此处查看我的答案](https://stackoverflow.com/a/15232267/453277)，了解如何从表达式中检索有关对象属性的元数据。

**然而...**

在视图中使用，我认为这种方法将您的视图与控制器联系得太紧。我不喜欢魔术字符串，但它们确实提供了完全的解耦。

目前尚不清楚您是否想在控制器中使用此类方法，在这种情况下，关注点的分离就不会成为问题。您仍然会失去某些能力，例如为动作名称起别名的能力。

# javascript - 需要使 div 内的图像翻转（使用 jquery）

> ID：15696102
> 
> 赞同：0
> 
> 时间：2013-03-29T01:43:16.047
> 
> 标签：javascript, jquery, rollover

好吧，所以我有一些独特的问题；首先，我的 jquery 不工作；我很可能没有把它放在 html 中，所以我要扔掉很多代码来看看；

基本上，当 div 类翻转时，我需要翻转类图像更改为悬停状态（我有一些 css 将 div 类显示更改为阻止）好吧，这里是 html

```
<div id="header">
<div class="home" id="home" ><a href="index.html"><p><img src="images/home-crown.png" class="rollover" width="100px" /></p></a></div> 
```

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" ></script>
<script type="text/javascript" src="js/load-it-up.js"></script> 
```

/所以是的......试图在这里交换那个图像的东西是jquery

```
$(document).ready(function(){

 $("img.rollover").hover(
      function() 
        {this.src = this.src.replace("images/home-crown.png","images/home-crown-hover.png");},
      function() 
        {this.src = this.src.replace("images/home-crown-hover.png","images/home-crown.png");}
 ); 
}); 
```

真的很沮丧，因为我尝试了多种解决方案；任何帮助将不胜感激；这可能是愚蠢的：P

现在我只是想让图像翻转（至少）我真的希望翻转在 div 翻转时激活（#home div）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:52:02.817

试试这个。

```
$("img.rollover").hover(
   function(){
      $(this).attr("src","images/home-crown-hover.png");
   },
   function(){
      $(this).attr("src","images/home-crown.png");
   }
); 
```

# stata - Stata：如何对变量进行顶部编码

> ID：15696107
> 
> 赞同：1
> 
> 时间：2013-03-29T01:44:35.473
> 
> 标签：stata

使用 auto.dta 数据，我想在顶部 X% 的中位数处对 PRICE 变量进行顶部编码。例如，X% 可能是 3%、4% 等。我如何在 Stata 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:51:11.670

在回答您的问题时，我假设您要替换上面的所有值，比如 top `10%`，用值 say `X`（`top 90%`在下面的代码中）。

这是示例代码：

```
program topcode
    sysuse auto, clear
    pctile pct =  price, nq(10)
    dis r(r9) 
    gen newprice=price
    replace newprice=r(r9) if newprice>r(r9)
end 
```

# java - 为什么我的代码会产生错误？

> ID：15696110
> 
> 赞同：0
> 
> 时间：2013-03-29T01:44:52.493
> 
> 标签：java, classloader, inputstream

```
* A simple panel for testing various parts of our game.
 * This is not part of the game.  It's just for testing.
 */
package game;

import java.awt.*;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.util.Scanner;
import javax.imageio.ImageIO;
import javax.swing.JPanel;

/**
  * A simple panel for testing various parts of our game.
  * This is not part of the game.  It's just for testing.
  */
public class TestPanel extends JPanel
{
    private static final long serialVersionUID = 1L;  // Ignore this - It's just to get rid of a warning.

    // Instance variable(s).

    private Image backdrop;

    /**
     * Constructor - loads a background image
     */
    public TestPanel ()
    {
        try
        {
             ClassLoader myLoader = this.getClass().getClassLoader();
             InputStream imageStream = myLoader.getResourceAsStream("resources/path_1.jpg");
             backdrop = ImageIO.read(imageStream);

             // You will uncomment these lines when you need to read a text file.

              InputStream pointStream = myLoader.getResourceAsStream("resources/   path_1.txt");
              Scanner s = new Scanner (pointStream);
        }
        catch (IOException e)
        {
            System.out.println ("Could not load: " + e);
        }
    }

    /**
     * This paint meethod draws the background image anchored
     * in the upper-left corner of the panel.  
     */
    public void paintComponent (Graphics g)
    {
        g.drawImage(backdrop, 0, 0, null);        
    }

    /* Override the functions that report this panel's size
     * to its enclosing container. */

    public Dimension getMinimumSize()
    {
        return new Dimension (600, 600);
    }

    public Dimension getMaximumSize()
    {
        return getMinimumSize();
    }

    public Dimension getPreferredSize()
    {
        return getMinimumSize();
    }
} 
```

这段代码针对我正在为我的 Java 课程做的视频游戏作业。此类仅用于测试我们的代码。在分配的方向上，我被告知将存在于 try 块中的代码放在上面，如上所示。显然，代码应该打开我工作区文件夹中的 JPEG 图像。但是，当我尝试代码时，它只说明：

```
Exception in thread "main" java.lang.NullPointerException   at
 java.io.Reader.<init>(Unknown Source)  at
 java.io.InputStreamReader.<init>(Unknown Source)   at
 java.util.Scanner.<init>(Unknown Source)   at
 game.TestPanel.<init>(TestPanel.java:43)   at
 game.TestApplication.main(TestApplication.java:24) 
```

我不完全清楚 inputStream 和 classLoaders 的作用。所以，如果你有任何关于这两个方面的基本信息，那就太好了。另外，我知道构造函数方法下面的其他方法中没有代码。我的作业指导没有说明我应该在这些方法中输入什么。

```
enter code here
enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:47:36.400

你在第二个文件名中有一些额外的空格：

“资源/ path_1.txt”

显然这是一个错字。然后，当您`getResourceAsStream`使用此流调用时，由于那些额外的空格，它找不到您想要的文件，因此该调用返回一个空指针，该指针被传递给扫描仪，并最终导致 NPE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:27:20.417

有许多现有的 SO Questions 可以解释为什么在各种情况下`getResourceAsStream`返回；`null`例如

*   [Junit + getResourceAsStream 返回 Null](https://stackoverflow.com/questions/5238048/junit-getresourceasstream-returning-null)
*   [getResourceAsStream() 总是返回 null](https://stackoverflow.com/questions/2797162/getresourceasstream-is-always-returning-null)
*   [getResourceAsStream 返回 null](https://stackoverflow.com/questions/7017361/getresourceasstream-returning-null)
*   [方法 getResourceAsStream 在 ubuntu 上返回 null](https://stackoverflow.com/questions/14875583/the-method-getresourceasstream-returns-null-on-ubuntu)

它们都归结为一个根本原因：类加载器找不到您告诉它要查找的资源。javadoc 说如果类加载器找不到请求的资源，它会返回`null`而不是抛出异常。

发生这种情况的原因有很多。常见的包括：

*   资源不存在，
*   资源不在类路径中（例如，它是文件系统中的文件），
*   它确实存在于类路径中，但您使用了错误的路径字符串，或者
*   您使用了相对路径字符串，但您正在解析它的上下文不正确。

# javascript - 如果 google chrome 使用 WebKit，我可以创建自己的“chrome”吗？

> ID：15696113
> 
> 赞同：4
> 
> 时间：2013-03-29T01:45:23.147
> 
> 标签：javascript, google-chrome, webkit, rendering

Google chrome 浏览器使用 WebKit 进行 HTML/CSS/JavaScript/etc... 渲染，这意味着 Google Inc. 使用了所有人都可以使用的东西，并且没有自己创建任何东西

那么，如果 WebKit 是免费的，我可以用它来创建自己的浏览器，速度与 chrome 一样吗？谷歌是不是只做界面，不开发渲染引擎？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T01:54:49.070

基本上你是对的，但也要记住 google chrome 使用 V8 作为他们的 javascript 引擎。您可能会将这一思路扩展到构建功能齐全的浏览器所需的其他部分。
您还需要（跨平台）代码来启动和显示您的“chrome”ui 并让它与操作系统交互。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T02:01:11.673

是的，您可以构建自己的浏览器。但是，有多种因素使 Google Chrome 成为更好的浏览器。渲染引擎可能是开源的。但是，在查看浏览器时，您还需要考虑许多其他事项。这是浏览器的抽象架构，Webkit 只是其渲染引擎。

![浏览架构](../Images/d52ead869395ddd242d0ad9fd88998ef.png)

请参阅这篇博文并尝试了解浏览器所做的各种事情以及它们使用的引擎。

[http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/](http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/)

有许多基于 Chromium 的浏览器，例如 Rockmelt。

免责声明：这是来自 html5rocks 博客的图片。

# java - 将对象数组中的元素移动到不同元素的前面[Java]

> ID：15696115
> 
> 赞同：0
> 
> 时间：2013-03-29T01:45:39.040
> 
> 标签：java, arrays, object

我正在做一个作业，我想知道是否有一个容易移动的数组中的元素。我正在尝试按字母顺序对作者列表进行排序，所以我想将 array[1] 与 array[2] 进行比较，如果 2 属于 1 的前面，我只想将它移到那里。我认为最好的方法是使用两个 for 循环。这基本上就是我所拥有的。有没有什么简单的方法可以将 k 移到数组中 j 的前面？

```
for(int j = 0; i > j; j++) {
            for(int k = 0; k > i; k++) {
                if(array[j].getAuthor.compareTo(array[k]) == -1) {
                    //move k in front of j
                } else {
                                  //do nothing
                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:58:46.840

你使用java，所以jdk为你提供了一个方法。

```
Arrays.sort(array,new Comparator<Object> {
      @Override
      public int compare(final Object pre, final Object next){
        //return 0, 1 ,-1 
}
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:39:32.910

Java 数组没有原始的“移到前面”操作。

您需要做的是重新考虑您的算法，以便它使用您可用的原始操作来工作。这些是^*在特定偏移处获取和设置元素（使用`array[i]`），以及获取数组的长度（使用`array.length`）。

因此，如果要放在`array[i]`前面，则`array[j]`需要使用循环和分配将所有元素`i`向左`j`或向右移动。我会让你去解决细节......因为这显然是布置你作业的人希望你做的事情。

* * *

^(* - 实际上，有几个用于批量复制数组元素的库方法；例如`System.arraycopy`。但是，我建议您使用循环来实现它，以便您可以更好地了解所涉及的内容。)

# javascript - 将数据发送到 salesforce Web 到潜在客户表单

> ID：15696117
> 
> 赞同：0
> 
> 时间：2013-03-29T01:45:43.087
> 
> 标签：javascript, salesforce

我在 fb 上创建了一个应用程序，并希望人们注册它。我希望无论谁注册，都应使用网络潜在客户表单将详细信息发送到我的 Salesforce 表单。Salesforce 提供了一个代码（javascript 表单）来发送数据。如果我在浏览器上编译这段代码，它就可以正常工作。但是，如果我将此代码粘贴到我在 facebook 上的应用程序中，则条目不会发布到 salesforce。有人可以建议应该进行哪些更改吗？这可以使用 JSON 和 AJAX 来完成吗？

我写了这段代码（参考评论中给出的链接），但代码似乎不起作用。此代码不提供任何输出！

```
 <html>
    <script type="text/javascript">
    function funct()
    {
    var first_name= myForm.first_name.value;
    var last_name=myForm.last_name.value;
    var email=myForm.email.value;
    alert(first_name);
    var $form = $(myForm, {
        method: "POST",
        action: "https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8",
        target: "my-iframe"
    }).appendTo("body");

var $iframe = $("<iframe>", {
        name: "my-iframe"
    }).bind( "load", function () {
        $('.error').hide();
        $('.success').slideDown('slow');
        $('form#callToAction').fadeOut('slow');
        $iframe.remove();
        $form.remove();
    }).appendTo("body");

    $.each(("first_name=" + first_name + "&last_name=" + last_name + "&email=" + email + "&oid"= + "00Di0000000JbNJ").split("&")), function (index, value) {
        var pair = value.split("=");
        $form.append("<input>", {
            type: "hidden",
            name: pair[0],
            value: pair[1]
        });
    });

    $form.submit();

    }
    </script>
    <b> You just need to share your name and email address!! </b> <br>
    <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=UTF-8">

    <!--<form action="https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="POST">-->

    <input type=hidden name="oid" value="00Di0000000JbNJ">
    <input type=hidden name="retURL" value="http://">

     <form name="myForm" onSubmit="return funct()" >
    <label for="first_name">First Name</label><input  id="first_name" maxlength="40" name="first_name" size="20" type="text" /><br>
    <label for="last_name">Last Name</label><input  id="last_name" maxlength="80" name="last_name" size="20" type="text" /><br>
    <label for="email">Email</label><input  id="email" maxlength="80" name="email" size="20" type="text" /><br>
    <input type="Submit" onSubmit="funct();" value="Submit"></input>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:54:42.450

你可以这样做。我已经发布到 Salesforce web 以通过 C# 仅使用 HTTP 帖子进行领导，因此使用 ajax 调用应该可以。在 salesforce 论坛中查看[这篇文章，](http://boards.developerforce.com/t5/Other-Salesforce-Applications/Web-to-lead-with-Ajax-toolkit/td-p/23831)看看它是否有帮助。

# c# - 泛型类型函数：返回一个不可为空的值

> ID：15696120
> 
> 赞同：1
> 
> 时间：2013-03-29T01:45:53.150
> 
> 标签：c#, generics, nullable, default-value, non-nullable

我写了这个微不足道的效用函数：

```
public static T isNull<T>(T? v, T d)
{
    return v == null ? d : v.Value;
} 
```

目的是避免烦人的任务，例如检查成员是否为空，这在读取 linq 记录集时很常见。问题是它抛出了这个错误：

> *类型“T”必须是不可为空的值类型，才能将其用作泛型类型或方法“System.Nullable<T>”中的参数“T”*

这个错误似乎是合法的，无论如何我希望我能做这样的事情：

```
int? myField = record.myField;
int  myValue = isNull(myField, 0); 
```

代替：

```
int? myField = record.myField;
int  myValue = myField == null ? 0 : myField.Value; 
```

我觉得我缺少一些 c# 基础知识。是否存在完成我的任务的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T01:48:40.427

*[泛型约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)*可用于泛型函数以将允许使用的类型限制为某些子集，这为您如何在方法或类中使用这些类型提供了可能性。

在这种情况下，您可以应用约束以将`T`其限制为 a`struct`以解决您的特定编译器错误。

```
public static T IsNull<T>(T? v, T d) where T : struct
{
    return v == null ? d : v.Value;
} 
```

但是，另一个答案确实正确指出您可以选择`??`在这种*特殊*情况下使用空合并运算符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T01:52:14.243

这称为空值合并，并且有一个内置运算符来执行此操作：

```
int myValue = record.myField ?? 0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T02:03:41.460

虽然其他答案都很好，但大概您想编写您的方法，以便它适用于引用和值类型。您可以通过使用两个具有通用约束的重载来实现这一点。

```
public static T IsNull<T>(T v, T d) where T : class
{
    return v ?? d;
}

public static T IsNull<T>(T? v, T d) where T : struct
{
    return v.HasValue ? v.Value : d;
} 
```

*注意：*`IsNull`使用值类型以外的调用`Nullable<T>`仍然无法编译。例如

```
string myString = ...
Console.WriteLine(IsNull(myString, "foo"))            // works

object myObject = ...
Console.WriteLine(IsNull(myMyObject, new object()))   // works

DateTime? myDateTime = ...
Console.WriteLine(IsNull(myDateTme, DateTme.Now))     // works

int? myInt1 = ...
Console.WriteLine(IsNull(myInt1, DateTme.Now))        // works

int myInt2 = ...
Console.WriteLine(IsNull(myInt2, DateTme.Now))        // <-- compiler error 
```

# c# - 正则表达式匹配单词的第一次出现

> ID：15696121
> 
> 赞同：0
> 
> 时间：2013-03-29T01:45:54.177
> 
> 标签：c#, regex

对不起。我重新调整了下面的示例，如何在下一段中第一次出现**mary之后匹配数字（** **1** ） （在我的情况下，所有三个组都是强制性的）：

 **```
Regex.Match("Do you know 3453 **Mary** has a little lamb 1 and Mary likes dancing 2."
, @"(Do).*(Mary).*(\d)"); 
```

目前它与第二个**Mary**匹配，结果第三组捕获了**2**而不是**1**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:09:38.463

使用`.*?`代替`.*`：

```
Regex.Match("Do you know **Mary** has a little lamb 1 and Mary likes dancing 2.",
  @"(Do).*?(Mary).*?(\d)"); 
```

`.*`匹配可能的最长子串（贪婪），而`.*?`匹配最短的（惰性）。在您的示例中，第一个`.*`包含第一个`Mary`，因为它匹配尽可能多的字符。**

# batch-file - 批处理“FOR”循环解析器

> ID：15696122
> 
> 赞同：0
> 
> 时间：2013-03-29T01:45:56.660
> 
> 标签：batch-file

我有一小段代码应该通过一个名为 data.dta 的文件进行解析，但由于某种原因它一直在说（此时出乎意料，这是代码（我在给我错误的行旁添加了注释） ：

```
:load
cd %appdata%\.Trek
FOR /f "eol=#" %%t IN (Resources\Data\data.dta) DO ( ::problem line
        set count=1
    set cor=0
    FOR /f "tokens=1-2 delims=^=" %%f IN ("%%t") DO (
        If %count% == 1 (
            IF %%f==VERSION set cor=1
        )
        If %count% == 2 (
            IF %cor%==1 (
                set cor=0
                set ver=%%f
            )
        )
        set /a count=%count%+1
    )
)    
Title TREK Unmounted Console Version: %ver% 
```

data.dta 的内容：

```
VERSION=ALPHA 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:04:35.123

我可以发现一个主要问题，您需要启用延迟扩展才能使其工作。

在代码块中，所有变量都将具有在代码块开始***之前设置的值。***如果您在代码块内设置变量***，则只有在代码块******之外***它才会具有该值。

试试这个例子：

```
@echo off
set var=1
echo %var%
for /l %%i in (1,1,5) do (
    set /a var+=1
    echo %var%
)
echo %var%
pause>nul 
```

输出将是：

```
1
1
1
1
1
1
6 
```

现在，尝试启用延迟扩展，并将百分号替换为感叹号：

```
@echo off
setlocal enabledelayedexpansion
set var=1
echo %var%
for /l %%i in (1,1,5) do (
    set /a var+=1
    echo !var!
)
echo %var% 
```

输出：

```
1
2
3
4
5
6
6 
```

因此，将您的代码更改为：

```
:load
cd %appdata%\.Trek
setlocal enabledelayedexpansion
FOR /f "eol=#" %%t IN (Resources\Data\data.dta) DO ( 
    set count=1
    set cor=0
    FOR /f "tokens=1-2 delims=^=" %%f IN ("%%t") DO (
        If !count! == 1 (
            IF %%f==VERSION set cor=1
        )
        If !count! == 2 (
            IF !cor!==1 (
            set cor=0
            set ver=%%f
            )
        )
        set /a count+=1
    )
)    
Title TREK Unmounted Console Version: %ver%
endlocal 
```

...看看现在会发生什么。

# javascript - 通过 JavaScript/DOM 访问 CSS 媒体查询规则

> ID：15696124
> 
> 赞同：17
> 
> 时间：2013-03-29T01:46:04.940
> 
> 标签：javascript, css, dom, media-queries

我一直在使用许多库（包括我自己的）来根据我在 CSS 文件中概述的媒体查询动态加载资产。例如：

在 CSS 中：

```
 @media screen and (max-width: 480px) {
    .foo {
      display: none;
    }
  } 
```

**并**使用资产加载器；[require.js](http://requirejs.org/)，[modernizr.js](http://modernizr.com/)等或使用`window.matchMedia`和相关的`addListener()`功能：

```
 if (function("screen and (max-width: 480px)")){
    // Load several files
    load(['mobile.js','mobile.css']);
  } 
```

两次声明它们很尴尬/愚蠢，据我所知，所有 JS 帮助程序库和资产加载器都要求您重复媒体查询，而不是从 JS/DOM以**编程方式定位它们。**

因此，我一直在探索通过 以编程方式访问值的能力`document.stylesheets`，但我不确定它们是否可以访问，而且似乎很少有文档表明它们是可访问的。

我所做的最远的事情是寻找`CSSMediaRule`并使用`console.dir(document.stylesheets)`其他方法来探索样式表对象。

但是没有（在 内`document.stylesheets`）引用 CSS 中使用的实际媒体查询规则 - 只有作为媒体查询结果应用的类......我试图以编程方式定位的是：

> “屏幕和（最大宽度：480px）”

有没有办法通过 JavaScript/DOM访问这样的 CSS 媒体查询**规则？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T02:08:31.857

对于获取规则，请使用跨浏览器变体：

```
var styleSheet = document.styleSheets[0];
var rules = styleSheet.cssRules || styleSheet.rules; // IE <= 8 use "rules" property 
```

用于检测规则列表中的 CSSMediaRule 对象（不适用于 IE <= 8，因为“CSSMediaRule”类仅在 IE >= 9 中可用）：

```
var i = 0;
if (rules[i].type == 4)
{
    // Do something
} 
```

从当前 DOM 获取样式的一些函数（不适用于 IE <= 8）：

```
function getCssRulesFromDocumentStyleSheets(media)
{
    var resultCssRules = '';
    for (var i = 0; i < document.styleSheets.length; i++)
    {
        var styleSheet = document.styleSheets[i];

        if (isRuleFromMedia(styleSheet, media))
            resultCssRules += getCssRulesFromRuleList(styleSheet.cssRules || styleSheet.rules, media);
    }

    return resultCssRules;
}

function getCssRulesFromRuleList(rules, media)
{
    var resultCssRules = '';
    for (var i = 0; i < rules.length; i++)
    {
        var rule = rules[i];
        if (rule.type == 1) // CSSStyleRule
        {
            resultCssRules += rule.cssText + "\r\n";
        }
        else if (rule.type == 3) // CSSImportRule
        {
            if (isRuleFromMedia(rule, media))
                resultCssRules += getCssRulesFromRuleList(rule.styleSheet.cssRules || rule.styleSheet.rules, media);
        }
        else if (rule.type == 4) // CSSMediaRule
        {
            if (isRuleFromMedia(rule, media))
                resultCssRules += getCssRulesFromRuleList(rule.cssRules || rule.rules, media);
        }
    }

    return resultCssRules;
}

function isRuleFromMedia(ruleOrStyleSheet, media)
{
    while (ruleOrStyleSheet)
    {
        var mediaList = ruleOrStyleSheet.media;
        if (mediaList)
        {
            if (!isMediaListContainsValue(mediaList, media) && !isMediaListContainsValue(mediaList, 'all') && mediaList.length > 0)
                return false;
        }

        ruleOrStyleSheet = ruleOrStyleSheet.ownerRule || ruleOrStyleSheet.parentRule || ruleOrStyleSheet.parentStyleSheet;
    }

    return true;
}

function isMediaListContainsValue(mediaList, media)
{
    media = String(media).toLowerCase();

    for (var i = 0; i < mediaList.length; i++)
    {
        // Access to mediaList by "[index]" notation now work in IE (tested in versions 7, 8, 9)
        if (String(mediaList.item(i)).toLowerCase() == media)
            return true;
    }

    return false;
} 
```

函数使用示例：

```
<style type="text/css">
    @media screen and (max-width: 480px) {
        p { margin: 10px; }
    }

    @media screen and (max-width: 500px) {
        p { margin: 15px; }
    }

    @media print {
        p { margin: 20px; }
    }
</style>

<!-- ... -->

<script type="text/javascript">
    alert(getCssRulesFromDocumentStyleSheets('print'));
    alert(getCssRulesFromDocumentStyleSheets('screen and (max-width: 480px)'));
    // For IE (no space after colon), you can add fix to "isMediaListContainsValue" function
    alert(getCssRulesFromDocumentStyleSheets('screen and (max-width:480px)'));
</script> 
```

这是一个 JS Fiddle：[https ://jsfiddle.net/luisperezphd/hyentcqc/](https://jsfiddle.net/luisperezphd/hyentcqc/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-20T10:45:53.773

我就是这样做的：

在 css 中创建类以在各种断点处公开或隐藏内容。无论如何，这是一个方便的实用程序。例如，这些已经在 Twitter Bootstrap 中可用。

```
<style type="text/css">
  .visible-sm, .visible-md, .visible-lg{
    display:none;
  }
  @media (max-width: 480px) {
     .visible-sm{
       display: block;
     }
  }
  @media (min-width: 481px) and (max-width: 960px) {
     .visible-md{
       display: block;
     }
  }
  @media (min-width: 961px) {
     .visible-lg{
       display: block;
     }
  }
</style> 
```

在您的所有文档中，使用这些类添加空范围。如果您保持跨度内联，它们将不会显示在页面上。

```
<span id="media_test">
  <span class="visible-sm"></span>
  <span class="visible-md"></span>
  <span class="visible-lg"></span>
</span> 
```

将此简短的 jquery 扩展添加到您的脚本文件中。这会在 body 标记中设置一个与当前媒体查询匹配的新类。

```
(function ($) { 
  $.fn.media_size = function () {
    //the default port size
    var size = 'lg';
    //the sizes used in the css
    var sizes = ['sm','md','lg'];
    //loop over to find which is not hidden
    for (var i = sizes.length - 1; i >= 0; i--) {
     if($('#media_test .visible-'+sizes[i]).css("display").indexOf('none') == -1){
      size = sizes[i];
      break;
     };
    };
    //add a new class to the body tag
    $('body').removeClass(sizes.join(' ')).addClass(size);
  }
}(jQuery));
$(document).media_size(); 
```

现在您可以自动集成您的 CSS 媒体查询 Modernizr 样式。

您可以根据您的媒体查询编写有条件的 javascript (jquery)：

```
<a href="#">how big is this viewport?</a>

<script type="text/javascript">
  $('.sm a').click(function(e){ alert('Media queries say I\'m a small viewport');});
  $('.lg a').click(function(e){ alert('Media queries say I\'m a large viewport');});
</script> 
```

# database - PHP注册表和数据库错误

> ID：15696128
> 
> 赞同：0
> 
> 时间：2013-03-29T01:46:35.897
> 
> 标签：database, forms, php

我在这里问了几个问题并得到了很多帮助，所以我会提前感谢我的下一个问题。我一直在尝试为我的童子军小组（注册营地）创建注册系统，但我已经陷入无法将表格中的数据发送到数据库中的地步，然后使用发送确认电子邮件PHP 邮件功能。

贝娄是我的表格代码：

```
 <form action="include/spud/registration.php">

                          <h2>Group Information:</h2>
                          <table width="100%" border="0" cellspacing="10">
                            <tr>
                              <td>Group Name (# &amp; Name):
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="group_name" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                            </tr>
                            <tr>
                              <td>Group Location (City it is located in: e.g. Mississauga):
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="group_location" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                            </tr>
                            <tr>
                              <td>Number of Youth Attending:
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="group_attending" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                            </tr>
                          </table>
                          <h2>Contact Information:</h2>
                          <table width="100%" border="0" cellspacing="10">
                            <tr>
                              <td width="50%">First Name:
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="name_first" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                              <td>Last Name:
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="name_last" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                            </tr>
                            <tr>
                              <td>Address:
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="address" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                              <td>Address 2 (Optional):
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="address2" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                            </tr>
                            <tr>
                              <td>City:
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="city" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                              <td>Province or State:
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="prov_state" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                            </tr>
                          </table>
                          <table width="100%" border="0" cellspacing="10">
                            <tr>
                              <td>Country:
                              <br/>
                              <div class="input-control select">
                                  <select>
                                    <option selected>Choose...</option>
                                    <option name="country">Canada</option>
                                    <option name="country">United States</option>
                                    <option name="country">Scotland</option>
                                    <option name="country">Another Country</option>
                                  </select>
                              </div>
                              </td>
                            </tr>
                            <tr>
                              <td>Postal Code (ZIP):
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="zip_code" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                            </tr>
                          </table>
                          <table width="100%" border="0" cellspacing="10">
                            <tr>
                              <td width="50%">Telephone:
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="telephone" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                              <td>Telephone (Residential or Business: Optional):
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="telephone2" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                            </tr>
                          </table>
                          <table width="100%" border="0" cellspacing="10">
                            <tr>
                              <td>Email:
                              <br />
                              <div class="input-control text">
                                  <input type="text" name="email" />
                                  <button class="btn-clear"></button>
                              </div>
                              </td>
                            </tr>
                          </table>
                          <div class="place-left">
                              <button type="submit">Submit</button>
                              <button type="reset">Reset</button>
                          </div>
                          <div class="place-right">
                              <a href="#info" class="button">Spud Camp Information</a>
                          </div>
                        </form> 
```

然后它将它发送到数据库阶段：

```
 <?php

require_once('../database.php');

/*
* Insert the data into the Database
*/

    $qry=mysql_query("INSERT INTO 

    spudcamp(group_name,group_location,group_attending,name_first,name_last,address,address2,city,prov_state,country,zip_code,telephone,telephone2,email)

    VALUES('$_POST[group_name]','$_POST[group_location]','$_POST[group_attending]','$_POST[name_first]','$_POST[name_last]','$_POST[address]','$_POST[address2]','$_POST[city]','$_POST[prov_state]','$_POST[country]','$_POST[zip_code]','$_POST[telephone]','$_POST[telephone2]','$_POST[email]', NOW() )

    ", $con);

if(!$qry)
{
    die("Query Failed: ". mysql_error());
}
else
{
    header('location:../../spud-camp.php');
}

/*
* Send an Email to Administration and to the Signed up person
*/

include('receipt_email.php');

    ?> 
```

然后是receipt_email.php 阶段：

```
 <?php

    /*
    * Receipt Emailer
    */

    $message = '

    <html>
    <body style="color: #000;font-family:arial;">

    <p>Thank you&#44; <b>';

    $message .= $_POST[name_first] . ' ';
    $message .= $_POST[name_last];

    $message .= '</b>&#44; for your submission&#46;<br>';
    $message .=  'We hope that the <b>';
    $message .= $_POST[group_name];
    $message .= '</b><br>
                  <b>Please print this page for your records.</b><br><BR>
                      Your registration submitted on ';
    $message .= date('l jS \of F Y h:i:s A');
    $message .= ' is as follows&#58;<br><br>
      Registration &#35;&#58; <B>';

    $message .= '</B><br>
      Group Name&#58; <B>';
    $message .= $_POST[group_name];
    $message .= '</B><br>
      First Name&#58; <B>';
    $message .= $_POST[name_first];  
    $message .= '</B>  <br>
      Last Name&#58; <B>';
    $message .= $_POST[name_last];
    $message .= '</B><br>
     Address 1&#58; <B>';
    $message .=  $_POST[address1];
    $message .=  '</B><br>
      Address 2&#58; <B>';
    $message .=  $_POST[address2];
    $message .=  '</B><br>
      City&#58; <B>';
    $message .=  $_POST[city];
    $message .=  '</B><br>
      Prov&#47;State&#58; <B>';

    $message .=  $_POST[prov_state];
    $message .=  '</B><br>
      Postal Code&#58; <B>';
    $message .=  $_POST[zip_code];
    $message .=  '</B><br>
      Country&#58; <B>';
    $message .=  $_POST[country];
    $message .=  '</B><br>
      Telephone &#35;&#58; <B>';
    $message .=  $_POST[telephone];
    $message .=  '</B><br>
      Business Phone &#35;&#58; <B>';
    $message .=  $_POST[telephone2];
    $message .=  '</B><br>
      E&#45;mail&#58; <B>';
    $message .=  $_POST[email];
    $message .=  '</B><br>
      &#35; Attending&#58; <B>';
    $message .=  $_POST[group_attending];
    $message .=  '</B></p>';

    $message .= '
    </body>
    </html>
    ';

    // multiple recipients
    $to  = $_POST[email] . ", "; // note the comma
    $to .= '';

    // subject
    $subject = '';

    // To send HTML mail, the Content-type header must be set
    $headers .= 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

    // Additional headers
    $headers .= 'To: Registrant <' . $_POST[email] . ">\n";
    $headers .= ' <>' . "\n";

    // Mail it
    mail($to, $subject, $message, $headers);

    ?> 
```

我已经删除了一些地方，这样我的页面上就没有垃圾邮件发送者的电子邮件了。无论如何，提前谢谢我真的很感激：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:51:44.160

关闭！第 9 行：

```
$qry=mysql_query("INSERT INTO... 
```

最后有一个**NOW()**：

```
...'$_POST[email]', NOW()) 
```

删除 NOW()，所以只需

```
...'$_POST[email]') 
```

看看情况如何:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:58:15.697

看起来您没有将 POST 指定为表单方法，但正在尝试访问 post 变量。将表单方法设置为发布。

# hibernate - 在 Spring Roo 中覆盖 EntityManager.remove()

> ID：15696133
> 
> 赞同：0
> 
> 时间：2013-03-29T01:47:21.190
> 
> 标签：hibernate, spring-roo, hibernate-entitymanager

我想覆盖`EntityManager.remove()`某些实体的方法，以便我可以设置一个`active`布尔属性，`false`而不是从数据库中完全删除该对象。这可以看作是软删除。

`Entity_Roo_Jpa_ActiveRecord.aj`我的类（称为`Entity`，用作超类）的文件中的 remove 方法如下所示：

```
@Transactional
public void remove() {
    if (this.entityManager == null) this.entityManager = entityManager();
    if (this.entityManager.contains(this)) {
        this.entityManager.remove(this);
    } else {
        Entity attached = Entity.findEntity(this.id);
        this.entityManager.remove(attached);
    }
} 
```

我找到了`EntityManagerFactory`使用的定义`META-INF/spring/applicationContext.xml`：

```
<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>
<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="persistenceUnitName" value="persistenceUnit"/>
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

是否可以对某个类进行子类化`LocalContainerEntityManagerFactoryBean`并提供我自己`EntityManager`的类，还是有更好的方法？

我还注意到使用`@PersistenceContext`来为 EntityManager 声明一个属性：

```
@PersistenceContext
transient EntityManager Entity.entityManager; 
```

但我怀疑这只是为了存储 EntityManager 对象而不是指定要使用的实现类（因为 EntityManager 是一个接口）。

**编辑：**答案可能在于[这个答案](https://stackoverflow.com/questions/2421339/how-to-inject-jpa-entitymanager-using-spring)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T05:21:42.107

有几种方法可以做到这一点。

**1\. 推入式重构`remove()`方法**

`remove()`您可以将方法推入重构到您的实体类并将`active`值设置`false`在方法内并调用，而不是一路更改 entityManager `merge()`。

另请注意，您需要修改查找器和大多数其他方法来过滤设置为的实体`active=false`。

**2\. Spring Roo Behaviors 附加`@RooSoftDelete`注解**

您还可以使用以下启用软删除的 Spring Roo 插件。

[https://redmine.finalconcept.com.au/projects/final-concept-spring-roo-behaviours/wiki/Soft-delete-annoation](https://redmine.finalconcept.com.au/projects/final-concept-spring-roo-behaviours/wiki/Soft-delete-annoation)

它允许您添加一个名为的新注释`@RooSoftDelete`，该注释负责软删除。

*除了上述之外，您还可以编写一个自定义实体管理器工厂来处理所有问题。*

干杯。

# php - 所有数据库的一个用户？

> ID：15696139
> 
> 赞同：-1
> 
> 时间：2013-03-29T01:47:51.343
> 
> 标签：php, mysql, wordpress, phpmyadmin

我在本地机器上做了很多工作，目前我有 5 个使用 wamp 运行的 Wordpress 实例。我确信答案是偏好问题，但我想知道您是否应该为每个 wordpress 网站创建一个新用户和数据库？以下是我在本地拥有的一些董事名称。wordpress、wordpress-dev、wpsandbox、wpxp 等。它们都有用，我现在实际上正在添加一个，这就是我问这个问题的原因。

当前，每个 wordpress 安装都有自己的数据库和同名用户，所以我应该坚持下去，还是最好为每个数据库分配一个全局用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:50:17.047

在生产环境中，您当然希望拥有单独的用户以更好地管理权限，如果其中一个用户凭据被泄露，则将损害降至最低等。

在本地计算机上的开发环境中，我怀疑这很重要，所有数据库的一个用户更方便。我发现自己有时会这样做。

然而，有人可能会认为开发人员应该从一开始就使用*最佳实践*，即使在开发环境中也是如此。因此，如果您的问题是“即使在我的本地开发环境中我是否应该采用良好的安全措施”，我认为答案总是“是的，除非您有令人信服的理由不这样做”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:51:42.690

如果这是您可以访问的本地计算机，并且只有您自己。然后为所有数据库拥有 1 个用户应该不是问题。

是的，这取决于个人喜好；但我认为它是在实时生产网络服务中。您应该练习让 1 个用户只拥有它需要的权限。

*例子：*

数据库名称：测试

数据库名称：另一个

*用户：*

根——连接以将更改附加到实际表/模式的结构。

User1 -- 选择、插入、删除和其他特定的必要功能`Testing`

User2 -- 与上面相同，但特定于`Another`

# .net - C 和 hashlib LNK 错误

> ID：15696140
> 
> 赞同：0
> 
> 时间：2013-03-29T01:47:53.593
> 
> 标签：.net, hash, c++-cli, linker-errors, sha1

好的。所以我正在使用 Visual Studios 2010 -> Visual C++ 和 .NET Framework（Windows 窗体应用程序），当我尝试使用 hashlib++ 对字符串进行哈希处理时，出现多个 LNK 错误。

这是 hashlib++：[http ://hashlib2plus.sourceforge.net/](http://hashlib2plus.sourceforge.net/)

这是我的哈希代码：

```
//I have more Includes but according to http://hashlib2plus.sourceforge.net/example.html these are the only ones required for hashlib++ so these are the ones i am putting on display.
#include <string>
#include <iostream>
#include <hashlibpp.h>

//I skipped adding namespaces to my display code

private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

                 try{
                     String^ atmp_user = textBox1->Text;
                     String^ user = (myReader->GetString(1));//Connecting to MySQL Databases and grabbing usernames
                     String^ atmp_pass = textBox2->Text;
                     String^ pass = (myReader->GetString(2));
                     atmp_pass->ToLower();//LowerCase
                     atmp_user->ToLower();
                     String^ total1 = gcnew String(atmp_user+atmp_pass);

                     string totala;

                     MarshalString(total1, totala);//Converting String^ to an std::string

                     hashwrapper *myWrapper = new sha1wrapper();//SHA1 code begins

         string hash1 = myWrapper->getHashFromString(totala);

 delete myWrapper;//SHA1 code ends

                     if(atmp_user == user && hash1 == pass){
                         textBox1->Text = ("It worked!");
                     }
                     }
                 } catch(Exception^ex) {
                     MessageBox::Show(ex->Message);
                 }
         } 
```

这是我的错误日志：

```
Error   2   error LNK2028: unresolved token (0A00001E) "public: __clrcall sha1wrapper::sha1wrapper(void)" (??0sha1wrapper@@$$FQAM@XZ) referenced in function "private: void __clrcall Launcher::Form1::button1_Click(class System::Object ^,class System::EventArgs ^)" (?button1_Click@Form1@Launcher@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)   C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Launcher\Launcher.obj
Error   3   error LNK2019: unresolved external symbol "public: __clrcall sha1wrapper::sha1wrapper(void)" (??0sha1wrapper@@$$FQAM@XZ) referenced in function "private: void __clrcall Launcher::Form1::button1_Click(class System::Object ^,class System::EventArgs ^)" (?button1_Click@Form1@Launcher@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)    C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Launcher\Launcher.obj
Error   4   error LNK1120: 2 unresolved externals   C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Release\Launcher.exe 
```

任何帮助将不胜感激。:) 在过去的几天里，我一直在努力创建一个安全的登录脚本。我到处都遇到 LNK 错误。:\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T01:53:05.990

解决了。我不得不关闭预编译的头文件。

# spring - 在 Spring 中创建 Camel 上下文时，bean 的初始化失败

> ID：15696141
> 
> 赞同：1
> 
> 时间：2013-03-29T01:48:15.030
> 
> 标签：spring, apache-camel

我在使用 Spring 的 Web 应用程序中创建纯 Camel 上下文时遇到问题。在重新创建问题之前，我创建了一个新的 maven 项目并删除了我的 maven 存储库。项目中除了 Maven 添加的文件外，仅有 InitialContext.xml、web.xml 和 pom.xml。初始上下文文件如下所示：

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    version="2.5" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
                        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <display-name>CamelSpring</display-name>

    <context-param>
        <param-name>
            contextConfigLocation
        </param-name>
        <param-value>
            /WEB-INF/InitialContext.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

</web-app> 
```

初始上下文.xml

```
<?xml version="1.0" encoding="US-ASCII"?>

<beans 
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
        http://camel.apache.org/schema/spring 
        http://camel.apache.org/schema/spring/camel-spring.xsd">

    <camelContext id="camel" xmlns="http://camel.apache.org/schema/spring"/>

</beans> 
```

pom.xml

```
<project 
    xmlns="http://maven.apache.org/POM/4.0.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://maven.apache.org/POM/4.0.0 
        http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>nz.co.home</groupId>
    <artifactId>CamelSpring</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>

    <name>CamelSpring</name>
    <url>http://maven.apache.org</url>

    <properties>
        <camelVersion>2.10.4</camelVersion>
        <springVersion>2.5.6.SEC03</springVersion>
    </properties>

    <dependencies>

        <!-- Servlet -->

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>

        <!-- Camel -->

        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-core</artifactId>
            <version>${camelVersion}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-context</artifactId>
            <version>${camelVersion}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-spring</artifactId>
            <version>${camelVersion}</version>
        </dependency>

        <!-- Spring -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${springVersion}</version>
        </dependency>  

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${springVersion}</version>
        </dependency>  

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${springVersion}</version>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0.2</version>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

我收到一个错误，如下所示：

```
Mar 29, 2013 2:40:46 PM org.springframework.web.context.ContextLoader initWebApplicationContext
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'camel': Initialization of bean failed; nested exception is java.lang.reflect.MalformedParameterizedTypeException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:480)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:308)
    at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:947)
    at org.springframework.context.support.AbstractApplicationContext.registerListeners(AbstractApplicationContext.java:701)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:377)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:559)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1399)
    at sun.reflect.GeneratedMethodAccessor53.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:792)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1500)
    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:849)
    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:351)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.reflect.MalformedParameterizedTypeException
    at sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.validateConstructorArguments(ParameterizedTypeImpl.java:60)
    at sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.<init>(ParameterizedTypeImpl.java:53)
    at sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.make(ParameterizedTypeImpl.java:95)
    at sun.reflect.generics.factory.CoreReflectionFactory.makeParameterizedType(CoreReflectionFactory.java:105)
    at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:140)
    at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
    at sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:100)
    at java.lang.Class.getGenericInterfaces(Class.java:816)
    at com.sun.beans.TypeResolver.prepare(TypeResolver.java:289)
    at com.sun.beans.TypeResolver.<init>(TypeResolver.java:254)
    at com.sun.beans.TypeResolver.getTypeResolver(TypeResolver.java:235)
    at com.sun.beans.TypeResolver.resolve(TypeResolver.java:172)
    at com.sun.beans.TypeResolver.resolveInClass(TypeResolver.java:93)
    at java.beans.FeatureDescriptor.getParameterTypes(FeatureDescriptor.java:387)
    at java.beans.MethodDescriptor.setMethod(MethodDescriptor.java:114)
    at java.beans.MethodDescriptor.<init>(MethodDescriptor.java:72)
    at java.beans.MethodDescriptor.<init>(MethodDescriptor.java:56)
    at java.beans.Introspector.getTargetMethodInfo(Introspector.java:1130)
    at java.beans.Introspector.getBeanInfo(Introspector.java:414)
    at java.beans.Introspector.getBeanInfo(Introspector.java:161)
    at org.springframework.beans.CachedIntrospectionResults.<init>(CachedIntrospectionResults.java:220)
    at org.springframework.beans.CachedIntrospectionResults.forClass(CachedIntrospectionResults.java:144)
    at org.springframework.beans.BeanWrapperImpl.getCachedIntrospectionResults(BeanWrapperImpl.java:252)
    at org.springframework.beans.BeanWrapperImpl.getPropertyDescriptorInternal(BeanWrapperImpl.java:282)
    at org.springframework.beans.BeanWrapperImpl.isWritableProperty(BeanWrapperImpl.java:333)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1247)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1010)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:472)
    ... 47 more

Mar 29, 2013 2:40:46 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart 
```

我一直在环顾四周，但找不到任何表明此设置有什么问题的东西。我希望它只是我没有添加到 pom 中的东西。有没有人对如何解决这个问题有任何想法？

解决方案

```
<?xml version="1.0" encoding="US-ASCII"?>

<beans 
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://camel.apache.org/schema/spring 
        http://camel.apache.org/schema/spring/camel-spring-2.10.4.xsd">

    <camelContext id="camel" xmlns="http://camel.apache.org/schema/spring"/>

</beans> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T14:29:44.930

这通常是由于使用了不同版本的 spring 模块而发生的。对所有 spring 依赖项（包括 xsd 中的依赖项）使用相同的版本应该会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-07T08:07:36.420

更改 pom.xml 中的版本后，错误得到解决。

```
<dependency>
    <groupId>org.apache.camel</groupId>
    <artifactId>camel-core</artifactId>
    <version>3.0.0-M2</version>
</dependency>
<dependency>
    <groupId>org.apache.camel</groupId>
    <artifactId>camel-spring</artifactId>
    <version>3.0.0-M2</version>
</dependency> 
```

# java - 对等点未在 Web 服务中进行身份验证？

> ID：15696155
> 
> 赞同：1
> 
> 时间：2013-03-29T01:49:35.917
> 
> 标签：java, rest, tomcat, ssl

我有一个在 Tomcat 7 上运行的 Java 1.7 中使用 Spring 的 REST Web 服务。我在我的开发机器上拥有自签名证书。当我尝试使用 rest 客户端调用 API 时，它给出了以下错误：

```
 peer not authenticated
    javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
        at sun.security.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:397)
        at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)
        at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:572)
        at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)
        at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)
        at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:640)
        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
        at org.wiztools.restclient.HTTPClientRequestExecuter.execute(HTTPClientRequestExecuter.java:387)
        at org.wiztools.restclient.ui.RESTViewImpl$2.run(RESTViewImpl.java:320) 
```

谁能告诉我如何在不更改任何 java 代码的情况下摆脱这个错误？

注意：我已经在我的环境中运行了以下命令：

```
keytool -genkey -v -keyalg RSA -alias tomcat -keypass 12345 -storepass 12345 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:02:16.110

看起来服务器正在请求客户端身份验证，而您没有从客户端向服务器发送一个证书。尝试使用 -Djavax.net.debug=all 参数运行 VM。

而且我认为如果不对您的代码进行更改，就不可能做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T21:38:31.890

如果我使用 jre 1.6，我会遇到这个问题。当我切换到 jre 1.7 时，这个问题就消失了。

# android - 一次在多个 YuvImage 上使用 compresstojpeg 时内存不足

> ID：15696165
> 
> 赞同：5
> 
> 时间：2013-03-29T01:50:48.470
> 
> 标签：android, image-processing, out-of-memory, yuv

我正在构建一个缓冲**N**个相机帧的应用程序，当用户点击一个按钮时，它会使用所有已保存的帧应用效果来保存照片。

我正在保存照片并处理**AsyncTask**上的帧。当我执行它时，我会从屏幕上删除所有内容，只留下一个**TextView**来显示保存照片的进度。

目前**AsyncTask** `doInBackground`看起来像这样：

```
protected Void doInBackground(Integer... params) 
{
    int w = mBuffer.get(0).getWidth();
    int h = mBuffer.get(0).getHeight();
    int lineHeight = h / mBuffer.size();
    int currentHeight = 0;

    Log.d("output", "saving photo "+w+", "+h);

    for (int i = 0; i < mBuffer.size(); i++)
    {
        YuvImage image = mBuffer.get(i);
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        if (!image.compressToJpeg(new Rect(0, currentHeight, w, lineHeight), 50, out))
        {
            Log.d("output", "problem converting yuv to jpg");
            break;
        }

        currentHeight += lineHeight;

        Log.d("output", "currentHeight: "+currentHeight);

        publishProgress((int)((i / (float)mBuffer.size()) * 100));
        try
        {
            out.flush();
            out.close();
            out = null;
        }
        catch(Exception e)
        {

        }

        System.gc();

        try
        {
            Thread.sleep(200);
        }
        catch(Exception e)
        {

        }

        if (isCancelled())
        {
            break;
        }
    }
    return null;
} 
```

我已经为这个问题删除了很多不那么重要的代码部分，这只是引发**OutOfMemory**问题的部分。基本上我在那里做的是从图像中获取一条线并将其压缩为JPEG。但它只设法压缩第一张图像。当它转到第二个时，它会引发**OutOfMemory**异常。

, `System.GC()`, `Thread.sleep()`, `out.flush()`,`out.close()`都是解决问题的不成功尝试。

当前 mBuffer 的大小是 5，最初是 32。从 DDMS Heap 调试来看，它的 Heap Size 是 30MB，它正在分配 9MB。显然还有很大的成长空间。如果我删除**AsyncTask**完成就好了`compressToJpeg()`。

 **有没有人有这个问题的解决方案？我应该尝试自己的 YUV -> JPEG 转换器吗？

**使用最新代码编辑：**

```
protected Void doInBackground(Integer... params) 
{
    int lineHeight = mHeight / mBufferSize;
    int currentHeight = 0;

    Log.d("output", "saving photo: "+mWidth+", "+mHeight);
    File outputPath = new File(Environment.getExternalStorageDirectory().getPath() + "/camerafluid-output");
    outputPath.mkdirs();
    for (int i = 0; i < mBufferSize; i++)
    {
        File imageFile = new File(mCachePath, "image-"+0);
        File outputFile = new File(outputPath, "image-"+0);

        if (!imageFile.exists())
        {
            Log.d("output", "image "+i+" not found on cache directory");
            continue;
        }

        try
        {
            int size = (int)imageFile.length();
            byte[] imageBytes = new byte[size];
            BufferedInputStream buf = new BufferedInputStream(new FileInputStream(imageFile));
            buf.read(imageBytes, 0, size);
            buf.close();

            YuvImage image = new YuvImage(imageBytes, ImageFormat.NV21, mWidth, mHeight, null);
            imageBytes = null;
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            if (!image.compressToJpeg(new Rect(0, currentHeight, mWidth, lineHeight), 50, out))
            {
                Log.d("output", "problem converting yuv to jpg");
                break;
            }

            FileOutputStream s = new FileOutputStream(outputFile);
            s.write(out.toByteArray());
            s.flush();
            s.close();
            s = null;

            currentHeight += lineHeight;
            Log.d("output", "currentHeight: "+currentHeight);

            publishProgress((int)((i / (float)mBufferSize) * 100));
            System.gc();
        }
        catch(Exception e)
        {

        }

        if (isCancelled())
        {
            break;
        }
    }
    return null;
} 
```

我正在正确保存图像，因为我可以在缓存目录中看到保存的文件，这是保存缓冲区并执行 AsyncTask 的 Activity 部分：

```
public void takePhoto()
{
    Log.d("output", "taking photo");

    //vfranchi - save the buffer on the disk to free memory
    File cachePath = new File(getExternalCacheDir().getPath() + "/buffer");
    if (!cachePath.exists())
    {
        Log.d("output", "cache path doesnt exist");
        cachePath.mkdirs();
    }

    int count = 0;
    int width = mPhotoBuffer.get(0).getWidth();
    int height = mPhotoBuffer.get(0).getHeight();
    int bufferSize = mPhotoBuffer.size();
    for(YuvImage i : mPhotoBuffer)
    {
        File f = new File(cachePath, "image-"+count);
        try
        {
            FileOutputStream s = new FileOutputStream(f);
            s.write(i.getYuvData());
            s.flush();
            s.close();
            Log.d("output", "saved image "+count);
            count++;
        }
        catch(Exception e)
        {
            Log.d("output", "unable to save image "+count+"\n"+e.getLocalizedMessage());
        }
    }

    mPhotoBuffer = null;
    System.gc();

    SavePhotoTask task = new SavePhotoTask(this, cachePath, width, height, bufferSize);
    task.execute(0);
} 
```

Logcat 开始拍照方法：

```
03-30 12:48:08.534: D/output(15359): taking photo
03-30 12:48:09.011: V/Camera-JNI(15359): setHasPreviewCallback: installed:0, manualBuffer:0
03-30 12:48:09.011: V/Camera-JNI(15359): get_native_camera: context=0x138520, camera=0x1eea78
03-30 12:48:09.011: V/Camera-JNI(15359): Clearing callback buffers, 0 remained
03-30 12:48:09.011: V/Camera-JNI(15359): stopPreview
03-30 12:48:09.011: V/Camera-JNI(15359): get_native_camera: context=0x138520, camera=0x1eea78
03-30 12:48:15.323: D/output(15359): saved image 0
03-30 12:48:16.628: D/output(15359): saved image 1
03-30 12:48:17.880: D/output(15359): saved image 2
03-30 12:48:19.073: D/output(15359): saved image 3
03-30 12:48:20.545: D/output(15359): saved image 4
03-30 12:48:28.089: D/output(15359): saving photo: 848, 480
03-30 12:48:33.276: D/skia(15359): onFlyCompress
03-30 12:48:35.020: D/output(15359): currentHeight: 96
03-30 12:48:44.144: D/output(15359): currentHeight: 192
03-30 12:48:52.581: D/skia(15359): onFlyCompress
03-30 12:48:52.878: I/dalvikvm-heap(15359): Grow heap (frag case) to 14.975MB for 2095120-byte allocation
03-30 12:48:53.112: I/dalvikvm-heap(15359): Grow heap (frag case) to 17.975MB for 4192272-byte allocation
03-30 12:48:53.566: I/dalvikvm-heap(15359): Grow heap (frag case) to 23.975MB for 8386576-byte allocation
03-30 12:48:54.855: I/dalvikvm-heap(15359): Grow heap (frag case) to 35.975MB for 16775184-byte allocation
03-30 12:48:56.620: I/dalvikvm-heap(15359): Forcing collection of SoftReferences for 33552400-byte allocation
03-30 12:48:56.644: E/dalvikvm-heap(15359): Out of memory on a 33552400-byte allocation.
03-30 12:48:56.644: I/dalvikvm(15359): "AsyncTask #1" prio=5 tid=12 RUNNABLE
03-30 12:48:56.644: I/dalvikvm(15359):   | group="main" sCount=0 dsCount=0 obj=0x40d71628 self=0x22eea8
03-30 12:48:56.644: I/dalvikvm(15359):   | sysTid=15404 nice=10 sched=0/0 cgrp=bg_non_interactive handle=2056240
03-30 12:48:56.651: I/dalvikvm(15359):   | schedstat=( 3387725830 799926751 876 ) utm=327 stm=10 core=0
03-30 12:48:56.651: I/dalvikvm(15359):   at java.io.ByteArrayOutputStream.expand(ByteArrayOutputStream.java:~91)
03-30 12:48:56.651: I/dalvikvm(15359):   at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:201)
03-30 12:48:56.651: I/dalvikvm(15359):   at android.graphics.YuvImage.nativeCompressToJpeg(Native Method)
03-30 12:48:56.667: I/dalvikvm(15359):   at android.graphics.YuvImage.compressToJpeg(YuvImage.java:141)
03-30 12:48:56.667: I/dalvikvm(15359):   at com.vfranchi.camerafluid.SavePhotoTask.doInBackground(SavePhotoTask.java:78)
03-30 12:48:56.667: I/dalvikvm(15359):   at com.vfranchi.camerafluid.SavePhotoTask.doInBackground(SavePhotoTask.java:1)
03-30 12:48:56.667: I/dalvikvm(15359):   at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-30 12:48:56.667: I/dalvikvm(15359):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-30 12:48:56.667: I/dalvikvm(15359):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-30 12:48:56.667: I/dalvikvm(15359):   at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-30 12:48:56.667: I/dalvikvm(15359):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-30 12:48:56.667: I/dalvikvm(15359):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-30 12:48:56.667: I/dalvikvm(15359):   at java.lang.Thread.run(Thread.java:856)
03-30 12:48:56.683: W/System.err(15359): java.lang.OutOfMemoryError
03-30 12:48:56.683: W/System.err(15359):    at java.io.ByteArrayOutputStream.expand(ByteArrayOutputStream.java:91)
03-30 12:48:56.683: W/System.err(15359):    at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:201)
03-30 12:48:56.691: W/System.err(15359):    at android.graphics.YuvImage.nativeCompressToJpeg(Native Method)
03-30 12:48:56.691: W/System.err(15359):    at android.graphics.YuvImage.compressToJpeg(YuvImage.java:141)
03-30 12:48:56.691: W/System.err(15359):    at com.vfranchi.camerafluid.SavePhotoTask.doInBackground(SavePhotoTask.java:78)
03-30 12:48:56.691: W/System.err(15359):    at com.vfranchi.camerafluid.SavePhotoTask.doInBackground(SavePhotoTask.java:1)
03-30 12:48:56.691: W/System.err(15359):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-30 12:48:56.698: W/System.err(15359):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-30 12:48:56.698: W/System.err(15359):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-30 12:48:56.698: W/System.err(15359):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-30 12:48:56.698: W/System.err(15359):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-30 12:48:56.698: W/System.err(15359):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-30 12:48:56.706: W/System.err(15359):    at java.lang.Thread.run(Thread.java:856)
03-30 12:48:56.706: D/skia(15359): ------- write threw an exception
03-30 12:49:15.181: W/jdwp(15359): Debugger is telling the VM to exit with code=1
03-30 12:49:15.181: I/dalvikvm(15359): GC lifetime allocation: 5 bytes 
```

YuvImage 缓冲区是在 onPreviewFrame 上创建的，如下所示：

```
public void onPreviewFrame(byte[] data, Camera camera) 
{
    Camera.Parameters parameters = camera.getParameters();
    Camera.Size size = parameters.getPreviewSize();

    // Generate a YuvImage from the camera data
    int w = size.width;
    int h = size.height;
    YuvImage photoImage = new YuvImage(data, parameters.getPreviewFormat(), w, h, null);
    mPhotoBuffer.add(0, photoImage);

    if (mPhotoBuffer.size() > mBufferSize)
    {
        mPhotoBuffer.remove(mPhotoBuffer.size() - 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T21:37:30.813

我设法为我的问题找到了解决方案，而且不使用 YuvImage 类。我猜这个`compressToJpeg()`方法有问题，至少在我不知道的设备上。

这是我的**doInBackground**方法的最终代码：

```
protected Void doInBackground(Integer... params) 
{
    int lineHeight = mHeight / mBufferSize;
    int currentHeight = 0;

    Bitmap result = Bitmap.createBitmap(mWidth, mHeight, Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(result);

    Log.d("output", "saving photo: "+mWidth+", "+mHeight);
    File outputPath = new File(Environment.getExternalStorageDirectory().getPath() + "/camerafluid-output");
    outputPath.mkdirs();
    for (int i = 0; i < mBufferSize; i++)
    {
        File imageFile = new File(mCachePath, "image-"+i);
        File outputFile = new File(outputPath, "image-"+i+".jpg");

        if (!imageFile.exists())
        {
            Log.d("output", "image "+i+" not found on cache directory");
            continue;
        }

        try
        {
            int size = (int)imageFile.length();
            byte[] imageBytes = new byte[size];
            BufferedInputStream buf = new BufferedInputStream(new FileInputStream(imageFile));
            buf.read(imageBytes, 0, size);
            buf.close();

            int[] imagePixels = MainActivity.convertYUV420_NV21toRGB8888(imageBytes, mWidth, mHeight);
            imageBytes = null;
            Bitmap bitmapImage = Bitmap.createBitmap(imagePixels, mWidth, mHeight, Bitmap.Config.ARGB_8888);
            imagePixels = null;
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            if (!bitmapImage.compress(CompressFormat.JPEG, 50, out))
            {
                Log.d("output", "problem converting yuv to jpg");
                break;
            }

            FileOutputStream s = new FileOutputStream(outputFile);
            s.write(out.toByteArray());
            s.flush();
            s.close();
            s = null;

            currentHeight += lineHeight;
            Log.d("output", "currentHeight: "+currentHeight);

            publishProgress((int)((i / (float)mBufferSize) * 100));
            System.gc();
        }
        catch(Exception e)
        {

        }

        if (isCancelled())
        {
            break;
        }

    }

    return null;
} 
```

该方法是将 Yuv 数据转换为 RGB 并创建位图，以便我可以压缩为 JPEG 并保存到外部存储。这仅用于测试目的，这样就不会出现 Signal error 11 或 OutOfMemory 异常。我已经尝试过使用 40 张图像的缓冲区。

YUV -> RGB 转换器可在此处找到[Displaying YUV Image in Android](https://stackoverflow.com/questions/5272388/extract-black-and-white-image-from-android-cameras-nv21-format/12702836#12702836)。而且我正在使用**minhaz** idea 在处理图像之前将缓冲区缓存在磁盘上以避免高内存使用。**

# ios - AFNetworking 设置图片不带扩展名

> ID：15696166
> 
> 赞同：1
> 
> 时间：2013-03-29T01:51:04.467
> 
> 标签：ios, afnetworking

AFNetworking 中有一个方法可以方便地设置图像：

```
 - (void)setImageWithURL:(NSURL *)url 
   placeholderImage:(UIImage *)placeholderImage 
```

但是如果 url 图像没有扩展名（如[http://static.qyer.com/album/user/330/21/QkpVQBsHaA/670](http://static.qyer.com/album/user/330/21/QkpVQBsHaA/670)），则存在一些问题，有时图像可以准确显示，有时它不是显示。

我找到了一个方法

```
 [AFImageRequestOperation addAcceptableContentTypes:<#(NSSet *)contentTypes#>]; 
```

我应该如何设置 contentTypes？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:08:14.423

如果您`curl`提供的 URL，您可以看到问题：

`curl -i -X HEAD http://static.qyer.com/album/user/330/21/QkpVQBsHaA/670`

`HTTP/1.0 200 OK
Server: nginx/1.0.11
Date: Fri, 29 Mar 2013 02:03:24 GMT
Content-Type: application/octer-stream
Last-Modified: Tue, 19 Mar 2013 09:40:23 GMT
ETag: "53430075-9814c-4d843e4fc6fc0"
Accept-Ranges: bytes
Content-Length: 622924
Powered-By-ChinaCache: MISS from 060531Q354
Powered-By-ChinaCache: MISS from 060532235y
Connection: close`

`Content-Type: application/octer-stream`（奇怪的是，拼写错误`application/octet-stream`）不是有效的图像 mime 类型。如果您对服务器有任何控制权，我强烈建议您修复此问题以发送真正的 mime 类型——为了每个访问 CDN 的人。

否则，我建议您添加`*/*`到可接受的内容类型列表中。这应该接受任何扔给它的东西。您还可以手动指定您可能希望 CDN 提供的任何内容类型，包括`application/octer-stream`.

# jquery - 键入时替换“umlaute”，如 ÄÖÜ

> ID：15696180
> 
> 赞同：1
> 
> 时间：2013-03-29T01:52:44.887
> 
> 标签：jquery, replace

我是 jquery 脚本的新手，希望你能帮助我。谷歌不能:(

我正在尝试让一个 jquery 脚本工作，它替换一些“变音符号”，即“Ä”、“Ö”，......而用户正在输入文本框。

例如，如果用户写了一个 Ä，那么它应该自动替换为 AE。

提前谢谢你，最好的问候

**- 编辑：**

我遇到问题的脚本是下面的脚本。它适用于一个字母（没有 if 和 else），但当我想用多个替换运行它时却不行......

```
$(document).ready(function(){
  $("#uml").keyup(function(){
    $(this).val(function(i, v) { //index, current value
      if(v=="ä") { return "ae"; }
      if(v=="ö") { return "oe"; }
      else
       {
        return v;
       }
}); });
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T14:45:22.830

请参阅JS 字符串方法[的文档。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)`replace`

```
$(document).ready(function() {
    $("#uml").keyup(function() {
        var text = $(this).val();
        $(this).val(
            text.replace("ä", "ae")
                .replace("ö", "oe")
                .replace("ü", "ue")
        );
    });
}); 
```

请注意，这种用法`replace`仅替换目标字符串的单个实例，这应该没问题，因为您在`keyup`. 但是，如果您需要替换每个实例，则可以这样使用它：

```
text = text.replace(/ä/g,"ae"); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-29T04:18:06.310

```
$(document).ready(function($){
  $("#textFieldID").keyup(function(){
    var newVal = $(this).val();
    val.replace("emlaute","ÄÖÜ");
    $(this).val(newVal);
  });
}); 
```

# shell - (未设置 CDPATH) >/dev/null 2>&1 && 未设置 CDPATH

> ID：15696184
> 
> 赞同：2
> 
> 时间：2013-03-29T01:53:20.040
> 
> 标签：shell

我在 shell 脚本中阅读了以下语句：

```
(unset CDPATH) >/dev/null 2>&1 && unset CDPATH 
```

为什么有两个“未设置的 CDPATH”？最后一个可以删吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T03:54:15.613

第一个`(unset CDPATH) >/dev/null 2>&1`命令尝试取消设置`CDPATH`，但在子外壳（即括号）中这样做，错误和输出发送到`/dev/null`. 如果成功，那么它会在主 shell 中取消设置 CDPATH。如果它未能取消设置 CDPATH，那么它不会在主 shell 中尝试。这避免了有关无法取消设置 CDPATH 干扰使用它的配置脚本的输出的错误消息。

我不确定为什么或何时需要进行如此详尽的测试，但大概在某些机器上，某处，某个时间，该操作`unset CDPATH`是不允许的，并且与配置脚本的输出混为一谈。请注意，自动配置 shell 脚本相当奇怪——除了惯用的 shell 之外的任何东西——因为它们总体上非常便携。他们试图处理您从未听说过的系统的怪异之处，其中一些可能在您从小学毕业之前就~~已经过时了。~~许多测试的原因可能已经在时间的迷雾中消失了；曾经有一个系统需要绕开，但很可能是 20 年前在一个不再活跃使用的系统上。

# python - 第二次调用方法时如何添加到列表而不覆盖它？

> ID：15696188
> 
> 赞同：0
> 
> 时间：2013-03-29T01:53:32.507
> 
> 标签：python, list

这是我试图实现的代码示例：

```
def notes():            
    print "\nPlease enter any notes:"
    global texts
    texts = []
    if not texts:
        print "no notes exist."
        write_note()
    else:
        print "this note already exists"

def write_note():
    while True:
        global txt
        txt = raw_input(">>> ")
        if not txt:
            break
        else:
            texts.append(txt)
    print "\nNote(s) added to report."
    notes_menu()

def print_note():
    new_report.write("\nNotes:")
    for txt in texts:
        new_report.write("\n-%r" % txt)
    print "Note Printed to %r. Goodbye!" % file_name
    exit(0) 
```

我的目标是在第二次（或无限期）调用“notes()”时将新输入添加到“文本”列表中并且不覆盖列表。我试图至少在调用“notes()”时确定列表是否为空。但是每次我这样做时，无论我在上次调用期间在“文本”中创建了多少项目，它总是打印“没有笔记存在”。

在这一点上，我有点不知所措。我查看了字典功能，但我不确定如何将其合并到此代码中。有人有什么建议/建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:05:21.390

我同意建议更好的设计是创建一个包含文本的类的评论。但是，就目前的代码而言，在我看来`texts = []`应该在主代码中， outside `notes()`，以便该行只运行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:13:49.147

在不改变你上面的太多内容的情况下，我可以建议一个简单地请求新注释并将注释附加到现有列表的函数：

```
>>> notes = []
>>> def write_note(notes):
...     while True:
...         new_note = raw_input('>>> ')
...         if not new_note:
...             break
...         else:
...             notes.append(new_note) 
```

这是否符合您的要求？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T02:29:02.123

当您调用 texts = [] 时，您将 text 设置为一个空列表，从而清除之前设置的任何项目。删除那条线应该会有所帮助。

另外，我想你可能想使用 .extend() 函数。Append 将一个项目添加到列表的末尾，即：

```
>>li = [1,2,3]
>>li2 = [4,5,6]
>>li.append(li2)
li = [1,2,3,[4,5,6]] 
```

其中 extend() 连接两个列表：

```
>>li = [1,2,3]
>>li2 = [4,5,6]
>>li.extend(li2)
li = [1,2,3,4,5,6] 
```

这可以在[潜入 python时找到](http://www.diveintopython.net/native_data_types/lists.html)

# linux - 克隆 git 存储库时权限被拒绝

> ID：15696190
> 
> 赞同：9
> 
> 时间：2013-03-29T01:53:51.730
> 
> 标签：linux, git, github, amazon-ec2, git-clone

所以我只是设置了一个 Amazon EC2 实例。并安装了 git..

```
sudo yum install git 
```

然后我用 github 设置了我的 ssh 密钥。现在，当我尝试将我的 repo 克隆到 /var/www/html 文件夹中时，我收到了这个错误。

```
fatal: could not create work tree dir 'example.com'.: Permission denied 
```

当我以root身份运行时...

```
Cloning into 'example.com'...
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

但我确保我的 github 公钥与我的 ~/.ssh/id_rsa.pub 密钥匹配。有什么我在这里想念的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-29T02:01:28.887

您的第一个错误是因为您的用户无权写入 /var/www/html 。您可以授予您的用户这样做的权限。

以 root 身份运行时的第二个错误可能是您的用户主目录中有 ssh 密钥，而不是 /root/.ssh/ ，或者您的 .ssh 目录或 ~/.ssh/id_rsa.pub 密钥文件有不正当的权限。~/.ssh/ 应该有权限位 0700 ，并且应该有 ~/.ssh/id_rsa.pub 例如 0600

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-21T00:45:37.160

注意：此修复适用于 Mac 用户

对于 macOS 10.12.2 或更高版本，您需要修改 ~/.ssh/config 文件以自动将密钥加载到 ssh-agent 中并将密码短语存储在您的钥匙串中。

```
Host *
   AddKeysToAgent yes
   UseKeychain yes
   IdentityFile ~/.ssh/<your_id_rsa> 
```

将您的 SSH 私钥添加到 ssh-agent 并将您的密码存储在钥匙串中。如果您使用不同的名称创建了密钥，或者如果您要添加具有不同名称的现有密钥，请将命令中的 id_rsa 替换为您的私钥文件的名称。

`ssh-add -K ~/.ssh/<your_id_rsa>`

有关更多信息，请查看 [https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent](https://help.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T02:06:46.023

你有没有试过这个：

[git：致命：无法从远程存储库读取](https://stackoverflow.com/questions/13509293/git-fatal-could-not-read-from-remote-repository)

您可以指定 SSH 应发送到远程系统的用户名作为远程 URL 的一部分。将用户名，后跟@，放在远程主机名之前。

```
git remote set-url website abc@***.com:path/to/repo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T01:59:45.230

对中的`id_rsa`私钥`~/.ssh/id_rsa`是您的公钥 ( `~/.ssh/id_rsa.pub`) 吗？

如果不是（或者您不确定），我建议您使用`ssh-keygen -t dsa`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-13T01:50:37.227

我的解决方案与 nos 的解决方案相匹配。添加 root 用户的公钥可以修复它。另一种选择是更改目录的权限并以普通用户身份执行命令。

# sql - SQL查询中的括号错误

> ID：15696196
> 
> 赞同：0
> 
> 时间：2013-03-29T01:55:23.750
> 
> 标签：sql, oracle, oracle11g

我在我的 Oracle DB 中使用了以下查询：

```
UPDATE test5_rdf_memoization 
SET object ='galib' 
WHERE ( predicate='platform' AND 
    object IS NULL AND 
    subject IN ( SELECT subject 
                FROM test5_rdf_memoization t1, 
                    test_parameters_new_5 t2, 
                    test_parameter_detail t3 
                WHERE (t1.object = t2.id AND 
                    t2.id = t3.parameter AND 
                    t1.predicate = 'parameter' AND 
                    t3.host_tool_detail = 1 AND 
                    (t1.subject >= 624))  
                order by t1.subject) ); 
```

但它给了我以下错误

```
 Error starting at line 1 in command: 
    UPDATE test5_rdf_memoization SET
     object ='galib' WHERE ( predicate='platform' AND object IS NULL AND
     subject IN ( SELECT subject FROM test5_rdf_memoization t1,
     test_parameters_new_5 t2, test_parameter_detail t3 WHERE (t1.object =
     t2.id AND t2.id = t3.parameter AND t1.predicate = 'parameter' AND
     t3.host_tool_detail = 1 AND (t1.subject >= 624))  order by t1.subject)
     ) 
 Error at Command Line:2 Column:10 Error report: SQL Error:
 ORA-00907: missing right parenthesis
 00907\. 00000 -  "missing right parenthesis"
 *Cause:    
 *Action: 
```

我尝试过使用不同的括号组合，但它不起作用。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:59:41.950

试试这个——我只看到你的`IN`陈述需要一组括号。我还删除了`ORDER BY`声明：

```
UPDATE test5_rdf_memoization 
SET object ='galib' 
WHERE predicate='platform' 
   AND object IS NULL 
   AND subject IN ( 
       SELECT subject 
       FROM test5_rdf_memoization t1, 
            test_parameters_new_5 t2, 
            test_parameter_detail t3 
       WHERE t1.object = t2.id 
            AND t2.id = t3.parameter 
            AND t1.predicate = 'parameter' 
            AND t3.host_tool_detail = 1 
            AND t1.subject >= 624) 
```

我更喜欢使用`INNER JOINs`：

```
UPDATE test5_rdf_memoization 
SET object ='galib' 
WHERE predicate='platform' 
   AND object IS NULL 
   AND subject IN ( 
       SELECT subject 
       FROM test5_rdf_memoization t1 
           INNER JOIN test_parameters_new_5 t2 
               ON t1.object = t2.id 
           INNER JOIN test_parameter_detail t3 
               ON t2.id = t3.parameter 
       WHERE t1.predicate = 'parameter' 
            AND t3.host_tool_detail = 1 
            AND t1.subject >= 624) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T09:55:16.113

Oracle 经常抛出`ORA-00907: missing right parenthesis`来指示语法错误，通常是因为它在找到匹配的括号之前发现了非法子句。

在这种情况下，它反对该`ORDER BY`条款。我们不能订购这样的子查询。实际上排序并不重要，因为该语句只是测试记录的*存在*，所以谁在乎我们是先随机找到记录还是排序为字母数字第三？好吧，显然排序会消耗 CPU 周期，因此从性能角度来看，不必要的排序是不好的，但它不会改变结果。

> “我需要按主题分类的数据。”

不，你没有。您正在将 `test5_rdf_memoization`与一组特定条件匹配的所有记录更新为相同的值。同样，它们更新的顺序并不重要，因为结果是相同的。

* * *

如果您对此解释不满意，请编辑您的问题以解释您的业务需求，以便我们提供可行的解决方案。

# javascript - 如何在onblur时使文本输入不左对齐

> ID：15696199
> 
> 赞同：2
> 
> 时间：2013-03-29T01:55:36.770
> 
> 标签：javascript, html, textinput, onblur

当文本输入中内容的宽度大于文本输入的宽度时，当用户触发 onblur 事件时，内容将左对齐。

我正在寻找一种在用户触发 onblur 事件时**不左对齐内容的方法。**

我试过了：

```
 inputText.onblur = function() {
        inputText.scrollLeft = inputText.scrollWidth - inputText.clientWidth;
        alert("onblur");
    } 
```

这种方法行不通。因为看起来内容在 onblur 事件结束后左对齐。

另外我认为除了onblur之外没有其他事件被触发，我不确定。如果这是真的，那真的让我很困惑，我想知道是什么让它左对齐。

欢迎任何有用的回复！希望解决方案可以在**javascript**中使用，并且可以在**Chrome**中使用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:58:17.213

尝试将执行延迟几分之一秒：

```
inputText.onblur = function() {
    setTimeout(function() {
        inputText.scrollLeft = inputText.scrollWidth;
    },1);
}; 
```

# javascript - 在 web javascript 中，可以获取 javascript 文件的 md5 吗？

> ID：15696201
> 
> 赞同：2
> 
> 时间：2013-03-29T01:56:04.717
> 
> 标签：javascript, md5

在 Web 应用程序中，`javascript`可以获得`md5``<script src=...>`

在我的应用程序中，脚本文件是“指纹”（根据谷歌推荐），因此可以无限期地缓存它们。例如，在文件名中

```
mBShjJZcO2LeNil6CjrGA-modal.min.js` 
```

“指纹”是（在 node.js 中）

```
crypto.createHash('md5').update(out.code).digest("base64").replace(/\W/g,'') 
```

`out.code`的输出在哪里`uglifyjs`

`script`有了这个，我就有了对文件进行校验和的内置能力。这似乎很酷。

实际上有什么方法可以使用 javascript 的网络安全模型来做到这一点？

# javascript - 在 jQuery 1.9.1 中检索输入文本值的正确方法

> ID：15696205
> 
> 赞同：0
> 
> 时间：2013-03-29T01:57:06.380
> 
> 标签：javascript, jquery

这就是我在 jQuery 1.9.1 之前获取输入文本值的方式

```
<input type="text" id="input_text_Id" 

...

$("#input_text_Id").attr('value') 
```

当我将我的 jQuery 版本升级到 1.9.1 时它不再起作用，所以显然它已被弃用。

我还有哪些其他选择？

我也很好奇，为什么 jQuery 创建者不断删除可以正常工作的功能？我假设安全漏洞可能是其中之一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T01:59:35.263

不应该以下工作：

```
$("#input_text_Id").val(); 
```

这是我一直用的。

这是[关于 val() 的文档](http://api.jquery.com/val/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T02:00:00.237

`attr("value")`（和本机`getAttribute("value")`）返回*属性*。

`val()`（和本机`value`）返回*属性*。

这里的重要区别是属性本质上是“默认值”，而属性是当前值。

[这](http://jsfiddle.net/6vCwY/)是一个演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T02:00:23.110

正确的方法是通过[val() 函数](http://api.jquery.com/val/)使用检索值属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T02:01:20.203

如果您在输入元素的当前值之后。然后只需使用`.val()`：

```
$("#input_text_Id").val(); 
```

`.attr('value')`返回属性的值`value`（在您键入文本时不会更改），而不是`.value`属性（确实会更改）。

[输入此文本框](http://jsfiddle.net/fZSRZ/)并查看您的控制台以了解我的意思。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T02:02:01.993

`$('#input_text_Id').val();`

至于 jQuery 团队为什么选择去掉你以前使用的方法，我不知道。我怀疑这个方法被关闭了，因为从输入中获取值并不是真正从它的“值”属性派生的。我相信获取输入的实际值是从 DOM 中输入的“值”属性中提取的。

# java - 切换 JFrame

> ID：15696207
> 
> 赞同：0
> 
> 时间：2013-03-29T01:57:34.010
> 
> 标签：java, swing, jframe

现在，我有这样的框架设置

```
[]Form MainApplet  
|  
----[]Other Components  
|    |  
|    +--jFrame2  
|   
+ -- jFrame 
```

加载时它运行 [JFrame1]，底部的那个，我希望它然后更改为 jFrame2？我怎样才能做到这一点？我尝试了各种代码，示例会有所帮助！谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:04:06.733

据我所知，您打开了多个框架，您只想更改焦点。`jFrame2.requestFocus()`如果您希望您的第二个 JFrame 成为选定的，这很容易实现。

# java - ServletContextListener 调度程序执行任务 - 然后停止 EJB 方法调用以持久保存到 JBOSS 7.1 中的数据库中

> ID：15696209
> 
> 赞同：0
> 
> 时间：2013-03-29T01:57:42.833
> 
> 标签：java, jpa, jboss, ejb, servlet-listeners

我有一个每 20 秒运行一次任务的 ServletContextListener - 该任务是侦听文件夹并检查新文件，如果发现将新文件导入数据库。这是使用从这个问题给出的答案设置的：[Spawning threads in a JSF managed bean for scheduled tasks using a timer](https://stackoverflow.com/questions/7499534/applicationscope-bean-that-uses-a-timertask-sheduler-good-or-bad)

**ServletContextListener 的 Java 代码**

```
@WebListener
public class Listener implements ServletContextListener {

     private ScheduledExecutorService scheduler;

        @Override
        public void contextInitialized(ServletContextEvent event) {
            scheduler = Executors.newSingleThreadScheduledExecutor();

            scheduler.scheduleAtFixedRate(new MyTask(), 0,20, TimeUnit.SECONDS);
        }

        @Override
        public void contextDestroyed(ServletContextEvent event) {
            scheduler.shutdownNow();
            System.out.println("Terminating the Listener");
        }
} 
```

**MyTask 的 Java 代码**

```
public class MyTask implements Runnable{

@EJB
LoaderManager loaderManager;

@Schedule(hour="0", minute="0", second="0", persistent=false)
public void run() {

                //Some unnecessary code left out

        if (itIsOkToImportTheDatabase)
            {

            loaderManager.loadDatabase(pathToNewFile);

            if (thisistrue) {
                //doesnt matter
            } else {
                //doesnt matter
            }
        }

        else

        {
            // not important
            }
        }
    }

} 
```

**LocalBean 的 Java 代码，用于通过 JPA 将数据导入数据库**

```
@Stateless
@LocalBean
public class LoaderManager implements LoaderManagerDAO{

    @Inject
    private EntityManager em;
    private Row row = null;
    private FileInputStream inp;
    private Workbook wb;

    public void loadDatabase(String FileLocation) {

        InputStream inp = null;

// some file set up stuff, using Apache POI

Sheet sheet1 = wb.getSheetAt(0);

for (int i = 1; i <= sheet1.getLastRowNum(); i++) {
            // loop through each row

            em.persist(elementsInRow);

        } 
```

侦听器确实成功地检查了文件夹 - 但是当调用导入数据库的代码时 - 它似乎停止了，在 JBOSS 控制台上没有出现错误。我尝试以多种方式注入 LoaderManager，但遇到了障碍……方法调用 loaderManager.loadDatabase(pathToNewFile); 除非我使用实例化它，否则不会到达 LoaderManager 类（使用打印语句检查）

```
LoaderManager loaderManager = new LoaderManager(): 
```

..我很确定这是错误的，即使这样它也只能达到（但不执行，通过打印语句检查）

```
em.persist(elementsInRow); 
```

WebApp 的其他功能似乎都不受此影响，任何帮助/建议将不胜感激，

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:20:33.147

您的代码几乎没有意义。注入是错误的，在 Java EE 环境中使用非托管线程通常是一个坏主意。由于您使用的是带有 Java EE 6 的容器，因此请考虑使用单例启动 bean 和 timerservice：

```
 @Startup
   @Singleton
   public class SchedulerBean {
     @Resource
     private TimerService timerService;
     @EJB
     private LoaderManager loaderManager;
     private Timer timer;

     @PostConstruct
     public void init() {
       timer = timerService.createIntervalTimer(20 * 1000, 20 * 1000, new TimerConfig(null, false));
     }

     @PreDestroy
     public void deinit() {
       timer.cancel();
     }

     @Timeout
     public void schedule(Timer timer) {
        // TODO: Add your checks here
        loaderManager.loadDatabase(databaseLocation);
     }
   } 
```

此外，我认为您应该为 LoaderManager 使用单例 bean 而不是无状态 bean。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:23:48.963

`MyTask`您正在以下行中实例化

```
scheduler.scheduleAtFixedRate(new MyTask(), 0,20, TimeUnit.SECONDS); 
```

哪个利用

```
@EJB
LoaderManager loaderManager; 
```

这将由 EJB 容器注入。这种方式很可能是行不通的。

实现此目的的一种方法是通过使用构造函数来执行以下操作`MyTask`

```
public MyTask() {
    try {
        InitialContext ctx = new InitialContext();

        loaderManager = (LoaderManager) ctx.lookup("<Package Name>.LoaderManager");

    } catch (NamingException ex) {
        // Error Handling
    }
} 
```

在这种情况下，如果`LoaderManager`作为远程客户端暴露给其他应用程序，那么您应该能够将其取回。

# sql - SQL 加入 >=

> ID：15696210
> 
> 赞同：1
> 
> 时间：2013-03-29T01:57:44.050
> 
> 标签：sql

我在 ORACLE 中有一张这样的表

```
a     b
--   --
1000   1
100    2
10     3
1      4 
```

例如，我的另一张表在名为 numbers 的列中有“67”或“112”之类的数字。如何使用这些值加入该表并获得正确的结果，其中 >=1000 为 1，>=100 为 2 >=10 为 3，以此类推。

我试着做一个

```
select g.b
from table o
join table2 g on o.column >= g.a 
```

当我这样做时说 1002 是 g 的值，我会得到这些结果。1 2 3 4

当我只想 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:12:59.387

最简单的情况是，如果您的查找表有范围而不是只有一个数字，例如第 1 行 = 1000,9999,1 和第 2 行 = 100,999,2 等。那么您的联接可能是

```
SELECT OtherTable.n, lookup.b
from OtherTable
LEFT JOIN lookup on OtherTable.n between lookup.low and lookup.high 
```

但是，如果您真的想使用原始表，那么在 SQL Server 上，请执行以下操作：

```
/*CREATE TABLE #A (a int,b int)
INSERT INTO #A VALUES (1000,1),(100,2),(10,3),(1,4)

CREATE TABLE #B (n INT)
INSERT INTO #B VALUES (67),(112),(4),(2001)
*/
SELECT B.n,  A1.b
FROM #B B OUTER APPLY (SELECT TOP 1 a,b FROM #A A WHERE A.a<B.n ORDER BY A.a DESC) A1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T02:19:42.480

这是一种使用子查询来获取`MAX`列 a，然后在同一个表上重新加入以获取 b 的方法：

```
select t.numericvalue, t2.b
from (
  select t.numericvalue, max(t2.a) maxb
  from table1 t
    join table2 t2 on t.numericvalue >= t2.a
  group by numericvalue
  ) t join table2 t2 on t.maxb = t2.a 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!4/6471f/1)

# matrix - 从矩阵中提取列

> ID：15696217
> 
> 赞同：0
> 
> 时间：2013-03-29T01:58:36.000
> 
> 标签：matrix, python-3.x, user-defined-functions, extraction

好吧，我只是想知道如何从矩阵中提取一列。这将使用函数中定义的用户。

例如：

```
D = [[2,9], [5,2], [1,0]]
def col(B,j):

print(col(D,0)) 
```

将导致：[2,5,1]

编辑：没关系自己想出来

```
def col(B,j):
    Z=[]
    for i in range(len(B)):
        Z.append(B[i][j])

    return Z 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:46:37.520

```
def col(B,j):
    Z=[]
    for i in range(len(B)):
        Z.append(B[i][j])
    return Z 
```

# node.js - 获取目录中的最新文件 Node.js

> ID：15696218
> 
> 赞同：23
> 
> 时间：2013-03-29T01:58:40.930
> 
> 标签：node.js

我正在尝试使用 Node.js 在目录中查找最近创建的文件，但似乎找不到解决方案。下面的代码似乎在一台机器上做了这个伎俩，但在另一台机器上它只是从目录中拉出一个随机文件 - 正如我想的那样。基本上，我需要找到最新的文件并且只有那个文件。

```
var fs = require('fs'); //File System
var audioFilePath = 'C:/scanner/audio/'; //Location of recorded audio files
    var audioFile = fs.readdirSync(audioFilePath)
        .slice(-1)[0]
        .replace('.wav', '.mp3'); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-10-07T09:05:22.767

假设`underscore`( [http://underscorejs.org/](http://underscorejs.org/) ) 的可用性并采用同步方法（它没有利用 node.js 的优势，但更容易掌握）：

```
var fs = require('fs'),
    path = require('path'),
    _ = require('underscore');

// Return only base file name without dir
function getMostRecentFileName(dir) {
    var files = fs.readdirSync(dir);

    // use underscore for max()
    return _.max(files, function (f) {
        var fullpath = path.join(dir, f);

        // ctime = creation time is used
        // replace with mtime for modification time
        return fs.statSync(fullpath).ctime;
    });
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-02-20T01:21:12.953

另一种方法：

```
const glob = require('glob')

const newestFile = glob.sync('input/*xlsx')
  .map(name => ({name, ctime: fs.statSync(name).ctime}))
  .sort((a, b) => b.ctime - a.ctime)[0].name 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-03T21:04:07.360

虽然不是最有效的方法，但这在概念上应该是直截了当的：

```
var fs = require('fs'); //File System
var audioFilePath = 'C:/scanner/audio/'; //Location of recorded audio files
fs.readdir(audioFilePath, function(err, files) {
    if (err) { throw err; }
    var audioFile = getNewestFile(files, audioFilePath).replace('.wav', '.mp3');
    //process audioFile here or pass it to a function...
    console.log(audioFile);
});

function getNewestFile(files, path) {
    var out = [];
    files.forEach(function(file) {
        var stats = fs.statSync(path + "/" +file);
        if(stats.isFile()) {
            out.push({"file":file, "mtime": stats.mtime.getTime()});
        }
    });
    out.sort(function(a,b) {
        return b.mtime - a.mtime;
    })
    return (out.length>0) ? out[0].file : "";
} 
```

顺便说一句，原始帖子中没有明显的理由使用同步文件列表。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-22T02:46:16.717

功能更强大的版本可能如下所示：

```
import { readdirSync, lstatSync } from "fs";

const orderReccentFiles = (dir: string) =>
  readdirSync(dir)
    .filter(f => lstatSync(f).isFile())
    .map(file => ({ file, mtime: lstatSync(file).mtime }))
    .sort((a, b) => b.mtime.getTime() - a.mtime.getTime());

const getMostRecentFile = (dir: string) => {
  const files = orderReccentFiles(dir);
  return files.length ? files[0] : undefined;
}; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-03-12T09:15:02.790

首先，您需要订购文件（开头是最新的）

然后，获取最新文件的数组的第一个元素。

我已经修改了@mikeysee 的代码以避免路径异常，因此我使用完整路径来修复它们。

2个函数的截取代码如下所示。

```
const fs = require('fs');
const path = require('path');

const getMostRecentFile = (dir) => {
    const files = orderReccentFiles(dir);
    return files.length ? files[0] : undefined;
};

const orderReccentFiles = (dir) => {
    return fs.readdirSync(dir)
        .filter(file => fs.lstatSync(path.join(dir, file)).isFile())
        .map(file => ({ file, mtime: fs.lstatSync(path.join(dir, file)).mtime }))
        .sort((a, b) => b.mtime.getTime() - a.mtime.getTime());
};

const dirPath = '<PATH>';
getMostRecentFile(dirPath) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-07-20T18:57:22.053

这应该可以解决问题（“dir”是您使用 fs.readdir 获取“files”数组的目录）：

```
function getNewestFile(dir, files, callback) {
    if (!callback) return;
    if (!files || (files && files.length === 0)) {
        callback();
    }
    if (files.length === 1) {
        callback(files[0]);
    }
    var newest = { file: files[0] };
    var checked = 0;
    fs.stat(dir + newest.file, function(err, stats) {
        newest.mtime = stats.mtime;
        for (var i = 0; i < files.length; i++) {
            var file = files[i];
            (function(file) {
                fs.stat(file, function(err, stats) {
                    ++checked;
                    if (stats.mtime.getTime() > newest.mtime.getTime()) {
                        newest = { file : file, mtime : stats.mtime };
                    }
                    if (checked == files.length) {
                        callback(newest);
                    }
                });
            })(dir + file);
        }
    });
 } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-07T13:41:16.687

使用纯 JavaScript 和易于理解的结构：

```
function getLatestFile(dirpath) {

  // Check if dirpath exist or not right here

  let latest;

  const files = fs.readdirSync(dirpath);
  files.forEach(filename => {
    // Get the stat
    const stat = fs.lstatSync(path.join(dirpath, filename));
    // Pass if it is a directory
    if (stat.isDirectory())
      return;

    // latest default to first file
    if (!latest) {
      latest = {filename, mtime: stat.mtime};
      return;
    }
    // update latest if mtime is greater than the current latest
    if (stat.mtime > latest.mtime) {
      latest.filename = filename;
      latest.mtime = stat.mtime;
    }
  });

  return latest.filename;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-03-13T21:53:39.597

[扩展 umair 的答案以纠正当前工作目录的错误]

```
function getNewestFile(dir, regexp) {
    var fs = require("fs"),
     path = require('path'),
    newest = null,
    files = fs.readdirSync(dir),
    one_matched = 0,
    i

    for (i = 0; i < files.length; i++) {

        if (regexp.test(files[i]) == false)
            continue
        else if (one_matched == 0) {
            newest = files[i];
            one_matched = 1;
            continue
        }

        f1_time = fs.statSync(path.join(dir, files[i])).mtime.getTime()
        f2_time = fs.statSync(path.join(dir, newest)).mtime.getTime()
        if (f1_time > f2_time)
            newest[i] = files[i]  
    }

    if (newest != null)
        return (path.join(dir, newest))
    return null
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-29T21:42:29.433

不幸的是，我认为不能保证这些文件按任何特定顺序排列。

相反，您需要在每个文件上调用[fs.stat](http://nodejs.org/api/fs.html#fs_fs_stat_path_callback)（或[fs.statSync](http://nodejs.org/api/fs.html#fs_fs_statsync_path)）以获取上次修改的日期，然后在获得所有日期后选择最新的日期。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-05-19T16:16:17.337

令人惊讶的是，在这个问题中没有明确使用**数组**函数、函数式编程的例子。

这是我对在 nodejs 中获取目录的最新文件的看法。默认情况下，它将获取任何扩展名的最新文件。传递扩展属性时，该函数将返回该扩展的最新文件。

此代码的优点是它的声明性和模块化且易于理解，而不是使用“逻辑分支/控制流”，当然前提是您了解这些数组函数的工作原理

```
const fs = require('fs');
const path = require('path');
function getLatestFile({directory, extension}, callback){
  fs.readdir(directory, (_ , dirlist)=>{
    const latest = dirlist.map(_path => ({stat:fs.lstatSync(path.join(directory, _path)), dir:_path}))
      .filter(_path => _path.stat.isFile())
      .filter(_path => extension ? _path.dir.endsWith(`.${extension}`) : 1)
      .sort((a, b) => b.stat.mtime - a.stat.mtime)
      .map(_path => _path.dir);
    callback(latest[0]);
  });
}

getLatestFile({directory:process.cwd(), extension:'mp3'}, (filename=null)=>{
  console.log(filename);
});
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-13T03:04:47.927

@pguardiario 的功能答案的异步版本（我自己做了这个，然后在我去添加这个时在页面的中间找到了他们的答案）。

```
import {promisify} from  'util';
import _glob       from  'glob';
const glob = promisify(_glob);

const newestFile = (await Promise.all(
    (await glob(YOUR_GLOB)).map(async (file) => (
        {file, mtime:(await fs.stat(file)).mtime}
    ))
))
    .sort(({mtime:a}, {mtime:b}) => ((a < b) ? 1 : -1))
    [0]
    .file
; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-05T13:30:07.620

读取目录 (fs.readdirSync) 和文件状态 (fs.statSync) 的同步版本：

```
function getNewestFile(dir, regexp) {
    newest = null
    files = fs.readdirSync(dir)
    one_matched = 0

    for (i = 0; i < files.length; i++) {

        if (regexp.test(files[i]) == false)
            continue
        else if (one_matched == 0) {
            newest = files[i]
            one_matched = 1
            continue
        }

        f1_time = fs.statSync(files[i]).mtime.getTime()
        f2_time = fs.statSync(newest).mtime.getTime()
        if (f1_time > f2_time)
            newest[i] = files[i]  
    }

    if (newest != null)
        return (dir + newest)
    return null
} 
```

您可以按如下方式调用此函数：

```
var f = getNewestFile("./", new RegExp('.*\.mp3')) 
```

# ruby-on-rails - 如何理解这段代码？

> ID：15696220
> 
> 赞同：1
> 
> 时间：2013-03-29T01:58:45.663
> 
> 标签：ruby-on-rails, plugins, calendar

```
def event_calendar_options
    { 
      :year => @year,
      :month => @month,
      :event_strips => @event_strips,
      :month_name_text => I18n.localize(@shown_month, :format => "%B %Y"),
      :previous_month_text => "<< " + month_link(@shown_month.prev_month),
      :next_month_text => month_link(@shown_month.next_month) + " >>"
    }
end

def event_calendar
  calendar event_calendar_options do |args|
    event = args[:event]
    %(<a href="/events/#{event.id}" title="#{h(event.name)}">#{h(event.name)}</a>)
  end
end 
```

这里整个 event_calendar_options 都用 {} 括起来，所以它只是简单地返回哈希表吗？

其次，为什么event_calendar_options这个模块方法可以作为参数传递给calendar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:03:55.810

假设它们是同一类的一部分（例如控制器或模型），`event_calendar_options`可以通过`event_calendar`. 这是课堂上的常见做法。即使它们不是，它们也可以被声明为公共的并且也可以被其他类调用（这不太常见）。

而且，是`event_calendar_options`的，返回哈希表。在 ruby​​ 中，除非提供语句，否则将返回最终语句`return`。在这种情况下，它将返回一个哈希表，该方法将对其进行迭代`event_calendar`。

# java - 传递的 ArrayList 正在更新 + Java

> ID：15696229
> 
> 赞同：0
> 
> 时间：2013-03-29T02:00:04.063
> 
> 标签：java, arraylist

我有一个问题，我现在想不通。我有一个作为 Iframe 的类，它具有变量“private List pathContainer”来维护 Iframe 的路径。

给出的是它的代码，

```
public class IFrame implements HtmlElement {

private WebElement elem;
private String xpath;
private boolean selected;
private String parentClass;
private boolean isProcessed=false;
private boolean isIframeContent=false;
private List <String> pathContainer;

    public IFrame(WebElement elem) {
    this.elem = elem;
    pathContainer=new ArrayList<String>();
} 
```

我将父 iframe 的路径列表传递给子 iframe 以将其包含在其列表中。但是，当我修改 subIframe 路径列表时，父 Iframe 路径列表也会更改。给定的是函数的代码，

```
public void LoadIFrameNodes(List<String> parentPath){
        IFrame iframe=new IFrame(e);
        List <String> tempPath=new ArrayList<String>();
        iframe.setPathContainer(parentPath); //assigning parent path in subIframe list
        tempPath=iframe.getPathContainer();
        tempPath.add(iframe.getXpath());  // add another value to subIframe
        iframe.setPathContainer(tempPath); //setting the changed list as the subIframe
   } 
```

一旦使用新值设置了 subIframe，传递的 parentPath 列表也将使用新值进行更改。我没有更新通过的列表。请告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T02:03:51.840

```
iframe.setPathContainer(parentPath); //assigning parent path in subIframe list
tempPath=iframe.getPathContainer(); 
```

除非那些 getter/setter 制作防御性副本（通常他们不会），否则您`tempPath`只需指向与`parentPath`.

在更新列表之前，您需要制作列表的副本。

```
 final List<String> tempPath=new ArrayList<String>(parentPath);
 tempPath.add(iframe.getXpath());  
 iframe.setPathContainer(tempPath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T02:04:37.557

在 Java 中，当传递的对象发生更改时，即使方法返回，更改也是持久的。当您将 iframe 的 pathcontainer 设置为 parentPath，然后将路径取出时，您将获得对同一 parentPath 的引用。当你改变它时，它仍然存在。如果你不想要这个，复制一份。

你可以通过调用来做到这一点

```
List<String> tempPath = new ArrayList<String>(parentPath);
iframe.setPathContainer(tempPath); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T02:07:59.087

问题是你有几个指向同一个对象的引用变量。我建议您进行一些研究以了解参考变量的工作原理。

要解决此问题，您需要在将 List 传递给方法之前或之后立即对其进行复制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T02:04:55.233

您需要制作列表的副本或以不同的方式传递信息，因为每个参考都指向原始内容，因此您所做的任何更改都会影响原始内容。

StackOverflow 有几个克隆数组列表的例子：

[clone(): ArrayList.clone() 我以为做了一个浅拷贝](https://stackoverflow.com/questions/4592478/clone-arraylist-clone-i-thought-does-a-shallow-copy)

[ArrayList 浅拷贝迭代或 clone()](https://stackoverflow.com/questions/2592985/arraylist-shallow-copy-iterate-or-clone)

[如何克隆 ArrayList 并克隆其内容？](https://stackoverflow.com/questions/715650/how-to-clone-arraylist-and-also-clone-its-contents)

# php - 如何在 PHP 脚本中返回行号

> ID：15696236
> 
> 赞同：47
> 
> 时间：2013-03-28T14:17:23.980
> 
> 标签：php, debugging

PHP脚本是否可以返回调用某些命令的行号？我无法描述我想要的东西，所以也许是一个例子。

我有多次调用 MySQL 的 PHP 代码。第 49 行是：

```
$resultDevice = mysql_query("Some SQL;") or die ("MySQL-Error in settingsU line 49: " . mysql_error()); 
```

我手动编写的文本“第 49 行”。如果我更改我的代码，是否可以更新这个数字“49”？这将使我的生活更容易调试。当然，我可以将其他一些特定于行的文本放入`die`中，但是在文本编辑器中更容易找到行。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-03-28T14:33:02.187

您可以为此使用[魔术常数](http://php.net/manual/en/language.constants.predefined.php) `__LINE__`。

```
echo  __LINE__; 
```

将显示该语句在文件中的行号。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-29T02:06:24.457

如果你想要一个你可以使用的跟踪（对于 PHP 4 >= 4.3.0:)

```
function error_report_function($error) 
{
$dbgt=debug_backtrace();
return "$error in {$dbgt[1][file]} on line {$dbgt[1][line]}";
} 
```

您可以`debug_backtrace`为此使用，否则总是通过该行（使用`__LINE__`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-30T06:06:22.917

你可以使用这样的东西：

```
function throwSQLError($file, $line, $error) {
    return "MySQL-Error in " . $file . " on line " . $line . ": " . $error;
} 
```

```
$result = mysql_query("Some SQL;") or die (throwSQLError(__FILE__, __LINE__, mysql_error())); 
```

这为您提供了一个动态函数来抛出您可以多次使用的错误。

未经测试，仅在原始编辑器中编写。

# eclipse - Tomcat 不推送更新的 HTML 页面

> ID：15696253
> 
> 赞同：1
> 
> 时间：2013-03-29T02:02:26.440
> 
> 标签：eclipse, tomcat, redeploy

简而言之：从 Eclipse 推送到由 Eclipse 管理的 Tomcat 中的 wtpwebapps 文件夹的 html、xhtml 和 jsp 页面没有在浏览器中显示为更新。

-- 我尝试在新浏览器中打开页面（不同的浏览器，例如从 Chrome 开始，在服务器上更新文件后在 Firefox 中打开）

-- 我已经在 Context.xml:reloadable 和 Eclipse 模块配置中尝试了 true 和 false 的“reloadable”。

-- 我已经“触摸”了 wtpwebapps/myapp 文件夹中的新 html 文件，以确保它的日期是“迟到的”。我还观察了 Eclipse 中的重新部署过程，并验证了文件正在按预期移动。

-- 我已验证更改显示在 Tomcat 中部署的应用程序文件夹中的实际文件内容中。

-- 我在每次配置更改之间清理了 Tomcat 工作目录，并完全重新部署了 Web 应用程序

-- 我尝试过使用 html、xhtml（使用 MyFaces 解释）和 jsp 文件

-- JSF 和 Tomcat 的发布间隔都设置为 1 秒

-- JSF 处于开发模式

-- 我在 Tomcat 6.0.35 和 Tomcat 7.0.30 中试过这个

有任何想法吗？

# binary - 如何从二进制可执行文件中提取位

> ID：15696254
> 
> 赞同：-1
> 
> 时间：2013-03-29T02:02:41.497
> 
> 标签：binary, executable, cat

对于一个研究项目，我需要散列应用程序的“可执行足迹”。我没有关于这个特定领域的广泛知识库。`cat bash`例如，我尝试过，stdout 打印 gobbledygook。如何将可执行文件读取为正常的 1 和 0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:32:52.867

如果您想从文件中获取二进制表示作为位，您可以使用以下 python 脚本调用它`python to_binary.py name_of_file`

```
import sys

def bin(x):
    return "".join(x & (1 << i) and "1" or "0" for i in range(7,-1,-1)) 

file = open(sys.argv[1], "rb")
contents = file.read()
file.close()

for byte in contents:
    sys.stdout.write(bin(ord(byte)))
sys.stdout.write("\n") 
```

# javascript - 如何将 JSON 从文件转换为 JavaScript 中的数组？

> ID：15696255
> 
> 赞同：0
> 
> 时间：2013-03-29T02:02:55.670
> 
> 标签：javascript, json, parsing

我在解析 JSON 时遇到问题。JSON 被正确读取（如控制台所示），但是，我无法获取数组来保存任何数据。我看过类似的问题，但似乎没有一个对我的问题有帮助。预先感谢您的任何帮助。

```
function getArray(){
    return $.getJSON('testJSON.json');
}

getArray().done(function(json) {
    $.each(json, function(key, val) {

            words.push(key);
        console.log(key);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:14:56.167

JSON.parse() 似乎是您正在寻找的。我将展示我如何在我的项目中使用它：

我使用 jQuery get 函数发出 HTTP 请求，然后使用 JSON.stringify 将返回的数据转换为字符串。我不确定这是否需要解析它，或者我是否这样做是为了将数据存储在 HTML5 LocalStorage 中。

例如

```
 var treasureHuntString = JSON.stringify(data)
    var treasureHunt = JSON.parse(treasureHuntString); 
```

从那以后，我可以访问 TreasureHunt 对象中的所有属性。我还利用浏览器调试来查看对象的结构，因为它与我的预期有些不同。

# embedded - 嵌入式系统中的引导加载程序和启动代码是什么？

> ID：15696258
> 
> 赞同：11
> 
> 时间：2013-03-29T02:03:22.093
> 
> 标签：embedded

嵌入式系统中引导加载程序和启动代码的基本意义是什么？有什么区别？

这些放在哪里？？并概述了从上电复位到应用程序启动的流程。一般考虑任何平台。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-29T03:53:03.703

所有处理器都有一些特定于处理器的启动方式。通常在处理器地址空间中有一些地址，例如 0xFFFF0000，处理器读取该内存的位置。它找到的值用作编码地址并开始在该地址执行代码。

硬件芯片或电路板设计人员会做的是确保将闪存或某种其他形式的非易失性存储器 (ROM) 映射到该地址空间，以便处理器的引导代码和该地址映射到该特殊位置的引导代码地址，将在打开电源并释放复位时供处理器读取（RAM 易失性，关闭电源会丢失数据，重新打开电源会得到一些随机数据，直到RAM是用别的东西写的）。

所以处理器运行的第一个代码通常称为引导加载程序，有些人可能会争论说加载程序这个词的后半部分意味着这段代码既可以“引导”操作系统或任何要运行的应用程序，也可以作为第二个函数为开发人员提供“加载器”功能。如果您曾经使用过[U-Boot](http://en.wikipedia.org/wiki/Das_U-Boot)甚至[GRUB](http://en.wikipedia.org/wiki/GNU_GRUB)或许多其他引导加载程序，您可能会明白，如果您不碰任何东西，它将引导默认的任何东西，嵌入式应用程序或操作系统，等等。

[但是，如果您中断启动过程，并且中断该过程是非常特定于平台和软件的，有时您必须按下按钮或将两个引脚短接或在串行/ UART](http://en.wikipedia.org/wiki/Universal_asynchronous_receiver/transmitter)端口上发送转义或其他字符等.，然后它进入加载程序模式，您可以更改它的引导和/或引导加载程序而不是从闪存/ROM加载默认程序，它可能让您使用[XMODEM](https://en.wikipedia.org/wiki/XMODEM)或[ZMODEM](https://en.wikipedia.org/wiki/ZMODEM)或以太网端口和协议将测试程序加载到 RAM 中，然后让您运行该程序而不是默认程序。

有些人将引导软件称为引导加载程序，即使它不允许您中断进程并加载一些备用程序，因为该引导代码可能会将应用程序从非易失性存储“加载”到 RAM 中。

并非所有引导加载程序都需要将应用程序从非易失性存储（闪存/ROM、硬盘、CD-ROM 等）复制到 RAM。一些系统和一些应用程序从闪存/ROM 运行。以 PC 为例：PC 中真正的引导加载程序是 BIOS，它是一个存在于闪存/ROM 中并从其运行的程序。对于像 PC 这样的具有[DRAM](https://en.wikipedia.org/wiki/Dynamic_random-access_memory)的系统，无论如何您都必须启动 DRAM 系统。配置硬件以使 DRAM 工作需要大量代码，有时您可以在 PC 启动时在显示器上看到一些状态。如果您的系统中有[SRAM](https://en.wikipedia.org/wiki/Static_random-access_memory)，那么它可能还需要一些初始化，但通常不像 DRAM 那样复杂，而且通常它可以立即启动并准备好使用很少或没有配置，不同的处理器和不同的系统......不同.

所以处理器没有复位，以某种方式硬编码在处理器硬件中。它找到了引导代码的入口点并开始执行该代码。然后，该代码通常需要启动并运行外围设备和 RAM，然后运行主应用程序。或者在启动该应用程序之前至少需要同样多的硬件。

在嵌入式系统中加载 Linux 可以像启动 RAM 一样简单，然后将内核从 ROM 复制到 RAM，可能准备一些寄存器并可能填充内核查看的一些内存位置，可能是内存大小和备用命令行例如，然后分支到内核的开头。您不必在某些系统上复制内核；您可以分支到它所在的ROM。然后 Linux 将启动系统的其余部分。在 PC 上，BIOS 做了很多事情，比如调出视频、DRAM、枚举[PCI](https://en.wikipedia.org/wiki/Conventional_PCI)(e) 总线外设，启动硬盘或其他文件系统类似设备，然后使用用户在 BIOS 硬盘或类似外设（USB 拇指驱动器或 CD-ROM 等）中定义的。文件系统的开头将包含某种如何根据 BIOS 代码规则引导操作系统的内容。这可能是另一个引导加载程序（GRUB、U-Boot 等），它最终将内核或操作系统启动代码复制到 RAM，然后分支到它……

术语引导加载程序和启动代码可以互换使用。有些人可能会对它们不同或细微的差异感到挑剔，但这通常与复杂性有关，像 U-Boot 这样具有以太网驱动程序和文件系统驱动程序等的引导加载程序在某种程度上是其中的操作系统自我，无论哪种方式，U-Boot 都非常复杂。

例如，微控制器的启动代码可能很简单，只需几行代码、设置堆栈指针并跳转到 main。启动代码/引导加载程序可以是介于两者之间的任何复杂程度。如前所述，一些嵌入式系统从 ROM 启动并运行它们的应用程序，因此不需要复制和运行。其他人需要复制并运行主应用程序。

有时会涉及到硬件或其他一些方案。例如，许多基于[FPGA](http://en.wikipedia.org/wiki/Field-programmable_gate_array)的解决方案是可能的，其中硬件在上电时从 ROM 读取内容并复制它。然后，当处理器或其他逻辑被释放时，您的程序或其他数据就神奇地存在于 RAM 中，随时可以使用。即使电源关闭时，它也存在于您通常不会触摸的 ROM 中。[Raspberry Pi](http://en.wikipedia.org/wiki/Raspberry_Pi)还有另一种解决方案。该芯片有两个处理器，一个是ARM，一个是[GPU](https://en.wikipedia.org/wiki/Graphics_processing_unit)，图形处理器，完全不同的指令集，专为数学运算等而设计。有以某种形式烧入芯片（可能是芯片上的 ROM）中的小型引导加载程序，足以启动和读取 SD 卡。这是 GPU 顺便说一句；ARM 处于复位状态。然后 GPU 从 SD 卡读取其第一个引导加载程序文件，将其复制到 RAM 并运行它。

该引导加载程序做了更多的事情，比如启动 DRAM，然后将更复杂的第二（第三？）阶段引导加载程序从 SD 卡复制到 DRAM，然后运行它。该代码可能包含用于为系统执行屏幕/显示功能的 GPU 应用程序。它还，一旦视频和一切准备就绪，再次读取 SD 卡并将 ARM 应用程序从 SD 卡复制到 DRAM，填充 RAM 中的一些项目（异常表中的引导向量（内核分支））以及 Linux 内核引导代码需要的已知位置的其他一些项目。然后它释放 ARM 上的复位。此时 ARM 唤醒了它的应用程序，内核，神奇地在 RAM 中......

# ruby-on-rails - 创建属于同一模型（rails）的两个实例的nested_resource

> ID：15696259
> 
> 赞同：1
> 
> 时间：2013-03-29T02:03:37.780
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试创建一个消息模型，其中消息属于两个用户，发送者和接收者。同样，用户将拥有_many 消息作为 Sent_Messages 和 Received_Messages。

当我尝试创建新电子邮件时遇到了麻烦。我的表单显示正常，但是当我尝试保存时，我得到了不同的错误（取决于我最近尝试的解决方案的尝试当前“用户预期，得到字符串”）。

我的模型和相关控制器定义如下：

用户.rb

```
class User < ActiveRecord::Base
    has_many :sent_messages, :class_name => "Message", :foreign_key => 'sender_id' 
    has_many :received_messages, :class_name => "Message", :foreign_key => 'recipient_id'
    ...
end 
```

消息.rb

```
class Message < ActiveRecord::Base
   belongs_to :sender, :class_name => 'User'
   belongs_to :recipient, :class_name => 'User'
   ...
end 
```

Message_Controller.rb before_filter :get_user

```
...

def new
  @message = @user.sent_messages.build
  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @message }
  end
end

def create
  @message = Message.new(params[:message])
  respond_to do |format|
    if @message.save
      format.html { redirect_to @message, notice: 'Message was successfully created.' }
      format.json { render json: @message, status: :created, location: @message }
    else
      format.html { render action: "new" }
      format.json { render json: @message.errors, status: :unprocessable_entity }
    end
  end
end

...

private

  def get_user
 @user = User.find(params[:user_id])
  end 
```

我认识到我的尝试方式存在根本性的问题，但我对 Rails 还很陌生，所有相关问题（如[this](https://stackoverflow.com/questions/904272/messages-between-users?rq=1)和[this](https://stackoverflow.com/questions/5698081/node-expected-got-string)）似乎都没有任何对我有帮助的答案。

**编辑：**

_形式：

```
<%= form_for([@user, @message]) do |f| %>
    ...
    <div class="field">
      <%= f.label :recipient %><br />
      <%= f.text_field :recipient %>
    </div>
  <div class="field">
    <%= f.label :subject %><br />
    <%= f.text_field :subject %>
  </div>
  <div class="field">
    <%= f.label :content %><br />
    <%= f.text_area :content %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

# xml - xml ajax 获取嵌套项

> ID：15696262
> 
> 赞同：0
> 
> 时间：2013-03-29T02:03:45.693
> 
> 标签：xml, ajax

您好，我在使用 ajax 的 xml 中获取嵌套元素时遇到问题，我将其作为 xml 文件（这是一个示例）

```
<root>
     <element1>
          <child1></child1>
          <child2></child2>
     </element1>
     <element2>
          <child1></child1>
          <child2></child2>
     </element2>
</root> 
```

下面是我正在使用的 ajax 代码，用于获取我正在寻找的内容

```
data.getElementsByTagName('child1') 
```

现在我的问题是如何让它只在 element1 中显示 child1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:12:47.657

我遇到了问题，我将其编辑如下

```
data.getElementsByTagName('child1') [0].firstChild.nodeValue; 
```

更改 [0] 选择不同的。

# python - Python math.sqrt 损失精度

> ID：15696267
> 
> 赞同：4
> 
> 时间：2013-03-29T02:04:18.603
> 
> 标签：python

我试图获取 long int 的 sqrt 值

```
from math import sqrt
print sqrt(410241186411534352) 

<< 640500731.0 
```

它返回 640500731.0，这确实是 640500730.999999993... 精度。如何解决？

**我根据@DSM 和@Rob 的回复解决了，非常感谢。**

```
from math import sqrt
from decimal import Decimal
print Decimal(410241186411534352).sqrt() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T02:30:23.943

```
>>> import decimal
>>> decimal.getcontext().prec = 100
>>> a=decimal.Decimal(410241186411534352)**decimal.Decimal(.5)
>>> print a
640500730.9999999929742468943411712910588335443486974564849183256021518032770726219326459594197730639
>>> print a*a
410241186411534352.0000000000000000000000000000000000000000000000000000000000000000000000000000000000
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T02:11:58.177

Python 数学库函数是 C 数学库函数的薄包装器，因此 Python 在进行计算之前将长整数转换为双倍大小的浮点数。如果您想在 Python 中使用真正的多精度算术，您可以尝试[mpmath](http://code.google.com/p/mpmath/)。

# wordpress - 按名称而不是 ID 调用 Wordpress 类别

> ID：15696268
> 
> 赞同：2
> 
> 时间：2013-03-29T02:04:24.683
> 
> 标签：wordpress

我正在处理一个 WP 站点的本地副本，但是当我们将其移动时，所有类别 ID 都会发生变化，因此我需要找到一种方法来通过名称而不是 ID 来调用事物。现在我有这个：

```
$myposts = get_posts('numberposts=3&category=3599'); 
```

我实际上需要显示两个类别的帖子，所以我需要的是技术和技术新闻，而不是 3599 类别。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:17:48.817

您应该能够像这样在数组中调用名称。$myposts = get_posts('name' => 'News', );

[http://codex.wordpress.org/Function_Reference/get_the_category](http://codex.wordpress.org/Function_Reference/get_the_category)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:16:24.977

`get_posts`可以使用所有可以的参数`WP_Query`，所以试试这个：

```
$myposts = get_posts('numberposts=3&category_name=[Technology],[Technology News]'); 
```

将 [Technology] 和 [Technology News] 替换为两个各自类别的**slug 名称**（当然还要去掉括号）。确保使用 slug 名称而不是常规名称，否则它将不起作用。

另外，请*务必*先对此进行测试。我对 WordPress 3.5.0 的本地安装进行了简短的测试，但我认为我不必向您强调，您应该确保它最终按预期工作！

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T02:36:44.137

想通了 - 我只需要将 'category' 更改为 'category_name'

```
$myposts = get_posts('numberposts=3&category_name=technology,technology-news'); 
```

# c++ - 包含 .h 的 c 文件会导致奇怪的“多重定义”错误吗？

> ID：15696271
> 
> 赞同：1
> 
> 时间：2013-03-29T02:04:49.923
> 
> 标签：c++, c, include, multiple-definition-error

我从事一个包含`c`源文件和源文件`c++`的项目。
我使用如下代码：

```
extern "C"
{
    #include "init.h"
    #include "ParameterGet.h"//ParameterGet.c exists
} 
```

包括 c 文件。

但是我得到了一个`.h`没有文件的 c`.c`文件。它会导致（我认为）许多错误：

```
multiple definition of `PeriodicFaultReport'
multiple definition of `FaultActiveEventReport'
multiple definition of `FaultInactiveEventReport'
multiple definition of `FaultLatchEventReport' 
```

其中`PeriodicFaultReport`, `FaultActiveEventReport`, `FaultInactiveEventReport`,`FaultLatchEventReport`都在其中声明，`"DataStruct.h"`并且该文件没有`.c`文件。

此外，我注意到`PeriodicFaultReport`, `FaultActiveEventReport`, `FaultInactiveEventReport`,`FaultLatchEventReport`都是`global variables`.
**[重要的]**

内容相`"DataStruct.h"`对于`c`：

```
struct  OptionalString PeriodicFaultReport;

struct  FaultActiveEventReportSet
{
    BOOL     Flag;
    UINT8    Type ;
    UINT32   Length;
    struct   Optional...  Report...[2];

}FaultActiveEventReport;

struct  FaultInactiveEventReportSet
{
    BOOL     Flag;
    UINT8    Type ;
    UINT32   Length  ;
    struct  Optional... Faultt...;

}FaultInactiveEventReport;

struct  FaultLatchEventReportSet
{
    BOOL     Flag;
    UINT8    Type ;
    UINT32   Length  ;
    struct  OptionalInteger  FaultID[2];

}FaultLatchEventReport; 
```

我知道可能有一个像[这里](https://stackoverflow.com/questions/8201944/multiple-definition-and-header-only-librairies?lq=1)
这样的答案 但这是不对的：我从一个项目中
获取所有文件，并且在那里多次包含在其他 .h 文件中，它没有问题。 （项目在，这可能是没有问题的原因） 但是这是真的吗，有助于这一点并打破标准？`c``"DataStruct.h"`
`c``VS2008`
`VS``c`

# android - 我可以在三星note 2上安装intellij idea吗？

> ID：15696273
> 
> 赞同：1
> 
> 时间：2013-03-29T02:04:56.943
> 
> 标签：android, intellij-idea

我的note2 有一个智能底座，它有HDMI 输出和USB 端口。我想附上鼠标、键盘和电视，并从 github 破解一些 Java 项目。好像我可以以某种方式使用这个安装程序？[http://www.jetbrains.com/idea/download/#linux](http://www.jetbrains.com/idea/download/#linux)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:27:37.263

你不能这样做，IntelliJ IDEA 是为标准 JVM 设计的 Java Swing 应用程序，Android Dalvik VM 将无法运行它，因为它不支持 Swing 并且字节码不同。

# c# - 将图片从应用程序发送到短信

> ID：15696276
> 
> 赞同：0
> 
> 时间：2013-03-29T02:05:28.237
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我创建了一个应用程序，可让您拍照并通过 windows phone 中的文本消息发送，但图像不会显示在消息中，而是显示图像控件的名称。没有图片。

这是我的代码：

```
 void cameraCaptureTask_Completed(object sender, PhotoResult e)
    {
        if (e.TaskResult == TaskResult.OK)
        {
            System.Windows.Media.Imaging.BitmapImage bmp = new System.Windows.Media.Imaging.BitmapImage();
            bmp.SetSource(e.ChosenPhoto);
            myImage.Source = bmp;

        }
    } 
```

和

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        SmsComposeTask smsComposeTask = new SmsComposeTask();
        smsComposeTask.Body = myImage.Source.ToString();
        smsComposeTask.Show();
    } 
```

myImage 是保存所拍摄图像的图像控件

我认为我必须通过某种方式对其进行转换，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:34:11.683

你用的是短信吧？SMS 是基于文本的，因此正在调用图像对象的 ToString 方法。Windows Phone 7 似乎不支持发送彩信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:54:08.023

首先， ToString() 并不意味着在每种情况下都“将任何内容转换为字符串”。您在 Image.Source 上调用 ToString()，因此预期的行为是它会显示“BitmapImage”。

其次，要通过文本发送图像，您需要彩信，但 Windows Phone 7 似乎没有彩信 API。因此，您最好的选择是外部 MMS 服务（通常是付费的），它们通常带有自己的 API。

但是，请注意彩信需要数据连接，因此您最好的选择可能是简单地发送带有图像作为附件的电子邮件。

您在这里“转换”图像有点模棱两可，如果您的程序将同时在发送方和接收方上运行，则可以将图像编码为字符串，通过 SMS 发送，接收方会将字符串解码回图像。但是图像数据保证很长并且不适合短信，而且这种方法过于复杂，所以我怀疑这是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T02:40:57.117

您不能通过短信发送图片，因为：

> 但是，有必要将消息的长度限制为 128 字节（后来改进为 140 字节，或 160 个七位字符），以便消息能够适应现有的信令格式。

[http://en.wikipedia.org/wiki/Short_Message_Service](http://en.wikipedia.org/wiki/Short_Message_Service)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T20:38:29.033

看看[http://en.wikipedia.org/wiki/Smart_Messaging#Picture_message](http://en.wikipedia.org/wiki/Smart_Messaging#Picture_message)

[http://smsj.sourceforge.net/apidocs/org/marre/sms/nokia/OtaBitmap.html](http://smsj.sourceforge.net/apidocs/org/marre/sms/nokia/OtaBitmap.html)有 java 实现，所以如果你要对其进行逆向工程，你可以在 .NET 中进行。但图像会太小（72x28 像素）

# reflexil - 如何调试 Reflexil

> ID：15696278
> 
> 赞同：0
> 
> 时间：2013-03-29T02:06:11.443
> 
> 标签：reflexil

Reflexil ( [http://reflexil.net/](http://reflexil.net/) ) 是一个汇编编辑器，作为 Red Gate 的 Reflector 和 Telerik 的 JustDecompile 的插件运行。

由于它是Reflector的一个插件并且提供了源代码，所以我想对其进行调试并在源代码中设置一个断点以了解它是如何工作的。但是我不能让断点被击中。我尝试在 Reflexil 项目中运行 Debug 并附加到 Reflector 进程，但 Visual Studio 告诉我符号未加载并且断点会命中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:09:13.613

是的，您只需连接到 Reflector，运行 Reflexil。

但是 Reflector 必须使用您在 Visual Studio 中构建的 DLL（在 Plugins/REflexil.Reflector/Debug 中）

问候

塞布

# mysql - MySQL新手：查询工资超过所在部门所有员工平均工资的每个员工的姓名

> ID：15696281
> 
> 赞同：0
> 
> 时间：2013-03-29T02:06:40.770
> 
> 标签：mysql, average

打印工资超过其部门所有员工平均工资的每位员工的姓名。

*   `emp (eid: integer, ename: string, age: integer, salary: real)`
*   `works (eid: integer, did: integer, pct_time: integer)`
*   `dept (did: integer, dname: string, budget: real, managerid: integer)`

这就是我所拥有的：

```
SELECT ename FROM emp
WHERE salary > all (
  SELECT AVG(salary) FROM dept, works
  WHERE emp.eid = works.eid AND works.did = dept.did) 
```

问题是我似乎得到了薪水高于每个工人平均水平的人的名字。我想我不需要到部门表的链接，但是当我尝试编辑上面的字符串时，我仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:39:24.633

您使用平均子查询的方法是合理的，但您需要按部门对子查询进行分组。然后您可以通过以下方式加入子查询：

*   部门 ID 相等（equijoin），*并且*
*   员工工资大于部门平均工资（非等值）

这是查询...

```
SELECT emp.ename, dept.dname, emp.salary, DeptAvg.AvgSal
FROM emp
INNER JOIN works ON emp.eid = works.eid
INNER JOIN dept ON works.did = dept.did
INNER JOIN (
    SELECT works.did, AVG(emp.salary) AS AvgSal
    FROM emp
    INNER JOIN works ON emp.eid = works.eid
    GROUP BY works.did) DeptAvg
  ON DeptAvg.did = works.did AND emp.salary > DeptAvg.AvgSal 
```

该查询显示员工姓名、部门名称、员工工资和部门平均工资。我这样做是为了让您可以查看数字并进行测试。您可以删除任何列，查询应该仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-03T15:50:30.270

```
SELECT emp.ename,dept.dname,emp.salary,avg(emp.salary) as DeptAvgSalary
FROM emp 
INNER JOIN works ON emp.eid = works.eid
INNER JOIN dept ON works.did = dept.did
group by dept.did 
having emp.salary>DeptAvgSalary 
```

# string - 比较 Excel 中的两个范围

> ID：15696285
> 
> 赞同：1
> 
> 时间：2013-03-29T02:06:56.897
> 
> 标签：string, excel, range

我在 Excel 中创建一个我认为是数组的函数时遇到问题。我对数组没有太多经验，并且尝试过 Google，但没有找到适用于我的情况的示例。

问题：

第 1 行（到 1000 行）包含一个用户，其直接领导层向上增加了 6 个用户。这些都是文本值。特定行的所有领导者都是唯一的。

我有一个单独的列（M 列），它是我要与每一行进行比较的用户列表。我想将列 M 与第 1 行用户进行比较，如果匹配，则返回匹配的名称。

例子

```
row 1 | user1 | John  | Rick | Mary | Paul | Jim | {matched leader goes here - Mary}

row 2 | user2 | Rick  | Mary | Paul | Jim  | Ann | {matched leader goes here - Mary}

row 3 | user3 | Terry | John | Rick | Mary | Paul | {matched leader goes here - Mary}

row 4 | user3 | Sylvia | Steve | Tom | Eric | Lorriaine| {matched leader goes here - Lorraine} 
```

M 列（副总裁列表）

```
 - Mary
 - Ken
 - Lorraine 
```

我试过 VLOOKUP，但我的 lookup_value 是范围（M 列），我不知道如何管理它。我开始了嵌套 IF，但我必须管理有一种更直接的方法来做到这一点。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:13:54.177

这有点罗嗦，但应该做的工作。

单元格 G1 的公式（可以复制到 G2..G1000 中）

```
=IF(ISNA(VLOOKUP(A1,$M:$M,1,0)),"",VLOOKUP(A1,$M:$M,1,0))
&IF(ISNA(VLOOKUP(B1,$M:$M,1,0)),"",VLOOKUP(B1,$M:$M,1,0))
&IF(ISNA(VLOOKUP(C1,$M:$M,1,0)),"",VLOOKUP(C1,$M:$M,1,0))
&IF(ISNA(VLOOKUP(D1,$M:$M,1,0)),"",VLOOKUP(D1,$M:$M,1,0))
&IF(ISNA(VLOOKUP(E1,$M:$M,1,0)),"",VLOOKUP(E1,$M:$M,1,0))
&IF(ISNA(VLOOKUP(F1,$M:$M,1,0)),"",VLOOKUP(F1,$M:$M,1,0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:03:29.580

您的数据结构使任何数据处理变得困难。我推荐以下内容：

```
ROW NO.| USER  | PERSON | LEADER?
row 1  | user1 | John   | 0
row 2  | user1 | Rick   | 0
row 3  | user1 | Mary   | 1
row 4  | user2 | Rick   | 0
row 5  | user2 | Mary   | 1 
```

1.  您可以轻松地将原始数据结构（7 列）转换为上述数据结构（2 列 - 用户、人员）
2.  您可以添加第三列，指示该人是否是领导者 (Mary => 1)
3.  最后很容易找到领导者

请注意，使用此数据结构，所有公式都将简单明了。您也可以轻松创建不同类型的报告。

I understand that visually the 7-column structure looks more appealing, however it is a trade-off for the data processing ability. Thus I suggest you convert the 7-column structure to a 2-column one with simple formula first. In this way you can benefit from both structures.

# installation - 如何让我的 JAVA 安装文件与它一起安装 JVM？

> ID：15696287
> 
> 赞同：0
> 
> 时间：2013-03-29T02:07:16.180
> 
> 标签：installation, jvm, windows-installer

是否有为我的 JAVA 应用程序创建安装程序的解决方案，如果需要，它还会安装 JVM？

我问这个，因为我不希望用户尝试安装我的应用程序，并得到“你没有 JVM”风格的消息。他们将不知道该做什么或如何处理它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:18:37.930

Wix 是否适合您，它允许您创建 MSI 并设置依赖项？

[在这里](http://wix.sourceforge.net/)检查

# php - 使用 Zend Framework 1 重定向后的新会话 ID

> ID：15696288
> 
> 赞同：0
> 
> 时间：2013-03-29T02:07:26.560
> 
> 标签：php, zend-framework, session, sessionid, zend-session

我很难解决 Zend Framework 1 应用程序的问题。这是一个自定义的网上商店应用程序，客户端从结帐页面被重定向到支付网关提供商。所以它看起来像这样：

1.  当客户在后台在我们的结帐页面上选择一种付款方式时，我的应用程序和支付提供商之间正在进行交易握手。

2.  然后，支付提供商将客户重定向到的支付 URL 发回给我。

3.  客户付款，付款提供商将客户重定向回我们的网上商店，并获得成功的 url。

在大多数情况下，这工作得很好，但在某些情况下，客户端在被重定向到我们的成功页面后会获得一个新的会话 ID。这是一个问题，因为此时正在使用会话数据来完成订单。

在本地，我只能在大约 50 次尝试中重现这个问题。因此，它是“有时有效，有时无效”的情况之一，或者换句话说，是调试和修复的痛苦之一*。*

我尝试使用我的 application.ini 中的会话设置以及我的 Bootstrap 中的 _initSession，但实际上在进行了这些更改之后，我设法重现了该问题（那一次）。

原始的 application.ini 和 Bootstrap.php（仅相关部分）如下所示：

应用程序.ini：

```
 resources.session.save_path = APPLICATION_PATH "/../data/sessions"
  resources.session.gc_maxlifetime = 2592000
  resources.session.remember_me_seconds = 2592000 
```

引导程序.php：

```
 protected function _initSession()
  {
     // set up the session as per the config.
     $options = $this->getOptions();

     $sessionOptions = $options['resources']['session'];

     Zend_Session::setOptions($sessionOptions);
     Zend_Session::start();
  } 
```

请注意，在所有其他情况/用例中，会话在整个站点中都可以正常工作。只有在重定向之后，某些客户端才会出错。我让应用程序记录了额外的信息，并且在这些情况下我实际上可以看到会话 ID 的变化。

这可能与较长的会话生命周期（1 个月）有关吗？还是我必须调用 Zend_Session::rememberMe(...); 在引导程序中的 Zend_Session::start() 之后？或任何其他想法、提示和建议？

编辑：我尝试过的其他会话选项如下：

```
resources.session.name = myuniquesessionname
resources.session.use_cookies = on
resources.session.use_only_cookies = on
resources.session.save_path = APPLICATION_PATH "/../data/sessions" 
resources.session.gc_maxlifetime = 2592000
resources.session.remember_me_seconds = 2592000
resources.session.strict = on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:13:27.677

我与这个问题进行了斗争，发现我正在处理两个不同的域。我的一些用户从*mydomain.com*开始，然后在与支付提供商合作完成后，他们被重定向回*www.mydomain.com*。这将导致一个全新的会话。

可能这是你的问题？

如果是这样，我会在引导过程的早期坚持这样的事情，可能就在你的 index.php 文件的顶部：

```
if($_SERVER['SERVER_NAME'] != 'www.mydomain.com') {
   Header("Location: http://www.mydomain.com" . $_SERVER['REQUEST_URI']);
   exit;
} 
```

这可以确保用户正在使用您希望他们使用的域。重定向将保留完整的 url，以及任何 GET 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:26:14.513

对我有用的是：问题确实是会话 cookie 的域。在我的 application.ini 中，我添加了：

resources.session.cookie_domain = .mydomainname.com 其中显然 mydomainname.com 是网店的域名。

现在，在我的开发人员 Firefox 中清除我的 cookie 之后，一切正常。我不使用 www 登录该站点。前缀和之后，如果我使用包括 www 的 URL 访问该站点。前缀我仍在使用相同的会话。

我清除了服务器端的所有会话。但是，在我没有清除 cookie 的其他非开发人员浏览器中，由于现有的 cookie 与特定域名相关联，我仍然遇到会话 id 被重复使用的问题。因此，例如，在我的 Safari 中，每当我浏览到两个不同的 URL 并且每次使用相同的会话 ID 时，我都会得到两个会话。为了解决这个问题，我只是在 application.ini 中添加了会话的名称：

resources.session.name = NEWSESSID

因此，浏览器被迫使用新名称而不是默认的 PHPSESSID 创建一个新的 cookie。

看起来现在一切都恢复正常了。非常感谢您的帮助，非常感谢！

# python - django 获取相关对象

> ID：15696289
> 
> 赞同：0
> 
> 时间：2013-03-29T02:07:50.453
> 
> 标签：python, django

我有一个模型，其中包括：

```
class Campaign(models.Model):
    campaign_name       = models.CharField(max_length=120) 
.
.
.

class Character(models.Model):
    name            = models.TextField(max_length=50)
.
.
.
    def __unicode__(self):
        return u'%s' % (self.name)

class Rank(models.Model):
    campaign_id     = models.ForeignKey('Campaign')
    character_id    = models.ManyToManyField(Character)
    rank           = models.IntegerField(blank=True)
.
.
. 
```

在显示活动所有详细信息的模板中，我还想包含该特定活动的角色及其排名，我尝试了 GenericRelation 路线和反向遍历，但没有成功。我在 django 1.5.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T02:16:06.823

由此看来，角色与战役没有直接关系，而只是通过他们的排名。正确的？

在这种情况下，给定活动`campaign`，则与活动相关的所有排名都是（您可以通过在排名的 ForeignKey 上`campaign.rank_set`指定活动来更改名称）。`related_name`

对于您这样获取的每个排名，假设您循环遍历集合并调用单个排名`rank`，您可以找到字符集`rank.character_id`并循环遍历它们，就像您使用排名一样。

如果您有角色对象并想查找与其关联的所有等级，那么您可以执行`character.rank_set`.

`rank`您可能应该重新考虑您的命名法，但如果不了解更多关于 a的确切含义以及它与其他模型相关的原因，我无法建议您如何做到这一点。

另外，请记住，就像现在一样，一个角色可以有多个等级。如果您希望字符只有一个等级，那么您需要从等级中删除 ManyToMany 字段，而是放置一个 ForeignKey 字段来对字符进行排名。

```
{% for rank in campaign.rank_set %}
  <p>Characters for {{ rank }}:</p>
  <ul>
    {% for character in rank.character_id %}
      <li>{{ character }}</li>
    {% endfor %}
  </ul>
{% endfor %} 
```

# javascript - 为什么引用对 getElementById 很重要？

> ID：15696292
> 
> 赞同：-2
> 
> 时间：2013-03-29T02:08:01.463
> 
> 标签：javascript, html, dom

我在 html 页面中有一个这样的 dom 对象：

```
<textarea id="owctl7fzk">​foo</textarea> 
```

当我尝试在`getElementById`不引用 id 的情况下访问它时，它会返回`null`.

```
window.document.getElementById(owctl7fzk) 
```

但是当我将 id 放在单引号或双引号内时，它会选择对象：

```
window.document.getElementById('owctl7fzk')
window.document.getElementById("owctl7fzk") 
```

为什么在这种情况下报价很重要？一般来说，什么时候可以省略，什么时候不能？

**编辑**在我上面提供的代码中，id 是一个十六进制数。我以前有一个没有引号的十进制数字作为 id，它没有问题。那是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T02:10:16.660

`getElementById(owctl7fzk)`选择其`id`属性等于`owctl7fzk` **变量**值的元素：

```
var owctl7fzk = "the_id";
var element = document.getElementById(owctl7fzk); 
```

`owctl7fzk`肯定和 不一样`"owctl7fzk"`，因为前者是变量名，而后者是字符串。

这就是 JavaScript 的工作原理。仅仅因为你可以在 HTML 中省略引号并不意味着你可以在 JavaScript 中做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T02:10:08.480

这是因为当 ID 在引号内时，它是一个用于标识 ID 属性的字符串，否则它是作为变量引用。如果您正在执行`window.document.getElementById(owctl7fzk)`，则 javascript 正在搜索名为`owctl7fzk`. 如果你用过`var owctl7fzk = 'owctl7fzk'`，它会工作的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T02:11:53.683

它应该用引号引起来，因为您将字符串参数传递给 getElementById 方法。字符串需要用引号引起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T02:16:13.987

在 javascript 中，与大多数语言一样，解析器将带引号的值理解为“字符串”，将不带引号的值理解为标识符（这过于简单化了，实际上，它是[lexer](https://en.wikipedia.org/wiki/Lexical_analysis)，而不是解析器）。

具体到您的问题，元素的 id 是一个字符串，因此必须在您的源中表示为字符串。您可以使用变量（在代码中由您选择的标识符表示）来保存此字符串或保存元素本身：

```
var my_id = "owctl7fzk";
var elem = document.getElementById(my_id);
alert( my_id + " is the same as " + elem.id ); 
```

# node.js - Node.js 写入失败：标准输出后管道损坏

> ID：15696295
> 
> 赞同：1
> 
> 时间：2013-03-29T02:08:18.090
> 
> 标签：node.js, ssh, broken-pipe

每当我运行我的 node.js 服务器时，我只有一次机会测试我的代码。然后在我写失败后：管道损坏这真的很烦人，因为我必须重新登录并再次运行服务器..

我现在不关心永远的节点，因为我想观察控制台的输出或任何错误。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T12:42:48.317

您可以编辑您的 ssh 配置文件..

对于 Linux：/etc/ssh/ssh_config 对于 MacOSx：~/.ssh/config 对于 Mac：

前缀：

ClientAliveInterval 120 ServerAliveInterval 120

# html - 关于缩略图的简单 HTML/CSS

> ID：15696299
> 
> 赞同：1
> 
> 时间：2013-03-29T02:08:38.270
> 
> 标签：html, css

我是网络建设的新手。目前正在关注制作图片库的教程。 [http://www.webreference.com/programming/css_gallery/index.html](http://www.webreference.com/programming/css_gallery/index.html)

除了缩略图部分之外，这一切都正常（足以让我根据自己的喜好修复问题）。下面是我认为与我寻求的帮助相关的缩略图的 html 和 css 片段。基本上，当您将鼠标悬停在缩略图上时，主图像将出现在上面页面的空闲空间中。那种作品（图像没有出现在正确的位置，但我可以解决这个问题）但缩略图没有显示我的图像。

我将容器 div 更改为“gallery”，因为我的 html 中已经有一个容器，并且不希望它受到教程之后的新 css 的影响......

html:

```
 <li> 
      <a class="gallery slidea" href="#nogo"> 
        <span> 
          <img src="images/Picture 014.jpg" alt="Wedding" title="Wedding" /> 
          <br /> 
          Wedding
      <br /> 
        Outside area wedding
        </span> 
      </a> 
    </li> 
```

CSS：

```
#gallery a.slidea {
background:url(images/Picture 014 thumb.jpg);
height:38px;
width:50px;
} 
```

同样对于我的 CSS，W3C 验证器说“#gallery a.slidea”值错误：背景解析错误 thumb.jpg），我不明白。

希望得到一些帮助：D

干杯

PS 我正在考虑把这个网站放到 wordpress 上（这是一个教程，我稍后会跟进，希望能取得更大的成功）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:13:30.043

对类的调用与类的名称不匹配

```
 <a class="gallery slidea" href="#nogo"> 
```

正在打电话

```
 #gallery a.slidea { 
```

尝试使它们具有相同的名称，例如

```
 <a class="gallery_slide" href="#nogo"> 

 #gallery_slide a { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:22:39.097

你的错误在这里：

```
background:url(images/Picture 014 thumb.jpg); 
```

那个空间把它扔掉了。将网址放在引号中：

```
background:url('images/Picture 014 thumb.jpg'); 
```

另一个问题出在您的 HTML 中。

你的 CSS 说`#gallery a.slidea`

这将指向在 ID 为“gallery”的元素中与“slidea”类的所有链接。您的 HTML 表明该链接属于“gallery”和“slidea”类。正确的方法将取决于您的目标。

# php - 如何在不使用 eval php 的情况下制作基于数据库的模板引擎

> ID：15696302
> 
> 赞同：-2
> 
> 时间：2013-03-29T02:08:59.347
> 
> 标签：php, mysql, eval, template-engine

我正在创建一个 CMS 我想将我的模板保存在数据库中

用于轻松添加、编辑和删除模板

但是我的模板包含一个 PHP 代码，所以我的问题是如何支持包含 php 代码的模板，而不使用像 expressionEngine 这样的 eval 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:13:47.483

[您可以使用Twig](http://twig.sensiolabs.org/)之类的东西，它是一个支持[沙盒](http://twig.sensiolabs.org/doc/api.html#sandbox-extension)的完整模板引擎，您可以使用它来限制用户创建的模板。

# objective-c - 每天在特定时间运行方法

> ID：15696310
> 
> 赞同：0
> 
> 时间：2013-03-29T02:10:05.767
> 
> 标签：objective-c, macos, launchd

我正在编写一个菜单栏应用程序，我需要每天在某个特定时间运行一个方法。即使用户未登录，我也希望它能够运行。我知道我需要创建一个帮助工具，将其注册到 launchd。有这方面的好教程吗？我对编程并不陌生，但我不熟悉使用辅助工具并已启动。我一直在阅读并遇到 SMJob，我知道我可以使用它来创建帮助工具，而不是如何使用它。我只需要一些指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:31:24.753

查看[Daemons and Services Programming Guide](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/Introduction.html)
解决方案是创建一些命令行实用程序，在 /Library/LaunchDaemons 目录中创建 launchd plist 文件（注意它必须由 root:wheel 拥有并具有 0644 模式）并通过加载作业命令`sudo launchctl load -w /Library/LaunchDaemons/your.plist`（标志 -w 强制您的作业在每次启动时启动）。
为了定期运行您的作业，请在您的 plist 中设置 StartInterval 或 StartCalendarInterval 键（请参阅示例指南中的“创建启动守护程序和代理”->“创建启动属性列表文件”->“定期运行作业”）

# javascript - 漂亮的打印在 twitter bootstrap 中不起作用

> ID：15696318
> 
> 赞同：4
> 
> 时间：2013-03-29T02:10:30.677
> 
> 标签：javascript, css, twitter-bootstrap, pretty-print

我正在寻找如何完成这项工作，而我想出的是[这个问题和答案](https://stackoverflow.com/a/10862092/1270259)。

所以我包含了 css 和 js，并将`onload`body 标记作为答案状态，然后我创建了 pre tage，最后创建了这个：

```
<pre class="prettyprint linenums languague-css">        
    function(){
        echo "test"
    }
</pre> 
```

所以然后我去浏览器查看我的输出，它部分工作。

[![输出图](../Images/200a700067d1dd312f4dc12dd90810e6.png)](https://i.stack.imgur.com/54vwz.png)

没有控制台错误，css 和 js 脚本都已**正确**加载**，**也就是说我可以进入源代码，单击链接并且**不会**收到“我找不到你”错误。

所以有了这些信息...

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:35:35.423

当您包含 prettify 样式表但忘记包含 prettify Javascript 代码时，会发生这种情况。或者，如果 Javascript 代码没有运行。

尝试在准备好的文档中运行美化代码，而不是 onload：

```
! function ($) {
    $(function () {
        window.prettyPrint && prettyPrint()
    })
}(window.jQuery) 
```

这对我有用，[请参见此处](http://jsfiddle.net/serra/tyRkZ/4/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:39:18.213

这是一个导致 javascript 无法工作的缓存问题。

# xslt - 添加父元素并重命名子元素

> ID：15696320
> 
> 赞同：2
> 
> 时间：2013-03-29T02:11:08.210
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我正在尝试在导入和导出下循环子元素。创建一个父元素字段并将名称为字段的所有元素放入其中，只是在导入下，不包括结构下的元素字段，在所有元素结构上创建元素结构，最后的工作是将所有元素重命名为该值的属性名称。我只知道先复制所有这些，无法进入下一步创建正确的模板。

输入：

```
<?xml version='1.0'?>
<jco name="TEST" timestamp="1275691115508" version="1.0">
<import>
    <field name="RESERVED_IN">12345</field>
    <structure name="GM_HEADER">
                <field name="PSTNG_DATE">2004-07-02</field>
        <field name="DOC_DATE">2004-04-02</field>
    </structure>
    <structure name="TESTRUN">
        <field name="TESTRUN"></field>
    </structure>
</import>
<export>
    <field name="RESERVED_OUT"></field>
    <structure name="GM_HEADER_RET">
        <field name="MAT_DOC"></field>
        <field name="DOC_YEAR">0000</field>
    </structure>
</export>
</jco> 
```

所需的输出：

```
<?xml version="1.0" ?>
<jco version="1.0" name="TEST">
    <import>
        <fields>
            <RESERVED_IN>12345</RESERVED_IN>
        </fields>
        <structures>
            <GM_HEADER>
                <PSTNG_DATE>2004-07-02</PSTNG_DATE>
                <DOC_DATE>2004-04-02</DOC_DATE>
            </GM_HEADER>
            <TESTRUN>
                <TESTRUN></TESTRUN>
            </TESTRUN>
        </structures>
   </import>
   <export>
       <fields>
           <RESERVED_OUT></RESERVED_OUT>
       </fields>
       <structures>
           <GM_HEADER_RET>
               <MAT_DOC></MAT_DOC>
               <DOC_YEAR>0000</DOC_YEAR>
           </GM_HEADER_RET>
       </structures>
   </export>
</jco> 
```

下面是我的 xslt，但它似乎搞砸了。

```
 <xsl:template match="node()|@*">
            <xsl:copy>
                <xsl:apply-templates select="node()|@*" />
            </xsl:copy>
        </xsl:template>

        <xsl:template match="import">
            <fields>
                <xsl:for-each select="/field">
                    <xsl:call-template name="field" />
                </xsl:for-each>
            </fields>
            <structures>
                <xsl:for-each select="/structure">
                    <xsl:element name="{@name}">
                        <xsl:value-of select="." />
                    </xsl:element>
                    <xsl:call-template name="field" />
                </xsl:for-each>
            </structures>
        </xsl:template>

        <xsl:template name="field">
            <xsl:for-each select="/field">
                    <xsl:element name="{@name}">
                        <xsl:value-of select="." />
                    </xsl:element>
                </xsl:for-each>
        </xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:19:46.173

使用模板 and `apply-templates`， not `for-each`，它的效果相当优雅：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    exclude-result-prefixes="xs">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="import | export">
  <xsl:copy>
    <fields>
      <xsl:apply-templates select="field"/>
    </fields>
    <structures>
      <xsl:apply-templates select="structure"/>
    </structures>
  </xsl:copy>
</xsl:template>

<xsl:template match="field | structure">
  <xsl:element name="{@name}">
    <xsl:apply-templates/>
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

# iphone - iOS 代码签名身份

> ID：15696322
> 
> 赞同：4
> 
> 时间：2013-03-29T02:11:35.137
> 
> 标签：iphone, ios, xcode, ipad, provisioning-profile

我的 Xcode 4.6 iOS 项目有“PROJECT”和“TARGETS”部分，每个部分在“代码签名标识”下都有一个“调试”和“发布”区域，并带有一个“任何 iOS SDK”条目。

1.  目前，我在 PROJECT 和 TARGET 下的所有四个插槽中指定了我的 Developer 或 Distribution 配置文件。我相信每个配置文件实际上只需要放在一个位置。
2.  每当我因为即将过期而更新配置文件、添加额外的开发设备或添加额外的 AdHoc 测试设备时，总是很痛苦。Xcode 从不允许我简单地选择“iPhone Developer”。我总是必须按名称导航到正确的配置文件。此外，我必须在导入新的配置文件之前删除旧的配置文件，否则旧的将继续使用。

这一切看起来像这样：

```
PROJECT
    myProject
        Code Signing
            Code Signing Identity
                Debug               iPhone Developer
                    Any iOS SDK     iPhone Developer
                Release             iPhone Distribution
                    Any iOS SDK     iPhone Distribution
TARGET
    myTarget
        Code Signing
                Debug               iPhone Developer
                    Any iOS SDK     iPhone Developer
                Release             iPhone Distribution
                    Any iOS SDK     iPhone Distribution 
```

所以，这是我总结的问题：

1.  我应该在哪一行指定配置文件？
2.  将更新的配置文件导入 Xcode 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T02:25:36.543

```
1\. On which line should I specify the provisioning profile? 
```

`PROJECT`首先，您没有义务在该部分中设置配置文件。我总是将它们设置在`TARGET`部分中。现在，如果您正在开发，您应该设置：

```
Any iOS SDK     iPhone Developer 
```

下`Debug`。如果你正在准备 Adhoc，你需要设置：

```
Any iOS SDK     iPhone Distribution 
```

下`Release`。

```
2 .What is the best way to import an updated provisioning profile into Xcode? 
```

转到`Organizer`，单击`Devices`选项卡，然后单击`New`底部的按钮，系统将提示您登录您的 Apple 帐户。然后我认为配置文件将被导入，单击`Refresh`按钮查看添加的配置文件。

# css - css最小宽度问题

> ID：15696326
> 
> 赞同：0
> 
> 时间：2013-03-29T02:11:59.937
> 
> 标签：css

```
.mainCoverWrapper {
    position: relative; 
    min-width:312px; 
    background:red
} 
```

我正在尝试使 a 居中`div`并使其根据其动态内容扩展，同时保持居中`min-width`。`312px`现在`min-with`根本不起作用，因为它需要一个浮动。我不能使用浮点数，因为我需要将 div 放在页面中心。

换句话说，`div`从宽度为的自动边距开始，`312px`并在居中时随其添加的内容扩展。这可能吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:25:02.007

如果您希望宽度是流动的，最好的办法是设置`display: inline-block;`在要居中的元素和`text-align: center;`父元素上。

请参阅：[CSS 中心显示内联块？](https://stackoverflow.com/questions/4980525/css-center-display-inline-block)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:48:07.353

[http://jsfiddle.net/FVmvA/](http://jsfiddle.net/FVmvA/)

这是一个父级跟随子级宽度的工作示例，子级将根据其中给出的文本展开。

```
.myCoverWrapper {
    border: 1px solid Peru;
    margin:auto;
    min-width: 200px;
    max-width: 100%;
    display: inline-block;
    background: red;
}

.test {
    height: 100px;
    margin: 10px;
    background: cyan;
} 
```

这使得父 div 跟随孩子的宽度。

但是，这将不允许您将其“居中”。你不可能两者兼得。这是因为您无法在不知道元素宽度的情况下将图像居中。

解决方案是使用 jQuery，在必要时添加 CSS。

[这是](http://jsfiddle.net/FVmvA/1/)一个例子。有一些错误，但是，你有一个大致的想法。

# javascript - 如何获得具有相同类的多个元素？

> ID：15696327
> 
> 赞同：0
> 
> 时间：2013-03-29T02:12:11.497
> 
> 标签：javascript, jquery

我有一些我想用 jquery 处理的 HTML。

很简单，但我无法绕过同一类的所有元素：

```
<div class="myclass on"></div>
<div class="myclass off"></div>
<div class="myclass on"></div> 
```

如果我这样做

> $(".myclass")

我只得到一个。有什么帮助吗？

## 编辑

我实际上只希望“myclass on”在每个中嵌套一些 html 来获得这个：

```
<div class="myclass on"><img src="bar.png"></div>
<div class="myclass off"></div>
<div class="myclass on"><img src="bar.png"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:21:05.407

也许您只是没有在选择器中正确组合两个类？因为这有效：

```
$(".myclass.on").html('<img src="bar.png">'); 
```

[http://jsfiddle.net/zjErL/1/](http://jsfiddle.net/zjErL/1/)（感谢 Arun 最初的 jsfiddle）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T02:14:56.990

尝试使用分别操作每个元素。对于选择器来说，仅 .on 类就足够了。

```
 $('.on').each(function(index){
    $(this).html('<img src="bar.png">');
  }); 
```

文档 [http://api.jquery.com/each/](http://api.jquery.com/each/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T02:17:35.340

可能是你做错了什么。如果你已经完成了 $('.myclass') 它必须工作。你可以发布你的代码。

这对我来说就像一个魅力。

```
$(function(){
    $('.myclass').SOMEEVENT(function(e){ // or use div.myclass without problem 
        // do something. It must work.
    });
}); 
```

或者，如果您想遍历每个元素，您可以使用`.each`

```
$(function(){
    $.each($('.myclass'),function(ind, val){
        // do something.
    });
}); 
```

或者，如果您想使用其他类，如 .on 或 .off

```
$(function(){
    $.each($('.myclass.on'),function(ind, val){
        // do something.
    });
}); 
```

**编辑：**
要将图像添加到`myclass on`，您可以简单地执行此操作

```
$(function(){
    $('.myclass.on').html('Your NEW Adding Tag here');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T02:33:32.740

$(".myclass.on").css('color', 'red');

应该选择具有两个类的元素。

# amazon-web-services - AWS - 将 EC2 扩展到更大的类型（示例：微型 -> 大）

> ID：15696329
> 
> 赞同：2
> 
> 时间：2013-03-29T02:12:29.713
> 
> 标签：amazon-web-services, amazon-ec2

因此，我将移动应用程序从共享服务器转移到 Amazon Web Services 的全部目的是希望我可以从最小的存储空间和 cpu 使用量开始，并根据需要进行扩展，而无需任何应用程序停机。换句话说，在我的应用程序中，我所做的只是调用一些 php 脚本，然后将数据存储到 MySql 数据库并将一些数据文件上传/保存到磁盘。是否可以扩展而不必创建具有更多 CPU / 存储 / Ram 功能的全新实例，然后必须将我所有的 php 脚本迁移到新实例？我是 AWS 的新手，所以我希望学习。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T02:15:08.473

停止正在运行的实例并更改实例类型并重新启动它。

**更新**：

这是有关如何升级实例的屏幕截图：

![右键单击您的实例并选择 <code>Change Instance Type</code>](../Images/dedb289831f4deab97a2d5da8635257a.png)

![选择您的新实例类型](../Images/33561583332128852280da6354370919.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T02:20:51.987

您可以创建当前实例的映像，称为 AMI（需要重新启动实例）。然后，您可以使用该 AMI 创建任意大小的新实例（因此您无需迁移任何内容）。

您可以通过同时运行新实例和原始实例、切换弹性 IP（如果有）并使原始服务器离线来消除停机时间。

当您的计算机从 AMI 创建重新启动时，唯一的停机时间将是一分钟或两分钟。

文档：[http ://docs.aws.amazon.com/AWSEC2/latest/UserGuide/creating-an-ami-ebs.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/creating-an-ami-ebs.html)

注意：这一切都假设您的数据库位于您的 EC2 实例上未安装的其他位置（例如在 RDS 实例中）。如果是（或者您在网络服务器上保存文件和其他状态信息），那么我建议遵循 Mar Cejas 的建议，然后关闭服务器并以不同的大小重新启动它。

# visual-c++ - c++ 中的 yaml.cpp 库有问题

> ID：15696333
> 
> 赞同：1
> 
> 时间：2013-03-29T02:13:26.393
> 
> 标签：visual-c++, linker, yaml-cpp

我很难在我的项目中使用 yaml-cpp 0.3.0 我下载了 yaml，并像[http://code.google.com/p/yaml-cpp/](http://code.google.com/p/yaml-cpp/)所说的那样使用 VS 9 2008 WIN 64构建它. 所以，我得到了 yaml-cpp.dll 和 yaml-cpp.lib 我在 VS 2010 express 上有一个 c++ 项目，我正在尝试链接库：我去项目属性 - c/c++ 通用和附加包括具有 yaml-cpp 头文件的目录。然后我去链接器并添加我的lib目录的路径，然后我去链接器 - 输入并添加我的.lib文件，然后我去VC++目录并在库目录和参考目录中添加我的lib目录的路径然后我尝试构建这个简单的代码：

```
std::ifstream fin("test.yaml");
YAML::Parser parser(fin);
YAML::Node doc;
while(parser.GetNextDocument(doc)) {
    //do nothing yet
} 
```

我遇到了几个链接问题，如下所示：

```
error LNK2019: unresolved external symbol "public: __thiscall YAML::Node::Node(void)" (??0Node@YAML@@QAE@XZ) referenced in function "public: __thiscall Parser::Parser(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (??0Parser@@QAE@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)

error LNK2019: unresolved external symbol "public: __thiscall YAML::Parser::~Parser(void)" (??1Parser@YAML@@QAE@XZ) referenced in function "public: __thiscall Parser::Parser(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (??0Parser@@QAE@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) 
```

谁能帮我？我在这里用头撞墙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:36:12.957

正如你所说，你有一个来自 YAML 的 DLL，我假设你`-DBUILD_SHARED_LIBS=ON`在使用 VS2008 构建时指定了，所以你最终得到了一个`lib`动态链接（在运行时到 DLL）而不是静态链接（在编译时）。

如果以上正确，则可能是 VS2008 和 VS2010 之间的差异导致了问题。例如，[请在此处查看此帖子](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/ac03e00d-d26a-4d92-9b9f-91ed4b20cfbe)。要快速查看这是否是原因，在您的 VS2010 项目属性中，将 设置`Platform Toolset`为`V90`并查看是否有帮助。

此外，请确保您为同一个 CPU 编译了两个项目 - 即都为 32 位或都为 64 位。

# java - 可以通过 MySQL Workbench 连接远程数据库，但不能通过 Java JBDC

> ID：15696341
> 
> 赞同：2
> 
> 时间：2013-03-29T02:13:57.280
> 
> 标签：java, android, mysql, jdbc

我有一个远程 MySQL 数据库，我可以使用 MySQL Workbench（下面的屏幕截图）连接到它，但我最终需要通过 JBDC 连接到它，每次尝试连接时，它都会引发异常。我是新手，所以任何人都可以为我提供一些可能是错误的见解吗？

```
String host = "testdb.db.10682960.hostedresource.com";
String datab = "testdb";
String url = "jdbc:mysql://" + host + ":3306/" + datab;
Class.forName("com.mysql.jdbc.Driver").newInstance(); 
Connection conn = DriverManager.getConnection(url, datab, "password"); 
```

com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException：无法创建与数据库服务器的连接。

![MySQL 工作台连接](../Images/c87a63751e8d79a47f40baf00cd38ee3.png)

编辑：不确定这是否相关，但我在 Android 上运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:48:27.190

看起来您缺少用户名。尝试将“？user=testdb”添加到您的网址末尾。

编辑：我没有意识到这是一个 Android 应用程序。从技术上讲，这应该是可能的，但不建议这样做。您的网络连接的可靠性会低得多，并且您会将服务器凭据推送到您的客户端。使用 REST API 从您的 Android 通信到与数据库位于同一数据中心的 Web 服务器是一个更安全的选择。

我没有从 Android 尝试此操作的经验......所以我不知道如果您无法从 Android 连接到网络的端口 3306 会引发什么异常。但是，即使您可以使用它，也请考虑改用 Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T21:56:07.617

根据 jTDS FAQ ( [http://jtds.sourceforge.net/faq.html](http://jtds.sourceforge.net/faq.html) ) JDBC URL 的格式是：

```
jdbc:jtds:<server_type>://<server>[:<port>][/<database>][;<property>=<value>[;...]] 
```

如果我是你，我会替换“？” 用';' 遵守上述格式。“查询字符串”与“普通”URL 不同。

当然，这假设您使用的是通过上面的链接找到的开源 JDBC 连接器。

# android - R.java 不会在新项目中生成

> ID：15696347
> 
> 赞同：0
> 
> 时间：2013-03-29T02:14:31.890
> 
> 标签：android

我决定在 Linux 上创建全新的 Android 项目，但 R.java 甚至不会生成，或者生成并立即删除，如果我在 /gen 中放置新的空 R.java 在清理后将其删除。

PLS帮助我现在破产了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:27:10.480

它不是 R.class 它的 R.java 。关闭你的 Eclipse 并重新启动

然后尝试清理并再次构建您的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:28:48.393

清理/构建或运行您的应用程序。因此它可能会如此 Eclipse。如果您从 Internet 下载项目，这可能是由于任何资源中的错误或您的清单与您在布局或类中使用的小部件之间不兼容造成的.

# django - django 自定义命令抱怨 AssertionError: ForeignKey(None) is invalid。为什么

> ID：15696348
> 
> 赞同：1
> 
> 时间：2013-03-29T02:14:34.963
> 
> 标签：django

我已经关注了 django 自定义命令教程，链接在[这里](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)。

我的工作目录如下所示：

```
myapps/
    __init__.py
    models.py
    management/  
        __init__.py
        commands/
            __init__.py
            my_command.py
    tests.py
    views.py 
```

我的代码如下所示：

```
from django.core.management.base import BaseCommand, CommandError

class Command(BaseCommand):

    def handle(self, *args, **options):
        print '=========='
        self.stdout.write('Successfully closed poll ttt') 
```

当我运行命令 manage.py my_command 时，出现以下错误，

```
 File "D:/ERP\apps\person\salary\models.py", line 8, in <module>
    class Salarys(models.Model):
  File "D:/ERP\apps\person\salary\models.py", line 14, in Salarys
    Unit = models.ForeignKey(Units, verbose_name = u'def_unit, on_delete = models.PROTECT) 
  File "D:\Python27\Lib\site-packages\django\db\models\fields\related.py", line 910, in __init__
    assert isinstance(to, basestring), "%s(%r) is invalid. First parameter to ForeignKey must be either a model, a model name, or the string %r" % (self.__class__.__name__, to, RECURSIVE_RELATIONSHIP_CONSTANT)
AssertionError: ForeignKey(None) is invalid. First parameter to ForeignKey must be either a model, a model name, or the string 'self' 
```

显然，ForeignKey 的第一个参数是我的模型 Units，如何让编译器的抱怨静音？

ps：我的模型看起来像这样：我的模型现在看起来像这样。

```
class Salarys(models.Model):
    '''
    describe : salary table
    author : liyang 2013-1-23
    '''
    User = models.ForeignKey(Users, verbose_name = u'account', on_delete = models.PROTECT) 
    Unit = models.ForeignKey(Units, verbose_name = u'def_unit', on_delete = models.PROTECT, null=True) 
    yy = models.IntegerField(u'year)
    mm = models.IntegerField(u'month')
    class Meta:
        db_table = 'users_salarys'

class Units(models.Model):
    '''
    describe : def unit model
    author : liyang 2012-12-4 11:45
    '''
    name = models.CharField(u'name',max_length = 20) 
    cname = models.CharField(u'company name',max_length = 20, blank = True, null = True) 
    aname = models.CharField(u'company short cut',max_length = 20, blank = True, null = True)         
    telephone = models.CharField(u'contact',max_length = 20, blank = True, null = True)         
    website = models.CharField(u'website',max_length = 25, blank = True, null = True)         
    address = models.CharField(u'address',max_length = 50, blank = True, null = True)         
    class Meta:
        db_table = 'units' 
```

……

奇怪的是

1：用户外键没有任何麻烦，而单元...

2：我的web服务器可以正常运行而命令行不能运行...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:12:31.280

您的课程`Units`应该在您的课程之前`Salarys`：

```
class Units(models.Model):
    ...

class Salarys(models.Model):
    user = models.ForeignKey(Users, verbose_name = u'account', on_delete = models.PROTECT) 
    unit = models.ForeignKey(Units, verbose_name = u'def_unit', on_delete = models.PROTECT, null=True) 
```

还有一个建议：以单数形式命名您的模型是一种最佳实践。Django 会自动“复数”它们。如果 Django 无法正确地复数类名，您可以通过将以下内容添加到模型 Meta 中来指定您自己的复数：

```
class Meta:
    verbose_name_plural = "salaries" 
```

# jquery - 获取鼠标悬停的元素的属性

> ID：15696349
> 
> 赞同：1
> 
> 时间：2013-03-29T02:14:36.227
> 
> 标签：jquery, hover, selection, mouseover, attr

我正在尝试为我的网站制作一个图例系统.. 这是一项简单的任务...当鼠标悬停在元素上时，jquery 获取`value`属性并将此值添加到`div`下面...

我不知道如何获取属性，因为选择返回3个元素......这是代码......

```
$(function(){
$('#legends .item')
    .mouseover(function(){
            $('#legend-tags').html($('#tag-video').attr("value")).fadeIn();
        })
    .mouseout(function(){   
            $('#legend-tags').fadeOut();
        });
}); 
```

此选择返回 3 个元素，我想获取当前鼠标悬停的元素的属性。在这个测试代码中，我得到了 的属性`#tag-video`，它是元素之一。

这是HTML：

```
<div id="legends">
  <span>TAGS</span>
  <div id="tag-motion" class="item tag-motion" value="motion"></div>
  <div id="tag-design" class="item tag-design" value="design"></div>
  <div id="tag-video" class="item tag-video" value="video"></div>
  <div id="legend-tags">legend</div>                
</div> 
```

这是CSS：

```
#legends .item
{
    display: block;
    width: 27px;
    height: 27px;
    cursor: pointer;
    margin-bottom: 5px;    
}

#legend-tags
{
    display: none;
}

.tag-video
{
    background-image: url('../img/tag-video.svg');
}

.tag-video:hover
{
    background-image: url('../img/tag-video-over.svg');
}

.tag-design
{
    background-image: url('../img/tag-design.svg');
}

.tag-design:hover
{
    background-image: url('../img/tag-design-over.svg');
}

.tag-motion
{
    background-image: url('../img/tag-motion.svg');
}

.tag-motion:hover
{
    background-image: url('../img/tag-motion-over.svg');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T02:17:05.353

你需要使用

```
$('#legend-tags').html($(this).attr("value")).fadeIn(); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/LjktG/)

在您的情况下，您已经进行了硬编码`$('#tag-video')`，而不是需要获取鼠标悬停在其上的元素，该元素在悬停回调中作为`this`变量可用。

注意：您的选择器`$('#legends .iten')`中应该有一个类型`$('#legends .item')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:20:36.047

像这样的东西会起作用吗？

```
$("div.item").hover(function(){
    $('#legend-tags').html( $(this).attr("value") ).fadeIn();
}); 
```

# json - 如何将json动态对象转换为c#实体

> ID：15696357
> 
> 赞同：1
> 
> 时间：2013-03-29T02:15:19.350
> 
> 标签：json, model-view-controller, dynamic, entity, mapper

当我制作mvc ajax json post applicaiton时，将json动态对象转换为实体存在问题。

在我的应用程序中，电影是一个业务实体，json 对象比电影实体具有行状态属性。json数据发布到mvc服务器端后，可以转换为动态对象，这个阶段一切正常。但是在对每一行状态进行一些逻辑处理后，需要将动态对象转换为电影业务实体，然后开始数据库事务逻辑。但是即使我尝试不同的方法来投射对象，也有一个问题。

请问有人使用相同的演员方法吗？感谢您的建议或回复。

```
public class movie
{
    public int id
    {
        get;
        set;
    }

    public string title
    {
        get;
        set;
    }
}

    /// <summary>
    /// Convert Json Object to Entity
    /// </summary>
    /// <param name="id">ajax post value
    /// format: {"id": "{\"id\": 1, \"title\": \"sharlock\", \"RowStatus\": \"deleted\"}"}
    /// </param>
    [AllowAnonymous]
    [HttpPost]
    public void DoJsonSimple(string id)
    {
        string title;
        var entity = Newtonsoft.Json.JsonConvert.DeserializeObject<dynamic>(id);

        //*** entity is dynamic object
        //*** entity.id, entity.title and entity.RowStauts can be accessed.
        int first = entity.id;
        var status = entity.RowStatus;
        if (status == "deleted")
        {
            //*** m1 is null
            //*** m1.title can not be accessed
            movie m1 = entity as movie;
            title = m1.title;

            //*** m2 is an empty object
            //*** m2.id is 0, m2.title is null
            var m2 = AutoMapperHelper<dynamic, movie>.AutoConvertDynamic(entity);
            title = m2.title;

            //*** Exception: Object must implement IConvertible. 
            var m3 = EmitMapper.EMConvert.ChangeTypeGeneric<dynamic, movie>(entity);
            title = m3.title;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:34:10.267

只需为行创建另一个类。

```
public class Request
{
    [JsonProperty("id")]
    public string Json { get; set; }
}

public class Movie
{
    [JsonProperty("id")]
    public int Id { get; set; }

    [JsonProperty("title")]
    public string Title { get; set; }
}

// either this for variant 1...
public class Row
{
    public string RowStatus { get; set; }
}

// or that for variant 2...
public class MovieRow : Movie
{
    public string RowStatus { get; set; }
}

[AllowAnonymous]
[HttpPost]
public void DoJsonSimple_Variant1(string id)
{
    var json = JsonConvert.DeserializeObject<Request>(id).Json;
    var entity = JsonConvert.DeserializeObject<MovieRow>(json);
    var row = JsonConvert.DeserializeObject<Row>(json);

    switch (row.RowStatus)
    {
        case "deleted":
            // delete entity
            break;

        // ...
    }

    // ...
}

[AllowAnonymous]
[HttpPost]
public void DoJsonSimple_Variant2(string id)
{
    var json = JsonConvert.DeserializeObject<Request>(id).Json;
    var row = JsonConvert.DeserializeObject<MovieRow>(json);
    var entity = (Movie)row;

    switch (row.RowStatus)
    {
        case "deleted":
            // delete entity
            break;

        // ...
    }

    // ...
} 
```

# python-3.x - 使用 Bottle.py 提供嵌套的静态文件

> ID：15696358
> 
> 赞同：2
> 
> 时间：2013-03-29T02:15:26.040
> 
> 标签：python-3.x, bottle

我有以下代码。它适用于提供 index.html 或位于 home/ 目录中的任何文件，但不会提供位于嵌套目录中的任何文件，例如 home/image/xyz.png。

```
import os
import sys
import ctypes
import pprint
import bottle
import socket

from bottle import *

#global functions
def ReadStringFromFile( file ):
    f = open(file, 'r')
    data = f.read()
    f.close()
    return data

def getBits():
    #get the system bits
    sysBit = (ctypes.sizeof(ctypes.c_voidp) * 8)
    if((not(sysBit == 32)) and (not (sysBit == 64))):
        sysBit = 0
    return sysBit

class DevelServer( object ):

    addr = ''

    def __init__( self ):
        self.addr = socket.gethostbyname( socket.gethostname() )
        pass

    def index( self ):
        return ReadStringFromFile('home/index.html')

    #these are not the URLs you are looking for
    def error404( self, error):
        return '<br><br><br><center><h1>Go <a href="/">home</a>, You\'re drunk.'

    def send_static( self, filename):
        print (static_file(filename, root=os.path.join(os.getcwd(), 'home')))
        return static_file(filename, root=os.path.join(os.getcwd(), 'home'))

    #start hosting the application
    def startThis( self ):
        bottle.run(host=self.addr, port=80, debug=True)

#instatiate the main application class an initalize all of the app routes
def Main():
    ThisApp = DevelServer()

    bottle.route('/')(ThisApp.index)
    bottle.route('/home/<filename>')(ThisApp.send_static)

    bottle.error(404)(ThisApp.error404)

    ThisApp.startThis()

Main() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T23:24:05.177

更改此行：

```
bottle.route('/home/<filename>')(ThisApp.send_static) 
```

对此：

```
bottle.route('/home/<filename:path>')(ThisApp.send_static) 
```

（添加“：路径”。）

[Bottle 文档](http://bottlepy.org/docs/dev/tutorial.html#routing-static-files)解释了原因：

> static_file() 函数是一个帮助程序以安全方便的方式提供文件（请参阅静态文件）。此示例仅限于直接位于 /path/to/your/static/files 目录中的文件，因为通配符不会匹配带有斜杠的路径。**要在子目录中提供文件，请将通配符更改为使用路径过滤器**...

我用我的修改运行了你的代码，它对我有用——它也对你有用吗？

# java - 区分 Android 应用程序的调试和生产构建

> ID：15696361
> 
> 赞同：9
> 
> 时间：2013-03-29T02:15:36.123
> 
> 标签：java, android, debugging, maven

我最近开始学习 Android 应用程序开发。这也是我第一次接触 Java 语言。

我想以 Java 包依赖的形式将一些调试工具整合到我的应用程序开发中。出于显而易见的原因，我只想将它包含在调试版本中。

在 iOS 中，我们可以使用构建配置链接仅用于调试构建的调试库，并使用宏删除处理调试的部分代码。这使得在调试和生产构建之间切换变得非常容易。无论如何要为Android实现相同的目标？

到目前为止，我得到的最接近的方法是使用 Maven 配置文件来覆盖由应用程序加载的属性文件，但这需要仍然导入调试库。

* * *

为了澄清我的问题，我想做的是：我构建了一个库，可以让您在浏览器上浏览 SQLite 数据库。它对于调试目的非常有用，但我不想将我的应用程序与库一起发布。

另一个目的是使用 HockeyApp。HockeyApp 提供两个功能：更新通知和崩溃报告。我需要三个不同的版本才能工作：

*   生产：崩溃报告开启，更新通知关闭
*   Beta：两者都开启
*   调试：都关闭

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T02:37:40.310

在清单中[`<application>`](http://developer.android.com/guide/topics/manifest/application-element.html)，您可以设置`debuggable`属性。如果您省略该属性，Eclipse 会自动为您执行此操作。调试版本有`debuggable=true`，导出良好的版本有`debuggable=false`。

这会影响 Log.d，您可以使用以下有条件地签入代码：

```
boolean isDebuggable = (0 != (getApplicationInfo().flags & ApplicationInfo.FLAG_DEBUGGABLE)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T02:36:07.557

除了 Maven，一种方法是使用像[Dagger这样的依赖注入器](http://square.github.com/dagger/)

> 通过构建标准 javax.inject 注释 (JSR-330)，每个类都易于测试。您不需要一堆样板来将 RpcCreditCardService 换成 FakeCreditCardService。
> 
> 依赖注入不仅仅用于测试。它还可以轻松创建可重用、可互换的模块。您可以在所有应用程序之间共享相同的 AuthenticationModule。您可以在开发期间运行 DevLoggingModule 并在生产中运行 ProdLoggingModule 以获得在每种情况下的正确行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:11:41.160

解决此问题的一种方法是检查[PackageManager#getInstallerPackageName](http://developer.android.com/reference/android/content/pm/PackageManager.html)的返回值。如果 apk 是通过 adb、网页或 HockeyApp 等服务手动安装的，则返回 null。事实上，我最近在我们的 sdk 中添加了一个类似的检查，请参阅[这个 commit](https://github.com/bitstadium/HockeySDK-Android/commit/a18774c97af53405c48956d548aa6f26be930821)。

请注意，仅当您仅通过 Google Play 分发（付费）应用时，此解决方案才可靠。上次我检查时，Amazon App Store 或 AndroidPIT 等替代商店没有设置安装程序源（可以从 API 级别 11 开始设置它，请参阅[PackageManager#setInstallerPackageName](http://developer.android.com/reference/android/content/pm/PackageManager.html#setInstallerPackageName)）。

另一种选择是在运行时检查包名称。对于您的 beta 版本，您将在包名称后附加“.beta”，然后检查此后缀以启用应用内更新或调试内容。为此，您可以将代码库移动到库项目中，并设置两个引用该库项目的应用程序项目：一个用于商店应用程序，一个用于测试版应用程序。我们使用 aapt 选项`--rename-manifest-package`来更改 beta 版本的包名称（请参阅[此处](http://www.piwai.info/renaming-android-manifest-package/)的详细信息）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T02:52:29.167

你有没有使用过 BuildConfig.DEBUG，这是由 android adt 工具创建的

/gen/BuildConfig

# twitter-bootstrap - Twitter-bootstrap 折叠插件 - 如何启用多个“组”打开？

> ID：15696365
> 
> 赞同：74
> 
> 时间：2013-03-29T02:16:06.923
> 
> 标签：twitter-bootstrap

我正在使用折叠插件，我想知道如何使多个组同时打开。在他们的演示页面中：

[http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)

在特定时间只允许打开一个。我想这是手风琴的预期行为，但我怎样才能改变它，以便打开一组不会折叠其他组？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-03-29T05:40:07.023

只是不要使用`data-parent`属性：

```
<div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" href="#collapseOne">
        Collapsible Group Item #1
      </a>

    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">Item 1 Body</div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading"> 
      <a class="accordion-toggle" data-toggle="collapse" href="#collapseTwo">
        Collapsible Group Item #2
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
      <div class="accordion-inner">Item 2 Body</div>
    </div>
  </div>
</div> 
```

[http://jsfiddle.net/HJf6j/2/](http://jsfiddle.net/HJf6j/2/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-10T11:26:07.783

对于一个解决方案，它可以独立地展开/折叠每个面板并允许在每个页面上使用多个手风琴。

如果您所有的手风琴和组都有唯一的 ID，那么您可以在页面上拥有任意数量的手风琴

每个手风琴都需要一个唯一的 id：

```
<div class="panel-group" id="accordion1" role="tablist" aria-multiselectable="true"> 
```

每个标题都需要一个唯一的 id

```
<div class="panel-heading" role="tab" id="headingOne"> 
```

每个正文都需要一个唯一的 ID，如果适用，还需要引用要使用的标题

```
<div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne"> 
```

JSFiddle 示例：http: [//jsfiddle.net/qnhd7Lu3/3/](http://jsfiddle.net/qnhd7Lu3/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-29T08:58:07.617

```
$('#multipleOPened').on('click', function() {
  if($(this).is(':checked')) {
    $('#accordion .collapse').removeAttr('data-parent');
  } else {
    $('#accordion .collapse').attr('data-parent','#accordion');
  }
}); 
```

JSFiddle 上的 bootstrap 4 示例： [https ://jsfiddle.net/tw1j7Lf3/7/](https://jsfiddle.net/tw1j7Lf3/7/)

# javascript - 在javascript中用对象覆盖原型的问题

> ID：15696368
> 
> 赞同：4
> 
> 时间：2013-03-29T02:16:24.023
> 
> 标签：javascript, constructor, prototype

试图理解原型。我在 Chrome 的控制台中玩耍，希望有人能指出为什么会发生这种情况。

```
function Gadget(name, color) {
     this.name = name;
     this.color = color;
     this.whatAreYou = function(){
       return 'I am a ' + this.color + ' ' + this.name;
     }
}

Gadget.prototype.price = 100;
Gadget.prototype.rating = 3;
Gadget.prototype.getInfo = function() {
    return 'Rating: ' + this.rating + ', price: ' + this.price;
};

var newtoy = new Gadget('webcam', 'black');

newtoy.constructor.prototype

Gadget {price: 100, rating: 3, getInfo: function} //Expected 
```

**现在，如果我尝试以下操作，原型没有预期的结果。**

```
function Gadget(name, color) {
     this.name = name;
     this.color = color;
     this.whatAreYou = function(){
       return 'I am a ' + this.color + ' ' + this.name;
     }
}

Gadget.prototype = {
     price: 100,
     rating: 3,
     getInfo: function() {
       return 'Rating: ' + this.rating + ', price: ' + this.price;
     }
};

var newtoy = new Gadget('webcam', 'black');

newtoy.constructor.prototype

Object {} //Empty Object!!!!!??? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T02:20:40.997

**[jsFiddle 演示](http://jsfiddle.net/8RRn6/)**

这是因为您在执行此操作时覆盖了原型而不是扩展它：

```
Gadget.prototype = 
```

覆盖它时很常见，像这样制作构造函数的外观：

```
Gadget.prototype = {
 constructor : Gadget
} 
```

因此，对于您的确切情况：

```
Gadget.prototype = {
 constructor : Gadget,
 price: 100,
 rating: 3,
 getInfo: function() {
   return 'Rating: ' + this.rating + ', price: ' + this.price;
 }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T02:23:54.657

Prototype 最初是一个特殊的类型化对象。当您为原型分配一个新对象时（花括号是新对象的简写），您将丢失特殊的原型对象。

请参阅[JavaScript .prototype 是如何工作的？](https://stackoverflow.com/questions/572897/how-does-javascript-prototype-work)进行更深入的解释。

# perl - 使用 perl 的网络爬虫

> ID：15696375
> 
> 赞同：6
> 
> 时间：2013-03-29T02:17:32.393
> 
> 标签：perl, web-crawler

我想开发一个网络爬虫，它从种子 URL 开始，然后爬取 100 个它发现与种子 URL 属于同一域的 html 页面，并记录遍历的 URL，避免重复。我已经编写了以下内容，但 $url_count 值似乎没有增加，并且检索到的 URL 甚至包含来自其他域的链接。我该如何解决这个问题？在这里，我插入了 stackoverflow.com 作为我的起始 URL。

```
use strict;
use warnings;

use LWP::Simple;
use LWP::UserAgent;
use HTTP::Request;
use HTTP::Response;

##open file to store links
open my $file1,">>", ("extracted_links.txt");
select($file1); 

##starting URL
my @urls = 'http://stackoverflow.com/';

my $browser = LWP::UserAgent->new('IE 6');
$browser->timeout(10);
my %visited;
my $url_count = 0;

while (@urls) 
{
     my $url = shift @urls;
     if (exists $visited{$url}) ##check if URL already exists
     {
         next;
     }
     else
     {
         $url_count++;
     }         

     my $request = HTTP::Request->new(GET => $url);
     my $response = $browser->request($request);

     if ($response->is_error()) 
     {
         printf "%s\n", $response->status_line;
     }
     else
     {
         my $contents = $response->content();
         $visited{$url} = 1;
         @lines = split(/\n/,$contents);
         foreach $line(@lines)
         {
             $line =~ m@(((http\:\/\/)|(www\.))([a-z]|[A-Z]|[0-9]|[/.]|[~]|[-_]|[()])*[^'">])@g;
             print "$1\n";  
             push @urls, $$line[2];
         }

         sleep 60;

         if ($visited{$url} == 100)
         {
            last;
         }
    }
}

close $file1; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T03:35:43.410

几点，你的网址解析很脆弱，你肯定不会得到相对链接。此外，您不会测试 100 个链接，而是测试当前 url 的 100 个匹配项，这几乎肯定不是您的意思。最后，我对 LWP 不太熟悉，所以我将展示一个使用[Mojolicious](http://mojolicio.us)工具套件的示例。

这似乎可行，也许它会给你一些想法。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Mojo::UserAgent;
use Mojo::URL;

##open file to store links
open my $log, '>', 'extracted_links.txt' or die $!;

##starting URL
my $base = Mojo::URL->new('http://stackoverflow.com/');
my @urls = $base;

my $ua = Mojo::UserAgent->new;
my %visited;
my $url_count = 0;

while (@urls) {
  my $url = shift @urls;
  next if exists $visited{$url};

  print "$url\n";
  print $log "$url\n";

  $visited{$url} = 1;
  $url_count++;         

  # find all <a> tags and act on each
  $ua->get($url)->res->dom('a')->each(sub{
    my $url = Mojo::URL->new($_->{href});
    if ( $url->is_abs ) {
      return unless $url->host eq $base->host;
    }
    push @urls, $url;
  });

  last if $url_count == 100;

  sleep 1;
} 
```

# bash - BASH - 如何从后台运行的脚本中获取变量

> ID：15696382
> 
> 赞同：2
> 
> 时间：2013-03-29T02:19:02.850
> 
> 标签：bash

我有 2 个 bash 文件，文件 a.sh 和文件 b.sh。

文件 a.sh 的内容

```
# !/bin/bash
(/root/b.sh) & # <--- must be run in the background!!!
sleep 1
echo "--${VAR}--" 
```

b.sh 文件的内容

```
# !/bin/bash
VAR=100 
```

运行脚本 /root/a.sh ，结果是：----

**为什么不是结果： --100--**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T02:23:18.527

对子进程（子shell、后台脚本等）中环境变量的更改不会传播回父进程。换句话说，运行的shell进程`a.sh`有自己的环境变量副本，运行的shell进程`b.sh`有自己完全独立的副本，当你`VAR`在"b" shell中改变时，它不会改变"如地狱。

要将值 100 重新放入“a”外壳，您必须执行一些操作，例如将其打印到标准输出并将其读入`a.sh`，或使用其他一些进程间通信方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:23:07.570

## 嗨，最简单的方法是使用*临时文件*，试试这个例子：

**灰**

```
# !/bin/bash

ROOT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
SCRIPT_FILE="$ROOT_DIR/b.sh"

$SHELL $SCRIPT_FILE &
SCRIPT_PID=$!
TEMP_FILE="/tmp/$SCRIPT_PID.data"

# kill child process on exit
trap cleanup EXIT INT TERM
cleanup() {
  kill $SCRIPT_PID
  exit $?
}

# wait child process to put data
waitdata() {
  while [ ! -f $TEMP_FILE ]
  do
    sleep 1
  done
}

# main loop
while :
do
    waitdata
    VAR=$(cat $TEMP_FILE)
    echo $VAR
    sleep 2
done 
```

**b.sh**

```
#!/bin/bash

# my pid
TEMP_FILE="/tmp/$$.data"

# trap (control-c, kill, etc)
trap cleanup EXIT INT TERM
cleanup() {
  rm -f $TEMP_FILE
  exit $?
}

# main loop
while :
do
    VAR=$(date)
    #echo $VAR
    echo $VAR > $TEMP_FILE
    sleep 2
done 
```

## 我希望这可以帮助:)

# onclick - Kendo UI Treeview onclick

> ID：15696384
> 
> 赞同：0
> 
> 时间：2013-03-29T02:19:18.230
> 
> 标签：onclick, treeview, kendo-ui

我需要拦截点击并阻止用户选择另一个节点。但是，我没有在 Kendo 中看到为此指定的事件。有任何想法吗？

# process - VHDL移位运算符？

> ID：15696386
> 
> 赞同：1
> 
> 时间：2013-03-29T02:19:38.837
> 
> 标签：process, while-loop, vhdl, shift, synthesis

我仍在尝试习惯 VHDL 的一些怪癖，但我遇到了一些问题。首先，我知道像 rol、ror、ssl、srl 等移位运算符是不可合成的。本实验室的目的是使用黄金模型来检查测试台中同一事物的可综合版本。

现在，该程序的目的是将温度计代码转换为 3 位二进制数。因此，换句话说，温度计代码“00000001”=“001”、“00000011”=“010”、“00000111”=“011”等。我基本上是在尝试从右边数出字符串中 1 的数量向左。不会出现在 1 字符串之间放置“0”的情况，因此向量“00011101”是无效的并且永远不会出现。

我设计了一个不可综合（到目前为止，不可编译）的算法，我无法弄清楚如何开始工作。基本上，这个想法是读取温度计代码，将其右移并增加一个计数器，直到温度计代码等于 0，然后将计数器值分配给 3 位 std_logic_vector。下面是我到目前为止所做的代码。

```
library ieee;
use ieee.std_logic_1164.all; 
use ieee.numeric_std.all;

entity therm2bin_g is
    port(therm : inout std_logic_vector(6 downto 0); -- thermometer code
         bin : out std_logic_vector(2 downto 0); -- binary code 
         i : integer range 0 to 7);
end therm2bin_g;    

architecture behavioral_g of therm2bin_g is
begin

golden : process(therm)
begin

    while(therm /= "00000000") loop
        therm <= therm srl 1;
        i = i + 1;      
    end loop;

    bin <= std_logic'(to_unsigned(i,3));

end process golden;
behavioral_g; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:32:47.857

这是一个可合成的版本。*while*循环被for*循环*取代。*srl*是明确实现的：

```
entity therm2bin_g is
port(therm : inout std_logic_vector(6 downto 0); -- thermometer code
     bin : out std_logic_vector(2 downto 0); -- binary code 
     i : out integer range 0 to 7);
end therm2bin_g;    

architecture behavioral_g of therm2bin_g is
begin

golden : process(therm)
    variable i_internal: integer range 0 to 7;
begin
    i_internal:=0;
    for idx in 0 to therm'length loop
        if therm/="0000000" then
            therm<='0' & therm(therm'left downto 1);
            i_internal := i_internal + 1;     
        end if;
    end loop;

    bin<=std_logic_vector(to_unsigned(i_internal,bin'length));
    i<=i_internal;

end process golden;
end behavioral_g; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:31:55.600

“... rol、ror、ssl、srl 等运算符不可综合...” 谁这么说的？你检查过吗？在哪个合成工具上？它是最近的版本，还是 1990 年代初期的版本？

请注意，*某些*工具*可能*不支持它的论点是愚蠢的。*一些厨房*可能没有烤箱这一事实并不能阻止人们编写蛋糕食谱。

# c# - EF CF 实体的只读版本

> ID：15696390
> 
> 赞同：0
> 
> 时间：2013-03-29T02:20:13.697
> 
> 标签：c#, .net, entity-framework, ef-code-first, readonly

我正在寻找一种方法来创建我将用作参考对象的实体的只读（或不可变）版本。例如

```
class Order
{
   public int OrderId {get; private set;}

   public virtual Product ProductOrdered{get;set;}
   public int ProductId {get;set;}

   public int Quantity{get;set;}
}

class Product
{
    public int ProductId { get; set; }
    public string Name { get; set; }
    public string Category { get; set; }
} 
```

在上面的示例中，产品应该用作参考数据。即产品不应被代码使用产品作为订单中的参考来修改。

现在，我意识到一种强制执行的方法是将所有设置器设为私有，并且没有人能够更改产品...

```
class ProductReadOnly
{
    public int ProductId { get; private set; }
    public string Name { get; private set; }
    public string Category { get; private set; }
} 
```

但在我的应用程序的某个地方，我希望管理员能够创建/修改产品。所以，我可以使用 Product 类（带有公共设置器）

现在的问题是（假设我能够使用 Table 属性将 Product & ProductReadOnly 映射到产品表）

1.  我可以将 ProductReadOnly 用作 Order 类中的导航属性吗？
2.  我可以在相同的数据上下文中加载 Product 和 ProductReadOnly（相同的产品）吗？
3.  有没有更简单的方法（分离的对象？）
4.  这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:34:22.740

无需像您的解决方案一样保留两个实体。您可以在您的上下文中覆盖 SaveChanges 并为此类产品禁用/启用编辑/添加。

```
 public override int SaveChanges()
    {
      if(currentUserIsNotAnAdmin){
      var entries= ObjectStateManager.GetObjectStateEntries(EntityState.Added |   
   EntityState.Modified).OfType<Product>() ;
        foreach(entry in entries){//or throw an error here
          this.Entry(entry).State=System.Data.EntityState.Unchanged
        }
      }
        return base.SaveChanges();
    } 
```

如果当前用户不是管理员，我在这里禁用了为产品实体保存更改。否则，如果有任何类型的条目被修改/添加，您可能会抛出错误`Product`

# ruby-on-rails-3 - 使用实例方法创建范围的最佳方式

> ID：15696391
> 
> 赞同：0
> 
> 时间：2013-03-29T02:20:27.463
> 
> 标签：ruby-on-rails-3

我想知道使用实例方法过滤记录来制作范围的最佳方法是什么。这是我的模型：

```
class Promotion < ActiveRecord::Base

  scope :availables, lambda{ all.select{ |obj| obj.is_available? } }

  def is_available?
    Date.today <= Date.strptime(valid_thru, '%m/%d/%Y')
    ...more validations here
  end
end 
```

这里的问题是这个范围返回一个数组而不是一个 ActiveRecord::Relation 并且我无法链接其他范围。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:49:11.770

没有办法完成你想要的。如果你想在 ruby​​ 对象上应用逻辑，你不能再返回 ActiveRecord::Relation。

实现这样的事情的唯一方法是在数据库级别上拥有逻辑。在这种情况下，您可以使用类方法来实现您想要的：

```
def availables
  where('valid_thru => ?', Date.today)
end 
```

# jquery - 如何使用 jquery 获取 -webkit-transform 的值

> ID：15696396
> 
> 赞同：1
> 
> 时间：2013-03-29T02:21:26.330
> 
> 标签：jquery, 3d

我的 CSS：

```
-webkit-transform: translateX(350px) translateZ(-200px) rotateY(45deg); 
```

获取变换值的方法：

```
var matrix = $item.css("transform"); 
```

然后我得到这样的值：

```
matrix3d(0.707107, 0, 0.707107, 0, 0, 1, 0, 0, -0.707107, 0, 0.707107, 0, 350, 0, -200, 1) 
```

问题：

```
How can I get the rorateY value? 
```

# matrix - 点积矩阵

> ID：15696399
> 
> 赞同：-1
> 
> 时间：2013-03-29T02:21:56.850
> 
> 标签：matrix, python-3.x, dot-product

嘿，所以我只是想知道如何使用用户定义的函数计算两个矩阵的点积。

例如：

```
row(C,0)=[4, 1, 9]
col(D,0)=[2, 5, 1]
def dotProduct(x,y):

print(dotProduct(row(C,0), col(D,0))) 
```

结果应该是 22

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:27:24.577

```
def dotProduct(x,y):
    prod=0
    for i in range(len(x)):
        prod=prod+x[i]*y[i]
    return prod 
```

# java - 从需要启用 cookie 的 url 获取内容

> ID：15696400
> 
> 赞同：-1
> 
> 时间：2013-03-29T02:21:57.360
> 
> 标签：java, url, cookies

使用 java，我如何从需要 cookie 和 javascript 才能加载页面的网页中获取内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:58:31.047

您应该尝试了解`HttpURLConnection`以及如何通过 Http 标头向网站发送 cookie 等信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:34:47.490

没有代码或更多信息，很难提供帮助。

你需要一个带有 CookieHandler 的 URLConnection，你可以在这里找到一些示例代码：

[https://blogs.oracle.com/CoreJavaTechTips/entry/cookie_handling_in_java_se](https://blogs.oracle.com/CoreJavaTechTips/entry/cookie_handling_in_java_se)

# matlab - 在 Matlab 中按下按钮打开 winvideo 流

> ID：15696402
> 
> 赞同：0
> 
> 时间：2013-03-29T02:22:22.303
> 
> 标签：matlab, button, video-capture, matlab-figure

我试图弄清楚如何运行相机并按下按钮停止相机。如果我不能这样做，我如何设置相机在这个数字内运行，我会让它一直运行。我还需要捕捉图像。

```
function faceCam2()
vid = videoinput('winvideo');

% Create a figure window
hFig = figure('Toolbar','none',...
       'Menubar', 'none',...
       'NumberTitle','Off',...
       'Name','FaceScan');

%start camera
uicontrol(  'String', 'Start Preview',...
            'Callback', 'preview(vid)',...
            'Units','normalized',...
            'Position',[0 0 0.15 .07]);     
%stop
uicontrol(  'String', 'Stop Preview',...
            'Callback', 'stoppreview(vid)',...
            'Units','normalized',...
            'Position',[.17 0 .15 .07]);
%snapshot
uicontrol(  'String', 'Pic',...
            'Callback', 'data = getsnapshot(vid)',...
            'Units','normalized',...
            'Position',[0.34 0 .15 .07]);
%close window
uicontrol(  'String', 'Close',...
            'Callback', 'close(gcf)',...
            'Units','normalized',...
            'Position',[0.51 0 .15 .07]);

end 
```

当我按下一个按钮时，我在 matlab 命令窗口中得到错误。退出工作，但不是其他 3\. 我需要做什么？谢谢！

未定义的函数或变量“vid”。

评估 uicontrol 回调时出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:03:19.697

问题是它`vid`是函数中的局部变量，`faceCam2`对回调不可见。[以下](http://www.mathworks.com/help/matlab/creating_guis/sharing-data-among-a-guis-callbacks.html)是一些将数据传递给回调函数的方法。使用嵌套方法时，代码如下所示：

```
function faceCam2()
vid = videoinput('winvideo');

% Create a figure window
hFig = figure('Toolbar','none',...
       'Menubar', 'none',...
       'NumberTitle','Off',...
       'Name','FaceScan');

%start camera
uicontrol(  'String', 'Start Preview',...
            'Callback', @prevCallback,...
            'Units','normalized',...
            'Position',[0 0 0.15 .07]);     

    function prevCallback(hObject,eventdata)
       preview(vid);
    end
%...
end 
```

# entity-framework - 如何在 Entity Framework 5 中映射组件列表？

> ID：15696403
> 
> 赞同：0
> 
> 时间：2013-03-29T02:22:29.007
> 
> 标签：entity-framework, entity-framework-5

我是 NHibernate 用户，NHibernate 允许我创建一个非常细粒度的模型。我正在将应用程序从 NHibernate 移植到实体框架。

NHibernate 允许我定义如下内容：

```
public class User : DomainEntity
{
    public virtual Name Name { get; set; }
    ...
    public virtual ICollection<LogonInformation> LogonInformations { get; set; }
}

public class Name
{
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
}

public class LogonInformation
{
    public virtual string Ip { get; set; }
    public virtual DateTime Date { get; set; }
} 
```

其中 Name 和 LogonInformation 映射为 <componentes>。在特殊情况下，NHibernate 在创建数据库时，会在 LogonInformation 表中创建 UserId。如何使用 EntityFramework 5 做到这一点？我试过使用复杂类型，但它似乎不起作用，因为我仍然得到以下异常：

> 在模型生成期间检测到一个或多个验证错误：
> 
> \tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'LogonInformation' 没有定义键。定义此 EntityType 的键。
> 
> \tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'LogonInformations' 基于没有定义键的类型'LogonInformation'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:01:29.130

您的例外是抱怨`LogonInformation`没有主键。为了建立一个主键，您将属性添加`Key`到您想要成为主键的属性中，例如，如果`Ip`是您的主键，您的代码将是：

```
public class LogonInformation
{
    [Key]
    public virtual string Ip { get; set; }
    public virtual DateTime Date { get; set; }
} 
```

* * *

**更新：** 如果您无法更改`LogonInformation`，您可以使用 Fluent-API 设置其主键（我不喜欢这种方式，但它可以解决您的问题）。为此，您需要`OnModelCreating`在上下文中重写该方法，如下所示：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<LogonInformation>().HasKey(logInfo => logInfo.Ip);
} 
```

# magento - 无法配置 EAV 设置资源

> ID：15696406
> 
> 赞同：1
> 
> 时间：2013-03-29T02:22:47.983
> 
> 标签：magento

我正在尝试创建一个 EAV 模块，但我在这里停留了很长时间。

错误信息：

```
 Invalid entity_type specified: gagan_eavfaq

#0 C:\wamp\www\www.ubt.com\app\code\core\Mage\Eav\Model\Config.php(328): Mage::throwException('Invalid entity_...')
#1 C:\wamp\www\www.ubt.com\app\code\core\Mage\Eav\Model\Entity\Abstract.php(276): Mage_Eav_Model_Config->getEntityType('gagan_eavfaq')
#2 C:\wamp\www\www.ubt.com\app\code\local\Gagan\Eavfaq\Model\Resource\Eav\Mysql4\Eavfaq.php(9): Mage_Eav_Model_Entity_Abstract->setType('gagan_eavfaq')
#3 C:\wamp\www\www.ubt.com\app\code\core\Mage\Core\Model\Resource\Abstract.php(44): Gagan_Eavfaq_Model_Resource_Eav_Mysql4_Eavfaq->_construct()
#4 C:\wamp\www\www.ubt.com\app\code\core\Mage\Core\Model\Config.php(1348): Mage_Core_Model_Resource_Abstract->__construct(Array)
#5 C:\wamp\www\www.ubt.com\app\code\core\Mage\Core\Model\Config.php(1380): Mage_Core_Model_Config->getModelInstance('eavfaq_mysql4/e...', Array)
#6 C:\wamp\www\www.ubt.com\app\Mage.php(490): Mage_Core_Model_Config->getResourceModelInstance('eavfaq/eavfaq', Array)
#7 C:\wamp\www\www.ubt.com\app\Mage.php(518): Mage::getResourceModel('eavfaq/eavfaq', Array)
#8 C:\wamp\www\www.ubt.com\app\code\core\Mage\Core\Model\Abstract.php(139): Mage::getResourceSingleton('eavfaq/eavfaq')
#9 C:\wamp\www\www.ubt.com\app\code\core\Mage\Core\Model\Abstract.php(225): Mage_Core_Model_Abstract->_getResource()
#10 C:\wamp\www\www.ubt.com\app\code\local\Gagan\Eavfaq\controllers\IndexController.php(8): Mage_Core_Model_Abstract->load(1)
#11 C:\wamp\www\www.ubt.com\app\code\core\Mage\Core\Controller\Varien\Action.php(419): Gagan_Eavfaq_IndexController->indexAction()
#12 C:\wamp\www\www.ubt.com\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#13 C:\wamp\www\www.ubt.com\app\code\core\Mage\Core\Controller\Varien\Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#14 C:\wamp\www\www.ubt.com\app\code\core\Mage\Core\Model\App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#15 C:\wamp\www\www.ubt.com\app\Mage.php(683): Mage_Core_Model_App->run(Array)
#16 C:\wamp\www\www.ubt.com\index.php(87): Mage::run('', 'store')
#17 {main} 
```

配置：

```
 <?xml version="1.0" encoding="UTF-8"?>

<config>
    <modules>
        <Gagan_eavfaq>
            <version>0.1.0</version>
        </Gagan_eavfaq>
    </modules>

    <frontend>
        <routers>
            <eavfaq>
                <use>standard</use>
                <args>
                    <module>Gagan_Eavfaq</module>
                    <frontName>eavfaq</frontName>
                </args>
            </eavfaq>
        </routers>
    </frontend>

    <global>
        <models>
            <eavfaq>
                <class>Gagan_Eavfaq_Model</class>
                <resourceModel>eavfaq_mysql4</resourceModel>
            </eavfaq>
            <eavfaq_mysql4>
                <class>Gagan_Eavfaq_Model_Resource_Eav_Mysql4</class>
                <entities>
                    <dinkchika>
                        <table>gagan_eavfaq</table>
                    </dinkchika>
                </entities>
            </eavfaq_mysql4>
        </models>

       <resources>
            <eavfaq_setup>
                <setup>
                    <module>Gagan_Eavfaq</module>
                  <class>Gagan_Eavfaq_Entity_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </eavfaq_setup>
        <eavfaq_write>
            <connection>
                <use>core_write</use>
            </connection>
        </eavfaq_write>
        <eavfaq_read>
            <connection>
                <use>core_read</use>
            </connection>
        </eavfaq_read>
        </resources>  

    </global>        
</config> 
```

资源：

```
 <?php

class Gagan_Eavfaq_Model_Resource_Eav_Mysql4_Eavfaq
extends Mage_Eav_Model_Entity_Abstract
{

    public function _construct() {
        $resource = mage::getSingleton('core/resource');
        $this->setType('gagan_eavfaq');
        $this->setConnection(
                $resource->getConnection('eavfaq_read'),
                $resource->getConnection('eavfaq_write')
                );
    }
} 
```

设置 ：

```
 <?php

class Gagan_Eavfaq_Entity_Setup extends
Mage_Eav_Model_Entity_Setup{

} 
```

**安装脚本：** *我希望显示此异常。看起来我的设置没有找到该文件的方法，由此我可以断定我的配置有问题。但是我已经检查了几次仍然没有运气。请帮忙。谢谢*

```
 <?php   $installer = $this;
throw new Exception("set up configured "); 
```

文件夹结构：

![在此处输入图像描述](../Images/c305cae69070001204b5e9df65bb1305.png)

# xamarin.ios - 我的 MonoTouch 应用程序无法在 6.1.3 上运行，在 6.0.x 及之前的版本上运行...... WTF？

> ID：15696407
> 
> 赞同：0
> 
> 时间：2013-03-29T02:22:58.023
> 
> 标签：xamarin.ios, xamarin, xamarin-studio

在使用 xamarin 的 Studio 构建发布/AppStore 构建后，我刚刚将我的应用推送到 App Store...

一切都亮了绿灯，准备好了，我只有一个人没有安装发布版本....他们安装了它，尝试启动需要 17 秒并被杀死（我想）。它不会在设备上创建崩溃日志。

在“设置”中，应用程序下有一个“调试设置”部分 -*我*没有放在那里，包括 Xamarin Studio Host 的一个选项，它设置为自动，但似乎可以设置为其他字符串..（关于这到底是什么的另一条消息，它是如何出现的，以及如何摆脱它）

我不知道如何调试它。我刚刚下载并将 XCode 升级到最新版本，希望对您有所帮助.. （虽然，我没有使用 XCode 接口来构建，但我希望在引擎盖下它正在使用它的部分内容，也许是库什么的。）不过，除非 iOS 编写者是疯子，否则它应该向后兼容为 iOS 4.0 及更高版本编写的应用程序......（我的是一个 4.0 目标应用程序）

此外，在她的手机上（她所做的所有测试一直是 6.x），我的应用程序总是需要很长时间才能启动.. 但在 5.1 上它非常快..（IE 1-2 秒与她手机上的 10 多秒相比）

任何人都有线索，我现在肯定可以使用一个..我希望我将不得不拒绝二进制文件，并提交另一个......

-燧石

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:44:26.397

想通了....问题出在TestFlightApp SDK上...

我删除了它，现在应用程序启动正常...重新提交到 App Store 以供批准。

# android - Android TeeChart 折线图触摸灵敏度

> ID：15696409
> 
> 赞同：0
> 
> 时间：2013-03-29T02:23:39.997
> 
> 标签：android, charts, linechart, teechart

我意识到折线图拖动点不是很敏感，很难选择要拖动的点。除此之外，偶尔可能会触发错误的点。我想问有没有解决方法可以解决这个问题？我检查了示例代码，DragPoint 基本上选择了整条线，但没有选择点（我猜？）。除此之外，TeeChart 是一个很棒的图表库！任何意见和答案将不胜感激。

```
 Line seriesLine;
        seriesLine = new Line(chart.getChart());
        seriesLine.fillSampleValues(5);
        SeriesPointer tmpPointer = seriesLine.getPointer();
        tmpPointer.setInflateMargins(true);
        tmpPointer.setVisible(true);
        tmpPointer.setVertSize(10);
        tmpPointer.setHorizSize(10);
        DragPoint toolDragPoint;
        toolDragPoint = new DragPoint(seriesLine);
        toolDragPoint.setStyle(DragPointStyle.BOTH); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:39:46.733

你说的对。似乎指针不可点击和拖动。

我在[这里](http://www.teechart.net/support/viewtopic.php?f=4&t=11815)找到了解决问题的方法也解决了这个问题。所以我对 Java 版本应用了相同的修复。这将在下一个维护版本中提供。

# assembly - while vs if 在 x86 程序集中

> ID：15696413
> 
> 赞同：-1
> 
> 时间：2013-03-29T02:24:25.770
> 
> 标签：assembly, x86

您如何区分 x86 程序集中的 while 循环和 if 语句？假设我的程序正在获取这个 x86 程序集：

```
 jmp    .L2               # jump to test at end
  .L4:
        movl   -4(%ebp), %eax    # eax = A
        cmpl   -12(%ebp), %eax   # compare A to C
        jge    .L3               # skip next statement if A >= C
        addl   $1, -4(%ebp)      # A++
  .L3:
        subl   $1, -8(%ebp)      # B--
  .L2:
        cmpl   $0, -8(%ebp)      # compare B to 0
        jns    .L4               # restart code if B >= 0 
```

  假设 x 位于 -8(%ebp)，在 .L2 的底部，为什么这是一个 while 循环？

      为什么是： `while(x >= 0){jump to .L4}`

     而不是： `if(x >= 0){ jump to .L4}`??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:32:20.623

因为这是代码的跳转。换句话说，跳起来（选择你最喜欢的心智模型）。

这意味着执行将一次又一次地达到该条件跳转，直到条件为假。这就是`while`循环的定义。现在，程序集不包含内置的循环概念（除了`rep`前缀，但我们不要去那里）。是的，这是一个有条件的跳转——正式的`if`带有`goto`正文的语句。但它实现了循环的流控制模式。

`if`另一方面，常规语句通常实现为有条件的向前（向下）跳转。

# html - HTML 多选框

> ID：15696415
> 
> 赞同：65
> 
> 时间：2013-03-29T02:24:56.840
> 
> 标签：html, forms

我只是想知道下面表格的名称是什么？我从早上开始在谷歌上搜索 HTML 表单列表，但我在任何地方都找不到这种表单。谁能告诉我这个表单的确切名称，这在 HTML 表单中可用吗？

![在此处输入图像描述](../Images/6adb71addc4ea47be9cded66a1421b82.png)

我只想在我的网站中添加这种形式。它适用于 HTML 还是我应该使用 JavaScript 或它仅限于 Windows 应用程序？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-03-29T02:56:19.033

这里有一个小示例可以帮助您入门：http: [//jsfiddle.net/eUDRV/3/](http://jsfiddle.net/eUDRV/3/)

此示例将项目（一个或多个）从左向右移动并再次返回。在右侧选择的任何项目都将更新右侧的文本框。

我们正在使用以下元素：

*   `select`
*   `input type="button"`
*   `input type="text"`

构图：

*   `div`
*   `section`

使用简单的 CSS 样式。JavaScript 提供了功能。

我正在使用 jQuery 库使事情变得更容易一些。这也可以用纯 JavaScript 来完成。

```
$("#btnLeft").click(function () {
    var selectedItem = $("#rightValues option:selected");
    $("#leftValues").append(selectedItem);
});

$("#btnRight").click(function () {
    var selectedItem = $("#leftValues option:selected");
    $("#rightValues").append(selectedItem);
});

$("#rightValues").change(function () {
    var selectedItem = $("#rightValues option:selected");
    $("#txtRight").val(selectedItem.text());
});
```

```
SELECT, INPUT[type="text"] {
    width: 160px;
    box-sizing: border-box;
}
SECTION {
    padding: 8px;
    background-color: #f0f0f0;
    overflow: auto;
}
SECTION > DIV {
    float: left;
    padding: 4px;
}
SECTION > DIV + DIV {
    width: 40px;
    text-align: center;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<section class="container">
    <div>
        <select id="leftValues" size="5" multiple></select>
    </div>
    <div>
        <input type="button" id="btnLeft" value="&lt;&lt;" />
        <input type="button" id="btnRight" value="&gt;&gt;" />
    </div>
    <div>
        <select id="rightValues" size="4" multiple>
            <option>1</option>
            <option>2</option>
            <option>3</option>
        </select>
        <div>
            <input type="text" id="txtRight" />
        </div>
    </div>
</section>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-24T09:50:00.350

它最常被称为列表框多选。[这是Loudev.com](http://loudev.com)上的一个轻量级 jQuery 多选库：

[![多选](../Images/fea39953a4146f73ece2dae064d487f8.png)](https://i.stack.imgur.com/6iM7c.png)

# angularjs - 在 AngularJS 中有条件地应用属性的最佳方法是什么？

> ID：15696416
> 
> 赞同：304
> 
> 时间：2013-03-29T02:25:00.460
> 
> 标签：angularjs, angularjs-directive

我需要能够基于范围上的布尔变量向元素添加例如“contenteditable”。

示例使用：

```
<h1 attrs="{'contenteditable=\"true\"': editMode}">{{content.title}}</h1> 
```

如果`$scope.editMode`设置为 ，将导致 contenteditable=true 添加到元素中`true`。有没有一些简单的方法来实现这个类似 ng-class 的属性行为？如果没有，我正在考虑编写指令并分享。

**编辑：** 我可以看到我提出的 attrs 指令和 ng-bind-attrs 之间似乎有一些相似之处[，但是它在 1.0.0.rc3 中被删除了](https://github.com/angular/angular.js/commit/55027132f3d57e5dcf94683e6e6bd7b0aae0087d#L1L233)，为什么会这样？

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2013-05-21T12:15:30.937

当无法使用 ng-class 时（例如在设置 SVG 样式时），我使用以下有条件地设置类 attr：

```
ng-attr-class="{{someBoolean && 'class-when-true' || 'class-when-false' }}" 
```

相同的方法应该适用于其他属性类型。

（我认为您需要使用最新的不稳定 Angular 才能使用 ng-attr-，我目前使用的是 1.1.4）

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2014-08-01T21:06:43.100

你可以在属性前面加上`ng-attr`eval 一个 Angular 表达式。当表达式的结果未定义时，这会从属性中删除值。

```
<a ng-attr-href="{{value || undefined}}">Hello World</a> 
```

将产生（当值为假时）

```
<a ng-attr-href="{{value || undefined}}" href>Hello World</a> 
```

所以不要使用`false`，因为这会产生单词“false”作为值。

```
<a ng-attr-href="{{value || false}}" href="false">Hello World</a> 
```

在指令中使用此技巧时。如果指令的属性缺少值，则它们的属性将为 false。

例如，以上将是错误的。

```
function post($scope, $el, $attr) {
      var url = $attr['href'] || false;
      alert(url === false);
} 
```

* * *

## 回答 #3

> 赞同：99
> 
> 时间：2014-12-13T11:29:24.137

我通过努力设置属性来完成这项工作。并使用属性的布尔值控制属性的适用性。

这是代码片段：

```
<div contenteditable="{{ condition ? 'true' : 'false'}}"></div> 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-07-09T16:48:47.083

在最新版本的 Angular (1.1.5) 中，它们包含了一个名为`ngIf`. 它的不同之`ngShow`处`ngHide`在于元素不是隐藏的，而是根本不包含在 DOM 中。它们对于创建成本高但未使用的组件非常有用：

```
<h1 ng-if="editMode" contenteditable=true>{{content.title}}</h1> 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2015-09-10T22:10:53.393

为了让属性基于布尔检查显示特定值，或者如果布尔检查失败则完全省略，我使用了以下内容：

`ng-attr-example="{{params.type == 'test' ? 'itWasTest' : undefined }}"`

示例用法：

`<div ng-attr-class="{{params.type == 'test' ? 'itWasTest' : undefined }}">`

将输出`<div class="itWasTest">`或`<div>`基于值`params.type`

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-06-05T08:29:30.573

`<h1 ng-attr-contenteditable="{{isTrue || undefined }}">{{content.title}}</h1>`

当 isTrue=true 时会产生： `<h1 contenteditable="true">{{content.title}}</h1>`

当 isTrue=false 时： `<h1>{{content.title}}</h1>`

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-07-09T21:53:07.280

关于已接受的解决方案，Ashley Davis 发布的解决方案，所描述的方法仍然在 DOM 中打印属性，而不管它被分配的值是未定义的事实。

例如，在具有 ng-model 和 value 属性的输入字段设置上：

```
<input type="text" name="myInput" data-ng-attr-value="{{myValue}}" data-ng-model="myModel" /> 
```

不管 myValue 背后是什么，**value**属性仍然会打印在 DOM 中，因此会被解释。然后，Ng-model 被覆盖。

有点不愉快，但使用 ng-if 可以解决问题：

```
<input type="text" name="myInput" data-ng-if="value" data-ng-attr-value="{{myValue}}" data-ng-model="myModel" />
<input type="text" name="myInput" data-ng-if="!value" data-ng-model="myModel" /> 
```

我建议在 ng-if 指令中使用更详细的检查:)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-12-22T14:30:30.150

你也可以使用这样的表达式：

```
<h1 ng-attr-contenteditable="{{ editMode ? true : false }}"></h1> 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-11-30T17:48:46.577

几个月前，我实际上写了一个补丁来做到这一点（在有人在 freenode 上的#angularjs 中询问它之后）。

它可能不会被合并，但它与 ngClass 非常相似：[https ://github.com/angular/angular.js/pull/4269](https://github.com/angular/angular.js/pull/4269)

无论是否合并，现有的 ng-attr-* 东西都可能适合您的需求（正如其他人所提到的），尽管它可能比您建议的更多 ngClass 风格的功能有点笨拙。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-04-14T18:45:06.530

对于输入字段验证，您可以执行以下操作：

```
<input ng-model="discount" type="number" ng-attr-max="{{discountType == '%' ? 100 : undefined}}"> 
```

仅当定义`max`为`100``discountType``%`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-04-25T15:30:25.290

*编辑*：这个答案与Angular2+有关！对不起，我错过了标签！

*原答案：*

至于如果设置了某个 Input 值，您只想应用（或设置）一个属性的非常简单的情况，它就像

```
<my-element [conditionalAttr]="optionalValue || false"> 
```

它与以下内容相同：

```
<my-element [conditionalAttr]="optionalValue ? optionalValue : false"> 
```

（因此，如果给定，则应用 optionalValue，否则表达式为 false 并且不应用属性。）

示例：我有这样的情况，我让应用颜色但也应用任意样式，其中颜色属性不起作用，因为它已经设置（即使没有给出 @Input() 颜色）：

```
@Component({
  selector: "rb-icon",
  styleUrls: ["icon.component.scss"],
  template: "<span class="ic-{{icon}}" [style.color]="color==color" [ngStyle]="styleObj" ></span>",
})
export class IconComponent {
   @Input() icon: string;
   @Input() color: string;
   @Input() styles: string;

   private styleObj: object;
...
} 
```

因此，“style.color”仅在有颜色属性时才设置，否则可以使用“styles”字符串中的颜色属性。

当然，这也可以通过

```
[style.color]="color" 
```

和

```
@Input color: (string | boolean) = false; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-01-24T16:44:24.133

能够得到这个工作：

```
ng-attr-aria-current="{{::item.isSelected==true ? 'page' : undefined}}" 
```

这里的好处是，如果 item.isSelected 为 false，则根本不会呈现该属性。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-07-20T21:10:47.693

以防万一您需要 Angular 2 的解决方案，那么它很简单，使用如下所示的属性绑定，例如，您想让输入有条件地只读，然后在方括号中添加 attrbute，后跟 = 符号和表达式。

```
<input [readonly]="mode=='VIEW'"> 
```

# android - 如何删除字符串前面的空白？

> ID：15696422
> 
> 赞同：1
> 
> 时间：2013-03-29T02:25:53.483
> 
> 标签：android

有一个字符串“早上好”。我想删除字符串开头的边距（可能不是空格，可能是换行）并保留边距的中间和后面。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:29:20.600

在`trim()`删除前导空格*和*尾随空格时，要仅删除前导空格，您需要实现自己的 ltrim 方法，如下所示：

```
public static String ltrim(String s) {
    int i = 0;
    while (i < s.length() && Character.isWhitespace(s.charAt(i))) {
        i++;
    }
    return s.substring(i);
}

String myString = " whitespace be gone!";
String trimmedString = ltrim( myString ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T08:04:13.813

正则表达式在这里可以很好地工作。当一个或多个空白字符 (\\s+) 出现在短语 (^) 的开头时，将这些前导空白字符替换为空字符串。

```
private static String trimLeading(String value) {
    return value != null ? value.replaceFirst("^\\s+", "") : null;
} 
```

使用 JUnit/hamcrest 进行测试：

```
@Test
public void test() {
    assertThat(trimLeading("good morning "), is("good morning "));
    assertThat(trimLeading(" good morning "), is("good morning "));
    assertThat(trimLeading("  good morning "), is("good morning "));
    assertThat(trimLeading("\ngood morning "), is("good morning "));
    assertThat(trimLeading("\rgood morning "), is("good morning "));
    assertThat(trimLeading("\tgood morning "), is("good morning "));
    assertThat(trimLeading(" \t \n \r  good morning "), is("good morning "));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:41:17.507

```
String b=" This is for test "
for(int i=0;i<=b.length()-1;i++)  
    {  
     char temp=b.charAt(i);  
     if(temp==' ')  
     {  
      whitespaceNumber++;  
     }  
    }  
    System.out.println("Whitespace number is : "+whitespaceNumber); 
```

# javascript - 使用 jquery clone() 克隆 div 在 IE 中不起作用

> ID：15696429
> 
> 赞同：0
> 
> 时间：2013-03-29T02:26:44.607
> 
> 标签：javascript, jquery

我正在尝试克隆 div 并将它们附加到容器 div 中。我的解决方案在 Chrome 中运行良好，但在 IE 中根本无法运行。我曾尝试对此进行研究，甚至询问过这个问题，但无法真正找到可行的解决方案。有人有什么建议吗？这是我到目前为止所拥有的

html看起来有点像这样

```
<div class="holdOne"></div>
<div class="holdTwo"></div>
<div class="holdThree"></div>

<div class="productHolder">
    <div class="product"></div>
    <div class="product"></div>
    <div class="product"></div>
    <div class="product"></div>
    <div class="product"></div>
    <div class="product"></div>
</div> 
```

jQuery

```
$(function() {
    $('.productHolder .product').eq(0).clone().appendTo('.holdOne');
    $('.productHolder .product').eq(1).clone().appendTo('.holdOne');
    $('.productHolder .product').eq(2).clone().appendTo('.holdOne');

    $('.productHolder .product').eq(1).clone().appendTo('.holdTwo');
    $('.productHolder .product').eq(2).clone().appendTo('.holdTwo');
    $('.productHolder .product').eq(3).clone().appendTo('.holdTwo');

    $('.productHolder .product').eq(0).clone().appendTo('.holdThree');
    $('.productHolder .product').eq(5).clone().appendTo('.holdThree');
    $('.productHolder .product').eq(4).clone().appendTo('.holdThree');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:56:57.427

可能是一个错误？[IE 错误中的 jQuery .clone() .html()](https://stackoverflow.com/questions/7243384/jquery-clone-html-in-ie-bug)

所以也许放弃`clone()`并只使用元素`html()`值可以工作吗？不过，这有点混乱。

```
var dummy = $('.productHolder .product').eq(0);
$('.holdOne').append(dummy.html()); 
```

显然，您需要为每个*clone*重复该操作。我在 Mac 上，无法测试 IE，但希望这会有所帮助。看看下面的小提琴，虽然它没有抓住外层HTML。

**小提琴**

[http://jsfiddle.net/URKq5/1/](http://jsfiddle.net/URKq5/1/)

* * *

**编辑**

我发现了另一篇可以帮助处理外部 HTML 的 SO 帖子。这应该有助于使其与您最初拥有的内容更加一致：

```
$('.holdOne').append($('.productHolder .product').eq(0)[0].outerHTML); 
```

**新小提琴**

[http://jsfiddle.net/URKq5/3/](http://jsfiddle.net/URKq5/3/)

**链接**

[jQuery：外部 html()](https://stackoverflow.com/questions/5744207/jquery-outer-html)

# javascript - jquery文件上传rails

> ID：15696430
> 
> 赞同：0
> 
> 时间：2013-03-29T02:27:03.430
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3.2

在我的 rails 应用程序中，当页面加载时，我在 Chrome Inspector 中收到以下错误：![其他文件中的相同错误](../Images/b83a6d516c5c0493e13dac1a85e21c2e.png)

![在此处输入图像描述](../Images/3f1ca2990d324fc653f06f061880b767.png)

是什么导致我的 Rails 应用程序出现这种情况？

**看法**

```
<%= stylesheet_link_tag 'admin/dashboard' %>
<%= stylesheet_link_tag 'admin/new' %>
<%= javascript_include_tag 'admin/dashboard'%>
<script>

    $(function () {
        'use strict';

        // Initialize the jQuery File Upload widget:
        $('#fileupload').fileupload();

        // Enable iframe cross-domain access via redirect option:
        $('#fileupload').fileupload(
                'option',
                'redirect',
                window.location.href.replace(
                        /\/[^\/]*$/,
                        '/cors/result.html?%s'
                )
        );

        $('#fileupload').fileupload('option', {
            maxFileSize:10000000,
            acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,
            sequentialUploads:true,
            process:[
                {
                    action:'load',
                    fileTypes:/^image\/(gif|jpeg|png)$/,
                    maxFileSize:20000000 // 20MB
                },
                {
                    action:'resize',
                    maxWidth:2048,
                    maxHeight:2048
                },
                {
                    action:'save'
                }
            ]
        });

        if ($.support.cors) {
            $.ajax({
                url:'//jquery-file-upload.appspot.com/',
                type:'HEAD'
            }).fail(function () {
                        $('<span class="alert alert-error"/>')
                                .text('Upload server currently unavailable - ' +
                                new Date())
                                .appendTo('#fileupload');
                    });
        }

        // Load existing files:
        $('#fileupload').each(function () {
            var that = this;
            $.getJSON(this.action, function (result) {
                if (result && result.length) {
                    $(that).fileupload('option', 'done')
                            .call(that, null, {result:result});
                }
            });
        });

    });

</script>
<div class="container">
  <header class="header">
      <div class="header_content clearfix">
        <h1 class="page_name">Dashboard</h1>
          <ul class="navbar">
            <li class="nav_item">Move</li>
            <li class="nav_item">Edit</li>
            <li class="nav_item">Delete</li>
          </ul>
      </div>
  </header>
  <section class="sidebar">
    <div class="sidebar_content">
      <ul class="menu">
        <li class="menu_item active-menu"><%=link_to 'manage albums', admin_albums_path%></li>
        <li class="menu_item"><%=link_to 'manage media' %></li>
        <li class="menu_item"></li>
        <li class="menu_item"></li>
        <li class="menu_item"></li>
      </ul>
    </div>
  </section>
  <section class="content">
    <div class="inner-box clearfix">
      <%= form_for [:admin, @album, @image], :html => { :multipart => true, :id => "fileupload"  } do |f| %>
        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
        <div class="row fileupload-buttonbar">
            <div class="span7">
                <!-- The fileinput-button span is used to style the file input field as button -->
                <span class="btn btn-success fileinput-button">
                    <i class="icon-plus icon-white"></i>
                    <span><%= t('fileupload.add_files') %></span>
                    <%= f.file_field :path, :multiple => true %>
                </span>
                <button type="submit" class="btn btn-primary start">
                    <i class="icon-upload icon-white"></i>
                    <span><%= t('fileupload.start_upload') %></span>
                </button>
                <button type="reset" class="btn btn-warning cancel">
                    <i class="icon-ban-circle icon-white"></i>
                    <span><%= t('fileupload.cancel_upload') %></span>
                </button>
                <button type="button" class="btn btn-danger delete">
                    <i class="icon-trash icon-white"></i>
                    <span><%= t('fileupload.delete_multi') %></span>
                </button>
                <input type="checkbox" class="toggle">
            </div>
            <div class="span5">
                <!-- The global progress bar -->
                <div class="progress progress-success progress-striped active fade">
                    <div class="bar" style="width:0%;"></div>
                </div>
            </div>
        </div>
        <!-- The loading indicator is shown during image processing -->
        <div class="fileupload-loading"></div>
        <br>
        <!-- The table listing the files available for upload/download -->
        <table class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody>
        </table>
    <% end %>
<script>
  var fileUploadErrors = {
    maxFileSize: 'File is too big',
    minFileSize: 'File is too small',
    acceptFileTypes: 'Filetype not allowed',
    maxNumberOfFiles: 'Max number of files exceeded',
    uploadedBytes: 'Uploaded bytes exceed file size',
    emptyResult: 'Empty file upload result'
  };
</script>

    </div>
  </section>
</div> 
```

# c++ - C++ 11 正则表达式堆栈溢出/VS2012

> ID：15696435
> 
> 赞同：10
> 
> 时间：2013-03-29T02:27:38.737
> 
> 标签：c++, regex, visual-c++, c++11, visual-studio-2012

我正在将一些旧的 Boost 正则表达式代码转换为 C++11，我偶然发现了我的一个测试用例的问题。这是一个使用 std::regex 导致堆栈溢出异常的场景，但使用 boost::regex 可以正常工作。我没有更改正则表达式模式，并验证了该模式是我想要的。似乎这个特定的字符串输入片段导致堆栈溢出。使用 VS2012，x64 调试构建：

```
std::regex regx( "(^|\\})(([^\\{:])+:)+([^\\{]*\\{)" );

    const std::string testinput = " COLOR: #000; BACKGROUND-COLOR: #FFF; FONT-FAMILY: VERDANA, ARIAL, HELVETICA, SANS-SERIF; BACKGROUND:URL(URL(___FOO___)); BACKGROUND-2:URL(URL(___FOO___)); BORDER: 0 0 0 0; BORDER-2: 0 0 0; BORDER-3: 0 0; BORDER-4: 0PX; BORDER-5: 0.6; FILTER:PROGID:DXIMAGETRANSFORM.MICROSOFT.ALPHA(OPACITY=100); } ";
    std::smatch what;
    // this next line causes a stack overflow
    std::regex_search( testinput.cbegin(), testinput.cend(), what, regx ); 
```

查看异常后的调用堆栈，正则表达式实现中似乎存在某种类型的无限递归。我目前没有 GCC 来测试这个。我究竟做错了什么？

更新：在下面的建议之后，我将此代码粘贴到控制台应用程序 VS 2012 x64 调试中，我得到了堆栈溢出。如果我将它更改为 x64 版本，或者 Win32 调试或发布它运行良好。啊？？？我是否需要重新安装 VS 和/或平台 SDK？我在Win7 x64上。

更新#2：有点相关的帖子： [为什么 std::regex_iterator 会导致此数据的堆栈溢出？](https://stackoverflow.com/q/12828079/882436) 我想如果我重写我的正则表达式，它可能会有所帮助。我仍然不确定为什么位数很重要。以及为什么它适用于其他人，但不适用于我的系统。叹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:26:03.620

我已经用 x64 调试版本复制了这个，我相信这是一个真正的**堆栈溢出**。

当您将堆栈大小更改为 10MB 左右（链接器命令行选项`/STACK:"10000000"`）时，它将正常工作。

# java - Apache Sling 资源解析器

> ID：15696439
> 
> 赞同：1
> 
> 时间：2013-03-29T02:28:09.303
> 
> 标签：java, jackrabbit, sling

ResourceResolver 到底是什么？更重要的是，你如何使用它？我正在努力寻找一个简单的例子。因此，假设我有一条路径并想使用资源解析器来查看该路径是否解析为资源。我该怎么做？我知道这是错误的，但如果有人可以纠正这个问题，那将会有所帮助。

```
Iterator<String> nodeSample = getResource("title");
return nodeSample 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:50:58.433

`RequestResolver`引用[javadoc](http://sling.apache.org/apidocs/sling5/org/apache/sling/api/resource/ResourceResolver.html)定义了可用于解析`Resource`对象的服务 API。

您通常`SlingServlet`通过调用`request.getResourceResolver()`或在`resourceResolver`变量下的脚本（例如 JSP 脚本）中访问它。有关脚本变量的更多详细信息，请参阅[Sling wiki 中的脚本变量](https://cwiki.apache.org/SLING/scripting-variables.html)。

掌握它后，您可以使用它来访问内容树中的资源：

```
Resource resource = requestResolver.getResource("/content/my/resource");
if ( resource != null ) // bingo! 
```

为了显示资源的属性，我通常将其调整为 a`ValueMap`然后提取属性

```
ValueMap properties = resource.adaptTo(ValueMap.class);
String title = properties.get("jcr:title", String.class); 
```

# javascript - 使用 PhoneGap、AJAX 和 JQuery Mobile 连接到 MySQL 数据库

> ID：15696440
> 
> 赞同：5
> 
> 时间：2013-03-29T02:28:19.137
> 
> 标签：javascript, jquery, sql, cordova, jquery-mobile

我在一个开发 Android 应用程序的团队中，该应用程序将很大程度上依赖于远程数据库的使用。我们正在使用 PhoneGap 和 Jquery Mobile，并且一直在尝试使用 AJAX 和 JSON 调用连接到我们的 MySQL 数据库。目前，我们在测试阶段遇到了麻烦，即通过 MySQL Workbench 从 mySQL / 输入中提取硬编码的“Ted”用户来验证我们是否有连接。

从我们收集到的信息来看，数据传输的过程是这样的：

1.  在我们的 html 文件中，我们有一个

    ```
    <script type="text/javascript" src="Connect.js"></script> 
    ```

    ^ 哪个应该运行 Connect.js 脚本，对吗？那么从那里开始运行 Connect.js 吗？

2.  Connect.js 运行，将其连接到托管在外部 Web 服务上的 ServerFile.php，允许它运行 PHP 以连接到 MySQL 数据库并提取信息。

    ```
    //run the following code whenever a new pseudo-page is created
    $('#PAGENAME').live('pageshow', function(event)) {

        // cache this page for later use (inside the AJAX function)
        var $this = $(this);

        // make an AJAX call to your PHP script
        $.getJSON('http://www.WEBSITENAME.com/ServerFile.php', function (response) {

            // create a variable to hold the parsed output from the server
            var output = [];

            // if the PHP script returned a success
            if (response.status == 'success') {

                // iterate through the response rows
                for (var key in response.items) {

                     // add each response row to the output variable
                     output.push('<li>' + response.items[key] + '</li>');
                }

            // if the PHP script returned an error
            } else {

                // output an error message
                output.push('<li>No Data Found</li>');
            }

            // append the output to the `data-role="content"` div on this page as a
            // listview and trigger the `create` event on its parent to style the
            // listview
            $this.children('[data-role="content"]').append('<ul data-role="listview">' + output.join('') + '</ul>').trigger('create');
        });
    }); 
    ```

这是ServerFile.php。这应该连接到 MySQL 数据库，生成 Select 语句，然后将输出发送到以 JSON 格式编码的浏览器。

```
<?php

//session_start();
$connection = mysql_connect("csmadison.dhcp.bsu.edu", "clbavender", "changeme"); 
$db = mysql_select_db("cs397_clbavender", $connection); 

//include your database connection code
// include_once('database-connection.php');

//query your MySQL server for whatever information you want
$query = mysql_query("SELECT * FROM Users WHERE Username ='Ted'", $db) or trigger_error(mysql_error());

//create an output array
$output = array();

//if the MySQL query returned any results
if (mysql_affected_rows() > 0) {

    //iterate through the results of your query
    while ($row = mysql_fetch_assoc($query)) {

        //add the results of your query to the output variable
        $output[] = $row;
    }

    //send your output to the browser encoded in the JSON format
    echo json_encode(array('status' => 'success', 'items' => $output));

} else {

    //if no records were found in the database then output an error message encoded in the JSON format
    echo json_encode(array('status' => 'error', 'items' => $output));
}
?> 
```

然而，这里什么也没显示。我们从这里做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:25:22.870

先说第一件事。尝试确定问题出在哪里，服务器端还是客户端。

打印出您的数据库查询和编码的 json 可能很有用。如果您正在创建一个简单的 API 服务，您应该能够使用浏览器输入[http://www.WEBSITENAME.com/ServerFile.php](http://www.WEBSITENAME.com/ServerFile.php)并查看输出结果。

使用 echo 用 php 打印东西。

如果一切正常，是时候打印出您从服务器收到的 javascript 响应，看看有什么问题。

使用 console.log 用 javascript 打印东西。日志应该出现在 eclipse 的 logcat 部分（因为您正在开发 android 应用程序）

# ios - iOS中需要将UITextField的字符输入限制为两个字符

> ID：15696446
> 
> 赞同：2
> 
> 时间：2013-03-29T02:29:09.660
> 
> 标签：ios, uitextfield

我正在开发一个具有多个 UITextFields 的应用程序。对于一个 UITextField，我已将其委托设置为 self 并调用委托方法：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

完成一项特定的任务。但是，我在同一个屏幕上有其他 UITextField，我想做一些完全不同的事情，在这种情况下，将输入的字符数限制为两个。不幸的是，我在网上看到的唯一可能的方法是使用上述方法进行限制。如果我已经在使用上述方法为另一个 UITextField 做一些完全不同的事情，这仍然可能吗？如果是这样，怎么做？

作为记录，这是我当前的委托方法实现：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    if([[string stringByTrimmingCharactersInSet:[NSCharacterSet controlCharacterSet]]
        isEqualToString:@""])
        return YES;

    NSString *previousValue = [[[textField.text stringByTrimmingCharactersInSet:[[NSCharacterSet decimalDigitCharacterSet] invertedSet]] stringByReplacingOccurrencesOfString:@"." withString:@""] stringByReplacingOccurrencesOfString:@"," withString:@""];
    string = [string stringByTrimmingCharactersInSet:[[NSCharacterSet decimalDigitCharacterSet] invertedSet]];
    NSString *modifiedValue = [NSString stringWithFormat:@"%@%@", previousValue, string];

    if ([modifiedValue length] == 1) {

        modifiedValue = [NSString stringWithFormat:@"0.0%@", string];

    }

    else if ([modifiedValue length] == 2) {

        modifiedValue = [NSString stringWithFormat:@"0.%@%@", previousValue, string];

    }

    else if ([modifiedValue length] > 2) {

        modifiedValue = [NSString stringWithFormat:@"%@.%@",[modifiedValue substringToIndex: modifiedValue.length-2],[modifiedValue substringFromIndex:modifiedValue.length-2]];

    }

    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    NSDecimalNumber *decimal = [NSDecimalNumber decimalNumberWithString:modifiedValue];
    modifiedValue = [formatter stringFromNumber:decimal];
    textField.text = modifiedValue;

    return NO;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:38:33.050

将两个文本字段用作类中的属性。例如，这是您的控制器的接口。

```
@interface YourViewController : UIViewContoller <UITextFieldDelegate> {
}

/*
* other properties
*/
@property(nonatomic, retain) UITextField *firstRestrictionTextField;
@property(nonatomic, retain) UITextField *yourSecondTextField;

@end 
```

在您的实现中，两个文本字段都应设置为您的类的委托：

```
self.firstRestrictionTextField.delegate = self;
self.yourSecondTextField.delegate = self; 
```

当您实现委托方法时：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
if (textField == self.firstRestrictionTextField) {
// Do stuff you need in first textfield
}
if (textField == self.yourSecondTextField) {
// Do stuff for your second textfield
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T02:36:51.900

在你的类中创建一个`UITextField`属性：

```
@interface MyObject ()
@property (nonatomic, retain) UITextField *textField1;
@end 
```

然后在委托方法中，只需检查文本字段是否与您保存的相同：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    . . .

    if (textField == [self textField1]) {
        // do stuff here
    } else {
        // do stuff here for other text fields
    }

    . . .
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T02:35:13.600

您想使用相同的方法。见第一部分：

`- (BOOL)textField:(UITextField *)textField`

该方法允许您识别哪个 textField 正在触发此委托方法。然后你只需要做一些逻辑来为不同的 textFields 执行不同的任务。

像：

```
if (textField1){action 1}
else if (textField2){action 2}
else {default action} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T02:42:06.307

声明一个文本字段：

```
 @property(nonatomic, strong)UITextField *textField1;
    @property(nonatomic, strong)UITextField *textField2;
    //etc 
```

给它一个标签：

```
self.textField1.tag = 1;//or whatever
self.textField2.tag = 2;//or whatever
//etc 
```

然后在 中`textField:shouldChangeCharactersInRange:`，您可以进行不同的测试和行为：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

if(textField.tag == 1){
//textfield1
}
//etc
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-29T02:35:49.123

您可以为每个 UITextField**设置不同的标签，并获取特定 UITextField 的****textField.tag**以定义委托方法中的行为

# c++ - 如何将字符串转换为长长

> ID：15696453
> 
> 赞同：0
> 
> 时间：2013-03-29T02:29:54.027
> 
> 标签：c++, string, long-integer, substr

我找到的所有解决方案似乎都使​​用了环礁，但是当我有一个字符串时它需要 char 。例如，我读取输入 $100，将其放入字符串并检查第一个字符是否为 $。然后我需要将子字符串转换为 long long 类型。

```
int main() {

    long long price;
    string priceStr;

    cin>>priceStr;
    if (priceStr[0] == '$') {
        price = convertToLongLong(priceStr.substr(1));//how?
    }else{
        cerr<<"error!";
    }

} 
```

我的意见是：$100 谢谢！

编辑：也许我没有以正确的方式做到这一点。我的输入流是 ID 名称 $price #quantity ，如下所示，我需要所有数字都很长，并检查 $ 和 # 叹息是否在正确的位置：

1 台电视 $1500 #50

2 笔记本电脑 $2000 #30

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:32:30.743

采用[`scanf`](http://www.cplusplus.com/reference/cstdio/scanf/)

scanf("$%lld", &price);

**编辑**

参见上面的参考。格式化输入的快速简便的方法。

```
if(scanf("%lld %s $%lld #%lld",
  &id, name, &price, &quantity)!=4) fprintf(stderr, "error!"); 
```

否则，请参阅其他答案以获取更常见/标准的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:16:29.157

如果 STL 是您唯一的选择，您有几个选择：

```
int main() {

    long long price;
    string priceStr;

    cin>>priceStr;
    if (priceStr[0] == '$') {
        std::istringstream is (priceStr.begin() + 1, priceStr.end());
        is >> price;
        if (!is)
            cerr << "fail!" << endl;
    }else{
        cerr<<"error!";
    }
} 
```

如果您可以使用 Boost：

```
int main() {

    long long price;
    string priceStr;

    cin>>priceStr;
    if (priceStr[0] == '$') {
        price = boost::lexical_cast<long long>(&*priceStr.begin() + 1, priceStr.size() -1); // throws if it cannot convert.
    }else{
        cerr<<"error!";
    }
} 
```

请注意，在第二个示例中没有边界检查，您肯定希望在执行上面显示的操作之前实现它。（即检查 priceStr.size() >= 2）。

正如其他人所建议的那样，您可以使用 的变体`stoll`，但请注意这些函数不能很好地报告错误，如果有的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:36:43.273

阅读字符串[http://www.cplusplus.com/reference/string/string/的文档](http://www.cplusplus.com/reference/string/string/)

有一种非常明显的方法可以从那里的 std::string 获取 char*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-29T07:24:40.507

尝试使用 stoll

请参考[http://www.cplusplus.com/reference/string/stoll/](http://www.cplusplus.com/reference/string/stoll/)

我从来没有试过这个

# javascript - 从返回 json 数据对象的 javascript 调用 play 2.1 控制器函数

> ID：15696458
> 
> 赞同：0
> 
> 时间：2013-03-29T02:30:57.530
> 
> 标签：javascript, jquery, json, playframework, playframework-2.0

如何让 play 2.1 控制器函数执行捕获的外部 url 并将 json 数据对象返回给 javascript。

1.  首先 InputStream 没有打开外部 url。错误说没有协议
2.  play 不喜欢 JSONObject 作为回报。

代码正在进行中 -

Javascript

```
$.ajax({
        url: "/documents/getjsontext/" + talksUrl ,
        type: 'GET',
        data: "",
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function(data){ do_this(data);},
        error: function () {alert("Error in Ajax Call");}
    }); 
```

Route- /documents/acontext/:jsonurl controllers.Class.acontext(jsonurl: String)

```
public static JSONObject acontext(String jsonurl) {

    InputStream is = new URL(jsonurl).openStream();

    try {
      BufferedReader rd = new BufferedReader(new InputStreamReader(is, Charset.forName("UTF-8")));
      String jsonText = readAll(rd);
      JSONObject json = new JSONObject(jsonText);
      return json;
    } finally {
      is.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T12:03:23.587

首先你需要添加一个 JsRoutes 类。我将其命名为“myJsRoutes”

```
public class CommonController extends Controller{

    public static Result javascriptRoutes() {
        response().setContentType("text/javascript");
        return ok(
            Routes.javascriptRouter("myJsRoutes",
                routes.javascript.Controller_name.function()
                    );
      }
} 
```

现在您的 js 路由已定义。并且“myJsRoutes”可以进一步用于在您的 scala 文件中调用：

```
myJsRoutes.controllers.Controller_name.function_name().ajax({
 //your ajax handlers here
}); 
```

# html - 完全适合 Div 的完美宽度

> ID：15696460
> 
> 赞同：1
> 
> 时间：2013-03-29T02:31:20.750
> 
> 标签：html, css, layout, padding, percentage

我有盒子漂浮在一个类似于 SO Chat 的 div 中，除了我正在为我自己的网站制作一个盒子，用户可以在其中创建自己的聊天室，页面上的这些盒子代表聊天室，我想为它们制作一个完美的宽度所以它们将完全适合页面，而边缘没有任何多余的空间。它们所在的主要 div 是 965px，其左侧和右侧的填充为 15px，宽度为 935px，我将宽度从 965px 减小到 935px，以保持总宽度为 965px。

要了解我的场景，请查看 A [Fiddle](http://jsfiddle.net/VbSau/)

正如你所看到的，在 div 的右端有一些空间，我不希望这样，我希望聊天框完全适合像素的整个宽度，并记住要考虑到边框也算作宽度。如果有人可以帮助我，那就太好了！

CSS 样式

```
body {
    width:1000px;
}

#Body {
    width:935px;
    padding:15px;
    height:500px;
    background-color:#F1F1F1;
    margin:0 auto;
}
.ChatRoom {
    float:left;
    width:223px;
    height:200px;
    border:1px solid #666;
    cursor:pointer;
    margin-right:8.75px;
    background-color:#FFF;
}
.ChatTitle {
    width:100%;
    height:30px;
    line-height:30px;
    font-size:13px;
    font-weight:bold;
    text-align:center;
    background-color:#C6D6D9;
    border-bottom:2px solid #9C0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:40:31.547

您可以使用`box-sizing:border-box`. 它所做的是包括宽度`padding`和`border`大小，而不是添加到它的正常行为（这使得`<div>`溢出到下一行）。我在`div.Inner`这里添加了一个有边框和白色背景的，而`.ChatRoom`用于提供空间的`padding`.

[jsFiddle](http://jsfiddle.net/J86HN/)

**HTML**

```
<div class="ChatRoom">
    <div class="Inner">
        <div class="ChatTitle">My Chat Room</div>
    </div>
</div> 
```

**CSS**

```
.ChatRoom {
    float:left;
    width:25%;
    height:200px;
    padding:8px;
    box-sizing:border-box;
}
.ChatRoom .Inner {
    border:1px solid #666;
    box-sizing:border-box;
    background-color:#FFF;
    cursor:pointer;
    height:100%;
} 
```

## 没有`border-box`

`border-box`事实证明，使用`margin`on也很容易`.Inner`。

[jsFiddle](http://jsfiddle.net/gaZSP/)

```
.ChatRoom {
    float:left;
    width:25%;
    height:200px;
}
.ChatRoom .Inner {
    border:1px solid #666;
    margin:8px;
    background-color:#FFF;
    cursor:pointer;
    height:100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T02:47:05.443

[http://jsfiddle.net/DyTT8/1/](http://jsfiddle.net/DyTT8/1/)

最后一个 div 需要重置边距，否则它将添加到 15px 的填充。我通过给它`class="last`并制作`.ChatRoom`div 225px 来做到这一点；这将为您提供适当的间距。

您还可以将 div 放在无序列表中，并使用 li:last-child 定位最后一个 div 并以这种方式删除边距。

# python - 将 Python 脚本导入另一个？

> ID：15696461
> 
> 赞同：76
> 
> 时间：2013-03-29T02:31:25.240
> 
> 标签：python, python-2.7, import

我正在阅读 Zed Shaw 的 Learn Python The Hard Way，我正在学习第 26 课。在本课中，我们必须修复一些代码，并且代码从另一个脚本调用函数。他说我们不必导入它们来通过测试，但我很好奇我们将如何做到这一点。

[课程链接](http://learnpythonthehardway.org/book/ex26.html)| [链接到代码以进行更正](http://learnpythonthehardway.org/book/exercise26.txt)

以下是调用先前脚本的特定代码行：

```
words = ex25.break_words(sentence)
sorted_words = ex25.sort_words(words)

print_first_word(words)
print_last_word(words)
print_first_word(sorted_words)
print_last_word(sorted_words)
sorted_words = ex25.sort_sentence(sentence)
print sorted_words
print_first_and_last(sentence)
print_first_a_last_sorted(sentence) 
```

### 要更正的代码：

*   这是课程中的代码，正在被引用
    *   不要编辑问题以更正代码

```
def break_words(stuff):
    """This function will break up words for us."""
    words = stuff.split(' ')
    return words

def sort_words(words):
    """Sorts the words."""
    return sorted(words)

def print_first_word(words)
    """Prints the first word after popping it off."""
    word = words.poop(0)
    print word

def print_last_word(words):
    """Prints the last word after popping it off."""
    word = words.pop(-1
    print word

def sort_sentence(sentence):
    """Takes in a full sentence and returns the sorted words."""
    words = break_words(sentence)
    return sort_words(words)

def print_first_and_last(sentence):
    """Prints the first and last words of the sentence."""
    words = break_words(sentence)
    print_first_word(words)
    print_last_word(words)

def print_first_and_last_sorted(sentence):
    """Sorts the words then prints the first and last one."""
    words = sort_sentence(sentence)
    print_first_word(words)
    print_last_word(words)

print "Let's practice everything."
print 'You\'d need to know \'bout escapes with \\ that do \n newlines and \t tabs.'

poem = """
\tThe lovely world
with logic so firmly planted
cannot discern \n the needs of love
nor comprehend passion from intuition
and requires an explantion
\n\t\twhere there is none.
"""

print "--------------"
print poem
print "--------------"

five = 10 - 2 + 3 - 5
print "This should be five: %s" % five

def secret_formula(started):
    jelly_beans = started * 500
    jars = jelly_beans \ 1000
    crates = jars / 100
    return jelly_beans, jars, crates

start_point = 10000
beans, jars, crates == secret_formula(start-point)

print "With a starting point of: %d" % start_point
print "We'd have %d jeans, %d jars, and %d crates." % (beans, jars, crates)

start_point = start_point / 10

print "We can also do that this way:"
print "We'd have %d beans, %d jars, and %d crabapples." % secret_formula(start_pont

sentence = "All god\tthings come to those who weight."

words = ex25.break_words(sentence)
sorted_words = ex25.sort_words(words)

print_first_word(words)
print_last_word(words)
.print_first_word(sorted_words)
print_last_word(sorted_words)
sorted_words = ex25.sort_sentence(sentence)
prin sorted_words

print_irst_and_last(sentence)

   print_first_a_last_sorted(senence) 
```

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-03-29T02:37:33.137

这取决于第一个文件中的代码的结构。

如果它只是一堆函数，比如：

```
# first.py
def foo(): print("foo")
def bar(): print("bar") 
```

然后你可以导入它并使用如下功能：

```
# second.py
import first

first.foo()    # prints "foo"
first.bar()    # prints "bar" 
```

或者

```
# second.py
from first import foo, bar

foo()          # prints "foo"
bar()          # prints "bar" 
```

或者，导入first.py 中定义的*所有名称：*

```
# second.py
from first import *

foo()          # prints "foo"
bar()          # prints "bar" 
```

**注意：这假设两个文件位于同一目录中。**

当您想从其他目录或包中的模块导入名称（函数、类等）时，它会变得有点复杂。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-09-10T11:24:56.547

值得一提的是（至少在 python 3 中），为了让它工作，你必须有一个`__init__.py`在同一目录中命名的文件。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-09-14T08:39:47.830

以下对我有用，它似乎也很简单：

假设我们要导入一个脚本 ./data/get_my_file.py 并希望访问其中的 get_set1() 函数。

```
import sys
sys.path.insert(0, './data/')
import get_my_file as db

print (db.get_set1()) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-03T17:02:51.243

我强烈推荐阅读 SciPy-lectures 组织中的一个讲座：

[https://scipy-lectures.org/intro/language/reusing_code.html](https://scipy-lectures.org/intro/language/reusing_code.html)

它解释了所有评论的疑问。

但是，可以使用以下代码轻松添加新路径并避免重复：

```
import sys
new_path = 'insert here the new path'

if new_path not in sys.path:
    sys.path.append(new_path)
import funcoes_python #Useful python functions saved in a different script 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-23T10:44:38.497

希望这个作品

```
def break_words(stuff):
    """This function will break up words for us."""
    words = stuff.split(' ')
    return words

def sort_words(words):
    """Sorts the words."""
    return sorted(words)

def print_first_word(words):
    """Prints the first word after popping it off."""
    word = words.pop(0)
    print (word)

def print_last_word(words):
    """Prints the last word after popping it off."""
    word = words.pop(-1)
    print(word)

def sort_sentence(sentence):
    """Takes in a full sentence and returns the sorted words."""
    words = break_words(sentence)
    return sort_words(words)

def print_first_and_last(sentence):
    """Prints the first and last words of the sentence."""
    words = break_words(sentence)
    print_first_word(words)
    print_last_word(words)

def print_first_and_last_sorted(sentence):
    """Sorts the words then prints the first and last one."""
    words = sort_sentence(sentence)
    print_first_word(words)
    print_last_word(words)

print ("Let's practice everything.")
print ('You\'d need to know \'bout escapes with \\ that do \n newlines and \t tabs.')

poem = """
\tThe lovely world
with logic so firmly planted
cannot discern \n the needs of love
nor comprehend passion from intuition
and requires an explantion
\n\t\twhere there is none.
"""

print ("--------------")
print (poem)
print ("--------------")

five = 10 - 2 + 3 - 5
print ("This should be five: %s" % five)

def secret_formula(start_point):
    jelly_beans = start_point * 500
    jars = jelly_beans / 1000
    crates = jars / 100
    return jelly_beans, jars, crates

start_point = 10000
jelly_beans, jars, crates = secret_formula(start_point)

print ("With a starting point of: %d" % start_point)
print ("We'd have %d jeans, %d jars, and %d crates." % (jelly_beans, jars, crates))

start_point = start_point / 10

print ("We can also do that this way:")
print ("We'd have %d beans, %d jars, and %d crabapples." % secret_formula(start_point))

sentence = "All god\tthings come to those who weight."

words =  break_words(sentence)
sorted_words =  sort_words(words)

print_first_word(words)
print_last_word(words)
print_first_word(sorted_words)
print_last_word(sorted_words)
sorted_words =  sort_sentence(sentence)
print (sorted_words)

print_first_and_last(sentence)
print_first_and_last_sorted(sentence) 
```

# vba - 如何知道调用了哪个子程序的程序？在excel vba中

> ID：15696462
> 
> 赞同：1
> 
> 时间：2013-03-29T02:31:25.707
> 
> 标签：vba, excel, subroutine

我有时在子程序上有错误。子程序被许多程序调用。因此，我尝试查找调用程序以进行跨步。

顺便说一句，*用户定义的函数*可以知道调用者。
很简单。

```
MsgBox Application.Caller 
```

我们可以看到对话框和调用方单元格地址。

我想知道子程序的调用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T02:42:29.837

您可以使用**调用堆栈对话框**

例如，在下图中，proc3 被 proc2 调用，显示在调用堆栈对话框中。

![在此处输入图像描述](../Images/bd1e08a72bac3c0874ab15bdab1d3d47.png)

# performance - 我可以让这个 if else 语句更有效吗

> ID：15696463
> 
> 赞同：2
> 
> 时间：2013-03-29T02:31:28.530
> 
> 标签：performance, matlab, if-statement

任何人对比下面的 if else 功能更有效的解决方案有想法吗？这需要代码的大部分时间，所以我需要减少它。

完整的功能是

```
 function result = vre(t,r,e,n,d)
         if (e==4 && r>0)
        result = 0;
    elseif (e==4 && r==0)
        result = 1;
    elseif (e<4 && r==1)
        result = t;
    elseif (e<4 && r==2)
        result = d;            
    else
        result=n;
    end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T03:06:42.440

If this function is taking most of your processing time, it is almost certainly because you're calling it too many times. In turn, this is likely because you are calling it on each element of a vector or matrix individually. I suggest changing the function to accept matrix inputs for `e` and `r`, so you can perform all the checks at once - `matlab` is built for matrix operations, so taking advantage of those is always a good idea.

```
function result = vre(t,r,e,n,d)
#% add error checking for size of input args if desired
result = ones(size(e))*n; #% default result; next assign special cases
result(e==4 & r>0) = 0; #% note the single & for element-wise 'and'
result(e==4 & r==0) = 1;
result(e<4 & r==1) = t;
result(e<4 & r==2) = d;

end 
```

The function now returns a matrix that is the same size as the input matrices - for single elements it will work exactly the same as your current version, but for higher dimensional inputs it will work too, and probably give you a substantial speed boost.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T02:55:08.633

```
function result = vre(t,r,e,n,d)
     if (e==4) {
         if(r>0)
             result = 0;
         elseif (r==0)
             result = 1;
     }
     elseif (e<4) {
          if(r==1)
              result = t;
          elseif (r==2)
              result = d; 
     }           
    else
        result=n;
    end
end 
```

通过这种方式，您将只验证 (e==4) 和 (e<4) 一次，避免不必要的验证。

希望它能节省一些处理时间。

PS：没有测试，因为我没有安装 MatLab。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T03:10:55.687

Try this:

```
function result = vre(t,r,e,n,d)
  if (e==4)
    result = (r==0);
  elseif (e<4)
    result = (r==1)*t+(r==2)*d;
  else
    result=n;
  end
end 
```

I can't guarantee that it's more efficient (I use octave rather than matlab, so speed testing isn't going to help). But I think it will be.

# php - 在浏览器中显示来自同一源脚本的 PHP 代码

> ID：15696464
> 
> 赞同：1
> 
> 时间：2013-03-29T02:31:38.123
> 
> 标签：php

有没有办法显示`somepage.php`你去的时候的源代码`somepagesrc.php`？IOW，是否有一个 PHP 函数可以`somepagesrc.php`输出文件（或源代码）的文本内容`somepage.php`？

我知道我可以复制`somepage.php`into的内容，`somepage.html`但这并不适合我，因为我希望它是动态的，这样我就不必每次进行更改时都复制代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T02:33:11.333

也许`file_get_contents`与`header('Content-type: text/plain')`- 但强制性安全警告一起使用 - 一定要过滤文件名，这样人们就不能包含超出您意图的内容。

例如：

```
<?php

header('Content-type: text/plain');

print file_get_contents("somepage.php");

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:37:12.020

或者您可以使用`Reflection`它轻松获取函数、变量甚至注释。

[http://www.php.net/manual/en/intro.reflection.php](http://www.php.net/manual/en/intro.reflection.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T02:40:26.390

尝试使用文件操作函数轻松地将其内容作为任何文件读取:) 我不知道这是否是您正在搜索的解决方案:$

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T03:01:12.480

看看`highlight_file()`。它不仅抓取要显示的 php 源代码（如`file_get_contents()`），而且很好地格式化/着色代码以供输出。

[http://php.net/manual/en/function.highlight-file.php](http://php.net/manual/en/function.highlight-file.php)

# c++ - C++（未来版本）中是否有任何机制可以使这些事情变得现实？

> ID：15696466
> 
> 赞同：2
> 
> 时间：2013-03-29T02:31:46.257
> 
> 标签：c++, c++11

假设我有一些名为 的模板类`friendly_point`和一个名为 的用户定义类`foo`，并且`foo`有一些具有不同 arg 编号和类型的构造函数，例如`foo()`、`foo(int)`和`foo(int, char *)`。

我想知道是否有任何方法可以实现`friendly_point`模板，以便我可以编写这样的客户端代码：

```
friendly_point<foo> obj1;
friendly_point<foo> obj2(1);
friendly_point<foo> obj3(1,"abc"); 
```

更重要的是，`friendly_point`模板能否以这样一种方式实现，即它的用户可以将一些内存池连接到它，所以它提供给客户端的所有对象都来自该池？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T02:34:52.473

您已经可以做到这一点，只需子类化一个智能指针并像已经做的那样使用[完美转发。](http://thbecker.net/articles/rvalue_references/section_07.html)[示例](http://liveworkspace.org/code/4bqDKU$2)：[`emplace`](http://en.cppreference.com/w/cpp/container/vector/emplace)

```
#include <memory>
#include <utility>

template<class T>
struct friendly_ptr
{
    std::shared_ptr<T> p;
    template<typename... Params>
    friendly_ptr(Params&&... params) : p(new T(std::forward<Params>(params)...))
    {
    }

};

int main()
{
    friendly_ptr<int> p(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:49:36.743

如 Mehrdad 所示，C++11 引入了转发。

在 C++03 中，您可以尝试使用模板 ala：

```
template <typename T>
class Wrapper
{
  public:
    Wrapper() { }

    template <typename T1>
    Wrapper(const T1& t1) : t_(t1) { }

    template <typename T1\. typename T2>
    Wrapper(const T1& t1, const T2& t2) : t_(t1, t2) { }

    template <typename T1\. typename T2, typename T3>
    Wrapper(const T1& t1, const T2& t2, const T3& t3) : t_(t1, t2, t3) { }
    ...

  private:
    T t_;
}; 
```

因为在调用函数之前不会检查所有错误，所以使用占位符来表示比`T`当前支持的更多的参数是可以的。

您可以使用预处理器宏为通常充足但不是疯狂数量的参数生成此类转发函数。您可能会或可能不会发现使用 boost 预处理器库更容易做到这一点。

虽然这在简单的情况下通常就足够了，但这并不是一个通用的解决方案。具体来说——当你想传递一个非`const`参数时。你可以：

*   `const`不在参数列表中，但非`const`引用不能绑定到临时对象，因此调用者不能在准备参数值时使用很多普通表达式，或者
*   接受`const`引用然后抛弃`const`-ness，但这消除了语言的故意保护功能，并可能允许尝试更改真正的`const`变量，包括例如字符串文字 - 导致未定义的行为。

# c# - WPF 和 ObservableCollection

> ID：15696467
> 
> 赞同：4
> 
> 时间：2013-03-29T02:31:57.407
> 
> 标签：c#, .net, wpf, observablecollection

我有一个`ObservableCollection<IRuleCondition>`我想显示的 -`IRuleCondition`接口由我想显示的 2 个不同的类使用，一个`RuleCondition`只显示一个规则条件（诸如优先级、要检查的属性等信息），一个`RuleConditionGroup`可以包含 2或更多`RuleConditions`，以任何条件都可以匹配或全部匹配的方式分组。

在 XAML 中，我想知道是否有一种方法可以`ListView.ItemTemplate`根据它在`ObservableCollection<IRuleCondition>`? 还是我需要实现两个不同`ObservableCollection`的s？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T02:57:45.817

这是一个如何工作的简单示例

这就是对象的定义方式

```
public interface Person
{
    string Name { get; set; }
}

public class Manager : Person
{
    public string Name { get; set; }
}

public class Employee : Person
{
    public string Name { get; set; }
    public string ManagerName { get;set;}
} 
```

这是后面的 MainWindow 代码

```
public partial class MainWindow : Window
    {
        ObservableCollection<Person> mPeople = new ObservableCollection<Person>();

        public ObservableCollection<Person> People
        {
            get
            {
                return mPeople;
            }
        }

        public MainWindow()
        {
            DataContext = this;
            mPeople.Add( new Employee{ Name = "x" , ManagerName = "foo"});
            mPeople.Add( new Manager { Name = "y"});

            InitializeComponent();
        }
    } 
```

这是主窗口 XAML

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:WpfApplication1"
        Title="MainWindow"
        Height="350"
        Width="525">
    <Window.Resources>
        <DataTemplate  DataType="{x:Type my:Employee}">
            <StackPanel Background="Green" Width="300">
                <TextBlock Text="{Binding Name}" />
                <TextBlock Text="{Binding ManagerName}" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate  DataType="{x:Type my:Manager}">
            <StackPanel Background="Red"
                        Width="300">
                <TextBlock Text="{Binding Name}" />
            </StackPanel>
        </DataTemplate>

    </Window.Resources>
    <Grid>
        <ListBox ItemsSource="{Binding People}"></ListBox>
    </Grid>
</Window> 
```

如您所见，有两个数据模板，一个用于经理，一个用于员工

![在此处输入图像描述](../Images/5d547d4dd3646fc4cdadb918c6e27ad3.png)

这就是糟糕的输出的样子。请注意与经理相比，员工显示的绿色和红色背景以及额外字段

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T02:38:25.413

只需在“资源”部分定义两个不同的 DataTemplate，一个用于每个 RuleCondition 类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T02:57:37.893

1）创建两个不同的数据模板，就像你说你已经完成的那样。2）创建一个自定义的[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)来选择合适的模板。

您的其中一条评论指出您的 DataTemplateSelector 出现错误。验证您是否正确实现了该类，也许粘贴您的实现。它应该相当小且简单。

# c - c socket文件传输

> ID：15696474
> 
> 赞同：2
> 
> 时间：2013-03-29T02:33:02.263
> 
> 标签：c, file, sockets, tcp, download

首先让我说这是一项家庭作业，我不是交流程序员。我已经为此工作了几天，但我被困住了。我已经从头到尾阅读了 beej 指南，并且已经在谷歌上搜索了一个星期，是时候寻求帮助了。我有一个客户端-服务器 TCP 套接字应用程序，可以按预期发送和接收消息，现在我需要实现简单的文件上传/下载功能。

下面的代码几乎可以工作，但它在复制文件的开头添加了 4 个字节，两个不可打印字符后跟 \00\00，客户端不再响应。

客户端使用 select 命令通过非阻塞套接字连接。

我知道有很多改进的空间，但有人可以帮助我开始吗？

// 服务器

```
void put (int sockfd, char *localfile) {

    // Get file Size
    FILE *file;
    int size;

    file = fopen(localfile, "rb");
    fseek(file, 0, SEEK_END);
    size = ftell(file);
    fseek(file, 0, SEEK_SET);

    //Send file Size
    write(sockfd, &size, sizeof(int));

    //Send file as Byte Array
    char send_buffer[size];

    memset(send_buffer, 0, sizeof(send_buffer));
    //while(!feof(file)) {
    //    fread(send_buffer, 1, sizeof(send_buffer), file);
    //    write(sockfd, send_buffer, sizeof(send_buffer));
    //    memset(send_buffer, 0, sizeof(send_buffer));
    //}

    int sent;

    while((sent = fread(send_buffer, sizeof(char), sizeof(send_buffer), file)) > 0)
    {
        if(send(sockfd, send_buffer, sent, 0) < 0)
        {
            fprintf(stderr, "[Server] ERROR: Failed to send file %s. (errno = %d)\n", localfile, errno);
            break;
        }
        memset(send_buffer, 0, sizeof(send_buffer));
    }
    fclose(file);
} 
```

//客户

```
void get(int sockfd, char *remotefile) {

    FILE *file;
    int size;

    //Read file Size
    read(sockfd, &size, sizeof(int));

    //Read file Byte Array
    char p_array[size];
    memset(&p_array, 0, sizeof(p_array));

    read(sockfd, p_array, size);

    //Convert it Back into file
    file = fopen(remotefile, "wb");
    fwrite(p_array, 1, sizeof(p_array), file);
    fclose(file);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T02:54:14.923

您在读取套接字时忽略读取计数，并假设每次读取都填满缓冲区，这是常见的错误。你不能这样假设。

你的发送循环不会犯这个错误。因此，将其用作模型，但将其重做接收以便使用`read()`而不是`fread()`. 然后您应该看到不需要分配文件大小的缓冲区，因此不需要在文件之前发送文件大小，除非您计划保持连接打开以用于其他目的。

也没有任何`memset()`电话的理由。

# java - 如何在不专门调用它们的情况下运行 java 小程序的所有方法？

> ID：15696478
> 
> 赞同：-1
> 
> 时间：2013-03-29T02:33:34.723
> 
> 标签：java, applet, keyevent

我刚刚开始通过小程序创建一个门户游戏（是的，我知道它已经完全过时了，我应该使用 swing blah blah blah），到目前为止我只遇到了一个问题。浏览器/appletviewer 只会自动调用paint 和init。如果我想调用一个需要 keyevent 的方法，那是不可能的，因为 init 没有收到任何东西，而 paint 只收到了一个 Graphic。因此我不能调用方法thinkerbox，这很重要。到目前为止，这是我的代码（分为两个类）：

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;

public class portal extends Applet
{

public Image stickA;
public int x = 90;
public int y = 20;

public void init()
{
    stickA = getImage( getDocumentBase(), "stick.jpg" );
}

public void thinkerbox( Graphics screen, KeyEvent e )
{
    addKeyListener(new keyaction());
    keyaction asdf = new keyaction();
    asdf.useKeys( e, screen );
}

public void moveRight( Graphics screen )
{
    addKeyListener(new keyaction());
    screen.setColor( Color.WHITE );
    screen.fillRect( x, y, 100, 100 );
    x += 10;
    paint( screen );
}

public void moveLeft( Graphics screen )
{
    screen.setColor( Color.WHITE );
    screen.fillRect( x, y, 100, 100 );
    x -= 10;
    paint( screen );
}

public void moveUp( Graphics screen )
{
    screen.setColor( Color.WHITE );
    screen.fillRect( x, y, 100, 100 );
    y += 10;
    paint( screen );
}

public void moveDown( Graphics screen )
{
    screen.setColor( Color.WHITE );
    screen.fillRect( x, y, 100, 100 );
    y -= 10;
    paint( screen );
}

public void paint( Graphics screen )
{
    setBackground( Color.WHITE );

    screen.setColor( Color.RED ); 
    screen.fillOval( 20, 20, 40, 80 ); //red portal1
    screen.fillOval( 200, 200, 40, 80 ); //red portal2

    screen.drawImage( stickA, x, y, 100, 100, this );
}
} 
```

第二个：

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;

public class keyaction extends KeyAdapter
{

public void useKeys( KeyEvent e, Graphics screen )
{
    int keycode = e.getKeyCode();
    portal p = new portal();

    p.thinkerbox( screen, e );

    if( keycode == KeyEvent.VK_LEFT )
    {
        p.moveLeft( screen );
    }
    else if( keycode == KeyEvent.VK_RIGHT )
    {
        p.moveRight( screen );
    }
    else if( keycode == KeyEvent.VK_UP )
    {
        p.moveUp( screen );
    }
    else if( keycode == KeyEvent.VK_DOWN )
    {
        p.moveDown( screen );
    };
}
} 
```

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:46:44.333

建议：

1.  是的，使用 Swing。你没有理由不这样做。
2.  使用键绑定而不是 KeyListener。
3.  在绑定操作中调用您的移动方法。
4.  让你的这些方法改变你的类的状态——改变一个或多个类字段的值。
5.  然后打电话`repaint()`
6.  让您的绘图 JComponent 的`paintComponent(Graphics g)`方法使用类字段来决定在哪里绘制什么。

# apache-storm - Storm中一批多少元组是合理的？

> ID：15696480
> 
> 赞同：0
> 
> 时间：2013-03-29T02:33:40.757
> 
> 标签：apache-storm

我是Storm的新手。当我使用教程示例尝试 trident 时，它们通常是一批中的极少量元组（通常不超过 10 个）。Trident 旨在提供高吞吐量，每秒数百万条消息。所以我想问一下，一批中有多少个元组在现实世界中是合理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:46:43.597

这个问题没有直接的答案。这完全取决于您的工作负载以及您正在运行的拓扑类型。一旦你有了所需的拓扑，你就可以查看整体吞吐量指标并继续增加批量大小，直到你开始看到一些性能问题并对其进行调试。如果这只是由于您的处理结构的方式而您无法进一步改进它，那么您可以接受比这更小的批量大小。

来自： [https ://groups.google.com/forum/?fromgroups=#!topic/storm-user/IfMR-kHvkBg](https://groups.google.com/forum/?fromgroups=#!topic/storm-user/IfMR-kHvkBg)

# java - 试图在我的 jar 文件中执行一个文件

> ID：15696492
> 
> 赞同：0
> 
> 时间：2013-03-29T02:35:01.953
> 
> 标签：java, jar

我正在尝试执行一个 pdf 文件，该文件包含在我的 jar 文件中。我尝试了这段代码，但它不起作用：

```
File afile =new File(strs+"o.jpg");
Desktop.getDesktop().open(afile); 
```

strs 是 jar 文件的路径和其中的目录 strs="C:\Users\Buba\Documents\NetBeansProjects\done\dist\done.jar\done\images\"

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:51:56.460

你必须：

1.  打开pdf作为资源
2.  读取文件
3.  将其写入物理临时位置
4.  从临时位置执行文件

# .net - 如何将 const wchar_t* 转换为 System::String？

> ID：15696496
> 
> 赞同：6
> 
> 时间：2013-03-29T02:35:35.450
> 
> 标签：.net, string, c++-cli, wchar-t

我需要将我的 SHA1 (wchar_t*) 转换为普通的 String^ 以便在某个函数中使用它。有任何想法吗？我尝试了谷歌，但所有结果都与我的问题完全相反。:\

注意：我正在使用 C++.NET 框架和 Windows 窗体应用程序

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T02:39:33.443

使用构造函数；像这样：

```
const wchar_t* const pStr1 = ...;
System::String^ const str1 = gcnew System::String(pStr1);

const char* const pStr2 = ...;
System::String^ const str2 = gcnew System::String(pStr2); 
```

如果您使用标准 C++ 字符串类 (`std::wstring`或)，则可以使用该方法`std::string`获取指针。`c_str()`你的代码可能是

```
const std::wstring const std_str1 = ...;
System::String^ const str1 = gcnew System::String(std_str1.c_str()); 
```

请参阅[System.String和](http://msdn.microsoft.com/en-us/library/6y4za026.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1)[此处](http://msdn.microsoft.com/en-us/library/system.string.string.aspx)的广泛讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:32:44.837

如果在执行 Dan 的解决方案时遇到错误`cannot convert parameter 1 from 'std::string' to 'const wchar_t *'`，那么您提出了错误的问题。与其问如何转换`wchar_t*`为`String^`，不如问如何转换`std::string`为`String^`。

使用内置`c_str`函数从 中获取一个普通`char*`的`std::string`，并将其传递给构造函数。

```
std::string unmanaged = ...;
String^ managed = gcnew String(unmanaged.c_str()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T20:24:59.463

你也可以试试：

```
#include <msclr\marshal_cppstd.h>

...

String^ managedString = msclr::interop::marshal_as<String^>(/* std::string or wchar_t * or const wchar_t * */); 
```

您可以参考[C++ 中的编组概述以](http://msdn.microsoft.com/en-us/library/bb384865.aspx)了解您可以使用的所有受支持的类型

# json - 将 JSON 解析为冷融合

> ID：15696503
> 
> 赞同：0
> 
> 时间：2013-03-29T02:36:48.327
> 
> 标签：json, serialization, coldfusion

我有一个 jquery 第三方应用程序，它具有序列化到如下输出的嵌套列表。该列表将始终只有 2 个级别，但我无法弄清楚如何解析它。我正在使用冷融合。

列表看起来像（为可视化添加了换行符，它们不能用作分隔符）：

```
[{"id":1},
{"id":197,"children":[{"id":198},{"id":199},{"id":200}]},
{"id":2,"children":[{"id":3},{"id":4},{"id":143},{"id":6},{"id":5},{"id":7},{"id":8},{"id":9},{"id":10},{"id":11},{"id":12}]},
{"id":15,"children":[{"id":17},{"id":190},{"id":191},{"id":131},{"id":16},{"id":142},{"id":124}]},
{"id":114}] 
```

我想遍历每个 id 并转换为 parentid 和 childid，如下所示：

```
id:1   parentid: 10000 childid: 10000
id:197 parentid: 10001 childid: 10000 (new parent)
id:198 parentid: 10001 childid: 10001 (first child)
id:199 parentid: 10001 childid: 10002 (second child)
id:200 parentid: 10001 childid: 10003 (third child)
id:2   parentid: 10002 childid: 10000 (new parent) 
```

... 等等

感谢您的帮助。

* * *

编辑：下面是我想要做的代码

```
<script type="text/javascript">
$(document).ready(
    function()
    {
    var updateOutput = function(e)
    {
        var list   = e.length ? e : $(e.target),
            output = list.data('output');
        if (window.JSON) {
            output.val(window.JSON.stringify(list.nestable('serialize')));//, null, 2));
        } else {
            output.val('JSON browser support required for this demo.');
        }
    };

//this is where i need help     
var postOutline = function(output){
        $.post("something.cfc", {
        method: 'getoutline',
        output: output
        }); 
    };

    // activate Nestable for list 1
    $('#nestable3').nestable({
        group: 1
    })
   // .on('change', updateOutput);
    .on('change', postOutline);

    // output initial serialised data
    updateOutput($('#nestable3').data('output', $('#nestable-output')));

    }
);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:48:26.897

你只需要使用[`deserializeJson()`](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-79e4.html). 您不需要手动解析它。从文档：

> 描述 将 JSON（JavaScript 对象表示法）字符串数据表示转换为 CFML 数据，例如 CFML 结构或数组。

从那里你只需要使用你常用的 CFML 来处理它。

查找每个 ID 的子代很容易，因为它在数据结构中。

不幸的是，数据结构对于提取父信息并不理想。

~~我能想到的最方便的方法是使用 structFindValue() 查找当前 ID 的所有出现，然后循环查找匹配具有后代子项的条目“。然后遍历到 ID，它将是这些孩子的父 ID（如果有意义的话）。~~

（上述最初的建议不起作用，因为 structFindValue() 没有提供足够的信息）。

你需要蛮力这个，做这样的事情：

```
array = deserializeJson(json); // json is your data from the client

for (childElement in array){
    childId = childElement.id;
    for (parentElement in array){
        if (structKeyExists(parentElement, "children")){ // not all of them have children
            if (arrayFind(parentElement.children, {id=childId})){
                writeOutput("Parent of #childId# is #parentElement.id#<br>");
            }
        }
    }
} 
```

显然，这不是您需要的精确解决方案，但它显示了查找父级的技术。其他人可能会想出一种不那么笨拙的方法。

# bash - 如何加快“find . -type f -size +0 -exec ./work.sh {} \;”的吞吐量

> ID：15696504
> 
> 赞同：0
> 
> 时间：2013-03-29T02:36:49.863
> 
> 标签：bash, sed, find

调用以下命令时，我发现它运行缓慢，尽管磁盘、CPU 和内存都没有消耗太多（使用 top / iotop 检查）

```
find . -type f -size +0 -exec ./work.sh {} \; 
```

我选择了这个特殊的 find 构造，因为我有很多文件（>50k）。

work.sh里面基本上是这样的：

```
prefix=\"$filename\"";"\"$timestamp\"";"\"
SED_ARG="-e 's/^/"$prefix"/'"
zcat $1 | sed = | sed 'N;s/\n/";/' | grep -vE '"timepassed";' | eval sed "$SED_ARG" >> $logfilename 
```

有哪些方法可以分析或提高性能？我可能会等待 exec 返回每个文件，而它可能只是为下一个文件生成下一个 exec。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:55:58.563

将作业划分为块并使用 shell 作业控制运行它们。或者安装 GNU 并行，如果这将是一个日常的事情。作业控制示例：

```
cnt=1
find . -type f -size +0 |
while read fname 
do
   zcat $fname | sed = | sed 'N;s/\n/";/' | grep -vE '"timepassed";' | 
             eval sed "$SED_ARG" >> $logfilename &
   [ $(( $cnt % 10  )) -eq 0 ] && wait
   cnt=$(( $cnt + 1 ))
done
wait 
```

这一次运行十个作业。更改 10 以适合您的系统，更高的数字并不总是更好的选择。

$(( % )) 是模 - 余数 - 算术。所以当 cnt 是 10 20 30 ... $(( $cnt % 10 )) 返回零。每次该值返回零时，脚本都会调用等待。最后一个等待语句（在 done 一词下方）是在循环结束的情况下，该数字不能被 10 整除，例如 52002。这都是 bash 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T05:51:36.490

我认为您执行速度慢的一个原因是您有太多管道命令。如果我理解正确，您的管道命令链可以**大大重构**为：

```
zcat $1 | awk -v f="$filename" -v t="$timestamp" '$1 !~ "\"timepassed\";" {
             printf("\"%s\";\"%s\";\"%d\";%s\n", f, t, NR, $0)}' >> $logfilename 
```

一旦你确认上面的代码片段正在做同样的工作，你可以再次尝试你的 find 命令来查看性能。

# javascript - 使用 AJAX 发送数据

> ID：15696509
> 
> 赞同：-3
> 
> 时间：2013-03-29T02:37:59.413
> 
> 标签：javascript, php, ajax

我有不止一个问题。第一：

如何发送多个数据，包括 JS 函数：

```
$.ajax({
    type: 'POST',
    url: 'save.php',
    cache: false,
    data: {
        bla: navigator.appVersion,
        blah: navigator.platform
    }
}); 
```

第二个问题与第一个问题有关：

如何保存多个数据：

```
<?php 
    foreach($_POST['data'] as $data) {
        $bla = $data['data1'];
        $blah = $data['data2'];

        $file = "test.txt"; 
        $fh = fopen($file, 'w') or die("can't open file");

        fwrite($fh, $bla, $blah);
        fclose($fh);
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:41:16.893

使用`$_POST['bla'];`and`$_POST['blah'];`作为你的帖子变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:51:34.290

您可以使用[jQuery.param](http://api.jquery.com/jQuery.param/)来序列化您的对象/数组。

```
var data = {
   object1: {version: navigator.appVersion},
   object2: {platform: navigator.platform},
   array1: ['one', 'two', 'three']
};
$.ajax({
      type: 'POST',
      url: 'save.php',
      cache: false,
      data: jQuery.param(data),
}); 
```

你可以在php中看到数据结构并相应地解析：

```
<?php 
    print_r($_POST);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:02:36.513

玛哈巴！假设您要发布的表单中只有两个输入字段，那么您需要的只是这种类型的代码：

```
<?php
$tobewritten = "";
foreach($_POST as $data)
{
    $tobewritten.= $data . ",";
}
$tobewritten = substr($tobewritten,0,strlen($tobewritten)-1);

$file = "test.txt"; 
$fh = fopen($file, 'w') or die("can't open file");

fwrite($fh,$tobewritten);
fclose($fh);
?> 
```

如果此代码对您有所帮助并且是您问题的正确解决方案，请 5alline a3ref :)

# mysql - 混合 SQL 和 MongoDB 解决方案

> ID：15696511
> 
> 赞同：1
> 
> 时间：2013-03-29T02:38:08.377
> 
> 标签：mysql, mongodb, hybrid, nosql

我发现[了一个架构](http://gigaom.com/2013/03/28/3-shades-of-latency-how-netflix-built-a-data-architecture-around-timeliness/)和几个持久性混合架构。

我想知道是否有人有实现级别的链接，详细的文章，教程，展示了如何将 MongoDB（或 Cassandra，CouchDB）和 MySQL（任何 RDBMS）结合在一起（对于 PHP，Java 应用程序）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T22:53:13.670

我可以分享一些关于我在当前工作中是如何做到这一点的细节。

请记住，关系存储被视为遗留系统。他们拥有权威实体，我们正在将这些数据移动到 MongoDB 进行读取。展望未来，我们希望写入也转到 MongoDB，而不是关系系统。

**将数据从 MySQL 移动到 MongoDB（特别是 Wordpress）**

TL;DR - 使用触发器和存储过程

对于这种方法，我们在 MySQL 中的表上设置触发器来监视插入、更新和删除。当其中一个操作发生时，我们将触发一个存储过程，该过程将生成一个实体并将其放入充当队列的表中。

然后我们使用一个外部进程每隔几秒钟轮询一次该表。我们编写了一个存储过程来确保我们不会多次处理同一个排队项目。

外部进程（Mule ESB 流）将对从队列表读取数据的存储过程的结果进行少量转换，然后将其传递给 MongoDB。

从 Wordpress 后端发布后，可能需要 2 秒才能在 MongoDB 中将 Wordpress 帖子视为 JSON 文档。

**将数据从 SQL Server 移动到 MongoDB（方法 1）**

我使用的第一种方法是编写生成 XML 的存储过程。XML 语法在 TSQL 中有点笨拙，但它完成了工作。好处是您可以使 XML 结构任意深。

一旦您生成 XML，它就是一个跳跃和跳跃，以编写一个将 XML 转换为 JSON 的工具。然后，您可以让一个外部进程（我们再次使用 Mule）获取 XML 结果，将它们转换为 JSON，然后写入 MongoDB。

**将数据从 SQL Server 移动到 MongoDB（方法 2）**

这种方法涉及在 Visual Studio 中编写一个 C# 项目，该项目被部署为 SQL Server 中的 CLR 函数/存储过程。

这是迄今为止我最喜欢的方法，因为代码很容易编写并且在服务器上运行得非常快。您甚至可以在 CLR 函数中对结果进行序列化，然后将它们存储在临时表中 - 或者只是从存储过程中返回它们。

说服 DBA 将您的代码（可能包括 JSON 序列化程序）部署到生产 SQL Server 机器上可能很困难，但好处是非常突出的。它的性能也比 XML 方法好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:34:05.680

PHP 或 Java 应用程序将围绕对象（实体）构建。根据实体的角色和使用模型（它们被持久化和检索的频率），您可能需要为其选择合适的数据存储。例如，您可以在 RBDMS 中保存用户名密码，在 mongodb 等面向文档的数据库中保存您的参与者对象（文档、音乐、博客文章等），您可以在 redis 中保存经常使用的小对象，如文件系统层次结构。这完全取决于您的架构 - 没有现成的可用框架。

# c# - 嵌套泛型函数的类型推断

> ID：15696520
> 
> 赞同：6
> 
> 时间：2013-03-29T02:39:20.433
> 
> 标签：c#, generics, type-inference, lambda, func

我已经搜索了一些关于类型推断的信息，但我似乎无法将任何解决方案应用于我的特定问题。

我在构建和传递函数方面做了很多工作。在我看来，这似乎应该能够推断出 int 类型。我唯一能想到的是类型推断算法没有检查 lambda 返回类型。我已经剥离了不必要的逻辑以更清楚地显示问题。

```
Func<T> Test<T>(Func<Func<T>> func)
{
    return func();
} 
```

这编译：

```
Func<int> x = Test<int>(() =>
    {
        int i = 0;
        return () => i;
    }); 
```

但这会给出错误“无法从用法中推断出方法的类型参数。尝试显式指定类型参数”：

```
Func<int> x = Test(() =>
    {
        int i = 0;
        return () => i;
    }); 
```

我想我只想知道为什么它会以这种方式工作以及任何解决方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T03:06:31.340

我想说这个问题的正确答案是由 E.Lippert 在[SO 为什么不能将匿名方法分配给 var 中给出的？](https://stackoverflow.com/questions/4965576/why-cant-an-anonymous-method-be-assigned-to-var)

但是让我们玩一下你的例子：

```
Func<Func<int>> f = () =>
{
    int i = 0;
    return () => i;
};

Func<int> x = Test(f); //it compiles OK 
```

`Func<T> Test<T>(Func<Func<T>> func)`你在这里的类型推断没有问题。问题隐藏在您使用匿名 lambda 表达式，无法推断其类型。试试这个：

```
var f = () =>
{
    int i = 0;
    return () => i;
}; 
```

它给出了[Compiler Error CS0815](http://msdn.microsoft.com/en-us/library/bb384140%28v=vs.90%29.aspx)，说

> 无法将 lambda 表达式分配给隐式类型的局部变量

解释是：

> 用作隐式类型变量的初始值设定项的表达式必须具有类型。因为匿名函数表达式、方法组表达式和 null 文字表达式没有类型，所以它们不是合适的初始值设定项。隐式类型变量不能在其声明中使用 null 值初始化，尽管稍后可以为其分配 null 值。

现在让我们尝试另一件事：

```
var x = Test(() =>
{
    Func<int> f = () => 0;
    return f;
}); 
```

它也可以编译。所以你原来的例子的问题实际上是这一行：

```
return () => i; 
```

我们可以更进一步，根据 Eric Lippert 在他的回答中所说的提供另一个函数来包装它：

```
static Func<T> GetFunc<T>(Func<T> f) { return f; } 
```

现在我们可以像这样重写您的代码：

```
var x = Test(() =>
{
    int i = 0;
    return GetFunc(() => i);
}); 
```

它也有效。

但是，据我了解，这一切都是开销，您应该只提供一个显式类型。虽然这些解决方法很合适，但当您需要 lambda 时，返回一个匿名类型的对象。

# python - 如果 Windows 注册表项已存在，请签入 Python

> ID：15696521
> 
> 赞同：3
> 
> 时间：2013-03-29T02:39:21.180
> 
> 标签：python, pywin32, win32com

得到以下代码：

```
 aReg = ConnectRegistry(None,HKEY_CURRENT_USER)
aKey = OpenKey(aReg, r"SOFTWARE\Microsoft\Windows\CurrentVersion\Run", 0, KEY_WRITE)
try:   
   SetValueEx(aKey,registry_key_name,0, REG_SZ, r"" + folder + "\" + file_name) 
except EnvironmentError:                                          
    print "Encountered problems writing into the Registry..."
CloseKey(aKey)
CloseKey(aReg) 
```

如果不存在，我想添加一些检查，所以只有在没有这样的 Key 时才添加它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T02:56:16.050

从[这个](https://stackoverflow.com/questions/1343577/checking-if-a-registry-key-exists)问题我猜最好的选择是优雅地使用[`_winreg.OpenKey`](http://docs.python.org/2/library/_winreg.html#_winreg.OpenKey)和处理`WindowsError`异常，假设注册表项不存在。

```
from _winreg import *
exists = True
aReg = ConnectRegistry(None,HKEY_CURRENT_USER)
try:
    aKey = OpenKey(aReg, r"SOFTWARE\Microsoft\Windows\CurrentVersion\Run", 0, KEY_WRITE)
except WindowsError:
    exists = False

try:
    if not exists:
        SetValueEx(aKey,registry_key_name,0, REG_SZ, r"" + folder + "\" + file_name) 
except EnvironmentError:                                          
    print "Encountered problems writing into the Registry..."

CloseKey(aKey)
CloseKey(aReg) 
```

# python - 通过 Oauth 进行身份验证时 SSL 抛出错误 185090050

> ID：15696526
> 
> 赞同：8
> 
> 时间：2013-03-29T02:39:37.277
> 
> 标签：python, authentication, ssl, oauth-2.0, adsense

我正在尝试使用 Google 的 Oauth 连接到 Google adsense 并收到此错误。有什么线索可以解决吗？

有人在python中遇到过这样的问题吗？

```
 Traceback (most recent call last):
    File "get_all_saved_reports.py", line 56, in <module>
      main(sys.argv)
    File "get_all_saved_reports.py", line 36, in main
        service = sample_utils.initialize_service()
    File "/home/nish/Programs/python/google-adsense/samples/adsense/sample_utils.py", line 114, in initialize_service
        credentials = prepare_credentials()
    File "/home/nish/Programs/python/google-adsense/samples/adsense/sample_utils.py", line 95, in prepare_credentials
        credentials = run(FLOW, storage)
      File "/usr/local/lib/python2.7/dist-packages/oauth2client-1.1-py2.7.egg/oauth2client/util.py", line 128, in positional_wrapper
        return wrapped(*args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/oauth2client-1.1-py2.7.egg/oauth2client/tools.py", line 197, in run
        credential = flow.step2_exchange(code, http=http)
      File "/usr/local/lib/python2.7/dist-packages/oauth2client-1.1-py2.7.egg/oauth2client/util.py", line 128, in positional_wrapper
        return wrapped(*args, **kwargs)
      File "/usr/local/lib/python2.7/dist-packages/oauth2client-1.1-py2.7.egg/oauth2client/client.py", line 1283, in step2_exchange
        headers=headers)
      File "/usr/local/lib/python2.7/dist-packages/httplib2-0.8-py2.7.egg/httplib2/__init__.py", line 1571, in request
        (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
      File "/usr/local/lib/python2.7/dist-packages/httplib2-0.8-py2.7.egg/httplib2/__init__.py", line 1318, in _request
        (response, content) = self._conn_request(conn, request_uri, method, body, headers)
      File "/usr/local/lib/python2.7/dist-packages/httplib2-0.8-py2.7.egg/httplib2/__init__.py", line 1253, in _conn_request
        conn.connect()
      File "/usr/local/lib/python2.7/dist-packages/httplib2-0.8-py2.7.egg/httplib2/__init__.py", line 1022, in connect
        self.disable_ssl_certificate_validation, self.ca_certs)
      File "/usr/local/lib/python2.7/dist-packages/httplib2-0.8-py2.7.egg/httplib2/__init__.py", line 80, in _ssl_wrap_socket
    cert_reqs=cert_reqs, ca_certs=ca_certs)
  File "/usr/lib/python2.7/ssl.py", line 381, in wrap_socket
    ciphers=ciphers)
  File "/usr/lib/python2.7/ssl.py", line 141, in __init__
    ciphers)
ssl.SSLError: [Errno 185090050] _ssl.c:340: error:0B084002:x509 certificate routines:X509_load_cert_crl_file:system lib 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-10-02T20:13:47.950

我在使用 Python 2.7.5 的 oauth2（针对 Twitter API，而不是 Google）中遇到了这个确切的 x509 错误，并使用了 Akshay Valsa 的建议并更改了 cacerts.txt 的权限

```
chmod 644 /usr/local/lib/python2.7/dist-packages/httplib2-0.8-py2.7.egg/httplib2/cacerts.txt 
```

这解决了问题，我现在可以以普通用户身份运行我的模块，而不是 sudo 。谢谢！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-26T12:51:14.610

此问题是在加载证书文件时出现的。如果您以 root 用户运行程序，此问题将得到解决。或者您可以检查文件的权限：/usr/local/lib/python2.7/dist-packages/httplib2-0.8-py2.7.egg/httplib2/cacerts.txt，并为此文件提供必要的权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-16T05:25:49.597

就我而言，我正在运行 Django 开发服务器。如果服务器在切换到虚拟环境之前运行，我发现 [Errno 185090050] _ssl.c:345: error:0B084002:x509 certificate routines:X509_load_cert_crl_file:system lib 在我的回溯中。简而言之，我不再运行创建证书的 httplib2 版本：我可能正在运行 dist-package。(Ububtu 13.10)、Python 2.7、Django 1.62。希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T18:07:07.080

我想出了解决方案。Google OAuth 太难理解了，我不得不第一次以 sudo/root 身份运行脚本。那行得通。还要确保权限设置正确。

# image - 节点获取图像属性（高度、宽度）

> ID：15696527
> 
> 赞同：15
> 
> 时间：2013-03-29T02:39:42.030
> 
> 标签：image, node.js, image-size

我正在寻找一种从本地给定路径获取图像高度和宽度的方法。我知道 imagemagick 和 graphicsmagick，但我更喜欢一种不涉及向操作系统安装额外软件的方法。如果我可以将它保留在节点模块中，那就太棒了。

有没有人有任何想法可以帮助我？

在最坏的情况下，我将使用 IM 和 GM，但就像它所说的那样，我宁愿避开这条路。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-08-20T10:14:37.213

您可以使用[JIMP](https://www.npmjs.com/package/jimp)（JavaScript 图像处理程序）。一个完全用 JavaScript 编写的 Node 图像处理库，外部或本地依赖项为零。如果您愿意，它还有许多其他可用的图像处理选项。

```
var Jimp = require('jimp');
var image = new Jimp("./path/to/image.jpg", function (err, image) {
    var w = image.bitmap.width; //  width of the image
    var h = image.bitmap.height; // height of the image
}); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-19T21:35:10.643

您可以使用纯 JS 节点模块[https://www.npmjs.org/package/image-size](https://www.npmjs.org/package/image-size) .. 不需要安装任何额外的东西

```
var sizeOf = require('image-size');
var dimensions = sizeOf('images/funny-cats.png');
console.log(dimensions.width, dimensions.height); 
```

# symlink - 更新 cabal-install，但版本未更改

> ID：15696529
> 
> 赞同：7
> 
> 时间：2013-03-29T02:40:19.990
> 
> 标签：symlink, ghc, cabal, cabal-install

1.  目前我正在使用 cabal-install 1.16.0 我尝试更新 cabal-install 因为有人告诉我有更新版本的 ghc (7.6.1) 可用。安装结果非常成功，除了这条消息。

    警告：无法在 /Users/MyName/Library/Haskell/bin 中为 cabal 创建符号链接，因为该文件已经存在但不受 cabal 管理。如果您愿意，可以手动为此可执行文件创建符号链接。可执行文件已安装在 /Users/MyName/Library/Haskell/ghc-7.4.1/lib/cabal-install-1.16.0.2/bin/cabal

    我检查了这些位置，并且有文件。所以安装没问题。

2.  根据我收到的警告消息，我尝试通过键入此内容在 /Users/MyName/Library/Haskell/bin 中创建符号链接。

    ln -s /Users/MyName/Library/Haskell/bin /Users/MyName/Library/Haskell/ghc-7.4.1/lib/cabal-install-1.16.0.2/bin/cabal

    但它给了我简单但令人沮丧的信息。“文件已存在”

3.  所以我再次尝试，Finder 删除了现有文件。（我只是将符号链接文件移动到回收站。）但是机器给了我同样的信息。“文件已存在”

4.  结果，我仍然安装了文件夹，但没有工作 Cabal，这一直敦促我更新。（版本 1.16.0）

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-18T17:06:54.933

我意识到这个问题是 6 个月前提出的，我希望你已经找到了解决方案。我在这里发布答案以供将来参考。

你快到了。删除现有的符号链接是正确的第一步。下一步是通过执行以下操作创建新的符号链接：

> ln -s [实际/路径/to/cabal] [name_of_symlink]

您似乎颠倒了这个顺序，这会导致“文件存在”错误。

# joomla - 创建 Joomla 子菜单模块

> ID：15696531
> 
> 赞同：0
> 
> 时间：2013-03-29T02:40:26.863
> 
> 标签：joomla, menu, submenu, joomla3.0

假设在 Joomla 中，我的菜单设置如下：

*   菜单 A（别名：menu_a）
    *   子菜单 A1（别名：submenu_a1）
    *   子菜单 A2（别名：submenu_a2）
    *   子菜单 A3（别名：submenu_a3）
*   菜单 B（别名：menu_b）
    *   子菜单 B1（别名：submenu_b1）
    *   子菜单 B2（别名：submenu_b2）
    *   子菜单 B3（别名：submenu_b3）
*   菜单 C（别名：menu_c）

我想在页脚为所有以菜单为标题的子菜单设置菜单模块。它将如下所示：

模块 1 标题：菜单 A

*   子菜单 A1
*   子菜单 A2
*   子菜单 A3

模块 2 标题：菜单 B

*   子菜单 B1
*   子菜单 B2
*   子菜单 B3

这可能吗？

我尝试使用通常的菜单模块（和 RokNavMenu，因为我使用的是 RocketTheme 模板），但它可以使用级别限制显示的最佳效果如下：

*   子菜单 A1
*   子菜单 A2
*   子菜单 A3
*   子菜单 B1
*   子菜单 B2
*   子菜单 B3

或者，我可以简单地创建一个新菜单并为菜单 B 复制菜单 A 和另一个，但这将创建一个不同的 url 来访问子菜单。最初说子菜单 A1 页面的 url 是 domain.com/menu_a/submenu_a1。但是通过创建重复项，菜单 A 的别名将不得不更改，这将导致例如 domain.com/menu_a_2/submenu_a1。

所以我在很多网站上都看到过这种做法，创建了类似“站点地图”的东西，但实际上是如何使用 joomla 的菜单模块完成的呢？请注意，我使用的是 Joomla 3.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:33:00.340

@Marko D 的解决方案确实是正确的。我只是简单地创建了一个新菜单，但我没有像上面那样做，而是将菜单类型设置为“菜单项别名”。这会保留 url，从而解决问题。

# codeigniter - 消息：从空值创建默认对象

> ID：15696533
> 
> 赞同：1
> 
> 时间：2013-03-29T02:40:38.033
> 
> 标签：codeigniter, stdclass

我收到一条警告“消息：从空值创建默认对象”，代码如下：

```
<?php
    if (empty($cd)) {
        $cd->kode_cd ='';
        $cd->judul = '';
        $cd->kategori = '';     
        $cd->stok = ''; 
        $cd->harga = '';
        $type = 'create';   
    } else {
        $type = 'update';
    }
?>
<div id="container">
    <h1>CRUD Data CD</h1>
    <div id="message"><?php echo $this->session->flashdata('message'); ?></div>
    <div id="form">
        <?php
            echo form_open('crud/'.$type);
            echo form_hidden('code',$cd->kode_cd);
        ?> 
```

请帮我解决这个问题。谢谢

# html - 创建表后的巨大差距

> ID：15696539
> 
> 赞同：0
> 
> 时间：2013-03-29T02:41:00.987
> 
> 标签：html, css, html-table

我用插件应用程序创建了一个表格，我为我的 wordpress 网站使用了 pagelines 主题...

[http://www.studymychild.co.uk/adelina-mustafa-timetable-2013](http://www.studymychild.co.uk/adelina-mustafa-timetable-2013)

但是，在创建自定义表格后，页面与底部的表格有很大的差距

差距 差距 差距 差距 差距

表 1 2 3 4 5

我使用的编码是（顺便说一下我试图创建学生时间表）

```
<table>
  <tbody>
    <tr>
      <td>{monday900am1030am}</td>
      <td>{tuesday900am1030am}</td>
   </tr>
    <tr class="spaceUnder">
      <td>{monday1030am1045am}</td>
      <td>{tuesday1030am1045am}</td>
    </tr>
    <tr class="spaceUnder">
      <td>{monday1045am1230pm}</td>
      <td>{tuesday1045am1230pm}</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:09:55.130

我很确定这是你的问题：

```
<p></p>
<p></p>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br> 
```

如果您使用换行符来调整页面布局，那么您做错了。:-)

根据您的评论进行编辑......显然代码来自某个地方。在 WYSIWYG 编辑器中查找空格。

如果你绝对找不到它，这个 CSS 将隐藏表格的父 div 元素内的段落和换行符。不过，这更像是一种黑客攻击，并且可能会在未来引起问题。

```
.entry_content br, .entry_content p {
    display: none;
} 
```

# c - 让 GCC 在没有内联汇编的情况下使用进位逻辑进行任意精度算术运算？

> ID：15696540
> 
> 赞同：9
> 
> 时间：2013-03-29T02:41:14.540
> 
> 标签：c, optimization, gcc, compiler-optimization, arbitrary-precision

在使用任意精度算术（例如 512 位整数）时，有没有办法让 GCC 使用 ADC 和类似指令而不使用内联汇编？

对 GMP 的源代码的第一印象表明，他们只是为每个受支持的平台提供了汇编实现。

这是我编写的测试代码，它从命令行添加两个 128 位数字并打印结果。（受 mini-gmp 的 add_n 启发）：

```
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>

int main (int argc, char **argv)
{
    uint32_t a[4];
    uint32_t b[4];
    uint32_t c[4];
    uint32_t carry = 0;

    for (int i = 0; i < 4; ++i)
    {
        a[i] = strtoul (argv[i+1], NULL, 16);
        b[i] = strtoul (argv[i+5], NULL, 16);
    }

    for (int i = 0; i < 4; ++i)
    {
        uint32_t aa = a[i];
        uint32_t bb = b[i];
        uint32_t r = aa + carry;
        carry = (r < carry);
        r += bb;
        carry += (r < bb);
        c[i] = r;
    }

    printf ("%08X%08X%08X%08X + %08X%08X%08X%08X =\n", a[3], a[2], a[1], a[0], b[3], b[2], b[1], b[0]);
    printf ("%08X%08X%08X%08X\n", c[3], c[2], c[1], c[0]);

    return 0;
} 
```

`GCC -O3 -std=c99`不产生任何`adc`指令，由`objdump`. 我的 gcc 版本是`i686-pc-mingw32-gcc (GCC) 4.5.2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:57:27.123

*如果*GCC可以看到它需要，*它将*使用进位标志： 例如，在 32 位机器上 添加两个值时，这必须导致一个 32 位加一个 32 位。但是除了那些编译器被迫使用进位的情况之外，它可能无法说服它在没有汇编程序的情况下这样做。因此，使用最大的整数类型来允许 GCC 通过有效地让它知道值的单个“组件”属于一起来优化操作可能是有益的。 *`uint64_t``ADD``ADC`*

 *对于简单的加法，另一种计算进位的方法是查看操作数中的相关位，例如：

```
uint32_t aa,bb,rr;
bool msbA, msbB, msbR, carry;
// ...

rr = aa+bb;

msbA = aa >= (1<<31); // equivalent: (aa & (1<<31)) != 0;
msbB = bb >= (1<<31);
msbR = rr >= (1<<31);

carry = (msbA && msbB) || ( !msbR && ( msbA || msbB) ); 
```*

# svn - 无法将本地 subversion 目录中的文件上传到 subversion 存储库

> ID：15696542
> 
> 赞同：0
> 
> 时间：2013-03-29T02:41:33.547
> 
> 标签：svn

Subversion 报告此错误：

```
MKActivity of
'/RAVI/HDR/TestandRelease/!svn/act/d...:
authorization failed: Could not authenticate to server:
rejected Basic 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-04T13:51:26.120

错误的措辞不完整。之后应该有更多信息`Could not authenticate to server: rejected Basic`。

我想完整的错误是`Could not authenticate to server: rejected Basic challenge`. 在这种情况下，根本原因是密码无效。

# python - 如何允许一个函数被两个名称调用？

> ID：15696547
> 
> 赞同：1
> 
> 时间：2013-03-29T02:42:39.753
> 
> 标签：python, function

例如，我有一个函数，比如说`alert()`. 如果有人调用，我希望该功能也能工作`alert_user()`，两者都具有相同的功能。我想它是这样的：

```
@synonym alert_user
def alert():
    print('hi!') 
```

它会像这样工作：

```
>>> alert()
hi!
>>> alert_user()
hi! 
```

有这样的事吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T02:44:41.463

装饰器（如您的示例中）无权访问封闭的命名空间，因此它无法为其装饰的事物创建新名称。但是，为您的函数添加别名很容易：

```
def alert():
    print('hi!')
alert_user = alert 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T02:44:42.800

这会给你你想要的

```
def alert():
    print('hi!')

alert_user = alert

>>> alert()
hi!
>>> alert_user()
hi! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T03:02:21.763

函数是python中的第一级公民。只需添加`alert_user = alert`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T03:46:13.143

正如上面其他助手所说，您可以将 alert 定义为一个函数，然后给 alert 一个变量表示。

```
alert_user = alert 
```

谢谢本

# c# - 在 GridView 模板字段中设置文本框值

> ID：15696551
> 
> 赞同：2
> 
> 时间：2013-03-29T02:44:02.270
> 
> 标签：c#, asp.net, datagridview

在我的页面的加载方法中，我想将模板字段中的文本框设置为一个值。

这是我当前的源代码，显示了我的模板字段文本框项目“txtQuan”：

```
 <asp:TemplateField>
              <ItemTemplate>
              <asp:Label ID="lblTotalRate" Text="Qty:" runat="server" />
              <asp:TextBox ID="txtQuan" Height="15" Width="30" runat="server" />

              <asp:Button ID="addButton" CommandName="cmdUpdate" Text="Update Qty"  OnClick="addItemsToCart_Click" runat="server" />
             </ItemTemplate>
             </asp:TemplateField> 
```

这就是我尝试设置 TextBox 值的方式：

```
 string cartQty = Qty.ToString();

 ((TextBox)(FindControl("txtQuan"))).Text = cartQty; 
```

我目前收到“nullReferenceException 错误”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T03:20:32.343

使用 RowDataBound 事件来做到这一点。你可以在网上查到。该事件处理程序的参数使您可以轻松访问每一行。您还可以使用循环遍历行`var rows = myGridView.Rows`

```
var rows = myGridView.Rows;
foreach(GridViewRow row in rows)
{
    TextBox t = (TextBox) row.FindControl("txtQuan");
    t.Text = "Some Value";
} 
```

对于事件：[GridView RowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

```
 protected void myGridView_RowDataBound(object sender, GridViewRowEventArgs e)
  {

    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        TextBox t = (TextBox) e.Row.FindControl("txtQuan");
        t.Text = "Some Value";    
    }   
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T02:57:36.747

```
((TextBox)grdviewId.Row.FindControl("txtQuan")).Text=cartQty; 
```

# algorithm - 对二叉树中的元素进行排序

> ID：15696552
> 
> 赞同：15
> 
> 时间：2013-03-29T02:44:06.660
> 
> 标签：algorithm, sorting, binary-tree

这是我最近在一次采访中被问到的一个问题。给出一棵二叉树，条件是每个左孩子比根小 1，右孩子比根大 1。这是一个示例树

[![一颗树](../Images/a74eb9a7dde9fd640fadc7e19f864ad2.png)](https://i.stack.imgur.com/Vj7n3.jpg)

以 O(1) 和 O(n) 的时间复杂度对其进行排序。

以下是我建议的方法：

1.  使用计数来维护每个元素的计数，然后在完成整个遍历后返回 O(n) 时间和 O(n) 空间复杂度。
2.  使用游程编码。当元素以数字为键，以计数为值重复时形成链。仅当 no 重复时才需要空间用于计数，因此除了数组之外不需要额外的空间，但时间复杂度将为 O(n log n)，因为我们必须遍历数组以查看它是否存在。
3.  最后我建议广度优先遍历。我们需要 O(log n) 的队列空间和 O(n) 的时间复杂度（假设插入是 O(1) 链表）。

你的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:34:30.823

将给定树的某些叶节点修复为 NewHead 。

编写一个函数 Pop() 从给定的树中删除一些节点..！

编写弹出节点，以便您仅在它存在时将其删除！等于 NewHead 。

因此，从树中弹出值，将其插入到以 New Head 作为 Head 节点的 New 二叉搜索树中。

因此，您将从树中删除一个元素，将其添加到新的搜索树中。

直到树头点 NewHead 。

所以你所有的元素现在都在指向新头的二叉搜索树中，这将是

显然是按顺序排列的。

这种方式保证你在 O(NlogN) 中进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-27T08:46:28.177

**分析**

鉴于您对二叉树的定义，我们有以下内容，

每个节点都有一个 Parent、L-child 和 R-child .. 其中：

```
L < N

R > N

P > N 
```

我们也可以这样做：

```
L < N AND R > N => L < N < R => L < R

L < N AND P > N => L < N < P => L < P

R > N AND P > N => N < MIN(P,R)

N < MIN(P,R) AND L < N => L < N < MIN(P,R) 
```

现在让我们尝试扩展它`N.L = Left-child of N`：

```
N.L < N
N.R > N
N.P > N

N.L.L < N.L < MIN(N, N.L.R)
N.L.R > N.L > N.L.L

N.R.L < N.R < MIN(N, N.R.R)
N.R.R > N.R > N.R.L

IF N IS N.P LEFT-CHILD: N < N.P < MIN(N.P.P, N.P.R)

IF N IS N.P RIGHT-CHILD: N > N.P.R 
```

* * *

**建议的解决方案**

这个问题似乎很复杂，但我的解决方案将在以遍历顺序 Left-Right-Parent 插入值后使用合并排序，这将有助于合并排序在其平均情况和最佳情况之间获得时间复杂度，但使用一个小技巧我在上面所做的比较。

首先，我们使用 Left-Right-Parent 遍历将树节点收集到一个列表中，考虑到以下事实：并且假设当我们每次向左侧移动时，`N.L < N < MIN(N.R, N.P)`假设值线性减小，则赋予父级更高的权重。`O(N.R) <= O(N.P)``.. > N.R.R > N.R > N > N.L > N.L.L > ..`

在按照遍历顺序收集树节点之后，列表有一些排序的块，这将有助于我们接下来使用的合并排序。

此解决方案适用于：`Time = O(n log n + n)`,`Space = O(n)`

这是用Java编写的算法*（未经测试）*：

```
private class Node Comparable<Node>
{
    public Node R;
    public Node L;
    public int value;

    public Node (Node L, int val, Node R)
    {
        this.L = L;
        this.value = val;
        this.R = R;
    }

    @Override
    public int compareTo(Node other)
    {
        return ((other != null) ? (this.value-other.value) : 0);
    }
}

class Main
{
    private static Node head;

    private static void recursive_collect (Node n, ArrayList<Node> list)
    {
        if (n == null) return;
        if (n.left != null) recursive_collect (n.L, list);
        if (n.right != null) recursive_collect (n.R, list);
        list.add(n.value);
    }

    public static ArrayList<Node> collect ()
    {
        ArrayList<Node> list = new ArrayList<Node>();
        recursive_collect (head, list);
        return list;
    }

    // sorting the tree: O(n log n + n)
    public static ArrayList<Node> sortTree ()
    {
        // Collecting nodes: O(n)
        ArrayList<Node> list = collect();

        // Merge Sort: O(n log n)
        Collections.sort(list);

        return list;
    }

    // The example in the picture you provided
    public static void createTestTree ()
    {
        Node left1 = new Node (new Node(null,-2,null), -1, new Node(null,0,null));

        Node left2 = new Node (new Node(null,-1,null), 0, new Node(null,1,null));

        Node right = new Node (left2, 1, new Node(null,2,null));

        head = new Node (left1, 0, right);
    }

    // test
    public static void main(String [] args)
    {
        createTestTree ();

        ArrayList<Node> list = sortTree ();

        for (Node n : list)
        {
            System.out.println(n.value);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T10:32:08.217

我猜，您正在寻找 DFS（深度优先搜索）。在深度优先搜索中，想法是在回溯之前从邻居到邻居尽可能深入。决定可能有多深的是您必须遵循边，并且您不会两次访问任何顶点。

boost 已经提供了它：见[这里](http://www.boost.org/doc/libs/1_42_0/libs/graph/doc/depth_first_search.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T08:51:07.387

使用快速排序。

节点在多个数组中的最低级别排序，这些排序元素的数组最后合并。

例如

函数 quick_sort(node n)
1\. 进入左模式，如果不为空，就调用 quick_sort。
2\. 到右边的元素，如果不为null，调用quick_sort就可以了。
3.合并左节点排序&右节点排序&当前节点的结果。
4\. 返回合并后的数组。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-29T04:14:34.143

我没有得到这个问题。二叉树不是已经排序了吗？如果您想按顺序打印出项目（或按顺序访问它们），此代码将起作用

```
/**
* Show the contents of the BST in order
*/
public void show () {
show(root);
System.out.println();
}
private static void show(TreeNode node) {
if (node == null) return;
show(node.lchild);
System.out.print(node.datum + " ");
show(node.rchild);
} 
```

我相信这将是 o(n) 复杂性。要返回列表而不是打印，只需创建一个并通过将子项添加到列表来替换每个 show 语句

# c# - HttpClient+WebApi+Multiple Post + 多参数

> ID：15696553
> 
> 赞同：-1
> 
> 时间：2013-03-29T02:44:12.413
> 
> 标签：c#, asp.net-web-api

我是 asp.net 的新手，遇到了一个小问题，我在 MVC 项目中创建了一个新的 webapi 控制器，当我尝试从这个控制器获得响应时，我得到 404 错误：s

这是使用的控制器代码：

```
public class SampleController : ApiController
    {
        [HttpPost]
        public string Auth(string number, string password)
        {
            ....
        }

        [HttpPost]
        public string SendSms(string smsTo, string content)
        {
            ....
        }
    } 
```

WebApiConfig：

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    }
} 
```

这里是代码 c#：

```
using (var client = new HttpClient())
            {
                client.BaseAddress = new Uri("http://localhost:66893");
                var content = new FormUrlEncodedContent(new[] 
            {
                new KeyValuePair<string, string>("number", "login"),
                new KeyValuePair<string, string>("password", "password")
            });
                var result = client.PostAsync("/api/sms/auth", content).Result;
                string resultContent = result.Content.ReadAsStringAsync().Result;
                Console.WriteLine(resultContent);
            } 
```

当我在 XHR 海报中尝试 localhost:66893/api/sms/auth?number=xxx&password=xxx 时，我得到了结果：s

请帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:06:05.843

您的客户端发布到“/api/sms/auth”，但由于您将控制器命名为**SampleController**，它应该是“/api/ ***sample*** /auth”。

这是因为 Web API 在 {controller} 变量的值中添加了“Controller”来查找控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:34:03.730

但是您的路线不包含操作。不应该是：

```
routeTemplate: "api/{controller}/{action}/{id}", 
```

# html - 在 chrome 中自动填充，文本字段被识别为密码文本字段

> ID：15696556
> 
> 赞同：0
> 
> 时间：2013-03-29T02:44:23.090
> 
> 标签：html, google-chrome, autocomplete, textfield, autofill

```
<form id="formzap" name="form" method="post" action="">
<input type="text" name="textfield" class="ind" id="textzap" onkeypress="fadefx.init('noise', 1)" onblur="fadefx.init('noise', 0)" autofocus autocomplete="off"/>
<button type="submit" name="button" class="ind" id="buttonzap" value=""></button>
</form> 
```

你好！！这是我用于我网站主页的一部分的 html ......有一个问题认为......我不知道为什么这个文本字段被 Chrome 识别为密码文本字段，它会自动用密码填充它（显示）现在我禁用了自动填充，我不知道如何禁用自动填充，我不认为这可能是我正在寻找的答案......我想知道为什么这个文本字段被识别为密码谷歌浏览器的文本字段...有人对此有所了解吗？我真的希望如此！！谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:59:52.670

将自动完成属性设置为关闭以形成

例如

```
<form id="formzap" name="form" method="post" action="" autocomplete="off"> 
```

# android - 空指针异常

> ID：15696559
> 
> 赞同：-3
> 
> 时间：2013-03-29T02:44:49.130
> 
> 标签：android, android-activity, nullpointerexception

嗨，我遇到了一些代码问题。我试图从一个活动中获取 3 个整数并使用这些数字在画布上画一个圆圈。这是我的第二个活动：

```
public class Activity2 extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle b = getIntent().getExtras();
    int x = b.getInt("X");
    int y = b.getInt("Y");
    int r = b.getInt("R");

    Canvas canvas = new Canvas();
    View canView = new View(this);
    RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)canView.getLayoutParams();
    params.height = 300;
    params.width = 400;
    params.addRule(RelativeLayout.CENTER_HORIZONTAL);

    Rect rec = new Rect();
    rec.set(0,0, 400, 300);
    Paint paint = new Paint();
    Paint paint2 = new Paint();
    paint2.setColor(Color.BLUE);
    paint.setColor(Color.BLACK);
    canvas.drawRect(rec, paint);
    canvas.drawCircle(x, y, r, paint2);

    canView.setLayoutParams(params);
    canView.draw(canvas);
    setContentView(canView);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    getMenuInflater().inflate(R.menu.activity2, menu);
    return true;
} 
```

}

开始此活动时，我得到一个空指针异常。这是我的日志：

```
 FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mrsai.exampleactivity/com.mrsai.exampleactivity.Activity2}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
at android.app.ActivityThread.access$600(ActivityThread.java:140)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4898)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NullPointerException
at com.mrsai.exampleactivity.Activity2.onCreate(Activity2.java:30)
at android.app.Activity.performCreate(Activity.java:5206)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
... 11 more 
```

我非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:19:34.507

我认为你的 put bundle 函数在字符串中，在 actity2 中以这种方式尝试获取字符串。

```
String xx = b.getString("X");
int x = Integer.valueOf(xx); 
```

# ruby-on-rails-3 - 如何使用 Mocha 和 rspec 测试模型错误？

> ID：15696560
> 
> 赞同：2
> 
> 时间：2013-03-29T02:44:58.300
> 
> 标签：ruby-on-rails-3, rspec, mocha.js, rails-models

我有这个与使用 Mocha 测试模型错误有关的问题：

1.  这是我的控制器（Api / Artist 控制器）：

    ```
    class Api::ArtistsController < ApplicationController
       respond_to :json

       def create
         artist = Artist.new(params[:artist])
         if artist.save <-- This is where the test fails
           render :json=>artist
         else
           respond_with artist
         end
       end
    end 
    ```

2.  这是我的模型（艺术家模型）：

    ```
    class Artist < ActiveRecord::Base
       include Core::BaseModel
       attr_accessible :name
       has_many :albums
       validates :name, :presence=>true, :uniqueness=>{:case_sensitive=> false}
       default_scope where :deleted=>false
    end 
    ```

3.  这是关于 Artist 控制器的失败测试：

    ```
    it "should not save a duplicated artist" do
      Artist.any_instance.stubs(:is_valid?).returns(false)
      Artist.any_instance.stubs(:errors).returns({:name=>[I18n.t('activerecord.errors.messages.taken')]})
      post :create, :format => :json

      expect(response).not_to be_success
      expect(response.code).to eq("422")

      results = JSON.parse(response.body)
      expect(results).to include({
          "errors"=>{
            "name"=>[I18n.t('activerecord.errors.messages.taken')]
          }
        })
    end 
    ```

当我运行测试时，这是我在上述测试中遇到的错误：

```
Failure/Error: post :create, :format => :json
     NoMethodError:
       undefined method `add_on_blank' for {}:Hash
     # ./app/controllers/api/artists_controller.rb:17:in `create'
     # ./spec/controllers/api/artists_controller_spec.rb:56:in `block (3 levels) in <top (required)>' 
```

我开始使用 Mocha，所以当我想测试重复名称的验证时，我不知道是否有办法测试特定情况下的 json 结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:38:34.777

`ActiveRecord::Base#errors`(ie `Artist#errors`) 不是一个简单的哈希。它应该是一个实例`ActiveModel::Errors`。您正在使用哈希对它进行存根，而 ActiveRecord 正在尝试调用`add_on_blank`它，但它失败了。

我认为根本不`save`调用`is_valid?`，我怀疑它正在运行验证，然后尝试调用`add_on_blank`以附加错误，但由于你已经 stubbed `errors`，那是失败的。

这并不是测试控制器的好方法。它对`Artist`. 你也在测试根本不属于控制器的东西；`errors`在动作的任何地方都没有引用。控制器中唯一值得测试的行为是它是否创建了`Artist`; 如果`Artist`保存失败，它会用它呈现 JSON；如果保存成功，它会重定向。这就是控制器的全部责任。

如果您想测试错误是否以某种方式呈现，您应该编写一个单独的视图规范。如果您想测试缺少的字段是否会产生错误，您应该编写一个模型规范。如果您不想编写视图规范，依靠模型来填充`errors`（在模型规范中测试）仍然足够，并且在您的控制器中，只需测试设置为实例`render`的调用。`json``Artist`

一般来说，最好尽可能避免存根，但在这种情况下，我考虑存根的唯一事情是`Artist.new`返回一个模拟，并`save`在那个模拟上返回 false。然后我会检查以确保它是用模拟渲染的。

更简单的选择是只创建一个实际`Artist`记录，然后`post`使用重复参数调用以触发验证失败。缺点是您访问了数据库，并且在控制器规范中避免这种情况是值得称赞的，但通常更方便。如果您想避免控制器规格中的数据库命中，您可以改为在 Capybara 功能规格中执行此操作。

如果你想尝试测试你的方式，你可以手动创建一个实例`ActiveModel::Errors`并填充它，或者在它上面的存根方法，然后存根`Artist.any_instance.stubs(:errors)`返回你的具有`ActiveModel::Errors`-compatible 行为的模拟，但这是很多模拟。

最后一个提示：不要使用`post :create, :format => :json`. 用于`xhr :post, :create`生成真正的 Ajax 请求，而不是依赖于`format`参数。这是对您的路由和响应代码的更强大的测试。

# android - 添加滑动以在片段之间切换

> ID：15696563
> 
> 赞同：1
> 
> 时间：2013-03-29T02:45:41.577
> 
> 标签：android, swipe, android-tabs

我想在此活动中添加滑动以在其片段之间切换，现在应用程序正在检测运动。选项卡切换应该是通过 SwipeLeft 和 SwipeRight 函数进行的，但我不知道该怎么做。有人可以解释一下我该怎么做吗？

```
public class Cantina extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    Tab tabA = actionBar.newTab();
    tabA.setText("seg");
    tabA.setTabListener(new TabListener<MyFragmentA>(this, "seg", MyFragmentA.class));
    actionBar.addTab(tabA);

    ... 3 tabs

    Tab tabE = actionBar.newTab();
    tabE.setText("sex");
    tabE.setTabListener(new TabListener<MyFragmentE>(this, "sex", MyFragmentE.class));
    actionBar.addTab(tabE);

    if (savedInstanceState != null) {
        int savedIndex = savedInstanceState.getInt("SAVED_INDEX");
        getActionBar().setSelectedNavigationItem(savedIndex);
    }

}

@Override
protected void onSaveInstanceState(Bundle outState) {
    // TODO Auto-generated method stub
    super.onSaveInstanceState(outState);
    outState.putInt("SAVED_INDEX", getActionBar().getSelectedNavigationIndex());
}

public static class TabListener<T extends Fragment> 
    implements ActionBar.TabListener{

    private final Activity myActivity;
    private final String myTag;
    private final Class<T> myClass;

    public TabListener(Activity activity, String tag, Class<T> cls) {
        myActivity = activity;
        myTag = tag;
        myClass = cls;
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {

        Fragment myFragment = myActivity.getFragmentManager().findFragmentByTag(myTag);

        // Check if the fragment is already initialized
        if (myFragment == null) {
            // If not, instantiate and add it to the activity
            myFragment = Fragment.instantiate(myActivity, myClass.getName());
            ft.add(android.R.id.content, myFragment, myTag);
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(myFragment);
        }

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

        Fragment myFragment = myActivity.getFragmentManager().findFragmentByTag(myTag);

        if (myFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(myFragment);
        }

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
    }

}
public void SwipeRight(){
    Toast.makeText(this, "RIGHT", Toast.LENGTH_LONG).show();    
}

private void SwipeLeft(){
    Toast.makeText(this, "LEFT", Toast.LENGTH_LONG).show();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    // TODO Auto-generated method stub
    return gestureDetector.onTouchEvent(event);
}
SimpleOnGestureListener simpleOnGestureListener 
= new SimpleOnGestureListener(){

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {

        float sensitvity = 50;
        if((e1.getX() - e2.getX()) > sensitvity){
            SwipeLeft();
        }else if((e2.getX() - e1.getX()) > sensitvity){
            SwipeRight();
        }

        return true;
    }

};

GestureDetector gestureDetector
= new GestureDetector(simpleOnGestureListener); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T15:43:17.717

如果它符合你的要求，那么你就可以去做。来自 Android 开发者的官方指南。

[使用标签滑动视图](http://developer.android.com/training/implementing-navigation/lateral.html)

# ruby-on-rails-3 - 如何将与 cancan 的祖先关系默认为树的内部节点？

> ID：15696564
> 
> 赞同：5
> 
> 时间：2013-03-29T02:46:03.393
> 
> 标签：ruby-on-rails-3, cancan

我正在使用[cancan](https://github.com/ryanb/cancan)来授权我的控制器操作。cancan 授权访问的类之一是树，用[acts_as_ancestry](https://github.com/stefankroes/ancestry)实现。`load_and_authorize_resource`当不允许用户访问根级别，而是允许从内部节点开始访问时，我在使用时遇到问题。

以下是一些相关的类定义：

```
class User < ActiveRecord::Base
  belongs_to :organization, :inverse_of => :users
end

class Post < ActiveRecord::Base
  belongs_to :organization, :inverse_of => :posts
end

class Organization < ActiveRecord::Base
  has_ancestry :cache_depth => true
  has_many :users, :inverse_of => :organization
  has_many :posts, :inverse_of => :organization
end 
```

管理帖子的规则是“您可以在您下属的任何组织中管理帖子”。我的康康舞能力定义是这样的：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new 

    # subtree_ids is added by acts_as_ancestry
    can :manage, Post, {:organization_id => user.organization.subtree_ids}
  end
end 
```

在控制器中，我有这个（省略其他操作）

```
class PostsController < ApplicationController
  load_and_authorize_resource :post

  def index
  end

  def new
  end
end 
```

当授权用户属于根组织时，一切正常。但是，当我以在内部节点授权的用户身份登录时，索引操作工作正常，但是当调用新操作时，我得到一个 can-can 授权错误。

这是我在日志中看到的内容：

```
Access denied on new #<Post id: nil, organization_id: 1> 
```

（`organization_id 1`根）来自模式：

```
create_table "posts", :force => true do |t|
  t.integer  "organization_id", :default => 1
end 
```

使用 cancan，新操作将构建一个新操作并将其`Post`分配给`@post`. 当它这样做时，它将使用从`can`Abilities.rb 中的定义中获取的值初始化所有属性。但是，如果这些属性是 Arrays、Hashes 或 Ranges 并且默认值最终来自模式，则它不会做任何事情。

**如何授权用户管理其子树中的帖子，但是当他们创建新帖子时，将其默认为他们的组织？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:47:51.270

在cancan中，如果@post变量已经被你初始化，它不会调用load_resource，只做授权部分。请参阅文档的这一部分：[https](https://github.com/ryanb/cancan/wiki/Authorizing-controller-actions) ://github.com/ryanb/cancan/wiki/Authorizing-controller-actions ，“覆盖加载”。

所以最简单的解决方案是自己控制初始化并使其成为您需要的，如下所示：

```
class PostsController < ApplicationController
  before_filter :initialize_post, :only => [:new, :create]

  def initialize_post
    @post = current_user.organization.posts.build(params[:post]||{:name=>'Smashing Kittens'})
  end

  load_and_authorize_resource :post
  def index
  end

  def new
  end

  def create
  end
end 
```

您可以在我从您的帖子中创建的这个测试项目中看到它的工作原理：[https](https://github.com/robmathews/cancan_test) ://github.com/robmathews/cancan_test 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:12:23.440

我遇到了类似的问题，最终在块中编写了与祖先相关的权限，如下所示：

```
can :manage, Post do |post|
  post.organization.subtree_ids.include?(user.organization_id)
end 
```

# vba - 完成代码需要提示：

> ID：15696569
> 
> 赞同：0
> 
> 时间：2013-03-29T02:46:58.323
> 
> 标签：vba, listbox

这个问题已经回答了。不想让它暴露在外。

```
Private Sub btnTTL_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles findzipButton.Click

    Dim zipCode As String

    'forgot

    If (ListBox1.FindString(findzipButton.Text) >= 0) Then
        ttlTextBox.Text = "$15"
    ElseIf (ListBox2.FindString(findzipButton.Text) >= 0) Then
        ttlTextBox.Text = "$20"
    Else
        MessageBox.Show("The zipcode was not found!")
    End If

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:59:28.477

因此，我认为您要做的是将用户放入文本框中的输入与 ListBoxA 或 ListBoxB 中的选择相匹配。我刚刚在 VS 2012 中尝试过，它似乎以上述问题描述的方式工作，但我只是想查找并显示运费：

Private Sub btnExit_Click(ByVal sender As Object, ByVal e As System.EventArgs) 处理 btnExit.Click Me.Close() End Sub

```
Private Sub ListBox1_Load(sender As Object, e As EventArgs) Handles Me.Load

    ListBox1.Items.Add("60611")
    ListBox1.Items.Add("60234")
    ListBox1.Items.Add("56789")
    ListBox1.Items.Add("23467")
    ListBox1.Items.Add("60543")
    ListBox1.Items.Add("60561")
    ListBox1.Items.Add("55905")
    ListBox1.Items.Add("89567")

    ListBox2.Items.Add("50978")
    ListBox2.Items.Add("78432")
    ListBox2.Items.Add("98432")
    ListBox2.Items.Add("97654")
    ListBox2.Items.Add("20245")

End Sub

Private Sub btnFind_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnFind.Click

    Dim zipCode As String = txtZipCode.Text

    If (ListBox1.FindString(zipCode) >= 0) Then
        txtShipping.Text = "$15"
    ElseIf (ListBox2.FindString(zipCode) >= 0) Then
        txtShipping.Text = "$20"
    Else
        MessageBox.Show("The zipcode was not found!")
    End If

End Sub 
```

你走在正确的轨道上。您需要做的是将用户实际输入到文本框的内容与列表框中的可用内容进行比较。FindItem() 方法将产生一个 Long。如果它确实找到了您的搜索字符串，它将构建运输文本框。

# testing - clojure 是否需要依赖注入来使代码更具可测试性？

> ID：15696574
> 
> 赞同：14
> 
> 时间：2013-03-29T02:47:24.097
> 
> 标签：testing, clojure

我记得读过一篇关于 Ruby 不需要 DI 或 DI 框架的文章，因为这些类是开放的。因此，您可以简单地重写依赖项的构造函数，以便它返回一个假对象。

我对 Clojure 和函数式编程非常陌生。我想知道 Clojure 是否需要依赖注入，或者它可以出于类似/其他原因放弃它。这是一个可以使用的具体示例（请随意指出我的设计如何不符合 Clojure 的习惯）：

> 想象一下，您正在开发一个网络爬虫/蜘蛛。它需要遍历您下载的网页。这是一个有副作用的动作。网页可能会在每次查询时发生变化，您的互联网连接可能会中断等。它会找到网页上的所有链接，访问每个链接，然后以相同的方式遍历它。

现在，您想编写一个模拟 http 客户端的测试，以便它返回一个硬编码的字符串响应。你如何`-main`在测试中调用程序并阻止它使用*真正的*http客户端？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-29T04:25:37.423

clojure.core 中的`with-redefs`宏对于存根函数非常有用。

这是一个简短的 REPL 会话来演示这一点：

```
user=> (defn crawl [url]
  #_=>   ;; would now make http connection and download content
  #_=>   "data from the cloud")
#'user/crawl
user=> (defn -main [& args]
  #_=>   (crawl "http://www.google.com"))
#'user/-main
user=> (-main)
"data from the cloud"
user=> (with-redefs [crawl (fn [url] "fake data")]
  #_=>   (-main))
"fake data" 
```

由于 Clojure 程序（大部分）由函数而非对象组成，因此函数的动态重新绑定取代了 DI 框架为测试目的所做的大量工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-29T03:41:30.760

在 Clojure 中，您通常可以使用替代方法实现依赖注入的等价物：

*   **动态绑定**- 例如，通过执行重定向测试函数中的标准输出很有用`(binding [*out* some-writer-object] ...)`
*   **高阶函数**- 可用于通过将其他函数作为参数传递来提供一种形式的依赖注入
*   **使用数据进行配置**- 在 Clojure 中传递包含配置参数（甚至是配置自定义行为的函数）的映射是相当惯用的。

所有这些都是语言本身不可或缺的。所以你绝对不需要像“DI 框架”这样的东西。恕我直言，需要一个 DI 框架实际上只是弥补了语言本身缺乏足够的特性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T18:25:41.823

> 想象一下，您正在开发一个网络爬虫/蜘蛛。它需要遍历您下载的网页。这是一个有副作用的动作。网页可能会在每次查询时发生变化，您的互联网连接可能会中断等。它会找到网页上的所有链接，访问每个链接，然后以相同的方式遍历它。

我认为这里不需要依赖注入。以下是我认为在保持可测试性的同时解决这个问题的方法：将实现分离成至少两个函数。一个函数获取并返回网页，另一个函数解析响应。在您的主要功能中，您将拥有类似`(-> "http://google.com" fetch parse)`.

然后，为了测试`parse`，您可以简单地绕过该`fetch`方法并将虚假网页数据直接输入该`parse`方法。

```
(deftest test
     (is (= {:something "blah"} (parse "<html><head><title>Fake webpage etc..</title></head></html>")))) 
```

只要你小心地将问题分解为清晰的函数，我认为你不需要像 DI 这样复杂的东西来测试。

我是 Clojure 的新手，所以我不熟悉这里其他人提到的宏和技术，但到目前为止，上述方法对我很有帮助。

# image-processing - 使用遗传算法按颜色比较图像

> ID：15696575
> 
> 赞同：1
> 
> 时间：2013-03-29T02:47:39.307
> 
> 标签：image-processing, colors, genetic-algorithm, hsv

但是对于不同的品种来说，这个距离通常比它必须的要小得多。有没有办法只使用颜色对这些花进行分类（我读过使用纹理的应用程序，但这超出了我的范围），尤其是使用遗传算法（我知道神经网络更适合这种分析但这就是老师问的）？非常感谢。顺便说一句，我正在研究 OpenCV，不知道它是否相关。PS：如果有任何错误，请原谅我的英语，而不是我的母语。特别是使用遗传算法（我知道神经网络更适合这种分析，但这是老师问的）？非常感谢。顺便说一句，我正在研究 OpenCV，不知道它是否相关。PS：如果有任何错误，请原谅我的英语，而不是我的母语。特别是使用遗传算法（我知道神经网络更适合这种分析，但这是老师问的）？非常感谢。顺便说一句，我正在研究 OpenCV，不知道它是否相关。PS：如果有任何错误，请原谅我的英语，而不是我的母语。

# ios - NSRegularExpression 匹配某个模式

> ID：15696581
> 
> 赞同：0
> 
> 时间：2013-03-29T02:48:34.463
> 
> 标签：ios, objective-c, regex, nsregularexpression

## **背景：**

我有这样的回应（请注意新行）：

```
HTTP/1.1 200 OK
CACHE-CONTROL: max-age = 180
EXT:
LOCATION: http://172.16.16.16:80/upnp.jsp
SERVER: Linux/2.6.32.24 UPNP/1.0 ZD3025/9.5.1.0
ST: upnp:rootdevice
USN: uuid:6e4bb543-fff6-4384-a4be-::upnp:rootdevice 
```

我想匹配 Server 行，它是：

```
Linux/2.6.32.24 UPNP/1.0 ZD3025/9.5.1.0 
```

## **执行：**

我不关心上面给出的响应中的任何字符，除了字符 Linux、UPNP 和 ZD（按此顺序）。

所以我使用 .* 来匹配任意数量的字符、数字、特殊字符。

```
-(void) regexCompareForUPnP:(NSString *) string {
    NSError * err = nil;

    //Building expression

    NSString *expression = @"^.*Linux.*UPNP.*ZD.*$";

    NSRegularExpression *regex = [[NSRegularExpression alloc] initWithPattern:expression options:0 error:&err];
    NSUInteger numberOfMatches = [regex numberOfMatchesInString:string
                                                        options:0
                                                          range:NSMakeRange(0, [string length])];

    NSLog(@"Matches found: %d", numberOfMatches);
} 
```

到目前为止，找到的匹配项：0。

## **问题：**

所以，简而言之，这样做：

```
NSString *expression = @"^.*Linux.*UPNP.*ZD.*$"; 
```

匹配这个：

```
Linux/2.6.32.24 UPNP/1.0 ZD3025/9.5.1.0 
```

## 编辑：

1.  谢谢 omz，效果很好。
2.  现在我正在尝试匹配 upnp.jsp（在 LOCATION 行中）以及我之前尝试匹配的内容。所以我尝试了这个：

NSString *表达式 = @"^.*upnp.jsp\n.*Linux.*UPNP.ZD. *$* ";

那是行不通的。感谢你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:03:03.697

我不熟悉这个正则表达式库。但是，根据您要匹配的内容，它可能与操作系统和单个程序之间的换行符有关。

尝试这个：`*expression = @"upnp.jsp\r?\n[^\n]*?Linux[^\n]*?UPNP[^\n]*?ZD"`

您正在尝试的其他一些更改；

我换成`.*`有`[^\n]*?`两个原因：

*   我不确定这个库是如何处理的`.*`，但与更具体的东西（例如寻找不是新行的非贪婪字符集）相比，使用它通常效率低下。`.*`和之间的区别`.*?`取决于正则表达式引擎。在我至少使用的大多数正则表达式引擎`.*`中，默认情况下是贪婪的；即，它将尽可能多地捕获数据，同时仍然让表达式找到匹配项。使用非贪婪版本 ,`.*?`意味着正则表达式将只捕获满足整个表达式所需的量。这在我将在最后扩展的示例中尤为明显。
*   我删除了周围的环境`^$`，因为当它们被附加和前置时，`.*`它们只会增加处理时间（除非你使用匹配组，但你不是）。如果您正在使用`^(.*)upnp`或`^(.*upnp)`然后使用匹配组的内容，则使用初始`^.*`.

至于贪婪/非贪婪，当尝试匹配一组双引号之间的数据时，差异变得很明显`"`。为了简单起见，我不会处理在您还想捕获的字符串中间转义双引号的问题。

给定字符串：`I said, "Hi." She responded with, "Hello!"`

使用贪婪的正则表达式`"(.*)"`，匹配组将是`Hi." She responded with, "Hello!`

使用非贪婪正则表达式`"(.*?)"`，匹配组将是`Hi.`

# java - 应用程序中的长时间 GC 暂停

> ID：15696585
> 
> 赞同：7
> 
> 时间：2013-03-29T02:49:07.420
> 
> 标签：java, performance, garbage-collection

我目前正在运行一个需要最大堆大小为 16GB 的应用程序。

目前我使用以下标志来处理垃圾收集。

```
-XX\:+UseParNewGC, -XX\:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=50, -XX\:+DisableExplicitGC, -XX\:+PrintGCDateStamps, -XX\:+PrintGCDetails, -Xloggc\:/home/user/logs/gc.log 
```

但是，我注意到在一些垃圾收集过程中，应用程序会锁定几秒钟然后继续运行——这是完全不能接受的，因为它是一个游戏服务器。

可以在[这里](http://pastebin.com/5kxEmf1d)找到我的垃圾收集日志中的一项工作。

任何关于我应该改变什么以减少这些长时间停顿的建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T03:13:17.767

> 任何关于我应该改变什么以减少这些长时间停顿的建议将不胜感激。

CMS GC 可能无法跟上系统生成的垃圾量。但是 GC 必须执行的工作实际上与您的系统保留的非垃圾数量*更密切相关。*

所以 ...

*   尽量减少应用程序的实际内存使用量；例如，不缓存这么多东西，或者减少你的“世界”的大小。
*   尝试降低应用程序产生垃圾的速度。
*   升级到具有更多内核的机器，以便在必要时有更多内核可用于运行并行 GC 线程。

* * *

神秘主义者：

是的，事后看来，用 C++ 实现服务器可能会更好。但是，我们对“游戏”一无所知。如果它涉及具有复杂异构数据结构的复杂世界模型，那么在 C++ 中实现它*可能*意味着您将“GC 暂停”问题替换为服务器由于管理其数据的方式问题而一直崩溃的问题结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T08:21:42.780

查看您的日志，我没有看到任何长时间的停顿。但是young GC非常频繁。虽然提升率非常低（大部分垃圾应该由年轻 GC 清除）。同时您的旧空间利用率很低。

顺便说一句，我们在谈论我的世界服务器吗？

要减少年轻 GC 的频率，您应该增加其大小。我建议从`-XX:NewSize=8G -XX:MaxNewSize=8G`

对于如此大的年轻空间，您还应该减少幸存者空间的大小`-XX:SurvivorRatio=512`

GC 调优是一条反复试验的道路，因此您可能需要更多的迭代和调整。

你可以在 mu blog 找到几篇有用的文章

*   [HotSpot JVM GC 选项备忘单](http://blog.ragozin.info/2011/09/hotspot-jvm-garbage-collection-options.html)
*   [了解 HotSpot JVM 中的年轻 GC 暂停](http://blog.ragozin.info/2011/06/understanding-gc-pauses-in-jvm-hotspots.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T04:48:31.487

我不是 Java 垃圾收集方面的专家，但假设服务器有多个处理器，看起来你正在通过使用并发收集器（UseConcMarkSweepGC 标志）做正确的事情。按照[http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#cms](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#cms)上的故障排除建议进行操作。如果您已经有，请告诉我们您尝试它们时发生了什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T04:01:07.300

你用的是哪个版本的java？[http://docs.oracle.com/javase/7/docs/technotes/guides/vm/G1.html](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/G1.html) 为了更好地尽量减少类中实例变量的使用。对局部变量执行比对实例执行更好变量。它有助于获得性能并避免同步问题。在程序退出前的操作结束时，如果您正在使用实例变量，请始终重置使用的变量，并在需要时再次设置。它有助于提高性能。除了在 java 版本中实施了良好的垃圾收集策略。如果可行的话，最好迁移到新版本。您还可以通过 VisualVm 监控垃圾收集器的暂停时间，当它执行更多垃圾收集时，您可以了解更多信息。

# css - 我如何使跨度对齐

> ID：15696586
> 
> 赞同：0
> 
> 时间：2013-03-29T02:49:24.387
> 
> 标签：css, alignment

我试图让我的条在文本之后对齐。它们使用 css 绘制并使用 jQuery 进行动画处理。当我使用 div 类“meter orange”并使用 span 样式的宽度设置进度条的大小时，会触发 span。

```
<div class="meter orange">HTML
<span style="width: 65.3%"></span>
</div> 
```

有什么建议么？

**截屏：**

[![截图链接](../Images/dbe1f6e1b9377100f21608a02b759211.png)](https://i.stack.imgur.com/eJJnH.png)

**CSS：**

```
 #progress-bars-page-wrap { 
    width: 490px; 
    margin: 80px auto; 
    }

    .meter { 
        height: 8px;  /* Can be anything */
        position: relative;
        padding: 3px;

    }
    .meter > span {
        height: 100%;
        background-color: rgb(43,194,83);

    }

    .orange > span {
        background-color: #e94939;

    } 
```

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>

    <link rel="stylesheet" type="text/css" href="bars.css">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
<script>
    $(function() {
        $(".meter > span").each(function() {
            $(this)
                .data("origWidth", $(this).width())
                .width(0)
                .animate({
                    width: $(this).data("origWidth")
                }, 900);
        });
    });
</script>

</head>

<body>

<div id="progress-bars-page-wrap">

    <div class="meter orange">Javascript<span style="width: 33.3%"></span>
    </div>
    <div class="meter orange">HTML
        <span style="width: 65.3%"></span>
    </div>
    <div class="meter orange">CSS
        <span style="width: 70.3%"></span>
    </div>
    <div class="meter orange">Java
        <span style="width: 60%"></span>
    </div>
    <div class="meter orange">Python
        <span style="width: 84%"></span>
    </div>
    <div class="meter orange">.Net
        <span style="width: 32%"></span>
    </div>
    <div class="meter orange">Ajax
        <span style="width: 60%"></span>
    </div>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:56:28.063

这通常通过为左侧元素设置宽度来完成。您可以通过设置来设置内联元素（）的`width`和。`height``<span>``display:inline-block`

[jsFiddle](http://jsfiddle.net/dUnrj/1/)

**CSS**

```
.meter .label {
    display:inline-block;
    width:4em;
}
.meter .bar {
    height: 100%;
    display:inline-block;
    background-color: rgb(43, 194, 83);
} 
```

**HTML**

```
<div class="meter orange nostripes">
    <span class="label">Javascript</span>  
    <span class="bar" style="width: 33.3%"></span>
</div> 
```

## 警告

但是，如果您想在 width:100% 处设置样式，则此方法将遇到问题，因为左侧`<span>`占用了空间，因此该栏将包装到下一行。我们可以通过使用`position:absolute`on`.label`并给出与 相同大小的`.bar`a来解决这个问题。`margin-left``.label`

[jsFiddle（CSS 栏是`width:100%`）](http://jsfiddle.net/dUnrj/3/)

```
.meter .label {
    position:absolute;
}
.meter .bar {
    margin-left:4em;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:55:47.230

将`<span>`s 放在编程语言周围，并将它们的固定宽度设置为相同的像素数。这样，每种编程语言将占用相同数量的空间，这将导致条形图从每行的同一点开始。

CSS：

```
.programmingLang {width: 100px; } 
```

HTML：

```
<div class="meter orange">Javascript<span style="width: 33.3%"></span>
    </div>
    <div class="meter orange"><span class="programmingLang">HTML</span>
        <span style="width: 65.3%"></span>
    </div>
    <div class="meter orange"><span class="programmingLang">CSS</span>
        <span style="width: 70.3%"></span>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T21:33:11.853

如果您无法更改 HTML，我很确定您可以添加以下内容：

```
.meter span {
  position: absolute;
  left: 50px; /* adjust to fit label length */
} 
```

# git - 为什么我不能将更改推送到 Git Windows 服务器？

> ID：15696587
> 
> 赞同：0
> 
> 时间：2013-03-29T02:49:27.357
> 
> 标签：git

我有两台 Windows 机器可以使用相同的代码存储库。为了方便起见，我将一个用于 Git 服务器临时，并在另一台机器上克隆代码。更改完成后，我会将更改推回。

我在 Windows 下的 Git Bash 中通过以下命令启动 git 服务器：

```
$ git daemon --base-path=E:/MyCode/ --export-all --enable=receive-pack 
```

但是当我从另一台机器推回更改时，什么也没有发生。另一台机器在上传 UI 上停留了很长时间，直到我将其关闭。

在服务器端，当我关闭推送操作时，Git Bash 显示一条错误消息：

> [2944] 致命：写入错误：参数无效

为什么？如何将更改推回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:27:41.320

`base-path`看起来对我来说很可疑。它不应该`/e/MyCode`在bash中吗？

# ios - NSFetchedResultsChangeInsert 被调用两次，用于 1 个具有不同对象 ID 的插入

> ID：15696591
> 
> 赞同：1
> 
> 时间：2013-03-29T02:51:07.063
> 
> 标签：ios, core-data

我对这个问题失去了理智。

所以我在我的 iOS 应用程序中设置了核心数据：http: [//www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/)

然后我通过创建一个临时 MOC（如博客文章中所述）插入一个对象，并在 performBlock: 方法中对所有 3 个上下文执行保存。

在视图控制器中，我有一个`NSFetchedResultsController`，它会收到通知，我确实插入了一个新对象。问题是`NSFetchedResultsChangeInsert`被触发了两次，每次通过的对象都有不同的`objectID`（它也是内存中的不同对象实例）。发生的情况是，我在表视图中插入了 2 行，但在 SQL 数据库中只有一个新行。当我滚动到表格视图的底部时，它当然会崩溃。

如果我还对对象执行一些更新，我`NSFetchedResultsChangeUpdate`只会被调用一次，并且使用第二次`NSFetchedResultsChangeInsert`调用中传递的 objectID。

第一个 ID 如下所示：

> `<x-coredata:///ReceivedMessage/t605BB9A7-A04E-4B89-B568-65B12E8C259A2>`

第二个（以及所有后续的）是这样的：

> `<x-coredata://02A917C5-850F-4C67-B8E4-1C5790CF3919/ReceivedMessage/p28>`

这可能是什么？我错过了一些明显的东西吗？

PS：我还检查了通知是否来自相同的上下文、线程等。确实如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:12:28.067

您看到的两个 ID 很可能代表一个对象。它们之间的区别只是第一个是临时对象 ID，在创建时分配给对象，第二个是永久对象 ID，在对象存储到托管对象存储时分配给对象（参见[NSManagedObjectID 的 isTemporaryID](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectID_Class/Reference/NSManagedObjectID.html#//apple_ref/doc/c_ref/NSManagedObjectID)）。

要解决此问题，您可以在保存临时 MOC 之前调用[NSManagedObjectContext 的 gainPermanentIDsForObjects:error:。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html)这样，在保存传播期间插入的对象将只有一个 ID，并且 NSFetchedResultsControllerDelegate 方法应该只调用一次。

# scala - Scala直接在正则表达式上匹配大小写

> ID：15696595
> 
> 赞同：9
> 
> 时间：2013-03-29T02:51:28.847
> 
> 标签：scala

我正在尝试执行以下操作：

```
list.foreach {x => 
     x match {
       case """TEST: .*""" => println( "TEST" )
       case """OXF.*"""   => println("XXX")
       case _             => println("NO MATCHING")
     }
} 
```

这个想法是像 groovy switch case regex match 一样使用它。但我似乎无法编译。在scala中做这件事的正确方法是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-29T03:17:41.363

您可以匹配预编译的正则表达式（如下面的第一种情况），或者添加一个`if` 子句。请注意，您通常不想在每次`case`评估时重新编译相同的正则表达式，而是将其放在对象上。

```
val list = List("Not a match", "TEST: yes", "OXFORD")
   val testRegex = """TEST: .*""".r
   list.foreach { x =>
     x match {
       case testRegex() => println( "TEST" )
       case s if s.matches("""OXF.*""") => println("XXX")
       case _ => println("NO MATCHING")
     }
   } 
```

[在这里](https://stackoverflow.com/questions/15119238/scala-regular-expressions-string-delimited-by-double-quotes)查看更多信息和一些背景[信息](http://scala-programming-language.1934581.n4.nabble.com/scala-Regular-expression-matching-td1991061.html)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-06-26T21:10:01.627

开始`Scala 2.13`，可以`String`通过[取消应用字符串插值器](https://www.scala-lang.org/files/archive/api/2.13.x/scala/StringContext$s$.html#unapplySeq(s:String):Option[Seq[String]])直接模式匹配 a ：

```
// val examples = List("Not a match", "TEST: yes", "OXFORD")
examples.map {
  case s"TEST: $x" => x
  case s"OXF$x"    => x
  case _           => ""
}
// List[String] = List("", "yes", "ORD") 
```

# java - cancelSelection() 后 JFileChooser 不会消失

> ID：15696597
> 
> 赞同：0
> 
> 时间：2013-03-29T02:51:46.807
> 
> 标签：java, swing, jfilechooser

我正在尝试关闭 JFileChooser。请您告诉我为什么以下代码段中的 cancelSelection 方法在 5 秒后没有使其消失：

```
public static void main(String [] args){
    JFrame frame = new JFrame();
    frame.setVisible(true);
    final JFileChooser fchooser = new JFileChooser();
    fchooser.showOpenDialog(frame);
    try {Thread.sleep(5000);} catch (Exception e){}
    fchooser.cancelSelection();
} 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T03:01:48.407

您应该使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)来执行此操作，因为对 GUI 的更新应该在事件调度线程 (EDT) 上完成。

您需要在调用 showOpenDialog() 方法之前启动 Timer。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T02:55:27.960

在做出选择或取消对话框之前，调用`showOpenDialog()`不会返回。如果要在超时后关闭对话框，则必须在另一个线程中进行计时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T04:00:41.880

我同意您应该使用 Swing Timer，但如果您想要更多逻辑何时禁用/关闭对话框（例如，当没有更多数据可用时应该关闭的进度条），请实现 SwingWorker 或使用以下内容：

```
 public static void main(String... args) {
    JFrame frame = new JFrame();
    frame.setVisible(true);
    final JFileChooser fchooser = new JFileChooser();

    new Thread() {
        @Override
        public void run() {
            try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {}

            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    // This is run in EDT
                    fchooser.cancelSelection();
                }
            });
        }
    } .start();

    fchooser.showOpenDialog(frame);
} 
```

# ios - iOS 应用程序在后台扫描 BLE 设备

> ID：15696600
> 
> 赞同：0
> 
> 时间：2013-03-29T02:51:49.743
> 
> 标签：ios, background

我的应用程序使用scanForPeripheralsWithServices：扫描BLE设备，参数指定servicesUUIDs数组，有时可以快速发现外围设备，但有时需要等待片刻。我的应用程序是会话后台。那么，我怎样才能尽快发现外围设备背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T21:25:22.913

当应用程序在后台时，iOS 会不时启用蓝牙，但并不总是在监听。这是为了节省电池，因为 WiFi 和蓝牙共享同一天线，不能同时发送。如果您可以访问外围设备实现，为了使其尽快发现您的外围设备，请确保外围设备尽可能频繁地宣传自己。我相信 Apple 建议至少每 20 毫秒一次。

# iphone - 如何使用 iphone Mobile Safari 浏览器中的链接使用 Twitter 应用程序打开用户的 Twitter 个人资料

> ID：15696605
> 
> 赞同：1
> 
> 时间：2013-03-29T02:52:03.430
> 
> 标签：iphone, ipad, twitter

如何使用 Mobile Safari 中的链接使用 Twitter 应用程序打开用户的 Twitter 个人资料？

试过下面的代码，没有用。

```
tweetie:///user?screen_name=jessicaalba
twitter:///user?screen_name=jessicaalba 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:59:35.127

你的/太多了，应该是：

```
twitter://user?screen_name=jessicaalba 
```

另外，请参阅以下两个帖子：

[在 iPhone 上使用 twitter:// tweetie:// 自定义方案将 twitter 应用程序打开到特定的用户配置文件](https://stackoverflow.com/questions/3449972/using-twitter-tweetie-custom-scheme-on-iphone-to-open-twitter-application)

[如何使用 iOS 上的原生 Twitter 应用打开 Twitter 推文？](https://stackoverflow.com/questions/10424275/how-can-i-open-a-twitter-tweet-using-the-native-twitter-app-on-ios)

这个页面：

[http://handleopenurl.com/scheme/twitter](http://handleopenurl.com/scheme/twitter)

# python - Python 正则表达式错误

> ID：15696610
> 
> 赞同：0
> 
> 时间：2013-03-29T02:53:17.233
> 
> 标签：python, regex, url

我在 python 中寻找 URL 正则表达式，在阅读堆栈溢出后，我决定采用这个：[http](http://daringfireball.net/2010/07/improved_regex_for_matching_urls) ://daringfireball.net/2010/07/improved_regex_for_matching_urls并在我的 python 代码中使用它。

我放了这样的东西：

```
reg_url =
re.compile(r"""((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.‌​][a-z]{2,4}/)(?:[^\s()<>]+|(([^\s()<>]+|(([^\s()<>]+)))\*))+(?:(([^\s()<>]+|(‌​([^\s()<>]+)))\*)|[^\s`!()[]{};:`".,<>?«»“”‘’]))""",
re.DOTALL) 
```

(Python 2.7)

使用该正则表达式运行我的代码后，我收到以下错误：

> `\xe2`SyntaxError：第 60 行文件中的非 ASCII 字符“ ” `file.py`，但未声明编码；有关详细信息，请参见[http://www.python.org/peps/pep-0263.html](http://www.python.org/peps/pep-0263.html)

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:35:31.393

Python 在输入编码方面存在问题（在 2 中，而不是 3 中），并且在源代码中默认为 ASCII 编码。沿着 的行在文件的第一行或第二行添加注释`# encoding: utf-8`，您将解决此问题。您的错误消息中链接的 PEP 很好地解释了这一点。

但是，值得注意的是，您的正则表达式对我不起作用，而只需从您链接到的站点复制一个，这似乎非常不同，确实有效。您是否考虑过使用[urlparse](http://docs.python.org/2/library/urlparse.html)的可能性？

如果您确实想使用正则表达式，请注意以下几点：

```
regex_a= re.compile(r"(?i)\b((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'\".,<>?«»“”‘’]))")
regex_b = re.compile(r"""((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.‌​][a-z]{2,4}/)(?:[^\s()<>]+|(([^\s()<>]+|(([^\s()<>]+)))\*))+(?:(([^\s()<>]+|(‌​([^\s()<>]+)))\*)|[^\s`!()[]{};:`".,<>?«»“”‘’]))""", re.DOTALL)

regex_a.match("http://www.www.com/thisisatest") # returns a match object
#regex_b.match("http://www.www.com/thisisatest") # edit: actually, this just hangs... 
```

在您的版本中，似乎有许多大括号、圆括号和方括号已删除其转义，以及在奇数位置的 U+200C 和 U+200B 字符。

# c# - 是否可以将 XAML ItemSource 绑定到由 Where 查询生成的 IEnumerable？

> ID：15696612
> 
> 赞同：0
> 
> 时间：2013-03-29T02:53:50.577
> 
> 标签：c#, linq, xaml, windows-phone

我正在创建一个 Windows Phone 应用程序，并希望使用 Pivots 将不同的视图显示到相同的数据中。

为此，我创建了属性：

```
IEnumerable<Item> Items { get; set; };
IEnumerable<Item> ItemView1 { get { return Items.where(value => value.Property) }};        
IEnumerable<Item> ItemView2 { get { return Items.where(value => value.Property) }}; 
```

然后我在我看来绑定到他们：

```
<phone:PivotItem>
    <phone:LongListSelector ItemsSource="{Binding ItemView1}">
</phone:PivotItem>

<phone:PivotItem>
    <phone:LongListSelector ItemsSource="{Binding ItemView2}">
</phone:PivotItem> 
```

在向`Items`属性添加项目后，我调用：

```
NotifyPropertyChanged("ItemView1");
NotifyPropertyChanged("ItemView2"); 
```

但是，当我运行应用程序时，我的视图不会使用新结果更新，但如果我创建新列表，它就会起作用。不能像这样直接绑定到结果吗？如果没有，是否有任何建议的方式我应该做这样的事情，希望不必一直构建多个列表？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T03:20:49.293

你提出了错误的事件。

简单的内容绑定控件，如文本块等，自动装配到 INotifyPropertyChanged，如果上下文对象实现该接口，但基于集合的控件（我认为也是基于选择器的）查找 INotifyCollectionChanged。

# image - OpenCL read_imagef 奇怪的行为

> ID：15696616
> 
> 赞同：0
> 
> 时间：2013-03-29T02:54:29.860
> 
> 标签：image, parallel-processing, opencl, gpu

我有一个 CL_FLOAT 格式的图像并存储所有 RGBA 通道。现在图像的每 4 个像素都有整数存储在那里，我将它们存储为：

```
image[i * 4 + 3].x = *(float*)(&someInt);
image[i * 4 + 3].y = *(float*)(&someInt2);
etc. 
```

由于我需要这些是整数（而不是浮点数），其余像素必须存储浮点数，所以我在这里没有太多选择。

当我从 OpenCL 读回图像时，我得到了正确的值，问题出现在 OpenCL 内核中：

每当我读到这样的图像时（采样器设置为最近的过滤）：

```
float4 fourthPixel = read_imagef(img, sampler, coords); 
```

我尝试将其转换为整数

```
int id = as_int(fourthPixel.x); 
```

我没有读到正确的数字（它总是返回 0，除非数字以整数形式非常高）。

到目前为止，我得到了几分 - 如果我存储像 1505353234 这样的数字，它可以工作，给我 6539629947781120.000000 - 这是正确的。如果我存储较小的数字，似乎 read_imagef 只是钳位然后下降到 0。

所以很明显，所有非规范化数字都被限制为零。那么，有没有什么好的方法可以实际强制 read_imagef 不将非规范化数字钳制为零，而不添加进一步的指令（我可以添加 0x7f000000 等 - 但我需要代码中的性能，所以这个解决方案是不可接受的）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:07:44.183

所以显然通过 read_imagei 读取图像工作正常。我还查看了规范，发现您的设备*可以将*非规范化浮点数钳制为零。

# java - 在 Linux 与 Windows 上编写 Java 文件时的额外新行

> ID：15696622
> 
> 赞同：1
> 
> 时间：2013-03-29T02:55:02.583
> 
> 标签：java, linux, windows, ubuntu, file-io

我有一个我正在使用 Java 编写的 .txt 文件，该文件具有非常具体的新行排列。当我在 Windows 上编写文件时，这种安排是强制执行的，但是当我在 Ubuntu 上运行相同的代码时，每个应该有的地方都有两个新行。有谁知道这可能是什么原因造成的？这是我用来编写的代码：

```
List<String>toBeWrittenList = new ArrayList<String>();
    for(int x=0; x < finalList.size(); x++){
        toBeWrittenList.add("\n");
        toBeWrittenList.add("==level " + (x+1) +"==");
        for(int y=0; y < finalList.get(x).size();y++){
            if(finalList.get(x).get(y).equals("N"))
                toBeWrittenList.add(y+1 + ". null");
            else
                toBeWrittenList.add(y+1 + ". " + finalList.get(x).get(y));
        }
    }
    try {
        writeSmallTextFile(toBeWrittenList, FILE_NAME3);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

static void writeSmallTextFile(List<String> aLines, String aFileName) throws IOException {
        Path path = Paths.get(aFileName);
        Files.write(path, aLines, ENCODING);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:51:18.830

我通常使用 PrintWriter 方法 println 来创建文本文件。println 将检查您的操作系统并选择正确的馈线（\n 或 \n\r）。

Files.write 中可能存在问题。你是自己写的课吗？还是您使用的是 3rd 方库？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T02:59:45.007

Windows 使用“\r\n”对字符来区分换行符，而 Linux 将“\n”视为换行符，并且看似“\r”。因此 "\r\n" 在 Linux 中看起来更像是两个换行符。

将文本文件`dos2unix`复制到 Linux 机器时运行它们，将“\r\n”翻译成“\n”。将文本文件`unix2dos`复制回 Windows 时运行它们，将“\n”翻译回“\r\n”对。

# arrays - 取数组的平均值

> ID：15696633
> 
> 赞同：1
> 
> 时间：2013-03-29T02:56:21.953
> 
> 标签：arrays, perl

我想获得 1 个或多个数组的平均值。

```
my @w = (0,2);
my @x = (1,3);
my @y = (2,2);
my @z = (1,1); 
```

这样上面四个数组的平均值是`(1,2)`因为 (0+1+2+1)/4 = 1 和 (2+3+2+1)/4 = 2。

的平均值`my @r = (3,4,1,4,5)`是`(3/5, 4/5, 1/5, 4/5/, 1)`。

这是我的第一个解决方案。

```
my @AoA = (\@w, \@x, \@y, \@z);
my @sums;

foreach my $column(0..$#@w){
    my $average;
    my $size = @w;
    foreach  my  $aref (@AoA){
     $average += ($aref -> [$column]) / $size ;
    }
  push(@sums, $average);
 } 
```

这可能会也可能不会。有没有更简单的方法来做到这一点？也许是模块中的一个函数？

我的第二个解决方案。我认为现在我想这个实际上更容易：

```
my $scalar = @r;
my @new_r;

foreach my $x (@r) { 
    $x = $x / $scalar; 
    push(@new_r, $x);
} 
```

再次可能会或可能不会工作。可能有一种更简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T03:33:47.390

给定

```
use List::Util qw( sum );
sub avg { sum(@_)/@_ } 
```

你可以使用

```
my @w = (0,2);
my @x = (1,3);
my @y = (2,2);
my @z = (1,1);

my @avg = map {
   my $i = $_;
   avg map $_->[$i], \@w, \@x, \@y, \@z
} 0..$#w; 
```

或者，如果您有 AoA：

```
my @matrix = ([0,2], [1,3], [2,2], [1,1]);

my @avg = map {
    my $i = $_;
    avg map $_->[$i], @matrix
} 0..$#{$matrix[0]}; 
```

至于 的“平均值” `@r`，

```
my @avg_r = map $_/@r, @r; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T03:30:17.830

大概是这样的？

```
use strict;
use warnings;

use List::Util 'sum';

my @w = (0, 2);
my @x = (1, 3);
my @y = (2, 2);
my @z = (1, 1);

my @arrays = \(@w, @x, @y, @z);

my @avg;
for my $i (0..$#w) {
  $avg[$i] =  sum(map $_->[$i], @arrays) / @arrays;
}
print "@avg\n";

my @r = (3, 4, 1, 4, 5);
my @avg_r = map $_ / @r, @r;

print "@avg_r\n"; 
```

**输出**

```
1 2
0.6 0.8 0.2 0.8 1 
```

# asp.net-mvc - 如何配置 Account LogOn 的 MVC3 本地化？

> ID：15696635
> 
> 赞同：1
> 
> 时间：2013-03-29T02:56:29.853
> 
> 标签：asp.net-mvc, localization

我最近将我的 mvc3 本地化结构从 lang 作为子域 (fr.domain.com) 切换为 lang 作为路径 (domain.com/fr)。

一切正常，但自动重定向到帐户登录。

假设我没有通过身份验证，我尝试访问 domain.com/fr/test 我被重定向到 domain.com/Account/LogOn?ReturnUrl...

如何配置我的网站以便重定向到 /fr/Account/LogOn?ReturnUrl...

编辑 ：

我使用路线映射

```
 routes.MapRoute(
        "DefaultLocalized", // Route name
        "{lang}/{controller}/{action}/{id}", // URL with parameters
        new { lang = "en", controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        , new { lang = "fr" }
    );

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    ); 
```

解决方案：这是我基于 developer10214 建议的解决方案实现

```
public ActionResult LogOn()
        {
            if (System.Web.HttpContext.Current.Request.Url.Query.Contains("%2ffr%2f") && System.Threading.Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName != "fr")
                return Redirect("/fr/Account/LogOn" + System.Web.HttpContext.Current.Request.Url.Query);

            LogOnModel model = new LogOnModel() { UserName = "", Password = "" };
            return View(model);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:34:41.873

我认为您被重定向到通用帐户/登录操作的原因是，此路径是在您的 web.config 的成员资格部分中配置的。如果您未登录，则对受 Authorize 属性保护的操作的每个请求都将在那里结束。

一个可能的解决方案可能是：

*   通过从返回 url 中提取 lang 参数并重定向到正确的登录操作来更改登录操作

# bash - 在bash中循环参数

> ID：15696636
> 
> 赞同：4
> 
> 时间：2013-03-29T02:56:40.927
> 
> 标签：bash, shell

在 bash 中，我可以遍历所有参数 $@。有没有办法获取当前参数的索引？（以便我可以参考下一个或上一个。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T04:36:33.547

您可以遍历参数编号，并使用间接扩展 ( `${!argnum}`) 从中获取参数：

```
for ((i=1; i<=$#; i++)); do
    next=$((i+1))
    prev=$((i-1))
    echo "Arg #$i='${!i}', prev='${!prev}', next='${!next}'"
done 
```

请注意，`$0`（ 的“前一个”参数`$1`）将类似于“-bash”，而最后一个之后的“下一个”参数将显示为空白。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T03:00:39.037

与您指定的不完全一样，但您可以通过多种不同的方式迭代参数。

例如：

```
while test $# -gt 0
do
    echo $1
    shift
done 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-29T04:07:32.007

将位置参数复制到数组非常简单：

```
$ set -- a b c d e    # set some positional parameters
$ args=("$@")         # copy them into an array
$ echo ${args[1]}     # as we see, it's zero-based indexing
b 
```

并且，迭代：

```
$ for ((i=0; i<${#args[@]}; i++)); do
    echo "$i  ${args[i]}  ${args[i-1]}  ${args[i+1]}"
  done
0  a  e  b
1  b  a  c
2  c  b  d
3  d  c  e
4  e  d 
```

# artificial-intelligence - 平均奖励问题的 SARSA 算法

> ID：15696637
> 
> 赞同：5
> 
> 时间：2013-03-29T02:56:43.753
> 
> 标签：artificial-intelligence, reinforcement-learning, q-learning

我的问题是关于在强化学习中使用 SARSA 算法来解决一个*不折不扣*的、持续的（非偶发的）问题（它可以用于这样的问题吗？）

我一直在研究 Sutton 和 Barto 的教科书，他们展示了如何修改 Q-learning 算法，以便将其用于未折扣的问题。他们在第 6.7 章中将新算法（针对未折扣问题）称为 R 学习。基本上，在 R 学习中，每次迭代 Q(s,a) 的更新规则是：

Q(s,a) = Q(s,a) + alpha * [r - rho + max_a{Q(s',a)} - Q(s,a)]

这里，只有在状态 s 选择了贪婪动作时，rho 才会在每次迭代中更新。rho 的更新规则是：

rho = rho + beta * [r - rho + max_a{Q(s',a)} - max_a{Q(s,a)}]

（这里，alpha 和 beta 是学习参数。）现在，我的问题是关于 SARSA，而不是 Q-learning。我想修改 SARSA 算法，使其适用于平均奖励（未折扣）问题，就像修改 Q-learning 以用于平均奖励问题一样（我不知道这是否可能？） . 但是，在文献中，我找不到关于如何针对平均奖励问题修改 SARSA 的确切解释。

这是我对如何在未折现问题中使用 SARSA 的猜测。我猜想更新规则应该是：

Q(s,a) = Q(s,a) + alpha * [r - rho + Q(s',a') - Q(s,a)],

其中 a' 是在状态 s 实际选择的动作。这似乎相当明显。但是 rho 应该如何更新呢？我的猜测是，由于 SARSA 是一种 on-policy 算法，因此 rho 应该始终在每次迭代时更新——无论是否在 s 处选择了贪婪动作——并且更新规则应该是：

rho = rho + beta * [r - rho + Q(s',a') - Q(s,a)]。

有人能告诉我这是否正确吗？还是应该根据状态 s 和 s' 的最优动作来更新 rho？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T22:14:12.000

首先，问题在于未折现的非情节任务是病态问题，因为预期的奖励是发散的（除非奖励具有某种特性，使它们在未来递减）。

编辑：对不起，我已经查阅了书中引用的章节，并注意到 R-learning 确实是一种解决不打折的非情节任务的方法。

AD REM：我认为以这种方式更新 rho 背后的想法是估计*当前*策略的平均奖励。因此，我猜测即使 SARSA 是一种基于策略的方法，您也应该仅在选择了贪婪操作时才更新 rho。那是因为如果您想准确估计*当前*政策的平均回报，您应该只考虑在您遵循此政策时可能发生的事件。由于探索步骤而发生的事件并不代表“此政策的价值”的准确样本。这当然只是一个直观的论点——我没有任何 R-learning 经验，也没有正式分析过这个问题。

# javascript - 如何使用 window.onload 函数分配验证回调函数

> ID：15696639
> 
> 赞同：0
> 
> 时间：2013-03-29T02:57:00.423
> 
> 标签：javascript, forms, validation, callback

您好，我正忙于使用 javascript 设置表单验证。我想知道是否有人知道如何使用 window.onload 函数来分配验证回调函数。javascript 需要在它自己的文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:07:40.817

只需像这样在 onload 函数体中分配您的验证回调

```
yourform.onsubmit=function(){
    return your_validation_func();
} 
```

# regex - 验证中的正则表达式或运算符

> ID：15696640
> 
> 赞同：0
> 
> 时间：2013-03-29T02:57:05.590
> 
> 标签：regex

在正则表达式中，我使用以下内容来验证电子邮件地址：

```
\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2}\b 
```

在这最后一部分

```
.[A-Z]{2}\b 
```

例如，我正在尝试选择以`.It`or`.De`或`.Fr`仅结尾的电子邮件，而忽略任何其他结尾。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:58:49.470

如果您只想选择那些域名，请使用非捕获组：

```
\.(?:it|de|fr) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:00:22.803

你需要：

*   一个字面点`\.`
*   用忽略大小写向后看
*   输入`$`锚的结尾

像这样：

```
.*(?<=\.(?i)(it)|(de)|(fr))$ 
```

# signalr - 使用 SignalR 摆脱 iOS Safari 上的旋转“加载”外观

> ID：15696642
> 
> 赞同：0
> 
> 时间：2013-03-29T02:57:19.400
> 
> 标签：signalr

有什么方法可以禁用 Safari for iOS 上使用 SignalR 的网页的旋转“加载”外观？我知道它可能正在使用长轮询，但这使得页面看起来从未完成加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:25:51.403

这是一个已知问题，所有浏览器修复都没有直接的工作，这就是它尚未修复的原因。

见[https://github.com/SignalR/SignalR/issues/215](https://github.com/SignalR/SignalR/issues/215)

# ruby - 如何在rails 3.12中从主页呈现集合

> ID：15696650
> 
> 赞同：1
> 
> 时间：2013-03-29T02:58:30.357
> 
> 标签：ruby, ruby-on-rails-3, refinerycms, refinery

在 Rails 中，我将有一个带有 index、show 和 crud 方法的小部件控制器。
索引控制器将有一个简单的

```
@widgets = Widget.all
respond_to do |format|
  format.html
  format.json {render :json => @widgets} 
```

然后，在我的主页或主应用程序文件夹中的任何页面上，我可以说

```
<% @widgets.each do |w| %>
     <p><%= w.name %></p>
<%end%> 
```

使用 Refinery，我有一个小部件引擎，而这些引擎中的控制器没有标准的 index、show 和 crud 方法。如果我用上面的代码覆盖炼油厂 pages_controller.rb 中的 home 操作，我会收到错误

未初始化的常量 Refinery::PagesController::Widget

我的问题是：如何在我的炼油厂引擎中引用类，以便我可以将它们包含在我的主要 Rails 应用程序的视图中？

示例：app.main.views.index.html.erb

```
 <h1> this is my home page.  We sell all sorts of stuff including: </h1>

 <% @widgets.each do |w| %>
      <p><%= w.name %></p>
 <%end%>

 <% @gadgets.each do |g| %>
     <p><%= g.name %></p>
 <%end%> 
```

小部件和小工具都是精炼引擎。我有一个 vanilla rails 应用程序可以做到这一点并且它可以工作，但我想知道如何在炼油厂中做到这一点，因为弄清楚这一点将为我打开世界。有人可以建议或指出一些我可能忽略的文档，这些文档会有所帮助。

**编辑** 这是位于 app>controllers>refinery 目录中的 pages_controller.rb 中的主操作：

```
 def home
  @widgets = Widget.all
  respond_to do |format|
    format.html
    format.json { render json: @widgets}
  end  
  #render_with_templates?
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:05:27.610

Refinery CMS 使用复数模型名称命名其引擎名称空间。然后它将引擎名称空间嵌套在 Refinery 名称空间中。因此，在主应用程序结构的视图中查询所有小部件的正确方法是

```
@widgets = Refinery::Widgets::Widget.all 
```

# objective-c - 如何连接类？类连接到窗口

> ID：15696655
> 
> 赞同：0
> 
> 时间：2013-03-29T02:58:44.687
> 
> 标签：objective-c, xcode, macos, cocoa

下面如何使用代码来实现？类连接到窗口。

![在此处输入图像描述](../Images/5c6791b07a1c5fb1e2c748b9dd16ee1d.png)

```
ButtonController *btn=[[ButtonController alloc]init]; 
[btnAbout.cell setTarget:btn]; 
```

如何实现 mouseEnter 事件？

```
#import "ButtonController.h"

@implementation ButtonController

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code here.
        NSButton *button = (NSButton *)self;
        NSLog(@"%ldsss",(long)button.tag);
    }

    return self;
}

- (void)drawRect:(NSRect)dirtyRect
{
    // Drawing code here.
}
-(void)mouseEntered:(NSEvent *)theEvent{

    [self mouseEntered:theEvent];
    if (self.tag == 1) {
        NSLog(@"ee");
    }
}
@end 
```

==================================================== =====

==================================================== =====

==================================================== =====

```
#import "ButtonController.h" 
```

==================================================== =====

```
ButtonController *btnMax =[[ButtonController alloc]initWithFrame:CGRectMake(15, 0, 14, 14)];
[btnMax setImage:[NSImage imageNamed:@"max"]];
[btnMax setAlternateImage:[NSImage imageNamed:@"maxDown"]];
[[btnMax cell]setHighlightsBy:NSContentsCellMask];
[btnMax setBordered:NO];
[btnMax setTag:2];
[viewGo addSubview:btnMax]; 
```

# vaadin - 负载测试 vaadin 7.0.4 返回错误 No UIProvider

> ID：15696657
> 
> 赞同：2
> 
> 时间：2013-03-29T02:59:11.613
> 
> 标签：vaadin, load-testing

我想对一个有 5000 个用户的 vaadin 应用程序进行负载测试。我发现这个[https://vaadin.com/wiki/-/wiki/Main/JMeter%20Testing](https://vaadin.com/wiki/-/wiki/Main/JMeter%20Testing)并试图用单个用户进行模拟。通过最简单的登录和注销步骤，我在播放过程中遇到了这个错误。

> 没有 UIProvider 为请求返回 UI

知道这个错误是什么或如何解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:04:36.527

看起来 jMeter 示例适用于 Vaadin 6。Vaadin 7 重构了 servlet 类，Application 类现在是 UI 类。因此，而不是 web.xml 的那部分看起来像这样：

```
<servlet>
    <servlet-name>FeatureBrowser</servlet-name>
    <servlet-class>com.vaadin.terminal.gwt.server.ApplicationServlet</servlet-class>
    <init-param>
        <param-name>application</param-name>
        <param-value>com.vaadin.demo.featurebrowser.FeatureBrowser</param-value>
    </init-param>

    <init-param>
        <param-name>disable-xsrf-protection</param-name>
        <param-value>true</param-value>
    </init-param>
</servlet> 
```

它看起来像这样：

```
<servlet>
    <servlet-name>FeatureBrowser</servlet-name>
    <servlet-class>com.vaadin.server.VaadinServlet</servlet-class>
    <init-param>
        <param-name>UI</param-name>
        <param-value>com.vaadin.demo.featurebrowser.FeatureBrowserUI</param-value>
    </init-param>

    <init-param>
        <param-name>disable-xsrf-protection</param-name>
        <param-value>true</param-value>
    </init-param>
</servlet> 
```

假设 FeatureBrowser 类重命名为 FeatureBrowserUI，并继承了 UI 类，以及 Vaadin 7 引入的所有其他小更改，如迁移指南中所述：[链接](https://vaadin.com/wiki/-/wiki/Main/Migrating+from+Vaadin+6+to+Vaadin+7)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-14T20:25:25.477

Vaadin 使用了很多技术 ID，因此为了创建逼真的模拟，您需要关联这些 ID。XSRF 保护只是相关性的一部分。

您可以阅读此[博客](https://www.ubik-ingenierie.com/blog/load-testing-vaadin-applications-jmeter-ubikloadpack/)，其中说明了 JMeter 的商业插件的使用，该插件为您执行自动关联。您只需录制即可回放，所有关联均由插件完成。

免责声明：我们是此解决方案的提供者

# c - 为什么 C 编译器不接受这个条件赋值？

> ID：15696658
> 
> 赞同：0
> 
> 时间：2013-03-29T02:59:18.607
> 
> 标签：c, iar

我想知道为什么二进制数不能与按位运算符一起使用？

```
//works
msgSize = (*(msgbody+1) & 0x80)?*(msgbody+5):*(msgbody+3); 

//doesn't compile
msgSize = (*(msgbody+1) & 0b10000000)?*(msgbody+5):*(msgbody+3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:16:35.533

C 不支持二进制文字；如果它们可用，它们就是扩展。我建议您的编译器发出错误，因为它无法识别二进制文字`0b10000000`。因此，您的编译器可能也会对此发出错误：

```
int main(void) {
    int msgSize = 0b10000000;
    return 0;
} 
```

我建议使用`0x80`or`1 << 7`代替。

# mysql - Grocery CRUD 库中的搜索问题

> ID：15696663
> 
> 赞同：1
> 
> 时间：2013-03-29T02:59:39.943
> 
> 标签：mysql, codeigniter, grocery-crud

在 Codeigniter 中通过 Grocery CRUD 库使用搜索查询时，在表中搜索数据的“0”值会得到完整的表。为什么？

```
 $crud = new grocery_CRUD();
    $crud->set_table('listing');
$crud->field_type('SwimmingPool','dropdown',array('1'=>'Yes', '0'=>'No'));
$output = $crud->render(); 
```

现在在grocery_CRUD 的输出中搜索SwimmingPool = 0 的值，得到完整的表（所有值）。虽然它适用于 SwimmingPool =1 并正确过滤结果。我仔细检查了 MySQL 数据库表“列表”，并且 SwimmingPool 的值只有 0 或 1。这是某种错误，如果搜索 0，搜索查询会导致完整的表。任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:18:28.303

这可能是杂货杂货的错误，将 0 解释为 null，因此它不应用搜索过滤器。我建议在 Github 上 Grocery 的 bug tracker 填写一份 bug 报告

# javascript - onkeyup 在 hide() 上不起作用

> ID：15696666
> 
> 赞同：0
> 
> 时间：2013-03-29T03:00:02.550
> 
> 标签：javascript, jquery

我试图显示和隐藏 div 内容取决于用户的输入。

这是我的代码：

```
<input type="text" name="pass" id="pass" onkeyup="check_input(this.value)">

<div id="repeated_pattern" style="display:none">
    <b>REPEATED PATTERN</b>
    <p>Repeated characters</p>
</div>

<script>
function check_input(value){
     //this would check if there are 3 or more characters repeated consecutively
     var repeat_pattern = /(.)\1\1/.test(value);  

     if(repeat_pattern)  { 
        $("#repeated_pattern").show(500); 
     }else{ 
        $("#repeated_pattern").hide(500); 
     }
}    
</script> 
```

测试：

1.  当我尝试输入`gg`时，没有显示 div 内容，所以结果还可以
2.  当我尝试输入`ggg`时，会显示 div 内容，所以结果还可以
3.  但是当我尝试删除它时`g`，它就是现在`gg`。它应该是 div 内容必须隐藏但仍然显示。`onkeyup`无法正常使用该`hide()`功能。

如何使用 hide() onkeyup 工作，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:22:04.680

我收到此错误：

```
ReferenceError: check_input is not defined 
```

尝试在 Javascript 中设置事件处理程序，使其在范围内：

[http://jsfiddle.net/vHREF/1/](http://jsfiddle.net/vHREF/1/)

Javascript：

```
// Event handlers
if(document.addEventListener)
document.getElementById('pass').addEventListener('keyup',check_input,false);
// Good old Internet Explorer event handling code
if(document.attachEvent)
document.getElementById('pass').attachEvent('keyup',check_input);

function check_input() {
    var value = $(this).val();
    //this would check if there are 3 or more characters repeated consecutively
    var repeat_pattern = /(.)\1\1/.test(value);

    if (repeat_pattern) {
        $("#repeated_pattern").show(500);
    } else {
        $("#repeated_pattern").hide(500);
    }
} 
```

HTML：

```
I'm trying to show and hide div contents depends on the input of the user. Here are my codes:
<input type="text" name="pass" id="pass">
<div id="repeated_pattern" style="display:none"> <b>REPEATED PATTERN</b>

    <p>Repeated characters</p>
</div> 
```

# wpf - 从子窗口绑定 wpf

> ID：15696669
> 
> 赞同：3
> 
> 时间：2013-03-29T03:00:29.547
> 
> 标签：wpf, vb.net, xaml, binding, childwindow

我正在学习 XAML，但在将控件内容绑定到子窗口中的设置属性时遇到问题。

这是我为使其更清晰而制作的一个简单示例。从主窗口调用孩子：

```
Private Sub Button1_Click(sender As Object, e As RoutedEventArgs) Handles Button1.Click
    Dim OwndWindow As New WindowChild
    OwndWindow.Owner = Me
    OwndWindow.ShowDialog()
End Sub 
```

这是孩子：

```
<Window x:Class="WindowChild"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:src="clr-namespace:WpfApplication2"
    Title="WindowChild" Height="300" Width="300">
    <Window.Resources>
        <ObjectDataProvider x:Key="ObjDatPro" ObjectType="{x:Type src:TestSettings}"></ObjectDataProvider>
    </Window.Resources>

    <Grid DataContext="{Binding Source={StaticResource ObjDatPro}}">
        <CheckBox Content="CheckBox" Margin="0" HorizontalAlignment="Center" VerticalAlignment="Center"
                  IsChecked="{Binding Default.BoolSetting, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
    </Grid>
</Window> 
```

此时 Visual Studio 报告错误：*名称空间“clr-namespace:WpfApplication2”中不存在名称“TestSettings”。*（第 7 行，第 49 列）

我尝试将此部分更改为`WindowChild.TestSettings`，但随后 VS 抱怨不支持嵌套类型。

将 CLR 命名空间更改为`WpfApplication2.WindowChild`甚至`WindowChild`不起作用，VS 说：*未定义的 CLR 命名空间。“clr-namespace” URI 引用了无法找到的命名空间“WindowChild”。*

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T19:00:55.697

[来自 OP](https://stackoverflow.com/questions/15696669/wpf-binding-from-child-window#comment22306429_15696669)：

> 我终于想通了：而不是使用`<Window.Resources>`它`ObjectDataProvider`需要的只是`<Window.DataContext><src:TestSettings/></Window.DataContext>`.

# c++ - MFC 关于句柄消息

> ID：15696671
> 
> 赞同：2
> 
> 时间：2013-03-29T03:00:47.317
> 
> 标签：c++, mfc

我参考了[关于处理消息](http://www.codeproject.com/Articles/598/Windows-Message-Handling-Part-2?fid=789&fr=11#xx0xx)，并练习实现它

我想发送用户定义的消息，例如 WM_MESSAGE，从关于对话框使用底部单击发送消息（SendMessage）用于主对话框接收。在主对话框（HandleMessageDlg.cpp 和 HandleMessage.h）中，我创建按钮来显示关于对话框，在关于对话框（AboutDlg.cpp 和 AboutDlg.h）中，我创建按钮来发送 WM_MESSAGE

实现如下：HandleMessageDlg.cpp

```
// HandleMessageDlg.cpp : 實作檔
//

#include "stdafx.h"
#include "HandleMessage.h"
#include "HandleMessageDlg.h"
#include "AboutDlg.h"

#ifdef _DEBUG
#define new DEBUG_NEW
#endif

// 對 App About 使用 CAboutDlg 對話方塊

class CAboutDlg : public CDialog
{
public:
    CAboutDlg();

// 對話方塊資料
    enum { IDD = IDD_ABOUTBOX };

    protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV 支援

// 程式碼實作
protected:
    DECLARE_MESSAGE_MAP()
public:
    afx_msg void OnBnClickedButton1();
};

CAboutDlg::CAboutDlg() : CDialog(CAboutDlg::IDD)
{
}

void CAboutDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(CAboutDlg, CDialog)
    ON_BN_CLICKED(IDC_BUTTON1, &CAboutDlg::OnBnClickedButton1)
END_MESSAGE_MAP()

// CHandleMessageDlg 對話方塊

CHandleMessageDlg::CHandleMessageDlg(CWnd* pParent /*=NULL*/)
    : CDialog(CHandleMessageDlg::IDD, pParent)
{
    m_hIcon = AfxGetApp()->LoadIcon(IDR_MAINFRAME);
}

void CHandleMessageDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(CHandleMessageDlg, CDialog)
    ON_WM_SYSCOMMAND()
    ON_WM_PAINT()
    ON_WM_QUERYDRAGICON()
    ON_MESSAGE (WM_MESSAGE, OnHandleMessage)
    //}}AFX_MSG_MAP
    ON_BN_CLICKED(IDC_BUTTON1, &CHandleMessageDlg::OnBnClickedButton1)
END_MESSAGE_MAP()

// CHandleMessageDlg 訊息處理常式

BOOL CHandleMessageDlg::OnInitDialog()
{
    CDialog::OnInitDialog();

    // 將 [關於...] 功能表加入系統功能表。

    // IDM_ABOUTBOX 必須在系統命令範圍之中。
    ASSERT((IDM_ABOUTBOX & 0xFFF0) == IDM_ABOUTBOX);
    ASSERT(IDM_ABOUTBOX < 0xF000);

    CMenu* pSysMenu = GetSystemMenu(FALSE);
    if (pSysMenu != NULL)
    {
        CString strAboutMenu;
        strAboutMenu.LoadString(IDS_ABOUTBOX);
        if (!strAboutMenu.IsEmpty())
        {
            pSysMenu->AppendMenu(MF_SEPARATOR);
            pSysMenu->AppendMenu(MF_STRING, IDM_ABOUTBOX, strAboutMenu);
        }
    }

    // 設定此對話方塊的圖示。當應用程式的主視窗不是對話方塊時，
    // 框架會自動從事此作業
    SetIcon(m_hIcon, TRUE);         // 設定大圖示
    SetIcon(m_hIcon, FALSE);        // 設定小圖示

    // TODO: 在此加入額外的初始設定

    return TRUE;  // 傳回 TRUE，除非您對控制項設定焦點
}

void CHandleMessageDlg::OnSysCommand(UINT nID, LPARAM lParam)
{
    if ((nID & 0xFFF0) == IDM_ABOUTBOX)
    {
        CAboutDlg dlgAbout;
        dlgAbout.DoModal();
    }
    else
    {
        CDialog::OnSysCommand(nID, lParam);
    }
}

// 如果將最小化按鈕加入您的對話方塊，您需要下列的程式碼，
// 以便繪製圖示。對於使用文件/檢視模式的 MFC 應用程式，
// 框架會自動完成此作業。

void CHandleMessageDlg::OnPaint()
{
    if (IsIconic())
    {
        CPaintDC dc(this); // 繪製的裝置內容

        SendMessage(WM_ICONERASEBKGND, reinterpret_cast<WPARAM>(dc.GetSafeHdc()), 0);

        // 將圖示置中於用戶端矩形
        int cxIcon = GetSystemMetrics(SM_CXICON);
        int cyIcon = GetSystemMetrics(SM_CYICON);
        CRect rect;
        GetClientRect(&rect);
        int x = (rect.Width() - cxIcon + 1) / 2;
        int y = (rect.Height() - cyIcon + 1) / 2;

        // 描繪圖示
        dc.DrawIcon(x, y, m_hIcon);
    }
    else
    {
        CDialog::OnPaint();
    }
}

// 當使用者拖曳最小化視窗時，
// 系統呼叫這個功能取得游標顯示。
HCURSOR CHandleMessageDlg::OnQueryDragIcon()
{
    return static_cast<HCURSOR>(m_hIcon);
}

LRESULT CHandleMessageDlg::OnHandleMessage(WPARAM wParam, LPARAM lParam) {
    TRACE(L"wParam %d, lParam %d", wParam, lParam);
    return 0;
}

void CAboutDlg::OnBnClickedButton1()
{
    // TODO: 在此加入控制項告知處理常式程式碼
    GetParent()->SendMessage(WM_MESSAGE, 0, 0);
}

void CHandleMessageDlg::OnBnClickedButton1()
{
    // TODO: 在此加入控制項告知處理常式程式碼
    CAboutDlg AboutDlg;
    AboutDlg.DoModal();
} 
```

[HandleMessageDlg.cpp](https://www.dropbox.com/s/car7htjsu7weybm/HandleMessage.cpp)
HandleMessage.h

```
// HandleMessageDlg.h : 標頭檔
//

#pragma once

// CHandleMessageDlg 對話方塊
class CHandleMessageDlg : public CDialog
{
// 建構
public:
    CHandleMessageDlg(CWnd* pParent = NULL);    // 標準建構函式

// 對話方塊資料
    enum { IDD = IDD_HANDLEMESSAGE_DIALOG };

    protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV 支援
    afx_msg LRESULT OnHandleMessage(WPARAM wParam, LPARAM lParam);

// 程式碼實作
protected:
    HICON m_hIcon;

    // 產生的訊息對應函式
    virtual BOOL OnInitDialog();
    afx_msg void OnSysCommand(UINT nID, LPARAM lParam);
    afx_msg void OnPaint();
    afx_msg HCURSOR OnQueryDragIcon();

    DECLARE_MESSAGE_MAP()
public:
    afx_msg void OnBnClickedButton1();
}; 
```

[HandleMessage.h](https://www.dropbox.com/s/tqa0al1p44xqe90/HandleMessageDlg.h)
AboutDlg.cpp

```
// AboutDlg.cpp : 實作檔
//

#include "stdafx.h"
#include "HandleMessage.h"
#include "HandleMessageDlg.h"
#include "AboutDlg.h"

// AboutDlg 對話方塊

IMPLEMENT_DYNAMIC(AboutDlg, CDialog)

AboutDlg::AboutDlg(CWnd* pParent /*=NULL*/)
    : CDialog(AboutDlg::IDD, pParent)
{

}

AboutDlg::~AboutDlg()
{
}

void AboutDlg::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
}

BEGIN_MESSAGE_MAP(AboutDlg, CDialog)    
END_MESSAGE_MAP()

// AboutDlg 訊息處理常式 
```

[关于Dlg.cpp 关于](https://www.dropbox.com/s/vg515u2fufgsspe/AboutDlg.cpp)
Dlg.h

```
#pragma once

#define  WM_MESSAGE WM_USER+0x100

// AboutDlg 對話方塊

class AboutDlg : public CDialog
{
    DECLARE_DYNAMIC(AboutDlg)

public:
    AboutDlg(CWnd* pParent = NULL);   // 標準建構函式
    virtual ~AboutDlg();

// 對話方塊資料
    enum { IDD = IDD_ABOUTBOX };

protected:
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV 支援

    DECLARE_MESSAGE_MAP()
}; 
```

[AboutDlg.h](https://www.dropbox.com/s/udlh491rjsln8gb/AboutDlg.h)
现在我有问题

什么参数与 WM_MESSAGE 相关，是 wParam 还是 lParam，我可以是 if(lParam == WM_MESSAGE) 还是 if(wParam == WM_MESSAGE)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:45:22.443

试着把`CHandleMessageDlg::`的定义放在前面`OnHandleMessage()`，如下：

```
//      v v v v v v v v v v  Notice the addition of "CHandleMessageDlg::" here
LRESULT CHandleMessageDlg::OnHandleMessage(WPARAM wParam, LPARAM lParam) {
    TRACE(L"wParam %d, lParam %d", wParam, lParam);
    return 0;
} 
```

那样有用吗？

# php - 在html中调用一个php img字符串

> ID：15696672
> 
> 赞同：1
> 
> 时间：2013-03-29T03:00:48.770
> 
> 标签：php, html, image

很简单的问题，你能打开一个 php 代码块来调用 html 中的图像信息吗？我不认为我说得对。这是我的代码：

```
<img src="../inventory_images/' . <?php echo $item_number; ?> . '.jpg" width="150" height="150" border="2" /> 
```

此代码在标签内，我只是尝试使用`$item_number`变量发布照片（这也是图像文件的名称，即 `$item_number = T3144` 图像文件的名称为 T3144.jpg ）。此外，如果有更好的方法来完成这个建议，我们很乐意接受。很抱歉用这样一个补救问题占用带宽，但由于某种原因，我似乎无法在研究中回答这个问题。感谢大家抽出时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:05:34.477

您的代码错误，请尝试：

```
<img src="../inventory_images/<?php echo $item_number;?>.jpg" width="150" height="150" border="2" /> 
```

有了你所拥有的，看起来你拥有的代码会打印出来

`src="../inventory_images/' . whateveritem_numberis . '.jpg"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:04:47.740

是的，这很好，但请确保此代码位于以 .php 结尾的文件中，否则 PHP 将无法解析它。此外，您需要取出单引号和句点：

```
<img src="../inventory_images/<?php echo $item_number; ?>.jpg" width="150" height="150" border="2" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:13:44.630

除非上面的 HTML 在[echo](http://www.php.net/echo)语句中，否则您需要将其更改为：

```
<img src="../inventory_images/<?php echo $item_number; ?>.jpg" width="150" height="150" border="2" /> 
```

这反过来看起来像这样：

```
<img src="../inventory_images/T3144.jpg" width="150" height="150" border="2" /> 
```

当然，这与您的示例 where `$item_number = 'T3144';`.

单引号和句点用于连接[字符串内的变量](http://php.net/manual/en/language.operators.string.php)。

# java - 滚动时 JTree 严重模糊

> ID：15696673
> 
> 赞同：1
> 
> 时间：2013-03-29T03:01:00.353
> 
> 标签：java, swing, jscrollpane, jtree, treemodel

我有一个`JTree`内部 a `JScrollPane`，当我使用滚动条时，树会变得模糊，如下图所示。

如果我做一些事情来重新绘制它，它会恢复正常，比如最小化和恢复窗口，或者在树中单击以使节点展开或折叠（但是如果我将窗口拖离屏幕，模糊不会消失并返回，或将另一个窗口拖到它前面）。

JTree 有一个自定义`TreeModel`和单元格渲染器。最近的变化是针对`TreeModel`; 单元格渲染器已经存在了很长时间并且工作正常。单元格渲染器是 的子类`DefaultTreeCellRenderer`，只有`getTreeCellRendererComponent`方法被覆盖（以显示自定义图标）。

`DefaultMutableTreeNode`我曾经从包含要显示的数据的数据结构中填充s，但是当节点数量很大（比如超过 10,000 个）时，这会导致性能问题。`DefaultMutableTreeNode`由于我拥有的数据已经在树结构中，我意识到在不使用任何s 的情况下围绕它创建自定义 TreeModel 会相当简单。这使得 JTree 填充得更快，但现在我留下了这个模糊的滚动问题。

![模糊的 JTree](../Images/cb43b015b42fa40e96a034d412de8cff.png)

下面的代码不是来自应用程序，但它按原样编译并将演示问题。删除`tree.setBackground`线停止模糊行为。

```
package stackoverflow;

import javax.swing.event.TreeModelListener;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreePath;
import javax.swing.*;
import java.awt.Color;

public class NumberTreeModel implements TreeModel {

   public static final int ROOT_NUMBER = 100;

   public Object getChild(Object parent, int index) {
      return index;
   }

   public int getChildCount(Object node) {
      return isLeaf(node) ? 0 : ROOT_NUMBER;
   }

   @Override
   public int getIndexOfChild(Object parent, Object child) {
      int parentValue = ((Integer) parent).intValue();
      int childValue = ((Integer) child).intValue();
      return parentValue == ROOT_NUMBER ? childValue : -1 ;
   }

   public Object getRoot() {
      return ROOT_NUMBER;
   }

   public boolean isLeaf(Object node) {
      return ((Integer) node).intValue() < ROOT_NUMBER;
   }

   public void addTreeModelListener(TreeModelListener listener) { }
   public void removeTreeModelListener(TreeModelListener listener) { }
   public void valueForPathChanged(TreePath path, Object obj) { }

   public static void display() {

      JFrame frame = new JFrame("Number JTree");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      NumberTree tree = new NumberTree();
      tree.setModel(new NumberTreeModel());
      tree.setBackground(new Color(0,0,0,0));
      JScrollPane scroll = new JScrollPane(tree);
      frame.add(scroll);
      scroll.getViewport().setScrollMode(JViewport.BLIT_SCROLL_MODE);
      tree.expandRow(0);
      frame.pack();
      frame.setSize(300, 400);
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static class NumberTree extends JTree {
      static final long serialVersionUID = 1;

      @Override
      public String convertValueToText(Object value, boolean selected, boolean expanded, boolean leaf,
               int row, boolean hasFocus) {
         if (value instanceof Integer) {
            int n = ((Integer) value).intValue();
            return n + "=========".substring(0, n % 10);
         } else {
            System.out.println("value class=" + value.getClass());
            return value.toString();
         }
      }
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            display();
         }
      });
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:21:59.003

我怀疑您已经覆盖`paintComponent()`但忽略了，如此[处](https://stackoverflow.com/a/7213546/230513)`super.paintComponent(g)`所示。

不太可能，您可能会`setScrollMode()`在滚动窗格的视口中进行试验。

编辑您的问题以包含[sscce](http://sscce.org/)可能会澄清问题。

附录：作为参考，这里是一个*不*展示问题中看到的渲染工件的示例。

![在此处输入图像描述](../Images/5ddb654c226bc72589eed15f8a9ce6dd.png)

```
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;

/**
 * @see https://stackoverflow.com/a/15696825/230513
 */
public class Sscce {

    private void display() {
        JFrame f = new JFrame("Sscce");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTree tree = new JTree();
        for (int i = 0; i < tree.getRowCount(); i++) {
            tree.expandRow(i);
        }
        f.add(new JScrollPane(tree));
        f.pack();
        f.setSize(200, 200);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Sscce().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:18:08.283

解决方案：

*   不要用不透明的颜色`setColor`来改变背景。`JTree`

*   对于节点的视觉透明度，实现自定义`TreeCellRenderer`以返回 null`getBackgroundNonSelectionColor`和`getBackground`，如[JTree set background of node to non-opaque 中所述](https://stackoverflow.com/questions/14563433/jtree-set-background-of-node-to-non-opaque)

    *   `JScrollPane`设置to的视口模式`JViewport.SIMPLE_SCROLL_MODE`有助于解决滚动模糊问题，但不一定会重新绘制与展开和折叠 ndo 相关的问题。

# ios - 在 Objective-C 中，标识符后跟冒号是什么意思？

> ID：15696675
> 
> 赞同：1
> 
> 时间：2013-03-29T03:01:29.883
> 
> 标签：ios, objective-c, c

```
bail:
    if ( err && image ) {
        CGImageRelease( image );
        image = NULL;
    }
    if ( provider ) CGDataProviderRelease( provider );
    if ( colorspace ) CGColorSpaceRelease( colorspace );
    *imageOut = image;
    return err; 
```

我查看了一些代码，发现了这个。我以前从未见过这种情况。是什么`bail:`意思？

它来自[这里](http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T03:15:28.477

这是`goto`语句跳转到的标签。

您正在查看的代码`SquareCamViewController.m`使用名为 的宏`require`，如下所示：

```
require( error == nil, bail ); 
```

这个宏在`AssertMacros.h`头文件中定义。它将标签作为其第二个参数，`goto`如果第一个参数的计算结果为 false，则使用该标签。

用于在函数末尾`goto`跳转到清理代码是`goto`C 中最常见的和标签用法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T03:11:24.847

`bail:`是一个标签。这是标准的 C 语法。它在正确编写的代码中不经常使用。它最常见的用途是与`goto`. 请避免使用`goto`. 在您引用的代码中，该`require`函数使用它。如果`require`失败，代码将跳转到`bail`标签，跳过其间的所有其他代码。

# java - Java 操作系统到 .ISO

> ID：15696679
> 
> 赞同：-1
> 
> 时间：2013-03-29T03:02:11.207
> 
> 标签：java, operating-system, iso

好吧，过去我一直在开发操作系统风格的 Java 应用程序。我已经在一个未修饰的 JFrame 中加载了所有内容，现在我准备将其转换为 .ISO 或类似的东西。我的问题是，我该怎么做？我在网上看到文章说是的，你可以拥有一个 Java 操作系统，我也看到了一些例子，但我想知道如何。就像我要将它加载到某种虚拟机中一样，我想做我为它编写的程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:33:55.233

如果您打算将代码作为虚拟机的操作系统运行，那么 ISO 是一个不错的选择。

有现有的生成 ISO 的工具……只要你有进入 ISO 的“东西”。

您的问题是生成进入 ISO 的内容；即一个可引导的操作系统映像。问题是图像必须全部是本地代码，并且它需要了解有关硬件如何工作的所有底层内容；例如如何处理物理/虚拟内存映射、I/O 设备寄存器、硬件中断等等。因此，您遇到了实现执行此操作的类（或本机代码）以及将您的 Java 类编译为本机代码并将其与其他所有内容链接在一起以形成可引导操作系统映像的问题。（这只是开始......真的）

对于这些事情，没有现成的工具（AFAIK），也没有什么可以借鉴的经验。

# autohotkey - 定时器只运行一次

> ID：15696684
> 
> 赞同：3
> 
> 时间：2013-03-29T03:02:38.280
> 
> 标签：autohotkey, kingsoft

下面的脚本工作正常。

它每 4 秒向金山软件发送一次鼠标点击。但是当我将计时器长度更改为 -4000 而不是 4000 时，计时器将仅在脚本不再工作一次时运行。我不再能够将鼠标点击发送到金山软件。我究竟做错了什么？

```
#Persistent
#SingleInstance

SetTimer, CheckApp, 4000
Return

CheckApp:
IfWinActive, ahk_class QWidget
{
    sleep 2000
Click 486, 15
Click 570, 93
}
Return 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:08:33.253

在我回答这个问题之前。请您返回上一个问题并标记您在那里收到的答案，通过单击白色复选标记将其变为绿色。

我曾经尝试过负值并且对结果不满意，所以我决定总是关闭计时器而不是使用负值。

```
#Persistent
#SingleInstance
SetTimer, CheckApp, 4000
Return

CheckApp:
IfWinActive, ahk_class QWidget
{
    SetTimer, CheckApp, Off    
    Click 486, 15
    Click 570, 93
}
Return 
```

我删除了你的睡眠，2000。添加这个睡眠命令会阻塞 50% 的时间（睡眠 50%）并且没有添加任何有用的东西。它甚至使另一个应用程序在这 2 秒内窃取焦点的机会变大了，因此鼠标点击可能会转到另一个应用程序......你必须使用鼠标点击还是可以使用键盘快捷键。当菜单移动或扩展/收缩时，鼠标位置往往不可靠。

# 更新

```
#Persistent
#SingleInstance
Return ; Prevent the [Win]+w from executing on startup of script.

#w:: ; [Win]+w launches PolyEdit, waits for window and sends two mouse clicks.
Run, path to the PolyEdit window.exe
WinWaitActive, ahk_class QWidget
Sleep, 1000
Click 486, 15
Click 570, 93
Return 
```

现在您可以将 ahk 脚本放入 Windows 开始菜单并通过 [Win]+w （或您定义的任何其他键...）启动 PolyEdit

# 更新 2

不知道为什么要这样做，因为启动应用程序需要一个操作（单击图标或按下快捷方式），这可用于触发脚本。现在你必须不断地在后台运行检查。您可以创建一个看起来像金山软件的图标，但实际上是一个 ahk 脚本。

但是给你！

```
#Persistent
#SingleInstance
SetTimer, CheckApp, 400
Return
InitiateKS := true

CheckApp:
IfWinExist, ahk_class QWidget
{
    If InitiateKS
    {
        InitiateKS := false
        WinActivate, ahk_class QWidget
        TrayTip, KingSoft, Started, 1
        ;Click 486, 15
        ;Click 570, 93
    }
}
Else ; if no KingSoft is running
{
        InitiateKS := true
}
Return 
```

# android - 在android中单击拨号按钮时可以加载应用程序吗？

> ID：15696685
> 
> 赞同：1
> 
> 时间：2013-03-29T03:02:38.967
> 
> 标签：android, android-activity, phone-call

我创建了一个简单的应用程序，其中一个文本框输入密码来验证用户。

1）我的疑问是，当我单击 android 中的拨号按钮时，我的应用程序应该打开并询问密码以允许用户拨打电话。

如果可能的话，帮助我

因为我为什么要做这件事来提高安全性，当他试图用我的手机打电话给某人时，他会指出一个入侵者。

@安卓

# jquery - 自动播放功能

> ID：15696686
> 
> 赞同：0
> 
> 时间：2013-03-29T03:02:45.113
> 
> 标签：jquery, slider, option, autoplay

有谁知道如何向似乎没有选项的插件添加自动播放功能？我正在尝试使用自动播放的那个叫做 windy：[http ://tympanus.net/Development/Windy/index.html](http://tympanus.net/Development/Windy/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:13:36.307

```
<script type="text/javascript"> 
    $(function() {
        var $el = $( '#wi-el' ), windy = $el.windy();

        var curSlide = 0;
        setInterval(function(){
            if(curSlide == windy.getItemsCount() - 1){
                windy.navigate(0);
            } else{
                windy.next();
            }
            curSlide++;
        }, 2000 );
    });
</script> 
```

# php - mysql select从哪里不同

> ID：15696687
> 
> 赞同：-1
> 
> 时间：2013-03-29T03:03:17.193
> 
> 标签：php, mysql

我需要选择一个条目列表，但需要跳过那些在 2 个不同表中具有匹配字段的条目。这是我的数据库结构

订单：

```
| orders_id | customers_id | 
| 100       | 01           |
| 101       | 20           |
| 102       | 32           |
| 103       | 48           |
| 104       | 99           | 
```

客户（仅供参考）：

```
| firstname | lastname | customers_id |
| John      | Doe      | 20           |
| Fred      | Flinty   | 22           |
| Mark      | Smith    | 32           | 
```

推荐：

```
| customers_id | testimonial |
| 20           | aaa         |
| 32           | bbb         |
| 38           | ccc         |
| 49           | ddd         |
| 55           | eee         | 
```

因此，我需要选择我的订单表中的所有客户，但如果他们在我的推荐表中，则需要跳过它们。在上面显示的示例中，我只需要选择客户 01、48 和 99，因为它们不存在于 Testimonials 表中。

这是我尝试过的，但显然缺少一些东西：

```
SELECT c.firstname, c.lastname, c.customers_id, o.orders_id, 
       o.customers_id, s.date_added as status_date
FROM (orders o, testimonials t )
JOIN customers c
ON c.customers_id = o.customers_id
JOIN  status_history s
ON s.orders_id = o.orders_id
  and s.orders_status_id = o.orders_status
  and o.customers_id != t.customer_id
  order by o.orders_id ASC; 
```

有人可以告诉我我做错了什么以及如何跳过在两个表格（订单和推荐）中找到的客户吗？我觉得我走在正确的轨道上，因为如果我将其更改为`and o.customers_id != t.customer_id`，`and o.customers_id = t.customer_id`我只会得到两个表中的客户（在本例中为 20 和 32）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T03:06:44.573

你可以`LEFT JOIN`在这个。

使用的原因`LEFT JOIN`是因为它将显示*左侧*定义的表中的所有记录，无论它是否在*右侧*定义的表中有匹配的记录。当 table`Orders`与 table 连接时`testimonials`，所有不匹配的记录对于表中的列的值为 null ，`testimonials`这就是您要查找的记录。要过滤掉，我们只需要`NULL`通过检查带有值的列来获取带有值的记录`IS NULL`。

```
SELECT  a.*, b.*
FROM    orders a
        LEFT JOIN testimonials c
            ON a.customers_ID = c.customers_ID
        LEFT JOIN customers b
            ON a.customers_ID = b.customers_ID
WHERE   c.customers_ID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/10467/5)
*   [SQLFiddle Demo（*添加了一些关于不匹配客户的信息*）](http://www.sqlfiddle.com/#!2/e5d9e/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

加起来`INDEX`。

如果在真实数据库上，`Orders`表以及`Testimonials`始终依赖于`Customers`表，`FOREIGN KEY`则应强制执行约束以*保持引用完整性*。

就是这样：

```
ALTER TABLE Orders ADD CONSTRAINT tb_fk1 
    FOREIGN KEY (Customers_ID) REFERENCES Customers(Customers_ID);
ALTER TABLE Testimonials ADD CONSTRAINT tb_fk2
    FOREIGN KEY (Customers_ID) REFERENCES Customers(Customers_ID); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T03:10:53.610

这是简单的方法。

```
select c.* from order as o
join customers as c on o.customers_id = c.customers_id
where o.customers_id not in(select customers_id from testimonials) 
```

# zip - Deflate - 膨胀错误。导致“不正确的标头检查”错误

> ID：15696688
> 
> 赞同：0
> 
> 时间：2013-03-29T03:03:17.490
> 
> 标签：zip, inflate, deflate

我正在通过 HTTP-REDIRECT 绑定机制实现 SAMLSLO。使用 deflate-inflate 工具会给我一个 DataFormatException 错误的标题检查。

我试过这个作为一个独立的。虽然我没有在这里得到 DataFormatException，但我观察到整个消息没有被返回。

```
 import java.io.UnsupportedEncodingException;
    import java.util.logging.Level;
    import java.util.zip.DataFormatException;
    import java.util.zip.Deflater;
    import java.util.zip.Inflater;

    public class InflateDeflate {
    public static void main(String[] args) {
    String source = "This is the SAML String";
            String outcome=null;
    byte[] bytesource = null;
    try {
        bytesource = source.getBytes("UTF-8");
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }
    int byteLength = bytesource.length;
    Deflater compresser = new Deflater();
    compresser.setInput(bytesource);
    compresser.finish();

    byte[] output = new byte[byteLength];
    int compressedDataLength = compresser.deflate(output);
    outcome = new String(output);
    String trimmedoutcome = outcome.trim();
    //String trimmedoutcome = outcome;  // behaves the same way as trimmed;
            // Now try to inflate it
    Inflater decompresser = new Inflater();
    decompresser.setInput(trimmedoutcome.getBytes());
    byte[] result = new byte[4096];
    int resultLength = 0;
    try {
        resultLength = decompresser.inflate(result);
    } catch (DataFormatException e) {
        e.printStackTrace();
    }
    decompresser.end();
    System.out.println("result length ["+resultLength+"]");
    String outputString = null;
    outputString = new String(result, 0, resultLength);
    String returndoc = outputString;
    System.out.println(returndoc);
    }

    } 
```

令人惊讶的是，我得到的结果是 [22] 字节，原来是 [23] 字节，膨胀后“g”丢失了。

我在这里做一些根本错误的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T20:15:42.150

Java 的 String 是 CharacterSequence（一个字符是 2 个字节）。使用*new String(byte[])*可能无法正确地将您的 byte[] 转换为 String 表示形式。至少您应该指定一个字符编码*new String(byte[], "UTF-8")*以防止无效的字符转换。

下面是一个压缩和解压的例子：

```
import java.util.zip.Deflater;
import java.util.zip.InflaterInputStream;
...

byte[] sourceData; // bytes to compress (reuse byte[] for compressed data)
String filename; // where to write
{
    // compress the data
    Deflater deflater = new Deflater(Deflater.DEFAULT_COMPRESSION);
    deflater.setInput(sourceData);
    deflater.finish();
    int compressedSize = deflater.deflate(data, 0, sourceData.length, Deflater.FULL_FLUSH);

    // write the data   
    OutputStream stream = new FileOutputStream(filename);
    stream.write(data, 0, compressedSize);
    stream.close();
}

{
    byte[] uncompressedData = new byte[1024]; // where to store the data
    // read the data
    InputStream stream = new InflaterInputStream(new FileInputStream(filename)); 
    // read data - note: may not read fully (or evenly), read from stream until len==0
    int len, offset = 0;
    while ((len = stream.read(uncompressedData , offset, uncompressedData .length-offset))>0) {
        offset += len;
    }           
    stream.close();
} 
```

# matlab - 设置图例后，MATLAB 绘图失去颜色

> ID：15696689
> 
> 赞同：0
> 
> 时间：2013-03-29T03:03:21.220
> 
> 标签：matlab, plot, matlab-figure

一般来说，我是 MATLAB/编程的新手，所以请原谅我的菜鸟。无论如何，我正在尝试创建一些数据的全球分布的 3 色图。我最终希望这张图成为包含 2 种不同类型图的图的顶部。我的问题是，在我设置了图例的位置后，空间图和图例中的颜色默认为黑色。我认为问题在于图例的编码，因为当我删除它时，情节变得很好。

无论如何，这是代码：

```
tm = zeros(3,group(1).ny);
hl = zeros(3,1); 

proxycolor = zeros(3,3);

icon{1,1}= [1 0 0];   icon{1,2}= '^'; icon{1,3} = 'Raw Data';
icon{2,1}= [1 1 0];   icon{2,2}= 'v'; icon{2,3} = 'Quality Controlled Data';
icon{3,1}= [0 1 0];   icon{3,2}= '*'; icon{3,3} = 'Screened Data';

fig('Data Availability'),clf
subplot(3,1,1:2)
m_proj('Robinson','clong',180);
m_grid('xtick',[0:60:360],'tickdir','out','ytick',[-90:30:90], 'color',dkgr, 'fontsize',8,'fontname','Times New Roman');

m_coast('color','k');

for j = 1:3
    group(j).lon(group(j).lon<0) = group(j).lon(group(j).lon<0) + 360;
    tm(j,:) = group(1).tm;
end

for j = 1:3
    proxycolor(j,:) = icon{j,1};
    hl(j)=m_line(group(j).lon,group(j).lat,'color',icon{j,1},'marker',icon{j,2},'MarkerFaceColor',icon{j,1},'MarkerSize',7,'LineStyle','none');
end

%The problem lies below here somewhere
[LEGH,OBJH,OUTH,OUTM]=legend(hl(:),icon{:,3});pause; 
set(LEGH,'FontName','Times','FontSize',10);
set(OUTH,'Color','k','MarkerFaceColor','k','Markersize',8);
legend boxoff 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:35:28.973

根据文档`legend` `OUTH`，您将其颜色设置为黑色，包含*绘图中线条和补丁的*句柄，即

```
set(OUTH,'Color','k','MarkerFaceColor','k','Markersize',8); 
```

导致您的问题，应该删除或更改。

# iphone - setNeedsDisplay：重绘周期之间的时间过长

> ID：15696690
> 
> 赞同：0
> 
> 时间：2013-03-29T03:03:22.630
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我是可可的新手。我想我可以将 UITableViewCell 背景视图设置为我自己的自定义子类，以便在单元格的背景中显示一个加载栏，但是当我想要更新栏时调用似乎`setNeedsDisplay`不足以满足我的需要。现在我`setNeedsDisplay`每 0.1 秒更新一次（我的意思是更新 UIView 中的数据，然后调用），并且每 30-40 秒才看到它实际更新一次。这是正常的吗？有什么办法可以加快速度吗？如果没有，我想做的还有其他选择吗？

这是我的 draw rect 代码（上面有一个辅助方法）和`updateBarAt`，它被称为更新它：

```
-(void) updateBarAt: (float) playHead {
    self.playHead = playHead;
    NSLog(@"%f", self.playHead);
    [self setNeedsDisplay];
}

-(void) drawBackground: (CGRect) rect{
    double totalTime = self.playFor + self.wait;

    double waitPercentage = self.wait / totalTime;
    double playForPercentage = (self.playFor - self.fadeIn - self.fadeOut) / totalTime;
    double fadeInPercentage = self.fadeIn / totalTime;
    double fadeOutPercentage = self.fadeOut / totalTime;

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGRect blueRect = CGRectMake((waitPercentage+fadeInPercentage)*rect.size.width, 0, playForPercentage*rect.size.width, rect.size.height);
    CGContextSetRGBFillColor(context, .639, .737, 1, 1.0);
    CGContextFillRect(context, blueRect);
    CGRect greenRect = CGRectMake(0, 0, waitPercentage*rect.size.width, rect.size.height);
    CGContextSetRGBFillColor(context, .843, 1, .651, 1.0);
    CGContextFillRect(context, greenRect);

    CGRect purpleRect = CGRectMake(waitPercentage*rect.size.width+.1, 0, fadeInPercentage*rect.size.width, rect.size.height);
    CGContextSetRGBFillColor(context, .7451, .639, 1.0, 1.0);
    CGContextFillRect(context, purpleRect);

    CGRect purpleR = CGRectMake((1.0 - fadeOutPercentage)*rect.size.width - .5, 0, fadeOutPercentage*rect.size.width + .5, rect.size.height);
    CGContextFillRect(context, purpleR);
}

- (void)drawRect:(CGRect)rect { //just does blue and green, need to add purple. Research
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);
    CGContextFillRect(context, rect);

    if (self.playHead == -1)
        return;
    [super drawRect:rect];

    double totalTime = self.playFor + self.wait;
    double playedPercentage = self.playHead / totalTime;

    double waitPercentage = self.wait / totalTime;
    double playForPercentage = (self.playFor - self.fadeIn - self.fadeOut) / totalTime;
    double fadeInPercentage = self.fadeIn / totalTime;
    double fadeOutPercentage = self.fadeOut / totalTime;

    NSLog(@"Played: %f Wait: %f Play: %f Fade In: %f Fade Out: %f", playedPercentage, waitPercentage, playForPercentage, fadeInPercentage, fadeOutPercentage);

    if (playedPercentage <= waitPercentage) {
        waitPercentage = playedPercentage;
        playForPercentage = 0;
        fadeInPercentage = 0;
        fadeOutPercentage = 0;
    } else if (playedPercentage <= waitPercentage+fadeInPercentage) {
        playForPercentage = 0;
        fadeInPercentage = playedPercentage - waitPercentage;
        fadeOutPercentage = 0;
    } else if (playedPercentage <= waitPercentage+fadeInPercentage + playForPercentage) {
        playForPercentage = playedPercentage - waitPercentage - fadeInPercentage;
        fadeOutPercentage = 0;
    } else {
        fadeOutPercentage = playedPercentage - waitPercentage - playForPercentage;
    }

    //[self drawBackground:rect];

    CGRect blueRect = CGRectMake((waitPercentage+fadeInPercentage)*rect.size.width, 0, playForPercentage*rect.size.width, rect.size.height);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
    CGContextFillRect(context, blueRect);

    CGRect greenRect = CGRectMake(0, 0, waitPercentage*rect.size.width, rect.size.height);
    CGContextSetRGBFillColor(context, 0.0, 1.0, 0.0, 1.0);
    CGContextFillRect(context, greenRect);

    CGRect purpleRect = CGRectMake(waitPercentage*rect.size.width+.1, 0, fadeInPercentage*rect.size.width, rect.size.height);
    CGContextSetRGBFillColor(context, 0.33, 0.1, .55, 1.0);
    CGContextFillRect(context, purpleRect);

    CGRect purpleR = CGRectMake((1.0 - fadeOutPercentage)*rect.size.width - .5, 0, fadeOutPercentage*rect.size.width + .5, rect.size.height);
    CGContextFillRect(context, purpleR);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:52:38.207

大多数`UIKit`使用需要在主线程上完成。很可能您的`updateBarAt:`方法没有在主线程上被调用，这意味着您的调用`setNeedsDisplay`是在某个后台线程上完成的。

一种可能的解决方案是：

```
- (void)updateBarAt:(float)playHead {
    self.playHead = playHead;
    NSLog(@"%f", self.playHead);
    dispatch_async(dispatch_get_main_queue(), ^{
        [self setNeedsDisplay];
    });
} 
```

另一种选择是将调用包装到调用`updateBarAt:`中`dispatch_async`。

# c - 指向结构体指针的指针 C

> ID：15696692
> 
> 赞同：1
> 
> 时间：2013-03-29T03:03:34.970
> 
> 标签：c, pointers, memory

大家好，我可能很难解释这一点，但我会尽力而为。

我正在创建一个将注入程序的 DLL。为了从 DLL 中访问我想要的数据，我将数据映射到一个“基地址”，其中是指向另一个地址的指针。从那里我必须将该地址增加 0x34 才能访问我的数据。我想我可以使用结构来发挥我的优势，但它似乎不起作用。问题是我似乎无法弄清楚如何增加第二个地址以获得指向我的数据的最终指针。

我有的是这个

```
typedef unsigned char BYTE;

typedef struct
{
    DWORD Some_Int;
    //big struct of DWORDS simulating what is in the applicaiton.
    //shortened for posting
}DATA;

typedef struct
{
    BYTE Unknown[0x34];
    DATA *p_data;
}VARBASE;

DWORD WINAPI function()
{
    VARBASE *Stats = (VARBASE*)0x00BBC9CC;
    char lol[1000];

    sprintf(lol, "stats pointer: %p  |  DATA pointer: %p", Stats, Stats->p_data);
    SomeFunction(lol); //wrapper for MessageBoxA()

    return NULL;
} 
```

Stats 指向正确的地址，但我无法读取 0x34 字节的数据（或增加指针 0x34）以获取指向我的数据集的第二个指针。当我使用这个当前代码时，p_data 被设置为 0000155A 或类似的东西，当它应该在 0A0* *** * 范围内时，这会在读取时导致段错误。我知道我的数学是正确的，因为我已经在像 CheatEngine 这样的内存映射器中打开了应用程序，我可以专门添加基指针 -> 地址 + 0x34 -> 我从 CheatEngine 内部的数据。

有没有更简单的方法来解决这个问题，而不是使用基础结构来指向我的数据？基本上它的指针->指针+0x34->数据，我面临的问题是我不能增加第二个指针并设置它，所以我可以访问我的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:42:19.580

您是否知道结构的两个成员之间可能存在填充？*这是“我如何以错误的方式*做某事？”的一个例子。也许您最好告诉我们*您的程序要解决哪个问题*。

如果您确定它`0x00BBC9CC + 34`适合指向 a `DWORD *`，那么为什么不直接跳到这一点：`DWORD **some_int = 0x00BBC9CC + 34;`..？顺便问一下，你从哪里得到这个地址？不幸的是，Win32 C 程序员很少真正编写 C 程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:55:09.547

我解决了这个问题。我需要尊重基地址指针并将该值传递给我的 VARBASE 结构。

```
DWORD WINAPI function()
{
    FILE *fp;
    fp = fopen("testaddr.txt", "a+");
    DWORD *ptr = (DWORD*)0x00BBC9CC;
    VARBASE *Stats = (VARBASE*)*ptr;
    //removed debug output to file
    fclose(fp);
    return NULL;
} 
```

# compilation - 在 makefile 中检查 $(MAKE) 的结果

> ID：15696694
> 
> 赞同：-1
> 
> 时间：2013-03-29T03:03:56.813
> 
> 标签：compilation, makefile, exit-code

我正在使用 Makefile 来编译我的项目。我得到了一点：

```
$(MAKE) <some flags>; \
$(UPLOAD_SCRIPT) 
```

$(MAKE) 行实际上编译了代码，但我只希望在 make 成功（即没有错误）的情况下运行上传脚本。有没有办法做到这一点？我正在想象一些带有退出代码的东西，将结果存储在一个变量和一个`if`语句中，但我对 Makefile 不是很熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T05:11:01.613

`&&`改为使用这样的链接 2 个命令：

```
mytarget:
    $(MAKE) <some flags> && $(UPLOAD_SCRIPT) 
```

如果您有更多行，并且不想使用 让您的行看起来很长`&&`，您可以使用`set -e`，以便 shell 在第一个错误时停止。

> **-e** 当此选项打开时，如果简单命令由于 Shell 错误的后果中列出的任何原因而失败或返回退出状态值 >0，并且在一段时间、直到或 if 关键字之后不属于复合列表的一部分, 并且不是 AND 或 OR 列表的一部分，也不是前面有 ! 的管道 保留字，则shell应立即退出。

```
mytarget:
    set -e; \
    cmd1; \
    cmd2 
```

# database - noSQL 数据库中的双索引

> ID：15696700
> 
> 赞同：0
> 
> 时间：2013-03-29T03:05:03.163
> 
> 标签：database, concurrency, nosql

我正在创建一个数据库来存储三样东西。比方说实验、测量、元数据。元数据由一组可变数量和类型的属性组成，因此 NoSQL 的选择很有吸引力。

我需要对数据库进行两个简单的查询：

1) 给我所有具有给定 Measure 值的实验的元数据。2）给我一个实验的所有措施的元数据。

我的主要要求是：

1) 大量数据。每个实验都可以带有数百万个可能的度量（当然还有元数据），我预计会有成千上万个实验。2）并发。我希望有快速的并发读/写，因为在任何给定的时间点我可能会运行 10-20 个实验，并且他们希望同时编写数百万个度量。

我试过 MongoDB，但由于写锁，它很慢。我想要更快的东西。此外，它不能很好地处理我的一个查询，因为我在这里基本上需要两个索引。我正在考虑作为替代泰坦，只是因为将实验视为节点并将它们与边缘连接起来似乎很自然。如果我能找到一种快速完成这两个查询的方法，Hypertable 似乎是另一种可能性。

那里有太多的 noSQL 数据库，我可能缺少适合我需要的数据库。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:42:50.467

您是否研究过可以满足您需求的 NewSQL 数据库？我建议您仔细查看 Starcounter，它是真正的 ACID，写入时没有锁定，并且支持对基本属性和组合索引进行索引。

我认为面向对象和以内存为中心的事务数据库将适合您的需求。然后，您可以拥有派生相同类的不同实验和测量，您可以选择查询每种类型以及分别查询继承的类型。

如果您没有超过 TB 的数据，则您不需要迄今为止研究过的大数据数据库。他们真的很擅长他们的工作，但我认为您应该研究其他 NoSQL 数据库。当使用面向对象的内存数据库（当然，所有写入都在持久存储介质上进行保护）时，与关系数据库相比，您可以获得大约 4 倍的压缩率，因此 TB 的数据通常就足够了。

今天在数据库丛林中很难找到自己的出路，所以我理解找到适合您要求的东西的难度。在你的情况下 - 我的 5 美分交易 NoSQL 数据库是真正的 ACID 并具有 SQL 查询支持！

# ruby-on-rails - Rails grouped_coolection_select 使用 Mongoid

> ID：15696707
> 
> 赞同：0
> 
> 时间：2013-03-29T03:06:41.553
> 
> 标签：ruby-on-rails, ruby, mongoid, mongoid3

我在使用 Mongoid 的 grouped_collection_select 时遇到问题。我收到的错误消息是：ActionView::Template::Error（未定义的方法 `merge' for :name:Symbol）。

我正在使用 rails 3.2.12 和最新版本的 Mongoid。

这是我的代码：

```
class States
  include Mongoid::Document
  field :_id
  field :name
  field :abbreviation
  field :countryId

  belongs_to :countries
end

class Countries
  include Mongoid::Document
  field :_id
  field :name
  field :abbreviation

  has_many :states
end

<div class="field"> 
  <%= f.label :_id, "Country" %><br />
  <%= f.collection_select :_id, Countries.order_by([:name, :asc]), :_id, :name, include_blank: true %>
</div>
<div class="field">
  <%= f.label :_id, "State or Province" %><br />
  <%= f.grouped_collection_select(:states, :countryId, Countries.order_by([:name, :asc]), :states, :name, :id, :name) %>
</div> 
```

对于解决此问题的任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:21:19.110

您正在使用`f.grouped_collection_select`这意味着第一个参数将从`f.object`. 删除您的第一个参数并将第二个参数更改为您希望将其保存到的字段的列名应该可以解决您的问题

```
<%= f.grouped_collection_select(:state, Countries.order_by([:name, :asc]), :states, :name, :id, :name) %> 
```

# php - PHP连接到数据库：检索记录

> ID：15696712
> 
> 赞同：-2
> 
> 时间：2013-03-29T03:07:31.130
> 
> 标签：php, sql

```
<?php

$dbCon2=mysqli_connect("localhost", "root", "", "dbusers")
       or die(mysql_error()."Connection disconnected");

$sql1 = "SELECT * FROM users";
$sql2 = mysqli_query($dbCon2, $sql1);

    while($row = mysql_fetch_array($sql2))
    {

    echo "<tr>";
        echo "<td>" . $row['UserID'] . "</td>";
        echo "<td>" . $row['Firstname'] . "</td>";
        echo "<td>" . $row['Lastname'] . "</td>";
        echo "<td>" . $row['Gender'] . "</td>";
        echo "<td>" . $row['Email'] . "</td>";
        echo "<td>" . $row['Status'] . "</td>";
        echo "<td>" . $row['Date_joined'] . "</td>";
    echo "</tr>";
    }

?> 
```

*   我仍然一次又一次地遇到同样的错误。:(

警告：mysql_fetch_array() 期望参数 1 是资源，给定对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:10:33.530

那是因为你正在混合`mysql_*`和`mysqli`......两个不同的扩展。

看来您正在寻找[`mysqli_fetch_array()`](http://www.php.net/manual/en/mysqli-result.fetch-array.php). 另外，请确保使用正确的错误捕获..您当前`mysql_error()`用于获取错误..我不习惯使用 mysqli，但这对我来说似乎是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:11:23.417

```
$sql2 = mysqli_query($dbCon2, $sql1);

    while($row = mysql_fetch_array($sql2)) 
```

您正在混淆您的 API。 `mysql_*`不同于`MySQli`

尝试运行：

```
$sql2 = mysqli_query($dbCon2, $sql1);

    while($row = mysqli_fetch_array($sql2, (MYSQLI_ASSOC)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:11:26.027

将 mysql_fetch_array 更改为 mysqli_fetch_array 因为 mysqi_query 的返回值是一个对象，并且必须传递给 mysqli_fetch_array :)

# linux - 在 windows 和 linux 中分发项目的最佳方法是什么？

> ID：15696716
> 
> 赞同：3
> 
> 时间：2013-03-29T03:07:47.363
> 
> 标签：linux, windows, jython

所以有这个特殊的 jython 项目需要几个依赖项，例如 Jenkins，某种颠覆，这需要在 windows 上完成。

考虑使用 pip 来帮助安装所有这些项目，或者我应该看看其他地方，比如 NSIS，我会不会很理智？

更新：我真的应该改写这个 - 我在深夜问这个问题的错。有一个自动化测试项目具有以下依赖项：

*   Java JDK
*   杰通
*   蚂蚁
*   机器人框架
*   颠覆
*   詹金斯

我个人更喜欢在 Linux 上运行，但需要使用它的人通常是 Windows 用户。我有足够的信心编写一个脚本来在 Linux 上安装所有这些，但我*想要*的是有一个可以安装相关工具的脚本/安装程序。

我希望有一个脚本来完成所有这些工作——在 Ubuntu 上使用 apt-get 很容易；但在 Windows 上，这很快就变得不简单了。

尝试这样做的最佳方法是什么？我应该为单独的操作系统创建单独的安装程序吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:01:48.040

`pip`是 的首字母缩写词`pip install packages, python packages`，它只安装 Python 包。

由于 Jenkins 和 Subversion 不是 Python 包，据我所知，您无法安装它们，而且它不是“理智的”。

不幸的是，没有一个既定的工具可以在每个平台上安装所有东西。

用于`pip`安装所有 Python 包，并更喜欢用于`virtualenv`创建隔离的 Python 环境来管理您的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T15:12:07.753

由于 pip 只安装 python 包，而 Jenkins 不是 python 包（它是用 Java 编写的），你不能用它来安装这些包。

你应该完全看一下 virtualenv，但如果你需要在 Windows 中为你的项目做一个“双击”安装程序，我认为 NSIS 是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T01:15:18.063

我成功地使用[install4j](https://www.ej-technologies.com/products/install4j/overview.html)为 Windows、Linux 和 OSX 创建了一个可执行的安装程序。该应用程序是 Java，它捆绑了 JRE。Install4j 使用各自的 JRE 为每个指定的平台创建安装程序。到目前为止，它在 Windows 上运行良好，并且在 Linux 和 OSX 上运行良好（例如，在新版本的 install4j 中，Java 1.8 的 JRE 没有为 linu 正确捆绑，因此 JRE 是预安装的，但它可以自动化）。它还允许您运行非交互式安装程序。

# javascript - Javascript 长度和 textarea maxlength 不匹配

> ID：15696717
> 
> 赞同：2
> 
> 时间：2013-03-29T03:07:58.407
> 
> 标签：javascript, jquery, html, textarea

**问题：**我有一个 javascript 函数，它计算文本区域中的字符数并将其输出到我的控制台。我也`maxlength`设置了我的文本区域。
问题是，有时我`sum`和 textarea`maxlength`不对齐。

例如，textarea 会阻止我的输入，但 sum 变量会告诉我，我还有字符。特别是当我快速打字或同时插入多个字符时。

我该如何解决这个问题？谢谢

* * *

**HTML：**

```
<textarea maxlength="100"></textarea> 
```

**Javascript：**

```
var inputArea = $('textarea');
inputArea.keyup(function(){
   var sum = 100 - inputArea.val().length;
console.log(sum);
}); 
```

**JSFiddle**：http: [//jsfiddle.net/RnTHJ/3/](http://jsfiddle.net/RnTHJ/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:14:51.750

尝试按键，它可以工作：http: [//jsfiddle.net/RnTHJ/4/](http://jsfiddle.net/RnTHJ/4/)

最好是[使用更改事件](http://jsfiddle.net/RnTHJ/7/)。

编辑：

如何使用 keydown 而不是每次都从输入长度重新分配。（[小提琴](http://jsfiddle.net/RnTHJ/10/)）

```
var inputArea = $('textarea.test');

var sum = 100;

inputArea.keydown(function (evt) {
    var evt = window.event ? window.event : e;
    var k = evt.keyCode ? evt.keyCode : e.which;

    if(k>48) { 
        if(sum>0) sum--;
    }
    else {
         if(sum<100) sum++;   
    }

    $(this).siblings().text(sum);
}); 
```

作为一个样本，我只检查一个随机案例 48...如果可能的话，你可以检查所有的字母和数字。退格键使用其键码显式检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:17:27.593

您可能会触发如此多的“keyup”事件，以至于当您快速键入或一次输入多个字符时，这些事件不一定会完成它们被触发的顺序，并且您最终会得到一个旧字符的总和。

您可能想尝试一个小超时，并在每次启动新超时时取消超时。就像是：

```
var timeoutVariable;
var inputArea = $('textarea');
inputArea.keyup(function(){
   window.clearTimeout(timeoutVariable);
   timeoutVariable = setTimeout(runSum(),100);
});

function runSum() {
   var sum = 100 - inputArea.val().length;
   console.log(sum);
} 
```

[http://jsfiddle.net/RnTHJ/8/](http://jsfiddle.net/RnTHJ/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-22T18:45:01.243

我知道这是一个旧线程，但根据我的经验，它不匹配的唯一原因是换行符。如果您在实际上算作两个字符 (\r\n) 的字段中输入/返回，而不是像大多数人所期望的那样仅是一个 (\n)。也许这就是您遇到的计数不匹配的问题？

# java - Spring MVC 异常，创建 bean 时出错

> ID：15696719
> 
> 赞同：0
> 
> 时间：2013-03-29T03:08:01.457
> 
> 标签：java, spring, exception, spring-mvc

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:p="http://www.springframework.org/schema/p"
 xmlns:context="http://www.springframework.org/schema/context"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
  http://www.springframework.org/schema/context
  http://www.springframework.org/schema/context/spring-context-3.0.xsd">

 <context:component-scan base-package="test.controller" />

 <bean id="viewResolver"
  class="org.springframework.web.servlet.view.UrlBasedViewResolver">
  <property name="viewClass"
   value="org.springframework.web.servlet.view.JstlView" />
  <property name="prefix" value="/pages/jsp/" />
  <property name="suffix" value=".jsp" />
 </bean>
</beans> 
```

**异常信息**

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'viewResolver' defined in ServletContext resource [/WEB-INF/springmvcdemo-servlet.xml]: Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:467)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:483)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:358)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:325)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.NoSuchFieldError: NULL
    at org.springframework.expression.TypedValue.<clinit>(TypedValue.java:32)
    at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:85)
    at org.springframework.expression.spel.support.StandardEvaluationContext.<init>(StandardEvaluationContext.java:74)
    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124)
    at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1299)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:210)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:182)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 31 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:14:14.367

检查使用 spring 的 UrlBasedViewResolver 源代码，以确保您具有这 3 个属性并正确拼写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:17:22.127

你缺少一些罐子，确保所有必要的罐子都在类路径中。

# java - 在基于 3d 网格的环境中对电线进行编程的最有效方法是什么？

> ID：15696720
> 
> 赞同：3
> 
> 时间：2013-03-29T03:08:42.867
> 
> 标签：java, performance, algorithm

我目前正在开发基于 2D 网格的沙盒类型游戏。从技术上讲，它作为地图的 3D 是一个 3 维数组，其中网格图块可以相互放置。然而，它以 2D 形式呈现。游戏中的所有脚本都需要非常高效，因为我希望为 android 发布它。

游戏将有一个主要的布线机制，允许玩家使用电线将机器连接到电源。我需要一种有效的方法来计算每个电路通过电线连接的所有实体。

我能想到的唯一故障安全方法是使用洪水填充算法从一个点展开并记录所有连接的对象，但我觉得这对于 android 应用程序来说效率太低了。

以下是有关游戏结构和线路的一些信息。

*   游戏是用java编写的。
*   所有对象当前都是静态的。
*   每个对象都保存在一个反映对象位置的数组中。只需引用数组中的 x/y 值即可访问相邻对象及其变量。这意味着可以根据需要更新相邻块。
*   玩家可以随意放置和移除电线，并且可以遵循任何模式。
*   电线可以在所有 x/y/z 轴上连接到其他电线和机械。
*   某些物体会输出能量，而其他物体会使用能量。

我目前正在考虑让wireGroup对象包含一组电线的所有连接对象，包括电线本身。每个连线对象都将包含连线组 ID，从而可以轻松地将新连线（和机器）添加到连线组中。

我真正需要的是一种在移除一根电线时检测连接对象的方法。在放置时检测连接的对象很简单：只需将新线旁边的任何机械添加到相邻线的线组中的列表中。

拆线时出现问题。由于它们可能是将两个对象连接在一起的 7 或 8 条独特的导线路径，因此很难找到移除一根导线的效果。

例如：

![EG1](../Images/7beacabd9e6a0a6e842d1756cf8fd43d.png)

在这里您可以看到连接的对象不会发生任何更改。

![EG2](../Images/db69a1db061977880377d71c0157941c.png)

在这里，wireGroup 将被分成两个wireGroup，一个包含蓝色和底部白色，一个包含两个白色。

即使有人可以提出仅二维的算法，那仍然很棒。

对不起，如果我错过了任何重要的事情，请告诉我，以便我可以弥补。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T04:05:05.993

将所有“可连接”点（无论是空的、电源还是机器）都视为（断开连接的）图中的节点。一根线可以连接两个节点。假设每个节点跟踪连接到它的电线，并将每条电线视为两种类型之一：“供电”和“未供电”，其中“供电”电线是那些向该节点传输电力的电线。每个节点在一对集合中跟踪这些。如果一个节点在“供电”集中有任何电线，或者它本身就是一个电源，则该节点是“供电”的。

所以有趣的问题是，如何处理添加或移除电线：

当电线放置在两个节点之间时，对于两个节点中的每一个，根据另一个节点的“电源”状态，将其置于通电或未通电组中。如果结果是该节点从未通电变为通电，则通过将电线从“未通电”移动到“通电”来适当地更改节点和电线的状态。

如果移除了一根电线，请将其从它所在的已连接电线集中移除。如果任何一个端点节点现在有一个空的“通电”连接集，则从该节点遍历图表，关闭所有人。

这应该非常有效地处理多个供电输入，只有在状态发生变化时才需要访问多个节点。如果子图中任何节点的状态发生变化，那么子图中所有节点的状态都会发生**变化**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:13:49.983

想象一下，每个节点要么提供电力，要么接受电力。每根电线都带有一个或多个电力传输方向（从电源到元件）。两个连接的电源将具有由两个内部连接表示的一根电线。

所以你有一个有向功率图。移除电线后，所有相关的内部连接都将被移除。检查所有受电线移除影响的节点，以查看它们是否有任何传入连接。如果没有，并且该节点先前已通电，则您必须从该点开始遍历图形并为每个节点断电。

添加电线也很简单，您检查两个节点的电源状态。每个通电的节点都会在另一个节点的方向上建立一个内部连接。然后该图必须从在每个节点建立向外连接的其他节点走出来。如果两者都没有通电，则建立一个无方向的连接，该连接可能会在通电时改变。这允许非常有效地使用多个电源。

# javascript - Twitter bootstrap 2.3.1 弹出框不起作用

> ID：15696721
> 
> 赞同：0
> 
> 时间：2013-03-29T03:08:58.320
> 
> 标签：javascript, jquery, twitter-bootstrap, popover

我不知道该怎么办我花了大约 40 分钟将弹出框添加到图像中，但没有结果，我在另一个项目中使用弹出框，我从该项目中复制了所有内容，但仍然无法使用 :( 在旧项目中我在这个较新的版本上使用 2.3.0 boostrap 我使用 2.3.1 并且无法添加弹出框：@ 有我的代码：

```
<img id="img" src="http://has.lv/uploads/profile/photo-178.jpg" data-toggle="popover" data-content="Test" data-placement="top" data-original-title="Title" />

<script type="test/javascript">
$(document).ready(function(){
$('#img').popover({ trigger: "hover" });
});
</script> 
```

和小提琴：http: [//jsfiddle.net/Enw68/](http://jsfiddle.net/Enw68/)

是的，我添加了 jquery 和 boostrap js 文件！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:18:51.043

您缺少 tooltip.js，这是 popover.js 的先决条件。

[http://jsfiddle.net/Enw68/4/](http://jsfiddle.net/Enw68/4/)

```
$(document).ready(function () {
    $('#img').popover({
        trigger: "hover"
    });
}); 
```

# jquery - 响应菜单需要在栏下方打开

> ID：15696736
> 
> 赞同：0
> 
> 时间：2013-03-29T03:10:59.883
> 
> 标签：jquery, html, css

使用下面的参考链接处理响应式菜单部分

[ [http://media02.hongkiat.com/responsive-web-nav/demo/index.html][1]](http://media02.hongkiat.com/responsive-web-nav/demo/index.html][1])

当我以 320x460 窗口分辨率打开它时，菜单会在菜单栏上方打开，我希望它在栏下方

![在此处输入图像描述](../Images/707c720309fca994882a900e8443caa7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:25:59.463

```
<nav class="clearfix">
    <a href="#" id="pull">Menu</a>
    <ul style="display: none;" class="clearfix">
        ...
    </ul>
</nav>

$('#pull').click(function() {
    $(this).next('ul').slideToggle();
}); 
```

看起来您需要调整媒体查询以匹配。菜单不会以更高的分辨率出现。

编辑：我在您的新小提琴中看到您正在使用 jQuery 处理其中的一些内容。可能最好留给 CSS。

# .net - .net web api 在 PUT 上更新模型

> ID：15696738
> 
> 赞同：1
> 
> 时间：2013-03-29T03:11:09.723
> 
> 标签：.net, asp.net-mvc-4, asp.net-web-api, wcf-web-api

所以我正在尝试更新模型。这是我的模型的设置方式：

```
public class Event{
  public int Id {get;set;}
  public string Name {get;set;}
  public DateTime Date {get;set;}
  public int Organizerid {get;set;}

  public virtual User Organizer {get;set;}
}

public class Organizer{
  public int Id {get;set;}
  public string Name {get;set;}

  pubilc virtual iCollection<Event> Events {get;set;}
} 
```

现在我为事件创建了一个 ViewModel (EventViewModel)，因为每当我返回常规事件时，它都会在我身上抛出一个循环错误，我必须在我拉起的每个模型上的每个虚拟机上使用 [JsonIgnore]。此外，它还可以防止 web api 返回有关当前模型的过多信息。不需要的信息。

我的视图模型

```
public class EventVM {
    public string Name {get;set;}
    public DateTime Date {get;set;}
} 
```

话虽如此，这就是我处理 PUT 的方式

```
[HttpPut]
        public HttpResponseMessage Put(int eventId, EventVM event)
        {
            if (ModelState.IsValid && eventId== event.Id)
            {

                try
                {
                    Event upEvent = dbcontext.Event.FirstOrDefault(e => e.Id == eventId);
                    upEvent.Name = eventVM.Name;
                    upEvent.Date = eventVM.Date;

                    dbcontext.SaveChanges();
                    return Request.CreateResponse(HttpStatusCode.OK);
                }catch(Exception ex){
                    return Request.CreateResponse(HttpStatusCode.BadRequest);
                }
            }
            else
            {
                return Request.CreateResponse(HttpStatusCode.BadRequest);
            }
        } 
```

我的问题是它没有保存更新。我会做一个 TryUpdateModel 但它似乎不能与 WebApi 一起使用。帮助！想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:13:22.437

也许在您的代码中的某个地方？

```
context.Configuration.AutoDetectChangesEnabled = false; 
```

修改事件后，如果上下文将属性视为已修改，您还可以检查此项

```
var nameIsModified = dbcontext.Entry(upEvent).Property(u => u.Name).IsModified; 
```

您也可以强制更新数据库（尽管我不会将此视为解决方案，而是将其视为解决方法，直到您诊断出问题为止）

```
dbcontext.Entry(upEvent).Property(u => u.Name).IsModified = true; 
```

将属性标记为已修改会在调用 SaveChanges 时强制将更新发送到属性的数据库，即使属性的当前值与其原始值相同 - [MSDN](http://msdn.microsoft.com/en-US/data/jj592677)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:54:03.300

假设您使用的是实体框架，并且您的示例可能与真实代码有些不完整。这可能是分离实体的问题。

尝试添加以下内容：

```
upEvent.State = EntityState.Modified);
dbcontext.SaveChanges(); 
```

dbcontext.SaveChanges();

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/7106211/entity-framework-why-explicitly-set-entity-state-to-modified)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T19:26:36.247

我假设您知道您正在使用该方法...所以

1.  检查参数是否被绑定，如果没有，您将永远无法通过第一次检查，并且您不会看到错误，因为不需要 mv 参数。好吧，您会在客户端上看到一个错误的请求，但代码中什么也没有。

2.  正如 ArdVark71 指出的那样，您的视图模型不包含 id

3.  确保您的 dbContext 不为空

4.  在您的尝试`upEvent.Name = eventVM.Name; upEvent.Date = eventVM.Date;` 中，事件VM 不存在

5.  您的实体是否有您未填写的要求？喜欢主办方？

6.  此外，日期和名称是错误的变量名称，我们的数据库人员会疯掉 =]

无论如何，对不起，如果这听起来太像代码审查，但是当出现代码问题时很难解决。还假设这些都只是拼写错误，您的 dbcontext 等仍然可能存在问题。因此，如果其他一切看起来都正确，请单步执行您的代码并查看 dbcontext，它是否隐藏了保存中的任何内容等？

祝你好运

# node.js - 将 Node.js 模块工作到应用程序目录结构中

> ID：15696743
> 
> 赞同：0
> 
> 时间：2013-03-29T03:11:37.403
> 
> 标签：node.js, npm, node-modules, node.js-client

我已经开始使用 Node.js 来制作 Web 应用程序。真是太棒了。我遇到了一些我想合并到我的构建中的模块。全局 npm 安装后，我可以在终端中使用模块。当需要将它们添加到我的应用程序时，我不知道如何将它们放在我的目录结构中，而且我还没有找到任何好的文档。我的典型 node.js 目录是：

*   根

    *   服务器

        *   服务器.js
        *   节点模块
    *   客户

        *   索引.html
        *   css -main.css
        *   javascript -main.js -jquery.js

我安装模块的过程是：

我 cd 进入我的服务器文件并运行 npm install 然后我转到我的 package.json 文件并将模块包含在依赖项中

```
{
  "name": "application-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app"
  },
  "dependencies": {
    "express": "3.1.0",
    "jade": "*",
    "stylus": "*",
    "<node-module-here>": "1.0.x",

  },
  "engines": {
  "node": "0.10.0",
  "npm": "1.2.14"
},

} 
```

之后，我转到我添加的 server.js 文件：

```
module.exports = require('<path_to_node-module_lib>'); 
```

当我运行依赖于客户端模块的函数（在终端中运行的函数）时，我没有收到错误，但该函数不会运行。因为我没有收到错误，所以我不知道如何调试。如果有人能识别出我的结构或实施中的一些致命缺陷并能提供一些建议，我会提供我的第一个孩子。

# iphone - 关于 JSON 日期转换错误

> ID：15696744
> 
> 赞同：0
> 
> 时间：2013-03-29T03:11:44.263
> 
> 标签：iphone, ios, nsdate, nsdateformatter

我得到 JSON Parse Date，我想使用 NSDateFormatter，但没有成功。

1.JSON 获取控制台日志

```
IncidentReceiveTime = "/Date(1353914100000+0800)/"; 
```

2.我的代码

```
NSString *dateStr =[NSString stringWithFormat:@"%@",[[[DateSortArry objectAtIndex:0] objectForKey:@"IncidentReceiveTime"]stringByReplacingOccurrencesOfString:@"/" withString:@""]];
    NSLog(@"dateStr:%@",dateStr);

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setLocale:[NSLocale currentLocale]];
    [dateFormatter setDateFormat:@"yyyy-MM-ddHH"];
    NSDate *date = [dateFormatter dateFromString:dateStr];
    NSLog(@"date:%@",date); 
```

3.NSDateFormatter控制台日志

```
dateStr:Date(1361943694000+0800)
date:(null) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T07:25:17.883

参考我的回答：

[iPhone：如何将正则表达式转换为日期格式？](https://stackoverflow.com/questions/7021256/iphonehow-to-convert-regular-expression-into-date-format)

在这里，我在上面的链接中从我的答案中发布了这段代码，好像以防万一将来上面的链接失效，那么这个答案就不会变得无用：

```
- (NSDate*) getDateFromJSON:(NSString *)dateString
{
    // Expect date in this format "/Date(1268123281843)/"
    int startPos = [dateString rangeOfString:@"("].location+1;
    int endPos = [dateString rangeOfString:@")"].location;
    NSRange range = NSMakeRange(startPos,endPos-startPos);
    unsigned long long milliseconds = [[dateString substringWithRange:range] longLongValue];
    NSLog(@"%llu",milliseconds);
    NSTimeInterval interval = milliseconds/1000;
    return [NSDate dateWithTimeIntervalSince1970:interval];
} 
```

从上述方法获得 NSDate 对象后：

```
NSDateFormatter *dateForm = [[NSDateFormatter alloc] init];
[dateForm setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
NSString *dateStr = [dateForm stringFromDate:<YourNSDateObject>];
[dateForm setDateFormat:@"<Your Desired Date Format>"];
NSDate *desireddate = [dateForm dateFromString:dateStr]; 
```

希望这可以帮助。

# wordpress - Wordpress Tiny MCE 更改默认选定编辑器

> ID：15696746
> 
> 赞同：1
> 
> 时间：2013-03-29T03:11:46.773
> 
> 标签：wordpress, tinymce, default

如何选择在 HTML 和可视化编辑器之间显示的默认编辑器？

目前，默认情况下始终选择可视化编辑器，我希望在加载页面时选择 HTML 编辑器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T12:40:31.173

这灵魂做到了。在您的主题中添加这一行`functions.php`。如果您想切换回来，请替换`"html"`为。`"tinymce"`

```
add_filter( 'wp_default_editor', create_function('', 'return "html";') ); 
```

# eclipse - 弹簧框架

> ID：15696751
> 
> 赞同：0
> 
> 时间：2013-03-29T03:13:21.133
> 
> 标签：eclipse, spring, eclipse-europa

我想学习 SPRING 框架（JAVA）。我知道核心 java、servlet、JSP、JDBC。现在，我想学习 SPRING 框架。

任何人都可以指导我，比如从哪里开始等。

我对 SPRING 框架一无所知，我什至不知道在哪里执行这个框架。我在 Eclipse (Europa) 上做了 JSP、servlet 等。

请有人指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:08:30.987

对于初学者来说，这些网站更可取：

[教程点](http://www.tutorialspoint.com/spring/)

[印度玫瑰](http://www.roseindia.net/spring/)

[java2s](http://www.java2s.com/Tutorial/Java/0417__Spring/Catalog0417__Spring.htm)

[专区](http://www.dzone.com/tutorials/java/spring)

你可以在 youtube 上获得数百个视频。教程点是新生的最佳选择。我们春天有很多电子书，去谷歌搜索吧。选择一本你的标准可以理解的书。祝一切顺利..

# c# - C# WPF DataGrid 转换器

> ID：15696752
> 
> 赞同：13
> 
> 时间：2013-03-29T03:13:39.780
> 
> 标签：c#, wpf, datagrid

几天来，我一直在尝试格式化数据网格中的字段。我怎样才能简单地更改期间是访问的日期字段。在这次尝试中，我不断收到错误：

*“{local:DateConverter}”值不是有效的 MarkupExtension 表达式。无法解析命名空间 'clr-namespace:Yabba' 中的 'DateConverter'。'DateConverter' 必须是 MarkupExtension 的子类。*

但是，我使用的所有示例都显示*DateConverter : IValueConverter*。

我几乎只想更改列以根据日期列出我想要的任何内容。但无法让任何 1 个示例/方法起作用。

XAML

```
<Window Name="MainForm" x:Class="Yabba.MainWindow"
    xmlns:local="clr-namespace:Yabba"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="655.217" Width="887.851" Loaded="Window_Loaded">
<Window.Resources>
    <local:DateConverter x:Key="dateConverter"/>
</Window.Resources>
<Grid>
    <DataGrid Name="dataGrid1"  AutoGenerateColumns="False" PreviewKeyDown="dataGrid1_KeyDown" CanUserAddRows="false" SelectionUnit="FullRow" IsReadOnly="True" SelectionMode="Single" HorizontalAlignment="Left" VerticalAlignment="Top" Height="348" Width="753" SelectionChanged="dataGrid1_SelectionChanged" Margin="0,20,0,0" MouseDoubleClick="dataGrid1_MouseDoubleClick">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Question" Binding="{Binding title}"></DataGridTextColumn>
            <DataGridTextColumn Header="Period" Binding="{Binding started, Converter={local:DateConverter}}"></DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

代码

```
namespace Yabba {
/// <summary>
[ValueConversion(typeof(DateTime), typeof(String))]
public class DateConverter : IValueConverter {
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {
        DateTime date = (DateTime)value;
        return date.ToShortDateString();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) {
        string strValue = value as string;
        DateTime resultDateTime;
        if (DateTime.TryParse(strValue, out resultDateTime)) {
            return resultDateTime;
        }
        return DependencyProperty.UnsetValue;
    }
} 
```

我在这里做错了什么？

**以此为例向任何人添加了注释：（与问题无关，查看选择的答案以获得答案）**

您可能需要根据情况更改类型。

```
[ValueConversion(typeof(DateTime), typeof(String))] 
```

我不得不改变我的

```
[ValueConversion(typeof(String), typeof(String))] 
```

然后重铸为 DateTime

```
DateTime date = DateTime.Parse((string)value); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T03:15:30.637

`Converter={local:DateConverter}}`

是错的。改用这个：

`Converter={StaticResource dateConverter}}`

注意小写的“d”。资源名称区分大小写。

# javascript - Javascript数组写html表

> ID：15696753
> 
> 赞同：-1
> 
> 时间：2013-03-29T03:13:42.393
> 
> 标签：javascript, html, arrays, function, random

我正在尝试创建一个像这样的表格：图片在这里：[http ://speedy.sh/JahdC/Screen-Shot-2013-03-28-at-8.12.08-PM.png](http://speedy.sh/JahdC/Screen-Shot-2013-03-28-at-8.12.08-PM.png)

```
___________________________________
|function|X|Y|function(x,y)       |
|x+y |rndX|rndY|Result of function|
|x+1 | ""  ""  ""
|x/y | "" "" "" 
|x%y
|square root(x^2 + y^2)
|x^2
|10*x + y/2
|SUM of all results 
```

我目前拥有的代码是：http: [//jsfiddle.net/wMF5M/10/](http://jsfiddle.net/wMF5M/10/)

```
<table id="content" border="1"></table>

function RandX() {
var x = Math.floor(Math.random() * 300);
return x;
}

function RandY() {
var y = Math.floor(Math.random() * 300);
return y;
}

var math1 = function (x, y) {
return x * y;
};
var math2 = function (x, y) {
return x + 1;
};
var math3 = function (x, y) {
return x / y;
};
var math4 = function (x, y) {
return x % y;
};
var math5 = function (x, y) {
return math.sqrt(x ^ 2 + y ^ 2);
};
var math6 = function (x, y) {
return x ^ 2;
};
var math7 = function (x, y) {
return (10 * x) + (y / 2);
};
var math8 = function (x, y) {
return ((x * y) + (x + 1) + (x / y) + (x % y) + 
(math.sqrt(x ^ 2 + y ^ 2)) + (x ^ 2) + ((10 * x) + (y / 2)));
};
// the function above is supposed to add the results of all functions together, 
and push into the array to be displayed
var maths = [];

maths.push(math1);
maths.push(math2);
maths.push(math3);
maths.push(math4);
maths.push(math5);
maths.push(math6);
maths.push(math7);
maths.push(math8);
//maths[0](RandX,2);//return RandX* RandY
//maths[1](3,4);//12 - put random numbners here?

var content = document.getElementById("content");
var tr = document.createElement("tr");
for (var i = 0; i < maths.length; i++) {

    var td = document.createElement('td');
    td.innerHTML = +maths[0](RandX(), RandY());
    tr.appendChild(td);
}
content.appendChild(tr); 
```

使用这种方法我如何写表格的第一行，保持这种格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:58:55.447

如果您要动态地逐行填充表格，请将代码放在表格标签中，如下所示...

```
<table>

----start code to write row
----<tr><td> $result </td></tr>
----loop
----end of code

</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T05:22:32.990

您可以使用一些在线 LaTeX 方程生成器从纯 LaTeX 制作方程图像。例如，`http://latex.codecogs.com/gif.latex`。

检查这个[jsFiddle](http://jsfiddle.net/ArieShout/xF9pg/1/)。它非常接近图像格式。

# ios - 从 UIViewController 访问 UITableViewCell 的属性

> ID：15696756
> 
> 赞同：1
> 
> 时间：2013-03-29T03:13:53.033
> 
> 标签：ios, objective-c, uitableview

我正在编写一个`UITableView`内部有`UIViewController`. 使用`UITableView`原型单元格，每个单元格内部都是一个`UITextField`. 正如您可能猜到的那样，视图是用户要填写的表单。

当用户单击 UI 中的按钮时，应触发一个事件，其中`UITextField`收集正在显示的每个 s 的所有文本值，以便将数据发送到服务器。

我无法访问单元格的`UITextField`属性，因此我可以获取文本值。

我的部分代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIDentifier = @"Cell";
    AddCardCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIDentifier forIndexPath:indexPath];

    if (cell == nil) {
        cell = [[AddCardCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIDentifier];
    }

    cell.campoTextField.placeholder = [placeholders objectAtIndex:indexPath.row];
    cell.tituloLabel.text = [titulosCampos objectAtIndex:indexPath.row];

    return cell;
} 
```

我的数据源的设置：

```
titulosCampos = [NSArray arrayWithObjects: @"Nombre", @"Correo", nil];
placeholders = [NSArray arrayWithObjects: @"Oscar Swanros", @"dev@swanros.com", nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T04:00:55.300

您可以检索存储在所有单元格中的文本`campoTextField`，然后使用此代码.....

```
NSMutableArray *titulosCampoTextArray = [[NSMutableArray alloc] init];
for (int i = 0; i < titulosCampos.count; i++) {

    AddCardCell *cell = (AddCardCell*)[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
    [titulosCampoTextArray addObject:cell.campoTextField.text];
}
NSLog(@"Data in titulosCampoText array %@",titulosCampoTextArray); 
```

希望这会对你有所帮助..:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:23:45.737

我假设您`AddCardCell`是文本字段的代表。最好的方法是让你的单元类声明它自己的委托协议。然后，您的视图控制器将成为单元格的代表。然后，您的单元格应实现文本字段的委托方法以检测文本何时更改。然后单元格应该告诉它的代表有新的文本。文本应该是委托方法中的参数之一。您的视图控制器将实现此单元委托方法。然后，视图控制器将使用更新后的文本更新数据模型。

点击按钮时，所有单元格中的文本都已经在数据模型中。

# mysql - 如何在 inno 设置中检查 MySQL 连接？

> ID：15696761
> 
> 赞同：1
> 
> 时间：2013-03-29T03:14:17.943
> 
> 标签：mysql, inno-setup

我正在通过 inno setup 制作安装包。运行包时，它应该连接到 localhost 上的 MySQL 服务器以创建数据库并导入一些表。如何检查 MySQL 连接是否有效，以及运行包时用户输入配置的连接选项（用户、密码和数据库名称）是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:39:28.150

您可以从 Inno 调用任何本机 DLL。这包括一个 MySQL 客户端库。

# python - Python Tkinter 标签延迟

> ID：15696765
> 
> 赞同：0
> 
> 时间：2013-03-29T03:15:25.360
> 
> 标签：python, tkinter, label, delay, wait

这可能是一个愚蠢的问题。我在 Tkinter GUI 中有一个标签，我希望它随着时间的推移而更新。

例子：

```
Msglabel=Tkinter.Label(... text="")

Msglabel.Cofigure(text=" EXAMPLE!")

Wait(5sec)

Msglabel.Configure(text=" NEW EXAMPLE!") 
```

我已经阅读了有关该`after()`方法的信息，但我正在寻找诸如 Wait 之类的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T05:27:05.987

您需要在等待期间将控制权交给 Tkinter，因为 Tkinter 在单线程循环中更新 UI。

在配置调用之间休眠将挂起 UI。

正如你所提到的，`after`是你想要的方法。尝试这样的事情：

```
try:
    import Tkinter as tkinter  # Python 2
except ImportError:
    import tkinter  # Python 3
import itertools

class MyApplication(object):
    def __init__(self):
        # Create and pack widgets
        self.root = tkinter.Tk()
        self.label = tkinter.Label(self.root)
        self.button = tkinter.Button(self.root)
        self.label.pack(expand=True)
        self.button.pack()

        self.label['text'] = 'Initial'
        self.button['text'] = 'Update Label'
        self.button['command'] = self.wait_update_label

        # Configure label values
        self.label_values = itertools.cycle(['Hello', 'World'])

    def launch(self):
        self.root.mainloop()

    def wait_update_label(self):
        def update_label():
            value = next(self.label_values)
            self.label['text'] = value

        update_period_in_ms = 1500
        self.root.after(update_period_in_ms, update_label)
        self.label['text'] = 'Waiting...'

if __name__ == '__main__':
    app = MyApplication()
    app.launch() 
```

# c - C中的无效初始化程序

> ID：15696766
> 
> 赞同：3
> 
> 时间：2013-03-29T03:15:26.893
> 
> 标签：c, initializer

我是 C 编程语言的初学者，我想编写一个散列程序。我可以用指定数量的`typedef ... Name`元素（在数组中）编写这个程序，但是当我使用动态分配时，会出现“无效的初始化程序”错误。

```
 typedef char Name[30];

    Name hashTable[MAX];

    int hash(Name name){
      int long sum = 0;
      int len=strlen(name);
      int i = 0;
      for (; i<len;i++)
        sum += name[i];
      sum = sum % MAX;
      printf("\nhash of [%s] = %ld\n",name,sum);
      return sum;
    }

    void main(){
      int i,j;
      for(i=0;i<MAX;i++)
        strcpy(hashTable[i],"");
      int pos, x, cont=1;
      printf("number of names: ");
      scanf("%d",&x);
      while (x>=cont){
       Name name = malloc(sizeof(Name));  // why this line have the error of "invalid initializer"?
       printf("\ntype the %dº name: ",cont);
       scanf("%s",name);
       pos=hash(name);
       strcpy(hashTable[pos],name);
       cont++;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-22T06:01:57.607

我知道这个答案很晚，但我犯了一个类似的愚蠢错误。变量`Name name`应该是一个指针。IE`Name * name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:00:30.280

您的*名称*声明使其静态（非动态）分配。因此，您不需要使用 malloc() 来分配空间。

# jsp - Maven 编译/安装更改 JSP 内容

> ID：15696769
> 
> 赞同：1
> 
> 时间：2013-03-29T03:15:31.660
> 
> 标签：jsp, maven, tomcat, war

我有一个远程 git 存储库，从中构建了 WAR。过程是：

**git push 到远程
git clone 在远程
mvn clean
mvn install** 

问题是在创建 WAR 的 mvn 安装过程中，其中一个 JSP 文件中的内容发生了变化。这是克隆的源 JSP 片段的样子：

```
 <c:forEach items="${agents}" var="agent">
            <tr>
                <td><c:out value="${agent.name}"/></td>
                <td><c:out value="${agent.phone}"/></td>
                <td><a href="${newMonthlyUrl}/${agent.guid}"><i class="icon-plus"></i> New Monthly</a></td>
                <td><a href="${editUrl}/${agent.guid}"><i class="icon-edit"></i> Edit</a></td>
                <td><a href="${deleteUrl}/${agent.guid}"><i class="icon-trash"></i> Delete</a></td>
            </tr>
        </c:forEach> 
```

但是在目标 WAR 中，${agent.name} 被清除了，并且是空的，如下所示：

```
 <c:forEach items="${agents}" var="agent">
            <tr>
                <td><c:out value=""/></td>
                <td><c:out value="${agent.phone}"/></td>
                <td><a href="${newMonthlyUrl}/${agent.guid}"><i class="icon-plus"></i> New Monthly</a></td>
                <td><a href="${editUrl}/${agent.guid}"><i class="icon-edit"></i> Edit</a></td>
                <td><a href="${deleteUrl}/${agent.guid}"><i class="icon-trash"></i> Delete</a></td>
            </tr>
        </c:forEach> 
```

在源服务器上一切正常。

Maven 2.2.1
Tomcat 7.0.26，源代码上的 Java 7（在 Java 1.6 级别编译）
Tomcat 7.0.37，目标上的 Java 6

任何想法为什么会发生这种情况？什么是更改 JSP 文件？我已经验证了正确的来源正在进入克隆的存储库。我很困惑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:17:04.503

不确定这里到底发生了什么。但这基本上是我所做的，并且问题不再存在：

1.  将 Maven 2.2.1 升级到 3.0.5
2.  将 Java 6 升级到 Java 7
3.  在 maven web 应用插件中声明了一个版本 (v 2.3)
4.  重建 Maven 索引
5.  新鲜的 git 推送

感谢评论者的参与。

# wso2 - 配置 WSO2 AS 和 BAM

> ID：15696770
> 
> 赞同：1
> 
> 时间：2013-03-29T03:15:32.180
> 
> 标签：wso2, wso2bam

我正在使用 BAM 2.2.0。我根据文档在 BAM 服务器内部配置了服务统计工具箱。并运行示例程序“service-stats”它工作正常。但是当我使用服务数据发布者配置在我的 AS 服务器中配置 BAM 并测试 BAM 服务器时。连接已建立。但是当我单击 BAM 中的仪表板时，它会显示一个空白页面，其中包含一些如何配置 AS 的消息。

目前在 BAM 可用脚本中，我可以看到“service-stats-271”。如何在 BAM 中可视化我的 AS 服务状态。两台服务器都在两台机器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:55:12.647

安装工具箱后自然会看到“service-stats-271”。但首先您应该查看数据是否已从 AS 到达 Cassandra。为此，您可以在 BAM 管理控制台中登录 Cassandra Explorer 并查看 EVENT_KS 键空间中是否存在您的列族。如果是，请查看是否有任何与您的事件相关的行。如果是，请查看在 Hive 查询执行期间数据是否已到达 H2 数据库。

如果您的数据未正确发布到 Cassandra，请再次阅读 [1]。有时您可能没有执行此处提到的以下说明。

```
Go to <WSO2 Application Server home>/repository/conf/etc and open bam.xml file and enable ServiceDataPublishing as follows: 

<BamConfig>   
     <ServiceDataPublishing>enable</ServiceDataPublishing>
</BamConfig> 
```

[1] [http://docs.wso2.org/wiki/display/BAM220/Setting+up+Service+Statistics+Data+Agent](http://docs.wso2.org/wiki/display/BAM220/Setting+up+Service+Statistics+Data+Agent)

# javascript - .load() 在 DOM 中的另一个 div 之前添加一个 div（不在内部）

> ID：15696771
> 
> 赞同：1
> 
> 时间：2013-03-29T03:15:34.043
> 
> 标签：javascript, ajax, jquery

我有一个分为 2 列（每列宽度为 50%）的站点：

HTML：

```
<nav></nav>
<div class="left-column"></div>
<div class="right-column"></div>
<footer></footer> 
```

我有一个带有 html 的辅助页面：

```
<nav></nav>
<div class="left-column"></div>
<div class="right-column level-two"></div>
<footer></footer> 
```

使用 .load() 我希望在第一页右栏的顶部加载第二页的右栏（目的是在之后添加一个关闭框）。

html 看起来像这样：

```
 <nav></nav>
   <div class="left-column"></div>
   <div class="right-column level-two"></div> //THE RIGHT COLUMN FROM LEVEL 2 INSERTED HERE
   <div class="right-column"></div>
   <footer></footer> 
```

问题是我想不出一种方法来做到这一点： .append() 仍然将它添加到它所附加的 div 中，并且 .before() 不能仅添加 jquery(?) 内容？

我希望两个右列存在，因为如果我关闭，`right-column level-two`我仍然想要原始的`right-column`下面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:22:04.650

```
$.get('<secondary_page_url>',function (data) {
  $(data).find('.right-column.level-two').insertBefore($('.right-column'));
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:25:16.553

*   使用`CSS`选择器搜索类`left-column`及其邻居类`right-column`
*   `holder`从两个类之间插入数据

* * *

```
 $(document).ready( function () {
        $.get('second-page-url.html',function (data) {
        $(data).find('.right-column.level-two').insertBefore($('.left-column + .right-column'));
}); 
```

# php - PHP - 从字符串执行 PHP

> ID：15696775
> 
> 赞同：0
> 
> 时间：2013-03-29T03:16:14.037
> 
> 标签：php

这个有点奇怪。我创建了一个函数，用于选择模板并包含它或解析 %0、%1、%3 等变量。这是当前功能：

```
if(!fopen($tf,"r")){
    $this->template("error",array("404"));
}
$th = fopen($tf,"r");
$t = fread($th, filesize($tf) );
$i=0;
for($i;$i<count($params);$i++){
    $i2 = '%' . $i;
    $t = str_replace($i2,$params[$i],$t);
}
echo $t . "\n";
fclose($th); 
```

其中 $th 是我的模板文件的相对目录。我的问题是，我需要在这些文件中执行 PHP，同时能够替换字符串变量 %0 %1 等。我该如何尝试呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:25:31.900

就像我在评论中所说的那样，我认为像 Smarty 这样的模板引擎可能会为您提供更好的服务，但这是我如何使用输出缓冲而不是`eval()`

像这样的东西

```
ob_start();
include "your_template_file.php";
$contents = ob_get_contents();  // will contain the output of the PHP in the file
ob_end_clean();

// process your str_replace() variables out of $contents 
```

# html - 子固定定位元素未与父相对定位元素对齐

> ID：15696780
> 
> 赞同：1
> 
> 时间：2013-03-29T03:16:55.860
> 
> 标签：html, css, position

我有一个`div`定位为相对的，它的高度`38px`在这个里面我有另一个`div`，它的位置设置为绝对，top 属性是`38px`，left 属性是`0`。
但是我可以从左边看到它没有与父元素对齐，而是看起来像我设置了 left 属性，`1px`这导致了父元素的一种左边`1px`距。

那么到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:05:44.650

我想这是因为您不能将子元素放在父元素的边框上。例如，如果您的父母有`border-width:5px`： ![在此处输入图像描述](../Images/ef08e0f70ded05337fad62458532a0ce.png)

看？您的子 div 恰好在 5px（父 div 的边框宽度）之后开始，并且由于它在父 div 内，它不能仅仅站在边框上（抱歉英语不好）无论您是否放置元素都无关紧要以这样的方式出现在父 div 之外，它仍然会遵循父子定位规则。

**解决方案：**

您可以设置：

```
left:-1px; 
```

或者

```
margin-left:-1px; 
```

在您的子元素上。看起来很老套，但这就是我们所能做的。希望它有所帮助

**演示**：http: [//jsfiddle.net/s4v89/1/](http://jsfiddle.net/s4v89/1/)

# javascript - Mouseenter 和 mouseleave 竞赛问题

> ID：15696786
> 
> 赞同：2
> 
> 时间：2013-03-29T03:17:50.320
> 
> 标签：javascript, jquery

所有，我知道 javascript 在单线程模式下运行。但我不确定在某些情况下是否存在多线程世界中常见的种族问题。假设你有 html 结构

```
<div id='parent' class="parent container">
    <div id="child1" class="child container">
       <div id="child11" class="child container">
           <!--maybe there are more nested divs with class 'container' -->
       </div>
       <div id="child12" class="child container">
           <!--maybe there are more nested divs with class 'container' -->
       </div> 
    </div>
    <div id="child2" class="child container">
       <div id="child21" class="child container">
           <!--maybe there are more nested divs with class 'container' -->
       </div>
       <div id="child122" class="child container">
           <!--maybe there are more nested divs with class 'container' -->
       </div> 
    </div>
</div> 
```

JS代码：

```
$(function() {
    $('div.container').mouseenter(function(e){
        e.stopPropagation();
        $(this).css("border","2px solid red");//set it selected state.
        $(this).append("<div class='newdiv'></div>"); 
        $(this).parents().each(function(){
            if ($(this).children(".newdiv").length>0)
            {
                $(this).children(".newdiv").remove();
                $(this).css("border","1px solid black");//set father of it not selected state
            }
        });
    }).mouseleave( function(e){
        $(".newdiv",this).remove();
        if ($(this).parent().hasClass("container") && $(".newdiv",$(this).parent()).length==0)
        {
            $(this).parent().css("border","2px solid red");//set it's parent selected state.
            $(this).parent().append("<div class='newdiv'></div>"); 
        }
        $(this).css("border","1px solid black");//set it not selected state.
    });
}); 
```

如果我将鼠标移入和移出这些 div 足够快，我怀疑是否存在种族问题。因为我发现有时`div.newdiv`没有被删除。我想我只是不了解javascript的运行机制。所以我有这样一个问题。希望有人愿意告诉我更多关于它的信息，以帮助我更好地理解它。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T04:22:05.207

> 我想我只是不了解javascript的运行机制。所以我有这样一个问题。希望有人愿意告诉我更多关于它的信息，以帮助我更好地理解它。

Javascript 没有多线程特性，所以说*可能存在竞争问题*是错误的。您可能已经注意到，Javascript 是一种事件驱动语言。这是一种架构，有两个主要阶段，*主循环*，检查是否触发了任何事件，以及*事件处理体*，为任何触发的事件运行。

在这种情况下，问题出在*主循环*阶段。`onmouseenter`是一小部分时间，即当鼠标到达节点边缘时。因此，如果在检查*主循环*中的另一个事件时处于*边缘*，则会发生类似您的问题的事情。但是使用*hover*，这部分时间会更长，因此在*主循环*中被检查的概率更高（接近 100%）。

 **** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T03:28:33.397

相反，我可以建议您一个更好的解决方案，而不是`mouseenter`and `mouseleave`，这将是`.hover()`并且不会冲突。

```
$('div.container').hover(function(e){
    e.stopPropagation();
    $(this).css("border","2px solid red");//set it selected state.
    $(this).append("<div class='newdiv'></div>"); 
    $(this).parents().each(function(){
        if ($(this).children(".newdiv").length>0)
        {
            $(this).children(".newdiv").remove();
            $(this).css("border","1px solid black");//set father of it not selected state
        }
    });
}, function(e){
    $(".newdiv",this).remove();
    if ($(this).parent().hasClass("container") && $(".newdiv",$(this).parent()).length==0)
    {
        $(this).parent().css("border","2px solid red");//set it's parent selected state.
        $(this).parent().append("<div class='newdiv'></div>"); 
    }
    $(this).css("border","1px solid black");//set it not selected state.
}); 
```***

# mysql - 创建 MySQL-Index 以防止双重发布？

> ID：15696788
> 
> 赞同：0
> 
> 时间：2013-03-29T03:18:01.803
> 
> 标签：mysql

我有一个包含（简化的`comments`）行`id`、、`article_id`和。`user_id``text`

现在我有了一个想法。我可以通过某种方式创建一个唯一索引`article_id`，`user_id`并`text`防止直接从数据库设计中重复发布吗？

我该怎么做，因为`text`它来自类型`TEXT`并且拒绝被索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:23:52.570

你的意思是防止意外双击“保存”按钮？或者防止在一周后发布相同的确切文本？如果是第一个，可能只是在第一次单击时禁用您的按钮。如果是第二个，您可能应该在您的文本字段上运行一个哈希函数，以查看该用户在该文章中是否已经存在匹配项。或者添加一个额外的字段，它是您的文本字段的哈希函数，并使用它创建您唯一的复合键。喜欢[这里](https://stackoverflow.com/questions/12698884/mysql-unique-text-field-using-additional-hash-field)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:29:16.573

要`INDEX`在`TEXT`字段上创建一个，您需要指定索引长度，就像错误提示一样。这只会索引您的文本字段的一部分，因此您可能需要考虑使用不同的字段作为索引的一部分，例如`DATE`字段 - 文章名称在当天是唯一的，或者类似的东西。

```
INDEX UniqueArticle (article_id, user_id, text(100)); 
```

**对于 MyISAM 表**

```
The maximum key length is 1000 bytes. This can also be changed by changing the source and recompiling. For the case of a key longer than 250 bytes, a larger key block size than the default of 1024 bytes is used. 
```

**对于 InnODB 表**

```
Index key prefixes can be up to 767 bytes. See [Section 12.1.8, “CREATE INDEX Syntax”][1]. 
```

见：[http ://dev.mysql.com/doc/refman/5.6/en/create-table.html](http://dev.mysql.com/doc/refman/5.6/en/create-table.html)

另请参阅：[在 mysql 表中使用 TEXT 字段时出现问题](https://stackoverflow.com/questions/6374326/problem-in-using-text-field-in-mysql-table)

# javascript - 如何在我的钛应用程序中获得此布局？

> ID：15696791
> 
> 赞同：0
> 
> 时间：2013-03-29T03:18:19.693
> 
> 标签：javascript, titanium, appcelerator

这是使多个布局垂直对齐的常见布局，我不知道如何在我的应用程序中获取它：

![我想实现的布局](../Images/28f60e528c6b8326852532ffc33ec70e.png)

我已经想出了如何做到这一点：

![在此处输入图像描述](../Images/f2b2af2f2e72d9c00bbb792129fe80f3.png)

但我真的很喜欢圆角在组顶部和底部的外观。我知道你可以用

```
var view = Titanium.UI.createView({
   borderRadius:10,
   backgroundColor:'red',
   width:50,
   height:50
});
window.add(view); 
```

但我真的希望它看起来像第一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:00:12.920

Appcelerator Kitchen Sink 项目有一个或 2 个示例。

这是一个： [https ://github.com/appcelerator/KitchenSink/blob/master/Resources/ui/common/baseui/table_views.js](https://github.com/appcelerator/KitchenSink/blob/master/Resources/ui/common/baseui/table_views.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:22:38.480

请参考[Join Two Text Fields](http://developer.appcelerator.com/question/140215/join-two-text-fields#243878)，它帮助我创建带圆角的文本字段。

您可以从以下链接下载图像

1.  [圆顶](http://iampnelson.com/tmp/TableViewRoundedTop.png)
2.  [中间图像](http://iampnelson.com/tmp/TableViewMiddle.png)
3.  [圆底](http://iampnelson.com/tmp/TableViewRoundedBottom.png)

# javascript - Ember js：TypeError this.init 未定义

> ID：15696793
> 
> 赞同：0
> 
> 时间：2013-03-29T03:18:35.403
> 
> 标签：javascript, ember.js

这与我[之前的问题有关](/questions/15580767/ember-js-in-my-example-why-does-the-logic-in-the-router-continue-even-though-th)。那里的答案似乎解决了问题。但我实际上是从另一条路线做同样的事情，现在我得到一个错误。应用程序通过 ajax 函数两次。第一次，我得到一个 TypeError。如果我重新加载页面，那么该函数将正确执行。我知道在文档中，它提到必须创建和定义的对象。有人可以给我举一个例子，说明需要如何创建扩展控制器才能在调用函数时执行它。

我收到一个错误：**TypeError: this.init is undefined**

这是我的路线：

```
App.RegisterPickRoute = Em.Route.extend({
redirect: function() {
    var registerTestController=this.controllerFor('registerTest')
    var isRegistered=registerTestController.registerContacts();
    if(!isRegistered)
        this.transitionTo('registerTest');
    else
        alert('holla')
    }

}); 
```

这是我在控制器中的功能：

```
 registerContacts: function(){
      var isRegistered=false;
      var self=this
      self.contactsToAdd=self.get('contactList').filterProperty('isSelected', true);
      $.ajax({
        type: 'POST',
        cache: false,
        url: contextPath + 'user/regTest',
        data:{contactList:self.contactsToAdd},
        success: function(data) {
                isRegistered=true;
        },
        error: function(jqXHR, textStatus, errorThrown) {
            isRegistered=false;
        },
        async: false
    });
    return isRegistered
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:03:34.507

我有语法错误。传递给ajax调用的data属性的值需要是self.contactsToAdd.toArray()

# php - 如何在sql查询中使用sql查询

> ID：15696794
> 
> 赞同：3
> 
> 时间：2013-03-29T03:18:36.993
> 
> 标签：php, sql

我有两张桌子：

1.  表类别（cat_id，类别）
2.  表 category_details(cat_id,id,...)

我有如下的sql代码：

```
$sql=mysql_query("select * from category");
while($rows=mysql_fetch_array($sql)){
$id_count=$rows['cat_id'];      

$sql1=mysql_query("select * from category_details where cat_id='$id_count'");
$count=mysql_num_rows($sql1);

} 
```

我可以这样使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T03:22:56.200

使用`JOIN`.

**例子**

```
SELECT * FROM category LEFT JOIN 
   category_details ON category_details.cat_id = category.cat_id; 
```

上面的查询将返回所有`category`和关联的`category detail`.

**OP评论回复**

```
SELECT    c.name,
          IFNULL(sub_c.total, 0) num
FROM      category c
LEFT JOIN ( SELECT   COUNT(*) total, cat_id
            FROM     category_details
            GROUP BY cat_id
          ) sub_c ON (sub_c.cat_id = c.cat_id); 
```

**完整代码**

```
<?php
    $query = "SELECT    c.name,
                IFNULL(sub_c.total, 0) num
            FROM      products_category c
                LEFT JOIN ( SELECT   COUNT(*) total, cat_id
                    FROM     product
                    GROUP BY cat_id
                ) sub_c ON (sub_c.cat_id = c.id)";

    $result = mysql_query($query)or die(mysql_error());

    echo "<table><tr><td>NameCount</td></tr>";
    while($row = mysql_fetch_assoc($result))
    {
        echo "<tr><td>".$row['name']."(".$row['num'].")"."</td></tr>";
    }
    echo "</table>";
?> 
```

**MySQL 表**

**产品类别表**

```
CREATE TABLE IF NOT EXISTS `products_category` (
  `id` int(11) NOT NULL,
  `name` varchar(200) COLLATE utf8_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `products_category`
--

INSERT INTO `products_category` (`id`, `name`) VALUES
(1, 'Erasmus'),
(2, 'Preston'),
(3, 'Ulric'),
(4, 'Gray'),
(5, 'Joseph'),
(6, 'Merrill'),
(7, 'Alan'),
(8, 'Jeremy'),
(9, 'Solomon'),
(10, 'Andrew'),
(11, 'Galvin'),
(12, 'Craig'),
(13, 'Cameron'),
(14, 'Omar'),
(15, 'Addison'); 
```

**产品表**

```
CREATE TABLE IF NOT EXISTS `product` (
  `id` int(11) NOT NULL,
  `name` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  `cat_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `product`
--

INSERT INTO `product` (`id`, `name`, `cat_id`) VALUES
(1, 'Wesley', 1),
(2, 'Graiden', 2),
(3, 'Cruz', 5),
(4, 'Hayden', 5),
(5, 'Kennedy', 6),
(6, 'Uriah', 8),
(7, 'Alan', 8),
(8, 'Cade', 1),
(9, 'Ryan', 5),
(10, 'Brody', 7); 
```

**以上将输出**

```
Erasmus(2)
Preston(1)
Ulric(0)
Gray(0)
Joseph(3)
Merrill(1)
Alan(1)
Jeremy(2)
Solomon(0)
Andrew(0)
Galvin(0)
Craig(0)
Cameron(0)
Omar(0)
Addison(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T04:03:03.587

您是否希望`COUNT`使用`GROUP BY`：

```
select c.cat_id, c.cat_name, count(cd.*)
from category c
   left join category_details cd 
       on c.cat_id = cd.cat_id
group by c.cat_id, c.cat_name 
```

这将返回每个类别以及与之关联的 category_details 的计数。Using`LEFT JOIN`将返回所有类别——`INNER JOIN`如果你只想要那些有详细信息的类别，请用 an 替换。

# java - 在 Karaf 中，有没有办法控制 kar 文件的加载顺序？关于跨kar文件依赖

> ID：15696795
> 
> 赞同：1
> 
> 时间：2013-03-29T03:18:50.463
> 
> 标签：java, osgi, apache-felix, apache-karaf, osgi-bundle

它出现在 karaf 中，如果 kar 文件 A 具有依赖于 kar 文件 B 中的某个功能的功能，并且 kar 文件 A 在 B 之前加载，则 kar 文件 A 中的功能安装将失败，说明存在未解决的依赖关系。

捆绑开始级别似乎没有什么不同。

有什么方法可以控制首先加载哪个 kar 文件？或者一种解决跨kar依赖的方法？或者甚至是让 karaf在加载**所有**kar 文件之前不尝试安装任何捆绑包/功能的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:07:41.567

据我所知，现在不可能，因为 KAR 部署者认为 KAR 文件是完整的。如果您需要此类依赖项，我建议使用普通 features.xml 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:19:16.553

我不确定你这是否回答了你的问题。但是可以在 Apache Karaf 中使用 bundle-start 级别标签来控制 bundle 加载的顺序。

例如

```
<?xml version="1.0" encoding="UTF-8" ?> 
<features name="cxl_esb_features">
<feature name="cxl_camel_routes">
  <feature>camel-jms</feature> 
  <bundle start-level="81">mvn:org.apache.commons/com.springsource.org.apache.commons.collections/3.2.1</bundle> 
  <bundle start-level="82">mvn:org.apache.commons/com.springsource.org.apache.commons.lang/2.6.0</bundle> 
 </feature>
</features> 
```

# php - 如何在 php 或 javascript 中打印 pdf 文件？

> ID：15696797
> 
> 赞同：1
> 
> 时间：2013-03-29T03:18:51.460
> 
> 标签：php, javascript, image, pdf, printing

当我使用 php 或 javascript 单击打印按钮时，我想自动打印一个 pdf 文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:34:30.177

您不需要添加按钮。如果您通过嵌入 PDF 或提供在新窗口中打开的链接来加载 PDF 以在网页上显示，除非文档已禁用打印，否则访问者只需右键单击并使用 Adob​​e Reader 打印命令即可。

你可以发一条这样的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-12T08:24:43.240

**注意力！Google 云打印在 2020 年 12 月之后被弃用。**

我知道这不是解决您的问题的最佳解决方案，但如果您的打印机具有原生 google cloudprint 支持，或者您通过 google chrome 浏览器将打印机添加到 cloudprint，您可以通过 google 打印文档。[将您的打印机添加到 Google Cloudprint 的步骤](https://support.google.com/cloudprint/answer/1686197?visit_id=636879751440482262-4109070173&rd=1)

要在 Google Cloudprint 上从 PHP 打印文档，您需要遵循Github 中[的 php-google-cloud-print](https://github.com/yasirsiddiqui/php-google-cloud-print)类。

有关如何获取凭证的信息在该类的[自述文件](https://github.com/yasirsiddiqui/php-google-cloud-print/blob/master/README.md)中。

有了这个代码片段，打印就像一个魅力。

```
require_once 'php/cprint/Config.php';
require_once 'php/cprint/GoogleCloudPrint.php';

$gcp = new GoogleCloudPrint();
$refreshTokenConfig['refresh_token'] = 'your_refresh_token';
$token = $gcp->getAccessTokenByRefreshToken($urlconfig['refreshtoken_url'],http_build_query($refreshTokenConfig));
$gcp->setAuthToken($token);
$printers = $gcp->getPrinters();
//print_r($printers); // Show available printers with IDs

if(count($printers) == 0){
    exit("Could not get printers");
}else{
    $printerID = "your_printer_id";
    $resarray = $gcp->sendPrintToPrinter($printerID, "Document title", "path/to/document.pdf", "application/pdf");
    if($resarray['status'] == true){
        echo "Document has been sent to printer and should print shortly.";
    }else{
        echo "An error occured while printing the doc. Error code:".$resarray['errorcode']." Message:".$resarray['errormessage'];
    }
} 
```

我希望这对某人有所帮助，因为我拼命寻找一种从我的网络服务器打印的方法。

# javascript - Javascript下拉列表将在我选择之前上升

> ID：15696798
> 
> 赞同：0
> 
> 时间：2013-03-29T03:18:57.337
> 
> 标签：javascript

在从从设备接收到命令“ES”后，我一直在使用以下编码将项目添加到我的下拉列表中：

```
 if (cmd == "ES") {
        var i;
        var cb;

        if (ret.substr(2, 2) == "04") cb = ObjByID('cbDeptStr');
        else cb = ObjByID('cbCntrStr');
        i = cb.length;
        while (i > 0) {
            cb.remove(1); // to remove all items which is already on the list.
            i--;
        }

        var oOption;
        var rows = ret.substr(4).split('|');
        var n;

        for (var i = 1; i < rows.length; ++i) {
            n = rows[i].substr(0, 4);
            if (n.length != 4) break;
            oOption = document.createElement("option");
            cb.options.add(oOption, i);
            oOption.innerHTML = n;
            oOption.value = n;

        }
    } 
```

该命令附带我需要添加到下拉列表中的项目。每次我按下下拉列表时，从设备都会向我发送此命令“ES”，以便它将项目添加到列表中。

问题是，每次我按下下拉列表，我都可以看到列表中已经添加的项目，但是一秒钟后，下拉列表又会重新出现。我没有时间选择列表中的项目。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:02:38.807

您可以使用 click() 以编程方式选择下拉列表

```
$('#id').click(); 
```

# c# - 如何在 C# 中获取对非托管（非 COM）接口的引用？

> ID：15696799
> 
> 赞同：0
> 
> 时间：2013-03-29T03:19:21.247
> 
> 标签：c#, pointers, interface, unmanaged

我有一个实现一些 API 的本机 DLL。C++ 标头如下所示：

```
class CAPIInterface
{
public:
    virtual int    __stdcall Release()=0;
    virtual LPCSTR __stdcall ErrorDescription(const int code)=0;
    virtual int  __stdcall Login(const int login,LPCSTR password)=0;
} 
```

在 C++ 中，以这种方式获取指向接口的指针：

```
typedef int (*APICreate_t)(int version,CAPIInterface **api);

pfnAPICreate =reinterpret_cast<APICreate_t>(::GetProcAddress(hlib,"APICreate"));
CAPIInterface *api=NULL;
if(pfnAPICreate) (*pfnAPICreate)(version,&api); 
```

接口的方法调用如下：

```
api->Login(123,"password"); 
```

现在我需要加载这个原生 DLL 并在我的 C# 程序中使用 API。我设法以这种方式加载 DLL 并获取指向本机接口的指针：

```
 public static class GlobalMembers
    {
        [UnmanagedFunctionPointer(CallingConvention.StdCall, CharSet = CharSet.Ansi)]
        public delegate int APICreate_t(time_t version, out IntPtr api);
    }
    ptr_pfnAPICreate = NativeMethods.GetProcAddress(hlib,"APICreate");
    pfnAPICreate = (GlobalMembers.APICreate_t)Marshal.GetDelegateForFunctionPointer(ptr_pfnAPICreate, typeof(GlobalMembers.APICreate_t));
    pfnAPICreate(version, out mptr); 
```

但现在我不确定如何将此指针 (mptr) 映射到接口的 C# 实现。另外我也不确定如何在 C# 中声明接口 CAPIInterface。我尝试以这种方式声明接口：

```
[StructLayout(LayoutKind.Sequential)]
public class CAPIInterface
{
    public delegate int Release();
    public delegate string ErrorDescription(int code);
    public delegate int Login(int login, string password);
} 
```

但是它没有编译......它返回这个错误：错误3不可调用成员'CAPIInterface.Login'不能像方法一样使用。我知道代表也必须在某个地方实例化......但是怎么做呢？如上所述声明 CAPIInterface 是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:00:14.233

在 SWIG 的帮助下，我能够将我的 C++ API 转换为 C#。它工作得很好。谢谢你。

# css - 同一个元素上的 CSS3 缩放、淡化和旋转（为什么 SCALE 不起作用？！？）

> ID：15696800
> 
> 赞同：1
> 
> 时间：2013-03-29T03:19:21.197
> 
> 标签：css, scale, css-transforms, css-animations

好的菜鸟。需要这个圆圈在动画开始时（旋转时）**缩放**和**淡入**一次，然后继续**旋转**。没那么难吧！？！让**淡入淡出**和**旋转**工作，但**规模**只是拒绝工作！

某处有**肥手指吗？**在我撕掉我剩下的头发之前， ***请暴露我的菜鸟以及为什么 SCALE 不起作用***？谢谢，仅此而已...

仅限最新的**FF**。*（懒得为其他一切编写代码。）*

[JS 小提琴示例](http://jsfiddle.net/dragontheory/sRdfD/)

```
<!DOCTYPE html>
<html>
<head>
<style> 
div
{width: 100px;
height: 100px;
background: transparent;
border: solid 10px blue;
border-radius: 50%;
border-top: solid 10px transparent;
border-bottom: solid 10px transparent;

-moz-animation-name: scaleIn,fadeIn,spin;
-moz-animation-duration: 1s,1s,1s;
-moz-animation-timing-function: ease-in,ease-in,linear;
-moz-animation-delay: 0,0,0;
-moz-animation-iteration-count: 1,1,infinite;
-moz-animation-direction: normal,normal,normal;
-moz-animation-fill-mode: forwards,forwards,forwards;
-moz-animation-play-state: running,running,running;}

@-moz-keyframes scaleIn
{
from    {-moz-transform: scale(2);}
to      {-moz-transform: scale(1);}
}

@-moz-keyframes fadeIn
{
from   {opacity: 0.0;}
to     {opacity: 1.0;}
}

@-moz-keyframes spin
{
from  {-moz-transform: rotate(0deg);}
to    {-moz-transform: rotate(360deg);}
}

</style>
</head>
<body>
<div></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:25:36.020

这是因为`-moz-transform:rotate()`是压倒一切的`-moz-transform:scale()`。他们需要在一起

[jsFiddle](http://jsfiddle.net/GUCYr/)

```
@-moz-keyframes transformIn {
    from {
        -moz-transform: scale(2) rotate(0deg);
    }
    to {
        -moz-transform: scale(1) rotate(360deg);
    }
} 
```

至于如何让它旋转和缩放然后只是旋转，你需要再做一个`@keyframes`

[jsFiddle](http://jsfiddle.net/tC9nz/1/)

```
@-moz-keyframes transformAnim {
    from {
        -moz-transform: rotate(0deg);
    }
    to {
        -moz-transform:  rotate(360deg);
    }
} 
```

仅供参考，您的`-moz-animation-fill-mode`规则对我来说破坏了第三个动画：s 不知道为什么，删除它似乎工作正常。

# php - PHP中的正则表达式元字符\w和\pL

> ID：15696801
> 
> 赞同：4
> 
> 时间：2013-03-29T03:19:21.637
> 
> 标签：php, regex

在版本 5.3.4 - 5.5.0beta1 中，是否`\w`和`\pL`等价？

```
 <?php
preg_match_all('#\w#u','سیب',$f);
var_dump($f);

preg_match_all('#\pL#u','سیب',$f);
var_dump($f);

array(1) {
  [0]=>
  array(3) {
    [0]=>
    string(2) "س"
    [1]=>
    string(2) "ی"
    [2]=>
    string(2) "ب"
  }
}
array(1) {
  [0]=>
  array(3) {
    [0]=>
    string(2) "س"
    [1]=>
    string(2) "ی"
    [2]=>
    string(2) "ب"
  }
} 
```

[在 Online PHP shell 中尝试上面的代码片段](http://3v4l.org/o8m0X#v534)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T03:30:50.613

看起来当您`u`在 PCRE 正则表达式中使用修饰符时，PHP 除了设置`PCRE_UCP`flag 之外，还设置了`PCRE_UTF8`flag，导致将 Unicode 属性引入到`\w`其他 POSIX 字符类中，而不仅仅是默认的 ASCII 字符。从[PCRE 的手册页](http://www.pcre.org/pcre.txt)：

> PCRE_UCP
> 
> 此选项更改 PCRE 处理 \B、\b、\D、\d、\S、\s、\W、\w 和一些 POSIX 字符类的方式。默认情况下，仅识别 ASCII 字符，但如果设置了 PCRE_UCP，则使用 Unicode 属性来对字符进行分类。

然后[在 PHP 源代码](http://lxr.php.net/xref/PHP_5_4/ext/pcre/php_pcre.c)（第 366-372 行）中确认了这一点，我们在其中看到：

```
 case 'u':   coptions |= PCRE_UTF8;
/* In  PCRE,  by  default, \d, \D, \s, \S, \w, and \W recognize only ASCII
   characters, even in UTF-8 mode. However, this can be changed by setting
   the PCRE_UCP option. */
#ifdef PCRE_UCP
                    coptions |= PCRE_UCP;
#endif 
```

因此，从我上面链接的同一个手册页中，您会看到`PCRE_UCP`设置时，字符类变为：

> \d 任何 \p{Nd} 匹配的字符（十进制数字）
> 
> \s 任何 \p{Z} 匹配的字符，加上 HT、LF、FF、CR
> 
> \w 任何 \p{L} 或 \p{N} 匹配的字符，加上下划线

# php - mongodb聚合框架按两个字段分组

> ID：15696802
> 
> 赞同：5
> 
> 时间：2013-03-29T03:19:28.150
> 
> 标签：php, codeigniter, mongodb, mongodb-php, mongodb-query

我正在使用聚合和管道查询我的数据库，有两个单独的查询：

```
 $groups_q = array(
            '$group' => array(
                '_id' => '$group_name',
                'total_sum' => array('$sum' => 1)
                )
            );

  $statuses_q = array(
            '$group' => array(
                '_id' => '$user_status',
                'total_sum' => array('$sum' => 1)
                )
            );

$data['statuses'] = $this->mongo_db->aggregate('users',$statuses_q);
$data['groups'] = $this->mongo_db->aggregate('users',$groups_q); 
```

我得到了我想要的：

```
Array
(
[statuses] => Array
    (
        [result] => Array
            (
                [0] => Array
                    (
                        [_id] => Inactive
                        [total_sum] => 2
                    )

                [1] => Array
                    (
                        [_id] => Active
                        [total_sum] => 5
                    )

            )

        [ok] => 1
    )

[groups] => Array
    (
        [result] => Array
            (
                [0] => Array
                    (
                        [_id] => Accounting 
                        [total_sum] => 1
                    )

                [1] => Array
                    (
                        [_id] => Administrator
                        [total_sum] => 2
                    )

                [2] => Array
                    (
                        [_id] => Rep
                        [total_sum] => 1
                    )
            )

        [ok] => 1
    )

) 
```

我不想查询我的数据库两次。有更好的方法吗？如何通过一个查询完成它？我应该使用 $project 运算符吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T07:30:16.827

您不能使用单个`aggregate()`以所需的结果格式进行两个分组计数。数据第一次分组后，您不再拥有创建第二个计数所需的详细信息。

直接的方法是执行两个查询，就像您已经在做的那样;-)。

### 对替代品的思考

如果您*真的*想在一个聚合查询中获取信息，您可以对这两个字段进行分组，然后在您的应用程序代码中进行一些操作。在 group 中有两个字段`_id`，结果将是 group_name 和 status 的每个组合。

`mongo`使用外壳的示例：

```
db.users.aggregate(
    { $group: {
         _id: { group_name: "$group_name", status: "$status" },
         'total_sum': { $sum: 1 }
    }}
) 
```

这似乎不是特别有效，并且适用于一些复杂的应用程序代码，因为您必须对结果进行两次迭代才能获得预期的分组。

如果您只想要每个组的唯一*名称*而不是名称 + 计数，则可以[`$addToSet`](http://docs.mongodb.org/manual/reference/aggregation/addToSet/#grp._S_addToSet)在单个组中使用。

另一个明显的选择是在您的应用程序代码中进行分组。仅对and字段进行一次`find()`投影，并在迭代结果时构建计数数组。`group_name``status`

# scala - 无法理解特质的行为

> ID：15696808
> 
> 赞同：0
> 
> 时间：2013-03-29T03:20:18.553
> 
> 标签：scala

我已经定义了如下特征，

```
trait Log {
  val logEnabled: Boolean
  def log(msg: String) {
    if(logEnabled) {
       println(msg)
    }
  }
} 
```

并想使用如下：

```
def log(enabled: Boolean)(msg: String) = new Log(){
  val logEnabled = enabled
}
implicit val enabled = true;
val log1 = log(true) _
log1("hi, world") 
```

但结果是空白的，没有打印出来，不是我想的那样。

有人可以解释一下这背后的机制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:31:10.003

您上面的代码`log1("hi, world")`，实际上并没有调用该`Log.log`函数，而是产生*了*一个`Log`. 这是因为调用了咖喱函数：

```
def log(enabled: Boolean)(msg: String) = new Log(){ ... }
val log1 = log(true) _ 
```

产生一个函数，给定一个字符串，将返回一个日志。

你可能想要的是：

```
trait Log {
  val logEnabled: Boolean
  def apply(msg: String) {
    if(logEnabled) {
      println(msg)
    }
  }
}

def log(implicit enabled: Boolean) = new Log(){
     val logEnabled = enabled
   }
implicit val enabled = true
val log1 = log
log1("hi, world") 
```

请注意如何在 Log 上调用 apply 方法。

# c# - 如何在 C# 项目中设置图像目录的相对路径？

> ID：15696812
> 
> 赞同：3
> 
> 时间：2013-03-29T03:20:54.707
> 
> 标签：c#, relative-path

我正在处理 C# 项目，我需要使用相对路径从图像目录中获取图像。我试过了

```
var path = Path.GetDirectoryName(Assembly.GetEntryAssembly().Location) + @"\Images\logo.png";
var logoImage = new LinkedResource(Path.GetDirectoryName(Assembly.GetEntryAssembly().Location)+@"\Images\logo.png") 
```

但是这些没有运气......我已经在程序运行时将图像复制到输出目录，但它没有拾取这些图像。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T06:02:30.697

如果您在 C# 中使用 LinkedResource()，则很可能不会获取您的相对 URI 或文件位置。

您可以使用一些额外的代码

```
var outPutDirectory = Path.GetDirectoryName(Assembly.GetExecutingAssembly().CodeBase);
var logoimage = Path.Combine(outPutDirectory, "Images\\logo.png");
string relLogo = new Uri(logoimage).LocalPath;
var logoImage = new LinkedResource(relLogo) 
```

现在它将获取您的相对路径，将其转换为内存中的绝对路径，它将帮助您获取图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:50:57.753

我会确保图像目录位于输出文件夹中。我通常`Assembly.GetExecutingAssembly().Location`用来获取我的 dll 的位置。

但是，对于图像，我通常使用项目属性页面中的资源页面/集合。[这](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=vs.90%29.aspx)是有关它的更多信息。将图像放入项目的资源中会自动为您提供访问它的简单方法。

有关 GetExecutingAssembly 的更多信息：[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getexecutingassembly.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:28:37.187

首先，将这些图像文件添加到您的项目中（创建一个 Image 文件夹是个好主意）

其次，在您的解决方案管理器中选择图像，然后查看属性窗口。

然后，将“复制到输出文件夹”更改为“始终”或“更新时复制”。

PS。我的 IDE 是繁体。中文所以我不能保证你的语言中的关键字是正确的。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-29T03:54:36.113

如果您想使用您的应用程序在您的文件夹中显示图像，请使用数组并将您文件夹中的所有图片放入数组中。然后你可以前进和后退。

```
string[] _PicList = null;

int current = 0;

_PicList = System.IO.Directory.GetFiles("C:\\Documents and Settings\\Hasanka\\
                                               Desktop\\deaktop21052012\\UPEKA","*.jpg"); 
// "*.jpg" will select all 

//pictures in your folder

String str= _PicList[current];

DisplayPicture(str);

private void DisplayPicture(string str)

{
    //throw new NotImplementedException();
    BitmapImage bi = new BitmapImage(new Uri(str));
    imagePicutre.Source = bi; // im using Image in WPF 
    //if u r using windows form application it must be a PictureBox i think.

    label1.Content = str;

} 
```

# php - 文本框值在发布时不变

> ID：15696813
> 
> 赞同：0
> 
> 时间：2013-03-29T03:21:11.177
> 
> 标签：php, html

我以以下方式创建了一个文本框

```
<input type="text"  name="email" id="email" class="text_inp2" value="Email" onclick="if(this.value=='Email'){this.value='';}" onblur="if(this.value==''){this.value='Email';}" /> 
```

因此，它在文本框中显示默认文本，`Email`当我编辑它`admin@stackoverflow.com`时，当我提交（即 PHP Post 函数）时，它仍然将值发布为`Email`但`admin@stackoverflow.com`我不想使用查询字符串方法。无论如何我可以通过使用简单的 PHP Post 函数来摆脱它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T03:27:12.893

您可能想查看 input`placeholder`属性，并为旧版浏览器添加类似[http://widgetulous.com/placeholderjs/之类的内容。](http://widgetulous.com/placeholderjs/)

```
<input type="text" name="email" id="email" placeholder="Email"> 
```

具有您想要的确切效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:27:57.053

你可以使用：

```
onchange="
if(this.value === this.defaultValue){
    this.value = '';
}
else if (this.value === '') {
    this.value = this.defaultValue;
}" 
```

或者为那些讨厌的旧浏览器 使用[占位符属性......</p>](http://davidwalsh.name/html5-placeholder)

我在我正在进行的一个项目中发现了这个，不确定它是否有效，但如果你有现代化工具，你可以试试这个

```
if(!Modernizr.input.placeholder){
    $('[placeholder]').focus(function(){
        if($(this).val() === $(this).prop('placeholder')){
            $(this).val('');
            $(this).removeClass('placeholder');
        }
    }).blur(function(){
        if($(this).val() === '' || $(this).val() === $(this).prop('placeholder')){
            $(this).addClass('placeholder');
            $(this).val($(this).prop('placeholder'));
        }
    }).blur();
    $('[placeholder]').parents('form').submit(function(){
        $(this).find('[placeholder]').each(function(){
            if($(this).val() === $(this).prop('placeholder')){
                $(this).val('');
            }
        });
    });
} 
```

# c# - 使用 GroupBy 和 Average 将 SQL 转换为 lambda LINQ

> ID：15696817
> 
> 赞同：16
> 
> 时间：2013-03-29T03:21:17.173
> 
> 标签：c#, linq, group-by, average

我花了几个小时尝试将简单的 SQL 转换为 lambda LINQ

```
SELECT ID, AVG(Score) FROM myTable
GROUP BY ID 
```

任何的想法？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-29T03:25:00.410

```
from t in myTable
group t by new {
  t.ID
} into g
select new {
  Average = g.Average(p => p.Score),
  g.Key.ID
} 
```

或*拉姆达*

```
myTable.GroupBy(t => new  {ID = t.ID})
   .Select (g => new {
            Average = g.Average (p => p.Score), 
            ID = g.Key.ID 
         }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T03:24:09.063

Linq-to-Objects 中的等价物如下所示。

```
var results = from row in myTable
              group row by row.Id into rows 
              select new 
              {
                  Id = rows.Key,
                  AverageScore = rows.Average(row => row.Score)
              }; 
```

对于类似 ORM 的实体框架来说，它只是略有不同。也就是说，您需要通过数据上下文或适当的 DbSet/ObjectSet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:23:47.617

```
var _result =   from a in myTable
                group a by a.ID into g
                select new
                {
                    ID = g.Key.ID,
                    AverageResult = g.Average(x => x.Score)
                } 
```

# php - 比较逗号分隔字符串之间的差异

> ID：15696821
> 
> 赞同：3
> 
> 时间：2013-03-29T03:21:44.727
> 
> 标签：php, string, compare

我有 2 个字符串，我想比较差异并使用不同项目的值。例如：

```
$stringA = "1, 2, 3, 4, 5"
$stringB = "1, 2, 4, 5, 6" 
```

所以与 stringB 的区别在于缺少 '3' 而添加了 '6'。

我想执行一个使用值“3”和“6”的函数。为了把它放在上下文中，假设字符串用于 MySQL 查询，我只想更新 id 为 3 和 6 的记录，因为它们已更改，因此需要更新，但其余部分保持不变，因此无需更新数据库记录那些。我希望这是有道理的？

我如何使用 PHP 获得差异并确保结果再次是带有逗号分隔值的字符串？IE

```
$stringDifference = "3, 6" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T03:27:58.757

刚刚在我的机器上运行了代码，这将解决问题

```
$stringA = "1, 2, 3, 4, 5";
$stringB = "1, 2, 4, 5, 6";

$stringA = explode(',', $stringA);
$stringB = explode(',', $stringB);

$Difference_1 = array_diff($stringA, $stringB); // Check string A Against String B
$Difference_2 = array_diff($stringB, $stringA); // Check String B against String A
$Difference = array_merge($Difference_1, $Difference_2); // Merge the two difference arrays together 
$Difference = implode(',', $Difference); // Convert to a string
echo "The Difference Between The Two Is: ".$Difference; // Echo the difference 
```

* * *

**更新**

```
function Differences ($Arg1, $Arg2){
    $Arg1 = explode (',', $Arg1);
    $Arg2 = explode (',', $Arg2);

    $Difference_1 = array_diff($Arg1, $Arg2);
    $Difference_2 = array_diff($Arg2, $Arg1);
    $Diff = array_merge($Difference_1, $Difference_2);
    $Difference = implode(',', $Diff);
    return "The Difference Between The Two Is: ".$Difference;
}

$stringA = "1, 2, 3, 4, 5";
$stringB = "1, 2, 4, 5, 6";

// Call By:

echo Differences($stringA, $stringB); 
```

很抱歉延迟更新。我已经习惯了 PHPStorm 作为一个新的脚本编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:36:44.550

```
function getDif(stringA, stringb){
    $stra = explode(",", $stringA);
    $strb = explode(",", $stringB);
    $viola = array_diff($stra,$strb);
    return  $voila
} 
```

# java - java String构造函数实现中为什么可以直接引用另一个字符串的私有属性

> ID：15696824
> 
> 赞同：1
> 
> 时间：2013-03-29T03:21:56.837
> 
> 标签：java, string, constructor, private

我已经审查了`Java.lang.String`实现。构造函数让我感到困惑。
为什么`result.value,result.count,result.offset`可以直接使用。
因为三人的财产都是**私人**的！！！

```
 /** The value is used for character storage. */
private final char value[];

/** The offset is the first index of the storage that is used. */
private final int offset;

/** The count is the number of characters in the String. */
private final int count;

public String(StringBuilder builder) {
    String result = builder.toString();
    this.value = result.value;
    this.count = result.count;
    this.offset = result.offset;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T03:24:58.057

Java 方法可以访问声明它的类的*任何*实例的私有字段值。它是语言的一部分。

（也许您认为“私有”在 Java 中的含义与在现实生活中的含义相同。事实并非如此。Java 访问修饰符主要不是维护数据隐私或安全性的机制。访问修饰符*主要是*关于什么正在维护抽象边界；即防止一个类依赖于另一个类的内部实现细节。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:24:55.063

`result.value,result.count,result.offset`来自参数`builder`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:40:18.003

**私有访问修饰符**

声明为私有的方法、变量和构造函数只能在声明的类本身内访问，即由其所有成员访问。私有访问修饰符是限制性最强的访问级别。类和接口不能是私有的。如果类中存在可以检索该类的私有实体的公共方法，则可以在类外部访问声明为私有的变量。

# entity-framework-5 - 如何配置 DBSet local 返回的结果的排序顺序？

> ID：15696829
> 
> 赞同：1
> 
> 时间：2013-03-29T03:22:18.590
> 
> 标签：entity-framework-5

我希望能够基于 DBSet<> local 通过在结果查询中传递字段的编号来配置绑定源的排序顺序。

即按查询中的第 n 个字段排序。

我猜我需要使用 .OrderBy() 方法，但不知道要传递什么。

我知道我需要这里是设置绑定源的代码。

```
var dset = base.Context.Organisations;
if (QuickSearch == null) QuickSearch = "";  
var qry = dset.Where(p => p.Name.Contains(QuickSearch));
qry.Load();
bindingSource.DataSource = dset.Local.ToBindingList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T18:26:48.423

以下代码可能会有所帮助-

_bindingSource.Sort = "列名 ASC";

或者

_bindingSource.Sort = "列名 DESC";

或者

_bindingSource.Sort = "ColumnName1 ASC，ColumnName2 DESC";

等等......

# c# - C# - 在当前进程没有加载现有系统环境变量时加载它们

> ID：15696830
> 
> 赞同：2
> 
> 时间：2013-03-29T03:22:21.460
> 
> 标签：c#, environment-variables, .net-assembly

在 Windows 上，我有一个 COM 可见的 C# 程序集。它引用其他程序集来控制机器中的应用程序。它工作正常。

但是，在 Apache Web Server 和使用 CGI 下，它不起作用。在做了一些调试之后，我发现问题在于，在 Apache 的 CGI 下运行时，引用的程序集显然需要的环境变量 SYSTEMROOT 和 SYSTEMDRIVE 没有加载。

我也可以将 Apache 配置为传递那些 environemtn 变量，但在这样做之前，我真的很想知道是否有一些命令可以放在我的 C# COM 可见程序集上，使其像加载环境变量一样加载环境变量，比方说， SYSTEM 用户或类似的用户，因此它不必中继启动应用程序传递的环境。

**当当前进程中没有设置**它（或者它被启动进程删除了）时，如何在 C# 中强制加载现有的系统环境变量？

在此先感谢您的任何建议！

**编辑 1 - 添加信息：**只是为了让它更清楚（正如我在当前答案中看到的那样，它不是很清楚）：Apache 有意为 CGI 进程删除了很多环境变量。不是 Apache 看不到它们，它可以，但它不会将它们传递给 CGI 进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T04:17:54.513

这应该可以解决问题：

```
Environment.GetEnvironmentVariable("variable", EnvironmentVariableTarget.Machine); 
```

我做了一个小测试，它正在工作：

```
 //has the value
        string a = Environment.GetEnvironmentVariable("TMP");

        Environment.SetEnvironmentVariable("TMP", null);

        //does not have has the value
        a = Environment.GetEnvironmentVariable("TMP");

        //has the value
        a = Environment.GetEnvironmentVariable("TMP", EnvironmentVariableTarget.Machine); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T06:18:22.000

**解决方案：** Marco 的回答很好，从技术上回答了我的问题 - 除了我发现环境变量 SYSTEMROOT 和 SYSTEMDRIVE 并没有真正在设置了所有环境变量的注册表中设置，因此，选择的答案适用于除这两个变量之外的所有变量，我在 OP 中指定。

SYSTEMROOT 在 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\SystemRoot 的注册表中定义，显然（经过更多研究），SYSTEMDRIVE 是作为 SYSTEMDRIVE 的子字符串生成的。

因此，要从注册表中获取 SYSTEMDRIVE 和 SYSTEMROOT 并将它们加载到环境中：

```
using Microsoft.Win32;

namespace MySpace
{
    public class Setup
    {
        public Setup()
        {
            SetUpEnvironment();
        }
        private void SetUpEnvironment()
        {
            string test_a = Environment.GetEnvironmentVariable("SYSTEMDRIVE", EnvironmentVariableTarget.Process);
            string test_b = Environment.GetEnvironmentVariable("SYSTEMROOT", EnvironmentVariableTarget.Process);
            if (test_a == null || test_a.Length == 0 || test_b == null || test_b.Length == 0)
            {
                string RegistryPath = "HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion";
                string SYSTEMROOT = (string) Registry.GetValue(RegistryPath, "SystemRoot", null);
                if (SYSTEMROOT == null)
                {
                    throw new System.ApplicationException("Cannot access registry key " + RegistryPath);
                }
                string SYSTEMDRIVE = SYSTEMROOT.Substring(0, SYSTEMROOT.IndexOf(':') + 1);
                Environment.SetEnvironmentVariable("SYSTEMROOT", SYSTEMROOT, EnvironmentVariableTarget.Process);
                Environment.SetEnvironmentVariable("SYSTEMDRIVE", SYSTEMDRIVE, EnvironmentVariableTarget.Process);
            }
        }
    }
} 
```

然后你可以`Setup setup = new Setup();`从其他班级打电话。就是这样。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T03:30:59.160

```
Environment.GetEnvironmentVariable 
```

请参阅[此处](http://msdn.microsoft.com/en-us/library/77zkk0b6.aspx)的参考资料。

例如

```
Environment.CurrentDirectory = Environment.GetEnvironmentVariable("windir");        
DirectoryInfo info = new DirectoryInfo(".");
lock(info)
{      
    Console.WriteLine("Directory Info:   "+info.FullName);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T03:27:31.140

变量是否设置为系统范围？

如果不是，那就是您需要做的，否则为运行 COM 的用户创建用户变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-12T01:13:36.403

谢谢你。我不能肯定地说这已经一劳永逸地刺穿了吸血鬼的心脏，但令人惊讶的是，错误已经消失了（现在）。奇怪的是访问语句

```
Environment.GetEnvironmentVariable("variable", EnvironmentVariableTarget.Machine); 
```

是调试器中的一个真正奇怪的地方。它没有出现在 Intellisense 中，甚至没有出现触发，这让我怀疑，**你们都知道，**这是某种神奇的运行时对象**Environment**，在调试器中没有实例化，但也可以良性跳转超过。那好吧。

哦，**我应该提一下**，在您看到该错误后，您会注意到 Windows 操作系统中的异常情况，这令人担忧。特别是，您将看到，如果您尝试使用控制面板/系统/高级属性（无论如何）它无法再加载环境变量的对话框，这表明**%windir% 已被严重**破坏（妥协）所有应用程序。坏坏坏....

# xml - simplexml_load_file 如何获取一组特定键的值

> ID：15696832
> 
> 赞同：0
> 
> 时间：2013-03-29T03:22:42.670
> 
> 标签：xml, xml-parsing, xml-serialization

您好，这是我拥有的 php：

```
if (file_exists('movies.xml')) {
    $xml = simplexml_load_file('movies.xml');

print $xml->key['Movie'];  
} 
```

这是 movies.xml 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict><dict>
<key>2066</key>
        <dict>
            <key>ID</key><integer>111</integer>
            <key>Year</key><string>2011</string>
            <key>Movie</key><string>The beach</string>
<dict>
<key>2068</key>
                <dict>
            <key>ID</key><integer>112</integer>
            <key>Year</key><string>2012</string>
            <key>Movie</key><string>Titanic</string>
<dict> 
```

`<key>Movie</key>`在这种情况下，我试图获得价值：海滩和泰坦尼克号。（如果可能的话，我想存储在一个数组中）

任何建议我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:36:46.233

看起来您有一些格式不正确的 XML。`simplexml_load_file`正在返回错误。

[http://www.php.net/manual/en/function.simplexml-load-file.php](http://www.php.net/manual/en/function.simplexml-load-file.php)

> 返回 SimpleXMLElement 类的对象，其属性包含 XML 文档中保存的数据，如果失败则返回 FALSE。

# python - App Engine 开发环境无法启动应用

> ID：15696835
> 
> 赞同：0
> 
> 时间：2013-03-29T03:23:00.030
> 
> 标签：python, google-app-engine

将我的应用引擎开发环境升级到 1.7.6 后，应用无法启动。在本地运行时，我收到以下错误，该错误不在项目代码中。

> 回溯（最后一次调用）：文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/_python_runtime.py”，第 194 行，在 _run_file（**文件**, globals()) 文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/_python_runtime.py”，第 190 行，在 _run_file execfile(script_path, globals_) 文件“/Applications /GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/python/runtime.py”，第 101 行，在 main() 文件“/Applications/GoogleAppEngineLauncher. app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/python/runtime.py”，第 78 行，在主 sandbox.enable_sandbox(config) 文件“/Applications/GoogleAppEngineLauncher .app/Contents/Resources/GoogleAppEngine-default。bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/python/sandbox.py”，第 164 行，在 enable_sandbox 中从 google.appengine.runtime 导入运行时文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine -default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/runtime.py”，第 39 行，从 google.appengine.runtime 导入 cgi 文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default .bundle/Contents/Resources/google_appengine/google/appengine/runtime/cgi.py"，第 31 行，从电子邮件导入 feedparser ImportError: cannot import name feedparser运行时导入运行时文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/runtime.py”，第 39 行，来自 google.appengine.runtime 导入cgi 文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/cgi.py”，第 31 行，来自电子邮件导入 feedparser ImportError：无法导入名称提要解析器运行时导入运行时文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/runtime.py”，第 39 行，来自 google.appengine.runtime 导入cgi 文件“/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/cgi.py”，第 31 行，来自电子邮件导入 feedparser ImportError：无法导入名称提要解析器app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/cgi.py”，第 31 行，从电子邮件导入 feedparser ImportError：无法导入名称 feedparserapp/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/cgi.py”，第 31 行，从电子邮件导入 feedparser ImportError：无法导入名称 feedparser

奇怪的是，其他四个应用程序将毫无错误地启动。我在这个失败的项目中找不到任何已更改或会导致此错误的内容。

还要注意...

*   应用程序在部署到 App Engine 时运行
*   当我将 SDK 降级到 1.7.5 时，应用程序再次开始运行

应用定义

```
application: myapp
version: 1
runtime: python27
api_version: 1
threadsafe: true

derived_file_type:
- python_precompiled

inbound_services:

handlers:

- url: /css
  static_dir: public/css

- url: /img
  static_dir: public/img

- url: /js
  static_dir: public/js

- url: /favicon.ico
  static_files: public/img/favicon.ico
  upload: public/img/favicon.ico

- url: /_ah/mail/.+
  script: email.email.app

- url: .*
  script: main.app 
```

# javascript - 进度条的 jQuery UI Bounce

> ID：15696838
> 
> 赞同：0
> 
> 时间：2013-03-29T03:23:23.437
> 
> 标签：javascript, jquery, html, jquery-ui, animation

我如何将 jQuery 的 UI Bounce 功能添加到这个脚本中？该脚本当前将进度条滑出到设定位置。我希望当它到达该位置时，它会来回弹跳几次然后休息。

我尝试了一些以前的堆栈溢出答案，但没有一个有效。

```
 $(function () {
$(".meter .bar").each(function () {
    $(this)
        .data("origWidth", $(this).width())
        .width(0)
        .animate({
        width: $(this).data("origWidth")
    }, 900);
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:27:06.563

这是一个hack，检查它是否可以接受。

因为为了使用`bounce`动画我们需要调用`show`一个隐藏项，检查闪烁效果是否可以接受，然后就可以使用了。

尝试使用动画回调

```
$(function() {
    $(".meter .bar").each(function() {
        $(this).data("origWidth", $(this).width()).width(0)
            .animate({
                width : $(this).data("origWidth")
                }, 900, function(){
                    $(this).effect("bounce", {
            times:3,
            direction: 'right'
                    });
        });
     });
}); 
```

演示：[Plunker](http://plnkr.co/edit/fzjzBgCNJo1TO4LgzUDp?p=preview)
演示：[效果](http://plnkr.co/edit/Kc89gLz57sUXNk6R7Wiq?p=preview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:29:19.353

试试下面的。它使用 CSS 模块后的对象`animate()`来设置属性。

您可以使用`bounce`仅更改选项中的方向。

```
$(function () {
    $(".meter .bar").each(function () {

        $(this).data("origWidth", $(this).width())
            .width(0)
            .animate({
                width: $(this).data("origWidth")
            }, 700)
            .effect('bounce', {times: 3, 
                              direction: "right", 
                              distance: 10}
                    , 700);
    });
}); 
```

演示：[jsFiddle](http://jsfiddle.net/uk2vZ/4/)

# javascript - 自动重定向到移动网站创建问题

> ID：15696842
> 
> 赞同：0
> 
> 时间：2013-03-29T03:23:53.300
> 
> 标签：javascript, jquery, mobile

我正在使用它来重定向到网页的移动版本（它不在子域中）

```
<script type="text/javascript">
<!--
if (screen.width <= 699) {
document.location = "http://www.site.com/mobile/";
}
//-->
</script>

<script language="javascript"> 
<!--
var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));
if (mobile) ||  (navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) {
  location.replace("http://www.site.com/mobile/");
}
//-->
</script> 
```

但是当我从手机访问时，我收到一个错误，即找不到服务器？

这是手机版的标题

```
<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
<link rel="apple-touch-icon" sizes="114x114" href="images/icontwo.png">
<link rel="apple-touch-startup-image" href="images/startup.png" /> 
```

是什么原因造成的？，如果我直接输入，它似乎可以工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:37:40.147

为了安全起见，我会使用该对象，`window.location.href`因为从语义上讲，该`document`对象指的是 DOM 文档或页面上的 HTML 元素。此外，某些浏览器仅使用`window.location.href`

此外，您似乎正在使用两个重定向：

```
document.location = "http://www.site.com/mobile/"; 
```

和

```
location.replace("http://www.site.com/mobile/"); 
```

这可能会导致问题。`location.replace`实际上也破坏了后退按钮功能，这可能会导致一些奇怪的效果，更不用说激动的用户了。

另外，请确保您没有进入该网站`https://`

# scala - 如何编译 scala swing 应用程序？

> ID：15696843
> 
> 赞同：0
> 
> 时间：2013-03-29T03:23:57.380
> 
> 标签：scala, scala-swing

我正在使用：

```
% scalac -version
Scala compiler version 2.9.1 -- Copyright 2002-2011, LAMP/EPFL 
```

在 Ubuntu 12.04 上。

这段代码保存在 HelloGui.scala 中：

```
import scala.swing._

object HelloGui extends SimpleSwingApplication {
  def top = new MainFrame {
    title = "Hello World GUI"
    contents = new Button {
      text = "Click me"
    }
  }
} 
```

当我尝试编译它时，我得到：

```
% scalac HelloGui.scala        
HelloGui.scala:1: error: object swing is not a member of package scala
import scala.swing._
             ^
one error found 
```

我试过使用`import swing._`（从教程中不清楚我需要在这个版本的 scala 中使用哪个导入路径），我得到：

```
% scalac HelloGui.scala
HelloGui.scala:1: error: not found: object swing
import swing._
       ^
one error found 
```

当我查看 /usr/share/java 时，我看到 scala-swing-2.9.1.jar 和 scala-swing.jar 作为它的符号链接，所以看起来库似乎存在？

我是否缺少编译器标志或是否需要安装另一个包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:26:52.250

编译器需要明确传递swing jar 的路径。这有效：

```
% scalac -classpath /usr/share/java/scala-swing.jar HelloGui.scala 
```

# mysql - 导入不同版本的mysql脚本文件

> ID：15696844
> 
> 赞同：0
> 
> 时间：2013-03-29T03:24:08.023
> 
> 标签：mysql

目前，我正在使用 mysql 版本 5.0.45 - community-nt。我已经在该数据库中创建了表。之后，我从中导出脚本文件并导入其他 mysql 服务器。该版本是 5.5.29。在我的表中，有 BIT 数据类型。当我将导出的数据导入其他 mysql 版本时，导入的数据发生了变化。导入的数据不正确。那么，我该如何处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:30:00.997

如果您使用`mysqldump`命令导出，则可以使用该`--compatible`选项。出于某种原因，没有`mysql50`选项，但您可以使用`mysql40`并且它应该适合您：

```
mysqldump -uuser -ppassword -hyour.host \
  --compatible=mysql40 your_database > your_database.sql 
```

# ios - cgcontext 旋转矩形

> ID：15696850
> 
> 赞同：3
> 
> 时间：2013-03-29T03:25:19.100
> 
> 标签：ios, rotation, core-graphics, cgcontext, rect

伙计们！我需要向 CGContext 绘制一些图像。这是相关代码：

```
CGContextSaveGState(UIGraphicsGetCurrentContext());

CGContextRef ctx = UIGraphicsGetCurrentContext();

CGRect rect = r;

CGContextRotateCTM(ctx, DEGREES_TO_RADIANS(350));
[image drawInRect:r];

CGContextRestoreGState(UIGraphicsGetCurrentContext()); 
```

实际上，矩形是旋转并显示在一个区域上，这不是我的目的。我只想旋转图像并显示在同一位置。有任何想法吗 ？？？？？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-29T16:29:24.300

旋转是关于上下文的原点，这是矩形相对的同一点。如果您想象背景中有一张方格纸，您可以更清楚地看到发生了什么：

![旋转上下文，背景是方格纸网格，前景是矩形](../Images/6ec3c82a721e485ea5aea615cb7ecf8d.png)

这条线是你的窗口/视图/层/上下文的“底部”（y=0）。当然，您可以根据需要在底部下方绘制，如果您的上下文以正确的方式转换，您甚至可以看到它。

无论如何，我假设你想要做的是将矩形旋转到位，相对于未旋转的世界，而不是旋转世界和其中的一切。

旋转任何东西的唯一方法是旋转世界，这就是你需要这样做的方式：

1.  保存图形状态。

2.  将原点平移到要绘制矩形的点。（您可能想要转换到它的中心点，而不是矩形的原点。）

    ![带有方格纸背景的翻译上下文，显示矩形中心的原点](../Images/b84f8856eaf0c14f7c0d2c46c9ef3973.png)

3.  旋转上下文。

    ![带有方格纸背景的翻译和旋转上下文，显示轴现在像以前一样向上倾斜，但现在翻译的原点也像矩形一样移动](../Images/53dd1f9ea71eb899bdb3a58875c3aa2a.png)

4.  绘制以原点为中心的矩形。换句话说，你的矩形的原点应该是宽度的一半和高度的一半（即`(CGPoint){ width / -2.0, height / -2.0 }`）——不要使用它之前的原点，因为你已经在翻译步骤中使用了它。

    ![在其位置绘制的矩形，删除了方格纸背景和原点线](../Images/dcf26d71853d7b75f6c6bc57af407ff5.png)

5.  恢复 gstate，以便以后的绘图不会旋转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T11:52:47.713

对我有用的是首先使用旋转矩阵来计算保持图像居中所需的平移量。下面我假设您已经将 centerX 和 centerY 计算为绘图框的中心，并且“theta”是您想要的以弧度为单位的旋转角度。

```
let newX = centerX*cos(theta) - centerY*sin(theta)
let newY = centerX*sin(theta) + centerY*cos(theta)

CGContextTranslateCTM(context,newX,newY)
CGContextRotateCTM(context,theta)
<redraw your image here> 
```

对我来说工作得很好。希望能帮助到你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T04:16:16.323

使用以下代码旋转您的图像

// 将度数转换为弧度

```
CGFloat DegreesToRadians(CGFloat degrees)
{
    return degrees * M_PI / 180;
}; 
```

用drawRect方法写

```
 // create new context
CGContextRef context = UIGraphicsGetCurrentContext();
// define rotation angle
CGContextRotateCTM(context, DegreesToRadians(45));
// get your UIImage
UIImage *img = [UIImage imageNamed:@"yourImageName"];
// Draw your image at rect
CGContextDrawImage(context, CGRectMake(100, 0, 100, 100), [img CGImage]);
// draw context
UIGraphicsGetImageFromCurrentImageContext(); 
```

# python - 在 Python 中打印二叉树插入的每个阶段的最佳方法

> ID：15696855
> 
> 赞同：0
> 
> 时间：2013-03-29T03:25:54.423
> 
> 标签：python, oop, python-2.7, binary-tree, binary-search-tree

我试图在插入的每一步之后打印二叉搜索树的每个阶段。但是，我的代码生成的输出似乎错过了初始根数据插入步骤，并且还重复了某些阶段。我需要一个干净简单的方法来做到这一点。有没有办法使用`__dict__.values()`.

**我的代码：**

```
class Node:
    def __init__(self, data):
        self.data = data
        self.left = None
        self.right = None

    def addNode(self, data):
        if data < self.data:
            if self.left is None:
                self.left = Node(data)
            else:
                self.left.addNode(data)  # recursively calling addNode method
        else:
            if self.right is None:
                self.right = Node(data)
            else:
                self.right.addNode(data)

        if not self.left is None and not self.right is None:
            print self.left.data, self.data, self.right.data
        elif self.left is None and not self.right is None:
            print None, self.data, self.right.data
        elif not self.left is None and self.right is None:
            print self.left.data, self.data, None

if __name__ == '__main__':
    n = Node(5)
    #print n.__dict__.values()
    n.addNode(3)
    n.addNode(2)
    n.addNode(8)
    n.addNode(4) 
```

**生成的输出：**

```
3 5 None
2 3 None
3 5 None
3 5 8
2 3 4
3 5 8 
```

**预期输出：**

```
None 5 None
3 5 None
2 3 None
3 5 8
2 3 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:29:29.507

由于您设计的方式，打印步骤发生在每个递归步骤中，从内到外。所以，为了更有意义，让我们来看看这个。`n.addNode(3)`给我们的你

```
3 5 None 
```

没有惊喜。但是当你说你期望：

```
2 3 None 
```

但两者兼得，

```
2 3 None
3 5 None 
```

这是因为要做`n.addNode(2)`的是检查第一级（`3 5 None`）然后查看较低级别（具有`data`属性 =的节点`3`）。因此，“从内到外”打印，我们得到`2 3 None`(new subtree) 然后又是第一级，`3 5 None`. 出于同样的原因，当你期待时，

```
2 3 4 
```

你反而得到，

```
2 3 4
3 5 8 
```

`None 5 None`初始树（您期望的位置）没有打印的事实是一个单独的问题。这只是因为您正在初始化`data`属性并且永远不会进入打印部分，因为您没有调用`addNone`.

一个可能的解决方案（仍然保持您的结构）是仅在您将节点添加到树结构并手动打印初始子树时打印。也许写这样的东西：

```
class Node:
    def __init__(self, data):
        self.data = data
        self.left = None
        self.right = None

    def addNode(self, data):
        if data < self.data:
            if self.left is None:
                self.left = Node(data)
                self.printSubtree()
            else:
                self.left.addNode(data)  # recursively calling addNode method
        else:
            if self.right is None:
                self.right = Node(data)
                self.printSubtree()
            else:
                self.right.addNode(data)

    def printSubtree(self):
        if not self.left is None and not self.right is None:
            print self.left.data, self.data, self.right.data
        elif self.left is None and not self.right is None:
            print None, self.data, self.right.data
        elif not self.left is None and self.right is None:
            print self.left.data, self.data, None
        else:
            print None, self.data, None

if __name__ == '__main__':
    n = Node(5)
    n.printSubtree()
    n.addNode(3)
    n.addNode(2)
    n.addNode(8)
    n.addNode(4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:44:40.407

1-您在添加节点后打印，因此您无法按预期找到具有 None、Number、None 的元素。（因此请尝试在添加节点之前移动此部分）。2-打印时您只考虑了三种可能性，但还有另一种可能性，当左右节点均为无时，请尝试添加此选项。

# ms-access - 根据列表双击事件在表格内搜索文件名

> ID：15696858
> 
> 赞同：0
> 
> 时间：2013-03-29T03:26:39.683
> 
> 标签：ms-access, vba, ms-access-2007

各位程序员，您好，我非常绝望，因为我不知道如何解决（也许）简单的问题。我有两张桌子。第一个 [Files] 有两个字段：[FName]（文件名）和 [FPath]（文件路径），第二个 [Reports] 有 [DocNo] [Title]...等等等等...

FName 字符串由 [DocNo] [Title] 组成（但整个标题字符串不是文件路径）

示例：[DocNo] Smith/RT/2000/001
[Title] BHP Iron Ore Pty Ltd 68kg/m 头部硬化钢轨中改性铝热焊缝的评估

[FName] SmithRT2000001 改性铝热焊缝评估.pdf

我有一个表格，上面有一个搜索列表。此列表显示 [报告] 中的记录。通过双击特定记录，它会触发双击事件。在事件中，我得到 DocNo 和 Title 的值，并在 Files 表中搜索要匹配的 Fname。但令人惊讶的是，当我放置 sql 搜索甚至在设计模式下进行查询时，它没有返回任何内容？
**但**有趣的是，当我硬编码查找记录时，两种方式都会找到它。那个怎么样？

这是要检查的VBA：

Private Sub SearchResults_DblClick(取消为整数)

```
'Initializing the string variables
Dim strSQL As String
Dim strFileName As String
Dim strTitle As String
Dim DocumentNo As String
Dim titleLeng As Integer

DocumentNo = Me.SearchResults.Column(0)
DocumentNo = Replace(DocumentNo, "/", "")
strTitle = Me.SearchResults.Column(1)
Debug.Print (DocumentNo)

SrchText = DocumentNo

SearchResults.RowSourceType = "Table/Query"
SearchResults.RowSource = "QRY_OpenFile"

Debug.Print (strTitle)

strTitle = Left(strTitle, 10)
SrchText = strTitle

Debug.Print (SrchText)
SearchResults.RowSource = "QRY_OpenFile"

Dim rst As Recordset
Dim db As DAO.Database
Set db = CurrentDb()
strSQL = "SELECT Files.FName FROM Files WHERE Files.FName Like " * " & strTitle & " * ";"
Debug.Print (strSQL)
Set rst = db.OpenRecordset(strSQL, dbOpenDynaset)

Application.FollowHyperlink strFileName, , True, False, , , "John Smith" 
```

我已经尝试了 SQL 字符串的所有变体，将外部“”更改为“”不起作用。但是，如果我用“Assessment”字符串或“SmithRT2000001”更改 strTitle，它会找到它。不知道为什么？

这在您放置条件的查询设计窗口中不起作用：像“* & Forms![Search For Reports]![SrchText] & *” 但是一旦我改变它，它就会起作用。快要疯了！！

您能指导我做什么或如何实现在 FILE 表中打开文件的目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:49:56.827

好的，在最后测试了 3 种不同的方法之后，其中一种给出了很好的回应，也是我想要的。我将查询中的“like”命令更改为：
Like " `*`" & [Forms]![Search For Reports]![SrchText] & " `*`"
突然它起作用了。我还发现 SQL Select 查询不适用于 VBA，特别是双击事件。这是最终代码：

Private Sub SearchResults_DblClick(Cancel As Integer) '初始化字符串变量 Dim strTitle As String Dim DocumentNo As String

```
DocumentNo = Me.SearchResults.Column(0)
DocumentNo = Replace(DocumentNo, "/", "")
strTitle = Me.SearchResults.Column(1)
strTitle = Replace(strTitle, "'", "''")
SrchText.Value = DocumentNo

SearchResults.RowSourceType = "Table/Query"
SearchResults.RowSource = "QRY_OpenFile" 
```

结束子

我无法从列表中获取路径和名称，将它们放在一起并启动到 Acrobat 的超链接......我必须做的是通过按钮发送事件以从列表中获取值。由于某种原因，在 SearchResults.RowSource = "QRY_OpenFile" 之后 list.Column(index) 返回 null。

无论如何，感谢您阅读我的问题并思考它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:43:30.620

那段代码真的运行了吗？你有一个纠结的 SQL 字符串：

```
''You need to watch out for quotes in the string, so
strTitle = Replace(strtile, "'", "''")
strSQL = "SELECT Files.FName FROM Files WHERE Files.FName Like '*" _
       & strTitle & "*';" 
```

这条线的要点：

```
Debug.Print (strSQL) 
```

是在查询设计窗口中获取一个 SQL 字符串进行测试。用它。

# java - 专注于不同的 JPanel？（爪哇）

> ID：15696865
> 
> 赞同：0
> 
> 时间：2013-03-29T03:27:51.253
> 
> 标签：java, swing, focus, request, jpanel

快速提问，我有**3 个 JPanel**，一个有一个**keylistener**，它绘制我的游戏图形，你可以通过移动你的角色等来改变它，我还有第二个**JPanel**，它只是一个**JTextArea**，它只显示文本，最后我有另一个**JPanel**，它有一个**JTextArea**和一个**JButton**，文本区域接受输入，您可以按 Enter 键或单击按钮发送将出现在另一个文本框中的文本。但我的问题是，如何在每个面板中请求焦点？我如何通过鼠标点击转移焦点？

我知道如果我不经常调用**requestFocus(true);** 对于第一个显示所有图形的**JPanel**，由于某种原因它无法工作。我相信它是因为它总是在画画，也许它对每一次转身都失去了关注。但是我如何通过鼠标点击等获得焦点转移？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T03:29:03.353

一种可能的解决方案是不使用 KeyListener。取而代之的是使用在焦点方面更加宽容的键绑定。查看 Google 可以帮助您快速找到的 Key Bindings 教程。

如需更具体的帮助，请考虑创建和发布[sscce](http://sscce.org)。

# php - 存储在 Session 数组中的变量成为对象而不是对象数组

> ID：15696869
> 
> 赞同：0
> 
> 时间：2013-03-29T03:28:07.930
> 
> 标签：php

我在 Session 变量中存储了一些数据。我希望 $_SESSION['hero'] 保存一组对象。我在下面使用的语法在我的本地环境和我的一个托管帐户上运行良好。但是，它无法在我正在测试的另一个托管帐户上运行。在新的托管环境上对该脚本的第二次请求时，对象数组就变成了一个对象。

我认为我使用的 PHP 版本可能是问题所在。经过检查，我发现我在本地使用 PHP 5.4.7，在两个托管帐户上使用的是 5.2.17。由于两个托管帐户都使用 PHP 5.2.17，看来 PHP 版本不是问题。

php.ini 文件中是否有一些我不知道的设置可能导致代码无法在一个托管帐户中工作？其他一些服务器设置？我的代码/理解有问题？任何建议表示赞赏。

这是我在每个托管帐户上运行此代码时得到的输出图像。

良好的输出 - [http://imgur.com/Ed8MTkr,zm9WaeV#1](http://imgur.com/Ed8MTkr,zm9WaeV#1)

输出错误 - [http://imgur.com/Ed8MTkr,zm9WaeV#0](http://imgur.com/Ed8MTkr,zm9WaeV#0)

```
<?php
session_start();
error_reporting(E_ALL);
ini_set('display_errors', 1);

$_SESSION['hero'][] = new Stdclass();
$heroIndex = count($_SESSION['hero']) - 1;
echo 'Last position in array: ' . $heroIndex;

echo '<pre>';
print_r($_SESSION['hero']);
echo '</pre>';

$hero = $_SESSION['hero'][$heroIndex]; //Seems to be the trouble line

echo '<pre>';
print_r($_SESSION['hero']);
echo '</pre>';
?> 
```

**编辑已解决**

感谢污垢，它是 register_globals。

我通过在本地环境的 php.ini 文件中将 register_globals 从“Off”设置为“On”来测试它，这重现了我在新托管服务器上遇到的意外行为。

然后我将以下行添加到托管服务器上的 .htaccess 文件中（似乎服务器不会使用我的 php.ini 文件）。

`php_flag register_globals off`

很高兴知道修复，现在开始研究这个以更好地理解为什么它不起作用。=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:37:21.593

也许你应该尝试使用它像一个数组一样

```
$_SESSION['hero']['heroIndex'] = count($_SESSION['hero']) - 1;

$hero = $_SESSION['hero']['heroIndex']; 
```

# php - 下一页有更多信息的图片

> ID：15696871
> 
> 赞同：0
> 
> 时间：2013-03-29T03:28:33.280
> 
> 标签：php, image, html-table

图像存储在我的文件夹中，而不是数据库中。当我单击其中一个图像时，它将引导我在下一页上查看更多信息。这意味着我可以看到更大尺寸的图像。

如何在创建较少的 php 页面的情况下做到这一点？以下是我的代码片段

```
<table>
<tr> 
<th class="timgB"><h4><img src="city/GVcementMixture.jpg" style="vertical-align: text-bottom;" title="Cement Mixture"/> Cement Mixture </a></h4></th>
</tr> 
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:41:23.957

您*可以*使用大的 if/else 或 switch/case 语句将它们全部保存在一个表单/页面中，以评估所选图像并仅显示与所选图像有关的信息，例如完整大小的图像或子图像的子集。但正如@Razor 所说，它最好在 jQuery 中呈现。

```
<form ...>
    <button type=submit name=imgID value=1>
    <button type=submit name=imgID value=2>
    ...

<?php
    if (isset($_POST['imgID'])):
        // Show info related to selected image
        ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T06:03:01.903

你可以这样做。用于`class="small`使图像尺寸变小和`class="big-img"`变大。链接中`?img=img23.jpg`的决定应以大尺寸显示哪个图像。或者，如果您将图像的缩略图用作小尺寸并且仅在有人单击缩略图时才希望显示完整尺寸，则更新上层`div`（class =“big-img”）中的链接或发表评论。

//它将按照您的意愿工作

```
<body>
    <div class = "big-img"> <!-- set class to show big size image-->
        <?php if(isset($_GET['img'])): ?>
            <img src="city/.<?php echo $_GET['img']; ?>" alt="">
        <?php endif; ?> 
    </div>
     <table>
        <tr><!-- set class to show small size image-->
            <td class = "small"><a href="?img=img23.jpg"><img src="city/img23.jpg" alt=""></a></td>
            <td class = "small"><a href="?img=img24.jpg"><img src="city/img24.jpg" alt=""></a></td>
            <td class = "small"><a href="?img=img25.jpg"><img src="city/img25.jpg" alt=""></a></td>
        </tr>
     </table>
</body> 
```

# angularjs - Angularjs 编译步骤是否会增加显示页面的时间？

> ID：15696875
> 
> 赞同：1
> 
> 时间：2013-03-29T03:29:03.590
> 
> 标签：angularjs

我已经阅读了[AngularJS 文档文档页面](http://docs.angularjs.org/guide/compiler)，但我仍然不清楚到底发生了什么。编译器如何运行？我的意思是编译器是一段 Javascript，它在页面加载时触发以运行和检查 DOM。如果是这种情况，那么每次加载页面时是否有很多开销？

我还读到你永远不应该更改控制器内的 DOM。为什么会这样，有人可以给我一个简单的例子来说明我不应该做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:58:30.900

你应该在网站上做一个手机教程的演练。方向很清楚，它将向您展示如何设置您的应用程序以及正确的代码应该在哪里。正如 Arun 所说，DOM 操作应该主要在你的指令中处理。控制器处理逻辑，模板处理数据绑定并结合指令来完成 DOM 操作。当您完成本教程时，您将开始将 Angular 视为一种不同的思维方式。

就编译而言，渲染 index.html 页面，然后加载脚本，然后 Angular 开始根据路由和控制器查找包含视图模板的属性。然后用绑定和观察的变量解析模板，然后显示给用户。当然，有一点延迟，您可以在[http://builtwith.angularjs.org/](http://builtwith.angularjs.org/)上看到。在右上角，您会看到“使用 AngularJS 构建的 75 个巧妙的东西”。如果刷新页面，您会注意到 75 被替换为`?`直到页面加载（不到一秒后）。老实说，除非你的控制器和视图非常复杂，否则渲染时间永远不会很长。个人示例，我正在生成一个包含 12 列数据、144 行长的报告页面，通过多次解析和循环 JSON 对象并运行计算并创建一个新对象，所有这些都在调用模板时在控制器中进行。在数据出现、模板化、格式化并带有适当的回调之前，页面会出现大约四分之一秒的空白。

再次，尝试一下，自己看看。

# python - cron 选项卡（或 celery，以最好的为准） - 注册某些日子的最佳方式

> ID：15696880
> 
> 赞同：1
> 
> 时间：2013-03-29T03:29:25.367
> 
> 标签：python, django, cron, crontab

我想实现一个提醒系统，其中将根据用户配置文件中的某个日期字段向用户发送提醒电子邮件。我该如何实现？许多人建议我不要使用芹菜。告诉我使用 cron 选项卡。

我就是这样做的，这是好方法吗？如果没有，请给我一个好方法。

如果 cron: 计划每天运行一个 python 管理命令，它将通过检查所有用户的日期来检查当天是否有一些提醒。
我认为这不好，我认为，每当用户选择他们的提醒日期时，该日期将被注册一些方式，并且作业将仅在该日期运行，但我不知道如何实现这一点。
我知道的实现方式：
创建一个名为“reminderdates”的数据库表，每当注册提醒时，将该日期和 user_id 添加到该表中。因此，每天运行一个 cron 作业，检查那一天是否在表中的日期中。如果是，将运行作业。此外，我将运行另一个 cron 作业，该作业将从表中删除所有较旧的提醒日期，因此表大小不会随时间增加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:56:05.907

最简单的解决方案是设置一个 cron 作业来访问执行任务的站点上的 URL。不过我会推荐芹菜。这就是原因（来自[Django/Celery Quickstart](http://chase-seibert.github.com/blog/2010/07/09/djangocelery-quickstart-or-how-i-learned-to-stop-using-cron-and-love-celery.html)）：

> > > Cron 具有简单的优点，但它并不适合这项工作。您必须采取措施确保网站的普通用户无法直接点击这些 URL。它还强制您管理外部配置。如果您忘记在 qa 或生产服务器上执行配置怎么办？如果配置在站点的代码中，将会更安全、更容易。

您将在之前的链接中找到有关如何使用 celery 实现任务的教程。

至于您的`reminderdates`餐桌创意，它应该可以工作。如果你试试这个，你可以稍微简化一下：

1.  添加具有已发送状态的列。您的任务将检查日期和发送状态。如果当天与提醒日期匹配且状态为“未发送”，则发送提醒。

2.  您不需要辅助 cron 作业来删除旧提醒。发送提醒的同一任务可以发送每个提醒并在之后将其删除（在这种情况下不需要发送/未发送状态）。

# winforms - 如何在 C++ winforms 中将水印文本添加到我的文本框（例如“在此处输入...”）？(VS2012)

> ID：15696884
> 
> 赞同：3
> 
> 时间：2013-03-29T03:29:44.567
> 
> 标签：winforms, textbox, c++-cli, watermark

我想知道是否有人知道如何在 Visual Studio 2012 中的文本框中添加水印文本（例如“在此处输入......”）。我已经在网上搜索了一个没有流行的解决方案。任何帮助将不胜感激。注意：我是 C++ 的初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:17:56.683

可以，但不需要任何 TextBox 自定义；您可以为此使用事件。我会给你代码，但是**1）** visual studio 再次给我在 c++/cli 中的问题，**2）**它也会让你有点懒惰。

因此，我将向您描述一种可以完成的方式：将前景色指定`TextBox`为灰色（`Color::Gray`例如），将文本指定为“在此处输入...”。然后订阅`TextBox`'`TextChanged`事件，每当文本改变（和不同），你应该先清除“在这里输入...”，然后将颜色更改为`Color::Black`。如果文本为无，则将颜色更改回`Color::Gray`并将文本更改为“在此处键入...”。很简单吧？但是，如果您对实施有疑问，可以通过评论此答案来问我。

# delphi - 为什么 MessageBox 不会阻塞同步线程上的应用程序？

> ID：15696885
> 
> 赞同：9
> 
> 时间：2013-03-29T03:29:46.340
> 
> 标签：delphi, vcl, tthread

据我了解并知道 TThread 类的方法，如果您同步代码，它实际上会在主应用程序线程中执行（就像计时器/按钮单击/等）我一直在玩耍并注意到一个MessageBox 不会阻塞主应用程序，但是 sleep 会按预期进行。这是为什么？

```
type
  TTestThread = class(TThread)
  private
    procedure SynchThread;
  protected
    procedure Execute; override;
  public
    constructor Create(CreateSuspended: Boolean);
  end;

procedure TTestThread.SynchThread;
begin
 MessageBoxA (0, 'Hello', 'Test', 0);
end;

procedure TTestThread.Execute;
begin
 Synchronize (SynchThread)
end;

constructor TTestThread.Create(CreateSuspended: Boolean);
begin
  inherited;
  FreeOnTerminate := True;
end;

procedure StartThread;
var
 TestThread : TTestThread;
begin
 TestThread := TTestThread.Create (FALSE);
end; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T07:31:05.117

这个答案有两个部分。

第 1 部分在[如果 MessageBox()/related 是同步的，为什么我的消息循环不冻结？](https://stackoverflow.com/q/1256963/4997). MessageBox 函数不是阻塞的，它只是创建一个带有自己的消息循环的对话框。

第 2 部分在[MessageBox 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)中进行了解释。

> hWnd：要创建的消息框的所有者窗口的句柄。**如果此参数为 NULL，则消息框没有所有者窗口。**

当您显示模态对话框时，Windows 会禁用它的所有者，但如果您为第一个参数传递 0，则没有所有者并且没有可禁用的内容。因此，您的程序将在显示消息框时继续处理消息（并对它们作出反应）。

要更改此行为，请将表单的句柄作为第一个参数传递。例如：

```
procedure TTestThread.SynchThread;
begin
  MessageBoxA (Form1.Handle, 'Hello', 'Test', 0);
end; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-29T09:00:08.083

我怀疑这个问题归结为你说的意思：

> 消息框不会阻止主应用程序。

我的意思是当你显示消息框时，你的 VCL 表单仍然可以交互。这里的问题与线程无关，我建议我们将它们从等式中删除。你对做什么的理解`Synchronize`是正确的。

该问题完全与[窗口所有者](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#owned_windows)的概念以及模态对话框窗口相对于其所有者的行为方式有关。请注意，所有者不是指 Delphi 属性`TComponent.Owner`，而是指 Windows API 的[owner](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#owned_windows)含义。

创建一个 VCL 应用程序并在表单上放置两个按钮。添加以下`OnClick`处理程序。

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  MessageBox(0, 'Not owned', nil, MB_OK);
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  MessageBox(Handle, 'Owned by the VCL form', nil, MB_OK);
end; 
```

现在观察单击 时会发生什么`Button1`。消息框显示，但您仍然可以单击 VCL 表单。并与 比较`Button2`。当它显示消息框时，无法与 VCL 表单交互。

当显示模式对话框窗口时，对话框窗口将禁用其所有者。在 的情况下`Button2`，所有者是 VCL 表单。一旦表单被禁用，您就无法与之交互。在 的情况下`Button1`，没有所有者，因此模态对话框窗口不会禁用任何其他窗口。这就是为什么可以与 VCL 表单交互的原因。

Raymond Chen 在他的 Old New Thing 博客上有一个关于模态的长系列：

*   [模态，第 1 部分：UI 模态与代码模态](https://devblogs.microsoft.com/oldnewthing/20050218-00/?p=36413)
*   [模态，第 2 部分：代码模态与 UI 模态](https://devblogs.microsoft.com/oldnewthing/20050221-00/?p=36403)
*   [模态，第 3 部分：WM_QUIT 消息](https://devblogs.microsoft.com/oldnewthing/20050222-00/?p=36393)
*   [模态，第 4 部分：为模态 UI 设置正确所有者的重要性](https://devblogs.microsoft.com/oldnewthing/20050223-00/?p=36383)
*   [模态，第 5 部分：为模态 UI 设置正确的所有者](https://devblogs.microsoft.com/oldnewthing/20050224-00/?p=36373)
*   [模态，第 6 部分：与已进入模态的程序交互](https://devblogs.microsoft.com/oldnewthing/20050228-00/?p=36343)
*   [模态，第 7 部分：定时消息框，廉价版](https://devblogs.microsoft.com/oldnewthing/20050301-00/?p=36333)
*   [模态，第 8 部分：定时消息框，更好的版本](https://devblogs.microsoft.com/oldnewthing/20050304-00/?p=36273)
*   [模态，第 9 部分：为模态 UI 设置正确的所有者，实践考试](https://devblogs.microsoft.com/oldnewthing/20110121-00/?p=11703)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-29T07:03:38.283

同步将执行主线程中的代码。
一个很好的解释可以在这里找到[Delphi TThread 类中的同步](http://sergworks.wordpress.com/2010/09/14/synchronization-in-delphi-tthread-class/)

您只需要阻止用户与您的应用程序的表单进行交互，例如。经过

```
procedure TTestThread.SynchThread;
begin
MessageBoxA (0, 'Hello', 'Test', MB_TASKMODAL);      
end; 
```

像您一样使用 MessageBoxA 不会阻止主线程对由用户与您的表单交互触发的事件做出反应，只需尝试

```
procedure TForm4.Button2Click(Sender: TObject);
begin
    MessageBoxA (0, 'Hello', 'Test', 0);
   // vs
   //  MessageBoxA (0, 'Hello', 'Test', MB_TASKMODAL);
end; 
```

[消息框A](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)

同步将在主线程中执行可以显示（恕我直言）

```
type
  TTestThread = class(TThread)
  private
    FSync:Boolean;
    FCalled:TDateTime;
    procedure SynchThread;
  protected
    procedure Execute; override;
  public
    constructor Create(CreateSuspended: Boolean;sync:Boolean);
  end;

procedure TTestThread.SynchThread;
begin
 MessageBox (0,PChar(DateTimeToStr(FCalled)+#13#10+DateTimeToStr(Now)),'Hello' , 0);
end;

procedure TTestThread.Execute;
begin
 sleep(100); // give Caller Time to fell asleep
 if Fsync then Synchronize (SynchThread) else SynchThread;
end;

constructor TTestThread.Create(CreateSuspended: Boolean;sync:Boolean);
begin
  inherited Create(CreateSuspended);
  FSync := Sync;
  FCalled :=Now;
  FreeOnTerminate := True;
end;

procedure StartThread(sync:Boolean);
var
 TestThread : TTestThread;
begin
 TestThread := TTestThread.Create (FALSE,sync);
end;

procedure TForm4.RunUnsynchronizedClick(Sender: TObject);
begin
   StartThread(false);// no sync
   Sleep(5000);       // Stop messageloop
end;

procedure TForm4.RunSynchronizedClick(Sender: TObject);
begin
   StartThread(true); // sync
   Sleep(5000);       // Stop messageloop
end; 
```

# ios - 如何使用子视图自定义底部标签栏对 UINavigationController 进行子类化

> ID：15696887
> 
> 赞同：0
> 
> 时间：2013-03-29T03:30:00.973
> 
> 标签：ios, ios6, uinavigationcontroller, uitabbarcontroller

所以我有一个自定义底部标签栏，如果我将它作为子视图添加到我的任何视图中，它就可以工作，但我希望它成为 UINavigationController 的一部分，所以我不需要在每个视图初始化中跟踪它. 有没有办法做到这一点？

我无法将它添加为 navigationBar 的子视图，因为我认为它超出了框架并且触摸没有在标签栏上注册。

我不能继承 navigationController 因为苹果不允许你。那么我如何让这个工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:18:01.973

Apple 不允许你继承 UINavigationController 是不正确的。从 iOS 6 开始，它是允许的，但是，我认为这对您没有帮助。我认为最好的方法是使用自定义容器控制器。如果您从 IB 中的 UIViewController 开始，您可以将自定义选项卡栏放在底部（或者只为它留出空间并将其添加到代码中），然后添加一个填充其余空间的容器视图。您可以删除使用该容器视图获得的默认控制器，并将其替换为导航控制器。当您浏览内容控制器时，您的标签栏将保持在原位。

# paypal - 成功返回后PayPal获取参数

> ID：15696889
> 
> 赞同：1
> 
> 时间：2013-03-29T03:30:16.313
> 
> 标签：paypal, return, params

我目前正在将 PayPal 实现为文章订阅的表单，下面的代码可以正常运行以直接到 paypal 网页屏幕并处理交易。

如果我想在交易成功后取回某些参数怎么办？我尝试了 echo `$_REQUEST['custom']`,并在从 paypal 重定向回返回的 url 后，但只是`$_REQUEST['email']`显示，我怎样才能将这些参数取回以进行进一步的处理？`$_REQUEST['a3']``$_REQUEST['p3']``$_REQUEST['custom']`

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_xclick-subscriptions">
    <input type="hidden" name="business" value="someone_1360103868_biz@sitename.com">
    <input type="hidden" name="email" value="<?php echo $BuyerEmail ?>">
    <input type="hidden" name="item_name" value="<?php echo $ProdDesc ?>">
    <input type="hidden" name="item_number" value="1">
    <input type="hidden" name="no_shipping" value="1">
    <input type="hidden" name="rm" value="2">
    <input type="hidden" name="return" value="http://sitename.com/return.php?msg=Transaction+Complete">
    <input type="hidden" name="cancel_return" value="http://sitename.com/return.php?msg=Transaction+Canceled">
    <input type="hidden" name="notify_url" value="http://sitename.com/notify.php">
    <input type="hidden" name="no_note" value="1">
    <input type="hidden" name="currency_code" value="<?php echo $Currency ?>">
    <input type="hidden" name="lc" value="US">
    <input type="hidden" name="custom" value="<?php echo $RefNo ?>">
    <input type="hidden" name="a3" value="<?php echo $Amount ?>">
    <input type="hidden" name="p3" value="<?php echo $Duration ?>">
    <input type="hidden" name="t3" value="M">
    <input type="hidden" name="src" value="1">
    <input type="hidden" name="sra" value="1">
    <input type="submit" name="Submit" value="Pay now">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-25T12:43:26.523

我发现的一种方法：

尝试将此字段插入到您生成的表单代码中：

```
<input type='hidden' name='rm' value='2'> 
```

**rm**表示***返回方法***；

**2**表示***（帖子）***

比在用户购买并返回您的网站 url 之后，该 url 也会获取 POST 参数

ps 如果使用 php，请尝试插入`var_dumy($_POST);`您的返回 url（脚本），然后进行测试购买，当您返回您的站点时，您将看到您的 url 上有哪些变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:46:02.933

如果您在退出时记录它们，则无需尝试取回信息，即：在提交到 Paypal 之前。例如，记录所有尝试是个好主意，这样您就可以跟进失败的交易，即：用户有卡问题、代码中的错误等。

如果您使用的是“好”的购物车，这将被包括在内。所以当有人完成并提交订单时，您的购物车会添加记录并生成新的订单号（ID 号）。然后，提交给 Paypal 的表单可以包含该 ID 号，因此您在成功交易后只需要检索该 ID 号，然后您可以以编程方式将订单更新为已付款，并在线提供从您的数据库表中填充的可打印收据.

为此，您需要做的就是检索**Request("item_number")**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:50:32.083

您希望如何将信息返回到您的站点。您是否希望它返回到您网站上的退货页面以便您可以将其显示给您的买家，或者您只是希望它返回到您的系统以更新数据库。如果您希望 mbuyer 在返回页面上看到这一点，您可能希望使用使用变量“rm”的返回方法并在按钮代码中传递返回 URL。您可以为此方法使用 POST，或者您可以使用 PDT，这将是一个 GET 方法。PDT 还允许您根据 PayPal 验证数据。然后是IPN，不会向买家展示。这将用于更新您的数据库。请参阅我在[此处](https://stackoverflow.com/questions/15651499/buy-now-button-return-url-update-field-in-database/15658981#15658981)发布的帖子，因为这可能包含更多有用的信息。

# c - 如何在终端文件中输入我的 C 程序以使其按顺序显示？

> ID：15696899
> 
> 赞同：2
> 
> 时间：2013-03-29T03:31:44.197
> 
> 标签：c, command-line, terminal

我创建了一个程序，可以在屏幕上顺序显示命令行中列出的所有文件的内容。

但是，当我在终端中运行它时，我实际上无法让它打开我尝试“喂”它的任何文件。

有谁知道我怎样才能让它工作？

这是我在 Mac 上的终端中输入的示例：

`"John_Smith-MacBook:Desktop smith_j$ "/Users/smith_j/Desktop/Question 3-28-13 5.10 PM/usr/local/bin/Question" helloworld.txt`

`Could not open file helloworld.txt for input"`

这是我第一次使用终端，如果答案很简单，请原谅我。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    int byte;
    FILE * source;
    int filect;

    if (argc == 1)
    {
        printf("Usage: %s filename[s]\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    for (filect = 1; filect < argc; filect++)
    {
        if ((source = fopen(argv[filect], "r")) == NULL)
        {
            printf("Could not open file %s for input\n", argv[filect]);
            continue;
        }
        while ((byte = getc(source)) != EOF)
        {
            putchar(byte);
        }
        if (fclose(source) != 0)
            printf("Could not close file %s\n", argv[1]);
    }    
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:36:23.733

查看`errno`[probably with `perror()`] 的值，您就知道它为什么无法打开。

简单的例子：

```
perror("fopen failed:");
printf("errno = %d.\n", errno); 
```

它将在文本版本的 errno 条件（提供的库）前加上“fopen Failed:”，然后给出特定的 errno 值。

上面的命令行文本看起来很可疑，请检查它是否正确。更好的是，尝试使用更简单的命令行调用您的程序，例如，当前目录中的一个文件包含您的二进制文件。

将二进制程序和数据文件放在同一目录中，而不是所有长路径名。然后，从那个位置做`./myprog filename.txt`

这将减少错字干扰执行的机会。

# c++ - C++：为什么我会收到链接器错误？

> ID：15696901
> 
> 赞同：0
> 
> 时间：2013-03-29T03:31:50.777
> 
> 标签：c++, .net, linker, lnk

请注意，我正在使用带有 .NET 的 Windows 窗体应用程序

这是我的代码：

```
#pragma once
#include <cstdlib>
#include <Windows.h>
#include <string.h>
#include <stdlib.h>
#include <algorithm>
#include <stdio.h>
#include <string>
#include <cstring>
#include <iostream>
#include <vcclr.h>
#include <hashlibpp.h>

namespace Launcher {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;
    using namespace System::Diagnostics;
    using namespace MySql::Data::MySqlClient;
    using namespace std;
    using namespace System::Runtime::InteropServices;

    /// <summary>
    /// Summary for Form1
    /// </summary>
    public ref class Form1 : public System::Windows::Forms::Form
    {
    public:
        Form1(void)
        {
            InitializeComponent();

            //
            //TODO: Add the constructor code here
            //
        }

    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~Form1()
        {
            if (components)
            {
                delete components;
            }
        }

    //Component properties (not important)

        }
#pragma endregion

void convert(String^ total1, char    *ch){ //Converts string to const char*
    // Pin memory so GC can't move it while native function is called
   pin_ptr<const wchar_t> c1 = PtrToStringChars(total1);
   printf_s("%S\n", c1);

   // Conversion to char* :
   // Can just convert wchar_t* to char* using one of the 
   // conversion functions such as: 
   // WideCharToMultiByte()
   // wcstombs_s()
   // ... etc
   size_t convertedChars = 0;
   size_t  sizeInBytes = ((total1->Length + 1) * 2);
   errno_t err = 0;
   ch = (char *)malloc(sizeInBytes);

   err = wcstombs_s(&convertedChars, 
                    ch, sizeInBytes,
                    c1, sizeInBytes);
   if (err != 0)
      printf_s("wcstombs_s  failed!\n");

    printf_s("%s\n", ch);
}

void MarshalString ( String ^ s, string& os ) { //Another converter 
   using namespace Runtime::InteropServices;
   const char* chars = 
      (const char*)(Marshal::StringToHGlobalAnsi(s)).ToPointer();
   os = chars;
   Marshal::FreeHGlobal(IntPtr((void*)chars));
}

void MarshalString ( String ^ s, wstring& os ) { //Another converter
   using namespace Runtime::InteropServices;
   const wchar_t* chars = 
      (const wchar_t*)(Marshal::StringToHGlobalUni(s)).ToPointer();
   os = chars;
   Marshal::FreeHGlobal(IntPtr((void*)chars));
}

    private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {
             }
             //I removed some other functions from here because they are blank
    private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
                    //MySQL variables
                 try{
                     conDataBase->Open();
                     myReader=cmdDataBase->ExecuteReader();
                     while(myReader->Read()){
                     String^ atmp_user = textBox1->Text;
                     String^ user = (myReader->GetString(1));//Gets Usernames from database
                     String^ atmp_pass = textBox2->Text;
                     String^ pass = (myReader->GetString(2));//Gets Passwords from database
                     atmp_pass->ToLower();//Lower Case's variable
                     atmp_user->ToLower();
                     String^ total1 = gcnew String(atmp_user+atmp_pass);//Combines 2 strings

                     string totala;//std::string

                     MarshalString(total1, totala);//Copies data from (total1) to (totala)

                     hashwrapper *myWrapper = new sha1wrapper();//SHA1 hashing begins

                     string hash1 = myWrapper->getHashFromString(totala);//creates new variable(hash1) and copies data from (totala)

                     String^ finalpass;//Creates new System::String
                     MarshalString(finalpass, hash1);//Copies data from (hash1) to (finalpass)
 delete myWrapper;//Ends SHA1 hashing
                                //Login Script
                     if(atmp_user == user && finalpass == pass){
                         textBox1->Text = ("It worked!");
                     }
                     }
                 } catch(Exception^ex) {
                     MessageBox::Show(ex->Message);
                 }
         }
    //Other blank functions created
};
} 
```

以下是错误：

```
Error   4   error LNK2028: unresolved token (0A0000D5) "public: __clrcall md5wrapper::md5wrapper(void)" (??0md5wrapper@@$$FQAM@XZ) referenced in function "public: class hashwrapper * __clrcall wrapperfactory::create(enum HL_Wrappertype)" (?create@wrapperfactory@@$$FQAMPAVhashwrapper@@W4HL_Wrappertype@@@Z)  C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Launcher\hl_wrapperfactory.obj
Error   3   error LNK2028: unresolved token (0A00009D) "public: __clrcall sha384wrapper::sha384wrapper(void)" (??0sha384wrapper@@$$FQAM@XZ) referenced in function "public: class hashwrapper * __clrcall wrapperfactory::create(enum HL_Wrappertype)" (?create@wrapperfactory@@$$FQAMPAVhashwrapper@@W4HL_Wrappertype@@@Z) C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Launcher\hl_wrapperfactory.obj
Error   2   error LNK2028: unresolved token (0A000094) "public: __clrcall sha512wrapper::sha512wrapper(void)" (??0sha512wrapper@@$$FQAM@XZ) referenced in function "public: class hashwrapper * __clrcall wrapperfactory::create(enum HL_Wrappertype)" (?create@wrapperfactory@@$$FQAMPAVhashwrapper@@W4HL_Wrappertype@@@Z) C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Launcher\hl_wrapperfactory.obj
Error   1   error LNK2028: unresolved token (0A00005B) "public: __clrcall sha256wrapper::sha256wrapper(void)" (??0sha256wrapper@@$$FQAM@XZ) referenced in function "public: class hashwrapper * __clrcall wrapperfactory::create(enum HL_Wrappertype)" (?create@wrapperfactory@@$$FQAMPAVhashwrapper@@W4HL_Wrappertype@@@Z) C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Launcher\hl_wrapperfactory.obj
Error   5   error LNK2019: unresolved external symbol "public: __clrcall sha512wrapper::sha512wrapper(void)" (??0sha512wrapper@@$$FQAM@XZ) referenced in function "public: class hashwrapper * __clrcall wrapperfactory::create(enum HL_Wrappertype)" (?create@wrapperfactory@@$$FQAMPAVhashwrapper@@W4HL_Wrappertype@@@Z)  C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Launcher\hl_wrapperfactory.obj
Error   6   error LNK2019: unresolved external symbol "public: __clrcall sha384wrapper::sha384wrapper(void)" (??0sha384wrapper@@$$FQAM@XZ) referenced in function "public: class hashwrapper * __clrcall wrapperfactory::create(enum HL_Wrappertype)" (?create@wrapperfactory@@$$FQAMPAVhashwrapper@@W4HL_Wrappertype@@@Z)  C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Launcher\hl_wrapperfactory.obj
Error   7   error LNK2019: unresolved external symbol "public: __clrcall sha256wrapper::sha256wrapper(void)" (??0sha256wrapper@@$$FQAM@XZ) referenced in function "public: class hashwrapper * __clrcall wrapperfactory::create(enum HL_Wrappertype)" (?create@wrapperfactory@@$$FQAMPAVhashwrapper@@W4HL_Wrappertype@@@Z)  C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Launcher\hl_wrapperfactory.obj
Error   8   error LNK2019: unresolved external symbol "public: __clrcall md5wrapper::md5wrapper(void)" (??0md5wrapper@@$$FQAM@XZ) referenced in function "public: class hashwrapper * __clrcall wrapperfactory::create(enum HL_Wrappertype)" (?create@wrapperfactory@@$$FQAMPAVhashwrapper@@W4HL_Wrappertype@@@Z)   C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Launcher\hl_wrapperfactory.obj
Error   9   error LNK1120: 8 unresolved externals   C:\Users\Jeremy\Documents\Visual Studio 2010\Projects\Launcher\Debug\Launcher.exe   1 
```

我不明白这些，所以我希望你们能。顺便说一句，我在这个项目中使用 hashlib++ 库进行 SHA1 散列。我假设这就是为什么有这么多引用它的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:34:15.543

您需要链接库本身。在 Visual Studio 中，转到项目首选项、链接器选项，然后选择您正在使用的实际库。 [在这里](http://www.steptools.com/support/stdev_docs/help/settings_vc10.html)，您可以找到一个示例，其中包含有关如何完成此操作的屏幕截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T05:10:30.177

这是我遇到的一个奇怪的错误。出于某种原因，VC++ 将这些方法视为具有 __clrcall 调用约定，即使它们属于非托管类。我不确定是什么触发了它，大多数时候它不会发生。

如果所有其他方法都失败了，请尝试使用 __thiscall 调用约定（这是非托管方法的默认设置）显式标记非托管类的方法（包括构造函数和析构函数）：

```
class md5wrapper
{
public:
    __thiscall md5wrapper();
    __thiscall ~md5wrapper();

    void __thiscall SomeMethod();

    ... 
```

# java - 如何有效地引用其他类的对象

> ID：15696902
> 
> 赞同：2
> 
> 时间：2013-03-29T03:31:50.887
> 
> 标签：java, swing

我有主类、GUI 类和 CheckingAccount 类。我应该在其中制作一个带有单选按钮的 Jframe 来处理 CheckingAccount 对象，并且不应该有主逻辑！所以我想我可以在 main 中创建一个 CheckingAccount 对象并获得对它的某种引用，可能是通过一个方法或构造函数参数，并在 GUI 类中使用它（与动作侦听器一起使用，以及类似的东西。）问题是，例如在 GUI 类中，在 actionPerformed 方法中我不能像 user.setBlahBlah...//user 是主要的 CheckingAccount 对象。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:34:13.577

`setCheckingAccount(CheckingAccount checkingAccount)`为您的 GUI 类提供一个 CheckingAccount 变量，该变量在方法中或通过构造函数参数给出引用。然后，您可以引用 GUI 内的对象（或者更好的是，如果您有 Control 类）。

```
public class MyGui {
  private CheckingAccount checkingAccount;
  private JButton myButton = new new JButton("My Button");

  public MyGui() {
    myButton.addActionListener(new ActionListener(){
      public void actionPerformed(ActionEvent evt) {
        if (checkingAccount == null) {
          return;
        }
        checkingAccount.someMethod();
      }
    });
  }

  public void setCheckingAccount(CheckingAccount checkingAccount) {
    this.checkingAccount = checkingAccount;
  }

} 
```

包含类的主要方法：

```
public Main {
  public static void main(String[] args) {
    CheckingAccount checkingAccount = new CheckingAccount();
    MyGui myGui = new MyGui();
    myGui.setCheckingAccount(checkingAccount);
    myGui.displaySomehow();
  }
} 
```

# maven - jira开发环境的maven中的Https Repository配置

> ID：15696904
> 
> 赞同：0
> 
> 时间：2013-03-29T03:32:02.477
> 
> 标签：maven, https, maven-2, jira

谁能告诉我如何配置 Maven 以从 https 存储库下载 jar（例如：[https](https://m2proxy.atlassian.com/repository/public/) ://m2proxy.atlassian.com/repository/public/ ）。我们可以从 http 存储库下载 jar，但不能从 https 存储库下载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:45:44.880

我在一分钟前测试过，效果很好

1）在您的 pom.xml 中添加以下存储库

```
<repositories>
   <repository>
      <id>https-atlassian</id>
      <url>https://m2proxy.atlassian.com/repository/public/</url>
   </repository>
</repositories> 
```

2）添加依赖。我已经添加了

```
<dependency>
   <groupId>andromda</groupId>
   <artifactId>andromda-java</artifactId>
   <version>2.1.5</version>
</dependency> 
```

3）在maven安装期间下载没有问题

```
Downloading: https://m2proxy.atlassian.com/repository/public/andromda/andromda-j
ava/2.1.5/andromda-java-2.1.5.pom
Downloaded: https://m2proxy.atlassian.com/repository/public/andromda/andromda-ja
va/2.1.5/andromda-java-2.1.5.pom (155 B at 0.0 KB/sec)
Downloading: https://m2proxy.atlassian.com/repository/public/andromda/andromda-j
ava/2.1.5/andromda-java-2.1.5.jar
Downloaded: https://m2proxy.atlassian.com/repository/public/andromda/andromda-ja
va/2.1.5/andromda-java-2.1.5.jar (2 KB at 3.0 KB/sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T06:41:55.207

问题得到了解决！！..我使用了一个替代的“HTTP”存储库，它是：[http](http://repository.atlassian.com/maven2/) : //repository.atlassian.com/maven2/，并在 settings.xml 中将它称为“repository”和“pluginRepository”。

感谢您的所有回复

# ruby-on-rails - 使用 Nokogiri/Mechanize 存储和迭代链接数组

> ID：15696905
> 
> 赞同：3
> 
> 时间：2013-03-29T03:32:03.487
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nokogiri, mechanize

我正在尝试将链接列表存储到数组中，然后遍历它们。

我有这个 rake 任务：[https ://gist.github.com/farooqyousuf/5268460](https://gist.github.com/farooqyousuf/5268460)

目前，rake 任务通过一个页面并获取我需要的*一些*链接，但它并没有获取*所有*链接。

问题是第 17 行。

我需要它来做，`page2.search('.subtitleLink a').each`但我不能`.each`在最后加上这个：`.map{|a| page2.uri.merge a[:href]}.each do |uri|`。它给出了一个错误。

所以我想我需要存储`page2.search('.subtitleLink a').each`到一个数组中，然后在每次迭代（`.map{|a| page2.uri.merge a[:href]}.each do |uri|`）上执行此代码对其进行迭代，但我的尝试并没有成功。

**选项1：**

我试过这个：

```
page2.search('.subtitleLink a').each do |x|      
  x.map{|a| page2.uri.merge a[:href]}.each do |uri|
    page4 = agent.get uri
  end 
```

但我得到这个错误：

```
rake aborted!
can't convert Symbol into Integer
/Users/farooqyousuf/Projects/HalalSpot/lib/tasks/something.rake:19:in `[]' 
```

**选项 2：**

```
 page2.search('.subtitleLink a').each do |x|

                    blah = URI.parse(URI.encode(x.to_s.strip))
                    page4 = agent.get blah

               end 
```

结果是：

```
rake aborted!
bad URI(is not URI?): %3Ca%20href=%22http://www.salatomatic.com/d/Hartford+3115+Muhammad-Islamic-Center-%22%3E%3Cb%3EMuhammad%20Islamic%20Center%20%3C/b%3E%3C/a%3E 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:39:13.697

```
puts "Enter the page url from which you wish to import data: "
page = STDIN.gets
page2 = Nokogiri::HTML(open(page))

links = page2.css('.subtitleLink a')

links.each do |link| 
 puts link['href']
 url = link['href'].strip

 page4 = agent.get url

 #do stuff

end 
```

# objective-c - 将 NSPasteboardItem 与粘贴板分离

> ID：15696907
> 
> 赞同：3
> 
> 时间：2013-03-29T03:32:13.570
> 
> 标签：objective-c, macos, cocoa, exception, nspasteboard

我想在高层次上做的是使用此代码存储粘贴板上的当前数据（任何类型的数据），我认为这是正确的：

```
- (NSArray *)readFromPasteBoard
{
    NSMutableArray *pasteboardItems = [NSMutableArray array];
    for (NSPasteboardItem *item in [pasteboard pasteboardItems]) {
        //Create new data holder
        NSPasteboardItem *dataHolder = [[NSPasteboardItem alloc] init];
        //For each type in the pasteboard's items
        for (NSString *type in [item types]) {
            //Get each type's data and add it to the new dataholder
            NSData *data = [[item dataForType:type] mutableCopy];
            if (data) {
                [dataHolder setData:data forType:type];
            }
        }
        [pasteboardItems addObject:dataHolder];
    }
    return pasteboardItems;
} 
```

然后我存储`pasteboardItems`以备后用。我的问题是，当我尝试将相同的数据写入粘贴板时：

```
- (void)writeToPasteBoard:(NSArray *)objectsToWrite
{
    [pasteboard clearContents];
    [pasteboard writeObjects:objectsToWrite];
} 
```

我正在做的是用`NSPasteboardItem`我之前制作的数组传入一个数组。然后我得到这个错误：

```
Cannot write pasteboard item <NSPasteboardItem: 0x101a11540>.  It is already associated   
with another pasteboard. 
```

我有点困惑，因为`NSPasteboardItem`我试图写入粘贴板的内容与任何粘贴板都没有关联，因为我自己实例化了它并且从未从粘贴板中检索过它。感谢您的帮助，如果您需要更多详细信息，请告诉我。

# nginx - 将nginx主机和proxypass重写为squid

> ID：15696908
> 
> 赞同：5
> 
> 时间：2013-03-29T03:32:20.693
> 
> 标签：nginx, rewrite, squid, proxypass

我想实现以下目标：

请求主机：

[http://example.com.proxy.myserver.com](http://example.com.proxy.myserver.com)

应该改写为

[http://example.com](http://example.com)

并通过 nginx proxypass 传递给 squid 服务器。

```
server {
  listen 80;
  server_name ~^(?<subdub>.*)\.proxy\.myserver\.com$;
  location / {
    rewrite ^ $scheme://$subdub break;
    proxy_set_header  X-Real-IP $remote_addr;
    proxy_set_header  Host $scheme://$subdub;
    proxy_set_header  Request-URI $scheme://$subdub;
    proxy_pass http://localhost:3128;
    proxy_redirect off;
  }
} 
```

问题是，nginx 立即将此请求重定向到[http://example.com](http://example.com)

任何想法如何让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:03:15.843

301 重定向正是 nginx 对该重写规则所做的：因为您将 $scheme://$subdub 放在替换部分，nginx 将执行 301，忽略那个“break”标志。

> 如果替换字符串以 http:// 开头，则客户端将被重定向，并且任何进一步的重写指令都将终止。

您是要“重写”还是“重定向”？如果只是为了重写，您可以删除该重写指令：

```
 rewrite ^ $scheme://$subdub break; 
```

它会起作用，因为您的上游服务器可以依靠 HOST 标头来确定流量目标（虚拟主机）。

**此外**，您发送到上游服务器的主机标头也是错误的。它应该是

```
 proxy_set_header  Host $subdub; 
```

$scheme 不应放在 Host 标头中。

# c# - 使用 Reactive Extensions 在 Logic Gate Simulator 中创建稳定的反馈回路？

> ID：15696909
> 
> 赞同：2
> 
> 时间：2013-03-29T03:32:23.570
> 
> 标签：c#, recursion, system.reactive

我创建了一个非常简单的逻辑门模拟器，它可以在输入端采用 IEnumerable 馈送，并流经一系列门，在输出端准确地产生高/低位。

这个想法是将概念扩展到多门网络，将存储在内存数据库中的数组中的值馈送到网络的输入，并在逻辑门网络中复制场景评估规则集。假设是，Rx 允许的流式操作应该提供一种机制来及时评估 400,000 个场景，从而避免搜索和数组迭代。大多数输入只是前馈，但也有一些需要与网络的输出一起工作，因为下一个场景的决策依赖于前一个场景的输出。

一切正常，直到我尝试在网络中创建一个反馈循环，尝试将网络的输出流用作门的输入流，门的输出是网络输出分辨率的一部分。

我想知道如何获取输出流并以这种方式使用它。我确实看过[“Recursive / fan-out in Reactive Extensions”](https://stackoverflow.com/questions/15297977/recursive-fan-out-in-reactive-extensions)，感觉它可能会有所帮助，但我对 Rx 很陌生，并没有完全理解它。

这是我到目前为止的代码..非常简单，有点混乱（道歉）并且目前已损坏（尽管如果反馈尝试被删除并替换为前馈尝试，则将起作用）。

```
 class Program
        {
            private static AndGate _andGate;
            private static XorGate _xorGate;

            static void Main(string[] args)
            {
                var data = new List<decimal>();
                var data2 = new List<decimal>();

                var output = new List<Tuple<Bit, Bit, Bit>>();

                var rnd = new Random();

                //for (var i = 0; i < 10000; i++)
                //{
                //    data.Add(rnd.Next(0, 100));
                //    data2.Add(rnd.Next(0, 100));
                //}
                data.Add(10);
                data.Add(30);
                data.Add(80);
                data.Add(5);
                data.Add(34);
                data.Add(27); 

                data2.Add(10);
                data2.Add(5);
                data2.Add(10);
                data2.Add(34);
                data2.Add(67);
                data2.Add(80);

                var stream = data.ToObservable();
                var stream2 = data2.ToObservable();

                var filter = new DataFilter(stream, a => a > 27);
                var filter2 = new DataFilter(stream2, a => a < 12);

                _andGate = new AndGate {InputA = filter.OutputStream};

                _andGate.InputB = new XorGate(filter2.OutputStream, _andGate.Output.Publish()).Output;

                _andGate.SetOutput();

                //filter.OutputStream.Subscribe(x => Console.WriteLine(x));
                //filter2.OutputStream.Subscribe(x => Console.WriteLine(x));
                _andGate.Output.Subscribe(x=>Console.WriteLine(x));

                //var zippedSequence =
                //    Observable.When(
                //        filter.OutputStream.And(filter2.OutputStream)
                //              .Then((first, second) => new [] { first, second }));

                //zippedSequence.Subscribe(x=>Console.WriteLine("{0}, {1}", x[0], x[1]));

                Console.ReadLine();
            }

        }

        public class DataFilter
        {
            protected IObservable<Bit> ValueStream;

            public IObservable<Bit> OutputStream
            {
                get { return ValueStream; }
            }

            public DataFilter(IObservable<decimal> stream, Func<decimal, bool> operation )
            {
                ValueStream = stream.Select(a => operation(a)? Bit.High : Bit.Low);
            }

        }

        public class AndGate
        {
            protected IObservable<Bit> StreamA; 
            protected IObservable<Bit> StreamB;
            protected IObservable<Bit> OutputStream;

            public IObservable<Bit> InputA { get { return StreamA; } set { StreamA = value; } }
            public IObservable<Bit> InputB { get { return StreamB; } set { StreamB = value; } }

            public IObservable<Bit> Output
            {
                get { return OutputStream; }
            }

            public AndGate()
            {
                OutputStream = Observable.When(StreamA.And(StreamB).Then(Determine));
            }

            public AndGate(IObservable<Bit> streamA, IObservable<Bit> streamB)
            {
                OutputStream = Observable.When(streamA.And(streamB).Then(Determine));
            }

            private Bit Determine(Bit bitA, Bit bitB)
            {
                return bitA == Bit.High && bitB == Bit.High ? Bit.High : Bit.Low;
            }
        }

        public class OrGate
        {
            protected IObservable<Bit> InputStreamA;
            protected IObservable<Bit> InputStreamB;
            protected IObservable<Bit> OutputStream;

            public IObservable<Bit> Output
            {
                get { return OutputStream; }
            }

            public OrGate()
            {

            }

            public OrGate(IObservable<Bit> streamA, IObservable<Bit> streamB)
            {
                OutputStream = Observable.When(streamA.And(streamB).Then(Determine));
            }

            private Bit Determine(Bit bitA, Bit bitB)
            {
                return bitA == Bit.High || bitB == Bit.High ? Bit.High : Bit.Low;
            }
        }

        public class XorGate
        {
            protected IObservable<Bit> StreamA;
            protected IObservable<Bit> StreamB;
            protected IObservable<Bit> OutputStream;

            public IObservable<Bit> Output
            {
                get { return OutputStream; }
            }

            public XorGate(IObservable<Bit> streamA, IObservable<Bit> streamB)
            {
                OutputStream = Observable.When(streamA.And(streamB).Then(Determine));
            }

            private Bit Determine(Bit bitA, Bit bitB)
            {
                return bitA == Bit.High ^ bitB == Bit.High ? Bit.High : Bit.Low;
            }
        }

        public enum Bit { Low = 0, High = 1} 
```

编辑：我添加了这个图表以帮助理解。红线是引起问题的线。;-)

![简单的逻辑图](../Images/6d397f94483b828ec497cb0e73e958a3.png)

另一个编辑：我继续解决这个小问题，发现 Rx 的 Generate 和 Publish/Connect 元素使这个问题得以解决。通过发布门网络的输出，可以检查输出并根据输出值设置网络元素的变化。Generate 方法允许我设置一个带有两个内部比特流的异或门，1 个高和 1 个低（最初），这种排列的输出为高。异或门有一个状态位，可以使用发布的输出流从门外设置。此方法锁存异或门高或低的输出。

```
 class Program
        {
            private static AndGate _andGate1;
            private static AndGate _andGate2;
            private static XorGate _xorGate;

            static void Main(string[] args)
            {
                var data = new List<decimal>();
                var data2 = new List<decimal>();

                var output = new List<Tuple<Bit, Bit, Bit>>();

                var rnd = new Random();

                //for (var i = 0; i < 10000; i++)
                //{
                //    data.Add(rnd.Next(0, 100));
                //    data2.Add(rnd.Next(0, 100));
                //}

                data.Add(10);
                data.Add(23);
                data.Add(80);
                data.Add(5);
                data.Add(34);
                data.Add(27); 

                data2.Add(10);
                data2.Add(5);
                data2.Add(10);
                data2.Add(34);
                data2.Add(67);
                data2.Add(80);

                //Raw Data streams
                var stream = data.ToObservable();
                var stream2 = data2.ToObservable();

                //Converted to Bit streams
                var filter = new DataFilter(stream, a => a > 27);
                var filter2 = new DataFilter(stream2, a => a < 12);

                //Gate network
                _xorGate = new XorGate();
                _andGate1 = new AndGate(filter.OutputStream, _xorGate.Output);
                _andGate2 = new AndGate(_andGate1.Output, filter2.OutputStream );

                //Publish and Connect to the outcome of the network
                var observable = _andGate2.Output.SubscribeOn(NewThreadScheduler.Default).Publish();
                observable.Connect();

                //Subscribe to the outcome to allow changes to be made to the XorGate
                observable.Subscribe(x => { if (x == Bit.High) { _xorGate.SetStatusBitHigh(x); } });

                //View the results
                observable.Subscribe(x => Console.WriteLine(x));

                Console.ReadLine();
            }

        }

        public class DataFilter
        {
            protected IObservable<Bit> ValueStream;

            public IObservable<Bit> OutputStream
            {
                get { return ValueStream; }
            }

            public DataFilter(IObservable<decimal> stream, Func<decimal, bool> operation )
            {
                ValueStream = stream.Select(a => operation(a)? Bit.High : Bit.Low);
            }

        }

        public class AndGate
        {
            protected IObservable<Bit> OutputStream;

            public IObservable<Bit> Output
            {
                get { return OutputStream; }
            }

            public AndGate(IObservable<Bit> streamA, IObservable<Bit> streamB)
            {
                OutputStream = Observable.When(streamA.And(streamB).Then(Determine));
            }

            private Bit Determine(Bit bitA, Bit bitB)
            {
                return bitA == Bit.High && bitB == Bit.High ? Bit.High : Bit.Low;
            }
        }

        /// <summary>
        /// This is really a bastardized XorGate as I force two Bit streams into the inputs
        /// Keep one High, start the other Low and then send it High when a high signal results from the output of the network
        /// This allows me to force the network output low i.e. take no action...
        /// ...until the Bit is sent low again by another network (no done yet)
        /// </summary>
        public class XorGate
        {
            protected IObservable<Bit> StreamA;
            protected IObservable<Bit> StreamB;
            protected IObservable<Bit> OutputStream;

            protected Bit StatusBit;

            public void SetStatusBitHigh(Bit input)
            {
                //No action if circumstances are as you want them
                if (input == StatusBit) return;

                //Belt and Braces check here
                if (StatusBit == Bit.Low && input == Bit.High)
                {
                    StatusBit = Bit.High;
                }

            }

            public void SetStatusBitLow(Bit input)
            {
                //No action if circumstances are as you want them
                if (input == StatusBit) return;

                //Belt and Braces check here
                if (StatusBit == Bit.High && input == Bit.Low)
                {
                    StatusBit = Bit.Low;
                }
            }

            /// <summary>
            /// Output the stream safely
            /// </summary>
            public IObservable<Bit> Output
            {
                get { return OutputStream; }
            }

            public XorGate()
            {
                //Set the StatusBit to Low initially
                StatusBit = Bit.Low;

                //Create a permanent high stream for one of the (imaginary) gate pins
                var streamA = Observable.Generate(Bit.High, bit => true, bit => bit, bit => bit);

                //Create a low stream for the other (imaginary) pin
                //One which sets itself to the value of the StatusBit so that a StatusBit = Bit.High will produce a High stream
                var streamB = Observable.Generate(Bit.Low, bit => true, bit => StatusBit, bit => bit);

                //Produce the output
                OutputStream = Observable.When(streamA.And(streamB).Then(Determine));
            }

            private Bit Determine(Bit bitA, Bit bitB)
            {
                return bitA == Bit.High ^ bitB == Bit.High ? Bit.High : Bit.Low;
            }
        }

        public class OrGate
        {
            protected IObservable<Bit> OutputStream;

            public IObservable<Bit> Output
            {
                get { return OutputStream; }
            }

            public OrGate(IObservable<Bit> streamA, IObservable<Bit> streamB)
            {
                OutputStream = Observable.When(streamA.And(streamB).Then(Determine));
            }

            private Bit Determine(Bit bitA, Bit bitB)
            {
                return bitA == Bit.High || bitB == Bit.High ? Bit.High : Bit.Low;
            }
        }

        public enum Bit { Low = 0, High = 1} 
```

电路现在看起来像这样

![修改电路](../Images/9f8346355d2e2c9a33de9859e8889fc4.png)

我欢迎评论更正和建议以其他更好的方式实现这一目标，因为它仍然让我觉得有点 hacky。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T09:49:03.850

您需要将系统的输出推迟到之后的输入。这是模拟计算反馈系统中的关键位。

```
 public delegate IObservable<T> Feedback<T>(IObservable<T> feedback, out IObservable<T> output);
    public static IObservable<T> FeedbackSystem<T>(Feedback<T> closure)
    {
        IObservable<T> source = Observable.Empty<T>(), output;
        source = closure(Observable.Defer(() => source), out output);
        return output;
    } 
```

这是一个速度调节器的示例系统，即使存在波动，也可以将速度稳定在 100。它根据系统运行速度的反馈调整加速度。如果你不熟悉运动规律，基本上速度是加速度的结果，加速度是由速度反馈控制的。

```
 var system =
        FeedbackSystem((IObservable<double> acceleration, out IObservable<double> velocity) =>
        {
            //Time axis: moves forward every 0.1s
            double t = 0.1; var timeaxis = Observable.Interval(TimeSpan.FromSeconds(t));

            velocity = acceleration.Sample(timeaxis)                //move in time
                                   .Scan((u, a) => u + a * t)   //u' = u + at
                                   .Select(u => u + new Random().Next(10))  //some variations in speed
                                   .Publish().RefCount();                   //avoid recalculation

            //negative feedback
            var feedback = velocity.Select(u => 0.5 * (100 - u));

            return feedback.Select(a => Math.Min(a, 15.0))  //new limited acceleration
                           .StartWith(0);                   //initial value          
        });

        system.Subscribe(Console.WriteLine); 
```

反馈是在一个时间步长上计算的。甚至逻辑门也提供了切换时间。

# linux - 理论上是否可以实现将windows驱动JIT编译成linux驱动以绕过复杂的专有windows驱动？

> ID：15696911
> 
> 赞同：-4
> 
> 时间：2013-03-29T03:32:27.947
> 
> 标签：linux, windows, driver, linux-device-driver

我怀疑这种方法甚至可能不会从架构的工程角度暴露太多，因此甚至不会侵入相关实体的知识产权。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T03:35:24.260

可能不会，因为 JIT 编译器必须首先实时编译该代码，并且由于驱动程序连接到内核中，内核将是唯一可以做到这一点的真正程序，并且由于这可能会出现安全问题，我会想象这样的场景是不切实际的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T06:05:18.327

一般情况下这是不可能的另一个原因是内部**内核 API**在 Windows 和 Linux 之间是**不同**的，甚至在概念上也是如此。

因此，通常 Windows 驱动程序基于 Windows 特定的资源和功能（反之亦然）。

^(一些聪明的人可以做一个，`ndiswrapper`但我想他们必须为 wifi 模拟 Windows 内核特定的 API……；对其他类型的驱动程序（图形，...）这样做实际上是不可能的。)

一个实用的建议是避免购买没有 Linux 驱动程序的硬件（最好是免费软件驱动程序）。这给硬件制造商带来了市场压力。

# android - Android 布局 - layoutweight 和 weightsum

> ID：15696920
> 
> 赞同：11
> 
> 时间：2013-03-29T03:34:37.020
> 
> 标签：android, android-layout, textview, android-listfragment

我需要使用一组线性布局构建布局。布局必须占据屏幕的定义百分比。我需要这样做才能在所有设备中都有类似的外观。

## 问题：

我在右上角的布局中有一个文本视图（绿色框）。每当我在 textview 中添加一些数据时，它都会扰乱整个布局，如下图 2 所示。但是当数据到达屏幕/布局的右端时，我需要自动换行。

请帮我解决这个问题。提前致谢

## Image1 - 根据下面显示的 XML 的图形视图

![在此处输入图像描述](../Images/d0c8bc70fda781d1e2d6f2e8a9667dac.png)

## Image2 - 当我在 textView 中添加一些数据时，显示布局如何自动更改

![在此处输入图像描述](../Images/2db8ae4e260a3ee856a08569ba8e71e8.png)

## xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background"
android:orientation="vertical" 
android:weightSum="100">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:orientation="horizontal" 
    android:layout_weight="91"
    android:weightSum="100">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:orientation="vertical" 
                        android:layout_weight="40"
                        android:weightSum="235">

                                                    <LinearLayout
                                                        android:layout_width="match_parent"
                                                        android:layout_height="match_parent" 
                                                        android:orientation="vertical"  
                                                        android:gravity="center"
                                                        android:background="#ff0000"
                                                        android:layout_weight="100">

                                                                                    <TextView
                                                                                        android:id="@+id/textView1"
                                                                                        android:layout_width="wrap_content"
                                                                                        android:layout_height="wrap_content"
                                                                                        android:textColor="#000000" />

                                                    </LinearLayout>

                                                    <LinearLayout
                                                        android:layout_width="match_parent"
                                                        android:layout_height="match_parent" 
                                                        android:orientation="vertical"   
                                                        android:background="#ffff00"
                                                        android:layout_weight="45">   

                                                                                    <ViewFlipper
                                                                                        android:id="@+id/view_flipper"
                                                                                        android:layout_width="match_parent"
                                                                                        android:layout_height="match_parent"
                                                                                        android:layout_below="@+id/tvItemName" >

                                                                                                                        <LinearLayout
                                                                                                                            android:layout_width="match_parent"
                                                                                                                            android:layout_height="match_parent"
                                                                                                                            android:orientation="vertical" >
                                                                                        </LinearLayout>
                                                                                     </ViewFlipper>

                                                    </LinearLayout>

                                                    <LinearLayout
                                                        android:layout_width="match_parent"
                                                        android:layout_height="match_parent" 
                                                        android:orientation="vertical"  
                                                        android:background="#ffffff"
                                                        android:layout_weight="90">   

                                                    </LinearLayout> 

                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:orientation="vertical" 
                        android:layout_weight="60"
                        android:weightSum="100">

                                                    <LinearLayout
                                                        android:layout_width="match_parent"
                                                        android:layout_height="match_parent" 
                                                        android:orientation="vertical"   
                                                        android:layout_weight="30"
                                                        android:background="#00ab00"
                                                        android:weightSum="100"> 

                                                                                    <TextView
                                                                                        android:id="@+id/textView1"
                                                                                        android:layout_width="match_parent"
                                                                                        android:layout_height="fill_parent"
                                                                                        android:textColor="#000000"
                                                                                        android:text="Test data" />

                                                    </LinearLayout>

                                                    <LinearLayout
                                                        android:layout_width="match_parent"
                                                        android:layout_height="match_parent" 
                                                        android:orientation="vertical" 
                                                        android:background="#cd00ab" 
                                                        android:layout_weight="70"> 

                                                    </LinearLayout>

                    </LinearLayout>

</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:background="#ab0000"
    android:layout_weight="9">

</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T04:24:28.373

以0dp`layout_width`而`layout_height`不是`wrap_content`. （如果是垂直布局，`layout_height`应该是0dp；如果是水平布局，`layout_width`应该是0dp）

描述了在s / s 分配*后*`layout_weight`如何划分*剩余*空间。*`layout_width``layout_height`*

 *请注意，`wrap_content`这并不意味着“使文本换行”；这意味着将该维度设置为视图的“首选”维度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T05:07:42.563

使用此 XML 文件。我已经为你做了改变。

* * *

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background"
android:orientation="vertical"
android:weightSum="100" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="91"
    android:orientation="horizontal"
    android:weightSum="100" >

    <!-- Below is the first modification to layout_width -->

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="40"
        android:orientation="vertical"
        android:weightSum="235" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="100"
            android:background="#ff0000"
            android:gravity="center"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#000000" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="45"
            android:background="#ffff00"
            android:orientation="vertical" >

            <ViewFlipper
                android:id="@+id/view_flipper"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_below="@+id/tvItemName" >

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical" >
                </LinearLayout>
            </ViewFlipper>
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="90"
            android:background="#ffffff"
            android:orientation="vertical" >
        </LinearLayout>
    </LinearLayout>

    <!-- Below is the second modification to layout_width -->

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="60"
        android:orientation="vertical"
        android:weightSum="100" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="30"
            android:background="#00ab00"
            android:orientation="vertical"
            android:weightSum="100" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:text="Test data Test dataTest dataTest dataTest dataTest dataTest dataTest dataTest dataTest dataTest dataTest dataTest dataTest dataTest dataTest dataTest dataTest dataTest data"
                android:textColor="#000000" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="70"
            android:background="#cd00ab"
            android:orientation="vertical" >
        </LinearLayout>
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="9"
    android:background="#ab0000" >
</LinearLayout>

</LinearLayout> 
```

我觉得很好。查看下面的快照。

> ![带有少量文本的布局快照](../Images/6203e8f3ff2f4e2d80d4dc7a00577815.png) ![带有更多文本的布局快照](../Images/ff8d70479043c3b836f6ed4b5144dbad.png)*

# indexing - 我应该如何在 ElasticSearch 中索引我的数据来解决这种情况？

> ID：15696927
> 
> 赞同：1
> 
> 时间：2013-03-29T03:36:06.260
> 
> 标签：indexing, full-text-search, elasticsearch, tire

我正在为游戏（流放之路）构建搜索引擎。在这个游戏中，物品有插槽。

*   物品可以有 0 到 6 个插槽
*   一些套接字可以链接
*   有 3 种类型的插座（红色、绿色、蓝色）
*   当 3 个套接字链接时（例如），我们认为它们都相互链接，而不仅仅是最近的一个。

具有 5 个链接插槽和 1 个单独的第六个插槽的项目示例。

![](../Images/d14923c40ed9355ce5d7bc19c9190f36.png)

**我的目标是允许用户使用 ElasticSearch 搜索具有特定套接字颜色和链接的项目。**

用户会这样描述套接字组合：

“RRRBB”将是具有 5 个链接插槽、3 个红色和 2 个蓝色的项目。“GGG RB”将有 3 个绿色插座链接和 1 个红色和 1 个蓝色链接。

还在追？

当我索引一个项目时，我按字母顺序和组大小（可能不需要组大小）对链接的套接字进行排序：“RB GGB”将变为“BGG RB”。

在进行搜索之前，我会以相同的方式重新排序用户输入。

所以，寻找一个精确的组合是超级容易和快速的（？）。我什至不需要分析数据，对吗？

但我希望这些场景能够奏效：

"ggg" 会找到 "ggg rb" -> 这很容易用空格分析器吗？

但我正在努力的是：

"brr* r b" 将匹配 "bgrr r b" -> 我现在做事的方式：一旦一个组有 *，我在每个子组之间添加 *，所以我会搜索：*b* g* r b . 它有效，但我认为它真的效率低下，对吧？（即使第一个和最后一个字母是 B 或 R 的情况下也有一些小的优化，比如删除第一个和最后一个 *）。

您是否知道如何索引数据（分析器，作为字符串或术语或......）以使其成为可能和快速？

结束。

# asp.net-mvc-3 - VS2010 Code First MVC3 SQL 默认 Logfile.ldf 名称格式被忽略，创建第二个 logfile_log.ldf 文件

> ID：15696928
> 
> 赞同：0
> 
> 时间：2013-03-29T03:36:14.323
> 
> 标签：asp.net-mvc-3, visual-studio-2010, sql-server-2008, naming, ldf

首先使用 VS2010 代码和带有 MVC3 webapp 的 SQL Server 2008r2，SetInitializer 在丢失或模型更改时按预期创建一个数据库。

创建的 db 具有文件名格式 database.mdf 和 **logfile database.ldf（可以将此默认“name.ldf”格式更改为“name_log.ldf”吗？）。

当使用 VS2010 服务器资源管理器打开数据库时（在解决方案资源管理器中双击 db），VS2010 会创建一个新的第二个日志文件，格式为 database_log.ldf。

我现在可以在 VS2010 服务器资源管理器中浏览数据库，但不能再调试、dropcreateonmodelchange 或以其他方式使用 db。

尝试调试时显示的错误是：{“一个或多个文件与数据库的主文件不匹配。如果您尝试附加数据库，请使用正确的文件重试该操作。如果这是现有数据库，则文件可能已损坏，应从备份中恢复。\r\n无法打开登录请求的数据库“数据库”。登录失败。\r\n用户“My-PC\Me”登录失败。\r\n登录文件 'C:\Users\Me\project\App_Data\database.ldf' 与主文件不匹配。它可能来自不同的数据库，或者日志可能以前已重建。"} ...这很公平，因为该项目期望当前的日志文件是“database.ldf”。

ASPNETDB.MDF 和 aspnetdb_log.ldf 文件/名称也已创建，并且没有默认日志文件名问题，因此该问题不适用于 ASPNETDB。

是否可以更改 SetInitializer 的默认日志文件名以创建“database_log.ldf”格式的日志文件名而不是“database.ldf”？我用谷歌搜索没有成功，并查看了我在 VS2010 中可以找到的所有设置和选项。格式是否存储在可以手动编辑的配置文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:38:10.953

为了在 VS2010 中继续使用数据库，我最终删除了 database.ldf 日志文件，并将新的 database_log.ldf 文件重命名为原始的 database.ldf 名称。它既不优雅也不正确，但它适用于开发。

这并没有解决 codefirst 创建一个版本的日志文件和服务器资源管理器在同一 VS2010 环境中的开发过程的不同阶段创建第二个不同命名的日志文件的错误行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T00:05:55.570

对于任何阅读此主题的人，尤其是作者，我在 MS SQL Server 论坛上找到了解决方案。这是答案：

[Visual Studio 损坏 SQL Server 日志文件](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/8534ee7c-f61e-4ced-9bba-bb1fcc23243d/vs2010-corrupts-sql-server-2012-db-workarounds-or-is-this-a-feature#ac8ecd8d-ff1e-4b0b-896a-fcd4672f97d7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-10T14:53:36.020

我在使用 VS2010 Express 和 SServer 2012 Express 时遇到了完全相同的问题。我正在尝试阅读 Julie Lerman 的《Programming Entity Framework 2nd Edition》一书。

没有比这更好的解决方案 - 重命名日志文件吗？我试图重命名这些文件，但 Windows 会告诉我该文件正在使用中，即使我关闭了 VS 和 SSMS。数据库的 Process Explorer 搜索告诉我该文件正在由 SServer 使用。

我发现我所要做的就是尝试使用 DB Connection 向导创建一个连接字符串，并且 SServer 中的 DB 获得了创建的“额外”日志文件，我得到了与您看到的相同的消息。

这是 VS2010Ex 中的错误吗？有可用的补丁吗？我们如何防止 VS2010 损坏数据库？

这是创建数据库之后的目录，但在尝试从 VS 进行任何操作之前：

```
E:\Program Files (x86)\Microsoft SQL Server\MSSQL11.SAMPLES\MSSQL\DATA>dir programmingefdb2*
 Volume in drive E is JET20110708-1
 Volume Serial Number is EA22-1F7C

 Directory of E:\Program Files (x86)\Microsoft SQL Server\MSSQL11.SAMPLES\MSSQL\DATA

 08/09/2013 11:39 AM 10,485,760 PROGRAMMINGEFDB2_Data.mdf
 08/09/2013 11:39 AM 1,310,720 PROGRAMMINGEFDB2_Log.ldf
 2 File(s) 11,796,480 bytes
 0 Dir(s) 250,238,443,520 bytes free 
```

这是在 VS 项目中建立连接后的目录，但甚至没有尝试运行更新代码（并且没有将数据库复制到项目中）：

```
E:\Program Files (x86)\Microsoft SQL Server\MSSQL11.SAMPLES\MSSQL\DATA>dir programmingefdb2*
 Volume in drive E is JET20110708-1
 Volume Serial Number is EA22-1F7C

 Directory of E:\Program Files (x86)\Microsoft SQL Server\MSSQL11.SAMPLES\MSSQL\DATA

 08/09/2013 11:51 AM 10,485,760 PROGRAMMINGEFDB2_Data.mdf
08/09/2013 11:51 AM 516,096 PROGRAMMINGEFDB2_Data_log.ldf
 08/09/2013 11:39 AM 1,310,720 PROGRAMMINGEFDB2_Log.ldf
 3 File(s) 12,312,576 bytes
 0 Dir(s) 250,237,927,424 bytes free 
```

# android - 启动片段时发生 NoClassDefFoundError

> ID：15696930
> 
> 赞同：0
> 
> 时间：2013-03-29T03:36:35.450
> 
> 标签：android, intellij-idea, noclassdeffounderror

java.lang.NoClassDefFoundError 发生在第一行：

```
FirstFragment firstTab = FirstFragment.newInstance(10);

mTabsAdapter.addTab(generateTabSpec(0, mTabHost),
            firstTab.getClass(), null); 
```

但我很确定片段存在！（它是一个片段，所以不需要检查是否在 Manifest 中声明。）即使重构它的名称或移动到其他包也不能解决问题。这是堆栈跟踪：

```
ERROR/AndroidRuntime(23608): FATAL EXCEPTION: main
    java.lang.NoClassDefFoundError: dev.twothree.android.wtf.FirstFragment
    at dev.twothree.android.activity.FragmentTab.setupTabHost(FragmentTab.java:110)
    at dev.twothree.android.activity.FragmentTab.onCreate(FragmentTab.java:75)
    at android.app.Activity.performCreate(Activity.java:5008)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2136)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2207)
    at android.app.ActivityThread.access$600(ActivityThread.java:139)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1205)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4899)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
    at dalvik.system.NativeStart.main(Native Method) 
```

它是 Intell J 12.0.4 的错误吗？我的版本是 Build #IC-123.169。稍后我会在 Eclipse 中尝试，但仍然希望它可以在 Intelli J 中解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:52:34.013

用 Eclipse 打开整个项目后，再次配置所有依赖项，Eclipse 指出我不小心将一个自定义库类转换为另一个类。也许这就是为什么没有成功编译的类文件以供以后调用的原因。

无论如何，似乎 Intelli-J 在涉及 3rd 方库时没有发现该错误，这可能是一个错误。但也怪我没有发现这么明显的错误。

# mysql - sql触发器不起作用

> ID：15696931
> 
> 赞同：3
> 
> 时间：2013-03-29T03:36:40.147
> 
> 标签：mysql, sql, triggers

嗨，我有一个学生表，其中有用户名、用户类型、密码等列。我为此表编写了一个触发器，它为用户类型“学生”创建了一个用户名，这是触发器代码

```
> DROP TRIGGER `sasis`.`USERNAMEAutoGen`;

DELIMITER ||

CREATE TRIGGER `sasis`.`USERNAMEAutoGen` 
BEFORE INSERT ON `sasis`.`userinfo` 
FOR EACH ROW BEGIN  
    if (usertype== 'Student')
      declare i varchar(2);
      declare usrnm varchar(20);
      declare fullusrnm varchar(255);
      declare curyr varchar(10);
      declare curm varchar(10);
      declare rcount varchar(50);
      set i='I';
      select date_format(now(),'%y') into curyr;
      select date_format(now(),'%b') into curm;
      set usrnm=concat(i,curyr,upper(curm));
      select count(*) into rcount from userinfo where username like concat(usrnm,'%');
      if(rcount<9) then
        set rcount=concat('0000',(rcount+1));
      elseif (rcount<99) then
        set rcount=concat('000',(rcount+1));
      elseif (rcount<999) then
        set rcount=concat('00',(rcount+1));
      end  if;
      set fullusrnm=concat(i,curyr,upper(curm),rcount);
       if (new.username is null or trim(new.username)='') then
        set NEW.username=fullusrnm;
      end if;   end if; END||

DELIMITER ; 
```

它以前可以工作，但现在显示一些错误，表明'=='Student'附近存在语法错误）声明i varchar（2）。等等，我不知道如何解决它，请帮助您提供宝贵的答案。提前致谢。

我也尝试过使用“if (usertype='Student') THEN”，但随后它在 declare i varchar(2); 附近显示语法错误之类的错误消息；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T03:43:28.220

当我浏览手册时，我看不到任何`==`支持，

*   [MySQL 运算符](http://dev.mysql.com/doc/refman/5.6/en/non-typed-operators.html)

所以在你的`TRIGGER`, 应该只`IF (usertype = 'Student') THEN`

完整的触发代码

```
CREATE TRIGGER `sasis`.`USERNAMEAutoGen` 
BEFORE INSERT ON `sasis`.`userinfo` 
FOR EACH ROW 
BEGIN  

    declare i varchar(2);
    declare usrnm varchar(20);
    declare fullusrnm varchar(255);
    declare curyr varchar(10);
    declare curm varchar(10);
    declare rcount varchar(50);

    IF (usertype== 'Student') THEN

        set i='I';
        select date_format(now(),'%y') into curyr;
        select date_format(now(),'%b') into curm;
        set usrnm=concat(i,curyr,upper(curm));
        select count(*) into rcount from userinfo where username like concat(usrnm,'%');

        if(rcount<9) then
            set rcount=concat('0000',(rcount+1));
        elseif (rcount<99) then
            set rcount=concat('000',(rcount+1));
        elseif (rcount<999) then
            set rcount=concat('00',(rcount+1));
        end  if;

        set fullusrnm=concat(i,curyr,upper(curm),rcount);
        if (new.username is null or trim(new.username)='') then
            set NEW.username=fullusrnm;
        end if; 

      end if; 
END||

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:39:37.787

你确定mysql允许==作为相等运算符吗？

# jsp - 用于多行的 JSP PrintWriter

> ID：15696937
> 
> 赞同：1
> 
> 时间：2013-03-29T03:37:59.773
> 
> 标签：jsp

我正在尝试将一些信息写入文本文件。每条信息都应该在一个新的行上。以下代码有效，但是所有内容都打印在一行上。

println() 不应该打印到新行吗？为什么它不起作用？

```
<%
    String file = request.getParameter("page"); 
    String name = request.getParameter("name");
    String location = request.getParameter("location");
    String number = request.getParameter("number");
    String url = request.getParameter("url");

    PrintWriter pw = new PrintWriter(new FileOutputStream(file));

    pw.println(name);
    pw.println(location);
    pw.println(number);
    pw.println(url);

    pw.close();
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:44:32.467

使用 JSP 的真正好处并这样做

```
<%
        String file = request.getParameter("page"); 
        String name = request.getParameter("name");
        String location = request.getParameter("location");
        String number = request.getParameter("number");
        String url = request.getParameter("url");

        PrintWriter pw = new PrintWriter(new FileOutputStream(file));

        pw.println(name);
              %><br/>

        <%  pw.println(location);%><br/>
        <%  pw.println(number);%><br/>
        <%  pw.println(url);
                pw.close();
                                           %> 
```

我不知道您为什么要再次创建`PrintWriter`对象，因为 JSP 本身提供[了“out”，它是](http://www.tutorialspoint.com/jsp/jsp_implicit_objects.htm)scriplets 中的 printwriter 对象变量。
我们可以通过其他一些好方法来做到这一点，但根据您的代码，我发现这种方式很舒服。
**编辑：**如果没有任何效果，那么您需要给一个机会，`pw.printf( "%s" + "%n" , location);`因为这允许您将格式化的文本字符串传递给您的 PrintWriter。使用的一个很好的理由`printf`是处理换行符。换行符会有所不同，具体取决于您使用的操作系统。Windows 将为`\r\n`新行添加字符。但是 Unix 系统只使用`\n`. 使用 printf 函数将确保正确的编码，无论是什么平台。

# javascript - 使用 Javascript 使用 window.onload 进行表单验证

> ID：15696938
> 
> 赞同：1
> 
> 时间：2013-03-29T03:38:07.910
> 
> 标签：javascript, html, forms, validation, callback

嗨，我真的坚持这一点，因为我是一个 javscript 初学者，这让我大吃一惊。

有没有人知道如何编写以下 javascript 表单验证？我确信这很简单，但我想不出这个来挽救我的生命。

感谢您分享您的知识。

我需要在没有 jquery 的情况下编写以下表单验证。每当遇到错误时，阻止提交表单。我需要使用 window.onload 函数来分配验证回调函数。有 4 个输入由 javascript 代码验证。javascript也需要在它自己的文件中。

验证规则如下：

输入：用户名；需要（是）；验证（长度必须为 5-10 个字符）。输入：电子邮件；需要（是）；验证（必须有 @ 符号，必须有句点）。输入：街道名称；必填（否）；验证（必须以数字开头）。输入：出生年份；需要（是）；验证（必须是数字）。

我的代码如下所示：

* * *

HTML：

* * *

```
<!DOCTYPE html>
<html>
<head>

<script defer="defer" type="text/javascript" src="form.js"></script>

</head>
<body>
<form action="fake.php">
    Username*: <input type="text" class="required" name="u"/><br/>
    Email*: <input type="text" class="required" name="p"/><br/>
    Street address: <input type="text" class="numeric" name="s"/><br/>
    Year of birth*: <input type="text" class="required numeric" name="b"/><br/>

    <input type="submit"/><br/>
</form>
</body>
</html> 
```

* * *

## JS

```
document.forms[0].elements[0].focus();

document.forms[0].onsubmit=function(){

for(var i = 0; i < document.forms[0].elements.length; i++){

var el = document.forms[0].elements[i];

if((el.className.indexOf("required") != -1) && 
  (el.value == "")){

alert("missing required field");
 el.focus();
el.style.backgroundColor="yellow";
 return false;
}

if((el.className.indexOf("numeric") != -1) && 
 (isNaN(el.value))){

alert(el.value + " is not a number");
 el.focus();
el.style.backgroundColor="pink";
 return false;              
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:16:28.957

无需更改您的大部分代码...更新您的代码以进行其他验证，例如长度（需要一个类 verifylength 来验证长度）等等....

试试这个

**HTML**

```
<form action="fake.php">Username*:
<input type="text" class="required verifylength" name="u" />
<br/>Email*:
<input type="text" class="required email" name="p" />
<br/>Street address:
<input type="text" class="numeric" name="s" />
<br/>Year of birth*:
<input type="text" class="required numeric" name="b" />
<br/>
<input type="submit" />
<br/>
</form> 
```

**JAVASCRIPT**

```
document.forms[0].elements[0].focus();
document.forms[0].onsubmit = function () {
for (var i = 0; i < document.forms[0].elements.length; i++) {
    var el = document.forms[0].elements[i];
    if ((el.className.indexOf("required") != -1) && (el.value == "")) {
        alert("missing required field");
        el.focus();
        el.style.backgroundColor = "yellow";
        return false;
    } else {
        if (el.className.indexOf("verifylength") != -1) {
            if (el.value.length < 5 || el.value.length > 10) {
                alert("'" + el.value + "' must be 5-10 charater long");
                el.focus();
                el.style.backgroundColor = "pink";
                return false;
            }
        }
    }

    if (el.className.indexOf("email") != -1) {
        var regEx = /^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$/;
        var emailTest = regEx.test(el.value);
        if (!emailTest) {
            alert("email not valid");
            el.focus();
            el.style.backgroundColor = "yellow";
            return false;
        }
    };

    if ((el.className.indexOf("numeric") != -1) && (isNaN(el.value))) {
        alert(el.value + " is not a number");
        el.focus();
        el.style.backgroundColor = "pink";
        return false;
    }
 }
} 
```

[工作小提琴](http://jsfiddle.net/bipen/p3Wsv/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:06:13.370

类似于...的东西

```
//username 5-10 chars
var uVal = document.getElementsByTagName("u").value;
if (uVal.length < 5 || uVal.length > 10) return false;

//email needs @ and .
var eVal = document.getElementsByTagName("p").value;
if !(eVal.match('/.*@.*\./g')) return false;

//street starts w/ num
var sVal = document.getElementsByTagName("s").value;
if !(sVal.match('/^[0-9]/g')) return false; 
```

我认为正则表达式已关闭+未经测试:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T05:05:25.497

这是您工作中的 javascript 验证对象。希望您可以根据需要进行一些修改。

**风格**

```
<style>
    .valid {border: #0C0 solid 1px;}
    .invalid {border: #F00 solid 1px;}
</style> 
```

**HTML 表单**

```
<div>
    <form id="ourForm">
        <label>First Name</label><input type="text" name="firstname" id="firstname" class="" /><br />  
        <label>Last Name</label><input type="text" name="lastname" id="lastname" class="" /><br />  
        <label>Username</label><input type="text" name="username" id="username" class="" /><br />
        <label>Email</label><input type="text" name="email" id="email" class="" /><br />  
        <input type="submit" value="submit" class="" />  
    </form>
</div> 
```

**在结束标签之前调用脚本**

```
<script src="form_validation_object.js"></script> 
```

**form_validation_object.js**

```
/*
 to: dom object
 type: type of event
 fn: function to run when the event is called
 */
function addEvent(to, type, fn) {
    if (document.addEventListener) { // FF/Chrome etc and Latest version of IE9+
        to.addEventListener(type, fn, false);
    } else if (document.attachEvent) { //Old versions of IE. The attachEvent method has been deprecated and samples have been removed.
        to.attachEvent('on' + type, fn);
    } else { // IE5
        to['on' + type] = fn;
    }
}

// Your window load event call
addEvent(window, 'load', function() {
    /* form validation object */
    var Form = {
        validClass: 'valid',
        inValidClass: 'invalid',
        fname: {
            minLength: 1,
            maxLength: 8,
            fieldName: 'First Name'
        },
        lname: {
            minLength: 1,
            maxLength: 12,
            fieldName: 'Last Name'
        },
        username: {
            minLength: 5,
            maxLength: 10,
            fieldName: 'Username'
        },
        validateLength: function(formElm, type) {
            //console.log('string = ' + formElm.value);
            //console.log('string length = ' + formElm.value.length);
            //console.log('max length=' + type.maxLength);
            //console.log(Form.validClass);
            if (formElm.value.length > type.maxLength || formElm.value.length < type.minLength) {
                //console.log('invalid');
                //alert(formElm.className);
                if (formElm.className.indexOf(Form.inValidClass) == -1) {
                    if (formElm.className.indexOf(Form.validClass) != -1) {
                        formElm.className = formElm.className.replace(Form.validClass, Form.inValidClass);
                    } else {
                        formElm.className = Form.inValidClass;
                    }
                }

                //alert(formElm.className);
                return false;
            } else {
                //console.log('valid');
                //alert(formElm.className.indexOf(Form.validClass));
                if (formElm.className.indexOf("\\b" + Form.validClass + "\\b") == -1) { // regex boundary to match whole word only  http://www.regular-expressions.info/wordboundaries.html
                    //formElm.className += ' ' + Form.validClass;
                    //alert(formElm.className);
                    if (formElm.className.indexOf(Form.inValidClass) != -1)
                        formElm.className = formElm.className.replace(Form.inValidClass, Form.validClass);
                    else
                        formElm.className = Form.validClass;
                }
                return true;
            }
        },
        validateEmail: function(formElm) {
            var regEx = /^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$/;
            var emailTest = regEx.test(formElm.value);
            if (emailTest) {
                if (formElm.className.indexOf(Form.validClass) == -1) {
                    formElm.className = Form.validClass;
                }
                return true;
            } else {
                formElm.className = Form.inValidClass;
                return false;
            }
        },
        getSubmit: function(formID) {
            var inputs = document.getElementById(formID).getElementsByTagName('input');
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].type == 'submit') {
                    return inputs[i];
                }
            }
            return false;
        }
    }

    /* call validation object */
    var ourForm = document.getElementById('ourForm');
    var submit_button = Form.getSubmit('ourForm');
    submit_button.disabled = 'disabled';

    function checkForm() {
        var inputs = ourForm.getElementsByTagName('input');
        if (Form.validateLength(inputs[0], Form.fname)) {
            if (Form.validateLength(inputs[1], Form.lname)) {
                if (Form.validateLength(inputs[2], Form.username)) {
                    if (Form.validateEmail(inputs[3])) {
                        submit_button.disabled = false;
                        return true;
                    }
                }
            }
        }
        submit_button.disabled = 'disabled';
        return false;
    }

    checkForm();
    addEvent(ourForm, 'keyup', checkForm);
    addEvent(ourForm, 'submit', checkForm);

}); 
```

**[JSBin http://jsbin.com/ezujog/1](http://jsbin.com/ezujog/1)**的工作示例****

# xcode - 预期标识符错误？XCODE

> ID：15696942
> 
> 赞同：0
> 
> 时间：2013-03-29T03:38:38.880
> 
> 标签：xcode, cocos2d-iphone, kobold2d

```
- (void)tapped:(id)sender
{
    if (counter ==1) {

        bluetest.position = ccp(400, 400);
    }
}

blue = [[CCMenuItemImage
            itemFromNormalImage:@"blue.png" selectedImage:@"blueclick.png"
             target:self selector:@selector(tapped:)];  //error occurs here

    bluetest.position = ccp(175, 350);
    bluetest = [CCMenu menuWithItems:blue, nil];
    bluetest.position = CGPointZero;
    bluetest.scale = .75;
    [self addChild:bluetest z:3]; 
```

错误显示“预期的标识符”。我能做些什么来修复错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:01:34.677

@用户2083920，

删除第一个'['。您在开始时使用了双 '[' 并且只有一个结束 ']'。然后编译器将搜索另一个关闭 ']' 并给出上述错误，或者如果您忘记将所有内容粘贴到此处。请粘贴原始代码。

```
 [[CCMenuItemImage
            itemFromNormalImage:@"blue.png" selectedImage:@"blueclick.png"
             target:self selector:@selector(tapped:)]; 
```

# java - fpga与pc通讯

> ID：15696944
> 
> 赞同：0
> 
> 时间：2013-03-29T03:38:51.210
> 
> 标签：java, communication, vhdl, fpga

好的，我正在使用 Spartan 3a 套件，我需要知道与我的 fpga 和我的 pc 通信的最简单和最安全的选择，这意味着将数据发送到连接器的输入引脚并从连接器的输出引脚的引脚接收现在这个连接器或接口，我无法选择，我知道我的 fpga 上有这个接口：RS232 以太网 USB（我认为仅用于编程）差分对端口（？？？）ADC/DAC 端口 PS/键盘和鼠标端口

不，我需要一个合适的接口，以便我可以在 pc 上创建一个程序（可能使用 java）并能够发送数据以输入到我的 fpga 实现中。

IT 必须能够支持至少 7 兆字节/秒，因此 RS232 无法工作。

如果可能的话，请提供任何帮助，并提供一点关于如何在 pc 和 fpga 上完成接口的提示，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:37:17.043

其中，只有以太网 (a) 对主机 PC 来说是通用的，并且 (b) 速度足以满足您的目的。这使它成为一个简单的选择。在赛灵思网站上查看使用以太网接口的演示项目。

# php - Laravel 处理异常

> ID：15696945
> 
> 赞同：2
> 
> 时间：2013-03-29T03:39:34.237
> 
> 标签：php, exception, laravel

我正在同时使用 Stripe API 和 Laravel。如果 Stripe 检测到对卡收费的错误（例如使用测试信用卡号会引发无效的安全代码错误），API 绑定应该会引发异常，它们会这样做。问题是，在 Laravel 抛出错误 500 页面之前，我在*捕获*异常时遇到了问题（我正在尝试使用错误消息执行重定向）。

我编写的代码可在 Pastebin 上找到：http: [//pastebin.com/ZaW2xbbt](http://pastebin.com/ZaW2xbbt)

我期望的行为是`catch`触发并执行重定向，但是相反，我得到了带有消息和“未处理异常”的堆栈跟踪。这让我很困惑，因为我*正在*处理异常。

变量如`$customer`是有效的并且之前已经定义过。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-07T01:31:35.780

对于任何未来的观众，这里有一篇关于[laravel 4 错误处理](http://fideloper.com/laravel4-error-handling)的文章。

Laravel 4 允许您按异常类型捕获异常。例如，您可以`HttpException`通过将以下代码添加到代码中来处理 Symfony 及其子类：

```
// Catch HttpException, NotFoundHttpException, etc etc
App::error(function(HttpException $exception, $code, $fromConsole)
{
    ...
}); 
```

Symfony HttpExceptions（在 Laravel 中使用）可以在[这里](https://github.com/symfony/symfony/tree/master/src/Symfony/Component/HttpKernel/Exception)找到。

您也可以将其放入 ServiceProvider 中：

```
<?php namespace My\Namespace;

use Illuminate\Support\ServiceProvider;
use Symfony\Component\HttpKernel\Exception\HttpException;

class MyServiceProvider extends ServiceProvider {

    public function register()
    {
            $this->app->error(function(HttpException $exception, $code, $fromConsole)
            {
                ...
            });
    }

} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-07T08:37:34.107

通常，Laravel 记录的所有错误都记录在`storage/logs`文件夹下

无论如何，500 错误可能是语法/解析错误，在这种情况下，当错误发生时 Laravel 框架可能尚未加载，如果是这样，Laravel 不会处理异常。

在这种情况下，您应该以某种方式访问​​ apache/vargrant/whatif php 错误日志（取决于您的服务器功能和配置），在我个人情况下，我已将服务器配置为将该日志放在一个`/storage/logs/error_log.txt`文件中，以便我可以访问它们作为其他 Laravel 服务器日志

请注意，在 Laravel 5 中，您可以`app/Exceptions/Handler.php`作为自定义异常处理/报告的入口点

[https://laravel.com/docs/5.7/errors#the-exception-handler](https://laravel.com/docs/5.7/errors#the-exception-handler)

# macos - 登录时的持久数据

> ID：15696947
> 
> 赞同：0
> 
> 时间：2013-03-29T03:40:06.393
> 
> 标签：macos, cocoa, logging, nsuserdefaults

我是mac开发的新手开发人员。我需要做的是在用户单击任何应用程序中的“打印”按钮时创建一个身份验证对话框。

我需要将用户名和密码存储 1 小时（以避免一直进行身份验证），但是当用户从机器上注销时应该将其删除。

我在想的是使用 NSUserDefaults 来存储数据，并创建一个注销挂钩来删除这些数据。这是这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:37:33.880

使用[授权服务](https://developer.apple.com/library/mac/#documentation/security/conceptual/authorization_concepts/01introduction/introduction.html#//apple_ref/doc/uid/TP30000995-CH204-TP1)。听起来您的应用程序符合指南中描述的“简单、自我限制的应用程序”模型。

创建授权权限时，使用该`timeout`属性设置缓存用户凭据的时间长度。

# mysql - EC2 上的 Django 使用 RDS

> ID：15696949
> 
> 赞同：0
> 
> 时间：2013-03-29T03:40:11.493
> 
> 标签：mysql, django, amazon-web-services, rds

我有一个在 EC2 实例上运行的 Django 应用程序并尝试连接到 RDS mysql 数据库实例。

我已经创建了 RDS 数据库并向 RDS 安全组添加了一个允许 EC2 安全组的规则。

在我的`settings.py`文件中，我已将 HOST 添加为 RDS 端点，将端口添加为 3306 - 以及数据库名称、用户和密码。

我已经在 EC2 实例上安装了 libmysqlclient-dev、MySQL-python 和 mysql-client。

当我运行时`./manage.py syncdb`，我收到此错误：

```
super(Connection, self).__init__(*args, **kwargs2)
_mysql_exceptions.OperationalError: (2002, "Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)")* 
```

看起来它正在尝试连接到本地 mysql 服务器（当然不存在，因为我希望它连接到 RDS）。

我怎样才能克服这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T09:15:53.913

您没有默认设置 rds，或者您加载了错误的设置文件。Python mysql 试图通过套接字连接本地主机基地（当 HOST 字段为空时）。您可以尝试在设置中打印 DATABASE['default']['HOST'] 或 django shell 在设置中检查主机。

# html - HTML/CSS 新手，尝试居中和显示：一起内联

> ID：15696953
> 
> 赞同：-2
> 
> 时间：2013-03-29T03:40:58.923
> 
> 标签：html, css, center

我对此和编码很陌生。请帮忙！我准备挖出我的眼睛。

我正在尝试将消息置于页面中心。上面写着“欢迎来到蜡染别墅”。该页面将使用两种语言，英语和缅甸语。我想包含一个在页面之间交换的链接。我希望“欢迎来到蜡染别墅”居中，英语/缅甸语链接位于其右侧。我不希望它在较低的线上。我一直在寻找几个小时，但我无法弄清楚。

这是我的文字。

```
<div id=Jim; style="font-family: Georgia;
display:inline">

<p style="border: blue groove;
margin: 0;
margin: auto; 
text-align:center;
color:black;
background-color: white; 
width: 600px;
border-width:10px;">

Welcome to Batik Villa!
</p>
</div>

<a href="b"> English </a>  
<a href="a"> Myanmar </a>

</body>
</html> 
```

请帮忙！或者告诉我这是否不可能！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:48:22.167

[http://jsfiddle.net/pD5Vw/1/](http://jsfiddle.net/pD5Vw/1/)

```
<div id=Jim; style="font-family: Georgia;">

<p style="border: blue groove;
 margin: 0;
 margin: auto; 
 text-align:center;
 color:black;
 background-color: white; 
 width: 70%;
 float:left;
 border-width:10px;">
 Welcome to Batik Villa!  
</p>
 <span style="float:right; display:inline-block; padding-top:5px;"><a href="b"> English       </a>  
 <a href="a"> Myanmar </a></span> 

</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:51:58.743

你的意思是这样的还是我错过了什么？： http: [//jsfiddle.net/SUxmb/1/](http://jsfiddle.net/SUxmb/1/)

```
div.wrapper{
    margin:50px auto;
    width:250px;
    background:#ddd;
    padding:20px;
    overflow:hidden;
}

div#welcome{
    float:left;
}

div#lang{
    float:right;
} 
```

或者，如果您想要一个带有“xyz”边框的居中文本框，请使用[http://jsfiddle.net/SUxmb/8/ 。](http://jsfiddle.net/SUxmb/8/)在同一行，但在右侧（不居中，不在同一个框或边框中）

```
div#welcome {
    margin:50px auto;
    width:250px;
    background:#ddd;
    position:relative;
    height:50px;
    line-height:50px;
    text-align:center;
}

div#lang {
    position:absolute;
    background:#ccc;
    left:100%;
    top:0px;
    height:50px;
    padding:0px 20px;
}

div#lang a{
    padding:0px 5px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:44:37.550

```
<center>
<a href="b"> English </a>  
<a href="a"> Myanmar </a>
</center> 
```

？？？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T03:48:59.363

对于 div id="Jim" 将宽度设置为 60% 并使用 text-align: right，这将使文本看起来居中并使 div 向左浮动。为按钮再创建一个 div 并将其浮动。

```
<div style="float: right;">
<a href="b"> English </a>  
<a href="a"> Myanmar </a>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T03:52:19.900

1.  对于`#Jim`，删除`display: inline`，（使其默认为`display:block`）；这会自动占据其容器的宽度。然后给它`text-align: center`。
2.  对于`p`，指定`display: inline`，以便它不会将链接向下推到新行上。

整体代码可以在[jsFiddle](http://jsfiddle.net/6mLRM/1/)看到。

# javascript - 列出内置 JavaScript 标准对象方法

> ID：15696958
> 
> 赞同：2
> 
> 时间：2013-03-29T03:41:43.073
> 
> 标签：javascript, node.js, rhino

有没有办法列出所有 JavaScript 标准对象方法？

我的意思是我正在尝试获取 String 的所有内置方法，所以我在想，我确实尝试过这样做：

```
for( var method in String ) {
    console.log( method );
}

// I also tried this:
for( var method in String.prototype ) {
    console.log( method );
} 
```

但没有运气。此外，如果有一种解决方案适用于所有 ECMAScript 标准类/对象的方法。

编辑：我想指出，该解决方案也应该在服务器端环境中工作，如 rhino 或 node.js。

并且尽可能不使用第三方 API/框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T03:44:09.347

不会**[dir](https://developers.google.com/chrome-developer-tools/docs/commandline-api#dirobject)**给你你需要的东西吗？

```
console.log(dir(method)) 
```

编辑：

这会起作用（请尝试[John Resig 的博客](http://ejohn.org/blog/ecmascript-5-objects-and-properties/)了解更多信息）：

`Object.getOwnPropertyNames(Object.prototype)`给出：

```
["constructor", "toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "__defineGetter__", "__lookupGetter__", "__defineSetter__", "__lookupSetter__"] 
```

`Object.getOwnPropertyNames(Object)`给出：

```
["length", "name", "arguments", "caller", "prototype", "keys", "create", "defineProperty", "defineProperties", "freeze", "getPrototypeOf", "getOwnPropertyDescriptor", "getOwnPropertyNames", "is", "isExtensible", "isFrozen", "isSealed", "preventExtensions", "seal"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:49:06.897

您应该能够通过检查[此处解释的属性类型来获取方法列表](https://stackoverflow.com/questions/5842654/javascript-get-objects-methods)

也试试[getOwnPropertyNames](https://stackoverflow.com/questions/2257993/how-to-display-all-methods-in-a-javascript-object)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T04:08:04.500

我从这篇文章中得到了答案[How to display all methods of an object in Javascript?](https://stackoverflow.com/questions/2257993/how-to-display-all-methods-in-a-javascript-object/2946616#2946616)

感谢[CiannanSims](https://stackoverflow.com/users/875127/cianan-sims)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-01T12:45:33.957

所以这里有一种方法可以挤出更多的属性：

```
> function a () {}
undefined
> Object.getOwnPropertyNames(a)
[ 'length',
  'name',
  'arguments',
  'caller',
  'prototype' ]
> a.bind
[Function: bind]
> // Oops, I wanted that aswell
undefined
> Object.getOwnPropertyNames(Object.getPrototypeOf(a))
[ 'length',
  'name',
  'arguments',
  'caller',
  'constructor',
  'bind',
  'toString',
  'call',
  'apply' ] 
```

我不是 javascript 人，但我猜发生这种情况的原因是因为`bind`, `toString`, `call`and`apply`可能是从更高的继承级别继承的（这在这种情况下是否有意义？）

编辑：顺便说一句，这是我实现的一个，它尽可能地追溯到原型。

```
function getAttrs(obj) {
    var ret = Object.getOwnPropertyNames(obj);
    while (true) {
        obj = Object.getPrototypeOf(obj);
        try {
            var arr = Object.getOwnPropertyNames(obj);
        } catch (e) {
            break;
        }

        for (var i=0; i<arr.length; i++) {
            if (ret.indexOf(arr[i]) == -1)
                ret.push(arr[i]);
        }
    }

    return ret;
} 
```

# iphone - Monotouch EventKit - Not Able To Retrieve EventIdentifier

> ID：15696959
> 
> 赞同：1
> 
> 时间：2013-03-29T03:41:50.083
> 
> 标签：iphone, ios, xamarin.ios, eventkit

I am using the example found here : [http://docs.xamarin.com/guides/ios/platform_features/introduction_to_eventkit#4.3.creating-an-event-programmatically](http://docs.xamarin.com/guides/ios/platform_features/introduction_to_eventkit#4.3.creating-an-event-programmatically)

I asked Xamarin and they said I was supposed to use `EventIdentifier` instead of `CalendarItemIdentifier` - However, when you look up an event the way they say (startDate, endDate, and Calendar)

Calendar items don't have an `EventIdentifier`property, and I'm not sure how to cast that or what I'm supposed to do there.

Here's a basic example of what I am doing. The problem is that when I go to look up an event by the identifier it doesn't exist since it's a `CalendarItemIdentifier` instead of an `EventIdentifier`

```
public string CreateDefaultEvent ()
        {
            // Creating an event for demonstration purposes
            // This is the sample code from your website to create an event programmatically
            EKEvent newEvent = EKEvent.FromStore ( Application.AppEventStore );
            // set the alarm for 10 minutes from now
            newEvent.AddAlarm ( EKAlarm.FromDate ( DateTime.Now.AddMinutes ( 10 ) ) );
            // make the event start 20 minutes from now and last 30 minutes
            newEvent.StartDate = DateTime.Now.AddMinutes ( 20 );
            newEvent.EndDate = DateTime.Now.AddMinutes ( 50 );
            newEvent.Title = "Get outside and do some exercise!";
            newEvent.Notes = "This is your motivational event to go and do 30 minutes of exercise. Super important. Do this.";
            newEvent.Calendar = Application.AppEventStore.DefaultCalendarForNewEvents;

            NSError e;
            Application.AppEventStore.SaveEvent ( newEvent, EKSpan.ThisEvent, out e );
            Console.WriteLine ("Event Saved, ID: " + newEvent.CalendarItemIdentifier);
            return newEvent.CalendarItemIdentifier;
        }

        public string RetrieveCreatedEvent (string _eventIdentifier)
        {
            // We will just return the event's notes to see if we got a valid event
            EKEvent savedEvent = Application.AppEventStore.EventFromIdentifier (_eventIdentifier);
            return savedEvent.Notes;
        } 
```

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:36:34.523

When you go to get the event you have to do this:

```
NSPredicate query = Util.MyEventStore.PredicateForEvents (Util.DateTimeToNSDate(startDate), Util.DateTimeToNSDate(endDate), null);
//EKCalendarItem[] eventArrary = Util.MyEventStore.EventsMatching (query);
EKEvent[] eventArrary = Util.MyEventStore.EventsMatching (query); 
```

我不知道为什么我最初把它变成了一个`EKCalendarItem[]`但是，你必须使用一个`EKEvent`

# ios - 了解为 Iphone5/4/3 设计的 iphone 图像

> ID：15696961
> 
> 赞同：2
> 
> 时间：2013-03-29T03:41:56.473
> 
> 标签：ios, uibutton, photoshop, iphone-5, slice

我想了解为 IOS 应用程序设计图像的思考过程/最佳实践。

例如我有一个按钮设置如下：

```
LoginButton = [[UIButton alloc] initWithFrame:CGRectMake(10,(otherLoginButton.bounds.size.height + 40),300,50)]; 
```

所以代码中的按钮是300x50px。

我的问题是图像在 Photoshop 中的大小应该是多少。让我们举个例子，我将整个按钮设计为一个不使用可拉伸按钮等的图像（尽管我会这样做），但作为一个例子，我想在 PS 中创建整个按钮。

如果我先为 iPhone5 设计然后按比例缩小，按钮应该是什么尺寸？

其次，如果我使用上述技术，一旦创建图像，我需要做的就是在 Photoshop 中按比例缩小 50%？是否像在 Photoshop 中缩放并选择 50% 或其他任何内容一样简单。

完成后，我是否只需要这两个图像作为按钮一个名为 'button' 另一个 'button2@' ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:58:11.737

用于屏幕背景图像。您应该考虑 176 像素作为 iPhone5 和 4 之间的差异（1136 与 960），您可以考虑返工所有背景以设置您的应用与 iPhone5 兼容。

不久前，我发现了一篇关于如何为 iPhone5 优化这些艺术的好文章，请看[这里](http://www.vickiwenderlich.com/2012/11/four-ways-to-deal-with-the-longer-iphone-5-screen/)。

# vector - three.js 设置和读取相机外观矢量

> ID：15696963
> 
> 赞同：13
> 
> 时间：2013-03-29T03:42:18.807
> 
> 标签：vector, camera, three.js

我不想使用 camera.rotation 或使用 lookAt() 函数旋转相机，而是将外观矢量直接传递给相机...是否可以直接设置相机外观矢量，是否可以读取外观来自相机的矢量？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-29T04:14:06.663

相机没有“look vector”，因此您无法设置它。

但是，您可以`point`通过将您的外观矢量添加到相机的位置，然后调用

```
camera.lookAt( point ); 
```

以下是如何确定相机正在看的方向，假设相机没有父级（场景除外）。

相机向下看它的内部负 z 轴，因此创建一个指向负 z 轴的向量：

```
var vector = new THREE.Vector3( 0, 0, - 1 ); 
```

现在，对应用于相机的向量应用相同的旋转：

```
vector.applyQuaternion( camera.quaternion ); 
```

生成的矢量将指向相机正在寻找的方向。

或者，您可以使用以下方法，即使相机是另一个对象的子对象，该方法也有效：

```
camera.getWorldDirection( dirVector ); 
```

三.js r.73

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-24T23:25:24.913

上面的答案包装为一个实用程序，这就是我对我的三个实用程序所做的事情：

```
THREE.Utils = {
    cameraLookDir: function(camera) {
        var vector = new THREE.Vector3(0, 0, -1);
        vector.applyEuler(camera.rotation, camera.eulerOrder);
        return vector;
    }
}; 
```

调用它`THREE.Utils.cameraLookDir(camera);`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-07T23:27:57.083

这些其他答案非常有见地，但并不完全正确。该代码返回一个向量，该向量指向与相机指向的方向相同的方向。这是一个很好的开始！

但除非相机位于原点 (0, 0, 0)（或恰好位于将原点连接到旋转矢量点的线段上，但不超过该点，因此该点位于相机后面），否则相机将不会不要看那个点。显然——只是常识——相机的位置也会影响正在观察的点。考虑一下！！

无论相机在哪里，相机方法`lookAt()`都会查看 3D 空间中的一个点。因此，要获得相机正在查看的点，您需要通过调用来调整相机位置：

`vec.add( camera.position );`

还值得一提的是，相机不是在看一个点，而是在向下看无限数量的点，每个点与相机的距离不同。其他答案中的代码返回一个长度正好为一个单位的向量，因为将四元数应用于归一化 z 轴向量 (0, 0, -1) 会返回另一个归一化向量（在不同方向上）。`x`要计算距相机任意距离的观察点，请使用：

`THREE.Vector3( 0, 0, -x ).applyQuaternion( camera.quaternion ).add( camera.position );`

这会在距原点一定距离的 z 轴上取一个点，将其`x`旋转到相机的方向，然后通过添加相机的位置来创建一个“世界点”。我们想要一个“世界点”（而不仅仅是一个“相对于相机点”），因为`camera.lookAt()`也需要一个“世界点”作为参数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-22T04:32:14.533

我所做的是在渲染场景之前使用方法lookAt（Vector），如下面的代码，只需在新的html文件上尝试使用它:)

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <style >
      *{
        margin: 0 ;
      }
      #WebGlElement {
        height: 500px;
        width:  500px;
        background-color: red
      }
    </style>
  </head>
  <body>
    <script src="js/three.min.js"></script>

    <div id="WebGlElement"></div>

    <script>
      var contianer = document.getElementById("WebGlElement");
      var origin = new THREE.Vector3(0,0,0);
      // CREATE THREE BASIC ELEMENTS
      var scene = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera( 40, 300/300, 1, 1000 );

      var renderer = new THREE.WebGLRenderer();
      // SET RENDERER AND ATTACH IT TO BODY
      renderer.setSize( 500, 500 );
      //document.body.appendChild( renderer.domElement );
      contianer.appendChild( renderer.domElement);
      // CREATE A GEOMETRY AND ADD IT TO SCENE

      /*var geometry = new THREE.BoxGeometry( 1, 1, 5 );
      var material = new THREE.MeshBasicMaterial( { color: 0x1abc9c } );
      material.wireframe = true ;
      material.wireframeLinewidth = 0.1 ;
      var cube = new THREE.Mesh( geometry, material );
      scene.add( cube );*/
      var geometry = new THREE.Geometry();
      geometry.elementsNeedUpdate=true;

      geometry.vertices.push(
	      new THREE.Vector3( -0,  1, 0 ),
	      new THREE.Vector3( -1, -1, 0 ),
	      new THREE.Vector3(  1, -1, 0 )
      );
      geometry.faces.push(
        new THREE.Face3( 0, 1, 2 ),
        new THREE.Face3( 2, 1, 0 )
     );

      var material = new THREE.MeshBasicMaterial( { color: 0x1abc9c } );
      //material.wireframe = true ;
      //material.wireframeLinewidth = 0.1 ;
      var cube = new THREE.Mesh( geometry, material );
      scene.add( cube );

      var axisHelper = new THREE.AxisHelper( 1 );
      scene.add( axisHelper );

      // POSITION OF CAMER ON Z
      camera.position.z = 5;
      camera.position.y = 5;
      camera.up = new THREE.Vector3(0,0,1);

      var dir = 1;
      var number = 0.115

      // CREATE FUNCTION FOR RENDER
      var render = function () {

  				requestAnimationFrame( render );
  				//circle.rotation.x += 0.01;
          if ( camera.position.x> 5) {
            dir = -1;
          }
          if ( camera.position.x< -5) {
             dir = 1;
          }
          camera.lookAt(cube.position);

          //camera.rotation.y += 0.015 * dir;
          camera.position.x += number * dir;
          renderer.render(scene, camera);

  	  };

      // EXECUTE FIRST RENDER
      render();

    </script>

  </body>
</html>
```

# git - Github 远程分支和本地 Git 存储库

> ID：15696966
> 
> 赞同：2
> 
> 时间：2013-03-29T03:42:40.543
> 
> 标签：git, github, merge, branch, pull

向我的 Github 添加了一个新分支，但找不到让我的本地仓库“了解”它的方法。我使用主分支（它知道的唯一一个）有我的本地存储库，并且它在它不知道的另一个新远程分支之前进行了几次提交。我想让我的本地 git 知道这个新分支，然后将这些提交推送到新的远程分支。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T05:07:27.167

假设您的远程被调用`origin`（默认）并且分支被调用`feature1`。然后首先你必须做一个拉（或取）。

```
git pull 
```

这会将有关分支的信息带到您的本地存储库。命令的输出应该包括这样的内容

```
 * [new branch]      feature1   -> origin/feature1 
```

之后你做

```
git checkout feature1 
```

这应该创建一个名为 feature1 的本地分支，它将跟踪远程分支，以便您可以拉取和推送到相应的远程。输出应如下所示

```
Branch feature1 set up to track remote branch feature1 from origin.
Switched to a new branch 'feature1' 
```

如果由于某种原因失败，或者您想明确说明它，您可以改为

```
git checkout --track origin/feature1 
```

# android - 无法使用 TextView 从 TimePicker 显示时间

> ID：15696969
> 
> 赞同：0
> 
> 时间：2013-03-29T03:43:19.483
> 
> 标签：android, onclicklistener

我正在创建一个可以播放音乐的闹钟。我使用 TimePicker 显示设置闹钟的时间，并创建了一个带有侦听器的按钮（设置时间），以从 TimePicker 和按钮中捕获时间。我想在手机上使用 TextView (lblAlarmTime) 显示时间。我无法获取要在 TextView 中显示的值。我不知道我的听众是否不正确，或者我试图错误地显示文本。我想在“您的闹钟设置为：”标签下显示捕获的时间。

我是 Android 编程新手。我遵循了 Android Developers/Pickers 中的示例和 Buttons 的侦听器示例。不知道我错过了什么。

这是 XML 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingLeft="16dp"
android:paddingRight="16dp"   
tools:context=".SetAlarmActivity" >

<TextView
    android:id="@+id/alarm_picker_text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"   
    android:gravity="center"          
    android:text="@string/alarm_text1" />

<TextView
    android:id="@+id/lblAlarmTime"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center" 
    android:layout_below="@id/alarm_picker_text1"
    android:text="" />

<TextView
    android:id="@+id/alarm_picker_text2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center" 
    android:layout_below="@id/lblAlarmTime"        
    android:text="@string/alarm_text2" />

<Button
    android:id="@+id/btn_set_time"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_below="@id/alarm_picker_text2" 
    android:layout_alignParentLeft="true"
    android:text="@string/btn_set_time" />

<ToggleButton
    android:id="@+id/togglebutton"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:textOn="On"
    android:textOff="Off"
    android:layout_below="@id/alarm_picker_text2" 
    android:layout_toRightOf="@id/btn_set_time"
    android:onClick="onToggleClicked"/>

<Button
    android:id="@+id/btn_clock"
    android:layout_width="140dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:onClick="displayClock"
    android:text="@string/clock" />

<Button
    android:id="@+id/btn_setAlarm"
    android:layout_width="140dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_toRightOf="@id/btn_clock"
    android:text="@string/set_alarm"/>

<TimePicker
    android:id="@+id/timePicker1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true" />   

</RelativeLayout> 
```

这是代码：

```
public class SetAlarmActivity extends FragmentActivity{

private TimePicker timePicker1;

private Button btnSetAlarm;
private TextView tvDisplayAlarmTime;

static final int TIME_DIALOG_ID = 999;

@SuppressLint("NewApi")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_set_alarm);

    // Make sure we're running on Honeycomb or higher to use ActionBar APIs
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        // Show the Up button in the action bar.
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }                        
}

public Dialog onCreateDialog(Bundle savedInstanceState) {

// Use the current time as the default values for the picker
final Calendar c = Calendar.getInstance();
int hour = c.get(Calendar.HOUR_OF_DAY);
int minute = c.get(Calendar.MINUTE);

addListenerOnButton();

TextView tvDisplayAlarmTime = (TextView) findViewById(R.id.lblAlarmTime);
// Display the time selected in the Text View
tvDisplayAlarmTime.setText("test"+ hour + ":" + minute);        

// Create a new instance of TimePickerDialog and return it
return new TimePickerDialog(this,timePickerListener, hour, minute,
          DateFormat.is24HourFormat(this));
}

    public void addListenerOnButton() {

        final Button btnSetAlarm = (Button) findViewById(R.id.btn_set_time);         
        btnSetAlarm.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // Update the Time Set in the TextView
                TextView tvDisplayAlarmTime = (TextView) findViewById(R.id.lblAlarmTime);
                // Display the time selected in the Text View
                tvDisplayAlarmTime.setText("test");
                //tvDisplayAlarmTime.setText("test"+ mHour + ":" + mMinute);
                //showTimePickerDialog(tvDisplayAlarmTime);

            }
        });
    }

    public void displayClock(View view) {
    /* Called when the user clicks the Clock button */
        Intent intent = new Intent(this, MainActivity.class);
        startActivity(intent);
    }

     // the callback received when the user "sets" the time in the dialog
    private TimePickerDialog.OnTimeSetListener timePickerListener =
        new TimePickerDialog.OnTimeSetListener() {              
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
                int mHour = hourOfDay;
                int mMinute = minute;

                TextView tvDisplayAlarmTime = (TextView) findViewById(R.id.lblAlarmTime);
                // Display the time selected in the Text View
                tvDisplayAlarmTime.setText("test"+ mHour + ":" + mMinute);
                //showTimePickerDialog(tvDisplayAlarmTime);
            }
        };              

/**
 * Set up the {@link android.app.ActionBar}, if the API is available.
 */
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private void setupActionBar() {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }
}

// Display Clock to set Alarm
@SuppressLint("NewApi")
public void showTimePickerDialog(View v) {
   DialogFragment newFragment = new DialogFragment();
   newFragment.show(getFragmentManager(), "timePicker");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:53:43.627

在全局中定义并在 onCreate 方法中初始化 textview 并在对话框中使用它，因为您使用 Fragments 在 onActivityCreated 中初始化它，

```
TextView setTimeText2;
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

TextView setTimeText=(TextView) findViewById(R.id.setTime);}

@Override
public void onClick(View v) {
    switch(v.getId()){

    case R.id.alarmTime:
        openTimePickerDialog(false);
        break;

    }
}
public void openTimePickerDialog(Boolean is24r) {
    timePickerDialog = new TimePickerDialog(
            SetAlarmCall.this,
            onTimeSetListener,
            calNow.get(Calendar.HOUR_OF_DAY),
            calNow.get(Calendar.MINUTE),
            is24r);
    timePickerDialog.setTitle("Set Alarm Time");  
    timePickerDialog.show();
    }
OnTimeSetListener onTimeSetListener
= new OnTimeSetListener(){
    @Override
    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        calSet.set(Calendar.HOUR_OF_DAY, hourOfDay);
        calSet.set(Calendar.MINUTE, minute);
        calSet.set(Calendar.SECOND, 0);
        if(calSet.compareTo(calNow) <= 0){
            //Today Set time passed, count to tomorrow
            calSet.add(Calendar.DATE, 1);
        }
        timeFlag=true;
        sb=new StringBuilder();
        sb.append(calSet.get(Calendar.HOUR)+":");
        if(calSet.get(Calendar.MINUTE)<10)
            {
            sb.append("0"+calSet.get(Calendar.MINUTE)+" ");
            }
        else {
            sb.append(calSet.get(Calendar.MINUTE)+" ");
        }

        if(calSet.get(Calendar.HOUR_OF_DAY)>=12){
            sb.append("PM");
        }
        else{
            sb.append("AM");
        }
        setTimeText2.setText(sb.toString());
    }}; 
```

# cluster-computing - Storm Trident 只能分批做 JOIN 吗？

> ID：15696970
> 
> 赞同：1
> 
> 时间：2013-03-29T03:43:24.903
> 
> 标签：cluster-computing, distributed, apache-storm

我想实现一个 JOIN 语义，我尝试了 Trident 拓扑中的 join 方法。我发现加入是在批次之间进行的。如果两个流之间的连接有数百万个元组，它必须在一个批次内吗？

在genderSpout中，每个batch有3个tuples，所以ageSpout会发出2个batch，每个batch有5个tuples，所以Spout只会发出1个batch

我用 JoinType 做一个 LEFT OUTER JOIN

测试代码的输出是：

```
1 man 15
2 woman 18
1 man 19
3 woman NULL
4 man NULL
1 woman NULL 
```

从输出中，我发现前四个结果连接了来自genderSpout 的第一批和来自ageSpout 的第一批。最后两个结果是来自 genderSpout 的第二批与来自 ageSpout 的空批之间的连接。所以结果对于 JOIN 语义是不正确的，因为我想要的 genderSpout LEFT JOIN ageSpout 的结果是：

```
1 man 15
1 man 19
2 woman 18
3 woman NULL
4 man 20
1 woman 15
1 woman 19 
```

所以我的问题是：如果JOIN的两边（Spout）有数百万个元组，我应该把它们放在一批中以获得正确的结果吗？

或者我走的路是错误的，你能告诉我我应该怎么做才能获得 OUTER JOIN 语义的正确结果？

测试代码如下：

```
public static void main(String[] args) throws Exception{
    Fields genderField = new Field("id", "gender");
    FixedBatchSpout genderSpout = new FixedBatchSpout(genderField, 3,
        new Values("1", "man"),
        new Values("2", "woman"),
        new Values("3", "woman"),
        new Values("4", "man"),
        new Values("1", "woman"));
    genderSpout.setCycle(false);

    Fields ageField = new Field("id2", "age");
    FiexedBatchSpout ageSpout = new FixedBatchSpout(new Fields("id2", "age"), 5,
        new Values("1", "15"),
        new Values("4", "20"),
        new Values("2", "18"),
        new Values("1", "19"));
    ageSpout.setCycle(false);

    List<Stream> allStreams = new ArrayList<Stream>();
    List<Fields> allFields = new ArrayList<Fields>();
    List<Fields> joinFileds = new ArrayList<Fields>();
    List<JoinType> joinTypes = new ArrayList<JoinType>();    

    TridentTopology topology = new TridentTopology();

    Stream genderStream = topology.newStream("genderIn", genderSpout);
    Stream ageStream = topology.newStream("ageIn", ageSpout);

    allStreams.add(genderStream);
    allStreams.add(ageStream);

    allFields.add(genderFields);
    allFields.add(ageFields);

    joinFields.add(new Field("id")));
    joinFields.add(new Field("id2"));

    joinTypes.add(JoinType.INNER);
    joinTypes.add(JoinType.OUTER);

    topology.join(allStreams, joinFields, new Filds("id", "gender", "age"), joinTypes)

    LocalCluster cluster = new LocalCluster();

    Config config = new Config()
    config.setDebug(false);
    config.setMaxSpoutPending(3);

    cluster.submitTopology("trident-join-test", config, topology.build());

    Thread.sleep(3000);
    cluster.shutdown();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:53:41.350

[我在https://groups.google.com/forum/?fromgroups=#!forum/storm-user](https://groups.google.com/forum/?fromgroups=#!forum/storm-user)中问过同样的问题： [https ://groups.google.com/forum/?fromgroups=#!topic/风暴用户/7fxAVgF2_0M](https://groups.google.com/forum/?fromgroups=#!topic/storm-user/7fxAVgF2_0M)

Jason Jackson 的回答是：TridentTopology.join 不会跨批次加入。您可以使用 stateQuery 和 partitionPersist 之一跨批次进行流式连接。

希望有用

# android - 以编程方式在ScrollView中垂直和水平放置Textview布局中心

> ID：15696975
> 
> 赞同：2
> 
> 时间：2013-03-29T03:43:54.163
> 
> 标签：android, android-layout

应用程序具有`scrollview`XML 布局。

```
<ScrollView
        android:id="@+id/container"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="5dp"
       >
</ScrollView> 
```

我想一`textView`进这个`scrollView`中心。

我试过这段代码，设置水平中心，但垂直顶部..我希望两者都居中。

```
LinearLayout l1 = new LinearLayout(getActivity());
            l1.setOrientation(LinearLayout.VERTICAL);
            l1.setGravity(Gravity.CENTER);
            l1.setBackgroundColor(Color.WHITE);
            TextView errorView = new TextView(getActivity());
            LinearLayout.LayoutParams lparams = new LinearLayout.LayoutParams(
                    new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                    new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            errorView.setText("TextView");
            errorView.setTextColor(Color.BLACK);
            errorView.setLayoutParams(params);
            errorView.setGravity(Gravity.CENTER);
            l1.addView(errorView);
            scrollViewCon.addView(l1, lparams); 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T04:54:52.693

如下所示更改您的 xml -
将**fillViewport**添加为 true。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="5dp"
    android:fillViewport="true"
   > 
```

删除了相对布局添加部分，因为它不是必需的。

# powershell - PowerShell Tee-Object 不覆盖文件

> ID：15696976
> 
> 赞同：5
> 
> 时间：2013-03-29T03:43:55.970
> 
> 标签：powershell, powershell-2.0

我正在尝试创建一个应用程序，该应用程序使用[Tee-Object](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Utility/Tee-Object?view=powershell-5.1)将变量放入文件（minedown.conf）中，但每次它向文件中添加内容时都会覆盖它。我正在使用

```
$account = Read-Host "Enter your Account SID number"
"account = $account" | Tee-Object -FilePath c:\minedown\minedown.conf
$token = Read-Host "Enter your Authority Token"
"token = $token" | Tee-Object -FilePath c:\minedown\minedown.conf
$from = Read-Host "Enter your Twilio number"
"from - $from" | Tee-Object -FilePath c:\minedown\minedown.conf 
```

我试图让每一个都成为一个单独的行。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T10:18:29.847

顺便说一句，在 PowerShell 3.0 中，-Append 开关已添加到`Tee-Object`cmdlet。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T04:10:19.037

`Tee-Object`不是你要找的Cmd，`Set-content`试试看`Add-Content`。

```
$account = Read-Host "Enter your Account SID number"
"account = $account" | Set-content -Path c:\minedown\minedown.conf
$token = Read-Host "Enter your Authority Token"
"token = $token" | Add-Content -Path c:\minedown\minedown.conf
$from = Read-Host "Enter your Twilio number"
"from - $from" | Add-Content -Path c:\minedown\minedown.conf 
```

的目的`Tee-Object`实际上是在管道序列中充当“T”，以便将数据从输入发送到输出以及文件或变量（例如，为了调试管道序列）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T16:27:59.897

如前所述， Tee-Object（别名`tee`）用于将输出分成两个方向。在 Linux ( `tee`) 上，它对于进入屏幕和文件很有用。在 PowerShell 中，它更多地用于将其放到屏幕上并将其扔回管道以及其他东西，但不能执行 Append。不是你想要的。

但是，我需要以 Linux 的方式将其显示在屏幕上以及写入文件（以附加模式）。所以我用下面的方法先把它写到管道上，然后把它放到屏幕上（用颜色），然后把它放到一个文件中，这个文件被附加到而不是被覆盖。也许它对某人有用：

```
Write-Output "from - $from" | %{write-host $_ -ForegroundColor Blue; out-file -filepath c:\minedown\minedown.conf -inputobject $_ -append} 
```

# android - 如何从另一个 Activity 访问与不同 Activity 关联的不同布局的 id，以及如何在其上执行 onClick

> ID：15696987
> 
> 赞同：2
> 
> 时间：2013-03-29T03:45:03.297
> 
> 标签：android

我`fragments`的应用程序有不同的布局，它们有不同的布局，所以我想`layout ids`从不同的活动中访问 ex `button`，`textview`。

我有一个`fragment` 被调用的`MyFragment`，它有一个布局文件`frag.xml`和一个`MainActivity`带有布局的`main.xml`.in`frag.xml`我有

```
<Button
android:id="@+id/myButton"
android:layout_width="wrap_content"
android:layout_height="wrap_content"/> 
```

我想像这样访问in的 id `Button`，如果我 像这样访问它，我该如何访问它，它会抛出一个.also 我想为那个按钮执行事件。`farg.xml``MainActivity``Button button=(Button)findViewById(R.id.myButton);``NullPointerException``onClick()``MainActivity`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:10:40.650

`R.id.myButton`是您如何引用按钮的 id。但是，该按钮仅在 的视图层次结构中可用`frag.xml`。因此，如果按钮在您调用的上下文的视图层次结构中不存在，则`findViewById(R.id.myButton)`应该返回。 `null``findViewById(R.id.myButton)`

要从主要活动访问片段中的按钮，您必须编写一个主要活动可以在片段上调用的方法，然后让片段完成访问/修改按钮并将您需要的任何信息返回到主要活动的工作.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T04:32:46.497

您可以通过以下方式找到按钮的 ID

```
buttonid = getResources().getIdentifier(myButton , "Button", getPackageName()); 
```

第一个参数是@+id 后面的XML 名称，第二个是类型，第三个是你的包名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:49:10.793

找到每个片段的主布局并将它们存储在一个类的**静态**数组中。您可以在每个片段中找到您的视图并将其存储在一个类的静态字段中（可能是另一个类）：

```
class Store{
public static view;
} 
```

在片段中：

```
Stroe.view = (Button)findViewById(R.id.myButton); 
```

在活动中：

```
Button btn = Store.view; 
```

# sql - 在 ruby on rails 上过滤和排序

> ID：15696989
> 
> 赞同：0
> 
> 时间：2013-03-29T03:45:05.210
> 
> 标签：sql, ruby-on-rails, ruby, rails-activerecord

我正在使用以下 ActiveRecord 查询，但我不确定这是否是正确的做事方式。

我有一个模型需要过滤和排序。

`Match.where("host_id = #{self.id} OR guest_id = #{self.id}").order('week asc')`

然后将其翻译为：

`SELECT "matches".* FROM "matches" WHERE (host_id = 1 OR guest_id = 1).`

这让我相信排序不是在数据库级别完成的。

有没有一种方法可以强制它在数据库级别进行排序，而无需编写显式 SQL 查询？

排序是在数据库中进行还是在它被拉过来之后进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:25:20.693

使用 sort / sort_by 方法或尝试 `Match.where("host_id = #{self.id} OR guest_id = #{self.id} ORDER BY week ASC")` 使用 .to_sql

# extjs - Sencha Touch 2商店获得记录

> ID：15696990
> 
> 赞同：0
> 
> 时间：2013-03-29T03:45:08.340
> 
> 标签：extjs, get, touch, store, record

我有个问题。

我有 2 个商店文件（1 个活动和 1 个地点）。我正在从数据库中加载这些商店。现在的问题是，在事件存储中有一个名为 {id_place} 的字段。此字段包含一个数字，该数字也是位置存储中的数字。现在我需要做的是从 {id_place} 的位置获取名称。所以 {name} 是位置存储中的一个字段。所以我需要一个从另一家商店获取记录然后从该商店获取{name}的函数。所以我将 id_place 发送到 placestore，然后我需要找到具有该 id 的记录，并且我需要从该记录中获取字段 {name}。我不知道我是否有道理，这有点难以解释。我希望这可以做到。

提前致谢！

编辑：

```
showPlace: function(id_place){
                var placeUrl = 'http://admin.hishanghai.info/sencha/places.php?action=read&callback=callback&id=' + id_place;
                store = new Ext.data.Store({
                    model: 'android.model.Placesmodel',

        autoLoad: true,
                    proxy: {
                        type: 'scripttag',
                        url: placeUrl,
                        reader: {
                            type: 'json',
                            rootProperty: 'place'
                        },
                        extraParams: {
                            action: 'read'
                        }
                    }

                })
                //var naam = Ext.getStore('Placesstore').getById('id_place').get('name')
                //var Record = store.getAt(id_place);
                //var naam = store.getById('id_place').get('name');
                var naam = store.get('name');
                return naam;

                 } 
```

此代码使用来自 1 条记录的信息创建一个商店。现在我只需要访问名称字段。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:05:41.080

找到了：

```
 showPlace: function(id_place){
            var placesstore = Ext.getStore('Placesstore');
            var i =0;
            var placeid = 0;
            var aRecord;
            while(placeid != id_place){
                aRecord = placesstore.getAt(i);
                placeid = aRecord.data.id;
                i+=1;
                }
            var naam = aRecord.data.name;
            return naam;
             } 
```

# iphone - 如何将带有参数的 API URL 发布到 Instagram API

> ID：15696992
> 
> 赞同：2
> 
> 时间：2013-03-29T03:45:53.873
> 
> 标签：iphone, ios, objective-c, api, instagram

在 Instagram 上对用户进行身份验证后，我试图接收我的 access_token。我已经收到了我应该发布的特殊代码，然后收到 access_token。

在我的 iPhone 应用程序中，我将如何使用以下参数向 access_token 端点进行 HTTP POST？

参数：

1.  client_id：您的客户 ID
2.  client_secret：您的客户端密码
3.  grant_type：authorization_code 目前是唯一支持的值
4.  redirect_uri：你在授权请求中使用的redirect_uri。注意：这必须与授权请求中的值相同。
5.  代码：您在授权步骤中收到的确切代码。

我很确定端点网址是“ [https://api.instagram.com/oauth/access_token](https://api.instagram.com/oauth/access_token) ”

# java - 使用内部框架时，主面板重绘无法正常工作

> ID：15696994
> 
> 赞同：0
> 
> 时间：2013-03-29T03:46:01.670
> 
> 标签：java, swing, panel, frame, repaint

我有以下错误/问题，我还没有在网上找到解决方案或有类似问题的人的例子。基本上我有一个包含相同大小的面板（充当主面板）的主框架和当您按“Enter”时，会弹出一个内部框架（在 playersprite 所在的顶部）充当库存，然后将控制权传递给它，如果再次按“Enter”，则库存被销毁并将控制权传回给主面板。

调用重绘函数，然后重绘角色和地图，这在大约 90% 的时间里工作。当库存被销毁时，其他 10% 或更少的时间似乎调用了重绘（并且工作），除了没有绘制它就好像它在被破坏的面板上绘制一样，因为如果我在主面板（屏幕）上添加一个调用重绘的调试按键，一切都会恢复正常。

当然，我可以在 run() 方法中的每个循环中重新绘制角色，但这太糟糕了，因为我只会在发生变化时重新绘制（即我移动了）

我删除了所有移动和其他代码，因为它们没有用，并且仍然遇到以下代码的问题。您可以将 Character 类视为一个普通绘制的正方形。任何人都知道为什么会发生这种情况？

```
public class main extends JFrame implements Runnable{
    private boolean gameRunning=true;
    private Character Link;
    private MainScreen theScreen;
    public final int ScreenHeight=500;
    public final int ScreenWidth=500;
    public boolean inMenu=false;
    Block ablock=new Block(200,200);
    public class Inventory extends JInternalFrame{
        public Inventory(){
            setBounds(25,25,300,300);
            setDefaultCloseOperation(HIDE_ON_CLOSE);
            setVisible(true);
            addKeyListener(new KeyAdapter() {
                public void keyPressed(KeyEvent e){
                    int key=e.getKeyCode();
                    if(key==KeyEvent.VK_ENTER){
                    try{                                    
                        setClosed(true);
                        theScreen.requestFocusInWindow();
                        theScreen.repaint();
                        inMenu=false;
                    }                               
                    catch(Exception ex){}
                    }
            }});
        }
    }
    class MainScreen extends JPanel{
        MainScreen(){
            super();
            setIgnoreRepaint(true);
            setFocusable(true);
            setBounds(0,0,ScreenWidth,ScreenHeight);
            setVisible(true);
            setBackground(Color.white);
        }
        public void paintComponent(Graphics g){
            super.paintComponent(g);
            Link.draw(g);
            g.drawImage(ablock.getImg(),ablock.getX(), ablock.getY(),null);
        }
    }
    main(){
        super();
        final JDesktopPane desk = new JDesktopPane();
        theScreen=new MainScreen();
        add(theScreen);
        theScreen.addKeyListener(new KeyAdapter() {
            public  void keyPressed(KeyEvent e){
                int key=e.getKeyCode();
                if(key==KeyEvent.VK_ENTER){
                    inMenu=true;
                    Inventory myInventory=new Inventory();
                    desk.add(myInventory);
                    myInventory.requestFocusInWindow();
                }
            }   
    });
        add(desk);
        try {
            UIManager.setLookAndFeel(
                    UIManager.getSystemLookAndFeelClassName());

            }
        catch (Exception e) {}
        setTitle("Project X");
        setResizable(false);
        Link=new Character();
        setSize(500,500);
        setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }
    public static void main(String[] args) {
        main Game=new main();
        new Thread(Game).start();
    }
    public void run(){
            //omitted/irrelevant only contains  a FPS count
          }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T03:48:33.637

不要使用 KeyListener。使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

不要使用线程。使用 Swing Timer 制作动画，以便在 EDT 上完成更新。

不要将内部框架用于弹出窗口。使用 JDialog。

在 JPanel 而不是 JDesktopPane 上进行自定义绘制。

不要使用 setIgnoreRepaints()。用于主动渲染。

不要使用空的 catch 子句。

使用标准 Java 命名约定。类以大写字符开头，变量名不是。

不要使用 setBounds()。使用布局管理器。

# android - 异步android json解析器android-空指针异常

> ID：15696995
> 
> 赞同：0
> 
> 时间：2013-03-29T03:46:02.373
> 
> 标签：android, json, android-asynctask

从我上一篇文章中得知，我需要使用异步任务从 url 解析 json，已经完成了相同的操作并附在下面，

```
public class ReadJson extends ListActivity {
private static String url = "http://docs.blackberry.com/sampledata.json";

private static final String TAG_VTYPE = "vehicleType";
private static final String TAG_VCOLOR = "vehicleColor";
private static final String TAG_FUEL = "fuel";
private static final String TAG_TREAD = "treadType";

ArrayList<HashMap<String, String>> jsonlist = new ArrayList<HashMap<String, String>>();

ListView lv ;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_read_json);
    new ProgressTask(ReadJson.this).execute();
}
private class ProgressTask extends AsyncTask<String, Void, Boolean> {
    private ProgressDialog dialog;
    // private List<Message> messages;
    public ProgressTask(ListActivity activity) {
        context = activity;
        dialog = new ProgressDialog(context);
    }
    /** progress dialog to show user that the backup is processing. */
    /** application context. */
    private Context context;
    protected void onPreExecute() {
        this.dialog.setMessage("Progress start");
        this.dialog.show();
    }
    @Override
    protected void onPostExecute(final Boolean success) {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }
        ListAdapter adapter = new SimpleAdapter(context, jsonlist,
                R.layout.list_item, new String[] { TAG_VTYPE, TAG_VCOLOR,
                TAG_FUEL, TAG_TREAD }, new int[] {
                R.id.vehicleType, R.id.vehicleColor, R.id.fuel,
                R.id.treadType });
        setListAdapter(adapter);
        // selecting single ListView item
        lv = getListView();
    }
    protected Boolean doInBackground(final String... args) {
        JSONParser jParser = new JSONParser();
        JSONArray json = jParser.getJSONFromUrl(url);
        for (int i = 0; i < json.length(); i++) {
            try {
                JSONObject c = json.getJSONObject(i);
                String vtype = c.getString(TAG_VTYPE);
                String vcolor = c.getString(TAG_VCOLOR);
                String vfuel = c.getString(TAG_FUEL);
                String vtread = c.getString(TAG_TREAD);
                HashMap<String, String> map = new HashMap<String, String>();
                map.put(TAG_VTYPE, vtype);
                map.put(TAG_VCOLOR, vcolor);
                map.put(TAG_FUEL, vfuel);
                map.put(TAG_TREAD, vtread);
                jsonlist.add(map);
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
        return null;
    }
} 
```

}

当我执行此操作时，我在行中的 asyc 背景中执行错误时得到空指针异常，对于 (int i = 0; i < json.length(); i++)，尝试了几件事但没有工作，任何帮助都将是 gr8ly赞赏！！

编辑 1：添加解析器代码

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONArray jarray = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONArray getJSONFromUrl(String url) {

        StringBuilder builder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);
        try {
            HttpResponse response = client.execute(httpGet);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) {
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    builder.append(line);
                }
            } else {
                Log.e("==>", "Failed to download file");
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        // try parse the string to a JSON object
        try {
            jarray = new JSONArray( builder.toString());
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jarray;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:55:42.433

我认为您似乎正在使用[这个 JSONParser](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)。似乎正在发生的事情是，您有一个未生成有效 JSON 的 URL，这导致在`Exception`途中的某个地方被抛出并被捕获在类中 - 很可能在`jObj = new JSONObject(json);`队列中。最终结果是返回的变量仍然是`null`. 因此，当您`json.length()`在循环中调用时，您是在尝试调用`length()`一个`null`对象。您应该在进入循环之前对其进行检查，以确保它不是`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:51:18.393

我认为，您没有从服务器获得有效的 JSON 格式。在解析之前检查从您的服务器获得的响应，这是代码片段，这里传递 url 并获取 yourReponseInJSONStr 检查 logcat 中的响应字符串是否为正确的 JSON 格式，然后执行解析操作。

```
 try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(
                        url);

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            ResponseHandler<String> responseHandler = new BasicResponseHandler();

            String yourReponseInJSONStr = httpclient.execute(httppost,
                    responseHandler);

            Log.d("yourReponseInJSONStr ", yourReponseInJSONStr );

                    JSONObject yourJsonObj = new JSONObject(yourReponseInJSONStr);

} catch (Exception e) {
            e.printStackTrace();
        } 
```

你也可以继续解析这段代码，希望对你有帮助，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T04:56:02.307

试试这个来获取 json

```
public static String getJSONString(String url) {
    String jsonString = null;
    HttpURLConnection linkConnection = null;
    try {
        URL linkurl = new URL(url);
        linkConnection = (HttpURLConnection) linkurl.openConnection();
        int responseCode = linkConnection.getResponseCode();
        if (responseCode == HttpURLConnection.HTTP_OK) {
            InputStream linkinStream = linkConnection.getInputStream();
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            int j = 0;
            while ((j = linkinStream.read()) != -1) {
                baos.write(j);
            }
            byte[] data = baos.toByteArray();
            jsonString = new String(data);
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (linkConnection != null) {
            linkConnection.disconnect();
        }
    }
    return jsonString;
}

public static boolean isNetworkAvailable(Activity activity) {
    ConnectivityManager connectivity = (ConnectivityManager) activity
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    if (connectivity == null) {
        return false;
    } else {
        NetworkInfo[] info = connectivity.getAllNetworkInfo();
        if (info != null) {
            for (int i = 0; i < info.length; i++) {
                if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                    return true;
                }
            }
        }
    }
    return false;
} 
```

使用 isNetworkAvailable 检查连接

我这样解析

```
try {

                JSONObject jObjectm = new JSONObject(result);
                JSONObject jObject=jObjectm.getJSONObject("items");
                  if(jObject!=null)
                  {
                    Iterator<?> iterator1=jObject.keys();
                         LinkedHashMap<String,LinkedHashMap<String, Object> > inneritem = new LinkedHashMap<String, LinkedHashMap<String, Object> >();
                        while (iterator1.hasNext() ){
                            Item hashitem=new Item();
                               String key1 = (String)iterator1.next();
                               JSONObject jObject1=jObject.getJSONObject(key1);
                               Iterator<?> iterator=jObject1.keys();
                                 LinkedHashMap<String, Object> inneritem1 = new LinkedHashMap<String, Object>();
                                while (iterator.hasNext() ){

                                    String key =(String) iterator.next();

                                  inneritem1.put(key, jObject1.get(key));

                                }
                                 hashitem.setItem(key1,inneritem1);
                                inneritem.put(key1,inneritem1);
                                arrayOfList.add(hashitem); 
                        }

                  }
                } catch (JSONException e) {

                    System.out.println("NO Json data found");
                } 
```

# c - 可可系统（）进展？

> ID：15696997
> 
> 赞同：2
> 
> 时间：2013-03-29T03:46:04.227
> 
> 标签：c, macos, cocoa, system

我正在创建一个必须使用该`system(const char*)`功能来完成一些“繁重工作”的应用程序，并且我需要能够为用户提供一个粗略的进度百分比。例如，如果操作系统正在为您移动文件，它会为您提供一个进度条，其中显示移动的数据量和要移动的数据量显示在窗口上。我需要这样的东西。如何才能做到这一点？

编辑：基本上，我让用户可以选择以压缩格式保存文件。如果他们这样做，它会正常保存，然后运行以下代码：

```
char* command = (char*)[[NSString stringWithFormat:@"tar -jcvf %@.tar.bz2 %@", saveurl.path, filename] cStringUsingEncoding:NSUTF8StringEncoding];
system(command); 
```

有时这需要一点时间（该应用程序处理视频文件），所以我希望能够给他们一个估计的完成时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T03:56:06.873

> 我正在创建一个必须使用该`system(const char*)` 功能来完成一些“繁重工作”的应用程序

不，它不必这样使用`system()`。事实上，它不应该。还有很多其他用于运行子进程的 API，几乎所有这些 API 都会更好。在 Cocoa 中，最明显更好的选择是`NSTask`.

在任何情况下，除了子流程本身之外，没有什么可以说明子流程正在取得多少进展。如果您正在运行的程序不提供报告进度的方法，那么希望渺茫。没有其他东西可以预测子流程的目的或目标是什么，更不用说判断它距离实现该目标还有多远。

即使该程序确实报告了进度，您也需要一种方法来接收该信息。 `system()`不允许这样做。 `NSTask`就像`popen()`手动分叉和执行程序一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T03:55:30.543

您将需要一个命令行程序，该程序具有将进度信息传达回您的应用程序的方式（或者可能只是将进度信息写入您在可可应用程序中解析的日志文件）。你确定你真的需要这样做吗？

对于您编辑的示例，您可能会考虑仅放置某种微调器或沙漏类型的 UI 指示器，以向他们显示正在写入，同时允许他们继续其他工作。您无法预测存档创建时间，尤其是当您对其添加压缩时。

# tcp - 远程服务器推送通知到 arduino（以太网）

> ID：15696998
> 
> 赞同：6
> 
> 时间：2013-03-29T03:46:06.470
> 
> 标签：tcp, udp, arduino, push

我想主动从服务器发送消息，例如使用 UDP/TCPIP 到使用 arduino 的客户端。众所周知，如果用户有端口将特定端口转发到本地网络上的设备，这是可能的。但是我不想让用户手动进行端口转发，也许使用其他协议，这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:25:44.173

# 1 Arduino 侧

我认为最接近这一点的方法是从 arduino 打开与服务器的连接，然后使用[available](http://arduino.cc/en/Reference/ClientAvailable)等待服务器将一些数据流式传输到 arduino。您的代码将轮询打开的连接，但您要避免所有来回通信以打开和关闭连接，来回传递标头等。

# 2 服务器端

这意味着大部分工作将在服务器端，您需要管理打开的连接，以便在用户触发某些需要将消息推送到 arduino 的事件时立即写入它们。如何做到这一点会有所不同，具体取决于您正在运行的服务器应用程序类型。

## 2.1 Node.js 主要问题的“演练”

例如，在 Node.js 中，您可以`res.write()`在不关闭连接的情况下建立连接 - 这应该会产生与 arduino 的开放串行连接类似的效果。这给您留下了管理连接的问题 - 服务器是否应该定期检查数据库以获取 arduino 的消息？这只是从轮询链接中删除了一个链接`arduino -> server -> database`，因此我们应该能够做得更好。

我们可以附加一个由消息添加到数据库的**事件**触发的函数。[Node-orm2](http://dresende.github.com/node-orm2/)是 node.js 的数据库*对象关系模型*驱动程序，它提供了诸如**afterSave**和**afterCreate之类的****钩子**，您可以将它们用于此类事情。***根据您的应用程序，您最好不要使用数据库，而只使用 javascript 对象。***

 ******那么剩下的唯一问题是：一旦钩子被激活，我们如何将正确的连接放入范围以便我们可以写入它？好吧，您可以将请求中的所有相关数据保存到某个全局数据结构中，也许是一个以 arduino ID 作为索引的字典，然后在触发的函数中获取所有数据，即请求*上下文*并写入它！

请参阅[此博客文章](https://go-left.com/blog/programming/long-polling-with-node-js/)以获取一个很好的示例，包括管理打开连接、正确关闭它们以及在超时时从内存中清除等的 node.js 代码。

# 3 结论

我自己还没有对此进行测试——但我计划这样做，因为我已经有一个使用 arduino 和 node.js 的现有应用程序，该应用程序目前是使用普通轮询实现的。希望我能尽快解决它并带着结果返回这里。

通常在长轮询中（根据我的阅读），一旦数据被发送回客户端（arduino），连接就会关闭，尽管我不明白为什么这是必要的。我计划尝试为多条消息保持打开相同的连接，仅在固定时间间隔后关闭以重新建立连接 - 我希望将此间隔设置得相当高，可能是 5-15 分钟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-26T17:12:39.880

我们使用 Pubnub 向客户端 Web 浏览器发送通知，以便用户可以立即知道他们何时收到“消息”和类似的东西。它工作得很好。

这似乎与您正在查看的限制相同：没有静态 IP，没有端口转发。理论上，用户可以将其插入...

看起来 Pubnub 有一个 Arduino 库： [https ://github.com/pubnub/arduino](https://github.com/pubnub/arduino)******