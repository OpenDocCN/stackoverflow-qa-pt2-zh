# StackOverflow 问答 15624000-15624999

# django - 没有会话的自定义用户

> ID：15624004
> 
> 赞同：1
> 
> 时间：2013-03-25T20:21:09.423
> 
> 标签：django

在 Django 1.5 中，我想通过继承 AbstractUser 来创建自定义用户。但是我无法弄清楚如何同时执行此操作和禁用会话，因为 Django 似乎有一堆依赖项。注意：我尝试从 settings.py 的 MIDDLEWARE_CLASSES 元组中删除 'django.contrib.sessions.middleware.SessionMiddleware'。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:35:33.213

看看这家伙如何使用中间件禁用某些请求的会话：[在 Django 中禁用会话创建](https://stackoverflow.com/questions/4052473/disable-session-creation-in-django)

您可以使用它，但是对于所有请求。

# android - 如何将 ArrayList 传递给另一个活动

> ID：15624006
> 
> 赞同：0
> 
> 时间：2013-03-25T20:21:13.530
> 
> 标签：android

我正在尝试以这种方式将 ArrayList 传递给我的新活动：

```
Intent it = new Intent(activity, DownloadSelectionActivity.class);
            it.putExtra("anos", yearList);
            activity.startActivity(new Intent(activity, DownloadSelectionActivity.class)); 
```

我的 yearList 没问题，我可以看到 Log 中的所有值，但是当我尝试使用下面的代码获取它时，它返回 NullPointerExcepetion：

```
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.activity_downloadselection);

        ArrayList<Integer> anosLista = (ArrayList<Integer>) getIntent().getSerializableExtra("anos");

        for (Integer anos : anosLista) {
            Log.d(Constants.DOWNLOAD_SELECTED_ACTIVITY, String.valueOf(anos));
        } 
```

例外：

```
03-25 20:11:18.144: E/AndroidRuntime(7899): FATAL EXCEPTION: main
03-25 20:11:18.144: E/AndroidRuntime(7899): java.lang.RuntimeException: Unable to start activity ComponentInfo{br.com.facilit.target.app.android/br.com.facilit.target.app.android.DownloadSelectionActivity}: java.lang.NullPointerException
03-25 20:11:18.144: E/AndroidRuntime(7899):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at android.os.Looper.loop(Looper.java:137)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at java.lang.reflect.Method.invokeNative(Native Method)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at java.lang.reflect.Method.invoke(Method.java:511)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at dalvik.system.NativeStart.main(Native Method)
03-25 20:11:18.144: E/AndroidRuntime(7899): Caused by: java.lang.NullPointerException
03-25 20:11:18.144: E/AndroidRuntime(7899):     at br.com.facilit.target.app.android.DownloadSelectionActivity.onCreate(DownloadSelectionActivity.java:26)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at android.app.Activity.performCreate(Activity.java:5104)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-25 20:11:18.144: E/AndroidRuntime(7899):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-25 20:11:18.144: E/AndroidRuntime(7899):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T20:22:45.160

利用

```
activity.startActivity(it); 
```

代替

```
activity.startActivity(new Intent(activity, DownloadSelectionActivity.class)); 
```

开始`DownloadSelectionActivity`。目前，您没有通过`it`ArrayList 传递 Intent () 来启动下一个 Activity。相反，您通过创建*另一个*Intent 来忽略它。

# c++ - C++ 共享互斥体，按引用返回

> ID：15624010
> 
> 赞同：3
> 
> 时间：2013-03-25T20:21:20.193
> 
> 标签：c++, multithreading, thread-safety

我有一个与此问题相关但未得到回答的问题：

[boost shared_mutex（多次读取/一次写入）的示例？](https://stackoverflow.com/questions/989795/example-for-boost-shared-mutex-multiple-reads-one-write)

我了解当操作在成员函数范围内时，排他锁是如何工作的。我的问题是，按引用返回函数呢？考虑以下（伪代码）：

```
class A {
    shared_mutex _mutex;
    std::string _name;

public:
    const std::string& name() const {shared_lock(_mutex); return _name;}
} 
```

然后假设我在代码中做了这样的事情：

```
A obj;
if (obj.name().length() >0) { ... }; 
```

我的直觉告诉我这可能不是线程安全的，因为在调用 length() 函数时互斥锁已经超出了范围，但我不知道。

我想我也是在问大局，如果我试图使对象成为线程安全的，我应该完全避免通过引用返回吗？难道它不能让某人做这样的事情：

```
A obj;
std::string& s = obj.name();
(at this point lock is out of scope)
s = "foo";  // does this change the original object's member since it is a reference? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:35:10.383

它不是线程安全的，因为在返回`mutex`之后将被释放，`name()`并且另一个线程可以`_name`在调用之前或期间`std::string::length()`或之后开始修改，并且`_name`在进入.`{...}``if`

要使对象线程安全，请确保对对象的所有访问都在锁定`_name`时发生。`mutex`这意味着确保对的引用`_name`不返回给调用者或不传递给提供给（未在原始代码中发布的虚构成员函数）的成员函数的回调，`A`因为此回调可以缓存`_name`未来的地址，不同步， 利用。

相反，按值返回或传递（并创建`_name`互斥锁锁定时的副本）：

```
// Must be mutable to be modifiable
// in a const member function.
mutable shared_mutex _mutex;

std::string name() const
{
    // Must not create a temporary shared_lock,
    // otherwise the lock will be released immediately.
    // So give the shared_lock a name.
    shared_lock lk(_mutex);
    return _name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:39:45.143

只需更改此功能声明：

```
const std::string& name() const ... 
```

对此。

```
std::string name() const ... 
```

然后，您将返回该字符串的副本。 *（而且由于它是副本，因此不需要是`const`）*。

该代码将是线程安全的，并且任何编译器优化都将保持这种安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:56:31.720

大概出于性能原因，您正在使用 shared_mutex （而不是普通互斥锁），但是复制字符串会很昂贵。也可能大括号内的代码`if (obj.name().length() >0) { ... }`将进一步操作字符串。如果是这种情况，那么您需要获取整个操作的互斥锁，否则您将遇到竞争条件。（例如，您复制`name`，取其长度，然后其他人将其缩短`name`为长度为 0。大括号中的代码现在将对 的长度做出错误的假设`name`。）

如果可能，您可以考虑将要操作字符串的代码设为`class A`.

```
class A {
  shared_mutex _mutex;
  std::string _name;

public:
   rettype my_operation() {
     shared_lock lk(_mutex);
     if (_name.length() >0) { ... };
   }
}; 
```

还有其他选择，但它们都涉及在您依赖不变持有的整个时间段内持有共享锁。

# visual-studio-2010 - VS2012 发布网页向导

> ID：15624011
> 
> 赞同：1
> 
> 时间：2013-03-25T20:21:21.507
> 
> 标签：visual-studio-2010, visual-studio-2012

我正在使用 Windows 远程桌面 (RDP) 通过 Cisco 网关连接到我的办公室计算机。在 VS2012 中，我的项目是打开的，我单击了 Build/Publish Web 菜单。Publish Web 向导窗口闪烁了一秒钟然后消失了。它似乎落后于主 VS2012 并使主 VS2012 进入模态模式。它不响应任何鼠标或键盘命令。我不得不使用任务管理器将其杀死，然后重新启动它以重新获得控制权。当我在办公室电脑前时不会发生这种情况。我可以在 VS2012 主窗口前面看到发布向导。这不会发生在我的同事身上，他们也通过 RDP 进行远程办公。我试图查找VS2012的日志，但是我的电脑上没有这样的日志文件。Windows 应用程序日志也没有说太多。任务管理器进程选项卡中有 2 个 devenv.exe *32。我杀死了内存较小的那个。它仍然不会使主要的 VS2012 退出模态模式。请帮忙。谢谢。

# c# - 如何使用 LINQ 在类中填充集合？

> ID：15624012
> 
> 赞同：4
> 
> 时间：2013-03-25T20:21:24.733
> 
> 标签：c#, linq

我有以下内容：

```
 foreach (string applicationName in applicationNames)
     {
     _uow.Applications.Add(
        new Application 
        { 
            Name = applicationName, 
            ModifiedDate = DateTime.Now,
            TestAccounts = (from  testAccountName in testAccountNames
                            select new TestAccount
                            { 
                               Name = testAccountName , 
                               ModifiedDate = DateTime.Now 
                           })
        });
     } 
```

这样做的问题是它在选择时在 VS2012 IDE 中给了我一个错误。这里说：

```
Error   3   Cannot implicitly convert type 
'System.Collections.Generic.IEnumerable<Relational.Models.TestAccount>' to
'System.Collections.Generic.ICollection<Relational.Models.TestAccount>'.
An explicit conversion exists (are you missing a cast? 
```

这是应用程序类：

```
public partial class Application
{
    public Application()
    {
        this.TestAccounts = new List<TestAccount>();
    }

    public int ApplicationId { get; set; }
    public string Name { get; set; }
    public virtual byte[] Version { get; set; }
    public System.DateTime ModifiedDate { get; set; }
    public virtual ICollection<TestAccount> TestAccounts { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T20:24:07.310

Use [ToList](http://msdn.microsoft.com/en-us/library/bb342261.aspx):

```
 foreach (string applicationName in applicationNames)
 {
 _uow.Applications.Add(
    new Application 
    { 
        Name = applicationName, 
        ModifiedDate = DateTime.Now,
        TestAccounts = (from  testAccountName in testAccountNames
                        select new TestAccount
                        { 
                           Name = testAccountName , 
                           ModifiedDate = DateTime.Now 
                       }).ToList()
    });
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:24:41.590

You need a cast to `IList<TestAccount>`.

```
 { 
        Name = applicationName, 
        ModifiedDate = DateTime.Now,
        TestAccounts = (from  testAccountName in testAccountNames
                        select new TestAccount
                        { 
                           Name = testAccountName , 
                           ModifiedDate = DateTime.Now 
                       }).ToList()     // <-- try this
    }); 
```

# list - Lisp 从列表中删除数据

> ID：15624014
> 
> 赞同：2
> 
> 时间：2013-03-25T20:21:31.997
> 
> 标签：list, lisp, predicate

```
'((A 0) (K 1) (E 1) (H 2) (I 2) (G 2) '3 (NIL 3) (J 3) (J 3) '4 (NIL 4) '4 (NIL 4))) 
```

如何从列表中删除`'3`和？`'4`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:30:02.533

在 Lisp 中

```
'3 
```

只是简写

```
(quote 3) 
```

所以你需要使用`remove-if`传递一个谓词函数来检查被传递的元素是否是两个元素的列表，其中第一个元素是符号`quote`。

# jquery - 使用 Jquery 以 HTML 形式传递数组

> ID：15624016
> 
> 赞同：0
> 
> 时间：2013-03-25T20:21:34.030
> 
> 标签：jquery, html, arrays

我正在尝试使用 Jquery 将数组传递给 HTML 表单，如下所示：

```
$('form#'+ID1+' input#myArray').val(theArray); 
```

那么我的表格如下

```
<input type="hidden" id="myArray" name="myArray"> 
```

然后我在调用 Ajax 请求之前进行序列化：

```
var dataString=$('form#grid1').serialize(); 
```

但是在接收脚本上我得到：

```
Uninitialized string offset: 1 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:41:38.837

这是您在问题中显示的最佳猜测。

当您调用以下内容时，由 表示的数组`theArray`被转换为逗号分隔的字符串并放置在隐藏的输入元素中。即使`theArray`是嵌套数组也是如此。

```
$('form#'+ID1+' input#myArray').val(theArray); 
```

但是在服务器上，您试图将发布的“myArray”值视为一个数组，因此您会收到以下错误：

```
Uninitialized string offset: 1 
```

问题是“myArray”不是一个数组，而是一个逗号分隔的字符串。

我建议在将值设置为隐藏输入元素之前将其格式化`theArray`为 JSON，尤其是在它是嵌套数组的情况下。你可以这样做：

```
$('form#'+ID1+' input#myArray').val(JSON.stringify(theArray)); 
```

然后将其解析为服务器端的对象。我从错误消息中猜测您正在使用 PHP，所以您会执行以下操作：

```
$myArray = json_decode($_POST['myArray']); 
```

# asp.net-mvc - 图像文件的必需属性

> ID：15624018
> 
> 赞同：1
> 
> 时间：2013-03-25T20:21:38.160
> 
> 标签：asp.net-mvc, razor

嗨，我遇到了 2 个问题：

1.  我正在使用 requiredif 属性，该属性非常适合其他类型，如文本框、复选框等，但对于这个它不起作用

    [RequiredIf("DoYouAgree", ErrorMessage = "请上传图片徽标。")] [DisplayName("Upload Logo")] string imgfile { get; 放; }

视图中的代码：

```
 @*Browse File*@
     <div class="clear"></div>
    <div class="editor-label grid_2">
     <br /><br />   @Html.LabelFor(model => model.imgfile):
    </div>
    <div style="margin-top:38px;" class="grid_2">
        <input type="file" name="imgfile" id="imgfile" />
    </div>
     <div class="editor-label1 grid_3" style="margin-top:40px;margin-left:80px;" >
        Max file size 299*299 px or 44KB
    </div>
    <br /><br /><br /><br />
    <div class="grid_3 error long" style="margin-left:10px;">
    @Html.ValidationMessageFor(model => model.imgfile)
    </div>
    <br /> 
```

为什么它不适合这个。

1.  我有其他文件只需要必需的属性但是当我点击我的按钮而不上传图片时它也不起作用

提前致谢！

```
[Required(ErrorMessage = "Please upload screenshot image.")]
 [DisplayName("Screen Shots")]
 public string ssimgfile { get; set; } 
```

看法：

```
div style="margin-top:38px; margin-bottom:20px;" class="grid_2">
        <input type="file" name="ssimgfile" id="ssimgfile" />
            <div class="grid_3 error long" style="margin-left:4px;">
             @Html.ValidationMessageFor(model => model.ssimgfile)
            </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:07:18.503

```
I have done my work with javascript:

    $(function () {
        $('form').submit(function () {
            if ($("input[type=radio]:checked").val() == "True") {
                //Logo Image
                var selectedFile = $('#imgfile').val();
                if (selectedFile == "") {
                    alert('please select valid image logo for marketplace');
                    return false;
                }
                else {
                    var fileExtension = ['jpeg', 'jpg', 'png', 'gif', 'bmp'];
                    if ($.inArray($('#imgfile').val().split('.').pop().toLowerCase(), fileExtension) == -1) {
                        alert("You are permited to select only '\n.jpeg','.jpg', '.png', '.gif', '.bmp' formats are allowed.");
                        return false;
                    }
                } 
```

# sql-server-2008 - 连接表中没有内容时的 SQL 选择

> ID：15624024
> 
> 赞同：1
> 
> 时间：2013-03-25T20:21:52.550
> 
> 标签：sql-server-2008, tsql, join, left-join, outer-join

好的。我在一个表中有一些数据，在多个场合引用了另一个表中的一些数据。

表 1 - 主客户表 表 2 - 用户定义字段

假设我有一个查询，显示来自 Table1 的客户端 ID 以及来自 Table2 的所有附加/使用的“使用的定义字段”

```
SELECT t1.Id, t2.udf
FROM Table1 t1
JOIN Table2 t2 ON t1.Id = t2.Index
WHERE t1.EndDate IS NULL AND
      t1.Id = '1234.9876' AND 
```

我会得到以下结果......

```
ID            UDF
1234.9876     100
1234.9876     110
1234.9876     118
1234.9876     124
1234.9876     198
1234.9876     256 
```

现在，假设我想查询同样的事情，并且只获取客户端的 ID，但前提是不存在等于 '194' 的 t2.udf 值。所以，我会简单地得到

```
ID           
1234.9876 
```

...因此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T20:24:16.897

Make the join a LEFT join and filer where t2.Index is null

```
SELECT t1.Id
FROM Table1 t1
LEFT JOIN Table2 t2 ON t1.Id = t2.Index
AND t2.UDF = 194   -- has to be before where clause
WHERE t2.Index IS NULL
AND t1.EndDate IS NULL 
AND t1.Id = '1234.9876'  -- not sure if you want this part 
```

Another way by using NOT EXISTS

```
SELECT t1.Id
FROM Table1 t1
WHERE NOT EXISTS (SELECT 1 FROM  Table2 t2 WHERE t1.Id = t2.INDEX
                AND t2.UDF = 194)
AND t1.EndDate IS NULL 
AND t1.Id = '1234.9876' 
```

See also [JOINS](http://blogs.lessthandot.com/index.php/DataMgmt/DBProgramming/MSSQLServer/sql-advent-2011-day-15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:26:26.953

您可以添加 AND t2.udf not in (select udf from table2 where udf <> '194')。但是@SQLMenace 解决方案更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:26:57.767

这应该这样做。

```
SELECT DISTINCT t1.Id 
FROM Table1 t1
LEFT JOIN Table2 t2 ON t1.Id = t2.Index
WHERE t2.UDF NOT IN (194)
AND t2.Index IS NULL 
```

Select DISTINCT 为您提供满足其他条件的唯一条目，以及第一个 where 子句

```
 t2.UDF NOT IN (194) 
```

Normall 将返回 t2.UDF 不是 194 的 t1 的所有行，但它受 Select Distinct 限制，只能为您提供不同的 id

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T20:27:39.600

尝试以下操作：

```
SELECT t1.Id
FROM Table1 t1
JOIN Table2 t2 ON t1.Id = t2.Index
WHERE t1.EndDate IS NULL AND
      t1.Id = '1234.9876' AND
      t2.udf <> '194' 
```

# android - 当项目已经“选择”时，让 onItemSelectedListener 触发

> ID：15624025
> 
> 赞同：0
> 
> 时间：2013-03-25T20:21:57.020
> 
> 标签：android

我有两个旋转器。当您选择其中一个项目时，所选项目（现在显示在顶部）变为红色。微调器以一种互斥的方式相互关联：如果您在其中选择某些内容，则另一个将返回到最初的（“标题”）选择并变成白色。

这一切都是通过 onItemSelected 侦听器完成的：

```
 sectionSpin.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View arg1,
                int position, long arg3) {
            System.out.println("SECTION SPIN # " + position);               

            issueSpin.setSelection(0);                                      
            ((TextView) issueSpin.getChildAt(0)).setTextColor(Color.parseColor("#FFFFFF"));  
            ((TextView) arg1).setTextColor(Color.parseColor("#E3170D"));
.... 
```

对于“问题微调器”，反之亦然。我的问题是，如果我从一个微调器转到另一个并选择顶部项目，则 onItemSelectedListener 不会注册（println 语句（或者更确切地说，缺少它，向我证明了这一点），因为该项目正在selected 已经被选中。所以什么也没有发生。

我需要的是与 Swing 中的 ButtonGroup 等效的东西，我可以在其中拥有两个看似不同的菜单，但将所有子项添加到一个“互斥”按钮组中，以便一次只能选择一个。android中是否有任何机制可以给我这样的东西，或者任何人都可以帮助我解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:43:46.027

a 不可能为已选择的项目`Spinner`触发其回调。`onItemSelected()`

有一些`Spinner`我无法开始工作的覆盖类的示例。在这个站点上甚至有一个示例覆盖了一些`AbsSpinner`函数以使`Spinner`已选择的触发项成为可能，但不幸的是，由于 API 更改，该示例不再有效。

因此，我认为最好的方法是使用 a `TextView`、 a `Button`（用于降速）和 an 的组合`AlertDialog`来保存`ArrayAdapter`您已经发送到`Spinner`.

您将不得不为`TextView`/`Button`布局进行自定义工作以及更多自定义工作以允许更改列表项的颜色/文本属性，但至少您`DialogInterface.onItemClickedListener()`将始终触发。

# android - 如何在没有弃用方法 findPreference for android 4.0 + 的情况下设置首选项摘要

> ID：15624026
> 
> 赞同：1
> 
> 时间：2013-03-25T20:22:03.150
> 
> 标签：android, deprecated, summary

我想设置一个偏好摘要，通常可以用

```
 EditTextPreference Pref = (EditTextPreference) findPreference(key);

    Pref.setSummary("new summary"); 
```

但是从 Android 4.1 开始，findPreference 会抛出 NPE（？），是否有任何其他方法可以在 preferenceHeaders/preferenceFragment 中设置首选项的摘要？（但不是 xml，我需要汇总值是动态的）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T22:54:50.220

你的问题在别处。`findPreference()`可能已被弃用，但它仍然可以在 API 中使用——如果您使用 Fragments，它就无关紧要了。

请参阅 Android 4.2 源代码，该源代码[`PreferenceActivity`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/preference/PreferenceActivity.java#PreferenceActivity.findPreference%28java.lang.CharSequence%29)清楚地表明该方法仍然可用。

我将它用于我的应用程序中的所有首选项，即使在 4.2.2 上也没有问题。

如果您正在使用`PreferenceFragments`，请注意您应该[`findPreference()`](http://developer.android.com/reference/android/preference/PreferenceFragment.html#findPreference%28java.lang.CharSequence%29)在您的实例上使用该方法，`PreferenceFragment`而不是从`PreferenceActivity`.

有关详细信息，请参阅[此文档](http://developer.android.com/guide/topics/ui/settings.html)。

# php - PHP 请求 URI 从 echo 更改为 MySQL

> ID：15624031
> 
> 赞同：0
> 
> 时间：2013-03-25T20:22:26.970
> 
> 标签：php, wordpress

我正在尝试使用下面的代码在 Wordpress 中跟踪页面 URL。当我回显代码时，它显示正常。当我尝试将其保存到 MySQL 时，它显示了一个完全不同的 URL。

`$pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];`

`echo $pageURL;`显示**mysite.com/foo/bar**

通过添加到 MySQL`update_user_meta($user->ID, 'last_active_url', $pageURL);`

wp_usermeta.last_active_url 字段显示**mysite.com/fontawesome/css/bootstrap.min.css**

关于变量为什么发生变化的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:25:44.017

## 这是一个不同的要求

如果以下显示`mysite.com/foo/bar`

```
echo $pageUrl; 
```

数据库数据说`mysite.com/fontawesome/css/bootstrap.min.css`

那么*最后*更新数据库的请求不是您正在调试的请求。

## 该页面正在请求一个缺少的 css 文件

最有可能发生的事情是：

*   要求`/foo/bar`
*   写“last_active_url”为`/foo/bar`
*   呈现的 HTML
*   请求`/fontawesome/css/bootstrap.min.css`- 文件不存在。
*   写“last_active_url”为`/fontawesome/css/bootstrap.min.css`

即，单个请求中的变量没有变化 - 它立即被*下一个*请求覆盖，该请求是生成的 html 请求的资产。

# c++ - 地形 GeoMipMapping LOD - 消除裂缝

> ID：15624032
> 
> 赞同：1
> 
> 时间：2013-03-25T20:22:30.097
> 
> 标签：c++, opengl

我正在使用带有 VBO 和索引等的现代 OpenGL。

首先我从高度图加载地形，然后将其划分为块（在我的情况下为 128x128）我将所有顶点加载到 VBO（对于每个地形块）然后我有 4 个 LOD 级别 - 索引表 - 它是非常静态的。

在渲染时，我只是根据与相机的距离来选择块

```
 if(distance > 768.0)
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, cells[i].elementbuffer_lod4);
    else if(distance > 512.0)
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, cells[i].elementbuffer_lod3);
    else if(distance > 128.0)
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, cells[i].elementbuffer_lod2);
    else
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, cells[i].elementbuffer_lod1); 
```

在这里我遇到了一个问题。一切正常，但我在不同的 lod 级别块之间有非常难看的裂缝。我在谷歌搜索时发现了这样的pdf：http://www.flipcode.com/archives/article_geomipmaps.pdf[我](http://www.flipcode.com/archives/article_geomipmaps.pdf)理解这个想法，但我真的不知道如何使用VBO（上图）来实现它。我很乐意听到一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T16:34:25.703

请注意，索引缓冲区独立于您正在渲染的块。相同的索引缓冲区可以（重新）用于不同的块（我选择突出显示这一点，因为我不明白为什么您在绘图调用中对 cells[i] 有这种依赖性）。

然后对于一个块，您需要考虑其 4 个相邻块的细节级别 (LOD)。如果所有 4 个相邻块都具有与这个相同的 LOD，那么除了您已经在做的事情之外，没有什么可做的了。如果此块连接到具有较低 LOD 的块，则您可以应用文章中引用的技巧来隐藏间隙。这意味着对于这些特定情况，您将需要额外的预先计算的索引缓冲区（每次一个完整的索引缓冲区，可能导致 2^4 = 16 个不同的索引缓冲区，或者您可以拆分绘图调用以分别处理边界）。此外，文章中的技巧仅适用于相邻块之间最大一级的间隙。您要么需要确保您的细节级别在空间上以这样的方式分布，即两个相邻块在 LOD 中只有 1 的间隙。或者你找到另一个技巧/概括这个。遮蔽裙边（垂直突出块的边界）可用于隐藏具有不同 LOD 的块之间的宽间隙。

# cocoa - 允许 HTML5 视频在 webview 中进入全屏

> ID：15624036
> 
> 赞同：5
> 
> 时间：2013-03-25T20:22:41.313
> 
> 标签：cocoa, webview, fullscreen

我有一个非常简单的测试应用程序设置。它所做的只是显示一个 web 视图并加载一个 Youtube 视频页面。页面加载和视频播放都很好，但是点击全屏链接没有效果。（见下面的截图）。我检查了视频是否使用 Flash 播放器全屏播放正常，但 HTML5 全屏不工作。是否有某种委托调用或其他解决方法可以在 Webview 中启用 HTML5 全屏视频？

![在此处输入图像描述](../Images/1f38e21ad154ffe33681ae18ce2cdc19.png)

```
#import "AppDelegate.h"

@interface AppDelegate()
@property (weak) IBOutlet WebView *webview;
@end

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)notification {
    NSString *url = @"http://www.youtube.com/embed/VCERs0v1OoI?html5=1";
    self.webview.mainFrameURL = url;
}

@end 
```

![在此处输入图像描述](../Images/01d2964bea2bae38dd04cffa69d968c5.png)

# iphone - UIScrollView 中的 iOS 5 UIButtons 不可点击

> ID：15624039
> 
> 赞同：1
> 
> 时间：2013-03-25T20:22:42.303
> 
> 标签：iphone, ios, objective-c, uiscrollview, uibutton

我有一个奇怪的错误，即 UIView 内的两个 UIButtons，而 UIScrollView 视图内的两个 UIButton 在 iOS 5 上不可点击，但在 iOS 6 上工作得非常好（屏幕截图显示滚动条和下面的地图）

唯一的其他细节是滚动视图“向上滑动”以在选择电台时显示按钮。我试过在 iOS 5 上选择按钮，它们确实被击中（视觉上），但没有触发事件。

**编辑**：如果我点击并按住模拟器中的按钮，然后将光标向上移动到屏幕上并释放（例如，到始终可见的 UIView 部分），事件就会触发。

![滚动条示例](../Images/cdae822597b69c9636c752589901f3a2.png)

滚动视图本身具有以下设置，后两个只是为了尝试使按钮在 iOS 5 上工作而添加的（尝试了各种组合）：

```
self.scrollView.clipsToBounds = YES;
self.scrollView.scrollEnabled = YES;
self.scrollView.pagingEnabled = YES;
self.scrollView.delaysContentTouches = NO;
self.scrollView.canCancelContentTouches = NO; 
```

按钮事件都正确连接，具有合适的目标等：

```
[_updatePriceButton addTarget:self action:@selector(showPriceUpdateBoxWithPrice:) forControlEvents:UIControlEventTouchUpInside];
[_stationDetailsButton addTarget:self action:@selector(stationDetailsSelected:) forControlEvents:UIControlEventTouchUpInside]; 
```

和处理程序（这里有一个作为示例）：

```
- (void)stationDetailsSelected:(id)sender {
    if ([self.delegate respondsToSelector:@selector(stationDetailsSelected:)]) {
        [self.delegate stationDetailsSelected:_station];
    }
} 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T23:19:24.277

找到了罪魁祸首 - UIButton 所在的 UIView 上配置错误的 UITapGestureRecognizer：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(stationInfoViewTapped:)];
[infoController.view addGestureRecognizer:tap]; 
```

只需在“tap”的 init 之后添加以下内容即可解决 iOS 5 中的问题：

```
[tap setCancelsTouchesInView:NO]; 
```

# c# - SkyDrive 身份验证在 Windows 应用商店应用中不起作用

> ID：15624043
> 
> 赞同：0
> 
> 时间：2013-03-25T20:23:00.107
> 
> 标签：c#, windows-store-apps, onedrive, live-sdk

我正在开发 Windows Store App，我想用它`LiveSDK`来上传一些文件`SkyDrive`。但我遇到了一些问题。我找到了一些可以正常工作的[示例 SkyDrive 应用程序](http://code.msdn.microsoft.com/windowsapps/Live-SDK-Windows-Developer-8ad35141)，并且我得到了一些应该对真实帐户进行身份验证的代码：

```
var scopes = new string[] { "wl.signin", "wl.skydrive", "wl.skydrive_update" };  
LiveAuthClient authClient = new LiveAuthClient();
LiveLoginResult authResult = await authClient.LoginAsync(scopes);
if (authResult.Status == LiveConnectSessionStatus.Connected)
{
    this.session = authResult.Session;
} 
```

但是这段代码的第二行抛出了一个**异常**：

```
Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED)) 
```

所以我搜索了一些解决方案，我找到[了这篇文章](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2012/09/26/windows-8-connecting-to-live-skydrive.aspx)。然后我在我的应用程序上注册我的应用程序`developer dashboard`，进行所有指令并将我的应用程序与我的仪表板中的应用程序相关联。但这并没有改变任何东西。

我可以对我的应用程序做些什么来使用我的真实账户开始工作？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:11:38.437

我已经解决了，在我的能力中，`Package.appxmanifest`我没有受到检查`Internet`。当我检查它时，一切都正确。

**@Xyroid**您的评论帮助我创建了运行正确的新项目，然后我比较了两者`appxmanifests`谢谢！

# vb.net - ArgumentException 未处理 - 空路径名不合法

> ID：15624044
> 
> 赞同：0
> 
> 时间：2013-03-25T20:23:03.070
> 
> 标签：vb.net, argumentexception

我是一个初学者，试图类似地复制微软的记事本，但我收到了这条消息。目前，我正在尝试对 ToolStripMenu 中的“新”项目进行编码。小结： 到目前为止，如果用户按下“新建”，系统会提示他们“是否要保存对此文档所做的更改？”，他们可以选择“否”，清除文档中的信息，或者选择“取消”，返回他们按计划回到原来的位置。但是，按“是”会给我错误“ArgumentException 未处理 - 空路径名不合法”

```
Private Sub NewToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles NewToolStripMenuItem.Click

    Dim intResult As Integer = Nothing
    Dim dlg As SaveFileDialog = New SaveFileDialog

    dlg.Filter = "Text File (*.txt)|*.txt"
    intResult = MessageBox.Show("Do you want to save the changes made to this document?", "Warning", MessageBoxButtons.YesNoCancel)

    If intResult = Windows.Forms.DialogResult.Yes Then
        RichTextBox1.SaveFile(dlg.FileName, RichTextBoxStreamType.RichText)
    ElseIf intResult = Windows.Forms.DialogResult.No Then
        RichTextBox1.Clear()
    Else
        Return
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:26:43.813

`FileName`是空的。SaveFileDialog 已声明，但从未使用过。您的代码没有多大意义，因此您可以显示对话框...

```
Dim dlg As SaveFileDialog = New SaveFileDialog
dlg.Filter = "Text File (*.txt)|*.txt"
dlg.Title = "Choose Text File"
dlg.ShowDialog()

intResult = MessageBox.Show("Do you want to save the changes made to this document?", "Warning", MessageBoxButtons.YesNoCancel) 
```

[保存文件对话框](http://msdn.microsoft.com/en-us/library/sfezx97z.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

或者可以检查他们是否指定了 a`FileName`然后运行您的逻辑。

```
If dlg.FileName <> "" then
'   do save logic '
End If 
```

# reporting-services - SSRS：使用控件在报告之间切换

> ID：15624048
> 
> 赞同：2
> 
> 时间：2013-03-25T20:23:12.147
> 
> 标签：reporting-services

我有一个带有 tablix 的报告，我想在其中添加一个图表。但我想要的是一个可以在 tablix 和图表之间切换的切换。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:08:20.793

我能想到的几个选项：

**1 基于参数**

向报告中添加一个**图表**和一个**Tablix**，以及一个**参数**（我称为 mine `ShowItem`）。根据参数设置`Hidden`这两项的属性，例如：

```
=IIf(Parameters!ShowItem.Value = "Tablix", false, true) 
```

或者

```
=IIf(Parameters!ShowItem.Value = "Chart", false, true) 
```

报告将根据参数加载项目。您可以更新参数并重新加载报告以切换项目。

**2 切换项目**

创建一个**文本框**；我打电话给我`ToggleTextBox`的。将一项的属性设置为，将另`Hidden`一项的属性设置为，然后将这两项设置为将属性设置为。`True``False``ToggleItem``ToggleTextBox`

您可以单击**文本框**来显示/隐藏这两个项目。

![在此处输入图像描述](../Images/4b0f0547369eb264036b709a1456c621.png)

![在此处输入图像描述](../Images/a459aee8f0acde51e8372cec46c3fb30.png)

![在此处输入图像描述](../Images/05e9c719836dfbb06e3f02e3feabbd4d.png)

# ruby - Ruby blank line in file won't remove

> ID：15624057
> 
> 赞同：3
> 
> 时间：2013-03-25T20:23:45.673
> 
> 标签：ruby, line, gsub

I must've browsed every solution on StackOverflow, nothing seems to be removing the blank line's from text file which looks like this:

```
google
yahoo

facebook

reddit 
```

Amongst other sources, I've tried:

```
File.foreach("file.txt") { |line|
  line.gsub(/^$\n/, '')
} 
```

and

```
replace = text.gsub /^$\n/, ''
File.open("file.txt", "w") { |file| file.puts replace } 
```

However, these aren't working. I'm tearing my hair out, it seems that there is no native Nokogiri method, and regular expressions aren't working either.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-11T16:19:46.600

我在一个衬里下使用从文件中删除所有空行

```
file = "/tmp/hello.log"
File.write(file, File.read(file).gsub(/\n+/,"\n")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T20:41:47.277

您如何检查它是否为空？

```
out = File.new("out.txt", "w")

File.foreach("file.txt") { |line|
  out.puts line unless line.chomp.empty?
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:37:00.520

[String#squeeze](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-squeeze)很适合这个。在这里，它将一系列线路末端减少为单个线路末端。

```
open("out.txt", "w") {|out| open("test.txt") {|in| out << in.read.squeeze("\n")}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T20:33:38.397

稍微改变一下 gsub 就可以了

```
File.foreach("file.txt"){|line|
  line.gsub("\n", '')
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T20:36:08.000

```
source_file = '/hello.txt'
new_file = File.new('/hello_new.txt')
File::open(new_file,'w') do |file|
  File::open(source_file,'r').each(sep="\n") do |line|
    file << line unless line.gsub("\n",'').length == 0
  end
end 
```

# html - Having issues with responsive webpage

> ID：15624058
> 
> 赞同：0
> 
> 时间：2013-03-25T20:23:45.963
> 
> 标签：html, css

I am having tons of issues with my webpage overlapping the sidebar & menu when going to a lower screen. It should snap below one another. The webpage is [http://www.kolbree.com/rugged/](http://www.kolbree.com/rugged/) Any suggestions?

CSS:

```
/************************************************************************************
RESET
*************************************************************************************/
html, body, address, blockquote, div, dl, form, h1, h2, h3, h4, h5, h6, ol, p, pre, table, ul,
dd, dt, li, tbody, td, tfoot, th, thead, tr, button, del, ins, map, object,
a, abbr, acronym, b, bdo, big, br, cite, code, dfn, em, i, img, kbd, q, samp, small, span,
strong, sub, sup, tt, var, legend, fieldset {
    margin: 0;
    padding: 0;
}

img, fieldset {
    border: 0;
    max-width: 90%;
    height: auto;
    width: auto\9; /* ie8 */
}

/* set image max width to 100% */
img {
    max-width: 90%;
    height: auto;
    width: auto\9; /* ie8 */
}

/* set html5 elements to block */
article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { 
    display: block;
}

/************************************************************************************
GENERAL STYLING
*************************************************************************************/
body {
    background: #0b2d7e url() no-repeat center top;
    font: 1em/100% Times New Roman, Times, serif;
    color: #000000;

}
a {
    color: #026acb;
    text-decoration: none;
    outline: none;
}
a:hover {
    text-decoration: underline;
}
p {
    margin: 0 0 1.2em;
    padding: 0;
}

/* list */
ul, ol {
    margin: 1em 0 1.4em 24px;
    padding: 0;
    line-height: 140%;
}
li {
    margin: 0 0 .5em 0;
    padding: 0;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
    line-height: 1.4em;
    margin: 20px 0 .4em;
    color: #000;
}
h1 {
    font-size: 2em;
}
h2 {
    font-size: 1.6em;
}
h3 {
    font-size: 1.4em;
}
h4 {
    font-size: 1.2em;
}
h5 {
    font-size: 1.1em;
}
h6 {
    font-size: 1em;
}

/* reset webkit search input styles */
input[type=search] {
    -webkit-appearance: none;
    outline: none;
}
input[type="search"]::-webkit-search-decoration, 
input[type="search"]::-webkit-search-cancel-button {
    display: none;
}
.page-splits    {
        font-size: 1px;
        line-height: 0px;
        height: 5px;
        width: 100%;
        color: #F0F0F6;
        background-color: #F0F0F6;
        border: #9698AB 1px solid;
        border-radius:10px;
        padding: 0px;
        margin: 12px 0px 12px 0px;
        }
/************************************************************************************
STRUCTURE
*************************************************************************************/
#pagewrap {
    width: 100%;
    margin: 0 auto;
}

/************************************************************************************
HEADER
*************************************************************************************/
#header {
    position: relative;
    height: 210px;
}

/* site logo */
#site-logo {
    position: absolute;
    top: 0;
}
#site-logo a {
    font: bold 30px/100% Arial, Helvetica, sans-serif;
    color: #fff;
    text-decoration: none;
}

/* site description */
#site-description {
    font: italic 100%/130% "Times New Roman", Times, serif;
    color: #fff;
    position: absolute;
    top: 55px;
}

/* searchform */
#searchform {
    position: absolute;
    right: 10px;
    bottom: 6px;
    z-index: 100;
    width: 160px;
}
#searchform #s {
    width: 140px;
    float: right;
    background: #fff;
    border: none;
    padding: 6px 10px;
    /* border radius */
    -webkit-border-radius: 0px;
    -moz-border-radius: 0px;
    border-radius: 0px;
    /* box shadow */
    -webkit-box-shadow: inset 0 1px 2px rgba(0,0,0,.2);
    -moz-box-shadow: inset 0 1px 2px rgba(0,0,0,.2);
    box-shadow: inset 0 1px 2px rgba(0,0,0,.2);
    /* transition */
    -webkit-transition: width .7s;
    -moz-transition: width .7s;
    transition: width .7s;
}

/************************************************************************************
MAIN NAVIGATION (DO NOT USE)
*************************************************************************************/
#main-nav {
    width: 100%;
    background: #ccc;
    margin: 0;
    padding: 0;
    position: absolute;
    left: 0;
    bottom: 0px;
    z-index: 100;
    /* gradient */
    background: #082872 url() repeat-x;
    background: -webkit-gradient(linear, left top, left bottom, from(#143d9d), to(#082872));
    background: -moz-linear-gradient(top,  #143d9d,  #082872);
    background: linear-gradient(-90deg, #143d9d, #082872);
    /* rounded corner */
    -webkit-border-radius: 0px;
    -moz-border-radius: 0px;
    border-radius: 0px;
    /* box shadow */
    -webkit-box-shadow: inset 0 1px 0 #082872, 0 1px 1px #082872;
    -moz-box-shadow: inset 0 1px 0 #082872, 0 1px 1px #082872;
    box-shadow: inset 0 1px 0 #082872, 0 1px 1px #082872;
}
#main-nav li {
    margin: 0;
    padding: 0;
    list-style: none;
    float: left;
    position: relative;
}
#main-nav li:first-child {
    margin-left: 10px;
}
#main-nav a {
    line-height: 100%;
    font-weight: bold;
    color: #fff;
    display: block;
    padding: 14px 15px;
    text-decoration: none;
    text-shadow: 0 -1px 0 rgba(0,0,0,.5);
}
#main-nav a:hover {
    color: #fff;
    background: #c8d7e1;
    /* gradient */
    background: -webkit-gradient(linear, left top, left bottom, from(#c8d7e1), to(#5a6b73));
    background: -moz-linear-gradient(top,  #c8d7e1,  #5a6b73);
    background: linear-gradient(-90deg, #c8d7e1, #5a6b73);
}

/************************************************************************************
CONTENT
*************************************************************************************/
#content {
    background: #fff;
    margin: 2px 0 2px;
    padding: 20px 65px;
    width: 71.5%;
    display: block; 
    position: absolute;
    margin-left: 20%;
    float: left;
    /* rounded corner */
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    border-radius: 8px;
    /* box shadow */
    -moz-box-shadow: 0px 0px 0px 0px #000000;
    -webkit-box-shadow: 0px 0px 0px 0px #000000;
    box-shadow: 0px 0px 0px 0px #000000;
}

/* post */
.post {
    margin-bottom: 40px;
}
.post-title {
    margin: 0 0 5px;
    padding: 0;
    font: bold 26px/120% Arial, Helvetica, sans-serif;
}
.post-title a {
    text-decoration: none;
    color: #000;
}
.post-meta {
    margin: 0 0 10px;
    font-size: 90%;
}

/* post image */
.post-image {
    margin: 0 0 15px;
}

/************************************************************************************
SIDEBAR
*************************************************************************************/
#sidebar {
    width: 19%;
    float: left;
    margin: 2px 0 2px;
}
.widget {
    background: #0b2d7e;
    margin: 0 0 0px;
    padding: 0px 20px;
    /* rounded corner */
    -webkit-border-radius: 0px;
    -moz-border-radius: 0px;
    border-radius: 0px;
    /* box shadow */
    -moz-box-shadow: 0px 0px 0px 0px #000000;
    -webkit-box-shadow: 0px 0px 0px 0px #000000;
    box-shadow: 0px 0px 0px 0px #000000;
}
.widgettitle {
    margin: 0 0 5px;
    padding: 0; 
}
.widget ul {
    margin: 0;
    padding: 0;
}
.widget li {
    margin: 0;
    padding: 6px 0;
    list-style: none;
    clear: both;
    border-top: solid 1px #eee;
}

/* flickr widget */
.widget .flickr_badge_image {
    margin-top: 10px;
}
.widget .flickr_badge_image img {
    width: 48px;
    height: 48px;
    margin-right: 12px;
    margin-bottom: 12px;
    float: left;
}

/************************************************************************************
FOOTER
*************************************************************************************/
#footer {
    clear: both;
    color: #ccc;
    font-size: 85%;
    position: absolute;
    bottom:0;
    width:100%;
    height:20px;    
}
#footer a {
    color: #fff;
}

/************************************************************************************
CLEARFIX
*************************************************************************************/
.clearfix:after { visibility: hidden; display: block; font-size: 0; content: " "; clear: both; height: 0; }
.clearfix { display: inline-block; }
.clearfix { display: block; zoom: 1; } 
```

Heres my HTML:

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">

<!-- disable iPhone inital scale -->
<meta name="viewport" content="width=device-width; initial-scale=1.0">
<meta name="Description" content="The Vanguard-700 is an Infrared Outdoor Security Camera from Rugged Cams that is weatherproof, waterproof and dust proof with an IP67 sealed camera rating. The Vanguard-700 features SONY's new 960h Technology for near Megapixel performance.">
<meta name="KeyWords" content="outdoor security camera, outdoor camera security, security camera outdoors, infrared outdoor camera, ir outdoor camera, ir camera for outdoor, ">
<meta name="robots" content="NOODP">

<title>Rugged CCTV |Security Cameras for a Business | Business Security Camera System</title>

<!-- main css -->
<link href="css/style.css" rel="stylesheet" type="text/css">
<link href="css/master-site.css" rel="stylesheet"  type="text/css">
<link href="css/font-awesome.css" rel="stylesheet" type="text/css">

<link rel="stylesheet" media="screen and (min-width: 650px)" href="css/right-tabs-style.css" type="text/css">
<link href="css/menu.css" rel="stylesheet" type="text/css">
<!-- media queries css -->
<link href="css/media-queries.css" rel="stylesheet" type="text/css">

<!-- html5.js for IE less than 9 -->
<!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- css3-mediaqueries.js for IE less than 9 -->
<!--[if lt IE 9]>
    <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
<![endif]-->

<!-- START google crap -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24911377-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End google crap -->
</head>

<body>

<div id="pagewrap">

    <header id="header">
 <script src="js/bsa.js"></script>
<hgroup>

        </hgroup>
<h1 id="site-logo"><img src="images/logo.png" width="350px" height="175px" alt="Rugged Cams Graphic Logo"><a href="#"></a></h1>
<BR><BR><BR><BR><BR>
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/tagline.png" width="" height="" alt="LOGOOOO">
<img src="images/blue.png" width="" height="" align="right" alt="Rugged Cams Contact Number">
<ul class="menu full-width dark-blue">
                <li class="active"><a href="#"><i class="icon-home"></i>Home</a></li>
                <li><a href="#">Products <span class="arrow"></span></a>
                    <ul>
                        <li><a href="#">All Products</a></li>
                        <li><a href="#">DVR's</a></li>
                        <li><a href="#">Infrared Cameras</a></li>
                        <li><A hre="#">Dome Cameras</A></li>
                        <li><a href="#">HD Megapixel Cameras</a></li>
                        <li><a href="#">PTZ Cameras</a></li>
                        <li><a href="#">PTZ Controllers</a></li>
                        <li><A hre="#">Speciality Cameras</A></li>
                        <li><a href="#">Harsh Environment Cameras</a></li>
                        <li><a href="#">More... <span class="arrow"></span></a>
                            <ul>
                                <li><a href="#">Audio Kits</a></li>
                                <li><a href="#">Monitors</a></li>
                                <li><A hre="#">Monitoring Systems</a></li>
                                <li><a href="#">Long Distance Video</a></li>
                                <li><a href="#">Power Supplies</a></li>
                                 <li><a href="#">Pre-Made Cable</a></li>
                                 <li><A hre="#">Bulk Cable</A></li>
                                 <li><a href="#">Tools & Connectors</a></li>
                                 <li><a href="#">Vehicle Inspection Systems</a></li>
                                 <li><a href="#">Long Range Wireless</a></li>
                              </ul>
                    </ul>
                </li>
                <li><a href="#">Packaged Systems <span class="arrow"></span></a>
                    <ul>
                        <li><a href="#">Standard Packaged Systems</a></li>
                        <li><a href="#">Platnimum Packages</a></li>

                       </ul>        
                </li>
                <li><a href="#">Live Demo</a></li>
                <li><a href="#">Resources <span class="arrow"></span></a>
                <ul>
                <li><a href="#">Contact Us</a></li>
                <li><a href="#">Rugged F.A.Q.</a></li>
                <li><a href="#">Tech Support</a></li>
                <li><a href="#">About US</a></li>
                <li><a href="#">Company News</a></li>
                <li><a href="#">Website Links</a></li>
                <li><a href="#">Learning Center</a></li>
                <li><a hre="#">Videos</a></li>
                <li><a href="#">Testimonials</a></li>
                <li><a href="#">Whos Using Rugged Cams</a></li>
                </ul> 
                </li>
                <li><a href="#">Dealer Login</a></li>

                                <li class="right">

</li>
            </ul>

        </div>

    </header>
    <!-- /#header -->

   <!-- Repeating Background -->
<div style="background-image:url(images/contact-us.png);background-repeat:repeat;width:100%;height:80px;"></div>
</div> 
    <!-- End Repeating Background -->

    <aside id="sidebar">
        <section class="widget">

            <h4 class="widgettitle"></h4>
            <div align="Center">
            <img src="images/sidebar.png" alt="Rugged Cams 20th Anniversary">
            </br>
            <img alt="GSA Contract Holder Image" src="images/gsa-top-image.jpg" width="150" height="40" style="margin-top:25px;"><br><br>
            <div id="cart-update" >
          <a href="http://www.romancart.com/cart.asp?storeid=35372" target="_blank">
          <span class="cart-image">CART UPDATE</span></a><br><br>
        Quantity:
      <script  src="http://www.romancart.com/cartinfo.asp?storeid=35372&amp;type=1" type="text/javascript"></script><br><br>
      Total:
  <script src="http://www.romancart.com/cartinfo.asp?storeid=35372&amp;type=2" type="text/javascript"></script>  
      </div>
      <!-- SEARCH -->
   <table cellpadding="10" cellspacing="0" border="0" width="100%" class="sidebartext"><tr><td align="center">
Search Our Site<br>
<script language="JavaScript" type="text/javascript" src="script/simple-search.js"></script>
</td></tr></table>

<!--<div >
 (c) 2005, 2012\. Authorize.Net is a registered trademark of CyberSource Corporation 
<div class="AuthorizeNetSeal"><script type="text/javascript" >var ANS_customer_id="fd49e830-8c70-46b5-88d1-5eda463b1ae7";</script>
<script type="text/javascript" src="https://verify.authorize.net/anetseal/seal.js" ></script> <a href="http://www.authorize.net" id="AuthorizeNetText" 
target="_blank">Payment Processing</a> </div></div>
        </div>

        -->
       </aside>
        </section>

        <!-- /.widget -->

        <!-- Begin Widget -->
        <!-- /.widget -->

    </aside>
    <div id="content">
        <article class="post clearfix">
        <!-- CONTENT AREA -->
            <header>
                           <div id="product-cart" align="right">
                    <form action="http://www.romancart.com/cart.asp" method="post" style="text-align: center">
                        <input name="storeid" type="hidden" value="35372">
                        <input name="itemcode" type="hidden" value="Vanguard 700">
                        <strong><span class="cart-style2">Vanguard 700</span></strong><br>
                        <strong><span class="cart-style3">$289</span></strong><br>
                        Quantity : <input name="quantity" size="3" type="text"><br>
                        <input alt="add to cart button to add the current page product to the cart" class="input" name="submit" onMouseDown="this.src='images/add-to-cart-3.png'" onMouseOut="this.src='images/add-to-cart.png'" onMouseOver="this.src='images/add-to-cart-1.png'" src="images/add-to-cart.png" title="Click Here to add this product to the cart" type="image">
                    </form>
                </div>
            </header>
            <img src="images/outdoorsecuritycamera.png" alt="Outdoor Camera" align="left"><img src="images/Vanguard-700web-page-logo.png" alt="Vanguard 700">
            <BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR>
            <div align="center"><h3><Strong>New Infrared Outdoor Camera with Built-in, Swing-out Junction Box</Strong></h3></div>
            <BR><BR>
            <p>The Vanguard-700 <strong>Infrared Outdoor Camera</strong> is another new tough security camera from Rugged Cams. The Vanguard-700 is not only weatherproof, but waterproof and dust proof as well, and carries a sealed rating of IP67.</p>

     <p>The Vanguard-700 has a built-in Fan & Heater that allows it to operate at incredibly low temperatures. In fact, it is rated for -40ºF below zero and the fan cools the camera to at least +158ºF above. Not many cameras can match this incredible temperature range.</p><br>

 <p>The Vanguard-700 Infrared Outdoor Camera uses the latest <strong>SONY 960H</strong> Technology, which uses a 700 TV lines camera chipset to output an incredible <strong>960 Horizontal lines</strong> wide picture. This is very near <strong>Megapixel resolution</strong>, which starts at 1000 lines wide. It is a big leap for analog cameras, because you now have the ability to record at “&lt;strong>Near HD</strong>” with a 700 line camera, using our new <strong>960HD DVR</strong>. This camera can be recorded at D1 (740x480) with any regular DVR, but you actually get <strong>30% more resolution</strong> when you use our 960HD DVR.</p>

<p>The Vanguard-700 is also using Rugged Cams' new “&lt;strong>Easy Pro Install System</strong>”, which attaches a swing-out Junction Box to the base of the mount. Now anyone can get professional results and really quick installations using this system. You can mount on any surface, in any direction or orientation, from the ceiling, wall or table type mount, and even directly to any indoor or outdoor double gang switch box. The swing-out feature makes working on and fine tuning the camera super easy since you don't have to hold onto the camera at the same time. Truly revolutionary.</p>

<p><strong>Top Ten Features of the Vanguard-700 Infrared Outdoor Camera:</strong></p>
<ul style="list-style: circle"><li>Uses SONY's new 960H Effio ExView HAD II Technology that delivers <b>near Megapixel</b> picture 
    <b>(960 Horizontal Lines of Resolution)</b> &#8211; <i>30% more resolution than any other analog camera!</i></li>
<li><b>700 TV Lines</b> of Resolution</li>
<li><b>Completely Weatherproof &amp; Waterproof </b>and is rated to IP67 standards</li>
<li>Built-in <b>Swing-out Junction Box with American 3/4&#8221; Conduit</b> fittings</li>
<li>Mounts on the <b>Wall, Ceiling, Pole or any flat surface </b>such as parapet walls or atop fences, etc.</li>
<li>Rated to <b>-40º below zero and +158º above </b>(-40º F to +158º F)</li>
<li><b>Heater and Fan</b> built-in</li>
<li><b>30 Wide angle (30º spread) Variable Power Infrared Lamps</b> with <b>Smart IR
</b>Technology  &#8211; 100' Outdoor &amp; 165' Indoor Range</li>
<li><b>3.5mm-16mm Auto-Iris Varifocal Lens </b>&#8211; with Infrared Cut Filter for True Day/Night Operation</li>
<li><b>Smart 3D-DNR, WDR</b>, plus, the all-new <b>F-DNR </b>which is <b>Enhanced Digital Noise Reduction
</b>with the ability to help <b>cut through Fog, Dust, etc</b></li></ul>
<div class="page-splits"></div>
<p>In our quest to design the best Infrared Outdoor Cameras with the latest technology, Rugged Cams also makes them the toughest in the industry.  The <strong><u>Vanguard-700 Infrared Outdoor Camera</u></strong> is no exception.</p>

<p>Harsh environments, ice & snow, heat & sun pose no problems for The <strong>Vanguard-700</strong>.  The waterproof aluminum case is sealed to IP67 standards with a built-in Anti-Fog fan and a robust Heater with an automatic thermostat.  That's why The <strong>Vanguard-700</strong> is rated -40° below zero and +158° above.  <strong><i>Trugly Rugged</i></strong>.</p>

<p>The <strong>Vanguard-700</strong> Infrared Outdoor Camera is not only dual voltage (12V DC and 24V AC), but can accept wide ranges of those voltages as well.  If using DC volatage, anything from 10 volts to 30 volts will work, and when using AC voltage, anything from 10 volts to 28 volts work just as well.</p>

<p><strong>Rugged Cams</strong> is known for ramping up the Tough factor and packing in the features, and this Camera carries some great new design innovations.</p>

<ul style="list-style:circle">
<li><b>Gasketed Drop Down Access Door</b> that opens a compartment for easy Lens Adjustment</li>
<li>Access Door also has <b>Menu navigation Buttons, a Video Output connection, Infrared Sensitivity switches, Infrared On/Off Switch and an Infrared Power Gain Potentiometer</b> &#8211; all handy and at your fingertips</li>
<li><b>Smart Infrared Technology</b> &#8211; varies the power depending on how close the subject is &#8211; no more white-out effect</li>
<li><b>Sun Shield</b> is adjustable and helps provide cooling on the hottest days and keeps ice off of the camera body on the coldest days</li>
<li><b>Dual Voltage Power Choice</b> &#8211; 12V DC (10-30 volts) and 24V AC (10-28 volts)</li></ul>
<BR>
<img src="images/infrared-outside-camera-tech-info.gif" alt="Outside Camera Tech Information">
<br>
<p>The <strong>Vanguard-700</strong> delivers a lot of performance for a low price. <strong><i>Rugged Cams cameras last!</i></strong>

<div class="page-splits"></div>

<img src="images/vanguard-specifications.png" alt="Vanguard Specifications" align="left">
<img src="images/vanguard-icons.png" alt="Vanguard Icons" align="right">
<img src="images/vanguard-line-drawing.png" alt="Vanguard Line Drawing" align="Left">

            <!-- /.video -->

        </article>
        <!-- /.post -->
<div class="fixedtab righttab tab1">
    <div class="tab lime">
        <img alt="" src="http://www.rugged-cctv.com/images/all-pages/right-side-contact-tab.png" width="25" height="60" >
    </div>
    <div class="tabcontent">
        <form action="../contact.php" method="post">
            Name:<br><input type="text" name="cf_name" class="tab-out-2"><br>
            Company:<br><input type="text" name="cf_company" class="tab-out-2"><br>
            Phone:<br><input type="text" name="cf_phone" class="tab-out-2"><br>
            Email:<br><input type="text" name="cf_email" class="tab-out-2"><br>
            Message or Questions:<br>
            <textarea name="cf_message" class="tab-out-1" rows="0" cols="0"></textarea><br><br><input type="submit" value="Send" style="width:300px;height:45px; background-color: lawngreen"><br><br>
            <input type="reset" value="Clear">
        </form>
    </div>
</div>
<div class="fixedtab righttab tab2">
    <div class="tab orange">
        <img alt="" src="http://www.rugged-cctv.com/images/all-pages/Right-side-support-tab.png" width="25" height="60" >
    </div>
    <div class="tabcontent" style="background-color:silver">
        <form action="http://www.rugged-cctv.com/support-contact.php" method="post">Tech Support Only<br>
            Name:<br><input type="text" name="cf_name" class="tab-out-2"><br>
            Company:<br><input type="text" name="cf_company" class="tab-out-2"><br>
            Phone:<br><input type="text" name="cf_phone" class="tab-out-2"><br>
            Email:<br><input type="text" name="cf_email" class="tab-out-2"><br>
            Message or Questions:<br>
            <textarea name="cf_message" class="tab-out-1" rows="0" cols="0"></textarea><br><br><input type="submit" value="Send" style="width:300px;height:40px; background-color:white"><br><br>
            <input type="reset" value="Clear">
        </form>
    </div>
</div>
<div class="fixedtab righttab tab3">
    <div class="tab blue">
        <img alt="" src="http://www.rugged-cctv.com/images/all-pages/right-side-like-us-tab.png" width="25" height="60" >
    </div>
    <div class="tabcontent">
    <a href="http://pinterest.com/ruggedcams/protect-your-property" target="_blank"><img alt="" src="http://www.rugged-cctv.com/images/all-pages/pintrest-icon.png" width="101" height="33"></a>

        <a href="https://twitter.com/ruggedcctv" target="_blank"><img alt="" src="http://www.rugged-cctv.com/images/all-pages/twitter-icon.png" width="101" height="33"></a>

        <a href="http://www.linkedin.com/in/allenspears" target="_blank"><img alt="" src="http://www.rugged-cctv.com/images/all-pages/linkedin-icon.png" width="101" height="33"></a>
        <a href="https://plus.google.com/107293736862864106103/about" target="_blank"><img alt="" src="http://www.rugged-cctv.com/images/all-pages/google-icon.png" width="101" height="33"></a>
        <a href="http://www.facebook.com/pages/Rugged-CCTV/251536825932" target="_blank"><img alt="" src="http://www.rugged-cctv.com/images/all-pages/facebook-icon.png" width="101" height="33"></a>   
            <a href="http://www.rugged-cctv.com/blog/" target="_blank"><img alt="" src="http://www.rugged-cctv.com/images/all-pages/blogg-icon.png" width="101" height="33"></a>
            <a href="http://www.youtube.com/user/ruggedcctv" target="_blank"><img alt="" src="http://www.rugged-cctv.com/images/all-pages/youtube-icon.png" width="101" height="33"></a>
        </div>
    </div>
    <!-- End Content Area -->

    <!-- /#content --> 

        <!-- Begin Widget -->   

    <!-- /#sidebar -->
<BR><BR>
    <footer id="footer">
    <div align="left"><br><BR>
<p>&copy; 1997 - 2013 <a href="http://www.rugged-cctv.com">Rugged CCTV</a> All Rights Reserved, For more information please <A href="http://www.rugged-cctv.com/contact.shtml">Contact Us</a></p>
</div>
    </footer>
    <!-- /#footer --> 

</div>
<!-- /#pagewrap -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:44:00.030

我可以发现很多问题...

从 chrome 开发者工具控制台：

```
GET http://www.kolbree.com/rugged/js/bsa.js 404 (Not Found) 
```

此行有错误：

```
<meta name="viewport" content="width=device-width; initial-scale=1.0"> 
```

错误：“视口参数值“设备宽度；”键“宽度”无效，已被忽略。注意“;” 不是视口值中的分隔符。列表应以逗号分隔。"

我可以看到`#content`几个错误...

无位置：绝对；这里需要。不需要 -20% 的保证金。

# c# - c# combine code with string

> ID：15624060
> 
> 赞同：-3
> 
> 时间：2013-03-25T20:23:55.490
> 
> 标签：c#, string

i am wondering how to combine code + int/string

example.

```
string USERINPUT = Console.ReadLine();
Console.ForgroundColor = ConsoleColor.USERINPUT 
```

but that does not work. how to i wonder?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:26:02.857

对于作业

```
Console.ForegroundColor = (something here); 
```

您必须分配一个[ConsoleColor](http://msdn.microsoft.com/en-us/library/system.consolecolor.aspx)，它是一个枚举。

您可以从其等效字符串中解析枚举值。

```
Console.ForegroundColor = 
    (ConsoleColor)System.Enum.Parse(typeof(ConsoleColor), USERINPUT); 
```

详情见：

[在 Enum 中搜索字符串并返回 Enum](https://stackoverflow.com/questions/2290262/search-for-a-string-in-enum-and-return-the-enum)

请注意，我的代码不包括错误处理。如果用户在控制台输入不是 成员的字符串`ConsoleColor`，您将收到错误情况。

# javascript - Sails.js: Route Experiencing 'Too Many Requests' Error In Chrome

> ID：15624061
> 
> 赞同：3
> 
> 时间：2013-03-25T20:24:02.357
> 
> 标签：javascript, node.js, sails.js

So I'm working with the new node MVC framework Sails.js ([https://github.com/balderdashy/sails](https://github.com/balderdashy/sails)) and I'm getting a weird error I've never had before. I'm trying to implement the example passport.js authentication strategy ([https://gist.github.com/theangryangel/5060446](https://gist.github.com/theangryangel/5060446)) Sails.js includes in the documentation, but when I try to access my homepage (`http://localhost:1337/`) while not logged in I get routed to `http://localhost:1337/login` but it doesn't load and chrome gives me this error:

```
This webpage has a redirect loop
The webpage at http://localhost:1337/login has resulted in too many redirects. Clearing your cookies for this site or allowing third-party cookies may fix the problem. If not, it is possibly a server configuration issue and not a problem with your computer.
Here are some suggestions:
Reload this webpage later.
Learn more about this problem.
Error 310 (net::ERR_TOO_MANY_REDIRECTS): There were too many redirects. 
```

Does anyone know what's going on?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:09:47.303

看起来该消息来自 Passport。如果你愿意，可以加入 IRC (#sailsjs)，我们可以看看。同时，@robertklep 的建议对我来说似乎很有可能。

# backbone.js - Traversing and accessing views in backbone marionette

> ID：15624068
> 
> 赞同：0
> 
> 时间：2013-03-25T20:24:38.483
> 
> 标签：backbone.js, marionette

Backbone newb here.

I have a view that extends Backbone.Marionette.Layout and has several regions. Some of these regions have several regions of their own and so on. If I am at the "top level" region, what is the best why to access methods of a child region/view?

I see that I can do something like this:

```
region1.currentView.region2.currentView.region3.method() 
```

but that doesn't seem like a good idea. Any thoughts?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:58:25.753

你是对的。您将需要使用 Marionette Application 类中的事件聚合器来解耦您的应用程序。我使用以下方法在我的应用程序中进行通信。

```
app.vent.trigger('App:Core', { 'caller': 'LoginScreen' }); 
```

然后在我的应用程序的另一部分中，我正在监听这个事件。

```
App.vent.on('App:Core', function (data) {..... 
```

# python - Why does scipy.optimize.curve_fit not fit to the data?

> ID：15624070
> 
> 赞同：24
> 
> 时间：2013-03-25T20:24:40.313
> 
> 标签：python, matplotlib, scipy, curve-fitting, data-fitting

I've been trying to fit an exponential to some data for a while using scipy.optimize.curve_fit but i'm having real difficulty. I really can't see any reason why this wouldn't work but it just produces a strait line, no idea why!

Any help would be much appreciated

```
from __future__ import division
import numpy
from scipy.optimize import curve_fit
import matplotlib.pyplot as pyplot

def func(x,a,b,c):
   return a*numpy.exp(-b*x)-c

yData = numpy.load('yData.npy')
xData = numpy.load('xData.npy')

trialX = numpy.linspace(xData[0],xData[-1],1000)

# Fit a polynomial 
fitted = numpy.polyfit(xData, yData, 10)[::-1]
y = numpy.zeros(len(trailX))
for i in range(len(fitted)):
   y += fitted[i]*trialX**i

# Fit an exponential
popt, pcov = curve_fit(func, xData, yData)
yEXP = func(trialX, *popt)

pyplot.figure()
pyplot.plot(xData, yData, label='Data', marker='o')
pyplot.plot(trialX, yEXP, 'r-',ls='--', label="Exp Fit")
pyplot.plot(trialX,   y, label = '10 Deg Poly')
pyplot.legend()
pyplot.show() 
```

![enter image description here](../Images/64bdc291d5f33d35fec511e4dac4de2c.png)

```
xData = [1e-06, 2e-06, 3e-06, 4e-06,
5e-06, 6e-06, 7e-06, 8e-06,
9e-06, 1e-05, 2e-05, 3e-05,
4e-05, 5e-05, 6e-05, 7e-05,
8e-05, 9e-05, 0.0001, 0.0002,
0.0003, 0.0004, 0.0005, 0.0006,
0.0007, 0.0008, 0.0009, 0.001,
0.002, 0.003, 0.004, 0.005,
0.006, 0.007, 0.008, 0.009, 0.01]

yData = 
[6.37420666067e-09, 1.13082012115e-08,
1.52835756975e-08, 2.19214493931e-08, 2.71258852882e-08, 3.38556130078e-08, 3.55765277358e-08,
4.13818145846e-08, 4.72543475372e-08, 4.85834751151e-08, 9.53876562077e-08, 1.45110636413e-07,
1.83066627931e-07, 2.10138415308e-07, 2.43503982686e-07, 2.72107045549e-07, 3.02911771395e-07,
3.26499455951e-07, 3.48319349445e-07, 5.13187669283e-07, 5.98480176303e-07, 6.57028222701e-07,
6.98347073045e-07, 7.28699930335e-07, 7.50686502279e-07, 7.7015576866e-07, 7.87147246927e-07,
7.99607141001e-07, 8.61398763228e-07, 8.84272900407e-07, 8.96463883243e-07, 9.04105135329e-07,
9.08443443149e-07, 9.12391264185e-07, 9.150842683e-07, 9.16878548643e-07, 9.18389990067e-07] 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-25T20:38:42.720

当不输入极小（或大）的数字时，数值算法往往会更好地工作。

在这种情况下，图表显示您的数据具有极小的 x 和 y 值。如果对它们进行缩放，则拟合效果会更好：

```
xData = np.load('xData.npy')*10**5
yData = np.load('yData.npy')*10**5 
```

* * *

```
from __future__ import division

import os
os.chdir(os.path.expanduser('~/tmp'))

import numpy as np
import scipy.optimize as optimize
import matplotlib.pyplot as plt

def func(x,a,b,c):
   return a*np.exp(-b*x)-c

xData = np.load('xData.npy')*10**5
yData = np.load('yData.npy')*10**5

print(xData.min(), xData.max())
print(yData.min(), yData.max())

trialX = np.linspace(xData[0], xData[-1], 1000)

# Fit a polynomial 
fitted = np.polyfit(xData, yData, 10)[::-1]
y = np.zeros(len(trialX))
for i in range(len(fitted)):
   y += fitted[i]*trialX**i

# Fit an exponential
popt, pcov = optimize.curve_fit(func, xData, yData)
print(popt)
yEXP = func(trialX, *popt)

plt.figure()
plt.plot(xData, yData, label='Data', marker='o')
plt.plot(trialX, yEXP, 'r-',ls='--', label="Exp Fit")
plt.plot(trialX, y, label = '10 Deg Poly')
plt.legend()
plt.show() 
```

![在此处输入图像描述](../Images/dbe099a30b426f69afdcac8def3943e2.png)

请注意，在重新缩放`xData`和之后`yData`，返回的参数`curve_fit`也必须重新缩放。在这种情况下`a`，`b`和`c`每个必须除以 10**5 以获得原始数据的拟合参数。

* * *

您可能对上述内容的一个反对意见是，必须相当“谨慎”地选择缩放比例。（阅读：并非所有合理的比例选择都有效！）

`curve_fit`您可以通过为参数提供合理的初始猜测来提高稳健性。通常，您对数据有一些*先验*知识，这些知识可以激发对合理参数值的粗略/信封类型猜测。

例如，`curve_fit`调用

```
guess = (-1, 0.1, 0)
popt, pcov = optimize.curve_fit(func, xData, yData, guess) 
```

`curve_fit`有助于提高在这种情况下成功的尺度范围。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-06-21T14:54:23.503

在不考虑数据先验知识的情况下，对该解决方案的（轻微）改进可能如下：取数据集的逆均值并将其用作“比例因子”，以传递给底层的 minimumsq()由曲线拟合（）调用。这允许拟合器工作并返回数据原始比例的参数。

相关线路是：

```
popt, pcov = curve_fit(func, xData, yData) 
```

变成：

```
popt, pcov = curve_fit(func, xData, yData,
    diag=(1./xData.mean(),1./yData.mean()) ) 
```

这是生成此图像的完整示例：

![curve_fit 无需手动重新调整数据或结果](../Images/e3ea02f1e14b37a3d6d7316a126d2c5e.png)

```
from __future__ import division
import numpy
from scipy.optimize import curve_fit
import matplotlib.pyplot as pyplot

def func(x,a,b,c):
   return a*numpy.exp(-b*x)-c

xData = numpy.array([1e-06, 2e-06, 3e-06, 4e-06, 5e-06, 6e-06,
7e-06, 8e-06, 9e-06, 1e-05, 2e-05, 3e-05, 4e-05, 5e-05, 6e-05,
7e-05, 8e-05, 9e-05, 0.0001, 0.0002, 0.0003, 0.0004, 0.0005,
0.0006, 0.0007, 0.0008, 0.0009, 0.001, 0.002, 0.003, 0.004, 0.005
, 0.006, 0.007, 0.008, 0.009, 0.01])

yData = numpy.array([6.37420666067e-09, 1.13082012115e-08,
1.52835756975e-08, 2.19214493931e-08, 2.71258852882e-08,
3.38556130078e-08, 3.55765277358e-08, 4.13818145846e-08,
4.72543475372e-08, 4.85834751151e-08, 9.53876562077e-08,
1.45110636413e-07, 1.83066627931e-07, 2.10138415308e-07,
2.43503982686e-07, 2.72107045549e-07, 3.02911771395e-07,
3.26499455951e-07, 3.48319349445e-07, 5.13187669283e-07,
5.98480176303e-07, 6.57028222701e-07, 6.98347073045e-07,
7.28699930335e-07, 7.50686502279e-07, 7.7015576866e-07,
7.87147246927e-07, 7.99607141001e-07, 8.61398763228e-07,
8.84272900407e-07, 8.96463883243e-07, 9.04105135329e-07,
9.08443443149e-07, 9.12391264185e-07, 9.150842683e-07,
9.16878548643e-07, 9.18389990067e-07])

trialX = numpy.linspace(xData[0],xData[-1],1000)

# Fit a polynomial
fitted = numpy.polyfit(xData, yData, 10)[::-1]
y = numpy.zeros(len(trialX))
for i in range(len(fitted)):
   y += fitted[i]*trialX**i

# Fit an exponential
popt, pcov = curve_fit(func, xData, yData,
    diag=(1./xData.mean(),1./yData.mean()) )
yEXP = func(trialX, *popt)

pyplot.figure()
pyplot.plot(xData, yData, label='Data', marker='o')
pyplot.plot(trialX, yEXP, 'r-',ls='--', label="Exp Fit")
pyplot.plot(trialX,   y, label = '10 Deg Poly')
pyplot.legend()
pyplot.show() 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2016-10-24T21:44:51.677

该模型`a*exp(-b*x)+c`非常适合数据，但我建议进行一些修改：
改用它

`a*x*exp(-b*x)+c`

祝你好运

# c - Variable declarations, using libuv

> ID：15624074
> 
> 赞同：4
> 
> 时间：2013-03-25T20:24:47.650
> 
> 标签：c, libuv

I am trying to learn how to use libuv. I am on a mac OS X and have the library downloaded and installed. I can compile and run small test programs one only starts a callback loop and then exits since there are no watchers, the other creates an idle watcher and exits when the time runs out.

I have been trying to go through the samples for the file io and have been running into problems. The function prototype for the function to obtain a file descriptor is:

```
 int uv_fs_open(uv_loop_t* loop, 
                uv_fs_t* req,      // second argument
                const char* path, 
                int flags, 
                int mode, 
                uv_fs_cb cb) 
```

I have cut the sample code down to the min that will still have the error.

```
#include <stdio.h>
#include <uv.h>

uv_fs_t open_req;

void on_open(uv_fs_t);
void on_read(uv_fs_t);
void on_write(uv_fs_t);

int main(int argc, char **argv) {

    uv_fs_open(uv_default_loop(), &open_req, argv[1], O_RDONLY, 0, on_open); 
    uv_run(uv_default_loop(), UV_RUN_DEFAULT); 
    return 0;
}

void on_open(uv_fs_t *req) {
    if (req->result != -1) {
        fprintf(stderr, "function called \n");
    }
    else {
        fprintf(stderr, "error opening file: %d\n", req->errorno);
    }
    uv_fs_req_cleanup(req);
} 
```

My declaration of open_req is exactly like the declaration of close_req which appears in the complete code sample and doesn't produce and error. I added the declaration for open_req because the compiler was giving me a "‘open_req’ was not declared in this scope" error. When I added the declaration it changed the error to "invalid conversion from ‘void (*)(uv_fs_t)’ to ‘void (*)(uv_fs_t*)’". I get the same error rather the declaration is inside main or not. If I change the declaration to a pointer declaration

```
uv_fs_t* open_req; 
```

then I get the error:

```
cannot convert uv_fs_t** to uv_fs_t* for argument ‘2’ to 
int uv_fs_open(uv_loop_t*, uv_fs_t*, const char*, int, int, void (*)(uv_fs_t*)) 
```

I am trying to go through the actual libuv code to see if I can figure it out but the code is huge, I am using the "An Introduction to libuv" found here: [http://nikhilm.github.com/uvbook/](http://nikhilm.github.com/uvbook/) and that is where the sample code came from.

Is there any other source of sample code that I can use to try and figure out this library? Is there anything obvious that I am doing wrong in my declaration? I am not sure where to look for clarification or examples on how to use libuv.

Edit update In the libuv code, in the uv.h file. I find

```
typedef struct uv_fs_s uv_fs_t; 
```

one of the things I have been looking for in the code is where this struct is actually defined. I have searched using google for typedef and learned a bit about how typedef is used to make the name so that you don't have to type struct every time that you want to declare an instance of the struct. Though some people seem to think it is a terrible practice and others think it is great. Part of what I removed to get a minimum sample as another declaration of a type us_fs_t called close_req. I copied the format for my declaration directly from that one.

I will see what I can find about pointers to functions, I am only vaguely familiar with them and it at least gives me somewhere to start looking.

I have found the function definition for uv_fs_open.

```
int uv_fs_open(uv_loop_t* loop,
               uv_fs_t* req,
               const char* path,
               int flags,
               int mode,
               uv_fs_cb cb) {
  INIT(OPEN);
  PATH;
  req->flags = flags;
  req->mode = mode;
  POST;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:47:46.250

您声明该函数的原型`uv_fs_open`是

```
int uv_fs_open(uv_loop_t* loop, 
               uv_fs_t* req, 
               const char* path, 
               int flags, 
               int mode, 
               uv_fs_cb cb) 
```

请注意，第二个参数的类型是`uv_fs_t*`. 所以当你声明`open-rec`为

```
uv_fs_t open_req; 
```

然后打电话`uv_fs_open()`给

```
uv_fs_open(uv_default_loop(), &open_req, argv[1], O_RDONLY, 0, on_open); 
```

第二个参数 ( `&open_req`) 获取`open_req`并创建所需的指针。这*应该*工作得很好。但是，从您最初的错误消息来看，我认为您没有发布所有相关代码。让我们看看这个错误信息：

> 从 'void (*)(uv_fs_t)' 到 'void (*)(uv_fs_t*)' 的无效转换</p>

这表明编译器需要一个指向函数的指针，该函数返回 void 并采用单个参数，该参数是指向 a 的指针`uv_fs_t`。另一方面，您提供了一个指向函数的指针，该函数返回 void 并采用单个类型参数`uv_fs_t`（即不是指向 的指针*）*`uv_fs_t`。

这表明这`open_req`是一个函数（或指向函数的指针）。为了进一步帮助您，请使用此函数的声明以及如何初始化`open_req`变量（如果它是指向函数的指针而不是函数本身的名称）来编辑您的原始问题。

**编辑：**

再次查看您的问题后，`open_req`很可能不会导致原始错误。你应该把你的代码改回原来的样子。

另一方面，`on_open`很可能导致问题。你用原型声明这个函数

```
void on_open(uv_fs_t); 
```

但定义的第一行是

```
void on_open(uv_fs_t *req) 
```

从函数定义的第一行删除`*`，看看会发生什么。

# jquery - 在 Laravel 中使用 AJAX 与数据库交互

> ID：15624075
> 
> 赞同：6
> 
> 时间：2013-03-25T20:24:54.410
> 
> 标签：jquery, laravel

我正在学习基于模型、视图、控制器范式的 Laravel PHP 框架。我一直在尝试将 AJAX 合并到我的简单入门应用程序中……一个电话记录器。这是我通常放弃的地方。但我拒绝！

所以我有我的电话模型：

```
class Phonecall extends Eloquent
{
// Creates an instance of the database object 
} 
```

这是我的电话表：

```
mysql> desc phonecalls;
+------------+------------------+------+-----+---------+----------------+
| Field      | Type             | Null | Key | Default | Extra          |
+------------+------------------+------+-----+---------+----------------+
| id         | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| who        | varchar(200)     | NO   |     | NULL    |                |
| what       | varchar(200)     | NO   |     | NULL    |                |
| created_at | datetime         | NO   |     | NULL    |                |
| updated_at | datetime         | NO   |     | NULL    |                |
| initiator  | varchar(200)     | NO   |     | NULL    |                |
| info       | text             | NO   |     | NULL    |                |
+------------+------------------+------+-----+---------+----------------+
7 rows in set (0.00 sec) 
```

我的视图列出了数据库中当前的所有呼叫（由谁和什么）：

```
<!doctype html>
<html>
<head>
  <title>Title</title>
  <script type="text/javascript" 
           src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js">
</script>
</head>
<body>
<h1>Welcome</h1>
<p>Here's a list of recent phonecalls</p>
    <ul class="call-list">
    @foreach($phonecalls as $call)
        <li>{{ $call->who }} - {{ $call->what }} - 

        <a href="phonecalls/show/{{ $call->id }}">Show</a> | 

        {{ HTML::link('phonecalls/delete/'.$call->id, 'Delete') }} | 
        {{ HTML::link('phonecalls/update/'.$call->id, 'Update') }}
        </li>
    </ul>

    {{-- Placeholder for AJAX content --}}
    <div id="call-info">
    </div>
</body>
</html> 
```

这是我的简单控制器：

```
 class Phonecalls_Controller extends Base_Controller {    

// Use $this within a method the same way you
// would use the object name outside of the class

public function get_index()
    {
            $phonecalls = Phonecall::all();
            return View::make('phonecalls.index')->with('phonecalls', $phonecalls);
    }    
// ************************************
// DISPLAY CALL INFO
public function get_show($call_id)
{
    $call = Phonecall::find($call_id);

            // WHAT GOES HERE?

} 
```

我希望用户能够单击视图中的“显示”并在...中显示呼叫信息

```
<div id="call-info">
</div> 
```

视图中的标签。

* * *

## 更新：

这就是它的作用...

**我的 get_show() 方法**

```
// ************************************
// SHOW CALL INFO
public function get_show($call_id)
{
$call = Phonecall::find($call_id);
return $call->info;
} 
```

**我的 Javascript**

```
//************************************
// Phonecall AJAX Example
//************************************
$(document).ready(function() {
  $('.call-list > li > a').click(function(e) {  // e=event
     e.preventDefault();
     var id = $(this).attr('id');
     $.get(BASE+'/phonecalls/show/'+id, function(data) {
     $("#call-info").html(data);
  })
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-24T19:38:49.870

我花了一段时间才弄明白，因为 webz 中的示例有点令人困惑，因为它提到了更改`headers`为帐户`csrf`令牌等。这是一个例子，我希望它可以帮助别人。

第一：您认为的形式：

```
{{ Form::open(['id' => 'testForm']) }}

   <p>{{ Form::label('title', 'Title') }}
   {{ Form::text('title') }}</p>

   <p>{{ Form::label('description', 'Description') }}
   {{ Form::text('description') }}</p>

   <p>{{ Form::submit('Submit') }}</p>

{{ Form::close() }} 
```

第二：写下你的路线`route.php`：

```
Route::post('ad', 'AdController@store'); 
```

第三：控制器：

```
public function store()
{

if(Request::ajax()){

    $ad = new ad; 
    $ad -> title = Input::get('title');
    $ad -> description = Input::get('description');
    $ad -> save();

    $response = array(
        'status' => 'success',
        'msg' => 'Option created successfully',
    );

    return Response::json( $response );

    }

} 
```

四：jquery ajax请求：

```
$('form#testForm').submit(function(e){
  e. preventDefault();

  var str1 = $('input[name="title"]').val();
  var str2 = $('input[name="description"]').val();
  var str3 = $('input[name="_token"]').val();
  var data = {title:str1,description:str2, token:str3};
  //console.log(data);
  var request = $.ajax({
    url: "ad",
    type: "POST",
    data: data ,
    dataType: "html"
  });

  request.done(function( msg ) {
    var response = JSON.parse(msg);
    console.log(response.msg);
  });

  request.fail(function( jqXHR, textStatus ) {
    console.log( "Request failed: " + textStatus );
  });

  }); 
```

而已。为了保护，您可以将`Session::token() == Input::get('_token')`控制器中的设置为 if 检查。这只是一个可以很好地帮助您入门的示例。`http://www.pretty.url/ad`如果www.pretty.url 是您的`localhost`或本地私有开发 url ，则可能需要使用绝对 URL（在这种情况下使用）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T21:48:33.417

这可以通过许多不同的方式来完成。

首先，您可以这样做：

```
public function get_show($call_id)
{
    $call = Phonecall::find($call_id);

    return View::make('phonecalls.single')->with('phonecal', $call);

} 
```

在这种情况下，您需要为单个电话创建一个模板并将其放入电话文件夹中。

另一种选择是从 Laravel 应用程序返回 JSON 响应：

```
public function get_show($call_id)
{
    $call = Phonecall::find($call_id)->first();

    return Response::eloquent($call);

} 
```

另一种选择是使用 javascript MVC 框架来使获取/更新 AJAX 数据之类的事情变得非常容易，例如 Backbone JS 或 Angular JS 可以做到这一点。

无论哪种方式，如果你想做 AJAX 数据，你需要构建一个 API 来区分常规站点和 AJAX 数据后端。

这是我的博客文章，其中详细介绍了如何完成此操作：http: [//maxoffsky.com/code-blog/building-restful-api-in-laravel-start-here/](http://maxoffsky.com/code-blog/building-restful-api-in-laravel-start-here/)

此外，Dayle Rees 的 Code Happy 是 Laravel 中 AJAX 的一个很好的介绍，章节 AJAX 内容：codehappy.daylerees.com/ajax-content

如果您有更多问题，请告诉我，如果您觉得我有帮助，请批准此评论。谢谢！

更新：

要从控制器（或 Laravel 路由）实际加载内容，您需要使用 jQuery ajax、GET（加载数据）或 POST（发布表单结果）这是一个示例：

```
 $('#get-info').click(function(e) {  // e=event
        e.preventDefault();
        var BASE = "<?php echo URL::base(); ?>";
        // attempt to GET the new content
        $.get(BASE+'phonecalls/show/2', function(data) {
            $('#content').html(data);
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:39:11.827

您必须能够拦截对“显示”链接的点击。如果你让你的控制器变得[安静](http://laravel.com/docs/controllers#restful-controllers)，那么向你的控制器发出 ajax 请求应该很容易。

当用户[单击](http://api.jquery.com/click/)Show 链接时，您必须发送一个[ajax 请求。](http://api.jquery.com/jQuery.get/)

我建议你将结果输出为 JSON，这样以后使用 js 输出结果就很容易了。

# instagram - 启用 Instagram 聊天 API

> ID：15624080
> 
> 赞同：2
> 
> 时间：2013-03-25T20:25:14.903
> 
> 标签：instagram, private-messaging

我想让我的应用程序的用户向其他 Instagram 用户发送消息，并让该应用程序向 Instagram 用户发送通知。

我在哪里可以找到使用我的 Instagram 应用程序（如 InstaDM 和 Instachat）的 API 调用，这些应用程序使用户能够向其他 Instagram 用户发送消息/聊天？

API 控制台不显示任何消息传递/发布功能（与 Twitter 和 Facebook 不同） [http://instagram.com/developer/api-console/](http://instagram.com/developer/api-console/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-10T03:40:32.110

Instagram 不支持在其 API 上聊天 :(

# delphi - 最大的印地客户？

> ID：15624086
> 
> 赞同：1
> 
> 时间：2013-03-25T20:25:38.437
> 
> 标签：delphi, delphi-xe2, indy10

可以同时连接多少个客户端`TidTCPServer`？我使用了 Indy10 ， DelphiXE2 和目标操作系统是 windows server 2003。

Delphi 有没有更好的选择来代替 Indy？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:53:58.153

然而，操作系统可以使用可用资源处理许多客户端。请记住，每个连接的客户端都使用自己的线程，因此您必须使用进程的默认线程大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T21:56:17.433

默认情况下，MaxConnections 设置为 0，因此 Indy 服务器在接受另一个连接之前不会检查活动线程的数量，但这主要取决于客户端在服务器上所做的事情。例如，如果您的服务器接受客户端连接，然后在该客户端线程上下文中计算 pie 到万亿位数，那么与将工作移交给另一个进程相比，您将获得正确处理的连接数显着减少。基本上，您的结果将直接根据执行的任务而有所不同。

对于一个通用的答案......如果您覆盖分配给每个线程的默认堆栈大小，您可以在 32 位服务器应用程序中拥有多达几千个连接，但可能不会更多。请参阅：[Windows Server 2003 中的最大线程数是多少？](https://stackoverflow.com/questions/481900/whats-the-maximum-number-of-threads-in-windows-server-2003) 和[http://www.deltics.co.nz/blog/?p=1330](http://www.deltics.co.nz/blog/?p=1330)

还要检查 ListenQueue 属性，默认设置为 15。显然操作系统可以自行进一步增加它......我不知道当前的 Windows Server 默认侦听队列，但我通常会提高默认数量。

底线 - 达到一千个活动线程/连接，您很可能会早晚碰壁。

# excel - Excel 和单元格格式转换为文本

> ID：15624097
> 
> 赞同：0
> 
> 时间：2013-03-25T20:26:03.430
> 
> 标签：excel, excel-formula

我有一个内容为 41316 的单元格。我将其格式化为 20130211。

我需要另一个单元格来引用该值，但在单元格中将其显示为 20130211 而不是 41316 格式。

这可能很简单，但由于某种原因，它让我绕着圈子跑。

提前感谢所有回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:08:30.217

如果您引用 20130211 的单元格是“A1”，则放入`=TEXT(A1,"####")`您的计算单元格中。如果你这样做，那么它仍然会读取为数字而不是字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:30:55.427

默认情况下，Excel 将格式从格式化为日期的单元格复制到引用它的单元格。在您的情况下，Excel 没有为您执行此操作，因此您只需使用您的特殊格式格式化新单元格：画笔工具或 Edit..Copy、Edit..Past Special..Formats 或 Format..Number ..自定义并选择您的格式，它将位于长列表的底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:32:14.843

如果可以使用字符串而不是数字，则可以将该日期分解为部分并连接：

作为 A1 包含值的单元格：

```
= Year(A1) & "/" & Month(A1) & "/" & Day(A1) 
```

“&”符号连接文本。如果您希望斜杠用斜杠分隔，斜杠是可选的。

# html - 定位元件

> ID：15624099
> 
> 赞同：-3
> 
> 时间：2013-03-25T20:26:07.017
> 
> 标签：html, css

我尝试了多种方法，但没有定位`<img>`在所需的位置。它总是卡在两个跨度之间。试图从孩子中取出 img`div`并将其添加到父 div 中。但没有运气。我想将它定位在我的跨度下方并使用`padding-top:20px;`.This 图像是 200x38px 图像。这是我的代码：

**HTML**

```
<div class="col1-step2">
          <div class="heading-step2">
            <span class="heading-step2">Hello signed User.</span>
            <span class="heading-step2 textblue">How are you doing.</span>
            <img class="user-bar" src="<?php echo site_url('img/bar.png'); ?>">
          </div>
</div> 
```

**CSS**

```
.col1-step2 {
  float: left;
  width: 40%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);

}
div.heading-step2 {
  top: 6%;
  position: relative;
}

.heading-step2 {
  font-size: 24px;
  color: #f7f7f7;
}
.heading-step2 .textblue {
  color: #55c7fa;
  font-weight: bold; 
  display: block;
}
img.user-bar {
  position: absolute;
  padding-top: 25%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:28:49.723

您混合了相对定位和绝对定位。通过删除图像上的绝对定位并重组 HTML，您可以获得不同的元素排序：

[http://jsfiddle.net/HhbQB/1/](http://jsfiddle.net/HhbQB/1/)

```
<div class="col1-step2">
    <div class="heading-step2">
        <span class="heading-step2">Hello signed User.</span>
        <img class="user-bar" src="http://placehold.it/200x100" />
        <span class="heading-step2 textblue">How are you doing.</span>    
    </div>
</div> 
```

更新小提琴以回应您的评论：http: [//jsfiddle.net/HhbQB/2/](http://jsfiddle.net/HhbQB/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:32:04.863

您可以为您的 div 提供相对或绝对位置，如果您需要帮助，请尝试提供您希望 div 所在的位置。

# ios - 对于具有日期类型的属性，我应该以什么格式将日期写入核心数据？

> ID：15624107
> 
> 赞同：0
> 
> 时间：2013-03-25T20:26:33.067
> 
> 标签：ios, sqlite, core-data, nsdate, nsdateformatter

我正在尝试使用每个条目的正确日期类型（一个月中的每一天）填充我的核心日期模型使用的 sqlite 数据库。我应该以什么格式将日期存储在 sqlite 数据库中，以便我的应用程序可以正确显示它，或者至少接收它可以理解的格式，我可以使用日期格式化程序对其进行调整？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:28:16.017

如果您要保存日期，则可以读取和写入`NSDate`对象。它们没有日期格式——它们只是存储自参考日期以来的绝对时间偏移量。

# php - Cakephp 2.3：全局访问模型属性的有效方法

> ID：15624110
> 
> 赞同：0
> 
> 时间：2013-03-25T20:27:00.183
> 
> 标签：php, cakephp, cakephp-2.3

我希望能够获取某个属性是某个值的所有模型的名称。

理想情况下，我想在 AppModel 中放置一个属性，然后继承并随后由所有其他模型设置，以便可以从任何地方轻松访问它。这是我的想法的要点：

*在我要分组的任何模型中将此设置为**true ：***

```
class AppModel extends Model {
    public $hasPortal = false;
} 
```

*然后将此函数添加到 AppController：*

```
class AppController extends Controller {
    public $components = array('DebugKit.Toolbar'); 
    static function getPortals() {
        $portalModels = array();    
        $models = App::objects('Model');
        foreach( $models as $model ) {
            if ( !class_exists($model) ) {
                $m = ClassRegistry::init($model);
                if ( $m->hasPortal ) {
                    $portalModels[] = $model;
                }
            }           
        }       
        return $portalModels;           
    }
} 
```

因此我可以做到这一点：`$portals = AppController::getPortals()`在任何地方都可以——而且现在它工作得很好（当我有超过 20 个课程时！），但我很确定它的效率低得愚蠢。我希望能够动态地对模型集合（最好是控制器和函数）进行分组以生成菜单。但我对 OOP 很陌生，并且潜伏着怀疑这不是获得我想要的功能的最有效方法。

**在继续阅读之前查看评论，我正在处理一个描述我的具体背景的请求**

我完全不*相信*这种方法有意义！

我正在尝试实现的实际事情是在`home.ctp`. 使用上面的代码，我`home.ctp`有这个：

```
$portaledModels = AppController::getPortals();
foreach ($portaledModels as $model) {
    echo $this->element('modelPortal', array('model' => $model) );
} 
```

*（虽然最终 $model 将是一个包含描述、图标链接等的数组。）*

通常情况下，在蛋糕应用程序的默认“主页”页面上，我真正想要的是一种导航到许多模型的各种操作的方法——但不是全部（即，`entries/index`并且`authors/index`是显而易见的选择，而`entries_authors`没有任何价值给用户）。

所以在这种情况下，我想创建一个元素，为那些应该可以访问的模型返回一个导航界面（这不是代替 ACL 列表，我不是为了安全而使用它，只是为了方便自动化home.ctp 的内容）。

我知道手动创建此类模型的列表并在必要时对其进行更新很容易。不过，一般来说，我尽量不写任何可以通过编程获得的东西。我突然想到我可以创建一个`models`模型，基本上是我的应用程序中内容的注册表，然后`requestAction()`我可以达到同样的效果。但是后来我迷失了思考如何在每个模型被调用时自动注册它自己，但只是第一次？这可能是向大家重申我是**业余**开发者的好时机，哈哈哈。:)

# jquery - 需要帮助将复选框值及其状态传递给 jquery 函数

> ID：15624118
> 
> 赞同：1
> 
> 时间：2013-03-25T20:27:19.243
> 
> 标签：jquery, checkbox

我有一个复选框，如下所述。

```
<table>
  <tr>
    <td>
         <input type='checkbox' name='testing1' value='testing1' onclick='javascript: testingFunction(this.checked,'testing1');'>
    </td>
    <td>
         <input type='text' name='tesing1_qty' id='testing1_qty' class='inputtext' readonly=''>
    </td>
  </tr>
</table> 
```

选中复选框后，我想启用文本框。

我使用了如下功能。

```
function testingFunction(checkboxStatus,checkboxValue){ 
     if(checkboxStatus==true){ 
           $("#"+checkboxValue+"_qty").attr('readonly', false);
     }
} 
```

但我收到语法错误。我不确定我哪里出错了。请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:29:47.003

这是您的点击，您使用的是所有单引号

```
onclick='javascript: testingFunction(this.checked,'testing1');' 
```

将其中一组更改为双引号

```
onclick="javascript: testingFunction(this.checked,'testing1');"> 
```

我也会更改其他内容，因为您将其标记为 jquery，但我将保留此内容以解决您的语法错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:35:26.013

这是[你](http://jsfiddle.net/Rdpmj/2/)想要做的吗？

```
$('#testing1').click(function() {
  $("#testing1_qty").attr('disabled', !this.checked);
}); 
```

我为此使用了 jquery，因为您将此帖子标记为 jquery ..

编辑：固定使用 this.checked :)

# linux - 提交后更新返回“跳过'。'”与非服务器管理员用户

> ID：15624126
> 
> 赞同：1
> 
> 时间：2013-03-25T20:27:54.470
> 
> 标签：linux, svn, permissions, mediatemple, post-commit-hook

我有一个 post-commit 挂钩，可以 cd 到我的网站目录并运行 svn update。对于我的服务器管理员，它可以正常工作。对于其他用户，提交有效并且钩子执行，但更新将“Skipped '.'”返回到日志文件。

以下是我能想到的尽可能多的相关信息：

*   这是 Media Temple 网格服务器 (gs) 上的 Linux 环境
*   存储库设置在 /home/XXXXX/data/svn/reponame
*   工作副本已检出到 /home/XXXXX/domains/mydomain.com/projectname
*   serveradmin 和 otheruser 都属于同一个组（我们称之为用户组）
*   所有涉及的文件都拥有 serveradmin.usergroup 的所有权
*   所有工作副本文件（包括 .svn 文件）对用户和组都具有 rwx 权限
*   hooks 目录中的所有文件对用户和组都具有 rwx 组权限
*   每个用户通过 svn+ssh 签出 repo，并且我验证了提交钩子正在以执行提交的用户身份执行（不是 apache 或 svnserve）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-03T20:21:24.457

捆绑这个老问题，因为正如我之前在评论中提到的，这最终成为 Media Temple 的一个限制，他们的支持团队确认没有解决方法。

# cakephp - CakePHP 2.2.4：在路由中使用多个 Slug

> ID：15624133
> 
> 赞同：1
> 
> 时间：2013-03-25T20:28:23.207
> 
> 标签：cakephp, routing, routes

我没有看到一条路线中涉及多个蛞蝓的问题。

我有一个名为“教师”、“课程”和“科目”的表格。每个都有一个名为“快捷方式”的字段。

如何从如下网址中路由和提取正确的 Teacher.id、Course.id 和 Subject.id：

[http://www.domain.com/bowlerae/grade-5/math](http://www.domain.com/bowlerae/grade-5/math)

其中“bowlerae”是 Teacher.shortcut，“grade-5”是 Course.shortcut，“math”是 Subject.shortcut。

我不确定最初如何路由，如何提取每 3 个元素的 ID（我是在 AppController 中还是在我需要的每个单独的控制器中执行此操作？）以及如何构建与反向路由和分页兼容的链接。此外，“快捷方式”字段是否需要为每个表具有唯一名称，例如“teacher_slug”、“course_slug”、“subject_slug”？

现在，我正在将 3 个模型中的每一个加载到我的 routes.php 中并查询以获取每个模型的相应 ID（如果 URL 的该部分存在），然后将这些值传递给控制器​​。但正如你可以想象的那样，它花费了大量的资源。

**其他问题/疑虑**（针对 AD7six 和其他）

如果我想要这样的网址

[http://www.domain.com/bowlerae](http://www.domain.com/bowlerae)

指向教师的主页，或类似这样的 URL

[http://www.domain.com/bowlerae/grade-5](http://www.domain.com/bowlerae/grade-5)

指向课程的主页，我会有如下路线

```
Router::connect(
    '/:teacher', 
    array('controller' => 'teachers', 'action' => 'view'),
    array(
        'teacher'   => '[a-z0-9]{1}([a-z0-9\-]{2,}[a-z0-9]{1})?',
        'pass' => array('teacher')
)); 
```

对于教师，以及以下课程

```
Router::connect(
    '/:teacher/:course', 
    array('controller' => 'courses', 'action' => 'view'),
    array(
        'teacher'   => '[a-z0-9]{1}([a-z0-9\-]{2,}[a-z0-9]{1})?',
        'course'   => '[a-z0-9]{1}([a-z0-9\-]{2,}[a-z0-9]{1})?',
        'pass' => array('teacher', 'course')
)); 
```

我担心的是，如果有人导航到诸如

[http://www.domain.com/account](http://www.domain.com/account)其中帐户是有效的控制器但不是有效的教师

或者

[http://www.domain.com/bowlerae/students](http://www.domain.com/bowlerae/students)学生是有效的控制者但不是有效的课程

我将如何处理这些情况？我尝试像这样使用重定向方法......

TeachersController.php

```
public function view($tSlug = null) {
    $this->Teacher->id = $this->Teacher->findByShortcut($tSlug);

    if (!$this->Teacher->exists()) {
                  $this->Session->setFlash('This teacher does not exist');
                  $this->redirect(array('controller' => $tSlug));
    }
            else{
            // do this
            } // end else if teacher exists
    } 
```

我希望它路由以下 URL

[http://www.domain.com/account](http://www.domain.com/account)到帐户控制器，但将其路由到

[http://www.domain.com/account/index](http://www.domain.com/account/index)，正确的帐户控制器和正确的索引操作，但它将“/index”附加到 URL 的末尾。

以我现在的路线方式，它正在尝试访问课程控制器，所以我向课程控制器添加了相同的重定向方法，就像这样......

CoursesController.php

```
public function view($tSlug = null, $cSlug = null) {
    $this->Teacher->id = $this->Teacher->findByShortcut($tSlug);
    $this->Course->id = $this->Course->findByShortcut($cSlug);

    if (!$this->Teacher->exists()) {
                  $this->Session->setFlash('This teacher does not exist');
                  $this->redirect(array('controller' => $tSlug, 'action' => $cSlug));
    }
    elseif (!$this->Course->exists()) {
                  $this->Session->setFlash('This course does not exist');
                  $this->redirect(array('controller' => $tSlug, 'action' => $cSlug));
    }
            else{
            // do this
            } // end else if everything is fine
    } 
```

不幸的是，我收到一条错误消息，指出重定向永远不会结束。

此外，我已经为这样的 URL 创建了路由（如果没有教师、课程或主题），但它们可能不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:43:21.450

针对 db 测试所有请求以查看它们是否匹配路由是一个非常糟糕的主意。

## 将逻辑放入控制器中

一种简单的方法是创建路由 ala：

```
Router::connect('/*', array('controller' => 'x', 'action' => 'y')); 
```

或者更具体一点：

```
Router::connect(
    '/:teacher/:course/:subject', 
    array('controller' => 'x', 'action' => 'y'),
    array('pass' => array('teacher', 'course', 'subject')
); 
```

并确保首先声明您使用的所有其他路线。然后简单地创建一个控制器动作，如下所示：

```
XController extends AppController {

    public $uses = array('Teacher');

    public function y($tSlug, $cSlug, $sSlug) {
        $teacher = $this->Teacher->findBySlug($tSlug);
        ...
    }

} 
```

## 限制路由元素

使用[路由验证](http://book.cakephp.org/2.0/en/development/routing.html#route-elements)，您可以限制与给定路由元素匹配的内容，例如，如果只有 5 位教师，您可以通过确保以他们的 slug 开头来防止任何其他 url 匹配：

```
Router::connect(
    '/:teacher/:course/:subject', 
    array('controller' => 'x', 'action' => 'y'),
    array(
        'teacher' => 'rita|sue|bob|larry|mo',
        'pass' => array('teacher', 'course', 'subject')
); 
```

如果您想从数据库中读取教师的 slug -**缓存数据库查询**，请不要在所有请求的路由文件中读取数据库。

## 在您的路线中放置一些固定的东西

使用没有固定字符串的路由意味着任何带有 3 个路径段的 url 都将匹配该路由 - 在路由中放置一些固定的东西可能不太容易出错，这样您就可以确定该请求实际上是针对老师的, 课程, 科目组合

IE

```
Router::connect('/anything/*', array('controller' => 'x', 'action' => 'y')); 
```

这样就不需要任何“此 url 是否匹配此路由？” 逻辑 - 是这样，或者不是。

# escaping - 如何使用 MS-DOS 命令使用 ESC/POS 命令剪纸？

> ID：15624134
> 
> 赞同：1
> 
> 时间：2013-03-25T20:28:29.310
> 
> 标签：escaping, dos, cut

我有一个从 Windows (MS-Dos) 打印文本文件的简单要求。假设我的普通文本文件位于“C:\Temp”文件夹中。另一方面，我有一台 EPSON TM88V 收据打印机。我可以与连接在 USB 上的收据打印机握手，并可以使用以下命令进行打印：

C:\Temp> **打印 /D:\WORKSTATION\EPSONTM-T88V C:\Temp\HelloWorld.txt**

虽然它正在打印；但它不是剪纸。我需要在我的文本文件中插入这些 ESC/POS 命令并将其传递给打印机，以便在打印完我的文本文件后立即裁切纸张。

感谢您在这方面提供帮助，因为我曾浏览过类似“ [http://nicholas.piasecki.name/blog/wp-content/uploads/2009/12/ESC-POS-Command-Guide.pdf”“http](http://nicholas.piasecki.name/blog/wp-content/uploads/2009/12/ESC-POS-Command-Guide.pdf) [: //www.delfi.com/SupportDL/Epson/Manuals/TM-T88IV/Programming%20manual%20APG_1005_receipt.pdf](http://www.delfi.com/SupportDL/Epson/Manuals/TM-T88IV/Programming%20manual%20APG_1005_receipt.pdf) "

但无法理解如何将其作为转义字符传递。

在上面的链接中，他们提到使用“GS V m”，但请。帮助如何通过 DOS 命令执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:08:24.620

“GS V m”表示，您必须向打印机发送一个包含以下十六进制值的控制字符串

```
0x1D 0x56 <m> 
```

使用哪个值而不是查看您的第二个链接，第 372 页。（也许您需要添加一个 LF (0x10) 来完成命令序列）

您可以将这些值放入一个文件（例如 cutnow.bin）并将其发送到您的打印机（print /D:yourprinter cutnow.bin）。

如何生成这个文件？

我不知道批量执行此操作的任何简单方法，我会为此使用 Basic （任何其他编程语言都应该这样做）。（你只需要生成一次这个文件）也许有一个使用VBS的简单的单行解决方案，但我不会说VBS。

**编辑：** 对于 Basic，它看起来像这样：（请注意，有许多不同的基本方言，因此您的代码可能会有所不同）

```
open cutnow.bin for write as #1:print #1,chr$(0x1D)+chr$(0x56)+chr$(41):close #1 
```

请记住，您可能必须添加换行符 (chr$(10)) - 抱歉，不记得了，我在 30 年前做过那种事情......

最后一个字符（41）可能会有所不同 - 看看我上面提到的页面

# scala - Ensime 劣等阶模式

> ID：15624135
> 
> 赞同：0
> 
> 时间：2013-03-25T20:28:39.780
> 
> 标签：scala, emacs, slime, ensime

我已经为 scala 设置了 Emacs + Ensime。

我可以使用 Cc Cv s 在 emacs 中启动 sbt 控制台

如果我使用 Cc Cv z 在 emacs 中启动 scala 控制台，我会收到以下错误

```
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_33).
scala> 
Failed to initialize compiler: class scala.reflect.BeanInfo not found 
```

此错误的修复方法是什么？如何让 scala 控制台在 Emacs 中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:42:40.870

我最近遇到了类似的错误，但这是我解决它的方法（但我不知道如何解决它，所以这只是答案的一半）。我所做的是自定义`ensime-inf-default-cmd-line`变量以使其具有值：`'("sbt" "console")`. 这确实会启动交互式 Scala 环境。

编辑：

这是来自 的相关部分`.emacs`，但我不确定它是否重要/在每次安装中都相同：

```
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 ;;
 ;; more stuff ...
 ;; I'm not sure this line is correct / makes any difference
 '(ensime-inf-cmd-template (quote ("sbt" "console" "-classpath" :classpath)))
 ;; This variable is used to launch the interpreter
 '(ensime-inf-default-cmd-line (quote ("sbt" "console"))))

(require 'scala-mode2)
(add-to-list 'auto-mode-alist '("\\.scala$" . scala-mode))
(add-to-list 'load-path "~/.emacs.d/ensime/elisp/")
(require 'ensime)
(add-hook 'scala-mode-hook 'ensime-scala-mode-hook) 
```

我已经`scala-mode2`从 MELPA 安装了。`sbt`通过从他们的站点下载 RPM安装了 0.12.0 版。我之前安装了 JRE 和 JDK，活动版本是 OpenJDK 1.7。安装的 Scala 是 2.9.2。我不知道如何识别 Ensime 的版本 :|

# javascript - 如何提交带有连接 URL 的表单？

> ID：15624136
> 
> 赞同：0
> 
> 时间：2013-03-25T20:28:41.130
> 
> 标签：javascript, google-chrome-extension

我对整个 Javascript 场景还很陌生。跟着那些在线 javascript 教程，比如代码学院提供的东西，所以我将按照我从那里学到的东西以及我通过其他教程阅读的内容进行学习。阅读其他一些帖子以尝试帮助我，但我无法弄清楚

所以这是我的问题，

我正在尝试获取表单输入，将其发送到 javascript 文件，然后 javascript 文件返回一个字符串，然后我希望重新加载框架。我正在尝试为我和我的朋友制作一个简单的 chrome 扩展。

当我点击“查看成绩！” 我收到一个错误：

```
No webpage was found for the web address: chrome-extension://gcgddggimojbfgpbdmpfkmiofmpinjgb/location.href=getURL(account)? 
```

而且我无法确定我的 javascript 是否工作不正常，或者我只是不知道如何发送到“铬”（我称之为）世界之外的 URL。

这是我的 html 文件：

```
<form action="location.href=getURL('account')">
    PSU Account (i.e. xyz123): <input type:"text" id="account">
   <input type="submit" value="View Grade!">
</form> 
```

这是我的 javascript 文件：

```
function getURL(account) {
    var psuAccount = document.getElementById(psuAccount);
    // I changed strA to the ***.***.*** for this post
    var strA = 'https://***.***.***/section/Gradebook/Student/default.aspx?userId=';
    var strB = '&reportMode=true';
    var newURL = strA + psuAccount + strB);
    return(newURL);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:33:40.123

我认为这正是`<form>`s 的用途……这样的事情不需要 Javascript。尝试：

```
<form action="https://***.***.***/section/Gradebook/Student/default.aspx" method="GET">
    PSU Account (i.e. xyz123): <input type="text" name="userId" />
    <input type="hidden" name="reportMode" value="true" />
    <input type="submit" value="View Grade!" />
</form> 
```

提交机制会自动使用`action`表单的属性。由于`method`是“GET”，它还将为`<form>`具有`name`属性的元素添加键/值对的查询字符串。因此，对于您的表单，它将添加一个键“userId”，其值作为提交时文本框的当前值。它还将添加一个值为“true”的键“reportMode”。所以最终提交的网址是：

```
https://***.***.***/section/Gradebook/Student/default.aspx?userMode=true&userId=SOME_INPUT_STRING 
```

如果您需要使用 Javascript，请尝试：

```
<div>
    PSU Account (i.e. xyz123): <input type:"text" id="account" />
    <input type="button" value="View Grade!" onclick="getURL();" />
</div> 
```

和：

```
function getURL() {
    var psuAccount = document.getElementById("account").value;
    var strA = 'https://***.***.***/section/Gradebook/Student/default.aspx?userId=';
    var strB = '&reportMode=true';
    var newURL = strA + psuAccount + strB;
    window.location.href = newURL;
} 
```

# jquery - cfdiv 绑定和 jquery 函数调用

> ID：15624137
> 
> 赞同：0
> 
> 时间：2013-03-25T20:28:44.843
> 
> 标签：jquery, coldfusion, coldfusion-10

我有一个脚本 ( `TheForm.cfm`)，我通过`cfdiv`. 我想要的是在`SubJScript.js`. 出于某种原因，来自 bind ( `FormSections.cfm`) 的任何 jQuery 调用都不起作用。

我敢肯定，我做错了或没有看到这很简单。我当然可以多用一双眼睛。先感谢您。

以下是相关代码：

**表格.cfm**

```
<DIV id="TheBigBox">
  <DIV id="SectionBody">
    <span class="SectionHeader">This is the Name of the File</span>
    <div id="tFormSec1" class="ThisFormSection_cls">
      <cfdiv id="FormSec1" class="FormSection_cls" bind="url:FormSections.cfm?ATTRIBUTES.SecNo=1" style="float:inherit" bindOnLoad="true"/>
    </div>
</DIV> 
```

**FormSections.cfm**

```
<table id="ProjectTypes_tbl">
   <tr>
      <td><cfinput name="pTypeRow1" id="XXX" type="checkbox" value="New">&nbsp;New</td>
   </tr>
</table> 
```

**SubJScript.js**

```
$a=jQuery.noConflict();

$a(document).ready(function($) {
   $('#XXX').on("click", function() {
      alert('Show this Msg');
   });
}); 
```

# c++ - 使用 *this 初始化引用

> ID：15624145
> 
> 赞同：0
> 
> 时间：2013-03-25T20:29:05.073
> 
> 标签：c++, pointers, reference, constructor, argument-passing

我正在尝试`ShadeRec`使用其构造函数初始化我的类的实例：

```
ShadeRec(World& world); 
```

所以我传递给它：

```
ShadeRec sr(*this); 
```

其中“this”是 World 类的一个实例。

我收到以下错误：

```
World.cpp: In member function ‘ShadeRec World::hitObjects(const Ray&) const’:
World.cpp:52: error: no matching function for call to ‘ShadeRec::ShadeRec(const World&)’
ShadeRec.h:17: note: candidates are: ShadeRec::ShadeRec(const ShadeRec&)
ShadeRec.h:15: note:                 ShadeRec::ShadeRec(World&) 
```

假设问题只是 World 实例具有属性`const`，我该如何摆脱此错误消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T20:31:59.697

您在`hitObjects`标记为的成员函数中执行此操作`const`。可以这样想：该成员函数承诺不修改`*this`对象。但是，它很高兴通过非`const`引用将其传递给不同的对象。如果其他对象修改了它怎么办？哦哦！

有两种可能的解决方案取决于问题。构造函数是否`ShadeRec`真的修改了传递的`World`对象？

1.  如果是这样，您应该确保`hitObjects`没有标记为`const`. 毕竟，那是在撒谎。

2.  如果没有，它应该采取它`const World&`。那么`hitObjects`标记`const`为 的 传递`*this`给它就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:32:34.227

`const`参考和非常量 之间存在差异。

编译器不想将常量对象传递给采用非常量（可变）对象的方法。这将违反接口协议：能够修改常量对象。

这种情况可能是由常量对象调用可变函数或常量方法调用可变方法引起的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:32:41.617

a 的成员函数中的`this`指针类型is ，这意味着您不能使用它来初始化非常量引用（您不能只是“删除”它的*constness*）。`const``class World``const World*`

 *`ShadeRec`将的构造函数的参数类型更改为`const World&`：

```
ShadeRec(const World& world); 
```

参见 C++03, 9.3.2 §1：

> `this`a 的成员函数中的类型`class X`是`X*`。如果声明了成员函数`const`，则类型`this`为`const X*`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T20:39:45.263

假设您可以`ShadeRec`从 a构造 a`World`而无需修改传入的`World`，则需要这样的 ShadeRec 构造函数：

```
 ShadeRec(const World& world); 
```*

# c# - 如何让 FlowLayoutPanel.AutoSize 与 FlowBreak 一起使用

> ID：15624160
> 
> 赞同：12
> 
> 时间：2013-03-25T20:30:14.837
> 
> 标签：c#, winforms, flowlayoutpanel

我有一个 FlowLayoutPanel 的问题，我不知道如何解决它。

我将两个 FlowLayoutPanel 放在另一个里面；第二个内部 flp 内部有 3 个按钮。

![在此处输入图像描述](../Images/5d7222eea28e7e68d7dd1d4b9ab6ff67.png)

FlowLayoutPanel 子级的属性是：

```
FlowDirection = LeftToRight;
AutoSize = true;
AutoSizeMode = GrowAndShrink;
WrapContents = true; 
```

现在我将每个按钮的`FlowBreak`属性设置为 true，但是我看到的行为不是我想要的，我希望 FlowLayoutPanel 缩小到按钮的宽度，

![在此处输入图像描述](../Images/c5147697c3c12b8be2038dafec69419d.png)

更改`FlowDirection`为`UpToDown`不是一种选择。

任何人都知道为什么 AutoSize 不起作用？

这是代码。

```
//
//FlowLayoutPanel1
//
this.FlowLayoutPanel1.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink;
this.FlowLayoutPanel1.Controls.Add(this.FlowLayoutPanel3);
this.FlowLayoutPanel1.Location = new System.Drawing.Point(84, 77);
this.FlowLayoutPanel1.MinimumSize = new System.Drawing.Size(10, 10);
this.FlowLayoutPanel1.Name = "FlowLayoutPanel1";
this.FlowLayoutPanel1.Size = new System.Drawing.Size(308, 265);
this.FlowLayoutPanel1.TabIndex = 0;
//
//FlowLayoutPanel3
//
this.FlowLayoutPanel3.AutoSize = true;
this.FlowLayoutPanel3.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowAndShrink;
this.FlowLayoutPanel3.Controls.Add(this.Button1);
this.FlowLayoutPanel3.Controls.Add(this.Button2);
this.FlowLayoutPanel3.Controls.Add(this.Button3);
this.FlowLayoutPanel3.Location = new System.Drawing.Point(127, 3);
this.FlowLayoutPanel3.MinimumSize = new System.Drawing.Size(10, 10);
this.FlowLayoutPanel3.Name = "FlowLayoutPanel3";
this.FlowLayoutPanel3.Size = new System.Drawing.Size(162, 87);
this.FlowLayoutPanel3.TabIndex = 1;
//
//Button1
//
this.FlowLayoutPanel3.SetFlowBreak(this.Button1, true);
this.Button1.Location = new System.Drawing.Point(3, 3);
this.Button1.Name = "Button1";
this.Button1.Size = new System.Drawing.Size(75, 23);
this.Button1.TabIndex = 0;
this.Button1.Text = "Button1";
this.Button1.UseVisualStyleBackColor = true;
//
//Button2
//
this.FlowLayoutPanel3.SetFlowBreak(this.Button2, true);
this.Button2.Location = new System.Drawing.Point(3, 32);
this.Button2.Name = "Button2";
this.Button2.Size = new System.Drawing.Size(75, 23);
this.Button2.TabIndex = 1;
this.Button2.Text = "Button2";
this.Button2.UseVisualStyleBackColor = true;
//
//Button3
//
this.Button3.Location = new System.Drawing.Point(3, 61);
this.Button3.Name = "Button3";
this.Button3.Size = new System.Drawing.Size(75, 23);
this.Button3.TabIndex = 2;
this.Button3.Text = "Button3";
this.Button3.UseVisualStyleBackColor = true; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T16:04:47.367

这是一个错误，它已经存在了很长时间。问题是 FlowLayoutPanel 的布局引擎计算错误的第一行的宽度，包括第二个控件的宽度，即使它被包装到第二行。

解决方法很愚蠢但很有效，在第一个控件之后添加一个宽度为 0 的虚拟面板。如果您使用设计器执行此操作，请先将其拖放到正确的位置，即第一个控件的右侧。然后在“属性”窗口中将其 Margin 设置为 (0, 0, 0, 0)，将 Size 设置为 (0, 0)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T14:58:04.160

我不相信 FlowLayoutPanel 旨在做你想做的事情。TableLayoutPanel 可能更适合。添加具有单列的 TableLayoutPanel，并将每个按钮添加到一行。

**编辑**：我发现了一个 hackish 解决方法。在第一个按钮之后，创建一个大小为 0,0、边距为 0,0的**面板。**确保**FlowBreak**设置为 false。

![在此处输入图像描述](../Images/3b043116d2e35e656ab64ef60d7e33d4.png)

**编辑：**您只需要在第一个按钮之后创建一个面板，而不是每个面板。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T14:57:44.717

不是解决方案，而是解决方法。看起来您正在尝试`TableLayoutPanel`通过使用流中断来模拟`FlowLayoutPanel`. 你试过`TableLayoutPanel`改用吗？根据您在评论中的屏幕截图，它应该可以完美地满足您的需求。

# javascript - 如何处理显示为 GET 的 jQuery POST 数据到 apache？

> ID：15624166
> 
> 赞同：0
> 
> 时间：2013-03-25T20:30:43.330
> 
> 标签：javascript, jquery, apache, post, get

我正在尝试通过 json ajax jQuery 将数据发布到 apache webserver/API。我都试过了：

```
$.ajax({type: "post", {name:val} ... ... }); 
```

和

```
$.post({{name:val}... ... }); 
```

在 Firebug 输出中，我得到：“POST”调用，看起来不错。

但在 Apache 方面，我收到了“GET”调用（在日志访问文件上）

如何使用 jquery 管理帖子？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:36:25.047

乍一看，这是一个简单的问题。您没有指定将数据路由到的 url。除非............意味着您的 ajax 调用还有更多内容。如果是，请提供代码。否则，这里是 ajax api 的链接。[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

典型的例子看起来像

```
$.ajax({
  type: "POST",
  url: "path/to/your/script/on/the/server.fileExtention",
  data: { name: "John", location: "Boston" }
}).done(function( data ) {
  alert( "Data Saved: " + data );
}); 
```

# c# - 在整个 C# Windows Store 应用程序中集成 Facebook

> ID：15624174
> 
> 赞同：0
> 
> 时间：2013-03-25T20:31:05.693
> 
> 标签：c#, facebook, windows-8, facebook-c#-sdk, windows-store-apps

github 上的 C# Facebook SDK 主机允许 Windows Store 应用程序通过应用程序登录到他们的帐户并通过应用程序发布例如状态或应用程序相关内容，但是仍然有一些我不明白的概念。

首先，是否只有在我登录当前会话后才能执行 facebook 相关任务。我可以不登录一次（例如，当我第一次下载应用程序时）然后让应用程序保留我的设置。然后，每当我想通过我的应用程序发布一些内容并且可以立即进行，而不必再次登录（在同一个或另一个会话中）时，我希望在我的应用程序中我能够通过设置魅力中的一个选项将导航到 my `HomePage.xaml`，然后我将能够为多个会话保存该登录状态。目前我已经开始运行了（虽然不完全，我可以登录，但现在就是这样），但是我/我如何在未来的会话中自动发布内容而无需再次登录？

其次，许多与 Facebook 应用程序集成的应用程序允许用户通过 Facebook 应用程序对应方发布存储在其本地应用程序或网络用户帐户中的数据。这是如何执行的？

假设我有一个`MyDataClass`包含属性的类`DataTitle`，`DataItem1`并且`DataItem2`. 我希望能够将其发送到我的墙上，并将其显示为普通帖子（此类功能的示例包括 ask.fm 和 formspring 之类的东西。）然后我什至可以通过我的存储这些数据吗？ Facebook 应用程序，并能够根据他们的意愿将其发送给用户的朋友？

如果有人可以向我解释这些事情，我将不胜感激。我已经搜索了几天，还没有回答这些更大的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:06:17.967

Facebook C# SDK 可以通过[NuGet](http://nuget.org/List/Packages/Facebook)使用，也可以从[GitHub](http://github.com/facebook-csharp-sdk/facebook-csharp-sdk/)获取库。当任何用户通过 Facebook 登录时，登录结果返回“Access Token”。它在所有 Facebook 用户中都是独一无二的。您可以将该访问令牌保存在单个用户的`LocalSetting`. 本地设置文档可以在[这里](http://msdn.microsoft.com/en-in/library/windows/apps/windows.storage.applicationdata.localsettings)找到。可以通过这种方式使用本地设置。

```
//create instance of local settings
var localSettings = Windows.Storage.ApplicationData.Current.LocalSettings;

// Create a setting
localSettings.Values["FB_Access_Token"] = "THIS_IS_DUMMY_ACCESS_TOKEN";

// Read data from a setting
var objFbAccessToken = localSettings.Values["FB_Access_Token"];

if (objFbAccessToken == null)
{
    // No data
    // Do relogin of Facebook and save new facebook token
}
else
{
    // Access user's Facebook data with help of Facebook C# SDK and Access Token
}

// Delete a setting
localSettings.Values.Remove("objFbAccessToken"); 
```

请参阅[此](https://developers.facebook.com/docs/howtos/login/extending-tokens/)以扩展访问令牌。

[从 Facebook 获取长期访问令牌](https://stackoverflow.com/questions/10467272/get-long-live-access-token-from-facebook)

# sql - SQL 命令未正确结束或标识符无效

> ID：15624175
> 
> 赞同：0
> 
> 时间：2013-03-25T20:31:06.347
> 
> 标签：sql, oracle

无法确定此查询导致异常的原因。任何帮助表示赞赏。

ORA-00933: SQL 命令未正确结束

`SELECT COUNT(sd.URI) AS OrchCount FROM SDETAIL AS sd, ORCH_ASSOC AS orch WHERE sd.uri=orch.OPERATION_ AND sd.LEVEL='OrchA'`

```
SELECT COUNT(SDETAIL.URI) AS OrchCount FROM SDETAIL WHERE SDETAIL.URI=ORCH_ASSOC.OPERATION_ AND SDETAIL.COMPONENTLEVEL='OrchA' 
```

ORA-00904: "ORCH_ASSOC"."OPERATION_": 标识符无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:38:38.367

该`AS`关键字仅用于分配列别名，而不是表：

```
FROM SDETAIL AS sd, ORCH_ASSOC AS orch 
```

您可以省略`AS`它，它应该可以正常工作：

```
FROM SDETAIL sd, ORCH_ASSOC orch 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:39:37.307

@clav 关于 ORA-00904 是正确的。至于 ORA-00933，那是因为你这样做了：

```
... FROM SDETAIL AS sd 
```

改为这样做（没有“as”）：

```
... FROM SDETAIL sd 
```

# javascript - 我的 JavaScript 有什么问题应该通过 Web API（在 Azure 上）返回 JSON

> ID：15624177
> 
> 赞同：0
> 
> 时间：2013-03-25T20:31:10.327
> 
> 标签：javascript, jquery, asp.net-web-api

我是 JavaScript/Jquery 的新手，我的第一个“现实世界”应用程序遇到了问题。对于这个应用程序，我需要使用 Web API 从我的 Azure 网站下载 JSON。这是我的代码：

```
 function returnClientJSON() {
    var value = "novi";
    var valueType = "city";
    //$.getJSON("http://myazuresite.azurewebsites.net/api/location/?q=" + valueType & "&v=" + value,
    $.getJSON("http://myazuresite.azurewebsites.net/api/location/?q=city&v=novi",
    function (data) {
        $.each(data, function (key, val) {
            var str = val.Name + ': ' + val.City;

            $('<li/>', { text: str })
            .appendTo($('#clients'));
        });
    });
} 
```

我知道 API 有效，因为我可以通过直接访问 URL 来获得结果。并且使用 Firebug（我使用它的经验有限，所以我可能会遗漏一些东西）我可以告诉服务器没有返回任何结果或任何错误，这些结果会给我一个错误提示。我也通过谷歌知道这可能是 CORS 的问题，我对此一无所知。

因此，我将进一步调查 CORS，但我想问一下我上面的代码是否有任何明显错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:50:28.620

原来我遇到的问题是跨域引起的，我找到了这篇文章，“ [ASP.NET Web APIs 中的 CORS 支持 - RC 版](http://code.msdn.microsoft.com/CORS-support-in-ASPNET-Web-01e9980a)”，作者是 Carlos Figueira。我下载了示例代码，将包含的 CorsHandler 添加到我的项目中，将处理程序添加到 Global.asax，它就可以工作了。

# sql - 立即模式和错误的 Oracle DDL 执行

> ID：15624178
> 
> 赞同：3
> 
> 时间：2013-03-25T20:31:13.587
> 
> 标签：sql, oracle, show, mode

在对执行立即和错误处理的各种问题进行了大约两个小时的研究之后，我认为我没有遇到我即将提出的问题。我已将我的问题简化为下面的示例。问题是：

当我使用变量中的创建文本和创建文本中的语法错误以立即模式执行过程创建时，执行立即调用会引发错误，指示它失败。但我无法理解潜在的错误或其文本。

但是，当我直接在 sqlplus（无中间模式）中创建相同的 proc 时，得到错误的效果很好。

那么，如何解决导致立即模式失败的错误呢？

我在输出中穿插了我的评论 (MOP) 并减少了空白行的数量：

```
SQL*Plus: Release 10.2.0.1.0 - Production on Mon Mar 25 15:57:06 2013
Copyright (c) 1982, 2005, Oracle.  All rights reserved.
Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

SQL> set serveroutput on

SQL> declare
  2    eSQL varchar(568);
  3  begin
  4        eSQL := 'create or replace procedure MOPMOP
  5  as
  6  begin
  7      select 1 from dual;
  8  end;
  9  ';
 10        execute immediate eSQL;
 11  end;
 12  /
ERROR:
ORA-24344: success with compilation error
ORA-06512: at line 10
Warning: PL/SQL compilation errors. 
```

这很好。有编译错误。所以，现在让我问一下那个编译错误是什么：

```
SQL> show errors;
No errors. 
```

这不好。有编译错误。它以前如何！？！？！？与之对比：

```
SQL> create or replace procedure MOPMOP
  2  as
  3  begin
  4      select 1 from dual;
  5  end;
  6  /

Warning: Procedure created with compilation errors. 
```

这很好。有编译错误。所以，现在让我问一下那个编译错误是什么：

```
SQL> show errors;
Errors for PROCEDURE MOPMOP:

LINE/COL ERROR
-------- -----------------------------------------------------------------
4/5  PLS-00428: an INTO clause is expected in this SELECT statement
SQL> 
```

这很好。有编译错误。现在我知道是什么了。

那么，如何让中间模式吐出潜在的（00428）错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:12:24.437

当您`show errors`自己运行时，它将显示 sqlplus 本身所做的任何先前“创建”/“更改”的错误，这在这种情况下什么都没有（因为由于动态 SQL，它对 sqlplus 隐藏了）

您必须明确地说您想查看此案例的程序错误：

```
SQL> declare
  2    eSQL varchar(568);
  3  begin
  4        eSQL := 'create or replace procedure MOPMOP
  5  as
  6  begin
  7      select 1 from dual;
  8  end;
  9  ';
 10        execute immediate eSQL;
 11  end;
 12  /
ERROR:
ORA-24344: success with compilation error
ORA-06512: at line 10

Warning: PL/SQL compilation errors.

SQL> show errors procedure mopmop
Errors for PROCEDURE MOPMOP:

LINE/COL ERROR
-------- -----------------------------------------------------------------
4/5      PLS-00428: an INTO clause is expected in this SELECT statement
SQL> 
```

由于创建运行服务器端而不是通过 sqlplus，sqlplus 不知道失败，因此无法正确获取错误。

此外，如果您之前有过失败，它会保留：

```
SQL> create or replace procedure MOPMOP2
  2  as
  3  begin
  4      select 1 from dual;
  5  end;
  6  /

Warning: Procedure created with compilation errors.

SQL> declare
  2    eSQL varchar(568);
  3  begin
  4        eSQL := 'create or replace procedure MOPMOP
  5  as
  6  begin
  7      select 1 from dual;
  8  end;
  9  ';
 10        execute immediate eSQL;
 11  end;
 12  /
ERROR:
ORA-24344: success with compilation error
ORA-06512: at line 10

Warning: PL/SQL compilation errors.

SQL> show errors
Errors for PROCEDURE MOPMOP2:

LINE/COL ERROR
-------- -----------------------------------------------------------------
4/5      PLS-00428: an INTO clause is expected in this SELECT statement
SQL> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:49:09.443

您不能在 PL/SQL 中使用 select 1 from dual...。必须使用 select into。在这两种情况下，您都在创建 PL/SQL 过程而不是一些 SQL 脚本。

```
declare
   x number;
begin 
  select 1 into x from dual;
end;
/

declare
  procedure MOPMOP
  as
    x number;
 begin
   select 1 into x from dual;
   dbms_output.put_line(x);
 end MOPMOP;
begin
 MOPMOP;
end;
/ 
```

避免 ORA-24344 - 虽然我可能永远不会为此使用动态 sql：

```
declare
  eSQL varchar(568);
  x number;
begin  
  eSQL := 'create or replace procedure MOPMOP as 
           begin 
             select 1 into x from dual; 
           end;';            
  execute immediate eSQL;
  EXCEPTION WHEN OTHERS THEN NULL;
end;
/ 
```

# twitter-bootstrap - angularjs boostrap手风琴无法解析标题

> ID：15624179
> 
> 赞同：2
> 
> 时间：2013-03-25T20:31:14.783
> 
> 标签：twitter-bootstrap, angularjs, angular-ui

[我直接从http://angular-ui.github.com/bootstrap/](http://angular-ui.github.com/bootstrap/)的 Accordion 部分复制了演示代码，除了 header="{{group.title}}" 不能解析 title 属性之外，它都可以工作。在我的网页上，我正确获得了手风琴正文，但 {{group.title}} 显示为标题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:27:48.933

如上面的评论所述，如果不查看实时代码示例，就不可能诊断出您面临的问题。在从演示页面分叉的 plunker 上，它可以正常工作：plnkr.co/edit/OuDZna?p=preview

我想到的唯一可能导致这种问题行为的是使用的**AngularJS 版本**。[如http://angular-ui.github.com/bootstrap/](http://angular-ui.github.com/bootstrap/)上的“入门”中所述，您至少需要 1.0.4（如果您在不稳定的分支上，则需要 1.1.2）。在早期版本的 AngularJS 中存在一些破坏插值的错误。

# soundcloud - 从 Soundcloud API 获取 artifact_url 并在自定义 SC/SM2 播放器中显示专辑封面

> ID：15624181
> 
> 赞同：2
> 
> 时间：2013-03-25T20:31:18.507
> 
> 标签：soundcloud, audio-streaming, soundmanager2

我一直在试图弄清楚如何`artwork_url`从[soundclouds API](http://developers.soundcloud.com/docs/api/reference#tracks)中使用，以便将*每个*封面输出到[这个自定义播放器](https://github.com/kilokeith/soundcloud-soundmanager-player/issues?state=open)中，并在播放列表中将每个适当的拇指放在它自己的曲目旁边？

我知道我需要使用该`artwork_url`属性，但是我不明白这是如何实现的，也不知道如何将它集成到[这个特定的自定义播放器插件](https://github.com/kilokeith/soundcloud-soundmanager-player/issues?state=open)中。
特别感谢任何代码示例和/或帮助！
*注意：也很高兴能够通过其他方式控制艺术品的“大小”，而不仅仅是 CSS。*

最好的

* * *

**编辑#1**

我在 Heroku 上切换了[Soundcloud 自定义播放器，](http://soundcloud-sm2.heroku.com/)因为在我能够启动并运行它之后，我发现它的加载时间比我上面引用的原始播放器要快得多（尽管那个播放器仍然非常棒）.. .

我现在仍然摆出与以前相同的任务 - 如何将专辑封面添加到脚本并相应地输出？

下面粘贴的是[Heroku](http://soundcloud-sm2.heroku.com/docs/application.html)播放器：

```
// # SoundCloud Custom Player

// Make sure to require [SoundManager2](http://www.schillmania.com/projects/soundmanager2/) before this file on your page.
// And set the defaults for it first:

soundManager.url = 'http://localhost:8888/wp-content/themes/earpeacerecords/swf';
soundManager.flashVersion = 9;
soundManager.useFlashBlock = false;
soundManager.useHighPerformance = true;
soundManager.wmode = 'transparent';
soundManager.useFastPolling = true;

// Wait for jQuery to load properly

$(function(){

    // Wait for SoundManager2 to load properly

    soundManager.onready(function() {

        // ## SoundCloud
        // Pass a consumer key, which can be created [here](http://soundcloud.com/you/apps), and your playlist url.
        // If your playlist is private, make sure your url includes the secret token you were given.

        var consumer_key = "915908f3466530d0f70ca198eac4288f",
                url = "http://soundcloud.com/poe-epr/sets/eprtistmix1";     

        // Resolve the given url and get the full JSON-worth of data from SoundCloud regarding the playlist and the tracks within.

        $.getJSON('http://api.soundcloud.com/resolve?url=' + url + '&format=json&consumer_key=' + consumer_key + '&callback=?', function(playlist){

            // I like to fill out the player by passing some of the data from the first track.
            // In this case, you'll just want to pass the first track's title.

            $('.title').text(playlist.tracks[0].title);

            // Loop through each of the tracks

            $.each(playlist.tracks, function(index, track) {

                // Create a list item for each track and associate the track *data* with it.

                $('<li>' + track.title + '</li>').data('track', track).appendTo('.tracks');

                // * Get appropriate stream url depending on whether the playlist is private or public.
                // * If the track includes a *secret_token* add a '&' to the url, else add a '?'.
                // * Finally, append the consumer key and you'll have a working stream url.

                url = track.stream_url;

                (url.indexOf("secret_token") == -1) ? url = url + '?' : url = url + '&';

                url = url + 'consumer_key=' + consumer_key;

                // ## SoundManager2
                // **Create the sound using SoundManager2**

                soundManager.createSound({

                    // Give the sound an id and the SoundCloud stream url we created above.

                    id: 'track_' + track.id,
                    url: url,

                    // On play & resume add a *playing* class to the main player div.
                    // This will be used in the stylesheet to hide/show the play/pause buttons depending on state.

                    onplay: function() {

                        $('.player').addClass('playing');

                        $('.title').text(track.title);

                    },
                    onresume: function() {

                        $('.player').addClass('playing');

                    },

                    // On pause, remove the *playing* class from the main player div.

                    onpause: function() {
                        $('.player').removeClass('playing');
                    },

                    // When a track finished, call the Next Track function. (Declared at the bottom of this file).

                    onfinish: function() {
                        nextTrack();
                    }

                });

            });

        });

        // ## GUI Actions

        // Bind a click event to each list item we created above.

        $('.tracks li').live('click', function(){

            // Create a track variable, grab the data from it, and find out if it's already playing *(set to active)*

            var $track = $(this),
                    data = $track.data('track'),
                    playing = $track.is('.active');

            if (playing) {

                // If it is playing: pause it.

                soundManager.pause('track_' + data.id);             

            } else {

                // If it's not playing: stop all other sounds that might be playing and play the clicked sound.

                if ($track.siblings('li').hasClass('active')) { soundManager.stopAll(); }

                soundManager.play('track_' + data.id);

            }

            // Finally, toggle the *active* state of the clicked li and remove *active* from and other tracks.

            $track.toggleClass('active').siblings('li').removeClass('active');

        });

        // Bind a click event to the play / pause button.

        $('.play, .pause').live('click', function(){

            if ( $('li').hasClass('active') == true ) {

                // If a track is active, play or pause it depending on current state.

                soundManager.togglePause( 'track_' + $('li.active').data('track').id ); 

            } else {

                // If no tracks are active, just play the first one.

                $('li:first').click();

            }

        });

        // Bind a click event to the next button, calling the Next Track function.

        $('.next').live('click', function(){
            nextTrack();
        });

        // Bind a click event to the previous button, calling the Previous Track function.

        $('.prev').live('click', function(){
            prevTrack();
        });

        // ## Player Functions

        // **Next Track**

        var nextTrack = function(){

            // Stop all sounds

            soundManager.stopAll();

            // Click the next list item after the current active one. 
            // If it does not exist *(there is no next track)*, click the first list item.

            if ( $('li.active').next().click().length == 0 ) {
                $('.tracks li:first').click();
            }

        }

        // **Previous Track**

        var prevTrack = function(){

            // Stop all sounds

            soundManager.stopAll();

            // Click the previous list item after the current active one. 
            // If it does not exist *(there is no previous track)*, click the last list item.

            if ( $('li.active').prev().click().length == 0 ) {
                $('.tracks li:last').click();
            }

        }

    });

}); 
```

* * *

**编辑#2**

所以我奇怪地能够解决一些问题......但是我不知道它在语义上是否正确......

```
$.getJSON('http://api.soundcloud.com/resolve?url=' + url + '&format=json&consumer_key=' + consumer_key + '&callback=?', function(playlist){

            // I like to fill out the player by passing some of the data from the first track.
            // In this case, you'll just want to pass the first track's title.

            $('.title').text(playlist.tracks[0].title);
            $('.album_art').attr('src', playlist.artwork_url);

            // Loop through each of the tracks

            $.each(playlist.tracks, function(index, track) {

                // Create a list item for each track and associate the track *data* with it.

                $('<li>' + '<img src="' + playlist.artwork_url + '">' + track.title + '</li>').data('track', track).appendTo('.tracks');

                // * Get appropriate stream url depending on whether the playlist is private or public.
                // * If the track includes a *secret_token* add a '&' to the url, else add a '?'.
                // * Finally, append the consumer key and you'll have a working stream url.

                url = track.stream_url;

                (url.indexOf("secret_token") == -1) ? url = url + '?' : url = url + '&';

                url = url + 'consumer_key=' + consumer_key;

                // ## SoundManager2
                // **Create the sound using SoundManager2**

                soundManager.createSound({

                    // Give the sound an id and the SoundCloud stream url we created above.

                    id: 'track_' + track.id,
                    url: url,

                    // On play & resume add a *playing* class to the main player div.
                    // This will be used in the stylesheet to hide/show the play/pause buttons depending on state.

                    onplay: function() {

                        $('.player').addClass('playing');

                        $('.title').text(track.title);

                    },
                    onresume: function() {

                        $('.player').addClass('playing');

                    },

                    // On pause, remove the *playing* class from the main player div.

                    onpause: function() {
                        $('.player').removeClass('playing');
                    },

                    // When a track finished, call the Next Track function. (Declared at the bottom of this file).

                    onfinish: function() {
                        nextTrack();
                    }

                });

            }); 
```

* * *

**编辑#3**

下面是与播放器一起使用的 HTML 和 CSS 标记，以便更清楚地说明...

**HTML**

```
 <div class='title'></div>
            <a class='prev'>Previous</a>
            <a class='play'>Play</a>
            <a class='pause'>Pause</a>
            <a class='next'>Next</a>
        </div> 
```

**CSS**

```
/* 
-------------------------------------------------------------------------
Soundcloud Player
-------------------------------------------------------------------------
*/

#sticky_header #sticky_content .player {
    height: 570px;
    overflow: hidden;
}

#sticky_header #sticky_content .tracks {

}

#sticky_header #sticky_content .tracks li {
    cursor: pointer;    
    height: 40px;
    text-align: left;
}

#sticky_header #sticky_content .tracks li img.album_art {
    width: 40px;
    height: 40px;
    border-radius: 5px;
    margin-right: 15px; 
}

#sticky_header #sticky_content .title {

}

#sticky_header #sticky_content .prev {

}

#sticky_header #sticky_content .play {
    display: block; 
}

#sticky_header #sticky_content .playing .play {
    display: none; 
}

#sticky_header #sticky_content .pause {
    display: none; 
}

#sticky_header #sticky_content .playing .pause {
    display: block; 
}

#sticky_header #sticky_content .next {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-16T10:15:51.857

要获取图像，您可以使用以下代码：

```
//get element by id from your iframe
var widget = SC.Widget(document.getElementById('soundcloud_widget'));
widget.getCurrentSound(function(music){
    artwork_url = music.artwork_url.replace('-large', '-t200x200');
    $('#song1').css('background', 'url(\"'+artwork_url+'\") ');
}); 
```

通常，您最后会得到一个带有“-large”的链接，大小为100x100。如果你想要其他尺寸，你必须像我一样用“.replace”改变结尾。您可以在此处找到包含可用尺寸的列表：

[https://developers.soundcloud.com/docs/api/reference#tracks](https://developers.soundcloud.com/docs/api/reference#tracks) （我的尺寸 200x200 未列出但有效。也许每百像素有更多尺寸。）

目前该代码仅适用于实际播放的歌曲。对我来说，这不是一个解决方案，因为我需要播放列表中的所有图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T21:00:21.830

下面是对从 API 检索到的轨迹进行迭代的地方：

```
// Loop through each of the tracks
$.each(playlist.tracks, function(index, track) {
  // Create a list item for each track and associate the track *data* with it.
  $('<li>' + track.title + '</li>').data('track', track).appendTo('.tracks'); 
```

在迭代器函数内部，您现在可以访问`track.artwork_url`并可能将其设置为背景图像或某些元素的背景，可能类似于：

```
$('<li><img src=" + track.artwork_url + "></img>' + track.title + '</li>').data('track', track).appendTo('.tracks'); 
```

我希望这有帮助。

**升级版**。在您更新的代码中，您应该参考`track.artwork_url`而不是`playlist` – 然后您将获得每首曲目的单独艺术品。

# internationalization - i18 对母语的支持

> ID：15624182
> 
> 赞同：1
> 
> 时间：2013-03-25T20:31:19.893
> 
> 标签：internationalization, plone

在南非，我们有 11 种官方语言：

```
af = Afrikaans
en = English
nr = Ndebele
nso = Pedi / Nothern Sotho
ss = Swati
st = South Sotho
tn = Tswana
ts = Tsonga
ve = Venda
xh = Xhosa
zu = Zulu 
```

Plone 在多大程度上支持提到的语言？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T21:57:50.007

您可以在以下位置找到 Plone 的现有翻译：[https ://github.com/collective/plone.app.locales/tree/master/plone/app/locales/locales](https://github.com/collective/plone.app.locales/tree/master/plone/app/locales/locales)

在你名单上的那些中，在快速回顾中我只看到了英语和南非荷兰语。有几个活跃的南非 Plone 开发人员（ZA 是最近 sprint 的站点），您可能想看看是否有可能在其他翻译上进行协作。Plone SA 组：[https ://groups.google.com/forum/?fromgroups#!forum/plonesa](https://groups.google.com/forum/?fromgroups#!forum/plonesa)

# dynamic - 如何删除按钮单击（vb.net）上的文本框？

> ID：15624184
> 
> 赞同：0
> 
> 时间：2013-03-25T20:31:29.097
> 
> 标签：dynamic, textbox, runtime

我不知道如何通过单击 Windows 表单中的按钮来删除文本框。

这是我的故事：

最初，我想通过单击按钮添加文本框，在网上搜索后，我能够在这个论坛上找到如何做到这一点。[https://stackoverflow.com/questions/15461978/adding-new-textbox-with-button-click](https://stackoverflow.com/questions/15461978/adding-new-textbox-with-button-click)

我使用了用户“Rajaprabhu Aravindasam”（第二个答案）给出的代码。这只是我使用的部分代码（为了不让你感到困惑）：

```
Private Sub Button_AddTask_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button_AddTask.Click
    count += 1

    TabPage_TaskStructure.Controls.Add(New Label() With _
                                       {.Name = "Label_Task" & count})
    TabPage_TaskStructure.Controls.Add(New RichTextBox() With _
                                       {.Name = "RichTextBox" & count})      
End Sub 
```

现在，如您所见，按钮“Button_AddTask”（我的表单上的“+”按钮）的目的是创建富文本框及其各自的标签。假设富文本框和标签是在彼此下方创建的。

在“+”按钮旁边，有一个“-”按钮。我想要的是使用这个“-”按钮依次删除所有创建的文本框。也就是说，如果我用“+”按钮创建了4个文本框，当我点击“-”按钮时，第4个文本框将首先被删除，然后不会。3 后单击第二次，然后 no.2 后单击第三次，依此类推。

顺序部分不是问题，我完全知道该怎么做。这是我尝试过的部分代码：

```
Private Sub Button_DeleteTask_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button_DeleteTask.Click
    TabPage_TaskStructure.Controls.Remove(New Label() With _
                                       {.Name = "Label_Task" & count})
    TabPage_TaskStructure.Controls.Remove(New RichTextBox() With _
                                       {.Name = "RichTextBox" & count})

    count -= 1

    If count = 1 Then
        Button_DeleteTask.Visible = False
    End If
End Sub 
```

从逻辑上讲，我所做的只是将“添加”替换为“删除”，但我不知道用什么替换“新建”。所以我的问题是：需要使用什么来代替“新”？如果我需要使用完全不同的代码，请告诉我。

任何帮助是极大的赞赏。

## 更新：

好的，自从我提出这个问题以来，我已经做了一些研究，并且我已经能够推断出可以通过使用 For Each 循环来完成控件（标签和富文本框）的删除。在我的“-”按钮代码中，我已将前 4 行代码替换为：

```
Dim Ctrl As Control
For Each Ctrl In TabPage_TaskStructure.Controls
    If TypeOf Ctrl Is Label And Ctrl.Name = "Label_Task" & count Then
       TabPage_TaskStructure.Controls.Remove(Ctrl)
    ElseIf TypeOf Ctrl Is RichTextBox And Ctrl.Name = "RichTextBox" & count Then
        TabPage_TaskStructure.Controls.Remove(Ctrl)
    End If
Next 
```

因此，当我单击“-”按钮时，程序会检查选项卡页 (TabPage_TaskStructure) 上的每个控件是名称为 ("Label_Task" & count') 的标签还是名称为 ("RichTextBox) 的富文本框" & count)，如果是，它们将被删除。其余代码相同。

它正在工作，但并不完全。它适用于标签，因为它们已成功删除，但不适用于富文本框。我不明白为什么。我已经尝试了其他控件的代码，例如日期时间选择器和文本框，但它也不适用于其中任何一个。它似乎只适用于标签。

另外，我尝试在默认的富文本框中使用该代码，并且成功了！但是对于在运行时创建的富文本框，它不起作用。

有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T22:24:05.373

我不太擅长 vb，但从简单的逻辑来看，如果以及当接受“IF”参数时，代码将移至“End If”并跳过“Else”。试试这个：

```
Dim Ctrl As Control
    For Each Ctrl In TabPage_TaskStructure.Controls
        If TypeOf Ctrl Is Label And Ctrl.Name = "Label_Task" & count Then
            TabPage_TaskStructure.Controls.Remove(Ctrl)
        End If
        If TypeOf Ctrl Is RichTextBox And Ctrl.Name = "RichTextBox" & count Then
            TabPage_TaskStructure.Controls.Remove(Ctrl)
        End If
Next 
```

# asp.net-mvc - 如何在 DataAnnotationsModelMetadataProvider 派生类中获取模型实例？

> ID：15624189
> 
> 赞同：0
> 
> 时间：2013-03-25T20:31:52.883
> 
> 标签：asp.net-mvc, asp.net-mvc-2, asp.net-mvc-2-metadata

如何在 MVC2 的 DataAnnotationsModelMetadataProvider 派生类中获取模型实例？更准确地说，如何在 GetMetadataForProperty 派生方法中获取属性所属的模型实例？

# ember.js - 与 Ember、ember-data 和 Rails 的多对多关系

> ID：15624193
> 
> 赞同：7
> 
> 时间：2013-03-25T20:32:09.057
> 
> 标签：ember.js, many-to-many, has-many-through, ember-data, ember-rails

我在尝试使用 ember-data 和 rails 在 Ember.js 中保存多对多关系时遇到问题。该关联在 ember 方面工作正常，但是当我尝试提交事务时，它不会在提交到 rails 时包含新关联列表。任何帮助将不胜感激，我一直在努力寻找一个示例应用程序，该示例应用程序在 github 上执行如此简单的操作，但我似乎找不到。

这是我的 Ember 代码的简化版本：

```
App.Store = DS.Store.extend
  revision: 11
  adapter: DS.RESTAdapter.create
    url: '/api'

App.Router.map ->
  @resource 'rosters'
  @resource 'users'

App.User = DS.Model.extend
  rosters: DS.hasMany 'App.Roster'

App.Roster = DS.Model.extend
  users: DS.hasMany 'App.User'

App.RostersEditRoute = Ember.Route.extend
  setupController: (controller, model) ->
    controller.set 'users_list', App.User.find()

App.RostersEditView = Ember.View.extend
  userCheckbox: Em.Checkbox.extend
    checkedObserver: ( ->
      users = @get 'roster.users'
      if @get 'checked'
        users.addObject @get 'user'
      else
        users.removeObject @get 'user'
      @get('controller.store').commit()
    ).observes 'checked' 
```

编辑表格：

```
each user in users_list
  label.checkbox
    view view.userCheckbox rosterBinding="current_roster" userBinding="user" | #{user.full_name} 
```

Rails 后端（使用继承的资源和活动模型序列化器 gem）：

```
class User < ActiveRecord::Base
  has_many :rosters_users
  has_many :rosters, through: :rosters_users
  accepts_nested_attributes_for :rosters
end

class RostersUser < ActiveRecord::Base
  belongs_to :user
  belongs_to :roster
end

class Roster < ActiveRecord::Base
  has_many :rosters_users
  has_many :users, through: :rosters_users
  accepts_nested_attributes_for :users
end

module Api
  class RostersController < BaseController
  end
end

module Api
  class UsersController < BaseController
  end
end

module Api
  class BaseController < ActionController::Base
    inherit_resources

    respond_to :json
    before_filter :default_json

    protected

    # Force JSON
    def default_json
      request.format = :json if params[:format].nil?
    end
  end
end

class UserSerializer < BaseSerializer
  has_many :rosters, embed: :ids
end

class RosterSerializer < BaseSerializer
  has_many :users, embed: :ids
end 
```

所以就像我说的，关联在 Ember 上运行良好，但 rails 似乎没有获得新的关联数据。当我在网络检查器中查看 XHR 选项卡时，我看到它只发送了这个：

请求负载 {"roster":{"created_at":"Thu, 21 Mar 2013 23:16:02 GMT","team_id":"1"}}

我返回 204 no content 错误，因为没有任何改变。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T21:24:26.667

尽管可以设置匹配`hasMany`关系，但 Ember Data 实际上还不支持多对多关系（请参阅[此问题](https://github.com/emberjs/data/issues/120)）。您现在可以做的是使用成员模型分解关系。

```
App.User = DS.Model.extend
  rosterMemberships: DS.hasMany 'App.RosterMembership'      

App.RosterMembership = DS.Model.extend
  user: DS.belongsTo 'App.User'
  roster: DS.belongsTo 'App.Roster'

App.Roster = DS.Model.extend
  rosterMemberships: DS.hasMany 'App.RosterMembership' 
```

现在您可以使用`createRecord()`and`deleteRecord()`与成员资格模型来添加和删除关系。

不幸的是，在此示例中，绑定到特定用户的名册集合并不容易。一种解决方法如下：

```
App.User = DS.Model.extend
  rosterMemberships: DS.hasMany 'App.RosterMembership'
  rosters: ( ->
    @get('rosterMemberships').getEach('user')
  ).property 'rosterMemberships.@each.relationshipsLoaded'

App.RosterMembership = DS.Model.extend
  user: DS.belongsTo 'App.User'
  roster: DS.belongsTo 'App.Roster'
  relationshipsLoaded: ( ->
    @get('user.isLoaded') and @get('roster.isLoaded')
  ).property 'user.isLoaded', 'roster.isLoaded' 
```

如果您绑定到`user.rosters`，那么您的模板应该在创建或销毁关系时更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T18:00:14.617

替代解决方案：

```
App.Roster = DS.Model.extend
  users_map: DS.attr('array')
  users: DS.hasMany 'App.User'

  users_change: (->
    @set('users_map', @get('users').map((el) -> el.id).toArray())
  ).observes('users.@each') 
```

POST 数据中的服务器将发送用户 ID 数组

# image - vba power point 在单击时更改图像边框颜色

> ID：15624199
> 
> 赞同：0
> 
> 时间：2013-03-25T20:32:33.023
> 
> 标签：image, vba, colors, border, powerpoint

我正在尝试使用 Power Point 为更幼稚的孩子制作一个教育互动演示文稿，并且我正在尝试做一种测试/活动，孩子们必须根据问题点击一些图片。有些会是对的，有些不会。（例如：你能指出消防员使用的工具吗？并显示 4 张不同工具的图像）使用 mousemove 事件，我可以再现一个说出对象名称的声音，使用 click 事件我可以再现另一个声音告诉孩子“错”或“对”。现在，我想更改他们单击的图片的边框（颜色和或宽度），但我不知道如何在 VBA 中做到这一点。这一定很容易，但我不知道 sintax :-( 有什么帮助吗？拜托？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:14:52.327

你会感到惊讶，但它并不像你想象的那么容易，当然，在课堂和活动方面做得很好。

我会给你一个简单的想法，所以如果你有时间并且真的需要它，你可以这样做。但是会有一些问题——你必须弄清楚你怎么能得到你的形状的起始边界。

这是如何开始的想法。

1.  命名幻灯片上的每个形状 - 选择一个并在 VBA 编辑器的即时窗口中运行以下指令，例如：

    ```
    ActiveWindow.Selection.ShapeRange.Name = "Fireman" 
    ```

2.  更改每个形状的颜色和线写入宏（这将仅在幻灯片视图中运行）：

    ```
    Sub FiremanClick()

    With SlideShowWindows(1).View.Slide.Shapes("Fireman").Line
        .Weight = 2
        .ForeColor.RGB = RGB(255, 0, 0)
    End With

    End Sub 
    ```

3.  在应用程序中右键单击消防员形状并将操作与您编写的宏相关联。

4.  您将需要弄清楚如何设置每个形状的标准设置以及何时设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-08T20:35:07.410

由于某种原因，先设置边框形状颜色然后设置权重时会发生某种错误，形状边框颜色在 PowerPoint 2010 中变为通用蓝色。

# python - 发布打印字典/json 向客户端返回错误

> ID：15624201
> 
> 赞同：0
> 
> 时间：2013-03-25T20:32:34.587
> 
> 标签：python, python-2.7, tornado, marmalade

我在一些 json 数据的主体中发送 post 请求，以在服务器上进行处理，我希望结果以 json 数据的形式返回到客户端（手机上的 c++ 应用程序），从而在移动设备上进行解析。我在处理程序中有以下代码：

```
class ServerHandler(tornado.web.RequestHandler):
    def post(self):
        data = tornado.escape.json_decode(self.request.body)
        id = data.get('id',None)
        #process data from db (take a while) and pack in result which is dictinary
        result = process_data(id)# returns dictionary from db= takes time
        print 'END OF HANDLER'
        print json.dumps(result)

        #before this code below I have tried also
        #return result
        #return self.write(result)
        #return self.write(json.dumps(result)) 
        #return json.dumps(result)
        self.set_header('Content-Type', 'application/json')
        json_ = tornado.escape.json_encode(result)
        self.write(json_)
        self.finish()
        #return json.dumps(result) 
```

我总是在控制台上打印出来`'END OF HANDLER'`，但是当我在客户端手机上阅读时，我总是得到`valid dictinary/json`

```
<html><title>405: Method Not Allowed</title><body>405: Method Not Allowed</body></html> 
```

有谁知道什么是错误？
（我正在使用 CIwGameHttpRequest 发送请求，当文件为静态 =>name.json 但现在相同的内容在发布请求中给出错误时它可以工作。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:50:42.290

错误（HTTP 405 Method Not Allowed）表示您已向有效 URL 发出请求，但您使用的 HTTP 动词（例如`GET`, `POST`, `PUT`, `DELETE`）不能与该 URL 一起使用。

您的 Web 服务代码似乎可以处理`POST`动词，`post`方法名称以及传入请求似乎具有请求正文的事实都证明了这一点。您还没有向我们展示您的 C++ 客户端代码，所以我所能做的就是推测它正在发出`GET`请求。你的 C++ 代码调用了`Request->setPOST();`吗？（我以前没有使用`CIwGameHttpRequest`过，但是谷歌搜索我找到[了这个页面](http://www.appeasymobile.com/forum/reports-bugs/339-post-issue)，我从中获取了那行代码。）

我以前没有使用过 Tornado，但我想在某处有某种机制允许您将 URL 连接到`RequestHandler`. 鉴于您有 405 Method Not Allowed 错误，而不是 404 Not Found，看来无论如何您已经正确完成了。您向 Tornado 发出`GET`URL 请求，它确定它应该调用您的处理程序，并且只有当它尝试使用您的处理程序时，它才意识到它无法处理`GET`请求，并得出结论认为您的处理程序（以及它的 URL）没有t 支持`GET`s 并返回 405 错误。

# python - 如何将输入存储为十六进制数？

> ID：15624209
> 
> 赞同：0
> 
> 时间：2013-03-25T20:32:59.203
> 
> 标签：python, python-3.x, hex

我一直在开发一个 python 应用程序，它可以将十进制数转换为十六进制数，然后反过来。我无法将用户输入存储为十六进制数字。这对于我的程序的运行非常重要，因为我需要询问他们想将哪个数字转换回十进制数字。我只需要将其存储为字符串或整数以外的其他数据类型，但仍需要提示。

到目前为止，我已经尝试过这种方法：

```
num = int(hex(input("Which Hexadecimal number would you like to convert to decimal/denary?  \n"))) 
```

但它仍然认为十六进制数实际上是一个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:36:28.837

`hex()`将整数转换为十六进制表示形式，即字符串。`input()`而是返回一个字符串值。

您只想存储用户*直接*输入的值：

```
num = input("Which Hexadecimal number would you like to convert to decimal/denary?  \n")) 
```

然后，您可以通过尝试将其转换为十进制来验证它*是否*为十六进制数`int()`：

```
try:
    decimal = int(num, 16)  # interpret the input as a base-16 number, a hexadecimal.
except ValueError:
    print("You did not enter a hexadecimal number!") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T23:19:28.033

这是提示输入十六进制时我使用的方法。

首先，只需接受它作为常规输入

```
hexValue1 = input("Input first hex value") 
```

然后，像这样将其转换为相应的整数

```
hexValue1 = int(hexValue1, 16) 
```

现在您可以使用相应的整数执行您想要的任何数学函数，如果您希望将结果作为十六进制值返回，请务必按此返回

```
print(hex(hexValue1)) 
```

或者您想要返回值的任何其他方式。它将返回典型的 0xaa11 格式的字符串。因此，您可能需要进一步转换它以使用它。

例如，一个简单的程序采用两个十六进制值输入并对两者进行异或并返回十六进制结果如下所示：

```
hex1 = input("Hex 1 ")
hex1 = int(hex1, 16)
hex2 = input("Hex 2 ")
hex2 = int(hex2, 16)
xor = hex1 ^ hex2

print(hex(xor)) 
```

# javascript - 放大点击大图到点击坐标

> ID：15624211
> 
> 赞同：0
> 
> 时间：2013-03-25T20:33:12.190
> 
> 标签：javascript, jquery, zooming

所以我有一个大的 jpg，12000px 宽 x 1000px 高。我正在寻找一个网站，在页面加载时图像大小为 50%，但是当用户单击图像一次时，它会放大到 100%，然后在第二次单击时，它会缩小到原始大小。

由于图像的大小如此之大，它需要在页面加载和缩放状态下都可以拖动。

我一直在玩这个，但代码并不是我想要做的。

[http://designshack.net/tutorialexamples/jQueryZoom/ZoomTest.html](http://designshack.net/tutorialexamples/jQueryZoom/ZoomTest.html)

相反，我希望基本上做与该站点的放大状态相同的事情，减去单击进入缩放状态的步骤。

[http://yogasmoga.com/women/run-jump-n-play-crop-462](http://yogasmoga.com/women/run-jump-n-play-crop-462)

如果有人有他们用过的插件，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:55:47.490

不。最简单的——尤其是用于演示的时候——就是使用两张图片。image1.onclick -> 显示 image2；image2.onclick -> 显示 image1。节省编码，做你想做的事。

# html - 悬停时文本偏移 1px 并带有颜色过渡

> ID：15624212
> 
> 赞同：0
> 
> 时间：2013-03-25T20:33:19.813
> 
> 标签：html, css, webkit

在[此](http://novaember.com/discussions/1)网页上，当您将评分悬停在每个帖子的右侧时，图标将在颜色过渡时向左偏移 1px。但是，这只发生在 Chrome 中，也许还有 Safari，但不会发生在 Firefox 中。

这是一个错误吗？我的代码有问题吗？

图标本身来自字体 FontAwesome。
当我尝试在 jsfiddle 中重新创建页面的这一部分时，该错误没有发生。

这就是我所看到的：

![动画](../Images/caa8deee7254c10e267c1aab83d9db28.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:06:17.690

我确实在 Chrome 中看到了这个问题，但在 Firefox 中没有。我可以通过对您的 CSS 规则之一进行细微调整来解决此问题：

```
.post-ratings-rating {
    ...
    font-family: FontAwesome;
    font-size: 1.5em;
    width: 30px;
    ...
} 
```

如果您`width`使用像素将 更改为绝对值，则图标不会移动。相对单位是问题的根源。为什么？我怀疑浏览器在从 em 转换为 px 时会采用不同的算法。

# jquery - 使用 .remove() 属性 jquery 删除 img 标签

> ID：15624219
> 
> 赞同：0
> 
> 时间：2013-03-25T20:33:51.953
> 
> 标签：jquery

我正在尝试使用其with属性`<img>`从函数中删除标签，但它不起作用。您可以在下面找到我正在执行的操作的简单代码：`id``.remove()`

```
<script>
function verify(img)
{
   if(/*somecondition*/)
   removetag_setother();
   else
   //do something
}
function removetag_setother()
{
   $("#1").remove();
   text="<p>hello</p>";
   $("body").append(text);
}
</script>
<body>
<img id="1" onclick="verify(this)" src="image1.png">
</body> 
```

查看控制台日志记录我收到此消息： **ReferenceError: $ is not defined**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:42:55.110

问题是空的`if`和`else`语句。替换`if(/*somecondition*/)`为`if(true)`并注释掉该`else`子句。

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script>
function verify(img)
{
   if(true)
       removetag_setother();
   //else
       //do something
}
function removetag_setother()
{
   $("#1").remove();
   text="<p>hello</p>";
   $("body").append(text);
}
</script>
<body> 
```

# objective-c - CLLocationManager 不调用委托

> ID：15624222
> 
> 赞同：0
> 
> 时间：2013-03-25T20:34:07.227
> 
> 标签：objective-c, macos, cllocationmanager

我正在开发一个 Mac 应用程序。以下是一个最小化的测试用例。似乎 CLLocationManager 没有调用任何委托方法。你看有什么不对吗？

```
#import <Foundation/Foundation.h>
#import <CoreLocation/CoreLocation.h>

@interface Delegate : NSObject <CLLocationManagerDelegate>
@property (strong, nonatomic) CLLocationManager *locationManager;
@property (nonatomic) BOOL once;
@end

@implementation Delegate;
@synthesize locationManager = _locationManager;
@synthesize once = _once;

- (void)start:(BOOL)once
{
    self.once = once;
    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    self.locationManager.delegate = self;
    [self.locationManager startUpdatingLocation];
    NSLog(@"Location: %@", self.locationManager.location);
    NSLog(@"authorizationStatus: %d", [CLLocationManager authorizationStatus]);
    NSLog(@"locationServicesEnabled: %d", [CLLocationManager locationServicesEnabled]);
    NSLog(@"significantLocationChangeMonitoringAvailable: %d", [CLLocationManager significantLocationChangeMonitoringAvailable]);
    NSLog(@"headingAvailable: %d", [CLLocationManager headingAvailable]);
    NSLog(@"regionMonitoringAvailable: %d", [CLLocationManager regionMonitoringAvailable]);
}

- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation;
{
    printf ( "%s\n", [newLocation.description UTF8String]);
    if (self.once) exit(0);
}

- (void)locationManager:(CLLocationManager *)manager
       didFailWithError:(NSError *)error
{
    printf ( "ERROR: %s\n", [[error localizedDescription] UTF8String]);
    exit(1);
}
@end

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        BOOL once = (argc > 1 && strcmp(argv[1], "--once") == 0);
        Delegate *delegate = [[Delegate alloc] init];
        [delegate performSelectorOnMainThread:@selector(start:) withObject:[NSNumber numberWithBool:once] waitUntilDone:NO];
        NSRunLoop *runLoop = [NSRunLoop mainRunLoop];
        [runLoop run];
    }
    return 0;
} 
```

现在输出是：

```
2013-03-25 20:24:28.342 CoreLocationCLI[75031:303] Location: (null)
2013-03-25 20:24:28.344 CoreLocationCLI[75031:303] authorizationStatus: 0
2013-03-25 20:24:28.345 CoreLocationCLI[75031:303] locationServicesEnabled: 1
2013-03-25 20:24:28.345 CoreLocationCLI[75031:303] significantLocationChangeMonitoringAvailable: 0
2013-03-25 20:24:28.346 CoreLocationCLI[75031:303] headingAvailable: 0
2013-03-25 20:24:28.346 CoreLocationCLI[75031:303] regionMonitoringAvailable: 1 
```

更新：这现在已经实施并且正在工作。[在https://github.com/fulldecent/corelocationcli](https://github.com/fulldecent/corelocationcli)实现位置打印

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T13:06:45.067

授权状态：0

它只是意味着你有你的授权是 oFF 。请确保它已打开。- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:11:45.520

在调用`startUpdatingLocation` check for `+ (BOOL)locationServicesEnabled`value 之前。

如果它关闭，请打开系统设置中服务的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-01T05:56:19.153

将 kCLAuthorizationStatusAuthorizedAlways 或 kCLAuthorizationStatusAuthorizedWhenInUse 属性放入 info.plist

# network-programming - 同一台机器上对等点的 UDP 自动发现

> ID：15624223
> 
> 赞同：3
> 
> 时间：2013-03-25T20:34:09.313
> 
> 标签：network-programming, autodiscovery

我将[ZeroMQ 实时交换协议 (ZRE)](http://rfc.zeromq.org/spec:20)视为在分布式应用程序中构建对等点的自动发现的灵感。

我按照这个模型在 Python 中使用 UDP 构建了一个简单的原型应用程序。似乎它具有（回想起来是显而易见的）限制，即它仅适用于检测所有对等点都在其他机器上的对等点。这是由于发现端口上的套接字绑定操作。

继续阅读[`SO_REUSEADDR`并`SO_REUSEPORT`](https://stackoverflow.com/questions/14388706/socket-options-so-reuseaddr-and-so-reuseport-how-do-they-differ-do-they-mean-t)告诉我，我不能完全使用 ZRE 中描述的 UDP 广播方案来做到这一点。

如果您需要为分布式应用程序构建一个自动发现机制，以便多个应用程序实例（可能具有不同的版本）可以在同一台机器上运行，您将如何构建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-01T23:42:54.353

您应该能够将每个服务器实例绑定到不同的地址。整个子网 127.0.0.0/8 应该解析为您的本地主机，因此您可以设置 - 例如 - 一个服务在 127.0.0.1 上侦听，另一个在 127.0.0.2 上侦听，等等。从 127.0.0.1 到 127.255.255.254 的任何内容。

```
# works as expected
nc -l 127.0.0.100 3000 &
nc -l 127.0.0.101 3000 &

# shows error "nc: Address already in use"
nc -l 127.0.0.1 3000 &
nc -l 127.0.0.1 3000 & 
```

# php - 自动将所选数据从 latin2 转换为 utf8

> ID：15624224
> 
> 赞同：0
> 
> 时间：2013-03-25T20:34:15.677
> 
> 标签：php, encoding

我正在尝试将一些数据从一个数据库移动到另一个数据库。不幸的是，一个使用 latin2 编码，另一个使用 utf8。有没有可能对编码 latin2->utf-8 进行一些自动转换？或者我唯一的选择是对从 latin2 数据库中选择的每个数据使用 iconv() ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:20:02.773

按照这个[食谱](http://en.gentoo-wiki.com/wiki/Convert_latin1_to_UTF-8_in_MySQL)，当然适应拉丁语2 ;-)

# java - Java - 在目录中搜索文件

> ID：15624226
> 
> 赞同：13
> 
> 时间：2013-03-25T20:34:21.173
> 
> 标签：java, file, search, directory

这应该很简单，但我无法理解——“编写一个在给定目录中搜​​索特定文件名的程序。” 我找到了一些硬编码文件名和目录的示例，但我需要用户输入的目录和文件名。

```
public static void main(String[] args) {
    String fileName = args[0]; // For the filename declaration
    String directory;     
    boolean found;

    File dir = new File(directory);

    File[] matchingFiles = dir.listFiles(new FilenameFilter() {
        public boolean accept(File dir, String fileName) {
            return true;
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-25T20:45:49.950

你可以尝试这样的事情：

```
import java.io.*;
import java.util.*;
class FindFile 
{
    public void findFile(String name,File file)
    {
        File[] list = file.listFiles();
        if(list!=null)
        for (File fil : list)
        {
            if (fil.isDirectory())
            {
                findFile(name,fil);
            }
            else if (name.equalsIgnoreCase(fil.getName()))
            {
                System.out.println(fil.getParentFile());
            }
        }
    }
    public static void main(String[] args) 
    {
        FindFile ff = new FindFile();
        Scanner scan = new Scanner(System.in);
        System.out.println("Enter the file to be searched.. " );
        String name = scan.next();
        System.out.println("Enter the directory where to search ");
        String directory = scan.next();
        ff.findFile(name,new File(directory));
    }
} 
```

这是输出：

```
J:\Java\misc\load>java FindFile
Enter the file to be searched..
FindFile.java
Enter the directory where to search
j:\java\
FindFile.java Found in->j:\java\misc\load 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-12-04T09:05:00.497

使用 Java 8+ 的特性，我们可以用几行代码编写代码：

```
protected static Collection<Path> find(String fileName, String searchDirectory) throws IOException {
    try (Stream<Path> files = Files.walk(Paths.get(searchDirectory))) {
        return files
                .filter(f -> f.getFileName().toString().equals(fileName))
                .collect(Collectors.toList());

    }
} 
```

`Files.walk`返回一个`Stream<Path>`“遍历文件树根”给定的`searchDirectory`. 要选择所需的文件，只需在`Stream` `files`. 它将 a 的文件名`Path`与给定的`fileName`.

请注意，要求的[文档](https://docs.oracle.com/javase/10/docs/api/java/nio/file/Files.html#walk(java.nio.file.Path,int,java.nio.file.FileVisitOption...))`Files.walk`

> 此方法必须在 try-with-resources 语句或类似的控制结构中使用，以确保在流的操作完成后立即关闭流的打开目录。

我正在使用[try-resource-statement](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。

* * *

对于高级搜索，另一种方法是使用`PathMatcher`：

```
protected static Collection<Path> find(String searchDirectory, PathMatcher matcher) throws IOException {
    try (Stream<Path> files = Files.walk(Paths.get(searchDirectory))) {
        return files
                .filter(matcher::matches)
                .collect(Collectors.toList());

    }
} 
```

如何使用它来查找某个文件的示例：

```
public static void main(String[] args) throws IOException {
    String searchDirectory = args[0];
    String fileName = args[1];
    PathMatcher matcher = FileSystems.getDefault().getPathMatcher("regex:.*" + fileName);
    Collection<Path> find = find(searchDirectory, matcher);
    System.out.println(find);
} 
```

有关它的更多信息：[Oracle 查找文件教程](https://docs.oracle.com/javase/tutorial/essential/io/find.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-06T09:11:26.157

使用 **Java 8* 有一个使用流和 lambda 的替代方案：

```
public static void recursiveFind(Path path, Consumer<Path> c) {
  try (DirectoryStream<Path> newDirectoryStream = Files.newDirectoryStream(path)) {
    StreamSupport.stream(newDirectoryStream.spliterator(), false)
                 .peek(p -> {
                   c.accept(p);
                   if (p.toFile()
                        .isDirectory()) {
                     recursiveFind(p, c);
                   }
                 })
                 .collect(Collectors.toList());
  } catch (IOException e) {
    e.printStackTrace();
  }
} 
```

所以这将递归打印所有文件：

```
recursiveFind(Paths.get("."), System.out::println); 
```

这将搜索一个文件：

```
recursiveFind(Paths.get("."), p -> { 
  if (p.toFile().getName().toString().equals("src")) {
    System.out.println(p);
  }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-06T20:41:59.737

如果要使用动态文件名过滤器，可以实现 FilenameFilter 并在构造函数中传递动态名称。

当然，这意味着您必须在每次上课时都实例化（开销），但它有效

例子：

```
public class DynamicFileNameFilter implements FilenameFilter {

    private String comparingname;

    public DynamicFileNameFilter(String comparingName){
        this.comparingname = comparingName;
    }

    @Override
    public boolean accept(File dir, String name) {
        File file = new File(name);

        if (name.equals(comparingname) && !file.isDirectory())
            return false;

        else
            return true;
    }

} 
```

然后你在你需要的地方使用：

```
FilenameFilter fileNameFilter = new DynamicFileNameFilter("thedynamicNameorpatternYouAreSearchinfor");
File[] matchingFiles = dir.listFiles(fileNameFilter); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T20:39:26.677

这看起来像一个家庭作业问题，所以我会给你一些建议：

尝试给出良好的独特变量名称。在这里，您首先将“fileName”用于目录，然后用于文件。这很令人困惑，并且不会帮助您解决问题。对不同的事物使用不同的名称。

您没有将 Scanner 用于任何事情，并且这里不需要它，请摆脱它。

此外，accept 方法应该返回一个布尔值。现在，您正试图返回一个字符串。布尔值意味着它应该返回 true 或 false。例如`return a > 0;`可能返回真或假，取决于 a 的值。但`return fileName;`只会返回文件名的值，它是一个字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-15T18:29:46.143

我使用了另一种方法来使用堆栈搜索文件。请记住，文件夹内可能有文件夹。虽然它并不比 Windows 搜索快（虽然我没想到会这样），但它肯定会给出正确的结果。请根据需要修改代码。这段代码最初是为了提取某些文件扩展名的文件路径:)。随意优化。

```
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

/**
 * @author Deepankar Sinha
 */
public class GetList {
    public List<String> stack;
    static List<String> lnkFile;
    static List<String> progName;

    int index=-1;
    public static void main(String args[]) throws IOException
    {

        //var-- progFile:Location of the file to be search. 
        String progFile="C:\\";
        GetList obj=new GetList();
        String temp=progFile;
        int i;
        while(!"&%@#".equals(temp))
        {
            File dir=new File(temp);
            String[] directory=dir.list();
            if(directory!=null){
            for(String name: directory)
            {
                if(new File(temp+name).isDirectory())
                    obj.push(temp+name+"\\");
                else
                    if(new File(temp+name).isFile())
                    {
                        try{
                            //".exe can be replaced with file name to be searched. Just exclude name.substring()... you know what to do.:)
                        if(".exe".equals(name.substring(name.lastIndexOf('.'), name.length())))
                        {
                            //obj.addFile(temp+name,name);
                            System.out.println(temp+name);
                        }
                        }catch(StringIndexOutOfBoundsException e)
                        {
                            //debug purpose
                            System.out.println("ERROR******"+temp+name);
                        }

                    }
            }}
            temp=obj.pop();
        }
        obj.display();

//        for(int i=0;i<directory.length;i++)
//        System.out.println(directory[i]);
    }

    public GetList() {
        this.stack = new ArrayList<>();
        this.lnkFile=new ArrayList<>();
        this.progName=new ArrayList<>();
    }
    public void push(String dir)
    {
        index++;
        //System.out.println("PUSH : "+dir+" "+index);
        this.stack.add(index,dir);

    }
    public String pop()
    {
        String dir="";
        if(index==-1)
            return "&%@#";
        else
        {
            dir=this.stack.get(index);
            //System.out.println("POP : "+dir+" "+index);
            index--;

        }
        return dir;
    }

    public void addFile(String name,String name2)
    {
        lnkFile.add(name);
        progName.add(name2);
    }

    public void display()
    {
        GetList.lnkFile.stream().forEach((lnkFile1) -> {
            System.out.println(lnkFile1);
        });
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-05T16:13:33.000

```
public class searchingFile 
{
     static String path;//defining(not initializing) these variables outside main 
     static String filename;//so that recursive function can access them
     static int counter=0;//adding static so that can be accessed by static methods 

    public static void main(String[] args) //main methods begins
    {
        Scanner sc=new Scanner(System.in);
        System.out.println("Enter the path : ");
        path=sc.nextLine(); //storing path in path variable
        System.out.println("Enter file name : ");
        filename=sc.nextLine(); //storing filename in filename variable
        searchfile(path);//calling our recursive function and passing path as argument
        System.out.println("Number of locations file found at : "+counter);//Printing occurences

    }

    public static String searchfile(String path)//declaring recursive function having return 
                                                //type and argument both strings

    {
        File file=new File(path);//denoting the path
        File[] filelist=file.listFiles();//storing all the files and directories in array

    for (int i = 0; i < filelist.length; i++) //for loop for accessing all resources
    {
        if(filelist[i].getName().equals(filename))//if loop is true if resource name=filename
        {
            System.out.println("File is present at : "+filelist[i].getAbsolutePath());
            //if loop is true,this will print it's location
            counter++;//counter increments if file found
        }
        if(filelist[i].isDirectory())// if resource is a directory,we want to inside that folder
        {
            path=filelist[i].getAbsolutePath();//this is the path of the subfolder
            searchfile(path);//this path is again passed into the searchfile function 
                             //and this countinues untill we reach a file which has
                             //no sub directories

        }
    }
    return path;// returning path variable as it is the return type and also 
                // because function needs path as argument.

    }   
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-29T03:21:14.053

此方法将从根目录开始递归搜索每个目录，直到找到 fileName，或者所有剩余结果都返回 null。

```
public static String searchDirForFile(String dir, String fileName) {
    File[] files = new File(dir).listFiles();
    for(File f:files) {
        if(f.isDirectory()) {
            String loc = searchDirForFile(f.getPath(), fileName);
            if(loc != null)
                return loc;
        }
        if(f.getName().equals(fileName))
            return f.getPath();
    }
    return null;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-20T07:52:25.763

以下代码有助于在目录中搜索文件并打开其位置

```
import java.io.*;
import java.util.*;
import java.awt.Desktop;
public class Filesearch2 {

    public static void main(String[] args)throws IOException {        
        Filesearch2 fs = new Filesearch2();
        Scanner scan = new Scanner(System.in);
        System.out.println("Enter the file to be searched.. " );
        String name = scan.next();
        System.out.println("Enter the directory where to search ");
        String directory = scan.next();
        fs.findFile(name,new File(directory));
    }
    public void findFile(String name,File file1)throws IOException
    {      
        File[] list = file1.listFiles();       
        if(list!=null)  
     {                          
        for(File file2 : list)
        {            
            if (file2.isDirectory())
            {
                findFile(name,file2);             
            }
            else if (name.equalsIgnoreCase(file2.getName()))
            {                                                              
                System.out.println("Found");                
                System.out.println("File found at : "+file2.getParentFile());
                System.out.println("Path diectory: "+file2.getAbsolutePath());
                String p1 = ""+file2.getParentFile();
                File f2 = new File(p1);
                Desktop.getDesktop().open(f2);                               
            }                      
        }        
      }
    }        
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-01-22T11:54:02.433

我尝试了很多方法来找到我想要的文件类型，这是我完成后的结果。

```
public static void main( String args[]){
final String dir2 = System.getProperty("user.name"); \\get user name 
String path = "C:\\Users\\" + dir2; 
digFile(new File(path)); \\ path is file start to dig

   for (int i = 0; i < StringFile.size(); i++) {

   System.out.println(StringFile.get(i));

    }
 }

private void digFile(File dir) {

    FilenameFilter filter = new FilenameFilter() {
        public boolean accept(File dir, String name) {
            return name.endsWith(".mp4");
        }
    };      
    String[] children = dir.list(filter);

    if (children == null) {
        return;
    } else {
        for (int i = 0; i < children.length; i++) {
            StringFile.add(dir+"\\"+children[i]);

        }
    }

    File[] directories;
    directories = dir.listFiles(new FileFilter() {
        @Override
        public boolean accept(File file) {
            return file.isDirectory();
        }

        public boolean accept(File dir, String name) {
            return !name.endsWith(".mp4");
        }
    });

   if(directories!=null)
   {
       for (File directory : directories) {
           digFile(directory);
       }
   }

} 
```

# scala - sbt 中有没有办法将编译器警告转换为错误，因此构建失败？

> ID：15624236
> 
> 赞同：29
> 
> 时间：2013-03-25T20:34:49.837
> 
> 标签：scala, sbt

我想“禁止”部分或全部编译器警告。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-25T20:49:59.813

您可以将选项从 sbt 传递给 scala 编译器，包括将警告转换为错误的选项。

我通常会添加这些：

```
scalacOptions ++= Seq("-unchecked", "-deprecation", "-feature", "-Xfatal-warnings"), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-07T12:40:17.683

根据[scalac 选项文档](https://docs.scala-lang.org/overviews/compiler-options/index.html)，您可以通过`-Werror`或`-Xfatal-warnings`。
您可以在 sbt 中通过附加到`scalacOptions`.

```
scalacOptions += "-Werror" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:49:55.483

看一下致命警告 scalac 标志。

来源： [https ://groups.google.com/forum/?fromgroups=#!topic/simple-build-tool/RcDnib_EGL4](https://groups.google.com/forum/?fromgroups=#!topic/simple-build-tool/RcDnib_EGL4)

# javascript - 在 Cradle Merge 中使用变量（Node.js 和 CouchDB）

> ID：15624240
> 
> 赞同：1
> 
> 时间：2013-03-25T20:35:08.523
> 
> 标签：javascript, node.js, couchdb, cradle

我正在尝试编写一个同时循环和更改多个文档中的字段的函数。唯一的问题是，当我传递参数值时，摇篮合并似乎实际上传递了一个带有参数名称而不是值的字段。

例如：

```
function saveToAll(field, data) {
  db.get('document_list', function (err, doc) {
      for (key in doc.doc_list_pure) {
        //Create a Closure
        (function(key1) {
          console.log(key1)
            //Go into the DB
            console.log(field);
            console.log(data);
             db.merge(key1, {
              field : data
            }, function (err, res) {
                console.log('Saved');
            });
         }
        )(key)
      }
});
} 
```

所以在这里，如果我写一个这样的函数：

```
saveToAll("new_field", value); 
```

它会正确记录，但会使用正确的数据保存一个字面上称为“字段”的字段。有谁知道如何解决这个问题？这是一个摇篮虫还是只有我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:51:36.007

尝试这个：

```
function saveToAll(field, data) {
  db.get('document_list', function (err, doc) {
      for (key in doc.doc_list_pure) {
        //Create a Closure
        (function(key1) {
          console.log(key1)
            //Go into the DB
            console.log(field);
            console.log(data);
            var dataObj = {};
            dataObj[field]=data;

            db.merge(key1, dataObj, function (err, res) {
                console.log('Saved');
            });
         }
        )(key)
      }
});
} 
```

# api-key - 使用 API 密钥分发开源应用程序的二进制文件

> ID：15624243
> 
> 赞同：1
> 
> 时间：2013-03-25T20:35:12.637
> 
> 标签：api-key

我正在开发一个使用 API 密钥的应用程序，并且正在考虑将其开源（可能在 GPLv3 下）。

我已经看到[How to open-source an application that uses API keys](https://stackoverflow.com/q/1983990/1917313)，并且正在考虑进行设计，以便如果在编译期间提供 API 密钥（使用包含的 C++ 头文件），它将被应用程序使用。否则它将有一个首次运行向导和设置面板来在运行时设置 API 密钥。

我计划在 Ubuntu 软件中心分发我的应用程序。是否可以使用编译到其中的我自己的 API 密钥分发应用程序的二进制文件，或者这会破坏 GPL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T20:00:11.200

我写信给 FSF，这是他们的回复：

> 给定 API 密钥和源代码，收到您的软件源代码的人应该能够编译他们从您那里获得的相同二进制文件并以相同的方式使用它。从你的描述看来是这样。
> 
> 他们也应该可以自由地不使用您的 API 密钥或 Web 服务，但可以修改软件并将其连接到他们自己选择或使用自己的 API 密钥设计的 Web 服务。我不熟悉有问题的网络服务，因此我不知道这是否与您的具体情况有关。
> 
> 我希望这个答案有帮助。如果您有任何进一步的问题，请随时回信。
> 
> --我不是律师，以上不是法律建议
> 
> 问候， Yoni Rabkin

# javascript - 即使选择器不匹配任何东西，jQuery 插件也会运行

> ID：15624244
> 
> 赞同：0
> 
> 时间：2013-03-25T20:35:13.357
> 
> 标签：javascript, jquery, jquery-plugins

我写了一个 jQuery 插件，一切看起来都很好，直到我在一个不存在的 DOM 元素上运行我的插件。我期待警报框不会弹出，因为`$("#div1")`会返回空集

## html

```
<div id="div2">hello</div> 
```

## javascript

```
(function($){
    $.fn.extend({myPlugin1: function(options){
        alert('plugin run');
        return this;
    }    
    });
})(jQuery);

$("#div1").myPlugin1(); 
```

[jsfiddle](http://jsfiddle.net/9qcv4/)

**请注意，当插件在div1**上调用时，DOM 元素的 id为**div2**。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:37:42.090

您的插件扩展了 jQuery 对象。一个空的选择器仍然返回一个 jQuery 对象，所以它仍然会运行。

如果你想检查选择器是否匹配任何东西，你必须明确地这样做：

```
if (this.length == 0) return this;

alert('plugin run');
return this; 
```**

# ios - 两个不同的应用程序可以使用相同的 Push SSL 证书吗？

> ID：15624247
> 
> 赞同：1
> 
> 时间：2013-03-25T20:35:25.457
> 
> 标签：ios, ios-provisioning

我正在配置门户上为将使用 APNS 的新应用程序配置内容。

当我去为推送配置 App Id 时，网站弹出一个对话框，说我必须使用钥匙串访问并从 CA 请求证书。但是，这是我在以前的应用程序中已经完成的步骤，因此是否需要再次这样做？如果不需要，这仍然是一个好主意吗？如果是，为什么？

如果不需要再次生成 CSR，那么我不再拥有以前的 CSR 文件，那么无论如何要恢复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:04:08.777

证书属于主机名。

如果主机名相同，可以。如果它是子域，并且证书是通配符，是的，你可以。

如果hostname不同，可以生成新的csr，申请新的证书。

# ant - Ant 脚本导入覆盖主路径 ID 名称

> ID：15624252
> 
> 赞同：3
> 
> 时间：2013-03-25T20:35:31.483
> 
> 标签：ant

假设我有以下 Ant 脚本：

```
<project name = "imported">
   <path id="same.classpath>
     <pathelement location="c:\temp\imported"/>
   </path>
   <target name="imported.echo">
    <echo>hell from import</echo>
  </target>
</project> 
```

将被导入到这个：

```
<project name = "importer">
   <path id="same.classpath>
     <pathelement location="c:\temp\importer"/>
   </path>

   <import file="imported.xml" as="i" />

   <target name="importer.echo" depends="i.imported.echo">
    <echo>hell from import</echo>
  </target>
</project> 
```

当我运行第二个脚本时，似乎没有使用 importer.xml 中的 same.classpath 引用的路径。而是使用导入的 (c:\temp\imported) 引用的那个。如果我为路径 ID 分配唯一名称，我不会遇到这个问题，因此是猜测。

根据我对文献的理解，主文件中的属性优先。但这不是我观察到的。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:21:00.313

在这种情况下，被覆盖的*不是*属性，而是[参考](http://ant.apache.org/manual/using.html#references)ID。与裁判不同的属性 - 参考 id 与什么相关联 - 可以在构建期间更改，这是您观察到的。

# javascript - 如何捕获所有链接，读取它们的属性并阻止它们执行？

> ID：15624254
> 
> 赞同：0
> 
> 时间：2013-03-25T20:35:39.450
> 
> 标签：javascript, jquery, html

我想捕捉`.click()`我页面上链接上发生的所有事件。另外，我想读取当前单击的链接的属性。据我所知，但它有一个问题：

```
$("a").click(function (e) {
    e.preventDefault();
    $("#myPage").load("/ #myPage");
}); 
```

首先，这段代码只工作了两次——第一次我点击一个链接，这个代码不起作用，第二次点击，这个代码工作，第三次点击，没有，等等。这是为什么？另外，如何读取链接的属性？我需要阅读 src 和类属性。

**编辑：**我需要做的是捕捉任何人点击链接，阻止这种情况发生，读取链接的 href 和类属性，然后继续加载页面（但不重新加载，只是替换#myPage）

**Edit2：**好的，所以现在唯一的问题是，为什么它对我来说是二分之一？当我加载页面，然后单击一个链接时，jquery 工作正常，但是在第二次单击后，它没有命中我的`$("a").click()`事件！

**解决方案：**我通过将 .click() 替换为 .live() 解决了我的问题 - 现在每次都有效。;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:38:32.463

第一部分：`How can I prevent link click:`

只需从您的点击事件中返回 false

```
$("a").click(function(e) { return false; }); 
```

第二部分：`how can I read attribute of a link`

```
 $("a").click(function(){
              var href= $(this).attr('href');
              alert(href);
              return false;
      }); 
```

看到这个[小提琴](http://jsfiddle.net/V6kFD/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:42:32.370

```
$("a").on('click', function(e) {

    // stop click event
    e.preventDefault();

    // get href attribute of currently clicked item
    var hrefAttr = $(this).attr('href');

    // get class attribute
    var classAttr = $(this).attr('class');

    // do loading here
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T20:44:07.240

~~根据[http://api.jquery.com/click/](http://api.jquery.com/click/) click() 处理程序**可能会**被触发两次。~~一次用于mousedown，一次用于mouseup。也许你可以利用 $.on('mouseup', function(e) { }); 反而？

对于属性，您可以使用：

```
$('a').attr('src'); 
```

总之：

```
$("a").on('mouseup', function (e) {
    e.preventDefault();
    var src = $(this).attr('src');
    $("#myPage").load("/#myPage");
}); 
```

# javascript - 带有 Jquery 的虚拟键盘

> ID：15624258
> 
> 赞同：0
> 
> 时间：2013-03-25T20:36:01.657
> 
> 标签：javascript, jquery, input, keypress, melonjs

我有一个作为按钮操作的 div。单击按钮后，我希望它模拟按键。在 Stackoverflow 的其他地方，人们建议使用`jQuery.Event("keydown");`，但建议都使用`.trigger()`绑定到按钮而不是`.click`. 所以，我的示例代码如下所示：

```
var press = jQuery.Event("keydown");
press.which = 69; // # The 'e' key code value
press.keyCode = 69;

$('#btn').click( function() {
    $('#testInput').focus();
    $(this).trigger(press);
    console.info(press);
}); 
```

我在 JSFiddle 设置了一个虚拟示例：http: [//jsfiddle.net/ruzel/WsAbS/](http://jsfiddle.net/ruzel/WsAbS/)

最终，我不想让按键填充表单元素，我只想将事件注册为文档的按键，以便 MelonJS 游戏可以拥有它。

更新：出于安全原因，浏览器可能会忽略使用键盘以外的任何东西触发按键。为了更新文本输入，这个非常好的 Jquery 插件可以解决问题：http: [//bililite.com/blog/2011/01/23/improved-sendkeys/](http://bililite.com/blog/2011/01/23/improved-sendkeys/)

至于任何来这里寻找 MelonJS 案例解决方案的人，最好使用 MelonJS 的 me.input 对象，如下所示：

```
$('#btn').mousedown(function() {
    me.input.triggerKeyEvent(me.input.KEY.E, true);
});

$('#btn').mouseup(function() {
    me.input.triggerKeyEvent(me.input.KEY.E, false);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:50:56.433

如果你想要一个虚拟键盘（如标题所示），你可以使用[这个](http://mottie.github.com/Keyboard/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:52:16.450

我不知道为什么，但即使这**正确触发了事件**，它也不会用字符填充输入。

我已经修改了代码以表明当我们说文档确实在接收按键事件时`$(document).trigger(p)`

试试看：http: [//jsfiddle.net/WsAbS/3/](http://jsfiddle.net/WsAbS/3/)

```
var press = jQuery.Event("keydown");
press.which = 69; // # Some key code value
press.keyCode = 69;
press.target = $('#testInput');

$(document).on('keydown', function(event) {
    alert(event.keyCode);
});

$('#btn').click( function() {
    $(document).trigger(press);
}); 
```

我相信这对于您的 MelonJS 游戏拾取按键的最终目标应该足够了。

# java - 来自指针的 Java JNA 类方法

> ID：15624261
> 
> 赞同：3
> 
> 时间：2013-03-25T20:36:08.153
> 
> 标签：java, directx, jna

我试图从 Direct2D 类 ID2DFactory 映射一个函数，我设法使用[this previous question](https://stackoverflow.com/questions/15621505/java-jna-mapping-d2d1createfactory-from-d2d1/15621951)移植了它。

现在我想到的下一步是`Function.getFunction(`用来获取一个函数，然后`function.invokeXXX()`用来拥有一个工作方法。

现在这似乎比我想象的要难。下面的代码是我试图实现我的目标。

```
 D2D1_FACTORY_OPTIONS opts = new D2D1_FACTORY_OPTIONS();
    PointerByReference pp = new PointerByReference();
    HRESULT hres = D2D1.INSTANCE.D2D1CreateFactory(0, new REFIID(new IID("06152247-6F50-465A-9245-118BFD3B6007").toByteArray()), opts, pp);
    //hres returns 0 which means it was successful.

    // I thought that, since pp is a reference to a reference to the Factory, 
    // that getValue().getPointer(0) would give me the Factory, and thus the
    // first Pointer 'ReloadSystemMetrics()'.
    Function fnc = Function.getFunction(pp.getValue().getPointer(0).getPointer(0), Function.ALT_CONVENTION);
    fnc.invokeInt(null); // I have aswell tried new Object[] {}. This does not throw an error.

    //This is (or should be) GetDesktopDpi(Float*, Float*).
    Function fncGetdpi = Function.getFunction(pp.getValue().getPointer(0).getPointer(1), Function.ALT_CONVENTION); 
    FloatByReference x, y;
    x = y = new FloatByReference();
    fncGetdpi.invokeVoid(new Object[] {x, y}); //But this gives 'Invalid memory access' 
```

我还没有实现我想要的运气。希望有人可以让我了解我做错了什么:)

# php - PHP 命名空间混淆 - 关键字 v 常量

> ID：15624268
> 
> 赞同：1
> 
> 时间：2013-03-25T20:36:26.843
> 
> 标签：php, namespaces

我现在正在学习 php 命名空间，并且对命名空间关键字和命名空间常量之间的区别感到困惑：

```
__NAMESPACE__
namespace 
```

php.net 上的所有示例似乎都使用了这样的关键字：

`namespace\MyClass`或类似的东西。这也可以很容易地用常数来完成。

有人可以解释它们之间的根本区别以及何时使用其中一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:42:27.340

namespace 关键字`namespace`用于定义文件中的命名空间，类似于 C# 的`namespace`关键字（但没有大括号来定义范围）或 Java 的`package`关键字。

在 PHP 中，该`__NAMESPACE__`常量返回当前命名空间范围名称的字符串值。尽量避免使用它，因为它会使你的代码变得混乱，但在使用字符串作为类型名时它很有用。

PHP 手册中有更多文档：[http ://www.php.net/manual/en/language.namespaces.nsconstants.php](http://www.php.net/manual/en/language.namespaces.nsconstants.php)

# html - 悬停时突出显示 div 框

> ID：15624270
> 
> 赞同：10
> 
> 时间：2013-03-25T20:36:33.407
> 
> 标签：html, css, twitter-bootstrap

假设我有一个具有以下属性的 div：

```
.box {
  width: 300px;
  height: 67px;
  margin-bottom: 15px;
} 
```

我将如何做到这一点，如果有人将鼠标悬停在该区域上，它将背景更改为稍暗的颜色并使其成为可点击区域？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-25T20:37:28.450

**仅 CSS：**

```
.box:hover{
background: blue; /* make this whatever you want */
} 
```

要使其成为“可点击”区域，您需要`<a></a>`在 div 中放置一个标签，并且您可能需要使用 jQuery 来设置该`href`属性。

**jQuery 解决方案**

```
$('.box').hover(function(){
$(this).css("background", "blue");
$(this).find("a").attr("href", "www.google.com");
}); 
```

**第三种解决方案：** 您可以更改光标，并使用 jQuery 给它一个点击事件：

```
$('.box').click(function(){
// do stuff
}); 
```

将上述内容与以下 CSS 一起使用：

```
.box{
background: blue;
cursor: pointer;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:40:38.747

```
.box:hover {
    background: #999;
    cursor: pointer;
} 
```

当您将鼠标悬停时，背景会变为您想要的颜色，光标变为指针。您可以使用 jQuery 触发事件，如下所示：

```
$('.box').click(customFunction); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-17T21:36:02.607

**只需将 div 包装在a**标签中，链接 div 就对我有用。下面是一个带有 Bootstrap 类的示例：

```
<a href="#">
<div class="col-md-4">

<span class="glyphicon glyphicon-send headericon"></span>

<p class="headerlabel">SEND</p>
<p class="headerdescription">Send candidate survey</p>    

</div> 
</a> 
```

要更改悬停时的 div 颜色，请添加：

```
div:hover {
background-color: rgba(255,255,255,0.5);
} 
```

到你的 CSS :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T20:39:30.783

您只能使用 CSS 来完成：

```
.box:hover{
  background: blue;
  cursor: pointer;
} 
```

或者使用 Javascript（我在这个例子中使用 jQuery）

```
;(function($){
  $('.box').bind('hover', function(e) {
    $(this).css('background', 'blue');
  });
})(jQuery); 
```

# ios - 如何以编程方式在 UINavigationController 中显示第二个模式 ViewController

> ID：15624271
> 
> 赞同：2
> 
> 时间：2013-03-25T20:36:33.487
> 
> 标签：ios, objective-c, xcode, ios6, uinavigationcontroller

在我的一个`UINavigationController`观点中，用户可以使用“添加”按钮从相册中选择照片`UIImagePickerController`。当用户选择所需的照片时，我想让他`AddPhotoViewController`查看他可以添加标题和描述的位置，而不是他可以按“保存”按钮保存数据、关闭`AddPhotoViewController`视图并返回上一个`UINavigationController`视图。到目前为止，我只能推送`AddPhotoViewController`视图，不能将其作为模态视图。我就是这样做的：

```
 -(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
      AddPhotoViewController *apvc = [self.storyboard instantiateViewControllerWithIdentifier:@"addPhoto"];
      apvc.info = info;
      [self.navigationController pushViewController:apvc animated:YES];
      [self dismissViewControllerAnimated:YES completion:nil];
   } 
```

上面的代码工作正常，但我想添加 AddPhotoViewController 作为 modal view 。我想使用`presentModalViewController:animated:`，但它在 iOS 6.0 中已贬值。比我试过的：

```
 [self presentViewController:apvc animated:YES completion:nil]; 
```

代替：

```
 [self.navigationController pushViewController:apvc animated:YES]; 
```

但我收到此错误：

```
 Warning: Attempt to present <AddPhotoViewController: 0x1e183fc0> on <UINavigationController: 0x1d594a70> whose view is not in the window hierarchy! 
```

`UINavigationController`在我关闭视图后，有什么方法可以在视图顶部添加模态`UIImagePickerController`视图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:54:23.103

在呈现另一个控制器之前，首先关闭当前模态控制器。IE

```
 -(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
          AddPhotoViewController *apvc = [self.storyboard instantiateViewControllerWithIdentifier:@"addPhoto"];
          apvc.info = info;
          [self dismissViewControllerAnimated:YES completion:nil];

          [self presentViewController:apvc animated:YES completion:nil];
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:23:07.817

类似于@nkongara 的答案，但通过使用完成块来避免任何奇怪的竞争条件，更加健壮。`dismissViewControllerAnimated:completion`此外，通过调用而`[picker presentingViewController]`不是假设它`self`始终是呈现视图控制器，代码更具前瞻性/防弹性。

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    AddPhotoViewController *apvc = [self.storyboard instantiateViewControllerWithIdentifier:@"addPhoto"];
    apvc.info = info;
    [[picker presentingViewController] dismissViewControllerAnimated:YES completion:^{
        [self presentViewController:apvc animated:YES completion:nil];
    }];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T20:49:50.270

你为什么不使用segue？在故事板中设置你的 segue，当从 imagepickercontroller 返回时，只需从代码中触发序列。

您可以参考 seque 的[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T00:48:50.920

借助 unwind segue 的魔力，您可以获得所需的导航...

在你的第一个 viewController 中，实现一个 unwind segue

```
- (IBAction)unwindSegue:(UIStoryboardSegue*)segue
{
    NSLog (@"unwound");
       //you can extract data from your "addPhoto" viewController here
       //via segue.sourceViewController
} 
```

一定要在你的头文件中声明它。

在您的“addPhoto”视图控制器中，添加某种关闭按钮，然后按住 CTRL 键拖动到控制器底部的“退出”符号。unwind segue 应该是可选的。

要到达`addPhoto`，您可以以模态方式呈现它 - 但要求 imagePickerController 进行呈现：

```
- (void) imagePickerController:(UIImagePickerController *)picker
 didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIViewController* addPhotoController = 
                [self.storyboard instantiateViewControllerWithIdentifier:@"addPhoto"];

    addPhotoController.infoDict = info; //passing the image data to addPhoto

    [picker presentViewController:addPhotoController 
                         animated:YES 
                       completion:nil];
} 
```

所以你确实得到了两层呈现，但在每种情况下，都是前一个控制器进行呈现。DON"T 关闭 imagePickerController。当 unwind segue 执行时，它会为你处理关闭。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T23:46:32.053

正如其他人在这里提到的，不可能在当前模式视图和父视图之间添加第二个模式视图。我解决了我的问题，但它更像是一个黑客而不是真正的解决方案。如果有人想做类似的事情，这是解释的链接：http: [//xissburg.com/presenting-multiple-modal-view-controllers-at-once/](http://xissburg.com/presenting-multiple-modal-view-controllers-at-once/)

# android - Android - 从 Fragments 为 ActionBar 图标设置动画的问题

> ID：15624275
> 
> 赞同：11
> 
> 时间：2013-03-25T20:36:58.713
> 
> 标签：android, android-fragments, actionbarsherlock, android-support-library, slidingmenu

我在我的应用程序的 ActionBar 中*始终*为“刷新”图标设置动画时遇到了一些问题。

我有一个容器 FragmentActivity，它在用户浏览应用程序时交换片段（从片段本身或从 SlidingMenu 选项）。所以当应用程序第一次加载时，我的 FragmentContainer 添加了 FragA。用户可以从 FragA 导航到 FragB，然后将其换入。

在操作栏中，我显示一个静态的“刷新”图标。随着每个片段的加载，我将其替换为动画“微调器”图标。加载完成后，我恢复到原来的刷新图标。

问题是，这个动画只适用于原始片段（FragA，在这种情况下）。当用户导航到 FragB 并选择刷新图标时，会触发刷新，但动画永远不会发生。类似地，如果按下后退按钮返回到 FragA，这将遵循相同的模式，即刷新按钮在按下时不会动画。

注意事项...

1.  我在[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)使用 ActionBarSherlock 和 SlidingMenu 实现。所以上面的活动实际上是一个`SlidingFragmentActivity`.
2.  两个 Fragments 调用`setHasOptionsMenu(true)`- 我已经通过这个进行了调试，并且`onCreateOptionsMenu`每个都被正确调用。
3.  两个片段的图标都正确显示-当我离开“默认”片段时，动画没有发生。
4.  我在使用 SlidingMenu 导航时看到相同的行为 - FragA 加载，动画工作 -> SlidingMenu 用于导航到不同的片段...动画不起作用 -> 返回按钮到 FragA...动画不起作用在这里。
5.  我正在使用`FragmentTransaction.remove()`而`add()`不是`replace()`像我以前遇到过后退按钮问题`replace()`- 我正在使用兼容性库，我在这里读到`replace`实现有点错误 - 并且不使用它肯定解决了我看到的问题。

下面的代码片段：

我加载原始片段的代码是....

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(R.id.content_frame, new FragA());
ft.addToBackStack(null);
ft.commit(); 
```

将 FragB “交换”为 FragA....

```
public void switchContent(PysoBaseFragment fragment) {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.remove(existingFragment);
    ft.add(R.id.content_frame, fragment);
    ft.addToBackStack(null);
    ft.commit();
} 
```

此方法在容器活动中声明并从 FragA 调用，即...

```
getFragmentContainer().switchContent(new FragB()); 
```

旋转图标的代码在新的 Fragment 开始加载时被调用。它就像...

```
 ImageView spinnerActionView = (ImageView) inflater.inflate(R.layout.refresh_action_view, null);
    Animation rotation = AnimationUtils.loadAnimation(this, R.anim.rotate_animation);
    rotation.setRepeatCount(Animation.INFINITE);
    spinnerActionView.startAnimation(rotation);
    menuItemRefresh = menu.findItem(R.id.menu_refresh);
    menuItemRefresh.setActionView(spinnerActionView); 
```

调用时将where`menu`分配给容器的实例变量`onCreateOptionsMenu`。

**更新：**

我注意到这个领域的另一个奇怪的错误（我很高兴将它作为一个单独的问题添加，但我在这里更新它，希望它能够阐明我原来的问题 - 我相信两者都是由我如何从我的片段配置我的操作栏）。

当我第一次加载片段时，我会显示 1 个静态刷新图标。如果我旋转屏幕...会出现另一个刷新图标...当我将屏幕旋转回来时，会出现第三个刷新图标！

更奇怪的是，单击后退按钮会依次*删除*每个附加图标，然后最终（第四次单击）返回到前一个屏幕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T16:29:12.973

永远不要在某个地方更改菜单项，除非

```
onPrepareOtionsMenu(){
} 
```

你应该是这样的。

在您的活动中：

```
boolean mIsRefreshing =false;

public boolean onPrepareOptionsMenu(Menu menu) {
if(mIsRefreshing){
        final MenuItem menuItemRefresh = menu.findItem(R.id.menu_refresh);
    menuItemRefresh.setActionView(spinnerActionView);
}
        return true;
    }

public void setRefreshing(boolean refreshing){
mIsRefreshing = refreshing;
invalidateOptionsMenu();  //supportInvelidateOptionsMenu()
} 
```

所以现在你可以从你的框架打电话

```
((YourActivity)getActivity()).setRefreshing(true);
((YourActivity)getActivity()).setRefreshing(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T08:39:33.783

您正在添加一个动作视图来添加动画。如果您尝试做其他事情，例如更改菜单项的图标（即使它没有动画，只是为了查看它是否更改），那会起作用吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T04:13:48.557

```
 "I've noticed another weird bug in this area (I'm happy to add this as a separate question, but I'm updating it here in the hope that it will shed some light on my original problem - I believe both are caused by how I have configured my action-bar from my Fragments).   
    When I first load a fragment I have 1 static refresh icon displayed. If I rotate the screen... another refresh icon appears... when I rotate the screen back, a 3rd refresh icon appears! 
    Stranger still, clicking the back-button removes each additional icon in turn, before finally (on the 4th click) returning to the previous screen." 
```

> 我可以解释一下，当你改变方向时（Potrait<->landscape）。
> 
> 当方向改变时重新启动一个活动。我猜您的代码在重新启动之前没有保存所需的信息。您可以通过自己处理特定的配置更改（即：方向更改）来停止此默认行为。一个很好的教程在这里：处理运行时更改

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T20:30:26.577

如果您每次都使用相同的 Animation 对象，则可能需要在尝试再次运行之前重置动画。

尝试在对 startAnimation() 的调用上方添加 rotation.reset()。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T09:44:04.043

只在主要活动中调用 onCreateOptionsMenu()（我的意思是滑动片段活动）。不需要从每个片段中调用 onCreateOptionsMenu()。我在下面给出一个示例片段。

```
Call from fragment (whenerver loading starts and end)

    yourSlidingFragmnetActivity.refresh = true/false; (u can have this logic of your own)
    getActivity().supportInvalidateOptionsMenu();

    @Override
        public boolean onCreateOptionsMenu(Menu menu) {

            menu.add(BaseListActivity.DEFAULT_GROUP_ID, BaseListActivity.MENU_ITEM_RELOAD_LIST, BaseListActivity.DEFAULT_ORDER,
                    "Refresh").setIcon(R.drawable.ic_menu_refresh_new)
                    .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
            return true;
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {

            if (item.getItemId() == BaseListActivity.MENU_ITEM_RELOAD_LIST) {
                item.setActionView(R.layout.progressbar_layout);
                item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
                return true;
            }
            return true;
        }

        public static boolean refresh = false;

        @Override
        public boolean onPrepareOptionsMenu(Menu menu) {
            MenuItem item = menu.getItem(0);
            if (refresh) {
                item.setActionView(R.layout.progressbar_layout);
            } else {
                item.setIcon(R.drawable.ic_menu_refresh_new);
            }
            return true;
        }

        R.layout.progressbar_layout:
        <?xml version="1.0" encoding="utf-8"?>
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:addStatesFromChildren="true"
                      android:focusable="true"
                      android:paddingLeft="4dp"
                      android:paddingRight="4dp"
                      android:gravity="center"
                      style="?attr/actionButtonStyle">
        <ProgressBar
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:focusable="true"
                    style="@android:style/Widget.ProgressBar.Small"/>
        </LinearLayout> 
```

我也在使用 jfeinstein10 滑动菜单库，我没有添加或删除片段，我总是替换它们并在 oncreate menthod iam 中像这样使用

```
private Fragment mContent;
if(mContent == null){
mContent = new SampleFragment();
}
// set the Above View
    setContentView(R.layout.content_frame);
                getSupportFragmentManager()
                .beginTransaction()
                .replace(R.id.content_frame,mContent)
                .commit(); 
```

# asp.net-mvc - MVC 中的单元测试全局过滤器

> ID：15624277
> 
> 赞同：2
> 
> 时间：2013-03-25T20:37:13.137
> 
> 标签：asp.net-mvc, unit-testing, global-filter

我有一个 MVC4 应用程序并在 global.asax 中添加了一堆全局过滤器。它们需要按一个顺序排列。我想编写一个单元测试以确保它们始终处于所需的顺序。有没有办法访问所有全局过滤器或测试它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:42:25.483

`FilterConfig`默认情况下（在 App_Start 下）注册全局过滤器，对吗？这是这样的：

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }
} 
```

然后，您可以从测试用例调用此方法并传递一个`GlobalFilterCollection`实例，然后您可以测试`GlobalFilterCollection`您通过的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T18:11:32.087

如果你想要一个特定的订单，你甚至可以指定一个订单作为一个属性

例如 [FilterName(Order = 1)]

默认情况下，过滤器没有指定任何顺序，因此它们由框架随机执行。

Order> -1 的任何内容都确保了过滤器的执行顺序。

（不确定这是否有助于提供更多信息，我认为它会更有用）

参考：

[http://msdn.microsoft.com/en-us/library/system.web.mvc.filter(v=vs.118).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.filter(v=vs.118).aspx) [http://msdn.microsoft.com/en-us/library/system。 web.mvc.filter.order(v=vs.118).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.filter.order(v=vs.118).aspx)

# java - 如何隐藏和抽象 Java 属性文件？

> ID：15624282
> 
> 赞同：2
> 
> 时间：2013-03-25T20:37:28.690
> 
> 标签：java, maven, properties

我的应用程序使用许多属性文件来存储密码、URL 和其他应用程序数据。我想从源代码中抽象出这些文件的细节。这样做的最佳做法是什么？

我正在考虑在 Maven 中创建一个插件，该插件取决于应用程序部署到的环境，将从数据库中提取一组特定的属性，但这似乎需要做很多工作才能实现这一点。欢迎大家提出意见。主要目标是从代码库中删除敏感数据。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:51:45.250

我使用[Maven 过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)和配置文件来执行此操作。在我的属性文件中，我只使用占位符，`database.password=${database.password}`然后我在本地 Maven 设置中创建一个配置文件，其`database.password`属性设置类似于

```
<profiles>
    <profile>
      <id>development</id>
      <properties>
        <database.password>MySuperSecretPassword</database.password>
      </properties>
    </profile>
<profiles> 
```

所以当我运行`mvn install -P development`它时，它会用我的密码交换占位符。您可以在此处找到更[详细的示例](http://www.manydesigns.com/en/portofino/portofino3/tutorials/using-maven-profiles-and-resource-filtering)，尽管他似乎将他的个人资料保存在 pom.xml 中，而不是他的本地 maven 设置文件中（可能是为了简单起见）

# computer-science - 散列函数和霍纳法则

> ID：15624283
> 
> 赞同：0
> 
> 时间：2013-03-25T20:37:33.807
> 
> 标签：computer-science

我想使用规则来评估字符串值的哈希索引。

> H(x) =x (a0+x (a1+x (a2+….)….)…))

散列函数中的槽数和“x”应该是互质数/相对质数吗？

请解释其背后的原因。
如果不是这样，那么这些数字必须满足的属性是什么？

# c - dll注入失败

> ID：15624286
> 
> 赞同：-3
> 
> 时间：2013-03-25T20:37:46.953
> 
> 标签：c, windows, dll-injection

我正在尝试进行 dll 注入，我尝试了 100 种方法，但没有一种方法有效，我现在使用的是 Windows 7 32 位（以避免 32/64 冲突）。我使用了在网上找到的两个著名的 dll 注入器（AutoInject 和 Extreme injector V2）和一个手工制作的。我正在尝试在记事本中添加消息框（不能更简单吗？）我还想补充一点，我的 Windows 在 Vmware 下运行。这里是我的 dll 的主要内容（使用代码块构建）

```
#if BUILD_DLL
#define DLLIMPORT __declspec (dllexport)
#else /* Not BUILDING_DLL */
#define DLLIMPORT __declspec (dllimport)
#endif /* Not BUILDING_DLL */

#include <windows.h>
#include <stdio.h>
#include <stdlib.h>

BOOL APIENTRY DllMain (HINSTANCE hInst, DWORD reason, LPVOID reserved)
{
  switch (reason)
    {
     case DLL_PROCESS_ATTACH:
       MessageBox (0, "Hello from injected DLL!\n", "Hi", MB_ICONINFORMATION);
       break;
     case DLL_PROCESS_DETACH:
       break;
     case DLL_THREAD_ATTACH:
       break;
     case DLL_THREAD_DETACH:
       break;
    }
   return TRUE;
 } 
```

我不知道现在该尝试什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:59:06.273

我找到了我的问题的解决方案，如果有人有同样的问题：只需使用 Visual Sudio 而不是代码块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:41:54.340

根据[Howto call MessageBox in dllmain](https://stackoverflow.com/questions/8377569/howto-call-messagebox-in-dllmain)您不能在 DllMain 中调用 MessageBox （您可以执行的操作受到严格限制）。tenfour 建议使用类似 OutputDebugString 的东西。

# r - R中的循环问题

> ID：15624292
> 
> 赞同：0
> 
> 时间：2013-03-25T20:38:08.630
> 
> 标签：r, statistics

我将使用以下代码在 R 中`v`从`0.0`to生成一个向量。 然而，只去。`1.0`
`v``0.99`

```
> s <- 0.0; v <- numeric();
> while ( s <= 1 ){
+    v <- append(v, s)
+    s <- s + 0.01
+ }
> v
  [1] 0.00 0.01 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09 0.10 0.11 0.12 0.13 0.14
 [16] 0.15 0.16 0.17 0.18 0.19 0.20 0.21 0.22 0.23 0.24 0.25 0.26 0.27 0.28 0.29
 [31] 0.30 0.31 0.32 0.33 0.34 0.35 0.36 0.37 0.38 0.39 0.40 0.41 0.42 0.43 0.44
 [46] 0.45 0.46 0.47 0.48 0.49 0.50 0.51 0.52 0.53 0.54 0.55 0.56 0.57 0.58 0.59
 [61] 0.60 0.61 0.62 0.63 0.64 0.65 0.66 0.67 0.68 0.69 0.70 0.71 0.72 0.73 0.74
 [76] 0.75 0.76 0.77 0.78 0.79 0.80 0.81 0.82 0.83 0.84 0.85 0.86 0.87 0.88 0.89
 [91] 0.90 0.91 0.92 0.93 0.94 0.95 0.96 0.97 0.98 0.99
> 
```

所以我看一下`s`while循环中的逻辑。
我发现了一些神秘的东西...

```
> s <= 1
[1] FALSE
> s == 1
[1] FALSE
> s
[1] 1 
```

假设`s`应该是`1.01`，但它只是去`1`......
所以我们知道`s`是`1`，但为什么它不等于`1`？

*（我是 R 新手，很抱歉提出愚蠢的问题。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:41:36.853

为什么不使用内置的 R 函数`seq`？

```
> seq(0,1,.01)
  [1] 0.00 0.01 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09 0.10 0.11 0.12 0.13 0.14
 [16] 0.15 0.16 0.17 0.18 0.19 0.20 0.21 0.22 0.23 0.24 0.25 0.26 0.27 0.28 0.29
 [31] 0.30 0.31 0.32 0.33 0.34 0.35 0.36 0.37 0.38 0.39 0.40 0.41 0.42 0.43 0.44
 [46] 0.45 0.46 0.47 0.48 0.49 0.50 0.51 0.52 0.53 0.54 0.55 0.56 0.57 0.58 0.59
 [61] 0.60 0.61 0.62 0.63 0.64 0.65 0.66 0.67 0.68 0.69 0.70 0.71 0.72 0.73 0.74
 [76] 0.75 0.76 0.77 0.78 0.79 0.80 0.81 0.82 0.83 0.84 0.85 0.86 0.87 0.88 0.89
 [91] 0.90 0.91 0.92 0.93 0.94 0.95 0.96 0.97 0.98 0.99 1.00 
```

你得到的原因`FALSE`是`s<= 1`因为你试图将整数与浮点数进行比较。浮点数[本质上是](http://en.wikipedia.org/wiki/Floating_point#Representable_numbers.2C_conversion_and_rounding) [不精确](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)的，并且会使相等比较变得困难。

在您的特定情况下，将 final 添加`.01`到`s`足以使其超过 1 的程度，导致您的循环在您预期之前终止一次迭代。

这是将 R 的内置函数用于此类事情的好习惯的部分原因，因为它们会为您处理极端情况（并且在大多数情况下也会更快。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:44:09.970

当您尝试将浮点值与非常精确的小数进行比较时，这种现象经常发生。

在您的情况下，您尝试比较 1，实际上它比 1 大一点。因此，当您尝试与 s<=1 进行比较时，总是错误的。

[在此处查看有关浮点错误的更多信息](http://blog.revolutionanalytics.com/2009/11/floatingpoint-errors-explained.html)

# javascript - Javascript Ajax 获取

> ID：15624294
> 
> 赞同：0
> 
> 时间：2013-03-25T20:38:24.060
> 
> 标签：javascript, jquery, get

我正在尝试让 javascript 加载和刷新实时数据。但我无法让它显示任何数据。

这是我的代码：

```
<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8">
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
 </head>

 <script type="text/javascript">

 function updateStats() {
    $.ajax({
        type: 'GET',
        url: "http://localhost/data.php", 
        dataType: 'json',
        success: function(data) {
            $('#sysstats').html(data.sysstats);
            $('#aststats').html(data.aststats);
            scheduleStatsUpdate();
        },
        error: updateFailed
    });
}
function scheduleStatsUpdate() {
    stats_timer = setTimeout('updateStats();',6000);
}
</script>

<body>

<div id="aststats" class="infobox ui-widget-content  ui-corner-all">

</div>
<div id="sysstats" class="infobox ui-widget-content  ui-corner-all">

</div>
</body> 
```

Data.php 文件返回以下内容：

```
{"sysstats":"<h3 class=\"ui-widget-header  ui-state-default ui-corner-all\">System Statistics<\/h3><h4>Processor<\/h4><div class=\"databox\" style=\"width:200px;\">\n <div class=\"dataname\">Load Average<\/div>\n <div class=\"datavalue\"><a href=\"#\" title=\"Load Average: 0.01\">0.01<\/a><\/div>\n<\/div>\n<div class=\"databox graphbox\" style=\"width:200px;\" title=\"CPU: 0.00 \/ 100 (0%)\">\n <div class=\"bargraph graphok\" style=\"width:0px;\"><\/div>\n <div class=\"dataname\">CPU<\/div>\n <div class=\"datavalue\">0%<\/div>\n<\/div>\n<h4>Memory<\/h4><div class=\"databox graphbox\" style=\"width:200px;\" title=\"App Memory: 527.67MB \/ 2010.453125MB (26%)\">\n <div class=\"bargraph graphok\" style=\"width:52px;\"><\/div>\n <div class=\"dataname\">App Memory<\/div>\n <div class=\"datavalue\">26%<\/div>\n<\/div>\n<div class=\"databox graphbox\" style=\"width:200px;\" title=\"Swap: 0.00MB \/ 760.8828125MB (0%)\">\n <div class=\"bargraph graphok\" style=\"width:0px;\"><\/div>\n <div class=\"dataname\">Swap<\/div>\n <div class=\"datavalue\">0%<\/div>\n<\/div>\n<h4>Disks<\/h4><div class=\"databox graphbox\" style=\"width:200px;\" title=\"\/: 2.53GB \/ 30.18GB (8%)\">\n <div class=\"bargraph graphok\" style=\"width:16px;\"><\/div>\n <div class=\"dataname\">\/<\/div>\n <div class=\"datavalue\">8%<\/div>\n<\/div>\n<div class=\"databox graphbox\" style=\"width:200px;\" title=\"\/boot: 0.01GB \/ 0.10GB (10%)\">\n <div class=\"bargraph graphok\" style=\"width:20px;\"><\/div>\n <div class=\"dataname\">\/boot<\/div>\n <div class=\"datavalue\">10%<\/div>\n<\/div>\n<div class=\"databox graphbox\" style=\"width:200px;\" title=\"\/dev\/shm: 0.00GB \/ 0.98GB (0%)\">\n <div class=\"bargraph graphok\" style=\"width:0px;\"><\/div>\n <div class=\"dataname\">\/dev\/shm<\/div>\n <div class=\"datavalue\">0%<\/div>\n<\/div>\n<h4>Networks<\/h4><div class=\"databox\" style=\"width:200px;\">\n <div class=\"dataname\">eth0 receive<\/div>\n <div class=\"datavalue\"><a href=\"#\" title=\"eth0 receive: 0.00 KB\/s\">0.00 KB\/s<\/a><\/div>\n<\/div>\n<div class=\"databox\" style=\"width:200px;\">\n <div class=\"dataname\">eth0 transmit<\/div>\n <div class=\"datavalue\"><a href=\"#\" title=\"eth0 transmit: 0.00 KB\/s\">0.00 KB\/s<\/a><\/div>\n<\/div>\n","aststats":"<h3 class=\"ui-widget-header  ui-state-default ui-corner-all\">FreePBX Statistics<\/h3><div class=\"databox graphbox\" style=\"width:400px;\" title=\"Total active calls: 0 \/ 18 (0%)\">\n <div class=\"bargraph graphok\" style=\"width:0px;\"><\/div>\n <div class=\"dataname\">Total active calls<\/div>\n <div class=\"datavalue\">0<\/div>\n<\/div>\n<div class=\"databox graphbox\" style=\"width:400px;\" title=\"Internal calls: 0 \/ 18 (0%)\">\n <div class=\"bargraph graphok\" style=\"width:0px;\"><\/div>\n <div class=\"dataname\">Internal calls<\/div>\n <div class=\"datavalue\">0<\/div>\n<\/div>\n<div class=\"databox graphbox\" style=\"width:400px;\" title=\"External calls: 0 \/ 18 (0%)\">\n <div class=\"bargraph graphok\" style=\"width:0px;\"><\/div>\n <div class=\"dataname\">External calls<\/div>\n <div class=\"datavalue\">0<\/div>\n<\/div>\n<div class=\"databox graphbox\" style=\"width:400px;\" title=\"Total active channels: 0 \/ 36 (0%)\">\n <div class=\"bargraph graphok\" style=\"width:0px;\"><\/div>\n <div class=\"dataname\">Total active channels<\/div>\n <div class=\"datavalue\">0<\/div>\n<\/div>\n<h4>FreePBX Connections<\/h4>"} 
```

我什至无法显示数据。我需要在我的服务器上安装什么特殊的东西来运行这个代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:06:38.380

您必须调用启动 ajax 调用或超时的函数，但我认为您想运行：

```
 setInterval(function() {
       updateStats();
     }, 6000); 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:52:32.470

为什么你打电话给 $('#sysstats').html(data.sysstats); ? ....我认为您没有任何具有“sysstats”ID 的元素...相反，您有“aststats”或“sysinfo”ID...。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:41:44.017

改变：

```
function scheduleStatsUpdate() {
   stats_timer = setTimeout('updateStats();',6000);
} 
```

经过

```
(function scheduleStatsUpdate() {
  stats_timer = setTimeout('updateStats();',6000);
})(); 
```

# java - 如何找到并停止所有当前正在运行的线程？

> ID：15624296
> 
> 赞同：18
> 
> 时间：2013-03-25T20:38:29.383
> 
> 标签：java, multithreading, osgi

我有一个多线程的 java 项目，我想添加一个方法 stop() 来停止所有正在运行的线程。问题是这个项目是别人开发的，我不熟悉它是如何实现多线程的。

我所知道的是，一旦项目开始，就会调用许多线程并且它们会永远运行。有没有办法找到所有正在运行的线程并停止它们？我进行了很多搜索，发现了如何获取正在运行的线程列表：

```
Set<Thread> threadSet = Thread.getAllStackTraces().keySet(); 
```

接下来要做什么来停止所有正在运行的线程？

我之所以要停止这些线程，是因为我需要将此项目作为捆绑包部署到 OSGi 容器中。捆绑包启动后，多个线程将永远运行。所以我需要实现一个destroy()方法来停止所有线程来控制bundle的生命周期。

怎么样

```
for (Thread t : Thread.getAllStackTraces().keySet()) 
{  if (t.getState()==Thread.State.RUNNABLE) 
     t.interrupt(); 
} 

for (Thread t : Thread.getAllStackTraces().keySet()) 
{  if (t.getState()==Thread.State.RUNNABLE) 
     t.stop(); 
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-25T20:57:27.743

这是一个危险的想法。Javadoc[`Thread.stop()`](http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#stop--)解释：

> 这种方法本质上是不安全的。使用 Thread.stop 停止线程会导致它解锁所有已锁定的监视器（这是未经检查的 ThreadDeath 异常沿堆栈传播的自然结果）。如果以前受这些监视器保护的任何对象处于不一致状态，则损坏的对象将对其他线程可见，从而可能导致任意行为。停止的许多用法应该由简单地修改一些变量以指示目标线程应该停止运行的代码替换。目标线程应该定期检查这个变量，如果变量指示它要停止运行，则以有序的方式从它的run方法返回。如果目标线程等待很长时间（例如在条件变量上），则应使用中断方法来中断等待。

从根本上说，线程需要被构建和设计为安全终止，不可能安全地杀死任意线程。一个相当标准的模式是这样实现的：

```
public abstract class StoppableRunnable implements Runnable {
    private volatile boolean stopWork;
    private boolean done;

    public final void run() {
        setup();
        while(!stopWork && !done) {
            doUnitOfWork();
        }
        cleanup();
    }

    /**
     * Safely instructs this thread to stop working,
     * letting it finish it's current unit of work,
     * then doing any necessary cleanup and terminating
     * the thread.  Notice that this does not guarentee
     * the thread will stop, as doUnitOfWork() could
     * block if not properly implemented.
     */
    public void stop() {
        stopWork = true;
    }

    protected void done() {
        done = true;
    }

    protected void setup() { }
    protected void cleanup() { }

    /**
     * Does as small a unit of work as can be defined
     * for this thread.  Once there is no more work to
     * be done, done() should be called.
     */
    protected abstract void doUnitOfWork();
} 
```

您暗示您不是这些线程的作者，这表明它们可能无法安全停止。在这种情况下，您可以调用[`Thread.interrupt()`](http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#interrupt--)以指示线程停止它正在做的事情（而不是上面描述的模式，您可以使用`Thread.interrupt()`类似的效果）但是类似地，如果线程的设计者没有编写它来处理中断，这可能不做任何事情或导致不一致的状态或其他错误。

最终，`Thread.stop()`如果您只想“[强制]线程停止执行”并且无法修改线程的实现，这就是您想要的；但是，就像`kill`在 Unix 中使用一样，这是一个危险的提议，您应该从本质上考虑您的 JVM 在以这种方式终止线程后处于不稳定和不可修复的状态，然后尝试尽快退出程序。

* * *

**关于您中断然后停止的建议：**

这里仍然存在很多问题，特别是中断并不能保证线程会立即中断（它的工作方式与我`StoppableRunnable`上面的类似，但不太明确），而是设置一个标志，表明线程应该在可能的情况下中断。这意味着您可以调用`Thread.interrupt()`，线程可以启动它的正确中断处理行为，然后在中途，您的调用`Thread.stop()`触发，猛烈地杀死线程并可能破坏您的 JVM。调用`Thread.interrupt()`不保证线程何时或如何响应该中断，这就是为什么我更喜欢`StoppableRunnable`. 不用说，如果你要跟注，那么先跟注`Thread.stop()`没什么好处`Thread.interrupt()`。我不推荐它，但你不妨打电话`Thread.stop()`首先。

此外，要认识到运行循环的代码*本身就在一个线程中*——这意味着你的循环很可能首先杀死自己，让所有其他线程继续运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T09:45:31.160

I used this code:

```
package com.xxx;

import com.xxx.tools.messageLog;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author Mostafa Nazari
 */
public class ProcessAgent extends Thread{

    public ProcessAgent() {
        super("Process-Agent");
    }

    @Override
    public void run() {
        try {
            com.xxx.Process.agent.Main.main(new String[]{});
        } catch (Exception ex) {
            if (ex instanceof InterruptedException) {
                messageLog.stdwar("Process Agent Stopped");
            }else {
                messageLog.stderr("FATAL Error: "+ex.getMessage());
                Logger.getLogger(ProcessAgent.class.getName()).log(Level.SEVERE, null, ex);            
            }
        }    
    }

    public void terminate() {
        if (super.isAlive()) {
            ThreadGroup group = super.getThreadGroup();
            while (group != null) {
                group .interrupt();
                group = super.getThreadGroup();
            }
            super.interrupt();
        }
    }

    public String getStatus() {
        if (super.isAlive()) {
            return "running";
        } else {
            if (super.isInterrupted()) 
                return "stopping";
            else
                return "stopped";
        }
    }

} 
```

hope it is useful for this issue

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T14:52:59.810

不要创建 normal `Thread`，而是使用高级[并发](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html)API，如[ExecutorService](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html)或[ThreadPoolExecutor](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html)

您可以在这篇文章中查看不同的 API：

[Java 的 Fork/Join vs ExecutorService - 什么时候使用？](https://stackoverflow.com/questions/21156599/javas-fork-join-vs-executorservice-when-to-use-which/34922218#34922218)

ExecutorService的强制关闭参考下面的SE问题：

[如何强制关闭java ExecutorService](https://stackoverflow.com/questions/36644043/how-to-forcefully-shutdown-java-executorservice/36644320#36644320)

# javascript - 关于 vs2012 javascript Intellisense

> ID：15624299
> 
> 赞同：0
> 
> 时间：2013-03-25T20:38:34.847
> 
> 标签：javascript, visual-studio-2012, javascript-intellisense

我在 A.js 文件中有自定义 javascript 代码，要与它关联 intellisense，我在与 A.js 相同的文件夹中有 A.intellise nse.js 文件。

A.js的内容：

```
 var test = (typeof test === "undefined") || !test ? {} : test;

 test= (function () {
              return {
                 Version: "1.0.0"
           };
     }()); 
```

A.intellisense.js 的内容

```
intellisense.annotate(window, {
"test": function () {
    /// <signature>
    ///   <summary>The Version of the test JavaScript Lbrary</summary>
    /// </signature>
   }
 }); 
```

由于测试是在窗口级别定义的，因此我可以在 B.js 文件中使用测试函数，而无需在其中引用 A.js。当我输入 test() 时，我没有得到任何智能感知，我哪里出错了。

PS：即使我有 _reference.js 文件，其中也提到了 A.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T19:15:13.977

您接近正确的解决方案 - 问题是在您的示例源中，您将 test 定义为全局变量，而不是全局函数。在您的 A.intellisense.js 文件中，您将其注释为函数，但由于它不是函数，因此您不会看到任何注释。

根据您的意图，这里有几个解决方案可以帮助您。

**如果 test 应该是一个全局变量**

您可以使用以下命令将 test 注释为变量：

```
intellisense.annotate(window, {
    // This is a comment about "test"
    "test": undefined
}); 
```

**如果测试应该是一个函数**

然后您可以将 test 定义为函数，并且您的注释应该可以工作：

```
function test() {
    return {
        "Version": "1.0.0"
    }
} 
```

我希望这有帮助！- Jordan（Microsoft Visual Studio PM - JavaScript 工具）

# java - 服务器端的配置文件应用程序

> ID：15624302
> 
> 赞同：3
> 
> 时间：2013-03-25T20:38:40.227
> 
> 标签：java, profiling, server-side, hprof

我有一个`client`哪个是`Multithreaded`代码，哪个是我的一个`REST service`正在部署到这台机器的代码-

`http://px5qa01c-8539.host.com:8080/service/TEService/v1/get/USERID=100/PURCHASED`

我可以远程访问上述机器，它是一台 Linux 主机。

现在我打算按我的意思做`profiling`，我需要看看哪些方法在我的 REST 服务上花费了多少时间。`Server Side``REST Service`

在客户端，我正在运行这样的程序 - 这将影响我`REST Service`在上述机器上部署的程序。

`java -Xrunhprof:cpu=samples,thread=y,depth=12,cutoff=0 -jar ServiceLnP.jar service_config.properties NUMBER_OF_THREADS:20 TOTAL_RUNNING_TIME:60`

所以在客户端，它会生成`java.hprof.txt`文件，我可以用 HP Jmeter 打开并分析它。

**问题陈述：-**

但是在服务器端我该怎么办？分析已部署在其他机器上的应用程序的最佳方法是什么。

仅供参考 - 部署它的容器是 Geronimo。那么有什么办法，我也可以`hprof`在服务器上启用，一旦我在完成后点击我的 REST 服务，它就会生成`java.hprof.txt`我可以进一步分析的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:19:33.150

这实际上取决于您使用的工具，它们提供了不同的解决方案。很多时候，他们会监听服务器端 JVM 中的一个端口，该工具附加了该工具。一些工具触摸类以添加额外信息，一些工具可以在不修改的情况下分析应用程序。

我过去使用过 JProfiler，非常好。不过，它是一种商业工具。所以是有代价的。我也使用过 NetBean 的分析器，效果很好。这是一个免费的应用程序，所以那里没有任何费用。JavaMelody 看起来不错，正如 Piotr 所建议的那样，尽管我对此没有任何个人经验。

您只需要拿起一个工具并尝试一下。

# java - 无法使用 HttpClient 下载文件

> ID：15624304
> 
> 赞同：1
> 
> 时间：2013-03-25T20:38:44.927
> 
> 标签：java, download, httpclient

下面的代码是我到目前为止所尝试的：

```
try{
            DefaultHttpClient httpclient = new DefaultHttpClient();

            HttpGet httpget = new HttpGet("http://somewebsite.com");

            HttpResponse response = httpclient.execute(httpget);
            HttpEntity entity = response.getEntity();

            System.out.println("Login form get: " + response.getStatusLine());
            if (entity != null) {
                entity.consumeContent();            
            }
            System.out.println("Initial set of cookies:");
            List<Cookie> cookies = httpclient.getCookieStore().getCookies();
            if (cookies.isEmpty()) {
                System.out.println("None");
            } else {
                for (int i = 0; i < cookies.size(); i++) {
                    System.out.println("- " + cookies.get(i).toString());
                }
            }

            HttpPost httpost = new HttpPost("http://www.somewebsite.com/MemberSingIn");

            List<NameValuePair> nvps = new ArrayList<NameValuePair>();
            nvps.add(new BasicNameValuePair("email", "USERNAME"));
            nvps.add(new BasicNameValuePair("password", "PASSWORD"));
            nvps.add(new BasicNameValuePair("rememberMe", "true"));

            httpost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));

            response = httpclient.execute(httpost);
            entity = response.getEntity();

            System.out.println("Login form get: " + response.getStatusLine());
            if (entity != null) {
                entity.consumeContent();
            }

            System.out.println("Post logon cookies:");
            cookies = httpclient.getCookieStore().getCookies();
            String mySessionId = null;
            if (cookies.isEmpty()) {
                System.out.println("None");
            } else {
                for (int i = 0; i < cookies.size(); i++) {
                    if(cookies.get(i).toString().contains("SessionId=")){
                        int index1 = cookies.get(i).toString().indexOf("SessionId");
                        String temp = cookies.get(i).toString().substring(index1);
                        int index2 = temp.toString().indexOf("]");
                        temp = cookies.get(i).toString().substring(index1+10,index1+index2);
                        mySessionId = temp;
                    }
                    System.out.println("- " + cookies.get(i).toString());
                }
            }      

            CookieStore cookieStore = new BasicCookieStore(); 
            BasicClientCookie cookie = new BasicClientCookie("Cookie",mySessionId);

            cookieStore.addCookie(cookie); 
            httpclient.setCookieStore(cookieStore);

            httpget = new HttpGet("http://somewebsite.URLTOGETFILE/eTable.txt");
            response = httpclient.execute(httpget);
            entity = response.getEntity();
            System.out.println("HEREEEEEEEEEEEEEEEEEEE");
            System.out.println(response.toString());

            System.out.println("File get: " + response.getStatusLine());

            InputStream in = entity.getContent();

              File path = new File("/home/mrsevensevenseven/");
              path.mkdirs();
              File file = new File(path, "myfile.txt");
              FileOutputStream fos = new FileOutputStream(file);

              byte[] buffer = new byte[1024];
              int len1 = 0;
              while ((len1 = in.read(buffer)) > 0) {
                      fos.write(buffer, 0, len1);
              }

              fos.close();

            httpclient.getConnectionManager().shutdown();
        }catch(Exception e){
            e.printStackTrace();
        } 
```

它成功，让我登录，但我仍然无法下载文件......在这方面的任何帮助将不胜感激......我在堆栈溢出和谷歌搜索方面尝试了很多，但无法获得帮助......

这就是回应...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head><title>
    IBD eTables - Investors.com
</title><meta property="og:title" content="IBD eTables" /><meta property="og:type" content="article" /><meta property="og:url" content="http://research.investors.com/etables/default.aspx" /><meta property="og:image" content="http://www1.ibdcd.com/images/IBDicon_309171.png" /><meta property="og:site_name" content="Investor's Business Daily" /><meta property="fb:app_id" content="154916351273272" />

    <script type="text/javascript">
        var divHeight;
    </script>
<link href="../App_Themes/eTables/eTablesStyles.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="/Scripts/global.js?v=4"></script>

    <script type="text/javascript" src="/Scripts/Silverlight.js?v=4"></script>

    <script type="text/javascript" src="/Scripts/LaunchMSTool.js?v=4"></script>
</head>

<body>
<form name="form1" method="post" action="/etables/default.aspx" id="form1">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTExMzcwMDM5OTcPFhIeDEVuYWJsZUV4cG9ydGceC0N1cnJlbnRWaWV3AgEeDUN1cnJlbnRWaWV3SWQoKVtTeXN0ZW0uRGVjaW1hbCwgbXNjb3JsaWIsIFZlcnNpb249Mi4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj1iNzdhNWM1NjE5MzRlMDg5ATEeDWJzaG93aWJkY2hhcnRnHhBEaXNwbGF5QmFubmVyRVRCaB4LU29ydENvbHVtbjJlHgpTb3J0Q29sdW1uBQppYmQxMDByYW5rHgpTb3J0QXNjZW5kaB4GVGFiQ21kBQtJQkQxMDBJbmRleBYCAgEQZGQWBAIHDw8WAh4ISW1hZ2VVcmwFMmh0dHA6Ly93d3cuaW52ZXN0b3JzLmNvbS9pbWFnZS9iZ2VUYWJsZXNTbS5wbmcuY21zZGQCCA8PFgIeB1Zpc2libGVoZBYeAgcPZBYGAgEQDxYCHgtOYXZpZ2F0ZVVybAWVAWh0dHA6Ly9yZXNlYXJjaC5pbnZlc3RvcnMuY29tL2V0YWJsZXMvSUJENTBJbmRleFByaW50LmFzcHg/dGFiVmlldz1JQkQ1MCZjb2x1bW5zb3J0MT1pYmQ1MHJhbmsmY29sdW1uc29ydHR5cGUxPURFU0MmY29sdW1uc29ydDI9JmNvbHVtbnNvcnR0eXBlMj1ERVNDZGRkAgMQDxYCHwsFmwFodHRwOi8vcmVzZWFyY2guaW52ZXN0b3JzLmNvbS9ldGFibGVzL0lCRDUwWExTLmFzcHg/dGFiVmlldz1JQkQ1MCZmcm9tPWV0YWJsZXMmY29sdW1uc29ydDE9aWJkNTByYW5rJmNvbHVtbnNvcnR0eXBlMT1ERVNDJmNvbHVtbnNvcnQyPSZjb2x1bW5zb3J0dHlwZTI9REVTQ2RkZAIFEA8WAh8LBY4BaHR0cDovL3Jlc2VhcmNoLmludmVzdG9ycy5jb20vZXRhYmxlcy9WaWV3VGV4dC5hc3B4P3RhYlZpZXc9SUJENTAmY29sdW1uc29ydDE9aWJkNTByYW5rJmNvbHVtbnNvcnR0eXBlMT1ERVNDJmNvbHVtbnNvcnQyPSZjb2x1bW5zb3J0dHlwZTI9REVTQ2RkZAIIDw8WAh8KaGRkAgkPDxYCHwpoZBYGAgEPFgIeBFRleHQFHllvdSBoYXZlIG5vIHNhdmVkIHN0b2NrIGxpc3RzLmQCAxAPFgIfCwUlfi9NeUlCRC9FZGl0UG9ydGZvbGlvLmFzcHg/YWN0aW9uPW5ld2RkZAIEDxYCHwwFEiB0byBjcmVhdGUgYSBsaXN0LmQCCw9kFgICAQ9kFgICAQ8PFgIeCUluZGV4VHlwZQUCVERkFgJmD2QWAmYPZBYGAgEPDxYCHwwFEklCRCAxMDAgdnMgUyZQIDUwMBYCHgVzdHlsZQUQZm9udC1zaXplOiAxMnB4O2QCAw8PFgIfDAUbRnJvbSAzLzI1LzIwMTMgdG8gMy8yNS8yMDEzFgIfDgUQZm9udC1zaXplOiAxMXB4O2QCBw8PFgQfDAUXVmlldyBUcmFpbGluZyAxMiBNb250aHMeD0NvbW1hbmRBcmd1bWVudAUDTTEyZGQCEg8PFgIfCmhkZAITDw8WAh8KaGRkAhUPDxYCHwwFNEJlbG93IGlzIHRoZSBJQkQgNTAgSW5kZXggZm9yIHRoZSB3ZWVrIG9mIDMvMjIvMjAxMypkZAIZD2QWBgIBDw8WAh8MZWRkAgUPDxYCHwpoZGQCBw8QDxYCHwpoZGQWAWZkAhoPDxYCHwpnZBYCAgEPZBYGZg9kFgJmDxYCHgtfIUl0ZW1Db3VudAIBFgICAQ9kFgQCAQ8WAh8MBQczLzIyLzEzZAIDEA8WBB8MBTJZb3UgQ2FuIFN0aWxsIEZpbmQgQnV5YWJsZSBMZWFkZXJzIEluIFN0b2NrIE1hcmtldB8LBWxodHRwOi8vbmV3cy5pbnZlc3RvcnMuY29tL2ludmVzdGluZy1pbnNpZGUtdGhlLTUwLzAzMjIxMy02NDkwNzQtc3RvY2stbWFya2V0LWxlYWRlcnMtc3RpbGwtb2ZmZXItZW50cmllcy5odG1kZGQCAg9kFgJmDxYCHxACAhYEAgEPZBYCAgEQDxYEHwwFL0x1bWJlciBMaXF1aWRhdG9ycyBSZWJvdW5kcyBXaXRoIEhvdXNpbmcgTWFya2V0HwsFV2h0dHA6Ly9uZXdzLmludmVzdG9ycy5jb20vaW52ZXN0aW5nLzAzMjIxMy02NDkwNzctbHVtYmVyLWxpcXVpZGF0b3JzLW9mZmVycy1hLWZsb29yLmh0bWRkZAICD2QWAgIBEA8WBB8MBShJeGlhJ3MgUmVzdWx0cyBBbW9uZyBJdHMgSW5kdXN0cnkncyBCZXN0HwsFVmh0dHA6Ly9uZXdzLmludmVzdG9ycy5jb20vaW52ZXN0aW5nLzAzMjIxMy02NDkwNzUtaXhpYS1hLWxlYWRlci1pbi1uZXR3b3JrLXRlc3RpbmcuaHRtZGRkAgQPZBYCAgEPFgIfCmcWAgIBEA8WBB8MBQRMTktEHwsFiwFodHRwOi8vZWR1Y2F0aW9uLmludmVzdG9ycy5jb20vZGFpbHktc3RvY2stYW5hbHlzaXMvMDMyMjEzLTY0OTAxNC1ob3ctaW52ZXN0b3JzLWNvdWxkLWhhdmUtaG9va2VkLXVwLXdpdGgtbGlua2VkaW4tYmVmb3JlLWl0cy1iaWctbW92ZS5hc3B4ZGRkAhsPDxYCHwpnZBYCZg9kFgJmD2QWAmYQDxYCHwsFQWh0dHA6Ly93d3cuaW52ZXN0b3JzLmNvbS9pbWFnZS9ldGFibGVzL2liZDUwL2liZDUwXzAzMjIxMy5wZGYuY21zZGRkAh0PDxYQHgtVc2VyU2VjTGlzdGUeDVVzZXJTZWNMaXN0SWQoKwQBMh8BAgEeD0N1cnJlbnRUYWJJbmRleGYeDUN1cnJlbnRUYWJDbWQFC0lCRDEwMEluZGV4HgxVc2VyUHJpbUxpc3RlHg5Vc2VyUHJpbUxpc3RJZCgrBAExHhNDdXJyZW50Vmlld1Bvc2l0aW9uKCsEATFkFgZmDxYCHxACBhYMAgEPZBYEZg8VAQlhY3RpdmV0YWJkAgEPDxYGHghDc3NDbGFzcwUJdGFiYWN0aXZlHgtDb21tYW5kTmFtZQULSUJEMTAwSW5kZXgeBF8hU0ICAmQWAmYPFQEMSUJEIDUwIEluZGV4ZAIDD2QWBGYPFQELaW5hY3RpdmV0YWJkAgEPDxYGHxgFC3RhYmluYWN0aXZlHxkFEklCRE5ld0FtZXJpY2FJbmRleB8aAgJkFgJmDxUBFUlCRCBOZXcgQW1lcmljYSBJbmRleGQCBQ9kFgRmDxUBC2luYWN0aXZldGFiZAIBDw8WBh8YBQt0YWJpbmFjdGl2ZR8ZBQ1JQkQ4NS04NUluZGV4HxoCAmQWAmYPFQEPSUJEIDg1LTg1IEluZGV4ZAIHD2QWBGYPFQELaW5hY3RpdmV0YWJkAgEPDxYGHxgFC3RhYmluYWN0aXZlHxkFC0lCREJpZ0NhcDIwHxoCAmQWAmYPFQEOSUJEIEJpZyBDYXAgMjBkAgkPZBYEZg8VAQtpbmFjdGl2ZXRhYmQCAQ8PFgYfGAULdGFiaW5hY3RpdmUfGQUKTWFpblRhYmxlcx8aAgJkFgJmDxUBC01haW4gVGFibGVzZAILD2QWBGYPFQELaW5hY3RpdmV0YWJkAgEPDxYGHxgFC3RhYmluYWN0aXZlHxkFCU15ZVRhYmxlcx8aAgJkFgJmDxUBCk15IGVUYWJsZXNkAgIPZBYIAgEPDxYCHwpoZGQCAw8PFgIfDAUeVmlldyBJQkQgNTAgSW5kZXggU3RvY2sgVGFibGVzZGQCBQ8PFgQfDAUlVmlldyBJQkQgNTAgSW5kZXggRXhwYW5kZWQgU3RvY2sgRGF0YR8PBQEyZGQCBw8PFgIfCmhkZAIEDw8WAh8KaGRkAh4PZBYCZg9kFgoCAQ8QDxYGHg1EYXRhVGV4dEZpZWxkBQROYW1lHg5EYXRhVmFsdWVGaWVsZAUJZVRhYmxlQ29sHgtfIURhdGFCb3VuZGdkEBUYBFJhbmsXU21hcnRTZWxlY3QgQ29tcCBSYXRpbmcKRVBTIFJhdGluZwlSUyBSYXRpbmcRSW5kdXN0cnkgR3JvdXAgUlMKU01SIFJhdGluZw5BY2MvRGlzIFJhdGluZww1Mi1XZWVrIEhpZ2gNQ2xvc2luZyBQcmljZQ5QcmljZSAkIENoYW5nZQ9Wb2x1bWUgJSBDaGFuZ2UNVm9sdW1lICgxMDAwKQJQRQtTcG9uIFJhdGluZwlEaXYgWWllbGQKJSBPZmYgSGlnaBZBbm4uIEVQUyBFc3QuICUgQ2hhbmdlEkxhc3QgUXRyIEVQUyAlIENoZxJOZXh0IFF0ciBFUFMgJSBDaGcSTGFzdCBRdHIgU2FsZXMgQ2hnEFJldHVybiBPbiBFcXVpdHkNUHJldGF4IE1hcmdpbgxNbmdtdCBPd25zICURUXRyIEVQUyBDbnQgPiAxNSUVGAppYmQxMDByYW5rCmNvbXByYXRpbmcHZXBzcmFuawVyZWxzdAZncnBzdHIDc21yBmFjY2RpcwR5cmhpCnByaWNlY2xvc2UIcHJpY2VjaGcKdm9scGVyY2NoZwhkYWlseXZvbAdwZXJhdGlvCnNwb25yYXRpbmcGZGl2eWxkCnBvZmY1MndraGkJYW5uZXN0Y2hnCXF0cmVybmNoZwlxdHJlc3RjaGcJcXRyc2FsY2hnA3JlcQxwcmV0YXhtYXJnaW4Fc21tZ3QJcXRyY250ZXBzFCsDGGdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZxYBZmQCAw8QZGQWAQIBZAIFDxAPFgYfGwUETmFtZR8cBQllVGFibGVDb2wfHWdkEBUZA04vQQRSYW5rF1NtYXJ0U2VsZWN0IENvbXAgUmF0aW5nCkVQUyBSYXRpbmcJUlMgUmF0aW5nEUluZHVzdHJ5IEdyb3VwIFJTClNNUiBSYXRpbmcOQWNjL0RpcyBSYXRpbmcMNTItV2VlayBIaWdoDUNsb3NpbmcgUHJpY2UOUHJpY2UgJCBDaGFuZ2UPVm9sdW1lICUgQ2hhbmdlDVZvbHVtZSAoMTAwMCkCUEULU3BvbiBSYXRpbmcJRGl2IFlpZWxkCiUgT2ZmIEhpZ2gWQW5uLiBFUFMgRXN0LiAlIENoYW5nZRJMYXN0IFF0ciBFUFMgJSBDaGcSTmV4dCBRdHIgRVBTICUgQ2hnEkxhc3QgUXRyIFNhbGVzIENoZxBSZXR1cm4gT24gRXF1aXR5DVByZXRheCBNYXJnaW4MTW5nbXQgT3ducyAlEVF0ciBFUFMgQ250ID4gMTUlFRkACmliZDEwMHJhbmsKY29tcHJhdGluZwdlcHNyYW5rBXJlbHN0BmdycHN0cgNzbXIGYWNjZGlzBHlyaGkKcHJpY2VjbG9zZQhwcmljZWNoZwp2b2xwZXJjY2hnCGRhaWx5dm9sB3BlcmF0aW8Kc3BvbnJhdGluZwZkaXZ5bGQKcG9mZjUyd2toaQlhbm5lc3RjaGcJcXRyZXJuY2hnCXF0cmVzdGNoZwlxdHJzYWxjaGcDcmVxDHByZXRheG1hcmdpbgVzbW1ndAlxdHJjbnRlcHMUKwMZZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZxYBZmQCBw8PFgIfCmhkZAIJDxBkZBYBAgFkAh8PZBYCAgIPZBYEAgEPFgIfEAIRFiICAQ9kFgJmDxUBVTxpbWcgc3JjPSJodHRwOi8vd3d3MS5pYmRjZC5jb20vaW1hZ2VzL2VUYWJsZXMvc3RhMXN0ZHNjLmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAgIPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAgMPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAgQPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAgUPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAgYPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAgcPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAggPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAgkPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAgoPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAgsPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAgwPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAg0PZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAg4PZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAg8PZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAhAPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAhEPZBYCZg8VAU48aW1nIHNyYz0iaHR0cDovL3d3dzEuaWJkY2QuY29tL2ltYWdlcy9lVGFibGVzL3B4LmdpZiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIj5kAgMPFgIfEAIRFiICAQ9kFgJmDxUBBFJhbmtkAgIPZBYCZg8VAR1TbWFydFNlbGVjdDxicj5Db21wPGJyPlJhdGluZ2QCAw9kFgJmDxUBDUVQUzxicj5SYXRpbmdkAgQPZBYCZg8VAQxSUzxicj5SYXRpbmdkAgUPZBYCZg8VASFJbmQgR3JvdXA8YnI+UmVsYXRpdmU8YnI+U3RyZW5ndGhkAgYPZBYCZg8VAQ1TTVI8YnI+UmF0aW5nZAIHD2QWAmYPFQERQWNjL0Rpczxicj5SYXRpbmdkAggPZBYCZg8VAQ81Mi1XZWVrPGJyPkhpZ2hkAgkPZBYCZg8VARBDbG9zaW5nPGJyPlByaWNlZAIKD2QWAmYPFQERUHJpY2UgJDxicj5DaGFuZ2VkAgsPZBYCZg8VARJWb2x1bWUgJTxicj5DaGFuZ2VkAgwPZBYCZg8VAQ5Wb2wuPGJyPigxMDAwKWQCDQ9kFgJmDxUBAlBFZAIOD2QWAmYPFQEOU3Bvbjxicj5SYXRpbmdkAg8PZBYCZg8VAQxEaXY8YnI+WWllbGRkAhAPZBYCZg8VAQVOb3Rlc2QCEQ9kFgJmDxUBGEFkZGl0aW9uYWwmbmJzcDtSZXNlYXJjaGQCIQ8WAh8KaGQCIg8PFgIfCmdkFgICAQ8PFgIfDAXUASogSUJEIDUwIHN0b2NrcywgcmFua2luZ3MsIGNvbXBhbnkgc3VtbWFyaWVzLCBhbmQgY2hhcnQgYW5hbHlzaXMgd2VyZSBsYXN0IHVwZGF0ZWQgMy8yMi8yMDEzLCBhbmQgYXJlIHVwZGF0ZWQgd2Vla2x5LiBPdGhlciBJQkQgNTAgZGF0YSBmZWF0dXJlcywgaW5jbHVkaW5nIHByaWNlLCB2b2x1bWUgYW5kIFNtYXJ0U2VsZWN0IFJhdGluZ3MgYXJlIHVwZGF0ZWQgZGFpbHkuZGQYBQUPSGVhZGVyTXVsdGlWaWV3Dw9kAgJkBQ9SZXN1bHRNdWx0aVZpZXcPD2QCAWQFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYBBRZJbmRleEJhckNoYXJ0JHdjdkNoYXJ0BQ1NdWx0aVZpZXdTb3J0Dw9kZmQFCk11bHRpVmlldzEPD2RmZB2Z4W+QIKnJSe4+7+2PiFBPu1ck" />
</div>

<script src="/ScriptResource.axd?d=RNfHbK6XxGlvk7UnQPQl5VWdSmPtL605im1i9ZMMuXgrvwYOrYkRhhjS5Tkc95LZKqMA01lmkm3Rvv6OCYTXQO0Wvej6DzniFUlixhkXWzmpvwOMQ0v-ompHlYoQzp1H0LzWltEL_D_EvsXg_ayZnY1oHnA1&amp;t=ffffffff8dc250fc" type="text/javascript"></script>
<script src="../Services/SiteAjaxService.asmx/js" type="text/javascript"></script>

<a id="hlRoadBlock" class="ex5trigger" rel="/Register/Roadblock.aspx?id=ETB&closepop=1" href="javascript:void(0);"></a>

    <a id="hlSignInRoadBlock" class="ex5trigger" rel="/Register/WeeklyEmails.aspx?id=etb" href="javascript:void(0);"></a>            

    <script type="text/javascript">
        var isEntitled = ToBoolean("false");
        var isWeekly = ToBoolean("false");
    </script>
    <script type="text/javascript" src="/Scripts/ExternalScripts/eTables.js"></script>

<div id="etbtop"></div>
<div id="etbmiddle">
    <div id="etbDummyImage" style="display:none;">
        <img id="staticeTableImage" src="http://www.investors.com/image/bgeTablesSm.png.cms" style="border-width:0px;" />
    </div>
    <div id="etbcontent" style="display:none;">

    </div>
</div>

<div id="etbbottom"></div> 
<div class="jqmWindow" id="ex5"></div>

<script type="text/javascript">
//<![CDATA[
var iLoginFlag = 0;var sAccess = "PVC";var sDGOProductsSite = "premium.investors.com";//]]>
</script>
</form>

    <!-- BEGIN: Site Tagging -->
    <script type="text/javascript" language="javaScript">if (typeof(s) != 'undefined'){s.server="IBDWEB21";s.events="";s.channel="Stock Research";s.pageName="";s.pageType="";s.hier1="Stock Research,eTables";s.products="";s.state="";s.zip="";s.purchaseID="";s.prop1="";s.prop2="";s.prop3="eTables";s.prop4="";s.prop5="";s.prop6="";s.prop7="";s.prop8="";s.prop9="";s.prop10="Tools";s.prop11="";s.prop12="Visitor";s.prop13="";s.prop14="";s.prop15="";s.prop16="eTables";s.prop17="";s.prop18="";s.prop19="";s.prop20="";s.prop21="";s.prop22="";s.prop23="";s.prop24="";s.prop32="";s.prop33="";s.prop34="";s.prop35="";s.prop36="";s.prop37="";s.prop38="";s.prop39="";s.prop40="";s.prop41="";s.prop42="";s.prop43="";s.prop44="";s.prop45="";s.prop46="";s.prop47="";s.prop48="";s.prop49="";s.eVar1="";s.eVar2="";s.eVar3="";s.eVar4="";s.eVar5="";s.eVar6="";s.eVar7="";s.eVar8="";s.eVar9="";s.eVar10="";s.eVar11="Visitor";s.eVar12="";s.eVar13="";s.eVar14="";s.eVar15="";s.eVar16="eTables";s.eVar17="";s.eVar18="";s.eVar19="";s.eVar20="";s.eVar21="";s.eVar22="";s.eVar23="";s.eVar24="";s.eVar25="";s.eVar26="";s.eVar27="";s.eVar28="";s.eVar29="";s.eVar30="";s.eVar31="";s.eVar32="";s.eVar33="";s.eVar34="";}</script>
    <script type="text/javascript" language="javascript">
    // custom variables
    if (typeof(s) != 'undefined')
    {
        s.pageName = "eTables - IBD 50 Index - Standard Stock Data";
    }
    </script>
    <script type="text/javascript" language="javaScript">if (typeof(s) != 'undefined'){try{var s_code=s.t();if(s_code){document.write(s_code);}}catch(e){}}</script>
    <!-- END: Site Tagging -->

    <script type="text/javascript" src="/Scripts/etables.js?v=4"></script>

    <script type="text/javascript" src="/Scripts/ResearchAddToStockList.js?v=4"></script>

    <a id="ServerTagLink" href="http://IBDWEB21">
        <img src="http://www1.ibdcd.com/Images/eTables/px.gif" width="20" height="20" alt="" />
    </a>

    <script type="text/javascript">
        document.write(unescape("%3Cscript src='" + (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js' %3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        COMSCORE.beacon({c1:2,c2:7592510,c3:"",c4:"",c5:"",c6:"",c15:""});
    </script>
    <noscript>
        <img src="http://b.scorecardresearch.com/p?c1=2&c2=7592510&c3=&c4=&c5=&c6=&c15=&cj=1" alt="" />
    </noscript>

</body>
</html> 
```

问候...

777先生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:48:47.353

好的，所以经过更多研究并在@jdb 的帮助下，我能够解决这个问题，现在我可以在成功登录后从服务器下载文件而没有任何问题......顺便说一句，感谢@jdb为我指明正确的方向，让我思考到底出了什么问题:)

在这里粘贴代码，如果其他人想使用：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpVersion;
import org.apache.http.NameValuePair;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.cookie.Cookie;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.params.CoreProtocolPNames;
import org.apache.http.protocol.HTTP;

public class DownloadAuthenticatedFile{

    public static void main(String... args){

        try{
            DefaultHttpClient httpclient = new DefaultHttpClient();

            HttpGet httpget = new HttpGet("http://website.com");

            HttpResponse response = httpclient.execute(httpget);
            HttpEntity entity = response.getEntity();

            System.out.println("Login form get: " + response.getStatusLine());
            if (entity != null) {
                entity.consumeContent();            
            }
            System.out.println("Initial set of cookies:");
            List<Cookie> cookies = httpclient.getCookieStore().getCookies();
            if (cookies.isEmpty()) {
                System.out.println("None");
            } else {
                for (int i = 0; i < cookies.size(); i++) {
                    System.out.println("- " + cookies.get(i).toString());
                }
            }

            HttpPost httpost = new HttpPost("http://www.somewebsite.com/MemberSingIn");

            List<NameValuePair> nvps = new ArrayList<NameValuePair>();
            nvps.add(new BasicNameValuePair("email", "USERNAME"));
            nvps.add(new BasicNameValuePair("password", "PASSWORD"));
            nvps.add(new BasicNameValuePair("remember", "true"));

            httpost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));

            response = httpclient.execute(httpost);
            entity = response.getEntity();

            System.out.println("Login form get: " + response.getStatusLine());
            if (entity != null) {
                entity.consumeContent();
            }

            System.out.println("Post logon cookies:");
            cookies = httpclient.getCookieStore().getCookies();
            String mySessionId = null;
            if (cookies.isEmpty()) {
                System.out.println("None");
            } else {
                for (int i = 0; i < cookies.size(); i++) {
                    if(cookies.get(i).toString().contains("SessionId=")){
                        int index1 = cookies.get(i).toString().indexOf("SessionId");
                        String temp = cookies.get(i).toString().substring(index1);
                        int index2 = temp.toString().indexOf("]");
                        temp = cookies.get(i).toString().substring(index1+10,index1+index2);
                        mySessionId = temp;
                    }
                    System.out.println("- " + cookies.get(i).toString());
                }
            } 

            httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
            httpget = new HttpGet("http://PATHOFWEBSITETOFILE");
            response = httpclient.execute(httpget);
            entity = response.getEntity();
            Header[] headers = response.getAllHeaders();
            for(int i=0;i<headers.length;i++){
                System.out.println("Header: "+headers[i].toString());
            }
            System.out.println(response.toString());

            System.out.println("File get: " + response.getStatusLine());

            InputStream in = entity.getContent();
              File path = new File("/home/mrsevensevenseven");
              path.mkdirs();
              File file = new File(path, "myfile.xls");
              FileOutputStream fos = new FileOutputStream(file);

              byte[] buffer = new byte[1024];
              int len1 = 0;
              while ((len1 = in.read(buffer)) != -1) {
                      fos.write(buffer, 0, len1);
              }

              fos.close();

            httpclient.getConnectionManager().shutdown();
        }catch(Exception e){
            e.printStackTrace();
        }

    }

} 
```

# spring - 向 Spring MVC Restful 服务发送大文本消息

> ID：15624306
> 
> 赞同：0
> 
> 时间：2013-03-25T20:39:04.890
> 
> 标签：spring, rest

我正在使用 spring MVC RESTful 服务，我从前端捕获了包含 \ 和 & 等字符的大文本消息，并且我的控制器对大文本消息抛出错误我收到错误

```
 SEVERE: Servlet.service() for servlet [validate_webservice] in context with path [/validate_webservice] threw exception [Request processing failed; nested exception is ca.uhn.hl7v2.parser.EncodingNotSupportedException: Determine encoding for message. The following is the first 50 chars of the message for reference, although this may not be where the issue is: MSH|^~\\] with root cause 
```

ca.uhn.hl7v2.parser.EncodingNotSupportedException：确定消息的编码。以下是消息的前 50 个字符以供参考，尽管这可能不是问题所在：MSH|^~\

如何成功传递大型复杂字符串值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:47:44.663

尝试将 CDATA 放在大文本中，以避免在内容中解析 XML。然后你可以在你的内容中使用像“<”和“&”这样的字符：

```
<![CDATA[ your large complex string values with & < and &.... ]]> 
```

更多信息请访问[http://www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

# objective-c-blocks - 在 fb 注销期间帮助跟踪块被调用的工具

> ID：15624307
> 
> 赞同：0
> 
> 时间：2013-03-25T20:39:11.100
> 
> 标签：objective-c-blocks, facebook-ios-sdk

我有一个奇怪的错误，我的登录方法中的一个块在我的 facebook 注销功能中间被错误地再次调用。要发布很多代码，但我的问题是如何在 xcode 中进行调试。是否有我可以使用的特定工具来帮助跟踪从何处调用块？

这是线程信息

```
#0  0x0017ca21 in __46-[FacebookRepo startLoginWithCompletionBlock:]_block_invoke at /Users/transformer/Projects/PictoriousApp/Pictorious/Core/FacebookRepo.m:183
#1  0x00440a96 in -[FBSession transitionAndCallHandlerWithState:error:token:expirationDate:shouldCache:loginType:] at /Users/jacl/src/release-trashme/ios-sdk/src/FBSession.m:1497
#2  0x004414fa in -[FBSession closeAndClearTokenInformation:] at /Users/jacl/src/release-trashme/ios-sdk/src/FBSession.m:1702
#3  0x0043d814 in -[FBSession closeAndClearTokenInformation] at /Users/jacl/src/release-trashme/ios-sdk/src/FBSession.m:417
#4  0x0017d1c4 in -[FacebookRepo startLogout] at /Users/transformer/Projects/PictoriousApp/Pictorious/Core/FacebookRepo.m:248
#5  0x00198dad in -[PictoriousSession startLogout] at /Users/transformer/Projects/PictoriousApp/Pictorious/Core/PictoriousSession.m:140
#6  0x00212841 in -[EditProfileViewController userLogOut] at /Users/transformer/Projects/PictoriousApp/Pictorious/Controllers/People/Profile/EditProfileViewController.m:293 
```

让它看起来像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T13:25:19.343

我遇到了类似的问题。就我而言，它发生在我调用`closeAndClearTokenInformation`方法时。我已经解决了这个问题，只是`FBSession`在调用这个方法之前创建了新的实例对象。

```
self.session = [[FBSession alloc] init];
[self.session closeAndClearTokenInformation]; 
```

希望它会帮助你。

# mysql - 提高 MySQL 中子查询的性能

> ID：15624309
> 
> 赞同：0
> 
> 时间：2013-03-25T20:39:15.767
> 
> 标签：mysql, performance, subquery

这是我的查询，它使用两个子查询和临时表：

```
select visit.pid, visit.pidvnum, visit.hpv16, visit.qc_hst
FROM visit,
    (select distinct x.pid  from
        (select pid from visit where visit.qc_hst = 1) x,
        (select pid from visit where visit.hpv16 = 1) y
    where x.pid = y.pid) as subtbl
where visit.pid = subtbl.pid
AND (visit.qc_hst = 1 OR visit.hpv16 =1); 
```

有没有办法重写这个查询来消除一个或两个子查询？我还使用了带有相同两个子查询的 IN 子句，但这更糟。我无法索引像 qc_hst 和 hpv16 这样的字段，因为它们有几十个，而且它们中的任何一个都可能成为查询的一部分。

这是一个 sqlfiddle 链接：[http ://sqlfiddle.com/#!2/68bd6/6/0](http://sqlfiddle.com/#!2/68bd6/6/0)

非常感谢 - 我真的把我的头撞到墙上了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:45:53.730

您的查询似乎正在寻找 pid 同时满足这两个条件的记录。以下是另一种方法：

```
select v.pid, v.pidvnum, v.hpv16, v.qc_hst
from visit v join
     (select v.pid
      from visit v
      where visit.qc_hst = 1 or visit.hpv16 = 1
      group by pid
      having SUM(v.qc_hst = 1) > 0 and sum(v.hpv16 = 1) > 0
     ) vp
     on v.pid = vp.pid
where visit.qc_hst = 1 or visit.hpv16 = 1 
```

上的索引`visit(pid)`可能会帮助任何查询运行得更快。

# python - 按保留列的行对矩阵进行排序

> ID：15624310
> 
> 赞同：3
> 
> 时间：2013-03-25T20:39:16.563
> 
> 标签：python, sorting

我想按行对矩阵进行排序（升序），保留其列。例如，我有这个矩阵：

```
my_scores = [
        ['1', 0.03, 0.4, 0.6, 0.01, 0.1],
        ['2', 0.02, 0.5, 0.7, 0.01, 0.1],
        ['3', 0.01, 0.5, 0.7, 0.02, 0.3],
        ['4', 0.01, 0.5, 0.7, 0.03, 0.4],
        ['5', 0.03, 0.1, 0.2, 0.03, 0.4],
       ] 
```

第 1 列（索引 0）不是为了排序，它只是一个指示元素名称的信息列。我有这个向量 [1,2,3,4,5] 说我应该首先按我的第 2 列（索引 1）然后按第 3 列排序，依此类推...

所以我的矩阵排序函数会输出：

```
[
['1', 0.03, 0.4, 0.6, 0.01, 0.1],
['5', 0.03, 0.1, 0.2, 0.03, 0.4],
['2', 0.02, 0.5, 0.7, 0.01, 0.1],
['4', 0.01, 0.5, 0.7, 0.03, 0.4],
['3', 0.01, 0.5, 0.7, 0.02, 0.3]] 
```

例如，如果第 2 列的所有值都不同，我只需要按第 2 列排序，但由于它在 1 和 5 元素以及 4 和 3 元素中具有相同的值，我必须按第 3 列对它们进行排序，然后按第 4 列，然后是第 4 列，最后是第 5 列...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:40:34.740

您可以通过将`key`参数传递给`.sort()`函数来更改排序键：

```
my_scores.sort(key=lambda row: row[1:], reverse=True) 
```

给定的`lambda`键返回减去初始列的行，在排序时有效地忽略它。我们还要求进行*反向*排序，因此首先使用较大的值。

这导致：

```
>>> my_scores = [
...         ['1', 0.03, 0.4, 0.6, 0.01, 0.1],
...         ['2', 0.02, 0.5, 0.7, 0.01, 0.1],
...         ['3', 0.01, 0.5, 0.7, 0.02, 0.3],
...         ['4', 0.01, 0.5, 0.7, 0.03, 0.4],
...         ['5', 0.03, 0.1, 0.2, 0.03, 0.4],
...        ]
>>> my_scores.sort(key=lambda row: row[1:], reverse=True)
>>> import pprint 
>>> pprint.pprint(my_scores)
[['1', 0.03, 0.4, 0.6, 0.01, 0.1],
 ['5', 0.03, 0.1, 0.2, 0.03, 0.4],
 ['2', 0.02, 0.5, 0.7, 0.01, 0.1],
 ['4', 0.01, 0.5, 0.7, 0.03, 0.4],
 ['3', 0.01, 0.5, 0.7, 0.02, 0.3]] 
```

# java - Java：将小程序转换为桌面应用程序

> ID：15624312
> 
> 赞同：1
> 
> 时间：2013-03-25T20:39:23.853
> 
> 标签：java, applet

到目前为止，我只看到了将 Java 桌面应用程序转换为小程序的方法。有没有办法做相反的事情？（它继承自`java.applet.Applet`）

编辑：我的意思是以某种方式使小程序成为桌面可执行 JAR 文件（swing 或其他东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:45:53.980

最简单的方法是在某种 AppletViewer 中运行它

[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/appletviewer.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/appletviewer.html)

这是一个类似的问题。

[https://softwareengineering.stackexchange.com/questions/188982/how-to-run-an-applet-like-a-desktop-application-without-installing-entire-jdk](https://softwareengineering.stackexchange.com/questions/188982/how-to-run-an-applet-like-a-desktop-application-without-installing-entire-jdk)

希望能帮助到你。

如果失败，您将需要在 JFrame 和 java Swing 上重新构建代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:11:28.167

没有任何（示例）代码，很难确定示例。

但是，一般方法是将所有应用程序逻辑和 GUI 代码包含在单独的包/类中。通过将基本 UI 包含在 JPanel 之类的东西中，您可以选择放置它的位置。

这不仅意味着您可以将其切换为`JApplet`or `JFrame`，还可以根据需要将其作为复合 UI 的一部分

这就是我们建议不要直接在顶级容器之上添加/构建 UI 的原因之一

# css - 为什么单行跨度会产生更高的按钮？

> ID：15624317
> 
> 赞同：1
> 
> 时间：2013-03-25T20:39:35.080
> 
> 标签：css

所以我正在尝试制作一些花哨的单选按钮，我得到了一些奇怪的效果。我想让它们都统一大小，但我得到不同的大小取决于跨度是一两条线。我可以通过在单个衬里的按钮名称末尾添加来“破解”它来修复它`<br>&nbsp;`，但这似乎特别不雅。

请注意，我已经删除了 JS，因为此时问题出在 CSS 上。

[http://jsfiddle.net/aslum/BMbN2/2/](http://jsfiddle.net/aslum/BMbN2/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:47:52.023

我会放弃`display: inline-block`并选择`float:left`

[http://jsfiddle.net/BMbN2/7/](http://jsfiddle.net/BMbN2/7/)

您可能需要稍微调整其他值以将按钮放置在您想要的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:49:38.527

图像与最后一行文本的基线对齐。给予`.genreName`额外的`vertical-align:top`似乎消除了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T20:55:01.730

熟悉“vertical-align”css 属性。在这种情况下它非常有用。[http://www.w3schools.com/cssref/pr_pos_vertical-align.asp](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp) - 此外，“line-height”对内联块元素的高度具有重要意义。确保您正在适当地调整它。

我会添加“垂直对齐：中间；” #Action_ *Adventure、* #Audiobooks、#Biography _M ​​emoir 和#Chick-Lit 元素。此外，请务必从“.genreName”类中删除高度。这将使事情变得更好一些。我还建议您将单选按钮包装到它自己的 div 中并将它们浮动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T20:55:52.760

您的代码的问题在于跨度和单选按钮都呈现为块。如果左侧的跨度占用更多空间，则单选按钮被按下。这取决于浏览器如何呈现。

似乎您希望它们在同一高度上彼此相邻放置。你应该使用 float:left 和 float:right 。

# c# - 为什么 NAudio 只能通过我的“你所听到的”音量控制来抓取一个频道？

> ID：15624323
> 
> 赞同：1
> 
> 时间：2013-03-25T20:39:45.837
> 
> 标签：c#, naudio

我正在尝试为我选择的音频设备添加音量控制滑块。大多数情况下这都能正常工作，但由于某种原因，当我使用这种方法时，我的音量控制滑块只影响左声道。右声道的音量仍然是 100%（我上次通过 windows 离开的地方）。

我认为这可能是因为我正在抓取 FirstOrDefault() 所以我尝试抓取一个列表，但它仍然只导致 1 个项目。我肯定错过了什么。

这是获取 UnsignedMixerControl 的代码：

```
 private List<UnsignedMixerControl> _mixerControls;
    public List<UnsignedMixerControl> TryGetVolumeControls()
    {
        return _mixerControls 
            ?? (_mixerControls = waveIn.GetMixerLine().Controls.Where(c => c.ControlType == MixerControlType.Volume)
                                    .Select(c=>c as UnsignedMixerControl).ToList());
    } 
```

感谢您提出任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:14:33.447

混音器控件可以是多通道的，NAudio 中的值设置器确实会尝试在每个通道上设置相同的值。如果您能够针对 NAudio 源代码进行调试，您可能能够找出这是否是立体声控件以及是否为每个通道正确设置了值。

# android - 接收 BroadcastReceiver 消息时出错

> ID：15624324
> 
> 赞同：0
> 
> 时间：2013-03-25T20:39:57.440
> 
> 标签：android, broadcastreceiver, google-cloud-messaging

我有一个广播接收器，在一个活动类中实现，它通过谷歌云消息接受传入的消息。我想将此类用作聊天，因此在收到传入消息后，我使用 void：

```
public void Chatpat(String name, String message){

        chatinput.add(name);
        chatinput.add(message);

        Chat chat_data[] = new Chat[chatinput.size()];
        chatinput.toArray();

        ChatAdapter adapter = new ChatAdapter(this, 
                R.layout.listview_item_row, chat_data);

        chatList = (ListView) findViewById(R.id.listView1);
        chatList.setAdapter(adapter);

        return;
    } 
```

正如我所说，我收集传入的消息，并尝试创建一个布局以便我可以显示它们。我的 ChatAdapter 处理这个。问题是当我尝试从 BroadcastReceiver 获取消息时出现错误。我用这条线，

```
Chatpat(message_name, message_chat); 
```

收集传入的消息：

```
String message_name = intent.getExtras().getString(NAME_MESSAGED);
String message_chat = intent.getExtras().getString(CHAT_MESSAGED); 
```

希望我希望我的适配器在那之后能够创建一个 ListView 来显示我收到的消息，等等。问题是我收到错误并且应用程序崩溃：

```
03-25 22:22:09.928: E/AndroidRuntime(1010): java.lang.RuntimeException: Error receiving broadcast Intent { act=com.cabman.lol.ok.DISPLAY_MESSAGE (has extras) } in com.cabman.lol.ok.UserComActivity$1@44ee7778 
```

因此，我还在 Chatpat void 中得到了 NullPointerException。如果我删除：

```
Chatpat(message_name, message_chat); 
```

从广播接收器内部，消息以正确的方式传入，没有任何问题。我不明白为什么会发生这种情况。我相信问题在于我使用传入的消息来启动 Chatpat，从而创建一个列表视图来显示消息。

真正奇怪的是，我试图用其他来源提供 Chatpat，虽然它有效，但如果我尝试打印出一个值，我会再次得到相同的错误，关于接收 Intent。

这是整个活动：

```
public class UserComActivity extends Activity{
List<String> messages;
List<String> names;
private ListView chatList;
SessionManager session;
EditText userText;
EditText chatText;
UserFunctions user = new UserFunctions();
String informchat = "yes";
String message_gcm;
Boolean i = false;
Chat chat_data[] ;
ArrayList<String> chatinput = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.userchat);

    registerReceiver(mHandleMessageReceiver, new IntentFilter(
            DISPLAY_MESSAGE_ACTION));

    //chatText = (EditText) findViewById(R.id.messageHistory);
    userText = (EditText) findViewById(R.id.message);

    final String regId = GCMRegistrar.getRegistrationId(this);
    final Button button = (Button) findViewById(R.id.sendMessageButton);
    session = new SessionManager(getApplicationContext());
    HashMap<String, String> comu = session.matchUserDetails();

    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            String message = userText.getText().toString();

            if (i == false){
     session = new SessionManager(getApplicationContext());
     HashMap<String, String> comu = session.matchUserDetails();
             String gcm = comu.get(SessionManager.KEY_GCM);
             HashMap<String, String> co = session.getUserDetails();
             String name = co.get(SessionManager.KEY_NAME);

             System.out.println("UserComActivity:");
             System.out.println(name);
             System.out.println(gcm);

             chatText.setText(name +": "+ message);

          //   user.sendMessage(name, gcm, regId, message);
            }
            else if (i == true){

            session = new SessionManager(getApplicationContext());
            HashMap<String, String> co = session.getUserDetails();
            String name = co.get(SessionManager.KEY_NAME); 

         //   user.sendMessage(name, message_gcm, regId, message);

            }
        }
});

}

/**
public ArrayList<String> addChat(String name, String message){

    chatinput.add(name);
    chatinput.add(message);

    return chatinput;

}**/

    public void Chatpat(String name, String message){

        chatinput.add(name);
        chatinput.add(message);

        Chat chat_data[] = new Chat[chatinput.size()];
        chatinput.toArray(chat_data);

        ChatAdapter adapter = new ChatAdapter(this, 
                R.layout.listview_item_row, chat_data);

        chatList = (ListView) findViewById(R.id.listView1);
        chatList.setAdapter(adapter);

        return;
    }

private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {

        i = true;
        String message_tag = intent.getExtras().getString(TAG_MESSAGE);
        if(message_tag.equals("chat")){

        String message_name = intent.getExtras().getString(NAME_MESSAGED);
       String message_chat = intent.getExtras().getString(CHAT_MESSAGED);

         Chatpat(message_name, message_chat);

        }

    }
};

@Override
protected void onDestroy() {

    try {
        unregisterReceiver(mHandleMessageReceiver);
        GCMRegistrar.onDestroy(this);
    } catch (Exception e) {
        Log.e("UnRegister Receiver Error", "> " + e.getMessage());
    }
    super.onDestroy();
} 
```

}

这些是我用来创建列表视图以在活动中显示我想要的文本的类：

```
public class Chat {

public String name;
public String message;
public Chat(){
    super();
}

public Chat(String name, String message) {
    super();
    this.name = name;
    this.message = message;
    //System.out.println(name);
    System.out.println("Chat!!!!!!");
} 
```

}

和：

```
public class ChatAdapter extends ArrayAdapter<Chat>{

Context context; 
int layoutResourceId;    
Chat data[] = null;

    public ChatAdapter(Context context, int layoutResourceId, 
Chat[] data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    ChatHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new ChatHolder();
        holder.txtUName = (TextView)row.findViewById(R.id.userName);
        holder.txtMessage = (TextView)row.findViewById(R.id.txtChat);
        System.out.println("ChatAdapter");
        row.setTag(holder);
    }
    else
    {
        holder = (ChatHolder)row.getTag();
    }

    Chat chat = data[position];
    holder.txtMessage.setText(chat.message);
    holder.txtUName.setText(chat.name);
    System.out.println("ChatAdapter");
    return row;
}

static class ChatHolder
{

    TextView txtUName;
    TextView txtMessage;
} 
```

}

日志猫：

```
03-26 02:29:28.807: E/AndroidRuntime(5063): FATAL EXCEPTION: main
03-26 02:29:28.807: E/AndroidRuntime(5063): java.lang.RuntimeException: Error receiving     broadcast Intent { act=com.cabman.lol.ok.DISPLAY_MESSAGE (has extras) } in   com.cabman.lol.ok.UserComActivity$1@44e877d0
03-26 02:29:28.807: E/AndroidRuntime(5063):     at android.app.ActivityThread$PackageInfo$ReceiverDispatcher$Args.run(ActivityThread.java:905)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at android.os.Handler.handleCallback(Handler.java:587)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at android.os.Looper.loop(Looper.java:123)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at android.app.ActivityThread.main(ActivityThread.java:4627)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at java.lang.reflect.Method.invokeNative(Native Method)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at java.lang.reflect.Method.invoke(Method.java:521)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at dalvik.system.NativeStart.main(Native Method)
03-26 02:29:28.807: E/AndroidRuntime(5063): Caused by: java.lang.ArrayStoreException
03-26 02:29:28.807: E/AndroidRuntime(5063):     at java.lang.System.arraycopy(Native Method)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at java.util.ArrayList.toArray(ArrayList.java:523)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at com.cabman.lol.ok.UserComActivity.Chatpat(UserComActivity.java:149)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at com.cabman.lol.ok.UserComActivity$1.onReceive(UserComActivity.java:184)
03-26 02:29:28.807: E/AndroidRuntime(5063):     at android.app.ActivityThread$PackageInfo$ReceiverDispatcher$Args.run(ActivityThread.java:892)
03-26 02:29:28.807: E/AndroidRuntime(5063):     ... 9 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:51:21.077

在 Chatpat 中，您拥有`chatinput.add(name);`但`chatInput`被声明为
`ArrayList<String> chatinput = null;`，并且它不会在您的活动中的任何地方实例化。你应该把它声明为`ArrayList<String> chatinput = new ArrayList<String>();`

# c# - 用户输入后的 C# 时间延迟

> ID：15624329
> 
> 赞同：2
> 
> 时间：2013-03-25T20:40:35.740
> 
> 标签：c#, wpf, asynchronous, time, delay

我有一个在 .NET 4.0 中使用的自定义控件（继承自 TextBox）。

我需要做的是在用户完成输入后执行一些代码，例如在他停止输入后一秒钟。

每次 Text 更改时，我都无法执行此代码块，为了提高效率并且因为它有点耗时。理想情况下，每次用户开始和停止输入时，它应该只被调用一次。我已经开始在方法中使用[Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch%28v=vs.100%29.aspx)。`Restart()``OnTextChanged`

这是我的设置：

```
public class MyBox : TextBox
{
    private readonly Stopwatch timer;

    protected override void OnTextChanged(TextChangedEventArgs e)
    {
        timer.Restart();

        base.OnTextChanged(e);
    }
} 
```

我怎样才能有效地做到这一点？异步线程是答案吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T21:07:34.393

您可以使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/ms615945.aspx)轻松完成：

```
public class MyBox : TextBox
{
    private readonly DispatcherTimer timer;

    public MyBox()
    {
        timer = new DispatcherTimer { Interval = TimeSpan.FromSeconds(1) };
        timer.Tick += OnTimerTick;
    }

    protected override void OnTextChanged(TextChangedEventArgs e)
    {
        timer.Stop();
        timer.Start();
    }

    private void OnTimerTick(object sender, EventArgs e)
    {
        timer.Stop();
        // do something here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T17:41:45.227

使用带有[延迟](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.delay(v=vs.110).aspx)的绑定。样本：

```
<StackPanel>
    <TextBox Text="{Binding ElementName=TextBlock, 
                            Path=Text, 
                            Delay=1000}" />
    <TextBlock x:Name="TextBlock" />
</StackPanel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:04:19.537

如果您的代码可以在单独的线程上运行，那么请设计您的线程代码，以便可以通过终止线程来终止它。然后在每次按键时，终止旧线程（如果存在）并使用您的代码重新启动一个新线程。

注意：如果您的代码需要与 UI 线程交互，那么您必须确保调用回主线程，或者使用基本上为您执行此操作的“UpdateStatus”调用。

或者，您的计时器方法将起作用，但在执行时需要注意，主线程将被锁定直到它完成，因此我第一个建议可终止线程。

# jquery - jQuery.inArray() 没有按预期工作

> ID：15624336
> 
> 赞同：17
> 
> 时间：2013-03-25T20:40:47.930
> 
> 标签：jquery

我在这里做错了什么？这个想法是我可以将箭头键与其他任何按键分开，但每次按键都会触发警报“您按下了箭头键”。任何帮助都会很棒！

[jsFiddle](http://jsfiddle.net/UpHV5/)在这里或：

```
<input id='foo'>

<script>

$('#foo').keyup(function (e) {
    var key = e.keyCode;
    if ($.inArray(key, [37, 38, 39, 40])) {
        alert('you pressed an arrow key');
    } else {
        alert("you didn't press an arrow key");
    }
});

</script> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-25T20:41:44.960

您必须检查它是否返回索引 > -1。如果数组中没有出现键，则索引为 -1：

```
if ($.inArray(key, [37, 38, 39, 40]) >  -1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T20:48:07.160

$.inArray 方法如果在数组中则返回元素的索引，如果不在数组中则返回-1，因此不能将其用作 if 条件。将其更改为：

```
if($.inArray(key, [37, 38, 39, 40]) >= 0)) {

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T20:46:43.277

jQuery inArray 函数返回值的索引。对于左箭头键 (37)，它返回 0，并被解释为假。您应该将代码更改为 >=0

```
 if ($.inArray(key, [37, 38, 39, 40]) > -1) 
```

[数组](http://api.jquery.com/jQuery.inArray/)

# calendar - Davical/LDAP 身份验证 - 创建新用户时出现数据库错误

> ID：15624341
> 
> 赞同：1
> 
> 时间：2013-03-25T20:41:05.283
> 
> 标签：calendar, ldap, webdav

我已经安装了 Davical 1.1.1 并且使用默认身份验证工作正常。我正在尝试使用 OpenLDAP 2.3 服务器启用 LDAP 身份验证。身份验证似乎工作正常（日志显示我从 LDAP 服务器获取了正确的名称和电子邮件地址），但是当 Davical 尝试创建新用户时出现数据库错误。无论我尝试使用 LDAP 凭据登录 Web 面板还是以管理员身份登录并使用“工具”页面同步 LDAP 用户，都会发生同样的事情。

这是来自 LDAP 登录尝试的日志：

```
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: Principal: Query: QF: SQL error "42846" - ERROR: cannot cast type text to bit"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: Principal: Query: QF: INSERT INTO dav_principal (username,email,user_active,modified,fullname,type_id,default_privileges) VALUES(:username,:email,:user_active,:modified,:fullname,:type_id,cast(:default_privileges as text)::BIT(24))
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: Principal: Query: QF:     ":username" => "jon_williams"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: Principal: Query: QF:     ":email" => "jon@myserver.com"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: Principal: Query: QF:     ":user_active" => "1"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: Principal: Query: QF:     ":modified" => "2013-03-22 17:12:37"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: Principal: Query: QF:     ":fullname" => "Jon"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: Principal: Query: QF:     ":type_id" => "1"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: Principal: Query: QF:     ":default_privileges" => "000000000001111000000000"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF: SQL error "42804" - ERROR: column "user_no" is of type integer but expression is of type boolean HINT: You will need to rewrite or cast the expression."
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF: INSERT INTO collection (user_no, parent_container, dav_name, dav_etag, dav_displayname, is_calendar, is_addressbook, default_privileges, created, modified, resourcetypes) VALUES( :user_no, :parent_container, :collection_path, :dav_etag, :di
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF: splayname, :is_calendar, :is_addressbook, :privileges::BIT(24), current_timestamp, current_timestamp, :resourcetypes );
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF:     ":user_no" => ""
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF:     ":parent_container" => "/jon_williams/"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF:     ":dav_etag" => "-1"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF:     ":collection_path" => "/jon_williams/calendar/"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF:     ":displayname" => " calendar"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF:     ":resourcetypes" => "<DAV::collection/><urn:ietf:params:xml:ns:caldav:calendar/>"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF:     ":is_calendar" => "1"
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF:     ":is_addressbook" => ""
[25-Mar-2013 15:53:30 America/New_York] davical: LOG: index.php: Query: QF:     ":privileges" => ""
[25-Mar-2013 15:53:31 America/New_York] davical: ***: ERROR:AwlDBDialect: Named parameter '0' does not begin with a colon.
[25-Mar-2013 15:53:31 America/New_York] davical: ***: ERROR:AwlDBDialect: Named parameter '1' does not begin with a colon.
[25-Mar-2013 15:53:31 America/New_York] davical: LOG: Session: Query: QF: SQL error "08P01" - ERROR: bind message supplies 0 parameters, but prepared statement "pdo_pgsql_stmt_090efd34" requires 2"
[25-Mar-2013 15:53:31 America/New_York] davical: LOG: Session: Query: QF: UPDATE usr SET last_used = (SELECT session_start FROM session WHERE session.user_no = ? ORDER BY session_id DESC LIMIT 1) WHERE user_no = ?;
[25-Mar-2013 15:53:31 America/New_York] davical: LOG: Session: Query: QF:     "0" => ""
[25-Mar-2013 15:53:31 America/New_York] davical: LOG: Session: Query: QF:     "1" => ""
[25-Mar-2013 15:53:31 America/New_York] davical: LOG: Login: Query: QF: SQL error "42804" - ERROR: column "user_no" is of type integer but expression is of type boolean HINT: You will need to rewrite or cast the expression."
[25-Mar-2013 15:53:31 America/New_York] davical: LOG: Login: Query: QF: INSERT INTO session (session_id, user_no, session_key) VALUES( ?, ?, ? )
[25-Mar-2013 15:53:31 America/New_York] davical: LOG: Login: Query: QF:     "0" => "41"
[25-Mar-2013 15:53:31 America/New_York] davical: LOG: Login: Query: QF:     "1" => ""
[25-Mar-2013 15:53:31 America/New_York] davical: LOG: Login: Query: QF:     "2" => "d0f33746419fc250d60890666ee5a1fb"
[25-Mar-2013 15:53:31 America/New_York] davical: Login failure: ERR: Could not create new session. 
```

这里似乎有两个错误 - 一个是在尝试为用户创建主体时，另一个是在尝试创建默认集合集时。在后一种情况下，主体似乎没有返回“user_no”的值以用于新集合。

Davical LD​​AP 文档 ( [http://wiki.davical.org/w/Configuration/LDAP](http://wiki.davical.org/w/Configuration/LDAP) ) 表明“user_no”的映射字段应该对应 LDAP 中的 Unix uid，但我们的 LDAP 服务器不使用 uid 号，所以我从配置文件中删除了这个映射。这是当前配置的样子（更改了域名以保护无辜者）：

```
<?php
  $c->domain_name = "calendar.myserver.com";
  $c->admin_email = 'webmaster@myserver.com';
  $c->pg_connect[] = 'dbname=davical port=5432 user=davical_app';

  $c->authenticate_hook['call'] = 'LDAP_check';
  $c->do_not_sync_from_ldap = array('admin' => true);
  $c->authenticate_hook['config'] = array(
    'host'          => 'ldaps://www.myserver.com:636', //host name of your LDAP Server
    'bindDN'        => 'cn=Manager,dc=myserver,dc=com', //DN to bind request to this server (if required)
    'passDN'        => 'nice_try', //Password of request bind
    'baseDNUsers'   => 'ou=people,dc=myserver,dc=com', //where to look for valid user
    'filterUsers' => 'objectClass=inetOrgPerson', //filter which must validate a user according to RFC4515, i.e. surrounded by brackets
    'protocolVersion' => 3, // important for simple auth (no sasl)
    'mapping_field' => array(
                             'username' => 'uid',
                             'modified'  => 'modifyTimestamp',
                             'fullname' => 'cn', // "Common Name"
                             'email'    => 'mail'), //used to create the user based on his LDAP properties
    'format_updated'=> array('Y' => array(0,4),
                             'm' => array(4,2),
                             'd' => array(6,2),
                             'H' => array(8,2),
                             'M' => array(10,2),
                             'S' => array(12,2)), // map LDAP "modifyTimestamp" field to SQL "updated" field
     'scope' => 'subtree' // Search scope to use, defaults to subtree ( applies to BOTH user and group mappings )
                           // Allowed values: base, onelevel, subtree.
  );
  include('drivers_ldap.php'); 
```

这是 Davical 1.1.1 中的错误，还是我做错了什么？

# mongodb - 检索位于地理空间点附近的有限数量的记录

> ID：15624345
> 
> 赞同：0
> 
> 时间：2013-03-25T20:41:13.400
> 
> 标签：mongodb, geospatial, postgis

我有一个用例，我需要检索有限数量的记录，这些记录的位置听到地理空间点。类似于：

```
SELECT * FROM table WHERE location is near (x, y) LIMIT 200 
```

我想使用 PostGIS。但我不知道它是否支持这种查询。因为我不想检索边界框内的记录，而是根据到指定点的距离对记录进行排序的限制数量。我在 PostGIS 的文档中没有找到有关它的信息。

如果 PostGIS 支持它，它会扩展吗？这是我的应用程序中最常用的查询。而且记录的数量非常大。

我知道 MongoDB 有 $near 查询。它可以扩展吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:02:15.140

我无法与 postgis 交谈，但 MongoDB 的[$near](http://docs.mongodb.org/manual/reference/operator/near/)运算符旨在很好地扩展，具有适当的地理空间索引，并且查询的正确性和速度都经过了彻底的测试。[此外，使用限制](http://docs.mongodb.org/manual/reference/method/cursor.limit/#cursor.limit)光标选项指定您想要的结果数量非常容易，这减轻了服务器和网络的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T01:59:57.680

PostGIS 2 引入了 KNN GiST 索引距离算子（例如[`<->`质心算子），这在](http://postgis.net/docs/manual-2.0/geometry_distance_centroid.html)[2011 年的一篇博客文章](http://blog.opengeo.org/2011/09/28/indexed-nearest-neighbour-search-in-postgis/)中得到了很好的描述。这种距离操作员是为速度而设计的。

```
SELECT * FROM table WHERE location <-> ST_MakePoint(x, y) LIMIT 200; 
```

还有许多其他距离过滤器和运算符可用。

# ruby-on-rails - 设计忽略 client_options 授权路径

> ID：15624350
> 
> 赞同：0
> 
> 时间：2013-03-25T20:41:27.117
> 
> 标签：ruby-on-rails, twitter, devise, omniauth

我将在 rails 3.2 上的设计与 twitter 结合使用作为omniauth 策略。为了在不再次授权应用程序的情况下登录返回用户，我想使用 twitters 验证方法[Twitter API 文档](https://dev.twitter.com/docs/api/1/get/oauth/authenticate) 所以我需要调用“ [https://api.twitter.com/oauth/authenticate](https://api.twitter.com/oauth/authenticate) ”。

但是设计总是使用[https://api.twitter.com/oauth/authorize](https://api.twitter.com/oauth/authorize)，即使我确实在初始化程序中明确设置了它。

```
 config.omniauth :twitter, 'zsJ66OoLL1xmFNfDG+ifA', 'crRo2Gxi2wFmw3b3XXXXXX',
              :client_options => {:authorize_path => '/oauth/authenticate'} 
```

此外，omniauth twitter gem 正在使用“options.client_options.authorize_path = '/oauth/authenticate'”身份验证 URL。所以我不知道为什么设计要使用授权网址。

有谁知道如何强制使用身份验证 URL？

# 编辑

显然这似乎是一个 twitter 问题，因为我发现 twitter 正在重定向到授权 URL 事件，尽管我的用户仍然在 twitter 上登录..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:31:59.157

我刚刚从推特上偶然发现了这篇文章，它解释了这个问题

“使用 Twitter 登录”流程的变化

> 此更改仅允许对请求它的应用程序进行自动重定向。使用 /oauth/authenticate 并依赖登录用户的自动重定向行为的应用程序必须启用此“使用 Twitter 登录”选项。如果未启用该选项，用户将被定向到 /oauth/authorize，然后将提示完成应用程序批准流程。

[发帖链接](https://dev.twitter.com/blog/changes-to-sign-in-with-twitter)

# r - 带有方法的 R 简单鸭子类型对象

> ID：15624356
> 
> 赞同：0
> 
> 时间：2013-03-25T20:41:38.617
> 
> 标签：r, oop

我想在 R 中做一件非常简单的事情——有一个算法，我可以很容易地用一组函数参数化。我很确定我可以做一些像鸭子类型的对象。这是非常简单的代码中显示的想法：

```
par1.generate <- function(n) {
  runif(n, min=0, max=1000)
}

par1.mean <- function(vec) {
  mean(vec)
}

par2.generate <- function(n) {
  round(runif(n, min=0, max=1000))
}

par2.mean <- function(vec) {
  mean(vec, trim=0.2)
}

#the "algorithm"

alg <- function(par) {
  v <- par.generate(10)
  par.mean(v)
}

alg(par1)
alg(par2) 
```

如果我尝试运行此代码，我会得到类似

> alg(par1) 中的错误：找不到函数“par.mean”

所以我想我的直觉方法行不通。

做这样的事情的R方式是什么？任务很简单，所以我希望语法尽可能简单——没有抽象类或类似的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:00:47.997

另一种选择是使用函数列表。

```
par1 <- list(generate=par1.generate,mean=par1.mean)
par2 <- list(generate=par2.generate,mean=par2.mean)

alg <- function(par) {
  v <- par$generate(10)
  par$mean(v)
}

alg(par1)
[1] 495.2501
alg(par2)
[1] 481 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:03:10.383

S3 风格的函数调度确实有点让人联想到鸭式打字。您可以定义一个通用函数名称（下例中的“声音”），并为每个类覆盖不同的函数。根据参数的类属性，R 将选择适当的函数。特别阅读 UseMethod，它是 R 函数调度机制的中心。

改编自[http://www.r-bloggers.com/the-s3-oop-system/](http://www.r-bloggers.com/the-s3-oop-system/)的示例：

```
# Set up dispatch for the generic function sound: 
sound <- function(x) UseMethod("sound", x)

# Methods are defined with a naming convention: method.class:
# This defines the method sound on class dog:
sound.dog <- function(x) "bark"
# Same for cow:
sound.cow <- function(x) "moo"
# Fallback:
sound.default <- function(x) "animal sound"

# The methods function can find out which classes a generic function was designed for:
> methods("sound")
[1] sound.cow     sound.default sound.dog

# R looks for methods in the order in which they appear in the class vector until it found the appropriate method to operate on.
# This makes multiple-inheritance possible

> x <- structure("cat", class = c("cat", "dog", "cow"))
> sound(x)
[1] "bark" 
```

但在我看来，您似乎希望获得 R 所没有的语言功能。R 是古怪的，有时只是没有一种漂亮的做事方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T20:49:44.127

使用`match.fun`名称并将其作为字符串传递：

```
alg <- function(par) {
    v <- (match.fun(paste(par,"generate",sep=".")))(10)
    (match.fun(paste(par,"mean",sep=".")))(v)
} 
```

我得到：

```
# > alg("par1")
# [1] 615.5656
# > alg("par2")
# [1] 509 
```

还有一些更复杂的选项，使用表达式和符号，即在语言上进行计算。请告诉您是否对此类事情感兴趣，我们可以提供更多帮助。

# asp.net - MVC4 中的 jQuery $.post() 方法

> ID：15624358
> 
> 赞同：2
> 
> 时间：2013-03-25T20:41:39.340
> 
> 标签：asp.net, jquery-ui, jquery, asp.net-mvc-4

我正在使用 jQuery $.post() 方法来调用控制器中的方法，但是在调用此函数时它没有命中该方法。任何人都知道如何使用 jQuery $.post() 方法吗？

```
function OpenDialog(StateCode) { 
    $.post("~/Home/LoadCityViewModel", { 
        stateCode: StateCode }, 
        function () { 
            $("#dialog-modal").dialog("open"); 
        }); 
        return false; 
}

private ListingsViewModel LoadCityViewModel(string stateCode) { return null; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:48:02.283

由于您还有一些问题`$.post()`，我可以在您的代码中指定几个基本问​​题：

1.  `"~/Home/LoadCityViewModel"`不是有效的 url，ASP.NET`~/`服务器端仅识别符号以指向 Web 应用程序根路径（无论是虚拟目录还是网站根目录）。使用[`Url.Action`](http://msdn.microsoft.com/en-us/library/dd492758.aspx)or[`Url.Content`](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content.aspx)来解析 url。如果指定的代码在单独的 javascript 文件中声明，请考虑将 url 作为设置参数传递（在 Razor 视图中对其进行初始化），或者仅指定`"/Home/LoadCityViewModel"`（如果您确定您的 Web 应用程序将部署到网站根目录而不是到虚拟目录）。请注意，`"Home/LoadCityViewModel"`（不带前导`"/"`）表示“从当前位置”或“从当前页面路径”，它不起作用，例如，如果您从另一个控制器的视图调用。

2.  jQuery UI `Dialog Widget`：查看[API 示例或](http://api.jqueryui.com/dialog/#entry-examples)[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)上的源代码

3.  `return false`，当函数总是返回时真的有意义`false`吗？

4.  控制器的操作方法应该是公开的。

5.  请注意，Action 方法应该返回[`ActionResult`](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionresult.aspx)，而不是`ViewModel`.

6.  如果您需要限制您的操作仅处理[POST](http://en.wikipedia.org/wiki/POST_%28HTTP%29) http 方法（这就是您选择[jQuery.post()](http://api.jquery.com/jQuery.post/)而不是[jQuery.get()](http://api.jquery.com/jQuery.get/)的原因，我猜），用[`HttpPostAttribute`](http://msdn.microsoft.com/en-us/library/system.web.mvc.httppostattribute.aspx)

所以，我想这就是你基本上需要的（如果它是 Razor View 中的内联脚本）：

```
function OpenDialog(StateCode) { 
    $.post("@Url.Action("LoadCityViewModel", "Home")",
        // it will actually output "/Home/LoadCityViewModel"
        { stateCode: StateCode }, 
        function () { 
            $("#dialog-modal").dialog(); 
        });
} 
```

和服务器代码：

```
[HttpPost]
public ActionResult LoadCityViewModel(string stateCode) 
{ 
    return Json(null); //Pass your model as a parameter here.
} 
```

如果我写了太多多余的东西，那我很抱歉；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:53:31.870

## 最后，这是每次都能进行通话的最一致的方式。

```
function OpenDialog(StateCode) {
    $.ajax({
        type: 'POST',
        url: 'Home/LoadCityViewModel',
        data: JSON.stringify({ stateCode: StateCode }),
        contentType: 'application/json; charset=utf-8',
        cash: false,
        success: function () {
            $("#dialog-modal").dialog("open");
        }
    });
    return false;
} 
```

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:48:44.287

```
 $.Ajax({
                url: path to script,
                success: onSuccess,
                error: onError,
                type: 'POST',
                dataType: "json",
                contentType: "application/json",
                data: JSON.stringify(query)
            }); 
```

有一个 ajax 请求的示例，因为我喜欢格式化它。但这不一定是你的问题。我相信问题是您的方法的路径。例如，我有一个名为 UserLoginController 的控制器。从用户登录视图页面（javascript所在的位置）我使用url调用控制器 - UserLogin/Validate
基本上你想指定你想要调用的控制器和方法。验证是这种情况下的方法。

# mysql - 安装 mysql2 适配器时出错：请安装 mysql2 适配器：`gem install activerecord-mysql2-adapter`（无法加载此类文件 -- mysql2/mysql2）

> ID：15624372
> 
> 赞同：4
> 
> 时间：2013-03-25T20:42:35.607
> 
> 标签：mysql, ruby-on-rails, activerecord, gem, redmine

运行 Redmine2.3-stable 时出现此错误，随后无法成功安装 mysql2 适配器。

这是错误：

```
 Please install the mysql2 adapter: `gem install activerecord-mysql2-adapter` (cannot load such file -- mysql2/mysql2) 
```

我在运行网站、通过乘客和运行 rake db:migrate 时得到这个

适配器已安装：

宝石清单

***当地宝石***

```
actionmailer (3.2.13)
actionpack (3.2.13)
activemodel (3.2.13)
activerecord (3.2.13)
activerecord-mysql2-adapter (0.0.3)
activeresource (3.2.13)
activesupport (3.2.13)
afm (0.2.0)
arel (3.0.2)
Ascii85 (1.0.2)
bigdecimal (1.1.0)
builder (3.0.4, 3.0.0)
bundler (1.3.4)
coderay (1.0.9)
daemon_controller (1.1.2)
daemons (1.1.9)
erubis (2.7.0)
eventmachine (1.0.3)
fastthread (1.0.7)
hashery (2.1.0)
hike (1.2.1)
holidays (1.0.5)
i18n (0.6.1)
icalendar (1.2.3)
io-console (0.3)
journey (1.0.4)
jquery-rails (2.0.3)
json (1.7.7, 1.5.4)
mail (2.5.3)
mime-types (1.21)
minitest (4.7.0, 2.5.1)
multi_json (1.7.2)
mysql2 (0.3.11)
net-ldap (0.3.1)
nokogiri (1.5.9)
open-uri-cached (0.0.5)
passenger (3.0.19)
pdf-reader (1.3.2)
polyglot (0.3.3)
prawn (0.12.0)
rack (1.4.5)
rack-cache (1.2)
rack-openid (1.3.1)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.2.13)
railties (3.2.13)
rake (10.0.4, 0.9.2.2)
rdoc (3.12.2, 3.9.4)
ruby-openid (2.1.8)
ruby-rc4 (0.1.5)
rubygems-update (2.0.3)
sprockets (2.2.2)
thin (1.5.1)
thor (0.17.0)
tilt (1.3.6)
treetop (1.4.12)
ttfunk (1.0.3)
tzinfo (0.3.37) 
```

红宝石-v

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] 
```

宝石环境

```
- RUBYGEMS VERSION: 2.0.3
- RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-linux]
- INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/1.9.1
- RUBY EXECUTABLE: /usr/local/bin/ruby
- EXECUTABLE DIRECTORY: /usr/local/bin
- RUBYGEMS PLATFORMS:
  - ruby
  - x86_64-linux
- GEM PATHS:
   - /usr/local/lib/ruby/gems/1.9.1
   - /root/.gem/ruby/1.9.1
- GEM CONFIGURATION:
   - :update_sources => true
   - :verbose => true
   - :backtrace => false
   - :bulk_threshold => 1000
- REMOTE SOURCES:
   - https://rubygems.org/ 
```

根据此处的建议，我尝试通过编辑 Gemfile 将 redmine 强制为 rails3.2.2：

[Rails 3.2.2 mysql2 适配器错误](https://stackoverflow.com/questions/9862080/rails-3-2-2-mysql2-adapter-error)

*笔记*

我不得不使用以下命令强制 gem mysql2 bundle install 工作（我收到有关errormsg.h的错误）。

```
sudo gem install activerecord-mysql2-adapter -- --srcdir=/usr/include/mysql/ 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T11:25:13.873

在 Gemfile 中包含 mysql2 gem，并将 database.yml 中的适配器更改为 mysql2，然后进行捆绑安装。它会解决你的问题..

# iis - 在 Azure 开发结构中运行时，IIS 日志在哪里

> ID：15624377
> 
> 赞同：2
> 
> 时间：2013-03-25T20:43:01.210
> 
> 标签：iis, azure

在开发结构中调试 Azure 应用程序时，我正在寻找 IIS 错误日志（或访问日志）。他们在哪里？（Azure SDK 1.8）我认为它使用的是 IIS 8 Express。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:55:09.277

它们在文件夹`devstoreaccount1`下的本地存储模拟器帐户（ ）中可用，`wad-iis-logsfiles`如下图所示：

![wadiis 日志文件](../Images/ef634626a78196175c2e0973b14e141f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:56:25.323

如果您使用 IISExpress 在本地运行 Azure 实例，您可以通过右键单击系统托盘中的图标来启动 IISExpress 视图，如下所示：

![在此处输入图像描述](../Images/35bff5306888d606986d6152851af6b0.png)

一旦你看到它，你可以看到配置文件所在的位置，日志文件位于上述文件夹内的文件夹名称 iisexpress：

```
C:\Users\avkashc\AppData\Local\dftmp\Resources\6bffef53-b946-4d1e-9b38-cf10cdfec118\temp\temp\RoleTemp\iisexpress 
```

如果您想查看特定于本地部署的日志，您可以随时查找以下文件夹，然后查找您的部署（NO）文件夹：

```
C:\Users\avkashc\AppData\Local\dftmp\logs 
```

# c# - 如何在多域场景中查找任何机器名称的 FQDN

> ID：15624379
> 
> 赞同：2
> 
> 时间：2013-03-25T20:43:03.047
> 
> 标签：c#, cross-domain, fqdn

我发现这个[问题](https://stackoverflow.com/questions/804700/how-to-find-fqdn-of-local-machine-in-c-net)是为了获取本地主机的 FQDN。我的问题是，有没有办法获得与我们在 c# 中查询的主机不在同一个域中的机器的 FQDN。

例如：在 machineA（在域 A 中）上运行一个程序来找出 machineB（在域 B 中）的 FQDN。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-14T09:33:19.307

在 C# (.NET) 中，您可以调用

```
var fqdn = System.Net.Dns.GetHostEntry("host-name-goes-here").HostName 
```

*powershell*几乎一样**

 *```
$fqdn = [System.Net.Dns]::GetHostEntry("host-name-goes-here").HostName 
```*

# iphone - 如何在 UINavigationController 中正确继承 UITableViewController？

> ID：15624382
> 
> 赞同：0
> 
> 时间：2013-03-25T20:43:20.590
> 
> 标签：iphone, ios, objective-c, uinavigationcontroller, uitableview

我是 Objective C 的初学者。我已经搜索了四个小时，但我找不到一个有用的（对我来说）答案。

我有一个 TableView，但我需要一个标题栏。在搜索了如何执行此操作后，我发现我必须将 a 子类`UITableView`化为`UINavigationController`.

请注意，我不想用这个 TableView 制作一个全新的应用程序，我希望它成为我正在开发的更大应用程序的一部分。

因为我是初学者，所以我不知道该怎么做，在尝试了几个小时后，我决定发布这个问题。

有没有人有教程，清晰的分步描述或类似的东西，清楚地描述了如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:47:01.873

创建表视图控制器的实例，然后将其设置为导航控制器的根视图控制器。

```
TheTableViewController *viewController = [[TheTableViewController alloc] initWithStyle:UITableViewStyleGrouped];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:viewController];
//present navigationController - [self presentViewController:navigationController animated:YES completion:NULL];

...

//TheTableViewController.m
self.title = @"title"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:54:14.540

要创建一个带有标题的栏，您需要一个`UINavigationController`将控制其中的`UIViewController`每个 viewController 的属性称为`title`. 此标题将出现在导航的顶部栏中。所以做这样的事情：

```
UITableViewController *tableVC = [[UITableViewController alloc] init];
tableVC.title = @"myTable";
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:tableVC]; 
```

您可以`nav`在 DidLaunch 函数中设置为根视图控制器`appDelegate`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:10:46.767

你在使用故事板吗？如果是这样，也许这会对您有所帮助：

[http://kurrytran.blogspot.de/2011/10/ios-5-storyboard-uitableview-tutorial.html](http://kurrytran.blogspot.de/2011/10/ios-5-storyboard-uitableview-tutorial.html)

快乐的编码，诺比

# php - Twitter Oauth (PHP) - 获取带有链接的最新推文

> ID：15624383
> 
> 赞同：1
> 
> 时间：2013-03-25T20:43:20.620
> 
> 标签：php, twitter, oauth

我正在使用[Twitter oauth 库](https://github.com/abraham/twitteroauth)。

我已经设置好了，可以从用户时间线中提取最新的推文。我的问题是让链接显示出来。这一切都以纯文本形式返回。需要将用户名 (@user) 链接到他们的页面、主题标签链接以及任何链接的 URL。

验证凭据后，我正在使用以下代码拉取最新的用户推文。

```
$statuses = $connection->get('statuses/user_timeline', array('screen_name' =>   
$twitterUser, 'count' => $count));

foreach ($statuses  as $status) {

echo $status->text . "<br>";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:46:10.167

出于技术和服务条款的原因，您需要为此使用该`entities`块。

```
"entities": {
  "url": {
    "urls": [
      {
        "expanded_url": null,
        "url": "http://dev.twitter.com",
        "indices": [
          0,
          22
        ]
      }
    ]
  },
  "description": {
    "urls": [

    ]
  }
}, 
```

[https://dev.twitter.com/docs/tweet-entities](https://dev.twitter.com/docs/tweet-entities)

# android - 数据库中的数据不会在文本视图中打印

> ID：15624386
> 
> 赞同：0
> 
> 时间：2013-03-25T20:43:27.817
> 
> 标签：android, database

我是这种编程的新手。我认为我错过了一些东西，但我不知道我错过了什么。运行模拟器时我没有收到任何错误，并且我能够验证数据是否正在进入数据库。我只是不能让它显示在列表中。列表显示但没有数据。请帮忙！

显示课程.java

```
package com.greygoosefarmpa.fencecoursebuilder;
import java.util.ArrayList;
import java.util.List;

import com.google.android.maps.MapActivity;
import com.greygoosefarmpa.db.courseDBOpenHelper;
import com.greygoosefarmpa.db.courseDataSource;
import com.greygoosefarmpa.model.Course;

import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class displayCourse extends MapActivity {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.displaycourse);

TextView dc = (TextView) findViewById(R.id.displayCourses);

courseDataSource datasource = new courseDataSource(this);
datasource.open();

List<Course> course = datasource.findAll();

ArrayAdapter<Course> adapter = new ArrayAdapter<Course>(this, android.R.layout.simple_list_item_1, course);
setListAdapter(adapter);
//datasource.close();

}

private void  setListAdapter(ArrayAdapter<Course> adapter) {
    // TODO Auto-generated method stub

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}} 
```

courseDataSource.java

```
package com.greygoosefarmpa.db;

import java.util.ArrayList;
import java.util.List;

import com.greygoosefarmpa.model.Course;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.*;
import android.util.Log;

public class courseDataSource {

public static final String LOGTAG = "courseDatabase";

SQLiteOpenHelper dbhelper;
SQLiteDatabase database;

private static final String[] allColumns = {
        courseDBOpenHelper.COLUMN_ALOCATION,
        courseDBOpenHelper.COLUMN_BLOCATION,
        courseDBOpenHelper.COLUMN_COURSENAME,
        courseDBOpenHelper.COLUMN_FENCENAME,
        courseDBOpenHelper.COLUMN_ID    };

public courseDataSource(Context context) {
    dbhelper = new courseDBOpenHelper(context);
    database = dbhelper.getWritableDatabase();
}

public void open(){
    Log.i(LOGTAG, "database open");
    database = dbhelper.getWritableDatabase();
}

public void close(){
    Log.i(LOGTAG, "database closed");
    dbhelper.close();
}

public Course create(Course course) {
    ContentValues values = new ContentValues();
    values.put(courseDBOpenHelper.COLUMN_COURSENAME, course.getcourseid());
    values.put(courseDBOpenHelper.COLUMN_FENCENAME, course.getcoursename());
    values.put(courseDBOpenHelper.COLUMN_ALOCATION, course.getAlocation());
    values.put(courseDBOpenHelper.COLUMN_BLOCATION, course.getBlocation());
    long insertid = database.insert(courseDBOpenHelper.TABLE_COURSES, null, values);
    course.setcourseid(insertid);
    return course;
}

public List<Course> findAll() {
    List<Course> courses = new ArrayList<Course>();

    Cursor cursor = database.query(courseDBOpenHelper.TABLE_COURSES, allColumns, null, null, null, null, null);
            Log.i(LOGTAG, "returned " + cursor.getCount() + " rows");
            cursor.moveToFirst();
            while(!cursor.isAfterLast()) {
            cursorToCourse(cursor);
            cursor.moveToNext();
            }
            cursor.close();
            return courses;
        }

private Course cursorToCourse(Cursor cursor) {
    Course course = new Course();
    course.setcourseid(cursor.getLong(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_ID)));
    course.setAlocation(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_ALOCATION)));
    course.setBlocation(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_BLOCATION)));
    course.setcoursename(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_COURSENAME)));
    course.setfencename(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_FENCENAME)));
    return course;
}
} 
```

课程.java

```
package com.greygoosefarmpa.model;

import java.text.NumberFormat;

import android.R.string;
import android.view.View;

public class Course {
private long courseid;
private String coursename;
private String fencename;
private String Alocation;
private String Blocation;

public long getcourseid(){
    return courseid;
}

public void setcourseid(long courseid) {
    this.courseid = courseid;
}

public String getcoursename(){
    return coursename;
}

public void setcoursename(String string){
    this.coursename = string;
}

public String getfencename(){
    return fencename;
}

public void setfencename(String fencename){
    this.fencename = fencename;
}

public String getAlocation(){
    return Alocation;
}

public void setAlocation(String string){
    this.Alocation = string;
}

public String getBlocation(){
    return Blocation;
}

public void setBlocation(String string){
    this.Blocation = string;
}

} 
```

courseDBOpenHelper.java

```
package com.greygoosefarmpa.db;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class courseDBOpenHelper extends SQLiteOpenHelper {

private static final String LOGTAG = "courseDatabase";

private static final String DATABASE_NAME = "courses.db";
private static final int DATABASE_VERSION = 1;

public static final String TABLE_COURSES = "courses";
public static final String COLUMN_ID = "coursesID";
public static final String COLUMN_COURSENAME = "coursename";
public static final String COLUMN_FENCENAME = "fencename";
public static final String COLUMN_ALOCATION = "alocation";
public static final String COLUMN_BLOCATION = "blocation";

private static final String TABLE_CREATE = 
        "CREATE TABLE " + TABLE_COURSES + " (" +
        COLUMN_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
        COLUMN_COURSENAME + " TEXT, " +
        COLUMN_FENCENAME + " TEXT, " +
        COLUMN_ALOCATION + " NUMERIC, " +
        COLUMN_BLOCATION +  " NUMBERIC " +
        ")";

public courseDBOpenHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(TABLE_CREATE);
    Log.i(LOGTAG, "table created");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS" + TABLE_COURSES);
    onCreate(db);

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:00:30.847

尝试将您的 while 语句更改为：

```
cursor.moveToFirst();
while(!cursor.isAfterLast()) {
    ...operations...
    cursor.moveToNext();
} 
```

这就是我一直进行光标迭代的方式。您可能想考虑创建另一个函数来创建给定光标的课程，就像这样。

```
private Course cursorToCourse(Cursor cursor) {
    Course course = new Course();
    course.setcourseid(cursor.getLong(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_ID)));
    course.setAlocation(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_ALOCATION)));
    course.setBlocation(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_BLOCATION)));
    course.setcoursename(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_COURSENAME)));
    course.setfencename(cursor.getString(cursor.getColumnIndex(courseDBOpenHelper.COLUMN_FENCENAME)));
    return course;
} 
```

只是为了清理一下，而且您可以轻松地重复使用它。

哦，快！在返回之前不要忘记在 findAll() 的末尾关闭光标。

```
cursor.close(); 
```

# linux - 使用 curl -D 检查服务器响应

> ID：15624387
> 
> 赞同：1
> 
> 时间：2013-03-25T20:43:33.217
> 
> 标签：linux, curl

据我从 man curl 页面中可以看出， -D 选项应该为我提供服务器对我发送的请求的响应。当我尝试读取存储在我要连接的服务器上的文件时，我可以正确读取它：

```
curl -uUSERNAME:PASS SERVER-NAME/path-to-file > my_output 
```

这是成功的，所以我可以使用我使用的凭据正确访问。现在我想创建一个预读验证步骤，首先读取对我的访问尝试的响应，如果收到 200 OK，请继续请求文件......所以我使用

```
curl -D -uUSERNAME:PASS SERVER-NAME > my_output 
```

现在我得到一个 401 响应，我不明白：

```
<title>401 Authorization Required</title> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:56:07.990

尝试这样做：

```
intvar=$(curl -s -w %{http_code} http://SERVER-NAME/path-to-file -o /dev/null)
case $intvar in
    4*|5*)
        echo >&2 "Fatal: HTTP $intvar code spotted."
        exit 1
    ;;
    2*|3*)
        echo "HTTP $intvar code spotted."
        # 2nd curl command
    ;;
esac 
```

看 ：

```
man curl | less +/^' *-w' 
```

# ruby - Ruby 中的“self”发生了什么变化？

> ID：15624388
> 
> 赞同：2
> 
> 时间：2013-03-25T20:43:33.810
> 
> 标签：ruby, oop, self

我完全迷失了`self`关键字。当我们进入模块、类、方法、块或其他所有内容时，它会如何变化？谁能给我一个总结？

在这里，我要问 self 是如何随着执行而改变的，而不是 self 的含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:47:14.070

与 JavaScript`this`可能引用任意数量的事物不同，在 Ruby 中`self`总是引​​用当前方法的*执行上下文*。

在`class`方法中，`self`将引用类本身：

```
class FooClass
  def self.bar
    self # => FooClass
  end
end 
```

在`class`实例方法中，`self`将引用实例：

```
class FooClass
  def bar
    self # => This instance (FooClass#nnnn)
  end
end 
```

在一个`module`方法内，`self`可以指模块：

```
module FooModule
  def self.bar
    self # => FooModule
  end
end 
```

当一个模块方法被混入 via`include`时，它将引用一个实例：

```
module FooModule
  def bar
    self # => (Depends on included context)
  end
end

class BarClass
  include FooModule

  def foo
    bar # => This instance (BarClass#nnnn)
  end
end 
```

唯一棘手的部分是模块，它们之所以棘手，是因为其他东西可以包含它们。最好记住它的方法`self`通常是指点*左侧*的东西。也就是说，`my_object.foo`手段`self`是`my_object`在该方法的直接上下文中。

有一些方法可以通过使用和类型操作或声明来操作*eigenclass*`self`在块的上下文中重新定义。`instance_eval``class_eval``class << self`

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T21:18:08.620

`self`总是指当前对象。

```
class A
  p self # => A

  def foo
    p self # => instance of A
  end
end

module M
  p self # => M
end

A.new.foo 
```*

# jquery - 将 datepicker 分配给每个数组元素

> ID：15624391
> 
> 赞同：0
> 
> 时间：2013-03-25T20:43:37.803
> 
> 标签：jquery

我有以下 javascript

```
 $(document).ready(function(){
            $.datepicker.setDefaults({
                changeMonth: true,
                changeYear: true,
                dateFormat : 'yy-mm-dd',
                inline : true,
            });
            var dateFields = ['non_fed_photo_id_exp_date', 'non_fed_id_exp_date', 'federal_photo_id_exp_date'];
            $.each(dateFields, function(field){
                $('#UserRegistration_user_'+field).datepicker({
                    yearRange: '<?php echo date('Y'); ?>:+30'
                });
            });
            $('#UserRegistration_user_dob').datepicker({
                defaultDate: '-20y',
                yearRange: '-100:-15'
            });
        }); 
```

UserRegistration_user_dob 元素被正确地分配了日期选择器，但数组中的字段不是。

我缺少什么/做错了什么有什么突出的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:47:41.940

[`.each()`](http://api.jquery.com/jQuery.each/)的回调有两个参数，索引和值。您只使用索引。

试试这个：

```
$.each(dateFields, function (idx,field) {... 
```

您的原始代码会产生如下选择器：

```
#UserRegistration_user_0 
#UserRegistration_user_1 
#UserRegistration_user_2 
```

我的小修改会产生：

```
#UserRegistration_user_non_fed_photo_id_exp_date 
#UserRegistration_user_non_fed_id_exp_date 
#UserRegistration_user_federal_photo_id_exp_date 
```

# java - 使用数组和计数器随机掷骰子（始终打印 0，即使条件为真）

> ID：15624392
> 
> 赞同：0
> 
> 时间：2013-03-25T20:43:38.613
> 
> 标签：java, arrays

我在我的第二个函数类型方法中设置了一个计数器，以便每次滚动添加到 1000 个滚动的“2”，它将在 main 方法中打印次数。除了值总是返回为 0，当程序运行时，忽略空的 if/else 块，我还没有填充那些因为我试图先修复一些对我有帮助的东西。

我已经尝试研究其他方法来实现这一点，除了二进制搜索似乎是最合理的，除非在这种情况下，要么我使用不正确，要么程序中出现了另一个问题。

```
import java.util.Scanner;
import java.util.Arrays;

public class de
{
  public static void main (String args []) {

    Scanner in = new Scanner (System.in);

    int[] counts = new int[1000];
    int [] counts2 = new int[1000];

    int userInput;
    String input;
    int counter = 0;

    System.out.println("Hello and welcome to the program");
    System.out.println("In this program two six sided dices will be rolled and one eleven sided dice will be rolled (1000 times each)");

    System.out.println("The dices will be rolled to determine the odds of how many times the roll 2 comes up on both dices and die");
    System.out.println("(Press any key to be prompted) with user Instructions");
    input = in.nextLine();

    System.out.println("To determine the amount of times snake eyes is rolled with two six sided dices press '1'");
    System.out.println("For the amount of times two is rolled on a eleven sided die press '2'");
    System.out.println("For both press '3', or to exit this program press '4' ");
    userInput = in.nextInt();
    in.nextLine();

    if (userInput == 1)
    {

      System.out.println("is " + counter);
    }

    else if (userInput == 2)
    {
      // enter code...(Not finished)
    }

    else if (userInput == 3)
    {
      // enter code...(Not finished)
    }

    else 
    {
      // enter code... (Not finished)
    }
  }
  // pass array into method
  void myMethod (int[] counts, int[] counts2)
  {
    for (int i = 0; i < counts.length; i++)
    {

      counts [i] = (int)(Math.random ()*6+1)+ (int)(Math.random ()*6+1);
      counts2 [i] = (int)(Math.random ()*10+2);
    }
  } // pass array into method
  public static int Secendmethod (int [] counts, int counter)
  {
    Arrays.binarySearch(counts, 2);
    for(int i = 0; i <counts.length; i++) 

      if (counts[i] == 2) {
      counter++;

    }
    return counter ;
  }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:03:51.127

好的。首先将您的 myMethod() 更改为...

```
public static int[] create(int n)
{
    int[] temp = new int[1000];
    if(n == 6)
    {            
        for (int i = 0; i < 1000; i++)
        {
            temp[i] = (int)(Math.random ()*6+1);
        }
    }
    if(n == 11)
    {
        for (int i = 0; i < 1000; i++)
        {
            temp[i] = (int)(Math.random ()*10+2);
        }
    }
    return temp;
} 
```

还将 Secondmethod 更改为...

```
public static int Secendmethod(int[] ar)
{
    int counter = 0;
    for(int i = 0; i < 1000; i++) 
    {
        if (ar[i] == 2) 
        {
            counter++;
        }
    }
    return counter ;
} 
```

然后将您的 if 语句更改为：

```
if (userInput == 1)
{
  counts = create(6);
  System.out.println("is " + Secondmethod(counts));

} 
```

对于 userInput 是两个，使第一行：counts2 = create(11); 第二个： System.out.println("is " + Secondmethod(counts2));

祝你好运，随时提问！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:05:20.700

这是我将如何比较一卷 2

```
 import java.util.Scanner;
import java.util.Arrays;

public class de
{
  public static void main (String[] args ) {

    Scanner in = new Scanner (System.in);

    int[] counts = new int[1000];
    int[] counts2 = new int[1000];

    int userInput;
    String input;
    int counter = 0;

    userInput = in.nextInt();
    in.nextLine();

    if (userInput == 1){ //used in your previous code
        rollDice(counts,6); //populates array count with Random int by 6
        rollDice(counts2,6); //populates array count with Random int by 6
        counter = compareDoubles(counts,counts2,1);
        System.out.println("is " + counter);
    }

  }
  /*
   * count: Array to store resulting dice rolls
   * diceSize: number of different results from rolling dice
   */
  static void rollDice(int[] counts, int diceSize){
        for (int i = 0; i < counts.length; i++){
            counts [i] = (int)(Math.random ()*diceSize+1); 
        }
  }
  /*
   * firstCounts: first set of numbers
   * secondCounts: second set of numbers
   * num: number to compare both sets against
   * returns number of times both sets evaluate to num
   */
  public static int compareDoubles (int [] firstCounts, int[] secondCounts, int num)  {
    int amount = 0;

    if(firstCounts.length <= secondCounts.length){ //make sure we don't get arrayOutOfBounds
    for(int i = 0; i <firstCounts.length; i++) 
        if (firstCounts[i] == num && secondCounts[i] == num) 
            amount++;
    }
    return amount;
  }  
} 
```

*编辑

如果以后不使用数组，（仅用于计算掷骰子，效率不高）。我扩展了掷骰子以返回所有骰子掷出一个数字的次数。

要以更有效和动态的方式执行我们上面所做的事情，请调用

```
counter = rollDice(1000, 2, 6, 1); 
```

这将去

```
 /*
           * rolls: number of times a dice is thrown
           * dice amount: number of di being thrown
           * diceSize: number of different results from rolling dice
           * number: number of times all dice land on number
           */
          static int rollDice(int rolls, int diceAmount, int diceSize, int number){
                int amount = 0;

                for (int i = 0; i < rolls; i++){
                    int[] dice = new int[diceAmount];
                    boolean alltrue = true;
                    for (int j = 0; j < diceAmount; j++){ //Roll all the dice to a random number by diceSize
                        dice[j] = (int)(Math.random ()*diceSize+1); 
                    }

                    for (int j = 0; j < diceAmount; j++){ //Recount all the dice rolled to see if they all landed the same way
                        if(dice[j] != number)
                             alltrue=false;
                }
                if(alltrue) //All dice were the number
                    amount++;

            }
            return amount;
      } 
```

# sql - 如何创建一个检查其他表以查看是否有数据的 select 语句？

> ID：15624395
> 
> 赞同：-2
> 
> 时间：2013-03-25T20:43:43.990
> 
> 标签：sql

如何创建一个检查其他表以查看是否有数据的 select 语句？

例如，假设我有一个包含 Cities 和 States 的 City 表，然后我有 3 个其他包含 Cities 和 States 的企业的表。那么我如何只获得有数据的城市呢？

例如，让我们以佛罗里达为例。如何获得佛罗里达州至少有 3 家企业的城市？

我想它会像

```
Select City C from Cities
where( Select (count) from FloridaBeds where City = C.City where (count) > 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:48:49.303

要查找佛罗里达州有 1-3 个床位且堪萨斯州有不到 3 个床位的城市，请尝试：

```
select  c.City 
from    Cities c
join    FloridaBeds fb
on      fb.City = c.City
join    KansasBeds kb
on      kb.City = c.City
group by
        c.City
having  count(distinct fb.ID) between 1 and 3
        and count(distinct kb.ID) <3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:05:47.133

要选择有数据的城市，请尝试以下操作：

```
SELECT DISTINCT City
FROM Cities RIGHT JOIN
FloridaBeds ON FloridaBeds.CityId = Cities.CityId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:59:57.313

要获取佛罗里达州至少拥有 3 家企业的城市列表，您可以执行以下操作：

```
SELECT City
FROM Cities c
WHERE City IN
    (
    SELECT City
    FROM FloridaBeds
    GROUP BY City
    HAVING COUNT(City) >= 3
    ) 
```

城市名称似乎在您的 FloridaBeds 表中。如果这是真的，并且您没有备用键，例如 CityID，您可以这样做来获取城市名称列表。

```
SELECT City
FROM FloridaBeds
GROUP BY City
HAVING COUNT(City) >= 3 
```

# javascript - 如何上传包含在 javascript 变量中的 base64 编码文件？

> ID：15624399
> 
> 赞同：0
> 
> 时间：2013-03-25T20:44:02.340
> 
> 标签：javascript, ajax, forms, upload

我正在使用一个浏览器插件，它接收来自扫描仪的输入并返回一个 base64 编码的字符串。我正在尝试获取此字符串并将其用作表单帖子的内容。我不知所措。

```
var formElem = document.getElementById("fileUploadForm");
var imagedata;

Plugin.SelectedImagesCount = 1;
Plugin.SetSelectedImageIndex(0,0); // Set the 1st image as the first selected image.

Plugin.GetSelectedImagesSize(1); //jpeg
imagedata = Plugin.SaveSelectedImagesToBase64Binary();
//This is where I'd like to send the imagedata to the server 
```

我试过搜索，但到目前为止我发现的唯一方法是构建自定义 http 来模拟表单提交。我想重用现有的文件上传表单。

```
<form id="fileUploadForm" method="POST" enctype="multipart/form-data">
    <!-- Scanning -->
    <select name="docType">
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
    <button onClick="ScanImage(); return false;">Scan</button>
    <!-- Uploading -->
    <input id="DocUploadInput" type="file" name="RemoteFile" />
    <button onClick="fileUpload(this.form,'/UploadDocument/'); return false;">Upload</button>
</form> 
```

# go - string 到 int 的类型转换

> ID：15624402
> 
> 赞同：3
> 
> 时间：2013-03-25T20:44:07.203
> 
> 标签：go

好的，所以我在将字符串类型转换为字节写入时遇到了困难。这是编译器错误：

> 不能在函数参数中使用 row[5]（类型 uint8）作为字符串类型
> 
> 不能在函数参数中使用 &v (type *Field) 作为 int 类型

这是第 [5] 行的示例：$15,000.00

我已经声明了一个结构：

```
type Field struct {
Eia uint8
} 
```

这是主要的实现：

```
for {
    record, err := reader.Read()
    if err == io.EOF {
        break
    } else if err != nil {
        panic(err)
    }

    var v Field
    for _, row := range record {
        eia, err := strconv.ParseInt(row[5], 8, &v) // Estimated Incoming Amount
        if err == nil {
            fmt.Printf("%+v\n", v)
        } else {
            fmt.Println(err)
            fmt.Printf("%+v\n", v)
        } 
```

谁能向我解释一下 strconv 如何将行转换为整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:18:30.200

如果你在[http://play.golang.org/](http://play.golang.org/)上做了一个完整的例子，给你一个完整的解决方案会更容易。

ParseInt() 接受字符串（您可能必须这样做`string(row[5])`）、基数（您可能指的是 10）和位大小（应该放 8 的地方）。

它重新调整一个 int (eia)，它不会将它放入结构中，因为它看起来像你正在尝试。

而是做`if err == nil { v.Eia = eia }`.

# java - 如何重置按钮颜色？

> ID：15624405
> 
> 赞同：2
> 
> 时间：2013-03-25T20:44:11.607
> 
> 标签：java, android

我有一个游戏，有 16 个按钮。每次单击按钮后，我都会为按钮设置颜色。现在，点击 16 次后，我的活动重新加载。我想在重新加载后将所有按钮的颜色重置为起始值。我的按钮有一些透明度，在buttons.xml 中设置。这是我的代码，我计算按钮点击次数，其中 16 次后我重新加载活动。如何重置所有按钮的颜色，但要保持buttons.xml的透明度和设置？

```
final OnClickListener clickListener = new OnClickListener() {

            private Button buttonClicked;
            private int counter = 0;
            private int numberOfClicks = 0;

            public void onClick(View v) {
                numberOfClicks++;
                if (brojacKlikova < 10) {

                Button button = (Button) v;
                button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0xFFCC99));

                if (buttonClicked == null) {
                    // first button is clicked
                    buttonClicked = button;
                } else {
                    // second button is clicked
                    if (buttonClicked.getTag().equals(button.getTag())) {
                        Toast.makeText(Spojnice.this, "Correct", Toast.LENGTH_SHORT).show();
                        button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.setEnabled(false);
                        button.setEnabled(false);
                        counter = counter + 5;
                        score.setText("Points: " + counter);
                    } else {
                        Toast.makeText(Spojnice.this, "Wrong!", Toast.LENGTH_SHORT).show();
                        buttonClicked.setEnabled(false);
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));
                        button.getBackground().clearColorFilter();
                    }
                    // remember to reset background of button and buttonClicked before
                    buttonClicked = null;
                }
                }else{

                nextQuestion();

         }
            }
     }; 
```

如果需要，这里是buttons.xml：

```
<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true">
        <shape>

            <stroke
                android:width="2dp"
                android:color="#254117"/>

            <corners
                android:radius="4dp"/>

            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp"/>
            <solid android:color="#98800000" />

        </shape>
    </item>
        <item>
        <shape>

            <stroke
                android:width="2dp"
                android:color="#254117"/>

            <corners
                android:radius="4dp"/>

            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp"/>
            <solid android:color="#60000000" />

        </shape>
    </item>
 </selector> 
```

# c# - 使用 Windows RT 流式传输视频？

> ID：15624408
> 
> 赞同：0
> 
> 时间：2013-03-25T20:44:23.460
> 
> 标签：c#, xaml, windows-8, ftp, windows-rt

我正在尝试在适用于 Windows 8 的 C# Windows RT 应用程序中流式传输视频。我想通过 FTP 执行此操作。假设我有一个流向要查看的文件或某种缓冲区打开。

如何将其发送到 Windows 8，以便它可以显示我的视频？

最好的方法是什么？请注意，我不想先下载文件。我想直播。

# git - 第二个帐户/回购推送问题

> ID：15624410
> 
> 赞同：2
> 
> 时间：2013-03-25T20:44:46.913
> 
> 标签：git, github

我对这些东西还很陌生——我有一个专业的 github 公司帐户，该帐户是在过去几个月中首次设置的。最近，我一直在研究一些 Rails 教程。我创建了一个教程存储库并在我的个人帐户下推送，没有任何麻烦。

但是，由于某种原因，在遵循我正在尝试处理的第二个项目的步骤之后，我收到了以下错误消息：

```
ERROR: Permission to <username>/<projectname>.git denied to <businessaccount>.
fatal: The remote end hung up unexpectedly 
```

为什么它试图使用我的企业帐户进行此回购？以及如何让它取而代之的是我的个人帐户信息？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:52:42.797

git 用来向远程服务器进行身份验证的帐户信息可以作为远程 URL 的一部分提及。

```
<USERNAME>@<REMOTE_HOSTNAME>:<REMOTE_REPO_URL> 
```

如果您不提供任何用户名，git 会自动开始使用您当前登录的用户的用户名。

不幸的是，Github 不允许为多个帐户使用同一组 SSH 密钥。因此，您需要为您的个人 github 帐户生成另一组 SSH 密钥（即密钥对）。

1.  为您的个人帐户生成新的 ssh 密钥对

    ```
    ssh-keygen -t rsa -f ~/.ssh/id_rsa.personal -C "Keypair for Personal Github account" 
    ```

2.  将以下行添加到您的`~/.ssh/config`文件中，以使 SSH 在通过以下方式引用主机时使用新的密钥对`personal.github.com`：

    ```
    Host personal.github.com
    User git
    HostName github.com
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/id_rsa.personal 
    ```

3.  对于您计划使用的每个 repo，使用个人 github 帐户，确保`personal.github.com`在 URL 中使用主机名而不是`github.com`. 此外，`git@`用户名部分可以省略，因为我们已经在`~/.ssh/config`. 因此，其中任何一个现在都应该可以工作。

    ```
    git clone personal.github.com:keecham/blacktie.git
    git clone git@personal.github.com:keecham/blacktie.git 
    ```

4.  您的工作 github 帐户和密钥以这种方式保持不变，不应受到影响。

# bing-maps - 关于 Bing Maps API locationCode 字段的说明

> ID：15624411
> 
> 赞同：3
> 
> 时间：2013-03-25T20:44:54.657
> 
> 标签：bing-maps

我正在为我当前的工作项目学习 Bing Maps API。在路线和交通数据输出的各个位置，都有一个字段叫做locationCode（或locationCodes）。该文档没有说明该字段是什么，只是声明：“通常需要订阅才能解释地理区域或国家/地区的这些代码。”

我找不到任何东西来进一步定义或阐明这些订阅服务可以将代码转换成哪些数据。那么，有哪些可用于翻译此代码的服务以及通过这些服务可以获得哪些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-19T23:12:03.720

这些信息与特定道路的交通有关，请参阅 API 的详细信息：

[http://msdn.microsoft.com/en-us/library/hh441726.aspx](http://msdn.microsoft.com/en-us/library/hh441726.aspx)

结果中包含的每个字段的描述：

[http://msdn.microsoft.com/en-us/library/hh441730.aspx](http://msdn.microsoft.com/en-us/library/hh441730.aspx)

您指的是 locationCode。这些与交通消息通道信息相关，其中包含的信息是事件ID、位置代码、预期事件持续时间、受影响程度和其他详细信息。

根据您感兴趣的国家/地区，这些 TMC 以不同的方式进行管理，专业的地图数据提供商可以让您访问这些信息，这就是订阅的目的。它还与您使用 TMC 的方式有关，具体取决于相关区域从那里获取或提供信息。

有关 TMC 的更多信息： [http ://en.wikipedia.org/wiki/Traffic_message_channel](http://en.wikipedia.org/wiki/Traffic_message_channel)

# ios - Apple Mach-O 链接器错误

> ID：15624413
> 
> 赞同：1
> 
> 时间：2013-03-25T20:45:00.063
> 
> 标签：ios, linker, mach-o

我试图在我的项目中添加一个 testunit 目标，但失败了。我的 testunit 需要 libxml2.dylib（实际上是 libxml2.2.dylib），当然还有 sentestingunit.framework。我将 libxml2.dylib 添加到构建设置中的 FRAMEWORK_SEARCH_PATHS $(inherited) "$(SYSTEM_APPS_DIR)/Xcode.app/Contents/Developer/Library/Frameworks"

然后我在构建阶段添加 sentestingunit.framework -> 将二进制文件与库链接。我有我的应用程序（称为 vindfyrar）作为目标依赖项。现在我的测试目标的构建开始尖叫下面的所有东西；有人知道我做错了什么吗？i386? 为什么？

相信我，我已经完成了我的功课，即用谷歌搜索并尝试了构建设置中可能出错的每个选项......没有成功。Lion 10.7.5 上的 XCode 4.6

亲切的问候， Jan Gifvars

> ld /Users/jan/Library/Developer/Xcode/DerivedData/vivasjofart-dvimgeakkxnlwqceslyrhdyifmtf/Build/Products/Debug-iphonesimulator/DavisTest.octest/DavisTest normal i386 cd /Users/jan/utveckling/vivasjofart/vivasjofart setenv IPHONEOS_DEPLOYMENT_TARGET 6.1 setenv PATH " /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin :/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -bundle -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/开发者/SDKs/iPhoneSimulator6.1。sdk -L/Users/jan/Library/Developer/Xcode/DerivedData/vivasjofart-dvimgeakkxnlwqceslyrhdyifmtf/Build/Products/Debug-iphonesimulator -L/Users/jan/utveckling/vivasjofart/vivasjofart -L/Users/jan/utveckling/vivasjofart/ vivasjofart/../../coreplot-examples/DatePlot -L/Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.2/Symbols/usr/lib -L/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS4。 3.sdk/usr/lib -F/Users/jan/Library/Developer/Xcode/DerivedData/vivasjofart-dvimgeakkxnlwqceslyrhdyifmtf/Build/Products/Debug-iphonesimulator -F/Applications/Xcode.app/Contents/Developer/Library/Frameworks -文件列表/Users/jan/Library/Developer/Xcode/DerivedData/vivasjofart-dvimgeakkxnlwqceslyrhdyifmtf/Build/Intermediates/vivasjofart.build/Debug-iphonesimulator/DavisTest.build/Objects-normal/i386/DavisTest。LinkFileList -bundle_loader /Users/jan/Library/Developer/Xcode/DerivedData/vivasjofart-dvimgeakkxnlwqceslyrhdyifmtf/Build/Products/Debug-iphonesimulator/vindfyrar.app/vindfyrar -Xlinker -objc_abi_version -Xlinker 2 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.1 -framework SenTestingKit -framework UIKit -framework Foundation -o /Users/jan/Library/Developer/Xcode/DerivedData/vivasjofart-dvimgeakkxnlwqceslyrhdyifmtf/Build/Products/Debug-iphonesimulator/DavisTest.octest/戴维斯测试1 -framework SenTestingKit -framework UIKit -framework Foundation -o /Users/jan/Library/Developer/Xcode/DerivedData/vivasjofart-dvimgeakkxnlwqceslyrhdyifmtf/Build/Products/Debug-iphonesimulator/DavisTest.octest/DavisTest1 -framework SenTestingKit -framework UIKit -framework Foundation -o /Users/jan/Library/Developer/Xcode/DerivedData/vivasjofart-dvimgeakkxnlwqceslyrhdyifmtf/Build/Products/Debug-iphonesimulator/DavisTest.octest/DavisTest
> 
> ld：警告：忽略文件/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS4.3.sdk/usr/lib/bundle1.o，文件/Developer/Platforms/iPhoneOS.platform/Developer/中缺少所需的架构i386 SDKs/iPhoneOS4.3.sdk/usr/lib/bundle1.o（2片）ld：警告：忽略文件/Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.2/Symbols/usr/lib/libobjc.dylib，缺少必需的文件 /Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.2/Symbols/usr/lib/libobjc.dylib 中的架构 i386（2 片）ld：警告：忽略文件 /Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.2/Symbols /usr/lib/libSystem.dylib，在文件 /Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.2/Symbols/usr/lib/libSystem.dylib（2 片）中缺少所需的体系结构 i386 ld：在'/Developer/Platforms/ iPhoneOS.platform/DeviceSupport/4。2/Symbols/usr/lib/libobjc.A.dylib'，在文件 /Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.2/Symbols/usr/lib/libobjc.A.dylib（2 片）中缺少所需的架构 i386架构 i386 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:40:17.893

我通过添加这些设置和值解决了这个问题。

对于测试主机，它是 $(BUNDLE_LOADER) 对于 Bundle Loader，它是 $(BUILT_PRODUCTS_DIR)/ApplicationName.app/ApplicationProductName

如果您想了解更多详细信息，请登录 apple.developer 并搜索“Test case give Apple Mach-O Linker Error”

感谢大家的时间！

亲切的问候， Jan Gifvars

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:51:37.460

您正在链接 iPhoneOS SDK（其中所有二进制文件都是为架构臂构建的），但您正在构建一个 iPhone 模拟器程序 (i386)。您的项目链接到错误的 SDK。

# linux - 同时运行多个jar实例：内存问题

> ID：15624414
> 
> 赞同：0
> 
> 时间：2013-03-25T20:45:00.380
> 
> 标签：linux, scala, jvm

现在，我在具有 24 个内核和 64G 内存的集群上同时运行多个 jar 实例（用 scala 编写的代码）`Ubuntu 11.04 (GNU/Linux 2.6.38-15-generic x86_64)`，. 我观察到内存使用量过大的问题，这与我运行的实例数量呈超线性关系。更具体地说，这就是我正在做的事情

1.  在 scala 中编写代码并使用 sbt 打包到 jar 中。
2.  登录集群，用于`screen`打开一个新的屏幕会话。
3.  在此屏幕中打开多个窗口。
4.  在每个窗口中，运行`java -cp myjar.jar main.scala.MyClass`

我观察到的是，假设我只运行 7 个实例时，使用了大约 10G 内存，一切都很好。现在我运行 14 个实例。内存很快就被吃光了，64G都被占满了，然后机器急剧变慢，甚至登录都很难。通过监控机器`htop`，我可以看到一次只有几个核心在运行。谁能告诉我我的程序发生了什么以及如何修复它以便我能够有效地使用计算资源？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:06:34.587

为了有效地使用计算资源，您必须启动一个`jar`在一个 JVM 中启动多个线程的系统。如果您启动 14 个相同的实例`jar`，您将运行 14 个独立的 JVM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:50:57.920

*   [使用jps](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jps.html)获取所有 java 进程的 id
*   [使用jmap](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jmap.html)获取权重最大的进程
*   [使用相同的jmap](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jmap.html)获取该进程的堆转储。
*   [使用jhat](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jhat.html)分析堆使用情况
    *   或者，您可以在本地复制转储并使用[Eclipse Memory Analyzer Open Source Project等工具进行探索](http://www.eclipse.org/mat/)

如果在解决了这个问题之后你完全喜欢这些 shell 之类的工具（就像我一样）通过完整的[java 故障排除工具](http://docs.oracle.com/javase/6/docs/technotes/tools/#troubleshoot)列表- 它会为你节省很多时间，这样你就可以早点去酒吧，而不是迟到和调试内存/cpu问题

# android - 如何防止光标转到活动启动android上的editText字段

> ID：15624415
> 
> 赞同：0
> 
> 时间：2013-03-25T20:45:01.757
> 
> 标签：android, xml

我在编辑文本时遇到问题。我禁止键盘在活动开始时弹出，但是如何防止光标位于第一个编辑文本上？我希望光标仅在单击 editText 字段和活动开始时出现。

```
<EditText
            android:id="@+id/stuff"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/stufflabel"
            android:layout_toRightOf="@+id/stuffpic"
            android:hint="@string/name_str"
            android:maxLength="20"
             /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:53:34.020

请在论坛中搜索类似的帖子。

我发现的一篇文章是 - [Android：强制 EditText 移除焦点？](https://stackoverflow.com/questions/5056734/android-force-edittext-to-remove-focus)

我希望你正在寻找类似的东西！

请享用 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-02T16:35:17.057

您可以在 XML 文件的内部布局上添加一个虚拟 EditText，以便焦点将放在该 EditText 上而不是其他 EditText 上。

```
<EditText
    android:layout_width="0dp"
    android:layout_height="0dp" /> 
```

# python - 如何检查列表中的字符串，然后选择该项目的其余部分，

> ID：15624420
> 
> 赞同：1
> 
> 时间：2013-03-25T20:45:17.007
> 
> 标签：python, list

目前我有一个文本文件，里面有游泳的人和他们的时间，比如这个，

```
jack 12
sarah 20
ben 4 
```

现在我希望能够搜索这个说 sarah 并让它返回代码。

这是我目前拥有的。

```
def Timers(swimmer):
  myFile = open("race.txt","r")
  lists = []
  for eachLine in myFile:
      lists += [eachLine.rstrip("\n")] 
```

所以我将它们全部编译到一个列表中，尽管我知道我可以检查列表以查看它们是否存在，尽管我无法弄清楚我将如何选择时间。

在这一点上，我知道我是否可以说，`sarah 12`然后我可以使用 split 然后将其格式化以获取时间。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:49:10.180

你想要一个`dict`，一个python映射，并且只读取*一次*文件：

```
def Timers():
    with open("race.txt","r") as myFile:
        swimmers = {}
        for eachLine in myFile:
            if line.strip():
                swimmer, timer = line.split()
                swimmers[swimmer] = timer
    return swimmers 
```

该`.split()`调用将行拆分为空白，为每行提供一个名称和一个计时器字符串。

现在`Timers()`返回一个映射，其中包含所有游泳者的名字作为键，它们的时间作为值。您可以简单地查找每个游泳者：

```
timers = Timers()
print timers['sarah'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:57:36.967

解决问题的另一种方法：

```
def Timer(swimmer):
    myFile = open("race.txt", "r")
    lists = myFile.readlines()
    found = [l for l in lists if l.startswith(swimmer)][0]  # Gets first found swimmer
    time = found.split()[-1]  # Gets last item (eg. time) in splitted list
    myFile.close()
    return time

print Timer('jack') 
```

即使游泳者同时指定了名字和姓氏，这也有效。我使用与您相同的方式打开文件。但是你真的应该像前面的答案一样使用 with 语句！

# html - 4 div 内联图像，这可能吗？

> ID：15624421
> 
> 赞同：0
> 
> 时间：2013-03-25T20:45:19.760
> 
> 标签：html, inline

所以我对我将如何处理这件事有点困惑？

我正在寻找安排4张图片。2 在顶部内联，一个在这些图像下方，一个在两个垂直位置。

有人可以帮我实现这一点 -[这是一个示例的链接](https://dl.dropbox.com/u/39024241/possiblle.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:01:10.277

假设图像都是 100px 宽，较小的图像是 50px 高，高的图像是 120px 高，宽的图像是 220px 宽，它们之间有 20px 的间距，你会得到这个 HTML：

```
<div id="ImagesOuter">
  <div id="Image1"><img src="..." width="100" height="50" alt="" /></div>
  <div id="Image2"><img src="..." width="100" height="50" alt="" /></div>
  <div id="Image3"><img src="..." width="100" height="120" alt="" /></div>
  <div id="Image4"><img src="..." width="220" height="50" alt="" /></div>
</div> 
```

这个CSS：

```
#ImagesOuter {
  /* Combined Width */
  width: 340px;
  /* Resize according to float content */
  overflow: hidden;
}
/* IE7-8 support for float clear-fix */
*+html #ImagesOuter {
  min-height: 1%;
}

/* Proper rendering */
#ImagesOuter > div > img {
  display: block;
}

#Image1 {
  float: left;
  margin: 0 20px 20px 0;
}

#Image2 {
  float: left;
  margin: 0 20px 20px 0;
}

#Image3 {
  float: right;
}

#Image4 {
  clear: left;
  float: left;
} 
```

一个用简单的灰色框显示这个的小提琴：http: [//jsfiddle.net/mcZRK/](http://jsfiddle.net/mcZRK/)

随意调整尺寸以匹配您想要做的事情。

# c# - C# 烦恼 - 访问 sting 之外的数据

> ID：15624424
> 
> 赞同：2
> 
> 时间：2013-03-25T20:45:26.593
> 
> 标签：c#, visual-studio-2010, if-statement, for-loop, substring

我在 C# 中制作了一个电子邮件验证程序，但是如何检查字符串之外的数据？

这是我的 C# 代码：

```
private bool CheckEmail()
{
    string email1 = email.Text;

    //calculating the length of the email
    int EmailLen = email1.Length;
    int num = 0;

    //the first character of the email must not be the "@"
    if (email1.Substring(0, 1) != "@")
    {
        //checking the email entered after the first character as it is not a "@" so i will start from 1.
        for (int i = 1; i < EmailLen; i++)
        {
            //prevents there from being two "@"next to each other
            if (email1[i] == '@' && (i + 1) < email1.Length && email1[i + 1] != '@')
            {
                //if there is an "@" in the email then num will increase by one
                num = num + 1;

                //now the stored value of i is the position where the "@" is placed. j will be i+2 as there should be at least one character after the "@"
                int j = i + 2;
                if (j < EmailLen)
                {
                    for (int k = j; k < EmailLen; k++)
                    {
                        //when it finds a "." In the email, the character after the "." Should not be empty or have a space, e.g. it should be something like ".com"

                        if (email1[k] == '.' && k + 1 < email1.Length && email1[k + 1] != ' ')
                        {
                            num = num + 1;
                        }
                    }
                }
                else
                {
                    break;
                }
            }
        }
    }
    else
    {
        num = 0;
    }

    //if the num is 2, then the email is valid, otherwise it is invalid.  If the email had more than one "@" for example, the num will be greater than 2.

    if (num == 2)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

当我尝试输入“aa@”时，我收到此错误：“索引和长度必须引用字符串中的位置。”</p>

![在此处输入图像描述](../Images/38a24ee5d76832f97ce5fe8bac9b8c5f.png)

当我输入 aa@a 时。，我收到此错误：“索引和长度必须引用字符串中的位置。”</p>

![在此处输入图像描述](../Images/aa6e3c9cf75375559d68394cb18f88e7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:50:53.670

您不能访问字符串之外的数据。这是有充分理由的——这样做会违反类型安全性，而类型安全性是 .NET CLR 等虚拟机的主要吸引力。

您只想检查您的界限以确保您没有*尝试*访问不存在的字符串的一部分。顺便说一句，对于检查单个字符，您完全想要做`email1[i]`, not `email1.Substring(i, 1)`，所以您没有在左、右和中心构造新的字符串对象。

您的第一个测试应该是：

```
if (email1[i] == '@' && i + 1 < email1.Length && email1[i + 1] != '@') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:50:58.733

你的问题是

```
email1.Substring(i + 1, 1) 
```

在 for 循环的最后一次迭代中，i == EmailLen -1。

所以 i + 1 == EmailLen，它是字符串末尾的一个。

# android - 带有 XTend 的 Android ActivityMontior

> ID：15624425
> 
> 赞同：0
> 
> 时间：2013-03-25T20:45:33.193
> 
> 标签：android, xtend

我正在尝试使用 Xtend 编写一个 Android 应用程序，但是，我或多或少都是新手。我已经用 Java 创建了几个 Android 示例，但我仍在学习。

在这些应用程序中，我使用`android.app.Instrumentation.ActivityMonitor` 来检查 Activity 是否已启动。我读过 Xtend 不支持嵌套类

> 没有 var args，没有嵌套类，没有匿名类？文档中没有提到这些语言功能，我猜不出一个有效的语法。>我认为它们不可用，但我可能是错的。 [http://blogs.atlassian.com/2011/11/xtend-first-impressions/](http://blogs.atlassian.com/2011/11/xtend-first-impressions/)

这是否意味着在使用 Xtend 时无法访问 ActivityMonitor 或者我只是做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:13:57.320

这取决于您如何使用 ActivityMonitor。您现在不能自己定义内部类，但可以从 Xtend 中访问静态内部类。非静态内部类存在问题。但是，语法与 Java 不同。而不是“。” 点作为声明类和内部类的分隔符，Xtend 使用'$'。相应的进口声明可以减轻痛苦，例如`import android.app.Instrumentation$ActivityMonitor`。

# jakarta-mail - 如果 java 邮件 api 连接侦听器中的 Internet 出现故障，则不会调用断开方法

> ID：15624428
> 
> 赞同：1
> 
> 时间：2013-03-25T20:45:44.857
> 
> 标签：jakarta-mail

我在 Store 对象上的 java 邮件中面临 ConnectionListener 实现的问题。如果我断开互联网连接，我的断开方法和关闭方法不会被调用。我的代码片段是：

```
this.store.addConnectionListener(new ConnectionListenerImplmentedClass);  
this.store.connect(HOST, USER_NAME, PASSWORD); 
```

* * *

```
 public void opened(ConnectionEvent e) {
    LOGGER.info("Connection opened...");
}

public void disconnect(ConnectionEvent e) {
    LOGGER.info("Connection opened...");
}

public void close(ConnectionEvent e) {
    LOGGER.info("Connection opened...");
} 
```

请建议我在哪里做错了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:30:54.253

这取决于您的操作系统，如果您“断开”互联网连接，何时以及是否会收到通知。通常，只有在您实际执行使用连接的操作时才会通知您。如果您的程序只是坐着等待事件，您可能永远不会收到通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:35:31.800

按照比尔香农所说的，听起来您需要执行定期检查以查看连接是否仍然存在。Javadocs 建议覆盖 Service.isConnected() 方法，以验证与消息存储的任何连接是否仍然有效。

[http://docs.oracle.com/javaee/6/api/javax/mail/Service.html#isConnected()](http://docs.oracle.com/javaee/6/api/javax/mail/Service.html#isConnected%28%29)

**已连接**

public boolean isConnected() 此服务当前是否已连接？此实现使用私有布尔字段来存储连接状态。此方法返回该字段的值。

子类可能希望重写此方法以验证与消息存储的任何连接是否仍然有效。

返回：如果服务已连接，则返回 true，如果未连接，则返回 false

# arduino - 如何为警卫编写自定义通知程序？

> ID：15624429
> 
> 赞同：1
> 
> 时间：2013-03-25T20:45:46.443
> 
> 标签：arduino, guard

我正在尝试编写一个自定义通知程序，用于使用 arduino 打开 LED的[守卫。](https://github.com/guard/guard/)

无论如何，我已经通过将文件添加到[`lib/guard/notifiers`](https://github.com/guard/guard/tree/master/lib/guard/notifiers)，并将我的新自定义类添加到`Guard::Notifier::NOTIFIERS`in来实现它[`lib/guard/notifier.rb`](https://github.com/guard/guard/blob/master/lib/guard/notifier.rb#L57)。

但是，我认为我的新通知程序不应该是保护 gem 的一部分，所以我想创建一个 gem。我找不到任何自定义通知程序 gem 的示例，而且我很难弄清楚如何将自定义通知程序添加到警卫中。

[这是我最初的尝试](https://github.com/amiel/guard-digirgb)，[它将我的自定义类添加到`Guard::Notifier::NOTIFIERS`运算`<<`符](https://github.com/amiel/guard-digirgb/blob/master/lib/guard-digirgb.rb#L52)中。它不起作用，因为为 rspec 重新加载了警卫（我猜是在一个单独的过程中）。如果需要，我可以提供有关我的调试的更多信息。

我的问题是：使用自定义通知器作为单独的 gem 扩展保护的最佳方法是什么？

以及后续：这是可以添加到守卫的功能吗？

我通常会在这个问题中添加一个 github 问题（嘿，我可以帮助使它变得更好吗？），但是 CONTRIBUTING 文档说在这里问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:52:44.210

确实，Guard 核心团队不想对问题跟踪器中 Guard 的使用有任何疑问，仅仅是因为这对我们来说非常耗时，而且人们常常只是懒得阅读优秀的 README。在 StackOverflow 上提问使用户更有可能自助，从而腾出时间来开发 Guard，而不是提供免费支持。对于与开发相关的问题，我们会将人们引导至我们的[Google 群组](https://groups.google.com/forum/?fromgroups#!forum/guard-dev)，所有核心成员都在其中阅读消息，并且您可能会在几个小时内得到有效的答案。

我不介意合并一个异国通知者的拉取请求，因为它们几乎没有成本。将来我们也很有可能将该模块提取到它自己的 gem 中，以便其他人可以重用通知器功能，就像我们为[Listen](https://github.com/guard/listen)所做的那样。

最后解决您的问题：您是对的，guard-rspec 通知程序在子进程中运行，这就是为什么我们[有这个丑陋的黑客来共享](https://github.com/guard/guard/blob/master/lib/guard/notifier.rb#L76-L92)通知设置而您的通知程序不起作用。它不起作用的原因是 Guard 是在没有插件的情况下加载的，因为[它只需要`-r`选项](https://github.com/guard/guard-rspec/blob/master/lib/guard/rspec/runner.rb#L82-L91)提供的文件。这意味着您只有以下可能使您的通知程序与 rspec 一起工作：

*   `cli`在选项中加载您的通知`-r`程序，但您需要将绝对路径传递给您的文件，可能使用辅助方法（简单）。
*   扩展 Guard::Notifier 以在任何 Guard 插件中搜索通知程序类（成本高）。
*   Monkey 修补[rspec_arguments](https://github.com/guard/guard-rspec/blob/master/lib/guard/rspec/runner.rb#L81)方法以包含您的通知程序（不推荐）。

# c# - 延迟加载 EntityFramework 5（使用 CodeFirst）

> ID：15624437
> 
> 赞同：2
> 
> 时间：2013-03-25T20:46:13.063
> 
> 标签：c#, entity-framework

我正在 C# 控制台应用程序中测试延迟加载。由于某种原因，延迟加载不起作用。

我已经检查了 context.Configuration 的`LazyLoadingEnabled`和`ProxyCreationEnabled`属性。他们是真的。

我的财产是*虚拟*的。

我已经检查了其他类似的 SO 问题，但没有成功。我不确定会发生什么。

这是我的代码（简化为不显示命名空间）：

```
static void Main(string[] args) {

    Models.DataContext dc = new Models.DataContext();

    Console.WriteLine("Context Lazy {0}. Proxy Creation {1} ", 
                       dc.Configuration.LazyLoadingEnabled,
                       dc.Configuration.ProxyCreationEnabled);

    var grp = dc.Groups.FirstOrDefault();     
    Console.WriteLine("GroupId {1}, AttrSet is null = {0}", 
                       grp.AttrSet == null , grp.Id); 

    var grp2 = dc.Groups.Include("AttrSet").FirstOrDefault();
    Console.WriteLine("GroupId {1}, AttrSet is null = {0}", 
                              grp2.AttrSet == null, grp2.Id); 
}

class Group  {
    public System.Guid Id { get; set; }
    public string Name { get; set; }
    public virtual AttrSet AttrSet { get; set; }
 }

class AttrSet {
    public System.Guid Id { get; set; }
    public string Name { get; set; }
} 
```

运行它的输出是：

> 上下文懒惰真。代理创建 True
> 
> GroupId 186ebc8a-dec7-4302-9f84-5a575577baac，AttrSet 为 null = True
> 
> GroupId 186ebc8a-dec7-4302-9f84-5a575577baac，AttrSet 为 null = False

我确信加载的记录是正确的，并且它`AttrSet`在数据库中有正确的。

有任何想法吗？

**更新**

我创建了一个*非常*简单的测试项目，以防有人真正想查看代码。

请参阅：[https](https://bitbucket.org/josea/eflazy) ://bitbucket.org/josea/eflazy （GIT：[https://josea@bitbucket.org/josea/eflazy.git](https://josea@bitbucket.org/josea/eflazy.git)）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:42:23.567

代理生成没有发生。为什么？？因为您的 POCO 是私人的！EF 看不到它们以从中派生代理。公开您的 POCO，它会按您期望的方式工作。

```
public class Group 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:54:41.133

您是否使用任何东西来配置 2 个类之间的 1:1 关系？因为它看起来不像你在这里，这会导致实体框架无法加载关系。

您可以使用数据注释来定义 FK 关系，如下所示：

```
public class AttrSet {

  public System.Guid Id { get; set; }
  public string Name { get; set; }

  [Required, ForeignKey("MyGroup")]
  public int GroupID { get; set; }

  public virtual Group MyGroup { get; set; } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:10:00.647

这应该给你你想要的关系。AttrSetId 是您在表中为 FK 列命名的任何名称，因此如果它不同，请更改它。

```
public class Group  {

         public System.Guid Id { get; set; }
         public string Name { get; set; }
         public System.Guid AttrSetId {get;set;}         

         [ForeignKey("AttrSetId")]
         public virtual AttrSet AttrSet { get; set; }
 } 
```

**编辑：**

将此行添加到您的 AttrSet 类：

```
public virtual ICollection<Group> Groups {get;set;} 
```

将下一行添加到您`OnModelCreating`的`Models.DataContext`. 如果由于某种原因您还没有重写该函数，它将如下所示：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    base.OnModelCreating(modelBuilder);
    modelBuilder.Entity<Group>().HasOptional(x => x.AttrSet).WithMany(x => x.Groups);
} 
```

我把`HasOptional`而不是`HasRequired`像我假设的那样，你可以在没有 AttrSet 的情况下保存一个组。如果不是这样，并且 FK 不可为空，那么您应该使用 HasRequired。

# facebook-graph-api - 我真的需要注册一个应用程序才能在我的网站上显示一个简单的“朋友”列表吗？

> ID：15624438
> 
> 赞同：1
> 
> 时间：2013-03-25T20:46:24.843
> 
> 标签：facebook-graph-api

我想使用 Facebook (Graph) API 来显示 Facebook 帐户（我拥有）的朋友的姓名和图片列表。我真的需要为此注册我的网站作为应用程序吗？因为我真的不认为我的网站是一个应用程序......或者我可以以某种方式获得一个不会过期的访问令牌，因为我可以自己授予访问这个朋友列表的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:17:13.263

将 Facebook 上的应用程序视为 API 密钥。您的应用程序是 Facebook 识别呼叫者、您拥有哪些权限以及您是否在滥用系统的方式。

不，如果没有有效的 Facebook 应用程序，您将无法访问大多数 Graph API 数据。

# android - 库 Android 的头文件

> ID：15624445
> 
> 赞同：1
> 
> 时间：2013-03-25T20:47:01.960
> 
> 标签：android, linux, header, shared

我在我的设备的 Android 中找到了共享库（.so）。我想使用它的导出功能。但是我怎么理解，我需要这个库的头文件。我在哪里可以找到它在设备上？什么目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:54:52.000

很可能标头在设备上不可用。

因为它们只需要链接到库而不是正常运行程序，它们不包含在设备上的系统映像中。

如果您要查找的标头包含在 NDK 随附的标头中，您可能需要查看这些标头。（见：http: [//developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)）

如果不是，它不是谷歌希望您使用的库的一部分，因为它不被认为属于谷歌打算保持稳定的库集。

不过，在这种情况下，您将能够从属于您设备上运行的 android 版本的源中获取所需的标头。（见： http: [//source.android.com/](http://source.android.com/)）

在下一次系统升级之后，这些库可能不再可用，但这尤其是关于**不**包括头文件和库的要点。

仅保证 NDK 中包含的库可用。

# c# - 用于导入 HttpResponseException 的扩展方法和类库

> ID：15624448
> 
> 赞同：1
> 
> 时间：2013-03-25T20:47:10.733
> 
> 标签：c#, exception, httpresponse, class-library

我有这个扩展方法，可以检查请求 cookie 中的一些信息，如果我要查找的信息不在 cookie 中，我会转到数据库。

这一切都很好，但是当我构建这个扩展时，我在我的 MVC4 应用程序中设计了它，现在我正在将项目重构为相关库，我似乎无法找到一种方法来导入或添加对我的类库的引用，这将允许我抛出一个 HttpResponseException。

关于如何克服这个问题的任何想法？

```
 namespace LinkedIn.Extensions
{
    public static class httprequest_linkedincontext
    {
        /// <summary>
        /// Extension that creates a OAuthLinkedIn object by checking the cookie first, and if the cookie has no LinkedIn info or has expried then builds the LinkedIn OAuthLinkedIn from the database.
        /// </summary>
        /// <param name="request"></param>
        /// <param name="userName"></param>
        /// <returns>oAuthLinkedIn information</returns>
        public static oAuthLinkedIn GetLinkedInContext(this HttpRequestMessage request, string userName)
        {
            OAuthHelper helper = new OAuthHelper(request, userName, false);
            oAuthLinkedIn oauth = new oAuthLinkedIn(helper.Verify, helper.Token, helper.TokenSecret);

            if (string.IsNullOrEmpty(oauth.Token) || string.IsNullOrEmpty(oauth.TokenSecret))
            {
                throw new System.Web.Http.HttpResponseException(new HttpResponseMessage(System.Net.HttpStatusCode.NotFound));
            }
            return oauth;
        }
    }
} 
```

现在 System.Web.Http.HttpResponseException 中的 Http 下面有一条红色的小波浪线。

# android - 什么版本的 ADT 与 Android SDK 捆绑在一起？

> ID：15624449
> 
> 赞同：2
> 
> 时间：2013-03-25T20:47:15.857
> 
> 标签：android, eclipse, sdk, version

与 Android SDK 捆绑的 Eclipse 版本是什么？3.8 还是 4.2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:49:10.513

无，因为可以通过 Eclipse 包管理器中的 HTTP URL 下载 ADT 插件。

编辑

如果您想知道在线提供的最新版本，只需阅读以下内容

[https://dl-ssl.google.com/android/eclipse/site.xml](https://dl-ssl.google.com/android/eclipse/site.xml)

如果您想知道给定 ADT 插件的版本号，它只不过是一个 jar 文件，请使用存档应用程序打开它并读取`feature.xml`文件的内容。

# sql-server - 精简批处理文件调用sql文件

> ID：15624452
> 
> 赞同：0
> 
> 时间：2013-03-25T20:47:35.643
> 
> 标签：sql-server, batch-file, sqlcmd

我们目前有一个调度程序来运行审计。这个调度器会调用一个带参数的批处理文件，批处理文件调用一个sql脚本（基于参数），然后调用一个存储的proc。

对于每个运行的审计，一个单独的批处理文件和 sql 文件。最好的情况是我想将以下两个文件合并为一个可用于每次新审计的文件。在最坏的情况下，我至少希望为每次审计合并获取 1 个文件，而不是两个。希望大家能帮忙？

批处理文件

```
@echo on
Echo Running SQL Command File for '%1' Data Audit Check

del "D:\Internal_Reports\%1\%1.txt"

sqlcmd -S localhost -d database -i "D:\DataAudit\%1.sql"  -s "," > D:\Temp\%1.csv -I -W -k 1

if %ERRORLEVEL% GTR 0 COPY "D:\Temp\%1.csv" "D:\Internal_Reports\%1\%1.txt"

if %ERRORLEVEL% NEQ 0 goto Error_1
echo No Errors
goto end

:Error_1
if %ERRORLEVEL% NEQ 1 goto Error_2
echo No Errors
goto end

:Error_2
echo Errorlevel %ERRORLEVEL% 
set FileName=%1%2
echo Filename %FileName%
echo %ERRORLEVEL% > D:\ErrorLevel\%FileName%
EXIT /B %ERRORLEVEL%
:end 
```

SQL 文件

```
set NoCount on
DECLARE
@createdBy varchar(16),

@dataAuditBatchId int, 

@createdDtTm datetime

select 
@createdBy = 'AutomatedAudit'
exec CreateNewDataAuditBatch @createdBy, @dataAuditBatchId output

-- Content Scripts
exec specificAuditStoredProc @createdBy, @dataAuditBatchId
select * from vAuditErrors where JobName in ('specificAuditStoredProc')
:exit(select Case When Counter = 0 then 0 Else 1 End 'errorCode'
from (select CAST(Count(*) AS varchar(4)) AS Counter from vAuditErrors 
    where JobName in ('specificAuditStoredProc'))
CountTable
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:20:03.540

在这种情况下，您最好的选择是 PowerShell。您可以将批处理脚本和对 SQL 的直接访问结合起来。

将以下代码复制到文本文件中： Audit.ps1

创建一个名为：AuditFile.txt 的文件，将您的 SpecificAuditProc 名称放在每一行上。

然后在您的批处理调度程序中运行：“powershell -command”& c:\Audit.ps1 -name 'ProcName'”

这是代码[未经测试]：

```
 param([Parameter(Mandatory=$true)][String]$name="")

$createdBy = "AutomatedAudit"

$SqlConnection = New-Object System.Data.SqlClient.SqlConnection
$SqlConnection.ConnectionString = "Server=LOCALHOST;Database=HT;Integrated     Security=True"
$SqlConnection.Open()  

$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.Connection = $SqlConnection
$SqlCmd.CommandText = "[CreateNewDataAuditBatch]"
$SqlCmd.CommandType = [System.Data.CommandType]::StoredProcedure
$SqlCmd.Parameters.Add("@createdBy", $creadtedBy)
$SqlCmd.Parameters.Add("@dataAuditBatchId ")
$SqlCmd.Parameters["@dataAuditBatchId"].Direction = [system.Data.ParameterDirection]::Output
$SqlCmd.ExecuteNonQuery()
$dataAuditBatchId = $Command.Parameters["@dataAuditBatchId"].value
$SqlCmd.Dispose() 

$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.Connection = $SqlConnection
$SqlCmd.CommandText = "[$name]"
$SqlCmd.CommandType = [System.Data.CommandType]::StoredProcedure
$SqlCmd.Parameters.Add("@createdBy", $creadtedBy)
$SqlCmd.Parameters.Add("@dataAuditBatchId ", $dataAuditBatchId)
$SqlCmd.ExecuteNonQuery()
$SqlCmd.Dispose() 

$sqlcheck = @(Invoke-Sqlcmd -Query "select * from vAuditErrors where JobName in ('$name')" -ServerInstance "LOCALHOST\HT")
if ($sqlcheck.Count -ne 0) {
$sqlcheck > D:\Internal_Reports\$name\$name.txt
$sqlcheck.Count >> D:\ErrorLevel\$name
}

$Connection.Close()
$Connection.Dispose() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:09:15.773

这是一个在纯批处理中解决的简单问题，***提供***您澄清几点。

1.  这里的“%1”是什么？可能是数据库名称？
2.  您是否只有一个`SQL file`，如果没有，您发布的示例中的哪些元素需要针对不同的数据库进行替换？

（对不起 - 这本身并不是一个真正的**答案**，但我会在你发布的 btch 上发表一些（我希望，有用的）评论。SO`comment`设施真的不适合这里......

```
@echo on
Echo Running SQL Command File for '%1' Data Audit Check

del "D:\Internal_Reports\%1\%1.txt"

sqlcmd -S localhost -d database -i "D:\DataAudit\%1.sql"  -s "," > D:\Temp\%1.csv -I -W -k 1 
```

好的：所以很可能，`%1`id 是数据库名称。那么-为什么`-d database`而不是`-d %1`？

为什么`> D:\...`而不是 '-o D:...` ??

```
if %ERRORLEVEL% GTR 0 COPY "D:\Temp\%1.csv" "D:\Internal_Reports\%1\%1.txt" 
```

确认！失败到失败的场景在其所有荣耀中！最常见的是，您会从`sqlcmd` **BUT** `COPY`中获得 ERRORLEVEL 0，但可以更改 ERRORLEVEL。如果`COPY`成功，则 ERRORLEVEL 将为 0，但如果`COPY`失败，则为`ERRORLEVEL`非零，这就是以下步骤将使用的值...

```
if %ERRORLEVEL% NEQ 0 goto Error_1
echo No Errors
goto end

:Error_1
if %ERRORLEVEL% NEQ 1 goto Error_2
echo No Errors
goto end 
```

你可以`:error_2`通过简单地执行

```
if errorlevel 2 goto error2 
```

执行后直接`SQLCMD`（表示“如果错误级别为 2**或更大**”）

```
:Error_2
echo Errorlevel %ERRORLEVEL% 
set FileName=%1%2
echo Filename %FileName%
echo %ERRORLEVEL% > D:\ErrorLevel\%FileName%
EXIT /B %ERRORLEVEL%
:end 
```

突然`%2`出现了一个无法解释的...？

# wordpress - 列出类别页面上的自定义帖子类型，按其子类别划分

> ID：15624453
> 
> 赞同：2
> 
> 时间：2013-03-25T20:47:39.657
> 
> 标签：wordpress, wordpress-theming

在 Wordpress 中，如何在类别页面上列出自定义帖子类型，除以帖子所在的子类别？

我的例子：我有自定义分类广告。我还有一个名为广告的自定义帖子类型。

类别结构：

*   页脚
*   侧边栏
*   赞助商页面
    *   金子
    *   银
    *   青铜

如果我访问 myurl.com/sponsors-page/，它将显示金、银和铜类别中的所有广告。到目前为止，一切都很好。但我希望它按子类别的顺序显示它们并回显子类别名称。例如：

*   金子
    *   广告 1
    *   广告 2
*   银
    *   广告 3
    *   广告 4
*   青铜
    *   广告 5
    *   广告 6

我该如何做到这一点？随意质疑我的方法，我是 Wordpress 的新手。

我觉得这可能是重复的，但是当我说我试图搜索时请相信我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:05:22.763

我也刚开始使用 Wordpress，但这就是我认为您想要做的。

```
// get available taxonomies
$taxonomies = get_object_taxonomies ( (object) array ('post_type' => 'subcategory' ));

// loop all taxonomies
foreach( $taxonomies as $taxonomy ) { 

    // Gets every "category" (term) in this taxonomy to get the respective posts
    $terms = get_terms( $taxonomy );

    // loop through the terms
    foreach( $terms AS $term ) {
        // get posts
        $posts = new WP_Query( "taxonomy=$taxonomy&term=$term->slug" );

        // check for posts
        if ( $posts-> have_posts() ) {
            // how your header (gold,silver,bronze)
            echo '<h2>' . $term-> name . '</h2>';               

            // loop through posts
            while ( $posts-> have_posts() ) {
                // get the post
                $posts-> the_post();

                // show your ad
                echo $posts-> post-> post_content;

                // Update temporary value
                $posts_count++;
            }
        }
    }
} 
```

# python - 从文件名添加列作为日期

> ID：15624457
> 
> 赞同：-1
> 
> 时间：2013-03-25T20:47:49.723
> 
> 标签：python

我是 python 新手，没有以前的编程背景。但是，我打算参加我大学提供的 Python 编程课程。这个秋天。我有一个小项目要完成，但我需要处理超过 5 GB 的小文本文件（每个是 50 kb）。

我有很多文件名为 20130325rand.dat 的文件。该文件有 3 行标题（我需要删除）。我需要创建一个列并将该列中文件名的前 8 个字符添加为日期（mm/dd/yyyy）。

此外，我需要计算文件中每 12 行变量的平均值（每 5 分钟测量一次读数，需要计算每小时平均值）。我知道这是很多工作，但我将非常感谢任何建议、指导和帮助。谢谢。

截屏：

![截屏](../Images/167427408f58f26ae932fe0ba8675a60.png).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:04:16.727

一些指示：

将文本文件读入行列表：

```
with open('20130325rand.dat') as df:
    lines = df.readlines() 
```

这将为您提供行列表，例如

```
In [17]: lines
Out[17]: ['# header 1', '# header 2', '# header 3', 'line 0', 'line 1', 'line 2', 'line 3', 'line 4', 'line 5', 'line 6', 'line 7', 'line 8', 'line 9', 'line 10', 'line 11', 'line 12', 'line 13', 'line 14', 'line 15', 'line 16', 'line 17', 'line 18', 'line 19', 'line 20', 'line 21', 'line 22', 'line 23', 'line 24'] 
```

要跳过前三行，然后每隔 12 行获取一次：

```
In [18]: lines[3::12]
Out[18]: ['line 0', 'line 12', 'line 24'] 
```

这称为[切片](http://techearth.net/python/index.php5?title=Python%3aBasics%3aSlices)。您可以对文本执行相同的操作：

```
In [19]: '20130325rand.dat'[:8]
Out[19]: '20130325' 
```

python的[在线文档](http://docs.python.org/2/index.html)包含一个[教程](http://docs.python.org/2/tutorial/)。但互联网上也有许多其他可用的。

欢迎使用 Python，祝你好运！

# visual-studio-2010 - 在 Visual Studio 2010 的批处理构建中限制配置和平台组合

> ID：15624463
> 
> 赞同：3
> 
> 时间：2013-03-25T20:48:14.977
> 
> 标签：visual-studio-2010

在 Visual Studio 2010 中，您可以为您的解决方案和项目构建设置配置（发布或调试）和平台（win32 或 x64）。

我想限制构建配置组合，以便用户只有有限的批量构建选项：

最终我希望批量构建看起来像这样：配置平台解决方案配置

*   调试|win32
*   发布|win32
*   真实|x64

代替

*   调试|win32
*   调试|x64
*   发布|win32
*   发布|x64

我正在为 Visual Studio 创建一个向导，这就是为什么我要执行这些限制，以便 uesr 不会意外创建一个对我们正在创建的特定程序不起作用的调试 win64。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T12:35:45.340

转到**配置管理器**。在**Configuration Manager**对话框中，将**Active Solution Configuration 设置**为**Release**。然后对于对话框中列出的每个项目，单击其**平台**并选择**编辑**，然后删除您不想要的任何内容，例如`win32`.

# servicestack - 为命名连接配置 ConnectionFilter

> ID：15624464
> 
> 赞同：3
> 
> 时间：2013-03-25T20:48:19.307
> 
> 标签：servicestack, ormlite-servicestack

鉴于文档中的以下 OrmLite 配置，为每个命名连接配置 ConnectionFilter 的最佳方法是什么？

```
var dbFactory = new OrmLiteConnectionFactory(
    "Data Source=host;Initial Catalog=RobotsMaster;Integrated Security=SSPI",  //Connection String
    SqlServerDialect.Provider);

dbFactory.Run(db => db.CreateTable<MasterRecord>(overwrite:false));

NoOfShards.Times(i => {
    var namedShard = "robots-shard" + i;
    dbFactory.RegisterConnection(namedShard, 
        "~/App_Data/{0}.sqlite".Fmt(shardId).MapAbsolutePath(),                //Connection String
        SqliteDialect.Provider);

    dbFactory.OpenDbConnection(namedShard).Run(db => db.CreateTable<Robot>(overwrite:false));
}); 
```

目前，我正在使用它而不是 RegisterConnection。

```
 OrmLiteConnectionFactory.NamedConnections[namedShard] = new OrmLiteConnectionFactory("~/App_Data/{0}.sqlite".Fmt(shardId).MapAbsolutePath(), true, SqliteDialect.Provider, true) {
        ConnectionFilter = x => new ProfiledDbConnection(x, Profiler.Current)
    }; 
```

我们可以将 RegisterConnection 更改为类似

```
 public void RegisterConnection(string connectionKey, string connectionString, IOrmLiteDialectProvider dialectProvider, bool autoDisposeConnection = true)
    {
        RegisterConnection(connectionKey, new OrmLiteConnectionFactory(connectionString, autoDisposeConnection, dialectProvider, autoDisposeConnection));
    }

    public void RegisterConnection(string connectionKey, OrmLiteConnectionFactory ormLiteConnectionFactory)
    {
        NamedConnections[connectionKey] = ormLiteConnectionFactory;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T16:55:52.017

向 ServiceStack.OrmLite 提交了一个补丁。[https://github.com/ServiceStack/ServiceStack.OrmLite/pull/212](https://github.com/ServiceStack/ServiceStack.OrmLite/pull/212)

# wpf - WPF中带有网格的Treeview

> ID：15624465
> 
> 赞同：1
> 
> 时间：2013-03-25T20:48:23.337
> 
> 标签：wpf, xaml, mvvm

我想在深度为 1 级的树视图中显示数据库的简单模式。所以我有一个表的集合，我想将其名称显示为元素的标题，并且对于每个表都有一个包含名称、类型等的列的集合。

但是，在每个表中，我想在网格中显示这些列定义，标题指定列定义的属性，并且在每一行中，定义本身。

完成这项工作的一种方法是将其视为一个树视图，其中**每个表**都有一个**子****序列**（列定义的整个集合），然后显示为网格：

 **```
<TreeView  ItemsSource="{Binding Tables}" x:Name="treeView"  MinWidth="400" >
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Path=ListofONEelement}">
        <TextBlock Text="{Binding Path=TableName}" />
        <HierarchicalDataTemplate.ItemTemplate>
            <DataTemplate>
            <ListView ItemsSource="{Binding GroupOfColumnDefinition}">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="ColumnName"   DisplayMemberBinding="{Binding Path=Item1}" />
                        <GridViewColumn Header="Model"        DisplayMemberBinding="{Binding Path=Item2.Model}" />
                        <GridViewColumn Header="ColumnStatus" DisplayMemberBinding="{Binding Path=Item2.ColumnStatus}" />
                        <GridViewColumn Header="ColumnType"   DisplayMemberBinding="{Binding Path=Item2.ColumnType}" />
                    </GridView>
                </ListView.View>
            </ListView>
            </DataTemplate>
        </HierarchicalDataTemplate.ItemTemplate>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

但是我必须创建这个中间结构 `ListofONEelement`才能使其工作，因为树视图中的层次结构仅在有要枚举的项目时才存在。

是否有其他更好的方法可以**直接在 XAML**中执行此操作，而无需在我的 ViewModel 中创建自定义类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:35:07.263

实际上将一项放在 TreeView 中。不要使用 HierarchicalDataTemplate。

```
<TreeView ItemsSource="{Binding Tables}">
    <TreeView.ItemTemplate>
        <DataTemplate>
            <TreeViewItem Header="{Binding TableName}">
                <ListView ItemsSource="{Binding GroupOfColumnDefinition}">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="ColumnName"   DisplayMemberBinding="{Binding Path=Item1}" />
                            <GridViewColumn Header="Model"        DisplayMemberBinding="{Binding Path=Item2.Model}" />
                            <GridViewColumn Header="ColumnStatus" DisplayMemberBinding="{Binding Path=Item2.ColumnStatus}" />
                            <GridViewColumn Header="ColumnType"   DisplayMemberBinding="{Binding Path=Item2.ColumnType}" />
                        </GridView>
                    </ListView.View>
                </ListView>
            </TreeViewItem>
        </DataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```**

# c# - 在回发 ASP.net 上保持滚动位置不起作用

> ID：15624470
> 
> 赞同：0
> 
> 时间：2013-03-25T20:48:50.583
> 
> 标签：c#, javascript, asp.net, visual-studio-2010

我使用带有 ac# 多行文本框的 Ajax 更新面板，该面板在计时器上更新，但它一直滚动到顶部，我尝试将maintainginscrollpositiononpostback 设置为 true，还尝试了各种 javascript。我使用的浏览器是IE。

这是我在表单上带有 ac# 文本框的 asp 代码。

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>

            <asp:TextBox ID="TextBox1" runat="server" AutoPostBack="True" Height="390px" TextMode="MultiLine" Width="836px"></asp:TextBox>

        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
        </Triggers>
    </asp:UpdatePanel> 
```

我对更新面板很陌生，所以那里可能有问题，谢谢\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:54:59.313

请阅读这篇文章。我想它会帮助你

[异步回发后保持滚动位置](http://weblogs.asp.net/andrewfrederick/archive/2008/03/04/maintain-scroll-position-after-asynchronous-postback.aspx)

# wpf - 在基于 Atom 的 Windows 8 平板电脑上具有 SQLLocalDB 性能的 .NET 应用程序

> ID：15624472
> 
> 赞同：1
> 
> 时间：2013-03-25T20:48:55.630
> 
> 标签：wpf, windows-8

客户有兴趣为其销售人员在平板电脑上运行小型数据收集/报价计算应用程序。

有没有人在使用 Intel Atom 处理器的 Windows 8 平板电脑上使用 SQL LocalDB 运行 .NET WPF 应用程序的经验？

在我们开始沿着这条轨道前进之前，我们是否需要注意任何性能问题？

谢谢加文

# mongodb - Spring Data MongoDB - 聚合框架集成

> ID：15624473
> 
> 赞同：8
> 
> 时间：2013-03-25T20:48:57.557
> 
> 标签：mongodb, spring-data, aggregation-framework

我开始`MongoDB`在我的应用程序中使用数据库，对于数据访问，我选择了 Spring Data for MongoDB。

我浏览了 API 参考和文档，可以看到有 map-reduce 集成，但是聚合框架呢？我可以看到它支持按操作分组，这表明它支持`$group`从这个判断的运算符：http: [//docs.mongodb.org/manual/reference/sql-aggregation-comparison/](http://docs.mongodb.org/manual/reference/sql-aggregation-comparison/)，但是其他运算符呢？暂时不支持？

我问这个问题是因为我想知道与`MongoDB`Sping Data 提供了什么样的集成，所以我知道会发生什么，可以这么说。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-08T12:05:47.990

Spring Data 1.3.0.RC1 可用，它支持聚合框架。

例如：shell 聚合命令：

```
db.eft_transactions.aggregate(
    {$match:
        {
            service:"EFT",
            source:"MARKUP",
        }
    },
    {$group:
        {
            _id:"$card_acceptor_id",
            tran_count:{$sum:1},
            amount_sum:{$sum:"$amount"}
        }
    }
) 
```

从 java 运行是这样的：

```
 AggregationOperation match = Aggregation.match(Criteria.where("service").is("EFT").and("source").is("MARKUP"));
    AggregationOperation group = Aggregation.group("card_acceptor").and("amount_sum").sum("amount").and("tran_count").count();
    Aggregation aggregation = newAggregation(match, group);
    AggregationResults<StoreSummary> result = this.mongoTemplate.aggregate(aggregation, "eft_transactions", StoreSummary.class); 
```

文档在[这里](http://static.springsource.org/spring-data/data-mongodb/docs/1.3.0.RC1/reference/htmlsingle/#mongo.aggregation)

注意：我们最近不得不切换到使用版本 1.3.0 的 BUILD-SNAPSHOT 构建。此更改需要更改上述行中的 2 行，这些行已更改为：

```
AggregationOperation group = Aggregation.group("card_acceptor").sum("amount").as("amount_sum").count().as("tran_count");
Aggregation aggregation = Aggregation.newAggregation(match, group); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T21:48:09.540

Spring Data`MongoOperations.group()`方法映射到`db.collection.group()`MongoDB 命令而不是`$group`聚合函数。目前 Spring Data MongoDB 中不支持聚合框架。正如您所提到的，Map reduce 是受支持的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-12T15:27:36.733

```
 Aggregation aggregation = newAggregation(
        match(Criteria.where("salesyear").is(year)),
        group("brand","salesyear").sum("numberOfCars").as("total"),
        sort(Sort.Direction.ASC, previousOperation(), "brand")    
      ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-26T06:58:00.367

以下是如何获得特定字段的总和。

```
private Map<String, Long> getTotalMap(){
        /*
            db.pDSSummaryModel.aggregate([{
                $group: {
                    _id: null,
                    total: {
                        $sum: '$totalUniqueCustomerCount'
                    }
                }
            }])
         */
        Aggregation aggregations = newAggregation(
                group("null").sum("totalUniqueUserCount").as("userTotal")
                        .sum("totalUniqueCustomerCount").as("customerTotal"),
                project("customerTotal", "userTotal")
        );

        AggregationResults<DBObject> results = mongoTemplate.aggregate(aggregations, "pDSSummaryModel", DBObject.class);
        List<DBObject> fieldList = results.getMappedResults();
        Map<String, Long> map = new HashMap<>();
        if(fieldList != null && !fieldList.isEmpty()) {
            for(DBObject db: fieldList){
                map.put("userTotal", parseLong(db.get("userTotal").toString()));
                map.put("customerTotal", parseLong(db.get("customerTotal").toString()));
            }
        }
        return map;

    } 
```

# html - 当您指定多个类时，会使用哪个类？

> ID：15624478
> 
> 赞同：0
> 
> 时间：2013-03-25T20:49:11.157
> 
> 标签：html, css

如果您有一个分配了两个类的元素，并且这两个类的 CSS 在某些方面存在分歧，那么会使用哪个？有没有办法控制使用哪个？

例如：

```
<p class='red small'>Some Text Here</p> 
```

使用 CSS：

```
.red { color:#ff0000; font-size:200%; }
.small { font-size:50%; } 
```

很明显我的文字会变成红色，但它会是什么大小？是否有一种跨浏览器的方式来控制它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:49:41.883

您分配的所有课程均已使用。

在属性值冲突的情况下，优先考虑[最具体的一个](http://www.w3.org/TR/selectors/#specificity)，或者如果具体情况相同，则优先考虑最后一个。

所以就像你使用这个类一样：

```
.redAndSmall {
    color:#ff0000;
    font-size:50%;
} 
```

大多数情况下，一个好的设计不会有问题，因为你的类会有不同的含义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:50:51.093

`50%`，因为它取决于你的 CSS 的顺序。`class`属性中的顺序被忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T20:55:02.420

css中使用了级联，首先如果找不到，它将应用您的内联样式，然后从头部应用样式，如果没有找到样式，则从外部文件中应用，如果没有外部文件，则它将采用浏览器默认样式属性。

# qt - 由于 Vista 和 XP 上的 MSVCR110.dll 问题，应用程序崩溃

> ID：15624479
> 
> 赞同：0
> 
> 时间：2013-03-25T20:49:11.760
> 
> 标签：qt, visual-c++, runtime-error, msvcrt

我无法诊断运行我的 C++ (Qt) 应用程序的问题。

我使用 Qt 4.8.5 在 Windows 7 机器上的 Visual Studio 2012 上构建应用程序。我使用开关进行编译：/D_US​​ING_V110_SDK71_ 最初解决了我的目标问题（根据[http://blogs.msdn.com/b/vcblog/archive/2012/10/08/10357555.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/10/08/10357555.aspx)）

当我在 Windows 7 上运行该应用程序时，它运行良好；但在 Vista 和 XP 上，我在事件查看器中收到此消息：应用程序日志：

```
Faulting application xxxBridge.exe, version 0.0.0.0, time stamp 0x515094ff, faulting module MSVCR110.dll, version 11.0.51106.1, time stamp 0x5098858e, exception code 0x40000015, fault offset 0x000a327c, process id 0x11e0, application start time 0x01ce299785ba32c0. 
```

我同时构建了另一个类似的应用程序，有很多相似之处，它在 Vista 和 XP 上运行良好。

有人可以帮我诊断这个问题吗？或者提出如何诊断问题的建议，或提供帮助的工具建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:39:57.453

我使用 cout 手动调试。

我将其归结为 ADO 的问题，与此用户遇到的相同： [目标计算机上的 ADO 对象实例创建失败](https://stackoverflow.com/questions/14363308/ado-objects-instance-creation-failed-on-the-target-computer)

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-12T01:52:24.117

您需要附加到您的工作室版本的可再发行组件。将 DLL 放入与您的应用程序相同的文件夹中。

# javascript - 使用 window.open() 并为新窗口中的视图传递一个 knockoutjs ViewModel

> ID：15624482
> 
> 赞同：3
> 
> 时间：2013-03-25T20:49:15.120
> 
> 标签：javascript, knockout.js

我目前正在开发一个应用程序，该应用程序需要单击按钮在浏览器中打开一个新窗口，然后当用户在主窗口上的文本框中键入时，新窗口将相应更新。我以前使用过淘汰赛，但由于某种原因，我在更新第二个 Windows 视图时遇到了问题。这是我当前的代码。

```
//main.js
   $(function () {
        var viewModel = new ViewModel();
        ko.applyBindings(viewModel);
        var newwindow;
        $("#new-window-btn").click(function () {
            newwindow = window.open("a/path/to/newwindow.html", "New Window","status=1,width=350,height=350");
            newwindow._ViewModel = viewModel;
        });

    });

    function ViewModel() {
        var self = this;
        self.textbox = ko.observable("");
    }; 
```

这是 index.html 并包含一个非常基本的按钮，它将打开新窗口，一个用户将输入的文本框和一个 span 标签，以显示我没有疯。

```
//index.html
<div id="new-window-btn" class="btn">new window</div>
<textarea cols="3" rows ="3" data-bind="value:textbox,valueUpdate:'afterkeydown'"></textarea>
<span data-bind="text: textbox"></span> 
```

这是当用户单击 index.html 中的新窗口按钮时弹出的第二个窗口的代码

```
//newwindow.html
    <script type="text/javascript">
        $(function () {
            var viewModel = window._ViewModel;
            ko.applyBindings(viewModel);
            $("#alert-viewModel").click(function () {
                alert(viewModel.textbox());
            });
        });
    </script>
<span data-bind="text:textbox()"></span>
<div id="alert-viewModel" class="btn">show texbox value</div> 
```

当用户在主页上的文本框中输入内容时，该页面上的 span 标签会自动更新。当用户单击新窗口按钮时，新窗口会弹出用户刚刚输入的文本，当用户继续在主窗口文本框中键入时，辅助窗口中的 span 标签不会更新。但是，当用户按下“显示 texbox 值”按钮时，文本会显示在警告框中，并且已更新！所以我的问题是为什么我在第二个窗口中的 span 标签在 ViewModel 明显已经更新时没有更新（因为从“显示 texbox 值”按钮显示的值）。

快速评论：出于某种原因，通过 window.open("somepath"); 访问文件 在这个问题的上下文中实际上不能正常工作。我发现我需要在一个小型 HTTP 服务器中加载新的窗口文件，并使“somepath”成为一个实际的 url。（这就是为什么这个问题没有附加一些示例代码的原因）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T10:50:52.920

`ko`如果两个窗口共享相同的视图模型，它们也必须共享相同的实例。那是因为用一个 Knockout 实例创建的 observables 不能在另一个实例上工作。

这是一个使用 的示例`iframe`，但相同的原则适用于`window.open`：

家长：http: [//jsfiddle.net/eZMTM/](http://jsfiddle.net/eZMTM/)；孩子：http: [//jsfiddle.net/GrXhv/7/](http://jsfiddle.net/GrXhv/7/)

父代码：

```
childWindow = ...;
childWindow.initChild(ko, viewModel); 
```

子代码：

```
window.initChild = function(ko, viewModel) {
    window.ko = ko;
    ko.applyBindings(viewModel, document.body);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-12T10:00:16.840

正如迈克尔所提到的，您可以将绑定应用于打开的窗口的主体，如下所示：

```
var mywindow = window.open('', '', 'height=400,width=600');
mywindow.document.write('<input id="testText" type="text" data-bind="textInput: text1"/>');
ko.applyBindings(viewmodel, mywindow.document); 
```

如果您想尝试一个带有弹出窗口的工作示例，这里**[有一个 fiddle](https://jsfiddle.net/JesusPrice/L0uxm2we/)**。

我在下面的代码段中附加了完整的代码，但是由于 stackoverflow 沙箱不允许弹出窗口，**它会在此处的代码段中失败**。仍然在帖子中保留代码似乎很有价值。

PS：虽然老了，但这是我在谷歌上第一次点击，所以我认为添加一个工作示例会有所帮助......

```
$(function() {
  var viewModel = function() {
    var self = this;

    //creating our observables
    self.text1 = ko.observable("Hello World ...");
    self.text2 = ko.observable("... how's it going");

    //The magic happens here
    self.newKOWindow = function() {
      var mywindow = window.open('', '', 'height=400,width=600');

      //just adding the html boilerplate Part1
      mywindow.document.write('<html><head><title>The KO Popup</title>');
      mywindow.document.write('</head><body>');

      //manually creating the input the window      
      mywindow.document.write('<div class="dontCopyMe">');
      mywindow.document.write('<h2>A Manually created input which is bound</h2>');
      mywindow.document.write('<input id="testText" type="text" data-bind="textInput: text1"/>');

      //just adding the html boilerplate Part2      
      mywindow.document.write('</div>');
      mywindow.document.write('</body></html>');
      mywindow.document.close();

      //just copy our inputs into the new window
      $(".copyMe").clone().appendTo(mywindow.document.body);

      //copy our css
      $("#compiled-css").clone().appendTo(mywindow.document.head);

      //bind the viewmodel
      window.ko = ko;
      ko.applyBindings(self, mywindow.document.body);

      return true;
    }
  };

  model = new viewModel();
  ko.applyBindings(model);

});
```

```
.copyMe,
.dontCopyMe {
  border: 3px dashed limegreen;
  padding: 0.5rem;
  margin: 0.5rem;
  max-width: 30rem;
}

.dontCopyMe {
  border-color: grey;
}

h2 {
  margin: 0 0 0.5rem;
  font-size: 1rem;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>

<body>
  <div>
    <div class="copyMe">
      <h2>Our inputs (will be copied into the popup window)</h2>
      <input type="text" data-bind="textInput: text1" />
      <input type="text" data-bind="textInput: text2" />
    </div>
    <div class="copyMe">
      <h2>Same Inputs just to show this is working :)</h2>
      <input type="text" data-bind="textInput: text1" />
      <input type="text" data-bind="textInput: text2" />
    </div>
    <input id="NWO" type="button" value="NEW KO WIN OPEN" data-bind="click: newKOWindow" />
  </div>
</body>
```

# c# - 如何自动绕过 RDP 上的登录消息？

> ID：15624486
> 
> 赞同：4
> 
> 时间：2013-03-25T20:49:25.703
> 
> 标签：c#, remote-desktop

我正在尝试使用 c# 通过远程桌面登录服务器。我可以使用`AxMSTSCLib`下面的和代码启动连接。但是，我被困在我们域的安全通知上。

手动登录时，需要您在登录完成前单击通知上的“确定”。我一直无法通过我的应用程序找到与此确定按钮进行交互的方法。我已经尝试过的变体`SendKeys`，使用互操作服务发送键事件，找到光标位置并发送鼠标点击事件......

我在这里没有想法了。

```
rdp.Server = server;
rdp.Domain = domain;
rdp.UserName = userName;

IMsTscNonScriptable secured = (IMsTscNonScriptable)rdp.GetOcx();
secured.ClearTextPassword = password;
rdp.StartConnected = 1;

rdp.Connect(); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-05T09:42:52.380

好吧，有一种方法可以按照您的要求进行。您需要下载一份 Windows 7 Embedded Standard ( **WES7 wSP1** )。WES7 包含其他版本的 Windows 7 所没有的东西——**对话框过滤器**。它作为服务运行，并允许您指定要自动执行的某些窗口事件，而无需用户交互。

Dialog Filter Editor 随 Windows Embedded Standard 7 工具一起安装在 EmbeddedSDK\bin 文件夹中。

你所要做的就是：

1.  通过将必要的对话框过滤器文件复制到 C:\Windows\System32，将服务添加到您的 Windows。有 x86 和 x64 版本，所以选择正确的架构。

2.  注册文件，使服务自动运行。

3.  **将使用编辑器创建的ConfigurationList.xml**文件添加到**C:\ProgramData\Microsoft\DialogFilter**。此位置默认隐藏，因此请确保在 Windows 资源管理器中显示隐藏文件并取消隐藏受保护的系统文件。

我实际上已经创建了 ConfigurationList.xml 文件，因此您可以简单地复制以下代码并将其保存为“ConfigurationList.xml”：

```
<?xml version="1.0" encoding="utf-8"?> 
<CL:dialogs xmlns:CL="urn:Dialogs"> 
    <dialog> 
    <ProcessImageName>rundll32.exe</ProcessImageName> 
    <Title>Remote Desktop Connection</Title> 
    <Class>#32770</Class> 
    <Buttons> 
      <Button>OK</Button> 
      <Button>Cancel</Button> 
      <Button>Close</Button> 
    </Buttons> 
    <Actions> 
      <Action>OK</Action> 
    </Actions> 
  </dialog> 
</CL:dialogs> 
```

如您所见，该操作设置为在建立 RDP 连接时弹出的 RDP 对话框中自动按下**OK 按钮。**

有关直接来自 MS 的对话框过滤器的更多信息： [https ://msdn.microsoft.com/en-US/library/ff794135(v=winembedded.60).aspx](https://msdn.microsoft.com/en-US/library/ff794135(v=winembedded.60).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-03T15:45:02.343

刚刚找到了一种更简单的方法：有一个名为**ClickOff**的免费小应用程序，它的工作方式与 Windows Embedded Standard 7 **DialogFilter**非常相似。

[您可以在此处](http://www.softpedia.com/get/System/System-Miscellaneous/ClickOff.shtml)下载**ClickOff** v1.90 。

安装**ClickOff**后，您可以定义要捕获的窗口以及单击其中的哪个按钮。唯一的问题是您必须将其添加到您的启动应用程序中。

我已经创建了一个 clickoff.lst 文件，该文件在 30 秒 RDP 超时弹出窗口上单击确定。该文件应放在**C:\Users\USERNAME\AppData\Roaming\ClickOff**中。这是文件的内容：

```
1.900
WINDOWTITLE="Remote Desktop Connection" BUTTONTEXT="OK" MSGTEXT="CompName\\UserName wants to connect to this machine.\r\n\r\nClick OK to disconnect your session immediately or click cancel to stay connected.\r\n\r\nOtherwise, you will be disconnected in 30 seconds." BUTTONID="1" MSGID="65535" DLGID="0" CLKEVENT="17" CLKMETHOD="3" TIMESCLICKED="0" WAIT="0" BPOSX="0" BPOSY="0" ; 
```

干杯。

# java - 获得焦点后摆动 JRadioButton 自动选择

> ID：15624487
> 
> 赞同：0
> 
> 时间：2013-03-25T20:49:30.223
> 
> 标签：java, swing, jradiobutton, buttongroup, focuslistener

我在 ButtonGroup 中有三个 JRadioButton。使用带有 TAB 的键盘导航，我可以通过这个 JRadioButtons（更改焦点），使用 SPACE，我可以选择带有焦点的 JRadioButton。是否有可能使用 TAB 不仅会更改焦点，还会更改 JRadioButton 的状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:51:46.817

将 FocusListener 添加到单选按钮以在获得焦点后将其选中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:15:13.360

给其他读者的快速提示：

```
myRadioButton.addFocusListener(new FocusListener(){
    @Override
    public void focusLost(FocusEvent e){
        myRadioButton.setSelected(false);
    }
    @Override
    public void focusGained(FocusEvent e){
        myRadioButton.setSelected(true);
    }
}); 
```

# hibernate - 没有 POJO 空指针异常的 Hibernate4 XML 映射

> ID：15624492
> 
> 赞同：0
> 
> 时间：2013-03-25T20:49:41.587
> 
> 标签：hibernate, hibernate-mapping

我使用以下映射 xml（没有 POJO）得到一个空指针异常。

一个。员工.hmb.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC 
 "-//Hibernate/Hibernate Mapping DTD//EN"
 "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class entity-name="Employee"  table="employee">
    <id name="id"  column="id" type="int" >
        <generator class="native" />
    </id>
    <property name="firstName" column="first_name" type="string"  />
    <property name="lastName" column="last_name" type="string" />
</class>
</hibernate-mapping> 
```

湾。输出

```
Exception in thread "main" java.lang.NullPointerException
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at org.hibernate.annotations.common.util.ReflectHelper.classForName(ReflectHelper.java:143)
at org.hibernate.annotations.common.reflection.java.JavaReflectionManager.classForName(JavaReflectionManager.java:117)
at org.hibernate.envers.configuration.RevisionInfoConfiguration.configure(RevisionInfoConfiguration.java:262)
at org.hibernate.envers.configuration.AuditConfiguration.<init>(AuditConfiguration.java:103)
at org.hibernate.envers.configuration.AuditConfiguration.getFor(AuditConfiguration.java:166)
at org.hibernate.envers.event.EnversIntegrator.integrate(EnversIntegrator.java:64)
at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:303)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1743)
at org.tutorial.hibernate.annotation.UserDetailDemo.main(UserDetailDemo.java:26) 
```

但是，如果我确实将其映射到 Employee 类，没问题。
请帮忙。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:35:03.467

您不能构建一个配置，它指的是在构建配置时无法加载的类。

但是，您*可以*要求 Hibernate 为您生成 Java 文件，然后编译它们并在运行时使用它们。你用`hbm2java`. 它有一个[Ant 任务](http://docs.jboss.org/tools/latest/en/hibernatetools/html/ant.html#d0e4821)，以及一些相关的[IDE 插件](http://docs.jboss.org/tools/latest/en/hibernatetools/html/plugins.html#refeng_codegen)。他们将生成一个 .java 文件，然后您将在运行时编译和使用该文件。

# asp.net - 如何在 Windows server 2008 R2 上安装 PayPal API 证书

> ID：15624501
> 
> 赞同：1
> 
> 时间：2013-03-25T20:49:56.037
> 
> 标签：asp.net, sql-server-2008-r2, integration, paypal

我通过使用 PayPal API for SOAP 在我的网站上实现了 PayPal 快速结帐功能。在 ASP.NET 中的集成以及与 PayPal 沙盒服务[https://api-3t.sandbox.paypal.com/2.0](https://api-3t.sandbox.paypal.com/2.0)的通信很容易。在沙盒上，我使用用户名、密码和 API 签名进行身份验证，但在我的 PayPal 个人资料中找不到 API 签名。API-Authorization 中的第二个选项仅显示用户名、密码和 API-Certificate（*.pem 文件）。

描述如何在 Windows Server 2003 而非 2008 R2 上安装证书的集成指南。Windows 工具包在 Server 2008 R2 上不起作用。而且我不能使用第二个证书，因为我已经在我的服务器上使用了一个 SSL 证书作为服务器证书。

有谁知道我如何获得 API 签名？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:44:43.153

PayPal 最近更新了开发者网站的用户界面。

这是获取 API 签名的说明。

![在此处输入图像描述](../Images/2668b4b5f54ab1ce40af73dd58d3a19d.png) ![在此处输入图像描述](../Images/57bafe40dacc4a3b5530cdd1ca9ceaaa.png)

# android - 在android中解析json对象

> ID：15624503
> 
> 赞同：1
> 
> 时间：2013-03-25T20:50:01.760
> 
> 标签：android, json

我尝试解析单个 json 对象，但我遇到了问题。这是我的对象：

```
{"id":"16","nickname":"vvvv","country":"Albania","date":"2013-03-25 21:08:40","best":"8","updateDate":"1364243187.162"} 
```

我使用这个代码：

```
JSONObject object = (JSONObject) new JSONTokener(responce).nextValue();
         String query = object.getString("nickname"); 
```

我得到 java.langClassCastExeption java.jangBoolean

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:53:12.333

只需从给定的字符串创建一个 JSONObject，然后从 jsonObject 中提取所有值：

```
 //create json object form responce string
JSONObject object = new JSONObject(responce);

//get nickname
 String query = object.getString("nickname");
///.... get other value for object 
```

并且还使用[JSONObject.has(String name)](http://developer.android.com/reference/org/json/JSONObject.html#has%28java.lang.String%29)检查当前 json 对象是否包含给定名称的映射

# php - 从 PHPExcel 阅读中获取文本而不是 RTF/对象

> ID：15624505
> 
> 赞同：1
> 
> 时间：2013-03-25T20:50:05.540
> 
> 标签：php, mongodb, phpexcel

我正在一个项目中使用 PHPExcel 库来做一些事情。我今天遇到了第一个问题。从 Excel 中读取/写入效果很好，但后来我打算开始从 Excel 工作表中取出东西，然后进入 Mongo。我基本上从 Excel 将一些内容读入数组，然后尝试将该数组保存到 Mongo`$collection->insert($array);`

我有一个异常告诉我它不能用零字符键插入任何东西。我`var_dum()`在我的阵列上做了一个，看看它在世界上的哪个地方得到一个空白键，这就是转储产生的。

```
array(10) 
{ 
    ["um"]=> string(2) "EA" 
    ["desc"]=> string(37) "FRAME WELDMENT, NITRATE REMOVAL TANKS" 
    ["vws_num"]=> NULL 
    ["part_num"]=> string(10) "SD-0408-01" 
    ["manufac"]=> object(PHPExcel_RichText)#665 (1) 
    { 
        ["_richTextElements" : "PHPExcel_RichText" : private]=> array(3) 
        { 
            [0]=> object(PHPExcel_RichText_TextElement)#184 (1) 
            { 
                ["_text":"PHPExcel_RichText_TextElement":private]=> string(23) "VEOLIA WATER SOLUTIONS " 
            } 
            [1]=> object(PHPExcel_RichText_Run)#179 (2) 
            { 
                ["_font":"PHPExcel_RichText_Run":private]=> object(PHPExcel_Style_Font)#183 (12) 
                { 
                    ["_name":"PHPExcel_Style_Font":private]=> string(5) "SWGDT" 
                    ["_size":"PHPExcel_Style_Font":private]=> string(2) "10" 
                    ["_bold":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_italic":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_superScript":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_subScript":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_underline":"PHPExcel_Style_Font":private]=> string(4) "none" 
                    ["_strikethrough":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_color":"PHPExcel_Style_Font":private]=> object(PHPExcel_Style_Color)#186 (4) 
                    { 
                        ["_argb":"PHPExcel_Style_Color":private]=> string(8) "FF000000" 
                        ["_isSupervisor":"PHPExcel_Style_Color":private]=> bool(false) 
                        ["_parent":"PHPExcel_Style_Color":private]=> NULL 
                        ["_parentPropertyName":"PHPExcel_Style_Color":private]=> NULL 
                    } 
                    ["_parentPropertyName":"PHPExcel_Style_Font":private]=> NULL 
                    ["_isSupervisor":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_parent":"PHPExcel_Style_Font":private]=> NULL 
                } 
                ["_text":"PHPExcel_RichText_TextElement":private]=> string(1) " " 
            } 
            [2]=> object(PHPExcel_RichText_Run)#182 (2) 
            { 
                ["_font":"PHPExcel_RichText_Run":private]=> object(PHPExcel_Style_Font)#189 (12) 
                { 
                    ["_name":"PHPExcel_Style_Font":private]=> string(14) "Century Gothic" 
                    ["_size":"PHPExcel_Style_Font":private]=> string(2) "10" 
                    ["_bold":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_italic":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_superScript":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_subScript":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_underline":"PHPExcel_Style_Font":private]=> string(4) "none" 
                    ["_strikethrough":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_color":"PHPExcel_Style_Font":private]=> object(PHPExcel_Style_Color)#188 (4) 
                    { 
                        ["_argb":"PHPExcel_Style_Color":private]=> string(8) "FF000000" 
                        ["_isSupervisor":"PHPExcel_Style_Color":private]=> bool(false) 
                        ["_parent":"PHPExcel_Style_Color":private]=> NULL 
                        ["_parentPropertyName":"PHPExcel_Style_Color":private]=> NULL 
                    } 
                    ["_parentPropertyName":"PHPExcel_Style_Font":private]=> NULL 
                    ["_isSupervisor":"PHPExcel_Style_Font":private]=> bool(false) 
                    ["_parent":"PHPExcel_Style_Font":private]=> NULL 
                } 
                ["_text":"PHPExcel_RichText_TextElement":private]=> string(14) "& TECHNOLOGIES" 
            } 
        } 
    } 
    ["vendor"]=> NULL 
    ["unit_price"]=> NULL 
    ["list_price"]=> NULL 
    ["multiplier"]=> NULL 
    ["times_req"]=> float(1) 
} 
```

为什么我的`"manufac"`钥匙拿着一个看起来很疯狂的 PHPExcel 对象？我正在检索每个单元格的内容

`$array[$rowIndex][$col] = $cell->getCalculatedValue();`

我知道 Excel 工作表的特定单元格中有一个换行符，是这样吗？或者这是否告诉我该单元格上放置了某种奇怪的格式？

我只是想要这个单元格中的文本值，就像所有其他人给我的一样......

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T21:14:15.423

那`crazy insane looking PHPExcel Object`是一个富文本对象，一个包含格式化文本的单元格值。

您可以使用以下方法测试单元格是否包含富文本对象：

```
if ($objPHPExcel->getActiveSheet->getCell('A1')->getValue() instanceof PHPExcel_RichText) 
```

并使用从单元格中提取纯文本内容

```
$plaintext = $objPHPExcel->getActiveSheet->getCell('A1')
    ->getValue()->getPlainText(); 
```

# nancy - 有没有办法列出 Nancy 应用程序中的所有可用路由？

> ID：15624507
> 
> 赞同：7
> 
> 时间：2013-03-25T20:50:14.313
> 
> 标签：nancy

我正在使用 Nancy 通过 Web 服务实现 API。

我想要一个 /help 或 /docs 页面以编程方式列出所有可用路由，以便我可以为 API 用户提供自动生成/更新的文档。

关于如何做到这一点的任何想法？（在路由处理程序中，“this.routes”可以访问已定义路由的集合 - 但仅限于当前的 NancyModule。我需要一种编程方式来列出所有已注册的路由，而不仅仅是当前模块中的路由）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-16T06:59:17.253

不完全是您所需要的，但 Nancy 中还有一个内置的仪表板面板。要启用它，请执行以下操作：

```
public class CustomBootstrapper : DefaultNancyBootstrapper
{
    protected override DiagnosticsConfiguration DiagnosticsConfiguration
    {
        get { return new DiagnosticsConfiguration { Password = @"secret"}; }
    }
} 
```

然后您可以在 {yournancyapp}/_nancy 上访问它

[https://github.com/NancyFx/Nancy/wiki/Diagnostics](https://github.com/NancyFx/Nancy/wiki/Diagnostics)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-26T13:54:17.653

您可以通过依赖 IRouteCacheProvider 并调用 GetCache 来做到这一点——我们实际上是在主仓库中的一个演示中做到这一点的：

[https://github.com/NancyFx/Nancy/blob/master/src/Nancy.Demo.Hosting.Aspnet/MainModule.cs#L13](https://github.com/NancyFx/Nancy/blob/master/src/Nancy.Demo.Hosting.Aspnet/MainModule.cs#L13)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T06:38:42.650

如何使用[此答案](https://stackoverflow.com/a/15638833/196451)`IRouteCacheProvider`中提到的@grumpydev的示例：

```
// within your module
public class IndexModule : NancyModule
{
    // add dependency to IRouteCacheProvider
    public IndexModule(Nancy.Routing.IRouteCacheProvider rc)
    {
        routeCache = rc;
        Get["/"] = GetIndex;
    }

    private Nancy.Routing.IRouteCacheProvider routeCache;

    private dynamic GetIndex(dynamic arg)
    {
        var response = new IndexModel();

        // get the cached routes
        var cache = routeCache.GetCache();

        response.Routes = cache.Values.SelectMany(t => t.Select(t1 => t1.Item2));

        return response;
    }
}

public class IndexModel
{
    public IEnumerable<Nancy.Routing.RouteDescription> Routes { get; set; }
} 
```

您可以`Path`从`Method`. `Nancy.Routing.RouteDescription`例如，使用此视图：

```
<!DOCTYPE html>
<html>
<body>
<p>Available routes:</p>
<table>
<thead><tr><th>URL</th><th>Method</th></tr></thead>
<tbody>
@Each.Routes
<tr><td>@Current.Path</td><td>@Current.Method</td></tr>
@EndEach
</tbody>
</table>
</body>
</html> 
```

# jmeter - 提取在 JMeter 中发布后出现在 URL 中的值

> ID：15624508
> 
> 赞同：3
> 
> 时间：2013-03-25T20:50:15.637
> 
> 标签：jmeter, load-testing

我有一个应用程序，我正在尝试使用 JMeter 加载测试，但我无法从 URL 中提取值，该值是在 HTTP POST 之后生成的。

应用程序流程（简化）如下所示，带有相应的 URL：

1.  登录：`http://host:port/login`
2.  转到仪表板（HTTP GET）：`http://host:port/dashboard`
3.  单击“创建内容”（HTTP GET）：`http://host:port/$string1/$string2=/create`
4.  输入数据，点击“提交”(HTTP POST) 现在 URL 为：`http://host:port/$string1/$string2=/content/$string3`

`$string1`, `$string2`&`$string3`是随机生成的；`$string1`& `$string2`在仪表板 URL 的正文中可用（使用正则表达式很容易提取）；`$string3`但是在创建内容*后返回。*我需要`$string3`在上面的第 4 步查看新创建的内容，然后继续执行脚本中的后续步骤。

我无权访问应用程序的内部或它所在的服务器。

完整性检查：

*   这是鸡蛋的情况吗？
*   还是我在 JMeter 中遗漏了什么？
*   有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T08:29:36.797

我假设在您单击“提交”后，这是一个将启动创建内容过程的发布请求，然后从服务器获得重定向回复。（您可以在树视图中验证它是否是重定向回复）

取消选中 Jmeter 中的重定向选项并将正则表达式提取器元素添加到同一请求。

然后使用类似的东西提取重定向 URL，`Object moved to <a href="/(.+?)">here`在下一个 HTTP 请求元素中，您可以使用提取的变量作为 Path 之类的变量`${string3}`！

# python - “from django.views.generic import list_detail”的当前 Django 是什么？

> ID：15624509
> 
> 赞同：6
> 
> 时间：2013-03-25T20:50:16.020
> 
> 标签：python, django

我是否正确理解“从 django.views.generic 导入 list_detail”已被弃用和/或从 Django 中删除？

如果是这样，合适的继任者是什么？

谢谢，

--

@Gareth，谢谢。

我有一个后续问题要问：如何使用 ListView 替换 list_detail.object_detail？

目前的代码（仅在导入中更改）是：

```
from django.conf.urls.defaults import *
#from django.views.generic import list_detail
from django.views.generic.list import ListView

from announcements.models import Announcement
from announcements.views import *

announcement_detail_info = {
    "queryset": Announcement.objects.all(),
}

urlpatterns = patterns("",
    url(r"^(?P<object_id>\d+)/$", list_detail.object_detail,
        announcement_detail_info, name="announcement_detail"),
    url(r"^(?P<object_id>\d+)/hide/$", announcement_hide,
        name="announcement_hide"),
    url(r"^$", announcement_list, name="announcement_home"),
) 
```

[https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/#listview](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/#listview)似乎没有建议使用单个内联替换：

```
 url(r"^(?P<object_id>\d+)/$", list_detail.object_detail,
        announcement_detail_info, name="announcement_detail"), 
```

如果有的话，它建议添加一个额外的模型，并建立该模型。

list_detail.object_detail 调用是否有快速的内联替换，还是需要更多的根除？

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T21:04:18.467

`django.views.generic.list_detail`[在 Django 1.3](https://docs.djangoproject.com/en/1.3/topics/generic-views/#generic-views)中已弃用：

> 从 Django 1.3 开始，基于函数的通用视图已被弃用，取而代之的是基于类的方法。

改为使用[`django.views.generic.list.ListView`](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/#listview)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T20:16:48.903

After importing `django.views.generic.list.ListView`

You just need to change `list_detail.object_detail` to `ListView.as_view()`

# vba - 如何在循环中选择每个形状？

> ID：15624510
> 
> 赞同：0
> 
> 时间：2013-03-25T20:50:26.160
> 
> 标签：vba, powerpoint

简报 2010

我正在尝试选择循环中的每个新形状。但并非循环中的所有形状都被选中。始终只选择最后一个形状。怎么了？

谢谢

```
Private Sub AddShapeRectangleOnSelectedText()

  Dim oText As TextRange
  Dim linesCount As Integer
  Dim myDocument As Slide
  Dim i As Integer
  Dim s As Shape

  ' Get an object reference to the selected text range.
  Set oText = ActiveWindow.Selection.TextRange
  Set myDocument = ActiveWindow.View.Slide
  linesCount = oText.Lines.Count

  For i = 1 To linesCount
    Set s = myDocument.Shapes.AddShape(msoShapeRectangle, _
    oText.Lines(i).BoundLeft, oText.Lines(i).BoundTop, oText.Lines(i).BoundWidth, oText.Lines(i).BoundHeight)

    With s
     .Select
     .Fill.Visible = msoTrue
     .Fill.Solid
     .Fill.ForeColor.RGB = RGB(255, 255, 153)
     .Fill.Transparency = 0.7
     .Line.Visible = msoFalse
     .Line.Transparency = 0#
    End With
  Next 
```

结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:22:21.647

`Select`有一个可选参数来指示选择是否应该替换先前的选择...

你可以像这样修改你的代码

```
.Select IIf(i = 1, True, False) 
```

# git - 使用 Git 处理此类代码更改的方法

> ID：15624512
> 
> 赞同：1
> 
> 时间：2013-03-25T20:50:32.920
> 
> 标签：git, git-branch, git-commit

这是问题所在：

我想合并两个名为*Song*的类，它们都共享大多数成员，但不是全部。如果找不到成员，填充它们的内容不会有问题，它们将被简单地忽略，所以可能没问题，但谁知道，我可能不得不恢复到原始实现（单独的对象）。

这是 Git 派上用场的地方，用于对我的代码进行版本控制。（这是我第一次使用它）

问题是：如何用 Git 处理这种变化？创建提交或创建分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:06:04.407

Git 很灵活，可以让你随心所欲地做你想做的事。由于您在进行提交与创建分支之间进行辩论，因此听起来您正在在提交到 master 或在另一个分支上进行工作之间进行辩论。如果是这种情况，我强烈建议您从 master 分支分支，完成您的工作，并在准备好后合并回 master。

您将采取的步骤是：

1.  `git checkout -b merge_classes`
2.  `# writing some code`
3.  `git add .`
4.  `git commit -m "merged two files`
5.  `git checkout master`
6.  `git merge merge_classes`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T20:59:44.903

提交肯定会以某种方式涉及，但是如果您谈论的是 class的*同一个文件*`Song`，但具有*两个*不同的内容，则必须创建一个分支。

这将允许您管理公共文件的不同内容，并在以后执行合并。

如果这是关于从两个现有文件创建一个文件，那么一个简单的提交就足够了，如果你需要回到原来的情况，你将能够恢复。

# date - 另一个位置的数据库中的日期与客户的本地时间之间的差异

> ID：15624517
> 
> 赞同：0
> 
> 时间：2013-03-25T20:50:57.177
> 
> 标签：date, timestamp

我需要忽略数据库中超过 10 分钟的记录。但是，数据库服务器与应用服务器位于不同的时区。我试图利用时间戳列值中的时区详细信息，但似乎他们没有将时区详细信息存储在该列值中（设计不好？）。但是，我找到了一种使用查询获取数据库实例信息的方法：

```
select dbtimezone from dual. 
```

但是，java 中的大多数实现通过名称而不是偏移信息来支持时区。我需要能够将此偏移量准确地转换为时区（EST 等），这样我就不会在我的计算中错过任何与 DST 相关的时间。像这样：

```
TimeZone dbZone = TimeZone.getTimeZone(10000); // offset is +10000

Calendar cal = Calendar.getInstance(dbZone);
cal.setTime(new Date());

DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
df.setTimeZone(dbZone);
Date parsedDate = df.parse(df.format(cal.getTime())); 
```

该计划是将当前客户端/应用程序时间转换为数据库特定时区时间并执行两者之间的差异。

由于某些限制，这无法在查询中完成。请不要让我写查询以获取最新记录等。必须用 Java 完成。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:15:35.800

我猜它可能会让你朝着正确的方向前进。您可以尝试以下操作，以便了解与 EST 的偏移量并进行相应的计算：

```
SELECT TZ_OFFSET('US/Eastern') FROM DUAL; 
```

所以返回 -3:00 意味着现在是 PST 时间。也许你已经尝试过了？

# file-io - 使用 Response.TransmitFile 时不能多次调用处理程序 ashx

> ID：15624518
> 
> 赞同：1
> 
> 时间：2013-03-25T20:50:58.457
> 
> 标签：file-io, download, httphandler, ashx, transmitfile

我为客户从我的网站下载内容（视频）创建了一个 HttpHandler (.ashx)。首先我使用的是 WriteFile 方法，我意识到它需要大量内存，然后我决定将其更改为 TransmitFile 方法。

但是发生了一件奇怪的事情，我无法再下载多个。我不得不等待下载完成并开始另一个。

基本上代码是这样的：

```
 System.IO.FileInfo file = new System.IO.FileInfo(file_path);

        context.Response.Clear();

        if (flagH264)
        {
            context.Response.ContentType = "video/mp4";
        }
        else
        {
            context.Response.ContentType = "video/x-ms-wmv";
        }

        context.Response.AddHeader("Content-Length", file.Length.ToString());
        context.Response.AddHeader("Content-Disposition", "attachment; filename=" + name);

        //context.Response.WriteFile(file_path.Trim());
        context.Response.TransmitFile(file_path.Trim());
        context.Response.Flush(); 
```

任何人都可能知道这是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:04:36.800

我发现了问题所在。

我用于下载页面的 HttpHandler (ashx) 正在实现一个接口 IRequireSessionState，它赋予我操作会话数据的读/写权限。当使用 TransmitFile 方法时，IIS 会阻止系统上的任何操作，以保护会话数据不被更改。

解决方案是更改**IReadOnlySessionState的****IRequireSessionState**，它只提供对会话数据的读取访问权限，无需提供任何类型的安全性，阻止用户操作。

# javascript - Javascript：仅验证 alpha 和空格

> ID：15624521
> 
> 赞同：2
> 
> 时间：2013-03-25T20:51:04.930
> 
> 标签：javascript, html, function, validation, space

我有这个功能，仅当用户在文本框中输入内容时才用于验证字母。我刚刚意识到它不接受空格。我将如何解决这个问题？只需将 charCode 值添加到等式中？

```
function isLetter2(evt) {
       evt = (evt) ? evt : event;
       var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode :
          ((evt.which) ? evt.which : 0));
       if (charCode > 31 && (charCode < 65 || charCode > 90) &&
          (charCode < 97 || charCode > 122)) {
          return false;
       }
       return true;
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:15:11.407

一个空格是 charcode 32（十六进制 20），所以只需在你的第一个 if 语句之前添加这一行。

```
if (charCode == 32) return true; 
```

后面是你原来的 if 语句。（它们之间不需要额外的 else 语句，因为该函数现在将停止并在检测到空格后立即返回 true。）

更新：您的原始 if 语句可以通过德摩根定律简化为 <= 31 或（包括在 65 和 90 之间）或（包括在 97 和 122 之间）。因此，只需将您的第一个 > 31 更改为 > 32 也可以正常工作，因为它的否定将是 <= 32 并导致返回 true，从而允许输入空格。但我不确定你为什么要允许输入小于 32 的所有其他字符……这包括很多奇怪的东西。也许你应该改变你的代码是这样的：

```
if (charCode == 32 ||
   (charCode >= 65 && charCode <= 90) ||
   (charCode >= 97 && charCode <= 122))
     return true;
else return false; 
```

事实上，所有这些比较的结果本身等于值 true 或值 false，因此您可以完全消除 if/else 语句，只需说：

```
return charCode == 32 || (charCode >= 65 && charCode <= 90) || (charCode >= 97 && charCode <= 122); 
```

# java - 使用 Google 搜索我的 GWT 应用程序

> ID：15624522
> 
> 赞同：3
> 
> 时间：2013-03-25T20:51:04.793
> 
> 标签：java, gwt, search

是否可以在 GWT 网站上包含 Google 自定义搜索：

*   要搜索 GWT 页面或视图中包含的关键字？
*   考虑到 GWT 应用程序动态生成页面
*   如果这是可能的，那么需要考虑什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:30:49.013

是的，您可以使用 Ajax Search for Google API，它与 Gwt 具有高度兼容性：

[http://code.google.com/p/gwt-google-apis/wiki/AJAXSearchGettingStarted](http://code.google.com/p/gwt-google-apis/wiki/AJAXSearchGettingStarted)

您不仅可以将其用于本地搜索，还可以扩展您的 Gwt 应用程序的功能，强烈推荐且非常有用，希望对您有所帮助。

此致。

# iphone - 如果屏幕为空白，我可以播放视频中的声音吗？苹果手机

> ID：15624523
> 
> 赞同：0
> 
> 时间：2013-03-25T20:51:07.237
> 
> 标签：iphone, mpmovieplayercontroller, avaudioplayer

在我正在开发的 iPhone 应用程序中，我正在播放一个 mp4 视频，我希望在按下睡眠按钮后能够听到视频的声音。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:58:24.200

我相信只有按下主页按钮才有可能。

然后，你再次双击home键，音乐控制

显示出来。之后，您按下播放按钮。

我认为在睡眠模式下不会有任何方法。

# xslt - //* 针对什么匹配模式？

> ID：15624524
> 
> 赞同：1
> 
> 时间：2013-03-25T20:51:07.340
> 
> 标签：xslt

尝试重写 XSLT 文件，但不确定匹配模式的目标是什么。

我知道 /* 以 XML 文档的顶部元素为目标，但我不知道这种模式的作用。这是行。

```
<xsl:key name="ids" match="//*" use="@xml:id"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T23:28:33.917

`//*`在表达式中使用`select`将选择整个文档中的所有元素节点。

在`match`表达式（对于模板或键）中，使用前导没有意义`//`，因为两者都`match="//*"`将`match="*"`匹配完全相同的节点，即文档中任何位置的任何元素。

`//`只不过是`/descendant-or-self::node()/`, so `//*`means`/descendant-or-self::node()/*`或作为文档节点或其任何后代的子元素的任何元素的文本简写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T20:54:47.027

xpath 模式[//](http://www.caucho.com/resin-3.0/xml/xpath.xtp#root-descendant) [*](http://www.caucho.com/resin-3.0/xml/xpath.xtp#star)匹配文档的所有元素

# ruby-on-rails - 使变量在整个应用程序中可用？

> ID：15624527
> 
> 赞同：2
> 
> 时间：2013-03-25T20:51:27.683
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的 rails 3 应用程序中，我想定义一个像这样的变量：

```
PERSONAL_DOMAINS = %w[
  @126.com
  @163.com
  @aim.com
  @aol.com
] 
```

然后我希望能够在 user.rb 中使用它进行如下验证：

```
return true if PERSONAL_DOMAINS.any? { |rule| "@#{domain}".include? rule } 
```

我也想在另一个模型中使用它。

像这样：

```
domain_rules = [PERSONAL_DOMAINS]
domain_rules.each { |rule| return false if !domain.match(rule).nil? } 
```

使用 Rails，您应该在哪里以及如何定义这个 PERSONAL_DOMAINS 列表？YML，配置，初始化程序？然后你如何正确使用它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:48:49.913

*假设值在不同的环境中不会改变，*我会考虑两种方法，在这两种情况下我认为你应该把它放在一个初始化器中，比如：

```
config/initializers/personal_ip_addresses.rb 
```

然后你可以简单地拥有一个带有常量的文件：

```
 PERSONAL_DOMAINS = %w[
      @126.com
      @163.com
      @aim.com
      @aol.com
    ] 
```

您可以像上面一样简单地使用它：

```
return true if PERSONAL_DOMAINS.any? { |rule| "@#{domain}".include? rule } 
```

或者你想走配置路线：

```
YourApplicationClass::Application.config.personal_domains = %w[
      @126.com
      @163.com
      @aim.com
      @aol.com
    ] 
```

你会像这样使用它：

```
Rails.configuration.personal_domains 
```

就我个人而言，我尽量保持简单，并且会保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:29:24.663

你试过[配置](https://github.com/markbates/configatron)吗？

我通常将它用于所有配置变量，效果很好！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T20:55:07.790

如果您希望它可用于整个应用程序，您可以在 application.rb 中定义它。

例如，如果你在下面定义了一些东西

```
module MyApp
  class Application < Rails::Application

    PERSONAL_DOMAINS = %w[
      @126.com
      @163.com
      @aim.com
      @aol.com
    ]
    etc. 
```

然后您可以稍后将其称为 MyApp::Application::PERSONAL_DOMAINS

如果那是你真正想要的。但是，最好设置一个初始化文件来执行此操作并将其保存在一个位置，易于更改。

# ios6 - GameCenter 参与者QuitInTurnWithOutcome 不起作用

> ID：15624535
> 
> 赞同：2
> 
> 时间：2013-03-25T20:52:03.900
> 
> 标签：ios6, objective-c-blocks, game-center

我在这里有点未知，真的不知道这是否有问题。我正在尝试使用以下代码退出回合制游戏：

```
[match participantQuitInTurnWithOutcome:GKTurnBasedMatchOutcomeQuit
                       nextParticipants:[_match.participants objectAtIndex:1]
                            turnTimeout:GKTurnTimeoutDefault
                              matchData:match.matchData
                      completionHandler:^(NSError *error) {
                          if (error)
                              NSLog(@"Error while quitting match: %@", error.localizedFailureReason);
                      }]; 
```

但是在测试时收到以下消息：

> > 退出比赛时出错：（null）

这是我第一次对此进行测试，并且需要一些消息什么是错的，或者是否有人可以提示我。

干杯

**更新**

我已经搜索了互联网（再次）并找到了一些我正在测试的 IOS6 代码（[http://www.raywenderlich.com/forums/viewtopic.php?f=13&t=5244 ）：](http://www.raywenderlich.com/forums/viewtopic.php?f=13&t=5244)

```
//   load all of the matches the player is currently a part of
[GKTurnBasedMatch loadMatchesWithCompletionHandler:^(NSArray *matches, NSError *error)
{
    if (error) NSLog(@"Error loading matches: %@", error);

    //   create some placeholder match data
    NSString *matchString         = @"Deleting match";
    NSData *matchData            = [matchString dataUsingEncoding:NSUTF8StringEncoding];

    //   for each match
    for (GKTurnBasedMatch *match in matches)
    {
        //   log the id of the match
        NSLog(@"ID of match we are removing: %@", match.matchID);

        //   for each player we set their outcome to 'tied'
        for (GKTurnBasedParticipant *participant in match.participants)
            participant.matchOutcome      = GKTurnBasedMatchOutcomeTied;

        //   end the match
        [match endMatchInTurnWithMatchData:matchData completionHandler:^(NSError *error)
         {
             if (error) NSLog(@"Error ending the match: %@", error);

             //   and then remove it
             [match removeWithCompletionHandler:^(NSError *error)
              {
                  if (error) NSLog(@"Error removing match: %@", error);
              }];
         }];
    }
}]; 
```

它现在似乎可以工作，但我得到：GKErrorDomain Code=24，这似乎意味着“GKErrorTurnBasedInvalidState = 24”并且不知道该怎么做。

# ruby - 循环浏览上传到行导轨的数据

> ID：15624536
> 
> 赞同：0
> 
> 时间：2013-03-25T20:52:04.467
> 
> 标签：ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

我正在尝试为我的网络应用程序创建自己的简单多文件上传功能。但是，当用户提交他的图像时，我无法弄清楚如何循环浏览表中某一行中发布的条目。

**发布的数据**

```
{"album_id"=>"10",
 "utf8"=>"✓",
 "commit"=>"Create Image",
 "authenticity_token"=>"O9/iRhRJozks9ZE/LXfbDDZQa2/vEFcigu7Edkn3bWY=",
 "image"=>{"album_id"=>"10",
 "description"=>"Example",
 "albumcover"=>"false",
 "title"=>"Title",
 "picture"=>[#<ActionDispatch::Http::UploadedFile:0x10255fc28 @tempfile=#<File:/var/folders/bx/6z1z5yks56j40v15n43tjh1c0000gn/T/RackMultipart20130325-6919-14738ar-0>,
 @headers="Content-Disposition: form-data; name=\"image[picture][]\"; filename=\"IMG_0106.JPG\"\r\nContent-Type: image/jpeg\r\n",
 @content_type="image/jpeg",
 @original_filename="IMG_0106.JPG">,
 #<ActionDispatch::Http::UploadedFile:0x10255fc00 @tempfile=#<File:/var/folders/bx/6z1z5yks56j40v15n43tjh1c0000gn/T/RackMultipart20130325-6919-1o8msmh-0>,
 @headers="Content-Disposition: form-data; name=\"image[picture][]\"; filename=\"Screen Shot 2013-03-05 at 9.00.28 PM.png\"\r\nContent-Type: image/png\r\n",
 @content_type="image/png",
 @original_filename="Screen Shot 2013-03-05 at 9.00.28 PM.png">],
 "image_id"=>"id"}} 
```

如您所见，该`:picture`行中有两个不同的文件数据。如何循环浏览该数据以将每个数据分配给不同的图像对象？

**架构**

```
ActiveRecord::Schema.define(:version => 20130319040930) do

  create_table "albums", :force => true do |t|
    t.string   "title",       :null => false
    t.text     "description"
    t.date     "date"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
    t.integer  "album_id"
  end

  create_table "images", :force => true do |t|
    t.string   "title"
    t.string   "description"
    t.datetime "date"
    t.integer  "album_id"
    t.integer  "image_id"
    t.string   "picture"
    t.boolean  "albumcover"
  end

  create_table "users", :force => true do |t|
    t.string   "email"
    t.string   "password_digest"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
  end

end 
```

**图像模型**

```
class Image < ActiveRecord::Base
    attr_accessible :title, :description, :picture, :image_id, :album_id, :albumcover
    belongs_to :album
    accepts_nested_attributes_for :album
    mount_uploader :picture, PictureUploader 
  end 
```

**图像控制器**

```
class Admin::ImagesController < ApplicationController
    respond_to :html, :json
    def index
        @album = Album.find(params[:album_id])
        @images = @album.images.all
    end
    # def new
    #   @album = Album.find(params[:album_id])
    #   @image = @album.images.new
    # end
    def new
        @album = Album.find(params[:album_id])
            @image = @album.images.new
    end
    def create
        @album = Album.find(params[:album_id])
        @image = @album.images.new(params[:image])
        if @image.save
            flash[:notice] = "Successfully added image!"
            redirect_to [:admin, @album, :images]
        else
            render :action => 'new'
        end
    end
    def show
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
    end
    def edit
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
    end
    def update
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
        if @image.update_attributes(params[:image])
            flash[:notice] = "Successfully updated Image"
            redirect_to [:admin, @album, :images]
        else
            render :action => "edit"
        end
    end
    def destroy
        @album = Album.find(params[:album_id])
        @image = @album.images.find(params[:id])
        @image.destroy
        @albumid = @album.id
        @id = @image.id
        FileUtils.remove_dir("#{Rails.root}/public/uploads/image/picture/#{@albumid}/#{@id}", :force => true)
        redirect_to admin_album_images_path(@album)
    end

end 
```

**看法**

```
<%= stylesheet_link_tag 'admin/dashboard' %>
<%= stylesheet_link_tag 'admin/images' %>
<%= javascript_include_tag 'admin/dashboard'%>
<div class="container">
    <header class="header">
            <div class="header_content clearfix">
                <h1 class="page_name">Dashboard</h1>
                    <ul class="navbar">
                        <li class="nav_item">Move</li>
                        <li class="nav_item">Edit</li>
                        <li class="nav_item">Delete</li>
                    </ul>
            </div>
    </header>
    <section class="sidebar">
        <div class="sidebar_content">
            <ul class="menu">
                <li class="menu_item active-menu"><%=link_to 'manage albums', admin_albums_path%></li>
                <li class="menu_item"><%=link_to 'manage media' %></li>
                <li class="menu_item"><%=link_to "New Album", :controller => "albums", :action => "new" %></li>
                <li class="menu_item"><%= link_to "Add Images", {:controller => "images", :action => "new"}, :class => "highlight_menu"%> </li>
                <li class="menu_item"></li>
            </ul>
        </div>
    </section>
    <section class="content">
        <div class="inner-box clearfix">
            <%= link_to "< Back", admin_albums_path, :id => "return_link" %> </br>
            <h1 class="section-title"> <strong style="font-weight: 600;"><%=best_in_place [:admin,@album], :title %></strong></h1>
            <h4 class="album-desc"><%= best_in_place [:admin,@album], :description, :type => :textarea%></h4>
            <% if !@images.blank? %>
                <% @images.each do |image| %>
                <div class="item">
                    <div class="image-box">
                        <div class="source">
                            <%= image_tag image.picture %>
                        </div>
                    </div>
                    <div class="info">
                        <div class="title">
                            <%= image.title %>
                        </div>
                        <div class="item-links">
                            <%= link_to "Edit", edit_admin_album_image_path(@album, image.id)%>
                            <%= link_to "Delete", 
                                admin_album_image_path(@album, image.id),
                                :class => "item-link delete-image",
                                :method => :delete, 
                                :remote => true,
                                :confirm => "Are you sure?" %>
                        </div>  
                        <div class="description clearfix">
                            <p>
                                <%= truncate(image.description, :length => 40) %>
                            </p>
                        </div>
                        <%= label(:albumcover, 'Set as Album Cover ', :style => "float: left;") %>
                        <%= radio_button_tag(:albumcover, :albumcover, false) %>
                    </div>
                </div>
                <% end %>
            <% else %>
                <p class="alert">No images in this album</p>
            <% end %>
        </div>
    </section>
</div> 
```

# mobile - 谷歌查看器移动

> ID：15624539
> 
> 赞同：3
> 
> 时间：2013-03-25T20:52:21.380
> 
> 标签：mobile, google-docs

我正在使用 Google 查看器阅读 PDF。

我在移动应用程序中执行此操作，但无法在页面之间滚动，我单击了下一个或上一个按钮。

有没有办法滚动更改页面添加 get parm 或其他东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T21:26:50.370

如果你的项目 android 那么你可以添加 webview 设置启用 javascript 像

```
WebView webView =(WebView)findViewById(R.id.webView);
webView.getSettings().setJavaScriptEnabled(true);
webView.setWebViewClient(new WebViewClient());
WebSettings webSettings = webView.getSettings();
webSettings.setJavaScriptEnabled(true);
webSettings.setDomStorageEnabled(true);
webView.getSettings().setJavaScriptEnabled(true);
webView.getSettings().setDomStorageEnabled(true); 
```

# javascript - 如何在jQuery中反转高度动画方向？

> ID：15624540
> 
> 赞同：1
> 
> 时间：2013-03-25T20:52:21.673
> 
> 标签：javascript, jquery, jquery-animate

我有 2 个如下所示的 div；

```
<div id="diva">diva</div>
<div id="divb">divb</div> 
```

风格像;

```
div{
    display: block;
    overflow: hidden;
}
#diva{
    background-color: gray;
    width: 200px;
    height: 200px;
}
#divb{
    background-color: blue;
    width: 200px;
    height: 0px;
    margin-top: -40px;
} 
```

div 2 默认高度为 0，但当鼠标进入第一个 div 时会展开。JavaScript 是；

```
$("#diva").mouseenter(function(){
    $("#divb").animate({ height: "40px" });
}).mouseleave(function(){
    $("#divb").animate({ height: "0px" });
}); 
```

一切正常。但我想反转第二个 div 的高度动画方向。现在，在目前的情况下，当鼠标进入第一个 div 时，第二个 div 从上到下滚动，当鼠标离开时，第二个 div 从下到上滚动。但我想扭转这一点。我希望 div 在鼠标进入时从下到上展开，并希望在鼠标离开时从上到下缩小。

我怎样才能做到这一点？**[这](http://jsfiddle.net/a9vpS/1/)**是工作小提琴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:56:20.177

通过嵌套`divb`in `diva`，制作`diva`position`relative`和`divb`position`absolute`并放在底部，就达到了你想要的效果。小提琴： http: [//jsfiddle.net/Jcrbm/](http://jsfiddle.net/Jcrbm/)
CSS：

```
div{
    display: block;
    overflow: hidden;
}
#diva{
    background-color: gray;
    width: 200px;
    height: 200px;
}
#diva{
    background-color: gray;
    width: 200px;
    height: 200px;
    position:relative;
}
#divb{
    background-color: blue;
    width: 200px;
    height: 0px;
    position:absolute;
    bottom:0px;
} 
```

HTML：

```
<div id="diva">diva
    <div id="divb">divb</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:03:50.650

如果您不想修改 HTML，您可以通过`margin-top`同时制作动画来实现`height`：

```
$("#diva").mouseenter(function () {
    $("#divb").animate({
        height: "40px",
        marginTop: -40
    });
}).mouseleave(function () {
    $("#divb").animate({
        height: "0px",
        marginTop: 0
    });
}); 
```

[http://jsfiddle.net/a9vpS/3/](http://jsfiddle.net/a9vpS/3/)

# html - ContentEditable 在设备旋转之前不会滚动

> ID：15624549
> 
> 赞同：1
> 
> 时间：2013-03-25T20:53:00.210
> 
> 标签：html, ios, uiwebview, scroll, contenteditable

我的`UIWebView`.

我的 Html 页面有一个 contenteditable div

有了这个 CSS

```
 #contentEditor {
            height: 98%;
            width: 98%;
            overflow-y: scroll;
            -webkit-overflow-scrolling: touch;
            -webkit-text-size-adjust: none;
        }

body{ min-height: 100%; } 
```

`contentEditor`是可编辑 div 的标识符。

第一次，html页面适合屏幕，

当我将焦点放在视图上时`UIKeyboard`，我会调整视图的大小。现在，我尝试滚动 div 但它不滚动。只有当我再次从纵向变为横向时，它才会滚动。

我该怎么办？

编辑：

我注意到一件事：

*   最初的 UIWebView 大小是 490
*   如果内容适合这个大小并且我打开键盘编辑内容（现在大小为 150），则 div 不会滚动。
*   如果内容不适合这个大小，我打开键盘编辑内容（现在大小为 150），div 将滚动。

*   在第一种情况下，如果我在不滚动的 div 上打开键盘并更改设备旋转两次（最初是横向 --> 纵向 --> 横向），现在 div 将滚动......

我很困惑

# android - 我可以将艺术家图像添加到 Android MediaStore 吗？

> ID：15624550
> 
> 赞同：3
> 
> 时间：2013-03-25T20:53:02.460
> 
> 标签：android, android-image, mediastore

我知道您可以相当轻松地将图像添加到 Image MediaStore，但是是否可以将它们与 Audio MediaStore 中的 ArtistId 关联？我希望下载 Audio MediaStore 中所有歌曲的艺术家图像，并希望利用现有的表。有没有一种好方法可以做到这一点，还是我需要创建自己的 SQL Lite 表来处理这个问题？如果 Audio MediaStore 包含艺术家图像和专辑图像，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-19T14:06:17.497

看看[MediaStore.Audio](http://developer.android.com/reference/android/provider/MediaStore.Audio.html)内容提供者。在这里，您可以在应用程序之间保存和共享有关每个艺术家的图像、音频的信息。因此MediaStore 中的[Artist 表](http://developer.android.com/reference/android/provider/MediaStore.Audio.Artists.html)只有：艺术家姓名、艺术家键、专辑数、曲目数 [检查[MediaStore.Audio.ArtistColumns](http://developer.android.com/reference/android/provider/MediaStore.Audio.ArtistColumns.html) ]。

[一种使用MediaStore.Images.Media](http://developer.android.com/reference/android/provider/MediaStore.Images.Media.html)和[MediaStore.Images.ImageColumns](http://developer.android.com/reference/android/provider/MediaStore.Images.ImageColumns.html)保存图像的干净方式。

更肮脏的方法可能是使用 [MediaStore.Audio.Artists](http://developer.android.com/reference/android/provider/MediaStore.Audio.Artists.html)，其中[ARTIST_KEY](http://developer.android.com/reference/android/provider/MediaStore.Audio.ArtistColumns.html#ARTIST_KEY)您可以将艺术家名称保存为键，而[ARTIST](http://developer.android.com/reference/android/provider/MediaStore.Audio.ArtistColumns.html#ARTIST)您可以保存图像路径。

# php - 基于用户午夜运行查询的 Cron 任务

> ID：15624557
> 
> 赞同：0
> 
> 时间：2013-03-25T20:53:30.850
> 
> 标签：php, time

我有一个每小时运行一次的 php 脚本来连接到数据库，以执行一些应该在用户午夜发生的“夜间重置”。

我知道用户所在的时区，但是不知道如何计算当前午夜的时区。

所以我可以运行类似 ...WHERE timezone='-6' 等的查询...

# relational-database - 计算数据库查询磁盘IO成本

> ID：15624559
> 
> 赞同：1
> 
> 时间：2013-03-25T20:53:38.570
> 
> 标签：relational-database

嘿伙计们，我正在处理数据库课程中的一些问题，我对如何计算使用具有多个条件的选择的查询的成本感到困惑，其中一些条件相等，其他范围。

例如，如果我有一个表 `At(vehicle, place, time)`，并且我有元组 T(At)、块 B(At) 和不同值 V(At, attr) 的车辆、地点和时间，以及我是否有一个索引属性以及该索引是否聚集。

假设我想要一个查询的磁盘 IO 成本，该查询在时间 t1 和 t2 之间在地点 p 提供车辆，所以这就是`σ(place=p^time>t1^time<t2)`我将如何计算它的选择？

`B(At)/V(At, attr)`我知道，如果我有 attr 的聚集索引或者我有非聚集索引，我可以使用简单的相等查询`T(At)/V(At, attr)`。

但是，如何计算选择多个属性的查询的成本？

# vb.net - Visual Basic 中的日期验证

> ID：15624567
> 
> 赞同：0
> 
> 时间：2013-03-25T20:54:29.800
> 
> 标签：vb.net, visual-studio-2010, validation, date

当我以 10/28/2012 格式传递日期时，我试图返回一个真假布尔值，我尝试过 IsDate("10/28/2012") 但是当我这样做时它总是返回假，这应该实际上返回true，有没有人告诉我我做错了什么，我应该在字符串传递到isDate之前做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:02:43.053

你应该使用`Date.TryParse(s as string, result as Date) As Boolean`

`s`您正在测试的字符串在哪里，并且`result`是您想要存储解析日期的日期。如果您不关心日期，并且只想弄清楚该值*是否*是日期，那么您可以给它`new Date`。`True`如果解析成功或`False`失败，该函数将返回。

# tcp - Erlang：{packet,N} 选项适用于 N = 0 但不适用于 1、2、4？

> ID：15624569
> 
> 赞同：1
> 
> 时间：2013-03-25T20:54:35.510
> 
> 标签：tcp, erlang, client-server, option, packet

以下代码适用`{packet,0}`于函数调用中的选项，`gen_tcp:connect()`但不适用于 1 、 2 和 4 （尽管我只测试了 4 并且我假设 1 和 2 也不起作用）。我的问题是为什么不使用一个而不是另一个重要？基本上，Erlang 文档没有详细解释有关数据包选项的主题，Joe Armstrong 的 Programming Erlang 也没有提供任何详细信息；他只是解释说数据包没有按顺序重新组装，尽管我一直认为 tcp 数据包是在发送时收到的，这与 UDP 不同。我有一个有趣的注意事项是，[此页面](https://stackoverflow.com/questions/15512689/erlang-converting-tcp-sent-string-into-its-proper-form-e-g-somestring-to)上的客户端-服务器`{packet,4}`作为选项可以正常工作，并且与下面的代码非常相似。这是服务器外壳输出`{packet,4}`下面代码中使用的选项。

```
Erlang R16A (erts-5.10) [smp:8:8] [async-threads:10]

Eshell V5.10  (abort with ^G)
1> cd("c:/erlang").
c:/erlang
ok
2> c(cp3).
{ok,cp3}
3> cp3:server().
Started Server:
<0.41.0>
Accept Server:
Pid <0.43.0>
Connection accepted 
Accept Server:
Loop Server:
Error on socket #Port<0.2256> reason: einval 
```

这是客户端外壳输出。

```
Erlang R16A (erts-5.10) [smp:8:8] [async-threads:10]

Eshell V5.10  (abort with ^G)
1> cd("c:/erlang").
c:/erlang
ok
2> cp3:client().
exit
3> 
```

这是使用的代码，

```
-module(cp3).
-export([client/0, server/0,start/0,accept/1,enter_loop/1,loop/1]).

client() ->
    {ok, Socket} =  gen_tcp:connect("localhost", 4001,[binary, {packet, 4}]),
    ok = gen_tcp:send(Socket, "packet"),
    receive
        {tcp,Socket,String} ->
            io:format("Client received = ~p~n",[String]),       
            io:format("Client result = ~p~n",[String]),
            gen_tcp:close(Socket)
        after 1000 ->
            exit        
    end.

server() -> 
    Pid = spawn(fun()-> start() end),
    Pid.

start() ->  
    io:format("Started Server:~n"),
    {ok, Socket} = gen_tcp:listen(4001, [binary, {packet, 4},{reuseaddr, true},{active, false}]),
    accept(Socket).

accept(ListenSocket) ->
    io:format("Accept Server:~n"),
    case gen_tcp:accept(ListenSocket) of
        {ok, Socket} ->
            Pid = spawn(fun() ->
                io:format("Connection accepted ~n", []),
                enter_loop(Socket)
            end),
            io:format("Pid ~p~n",[Pid]),
            gen_tcp:controlling_process(Socket, Pid),
            Pid ! ack,
            accept(ListenSocket);
        Error ->
            exit(Error)
    end.

enter_loop(Socket) ->
    %% make sure to acknowledge owner rights transmission finished
    receive ack -> ok end,
    loop(Socket).

loop(Socket) ->   
    io:format("Loop Server:~n"),
    case gen_tcp:recv(Socket, 6) of
    {ok, Data} ->  
        case Data of
            <<"packet">> ->                 
                io:format("Server replying = ~p~n",[Data]),   
                gen_tcp:send(Socket, Data),
                loop(Socket)                  
        end;
    {error, Reason} ->      
        io:format("Error on socket ~p reason: ~p~n", [Socket, Reason])          
    end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:39:18.993

您的代码几乎没问题，只需在循环（套接字）中修改该行

> case gen_tcp:recv(Socket, 6) of

经过

> case gen_tcp:recv(Socket, 0) of

见文档：

> **recv(Socket, Length) -> {ok, Packet} | {error, Reason} recv(Socket,Length, Timeout) -> {ok, Packet} | {错误，原因}**
> 
> 类型： Socket = socket() 长度 = integer() >= 0 Timeout = timeout() Packet = string() | 二进制（） | HttpPacket 原因 = 关闭 | inet:posix() HttpPacket = term() 参见 erlang:decode_packet/3 中对 HttpPacket 的描述。
> 
> 该函数以被动模式从套接字接收数据包。关闭的套接字由返回值 {error, closed} 指示。
> 
> **Length 参数仅在套接字处于原始模式时才有意义，表示要读取的字节数。如果 Length = 0，** 则返回所有可用字节。如果 Length > 0，则返回正好 Length 字节，否则会出错；当套接字从另一端关闭时，可能会丢弃少于 Length 字节的数据。
> 
> 可选的 Timeout 参数以毫秒为单位指定超时。默认值为无穷大。

通过此修改，它可以工作，但是由于客户端在每次调用后关闭套接字，您会收到一条错误消息，我不确定从客户端关闭套接字是否有用。您可以通过以下方式修改客户端来更改此行为：

```
client() ->
    {ok, Socket} =  gen_tcp:connect("localhost", 4001,[binary, {packet, 4}]),
    ok = gen_tcp:send(Socket, "packet"),
    receive
        {tcp,Socket,String} ->
            io:format("Client received = ~p~n",[String]),       
            io:format("Client result = ~p~n",[String])
            %gen_tcp:close(Socket)
        after 1000 ->
            exit        
    end. 
```

# solr - 我想用 Solr/Lucene 构建一个搜索引擎

> ID：15624572
> 
> 赞同：2
> 
> 时间：2013-03-25T20:54:41.603
> 
> 标签：solr, lucene, search-engine

我想用 Solr/Lucene 构建一个搜索引擎。我应该使用 Apache Solr 3 还是 4（我认为在这种情况下 Solr=Lucene）？此外，我有 Lucene in Action, 2nd Edition (for Lucene 3) 从 2010 年开始。这本书已经过时了吗？有哪些适合初学者的书推荐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:30:14.343

**1）我应该使用 Apache Solr 3 还是 4**

始终使用最新的稳定版本。最新版本有很多性能改进。

**2）我认为在这种情况下 Solr=Lucene**

不，两者是不同的。Solr 是 Lucene 的 HTTP 包装器。Solr 就像一个使用 Lucene 构建的具有搜索功能的 Web 应用程序，并且[具有许多附加功能。](http://www.lucenetutorial.com/lucene-vs-solr.html)

**3) 我有 Lucene in Action, 2nd Edition (for Lucene 3) 从 2010 年开始。这本书已经过时了吗？**

我遵循同一本书。这还不算过时。它为您提供了对整个框架的一个不错的概述（实际上是专家级别）。

**为了让自己保持最新状态，你必须做的是**

a) 探索[Lucene 4 的新特性。](http://bed-con.org/images/files/bed2011/bed2011-whatsnewinlucene4.pdf)尝试在网络上搜索 Lucene 4 与 Lucene 3 的文章。

b) 关注 Lucene in Action 2 的[作者博客](http://blog.mikemccandless.com/)。

# c# - 在表单之间发送数据。（标签 ID 数据绑定？）

> ID：15624577
> 
> 赞同：0
> 
> 时间：2013-03-25T20:54:52.900
> 
> 标签：c#, winforms, visual-studio-2010

我从数据库中获取对象（人员）列表，并在组框上的表单中动态生成带有每个人员对象名称的标签列表。当我单击一个标签时，我创建了一个具有对象 People 的所有属性的新表单（我向子表单发送一个对象 People）。在哪里保留 People 对象的 id（来自数据库）或列表中的 id？现在，我将 id 保留在标签中。TabIndex 但不太好。

在这种情况下你会怎么做？

部分回复后编辑：感谢大家的回复。

（好吧，我看到[实际上 WPF 来取代 WinForms](https://stackoverflow.com/questions/588660/what-is-wpf-and-how-does-it-compare-to-winforms/ "实际上 WPF 来取代 WinForms")，所以我最好继续使用 WPF。）

我不需要在标签中保留完整对象，而只需要他的 ID（此对象可能具有内部、其他数据库对象关联）。为什么我需要在标签中保留完整对象？我不希望这样！
到目前为止，我将 ID 保留在 tabIndex 中（因为它是一个 int），我认为这种方式更好，因为它不使用装箱和拆箱。

这个问题使问题的一部分更普遍。
**如何在表单之间发送数据？** 您是否允许子表单访问存储库？（我认为在表单之间发送存储库并不好。）但是如果我需要更改子表单中的数据（人表单=它仅为一个人打印数据），那么我需要发送一个“保存更改”semnal （通过一个事件）到我的主要形式。所以这就像两种形式之间的双向关联。这样好吗？

你有一本关于 winforms 的书（表单之间的数据）或 c# WinFroms 中的一个真实应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:04:36.860

您可以将 Id 或 People 对象存储在`Label.Tag`.
然后，要检索它，您可以使用

```
var person = Label.Tag as People 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:05:46.250

通常开发人员依赖于控件的 Tag 属性，尽管我发现这是一个非常脆弱的解决方案，因为您将来可能希望将该属性用于其他用途。一个可能的简单解决方案是命名您的标签并将 { ControlName, ID } 对存储在哈希表/字典中。另一种我认为更好的解决方案是将成对的 { Control Reference, ID } 存储在 Hashtable / Dictionary 中。这应该会使事情变得更容易，因为您不必为标签生成名称。

下面是一个示例代码。

```
var peopleDictionary = new Dictionary<Label, int>();

foreach ( var person in people )
{
    var control = new Label();

    peopleDictionary.Add(person, person.ID);

    groupBox.Controls.Add(control);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T21:04:11.677

`Tag`WinForms中不是还有一个属性吗？这对于存储此类信息很方便。

# python - Django 1.4：使用 django.template.loader.render_to_string 的 DeprecationWarning

> ID：15624581
> 
> 赞同：0
> 
> 时间：2013-03-25T20:55:02.090
> 
> 标签：python, django, warnings, deprecated

```
Django version 1.4.3

class FooTestCase(TestCase):

    def test_deprecation_warning(self):

        from django.template.loader import render_to_string
        tpl = render_to_string('template.html') 
```

在运行时，这会生成一个`DeprecationWarning`

```
C:\Python26\lib\site-packages\django\views\generic\simple.py:8: DeprecationWarning: Function-based generic views have been deprecated; use class-based views instead. 
```

为什么？迁移页面中没有提到它[https://docs.djangoproject.com/en/1.3/topics/generic-views-migration/](https://docs.djangoproject.com/en/1.3/topics/generic-views-migration/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T12:01:15.480

*您可以通过 Python警告控制*命令行选项获取此警告的回溯，`-W`以轻松查看使用已弃用的`django.views.generic.simple`.

```
python -W error:::django.views.generic.simple manage.py test 
```

对于 Django 1.4 的简单 template.html，您的测试用例不会报告任何 DeprecationWarning。您可能使用了一个过时的模板标签来导入这个不推荐使用的模块。

[Python 警告控制](http://docs.python.org/2/using/cmdline.html#cmdoption-W) 和 DeprecationWarning 的更多信息 在我的[回答](https://stackoverflow.com/a/16457346/448474)中。

# forms - Symfony 角色作为实体表单问题

> ID：15624583
> 
> 赞同：0
> 
> 时间：2013-03-25T20:55:06.303
> 
> 标签：forms, symfony, doctrine, entity, symfony-2.1

我有一个自定义处理程序，用于像实体这样的角色和多对多关系，如下所示：

```
<?php

namespace Digital\UserBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Security\Core\Role\RoleInterface;

    /**
     * Role Entity
     *
     * @ORM\Entity
     * @ORM\Table( name="app_roles" )
     */
    class Role implements RoleInterface
    {

        /**
         * @ORM\Id
         * @ORM\Column(type="integer", name="id")
         * @ORM\GeneratedValue(strategy="AUTO")
         */
        private $id;

        /**
         * @ORM\Column(type="string", name="name", unique=true, length=100)
         */
        private $role;

        /**
         * @var Role
         * @ORM\ManyToOne(targetEntity="Role")
         * @ORM\JoinColumn(name="parent_id", referencedColumnName="id")
         **/
        private $parent;

        /**
         * @param $role
         */
        public function __construct($role)
        {
            $this->role = (string)$role;
        }

        /**
         * @return string
         */
        public function __toString()
        {
            return $this->role;
        }

        /**
         * @param $role
         */
        public function setRole($role)
        {
            $this->role = $role;
        }

        /**
         * @return string
         */
        public function getRole()
        {
            return $this->role;
        }

        /**
         * @param Role $parent
         *
         * @return $this
         */
        public function setParent(Role $parent)
        {
            $this->parent = $parent;
            return $this;
        }

        /**
         * @return Role
         */
        public function getParent()
        {
            return $this->parent;
        }

        /**
         * @return bool
         */
        public function hasParent()
        {
            return null !== $this->parent;
        }

    } 
```

然后我将我的用户对象配置如下：

```
<?php
// src/Acme/UserBundle/Entity/User.php

namespace Digital\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUserOld;
use FOS\UserBundle\Model\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\Collection;
use Doctrine\Common\Collections\ArrayCollection;
use FOS\MessageBundle\Model\ParticipantInterface;
use Symfony\Component\HttpFoundation\File\File;

use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\Validator\Constraints\Email;
use Symfony\Component\Validator\Constraints\NotBlank;

/**
 * @ORM\Entity
 * @ORM\Table(name="app_users")
 * @ORM\Entity(repositoryClass="Digital\UserBundle\EntityRepository\UserRepository")
 */
class User extends BaseUser implements ParticipantInterface
{
    // properties...

    /**
     * @ORM\ManyToMany(targetEntity="Role", indexBy="name")
     * @ORM\JoinTable(name="app_users_roles")
     */
    protected $roles;

    /**
     * Construct.
     */
    public function __construct()
    {
        parent::__construct();

        $this->roles       = new ArrayCollection;
    }

    /**
     * @return Role[]
     */
    public function getRoles()
    {
        $roles   = $this->getRolesCollection()->toArray();
        $roles[] = $this->getDefaultRole();
        return $roles;
    }

    /**
     * @param $role
     *
     * @return bool
     */
    public function hasRole($role)
    {
        if ($role instanceof Role) {
            $role = $role->getRole();
        }

        foreach ($this->getRoles() as $roleEntity) {
            if ($roleEntity->getRole() === $role) {
                return true;
            }
        }

        return false;
    }

    /**
     * @param $role
     *
     * @return self
     * @throws \InvalidArgumentException
     */
    public function addRole($role)
    {
        $this->normaliseRole($role);

        if ($this->hasRole($role)) {
            throw new \InvalidArgumentException("Role $role is already applied to this " . get_class($this));
        }

        $this->getRolesCollection()->add($role);

        return $this;
    }

    /**
     * @param Role|string $role
     *
     * @return self
     */
    public function removeRole($role)
    {
        $this->normaliseRole($role);
        $this->getRolesCollection()->removeElement($role);
        return $this;
    }

    /**
     * @param Role[]|string[] $roles
     *
     * @return self
     */
    public function setRoles(array $roles)
    {
        $this->getRolesCollection()->clear();

        foreach ($roles as $role) {
            $this->addRole($role);
        }

        return $this;
    }

    /**
     * {@inheritdoc}
     */
    protected function getRolesCollection()
    {
        return $this->roles;
    }

    /**
     * {@inheritdoc}
     */
    protected function getDefaultRole()
    {
        return new Role(parent::ROLE_DEFAULT);
    }

    /**
     * @param $role
     *
     * @throws \InvalidArgumentException
     */
    protected function normaliseRole(&$role)
    {
        if (is_string($role)) {
            $role = new Role($role);
        }

        if (!$role instanceof Role) {
            throw new \InvalidArgumentException('Role must be either a Role Entity or a string.');
        }
    }
} 
```

现在我的问题是如何配置我的表单以根据界面接受对象数组？

我是否使用集合/实体/选择？一切似乎都失败了……

```
 $builder->add('roles', 'entity', array(
        'class' => 'Digital\UserBundle\Entity\Role',
        'by_reference' => true,)
    ); 
```

> 可捕获的致命错误：传递给 Digital\UserBundle\Entity\User::setRoles() 的参数 1 必须是数组类型，给定对象

任何提示将不胜感激......

这也不起作用：

```
 $builder->add('roles', 'collection', array(
        'type' => new RoleType(),
        'allow_add'    => true,
        'allow_delete' => true,
        'by_reference' => false,
    )); 
```

或者：

```
 $builder->add('roles', 'collection', 
        array( 'options' => array(
            'data_class' => 'Digital\UserBundle\Entity\Role'),
            'allow_add' => true, 
            'allow_delete' => true, 
            'by_reference' => false)); 
```

我可以让它工作的壁橱是这样的：

```
 public function addRole($role)
    {
        $this->normaliseRole($role);

//        if (!$this->roles->contains($role)) {
        if (!$this->hasRole($role)) {
            $this->getRolesCollection()->add($role);
        }

        return $this;
    }

        $builder->add('roles', 'collection', array( 'options' => array('data_class' => 'Digital\UserBundle\Entity\Role'),
            'allow_add' => true, 'allow_delete' => true, 'by_reference' => false)); 
```

这样我就可以毫无错误地提交表单，但是任何更改都失败了，因为我必须添加级联持久性，并且这个角色已经在角色表中，并且学说正试图再次插入它...... ;(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:59:06.163

对此的回答是：

```
 $builder->add('rolesCollection', 'entity', array(
        'multiple'     => true,
        'expanded'     => true,
        'by_reference' => false,
        'label' => 'Roles',
        'class'        => 'Digital\UserBundle\Entity\Role',
    )); 
```

并玩'rolesCollection'而不是'roles'。

```
/**
 * @param Collection $collection
 */
public function setRolesCollection($collection)
{
    $this->setRoles($collection->toArray());

    return $this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:11:25.193

您是否尝试过使用该`collection`类型？`entity`类型意味着**一个**相关的对象。

[http://symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)

# excel - Excel 宏导致文件重新打开

> ID：15624592
> 
> 赞同：0
> 
> 时间：2013-03-25T20:55:28.053
> 
> 标签：excel, vba

我为工作而放在一起的宏有一个奇怪的问题。

背景故事，我基本上设计了一个宏来在 X 时间后打开受保护的工作簿后关闭它。它是一个共享文档，当人们打开它时，他们经常忘记关闭文档，将其锁定以防止其他人使用它。

所以我拿了一些其他的宏来创建一个计时器。

```
Sub Start_Timer()
'BASIC UP COUNTER
Application.OnTime Now() + TimeValue("00:00:01"), "CheckStatus"
End Sub

Sub CheckStatus()
Dim ws As Worksheet
For Each ws In Worksheets

If ws.Range("IV1").Value > 60 Then
'IF IDLE LONGER THAN VALUE ABOVE, RUN THE FOLLOWING
Application.DisplayAlerts = False 'WORKS TO DISABLE ALERT PROMPT
ThisWorkbook.Close (False) 'CLOSE FILE WITHOUT SAVING
Application.Quit
Application.DisplayAlerts = True 'RESETS DISPLAY ALERTS
End Sub    

Else
'ADD 1 TO COUNTER
ws.Range("IV1").Value = ws.Range("IV1").Value + 1
End If
Next
Start_Timer
End Sub 
```

在本工作簿中

```
Private Sub Workbook_Open()
Dim ws As Worksheet
MsgBox ("This Worksheet has a 15 min timer")

Start_Timer
For Each ws In Worksheets
'Columns("IV:IV").Hidden = True

ws.Range("IV1").Value = 1
Next
End Sub

Private Sub Workbook_SheetSelectionChange(ByVal Sh As Object, ByVal Target As Range)
Dim ws As Worksheet
For Each ws In Worksheets
ts.Range("IV1").Value = 1
Next
End Sub

Private Sub Workbook_BeforeClose(Cancel As Boolean)
Application.DisplayAlerts = False 'WORKS TO DISABLE ALERT PROMPT
ThisWorkbook.Close (False) 'CLOSE FILE WITHOUT SAVING
Application.Quit
Application.DisplayAlerts = True 'RESETS DISPLAY ALERTS
End Sub 
```

在大多数情况下，它都有效。但是，我宁愿消除“Application.Quit”之类的东西。我遇到的问题是，当我消除该行时，工作簿在手动关闭它或尝试手动退出 excel 后立即重新打开。

我认为这可能与不断更改 1 个单元格的值有关（很远，所以没有人看到它）并在不保存的情况下退出。

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:10:00.567

也许你有错字？：

```
Dim ws As Worksheet
For Each ts In Worksheets
         ^ws ??
If ws.Range("IV1").Value > 60 Then 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:22:18.773

你知道你可以给 Excel 文件一个共享状态，以便多个用户可以同时访问它吗？

例如： http: [//office.microsoft.com/en-in/excel-help/share-a-workbook-HP005202595.aspx](http://office.microsoft.com/en-in/excel-help/share-a-workbook-HP005202595.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T23:25:01.257

添加一个全局变量来存储上次安排的 OnTime() 时间值并调整您的计时器子：

```
Dim lastTimer As Variant

Sub Start_Timer()
    'BASIC UP COUNTER
    lastTimer = Now() + TimeValue("00:00:01")
    Application.OnTime lastTimer, "CheckStatus"
End Sub 
```

然后将此添加到 Workbook_BeforeClose 事件中：

```
Application.OnTime lastTimer, "CheckStatus", , False 
```

这将取消 Application.OnTime() 的最后一次预定调用。

# model - 在 Ember 中将模型属性插入到 Img 元素 URL

> ID：15624593
> 
> 赞同：9
> 
> 时间：2013-03-25T20:55:32.600
> 
> 标签：model, ember.js, handlebars.js

我有一个带有`image_id`属性的模型。我有一个包含图像元素的模型视图。我需要将 id 插入图像元素的`src`属性中以完成图像的 URL，以便我有效地执行此操作：

```
<img src="news + newsItem.imageID + .jpg"></img> 
```

我的第一次尝试使用了 Handlebars 助手：

```
<img src="news{{newsImageURL newsItem.imageID}}.jpg"></img> 
```

但这也在它周围插入了 Metamprph 脚本标签：

```
<img url="&lt;script id='metamorph-10-start' type='text/x-placeholder'&gt;&lt;/script&gt;news/7.jpg&lt;script id='metamorph-10-end' type='text/x-placeholder'&gt;&lt;/script&gt;" alt="" class="content-image news-media" /></a> 
```

所以我看过 using `bindAttr`，但是因为我需要转换 image_id 值（通过预先和附加路径的其余部分），这似乎也不是一个解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-25T21:02:02.607

有2种可能：

1-将图像路径声明为**模型上的计算属性**。如果您不喜欢这样，您也可以在支持此模板**的 ObjectController 中声明它：**

模板：

```
// until 1.0 RC7
<img {{bindAttr src="newsItem.imagePath"}}></img> 
// from 1.0 final (the above one is deprecated)
<img {{bind-attr src=newsItem.imagePath}}></img> 
```

该模型：

```
App.NewsItem = DS.Model.extend({
  imageID: DS.attr('string'),
  imagePath: function() {
    return "/assets/news/"+this.get("imageID")+".jpg";
  }.property('imageID')
}); 
```

2-如果您不需要 1 中的绑定（我猜您的 id 不会改变）并使用 `unbound helper`，这不会导致脚本标签：

```
<img src="news{{unbound newsItem.imageID}}.jpg"></img> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:57:59.293

您可以让 bindAttr 引用一个计算属性并在那里构建您的字符串。

# excel - Excel超链接到word中的特定页面

> ID：15624596
> 
> 赞同：1
> 
> 时间：2013-03-25T20:55:52.733
> 
> 标签：excel

谁能解释一下我们如何将excel单元格中的超链接添加到word文档中的特定页面。

例如：我的 excel 中有 3 列，即 C1、C2 和 C3。我有一个名为“System_Ref.docx”的 Word 文档。

当用户点击 C1 时，`System_Ref.docx`应该打开页码 10。同理，当用户点击 C2 时，`System_Ref.docx`应该打开页码 18...等等。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:17:07.310

答案是不能像这样完成。有相当多的问题被问到同样的程度。但即使在官方 MS 网站上，您也找不到相应的开关：http: [//office.microsoft.com/en-us/word-help/command-line-switches-for-microsoft-office-word-2007- HP010164010.aspx](http://office.microsoft.com/en-us/word-help/command-line-switches-for-microsoft-office-word-2007-HP010164010.aspx)

命令行方式是预先在您的 Word 文档中添加书签，并在打开文件时触发宏。然而，对于随机 Word 文档或来自外部来源的文档，这并不是真正的解决方案......

或者，您可以在 Excel 中编写一个宏，使用单元格中的一些设置打开 Word 文档，然后使用 a`.PageScroll 10`滚动到第 10 页。

# memory - Cuda 合并内存负载行为

> ID：15624605
> 
> 赞同：2
> 
> 时间：2013-03-25T20:56:22.033
> 
> 标签：memory, cuda, load

我正在使用一个结构数组，并且我希望每个块都将共享内存加载到数组的一个单元格中。例如：块 0 将在共享内存中加载数组 [0]，块 1 将加载数组 [1]。

为了做到这一点，我将结构数组转换为 float* 以尝试合并内存访问。

我有两个版本的代码

**版本 1**

```
__global__ 
void load_structure(float * label){

  __shared__ float shared_label[48*16];
  __shared__ struct LABEL_2D* self_label;

  shared_label[threadIdx.x*16+threadIdx.y] = 
          label[blockIdx.x*sizeof(struct LABEL_2D)/sizeof(float) +threadIdx.x*16+threadIdx.y];
  shared_label[(threadIdx.x+16)*16+threadIdx.y] = 
          label[blockIdx.x*sizeof(struct LABEL_2D)/sizeof(float) + (threadIdx.x+16)*16+threadIdx.y];
  if((threadIdx.x+32)*16+threadIdx.y < sizeof(struct LABEL_2D)/sizeof(float))  {
    shared_label[(threadIdx.x+32)*16+threadIdx.y] = 
          label[blockIdx.x*sizeof(struct LABEL_2D)/sizeof(float) +(threadIdx.x+32)*16+threadIdx.y];
   }

  if(threadIdx.x == 0){
    self_label = (struct LABEL_2D *) shared_label;
  }
  __syncthreads();
  return;
}

...

dim3 dimBlock(16,16);
load_structure<<<2000,dimBlock>>>((float*)d_Label; 
```

*计算时间：0.740032 ms*

**版本 2**

```
__global__ 
void load_structure(float * label){

  __shared__ float shared_label[32*32];
  __shared__ struct LABEL_2D* self_label;

  if(threadIdx.x*32+threadIdx.y < *sizeof(struct LABEL_2D)/sizeof(float))
    shared_label[threadIdx.x*32+threadIdx.y] = 
              label[blockIdx.x*sizeof(struct LABEL_2D)/sizeof(float)+threadIdx.x*32+threadIdx.y+];

  if(threadIdx.x == 0){
      self_label = (struct LABEL_2D *) shared_label;
    }
  __syncthreads();
  return;
}

dim3 dimBlock(32,32);
load_structure<<<2000,dimBlock>>>((float*)d_Label); 
```

*计算时间：2.559264 ms*

在这两个版本中，我都使用了 nvidia 分析器，全局负载效率为 8%。

我有两个问题： 1 - 我不明白为什么会有时间差异。2 - 我的通话是否合并？

我正在使用具有 2.1 计算能力的视频卡（32 线程/环绕）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:14:12.317

您的全局负载未合并。8% 是相当低的，你能做的最坏的可能是 3%。

我认为主要原因是您基于 threadIdx.x 和 threadIdx.y 进行索引的方式。让我们考虑来自第二个内核的这行代码（第一个内核有类似的问题）：

```
shared_label[threadIdx.x*32+threadIdx.y] =  label[blockIdx.x*sizeof(struct LABEL_2D)/sizeof(float)+threadIdx.x*32+threadIdx.y]; 
```

特别是，考虑这个索引：

```
threadIdx.x*32+threadIdx.y 
```

CUDA 扭曲按 X、Y、Z 的顺序分组。这意味着扭曲中快速变化的索引将倾向于首先在 X 索引上，然后在 Y 上，然后在 Z 上。因此，例如，如果我有一个 16x16 线程块，则第一个扭曲将具有 threadIdx.x 跨越的线程从 0 到 15，threadIdx.y 仅跨越 0 到 1。在这种情况下，相邻线程大多具有相邻的 threadIdx.x 索引。

您的代码的结果是由于您的索引而破坏了合并。如果您可以重组加载和存储以使用这种类型的索引：

```
threadIdx.y*32+threadIdx.x 
```

您会突然看到全局负载效率的显着提高。（您的共享内存使用情况也可能更好。）

我知道你有两个问题，当我想到第一个问题时我很困惑。你告诉我们“计算时间”大约是。第二个实现的时间长了 4 倍，但大概您指的是`compute_interpolation`内核，您根本没有显示任何细节，除了在第二种情况下您启动的线程数是 4 倍。或许这里并不神秘。您没有显示任何代码。并且使用内核在共享内存中加载一堆东西然后退出也没有任何意义。共享内存内容不会从一个内核调用持续到下一个内核调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:12:39.143

我解决了我的问题，之前版本的访问内存模式不正确。在阅读了 cuda 最佳实践指南的第 6.2.1 段后，我发现如果它们对齐，访问会更快。

为了对齐我的访问模式，我在结构中添加了一个“假”变量，以便具有可以除以 128 的结构大小（现金大小行）。

通过这种策略，我获得了良好的性能：为了将 2000 结构加载到 2000 块中，只需要 0.16 毫秒。

这是代码的版本：

```
struct TEST_ALIGNED{
  float data[745];
  float aligned[23];
}; 

__global__
void load_structure_v4(float * structure){

  // Shared structure within a block
  __shared__ float s_structure[768];
  __shared__ struct TEST_ALIGNED * shared_structure;

  s_structure[threadIdx.x] = 
    structure[blockIdx.x*sizeof(struct TEST_ALIGNED)/sizeof(float) + threadIdx.x];
  s_structure[threadIdx.x + 256] = 
    structure[blockIdx.x*sizeof(struct TEST_ALIGNED)/sizeof(float) + threadIdx.x + 256];
  if(threadIdx.x < 745)
        s_structure[threadIdx.x + 512] = 
            structure[blockIdx.x*sizeof(struct TEST_ALIGNED)/sizeof(float) +    threadIdx.x + 512];
  if(threadIdx.x == 0)
       shared_structure = (struct TEST_ALIGNED*) s_structure;

  __syncthreads();

    return;
}

dim3 dimBlock(256);
load_structure_v4<<<2000,dimBlock>>>((float*)d_test_aligned); 
```

我仍在寻找优化，如果找到了我会在这里发布。

# python - 在循环中修改 List 元素

> ID：15624610
> 
> 赞同：1
> 
> 时间：2013-03-25T20:57:00.857
> 
> 标签：python, list, loops, element

是否可以在循环中更新/修改列表元素/项目。在这里我必须修改项目`t`

```
n_wk=[1,2,3,2,3,4,2,3]
t=['a','a','a','a','a','a','a','a']

for i in range(len(n_wk)):
    if i==0:
        continue
    if n_wk[i]<n_wk[i-1]:
        if t[i]=='a':
            t[i]='b'
        elif t[i]=='b':
            t[i]='c'
    if n_wk[i]>n_wk[i-1]:
       t[i]=t[i-1] 
```

我期待输出`t = ['a', 'a', 'a', 'b', 'b', 'b', 'c', 'c']`。但是，输出结果是`t=['a', 'a', 'a', 'b', 'b', 'b', 'b', 'b']`. 似乎`list t`没有在循环中更新。

我们不能在循环中更新列表的项目/元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-10T23:37:48.140

您的列表`t`确实正在修改：

```
# t before loop
['a', 'a', 'a', 'a', 'a', 'a', 'a', 'a']
# t after loop
['a', 'a', 'a', 'b', 'b', 'b', 'b', 'b'] 
```

但是，您的代码中的轻微更改将为您提供您正在寻找的结果：

```
for i in range(len(n_wk)):
    if i == 0:
        continue
    if n_wk[i] < n_wk[i-1]:
        if t[i-1] == 'a': #changed from t[i]
            t[i] = 'b'
        elif t[i-1] == 'b': #changed from t[i]
            t[i] = 'c'
    if n_wk[i] > n_wk[i-1]:
       t[i] = t[i-1]

print(t)
# ['a', 'a', 'a', 'b', 'b', 'b', 'c', 'c'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T00:10:10.077

这是一个不使用索引循环并且不需要`t`以`'a'`s 开头的方法：

```
n_wk = [1,2,3,2,3,4,2,3]
t = []

n_prev = 0
t_prev = 'a'

for n in n_wk:
    t_new = t_prev
    if n < n_prev:
        if t_prev == 'a':
            t_new = 'b'
        elif t_prev == 'b':
            t_new = 'c'
    t.append(t_new)
    n_prev = n
    t_prev = t_new

print(t) 
```

# javascript - 使用jQuery比较服务器时间和当前时间

> ID：15624613
> 
> 赞同：1
> 
> 时间：2013-03-25T20:57:15.220
> 
> 标签：javascript, jquery, vbscript

我正在尝试将 VBScript 转换为 Javascript，使用 jQuery 比较服务器时间和当前时间。

```
If Not IsDate(frmLogDetail.hidServerTime.value) Then
frmLogDetail.hidServerTime.value = Now
End If
frmLogDetail.hidTimeOffset.value = DateDiff("s", Time, TimeValue(frmLogDetail.hidServerTime.value) ) 
```

这就是我所拥有的：

```
var hdServerTime = $("#hidServerTime");

if (!IsDate(hdServerTime)) {
   hdServerTime.val(new Date());
   alert(hdServerTime.val());
}

var dateSelected = $("#hidServerTime").val();
var hdTimeOffset = $("#hidTimeOffset").val();
hdTimeOffset = DateDiff(Date.now, new Date(dateSelected));

function DateDiff(first, second) {
            return (second - first) / (1000 * 60 * 60 * 24)
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:27:37.453

```
var hdTimeOffset = $("#hidTimeOffset").val();
hdTimeOffset = …; 
```

这不是您使用 jQuery 分配值的方式。这段代码只是分配给变量`hdTimeOffset`，这不是对 DOM 的魔法引用。相反，使用

```
var hdTimeOffset = …;
$("#hidTimeOffset").val(hdTimeOffset); 
```

（请参阅[jQuery 文档`.val()`](http://api.jquery.com/val/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:25:55.613

JavaScript 是一种客户端脚本语言，因此除非您使用 PHP 等服务器端脚本支持它，否则您将无法访问服务器时间。 `Date.now()`将为您提供自 1970 年 1 月 1 日 00:00:00 UTC 以来的客户端时间（以毫秒为单位）。

我发现您的代码令人困惑（我假设您正在执行 PHP 实现？隐藏的 div/span？）所以我只想回答我会做什么。

获取服务器端时间的一种方法是使用 PHP 为页面提供服务，并在实际运行 Javascript 客户端之前在 Javascript 中全局定义变量。`<head>`你会在你的页面标签中做这样的事情（例如） ：

```
<?php 
    echo "<script type='text/javascript'> 
         var servertime = ".time()."; 
         </script>" 
?> 
```

然后在 Javascript 中，您将拥有与以下内容`servertime`进行比较的变量：

```
//Get time difference in milliseconds
var timeDifference = Date.now() - servertime; 
```

这个实现很好，因为你根本不需要 jQuery，而且你没有处理一些在页面上隐藏元素等 SEO 问题......

# c# - 在 c# 中，我如何通过 SSH2 使用 FTP，最好没有第三方代码

> ID：15624619
> 
> 赞同：1
> 
> 时间：2013-03-25T20:57:42.850
> 
> 标签：c#, .net, ftp

我正在编写一个 C# 应用程序，每当我尝试使用 FtpWebRequest 或 WebClient 进行任何 FTP 操作时，我总是得到“System.Net.WebException：底层连接已关闭：服务器违反了协议。” 不过，与 FTP 客户端应用程序（隧道）连接效果很好。在连接日志中，Tunnelier 提到了“开始新的 SSH2 会话”和“连接到 SSH2 服务器”等。此外，我在谷歌上发现的一些古老线程中读到了 SSH 导致问题的提及，所以我认为这就是我遇到的问题。

我真的宁愿不使用第三方的东西，但如果我必须我想我会的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:03:43.050

您将 FTP（FTPS）和 SFTP 混合在一起。它们是完全不同的一组协议。SFTP 不是基于 SSH 的普通 FTP，它是另一种协议，您需要一个侧库来使用它。

# html - 在 CSS 中浮动一个 DIV

> ID：15624620
> 
> 赞同：0
> 
> 时间：2013-03-25T20:57:51.653
> 
> 标签：html, css

我有以下网址：[网站](http://www.interfaithmedical.com/Portal/test.php?zh=loadPage)

我真正想做的是像现在一样将 Weather DIV 浮动在页面顶部，但是当我展开或折叠它时，它只是浮​​动在顶部并且不会将任何内容向下推。我如何实现它？

我的天气 DIV CSS：

```
#weather {
    margin: 0 auto;
    padding: 0;
    width: 177px;
    font: 75%/120% Arial, Helvetica, sans-serif;
    top: 0;
    position: relative;
    z-index: 999999999;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:59:09.783

绝对定位

```
#weather {
    position: absolute;
    left: 50%;
    width: 177px;
    margin-left: -88px; /* 50% of the width */
} 
```

并给你的身体一个`padding-top`在你当前包装的高度

```
body {
    padding-top: 50px; /* or so */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:08:16.683

最好将 '#weather' 元素放在 dom 的 '#wrapper .shell' 区域内，并给它一个 'position: absolute' 属性。

'position: absolute' 基本上告诉浏览器忽略元素的高度，而是将所有显示责任交给您为其定义的 css。

此外，您可以通过将“#weather”宽度设置为 990 像素（网站框架的宽度）来使其看起来更好看。这也会将黑条扩展到您网站框架的宽度。这将开始为你清理东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T21:01:01.010

你可以给它一个相对或绝对的位置。

# sql - 在 Pentaho 中创建 .cda 文件

> ID：15624627
> 
> 赞同：0
> 
> 时间：2013-03-25T20:58:25.673
> 
> 标签：sql, xml, pentaho

我在 pentaho 用户控制台版本 4.8.0 中。

1.  如何创建新的 .cda 文件？即extract.cda

2.  该文件位于服务器内的哪个文件夹？（通常的位置信息会很棒:)）

3.  我有一个名为 CustTable 的表。我有 5 列 custId、userId、name、city 和 state。如何创建一个新的 .cdi 文件，我可以在其中输入 custID 和 userID 并弹出 4 列，即 custId、userId、名称和状态。

例如，如果我输入 custId=304, userId= 42 那么结果应该类似于 304, 42, Bryan, VA

我可以将 SQL 编写为： select custID, userId, name, state from custTable where custId=304 and userID=42;

我怎样才能实现它？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T09:10:31.903

You need to install CDE to your pentaho BI and hope this link you understand more CDE dashboard [http://www.youtube.com/watch?v=sxicLR0y8Vg](http://www.youtube.com/watch?v=sxicLR0y8Vg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:30:33.197

你安装CDE了吗？可能是您还没有安装它，这可能会导致混乱。它是 Pentaho 附带的一个额外插件。从市场安装它，或者为了获得更大的灵活性，请在此处使用安装程序脚本：

[https://github.com/pmalve/ctools-installer](https://github.com/pmalves/ctools-installer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T04:08:03.243

1.  每次使用 CDE 创建仪表板时，您都将拥有仪表板的 cda 文件
2.  它位于保存仪表板文件的文件夹中，通常为：biserver-ce\pentaho-solutions\xxx
3.  使用 CDE 在仪表板中创建数据源。使用这个 sql：

```
从 custtable 中选择 *
其中 custID = ${custid}
和用户 ID = ${用户 ID}

```

不要忘记为此数据源创建两个参数（custID、userID）

# python - SQL事务，插入，如果插入成功则更新

> ID：15624628
> 
> 赞同：0
> 
> 时间：2013-03-25T20:58:26.403
> 
> 标签：python, sql, sqlite

我正在尝试执行以下操作：

*   表 A 只有一列由唯一数字组成（非连续）
*   表 B 有两列，一个 id（唯一的非连续整数）和一个 hit_number（正整数）

给定一个数字和一个 ID，我想：

检查数字是否存在于表 A 中。

*   如果它存在，那么不要做任何事情，让我知道
*   如果它不存在，请将其插入表 A，增加表 B 中与此 id 对应的 hit_number 列并让我知道。

它需要在一个事务中完成，如果两个并发连接使用相同的值进行，hit_number 应该只增加一个（所以我想我需要一些隔离）。

我想出了一个解决方案（在这个例子中我使用 sqlite 和 python），但我不确定它是否足够好：

就像是

```
con = sqlite3.connect(":memory:", isolation_level="EXCLUSIVE")
con.execute("create table A (num integer primary key);")
con.execute("create table B (user_id integer primary key, hit_number integer);")

# ... fill it with something

def hit(v, id, con):
    try:
        with con:
           con.execute("INSERT INTO A VALUES (?);" +
                       "UPDATE B SET hit_number=hit_number+1 WHERE user_id=(?);", (v, id))
    except sqlite3.IntegrityError:
       return False
    return True 
```

这个交易会是原子的吗？我真的需要 EXCLUSIVE 还是较低的隔离级别会给出完全相同的行为？有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T21:02:43.500

使用该方法一次只执行*一条*语句。`.execute()`在事务中，永远不需要像这样在一次调用中执行两条语句；完整性错误异常已经引发并中止事务：

```
try:
    with con:
       con.execute("INSERT INTO A VALUES (?);", (v,))
       con.execute("UPDATE B SET hit_number=hit_number+1 WHERE user_id=(?);", (id,)
except sqlite3.IntegrityError:
   return False
return True 
```

# javascript - 访问控制器外的服务

> ID：15624631
> 
> 赞同：0
> 
> 时间：2013-03-25T20:58:38.530
> 
> 标签：javascript, angularjs

我正在尝试根据存储在服务中的值隐藏和显示菜单项。这是一个 qnd 会话服务，它根据存储在以下位置的 accessToken 登录用户`$cookies.accessToken`：

```
app.service('Session', function ($cookies, $location) {
  var Session = {
    isLoggedIn: !! $cookies.accessToken,
    accessToken: $cookies.accessToken,

    login: function (token, redirectTo) {
      this.accessToken = token;
      this.isLoggedIn = true;

      if (redirectTo) {
        $location.path(redirectTo);
      }
    },
    logout: function () {
      this.accessToken = false;
      this.isLoggedIn = false;
    }
  };

  if (Session.accessToken) {
    Session.login(Session.accessToken)
  }

  return Session;
}); 
```

我目前有 3 个控制器并使用该`ngView`指令显示适当的部分。但是，您可以想象，我不希望显示“注销”或“身份验证”链接：

```
 <div class="container">
    <nav>
      <ul class="nav nav-tabs">
        <li><a href="#/public">public</a></li>
        <li><a href="#/logout">log out</a></li>
        <li><a href="#/auth">auth</a></li>
      </ul>
    </nav>

    <div ng-view></div>
  </div> 
```

我试过`ng-hide="Session.isLoggedIn"`了，但没有成功。那么做我想做的事情的正确方法是什么？

# perl - 在 Windows 8 PowerShell ISE 中运行 Strawberry Perl

> ID：15624632
> 
> 赞同：2
> 
> 时间：2013-03-25T20:58:40.647
> 
> 标签：perl, powershell, windows-8

我正在尝试从 Windows 8 的 PowerShell 中的命令行运行多个 Perl 命令。

这有效

```
perl -e "print 'Joe'"; 
```

这打印：

```
Joe 
```

这不起作用

```
perl -e "my $string = 'Joe'; print $string;" 
```

这给了我一个错误

```
perl : syntax error at -e line 1, near "my  ="
At line:1 char:1
+ perl -e "my $string = 'Joe'; print $string;"
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+ CategoryInfo          : NotSpecified: (syntax error at -e line 1, near "my  =":String) [], RemoteException
+ FullyQualifiedErrorId : NativeCommandError
Execution of -e aborted due to compilation errors. 
```

有人可以指出我遗漏的明显错误吗？谢谢。我通常在 UNIX 上执行此操作，但使用反引号。作为包装而不是双引号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T21:11:32.267

试试这个，但我无法测试

```
perl -e 'my $string = ''Joe''; print $string;' 
```

在 powershell`$string`中是一个变量，在双引号中，变量使用分配的值进行扩展。在单引号中被视为文字。要`'`在单引号中转义，请将其加倍为`''`

或尝试：

```
perl -e  "my `$string = 'Joe'; print `$string;" 
```

` 是 powershell 中的转义字符。

# php - 注意：使用未定义的常量 pageTitle - 假定为“pageTitle”是什么意思

> ID：15624633
> 
> 赞同：1
> 
> 时间：2013-03-25T20:58:46.623
> 
> 标签：php

我在顶部的页面中定义了一些变量，如下所示

```
define(pageTitle , "Home Page");
define(pageDescription, "Key Descriptin");
define(pageKeywords, "Key words"); 
```

稍后在我的代码中，我包含了一个使用这些变量的元文件。但是我在我的页面上收到了这个通知

```
Notice: Use of undefined constant pageTitle - assumed 'pageTitle' 
Notice: Use of undefined constant pageDescription - assumed 'pageDescription'
Notice: Use of undefined constant pageKeywords - assumed 'pageKeywords' in 
```

这是什么意思？我该如何纠正这些？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:59:27.953

您需要在常量名称周围加上引号：

```
define('pageTitle' , "Home Page");
define('pageDescription', "Key Descriptin");
define('pageKeywords', "Key words"); 
```

# dotnetopenauth - DotNetOpenAuth 不会基于 TFS 2010 构建

> ID：15624634
> 
> 赞同：0
> 
> 时间：2013-03-25T20:59:01.040
> 
> 标签：dotnetopenauth

我正在尝试为 MVC4 应用程序设置 TFS 2010 构建定义，并发现 DotNetOpenAuth.OAuth2.Client.4.2.2.13055 存在问题。

构建过程抛出以下 HTTP 503 错误！？我真的不确定问题是什么，因为源文件按预期位于构建文件夹中。

感谢您阅读我的帖子！

```
D:\TFSBuilds\1\MyMVC4WebApp\MyMVC4WebApp-Stage\Sources\MyMVC4WebApp\MyMVC4WebApp-Main\packages\DotNetOpenAuth.OAuth2.Client.4.2.2.13055\DotNetOpenAuth.OAuth2.Client.4.2.2.13055.nuspec: Please contact your administrator. There was an error contacting the server. Technical information (for administrator):   HTTP code 503: Service Unavailable

 D:\TFSBuilds\1\MyMVC4WebApp\MyMVC4WebApp-Stage\Sources\MyMVC4WebApp\MyMVC4WebApp-Main\packages\DotNetOpenAuth.OAuth2.Client.4.2.2.13055\DotNetOpenAuth.OAuth2.Client.4.2.2.13055.nupkg: Please contact your administrator. There was an error contacting the server. Technical information (for administrator):   HTTP code 503: Service Unavailable

 D:\TFSBuilds\1\MyMVC4WebApp\MyMVC4WebApp-Stage\Sources\MyMVC4WebApp\MyMVC4WebApp-Main\packages\DotNetOpenAuth.OAuth2.Client.4.2.2.13055\lib
et35-full\DotNetOpenAuth.OAuth2.Client.xml: Please contact your administrator.  There was an error contacting the server. Technical information (for administrator):   HTTP code 503: Service Unavailable

 D:\TFSBuilds\1\MyMVC4WebApp\MyMVC4WebApp-Stage\Sources\MyMVC4WebApp\MyMVC4WebApp-Main\packages\DotNetOpenAuth.OAuth2.Client.4.2.2.13055\lib
et35-full\DotNetOpenAuth.OAuth2.Client.dll: Please contact your administrator.  There was an error contacting the server. Technical information (for administrator):   HTTP code 503: Service Unavailable

 D:\TFSBuilds\1\MyMVC4WebApp\MyMVC4WebApp-Stage\Sources\MyMVC4WebApp\MyMVC4WebApp-Main\packages\DotNetOpenAuth.OAuth2.Client.4.2.2.13055\lib
et40-full\DotNetOpenAuth.OAuth2.Client.dll: Please contact your administrator.  There was an error contacting the server. Technical information (for administrator):   HTTP code 503: Service Unavailable

 One or more errors occurred while performing a Get operation. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:17:39.617

看起来 NuGet 包还原已启用，但无法连接到 NuGet 流以检查新包。

# javascript - jQuery UI 自动完成搜索

> ID：15624635
> 
> 赞同：0
> 
> 时间：2013-03-25T20:59:07.633
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我想使用[jQuery UI 自动完成功能](http://jqueryui.com/autocomplete/)，以便用户可以搜索项目。

我有一个需要制作成 JSON 的产品列表（或者像 jQuery UI 的演示一样将它们包含在 JavaScript 中），但是当用户选择一个项目时，有没有办法重定向到 URL？

在 jQuery UI 的演示中，他们有：

```
$(function() {
  var availableTags = [
    "ActionScript",
    "AppleScript",
    "Asp",
    "BASIC",
    "C",
    "C++",
    "Clojure",
    "COBOL",
    "ColdFusion",
    "Erlang",
    "Fortran",
    "Groovy",
    "Haskell",
    "Java",
    "JavaScript",
    "Lisp",
    "Perl",
    "PHP",
    "Python",
    "Ruby",
    "Scala",
    "Scheme"
  ];
  $( "#tags" ).autocomplete({
    source: availableTags
  });
}); 
```

我在哪里可以为每个项目添加一个 URL，以便当用户选择它时，它会重定向页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:06:07.033

如果您传递一个具有名为 value 的属性的对象，则 jquery 将使用它作为显示值。然后，您可以使用自动完成上的 select 方法来处理事件：

```
var availableTags = [
    {value: "ActionScript", url:"http://www.google.com?q=ActionScript"},
    {value: "jquery", url:"http://www.google.com?q=jquery"}
    ];
    $( "#tags" ).autocomplete({
      source: availableTags,
        select:function(event, ui) {
        window.open(ui.item.url);        
    }
    }); 
```

小提琴示例：http: [//jsfiddle.net/9qePM/](http://jsfiddle.net/9qePM/)

# bash - 从 OS X 中的 bash 脚本，是否可以提示管理员权限？

> ID：15624637
> 
> 赞同：4
> 
> 时间：2013-03-25T20:59:16.677
> 
> 标签：bash, scripting, permissions, applescript

我有一个向 /etc/hosts 添加一行的 shell 脚本。如果我使用 sudo 手动运行它，它可以正常工作。我想将此文件分发给使用 Mac 的同事。但是，当 shell 脚本正常运行时，我得到：

```
sed: /etc/hosts: Permission denied 
```

有没有办法像编译的 ObjC 代码那样强制 bash 脚本提示输入密码？如果 Bash 不能这样做，Applescript 可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T00:43:00.493

Adayzdone 的回答是使用“具有管理员权限”的正确方法

但是您不需要硬编码密码或创建自己的对话框。

如果您不包括用户名和密码，系统将提示您使用管理员的标准用户名和密码对话。

```
do shell script "echo hi" with administrator privileges 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T21:00:24.353

你的 shell 脚本可以调用 sudo，它会在终端询问密码。

试试[http://www.performantdesign.com/2009/10/26/cocoasudo-a-graphical-cocoa-based-alternative-to-sudo/](http://www.performantdesign.com/2009/10/26/cocoasudo-a-graphical-cocoa-based-alternative-to-sudo/)

```
#!/usr/bin/env bash

if [ "$SUDO_USER" ]
then
  sed `do stuff`
else    
 cocoasudo --prompt="Please authenticate" bash -l -c "/path/to/this/script"
fi 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T21:11:51.997

使用 Applescript：

```
property usr : "username"
property pswd : "password"

do shell script "echo hi" user name usr password pswd with administrator privileges 
```

或者，如果您不想硬编码密码：

```
set usr to text returned of (display dialog "Enter username" default answer "my username")
set pswd to text returned of (display dialog "Enter password…" default answer "my password")

do shell script "echo hi" user name usr password pswd with administrator privileges 
```

# flash-cs5 - Flash Pro CS6 是否存在这些热键？

> ID：15624638
> 
> 赞同：0
> 
> 时间：2013-03-25T20:59:20.463
> 
> 标签：flash-cs5, flash-cs4, flash-cs6, flash-ide

1）当您处于一个符号的编辑模式时，进入库中下一个符号的编辑

2) 自动将光标放在所选movieClip的实例名称框中

据我所知，没有办法设置“在库面板内部”移动的快捷方式

不过，复制和编辑快捷方式肯定会很好。我什至找不到您会在自定义快捷方式中执行此操作的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:38:22.090

您列出的示例没有快捷键，因为它们不是 IDE 内的默认任务。话虽如此，您可以使用 JSFL 创建方法来执行这些示例，首先创建一个命令，然后为该命令分配一个键盘快捷键。作为示例，我将在您的列表中包含第二项的脚本。

> 2) 自动将光标放在所选movieClip的实例名称框中

目前没有办法告诉 IDE 将光标发送到属性面板中的实例名称框，但您可以使用 JSFL 解决这个问题。让我们弹出我们自己的实例名称框。

这是执行此操作所需的代码：

```
// Assign Instance Name - Andrew Doll

/* This code will provide a prompt for the user to assign an instance name to a selected symbol on the stage. The great thing about using a
// prompt is that the focus is already in the input field of the prompt.  To speed up your workflow I recommend assigning a keyboard
// shortcut to this command.
*/

// Check to see if there is a file open first.
var dom = fl.getDocumentDOM();
if (dom == null)
{
    alert("Please open a file.");
}
else
{
    // Make sure to only select one symbol on the stage at a time.
    if (dom.selection.length > 1)
    {
        alert("You can only select one symbol to assign an instance name to. Please make only a single selection on the stage.");
    }
    // Make sure that you have at least one symbol selected.
    else if (dom.selection.length == 0)
    {
        alert("You need to select a symbol on the stage to assign an instance name.");
    }
    // Make sure that the symbol you have selected is a movie clip or a button.
    else if (dom.selection[0].symbolType == "graphic" || dom.selection[0].elementType != "instance")
    {
        alert("Your selection needs to be a button or a movie clip symbol.");
    }
    else
    {
        // Pop up a prompt for the user to assign an instance name with.
        var iName = prompt("Assign an instance name to the selected symbol.");
        // If the user cancels then do nothing.
        if (iName == null)
        {
            // Do Nothing.
        }
        else
        {
            // Assign the instance name to the selected symbol.
            dom.selection[0].name = iName;
        }
    }
} 
```

将此命令作为 JSFL 脚本保存在 Flash 配置目录的 commands 文件夹中，然后为其分配键盘快捷键。

# ios - 如何在 iOS 中混合来自不同音频单元的声音？

> ID：15624640
> 
> 赞同：1
> 
> 时间：2013-03-25T20:59:24.317
> 
> 标签：ios, audiounit, audiosession

我有一个具有 VoIP 的应用程序，同时它呈现海关声音。

VoIP 音频单元设置如下：

```
au_description.componentType          = kAudioUnitType_Output;
au_description.componentSubType       = kAudioUnitSubType_VoiceProcessingIO; 
```

而呈现声音的是：

```
au_description.componentType          = kAudioUnitType_Output;
au_description.componentSubType       = kAudioUnitSubType_RemoteIO; 
```

我在混合两种声音（语音和自定义声音）时遇到问题。当声音开始时，渲染的声音会以较低的音量播放（即使它当前是静音的）。比较单独播放的渲染声音和 VoIP 通话期间的相同声音，结果降低了 13 dB。

谢谢，狮子座。

# node.js - 使用命名管道作为标准输入生成节点 child_process

> ID：15624641
> 
> 赞同：0
> 
> 时间：2013-03-25T20:59:24.497
> 
> 标签：node.js, named-pipes

假设我在 linux 上有一个命名管道：

```
mkfifo lk.log 
```

从命令行，我可以打印出任何写入名称管道文件的内容。

```
node monitor.js < lk.log 
```

并假装这就是脚本的样子

```
// monitor.js

process.stdin.resume();
process.stdin.setEncoding('utf8');

// read data from stdin
process.stdin.on('data', function(chunk) {
    console.log(chunk);
}); 
```

**我怎么能在节点内使用** `child_process.spawn`**？**

```
child_process.spawn('node', ['monitor.js'])... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:45:15.017

答案是这样使用`fs.open`和 stdio 选项`child_process.spawn`：

```
var spawn = require('child_process').spawn;

var fd_stdin = fs.openSync('lk.log', 'r');
spawn('node', ['monitor.js'], {
    stdio: [fd_stdin, 1, 2];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:12:06.433

最简单的方法是使用`exec()`：

```
var exec = require('child_process').exec;

exec('node monitor.js < lk.log', function(err, stdout, stderr) {
  ...
}); 
```

更复杂的方法是在 node 中打开命名管道并将其作为标准输入传递给您正在生成的进程（请参阅[spawn](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)[的选项`stdio`](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T08:41:41.957

来自 Ben Noordhuis（核心节点贡献者） - 2011 年 10 月 11 日

> Windows 有一个命名管道的概念，但既然你提到`mkfifo`我假设你的意思是 UNIX FIFO。
> 
> 我们不支持并且可能永远不会支持（非阻塞模式下的 FIFO 有可能使事件循环死锁），但是如果您需要类似的功能，您可以使用 UNIX 套接字。

[https://groups.google.com/d/msg/nodejs/9TvDwCWaB5c/udQPigFvmgAJ](https://groups.google.com/d/msg/nodejs/9TvDwCWaB5c/udQPigFvmgAJ)

对于 unix 套接字，请参阅：[https ://stackoverflow.com/a/18226566/977939](https://stackoverflow.com/a/18226566/977939)

# .net - 使用 MSCHART 在饼图中展开饼图偏移

> ID：15624642
> 
> 赞同：1
> 
> 时间：2013-03-25T20:59:25.143
> 
> 标签：.net, winforms, mschart

[我在 WinForms 应用程序中使用MSCHART](http://archive.msdn.microsoft.com/mschart)库中的饼图：

![在此处输入图像描述](../Images/fbdfd1509b9119edb5e9ec81f87bb8a2.png)

虽然分解代表任何数据点的切片很简单（`point["Exploded"] = "true"`），但对间隙大小的操作似乎并不那么简单。有什么方法可以设置爆炸部分与饼图偏移（拉开）多远？

# c# - 在 C# 中，我可以在编译类型检查一个类是否可序列化？

> ID：15624647
> 
> 赞同：2
> 
> 时间：2013-03-25T20:59:43.517
> 
> 标签：c#, .net, serialization, compile-time

我在 C# 中有一个 [Serializable] 类，它有很多字段，每个字段都有不同的类。我使用序列化来保存/加载此类的实例，但我经常会忘记在某处添加 [Serializable] 属性并且只在运行时学习。这可以在编译期间检查吗？

例如，这段代码，

```
[Serializable]
class House {
 List<Room> Rooms;
}
class Room
{
} 
```

不应通过验证，因为 Room 类不可序列化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T21:04:11.350

不，您在编译时无能为力。

但是，为此添加单元测试很容易 - 您可以在程序集中找到每个可序列化的类，并递归地查找所有字段并检查每个字段是否可序列化。当然，更简单的方法就是序列化一个实例:)

单元测试不如编译时检查好，但它比只“实时”执行要好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:04:17.323

无法在编译时确定类型是否可序列化。对于实现`ISerializable`这一点的类型，可以通过将 API 限制为仅采用`ISerializable`. 但这不适用于修饰的类型，`[Serializable]`因为您无法限制 API 采用具有应用特定属性的类型

# jquery - Google Maps jQuery使用字符串城市/县名从A点到B点绘制距离

> ID：15624649
> 
> 赞同：0
> 
> 时间：2013-03-25T20:59:49.020
> 
> 标签：jquery, google-maps, draw, distance

我必须使用谷歌地图实现一个起点 A 和终点 B 的地图。在我的数据库中，我存储的是地区/县字符串名称，而不是地理位置数据（经度和纬度）。是否可以仅使用字符串区域/县名称在这两点之间画线？我是否需要使用每个地区/县的所有地理位置更新我的数据库？

我应该使用什么插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:17:53.033

您将需要从某个地方获取纬度/经度。现在，您可以通过使用 Google Maps Geocoder API [https://developers.google.com/maps/documentation/geocoding/在执行时获取纬度/经度](https://developers.google.com/maps/documentation/geocoding/)

但是，如果您没有那么多点，则对所有点进行地理编码并将其存储在数据库中可能是有意义的：执行时会更快。

# c# - 是否 System.Collections.Immutable.IImmutableList .Add from Microsoft's Preview of Immutable Collections 有职位要求吗？

> ID：15624650
> 
> 赞同：2
> 
> 时间：2013-03-25T20:59:51.623
> 
> 标签：c#, collections, functional-programming, immutability, immutable-collections

我正在实现一个不可变集合，它提供 O(1) 堆栈操作和 O(log n) 列表操作。因此，在前面添加元素比在后面添加元素要快。可以有效实现`System.Collections.Immutable.IImmutableList<T>.Add()`（[https://nuget.org/packages/Microsoft.Bcl.Immutable](https://nuget.org/packages/Microsoft.Bcl.Immutable)，[http://blogs.msdn.com/b/bclteam/archive/2012/12/18/preview-of-immutable- collections-released-on-nuget.aspx](http://blogs.msdn.com/b/bclteam/archive/2012/12/18/preview-of-immutable-collections-released-on-nuget.aspx)）将元素添加到集合的前面而不是后面？

以下是接口的定义方式：

```
 [SuppressMessage("Microsoft.Naming", "CA1710:IdentifiersShouldHaveCorrectSuffix", Justification = "Ignored")]
     public interface IImmutableList<T> : IReadOnlyList<T>, IReadOnlyCollection<T>, IEnumerable<T>, IEnumerable
     {
         IEqualityComparer<T> ValueComparer { get; }

         // Summary:
         //     Adds the specified value to this list.
         //
         // Parameters:
         //   value:
         //     The value to add.
         //
         // Returns:
         //     A new list with the element added, or this list if the element is already
         //     in this list.
         IImmutableList<T> Add(T value);
         //
         // Summary:
         //     Adds the specified values to this list.
         //
         // Parameters:
         //   items:
         //     The values to add.
         //
         // Returns:
         //     A new list with the elements added, or this list if the elements are already
         //     in this list.
         IImmutableList<T> AddRange(IEnumerable<T> items);
         IImmutableList<T> Clear();
         bool Contains(T value);
         int IndexOf(T value);
         IImmutableList<T> Insert(int index, T element);

         IImmutableList<T> InsertRange(int index, IEnumerable<T> items);
         IImmutableList<T> Remove(T value);

         IImmutableList<T> RemoveAll(Predicate<T> match);
         IImmutableList<T> RemoveAt(int index);
         IImmutableList<T> RemoveRange(IEnumerable<T> items);

         IImmutableList<T> RemoveRange(int index, int count);

         IImmutableList<T> Replace(T oldValue, T newValue);

         IImmutableList<T> SetItem(int index, T value);

         IImmutableList<T> WithComparer(IEqualityComparer<T> equalityComparer);
} 
```

# networking - 确定接口配置的 IP 地址

> ID：15624651
> 
> 赞同：0
> 
> 时间：2013-03-25T20:59:51.583
> 
> 标签：networking, rhel

我在 Red Hat 上配置了一个 eth1 接口，但我不明白 IP 地址应该是什么。

我的 IP 为 10.237.128.0/25。这意味着 NETMASK 将是 255.255.255.128；我理解这部分。

我不明白的是，如果 eth1 实际上是主机设备，IPADDR 地址会是什么？

以下是我的猜测：

```
10.237.128.0/25
10.237.128.0 (since the NETMASK variable will be declared, thus making /25 unnecessary)
10.237.128.1-126 (If eth1 is considered a host, 8 0-bits and 8 1-bits would be unavailable on the network as a host, and the 128 bit is the network.) 
```

其中哪一项是正确的，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:14:13.877

让我们看看你的猜测以及为什么每个都是好/坏的。所有显示有 X 的 IP 地址表示该数字未知或不需要，因为它只是一个示例。

10.237.128.0/25 好：它在给定的域 (10.237.xx) 中，是域的子集 (xx128.x)，因此您只需要确定 0/25 内的域和子集的连接。

10.237.128.0（因为 NETMASK 变量将被声明，因此 /25 不必要）可能很好：如果您开始查看 ROUTERS，您会看到很多选择一个 ip（例如 xxx1 或 xxx10 ）并且 0/25 是一个范围，而不是实际数字。

10.237.128.1-126（如果将eth1视为主机，则8个0位和8个1位作为主机在网络上不可用，128位为网络。）

坏：主机地址通常是低端，而且 1-126 可能会将其移动到安全软件将调用的主机连接无效的范围。IP 地址可以是（从技术上讲，不是在现实世界的工作条件下）0.0.0.0 到 255.255.255.255，还有一些保留的地址（例如设备中 LocalHost 连接的 127.0.0.1），使得任何高于 xxx120 的连接都可能不是实际的主机，而是一个 '欺骗 ' 试图强制自己作为主机连接的主机，以监控并可能拦截网络流量。

如需更多阅读，请尝试访问[http://en.wikipedia.org/wiki/IP_address的 wiki](http://en.wikipedia.org/wiki/IP_address)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:04:37.923

可能最好将其发布在[https://serverfault.com/](https://serverfault.com/)上，无论如何单个接口可以有多个 IP 地址，这取决于“接口”的含义，即使没有真正的硬件，您也可以拥有 IP，尤其是在linux（环回接口）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:06:56.177

如果您在谈论 下的配置脚本`/etc/sysconfig/network-scripts`，那么第二个是正确的。正如您所提到的，网络掩码是单独指定的。

```
IPADDR="10.237.128.0"
NETMASK="255.255.255.128" 
```

# python - TypeError：int() 参数必须是字符串或数字，而不是“列表”

> ID：15624654
> 
> 赞同：2
> 
> 时间：2013-03-25T20:59:57.990
> 
> 标签：python, while-loop, iteration, typeerror

```
#iterative program to find the highest odd number
m = sorted([a, b, c, d, e, f, g, h, j, k])
n = max(m)
n = int(n)
count = 10
while n%2==0:
    m=[m[:-1]]
    n = max(m)
    n = int(n)
    count =-1
if count==0:
    print 'There are no odd numbers'
else:
    print str(n), 'is the largest odd number' 
```

我输入包含奇数的变量，它给了我正确的答案，但是当我输入所有偶数以满足`'count==0'`条件时，会发生以下错误：

> TypeError：int() 参数必须是字符串或数字，而不是“列表”

我不明白为什么输入奇数时不会发生此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:22:13.593

如果您打印出`m`循环内的内容，这将变得非常明显。或者您可能想使用[交互式可视化](http://pythontutor.com/visualize.html#code=m+%3D+sorted%28%5B2,+4,+6,+8,+10,+12,+14,+16,+18,+20%5D%29%0An+%3D+max%28m%29%0An+%3D+int%28n%29%0Acount+%3D+10%0Awhile+n%252%3D%3D0%3A%0A++++m%3D%5Bm%5B%3A-1%5D%5D%0A++++n+%3D+max%28m%29%0A++++n+%3D+int%28n%29%0A++++count+%3D-1%0Aif+count%3D%3D0%3A%0A++++print+%27There+are+no+odd+numbers%27%0Aelse%3A%0A++++print+str%28n%29,+%27is+the+largest+odd+number%27%0A++++&mode=display&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&py=2&curInstr=6)器或仅使用调试器对其进行测试。

假设您的价值观是`2, 4, 6, 8, 10, 12, 14, 16, 18, 20`. 排序后得到：

```
m = [2, 4, 6, 8, 10, 12, 14, 16, 18, 20]
n = max(m) = 20
n = int(n) = 20 
```

这`max`是没用的，因为根据排序的定义，它必须是列表中的最后一个值（而且你似乎在你的循环中依赖它）。

并且`int`具有误导性 - 它使您的代码看起来即使数字是字符串而不是数字也可以工作，但实际上不会，因为`sorted`(and `max`) 将`'10'`视为小于`'2'`，依此类推。

但这些都不是你的大问题。因为你的第一个`n`是偶数，你会进入循环，循环中的第一件事是这样的：

```
m=[m[:-1]] 
```

......这将做到这一点：

```
m = [[2, 4, 6, 8, 10, 12, 14, 16, 18]] 
```

因此，接下来的两行执行此操作：

```
n = [2, 4, 6, 8, 10, 12, 14, 16, 18] # the max of a 1-element list is that element
n = int([2, 4, 6, 8, 10, 12, 14, 16, 18]) 
```

繁荣，这是你的例外。

如果您想设置`m`除最后一个元素之外的所有元素`m`，只需执行`m = m[:-1]`. 将那些额外的括号放在它周围设置为由`m`一个`list`元素组成的，它本身就是由除最后一个元素之外的所有元素组成的列表`m`。

请注意，尽管您在描述中说了什么，“我输入的变量包含奇数它给了我正确的答案”，但这不是真的。它仅在您的最大值为奇数时才有效，因此您从一开始就不会进入循环。

修复此问题后，您的代码实际上仍然损坏，但希望现在您知道如何自己调试。

* * *

同时，解决这个问题的pythonic方法是尝试将您的高级英语描述直接翻译成高级Python。我们如何找到最大的奇数`m`？

首先得到奇数`m`：

```
odds = (n for n in m if n % 2) 
```

（如果您创建一个函数，这可能更具可读性`odd`——而且，如果您，您可能更喜欢`filter`生成器表达式。）

然后，要获得最大值：

```
max_odd = max(odds) 
```

当然，您需要处理没有胜算的情况。您可以通过检查来做到这一点`if odd:`。但是在 python 中，请求宽恕通常比请求许可更好，所以，这是你的整个程序：

```
m = [a, b, c, d, e, f, g, h, j, k]
odds = (n for n in m if n % 2)
try:
    print max(odds), 'is the largest odd number'
except ValueError:
    print 'There are no odd numbers' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:41:14.697

`m=[m[::-1]]`正如@abarnert 指出的那样，您的错误发生在.

这是在列表中查找最大奇数的简单方法：

```
m = sorted([int(n) for n in [a, b, c, d, e, f, g, h, j, k] if n%2==1])
# this makes a list of all ODD integers (converts them from strings)
if len(m) != 0:
    print str(max(m)), 'is the largest odd number'
else:
    print 'No odd integers inputted' 
```

进一步简化为：

```
m = sorted([int(n) for n in [a, b, c, d, e, f, g, h, j, k] if n%2==1])
print (str(max(m)), 'is the largest odd number') if len(m)!=0 else 'No odd integers inputted' 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-25T21:15:41.570

当您只有偶数时，您的 while 循环会在您`m`完全取消填充时生成此错误。在这种情况下`max(m)`返回`None`，它不能是 的参数`int`。要解决此问题，您需要将 while 循环条件更改为更正确的内容。

然而，这并不是大多数人认为的“pythonic”。理想情况下，您将使用更像以相反顺序`for n in m[::-1]`遍历的循环（或使用and的参数。）`m``reverse=True``sorted``for n in m`

# r - 在 geom_point 中标注点

> ID：15624656
> 
> 赞同：218
> 
> 时间：2013-03-25T21:00:05.290
> 
> 标签：r, plot, ggplot2, labeling, ggrepel

我正在玩的数据来自下面列出的互联网资源

```
nba <- read.csv("http://datasets.flowingdata.com/ppg2008.csv", sep=",") 
```

我想要做的是创建一个 2D 点图，比较该表中的两个指标，每个玩家代表图表上的一个点。我有以下代码：

```
nbaplot <- ggplot(nba, aes(x= MIN, y= PTS, colour="green", label=Name)) + 
                  geom_point() 
```

这给了我以下信息：

![NBA剧情](../Images/231e5ce46f3efde9dc82428e5357e8f3.png)

我想要的是点旁边的玩家姓名标签。我认为 ggplot 美学中的标签功能会为我做到这一点，但事实并非如此。

我还尝试`text()`了 function 和`textxy()`from的函数`library(calibrate)`，它们似乎都不适用于 ggplot。

如何在这些点上添加名称标签？

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2013-03-25T21:30:45.823

使用`geom_text`, 带`aes`标签。您可以`hjust, vjust`调整文本位置。

```
ggplot(nba, aes(x= MIN, y= PTS, colour="green", label=Name))+
  geom_point() +geom_text(hjust=0, vjust=0) 
```

![在此处输入图像描述](../Images/11fd23959535578bef22b4e4d3a94904.png)

## 编辑：仅标记高于某个阈值的值：

```
 ggplot(nba, aes(x= MIN, y= PTS, colour="green", label=Name))+
  geom_point() +
  geom_text(aes(label=ifelse(PTS>24,as.character(Name),'')),hjust=0,vjust=0) 
```

![带有条件标签的图表](../Images/f27b8b4535915e011add9d8d4272e6bb.png)

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2018-02-13T08:26:36.680

该[**`ggrepel`**](https://cran.r-project.org/web/packages/ggrepel/vignettes/ggrepel.html)软件包非常适合将重叠的文本标签相互排斥。您可以使用`geom_label_repel()`（在文本周围绘制矩形）或`geom_text_repel()`函数。

```
library(ggplot2)
library(ggrepel)

nba <- read.csv("http://datasets.flowingdata.com/ppg2008.csv", sep = ",")

nbaplot <- ggplot(nba, aes(x= MIN, y = PTS)) + 
  geom_point(color = "blue", size = 3)

### geom_label_repel
nbaplot + 
  geom_label_repel(aes(label = Name),
                  box.padding   = 0.35, 
                  point.padding = 0.5,
                  segment.color = 'grey50') +
  theme_classic() 
```

[![在此处输入图像描述](../Images/eee16eab9feb7a877152a2f4db20b2d1.png)](https://i.stack.imgur.com/7nAof.png)

```
### geom_text_repel
# only label players with PTS > 25 or < 18
# align text vertically with nudge_y and allow the labels to 
# move horizontally with direction = "x"
ggplot(nba, aes(x= MIN, y = PTS, label = Name)) + 
  geom_point(color = dplyr::case_when(nba$PTS > 25 ~ "#1b9e77", 
                                      nba$PTS < 18 ~ "#d95f02",
                                      TRUE ~ "#7570b3"), 
             size = 3, alpha = 0.8) +
  geom_text_repel(data          = subset(nba, PTS > 25),
                  nudge_y       = 32 - subset(nba, PTS > 25)$PTS,
                  size          = 4,
                  box.padding   = 1.5,
                  point.padding = 0.5,
                  force         = 100,
                  segment.size  = 0.2,
                  segment.color = "grey50",
                  direction     = "x") +
  geom_label_repel(data         = subset(nba, PTS < 18),
                  nudge_y       = 16 - subset(nba, PTS < 18)$PTS,
                  size          = 4,
                  box.padding   = 0.5,
                  point.padding = 0.5,
                  force         = 100,
                  segment.size  = 0.2,
                  segment.color = "grey50",
                  direction     = "x") +
  scale_x_continuous(expand = expand_scale(mult = c(0.2, .2))) +
  scale_y_continuous(expand = expand_scale(mult = c(0.1, .1))) +
  theme_classic(base_size = 16) 
```

![](../Images/d6b82c7c542b02b4943a30da746b29cc.png)

**编辑：**要`ggrepel`与线条一起使用，请参阅[this](https://stackoverflow.com/a/53346829/786542)和[this](https://stackoverflow.com/a/49602796/786542)。

^(由[reprex 包](http://reprex.tidyverse.org)(v0.2.0) 于 2019-05-01 创建。)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-07-15T19:31:25.703

除了使用上面示例中的 ifelse 之外，还可以根据一些阈值在标记之前对数据进行预过滤，这样可以为绘图设备节省大量工作：

```
xlimit <- 36
ylimit <- 24
ggplot(myData)+geom_point(aes(myX,myY))+
    geom_label(data=myData[myData$myX > xlimit & myData$myY> ylimit,], aes(myX,myY,myLabel)) 
```

# django - Django 打印表

> ID：15624657
> 
> 赞同：0
> 
> 时间：2013-03-25T21:00:06.960
> 
> 标签：django

我有一个简单的问题，但我不知道如何解决。即打印数据库表，我还想打印索引号，例如：

```
{% for n in names %}
   <tr>
       <td>{{ n }} </td>
   </tr>
{% endfor %} 
```

我想要这样的输出：

1.  约翰
2.  彼得

我尝试像这样输入 sth：{% i = 0 %} 然后增加 i 并打印它，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:09:37.177

[查看循环索引](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)

引用文档：

```
Variable         Description
forloop.counter  The current iteration of the loop (1-indexed)
forloop.counter0 The current iteration of the loop (0-indexed) 
```

对于您的代码：

```
{% for n in names %}
   <tr>
       <td>{{ forloop.counter }} {{ n }} </td>
   </tr>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:09:54.110

您可以使用`forloop.counter`

```
{% for n in names %}
   <tr>
       <td>{{ forloop.counter }}</td>
       <td>{{ n }} </td>
   </tr>
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:10:07.080

您可以`{{ forloop.counter }}`按照[Django Docs中的规定使用](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#for)

# php - 在 PHP 中查找数组元素的所有可能的唯一组合

> ID：15624662
> 
> 赞同：0
> 
> 时间：2013-03-25T21:00:22.853
> 
> 标签：php, arrays, combinations

我知道涉及这个主题的几个问题（例如[这里](https://stackoverflow.com/q/6092781/198836)），但没有一个（至少从我发现的）做我需要的。

假设我有一个包含 3 个元素的数组`[1, 2, 3]`。我需要找到所有可能的独特组合（因此不包括排列，如[这里](https://stackoverflow.com/q/10222835/198836)），包括重复元素的组合。所以结果应该是：

```
[1]
[2]
[3]
[1, 1]
[1, 2]
[1, 3]
[2, 2]
[2, 3]
[3, 3]
[1, 1, 1]
[1, 1, 2]
[1, 1, 3]
[1, 2, 2]
[1, 2, 3]
[1, 3, 3]
[2, 2, 2]
[2, 2, 3]
[2, 3, 3]
[3, 3, 3] 
```

排除与`[3, 2, 1]`或`[2, 1, 3]`相同的子集`[1, 2, 3]`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:41:27.243

使用递归的快速解决方案，可能不是最好的方法，但它可以完成工作。

```
<?php

$arr = array(1,2,3);
$result = array();

function combinations($arr, $level, &$result, $curr=array()) {
    for($i = 0; $i < count($arr); $i++) {
        $new = array_merge($curr, array($arr[$i]));
        if($level == 1) {
            sort($new);
            if (!in_array($new, $result)) {
                $result[] = $new;          
            }
        } else {
            combinations($arr, $level - 1, $result, $new);
        }
    }
}
for ($i = 0; $i<count($arr); $i++) {
    combinations($arr, $i+1, $result);
}

// TEST
foreach ($result as $arr) {
    echo join(" ", $arr) . '<br>';
}

?> 
```

# sharepoint - SSRS 2008 R2- 将参数格式设置为 DD/MM/YYYY

> ID：15624665
> 
> 赞同：0
> 
> 时间：2013-03-25T21:00:27.460
> 
> 标签：sharepoint, reporting-services, parameters, sql-server-2008-r2

我有 SSRS 2008 R2 并且正在为英国编写报告。

我的报告有一个日期/时间数据类型参数。当用户打开报告时，默认日期格式为 MM/DD/YYYY，但我希望使用 DD/MM/YYYY 格式（如果用户从日历下拉日期选择中选择日期，则相同）。

我已将报告上的语言设置更改为英国，它格式化数据集中的日期，而不是参数。我也尝试过使用 cdate 表达式，但这也不起作用。

一种解决方法是在我的 SQL 代码中将其更改为 nvarchar 但是，我有一些使用 > @eomdate 的脚本，因此 nvarchar 在这种情况下将不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:07:07.260

请[在 MSDN 论坛上查看此帖子。](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/32b62d3c-9a32-41bd-b7ad-95c3b89a7668/)日历下拉菜单和参数文本框的日期格式取决于用户在浏览器中的语言设置，而不是报告。

如果你想强制用户显示相同的日期，你必须使用一个你想要的格式的文本字段，然后在你的代码中使用[CDate()](http://msdn.microsoft.com/en-us/library/2dt118h2%28v=vs.84%29.aspx)将该 varchar 转换为执行时间比较的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:04:45.570

这就是我为解决 SQL 代码中的问题而采取的措施，以使其在 SSRS 中作为 hack 工作。

声明 @eomdate varchar(50) 设置 @eomdate = '31/01/2013'

select * from policiesEOM p where p.eomdate >= convert(datetime, @eomdate, 105)

然后我将数据类型更改为文本，它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-10T01:03:51.873

ssrs 日期类型使用 Google Chrome、Mozilla Firefox、Opera 和 Safari 中的浏览器语言。在边缘也是。IE 使用 windows 区域日期格式。

如果您不想使用日期下拉框，可以使用文本参数并使用 ssrs 内置的转换功能将值转换为日期。

# java - Mac OSX Java 终端版本不正确

> ID：15624667
> 
> 赞同：63
> 
> 时间：2013-03-25T21:00:30.963
> 
> 标签：java, macos, terminal

好的，我对 Mac 和 OSX 有点陌生，但我选择了一个，以便我可以对我的 Java 程序进行一些故障排除，因为我工作的公司使用 OSX 和 Windows 机器的组合。我遇到的问题是，当我从 Oracle 的网站安装 Java 7 时，它会更新首选项菜单并在双击它们时似乎正确执行 .jar 文件，但终端窗口的版本仍然是 1.6.0_43 并运行由于旧版本，来自终端的相同 .jar 文件会导致运行时错误。

当我导航到 /Library/Java/JavaVirtualMachines/ 时，我看到了一个空文件夹。从我在其他文章中看到的情况来看，这就是 Java 1.7.0 的版本文件夹所在的位置。知道发生了什么吗？如何让终端使用正确版本的 Java？

编辑：@DWilches 评论他的原始答案：（1）

```
total 64
lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.4 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.4.2 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.5 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.5.0 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.6 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 17 21:38 1.6.0 -> CurrentJDK
drwxr-xr-x  8 root  wheel  272 Mar 17 21:38 A
lrwxr-xr-x  1 root  wheel    1 Mar 17 21:38 Current -> A
lrwxr-xr-x  1 root  wheel   59 Mar 17 21:38 CurrentJDK -> /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents 
```

(2)

```
ls -ld /usr/bin/java
lrwxr-xr-x  1 root  wheel  74 Mar 17 21:38 /usr/bin/java -> /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java 
```

编辑：对于新答案的错误感到抱歉，太习惯于在这么长时间后阻止编辑原始帖子的网站......

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-03-25T21:57:21.093

# JDK

在 Mac OS 上，`/usr/bin/java`朋友是委托给真正 JDK 命令的存根。这些存根尊重您的`JAVA_HOME`环境变量的设置，但要使其正常工作，您需要安装*JDK*（来自[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)）而不是*JRE*（来自[http://java.com](http://java.com)）。

JDK 安装到`/Library/Java/JavaVirtualMachines/jdk1.7.0_NN.jdk`（对于任何 NN 值），因此将`JAVA_HOME`环境变量设置`/Library/Java/JavaVirtualMachines/jdk1.7.0_NN.jdk/Contents/Home`为`/usr/bin/java`使用 1.7。`JAVA_HOME`您只需将您的指向即可切换回 1.6 `/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home`。您可以使用该`/usr/libexec/java_home`工具自动找到正确的值，例如`/usr/bin/java`使用 Java 7，您可以这样做

```
export JAVA_HOME=`/usr/libexec/java_home -v '1.7*'` 
```

并让它使用 Java 6 你可以做

```
export JAVA_HOME=`/usr/libexec/java_home -v '1.6*'` 
```

这同样适用于 Java 8（使用`-v '1.8*'`）。这将选择相关主要版本的最新安装的 JDK，您无需记住`NN`在安装更新时手动更改。

# JRE

如果要从命令行运行 1.7 或 1.8 *JRE*，可以在`/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java`. 这是一条固定路径，您在任何给定时间只能安装一个“公共”JRE。

```
$ /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java -version
java version "1.7.0_13"
Java(TM) SE Runtime Environment (build 1.7.0_13-b20)
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode) 
```

您可以在您的`.bashrc`

```
alias java_jre='/Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-25T21:47:11.880

问题是 Oracle 的 JRE 安装不会更改 /usr/bin/java 可执行文件。如果你想使用这个 Java，你必须使用 /Library 下的路径（需要找到这是我安装的 JDK，所以可能会有所不同）

根据 Oracle 的 JRE[安装文档](http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jre.html)

> 从 Oracle 安装 JRE 不会更新 java -version 符号链接或将 java 添加到您的路径。为此，您需要安装 JDK。

Oracle JDK 确实更改`/usr/bin/java`为指向 Java 7 可执行文件。如果您正在进行开发，那么您应该使用它，因为它包含的不仅仅是 JRE。

Oracle[安装常见问题解答](http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-install-faq.html)说

> 问：我应该安装 JRE 还是 JDK？
> 
> 答：如果您计划运行 Java 应用程序，请安装 Java 运行时环境 (JRE)。JRE 也称为 Oracle Java。安装 JRE 后，您可以通过双击 JAR 文件、JNLP 文件并通过浏览器启动 Java 小程序和应用程序。请注意，JRE 不支持 32 位浏览器，例如 32 位模式的 Firefox 和 Chrome。
> 
> 如果您计划编写 Java 应用程序，请安装 Java Development Kit (JDK)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-25T21:13:36.040

首先，您是否退出控制台并再次打开它，以便有机会接受 PATH 变量中的更改？

如果您已经这样做了，请检查您的 Java 的默认版本是：

```
dwilches@ ~$ cd /System/Library/Frameworks/JavaVM.framework/Versions/
dwilches@ Versions$ ls -l
lrwxr-xr-x  1 root  wheel   59 Mar 19 10:07 CurrentJDK -> /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents
lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.6.0 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.6 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.5.0 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.5 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.4.2 -> CurrentJDK
lrwxr-xr-x  1 root  wheel   10 Mar 19 10:07 1.4 -> CurrentJDK
lrwxr-xr-x  1 root  wheel    1 Mar 19 10:08 Current -> A
drwxr-xr-x  8 root  wheel  272 Mar 25 10:03 A 
```

现在，您可以看到“当前”版本是“A”（那是我的 Java7）。如果我想将其更改为 Java 1.6，那么我可以编写：

```
dwilches@ Versions$ sudo unlink Current
dwilches@ Versions$ sudo ln -s 1.6 Current 
```

接着：

```
dwilches@ Versions$ java -version
java version "1.6.0_43"
Java(TM) SE Runtime Environment (build 1.6.0_43-b01-447-11M4203)
Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01-447, mixed mode) 
```

因此，您可以使用它使“当前”指向您想要的 Java 位置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-09T22:56:02.170

就像 Ian 说的那样，但可能您希望从 .sh 脚本调用 java7，因此您需要一个函数而不是添加到 .bash_profile 的别名：

```
java7() {
    /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java "$@"
}
export -f java7 
```

# php - 来自 2 种不同语言的哈希函数没有给出相同的结果

> ID：15624670
> 
> 赞同：1
> 
> 时间：2013-03-25T21:00:39.410
> 
> 标签：php, hash, pawn

我在脚本语言“PAWN”中有这个功能：

```
stock hash(Hash[])
{
    new
        hStr1 = 1, hStr2 = 0;

    for(new i = 0, l = strlen(Hash); i < l; i ++)
    {
        hStr1 = (hStr1 + Hash[i]) % 65521;
        hStr2 = (hStr2 + hStr1)   % 65521;
    }
    return (hStr2 << 16) + hStr1;
} 
```

这将输出：

`printf("%d", hash("Test"));`= 64815521 以整数形式返回

这是 PHP 函数：

```
function hashEX($Hash)
{
    $hStr1 = 1; $hStr2 = 0;

    for($i = 0, $l = strlen($Hash); $i < $l; $i ++)
    {
        $hStr1 = ($hStr1 + $Hash[$i]) % 65521;
        $hStr2 = ($hStr2 + $hStr1)   % 65521;
    }
    return ($hStr2 << 16) + $hStr1;
} 
```

这给了我：

`echo intval(hashEX("Test"));`= 262145

`echo hashEX("Test");`= 262145

任何人都知道这是为什么以及如何解决它？为了清楚起见，我想在 PHP 函数中获得与 PAWN 函数相同的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:20:34.640

找到我的答案：

```
function hashEX($Hash)
{
    $hStr1 = 1; $hStr2 = 0;

    for($i = 0, $l = strlen($Hash); $i < $l; $i ++)
    {
        $hStr1 = ($hStr1 + ord($Hash[$i])) % 65521;        
        $hStr2 = ($hStr2 + $hStr1)   % 65521;
    }
    return ($hStr2 << 16) + $hStr1;
} 
```

# php - Wordpress 获取名字和姓氏

> ID：15624681
> 
> 赞同：0
> 
> 时间：2013-03-25T21:01:26.570
> 
> 标签：php, wordpress

我正在尝试使用以下代码在 Wordpress 中获取用户的名字：

```
global $current_user;
get_currentuserinfo();
var_dump($current_user); 
```

...我的输出在帖子的末尾。

根据[文档](http://codex.wordpress.org/Function_Reference/get_currentuserinfo#Default_Usage)，我应该能够获取用户的名字和姓氏。然而，模仿他们的例子是徒劳的，因为在这个变量转储中既没有`user_firstname`也没有`user_lastname`出现

关于为什么不的任何想法？我正在使用 Wordpress 3.5.1，我的 WP 帐户确实设置了名字和姓氏。

感谢您的时间。

**输出：**

```
object(WP_User)[113]
  public 'data' => 
    object(stdClass)[115]
      public 'ID' => string '1' (length=1)
      public 'user_login' => string 'stuff' (length=16)
      public 'user_pass' => string 'stuff' (length=34)
      public 'user_nicename' => string 'stuff' (length=15)
      public 'user_email' => string 'stuff' (length=16)
      public 'user_url' => string '' (length=0)
      public 'user_registered' => string '2013-03-24 16:54:43' (length=19)
      public 'user_activation_key' => string '' (length=0)
      public 'user_status' => string '0' (length=1)
      public 'display_name' => string 'stuff' (length=12)
  public 'ID' => int 1
  public 'caps' => 
    array (size=1)
      'administrator' => boolean true
  public 'cap_key' => string 'wp_capabilities' (length=15)
  public 'roles' => 
    array (size=1)
      0 => string 'administrator' (length=13)
  public 'allcaps' => 
    array (size=63)
      'switch_themes' => boolean true
      'edit_themes' => boolean true
      'activate_plugins' => boolean true
      'edit_plugins' => boolean true
      'edit_users' => boolean true
      'edit_files' => boolean true
      'manage_options' => boolean true
      'moderate_comments' => boolean true
      'manage_categories' => boolean true
      'manage_links' => boolean true
      'upload_files' => boolean true
      'import' => boolean true
      'unfiltered_html' => boolean true
      'edit_posts' => boolean true
      'edit_others_posts' => boolean true
      'edit_published_posts' => boolean true
      'publish_posts' => boolean true
      'edit_pages' => boolean true
      'read' => boolean true
      'level_10' => boolean true
      'level_9' => boolean true
      'level_8' => boolean true
      'level_7' => boolean true
      'level_6' => boolean true
      'level_5' => boolean true
      'level_4' => boolean true
      'level_3' => boolean true
      'level_2' => boolean true
      'level_1' => boolean true
      'level_0' => boolean true
      'edit_others_pages' => boolean true
      'edit_published_pages' => boolean true
      'publish_pages' => boolean true
      'delete_pages' => boolean true
      'delete_others_pages' => boolean true
      'delete_published_pages' => boolean true
      'delete_posts' => boolean true
      'delete_others_posts' => boolean true
      'delete_published_posts' => boolean true
      'delete_private_posts' => boolean true
      'edit_private_posts' => boolean true
      'read_private_posts' => boolean true
      'delete_private_pages' => boolean true
      'edit_private_pages' => boolean true
      'read_private_pages' => boolean true
      'delete_users' => boolean true
      'create_users' => boolean true
      'unfiltered_upload' => boolean true
      'edit_dashboard' => boolean true
      'update_plugins' => boolean true
      'delete_plugins' => boolean true
      'install_plugins' => boolean true
      'update_themes' => boolean true
      'install_themes' => boolean true
      'update_core' => boolean true
      'list_users' => boolean true
      'remove_users' => boolean true
      'add_users' => boolean true
      'promote_users' => boolean true
      'edit_theme_options' => boolean true
      'delete_themes' => boolean true
      'export' => boolean true
      'administrator' => boolean true
  public 'filter' => null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:51:56.327

哇！它现在正在随机工作。

1.  在“我的帐户”下设置名字和姓氏
2.  登出
3.  重新登录
4.  离开30分钟
5.  做另一个 var_dump()

现在，我是计算机科学专业的，直到现在我还从未见过计算机魔术。

但说真的，在我注销然后重新登录之前，可能会保留有关我的用户信息的旧 cookie。

# html - 如何让这些无序列表彼此相邻？

> ID：15624683
> 
> 赞同：0
> 
> 时间：2013-03-25T21:01:32.897
> 
> 标签：html, css, html-lists, inline

如何使用 css3 让这些列表（列表项 1 到 4 中的无序列表）彼此相邻？

这是我一直在使用的代码，我一直在尝试几种方法，但我似乎无法掌握它

```
<footer>

    <ul>
        <li>1</li>
            <ul>
                <li>Visie & Beleid</li>
                <li>Opbouw Studieprogramma</li>
                <li>Competenties</li>

            </ul>

        <li>2</li>
            <ul>
                <li>Mededelingen</li>
                <li>Uitagenda</li>
                <li>Propedeuse</li>

            </ul>

        <li>3</li>
            <ul>
                <li>Contact</li>
                <li>Blog</li>
                <li>Docenten</li>
                <li>Onderwijsbureau</li>

            </ul>

    </ul>
</footer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:16:45.407

您是否尝试将“内部” `<ul>`s 放入 div，然后将样式应用于`<div>`s 以赋予它们宽度，然后将它们浮动到左侧？

类似于以下 jsfiddle：http: [//jsfiddle.net/msturdy/yJ2Kw/4/](http://jsfiddle.net/msturdy/yJ2Kw/4/)

我承认我不确定将 a 放入 a 是否是个好主意`<div>`，`<ul>`但它在 Chrome 和 Firefox 中运行良好！

（编辑：更新链接以考虑`</li>`嵌套后标签的关闭`<ul>`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:35:33.937

您需要将您希望彼此相邻的列表项的显示属性设置为内联，如下所示：

```
ul ul li { display: inline; } 
```

# php - IIS 抛出“错误请求”

> ID：15624688
> 
> 赞同：1
> 
> 时间：2013-03-25T21:02:05.840
> 
> 标签：php, iis, mod-rewrite, routes, iis-7

所以基本上我将所有请求发送到 index.php 所以`http://example.com/article`等于`http://example.com/index.php?page=article`

它适用于 mod_rewrite，但对于 IIS7 ( web.config )，它在特定情况下不起作用。

```
APACHE ( mod_rewrite / .htaccess )

    http://example.com/members .... Works!
    http://example.com/article&id=1 .... Works! 
```

但..

```
IIS ( web.config )
    http://example.com/members .... Works!
    http://example.com/article&id=1 .... 'Bad Request' 
```

我将如何解决这个问题？

我的 .htaccess

```
RewriteEngine on

RewriteBase /
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteRule  ^(.*)$ index.php?page=$1 [QSA,L] 
```

我的 web.config

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <clear />
                <rule name="Imported Rule 1-1" stopProcessing="true">
                    <match url="^buddy" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
                    <action type="None" />
                </rule>
                <rule name="Imported Rule 1">
                    <match url="^(|/)$" ignoreCase="false" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
                    <action type="Rewrite" url="index.php?page={R:1}" appendQueryString="false" />
                </rule>
                <rule name="Imported Rule 2">
                    <match url="^([a-zA-Z0-9/_-]+)(|)$" ignoreCase="false" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
                    <action type="Rewrite" url="index.php?page={R:1}" appendQueryString="false" />
                </rule>
            </rules>
        </rewrite>
        <defaultDocument>
            <files>
                <remove value="iisstart.htm" />
                <remove value="Default.asp" />
                <remove value="Default.htm" />
            </files>
        </defaultDocument>
    </system.webServer>
</configuration> 
```

# jquery - 你如何删除 从一个 按身份证？

> ID：15624690
> 
> 赞同：19
> 
> 时间：2013-03-25T21:02:25.927
> 
> 标签：jquery

我有：

```
<ul id="ulId">
    <li id="firstli">
    </li>
    <li id="secondli">
    </li>
</ul> 
```

我正在尝试删除`secondli`.

这是我根据一些阅读尝试过的。

```
$('#ulId secondli').remove(); 
```

和

```
$('#ulId > secondli').remove(); 
```

但这两种方法都不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-25T21:03:03.623

尝试这个：

```
$('#secondli').remove(); 
```

在 jQuery 中，您指的是`#`前面带有 a 的元素的 ID。见[http://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T21:04:46.060

这对你有用

```
$('#secondli').remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-18T13:51:56.707

您需要在选择 li 元素之间添加一个空格，

```
$('#second li').remove(); // when referencing by id 
```

或者

```
$(".second li").remove(); // when referencing by class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T21:05:22.030

`$('#ulId #secondli').remove();`

选择容器`#ulId`，然后选择列表项`#secondli`。您忘记在第二个 li 之前添加 ID 标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-16T10:32:39.690

如果您想删除`<li>`带有 ID 的尝试：

`$('#yourlist #yourli').remove()`;

否则，如果您要删除`<li>`基于您可以使用的内容：

`$('#yourlist li:contains("TextToRemove")').remove();`

# python - OpenCV Kalman滤波器的实际实现与python？

> ID：15624691
> 
> 赞同：3
> 
> 时间：2013-03-25T21:02:32.800
> 
> 标签：python, opencv, filter, computer-vision, kalman-filter

我既不是 OpenCV 也不是 python 方面的专家，但是在对 cv 库的糟糕 c# 实现进行了太多弄乱之后，我决定冒险一试。

到目前为止，我已经按照我想要的方式进行了“blob”（读取轮廓）跟踪 - 我现在的问题是遮挡，正如我（和无数 youtube 视频）所理解的那样，卡尔曼滤波器可以解决这个问题。问题是，python 中的相关示例似乎不存在，示例代码很大程度上没有注释，所以一条红黄线遍布商店如何解决我的问题对我来说是个谜。

我想要实现的是这样的[http://www.youtube.com/watch?v=lvmEE_LWPUc](http://www.youtube.com/watch?v=lvmEE_LWPUc)或[http://www.youtube.com/watch?v=sG-h5ONsj9s](http://www.youtube.com/watch?v=sG-h5ONsj9s)。

如果有人能指出（或提供）使用从网络摄像头或视频中提取的实际图像的示例，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-06T00:19:56.630

你可以看看： [https ://github.com/dajuric/accord-net-extensions](https://github.com/dajuric/accord-net-extensions)

它实现了卡尔曼滤波、粒子滤波、联合概率数据关联滤波器（用于多对象跟踪）以及运动模型。

包括样品！

# javascript - jQuery更改事件仅在页面加载时触发？

> ID：15624694
> 
> 赞同：0
> 
> 时间：2013-03-25T21:02:37.860
> 
> 标签：javascript, jquery, html

我有一个`.js`大部分工作的文件，但是更改事件仅在页面加载时触发，而不是在选择更改时触发。

```
$(document).ready(function(){
    $("#dropdown").on("change keyup", colorizeSelect()).change();
});

function colorizeSelect(){
    if($("#dropdown").val() == ""){
        $("#dropdown").addClass("dropdown_placeholder");
    }
    else{
        $("#dropdown").removeClass("dropdown_placeholder");
    }
} 
```

我是否遗漏了一些基本的东西，应该导致它在“#dropdown”更改时触发？`#dropdown`是`<select>`对象的 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:04:35.080

你有`()`这意味着现在执行它。您没有分配对它的引用。

```
$("#dropdown").on("change keyup", colorizeSelect()).change();
                                                ^^
                                               ERROR 
```

需要是

```
$("#dropdown").on("change keyup", colorizeSelect).change(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:06:00.617

我认为这里的罪魁祸首是`colorizeSelect()`，它会在那里执行它。因此，应该删除多余的括号。

因此，改变

```
$("#dropdown").on("change keyup", colorizeSelect()).change(); 
```

至

```
$("#dropdown").on("change keyup", colorizeSelect).change(); 
```

# python - 与 Grinder 一起使用的 Loadrunner 脚本的 Cython 实现

> ID：15624696
> 
> 赞同：0
> 
> 时间：2013-03-25T21:02:42.587
> 
> 标签：python, jython, cython, loadrunner, grinder

我有用 C 编写的遗留测试脚本，用于 Loadrunner。我想使用 Grinder 而不是 Loadrunner。Grinder 为 Java 中的任何内容提供支持，这些内容可以轻松导入 Grinder 的默认编程语言 Jython。

为了重用用 C 编写的测试脚本，我可以将它们包装在 Cython 中吗？( [http://en.wikipedia.org/wiki/Cython](http://en.wikipedia.org/wiki/Cython) ) Cython 是一种编译语言，它将生成可导入常规 Python 或 CPython 代码的扩展模块。一旦我有了这个 CPython 代码，它会在 Grinder 中工作还是 Grinder 特别需要 Jython？问题是 Grinder 是否可以支持默认的 Python？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:49:49.900

查看 LoadRunner 脚本下的 \data 子目录，您将找到构建脚本的原始标题和页面源。

您可能最好编写一个预处理器来提取调用的原始源并构建一个模拟磨床脚本以进行修改。如果您真的很谨慎，您可以从 .c 文件中提取动态参数化（相关）标签，并使用脚本 .prm 文件和参数标签在构建研磨机原型时对其进行修改。如果您尝试直接使用 LoadRunner 脚本，您将遇到各种缺少库以支持脚本的问题。

# qt - 在应用程序编译过程中运行 qcollectiongenerator

> ID：15624701
> 
> 赞同：0
> 
> 时间：2013-03-25T21:02:54.940
> 
> 标签：qt, qmake

很长一段时间以来，我一直在开发一个名为 RoboJournal 的程序。下一个版本包含完整的文档；每当用户按下 F1 或单击 RoboJournal 程序中的帮助项时，帮助文件都会显示在 Qt 助手中（比简单地打开浏览器窗口访问某些在线文档要好得多）。

在其基本形式中，文档由源包中包含的许多松散的 HTML 和图像文件组成。这些松散的文件应该在构建时编译成 QCH 编译的帮助文件和 QHC 集合文件，以便 Qt Assistant 可以正确显示文档。在 Windows 上，这相当容易，因为我能够编写一个批处理脚本来自动化整个构建过程（包括编译文档并将输出文件移动到正确的位置）。

在 Linux 上，它有点复杂。诚然，我可以编写一个 Bash 或 Perl 脚本来编译文档以及程序的其余部分，但我不能保证最终将从我提供的源包创建我的应用程序的 Debian 包的人会使用该脚本。源程序包用于创建所有 Debian 程序包，因此一切都必须使用标准构建程序完美运行（或者源程序包一文不值）。因此，无论用户是否运行脚本，我都需要编译过程来产生相同的结果。就像现在一样，用户必须手动构建和安装文档。当然，有一些方法可以自动执行此操作。

是否可以让 Qmake 添加指令以运行 qcollectiongenerator 到 makefile（以构建我的应用程序的帮助文件），以便在“make”步骤期间正确处理它？这样，当用户运行“make install”时，QHC 和 QCH 文件将与其他所有文件一起准备安装到它们的正确位置（在我的例子中，/usr/share/doc/robojournal-0.4.1）。我考虑过提前编译 QCH 和 QHC 文件并在源代码包中提供它们，但从源代码构建的全部意义在于能够从其基础组件重新创建整个应用程序。

我知道我可能需要在我的 .PRO 文件中添加额外的说明，但我不确定是什么或如何。我发现了一些看起来很有希望的东西（[http://www.qtcentre.org/archive/index.php/t-49484.html](http://www.qtcentre.org/archive/index.php/t-49484.html)），让我希望 Qmake 可以做我需要的事情，但我不是确定这些说明对我的情况有多适用。我是否必须为此创建一个 PRI 文件，或者我可以将说明直接添加到主项目文件中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:13:02.097

您可以尝试使用该`QMAKE_POST_LINK`变量：

```
QMAKE_POST_LINK  += build_help.sh 
```

附言

> 我不能保证最终从我提供的源包创建我的应用程序的 Debian 包的人会使用该脚本。

我认为这真的不是你的问题:) 正确构建包取决于他们。

# php - 表 MYSQL 中的重复项

> ID：15624702
> 
> 赞同：0
> 
> 时间：2013-03-25T21:03:02.220
> 
> 标签：php, mysql, duplicates

好的，我在 MySQL 中有表

SMESTAJ 和列 MESTO

我想从行 MESTO 中获取所有值，但没有重复

有人可以帮助我并告诉我正确的 MySQL 查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:08:15.653

假设：表名 = 'SMESTAJ' 列名 = 'MESTO'

```
SELECT DISTINCT MESTO FROM SMESTAJ 
```

[您可以在此处](http://www.w3schools.com/sql/sql_distinct.asp)阅读有关 DISTINCT 关键字的更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:05:48.970

是您正在寻找的：

```
select distinct columnName from table; 
```

如果是这样的话：

```
select distinct SMESTAJ from MESTO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:06:41.053

如果我理解正确：

```
SELECT DISTINCTROW mesto FROM SMESTAJ 
```

一般来说，正确的格式是：SELECT DISTINCTROW row FROM table。

希望这可以帮助。

# java - java用jar编译

> ID：15624704
> 
> 赞同：0
> 
> 时间：2013-03-25T21:03:03.710
> 
> 标签：java, compilation

我试图弄清楚现有的 Java 程序（我当然不是我自己）是如何用现有的 jar 编译的

我有`Test.java`（原始源文件）：

```
package Demo;
//import classes from jars here etc...
public class Test {
 public static void main(String args[]) {
  etc...
 }
} 
```

现在我有另外两个罐子：

```
file1.jar
file2.jar
Demo.jar 
```

有一个批处理脚本可以运行它：

```
@echo off
set CLASSPATH="file1.jar";"file2.jar";"Demo.jar"
java -cp %CLASSPATH% Demo.Test 
```

这可行，但现在我需要更改源文件 Test.java，重新编译并使用 jars 类依赖项运行。（对不起，如果我没有意义）

* * *

现在，我试图重新编译它以重现相同的结果，但没有运气：

```
javac -cp file1.jar;file2.jar;Demo.jar Test.java 
```

定义清单：

```
manifest.mf
Main-class: Demo.Test 
```

为类文件创建目录“存储”并将类文件移到那里

冉：

```
jar -cmf manifest.mf Demo.jar store 
```

哪个创建了“Demo.jar”

然后我运行上面的批处理脚本，但结果不一样（根本不起作用）

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:17:05.117

一旦依赖外部 jar，就很难创建真正的可执行 jar。

这里唯一的解决方案是：

*   将所有 jars 放在同一个文件夹中：你的及其依赖项
*   [在清单中](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)添加一个类路径条目
*   使用启动 jar`java -jar Demo.jar`

清单必须如下所示：

```
manifest.mf
Main-class: Demo.Test
Class-Path: file1.jar file2.jar 
```

# r - 使用一个数据帧对来自 R 中另一个数据帧的一系列数据求和

> ID：15624706
> 
> 赞同：2
> 
> 时间：2013-03-25T21:03:11.423
> 
> 标签：r, dataframe

我正在从 SAS 迁移到 R。我需要帮助弄清楚如何汇总日期范围的天气数据。`startdate`在 SAS 中，我采用日期范围，使用数据步骤为范围内的每个日期（带, `enddate`, ）创建记录`date`，与天气合并然后汇总 (VAR hdd cdd; CLASS=startdate enddate sum=) 进行总结日期范围的值。

代码：

```
startdate <- c(100,103,107)
enddate <- c(105,104,110)
billperiods <-data.frame(startdate,enddate); 
```

要得到：

```
> billperiods
startdate enddate
1       100     105
2       103     104
3       107     110 
```

代码：

```
weatherdate <- c(100:103,105:110)
hdd <- c(0,0,4,5,0,0,3,1,9,0)
cdd <- c(4,1,0,0,5,6,0,0,0,10)
weather <- data.frame(weatherdate,hdd,cdd) 
```

要得到：

```
> weather
   weatherdate hdd cdd
1          100   0   4
2          101   0   1
3          102   4   0
4          103   5   0
5          105   0   5
6          106   0   6
7          107   3   0
8          108   1   0
9          109   9   0
10         110   0  10 
```

注：`weatherdate = 104`缺失。我可能一天都没有天气。

我不知道如何到达：

```
> billweather
  startdate enddate sumhdd sumcdd
1       100     105      9     10
2       103     104      5      0
3       107     110     13     10 
```

天气中的从到`sumhdd`的总和在哪里。`hdd``startdate``enddate``data.frame`

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:30:15.683

这是一个使用`IRanges`and的方法`data.table`。看起来，对于这个问题，这个答案似乎有点矫枉过正。`IRanges`但总的来说，我觉得用它来处理间隔很方便，它们可能多么简单。

```
# load packages
require(IRanges)
require(data.table)

# convert data.frames to data.tables
dt1 <- data.table(billperiods)
dt2 <- data.table(weather)

# construct Ranges to get overlaps
ir1 <- IRanges(dt1$startdate, dt1$enddate)
ir2 <- IRanges(dt2$weatherdate, width=1) # start = end

# find Overlaps
olaps <- findOverlaps(ir1, ir2)

# Hits of length 10
# queryLength: 3
# subjectLength: 10
#    queryHits subjectHits 
#     <integer>   <integer> 
#  1          1           1 
#  2          1           2 
#  3          1           3 
#  4          1           4 
#  5          1           5 
#  6          2           4 
#  7          3           7 
#  8          3           8 
#  9          3           9 
#  10         3          10 

# get billweather (final output)
billweather <- cbind(dt1[queryHits(olaps)], 
                dt2[subjectHits(olaps), 
                list(hdd, cdd)])[, list(sumhdd = sum(hdd), 
                sumcdd = sum(cdd)), 
                by=list(startdate, enddate)]

#    startdate enddate sumhdd sumcdd
# 1:       100     105      9     10
# 2:       103     104      5      0
# 3:       107     110     13     10 
```

**最后一行的代码分解：**首先我构造 using `queryHits`，`subjectHits`然后从`cbind`中途`data.table`，我分组`startdate, enddate`并得到 sum of`hdd`和 sum of `cdd`。为了更好地理解，如下所示单独查看该行更容易。

```
# split for easier understanding
billweather <- cbind(dt1[queryHits(olaps)], 
            dt2[subjectHits(olaps), 
            list(hdd, cdd)])
billweather <- billweather[, list(sumhdd = sum(hdd), 
            sumcdd = sum(cdd)), 
            by=list(startdate, enddate)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:16:07.627

```
billweather <- cbind(billperiods, 
                 t(apply(billperiods, 1, function(x) { 
                   colSums(weather[weather[, 1] %in% c(x[1]:x[2]), 2:3])
               }))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T21:20:26.177

```
 cbind(billperiods, t(sapply(apply(billperiods, 1, function(x) 
     weather[weather$weatherdate >= x[1] & 
             weather$weatherdate <= x[2], c("hdd", "cdd")]), colSums)))

  startdate enddate hdd cdd
1       100     105   9  10
2       103     104   5   0
3       107     110  13  10 
```

# bash - bash：脚本参数 ${1} 干扰脚本内的 xargs 的 ${1}

> ID：15624708
> 
> 赞同：0
> 
> 时间：2013-03-25T21:03:13.243
> 
> 标签：bash

长话短说，我有一个看起来像这样的脚本块：

```
cd ${1} # via command-line argument
find . -name "output*.txt" | xargs cat ${1} | grep -v ${filter} > temp.txt 
```

我基本上已经到了这一点，购买`find ...`在命令行中构建该行，然后将其粘贴到我的脚本中，然后添加`cd`命令以便在包装器中轻松重用此脚本，该包装器将在大量目录上运行此脚本。反正 ...

问题是`cd`并且`xargs`使用相同的`${1}`变量，哪种makee

我知道我可以`${1}`从 中删除参数`xargs`，并且我可以将`find`命令重写为根本不需要`xargs`，但我的问题仍然存在：

有没有办法`${1}`在我使用它之后“重置”，`cd`这样`xargs`就不会

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:16:49.650

我不熟悉用作默认替换字符串的版本`xargs`，`${1}`但以下应该可以工作：

```
find . -name "output*.txt" | xargs -I '{}' cat '{}' | grep -v ${filter} > temp.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:21:55.130

您对 find + xargs 的使用遇到了分隔符问题[https://en.wikipedia.org/wiki/Xargs#Separator_problem](https://en.wikipedia.org/wiki/Xargs#Separator_problem)

这是一个没有该问题的解决方案。它使用 GNU 并行：

```
find . -name "output*.txt" |
  parallel cat {} |
  grep -v ${filter} > temp.txt 
```

安装 GNU Parallel 实际上需要 10 秒：

```
$ (wget -O - pi.dk/3 || lynx -source pi.dk/3 || curl pi.dk/3/ || \
   fetch -o - http://pi.dk/3 ) > install.sh
$ sha1sum install.sh | grep 883c667e01eed62f975ad28b6d50e22a
12345678 883c667e 01eed62f 975ad28b 6d50e22a
$ md5sum install.sh | grep cc21b4c943fd03e93ae1ae49e28573c0
cc21b4c9 43fd03e9 3ae1ae49 e28573c0
$ sha512sum install.sh | grep da012ec113b49a54e705f86d51e784ebced224fdf
79945d9d 250b42a4 2067bb00 99da012e c113b49a 54e705f8 6d51e784 ebced224
fdff3f52 ca588d64 e75f6033 61bd543f d631f592 2f87ceb2 ab034149 6df84a35
$ bash install.sh 
```

观看介绍视频以了解更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:17:24.807

实用程序 xargs 仅用于管理参数的数量，并且大括号充当参数或文件名 {} 的占位符。

我确实模拟了你拥有的包装器，并且遇到了同样的问题，作为 ${1} 传递给我的函数的路径名被 xargs 拾取......但这就是 shell 的工作方式，实际上 shell 只是替换/扩展所有使命令在执行前完成的变量和东西

实用程序arnt编码自己处理这个问题，他们只是不这样做......例如：

```
echo * ; 
```

在这里，shell 将扩展 * 并将其替换为当前目录中的所有文件名，并在执行命令 echo * 之前将它们作为参数 @ 传递给 echo 实用程序

同样，在您的情况下，shell 将 ${1} 扩展为您在执行命令之前传递的路径名值.....这就是为什么您得到了您所拥有的。

解决方案：您可以只使用大括号（当然是空的），或者最好只是放下它们......它对我来说很好......

```
find . -iname "*${filename}*" | xargs ls -l | more commands ....; 
```

希望这可以帮助 。

# r - 两个 geom_bar() 和因子变量的错误顺序

> ID：15624711
> 
> 赞同：4
> 
> 时间：2013-03-25T21:03:23.797
> 
> 标签：r, ggplot2, plyr

在 ggplot2 中绘制条形图时，因子变量的正确顺序存在问题。我正在使用两个带有原始数据集子集的 geom_bars（具有两个级别“A”和“B”的变量 g）。

如何保留因子变量的原始顺序？当我的 var 是数字时没有问题，但假设 x 应该是因子。

这是我的代码：

```
library(plyr)
library(ggplot2)

dane<-data.frame(x=1:10,y=seq(-5,4),g=rep(c('A','B'),each=5))
    dane$x<-as.factor(dane$x)

      ggplot(data=dane,aes(x=x,y=y,fill=g)) + 
        geom_bar(subset=.(g=='A'),stat='identity') +
        geom_bar(subset=.(g=='B'),stat='identity') 
```

和结果

![顺序错误](../Images/8d5c9d502167fe0bd0362ea573440743.png)

**编辑：** 我忘了复制库的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:27:45.860

我在 github 上得到了答案（真的很快，我印象深刻 :)）。Brian Diggs 提议用它`scale_x_discrete(drop = FALSE)`来解决我的问题。[**这是我的 github 报告和解决方案的链接**](https://github.com/hadley/ggplot2/issues/787#issuecomment-15429475)。现在，结果如我所愿。

```
ggplot(data=dane,aes(x=x,y=y,fill=g)) + 
    geom_bar(subset=.(g=='A'),stat='identity') +
    geom_bar(subset=.(g=='B'),stat='identity') +
    scale_x_discrete(drop=FALSE) 
```

![在此处输入图像描述](../Images/07ebf49cf791dc6358caeeb2880863ec.png)

# c++ - 复制构造函数不起作用

> ID：15624712
> 
> 赞同：0
> 
> 时间：2013-03-25T21:03:23.957
> 
> 标签：c++, copy-constructor

我有一些创建文档数组的代码。每个文档对象都有一个文档范围的值数组，以及一个包含所有文档数据的单个文件数组（称为行，因为每个文件都是我正在读取的源文件中的一行）。当我尝试将文档对象添加到数组时，它在下面调用我的复制构造函数：

```
CMyDocument::CMyDocument(CMyDocument& cSourceDoc)
{
    m_lpastrFields = new CStringArray;
    m_lpacLines = new CArray<CMyLine, CMyLine>;
    int nCount;
    int nSize;
    nSize = static_cast<int>(cSourceDoc.GetFields()->GetSize());
    for (nCount = 0; nCount < nSize; nCount++)
    {
        m_lpastrFields->Add(cSourceDoc.GetFields()->GetAt(nCount));
    }
    nSize = static_cast<int>(cSourceDoc.GetLines()->GetSize());
    for (nCount = 0; nCount < nSize; nCount++)
    {
        m_lpacLines->Add(cSourceDoc.GetLines()->GetAt(nCount));
    }
    m_strDocDate = cSourceDoc.GetDocDate();
    m_nDocID = cSourceDoc.GetDocID();
    m_strDocType = cSourceDoc.GetDocType();
} 
```

问题是，当我稍后尝试通过从文档数组中拉取文档来访问文档时，我上面复制的两个数组是空的。似乎已初始化并具有内存地址，但它们不包含数据。虽然填充了成员变量。我不确定我是否复制不正确，或者问题是否出在其他地方。

**编辑：**常规构造函数如下所示：

```
CMyDocument::CMyDocument()
{
    m_lpastrFields = new CStringArray;
} 
```

在这种情况下，我没有新建`m_lpacLines`对象，因为它是通过一个名为 InitDocument 的函数传递到 MyDocument 对象的。我不妨把它包括在这里。（一些不必要的细节，比如我解析`strLine`变量以提取所有值的方式，为简洁起见被修剪了。

```
void CMyDocument::InitDocument(CMyColumns* lpcColumns, CString strLine, CArray<CMyLine, CMyLine>* lpacLines)
{
    CString strValue;
    CString strComma = ",";
    int     nPos = 0;

    m_lpacLines = lpacLines;

    while (-1 != nPos)
    {
        strValue = strLine.Tokenize(strComma, nPos);
        m_lpastrFields->Add(strValue);
    }
    m_strDocDate = m_lpastrFields->GetAt(lpcColumns->GetDocDateIndex());
    CString strDocID = m_lpastrFields->GetAt(lpcColumns->GetDocIDIndex());
    m_nDocID = atoi(strDocID);
    m_strDocType = m_lpastrFields->GetAt(lpcColumns->GetDocTypeIndex());
} 
```

需要明确的是，每次循环时，我都会`new`在函数之外调用 lpacLines 对象。`InitDocument`我已经调试了这段代码，并且这里的所有内容都被正确分配。

**第二次编辑：**在尝试转换这些所有非指针成员变量时，我现在遇到错误 C2248：'CObject::CObject'：无法访问在类'CObject'中声明的私有成员。回想起来，像这样的问题可能是促使我首先使用指针的原因。

**第三次编辑：**这是类声明：

```
class CMyDocument
{
    public:
        CMyDocument();
        ~CMyDocument();
        CMyDocument(CMyDocument& cSourceDoc);
        void    InitDocument(CMyColumns* lpcColumns, CString strLine, CArray<CMyLine, CMyLine>* lpacLines);
        inline  CString GetDocDate(void) {return(m_strDocDate);};
        inline  int     GetDocID(void) {return(m_nDocID);};
        inline  CString GetDocType(void) {return(m_strDocType);};

        inline  CStringArray*   GetFields(void) {return(m_lpastrFields);};
        inline  CArray<CMyLine, CMyLine>*   GetLines(void) {return m_lpacLines;};
    private:
        CArray<CMyLine, CMyLine>*   m_lpacLines;
        CStringArray*   m_lpastrFields;

        CString             m_strDocDate;
        int                 m_nDocID;
        CString             m_strDocType;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T23:37:43.203

Now that you've posted the full class definition, it is clear that you are indeed violating the [Rule of Three](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three): **If you need to explicitly declare either the destructor, copy constructor or copy assignment operator yourself, you probably need to explicitly declare all three of them.**

You have a copy constructor, and a destructor, but no copy assignemnt. Add these members and you should be fine.

```
CMyDocument& operator=(CMyDocument cSourceDoc) {
    swap(cSourceDoc);
    return *this;
}

void swap(CMyDocument& cSourceDoc) {
   using std::swap;
   swap(m_lpacLines, cSourceDoc.m_lpacLines);
   swap(m_lpastrFields, cSourceDoc.m_lpastrFields);
   swap(m_strDocDate, cSourceDoc.m_strDocDate);
   swap(m_nDocID, cSourceDoc.m_nDocID);
   swap(m_strDocType, cSourceDoc.m_strDocType);
} 
```

Your constructor allocates memory, and makes a member point at it. Somewhere in your code you are making a copy of a `CMyDocument`. Since you have no copy assignment operator, the compiler uselessly made one for you, that simply copies the pointer, so that you then have *two* `CMyDocument` objects pointing at the same `CArray` and `CStringArray`. Then, when one of them is deleted, they delete the `CArray` and `CStringArray`, and the other `CMyDocument` is left with useless pointers that point at invalid memory. When you are attempting to use that invalid memory, *sometimes, if you get lucky* you'll see what used to be there. In this case, the empty `CArray` and `CStringArray`. (They empty themselves right as they are deleted). If you weren't lucky, the program would have simply crashed.

# c - 打印两个索引之间的所有字母字符

> ID：15624713
> 
> 赞同：0
> 
> 时间：2013-03-25T21:03:32.877
> 
> 标签：c

这个问题我有点麻烦。我不断得到“构建成功”（我在 xCode 中工作）但没有打印输出。

这是问题：

“写一个程序和一个void函数。void函数将两个int作为传值参数。这两个int给出了位置范围内的开始和结束（开始保证小于结束）字母序列（A 为 0，B 为 1 等）该函数必须在升序 FOR 循环中打印开始的大写字母和随后的每个大写字母。您可以使用 put char() 或 printf。例如：如果用户类型为“CJ”，传递给函数的整数为 2 和 9，打印输出为“CDEFGHIJ”。

这是我的代码：

```
#include <stdio.h>

void writeLetters (int begin, int end);

int main() {

    char beginChar, endChar;
    int beginInt, endInt;

    scanf("%c%c", beginChar, endChar);

    beginInt = beginChar*1;
    endInt = endChar*1;

    writeLetters(beginInt, endInt);

    return 0;
}

void writeLetters (int begin, int end) {

    int i;
    char beginChar = begin*'A', endChar = end*'A';

    for (i=begin; i<=end; i++) {

        printf("%c", beginChar);
        beginChar += 'A';
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:23:06.613

你有很多问题；有些已经被指出，有些还没有。看看你的函数，它每次通过循环都会递增`writeLetters`。`beginChar``'A'`

尝试这个：

```
void writeLetters (int begin, int end) 
{
    while(begin <= end)
    {
        printf("%c", 'A' + begin);
        begin++;
    }
}

int main() 
{
    char beginChar, endChar;

    scanf("%c%c", &beginChar, &endChar);

    /* live dangerously - don't error check scanf and don't
     * sanitize the input. In real life, you should always
     * practice safe hex.
     */
    writeLetters(beginChar - 'A', endChar - 'A');

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:09:06.513

```
scanf("%d%d", &beginInt, &endInt);    
....

void writeLetters (int begin, int end)
{
   int i;

   for (i=begin; i <= end; i++)
   {
       printf("%c", (char)('A' + i));
   }
} 
```

# messagebox - Extjs 消息框提示限制用户输入的文本输入

> ID：15624715
> 
> 赞同：3
> 
> 时间：2013-03-25T21:03:36.313
> 
> 标签：messagebox, extjs3

我正在使用[http://dev.sencha.com/playpen/docs/output/Ext.MessageBox.html#prompt](http://dev.sencha.com/playpen/docs/output/Ext.MessageBox.html#prompt)来显示 extjs 提示，用户可以在其中输入一些文本并单击确定。现在如果我想限制用户输入不超过 100 个字符的文本，我该怎么办？

我知道我需要编写某种事件处理程序，但事件是什么？是否可以查看代码示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:01:40.143

当您调用`MessageBox.prompt`它时，它将返回单例实例，该实例可用于获取文本框元素的 dom 引用，该元素可用于指定`maxlength`可用于限制可输入文本长度的属性

```
var dlg = Ext.MessageBox.prompt('Name', 'Please enter your name:', function(btn, text){
    if (btn == 'ok'){
        // process text value and close...
    }
});

var textboxEl = dlg.getDialog().body.child('input[class=ext-mb-input]', true);
textboxEl.setAttribute('maxlength', 1);   // second parameter is character length allowed so change it according to your need 
```

**参考：**

[HTML中的字符限制](https://stackoverflow.com/questions/113376/character-limit-in-html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T15:56:48.043

为 Ext 4 更新（非常感谢 SilentSakky 的原始答案）：

```
var dlg = Ext.MessageBox.prompt('Name', 'Please enter your name:', function(btn, text){
    if (btn == 'ok'){
        // process text value and close...
    }
});

var textboxEl = dlg.getEl().query('input')[0];
textboxEl.setAttribute('maxlength', 1); 
```

# sql - 如何根据多列的聚合返回单行

> ID：15624718
> 
> 赞同：5
> 
> 时间：2013-03-25T21:03:54.457
> 
> 标签：sql, sql-server, tsql

抱歉标题模棱两可，不知道如何搜索，或者问这个问题。

假设我们有 TableA：

```
RowID FkId 排名日期
ID1 A 1 2013-3-1
ID2 A 2 2013-3-2
ID3 A 2 2013-3-3
ID4 B 3 2013-3-4
ID5 A 1 2013-3-5

```

我需要创建一个视图，它将为每个 FkId 返回 1 行。该行应该是最大排名和最大日期。因此，对于 FkId“A”，查询将返回“ID3”的行。

我能够通过使用子查询返回单行；首先我得到 MAX(Rank)，然后加入另一个查询，该查询通过 FkId & Rank 获取 MAX(Date) 组。

```
选择表 A.*
(Select FkId, MAX(Rank) AS Rank FROM TableA GROUP BY FkId) s1
INNER JOIN (Select FkId, Rank, MAX(Date) AS Date from TableA GROUP BY FkId,Rank) s2 ON s1.FkId = s2.FkId AND s1.Rank = s2.Rank
在 s2.FkId = TableA.FkId AND s2.Rank = TableA.Rank AND s2.Date = TableA.Date 上的内部连接 ​​TableA

```

是否有更有效的查询可以达到相同的结果？感谢您的关注。

编辑：自上次回答以来添加了 ID5。如果我尝试正常的 MAX(rank),MAX(Date) GROUP BY FkId，那么对于“A”，我会得到 A；2；2013 年 3 月 5 日。此结果与 RowId 不匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T21:10:02.813

您可以使用[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)CTE [（](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)假设 sql-server >= 2005）：

```
WITH CTE AS
(
   SELECT TableA.*,
      RN = ROW_NUMBER() OVER (PARTITION BY FkId Order By Rank Desc, Date DESC)
   FROM Table A
)
SELECT RowID,FkId, Rank,Date
FROM CTE WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:05:45.467

您的问题（在对此答案的评论中澄清）要求：

1.  每个 FkId 一行
2.  最大日期和排名
3.  结果对应于原始数据中的一行。

如果 FkId 的行中最大日期和最大排名位于不同的行中，则您必须至少放宽其中一项要求。

如果您愿意放宽要求（3），那么您可以使用[`GROUP BY`](http://www.techonthenet.com/sql/group_by.php)：

```
SELECT FkId, MAX(Rank) AS Rank, Max(Date) AS Date
FROM TableA
GROUP BY FkId 
```

鉴于评论中的额外信息。如果您想要每个 FkId 的最新的、排名最高的条目，以下应该可以工作：

```
SELECT FkId, Rank, MAX(Date) AS Date
FROM TableA A
WHERE Rank = (SELECT MAX(Rank) 
              FROM TableA sub 
              WHERE A.FkId = sub.FkId 
              GROUP BY sub.FkId)
GROUP BY FkId, Rank 
```

这是一个[sqlfiddle 来展示它](http://sqlfiddle.com/#!2/a2dce/2)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T21:48:37.900

您可以使用 Rank() 和内联查询来实现它。

```
 select * from TableA
where RowID in (
      select rowID from (
           select FKID, RowID, 
                  rank() over (partition by FKID order by [Rank] desc, [Date] desc) as RankNumber
                  from TableA ) A
      where A.RankNumber=1 ) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!6/879e8/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T23:10:04.277

你也可以偷偷摸摸地完成 ljh 这样的[建议](http://sqlfiddle.com/#!6/879e8/2)：

```
select top 1 with ties *
from TableA
order by rank() over (
  partition by FKID
  order by [Rank] desc, [Date] desc
) 
```

# php - 我的 dojo ajax php 请求出错

> ID：15624720
> 
> 赞同：0
> 
> 时间：2013-03-25T21:04:05.723
> 
> 标签：php, javascript, sql, dojo, indexing

我试图使用 dojo ajax 函数来调用 PHP 文件，然后以 JSON 格式返回数据库表的内容。

我的功能：

```
 var _getWeatherInfo = function(){
     dojo.xhrget({

         url: "PHP/weather.php?ntown=" + _ntown,

         handleAs: "json",
         timeout: 5000,

         load: function(responce, details) {
            _updateWeathertData 
         },          
         error: function(error_msg, details) {
             _handleError(error_msg);
         }
     });
 } 
```

我的PHP：

```
<?php include('configHome.php'); ?>

<?php
    $ntown = $_GET['ntown'];

    $weather = array();

    $query="SELECT * FROM `weather` WHERE `town` = '$ntown'";
    $result=mysql_query($query);

    while($row = mysql_fetch_row($result)) {

        $weather[] = $row[0];
    } 

    echo json_encode($weather);

    mysql_close();
?> 
```

使用此代码时，我收到一条错误消息，提示“$ntown = $_GET['ntown'];” 是一个未定义的索引。我尝试将索引全部删除并在选择语句中使用实际值（即 SELECT * FROM `weather`WHERE `town`= 'Auckland'），但我得到的只是我输入的值 ["Auckland"]，而不是其他 3 个值是要返回的，["Auckland", "Sunny", "8", "14"]。

有任何想法吗？如果需要，我可以尝试添加更多信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:14:52.047

您的代码还有其他一些问题，但要解决您要问的问题。你有这个：

```
while($row = mysql_fetch_row($result)) {
    $weather[] = $row[0];
} 
```

您所做的只是获取该行的第一个值（其中可能只有一个，然后将其发送回去。这就是您需要的：

```
$weather = mysql_fetch_row($result); 
```

# css - 悬停时更改按钮内的字体图标颜色

> ID：15624730
> 
> 赞同：4
> 
> 时间：2013-03-25T21:04:20.837
> 
> 标签：css, hover, css-selectors

在我的网站（开发中）[http://www.stefaanoyen.be](http://www.stefaanoyen.be)的页脚中，文本前有 3 个带有箭头的按钮。箭头是一种图标字体，我希望它在按钮悬停时改变颜色（按钮文本也是如此）。

知道怎么做吗？

**这是我的html：**

```
<a class="footerbutton"><span class="footerlist">X</span>Vraag offerte</a> 
```

**这是按钮：悬停 css：**

```
a:hover.footerbutton {
background-color: #B61618;
color: #ddd;
border: none;
text-decoration: none;
} 
```

**这是页脚列表跨度类 css：**

```
.footerlist:hover {
color: #ddd;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:07:27.127

在悬停按钮内定位图标颜色的最简单方法是像这样定位它：

```
.footerButton:hover .footerlist {
   color: #ddd;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:08:53.777

这应该有效：

```
a:hover.footerbutton:hover .footerlist {
    color: #ddd;
} 
```

# opengl - 如何插入顶点法线？

> ID：15624736
> 
> 赞同：5
> 
> 时间：2013-03-25T21:04:59.613
> 
> 标签：opengl, interpolation, normals, marching-cubes

我正在尝试使用行进立方体算法使用 Gouraud 着色来渲染 3D 模型（来自 volvis.org）。到目前为止，我有每个顶点的法线：

```
GetNormalForVertex(vertex &b, vertex &a, vertex &c) {
    u.X = a.X - b.X;
    u.Y = a.Y - b.Y;
    u.Z = a.Z - b.Z;
    v.X = c.X - b.X;
    v.Y = c.Y - b.Y;
    v.Z = c.Z - b.Z;

    return  Cross(u,v);
} 
```

渲染时我可以看到一个漂亮的平面阴影。现在，据我所知，我需要对这些顶点法线进行插值以在交点处找到法线以获得 Gouraud 着色。我怎样才能插入顶点法线？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T03:20:01.983

首先，您没有计算顶点法线。您正在计算*face normals*。这是计算顶点法线过程中的第 1 步。

下一步不是*插值*任何东西。您所做的是为连接到顶点的每个面计算（未标准化的）面法线。然后将它们加在一起并标准化结果。那是顶点法线。

如何确定哪些面附加到顶点是另一回事。在您的情况下，因为您是通过行进立方体构建此数据，所以从相邻立方体生成或检索三角形应该不会太难。但是，如果您通过了生成步骤并且只有一袋三角形，那么您将需要一个适当的网格拓扑数据结构。[翼边](http://en.wikipedia.org/wiki/Winged_edge)或[四边](http://en.wikipedia.org/wiki/Quad-edge)都是不错的选择。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-25T21:32:16.317

什么是a、b和c？

如果它们是三角形的顶点，那么您正在计算**三角形的法线，而不是任何特定的 vertex**。在这种情况下，假设整个三角形都是平坦的。这称为*平面着色*。

另一方面，如果您希望在三角形内部插入表面法线（在*Gouraud 着色*中使用），那么您需要**在三个顶点处具有三个不同的法线，以 开头**。这有点不那么琐碎，但仍然很容易。一种方法是对**共享一个顶点的所有三角形的法线进行平均，以获得该顶点的法线**。这显然需要连接信息（或者您需要以某种方式提取它）。

一旦你有了三个不同的法线（比如 na、nb、nc），那么任何内部点的法线都可以通过*重心坐标*计算。设顶点为 va、vb、vc，内点的重心坐标为 α 和 β。然后，内部点 v 及其法线 n 由下式给出：

```
v = α*va + β*vb + (1 - α - β)*vc
n = α*na + β*nb + (1 - α - β)*nc 
```

此插值法线 (n) 应用于 Gouraud 着色。

# c - 在C中随机时间生成随机线程

> ID：15624739
> 
> 赞同：0
> 
> 时间：2013-03-25T21:05:15.797
> 
> 标签：c, multithreading, random

可能吗？我的代码基于这个： [http ://cnds.eecs.jacobs-university.de/courses/osn-2004/s3.pdf](http://cnds.eecs.jacobs-university.de/courses/osn-2004/s3.pdf)

我想改变的是我想以随机方式（一种或另一种）和随机时间生成east（）和west（）函数线程，因为代码只生成你在nw上插入的线程数主函数中的（向西的线程）和 ne（向东的线程）变量。我不是在寻找任何代码，因为我还没有编写我的代码并且该代码是由另一个人编写的，我只是想知道如何使用 random()或实现我的目标的其他功能。我对这件事仍然没有正确的想法。例如，如果您使用 nw=3 和 ne=2 运行程序，它将打印出哪些汽车正在过桥以及朝哪个方向（前 3 辆向西，然后 2 辆向东）。我希望它更真实，有随机的汽车，在不同的时间到达桥，所以我可以像交警一样做一个决定哪辆车先走的函数。对不起，如果我不清楚这些想法。任何帮助都会很有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:21:10.133

在整个计算机科学世界中，没有任何东西可以复制“随机”概念的属性。等效的东西是伪随机数生成器。

[在 C 语言中，有与rand()](http://www.cplusplus.com/reference/cstdlib/rand/)等专用标准不同的函数。

关于线程的部分，大概可以参考“线程生成”这个话题。

[这是一个简单的答案](https://stackoverflow.com/questions/4964142/how-to-spawn-n-threads)，例如一个简单的相关代码库。

我个人认为，对于此类应用程序，您应该切换到 C++，特别是如果您甚至不熟悉您所从事的主要主题，尤其是对 C++11 特性的看法。

请注意，在谈论伪随机数生成时，使用和编码可以正确完成工作的算法非常重要，许多人认为标准中的 C 函数只是“损坏”，因为在重现伪随机行为方面存在问题以有效的方式。因此，根据您的需要，标准中的功能还不够。

# rdp - 如何使用 VB 读取和更改命令脚本中的行？

> ID：15624740
> 
> 赞同：0
> 
> 时间：2013-03-25T21:05:19.093
> 
> 标签：rdp

简短版：我知道没有一种简单的方法可以做到这一点，但是如何使用 VB 更改命令文件中的行？

Long：在登录脚本中工作，该脚本将（最终）根据特定用户的用户名填充 RDP 文件（IE：user@blahdeblah.com 转到完整地址：s:blahdeblah.blahdeblah.com 等等）。地址的一部分中的多个服务器位置。我已经完成了提取文件、捕获用户名和它们应该去哪里的简单部分，但我缺乏关于如何填充文件的知识。我在这里看到了一些关于阅读文本然后更改出现在列中的单词的帖子，但是相同的做法是否可以在行中起作用？

如果 RDP 中的整个文本文件是 47 行，我可以说“用*_*替换第 45 行”吗？

我知道阅读起来很痛苦。

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:58:27.240

你几乎肯定想做一些更像是找到“完整地址”的行，然后用另一行替换它，行号是一个非常容易破坏的东西。我不是可以轻松测试整个事情的地方，但是您想要类似的东西：

```
Dim oFSO
Dim inTS,OutTS
Dim tline
Set oFSO = CreateObject("Scripting.FileSystemObject")
Set inTS = oFSO.OpenTextFile("default.rdp",1,1)
Set outTS = oFSO.CreateTextFile("mynew.rdp", true,true)
While inTS.AtEndOfStream = false 
tline = inTS.ReadLine
If InStr(1,tline,"full address:",1) > 0 Then 
WScript.Echo("found " &InStr(tline,"full address:"))
outTs.WriteLine("full address:s:SERVER")
Else
outTs.WriteLine(tline)
End If
Wend       
inTS.Close
outTS.Close 
```

虽然你可能在使用 unicode 时遇到了一些问题，但运行 gnuwin32 的 sed 版本之类的东西可能会更好

# c - 通过指针参数进行二维数组操作

> ID：15624744
> 
> 赞同：2
> 
> 时间：2013-03-25T21:05:32.623
> 
> 标签：c, arrays, function, pointers

我正在创建一组函数，它们接受一个指向二维数组的指针并用一些数据填充数组

这就是我现在得到它的方式：

```
17 void m4identity(float *m[4][4]) {
18    *m = (float[4][4]) { { 1, 0, 0, 0 },
19                         { 0, 1, 0, 0 },
20                         { 0, 0, 1, 0 },
21                         { 0, 0, 0, 1 } };
22 } 
```

但不幸的是，我得到一个编译器错误：

```
linalg.c:18:7: error: incompatible types when assigning to type ‘float *[4]’ from type ‘float (*)[4]’ 
```

问题：

1.  `(*)[4]`和 和有什么不一样`*[4]`？

2.  有一个更好的方法吗？

    我最初试图返回一个指向函数内部创建的数组的指针，但这引发了另一个编译器错误，因为它超出了范围。我还想避免从函数内部为数组分配空间，因为这很难控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:10:12.360

> `(*)[4]`和 和有什么不一样`*[4]`？

声明说明符具有更高的`[]`优先级，因此`float *arr[4]`声明了一个包含 4 个指针的数组`float`，而`float (*arr)[4]`声明了一个指针数组的 4- `float`。

> 有一个更好的方法吗？

只需让数组衰减为指针并使用赋值：

```
void m4identity(float m[4][4])
{
    memset(m, 0, 4 * sizeof(m[0]));
    for (int i = 0; i < 4; i++) {
        m[i][i] = 1;
    }
} 
```

# windows-phone-7 - WP7 模拟器没有启动应用程序

> ID：15624745
> 
> 赞同：0
> 
> 时间：2013-03-25T21:05:38.483
> 
> 标签：windows-phone-7, emulation

我正在使用 Windows Phone 7.1 在 Visual Studio 2010 中的 XNA 4.0 中制作游戏

出于某种原因，每当我按下 F5 或“运行”按钮时，模拟器都会启动应用程序，但会立即关闭并停止应用程序。我什至看不到实际的游戏画面。它只是过渡到游戏，然后直接退出。

我没有任何构建错误，并且我将模式设置为调试。

我完全没有想法。有谁知道是什么问题？

（是的，我尝试关闭并重新打开 VS 和模拟器 - 遗憾的是无济于事）。

**编辑**

我发现它倒下的地方，它在这些线上搞砸了：

```
 TimeSinceLastFrame += gameTime.ElapsedGameTime.Milliseconds;               
 if (TimeSinceLastFrame > MillisecondsPerFrame)
 {
     TimeSinceLastFrame = 0;
     FrameIndex++;
     if (FrameIndex > 5)
     {
        FrameIndex = 0;
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:09:39.290

您正在做的事情导致运行时异常。不幸的是，WP7/8 的异常处理/消息非常糟糕，因此您需要手动深入研究。尝试逐位注释您的初始化代码，直到找出导致崩溃的部分。还可以查看输出窗口中的输出以了解正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:17:43.807

啊，愚蠢的我。都是我的错。我不小心忘记给我的 MillisecondsPerFrame 属性提供一个默认值，仅此而已。

# c# - 在 Unity 运行时删除重复的顶点

> ID：15624751
> 
> 赞同：3
> 
> 时间：2013-03-25T21:05:57.797
> 
> 标签：c#, algorithm, unity3d

在我的 Unity 项目中，我有一个需要大量优化的动态网格系统。目前我正在寻找一种通过在运行时删除重复顶点来优化网格的算法（网格被组合成一个巨大的网格）。删除占据相同空间的重复面相当容易，因为如果它们在阈值内共享相同空间，则可以安全地删除它们（因为它们不会显示）。

我在重复顶点方面遇到了更多麻烦，因为它们需要以某种方式删除，否则网格完全搞砸了。在我最初的尝试之后，我得到了一个包含顶点的对象数组`Vector3`，并且我能够在一定程度上对其进行操作。似乎删除只是其中的一半，因为在更多地研究网格拓扑之后，似乎我需要在删除另一个之后进行更多的合并。

这是我基本上被卡住的部分。表面上，我认为这将是相当简单的。获取所有需要删除的顶点附加到的三角形，并将三角形重新分配给保留的顶点。但是在实践中并不是那么容易。

首先，有没有更简单的方法？我很惊讶 Unity 在某处没有合并顶点脚本，或者至少没有一个示例。其次，有没有更好的方法，如何？我遇到了空间散列，但是，我仍然停留在我以某种方式合并顶点的部分。第三，合并实际顶点。我应该如何以最有效的方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-03T17:20:37.000

在这种情况下使用 HashSet 有用吗？对于那些不知道的人，HashSet 就像一个列表，但在搜索元素时要快得多。由于 HashSet 的性质，它们不能存储重复项。将顶点存储在 HashSet 中可能意味着根本不会添加任何重复项，几乎不需要处理能力。

我知道这个问题很老，但我想我会尽力帮助其他寻找这个答案的人——我根本不是编程专家，只是认为写这个不会有什么坏处。

# alfresco - Alfresco processdefinition xml 脚本

> ID：15624752
> 
> 赞同：0
> 
> 时间：2013-03-25T21:05:58.717
> 
> 标签：alfresco

在 Alfresco processdefinition xml 脚本中，NodeRef var 的可能方法调用是什么？例如，如果我有一个这样定义的 var：

var node = utils.getNodeFromString(library);

我知道我可以使用“移动”和“保存”等方法，但完整的方法列表是什么？（这是在哪里记录的？）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:27:11.030

[您可以在官方文档](http://docs.alfresco.com/4.1/index.jsp?topic=/com.alfresco.enterprise.doc/references/API-JS-Scripting-API.html)或[wiki](http://wiki.alfresco.com/wiki/4.0_JavaScript_API)中找到有关 Alfresco JavaScript API 的详尽文档。

确保您正在查看与您的 Alfresco 实例匹配的文档版本，API 中可能存在相关差异。

# java - 是否可以更改我的数据当前的显示方式？

> ID：15624762
> 
> 赞同：0
> 
> 时间：2013-03-25T21:06:29.403
> 
> 标签：java, swing, jtable, row, cellrenderer

我正在使用 JTable，在它填充数据后，底部有一个带有文本输入的搜索按钮。一旦我输入“Joe”，它就会显示所有 joes 的详细信息。但是，这些显示在从左到右的一行中（很像电子表格行）。

我想知道是否有办法让它以不同的方式显示这些数据？更像是一张桌子，而不是在一个单独的行中穿过......

请告诉我是否需要显示我的部分代码，因为它有点多，我不确定是否应该将其全部粘贴。（本网站的新手）。

谢谢。

代码：

私人无效makeframe（）

```
 {
   frame = new JFrame("Search");
   frame.setPreferredSize(new Dimension(300, 300));
   Container contentPane = frame.getContentPane();
   contentPane.setLayout(new BorderLayout());
   }

   DefaultTableModel  model = new DefaultTableModel();
   model.addColumn("User");
   model.addColumn("first name");
   model.addColumn("surname");
//this goes on for a while

     model.addRow(data);
   JTable mainTable = new JTable(model);
   contentPane.add(new JScrollPane (mainTable));

  frame.setPreferredSize(new Dimension(1300, 200));
    frame.pack();
    frame.setVisible(true);
    frame.setLocationRelativeTo(null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:09:21.227

您可以尝试以您喜欢的格式创建面板，然后使用只有 1 列的表格。将您的面板放在此列内。

# vim - 在 VIM 中的拆分视图之间切换

> ID：15624763
> 
> 赞同：-2
> 
> 时间：2013-03-25T21:06:30.300
> 
> 标签：vim

我无法在 Vim 中的两个视图之间切换。

我正在使用 Secure Shell 客户端，每次按下`CTRL+W+W`切换时，以下几行都会连接到我的代码末尾：

拼写：找不到命令

谢谢。

最好的...SL

更新：

以下是评论中建议的 ":verbose nmap..." 命令的结果：

```
<C-W>        :w<CR>Go<Esc>:$r!spell %<CR>
             Last set from ~/.exrc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:08:32.387

您的`~/.exrc`文件中有一个映射`<c-w>`键映射。它看起来映射保存文件，然后将拼写命令的输出放在文件的底部。我建议您删除`<c-w>`映射`~/.exrc`或将其重新映射到其他类似`<f8>`.

如果您担心您的拼写映射，您可能需要查看 vim 的内置拼写。在您的文件中设置以下内容`~/.vimrc`：

```
set spelllang=en_us 
set spell 
```

您可以使用`]s`和`[s`来获取更多下一个和上一个拼写错误的单词，并使用它`z=`来获得拼写建议。您还可以`<c-x>s`在插入模式下使用来获取当前单词的拼写建议。有关拼写的更多信息，请参见`:h spell`

如需更多帮助，请参阅：

```
:h exrc
:h vimrc-intro 
```

# c# - 异步服务器套接字示例

> ID：15624764
> 
> 赞同：0
> 
> 时间：2013-03-25T21:06:34.843
> 
> 标签：c#, sockets, asynchronous, tcp, invoke

我找到了异步服务器套接字示例的这段代码，我试图从接收信息的线程中获取数据以更新文本框，但我不能只使用简单的字符串。我已经尝试过一些调用`Control.Invoke Method (Delegate, Object[])`来更新它但是当程序到达`form1.Invoke(form1.updateTextBox, content);`我得到这个错误：

```
Invoke or BeginInvoke cannot be called on a control until the window handle has been created. 
```

可悲的是 MessageBox 正在工作并显示我收到的数据。

这是代码：

```
using System; 
using System.Collections.Generic; 
using System.ComponentModel; 
using System.Data; 
using System.Drawing; 
using System.Linq; 
using System.Text; 
using System.Windows.Forms; 
using System.Net; 
using System.Net.Sockets;
using System.Threading;

namespace Stream_Socket_Listener {
    public partial class Form1 : Form
    {
        public delegate void updateTextBoxDelegate(String textBoxString); // delegate 
        public updateTextBoxDelegate updateTextBox;
        void updateTextBox1(string str)
        {
            textBox1.Text = str;
        }
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e) { }

        private void button1_Click(object sender, EventArgs e)
        {
            updateTextBox = new updateTextBoxDelegate(updateTextBox1);
            AsynchronousSocketListener.StartListening();
        }

    }

    // State object for reading client data asynchronously
    public class StateObject
    {
        // Client socket.
        public Socket workSocket = null;
        // Size of receive buffer.
        public const int BufferSize = 1024;
        // Receive buffer.
        public byte[] buffer = new byte[BufferSize];
        // Received data string.
        public StringBuilder sb = new StringBuilder();
    }

    public class AsynchronousSocketListener
    {
        // Thread signal.
        public static ManualResetEvent allDone = new ManualResetEvent(false);

        public AsynchronousSocketListener() {  }

        public static void StartListening()
        {
            // Data buffer for incoming data.
            byte[] bytes = new Byte[1024];

            // Establish the local endpoint for the socket.
            // The DNS name of the computer
            // running the listener is "host.contoso.com".
            IPHostEntry ipHostInfo = Dns.Resolve(Dns.GetHostName());
            IPAddress ipAddress = ipHostInfo.AddressList[0];
            IPEndPoint localEndPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 
              11000);

            // Create a TCP/IP socket.
            Socket listener = new Socket(AddressFamily.InterNetwork,
            SocketType.Stream, ProtocolType.Tcp);

            // Bind the socket to the local endpoint and listen for incoming                 
            // connections.
            try
            {
                listener.Bind(localEndPoint);
                listener.Listen(100);

                while (true)
                {
                    // Set the event to nonsignaled state.
                    allDone.Reset();

                    // Start an asynchronous socket to listen for connections.
                    Console.WriteLine("Waiting for a connection...");
                    listener.BeginAccept(new AsyncCallback(AcceptCallback),listener);

                    // Wait until a connection is made before continuing.
                    allDone.WaitOne();
                }

            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }

            Console.WriteLine("\nPress ENTER to continue...");
            Console.Read();
        }

        public static void AcceptCallback(IAsyncResult ar)
        {
            // Signal the main thread to continue.
            allDone.Set();

            // Get the socket that handles the client request.
            Socket listener = (Socket)ar.AsyncState;
            Socket handler = listener.EndAccept(ar);

            // Create the state object.
            StateObject state = new StateObject();
            state.workSocket = handler;
            handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
            new AsyncCallback(ReadCallback), state);
        }    

        public static void ReadCallback(IAsyncResult ar)
        {   String content = String.Empty;
            // Retrieve the state object and the handler socket
            // from the asynchronous state object.
            StateObject state = (StateObject)ar.AsyncState;
            Socket handler = state.workSocket;

            // Read data from the client socket.
            int bytesRead = handler.EndReceive(ar);

            if (bytesRead 0)
            {
                // There might be more data, so store the data received so far.
                state.sb.Append(Encoding.ASCII.GetString(
                state.buffer, 0, bytesRead));

                // Check for end-of-file tag. If it is not there, read
                // more data.
                content = state.sb.ToString();
                if (content.IndexOf("<EOF>") -1)
                {
                    // All the data has been read from the
                    // client. Display it on the console.
                    MessageBox.Show("Read " + content.Length + " bytes from socket. \n >Data" +  content);
                    Form1 form1 = new Form1();
                    Application.DoEvents();
                    form1.Invoke(form1.updateTextBox, content);
                    // Echo the data back to the client.
                    Send(handler, content);
                }
                else
                {
                    // Not all data received. Get more.
                    handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                    new AsyncCallback(ReadCallback), state);
                }
            }
        }
        private static void Send(Socket handler, String data)
        {
            // Convert the string data to byte data using ASCII encoding.
            byte[] byteData = Encoding.ASCII.GetBytes(data);

            // Begin sending the data to the remote device.
            handler.BeginSend(byteData, 0, byteData.Length, 0,
            new AsyncCallback(SendCallback), handler);
        }

        private static void SendCallback(IAsyncResult ar)
        {
            try
            {
                // Retrieve the socket from the state object.
                Socket handler = (Socket)ar.AsyncState;

                // Complete sending the data to the remote device.
                int bytesSent = handler.EndSend(ar);
                MessageBox.Show("Sent "+ bytesSent+ " bytes to client.");

                handler.Shutdown(SocketShutdown.Both);
                handler.Close();

            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:50:04.333

我认为您的问题是因为您在完全创建表单之前调用了表单的方法。尝试预先创建表单并忽略这些调用，直到表单准备好。此外，您可能需要执行以下操作：

```
 if (InvokeRequired)
            {
                Invoke(new MethodInvoker(addMsg));
            }
            else
            {
                updateTextBox(content)
            } 
```

避免由于从不同线程调用方法而导致的问题。

# c - 调试syslinux看到的引导文件系统环境？

> ID：15624772
> 
> 赞同：3
> 
> 时间：2013-03-25T21:06:49.240
> 
> 标签：c, linux, boot, syslinux

希望记下来是可以的，即使我不能立即接受答案（并希望这样可以 - 因为下面有一个 C 补丁）：

看来我把台式电脑上的硬盘搞砸了（`{DRDY err}`）。所以我想运行一个可启动媒体来运行`fsck`，但是这个桌面上的CD坏了，所以我只能使用U盘。我有几个带有 Ubuntu 和 Suse 的 USB 拇指驱动器——它们开始在桌面上启动；但是在启动过程中，udev 会尝试检测硬盘驱动器，并且由于硬盘被拧紧，它只是在那里循环，并且相应的操作系统永远不会完成启动。

所以我尝试下载[SystemRescueCd](http://www.sysresccd.org/Download)；我有这个 USB 拇指驱动器，我尝试在其上安装 SystemRescueCD：

```
# lsusb with sudo, to retrieve all info
$ sudo lsusb -v -d 058f:6387 | grep -i 'id\|iManufacturer\|iProduct\|iSerial\|bInterface'
Bus 001 Device 043: ID 058f:6387 Alcor Micro Corp. Transcend JetFlash Flash Drive
  idVendor           0x058f Alcor Micro Corp.
  idProduct          0x6387 Transcend JetFlash Flash Drive
  iManufacturer           1 takeMS
  iProduct                2 Mem-drive Mini
  iSerial                 3 C5E7F0CC
      bInterfaceNumber        0
      bInterfaceClass         8 Mass Storage
      bInterfaceSubClass      6 SCSI
      bInterfaceProtocol     80 Bulk (Zip)

# search by serial:
$ find /dev/disk/by-id/ -name '*C5E7F0CC*'
/dev/disk/by-id/usb-takeMS_Mem-drive_Mini_C5E7F0CC-0:0-part1
/dev/disk/by-id/usb-takeMS_Mem-drive_Mini_C5E7F0CC-0:0

# list and get device node
$ ls -la /dev/disk/by-id/usb-takeMS_Mem-drive_Mini_C5E7F0CC-0:0
lrwxrwxrwx 1 root root 9 2013-03-25 20:37 /dev/disk/by-id/usb-takeMS_Mem-drive_Mini_C5E7F0CC-0:0 -> ../../sdc
$ ls -la /dev/disk/by-id/usb-takeMS_Mem-drive_Mini_C5E7F0CC-0\:0-part1
lrwxrwxrwx 1 root root 10 2013-03-25 20:37 /dev/disk/by-id/usb-takeMS_Mem-drive_Mini_C5E7F0CC-0:0-part1 -> ../../sdc1

# it is /dev/sdc - list disk info
$ sudo fdisk -l /dev/sdc

Disk /dev/sdc: 2108 MB, 2108686336 bytes
94 heads, 29 sectors/track, 1510 cylinders
Units = cylinders of 2726 * 512 = 1395712 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x0003e405

   Device Boot      Start         End      Blocks   Id  System
/dev/sdc1   *           1        1511     2059263+   c  W95 FAT32 (LBA) 
```

我尝试使用我的 Ubuntu 11.04 Natty 上网本对拇指驱动器进行映像 - 我同时使用了

*   推荐的[usb_inst.sh 安装程序](http://www.sysresccd.org/Sysresccd-manual-en_How_to_install_SystemRescueCd_on_an_USB-stick#Execute_the_installer)；和
*   我尝试使用`unetbootin`（通过`sudo apt-get install unetbootin`）；

在这两种情况下，当我尝试在桌面上启动 USB 拇指驱动器时，启动过程都会失败，并显示：

```
SYSLINUX 4.02 debian-20101016 CHS Copyright (C) 1993-2010 H. Peter Anvin et al
ERROR: No configuration file found
No DEFAULT or UI configuration directive found!
boot: 
```

....在启动时提示。（实际上，`unetbootin`在进入之前，“验证 DMI 池数据”失败`syslinux`- 可能是因为它比我尝试映像的 .iso 旧得多）。

[首先，我检查了未找到默认或 UI 配置](http://www.sysresccd.org/forums/viewtopic.php?f=14&t=3055)中提到的 md5 ！

```
$ md5sum ./systemrescuecd-x86-3.5.0.iso
48552b9e905872bd5061eb112b73ea20  ./systemrescuecd-x86-3.5.0.iso 
```

...但根据[Sysresccd-versions](http://www.sysresccd.org/Sysresccd-versions)似乎还可以。

然后我尝试将驱动器重新格式化为 FAT16（通过`sudo gparted /dev/sdc`）；`usb_inst.sh`并重复这两种`unetbootin`方法 - 再次没有骰子。有趣的是，在所有这些情况下，如果我尝试在 QEMU 模拟器中运行闪存 USB 拇指驱动器：

```
# sudo apt-get install qemu
sudo qemu -hda /dev/sdc 
```

...它可以正常启动 - 显示 syslinux 菜单等等；但是，启动总是在桌面上失败。

在这里我应该提到，我可以从有问题的台式电脑的启动屏幕上写下以下内容：

```
Award Modular BIOS v6.00PG
AMDRS740 BIOS 
```

它有一个通过 访问`F12`的引导菜单，在引导菜单中，除其他选项外，这些选项适用于 USB：

```
...
USB-FDD
USB-ZIP
USB-CDROM
USB-HDD
... 
```

通常，我选择 USB-HDD - 但我已经尝试过其他的；程序甚至在进入之前就冻结了`syslinux`- 或者如上所述引导失败。

有建议手动将目录/文件重命名`isolinux`为`syslinux`（[尝试从 USB 启动 - 询问 Ubuntu](https://askubuntu.com/a/128168)） - 当我使用时`usb_inst.sh`，只`syslinux/isolinux.bin`需要重命名。还有建议复制`syslinux.cfg`到 USB 闪存拇指驱动器的根目录（[无法启动 Live USB，Linux - 超级用户](https://superuser.com/a/182064/39752)）。但仍然没有改进 -`syslinux`仍然抱怨它缺少配置文件 - 这显然是`syslinux.cfg`.

然后我试着看看是否有可能以某种方式“调试” syslinux；[在 syslinux - The Syslinux Project - reboot.pro 中](http://reboot.pro/topic/15205-log-tracingdebuggingtrouble-shooting-in-syslinux/)找到日志跟踪/调试/故障排除：

> > 我们是否有特定的命令来跟踪或记录 syslinux？
> 作为开源，可以编译 Syslinux 并启用额外的调试输出。

还[[已解决] 卡在启动：Syslinux 问题 [存档] - Ubuntu 论坛](http://ubuntuforums.org/archive/index.php/t-2020351.html)：“_ 调试 syslinux 在[http://www.syslinux.org/wiki/index.php/Development/Debugging](http://www.syslinux.org/wiki/index.php/Development/Debugging)中进行了描述，但有效的调试（如果我正确回忆）需要重新编译它以添加调试钩子。_”。然而，[Development/Debugging - Syslinux Wiki](http://www.syslinux.org/wiki/index.php/Development/Debugging)谈到了一些叫做`bochs`; 我怀疑这是为了调试`syslinux`自己——不一定是“调试”（或查询）它所在的*环境*。

`syslinux`无论如何，最后，除了从源头上获取之外，我别无他法；基本上，这是需要的，所以它构建：

```
sudo apt-get install nasm
sudo apt-get install uuid-dev
git clone git://git.kernel.org/pub/scm/boot/syslinux/syslinux.git syslinux-git
cd syslinux-git/
make OPTFLAGS+=-DDEBUG=1 
```

事实证明，目前还不清楚如何启用这种调试，这将显示`syslinux`插入给定计算机时“看到”的内容；鉴于我确实`syslinux`在启动时加载，问题是它看到的文件系统是什么。我尝试启用如上所示的 DEBUG 环境变量（在添加`override OPTFLAGS :=`到之后`Makefile`） - 但它本身在引导失败期间没有生成任何新消息。我使用以下命令“刻录”了 USB 拇指驱动器（从 Gnome 小程序中卸载它之后）：

```
sudo ./linux/syslinux --stupid --directory /syslinux --install /dev/sdc1 
```

...而且我已经尝试过使用`stupid`和不使用（源构建版本和 Natty 的 Ubuntu 软件包存储库中的版本）。

通过源代码，我意识到有一个叫做`rosh`（[只读 SHell](http://www.syslinux.org/wiki/index.php/Read-Only_SHell(rosh.c32))）的东西 - 但是，它编译为`rosh.c32`- 并且应该将它作为引导内核选项`syslinux.cfg`- 如前所述，我无法加载。不幸的是，对我`rosh.c32`的问题没有太大帮助。

但是，鉴于`rosh`实现了该`ls`命令，我尝试将相关部分复制到 - 的代码中，并在扫描配置文件时`syslinux`触发`ls /`根目录的列表。`syslinux`随着这些变化，记录在[syslinux-e40ba60-rosh-ls.patch 中](http://sdaaubckp.sourceforge.net/patch/syslinux-e40ba60-rosh-ls.patch)；现在我在启动时得到以下信息：

```
SYSLINUX 4.06 CHS 5-ge40ba60* Copyright (C) 1993-2010 H. Peter Anvin et al
Listing: "/"
rosh_ls_arg_dir 0 files found
Listing: "/syslinux"
Listing: ""
CurrentDirName: "/syslinux/"
confignamebuf: /syslinux/extlinux.conf; realpath -1
confignamebuf: /syslinux/syslinux.cfg; realpath -1
confignamebuf: /boot/syslinux/extlinux.conf; realpath -1
confignamebuf: /boot/syslinux/syslinux.cfg; realpath -1
confignamebuf: /syslinux/extlinux.conf; realpath -1
confignamebuf: /syslinux/syslinux.cfg; realpath -1
confignamebuf: /extlinux.conf; realpath -1
confignamebuf: /syslinux.cfg; realpath -1
ERROR: No configuration file found
No DEFAULT or UI configuration directive found! 
```

有趣的是; 对于 root `/`，该`_ls`函数至少返回“0 个文件”；其他的（“/syslinux”和空字符串“”）在`opendir`调用时已经失败了——所以这个`_ls`函数甚至没有被调用！

我会认为我对该`ls`功能的闹剧复制不会按预期工作。但是`qemu`在上网本上运行拇指驱动器，实际上确实提供了完整的文件列表 - 并且至少对于`/`，该函数被调用并在桌面上返回 - 我怀疑它确实有效。

但是，这仍然不能解决我的问题 -*为什么*在`syslinux`启动后会看到根目录下的 0 个文件`/`？我还能做些什么来调试这个问题？我不介意修补一些 C 代码`syslinux`- 但我只是不知道我应该寻找什么，这将指向我正确准备 USB 拇指驱动器以在台式机上启动......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T22:47:42.367

好的，我启动它...

[首先，我注意到根据Mbr - Syslinux Wiki](http://www.syslinux.org/wiki/index.php/Mbr)和[HowTos - Syslinux Wiki](http://www.syslinux.org/wiki/index.php/HowTos#How_to_Create_a_Bootable_USB%3a_For_Linux)在构建的 git 源中存在替代 mbr ，所以我尝试了两者`mbr.bin`-`altmbr.bin`像`altmbr.bin`这样：

```
$ printf '\1' | cat mbr/altmbr.bin - | sudo dd bs=440 count=1 conv=notrunc iflag=fullblock of=/dev/sdc 
```

...但这并没有太大帮助。

最后，我注意到`lsusb`上面写着“bInterfaceProtocol 80 Bulk (Zip)”；我记得在某处读过一些关于 ZIP 驱动器的东西，所以试着查了一下——最后找到了这个：

[syslinux/doc/usbkey.txt](http://www.syslinux.org/doc/usbkey.txt)

> 启动 USB 密钥驱动器的正确模式是“USB-HDD”。这是唯一一种模式，其中在磁盘本身上编码的 C/H/S 几何图形不必与 BIOS 认为的匹配。由于 USB 驱动器上的几何结构是完全任意的，并且可能因 BIOS 不同而不同，因此这是唯一可以正常工作的模式。
> 
> 已报告某些 BIOS（特别是某些版本的 Award BIOS）无法在“USB-HDD”模式下启动 USB 密钥。这是一个非常严重的 BIOS 错误，但不幸的是，这是我们最近从主要 BIOS 供应商那里看到的那种质量的典型。在这些 BIOS 上，您通常无法以 USB-ZIP 模式启动它们。
> 
> 这意味着磁盘上的文件系统映像必须具有与 ZIPDRIVE 兼容的正确几何形状。
> 
> ……
> 
> syslinux 发行版随附的脚本“mkdiskimage”可用于以类似 Zip 的方式初始化 USB 密钥。为此，请计算正确的柱面数（上例中为 31），并且，如果您的 USB 密钥是 /dev/sda（请仔细检查内核消息 - 如果您输入了错误的磁盘驱动器，则无法恢复），运行：
> 
> mkdiskimage -4 /dev/sda 0 64 32
> 
> （0 表示自动确定设备的大小，-4 表示使用分区 4 模拟 zipdisk。）

因此，按照那里的建议，首先我找到我的拇指驱动器的柱面数：

```
$ grep 512-byte /var/log/syslog | tail -n 1
Mar 25 22:33:34 mypc kernel: [50884.608687] sd 45:0:0:0: [sdc] 4118528 512-byte logical blocks: (2.10 GB/1.96 GiB)

# get number of cylinders:
$ wcalc '4118528/(64*32)' 
= 2011 
```

...然后我继续`mkdiskimage`. 完成后，我`usb_inst.sh`再次尝试 - 并意识到它将覆盖创建的分区 4 `mkdiskimage`，并为自己创建一个分区 1。这意味着，应该将这些文件复制`usb_inst.sh`到其他地方的备份中，然后运行`mkdiskimage`​​- 最后将备份的文件再次复制回拇指驱动器；这是一个命令行日志：

```
# mkdiskimage is present in syslinux-git:
$ ./utils/mkdiskimage 
Usage: ./utils/mkdiskimage [-doFMz4][-i id] file c h s (max: 1024 256 63)
....

# ... but also in Debian/Ubuntu packaging of syslinux
$ mkdiskimage -4 /dev/sdc 0 64 32
/usr/bin/mkdiskimage: /dev/sdc: don't know how to determine the size of this device

# use sudo - note this command takes a while to complete:
$ sudo mkdiskimage -4 /dev/sdc 0 64 32
Warning: more than 1024 cylinders (2011).
Not all BIOSes will be able to boot this device.

$ ls /dev/sdc*
/dev/sdc  /dev/sdc4

$ sudo fdisk -l /dev/sdc
Disk /dev/sdc: 2108 MB, 2108686336 bytes
64 heads, 32 sectors/track, 2011 cylinders
Units = cylinders of 2048 * 512 = 1048576 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x866262cc

   Device Boot      Start         End      Blocks   Id  System
/dev/sdc4   *           1        2011     2059248    e  W95 FAT16 (LBA)

# (make sure umounted / ejected)

# cd to usb_inst.sh directory; and 
# run usb_inst.sh for /dev/sdc; note it will:
# write MBR and "Creating filesystem on /dev/sdc1..."
# and "installing boot loader on /dev/sdc1";
# regardless of the previous setup on partition 4:
sudo bash ./usb_inst.sh  

# now no more partition 4:
$ ls /dev/sdc*
/dev/sdc  /dev/sdc1

# ( mount /dev/sdc1 via disk applet )
$ rsync -a /media/SYSRESC /media/backup/

# ... duhh...  - again now

# ( umount/eject via disk applet )

$ sudo mkdiskimage -4 /dev/sdc 0 64 32
Warning: more than 1024 cylinders (2011).
Not all BIOSes will be able to boot this device.

$ sudo ./linux/syslinux --install /dev/sdc4

# ( mount via disk applet )

$ rsync -a /media/backup/SYSRESC/ /media/31A8-40E9/
$ sudo qemu -hda /dev/sdc  # works 

# ( umount/eject via disk applet )

# boot on desktop - works! loads rescue64 and initram.igz... 
```

有趣的是 - 即使有警告“并非所有 BIOS 都能够启动此设备。”；不知何故，这个有问题的 BIOS 加载这个拇指驱动器没有问题（`_ls`上面列出的功能很好）。也很有趣 - 在这里我选择了 USB-HDD 引导选项（不是 USB-ZIP），它仍然有效？！

所以，作为一个部分答案——我想调试这个的方法是让 syslinux 以某种方式在拇指驱动器上写入它在 syslinux 安装期间看到的 CHS 几何结构；并在启动时查询 BIOS（我猜）关于 BIOS 看到的 CHS 几何图形 - 然后将这两个几何图形转储到屏幕上；如果不匹配，那么很可能应该运行`mkdiskimage`（*不幸的是，我不知道如何将其编码为`syslinux`*）

* * *

回到我原来的 HDD 问题——原来SystemRescueCD*也*`udev`用于探测设备——并且引导过程再次无法完成（即使我选择引导选项“所有文件到内存（docache）”）......所以我收到消息喜欢：

```
udevadm settle - timeout of 180 seconds reached, the event queue contains:
Activating dmraid (fake hardware raid) ...
Starting mdadm (linux software raid) ....
udevd[88] worker [91] unexpectedly returned with status 0x0100 ...
udevd[88] worker [91] failed while handling '/devices/pci0000:00/.../sdb/sdb1' 
```

所以，我要么找到一个 Live USB 发行版，它*不会*探测正在使用的磁盘`udev`- 要么我最好把这个硬盘拿出来，把它扔进一个硬盘 USB 外壳，然后在另一台计算机上尝试 fsck （希望我能把它列入黑名单从`udev`正在运行的系统上驱动）

* * *

编辑 2013 年 8 月 24 日：回到这个问题，我想我会记下一些额外的笔记：

由于我还没有时间修复这台 PC 及其故障驱动器，所以我使用这个 USB 拇指驱动器来启动多个操作系统：PartedMagic 和 SliTaz 确实也遇到了硬盘上的错误 - 但显然使用不同的驱动程序来访问它（所以`DRDY ERR`循环没有开始），他们可以相对较快地完成启动。然后，我尝试构建一个自定义的 Ubuntu 12.04 映像（使用`ubuntu-builder`）——在操作系统完成启动之前，这个映像结束了一个`DRDY ERR`循环，这可能需要 5 分钟以上才能完成。我在[错误 #1216397 “应该可以在启动时忽略（跳过探测）已知的坏磁盘分区”中发布了更多相关信息：错误：“linux”包：Ubuntu](https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1216397)。

关于 ，有一些有趣的事情`syslinux`，现在这个 USB 拇指驱动器用于启动多个操作系统。首先，拇指驱动器仍然首先可以`syslinux --install`在空时启动（将文件`ldlinux.sys`放在分区的根目录中） - 这对应于上述`mkdiskimage`步骤；然后才将文件（如内核映像，包括`/boot/syslinux/syslinux.cfg`）复制到其中。

现在，我首先在 中构建 CD 映像 ISO `ubuntu-builder`，并使用 VirtualBox 对其进行测试（因为`qemu`在我的机器上太慢了）。一旦 ISO 映像显示按预期工作，那么只有其`casper`目录下的文件与如此准备的 USB 拇指驱动器相关；并且可以通过`syslinux.cfg`. 因此，我将在拇指驱动器`syslinux.cfg`上编辑 ，并将`casper`图像文件（例如`filesystem.squashfs`）复制到拇指驱动器 - 并按`qemu`上述方法对其进行测试。通过此`qemu`步骤后，我将在驱动器损坏的目标 PC 上移动 USB 拇指驱动器 - 有趣的是，在这里我可能会遇到`syslinux`多种启动失败（在不同的启动阶段）：

*   “ `No DEFAULT or UI configuration directive found!`”（*或者有时是“Bad <something> ...”消息*），在显示`syslinux`启动菜单之前 -*即使*调试，如上所述，会显示`syslinux`正确读取拇指驱动器上的文件系统，并找到`/boot/syslinux/syslinux.cfg`（确实有适当的指示）！
*   " `Invalid or corrupt kernel image`"，一旦显示`syslinux`菜单并选择新的内核映像 (Ubuntu) -*即使*其他映像（以前在拇指上找到）在损坏的驱动器 PC 上启动正常；并且新图像可以在`qemu`另一台机器上正常启动！
*   " `/init: line 7: can't open /dev/sr0: no medium found`"，一旦从`syslinux`菜单中选择了新的 (Ubuntu) 映像，它就会开始启动；这似乎是一条特定于 Ubuntu 的消息，在它开始启动几秒钟后出现。即使引导成功完成，我仍然会遇到它 - 当它出现问题时，此消息只会重复循环，不允许其余的引导过程完成

事实证明，每当我尝试更改文件并将`syslinux.cfg`文件保存在拇指驱动器上时，其中的任何一个都会出现；或者当我对`casper`图像文件进行更改时，我`rsync`或将它们复制到拇指驱动器。可能是复制过程（因为它可能会更改文件在拇指上的扇区），“混淆”引导过程的部分 - 但是，这不应该发生，因为上面的工作过程也是从空白开始的，`syslinux`' d 拇指驱动器，之后将文件复制到其中；所以我认为这可能指向拇指驱动器上的失败扇区。

但是，即使在这种状态下，上面的工作程序似乎也很有用——因为使用它，我可以将拇指恢复到工作状态！更详细地说，它是这样的：

*   将拇指驱动器文件的副本保存在不同磁盘上的某个位置（例如`~/thumbcopy`） - 但*没有*该`ldlinux.sys`文件。
*   每当您想进行更改（对`syslinux.cfg`或可启动映像文件）时 - 确保`~/thumbcopy` *首先保存此更改*
*   现在，假设我直接更改了可引导拇指驱动器上的一些文件，并且遇到了上述错误之一。然后：
    *   首先，删除除拇指驱动器上的所有文件，*例如*`ldlinux.sys`：

        ```
        rm -rf $(ls -I"ldlinux.sys" /media/31A8-40E9/)
        ```

    *   然后，`rsync`或将`cp -arv ...`文件复制 ( )`~/thumbcopy`到拇指驱动器中，例如：

        ```
        rsync -aP ~/thumbcopy/ /media/31A8-40E9/
        ```

    *   现在，再次尝试在 PC 中启动拇指驱动器 - 它通常可以正常启动！

我遇到了所有三种类型的错误，因为我经常尝试直接在拇指驱动器中更改/复制单个文件：有时更改不会带来问题，所以启动很好 - 但是，在许多情况下，它确实引入一个问题。出于某种原因，使用上述程序，我设法从上述任何一种类型的问题中恢复了拇指驱动器 - 也许它与 USB 闪存延迟写入有关，也许与 USB 闪存故障扇区有关，我无法确定......但无论如何：删除所有文件，然后一次性重新复制它们，似乎是一个值得尝试的过程，以防出现此类错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-22T18:05:19.847

这是一个古老的帖子，但如果其他人偶然发现这一点，我还是会添加一个答案。

正如您所提到的，如果您正在努力让 syslinux 启动，那么 ROSH（只读 Shell）可能会很有用。要启动 ROSH，您只需`rosh`在`boot:`提示符处键入（如果您确实有一个可用的图形菜单，请按 Esc 键返回到`boot:`提示符。

在 shell 内部，您有一些基本命令可以在您的环境中查看。有关更多文档，请参阅[https://wiki.syslinux.org/wiki/index.php?title=Read-Only_SHell(rosh.c32)](https://wiki.syslinux.org/wiki/index.php?title=Read-Only_SHell(rosh.c32))

# coldfusion - cfmail 和 cftextarea 不保留换行符

> ID：15624777
> 
> 赞同：2
> 
> 时间：2013-03-25T21:07:03.867
> 
> 标签：coldfusion, cfmail

我正在一个网站上工作，该网站的其中一个邮件表单有问题。当用户在 a 中输入文本时`CFTEXTAREA`，它不会保留任何格式（按“输入”不会导致换行）。不是当它存储为变量或通过电子邮件发送时`<CFMAIL type="HTML" ..>`）。

一位网站管理员声称它曾经可以正常工作。有小费吗？

```
<cfprocessingdirective suppresswhitespace="No">
    <cfmail to="OMITTED" from="OMITTED" subject="#subject#" type="html">
       #message#    
    </cfmail>
</cfprocessingdirective>

<cfform name="mail" action="./mailinglist.cfm?sendMessage=true" 
       format="#type#" 
       height="400">

  <cfformgroup type="vertical">
      <table width="99%" cellpadding="3" cellspacing="0">
      <tr>
          <td class="form_label">Subject: </td>
          <td class="form_field">
               <cfinput class="textbox" required="yes" 
                    message="Please fill out the subject heading." 
                    style="width:200px;"  
                    type="text" 
                    name="subject" 
                    label="Subject:" width="200">
          </td>
      </tr>
      <tr>
          <td class="form_label">Message: </td>
          <td class="form_field">
                <cftextarea  class="textbox" required="yes" 
                       id="message" 
                       name="message" 
                       message="Please fill out the message body of the form..."
                       style="width:300px; height:150px;" 
                       width="350" height="250" 
                       label="Message:" 
                       wraptext="72" ></cftextarea>
          </td>
      </tr>
      <tr>
          <td class="form_label"></td>
          <td class="form_field" align="left" valign="top">
               <cfinput class="textbox" disabled value="yes"  
                     type="checkbox" 
                     name="announcement" 
                     label="Post as Announcement?">
               &nbsp;Post as Announcement? 
          </td>
      </tr>
      </cfformgroup> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T00:04:10.527

要在 HTML 格式的电子邮件中保留文本区域的换行符，您必须将换行符替换为`<br>`标记：

```
reReplace(message, '\n', '<br />', 'ALL') 
```

如果您的电子邮件中没有其他 HTML 格式的内容，您可以简单地`type="HTML"`从 CFMAIL 标记中删除该属性，您的文本区域中的文本将显示为输入时原样，并带有完整的换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T13:20:08.303

我会使用@imthepitts 答案，但只是添加一些您也可以使用的其他选项

```
replace(message, chr(10), '<br />', 'ALL') 
```

或者

```
<cfmail type="html">
<pre>
#message#
</pre>
</cfmail> 
```

**注意：**标记全部左对齐，以防止电子邮件中出现不必要的缩进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T00:10:19.500

尝试使用富文本区域。

```
<cftextarea name ="message" richtext="true"
other attributes
>
</cftextarea> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T12:36:08.213

在您的 CFmail 中，您可以使用`#paragraphformat(message)#`，这将保留您的换行符。

# android - 我可以通过 GooglePlay 更新来更新 Android 清单 xml 文件吗

> ID：15624778
> 
> 赞同：0
> 
> 时间：2013-03-25T21:07:04.127
> 
> 标签：android, android-manifest, updates

我在 GooglePlay 上有一个应用程序。我的一个朋友购买了它，发现它在进行活动转换时崩溃了。我发现了问题；它在清单 xml 文件中。我更改了它，并发送了更新。我的朋友安装我的应用程序仍然崩溃。更改应该已经解决了问题，但它没有，我怀疑这是由于无法在我的 IDE 之外更改清单文件。另一个问题是该应用程序在我的 Nexus 7 上运行良好，而另一个朋友 GS3 在更新之前运行良好！我提到的受到负面影响的设备是 LG G2X。这里发生了什么？？？

//这是启动导致崩溃的意图的活动的java文件

```
@TargetApi(14)
public class CashButtonSignal1 extends Activity {

TextView cashButton1SignalText;
Timer timer1 = new Timer();
boolean b1 = true;
TimerTask timerStep1;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_cash_button_signal1);

setupActionBar();

}

/**
* Set up the {@link android.app.ActionBar}, if the API is available.
 */
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private void setupActionBar() {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        getActionBar().setDisplayHomeAsUpEnabled(true);
}

    cashButton1SignalText = (TextView)findViewById(R.id.cashButton1SignalText);

    timerStep1 = new TimerTask() {

        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                  @Override
                  public void run() {
                if (b1) {
                    cashButton1SignalText.setBackgroundColor(Color.RED);
                    cashButton1SignalText.setTextColor(Color.WHITE);
                    b1=false;
                } else {
                    cashButton1SignalText.setBackgroundColor(Color.WHITE);
                    cashButton1SignalText.setTextColor(Color.RED);
                    b1=true;
                }
                }
            });
        }
};

timer1.schedule(timerStep1,200,200);

}

public void cashButton1SignalTextClicked (View cashButton1SignalTextClickedView){

    Intent displayCashOrderActivity = new Intent (this, CashOrderActivity.class);
    startActivity(displayCashOrderActivity);

} 
```

//这是activity的xml文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

 <TextView
    android:id="@+id/cashButton1SignalText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:enabled="true"
    android:textStyle="bold"
    android:background="#FFFFFF"
    android:textColor="#FF0000"
    android:clickable="true"
    android:gravity="center"
    android:textSize="230sp"
    android:text="@string/orderSignalText"
    android:onClick="cashButton1SignalTextClicked" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:13:37.463

每次您在 google play 中更新您的应用程序时，您都会发送一个新的`apk`，它是一个完整的安装包，它对将要安装的设备一无所知。

因此，可以向 google paly 发送更新，仅更改清单文件或资源或根本没有更改！。

发生了什么，似乎您在该设备上启动该活动时遇到了异常。很可能您的布局文件中存在冲突（可能是混乱的视图或 ID 冲突）。

仔细检查您的替代资源并在具有多种屏幕尺寸的多个模拟器上运行您的应用程序，希望您能找到错误。

**编辑**：谷歌播放系统本身的更新包可能有一些限制。我确信应用程序版本号应该在每次更新中增加。

# google-maps-api-3 - 如何将数据动态添加到谷歌地图 API？

> ID：15624779
> 
> 赞同：0
> 
> 时间：2013-03-25T21:07:04.783
> 
> 标签：google-maps-api-3

我有一张地图，我希望将经纬度数据的提要推送到地图数据数组中。我有获取数据的功能，但无法让它在地图数据数组中可用。

这个想法是在将新坐标添加到数组时放置一个新的标记。有任何想法吗？提前致谢！

```
 var ID='0';
        var DATA=[];
        function getData(){
            var url = 'http://us7.fieldagent.net/api/newResponses/';
            //url = 'http://us7.fieldagent.net/api/newResponses/;
            $.post(url,{'id':ID},function(data){
                if(data.status_id == 0){
                    ID = data.id;
                    console.log('Last Id: '+data.id);
                    var new_data = data.responses;

                    var count = 0
                    $.each(new_data,function(i,v){
                        count += 1;
                        var coord = 'new google.maps.LatLng('+v.lat+','+v.lon+'),';
                        DATA.push(coord);
                    })
                    console.log('Added '+count+' responses..')
                }
            });
        }
    $(document).ready(function(){
                getData();
                setInterval(getData,20*1000);
            });

        function drop() {
                for (var i = 0; i < DATA.length; i++) { 
                        setTimeout(function() {
                            addMarker();
                        }, i * 500);
                    }
                } 

        function addMarker(){
            markers.push(new google.maps.Marker({
                position: DATA[iterator],
                map: map,
                draggable: false,
                icon: 'fatie.svg',
                animation: google.maps.Animation.DROP
            }));
            iterator++;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:24:19.550

您需要将项目实际添加到地图中。现在，您只是将一个项目添加到您的`DATA`数组中。您还需要`addMarker`使用新数据进行调用。

您似乎希望以一定间隔将这些标记添加到地图中，以便它们随着时间的推移掉落到地图上，同时还能够从您的服务器查询新标记。

试试这样的代码：

```
var ID='0';
var DATA=[];
function getData(){
    var url = 'http://us7.fieldagent.net/api/newResponses/';
    $.post(url,{'id':ID},function(data){
        if(data.status_id == 0){
            ID = data.id;
            console.log('Last Id: '+data.id);
            var new_data = data.responses;

            var count = 0
            $.each(new_data,function(i,v){
                count += 1;
                var coord = 'new google.maps.LatLng('+v.lat+','+v.lon+'),';
                DATA.push(coord);
            });
            console.log('Added '+count+' responses..');
            if (count > 0) addMarker(); //call addMarker if there are new markers
        }
    });
}
$(document).ready(function(){
    getData();
    setInterval(getData,20*1000);
});

function addMarker(){
    if (DATA.length == 0) return; //exit if DATA is empty
    markers.push(new google.maps.Marker({
        position: DATA.shift(), //take the first item in DATA
        map: map,
        draggable: false,
        icon: 'fatie.svg',
        animation: google.maps.Animation.DROP
    }));
    if (DATA.length > 0) setTimeout(addMarker, 500); //call again if needed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:16:37.653

创建一个做两件事的方法。

1.  添加到数组
2.  将项目添加到地图

# java - 画布形状模型的继承与组合？

> ID：15624782
> 
> 赞同：5
> 
> 时间：2013-03-25T21:07:23.493
> 
> 标签：java, oop, java-canvas

对于以下模型，您更喜欢继承还是组合：

*   我想在`canvas`每个代表一个数据对象的对象上绘制对象
*   把它想象成一个状态机图：`Ellipses`表示`States`，`Lines`表示`connections/transitions`它们之间。对象表示本身永远不会改变，即 a`State`将始终由 a 显示`ellipse`。但是`ellipse`绘制的方式应该不同，例如对于选择它应该有不同的颜色，而拖动它应该有一个 alpha 通道等。

从设计的角度来看， an`ellipse`不是 a `state`， a`line`也不是 a `transition`。无论如何，将这两个对象组合起来是合适的，以便能够将它们收集在 a 中并在每个对象上`List<Shape>`执行。`shape.draw()`

现在有 2 个设计模型是可能的，而我认为 2 个类总是相同的：

```
interface Shape {
    void draw();
}
abstract class Figure implements Shape {
    //basic vars like start and end coordinates
    int x0, y0, x1, y1;
} 
```

遗产：

```
abstract class State extends Figure {
    String name;
}
class Rectangle extends State {
    @Override void draw();
}

class Line extends Figure;
class Transition extends Line 
```

尽管从设计的角度来看 a`rectangle`不是 a `State`，并且 a`state`也不是 a `figure`，但关于绘图上下文，这可能是可行的。`shapes`因为我可以继承处理、绘图等所需的大部分内容。

或组成：

```
abstract class State {
    String name;
}

class Rectangle extends Figure {
    private State state;
    @Override void draw();
}
class Line extends Figure {
    private Transition transition;
    @Override void draw();
} 
```

所以`Rectangle`+`Line`将是我的对象的包装器。

一个 Rectangle 和 Line 应该扩展 State 和 Transition，还是包含它？

或者，也许还有我没有看到的第三种设计选项。期待你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:40:06.217

所以，这是我的想法，但对于大多数设计问题，很少有一个“正确”的答案。

就像你说的，State 不是 Rectangle，Transition 也不是 Line。我们可以画一条线和/或一个矩形，类似地对待它们可能会有一些好处。所以我可以将这些陈述转化为一个简单的设计：

```
public interface Drawable 
{
  public void draw();
  public Position getPos();
}

public class Rectangle implements Drawable ...
public class Line implements Drawable ... 
```

现在，State 和 Transition 可以由这些 Drawable 来表示。你听说过单一职责原则吗？这基本上就是它听起来的样子，一个对象应该负责做一件“事情”。矩形和线知道如何绘制自己。状态和转换可能在您的系统中还有其他工作要做。

```
public interface Figure 
{
   public Drawable getDrawable();
}

public class State implements Figure
{
   private Rectangle rect;

   public Drawable getDrawable() { return rect; }

   //... State's real "work" below
}

public class Transition implements Figure
{
   private Line line;
   // you get the idea
} 
```

在一个小型/简单的系统上，SRP 的优势可能会丢失，但我们的想法是我们将渲染与其他系统逻辑分开。我们将功能分离得越多，当需要进行更改时，系统的脆弱性就越小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:34:00.993

首先，我相信您对它的建模不正确，椭圆不代表状态，但状态由椭圆表示。正如你所说的那样，状态不是椭圆。所以你应该有组合，我会选择 State 对象来**拥有**代表它的 Shape。

```
abstract class State
{
    private Shape shape;
} 
```

为了使形状可以选择并且仍然使其远离状态抽象，那么应该有一个可选择形状的接口。

```
interface SelectableShape
{
    void setSelected();
    void setUnselected();
} 
```

除了上述之外，如果您希望让矩形通过转换连接到另一个矩形，那么您需要声明额外的接口，例如 ConnectableShape 和 ShapeConnection。

```
interface ConnectableShape extends 
{
}

interface ShapeConnection
{
    void connect(ConnectableShape sh1, ConnectableShape sh2);
} 
```

此外，状态有责任了解它们的转换（或转换有责任了解它们连接的状态）必须用 Shape、ConnectableShape、ShapeConnection 抽象出来的东西是这一切的表示。因此，执行以下操作并不是坏的设计。

```
abstract class State
{
    private ConnectableShape shape;
    public ConnectableShape getShape() {
        return shape;
    }
}

abstract class Transition
{
    private ShapeConnection conn;
    public void connect(State s1, State s2) {
        conn.connect(s1.getShape(),s2.getShape());
    }
} 
```

# objective-c - 设置嵌套的 NSDictionary 和 NSArray 值

> ID：15624783
> 
> 赞同：3
> 
> 时间：2013-03-25T21:07:24.960
> 
> 标签：objective-c, macos, nsarray, nsdictionary

我需要能够设置嵌套的 NSDictionary 和 NSArray 的值。例如：

字典数组字典key1 value1

到达 key1 并设置 value1 的最简单方法是什么？setValueForKeyPath 显然不适用于和数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:17:28.140

使用 Objective-C 的[对象下标](http://clang.llvm.org/docs/ObjectiveCLiterals.html)。

想象一下下面的嵌套字典和数组：

```
dictionaryA => arrayB => dictionaryC 
```

*   `arrayB`存储在`@"arrayKey"`in下`dictionaryA`，并 存储在into`dictionaryC`的索引处。`dictionary_index``arrayB`
*   字典C 应设置为`value1`for `@"key1"`;

**要设置 key1，您需要执行以下操作：**

```
(NSDictionary*)((NSArray*)(dictionaryA[@"arrayKey"])[dictionary_index])[@"key1"] = value1; 
```

 *有关更多信息，请参阅Clang 3.3 文档中的**对象下标部分****[：OBJECTIVE-C LITERALS](http://clang.llvm.org/docs/ObjectiveCLiterals.html)**。*

# c# - C# 一位作家 许多读者只读了一次

> ID：15624786
> 
> 赞同：4
> 
> 时间：2013-03-25T21:07:35.460
> 
> 标签：c#, .net, multithreading, synchronization

我有 4 个线程。一种是从网络中读取一些信息，将其写入变量中，并在每条信息之后发出信号。其中 3 个正在读取这个变量，并且应该只读取一次。当前的解决方案是写入器在写入后设置事件并等待读取器事件。读者等待事件，然后读取并设置他们的事件（意味着他们阅读）。问题是读者可以阅读不止一次，而我在其中有重复。如何实现读者只读一次的规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:18:23.887

实现这一点的一种方法如下

数据作为单链表在线程之间共享。列表中的每个节点都可以是标记或具有数据。该列表以单个节点开始，该节点键入到标记。当读取数据时，会形成一个新列表，其中包含一系列数据节点，后跟一个标记。此列表附加到添加到列表中的最新标记。

每个阅读器线程都以对原始标记节点的引用和一个`AutoResetEvent`. 每当写入器中有一条新数据进入时，它都会`AutoResetEvent`为每个读取器线程发出信号。然后，阅读器线程将简单地遍历，直到找到没有 Next 节点的标记。

该方案可确保所有读者只看到一次数据。最大的复杂性是构建列表，以便可以以无锁方式对其进行写入和读取。`Interlocked.CompareExchange`虽然这很简单

链表类型

```
class Node<T> { 
  public bool IsMarker;
  public T Data;
  public Node<T> Next;
} 
```

样本写入器类型

```
class Writer<T> {
  private List<AutoResetEvent> m_list; 
  private Node<T> m_lastMarker;

  public Writer(List<AutoResetEvent> list, Node<T> marker) { 
    m_lastMarker = marker;
    m_list = list;
  }

  // Assuming this can't overlap.  If this can overload then you will
  // need synchronization in this method around the writing of 
  // m_lastMarker      
  void OnDataRead(T[] items) {
    if (items.Length == 0) {
      return;
    }

    // Build up a linked list of the new data followed by a 
    // Marker to signify the end of the data.  
    var head = new Node<T>() { Data = items[0] };
    var current = head;
    for (int i = 1; i < items.Length; i++) {
      current.Next = new Node<T>{ Data = items[i] };
      current = current.Next;
    }
    var marker = new Node<T> { IsMarker = true };
    current.Next = marker;

    // Append the list to the end of the last marker node the writer
    // created 
    m_lastMarker.Next = head;
    m_lastMarker = marker;

    // Tell each of the readers that there is new data 
    foreach (var e in m_list) { 
      e.Set();
    }
  }
} 
```

样品阅读器类型

```
class Reader<T> { 
  private AutoResetEvent m_event;
  private Node<T> m_marker;

  void Go() {
    while(true) { 
      m_event.WaitOne();
      var current = m_marker.Next;
      while (current != null) { 
        if (current.IsMarker) { 
          // Found a new marker.  Always record the marker because it may 
          // be the last marker in the chain 
          m_marker = current;
        } else { 
          // Actually process the data 
          ProcessData(current.Data);
        }
        current = current.Next;
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:04:27.433

我同意您应该对消费者线程进行编码以接受多次获得相同值的可能性的评论。也许最简单的方法是为每个更新添加一个顺序标识符。这样，线程可以将顺序 id 与它读取的最后一个 id 进行比较，并知道它是否得到了重复。

它也会知道它是否错过了一个值。

但是如果你真的需要它们同步并且只获得一次值，我建议你使用两个`ManualResetEvent`对象，一个[`CountdownEvent`](http://msdn.microsoft.com/en-us/library/system.threading.countdownevent.aspx). 以下是如何使用它们。

```
ManualResetEvent DataReadyEvent = new ManualResetEvent();
ManualResetEvent WaitForResultEvent = new ManualResetEvent();
CountdownEvent Acknowledgement = new CountdownEvent(NumWaitingThreads); 
```

阅读器线程在`DataReadyEvent`.

当另一个线程从网络中读取一个值时，它会这样做：

```
Acknowledgement.Reset(NumWaitingThreads);
DataReadyEvent.Set();  // signal waiting threads to process
Acknowledgement.WaitOne();  // wait for all threads to signal they got it.
DataReadyEvent.Reset(); // block threads' reading
WaitForResultEvent.Set(); // tell threads they can continue 
```

等待线程这样做：

```
DataReadyEvent.WaitOne(); // wait for value to be available
// read the value
Acknowledgement.Set();  // acknowledge receipt
WaitForResultEvent.WaitOne(); // wait for signal to proceed 
```

这与每个等待线程有两个事件的效果相同，但更简单。

但是，它确实有一个缺点，即如果线程崩溃，这将挂起倒计时事件。但是，如果生产者线程等待所有线程消息，您的方法也将如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T22:05:10.270

这非常适合[Barrier 类](http://msdn.microsoft.com/en-us/library/dd289620.aspx)。

您可以使用两个`Barriers`在两种状态之间切换。

这是一个例子：

```
using System;
using System.Threading;
using System.Threading.Tasks;

namespace Demo
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            int readerCount = 4;

            Barrier barrier1 = new Barrier(readerCount + 1);
            Barrier barrier2 = new Barrier(readerCount + 1);

            for (int i = 0; i < readerCount; ++i)
            {
                Task.Factory.StartNew(() => reader(barrier1, barrier2));
            }

            while (true)
            {
                barrier1.SignalAndWait(); // Wait for all threads to reach the "new data available" point.

                if ((value % 10000) == 0)       // Print message every so often.
                    Console.WriteLine(value);

                barrier2.SignalAndWait(); // Wait for the reader threads to read the current value.
                ++value;                  // Produce the next value.
            }
        }

        private static void reader(Barrier barrier1, Barrier barrier2)
        {
            int expected = 0;

            while (true)
            {
                barrier1.SignalAndWait(); // Wait for "new data available".

                if (value != expected)
                {
                    Console.WriteLine("Expected " + expected + ", got " + value);
                }

                ++expected;
                barrier2.SignalAndWait();  // Signal that we've read the data, and wait for all other threads.
            }
        }

        private static volatile int value;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T21:15:59.083

我会推荐 ConcurrentQueue - 它保证每个线程从队列中获取一个唯一的实例。[这](https://stackoverflow.com/questions/4551087/how-to-work-threading-with-concurrentqueuet)是如何使用它的一个很好的解释。

`ConnurrentQueue<T>.TryDequeue()`是一种线程安全的方法，用于检查队列是否不为空，以及是否没有从队列中获取项目。由于它同时执行这两种操作，程序员不必担心竞争条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T21:54:04.373

我想我已经找到了方法。我创建了 2 个 AutoResetEvent 数组，每个读取器都有 2 个事件，等待写入事件并设置读取事件，写入器设置所有写入事件并等待所有读取事件。

JaredPar，你的回答很有用，对我有帮助

# jquery - API 的 JSON 响应 - jquery 的几个每个语句

> ID：15624790
> 
> 赞同：1
> 
> 时间：2013-03-25T21:08:10.323
> 
> 标签：jquery, arrays, json, api, response

我找到了问题..我仍然有问题..这是 JSON 的外观。当没有不同数组的名称时，如何从 toprefs 获取数组？下面是 JSON：

```
 -{
      path: "/a_vc/2013/03/revenue-traction-doesnt-mean-product-market-fit.html"
     -stats: {
          direct: 25
          visits: 52
          subscr: 0
          -platform: {
             m: 0
             d: 52
          }
          -toprefs: [
             -{
                visitors: 9
                domain: "t.co"
              }
             -{
                visitors: 2
                domain: "facebook.com"
             }
             -{
                visitors: 2
                domain: "linkedin.com"
             }
             -{
                visitors: 1
                domain: "google.com"
             }
             -{
                visitors: 1
                domain: "avc.blogs.com"
             }
          ]
          search: 0
          crowd: 0

       }
      title: "A VC: Revenue Traction Doesn't Mean Product Market Fit"
  }

   (function() {
         var chartBeat = "http://api.com";
         $.getJSON( chartBeat, {
         format: "json"
   })

   .done(function( data ) {
         $.each( data.pages, function( i, page ) {
             var pageNumber = i + 1;

             var stats = [page.stats];

             $('#pages').append('<li>Page ' + pageNumber + ': ' + page.title + '</li>');

                $.each( stats, function( s, stat ) {
        var toprefs = [stat.toprefs];

        $.each( toprefs, function( t, topref ) {
            var refs = [toprefs];

            $.each( refs, function( r, ref ) {
                $('#page-details').append('<li>' + ref.domain + '</li>');
            });
        });
    });

    }); 
```

请帮忙，我很卡住，但太接近了。

# android - 将日期和时间转换为字符串、ANDROID

> ID：15624795
> 
> 赞同：-1
> 
> 时间：2013-03-25T21:08:20.150
> 
> 标签：android, date, time

我有日期和时间这种格式

```
$date:2013-02-19T11:20:16.393Z 
```

我可以转换普通格式，例如：

```
19.02.2013 11:20:16 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:29:20.157

```
$date:2013-02-19T11:20:16.393Z 
```

因此，您的实际格式是`ISO 8601` 为了您的目标，您需要使用一些具有适当模式的**DateFormatter并完成工作。**

首先，您需要将日期重写为模式，以便

`19.02.2013 11:20:16`等于`dd.MM.yyyy HH:mm:ss`

因此，现在您需要使用例如[`SimpleDateFormatter`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)执行转换的格式化程序。

**伪代码：**

```
String source = "2013-02-19T11:20:16.393Z";
SimpleDateFormat formatter = new SimpleDateFormat("dd.MM.yyyy HH:mm:ss");
Date formatted = null;
formatted = formatter.parse(source);
String formattedString = formatted.toString(); 
```

# c# - 缓冲与流式传输大型数据集

> ID：15624796
> 
> 赞同：2
> 
> 时间：2013-03-25T21:08:24.873
> 
> 标签：c#, sql-server, linq

我需要将 10,000 到 20,000 个唯一过滤器应用于 50M 行、8 列和适当索引的数据集。

我目前的方法是一次动态地生成和执行这些查询：

```
var stats = (from a in db.AggregatedStats
             where a.StatType.StartsWith("TOTAL_ITEM")
             select a);

// Add more filters to the WHERE clause

foreach (var stat in stats) { // Process the data } 
```

我相信这种方法称为从 SQL Server 到 MoveNext() 的“流式传输”数据。

将数据缓冲到程序的内存中会更有效吗？

```
var stats = (from a in db.AggregatedStats
             where a.StatType.StartsWith("TOTAL_ITEM")
             select a).ToList(); 
```

然后将过滤器应用于此实体列表：

```
var result = (from a in stats
              where a.Region.Equals(region)
              select a); 
```

这将有效地将 SQL Server 查询的数量从 10,000 减少到 1。

在这种情况下，与从 10,000 个查询流式传输数据所需的时间相比，将数据集缓冲到程序中是否值得额外的 RAM？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:32:11.620

我会花一些时间来分析这些过滤器，看看哪些过滤器过滤掉了大部分数据。您可能会发现有 10-20 个过滤器可以过滤掉 95% 的数据。

如果您可以识别过滤掉大部分数据的前 X 个过滤器，那么您可以将带有这些过滤器的查询应用于数据库。您得到的结果将是一组有限的记录，您可以在内存中缓冲和过滤这些记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T22:06:47.327

消极的。将数据库中的枚举推迟到可能的最后一秒会消除您将即将失效的数据推送到内存中（这只会使用于此应用程序的内存膨胀）。这是您当前示例使用的方法（因为它实际上直到`foreach`开始才被调用）并且应该是最高性能的。

我想你可能会感到困惑；当你写

```
var stats = (from a in db.AggregatedStats
         where a.StatType.StartsWith("TOTAL_ITEM")
         select a); 
```

实际上没有发生任何事情 -`stats`只包含一个知道如何获取数据的迭代器，并且在您`ToList()`使用 a 调用或枚举该查询之前`foreach`，实际上没有任何请求，这就是您获得性能的原因。

# asp.net - 分页在动态填充的 JqGrid 上不起作用

> ID：15624797
> 
> 赞同：0
> 
> 时间：2013-03-25T21:08:27.337
> 
> 标签：asp.net, jquery, jqgrid

我需要根据视图的选择动态填充网格。我按照下面的链接动态填充网格。

[https://codereview.stackexchange.com/questions/3668/suggestions-for-jqgrid-dynamic-columns-and-server-side-paging-sortin-filterin](https://codereview.stackexchange.com/questions/3668/suggestions-for-jqgrid-dynamic-columns-and-server-side-paging-sortin-filterin)

[显示带有动态列绑定的 jqgrid 的问题](https://stackoverflow.com/questions/5111653/problem-showing-jqgrid-with-dynamic-column-binding)

它使用两个 ajax 调用。一次获取 JqGrid 的 ColModel 和 ColNames，第二次调用获取 colData。返回的数据仅针对当前 Page（即 20 条记录 -Pagesize 20）。

我遇到的问题是我的服务器端分页不起作用。当我单击寻呼机上的下一个按钮时，只重新加载了第一页。

处理程序中的代码如下

```
 var numberOfRows = context.Request["rowsPerPage"];
                int nRows, iPage;
                if (String.IsNullOrEmpty(numberOfRows) || !int.TryParse(numberOfRows, NumberStyles.Integer, CultureInfo.InvariantCulture, out nRows))
                    nRows = PageSize; // default value
                var pageIndex = context.Request["pageIndex"];
                if (String.IsNullOrEmpty(pageIndex) || !int.TryParse(pageIndex, NumberStyles.Integer, CultureInfo.InvariantCulture, out iPage))
                    iPage = 1; // default value 
```

context.Request["rowsPerPage"] 和 context.Request["pageIndex"] 始终返回 null 并设置为默认值。我错过了什么。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:48:44.950

你在检查来自 jqGrid 的 POST 吗？它应该包括 sidx、sord、page、rows、_search、filters 值。

然后，您的控制器将希望访问这些值以处理数据列的排序顺序以及要显示的页面。控制器的一个例子是：

```
public ActionResult getGridData(string sidx, string sord, int page, int rows, bool _search, string filters) 
```

编辑：

```
Passing Data to the jqGrid:
            var jsonData = new
        {
            total = (totalRecords + rows - 1) / rows,
            page = page,
            records = totalRecords,                
            userdata = new { TradeIniator = tradeIniator, TradeRecepient = tradeRecepient, AnonUser = anonUser, Subtotal = tradeTotal.ToString(), FoilTradeAmount = "Trade Total" },
            rows = (
                from tempCard in pagedQuery.ToList()                    
                select new
                {
                    cell = new string[] {                    
                        value1,
                        value2, 
                        ....
                    }
                }).ToArray()
        };//var jsonData

 return Json(jsonData, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:40:36.643

好的，我发现了问题。我的 colModel [{"name":"Id","width":"300"},{"name":"Name","width":"300"},{"name":"类型","宽度":"300"}];

以及我的网格初始化中的 width="auto" 。

因此，分页和排序参数返回 null。我删除了 line width="auto"，现在参数以正确的值传递。

# c# - 在存储过程中的位置

> ID：15624798
> 
> 赞同：1
> 
> 时间：2013-03-25T21:08:27.263
> 
> 标签：c#, .net, stored-procedures, entity-framework-5, sql-server-2012

我有一个`myStoreProcedure`赞

```
@personId VARCHAR(MAX)

SELECT IdNo, LastName + ', ' + FirstName + ' ' + MiddleName AS Name
FROM            Person
WHERE CAST(Person.PersonId AS varchar(max)) in (@personId) 
```

我想列出所有基于`PersonId`使用的人，`WHERE IN`但数据类型是`varchar`. 到目前为止，这是我尝试过的。

```
var p0 = p.Select(x => new { id = "'" + x.ToString() + "'" })
    .Select(c => c.id).ToArray();    

string personIds1 = string.Join(",", p0); 
```

比方说，我有`2, 5`PersonId，所以通过加入`Id`上面的代码，结果是

> personIds1 = '2','5'

现在，当我`myStoreProcedure`使用参数调用时，我没有得到任何结果。

```
var list = myEntities.myStoreProcedure(personIds1).Select(t => new PersonEntity
        {
            IdNo = t.IdNo,
            Name = t.Name,
        }).ToList(); 
```

我的问题是：

如何创建一个存储过程来读取`varchar`就像示例一样：

```
--@personId = "'2', '5'" <-just an example
WHERE CAST(Person.PersonId AS varchar(max)) in (@personId) 
```

所以我可以得到`PersonId`2、5等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:21:49.857

您*可以*将值列表传递给存储过程......您不能按照您的方式进行操作！

不能声明“宏”参数。参数必须绑定到单个对象；它不能用于生成 SQL 语句。这正是你想要做的：你试图将整个`IN`子句传递给存储过程，这根本是不允许的。

（当然，*也许*你可以通过使用动态执行来做到这一点。但是请不要在生产数据库上尝试这样做，性能会很糟糕...... :-/）

如果我必须做类似的事情，我会使用[表值参数](http://blog.sqlauthority.com/2008/08/31/sql-server-table-valued-parameters-in-sql-server-2008/)：

```
CREATE TYPE [dbo].[IdTable] AS TABLE(
    [Id] [int] NULL
)
GO

CREATE PROCEDURE [dbo].[sp_get_peoplez] (
    @ids IdTable READONLY
) AS
BEGIN
    SELECT IdNo, LastName + ', ' + FirstName + ' ' + MiddleName AS Name
    FROM Person
    WHERE Person.PersonId IN (SELECT Id FROM @ids)
END
GO 
```

为了通过实体框架使用该过程，请参阅[此](https://stackoverflow.com/questions/8157345/entity-framework-stored-procedure-table-value-parameter)答案。

# login - 注册用户无法添加到购物车。Prestashop

> ID：15624799
> 
> 赞同：0
> 
> 时间：2013-03-25T21:08:29.647
> 
> 标签：login, prestashop, add, cart, avalara

我有一个大问题。

这个问题已经讨论过很多次了，但我无法让它工作......

我已经尝试了 Prestashop 论坛上建议的所有内容（也发布了，但仍然没有回复）： 1\. 更改商店域和 SSL。首先，我将它作为growmundocannabico.com（在这两个地方都没有工作），更改为www.growmundocannabico.com，但仍然没有解决问题。

2.  清除了 cookie 和所有浏览器历史记录（firefox），并没有解决问题。PD 也不适用于其他浏览器。在 Chrome 和 IE10 上测试。

3.  尝试修改 .htcacess 文件，没有帮助...

这是商店网址：www.growmundocannabico.com

我已经改变了定义（'_PS_MODE_DEV_'，假）；定义（'_PS_MODE_DEV_'，真）；在 config/define.inc.php 中显示错误。结果在附件中。

谁能简单地解释一下为什么它是什么意思以及我应该做些什么来解决它？？？因为编程不是我的强项。

谢谢，![在此处输入图像描述](../Images/687805b463439ad5ef1b895c634051dd.png)

代码如下： 没看懂 1.第20行是a * 2.没有php没有关闭，应该是这样吗？

```
<?php
/*
* 2007-2012 PrestaShop
*
* NOTICE OF LICENSE
*
* This source file is subject to the Open Software License (OSL 3.0)
* that is bundled with this package in the file LICENSE.txt.
* It is also available through the world-wide-web at this URL:
* http://opensource.org/licenses/osl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade PrestaShop to newer
* versions in the future. If you wish to customize PrestaShop for your
* needs please refer to http://www.prestashop.com for more information.
*
*  @author PrestaShop SA <contact@prestashop.com>
*  @copyright  2007-2012 PrestaShop SA
*  @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
*  International Registered Trademark & Property of PrestaShop SA
*/

class TaxCore extends ObjectModel
{
    /** @var string Name */
    public $name;

    /** @var float Rate (%) */
    public $rate;

    /** @var bool active state */
    public $active;

    /** @var boolean true if the tax has been historized */
    public $deleted = 0;

    /**
     * @see ObjectModel::$definition
     */
    public static $definition = array(
        'table' => 'tax',
        'primary' => 'id_tax',
        'multilang' => true,
        'fields' => array(
            'rate' =>           array('type' => self::TYPE_FLOAT, 'validate' => 'isFloat', 'required' => true),
            'active' =>         array('type' => self::TYPE_BOOL),
            'deleted' =>        array('type' => self::TYPE_BOOL),

            // Lang fields
            'name' =>           array('type' => self::TYPE_STRING, 'lang' => true, 'validate' => 'isGenericName', 'required' => true, 'size' => 32),
        ),
    );

    protected static $_product_country_tax = array();
    protected static $_product_tax_via_rules = array();

    protected   $webserviceParameters = array(
        'objectsNodeName' => 'taxes',
    );

    public function delete()
    {
        /* Clean associations */
        TaxRule::deleteTaxRuleByIdTax((int)$this->id);

        if ($this->isUsed())
            return $this->historize();
        else
            return parent::delete();
    }

    /**
     * Save the object with the field deleted to true
     *
     *  @return bool
     */
    public function historize()
    {
        $this->deleted = true;
        return parent::update();
    }

    public function toggleStatus()
    {
        if (parent::toggleStatus())
            return $this->_onStatusChange();

        return false;
    }

    public function update($nullValues = false)
    {
        if (!$this->deleted && $this->isUsed())
        {
            $historized_tax = new Tax($this->id);
            $historized_tax->historize();

            // remove the id in order to create a new object
            $this->id = 0;
            $this->add();

            // change tax id in the tax rule table
            TaxRule::swapTaxId($historized_tax->id, $this->id);
        } else if (parent::update($nullValues))
                return $this->_onStatusChange();

        return false;
    }

    protected function _onStatusChange()
    {
        if (!$this->active)
            return TaxRule::deleteTaxRuleByIdTax($this->id);

        return true;
    }

    /**
     * Returns true if the tax is used in an order details
     *
     * @return bool
     */
    public function isUsed()
    {
        return Db::getInstance()->getValue('
        SELECT `id_tax`
        FROM `'._DB_PREFIX_.'order_detail_tax`
        WHERE `id_tax` = '.(int)$this->id
        );
    }

    /**
    * Get all available taxes
    *
    * @return array Taxes
    */
    public static function getTaxes($id_lang = false, $active_only = true)
    {
        $sql = new DbQuery();
        $sql->select('t.id_tax, t.rate');
        $sql->from('tax', 't');
        $sql->where('t.`deleted` != 1');

        if ($id_lang)
        {
            $sql->select('tl.name, tl.id_lang');
            $sql->leftJoin('tax_lang', 'tl', 't.`id_tax` = tl.`id_tax` AND tl.`id_lang` = '.(int)$id_lang);
            $sql->orderBy('`name` ASC');
        }

        if ($active_only)
            $sql->where('t.`active` = 1');

        return Db::getInstance(_PS_USE_SQL_SLAVE_)->executeS($sql);
    }

    public static function excludeTaxeOption()
    {
        static $ps_tax = null;
        if ($ps_tax === null)
            $ps_tax = Configuration::get('PS_TAX');

        return !$ps_tax;
    }

    /**
    * Return the tax id associated to the specified name
    *
    * @param string $tax_name
    * @param boolean $active (true by default)
    */
    public static function getTaxIdByName($tax_name, $active = 1)
    {
        $tax = Db::getInstance(_PS_USE_SQL_SLAVE_)->getRow('
            SELECT t.`id_tax`
            FROM `'._DB_PREFIX_.'tax` t
            LEFT JOIN `'._DB_PREFIX_.'tax_lang` tl ON (tl.id_tax = t.id_tax)
            WHERE tl.`name` = \''.pSQL($tax_name).'\' '.
            ($active == 1 ? ' AND t.`active` = 1' : ''));

        return $tax ? (int)($tax['id_tax']) : false;
    }

    /**
    * Returns the ecotax tax rate
    *
    * @param id_address
    * @return float $tax_rate
    */
    public static function getProductEcotaxRate($id_address = null)
    {
        $address = Address::initialize($id_address);

        $tax_manager = TaxManagerFactory::getManager($address, (int)Configuration::get('PS_ECOTAX_TAX_RULES_GROUP_ID'));
        $tax_calculator = $tax_manager->getTaxCalculator();

        return $tax_calculator->getTotalRate();
    }

    /**
    * Returns the carrier tax rate
    *
    * @param id_address
    * @return float $tax_rate
    */
    public static function getCarrierTaxRate($id_carrier, $id_address = null)
    {
        $address = Address::initialize($id_address);
        $id_tax_rules = (int)Carrier::getIdTaxRulesGroupByIdCarrier((int)$id_carrier);

        $tax_manager = TaxManagerFactory::getManager($address, $id_tax_rules);
        $tax_calculator = $tax_manager->getTaxCalculator();

        return $tax_calculator->getTotalRate();
    }

    /**
     * Return the product tax rate using the tax rules system
     *
     * @param integer $id_product
     * @param integer $id_country
     * @return Tax
     *
     * @deprecated since 1.5
     */
    public static function getProductTaxRateViaRules($id_product, $id_country, $id_state, $zipcode)
    {
        Tools::displayAsDeprecated();

        if (!isset(self::$_product_tax_via_rules[$id_product.'-'.$id_country.'-'.$id_state.'-'.$zipcode]))
        {
            $tax_rate = TaxRulesGroup::getTaxesRate((int)Product::getIdTaxRulesGroupByIdProduct((int)$id_product), (int)$id_country, (int)$id_state, $zipcode);
            self::$_product_tax_via_rules[$id_product.'-'.$id_country.'-'.$zipcode] = $tax_rate;
        }

        return self::$_product_tax_via_rules[$id_product.'-'.$id_country.'-'.$zipcode];
    }

    /**
     * Returns the product tax
     *
     * @param integer $id_product
     * @param integer $id_country
     * @return Tax
     */
    public static function getProductTaxRate($id_product, $id_address = null, Context $context = null)
    {
        if ($context == null)
            $context = Context::getContext();

        $address = Address::initialize($id_address);
        $id_tax_rules = (int)Product::getIdTaxRulesGroupByIdProduct($id_product, $context);

        $tax_manager = TaxManagerFactory::getManager($address, $id_tax_rules);
        $tax_calculator = $tax_manager->getTaxCalculator();

        return $tax_calculator->getTotalRate();
    }
} 
```

这是覆盖。

```
<?php

class Tax extends TaxCore
{

    /**
     * Return the product tax
     *
     * @param integer $id_product
     * @param integer $id_address
     * @return Tax Rate
     */
    public static function getProductTaxRate($id_product, $id_address = null, $getCarrierRate = false)
    {
        include_once(_PS_ROOT_DIR_.'/modules/avalaratax/avalaratax.php');

        /* Instanciate the Avalara module and check if active */
        $avalara = new AvalaraTax();
        if (!$avalara->active)
            return parent::getProductTaxRate($id_product, $id_address, $getCarrierRate);

        /* With Avalara, we disable the tax for non logged users */
        if (!(int)$id_address)
            return 0.;

        $region = Db::getInstance()->getValue('SELECT s.`iso_code`
                                    FROM '._DB_PREFIX_.'address a
                                    LEFT JOIN '._DB_PREFIX_.'state s ON (s.`id_state` = a.`id_state`)
                                    WHERE a.`id_address` = '.(int)$id_address);

        /* If the Merchant does not want to calculate taxes outside his state and we are outside the state, we return 0 */
        if ((!empty($region) && $region != Configuration::get('AVALARATAX_STATE') && !Configuration::get('AVALARATAX_TAX_OUTSIDE')))
            return 0.;

        return (float)Db::getInstance()->getValue('SELECT ac.`tax_rate`
        FROM '._DB_PREFIX_.'avalara_'.($getCarrierRate ? 'carrier' : 'product').'_cache ac
        WHERE ac.`id_'.($getCarrierRate ? 'carrier' : 'product').'` = '.(int)$id_product.'
        AND ac.`region` = \''.pSQL($region).'\'');
    }

    public static function getCarrierTaxRate($id_carrier, $id_address = NULL)
    {
        return (float)self::getProductTaxRate($id_carrier, $id_address, true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:16:04.690

该错误似乎在您的覆盖“税”类中。它有什么作用，为什么会在那里？它不是标准 Prestashop 的一部分，因此很可能存在错误。正如错误消息所述，该代码中的某些内容使用无效参数调用 getProductTaxRate()。

# c++ - 将 QML 信号连接到 C++11 lambda 插槽 (Qt 5)

> ID：15624800
> 
> 赞同：20
> 
> 时间：2013-03-25T21:08:36.327
> 
> 标签：c++, qt, c++11, signals-slots, qt5

将 QML 信号连接到常规 C++ 插槽很容易：

```
// QML
Rectangle { signal foo(); }

// C++ old-style
QObject::connect(some_qml_container, SIGNAL(foo()), some_qobject, SLOT(fooSlot()); // works! 
```

但是，无论我尝试什么，我似乎都无法连接到 C++11 lambda 函数插槽。

```
// C++11
QObject::connect(some_qml_container, SIGNAL(foo()), [=]() { /* response */ }); // fails...
QObject::connect(some_qml_container, "foo()", [=]() { /* response */ }); // fails... 
```

两次尝试都因函数签名错误而失败（没有 QObject::connect 重载可以接受这些参数）。但是，Qt 5 文档暗示这应该是可能的。

不幸的是，Qt 5 示例总是将 C++ 信号连接到 C++ lambda 槽：

```
// C++11
QObject::connect(some_qml_container, &QMLContainer::foo, [=]() { /* response */ }); // works! 
```

此语法不适用于 QML 信号，因为 QMLContainer::foo 签名在编译时是未知的（并且手动声明 QMLContainer::foo 首先会破坏使用 QML 的目的。）

我正在尝试做的事情可能吗？如果是这样， QObject::connect 调用的正确语法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T21:32:35.740

Lambda 等仅适用于新语法。如果您找不到将 QML 信号作为指针的方法，那么我认为这不是直接可能的。

如果是这样，您有一个解决方法：创建一个虚拟信号路由 QObject 子类，它只有信号，一个用于您需要路由的每个 QML 信号。然后使用旧的连接语法将 QML 信号连接到该虚拟类实例的相应信号。

现在你有了可以使用新语法的 C++ 信号，并连接到 lambdas。

[该类还可以有一个辅助方法，以自动从 QML 连接到该类的信号，这将利用 QMetaObject 反射机制和合适的信号命名方案，使用与QMetaObject::connectSlotsByName](http://qt-project.org/doc/qt-4.8/qmetaobject.html#connectSlotsByName)使用的相同原理。或者，您可以只对 QML 路由器信号连接进行硬编码，但仍将它们隐藏在路由器类的方法中。

未经测试...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-21T18:10:37.213

您可以使用助手：

```
class LambdaHelper : public QObject {
  Q_OBJECT
  std::function<void()> m_fun;
public:
  LambdaHelper(std::function<void()> && fun, QObject * parent = {}) :
    QObject(parent),
    m_fun(std::move(fun)) {}
   Q_SLOT void call() { m_fun(); }
   static QMetaObject::Connection connect(
     QObject * sender, const char * signal, std::function<void()> && fun) 
   {
     if (!sender) return {};
     return connect(sender, signal, 
                    new LambdaHelper(std::move(fun), sender), SLOT(call()));
   }
}; 
```

然后：

```
LambdaHelper::connect(sender, SIGNAL(mySignal()), [] { ... }); 
```

拥有辅助对象并将在其`sender`销毁时对其进行清理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-07T07:31:19.377

与其动态创建 lambda 函数来处理不同的信号，您可能需要考虑使用 a[`QSignalMapper`](http://doc.qt.io/qt-5/qsignalmapper.html)来拦截信号并将它们发送到静态定义的插槽，其中的参数取决于源。函数的行为将完全取决于原始信号的来源。

权衡`QSignalMapper`是您获得了有关信号源的信息，但您丢失了原始参数。如果您不能丢失原始参数，或者如果您不知道信号的来源（就像`QDBusConnection::connect()`信号一样），那么使用`QSignalMapper.`

hyde 的示例需要更多的工作，但允许您实现更好的版本，`QSignalMapper`在将信号连接到槽函数时，您可以将有关源信号的信息添加到参数中。

`QSignalMapper`类参考： http: [//qt-project.org/doc/qt-5.0/qtcore/qsignalmapper.html](http://qt-project.org/doc/qt-5.0/qtcore/qsignalmapper.html)
示例：[http ://eli.thegreenplace.net/2011/07/09/passing-extra-arguments-to- qt-插槽/](http://eli.thegreenplace.net/2011/07/09/passing-extra-arguments-to-qt-slots/)

下面是一个示例，通过连接到具有of`QSignalMapper`的顶级`ApplicationWindow`实例的实例来波动信号：[`objectName`](http://doc.qt.io/qt-5/qml-qtqml-qtobject.html#objectName-prop)`"app_window"`

```
for (auto app_window: engine.rootObjects()) {
  if ("app_window" != app_window->objectName()) {
    continue;
  }
  auto signal_mapper = new QSignalMapper(&app);

  QObject::connect(
    app_window,
    SIGNAL(pressureTesterSetup()),
    signal_mapper,
    SLOT(map()));

  signal_mapper->setMapping(app_window, -1);

  QObject::connect(
    signal_mapper,
    // for next arg casting incantation, see http://stackoverflow.com/questions/28465862
    static_cast<void (QSignalMapper::*)(int)>(&QSignalMapper::mapped),
    [](int /*ignored in this case*/) {
      FooSingleton::Inst().Bar();
    });
  break;
} 
```

# python - 将参数传递给python中的装饰器

> ID：15624801
> 
> 赞同：7
> 
> 时间：2013-03-25T21:08:38.650
> 
> 标签：python, parameters, decorator

为什么这个带参数的装饰器不起作用？

```
def decAny( f0 ):
    def wrapper( s0 ):
        return "<%s> %s </%s>" % ( any, f0(), any )
    return wrapper

@decAny( 'xxx' )
def test2():
    return 'test1XML'

print( test2() ) 
```

总是给我一个错误说“str is not callable”它试图在 wrapper() 中执行返回字符串而不是处理它并返回结果字符串

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-25T21:11:53.737

装饰器是返回函数的函数。当“将参数传递给装饰器”时，您实际上正在做的是调用一个返回装饰器的函数。所以`decAny()`应该是一个返回一个函数的函数。

它看起来像这样：

```
import functools

def decAny(tag):
    def dec(f0):
        @functools.wraps(f0)
        def wrapper(*args, **kwargs):
            return "<%s> %s </%s>" % (tag, f0(*args, **kwargs), tag)
        return wrapper
    return dec

@decAny( 'xxx' )
def test2():
    return 'test1XML' 
```

例子：

```
>>> print(test2())
<xxx> test1XML </xxx> 
```

请注意，除了解决您遇到的特定问题之外，我还通过将`*args`和`**kwargs`作为参数添加到包装函数并将它们传递给`f0`装饰器内部的调用，对您的代码进行了一些改进。这使得你可以装饰一个接受任意数量的位置或命名参数的函数，它仍然可以正常工作。

你可以在这里阅读：http `functools.wraps()`:
[//docs.python.org/2/library/functools.html#functools.wraps](http://docs.python.org/2/library/functools.html#functools.wraps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T15:42:25.097

“Mark Lutz - Learning Python”一书中有一个很好的示例：

```
def timer(label=''):
    def decorator(func):
        def onCall(*args):   # Multilevel state retention:
            ...              # args passed to function
            func(*args)      # func retained in enclosing scope
            print(label, ... # label retained in enclosing scope
        return onCall
    return decorator         # Returns the actual decorator

@timer('==>')                # Like listcomp = timer('==>')(listcomp)
def listcomp(N): ...         # listcomp is rebound to new onCall

listcomp(...)                # Really calls onCall 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-12T14:23:24.260

还有另一个使用类来实现装饰器，您也可以将参数传递给装饰器本身

这是一个记录器辅助装饰器的示例，您可以在它失败时传递函数范围和返回值

```
import logging

class LoggerHelper(object):

    def __init__(self, scope, ret=False):
        self.scope = scope
        self.ret = ret

    def __call__(self, original_function):
        def inner_func(*args, **kwargs):
            try:
                logging.info(f"*** {self.scope} {original_function.__name__} Excuting ***")
                return original_function(*args, **kwargs)
                logging.info(f"*** {self.scope} {original_function.__name__} Executed Successfully ***")
            except Exception as e:
                logging.error(f"*** {self.scope} {original_function.__name__} Error: {str(e)} ***")
                return self.ret

        return inner_func 
```

当您使用它时，您可以轻松跟踪引发异常的位置

```
class Example:

    @LoggerHelper("Example", ret=False)
    def method:
        print(success)
        return True 
```

# android - 滑动菜单空白

> ID：15624803
> 
> 赞同：1
> 
> 时间：2013-03-25T21:08:55.303
> 
> 标签：android

我在我的项目中使用 jfeinstein10 滑动菜单库，一切正常，只是当我在某些设备上运行我的应用程序时，保存列表视图的片段顶部有一个空白，这是一张图片：

![在此处输入图像描述](../Images/eabb3ab09e3597bacece5475310b66d3.png)

这是我设置滑动菜单的代码：

```
 setBehindContentView(R.layout.menu_frame);
    FragmentTransaction fragTransaction = mFragmentManager.beginTransaction();
    fragMenu = new FragmentMenu();
    fragTransaction.replace(R.id.menu_frame, fragMenu);
    fragTransaction.commit();

    SlidingMenu sm = getSlidingMenu();
    sm.setShadowWidthRes(R.dimen.shadow_width);
    sm.setShadowDrawable(R.drawable.shadow);
    sm.setBehindOffsetRes(R.dimen.actionbar_home_width);
    setSlidingActionBarEnabled(true);

    final ActionBar mActionBar = getSupportActionBar();
    mActionBar.setHomeButtonEnabled(true);
    mActionBar.setDisplayHomeAsUpEnabled(true); 
```

这将是我的片段布局的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/fondoRowsMenuIzquierdo" >

<ExpandableListView
    android:id="@+id/expListView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:cacheColorHint="@color/fondoRowsMenuIzquierdo"
    android:childDivider="@color/fondoRowsChildMenuIzquierdo"
    android:choiceMode="singleChoice"
    android:divider="@color/separadoresMenuIzquierdo"
    android:dividerHeight="1dp"
    android:drawSelectorOnTop="true"
    android:groupIndicator="@null" />

</LinearLayout> 
```

有谁知道如何删除那个空白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:17:23.810

我解决了这个问题，更新到最新的 SlidingMenu 库：[https](https://github.com/jfeinstein10/SlidingMenu) ://github.com/jfeinstein10/SlidingMenu 。但是此更新带来了另一个问题。

在 SlidingMenu.java 中有这段代码：

```
public void manageLayers(float percentOpen) {
    if (Build.VERSION.SDK_INT < 11) return;

    boolean layer = percentOpen > 0.0f && percentOpen < 1.0f;
    final int layerType = layer ? View.LAYER_TYPE_HARDWARE : View.LAYER_TYPE_NONE;

    if (layerType != getContent().getLayerType()) {
        mHandler.post(new Runnable() {
            public void run() {
                Log.v(TAG, "changing layerType. hardware? " + (layerType == View.LAYER_TYPE_HARDWARE));
                getContent().setLayerType(layerType, null);
                getMenu().setLayerType(layerType, null);
                if (getSecondaryMenu() != null) {
                    getSecondaryMenu().setLayerType(layerType, null);
                }
            }
        });
    } 
```

如果您在 HONEYCOMB 或以前的 API 版本中使用此库，此代码将不允许您与滑动菜单中的视图进行交互，您必须更改此验证：

```
if (Build.VERSION.SDK_INT < 11) return; 
```

为了这：

```
if(Build.VERSION.SDK_INT <= Build.VERSION_CODES.HONEYCOMB_MR2)return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T02:44:43.863

更改滑动菜单库中 colors.xml 的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T17:01:24.863

对我来说，它的工作原理如下：

在 Your-project/.../slidingmenu/src/com.slidingmenu.lib/SlidingMenu.java

```
protected boolean fitSystemWindows(Rect insets) { 
```

哪里有

```
int topPadding = getPaddingTop() + insets.top;
int bottomPadding = getPaddingBottom() + insets.bottom; 
```

添加以下内容：

```
if (Build.VERSION.SDK_INT >= 21) {
    topPadding = insets.top;
 } 
```

如果您的问题存在，您也可以修复 bottomPadding 或任何其他填充。如果您的问题与底部导航栏有关，您可以检查高度并在同一文件中修复填充，添加以下内容：

```
 if (Build.VERSION.SDK_INT >= 21) {
        Resources resources = getContent().getResources();
        int resourceId = resources.getIdentifier("navigation_bar_height", "dimen", "android");
        if (resourceId > 0) {
            bottomPadding += resources.getDimensionPixelSize(resourceId);
        }
    } 
```

# winapi - 提升的磁盘部分输出

> ID：15624804
> 
> 赞同：1
> 
> 时间：2013-03-25T21:08:56.730
> 
> 标签：winapi, python-3.x, runas

我需要在 Windows 7 下的 python3 脚本中运行 diskpart 并捕获其输出。我以提升模式运行脚本；它运行但我无法捕获输出，因此无法确定它是否成功。这是它的调用：

win32api.ShellExecute(0, runas, diskpart, /s C:\TEMP\mapRHD.dp > C:\TEMP\diskpart.out, C:\Python3, 1)

C:\TEMP\diskpart.out 文件没有被写入。

我真的不认为重定向 "> C:\TEMP\diskpart.out" 会在这里工作，但我不知道还能做什么。有什么建议么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:23:18.593

使用 '>' 重定向是 shell 语法，它指示 shell 如何引导已创建进程的标准输出流。diskpart 不明白。`COMSPEC`您可以使用 '/c' 选项通过 shell（无论是什么）运行命令。这应该有效：

```
import os
import win32api

shell = os.environ['COMSPEC']  # e.g. cmd.exe
command = r'/c diskpart /s C:\TEMP\mapRHD.dp > C:\TEMP\diskpart.out'
win32api.ShellExecute(0, 'runas', shell, command, '', 1) 
```

**编辑：**

要从 diskpart 获取返回码，将脚本作为提升的进程重新启动会更简单，如上所述。脚本名称在 中`__file__`，然后运行`sys.executable`。开始时，检查`win32com.shell.shell.IsUserAnAdmin()`提升的权限。如果进程提升，请使用`output = subprocess.check_output(r'diskpart /s C:\TEMP\mapRHD.dp')`. 您可以根据需要对输出进行后处理和记录。

如果命令执行失败，`OSError`则会引发 an。如果 diskpart 因错误退出，`subprocess.CalledProcessError`将引发，它具有`returncode`as 属性。

一个更复杂的方法是使用[`win32com.shell.shell.ShellExecuteEx`](http://docs.activestate.com/activepython/3.2/pywin32/shell__ShellExecuteEx_meth.html)，它返回一个新进程的句柄。按关键字、设置`fmask = win32com.shell.shellcon.SEE_MASK_NOCLOSEPROCESS`、`nShow = win32con.SW_SHOWNORMAL`（或您需要的任何显示级别）`lpVerb = 'runas'`、、、`lpFile = os.environ['COMSPEC']`和`lpParameters = command`。您需要`hProcess`它返回的 dict 中的键值（进程句柄）。

然后使用[`win32event.WaitForSingleObject`](http://docs.activestate.com/activepython/3.2/pywin32/win32event__WaitForSingleObject_meth.html)等待进程关闭。无限期地等待使用`win32event.INFINITE`. 最后，调用[`win32process.GetExitCodeProcess`](http://docs.activestate.com/activepython/3.2/pywin32/win32process__GetExitCodeProcess_meth.html)以获取退出代码。照原样，我认为通过 shell 运行意味着此代码将是 0（成功）或 1（失败），但您可以通过附加`command += " & exit /b %%errorlevel%%"`.

# ruby-on-rails - 使用 Rolify 时无法访问控制台中的用户

> ID：15624805
> 
> 赞同：1
> 
> 时间：2013-03-25T21:08:58.460
> 
> 标签：ruby-on-rails, rolify

我正在制作一个使用带有 Devise 和 CanCan 的 Rolify gem 的 Rails 应用程序。

像这样运行 rolify 生成器

```
rails g rolify:role 
```

像这样将 rolify 方法放在 Users 模型的顶部

```
class User < ActiveRecord::Base
  rolify 
```

除了创建 Role.rb 模型。

```
 class Role < ActiveRecord::Base
     has_and_belongs_to_many :users, :join_table => :users_roles
     belongs_to :resource, :polymorphic => true

     scopify

   end 
```

我还没有用 rolify 做任何其他事情。但是，当我尝试在 rails 控制台中加载用户时，出现以下错误。

```
>> User.all
NameError: undefined local variable or method `rolify' for #<Class:0x007f813d32ce48> 
```

我在用着`Rails 3.2.12`

红宝石版本

```
 ruby -v
    ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin12.2.0] 
```

我认为这不是预期的行为。任何人都可以提出解决方案。如果我无法在控制台中访问 User 模型，我就不值得使用 rolify。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:21:30.827

Tomoko，尝试`extend Rolify`在 rolify 之前添加，如下所示：

```
class User < ActiveRecord::Base
  extend Rolify
  rolify
end 
```

# highcharts - 如何对除一个系列之外的所有系列使用“比较”

> ID：15624807
> 
> 赞同：1
> 
> 时间：2013-03-25T21:09:02.713
> 
> 标签：highcharts, highstock

是否可以使用 Highstock 绘制带有此示例（[http://www.highcharts.com/stock/demo/candlestick-and-volume](http://www.highcharts.com/stock/demo/candlestick-and-volume)）中的面板的图表，但可以在第一个面板中绘制多个系列并带有比较选项（[http://www.highcharts.com/stock/demo/compare](http://www.highcharts.com/stock/demo/compare)）？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:19:07.073

您可以使用多线系列，但第二个面板应该固定到 yAxis:1

[http://jsfiddle.net/SKKSY/](http://jsfiddle.net/SKKSY/)

```
 series: [{
            type: 'line',
            name: 'AAPL',
            data: [1,2,3,4,5,6,7,8,9,10]
        },{
            type: 'line',
            name: 'AAPL',
            data: [11,12,13,14,15,16,17,18,19,20]
        },{
            type: 'line',
            name: 'AAPL',
            data: [21,22,23,24,25,26,27,28,29,30]
        }, {
            type: 'column',
            name: 'Volume',
            data: [1,2,3,4,5,6,7,8,9,10],
            yAxis: 1
        }] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:49:02.863

在系列内进行选项比较是可能的。例如： series = { data: data, compare: 'percent' } 链接到 API 规范 --> api.highcharts.com/highstock#plotOptions.series.compare

# windows - 在不启动新 CMD 的情况下在 bat 中启动 exe 进程

> ID：15624808
> 
> 赞同：3
> 
> 时间：2013-03-25T21:09:03.210
> 
> 标签：windows, batch-file

在我脚本的某个部分，我想运行某个可执行文件，但我不能完全按照我的意愿去做：

*   1：

    `"path/to/my/file.exe"`

将完美地执行文件，但是，我的批处理将停止执行，直到 file.exe 结束，这不是我想要的。

*   2：

    *   2.1：

    `start "path/to/my/file.exe"`

    *   2.2

    `start "path/to/my/file.exe" /b`

2.1 将启动另一个我不想要的 cmd 窗口。2.2 不允许我的批处理脚本返回，我们回到 1。

*   3：

    `call "path/to/my/file.exe" /b`

回到 1。

那么，有什么方法可以做我想做的事吗？简单地启动一个可执行文件并让它在后台运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T21:33:14.057

我想你想要

```
start "" /b "path/to/my/file.exe" 
```

?

账单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:15:05.803

最好的方法是使用 WScript 运行它：

```
Set shell = CreateObject ("Wscript.Shell") 
shell.Run "cmd /c path/to/my/file.exe", 0, false 
```

# mpmovieplayercontroller - 当 iphone 处于睡眠模式/锁定时，如何使用视频播放？

> ID：15624810
> 
> 赞同：0
> 
> 时间：2013-03-25T21:09:07.743
> 
> 标签：mpmovieplayercontroller, background-process, airplay, apple-tv

我的 iphone 应用程序正在播放多个视频，当我使用 airplay 观看它时，它显示得很好。我希望能够关闭 iPhone，以免浪费电池等。

当 iphone 处于睡眠模式/锁定时，如何使用视频播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:49:00.100

在玩弄了其他一千件事之后，我发现了我需要做的事情。

我需要做的就是做两个调整：

1.  将此添加到方法中的 AppDelegate.m 中`application: didFinishLaunchingWithOptions:`：

    ```
    NSError *error = nil;

    BOOL success = [[AVAudioSession sharedInstance]
                setCategory: AVAudioSessionCategoryPlayback
                error: &error];

    if (success == false) { /* handle error */ } 
    ```

2.  将以下内容拖入诸如 Sublime 之类的文本编辑器后，将其添加到 info.plist：

    ```
    <key>UIBackgroundModes</key>
    <array>
            <string>audio</string>
    </array> 
    ```

如果您正确设置视频，您将能够在使用其他应用程序和屏幕处于睡眠模式时收听视频中的音频，并在 iphone 处于睡眠模式时使用 airplay。

# c - fscanf 没有足够的空间，如何捕捉这个？

> ID：15624811
> 
> 赞同：0
> 
> 时间：2013-03-25T21:09:10.303
> 
> 标签：c

我认为我找到了一个很好的解决方案，可以不读取对于数组来说太大的值。

我正在使用这段代码（我知道它并不完美；它主要只是说明我的问题）：

```
char myString[25][10]

while(fscanf(fp, "%24s", myString[i]) != EOF && i < MAX){
    i++;
} 
```

获取输入并将其读入数组。如果该行超过 25 个字符，则将其拆分并将较长的部分放在 2d 数组（行）的下一部分。哪个工作正常，直到你接近尾声，所以你在第 8 行，你得到一条 75 长的线，它想把它分成数组中的 3 行。但是你在数组中只有两行空间，所以它崩溃了。

我不知道如何以动态的方式走这条线。我不必在 while 循环中执行此操作，但如何获取下一行并测量其长度。您如何动态执行这些读取操作和 malloc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:21:20.237

### 使用固定大小的动态字符串数组`fgets()`

使用`fgets()`—`strdup()`是这里唯一不完全可移植的部分：

```
char *data[10];
int   i;                             // Needs to last longer than the loop

for (i = 0; i < 10; i++)
{
    char buffer[4096];
    if (fgets(buffer, sizeof(buffer), fp) == 0)
        break;
    buffer[strlen(buffer)-1] = '\0'; // Zap last character; normally newline
    data[i] = strdup(buffer);        // Error check allocation?
} 
```

如果疯子使用它来读取包含超过 4095 个字符的单行数据的大型 JSON 文件，这可能会遇到问题。对于大多数目的，您不太可能遇到 4 KiB 的行，但这是您的判断。

### 使用固定大小的动态字符串数组`getline()`

使用 POSIX 2008 [`getline()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html)— 不同的可移植性问题：

```
char *data[10];
int   i;

for (i = 0; i < 10; i++)
{
    char   *buffer = 0;
    size_t  buflen = 0;
    ssize_t actlen;
    if ((actlen = getline(&buffer, &buflen, fp)) < 0)
        break;
    buffer[actlen-1] = '\0';       // Zap last character; normally newline
    data[i] = buffer;
} 
```

这不会对行的长度施加任何上限，并`getline()`分配所有空间。

请注意，我没有检查 zapped 字符是否是任一片段中的换行符。您可以（可以说应该）添加该检查。您可能有一个文件末尾没有换行符；它在技术上不是一个文本文件（它们总是以换行符结尾），但它在 Unix 系统上有效。

### 固定大小字符串的固定大小数组

保留预先分配的内存：

```
char data[10][26];
int  i;

for (i = 0; i < 10; i++)
{
    if (fscanf(fp, "%25s", data[i]) != 1)
        break;
    int c;  // Gobble new line
    while ((c = getc(fp)) != EOF && c != '\n')
        ;
} 
```

请注意，这读取的是单词，而不是行。它停在空白处。要读取行，您将使用扫描集转换规范：

```
 if (fscanf(fp, "%25[^\n]", data[i] != 1) 
```

然后，您必须决定是否像以前一样吞噬该行的其余部分，或者是否插入一个微妙但至关重要的空格`" %25[^\n]"`来吞噬空白（在开始转换之前吃掉空白）。

### 动态字符串的动态数组

```
char   **data   = 0;
size_t   numstr = 0;  /* Number of strings in use */
size_t   maxstr = 0;  /* Number of pointers allocated */

char   *buffer = 0;
size_t  buflen = 0;
ssize_t actlen;

while ((actlen = getline(&buffer, &buflen, fp)) > 0)
{
    if (numstr >= maxstr)
    {
        assert(numstr == maxstr);
        size_t newnum = maxstr * 2 + 2;
        void  *newspc = realloc(data, newnum * sizeof(char *));
        if (newspc == 0)
        {
            /* memory allocation failed - data still valid */
            break;
        }
        maxstr = newnum;
        data = newspc;
    }
    buffer[actlen-1] = '\0';       // Zap last character; normally newline
    data[numstr++] = buffer;
    buffer = 0;                    // Reset so getline() allocates on next read
    buflen = 0;
} 
```

不是每个人都赞成使用`realloc()`最初分配然后重新分配内存空间；`malloc()`如果你愿意，你可以在循环之前做一个。确保您在第`2 * maxstr + 2`一次分配时获得非零计数（实际上是 2），并且足够小以测试重新分配代码（一个好主意）。每次翻倍摊销分配的成本。在循环之后，您可以将`data`数组重新分配以缩小到实际大小：

```
realloc(data, numstr * sizeof(char *)); 
```

你应该检查它没有失败，但它不应该这样做。这样做是否真的值得商榷。

* * *

### 警告

*上面代码的一个变体现在已经用编译器和测试程序进行了正式测试。* SSCCE 如下所示。

请注意，分配的内存不会在上方（或下方）释放。始终确保您知道何时释放分配的内存。通常，这意味着您需要一个合适的功能来完成这项工作；在程序退出时让 O/S 释放内存通常是不可接受的。

### SSCCE（[简短、独立、正确的示例](http://sscce.org/)）

```
#include <assert.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

static void dump_strings(FILE *fp, const char *tag, size_t num, char **data)
{
    fprintf(fp, "%s:\n", tag);
    for (size_t i = 0; i < num; i++)
        fprintf(fp, " %2zu: [%s]\n", i, data[i]);
}

static void func1(FILE *fp)
{
    char *data[10];
    int   i;                             // Needs to last longer than the loop

    for (i = 0; i < 10; i++)
    {
        char buffer[4096];
        if (fgets(buffer, sizeof(buffer), fp) == 0)
            break;
        buffer[strlen(buffer)-1] = '\0'; // Zap last character; normally newline
        data[i] = strdup(buffer);        // Error check allocation?
    }
    dump_strings(stdout, "func1", i, data);
    /* Leak! */
}

static void func2(FILE *fp)
{
    char *data[10];
    int   i;

    for (i = 0; i < 10; i++)
    {
        char   *buffer = 0;
        size_t  buflen = 0;
        ssize_t actlen;
        if ((actlen = getline(&buffer, &buflen, fp)) < 0)
            break;
        buffer[actlen-1] = '\0';       // Zap last character; normally newline
        data[i] = buffer;
    }
    dump_strings(stdout, "func2", i, data);
    /* Leak! */
}

static void func3(FILE *fp)
{
    char   data[10][26];
    size_t i;

    for (i = 0; i < 10; i++)
    {
        if (fscanf(fp, "%25[^\n]", data[i]) != 1)
            break;
        int c;
        while ((c = getc(fp)) != EOF && c != '\n')
            ;
    }
    printf("%s:\n", "func3");
    for (size_t j = 0; j < i; j++)
        printf("%2zu: [%s]\n", j, data[j]);
}

static void func4(FILE *fp)
{
    char   **data   = 0;
    size_t   numstr = 0;  /* Number of strings in use */
    size_t   maxstr = 0;  /* Number of pointers allocated */

    char    *buffer = 0;
    size_t   buflen = 0;
    ssize_t  actlen;

    while ((actlen = getline(&buffer, &buflen, fp)) > 0)
    {
        if (numstr >= maxstr)
        {
            assert(numstr == maxstr);
            size_t newnum = maxstr * 2 + 2;
            void  *newspc = realloc(data, newnum * sizeof(char *));
            if (newspc == 0)
            {
                /* memory allocation failed - data still valid */
                break;
            }
            maxstr = newnum;
            data = newspc;
        }
        buffer[actlen-1] = '\0';       // Zap last character; normally newline
        data[numstr++] = buffer;
        buffer = 0;                    // Reset so getline() allocates on next read
        buflen = 0;
    }
    dump_strings(stdout, "func4", numstr, data);
    /* Leak! */
}

int main(void)
{
    func1(stdin);
    func2(stdin);
    func3(stdin);
    func4(stdin);
    return(0);
} 
```

除了像筛子一样漏水外，`valgrind`说这还可以。它主要是在自己的源代码上进行测试的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:32:26.647

```
// assume the file is open in binary
fseek(fp, 0, SEEK_END);
size_t fpSize = ftell(fp);
char * myBuffer = new char[fpSize];
fseek(fp, 0, SEEK_SET);
fread(myBuffer, 1, fpsize, fp);
char * line = strtok(myBuffer, "\n");
while(line != 0)
{
   process(line);
}
delete [] myBuffer; 
```

如果您实际上是在使用 C 编程，请先分配变量并使用 malloc 而不是 new，使用 free 而不是 delete[]。

如果您实际上是在使用 C++ 编程，请考虑使用 C++ I/O 并读入 std::string。

# oracle - SQL Developer 剥离内联提示

> ID：15624813
> 
> 赞同：5
> 
> 时间：2013-03-25T21:09:18.753
> 
> 标签：oracle, oracle11g, oracle-sqldeveloper, hints, query-hints

我正在使用 SQL Developer 3.1.07。我向 Oracle 运行了一个带有内联提示的查询，`--+ hint`但 SQL Developer 似乎在将提示提交到数据库之前已经剥离了提示。多行提示`/*+ hint */`没有被剥离。是否有在 SQL Developer 中保留内联提示/注释的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-23T10:16:48.183

我认为这个问题的解决方案是始终使用多行注释语法，即使是一个提示：

```
select /*+ ordered */
      ename 
from emp
where .... 
```

我不确定单行`--+`语法有什么真正的优势（尽管请告诉您是否有一个只有这样才能做到的用例）。另一方面，它有一个令人眼花缭乱的缺点：它确实混淆了存储在去除回车和换行符的地方的查询，例如 V$SQL.SQL_TEXT。

# django - 让 loaddata 忽略或禁用 post_save 信号

> ID：15624817
> 
> 赞同：21
> 
> 时间：2013-03-25T21:09:29.810
> 
> 标签：django, django-signals

假设您想为您创建的应用程序的重大更改设置一个测试环境，并且您想确保系统中存在的这些数据能够轻松加载到新系统中。

Django 提供了用于导出和加载数据的命令行工具。通过`dumpdata`和`loaddata`

```
python manage.py dumpdata app.Model > Model.json
python manage.py loaddata Model.json 
```

该文档确定（尽管没有明确）在此过程中忽略了某些信号：

> 处理夹具文件时，数据按原样保存到数据库中。不调用模型定义的保存方法和 pre_save 信号。（[来源](https://docs.djangoproject.com/en/dev/ref/django-admin/#loaddata-fixture-fixture)）

有没有办法`post_save`在这个过程中禁用信号调用`loaddata`？

可能相关：

*   [如何防止灯具与 django post_save 信号代码冲突？](https://stackoverflow.com/questions/3499791/how-do-i-prevent-fixtures-from-conflicting-with-django-post-save-signal-code)
*   [https://code.djangoproject.com/ticket/8399](https://code.djangoproject.com/ticket/8399)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-25T21:28:57.040

实现此目的的一种方法是添加一个装饰器，该装饰器在将信号分派到接收器函数时查找原始关键字参数。这在 Django 1.4.3 上对我来说效果很好，我还没有在 1.5 上测试过它，但它应该仍然可以工作。

```
from functools import wraps
def disable_for_loaddata(signal_handler):
    """
    Decorator that turns off signal handlers when loading fixture data.
    """

    @wraps(signal_handler)
    def wrapper(*args, **kwargs):
        if kwargs.get('raw'):
            return
        signal_handler(*args, **kwargs)
    return wrapper 
```

然后：

```
@disable_for_loaddata
def your_fun(**kwargs):
    ## stuff that won't happen if the signal is initiated by loaddata process 
```

根据文档，原始关键字是：如果模型完全按照呈现方式保存（即加载夹具时），则为 True。

# c# - 从命令行解密 GPG 字符串

> ID：15624819
> 
> 赞同：6
> 
> 时间：2013-03-25T21:09:35.653
> 
> 标签：c#, gnupg

我正在尝试编写一个控制台应用程序，它将根据请求解密 gpg 签名。一切都很好，除了提示输入我的 GPG 密码的部分。如何`gpg --decrypt`在没有密码对话框的情况下从命令行调用？

到目前为止，这是我的代码：

```
var startInfo = new ProcessStartInfo("gpg.exe");
startInfo.Arguments = "--decrypt"; //this is where I want to insert "--passphrase MyFakePassword"
startInfo.CreateNoWindow = true;
startInfo.UseShellExecute = false;
startInfo.RedirectStandardInput = true;
startInfo.RedirectStandardOutput = true;
startInfo.RedirectStandardError = true;
startInfo.WorkingDirectory = @"C:\Program Files (x86)\GNU\GnuPG";

var proc = Process.Start(startInfo);
var sCommandLine = stringData + "\n"+(char)26+"\n"; //stringData is the encrypted string
proc.StandardInput.WriteLine(sCommandLine); 
proc.StandardInput.Flush();
proc.StandardInput.Close();

var result = proc.StandardOutput.ReadToEnd(); 
```

我试过使用`--passphrase MyFakePassword`,`--passphrase-fd MyFakePassword`甚至`--passphrase-fd 0`在第一行输入我的密码。如果可能的话，我想避免将我的密码放在运行此代码的机器上的 txt 文件中。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-02T13:56:10.850

一起使用`--batch --passphrase-fd`选项，.eg`gpg2 --batch --passphrase-fd 0 --armor --decrypt /path/to/encrypted_file.pgp`

在您的代码中，`proc.StandardInput.WriteLine(sCommandLine);`添加以下内容后：

```
proc.StandardInput.WriteLine("your passphrase here");
proc.StandardInput.Flush(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T00:19:57.437

我做了更多的挖掘。几个月前，有人在 Gpg4Win 的论坛上将此报告为一个错误。目前唯一的解决方案是从 2.1.0 回滚到以前的版本（在我的情况下不是一个选项），禁用密钥的密码，或者从文本中输入。这是论坛帖子：[http](http://wald.intevation.org/forum/forum.php?thread_id=1116&forum_id=21&group_id=11) ://wald.intevation.org/forum/forum.php?thread_id=1116&forum_id=21& group_id=11 开发团队没有发表评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T21:11:23.527

为避免对话框密码，请尝试此方法，我使用它并且效果很好，您会发现更多详细信息。

[http://www.systemdeveloper.info/2013/11/decrypt-files-encrypted-with-gnupg-from.html](http://www.systemdeveloper.info/2013/11/decrypt-files-encrypted-with-gnupg-from.html)

```
 public static string DecryptFile(string encryptedFilePath)
    {
        FileInfo info = new FileInfo(encryptedFilePath);
        string decryptedFileName = info.FullName.Substring(0, info.FullName.LastIndexOf('.')) + "Dec.TXT";
        string encryptedFileName = info.FullName;

        string password = System.Configuration.ConfigurationManager.AppSettings["passphrase"].ToString();

        System.Diagnostics.ProcessStartInfo psi = new System.Diagnostics.ProcessStartInfo("cmd.exe");

        psi.CreateNoWindow = true;
        psi.UseShellExecute = false;
        psi.RedirectStandardInput = true;
        psi.RedirectStandardOutput = true;
        psi.RedirectStandardError = true;
        psi.WorkingDirectory = @System.Configuration.ConfigurationManager.AppSettings["WorkingDirectory"].ToString();

        System.Diagnostics.Process process = System.Diagnostics.Process.Start(psi);
        string sCommandLine = @"echo " + password + "|gpg.exe --passphrase-fd 0 --batch --verbose --yes --output " + decryptedFileName + @" --decrypt " + encryptedFileName;

        process.StandardInput.WriteLine(sCommandLine);
        process.StandardInput.Flush();
        process.StandardInput.Close();
        process.WaitForExit();
        //string result = process.StandardOutput.ReadToEnd();
        //string error = process.StandardError.ReadToEnd();
        process.Close();
        return decryptedFileName;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T00:43:19.013

> **注意：这样做有安全风险！**

*反正，*

> 签名或解密时的密码，除非您使用对称加密。手册页记录了以下选项：

> **--密码字符串**

使用字符串作为密码。仅当仅提供一个密码时才能使用此功能。显然，这在多用户系统上具有非常可疑的安全性。如果可以避免，请不要使用此选项。

> --passphrase-fd n

从文件描述符 n 中读取密码。只有第一行将从文件描述符 n 中读取。如果您使用 0 作为密码，将从标准输入读取。仅当仅提供一个密码时才能使用此功能。

```
--passphrase-file file 
```

从文件文件中读取密码。只有第一行将从文件文件中读取。仅当仅提供一个密码时才能使用此功能。显然，如果其他用户可以读取此文件，则存储在文件中的密码短语的安全性值得怀疑。如果可以避免，请不要使用此选项。

官方 pgp 命令行实用程序通过 -z 标志提供此功能：

> pgp -esa $SOURCEFILE $RECIPIENTPUBLICKEY -u $SENDERPRIVATEKEY -z $PASSPHRASE

# jquery - 你如何使用 jQuery dropkick 更改回调？

> ID：15624822
> 
> 赞同：0
> 
> 时间：2013-03-25T21:09:41.560
> 
> 标签：jquery, onchange, window.open, jquery-dropkick

我整天都在研究这个问题，但我似乎找不到答案！我正在尝试做的是列出一个`<select>`列表，并将每个选项链接到一个网站，并使用`onchange="window.open(this.options[this.selectedIndex].value,'_blank')"`. 即使使用他们提供的更改回调，有什么方法可以让它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T22:29:52.830

```
$(".select_element").dropkick({
     change:function(value,label){

 //your function code goes here
}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T12:21:50.407

我知道这不是很简单，大多数第一次使用的用户都陷入了困境。现在你可以参考这个示例代码。

```
$(".CLASS_OF_SELECT_TAG").dropkick({
    change: function (value, label) {
           //Logic that you want to apply onchange event.
           //in your case some opening a window
    }
}); 
```

干杯

# javascript - 需要帮助将内联脚本移动到外部文件

> ID：15624823
> 
> 赞同：0
> 
> 时间：2013-03-25T21:09:46.187
> 
> 标签：javascript

我是 JavaScript 新手，有两个问题需要帮助。

首先 - 我想采用一个内联脚本并将其放入它自己的 .js 文件中，但我不确定我需要更改的语法 - 因为在我放入它自己的文件后它不起作用。我正在更改图像 onClick 顺便说一句，我有几个。我只是在我的例子中展示一个。

我已经链接到我的新外部文件，所以这不是问题。

这是我现在在外部文件中的内容 -

```
$(document).ready(function(){

    function changeImage() {

            if (document.getElementById("eventChecked").src == "file:///G:/design/folder/img/checkBox.gif") 
            {
                document.getElementById("eventChecked").src = "file:///G:/design/folder/img/checked.gif";
            }
            else 
            {
                document.getElementById("eventChecked").src = "file:///G:/design/folder/img/checkBox.gif";
            }
        }
}); 
```

我意识到我有两次函数调用，但不确定如何修复它。

第二个问题 - 上面的 src 路径似乎只有在我使用绝对 url 时才有效，但我正在本地处理，然后我会将它传递给将在本地处理它的开发团队，然后它会去居住。那是 3 个 diff 绝对路径，以及对 src 路径的至少 3 组更改。我怎样才能让它寻找根或让它更简单？

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:28:09.170

简单的解决方法是调用该函数：

```
 $(document).ready(function(){

        function changeImage() {

                 ...

            }

        // Call the function!
        changeImage();  // <---- Call the function!!

    }); 
```

但是，changeImage 函数似乎是其中之一，因此您可能可以将其作为 ready 调用的匿名函数的函数体。

### 编辑

要简单地执行代码，请不要将其作为函数声明：

```
$(document).ready(function(){

    if (document.getElementById("eventChecked").src == "file:///G:/design/folder/img/checkBox.gif") 
    {
        document.getElementById("eventChecked").src = "file:///G:/design/folder/img/checked.gif";
    }
    else 
    {
        document.getElementById("eventChecked").src = "file:///G:/design/folder/img/checkBox.gif";
    }
}); 
```

# hibernate - 当并非所有子类型都有自己的表时，Hibernate、JPA、连接表继承导致循环依赖错误

> ID：15624824
> 
> 赞同：3
> 
> 时间：2013-03-25T21:09:51.527
> 
> 标签：hibernate, inheritance, jpa

我正在尝试将 JPA 与 Hibernate 一起使用来从*现有*模式中读取数据。我无法修改架构。有一个包含多个子类的 User 类。其中一些子类具有存储在连接表中的附加数据，而有些则没有。作为一个具体的例子，考虑以下 3 个类和 2 个表。（实际上，有几十个变体和大约十几个表。）

*   `User`是公共基类。它包括一个名为 userType 的鉴别器列。该表`USER`包含所有`User`类共有的数据，包括数值`USERID`。
*   `StandardUser`是一种没有额外数据的变体。
*   `LoginUser`是另一个具有用户名和密码的变体，存储在与on`LOGIN_USER`连接的表中。`USER``USERID`

以下适用于 OpenJPA：

```
@Entity
@Table(name="USER")
@Inheritance(strategy=InheritanceType.JOINED)
@DiscriminatorColumn(name="USERTYPEID", discriminatorType=DiscriminatorType.INTEGER)
public class User {
    private @Id long userId;
    private String userName;
    private int userTypeId;
    ...
}

@Entity
@Table(name="USER")
@DiscriminatorValue("1")
public class StandardUser extends User {

}

@Entity
@Table(name="LOGIN_USER")
@DiscriminatorValue("2")
public class LoginUser extends User {
    private String login;
    private String password;
    ....
} 
```

它生成连接`USER`和`LOGIN_USER`（使用左外连接） on 的SQL 代码，并`USERID`根据 userTypeId 值是 1 还是 2 正确创建 StandardUser 或 LoginUser。

当我将相同的代码与 Hibernate 而不是 OpenJPA 链接时，我收到错误消息

```
Caused by: org.hibernate.AnnotationException: Foreign key circularity dependency involving the following tables: 
```

错误消息中没有列出任何表。我在异常上设置了一个断点，它试图解决“USER”和“USER”之间的“依赖关系”，或者它出现了。我已经用 Hibernate 版本 3.6 和 4.1.7 尝试过这个。

（为什么不坚持使用 OpenJPA？我有一个单独的问题，与 JAXB 的加载时间代码重写冲突有关。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:20:00.720

我应该花更多时间研究相关问题。看来，[通过 JPA 注释更改类层次结构分支中的继承策略中](https://stackoverflow.com/questions/1825676/changing-the-inheritance-strategy-in-branches-of-the-class-hierarchy-via-jpa-ann)提出的策略将满足我的需要。

具体来说，如果我将代码更改为如下所示，它将编译并运行并通过我的单元测试。

```
@Entity
@Table(name="USER")
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="USERTYPEID", discriminatorType=DiscriminatorType.INTEGER)
@DiscriminatorValue("1")
public class User {
    private @Id long userId;
    private String userName;
    private int userTypeId;
    ...
}

@Entity
@DiscriminatorValue("1")
public class StandardUser {
}

@Entity
@SecondaryTable(name="LOGIN_USER")
@DiscriminatorValue("2")
public class LoginUser extends User {
    @Column(table="LOGIN_USER")
    private String login;
    @Column(table="LOGIN_USER")
    private String password;
    ....
} 
```

# asp.net - Windows 服务调用网页

> ID：15624830
> 
> 赞同：0
> 
> 时间：2013-03-25T21:10:03.683
> 
> 标签：asp.net, windows-services

我想我不了解 asp 或 windows 服务的工作原理。

我正在尝试为我的 asp.net 项目创建计划报告。我现在有一个 Windows 服务在我的本地机器上运行，稍后它将在专用服务器上运行。它应该每隔几分钟请求一个 ASP 页面，并且在被请求时，该网页当前通过 page_load 向我发送电子邮件。这是我在 Windows 服务中用来调用网页的代码。

```
HttpWebRequest request= (HttpWebRequest)WebRequest.Create(address);
request.Method = "GET";
response = request.GetResponse();
reader = new StreamReader(response.GetResponseStream(), Encoding.UTF8);
result = reader.ReadToEnd(); 
```

我知道它已经走到了这一步，因为我也一直在让服务人员在每一步都给我发电子邮件。但是，当服务请求页面时，网页什么也不做。如果我将 asp 页面的地址粘贴到浏览器中，那么我会从该页面收到一封电子邮件。ASP.NET 网站在我的计算机上以 VS 调试模式运行。该服务是否必须先打开浏览器？

如果页面需要浏览器才能工作，有没有办法让我在我的 asp 项目中运行代码而无需定期打开浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:13:48.870

您（几乎）无法从 Windows 服务打开浏览器，而且这样做是错误的。您可以将电子邮件发送转移到服务吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:20:14.433

您可以简单地使用任务调度程序调用您的网页

```
//Create a new scheduled task to open a browser eg: internet explorer then right
//click properties, in the run window type in with the quotes an example
"C:\Program Files\Internet Explorer\iexplore.exe" "http://www.mywebsite.com/something/myactionpage.chtml" 
//If you want to open the page with another browser, just change the first path 
```

或者像那样

[在 Windows 服务中使用的最佳计时器](https://stackoverflow.com/questions/246697/windows-service-and-timer/246719#246719)

# javascript - 高级 jQuery 粘性侧边栏

> ID：15624834
> 
> 赞同：11
> 
> 时间：2013-03-25T21:10:19.957
> 
> 标签：javascript, jquery, html, sidebar, sticky

我正在开发（粘性）滚动侧边栏。问题是大多数粘性侧边栏没有考虑到侧边栏可以比视口高（例如，如果许多项目被添加到篮子（侧边栏））。这就是我要解决的问题。这些是要求：

*   如果侧边栏的高度高于视口，它应该滚动浏览内容，并且当进一步向下滚动时，div 的底部应该贴在视口的底部。

*   如果侧边栏的高度高于视口，则只有在页面底部时才应显示下面的 div。

*   当用户向上滚动时，侧边栏会滚动回顶部并粘回到视口的顶部。

*   如果侧边栏的高度小于视口，则向下滚动时它应该从顶部开始保持粘性。

所以总而言之，相当多的功能，而不是那么简单（我认为）。我所看到的最接近我想要实现的是这个例子：[http](http://demo.techbrij.com/730/fix-sidebar-scrolling-jquery.php) ://demo.techbrij.com/730/fix-sidebar-scrolling-jquery.php但代码的编写方式不适合进入我的。

到目前为止，这就是我所做的：[DEMO](http://jsfiddle.net/2g2fc/3/)

还有我使用的 jQuery 代码：

```
jQuery(document).ready(function($) {

var $sidebar   = $('.sidebar'),
    $content   = $('.content');

if ($sidebar.length > 0 && $content.length > 0) {
    var $window    = $(window),
        offset     = $sidebar.offset(),
        timer;

    $window.scroll(function() {
        clearTimeout(timer);
        timer = setTimeout(function() {
            if ($content.height() > $sidebar.height()) {
                var new_margin = $window.scrollTop() - offset.top;
                if ($window.scrollTop() > offset.top && ($sidebar.height()+new_margin) <= $content.height()) {
                    // Following the scroll...
                    $sidebar.stop().animate({ marginTop: new_margin });
                } else if (($sidebar.height()+new_margin) > $content.height()) {
                    // Reached the bottom...
                    $sidebar.stop().animate({ marginTop: $content.height()-$sidebar.height() });
                } else if ($window.scrollTop() <= offset.top) {
                    // Initial position...
                    $sidebar.stop().animate({ marginTop: 0 });
                }
            }
        }, 100); 
    });
}

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T19:28:39.233

您正在使用边距来移动粘性侧边栏 - 我发现这是处理您当前询问的一种棘手方式（并且可能是一种更重的方式）。

一般来说，我喜欢简单地向侧边栏添加一个类，使其成为“位置：固定”，以便浏览器在保持锁定方面进行繁重的工作。

对于您当前的要求，您只需根据滚动的距离以编程方式滚动该位置固定的 div（也将其设为 100% 高度）。看看我的例子，看看这是不是你想要的效果：http: [//jsfiddle.net/ZHP52/1/](http://jsfiddle.net/ZHP52/1/)

这是jQuery：

```
jQuery(document).ready(function($) {

var $sidebar   = $('.sidebar'),
    $content   = $('.content');

//Since our CSS is going to monkey with the height as you scroll, I need to know the initial height.
var sidebarHeight = $sidebar.height();

if ($sidebar.length > 0 && $content.length > 0) {
    var $window    = $(window),
        offset     = $sidebar.offset(),
        timer;

    $window.scroll(function() {

        if ($content.height() > sidebarHeight) {
            var new_margin = $window.scrollTop() - offset.top;
            if ($window.scrollTop() > offset.top) {
                // Fix sidebar
                $sidebar.addClass("fixed");
                // Scroll it the appropriate ammount
                $sidebar.scrollTop(new_margin);            
            }else{
                $sidebar.removeClass("fixed");
            }
        }
    });
}

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T04:11:47.090

看看 hcSticky，我只是在找这个。这是一种“完美”的粘性侧边栏，还可以通过选项模拟其他库。

第一个演示可能是每个人都需要的，它独立于主要内容滚动一个容器。（您可以在到达页面底部之前浏览整个侧边栏，或者当您向上滚动条时，在到达页面顶部之前）。

看看：[http ://someweblog.com/demo/hcsticky/](http://someweblog.com/demo/hcsticky/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T10:38:36.390

我相信这是您正在寻找的功能：http: [//jsfiddle.net/JVe8T/7/](http://jsfiddle.net/JVe8T/7/)

很抱歉代码混乱，但优化它应该相当容易。我还假设 sidebar2（非粘性）已定义高度，如果不是这种情况，您可以使用 jquery 检测它并使用 .css 选择器进行底部偏移。

这是我的代码：

```
jQuery(document).ready(function() {

    var tmpWindow = $(window),
        sidebar = $('.sidebar'),
        content = $('.content'),
        sidebar1 = $('.sidebar1'),
        sidebar2 = $('.sidebar2'),
        viewportHeight = $(window).height(),
        sidebarHeight = sidebar.height(),
        sidebar1Height = sidebar1.height(),
        sidebar2Height = sidebar2.height(),
        offsetBottom;

    tmpWindow.scroll(function(){

        offsetBottom = content.height() - sidebar2Height;

        //if sidebar height is less that viewport
        if (viewportHeight > sidebarHeight) {
            sidebar.addClass('fixed');
        } 

        //sticky sidebar1
        if ((tmpWindow.scrollTop() + viewportHeight) > sidebar1Height ) {
            sidebar1.addClass('bottom');
        } else {
            sidebar1.removeClass('bottom');
        }

        //end of content, visible sidebar2
        if ((tmpWindow.scrollTop() + viewportHeight) > offsetBottom) {
            sidebar1.removeClass('bottom');
            sidebar1.addClass('fixedBottom');
        } else {
            sidebar1.removeClass('fixedBottom');
        }

    });

}); 
```

# asp-classic - 经典 ASP 网站偶尔挂起

> ID：15624835
> 
> 赞同：1
> 
> 时间：2013-03-25T21:10:22.783
> 
> 标签：asp-classic, iis-7.5, session-cookies

我们在 IIS 7.5 上有一个经典的 ASP 网站。

用户随机体验缓慢的响应。发生这种情况时，用户在几分钟内无法做任何事情，这非常令人沮丧。

例如，我可以打开主页，然后通过类别单击几次，然后网站就停止响应。

当网站停止响应时，我没有注意到任何规则。有时，它一直运行良好，有时它只是停止。

当它响应缓慢时，我可以等待几分钟然后获取页面。我试图停止页面加载并刷新页面，但这没有帮助。发生这种情况时，我无法刷新页面，也无法转到其他页面。网站上的每个页面都没有响应。

但是，如果我打开其他浏览器，假设我在 Chrome 中打开 IE，新浏览器中的站点又快了。

我唯一的线索是，如果我在客户端删除 ASP 会话 cookie，那么在同一个浏览器中再次加载页面会很快。所以，这显然与 ASP 会话 cookie 有关。IIS 或 ASP 引擎能以某种方式阻止 ASP 会话吗？

我注意到如果我快速点击站点，响应速度会更慢。看起来在几次快速点击后服务器可能出于某种原因拒绝该会话？

此外，不确定它是否有用并与问题相关，我经常看到许多不同的 ASP 会话 cookie。我想在浏览器中每个用户应该只有一个会话 cookie，但我看到几个不同的会话 cookie 具有不同的值。

有人见过类似的东西吗？知道如何解决这些偶尔出现的缓慢响应吗？

谢谢！

**编辑：** 我发现当响应缓慢时，我什至无法加载空的 ASP 页面（我用一行代码创建了页面，只是使用 Response.Write “工作”）。当然，如果我在另一个浏览器中打开该页面，它很快就会工作。发生问题时，网站仅针对该会话挂起。如果我在其他浏览器中尝试同一页面或在同一浏览器中清除会话 cookie，页面加载速度很快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T16:31:53.167

我想我找到了答案。ASP 网站使用了几个自定义 COM 组件。

其中一些组件正在磁盘上写入日志文件。这些日志是 .txt 文件。

日志文件随着时间的推移而增长，其中一个超过 4GB。不知何故，写入大文件导致服务器在加载几个页面后响应缓慢。有趣的是，新的浏览器窗口在挂在其他浏览器中时可以快速打开页面。

因此，我从 ASP 代码中删除了写入日志文件的部分，并且网站现在可以正常工作而不会挂起。

谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:01:41.453

对于这样的问题，我只是写了一个粗略的函数（我有一个包含）并放入问题页面。该函数将时间戳、计时器（以毫秒范围内的时间捕获）以及我想要的任何其他变量写入文本文件。

然后我只是在每个可疑的代码部分之前和之后调用该函数，并在几天后检查它发现了什么。

请记住用户 timer() 作为其中的一部分，因为普通时间戳对于以毫秒为单位捕获时间是无用的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T07:50:48.333

我也遇到了这个问题。我没有任何数据库或任何自定义的 activex 对象，我在每次操作后立即清理每个对象（如 scripting.filesystemobject），但我确实在应用程序中启用了会话，以便我可以设置会话代码页等等。我确实注意到服务器生成了很多 aspsessionid cookie；也就是说，到页面挂起时，可能有 50 个 assessionid cookie。如果启用了会话，IIS 会生成这些，而我对它们无能为力。每隔 20-30 分钟，页面就会突然挂在我的会话中。调出另一个浏览器实例（例如，另一台机器，或隐私浏览模式）将再次正确响应。离开浏览器 5 分钟也将导致它开始正确响应。我知道循环可以检查 response.isclientconnected 并做出响应。

# javascript - 钛合金，需要控制器

> ID：15624837
> 
> 赞同：3
> 
> 时间：2013-03-25T21:10:25.683
> 
> 标签：javascript, titanium, titanium-mobile

我有一个使用 Alloy 框架在 Titan SDK 3.02 中构建的项目。它是一个选项卡式应用程序，我想从 tab1 内的按钮更改 tab2 的视图

tab1.xml

```
...
    <Button id="button" onClick="setup">
... 
```

tab1.js

```
function setup(){
    //this doesn't work
    var view = Alloy.createController('tab2');
    view.changeBackground('blue');
    $.tabGroup.setActiveTab(1);
} 
```

tab2.xml

```
...
    <View id="view" backgroundColor="red">
... 
```

tab2.js

```
...
    exports.changeBackground = function(color){
        $.view.backgroundColor = color;
        //this runs eg
        Ti.API.info('function running');
    } 
```

我明白为什么这行不通。我正在创建一个从未添加到视图中的控制器的新实例。但我想访问现有的控制器。我努力了

```
var view = require('tab2');
view.changeBackground('blue'); 
```

但这给了我一个“找不到模块错误”。我希望这是有道理的

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:23:07.550

解决了

将 tab2 中的函数设置为 Alloy.Global 就可以了。

tab1.xml

```
...
    <Button id="button" onClick="setup">
... 
```

tab1.js

```
function setup(){
    var changeBackgroundColor = Alloy.Globals.changeBackgroundColor;
    changeBackgroundColor('blue');
    $.tabGroup.setActiveTab(1);
} 
```

tab2.xml

```
...
    var changeBackground = function(color){
        $.view.backgroundColor = color;
    }
    Alloy.Global.changeBackGroundColor = changeBackground;
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T16:03:43.220

这是一种方式。另一个（恕我直言更好，因为您避免使用 Global）更简单。您只需执行以下操作即可访问该选项卡：

```
function setup(){
    //This DOES work.
    // Just keep in mind that you must use the tab index corresponding to your tab.
    // Also, If your view actually uses a window and the tab is on your TabGroup view,
    // you should do $.tabGroup.tabs[1].window.
    var view = $.tabGroup.tabs[1]; 
    view.changeBackground('blue');
    $.tabGroup.setActiveTab(1);
} 
```

# asn.1 - 在导入类型的情况下，有效的标记环境是什么？

> ID：15624838
> 
> 赞同：0
> 
> 时间：2013-03-25T21:10:26.747
> 
> 标签：asn.1

作为一个例子，让我们假设以下设置：

具有显式标记的标记环境的模块定义 A 定义类型 foo。并且具有隐式标记环境的模块 B 导入 foo 并将其分配给 bar。

使用模块 B 读取流时，我不清楚哪种标记环境有效。模块 B 是否定义了 bar 的标记环境（隐式）（被导入 foo）或者声明它的模块的标记环境（模块 A 中的 foo 因此显式）有效？

我希望我能很好地解释这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:16:14.403

首先，导入不是像 C 中的 #include 那样的文本内容。它只是使其他模块中的类型可以访问，而无需使用它们的模块名称来限定它们。

X.680 13.1 Note 4专门针对您的问题：

> 模块定义的“TagDefault”值仅影响模块中明确定义的那些类型。它不影响导入类型的解释。

但是请注意，如果在模块 B 中（导入了 foo），则编写：

> 酒吧 ::= [应用程序 5] Foo

这相当于：

> Bar ::= [应用程序 5] 隐式 Foo

因为在定义 TaggedType 的模块 B 中，标记环境是隐式的。

注释的意思是，如果在模块 A 中，您有：

> Foo ::= 序列 { x [0] INTEGER }

那么 x 上的标记是 EXPLICIT 标记，因为模块 A 中的标记环境是显式的，并且 Foo 将始终以这种方式处理，即使在使用其隐式标记环境导入模块 B 时也是如此。

# directx - 与计算着色器和 Direct2D 互操作？

> ID：15624839
> 
> 赞同：0
> 
> 时间：2013-03-25T21:10:41.270
> 
> 标签：directx, direct2d, compute-shader

我正在开发一个集成 WPF 和 DirectX 的应用程序。我的目标是拥有一个共享表面，用于：

1.  加载初始图像数据。
2.  运行 DirectX 11 Compute Shaders 进行一些图像处理。
3.  使用 Direct2D 在顶部绘图。
4.  在我的 WPF 应用程序中显示结果。

我想我已经弄清楚了 1、3 和 4，但是 2 让我很头疼。我的基本问题归结为：我认为共享表面格式必须`B8G8R8A8_UNorm`用于 WPF 和 Direct2D 互操作，但我无法在该类型的纹理上为我的计算着色器创建无序访问视图。

我该怎么做才能让计算着色器在这种情况下工作？我是否错过了一些创建无人机的棘手方法？我是否需要重组我的应用程序以某种方式使用多个纹理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:07:06.623

This is not possible given the limited format support of these DirectX features and WPF interop (using D3D9Image).

One way to achieve interop between all these features is to do almost everything in `R8G8B8A8_UNorm`, then at the very end use Direct2D to write the result to a `B8G8R8A8_UNorm` render target that is used for interop with WPF. Direct2D can write the RGB result to a BGR target so it's quite simple.

# c - 用纯 C 存储键值对

> ID：15624842
> 
> 赞同：5
> 
> 时间：2013-03-25T21:10:50.980
> 
> 标签：c, dictionary

我试图找到一种以有效方式在 C 中存储“键、值”对的方法，以便快速检索数据。我一直在网上寻找，似乎没有一种快速简便的方法来存储它们，例如在 Java 中。我需要能够频繁地访问和更新值，还需要能够添加新键并将它们按顺序排序。我已经阅读了有关使用`qsort()`和`bsearch()`完成这些的信息，但我不确定使用什么数据结构来存储它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:14:21.363

您正在寻找关联容器。C 中没有“直接”方式，因为标准库不提供任何数据结构。您可以尝试寻找提供该功能的第三方库，或推出您自己的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-04T21:02:37.490

我意识到这是一个旧线程，但我可能有一些贡献，可能对寻求不是很复杂的解决方案的其他人有用。

我已经以不同的方式多次这样做了。如何完成取决于几个因素：

1.  您知道需要跟踪的最大键/值对数吗？
2.  所有的值都是同一类型吗？
3.  这需要多快？

如果 1 和 2 的答案是“是”，那么它可以很简单。当 3 的答案是“没那么重要”，或者当对的最大数量不是太高时，我使用数组或动态分配的内存块作为数组。

在这个方案中，有两个数组： - 索引数组（不是键） - 包含键名和值的键/值对结构数组

您还有一个结构可以跟踪键/值列表，该列表包含（最少）指向索引和键/值结构数组的指针、当前定义的键/值对的数量以及可以存储的键/值对的最大数量存储。

最初，键/值对的计数为 0，索引数组中的每个数组元素都包含一个初始值（可以为零，但通常表示它没有被使用，例如 -1），以及键/值对结构数组被清零（没有名称，没有值）。

维护索引数组，以便索引值以正确的顺序引用另一个数组中的键/值对结构。插入和删除不会移动任何现有的对结构，只会移动索引。删除键/值对时，将包含它的结构清零。

当使用“qsort()”或其兄弟时，您的比较函数使用索引数组中的索引来访问相应键/值对的名称，并且您的交换函数交换索引数组中的索引值。Insert 执行重叠的就地复制（从结尾到插入点）以将新键之后的键的索引在索引数组中向下移动一个位置，并且 delete 执行类似的向上洗牌以缩小被删除的位置的间隙关键是。

一个稍微快一点的版本，它不使用更多内存进行存储，它使用 C 联合来允许将前向链索引存储在未使用的键/值对元素中，并且初始化将它们与列表中的“下一个空闲”索引链接在一起语境。这样可以避免在插入新对时必须在列表中搜索空闲元素。当您需要一个空闲的键/值对对象时，将存储在“next free”中的索引用于新元素，并将“next free”设置为刚刚声明的空闲对象中存储的链索引。当您丢弃一对时，只需将“下一个空闲”值复制到已释放对象中的链索引中，并将已释放对象的索引设置为“下一个空闲”的新值。

索引数组也可以使用指向内存中键/值结构的指针来实现。在这种情况下，空闲对象列表中的“下一个空闲”和链链接也成为指针。

上述方案适用于较小的键/值集大小和简单的值类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T22:03:20.640

正如 Baltasarq 所说，C 没有为此目的的数据结构。但是，您可以使用基于必须支持的结构的实现：初始化、获取、添加和删除操作。[这里](http://ubuntuforums.org/showthread.php?t=1222055)提出了一些好的设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-31T11:50:38.360

一种非常快速且内存高效的方法是使用 Judy 数组。只要你不害怕指针，它就很容易使用。

[http://judy.sourceforge.net/](http://judy.sourceforge.net/)

它在 LGPL 下获得许可

可以安装在 Debian/Ubuntu 上：**sudo apt-get install libjudy-dev**

一个警告是，一个词是本机 CPU 词的长度。这使其速度更快，但在使用 Judy1 或 JudyL 时可能会影响 32/64 位机器之间的可移植性。

有以下类型可用：

```
Judy1  - maps an Index (word) to a bit
JudyL  - maps an Index (word) to a Value (word/pointer)
JudySL - maps an Index (null terminated string) to a Value
JudyHS - maps an Index (array-of-bytes) of Length to a Value 
```

使用字符串作为键的示例代码 (JudySL)：

```
#include <stdio.h>
#include <Judy.h>

#define DIE(x) { fprintf(stderr,"%s\n",x); exit(-1); }

int main() {

    Pvoid_t   PJArray = (PWord_t)NULL;  // Judy array.
    PWord_t   PValue;                   // Judy array element.
    Word_t    Bytes;                    // size of JudySL array.

    uint8_t   key[100]; //max len for key is 100
    const char *value1="Value One";
    const char *value2="Value Two";

    JSLI(PValue, PJArray, "key1");          // Insert key
    if (PValue == PJERR) DIE("Out of memory\n");
    *PValue=(Word_t)value1;                 // Set pointer to value

    JSLI(PValue, PJArray, "key2");          // Insert key
    if (PValue == PJERR) DIE("Out of memory\n");
    *PValue=(Word_t)value2;                 // Set pointer to value

    key[0]='\0';                            // start with smallest string.

    JSLF(PValue, PJArray, key);             // get first key/value
    while (PValue != NULL) {
            printf("key=%s, value=%s\n",key,(char*)*PValue);
            JSLN(PValue, PJArray, key);     // get next key/value
    }

    JSLG(PValue, PJArray, "key2");             // lookup a key
    printf("key2:%s\n",(char*)*PValue);

    JSLFA(Bytes, PJArray);              // free array

    return 0;
} 
```

编译：gcc judy_sample.c -o judy_sample -lJudy

# java - 为什么我的服务会自动连接到代理？

> ID：15624843
> 
> 赞同：2
> 
> 时间：2013-03-25T21:11:02.053
> 
> 标签：java, spring, proxy, aop, autowired

嗨，我有这门课要做测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"/service.xml"})
public class Test {

    @Autowired private CommonService commonService; 
```

在调试时，我在 CommonService 上获得了一个具有属性 h 的对象，它是一个 SdkDynamicAopProxy。

如何在我的属性 commonService 上获得一个 CommonServiceImp 对象？

公共服务

```
public interface CommonService {...} 
```

公共服务小鬼

```
@Service("commonService")
@Transactional("transactionManager")
public class CommonServiceImp implements CommonService {
    @Autowired private CommonDaoJdbcImp commonDao; ...} 
```

服务.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:task="http://www.springframework.org/schema/task"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/task
    http://www.springframework.org/schema/task/spring-task-3.0.xsd">

    <import resource="/bbb-dao.xml"/>

    <context:component-scan base-package="aaa.bbb.service"/>
    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <!-- <bean id="transactionManager" class="org.springframework.transaction.jta.WebSphereUowTransactionManager" /> -->
    <tx:annotation-driven />
<task:annotation-driven /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T21:14:46.400

您的`CommonServiceImp`类带有注释，`@Transactional`并且您有一个应用程序上下文，它使用事务管理`<tx:annotation-driven />`器 bean 进行事务管理。Spring 使用代理来实现此行为并拦截您的所有方法调用并将它们与事务行为包装起来。这就是为什么您看到的是 a`SdkDynamicAopProxy`而不是您的班级的类型。

[请参阅官方文档。](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/transaction.html)

# sql - 在 Access 中连接记录和 GROUP BY

> ID：15624845
> 
> 赞同：8
> 
> 时间：2013-03-25T21:11:17.490
> 
> 标签：sql, ms-access, concatenation

我有一张这样的桌子：

```
title               part                   desc
Blah This           1                      This begins the
Blah This           2                      example table.
Some Record         1                      Hello
Another             1                      This text extends a bit
Another             2                      further so it is in
Another             3                      another record in the
Another             4                      table 
```

在 Access 中，我希望为 GROUP BY 构建一个查询/SQL`title`并连接该`desc`字段，使其看起来像这样：

```
title              desc
Blah This          This begins the example table.
Some Record        Hello
Another            This text extends a bit further so it is in another record in the table 
```

仅使用 SQL（无 VBA/脚本）如何做到这一点？`FOR XML PATH`似乎在 Access 中不起作用，只有 SQL Server。我在这里尝试过 VBA[如何提高此查询和 VBA 的效率？](https://stackoverflow.com/questions/15550671/how-to-improve-efficiency-of-this-query-vba)，但它实在是太慢了。

或者是否有一个可以使用的函数在查询已经打开时不会持续运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:26:19.140

Access :/ 中没有 Group_Concat。可能没有排除 VBA 的解决方案。
这是一种可能：[通过查询连接行](https://stackoverflow.com/questions/5517233/ms-access-query-concatenating-rows-through-a-query)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-15T18:55:03.310

以下是如何使用 VBA 解决此问题的粗略概述；它通过对详细记录运行单个数据库查询来执行更快：

```
Set rsParent = CodeDb.OpenRecordset("SELECT * FROM MainTable ORDER BY HeaderID")
Set rsDetail = CodeDb.OpenRecordset("SELECT * FROM DetailTable ORDER BY HeaderID")
Do Until rsParent.EOF
  ...
  myString = rsParent!MainHeaderName & AggregateDetails(rsDetail, rsParent!HeaderID)
  rsParent.MoveNext
Loop
...

Function AggregateDetails(rsDetail as Recordset, HeaderID as String) as String
   Dim DetailString as String

   Do While rsDetail!HeaderID = HeaderID
      DetailString = DetailString & ", " & rsDetail!DetailName
      rsDetail.MoveNext
      If rsDetail.EOF Then Exit Do
   Loop
   AggregateDetails = DetailString
End Function 
```

# c# - 是否可以使用属性指定 XML 节点名称和深度

> ID：15624846
> 
> 赞同：3
> 
> 时间：2013-03-25T21:11:17.720
> 
> 标签：c#, xml, xml-serialization

我想将 C# 类结构序列化为 XML，并提供特定的节点名称，而不必拥有一堆嵌套类。这可能使用属性吗？

例如，假设我有以下 XML：

```
<OuterItem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <InnerItem>
        <ItemValue>something i need</ItemValue>
    </InnerItem>
</OuterItem> 
```

我有一个如下所示的 XML 序列化方法：

```
public static string XmlSerializeToString<T>(T value)
{
    if (value == null) { return null; }

    XmlSerializer serializer = new XmlSerializer(typeof(T));

    XmlWriterSettings settings = new XmlWriterSettings();
    settings.Indent = false;
    settings.OmitXmlDeclaration = true;

    using (StringWriter textWriter = new StringWriter())
    using (XmlWriter xmlWriter = XmlWriter.Create(textWriter, settings))
    {
        serializer.Serialize(xmlWriter, value);
        return textWriter.ToString();
    }
} 
```

我必须有这样的 C# 类结构吗？

```
public class OuterItem
{
    public InnerItem InnerItem { get; set; }
}

public class InnerItem
{
    public string ItemValue { get; set; }
} 
```

或者是否有可能声明我的节点在 XML 文档中的位置应该是这样的（伪代码）：

```
public class OuterItem
{
    [XmlNode("InnerItem\ItemValue")]
    public string ItemValue { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:36:29.110

不，不能在 XmlNode 属性中使用 xpath 或类似的表达式。您选择的用于[控制 xml 序列化](http://msdn.microsoft.com/en-US/library/83y7df3e.aspx)的属性非常有限。

您可以使用以下 hack 反序列化您拥有的 xml：

```
public class OuterItem
{
    [XmlArrayItem(ElementName="ItemValue", Type=typeof(string))]
    [XmlArray]
    public string[] InnerItem
    {
        get; set;
    }
}

public class Test
{
    static void Main()
    {
        var item = new OuterItem { InnerItem = new[]{"AAA"} };
        XmlSerializer ser = new XmlSerializer(typeof(OuterItem));
        ser.Serialize(Console.Out,item);
    }
} 
```

这将产生以下xml：

```
<?xml version="1.0" encoding="utf-8"?>
<OuterItem xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <InnerItem>
    <ItemValue>AAA</ItemValue>
  </InnerItem>
</OuterItem> 
```

另一种可能的解决方案是使用 XmlTextAttribute，将内部 xml 获取到 XmlNode 类型的属性中，然后手动解析。

# objective-c - 删除 NSTableCellView

> ID：15624848
> 
> 赞同：0
> 
> 时间：2013-03-25T21:11:24.543
> 
> 标签：objective-c, cocoa, nstableview, nstablecellview

如何从我的 NSTableView 中手动删除 NSTableCellView（或其子类）？

当我清空包含信息的数组时，将 DB 排队以获取新信息，然后重新加载表数据，它只会使用与新数组列表中的索引值相似的索引值更新单元格。

前任。

我的数组中首先有 8 个对象，它们显示得很好。当我更新我的数组并且现在只有 3 个时，表中的前三个单元格被更新，而最后 5 个仍然是旧的。旧的不可选择，但仅可见。而且我怀疑我错过了一些重绘/dealloc ..

我在 TableView 上尝试了 setNeedsDisplay，但还没有运气。

我正在使用 ARC、Xcode 4.6.1 和 OS X 10.8.3

**示例代码**

```
- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {

     return [_array count];
}

- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {

     [_tableView setNeedsDisplay];

     NSDictionary *d = [_array objectAtIndex:row];
     NSString *identifier = [tableColumn identifier];

     if ([identifier isEqualToString:@"MainCell"]) {

         CustomCellView *cellView = [tableView makeViewWithIdentifier:@"MainCell" owner:self];
         [cellView.textField setStringValue:d[@"from"]];
         [cellView.subject setStringValue:d[@"subject"]];
         [cellView.text setStringValue:d[@"text"]];
         [cellView.date setStringValue:d[@"date"]];

         return cellView;
     }

     return nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:36:12.073

你必须告诉 NSTableView `reloadData`（听起来你正在这样做）。当你这样做时，数据源的工作就是知道现在只有 3 行并给出答案`numberOfRowsInTableView:`（听起来你没有这样做）。您没有显示*任何*代码（为什么不显示？）所以当然所有这些都是猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:52:01.290

利用

```
[tableView removeRowsAtIndexSet:indexSet withAnimation:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T12:04:06.693

您可以使用此示例（清除/刷新/重绘）您的 cellView：

1.  创建与原始框架相同的新单元格。
2.  用与原始相同的框架重绘它。
3.  将原始对象放入其中。

在这个例子中，“mainTable”是你表的 NSTableView*。

```
- (NSView *)tableView:(NSTableView *)aTableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {

    NSString* identifier = [tableColumn identifier];
    NSTableCellView* cellView = [[NSTableCellView new] initWithFrame:[[mainTable makeViewWithIdentifier:identifier owner:self] frame]];

    [cellView drawRect:[[mainTable makeViewWithIdentifier:identifier owner:self] frame]];
    cellView = [mainTable makeViewWithIdentifier:identifier owner:self];

    // do something with your cellView here ...

    return cellView;
} 
```

# javascript - 为什么 JavaScript 会跳过我的函数？

> ID：15624849
> 
> 赞同：0
> 
> 时间：2013-03-25T21:11:25.130
> 
> 标签：javascript

这是我想知道的那些日子之一：我疯了吗？如果我单步执行这个简单的 javascript 函数，执行会从第 3 行跳到第 7 行。

```
function editStudy() { 
        var studyindex = document.StudyMaint.StudyList.selectedIndex;
        var studyabrv = document.StudyMaint.StudyList[index].text;  //Line 3
        var msg="Edit study "+studyabrv+"?";

        // Get the Study record id was selected in the picklist,
        // then go to Study edit screen, then

        if (confirm(msg)) {
            location.href="editStudy.php?action=UPDATE&studyindex="+studyindex+"&studyabrv="+studyabrv;
        }  //Line 7
    } 
```

但我的表格 StudyMaint 被定义：

```
<body>
    <?php showUserLine(); ?>
    <form name="StudyMaint" action="Process_StudyMaint.php" method="POST" onsubmit="return false">
    <div id="dataentrybox"> 
        <div id="innerbox">
            <div align="center">
... 
```

有人看到我在这里做错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T21:15:22.440

您似乎使用了错误的索引变量名称。尝试使用您定义的 studyindex。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:18:59.460

您尚未定义索引变量。最好使用 firebug 或 chrome 的开发者工具来调试 javascript 问题。

# coffeescript - 流星会议不适用于 html5 视频

> ID：15624853
> 
> 赞同：2
> 
> 时间：2013-03-25T21:11:34.720
> 
> 标签：coffeescript, html5-video, meteor

我正在尝试使用流星来操作一组自定义 html5 视频控件。我的模板代码完全由以下内容组成：

```
Template.video.created = ->
  Session.set 'videoPlaying', false

Template.video.events
  'click .video-button-play': ->
    video = $('video')[0]
    if video.paused then video.play() else video.pause()
    Session.set 'videoPlaying', not video.paused

Template.video.helpers
  isPlaying: ->
    true 
```

相关的html如下：

```
<div class="video-button video-button-play">
  {{#if isPlaying}}
    <i class="icon-pause"></i>
  {{else}}
    <i class="icon-play"></i>
  {{/if}}
</div> 
```

上面的工作是视频在正确的时间停止和开始，如果我从控制台查询会话数据，它就可以工作。然而，当我从助手那里读取会话数据的那一刻，一切都变糟了——有些点击什么都没有，有些重新启动视频，有些只是播放音频。特别疯狂的是，甚至像这样记录会话：

```
Template.video.helpers
  isPlaying: ->
    console.log Session.get('videoPlaying')
    true 
```

导致同样的问题。

**解决方案：**我尝试使用保留并将视频放置在恒定区域（感谢 skeetmtp），发现使用恒定区域是最好的解决方案，因为它允许我继续在视频中使用海报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:21:28.647

每当 videoPlaying 发生变化时，Meteor 都会重建整个“视频”模板，我猜您的自定义 html5 视频在此模板中。你应该尝试任何一个（如果可能的话）

*   将其放在单独的模板中
*   在您的自定义 html 周围使用一个常量区域：http: [//docs.meteor.com/#constant](http://docs.meteor.com/#constant)
*   或使用保留：[​​http://docs.meteor.com/#template_preserve](http://docs.meteor.com/#template_preserve)

如果没有有关您的 html 代码（特别是自定义视频控件）的更多信息，我无法为您提供更多帮助。

# ruby - 公共页面元素 - 它们可以被继承吗？

> ID：15624858
> 
> 赞同：3
> 
> 时间：2013-03-25T21:11:56.820
> 
> 标签：ruby, cucumber, watir-webdriver, page-object-gem

在 cucumber/Watir-webdriver/page-object 环境中，我需要验证常见页眉和页脚链接的存在和功能。虽然这些都应该是相同的，并且有效，但我想将它们包含在所有相关页面上。

我正在尝试跟上 DRY 编码，并希望最大限度地减少识别 Web 应用程序上共享的页眉/页脚元素所需的次数。

我想我可以通过在 support/ 文件夹中包含一些“common_links.rb”来做到这一点：

```
module CommonLinks
  include PageObject
  # Header links
  link(:log_out_header_link, :text => "Log Out")
  link(:logo, :id => "logo")

  #Logged in nav links
  div(:nav, :id => "globalnav_wrapper")
  nav.link(:nav_activities, :href => "/activities/")

  # Footer Links
  link(:contact_us_footer, :text => "CONTACT US")

  # Social Media Links
  link(:social_twitter, :id => "soc_twitter")
  link(:social_facebook, :id => "soc_fb")
  link(:social_pinterest, :id => "soc_pin")
  link(:social_google_plus, :id => "soc_gplus")
  link(:social_youtube, :id => "soc_yt")

end 
```

我正在尝试将上述内容包含在`support/pages/activities_page.rb`. 当我尝试加载调用它的黄瓜功能时，我收到以下错误：

```
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/page-object-0.8.6.1/lib/page-object/accessors.rb:1110:in `block (2 levels) in <module:Accessors>'
/Users/user_name/svn/watir/cukes/client/features/support/common_links.rb:12:in `<module:CommonLinks>'
/Users/user_name/svn/watir/cukes/client/features/support/common_links.rb:1:in `<top (required)>'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/cucumber-1.2.1/lib/cucumber/rb_support/rb_language.rb:129:in `load'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/cucumber-1.2.1/lib/cucumber/rb_support/rb_language.rb:129:in `load_code_file'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:171:in `load_file'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:83:in `block in load_files!'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:82:in `each'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/cucumber-1.2.1/lib/cucumber/runtime/support_code.rb:82:in `load_files!'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/cucumber-1.2.1/lib/cucumber/runtime.rb:175:in `load_step_definitions'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/cucumber-1.2.1/lib/cucumber/runtime.rb:40:in `run!'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:43:in `execute!'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:20:in `execute'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/gems/cucumber-1.2.1/bin/cucumber:14:in `<top (required)>'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/bin/cucumber:23:in `load'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/bin/cucumber:23:in `<main>'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/bin/ruby_noexec_wrapper:14:in `eval'
/Users/user_name/.rvm/gems/ruby-2.0.0-p0/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我还尝试创建一个“CommonPage”类，并从中继承，但我得到了一个未初始化的常量错误。CommonPage 类与模块相同。

```
class CommonPage
  include PageObject
  #Header links    
  link(:log_out_header_link, :text => "Log Out")
  link(:logo, :id => "logo")

  #Logged in nav links
  div(:nav, :id => "globalnav_wrapper")
  nav.link(:nav_activities, :href => "/activities/")

  # Footer Links
  link(:contact_us_footer, :text => "CONTACT US")

  # Social Media Links
  link(:social_twitter, :id => "soc_twitter")
  link(:social_facebook, :id => "soc_fb")
  link(:social_pinterest, :id => "soc_pin")
  link(:social_google_plus, :id => "soc_gplus")
  link(:social_youtube, :id => "soc_yt")

end 
```

尝试使用这些方法中的任何一种都没有成功。

有没有人成功地在一个文件/模块/类中声明公共链接（如页眉/页脚），然后从另一个类中使用它们？

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:49:19.210

可以从父类继承或包含模块。

例如，我做了以下测试，其中页面对象继承自父类。它按预期运行。

测试功能

```
Feature: Search

    Scenario: Set google search field
    When google search field set 
```

支持\pages.rb

```
require 'watir-webdriver'
require 'page-object'

class CommonPage
    include PageObject

    text_field(:search, :name => 'q')
end

class PageA < CommonPage

end 
```

步骤\steps.rb

```
When /google search field set/ do
    b = Watir::Browser.new
    b.goto 'www.google.ca'
    page = PageA.new(b)
    page.search = 'test'    
end 
```

将 CommonPage 作为一个模块包含在 PageA 中时，类似的工作。

**可能的问题**

异常与我的预期不符，但可能是由于以下行：

```
nav.link(:nav_activities, :href => "/activities/") 
```

据我所知并尝试过，这是行不通的。`nav`将是未定义的。我认为您想要这样做（请注意，我认为您还想要一个正则表达式而不是字符串）：

```
link(:nav_activities){ search.link(:href => /activities/) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:27:10.250

这是[Test-Factory gem](http://rubygems.org/gems/test-factory)的标准功能。它是为使用 Watir-webdriver 支持页面对象和数据对象而设计的。由于不支持 selenium，因此它更加精简。我将它与我为climate.com创建的黄瓜测试一起使用

这是从我的代码中提取的示例（经许可共享）

**base_page.rb**

```
class BasePage < PageFactory

  class << self

    def header_elements
      element(:logo) { |b| b.link(:id => "logo") }
      element(:session_links) { |b| b.ul(:id => "session-links")}
      element(:logout_link) { |p| p.session_links.link(:text => "Log Out") }
      element(:login_link) { |p| p.session_links.link(:text => "Login") }
      value(:current_user) { |p| p.session_links.li.text }

      action(:login) { |p| p.login_link.click }
      action(:logout) { |p| p.logout_link.click }
    end

    def footer_elements
      #todo add all the footer elements once we have tests that need them
      #climate_dot_com_link
      #about_twi_link
      #about_tcc_link
      #legal_tou_link
    end

    def grower_nav
      element (:grower_appnav) {|b|b.div(:class => "appnav-container")}

      element (:dashboard_link) { |p|p.grower_appnav.link(:text => /Dashboard/)}
      action (:dashboard) { |p|p.dashboard_link.click}
      element (:field_weather_link) { |p|p.grower_appnav.link(:text => /Field Weather/)}
      action (:field_weather) { |p|p.field_weather_link.click}
      element (:forecast_link) { |p|p.grower_appnav.link(:text => /Forecast/)}
      action (:forecast) { |p|p.forecast_link.click}
      element (:toolbox_link) { |p|p.grower_appnav.link(:text => /Toolbox/)}
      action (:toolbox) { |p|p.toolbox_link.click}
      element (:crop_impact_link) { |p|p.grower_appnav.link(:text => /Crop Impact/)}
      action (:crop_impact) { |p|p.crop_impact_link.click}
      element (:policies_link) { |p|p.grower_appnav.link(:text => /Policies/)}
      action (:policies) { |p|p.policies_link.click}
      element (:settings_link) { |p|p.grower_appnav.link(:text => /Settings/)}
      action (:settings) { |p|p.settings_link.click}
      element (:help_link) { |p|p.grower_appnav.link(:text => /Help/)}
      action (:help) { |p|p.help_link.click}

    end

    def agent_nav
      element (:tcc_appnav) { |b| b.div(:id => "tcc_appnav")}

      element (:home_link) { |p|p.tcc_appnav.link(:text => /Home/)}
      action (:home) { |p|p.home_link.click}
      element (:clients_link) { |p| p.tcc_appnav.link(:text => /Clients/)}
      action (:clients) { |p| p.clients_link.click}
      element (:policies_link) { |p|p.tcc_appnav.link(:text => /Policies/)}
      action (:policies) { |p|p.policies_link.click}
      element (:quotes_link) { |p|p.tcc_appnav.link(:text => /Quotes/)}
      action (:quotes) { |p|p.quotes_link.click}
      element (:sales_tools_link) { |p|p.tcc_appnav.link(:text => /Sales Tools/)}
      action (:sales_tools) { |p|p.sales_link.click}
      element (:marketing_hub_link) { |p|p.tcc_appnav.link(:text => /Marketing Hub/)}
      action (:marketing_hub) { |p|p.marketing_hub.click}
      element (:agents_link) { |p|p.tcc_appnav.link(:text => /Agents/)}
      action (:agents) { |p|p.agents_link.click}
      element (:policy_docs_link) { |p|p.tcc_appnav.link(:text => /Policy Docs/)}
      action (:policy_docs) { |p|p.policy_docs.click}
      element (:users_link) { |p|p.tcc_appnav.link(:text => /Users/)}
      action (:users) { |p|p.users_link.click}
      element (:licenses_link) { |p|p.tcc_appnav.link(:text => /Licenses/)}
      action (:licenses) { |p|p.licenses_link.click}

    end

    def notifications
      element (:agent_notification_bar) { |b|b.div(:class => "agent-notification-bar")}
      value (:agent_notification_header) { |p|p.agent_notification_bar.h4.text}
      value (:agent_notification_message) { |p|p.agent_notification_bar.text}
      action (:return_to_client_details) { |p|p.agent_notification_bar.link(:text => "Return to Client Details").click}

      element (:modal_dialog) { |b|b.div(:class => "modal-inner-wrapper")}
      value (:modal_header) { |p|p.modal_dialog.div(:class => "modal-header").text}
      value (:modal_body) { |p|p.modal_dialog.div(:class => "modal-body").text}
    end
  end
end 
```

**register.rb**一个自我注册页面，有页脚元素，但没有页眉或导航

```
class Register < BasePage

  page_url "#{$test_site}/preso/register.html"

  footer_elements

  element(:first_name) { |b|b.text_field(:id => "first_name")}
  element(:last_name) { |b|b.text_field(:id => "last_name")}
  element(:email) { |b|b.text_field(:id => "email")}
  element(:phone) { |b|b.text_field(:id => "phone")}
  element(:zip_code) { |b|b.text_field(:id => "zip_code")}
  element(:password) { |b|b.text_field(:id => "self_reg_password")}
  element(:confirm_password) { |b|b.text_field(:id => "self_reg_confirm_password")}
  element(:has_agent) { |b|b.select(:id => "has_agent")}
  element(:agents_name) { |b|b.text_field(:id => "source")}
  element(:contact_me) { |b|b.checkbox(:id => "contact_me")}
  element(:agree_to_terms) { |b|b.checkbox(:id => "terms")}
  button ("Create Account")
  element(:spinner) { |b|b.div(:class => "spinner")}
  action(:wait_on_spinner) { |p|p.spinner.wait_while_present}

  element(:agree_to_terms_required_message) {|b|b.div(:class => "terms-error")}

end 
```

**agent_clients.rb** 'agent' 类用户可访问的页面

```
class AgentClients < BasePage

  page_url "#{$test_site}/apps/admin/named_insureds?q[enabled_eq]=true"

  header_elements
  footer_elements
  agent_nav

  expected_element :session_links

  element (:client_list_table) { |b|b.table(:id => "named_insureds")}

end 
```

**dashboard.rb**一个可供“种植者”类用户访问的页面（不同的导航）

```
class Dashboard < BasePage

  page_url "#{$test_site}/apps/preso/growerapps/dashboard.html"

  header_elements
  footer_elements
  grower_nav
  notifications

  expected_element  :session_links

  element(:sort_by_precip) { |b| b.button(:text => "Precip 7d") }
  element(:sort_by_soil_moiosture) { |b| b.button(:text => "Soil Moisture") }
  element(:sort_by_growth_stage) { |b| b.button(:text => "Growth Stage") }

  element(:fields_list) { |b|b.divs(:class => "field-group-card")}

end 
```

# android - ListFragment OnListItemClick 忽略我，不可聚焦的视图

> ID：15624859
> 
> 赞同：-1
> 
> 时间：2013-03-25T21:12:00.360
> 
> 标签：android, onclicklistener, listadapter

我和之前的帖子有同样的问题： [ListFragment OnListItemClick not being called](https://stackoverflow.com/questions/7274231/listfragment-onlistitemclick-not-being-called)

但它的解决方案对我不起作用......我的东西没有焦点，仍然没有收到 ListFragment 的点击事件。很奇怪，因为如果我将 onclicklisteners 放在他们确实收到事件的项目上

我解释。我得到了这个 ListFragment：

```
public class VideosListFragment extends ListFragment {

   @Override
   public void onListItemClick(ListView l, View v, int position, long id) {
       Video item = (Video) getListAdapter().getItem(position);
       DetailFragment fragment = (DetailFragment) getFragmentManager()
            .findFragmentById(R.id.youtube_fragment);
       if (fragment != null && fragment.isInLayout()) {
        MainActivity videoParent = (MainActivity)getActivity();
        videoParent.setVideo(item);
        fragment.initialize(DeveloperKey.DEVELOPER_KEY, videoParent);
       } else {
        Intent intent = new Intent(getActivity().getApplicationContext(),
                VideoPlayerActivity.class);
        intent.putExtra(Video.VIDEO_ID, item.getVideoId());
        startActivity(intent);
       }
   }
} 
```

我在里面放了这个 ListAdapter：

```
public class VideosAdapter extends BaseAdapter implements ListAdapter{
    // The list of videos to display
    List<Video> videos;
    // An inflator to use when creating rows
    private LayoutInflater mInflater;
    private Context context;

    /**
     * @param context this is the context that the list will be shown in - used to create new list rows
     * @param videos this is a list of videos to display
     */
    public VideosAdapter(Context _context, List<Video> _videos) {
        this.videos = _videos;
        this.context = _context;
        this.mInflater = LayoutInflater.from(context);
    }

    @Override
    public int getCount() {
        return videos.size();
    }

    @Override
    public Object getItem(int position) {
        return videos.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if(convertView == null){
            convertView = mInflater.inflate(R.layout.list_item_user_video, null);
        }
        UrlImageView thumb = (UrlImageView) convertView.findViewById(R.id.userVideoThumbImageView);

        TextView title = (TextView) convertView.findViewById(R.id.userVideoTitleTextView); 
        Video video = videos.get(position);
        // Set the image for the list item
        thumb.setImageDrawable(video.getThumbUrl());
        // Set the title for the list item
        title.setText(video.getTitle());

//      Bundle extra = new Bundle();
//      extra.putString(Video.VIDEO_ID, video.getVideoId());
//      convertView.setOnClickListener(new OnClickListenerExtra(context, VideoPlayerActivity.class, extra));

        return convertView;
    }
} 
```

最后评论的每个项目都有一个 Intent，因为如果它在那里，它可以工作，但如果它不存在，则片段没有收到点击

我也发布了项目布局，所以你看到它是不可聚焦的，这是以前的解决方案......

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <com.vivoenmimundo.sc2hotsepicreplays.ui.widget.UrlImageView
        android:id="@+id/userVideoThumbImageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="false"
        android:focusable="false"
        android:contentDescription="YouTube video thumbnail"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/userVideoTitleTextView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="false"
        android:focusable="false"
        android:text="Video Title Not Found" />

</LinearLayout> 
```

我现在能做什么？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:58:09.827

设置线性布局

```
android:clickable="false" 
```

# date - 将千年数字与日期的其余部分放在单独的列上。他们为什么要那样做？

> ID：15624862
> 
> 赞同：1
> 
> 时间：2013-03-25T21:12:13.857
> 
> 标签：date, db2

我正在研究这个 80 年代的旧应用程序。它在 DB2 主干上运行，我只是注意到几张表上有一些奇怪的东西：日期分为两列，其中一列只有千年数字，就像这样......

```
DATECOL1    DATECOL2
========    ========
       2     0070123 
```

这是什么邪恶的远古黑魔法？我问了一位同事，他说“我不知道，可能是 80 年代的事情”。

所以我想我是在问那些老前辈，这样做是否有一些你们都知道的神秘原因，或者这只是这个特定应用程序的一个怪癖？我知道如果没有更多的上下文，你可能无法确定，但如果你有想法，那就拍吧。我真的不需要 100% 的确定性，我只是对这种做法感到好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:27:00.033

许多应用程序在 2000 年之前没有千年。千年列可能是在 90 年代后期作为 y2k 计划的一部分添加的。60 到 80 年代的许多应用程序预计不会持续到 2000 年。
为了完成这些 2000 年的努力，许多退休的大型机 COBOL 程序员以 100 小时/小时的咨询工作从退休中走出来。
世界末日的反对者正在预测世界末日。核武器会失效，公用事业可能会关闭，或者股市会崩盘。

# php - 使用 for 循环区分匹配变量

> ID：15624866
> 
> 赞同：0
> 
> 时间：2013-03-25T21:12:22.483
> 
> 标签：php, logic

如何创建一个 for 循环来比较这样的变量（任何语言，但专门针对 php）：

假设我有 var1 var2 var3 并且如果两个值相同，我希望采取行动。

这就是我所拥有的，但显然它不起作用，因为 var1 总是等于 var1，var2 总是等于 var2 等等。

```
<?php for ($i = 1; $i <= 10; ++$i) { 
if (${'var'.$i} == ${'var'.$i}) {
// if match do something
}
else {
do something
} 
```

尝试 array_unique。

```
<?php
for ($i = 1; $i <= $number_of_seats; ++$i) {
$choices = array_unique(array("${'selected_seat'.$i}"));
if (count(${'selected_seat'.$i}) !== count($choices)) {
    echo 'action="fail.php"';
} 
else {
        echo 'action="success.php"';
        }
}

        ?> method="post"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:19:25.153

编写两个循环会起作用，但会产生 O(n^2) 算法。

您可以先对变量数组进行排序，然后遍历它，看看是否有任何两个连续值相等。这产生了一个 O(nlogn) 算法。

或者您可以使用 HastTable 来获得 O(n) 算法，但需要花费更多的编程时间。

[编辑]

由于效率不是问题，最简单的方法是进行双 for 循环：

```
<?php
for ($i = 1; $i <= 10; ++$i)
{ 
    for ($j = i+1; $j <= 10; ++$j)
    { 
        if (${'var'.$i} == ${'var'.$j})
        {
            // if match do something
        }
    }
}
?> 
```

请注意，此时您不能没有 else 。

在这段代码中}我正在做的是将 [var1,var2, ...] 中的每个元素与其右侧的元素进行比较。即，我将 var1 与 var2 进行比较，然后与 var3 进行比较，依此类推……

另请注意，您可以将第一个终止更改为“i <= 9”

希望能帮助到你

# ruby-on-rails-3 - 从子域中排除资源或仅允许某些资源可用于子域？

> ID：15624868
> 
> 赞同：1
> 
> 时间：2013-03-25T21:12:40.377
> 
> 标签：ruby-on-rails-3, routes, subdomain, router

Rails 3，如何从子域中排除所有控制器和方法，并只允许子域块下指定的某些资源可用？

路线.rb：

```
< all regular resources >
match 'home/about' => "home#about"

  constraints subdomain: 'm' do
    resources :home
    resources :profile
    resources :messages
    root :to => 'mobile/home#index'

  end 
```

我想禁用上述设置中可用的 m.domain.ltd/about。是否有捷径可寻？

# javascript - SASS（CSS）逻辑与 JQuery（Javascript）逻辑

> ID：15624870
> 
> 赞同：0
> 
> 时间：2013-03-25T21:12:54.687
> 
> 标签：javascript, jquery, performance, css, sass

我想知道在构建 Web UI 时哪个更适合实现 for 循环或简单的 if 逻辑。

例如在性能方面，SASS [@for](http://thesassway.com/intermediate/if-for-each-while)会比 jQuery 的[.each更好](http://api.jquery.com/each/)

请分享你的想法。我很想从你的经验中学习。

我目前的情况是我正在尝试重新排列[gridster](http://gridster.net/)网格元素。我可以使用纯 javascript 来做到这一点，但经过第二次思考后，我想尝试 SASS 逻辑，例如给某些元素一个类，从 SASS 生成的 CSS 将使它们按预定义的方式排列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:43:00.887

由于 Sass 是预编译并作为纯 CSS 提供的，因此对于已知数量的元素，它比使用 jQuery 性能要高得多。您唯一的性能瓶颈是它会增加多少 CSS 的大小。

如果您一次在页面上设置少于 30 个元素的样式，我的建议是使用 Sass。

# iphone - 如何在 plist 文件中编辑特定的 NSDictionary？

> ID：15624872
> 
> 赞同：2
> 
> 时间：2013-03-25T21:13:06.013
> 
> 标签：iphone, ios, ios6, nsdictionary

我在 plist 文件中有 20 个字典。我需要用他们的名字编辑一个特定的字典，但真的不知道如何做到这一点。我需要获取值并对 SearchCountry Dictionary 进行更改。

如何编辑特定的字典值？

![在此处输入图像描述](../Images/5a1353a14220bc4c65c59ca4dd279e49.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:36:36.240

尝试使用[NSPorpertyListSerialization](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html)对属性列表进行复杂迭代。

否则，您可能已尝试使用以下代码访问特定字典

```
NSString*  plistPath = [[NSBundle mainBundle] pathForResource:@"yourPList" 
                                                     ofType:@"plist"];
NSDictionary* plistDict = [NSDictionary dictionaryWithContentsOfFile:plistPath]; 
// plistDict contains all the dictionaries inside it now, you could try to access the particular inside the plistDict

id *searchKey = [plistDict objectForKey:@"SearchCountry"]; 
//OR
NSString* searchKeys = [plistDict valueForKeyPath:@"SearchCountry"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:43:07.287

得到一个像这样的子字典：

```
NSMutableDictionary *plist = [[NSMutableDictionary alloc] initWithContentsOfFile:plistFilename];
NSMutableDictionary *searchCountry = [plist objectForKey:@"SearchCountry"]; 
```

像这样更改其中一个值：

```
 [searchCountry setValue:@"Cleveland" forKey:@"searchcity"]; 
```

像这样保存它：

```
BOOL success = [plist writeToFile:plistFilename atomically:YES]; 
```

# arrays - 通过递归查找和替换 Perl 脚本传递数组

> ID：15624873
> 
> 赞同：-2
> 
> 时间：2013-03-25T21:13:08.107
> 
> 标签：arrays, perl, replace

我有一个“users-tb-deleted.txt”文件，它是一个用户列表，由换行符分隔，需要从目录结构中的大约 50 个文件中删除。

如何在不写入 50 个执行相同操作的不同文件句柄参数的情况下打开大量文件并使用以前的列表进行查找和替换到数组中？

当前代码：

```
use File::Find;
open(FILE, "$path/delete-list.txt") || die "$!\n";
my @user = <FILE>;
close(FILE);
---
opendir(DIR, "/path/to/dir") || die "$!\n";
@docs= grep(/\.uid$/,readdir(DIR));    
foreach $file {
    open (RES, $file) || die "$!\n";
    while(<RES>){
        foreach $user (@user){
            chomp;
            s/$user//ig;
        }
    }
} 
```

有什么想法、想法、建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:18:54.583

```
use File::Find;
use Tie::File;

... # define $path and @dirs and &some_condition;

open(FILE, "$path/delete-list.txt") || die "$!\n";
my @user = <FILE>;
close(FILE); 
my $regex = join "|", @user;

find(\&wanted, @dirs);

sub wanted {
    my $full_path = $File::Find::name;
    next if -d $full_path;
    next unless &some_condition($full_path);

    tie my @lines, $full_path or die $!;

    for my $line (@lines) {
        $line =~ s/($regex)//ig;
    }

    untie @lines;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T13:35:47.737

请注意

```
opendir(DIR, "/path/to/dir") || die "$!\n";
@docs= grep(/\.uid$/,readdir(DIR)); 
```

更容易阅读为

```
@docs = glob( '/path/to/dir/*.uid' ); 
```

# .htaccess - nginx 中的 URL 重写

> ID：15624874
> 
> 赞同：0
> 
> 时间：2013-03-25T21:13:13.413
> 
> 标签：.htaccess, url, url-rewriting, nginx, seo

我们目前运行 Apache 并使用 .htaccess 在几个脚本中重写 URL，包括 WordPress 和 OpenCart。

出于性能原因，我们希望迁移到 nginX+Varnish 堆栈。我们如何在 nginX 中处理 URL 重写，我们是否可以自动化它，就像 WordPress 和 OpenCart 写入（写入）.htaccess 一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:34:58.873

```
location ^~ /location {
  # some code else rewrite
  rewrite ^/your_rules # Or
  try_files $uri @rewrite_loc;
}

location @rewrite_loc {
  # some code
  # I guess you are not talking about proxy_pass
} 
```

是的，您可以使用`Nginx`与`Apache`and一起使用的方式`.htaccess`，只需要定义好的重写规则。

# firefox-addon - Firefox 插件 SDK 标签访问

> ID：15624875
> 
> 赞同：0
> 
> 时间：2013-03-25T21:13:16.530
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在关注[Mozilla Docs中的示例](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/tabs.html)

```
tabs.on('activate', function(tab) {
  tab.attach({
    contentScript: 'self.postMessage(document.body.innerHTML);',
    onMessage: function (message) {
      console.log(message);
    }
  });
}); 
```

像这样稍微修改一下。

```
var bodyHTML;
tabs.on('activate', function(tab) {
  tab.attach({
    contentScript: 'self.postMessage(document.body.innerHTML);',
    onMessage: function (message) {
      bodyHTML = message;
      console.log("From attach : "  + bodyHTML);
    }
  });
});
console.log("After tab : " + bodyHTML); 
```

现在，当我执行此插件时，`console.log("After tab : " + bodyHTML);`首先执行然后`console.log("From attach : " + bodyHTML);`. 可能是什么问题，我如何订购执行顺序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T03:41:47.190

该`tabs.on()`调用设置了一个事件。它不会直接导致其他任何事情发生。属性中的函数`onMessage`由内容脚本发布的消息触发，内容脚本本身由选项卡的激活（通常是网页的访问）触发。在它上面`console.log()`的调用之后立即执行`tabs.on()`，很可能在附加任何选项卡之前执行。

# security - 用于证书各个字段的字符编码

> ID：15624878
> 
> 赞同：0
> 
> 时间：2013-03-25T21:13:26.883
> 
> 标签：security, openssl, ssl-certificate, x509, asn.1

[我不清楚在 X509 证书（通用名称等rfc 5280](http://www.ietf.org/rfc/rfc5280.txt "RFC5280") ）的各个字段中使用的字符编码（AsciiString、BMPString、UTF8String 等）信息来自哪里。我们绝对不能确定只看单个字符流（除非它是 Unicode）。x509 证书是否包含有关其他地方的字符编码的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:19:38.807

该标准指定每个字段是或可以是字符集。这几乎定义了它。

此外 - 如果您访问一个字段，您实际上可以看到它实际编码为的类型。所以你知道接下来是UTF8等。

API 使您摆脱了所有控制——因此 GENERAL_NAME 只是分解为指定对象的字段（例如 commonName 等）和字段值（例如一个人的 UTF8 编码名称）之类的东西。同样对于 URI 或电子邮件地址 - 以及随之而来的更受限制的值。你会得到通知（obj->type）它是什么（ASN1_UTF8STRING等）。

所以每次 - 你得到的是字符串以及它是如何编码的。

# php - BBcode 表 (PHP) 导致的空间过多

> ID：15624879
> 
> 赞同：1
> 
> 时间：2013-03-25T21:13:34.773
> 
> 标签：php, html-table, str-replace, bbcode, nl2br

我已经进行了广泛的谷歌搜索，但我似乎无法弄清楚。希望你能帮助我。

我正在编写留言板。系统从回复中过滤出 HTML，并强制我的成员使用标准的 BBcode。所有基本的 BBcode 都运行顺利，但是我的表格代码遇到了障碍。

**BB码**

这是在我的留言板上控制 BBcode 的脚本。这非常简单直接。我只关心 [table] [tr] 和 [td]，但我包括了 [b]，以便您了解该函数处理的不仅仅是我正在使用的三个代码。

```
function BBcode($original_string) {

$find = array(
'/\[b\](.*?)\[\/b\]/is',
'/\[table\](.*?)\[\/table\]/is',
'/\[tr\](.*?)\[\/tr\]/is',
'/\[td\](.*?)\[\/td\]/is'
);

$replace = array(
'<b>$1</b>',
'<table border="1" cellpadding="5">$1</table>',
'<tr>$1</tr>',
'<td>$1</td>
);

$new_string = preg_replace ($find, $replace, $original_string);

return $new_string;

} 
```

因此，如果成员想在留言板上的回复中使用表格 BBcode 代码，他们可能会键入如下内容：

```
[table]

[tr]
[td]Cell 1[/td]
[td]Cell 2[/td]
[td]Cell 3[/td]
[/tr]

[tr]
[td]x[/td]
[td]y[/td]
[td]z[/td]
[/tr]

[/table] 
```

太棒了！这按计划工作。

**问题**

虽然它有一个主要缺陷——如果成员使用我上面提供的 BBcode 提交表格，nl2br 会添加一大堆无用的空格。你可以在这里看到我的意思：

![](../Images/55f7a9c9b7c6cdf64c61c994b28f1fb3.png)

（想象一下每增加一个 TR 会变得更糟）

但是，如果用户像这样发布他们的评论：

```
[table] [tr] [td]Cell 1[/td] [td]Cell 2[/td] [td]Cell 3[/td] [/tr] [tr] [td]x[/td] [td]y[/td] [td]z[/td] [/tr] [/table] 
```

他们发布的评论看起来不错：

![](../Images/71c2467379b800a680cd3da1826059e9.png)

**我已经尝试过的**

我发现这种情况正在发生，因为我在这些评论中使用了 nl2br。目前，它会在 BBcode 函数运行之前添加 BR 标签。我尝试在 BBcode 之后移动 nl2br，但这没有用。

接下来，我回到 BBcode 函数并尝试在数组中执行 str_replace。

```
function BBcode($original_string) {

$find = array(
'/\[b\](.*?)\[\/b\]/is',
'/\[table\](.*?)\[\/table\]/is',
'/\[tr\](.*?)\[\/tr\]/is',
'/\[td\](.*?)\[\/td\]/is'
);

$replace = array(
'<b>$1</b>',
'<table border="1" cellpadding="5">' .print str_replace("<br />", "", "$1"). '</table>',
'<tr>$1</tr>',
'<td>$1</td>
);

$new_string = preg_replace ($find, $replace, $original_string);

return $new_string;

} 
```

我还尝试过无数种其他方式来编写该行，例如：

```
'<table border="1" cellpadding="5">' .str_replace("<br />", "", "$1"). '</table>',
'<table border="1" cellpadding="5">' .str_replace("<br />", "", "$1"). '$1</table>',
'<table border="1" cellpadding="5">' .str_replace("<br />", "", "$1"). '$1</table>',
'<table border="1" cellpadding="5">' . $thing = str_replace("<br />", "", "$1"); . '$thing</table>',
'<table border="1" cellpadding="5">' . $thing = str_replace("<br />", "", "$1") . '$thing</table>',
'<table border="1" cellpadding="5">' . print str_replace("<br />", "", $1); . '</table>',
etc 
```

基本上，我想要做的是替换在 [table] 代码中找到的所有 BR 标签。我该怎么做呢？我究竟做错了什么？我应该改变我的方法吗？

如果这个问题已经在其他地方得到回答，我提前道歉。我在其他论坛上看到至少三个人有同样的问题，但是 OP 都链接到同一个地方——一个带有解决方案的线程现在在一个过期的链接上给出。但如果我错过了什么，请给我链接！

如果您有任何问题，请询问！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-27T12:13:10.997

当我遇到这个问题时我所做的是隐藏`br/`

我把桌子放在自定义里面`div`

```
$replace = array(
    '<div class="tablepost"><table border="1" cellpadding="5">' .print str_replace("<br />", "", "$1"). '</table></div>', 
```

然后添加了这个 css 技巧：

```
.tablepost > br {
  content: ' '
} 
```

# c# - 跟踪通过 wcf 传递的 linq to sql 对象中的更改（来回）

> ID：15624882
> 
> 赞同：0
> 
> 时间：2013-03-25T21:13:43.047
> 
> 标签：c#, .net, wcf, linq-to-sql

我首先从数据库中获取每个 Linq to sql 的对象（这里是用户类的对象）。

```
dataacces da = new dataaccess(..);
user obj = da.users.First(o => od.id = 1); 
```

然后用户对象通过 wcf 传递给客户端，例如。更改 firstname 属性，然后将对象传递回服务器以将更改写入数据库。

与数据库中的条目相比，是否有可能找出哪些属性有机会。对返回的用户调用的 da.users.GetModifiedMembers(returned object of user) 给了我一个空数组......

有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:32:51.003

从客户端返回后，您需要重新附加修改后的实体：

[http://msdn.microsoft.com/en-us/library/bb548972.aspx](http://msdn.microsoft.com/en-us/library/bb548972.aspx)

# html - 画布框架性能

> ID：15624886
> 
> 赞同：3
> 
> 时间：2013-03-25T21:13:57.453
> 
> 标签：html, html5-canvas, kineticjs, fabricjs, easeljs

我想为即将开始的项目选择一个画布框架。因此，我开始了一项研究，以找到适合我需要的那个。在搜索各种库的优缺点时，我偶然发现了这个性能测试（[http://jsdo.it/djankey/test-kineticjs](http://jsdo.it/djankey/test-kineticjs)）。

我对这三个库的不同表现印象深刻。所以我想问一下这个测试是否反映了 Kinetic.js、Fabric.js 和 Easel.js 展示的实际性能。

前两者似乎很慢（至少在我的电脑上）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:50:20.143

在我的系统上，fabric.js 也非常快，但是它没有与我的鼠标交互。我正在使用 EaselJS 进行开发，我对它非常满意，主要原因是它的 API 非常接近 AS3 - 所以如果您之前使用过 Flash 开发，您可能需要考虑它。

另一方面，这些框架中的任何一个都可能在性能方面满足您的需求。我猜你的项目不会是一个简单的 300x300 框，有 1000 个点，我想说任何这些框架都应该很好地处理多达 100 个精灵。当你的画布变得更大（例如全屏）时，它会变得很有趣，因为那时渲染更多地依赖于硬件和浏览器原生渲染操作而不是画布框架。并且 afaik 所有这些框架都在“滴答”上重新渲染了完整的画布（但我对此不是 100% 确定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T18:08:36.777

这取决于您正在构建的项目类型。正如上面提到的 olsn，如果您熟悉 ActionScript 和/或您正在构建具有大量移动精灵的游戏需要 CPU 性能，那么 Easel.js 绝对是您提到的三个框架中的最佳选择。如果您想与 CreateJS 套件中的其他库集成，Easel 也是一个明智的选择。

如果您正在构建游戏并且不介意在受支持的解决方案上投入一些资金，您可能想要调查 Impactjs - 我没有亲自使用过它，但我从我的开发者朋友那里听到了好消息。

您可以在 Kinetic 中非常快速地构建简单的应用程序——它的 API 非常简单明了，但如果性能是关键——那么我可能会回避它。

如果您需要大量的交互性，并且想要一个让用户可以轻松地在屏幕上操作对象的库 - 那么 fabricjs 是一个开箱即用的好工具，并且具有许多内置功能，可以快速开发这样的应用程序，它的性能也比较好。

# php - 使用可点击的文本为变量赋值

> ID：15624890
> 
> 赞同：0
> 
> 时间：2013-03-25T21:14:14.423
> 
> 标签：php, javascript, html, mysql, css

我想让用户选择“是”或“否”作为给定问题的答案。例如，如果用户单击“是”，我想给出一个名为的变量，比如说；$value 如果用户单击“否”，则值为“是”，反之亦然。

问题是我不知道如何使文本字符串可点击，并且只在点击字符串时给变量一个值。

我的想法是做这样的事情，但据我所知，这可能不是这样做的方法吗？

```
<h1><a href="yes.php" onclick="<?php global $value; $value='YES'; ?>">YES</a>
<a href="yes.php" onclick="<?php global $value; $value='NO'; ?>">NO</a></h1>

<?php
    global $value;
    $answer=getDbInfo('Answer');

    if($value==$answer){
        echo 'Correct';
    }else{echo 'Incorrect';}
?> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:24:26.930

一个简单的建议是使用`GET`类似的方法；

将您的文件命名为`myfile.php`

```
<h1><a href="myfile.php?option=yes">YES</a>
<a href="myfile.php?option=no">NO</a></h1>

<?php
    $value = $_GET["option"];
    $answer=getDbInfo('Answer');

    if($value==$answer){
        echo 'Correct';
    }else{echo 'Incorrect';}
?> 
```

# wpf - 如何访问 TabControl.ContentTemplate 中的 ListBox？

> ID：15624892
> 
> 赞同：1
> 
> 时间：2013-03-25T21:14:20.370
> 
> 标签：wpf

在我后面的代码中，我将 MessageBoxTabControl.ItemsSource 设置为 Observable Collection。

```
<TabControl x:Name="MessageBoxTabControl">
    <TabControl.ContentTemplate>
        <DataTemplate>
            <ListBox x:Name="MessageListBox" />
                <!-- ^ I want a reference to this control -->
        </DataTemplate>
    </TabControl.ContentTemplate>
</TabControl> 
```

假设我有相关的 tabcontrol 和 tabitem，我怎样才能获得对我的 ListBox 的引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T21:48:27.530

你有没有想过以其他方式做任何你想做的事情？通常，当您拥有 DataTemplate 时，您可能希望在该模板内的控件上设置的任何属性都应该是静态的（所以为什么要访问它们）或取决于提供的数据，然后应该由 DataBinding 实现。

您可以使用以下代码获取 ListBox。我仍然觉得重新考虑你的结构而不是使用这段代码会更好。

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
                    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    Title="MainWindow" Height="350" Width="525">

    <TabControl x:Name="MessageBoxTabControl">
        <TabControl.ContentTemplate>
            <DataTemplate >
                <ListBox x:Name="MessageListBox" >
                    <ListBoxItem Content="ListBoxItem 1" /> <!-- just for illustration -->
                </ListBox>
            </DataTemplate>
        </TabControl.ContentTemplate>
        <TabItem Header="Tab 1" />
        <TabItem Header="Tab 2" />
    </TabControl>
</Window> 
```

后面的代码：

```
void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    ListBox lbx = FindVisualChildByName<ListBox>(this.MessageBoxTabControl, "MessageListBox");
    if (lbx != null)
    {
        // ... what exactly did you want to do ;)?
    }
}

private T FindVisualChildByName<T>(DependencyObject parent, string name) where T : FrameworkElement
{
    T child = default(T);
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
    {
        var ch = VisualTreeHelper.GetChild(parent, i);
        child = ch as T;
        if (child != null && child.Name == name)
            break;
        else
            child = FindVisualChildByName<T>(ch, name);

        if (child != null) break;
    }
    return child;
} 
```

还有第二种类似的方式，它实际上使用了模板，但仍然依赖于可视化树来获取 ContentPresenter（FindVisualChild 实现类似于上面）：

```
ContentPresenter cp = FindVisualChild<ContentPresenter>(this.MessageBoxTabControl);
ListBox lbx = cp.ContentTemplate.FindName("MessageListBox", cp) as ListBox; 
```

请注意，由于对可视树的这种依赖性，您将始终只能使用此方法找到所选选项卡的 ListBox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:05:50.363

应该是这样的：

```
TabItem relevantTabItem = howeverYouGetThisThing();
var grid = System.Windows.Media.VisualTreeHelper.GetChild(relevantTabItem, 0);
var listBox = (ListBox) System.Windows.Media.VisualTreeHelper.GetChild(grid, 0); 
```

# jsp - 勾选复选框后struts2编辑或更新

> ID：15624901
> 
> 赞同：2
> 
> 时间：2013-03-25T21:14:57.507
> 
> 标签：jsp, struts2

我之前使用了一张包含酒店列表的表格，每行都有选项，例如

```
 hote name        hotelabbr               phnno                 option
    abc                ab                  23345345345            edit   delete
    def                abc                 34543534543            edit   delete 
```

但是现在我有一张桌子，上面有一个酒店列表，每行都有一个复选框，比如

我在每一行都有一个复选框，并且有一个超链接包含动作类的 url

就像`<a href="edithotel" >Edit</a>` 我想在选中复选框后更新特定行或删除行一样，如果要删除某些东西，他必须选中复选框，然后单击删除超链接。任何帮助将不胜感激。

谢谢

# c++ - C++ WriteProcessMemory 在 32 位中不起作用

> ID：15624906
> 
> 赞同：-1
> 
> 时间：2013-03-25T21:15:26.097
> 
> 标签：c++, winapi, memory

问题在标题中，我使用写入进程内存来更改内存中的一些值我在 64 位窗口中尝试过它并且它工作得很好，但问题是在 32 位窗口中它没有写入我想要读取进程内存的值64位窗口和32位窗口，但问题是书面请帮助我（：

编辑：代码是：

```
 #include "stdafx.h"
    #include <iostream>
    #include <fstream>
    #include <windows.h>
int _tmain(int argc, _TCHAR* argv[])
{
    cout << "Loading..."<< endl;
    int address = 0x3458CBC0; 
    int address2 = 0x3458CBC4; 
    int value = 20;
    DWORD pid;
    HWND hwnd = FindWindowA(NULL,"some window");
    GetWindowThreadProcessId(hwnd,&pid);
    HANDLE phandle;
    cout << "Found Proccess ID:" << pid << endl;
    phandle = OpenProcess(0x1F0FFF,0,pid);
    cout << "Loaded Successfully."<< endl ;
    ReadProcessMemory(phandle,(LPVOID)address,&value,4,0);
    cout << "Readed Value:" << value << endl;
    ReadProcessMemory(phandle,(LPVOID)address2,&value,4,0);
    cout << "Readed Value:" << value << endl;
    address = 0x3458CBC0; 
    address2 = 0x3458CBC4; 
    value = 20;
    WriteProcessMemory(phandle,(LPVOID)address,&value,4,0);
    WriteProcessMemory(phandle,(LPVOID)address2,&value,4,0);
    cin.get();
    return 0;
} 
```

**解决方案**：

该应用程序挂钩了在内核中写入内存的 api，该挂钩在 64 位 Windows 中不起作用，因此我可以写入内存

感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:24:35.523

在 Windows 下运行的 32 位应用程序实际上使用了特殊的 32 位仿真包装器 (WOW64)。您不能从那里写入 64 位应用程序的地址空间。

[这是一个比我能更好地解释它的页面。](http://www.techsupportalert.com/content/how-windows7-vista64-support-32bit-applications.htm)

**编辑添加：**

如果您正在执行 32 位构建，在 32 位 Windows 上运行，它应该可以工作。如果没有，请发布您的代码。

**编辑添加：**

测试返回值`WriteProcessMemory()`。如果它为零（这似乎很可能），请调用[GetLastError()](http://msdn.microsoft.com/en-us/library/ms679360%28VS.85%29.aspx) - 这应该会给你一个线索。

# ruby-on-rails - Rails.env 返回“生产”，即使我在开发模式下运行？

> ID：15624907
> 
> 赞同：0
> 
> 时间：2013-03-25T21:15:27.133
> 
> 标签：ruby-on-rails, development-environment, production-environment

所以，我注意到最近我的 Airbrake 一直在发疯，因为我在为我的网站进行本地开发时出错......今天我意识到我的网站默认在生产模式下运行。

即使我跑步：`rails server -e development`，

它仍然在生产模式下运行。

最近将应用程序更新为 Rails 3.2.* 而不是 2.3.* - 不确定这是否有帮助。

运行 Thin 而不是 WEBrick。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:23:19.557

你在使用[捆绑](http://gembundler.com/)器吗？如果是，您可以：

`RAILS_ENV=development bundle exec thin start`

或者

`RAILS_ENV=development bundle exec rails s`

如果没有捆绑器，您可以尝试：`thin start -e development`

**=====一些评论后更新=====**

也许有一个配置文件会在您启动时加载。要对此进行调试，您可以尝试使用以下内容创建一个简单的 .yml 文件（比如说 try.yml）：
`environment: development`

然后尝试重新开始：`bundle exec thin start -C try.yaml`
要确保加载此配置，您可以添加类似：`port: 9292`到 .yml 文件，并查看应用程序是否在该端口上启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:01:56.103

找到了解决方案！我检查并删除了所有初始化程序文件，假设它们可能是一个问题。逐一添加后，我发现了问题。

在一个文件中，有一个关于 Rails.env 的 if/else 语句。

`if Rails.env = "production"`

显然，这是一个分配而不是比较！

它应该是：`if Rails.env == "production"`

感觉自己像个菜鸟，但是嘿！我们就是这样学习的！

感谢@burninggramma 的帮助！

# scala - 如何将 sbt 连续测试与 eclipse scala ide 结合起来？

> ID：15624910
> 
> 赞同：4
> 
> 时间：2013-03-25T21:15:40.290
> 
> 标签：scala, sbt, scala-ide

我在[Eclipse Scala IDE中进行编辑，并使用](http://scala-ide.org/)[sbt](http://www.scala-sbt.org/)`~ test`在单独的屏幕上运行我的测试。我的测试是使用[specs2](http://etorreborre.github.com/specs2/)编写的。

这给了我双重编译，有时 Eclipse 仍在构建，而 sbt 开始启动。

为了解决这个问题，我关闭了自动构建，但这也消除了 Eclipse 中漂亮的编译器警告和错误。

有没有办法在没有双重编译时间的情况下两者兼得？

## 编辑

我想最好的方法（或者可能是唯一的方法）是在`sbt`不编译的情况下运行测试。我尝试了该`test:run`命令，但这给了我以下错误：

```
java.lang.RuntimeException: No main class detected.
    at scala.sys.package$.error(package.scala:27)
    at sbt.Defaults$$anonfun$runTask$1$$anonfun$apply$27$$anonfun$13.apply(Defaults.scala:519)
    at sbt.Defaults$$anonfun$runTask$1$$anonfun$apply$27$$anonfun$13.apply(Defaults.scala:519)
    at scala.Option.getOrElse(Option.scala:108)
    at sbt.Defaults$$anonfun$runTask$1$$anonfun$apply$27.apply(Defaults.scala:519)
    at sbt.Defaults$$anonfun$runTask$1$$anonfun$apply$27.apply(Defaults.scala:518)
    at sbt.Scoped$$anonfun$hf5$1.apply(Structure.scala:581)
    at sbt.Scoped$$anonfun$hf5$1.apply(Structure.scala:581)
    at scala.Function1$$anonfun$compose$1.apply(Function1.scala:49)
    at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$12.apply(Structure.scala:311)
    at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$12.apply(Structure.scala:311)
    at sbt.$tilde$greater$$anonfun$$u2219$1.apply(TypeFunctions.scala:41)
    at sbt.std.Transform$$anon$5.work(System.scala:71)
    at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:232) 
```

**`~ test:run`Eclipse 编译文件时如何使用？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T19:50:14.700

没有双重编译，并且在 Eclipse 中仍然有所有警告是不可能的。

但是您可以将 Eclipse 配置为不踩到 sbt 的脚趾。它不必为编译使用相同的输出文件夹。

在项目`Properties > Java Build Path > Source`中，选择`Output folder`测试源文件夹，并将位置更改为`target/eclipse/test-classes`.

![在此处输入图像描述](../Images/f0abc308c474e291194d8d3b3de8b0e2.png)

这样，Scala IDE 就不会接触 sbt 创建的类文件。

您可能需要对主源文件夹执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T22:32:23.560

使用当前的[sbteclipse](https://github.com/typesafehub/sbteclipse)版本，您可以使用以下设置：

```
EclipseKeys.eclipseOutput := Some(".target") 
```

文档可以在这里找到：[使用 sbteclipse](https://github.com/typesafehub/sbteclipse/wiki/Using-sbteclipse)

# java - 在 JScrollpane 内的 JPanel 中动态更改内容可见性

> ID：15624911
> 
> 赞同：2
> 
> 时间：2013-03-25T21:15:41.193
> 
> 标签：java, swing, jpanel, jscrollpane

我在 JScrollPane 中有一个 JPanel。JPanel 内部有许多 JButton。然而，当 JPanel 和 JScrollPanel 被初始化时，这些 JButtons 被设置为 NOT VISIBLE (jbutton.setVisible(false))。当另一个类触发它时，JButtons 仅设置为 VISIBLE (jbutton.setVisible(true))。

但是，尽管这些 JButton 已成功添加并设置为在 JPanel 上可见，但它们在 JPanel 或 JScrollPane 上不可见。我的猜测是，当 JScrollPane 添加 JButtons 时，JButtons 设置为 NOT VISIBLE，即使 JButtons 设置为 VISIBLE，JScrollPane 也不会检测到它们。

有没有办法动态改变 JScrollPane 内 JPanel 中 JButtons 的可见性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:19:56.877

> 但是，尽管这些 JButton 已成功添加并设置为在 JPanel 上可见，但它们在 JPanel 或 JScrollPane 上不可见。我的猜测是，当 JScrollPane 添加 JButtons 时，JButtons 设置为 NOT VISIBLE，即使 JButtons 设置为 VISIBLE，JScrollPane 也不会检测到它们。

*   必须调用`revalidate()`and `repaint()`to `JPanel`，作为执行所有更改后的最后一行代码

*   必须更改[`setUnitIncrement`](https://stackoverflow.com/a/11183706/714968)for `JButtons`in `JPanel`Wrap in `JScrollPane`，因为滚动太慢，不自然

# c - 使用 PlaySound 播放 wav 文件

> ID：15624918
> 
> 赞同：0
> 
> 时间：2013-03-25T21:16:01.120
> 
> 标签：c, linker, playsound

我正在使用运行 Visual Studio 2010 的 Windows 7 并在抄送中写作。

这是我的代码片段。当满足条件（温度高于上限）时，我想从我的电脑播放一个 wav 文件。我检查了论坛，并复制了与以前的海报相同的格式，如果我仍然有同样的问题。我收到以下错误：

> 1>lab4TemperatureController.obj：错误 LNK2019：无法解析的外部符号 _ *imp* _PlaySoundA@12 在函数“void __cdecl activateAlarm(int,int)”(?activateAlarm@@YAXHH@Z) 中引用
> 
> 1>C:\Users\Hassman\Documents\Visual Studio 2010\Projects\lab6\lab6TemperatureControlTime\Debug\lab3temperaturesensor.exe : 致命错误 LNK1120: 1 unresolved externals

这是我的 CPP 中包含的头文件

```
#include "stdafx.h"
#include "lab4temperatureController.h"
#include <conio.h>
#include "console.h"
#include <iostream>
#include <Windows.h> 
```

这是我调用 playsound 的函数

```
void activateAlarm(int channelID, temperature_t temperature)
{
    int key = 0;

    if ((temperatureChannel[channelID].currentTemperature > temperatureChannel[channelID].highLimit) | (temperatureChannel[channelID].currentTemperature < temperatureChannel[channelID].lowLimit))
        PlaySound(TEXT("C:\\Users\\Hassman\\Documents\\Visual Studio 2010\\Projects\\lab6\\lab6TemperatureControlTime\\lab3temperaturesensor\\untitled"),NULL,SND_FILENAME);
    sensorLog();
    if (_kbhit())
        key = _getch();         
    if ((key == 'P') | (key == 'p'))
    {
        silenceBeep();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:22:41.023

在生成可执行输出文件时，您似乎忘记将目标文件与包含该函数实现的库链接。

根据[MSDN 库](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743680%28v=vs.85%29.aspx)，使用`PlaySound`需要与`Winmm.lib`.

# underscore.js - 下划线插值设置

> ID：15624922
> 
> 赞同：10
> 
> 时间：2013-03-25T21:16:11.680
> 
> 标签：underscore.js, underscore.js-templating

我正在尝试在主干中使用带有下划线的车把样式模板（使用 require.js）。我有以下内容：

```
_.templateSettings.interpolate = /\{\{(.+?)\}\}/g; 
```

在我的模板中，我设置了一个测试：

```
<div><%= title %> | {{ title }}</div> 
```

我在浏览器中得到以下信息：

```
Correct title | {{ title }} 
```

所以看起来标准的下划线模板设置正在工作，而车把样式的设置被忽略了：

但是，如果我在 chrome 中检查控制台，我会得到这个（在我看来它应该是正确的）

```
_.templateSettings
Object {evaluate: /<%([\s\S]+?)%>/g, interpolate: /\{\{(.+?)\}\}/g, escape: /<%-([\s\S]+?)%>/g} 
```

任何想法为什么这不能正常工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-25T21:49:28.843

当我这样做时：

```
_.templateSettings.interpolate = /\{\{(.+?)\}\}/g;
var t = _.template($('#t').html()); 
```

使用您的模板`#t`，我收到一个错误：

> SyntaxError: 意外的标记 '='

这很好地证实了我对评估正则表达式的怀疑：

```
/<%([\s\S]+?)%>/g 
```

`<%= ... %>`与您在模板中的匹配。等号匹配`\S`，因此评估正则表达式当然会找到`<%= ... %>`，去掉`<%`and ，并在尝试构建`%>`的 JavaScript 中留下语法错误。`_.template`

如果您查看[`_.template`源代码](https://github.com/documentcloud/underscore/blob/master/underscore.js#L1133)，您会看到正则表达式是按特定顺序检查的：

1.  `escape`
2.  `interpolate`
3.  `evaluate`

所以只是替换`interpolate`会让`<%= ... %>`事情被抓住（和误解）但是`evaluate`。

您需要做的就是替换`evaluate`正则表达式。我建议替换所有三个正则表达式以避免出现问题：

```
_.templateSettings = {
    evaluate:    /\{\{(.+?)\}\}/g,
    interpolate: /\{\{=(.+?)\}\}/g,
    escape:      /\{\{-(.+?)\}\}/g
}; 
```

演示：http: [//jsfiddle.net/ambiguous/SdLsn/](http://jsfiddle.net/ambiguous/SdLsn/)

# android - 对话框片段中的空指针异常

> ID：15624923
> 
> 赞同：0
> 
> 时间：2013-03-25T21:16:11.873
> 
> 标签：android, nullpointerexception, android-dialog, android-dialogfragment, android-calendar

我正在尝试在对话框中显示日历视图。以下是代码。当我单击启动对话框的按钮时，应用程序崩溃并显示`NullPointerException`. 在这种情况下，空指针是在行中创建的“cal”变量：

## cal = (CalendarView)calenderDialog.findViewById(R.id.calendarView1);

```
package com.android.filllip.ToDo;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.widget.CalendarView;
import android.widget.CalendarView.OnDateChangeListener;

public class CalendarDialog extends DialogFragment {
    NoticeDialogListener mListener;
    CalendarView cal;
    static int mYear;
    static int mMonth;
    static int mDay;
    static final String tag = "Calendar pop up";

    interface NoticeDialogListener {

        public void onDialogPositiveClick(DialogFragment dialog);

        public void onDialogNegativeClick(DialogFragment dialog);

        public void showTheSelectedDate();
    }

    *public Dialog onCreateDialog(Bundle onSaveInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        LayoutInflater inflater = getActivity().getLayoutInflater();

        builder.setView(inflater.inflate(R.layout.calendarpopup, null));
        builder.setNegativeButton("Set ",
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int id) {

                        mListener.onDialogPositiveClick(CalendarDialog.this);
                    }

                });
        builder.setPositiveButton("Cancel",
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int id) {
                         mListener.onDialogPositiveClick(CalendarDialog.this);
                    }

                });
        AlertDialog calendarDialog = builder.create();
        cal = (CalendarView)calendarDialog.findViewById(R.id.calendarView1);
        Log.d(tag,"calender value is "+cal);
        cal.setOnDateChangeListener(new  OnDateChangeListener(){

            @Override
            public void onSelectedDayChange(CalendarView view, int year,
                    int month, int dayOfMonth) {
                // TODO Auto-generated method stub
                Log.d(tag,mYear+": year");
                Log.d(tag,mMonth+": month");
                Log.d(tag,mDay+": day");
                mYear = year;
                mMonth = month;
                mDay = dayOfMonth;
            }

        });
        return calendarDialog;

    }*

    public void onAttach(Activity activity) {
        super.onAttach(activity);
        // Verify that the host activity implements the callback interface
        try {
            // Instantiate the NoticeDialogListener so we can send events to the
            // host
            mListener = (NoticeDialogListener) activity;
        } catch (ClassCastException e) {
            // The activity doesn't implement the interface, throw exception
            throw new ClassCastException(activity.toString()
                    + " must implement NoticeDialogListener");
        }

    }

} 
```

我的布局文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <CalendarView
        android:id="@+id/calendarView1"
        android:layout_width="match_parent"
        android:layout_height="300dp"

        />

</RelativeLayout> 
```

logcat 跟踪：

```
03-25 17:10:01.531: E/AndroidRuntime(3102): FATAL EXCEPTION: main
03-25 17:10:01.531: E/AndroidRuntime(3102): java.lang.NullPointerException
03-25 17:10:01.531: E/AndroidRuntime(3102):     at com.android.filllip.ToDo.CalendarDialog.onCreateDialog(CalendarDialog.java:61)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at android.support.v4.app.DialogFragment.getLayoutInflater(DialogFragment.java:295)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at android.os.Handler.handleCallback(Handler.java:605)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at android.os.Looper.loop(Looper.java:137)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at android.app.ActivityThread.main(ActivityThread.java:4511)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at java.lang.reflect.Method.invokeNative(Native Method)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at java.lang.reflect.Method.invoke(Method.java:511)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:976)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:743)
03-25 17:10:01.531: E/AndroidRuntime(3102):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:30:07.120

像下面这样使用，

```
public Dialog onCreateDialog(Bundle onSaveInstanceState) {
            AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
            LayoutInflater inflater = getActivity().getLayoutInflater();
            View v= inflater.inflate(R.layout.calendarpopup, null);
            final CalendarView cal= (CalendarView)v.findViewById(R.id.calendarView1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:27:40.273

使用 CalendarDialog.setView 并不意味着 CalendarDialog 现在将与视图或 xml 布局有关。你应该在一个单独的视图组中扩展你的布局，然后从这个视图中通过 Id 找到你的视图，然后使用 setView 将视图组放在对话框中。

# java - 从 Java 启动 Javafx 并传递值

> ID：15624924
> 
> 赞同：0
> 
> 时间：2013-03-25T21:16:24.160
> 
> 标签：java, multithreading, parameter-passing, javafx

我正在使用 NetBeans，并且在同一个包下有两个类（main.java 使用带有按钮的 swing 容器。FXapp.java 使用 JavaFX 在单独的窗口中播放媒体）。单击 main.java 上的按钮应该会在其自己的线程中启动 FXapp.java。但是，使用下面的代码，我启动了应用程序，但我的 java 应用程序挂起。有关如何在没有此问题的情况下启动 JavaFX 应用程序的任何建议？另外（可能相关）然后我希望 Java 应用程序能够传递值以显示在 FXapp 的文本框中。这可能是因为我无法处理 FXapp。

Java 按钮代码：

```
FXApp xvp = new FXapp(); 
```

FXapp中的主要方法代码为：

```
public static void main(String[] args) throws Throwable {
    FXapp obj1 = new FXapp();
    new Thread(obj1).run();
    setRefObj(obj1);
} 
```

FXapp“运行”方法代码：

```
public void run() {
    try {
        Application.launch();
    } catch (Throwable t) {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:27:15.183

JavaFX 管理它自己的线程，您不应该尝试指定一个线程供 JavaFX 使用。

我建议不要尝试通过调用`Application.launch`Swing 应用程序中的方法来启动 JavaFX 应用程序，而是使用 a`JFXPanel`来保存由 JavaFX 应用程序实例创建的场景：

```
JFrame frame = new JFrame("Swing and JavaFX");
final JFXPanel fxPanel = new JFXPanel();
frame.add(fxPanel);
frame.setSize(300, 200);
frame.setVisible(true);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

final FXApp xvp = new FXapp();
final String initialText = "xyzzy";

Platform.runLater(new Runnable() {
  @Override public void run() {
    // createRootScene is a new public method you write and expose on FXApp.
    Scene scene = xvp.createRootScene(String customText);
    fxPanel.setScene(scene);
  }
}); 
```

上述方法在 JavaFX for Swing Developers 教程中详细介绍了将 JavaFX 集成[到 Swing 应用程序](http://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm#CHDIEEJE)中。

当您使用 a`JFXPanel`时，JavaFX 系统将使用由 JavaFX 系统管理的 JavaFX Application 线程，而 Swing 将使用它的 Event Dispatch Thread。JavaFX 应用程序线程将不同于 Swing 事件调度线程（如我链接的 JavaFX 文档中所述）。必须注意，所有 JavaFX 处理都是在 JavaFX 应用程序线程上完成的（通过使用[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)构造），而 Swing 处理是在 Swing Event Dispatch 线程上完成的（通过使用[SwingUtilities.invokeLater](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html)构造）。

对于您在现有 Swing 应用程序中使用 JavaFX 播放媒体的特定情况，在问题的答案中有一个示例解决方案：[在普通 Java 应用程序中使用 JavaFX MediaPlayer 播放音频？](https://stackoverflow.com/questions/12548603/playing-audio-using-javafx-mediaplayer-in-a-normal-java-application) 请注意，要做到这一点，您实际上并不需要创建一个新的 JavaFX 应用程序，而只需创建一个 JavaFX `Scene`，您可以将其放置在`JFXPanel`.

# c# - 新 Outlook.ItemEvents_10_ReplyEventHandler(MailItem_Reply) - 没有发件人电子邮件详细信息

> ID：15624928
> 
> 赞同：2
> 
> 时间：2013-03-25T21:16:48.510
> 
> 标签：c#, outlook-2010

我正在尝试回复电子邮件`null`时`sender.name``SenderName`

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    currentExplorer = this.Application.ActiveExplorer();
    currentExplorer.SelectionChange += new Outlook.ExplorerEvents_10_SelectionChangeEventHandler(CurrentExplorer_Event);
}

private void CurrentExplorer_Event()
{
    if (this.Application.ActiveExplorer().Selection.Count == 1
     && this.Application.ActiveExplorer().Selection[1] is Outlook.MailItem)
    {
        if (mailItem != null)
        {
            ((Outlook.ItemEvents_10_Event)mailItem).Reply -= new Outlook.ItemEvents_10_ReplyEventHandler(MailItem_Reply);
        }

        mailItem = this.Application.ActiveExplorer().Selection[1];
        ((Outlook.ItemEvents_10_Event)mailItem).Reply += new
        Outlook.ItemEvents_10_ReplyEventHandler(MailItem_Reply);
    }
} 

void MailItem_Reply(Object response, ref bool cancel)
{
    Outlook.MailItem mailItem = (Outlook.MailItem)response;

    mailItem.GetInspector.Activate();
    string u = mailItem.Subject;
    string x = mailItem.Sender.Name;
    string r = mailItem.SenderName;

    mailItem.Body = "Hi " + x.Split(' ')[0]+ "\n" + mailItem .Body;
} 
```

我也得到

> 方法“Microsoft.Office.Interop.Outlook._Inspector.Activate()”和非方法“Microsoft.Office.Interop.Outlook.InspectorEvents_10_Event.Activate”之间存在歧义。使用方法组。

有人可以告诉我如何正确执行此操作，以便我可以自动回复例如发件人姓名并消除这种歧义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:01:42.377

*（基于我们的讨论，因为这似乎有所帮助）*

MailItem 在准备新电子邮件时通常不会初始化...

> 我通常做 mail.Save(); 初始化属性

对于选角问题...

> 只需转换为 ((Microsoft.Office.Interop.Outlook._Inspector)mailItem.GetInspector).Activate()‌​; - 它在不同的界面中有一个同名的事件。

# javascript - 是否可以使用 js 更改 CSS 内容？

> ID：15624929
> 
> 赞同：1
> 
> 时间：2013-03-25T21:16:49.077
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我在我的项目中使用[Bootstrap](http://twitter.github.com/bootstrap/)，我需要小包装器。我从 twitters 源得到它，它看起来像：

```
section#my-content {
    background-color: #FFFFFF;
    border: 1px solid #DDDDDD;
    border-radius: 4px 4px 4px 4px;
    margin: 15px 0;
    padding: 39px 19px 14px;
    position: relative;
}
section#my-content:after {
    background-color: #F5F5F5;
    border: 1px solid #DDDDDD;
    border-radius: 4px 0 4px 0;
    color: #9DA0A4;
    content: "Example";
    font-size: 12px;
    font-weight: bold;
    left: -1px;
    padding: 3px 7px;
    position: absolute;
    top: -1px;
} 
```

那么是否可以使用 JS（jQuery）或以某种方式`content`动态更改属性？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T21:20:46.177

你不能用 jQuery 修改伪元素（除非你想添加`<style>`标签）。但是，您可以更改 CSS 以使其更容易：

```
content: attr(data-text); 
```

文本将包含在元素的属性中：

```
<div data-text="This is the default text">Test</div> 
```

现在，您可以使用 jQuery 更改属性，文本将更改：

```
$('h1').attr('data-text', 'This is some other text'); 
```

**演示：http: [//jsfiddle.net/8qNjv/](http://jsfiddle.net/8qNjv/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:56:40.307

你可以使用很多：

```
// style editing
.attr()
.css()

// text editing
.html()
.append() 
```

但也许最好添加你真正想要的东西，下次也发布 html。以及你想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:23:23.590

如果您的意思是，您可以使用 javascript/jQuery 修改`css rules`给定的`css class`，那么您不能这样做。

但是，您可以使用 jQuery [.css](http://api.jquery.com/css/)动态添加新的 CSS 规则。

在此处阅读[更多信息](https://stackoverflow.com/questions/622122/how-can-i-change-the-css-class-rules-using-jquery)

# ruby-on-rails - 使子域有一个命名空间作为根？

> ID：15624932
> 
> 赞同：3
> 
> 时间：2013-03-25T21:16:54.817
> 
> 标签：ruby-on-rails, namespaces, subdomain, router

是否有可能让命名空间成为 rails 3 中子域的根？

目前我的路线是：

```
 namespace :mobile do
    resources :home
    resources :profiles
    root :to => "/mobile/home#index"
  end

  constraints subdomain: 'm' do
    root :to => 'mobile/home#index'
    resources :home
    resources :profile
    resources :messages
    root :to => 'mobile/home#index'
  end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T21:28:05.810

如果这是您所要求的，您可以将命名空间置于子域约束内

```
constraints subdomain: 'm' do
  namespace :mobile do
    resources :home
    resources :profiles
  end
  resources :messages
  root :to => 'mobile/home#index'
end 
```

或者这里有这个答案：[从命名空间到子域？](https://stackoverflow.com/questions/6367636/from-namespace-to-subdomain)提倡这种方法：

```
constraints :subdomain => "mobile" do
  scope :module => "mobile", :as => "mobile" do
    resources :profiles
    resources :home
  end
end 
```

# iphone - RootViewController 可以实例化故事板吗？

> ID：15624935
> 
> 赞同：2
> 
> 时间：2013-03-25T21:16:59.720
> 
> 标签：iphone, ios, ipad, storyboard, viewcontroller

我有一个 RootViewController，其中包含一系列 viewController，其中包括表、视图和 tabBar 控制器......其中一些有 nib，有些没有，（我正在结合过去创建的几个应用程序 + Web 应用程序的功能) 但它们都工作正常。然而，我有一个项目，它使用故事板。我看到很多关于从情节提要中实例化程序化视图的问题，但是反过来呢？**如何将情节提要添加到我以编程方式实现的导航控制器？**这可能吗？如果没有，下一个最好的解决方法是什么？感谢您的时间和考虑。

这是以下模型的 .h 代码：

```
 UIStoryboard *storyBoard;
UIViewController *storyboardViewController; 
```

这是我的 .m 代码，它打破了我有 V 形的地方......

```
 self.viewControllers = [NSMutableArray arrayWithCapacity:self.apps.count];

storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
>>>storyboardViewController = [storyBoard instantiateViewControllerWithIdentifier:@"myViewCont"];
[self.viewControllers addObject:storyboardViewController]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:18:55.747

那我不就是个傻子吗...

我做了这三件事：

改变：

> > > storyboardViewController = [storyboard instantiateViewControllerWithIdentifier:@"myViewCont"];

至

> > > storyboardViewController = [storyboard instantiateViewControllerWithIdentifier:@"iPhone"];

![在此处输入图像描述](../Images/828213ee7e5aefc36b76c61f5451e1a4.png)

![在此处输入图像描述](../Images/b5f8fef452464c1ba4d4ab8612abcbd0.png)

特别感谢评论者 rdelmar，他提到要检查此答案的捆绑部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:27:43.627

故事板上的 2011 WWDC 视频在会议快结束时说明了这一点。

使用`instantiateInitialViewController`（或者，如果您想从情节提要的中间开始，请使用`instantiateViewControllerWithIdentifier:`）。

这是一个来自当前项目的示例，它将故事板加载到选项卡栏控制器中：

```
 browserStoryboard  = [UIStoryboard storyboardWithName:@"ScheduleBrowse_iPhone" bundle:nil];
    resultVC = [browserStoryboard instantiateInitialViewController];
    UINavigationController *navigationController = (UINavigationController *)resultVC;
    filterChooserVC = (FilterChooserViewController *)navigationController.topViewController;
    filterChooserVC.managedObjectContext = self.managedObjectContext;
    filterChooserVC.kindOfContent = sortMode;
    filterChooserVC.filterGroup = filterGroup;
    resultVC.tabBarItem.image = [UIImage imageNamed:@"first"];
    resultVC.title = filterGroup.text; 
```

返回`resultVC`。在调用例程中，创建以编程方式创建的视图控制器的数组。然后

```
self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = viewControllers;
self.window.rootViewController = self.tabBarController; 
```

# android - 从网站下载图片

> ID：15624941
> 
> 赞同：0
> 
> 时间：2013-03-25T21:17:23.400
> 
> 标签：android, web, download

在网络的某个地方有一个网站。它在第一页（在某个文件夹中）有一张图片。我需要什么才能将这张照片从那个地方下载到 Android 设备上？需要请网站所有者做什么？可能是把这张照片放到某个文件夹..等等。我需要密码/登录名吗？请帮忙。我以前没有这样做。可能我需要一个链接来阅读更多内容。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:23:53.907

首先，看这里：

[http://www.helloandroid.com/tutorials/how-download-fileimage-url-your-device](http://www.helloandroid.com/tutorials/how-download-fileimage-url-your-device)

我认为如果从浏览器中可以看到图片，您就可以访问它！

然后有趣的部分是

```
URL url = new URL("http://yoursite.com/&quot; + imageURL); //you can write here any link
File file = new File(fileName); 
```

然后：

```
/* Open a connection to that URL. */

    URLConnection ucon = url.openConnection();

    ...

    ByteArrayBuffer baf = new ByteArrayBuffer(50);
    int current = 0;
    while ((current = bis.read()) != -1) {
       baf.append((byte) current);
    } 
```

现在你有了原始图像的一个字节[]，你可以写入文件系统：

```
/* Convert the Bytes read to a String. */
FileOutputStream fos = new FileOutputStream(file);
fos.write(baf.toByteArray());
fos.close(); 
```

`file`是可以自由设置的File对象，例如

```
String fileName = "/data/data/image_downloader/image001.png"

  File file = new File(fileName); 
```

看链接！它包含一个完整的例子。

**编辑**

有关目录列表，请查看：

[从 URL（互联网）检索所有图像并将其保存在本地（SD 卡） - Android](https://stackoverflow.com/questions/9050960/retrieve-all-images-from-url-internet-and-save-them-locally-sdcard-android)

并且不要忘记查看有用的 WebView（使用它的一个实例来做很多事情）：

[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

# python - 类型与弱引用的行为 - 无法理解

> ID：15624948
> 
> 赞同：3
> 
> 时间：2013-03-25T21:17:50.580
> 
> 标签：python, cpython

我一直相信在 Python 解释器中`x.__class__`和的值`type(x)`是等价的。但是如果我们执行以下操作（在 Python 2.7、3.3 和 PyPy 2.0b1 中）：

```
>>> import weakref
>>> x = set()
>>> y = weakref.proxy(x)
>>> x.__class__, isinstance(x, set), type(x)
(<type 'set'>, True, <type 'set'>)
>>> y.__class__, isinstance(y, set), type(y)
(<type 'set'>, True, <type 'weakproxy'>) 
```

我们将看到它`y.__class__`对应于包装类型`weakref.proxy`（我想它`weakref.proxy`只是替换了伪装的属性）。甚至`isinstance`标识`y`为`set`.

但`type`显示“真实”类型 - `weakproxy`。所以，`type`不使用`__class__`属性来识别参数的类型，是吗？它是否为此目的使用了一些“更可靠”的来源？如果是这样，我们可以直接访问它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:54:57.113

`x.__class__`并且`type(x)`不等价。 `type(x)`植根于[typeobject.c](https://github.com/python/cpython/blob/master/Objects/typeobject.c#L2362)，并将返回真正的类型`ob_type`。

> /* 特殊情况：type(x) 应该返回 x->ob_type */

虽然`x.__class__`只是一个属性查找。它等效于`object.__getattribute__(x, '__class__')`，除非已重新定义属性查找。
`object`'s`'__class__'`是一个数据描述符，它也在[typeobject.c](https://github.com/python/cpython/blob/master/Objects/typeobject.c#L3998)中定义。它的[吸气剂](https://github.com/python/cpython/blob/master/Objects/typeobject.c#L3813)也返回`ob_type`。因此，在大多数情况下，`x.__class__`并`type(x)`返回相同的东西。

但是`weakproxy`，即`_PyWeakref_ProxyType`刻意定义自己[`proxy_getattr`](https://github.com/python/cpython/blob/master/Objects/weakrefobject.c#L684)。这就是为什么`y.__class__`与`type(y)`您的情况不同的原因。

在下面的实验中，我们可以达到同样的效果。

```
class A(object):
    pass

class C(object):
    def __getattribute__(self, name):
        if name == '__class__':
            return A
        return object.__getattribute__(self, name)

>>> c = C()
>>> c.__class__
<class '__main__.A'>
>>> type(c)
<class '__main__.C'> 
```

此外，`isinstance(c, A)`和`isinstance(c, C)`在这个例子中都是真的。因为`isinstance`会检查 first 的相等性`ob_type`。

# json - 杰克逊 JSON 多态性

> ID：15624950
> 
> 赞同：4
> 
> 时间：2013-03-25T21:18:04.317
> 
> 标签：json, jackson

我一直在尝试应用[http://programmerbruce.blogspot.com/2011/05/deserialize-json-with-jackson-into.html](http://programmerbruce.blogspot.com/2011/05/deserialize-json-with-jackson-into.html) )\ 上的内容，并将其应用于我一直在做的事情。虽然它适用于我将在 JSON 结构中称为“外部”元素的内容，但我遇到了一个令人沮丧的问题，即没有太多文档。

首先，我的代码有点像以下：

```
interface Parameters {
    // Couple random properties -- no problem here

    SubTypeParameters getSubTypeParameters(); // where SubTypeParameters are polymorphic
    void setSubTypeParameters(SubTypeParameters value);
}

@JsonSubTypes({
    @JsonSubTypes.Type(name = "a", value = ASubTypeParameters.class),
    @JsonSubTypes.Type(name = "b", value = BSubTypeParameters.class)
})
interface SubTypeParameters {
    String getValue();
    void setValue(String value);
}

@JsonTypeName(value = "a")
class ASubTypeParameters implements SubTypeParameters {
    // getter/setter implemented
}

@JsonTypeName(value = "b")
class BSubTypeParameters implements SubTypeParameters {
    // getter/setter implemented
} 
```

我要做的是在链接的博客文章中实现第 6 个选项，以便 JSON 将如下所示（注意没有指定“类型”元素——它基于上下文）：

```
{
    // other properties corresponding to the Parameters object
    "a": {
        "value": "value for a"
    }
} 
```

或者

```
{
    // other properties corresponding to the Parameters object
    "b": {
        "value": "value for b"
    }
} 
```

我试图避免的是在 JSON 对象中引入另一个“类型”变量。相反，我更愿意使用上述任一 JSON 示例中提供的上下文来了解我应该基于“a”或“b”的存在来构建 ASubTypeParameters 或 BSubTypeParameters 对象。

有趣的是，Parameters 类/对象也是多态的，所以我注册了它自己的自定义反序列化器类，如下所示：

```
ObjectMapper mapper = new ObjectMapper();
StdDeserializer<Parameters> parameterDeserializer = new ParameterDeserializer();
SimpleModule module = new SimpleModule ( ... ); // simplifying this--no problem here
module.addDeserializer(Parameters.class, parameterDeserializer);
mapper.registerModule(module);
mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false); 
```

但是，当上述反序列化器尝试反序列化上述任一 JSON 示例时，它将到达尝试反序列化“a”或“b”的部分，并指示它不知道如何处理这些属性（UnrecognizedPropretyException如果我删除了未知属性行上的失败）。我的问题真的归结为：我错过了什么（注释或其他）？

我也尝试添加：

```
mapper.registerSubtypes(ASubTypeParameters.class, BSubTypeParameters.class) 
```

也

```
mapper.registerSubtypes(
    new NamedType(ASubTypeParameters.class, "a"),
    new NamedType(BSubTypeParameters.class, "b")
); 
```

无济于事。

我知道我已经很接近了，我的猜测是我需要编写某种自定义子类型处理程序，但是文档似乎缺少我想做的事情（尤其是当你反序列化多态类型时/class 也包含一个多态元素）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-20T07:31:28.760

使用 Jackson，您可以使用以下注释配置将类型信息存储为单个字段的名称`@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.WRAPPER_OBJECT)`：结果应该类似于您的 JSON 示例。

我稍微修改了您的代码以进行演示：

```
public class JacksonPolymorphic2 {
    @JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.WRAPPER_OBJECT)
    @JsonSubTypes({
            @JsonSubTypes.Type(name = "a", value = ASubTypeParameters.class),
            @JsonSubTypes.Type(name = "b", value = BSubTypeParameters.class)
    })
    interface SubTypeParameters {
        String getValue();
        void setValue(String value);
    }

    @JsonTypeName(value = "a")
    static class ASubTypeParameters implements SubTypeParameters {
        ASubTypeParameters(String value) {
            this.value = value;
        }

        private String value;
        @Override
        public String getValue() {
            return value;
        }

        @Override
        public void setValue(String value) {
            this.value = value;
        }
    }

    @JsonTypeName(value = "b")
    static class BSubTypeParameters implements SubTypeParameters {
        BSubTypeParameters(String value) {
            this.value = value;
        }

        private String value;
        @Override
        public String getValue() {
            return value;
        }

        @Override
        public void setValue(String value) {
            this.value = value;
        }
    }

    public static void main(String[] args) throws JsonProcessingException {
        ASubTypeParameters a = new ASubTypeParameters("aType");
        BSubTypeParameters b = new BSubTypeParameters("bType");
        List<? super SubTypeParameters> list = new ArrayList<>();
        list.add(a);
        list.add(b);

        ObjectMapper mapper = new ObjectMapper();
        System.out.printf(mapper
                .writerWithType(new TypeReference<List<SubTypeParameters>>() {})
                .withDefaultPrettyPrinter()
                .writeValueAsString(list));
    }
} 
```

输出：

```
[ {
  "a" : {
    "value" : "aType"
  }
}, {
  "b" : {
    "value" : "bType"
  }
} ] 
```

# r - 读取因子的数据框（在 R 中）

> ID：15624956
> 
> 赞同：0
> 
> 时间：2013-03-25T21:18:18.083
> 
> 标签：r, dataframe, text-files, r-factor, bayesian-networks

我是 R 的新手。要在包中使用，我需要一个“因子数据框”。

我有一个形式的文本文件：

```
A B C ...
1 3 2
2 2 3
3 1 1
2 2 1
3 1 2 
```

所以每一列代表一个变量，可以是 1、2 或 3。请建议一个命令，允许我从这样的文本文件中获取因子的数据框（仅将文件作为矩阵读取是不行的，我需要有真正的“因素”）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:32:01.927

似乎将`colClasses`参数设置`read.table`为：

```
colClasses = c(rep("factor",26)) 
```

会做我需要的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T21:41:29.907

```
a <- read.table(textConnection("A B C
1 3 2
2 2 3
3 1 1
2 2 1
3 1 2"), header=T, colClasses="factor")

str(a)
## 'data.frame':    5 obs. of  3 variables:
##  $ A: Factor w/ 3 levels "1","2","3": 1 2 3 2 3
##  $ B: Factor w/ 3 levels "1","2","3": 3 2 1 2 1
##  $ C: Factor w/ 3 levels "1","2","3": 2 3 1 1 2 
```

# objective-c - 复制块 - 复制原始类型的捕获变量

> ID：15624960
> 
> 赞同：4
> 
> 时间：2013-03-25T21:18:29.560
> 
> 标签：objective-c, objective-c-blocks

我搜索了几个有关复制块的主题，但找不到我感兴趣的信息。

当我们定义一个块时，我们有机会从其封闭范围中捕获变量。由于块存储在堆栈中，并且变量由*value*捕获，所以这里一切都很清楚：

*   在原始类型的情况下，我们获取额外的变量（也在堆栈上本地化），例如一些*const int ，它具有与原始**int*变量相同的值
*   在指针的情况下，我们获取特定指针的副本 - 以便指向对象的引用计数增加 1。

现在，我不知道当我们将一个块从堆栈移动（复制）到堆时会发生什么。对于捕获的指针，它很简单——我们获取这些指针的副本。但是捕获的原始类型变量会发生什么？堆上的变量是动态分配的，所以我们只能用指针来引用它们。这意味着我们不能简单地将 eg *int*变量复制到堆中 - 我们可以动态分配一个*int*变量，将其分配给某个*int **指针，并通过该指针写入适当的值 - 与原始*int相同*多变的。但是为此，我们需要一些额外的机制，它在幕后工作。此外，当我们在块中捕获一些变量时，块“准备”自己以特定方式对特定大小的变量进行操作 - 如果我们将原始类型的变量更改为指针，它通常会有不同的大小并且它需要不同的处理方式...

那么有人可以告诉我，它是如何深入工作的？还是我在某些时候完全错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T22:00:20.923

您可以在[Block Implementation Specification](http://clang.llvm.org/docs/Block-ABI-Apple.html)中找到详细信息。

用一个例子来解释是最容易的。考虑这个包含一个简单块的简单函数：

```
void outerFunction() {
    int x = 7;
    dispatch_block_t block = ^{
        printf("%d\n", x);
    };
    dispatch_sync(dispatch_get_main_queue(), block);
} 
```

请记住，这`dispatch_block_t`是`void (^)(void)`.

要编译该代码，编译器将首先创建两个结构定义：

```
struct Block_descriptor_1 {
    unsigned long reserved;
    unsigned long size;
    const char *signature;
};

struct Block_literal_1 {
    void *isa;
    int flags;
    int reserved;
    void (*invoke)(void *);
    struct Block_descriptor_1 *descriptor;
    int x;
}; 
```

然后它创建一个 type 的全局变量`Block_descriptor_1`，其中包含块的类型签名的大小`Block_literal_1`和编码：

```
struct Block_descriptor_1 block_descriptor_1 = {
    .size = sizeof(struct Block_literal_1),
    .signature = "v4@?0"
}; 
```

它创建了一个包含块体的函数：

```
void outerFunction_block_invoke(void *voidLiteral) {
    struct Block_literal_1 *literal = (struct Block_literal_1 *)voidLiteral;
    printf("%d\n", literal->x);
} 
```

请注意，块的主体已被重写，因此从封闭范围对变量`x`的访问现在是对块文字成员的访问。

最后，编译器重写原始函数以在堆栈上创建一个块文字并使用该块文字的地址而不是块：

```
void outerFunction2() {
    int x = 7;
    struct Block_literal_1 block_literal_1 = {
        .isa = __NSConcreteStackBlock,
        .flags  = BLOCK_HAS_SIGNATURE,
        .invoke = outerFunction_block_invoke,
        .descriptor = &block_descriptor_1,
        .x = x
    };
    dispatch_sync(dispatch_get_main_queue(),
        (__bridge dispatch_block_t)&block_literal_1);
} 
```

请注意，块文字以指向特殊 Objective-C 的指针开头`Class`。这允许将块文字视为一个 Objective-C 对象。

如果将`__block`属性添加到局部变量`x`，它会变得更加复杂。在这种情况下，编译器必须创建另一个结构来保存该变量以及有关变量的信息（例如，如果变量是指向对象的指针，如何保留和释放它）。这一切都在我在此答案顶部链接的规范中进行了解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T21:33:04.227

我不确定你在问什么，但也许对块实际工作方式的简单解释会澄清事情。

块实际上是匿名类的实例。该类对每个捕获的变量都有一个 ivar。当块实例化时，所有捕获的变量都被复制到块上各自的 ivars 中，此时存储在堆栈中。

当块被复制到堆中时，它会在堆上创建一个新的块对象，并将堆栈块中的所有 ivars 复制到堆块中（此时它还保留任何捕获的 obj-c 对象）。指向原始值的指针和诸如此类的东西没有混淆；堆上只有一个 malloc'd 区域包含所有捕获的值，就像任何其他 obj-c 对象一样。

同时，块中的实际代码通过使用 的等价物简单地访问捕获的变量，`implicit_block_pointer->backing_ivar`与对象上的方法访问对象的 ivars 的方式完全相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T21:55:05.207

你正在做的是缺少一个级别的指针，只要你学会使用 Algol-68 编程......（`ref loc`有人吗？）

*[以下内容有所简化，以呈现正在发生的事情的要点。]*

当你声明一个变量时，说：

```
int x; 
```

您正在指示编译器找到一个能够存储 an 表示的位置，并将`int`该位置用于您使用 name 引用的值`x`。

跳过“查找”位，编译器构造一个内部表，即*符号表*，它将名称`x`在这里映射到位置 - 并且位置表示为绝对地址（也称为指针）或从*某物*的偏移量，例如像“堆栈上的第 7 个位置”。*有些东西*有时存储在计算机内部的一个特殊命名位置，称为寄存器*，*例如，有一个寄存器存储堆栈指针，因此存储为堆栈指针偏移量的变量位于该寄存器中存储的值的偏移量。

使用该表，编译器看到的`x`可以确定`x`存储 ' 值表示的地址。

在机器指令级别读取或写入变量涉及使用获取地址的指令。因此，当您深入了解实际的机器代码时，所有变量都通过指针引用。

现在到你的块案例。当您捕获我们的示例`x`整数变量时，编译器会在描述该块的结构中为其分配一个位置。在符号表中，它为它创建一个条目`x`并将其映射为类似于“*块变量区域*中的第 6 个位置”。*块变量区*的位置被安排在一个特定的位置，可能是一个寄存器，就像上面的堆栈指针一样，然后机器指令`x`从该位置找到值作为偏移量。

当块基于堆栈时，块变量区域将在堆栈中，当它基于堆时，它将在堆中，但由于它的位置在块执行之前存储在寄存器中，因此块的代码永远不会需要更改 -`x`相对于块变量区域始终处于相同的偏移量。

希望所有这些都是有道理的！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T21:59:56.360

“在幕后工作”的附加机制只是 C 结构成员访问。无论是在堆堆栈上，块都是结构，每个捕获的变量都有成员（它们实际上也是 Objective-C 对象）。执行块时，会调用一个函数，该函数将指向块的指针作为参数。此函数访问捕获的变量，如`blockPointer->capturedVar1`. `blockPointer`此时指向哪里并不重要——重要的是在某个结构中为捕获的变量分配了空间。

您可能会发现这很有启发性：[http ://clang.llvm.org/docs/Block-ABI-Apple.html](http://clang.llvm.org/docs/Block-ABI-Apple.html)

# c - C如何将双精度存储到浮点类型的分配数组中？

> ID：15624963
> 
> 赞同：0
> 
> 时间：2013-03-25T21:18:35.837
> 
> 标签：c, floating-point, precision, double-precision

我正在将我的程序从浮点精度更改为双精度。尽管如此，我还是通过从二进制文件中读取**浮点数来启动这个例程。**

```
bufz = alloc1float(nz);
for (i=0; i<nx; i++) {
    nu = efread(bufz,sizeof(float),nz,vel); 
    for (k=0; k<nz; k++)
        vn2[k][i] = bufz[k];
} 
```

我继续进行**双精度**计算并将计算值写入文件：

```
matlabfile=fopen("matlabfile","a+");
fprintf(matlabfile,"%d;%15.7e;%15.7e\n",l,amxs,amxr);
fclose(matlabfile); 
```

（amxs 和 amxr 的大小是 double，l 是 int，matlabfile 是文件指针）

**我的问题：当算术以双精度完成时， C**如何处理浮点类型的输入参数，以及它如何在输出中舍入结果？是这么简单，还是我错过了什么？

**编辑：** 文件*vel，*matlabfile；

```
 int main(int argc, char *argv[])
 {

 int i, nx, nz, k, nu, l;
 double amxs, amxr;
 double *buf;
 double **vn2;

 vn2    = alloc2double(nx,nz);
 buf = alloc1float(nz);

   /* read input binary file */
   for (i=0; i<nx; i++) {
    nu = efread(buf,sizeof(float),nz,vel); 
    for (k=0; k<nz; k++) vn2[k][i] = bufz[k];
   }

 Arithmetics with double precision arrays, variables and vn2...

// save output
matlabfile=fopen("matlabfile","a+");
fprintf(matlabfile,"%d;%15.7e;%15.7e\n",l,amxs,amxr);
fclose(matlabfile); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:43:54.043

它没有。它（隐式）将 a 转换`double`为 a`float`并且您会失去精度。它基本上切断了最低有效位。

对不起，没有具体的例子，但`9.223372036854775808`会变成`9.223372037`.

当您将您的文件加载`floats`到`doubles`. 它将它们转换为不同的格式。**编辑**...效果很好。

# php - 将数据添加到另一个文件中的 PHP 数组

> ID：15624964
> 
> 赞同：0
> 
> 时间：2013-03-25T21:18:39.687
> 
> 标签：php, multidimensional-array

我设置的是一个主页（输出基于`require_once()`带有 PHP 数组的 PHP 文件的表）和管理页面（应该将数据写入上述 PHP 数组文件），以及带有数组的 PHP 文件. 管理页面是问题所在。我已经尝试了不同的解决方案`fread`和 txt 文件，这些文件很快就变得一团糟。

我不擅长 PHP。如何从我的管理页面编辑这个数组？

代码：

主页

```
<?php
    require_once("sitesdb.php");
?>
<html>
<body style="text-align:center">
<div style="width:500px;background-color:ddd;padding:10px">
   <table width="100%">
     <tr bgcolor="gray">
       <td>Domain Host</td>
       <td>Prefix</td>
       <td>Suffix</td>
     </tr>
     <? foreach ($sites as $row) : ?>
     <tr bgcolor="white">
       <td><? echo $row[0]; ?></td>
       <td><? echo $row[1]; ?></td>
       <td><? echo $row[2]; ?></td>
     </tr>
     <? endforeach; ?>
   </table>
</div>
</body>
</html> 
```

数组文件

```
<?php
$sites = array(
    array("POPNIC.COM",     "uk",    "pn"),
    array("POPNIC.COM",     "co.uk", "pn"),
    ...
    array("SUBDOMAIN.COM",  "aa6",   "de"),
    array("SUBDOMAIN.COM",  "aa8",   "de"),
);
?> 
```

管理页面

```
<?php
if (!isset($_SERVER['PHP_AUTH_USER'])) {
    header('WWW-Authenticate: Basic realm="Administration"');
    header('HTTP/1.0 401 Unauthorized');
    echo '404 - Unauthorized!  Sorry about that.';
    exit;
} else {
if ($_SERVER['PHP_AUTH_USER'] = "*****" && $_SERVER['PHP_AUTH_PW'] = "*****"){

if ($_POST['host'] && $_POST['prefix'] && $_POST['suffix']){

    ??????????????

}
?>
<html>
<head>
    <title>Administration</title>
</head>
<body>
    <h1>Administration</h1>
    <h2>Add a Value</h2>
    <form method="post" action="">
        <label for="host">Domain Host: </label><br />
        <input name="host" id="host" type="text" /><br />
        <label for="prefix">Prefix: </label><br />
        <input name="prefix" id="prefix" type="text" /><br />
        <label for="suffix">Suffix: </label><br />
        <input name="suffix" id="suffix" type="text" /><br />
        <input type="submit" value="Add Value" /><br />
    </form>
</body>
<?php
}
}
?> 
```

**更新**

我想我已经差不多了。这是我的新代码：

```
if ($_POST['host'] && $_POST['prefix'] && $_POST['suffix']){
    $ins_host = $_POST['host'];
    $ins_prefix = $_POST['prefix'];
    $ins_suffix = $_POST['suffix'];

    include_once("sitesdb.php");
    array_push($sites, array($ins_host, $ins_prefix, $ins_suffix));

    $file = fopen("sitesdb.php", "w");
    $newdata = "<?php " . var_export($sites) . "?>";
    fwrite($file, $newdata);
    fclose($file);
} 
```

它没有正确写入数据。每次我改变一些东西都会出错。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:27:33.147

假设您想从管理页面收集数据并将其作为数组写入 sitesdb.php，请检查[var-export 函数](http://php.net/manual/de/function.var-export.php)。

在您的管理脚本中，您检查您的表单是否使用

```
if($_SERVER['REQUEST_METHOD'] == 'POST') {
   // your logic to read the posted data and save it to a file
   // goes here
} 
```

我在网上找了一个简单的，不过时的，不笨的教程，不是那么容易找到的。大多数人现在使用 Laravel、Symfony2、Silex 或 Slim 等框架（例如，为了避免安全问题）。最终你会发现[这个](http://boxmodeljunkie.com/create-a-simple-php-contact-form/)很有帮助。

更新：注意 var_export 的附加参数，它将以变量的形式返回结果，而不是打印出来

更新 2：我不想让您感到沮丧，但这种方法确实不安全。想象一下有人在您的表单中编写邪恶的 php 内容。您将其写入sitesdb.php 文件并在您下次读取sitesdb.php 时执行它。最好看一下 ini 文件（parse_ini_file 是在 PHP 中读取 ini 文件的命令）。

# forms - 在 ExtJS 4 中加载和保存嵌套数据

> ID：15624966
> 
> 赞同：3
> 
> 时间：2013-03-25T21:18:49.787
> 
> 标签：forms, extjs4, save, associations

我有两个模型：Book belongsTo Author。让我们调查一下作者数据与书籍数据一起从服务器到 ExtJs 并返回的过程。服务器向 ExtJs 发送以下嵌套数据：

```
{
  success : true,
  data: {
    id: '23',
    name: 'JavaScript - The definitive guide'
    author: {                                  // <<-- nested author data
        id: '45',
        name: 'David Flanagan',
    }
  }
} 
```

在 ExtJs 方面，数据由以下模型处理：

```
Ext.define('My.models.Book', {
    extend: 'Ext.data.Model',
    idProperty: 'id',

    fields: [
        'id',, 
        'name',
        {name: 'author_id', mapping: 'Author.id'}, // <<-- flat author data
    ],

    proxy: {
        type: 'ajax',
        api: {
            read: 'My/Books/index',
            create: 'My/Books/create',
            update: 'My/Books/update',
            destroy: 'My/Books/delete'
        },
        reader: {
            type: 'json',
            root: 'data',
        },
        writer: {
            type: 'json',
            root: 'data',
        },
    },

    associatinons: [{
        type: 'belongsTo', 
        model: 'My.models.Author', 
        associationKey: 'Author', 
    }]    
}); 
```

由于模型（ ）字段上的`Author.id`映射，我能够将作者的数据加载到旨在编辑书籍数据的以下表单：`author_id``Book``{name: 'author_id', mapping: 'Author.id'}`

```
Ext.define('My.views.books.Form', {
    extend: 'Ext.form.Panel',
    initComponent: function () {
        var me = this;
        me.items = [{
            xtype: 'container',
            layout:'anchor',
            defaults:{
                anchor: '95%'
            },
            items:[{
                xtype: 'textfield',
                fieldLabel: 'Book title',
                name: 'name'
            },{
                xtype: 'combo',
                fieldLabel: 'Author',
                name: 'author_id',            // <<-- flat author data
                store: ...
            }]
        }];    
        me.buttons = [{
            text: 'Save',
            scope: me,
            handler: me.onSave
        }];
        me.callParent(arguments);
    },
    ...
}); 
```

当然有一个专用于作者的模型，但是当我需要一次将书籍和作者数据加载到一个表单中时，我（暂时）看不到上面显示的其他可能性（当然请给我看，如果有更好的解决方案）。

**现在问题来了：**我将从组合中选择其他作者并保存表单。随着书籍记录变脏（`author_id`现在显示为`Book`模型字段），将提出对`'My/Books/update'`URL 的请求（这很好，我正在编辑书籍），并将以下数据发送到服务器：

```
{
  data: {
    id: '23',
    name: 'JavaScript - The definitive guide',
    author_id: '78'              // <<-- flat author data
  }
} 
```

返回服务器的数据与发送到 ExtJs 的结构不同，必须进行某种翻译，例如：

```
$data['Author']['id'] = @$data['author_id'];
unset($data['author_id']); 
```

我在问：**是否可以通过 ExtJs 形式处理数据，使它们以与来自服务器相同的结构返回服务器？如何？**

*这个问题已经在[这里](https://stackoverflow.com/questions/14634577/save-nested-form-data-back-to-server-in-extjs)、[这里](https://stackoverflow.com/questions/8601671/extjs-4-associations-and-store-save)和[这里](https://stackoverflow.com/questions/13828092/extjs-4-load-nested-data-on-record-save)以某种方式讨论过，但这些讨论都没有明确回答。*

提前感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:51:17.687

简短的回答：不，还没有。

更长的答案：您可以创建自己的编写器来处理您的数据结构并将其发送回服务器，就像您收到它一样。

您可以通过子类化创建自己的作家：[http](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.writer.Writer) ://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.writer.Writer并在您的代理中使用它

或者

您可以在模型上创建一个更改其结构的函数。由于您不使用商店，您可以创建一个函数 saveModel() 来更改模型结构并调用 save() 方法。

# ruby-on-rails - 在表单中使用来自关联模型的数据

> ID：15624968
> 
> 赞同：1
> 
> 时间：2013-03-25T21:18:53.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, associations, models

我有两个模型，夹具和预测。夹具有很多预测。

我想让用户填写表格来预测分数。夹具模型预先填充了所有夹具，所以我想在预测表格中使用它们，这样我就可以只创建一个新的预测记录

我如何从另一个模型中获取数据并在表单中使用它。我的夹具模型有

```
:home_team
:away_team
:fixture_date 
```

所以以我想要的形式

```
Home_team VS Away Team    Enter Home Score   Enter Away Score 
```

为此，我想知道的是如何从夹具模型中访问数据并以表格形式呈现

我会在这里使用 collection_select 吗？虽然我需要单独列出每个灯具，所以我猜这行不通？

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:23:04.317

我不确定我是否完全跟随你，但这可能会有所帮助。

`collection_select`你提到的工作是这样的：

```
collection_select "model_from_where_you_get_data", "id_of_collection", "SQL_query", "value_of_the_field", "names_of_the_fields_which_are_displayed_to_user", "options{}" (no quotes) 
```

所以，例如：

```
collection_select :fixtures, :home_team, Fixture.select(:home_team).uniq, :home_team, :home_team, prompt: true 
```

您可以通过使用来简化这一点`fields_for`（顺便说一句，如果您需要将一些数据保存到该关联中，您可以使用它来通过关联访问数据或添加字段）

```
<%= form_for @prediction do |f| %>
  <%= f.fields_for :fixture do |ff| %>
     <%= ff.collection_select :home_team, Fixture.select(:home_team).uniq, :home_team, :home_team, prompt: true %>
  <% end %>
<% end %> 
```

我可能把复数弄乱了，但如果这是你想要的，那应该不是问题。

# actionscript-3 - AS3 使用静态类型类问题调用可能未定义的方法

> ID：15624972
> 
> 赞同：2
> 
> 时间：2013-03-25T21:19:19.227
> 
> 标签：actionscript-3, flash, oop, class

通过静态类型类的引用接收错误调用可能未定义的方法 getStartButton 这也发生在 getQuitButton

由于我是 OOP 新手，所以我仍然不知道如何利用类。有人可以帮我理解我做错了什么吗？

这是我的主类中的函数：

```
function getStartMenu():void {
    var bFormat:TextFormat, bStart:Sprite, bQuit:Sprite;

    bStart = StartMenu.getStartButton();
    bQuit = StartMenu.getQuitButton();

    bStart.addEventListener(MouseEvent.CLICK, bStartPress);
    bQuit.addEventListener(MouseEvent.CLICK, bQuitPress);
} 
```

在我的外部类文件 StartMenu.as

```
package
{
    import flash.display.*;
    import flash.text.TextField;
    import flash.text.TextFormat;

    public class StartMenu extends Sprite
    {

        public function StartMenu():void
        {

        }

        public function getStartButton():Sprite {
            var bFormat:TextFormat, bStart:Sprite, bStartText:TextField;
            bFormat = getFormat();
            bStart = getMenuButton(uint("0X00FF00"));
            bStart.x = stage.stageWidth / 2 - bStart.width - 100;
            bStart.y = stage.stageHeight - bStart.height - 100;
            bStartText = getTextButton(bFormat, "Start");
            bStartText.defaultTextFormat = bFormat;
            return bStart;
        }

        public function getQuitButton():Sprite {
            var bFormat:TextFormat, bQuit:Sprite, bQuitText:TextField
            bFormat = getFormat();
            bQuit = getMenuButton(uint("0X0000FF"));
            bQuit.x = stage.stageWidth / 2 + 100;
            bQuit.y = stage.stageHeight - bQuit.height - 100;
            bQuitText = getTextButton(bFormat, "Quit");
            bQuitText.defaultTextFormat = bFormat;
            return bQuit;
        }

        public function getFormat():TextFormat {
            var bFormat:TextFormat = new TextFormat()
            bFormat.font = "Arial";
            bFormat.bold = true;
            bFormat.color = 0x000000;
            bFormat.size = 28;
            bFormat.align = "center";
            return bFormat;
        }

        public function getMenuButton(bColor:uint):Sprite {
            var bButton:Sprite = new Sprite();
            bButton.graphics.beginFill(bColor, 1);
            bButton.graphics.drawRect(0, 0, 100, 50);
            bButton.graphics.endFill();
            bButton.buttonMode = true;
            bButton.mouseChildren = false;
            return bButton
        }

        public function getTextButton(bFormat:TextFormat, sText:String):TextField {
            var bText:TextField = new TextField()
            bText.defaultTextFormat = bFormat
            bText.text = sText;
            bText.x = -4;
            bText.y = 4;
            return bText;
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T21:40:47.833

`StartMenu.getStartButton();`是您如何调用静态方法，因为`getStartButton`不是静态的，您会收到此错误。

您可以`getStartButton`通过将其更改为：

```
public static function getStartButton():Sprite 
```

或者你可以创建一个`StartMenu`类的实例并调用它的实例方法。

```
var startMenu:StartMenu = new StartMenu();
var bStart:Sprite = startMenu.getStartButton(); 
```

# macos - 通过 curl 访问谷歌云存储获取签名错误

> ID：15624973
> 
> 赞同：2
> 
> 时间：2013-03-25T21:19:20.900
> 
> 标签：macos, curl, terminal, google-cloud-storage

我正在尝试通过带有 curl 的 api 访问我的谷歌云存储。这是我在 reminal (osx) 中所做的事情：

```
ACCESS_KEY="my key here"
SECRET_KEY="my secret here"
VERB=GET
CHECKSUM=""
CONTENT_TYPE=""
URI=""
DATE="$(date)"
stringtosign="$VERB\n$CHECKSUM\n$CONTENT_TYPE\n$DATE\n${URI}"
echo $stringtosign
AUTHORIZATION="GOOG1 $ACCESS_KEY:$(echo -ne "$stringtosign" | openssl dgst -sha1 -hmac "$SECRET_KEY" -binary | openssl base64)"
echo $AUTHORIZATION

curl -X $VERB http://commondatastorage.googleapis.com$URI -i -v -H Content-Length:0 -H "Authorization:$AUTHORIZATION" -H "Date:$DATE" 
```

我得到 SignatureDoesNotMatch ，我们计算的请求签名与您提供的签名不匹配。检查您的 Google 密钥和签名方法。

一整天我尝试了许多其他变化，但我仍然遇到同样的问题。我仔细检查了访问密钥，但我不知道该去哪里找。

请帮忙 ：（

# css - 更正整个应用程序的旧路径

> ID：15624975
> 
> 赞同：2
> 
> 时间：2013-03-25T21:19:29.383
> 
> 标签：css, ruby-on-rails, regex, asset-pipeline, replace

我刚刚将一个过时的应用程序更新到管道中，我 90% 的 css 路径都被冲洗掉了。旧路径是：**/images/scrollers/upcoming_left.png**新路径是**/assets/scrollers/upcoming_left.png**

简单地说，第一个 /images 需要成为整个应用程序的 /assets。

我正在考虑在整个样式表目录中进行查找和替换以获取 /images 并将其更改为 /assets 。

问题是，我只想替换以 /images 开头的路径，而不是像[http://foobar.com/images](http://foobar.com/images)或 /assets/images/foobar.png 这样的路径。

我缺乏正则表达式技能，但我很确定有一个干燥器解决方案。我正在运行 rails 3.2，ruby 1.9.3，带有 sublime text 2 ...任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:39:30.407

你不能做个罚款然后换上`("/images`吗？我猜你所有的css路径都是这样的`url("/images/....")`

# php - 将带有动态索引的简单数组插入到 Php-Mysql

> ID：15624976
> 
> 赞同：0
> 
> 时间：2013-03-25T21:19:30.077
> 
> 标签：php, mysql, arrays, for-loop

你如何在我的 BD Mysql 中存储这个数组：

```
Array ( [3] => 23 [9] => 54 ) 
```

Bd表的结构是：

```
ID_PROD |  QUANT
----------------------
3          23     
9          54 
```

我尝试使用此代码，但没有结果，我的问题是数组的索引

```
$arr1 = $_GET['sols']; 

$sql = array(); 
foreach( $arr1 as $row ) {
$sql[] =   '('.$row['???????'].','.$row['??????????'].')';
}
mysql_query('INSERT INTO sales (ID_PROD,QUANT) VALUES '.implode(',', $sql)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:21:21.567

您需要使用数组中的数据实际填充您的查询。

```
$arr1 = $_GET['sols']; 

$sql = array(); 
foreach( $arr1 as $key => $row ) {
$sql[] =   '(' . $key . ',' . $row.')';
}
mysql_query('INSERT INTO sales (ID_PROD,QUANT) VALUES '.implode(',', $sql)); 
```

另外，请修改您的代码以不使用`mysql_query`. 使用更好的 PDO 或 mysqli 框架（或类似的东西）。

# java - Java 的当前 OpenCL 实现是否提供跨平台支持以及在项目中使用的稳定性？

> ID：15624978
> 
> 赞同：2
> 
> 时间：2013-03-25T21:19:31.080
> 
> 标签：java, algorithm, image-processing, real-time, opencl

**背景：** 我们学校参加了一场比赛，我的团队（包括我在内3人）被分配了做导航和图像处理的任务。这是一个为期一年的项目，但我想尽快开始，看看我有什么选择。大学和其他公司也在为这项研究提供资金。我不是计算机科学专业的，我们正在构建一个高度依赖于导航和图像处理的工程应用程序，以作为高强度计算的基础。

**问：** 我知道我们将需要算法和智能数据结构选择来减少进程并将工作拆分为线程以利用设备的力量。无论如何，我已经阅读了很多关于我发现的 Java OpenCL 实现的内容，即 LWJGL、JOCL、JavaCL。问题是，他们都做同样的事情，但有些人以自己独特的方式做得更好。我正在寻找具有相当数量的社区和跨平台支持的简单的东西。因为，我们将购买的微控制器最有可能运行 Linux（我在想 Arduino 和 SMARTGPU）。

无论如何，这还很早，所以我需要一些关于从这里去哪里的指示。我可能还需要查找一些指南、教程和手册，以了解更多关于 OpenCL 的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:04:36.510

我已经使用 JavaCL 将近一年了，发现它易于使用且可靠。我发现的一个错误在 24 小时内得到了修复（诚然，这是一个非常简单的错误）。我确实尝试过使用 JOCL，但发现与 JavaCL 相比，它们的 API 有点难以使用。我没有使用 LWJGL 的经验，但会指出 LWJGL 更通用，因为它适用于游戏。

如果您决定使用 Java，那么我建议您从 JavaCL 开始。

但是，我建议您考虑使用 OpenCV，因为它提供了许多已经过大量优化的图像处理功能。它可能不如使用 OpenCL 和花哨的嵌入式 GPU 快，但它可以缩短您的开发时间。

# ruby - RVM 安装给出错误 Unrecognized option: --autolibs=3 on OSX Lion

> ID：15624981
> 
> 赞同：1
> 
> 时间：2013-03-25T21:19:47.897
> 
> 标签：ruby, osx-lion, rvm

我有一台带有 Lion 的新 MacBook Pro，我正在尝试运行：

```
\curl -#L https://get.rvm.io | bash -s stable --autolibs=3 --ruby 
```

根据[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

该命令给了我：

```
Unrecognized option: --autolibs=3 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:19:52.150

我注意到在 rvm 站点的主页上，我看到有一个不同的安装脚本。

```
\curl -L https://get.rvm.io | bash -s stable --rails --autolibs=enabled 
```

安装没有问题。

看起来安装页面刚刚过时。

# asynchronous - 异步插件执行顺序

> ID：15624987
> 
> 赞同：3
> 
> 时间：2013-03-25T21:20:21.503
> 
> 标签：asynchronous, dynamics-crm-2011, crm

如果我对同一条记录进行了 3 次修改，并且我有一个异步插件正在监听更新消息，那么更新是否会被排序？

我希望更新是有序的，即使是异步执行的（正确排队以供以后执行）。如果是这种情况，我希望创建和删除消息也是如此。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T22:24:05.087

对于异步插件，执行顺序不能保证，如果你想让插件按照队列执行，你需要使用*DependencyToken*属性。

你可以在这里找到一篇文章：

[异步操作中的依赖和执行顺序](http://technet.microsoft.com/en-us/library/gg327994.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T00:56:24.847

除了@GuidosPreite，我可以说在我之前运行的测试中，插件**将**按照您期望的顺序执行。

然而，正如他所说，不要把你的房子押在上面。如果你不走运，早期线程的执行**可能**会比早期线程延迟更多。并提供墨菲定律，**它会**。

此外，不同的汇总、服务器、星期几等的行为可能会有所不同。简而言之：是但不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-15T19:54:21.683

下图显示了插件和工作流的执行顺序如何工作。 [执行顺序的重要性](https://i.stack.imgur.com/gCdeG.jpg)

**结论：** 通常工作流的默​​认执行顺序值为“0”，用户无法定义该值。如果用户在插件步骤中将执行顺序设置为“1”，则将在插件之前触发实时工作流。

如果用户需要在实时工作流之前执行插件，则用户必须在插件步骤中将执行顺序更改为“0”。

# mono - iOS 中的 ExpandableListView

> ID：15624989
> 
> 赞同：1
> 
> 时间：2013-03-25T21:20:23.380
> 
> 标签：mono, xamarin.ios, xamarin.android, monodevelop, expandablelistview

我试图让我的大脑了解在多平台应用程序中我能做什么和不能合理地做 UI 方面的事情。最初我们只关心 iOS 和 Android，但最终可能需要移动 Windows 版本。

具体问题是：如何在 iOS 中复制 Android ExpandableListView 功能？我已经尝试了一些搜索，但没有找到提示。我需要的关键是可折叠部分。这对 iOS 列表视图可行吗？如果是这样，你有/知道一个例子吗？

相关的非特定问题是：对于刚开始开发 multimobilemono 的人，您有什么建议？我一直在阅读 Greg Shackles 的优秀书籍“C# 中的移动开发”（这对我很有帮助！），所以我有一些基础知识。但我敢肯定，当你进入更复杂的 UI 设计时，会有一些隐藏的地雷。任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:21:08.183

您可以使用 UITableView，只需更改单元格的大小即可根据需要显示更多内容。

让我们讨论 DialogViewController（MonoTouch.Dialog 的一部分），它简化了 UITableView 的设置。

您可以做的是创建一个包含内容和扩展内容的 UIView。它将是具有某些属性的控制器，例如：

```
 bool expanded;
  public bool Expanded { get { return expanded; }}
       set { 
          if (expanded == value)
               return;
          Frame = ComputeSize (value);
          expanded = value;
       }
  } 
```

然后，创建一个 UIViewElement：

```
new RootElement ("My Root") {
    new Section () {
        new UIViewElement (new MyView ());
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-22T02:41:20.670

对于您的第一个问题，也许您可​​以尝试： [https ://github.com/OliverLetterer/SLExpandableTableView](https://github.com/OliverLetterer/SLExpandableTableView)

# android - Android OS 内置菜单快速切换器

> ID：15624993
> 
> 赞同：1
> 
> 时间：2013-03-25T21:20:39.240
> 
> 标签：android, menu

因此，如果您在 Android 内置菜单中进行缩放手势，则会出现此（请参阅下面的链接）功能。我试图在谷歌搜索这个，但我什至不知道我应该输入什么关键字......

我的应用程序中有一个不错的 viewpager 菜单，其中包含很多页面。如何为我的 viewpager 菜单实现这样的“快速切换”？

在 Android SDK 中是否有此功能，或者我必须为自己手动编写代码（手势、动画、片段等）？

[http://imageshack.us/photo/my-images/708/screenshot2013032521590.png](http://imageshack.us/photo/my-images/708/screenshot2013032521590.png)

# c# - BitmapImage.ImageOpened 未触发

> ID：15624995
> 
> 赞同：4
> 
> 时间：2013-03-25T21:20:46.413
> 
> 标签：c#, windows-phone-7, windows-phone-8, bitmapimage

我正在尝试下载图像并在完成时触发事件。我用这个：

```
BitmapImage btest = new BitmapImage(new Uri("http://www.google.com/images/srpr/logo4w.png"));
btest.ImageOpened += btest_ImageOpened;

void btest_ImageOpened(object sender, RoutedEventArgs e)
{
    throw new NotImplementedException();
} 
```

但是，该`ImageOpened`事件不会触发。如果我将图像控件的源设置为`BitmapImage`使用：

```
image.Source = btest; 
```

它确实火。`ImageOpened`除非将`BitmapImage`发件人设置为图像的源，否则为什么事件不会触发？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T22:16:02.520

我自己想通了。默认情况下，除非需要，否则不会初始化 BitmapImage。BitmapImage 的默认`CreateOptions`值为`BitmapCreateOptions.DelayCreation`. 解决此问题所需要做的就是设置`CreateOptions`为`BitmapCreateOptions.None`.

我的工作代码是：

```
BitmapImage btest = new BitmapImage(new Uri("http://www.google.com/images/srpr/logo4w.png"));
btest.CreateOptions = BitmapCreateOptions.None;
btest.ImageOpened += btest_ImageOpened;

void btest_ImageOpened(object sender, RoutedEventArgs e)
{
    throw new NotImplementedException();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:27:25.653

（我将根据我们的讨论发布这个 - 因为它帮助 OP 找到了正确的解决方案）

> 我猜-它从未使用过-因此它永远不会加载或打开-只是一个想法，但我认为是有道理的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-03T09:34:58.123

我的两分钱，也许它可以帮助其他人......在页面上放置一个图像控件并在 xaml 中连接任何事件和源都可以正常工作，并且事件会触发。但是，当我在代码中加载位图图像并设置图像控件的源时，尽管图像加载正常，但图像控件的事件不会触发。我尝试了上述所有位图选项，但似乎都没有奏效。我最终处理了位图图像的 ImageOpened 事件，而不是触发事件的图像控件的 ImageOpened 事件。请注意，尽管在此阶段图像控件尚未完全加载图像，因此您必须参考位图图像以获取详细信息，而不是图像控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-29T16:07:45.387

在我的 Windows phone 8.0 silverlight 应用程序中，当我将创建选项设置为 `BitmapCreateOptions.BackgroundCreation`.

设置为时我不明白

`BitmapCreateOptions.DelayCreation`（这是默认设置）

或者`BitmapCreateOptions.None`

# google-app-engine - 使用祖先的 GAE JPA 查询

> ID：15624996
> 
> 赞同：2
> 
> 时间：2013-03-25T21:20:53.637
> 
> 标签：google-app-engine, jpa, ancestor

我试图弄清楚在 GAE 上使用祖先进行 jpa 查询的正确方法是什么。

有两个类：书和出版商；图书有一个出版商，但出版商有多本书。

这是没有祖先的：

```
Query query = mgr.createQuery("select from Book as Book"); 
execute = (List<Book>) query.getResultList(); 
```

如何以发布者作为查询的祖先进行正确的查询？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:25:16.210

您首先必须获得发布者的密钥。您可以使用基于键的查询，或者如果您有发布者的 ID，您可以这样做：

```
Key key = KeyFactory.createKey(Publisher.class.getSimpleName(), publisherId); 
```

获得密钥后，您可以执行以下操作：

```
query.setAncestor(key); 
```

编辑：我没有意识到这是在 JDO 中做到这一点的方法。在JPA中不确定，但我认为它很相似......