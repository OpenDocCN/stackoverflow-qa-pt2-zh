# StackOverflow 问答 13609000-13609999

# c# - HttpWebResponse

> ID：13609001
> 
> 赞同：8
> 
> 时间：2012-11-28T15:48:36.397
> 
> 标签：c#, asp.net, httpwebresponse

我想从服务器下载图像。当图像不存在时，我想显示我的默认图像。

这是我的代码：

```
string url = "http://www......d_common_conference" + "/" + c.id_common_conference + "-MDC.jpg";

try {
    HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
    request.Method = "HEAD";                        
    HttpWebResponse response = request.GetResponse() as HttpWebResponse;
    string status = Response.StatusCode.ToString();                                               

    img.ImageUrl = url;
}
catch (Exception excep) {
    img.ImageUrl = "images/silhouete.jpg";
    string msg = excep.Message;
} 
```

它工作得很好，但直到第 24 个循环，没有响应，没有抛出异常，我的程序变得卡住了。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:14:05.310

您没有处理 HttpWebResponse，请尝试以下操作：

```
HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
request.Method = "HEAD";
string status;
using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
{
    status = response.StatusCode.ToString();
} 
```

我怀疑你已经达到了你的机器将建立的 TCP 连接的限制（不记得这个数字，但如果内存服务，它是每个 CPU 的）

ps 在您的示例中有一个错字，您没有使用`response`WebRequest 中的变量，而是`Response`当前请求的对象。

# templates - 如何获取模板参数的数量

> ID：13609003
> 
> 赞同：2
> 
> 时间：2012-11-28T15:48:42.910
> 
> 标签：templates, arguments, mediawiki

我正在尝试为 mediawiki 编写一个模板，并且需要获取传入的项目数量。我可以让用户传入参数的数量，但这并不漂亮而且使用起来很痛苦。

我当前的“解决方案”，使第一个参数成为参数的数量（需要手动传入：

```
{{{1}}} arguments passed in. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:41:40.577

由于某些原因（我想与安全性有关）MediaWiki 没有给你循环，所以参数计数不是很有用。当维基人需要一个接受任意数量参数的模板时，他们通常会这样做：

```
<!--
-->{{#ifeq:{{{4|x}}}|{{{4|}}}| 4 or more | <!--
-->{{#ifeq:{{{3|x}}}|{{{3|}}}| 3 | <!--
-->{{#ifeq:{{{2|x}}}|{{{2|}}}| 2 | <!--
-->{{#ifeq:{{{1|x}}}|{{{1|}}}| 1 | <!--
-->0 }} }} }} }} 
```

参见示例：[http ://en.wikipedia.org/w/index.php?title=Template:Tlp&action=edit](http://en.wikipedia.org/w/index.php?title=Template:Tlp&action=edit)

# css-float - 浮动页脚始终位于底部且可见

> ID：13609006
> 
> 赞同：34
> 
> 时间：2012-11-28T15:48:51.940
> 
> 标签：css-float, footer, sticky-footer

我有一个这样的网站：[>> website <<](http://leedscity.captive-portal.com/generic/main.html)。它由 2 个框架构成 - 主框架和页脚。我试图让它在没有框架的情况下工作（不要在手机上工作）。是否有任何简单的 CSS 或 jQuery 方法可以将页脚粘贴在底部以始终可见？所以效果就像上面的网站？我试图使用 css，但只有当我向下滚动到它时才会出现页脚。我希望页脚覆盖实际内容，所以它总是例如 50 像素高，并且总是在屏幕底部可见。即使页面是 10000px 高。我相信这很简单，但我在某个地方迷路了。提前谢谢你的帮助

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-28T15:52:52.317

是的。是`position: fixed`财产。

```
.footer {
    position: fixed; 
    bottom: 0;
    left: 0;
    right: 0;
    height: 50px;
} 
```

演示：http: [//jsfiddle.net/ZsnuZ/](http://jsfiddle.net/ZsnuZ/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-03T14:59:59.623

```
(function() {
    $('.footer').css('position', $(document).height() > $(window).height() ? "inherit" : "fixed");
})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-26T01:58:47.550

继续山姆琼斯：

基本上这会检查文档的高度是否会填满窗口，如果它小于窗口，它将附加到窗口的底部，如果文档大于窗口大小，它将附加到窗口的底部文档（因此它仅在您滚动到底部时可见）。

如果您调整窗口大小，它将重新计算并且一切都应该正常工作！

**CSS**

```
#footer {
  bottom: 0px;
} 
```

**HTML**

```
<div id="footer">
  Footer content
</div>
<script>
  var footerResize = function() {
    $('#footer').css('position', $("body").height() + $("#footer").innerHeight() > $(window).height() ? "inherit" : "fixed");
  };
  $(window).resize(footerResize).ready(footerResize);
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-15T20:40:34.873

我们甚至可以使用下面的代码比较高度并将页脚设置在底部。

```
 $(document).ready(function(){
    if($("body").height() < $(window).innerHeight()) {
                    $('#footer').css('position','fixed');
                    $('#footer').css('bottom',0);
    }
 }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-01-10T13:11:41.740

对我来说这效果更好，因为当位置为静态或继承时，身体高度包括页脚：

```
 var footerResize = function() {
            if ($('#footer').css('position') == "fixed")
                $('#footer').css('position', $("body").height() + $("#footer").height() > $(window).innerHeight() ? "inherit" : "fixed");
            else
                $('#footer').css('position', $("body").height() > $(window).innerHeight() ? "inherit" : "fixed"); 
```

};

现在增长窗口时它保持在底部。

# python - 如何让我的集线器订阅其他集线器？(PubSubHubBub)

> ID：13609009
> 
> 赞同：0
> 
> 时间：2012-11-28T15:49:00.013
> 
> 标签：python, rss, tornado, atom-feed, websub

有没有办法让我的 HUB 订阅其他集线器？IE。如果我找到一个带有 rel=hub 的链接，并且该集线器是其他人的，我是否可以让我自己的集线器在该集线器上订阅该主题，从而使其他订阅者可以通过我自己的集线器订阅该主题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:03:24.080

好吧，[规范](https://code.google.com/p/pubsubhubbub/)很明确，在提要中，您（订阅者）应该订阅提要发布者指定的中心。所以，不，没有办法让“你的”中心到达提要的实际中心。

现在，像[Superfeedr](http://superfeedr.com)（我创建的）这样的一些服务充当默认集线器，它们当然会订阅所有集线器以获取您与它们一起使用的提要。

# javascript - 使用像素忽略机器人的跟踪？

> ID：13609017
> 
> 赞同：0
> 
> 时间：2012-11-28T15:49:26.470
> 
> 标签：javascript, analytics, pixel, bots, robots.txt

在我的网站上，我需要记录一些有关访问者的数据，但重要的是我只记录人类访问者而不是任何机器人，尤其是坏机器人并且自动记录（验证码等不是一种选择）。

现在完成的方式是运行一个 JS，它动态添加一个运行数据记录的新 JS（它实际上运行一个 php 服务器端脚本，该脚本执行一些工作并返回一个 JS 代码）。这个解决方案的问题是所有图像都是在 JS 之后加载的，它会使已经很慢的站点减慢 0.5 秒到 1.5 秒（取决于站点和服务器负载）。

**在背景图像中使用像素（在 CSS 文件中设置）是一种好习惯吗？**

这种方式实现：

1.  更快的页面加载
2.  机器人被忽略（假设机器人不加载 CSS，如果它们加载则不加载 bg 图像，并且对于像谷歌这样的合法机器人，使用 robots.txt 阻止访问）

其他解决方案非常受欢迎。

**它看起来像这样：**

```
<div id="pixel"></div> 
```

CSS：

```
#pixel {background: url(/nobot/somephp.php); width: 1px; height: 1px;} 
```

机器人.txt

```
User-agent: *
Disallow: /nobot/ 
```

另一个问题，

## **我可以依赖坏机器人不会加载背景 CSS 图像的假设吗？**

* * *

我知道有很多关于机器人的线程，但找不到任何最新的并谈论这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:55:14.043

您可以坚持使用 JS 解决方案并使用异步 HTTP 请求 ( `XMLHttpRequest`/AJAX)。我认为它可以让您比 CSS 解决方案更精确地控制一些棘手的方面（例如缓存控制）。

当然，它不会考虑未启用 JS 的访问者。

# css - 为什么当 padding:0 和 marging:0 时元素之间有空格？

> ID：13609022
> 
> 赞同：1
> 
> 时间：2012-11-28T15:49:34.037
> 
> 标签：css

```
<!DOCTYPE html>
<meta charset="utf-8"> 
<html>
<body>
<div style="padding:0; margin:0;border-style:solid; border-color:red;">
<span style="padding:0; margin:0;border-style:solid; border-color:green;">Hi</span>
<span style="display:inline-block;padding:0; margin:0;border-width:1px; border-style:solid; border-color:blue;">Hello</span>
</div>
</body>
</html> 
```

为什么“Hi”和“Hello”跨度之间有一个空格？

[http://jsfiddle.net/KQRHW/10/](http://jsfiddle.net/KQRHW/10/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T15:52:36.640

**换行=空格**

**而不是这个**

```
<span style="padding:0; margin:0;border-style:solid; border-color:green;">Hi</span>
<span style="display:inline-block;padding:0; margin:0;border-width:1px; border-style:solid; border-color:blue;">Hello</span> 
```

**做这个**

```
<span style="padding:0; margin:0;border-style:solid; border-color:green;">Hi</span><span style="display:inline-block;padding:0; margin:0;border-width:1px; border-style:solid; border-color:blue;">Hello</span> 
```

你的小提琴更新了

[http://jsfiddle.net/KQRHW/12/](http://jsfiddle.net/KQRHW/12/)

* * *

这两个例子会产生一个空格

1

```
<span>Hi</span> <span>Hello</span> 
```

2

```
<span>Hi</span>
<span>Hello</span> 
```

这个不会产生任何空间

```
<span>Hi</span><span>Hello</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:58:58.073

另一个解决方案是在你的 span 中添加浮点数 [Fiddle Here](http://jsfiddle.net/hMB5V/)

```
<!DOCTYPE html>
<meta charset="utf-8">
<html>
<style type="text/css">
*{margin:0;padding:0;}
span{
float:left;
}
</style>
<body>
<div style="border-style:solid; border-color:red;height:20px;">
<span>Hi</span>
<span style="display:inline-block;border-width:1px;">Hello</span>
</div>

</body>
</html> 
```

# c# - 带有联接的 CRM LINQ 查询中的异常。第二个表中的属性不存在

> ID：13609024
> 
> 赞同：4
> 
> 时间：2012-11-28T15:49:37.173
> 
> 标签：c#, linq, dynamics-crm-2011, dynamics-crm, crm

首先，我很抱歉，因为这是我第二次写这个问题，但之前解释不好，现在已经接近了。

我正在为 CRM 数据库的搜索页面进行 linq 查询，并且像下面这样的普通查询不起作用，我遇到了异常：

```
 [System.ServiceModel.FaultException<Microsoft.Xrm.Sdk.OrganizationServiceFault>] = {"'Contact' entity doesn't contain attribute with Name = 'title'."} 
```

对于连接查询，在 Where 是 r.Name == "Me" && j.LastName == "He" 这样的子句中，我必须使用两个 Where 子句进行查询，因为我得到了与上面相同的异常，说表 'r' 没有 'LastName' 属性。

```
var cms = from i in aux_pr
       join cal in Contact on i.aux_CallerRequestorID.Id equals cal.ContactId.Value
       join sub in Subject on i.aux_ClassificationID.Id equals sub.SubjectId
       where cal.FullName.Contains(searchTerm) ||
       sub.Title.Contains(searchTerm) 
```

在这种情况下，我该怎么做这个查询。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T12:02:03.777

我想评论一下我学到的东西以及我发现的问题的解决方案，希望能对某人有所帮助。CRM LINQ 中存在一些限制，如此[处所述](https://stackoverflow.com/questions/10422514/linq-to-crm-or-in-where-clause)

我发现的第一个实体引用是这样的：

```
CrmEntityReference Caller
{
   Guid ID;
   string name;    
} 
```

我可以选择 Caller.name 但我不能在 where 子句中有 Caller.name。解决方案 -> 加入表格

第二个限制，当我们在查询中有连接时，如果它们是 AND 谓词，我们可以在 where 中有不同的表，我们必须编写两个子句 where 像这样：

```
 where cal.FullName.Contains(searchTerm)
   where sub.Title.Contains(searchTerm) 
```

但是当我们需要使用 OR 谓词而不是 AND 时，问题就来了，我们唯一的解决方案是执行两个查询，然后对这些查询进行联合。

我有四个查询可以只用一个来完成，由于记录的数量，现在在开发阶段性能很好，但我们将在测试阶段看到它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:06:51.253

尝试创建两个不同的过滤器..

```
 var cms = from i in aux_pr
   join cal in Contact on i.aux_CallerRequestorID.Id equals cal.ContactId.Value
   join sub in Subject on i.aux_ClassificationID.Id equals sub.SubjectId
   where cal.FullName.Contains(searchTerm) ||
   where sub.Title.Contains(searchTerm) 
```

# random - 在 vdm++ 中生成随机数

> ID：13609034
> 
> 赞同：1
> 
> 时间：2012-11-28T15:50:08.380
> 
> 标签：random, vdm++

有谁知道如何在 vdm++ 中生成随机数？数学库对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:49:51.557

您应该能够在 VDM 中使用随机生成器（在 VDMTools 和 Overture 中）。

在 Overture 中，参数必须大于 0，并且必须设置种子，这是默认设置。请记住通过在资源管理器中选择项目并选择 New->Add VDM Library 并选择 MATH 来包含标准 MATH 库。

它可以这样调用：`MATH.rand(100)`它将返回一个介于 0 和 100 之间的数字。

可以通过`MATH.srand(5)`返回种子集来更改种子。

# android - WebView 模拟点击

> ID：13609035
> 
> 赞同：0
> 
> 时间：2012-11-28T15:50:13.677
> 
> 标签：android, android-webview

我有一个自定义 WebView，我想在收到 MotionEvent.ACTION_DOWN 时模拟一次点击。我不想在 WebView 上有任何类型的输入，我什至不能让它可点击（.setClickable（false））。所以我所做的是覆盖我的自定义 WebView 中的 onTouchEvent() 以返回 false。

这工作正常，但我错过了点击。我在 WebView 的源代码中看到它向名为 WebViewCore 的类发送消息，但这种通信在每个版本的 android 中都是不同的。

有谁知道我如何以编程方式将点击发送到 webView？

这是我正在尝试做的事情：

```
public class VoidWebView extends WebView {

    public VoidWebView(Context context) {
        super(context);

    }
    public VoidWebView(Context context, AttributeSet attrs) {
        super(context, attrs);

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN){
                //tell the webview that a click has been performed , it doesn't matter where the click happened

        }
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:13:19.613

我认为您正在寻找`View`.

[您可以在此处](http://developer.android.com/reference/android/view/View.html#performClick%28%29)获得更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:15:07.173

将 up 和 down 事件传递给超级类。

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    int action = event.getAction();
    if(action == MotionEvent.ACTION_DOWN || action == MotionEvent.ACTION_UP){
         super.onTouchEvent(event);
         return true;
    }
    return false;
} 
```

# javascript - javascript 检查图像是否存在

> ID：13609036
> 
> 赞同：0
> 
> 时间：2012-11-28T15:50:17.013
> 
> 标签：javascript, html

我正在尝试显示谷歌地图或图像。所以，我想要的是默认情况下我想显示图像，如果图像不存在，则显示谷歌地图。为此，我默认禁用 google 地图 `#map_canvas {display:none;}`。然后，我需要一个类似布尔条件的东西来检查图像的存在，然后返回真或假，如果它是假的，则显示地图，通过更改 display="block";。但是，我不知道该怎么做，你能帮帮我吗？

顺便说一句，两个代码分别工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:59:08.073

显示`#map_canvas`图像是否未加载`#worldMap`使用

```
var img = document.getElementById("worldMap");
img.src = "http://www.freeworldmaps.net/download/maps/political-world-map-big.gif";

img.onerror = function( ) {
    img.style.display = "none";
    document.getElementById("map_canvas").style.display = "block";
}​​​​​​​​​​​​​​​​​ 
```

您显然不必在 img 标签中指定 src 属性，而是在页面加载时将其设置为如上。

[**在这里**](http://jsfiddle.net/bruno/KCVfy/1/)提琴[](http://jsfiddle.net/bruno/KCVfy/1/)

# c++ - 使用 GetOverlappedResult 丢失数据？

> ID：13609037
> 
> 赞同：1
> 
> 时间：2012-11-28T15:50:18.163
> 
> 标签：c++, winapi, io, serial-port

我有一个线程不断寻找新数据，如果数据还没有在串行缓冲区中，`ReadFile`并且`GetOverlappedResult`似乎告诉我有数据，并且它读取了它，但没有将它传输到我的缓冲区中......

```
func read()
{
    if(state == 0)
    {
        memset(bytes, '\0', sizeof(amount_to_read));

        readreturn = ReadFile(h, bytes, amount_to_read,NULL, osReader);
        if(readreturn <= 0)
        {
            errorcode = GetLastError();
            if(errorcode != ERROR_IO_PENDING)
            {
                SetEAIError(ERROR_INTERNALERROR);
                return -1;
            }
        }
    }

    if (GetOverlappedResult(h, osReader, &dwRead, FALSE) == false)
    {
        errorcode = GetLastError();

        if (errorcode == ERROR_IO_INCOMPLETE || errorcode == 0)
        {
            if(dwRead > 0)
            {
                return 1;
            }
            //timeout
            SetEAIError(ERROR_EAITIMEOUT);
            return -1;
        }
        else
        {
            //other error 
            SetEAIError(ERROR_WIN_ERROR);
            return -1;
        }
    }
    else
    {
        //read succeded, check if we read the amount required
        if(dwRead != amount_to_read)
        {
            if(dwRead == 0)
            {
                //nothing read, treat as timeout
                SetEAIError(ERROR_EAINOREAD);
                return -1;
            }
            else
            {
                //memcpy_s(bytes, sizeof(bytes), readbuf, dwRead);
                SetEAIError(ERROR_PARTIALREAD);
                *_bytesRead = dwRead;
                return -1;
            }
        }
        else
        {
            if(strlen((char*)bytes) == 0)
            {
                //nothing read, treat as timeout
                SetEAIError(ERROR_EAINOREAD);
                return -1;
            }
            //memcpy_s(bytes, sizeof(bytes), readbuf, dwRead);
            *_bytesRead = dwRead;
            return 0;
        }
    }
} 
```

这就是错误代码的含义：

*   ERROR_TIMEOUT - 将状态切换为 1，使其不再读取，从而`GetOverlappedResult`再次调用

*   INTERNALERROR,ERROR_EAINOREAD - 将状态重置为 0

*   ERROR_PARTIALREAD - 使用新的字节数开始新的读取

如果我将 GetOverlappedResult 切换为阻塞（传递 TRUE），它每次都有效。如果我将线程切换为仅在我知道那里有数据时才读取它每次都有效。

但是如果那里没有数据，当那里有数据时，它似乎“丢失”了数据，我的读取量参数`dwRead`显示了正确的读取字节数（可以看到它用端口监视器读取）但字节没有存储在我的字符 *.

我不断收到 ERROR_EAINOREAD

我究竟做错了什么？

我不想使用标志，我只想使用`ReadFile`and `GetOverlappedResult`，我应该能够用我拥有的代码来完成这个......我假设

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:04:39.250

问题正是所说的数据丢失了......它丢失的原因是因为传递给 readfile 的 bytes 参数是父线程中的局部变量。在本地它会在每个周期重新初始化，所以在我再次进入读取时，跳过读取文件并转到重叠结果，我现在可能正在使用不同的内存区域

# c# - C# 实体框架提交错误

> ID：13609039
> 
> 赞同：0
> 
> 时间：2012-11-28T15:50:25.690
> 
> 标签：c#, entity-framework

尝试调用`.SaveChanges()`实体框架时出现奇怪的错误。

我正在尝试保存`Order`这样的

```
public void SaveOrder(UserDTO user, ArticleDTO article, PriceDTO price, decimal amount)
{
    //Get the order with type cart. If no order exist create a new order with type cart.
    var order = _orderRepository.GetCartOrderForCustomer(user.Customer.CustomerREFID);

    if (order == null)
    {
        order = new Order()
        {
            CustomerREFID = user.Customer.CustomerREFID,
            CreateDate = DateTime.Now,
            OrderType = OrderType.Cart
        };

        _orderRepository.Add(order);
        _orderRepository.UnitOfWork.Commit();
    }
} 
```

当我只调用这个方法时，肯定它工作正常。但是当我在这个方法之前调用另一个方法时，我会得到错误。

before 方法只是获取文章和价格。

```
public IEnumerable<Article> GetArticlesByCategory(int categorySection, int headCategory, string customerREFID)
{
    var currentUnitOfWork = this.UnitOfWork as MainBCUnitOfWork;

    //Linq query without keys.
    var result = (from a in currentUnitOfWork.Articles
                  join cat in currentUnitOfWork.Categories on a.CategoryID equals cat.CategoryID
                  join cf in currentUnitOfWork.CategoryReferences on cat.ID equals cf.CategoryID
                  join c in currentUnitOfWork.Customers on a.Lagstalle equals c.LagStalle
                  where cf.RefID == categorySection && cat.HuvudKat == headCategory && c.CustomerREFID == customerREFID
                  select a).ToList();

    var artnumbers = result.Select(a => a.Number).ToList();

    var prices = currentUnitOfWork.Prices.Where(p => artnumbers.Contains(p.ArtNr) && p.FtgNr == customerREFID).ToList();

    Parallel.ForEach(result, a =>
    {
        a.Prices = prices.Where(p => p.ArtNr == a.Number).ToList();
    });

    return result.ToList();

} 
```

所以打电话时`SaveOrder`我得到这个错误：

> {System.Data.SqlClient.SqlException (0x80131904)：违反主键约束“PK_dbo.PriceArticles”。无法在对象“dbo.PriceArticles”中插入重复键。重复键值为 (6653, 1)。该语句已终止。在 System.Data.SqlClient.SqlConnection.OnError（SqlException 异常，布尔 breakConnection，操作`1 wrapCloseInAction) at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) 在 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject state&Obj, Boolean dataReady) 在 System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) 在 System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task , Boolean asyncWrite) 在 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream,字符串方法，TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite) at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 完成，String methodName，Boolean sendToPipe，Int32 timeout，Boolean asyncWrite) at System.Data.SqlClient.SqlCommand.ExecuteNonQuery() at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator 翻译器，EntityConnection 连接，字典`2 identifierValues, List`1 generatedValues) 在 System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter 适配器) ClientConnectionId:dfc62e28-3751-4a54-89f4-5fa8195cab2a}

这个表和get 表无关`Order`？为什么我只添加新的 Entity Framework 会提交其他表`Order`？

我该如何解决这个问题？

# apache-flex - 在 flex 中开发游戏：绘制许多缩放位图的性能问题

> ID：13609041
> 
> 赞同：2
> 
> 时间：2012-11-28T15:50:28.307
> 
> 标签：apache-flex, drawing, cpu-usage, bitmapdata

我使用 Flex 4.6.0 开发了一款动作游戏，但绘图部分存在问题。其实这几天我还以为是物理部分的计算有问题，但经过很多优化，我确定我的绘图有问题。

让我解释一下代码的样子。

在游戏循环中，我有：

```
protected function onEnterFrame():void {
    runPhysics();
    drawScene();
} 
```

在`runPhysics`函数内部我做了很多计算，但正如我所说，我确信它已经过优化。

里面`drawScene`我有：

```
protected function drawScene():void {
    drawFixedBackground( fixedBitmap );
    drawPeriodicBackground( periodicBitmap1 );
    drawPeriodicBackground( periodicBitmap2 );
    drawLevel();
    drawCar();

    gamePanel.graphics.clear();
    gamePanel.graphics.beginBitmapFill(screenBuffer, null, false, true);
    gamePanel.graphics.drawRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);
    gamePanel.graphics.endFill();
} 
```

`drawFixedBackground`功能非常简单。我只是使用该`copyPixels`功能在整个屏幕上绘制。

其他功能取决于我的汽车和相机的位置，所以我必须在绘制之前缩放和平移它们。

我有一个全局`BitmapData`调用`screenBuffer`，我在其中绘制了我已经在内存中的其他 BitmapData。例如：

```
protected function drawPeriodicBackground( bitmap:BitmapData ):void {
    var m:Matrix = new Matrix();
    m.scale( ... );
    m.translate( ... );
    screenBuffer.draw( bitmap, m);
}

protected function drawLevel():void {
    var m:Matrix = new Matrix();
    for(var i:int=0; i<NUMBER_OF_BOARDS; i++) {
        m.scale( ... );
        m.translate( ... ); 
        screenBuffer.draw(boardBitmap, m);
    }
}

protected function drawCar():void {
     var m:Matrix = new Matrix();
     m.scale( ... );
     m.translate( ... );
     screenBuffer.draw(carBitmap, m);
} 
```

在这段代码中，`gamePanel`是一个火花`Group`组件。

我说我确信物理不是问题，因为如果我注释掉除 drawCar 之外的所有绘图函数，我的车运行良好，与不可见的板相撞并保持 CPU 使用率很低（25%）。另一方面，当所有绘图功能都处于活动状态时，我的 CPU 使用率达到 140%，并且我的汽车在某些计算机上开始滞后。

谁能帮我？我做错什么了吗？

提前致谢。

# javascript - 隐藏包含 javascript 的 iframe 时 Internet Explorer 崩溃

> ID：13609042
> 
> 赞同：2
> 
> 时间：2012-11-28T15:50:29.883
> 
> 标签：javascript, internet-explorer, iframe

昨天我们发现了一个问题，即每当主页上的 iframe 被隐藏时，我们的一个网站就会崩溃，而且它只发生在 IE9 上。iFrame 包含一些简单的 html 和幻灯片，它是用 jquery 运行的。为什么这会导致 IE 崩溃而不是其他浏览器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T15:50:29.883

11 月 13 日，微软发布了 IE 的安全更新 (KB2761451) 来解决这个问题。如果 javascript 在隐藏的 iframe 中运行，Internet Explorer 将引发访问冲突。我怀疑这样做是为了关闭一些跨站点脚本漏洞，但我认为这不是预期的行为。

[类似的答案](https://stackoverflow.com/questions/13450190/zrssfeed-jquery-crash-on-ie-9-force-to-close)

[Microsoft 的 KB2761451 更新页面](http://technet.microsoft.com/en-us/security/bulletin/ms12-071)

# jquery - Bassistance 表单验证输入错误事件

> ID：13609048
> 
> 赞同：1
> 
> 时间：2012-11-28T15:50:38.083
> 
> 标签：jquery, jquery-validate

在 bassistance 表单验证插件中；我在验证选项参数中找到了**成功**选项，只要输入有效的输入值就会触发，而不仅仅是提交

例如：

```
 success: function(label) {
        label.text("ok!"); //.addClass("success");
        label.addClass("success"); } 
```

输入无效值时是否会触发任何等效事件？不只是提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T11:38:11.530

有同样的问题，但经过一番摸索后找到了解决方案。我知道您不久前发布了此内容，但如果有人偶然发现此内容，那么它可能会很有用。

您需要使用`highlight`功能类型的配置选项。

```
// Triggers on all errors, regardless of event type
highlight: function (element) {
    $(element).parent().addClass('has-error');
} 
```

结合成功选项，您现在可以控制成功事件和所有错误事件，即使这些错误是由 onkeyup、onsubmit、onfocusout 或 onclick 事件触发的。

```
// Triggers on success
success: function ($element) {
    $element.parent().removeClass('has-error');
} 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:18:33.887

您可以使用该`errorPlacement`选项。

它接受一个包含错误标签的 jQuery 对象作为它的第一个参数，就像`success`，并接受另一个包含无效元素的 jQuery 对象作为它的第二个参数：

```
errorPlacement: function(label, element) {
    label.text("not OK").insertAfter(element);
} 
```

# windows-phone - 在 Windows Phone 8 中设置广告

> ID：13609056
> 
> 赞同：18
> 
> 时间：2012-11-28T15:50:59.433
> 
> 标签：windows-phone, ads, windows-phone-8, windows-phone-8-emulator

我发现了一些针对类似问题的零散回复（主要针对 Windows Phone 7），但我想发布一个包含所有 Windows Phone 8 广告要求的答案。

我在 Windows Phone 8 中设置广告时遇到了一些问题。每次运行模拟器时，都会遇到应用程序可以运行但广告不显示的问题。

该应用程序运行正常，但我注意到在输出控制台中记录了以下异常：

```
An exception of type 'Microsoft.Advertising.Shared.AdException' occurred in Microsoft.Advertising.Mobile.DLL and wasn't handled before a managed/native boundary 
```

广告在我正在开发的一个应用程序中显示良好，但在另一个应用程序中却没有，并且该异常没有显示任何有用的信息。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-28T15:50:59.433

我想出了如何捕获异常并查看问题实际上是什么（这是我的清单文件中大量缺失的功能）。为了尝试从 AdControl 中捕获异常并获取我需要的数据，我将以下内容添加到我的页面中。

**捕捉广告控制错误**

```
 public MainPage()
    {
        InitializeComponent();

        AdUnit.ErrorOccurred += AdUnit_ErrorOccurred;
    }

    void AdUnit_ErrorOccurred(object sender, Microsoft.Advertising.AdErrorEventArgs e)
    {
        throw new NotImplementedException();
    } 
```

这表明我缺少 MEDIALIB 许可和 PHONEDIALER 许可。我进行了一些测试，并确定任何运行广告的应用都需要以下权限：

**所需权限**

```
ID_CAP_IDENTIFY_USER
ID_CAP_MEDIALIB_PHOTO
ID_CAP_NETWORKING
ID_CAP_PHONEDIALER
ID_CAP_WEBBROWSERCOMPONENT 
```

**设置参数**

从我读过的其他帖子中，确保将广告单元的宽度/高度正确设置为 480/80 也很重要，如果它是自动的并且没有最小尺寸，那么广告将不会显示。

确保要在模拟器中查看它，您只能使用[test ApplicationId 和 AdUnitId](http://msdn.microsoft.com/en-us/library/advertising-mobile-windows-phone-test-mode-values%28v=msads.20%29.aspx)。PubCenter 凭据仅适用于已发布的应用程序。

```
<UI:AdControl x:Name="AdUnit" Height="80" Width="480"
    AdUnitId="Image480_80" ApplicationId="test_client" /> 
```

**隐藏或交换失败/空广告控件**

如果您的 AdControl 失败，它会在您的广告中留下很大的空白。您可以隐藏它或将其与来自其他网络的广告交换。为此，请捕获如上所示的异常 ( `AdUnit_ErrorOccurred`) 并添加以下内容：

*隐藏：*

```
AdUnit.Height = 0;
AdUnit.Visibility = System.Windows.Visibility.Collapsed; 
```

设置可见性本身不起作用，高度也必须设置为 0。

*交换广告：*

除了隐藏 AdControl，您还可以显示来自[http://www.adduplex.com](http://www.adduplex.com)等服务的备用广告栏。

# c# - 序列化 .NET 对象

> ID：13609063
> 
> 赞同：1
> 
> 时间：2012-11-28T15:51:21.057
> 
> 标签：c#, serialization

为了保存我的应用程序的所有设置，我在文件中使用序列化，如本教程中所述：http: [//www.codeproject.com/Articles/1789/Object-Serialization-using-C](http://www.codeproject.com/Articles/1789/Object-Serialization-using-C)

所以我创建了一个名为 Keyboard 的类

```
[Serializable()]
class Keyboard : ISerializable
{
    private DeviceInf _infoKbd;
    private Screen _displayAttached;
} 
```

当我启动我的程序时，应用程序在序列化过程中崩溃，说 Screen 不可序列化。所以我的问题是：如何序列化一开始不可序列化的.NET？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:05:53.027

**System.Windows.Forms.Screen**对象未标记为可序列化，因此 .NET 不会为您完成繁重的工作。不过，您可以编写自己的序列化程序。可以在[http://www.codeproject.com/Articles/86503/Saving-the-state-serializing-a-Windows-Form](http://www.codeproject.com/Articles/86503/Saving-the-state-serializing-a-Windows-Form)找到序列化表单的示例。如果您不想这样做，也许您可​​以将设置保存在 app.config 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:53:58.793

我怀疑您必须使 DeviceInfo 和 Screen 也可序列化。

# .htaccess - URL 重写适用于 .html 但不适用于 .php

> ID：13609064
> 
> 赞同：4
> 
> 时间：2012-11-28T15:51:23.500
> 
> 标签：.htaccess, rewrite

我有一个去除文件扩展名的 URL 重写。它正在处理`.html`页面，但它给我一个“404 Page Not Found”`.php`文件错误。

这是我的完整`.htaccess`文件

```
# The following will allow you to use URLs such as the following:
#
#   example.com/anything
#   example.com/anything/
#
# Which will actually serve files such as the following:
#
#   example.com/anything.html
#   example.com/anything.php
#
# But *only if they exist*, otherwise it will report the usual 404 error.

Options +FollowSymLinks
RewriteEngine On

rewritecond %{HTTP_HOST} ^inaflashgraphics.com$
rewriterule ^ "http\:\/\/www\.inaflashgraphics\.com\/" [R=301,L] #4e2f2fa615667

# Remove trailing slashes.
# e.g. example.com/foo/ will redirect to example.com/foo
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R=permanent,QSA]

# Redirect to HTML if it exists.
# e.g. example.com/foo will display the contents of example.com/foo.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)$ $1.html [L,QSA]

# Redirect to PHP if it exists.
# e.g. example.com/foo will display the contents of example.com/foo.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ $1.php [L,QSA] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:18:56.623

我想通了，这段代码对我有用。

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On

rewritecond %{HTTP_HOST} ^inaflashgraphics.com$
rewriterule ^ "http\:\/\/www\.inaflashgraphics\.com\/" [R=301,L]

RewriteBase /

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L]

# Redirect to HTML if it exists.
# e.g. example.com/foo will display the contents of example.com/foo.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.+)$ $1.html [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:05:40.473

你可以试试：

```
 RewriteCond %{HTTP_HOST} ^www\.inaflashgraphics\.com
RewriteCond %{THE_REQUEST} ^GET\ (.*)\.php\ HTTP
RewriteRule (.*)\.php$ $1 [R=301] 
```

# azure - Windows Azure RDP/FTP

> ID：13609065
> 
> 赞同：1
> 
> 时间：2012-11-28T15:51:29.357
> 
> 标签：azure

使用 Windows Azure 的新界面，如何启用 RDP？我正在使用云服务，我的网站是 mysite.cloudapp.net。在我的发布设置中，我启用了 RDP。在哪里可以找到我的 RDP 凭据？如果可能，如何启用 FTP？以下是我遵循的说明：

[https://www.windowsazure.com/en-us/develop/net/common-tasks/remote-desktop/](https://www.windowsazure.com/en-us/develop/net/common-tasks/remote-desktop/)

我在新布局中看不到托管服务选项卡。

当我尝试 RDP 时，我收到一条无法连接的即时失败消息。我使用的是 Windows 8，我尝试了 Windows 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:22:38.120

对于 RDP，假设您已经完成所有步骤并且配置正确，您需要使用管理门户，单击左侧的云服务并选择您要 RDP 进入其实例的服务，在菜单中选择实例顶部，然后选择您要 RDP 进入的实例。底部的工具栏应该包含一个连接选项，点击它应该下载一个 RDP 文件，你可以打开到 RDP 到机器中，这将提示你提供你需要提供的凭据（在你的项目配置中提供）。

您实际上可以保存此 RDP 文件并将其重新用于部署，但如果您在端口号更改时重新部署，它可能会变得无效。

至于 FTP，已经写了很多，例如[this](http://khailiangtech.wordpress.com/2011/10/04/windows-azure-how-to-enable-ftp/)，但您确实需要考虑本文中的注释，例如 - 如果角色因任何原因需要回收，您上传到角色实例的文件将消失。

# javascript - 如何禁用中继器中的检查复选框（ASP.NET）

> ID：13609066
> 
> 赞同：0
> 
> 时间：2012-11-28T15:51:33.647
> 
> 标签：javascript, asp.net, html

我正在使用中继器：

```
<asp:Repeater ID="rptAdvertisements" runat="server" OnItemCommand="rptAdvertisements_ItemCommand" >
    <ItemTemplate>        
            <tr <%# Eval("RowStyle")%>>
                <td><input  type="checkbox" DISABLED /></td>
                <td><%# Eval("ADV_Title")%></td>
                <td><%# Eval("ADV_NbView")%></td>
                <td><%# Eval("Date")%></td>
                <td><%# Eval("DateEnd")%></td>
                <td><img src="<%=ResolveClientUrl("~/Images/Advertisements/")%><%# Eval("IMG")%>" alt="<%# Eval("ADV_Title")%>" title="<%# Eval("ADV_Title")%>" style="max-height:100px;max-width:100px;" /></td>  
                <td><input  type="checkbox" id="checkbox1" runat="server"  checked='<%#Convert.ToBoolean(Eval("ADV_Special"))%>'   /></td>
                <td><input  type="checkbox" id="checkbox2" runat="server"  checked='<%#Convert.ToBoolean(Eval("ADV_Info"))%>'   /></td>
                </tr>
    </ItemTemplate>
</asp:Repeater> 
```

如何禁用检查复选框这个中继器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:59:26.863

投射到`bool`而不是`Convert.ToBoolean`

**改变**

```
<input  type="checkbox" id="checkbox1" runat="server"  checked='<%#Convert.ToBoolean(Eval("ADV_Special"))%>'   /> 
```

**至**

```
<input  type="checkbox" id="checkbox1" runat="server"  checked='<%# (bool)(Eval("ADV_Special"))%>'   /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:09:38.387

在您希望复选框永久禁用的基础上，您需要向`disabled`标记添加一个属性。

例如

```
<input  type="checkbox" disabled id="checkbox1" runat="server" checked='<%#Convert.ToBoolean(Eval("ADV_Special"))%>'   /> 
```

编辑：您的代码似乎也没有选中该复选框。为了检查复选框，它只需要`checked`存在或不存在属性（而不是将其设置为`true`/`false`你有它）。

`checked`因此，除了禁用它之外，您还需要执行以下操作来显示/隐藏该属性：

```
<input  type="checkbox" id="checkbox1" disabled <%#Convert.ToBoolean(Eval("ADV_Special")) ? "checked" : String.Empty %>  /> 
```

注意 - 要做到这一点，您必须删除该`runat="server"`属性以停止格式错误的服务器控件的问题。如果您想访问后端中的复选框，您可以始终使用 an`asp:CheckBox`代替，如下所示：

```
<asp:CheckBox ID="checkbox1" Enabled="false" Checked='<%#Convert.ToBoolean(Eval("ADV_Special"))'  runat="server" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T20:33:25.070

老问题，但这可能对某人有帮助：

```
<input type="checkbox" <%# ((bool)Eval("ShouldCheck") ? "checked='checked' disabled='disabled'" : "") %> /> 
```

此示例检查数据绑定容器的 ShouldCheck 布尔属性。如果为真，它会检查复选框并禁用它。我的用例是我希望用户能够仅在尚未选中的情况下选中该框（单向复选框）。

# jboss7.x - 配置 jboss7 ajp 连接器超时

> ID：13609073
> 
> 赞同：0
> 
> 时间：2012-11-28T15:51:45.907
> 
> 标签：jboss7.x

我正在设置 Jboss7 以使用 ajp 与 apache http 一起工作。我的 server.xml 有以下条目来打开 ajp 端口

```
<subsystem xmlns="urn:jboss:domain:web:1.1" native="false" default-virtual-server="default-host">
    <connector name="http" protocol="HTTP/1.1" scheme="http" port="8080"/>
    <connector name="ajp" protocol="AJP/1.3" port=8009 enabled="true" />
    <virtual-server name="default-host" enable-welcome-root="false">
        <alias name="localhost"/>
        <alias name="example.com"/>
    </virtual-server>
</subsystem> 
```

但是，当我尝试在端口定义后添加 connectionTimeOut="10000" 时，我在 boot.log 中收到以下错误

> 引起：org.jboss.as.controller.persistence.ConfigurationPersistenceException：JBAS014676：无法解析配置
> 
> org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:125) [jboss-as-controller-7.1.0.Final.jar:7.1.0.Final] 在
> 
> org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:187) [jboss-as-controller-7.1.0.Final.jar:7.1.0.Final] 在 org.jboss.as.server.ServerService。 boot(ServerService.java:261) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final] 在 org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:155) [ jboss-as-controller-7.1.0.Final.jar:7.1.0.Final] ... 1 更多原因：javax.xml.stream.XMLStreamException: ParseError at [row,col]:[411,13] 消息：JBAS014788：在 org.jboss.as.controller.parsing.ParseUtils.unexpectedAttribute(ParseUtils.java:104) [jboss-as-controller-7.1.0.Final.jar:7.1.0.Final 遇到意外的属性“connectionTimeout” ] 在 org.jboss.as.web 的 org.jboss.as.web.WebSubsystemParser.parseConnector(WebSubsystemParser.java:831)。WebSubsystemParser.readElement(WebSubsystemParser.java:389) at org.jboss.as.web.WebSubsystemParser.readElement(WebSubsystemParser.java:60) at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110) [staxmapper-1.1 .0.Final.jar:1.1.0.Final] 在 org.jboss.staxmapper.XMLExtendedStreamReaderImpl.handleAny(XMLExtendedStreamReaderImpl.java:69) [staxmapper-1.1.0.Final.jar:1.1.0.Final] 在 org. jboss.as.server.parsing.StandaloneXml.parseServerProfile(StandaloneXml.java:893) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final] 在 org.jboss.as.server.parsing。 StandaloneXml.readServerElement_1_1(StandaloneXml.java:329) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final] at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java: 126) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final] 在 org.jboss.as。server.parsing.StandaloneXml.readElement(StandaloneXml.java:100) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final] at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java: 110) [staxmapper-1.1.0.Final.jar:1.1.0.Final] 在 org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69) [staxmapper-1.1.0.Final.jar:1.1.0 .Final] 在 org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:117) [jboss-as-controller-7.1.0.Final.jar:7.1.0.Final] ... 还有 4 个69) [staxmapper-1.1.0.Final.jar:1.1.0.Final] 在 org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:117) [jboss-as-controller-7.1.0 .Final.jar:7.1.0.Final] ... 还有 4 个69) [staxmapper-1.1.0.Final.jar:1.1.0.Final] 在 org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:117) [jboss-as-controller-7.1.0 .Final.jar:7.1.0.Final] ... 还有 4 个
> 
> ```
>  15:47:20,423 INFO  [org.jboss.as] JBAS015950: JBoss AS 7.1.0.Final "Thunder" stopped in 29ms 
> ```

我的问题是我们如何在 jboss7 中配置超时。我关注了[http://docs.jboss.org/jbossweb/latest/config/ajp.html](http://docs.jboss.org/jbossweb/latest/config/ajp.html)，但无法确定 server.xml 中所需的配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:10:57.697

从 jboss 专家那里找到的解决方案

[https://community.jboss.org/message/779774?_sscc=t](https://community.jboss.org/message/779774?_sscc=t)

# tfs - TFS 构建服务向导在“编辑集合级别信息”权限设置为允许时失败

> ID：13609076
> 
> 赞同：3
> 
> 时间：2012-11-28T15:51:54.347
> 
> 标签：tfs, tfsbuild, build-server, azure-devops

我正在尝试设置 TFS 构建服务，但配置向导不断在编辑集合级信息权限上进行轰炸，这是我根据需要设置的。

没有太多的背景信息，它是一个新的 2003 虚拟服务器，只安装了 TFS 构建服务。我得到的唯一另一个警告是没有安装防火墙，所以我看不到干扰。日志中感兴趣的部分如下。

```
Verify: Verify that the running account has the required Team Foundation Server permissions(TBRUNNINACOUNT): Starting Verification
TF279000: User domain\user.name does not have permission to add members to the Build Services group. To perform this action, the user must have the 'Edit collection-level information' permission set to Allow.
!Verify Error!: TF279000: User domain\user.name does not have permission to add members to the Build Services group. To perform this action, the user must have the 'Edit collection-level information' permission set to Allow.
"Verify: Verify that the running account has the required Team Foundation Server permissions(TBRUNNINACOUNT): Exiting Verification with state Completed and result Error"
!Verify Result!: 1 Completed, 0 Skipped: 0 Success, 1 Errors, 0 Warnings 
```

非常感谢任何帮助，我不知道从哪里开始。

谢谢，汤姆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T05:42:33.187

我不确定为什么您的 Build 应该在 Collection 级别上编辑某些内容，但应该解决的问题是将权限添加到“Project Collection Build Service Accounts”。我希望 TBRUNNINACOUNT 是该组的成员，否则构建可能会失败。

要设置权限，请执行以下步骤：

1.  打开团队资源管理器
2.  连接到应使用构建服务的 TeamProjectCollection
3.  右键单击根以获取上下文菜单
4.  选择“团队项目集合设置 -> 安全”
5.  选择“项目集合构建服务帐户”
6.  设置“编辑收藏级信息”权限
7.  使用 ok 关闭对话框

现在该帐户具有所需的权限，并且向导应该运行该点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T11:12:04.900

我遇到了同样的问题，基本上我从汤姆离开的地方接了过来。

在用于源代码控制的 TFS 服务器上，我将我的 AD 用户帐户添加到 Project Collection Build Administrators 组，并且它工作正常。

# android - 从另一个 android 应用程序获取图标

> ID：13609085
> 
> 赞同：11
> 
> 时间：2012-11-28T15:52:14.643
> 
> 标签：android, icons, package

如果我知道它的包名称，如何从设备上的另一个 Android 应用程序访问图标启动器？

例子

```
String googlePackageName = "com.google.maps";

Drawable googleIcon = googlePackageName.getIconLauncher() or something. 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-28T15:54:37.813

使用 PackagerManager 的[getApplicationIcon](http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationIcon%28java.lang.String%29) () 来完成这个任务：

```
Drawable appIcon = getPackageManager().getApplicationIcon("com.google.maps"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:04:18.363

我遇到了这个问题。以前从未听说过。但我想这应该是解决方案：

```
Drawable icon = context.getPackageManager().getApplicationIcon(packageName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T15:57:35.030

以下剪辑应该为您指明正确的方向：

```
final Intent intent = new Intent(Intent.ACTION_MAIN, null);
            intent.addCategory(Intent.CATEGORY_LAUNCHER);
            intent.setPackage( packageName );
            final List<ResolveInfo> pkgAppsList = pm.queryIntentActivities( intent, 0 );
            if( pkgAppsList.size() > 0 ) {
                this.url = pkgAppsList.get(0).activityInfo.name;
                icon = pkgAppsList.get(0).activityInfo.loadIcon( pm );
                this.displayName = pkgAppsList.get(0).activityInfo.loadLabel( pm ).toString();
                this.module = pkgAppsList.get(0).activityInfo.packageName;
                this.isExternal = true;
                this.count = count;
            } 
```

# log4net - 如何在日志文件名中的文件扩展名之前附加滚动索引

> ID：13609089
> 
> 赞同：18
> 
> 时间：2012-11-28T15:52:25.893
> 
> 标签：log4net

我正在使用`RollingLogFileAppender`它，它工作得很好，它正在滚动到新文件中。但它在文件的最后添加了 .1、.2 等。所以我以 , 等结尾`.log.1`。`.log.2`所以从技术上讲，每个文件都有一个资源管理器不知道的新扩展名，所以我不能只是双击一个文件来打开。

如何让滚动文件附加程序在文件扩展名之前插入该索引？

我想要的是

*   .1.log
*   .2.日志

奖励将是当前文件始终是`.0.log`，这样他们总是在资源管理器中正确排序。

编辑：添加了我当前的配置设置

```
<log4net>
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock"/>
      <file value="App_Data\\Logs\\" />
      <datePattern value="dd.MM.yyyy'.log'" />
      <staticLogFileName value="false" />
      <appendToFile value="true" />
      <rollingStyle value="Composite" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="5MB" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
      </layout>
    </appender>

    <logger name="File">
      <level value="All" />
      <appender-ref ref="RollingLogFileAppender" />
    </logger>
  </log4net> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T11:40:27.283

您只需要使用 RollingFileAppender 上的 PreserveLogFileNameExtension 属性。

请参阅**以下**问题：

[Log4net appender 文件名问题](https://stackoverflow.com/questions/2833464/log4net-appender-filename-issue)

[Log4net RollingFileAppender 大小 rollingStyle 文件扩展名](https://stackoverflow.com/questions/2608591/log4net-rollingfileappender-size-rollingstyle-file-extension)

# c# - 为具有 COM 对象的类编写正确的 IDisposable 实现

> ID：13609098
> 
> 赞同：2
> 
> 时间：2012-11-28T15:52:57.920
> 
> 标签：c#, winforms, com, idisposable

我有一个对 COM 对象使用 .NET 包装器的类，它给了我那个臭名昭著的 RCW 错误，所以在我的调查中，我发现如果我从这个类的终结器中取出 Dispose() 方法，它将修复RCW 错误所以出了点问题，例如对象正在被释放，但注册的事件仍然存在......但仅仅删除 Dispose() 不能成为答案，因为那么谁将释放内存？（我运行了内存分析器并确认仅删除 Dispose 方法会导致 20MB 额外的非托管内存）

所以我使用 Dispose 模型的方式应该有问题。这就是我所拥有的：

```
 private MyCOMobject theCOMobject = null;

    static SuppressFieldCntrlr()
    {
        new SomeCalss();
    }

    ~SuppressFieldCntrlr()
    {
       Dispose(false); 
    }

    private bool disposed = false;

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    private void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                theCOMobject.Dispose();
            }

            MethodFoo(false);

            disposed = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:00:00.573

对于 COM 对象，您需要调用`Marshal.ReleaseComObject`. Marshal 类位于命名空间中`System.Runtime.InteropServices`。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:09:41.053

非托管资源应在部件之外处理`if(disposing)`。在那里只应处置托管资源。

在 COM 包装器中：

```
private void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                //Dispose managed resource if any.                   
            }

            //Release the unmanaged resource.

            disposed = true;
        }
    } 
```

并保持 Dispose 模式的实现不变，因为 COM 包装器实现了 IDisposable。

我不确定`ReleaseComObject`。[显然并不总是推荐](http://blogs.msdn.com/b/cbrumme/archive/2003/04/16/51355.aspx)它。还有[Marshal.FinalReleaseComObject](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.finalreleasecomobject.aspx)方法。另请查看有关如何包装 COM 对象的[答案。](https://stackoverflow.com/questions/1573977/is-it-safe-to-call-an-rcw-from-a-finalizer)

有关如何实现 dispose 模式的详细指南，您可以阅读 Joe Duffy 的这篇[博客文章](http://www.bluebytesoftware.com/blog/PermaLink.aspx?guid=88e62cdf-5919-4ac7-bc33-20c06ae539ae)。它相当长，但非常有帮助。

# plsql - 将值从数组传递到 Apex 表单上的文本字段

> ID：13609110
> 
> 赞同：2
> 
> 时间：2012-11-28T15:53:47.217
> 
> 标签：plsql, oracle-apex

我在进程中使用以下 pl/sql 来分隔一些文本，然后将其显示并放入两个文本字段中以保存记录。我看不到以下内容有任何问题，但是当我在 APEX 上运行该进程时，它显示“ORA-01403：未找到数据”。这是将数组中保存的值传递到我的 APEX 表单上的文本字段的正确方法吗？

```
declare

v_array apex_application_global.vc_arr2;

begin

-- Convert delimited string to array
v_array := apex_util.string_to_table(:P1_OPERATION_JOB,'^');

:P1_ORDER := v_array(1);
:P1_LOCATION := v_array(2);

end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:19:52.323

您确实可以像这样从数组中检索值。然而，得到 ORA-01403 错误将表明这两个位置都没有数据。（当试图访问 plsql 数组中没有数据的位置的数据时，Oracle 会抛出这个错误，当 select into 没有检索到数据时也会出现同样的错误）

我运行此代码只是为了确保您的拆分输出：

```
DECLARE
    l_vc_arr2    APEX_APPLICATION_GLOBAL.VC_ARR2;
BEGIN
    apex_debug_message.log_message('Debugging string to table output:');
    l_vc_arr2 := APEX_UTIL.STRING_TO_TABLE(:P1_OPERATION_JOB, '^');
    FOR z IN 1..l_vc_arr2.count LOOP
        apex_debug_message.log_message('Item at position '||z||': '||l_vc_arr2(z));
    END LOOP;
END; 
```

在启用调试的情况下运行页面并检查循环输出的调试消息。您尝试访问的职位之一很可能没有价值。

# java - 没有persistence.xml的spring 3.1 hibernate 4 - 多个数据源（没有Web应用程序）

> ID：13609111
> 
> 赞同：0
> 
> 时间：2012-11-28T15:53:47.453
> 
> 标签：java, spring, hibernate, orm, sessionfactory

我正在尝试这样：

```
Properties hibernateProperties = new Properties();
hibernateProperties.setProperty("hibernate.dialect", "org.hibernate.dialect.MySQLDialect");

hibernateProperties.setProperty("hibernate.connection.driver_class", "com.mysql.jdbc.Driver");
hibernateProperties.setProperty("hibernate.connection.url", "jdbc:mysql://" + source.getHost() + "/" + source.getDataBase());
hibernateProperties.setProperty("hibernate.connection.username", source.getUsername());
hibernateProperties.setProperty("hibernate.connection.password", source.getPassword());
hibernateProperties.setProperty("hibernate.hbm2ddl.auto", "validate");

Configuration configuration = new Configuration();
configuration.setProperties(hibernateProperties);
configuration.setProperty("packagesToScan", "com.company.comparer.entity");

SessionFactory sessionFactory = configuration.configure().buildSessionFactory(
            new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry()); 
```

它只是不工作:)

```
4176 2012-11-28 17:48:52,583 - [main] INFO  org.hibernate.Version  - HHH000412: Hibernate Core {4.1.1}
4178 2012-11-28 17:48:52,585 - [main] INFO  org.hibernate.cfg.Environment  - HHH000206: hibernate.properties not found
4179 2012-11-28 17:48:52,586 - [main] INFO  org.hibernate.cfg.Environment  - HHH000021: Bytecode provider name : javassist
4195 2012-11-28 17:48:52,602 - [main] INFO  org.hibernate.cfg.Configuration  - HHH000043: Configuring from resource: /hibernate.cfg.xml
4195 2012-11-28 17:48:52,602 - [main] INFO  org.hibernate.cfg.Configuration  - HHH000040: Configuration resource: /hibernate.cfg.xml 
```

在我的最后一行之后，我的应用程序刚刚退出函数并且什么都不做:)

如果我进行调试，我可以看到 spring 捕获了一个异常，上面写着：

```
org.hibernate.HibernateException: /hibernate.cfg.xml not found 
```

你能告诉解决这个问题的正确方法是什么吗？

我想扫描包中的实体（注释为 javax ....）而不使用一些`hibernate.cfg.xml`，我不想使用多个`datasources`或`persistence units`.. 我只想以编程方式进行，因为我有动态`datasources`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:58:31.923

我终于回答了我的问题:))

我调试了很多并且没有抛出错误（我不知道为什么）......

我必须创建一个`hibernate.cfg.xml`看起来像这样的：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD//EN" "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration >

    <session-factory>
        <!-- JDBC connection pool (use the built-in) -->
        <property name="hibernate.connection.pool_size">1</property>

        <!-- Enable Hibernate's automatic session context management -->
        <property name="hibernate.current_session_context_class">thread</property>

        <!-- Disable the second-level cache -->
        <property name="hibernate.cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="hibernate.show_sql">true</property>

        <!-- Drop and re-create the database schema on startup -->
        <property name="hibernate.hbm2ddl.auto">update</property>
    </session-factory>

</hibernate-configuration> 
```

然后在我这样使用的代码中

```
public DBReaderImpl(DataSource source)
{
    this.source = source;

    Properties hibernateProperties = new Properties();
    hibernateProperties.setProperty("hibernate.dialect", "org.hibernate.dialect.MySQLDialect");

    hibernateProperties.setProperty("hibernate.connection.driver_class", "com.mysql.jdbc.Driver");
    hibernateProperties.setProperty("hibernate.connection.url", "jdbc:mysql://" + source.getHost() + "/" + source.getDataBase());
    hibernateProperties.setProperty("hibernate.connection.username", source.getUsername());
    hibernateProperties.setProperty("hibernate.connection.password", source.getPassword());
    hibernateProperties.setProperty("hibernate.hbm2ddl.auto", "validate");

    Configuration configuration = new Configuration();
    configuration.setProperties(hibernateProperties);
    configuration.addAnnotatedClass(Route.class);

    SessionFactory sessionFactory = configuration.configure().buildSessionFactory(
            new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry());

    Session session = sessionFactory.openSession();
    session.beginTransaction();

    List<Route> routes = session.createQuery("SELECT r FROM Route r").list();

    for (Route route : routes)
    {
        System.out.println(route);
    }

    session.close();
} 
```

也许我会使用反射来读取我的所有`@Entity`类以将所有带注释的类添加到我的配置中

# ios - ios：从子viewController获取父弹出框的大小？

> ID：13609113
> 
> 赞同：2
> 
> 时间：2012-11-28T15:53:54.983
> 
> 标签：ios, ipad, viewcontroller, popover

我有一个视图控制器，它显示在弹出框内。我试图弄清楚如何调整 viewController 的视图（viewController 的 self.view）以匹配弹出框。

我认为视图会自动调整大小以适合弹出框；出于某种原因，它不是。出于某种原因，视图的框架是整个屏幕的大小。

我该怎么做：检测周围视图控制器的大小，以便调整视图大小；或者，使视图自动调整大小以适应弹出框？

注意：这是一个嵌入到其他人的应用程序中的类，所以我无法控制弹出框大小本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:05:44.717

弄清楚我做错了什么：我正在查看 viewDidLoad 方法中的帧大小。出于某种原因，它在那个时候并不总是有效的。

检查帧大小的正确位置是 viewDidAppear；它似乎在那里有效。不过，诚然，我并没有在每一个极端情况下都检查过这个，所以 YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:41:05.407

覆盖`contentSizeForViewInPopover`您的视图控制器并返回您需要弹出框的大小。因此，它以某种方式反过来工作，包含的视图控制器让弹出框知道它应该有多大。我认为默认情况下弹出框是 320px x 1100px。如果你覆盖了我上面提到的方法，你就会把它放大到你想要的大小，即使代码嵌入到应用程序中并且你无法控制它。

# git - Dart - 如何检查 Git 是否安装正确？

> ID：13609117
> 
> 赞同：3
> 
> 时间：2012-11-28T15:54:04.780
> 
> 标签：git, dart

所以我正在使用 Tortoise Git，我正在尝试从 git 安装 json_object 包。运行 pub install 时出现此错误：

> 无法从 Git (git://github.com/chrisbu/dartwatch-JsonObject.git) 安装“json_object”。请确保 Git 已正确安装。

如何确保 Git 安装正确？我正在使用 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:58:42.333

这可能与[问题 4947有关](http://code.google.com/p/dart/issues/detail?id=4947)

> 从安装了 git 的 Windows shell 运行 pub 并在以下位置可用`PATH`：

```
D:\Tools\dart\dart-sdk\bin\pub install                                                                                
Cannot install 'dartlib' from Git (git://github.com/kevmoo/dartlib.git).                                                                        
Please ensure Git is correctly installed.     
git --version                                                                                                         
git version 1.7.7.1.msysgit.0 
```

> 似乎，这个问题与[问题 1705](http://code.google.com/p/dart/issues/detail?id=1705)相关，因为 git 可以作为`git.cmd`.
> 
> 将 " "替换`git`为 " `git.cmd`" 在`pub`的源 (`io.dart`和`git_source.dart`) 修复`pub`我的环境。

# python - 让 Python 的 argparse 接受子解析器的单字符缩写？

> ID：13609118
> 
> 赞同：7
> 
> 时间：2012-11-28T15:54:07.170
> 
> 标签：python, command-line, argparse

我正在使用`argparse`'s 优秀的子解析器系统来制作一个接受许多不同命令的命令行程序。根据我的阅读，`argparse`当参数明确时，会自动接受参数的单字符缩写。我想让它对子解析器做同样的事情。如果我像这样设置我的子解析器：

```
 foo_parser = subparsers.add_parser('foo')
    # ... set up arguments and handler ...

    bar_parser = subparsers.add_parser('bar')
    # ... set up arguments and handler ... 
```

然后我希望解析器`myprogram f arg0`接受`myprogram foo arg0`. 但事实并非如此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T16:24:36.117

从 argparse 文档中不清楚它是否支持 subparser 的这种自动缩写，但您可以像这样显式设置别名：

```
foo_parser = subparsers.add_parser('foo', aliases=['f']) 
```

另一方面，[支持](https://docs.python.org/dev/library/argparse.html#argument-abbreviations-prefix-matching)参数缩写。

# css - 如果@font-face 中列出了多个源，它们是否都加载到客户端？

> ID：13609119
> 
> 赞同：29
> 
> 时间：2012-11-28T15:54:09.317
> 
> 标签：css, font-face

我正在寻求优化我的网站的速度，并且想知道浏览器只会从以下代码或所有字体文件中加载他们需要的文件：

```
@font-face {
    font-family: 'Proxima Nova';
    src: url('proximanova-regitalic-webfont.eot');
    src: url('proximanova-regitalic-webfont.eot?#iefix') format('embedded-opentype'),
         url('proximanova-regitalic-webfont.woff') format('woff'),
         url('proximanova-regitalic-webfont.ttf') format('truetype'),
         url('proximanova-regitalic-webfont.svg#proxima_nova_rgitalic') format('svg');
    font-weight: normal;
    font-style: italic;
} 
```

另外，这是做@font-face 的最佳方式吗？是否有任何其他策略可以减少用户的加载时间？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-28T16:04:28.210

一个典型的浏览器应该尝试一个一个地加载列表中的字体，这取决于它支持的格式，从列表中的第一个开始。一旦它获得一个它可以使用的字体文件，它就不会尝试加载列表中的任何其余文件。如果浏览器不支持特定格式，则*永远*不应尝试加载该字体；它应该直接移动到下一个来源并查看它。

这类似于浏览器在`font-family`属性中使用字体堆栈的方式。

当然，并非所有浏览器的行为都符合规范。某些浏览器（例如 IE）会尝试下载尽可能多的字体或以意想不到的方式解析规则；有关更多信息和研究，请参阅评论。

CSS 已经被设计为通过这种顺序方法帮助最小化加载时间和请求数量。如果您的字体需要很长时间才能从您自己的服务器到达，请考虑使用快速 CDN，例如 Google Web Fonts、Typekit 或 Adob​​e Edge。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-22T15:52:22.113

为了回答这个问题，我引用了以下**W3C**文档中的相关段落：

[CSS 字体模块第 3 级](http://www.w3.org/TR/css-fonts-3/)
W3C 候选推荐 2013 年 10 月 3 日

（在引用的材料中，请注意我**强调**了与问题最相关的那些句子。）

* * *

[4.1`@font-face`规则](http://www.w3.org/TR/css-fonts-3/#font-face-rule)

> **该[`@font-face`](http://www.w3.org/TR/css-fonts-3/#at-font-face-rule)规则允许链接到在需要时自动获取和激活的字体。**这允许作者选择与给定页面的设计目标密切匹配的字体，而不是将字体选择限制为给定平台上可用的一组字体。一组字体描述符定义了字体资源在本地或外部的位置，以及单个面部的样式特征。[`@font-face`](http://www.w3.org/TR/css-fonts-3/#at-font-face-rule) 可以使用 多个规则来构建具有各种面的字体系列。**使用 CSS 字体匹配规则，用户代理可以有选择地只下载给定文本所需的那些面孔。**

[4.3 字体参考：`src`描述符](http://www.w3.org/TR/css-fonts-3/#src-desc)

> 此描述符指定包含字体数据的资源。规则必须[`@font-face`](http://www.w3.org/TR/css-fonts-3/#at-font-face-rule)有效。它的值是一个优先的、以逗号分隔的外部引用列表或本地安装的字体名称。当需要字体时，用户代理会遍历列出的引用集，使用第一个可以成功激活的引用。**包含无效数据的字体或未找到的本地字体将被忽略，并且用户代理会加载列表中的下一个字体。**
> 
> ...
> 
> 外部引用由一个 URL 组成，后跟一个可选的提示，描述该 URL 引用的字体资源的格式。格式提示包含以逗号分隔的格式字符串列表，这些格式字符串表示众所周知的字体格式。**如果格式提示仅指示不受支持或未知的字体格式，则符合标准的用户代理必须跳过下载字体资源。如果没有提供格式提示，用户代理应该下载字体资源。**
> 
> ```
>     /* 如果可能，加载 WOFF 字体，否则使用 OpenType 字体 */
>     @字体脸{
>       字体系列：正文；
>       src: url(ideal-sans-serif.woff) 格式("woff"),
>            url(basic-sans-serif.ttf) 格式("opentype");
>     }
> 
> ```

# java - 如何检查输入是否为 int 并且在两个值之间

> ID：13609121
> 
> 赞同：2
> 
> 时间：2012-11-28T15:54:12.150
> 
> 标签：java, user-input, java.util.scanner

我创建了一个方法来查看用户输入的值是否是 type`int`并且在`liminf`and之间`limsup`。它返回值，因此我可以将其用作菜单选项。字符串`message`告诉用户输入一些东西，而`error`告诉用户使用 和 之间的`limunf`数字`limsup`。

我的问题是，例如，如果用户输入数字 10 并且`liminf`是 7 和`limsup`e 9，它的运行就像数字 10 在`limsup`和之间一样`liminf`。

```
public static int readInput(String message, String error, int liminf, int limsup, Scanner rd){

    int option = 0;
    do {
        option = rd.nextInt();
        System.out.println(message);
        while (!rd.hasNextInt()) {
            System.out.println("Please enter the option");
            rd.nextLine();
        }
        option = rd.nextInt();
        canal.nextLine();
    } while (option > limsup || option < liminf);

    return option;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:13:59.357

当你检查输入时，你需要做两件事：

1.  检查该值是否实际上是一个整数
2.  检查值是否在范围内

要检查一个值是否为整数，您可以使用两种方法之一。使用`hasNextInt`在您的`Scanner`，或使用`Integer.parseInt`和捕捉`NumberFormatExceptions`。您在评论中说您不能使用第二个，所以我们将使用第一个。

你总是必须`hasNextInt`在你打电话之前打电话`nextInt`，所以你可以这样做：

```
int option = 0;
System.out.println(message);
System.out.println("Please enter the option");
while (!rd.hasNextInt()) {
    rd.nextLine(); // Clears the invalid input
    System.out.println("Please enter the option");
}
option = rd.nextInt(); 
```

这将循环直到用户输入一个`int`，然后它会得到那个`int`。请注意，在调用`hasNextInt`之前不调用`nextInt`会导致错误，如果您尝试输入非数字，则会在您当前的代码中发生这种情况。

接下来，您需要进行边界检查。如果我没记错的话，你希望它介于`limsup`and `liminf`, where之间。`limsup > liminf`我们需要确定允许这样做的条件。

*之间*是通过使用*大于较低的数字和小于较高的数字*来实现的。在这种情况下，就是`option >= liminf && option <= limsup`. 我们想在*不是*这个的时候循环，所以我们可以把整个东西包起来`!()`：

```
int option = 0;
do {
    System.out.println(message);
    System.out.println("Please enter the option");
    while (!rd.hasNextInt()) {
        rd.nextLine(); // Clears the invalid input
        System.out.println("Please enter the option");
    }
    option = rd.nextInt();
} while (!(option >= liminf && option <= limsup));

return option; 
```

我会让你弄清楚如何/在哪里打印错误消息，但这应该让你开始。

值得注意：

*   `hasNextInt`, `nextInt`,`nextLine`等都将*等待*用户输入，如果你使用`Scanner rd = new Scanner(System.in);`
*   需要使用`nextLine`清除旧输入并强制用户输入新输入
*   虽然德摩根定律很酷，但反转条件的最简单方法就是将其包装在`!()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:08:30.037

像这样改变你的条件`while`：

```
while (option <= limsup && option >= liminf); 
```

在您当前的条件下，当您拥有`option = 10`然后`limsup = 9`您的条件`option > limsup`将评估为`true`并且当您使用时`||`（或操作符），即使第二个条件评估为`false`整个表达式将评估为`true`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:57:30.343

您可以检查输入是否为整数，`Integer.parseInt(input);`例如：-

```
 try {

  String s = "a";
  int i = Integer.parseInt(s);
  return true;
  }

catch(NumberFormatException nfe){return false;} 
```

并改变条件，如： -

```
while (option <= limsup && option >= liminf); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:28:54.387

您的检查错误（选项> limsup || 选项< liminf）查看选项> limsup，10 大于9，这就是您遇到此问题的原因

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T16:13:43.407

我相信，您`readLine`正在使它忽略下一个令牌（10）本身，因为它在`hasNextInt`检查单个令牌时读取整行。尝试如下简单（使用`next`并删除额外的`rd.nextInt()`作为循环中的第一条语句）：

```
 do {
    System.out.println(message);
    while (!rd.hasNextInt()) {
        System.out.println("Please enter the option");
        rd.next();
    }
    //now the next token is int
    option = rd.nextInt();
    //flush the new line if any
    rd.nextLine();
} while (option > limsup || option < liminf); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T16:01:56.247

以下是测试字符串是否为整数的方法：

```
private static boolean isInteger( String s ){

    try{
        Integer.parseInt(s);
        return true;
    catch( Exception e ){
        return false;
    }

} 
```

但是，由于您使用的是 nextInt() 函数，因此这不是必需的，因为无论如何您只能以这种方式获得整数输入。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T16:06:01.313

```
while ((option > limsup) || (option < liminf)) 
```

# actionscript-3 - 为什么不能是“如果为空，则等到不为空”而不是其他方式

> ID：13609123
> 
> 赞同：0
> 
> 时间：2012-11-28T15:54:18.837
> 
> 标签：actionscript-3, flash

我希望能够检查数组中的空条目，如果它们是空条目，则打印一条消息。

然后，当没有我想继续该程序时。

我真的看不出我做错了什么。

```
var mainArray:Array = new Array (6);

function addNumbers(event:MouseEvent):void
{

    userNumber1.selectable = false;
    userNumber1.type = TextFieldType.DYNAMIC;
    userNumber2.selectable = false;
    userNumber2.type = TextFieldType.DYNAMIC;
    userNumber3.selectable = false;
    userNumber3.type = TextFieldType.DYNAMIC;
    userNumber4.selectable = false;
    userNumber4.type = TextFieldType.DYNAMIC;
    userNumber5.selectable = false;
    userNumber5.type = TextFieldType.DYNAMIC;
    userNumber6.selectable = false;
    userNumber6.type = TextFieldType.DYNAMIC;

    mainArray[0] = Number(userNumber1.text);
    mainArray[1] = Number(userNumber2.text);
    mainArray[2] = Number(userNumber3.text);
    mainArray[3] = Number(userNumber4.text);
    mainArray[4] = Number(userNumber5.text);
    mainArray[5] = Number(userNumber6.text);

    noNull();
}

    function noNull()
    {
        var e;
        var noNulls:Boolean = new Boolean();
        noNulls = false;
        for (e = 0; e < 6; e++)
        {
            if (mainArray[e] == null)
            {
                genericText.text = "Make sure all boxes are filled!";
            }
            else
            {
                noNulls = true;
            }

        }

        if (noNulls == true)
        {
            duplicateCheck();
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:58:08.220

```
 noNulls = true;
    for (e = 0; e < 6; e++)
    {
        if (mainArray[e] == 0)
        {
            genericText.text = "Make sure all boxes are filled!";
            noNulls = false;
            break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:03:21.397

如果我们不在 TextField 中输入任何值，那么“text”属性将为空字符串，而不是 NULL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T16:06:48.053

可能是因为将空字符串（如果文本字段为空）转换为数字会给出“0”，而将数字“0”转换为 null 会给出错误：

```
 var arr:Array = [];
 arr[0] = Number("");
 trace(arr[0] == null); //false 
```

如果您键入变量，甚至不可能将 Number 与 null 进行比较：

```
var x:Number = Number("");
trace(x == null);   //gives a compile error 
```

回答您的评论；设置警告文本后，您可能应该休息一下：

```
genericText.text = "Make sure all boxes are filled!";
break; 
```

否则，如果下一个文本字段被正确填充，它将再次用 false 覆盖 noNulls 值。此外，无论如何都不需要检查其余字段，因为其中一个已经无效。

# ios - 按下快门按钮时ios相机执行动作

> ID：13609129
> 
> 赞同：0
> 
> 时间：2012-11-28T15:54:43.377
> 
> 标签：ios

在我的应用程序中，我想知道在相机视图上按下快门按钮的确切时间。为此，我有一个函数可以在调用原子钟时准确地获取时间。我想附加该功能，以便在按下快门按钮时立即调用。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:00:26.523

以下是 PhotoPicker 类的实现方式。[http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196](http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196) 复制粘贴代码并按照您想要的方式添加/修改它

# android - 在 gsp 中，即使我更改纬度和经度 emuletar 仍然显示相同的位置，为什么它会这样反应？以及我如何纠正它？

> ID：13609134
> 
> 赞同：-2
> 
> 时间：2012-11-28T15:54:57.130
> 
> 标签：android, gps

这是我的代码，它加载了 normali，但是当我更改纬度和经度时，它不显示相应的位置。我使用模拟器来测试程序。我通过使用模拟器控制更改纬度和经度。

```
package com.rumes.gspuse;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

public class Main extends MapActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        MapView map=(MapView) findViewById(R.id.map);

        map.setBuiltInZoomControls(true);

        final MapController controller=map.getController();
        LocationManager manager=(LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
        LocationListener listner=new LocationListener() {

            @Override
            public void onStatusChanged(String provider, int status, Bundle extras) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderEnabled(String provider) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderDisabled(String provider) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onLocationChanged(Location location) {
                controller.setCenter(new GeoPoint((int)location.getLatitude(), (int)location.getLongitude()));

            }
        };

        manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,listner);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:00:34.397

您需要 latitudeE6 和 longitudeE6，这就是为什么您在地图上看不到任何差异的原因！

```
if(location != null) // avoid crash (check for null)..
    controller.setCenter(new GeoPoint((int)(location.getLatitude() * 1E6), (int)(location.getLongitude() * 1E6))); 
```

# c# - 尝试将文件路径名发送到构造函数

> ID：13609143
> 
> 赞同：1
> 
> 时间：2012-11-28T15:55:28.177
> 
> 标签：c#, winforms

我正在尝试将从我的 openButton 获取的路径名发送到构造函数，以便我可以使用其中的信息。任何人都可以看到如何做到这一点？

```
namespace GPSCalculator
{
    public partial class Form1 : Form
    {
       private String[] items;
       int count = 0;
       string FileName;
       public Form1()
        {
            InitializeComponent();
            List<float> inputList = new List<float>();
            TextReader tr = new StreamReader(FileName);
            String input = Convert.ToString(tr.ReadToEnd());
            items = input.Split(',');

        }
private void openToolStripMenuItem_Click(object sender, EventArgs e)
        {
            OpenFileDialog ofd = new OpenFileDialog();
            ofd.Filter = "Csv Files (*.csv)|*.csv|Text files (*.txt)|*.txt|All files (*.*)|*.*";
            if (ofd.ShowDialog(this).Equals(DialogResult.OK))
            {
                var FileName = (ofd.FileName);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:03:07.697

你不能，表单上的按钮不能调用它自己的构造函数，所以你需要将构造函数中的一些操作移动到一个单独的方法中。

```
namespace GPSCalculator
{
    public partial class Form1 : Form
    {
        private string[] items;
        private int count = 0;
        private string fileName;

        public Form1()
        {
            InitializeComponent();
        }

        private void openToolStripMenuItem_Click(object sender, EventArgs e)
        {
            var ofd = new OpenFileDialog();
            ofd.Filter = "Csv Files (*.csv)|*.csv|Text files (*.txt)|*.txt|All files (*.*)|*.*";
            if (ofd.ShowDialog(this).Equals(DialogResult.OK))
            {
                // I've changed this to refer to the field and removed un-necessary parenthesis
                this.fileName = ofd.FileName;
            }
        }

        private void ReadFileContents()
        {
            List<float> inputList = new List<float>(); // This doesn't get used?!

            // StreamReader is IDisposable so it should be used in a using statement
            using(TextReader tr = new StreamReader(this.fileName))
            {
                string input = Convert.ToString(tr.ReadToEnd());
                this.items = input.Split(',');
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:01:12.293

```
 //add filename to the constructor
       public Form1(string filename)
        {
            InitializeComponent();
            List<float> inputList = new List<float>();
            //use the filename from the constructor to open the StreamReader
            TextReader tr = new StreamReader(filename);
            //set your FileName filename passed in
            FileName = filename;
            String input = Convert.ToString(tr.ReadToEnd());
            items = input.Split(',');

        } 
```

# c++ - 来自同一物理类的多重继承

> ID：13609147
> 
> 赞同：0
> 
> 时间：2012-11-28T15:55:39.060
> 
> 标签：c++, inheritance

我有一个从 Qt`Onote`扩展的类。`QGraphicsItem`

我想创建另一个类，其中包含属于该旋律`Cmelody`的项目列表以及所有这些音符共享的一些值，例如.`Onote``iTempo`

我希望`Onotes`从物理上继承几个**相同的** `Cmelody`，因为它们都需要相互识别，并且我不能将两个类都包含在两个类中？似乎我需要虚拟继承，但有了它，每个`Onote`都有它自己的`Cmelody`.

是否有可能创建一个系统，例如，`Cmelody c1`将继承`Onote o1`和`Onote o2`; 并且`Cmelody c2`会继承`Onote o3`,`Onote o4`和`Onote o5`? 当我更改 a 中的一个值时，它的`Cmelody`所有子级在从其父级`Onote`读取它时都会获得相同的值。`Cmelody`

为了演示，类结构大致如下所示：

```
class Cmelody
{
public:
    Cmelody(void);
    ~Cmelody(void);
std::vector<Onote*> notes;
//a handful of variables and a function..
};

class Onote : public QGraphicsitem
{
public:
    Onote(QObject* parent);
    ~Onote(void);
//various variables and some functions listed..
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:19:28.270

如果我理解你的问题，你所需要的就是这个

```
class Onote;   // <== Forward declaration of Onote
class Cmelody
{
public:
    Cmelody(void);
    ~Cmelody(void);
std::vector<Onote*> notes;
//a handful of variables and a function..
};

class Onote : public QGraphicsitem
{
public:
    Onote(Cmelody* parent) : parent_(parent) {} // <=== Save a pointer to Cmelody
    ~Onote(void);
//various variables and some functions listed..
private:
   Cmelody* parent_;
};

int main ()
{
   Cmelody melody;
   melody.notes.push_back (new Onote (&melody));
   melody.notes.push_back (new Onote (&melody));
   melody.notes.push_back (new Onote (&melody));
   melody.notes.push_back (new Onote (&melody));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:22:33.563

根据您的描述，我认为您是说音符应该指的是包含它们的旋律；这与继承是一个非常不同的概念。为此，它们需要包含对旋律的引用或指针：

```
class Onote : public QGraphicsitem
{
public:
    Onote(QObject* parent, CMelody* melody) : melody(melody) {}

//various variables and some functions listed..

private:
    CMelody* melody;
}; 
```

继承意味着音符*是*旋律（显然，就像它*是*图形项目一样）-事实并非如此。

# c - C语言中的模数

> ID：13609153
> 
> 赞同：-4
> 
> 时间：2012-11-28T15:55:55.847
> 
> 标签：c, modulus

我在使用这行代码时遇到了一些问题：（对不起，它是丹麦语）

```
 case 1 :
     system("cls");
       printf("K maa kun have en veardi mellem 1 og 20\nIndtast k:");
        scanf("%d", &k1);
  while(!(k1>=1 && k1 <=20))//Starten på fejlsikret tilstand
    {
     printf("K er for hoej eller har en forkert veardi.\nProev igen:  ");
     fflush(stdin);
     scanf("%d", &k1);
    }//slutning på fejlsikret tilstand

 system("cls");
 printf("X maa kun have en veardi mellem 1 og 20\nIndtast din modstanders tal: ");
 scanf("%d", &x1);
while(!(x1<21))//Starten på fejlsikret tilstand
 {
 printf("X er for høj.");
 scanf("%d", &x1);
 }//slutning på fejlsikret tilstand

            newmove=(21-x1)%(k1+1)+x1;
            printf("Du skal sige = %d", newmove);
            printf("\n\n\nTryk 1 og afslut med Enter for at komme tilbage til start");
            scanf("%d", &m);
            continue; 
```

但似乎模数部分计算错误。eks：如果我输入数字：x1 = 12 和 k1 = 12，它会给我 20。但应该是 17。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:05:58.063

新动作应该是`21`

```
newmove=(21-x1) % (k1 + 1) + x1;
        (21-12) % (12 + 1) + 12
        (  9    %    13  ) + 12
                9          + 12
         21 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:05:16.053

新移动=(21-x1)%(k1+1)+x1;

所以如果 x1=12 并且 k1=12

```
newmove=(21-12)%(12+1)+12;
newmove=9%13+12;
newmove=9+12
newmove=21 
```

为什么应该是 17 ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:05:37.287

我希望你的结果是 21。将 x1=12 和 k1=12 代入这个表达式：

```
(21-x1)%(k1+1)+x1 
```

给出：

```
(21-12)%(12+1)+12 = (9)%(13)+12 = 9 + 12 = 21 
```

# delphi - Delphi 5 Unknown Publisher 版本信息

> ID：13609155
> 
> 赞同：1
> 
> 时间：2012-11-28T15:56:09.747
> 
> 标签：delphi, delphi-5, partial-trust

我在 Delphi 5 中构建了许多可执行应用程序，它们通过网络与数据库通信。在我的 Windows 7 PC 和其他 PC 上，它们在没有任何警告的情况下运行，但在某些客户端 PC 上，它会发出“未知发布者”警告，看起来不专业，可能会导致其他权限问题。

我的问题如下：

*   可以在设计时将任何内容添加到应用程序中，例如在版本信息中以使其成为更受信任的应用程序。这在Delphi5中实际上可能吗？
*   作为应用程序构建者，我是否必须向 Microsoft 提出任何要求，以帮助他们信任我的应用程序？
*   如果上述情况失败，如何在 Windows 7 中禁用“受信任的发布者”警告？（抱歉，这不是德尔福问题）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:21:33.513

您需要使用代码签名安全证书对可执行文件进行签名。这就是这些客户端 PC 上的警告所指的内容 - Windows 无法验证可执行文件的完整性。该证书标识了谁创建了可执行文件，并确保在您签署后可执行文件未被修改。

# php - 如何从 simplexml_load_file 中获取值？

> ID：13609159
> 
> 赞同：0
> 
> 时间：2012-11-28T15:56:22.037
> 
> 标签：php, xml, api

您好，我需要从 Google Geocode 打印 long 和 lat 值。我已经使用以下方法检索了 xml：

```
$url ="http://maps.googleapis.com/maps/api/geocode/xml?address=se18lu&sensor=false";
$result = simplexml_load_file($url); 
```

它返回以下内容：

```
SimpleXMLElement Object
(
    [status] => OK
    [result] => SimpleXMLElement Object
        (
            [type] => postal_code
            [formatted_address] => Bankside, London Borough of Lambeth, London SE1 8LU, UK
            [address_component] => Array
                (
                    [0] => SimpleXMLElement Object
                        (
                            [long_name] => SE1 8LU
                            [short_name] => SE1 8LU
                            [type] => postal_code
                        )

                    [1] => SimpleXMLElement Object
                        (
                            [long_name] => Bankside
                            [short_name] => Bankside
                            [type] => Array
                                (
                                    [0] => sublocality
                                    [1] => political
                                )

                        )

                    [2] => SimpleXMLElement Object
                        (
                            [long_name] => London
                            [short_name] => London
                            [type] => Array
                                (
                                    [0] => locality
                                    [1] => political
                                )

                        )

                    [3] => SimpleXMLElement Object
                        (
                            [long_name] => London Borough of Lambeth
                            [short_name] => London Borough of Lambeth
                            [type] => Array
                                (
                                    [0] => administrative_area_level_3
                                    [1] => political
                                )

                        )

                    [4] => SimpleXMLElement Object
                        (
                            [long_name] => Greater London
                            [short_name] => Gt Lon
                            [type] => Array
                                (
                                    [0] => administrative_area_level_2
                                    [1] => political
                                )

                        )

                    [5] => SimpleXMLElement Object
                        (
                            [long_name] => United Kingdom
                            [short_name] => GB
                            [type] => Array
                                (
                                    [0] => country
                                    [1] => political
                                )

                        )

                )

            [geometry] => SimpleXMLElement Object
                (
                    [location] => SimpleXMLElement Object
                        (
                            [lat] => 51.5034227
                            [lng] => -0.1080750
                        )

                    [location_type] => APPROXIMATE
                    [viewport] => SimpleXMLElement Object
                        (
                            [southwest] => SimpleXMLElement Object
                                (
                                    [lat] => 51.5020958
                                    [lng] => -0.1094971
                                )

                            [northeast] => SimpleXMLElement Object
                                (
                                    [lat] => 51.5047938
                                    [lng] => -0.1067991
                                )

                        )

                    [bounds] => SimpleXMLElement Object
                        (
                            [southwest] => SimpleXMLElement Object
                                (
                                    [lat] => 51.5032242
                                    [lng] => -0.1087301
                                )

                            [northeast] => SimpleXMLElement Object
                                (
                                    [lat] => 51.5036654
                                    [lng] => -0.1075661
                                )

                        )

                )

        )

) 
```

一切都很好。我现在需要从 xml 中检索 long 和 tat 值吗？我如何**只**打印/显示这些值“lat”？？？：例如

结果->几何->位置->纬度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:05:40.000

就像你指出的那样：

```
$url ="http://maps.googleapis.com/maps/api/geocode/xml?address=se18lu&sensor=false";
$result = simplexml_load_file($url);
echo $result->result->geometry->location->lat; 
```

有时您必须将 simpleXML 对象转换为字符串。然后你可以使用：

```
echo (string) $result->result->geometry->location->lat; 
```

或者

```
echo $result->result->geometry->location->lat->__toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T21:19:49.217

这是我使用的，部分基于[这个答案](https://stackoverflow.com/a/21750845/721073)。

```
function get_geocode_arr($address)
{

    $arr_location = array();
    $google_api_request_key = 'YOUR_KEY_HERE';

    $address    = str_replace (" ", "+", urlencode($address));

    $fullurl    = "https://maps.googleapis.com/maps/api/geocode/json?address=$address&sensor=true&key=$google_api_request_key";
    $string     = file_get_contents($fullurl); // get json content
    $json_res   = json_decode($string, true); //json decoder

    foreach ($json_res['results'][0]['address_components'] as $component)
    {

        switch ($component['types']) {
            case in_array('street_number', $component['types']):
                $arr_location['street_number'] = $component['long_name'];
                break;
            case in_array('route', $component['types']):
                $arr_location['street'] = $component['long_name'];
                break;
            case in_array('sublocality', $component['types']):
                $arr_location['sublocality'] = $component['long_name'];
                break;
            case in_array('locality', $component['types']):
                $arr_location['locality'] = $component['long_name'];
                break;
            case in_array('administrative_area_level_2', $component['types']):
                $arr_location['admin_2'] = $component['long_name'];
                break;
            case in_array('administrative_area_level_1', $component['types']):
                $arr_location['admin_1'] = $component['long_name'];
                break;
            case in_array('postal_code', $component['types']):
                $arr_location['postal_code'] = $component['long_name'];
                break;
            case in_array('country', $component['types']):
                $arr_location['country'] = $component['long_name'];
                break;
        }

    }

    $arr_location['location_latitude'] = $json_res['results'][0]['geometry']['location']['lat'];
    $arr_location['location_longitude'] = $json_res['results'][0]['geometry']['location']['lng'];
    $arr_location['formatted_address'] = $json_res['results'][0]['formatted_address'];

    return $arr_location;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:05:03.623

您需要单独访问每个项目，而不是一次性完成。但是，您需要确保将值转换为字符串、int、float 或 w/e，因为简单 xml 元素的默认设置是使每个项目成为 SimpleXmlObject。因此，对于几何的位置 lat 项目，您将执行以下操作：

```
echo "Geometry Location's Lat: ".((string)$result->result->geometry->location->lat); 
```

其余的纬度也是如此

# audio - 通过比较测量噪音水平/声音质量

> ID：13609160
> 
> 赞同：2
> 
> 时间：2012-11-28T15:56:24.003
> 
> 标签：audio, compare, wav, noise

好的，所以我使用了这个 VoIP 服务，需要对传输的声音质量进行简单的测试。2 个虚拟机将“说话”，测试将由第三台计算机完成。我们有声音的记录和收到的声音的另一个记录（.wav）。测试电脑接收到两个文件（前后传输，后传输应该有一点噪音或错误），需要比较两者之间的音质。唯一相关的信息是输出，说明接收器端的质量有多好。（大约 0.0 - 1.0 分）我在比较录制的 2 种声音时遇到了很多麻烦，任何见解和帮助都会很棒。哦，是的，这必须是自动化的，所以没有人会听这两张唱片并说出其中一张有多糟糕。计算机应该能够确定最终质量。

抱歉有任何错误，英语不是我的第一语言，再次感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:08:12.687

这个问题非常有趣，但不幸的是，由于它是一个悬而未决的问题，因此您获得完美解决方案的机会很小。您可能对[PESQ](http://en.wikipedia.org/wiki/PESQ)（语音质量的感知评估）感兴趣（实施网址：[http](http://www.itu.int/rec/T-REC-P.862-200102-I/en) ://www.itu.int/rec/T-REC-P.862-200102-I/en ）

# windows - Windows 服务看不到 Shell_TrayWnd

> ID：13609166
> 
> 赞同：3
> 
> 时间：2012-11-28T15:56:52.187
> 
> 标签：windows, service, taskbar

我需要通过 Windows 服务隐藏任务栏和开始按钮。

在控制台程序中，我可以成功调用`FindWindow`和/或`EnumWindows`获取`"Shell_TrayWnd"`窗口，然后使用`ShowWindow(hwnd, SW_HIDE)`.

但是当服务执行时`FindWindow("Shell_TrayWnd", NULL)`它返回`NULL`，并且当服务执行时`EnumWindows`它得到一个不包括`"Shell_TrayWnd"`窗口的不完整列表。

谁能建议服务如何查看`"Shell_TrayWnd"`窗口，或建议隐藏任务栏和开始按钮的替代方法（在服务中有效）？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-21T20:02:45.713

为服务提供 UI（或以其他方式与 UI 元素交互）的正确方法是提供在用户上下文中运行并使用某种 IPC 方法（可能是 RPC，可能是消息传递）与服务通信的 GUI 客户端。特权服务中的 UI 处理一直是一个安全漏洞。

如果您只是想要一个计算机进程来杀死任务栏，那么服务既不需要也没有帮助。将计划任务配置为在登录时运行。或者将注册表设置为启动自定义 shell 而不是 explorer.exe。除了用户自己的帐户之外，您没有做任何需要特权的事情。

为避免控制台窗口闪烁，请为`WINDOWS`子系统构建程序，或`editbin /SUBSYSTEM:WINDOWS`在构建完成后更改 PE 标头中的标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:18:34.653

不幸的是，服务无法访问窗口。这是服务的（设计的）限制。

# cluster-analysis - 在 3D 矩阵中查找协变区域

> ID：13609167
> 
> 赞同：2
> 
> 时间：2012-11-28T15:56:53.020
> 
> 标签：cluster-analysis, covariance, correlation, region, areas

我想知道是否有人对如何解决以下问题提出建议。

我有一个大小为 n*p*t 的矩阵。我想在平面 n*p 中找到共同变化的区域（在 t 维度中）。换句话说，平面 (n*p) 上的子区域，其值沿 t 维度一起变化。

一个例子：

` t=1
[ 0 0 0
[ 0 1 1
[ 0 1 1

```
--->

t=2

[ 3 2 7   
[ 0 2 2   
[ 4 2 2   ` 
```

因此，底角将被分配给一个组，因为值共同变化。

您对如何解决此类问题有任何想法吗？

谢谢！

# c++ - 带有未插入数据的对象的链表

> ID：13609169
> 
> 赞同：0
> 
> 时间：2012-11-28T15:57:09.047
> 
> 标签：c++, object, visual-c++, linked-list

我正在尝试将客户存储在链接列表中。我是 C++ 新手，所以我尝试将 int 链表调整为 Customer 链表。这是我的客户和列表代码以及它的主要运行。我得到的错误是：

> 1>c:\users\tashiemoto\desktop\c++\assignmentfinal\assignmentfinal\main4.cpp(12): 错误 C2182: 'addToList' : 非法使用类型 'void' 1>c:\users\tashiemoto\desktop\c++ \assignmentfinal\assignmentfinal\main4.cpp(12): error C2440: 'initializing' : cannot convert from 'Customer *' to 'int'

当我尝试将新数据条目添加到 main.cpp 上的链接列表时会发生这种情况。我在 main 的 addtoList 下总是有一条红线。我认为这与客户有关，但我不确定。

主文件

```
#include <iostream>
#include "customer.h"
#include "list.h"

void main ()

{
    //construction
    LinkedList();

    //add a new node to the last
    void addToList( new Customer("hhht","hhh","hhh","hhhkjk","klio"));

} 
```

列表.h

```
#include "customer.h"

//forward declaration
class Node;

//class definition
class LinkedList
{
public:
    //construction
    LinkedList();

    //add a new node to the last
    void addToList(Customer *data);

    //find an element in list and set current pointer
    void find( int key);

    //get data from element pointed at by current pointer
    Customer* getCurrent(void);

    //delete element pointed at by current pointer
    void deleteCurrent(void);

private:
    //data members
    Node *_begin;       //pointer to first element in list
    Node *_end;     //pointer to last element in list
    Node *_current; //pointer to current element in list
}; 
```

列表.cpp

```
LinkedList::LinkedList()
{
    //initialise node pointers
    _begin = NULL;
    _end = NULL;
    _current = NULL;
}

void LinkedList::addToList(Customer *data)
{
    Node *newNodePtr;

    //craete new instance of Node
    newNodePtr = new Node;

    //set data
    newNodePtr->setData(data);

    //check if list is empty
    if( _begin == NULL) 
    {
        _begin = newNodePtr;
    }
    else
    {
        newNodePtr->setPrevNode(_end);
        _end->setNextNode(newNodePtr);
    }

    //set current pointer end end pointer
    _end = newNodePtr;
    _current = newNodePtr;
} 
```

客户.h

```
 #include <iostream>
   #include<string>

   using namespace std;

   class Customer
   {
       private:
         //
         // class members
         //
         string name; 
         string address;
         string telephone;   
         string sex;
         string dob;

       public:

         // Constructor
         Customer(string init_name, string init_address, string init_telephone, string init_sex, string init_dob);   
         // a print method
         void showPersonDetails(void);

         // This operator is a friend of the class, but is NOT a member of the // class:
         friend ostream& operator <<(ostream& s, Customer& a);

   };  

   // This is the prototype for the overload
    ostream& operator <<(ostream& s, Customer& a);

   #endif 
```

和客户.cpp

```
#include "customer.h"

using namespace std;

Customer::Customer(string init_name, string init_address, string init_telephone, string init_sex, string init_dob)
{
    name = init_name;
    address = init_address;
    telephone = init_telephone;
    sex = init_sex;
    dob = init_dob;
}

ostream& operator <<(ostream& s, Customer& a)
{
        s << "Name : "         << a.name << endl;
        s << "Address : "      << a.address << endl ;
        s << "Telephone : "    << a.telephone << endl;
        s << "Sex : "          << a.sex << endl ;
        s << "Date of Birth : "<< a.dob << endl;
        return s;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:03:00.553

```
void main ()

{
    //construction

    //LinkedList(); <-- This is not valid 

    LinkedList myList;

    //add a new node to the last

   // void addToList( new Customer("hhht","hhh","hhh","hhhkjk","klio")); <-- This
   //                                                                is not valid

    myList.addToList(new Customer("hhht","hhh","hhh","hhhkjk","klio"));

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:03:33.153

好吧，为了让你解决这些错误，声明一个 LinkedList 的实例：

```
LinkedList myList; 
```

并调用该函数：

```
myList.addToList( new Customer("hhht","hhh","hhh","hhhkjk","klio")); 
```

但是您似乎对编写自己的链表的 c++ 最基本元素感到非常困惑——而 STL 无论如何都提供了一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:04:11.500

这些问题似乎相对容易解决：

```
void main ()

{
    // This is wrong, it constructs an unnamed temporary.
    //construction
    // LinkedList();

    // This is how you default construct a LinkedList item
    LinkedList myList;

    // This is wrong, you don't use the full signaure when calling a function
    //add a new node to the last
    // void addToList( new Customer("hhht","hhh","hhh","hhhkjk","klio"));

    // This calls the addToList member function of the myList object
    myList.addToList(new Customer(...));

} 
```

# javascript - jQuery Calculation Plugin - Nutrition Calculator - 单击相关单选按钮添加值

> ID：13609170
> 
> 赞同：1
> 
> 时间：2012-11-28T15:57:09.000
> 
> 标签：javascript, jquery, calculator

我在这里使用 jQuery 计算插件：[http ://www.pengoworks.com/workshop/jquery/calculation/calculation.plugin.htm](http://www.pengoworks.com/workshop/jquery/calculation/calculation.plugin.htm)

这是一个 jsFiddle：http: [//jsfiddle.net/k3edG/4/](http://jsfiddle.net/k3edG/4/)

如您所见，我有多个单选按钮。除了单选按钮，现在 - 我有汇总总计区域中所有营养数据的跨度。

我想要做的是只有当用户选择相关的单选按钮时才计算每个营养项目的总数。

我想过为每个单选按钮做 onclick 事件，但我还没有到任何地方。

有什么想法吗？

```
$(document).ready(function() {

// get the sum of the elements
var calories = $(".caloriesSum").sum();
var fat = $(".fatSum").sum();
var satfat = $(".satfatSum").sum();
var carbs = $(".carbsSum").sum();
var protein = $(".proteinSum").sum();
var sodium = $(".sodiumSum").sum();
var chloresterol = $(".chloesterolSum").sum();

// update the total
$("#totalCalories").text(+ calories.toString());
$("#totalFat").text(+ fat.toString());
$("#totalSatFat").text(+ satfat.toString());    
$("#totalCarbs").text(+ carbs.toString());
$("#totalProtein").text(+ protein.toString());
$("#totalSodium").text(+ sodium.toString());
$("#totalChloresterol").text(+ chloresterol.toString());

}); 

<h4>Pick Your Meal</h4>

        <ul class="options">
            <li>
                <input type="radio" id="wwheatt" name="meal" value="whole_wheat_tortilla"> Whole Wheat Tortilla
                <span class="caloriesSum">280</span>
                <span class="fatSum">6</span>
                <span class="satfatSum">0</span>
                <span class="carbsSum">44</span>
                <span class="proteinSum">8</span>
                <span class="sodiumSum">340</span>
                <span class="chloesterolSum">0</span>
            </li>
            <li>
                <input type="radio" name="meal" value="flour_tortilla"> Flour Tortilla
                <span class="caloriesSum">290</span>
                <span class="fatSum">6</span>
                <span class="satfatSum">2</span>
                <span class="carbsSum">49</span>
                <span class="proteinSum">9</span>
                <span class="sodiumSum">770</span>
                <span class="chloesterolSum">0</span>
            </li>
            <li>
                <input type="radio" name="meal" value="naked"> Naked, zero nutrients
                <span class="caloriesSum">0</span>
                <span class="fatSum">0</span>
                <span class="satfatSum">0</span>
                <span class="carbsSum">0</span>
                <span class="proteinSum">0</span>
                <span class="sodiumSum">0</span>
                <span class="chloesterolSum">0</span>
            </li>
        </ul>

        <h4>Select Your Protein</h4>

        <ul class="options">
            <li>
                <input type="radio" name="protein" value="steak"> Steak
                <span class="caloriesSum">230</span>
                <span class="fatSum">9</span>
                <span class="satfatSum">3</span>
                <span class="carbsSum">3</span>
                <span class="proteinSum">32</span>
                <span class="sodiumSum">170</span>
                <span class="chloesterolSum">90</span>
            </li>
            <li>
                <input type="radio" name="protein" value="carnitas"> Carnitas
                <span class="caloriesSum">210</span>
                <span class="fatSum">9</span>
                <span class="satfatSum">3</span>
                <span class="carbsSum">2</span>
                <span class="proteinSum">29</span>
                <span class="sodiumSum">490</span>
                <span class="chloesterolSum">90</span>
            </li>
            <li>
                <input type="radio" name="protein" value="chicken"> Chicken
                <span class="caloriesSum">190</span>
                <span class="fatSum">2</span>
                <span class="satfatSum">0</span>
                <span class="carbsSum">4</span>
                <span class="proteinSum">35</span>
                <span class="sodiumSum">560</span>
                <span class="chloesterolSum">90</span>
            </li>
            <li>
                <input type="radio" name="protein" value="tofu"> Tofu
            </li>
        </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:09:43.497

非常基础；但这是你所追求的吗？[http://jsfiddle.net/k3edG/3/](http://jsfiddle.net/k3edG/3/)

我所做的是向`<li />`具有选定选项的活动类添加一个活动类。然后我修改了你原来的更新函数，只添加活动项的值。

我假设您将获得复选框项目和收音机的营养信息

希望有帮助：D

# maven - Maven：如何按特定顺序解包依赖项？

> ID：13609174
> 
> 赞同：0
> 
> 时间：2012-11-28T15:57:26.100
> 
> 标签：maven, maven-dependency-plugin

我的项目依赖于许多 ZIP 资源。

使用“maven-dependency-plugin”和它的“unpack-dependencies”，我知道如何解压每个依赖项。

但是（由于不同的原因，我无法在这里解释），我必须以特定的顺序 (*) 解压缩依赖项。

是否可以按特定顺序解包，或者是否可以管理依赖项顺序？

谢谢，

泽维尔

(*) 有一些文件具有相同的名称，我必须用另一个依赖项覆盖来自一个依赖项的一些文件......

[编辑][解决方案]

感谢您的回答。

我找到了[copy-maven-plugin](http://evgeny-goldin.com/wiki/Copy-maven-plugin)的解决方案。

这是我的问题的解决方案示例： [https ://gist.github.com/4164769](https://gist.github.com/4164769)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:20:26.703

与 Maven 的大多数情况一样，我认为有几种方法可以做到这一点，您必须自己找到最优雅的方法。我会给你一个想法，我将如何开始。

首先，您可以使用[依赖插件的解包 mojo](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html)来解包一组特定的工件；您在执行的配置中专门命名工件。您可以在这里命名多个，它们将按顺序处理。但是，如果这不起作用，您始终可以根据需要配置尽可能多的此 mojo 执行，然后在您的 pom 本身中对这些执行进行排序，这确实控制排序。请注意，您也可以在每次执行的基础上配置解包目标，这可能会对您有所帮助。

另一个可能适用于此处的有用工具是带有自定义程序集描述符的程序集插件。该程序集，就像上面讨论的 unpack mojo 一样，可以配置为处理特定的工件，而不仅仅是所有工件，并且处理的粒度和顺序非常灵活。

# objective-c - 从 Facebook API 获取用户时间线

> ID：13609178
> 
> 赞同：1
> 
> 时间：2012-11-28T15:57:36.763
> 
> 标签：objective-c, ios, facebook, api

我目前正在使用这段代码从 Facebook 获取用户提要：

```
FBRequest *friendsRequest = [FBRequest requestWithGraphPath:[NSString stringWithFormat:@"%@?fields=cover,first_name,last_name,relationship_status,feed", self.friendID] parameters:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"en_EN", @"locale", nil] HTTPMethod:nil];
    [friendsRequest startWithCompletionHandler: ^(FBRequestConnection *connection,
                                                  NSDictionary* result,
                                                  NSError *error) {

        postsArray = [[NSMutableArray alloc] initWithArray:[result valueForKeyPath:@"feed.data"]];
        [tableView reloadData];
        NSLog(@"Data found: %@", [result description]);
        NSLog(@"Posts: %i", postsArray.count);
           }]; 
```

但是，此“供稿”还包括“XXX 在他自己的帖子上”或“用户 A 喜欢帖子 B”之类的内容，我想获取用户发布的内容以及其他人发布到他的墙上的内容（例如，如果您转到 facebook.com 或 iOS 应用程序中的用户时间线）。那可能吗？如果不是，我怎样才能知道状态是“喜欢”还是“评论...”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:47:34.847

为什么不使用 read_stream 权限和 FQL

文档[在这里](https://developers.facebook.com/docs/reference/fql/stream)

您可以遍历结果并找到`type`等于：

```
46 - Status update
56 - Post on wall from another user 
```

# c++ - 有没有办法防止在编译时使用未实现的函数？

> ID：13609179
> 
> 赞同：1
> 
> 时间：2012-11-28T15:57:39.283
> 
> 标签：c++, compile-time

我经常遇到像这样的黑客

```
//lets say this is some class that still doesnt support...
//...all the functionality that it should based on the design docs
void MyClass::MyFunction()
{
  throw std::exception("not implemented");
} 
```

我想这是一个不好的做法，但除此之外：
有没有办法在编译期间做同样的事情，但前提是使用该函数（也就是如果它未使用，编译应该成功）。

编辑：我也对虚拟内存功能感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T16:00:27.220

如果你完全删除实现并且只有函数声明，则会出现链接器错误，这基本上是编译时间。不幸的是，链接器错误往往很丑陋且难以追踪，但在调用尚未实现的函数的情况下，我认为它们非常易于管理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T16:01:18.723

如果它是非虚函数，那么您可以简单地注释掉定义。

如果它是在基类中声明的虚函数，那么您无法在编译时控制调用，那么您唯一的选择就是一些运行时错误或异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-05T14:36:02.243

老问题，但仍然...

我为此使用了几个简单的助手。它会给出一个相当可读的错误链接时间：

```
// Not implemented is not implemented :-)thing, it'll break:
struct NotImplHelper { static void notimplemented(); };
#define notimplemented() NotImplHelper::notimplemented();
#if defined(DEBUG) || defined(_DEBUG)
#define notimplementedvirtual() throw std::exception();
#else
#define notimplementedvirtual() static_assert(false, "You should implement virtual function calls before moving to production.");
#endif 
```

用法：

```
//lets say this is some class that still doesnt support...
//...all the functionality that it should based on the design docs
void MyClass::MyFunction()
{
    notimplemented();
    // or notimplementedvirtual() if MyFunction() is virtual... 
} 
```

**理由：**

恕我直言，如果您在程序中使用函数，它应该可用。当您尝试编译尚未实现的内容时，它应该会给出编译时或链接时错误。

F.ex.，在 MSVC++ 中，这将给出：

```
1>Test.obj : error LNK2019: unresolved external symbol "public: static void __cdecl NotImplHelper::notimplemented(void)" (?notimplemented@NotImplHelper@@SAXXZ) referenced in function "[blahblahblah]" 
```

请注意，“引用函数”在 MSVC++ 中。我还没有在其他编译器中测试过它。

至于未实现的虚函数调用，您唯一的选择就是抛出异常。在开发过程中没有在调试器中实现这些是可以的 - 但是，当事情变得严重时，这些可能会被您的程序调用，因此它们应该可用。A`static_assert`确保后者。（所以：结合任何持续集成包，它基本上都会失败。）

显然大多数人会不小心混淆`notimplemented`和`notimplementedvirtual`。实际上这不是一个大问题：一个简单的解决方案是始终使用前者，除非您想摆脱错误，因为它是 WIP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:03:51.337

我能想到的最简单的解决方案是注释未实现的函数。

也许不是你想的那样，但是如果有任何东西试图使用它，这样做会产生一个编译时错误，并且生成的代码应该与一个通常被优化掉的空函数相同。

# android - Android用代码重启主要活动

> ID：13609180
> 
> 赞同：0
> 
> 时间：2012-11-28T15:57:41.980
> 
> 标签：android, restart

我必须每隔 1 小时重新启动我的应用程序。但是当我尝试下面的代码时，一个新的活动正在启动，但我想关闭的活动仍在后台作为线程运行：S

我需要做什么？谢谢..

```
if (timeOutOK) {

            finish();
            Intent i = getBaseContext().getPackageManager()
                    .getLaunchIntentForPackage(
                            getBaseContext().getPackageName());
            i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(i);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:28:17.757

您可能在某处保留了对该活动的实时引用。即使在调用完成之后，旧的活动也不会被 GC-ed，直到没有对它的实时引用，因此您需要更新所有引用以指向新的活动。

您说它作为线程在后台运行没有任何意义，但您的活动可能会继续在后台线程或 UI 线程上执行操作，只要它没有得到正确处理。

# git - 如何使子分支成为主分支？

> ID：13609181
> 
> 赞同：1
> 
> 时间：2012-11-28T15:57:43.097
> 
> 标签：git, branch, master

我已经看到[了这个](https://stackoverflow.com/questions/4570590/make-git-branch-the-master-branch)答案，但我不确定回答者`git branch -f ..`为了完成任务而使用的意思。

我有三个分支，我的`master`分支有一堆我不想留下来的文件，我知道如果我使用合并它们会。我有点理解删除分支，但我真的可以对`master`分支这样做吗？

我知道这个问题可能有一个简单的解决方案，但是有人可以解释每个 git 命令在做什么吗？这会有所帮助。

`merge`问题：我如何才能`sub-branch`在只保留文件的情况下进入主文件，而在保留文件的同时`sub-branch`不保留文件？`master``sub-branch`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:05:45.397

您可以签出子分支，删除主分支，签出子分支的副本并将其命名为 master。

```
git checkout sub-branch
git branch -D master
git checkout -b master 
```

# dom - 在本地主机 (xampp) 上工作的脚本在虚拟主机网站上不起作用

> ID：13609182
> 
> 赞同：1
> 
> 时间：2012-11-28T15:57:44.973
> 
> 标签：dom, post, curl

我有一个 php curl 脚本来登录网站并将数据发布到其中..

我使用 DOM 解析来解析一些链接，然后发布数据..

该脚本在我安装的本地主机上完美运行（使用 XAMPP），但是当我在任何网络主机上上传相同的 php 文件时，它会给出空白页面而不发布任何内容..

请帮助大家（这是脚本 [http://pastebin.com/20aVSbf9](http://pastebin.com/20aVSbf9)的片段 ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:00:24.410

检查您的网址是否是绝对的，并将它们更改为相对路径。

# visual-studio-2010 - cshmtl（Razor）中的多项选择答案按钮

> ID：13609187
> 
> 赞同：0
> 
> 时间：2012-11-28T15:57:59.913
> 
> 标签：visual-studio-2010, razor

我正在用 cshtml（Razor/c# 兼容的 html）开发一个 Web 应用程序，其中包括一个“测试部分”。本节有一个问题，有 4 个可能的答案（只有一个是正确的）。此时，我从 SQL 数据库中的记录中检索 4 个答案。

然后我需要以随机生成的顺序将 4 个不同按钮的显示值设置为每个值（或“分配”按钮的答案）。

（即，如果正确答案一直在字段 1 中，我不希望每次都将正确答案作为第一个按钮。它应该移动。）

有什么想法吗？

# caching - 如何使用上次修改日期将单页缓存 1 小时？

> ID：13609189
> 
> 赞同：0
> 
> 时间：2012-11-28T15:58:08.543
> 
> 标签：caching, symfony

我想要做的是缓存一个页面 1 小时。问题是，如果我的对象被修改，我希望能够在这 1 小时内将案例设置为陈旧。

到目前为止，这是我的代码：

```
$response = new Response();
$response->setLastModified(new \DateTime($lastModified));        
if ($response->isNotModified($this->getRequest()))
    return $response;
else
    $response->setCache(array(
        'public' => true,
        'max_age' => 3600, 
        's_maxage' => 3600,
    )); 
```

问题是上面的代码没有检查 lastModified。创建 1 小时缓存后，我必须等待整整 60 分钟才能看到我对对象 ($lastModified) 所做的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:16:38.477

这是symfony2 文档中使用 Last-Modified 标头缓存页面[的示例](http://symfony.com/doc/2.0/book/http_cache.html#validation-with-the-last-modified-header)。

我认为您的错误是您尝试使用 Last-Modified 然后用 Cache-Control 标头（max_age，s_maxage）重写它。

# hyperlink - 一页网站：单击锚链接时重写地址栏中的 URL

> ID：13609191
> 
> 赞同：1
> 
> 时间：2012-11-28T15:58:13.573
> 
> 标签：hyperlink, rewrite, anchor, address-bar

我已经建立了一个单页水平滚动网站，其中包含多个锚点和 DIV-id。该网站有五个并排的页面，可根据访问者的浏览器窗口自动呈现整页。

该菜单包含七个超链接，用于处理页面上的不同锚点（div-id）（例如：[http](http://www.url.com/#partsix) ://www.url.com/#partsix ）。当他们被点击时，访问者将自动滚动到页面的锚点部分。这工作正常而且非常顺利。

我正在处理的问题是，由于没有重新加载页面，因此地址栏没有更新。因此，如果访问者想要链接到一个页面，或者，例如，喜欢带有 facebook 按钮的 URL，这将是非常困难的。

有没有办法用锚链接重写地址栏而不重新加载页面？

编辑：我发现我可以使用`onclick="window.location.hash = hash;"`超链接上的操作。这将返回它在地址栏中滚动到的锚点的哈希值。奇迹般有效。但是：我的菜单插件不允许我将此操作添加到超链接。所以我想检查我是否可以使用 javascript 将此操作应用于同一 li 类中的所有超链接。有谁知道怎么做？

包含所有菜单链接的 li 类是 'mc_menu mc_depth_2'

# kml - 在 KML 代码中延迟气球组件

> ID：13609193
> 
> 赞同：0
> 
> 时间：2012-11-28T15:58:15.397
> 
> 标签：kml, balloon

我刚刚开始学习如何操作 KML 文件。这是一个我不知道如何解决的问题....我创建了一个多边形并添加了一个要显示为气球的描述，但它会在 Google 地球开始工作时出现，然后才能看到多边形。我想要的是从多边形出现的特定距离显示气球（例如在 LookAt 元素的范围距离内）。有人知道如何管理吗？我的代码如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" mlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
    <LookAt>
    <longitude>17.99514610290434</longitude>
    <latitude>59.36293893395309</latitude>
    <altitude>0</altitude>
    <range>597.51212259908</range>
    <tilt>52.34415598649959</tilt>
    <heading>105.3974737169693</heading>

</LookAt>
<Placemark>
    <name>Stadium</name>

    <description>
        <![CDATA[
        this is <b><i>Råsunda soccer stadium</i></b>
        ]]>
    </description>
        <gx:balloonVisibility>1</gx:balloonVisibility>

        <styleUrl>#msn_ylw-pushpin</styleUrl>
    <Polygon>
        <extrude>1</extrude>
        <tessellate>1</tessellate>
        <altitudeMode>absolute</altitudeMode>
        <outerBoundaryIs>
            <LinearRing>
                <coordinates>
                    17.99514610290434,59.36293893395309,100 17.99651951950199,59.36209399425741,100 17.99752330705672,59.36252751885282,100 17.99613146514916,59.36335387902954,100 17.99514610290434,59.36293893395309,100 
                </coordinates>
            </LinearRing>
        </outerBoundaryIs>
    </Polygon>
</Placemark>
</Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:42:02.657

通常，您可以跳过渲染多边形，直到您“足够接近”它由[Region](https://developers.google.com/kml/documentation/kmlreference#region)元素定义，该元素通过计算给定区域何时映射到最小或最大像素数来确定。

此外，`<gx:balloonVisibility>`无论 Region 是否处于活动状态，标签都会在加载 KML 时强制显示说明气球。在 KML 中直接添加区域仍会显示弹出气球。

要执行您想做的事情，您必须将 KML 文件与第二个 KML 文件包装在一起，该文件带有一个带有一个区域的 NetworkLink，该区域仅在该区域处于活动状态（又名足够接近）时才加载第二个 KML，此时描述与多边形。

```
<?xml version="1.0" encoding="utf-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>

  <LookAt>
        <longitude>17.99514610290434</longitude>
        <latitude>59.36293893395309</latitude>
        <altitude>0</altitude>
        <heading>105.3974737169693</heading>
        <tilt>52.34415598649959</tilt>
        <range>597.51212259908</range>
    </LookAt>

  <NetworkLink>
    <Region>
        <LatLonAltBox>
          <north>59.363792</north>
          <south>59.361556</south>
          <east>17.998029</east>
          <west>17.994443</west>
        </LatLonAltBox>
        <Lod>
          <minLodPixels>128</minLodPixels>
          <maxLodPixels>-1</maxLodPixels>
        </Lod>
      </Region>

      <Link>
        <href>target.kml</href>
      </Link>     
  </NetworkLink>

 </Document>

</kml> 
```

target.kml 文件包含您提供的原始 KML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<kml xmlns="http://www.opengis.net/kml/2.2">    
 <Placemark>
    <name>Stadium</name>
    ...
 </Placemark>    
</kml> 
```

您可以通过调整*minLodPixels*值和/或区域大小来更改特征 + 气球出现的距离。目前，当多边形周围区域定义的区域在屏幕上至少为 128 像素时，将显示该功能。更改为 32 或 64 和/或使区域面积更大以使其看起来更快。

注意 Google 地球客户端没有为您提供编辑甚至查看地图上的区域边界框的工具，因此调试起来很棘手。您可以将 KML 粘贴到此[工具](http://kml4earth.appspot.com/bbox.html)中以生成 KML，从而使区域边界区域可见。这有助于更轻松地调试区域。

# node.js - 使用 http-proxy 与 node.js 进行负载平衡

> ID：13609196
> 
> 赞同：12
> 
> 时间：2012-11-28T15:58:23.960
> 
> 标签：node.js, load-balancing, node-http-proxy

我正在尝试使用 node.js 和 http-proxy 编写负载平衡。我想要一个在 2 个服务器之间共享传入请求处理的 loadBalancer。

```
var http = require('http'),
httpProxy = require('http-proxy');

var servers =  [{host :'127.0.0.1', port :3000}, {host : 'remote_adr',port :3000}];

httpProxy.createServer(function (req, res, proxy) {
    var target = servers.shift();
    proxy.proxyRequest(req, res, target);
    servers.push(target);
}).listen(8000); 
```

我认为这样做会使 loadBalancer 交替向 serv1 和 serv2 发送请求。

但是，当我尝试时，它似乎以没有特定顺序请求 2 个服务器。此外，大部分请求都发送到我的 localhost 节点服务器（ 127.0.0.1:3000 ）

有人能够解释这种行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T00:00:20.170

那应该按照您的要求进行循环，但这是一个非常幼稚的循环。您可能会看到，您的 favicon.ico 请求在单个服务器上的请求份额高于正常份额。例如。

```
Server 1: Actual Requests
Server 2: favicon.ico
Server 1: Another Request
Server 2: favicon.ico
Server 1: Final Request
Server 2: favicon.ico 
```

因此，根据您的日志记录方式，看起来服务器 1 正在获取所有请求，而从技术上讲，每个服务器正在获取相同数量的请求。另请记住，如果您从节点提供资产，您的资产也将包含在循环赛中。因此，每个图像或文件请求也将被移交给不同的节点实例。

# extjs - 从 Sencha ExtJS 4.0 迁移到 ExtJS 4.1

> ID：13609199
> 
> 赞同：2
> 
> 时间：2012-11-28T15:58:39.517
> 
> 标签：extjs, extjs4, migration, extjs4.1

我创建一个这样的窗口：

```
_target = new Ext.Window({
    layer: 'top',
    width: _width,
    height: _height,
    constrainTo: aBody,
    constrain: true,
    renderTo: aBody,
    autoScroll: true,
    flex: 1,
    modal: (targetParams.Modal != undefined) ? targetParams.Modal : false,
    resizable: (targetParams.Resizable != undefined) ? targetParams.Resizable : true,
    minimizable: (targetParams.Minimizable != undefined) ? targetParams.Minimizable : true,
    maximizable: (targetParams.Maximizable != undefined) ? targetParams.Maximizable : true,
    closable: (targetParams.Closable != undefined) ? targetParams.Closable : true,
    maximized: _maximized,
    minimzed: _minimized,
    isInFront: true
}); 
```

然后这样做：

```
_target.on("render", function (items) {
    if (items.length > 0) {
        this.show();
        this.add(items);
        this.doLayout();
        var buttonText = targetParams.ButtonText || this.title;
        createToolbarButton(this.id, buttonText, targetParams.UIConfigurationId);
    } else {
        _target.destroy();
    }
}); 
```

问题出在这条线上`this.show();`。在 4.0 上，这条线调用了这个函数

```
show: function() {        
    this.callParent(arguments);
    this.performDeferredLayouts();
    return this;
}, 
```

但在 4.1 上，同一行调用了另一个函数：

```
show: function(animateTarget, cb, scope) {        
    var me = this;

    if (me.rendered && me.isVisible()) {
        if (me.toFrontOnShow && me.floating) {
            me.toFront();
        }
    } else if (me.fireEvent('beforeshow', me) !== false) {
        me.hidden = false;

        if (!me.rendered && (me.autoRender || me.floating)) {
            me.doAutoRender();
        }
        if (me.rendered) {
            me.beforeShow();
            me.onShow.apply(me, arguments);

            if (me.ownerCt && !me.floating && !(me.ownerCt.suspendLayout || me.ownerCt.layout.layoutBusy)) {
                me.ownerCt.doLayout();
            }
            me.afterShow.apply(me, arguments);
        }
    }
    return me;
}, 
```

下线试图做`layout.renderChildren()`，然后它给出了一个错误。

我认为很明显创建的对象是不同的，但我没有在“升级 4.0 到 4.1”文档中看到这个问题。

所以我的问题是我必须做些什么才能完成这项工作？

在此先感谢您的帮助。

更新：

添加窗口后的应用程序结构如下所示：

```
ViewPort
North
    ...
West
    ...
Center
    Window
        Panel
            Panel
                Label
                ...
            BorderSplitter
            Panel
                Label
                ...
        Panel
            List
South
    ... 
```

我对代码进行了一些更改，它不再产生该错误。

```
_target.on("beforeRender", function (items) {
    if (items.length > 0) {
        _target.add(items);
        _target.doLayout();
        var buttonText = targetParams.ButtonText || _target.title;
        createToolbarButton(_target.id, buttonText, targetParams.UIConfigurationId);
    } else {
        _target.destroy();
    }
});
_target.show();
_target.toFront(); 
```

但是现在当我打电话时它会产生另一个`_target.add(items);`。

此行的错误是“无法获取属性 'dom' 的值”

```
me.container = container.dom ? container : Ext.get(container); 
```

我试图分析调用堆栈并找出它为什么会出现这个错误。当它调用这个函数时：

```
renderChildren: function () {
    var me = this,
        items = me.getLayoutItems(),
        target = me.getRenderTarget();

    me.renderItems(items, target);
}, 
```

其中“this”指的是窗口的布局对象，在我添加项目的位置，调用“getRenderTarget()”返回未定义。然后尝试访问undefined的dom属性，抛出我上面提到的错误。

这就是我迷路的地方，因为如您所见，当我创建窗口时，我将一个对象（aBody）传递给 renderTo 属性。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:26:37.297

它与布局有关。随着布局“适合”它似乎工作。

# android - 从android通过sqlite数据库进行不适当的搜索

> ID：13609202
> 
> 赞同：3
> 
> 时间：2012-11-28T15:58:49.323
> 
> 标签：android, database, sqlite

这个查询似乎工作正常：

```
public Cursor getOneWine(long id) {
    return database.query("vino", null, "_id=" + id, null,
                          null, null, null);
} 
```

但是当我尝试更改`"_id"+id`它`"name="+name`时不起作用！也试过这个：

```
public Cursor getSearchWine(String name) {
    return database.query("vino", new String[] {"_id", "name"}, "name="+name, null,
                          null, null, "name");
} 
```

当我想要所有葡萄酒的光标时，这很有效。

```
public Cursor getAllWines() {
    return database.query("vino", new String[] {"_id", "name"},  null, null,
                          null, null, "name");
} 
```

还检查了 Android 文档，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:07:29.677

在 SQL 中，字符串必须被引用：

```
db.query("vino", new String[] {"_id", "nombre"}, "name='" + name + "'", ...); 
```

`'`但是，如果名称包含;这将导致问题 建议改为使用字符串*参数*：

```
db.query("vino", new String[] {"_id", "nombre"}, "name=?", new String[] {name}, ...); 
```

# apache-camel - 如何访问自定义 Camel 组件 (Apollo) 中的 InOut 行为

> ID：13609203
> 
> 赞同：2
> 
> 时间：2012-11-28T15:58:49.867
> 
> 标签：apache-camel, apollo

我正忙于使用 Scala 的 HawtDispatch Apollo 客户端库为 Apollo 开发 Camel 组件。我成功地从队列和主题发送和接收消息，但我不知道如何确定当前的生产者 (StompProducer) 需要 inOut 或 InOnly 行为。对于 InOut，如果没有提供明确的回复，我想订阅一个临时队列以获取结果。我在吠叫错误的树吗？有什么我可以看的例子吗？有人已经完成了 Apollo Stomp 组件吗？我曾尝试使用 ActiveMQ 组件绑定到 Apollo 1.5 中的 OpenWire 协议，但效果不佳。Camel 2.11-SNAPSHOT 中的 Sjms Camel 组件对我也不起作用。最终目标是为 Akka 提供 Apollo Consumer/Producers Actors。任何有关 Camel Apollo 集成替代方案或我自己尝试组件工作的建议，将不胜感激。问候伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:02:21.007

找到答案：在处理交换时，您可以使用 exchange.getPattern.isOutCapable 测试是否是 inOut 交换。

# ios - 如何更改 UICollectionView 中整个部分的背景颜色？

> ID：13609204
> 
> 赞同：41
> 
> 时间：2012-11-28T15:58:51.210
> 
> 标签：ios, background-color, uicollectionview

在 UICollectionView 中，我想为整个部分提供统一的背景颜色，而不是为单个单元格或整个集合视图。

我没有看到任何委托方法可以做到这一点，有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-05-05T08:37:01.680

`UICollectionViewCompositionalLayout`iOS 13 中引入的新属性有一个名为`decorationItems`方便添加装饰项目的属性，您可以使用该属性为该部分添加背景。

```
let section = NSCollectionLayoutSection(group: group)
section.decorationItems = [
   NSCollectionLayoutDecorationItem.background(elementKind:"your identifier")
] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-19T18:10:29.863

这个想法是覆盖**UICollectionViewLayoutAttributes**以添加颜色属性。然后覆盖**UICollectionReusableView**将颜色应用于视图背景。

[https://github.com/strawberrycode/SCSectionBackground](https://github.com/strawberrycode/SCSectionBackground)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T17:34:19.240

我还没有尝试过，但在我看来，如果你想要单元格后面的背景（比如 Books 应用程序中的书架），你需要使用装饰视图。我认为您应该能够为每个部分拥有不同的视图，并使用委托方法进行设置`layoutAttributesForDecorationViewOfKind:atIndexPath:`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-10-08T17:31:33.600

首先，将 UICollectionReusableView 作为背景视图。我只是将我的设置为红色。

```
class SectionBackgroundDecorationView: UICollectionReusableView {
    override init(frame: CGRect) {
        super.init(frame: frame)
        self.backgroundColor = .red
    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
} 
```

然后，在 YourCollectionViewController 中：

```
static let background = "background-element-kind"

init() {
    super.init(collectionViewLayout: YourCollectionViewController.createLayout())
}

static func createLayout() -> UICollectionViewLayout {
    let layout = UICollectionViewCompositionalLayout { (sectionIndex: Int,
        layoutEnvironment: NSCollectionLayoutEnvironment) -> NSCollectionLayoutSection? in

        // Use sectionIndex to control the layout in each section
        if sectionIndex == 0 {

            // Customise itemSize, item, groupSize, group to be whatever you want
            let itemSize = NSCollectionLayoutSize(widthDimension: .fractionalWidth(1),
                                                  heightDimension: .fractionalHeight(1))
            let item = NSCollectionLayoutItem(layoutSize: itemSize)

            let groupSize = NSCollectionLayoutSize(widthDimension: .fractionalWidth(1),
                                                   heightDimension: .absolute(170))
            let group = NSCollectionLayoutGroup.horizontal(layoutSize: groupSize, subitems: [item])

            let section = NSCollectionLayoutSection(group: group)

            // Create a sectionBackground
            let sectionBackground = NSCollectionLayoutDecorationItem.background(
                    elementKind: background)

            section.decorationItems = [sectionBackground]
            return section

        } else {

          // Your layout for other sections, etc
          // You don't have to set a background for other sections if you don't want to
        }
    }
    layout.register(SectionBackgroundDecorationView.self, forDecorationViewOfKind: background)
    return layout
} 
```

这些文档链接帮助了我：

*   [https://developer.apple.com/documentation/uikit/nscollectionlayoutdecorationitem](https://developer.apple.com/documentation/uikit/nscollectionlayoutdecorationitem)
*   [https://developer.apple.com/documentation/uikit/uicollectionviewcompositionallayoutsectionprovider](https://developer.apple.com/documentation/uikit/uicollectionviewcompositionallayoutsectionprovider)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-17T04:31:41.630

参考：
[草莓代码：使用DecorationView作为背景](https://github.com/strawberrycode/SCSectionBackground)
[devxoul：使用SupplementaryElement作为背景](https://github.com/devxoul/UICollectionViewFlexLayout)
[airbnb：使用SupplementaryElement作为背景](https://github.com/airbnb/MagazineLayout)

我需要兼容`IGListKit`，所以我`decorationView`用作背景。布局是`UICollectionViewFlowLayout`常见用例的子类。[我的实现](https://gist.github.com/yanpanpan/23648e1fadd773466a001a3529d6fb46)： [![不同的部分背景](../Images/91d3d00a5570ac229c9052017395554b.png)](https://i.stack.imgur.com/MaVhb.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-03T14:06:15.823

在集合视图中，每个部分都可以有一个补充视图，因此为每个部分放置补充视图，然后将背景颜色设置为补充视图而不是部分单元格。我希望它会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-26T13:13:22.370

一种经典的方法是创建一个自定义补充种类并在 CollectionView 部分背景中提供您的自定义视图。它将使您能够自定义部分背景。参考[https://stackoverflow.com/a/63598373/14162081](https://stackoverflow.com/a/63598373/14162081)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-08-08T15:38:35.817

我在这里离开了这个回购[https://github.com/SebastienMichoy/CollectionViewsDemo/tree/master/CollectionViewsDemo/Sources/Collections%20Views](https://github.com/SebastienMichoy/CollectionViewsDemo/tree/master/CollectionViewsDemo/Sources/Collections%20Views)

**斯威夫特 3**

子类 uicollectionreusableview

```
class SectionView: UICollectionReusableView {
   static let kind = "sectionView"
} 
```

子类 uicollectionViewFlowLayout

```
class CustomFlowLayout: UICollectionViewFlowLayout {

// MARK: Properties

var decorationAttributes: [IndexPath: UICollectionViewLayoutAttributes]
var sectionsWidthOrHeight: [IndexPath: CGFloat]

// MARK: Initialization

override init() {
    self.decorationAttributes = [:]
    self.sectionsWidthOrHeight = [:]

    super.init()
}

required init?(coder aDecoder: NSCoder) {
    self.decorationAttributes = [:]
    self.sectionsWidthOrHeight = [:]

    super.init(coder: aDecoder)
}

// MARK: Providing Layout Attributes

override func layoutAttributesForDecorationView(ofKind elementKind: String, at indexPath: IndexPath) -> UICollectionViewLayoutAttributes? {
    return self.decorationAttributes[indexPath]
}

override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
    var attributes = super.layoutAttributesForElements(in: rect)
    let numberOfSections = self.collectionView!.numberOfSections
    var xOrYOffset = 0 as CGFloat

    for sectionNumber in 0 ..< numberOfSections {
        let indexPath = IndexPath(row: 0, section: sectionNumber)
        let numberOfItems = self.collectionView?.numberOfItems(inSection: sectionNumber)
        let sectionWidthOrHeight = numberOfItems == 0 ? UIScreen.main.bounds.height : collectionViewContentSize.height//self.sectionsWidthOrHeight[indexPath]!
        let decorationAttribute = UICollectionViewLayoutAttributes(forDecorationViewOfKind: SectionView.kind, with: indexPath)
        decorationAttribute.zIndex = -1

        if self.scrollDirection == .vertical {
            decorationAttribute.frame = CGRect(x: 0, y: xOrYOffset, width: self.collectionViewContentSize.width, height: sectionWidthOrHeight)
        } else {
            decorationAttribute.frame = CGRect(x: xOrYOffset, y: 0, width: sectionWidthOrHeight, height: self.collectionViewContentSize.height)
        }

        xOrYOffset += sectionWidthOrHeight

        attributes?.append(decorationAttribute)
        self.decorationAttributes[indexPath] = decorationAttribute
    }

    return attributes
}
} 
```

实现这个

**CollectionView 委托函数**

```
func collectionView(_ collectionView: UICollectionView, willDisplaySupplementaryView view: UICollectionReusableView, forElementKind elementKind: String, at indexPath: IndexPath) {

    Log.printLog(identifier: elementKind, message: indexPath)
    if elementKind == UICollectionElementKindSectionHeader, let view = view as? ProfileViewHeaderView {

        view.backgroundColor = UIColor(red: (102 / 255.0), green: (169 / 255.0), blue: (251 / 255.0), alpha: 1)
    } else if elementKind == SectionView.kind {
        let evenSectionColor = UIColor.black
        let oddSectionColor = UIColor.red

        view.backgroundColor = (indexPath.section % 2 == 0) ? evenSectionColor : oddSectionColor
    }
} 
```

**这个很重要**

```
let layout = CustomFlowLayout()
layout.register(SectionView.self, forDecorationViewOfKind: SectionView.kind) 
```

使用布局而不是 collectionView 注册 UICollectionReusableView。

还有一件事。我弄乱了 layoutAttributesForElements 中的高度。你应该为你自己的项目改变它。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-08-06T22:20:15.673

它非常简单，只需使用这个默认的 UICollectionViewDelegate 方法，它就可以工作

```
func collectionView(_ collectionView: UICollectionView, willDisplay cell: UICollectionViewCell, forItemAt indexPath: IndexPath) {
    print(indexPath.item)

    let evenSectionColor = UIColor.clear
    let oddSectionColor = UIColor.white
    cell.contentView.backgroundColor = (indexPath.item % 2 == 0) ? evenSectionColor : oddSectionColor

} 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2016-02-29T04:58:12.883

我在以下方法中以非常简单的方式更改了每个部分的背景颜色： 但我不确定这样做是否正确。但它确实奏效了。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    FamilyCalendarCellItemCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"calendarItem" forIndexPath:indexPath];
    Event *event;
    _headerView = [collectionView dequeueReusableSupplementaryViewOfKind:
                   UICollectionElementKindSectionHeader withReuseIdentifier:@"EventHeader" forIndexPath:indexPath]; //headerView is declared as property of Collection Reusable View class
    if(indexPath.section==0) {

        cell.backgroundColor=[UIColor orangeColor];
        }
    else if(indexPath.section==1) {

        cell.backgroundColor=[UIColor yellowColor];

    }

    return cell;
} 
```

# binding - 将 NSPopUpButton 绑定到 NSArray

> ID：13609208
> 
> 赞同：1
> 
> 时间：2012-11-28T15:59:02.060
> 
> 标签：binding, nsarray, nsarraycontroller, nspopupbutton

我想用一组 NSStrings 填充 NSPopUpButton。我还希望能够在 NSPopUpButton 中设置所选项目并获取所选值。有没有办法使用绑定来做到这一点？这就是我所拥有的，只有绑定到 arragedObjects 的数组控制器的内容。

```
@interface AppDelegate : NSObject <NSApplicationDelegate>
{
    NSMutableArray *myArray;
    IBOutlet NSPopUpButton *myPopUpButton;
    IBOutlet NSArrayController *processArrayController;   
}

@property (assign) IBOutlet NSWindow *window;
@end

@implementation AppDelegate
@synthesize window = _window;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
     NSString *firstObject = @"Lustre";
     NSString *secondObject = @"TwoTone Laser";
     NSString *thirdObject = @"Laser Mark";
     NSString *forthObject = @"Double Lustre";
     NSString *fifthObject = @"CG Ink";

    // Create the array
     myArray = [[NSMutableArray alloc] initWithObjects:firstObject, secondObject,  
     thirdObject, forthObject, fifthObject, nil];

    // Sort the array
    [myArray sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)];

    // Set contents of the array controller that is bound to the popup button
    [processArrayController setContent:myArray];

    // Set a selection to an item of the popup button
    [myPopUpButton  selectItemWithTitle: firstObject];  
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:28:23.797

在您的应用程序控制器中设置一个 ivar 来保存您的选择：

```
@property (copy) NSString *selection; 
```

当然，在你的实现文件中综合它。

将这些绑定到您的 NSPopUpButton 实例：

**内容：**

绑定到：阵列控制器（除非您为阵列控制器指定了另一个名称）

控制器键：排列对象

**内容值：**

绑定到：阵列控制器（除非您为阵列控制器指定了另一个名称）

控制器键：排列对象

模型键路径：（对于字符串，我一直使用“描述”）

**选定对象：**

绑定到：App Delegate（除非您为您的应用程序委托指定了另一个名称）

模型键路径：self.selection

最后，由于您的弹出按钮现在绑定到`selection`，这就是您设置初始选择的方式：

```
self.selection = firstObject; 
```

祝你在你的努力中好运。

# python - unicodedata.unidata_version 打印错误的 unicode 版本？

> ID：13609210
> 
> 赞同：2
> 
> 时间：2012-11-28T15:59:07.607
> 
> 标签：python, string, unicode

```
>>> import sys
>>> sys.version_info
sys.version_info(major=2, minor=7, micro=2, releaselevel='final', serial=0)

>>> import unicodedata
>>> unicodedata.unidata_version
'5.2.0' 
```

这意味着我的 Python 版本应该有 Unicode 5.2.0。

但是，当我转到[5.2.0 版中新添加的 unicode 字符列表](http://www.fileformat.info/info/unicode/version/5.2/index.htm)并打印此类字符时，无法识别：

```
>>> print u"\u0803"
ࠃ 
```

[然而，来自 5.1.0](http://www.fileformat.info/info/unicode/version/5.1/index.htm)的字符被识别：

```
>>> print u"\u03CF"
Ϗ 
```

那么我应该总是计算一个版本低于实际输出的版本`unicodedata.unidata_version`还是我误解了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:00:58.307

您将终端可以打印的内容与 Python 对 unicode 字符的了解混淆了。

您的*终端字体*无法识别这些代码点。Python 可以很好地处理它们：

```
>>> import unicodedata
>>> unicodedata.category(u'\u0803')
'Lo'
>>> unicodedata.name(u'\u0803')
'SAMARITAN LETTER DALAT'
>>> unicodedata.category(u'\u03CF')
'Lu'
>>> unicodedata.name(u'\u03CF')
'GREEK CAPITAL KAI SYMBOL' 
```

具有讽刺意味的是，我的浏览器使用的字体没有为任何一个代码点定义图像。您的帖子为我显示了两个占位符：

![两个占位符](../Images/46785c497e23be4d633f86061dcfb531.png)

# algorithm - Alpha-beta 修剪同一玩家的连续动作

> ID：13609212
> 
> 赞同：0
> 
> 时间：2012-11-28T15:59:08.417
> 
> 标签：algorithm, artificial-intelligence, minimax, alpha-beta-pruning

我已经为 Checkers 实现了 alpha-beta 修剪，并认为我已经让它工作了，但发现计算机不会连续进行多次跳转（当它必须时）。例如：

人工智能会：

```
O _ _ _ _      _ _ _ _ _

_ X _ X _  ->  _ _ _ X _  (misses a jump because it only does a single move)

_ _ _ _ _      _ _ O _ _ 
```

人工智能*应该*这样做：

```
O _ _ _ _      _ _ _ _ O
_ X _ X _  ->  _ _ _ _ _  (sees that it's current turn is not finished, continues)
_ _ _ _ _      _ _ _ _ _ 
```

我试图通过检查 MovePiece 的返回值来修复它，它返回玩家是否完成了他的回合，这取决于移动是否是跳跃以及是否还有进一步的跳跃。根据返回值，它将再次运行 MaxValue/MinValue（取决于它第一次看到要进行进一步移动时所处的位置）或继续在树中并切换玩家。

相关代码（C# 中）如下（retVal 是包含 Value、Depth 和 Move to do 的类型）：

```
foreach(var m in moves)
{
    var resultingBoard = board.Clone();

    var moveResult = resultingBoard.MovePiece(m.TypeOfMove,
                                resultingBoard.GetPieceAtPosition(m.OriginalPieceLocation.X,
                                                                  m.OriginalPieceLocation.Y),
                                m.FinalPieceLocation.X, m.FinalPieceLocation.Y);

    var newDepth = currentDepth;

    if(moveResult == TurnResult.NotDone)
    {
        retVal = MaxValue(resultingBoard, ref alphaValue, ref betaValue, color, ref newDepth, ref maxDepth);
    }
    else if(moveResult == TurnResult.Finished)
    {
        newDepth++; 
        retVal = MinValue(resultingBoard, ref alphaValue, ref betaValue, color == PieceColor.Black ? PieceColor.Red : PieceColor.Black, ref newDepth, ref maxDepth);
    }
} 
```

...

然而，这导致了一些……有趣的结果（第一步除了最小的修剪之外什么都不做），尽管我认为这将是正确的改变。

用新的动作让 MaxValue/MinValue 再次调用自己是正确的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:09:37.100

**您的极小极大算法需要“生成”新动作的事实 [（](http://en.wikipedia.org/wiki/Code_smell)**当您需要吃第二块时）。

**我会尝试重新设计它**- 你可以**扩展`move`**（可迭代的元素`moves`），使其**包含移动的元组（或列表）**，并避免`TurnResule.NotDone`在 minimax 算法阶段。

使用这种方法 - 列表`moves`将预先扩展，以包含`(eat piece,eat piece)`除了单个移动之外的移动。

* * *

该解决方案将使算法更加健壮，并允许您轻松地进行将来的修改。

# soap - XSD 中缺少响应和 DTO 对象

> ID：13609219
> 
> 赞同：3
> 
> 时间：2012-11-28T15:59:46.600
> 
> 标签：soap, xsd, servicestack

我正在将最新版本的 ServiceStack 与 NuGet 一起使用。我有一个基本的服务设置，可以很好地与 JsonServiceClient 配合使用，并且按预期通过了我们所有的单元测试。

不幸的是，我还在尝试支持 SOAP 和 Visual Studios“添加服务参考”代理生成，以便与希望继续使用这种框架的其他组进行互操作。

我遇到的是我们的 DTO（包括 Response 对象）没有被填充到 ServiceStack 通过元数据页面生成的 XSD 或 wsdl 中。这似乎很奇怪，因为在查看单个 SOAP 操作示例时，生成的示例中显示了正确的响应和 DTO。

示例响应：

```
Namespace Operations
    <DataContract>
    Public Class GetItemResponse
        Implements IHasResponseStatus

        <DataMember>
        Public Property ResponseStatus As ResponseStatus Implements IHasResponseStatus.ResponseStatus

        <DataMember>
        Public Property Item As Item
    End Class
End Namespace 
```

一个示例 DTO：

```
Namespace Types
    <DataContract>
    Public Class Item
        <DataMember>
        Public Property ItemIdentifier As String
        <DataMember>
        Public Property ItemId As Guid?
        <DataMember>
        Public Property ItemName As String
        <DataMember>
        Public Property Description As String
        <DataMember>
        Public Property InstallDate As DateTime?
        <DataMember>
        Public Property FeatureNumber As String
        <DataMember>
        Public Property ModelNumber As String
    End Class
End Namespace 
```

我也在使用 Assembly: ContractNamespace 属性来设置 XML 命名空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:13:30.337

我已经下载了源代码并自己进行了一些调查。我不确定此更改有多近，但似乎为了将您的 DTO 和响应对象包含在 wsdl 中，您需要添加一个查询字符串，如“？includeAllTypes = true”。

我还使用了 ServiceStack BasicAuthProvider 设置，它导致 AssignRoles 和 UnAssignRoles 自动添加到服务中。这些调用的请求和响应对象仍然无法进入 wsdl 并导致“添加服务引用”失败。幸运的是，我们没有使用它们，所以如果我能找到另一个配置设置来删除它们，它们应该都能正常工作。

# c# - 如何为 netTcpBinding 服务添加服务引用？

> ID：13609226
> 
> 赞同：1
> 
> 时间：2012-11-28T16:00:10.490
> 
> 标签：c#, wcf, wcf-binding, nettcpbinding

简单的问题：

如何在客户端项目中自托管 netTcpBinding 服务，右键单击服务引用 > 添加服务引用 ...

单击“发现”它会引用所有使用 WsHttpBinding 的服务，包括 netTcpBinding 服务。但是，当扩展 netTcpBinding 之一时，它无法导航到合同并引发以下错误：

> 找不到与绑定 MetadataExchangeTcpBinding 的终结点的方案 net.tcp 匹配的基地址。注册的基地址方案是 [http]。

我发现以下 .Net WCF 示例非常漂亮和整洁，但在示例中，它没有显示配置文件是如何设置的，以及我们如何通过向导获取代理。

> C:\WF_WCF_Samples\WCF\Basic\Binding\Net\Tcp\Default\CS

这是服务配置文件......（我不使用任何基本地址，我认为没有它应该可以工作）

```
 <service behaviorConfiguration="Canopus.WebServices.LogAndNotificationService"
    name="Canopus.WebServices.LogAndNotificationService">      
    <endpoint address="" binding="netTcpBinding"
     contract="Canopus.WebServices.ILogAndNotificationService" />
    <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange" />
   </service>

        <behaviors>
            <serviceBehaviors>
                <behavior name="Canopus.WebServices.LogAndNotificationService">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="true" />
                </behavior>
            </serviceBehaviors>
        </behaviors> 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:36:35.623

我认为当您处理 netTcPBinding 时，您的服务行为不能具有 httpGetEnabled 属性。并且看起来你的端点地址包含类似 http:// 它应该是 net.tcp://。

# c# - 如何提高加载xml文档的速度

> ID：13609231
> 
> 赞同：1
> 
> 时间：2012-11-28T16:00:23.167
> 
> 标签：c#, wpf, mvvm, linq-to-xml

我需要加载 2 种类型的 xml 文档；一个有 50 个子孩子，另一个有相同的 50 个和 800 个额外的孩子。较小的文档的性能很好，较大的文档可以接受，直到孩子的数量增加。20k 个孩子 * 50 个子孩子 = 出色的表现，20k 个孩子 * 850 个子孩子 = 缓慢的表现。当它们不存在时，我将如何跳过寻找额外的后代？我最初的尝试使我认为我需要为小型和大型文档提供单独的类、方法、视图模型和视图。下面是对我的代码的简要介绍。

```
public class MyItem
    {
        private string layout;
        private string column;
        private string columnSpan;
        private string row;
        private string rowSpan;
        private string background;

public MyItem(string layout, string column, string columnSpan, string row, string rowSpan, string background)
{
        Layout = layout;
        Column = column;
        ColumnSpan = columnSpan;
        Row = row;
        RowSpan = rowSpan;
        Background = background;
}

public string Layout
    {
        get { return this.layout; }
        set { this.layout = value; }
    } 
```

（未显示 - Column、ColumnSpan、Row、RowSpan 和 Background，其处理方式与布局相同）

仅对于此示例，下面仅显示 6 个子子项，我正在寻找一种仅加载前 2 个子项的 xml 文档的方法。这样，我可以使用小型或大型 xml 文档所需的任何加载方法。

```
internal class myDataSource
{
    //Loads (MyList) xml file 

    public static List<MyItem> Load(string MyListFilename)
    {

        var myfiles = XDocument.Load(MylistFilename).Descendants("item").Select(
            x => new MyItem(
                (string)x.Element("layout"),
                (string)x.Element("column"),
                (string)x.Element("columnSpan"),
                (string)x.Element("row"),
                (string)x.Element("rowSpan"),
                (string)x.Element("background")));

    return myfiles.ToList();
    }

public class MainViewModel : ViewModelBase
{

public void LoadMyList()
        {   

            this.myfiles = new ObservableCollection<MyItemViewModel>();

            List<MyItem> mybaseList = myDataSource.Load(MyListFilename);

            foreach (MyItem myitem in mybaseList)
            {
                this.myfiles.Add(new MyItemViewModel(myitem));
            }

            this.mycollectionView = (ICollectionView)CollectionViewSource.GetDefaultView(myfiles);
            if (this.mycollectionView == null)
                throw new NullReferenceException("mycollectionView");                
        }
}

 public class MyItemViewModel: ViewModelBase
{

    private Models.MyItem myitem;

    public MyItemViewModel(MyItem myitem)
    {
        if (myitem == null)
            throw new NullReferenceException("myitem");

        this.myitem = myitem;
    }      

    public string Layout
    {
        get
        {
            return this.myitem.Layout;
        }
        set
        {
            this.myitem.Layout = value;
            OnPropertyChanged("Layout");
        }
    } 
```

（未显示 - Column、ColumnSpan、Row、RowSpan 和 Background，其处理方式与布局相同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:28:56.527

代替 using `Descendants`，您可以按照直接路径（即 use `Elements`）吗？这是您避免扫描您知道没有项目的节点的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:33:36.787

XDocument 很方便，但如果问题仅仅是文件很大并且您只需扫描一次，XmlReader 可能是更好的选择。它不会读取整个文件，它一次读取一个节点。您可以手动跳过不感兴趣的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:07:59.240

我认为您可以做的一件事是不要在 Select 上执行 toList 并使其保持惰性，而是返回 Iterable 或 Select 返回的任何内容。（抱歉，我现在没有 Windows 框来测试它） . 当你做 foreach 时，你只会迭代一次（而不是现在两次）

# cuda - 如何使用 optirun 命令在 nsight 中启动项目的调试版本？

> ID：13609233
> 
> 赞同：1
> 
> 时间：2012-11-28T16:00:27.967
> 
> 标签：cuda, ubuntu-12.04, nsight, optimus

我一直在写一些简单的 cuda 程序（我是学生，所以我需要练习），问题是我可以从终端使用 nvcc 编译它（使用 Kubuntu 12.04LTS），然后使用 optirun ./a.out 执行它（hardver 是 dell inspiron 上的 geforce gt 525m），一切正常。主要问题是我无法从 Nsight 做任何事情。当我尝试启动代码的调试版本时，消息是“启动失败！找不到二进制文件！”。我认为这是关于使用 optirun 运行命令，但我不确定。有没有类似的经历？谢谢，提前帮助的人。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T09:10:29.113

由于这是我在搜索“nsight optirun”时发现的第一篇文章，所以我只想写下我为使其对我有用所采取的步骤。

1.  转到*运行 -> 调试配置 -> 调试器*

2.  找到*CUDA GDB 可执行文件*的文本框（在我的例子中，它设置为“${cuda_bin}/cuda-gdb”）

3.  前置“optirun --no-xorg”，在我的情况下，它是“optirun --no-xorg ${cuda_bin}/cuda-gdb”

如果您有一个 OpenGL 窗口，则可能不需要“--no-xorg”选项，甚至会适得其反，因为它会阻止任何这些出现。但是，对于我的科学代码，它是必需的，因为它可以防止我遇到内核超时。

快乐的虫子狩猎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:50:31.157

1.  [我们在没有 optirun 的情况下在 Optimus 系统上测试了 Nsight - 请参阅CUDA 工具包入门](http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-linux/index.html)中的“安装 cuda 工具包”，了解在 Optimus 系统上使用 CUDA 工具包。我们还没有尝试过使用 Nsight EE 的 optirun。
2.  如果您仍然需要使用 optirun 进行调试，您可以尝试制作一个使用 optirun 启动 cuda-gdb 的 shell 脚本，并在调试配置属性中将该 shell 脚本设置为 cuda-gdb 可执行文件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-06T19:55:22.657

最简单的做法是使用 optirun 运行 eclipse，这也将正确运行您的应用程序。

# wordpress - 如何使用数字 URL 而不是标签和类别的 slug？

> ID：13609235
> 
> 赞同：1
> 
> 时间：2012-11-28T16:00:29.357
> 
> 标签：wordpress, url, tags, categories

我对标签和类别都有疑问，我想更改 url 结构

“我的网站/标签/TagSlug”和“我的网站/标签/CatSlug”

到“我的网站/标签/TagId”和“我的网站/标签/CatId”

那可能吗？谢谢！

# c# - 在 C# 中用对象填充列表

> ID：13609238
> 
> 赞同：1
> 
> 时间：2012-11-28T16:00:36.237
> 
> 标签：c#, user-interface

我正在尝试在 c# 中使用 GUI 制作一个简单的程序，但不幸的是我遇到了一些困难。现在我将尝试解释我的程序的基本结构。我为三种不同的人群（大学教授、大学生和既不工作也不学习的人）开设了 3 节课。我有一些从文件中读取信息的方法（教授的职称、姓名、大学名称、学生的教职编号等）。我逐行读取文件并将信息保存在 3 个类之一的对象中。之后，我将该对象放入列表中。所以我的问题来了。我想从列表中读取每个对象并取其名称并放入其他 Windows 窗体上动态创建的标签上。这是我的代码的一小部分：

```
private void button1_Click(object sender, EventArgs e)
{
        ForeignPeople fPeople = new ForeignPeople();
        UniversityProfessors uProf = new UniversityProfessors();
        UniversityStudents uStudents = new UniversityStudents();
        if (radioButton1.Checked == true)
        {
            objList1 = loadList();
            Form2 f2 = new Form2();
            for (int i = 0; i < objList1.Count; i++)
            {
                if (objList1[i] is UniversityStudents)
                {
                    uStudents = (UniversityStudents)objList1[i];
                    tableLayoutPanel1.GrowStyle = TableLayoutPanelGrowStyle.AddRows;
                    Label et_tag = new Label();
                    et_tag.Name = "label" + i.ToString();
                    et_tag.Text = uStudents.getFirstName().ToString() + " " + uStudents.getLastName().ToString();
                    et_tag.AutoSize = true;
                    f2.tableLayoutPanel1.Controls.Add(et_tag, 0, i);
                    Label op = new Label();
                    op.AutoSize = true;
                    op.Text = "description";
                    f2.tableLayoutPanel1.Controls.Add(op, 1, i);
                }
                else if (objList1[i] is UniversityProfessors)
                {
                    uProf = (UniversityProfessors)objList1[i];
                    tableLayoutPanel1.GrowStyle = TableLayoutPanelGrowStyle.AddRows;
                    Label et_tag = new Label();
                    Label label = new Label();
                    et_tag.Name = "label" + i.ToString();
                    et_tag.Text = uProf.getFirstName().ToString() + " " + uProf.getLastName().ToString();
                    et_tag.AutoSize = true;
                    f2.tableLayoutPanel1.Controls.Add(et_tag, 0, i);
                    Label op = new Label();
                    op.AutoSize = true;
                    op.Text = "description";
                    f2.tableLayoutPanel1.Controls.Add(op, 1, i);
                }
                else if (objList1[i] is ForeignPeople)
                {
                    fPeople = (ForeignPeople)objList1[i];
                    String name, Name;
                    tableLayoutPanel1.GrowStyle = TableLayoutPanelGrowStyle.AddRows;
                    Label et_tag = new Label();
                    et_tag.Name = "label" + i.ToString();
                    et_tag.Text = fPeople.getFirstName().ToString() + " " + fPeople.getLastName().ToString();;
                    et_tag.AutoSize = true;
                    f2.tableLayoutPanel1.Controls.Add(et_tag, 0, i);
                    Label op = new Label();
                    op.AutoSize = true;
                    op.Text = "description";
                    f2.tableLayoutPanel1.Controls.Add(op, 1, i);
                }

            }
            f2.FormClosed += new FormClosedEventHandler(childFormClosed);
            f2.Show();
            this.Hide();
} 
```

但是，如果我有两行或多行属于一个对象（例如，我有两个或多个学生，或者文件中有两个或多个教授），则所有标签的文本都将使用最后读取的对象的名称。我知道问题出在列表或我制作的演员表中，但我想不出另一种方法来做我想做的事。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:16:49.603

除了 phoog 在评论中提到的更改之外，我还将您的“人员”对象的实例化向下移动到循环中的每个部分。这样你就可以确定旧的被正确地销毁了。我还会添加一个检查以确保演员表有效。

```
private void button1_Click(object sender, EventArgs e)
{
    if (radioButton1.Checked == true)
    {
        objList1 = loadList();
        Form2 f2 = new Form2();

        for (int i = 0; i < objList1.Count; i++)
        {
            if (objList1[i] is UniversityStudents)
            {
                UniversityStudents uStudents = (UniversityStudents)objList1[i];

                if (uStudents != null)
                {
                    // do stuff
                }
                else
                {
                    // do something sensible with the error here
                }
            }
            // if clauses for the other "people" objects
            // ...
        }
        f2.FormClosed += new FormClosedEventHandler(childFormClosed);
        f2.Show();
        this.Hide();
    }
} 
```

# matlab - MATLAB 7.6 在 Linux 上编译/运行问题

> ID：13609240
> 
> 赞同：0
> 
> 时间：2012-11-28T16:00:42.233
> 
> 标签：matlab, compiler-construction

我在 MATLAB 7.6 (2010a) 上创建了一个程序 (GUI)，并使用 depoytool 对其进行了编译。但是，当我尝试运行该程序时，它会抱怨一个missig 库文件（libmwmclmcrrt.so.7.6）。我已经安装了 MCR，我试图通过键入文件名和 MCR 的路径来指向它，但没有任何效果。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:13:30.860

在 linux 上，MATLAB 创建名为`run_progname.sh`. 你应该运行这个脚本，而**不是**直接运行你编译的程序。`progname`假设你在编译程序的目录，执行

```
./run_progname.sh <deployedMCRroot> args 
```

# bash - 根据是否用作索引从字符串中删除 ]

> ID：13609241
> 
> 赞同：2
> 
> 时间：2012-11-28T16:00:42.290
> 
> 标签：bash, sed

尝试使用 sed（在 bash 脚本中）进行一些子字符串编辑

```
string1=randomthing0]
string2=otherthing[15]}]
string3=reallyotherthing[5]] 
```

目的是在不用作索引类型（如第二个）时删除 ]s。输出应该是

```
string1=randomthing0
string2=otherthing[15]}
string3=reallyotherthing[5] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:21:21.547

```
sed 's/\([^\[0-9]\)\([0-9\]*\)\]/\1\2/' 
```

这将删除任何前面有不在 [ 或 0-9 中的内容后跟零个或多个 0-9 字符的 ]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:59:36.347

如果 awk 也被接受，请检查下面的 awk 解决方案：

```
awk  'BEGIN{OFS=FS=""}{ for(i=1;i<=NF;i++){
        s+=$i=="["?1:0; 
        e+=$i=="]"?1:0;            
        if(e>s){$i="";e--} } 
        s=e=0; print $0; }' file 
```

**笔记**

*   上面的脚本不够通用。它只删除 unbalanced `"]"`，这意味着`foo[a[b[c]`不会被修改
*   如果有不平衡的 ]，无论它们是否在行尾，它们都会被删除。所以`foo[x]bar]blah`会变成`foo[x]barblah`

一个例子更好地解释了它：（我在你的输入中添加了两行）

```
#in my new lines(1,2) all "]"s surrounded with * should be removed
kent$  cat a.txt  
stringx=randomthi[foo]bar*]*xx*]*
stringy=random[f]x*]*bar[b]*]*blah
string1=randomthing0]
string2=otherthing[15]}]
string3=reallyotherthing[5]]

kent$  awk  'BEGIN{OFS=FS=""}{ for(i=1;i<=NF;i++){
        s+=$i=="["?1:0;
        e+=$i=="]"?1:0;
        if(e>s){$i="";e--} } 
        s=e=0; print $0; }' a.txt
stringx=randomthi[foo]bar**xx**
stringy=random[f]x**bar[b]**blah
string1=randomthing0
string2=otherthing[15]}
string3=reallyotherthing[5] 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:41:42.037

这可能对您有用（GNU sed）：

```
sed -r 's/([^][]*(\[[^]]*\][^][]*)*)\]/\1/g' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:19:52.167

这对我有用：

```
s/\[\([^]]\+\)\]/@B@\1@E@/g
s/\]//g
s/@B@/[/g
s/@E@/]/g 
```

它首先将 all 替换`[...]`为`@B@...@E@`，剩下的唯一`]`是不平衡的。然后，它只是删除它们并将@-strings 替换回来。

请注意：您的输入不应包含@-strings。

# sqlplus - 计算和 SQLPlus

> ID：13609245
> 
> 赞同：2
> 
> 时间：2012-11-28T16:01:04.127
> 
> 标签：sqlplus

我正在努力使用计算总和来解决我的 SQL 表的问题。

列的总和应该显示的所有内容都是一个空白框！

下面的代码：

```
TTITLE CENTER ==================== SKIP 1-
CENTER 'U  T O O L' skip 1-
CENTER ==================== SKIP 1 - 
LEFT 'Tool Report 1.03' SKIP 1 -
LEFT ============ SKIP 2-
RIGHT 'Page:' -
FORMAT 999 SQL.PNO SKIP 2 

set pagesize 50

column MEMBERNAME HEADING 'Member Name'  format a20

compute sum of TOTAL on Rental_ID
Break on RENTAL_ID
select Member.Member_ID, SUBSTR(Member.FName,0,10) || SUBSTR(' ',0,10) ||
SUBSTR(Member.SName,0,15) as MEMBERNAME,
Rental.Rental_ID,
Tool.Name, 
Rental_Line.Qty,
Rental_Line.Price,
TO_Char(Rental_Line.Qty*Rental_Line.Price,'L9,999.99') TOTAL
from Rental_Line
INNER JOIN Rental
on Rental.Rental_ID = Rental_Line.Rental_ID
INNER JOIN Member
on Rental.Member_ID = Member.Member_ID
INNER JOIN Tool_Instance
on Rental_Line.Tool_Instance_ID = Tool_Instance.Tool_Instance_ID
INNER JOIN Tool
on Tool_Instance.Tool_ID = Tool.Tool_ID
where Rental.Rental_ID = '&Rental_ID'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:04:18.047

可能这对你有帮助，因为我知道你需要**SUM(Rental_Line.Qty) OVER (PARTITION BY Rental.Rental_ID)**

```
select Member.Member_ID,
       SUBSTR(Member.FName, 0, 10) || SUBSTR(' ', 0, 10) ||
       SUBSTR(Member.SName, 0, 15) as MEMBERNAME,
       Rental.Rental_ID,
       Tool.Name,
       Rental_Line.Qty,
       Rental_Line.Price,
       TO_Char(Rental_Line.Qty * Rental_Line.Price, 'L9,999.99') TOTAL,
       SUM(Rental_Line.Qty) OVER (PARTITION BY Rental.Rental_ID) TOTAL_QTY,
       SUM(Rental_Line.Qty * Rental_Line.Price) OVER (PARTITION BY Rental.Rental_ID) TOTAL_SUM
  from Rental_Line
 INNER JOIN Rental on Rental.Rental_ID = Rental_Line.Rental_ID
 INNER JOIN Member on Rental.Member_ID = Member.Member_ID
 INNER JOIN Tool_Instance on Rental_Line.Tool_Instance_ID =
                             Tool_Instance.Tool_Instance_ID
 INNER JOIN Tool on Tool_Instance.Tool_ID = Tool.Tool_ID
 where Rental.Rental_ID = '&Rental_ID'; 
```

# javascript - 自定义 JSP 的重新加载

> ID：13609246
> 
> 赞同：0
> 
> 时间：2012-11-28T16:01:06.337
> 
> 标签：javascript, jsp

我有一个 JSP 文件，其中有一些由 确定的选项卡`div`，例如

```
<div>
  <ul>
    <li>Tab1</li>
    <li>Tab2</li>
  </ul>
  <div>
    tab 1 here
  </div>
  <div>
    tab 2 here
  </div>
</div> 
```

现在我在 tab2 中编写了一些 JavaScript，告诉页面重新加载（`window.location.reload()`）。我需要让新重新加载的页面将焦点放在选项卡 2 上，而不是选项卡 1。

有什么方法可以使用客户端代码自定义重新加载的东西。

先感谢您

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:23:20.347

而不是重新加载，将位置更改为同一页面并发送参数

```
window.location.href = <your page here>?focus=2 
```

获取参数使用类似：

```
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
} 
```

设置jsp主体调用这个函数onload：

```
<body onload="focus()">

function focus() {
    tab = getUrlVars()["focus"]; //this will give you the number of the tab you shall focus
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:21:36.387

为了您的目的，您使用参数调用页面，该参数告诉您加载页面时哪个选项卡获得焦点。

```
eg: window.location.href='something.jsp?tab=tab1'; 
```

而且也代替

```
window.location.reload(); 
```

您使用参数重新加载页面

```
window.location=document.url+"?tab=tab2"; 
```

# windows-8 - 命名空间“using:Bing.Maps”中不存在名称“Map”

> ID：13609251
> 
> 赞同：0
> 
> 时间：2012-11-28T16:01:12.180
> 
> 标签：windows-8, windows-runtime, bing-maps, winrt-xaml

我已将以下标记添加到我的 xaml，但它没有被识别。我在命名空间列表中添加了命名空间 xmlns:bing="using:Bing.Maps"。

我还从 [http://visualstudiogallery.msdn.microsoft.com/bb764f67-6b2c-4e14-b2d3-17477ae1eaca为 wondows 商店安装了 bing sdk](http://visualstudiogallery.msdn.microsoft.com/bb764f67-6b2c-4e14-b2d3-17477ae1eaca)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T20:55:44.813

该控件已被弃用。如果您可以使用 Microsoft.Phone.Maps.Controls 命名空间中的新地图控件。 [如何](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207033%28v=vs.105%29.aspx)

# delphi - 我可以向 IBDataset 添加额外的参数吗

> ID：13609253
> 
> 赞同：1
> 
> 时间：2012-11-28T16:01:16.583
> 
> 标签：delphi

是否可以向 IBDataset 添加额外的参数。我想为 select sql 中不存在的字段添加几个额外的值到 insert sql 中。

我不认为 Delphi 支持这一点，但我想知道是否有人有任何独特的解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:06:57.670

*您可以手动*应用插入。例如，如果您有这个 selectSQL：

```
select somefield
  from sometable 
```

您可以编写一个 OnUpdateRecord 事件处理程序并*手动*执行`ukInsert`更新类型，使用如下插入查询：

```
insert into sometable (somefield, someotherfield)
values (:somefield, :someotherfield) 
```

应用插入后，设置`uaApplied`UpdateAction var 参数的值。

# sql - 跟随LINK中的代码后PL / SQL MENU的疑问

> ID：13609256
> 
> 赞同：3
> 
> 时间：2012-11-28T16:01:26.443
> 
> 标签：sql, oracle, plsql, sqlplus

我使用了相同的代码，但不是运行选项 1 和 2 中的脚本，而是脚本要求这个

这是我使用的链接：[How to make a menu in SQLPlus or PL/SQL?](https://stackoverflow.com/questions/11869559/how-to-make-a-menu-in-sqlplus-or-pl-sql)

```
 PROMPT  1: Make a sales invoice 
    PROMPT  2: Inquire a sales invoice    
    accept selection PROMPT "Enter option 1-2: "

    set term off
    column script new_value v_script  --Q1\. What's column script?
    select case '&selection.'          --from accept above
    when '1' then '@test1.sql'  --script to run when chosen option 1.
    when '2' then '@test2.sql'  --script to run when chosen option 2.
    else '@FinalAssignment.sql' --this script
    end as script  --Q2\. What script is this referring to? 
    from dual; --Q3\. Don't know this

    set term on

    @&v_script. --Q4\. What script is being ran here? 
```

这是我得到的输出

```
 SQL> @myScript
    1: Make a sales invoice
    2: Inquire a sales invoice
    Enter option 1-2: 1
    Enter value for v_script: 1
    SP2-0310: unable to open file "1.sql" 
```

我的脚本文件的名称是“myScript”，所以我认为如果输入了无效选项，菜单应该自行重新加载。但是由于某种原因它没有这样做..

我不明白这一点，而且即使执行一个脚本，我也希望代码循环运行，它应该返回菜单并要求另一个选择。如果再次输入无效选项，它应该返回菜单供用户选择另一个选项。

我的包含循环的代码在这里：

```
 PROMPT  1: Make a sales invoice 
    PROMPT  2: Inquire a sales invoice    
    accept selection PROMPT "Enter option 1-2: "

    set term off
    LOOP
    column script new_value v_script  --Q1\. What's column script?
    select case '&selection'          --from accept above
    when '1' then @test1.sql --script to run when chosen option 1.
    when '2' then @test2.sql  --script to run when chosen option 2.
    when '3' then @test3.sql
    EXIT WHEN &selection = 4;
    else '@myScript.sql' --this script
    end as script  --Q2\. What script is this referring to? 
    from dual; --Q3\. Don't know this
    END LOOP;
    set term on

    @&v_script. --Q4\. What script is being ran here? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T12:29:58.080

以下作品：

```
PROMPT  1: Make a sales invoice 
PROMPT  2: Inquire a sales invoice    
accept selection PROMPT "Enter option 1-2: "

column script new_value v_script
select case '&selection'
when '1' then '@test1.sql'
when '2' then '@test2.sql'
else '@FinalAssignment.sql'
end as script
from dual;

prompt '&v_script'

@&v_script 
```

您在代码中的注释导致问题（不知道您的脚本版本中是否有它们）

它所做的是提示输入一个值并将其粘贴在一个名为“selection”的变量中。然后它从对偶中进行选择并调用返回的列“脚本” - 前一个“列”命令正在寻找具有此名称的列，当它看到一个时，它会创建一个名为“v_script”的新变量并将值从将“脚本”列放入其中。（例如“@test1.sql”）

最后，这个变量被用作要调用的脚本的名称。

在 sqlplus 中创建循环很棘手，而且可能不是一件明智的事情。

通过您正在尝试的机制再次调用您的脚本也将遇到 sqlplus 的调用深度（大约 20 个脚本，IIRC） - 虽然不知道在以后的版本中是否已删除/增加。

请注意，“@”表示“在 sqlpath 中运行具有给定名称的脚本 - 在所选结果中添加另一个“@”会将其变为“@@”，这意味着“在当前目录中运行脚本”。

# objective-c - 如何使 MPMoviePlayerController 横向全屏而不是纵向全屏

> ID：13609259
> 
> 赞同：2
> 
> 时间：2012-11-28T16:01:32.273
> 
> 标签：objective-c, ios, mpmovieplayercontroller

我有一个`MPMoviePlayerController`初始化如下：

```
//Code in my UIViewController
@property (nonatomic, strong) UIView *myVideoView;
@property (nonatomic, strong) MPMoviePlayerController *myVideoPlayer;

- (void) initializeVideoPlayer
{
    CGRect frame = CGRectMake(0, 70, self.view.frame.size.width, 200);
    self.myVideoView = [[UIView alloc] initWithFrame:frame];
    [self.view addSubview:self.myVideoView];

    NSURL *videoURL = [NSURL fileURLWithPath:path];

    self.myVideoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];
    self.myVideoPlayer.controlStyle = MPMovieControlStyleEmbedded;
    self.myVideoPlayer.shouldAutoplay = YES;
    [self.myVideoPlayer.view setFrame: self.myVideoView.bounds];
    [self.myVideoView addSubview: self.myVideoPlayer.view];

    //Play video
    [self.myVideoPlayer prepareToPlay];
    [self.myVideoPlayer play];

} 
```

我的问题是当用户将手机旋转为横向而不是全屏时，如何让视频全屏播放。

我尝试将以下内容添加到我的`UIViewController`

```
- (void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if(UIInterfaceOrientationIsLandscape(toInterfaceOrientation))
    {
        [self.myVideoPlayer setFullscreen:YES animated:YES];
    }
    else
    {
        [self.myVideoPlayer setFullscreen:NO animated:YES];
    }
} 
```

但是，这样做的问题是，一旦播放器处于全屏状态，就`willAnimateRotationToInterfaceOrientation`不会再调用了；因此，即使用户旋转回纵向，视频仍处于全屏状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:07:38.760

尝试使用 a`MPMoviePlayerViewController`而不是`MPMoviePlayerController`. 只需在您的中初始化它`UIViewController`并`moviePlayer`像使用普通`MPMoviePlayerController`. 如果您进行子类化，您可以通过实现等`MPMoviePlayerViewController`来控制设备旋转时发生的情况。`willAnimateRotationToInterfaceOrientation`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T05:45:11.423

在 AppDelegate.h 中：

```
@property(nonatomic)BOOL allowRotation; 
```

在 AppDelegate.m 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    RootViewController * root = [[RootViewController alloc] init];
    self.window.rootViewController = root;

//add two Notification

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(MPVisionVideoNotification:) name:MPMoviePlayerWillEnterFullscreenNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(MPVisionVideoNotification:) name:MPMoviePlayerWillExitFullscreenNotification object:nil];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}

- (void) moviePlayerWillEnterFullscreenNotification:(NSNotification*)notification {
    self.allowRotation = YES;
}

- (void) moviePlayerWillExitFullscreenNotification:(NSNotification*)notification {
    self.allowRotation = NO;
}

-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    if (self.allowRotation) {

        return UIInterfaceOrientationMaskLandscapeRight ;
    }
    return UIInterfaceOrientationMaskPortrait;
}

//this can rotate the windows when to fullscreen state 
```

# ms-solver-foundation - 求解查普曼-理查兹方程

> ID：13609265
> 
> 赞同：1
> 
> 时间：2012-11-28T16:01:44.330
> 
> 标签：ms-solver-foundation, nonlinear-optimization

我需要找到一种方法来解决具有 3 个参数的 Chapman-Richards。方程是

`F=a(1-EXP(-bt)) power c`

这是一个非线性问题。目标是最小化误差，约束是 3 个变量必须 >= 0.0001。我们当前的实现使用 Excel 和 Solver 插件（GRG 非线性方法）。但是现在，我们需要在不使用 Excel 的情况下实现这一切。

我的问题是： 1\. 是否可以使用 MS Solver Foundation 来解决这个问题？我已经阅读了一些文档并了解 MS Solver Foundation 使用 Nelder Mead Solver 或混合局部搜索求解器来解决非线性问题。有谁知道我的特定问题是否可以使用这些方法解决？而且，结果是否与使用 Excel 的 Solver 插件的 GRG 非线性方法相同？

1.  如果没有，是否可以实现Excel Solver的GRG非线性方法？

2.  还有其他方法可以实现吗？

感谢您提前回复。卡尔

附录：对不起，我忘了说 t 是时间变量。a、b 和 c 是求解器可以更改的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-16T23:36:16.180

我用 Visual Studio 2013 和 Visual Basic 解决了它，有代码的翻译。

```
Private Sub NelderMead()
    Dim Solver As New Microsoft.SolverFoundation.Solvers.NelderMeadSolver

    Dim objId As Integer
    Solver.AddRow("obj", objId)
    Solver.AddGoal(objId, 0, True)

    Dim aId, bId, cId As Integer
    Solver.AddVariable("a", aId)
    Solver.AddVariable("b", bId)
    Solver.AddVariable("c", cId)

    Solver.SetLowerBound(aId, 0.001)
    Solver.SetLowerBound(bId, 0.001)
    Solver.SetLowerBound(cId, 0.001)

    Solver.FunctionEvaluator = AddressOf FunctionValue

    Dim Par As New Microsoft.SolverFoundation.Solvers.NelderMeadSolverParams
    Dim Solucion = Solver.Solve(Par)

    Debug.Print(Solucion.Result)
End Sub 
```

* * *

```
Function FunctionValue(Model As Microsoft.SolverFoundation.Services.INonlinearModel, _
                       rowVid As Integer, _
                       Values As Microsoft.SolverFoundation.Services.ValuesByIndex, _
                       newValues As Boolean) As Object
    Dim a, b, c As Double

    a = Values(Model.GetIndexFromKey("a"))
    b = Values(Model.GetIndexFromKey("b"))
    c = Values(Model.GetIndexFromKey("c"))

    Return a * Math.Pow(1.0 - Math.Exp(-b * t), c)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:11:11.623

是的，可以使用Solver Foundation 中的*Nelder-Mead求解器来完成。*这是 C# 中的一些示例代码。只需确保您引用了*Microsoft.Solver.Foundation*程序集。

```
 private const double t = 1.0;

    public static void Main()
    {
        var solver = new NelderMeadSolver();

        // Objective function.
        int objId;
        solver.AddRow("obj", out objId);
        solver.AddGoal(objId, 0, true);

        // Define variables.
        int aId, bId, cId;
        solver.AddVariable("a", out aId);
        solver.AddVariable("b", out bId);
        solver.AddVariable("c", out cId);

        // Define bounds.
        solver.SetLowerBound(aId, 0.001);
        solver.SetLowerBound(bId, 0.001);
        solver.SetLowerBound(cId, 0.001);

        // Assign objective function delegate.
        solver.FunctionEvaluator = FunctionValue;

        // Solve.
        var param = new NelderMeadSolverParams();
        var solution = solver.Solve(param);

        Console.WriteLine("The Result is " + solution.Result + ".");
        Console.WriteLine("The minimium objective value is " + 
                          solution.GetValue(objId) + ".");
        Console.WriteLine("a = " + solution.GetValue(aId) + ".");
        Console.WriteLine("b = " + solution.GetValue(bId) + ".");
        Console.WriteLine("c = " + solution.GetValue(cId) + ".");

        Console.ReadKey();
    }

    private static double FunctionValue(INonlinearModel model, int rowVid,
         ValuesByIndex values, bool newValues)
    {
        var a = values[model.GetIndexFromKey("a")];
        var b = values[model.GetIndexFromKey("b")];
        var c = values[model.GetIndexFromKey("c")];

        return a * Math.Pow(1.0-Math.Exp(-b * t), c);
    } 
```

# android - 我可以在普通的未root手机上测试android系统应用程序吗？

> ID：13609266
> 
> 赞同：3
> 
> 时间：2012-11-28T16:01:43.497
> 
> 标签：android

我正在开发将预装在某些设备上的应用程序，但是我在我自己的设备上测试该应用程序，并且需要在我自己的设备上进行演示。目前它作为一个用户应用程序测试它很好，但现在我需要使用只有系统应用程序才能使用的权限。他们是否在项目设置中说它是一个系统应用程序，以便我可以测试和演示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:19:55.243

简短的回答 - 我会根您的手机。但是，无需 root 即可解锁引导加载程序。所以，IMO，你可以安装 CWM 作为你的恢复，然后启动到 CWM，然后使用 CWM 选项安装系统，然后使用 adb 将你的 .apk 复制到 /cache，然后使用 linux util 'cat' 从/cache 到 /system/app，然后使用 CWM 卸载 /system，然后重新启动。

长答案 - 如果您正在开发系统应用程序，请学习 android 的安全环境。了解 /system 文件夹中的权限问题，并了解允许开发人员访问 /system 文件夹的恢复类型工具，在该文件夹中，安装、卸载等 adb 活动受到限制。

[这](http://snipplr.com/view/51901/android-emulator--replace-system-app/)是关于如何安装系统应用程序的较早讨论“froyo”，说明了 /system 文件夹中的一些权限问题。我不会简单地遵循这些说明而不阅读它在蜂窝和 ICS 中是如何完成的。

# c++ - 与 g_signal_handlers_block_by_func() 等效的 gtkmm 是什么？

> ID：13609268
> 
> 赞同：2
> 
> 时间：2012-11-28T16:01:53.557
> 
> 标签：c++, c, gtkmm

我需要阻止我自己（间接）发出的信号。

在 C 中可以使用 g_signal_handlers_block_by_func() 和姊妹函数 unblock。

我可以在 C++ gtkmm 中使用什么？

我有一个 gtkmm dlna 播放器，它每秒都会向 Gtk::HScale Widet发出**改变的信号，因为它（从外部）获得了刚刚播放的歌曲的信号。**然后我寻找到当前的位置，这让这首歌倒退了一秒......

我想阻止我对搜索的更改，因为我看到一个 C 程序使用 g_signal_handlers_block_by_func 完成了该操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:06:27.493

自从番茄问：

我从来没有意识到，connect 方法有一个有价值的返回值：

所以如果你像这样连接信号：

```
mywidget_connection = mywidget.signal_value_changed().connect(sigc::mem_fun(*this, &MyClass::on_value_changed )); 
```

在我的情况下，我有两种更改值的方法：1.）有人拉动滑块：应该更新值并寻找 2.）计时器出现并告诉新位置：应该更新值但不寻找。

然后你可以像这样阻止/取消阻止：

```
mywidget_connection.block();
mywidget.set_value(new_value);
mywidget_connection.unblock(); 
```

这不会发出改变的信号。

# java - 石英调度程序是否在自己的线程上运行？

> ID：13609273
> 
> 赞同：1
> 
> 时间：2012-11-28T16:02:05.090
> 
> 标签：java, quartz-scheduler

我想在我的一个项目中使用石英。我知道作业有一个调度程序和一个线程池。

*   调度程序是否连续在自己的线程中运行并触发作业？
*   如果我在 2 核 CPU 上运行应用程序，一个内核会忙于调度线程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:15:16.050

是的，quartz 至少使用 n+1 个线程，其中 1 是在无限循环中运行的调度程序线程，在应该触发的下一个任务之前休眠。N 是线程池中的工作线程数。您可以使用属性配置此数字`org.quartz.threadPool.threadCount`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:10:11.683

您可以通过例如 Eclipse 运行这些东西来查看它的工作情况，然后在调试视图中您可以看到应用程序的活动和睡眠线程。

Quartz 将创建一个可配置的线程池。每个作业都会在自己的线程中触发（当然，否则它们不能同时运行）。不，它不是一个繁忙的循环，因此调度程序不会为自己申请 CPU。

# sql - 在rails中，通过添加在一起的两个列进行查询？

> ID：13609276
> 
> 赞同：1
> 
> 时间：2012-11-28T16:02:11.487
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, postgresql, activerecord

我想通过这样添加在一起的两列进行查询，但我似乎做对了：

假设数据库有两列：a 和 b。我想查询 a 加 b 大于 100 的数。

```
SomeModel.select("(a + b) as c").where("c > ?", 100) 
```

你会怎么做呢？这是在postgres中。

我可以遍历每个找到的列并在雨中将它们加在一起，但这似乎效率低下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:08:17.433

如果您尝试限制返回的列数，这将无济于事，并且添加`some_model.c`方法也无济于事，但如果可以，请尝试以下操作：

```
SomeModel.where("(a + b) > ?", 100) 
```

# git - 在 Git 上取消版本

> ID：13609279
> 
> 赞同：4
> 
> 时间：2012-11-28T16:02:15.777
> 
> 标签：git, version-control, commit, bitbucket

我正在设计和构建一个 iOS 应用程序，它受本地 git 存储库的版本控制。到目前为止，我已经将*所有内容都*置于版本控制之下，包括“Design”之类的大文件夹，里面装满了我的 Photoshop 资产等。我现在已经向 repo 添加了一个远程位置，显然不想将 Design 文件夹提交到远程。

我用`.gitignore`以下内容制作了一个文件：

```
# File Extensions #
###################
*.psd

# Folders #
###########
/Design/* 
```

哪个应该排除该文件夹和任何 Photoshop 文档？

如何取消对现有设计文件夹的版本化（`git rm`实际上是删除文件！）？另外，当我取消版本时，它会自动缩小巨大的 .git 文件夹吗？

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T16:12:39.160

使用 git 您可以使用`git rm --cached design/`，这将保留文件。

要将其从整个历史记录中删除，您可以尝试以下操作：

```
$ git filter-branch --index-filter 'git rm --cached --ignore-unmatch design/' \
  --prune-empty --tag-name-filter cat -- --all

$ rm -rf .git/refs/original/

$ git reflog expire --expire=now --all

$ git gc --prune=now

$ git gc --aggressive --prune=now 
```

参考：[https ://help.github.com/articles/remove-sensitive-data](https://help.github.com/articles/remove-sensitive-data)

# powershell - 如果未指定 powershell，则参数等于 none

> ID：13609280
> 
> 赞同：0
> 
> 时间：2012-11-28T16:02:22.470
> 
> 标签：powershell, parameters

我正在尝试将各种参数传递给 PowerShell 脚本，但是如果没有传递任何值，则该脚本将退出并出现错误。例如：

```
.powershellscript.ps1 -path C:\test -Name text.txt -Date 20111212 
```

工作正常，但是如果我执行：

```
.powershellscript.ps1 -path C:\test -Name text.txt -Date 
```

我收到以下错误

> “缺少参数'Date'的参数。指定'System.Object'类型的参数，然后重试。”

如果没有通过脚本传递，我希望能够将 Date 值分配给 $Null 。

在 .powershellscript.ps1 中，参数被处理为：

```
param(
    $path,
    $Name,
    $Date
) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:06:08.987

如果您不想为`$Date`调用脚本传递值，如下所示：

```
.powershellscript.ps1 -path C:\test -Name text.txt 
```

`$Date`然后应该`$null`在你的脚本中。

# php - 使用表单内的按钮删除表格行的最佳方法

> ID：13609282
> 
> 赞同：0
> 
> 时间：2012-11-28T16:02:25.513
> 
> 标签：php, mysql, button

我想知道处理这个问题的最佳方法是什么。我在表单中有一个提交按钮和一个普通按钮。我不想在我的删除按钮上提交表单。在按钮之外设置一个链接以使用 $_GET 参数传递到另一个文件是最好的方法吗？基本上，在 php 文件中获取 GET 参数，如果它为真，则执行我的删除功能。这里有更好的方法吗？

```
e.g. <a href="delete.php?delete=true"><input type="button" value="Delete Item" /></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:09:41.707

访问数据 (SELECT) 时应使用 GET 请求。修改数据（UPDATE、CREATE、DELETE）时应使用 POST 请求。即您不应该使用 GET 请求来删除系统资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:07:18.297

我有类似的事情，我使用了两种方法：

第一个是我使用了一个标准按钮，该按钮将`onclick`属性设置为 javascript 函数，该函数将更改隐藏输入的值，然后提交表单。

第二个是提交按钮，但遵循这个问题：[Position div box at the end of the end of after ensuing elements](https://stackoverflow.com/questions/12082683/position-div-box-at-the-end-of-after-ensuing-elements)，我在表单的开头提交了主表单（将保存），然后出现在表单的底部. 这并不意味着当`enter`按钮被按下时，删除提交不会被点击（并被脚本检测到），但主提交会被点击。

# javascript - 使用按钮功能切换 WebAudio API 节点分配时遇到问题

> ID：13609288
> 
> 赞同：-1
> 
> 时间：2012-11-28T16:02:51.280
> 
> 标签：javascript, web-audio-api

下面我有一个名为**buttonClickResult**的函数，当用户单击图像时会启动该函数。我希望单击打开/关闭以在两个值之间重新分配名为**distortionSwitch的变量。**一种称为**emptyCable**，另一种称为**overdrive**。此变量位于名为**bufferFunctionName的函数内**

我不太清楚如何将此变量赋值传递给另一个函数。

总而言之，当用户单击按钮时，**bufferFunctionName 中** 名为**distortionSwitch**的变量应在名为**emptyCable**的变量赋值和名为**overdrive的变量赋值之间切换**

谢谢你。

```
 var humSnd = new Audio('audio/hum.wav');
 var button = document.getElementById('btn1');

 buttonClickResult = function () {
   function playClickSound(filename) {
     var snd = new Audio(filename);
     snd.play();
   }

   button.onmousedown = function buttonClicked() {

     if (button.className == "off") {
       button.className = "on";
       button.src = 'imgs/on.png';
       playClickSound('audio/click.wav');
       humSnd.play();
       humSnd.loop = true;

     } else if (button.className == "on") {
       button.className = "off";
       button.src = 'imgs/off.png';
       playClickSound('audio/click.wav');
       humSnd.pause();

     }

   }
 };

 buttonClickResult();

 var context = new webkitAudioContext();

 // Start Of Web Audio API Buffer & Playback Abstraction

 function audioApiKey(domNode, fileDirectory, bufferFunctionName, incomingBuffer, savedBuffer, xhr) {

   this.domNode = domNode;
   this.fileDirectory = fileDirectory;
   this.bufferFunctionName = bufferFunctionName;
   this.incomingBuffer = incomingBuffer;
   this.savedBuffer = savedBuffer;
   this.xhr = xhr;

   bufferFunctionName = function () {
     var distortionSwitch = overdrive; // THIS SHOULD TOGGLE

     var source = context.createBufferSource();
     source.buffer = savedBuffer;
     source.connect(distortionSwitch.input);

     distortionSwitch.connect(delay.input);

     delay.connect(convolver.input);
     convolver.connect(context.destination);
     source.noteOn(0); // Play sound immediately
   }; 
```

**附录** 当我在 bufferFunctionName 下面编写代码时，即使**它****的**范围以它应该的方式（我认为？）

```
var distortionSwitch = overdrive;     

bufferFunctionName = function () {   
  var source = context.createBufferSource();
  source.buffer = savedBuffer;
  source.connect(distortionSwitch.input);

  distortionSwitch.connect(delay.input);

  delay.connect(convolver.input);
  convolver.connect(context.destination);
  source.noteOn(0); // Play sound immediately
}; 
```

当我这样写它时，它工作正常

```
bufferFunctionName = function () {  

  var distortionSwitch = overdrive;  

  var source = context.createBufferSource();
  source.buffer = savedBuffer;
  source.connect(distortionSwitch.input);

  distortionSwitch.connect(delay.input);

  delay.connect(convolver.input);
  convolver.connect(context.destination);
  source.noteOn(0); // Play sound immediately
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:27:17.603

如果我理解你的问题是正确的，我认为你想要做的是移动这条线：

```
var distortionSwitch = overdrive; 
```

并把它放在上面

```
var humSnd = new Audio('audio/hum.wav');
var button = document.getElementById('btn1');
var distortionSwitch = overdrive; 
```

这使得distortionSwitch 在按钮点击监听器中可用。然后你做

```
if (button.className == "off") {
   button.className = "on";
   button.src = 'imgs/on.png';
   distortionSwitch = overdrive;
   playClickSound('audio/click.wav');
   humSnd.play();
   humSnd.loop = true;
 } else if (button.className == "on") {
   button.className = "off";       
   button.src = 'imgs/off.png';
   distortionSwitch = emptyCable;
   playClickSound('audio/click.wav');
   humSnd.pause();
 } 
```

# oracle - 创建新的物化视图而不清除物化视图日志

> ID：13609291
> 
> 赞同：4
> 
> 时间：2012-11-28T16:03:00.580
> 
> 标签：oracle, oracle11g, materialized-views

我想在预建表上使用物化视图在迁移之前保持表同步。数据不断变化，因此需要跟踪导出开始和导入结束之间的变化。不用说表很大，所以完全刷新太慢了。

步骤 id 喜欢执行：

1.  在新数据库上创建表。
2.  在旧数据库表上创建 mv 日志。
3.  将旧数据库中的数据导入新数据库。
4.  在预构建表上的新数据库上创建物化视图，并从创建 mv 日志的那一刻开始刷新它。

问题是在创建物化视图的那一刻，旧表上的 mv 日志被清除。

老DB：创建表kvrtest（id号，cat号）；

```
alter table kvrtest add ( constraint pkkvrtest primary key (id) using index);

insert into kvrtest (id, cat) values (1, 1);
commit;

CREATE MATERIALIZED VIEW LOG ON kvrtest WITH PRIMARY KEY;

insert into kvrtest (id, cat) values (2, 1);
insert into kvrtest (id, cat) values (3, 2);
commit;

select * from MLOG$_KVRTEST; --Yields 2, these should be caught by a fast refresh. 
```

新建DB：创建表kvrtest（id号，cat号）；

```
alter table kvrtest add ( constraint pkkvrtest primary key (id) using index);

insert into kvrtest (id, cat) values (1, 1); --Simulate import.

commit;

CREATE MATERIALIZED VIEW kvrtest 
ON PREBUILT TABLE WITHOUT REDUCED PRECISION
USING INDEX
REFRESH FORCE ON DEMAND
AS 
select * from kvrtest@oldDb; 
```

此时 mv 日志被清除

```
select * from MLOG$_KVRTEST; --Yields 0, a fast refresh from here does not catch these records. 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T07:02:03.923

当您使用 REFRESH 标记创建新的 MATERIALIZED VIEW 时，日志表正在清除，因为我们的视图实际上是在创建之后。

```
CREATE MATERIALIZED VIEW kvrtest 
ON PREBUILT TABLE WITHOUT REDUCED PRECISION
USING INDEX
REFRESH FORCE ON DEMAND
AS 
```

如果不想清除日志表，请使用 NEVER REFRESH，然后更改为 REFRESH ON DEMAND，如下所示：

```
CREATE MATERIALIZED VIEW kvrtest 
ON PREBUILT TABLE WITHOUT REDUCED PRECISION
USING INDEX
NEVER REFRESH
AS 
select * from kvrtest@oldDb; 
```

让我们看看我们的日志表

```
select * from MLOG$_KVRTEST; 
```

我们有两排，很好！进而

```
ALTER MATERIALIZED VIEW kvrtest 
    REFRESH ON DEMAND; 
```

然后刷新视图日志表后将再次清除。

# c# - 使用 Dictionary 的属性网格中的自定义编辑器

> ID：13609292
> 
> 赞同：0
> 
> 时间：2012-11-28T16:03:03.953
> 
> 标签：c#, .net, propertygrid

我正在使用一个使用字典的属性网格，该字典使用[此处](http://www.differentpla.net/content/2005/02/using-propertygrid-with-dictionary)找到的适配器。

我现在需要能够使用自定义编辑器。更具体地说，文件选择器。如果字典中的对象是一个字符串，它只使用默认的字符串编辑器。

我是否可以实现一个名为 FilePath 的新类或仅充当字符串包装器但会导致属性网格使用 OpenFileDialog，并在选择后将结果显示为 PropertyGrid 中的字符串的东西？

这可能吗？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T18:17:56.960

如果您想使用您引用的字典适配器在属性网格中使用文件路径编辑器，我会按照您的建议制作 FilePath 类。您还需要实现两个额外的类以使这一切都与属性网格一起使用：一个编辑器和一个类型转换器。

假设您的 FilePath 对象是一个简单的对象：

```
class FilePath
{
    public FilePath(string inPath)
    {
        Path = inPath;
    }

    public string Path { get; set; }
} 
```

您的属性网格将以浅灰色显示类名，不是很有用。让我们编写一个 TypeConverter 来显示这个类真正包裹的字符串

```
class FilePathConverter : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        if (sourceType == typeof(string))
            return true;
        return base.CanConvertFrom(context, sourceType);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        if (IsValid(context, value))
            return new FilePath((string)value);
        return base.ConvertFrom(context, culture, value);
    }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        if (destinationType == typeof(string))
            return destinationType == typeof(string);
        return base.CanConvertTo(context, destinationType);
    }

    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType == typeof(string))
            return ((FilePath)value).Path;
        return base.ConvertTo(context, culture, value, destinationType);
    }

    public override bool IsValid(ITypeDescriptorContext context, object value)
    {
        if (value.GetType() == typeof(string))
            return true;
        return base.IsValid(context, value);
    }
} 
```

将 TypeConverter 属性添加到我们的 FilePath 类以转换为字符串和从字符串转换。

```
[TypeConverter(typeof(FilePathConverter))]
class FilePath
{
    ...
} 
```

现在属性网格将显示字符串而不是类型名称，但您希望省略号显示文件选择对话框，因此我们创建了一个 UITypeEditor：

```
class FilePathEditor : UITypeEditor
{
    public override System.Drawing.Design.UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return System.Drawing.Design.UITypeEditorEditStyle.Modal;
    }

    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        FilePath path = (FilePath)value;

        OpenFileDialog openFile = new OpenFileDialog();
        openFile.FileName = path.Path;
        if (openFile.ShowDialog() == DialogResult.OK)
            path.Path = openFile.FileName;
        return path;
    }
} 
```

将 Editor 属性添加到我们的 FilePath 类以使用新类：

```
[TypeConverter(typeof(FilePathConverter))]
[Editor(typeof(FilePathEditor), typeof(UITypeEditor))]
class FilePath
{
    ...
} 
```

现在您可以将 FilePath 对象添加到您的 IDictionary 并通过属性网格使它们可编辑

```
IDictionary d = new Dictionary<string, object>();
d["Path"] = new FilePath("C:/"); 
```

# objective-c - 如何更新 NSTableCellView 的视觉方面？

> ID：13609295
> 
> 赞同：1
> 
> 时间：2012-11-28T16:03:14.633
> 
> 标签：objective-c, macos, cocoa, nstableview, nstablecellview

我有一个`NSTableCellView`带有 2 `NSTextField`s、1`NSProgressIndicator`和 2 按钮的自定义。
我想隐藏 1 个按钮以及`Progress Indicator`当我重新加载表格时。问题是如果我`NSTableView`被隐藏，当我重新加载它时，视觉会更新，否则`NSTableCellView`保持不变（进度条和标签继续可见）。

这是一个示例：
![在此处输入图像描述](../Images/1c46ad7dc7f7486a00ce51cfe97b585b.png)
第一行已更新（我在隐藏时重新加载了表格的数据），但第二行没有更新（我在表格处于活动和可见状态时重新加载了表格的数据）。
对此有什么想法吗？

# php - Zend Framework 2 - 来自其他服务器的 AJAX 请求

> ID：13609296
> 
> 赞同：5
> 
> 时间：2012-11-28T16:03:15.560
> 
> 标签：php, ajax, zend-framework2, cross-domain-policy

我有 2 个域（域 A，域 B）。

在域 A 上放置了 ZF2 应用程序，一切正常。

在域 B 上放置着陆页（带有收集数据的表格的小站点）。

从登陆页面我想将表单数据发送到域 A 上的应用程序（AJAX 请求）。

不幸的是，域 A 上的 ZF2 应用程序没有收到数据，也没有显示结果。当我从 ZF2 应用程序所在的同一域发出 AJAX 请求时，一切正常。

我尝试使用 JSONP 但没有成功。

我没有任何其他线索如何强制它工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T22:39:42.477

正如 Bodgan 的回答所说，这是一个浏览器安全问题，而不是 ZF2 问题。解决此问题的一种流行方法是更改​​域 A 以允许来自域 B 的请求。有关[HTTP 访问控制 (CORS)](https://developer.mozilla.org/en-US/docs/HTTP_access_control)`ACCESS-CONTROL-ALLOW-ORIGIN`的 Mozilla Developer Network (MDN) 页面上讨论了此解决方案和其他解决方案。

基本上，您需要向接收服务器（域 A）表明可以响应资源请求。您可以在`.htaccess`域 A 的 Web 根目录中的文件中执行此操作。下面是一些简单的示例代码，向域 A 指示它应该响应来自所有域的资源共享请求：`*`. 上面链接的 MDN 文章对“跨域资源共享 (CORS)”进行了更深入的讨论。请记住，存在安全隐患，并且在大多数情况下，您不想将服务器开放给来自`*`源的请求，而是开放给您自己控制的特定主机。

```
Options +FollowSymlinks
RewriteEngine on

Header add Access-Control-Allow-Origin "*"
Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T01:08:13.293

您可以更改您的 htaccess 文件以支持，但最简单的方法是使用响应类：

```
$this->_response->setHeader('Access-Control-Allow-Origin', '*'); 
```

[http://framework.zend.com/manual/2.0/en/modules/zend.http.response.html](http://framework.zend.com/manual/2.0/en/modules/zend.http.response.html)

如果您使用 json 作为端点数据源，请将其与 json helper 结合使用，后者将设置您的编码标头和其他一些东西

```
$this->_helper->json->sendJson($jsonIsite); 
```

[http://framework.zend.com/manual/2.0/en/modules/zend.json.introduction.html](http://framework.zend.com/manual/2.0/en/modules/zend.json.introduction.html)

有[https://github.com/zf-fr/zfr-cors](https://github.com/zf-fr/zfr-cors)用于带有 ZF2 的高级 CORS，但上面的简单 json 端点应该可以正常工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T16:43:58.567

由于安全原因，禁止跨域 ajax 请求（这称为同源策略）。 [http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

# javascript - contentEditable - 将插入符号位置存储为变量，然后在此位置插入上传的图像

> ID：13609300
> 
> 赞同：1
> 
> 时间：2012-11-28T16:03:37.473
> 
> 标签：javascript, contenteditable

我有一个 contentEditable 设置为 true 的 div。

我目前拥有的是 iframe 中的文件上传，它将上传文件的位置设置为变量。然后，我将插入符号放在我想要将其添加到 div 的位置，然后单击另一个按钮以添加图像。

我想做的是将插入符号放在适当的位置，然后单击文件上传。然后，当我选择要上传的文件时，它会记住插入符号所在的位置并在那里添加图像。

所以最终我需要将插入符号位置存储在一个变量中。

我认为这会有所作为，但 div 将包含子元素，例如 a、strong 和 span 标签。

这是我到目前为止获得插入符号位置的内容......

```
function getCaretPosition(editableDiv) {
    var caretPos = 0;
    sel = window.getSelection();
        if (sel.rangeCount) {
            range = sel.getRangeAt(0);
            if (range.commonAncestorContainer.parentNode == editableDiv) {
                caretPos = range.endOffset;
            }
        }

    return caretPos;
}

$('.peCont').bind('keyup mouseup', function() { 
    $("p").html(getCaretPosition(this));
});​ 
```

和

```
<div class="peCont" contenteditable="true">Text goes here along with <b>some <i>HTML</i> tags</b>.</div>
<p></p>​ 
```

[http://jsfiddle.net/cDNZK/](http://jsfiddle.net/cDNZK/)

# php - php - 带有数据数组的 print_r()

> ID：13609301
> 
> 赞同：0
> 
> 时间：2012-11-28T16:03:36.890
> 
> 标签：php, joomla, joomla-extensions

在 Joomla 中工作，我设置了模型和视图，但是当页面加载时，没有数据出现。

模型：

```
class mlsModelmls extends JModel
{
/**
 * Gets the info
 */
function mlsdata($column)
    {
    $db =& JFactory::getDBO();
    $query = "
      SELECT *
        FROM ".$db->nameQuote('#__mls')."
        WHERE ".$db->nameQuote('MSTMLSNO')." = ".$db->quote('4112065').";
    ";
    $db->setQuery($query);
    $row = $db->loadRow();
    print_r($row[$column]);
    }
} 
```

看法：

```
class mlsViewmls extends JView
{
function mlsnum($tpl = null)
    {
    $model = &$this->getModel();
    $mlsnum = $model->mlsdata(MSTMLSNO);
    $this->assignRef( 'mlsnum', $mlsnum );

    $agentuid = $model->mlsdata(MSTLISTBRD);        
    $this->assignRef( 'agentuid', $agentuid );

    $listdt = $model->mlsdata(MSTLISTDT);       
    $this->assignRef( 'listdt', $listdt );

          /** Some more assignRef() */

    parent::display($tpl);
    }
} 
```

TMPL：

```
<h2 class="price">
    <?php echo $this->mlsnum; ?>
</h2> 
```

加载页面时，TMPL 看起来很好，但没有出现`<?php echo $this->mlsnum; ?>`引用调用的数据。

每个人都`assignRef()`需要自己的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:10:00.130

尝试改变

```
print_r($row[$column]); 
```

对此：

```
return $row[$column]; 
```

和这个

```
parent::display($tpl); 
```

到

```
return parent::display($tpl); 
```

否则只是没有结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:09:03.177

您的`mlsdata()`方法没有返回任何内容，因此您没有为模板变量分配任何内容。

添加`return $row`和删​​除`print_r`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:13:18.143

尝试将您的模型功能更改为：

```
function mlsdata($column) {

    $db =& JFactory::getDBO();
    $query = " SELECT * FROM ".$db->nameQuote('#__mls')." WHERE ".$db->nameQuote('MSTMLSNO')." = ".$db->quote('4112065').";

    $db->setQuery($query);
    $row = $db->loadRow();

    return $row;
} 
```

# java - spring security中如何获取所有LDAP组

> ID：13609304
> 
> 赞同：2
> 
> 时间：2012-11-28T16:03:40.363
> 
> 标签：java, active-directory, spring-security

如何获取所有 Active Directory 组（不仅与当前用户相关）？我正在使用弹簧安全 ldap。你能提供一些例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-08-29T23:38:26.703

如果您想对用户进行*身份验证*，Spring Security LDAP 非常棒，但如果您只需要*查询*LDAP（在这种情况下针对所有组），那么[Spring LDAP](https://docs.spring.io/spring-ldap/docs/current/reference/)（不要与[Spring Security LDAP](https://mvnrepository.com/artifact/org.springframework.security/spring-security-ldap)混淆）更适合您的目的。

例子：

```
import static org.springframework.ldap.query.LdapQueryBuilder.query;

LdapTemplate ldapTemplate; // Injected via Spring

// Using Java 8 lambda expressions
ldapTemplate.search(
    query().where("objectclass").is("group"),
    (AttributesMapper<String>) attributes -> attributes.get("cn").get().toString()
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T03:48:48.417

您可以做的是编写一个与实现`LdapAuthoritiesPopulator`相匹配的`DefaultLdapAuthoritiesPopulator`实现，并使用一个额外的方法来检索所有角色。

```
public class ExtendedLdapAuthoritiesPopulator
        implements LdapAuthoritiesPopulator {

    // Copy implementation of DefaultLdapAuthoritiesPopulator (omitted).

    private String allAuthorityFilter
        = "(&(objectClass=group)(objectCategory=group))";
    public void setAllAuthorityFilter(String allAuthorityFilter) {
        Assert.notNull(allAuthorityFilter,
                       "allAuthorityFilter must not be null");
        this.allAuthorityFilter = allAuthorityFilter;
    }

    public final Collection<GrantedAuthority> getAllAuthorities() {
        if (groupSearchBase == null) {
            return new HashSet<>();
        }
        Set<GrantedAuthority> authorities = new HashSet<>();
        if (logger.isDebugEnabled()) {
            logger.debug("Searching for all roles with filter '"
                         + allAuthorityFilter + "' in search base '"
                         + groupSearchBase + "'");
        }
        Set<String> roles = ldapTemplate.searchForSingleAttributeValues(
                groupSearchBase,
                allAuthorityFilter,
                new String[0],
                groupRoleAttribute);
        if (logger.isDebugEnabled()) {
            logger.debug("Roles from search: " + roles);
        }
        for (String role : roles) {
            if (convertToUpperCase) {
                role = role.toUpperCase();
            }
            authorities.add(new SimpleGrantedAuthority(rolePrefix + role));
        }
        return authorities;
    }

} 
```

在您的 spring 安全配置中更改`DefaultLdapAuthoritiesPopulator`为您的新实现。

附加属性可以设置`AllAuthorityFilter`哪些过滤器将返回哪些组。

您可能更喜欢您的实现只检索`String`基于角色的名称而不是`GrantedAuthority`实例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T16:25:28.777

检查这个界面： [http ://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/ldap/userdetails/LdapAuthoritiesPopulator.html](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/ldap/userdetails/LdapAuthoritiesPopulator.html)

这个类默认：

[http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/ldap/userdetails/DefaultLdapAuthoritiesPopulator.html](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/ldap/userdetails/DefaultLdapAuthoritiesPopulator.html)

这可能会有所帮助

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-09-03T10:10:13.267

获取所有 LDAP 组可能需要与获取登录用户的组不同的身份验证。可以使用 Spring LDAPTemplate。

```
import java.util.List;
import javax.naming.directory.SearchControls;
import org.springframework.ldap.core.LdapTemplate;
import org.springframework.ldap.core.support.LdapContextSource;
import org.springframework.ldap.filter.AndFilter;
import org.springframework.ldap.filter.EqualsFilter;

public class LDAPListGroups {

    public static void main(String[] args) throws Exception {

        LdapContextSource ldapContextSource = new LdapContextSource();
        //LDAP URL
        ldapContextSource.setUrl("ldap://localhost:10389/dc=example,dc=com");
        //Authenticate as User that has access to this node in LDAP
        ldapContextSource.setUserDn("uid=admin,ou=system");
        ldapContextSource.setPassword("secret");
        ldapContextSource.afterPropertiesSet();
        LdapTemplate ldapTemplate = new LdapTemplate(ldapContextSource);
        ldapTemplate.afterPropertiesSet();

        GroupAttributesMapper mapper = new GroupAttributesMapper();
        SearchControls controls = new SearchControls();
        AndFilter filter = new AndFilter();
        filter.and(new EqualsFilter("objectclass", "groupOfNames"));

        List<Group> groups = ldapTemplate.search("ou=groups", filter.encode(), controls, mapper);
        for (Group group:groups)
        {
            System.out.println(group.getLongID());
        }
    }
}

import javax.naming.NamingEnumeration;
import javax.naming.NamingException;
import javax.naming.directory.Attributes;

import org.springframework.ldap.core.AttributesMapper;
import org.springframework.ldap.support.LdapEncoder;

public class GroupAttributesMapper implements AttributesMapper<Group> {

    public Group mapFromAttributes(Attributes attributes) throws NamingException {
        Group groupObject = new Group(attributes.get("cn").get().toString().toUpperCase());
        NamingEnumeration<?> it = attributes.get("member").getAll();
        while (it.hasMoreElements())
        {
            String elem = (String) it.next();
            elem = elem.substring(elem.indexOf("cn=")+3);
            elem = elem.substring(0,elem.indexOf(","));
            elem = LdapEncoder.nameDecode(elem);
            groupObject.addMember(elem);
        }
        return groupObject;
    }

} 
```

# ios - 使用 If 语句初始化图像

> ID：13609307
> 
> 赞同：0
> 
> 时间：2012-11-28T16:03:55.327
> 
> 标签：ios, xcode

所以我有一个字典，它在所有 100 个位置存储数字 0，但我想使用这些 0 来初始化 100 个没有图像的图像。稍后，当不同的数字替换存储的 0（即 1）时，图像将发生变化。我有以下代码，直到最后一行都有效：

```
NSMutableDictionary *myDict = [[NSMutableDictionary alloc] init];

for (int i = 1; i <= 100; i ++) {
    if(myDict)
    {
        [myDict setObject:[NSNumber numberWithInt:0] forKey:[NSString stringWithFormat:@"block%.3istored",i]];
    }
}
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentPath = [paths objectAtIndex:0];
NSString *path = [documentPath stringByAppendingPathComponent:@"blocks.save"];
BOOL successfulWrite = [myDict writeToFile: path atomically: YES];
if(successfulWrite == NO);

[myDict setObject:[NSNumber numberWithInt:1] forKey:@"block002stored"];

for (int z = 1; z <= 100; z ++) {

    NSString *mapblock=@"mapblock";
    NSString *blocktocheck=[mapblock stringByAppendingFormat:@"%d",z];

    NSLog(@"%d", z);
    NSLog(@"%@", blocktocheck);

    {if (forKey:@"block%.3zstored" == 0) [@"%@", blocktocheck].image = [[UIImage imageNamed:@""]; 
```

}

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:19:25.743

2 件事。

1.  你错过了发送检查的对象... >> if (forKey:@"block....

2.  您需要设置一个有效的密钥 >> @"block%.3zstored"

将其更改为

```
for (int z = 1; z <= 100; z ++) {
    NSString *mapblock=@"mapblock";
    NSString *blocktocheck=[mapblock stringByAppendingFormat:@"%d",z];
    id key = blocktocheck;

    if ([myDict objectForKey:key] == nil) {
         [myDict setObject:img forKey:key];
     }
 } 
```

# php - 如何使用 HSV 值确定图像是否具有纯色背景？

> ID：13609309
> 
> 赞同：0
> 
> 时间：2012-11-28T16:04:09.537
> 
> 标签：php, image-processing, face-detection

我正在尝试研究可以检测上传的照片是否具有**纯背景**的东西。我`imagecolorat()`在一个地方使用随机样本点。上传的照片是标准的特写肩平照片。我正在检查图像某些位置的像素颜色 - 背景中靠近（人的）耳朵区域的某处。

根据 的结果`imagecolorat()`，我能够得到点的 RGB 颜色。然后我将它们转换为 HSV。

**我将如何确定颜色是否相似？**由于照片可能不一定具有样本像素上的确切颜色，因此我需要设置一些容差水平以**允许相似的颜色**。例如，`#3A34B9`应该`#524EB4`没问题，因为它们都是蓝色的，具有不同的 HSV 值，但彼此靠近。

**我应该在 HSV 值中检查什么？**有时灰色物体的 HUE 非常明显，它们仍然是灰色的，应该通过测试。

我现在没有发布任何代码，因为它不是我遇到问题的代码，而是关于**如何正确确定哪些照片具有纯背景**的算法。

这并不是真正的面部检测，我想知道 PHP 是否可以做到这一点，但也知道如何改进上传照片中的样本点会有所帮助。目前，我只将照片划分为区域并从特定区域（大约 1/6 和 5/6 x 轴以及 1/3 y 轴）获取点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:24:59.447

为什么不比较 RGB 值而不是将它们转换为 HSV？您可以通过位移和屏蔽 imagecolorat() 的结果来获得单独的“R”、“G”和“B”值。一旦你得到这些值，就很容易将它们与测试颜色的 rgb 值进行比较。我也不容易建立某种容差，因为每个 rgb 的范围都在 0-255 之间。您可以轻松定义 R、G 和 B 值与测试颜色的差异程度。

来自 php 手册 [imagecolorat()](http://php.net/manual/en/function.imagecolorat.php)

```
<?php
$im = imagecreatefrompng("php.png");
$rgb = imagecolorat($im, 10, 15);
$r = ($rgb >> 16) & 0xFF;
$g = ($rgb >> 8) & 0xFF;
$b = $rgb & 0xFF;

var_dump($r, $g, $b);
?> 
```

# delay - WP8 ScheduledActionService - 警报延迟

> ID：13609311
> 
> 赞同：4
> 
> 时间：2012-11-28T16:04:14.017
> 
> 标签：delay, alarm, windows-phone-8, scheduledactionservice

我收到很多关于在 windows phone 8 上使用我的计时器应用程序的人的延迟通知问题的报告。

[http://www.windowsphone.com/en-us/store/app/timer/38ac6043-0d3e-471a-9527-a20d1ef8521b](http://www.windowsphone.com/en-us/store/app/timer/38ac6043-0d3e-471a-9527-a20d1ef8521b)

总是存在添加到 ScheduledActionService 的警报不是很准确的问题。我通过在实际警报计数为 0 后不久添加和删除虚拟警报来解决应用程序运行时的问题。这“唤醒”了 ScheduledActionService，它检查过期警报并显示通知。这种行为随着 WP8 的改变而改变。

我的小技巧不再起作用，很多人似乎对此感到沮丧。我还收到反馈，有时警报在锁屏下根本不起作用。可悲的是我只能在模拟器上重现第一个问题。有没有人经历过类似的行为？

还有其他可能告诉 ScheduledActionService 检查它的警报吗？

在我纠正此行为之前，是否可以将我的应用程序隐藏在 WP8 设备上的商店中？

问候，

基督教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T15:00:48.000

我遇到了类似的问题。我创建了一个基本的启用语音的计时器应用程序。我遇到的问题是，如果有人将警报设置为在 20 秒内响起，而我很好地创建了该计划的操作，它不会在一分钟内起作用。

“警报和提醒只有在一分钟的范围内是准确的。也就是说，通知可以在预定后的一分钟内启动。” -msdn

我知道你知道这一点，但我想我会把它包括在内以供其他人阅读。我最终最初通过代码中的计时器创建了所有警报，如果用户退出应用程序，那么我才创建计划的操作。如果用户尝试关闭应用程序并且剩余时间不到一分钟，我会显示一个消息框，我不记得确切的警告，但它在退出应用程序后一分钟内无法显示警报。

也许您可以为用户拆分选项？一个精确的计时器，仅在应用程序打开时工作，您可以在代码中控制到秒，以及一个更通用的计时器，在应用程序之外工作，只允许一分钟增量。

# .net - 如何检查 WCF 活动中的属性值？

> ID：13609316
> 
> 赞同：0
> 
> 时间：2012-11-28T16:04:28.787
> 
> 标签：.net, workflow-foundation, workflow-activity

我对 Windows 工作流程真的很陌生，我需要创建一个活动。我这样做了：

```
class CustomActivity : Activity { } 
```

此活动具有自定义属性，我这样做了：

```
class CustomActivity : Activity 
{
    /// <summary>
    /// Creation of the Value Property.
    /// </summary>
    [Description("The value of the property to set")]
    [Category("Configuration")]
    [Browsable(true)]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
    public string Value { get; set; }
} 
```

现在我想检查用户在使用设计器时在此属性中设置的内容。例如，如果他编译工作流，编译工作流时是否有任何回调，所以我可能会产生编译错误？或任何完整性检查回调？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T17:27:44.307

我通过阅读 WF 文档找到了解决方案。这很容易：

创建一个验证器对象：

```
class CustomActivityValidator : ActivityValidator
{
    public override ValidationErrorCollection ValidateProperties(ValidationManager manager, object obj)
    {
        if (null == manager)
        {
            throw new ArgumentNullException("manager");
        }

        if (null == obj)
        {
            throw new ArgumentNullException("obj");
        }

        CustomActivity activity = obj as CustomActivity;
        if (null == activity)
        {
            throw new ArgumentException("This validator can only be used by the CustomActivity", "obj");
        }

        ValidationErrorCollection errors = base.ValidateProperties(manager, obj);
        if (null != activity.Parent)
        {
            // Now actually validate the activity...
            if (activity.Value != "foobar")
            {
                ValidationError err = new ValidationError("This must be only foobar", 100, false, "Value");
                errors.Add(err);
            }
        }

        return errors;
    }
} 
```

然后将此验证器绑定到您的活动类

```
[ActivityValidator(typeof(CustomActivityValidator))]
class CustomActivity : Activity
{
    // Your activity code here
    ...
} 
```

# jmeter - Jmeter查询新用户

> ID：13609317
> 
> 赞同：0
> 
> 时间：2012-11-28T16:04:41.900
> 
> 标签：jmeter

首先对以下问题表示歉意。

我来自过去 8 年的测试背景，对 Jmeter 非常陌生。我浏览了 Jmeter 站点，并使用 jmeter.apache.org 站点运行了一个示例记录，它运行良好。

我想测试我的知识和理解。
所以，我做了以下方式。

1.  创建了一个线程组。
2.  添加了服务器名称为 mail.google.com 的配置元素 HTTP 默认请求。
3.  添加了一个 Sampler 作为 HTTP 请求，将 METHOD 设置为 POST 并提供用户名和密码，然后我运行了测试。

当我看到结果查看器时，我可以看到 gmail 的登录页面，我需要知道如何传递我的用户名和密码并模拟单击提交按钮并获得下一页。

请帮助，我很新，如果解释得尽可能简单，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:51:45.967

使用 jmeter 代理：

*   [http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)

然后修改和改变需要的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-04T15:44:37.397

您可以在 HTTP 发布请求中提供用户名和密码并作为请求参数提交。请看下面的截图：

![示例请求](../Images/fde7caf65e8fff3eeb3a49ab6e7a265f.png)

# qt - 一个 QSplitter 并找到当前的小部件

> ID：13609318
> 
> 赞同：2
> 
> 时间：2012-11-28T16:04:44.527
> 
> 标签：qt

我有一个 QSplitter，里面有四个 QTextEdit 小部件。我知道我可以使用 QObject::findChildren 来接收一个包含小部件内所有小部件的列表（在我的情况下是 QSplitter），但我不知道如何确定哪个是当前的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:45:50.797

正如评论中所说，您正在寻找具有焦点的 QTextEdit ，因此基本上有两个选项：

1.  使用 QApplication::focusWidget() (http://doc.qt.digia.com/qt/qapplication.html#focusWidget)
2.  遍历 QSplitter 的每个孩子并为每个孩子调用 hasFocus() ，这样您就可以知道他们中的哪一个具有焦点（键盘焦点）

第一种方法的主要缺点是您无法确定（直接使用它）该小部件是否属于 QSplitter。第二种方法可能听起来有点低效，但是如果您的 QSplitter 没有很多小部件，那么它会非常好。

正如（OP）评论中指出的那样，您选择了第二种方法，我是在这里发布答案的人，因为 OP 没有足够的声誉来回答他的问题。

# spring - mod_jk 与 mod_cluster

> ID：13609320
> 
> 赞同：4
> 
> 时间：2012-11-28T16:04:52.337
> 
> 标签：spring, tomcat, jboss, mod-jk

有人可以告诉我 mod_jk 与 mod_cluster 的优缺点。

我们正在寻求做非常简单的负载平衡。我们将使用粘性会话，如果一台服务器出现故障，只需要一些东西来将新请求路由到新服务器。我觉得 mod_jk 做到了这一点并且做得很好，那么为什么我需要 mod_cluster？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T22:22:53.587

如果你的 JBoss 版本是 5.x 或以上，你应该使用 mod_cluster，它会给你比 mod_jk 更好的性能和可靠性。这里有一些原因：

*   **应用服务器之间更好**的负载平衡：负载平衡逻辑是根据应用服务器直接提供的信息和指标计算的（请记住，它们有关于其负载的第一手信息），与 mod_jk 相比，逻辑是由代理本身。为此，mod_cluster 在服务器和代理之间使用了一个额外的连接（数据连接的一部分），用于发送此负载信息。
*   **与部署在服务器中的应用程序的生命周期更好地集成**：服务器让代理了解每个节点中应用程序的更改（例如，如果您在其中一个节点中取消部署应用程序，该节点将通知代理（ mod_cluster) 立即，避免这种方式不方便的 404 错误。
*   **它不需要 ajp**：您也可以将它与 http 或 https 一起使用。
*   **更好地管理服务器生命周期事件**：当服务器关闭或重新启动时，它会通知代理其状态，以便代理可以自动重新配置自己。

您也可以对 mod 集群使用粘性会话，当然，如果其中一个节点发生故障，mod cluster 将无助于保持用户会话（因为它也会发生在其他平衡器上，除非您有 JBoss集群中的节点）。但是由于上面给出的原因（跟踪服务器生命周期事件，主要是更好的负载平衡），如果其中一台服务器出现故障，mod cluster 将更好地管理它，对用户更透明（将通知代理立即，因此它永远不会向该节点发送请求，直到它被告知它已重新启动）。

请记住，您可以将 mod_cluster 与 JBoss AS/EAP 5.x 或 JBoss Web 2.1.1 或更高版本一起使用（对于 Tomcat，我认为它是 6 或更高版本）。

总而言之，尽管您的负载平衡用例很简单，但 mod_cluster 提供了更好的性能和可扩展性。

您可以在[JBoss 站点中查找有关 mod_cluster](http://www.jboss.org/mod_cluster)的更多信息，以及它的[文档页面](http://www.jboss.org/mod_cluster/docs)。

# python - 在 Unix 中使用 Python Win32Com .py - QC OTA 库

> ID：13609322
> 
> 赞同：0
> 
> 时间：2012-11-28T16:04:53.967
> 
> 标签：python, unix, python-2.7, hp-quality-center, comobject

如果我的问题让您感到困惑，请原谅我。

我必须`QC OTA Library (DLL)`在我的 Python 脚本中使用 HP Quality Center。在使用`Com Makepy Utility`. 该实用程序在 gen_py 文件夹中为我提供了该 .dll 的 .py。
这是我的问题，
我是否也可以在 Unix 系统上使用相同的注册 .py 文件？或者
我是否有任何其他替代方法可以让我的 Python 脚本在 Unix 中使用该 Quality Center Library 文件作为 Python 兼容类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:29:09.000

OTA 是一个 win 32 COM 库。从理论上讲，它并不打算在 Linux 上运行。您可以尝试在 linux 上使用 WINE，但您也需要在 WINE 中运行您的 python 应用程序。

# java - 并发修改执行

> ID：13609323
> 
> 赞同：0
> 
> 时间：2012-11-28T16:04:58.360
> 
> 标签：java, loops, concurrentmodification

我有一个正常的数据库调用，它从我的数据库中收集信息。我使用这些信息来创建我的对象（`CallQueue`）然后将这些对象添加到列表中，然后返回列表。

突然，我发现我最初的代码没有按预期工作，因为我创建了重复项，所以现在我试图取消正在创建的任何重复项！但有个问题！

我无法遍历我的列表并检查对象是否已经创建！

这是我的代码：

```
while (query.next()) {
    if (!queues.isEmpty()) {
        /*This gives the Execption->*/
        for (CallQueue callQueue : queues) {
            if (callQueue.getType().equals(query.getString("KØ"))) {
                double decimalTime = query.getDouble("TID");
                int hourOfDay = (int)Math.round(24 * decimalTime);
                int callAmount = query.getInteger("ANTAL_KALD");
                if (hourOfDay > 19) {
                    hourOfDay = 19;
                }
                callQueue.addCallsByTime(hourOfDay, callAmount);
            } else {
                String queueName = query.getString("Kø");
                if (!queueName.equalsIgnoreCase("PrivatOverflow")) {
                    CallQueue cq = new CallQueue(query.getString("KØ"));
                    double decimalTime = query.getDouble("TID");
                    int hourOfDay = (int)Math.round(24 * decimalTime); 
                    int callAmount = query.getInteger("ANTAL_KALD");
                    if (hourOfDay > 19) {
                        hourOfDay = 19;
                    }
                    cq.addCallsByTime(hourOfDay, callAmount);
                    queues.add(cq);
                }
            }
        }
    } else {
        String queueName = query.getString("Kø");
        if (!queueName.equalsIgnoreCase("PrivatOverflow")) {
            CallQueue cq = new CallQueue(query.getString("KØ"));
            double decimalTime = query.getDouble("TID");
            int hourOfDay = (int)Math.round(24 * decimalTime); 
            int callAmount = query.getInteger("ANTAL_KALD");
            if (hourOfDay > 19) {
                hourOfDay = 19;
            }
            cq.addCallsByTime(hourOfDay, callAmount);
            queues.add(cq);
        }
    }
}

for (CallQueue callQueue : queues) {
    System.out.println(callQueue.getType());
}
query.Close();
return queues; 
```

我从中得到的执行是：

```
Caused by: java.util.ConcurrentModificationException 
```

[我试图在ConcurrentModificationException](http://java.sun.com/j2se/1.5.0/docs/api/java/util/ConcurrentModificationException.html) 查找执行

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:10:16.190

您正在迭代中进行添加。根据规范，您不能修改您正在迭代的集合。

经典的解决方案是先制作集合的副本，然后对其进行迭代。另一种解决方案是不使用迭代器（简短的 foreach 表示法隐式使用它），而是使用索引手动迭代。

```
for (int i=0; i<queues.size(); i++) {
    CallQueue callQueue = queues.get(i);

    ... code goes here

} 
```

更好的解决方案是使用 Set 而不是列表（除非顺序对您很重要）。这确实意味着您必须正确实现equals和hashcode。

*顺便说一句：我相信你的代码有缺陷。您正在遍历列表，如果遇到的项目不匹配，则在最后添加一个。这意味着，如果您要查找的项目是列表中的第 x 个，则您将添加 x 次新项目。我严重怀疑这是你需要的。如果您进行一些重构，这将立即变得清晰。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:13:30.947

使用 set 而不是 List 来避免这个问题。您可以在要修改的同一列表上进行迭代。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)

# android - 如何在 LazyList 或通用图像加载器中显示动态数据？

> ID：13609329
> 
> 赞同：0
> 
> 时间：2012-11-28T16:05:28.893
> 
> 标签：android, json, lazy-loading, universal-image-loader

我正在测试我在[这里找到的](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)[LazyList](https://github.com/thest1/LazyList) (LL) 和[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader) (UIL) 。此外，我还成功地进行了一些修改，以检索要从 JSON 文档加载的 URL。[JSON](http://api.flickr.com/services/feeds/photos_public.gne?format=json)来自Flickr。我从 JSON获得了*url*（用于获取照片）和更多数据，如*title*、*description*和*author 。*在使用这些图像加载工具之前，我使用 SimpleAdapter 将数据传递给视图，如下所示：

 ***```
 // Hashmap for ListView        
    ArrayList<HashMap<String, String>> itemsList = new ArrayList<HashMap<String, String>>(); 
```

然后是一些将 JSON DATA 放入 itemsList 的代码，然后

```
 ListAdapter adapter = new SimpleAdapter(this, itemsList,
            R.layout.item,
            new String[] { TAG_TITLE, TAG_DESCRIPTION, TAG_AUTHOR }, new int[] {
                    R.id.title, R.id.description, R.id.author });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView list = getListView();

    // Launching new screen on Selecting Single ListItem
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            // getting values from selected ListItem
            String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.description)).getText().toString();
            String author = ((TextView) view.findViewById(R.id.author)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(TAG_TITLE, title);
            in.putExtra(TAG_DESCRIPTION, description);
            in.putExtra(TAG_AUTHOR, author);
            startActivity(in);
        }
    }); 
```

遵循本[指南](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)。现在我尝试将我的代码与 LL 或 UIL 合并，我无法让它工作。

这些图像加载器使用自己的适配器和 GetWiew 方法。所以最后的问题是： **如何将我自己的动态数据传递给他们的适配器？**

* * *

为了更清楚，我想在照片右侧显示*标题*、*描述*和*作者等信息，而不是下图中的“项目 X”：*

![来自 LazyList 的示例](../Images/733d2b27b2ea03aab25c62fb71d1407a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:00:08.237

使用自定义适配器：

```
public class MySimpleAdapter extends SimpleAdapter {

    private List<String> mImageUrls;

    public MySimpleAdapter(Context context, List<? extends Map<String, ?>> data, List<String> imageUrls, int resource, String[] from, int[] to) {
        super(context, data, resource, from, to);
        mImageUrls = imageUrls;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);

        ImageView imageView = view.findViewById(R.id.my_image);
        ImageLoader.getInstance().displayImage(mImageUrls.get(position), imageView);

        return view;
    }
} 
```

并传递`imageUrls`给构造函数。***

# c# - 从 web.config 获取连接字符串以在 EF POCO 中使用？

> ID：13609332
> 
> 赞同：2
> 
> 时间：2012-11-28T16:05:37.557
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, web-config

我注意到，当我使用 EF 创建模型优先数据库时，它会忽略 web.config 连接字符串并在后台做自己的事情。然后我找到了一种在构造函数中设置我自己的连接字符串的方法，就像这样。

```
public class MainDataContext : DbContext
{
    public MainDataContext()
    {
        this.Database.Connection.ConnectionString = "MY CONNECTION STRING THAT IS ACTUALLY USED";
    }
} 
```

问题：如何强制/设置它以使用来自 web.config 的连接字符串？

有人告诉我，如果你像你的数据上下文一样命名你的连接字符串，它会起作用，但它不适合我。我肯定知道，如果我命名它，它就不起作用`DefaultConnectionString`。

```
<add name="MainDataContext" providerName="System.Data.SqlClient"
     connectionString="Server=(LocalDB)\\v11.0;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|ProjectDB.mdf;" /> 
```

当我尝试`update-database -v -f`从控制台执行时发生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:09:21.443

你可以尝试这样的事情：

```
public MainDataContext() :
        base(typeof(MainDataContext).Name)
    {
    } 
```

您确定 Web.config 中的连接字符串声明正确吗？像这样：

```
<?xml version="1.0"?>
<configuration>
<connectionStrings>
    <add name="MyDatabase" connectionString="server=localhost;User Id=user;password=password;Persist Security Info=True;database=mydatabase" providerName="MySql.Data.MySqlClient" />
</connectionStrings>
</configuration> 
```

# php - 部署代码更改

> ID：13609338
> 
> 赞同：-1
> 
> 时间：2012-11-28T16:05:48.393
> 
> 标签：php, codeigniter, web-deployment

> **可能重复：**
> [代码/Web 应用程序部署的最佳实践？](https://stackoverflow.com/questions/5005298/best-practices-for-code-web-application-deployment)

我不知道这是否与stackoverflow有关。

我总是在本地更新和测试代码，然后当需要上传更改时，它给了我一个噩梦。

就像我要么必须通过 Git 存储库并检查我所做的事情并有选择地上传文件（更不用说数据库更改），否则我将不得不重新上传整个内容。

有选择地上传文件和应用数据库更改是一件令人头疼的事情，完全上传会导致服务中断几分钟甚至更糟。

**有没有一些标准的方法来做到这一点？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:07:08.243

特定于 codeigniter -

*   将您的 codeigniter 应用程序文件夹命名为相关的名称 - 日期或您的版本号。对系统文件夹执行相同操作，以便您可以快速查看正在运行的 codeigniter 版本。
*   如果您需要完整上传，请参考如何不间断地进行上传 - 使用更新的日期或版本命名应用程序文件夹。上传文件夹。然后在您的 index.php 文件中将应用程序文件夹的名称更改为新版本。除了无需停机即可切换到新版本-如果您发现错误，它还可以让您立即回滚-只需将应用程序名称更改回索引文件中即可。与尝试有选择地替换实时站点上的文件相比，压力要小得多。
*   你需要一个像 SmartGit 或类似的应用程序，这样你就可以在你的计算机上本地进行 git 跟踪和更改。在本地进行提交——你会更频繁地这样做，因为它是本地的，所以你会有更好的提交历史——当你需要推送到远程时会更快。
*   小点，但如果你把你的应用程序和系统文件夹放在 index.php 文件的上一层——它会更安全，如果你有不同的应用程序文件夹，它会让事情井井有条。

# c# - 按类型划分的 Linq 查询性能

> ID：13609343
> 
> 赞同：5
> 
> 时间：2012-11-28T16:05:59.210
> 
> 标签：c#, .net, performance, linq

工作中出现了一个讨论：

我们有一个具有 IList 的类。Fact 是一个抽象基类，有几个具体的子类（PopulationFact、GdpFact 等）。

最初我们会以这种方式查询给定的事实，即按类型：

```
.Facts.FirstOrDefault(x => x.Year == 2011 && x is GdpFact) 
```

然而，现在提出了一个问题，我们是否应该引入一个 FactType 枚举来代替

```
.Facts.FirstOrDefault(x => x.Year == 2011 && x.FactType == FactType.Gdp) 
```

提出这个建议是因为它应该更快。我承认我没有编写任何测试来尝试辨别性能差异，但我有两个问题：

1）像这样的“查询类型”本质上是不好的吗？
2) 考虑到事实是强类型的，添加 FactType 枚举不是多余的吗？

**更新** 为了澄清，这是 LINQ to objects 和 GdpFact:Fact。

**更新 2** 我们使用当前的典型数据（4 个事实）进行了测量，结果如下：

查找枚举：0.29660000000000003 毫秒查找类型：0.24530000000000002 毫秒

所以在这种情况下类型查找更快！我会仔细选择我接受的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:34:13.467

我做了一个测试，我的 1000000 次迭代的结果大约是

```
ByCast 166ms
ByType 84ms
ByEnum 98ms 
```

所以这`enum`实际上是多余的，而且速度较慢，但​​幅度不大。这不应该太令人惊讶，类型系统是 .Net 框架的基础。

测试代码转录如下，为勘误道歉

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;

class Program
{
    private enum TypeOfFact
    {
        Gdp,
        Other
    }

    private abstract class Fact
    {
        public virtual int Year { get; set; }
        public abstract TypeOfFact FactType { get; }
    }

    private class GdpFact : Fact
    {
        public override TypeOfFact FactType
        {
            get { return TypeOfFact.Gdp; }
        }
    }

    private class OtherFact : Fact
    {
        public override TypeOfFact FactType
        {
            get { return TypeOfFact.Other; }
        }
    }

    static void Main()
    {
        Ilist<Fact> facts = new List<Fact>
            {
                new GdpFact { Year = 2010 },
                new OtherFact { Year = 2010 },
                new GdpFact { Year = 2009 },
                new OtherFact { Year = 2009 },
                new GdpFact { Year = 2011 },
                new OtherFact { Year = 2011 },
            };

        const int interations = 1000000;

        var funcs = new List<Func<IList<Fact>, Fact>>
            {
                ByList,
                ByType,
                ByEnum
            };

        // Warmup
        foreach (var func in funcs)
        {
           Measure(5, func, facts);
        }

        // Results
        foreach (var result in funcs.Select(f => new
            {
                Description = f.Method.Name,
                Ms = Measure(iterations, f, facts)
            }))
        {
            Console.WriteLine(
                "{0} time = {1}ms",
                result.Description,
                result.Ms);
        }
    }

    private static long Measure(
        int iterations,
        Func<IList<Fact>, Fact> func,
        IList<Fact> facts)
    {
        var stopwatch = new Stopwatch();
        stopwatch.Start();
        for (var i = 0; i < iterations; i++)
        {
            func.Invoke(facts);
        }

        stopwatch.Stop();
        return stopwatch.ElapsedMilliseconds;
    }

    private static Fact ByType(IList<Fact> facts)
    {
        return facts.FirstOrDefault(f =>
            f.Year == 2011 && f is GdpFact);
    }

    private static Fact ByEnum(IList<Fact> facts)
    {
        return facts.FirstOrDefault(f =>
            f.Year == 2011 && f.FactType == TypeOfFact.Gdp);
    }

    private static Fact ByCast(IList<Fact> facts)
    {
        return facts.OfType<GdpFact>()
            .FirstOrDefault(f => f.Year == 2011);
    }
} 
```

* * *

这个[问题](https://stackoverflow.com/questions/686412/c-sharp-is-operator-performance)似乎很相关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T16:10:38.623

所有类型的性能相关问题都严格取决于*具体的应用程序上下文*，因此此处提供的答案可能对*您的具体案例*部分正确/错误。

考虑到这一点：

检查枚举值*应该*比检查类型更快，因为在第一种情况下，您只需检查相等`2`整数（枚举值）。

但是这在对象中引入了一个额外的字段，必须跟踪它以具有正确的值（单元测试），在第二种情况下您不需要它，因为它`CLR`关心正确的类型初始化。

我认为你最好根据相关数据量来分析你的想法，你的应用程序通常会运行，并且会*为你*提出正确的想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T16:27:00.650

我认为您的原始方法很好。为此目的提供了“is”关键字。[MSDN](http://msdn.microsoft.com/en-us/library/scekt9xw.aspx)不鼓励使用'is'。使用枚举似乎是过度工程。我们应该尽量保持代码简单。在大多数情况下，代码行数越少越好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T16:19:24.500

这可能是寻找问题的解决方案吗？

我认为在基本类型中同时包含具体子类型和枚举可能会混淆您的设计。你可以想象有人后来出现并编写了一个新的具体类，但没有意识到他们也需要添加到枚举中......

除非您发现与性能有关的特定问题，否则我会倾向于优先考虑清晰度。因此，如果您*需要*不同的具体类（我假设您这样做，因为这是您开始编写它的方式），那么我会坚持使用您的类型而不是移动到枚举。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-28T16:41:33.857

检查枚举值可能比运行时类型检查更快，但是......

1.  这是一种微优化——您不太可能注意到实际场景中的性能差异。
2.  它使事情变得更复杂，更复杂意味着更容易破裂。
    例如，是什么阻止了您或您的一位同事不小心做这样的事情？

    ```
    public class PopulationFact : Fact
    {
        public FactType FactType = FactType.GdpFact;  // should be PopulationFact
    } 
    ```

我会坚持类型检查。实际上[有一个内置的 LINQ 方法](http://msdn.microsoft.com/en-us/library/bb360913.aspx)可以为您完成：

```
.Facts.FirstOrDefault(x => x.Year == 2011).OfType<GdpFact>() 
```

# asp.net-mvc - 在asp.net web api中成功上传后如何获取发布的文件名

> ID：13609345
> 
> 赞同：0
> 
> 时间：2012-11-28T16:06:00.130
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在研究 asp.net mvc web api。我正在尝试通过发布请求上传图片，例如，

```
<form action="/api/mypictures/12" method="post" enctype="multipart/form-data">
        <label for="somefile">File</label>
        <input name="somefile" type="file" />
        <input type="submit" value="Submit" />
    </form> 
```

我已遵循以下程序，

```
[HttpPost]
        public HttpResponseMessage AddImage(HttpRequestMessage request, int id)
        {
            try
            {
                if (!request.Content.IsMimeMultipartContent("form-data"))
                {
                    return request.CreateErrorResponse(HttpStatusCode.UnsupportedMediaType, new HttpError() { { "status", "failed" }, { "message", "Invalid file format" } });
                }
                else
                {
                    string PATH = HttpContext.Current.Server.MapPath("~/App_Data/");
                    var streamProvider = new CustomMultipartFormDataStreamProvider(PATH);
                    var task = Request.Content.ReadAsMultipartAsync(streamProvider).ContinueWith(
                        t =>
                        {
                            if (t.IsFaulted || t.IsCanceled)
                                throw new HttpResponseException(HttpStatusCode.InternalServerError);
                        }
                    );
                    Photo photo = new Photo();
                    photo.Id = id;
                    **photo.Image = "Image that uploaded recently";**
                    photo.IsUserAllowed = true;
                    if (barrepository.AddImage(photo) == 1)
                    {
                        return request.CreateErrorResponse(HttpStatusCode.OK, new HttpError() { { "status", "success" }, { "message", "file uploaded successfully" } });
                    }
                    else
                    {
                        return request.CreateErrorResponse(HttpStatusCode.OK, new HttpError() { { "status", "success" }, { "message", "unable to store the image into database" } });
                    }
                }
            }
            catch(Exception ex)
            {
                return request.CreateErrorResponse(HttpStatusCode.InternalServerError, new HttpError() { { "status", "failed" }, { "message", ex.Message } });
            }
        } 
```

我的 CustomMultipartFormDataStreamProvider 类就像，

```
public class CustomMultipartFormDataStreamProvider : MultipartFormDataStreamProvider
    {
        public CustomMultipartFormDataStreamProvider(string path)
            : base(path)
        { }

        public override string GetLocalFileName(System.Net.Http.Headers.HttpContentHeaders headers)
        {
            var name = !string.IsNullOrWhiteSpace(headers.ContentDisposition.FileName) ? DateTime.Now.ToString("MM-dd-yyyy-hh-mm-ss")+"_"+headers.ContentDisposition.FileName : "NoName";
            return name.Replace("\"", string.Empty); 
        }
    } 
```

上面的过程很好地将文件保存到提到的文件夹中。但我需要在成功上传图像后将该上传的文件名存储到我的数据库表中。成功上传后如何获取发布文件的文件名。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:15:41.783

您可以获得如下文件名：

```
var task = Request.Content.ReadAsMultipartAsync(streamProvider).ContinueWith(
                    t =>
                    {
                        if (t.IsFaulted || t.IsCanceled)
                            throw new HttpResponseException(HttpStatusCode.InternalServerError);

            CustomMultipartFormDataStreamProvider resultProvider = t.Result;
            string fileName = t.FileData.First().LocalFileName;
                    }
                ); 
```

# c - 从 Ada 包装 C 时的结构对齐属性

> ID：13609352
> 
> 赞同：2
> 
> 时间：2012-11-28T16:06:31.083
> 
> 标签：c, alignment, wrapper, ada, structure

`Alignment`从 Ada 包装 C 结构时，何时需要Ada 类型属性？

我们典型的包装器结构看起来像

```
type T is record
  a : aliased Interfaces.C.unsigned_char;
  b : aliased Interfaces.C.double;
end record; 
```

现在，何时/何地

```
for T'Alignment use 8; 
```

需要吗？

这是否取决于目标架构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:55:25.123

Ada 2012 LRM 对[“对齐”](http://www.ada-auth.org/standards/12rm/html/RM-13-3.html#I4950)的定义。

当'对齐与一个类型相关联时，该类型对象的地址必须能被对齐值整除。

因此，在您的定义中，类型 T 的对象可以显式放置，或者将由编译器自动分配，地址为 800，但不是 804。

当某些数据类型必须遵守对齐约束时，这变得相关，例如从双字（8 字节）边界开始的双精度。（这取决于目标架构——有些会施加这样的约束，有些则不会。）同样，某些架构可能允许多字节值从奇数地址开始——“对齐使用 1”——但大多数情况下不允许。

在您描述需要定义与外部定义的 Ada 布局匹配的位置等情况下，最有可能出现此问题。指定 'Alignment 可以确保对象和记录组件得到正确布局以匹配外部源。

通常，特别是在与 C 接口时，简单地将约定[方面](http://www.ada-auth.org/standards/12rm/html/RM-B-1.html#I7338)或[pragma](http://www.ada-auth.org/standards/12rm/html/RM-J-15-5.html#I8496)应用于相应的类型定义将确保 Ada 布局自动匹配 C 布局，将所有详细的对齐和填充留给编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:54:19.733

对齐属性的目的不是支持 C 兼容性，它主要是为了提供与对其数据有特殊对齐限制的硬件的兼容性（包括某些 CPU 的一些数据，最常见的是浮点数和 FPU）。

话虽如此，从技术上讲，我认为在您知道 C 编译器使用的对齐规则的情况下，它可能对 C 兼容性很有用，而您正试图使您的 Ada 代码与之兼容。

在这种特殊情况下，我怀疑编译器会确保 T 类型的所有对象都布置在四字边界上。但是，编译器可能会选择在 T 对象的中间放置七个字节的填充，以确保`double`也将其放置在四字边界上。如果不强迫它使用记录表示条款，你就真的不能说。如果您关心记录结构的内部结构（例如：您想确保它与某些 C 布局匹配），您可能应该明确说明它。

# css - 为什么我的图像被截断了？-现在仅在 IE 中编辑

> ID：13609353
> 
> 赞同：0
> 
> 时间：2012-11-28T16:06:34.730
> 
> 标签：css, html

[http://bmww.com/clients/phwm_sc_website/index.html](http://bmww.com/clients/phwm_sc_website/index.html)

^ 这就是目前正在测试的站点的链接。我在这里听取了每个人的建议，并正在努力删除我为头部导航所做的表格。所以现在它们并排对齐，但带有 div 的徽标需要更高，但顶部不会被切断。

这是我的html：

```
<div id="header" class="header2" align="center">

<div class="container3">

<div class="divrow"><h1><a class="ex1" href="index.html">[ HOME ]</a></h1></div>
<div class="divrow"><h1><a class="ex1" href="index.html">[ TEAMS ]</a></h1></div>
<div class="divrow1"><img align="middle" src="images/phwm_sc_logo.png" width="170" height="212" alt="logo" /> </div>
<div class="divrow"><h1><a class="ex1" href="index.html">[ STAFF ]</a></h1></div>
<div class="divrow"><h1><a href="index.html" class="ex1">[ GALLERY ]</a></h1> </div>
</div>

</div><!--end red navigation header div--> 
```

这是我的CSS：

```
.header1 { position:relative; top: 0px; z-index:10;
width: 100%; height:50px;
background: rgba(0, 54, 103, 0.6); /* Color white with alpha 0.9*/
/* Fallback for web browsers that doesn't support RGBa */
background: rgb(0, 54, 103) transparent;
/* For IE 5.5 - 7*/
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99003667,  endColorstr=#99003667);
/* For IE 8*/
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99003667, endColorstr=#99003667)";}

.header2 { position:relative; top:10px;
width: 100%; height:80px; z-index:50;
background: rgba(210, 6, 46, 0.4); /* Color white with alpha 0.9*/
/* Fallback for web browsers that doesn't support RGBa */
    background: rgb(210, 6, 46) transparent;
    /* For IE 5.5 - 7*/
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99d2062e,   endColorstr=#99d2062e);
/* For IE 8*/
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99d2062e,  endColorstr=#99d2062e)";}

.divrow { position: relative; display:inline; margin-top:30px;
float:left;  }
.divrow1 { position:relative; display:inline; margin-top:-60px;
float:left; z-index:50; margin-bottom:-20px;  } 

.sponsor { position:absolute; top: 730px; z-index:10;
width: 100%; height:300px;
background-color: #FFF;
-webkit-box-shadow: 0 0 10px #FFF;
-moz-box-shadow: 0 0 10px #FFF;
box-shadow: 0 0 10px #FFF
}
  .container1 { clear:both;
width: 960px; z-index:-1;
background-color: none; /* Color white with alpha 0.9*/
margin: 0 auto; /* the auto value on the sides, coupled with the width, centers the layout */
margin-top:60px;
}
.container2 {
width: 960px; z-index:-1;
background-color: none; /* Color white with alpha 0.9*/
margin: 0 auto; /* the auto value on the sides, coupled with the width, centers the layout */
margin-top:100px; }

.container3 {
width: 700px; 
background-color: none; /* Color white with alpha 0.9*/
margin:auto; /* the auto value on the sides, coupled with the width, centers the layout */
} 
```

如果需要，我可以提供更多...我知道这可能是一个简单的解决方法，但我仍在学习。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:29:09.117

divrow1 类的 CSS 有错字。您拼错了“位置：绝对；” 在 CSS 文件的第 134 行。如果绝对拼写正确，图像将不再被截断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:13:36.177

添加

```
clear: both; 
```

至`.container1`

并删除

```
overflow:hidden; 
```

从`.container3`

这应该够了吧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:11:22.410

我注意到您的 .divrow1 边距需要更改：

```
.divrow1 {
    position: absoulte;
    display: inline;
    /*margin-top: -30px;*/
    float: left;
} 
```

编辑：

您需要对布局进行少量更新，这不是最好的方法，但它可能是最简单的方法：

```
<div class="container3">
    <div class="divrow1">
        <img align="middle" src="images/phwm_sc_logo.png" width="170" height="212" alt="logo"> 
    </div>
    <div class="divrow"><h1><a href="index.html">[ HOME ]</a></h1></div>
    <div class="divrow"><h1><a href="index.html">[ TEAMS ]</a></h1></div>
    <div class="separator"></div>
    <div class="divrow"><h1><a href="index.html">[ STAFF ]</a></h1></div>
    <div class="divrow"><h1>[ GALLERY ]</h1> </div>
</div> 
```

修改后的 CSS：

```
.divrow1 {
    position: absolute;
    display: block;
    margin-top: -50px;
    margin-left: 200px;
}

.separator {
    float: left;
    width: 150px;
    margin-top: 30px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:08:38.037

如果您删除

```
overflow:hidden; 
```

从`.container3`，您的图像不会被截断。

但是，这会扭曲您的网站。这是因为 logo 太大了，把它调整到 190px 左右的高度就可以了。

# database - 是否可以使用 oracle 数据泵导出数据库中的所有模式？

> ID：13609359
> 
> 赞同：4
> 
> 时间：2012-11-28T16:06:49.287
> 
> 标签：database, oracle, datapump

我正在使用 Oracle 11g 11.2.0.1.0，我正在尝试找到一种使用数据泵导出数据库中所有模式的方法。我知道您可以使用 SCHEMAS 参数指定多个模式，但我需要能够导出所有模式而不必显式命名它们，因为在任何给定时间我都不确切知道那里有哪些模式（它是一个开发数据库和开发人员可以随时添加模式）。有没有办法用数据泵做到这一点？还是有其他工具可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T16:57:51.460

您可以使用以下命令导出所有模式`full=y`：

```
expdp system/password@db10g full=Y directory=TEST_DIR dumpfile=DB10G.dmp logfile=expdpDB10G.log
impdp system/password@db10g full=Y directory=TEST_DIR dumpfile=DB10G.dmp logfile=impdpDB10G.log 
```

[来源](http://www.oracle-base.com/articles/10g/oracle-data-pump-10g.php)

# android - Android - 用随机值填充数据库列

> ID：13609361
> 
> 赞同：0
> 
> 时间：2012-11-28T16:06:52.827
> 
> 标签：android, database, random, populate

我正在尝试用这样的随机值填充数据库列，它在 sql 中工作（每一行都有一个不同的随机值）

```
UPDATE vyroky SET poradie = RANDOM(); 
```

但是，当我尝试使用内容解析器和提供者执行此操作时，它只是出于某种原因插入 0

```
ContentValues values = new ContentValues();
values.put(QuoteContentProvider.COLUMN_ORDER, "RANDOM()");
int count = getContentResolver().update(QuoteContentProvider.CONTENT_URI, values, null, null); 
```

谢谢 ！

# javascript - 如何将一些样式应用于 JavaScript 的“节点”对象

> ID：13609363
> 
> 赞同：2
> 
> 时间：2012-11-28T16:07:00.273
> 
> 标签：javascript

想象一下，我有如下几个陈述：

```
var n1 = oDiv.firstChild;
var n2 = oDiv.lastChild.previousSibling.firstChild; //know this crazy, but for knowledge sake 
```

如何应用以下各种样式（通常仅适用于“元素”类型而不适用于“节点”类型）：

```
//does not work
n1.style.borderWidth = "1px";
n1.style.borderColor = "#336699";
n2.style.borderStyle = "solid"; 
```

另外，有没有办法在 JavaScript 中将“节点”类型转换为“元素”？

**更新：**

我试图在上面完成的代码在这里[http://jsfiddle.net/anthachetta/4mXrd/](http://jsfiddle.net/anthachetta/4mXrd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:47:55.240

DOM 的工作方式与 HTML 完全相同。这是有道理的，因为 DOM 旨在将 HTML 建模为对象。那么，如果你想将以下内容加粗，你会怎么做：

```
Hello World 
```

从您的代码中，您想要做的是这样的事情：

```
style=font-weight:bold Hello World 
```

显然这行不通，因为它不是有效的 HTML。你通常会这样做：

```
<span style='font-weight:bold;'>Hello World</span> 
```

所以你需要在 DOM 中做同样的事情：

```
// Assume you have a div "div" and the first child
// is the text node "Hello World"

var hello_world = div.firstChild;

// Now, you want to make Hello World bold.
// So you need to create a span:

var span = document.createElement('span');
span.style['font-weight'] = 'bold';

// Now wrap hello_world in the span:

span.appendChild(div.removeChild(hello_world)); 
```

以上是执行您想要的实际工作的 DOM 代码。但请注意：

1.  符合标准的浏览器也将空白视为节点。
2.  IE 不将空格算作节点。

例如，如果您的 HTML 如下所示：

```
<div>
    <span>Hi</span>
</div> 
```

标准规定您的 DOM 必须如下所示：

```
div +
    |---- text node (whitespace)
    '---- span +
               '---- text node (Hi) 
```

但 IE 做了大多数人可能期望的事情：

```
div +
    '---- span +
               '---- text node (Hi) 
```

这意味着你不能盲目地信任`node.firstChild`而不检查它是否是你所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:49:59.813

有几个问题。

`lastChild.previousSibling.firstChild`乱七八糟是怎么回事？所做的一切都让你感到困惑。

那些乱七八糟的属性返回给你一个文本节点，而不是一个元素。

`lastChild`给你`"a line"`，`previousSibling`得到`<i>`标签，然后`firstChild`返回`"just"`。您正在尝试将样式应用于文本节点，这是您无法做到的，您需要为元素设置样式。

您正在尝试将样式应用于`nodeValue`. 那是一个字符串。您可以使用从文本节点`parentNode`获取`<i>`标签。

```
oDiv.lastChild.previousSibling.firstChild.parentNode.style.color = "#FF0000"; 
```

演示：http: [//jsfiddle.net/NTICompass/4mXrd/2/](http://jsfiddle.net/NTICompass/4mXrd/2/)

# c# - 实体框架的问题

> ID：13609365
> 
> 赞同：1
> 
> 时间：2012-11-28T16:07:04.653
> 
> 标签：c#, entity-framework, visual-studio-2012

我在使用 EntityFramework 时遇到问题。虽然以下代码在我的 PC 上运行良好，但当它传输到 VPS（所有内容都已正确预装）时，它给了我一个未处理的异常：System.NullReferenceException：对象引用未设置为对象的实例，但消息框应该抓住这个没有出现。有什么建议么？

先感谢您。

```
 var cc = new CopierContext();
        try
        {
            MessageBox.Show(cc.Database.Connection.ConnectionString.ToString());

            var matchingProviders2 = cc.Providers.Where(prov => prov.Login == "batman");
        }
        catch (Exception e)
        {
            MessageBox.Show(e.InnerException.Message);
        } 
```

更新：

我终于找到了问题的核心。原因是：我在 VPS 上安装了 .NET 4，而应用程序是使用 .NET 4.5 开发的。安装后一个消除了所有问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:45:43.147

[来自Exception.InnerException](http://msdn.microsoft.com/en-us/library/system.exception.innerexception.aspx)属性的文档

> InnerException 属性返回与传递给构造函数的值相同的值，或**null 引用**

由于您正在捕获任何旧异常`catch (Exception e)`，因此很可能抛出的异常不是您期望的异常并且没有 InnerException。这意味着您的 catch 块可能会引发异常。

您可以采取多种行动。

1.  除了顶级异常处理程序之外，不要在任何东西中捕获 System.Exception 异常。只捕获您知道如何处理的异常。这导致...
2.  设置顶级异常处理程序
3.  最后，在记录或显示异常消息时，至少在尝试使用它之前确保你有一个内部异常。

    `MessageBox.Show( (e.InnerException != null ? e.InnerException : e).Message );`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:20:01.737

我不知道您是如何在您的 VPS 上运行它的，但如果它不是在交互式用户帐户下启动，您的消息框将不会显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T21:18:54.533

我敢打赌，您没有配置某些东西（或没有正确配置它）并且`cc.Database.Connection.ConnectionString`为空。调用`.ToString()`会导致 NullReferenceException。这就是您看不到消息框的原因。正如其他人所说 - 使用 MessageBox 进行这种调试不是一个好主意。在捕获中，您应该打印的不是消息，而是 e.ToString() 它将显示应该指向问题所在位置的堆栈跟踪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:17:37.163

不要使用 MessageBox，因为它是一项服务；将它们记录到磁盘上，以便您可以回忆它们，或者可能会自动将它们邮寄给您，以便您及时了解发生的问题。

您还需要添加`e.InnerException.StackTrace`到日志中。

# algorithm - Hadoop / MapReduce - 优化“Top N”字数 MapReduce 作业

> ID：13609366
> 
> 赞同：9
> 
> 时间：2012-11-28T16:07:06.060
> 
> 标签：algorithm, hadoop, mapreduce

我正在研究类似于规范 MapReduce 示例的东西 - 字数统计，但有一个转折点，我希望只获得**前 N**个结果。

假设我在 HDFS 中有大量的文本数据。有很多示例展示了如何构建 Hadoop MapReduce 作业，该作业将为您提供该文本中每个单词的字数统计。例如，如果我的语料库是：

> “这是对测试数据的测试，也是测试这一点的好方法”

标准 MapReduce 字数统计作业的结果集将是：

> test:3, a:2, this:2, is: 1, etc..

但是，如果我**只想**获得在我的整个数据集中使用的前 3 个单词怎么办？

我仍然可以运行完全相同的标准 MapReduce 字数计数作业，然后在它准备好并吐出每个字的计数后只取前 3 个结果，但这似乎有点低效，因为需要大量数据在洗牌阶段四处移动。

我在想的是，如果这个样本足够大，并且数据在 HDFS 中随机分布良好，那么每个 Mapper 不需要将其所有字数发送到 Reducers，而是只需要顶部数据。所以如果一个映射器有这个：

> a:8234, the: 5422, man: 4352, ...... *还有更多的词*......，稀有词：1，怪异词：1，等等。

然后我想做的只是将每个 Mapper 的前 100 个左右的单词发送到 Reducer 阶段——因为当一切都说完后，“稀有词”突然进入前 3 名的可能性很小。这似乎可以节省带宽和 Reducer 处理时间。

这可以在组合器阶段完成吗？这种在洗牌阶段之前的优化是否普遍进行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T16:58:53.890

这是一个非常好的问题，因为您遇到了 Hadoop 字数统计示例的低效率问题。

优化问题的技巧如下：

在本地地图阶段进行`HashMap`基于分组，您也可以为此使用组合器。这看起来像这样，我使用的`HashMultiSet`是 Guava，它有利于一个很好的计数机制。

```
 public static class WordFrequencyMapper extends
      Mapper<LongWritable, Text, Text, LongWritable> {

    private final HashMultiset<String> wordCountSet = HashMultiset.create();

    @Override
    protected void map(LongWritable key, Text value, Context context)
        throws IOException, InterruptedException {

      String[] tokens = value.toString().split("\\s+");
      for (String token : tokens) {
        wordCountSet.add(token);
      }
    } 
```

然后在清理阶段发出结果：

```
@Override
protected void cleanup(Context context) throws IOException,
    InterruptedException {
  Text key = new Text();
  LongWritable value = new LongWritable();
  for (Entry<String> entry : wordCountSet.entrySet()) {
    key.set(entry.getElement());
    value.set(entry.getCount());
    context.write(key, value);
  }
} 
```

因此，您已将单词分组到本地工作块中，从而通过使用一点 RAM 来减少网络使用。你也可以对 a 做同样的事情`Combiner`，但它是按组排序的，所以这会比使用 a 慢（尤其是字符串！）`HashMultiset`。

要获得 Top N，您只需将 Top N 写入`HashMultiset`输出收集器的本地，并在 reduce 端以正常方式聚合结果。这也为您节省了大量的网络带宽，唯一的缺点是您需要在清理方法中对字数元组进行排序。

部分代码可能如下所示：

```
 Set<String> elementSet = wordCountSet.elementSet();
  String[] array = elementSet.toArray(new String[elementSet.size()]);
  Arrays.sort(array, new Comparator<String>() {

    @Override
    public int compare(String o1, String o2) {
      // sort descending
      return Long.compare(wordCountSet.count(o2), wordCountSet.count(o1));
    }

  });
  Text key = new Text();
  LongWritable value = new LongWritable();
  // just emit the first n records
  for(int i = 0; i < N, i++){
    key.set(array[i]);
    value.set(wordCountSet.count(array[i]));
    context.write(key, value);
  } 
```

希望您了解在本地做尽可能多的单词的要点，然后只聚合前 N 个中的前 N ​​个；）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-14T05:59:20.540

引用托马斯

> 要获得 Top N，您只需将该本地 HashMultiset 中的 Top N 写入输出收集器，并在 reduce 端以正常方式聚合结果。这也为您节省了大量的网络带宽，唯一的缺点是您需要在清理方法中对字数元组进行排序。

如果您只在本地 HashMultiset 中写入前 N 个元素，那么您可能会错过一个元素的计数，如果从这个本地 HashMultiset 传递，它可能成为整体前 10 个元素之一。

例如，考虑以下格式作为 MapName 的三个映射： elementName,elementntcount：

地图A：Ele1,4：Ele2,5：Ele3,5：Ele4,2

地图 B : Ele1,1 : Ele5,7 : Ele6, 3 : Ele7,6

地图 C : Ele5,4 : Ele8,3 : Ele1,1 : Ele9,3

现在，如果我们考虑每个映射器的前 3 个，我们将错过总计数应该为 6 的元素“Ele1”，但由于我们正在计算每个映射器的前 3 个，我们看到“Ele1”的总计数为 4。

我希望这是有道理的。请让我知道您对此有何看法。

# html - 纸张 8.5x11 的 CSS 是什么？

> ID：13609371
> 
> 赞同：0
> 
> 时间：2012-11-28T16:07:27.553
> 
> 标签：html, css

我想在纸张 8.5x11 中为打印 html 设置 css。有两个代码。

```
body {
     width: 7.5in;
     padding: 0.5in;
 }
 table.example {
 width: 90%;
 } 
```

或者

```
 <style type="text/css">
  .page {
   height: 900px;  /* You'll need to play with this value */
   width: 670px;
   page-break-after: always; /* Always insert page break after this element */
  page-break-inside: avoid; /* Please don't break my page content up browser */
   }
</style>
<body>
    <div class="page">
      <table>
       blah
      </table>
   </div>
</body> 
```

哪一个是对的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:21:00.427

实现这一目标的正确方法是使用“媒体查询”

在主样式表的末尾插入所有要打印的声明，并用这个独特的规则将它们括起来：`@media print { … }`

1.  `@media screen {…}`在单独的规则中包含所有屏幕样式；

2.  省略精简样式表的媒体类型：`<link rel="stylesheet" href="css/style.css"/>`

[来源](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)

# r - 从散点图更改图例周围的边框

> ID：13609375
> 
> 赞同：1
> 
> 时间：2012-11-28T16:07:35.203
> 
> 标签：r, legend, scatter-plot, legend-properties

这应该很简单，但我不知道如何从我的图例中删除边框。我还想将图例放在图表中并删除内部网格线以及顶部和左侧边框。我正在使用 scatterplot 函数，这是我迄今为止编写的代码：

```
scatterplot(Comp1~ln1wr|Season, moose,  
      xlab = "Risk", ylab = "Principal component 1",
      labels= row.names(moose), by.groups=T, smooth=F, boxplots=F, legend.plot=F)
      legend("bottomleft", moose, fill=0) 
```

在这里，我只是在尝试是否可以将图例放置在其他位置，但是每次运行此代码时，都会出现错误

```
Error in as.graphicsAnnot(legend) : 
  argument "legend" is missing, with no default 
```

我想将图例放在图表中，但不会与数据显示冲突。这是样本数据：

```
structure(list(ID = structure(c(1L, 1L, 1L, 1L, 1L, 32L, 33L, 
33L, 34L, 34L, 34L), .Label = c("F07001", "F07002", "F07003", 
"F07004", "F07005", "F07006", "F07008", "F07009", "F07010", "F07011", 
"F07014", "F07015", "F07017", "F07018", "F07019", "F07020", "F07021", 
"F07022", "F07023", "F07024", "F10001", "F10004", "F10008", "F10009", 
"F10010", "F10012", "F10013", "F98015", "M07007", "M07012", "M07013", 
"M07016", "M10007", "M10011", "M10015"), class = "factor"), Season = structure(c(1L, 
1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 2L), .Label = c("SUM", "WIN"
), class = "factor"), Time = structure(c(1L, 2L, 1L, 2L, 1L, 
2L, 1L, 2L, 1L, 2L, 1L), .Label = c("day", "night"), class = "factor"), 
    Repro = structure(c(2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 
    3L), .Label = c("f", "fc", "m"), class = "factor"), Comp1 = c(-0.524557195, 
    -0.794214153, -0.408247216, -0.621285004, -0.238828585, 0.976634392, 
    -0.202405922, -0.633821539, -0.306163898, -0.302261589, 1.218779672
    ), ln1wr = c(0.833126490613386, 0.824526258616325, 0.990730077688989, 
    0.981816265754353, 0.933462450382474, 1.446048015519, 1.13253050687157, 
    1.1349442179155, 1.14965388471562, 1.14879830358128, 1.14055365645628
    )), .Names = c("ID", "Season", "Time", "Repro", "Comp1", 
"ln1wr"), row.names = c(1L, 2L, 3L, 4L, 5L, 220L, 221L, 222L, 
223L, 224L, 225L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:56:33.733

我会建议

```
par(bty="l",las=1)
scatterplot(Comp1~ln1wr|Season, moose,  
      xlab = "Risk", ylab = "Principal component 1",
            labels= row.names(moose),
            by.groups=TRUE, smooth=FALSE, boxplots=FALSE,
            grid=FALSE,
            legend.plot=FALSE)
legend("bottomright", title="Season",
       legend=levels(moose$Season), bty="n",
       pch=1:2, col=1:2) 
```

*   如 中所示`?legend`，`bty`控制图例框——`"n"`表示“无。
*   我将图例放在右下角而不是左下角，因为这样似乎可以更好地避免您的数据。
*   我曾经`bty="l"`消除顶部和右侧的盒子边缘（这意味着“盒子类型L”）
*   我曾经`las=1`让 y 轴刻度标签水平 - 你没有要求，但我非常喜欢它
*   `grid=FALSE`删除内部网格线

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:01:02.843

您必须唯一的驼鹿 ID，因为每只驼鹿有多个点。

> 传奇（“左下角”，传奇=独特（驼鹿））

然后你必须将颜色和点类型与你的图例相关联（对应于你情节中的驼鹿 ID）。我也会看看 plot() 而不是 scatterplot()。

# magento - Magento - 自定义发票号码

> ID：13609377
> 
> 赞同：3
> 
> 时间：2012-11-28T16:07:39.333
> 
> 标签：magento, invoice

我需要将我的默认发票编号从 修改`100000001`为`2012 - 00001`。

我知道在哪里可以找到`increment_last_id`table `eav_entity_store`。但我不知道我必须设置什么才能采用新的发票编号格式。

请提供一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T08:02:59.780

`increment_id`您可以通过编辑以下类来自定义订单/发票/creditmemo/shipment number ( )：

```
Mage_Eav_Model_Entity_Increment_Numeric 
```

特别是，仔细查看以下方法的代码：

`getNextId()`, `getPrefix()`, `getPadLength()`,`format($id)`

现在，您将找不到 methods 的方法定义`getPrefix()`，`getPadLength()`因为这些是神奇的 getter 方法。您可以根据需要定义这些方法。

例如：

```
public function getPrefix(){

     $prefix = $this->_getData('prefix');

     /* Do some customization */

    return $prefix;
} 
public function getPadLength()
{ 
     $padLength = $this->_getData('pad_length');

     /* Do some customization */

     return $padLength;
} 
```

这样，您不必为此手动更改数据库结构中的任何内容。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:17:14.500

如果您想手动操作，请查看@How [to Change the Invoice Increment ID and Prefix in Magento](http://www.warpconduit.net/2012/04/18/how-to-change-the-order-increment-id-and-prefix-in-magento/)（请记住始终进行备份）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T16:19:02.047

更改发票 ID 的最佳方法是运行以下简单的 sql 查询：

1.  通过运行以下查询检查 eav_entity_store 表中是否存在发票记录

    select * from eav_entity_store where entity_type_id in (select entity_type_id from eav_entity_type where entity_type_code='invoice');

2.  如果不存在记录，请从 magento 后端创建一张虚拟发票。然后您将在表中有一条记录，现在运行以下脚本：

    更新 eav_entity_store 设置 increment_last_id="YOUR_DESIRED_INVOICE_ID", increment_prefix='X-' where entity_type_id in (select entity_type_id from eav_entity_type where entity_type_code='invoice')

试试这个并创建新发票：

更新 eav_entity_store 设置 increment_last_id="0001", increment_prefix='2002' where entity_type_id in (select entity_type_id from eav_entity_type where entity_type_code='invoice')

[http://deepakbhatta.com/magento-set-custom-invoice-id/](http://deepakbhatta.com/magento-set-custom-invoice-id/)

这对我来说很好。

谢谢

# windows-8 - Windows 应用商店应用程序包中的额外文件

> ID：13609378
> 
> 赞同：1
> 
> 时间：2012-11-28T16:07:41.597
> 
> 标签：windows-8, windows-runtime

只是想知道是否可以在应用程序文件夹中我需要的应用程序包中包含一些文件（在这种情况下为一个 txt 文件）。问题是我可能会使用一段代码，需要将许可证作为文本文件包含在应用程序中，我认为这是一种方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:12:59.283

当然，这实际上与包含图像没有什么不同。如果您需要在应用程序中处理文件，您可以通过其本地路径访问它或显式使用`ms-appx:///`协议。

有关更多详细信息，请参阅[如何引用内容](http://msdn.microsoft.com/en-us/library/windows/apps/Hh781215.aspx)和[如何加载文件资源](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh965322%28v=win.10%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T05:55:12.040

只需将文件包含在您的项目中并`Build Action`设置为`Content`. 你可以把它放在你喜欢的任何文件夹中。

然后可以使用`ms-appx:`协议或`StorageFolder`API 从应用程序访问该文件：

```
var license = await Package.Current.InstalledLocation.GetFileAsync("license.txt"); 
```

# node.js - 基于文件的 Node.js 安装

> ID：13609380
> 
> 赞同：5
> 
> 时间：2012-11-28T16:07:46.150
> 
> 标签：node.js

我暂时被困在没有管理员权限的 Windows 机器上。我想在不使用需要提升的安装程序的情况下在目录中“安装”node.js。在 node.js 站点上，我没有看到此分发选项。

是否有人知道基于文件（zip、自解压 exe 等）的下载，我可以使用它来运行 node.js，而无需在 Windows 机器上使用安装程序？有没有办法在没有管理员提升的情况下运行安装程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:11:14.473

好的，事实证明，Windows 的 EXE 下载就是 node.js 需要运行的全部内容。我原以为那是一个用于安装的 exe。只需运行下载的 .exe 即可。

# core-data - 在 Xcode 4 中集成 mogenerator

> ID：13609384
> 
> 赞同：5
> 
> 时间：2012-11-28T16:08:07.477
> 
> 标签：core-data, xcode4, mogenerator

在我的应用程序中，我使用 Core Data 的东西来启用持久数据保存。由于我已经看到 mogenerator 提供了一种创建和维护`NSManagedObject`子类的好方法（也具有附加功能），所以我正在寻找一些将 monogenerator 集成到 Xcode 4 中的技巧？

PS 该问题是基于[分享您的知识，问答式](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)提交的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-03T05:08:37.450

对于 Xcode 4.5+，最简单的方法是在您的方案中设置“预操作”：

1.  编辑您要构建的方案
2.  打开“Build”项并选择“Pre-actions”
3.  单击“+”并添加“新运行脚本操作”
4.  在“提供构建设置来自”弹出窗口中，使用目标
5.  将其粘贴到文本区域：

    ```
    # Update the mogenerator files  
    cd ${SOURCE_ROOT}/${PROJECT_NAME}  
    /usr/bin/mogenerator --template-var arc=true -m ${PROJECT_NAME}.xcdatamodeld -M CoreData/Machine -H CoreData/Human` 
    ```

6.  点击“确定”并构建

将在您的源文件区域中创建一个名为“CoreData”的目录以及子目录“Human”和“Machine”。您现在应该将“CoreData”文件夹添加到您的项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:08:07.477

在 Xcode 4 中使用 mogenerator 非常简单。

首先，在[mogenerator](http://rentzsch.github.com/mogenerator/)下载它。

完成后，切换到您的 Xcode 项目，然后在 Project navigator 中选择您的项目（例如 ProjectName）。**在TARGETS**部分下选择*ProjectName 。*按住*Add Build Phase*。出现一个菜单。选择*添加运行脚本*。将出现一个新的运行脚本。在文本区域内（在 shell 字段下），添加一些文本，如下所示。

 ****> cd ProjectName mogenerator --template-var arc=true --model DataModel.xcdatamodeld/DataModel.xcdatamodel

等等瞧。构建项目时，您应该能够看到生成的类。

有关其他信息和选项，您应该参考[mogenerator wiki](https://github.com/rentzsch/mogenerator/wiki)。

希望能帮助到你。

PS如果有问题，请随时评论或修改答案。****

# c++ - 如何使用 QThreads 使无锁生产者消费者线程交换更安全的异常

> ID：13609385
> 
> 赞同：0
> 
> 时间：2012-11-28T16:08:07.430
> 
> 标签：c++, qt, c++11, signals-slots, move-semantics

我对这个很好的例子的抱怨：[https](https://www.qt.io/blog/2006/12/04/threading-without-the-headache) ://www.qt.io/blog/2006/12/04/threading-without-the-headache是它正在交换裸指针并且它没有使用 Qt::排队连接。

编辑：这是上面链接显示的代码片段（以防链接在这篇文章之前关闭）

```
// create the producer and consumer and plug them together
Producer producer;
Consumer consumer;
producer.connect(&consumer, SIGNAL(consumed()), SLOT(produce()));
consumer.connect(&producer, SIGNAL(produced(QByteArray *)), SLOT(consume(QByteArray *)));

// they both get their own thread
QThread producerThread;
producer.moveToThread(&producerThread);
QThread consumerThread;
consumer.moveToThread(&consumerThread);

// go!
producerThread.start();
consumerThread.start(); 
```

如果我在生产者中使用了一个 unique_ptr，当我调用产生的信号时释放它，并直接将裸指针放入连接的消费槽中的另一个唯一指针，它会更安全一些。尤其是在一些维护程序员尝试了代码之后；）

```
void calculate()
{
    std::unique_ptr<std::vector<int>> pi(new std::vector<int>());
    ...
    produced(pi.release());     
    //prodiced is a signal, the connected slot destroys the object
    //a slot must be connected or the objects are leaked
    //if multiple slots are connected the objects are double deleted
}

void consume(std::vector<int> *piIn)
{
    std::unique_ptr<std::vector<int>> pi(piIn);
    ...
} 
```

这仍然有几个主要问题：

*   未连接插槽时，我无法防止泄漏
*   如果要连接多个插槽，我不会防止双重删除（如果发生这种情况，应该是程序员的逻辑错误，但我想检测它）
*   我不太了解 Qt 的内部工作，无法确保在运输过程中没有任何泄漏。

如果我要使用指向 const 的共享指针，它将解决我所有的问题，但速度会更慢，据我所知，我必须将它注册到元对象系统，如下所述：http: [//qt-project.org/ doc/qt-4.8/qt.html#ConnectionType-enum](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)这是个好主意吗？

有没有更好的方法可以做到这一点，我没有想到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:35:06.787

您不应该在信号中传递指针，同时期望插槽破坏它们，因为插槽可能不可用。

而是传递一个 const 引用，允许插槽复制对象。如果你使用 Qt 的容器类，这应该不会影响性能，因为 Qt 的容器类实现了写时复制。

# android - 最小化位图的高度和宽度时图像质量失真

> ID：13609386
> 
> 赞同：0
> 
> 时间：2012-11-28T16:08:08.683
> 
> 标签：android

我`bitmap`从互联网上下载了一个，现在我想减少位图的高度和宽度，而不会失去`bitmap`. 如何实现这一点。

这是从互联网下载位图的方式。

```
URL url_1 = null;
try {
    url_1 = new URL(vmImageUrl);
    bmp = BitmapFactory.decodeStream(url_1.openConnection().getInputStream());
    } catch (Exception e) {
    Log.v("Error while downloading bitmap from url", e.getMessage()); 
```

我已经像这样缩放了。

```
Bitmap.createScaledBitmap(bmp, convertDpToPixel(140, context), convertDpToPixel(35, context), false); 
```

此方法将 dp 单位转换为以像素为单位的等效设备特定值。

```
public static int convertDpToPixel(float dp,Context context)  
{
    Resources resources = context.getResources();
    DisplayMetrics metrics = resources.getDisplayMetrics();
    int px = (int) (dp * (metrics.densityDpi/160f));
    return px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:24:28.633

用于`BitmapFactory.Options.inSampleSize`获得更小的位图。

```
BitmapFactory.Options opts = new BitmapFactory.Options();
opts.inSampleSize = 2;
Bitmap bitmap = BitmapFactory.decodeFile(YOUR_FILE, opts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T06:45:55.057

我设置了这个。

```
Bitmap.createScaledBitmap(bmp, convertDpToPixel(140, context), VirtualMirrorActivity.convertDpToPixel(35, context), true); 
```

代替

```
Bitmap.createScaledBitmap(bmp, convertDpToPixel(140, context), VirtualMirrorActivity.convertDpToPixel(35, context), false); 
```

它提供更平滑的边缘和清晰的位图。现在它工作正常..

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-28T16:17:42.637

你需要2个矩形，

```
Rect src = new Rect();
Rect dst = new Rect(); 
```

然后你可以设置当前图像的 src，

```
src.set(0,0,imgWidth,imgHeigth); 
```

然后是所需的大小

```
dst.set(startX,startY,endX,endY); 
```

注意： startX 和 startY 将是屏幕上的目标坐标，您的图像将被绘制到 endX endY 坐标。并用 Canvas 画出你的小人

```
Canvas.drawBitmap(bitmapFile, src, dst, null); 
```

# c# - 我对 Linq XML 查询感到困惑

> ID：13609391
> 
> 赞同：4
> 
> 时间：2012-11-28T16:08:20.067
> 
> 标签：c#, xml, linq

这是我的 XML 示例。我想选择 SystemSetting 的值 if `ID = 123`。但我不知道怎么做。`SystemSetting`如果 id 的值等于 123，我该如何选择值？

```
<?xml version="1.0" encoding="utf-8" ?>
<Private>
  <System>
    <ID>123</ID>
    <NAME>Test</NAME>
    <SystemSetting>128</SystemSetting>
    <SystemSettingCS>127</SystemSettingCS>
  </System> 
  <System>
    <ID>124</ID>
    <NAME>Test2</NAME>
    <SystemSetting>128</SystemSetting>
    <SystemSettingCS>127</SystemSettingCS>
  </System>
  <System>
    <ID>0</ID>
    <NAME>Test</NAME>   
    <SystemSetting>5</SystemSetting>
    <SystemSettingCS>250</SystemSettingCS>
  </System>
</Private> 
```

这是我尝试过的：

```
 var doc = XDocument.Load(Application.StartupPath+  @"\Settings.xml");
    var q = from Ana in doc.Descendants("Private")                   
            from sistem in Ana.Elements("System")                   
            where (int)sistem.Element("ID") == 123
            from assetText in Sistem.Elements("System")
            select assetText.Element("SystemSetting");

    MessageBox.Show(q.ToString()); 
```

谢谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:11:30.420

我认为你让这比你需要的更复杂。我想你只需要：

```
var query = doc.Descendants("Private") // Or just doc.Root
               .Elements("System")
               .Where(x => (int) x.Element("ID") == 123)
               .Select(x => x.Element("SystemSetting"))
               .FirstOrDefault(); 
```

诚然，这将选择第*一个*匹配元素。那么的类型`query`是`XElement`; 如果您取下`FirstOrDefault()`零件，它将`IEnumerable<XElement>`为所有匹配的元素返回一个 , 。

如果您只想要值而不是元素，则可以将其更改`Select`为：

```
.Select(x => (string) x.Element("SystemSetting")) 
```

或者

```
.Select(x => x.Element("SystemSetting").Value) 
```

`null`（如果没有元素，第一个将返回`SystemSetting`；第二个将抛出异常。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:13:25.413

Xpath ( *System.Xml.XPath* ) 在这里真的可以提供帮助

```
var system = doc.XPathSelectElement("//System[ID[text()='123']]");
var val = system.Element("SystemSetting").Value; 
```

或单行

```
var s = (string)doc.XPathSelectElement("//System[ID[text()='123']]/SystemSetting"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T18:01:52.163

是一个 Linq 问题，但有另一种 XPath 方法，但下面定义的类可以在任何一种情况下工作。

定义一个从父 System 元素中读取的类：

```
public class XSystem
{
   public XSystem(XElement xSystem) { self = xSystem; }
   XElement self;

   public int Id { get { return (int)self.Element("ID"); } }
   public string Name { get { return self.Element("NAME").Value; } }
   public int SystemSetting { get { return (int)self.Element("SystemSetting"); } }
   public int SystemSettingCS { get { return (int)self.Element("SystemSettingCS"); } }
} 
```

然后找到具有子**ID**元素**123的****System**元素。

 ****```
int id = 123;
string xpath = string.Format("//System[ID={0}", id);
XElement x = doc.XPathSelectElement(xpath); 
```

然后将其插入类中：

```
XSystem system = new XSystem(x); 
```

然后读取你想要的值：

```
int systemSetting = system.SystemSetting; 
```

XPath 定义为`using System.Xml.XPath;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:13:01.547

```
 var q = from s in doc.Descendants("System")  
         where (int)s.Element("ID") == 123        
         select (int)s.Element("SystemSetting"); 
```

并显示结果（`q`将有`IEnumerable<int>`类型）：

```
if (q.Any())
    MessageBox.Show("SystemSettings = " + q.First());
else
    MessageBox.Show("System not found"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T16:17:03.720

你快到了

```
var xmlFile = XElement.Load(@"c:\\test.xml");

var query =
  from e in xmlFile.Elements()
  where e.Element("ID").Value == "123"
  select e.Element("SystemSetting").Value; 
```****

# path - img 和 js 的绝对路径，不包括项目文件夹名称 Visual Web Dev

> ID：13609396
> 
> 赞同：0
> 
> 时间：2012-11-28T16:08:36.063
> 
> 标签：path, visual-web-developer-2010

我在 Visual Web Developer 2010 Express 的项目中遇到了这个小而烦人的问题。我正在开发一个网站，其中 .aspx 文件位于一个大文件夹结构中，即 www.domain.com/group1/type1/somefile.aspx，根文件夹包含“样式”（用于 css）、“图像”和“js "（用于 javascripts）文件夹。我今天读了很多关于基本标签、绝对和相对路径的内容。最后我意识到“绝对路径”对我来说是最好的选择。

主要问题是，当我在浏览器中（本地）预览我的网站时，图像、css 和 js 的绝对链接不起作用，我正在使用`src="/js/gl.jquery.js"`我认为是正确的并且可以在线工作的。

javascript页面的源代码说`http://localhost:61700/js/gl.jquery.js`，当我切换到相对路径`script src="../../../js/gl.jquery.js"`并预览网站时，它工作正常，并且javascript路径的源代码说`http://localhost:61700/ProjectName/js/gl.jquery.js`（注意Visual Studio在路径中添加了ProjectName）所以我我猜当项目上线时（在主域上）它会正常工作，但现在我需要继续在本地开发而没有这个问题。有没有办法在 Visual Web Developer 中解决这个问题？也许我可以在上线时删除的 web.config 文件的一些标签，或者一些网站属性？

我知道将使用相对路径开发一个快速的解决方案，并在上线时将代码修改为绝对路径，但我正在寻找一些更简洁的方法，因为附加信息我没有选择基本标签，因为我阅读了导致麻烦锚链接（href=xx.html#question3），我需要在一些大文件中使用它们。并避免使用相对路径，因为公司将来可能会要求我移动一些文件，而我不想更新相对路径。

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:56:10.320

问题解决了！这是我找到的解决方案，感谢 ScottGu 的博客。

**我引用主要内容：** 当打开网站并运行项目时，VWD 使用与项目根目录名称相同的虚拟应用程序路径启动并运行内置网络服务器。例如：如果您有一个名为“Foo”的项目，它将在内置的网络服务器中启动和运行，因为这样做的`http://localhost:1234/Foo/Default.aspx.` 一个缺点是很难完全限定站点中的静态 CSS 和图像文件等内容（例如：使用根限定路径，如 /images/myphoto.jpg 或 /css/mycss.css）。请注意，您可以对**动态**资源使用“~”应用程序路径技巧——但**静态**资源最终仍然很麻烦（js、css、图像文件。）**（这是我的问题）**

这是这个家伙的整个帖子：[点击这里](http://weblogs.asp.net/scottgu/archive/2006/12/19/tip-trick-how-to-run-a-root-site-with-the-local-web-server-using-vs-2005-sp1.aspx)

**这是主要的解决方案**：

1）使用Visual Studio中的解决方案资源管理器，选择网站项目节点，（带有世界图标的那个）

2）底部有一个名为“虚拟路径”的属性。将“虚拟路径”更改`/`为作为根网站运行。

就是这样，设置`/`我可以轻松管理我的文件。

# ruby-on-rails - 我应该有一个 Heroku 工作人员 dyno 来轮询 AWS SQS 吗？

> ID：13609398
> 
> 赞同：6
> 
> 时间：2012-11-28T16:08:41.867
> 
> 标签：ruby-on-rails, heroku, amazon-web-services, amazon-sqs

我对我应该在哪里有一个脚本来轮询 Rails 应用程序中的 Aws Sqs 感到困惑。

如果我在 web 应用程序中使用线程，它可能会使用 cpu 周期来永远监听这个队列，然后影响性能。

如果我预订一个 heroku worker dyno，则每月花费 34.50 美元。为单个队列轮询支付这个价格是否有意义？或者它不是使用工人的情况？

脚本代码：

> **它的作用**：收听转换后的 pdf。获取响应并将对象创建到 postgres 数据库中。

```
 queue = AWS::SQS::Queue.new(SQSADDR['my_queue'])    
  queue.poll do |msg|
     ...
     id = received_message['document_id']
     @document = Document.find(id)
     @document.converted_at = Time.now
     ...
  end 
```

我需要帮助！！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:22:59.237

您有三个基本选项：

1.  作为工人测功机的一部分进行后台工作。这是最简单、最直接的选择，因为它是最合适的。您的 Web 进程处理传入的 HTTP 请求，而您的工作进程处理 SQS 消息。完毕。
2.  将后台工作作为 Web dyno 的一部分。这可能意味着启动另一个线程（并处理可能在 Rails 中引起的问题），或者可能意味着`fork`创建一个子进程来进行后台处理。无论发生什么，请记住测功机消耗的 512 MB RAM 限制，并且由于我假设您只有一个网络测功机，请注意[测功机空闲](https://devcenter.heroku.com/articles/dynos#dyno-idling)意味着您的应用程序可能不是 24x7 运行。此外，这个选项闻起来很糟糕，因为它通常与[12-factor app](http://www.12factor.net/)的精神背道而驰。
3.  将后台工作作为一次性流程进行。例如，制作一个`rake handle_sqs`处理队列并在它为空时退出的任务。[Heroku Scheduler](https://devcenter.heroku.com/articles/scheduler)是理想的：让它每 20 分钟运行一次。只要它运行，你就会为一次性的测功机付费，但是如果队列是空的，这只是几秒钟的时间，它的成本低于一个永远在线的工作人员。或者，您的 Web 应用程序可以使用 Heroku API 启动一次性进程，以编程方式运行等效的`heroku run rake handle_sqs`.

# java - 翻转包含许多多边形的多边形以创建所有内容的倒置镜像

> ID：13609399
> 
> 赞同：0
> 
> 时间：2012-11-28T16:08:43.330
> 
> 标签：java, math, geometry, polygons

我创建了一个有 6 个顶点的多边形。让我们称之为外部多边形。在外部多边形内部，我创建了较小的多边形。我想一次将所有这些垂直翻转。

我知道外部多边形的顶点，我有一个`ArrayList<Polygon>`内部多边形的顶点。我能够翻转外部多边形。但是我如何翻转内部多边形以保持它们在新多边形中的相对位置？我知道外部多边形的中心和翻转版本。

更正：我需要水平翻转。我翻转了外部多边形（三角形），并且能够移动内部多边形。但距离不正确。这是我所做的图片，（https://docs.google.com/drawings/d/1cPYJqxTWVu5gSHFQyHxHWSTysNzxJvNuJIwsgCQInfc/edit）[https://docs.google.com/drawings/d/1cPYJqxTWVu5gSHFQyHxHWSTysNzxJvNuJIwsgCQInfc/edit](https://docs.google.com/drawings/d/1cPYJqxTWVu5gSHFQyHxHWSTysNzxJvNuJIwsgCQInfc/edit)

我试过这个：

```
 for (Polygon p : polygonList) {

                    Polygon tempP = new Polygon(p.xpoints, p.ypoints, p.npoints);

                    firstPointinPolygon = new Point(p.xpoints[0], p.ypoints[0]);
                    // find frist point in the polygon 

                    float adjacent = (float) firstPointinPolygon.getX() - 400;
                    float opposite = (float) firstPointinPolygon.getY() - 400;

                    float hypotenuse = (float) Math.sqrt(opposite * opposite + adjacent * adjacent);

                    float cosine = adjacent / hypotenuse;
                    float sine = opposite / hypotenuse;

                    float endX = 400 * cosine;
                    float endY = 400 * sine;

                    float endXDelta =400-endX;
                    float endYDelta=400-endY;

                    Polygon pM = move(tempP, endX, endY);

                    polygonListMirror.add(pM);

                    tempP = new Polygon();
                }

public Polygon move(Polygon p, double xMove, double yMove) {

 // Change the values of the points for the Polygon
    for (int i = 0; i < p.xpoints.length; i++) {

        p.xpoints[i] += xMove;
        p.ypoints[i] += yMove;

    }
    return p;
} 
```

但没有得到结果，我的预期。我究竟做错了什么？最终结果应该类似于此链接中的图片：（https://docs.google.com/drawings/d/1vYdWkCelWW1_NUypNhtmckBYfEMzCf6bMVtoB-AyPkw/edit）[https://docs.google.com/drawings/d/1vYdWkCelWW1_NUypNhtmckBYfEMzCf6bMVtoB-AyPkw /编辑](https://docs.google.com/drawings/d/1vYdWkCelWW1_NUypNhtmckBYfEMzCf6bMVtoB-AyPkw/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:33:42.410

我认为这样的事情会做到这一点：

```
Polygon outerPolygon, oldOuterPolygon;
ArrayList<Polygon> innerPolygons;
// set up objects
for (Polygon polygon: innerPolygons)
{
  for (int i = 0; i < polygon.ypoints.length; i++)
  {
    polygon.ypoints[i] = center(outerPolygon) - polygon.ypoints[i] + center(oldOuterPolygon);
  }
} 
```

如果你只是将它垂直翻转到它所在的位置，这样最顶部和最底部点的 y 坐标就会左右切换，那么两者的中心应该是相同的（因此你可以说 2*center）。

我很确定您可以将 center(outerPolygon) 和 center(oldOuterPolygon) 替换为适用多边形中的任何点，只要两者都使用相同的点。

# linux - 高资源使用程序停止/崩溃 linux

> ID：13609401
> 
> 赞同：0
> 
> 时间：2012-11-28T16:08:43.513
> 
> 标签：linux, linux-kernel, openmp, fedora, freeze

我有一个程序可以读取大约 1000 张图像并创建其内容的统计摘要。每个图像都使用 OpenMP 在其自己的线程中处理，并且我将线程限制设置为与我的处理器数量相匹配。

直到大约两周前，该程序运行良好。但是，现在，如果我多次运行该程序，我的系统就会变慢并最终死机。

为了排除故障，我编写了下面列出的简单代码来模拟我的程序正在做什么。在尝试仅读取第 35 行的几个文件之后，此代码将冻结我的系统，就像我的原始程序一样。

我运行该程序，在每次失败后相继恢复到较早的内核，发现它在所有 3.6 内核到版本 3.6.8 时都失败了。

但是，当我回到内核 3.5.6 时，它可以工作。

测试.cc：

```
 1 #include <cstdio>
  2 #include <iostream>
  3 #include <vector>
  4 #include <unistd.h>
  5 
  6 using namespace std;
  7 
  8 int main ()
  9 {
 10     // number of files
 11     const size_t N = 1000;
 12     // total system memory
 13     const size_t MEM = sysconf (_SC_PHYS_PAGES) * sysconf (_SC_PAGE_SIZE);
 14     // file size
 15     const size_t SZ = MEM/N;
 16 
 17     // create temp filenames
 18     vector<string> fn (N);
 19     for (size_t i = 0; i < fn.size (); ++i)
 20         fn[i] = string (tmpnam (NULL));
 21 
 22     // write a bunch of files to disk
 23     for (size_t i = 0; i < fn.size (); ++i)
 24     {
 25         vector<char> a (SZ);
 26         FILE *fp = fopen (fn[i].c_str (), "wb");
 27         fwrite (&a[0], a.size (), 1, fp);
 28         clog << fn[i] << " written" << endl;
 29     }
 30 
 31     // read a bunch of files from disk
 32 #pragma omp parallel for
 33     for (size_t i = 0; i < fn.size (); ++i)
 34     {
 35         vector<char> a (SZ);
 36         FILE *fp = fopen (fn[i].c_str (), "rb");
 37         fread (&a[0], a.size (), 1, fp);
 38         clog << fn[i] << " read" << endl;
 39     }
 40 
 41     return 0;
 42 } 
```

生成文件：

```
 1 a:$
  2     g++ -fopenmp -Wall -o test -g test.cc$
  3     ./test$ 
```

我的问题是：内核 3.6 有什么不同会导致该程序失败，但不会导致它在 3.5 版中失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:34:25.107

无需通过代码，如果您想对进程设置一些限制，请查看[cgroups](http://en.wikipedia.org/wiki/Cgroups)以限制资源使用。

至于冻结 - 您正在尝试一次将 GB 的数据读/写到磁盘。鉴于当今硬盘驱动器的速度约为 100MB/s，我预计内核决定将缓存刷新到磁盘时会冻结——这可能会在您尝试读取合理大小的数据块时立即发生从内存压力下的磁盘（由于您分配了大量内存，缓存空间有限）。

您可以尝试`mmap()`更改文件或更改内核 I/O 调度程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:09:30.403

我没有深入研究您的代码，但我意识到一些不好的做法（至少，我认为它们是）：

*   首先，`critical`openmp 循环内的部分。这是一个同步点，把它放在每次迭代中对我来说听起来有点问题。由于每个线程必须确保没有其他线程进入那里，因此同步引入的开销可能会随着线程数的增加而增加。

*   第二：我不太习惯 C++，但我猜每次`vector<char> a (SZ)`执行时都会分配内存（并在块的末尾释放）。如果我错了，请原谅。由于您事先知道 SZ 的值，因此您最好`vector<vector<char> >`在并行区域之前分配与线程一样多的元素。然后，在并行区域中，您可以让每个线程访问其`vector<char>`.

# parsing - ANTLR 语法中忽略解析器规则

> ID：13609403
> 
> 赞同：0
> 
> 时间：2012-11-28T16:08:59.167
> 
> 标签：parsing, antlr

我正在尝试编写我的第一个 ANTLR 语法。我正在解析以下测试示例：

```
token1 token2 
chapter1 token3 token4 token5 
chapter2 
token6 token7
chapter3 token8 
```

并使用以下语法：

```
 grammar Chapters;

message :   chapter+ EOF
    ;   

chapter :   (chapter1|chapter2|chapter3) text
    ;

text    :   ~(chapter1|chapter2|chapter3)*
    ;   

chapter1    :   'chapter1'
        ;   

chapter2    :   'chapter2'
        ;   

chapter3    :   'chapter3'
        ;   

Id  :   ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_')*
    ;

Int :   '0'..'9'+
    ;

Float
    :   ('0'..'9')+ '.' ('0'..'9')* EXPONENT?
    |   '.' ('0'..'9')+ EXPONENT?
    |   ('0'..'9')+ EXPONENT
    ;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;

Char:  '\'' ( ESC_SEQ | ~('\''|'\\') ) '\''
    ;

fragment
EXPONENT : ('e'|'E') ('+'|'-')? ('0'..'9')+ ;

fragment
HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
ESC_SEQ
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   UNICODE_ESC
    |   OCTAL_ESC
    ;

fragment
OCTAL_ESC
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UNICODE_ESC
    :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
    ; 
```

我得到以下结果： ![ANTLRWorks 结果](../Images/6344b75a378b50101dcf28aae25f7389.png)

我想看到的是**文本**节点下的**token1**和**token2**，token 3,4和5等也是如此。所以我想将每个章节节点下的内容分解为章节名称和章节文本。我应该如何改变我的语法来实现这一点？

# getprocaddress - 微过滤程序中未定义的 GetProcAddress

> ID：13609411
> 
> 赞同：0
> 
> 时间：2012-11-28T16:09:29.153
> 
> 标签：getprocaddress, minifilter

我正在做一个微过滤器项目。如何在微过滤程序中调用 GetProcAddress？我的编译器一直告诉我“GetProcAddress undefined 假设 extern 返回 int”。根据 msdn，我可能需要包含 window.h。但如果我这样做，会发生更多其他编译器错误吗？应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:04:11.257

没有等效的内核模式`GetProcAddress`。

可能是你需要检查，你为什么需要那个。如果您想加载和调用 DLL 的某些函数，那么可能不是 DLL 而是将其静态链接到您的驱动程序。

此外，您不能在内核模式下加载任何 DLL。

如果您认为您真的想这样做，请查看以下文章

[在内核模式驱动程序中调用 DLL](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463187.aspx)

[编写内核模式 DLL](http://www.osronline.com/article.cfm?id=171)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-23T11:44:17.237

`MmGetSystemRoutineAddress`可用于相同目的。

参考：[https ://docs.microsoft.com/en-us/windows-hardware/drivers/ddi/wdm/nf-wdm-mmgetsystemroutineaddress](https://docs.microsoft.com/en-us/windows-hardware/drivers/ddi/wdm/nf-wdm-mmgetsystemroutineaddress)

# php - .htaccess - 如何将所有 url 重定向到 url.php，除了 index.php

> ID：13609413
> 
> 赞同：8
> 
> 时间：2012-11-28T16:09:34.423
> 
> 标签：php, .htaccess

```
RewriteEngine On    # Turn on the rewriting engine
RewriteRule    .    url.php    [NC,L] 
```

我将所有请求重定向到 url.php 但我想保留 index.php 原样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T16:19:58.427

```
# Turn On ReWrite Engine
RewriteEngine On

# Exclude url.php and index.php from redirecting
RewriteCond %{REQUEST_URI} !^/(index|url)\.php

# Redirect to url.php
RewriteRule . url.php [NC,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:12:41.680

这可以解决问题：

```
RewriteEngine On    # Turnon the rewriting engine
RewriteRule ^/index\.php$ - [L]
RewriteRule    .    url.php    [NC,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-02T08:30:49.767

内部服务器错误

服务器遇到内部错误或配置错误，无法完成您的请求。

请联系服务器管理员并告知他们错误发生的时间，以及您在此错误之前执行的操作。

服务器错误日志中可能提供有关此错误的更多信息。

# css - 没有 Javascript 的 Twitter 引导和响应断点

> ID：13609419
> 
> 赞同：1
> 
> 时间：2012-11-28T16:09:47.403
> 
> 标签：css, html, twitter-bootstrap, responsive-design, less

假设我有标记：

```
<div class="container-fluid">

            <!-- 1 Col -->
            <div class="row-fluid">
                <div class="span12">
                    <h2>1</h2>
                </div>
            </div>

            <!-- 2 Col -->
            <div class="row-fluid">
                <div class="span6">
                    <h2>2</h2>
                </div>
                <div class="span6">
                    <h2>2</h2>
                </div>
            </div>
</div> 
```

假设我希望第二行中的 2 列成为 span12 并在窗口分辨率为 400px 时全屏显示：

使用：

```
@media only screen 
and (max-width : 400px) {

} 
```

有没有办法在引导程序中说：'所有 span6 都应该在这个分辨率下 span12'？

我可以使用 hacky 方法来实现它，例如：

```
@media only screen 
and (max-width : 400px) {
    .span6{
        width: 100% !important;
        float: none !important;
        margin: 0 0 20px 0px !important;
        padding: 0 !important;
    }
} 
```

但这显然很恶心。

我也知道我可以用 JS 附加一个类，但我不想使用 Javascript - 这个网站必须是干净的！

**编辑**

James 在下面提出了一个很好的解决方案，但是我是否应该对 span3 的拆分做类似的操作（从 4 列到 2 列），排水沟会迫使它错位不同的元素。我开始认为如果没有 Javascript，我想在脑海中做的事情是不可能的或极其困难的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:31:26.293

为什么不在行上使用额外的类，例如

```
<div class="container-fluid">

        <!-- 1 Col -->
        <div class="row-fluid">
            <div class="span12">
                <h2>1</h2>
            </div>
        </div>

        <!-- 2 Col -->
        <div class="row-fluid row-resize">
            <div class="span6">
                <h2>2</h2>
            </div>
            <div class="span6">
                <h2>2</h2>
            </div>
        </div>
</div> 
```

然后你可以在你的选择器上使用特异性

```
@media only screen 
and (max-width : 400px) {
    .row-resize >.span6{
        width: 100%;
        float: none ;
        margin: 0 0 20px 0px;
        padding: 0;
    }
} 
```

# javascript - 画廊和放大镜放大问题

> ID：13609420
> 
> 赞同：0
> 
> 时间：2012-11-28T16:09:49.070
> 
> 标签：javascript, jquery, loupe, galleriffic

我正在使用两个独立工作的插件。Galleriffic 和 Loupe 是两个插件。我想要做的是让 Galleriffic 中的大图像也有放大悬停效果，这就是 Loupe 的用途。我不得不向`newSlide.find('a img').addClass('magnifyPic');`Galleriffic 插件添加一行代码，以便在图像上获得一个类，Loupe 应该使用它来激活放大效果。以下是插件的两个调用。

```
jQuery(document).ready(function($) {

  var gallery = $('#thumbs').galleriffic({
       'imageContainerSel': '#bigPics',
       'enableBottomPager': false,
       'renderNavControls': false,
       'renderSSControls':  false,
       'enableHistory':     false,
  });

  $('.magnifyPic').loupe({
     'default_zoom': 300,
     'shape' : 'rounded',
     'default_size' : 160,
     'glossy' : false,
     'drop_shadow' : false 
  });

}); 
```

问题是当我将鼠标悬停在大图像上时，绝对没有任何反应。这两个插件独立地运行正常，但似乎不想一起工作。如果我理解正确的话，Galleriffic 插件可以在其选项中接受回调、函数等，所以我想我的问题是：如何将 Loupe 调用集成到 Gallerific 调用中？或者这是让 Loupe 只使用 Galleriffic 画廊中的大图像的正确方法？我已经尝试删除、添加、修改这两个插件的代码行，但似乎无法让它们一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:49:31.913

`image.src`在 jquery.galleriffic.js 中搜索。它应该出现两次（在第 338 行和第 611 行附近）。在 之后添加以下行`image.src = ...`：

```
image.src = ...
$(image).loupe(); 
```

注意：我还将它添加到我的 CSS 中。在添加此 CSS 规则之前，放大镜导致非常小的放大（也许我使用的插件错误？）：

```
​.loupe img {
  width:800px;
  height:800px;    
}​ 
```

我在 github 上发布了示例。你可以在这里试试[http://ted-piotrowski.github.com/example-gallerific/](http://ted-piotrowski.github.com/example-gallerific/)

# web-services - noHandlerFound 没有为带有 URI [..] 的 HTTP 请求找到映射

> ID：13609423
> 
> 赞同：3
> 
> 时间：2012-11-28T16:10:05.630
> 
> 标签：web-services, spring, rest

我正在 Spring 环境中尝试一个非常简单的 helloworld 类 RestFul Web 服务，我得到“org.springframework.web.servlet.DispatcherServlet noHandlerFound No mapping found for HTTP request with URI [..] in DispatcherServlet with name ..” . 我尝试了各种方法，但没有任何效果。到目前为止，这就是我所拥有的：

web.xml

```
<listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>spitter</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>spitter</servlet-name>
    <url-pattern>/testWs/*</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spitter-servlet.xml</param-value>
</context-param> 
```

spitter-servlet.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:mvc="http://www.springframework.org/schema/mvc"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

        <mvc:annotation-driven />

        <context:component-scan base-package="org.resttest.bso" />

        <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
            <property name="prefix" value="/WEB-INF/views/" />
            <property name="suffix" value=".jsp" />
        </bean>

</beans> 
```

和控制器类；

```
package org.resttest.bso;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.ui.ModelMap;

@Controller
@RequestMapping("/partners")
public class PartnerController {

public PartnerController(){
    System.out.println("******* From the constructor ***** " );
}

@RequestMapping("method=RequestMethod.GET")
public String getPartner(ModelMap model){
    try{
        model.addAttribute("message", "Spring 3 MVC Hello World");
        System.out.println("******* Test message " );
    }catch(Exception ex){
        System.out.println("******* Exception thrown ... " + ex.getMessage());
    }
    return "test";
}
} 
```

并在 WEB-INF/views/test.jsp

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><%@page
language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<html>
<head>
    <title>test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body>
<h1>Message : ${message}</h1>   
</body>
</html> 
```

当服务器启动时，我也确实看到了：[11/28/12 9:24:02:803 EST] 00000013 DefaultAnota I org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler 映射的 URL 路径 [/partners/method=RequestMethod .GET]到处理程序'partnerController'

但是当我尝试使用 url 访问时：localhost:9080/contextRoot/testWs/partners/ 我收到错误：[11/28/12 9:31:07:034 EST] 00000044 PageNotFound W org.springframework.web.servlet。 DispatcherServlet noHandlerFound 在名称为“spitter”的 DispatcherServlet 中找不到具有 URI [/contextRoot/testWs/partners/] 的 HTTP 请求的映射

非常感谢任何帮助。我根据论坛上的建议尝试了一些更改，但似乎没有任何效果。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:26:17.730

你有`@RequestMapping("method=RequestMethod.GET")`

删除引号

```
@RequestMapping(method=RequestMethod.GET) 
```

它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T14:49:15.643

记住服务器 spring MVC 项目做的事情

1.  index.jsp（第一个起始页）应该在 WebConent 下。不在WEB-INF 下不在您的jsp 文件夹（您的jsp 页面文件夹）下。
2.  映射：url 模式就像，如果它在 web.xml 中就像 /
    那么“/”这个符号只出现在请求 mappin(“/ *** *”) 的控制器类注释中。没有哪里来的。特别是在jsp页面的请求中。有要求去那个注释。
3.  添加所有 jar，例如 ojdbc14.jar 用于 db。
4.  自动装配是主要的，配置文件中的 bean id 名称应该与您的类中的名称相同。

# java - log4j 属性错误

> ID：13609426
> 
> 赞同：4
> 
> 时间：2012-11-28T16:10:14.257
> 
> 标签：java, log4j

我有一个应用程序，用于`log4j`将其日志发送`syslog`到中央日志记录应用程序。虽然 log4j 成功发送了 app 消息，但消息本身没有 syslog 标头（包含时间戳、主机名等）。

我试图弄清楚如何将 syslog 标头附加到应用程序的每个日志行。

下面是我的配置

```
log4j.logger.com.axeda.esrs=INFO, SYSLOG log4j.appender.SYSLOG=org.apache.log4j.net.SyslogAppender
log4j.appender.SYSLOG.layout=org.apache.log4j.PatternLayout
log4j.appender.SYSLOG.layout.ConversionPattern=%d{ISO8601}: %m%n log4j.appender.SYSLOG.SyslogHost=syslog_destination
log4j.appender.SYSLOG.Facility=LOCAL0
log4j.appender.SYSLOG.FacilityPrinting=false 
```

我在conf中添加了以下属性：

```
log4j.appender.SYSLOG.Header=true 
```

但是重新启动该过程后，我在日志文件中收到以下错误：

```
log4j:WARN No such property [header] in org.apache.log4j.net.SyslogAppender 
```

您能告诉我如何将 syslog 标头添加到每个日志事件中。

```
log sample currently in use without the syslog header: <134>2012-11-02 16:22:30,451: EMC Policy Manager Audit: Fri Nov 02 16:22:30 CEST 2012, CK0000000, System, Remote Session 5171112upPI4v4Hp3FrHJbSOxiHZ7aEp3crZNwngP8ZrLw625 started on device CK292603612 with model Symmetrix-GW by remote user 00000 from enterprise servicelinkcluster at Fri Nov 02 16:19:52 CEST 2012 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T03:57:49.970

您使用的是旧的 log4j 版本吗？SyslogAppender 上的 header 属性是在 1.2.15 中添加的。当我将现有系统配置为登录到 Papertrail 时，我看到了同样的警告，我发现我的构建过程中的某些东西正在拉入较旧的 log4j 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:41:31.597

我认为 header 的 H 必须很小......所以属性名称必须是 log4j.appender.SYSLOG.header=true。

通过查看类文件，它看起来标题是类[http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SyslogAppender.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SyslogAppender.html)的属性。因此，在定义属性时，我们以 LOWER_CHAR 开头...您可以尝试一下...

# .net - 从 C# 中的水晶报表中获取标题

> ID：13609428
> 
> 赞同：1
> 
> 时间：2012-11-28T16:10:18.167
> 
> 标签：.net, c#-4.0, crystal-reports

我正在尝试使用 c# 从 Crystal 报表中提取标题。我无法找到代码以找到此标题。这是 CR 设计器界面上的图片。

![Crystal Reports 文档属性](../Images/10f5cf37cd5bd23611c8c108a0154c47.png)

我基本上试图找到 CRAXDRT.Report.ReportTitle 的 .net 等价物，这是目前在 MS-Access VBA 中工作的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:25:27.700

这是我最终使用的

```
CrystalDecisions.CrystalReports.Engine.SummaryInfo.ReportTitle 
```

这是链接
[http://msdn.microsoft.com/en-us/library/aa664938(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa664938(v=vs.71).aspx)

# java - 是否可以在 Java 中写入隐藏文件？

> ID：13609437
> 
> 赞同：0
> 
> 时间：2012-11-28T16:10:49.577
> 
> 标签：java, file, io, hidden-files

我已经弄清楚如何在 Java 中创建隐藏文件，现在我需要将大量数据写入文件。我不断收到以下异常：`SEVERE: java.io.FileNotFoundException: <filepath>\tmp (Access is denied)`

这是我尝试并获得解决方案的两种方法，但是两种方法都遇到了相同的异常。注意：toOverwrite 在这两种情况下都是隐藏文件。

```
File fileByteText = new File("./testFile.txt");
File toOverwrite = new File("./tmp");
//Assume toOverwrite is hidden

boolean toReturn = true;
    try {
        byte[] fileByteText = FileUtils.readFileToByteArray(toGetTextFrom);
                    FileUtils.writeByteArrayToFile(toOverwrite, fileByteText,    false);
                    toReturn = false;
                } catch (IOException e) {
                    bam.severe(e);
                    toReturn = true;
                } 
```

使用相同的文件对象接近两个：

```
try {
                String fileText = FileUtils.readFileToString(toGetTextFrom);
                FileWriter fw = new FileWriter(toOverwrite.getAbsoluteFile());
                BufferedWriter bw = new BufferedWriter(fw);
                bw.write(fileText);
                bw.close();
                toReturn = false;
            } catch (IOException e1) {
                bam.severe(e1);
                toReturn = true;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:15:05.803

当您尝试写入目录类型的文件时，您可能会遇到异常。检查 toOverWrite.isFile() 返回什么方法；

如果是假的，你就不能写。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T16:13:42.060

Unix 没有魔法。只需`.`在您的文件名前添加一个。在 Windows 下，这不能用 Java 实现。您需要本机命令。愿这适用于 NIO2。

# php - Windows 中的 Apache Web 服务器和 Tomcat

> ID：13609444
> 
> 赞同：-1
> 
> 时间：2012-11-28T16:11:21.910
> 
> 标签：php, apache, tomcat, grails

我需要运行 Web 服务器，因为有些人使用 PHP，有些人使用在 Tomcat 上运行的 Groovy 和 Grails。我公司只允许80端口通过。

在这种情况下，我能否获得有关如何同时支持这两种情况的详细说明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:35:29.627

通过 Apache、Nginx 或 Lighttp 等专用 Web 服务器代理您的 Grails 应用程序。

对于 Apache，启用 mod_proxy 并让它侦听端口 80。在 Tomcat 中运行您的 Grails 应用程序，侦听另一个端口，例如 8080。然后将 Apache 配置为代理到您的 Grails 应用程序：

```
# ensure these modules get loaded
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so

ProxyRequests Off
<Proxy *>
    Order deny,allow
    Deny from all
    Allow from localhost
</Proxy>
ProxyPass /mygrailsapp http://localhost:8080/mygrailsapp
ProxyPassReverse /mygrailsapp http://localhost:8080/mygrailsapp 
```

然后，您可以将 Apache 配置为直接提供 PHP 或代理到另一台服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:15:40.467

使用 nginx 作为代理服务器，监听 80 端口。为 php 和 tomcat 定义不同的上游。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:28:36.723

安装和配置**mod_jk**模块，以便 Apache 在侦听端口 80 时将请求转发到 Tomcat 以获取特定路径。

[请参阅mod_jk](http://tomcat.apache.org/tomcat-3.3-doc/mod_jk-howto.html)的文档。

阿帕奇配置：

```
# send all requests to "/grails" to Tomcat    
JkMount /grails/* worker 
```

Tomcat server.xml（取消注释 AJP 连接器）

```
<!-- Define an AJP 1.3 Connector on port 8009 -->
<Connector port="8009" enableLookups="false" redirectPort="8443" protocol="AJP/1.3" /> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-28T16:17:44.933

您可以将 Apache 服务器配置为侦听特定端口...编辑 http.conf 文件...添加：
`Listen 8080`
应该这样做，如果您需要添加服务器的 IP 地址：
`172.x.x.x:80`

# sql - 从表格的两个选定列生成的矩阵视图

> ID：13609446
> 
> 赞同：4
> 
> 时间：2012-11-28T16:11:28.857
> 
> 标签：sql, database, view, pivot

假设我有一个包含`Project_type`, `Project_No`,`OS_Platform`列的表。这里我有limited `Project_type`s和limited `OS_Platform`s。`Project_type`我想要一个数据库视图，它在和之间产生一个矩阵`OS_Platform`。

```
 MY_TABLE : 
 Project_Type     Project_No       OS_Platform 
 Drivers          345              Linux
 WebService       453              Windows                    
 Drivers          034              Windows            
 Drivers          953              Solaris
 DesktopApp       840              Windows 
 WebService       882              Solaris 
```

现在我有`Project_type`和`OS_Platform`作为选定的列。我想要这两列具有不同行和列名的矩阵视图。

```
Project_Type     Linux    Windows     Solaris
WebService       null      true         true
Drivers          true      true         true
DesktopApp       null      true         null 
```

谁能告诉我是否可能。这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:49:42.143

如果您使用的 SQL 产品支持专用 PIVOT 功能，您也可以尝试使用它。例如，以下[将在 SQL Server 2005+ 中工作](http://sqlfiddle.com/#!3/2a77e/6 "SQL Fiddle 上的 SQL Server 演示")：

```
SELECT *
FROM (
  SELECT DISTINCT
    Project_Type,
    'true' AS flag,
    OS_Platform
  FROM MY_TABLE
) s
PIVOT (
  MAX(flag)
  FOR OS_Platform IN (
    Linux, Windows, Solaris
  )
) p
; 
```

Oracle 数据库是另一个支持 PIVOT 的产品，虽然我不确定它是在哪个版本中首次引入的。将PIVOT 的 IN 列表中的每一列用单引号括起来后，您就可以[在 Oracle中运行上述查询，如下所示：](http://sqlfiddle.com/#!4/08181/3 "SQL Fiddle 上的 Oracle 演示")

```
... IN (
  'Linux', 'Windows', 'Solaris'
)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:57:58.147

这基本上是一个`PIVOT`查询，您可以将数据行转换为列。由于您需要一个`true/null`值，因此执行此操作的最简单方法是使用聚合函数和`CASE`语句：

```
select project_type,
  max(case when os_platform ='Linux' then 'true' else null end) Linux,
  max(case when os_platform ='Windows' then 'true' else null end) Windows,
  max(case when os_platform ='Solaris' then 'true' else null end) Solaris
from yourtable
group by project_type 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5b2f5/1)

结果是：

```
| PROJECT_TYPE |  LINUX | WINDOWS | SOLARIS |
---------------------------------------------
|   DesktopApp | (null) |    true |  (null) |
|      Drivers |   true |    true |    true |
|   WebService | (null) |    true |    true | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:43:13.677

您需要旋转/取消旋转您的值以将它们转换为您选择的格式。

这是关于堆栈溢出的 google 搜索。任何这些都会对你很好。 [https://www.google.com/search?q=sql+pivot+unpivot+site%3Astackoverflow.com&oq=sql+pivot+unpivot+site%3Astackoverflow.com&aqs=chrome.0.57.9985&sugexp=chrome,mod=8&sourceid=铬&ie=UTF-8](https://www.google.com/search?q=sql+pivot+unpivot+site%3Astackoverflow.com&oq=sql+pivot+unpivot+site%3Astackoverflow.com&aqs=chrome.0.57.9985&sugexp=chrome,mod=8&sourceid=chrome&ie=UTF-8)

现在，您将在那里看到两种类型的答案。第一个是常规的透视/反透视操作。*这些对已知*数据集工作得很好（很容易，但不快） 。也就是说，如果您了解所有项目类型和平台，这将正常工作。

第二种是动态枢轴，或使用动态 SQL 创建的枢轴。这比较麻烦，但允许您任意组合字段。

祝你好运！

# java - 为什么从不调用paintComponent？

> ID：13609450
> 
> 赞同：3
> 
> 时间：2012-11-28T16:11:45.870
> 
> 标签：java, linux, swing, paintcomponent

我有以下代码。基本上我有一个有背景图像的框架。我在框架内还有三个面板：面板 1、2 和 3。2 和 3 工作正常，因为我没有对它们进行子类化。但是，面板 1 一旦我将其子类化，即将逻辑放入 JPanel 的paintComponent 方法中，就会停止工作，因为该方法从未被调用并且 foo 从未被打印。我不知道为什么。感谢您的帮助。我尝试了其他类似线程的一些建议，但没有帮助。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Toolkit;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Test {

    public static void main(String[] args) throws IOException {

        JFrame.setDefaultLookAndFeelDecorated(true);
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();

        int fooPanelX = 5;
        int fooPanelY = 160;
        int fooPanelWidth = 470;
        int fooPanelHeight = 305;

        int bar0PanelX = 5;
        int bar0PanelY = 550;
        int bar0PanelWidth = 230;
        int bar0PanelHeight = 210;

        int bar1PanelX = bar0PanelX * 2 + bar0PanelWidth + bar0PanelX;
        int bar1PanelY = bar0PanelY;
        int bar1PanelWidth = bar0PanelWidth;
        int bar1PanelHeight = bar0PanelHeight;

        JPanel panel1 = new Panel1(fooPanelX, fooPanelY, fooPanelWidth, fooPanelHeight);

        JPanel panel2 = new JPanel();
        panel2.setBackground(Color.WHITE);
        panel2.setLocation(bar0PanelX, bar0PanelY);
        panel2.setSize(bar0PanelWidth, bar0PanelHeight);
        panel2.setOpaque(false);
        panel2.setBorder(BorderFactory.createLineBorder(Color.WHITE));
        panel2.setBounds(bar0PanelX, bar0PanelY, bar0PanelWidth, bar0PanelHeight);

        JPanel panel3 = new JPanel();
        panel3.setBackground(Color.WHITE);
        panel3.setLocation(bar1PanelX, bar1PanelX);
        panel3.setSize(bar1PanelWidth, bar1PanelHeight);
        panel3.setOpaque(false);
        panel3.setBorder(BorderFactory.createLineBorder(Color.WHITE));
        panel3.setBounds(bar1PanelX, bar1PanelY, bar1PanelWidth, bar1PanelHeight);

        JLabel imagePanel = new JLabel(new ImageIcon(ImageIO.read(new File("image.png"))));

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.addKeyListener(new KeyAdapter() {

            @Override
            public void keyPressed(KeyEvent e) {
                if (e.getKeyCode() == 27) {
                    System.exit(0);
                }
            }

        });

        frame.setContentPane(imagePanel);
        frame.getContentPane().add(panel1);
        frame.getContentPane().add(panel2);
        frame.getContentPane().add(panel3);
        frame.setLocation((int) (screenSize.getWidth() * 0.75),
                (int) (screenSize.getHeight() * 0.25));
        frame.pack();
        frame.setVisible(true);

    }

    @SuppressWarnings("serial")
    static class Panel1 extends JPanel {

        int x, y, w, h;

        public Panel1(int x, int y, int w, int h) {
            this.x = x;
            this.y = y;
            this.w = w;
            this.h = h;
        }

        @Override
        public void paintComponent(Graphics graphics) {

            System.out.println("foo");
            super.paintComponents(graphics);

            setBackground(Color.WHITE);
            setLocation(x, y);
            setSize(w, h);
            setOpaque(true);
            setBorder(BorderFactory.createLineBorder(Color.WHITE));

         }

    }

} 
```

**更新**：如果您无法找到问题，那么请您为我提供执行以下操作的替代方法。我需要一个带有背景图像的框架和背景图像顶部的三个面板。这三个面板必须在背景图像上具有像素完美的位置和大小才能看起来正确。差不多就是这样。我将重新粉刷三个面板，但背景图像将保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:20:15.363

好吧，问题是您没有使用合适的`LayoutManager`.

`JLabel`默认情况下不附带任何`LayoutManager`内容。因此，当您添加您的 时`Panel1`，它的大小为 0x0 并且位于 (0,0) 中，并且由于没有 LayoutManager 会更改它，因此它将保持该大小和位置。使用空边界，您的组件永远不会被绘制，因此您的`paintComponent`方法永远不会被调用。

现在，你永远不应该这样做`paintComponent`：

```
 setBackground(Color.WHITE);
        setLocation(x, y);
        setSize(w, h);
        setOpaque(true);
        setBorder(BorderFactory.createLineBorder(Color.WHITE)); 
```

在构造函数或其他方法中执行此操作。`paintComponent`用于“绘制组件”，而不是更改其属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:50:57.927

我决定以一种非常不同的方式来解决这个问题。我就是这样做的。我用我的代码完全从头开始。我创建了一个 JFrame 实例和一个 Canvas 实例（画布是子类）。在画布中，我使用 drawImage() 来应用背景图像。然后，对于我想在背景图像上设置动画的三个区域中的每一个，我没有创建三个 JPanel，而是简单地在画布中使用 fillRect() 来填充图像上的正确区域。就是这样。很好很简单。repaint() 每秒都会在三个区域上闪烁，这是下一个挑战。我猜我必须使用双缓冲，但这不是我以前用过的东西，所以我接下来会研究一下。反正，使用单个画布代替三个 JPanel 证明要简单得多，我能够这样做的原因是因为背景图像提供了视觉上的所有其他内容。我所要做的就是drawImage() 和fillRect()。感谢所有的贡献。

**更新**：我现在已经完成了这个任务。关于上述内容，我改变了一件事。在尝试使用 Canvas 进行双重缓冲时，我遇到了一些问题：通常的“组件必须具有有效的对等”异常。在研究这一点时，我了解到不应在 Swing 中使用 Canvas，并且使用它的做法是混合 AWT 和 Swing。所以我把它换成了 JComponent（因为我不需要 JPanel 提供的任何东西）。由于默认情况下 Swing 是双缓冲的，因此我的工作已经完成。没有闪烁和简化的代码。

# php - PHPUnit / Selenium 2 在 ajax-heavy webapp 上随机失败

> ID：13609457
> 
> 赞同：0
> 
> 时间：2012-11-28T16:12:22.623
> 
> 标签：php, selenium, webdriver, phpunit

我的硒测试因 PHPUnit_Extensions_Selenium2TestCase_NoSeleniumException 异常而失败。但并非总是如此，也不总是在同一个元素上。

我怀疑这与执行速度有关，即执行选择器时元素还不可见。

我已经搜索过 SO，但主要发现涉及 WebdriverWait 的 Java 相关建议（据我所知，不在 PHPUnit/Selenium 中）或处理较旧的 Selenium RC 命令，如 waitForPageLoad 等。

如何使这些测试更稳定？我是否应该将元素的选择包装在一个重复尝试（对于一定数量的迭代）以在迭代之间使用 sleep() 来选择元素的函数中？什么是常见/最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:35:03.580

我想我找到了问题所在。我最初的想法是，硒需要更多时间来定位元素，这似乎是不正确的。selenium 服务器花一些时间执行“正在执行：[查找元素：...”，但随后立即执行“正在执行：[删除会话：...”。

所以这就解释了为什么 sleep() 或类似的东西对我的测试没有帮助。

再用谷歌搜索，我发现了这个[Google Groups discussion](https://groups.google.com/forum/?fromgroups=#!topic/selenium-users/ETVMk3mcI6Q)。因此，我当前的 Selenium 服务器 2.26.0 似乎不适用于我的 FF 17.0。我通过安装 ChromeDriver 并在 Chrome 上反复运行我的测试进行了验证，每次都通过了。

所以现在我可以：

1.  尝试编译最新的源代码以获得某种前沿的 Selenium，看看它是否适用于 FF17
2.  将 FF 降级到 16.0 或更低
3.  在 2.27.0 到来之前，使用 Chrome（和 IE，和 Opera 等）进行测试

我真的不想降级，所以现在我将采用选项 3 并针对 Chrome 运行我的测试。无论如何，这对我来说只是功能测试的初始设置，因此可以稍后将测试扩展到多个浏览器。

**编辑：**现在在 Selenium 2.27.0 中再次使用 FireFox

# java - Android将我的应用添加到图库中的“共享”按钮

> ID：13609458
> 
> 赞同：11
> 
> 时间：2012-11-28T16:12:28.537
> 
> 标签：java, android, share

我成功地将我的应用程序添加到 Android 库的“共享”按钮中，所以如果我点击它，我的应用程序就会启动。我可以选择启动我的应用程序的哪个活动吗？现在它开始了“主要”。这是我在主类中的代码：

```
 .....        
    Intent intent = getIntent();
    Bundle extras = intent.getExtras();
    String action = intent.getAction();

    // if this is from the share menu
    if (Intent.ACTION_SEND.equals(action)) {   
        if (extras.containsKey(Intent.EXTRA_STREAM)) {
            // Get resource path
        }
    } 
```

和清单：

```
<intent-filter>
   <action android:name="android.intent.action.SEND" />
   <category android:name="android.intent.category.DEFAULT" />
   <data android:mimeType="image/*" />
</intent-filter> 
```

实际上，我在“主要”开始后立即成功地打开了一个新活动，但我更喜欢直接打开正确的活动。谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-28T16:14:59.000

将您的意图过滤器放在您想要开始的活动下到您的清单中

```
 <activity android:name=".Theme"
           android:label="MAIN">
   <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
   </intent-filter>
</activity>

 <activity android:name=".Theme"
           android:label="ActiVITY2">
  <intent-filter>
   <action android:name="android.intent.action.SEND" />
   <category android:name="android.intent.category.DEFAULT" />
   <data android:mimeType="image/*" />
  </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T16:23:34.870

如果你的清单文件中有两个活动，比如说`Main`然后`MediaShare`它看起来像这样：

```
<activity android:name="Main" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
<activity android:name="MediaShare" >
    <intent-filter>
        <action android:name="android.intent.action.SEND" />
        <data android:mimeType="image/*" />
    </intent-filter>
</activity> 
```

共享图像时，`android.intent.action.SEND`操作和`android:mimeType="image/*"`数据应与您要开始的活动一起使用。

有关详细信息，请参阅[从其他应用程序接收内容的页面](http://developer.android.com/training/sharing/receive.html)。

# database - 我想做一个注册 JSF 表格

> ID：13609459
> 
> 赞同：2
> 
> 时间：2012-11-28T16:12:30.057
> 
> 标签：database, jakarta-ee, ejb, glassfish-3

我有一个带有 EJB 和 Web 模块的 Java EE 应用程序。我的工作基于本教程：[http](http://wiki.netbeans.org/DevelopJavaEE6App) ://wiki.netbeans.org/DevelopJavaEE6App ，但我的项目由书店组成。

我已经创建了所有的选择功能（在首页显示产品，在数据库中搜索书籍），但现在我想制作一个注册表单。

我想我忘记了代码中的某些内容，但我不知道是什么。

我有一个实体、EJB、register.xhtml、managedBean 和 sessionBean。如果有人可以帮助我，请这样做。

`Clients`我的表的实体：

```
package com.boutique.entity;

import java.io.Serializable;
import java.util.Date;
import java.util.List;
import javax.persistence.Basic;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;

/**
 *
 * @author Barthelemius
 */
@Entity
@Table(name = "clients")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Clients.findAll", query = "SELECT c FROM Clients c"),
    @NamedQuery(name = "Clients.findByIdClient", query = "SELECT c FROM Clients c WHERE c.idClient = :idClient"),
    @NamedQuery(name = "Clients.findByEmail", query = "SELECT c FROM Clients c WHERE c.email = :email"),
    @NamedQuery(name = "Clients.findByNom", query = "SELECT c FROM Clients c WHERE c.nom = :nom"),
    @NamedQuery(name = "Clients.findByPassword", query = "SELECT c FROM Clients c WHERE c.password = :password"),
    @NamedQuery(name = "Clients.findByPrenom", query = "SELECT c FROM Clients c WHERE c.prenom = :prenom"),
    @NamedQuery(name = "Clients.findByAdresse", query = "SELECT c FROM Clients c WHERE c.adresse = :adresse"),
    @NamedQuery(name = "Clients.findByCp", query = "SELECT c FROM Clients c WHERE c.cp = :cp"),
    @NamedQuery(name = "Clients.findByVille", query = "SELECT c FROM Clients c WHERE c.ville = :ville"),
    @NamedQuery(name = "Clients.findByTel", query = "SELECT c FROM Clients c WHERE c.tel = :tel"),
    @NamedQuery(name = "Clients.findByMobile", query = "SELECT c FROM Clients c WHERE c.mobile = :mobile"),
    @NamedQuery(name = "Clients.findByCarteFidelite", query = "SELECT c FROM Clients c WHERE c.carteFidelite = :carteFidelite"),
    @NamedQuery(name = "Clients.findByDateNaissance", query = "SELECT c FROM Clients c WHERE c.dateNaissance = :dateNaissance"),
    @NamedQuery(name = "Clients.findByDateCompte", query = "SELECT c FROM Clients c WHERE c.dateCompte = :dateCompte")})
public class Clients implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "ID_CLIENT")
    private Integer idClient;
    // @Pattern(regexp="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?", message="Invalid email")//if the field contains email address consider using this annotation to enforce field validation
    @Size(max = 233)
    @Column(name = "EMAIL")
    private String email;
    @Size(max = 233)
    @Column(name = "NOM")
    private String nom;
    @Size(max = 233)
    @Column(name = "PASSWORD")
    private String password;
    @Size(max = 233)
    @Column(name = "PRENOM")
    private String prenom;
    @Size(max = 233)
    @Column(name = "ADRESSE")
    private String adresse;
    @Size(max = 233)
    @Column(name = "CP")
    private String cp;
    @Size(max = 233)
    @Column(name = "VILLE")
    private String ville;
    @Column(name = "TEL")
    private Integer tel;
    @Column(name = "MOBILE")
    private Integer mobile;
    @Column(name = "CARTE_FIDELITE")
    private Boolean carteFidelite;
    @Basic(optional = false)
    @NotNull
    @Column(name = "DATE_NAISSANCE")
    @Temporal(TemporalType.DATE)
    private Date dateNaissance;
    @Basic(optional = false)
    @NotNull
    @Column(name = "DATE_COMPTE")
    @Temporal(TemporalType.DATE)
    private Date dateCompte;
    @OneToOne(cascade = CascadeType.ALL, mappedBy = "idClient")
    private Factures factures;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "clients")
    private List<LignesFacture> lignesFactureList;

    public Clients() {
    }

    public Clients(Integer idClient) {
        this.idClient = idClient;
    }

    public Clients(Integer idClient, Date dateNaissance, Date dateCompte) {
        this.idClient = idClient;
        this.dateNaissance = dateNaissance;
        this.dateCompte = dateCompte;
    }

    public Integer getIdClient() {
        return idClient;
    }

    public void setIdClient(Integer idClient) {
        this.idClient = idClient;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getNom() {
        return nom;
    }

    public void setNom(String nom) {
        this.nom = nom;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getPrenom() {
        return prenom;
    }

    public void setPrenom(String prenom) {
        this.prenom = prenom;
    }

    public String getAdresse() {
        return adresse;
    }

    public void setAdresse(String adresse) {
        this.adresse = adresse;
    }

    public String getCp() {
        return cp;
    }

    public void setCp(String cp) {
        this.cp = cp;
    }

    public String getVille() {
        return ville;
    }

    public void setVille(String ville) {
        this.ville = ville;
    }

    public Integer getTel() {
        return tel;
    }

    public void setTel(Integer tel) {
        this.tel = tel;
    }

    public Integer getMobile() {
        return mobile;
    }

    public void setMobile(Integer mobile) {
        this.mobile = mobile;
    }

    public Boolean getCarteFidelite() {
        return carteFidelite;
    }

    public void setCarteFidelite(Boolean carteFidelite) {
        this.carteFidelite = carteFidelite;
    }

    public Date getDateNaissance() {
        return dateNaissance;
    }

    public void setDateNaissance(Date dateNaissance) {
        this.dateNaissance = dateNaissance;
    }

    public Date getDateCompte() {
        return dateCompte;
    }

    public void setDateCompte(Date dateCompte) {
        this.dateCompte = dateCompte;
    }

    public Factures getFactures() {
        return factures;
    }

    public void setFactures(Factures factures) {
        this.factures = factures;
    }

    @XmlTransient
    public List<LignesFacture> getLignesFactureList() {
        return lignesFactureList;
    }

    public void setLignesFactureList(List<LignesFacture> lignesFactureList) {
        this.lignesFactureList = lignesFactureList;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (idClient != null ? idClient.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Clients)) {
            return false;
        }
        Clients other = (Clients) object;
        if ((this.idClient == null && other.idClient != null) || (this.idClient != null && !this.idClient.equals(other.idClient))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.boutique.entity.Clients[ idClient=" + idClient + " ]";
    }

} 
```

`Clients`我的班级的 SessionBean ：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.boutique.ejb;

import com.boutique.entity.Articles;
import com.boutique.entity.Clients;
import java.io.Serializable;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.annotation.Resource;
import javax.ejb.Stateless;
import javax.ejb.LocalBean;
import javax.jms.Connection;
import javax.jms.ConnectionFactory;
import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.MessageProducer;
import javax.jms.ObjectMessage;
import javax.jms.Queue;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

/**
 *
 * @author Barthelemius
 */
@Stateless
@LocalBean
public class UtilisateurSession {
    @Resource(mappedName = "jms/NotificationQueu")
    private Queue notificationQueu;
    @Resource(mappedName = "jms/NotificationQueuFactory")
    private ConnectionFactory notificationQueuFactory;

    @PersistenceContext(unitName = "booxstore-ejbPU")
    private EntityManager em;

    public void persist(Object object) {
        em.persist(object);
    }

    // Add business logic below. (Right-click in editor and choose
    // "Insert Code > Add Business Method")

    public List<Clients> Add(String IDClient ,String nom, String prenom, String email, String motDePasse, String adresse, String CP, String ville, String tel, String mobile, boolean carteFidelite,String dateNaissance, String dateCompte) {
        //Query query = em.createQuery("INSERT INTO Clients " + IDClient + "," + email + "," + nom + "," + motDePasse + "," + prenom + "," + adresse + "," + CP + "," + ville + "," + tel + "," + mobile + "," + carteFidelite + "," + dateNaissance + "," + dateCompte);
        Query query = em.createNamedQuery("INSERT INTO Clients (" +IDClient + "," +email + "," + nom + "," + motDePasse + "," + prenom + "," + adresse + "," + CP + "," + ville + "," + tel + "," + mobile + "," + carteFidelite + "," + dateNaissance + "," + dateCompte+ ")"+"SELECT ID_CLIENT, EMAIL, NOM, PASSWORD, PRENOM, ADRESSE, CP, VILLE, TEL, MOBILE, CARTE_FIDELITE, DATE_NAISSANCE, DATE_COMPTE");
        return query.getResultList();

    }

    public Clients Update(Clients clients)   {
        Clients updated = em.merge(clients);
        try
        {
            sendJMSMessageToNotificationQueu(updated);
        }
        catch (JMSException ex)
        {
            Logger.getLogger(UtilisateurSession.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println("utilisateur updated in UtilisateurSession!");
        return updated;
    }

    private Message createJMSMessageForjmsNotificationQueu(Session session, Object messageData) throws JMSException {
        // TODO create and populate message to send
        ObjectMessage tm = session.createObjectMessage();
        tm.setObject((Serializable)messageData);
        return tm;
    }

    private void sendJMSMessageToNotificationQueu(Object messageData) throws JMSException {
        Connection connection = null;
        Session session = null;
        try {
            connection = notificationQueuFactory.createConnection();
            session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
            MessageProducer messageProducer = session.createProducer(notificationQueu);
            messageProducer.send(createJMSMessageForjmsNotificationQueu(session, messageData));
        } finally {
            if (session != null) {
                try {
                    session.close();
                } catch (JMSException e) {
                    Logger.getLogger(this.getClass().getName()).log(Level.WARNING, "Cannot close session", e);
                }
            }
            if (connection != null) {
                connection.close();
            }
        }
    }

    public List<Clients> Retrieve() {
        Query query = em.createNamedQuery("Clients.findAll");
        return query.getResultList();
    }

} 
```

客户端的 ManagedBean：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.boutique.web;

import com.boutique.ejb.UtilisateurSession;
import com.boutique.entity.Clients;
import java.util.List;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.persistence.Query;

/**
 *
 * @author Barthelemius
 */
@ManagedBean(name = "clients")
@SessionScoped
public class ClientsMBean {
    @EJB
    private UtilisateurSession utilisateurSession;
    private Clients clients;

    public ClientsMBean() {
    }

    public List<Clients> getClients()
    {
        return utilisateurSession.Retrieve();
    }

    public Clients getDetails()
    {

        return clients;
    }

    public String showDetails(Clients clients)
    {
        this.clients = clients;
        return "DETAILS";
    }

    public String update()
    {
        System.out.println("###UPDATE###");
        clients = utilisateurSession.Update(clients);
        return "SAVED";
    }

    public String list()
    {
        System.out.println("###LIST###");
        return "LIST";
    }
} 
```

register.xhtml：（如果我的 managedBean 和 session 不起作用，我不知道我应该给她放什么）

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  
      xmlns:h="http://java.sun.com/jsf/html"  
      xmlns:f="http://java.sun.com/jsf/core"  
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">  
    <h:head>
        <title>BooxStore</title>
    </h:head>
    <h:body>
        <ui:insert name="header" >
            <ui:include src="header.xhtml" />
        </ui:insert>

        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span2">
                    <div class="bs-docs-example">
                        <div class="well" style="max-width: 340px; padding: 8px 0; margin-top: 5px;">
                            <ul class="nav nav-list">
                                <li class="nav-header">Catégories</li>
                                <li class="active"><a href="#">Tous</a></li>
                                <li><a href="#">Nothing</a></li>
                                <li><a href="#">test</a></li>
                                <li><a href="#">try</a></li>
                            </ul>
                        </div>
                    </div> </div>       
                <div class="span10" style="margin-top: 5px;">

                    <div id="search">
                        <h:form class="form-search">
                            <h:inputText class="input-medium search-query" value="" />
                            <h:commandButton value="Rechercher" class="btn" action="search" />
                        </h:form> 
                    </div>
                    <h2>Inscription</h2>

                    <f:view>
                        <p:dataGrid value="#{#####}" var="item" columns="1">
                        ####DON'T WORK
                        </p:dataGrid>
                    </f:view>
                </div>
            </div>
        </div>
        <ui:insert name="footer" >
            <ui:include src="footer.xhtml" />
        </ui:insert>
    </h:body>
</html> 
```

对不起，很长的帖子，但我有这个问题，不知道如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:32:11.433

那么……你的问题是什么？

有关如何使用 JSF 制作注册表单的教程可[在此处](http://www.roseindia.net/jsf/IntegratingLogin_Registration.shtml)、[此处](http://www.greenkode.com/2011/08/building-a-user-registration-form-using-jsf-2-0/)和[此处获得](http://www.greenkode.com/2011/08/building-a-user-registration-form-using-jsf-2-0/)

# python - 执行 Python 脚本时遇到问题

> ID：13609464
> 
> 赞同：-2
> 
> 时间：2012-11-28T16:12:53.307
> 
> 标签：python

我正在尝试从程序 DL_POLY 4 的大型输出文件中提取信息，并将其制成一个更简单的文件，并针对某些可视化软件进行格式化。

假设有人已经编写了一个脚本来将大型 HISTORY 输出文件（基本上只包含大量文本）转换为 .xyz（扩展名是任意的），这是 VMD 处理的正确格式。（脚本创建者的完整文档可在此处获得：[http](http://www.ccp5.ac.uk/DL_POLY_CLASSIC/FAQ/FAQ9.shtml) ://www.ccp5.ac.uk/DL_POLY_CLASSIC/FAQ/FAQ9.shtml ）

这是脚本（也可[在线](http://www.ccp5.ac.uk/DL_POLY_CLASSIC/FAQ/his2xyz.py)获得）：

```
#!/usr/bin/env python
import sys,string

atomList=['Si','Al','O_','O','H','C','Cl','Na','Zr','Y_','Mg','K','Ag','Ar']
inputFile=open(sys.argv[1],'r')
outFile=open(sys.argv[2],'w')

title=inputFile.readline()
line=inputFile.readline()

while(line!=""): 
if string.split(line)[0]=='timestep':
    timestep='step= '+string.split(line)[1]+'\n'
    totalAtom=string.split(line)[2]+'\n'    
    outFile.write(totalAtom)
    outFile.write(timestep)

if string.split(line)[0][:2] in atomList:
        atomName=string.split(line)[0][:2]+'\t'
    outFile.write(atomName)
    xyzline=inputFile.readline()
    outFile.write(xyzline)

line=inputFile.readline()

inputFile.close()
outFile.close() 
```

我尝试将脚本保存为我命名为 his2xyz.py 的文件（在包含 HISTORY 文件的目录中）并通过 Python 运行，但这没有任何作用，也不会产生输出。

这个脚本看起来应该可以工作吗？

我想尝试编写自己的脚本，但老实说，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:26:23.760

该脚本有两个参数。第一个是输入文件，第二个是输出文件，所以你必须像这样运行它：

```
./his2xyz.py HISTORY the_output_file.xyz 
```

编辑：您提到您将编写自己的脚本，但您不知道该怎么做。以下是一些生活建议：如果您不知道如何做某事，请咨询搜索引擎——但您知道这一点。如果你真的真的很想写一个脚本，你需要先学习 Python。市场上有很多为此目的的好书，但官方文档也写得很好。[从教程](http://docs.python.org/2/tutorial/)开始，玩得开心！:-)

# android - 更新原始文件夹中的文本文件

> ID：13609466
> 
> 赞同：1
> 
> 时间：2012-11-28T16:12:55.230
> 
> 标签：android, eclipse

我有一个应用程序正在读取 res/raw 文件夹中的文本文件。它工作得很好，但是当我更改这个文本文件并尝试在 Eclipse 上再次运行应用程序时（我不需要从这个应用程序更改原始文件，我已经看到这是不可能的。我只想这样做来自 Eclipse，因为我仍处于应用程序的构建阶段）并在我的假冒产品上对其进行测试，文本文件没有考虑修改。我发现在应用程序中更新文件的唯一方法是卸载它并重新运行它。

正常吗？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:17:09.047

据我了解，eclipse不知道它已更新，所以

```
Right click on a project -> refresh. 
```

如果这没有帮助，请尝试

```
Project -> Clean 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:36:56.157

是的，这是默认行为。

假设您从项目的原始文件夹中的 D 驱动器中拖动了一个名为“ABC.txt”的文件。项目空间位于 E 盘。

拖放后，将在您的应用程序文件夹内的 E 驱动器中创建一个新文件。该文件与 D 盘中的文件不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T11:45:26.180

问题已修复，它发生在可搜索字典（Android 的示例应用程序）中，修复只是在更改数据库版本时增加它，它会自动再次加载它。

# css - 单击时的灰色背景颜色

> ID：13609468
> 
> 赞同：1
> 
> 时间：2012-11-28T16:12:59.453
> 
> 标签：css, internet-explorer-10

我的按钮有这些 CSS 定义：

```
nav ul li a {
    display: block;
    margin-right: 0px;
    font-size: 19px;
    line-height: 40px;
    text-align: center;
    text-decoration: none;
    color: white;
    /* border:1px solid red; */
} 
```

在 Internet Explorer 10 中，单击时会显示灰色背景。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T02:28:14.927

只需添加 a:active { background: none; } 到你的样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T00:28:19.977

Internet Explorer 10 似乎显示链接（锚点： ie `<a href>`），`display:block;`单击时具有灰色背景的属性。

您可以通过插入`background-color:none;`代码轻松删除它。所以，你应该有以下代码：

```
nav ul li a {
    display: block;
    margin-right: 0px;
    font-size: 19px;
    line-height: 40px;
    text-align: center;
    text-decoration: none;
    color: white;
    /* border:1px solid red; */
    background-color:none;
} 
```

从积极的方面来说，应该消除这个问题。两个负面因素包括，您不能设置背景，或者在 Internet Explorer 中处于活动状态（即`a:active`）。其他浏览器将继续正常/正常工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-28T17:00:19.050

我们仍然无法理解问题是什么？哪个`background color`是`gray`？你也没有提供你的`html`。我想这段代码将帮助您更改或删除`color`链接将改变每个州的行为......

```
a:link    {color:red;}
a:visited {color:green;}
a:hover   {color:blue;}
a:active  {color:yellow;} 
```

使用这四种颜色，您可以检查自己并得出结论... :)

# c# - C#生产者/消费者实现问题

> ID：13609470
> 
> 赞同：1
> 
> 时间：2012-11-28T16:13:00.687
> 
> 标签：c#

我有一个如下的生产者-消费者类。

```
public class ProducerConsumer<T> where T : class
    {
        private Thread _workerThread;
        private readonly Queue<T> _workQueue;
        private readonly object _lockObject = new object();
        private readonly Action<T> _workCallbackAction;
        private ManualResetEvent _workerWaitSignal;

        public ProducerConsumer(Action<T> action)
        {               
            _workCallbackAction = action;
            _workQueue = new Queue<T>();                
        }

        private void DoWork()
        {
            while (true)
            {
                T workItemToBeProcessed = default(T);
                bool hasSomeWorkItem = false;

                lock (_lockObject)
                {
                    hasSomeWorkItem = _workQueue.Count > 0;

                    if (hasSomeWorkItem)
                    {
                        workItemToBeProcessed = _workQueue.Dequeue();
                        if (workItemToBeProcessed == null)
                        {
                            return;
                        }
                    }
                }
                if (hasSomeWorkItem)
                {
                    if (_workCallbackAction != null)
                    {
                        _workCallbackAction(workItemToBeProcessed);
                    }
                }
                else
                {
                    _workerWaitSignal.WaitOne();
                    Debug.WriteLine("Waiting for signal.");
                }
            }
        }

        public void EnQueueWorkItem(T workItem)
        {
            lock (_lockObject)
            {
                _workQueue.Enqueue(workItem);
                _workerWaitSignal.Set();
            }
        }

        public void StopWork(ManualResetEvent stopSignal)
        {
            EnQueueWorkItem(null);
            _workerThread.Join();
            _workerWaitSignal.Close();
            _workerWaitSignal = null;
            if (stopSignal != null)
            {
                stopSignal.Set();
            }
        }

        public void ReStart()
        {
            _workerWaitSignal = new ManualResetEvent(false);
            _workerThread = new Thread(DoWork) { IsBackground = true };
            _workerThread.Start();
        }
    } 
```

我正在通过以下方式使用它：

```
 public partial class Form1 : Form
    {

        private RecordProducerConsumer<string> _proConsumer;
        public Form1()
        {
            InitializeComponent();
            _proConsumer = new RecordProducerConsumer<string>(DoAction);
        }

        private bool restart=true;
        private int item = 0;

        private void button1_Click(object sender, EventArgs e)
        {

            if (restart)
            {
                _proConsumer.ReStart();
                restart = false;
            }

            item++;
            _proConsumer.EnQueueWorkItem(item.ToString());

        }

        private void DoAction(string str)
        {
            Debug.WriteLine(str);
        }

        private void btnStop_Click(object sender, EventArgs e)
        {
            ManualResetEvent mre = new ManualResetEvent(false);
            _proConsumer.StopWork(mre);
            mre.WaitOne();
            restart = true;
        }

        private void Stop(ManualResetEvent mre)
        {
            mre.WaitOne();          
        }
    } 
```

我的问题或我无法理解的是，当我单击按钮`Start`时，我只添加一个项目，并且`Dequeue`该项目但继续运行循环，因此我在.`"Waiting for signal."``Output``Visual Studio`

为什么它不停止`_workerWaitSignal.WaitOne();`在`DoWork()`方法中，为什么它一直在运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:18:02.410

几个问题：

1.  执行等待*后*输出“等待问题”几乎没有任何意义。考虑在实际等待*之前*移动写入。
2.  您正在使用`ManualResetEvent`- 顾名思义，它需要*手动重置*才能从*信号*状态恢复。`Reset`但是，我在您的代码中看不到调用。
3.  为避免其他并发问题（例如，在重置事件时出现竞争条件，而其他线程在将另一个工作项入队后设置事件），请考虑在您的场景中使用[信号量](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:19:48.000

试试这个......我可能是错的......但这就是我通过阅读你的代码所能弄清楚的。希望这可以帮助 ：）

```
 private void button1_Click(object sender, EventArgs e)
    {

        if (restart)
        {
            restart = false;
            _proConsumer.ReStart();                
        }

        item++;
        _proConsumer.EnQueueWorkItem(item.ToString());

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:19:57.360

我没有彻底阅读代码，但我可以大胆猜测您打算使用 an [`AutoResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)（在某些`WaitOne()`版本发布后会自动重置）而不是 a [`ManualResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)（在您明确调用之前保持设置`Reset()`）。

另外，您有什么理由不使用 .NET 的[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)吗？它是生产者/消费者模式的框架实现，效果很好。

# iphone - 验证后找不到图标 info.plist

> ID：13609471
> 
> 赞同：-1
> 
> 时间：2012-11-28T16:13:05.130
> 
> 标签：iphone, objective-c, ios, app-store-connect, appstore-approval

在尝试验证我的应用程序时，我不断收到这些错误。这些是错误：

- 在顶级应用程序包装下找不到 info.plist 中指定的图标：icon.png

-Iphone/Ipod Touch：Info.plist：无法验证图标尺寸，未找到图标。您必须定义 CFBundleIcons、CFBundleIconFiles、CFBundleIconFile，或提供默认的 Icon.png，即 57x57。我已将图标添加到拖放的信息部分。我的问题是我如何获得一个有效的捆绑标识符，我错过了什么不让我的“图标”通过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:39:41.783

重命名你的图标`Icon.png`，不要`icon.png`。正确的大小写很重要

# c++ - 从文本文件中将整数读入一个简单的链表。然后对整数列表进行冒泡排序并读出到另一个文件

> ID：13609472
> 
> 赞同：-1
> 
> 时间：2012-11-28T16:13:04.270
> 
> 标签：c++, linked-list, operator-overloading

从文本文件中将整数读入一个简单的链表。然后对整数列表进行冒泡排序并读出到另一个文件中。现在我正在阅读主要内容，但我试图重载提取运算符以将其读入，但我不知道该怎么做。我的`Bubblesort`功能也引起了很多问题。它告诉我该函数不能重载，并且节点标识符未声明。任何帮助将不胜感激

主文件

```
#include <iostream>
#include <cstdlib>
#include <iomanip>
#include <fstream>
#include "bubble.h"

using namespace std;
struct nodeType
{
    int info;
    nodeType* link;
};

node *head_ptr = NULL;
void Display();
void list_clear(nodeType*& head_ptr);
void list_copy(const nodeType* source_ptr, nodeType*&head_ptr, nodeType*&tail_ptr);
Bubblesort();

int main()
{
    ifstream datld;
    ofstream outld;

    Bubble D3;

    datld.open ("infile2.txt");
    if (!datld)
    {
        cout << "failure to open data.txt" << endl;
        system ("pause");
        return 1;
    }

    datld >> D3;

    while(datld)
    {
        cout << D3<< endl;
        datld >> D3;
    }

    system("pause");
    return 0;

    Bubblesort();
}

void Bubblesort()
{
    node* curr = head_ptr;
    int count = 0;
    while(curr!=NULL)
    {
        count++;
        curr = curr->NEXT;
    }
    for(int i = count ; i > 1 ; i-- )
    {
        node *temp, *swap1;
        swap1 = HEAD;
        for(int j = 0 ; j < count-1 ; j++ )
        {
            if(swap1->DATA > swap1->NEXT->DATA)
            {
                node *swap2 = swap1->NEXT;
                swap1->NEXT = swap2->NEXT;
                swap2->NEXT = swap1;
                if(swap1 == HEAD)
                {
                    HEAD = swap2;
                    swap1 = swap2;
                }
                else
                {
                    swap1 = swap2;
                    temp->NEXT = swap2;
                }
            }
            temp = swap1;
            swap1 = swap1->NEXT;
        }
    }
}

void list_clear(nodeType*& head_ptr)
//Library facilities used:cstdlib
{
    nodeType * removeptr;
    while(head_ptr!=NULL)
    {
        removeptr=head_ptr;
        head_ptr=head_ptr->link;
        delete removeptr;
    }
}

void list_copy(const nodeType* source_ptr, nodeType*&head_ptr, nodeType*&tail_ptr)
{
    nodeType* temp;// to allocate new nodes
    head_ptr=NULL;
    tail_ptr=NULL;

    if(source_ptr==NULL)
        return;

    head_ptr=new nodeType;
    head_ptr->link=NULL;
    head_ptr->info=source_ptr->info;
    tail_ptr=head_ptr;
    source_ptr=source_ptr->link;

    while(source_ptr!=NULL)
    {
        temp = new nodeType;
        temp->link=NULL;
        temp->info =source_ptr-> info;
        tail_ptr->link=temp;
        tail_ptr = tail_ptr->link;
        source_ptr = source_ptr->link;
    }
} 
```

头文件

```
#include <iostream>
#include <iomanip>
#include <fstream>
#include <cstdlib>
using namespace std;

class Bubble
{
private:
    int manynodes;
public:
    Bubble() { }

    void Bubblesort();

    friend ostream &operator<<( ostream &output, const Bubble &D )
    {
        output << D.manynodes;
        return output;
    }

    friend istream &operator>>( istream  &input, Bubble &D )
    {
        input >> D.manynodes;
        return input;
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:24:47.060

*   您的提取操作员看起来不错。我不知道它是否真的满足您的需求，但这是另一个问题。
*   您将函数声明`Bubblesort()`两次：首先在头文件中声明为`void Bubblesort()`，然后在主文件中声明为 just `Bubblesort()`（这至少应该给你一个警告，它被认为是意味着`int Bubblesort()`）。您不能仅在返回值上重载函数，因此会出现错误。
*   实际上，您正在使用在多个地方调用的类型`node`，但您没有在任何地方声明或定义它。

# git - Ubuntu：gitweb 总是在 /var/cache/git 中寻找项目（“404 - 未找到项目”）

> ID：13609475
> 
> 赞同：1
> 
> 时间：2012-11-28T16:13:14.803
> 
> 标签：git, ubuntu-12.04, gitweb

在Ubuntu 12.04（64 位）服务器上安装*gitweb*`$projectroot`并将变量更改为 以外的`/usr/share/gitweb/gitweb.cgi`任何目录`/var/cache/git`后，项目仍会在`/var/cache/git`.

这发生在 Ubuntu 的*gitweb*包 (1.7.9.5) 以及克隆 Git 的存储库和编译最新的稳定分支 (1.8.0.1) 中。

该问题也可以在 Apache 的 gitweb 站点上以“404 - 未找到项目”的形式出现，因为项目将位于与`/var/cache/git`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:29:05.207

在 Ubuntu 中，`/usr/share/gitweb/gitweb.cgi`不应编辑该文件。`$projectroot`变量应设置在`/etc/gitweb.conf`.

感谢[Git 邮件列表](http://thread.gmane.org/gmane.comp.version-control.git/210834)的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:13:14.803

定义后`$projectroot=/var/git`（就像我的情况一样），如果我在第 3,915 行中插入 的值，则会`$projectroot`显示`<title>`字符串`/var/cache/git`，所以问题是 cgi 文件中的某处的值`$projectroot`被重置为系统的默认值。

这种行为的罪魁祸首在于`git_get_projects_list`子程序，在第 2,865 行，`our $projectroot`再次定义了全局变量，将其值重置为系统默认值。解决它的方法是在同一行上声明它并将其设置为与上面相同的值：

```
...
2,863\. # global variables                                       
2,864\. our $project_maxdepth = 2007;
2,865\. our $projectroot = "/var/git";
2,866\. # skip project-list toplevel, if we get it.              
2,867\. return if (m!^[/.]$!);
... 
```

我没有在 Ubuntu 或 Git 的邮件列表中看到此问题的报告，因此任何将其视为错误或功能的见解（但在我看来显然是错误），或者如果这发生在其他 Linux 发行版中，将不胜感激。

# awk - awk - 字段分隔符行为

> ID：13609479
> 
> 赞同：1
> 
> 时间：2012-11-28T16:13:20.137
> 
> 标签：awk

我有一个文件：

```
CreateSec,explorer.exe,\\WINDOWS\\system32\\verclsid.exe,SUCCESS 
```

我想打印**“$ 2”**

**示例 1**

它运作良好：

```
$ awk -F '\\\\\\\\' '{print $2}' file
WINDOWS 
```

**示例 2**

它运作良好：

```
$ awk -F '\\\\'+ '{print $2}' file
WINDOWS 
```

**示例 3**

不打印。

```
$ awk -F "\\\\\\\\" '{print $2}' file
. 
```

**示例 4**

所以它运作良好：

```
$ echo "CreateSec,explorer.exe,\\WINDOWS\\system32\\verclsid.exe,SUCCESS" | awk -F '\' '{print $2}'
WINDOWS
----------------------------------------------------------------------------------

$ echo "CreateSec,explorer.exe,\\WINDOWS\\system32\\verclsid.exe,SUCCESS" | awk -F "\\" '{print $2}'
WINDOWS 
```

问题：

1.  为什么3个例子不起作用？
2.  如何正确保存3个例子？
3.  有什么区别？：

    一种）`awk -F '\\\\\\\\'`

    b)`awk -F "\\\\\\\\"`

谢谢你的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:24:55.700

关于 (3) — 四个反斜杠是不同的：

*   在单引号内，没有元字符，因此 shell 将 8 个反斜杠传递给`awk`.
*   在双引号内，反斜杠转义后面的字符，因此 shell 将 4 个反斜杠传递给`awk`.

# android - Facebook Android 应用配置错误，仅用于调试密钥库

> ID：13609490
> 
> 赞同：0
> 
> 时间：2012-11-28T16:13:39.667
> 
> 标签：android, facebook

我将一个 Android 应用程序与 Facebook Android SDK 3.02b 集成，并在 facebook 授权屏幕上收到“应用程序配置错误”消息。奇怪的是，这仅发生在调试应用程序中，例如使用调试密钥库签名的应用程序。

*   我确认我为正确的密钥库获取了哈希，例如 .android/debug.keystore - 这也是 Eclipse 中的一个配置（我用来运行和安装应用程序）
*   我将两个哈希都添加到了 facebook 应用程序配置中。
*   奇怪的是，即使在 Util.java 中打开了日志记录，我也看不到任何指向关键问题的日志消息

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:41:01.333

更新到最新的 3.0 SDK 后检查并尝试打印发送到 Facebook 的密钥哈希。

入门指南 > 运行示例部分包含有关如何执行此操作的信息。但基本上，您可以将此代码添加到活动的 onCreate() 并检查 logcat：

```
 try {
        PackageInfo info = getPackageManager().getPackageInfo(
            "your package name, e.g. com.yourcompany.yourapp]", 
            PackageManager.GET_SIGNATURES);
        for (Signature signature : info.signatures) {
            MessageDigest md = MessageDigest.getInstance("SHA");
            md.update(signature.toByteArray());
            Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
            }
    } catch (NameNotFoundException e) {

    } catch (NoSuchAlgorithmException e) {

    } 
```

# spring - 通过 REST 在 Spring MVC 中进行身份验证

> ID：13609502
> 
> 赞同：3
> 
> 时间：2012-11-28T16:14:17.063
> 
> 标签：spring, rest, authentication, spring-mvc, spring-security

我一直在寻找一种通过 REST 控制器（URL 参数）对用户进行身份验证的方法。最接近的方法如下：

```
@Controller
@RequestMapping(value="/api/user")
public class UserController extends BaseJSONController{

    static Logger sLogger = Logger.getLogger(UserController.class);

    @RequestMapping(value = "/login", method = RequestMethod.POST)
    public @ResponseBody String login(@RequestParam(value="username") String user, @RequestParam(value="password") String pass) throws JSONException {
        Authentication userAuth = new UsernamePasswordAuthenticationToken(user, pass);
        MyCellebriteAuthenticationProvider MCAP = new MyCellebriteAuthenticationProvider();

        if (MCAP.authenticate(userAuth) == null){
            response.put("isOk", false);
        }
        else{
            SecurityContextHolder.getContext().setAuthentication(userAuth);
            response.put("isOk", true);
            response.put("token", "1234");
        }
        return response.toString();
    }

} 
```

但是，这不会创建 cookie。有什么想法或更好的方法来实现我想要实现的目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:22:52.157

首先，您不应该手动执行此操作：

```
SecurityContextHolder.getContext().setAuthentication(userAuth) 
```

最好使用专门的过滤器负责身份验证，设置安全上下文并在处理请求后清除它。默认情况下，Spring Security 使用线程本地来存储安全上下文，因此如果您在客户端调用后不删除它，另一个客户端可以自动以其他人身份登录。请记住，服务器线程经常被不同客户端重用于不同的请求。

其次，我建议对您的 RESTful Web 服务使用基本或摘要式身份验证。两者都受 Spring Security 支持。更多文档[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/basic.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/basic.html)

最后，请记住 RESTful Web 服务应该是无状态的。

还要记住 Spring Security 文档是你的朋友。:-)

# c# - 为逗号分隔的字符串中的每个值遍历数组

> ID：13609503
> 
> 赞同：2
> 
> 时间：2012-11-28T16:14:16.380
> 
> 标签：c#, javascript, asp.net, asp.net-mvc

我有一系列颜色。

```
Black[0]
White[1]
Blue[2]
Green[3]
Red[4]
Purple[5]
Orange[6]
Pink[7]
Silver[8] 
```

有一个 for 循环迭代颜色数组的计数并与传入的字符串进行比较。在这种情况下，它是字符串中的单一颜色。

```
private ushort? FindColor(SomeObject colorArray, string name)
{
    for (ushort i = 0; i < colorArray.Count; ++i)
    {
        SomeObject someObject = colorArray[i];
        try
        {
            if (someObject.Name == name)
                return i;
        }
    }
    return null;
} 
```

如果字符串名称与 [i] 处的颜色匹配，则返回找到的数组编号。

需要发生的是名称将是一个逗号分隔的颜色字符串。所以它可能是`Red,Purple`。

我想做的是通过 colorArray 并找出每个拆分字符串颜色是否在彼此相邻的数组中找到。所以在这种情况下，红色出现在 4 处，紫色出现在 5 处。因为它们彼此相邻，所以我想返回 4。否则，如果没有在彼此旁边找到 2 种颜色，则返回 null。

```
private List<string> GetColors(string colorName)
{
    if (colorName == null)
        return new List<string>();

    string[] parts = colorName.Split(',');
    return parts.Select(p => p.Trim()).ToList();
}

private ushort? FindColor(SomeObject colorArray, string name)
{
    var colors = GetColors(name);

    for (ushort i = 0; i < colorArray.Count; ++i)
    {
        SomeObject someObject = colorArray[i];
        try
        {
            ????
            for(int j = 0; j < colors.Count; j++)
            {

                if (someObject.Name == colors[j])
                {
                    // found the first color of Red at [4]
                    // store in a temp variable ????

                    // back into the loop and found Purple at [5]
                    // Purple at [5] was found to be beside Red at [4] so return [4]

                    return i; // i in this case would be 4

                    // if the colors are not found beside each other then
                    return null;
                }
            }
        }
    }
    return null;
} 
```

谁能推荐检查这种情况的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:43:49.373

我认为这可能对你有用

```
 private void GetColors(string colors)
    {
        string[] colorArray = new string[] { "red", "green", "purple" };

        int previousIndex = -1;
        int currentIndex;

        string[] myColors = colors.Split(',');
        foreach (string s in myColors)
        {
            currentIndex = Array.IndexOf(colorArray, s);
            if (previousIndex != -1)
            {
                if (previousIndex - currentIndex == 1 || previousIndex - currentIndex == -1)
                {
                    //do stuff here
                }
            }

            previousIndex = currentIndex;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:52:21.240

在 C# 中，返回所有匹配索引的列表：

```
private IEnumerable<int> FindColor(List<System.Drawing.Color> colorArray, string name)
{
    var colors = GetColors(name);
    var colorStrings = colorArray.Select(y => y.Name.ToString()).ToList();

    return colors.Select(x => colorStrings.IndexOf(x));
} 
```

用例：

```
FindColor(ColorList, "White,Black,Pink,Polkadot");
// Returns { 1, 0, 7, -1 } 
```

您可以通过返回`System.Drawing.Color`from列表`GetColors()`而不是字符串列表来提高效率，但我认为这不会有很大的不同。

* * *

此外，如果您只想要最初要求的内容 - 返回匹配序列的第一个索引，您可以对 return 语句中当前的内容进行排序，然后旋转列表以检查间隙。如果找到间隙，则返回 null，否则，返回第一个元素。

# powershell - 使用 -Properties 时，将 Get-ADObject 结果保存到变量会变慢

> ID：13609505
> 
> 赞同：1
> 
> 时间：2012-11-28T16:14:19.700
> 
> 标签：powershell, powershell-3.0

我正在尝试运行以下 cmdlet 并将其输出保存到我​​的 $query 变量中。

```
$query = Get-ADObject -Server $ldapServer -Credential $account -LDAPFilter "(&(objectCategory=Person)(objectClass=User)(!userAccountControl:1.2.840.113556.1.4.803:=2))" -SearchBase $ldapDN  -Properties "GivenName", "Mail" 
```

LDAP 查询运行得非常好（在 6000+ LDAP 数据库上大约需要 10 秒）。返回的结果集包含大约 150 个用户对象。尝试像这样迭代 $query 变量时会发生奇怪的事情：

```
$query 
```

或者：

```
foreach($object in $query){$object} 
```

**迭代速度非常慢（每个对象大约 10-30 秒）**

当查询未保存到变量时，一切正常且快速，例如运行命令：

```
Get-ADObject -Server $ldapServer -Credential $account -LDAPFilter "(&(objectCategory=Person)(objectClass=User)(!userAccountControl:1.2.840.113556.1.4.803:=2))" -SearchBase $ldapDN  -Properties "GivenName", "Mail" 
```

此外，当使用像这样的格式化 cmdlet 时：

```
$query = Get-ADObject -Server $ldapServer -Credential $account -LDAPFilter "(&(objectCategory=Person)(objectClass=User)(!userAccountControl:1.2.840.113556.1.4.803:=2))" -SearchBase $ldapDN  -Properties "GivenName", "Mail" | ft 
```

但是，我需要“对象”进行迭代。所以保存文本输出在这里对我没有帮助。更令人困惑的是，当仅通过调用“$query”迭代一次时，对曾经打印的对象的以下调用在所有进一步的调用中都会被快速处理。 **此外，当 '-Properties' 参数从 'Get-ADObject' cmdlet 中排除时，保存到 $query 变量的结果也会得到快速处理！**“-Properties”参数似乎导致它变慢，（所以我想它与内存限制无关，考虑到我有足够的可用内存）。

有谁知道：

1.  为什么会发生这种情况？

2.  为什么它只在使用-properties 时发生？

3.  如何解决问题/一些解决方法（我不能使用“DirectorySearcher”类，因为无法指定用户为该类运行“LDAP”查询，并且不能调用“runas”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:29:47.013

尝试使用该`select-object`转换`$query``pscustomobject`

```
$query = Get-ADObject -Server $ldapServer -Credential $account `
-LDAPFilter "(&(objectCategory=Person)(objectClass=User)(!userAccountControl:1.2.840.113556.1.4.803:=2))"  -SearchBase $ldapDN `
 -Properties "GivenName", "Mail" | select givenname, mail 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-10T14:35:56.473

```
$query = Get-ADObject -Server $ldapServer -Credential $account `
-LDAPFilter "(&(objectCategory=Person)(objectClass=User)(!userAccountControl:1.2.840.113556.1.4.803:=2))"  -SearchBase $ldapDN `
 -Properties "GivenName", "Mail" 
$query| Export-Clixml c:\temp\myquery.xml 
```

导出变量 $query 后将很快枚举/显示。我打算再次导入它......但后来发现变量中的速度问题已经消失了。

不过我更喜欢CB的回答。

# java - 动态获取当前方法名称的更短方法

> ID：13609509
> 
> 赞同：11
> 
> 时间：2012-11-28T16:14:29.807
> 
> 标签：java

我正在寻找一种无需创建空白对象即可获取当前方法名称的方法。有没有办法做到这一点？这将整理我们的日志记录代码。

这是我们现在要做的：

```
new Object() {}.getClass().getEnclosingMethod().getName( 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T16:18:17.413

怎么样`Thread.currentThread().getStackTrace()[1]`？

由于这使您能够检查更高级别的堆栈跟踪，因此您可以轻松地将其包装在辅助方法中（见下文）。它还为您提供了获取更多信息的选项，而不仅仅是方法名称，例如文件名、行号等。

**编辑**辅助方法可能看起来像这样（感谢@Esailija）：

```
public static String getMethodName() {
    return Thread.currentThread().getStackTrace()[2].getMethodName();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T16:19:21.763

你也可以使用

```
Thread.currentThread().getStackTrace()[1].getMethodName() 
```

包含最后一个方法调用，但不短于

```
new Object() {}.getClass().getEnclosingMethod().getName 
```

我不知道有一种分拣机方法来做到这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T16:20:12.707

您可以使用`thread.currentThread().getStacktrace()[0].getMethodName()`. 但这甚至需要更多的时间`new Throwable().getStacktrace()`（参见[http://alexradzin.blogspot.co.il/2011/12/how-slow-getstacktrace-is.html](http://alexradzin.blogspot.co.il/2011/12/how-slow-getstacktrace-is.html)）

# list - JSF：将字符串添加到列表

> ID：13609511
> 
> 赞同：3
> 
> 时间：2012-11-28T16:14:33.090
> 
> 标签：list, jsf

我有一个 JSF 2.0 应用程序，它有一个包含字符串列表的 bean。

我想将字符串从 an 添加`<h:inputText>/>`到我的列表并显示我的列表。

以下代码只是将引用放在我的列表中。所以我列表中的每个元素都设置为最后一个输入。

```
@ManagedBean
@ApplicationScoped
public class Bean {

private String name;
private ArrayList<String> test = new ArrayList<String>();

public Bean() {
}

public Bean(String name) {
    this.name = name;
}

public String addtoList(String _name){
    test.add(_name);
    return "./index.xhtml";
} 

/***************GETTER/SETTER/HASHCODE/EQUALS**************************/
   ...

} 
```

这是我的 index.xhtml 的一部分：

```
 <h:inputText id="name"
                         value="#{bean.name}"
                         required="true">
        </h:inputText>
        <h:commandButton value="Post"  
                         action="#{bean.addtoList(name)}"/>  
        <br/>
        <h:dataTable var="bean"
                     value="#{bean.test}">
            <h:column>
                <h:outputText value="#{bean.name}"/>
            </h:column>

        </h:dataTable> 
```

![应用示例](../Images/f7ac03efd3c455d303d0fe576687b3a2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:06:12.750

试试这个：

```
public String addtoList() { // no parameter
    test.add(this.name); // add value of bean's property
    return "./index.xhtml";
} 
```

在facelet中：

```
<h:commandButton
    value="Post"
    action="#{bean.addtoList}"/> <!-- no parameter passed --> 
```

关键是要有`addToList`没有参数的方法，并且添加到列表中的字符串应该是`name`支持 bean 的属性的值。

而且，在数据表中，不要将其命名`var`为与支持 bean 相同的名称。这很令人困惑，并可能导致错误。使用这样的东西：

```
<h:dataTable
    var="it"
    value="#{bean.test}">
    <h:column>
        <h:outputText value="#{it}" />
    </h:column>
</h:dataTable> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:45:39.207

```
<h:dataTable var="beany"
                         value="#{bean.test}">
                <h:column>
                    <h:outputText value="#{beany}"/>
                </h:column>

</h:dataTable> 
```

问题是那`var="bean"`是我班级的同名`bean` 更好应该是另一个名字`var`

# c# - 使用长路径时调用 WinApi

> ID：13609513
> 
> 赞同：1
> 
> 时间：2012-11-28T16:14:42.563
> 
> 标签：c#, winapi, pinvoke, createfile

任何人都可以帮助我吗？

我尝试`P/Invoke`从托管的 .net 代码中使用 WINAPI 方法。 `CreateFile()`方法总是返回假。如果我使给定的路径小于 256，它就可以正常工作，但如果大于 256，则不会。我可能做错了什么。根据此[链接](http://blogs.msdn.com/b/bclteam/archive/2008/07/07/long-paths-in-net-part-3-of-3-redux-kim-hamilton.aspx)，我应该能够使用长度大于 256 的长路径文件。

以下是我尝试过的代码：

```
static void Main(string[] args)
        {
        string path =            @"c:\tttttttttttaaaaaaaaaaaaaaatttttttttttttttaaaaaaaaaaaaaaatttttttttttttttttttttttttttttttaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaattttttttttttttttttaaaaaaaaaaaaaaaaatttttttttttaaaaaaaaaaatttttttaaaaaaaaaaaaaaaaattttttttttttttttttaaaaaaaaaaaaaaaaattttttttttttttaaaaaaaaaaaaaaaaatttttt";

        LongPath.TestCreateAndWrite(path);

        }

    // This code snippet is provided under the Microsoft Permissive License.
    [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
    internal static extern SafeFileHandle CreateFile(
    string lpFileName,
    EFileAccess dwDesiredAccess,
    EFileShare dwShareMode,
    IntPtr lpSecurityAttributes,
    ECreationDisposition dwCreationDisposition,
    EFileAttributes dwFlagsAndAttributes,
    IntPtr hTemplateFile);

public static void TestCreateAndWrite(string fileName) {

    string formattedName = @"\\?\" + fileName;
    //string formattedName = @"\\?\UNC" + fileName;
    // Create a file with generic write access
    SafeFileHandle fileHandle = CreateFile(formattedName, EFileAccess.GenericWrite, 
       EFileShare.None, IntPtr.Zero,  ECreationDisposition.CreateAlways, 0, IntPtr.Zero);

    // Check for errors
    int lastWin32Error = Marshal.GetLastWin32Error();
    if (fileHandle.IsInvalid) {
        throw new System.ComponentModel.Win32Exception(lastWin32Error);
    }

    // Pass the file handle to FileStream. FileStream will close the
    // handle
    using (FileStream fs = new FileStream(fileHandle,
                                    FileAccess.Write)) {
        fs.WriteByte(80);
        fs.WriteByte(81);
        fs.WriteByte(83);
        fs.WriteByte(84);
    }
} 
```

此方法抛出错误代码 3，这是未根据系统错误代码 (0-499) (Windows) 指定的文件路径。

任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T17:26:18.577

虽然该`\\?\`符号允许您使用总长度大于 的路径`MAX_PATH`，但您仍然必须遵守 报告的每个组件限制`GetVolumeInformation`。对于 NTFS，每个组件的限制是 255，这意味着在没有反斜杠的情况下不允许超过 255 个字符。

# c# - 结构布局优化

> ID：13609515
> 
> 赞同：3
> 
> 时间：2012-11-28T16:14:45.170
> 
> 标签：c#, opengl, optimization, structure

字节优化给你带来了多大的性能提升（使它们成为 8、32、64 的倍数……）？

这是一个示例结构：

```
[StructLayout(LayoutKind.Explicit)]
public struct RenderItem
{
   [FieldOffset(0)] byte[] mCoordinates = new byte[3]; //(x,y,z)
   [FieldOffset(3)] short  mUnitType;            

} 
```

所以我的问题是，做这样的事情有多重要：

```
[StructLayout(LayoutKind.Explicit)]
public struct RenderItem
{
   [FieldOffset(0)] byte[] mCoordinates = new byte[3]; //(x,y,z)
   [FieldOffset(4)] short  mUnitType;
   [FieldOffset(6)] byte[] mPadding = new byte[2];     //make total to 8 bytes

} 
```

我确信它是“随大小缩放”的东西之一，所以我特别好奇会看到这个结构被使用大约 150,000 次来创建 VertexBuffer 对象的操作：

```
//int objType[,,] 3 dimensional int with object type information stored in it

int i = 0;
RenderItem vboItems[16 * 16 * 16 * 36]  //x - 16, y - 16, z - 16, 36 verticies per object

For(int x = 0; x < 16; x++)
{
     For(int y = 0; y < 16; y++)
     {
          For(int z = 0; z < 16; z++)
          {
               vboItems[i++] = (x,y,z,objType[x,y,z]);
          }
     }
 }

 //Put vboItems into a VBO 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T17:40:41.363

我假设您应用了 [MarshalAs] 属性来使数组成为 ByValArray，这对这样的结构才有意义。实际上，通过使结构变大 2 个字节，它会变慢。这将使用处理器的缓存效率较低，当您在数组中使用它们时，更少的结构将适合它们，这对性能**非常**重要。

默认的 StructLayoutAttribute.Pack 值 8 已经过优化，可以提供最佳的结构布局。它实际上对您的结构没有任何影响，无论 Pack 值如何，成员已经最佳对齐。任何现代处理器获得最佳性能的规则：

*   成员应与可被成员大小整除的地址对齐。这可能会在成员之间添加填充字节。此规则防止处理器必须从内存读取中复用字节值或执行两次读取并将字节粘合在一起。在您的结构上不是问题，唯一需要对齐的成员是 mUnitType，它必须在 2 处对齐，并且已经在 4 处对齐。另外请注意，您不必使用 [FieldOffset]，默认布局已经很好.

*   在数组中使用结构时，成员应该正确对齐。这可能会将包装添加到结构的末尾，以使数组中的下一个元素正确对齐。同样不是你的结构的问题，它有 6 个字节长，因此数组中的下一个元素将对齐其 mUnitType，因为它只需要 2 个。如果你实际上声明了没有 [MarshalAs] 的数组，那么抖动将自动添加 2 个字节在没有您帮助的情况下进行填充以确保数组指针正确对齐。

*   成员不应跨越 cpu 缓存行。在我知道的任何现代处理器上都是 64 字节。对性能非常不利，cpu 必须读取两个缓存行的数据并始终将字节粘合在一起，性能命中大约慢 x3。当结构包含大小为 8 或更大的成员时，这可能会在 32 位机器上发生。所以长，双或小数。不仅成员的对齐方式很重要，结构在内存中的分配位置也很重要。这在 x86 版本的 .NET 上有点问题，它只能保证从堆栈或 GC 堆分配的数据的起始地址对齐为 4 的倍数。对于 x64 来说不是问题。这对您的结构来说不是问题，它只包含永远不会跨越 cpu 缓存线的小成员。

因此，根据这些规则，您不必提供帮助，即使没有 LayoutKind.Explicit，该结构也已经是最佳的。

另一个考虑因素适用，与对齐没有任何关系。对于32 位或 64 位处理器， *short*不是最佳数据类型。如果您执行的操作超出了简单的加载和存储，则需要额外的开销将其从 16 位转换为 32 位。那个背后的背景故事[就在这里](https://stackoverflow.com/a/10157517/17034)。您现在需要平衡更好的 CPU 缓存使用率和效率较低的操作，而您只能使用分析器可靠地做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T17:07:21.777

这并不像您认为的那样起作用。

```
[StructLayout(LayoutKind.Explicit)]
public struct RenderItem
{
   [FieldOffset(0)] byte[] mCoordinates = new byte[3]; //(x,y,z)
   [FieldOffset(3)] short  mUnitType;            

} 
```

数组是一种引用类型。的存储要求`mCoordinates`是 IntPtr.Size（即 x86 上为 4 个字节，x64 上为 8 个字节）。3 个字节的元素存储在堆上。

我不知道如果您 FieldOffset 与这样的参考重叠，可能（或可能不会）发生什么坏事。

如果您需要具有该精确布局的结构，则需要创建另一个值类型

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
public struct Coordinate
{
    byte x;
    byte y;
    byte z;
};

[StructLayout(LayoutKind.Sequential, Pack = 1)]
public struct RenderItem
{
   Coordinate coord;
   short  mUnitType;            

} 
```

这不能回答您关于对齐的问题，但 Matthew 提供的链接可以。

# sublimetext2 - SublimeRope 自动补全在 Windows 上不起作用

> ID：13609519
> 
> 赞同：1
> 
> 时间：2012-11-28T16:15:04.787
> 
> 标签：sublimetext2, sublimerope

我无法让自动完成功能在 Windows 8 上为 SublimeRope 工作。

首先，我注意到在 Windows 上创建新的 Rope 项目时 SublimeRope 会弄乱路径，所以我修复了`python_path`.ropeproject > config.py 中的首选项，它们是：

```
prefs.add('python_path', 'C:/Users/brandon/python_virtualenvs/aa/Lib/site-packages')
prefs.add('python_path', 'C:/Users/brandon/django_projects/andrews-app') 
```

我还尝试在我的项目文件中指定要自动导入的包：

```
"rope_autoimport_modules": ["django.*"] 
```

当我尝试运行:`Rope: Regenerate Global Module Cache`时，出现错误：

`"Missing modules in configuration file"`

谷歌无法提供答案。Windows 上的任何人都能够让 SublimeRope 工作吗？我真的很感激一些帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:42:25.730

我在这里记录了我是如何修复它的：

[https://github.com/JulianEberius/SublimeRope/issues/54](https://github.com/JulianEberius/SublimeRope/issues/54)

基本上，我补充说：

sys.path.insert(0, r"C:\Python27\Lib\site-packages")

在 sublime_rope.py 本身中。

显然是一种 hack，但它一直有效，直到代码在上游得到修复。

# c# - 使用 Visual Studio C# 在 Management Studio 中编辑数据库

> ID：13609524
> 
> 赞同：0
> 
> 时间：2012-11-28T16:15:17.117
> 
> 标签：c#, database, visual-studio, ssms

我已经使用 SQL Server Management Studio 创建了一个数据库，现在正在尝试使用 Visual Studio Express 2012 编辑该数据库。我已将数据库连接到 Visual Studio 并且可以查看我的数据库，但我无法编辑存储在管理中的数据库使用 Visual Studio 的工作室。我创建了一个表单，并尝试在用户使用 textbox2 和 textbox3 定义列名和行（使用我的数据库中的主键）后，将输入到 textbox1 中的内容插入到我的数据库中的特定单元格中。我可以使用什么代码来执行此操作？到目前为止，我没有运气。预先感谢您的帮助。

这是我当前的代码：

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.SqlClient;
using System.Data.Sql;
using Microsoft.SqlServer.Server;
using System.Data.Linq;
using System.Data.Linq.Mapping;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        SqlConnection myConnectionString = new SqlConnection("Data Source=Server Catalog=DataBase;Integrated Security=True");
        SqlCommand command = new SqlCommand();

        private void maskedTextBox1_MaskInputRejected(object sender, MaskInputRejectedEventArgs e)
        {

        }

        private void button3_Click(object sender, EventArgs e)
        {
            try
        {
            using (SqlConnection dbConnection = new SqlConnection()) // the "using" construct will close and dispose of the connection 
            {
                dbConnection.ConnectionString = ("Data Source=Server ;Initial Catalog=Database;Integrated Security=True");
                dbConnection.Open();
                maskedTextBox1.Clear();
                dateTimePicker1.Value = DateTime.Now.AddDays(0);
                comboBox1.SelectedIndex = -1;

                String username = comboBox2.Text;
                using (SqlCommand command = new SqlCommand("INSERT INTO [Table Name] (Column Name) VALUES ([Parm1])", dbConnection))
                {
                    command.Parameters.AddWithValue("Parm1", username);
                    command.ExecuteNonQuery();
                }
            }
        }
        catch (Exception ex)
        {
            throw new Exception(ex.Message);
        }
      }      

        private void button1_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            //Close the Window
            this.Close();
        }

        private void label4_Click(object sender, EventArgs e)
        {

        }

        private void comboBox1_DataSourceChanged(object sender, EventArgs e)
        {

        }

        private void button4_Click(object sender, EventArgs e)
        {
            myConnectionString.Open();
            MessageBox.Show("Sql is connected");
            myConnectionString.Close();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:47:31.183

VALUES 子句应指定一个参数，并且应在添加参数值时指定该参数。尝试替换以下内容：

```
String sqlquery = "INSERT INTO [Man Power] ([Person_Performing_Phase_2]) VALUES ([Parm1])";
SqlCommand command = new SqlCommand(sqlquery, con);
command.Parameters.AddWithValue("Parm1", username); 
```

**编辑**

您的连接字符串格式不正确。我相信以下格式适合您当前的需求：

字符串 myConnectionString = Server=myServerAddress;Database=myDataBase;Trusted_Connection=True;

我将使用以下代码插入数据，它会为每个操作打开和关闭连接。请注意“command.ExecuteNonQuery”语句 - 它的遗漏是插入失败的原因 - 尽管我不确定为什么打开连接没有引发错误。

```
 private void button3_Click(object sender, EventArgs e)
     {
        try
        {
            using (SqlConnection dbConnection = new SqlConnection()) // the "using" construct will close and dispose of the connection 
            {
                dbConnection.ConnectionString = myConnectionString;
                dbConnection.Open();
                maskedTextBox1.Clear();
                dateTimePicker1.Value = DateTime.Now.AddDays(0);
                comboBox1.SelectedIndex = -1;

                String username = comboBox2.Text;
                using (SqlCommand command = new SqlCommand("INSERT INTO [Man Power] ([Person_Performing_Phase_2]) VALUES ([Parm1])", dbConnection))
                {
                    command.Parameters.AddWithValue("Parm1", username);
                    command.ExecuteNonQuery();
                }
            }
        }
        catch (Exception ex)
        {
            throw new Exception(ex.Message);
        }
      } 
```

您还应该删除所有其他 _Click 方法并将连接和命令语句替换为 myConnectionString 分配。

# python - 使用 Python 和 MySQLdb 关闭游标和连接

> ID：13609525
> 
> 赞同：4
> 
> 时间：2012-11-28T16:15:20.323
> 
> 标签：python, python-2.7, mysql-python

我有一个使用 MySQLdb 的简单的基于 web.py 的应用程序。我有一个处理数据库操作的类，如下所示：

```
class db():
   def __init__(self):
       db = MySQLdb.connect(host='mysql.server', user='user', passwd='pass', db='app')
       self.cur = db.cursor()

   def get_data(self):
       sql = "SELECT * FROM foobar"
       self.cur.execute(sql)
       rs = self.cur
       r.fetchall()
       return rs 
```

我像这样实例化类`DB = db()`。然后，在另一堂课上，我会参考它。

```
class bleh()
   def blarg():
      DB.get_data() 
```

有了这样的东西，我会在哪里关闭光标和连接？还是我完全错误地接近这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:19:44.153

`db.close()`用于连接和`cur.close()`光标。

[http://mysql-python.sourceforge.net/MySQLdb.html](http://mysql-python.sourceforge.net/MySQLdb.html)

编辑：

但如果它考虑一下 - 你不需要关闭光标。一旦变量被销毁，Python 就会关闭游标，因此当您的类的实例不再存在时——游标将被关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T08:08:08.713

首先，对类名和变量使用不同的名称，因为您对类名和连接也使用了相同的名称（'db'）。

接下来，您需要将 conn （在您的`db`第 3 行问题中）定义为`self.conn`.

> 导入 MySQL 数据库
> 
> 类数据库（）：
> 
> ```
> def __init__(self):
>     self.conn = MySQLdb.connect(host='mysql.server', user='user', passwd='pass', db='app')
>     self.cur = self.conn.cursor()
> 
> def get_data(self):
>     sql = "SELECT * FROM test"
>     self.cur.execute(sql)
>     rs = self.cur
>     rs.fetchall()
>     return rs 
> ```

```
class bleh()
    def blarg():
        data = DB.get_data()
        DB.cur.close()
        DB.conn.close() 
```

注意：如果您在 bleh 类中有多个函数从数据库中获取数据，请确保在函数中关闭游标和连接，这是最后调用的。或者你可能有一个单独的函数，它关闭光标和连接。

# c# - 如何在两个 ListBox 之间同步多个选择索引？

> ID：13609527
> 
> 赞同：0
> 
> 时间：2012-11-28T16:15:21.427
> 
> 标签：c#, winforms

我正在尝试使用此代码将选择从 listbox1 移动到 listbox2

```
if (listBox1.SelectedItems.Count > 0)
        {
            int selectedindex = listBox1.SelectedIndex;
            for (int i =0 ; i < listBox1 .SelectedItems.Count; i++)
            {
                listBox2.SetSelected(selectedindex , true);
            }
        } 
```

我得到了一个结果，但是当我在 listbox1 中选择多个项目时，它只会在 listbox2 中选择一个项目，这是我在 listbox1 中选择的第一个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:16:19.893

您必须设置[**SelectionMode**](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindex.aspx)属性以允许多选。您可以在属性窗口或加载事件中设置。

```
listBox2.SelectionMode.MultiExtended = SelectionMode.MultiExtended; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:49:17.453

您只存储 in 的一个选择`listbox1`索引`selectedIndex`。稍后在循环中，您总是指示`listbox2`将其选择设置为这一索引。

试试这个：

```
foreach (int index in listBox1.SelectedIndices)
{
    listBox2.SetSelected(index, true);
} 
```

# html - 如何使 div 100% 的窗口高度？

> ID：13609531
> 
> 赞同：20
> 
> 时间：2012-11-28T16:15:34.790
> 
> 标签：html, css

我只想有一个侧边栏，它将是窗口高度的 100%，但除此之外没有任何作用：

```
#sidebarBack {
background: rgba(20, 20, 20, .3);
position: fixed;
width: 250px;
height: 100%;
left: 0;
} 
```

我不想拥有`position: fixed`，因为我有水平滚动的内容，所以固定部分会保持，嗯，固定。

有没有办法做这样的事情，也许是`relative`或`absolute`位置？

这是一个用于测试和解释的快速小提琴： [JSFiddle](http://jsfiddle.net/Qtaq7/)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-03-23T21:02:57.793

您可以使用新的非常有用的-I-can't-imagine-what-took-W3C-so-long [`vh`](https://developer.mozilla.org/en-US/docs/CSS/length)CSS 单元：

```
height:100vh; 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-11-28T16:19:03.890

**tl;博士**- 添加`html, body {height:100%;}`到您的 CSS。

* * *

CSS 中的百分比值是从某个已经声明了高度的祖先继承而来的。在你的情况下，你需要告诉你侧边栏的所有父母都是 100% 的高度。我假设那`#sidebarBack`是`body`.

本质上，您上面的代码告诉`#sidebarBack`它是其父级的 100% 高度。它的父级（我们假设）是，所以你也**`body`**需要设置`height: 100%;`。`body`然而，我们不能止步于此；`body`从 继承高度**`html`**，所以我们*还*需要设置`height: 100%;`on `html`。我们可以在这里停下来，因为`html`它继承了它的属性`viewport`，它已经声明了高度`100%`。

这也意味着如果你最终把`#sidebar`另一个放在里面`div`，那`div`也需要`height:100%;`。

这是一个**[更新的 JSFiddle](http://jsfiddle.net/Qtaq7/4/)**。

将您的 CSS 更改为：

```
html, body {
    height:100%;
}

#sidebar {
    background: rgba(20, 20, 20, .3);
    width: 100px;
    height: 100%;
    left: 0;
    float:left;
}

section#settings {
    width:80%;   
    float:left;
    margin-left:100px;
    position:fixed;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-28T17:01:09.003

首先，告诉 body 元素填充窗口，而不是缩小到内容的大小：

```
body { position: absolute; min-height: 100%; } 
```

通过使用`min-height`而不是`height`，当内容比窗口长时，主体将被允许扩展超出窗口的高度（即，这允许在需要时进行垂直滚动）。

现在，将“#sidebar”设置为`position:absolute`，并使用`top:0; bottom:0;`它来强制它填充父元素的垂直空间：

```
#sidebar {
    position: absolute;
    top:0; bottom:0;
    left: 0;
    width: 100px;
    background: rgba(20, 20, 20, .3);
} 
```

这里有几个 jsFiddles：

*   [内容比窗口短](http://jsfiddle.net/Qtaq7/7/)
*   [内容比窗口长](http://jsfiddle.net/Qtaq7/8/)

正如您将看到的，在这两个示例中，我都在“#settings”部分保留了您的宽度设置，从而显示水平滚动按您的要求工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T16:21:49.297

尝试以下

```
#sidebarBack {
 background: rgba(20, 20, 20, .3);
 position: fixed;
 width: 250px;
 top:0;
 bottom:0;
 left: 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T16:25:30.107

试试这个 -

```
html,body{height:100%;}
#sidebar {
background: rgba(20, 20, 20, .3);
/*position: fixed;*/
width: 100px;
height: 100%;
left: 0;
float:left;
}

section#settings {
width: 62%;
height: auto;
display: inline-block;
position: relative;
margin-left: 100px;
float:left;
} 
```

​</p>

# jquery - 使用 ColorBox 进行确认时捕获 Checkbox 'CheckedChanged' 事件

> ID：13609533
> 
> 赞同：0
> 
> 时间：2012-11-28T16:15:41.870
> 
> 标签：jquery, asp.net, checkbox, colorbox

我有一个使用 C# 的 ASP.Net 表单页面，在 Gridview 中有一个复选框。我试图让 ColorBox 充当确认框。在链接上使用时，我可以让它正常工作，但它不会阻止事件传递到后面代码中的复选框 CheckChanged 事件处理程序。

关于停止事件传播的任何建议？我试过Bind and Live，它仍然通过。

jQuery代码：

```
$(".approver").change(function (event) {
                event.stopPropagation();
                var dialog = '<div">'
                + '<div id="dialog">'
                + '<p style="margin-top: 30px;">'
                + 'Are you sure you want to approve this program?</p>'
                + '<p style="font-size: small;">'
                + '<strong>Note:</strong> This cannot be undone!</p>'
                + '<p style="text-align: center;">'
                + '<a href="#" onclick="' + this.href + '", CloseBox();" class="btn btn-small btn-primary">Reset</a>'
                + '&nbsp;&nbsp;&nbsp;&nbsp;'
                + '<a href="#" onclick="javascript:parent.$.colorbox.close(); return false;" class="btn btn-small">Cancel</a>'
                + '</p></div></div>';

                $.colorbox(
                {
                    href: dialog,
                    open: true,
                    title: "Program Approval",
                    inline: true,
                    height: '230px'
                });
                return false;
        }); 
```

GridView 中的复选框：

```
<asp:CheckBox ID="chkApproved" 
runat="server" 
CssClass="approver" 
Checked='<%# Convert.ToBoolean(Eval("Approved")) %>'
OnCheckedChanged="chkApproved_CheckedChanged" 
AutoPostBack="True"
Enabled='<%# !Convert.ToBoolean(Eval("Approved")) %>' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:11:09.147

想通了，但只有在修复了 IE 错误之后……感谢[Jack Moore](https://stackoverflow.com/users/409473/jack)。

[颜色框和内联 html 未在 IE8 中显示](https://stackoverflow.com/questions/13808652/colorbox-and-inline-html-not-showing-in-ie8)

# java - 从文本文件中的字节偏移量确定行号

> ID：13609535
> 
> 赞同：0
> 
> 时间：2012-11-28T16:15:44.580
> 
> 标签：java, io

我目前有一个场景，我知道文本文件的字节偏移量。我想知道无论如何我可以从字节偏移量中确定行号。文本文件中的记录不是固定长度的，在这种情况下，我会将偏移量除以宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:18:55.573

除非所有行都是统一长度，否则您无法从字节偏移量确定行号。但是，您可以扫描换行符并跟踪它们以计算文件中的偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:18:03.713

你可以做类似的事情；

```
String fullTextFile = loadTextFile();
String section = fullTextFile.substring(0, byteOffset);
String reduced = section.replaceAll("[^\n]*","");
int lineNumber = reduced.length(); 
```

我不完全确定该正则表达式的合法性，但它不应该需要太多的调整。

# actionscript-3 - 在 Flash Pro CS5.5 中使用 Flex 4.6 SDK？

> ID：13609536
> 
> 赞同：0
> 
> 时间：2012-11-28T16:15:46.880
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder, flash-cs5

我有一个 Flash Builder 项目的代码库，它从 Flash Professional 项目 swf 加载资产，因此，它们共享相同的代码库进行编译（因此 FB 项目中的代码可以链接到 Flash Pro 中的 MC）

问题是，我使用的代码中有 Flex 4.6 代码（即内置 JSON 支持）。这在 FB 中构建得很好，但是当我更新 Flash Pro swf 时，我得到一个错误，可能是因为我有 Flex 4.6 代码并且 Flash pro CS5.5 没有使用 Flex 4.6 进行编译。Flash pro 中有没有办法将 Flex 4.6 定位为构建器？

谢谢！-史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:13:52.477

仅供您记录......在 11.x 之前，您必须包含 as3corelib.swc 以获取其 JSON 功能：[https ://github.com/mikechambers/as3corelib](https://github.com/mikechambers/as3corelib)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:46:53.260

实际上为您找到了一个解决方案 [将播放器 11 支持添加到 cs5](http://blogs.adobe.com/rgalvan/2011/11/adding-fp11-support-to-flash-pro-cs5-and-cs5-5.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T20:27:43.007

Flex SDK 4.6 在 /sdk/frameworks/projects 目录下附带了完整的源代码，由于源代码被分解为“项目”，您需要将项目合并在一起以将整个框架源代码放在一个逻辑源代码树下。

创建此源代码树后，您可以将其添加到 Flash 的编译路径中以获得 Flex SDK 的好处。但是，如果您需要 Flex 仅仅是为了支持 JSON，那么 Flash Player 11 的目标将是一个更好的解决方案。

# android - 有没有办法记录我设备上安装的任何应用程序的启动次数？

> ID：13609538
> 
> 赞同：0
> 
> 时间：2012-11-28T16:16:14.653
> 
> 标签：android, iphone, ios

我想使用此信息来确定我设备上最常用的应用程序。

我还想知道是否有办法确定我在设备上使用每个应用程序所花费的时间。

似乎只能在“越狱”设备上访问此信息。我希望情况并非如此。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:22:19.223

我认为您不能对所有应用程序都这样做。

相反，如果您想知道您的应用程序已启动多少次，请尝试以下操作：

在您的应用程序（或启动的第一个活动）的初始屏幕上，尝试增加一个数字，并将其保存在`SharedPreferences`：

```
SharedPreferences prefs = getSharedPreferences("prefs",Context.MODE_PRIVATE);
int counter = prefs.getInt("counter", -1);

if(counter == -1 ) {
   //first launch of the app, init the counter 
   counter = 1;
}
else {
  // increment the counter
  counter++;
}

// update the value of the counter 
SharedPreferences.Editor editor = prefs.edit();
editor.putInt("counter",counter);
editor.commit();

//then you can do what you want with your counter , send it to your back end via web service...etc 
```

# java - NullPointException 字符串变量错误（初学者）

> ID：13609544
> 
> 赞同：0
> 
> 时间：2012-11-28T16:16:43.417
> 
> 标签：java, variables, processing

我试图模仿这里看到的类似代码[http://www.openprocessing.org/sketch/7050](http://www.openprocessing.org/sketch/7050)但我似乎有点混淆了代码。我试图获得字母的效果，基本上是在画出图片的分色图像。但是我得到了一个 NullPointException 并假设与我如何初始化字符串变量有关，但我似乎找不到我做错了什么。

错误

```
Exception in thread "Animation Thread" java.lang.NullPointerException
    at processing.opengl.PGL.getString(PGL.java:1029)
    at processing.opengl.PGraphicsOpenGL.getGLParameters(PGraphicsOpenGL.java:6076)
    at processing.opengl.PGraphicsOpenGL.beginDraw(PGraphicsOpenGL.java:1547)
    at MLKpractice.letterfit(MLKpractice.java:147)
    at MLKpractice.draw(MLKpractice.java:98)
    at processing.core.PApplet.handleDraw(PApplet.java:2120)
    at processing.core.PGraphicsJava2D.requestDraw(PGraphicsJava2D.java:197)
    at processing.core.PApplet.run(PApplet.java:1998)
    at java.lang.Thread.run(Thread.java:680) 
```

程序说错误在第 127 行

```
lettersquare.beginDraw(); 
```

但我相信错误在上面

```
PFont font;
String fontpath = "ArialMT-200.vlw";
int fontstart = 300;
int fontend = 8;
float fontsize = fontstart;
float fontsizedecrease = 0.97;
PImage bg;
PImage australia;
PImage austria;
String country1 = "australia.jpg";
String country2 = "austria.jpg";
String letters = "Australia";
char[] chars = new char[52];
int nchars = 0;
int iterations = 500;
int c = 0;
PGraphics letter,lettersquare,drawing;

void setup(){
  //initialize the sketch
  size(900,600);
  //background(255);
  //initialize the font
  //font = loadFont(fontpath);
  ///*
  for(int i=0;i<letters.length();i++){
    boolean found = false;
    char lc = letters.charAt(i);
    for(int j=0;j<nchars;j++){
      if(chars[j]==lc){
        found = true;
        break;
      }
    }
    if(!found) chars[nchars++] = lc;
  }
  chars = (char[]) subset(chars,0,nchars);
  font = createFont("Arial",200,true,chars);
  //*/
  textAlign(CENTER,CENTER);
  //load the image that will be filled with letters
  australia = loadImage(country1);
   austria = loadImage(country2);

  bg = loadImage("background.jpg");
  //posterize the image
  australia.filter(THRESHOLD,0.4);
  australia.filter(BLUR,3);
  australia.filter(THRESHOLD,0.6);
  //initialize the drawing buffers
  letter = createGraphics((int)fontsize,(int)fontsize,JAVA2D);
  lettersquare = createGraphics((int)fontsize,(int)fontsize,P2D);
  drawing = createGraphics(width,height,JAVA2D);
  drawing.beginDraw();
  drawing.background(255);
  // THIS STUPID THING NEEDS TO GO HERE!!!!
  drawing.image(bg,0,0);
  drawing.endDraw();
}

void draw(){

  if(floor(fontsize)>fontend&&c<letters.length()-1){
    if(!letterfit()){
      fontsize *= fontsizedecrease;
    }else{
      c++;
      if(c==11){
        fontsize *= 0.75;
      }
    }

    tint(255);
    image(drawing,0,0);

  if (keyCode == LEFT) {
    image(austria,0,0);
    }
   // if (keyCode == RIGHT) {
     // frog1.frogx = frog1.frogx + 1;
   // }

    if(mousePressed){
      tint(255,100);
      image(australia,0,0);
    }
  }else{
    tint(255);
    image(drawing,0,0);
    println(c+" "+letters.length());
    /*
    save("mlk-"+hour()+""+minute()+""+second()+".tif");
    exit();
    */
    noLoop();
  }
} 
boolean letterfit(){
  letter.beginDraw();
  letter.background(255,0);
  letter.fill(0);
  letter.textAlign(CENTER,CENTER);
  letter.translate(fontsize/2,fontsize/2);
  letter.rotate(random(TWO_PI));
  letter.scale(fontsize/fontstart);
  letter.textFont(font);
  letter.smooth();
  letter.text(letters.charAt(c),0,0);
  letter.endDraw();
  lettersquare.beginDraw(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:50:00.530

您很可能遇到了[问题 1217](http://code.google.com/p/processing/issues/detail?id=1217)，如果主渲染器是 Java2D，它会阻止您使用 OpenGL PGraphics 渲染器。

该链接有一个解决方法，基本上涉及将主渲染器更改为 OpenGL。

更新版本的 PGraphics 应该会给你一个更详细的例外。

# java - 相交圆重叠

> ID：13609549
> 
> 赞同：2
> 
> 时间：2012-11-28T16:16:58.233
> 
> 标签：java, processing

我正在尝试做一个理论上简单的效果。例如，我有两个在窗口周围弹跳的白色圆圈。当它们相交时，我希望相交的圆圈部分为黑色，而其余圆圈保持白色，如下所示：

![两个相交的圆盘，相交处为黑色，其他均为白色](../Images/9a77cb480d48c16da72a160960920e3b.png)

有没有办法做到这一点？

到目前为止，我有这个：

```
for(int i = 0; i < balls.length; i++)
{
    balls[i].move();
    for(int j = 0; j < balls.length; j++)
    {
        if(i != j && balls[i].intersect(balls[j]) && !changed[i] && !changed[j])
        {
            balls[j].swapColor();
            changed[j] = true;
        }
        else
            changed[j] = false;
    }
    balls[i].display();
} 
```

但是当它们相交时它会将圆圈*完全*变为黑色，而我只希望交叉点本身发生变化。

* * *

编辑：我尝试将 blend() 与两个 200x200 png、[洋红色](https://i.imgur.com/iBTPx.png)和[红色](https://i.imgur.com/vLmD6.png)一起使用，以更好地查看混合工作。但是， blend() 参数似乎无助于正确定位圆圈。

```
void setup() {
  size(300, 300);
  background(255);
}

void draw() {  
  PImage img = loadImage("circle.png");
  PImage img2 = loadImage("circle2.png");

  img.blend(img2,0,0,200,200,10,10,200,200,DIFFERENCE);
  image(img,0,0);
  image(img2,50,50);
} 
```

给了我这个：

![两个圆圈在处理中重叠](../Images/61bdc1f935fb83ef7a7190e6a7f55902.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:33:54.963

在这里试一试。这是使用两个 PGraphics 而不是 PImages 的混合方法。一个简单的例子。**编辑：**当它们重叠时，基本椭圆的上角有一个奇怪的工件，现在不知道为什么......我正在寻找，如果我找到我会在这里发布。EDIT2：它似乎与抗锯齿有关，如果你跳过 smooth() 工件就消失了......

```
PGraphics c;
PGraphics d;
void setup() {
  size(300, 300);
  background(255);
  c = createGraphics(width, height, JAVA2D);
  d = createGraphics(width, height, JAVA2D);
  c.beginDraw();
  c.smooth();
  c.endDraw();
  d.beginDraw();
  d.smooth();
  d.endDraw();
}

void draw() {  
  background(255);
  c.beginDraw();
  c.background(0, 0);
  c.fill(255);
  c.stroke(0);
  c.ellipse(mouseX, mouseY, 30, 30);
  c.endDraw();

  d.beginDraw();
  d.background(0, 0);
  d.fill(255);
  d.stroke(0);
  d.ellipse(width/2, height/2, 30, 30);
  d.endDraw();
  d.blend(c, 0, 0, width, height, 0, 0, width, height, DIFFERENCE);
  image(d, 0, 0);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:33:33.853

不幸的是，我现在无法提供可运行的示例，但是对于视觉效果，您可以使用[blend()](http://processing.org/reference/PImage_blend_.html)函数（可能在`DIFFERENCE`模式上）。

[您可以使用createGraphics](http://processing.org/reference/createGraphics_.html) btw将椭圆绘制到 PImage 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T21:07:27.397

I thought of an amusing way to do this. Create a new sketch with the following code and move your mouse around within the canvas.

```
void setup() {
  size(600,600);
}

void draw() {
  background(0);

  int c1x = width/2;
  int c1y = height/2;
  int c2x = mouseX;
  int c2y = mouseY;

  int d = 100;

  boolean intersect = false;
  if(dist(c1x, c1y, c2x, c2y) < d) intersect = true;

  fill(255);
  stroke(0);
  ellipse(c1x, c1y, d, d);
  ellipse(c2x, c2y, d, d);
  noFill();
  ellipse(c1x, c1y, d, d);

  stroke(0, 0, 255);
  line(c1x, c1y, c2x, c2y);

  stroke(255, 0, 0);
  if(intersect) stroke(0, 255, 0);
  rectMode(CORNERS);
  int mx = (c1x+c2x)/2;
  int my = (c1y+c2y)/2;
  int r = d/2;
  rect(mx-r, my-r, mx+r, my+r); 

  if(intersect) {
    for(int j = my-r; j <= my+r; j++) {
      for(int i = mx-r; i <= mx+r; i++) {
        if(dist(i, j, c1x, c1y) <= r && dist(i, j, c2x, c2y) <= r) {
          stroke(0);
          point(i, j);
        } 
      }
    }   
  }
} 
```

This is a dirty mock-up showing the concept. I know the center points of the two circles. I imagine a square with a width and height equal to the diameter of the circles, and I center that square at the midpoint between the two circles. When the circles collide, I check each pixel within that square, and if the pixel is within both circles, I draw a point there.

I simplified by having the circles with identical diameter, but it's trivial to modify it for variable diameters.

![Screenshot of circle intersection fill](../Images/b8857f54da724bcf1afed531b1f4e2e6.png)

Obviously you don't have to draw the green square and blue line, those are there just for reference.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T09:30:46.647

这将是带有白色交叉点和背景的深色椭圆，并且快速且肮脏但有效。

白色背景：

```
background(255); 
```

调用这样的东西：

```
 blendMode(SUBTRACT);
  fill(0);
  ball1.display();
  fill(255);
  ball2.display(); 
```

如果您想了解其背后的数学原理，请查看[此链接](http://mathworld.wolfram.com/Circle-CircleIntersection.html)。我认为您也可以使用像toxiclibs.geom 这样的库来做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T16:20:10.673

如果它们的中心之间的距离小于它们的半径之和，它们就会相交

# android - Android：来自列表项点击的意图不起作用

> ID：13609550
> 
> 赞同：0
> 
> 时间：2012-11-28T16:16:58.060
> 
> 标签：android, listview, android-intent, onclicklistener

我有这个代码：

```
 // elementi
        setContentView(R.layout.index);
        final ListView lista_menu=(ListView) findViewById(R.id.list_menu);
    // lista
        String[] from=new String[]{"immagine","testo"};
        int[] to=new int[]{R.id.immagine_menu,R.id.testo_elemento_menu};
        List<HashMap<String,Object>> riempimento=new ArrayList<HashMap<String,Object>>();
        HashMap<String,Object> map=new HashMap<String,Object>();
        map.put("immagine",R.drawable.icon_converter);
        map.put("testo","Convertitore");
        riempimento.add(map);
        map=new HashMap<String,Object>();
        map.put("immagine",R.drawable.icon_noise);
        map.put("testo","Noise Analyzer");
        riempimento.add(map);
        map=new HashMap<String,Object>();
        map.put("immagine",R.drawable.icon_tools);
        map.put("testo","Tempco Tools");
        riempimento.add(map);
        map=new HashMap<String,Object>();
        map.put("immagine",R.drawable.icon_qrcode);
        map.put("testo","Lettore QR Code");
        riempimento.add(map);
        map=new HashMap<String,Object>();
        map.put("immagine",R.drawable.icon_rss);
        map.put("testo","RSS Reader");
        riempimento.add(map);
        SimpleAdapter adapter = new SimpleAdapter(this,riempimento,R.layout.lista,from,to); 
        lista_menu.setAdapter(adapter);
    // intents
        lista_menu.setOnItemClickListener(new OnItemClickListener(){ 
            @Override
            public void onItemClick(AdapterView<?> parent, View view,int position, long _id){
                switch(position){
                    case 0:
                        break;
                    case 1:
                        break;
                    case 2:
                        break;
                    case 3:
                        break;
                    case 4:
                        Intent intent_rss=new Intent(getParent(),RSS.class);
                        startActivity(intent_rss);
                        break;
                    default:
                        break;
                }
            }
        }); 
```

但是当我点击元素 4 时，应用程序崩溃了......我不知道为什么 :-| 我认为里面没有奇怪的想法......只是一个正常的意图。我需要为每个项目抛出一个意图，我现在正在尝试使用第四个（就位）元素。

logcat（总是不全面）：

```
11-28 17:13:24.731: E/AndroidRuntime(11855): FATAL EXCEPTION: main
11-28 17:13:24.731: E/AndroidRuntime(11855): java.lang.NullPointerException
11-28 17:13:24.731: E/AndroidRuntime(11855):    at android.content.ComponentName.<init>(ComponentName.java:75)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at android.content.Intent.<init>(Intent.java:2702)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at it.mi.action.itempco.Index$3.onItemClick(Index.java:80)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at android.widget.ListView.performItemClick(ListView.java:3513)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at android.os.Handler.handleCallback(Handler.java:587)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at android.os.Looper.loop(Looper.java:123)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at android.app.ActivityThread.main(ActivityThread.java:3683)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at java.lang.reflect.Method.invokeNative(Native Method)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at java.lang.reflect.Method.invoke(Method.java:507)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-28 17:13:24.731: E/AndroidRuntime(11855):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:20:31.747

```
Intent intent_rss = new Intent(YourActivityName.this, RSS.class);
startActivity(intent_rss); 
```

# ruby-on-rails - 当我在heroku上上传ruby 193应用程序时路由器端口5000出现问题

> ID：13609552
> 
> 赞同：0
> 
> 时间：2012-11-28T16:17:04.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, migration, pik

我已经安装了 ruby​​ 193 应用程序，并且我已经安装了 Heroku toolbel 来加载我的应用程序，它会自动安装 ruby​​ 192。我也使用这两个版本。

```
C:\Prove>pik list
  187: ruby 1.8.7 (2012-02-08 patchlevel 358) [i386-mingw32]
* 192: ruby 1.9.2p290 (2011-07-09) [i386-mingw32]
  193: ruby 1.9.3p194 (2012-04-20) [i386-mingw32] 
```

在指定我放入我的 gemfile[的 ruby​​ 版本之后](https://devcenter.heroku.com/articles/ruby-versions)

```
ruby "1.9.3" 
```

然后，[在开始使用 heroku](https://devcenter.heroku.com/articles/rails3)之后，我创建了一个 git 存储库，并且在控制台中遇到了这些错误：

```
C:\Prove>heroku create surveymed
Creating surveymed... done, stack is cedar
http://surveymed.herokuapp.com/ | git@heroku.com:surveymed.git

C:\Prove>git push heroku master
Counting objects: 163, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (142/142), done.
Writing objects: 100% (163/163), 68.60 KiB, done.
Total 163 (delta 28), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Using Ruby version: ruby-1.9.3
-----> Installing dependencies using Bundler version 1.2.2
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/
   Fetching gem metadata from https://rubygems.org/.

   Error Bundler::HTTPError during request to dependency API

   Fetching full source index from https://rubygems.org/
   Installing rake (10.0.2)
   Installing i18n (0.6.1)
   Installing multi_json (1.3.7)
   Installing activesupport (3.2.8)
   Installing builder (3.0.4)
   Installing activemodel (3.2.8)
   Installing erubis (2.7.0)
   Installing journey (1.0.4)
   Installing rack (1.4.1)
   Installing rack-cache (1.2)
   Installing rack-test (0.6.2)
   Installing hike (1.2.1)
   Installing tilt (1.3.3)
   Installing sprockets (2.1.3)
   Installing actionpack (3.2.8)
   Installing mime-types (1.19)
   Installing polyglot (0.3.3)
   Installing treetop (1.4.12)
   Installing mail (2.4.4)
   Installing actionmailer (3.2.8)
   Installing arel (3.0.2)
   Installing tzinfo (0.3.35)
   Installing activerecord (3.2.8)
   Installing activeresource (3.2.8)
   Using bundler (1.2.2)
   Installing coffee-script-source (1.4.0)
   Installing execjs (1.4.0)
   Installing coffee-script (2.2.0)
   Installing rack-ssl (1.3.2)
   Installing json (1.7.5) with native extensions
   Installing rdoc (3.12)
   Installing thor (0.16.0)
   Installing railties (3.2.8)
   Installing coffee-rails (3.2.2)
   Installing comma (3.0.4)
   Installing jquery-rails (2.1.4)
   Installing pg (0.14.1) with native extensions
   Installing rails (3.2.8)
   Installing sass (3.2.3)
   Installing sass-rails (3.2.5)
   Installing uglifier (1.3.0)
   Your bundle is complete! It was installed into ./vendor/bundle
   Post-install message from rdoc:
   Depending on your version of ruby, you may need to install ruby rdoc/ri data:
   <= 1.8.6 : unsupported
   = 1.8.7 : gem install rdoc-data; rdoc-data --install
   = 1.9.1 : gem install rdoc-data; rdoc-data --install
   >= 1.9.2 : nothing to do! Yay!

   Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
   Running: rake assets:precompile
   Asset precompilation completed (11.50s)
-----> Rails plugin injection
   Injecting rails_log_stdout
       Injecting rails3_serve_static_assets
-----> Discovering process types
   Procfile declares types      -> (none)
   Default types for Ruby/Rails -> console, rake, web, worker
-----> Compiled slug size: 19.4MB
-----> Launching... done, v6
   http://surveymed.herokuapp.com deployed to Heroku

To git@heroku.com:surveymed.git
 * [new branch]      master -> master

C:\Prove>heroku run rake db:migrate
Running rake db:migrate attached to terminal... C:/Program Files (x86)/Heroku/lib/heroku/client/rendezvous.rb:33:in `initialize': Impossibile stabilire la connessione. Risposta non corretta della parte connessa dopo l'intervallo di tempo oppure mancata risposta dall'host collegato. - connect(2) (Errno::ETIMEDOUT)
    from C:/Program Files (x86)/Heroku/lib/heroku/client/rendezvous.rb:33:in `open'
    from C:/Program Files (x86)/Heroku/lib/heroku/client/rendezvous.rb:33:in `block in start'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/timeout.rb:58:in `timeout'
    from C:/Program Files (x86)/Heroku/lib/heroku/client/rendezvous.rb:27:in `start'
    from C:/Program Files (x86)/Heroku/lib/heroku/command/run.rb:35:in `index'
    from C:/Program Files (x86)/Heroku/lib/heroku/command.rb:148:in `run'
    from C:/Program Files (x86)/Heroku/lib/heroku/cli.rb:9:in `start'
    from C:/Program Files (x86)/Heroku/bin/heroku:28:in `<main>'

C:\Prove>bundle exec heroku run rake db:migrate
C:/Program Files (x86)/ruby-1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find bundler (>= 0) amongst [activemodel-3.0.5, activesupport-3.0.5, builder-2.1.2, i18n-0.6.0, mime-types-1.19, minitest-1.6.0,rack-1.4.1, rake-0.8.7, rdoc-2.5.8, rest-client-1.6.7, sequel-3.20.0, sinatra-1.0, taps-0.3.24] (Gem::LoadError)
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/site_ruby/1.9.1/rubygems.rb:1210:in `gem'
    from C:/Ruby193/bin/bundle:22:in `<main>'

C:\Prove>heroku config
DATABASE_URL              => postgres://wwubhcqjymyjxu:9UNe7N04FEaL-7_-34-9uYL5u
G@ec2-23-21-190-247.compute-1.amazonaws.com:5432/d651rjclu5sbro
GEM_PATH                  => vendor/bundle/ruby/1.9.1
HEROKU_POSTGRESQL_RED_URL => postgres://wwubhcqjymyjxu:9UNe7N04FEaL-7_-34-9uYL5u
G@ec2-23-21-190-247.compute-1.amazonaws.com:5432/d651rjclu5sbro
LANG                      => en_US.UTF-8
PATH                      => bin:vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/us
r/bin:/bin
RACK_ENV                  => production
RAILS_ENV                 => production

C:\Prove> 
```

错误是什么，我快疯了:(

我认为错误在这里：

```
C:\Prove>heroku run "ruby -v"
Running ruby -v attached to terminal...
The 'heroku' gem has been deprecated and replaced with the Heroku Toolbelt, download and install from https://toolbelt.heroku.com.

C:/Program Files (x86)/Heroku/lib/heroku/client/rendezvous.rb:33:in `initialize': Unable to establish connection. Connected party did not properly respond after a period of time or lack of response from the host connected. - connect(2) (Errno::ETIMEDOUT)
    from C:/Program Files (x86)/Heroku/lib/heroku/client/rendezvous.rb:33:in `open'
    from C:/Program Files (x86)/Heroku/lib/heroku/client/rendezvous.rb:33:in `block in start'
    from C:/Program Files (x86)/ruby-1.9.3/lib/ruby/1.9.1/timeout.rb:58:in `timeout'
    from C:/Program Files (x86)/Heroku/lib/heroku/client/rendezvous.rb:27:in `start'
    from C:/Program Files (x86)/Heroku/lib/heroku/command/run.rb:35:in `index'
    from C:/Program Files (x86)/Heroku/lib/heroku/command.rb:148:in `run'
    from C:/Program Files (x86)/Heroku/lib/heroku/cli.rb:9:in `start'
    from C:/Program Files (x86)/Heroku/bin/heroku:28:in `<main>' 
```

# r - 通过从不同框架创建的正则表达式选择列

> ID：13609561
> 
> 赞同：0
> 
> 时间：2012-11-28T16:17:22.607
> 
> 标签：r, regex

我想通过正则表达式从数据框中选择一些列。问题是，我想使用存储在另一个框架中的成对的单词来做到这一点。更具体地说，mycounts 数据框的列名：

```
aa1 aa2 aa3 bb1 bb2 bb3 ff1 ff2 ff3 cc1 cc2 cc3 dd1 dd2 dd3 
```

我想提取以分离帧以下对（mypairs）：

```
aa bb
aa cc
bb cc
cc dd
dd ff 
```

其中 aa 和 bb 表示要从 mycounts 中选择的列的起始模式。

我可以手动放置所需的模式，如下所示：

```
tmpdf <- subset(mycounts.test, select=(names(mycounts)[grep('^aa|^bb',names(mycounts))])) 
```

用 tmpdf 做一些事情 select next pair from mypairs extract columns from mycounts 再次用 tmpdf 等做同样的事情。

但最好总是让 mypairs 强制执行输出列的模式。带“|” 在 grep 而不是得到 dd 然后 ff 列我有它 ff 然后 dd。所以我在做：

```
tmpdf1 <- subset(mycounts.test, select=(names(mycounts)[grep('^dd',names(mycounts))]))
tmpdf2 <- subset(mycounts.test, select=(names(mycounts)[grep('^ff',names(mycounts))]))
tmpdf <- cbind(tmpdf1, tmpdf2)) 
```

最重要的是，从 mypairs 的第一列简单地构建正则表达式是行不通的：

```
for (i in 1:nrow(mypairs)) { foo <- paste('^', mypairs[i,1], sep=""); print(grep(foo, mycounts)) } 
```

这是我卡住的地方。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:27:47.590

您没有`names`在最后一个命令中使用该函数：

代替

```
print(grep(foo, mycounts)) 
```

和

```
print(grep(foo, names(mycounts))) 
```

# ajax - 进一步连续按下命令按钮两次

> ID：13609564
> 
> 赞同：0
> 
> 时间：2012-11-28T16:17:37.553
> 
> 标签：ajax, jsf, jsf-2, primefaces

引用这个问题是因为问题与我的相同，但我认为该解决方案不适用于我的情况。

[连续按两次按钮](https://stackoverflow.com/questions/10829690/continuation-of-pressing-button-twice)

我有一个包含一系列需要填写和提交的表单的工作流，我想在用户单击“下一步”按钮后显示一个模式叠加层。为了显示这个覆盖，我需要让命令按钮使用 ajax。这会导致链接问题中描述的不良行为。

链接问题的解决方案似乎是“不要使用 Ajax 进行导航”，但我认为就我而言，我可能必须这样做才能显示这个等待对话。有没有其他方法可以保证下一页的视图状态会正确更新，这样当我继续导航时，我不需要点击两次按钮？

我正在使用 Primefaces 3.3.1。

```
<p:commandButton id="nextCommand" value="Next"
    action="#{backingBean.processInputAndDetermineOutcome}"
    onclick="waiter.show();" oncomplete="waiter.hide();">
    <f:param name="validate" value="true" />
</p:commandButton> 
```

“验证”参数是我在自定义 BeanValidator 中使用的标志，以便我的“返回”按钮可以提交表单并更新模型，而无需处理任何验证。我认为这不会对这个问题产生任何影响，但我想我应该提到这个命令按钮中涉及的其他部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:49:11.170

您最好的选择是使用重定向导航。

```
public String processInputAndDetermineOutcome() {
    // ...

    return outcome + "?faces-redirect=true";
} 
```

否则，如果您实际上只在 IE 浏览器中观察问题，而不是在其他更理智的浏览器中观察问题，那么您可能想尝试此处建议的 PrimeFaces 特定 JavaScript 修复：[JSF Language switcher and ajax update](https://stackoverflow.com/questions/13552531/jsf-language-switcher-and-ajax-update/13572683#13572683)。

或者，如果您实际上是在 中`<f:ajax>`而不是在 中观察问题`<p:ajax>`，请尝试此处建议的特定于 JSF 的 JavaScript 修复：[h:commandButton/h:commandLink 在第一次单击时不起作用，仅在第二次单击时起作用](https://stackoverflow.com/questions/11408130/jsf-commandbutton-works-on-second-click/11412138#11412138)。

# android - 如何将登录活动和谷歌地图活动放在一个应用程序中

> ID：13609568
> 
> 赞同：-3
> 
> 时间：2012-11-28T16:17:48.277
> 
> 标签：android, android-emulator, google-api

我正在尝试使用谷歌地图开发应用程序..没关系..我通过找到的很好的例子了解了基础知识..但问题是..我想在查看地图之前添加登录功能..这可能吗..如果可能的话，请给我一个想法..

我的要求是第一个活动登录 - 登录后第二个活动是使用 GPS 找到当前位置。

我如何将这些活动放在一个应用程序中以及如何编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:49:49.387

很简单，您只需要在 AndroidManifest 文件中声明您的两个活动，如下所示：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".LoginActivity"
        android:label="@string/app_name" android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".MapViewActivity" android:screenOrientation="portrait" android:theme="@android:style/Theme.NoTitleBar"/>

    <uses-library android:name="com.google.android.maps" />
</application> 
```

启动应用程序时将启动的活动是 LoginActivity。您必须在其中处理所有登录逻辑。用户登录后，您只需使用以下代码启动新活动：

```
Intent i = new Intent(LoginActivity.this, MapViewActivity.class);
startActivity(i); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:46:21.467

没有规则或命令首先查看地图您可以使用第一个活动，您可以要求用户登录，然后如果登录与数据（db，xml，文件）匹配，您可以调用第二个活动加入地图 。如果你愿意，我可以给你做一个例子，但不是现在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:46:37.580

在您的 Android 清单文件中设置这两个活动。作为开始活动设置您的登录活动，您可以在其中实现登录代码。然后如果登录成功打开地图活动。检查这个[http://www.javasrilankansupport.com/2012/06/send-data-to-another-activity-simple.html](http://www.javasrilankansupport.com/2012/06/send-data-to-another-activity-simple.html)

和这个

[安卓应用登录](https://stackoverflow.com/questions/4202165/android-application-login)

# wcf - 当我不想*稍后*跟踪实体时，如何通过 WCF 服务发送 POCO 实体？

> ID：13609573
> 
> 赞同：0
> 
> 时间：2012-11-28T16:18:02.043
> 
> 标签：wcf, entity-framework, poco, proxy-classes

我有一个 ASP.NET MVC 4 项目，其中控制器调用 WCF 服务层，调用业务层，使用 EF 5.0 实体的存储库。然后将结果作为 POCO 实体返回给 Controller。

当 WCF 服务直接作为库引用时它工作正常，但我知道它不能作为服务引用，因为它们需要被序列化，并且启用 ProxyCreation 这是不可能的。

我不想创建 DTO，因为我使用生成的 POCO 实体，这就是我认为它们存在的原因。我只想在 POCO 实体到达服务层之前跟踪更改。

很多人都在谈论使用 DTO，即使它们与 POCO 相同，如果我这样做，我可以创建具有不同名称的自动生成的复制类作为“代理禁用 POCO 作为 DTO”，这会有点奇怪.

我可以杀死 POCO 的代理类，以某种方式从服务层返回时可以序列化对象吗？

另外我不知道这个想法是否是一个好习惯。但是将“干净”的实体发送到我的控制器会很棒，准备好映射到 ViewModel。我也在寻找性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:52:46.080

使用[ProxyDataContractResolver](http://msdn.microsoft.com/en-us/library/vstudio/ee705457%28v=vs.100%29.aspx)解决了这个问题。我们也必须使用`[Serializable] and [DataContract(IsReference=true)]`。通过这种组合，可以启用 ProxyCreation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T05:24:08.607

我们处理这个问题的方法是执行以下操作：

1.  自定义生成 POCO 类的 T4，以便生成用 `[Serializable()] and [DataContract(IsReference=true)]`属性修饰的类。
2.  前端（视图）和后端（wcf 服务/业务层）都引用 POCO 生成的类，因为由于 IsReference=true，您不会使用代理。

基本上就是这样。

有了这个，您不必创建 DTO，只需在后端和前端使用 POCO 类。

但请记住，使用 IsReference=true 句柄的 WCF 不喜欢冗余对象（因此这将是某些具有导航属性的 POCO 类的问题）。

# php - 用 javascript 填充选择框

> ID：13609575
> 
> 赞同：-1
> 
> 时间：2012-11-28T16:18:07.240
> 
> 标签：php, javascript

我目前有一个自动填充选择框，具体取决于您在第一个选择框中选择的选项。这一切都很好并且可以完成工作。

我想要实现的是，当提交表单时，它会保留所选的值。我可以让第一个初始选择框工作，但是当涉及到第二个选择框（自动加载的那个）时，我似乎无法让它工作。

第一个选择框 id 是带有静态信息的 ctlJob，第二个选择框的 id 是 ctlPerson。

这是我的 HTML：

```
 <form id="homesearch" action="view.php" method="get">
  <label for="ctlJob"></label>
  <select name="id" id="ctlJob" style="clear:both; float:left;">

<option value="0">Please Select...</option>    

<option <?php if ($_GET['id'] == '1') { ?>selected="true" <?php }; ?>value="1">Regional General Manager</option>
<option <?php if ($_GET['id'] == '2') { ?>selected="true" <?php }; ?>value="2">General Manager</option>
<option <?php if ($_GET['id'] == '3') { ?>selected="true" <?php }; ?>value="3">Deputy General Manager</option>
<option <?php if ($_GET['id'] == '4') { ?>selected="true" <?php }; ?>value="4">Operations Manager</option>
<option <?php if ($_GET['id'] == '5') { ?>selected="true" <?php }; ?>value="5">Shift Manager</option>
<option <?php if ($_GET['id'] == '6') { ?>selected="true" <?php }; ?>value="6">First Line Manager</option>
<option <?php if ($_GET['id'] == '7') { ?>selected="true" <?php }; ?>value="7">Stock Controller</option>

  <noscript>
    <input type="submit" name="action" value="Load Individuals" />
  </noscript>

  <select name="person_id" id="ctlPerson" style="clear:both; float:left;">

  </select>
<input id="submit" type="submit" name="action" value="search" style="margin-top:40px;" />
</form> 
```

这是我的js：

```
 <script type="text/javascript">
  document.getElementById('id').value = "<?php echo $_GET['id'];?>";
  document.getElementById('person_id').value = "<?php echo $_GET['person_id'];?>";
</script> 
```

关于如何让第二个选择框在表单提交给自身后保持填充选择的选项的任何想法？

谢谢，丹

对不起，我错过了这个 js：

```
 <script type="text/javascript" charset="utf-8">
$(function(){
$("select#ctlJob").change(function(){
    $.getJSON("view.php",{id: $(this).val(), ajax: 'true'}, function(data){
      var $persons = $("#ctlPerson").empty();
      $.each(data, function() {
        $persons.append("<option value=" + this.optionValue + ">" + this.optionDisplay + "</option>");
      });
    })
  });
})
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:19:38.610

无论您使用什么代码来填充它（可能是`change`事件处理程序），只需在页面加载时调用它。我用这种代码做这样的事情：

```
(elem.onsomething = function() {
    // some event-handling code
}).call(elem); 
```

# php - 钝化形式动作

> ID：13609577
> 
> 赞同：-2
> 
> 时间：2012-11-28T16:18:07.693
> 
> 标签：php, javascript, jquery, html, forms

我想钝化表单操作，因为我用 js 提交表单。但是如果有表单动作 js 不起作用并且页面重定向动作 url。我删除了表单标签并将 div 标签与#combination id 一起放置，但它对 js 都不起作用：

```
 $("#combination").submit(function(){
  var url = "www.myurl.com/?view=listen&";

  var i = 0;
  $("input:checked").each(function(){
      url += "tag[" + i + "]" + $(this).val() + "&";
      i++;
  });
  alert(url);
  location.href = url;

}); 
```

html:

```
 <form id="combination" action="" method="get" name="combination" target="_self">
    <?php foreach($top_tags as $top_tag):?>
        <input type="checkbox" name="tag[]" value="<?php echo $top_tag['tag_name'];?>" /><?php echo $top_tag['tag_name'];?><br />
        <?php endforeach;?> 
    <input name="" type="submit">
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:22:15.927

您必须使用“preventDefault”来防止表单的默认行为，然后开始您的 ajax 调用或其他任何操作；）。

```
$("#combination").submit(function(event){
  event.preventDefault();
  var url = "www.myurl.com/?view=listen&";

  var i = 0;
  $("input:checked").each(function(){
      url += "tag[" + i + "]" + $(this).val() + "&";
      i++;
  });
  alert(url);
  location.href = url;

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:26:20.493

您确实无法以这种方式调用处理程序的问题：

[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

> handler(eventObject) 每次触发事件时执行的函数。

基本上发生了什么，而不是提交表单你做了重定向。

想想链：

1.  您使用 jquery 调用表单的提交方法。
2.  虽然为表单触发了事件，但在表单实际提交之前您更改了位置。
3.  这会取消提交，而是将您重定向到任何内容

如果你真的想要这样做，你可以通过两种方式来做：

1.  提交表单后在服务器端进行重定向
2.  据说使用`ajax` [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)提交到处理程序并以任何方式禁用默认操作

    ```
    $("#combination").submit(function(event){
        event.preventDefault();
        // code here
    }); 
    ```

    或者

    ```
     $("#combination").submit(function(event){
        // code here
        return false;
     }); 
    ```

# asp.net-web-api - Web API 中的多态性：单端点可能吗？

> ID：13609579
> 
> 赞同：14
> 
> 时间：2012-11-28T16:18:10.570
> 
> 标签：asp.net-web-api

我意识到 Web API 以 REST 为中心，但我仍然想配置一个可以处理命令/响应场景的控制器方法。到目前为止，我还没有成功......有没有办法让单个 API 端点识别以下类结构？

```
[Serializable]
public abstract class Command{
    public int CommandId{get; set;}
}
[Serializable]
public class RegisterNewPersonCommand:Command{
   public string Name{get; set;}
}
//etc... various Command subclasses. Similar thing for Responses.

//now have a single endpoint to Handle Commands
public class CommandsController : ApiController{
   public Response HandleCommand(Command command){
      //handle Command based on which subclass it is
      //return appropriate Response subclass
   }
} 
```

到目前为止，序列化系统似乎无法处理这种情况，但我希望有人找到一种方法来做到这一点:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T17:35:31.530

为了使多态在 Web API 中起作用，您需要启用类型名称处理，并且数据必须包含类型信息。

如果您在场景中使用 JSON，则`TypeNameHandling`需要打开：`WebApiConfig.cs`

```
config.Formatters.JsonFormatter.SerializerSettings.TypeNameHandling = 
    Newtonsoft.Json.TypeNameHandling.All; 
```

然后，您发送到您的`HandleCommand(...)`操作的内容正文必须包含类型信息：

```
{"$type":"MvcApplication.Models.RegisterNewPersonCommand, MvcApplication", ... } 
```

对于 XML，您需要使用 DataContract 的 KnownType...

顺便说一句，您使用有什么具体原因`[Serializable]`（因为 POCO 类型和`[DataContract]`类型也受支持......）？

# awk - 脚本 Linux - awk

> ID：13609584
> 
> 赞同：-2
> 
> 时间：2012-11-28T16:18:19.800
> 
> 标签：awk

我有一个小问题。我需要解释一下，awk 是什么。

我需要编写一个脚本来监视系统上的负载是否过载（CPU、RAM）并写入消息。

我有这个：

```
if 
[[ $(bc <<< "$(top -b -n1 | grep ^Cpu | awk -F': ' '{print $2}' | awk -F% '{print $1}') >= 100") -eq 1 ]] ; then echo '...'; 
fi 
```

这是针对 CPU 的。谁能解释一下这个例子中的 awk 是什么？RAM 的 awk 会怎样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:21:13.800

第一次 awk 调用将在任何行打印第二个标记，其中标记由冒号或空格分隔。

第二个将打印标记由百分号 (%) 分隔的任何行中的第一个标记。

在 Linux 系统上获取已用内存：

```
free | awk '/Mem:/ {print $3;}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T21:55:29.490

这是一个非常脆弱的脚本，基于看起来像旧版本的**top**。不过，检查这段脚本非常容易 - 所以，让我们来看看它。我们从以下内容开始：

```
top -b -n1 
```

**哪个（阅读top**的手册）将**top**置于批处理模式（这意味着我们不想与**top**交互播放，而是希望将输出发送到另一个命令）并输出 1 次迭代。这将使我们得到如下输出：

```
$ top -b -n1
top - 10:48:33 up 1 day, 22:51,  3 users,  load average: 1.21, 1.27, 1.03
Tasks: 262 total,   2 running, 260 sleeping,   0 stopped,   0 zombie
%Cpu(s): 14.5 us,  5.2 sy, 11.3 ni, 67.3 id,  1.6 wa,  0.0 hi,  0.1 si,  0.0 st
KiB Mem:   8124692 total,  6722112 used,  1402580 free,   384188 buffers
KiB Swap:  4143100 total,   430656 used,  3712444 free.  2909664 cached Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
11012 user1     20   0  426412  14436   5740 R  97.1  0.2  19:27.98 dleyna-renderer
 4579 root      20   0  286480 152924  31152 S  13.0  1.9  24:15.49 Xorg
    1 root      20   0  185288   4892   3352 S   0.0  0.1   0:02.52 systemd
    2 root      20   0       0      0      0 S   0.0  0.0   0:00.02 kthreadd
    3 root      20   0       0      0      0 S   0.0  0.0   0:02.77 ksoftirqd/0
    5 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:0H
    7 root      20   0       0      0      0 S   0.0  0.0   1:32.00 rcu_sched 
```

当我们将其通过管道传递给**grep** *^Cpu* ... 时，我们似乎发现了一些破损，表明我们在此答案中使用的**top**版本可能与原始脚本预期的版本不同。看起来意图是在*^%Cpu*上进行匹配。这是更正后的部分：

```
$ top -b -n1 | grep ^%Cpu
%Cpu(s): 14.6 us,  5.2 sy, 11.2 ni, 67.3 id,  1.6 wa,  0.0 hi,  0.1 si,  0.0 st 
```

管道的下一部分是摆脱*'%Cpu(s): '*部分：

```
$ top -b -n1 | grep ^%Cpu | awk -F': ' '{print $2}'
15.1 us,  5.0 sy, 10.8 ni, 67.4 id,  1.6 wa,  0.0 hi,  0.1 si,  0.0 st 
```

然后下一段...... **awk** *-F% '{print $1}' - 对于这个答案的***top**版本再次没有意义，因为脚本正在寻找打印*%*符号左侧的内容 -我们的输出中没有*%*。所以......我们不知道我们需要从这里去哪里。

从脚本的其余部分...管道的结果与 100 进行比较...因此，我假设脚本要解析的**top**版本在第一列中占 CPU 利用率总数的百分比...在我们的**顶级**输出版本中，所有输出的粒度都更加精细。以下是前一个输出的细分：

```
 15.1% -- spent in normal priority user/applications
  5.0% -- spent in system/kernel
 10.8% -- spent in low priority batch or daemon jobs
 67.4% -- spent "idle"
  1.6% -- spent waiting for I/O to complete
  0.0% -- spent in servicing HW interrupts
  0.1% -- spent in servicing software interrupts
  0.0% -- spent stolen by another VM running on the HW
------------------------------------------------------
100.0% -- Total 
```

...因此，在现代 Linux 系统上，**top**提供了更多信息，也许我们需要以不同的方式看待问题。在这种情况下，我们可以将 (idle * 10) 视为度量——就像在 shell 中一样，我们只有整数数学和比较可供我们使用。所以，我们将稍微调整一下脚本......在我们处理它的同时，让我们摆脱管道中的**grep**，因为这也可以通过**awk**轻松完成：

```
$ top -b -n1 | awk -F, '/^%Cpu/ {print $4}'
 67.8 id 
```

现在让我们调整它，让它只给我们乘以 10 的空闲值：

```
$ top -b -n1 | awk -F, '/^%Cpu/ { sub(/id/,"",$4); print $4*10 }'
678 
```

好的，原始脚本的下一部分使用**bc**来查看我们是否被 100% 使用。由于我们现在关注的是空闲而不是利用率，因此我们想要与原始脚本相反。此外，由于输出被缩放为整数，我们不需要**bc的复杂性。**让我们在比较中使用shell？

```
$ if [ $(top -b -n1 | awk -F, '/^%Cpu/ { sub(/id/,"",$4); print $4*10 }') -le 0 ]; then echo '...'; fi 
```

就是这样。

这个答案完全是为了展示代码是如何工作的——如何通过管道解释和解析**top**的输出，如何执行弄清楚一段脚本的作用，以及如何修复脆弱/损坏的脚本。然而，原始脚本不仅脆弱，而且在设计上几乎被破坏了。我们用来检测过载系统的指标更像是在**top**命令输出的第一行中找到的“平均负载”，甚至可以从**uptime**命令的输出中解析出来。

找出过载的一种方法可能是查看负载平均值除以 CPU 的数量。可以通过解析 /proc/cpuinfo 轻松找到 cpu 的数量：

```
$ grep ^processor /proc/cpuinfo | wc -l
4 
```

这是一个示例，其中 15 分钟内的 400% 负载被视为连续负载阈值：

```
load=$(uptime | awk -F, '{ print $(NF) * 1.0 }')
proc=$(grep ^processor /proc/cpuinfo | wc -l)
plod=$(awk "BEGIN { x = 100 * $load / $proc; print int(x) + int(x+x)%2 }")

if [ $plod -gt 400 ]; then echo '...'; fi 
```

注意：*int(x) + int(x+x)%2*是一个舍入函数

对于系统上的可用内存量，我喜欢***schtever***的回答——除了我会使用第 4 列而不是第 3 列并检查内存是否不足。

# ruby-on-rails - FactoryGirl: ActiveRecord::AssociationTypeMismatch: 用户预期，得到#

> ID：13609586
> 
> 赞同：4
> 
> 时间：2012-11-28T16:18:25.777
> 
> 标签：ruby-on-rails, factory-bot

我有一个`User`带有 has_many`:photos`关联的简单模型。当我尝试时，`FactoryGirl.create(:user)`我收到以下错误。任何的想法？

```
# user.rb
has_many :photos, dependent: :destroy

# photo.rb
belongs_to :user

FactoryGirl.define do
  factory :user do
    email 'john@site.com'
    after_build do |user|
      user.photos << FactoryGirl.build(:photo, user: user)
    end
  end

  factory :photo do
    photo File.new(File.join(::Rails.root.to_s, "/factories/images", "avatar1.jpg"), 'rb')
  end 
```

错误输出。

```
ruby-1.9.2-p290 :015 > b = FactoryGirl.create(:user)
ActiveRecord::AssociationTypeMismatch: User(#70183166983920) expected, got #    <Class:0x007fa995612538>(#70183166186140)
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/activerecord-3.2.8/lib/active_record/associations/association.rb:204:in `raise_on_type_mismatch'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/activerecord-3.2.8/lib/active_record/associations/belongs_to_association.rb:6:in `replace'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/activerecord-3.2.8/lib/active_record/associations/singular_association.rb:17:in `writer'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/activerecord-3.2.8/lib/active_record/associations/builder/association.rb:51:in `block in define_writers'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/attribute_assigner.rb:16:in `block (2 levels) in object'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/attribute_assigner.rb:15:in `each'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/attribute_assigner.rb:15:in `block in object'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/attribute_assigner.rb:14:in `tap'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/attribute_assigner.rb:14:in `object'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/evaluation.rb:12:in `object'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/strategy/build.rb:9:in `result'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/factory.rb:42:in `run'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/factory_runner.rb:23:in `block in run'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/factory_runner.rb:22:in `run'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/strategy_syntax_method_registrar.rb:19:in `block in define_singular_strategy_method'
    ... 8 levels...
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/attribute_assigner.rb:15:in `block in object'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/attribute_assigner.rb:14:in `tap'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/attribute_assigner.rb:14:in `object'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/evaluation.rb:12:in `object'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/strategy/create.rb:9:in `result'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/factory.rb:42:in `run'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/factory_runner.rb:23:in `block in run'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/factory_runner.rb:22:in `run'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/factory_girl-4.1.0/lib/factory_girl/strategy_syntax_method_registrar.rb:19:in `block in define_singular_strategy_method'
    from (irb):15
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
    from /Users/user/.rvm/gems/ruby-1.9.2-p290@site/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'ruby-1.9.2-p290 :016 > #<Class:0x007fa995612538> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T08:52:22.510

解决了。我应该使用 newer`after(:create)`而不是 old `after_build`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-29T18:58:58.023

我遇到了类似的问题，这是我用来解决它的代码块：

```
after(:create) do |user|
  user.photos << FactoryGirl.create :photo, user: user
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-28T15:55:28.377

在验证 has_many 关联是否至少有一个关联模型时，我遇到了类似的问题：

```
 class Classroom < ActiveRecord::Base
      # Relationships
      belongs_to :course
      has_many :weekdays

      # Validations
      validate :has_weekdays

      def has_weekdays
        errors.add(:base, 'it is invalid without at least one weekday') if   self.weekdays.blank?
      end

    end 
```

所以，为了使工厂有效，这是我的代码

```
FactoryGirl.define do
  factory :classroom do
    course    

    after (:build) do |classroom|
      classroom.weekdays << FactoryGirl.create(:weekdays, classroom: classroom)
    end 
  end
end 
```

# android - Android后台服务中的用户跟踪和数据发送

> ID：13609590
> 
> 赞同：0
> 
> 时间：2012-11-28T16:18:33.280
> 
> 标签：android, service, thread-safety, threadpool

**细节**

该应用程序启动时会运行一个后台服务。在此服务中，on`onStartCommand()`开始使用读取之间通过的米的参数侦听 GPS 位置。比如说50米。每次读取位置时，都会发生以下操作：

*   读取位置存储在本地数据库中
*   从数据库中检索所有未发送的位置
*   位置被发送到网络服务器
*   如果发送成功，则从数据库中删除位置

现在，每次读取位置时都会发生这种行为。用户可能正在步行，这需要一些时间才能达到 50 米或快速行驶，而可以完成许多读取，并且数据库插入/检索中的事情可能会变得混乱。因此，主要请求之一是按顺序处理所有读取位置，因为它们被读取。类似于：读取位置 1，插入，发送...读取位置 2，插入，发送。

我找不到正确的方法来做到这一点。如您所知，该服务与应用程序在同一个主线程中运行，因此我肯定需要使用线程来保持 UI 运行顺畅。

我正在考虑使用 ExecutorService 和 Executors.newSingleThreadExecutor() 每次读取位置时向其提交新线程。通过这种方式，我确保处理是按顺序完成的，但是......我为每次读取创建新线程，这可能不是一件好事。

对于这种情况，您会建议什么最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:39:41.197

我要做的是删除服务并在每次读取位置时抛出一个[IntentService 。](http://developer.android.com/reference/android/app/IntentService.html)

您可以将[requestLocationUpdates](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28long,%20float,%20android.location.Criteria,%20android.app.PendingIntent%29)与挂起的意图参数一起使用，并将挂起的意图参数设置为触发您的意图服务的意图。

然后在意图服务的*onHandleIntent 中*，您可以处理位置更新。意图由意图服务按顺序处理，并在单独的线程中处理它们（然后到期）。

如果你只需要在后台消费一个镜头事件，intentservice 是一种更紧凑、更合适的解决方案。

# deployment - Symfony2 - 需要创建超级管理员自定义字段

> ID：13609593
> 
> 赞同：4
> 
> 时间：2012-11-28T16:18:37.240
> 
> 标签：deployment, symfony, doctrine, symfony-2.1, fosuserbundle

我正在将一个 SF2.1 项目部署到生产中。
我已经自定义了用户模型，因此需要某些字段。
所以当我尝试创建我的超级管理员时

```
$ php app/console fos:user:create admin my@mail.com my_pass --super-admin 
```

我越来越

> [PDOException]
> SQLSTATE[23000]：违反完整性约束：1048 列“my_required_field”不能为空

管理它的干净方法是什么？
我想象不手动将用户插入表中......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T16:30:53.263

您应该覆盖 /Command/CreateUserCommand.php`execute()`中的[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Command/CreateUserCommand.php)`create()`方法和[/Util/UserManipulator.php](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Util/UserManipulator.php)文件中的方法。通过这样做，您应该能够从命令行向您的用户实体添加任何其他字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T16:27:42.090

您可以覆盖 CLI 命令以提供必填字段，或者仅在类构造函数中提供默认值以防它是标量。

# sqlplus - SQL 将“输入值”文本更改为其他内容？

> ID：13609595
> 
> 赞同：1
> 
> 时间：2012-11-28T16:18:50.417
> 
> 标签：sqlplus

我正在向 sql plus 输入一个值，这是我获取输入的方式：

`And Abc.Abdef = &Abcdef;`

当我执行它时，它说：

`Enter value for Abcdef:`

如何将文本更改`enter value for`为其他内容？

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:21:17.727

不，这是不可能的。SQL*Plus 不允许您自定义替换变量的提示。

但是，[您可以提示输入（使用自定义提示）](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve005.htm#SQPUG026)并将其分配给您随后在语句中使用的变量：

```
SQL> accept foo prompt 'FOO: '
FOO: bar
SQL> select * from dual where '&foo'='bar';
old   1: select * from dual where '&foo'='bar'
new   1: select * from dual where 'bar'='bar'

D
-
X 
```

# django - Django 的管理员“更改”视图不接受 kwargs={'object_id':'blah}

> ID：13609600
> 
> 赞同：2
> 
> 时间：2012-11-28T16:18:56.320
> 
> 标签：django, django-admin

我对此有点失望。我有以下代码，效果很好：

```
urlresolvers.reverse('admin:cards_card_change', args=([92])) 
```

为了加深我的理解，我想尝试将这一行重写为：

```
urlresolvers.reverse('admin:cards_card_change', kwargs={'object_id':92}) 
```

正如[有关反转管理视图的文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#reversing-admin-urls)所建议的那样（我使用的是 Django 1.4）。

但是，这似乎根本不匹配任何东西。为什么不？我尝试在 django 源代码中查找答案，但找不到用于更改的视图，因此指向相关模块的链接也将非常有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:12:08.237

`urlpattern`更改视图位于admin [/options.py](https://github.com/django/django/blob/stable/1.4.x/django/contrib/admin/options.py#L386)中：

```
url(r'^(.+)/$',
    wrap(self.change_view),
    name='%s_%s_change' % info), 
```

您会发现它向实例的`change_view`方法发送了一个请求。`ModelAdmin`该`change_view`方法也位于[admin/options.py](https://github.com/django/django/blob/stable/1.4.x/django/contrib/admin/options.py#L1012)中：

```
def change_view(self, request, object_id, form_url='', extra_context=None):
    ... 
```

它确实接受一个参数`object_id`。

The reason of the missing match of `reverse` is that the `urlpattern` above does not accept named parameter, if you change it to something like

```
url(r'^(?P<object_id>.+)/$',
    wrap(self.change_view),
    name='%s_%s_change' % info), 
```

The `urlresolvers.reverse('admin:cards_card_change', kwargs={'object_id':92})` should work.

I've no idea whether it was intended to avoid some edge cases or it's just a bug and there's already a ticket fixing this. I'll check it later.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:34:57.550

我认为这是一个 python 语法问题。问题是`**kwargs`不能被视为`*args`。您尝试调用的函数具有第一个参数 ( `object_id`)，它是位置参数，不能用作命名参数。（如果我错了，有人告诉我）

对你来说，`object_id`是一个位置参数，因此如果在 kwargs 中使用将被忽略

如果您希望您的视图函数也接受 kwargs 中的 object_id，则必须更改它，例如

```
my_id = kwargs.get('object_id', args[0]) 
```

# r - 如何在 R 中编写 is.customClass 函数？

> ID：13609607
> 
> 赞同：0
> 
> 时间：2012-11-28T16:19:20.050
> 
> 标签：r, object

我们都知道诸如`is.data.frame`或之类的功能`is.double`。可能很容易做，但很难用谷歌搜索：如何创建自己的。？功能？那么有没有更好的方法来做到这一点：

```
is.myClass <- function(x){
if(class(x) %in% "myClass") return(TRUE)
else return(FALSE)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:24:29.983

也许`inherits`就足够了：

```
is.myClass <- function(x) {inherits(x,"myClass")}

x <- 1
is.myClass(x)
[1] FALSE
class(x) <- c(class(x),"myClass")
is.myClass(x)
[1] TRUE 
```

# php - 在同一视图中使用多个模块

> ID：13609611
> 
> 赞同：0
> 
> 时间：2012-11-28T16:19:26.507
> 
> 标签：php, zend-framework

我正在使用 Zend Framework 1.12 开发一个 Web 应用程序，这对我来说是新事物，我不确定如何去做我想做的事情。

编辑：当我谈论模块时，我的意思是控制器，对不起，我仍然误解了这些术语......

在我的主页上，模块索引，我做了我想做的事，创建了几个动作和所有的东西，但我想添加一个我自己做的搜索引擎。

问题是我想将搜索引擎创建为一个名为 Search 的单独模块，但是将 SearchForm 放在主页中。点击提交会将表单中的数据发送到搜索模块。

我不太明白如何做到这一点，而不必去 /search 访问我的表单和每个相关的操作。

我必须使用 View Helper 吗？

此外，首页中的 searchForm 将是某种 QuickKSearch，访问 /search 将显示更详细的研究表单。

有人可以解释我如何从 Index 模块访问 searchForm 或将我重定向到文档中讨论的部分吗？我的研究没有成功，谷歌也没有帮助我。

编辑：当我谈论模块时，我的意思是控制器，对不起，我仍然误解了这些术语......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:42:49.497

首先，将搜索表单构建为 viewHelper，然后您可以在多个视图中重用它。表单片段中的 action 属性设置为 searchModule/controller/action。

另外在 Zend 文档中研究 viewHelpers 和 Forms。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T07:51:28.460

实际上，我更喜欢将其用作[*操作助手*](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html)，然后仅使用标准[占位符视图助手](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.placeholder)来呈现搜索表单。

让我演示一下：

实际的操作助手只是启动一个表单并准备显示。我将把表单结构留给你。

```
//the action helper
//Just fill in the args for the form to be displayed
class NameSpace_Controller_Action_Helper_Search extends Zend_Controller_Action_Helper_Abstract
{
    public function direct($action, $label = null, $placeHolder = null)
    {
        $form = new Application_Form_Search();
        //set the action
        $form->setAction($action);
        //set the submit button text
        $form->search->setLabel($label);
        //set the hint text displayed in the form window
        $form->query->setAttribs(array('placeholder' => $placeHolder,
            'size' => 27,
        ));

        return $form;
    }
} 
```

我将助手放在控制器的预调度方法中，以便控制器中的每个操作都可以使用搜索表单，而不必在每个页面中构建它。

```
//to use the helper in your controller
class IndexController extends Zend_Controller_Action
{

    public function preDispatch()
    {
        //setup action helper and assign it to a placeholder
        $this->_helper->layout()->search = $this->_helper->search(
                '/index/display', 'Search Collection!', 'Title');
    }

//in your view script
<?php echo $this->layout()->search ?> 
```

我喜欢将占位符放在我的主 layout.phtml 中，以便在我填充占位符时它会显示。现在你所要做的就是随心所欲地设计它。

**请记住：**与任何 html 表单一样，action 参数只是一个 url，因此任何有效的 url 都可以分配给表单操作。在此示例中，我使用了`/controller/action`参数，但还有许多其他方法可以将 url 传递给表单。想到 url 助手是一个很好的方法。

> ***url($urlOptions, $name, $reset, $encode)***：根据命名路由创建 URL 字符串。$urlOptions 应该是特定路由使用的键/值对的关联数组。

# c# - 从特定线程调用方法

> ID：13609615
> 
> 赞同：6
> 
> 时间：2012-11-28T16:19:32.223
> 
> 标签：c#, multithreading, task-parallel-library

我怎么能在被调用`onCompleteCallBack`的同一个线程上调用该方法`SomeAsyncMethod`？

```
public void SomeAsycMethod ( Action<object> onCompleteCallBack )
{
    // get the current thread 
    /* var ThisThread = Thread.CurrentThread. */

    Task.Factory.StartNew( () =>
    {
        Thread.Sleep( 1000 );// do some work;

        // lastly call the onCompleteCallBack on 'ThisThread'
        onCompleteCallBack( "some result" );

        // I am looking for something like:
        /* ThisThread.Invoke("some result"); */
    });
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T16:31:09.837

虽然你不能保证你的回调会在同一个**线程**上被调用，但你可以保证它会在同一个**[同步上下文](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)**中被调用（假设原始调用中存在一个）。

```
public void SomeAsycMethod ( Action<object> onCompleteCallBack )
{
    // get the current context
    var context = SynchronizationContext.Current;

    Task.Factory.StartNew( () =>
    {
        Thread.Sleep( 1000 );// do some work;

        // lastly call the onCompleteCallBack on 'ThisThread'
        onCompleteCallBack( "some result" );

        // I am looking for something like:
        context.Post(s => onCompleteCallBack ("some result"), null); 
    });
} 
```

例如，在 Windows 窗体或 WPF 程序中，以上将确保在 GUI 线程上调用回调（相应地通过消息循环或调度程序）。对于 ASP.NET 上下文也是如此。

话虽如此，我同意 Justin Harvey 的观点，即返回 a`Task<T>`可能是一个更好的设计。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T18:18:52.287

实际上，如果您使用的是基于任务的异步编程，我建议您重构代码以返回`Task<T>`并让您的客户端本身能够决定在什么上下文中调用回调方法（并促进未来向 C# 5.0 的迁移；）：

```
public Task<string> SomeMethodAsync()
{
   return Task.Factory.StartNew(() => "some result");
} 
```

如果您确定要从 UI 线程调用此方法，则可以使用以下方法：

```
var task = SomeMethodAsync();
task.ContinueWith(t => textBox.Text = t.Result, TaskScheduler.FromSynchronizationContext); 
```

这种方法更好，因为它提供了更清晰的关注点分离，并提供了在任何上下文中使用异步方法而不依赖于同步上下文的能力。一些客户端可以从 UI 线程调用此方法（并且在这种情况下`TaskScheduler.FromSynchronizationContext`会按预期运行 - 您的“继续”将在 UI 线程中调用），其中一些客户端也可以从非 UI 线程使用您的方法，而无需像处理这样的要求导致启动异步操作的同一线程。

`Task<T>`是一个完美的类，它将异步操作表示为[第一类对象](http://en.wikipedia.org/wiki/First-class_citizen)，它不仅有助于获得更多的声明性代码，而且更清晰、易于阅读和易于测试（您可以轻松地模拟此方法并返回“假”任务对象）。

# php - 如何从 Moodle 1.9 获取组/分组 ID

> ID：13609619
> 
> 赞同：0
> 
> 时间：2012-11-28T16:19:41.187
> 
> 标签：php, mysql, moodle

我想从 Moodle 获得一个组/分组 ID，用于自定义课程的 UI。我需要向特定的组/分组显示资源。我已经设置好了 Moodle。我已经登录，因为不同的用户只能访问分配给该用户组的资源。

我的主题有一个自定义侧边栏菜单，其中包含指向该课程用户的页面、作业和所有其他资源的链接。我需要根据 Group/Grouping ID 的值使用 PHP if/else 语句在菜单中向用户显示正确的资源。我在 Moodle.com 上找到了一些文档。我想出了这个打破我的主题的代码。

```
<?php 
        // Get the course module id from a post or get request.
        $id = required_param('id', PARAM_INT); 

        // Get the course module. 
        $cm = get_coursemodule_from_id('forum', $id, 0, false, MUST_EXIST)

        // Get the current group id.
        $currentgroupingid = groups_get_activity_grouping($cm);

        switch($currentgroupingid) {
            case "1":
                echo "Group 1";
            break;
            case "2":
                echo "Group 2";
            break;
            case "3":
                echo "Group 3";
            break;
            default:
            break;
        }?> 
```

此代码不起作用，我不确定为什么。在文档中有关于如何访问有关组和分组的信息的示例。[Moodle 组 API](http://docs.moodle.org/dev/Groups_API)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:51:37.100

在我的 Moodle 课程中，有三个不同的组。我需要能够根据用户组注册密钥动态更改网页资源上链接的 a href。这就是我所做的：

* * *

```
<div class="enrolment-key" style="display:none;">
<?php
    // Grab current User's group from Database By ID
    $sqlGROUPMEMBERS = "SELECT * FROM mdl_groups_members WHERE userid='$USER->id'";

    // Put Query in new Varible
    $resultGROUPMEMBERS = mysql_query($sqlGROUPMEMBERS);

    // While $row = group id of user
    while($row = mysql_fetch_array($resultGROUPMEMBERS)){
        $groupID = $row["groupid"];
    }

    // Grab Enrolment Key by the Group ID
    $sqlGROUP = "SELECT * FROM mdl_groups WHERE id=$groupID";

    // Put Query in new Varible
    $resultENROLMENTKEY = mysql_query($sqlGROUP);

    // While $row = group enrolment key for that user
    while($row = mysql_fetch_array($resultENROLMENTKEY)){
        echo $row["enrolmentkey"];
    }
?>
</div>
<script>
$(document).ready(function(){
var baseURL = "https://www.surveymonkey.com/s/";
var endURL = $('.enrolment-key').html();

$(".survey-link").attr("href", baseURL + endURL);
 });
 </script>
<a class="survey-link">Link</a> 
```

可能有更好的方法可以做到这一点，但对于像我这样的菜鸟来说很好。

# haskell - 单子变压器的解剖

> ID：13609626
> 
> 赞同：10
> 
> 时间：2012-11-28T16:19:55.900
> 
> 标签：haskell, monads, monad-transformers

我正在尝试学习基于标准 Haskell 库的 monad 转换器（mtl？转换器？不确定我下载的 Haskell 平台 - 7.4.1 附带了哪一个）。

我相信我注意到的是每个 monad 转换器定义的通用结构：

1.  基本类型（“基本”）

    *   单子实例
2.  变压器类型（'BaseT'）

    *   单子实例

    *   MonadTrans 实例

    *   MonadIO 实例

3.  变压器类（'MonadBase'）

    *   一些操作

    *   其他“BaseT”的实例

例如，对于 Writer monad，会有：

*   带有 Monad 实例的 Writer 数据类型/新类型/类型
*   一个 WriterT 数据类型/新类型/类型，带有 Monad、MonadTrans 和 MonadIO 实例
*   一个 MonadWriter 类，以及 StateT、ReaderT、IdentityT 的此类的实例...

这是monad转换器的组织方式吗？我遗漏了什么/我有任何不正确的细节吗？

这个问题的动机是弄清楚：

1.  “BaseT”与相应的“MonadBase”和“Base”之间的关系和区别是什么
2.  是否需要这三个
3.  MonadTrans 是如何相关的以及它的目的是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:40:12.003

`mtl`包没有实现 monad 转换器。至少 WriterT[只是](http://hackage.haskell.org/packages/archive/mtl/2.1.2/doc/html/src/Control-Monad-Writer-Lazy.html)从`transformers`.

`transformers`package implements `WriterT`，它本身就是一个 monad 转换器。`Writer`只是一个别名：

```
type Writer w = WriterT w Identity 
```

有些库可以`Writer`单独实现，但无论如何它只是`WriterT`. （`Identity`是一个微不足道的单子，它没有任何额外的行为。）

`MonadTrans`允许您将底层 monad 包装到转换后的 monad 中。您可以没有它，但您需要执行手动包装（请参阅`MonadTrans`实例定义以`WriterT`了解如何执行此操作）。您真正需要的唯一用例`MonadTrans`——当您不知道变压器的实际类型时。

`MonadWriter`是在中声明的类型类`mtl`。它的方法（`writer`、`pass`和）`tell`与`listen`函数 for 相同`WriterT`。它允许`WriterT`通过转换器堆栈（自动！）包装计算，即使您不知道堆栈中转换器的确切类型（甚至数量！）。

因此，`WriterT`是唯一“必需”的类型。

对于其他 monad 转换器，它是相同的：`BaseT`是一个转换器，`Base`是一个没有底层 monad 的 monad，并且`MonadBase`是一个类型类——所有 monad 的类，`BaseT`在转换器堆栈中的某个位置。

**添加：**

您可以在[RWH 书中找到很好的解释](http://book.realworldhaskell.org/read/monad-transformers.html)

这是一个基本示例：

```
import Control.Monad.Trans
import Control.Monad.Trans.Writer
import Control.Monad.Trans.Reader hiding (ask)

-- `ask` from transformers
-- ask :: Monad m => ReaderT r m r
import qualified Control.Monad.Trans.Reader as TransReader (ask)

-- `ask` from mtl
-- ask :: MonadReader r m => m r
import qualified Control.Monad.Reader as MtlReader (ask)

-- Our monad transformer stack:
-- It supports reading Int and writing String
type M m a = WriterT String (ReaderT Int m) a

-- Run our monad
runM :: Monad m => Int -> M m a -> m (a, String)
runM i action = runReaderT (runWriterT action) i

test :: Monad m => M m Int
test = do
  tell "hello"
  -- v <- TransReader.ask     -- (I) will not compile
  v1 <- lift TransReader.ask  -- (II) ok
  v2 <- MtlReader.ask         -- (III) ok
  return (v1 + v2)

main :: IO ()
main = runM 123 test >>= print 
```

请注意，这`(I)`将被编译器拒绝（尝试查看错误消息！）。但是`(II)`由于`MonadTrans`（“显式提升”）而编译。感谢`MonadReader`，`(III)`开箱即用（“隐式提升”）。请阅读 RWH 书以了解其工作原理。

（在示例中，我们`ask`从两个不同的模块导入，这就是我们需要限定导入的原因。通常您一次只会使用其中一个。）

> 另外我也不是特意问的`Writer`。

不确定我理解... `Reader`，`State`其他人使用相同的架构。替换`Writer`为`State`，您将对`State`.

# c++ - 从另一个类创建一个特定于另一个类的类的优雅/高效方式

> ID：13609628
> 
> 赞同：2
> 
> 时间：2012-11-28T16:19:56.040
> 
> 标签：c++, templates, design-patterns, inheritance

我有一个名为的类`ToolConfigurationVector`和一个名为`JointVariableVector`. 我需要能够在这两个类之间进行转换（它们是相同数据的不同表示）

A`ToolConfigurationVector`仅包含 6 个原始数据类型。情况总是如此。

A`JointVariableVector`是特定于 Robotarm 的表示，由**class** `Arm`表示。

因此，对于 (say ) 的一个子类**，**表示和转换为(say )的另一个**子类**的 表示和转换完全不同`Arm``SimpleArm``ToolConfigurationVector`**`Arm``ComplexArm`**

 **后来，我想像这样使用这些类：

```
Arm * someArm = new ComplexArm();
// ...
JointVariableVector jvv = someArm.currentJointVariableVector();
ToolConfigurationVector tcv = jvv.toToolConfigurationVector(); // no problem using virtual function
JointVariableVector how = tcv.toJointVariableVector(); // how? 
```

我不想包含有关`Arm`正在使用哪个子类的任何信息`ToolConfigurationVector`，这些信息应该以某种方式存储在`JointVariableVector`

当然，我可以使用这样的模板：

```
JointVariableVector<ComplexArm> how = ... 
```

但这不适用于我的情况，我必须**仅使用**

*   `someArm`
*   `tcv`
*   `ToolConfigurationVector`
*   `JointVariableVector`

我当然可以给出`Arm`一个虚拟方法，`jointVariableVectorFromToolConfigurationVector(ToolConfigurationVector v)`但我不能让它成为静态的，因为它与将它实现为方法（没有静态）的实际对象**无关**`Arm`，这对我来说似乎是错误的。

我该怎么做才能获得优雅的解决方案？当然，这个解决方案也应该是高效的（就所需的类、对象和执行时间而言）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:33:01.570

`jvv.toToolConfigurationVector(); // no problem using virtual function`它表示`JointVariableVector`持有指向`Arm`子类实例的指针或引用，或者它正在使用类似`pImpl`模式的东西，以便在创建它的子类中进行虚拟行为`Arm`。

如果你想`ToolConfigurationVector::toJointVariableVector`创建一个虚拟的类，`Arm`它的子类特定于哪个子类，要么（A）`ToolConfigurationVector`必须是虚拟的，其中它产生的子类`Arm`将`JointVariableVector`是虚拟的，或者（B）`ToolConfigurationVector::toJointVariableVector`需要提供一个`Arm`来创建这`JointVariableVector`将在`Arm`子类中是虚拟的。即，传递一个`Arm`to `toJointVariableVector`。

或者，the`JointVariableVector`可能是某种原始对象，稍后需要先添加`Arm`上下文才能使其有意义，但这会造成混乱。

因此，需要明确的是，`JointVariableVector`要么有一个指向 an 的指针`Arm`（因为它的表示是 said 的函数`Arm`），要么是一个`pImpl`模式类，基于你的语法（其中 的实例`JointVariableVector`，而不是指向相同的指针，调用虚拟行为）。说`JointVariableVector`是如何建造是`Arm`它来自的功能。`ToolConfigurationVector`丢失该信息。要重建 a `JointVariableVector`，您必须将其注入`Arm`到情况中。

如果`JointVariableVector`只是类型的函数`Arm`（而不是实例），那么您可以在它正在创建`toJointVariableVector`的类型上创建一个模板函数。为了减少对子类的依赖，将调用分派到 的类型上的免费模板函数，然后您可以在每个子类附近实现它并更改生成的。`Arm``JointVariableVector``ToolConfigurationVector``Arm``ToolConfigurationVector``Arm``Arm``JointVariableVector`

这会给你语法：

```
Arm * someArm = new ComplexArm();
// ...
JointVariableVector jvv = someArm.currentJointVariableVector();
ToolConfigurationVector tcv = jvv.toToolConfigurationVector();
JointVariableVector how = tcv.toJointVariableVector<ComplexArm>(); 
```**

# mysql - 经典 ASP - 通过 SQL 访问数据数据的问题

> ID：13609637
> 
> 赞同：0
> 
> 时间：2012-11-28T16:20:18.530
> 
> 标签：mysql, asp-classic

我一直在通过它使用经典的 ASP 和数据库访问。我使用的数据库是 MySQL。ASP 页面在 IIS 7 上运行。我开发了两个 ASP 页面。首先，这是我正在使用的架构 -

书=（**b_id**，标题，页数，价格，p_id）

出版商 = ( **p_id** , 姓名, 国家)

Book 中的 p_id 是来自 Publisher 的外键。

现在，在一个脚本中，当在 Publisher 中添加记录时，我首先检查是否存在类似记录，如果存在则将其报告给用户。该脚本工作正常。

但是在其他要在 Book 中插入记录的脚本中，我首先检查指定的出版商是否存在。但由于某种原因，这根本行不通。也就是说，当我查询 Publisher 表以获取所有记录进行比较时，RecordSet 对象的 RecordCount 属性返回 -1。

我已经广泛检查了这两个脚本是否有错误，但都没有。

为什么相同目的的相同代码不能在一个中工作，而是在另一个中工作？

工作代码 -

```
flag = false
temprs.Open "select country from publisher where name='" & pubname & "'", conn
if temprs.RecordCount <> 0 then
    do while not temprs.EOF
        if temprs.fields("country") = pubcountry then
            flag = true
            exit do
        end if
        temprs.MoveNext
    loop
end if 
```

它进入上述代码中的循环。

而那行不通的代码 -

```
q = "select p_id from publisher where name='" & bookpub & "'"
prs.Open q, conn
pins = false
if prs.RecordCount > 0 then
    pid = prs.fields("p_id")
    pins = true
end if 
```

在这里，prs.RecordCount 返回 -1。所有变量都已在代码的前面部分中调暗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:28:54.720

我可以提供一个不同的解决方案，给你相同的结果，但不使用记录计数：

```
q = "select p_id from publisher where name='" & bookpub & "'"
prs.Open q, conn
pins = false
if not prs.eof then
    pid = prs("p_id")
    pins = true
end if 
```

# web-applications - 支柱2表

> ID：13609638
> 
> 赞同：0
> 
> 时间：2012-11-28T16:20:23.597
> 
> 标签：web-applications, struts2, datatables

这是我的第一个 Web 应用程序，我需要创建一个网页，其中包含一个表格，并且正在从后端数据库填充数据。我还想在其中包括分页。

我在对表和 struts2 进行 google 时发现了这些：Datatable.net 和 struts2 网格插件。

有没有更好的创建表的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:34:07.980

一个好的可能是使用[Displaytag](http://www.displaytag.org)，与 struts2 一起工作，并使用类似 jsp 的标签。您还可以使用分页导出结果（以 pdf 或 excel 格式），根据列顺序对行进行排序等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:58:45.430

解决方案取决于您的目标和要显示的数据。回答以下问题：

*   您想导出到 PDF/Excel 吗？
*   你会显示大数据集还是小数据集？
*   您需要执行异步请求吗？

Datatable 似乎是一个有趣的解决方案，尽管它完全基于 javascript。我主要使用 displaytag，它很容易使用。但是，该项目似乎已被放弃，因此预计不会有任何更新（我最近将其分叉到[https://github.com/mmalmeida/displaytag/](https://github.com/mmalmeida/displaytag/)以便我们可以解决现有问题）。

[JMesa](http://code.google.com/p/jmesa/)也相当不错。干净地实现它有点困难（即，不创建不需要的依赖项） - 所以我会考虑只为中级开发人员使用它。

# c# - 连接到多个服务器的 C# 单个客户端

> ID：13609643
> 
> 赞同：0
> 
> 时间：2012-11-28T16:20:37.193
> 
> 标签：c#, client-server, tcp-ip, asynchronous

我必须设计一个基于单个客户端的 tcp-ip 应用程序，该客户端打开多个与外部服务器的连接。显然，我想为每个服务器（最多 12 个）打开一个不同的套接字并使用异步连接，因为这些服务器可能会随时向我发送数据。有人可以为我指出一个有效的模式来创建这种客户吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:23:21.763

看看观察者和/或访客。

# java - JAVA Swing Gui 窗口挂起

> ID：13609644
> 
> 赞同：0
> 
> 时间：2012-11-28T16:20:42.450
> 
> 标签：java, swing, user-interface, swingutilities

我在使用 SWING GUI 时遇到问题，或者至少我认为这是 Swing gui。

这是我的主要代码文件：

```
/**
 * 
 */
package com.tda.t2.ctas.slasher;

import javax.swing.SwingUtilities;

import com.tda.t2.ctas.slasher.gui.mainFrame;
import com.tda.t2.ctas.slasher.utils.MyCloseListener;

public class SLASHer {

    public SLASHer () {
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        //EventQueue.invokeLater(new Runnable() {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                ConfigData myconfig = new ConfigData();
                try {
                    //TdaUrlHelper window = new TdaUrlHelper();
                    //window.tdaFrame.setVisible(true);
                    mainFrame tdaFrame = new mainFrame();
                    tdaFrame.setVisible(true);

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

} 
```

创建框架并打开它的简单调用。还有其他文件我没有放在这里以获得空间。但是我遇到的问题（我已经在几台机器和操作系统上尝试过）是窗口上的按钮似乎挂起。我可以选择窗口并单击按钮，它们会像被击中一样突出显示，但没有任何反应。我有一个选项卡式平面，单击其他选项卡也无济于事。有时会持续大约 15 秒，有时会持续几分钟。但它总是最终会回来并响应新的输入（即它不记得我在它回来之前所做的所有点击）。整个应用程序很简单，因为它一直等到用户做某事后再做某事，所以我对为什么它似乎挂起感到困惑。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:27:12.043

附加到挂起按钮的违规代码是什么？检查您的控制台是否有异常，并在该代码的顶部和底部放置一些 System.out.println() 语句。看看你是否看到那些打印语句打印出来。观察顶部的打印和底部的打印需要多长时间。如果您看到这两个语句，那么您知道整个块正在执行，但是如果需要一段时间来显示最后一个语句，您就知道您正在挂起 Swing 线程（也称为 EDT - 事件调度线程）。Swing UI 中的第一条规则在执行 ActionListener 时不能重绘。

为了制作响应式 UI，您必须在 10-100 毫秒（视觉上几乎是瞬间）内看到控制台上出现的第一条和最后一条语句。如果你真的想变得花哨，你可以在停止和底部使用 System.currentTimeMillis() 。减去这两个值并 println() 它。这将准确地告诉您该侦听器运行了多长时间。如果它大于 100 毫秒，则需要通过改进算法或在线程上卸载长计算来重组代码（请参阅此[SwingWorker 教程](http://albertattard.blogspot.com/2008/09/practical-example-of-swing-worker.html)）。

```
public void actionPerformed(ActionEvent event) {
    System.out.println("Starting SomeProcess");
    long start = System.currentTimeMillis();

    // all your code belongs here

    long duration = System.currentTimeMillis() - start;
    System.out.printf("SomeProcess took %,d ms%n", duration );
} 
```

# android - 几个视图上的 onTouchListener

> ID：13609647
> 
> 赞同：0
> 
> 时间：2012-11-28T16:20:49.447
> 
> 标签：android

我的问题是我想尝试在屏幕上的任何地方接收 ANY TOUCH。为此，我想创建一个带有主要“RelativeLayout”的布局。该活动实现“onTouchListener”。这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relative"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:src="@drawable/ic_launcher" /></RelativeLayout> 
```

这是我的活动代码：

```
public class MainActivity extends Activity implements OnTouchListener{

private Context context = null;
private ImageView imagen = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    context = this;
    setContentView(R.layout.activity_main);

    imagen = (ImageView)findViewById(R.id.imageView1);
    imagen.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

        }
    });

    RelativeLayout relative = (RelativeLayout)findViewById(R.id.relative);
    relative.setOnTouchListener(this);
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    Toast.makeText(context, "Touch!!", Toast.LENGTH_SHORT).show();
    return false;
} 
```

关键是，如果我触摸图像，它不会显示吐司（如果您触摸屏幕上的任何位置，我想显示吐司）。

任何人都知道如何在我的活动上接收触摸屏幕的事件（无论它在哪里？？）。

**编辑**：我想要的也不是 ImageView 的侦听器，我想知道是否有办法接收用户触摸屏幕的事件，无论它在那里。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:37:29.743

由于您的 ImageView 是可点击的，因此触摸事件将被分派到 ImageView 并且 Activity 无法接收它。如果您想在发送到视图之前拦截所有触摸事件，您应该覆盖`Activity.dispatchTouchEvent(MotionEvent ev)`.

```
public boolean dispatchTouchEvent(MotionEvent ev) {
    // add your code here
    return super.dispatchTouchEvent(ev);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:24:35.200

尝试将触摸侦听器添加到您的图像而不是主要的相对布局。

```
imagen.setOnTouchListener(this); 
```

# c - 二叉树的后序/前序遍历

> ID：13609655
> 
> 赞同：1
> 
> 时间：2012-11-28T16:21:18.053
> 
> 标签：c, recursion, tree, binary-tree, postorder

我有一个如下所示的预购遍历函数：

```
void listInPreOrder(node* hd){
if(hd != NULL) {
        printf("%d, ", hd->value);
        listInPreOrder(hd->left);
        listInPreOrder(hd->right);
    }
} 
```

这实际上是可行的，但我认为使它成为邮政订单就像这样简单

```
void listInPostOrder(node* hd){
if(hd != NULL) {
        listInPreOrder(hd->left);
        listInPreOrder(hd->right);
        printf("%d, ", hd->value);
    }
} 
```

但不幸的是，它的效果并不好。我想知道如何解决这个问题，也许我做错了一些简单的事情。或者它可能是完全错误的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T16:29:12.410

你如何改变这个：

```
void listInPostOrder(node* hd){
if(hd != NULL) {
        listInPreOrder(hd->left);  // PRE order ???
        listInPreOrder(hd->right); // PRE order ???
        printf("%d, ", hd->value);
    }
} 
```

对此：

```
void listInPostOrder(node* hd){
if(hd != NULL) {
        listInPostOrder(hd->left);
        listInPostOrder(hd->right);
        printf("%d, ", hd->value);
    }
} 
```

# ruby-on-rails - 与现有范围的预加载关联

> ID：13609657
> 
> 赞同：1
> 
> 时间：2012-11-28T16:21:32.937
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, eager-loading

我写了一段代码来急切地从已经加载的集合中加载一些关联：

```
@articles= Article.find_by_sql("SELECT * FROM articles WHERE blabla")    
ActiveRecord::Associations::Preloader.new(@articles, {:comments => {:user => :permissions}}).run 
```

我在我的 Article 类中定义了一个范围，准备好在多个级别上加载一些文章关联：

```
class Article << ActiveRecord::Base
  [...]      

  scope :eager_loading_for_comments, includes(:comments => {:user => :permissions})
end 
```

我可以在我的第一个代码中使用这个范围吗？像这样的方式：

```
ActiveRecord::Associations::Preloader.new(@articles, :eager_loading_for_comments).run 
```

或者：

```
ActiveRecord::Associations::Preloader.new(@articles, Article.eager_loading_for_comments).run 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:27:39.610

为什么不像其他人那样调用范围，例如

```
@articles = Article.eager_loading_for_comments 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:28:02.310

如何将 where 链接到范围：

```
Article.eager_loading_for_comments.where("blah blah blah") 
```

# javascript - 将javascript数据存储在全局数组中未按预期工作

> ID：13609660
> 
> 赞同：1
> 
> 时间：2012-11-28T16:21:34.983
> 
> 标签：javascript

> **可能重复：**
> [更改 javascript 闭包内的全局变量](https://stackoverflow.com/questions/13487437/change-global-variable-inside-javascript-closure)

我在将数据存储在 javascript 全局数组中时遇到问题。即使我为它分配了一些元素，我也无法弄清楚为什么数组是空的。

基本上我有两个函数：`loadMarkers`每当用户单击按钮并从 JSON 中的 url 获取一些信息时调用，解析该数据并将其存储在全局数组中。另一个函数`showMarkers`只是遍历数组并显示所有标记，但该数组是空的！

提前致谢。

```
var markers = [];

function loadMarkers(url) {

    markers = [];
    $.get(url, function(data) {

        var json = jQuery.parseJSON(data);

        for (var i = 0; i < json.length; i++) {

            // parsing json
            var lat = json[i].Latitude;
            var lng = json[i].Longitude;
            var id = json[i].ID;

            console.log(id); // this prints with no problems!

            // create new marker
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                title: id,
                html: "<p>" + "Info for container " + id + "</p>"
            });

            // add marker to markers array        
            markers.push(markers[i]);

            // add info window to marker
            google.maps.event.addListener(marker, "click", function() {
                infoWindow.setContent(this.html);
                infoWindow.open(map, this);
            });
        }
    });
}

function showMarkers() {
    for (i = 0; i < markers.length; i++)
        console.log(markers); // here I get an empty array!
        markers[i].setMap(map);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:26:27.287

看起来像这条线：

```
markers.push(markers[i]); 
```

应该改为：

```
markers.push(marker); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:26:22.413

也许它是以下代码

```
// add marker to markers array        
markers.push(marker); // was markers[i] 
```

关于评论中的第二个问题，该`$.get()`方法返回一个 jQuery 延迟对象，它允许您在方法完成后执行函数。

```
$.get().done( function( ) {
    // your code
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T16:27:58.397

代码中有一个错字：

```
markers.push(markers[i]); 
```

应该：

```
markers.push(marker); 
```

仅通过查看代码就很难发现这种拼写错误（就像我们的大脑经过训练可以让我们阅读我们期望阅读的内容）......在这种情况下，快速找到此类错误的最佳方法是在代码中添加一条`debugger;`指令，并通过您选择的开发工具跟踪程序的执行。

# android - 通过 events.dtend 更新日历 instances.end

> ID：13609665
> 
> 赞同：4
> 
> 时间：2012-11-28T16:21:41.253
> 
> 标签：android, events, calendar, updates, instances

当我更新 CalendarContract.Events DTEND 列时，为什么更改没有显示在 CalendarContract.Instances END 列中？

我的应用程序允许用户使用 CalendarContract.Events API 查看和更改日历事件。该代码对 Events 表执行更新，然后（稍后）使用 Instances 表将其读回。例如，对 TITLE 的更改工作正常（也就是说，我更新了事件并可以读回实例中的更改）。Events.DTEND 的更改确实会显示在 Instances.DTEND 中，但我怎样才能让该更新也显示在 Instances.END 中？

这很重要，因为显然，Android 日历应用程序（以及我的应用程序）使用 Instances.BEGIN 和 Instances.END 来确定要在日历中显示的内容。

这是我的更新代码：

```
 ContentResolver cr = getContentResolver();
  ContentValues values = new ContentValues();
  values.put (Events.CALENDAR_ID, calendarId);
  values.put (Events.TITLE, title);
  values.put (Events.DTEND, eventEnd.getTimeInMillis());
  String where = "_id =" + eventId +
                 " and " + CALENDAR_ID + "=" + calendarId;
  int count = cr.update (Events.CONTENT_URI, values, where, null);
  if (count != 1)
     throw new IllegalStateException ("more than one row updated"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:53:12.920

解决方案原来是添加开始日期：

```
 ContentResolver cr = getContentResolver();
  ContentValues values = new ContentValues();
  values.put (Events.CALENDAR_ID, calendarId);
  values.put (Events.TITLE, title);
  values.put (Events.DTSTART, eventStart.getTimeInMillis());
  values.put (Events.DTEND, eventEnd.getTimeInMillis());
  String where = "_id =" + eventId +
                 " and " + CALENDAR_ID + "=" + calendarId;
  int count = cr.update (Events.CONTENT_URI, values, where, null);
  if (count != 1)
     throw new IllegalStateException ("more than one row updated"); 
```

请注意：此案例仅显示如何更新非重复事件。非重复事件的 RRULE 为空。

我怀疑提供程序代码所做的只是使用您提供的值而不是重新获取开始日期本身（显然，如果用户更改了开始日期，您无论如何都必须提供它）。从减少数据库访问的角度来看，这是有道理的。太糟糕了谷歌没有记录任何这些。

# c# - Caliburn.Micro 屏幕通过导体过渡

> ID：13609669
> 
> 赞同：2
> 
> 时间：2012-11-28T16:21:49.613
> 
> 标签：c#, .net, xaml, mvvm, caliburn.micro

我有一个由**Conductor** *ViewModel呈现的***Caliburn.Micro** shell（即包含其他视图的空*XAML*视图）。从那里我通过以下方式打开一个**屏幕**：

 *****```
ActivateItem(...) 
```

通常从新显示的对话框中，用户可以执行一些操作并单击按钮（*OK*、*Cancel*、*Build* ....），这些按钮应该每个都转换到另一个*屏幕*（在 shell 中）。

```
public MyDialog : Screen
{
    public void Ok()
    {
        // TODO: Somehow tell the conductor or called of this class about this action.
    }
} 
```

实现这种对话动作/消息屏幕转换的好方法是什么？

*   简单的*.NET 事件*是可能的——这不是一个坏主意吗？
*   CM*`IEventAggregator`*也应该通过改变视图来工作
*   从 shell Conductor 检查 ViewModel*结果*一旦通过`TryClose()`-- 应该是可能的，只是不知道如何在 CM 中实现这一点。
*   *从该屏幕（通过 IoC 或直接）引用 shell* Conductor 实例——这似乎是强耦合。

您能否提一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:18:41.577

我首选的方法是使用 EventAggregator 来促进 VM 之间的消息传递。

当您有多个窗口正在侦听某种类型的事件时（例如，带有多个工具窗口的 Visual Studio 样式界面，可能显示上下文相关属性），这尤其适用，但是对于此实现来说，这听起来有点矫枉过正。当然，优点仍然是 VM 之间良好的松散耦合和缺少事件（这是一件好事！）

听起来您想要一个模式对话框弹出并显示一个选项，然后在第一个屏幕返回后激活另一个屏幕。

您可以将事件处理程序附加到`Deactivated`子 VM 中的事件，该事件将在项目停用时触发。它还在参数中传递一个布尔值，以通知停用的项目是否已关闭 - 您可以检查这一点并激活您的导体中的相应屏幕。

例如

```
this.Deactivated += new EventHandler<DeactivationEventArgs>(WorkspaceViewModel_Deactivated);

void WorkspaceViewModel_Deactivated(object sender, DeactivationEventArgs e)
{
    if(e.WasClosed) // raise some event
} 
```

然后将事件传递给指挥，我真的不会为此走事件路线。这将虚拟机单向耦合，因此它可能不是最灵活的解决方案

另一种方法是通过事件聚合器触发一条消息，告诉指挥者它需要在子 VM 关闭时打开一个不同的窗口。可以使用相同的方法，但它是解耦的

```
this.Deactivated += new EventHandler<DeactivationEventArgs>(WorkspaceViewModel_Deactivated);

void WorkspaceViewModel_Deactivated(object sender, DeactivationEventArgs e)
{
    if(e.WasClosed) MainConductor.EventAggregator.Publish(new ActivateWindowMessage(typeof(SomeVM));
} 
```*****

# actionscript - 如何在 Actionscript 中滚动嵌套容器而不滚动父容器

> ID：13609670
> 
> 赞同：0
> 
> 时间：2012-11-28T16:21:49.927
> 
> 标签：actionscript

我有一种情况，我有一个容器，如 contentContainer 和第二个容器 mainContainer。我想让第二个容器可滚动，第一个容器不可滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:20:44.050

尝试引用内部容器：

```
trace( Maincontainer.insidecontainer); 
```

此外，如果它是一个组件，您将可滚动属性设置为 false，如果您不理解我或需要帮助，请告诉我们不，我将为您制作一个示例文件来解释...

# http - 无法从http服务器接收winsock2的响应包

> ID：13609671
> 
> 赞同：2
> 
> 时间：2012-11-28T16:21:57.133
> 
> 标签：http, get, request, response, winsock2

我确定我的程序已经通过 url 从服务器获取了 ip。当我发送 GET 请求时，虽然发送成功，但无法得到响应。我不确定服务器是否收到了我的请求，我应该如何检查服务器是否收到了我的请求？发送请求并等待一段时间后连接将关闭。“recv”函数将响应 0，缓冲区一无所获。

我想知道我的“sendbuf = GET / HTTP/1.1\r\n\r\n”是否有任何错误。我应该使用 1.1 还是 1.0？

```
char *sendbuf = "GET / HTTP/1.1\r\n\r\n";

//to get the ip from DNS server
pHostEnt = gethostbyname( "www.google.com.tw");
ppaddr = (int**)pHostEnt->h_addr_list;
sockAddr.sin_addr.s_addr = **ppaddr;
printf("%s",inet_ntoa(sockAddr.sin_addr) );

//to create the socket and connect to it
memset(&serverAddress, 0, sizeof(serverAddress));
serverAddress.sin_family = AF_INET;
serverAddress.sin_addr.s_addr = inet_addr(inet_ntoa(sockAddr.sin_addr));
serverAddress.sin_port = htons(SERVER_PORT);

serverSocket = socket(AF_INET, SOCK_STREAM, 0);
connect(serverSocket, (struct sockaddr *)&serverAddress, sizeof(serverAddress));

//send request
int iResult = send( serverSocket, sendbuf, (int)strlen(sendbuf), 0 );
//get response    
if (bytesRead=recv(serverSocket, buf, MAX_SIZE, 0) < 0)
    printf("Error with send()");
else
    printf("Successfully sent html fetch response"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:40:46.733

使用 HTTP 1.1 很好，但是您的请求是不完整的，因为 HTTP 1.1`Host`至少需要标头（以便服务器支持虚拟主机）。

更重要的是，您没有进行任何错误处理。你需要这样做。

您还没有考虑到`gethostname()`可以返回多个 IP 地址。您需要访问`connect()`每个地址，直到一个成功，或者直到您用完列表。

尝试这个：

```
char *sendbuf = "GET / HTTP/1.1\r\nHost: www.google.com.tw\r\n\r\n";

//to get the ip from DNS server
pHostEnt = gethostbyname( "www.google.com.tw"); // you should be using getaddrinfo() instead!
if (!pHostEnd)
{
    printf("Unable to resolve www.google.com.tw\n");
    return; // or whatever...
}

if (pHostEnt->h_addrtype != AF_INET)
{
    printf("www.google.com.tw did not resolve to an IPv4 IP address\n");
    return; // or whatever...
}

serverSocket = socket(AF_INET, SOCK_STREAM, 0);
if (serverSocket == INVALID_SOCKET)
{
    printf("Unable to create socket\n");
    return; // or whatever...
}

in_addr **ppaddr = (in_addr**) pHostEnt->h_addr_list;

sockaddr_in serverAddress = {0};
serverAddress.sin_family = AF_INET;
serverAddress.sin_port = htons(SERVER_PORT);

bool connected = false;

int i = 0;
while (ppadd[i] != NULL)
{
    // connect to server

    serverAddress.sin_addr = *(ppaddr[i]);
    printf("Connecting to %s\n", inet_ntoa(serverAddress.sin_addr);

    if (connect(serverSocket, (struct sockaddr *)&serverAddress, sizeof(serverAddress)) == 0)
    {
        connected = true;
        break;
    }

    if (WSAGetLastError() == WSAEWOULDBLOCK)
    {
        fd_set writefds;
        FD_ZERO(&writefds);
        FD_SET(serverSocket, &writefds);

        timeval timeout;
        timeout.tv_sec = 5;
        timeout.tv_usec = 0;

        if (select(0, NULL, &writefds, NULL, &timeout) > 0)
        {
            connected = true;
            break;
        }
    }

    ++i;
}

if (!connected)
{
    printf("Unable to connect to www.google.com.tw\n");
    return; // or whatever...
}

printf("Connected, sending request\n");

//send request
char *ptr = sendbuf;
int len = strlen(sendbuf);

do
{
    int bytesSent = send( serverSocket, ptr, len, 0 );
    if (bytesSent > 0)
    {
        ptr += bytesSent;
        len -= bytesSent;
        continue;
    }

    if (WSAGetLastError() == WSAEWOULDBLOCK)
    {
        fd_set writefds;
        FD_ZERO(&writefds);
        FD_SET(serverSocket, &writefds);

        timeval timeout;
        timeout.tv_sec = 15;
        timeout.tv_usec = 0;

        if (select(0, NULL, &writefds, NULL, &timeout) > 0)
            continue;
    }

    printf("Unable to send request\n");
    return; // or whatever...
}
while (len > 0);

printf("Reading response\n");

//get response    
do
{
    int bytesRead = recv(serverSocket, buf, MAX_SIZE, 0);
    if (bytesRead > 0)
    {
        // process buf as needed...
        // make sure you are paying attention to the
        // Content-Length and Transfer-Encoding headers,
        // as they tell you how to read the response.
        // Refer to RFC 2616 Section 4.4 for details...

        contine;
    }

    if (bytesRead == 0)
    {
        printf("Disconnected");
        return; // or whatever...
    }

    if (WSAGetLastError() == WSAEWOULDBLOCK)
    {
        fd_set readfds;
        FD_ZERO(&readfds);
        FD_SET(serverSocket, &readfds);

        timeval timeout;
        timeout.tv_sec = 15;
        timeout.tv_usec = 0;

        if (select(0, &readfds, NULL, NULL, &timeout) > 0)
            continue;
    }

    printf("Unable to read response\n");
    return; // or whatever...
}
while (true);

closesocket(serverSocket); 
```

# c# - 如何正确地将 lambda 表达式插入到另一个翻译为 sql 的表达式中？

> ID：13609673
> 
> 赞同：1
> 
> 时间：2012-11-28T16:22:00.953
> 
> 标签：c#, linq-to-sql, lambda

```
 internal IEnumerable<Setting> Search(string text)
    {
        Func<string, string, bool> searchCI =
            (x, y) => x.IndexOf(y, StringComparison.OrdinalIgnoreCase) >= 0;
        return _dc.Settings.Where(
            x => searchCI(x.key, text)
                || searchCI(x.description, text) );
    } 
```

此代码生成异常：{"Method 'System.Object DynamicInvoke(System.Object[])' has no supported translation to SQL."}

帮助修复，请

升级版：

```
internal IEnumerable<Setting> Search(string text)
{
    return _dc.Settings.Where(
        x => x.key.IndexOf(text).StringComparison.OrdinalIgnoreCase) >= 0
            || x.description.IndexOf(text).StringComparison.OrdinalIgnoreCase) >= 0;
} 
```

这有效，但重复代码。我怎样才能使子表达式可以编译为 sql（如果可能）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:07:23.010

出现此问题是因为 EF 不知道如何将您的 lambda 表达式转换为本机 MSSQL 查询格式。

解决方案：

```
 internal IEnumerable<Setting> Search(string text)
    {
        Func<string, string, bool> searchCI =
            (x, y) => x.IndexOf(y, StringComparison.OrdinalIgnoreCase) >= 0;
        return _dc.Settings.ToList().Where(
            x => searchCI(x.key, text)
                || searchCI(x.description, text) );
    } 
```

您可以使用 SQL 服务器配置文件来获取结果查询。

# c++ - C++：从 main 访问私有字段和函数

> ID：13609675
> 
> 赞同：4
> 
> 时间：2012-11-28T16:22:10.020
> 
> 标签：c++, function, field, private, main

在我的职业生涯中，我只使用 Java 进行编程，并且从 10 天就开始使用 C++，所以这个问题对你们中的许多人来说可能看起来很奇怪。我在头文件中定义了一个类的结构：

```
    #include "ros/ros.h"
    #include "nav_msgs/Odometry.h"
    #include "geometry_msgs/Pose.h"
    #include "geometry_msgs/Point.h"
    #include “stdio.h”
    #include "sensor_msgs/LaserScan.h"
    #包括“列表”
    #include “向量”
    #include "scan_node.h"
    #include “odom_node.h”
    #include “coord.h”

    类 stage_listener{
    上市：
        stage_listener();

    私人的：
        std::list odom_list;
        std::list 扫描列表；
        std::listcorners_list;

        std::list polar2cart(std::vector, 浮点数, 浮点数, 浮点数, 浮点数);
        void addOdomNode (const nav_msgs::Odometry);
        无效 addScanNode (const sensor_msgs::LaserScan);
        void extractCorners(std::vector, float, float, float, float);
        整数距离（浮动，浮动，浮动，浮动，浮动）；
        无效节点2文本（std::vector，std::vector）；
        int numOdom();
        整数扫描（）；
    };  

```

在相关的 .cpp 文件中，我写了一个 main：

```
    int main(int argc, char **argv){
            字符缓冲区[1024]；
            而（1）{
                int i = fscanf(stdin,"%s",buffer);

                如果（strcmp（“退出”，缓冲区）== 0）
                    退出（0）；

                否则 if(strcmp("num_nodes",buffer) == 0){
                    ROS_INFO("里程计节点：%i\n扫描节点：%i",numOdom(),numScan());
                }

                别的{}
            }

    }

```

ROS_INFO 函数是 Willow Garage 的 ROS 的一部分，您可以像普通的 printf 一样使用它，以相同的形式获取完全相同的参数。在编译代码时，我得到以下信息：

```
/home/ubisum/fuerte_workspace/beginner/src/stage_listener.cpp：在函数'int main（int，char**）'中：
/home/ubisum/fuerte_workspace/beginner/src/stage_listener.cpp:223:5：错误：“numOdom”未在此范围内声明
/home/ubisum/fuerte_workspace/beginner/src/stage_listener.cpp:223:5：错误：“numScan”未在此范围内声明

```

你知道错误的原因吗？在 Java 中，您可以访问私有字段/函数，所以我无法理解在 C++ 中这是不可能的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T16:24:39.663

> > 在 Java 中，您可以访问私有字段/函数

不，你不能，除非你使用反射。这就是将某些东西设为私有的全部意义所在。我认为您在这里混淆了公共和私人。（不过，您*可以*从类自己的 main 方法访问 java 中的私有静态字段和方法）。C++ 中的 main 函数与类无关（即使是，您的代码仍然无法工作，因为您正试图静态访问实例成员）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:35:16.723

1）你不能在不实例化类的情况下调用方法，或者简单地说你必须先创建对象。

2）即使您创建了类的对象，您的对象也不能调用私有方法。所以让 numOdom 和 numScan 成为公共方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T16:26:24.163

通常，在 C++ 中，我们将函数用作公共函数。

您将其作为私有的，因此您可以在自己的类范围内访问它们。因此，如果您尝试主要使用它们，我们可以认为这些功能应该是公共的。

你需要声明一个类的对象。因此，您可以使用 object.function(); 访问该函数。命令。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T16:28:02.487

这里有几件事。

首先，您需要使 stage_listener 对象调用其方法或使方法静态，然后如果您希望对象共享相同的方法，则使用范围解析运算符来调用函数。其次，您不能访问私有变量（这是 OO 语言中数据隐藏的重点。）

因此，您需要在类中公开函数并创建类的对象或将函数设为静态并使用范围解析运算符调用它们。完全取决于你想要完成什么。我希望这有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T16:27:34.877

您无法访问此类方法之外的任何私有方法（即使在 Java 中也是如此）。

将要在外部使用的方法设置为公共

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T16:27:17.660

在 C++ 中，主函数不是您定义的类的一部分（即使它“在关联的 .cpp 文件中”），因此它不能访问私有字段。在 C++ 中和在 Java 中一样，只有在类中声明的函数才是类的一部分，因此可以访问私有字段。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T17:32:04.447

1) public 部分中的公共方法

2）调用类的非静态公共方法，首先创建类的实例

```
 class stage_listener{
    public:
        stage_listener()
        {
        }

        //all methods are not implemented
        void addOdomNode (const nav_msgs::Odometry) {}
        void addScanNode (const sensor_msgs::LaserScan) {}

        int numOdom() { return 0; }
        int numScan() { return 0; }

    private:

        std::list<float> odom_list;
        ........

        std::list<float> polar2cart(std::vector<float>, float, float, float, float)
        {
                   //empty list
            return std::list<float>();
        }

        ........
    };  

    int main(int argc, char **argv){

            char buffer [1024];
            while(1){
                int i = fscanf(stdin,"%s",buffer);

                if(strcmp("exit",buffer) == 0)
                    exit(0);

                else if(strcmp("num_nodes",buffer) == 0){

                    //create object on the stack
                    stage_listener sl;

                    ROS_INFO("Odometry nodes: %i\n
                              Scan nodes: %i\n",
                              sl.numOdom(),
                              sl.numScan());
                }
                else{ 
                    return 1;
                }
            }
            return 0;
    } 
```

# c# - 如何读取 json 文件并在自定义类中序列化它？

> ID：13609676
> 
> 赞同：3
> 
> 时间：2012-11-28T16:22:09.427
> 
> 标签：c#, json, servicestack, file-handling

我在 menu.json 文件中保存了以下 JSON：

```
 {
          "menu": {
                    "menuitems": [
                     {
                          "label": "Account",
                          "listview": "Account List"
                      },
                      {
                          "label": "Documents",
                          "listview": "Document List"
                      }
                                ]
                  }
       } 
```

我已手动将此数据写入文件。我使用以下函数检索此数据：

```
 public ActionResult GetFromFile(string path)// path points to the menu.json file
       {
          StreamReader sr = new StreamReader(path);
          string filedata = sr.ReadToEnd();
          Menu menu = JsonSerializer.DeserializeToString<Menu>(filedata);
          return Json(menu, JsonRequestBehavior.Allowget);

       } 
```

当我得到作为 menu 的响应时，我无法在类字段中将其分开。此外，我有一个班级，那么如何将我的 json 文件数据存储到这个班级？类结构会不会有任何修改？我的菜单类如下：

```
 public class Menu

    {
       public string Label {get;set;}
       public string Listview {get;set;}
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:38:49.770

序列化在菜单上方有一个额外的未命名容器。您的类结构需要如下所示：

```
public class container
{
    public menu menu { get; set; }
}

public class menu
{
    public menuitem[] menuitems { get; set; }
}

public class menuitem
{
    public string Label { get; set; }
    public string Listview { get; set; }
} 
```

要反序列化，您可以使用：

```
JavaScriptSerializer js = new JavaScriptSerializer();
StreamReader sr = new StreamReader("menu.json");
string filedata = sr.ReadToEnd();
var menus = js.Deserialize<container>(filedata); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:32:12.023

我认为您需要将 Menu 类重命名为 MenuItem：

```
public class MenuItem
{
   public string Label { get; set; }
   public string Listview { get; set; }
} 
```

并创建一个包含 MenuItem 列表的新 Menu 类：

```
public class Menu
{
    public List<MenuItem> MenuItems { get; set; }
} 
```

看看这是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:32:52.837

这里有一些序列化的例子[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)使用 JSON.Net

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:34:27.187

您的类结构应该类似于以下内容

```
public class Menu
    {
       public List<MenuItem> menuItems {get;set;}
   }

public class MenuItem
{
       public string Label {get;set;}
       public string Listview {get;set;}
} 
```

# ios - iOS 包含 API 子控制器大小

> ID：13609682
> 
> 赞同：0
> 
> 时间：2012-11-28T16:22:34.937
> 
> 标签：ios, uiviewcontroller

所以我有一个视图控制器，顶部有一个工具栏，下面有一个容器视图，我已将其连接为控制器的视图。

然后我这样做：

```
[self addChildViewController:detailsView];
[self.view addSubview:detailsView.view];
[detailsView didMoveToParentViewController:self]; 
```

出于某种原因，详细信息控制器出现在工具栏的顶部。有没有办法指定尺寸？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:15:44.260

当您在 IB 中设置容器视图时，您不需要使用任何常用的自定义容器控制器代码，所有这些都由 IB 自动为您完成。此外，您不应该更改主控制器的视图（其中包含容器视图的视图），它的视图应该仍然是嵌入容器视图的整个视图。您访问嵌入式控制器（提供的那个）通过主控制器的 childViewControllers 属性自动（并调整大小以适应容器视图）。

# python - 带有参数的python搜索模块路径脚本不起作用

> ID：13609683
> 
> 赞同：0
> 
> 时间：2012-11-28T16:22:35.823
> 
> 标签：python

要查找模块的路径，我想使用以下脚本：

```
import <module_name>
print <module_name>.__file__ 
```

有用。

但是，我想让它更灵活，接收一个参数来指定模块的名称。

如果我将脚本命名为 searchModulePath.py，我想用`searchModulePath.py <some_module_name>`.

这是我尝试过的：

```
#!usr/bin/python

import sys
print sys.argv
import sys.argv[1]
print sys.argv[1].__file__ 
```

但它不起作用：

```
 File "searchModulePath.py", line 5
    import sys.argv[1]
                   ^
SyntaxError: invalid syntax 
```

而且，第二行中的打印语句不会打印出任何内容，:(

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:24:32.060

如果你说它有效

```
module = __import__(sys.argv[1])
print(module.__file__) 
```

（假设模块是作为文件实现的；`sys`但`__builtins__`不是。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:26:06.673

您不能在 import 语句中使用变量，而应使用内置变量[`__import__`](http://docs.python.org/2/library/functions.html#__import__)：

```
import sys
print sys.argv
module = __import__(sys.argv[1])
print module.__file__ 
```

# git - 在 git 中提交一个“虚拟”文件并制作它

> ID：13609689
> 
> 赞同：2
> 
> 时间：2012-11-28T16:23:05.823
> 
> 标签：git, virtual

这是否可以在 git 上提交文件系统上不存在的文件？

例子：

git 添加“你好世界”“hello.txt”

我想在文件 hello.txt 中添加 hello world，但我不想在我的文件系统上写 hello.txt。

hello.txt 不存在，我不希望它存在于 git 系统上。（我不想在我的文件系统上写这个文件）。有没有办法做到这一点 ？

问候

比西埃

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:26:54.430

是的，你可以做这样的事情。

```
# write new object to the object database, record its id
obj_id=$(echo hello world | git hash-object --stdin -w)

# add the new file to the index as 'hello.txt'
git update-index --add --cacheinfo 100644 $obj_id hello.txt

# Make a new commit adding the new file
git commit -m "Add new file" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:26:27.260

为什么不在本地创建文件，添加到 git，提交并推送到存储库。然后删除本地文件并将其添加到 .gitignore 中，这样它就不会再次被拉下。

虽然我怀疑这可能不符合您的要求，但可能需要更多上下文

# html - 当溢出设置为隐藏时，嵌套的 inline-block 元素在 FF / IE 中向上推

> ID：13609690
> 
> 赞同：0
> 
> 时间：2012-11-28T16:23:19.423
> 
> 标签：html, css, ellipsis

这在 Chrome 中不会发生。我正在尝试为嵌套元素实现省略号。有没有其他人遇到过这个问题，如果有，你能解决吗？

```
<span>bar <span class="foo">foo</span> bar</span>

span.foo {
    display: inline-block;
    overflow: hidden;        
} 
```

[小提琴](http://jsfiddle.net/uwZAX/6/)

```
<a href="http://www.stackoverflow.com">bar <span class="foo">foo</span> bar</a>

span.foo {
    display: inline-block;
    text-decoration: inherit;
    overflow: hidden;        
} 
```

[小提琴](http://jsfiddle.net/uwZAX/7/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:59:43.797

`vertical-align: top`在你有的地方添加`display: inline-block`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:28:53.977

这是由于[溢出规范](http://www.w3.org/TR/CSS21/visufx.html)，它仅适用于块元素以及行高如何工作。

*默认情况下* ，您的外部跨度为`display:inline`. **内联元素不应包含块元素**。虽然，将其设置为`display:block`不会解决问题。

问题是文本（外部元素）的基线与内部元素的**框相同。**因此，该**框**位于与文本开头相同的高度（这会留下一些空白）。

[无论如何，使用演示](http://jsfiddle.net/uwZAX/9/)可能更容易理解。

如果您将内部跨度的 line-height 设置为低于文本实际高度，则框将保留其大小。当然，三十点解决方案也是有效的。

# sql-server-2008 - ColdFusion 查询连接

> ID：13609696
> 
> 赞同：2
> 
> 时间：2012-11-28T16:23:46.387
> 
> 标签：sql-server-2008, coldfusion, coldfusion-9

当您运行基本的 ColdFusion 查询时，ColdFusion 何时真正从数据库中注销？查询何时真正关闭？我的理解是，当您同时对多个用户进行身份验证时，它会保持其连接并为新用户使用新线程。但我正在努力寻找任何关于它何时真正关闭的文档。是在页面完成渲染时还是在查询执行后直接？

对此问题的任何帮助将不胜感激。我们正在使用 SQL Server 2008 运行 ColdFusion 9 Standard。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:32:29.523

我的理解是，默认情况下，ColdFusion 不会在特定时间注销数据库。它使用连接池，因此当您进行查询时，coldfusion 从它的连接池中获取一个连接（如果没有连接，则创建一个连接），执行查询，然后将连接交还给池，为更多请求做好准备。当连接处于非活动状态的时间足够长时（默认为 20 分钟，由 ColdFusion DataSource 管理员中的超时设置设置），连接最终将被关闭。

我认为您的问题的严格答案是：自上次使用该连接以来 20 分钟，但这很难确定

# sql - SQL十进制的ADO VBA类型？

> ID：13609697
> 
> 赞同：2
> 
> 时间：2012-11-28T16:23:46.163
> 
> 标签：sql, sql-server, excel, vba

我在 SQL 表中有一些字段类型为小数（x，y）。在 VBA 中，如何在存储过程参数的 ADO 参数中表示这些？例如，将使用 adVarChar 声明一个 varchar：

```
Set prm = cmd.CreateParameter("@ColumnX", adVarChar, adParamInput, 50) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:27:37.960

看看这个页面：

*   [ADO 数据类型](https://www.w3schools.com/asp/ado_datatypes.asp)

您可能感兴趣的两种数据类型是`adDecimal`和`adNumeric`。以下帖子描述了两者之间的区别：

*   [sqldatatypes - SQL Server 中 DECIMAL 和 NUMERIC 之间有什么区别吗？- 堆栈溢出](https://stackoverflow.com/questions/759401/is-there-any-difference-between-decimal-and-numeric-in-sql-server)

这是一个例子：[http ://www.access-programmers.co.uk/forums/showthread.php?t=149631](http://www.access-programmers.co.uk/forums/showthread.php?t=149631)

# git - 这是做什么的：git branch -f

> ID：13609698
> 
> 赞同：20
> 
> 时间：2012-11-28T16:23:47.653
> 
> 标签：git, branch

我试图弄清楚如何正确使用这个命令。我相信这是我想将一个分支变成另一个分支的命令和标志（基本上删除一个分支并创建一个与另一个分支的文件同名的新分支），但我不确定，或者如果我的语法正确。

如果我这样做：

```
git branch -f master sub-branch 
```

它会从 master 中删除所有文件并用子分支中的文件填充它吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-28T16:27:53.887

论据`-f`代表。`--force`

*   如果一个名为的分支`master`已经存在，git 将不允许你覆盖它，除非你使用`-f`.
*   第二个参数 ( `sub-branch`) 将用于确定`master`分支`HEAD`应该指向的位置。

# c# - 为什么有些 Windows UI 元素会立即更新，而有些则不会？

> ID：13609700
> 
> 赞同：1
> 
> 时间：2012-11-28T16:23:59.890
> 
> 标签：c#, winforms, user-interface

我们有一个按钮单击事件，它启动一个长时间运行的任务，该任务更新状态栏标签和进度控制以提供用户反馈。在我们将任务移动到单独的线程之前，我们注意到状态标签 {label.text = "some message"; }（通常）会立即更新，而进度条和一些自定义控件通常不会更新，直到函数完成并且主 UI 线程再次开始发送消息（考虑到主 UI 线程，我们意识到这很有意义）。
但这让我们想知道 - 某些 Windows 控件是否直接重绘而不是发出 WM_Paint 消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:15:08.753

您的发现与我对 .NET 控件的了解非常矛盾。常见的规则是更改 Text 属性或更改 ForeColor 或 BackColor 等属性只会导致调用 Invalidate() 方法。当 UI 线程再次开始泵送消息时，这最终会导致传递 WM_PAINT 消息。您可以调用控件或窗体的 Update() 方法来强制在输入慢速代码之前执行任何挂起的绘制。这完全是标准的 Windows 行为。

ProgressBar 控件是一个特例。它的本机 Windows 实现直接更新条形长度。这是兼容行为，此控件通常用于无法正确泵送的代码中。

TextBox 具有特殊的绘制行为，它部分直接绘制到窗口而不是通过 WM_PAINT 消息处理程序。当它需要在 386SUX 机器上合理工作时，这是 Windows 2 的遗留行为。但这在这种情况下无关紧要。

当然，与其为此烦恼，不如永远不要让自己处于任何这些重要的地方。

# bash - 当我设置-e时如何忽略与0不同的返回值？

> ID：13609701
> 
> 赞同：13
> 
> 时间：2012-11-28T16:24:05.920
> 
> 标签：bash

我经常添加`set -e`我的 bash 脚本。但是这次我必须调用一个命令，该命令在成功时返回一些无意义的数字而不是 0。我怎样才能告诉 bash 只忽略这个命令的返回值。

更改命令或更改其代码以符合标准不是一种选择。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T16:26:12.693

`true`总是返回一个零退出代码。所以你可以做

```
command-with-meaningless-return-value || true 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-21T02:28:22.367

如果您需要使用`$?`稍后的值，您可以这样做：

```
# A test funtion to demonstrate different exit status values
$ exit_with(){ return $1; }

$ exit_with 0

$ echo $?
0

$ exit_with 4

$ echo $?
4

$ exit_with 4 || true

$ echo $?
0

# capture the exit status rather than clobber it
$ exit_with 4 || exit_status=$?

$ echo $?
0

$ echo $exit_status
4 
```

在这种情况下，使用`$exit_status`而不是`$?`. 我还没有找到一种方法来做类似`?=$?`或`declare ?=$?`

# format - 来自 Google Play 的 FT311D 配件启动应用程序

> ID：13609702
> 
> 赞同：2
> 
> 时间：2012-11-28T16:24:17.603
> 
> 标签：format, usb, google-play, accessory

我在我的 USB 配件上使用来自 FTDI 的 FT311D 设备 - [http://www.ftdichip.com/Android.htm](http://www.ftdichip.com/Android.htm)

此设备会将 Android 手机置于从属模式，我的 USB 附件将成为主控。

这是我想做的事情：

1.  将配件插入 Android 手机的 MicroUSB 端口。
2.  从我的设备发送一个“字符串”以直接进入 Google Play 并为我的配件下载特定的应用程序。
3.  从 Google Play 下载应用程序后，我想启动该应用程序。

开放式附件格式是否支持此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:06:03.233

是的，请用google play搜索FT311D/Passiontech，有一个apk，顺便说一下是FT311D UART的，GPIO版本，很快就会发布。

# python - 如何使用 Matplotlib 可视化连接矩阵？

> ID：13609705
> 
> 赞同：6
> 
> 时间：2012-11-28T16:24:24.650
> 
> 标签：python, graph, matplotlib, visualization

我正在尝试可视化一个二分集问题的连接矩阵。我如何以最好的方式做到这一点？

我已经开始使用图形程序 yed：

![例子](../Images/1df6c8aa990a34119747e11d1dfc9757.png)

圆圈描述了红色和蓝色之间的某种联系，而正方形则描述了另一种联系。红色和蓝色方块上都会有某种文字。

但是，使用 matplotlib 生成这个图形会更好，因为我想在附加数据的情况下动态生成这个图形。我将如何继续这样做？我的数据看起来有点像这样：

数据：

```
name_blue name_red Connection Type
bluepart1 redpart1 1
bluepart1 redpart2 1
bluepart1 redpart3 1
bluepart3 redpart2 2 
bluepart4 redpart2 2
... 
```

等等。我想将名牌写在蓝色/红色方块上，以便用户知道哪个是哪个。

后续问题：如何从中生成一个图表，其中节点部分标记为蓝色/红色？有点像这样：

![图例](../Images/b26cc0a9ee22619aa0b8df9a1a1916e2.png)

但是节点反映了它们的二分性。我对此仍然有些摸不着头脑，主要是因为我不知道如何用 matplotlib 解决这个问题。我希望对如何可视化这一点提出一些好的建议，也许还有一个示例实现可以向我展示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T19:20:22.890

尝试使用[networkx](http://networkx.lanl.gov/)。您可以使用它在节点和链接上显示具有特定颜色的图形以匹配您的数据。

这是一个例子：

```
import itertools
import networkx as nx
import matplotlib.pyplot as plt
edgelist = [(u,v,(u+v)%2) for u,v in itertools.product(range(3),range(3,6))]
G = nx.Graph()
for u,v,t in edgelist:
    G.add_edge(u,v,attr_dict={'t':t})
ecolors = tuple('g' if G[u][v]['t'] == 1 else 'm' for u,v in G.edges())
nx.draw_networkx(G,node_color='rrrccc',edge_color=ecolors)
plt.show() 
```

![简单示例](../Images/21f17538a9449d56a03e735e764caaef.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T19:52:23.570

这是另一个 NetworkX/Matplotlib 的想法

```
import random
import networkx as nx
from networkx.algorithms.bipartite import biadjacency_matrix
import matplotlib.pyplot as plt
# generate random bipartite graph, part 1: nodes 0-9, part 2: nodes 10-29
B = nx.bipartite_random_graph(10,20,0.25)
# add some random weights
for u,v in B.edges():
    B[u][v]['weight']=random.randint(0,4)

# spring graphy layout
plt.figure(1)
pos = nx.spring_layout(B)
colors = [d['weight'] for (u,v,d) in B.edges(data=True)]
nx.draw(B,pos,node_color='#A0CBE2',edge_color=colors,width=4,edge_cmap=plt.cm.Blues,with_labels=False)
plt.savefig('one.png')

# simple bipartite layout
plt.figure(2)
pos = {}
for n in range(10):
    pos[n]=(n*2,1)
for n in range(10,30):
    pos[n]=(n-10,0)
nx.draw(B,pos,node_color='#A0CBE2',edge_color=colors,width=4,edge_cmap=plt.cm.Blues,with_labels=False)
plt.savefig('two.png')

# biadjacency matrix colormap
M = biadjacency_matrix(B,row_order=range(10),column_order=range(10,30))
plt.matshow(M,cmap=plt.cm.Blues)
plt.savefig('three.png')
plt.show() 
```

![在此处输入图像描述](../Images/9576a2b65b11d3ecb3e955f4341bd9d0.png)

![在此处输入图像描述](../Images/2a68b775a2d17e82333e5ed7c0bb9188.png)

![在此处输入图像描述](../Images/025e48b262d9e8c528bc9d8d8f104cbf.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:02:52.717

用这样的颜色边缘进行二分表示怎么样？

![具有不同类型连接的二部图](../Images/02184ae1641ade83d05d61280f1f911c.png)

以下是生成图像的代码。

```
import matplotlib.pyplot as plt

def addconnection(i,j,c):
  return [((-1,1),(i-1,j-1),c)]

def drawnodes(s,i):
  global ax
  if(i==1):
    color='r'
    posx=1
  else:
    color='b'
    posx=-1

  posy=0
  for n in s:
    plt.gca().add_patch( plt.Circle((posx,posy),radius=0.05,fc=color))
    if posx==1:
      ax.annotate(n,xy=(posx,posy+0.1))
    else:
      ax.annotate(n,xy=(posx-len(n)*0.1,posy+0.1))
    posy+=1

ax=plt.figure().add_subplot(111)
set1=['Man1','Man2','Man3','Man4']
set2=['Woman1','Woman2','Woman3','Woman4','Woman5']
plt.axis([-2,2,-1,max(len(set1),len(set2))+1])
frame=plt.gca()
frame.axes.get_xaxis().set_ticks([])
frame.axes.get_yaxis().set_ticks([])

drawnodes(set1,1)
drawnodes(set2,2)

connections=[]
connections+=addconnection(1,2,'g')
connections+=addconnection(1,3,'y')
connections+=addconnection(1,4,'g')
connections+=addconnection(2,1,'g')
connections+=addconnection(4,1,'y')
connections+=addconnection(4,3,'g')
connections+=addconnection(5,4,'y')

for c in connections:
  plt.plot(c[0],c[1],c[2])

plt.show() 
```

得到像你在 yEd 中画的东西

![连接矩阵](../Images/13773669a9639b065cd2c340d5b03d7c.png)

```
import matplotlib.pyplot as plt

COLOR1='r'
COLOR2='b'

def addconnection(i,j,c):
  if(c==1):
    plt.gca().add_patch( plt.Rectangle((j-0.1,-i-0.1),0.2,0.2,fc='y'))
  if(c==2):
    plt.gca().add_patch( plt.Circle((j,-i),radius=0.1,fc='y'))

def drawnodes(s,i):
  global ax
  if(i==1):
    color=COLOR1
    vx=1
    vy=0
  else:
    color=COLOR2
    vx=0
    vy=1

  step=1
  for n in s:
    posx=step*vx
    posy=step*vy

    plt.gca().add_patch( plt.Circle((posx,-posy),radius=0.1,fc=color))
    ax.annotate(n,xy=(posx-len(n)*0.1,-posy+0.15))
    step+=1

f=open('input.txt')
t=f.readlines()
t=map(lambda x: x.replace('(',' ').replace(')',' ').split(':'),t)

set1=set([])
set2=set([])

for x in t:
  s=x[1].split()
  set1.add(s[0])
  set2.add(s[1])

set1=list(set1)
set2=list(set2)

dic={}
for e in zip(set1,xrange(1,len(set1)+1)): dic[(e[0],1)]=e[1]
for e in zip(set2,xrange(1,len(set2)+1)): dic[(e[0],2)]=e[1]

ax=plt.figure(figsize=(max(len(set1),len(set2))+1,max(len(set1),len(set2))+1)).add_subplot(111)
plt.axis([-1,max(len(set1),len(set2))+1,-max(len(set1),len(set2))-1,1])
frame=plt.gca()
frame.axes.get_xaxis().set_ticks([])
frame.axes.get_yaxis().set_ticks([])

drawnodes(set1,1)
drawnodes(set2,2)

for x in t:
  s=x[1].split()
  addconnection(dic[(s[0],1)],dic[(s[1],2)],int(x[2]))

plt.show() 
```

# python - 来自数据库和 Admin-Frontend 的统计数据之间的区别

> ID：13609714
> 
> 赞同：0
> 
> 时间：2012-11-28T16:24:43.453
> 
> 标签：python, mysql, openx

我是分布式 OpenX-Setup（4 Delivery-，1 DB-Server）的产品经理。我正在尝试编写自己的 python 脚本来生成报告。

当我连接到数据库并查询某一天的数据时，结果与管理前端的统计视图略有不同。收入即相差0.5%。

SQL查询：

```
SELECT data_summary_ad_hourly_id, date_time, ad_id, zone_id, requests, impressions, 
       clicks, conversions, total_revenue
FROM ox_data_summary_ad_hourly
WHERE date(date_time) = '2012-11-21'
ORDER BY ad_id, zone_id DESC 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:54:17.267

我找到了原因，OpenX-admin-frontend 和 db-query 之间的数字略有偏差：

OpenX-Server 和我用来查询数据库的计算机之间的时**区不同。**所以这一个小时（在我的情况下）让数字略有不同。

因此，要么更改 OpenX 安装的时区，要么在 db-query 中考虑这一点。

希望我能帮上忙。

# asp.net - 将 ASP.Net System.Net.Mail 设置移动到 Web.config

> ID：13609717
> 
> 赞同：4
> 
> 时间：2012-11-28T16:24:55.010
> 
> 标签：asp.net, vb.net, email, web-config, settings

我们正在使用此编码从 ASP.Net 代码隐藏 Vb.Net 文件发送电子邮件。

这些编码中的任何一个都可以放在 Web.config 文件中吗？

```
Protected Sub EmailStudentList()

    ' Get the rendered HTML.
    '-----------------------
    Dim SB As New StringBuilder()
    Dim SW As New StringWriter(SB)
    Dim htmlTW As New HtmlTextWriter(SW)

    GridViewSummary.RenderControl(htmlTW)

    ' Get the HTML into a string.
    ' This will be used in the body of the email report.
    '---------------------------------------------------
    Dim dataGridHTML As String = SB.ToString()

    Dim SmtpServer As New SmtpClient()
    SmtpServer.Credentials = New Net.NetworkCredential("ourEmailUsername@gmail.com", "ourPassword")
    SmtpServer.Port = 587
    SmtpServer.Host = "smtp.gmail.com"
    SmtpServer.EnableSsl = True

    ObjMailMessage = New MailMessage()

    Try
        ObjMailMessage.From = New MailAddress("ourEmail@gmail.com", "Some text is here.", System.Text.Encoding.UTF8)
        ObjMailMessage.To.Add(New MailAddress("BoardOfDirectors@gmail.com", "Emad-ud-deen", System.Text.Encoding.UTF8))
        ObjMailMessage.Subject = "List of enrolled students for the board of directors"
        ObjMailMessage.Body = dataGridHTML
        ObjMailMessage.IsBodyHtml = True
        ObjMailMessage.DeliveryNotificationOptions = DeliveryNotificationOptions.OnFailure

        SmtpServer.Send(ObjMailMessage)

    Catch ex As Exception
        MsgBox(ex.ToString())
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T16:39:09.617

```
 <system.net>
    <mailSettings>
      <smtp from="ourEmail@gmail.com">
        <network defaultCredentials="false" 
             userName="ourEmailUsername@gmail.com" 
             password="ourPassword" 
             host="smtp.gmail.com" 
             enableSsl="true" 
             port="587"/>
      </smtp>
    </mailSettings>
  </system.net> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:40:52.757

您不能在配置文件中放置“代码”，但可以移动一些设置。

[http://msdn.microsoft.com/en-us/library/w355a94k.aspx](http://msdn.microsoft.com/en-us/library/w355a94k.aspx)

```
<configuration>
  <system.net>
    <mailSettings>
      <smtp deliveryMethod="network">
        <network
          host="localhost"
          port="25"
          defaultCredentials="true"
        />
      </smtp>
    </mailSettings>
  </system.net>
</configuration> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T16:43:25.287

我已将其中一些项目放在 web.config` 中。

```
<system.net>
    <mailSettings>
        <smtp>
            <network host="<<Host IP Address>>" port="<<Host Port Number>>" userName="" password=""/>
        </smtp>
    </mailSettings>
    <defaultProxy useDefaultCredentials="false">
        <proxy bypassonlocal="true" usesystemdefault="false"/>
    </defaultProxy>
</system.net> 
```

以下链接也可能有所帮助：

[元素（网络设置）](http://msdn.microsoft.com/en-us/library/vstudio/w355a94k%28v=vs.90%29.aspx)

# c# - 绑定文本块前景色不起作用

> ID：13609720
> 
> 赞同：2
> 
> 时间：2012-11-28T16:25:01.100
> 
> 标签：c#, xaml

xml代码：

```
<ControlTemplate x:Key="ChkTemplate"
                         TargetType="ListViewItem">
            <StackPanel Orientation="Horizontal">                    
                <CheckBox Margin="0,0,3,0">
                    <CheckBox.IsChecked>
                        <Binding Path="IsSelected"
                                 Mode="TwoWay">
                            <Binding.RelativeSource>
                                <RelativeSource Mode="TemplatedParent" />
                            </Binding.RelativeSource>
                        </Binding>                                
                    </CheckBox.IsChecked>
                </CheckBox>                    
                <ContentPresenter />                    
            </StackPanel>
        </ControlTemplate>                    
<DataTemplate DataType="{x:Type ABC:Info}">
    <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding}"
          Margin="0,0,10,5" Foreground="Green"/>
        <TextBlock Text="{Binding Channel}"
           Margin="3,0,0,0"
           Visibility="{Binding Path=Visible,ElementName=View, Converter={StaticResource BooleanConverter}}" />
        <TextBlock.Foreground>
            <SolidColorBrush Color="{Binding Foreground}" />
        </TextBlock.Foreground>                   
    </StackPanel>
</DataTemplate>   
<Style TargetType="ListViewItem"
               x:Key="SelectedItem">
            <Setter Property="Template"
                    Value="{StaticResource ChkTemplate}" />
</Style> 
```

班级：

```
public class Info : DependencyObject
    {      
           public Brush Foreground
        {
            get { return (Brush)GetValue(ForegroundProperty); }
            set { SetValue(ForegroundProperty, value); }
        }
    } 
```

xml.cs：

```
private readonly RangeObservableCollection<Info> _validInfo;

Info.Foreground = Brushes.Red;                                        
_validInfo.Add(Info); 
```

上面的代码没有改变文本块的前景色我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T07:35:45.613

我尝试了您的代码并为我工作。您可以发布您的数据模板生效的代码吗？我用一个列表框来做。

编辑

```
public partial class MainWindow : Window
{
    private ObservableCollection<Info> _source;
    public MainWindow()
    {
        this.MySource = new ObservableCollection<Info>();
        InitializeComponent();
        this.DataContext = this;

        this.MySource.Add(new Info(){Foreground = Brushes.Red});
    }

    public ObservableCollection<Info> MySource
    {
        get { return _source; }
        set { _source = value; }
    }
}

public class Info : DependencyObject
{

    public static readonly DependencyProperty ForegroundProperty = DependencyProperty.Register("Foreground", typeof(Brush), typeof(Info));

    public Brush Foreground
    {
        get { return (Brush)GetValue(ForegroundProperty); }
        set { SetValue(ForegroundProperty, value); }
    }

} 
```

xml

```
<Grid>
    <Grid.Resources>
        <DataTemplate DataType="{x:Type TestForeground:Info}">
            <TextBlock Text="{Binding}" Foreground="{Binding Foreground}"/>
        </DataTemplate>
    </Grid.Resources>
    <ListBox ItemsSource="{Binding MySource}">

    </ListBox>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:45:48.580

首先，对于任何未来的问题，我一定会提供一个“完整”的例子——你粘贴的代码需要一些修改才能运行。

也就是说，那里有许多拼写错误可能会导致问题 - 以下稍微清理过的代码可以正确绑定：

XAML：

```
<Window x:Class="WpfApplication1.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:WpfApplication1="clr-namespace:WpfApplication1" 
        Title="Window1" Height="300" Width="300">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanConverter"/>
        <ControlTemplate x:Key="ChkTemplate"
                         TargetType="ListViewItem">
            <StackPanel Orientation="Horizontal">
                <CheckBox Margin="0,0,3,0" 
                                IsChecked="{TemplateBinding IsSelected}"/>
                <ContentPresenter />
            </StackPanel>
        </ControlTemplate>
        <DataTemplate DataType="{x:Type WpfApplication1:Info}">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding}" 
                                Margin="0,0,10,5" 
                                Foreground="Green"/>
                <TextBlock 
                    Text="{Binding Channel}" 
                    Margin="3,0,0,0" 
                    Visibility="{Binding Path=Visible, Converter={StaticResource BooleanConverter}}"
                    Foreground="{Binding Foreground}"/>
            </StackPanel>
        </DataTemplate>
        <Style TargetType="ListViewItem" x:Key="{x:Type ListViewItem}">
            <Setter Property="Template" Value="{StaticResource ChkTemplate}" />
        </Style>
    </Window.Resources>
    <Grid>
        <ListView ItemsSource="{Binding Infos}">
        </ListView>
    </Grid>
</Window> 
```

代码：

```
namespace WpfApplication1
{
    using System.Collections.ObjectModel;

    /// <summary>
    /// Interaction logic for Window1.xaml
    /// </summary>
    public partial class Window1 : Window
    {
        private readonly ObservableCollection<Info> _validInfo;

        public Window1()
        {
            _validInfo = new ObservableCollection<Info>();
            InitializeComponent();
            this.DataContext = this;
            var info = new Info();
            info.Foreground = Brushes.Red;
            info.Visible = true;
            info.Channel = "not sure";
            _validInfo.Add(info);
            info = new Info();
            info.Foreground = Brushes.Blue;
            info.Visible = true;
            info.Channel = "also not sure";
            _validInfo.Add(info);

        }

        public ObservableCollection<Info> Infos { get { return _validInfo; } }
    }

    public class Info : DependencyObject
    {
        public Brush Foreground
        {
            get { return (Brush)GetValue(TextBlock.ForegroundProperty); }
            set { SetValue(TextBlock.ForegroundProperty, value); }
        }

        public bool Visible { get; set; }
        public string Channel { get; set; }

        public override string ToString()
        {
            return string.Format("{0}-{1}-{2}", Channel, Foreground, Visible);
        }
    }
} 
```

# ejb - RAD 8.5 无法运行调用 EJB 和 MQ 的独立 Java 应用程序

> ID：13609728
> 
> 赞同：1
> 
> 时间：2012-11-28T16:25:31.193
> 
> 标签：ejb, jndi, rad

我曾经能够在 RAD 7.5.5 上使用 JNDI 运行调用 EJB 和 MQ 的独立 Java 应用程序。我升级到 RAD 8.5，当我尝试运行它时，我收到了错误`Failed to create InitialContext using factory specified in hashtable`。我还在为两个 RAD 版本使用相同的 WAS 7.0.0.9，所以我不确定为什么它现在不起作用。

在 RAD 8.5 中我需要做什么特别的事情吗？这是我的引导类路径条目：`WAS v7.0 JRE`, `%WAS_RUNTIME%\com.ibm.ws.ejb.thinclient_7.0.0.jar`, `WAS v7.0 lib`.

以下是我设置环境的行（RAD 8.5 似乎需要第二行）：

```
System.setProperty(Context.PROVIDER_URL, "iiop://localhost:2809");
System.setProperty("com.ibm.ws.naming.wsn.factory.initial", "com.ibm.websphere.naming.WsnInitialContextFactory"); 
```

下面是我的代码中的堆栈跟踪：

```
2012-11-30 16:50:14,945 main FATAL ram.hs.edi.EDIDaemon(line 183) - Unable to get running status: javax.naming.NoInitialContextException: Failed to create InitialContext using factory specified in hashtable. Root exception is java.lang.NullPointerException
at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:243)
at javax.naming.InitialContext.initializeDefaultInitCtx(InitialContext.java:327)
at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:357)
at javax.naming.InitialContext.internalInit(InitialContext.java:295)
at javax.naming.InitialContext.<init>(InitialContext.java:212)
at ram.hs.edi.utils.MQReader.open(MQReader.java:85)
at ram.hs.edi.EDIDaemon.isRunning(EDIDaemon.java:406)
at ram.hs.edi.EDIDaemon.run(EDIDaemon.java:168)
at ram.hs.edi.EDIDaemon.main(EDIDaemon.java:898)
Caused by: java.lang.NullPointerException
at com.ibm.ws.naming.util.CommonHelpers$2.run(CommonHelpers.java:268)
at com.ibm.ws.naming.util.CommonHelpers$2.run(CommonHelpers.java:264)
at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:63)
at com.ibm.ws.naming.util.CommonHelpers.mergeJndiProviderProperties(CommonHelpers.java:263)
at com.ibm.ws.naming.util.CommonHelpers.mergeWsnJndiProperties(CommonHelpers.java:159)
at com.ibm.websphere.naming.WsnInitialContextFactory.getInitialContext(WsnInitialContextFactory.java:186)
at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:235)
... 8 more 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T14:08:40.850

回答这个问题可能有点晚，但请尝试执行以下操作： 1) 在独立 Java 类的引导路径中添加 jar“com.ibm.ws.orb_7.0.0.jar”或等效 jar。2) 在 JVM 类路径上添加 jar“com.ibm.ws.webservices.thinclient_7.0.0”或等效 jar。

完成上述操作后，我能够成功获取 InitalContext。希望这可以帮助。

# python - 与循环引用相比，超出了最大递归深度

> ID：13609733
> 
> 赞同：2
> 
> 时间：2012-11-28T16:25:55.187
> 
> 标签：python, recursion, comparison

我正在和学生一起创建一个有限状态机的简单演示：

```
s2 = {}
s1 = {}
s1["0"] = s2
s1["1"] = s1
s2["0"] = s1
s2["1"] = s2
machine = {"start": s1, "accepting": [s1]}

def recognize(fsm, in_string):
    return do_recognize(fsm, fsm["start"], in_string)

def do_recognize(fsm, current, in_string):
    if len(in_string) == 0:
        return current in fsm["accepting"]

   return do_recognize(fsm, current[in_string[0]] ,
                 in_string[1:])

print (recognize(machine, "0")) 
```

这台机器可以识别偶数个 0 的字符串，并且它可以很好地处理“好”字符串（例如“1”或“010”）。但是在上面这样的“坏”字符串上，它会进入无限循环，然后在 fsm[“accepting”] 中的返回电流处堆栈溢出。

我能够确定问题在于两种状态的比较。事实上，我可以通过编写 s1 == s2 来生成完全相同的错误。但是 s1 == s1 （一个好的状态）工作正常。

我对正在发生的事情的最佳猜测是，它正在进行深度比较并试图遵循 s2 中的所有引用，这些引用是循环的。但为什么它是不对称的（即为什么 s1 == s1 没有同样的问题）？我该如何避免呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:35:18.687

问题与`s1`和之间的循环引用有关`s2`。

这使得无法进行比较`s1`（`s2`就目前`cmp()`而言，这两个字典具有无限的深度）。考虑以下：

```
print s1 == s1 # immediately returns True, probably due to equal object ids
print s1 == s2 # RuntimeError: maximum recursion depth exceeded in cmp 
```

这解释了为什么`s1 in fsm["accepting"]`工作和`s2 in fsm["accepting"]`休息。

解决此问题的一种简单方法是更换

```
return current in fsm["accepting"] 
```

和

```
return id(current) in map(id, fsm["accepting"]) 
```

这会按身份比较状态，而不是尝试按值比较两个无限深的字典。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:49:47.887

比较字典时，还会比较字典中的每个项目（键/值对），因此如果**在循环引用涉及相同键的**字典之间存在循环引用，则在比较它们时会出现此最大递归深度超出错误：

例如，如果您有`s1 == {'0': s2}`and `s2 == {'0': s1}`，那么尝试`s1 == s2`将导致以下比较，这说明了递归是如何发生的：

```
s1 == s2 --> s1['0'] == s2['0'] --> s2 == s1 --> s2['0'] == s1['0'] --> s1 == s2 --> ... 
```

类似`s1 in [s2]`or的包含测试`s2 in [s1]`也会导致这种相等比较，这就是它发生在您的代码中的原因`current in fsm["accepting"]`。

您可以通过使用身份比较而不是相等比较来解决此递归问题，只需替换`current in fsm["accepting"]`为以下内容：

```
any(s is current for s in fsm["accepting"]) 
```

A better solution might be to not use circular references by having the states refer to an identifier instead of the object itself, for example you could have a structure like the following:

```
states = {"s1": {"0": "s2", "1": "s1"},
          "s2": {"0": "s1", "1": "s2"}}
machine = {"start": "s1", "accepting": ["s1"]}

def recognize(fsm, in_string):
    return do_recognize(fsm, fsm["start"], in_string)

def do_recognize(fsm, current, in_string):
    if len(in_string) == 0:
        return current in fsm["accepting"]
    return do_recognize(fsm, states[current][in_string[0]], in_string[1:]) 
```

# c - 定义复数变量时出错

> ID：13609734
> 
> 赞同：1
> 
> 时间：2012-11-28T16:25:57.837
> 
> 标签：c, complex-numbers

> **可能重复：**
> [如何在 C 中处理复数？](https://stackoverflow.com/questions/6418807/how-to-work-with-complex-numbers-in-c)

所以我有这段 C 代码编译错误，说“复杂”没有命名类型：

```
#include <stdio.h>
#include <complex.h>
#include <math.h>

int main ()
{
    int B=9;
    double theta;

    double complex w;
    float x,y;

    x= 5*cos (theta) - 2;
    y= 5*sin (theta);

    double complex z=x+y*I;
    w=z+(B/z);

    for(theta=0;theta<=360;theta=+30)
    { printf ("%.2f  %.2f  %.2f  %.2f",creal(z), cimag(z),y,creal(w), cimag(w));
        printf ("/n");
    } 

    return 0;

    system ("pause");
} 
```

我已经包括了`<complex.h>`为什么“复杂”仍然存在错误。还有其他错误，但让我们先关注这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:29:24.187

您是否使用 GCC 作为编译器？如果是，您需要使用`-std=c99`or`-std=gnu99`编译器标志来启用 C99 支持。

此外，在使用变量*之前声明它们。*这里：

```
double complex z=x+y*I; 
```

既没有`x`也`y`没有被宣布。当然，您还需要初始化它们。例如：

```
float x = 5 * cos(theta) - 2;
float y = 5 * sin(theta);
double complex z = x + y * I; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:35:13.320

这应该工作：

```
#include <stdio.h>
#include <complex.h>
#include <math.h>
int main ()

{
 int B=9;
 double theta;
 double complex w;
 float x = 5*cos (theta) - 2;
 float y = 5*sin (theta);
 double complex z=x+y*I;

 w=z+(B/z);

 for(theta=0;theta<=360;theta=+30)
  { printf ("%.2f  %.2f  %.2f  %.2f",creal(z), cimag(z),y,creal(w), cimag(w));
   printf ("/n");
  } 

  return 0;
 } 
```

# vim - 如何在当前行之后加入上面的行？

> ID：13609736
> 
> 赞同：8
> 
> 时间：2012-11-28T16:26:00.277
> 
> 标签：vim, join, lines

我知道 Vim 中的这些命令：

> J：在当前行之后加入下一行
> -J：在上一行之后加入当前行

但是如何在当前行之后加入上面的行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-16T10:43:00.110

您也可以使用前命令

```
:m-2|j 
```

*   `m-2`具有将当前行移动到其当前位置上方 2 行的效果；这将切换当前行和上一行的位置。
*   `j`连接当前行和上面的行，在两者之间插入一个空格。`j!`如果您不想要空间，请使用。
*   `|`将 2 个前命令分开

此前命令是编写以下内容的简短方式

```
:move .-2
:join 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:37:54.823

有很多方法可以做到这一点。一种是......删除上面的行并将其附加到下面的行的末尾：

```
k move up one line
^ move to the first printable character
y$ yank to the end of the line
"_d get rid of the now useless line by deleting it into the black hole register
$ move to the end of the line
p put the deleted text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-09T12:10:16.550

我将以下行添加到我的 .vimrc 中。现在，在正常模式下，我可以按@j 或<leader>j。对我来说领导者是空间。我还看到人们将其设置为 ,。

```
" join with previous line with @j
let @j="kJ"
nnoremap <leader>j @j 
```

如果您还没有设置领导者，您可以将其设置为空格，如下所示：

```
let mapleader = " "
let g:mapleader = " " 
```

# php - 在类内查询MYSQL

> ID：13609741
> 
> 赞同：0
> 
> 时间：2012-11-28T16:26:06.890
> 
> 标签：php, mysql, oop, mysqli

我有一个购物篮类，想在其中查询我的数据库，但无法理解它。

我只想在构造时连接到数据库并在破坏时关闭连接。

当然，我不需要为我在课堂上调用的每个查询建立新的连接吗？

另外我更喜欢使用 mysqli

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:28:19.910

您最好的选择可能是将数据库连接或数据库抽象对象传递给您的构造函数（依赖注入），而不用担心尝试将数据库实例化逻辑添加到您的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:42:49.610

只是你可以做的一个简单的例子：

```
class ShoppingBasket{

    protected $db = null;

    public function __construct($db){
        $this->db = $db;
    }

    public function getBasketItems(){
        return $this->db->query("SELECT id, name, price FROM shopping_basket");
    }

}

$db = new PDO($dsn, $user, $password);
$shoppingBasket = new ShoppingBasket($db);
$items = $shoppingBasket->getBasketItems(); 
```

# flyway - 使用 Flyway 实现“特定于数据库”的 sql 脚本的最佳方式

> ID：13609742
> 
> 赞同：31
> 
> 时间：2012-11-28T16:26:06.760
> 
> 标签：flyway

我开始`Flyway`在我当前的项目中使用数据库迁移，我非常喜欢它。我目前在 PROD 中使用 Oracle，在 TEST 环境中使用 Derby。

很快，我确实遇到了数据库特定 sql 命令的问题，例如

*   `ALTER TABLE T1 MODIFY F1 VARCHAR(256);`在甲骨文与
*   `ALTER TABLE T1 ALTER F1 SET DATA TYPE VARCHAR(256);`在德比上。

我看不到编写“供应商中立的更改表修改列数据类型”sql 的方法。

使用 Flyway 处理此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-29T08:16:41.253

您可以使用 flyway.locations 属性。

在测试中看起来像这样：

```
flyway.locations=sql/common,sql/derby 
```

并在产品中：

```
flyway.locations=sql/common,sql/oracle 
```

然后，您可以在特定于 db 的位置中拥有特定于 DB 的语句 (V2__Alter_table.sql) 的通用和不同副本中的通用语句 (V1__Create_table.sql)。

在我看来，更好的解决方案是在产品和测试中使用相同的数据库。是的，您确实损失了一些性能，但另一方面，您也消除了环境之间的另一个差异（和潜在的错误来源）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T21:56:26.907

Oracle 和其中一些桌面数据库之间的 SQL 差异很小。开发人员是否可以根据环境插入自定义代码以在运行时对 SQL 进行一些轻量级的动态剥离（例如删除表空间指定）？

我更喜欢这种依赖每个开发人员手动保持两组 SQL 同步的方法。

# delphi - 我可以在不退出应用程序的情况下让自定义函数在 Delphi 中停止 Lua 脚本吗？

> ID：13609746
> 
> 赞同：3
> 
> 时间：2012-11-28T16:26:14.973
> 
> 标签：delphi, lua

我有一个定期运行 Lua 脚本的应用程序。在脚本中，有时我创建了一个自定义注册的 Lua 函数来检查一些参数并决定 Lua 脚本应该继续还是退出。理想情况下，逻辑不应该是脚本的一部分，我可以考虑使用 Lua 脚本来解决这个问题，但我想知道是否可以在不结束应用程序的情况下停止 Lua 脚本的执行。

我有一个用 Delphi 编写的自定义函数，并使用 Lua 5.1 暴露给 Lua 脚本。Lua 脚本如下所示，Lua 中的脚本使用`luaL_loadbuffer`.

```
io.write("Script starting\n");
--Custom Function
ExitIfFound();
io.write("Script continuing\n"); 
```

我的自定义函数看起来像这样，下面我提供了我尝试`lua_error`用来停止脚本的尝试之一......

```
function ExitIfFound(LuaState: TLuaState): Integer;
var
  s: AnsiString;
begin
  s := 'ExitIfFound ending script, next Lua script line not called';
  lua_pushstring(LuaState, PAnsiString(s));
  lua_error(LuaState);
end; 
```

当我的自定义函数被调用时，我不确定如何在没有任何进一步评估的情况下退出 Lua 脚本。我看过一些关于 Lua 和在 C 中使用`setjmp`and的帖子`longjmp`，但我很好奇这些如何翻译 Delphi。

在上面的示例中，当我使用 时`lua_error`，整个程序在 Windows 执行其典型操作时崩溃，`[luarun.exe has stopped working]`...

有了这一切，我对将 Lua 集成到 Delphi 还是很陌生，希望我能找到一些更清洁的选择来探索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:12:48.803

没有完全中止 Lua 脚本的干净方法。该`lua_error`函数是发出错误信号的正确方法。调用者有责任捕获错误并将其传播给下一个调用者。

如果你不能依赖调用者配合，那么你可以*尝试通过*[安装调试钩子](https://stackoverflow.com/a/866270/33732)来施加更多的控制。然后在继续运行脚本之前会咨询宿主程序。但是，[脚本仍然可以通过使用`pcall`to catch any errors 来](https://stackoverflow.com/a/9136034/33732)避免退出。

您的程序中的崩溃可能不仅仅是因为设置了错误。相反，这可能是由于在您的`ExitIfFound`函数上使用了错误的调用约定。它需要是cdecl，但Delphi的默认，如果你不指定其他任何东西，是注册。使用错误的调用约定会给您带来不可预测的参数值，并可能导致堆栈损坏。如果您在`@`调用时对函数进行了类型转换或使用了运算符`lua_register`，那么您可能已经从编译器的类型检查器中隐藏了调用约定不匹配，否则会在编译时提醒您该问题。

当编译为 C++ 时，`lua_error`将使用异常而不是`longjmp`，但无论哪种方式，调用者总是会捕获错误。但是，当您的 Delphi 代码使用编译器管理的类型（如`string`）或异常敏感的结构（如`try`-`finally`块）时，异常很重要。在 C 模式下，`lua_error`调用`longjmp`直接跳转到由先前调用设置的航路点`setjmp`。该跳转将跳过任何异常处理程序，例如 Delphi 编译器设置的异常处理程序，以确保`finally`块运行并清理字符串。

更令人头疼的是，由于编译器在退出函数时会清理字符串，因此您放在 Lua 堆栈上的指针可能在使用时无效；这取决于是否`lua_pushstring`复制其论点。

# monodevelop - 在 OS X 上构建 MonoDevelop + MonoMac

> ID：13609750
> 
> 赞同：1
> 
> 时间：2012-11-28T16:26:22.230
> 
> 标签：monodevelop, monomac

我正在按照此处的说明在 Mac OS X 上[构建 MonoDevelop：在 OS X 上构建 MonoDevelop](http://monodevelop.com/Developers/Mac_Support/Building_MonoDevelop_on_OS_X)

我可以很好地构建 MonoDevelop。我还想构建 MonoMac 插件并使用它。

文件说：

> “要包含来自额外的插件，手动将它们的构建目录复制到 MonoDevelop.app 目录中，例如
> 
> cp -r ../../../extras/MonoDevelop.AspNet.Mvc/build/* MonoDevelop.app/Contents/MacOS/lib/monodevelop/AddIns/MonoDevelop.AspNet.Mvc/"

但是，我在 /extras/MonoDevelop.MonoMac 下没有构建目录。

我尝试按照此步骤构建附加功能：

> “要在构建中包含额外的附加插件，而不是使用 Mac 配置文件，请使用 configure --select 来选择插件。这将写入默认配置文件。接下来，将配置文件/默认中以“main”开头的行替换为来自profiles/mac的那个，然后使用默认配置文件再次运行configure。”

但它并没有给我额外构建 MonoMac 的选项。

接下来，我尝试编译 monodevelop.mdw。同样，我可以构建主要解决方案（MonoDevelop），但附加功能失败并出现超过 1000 个错误。

最后，我尝试使用我现有的 monomac 和 macdev 插件并将它们复制到我的主 monodevelop.app 包中。但这会在我尝试选择 MonoMac 项目时中断添加解决方案/项目对话框 - 它无法加载 Monodevelop.ide DLL。

任何关于我哪里出错的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:25:40.030

我无法按照 MonoDevelop 网站上的说明完成这项工作。即使手动将 extras/MonoDevelop.MonoMac extra 添加到配置文件也不起作用。

最后，我使用 mac 配置文件从源代码构建 MonoDevelop。

然后我得到了最新的 MonoMac 部件，并从源代码构建它们。我用了

> 进行更新

安装到我*安装*的 MonoDevelop 副本中。

然后，我手动将以下包从我安装的 MonoDevelop 复制到我从 master 新编译的版本：

*   MacPlatform.dll
*   MonoDevelop.iPhone
*   MonoDevelop.MacDev
*   MonoDevelop.MonoMac
*   Xamarin.IDE

现在一切正常：）

# javascript - 如何替换选项标签值属性中的值

> ID：13609754
> 
> 赞同：-1
> 
> 时间：2012-11-28T16:26:24.560
> 
> 标签：javascript, jquery, css

我有以下情况。实际上，通过渲染html下拉框后的过程显示如下值

```
 <select id="ht" class="input-box quick-jump-menu" name="ht">
<option selected="selected" value="">Jump straight to a below option</option>

<option value="<span id="_SE_CP" _SE_CPt="default"><a href="Google.co.uk"  alt="Lakeside" target="_self" class="">Lakeside</a></span>">
       Lakeside
</option>

<option value="<span id="_SE_CP" _SE_CPt="default"><a href="http://www.google.com" alt="Alvaston Hall" target="_self" class=""></a></span>">
       Alvaston
</option> 
```

通过某些过程，它在那里使用了一些 span 标签，我只需要 value 属性中的 url，如下所示

```
 <select id="ht" class="input-box quick-jump-menu" name="ht">
<option selected="selected" value="">Jump straight to a below option</option>

<option value="Google.co.uk">
       Lakeside
</option>

<option value="http://www.google.com">
       Alvaston
</option> 
```

在这里，我只需要在“option”标签的“Value”属性中设置 URL 值。我认为这可以通过 jquery 来完成。

如果可能，请建议任何人，我们将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:32:56.173

如果您正在呈现这样的选项标签并且您想在客户端更改它，这是一个快速但肮脏的解决方案：

```
$("#ht option").each(function(){
    $(this).attr("value", $($(this).attr("value")).find("a").attr("href"));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:51:34.680

```
​var tempDiv=$('<div/>');
$('#ht option').each(function(){
    tempDiv.html($(this).val());
    $(this).val(​​​​​​​​​​​​​​​​​​​​​​​​​​​tempDiv.find('a').attr('href'));
}); 
```

上面的代码使用一个临时的 div（tempDiv）从选项值中捕获 html 并提取 href 值。

演示（选择一个选项）：http: [//jsfiddle.net/A7nyd/](http://jsfiddle.net/A7nyd/)

[更新] 这实际上与@chrisgonzalez 的答案相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T16:41:56.357

首先，当前 HTML 存在错误。值中的所有 html 都有`double quotes.`

把它包在里面`single Quotes`or `escape the ones inside`。

试试这个

```
​$('#ht')​.after('<div id="check"></div>');

​$('#ht option').each(function(){
    if(this.value != ''){
       var $check = $('#check');
       var str = this.value;
       $check.append(str);
       var href = $check.find('a').attr('href');
       this.value = href;
       $check.empty();
    }        
});

$('#check').remove(); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/QaXC3/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T16:33:55.413

使用 jQuery：

```
$('option').attr({value: 'new src'}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T16:36:01.593

试试这个：

```
$("#ht option").each(function()
{
    $(this).val($(this).val().find("a").attr("href"));
}); 
```

# svn - 当我们在 SVN 中进行结帐时，是否有设置顺序

> ID：13609757
> 
> 赞同：1
> 
> 时间：2012-11-28T16:26:34.490
> 
> 标签：svn, svn-checkout

当我们在 SVN 中结帐时，是否有设置顺序，例如先获取中继，获取标签后获取分支后请提前告知您此信息，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:29:01.237

术语`trunk`, `branch`,`tags`在 Subversion 中实际上是没有意义的（尽管一些工具可能会根据常见的目录名称做出假设，例如 'trunk'）。它们都是你的回购中的简单目录。您可以按您希望的任何顺序抓取所有、一个都不或其中的一些。

无论您要达到什么目标，都将决定您放弃其中的哪一个。

# java - 卡在递归 Fork/Join 上

> ID：13609758
> 
> 赞同：3
> 
> 时间：2012-11-28T16:26:36.437
> 
> 标签：java, join, recursion, fork, fork-join

我有一个返回一组点的方法，我确信这个方法的 for 循环部分可以拆分为一个 RecursiveTask，它为每个线程返回一组点。

我已经尝试了很多次，但都失败了。那里有Java天才吗？

我现有的方法：

```
private Set<Point3D> getCordinatesAroundCenterPoint(Point3D point, int width) {
    Set<Point3D> points         =   new LinkedHashSet<>();

    double maxValue             =   width;
    double minValue             =   maxValue * -1;

    double minX                 =   point.getX() + minValue;
    double maxX                 =   point.getX() + maxValue;
    double minY                 =   point.getY() + minValue;
    double maxY                 =   point.getY() + maxValue;
    double minZ                 =   point.getY() + minValue;
    double maxZ                 =   point.getZ() + maxValue;
    double x                    =   point.getX();
    double y                    =   point.getY();
    double z                    =   point.getZ();

    double numberOfPoints       =   Math.pow((double) (maxValue * 2) + 1, Double.parseDouble("3"));     

    for (int i = 1; i <= numberOfPoints; i++) {
        if (x > maxX) {
            x = minX;
            y++;
        }

        if (y > maxY) {
            y = minY;
            z++;
        }

        if (z > maxZ) {
            z = minZ;
        }

        Point3D ppoint =    new Point3D();

        ppoint.setX(x);
        ppoint.setY(y);
        ppoint.setZ(z);

        points.add(ppoint);
        x++;
    }

    return points;
} 
```

更新＃1：

这是我尝试将其拆分为递归任务的尝试，它似乎在范围为 1（应该等于 27 点）-1、0、+1、= 3 点、3 立方 = 27 的情况下工作正常。任何更高的数字范围失败，例如范围为 2 应返回 125 点。-2、-1、0、+1、+2 = 5 分，5 立方 = 125。

主.java：

```
public static void main(String[] args) {

        System.out.println("Enter system extent: ");

        BufferedReader bufferedReader   =   new BufferedReader(new InputStreamReader(System.in));

        try {
            String string                   =   bufferedReader.readLine();
            LinkedHashSet<Point3D> set      =   getStarSystemCordinatesAroundCenterSystem(Integer.parseInt(string));
            System.out.println(set.size() + " systems generated.");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private static LinkedHashSet<Point3D> getStarSystemCordinatesAroundCenterSystem(int extent) {
        ForkJoinPool pool           =   new ForkJoinPool();

        double maxValue             =   extent;
        double minValue             =   maxValue * -1;

        ForkPoints task =   new ForkPoints(minValue, maxValue);

        LinkedHashSet<Point3D> linkedHashSet = (LinkedHashSet<Point3D>) pool.invoke(task);

        return linkedHashSet;
    } 
```

ForkPoints.java：

```
public class ForkPoints extends RecursiveTask<Set<Point3D>> {

    private static final long serialVersionUID = -5450450150370659468L;

    private double minValue;
    private double maxValue;

    static final double SEQUENTIAL_THRESHHOLD = 2;

    public ForkPoints(double minValue, double maxValue) {
        this.minValue   =   minValue;
        this.maxValue   =   maxValue;
    }

    @Override
    protected Set<Point3D> compute() {
        if (maxValue - minValue <= SEQUENTIAL_THRESHHOLD) {
            return computeValue(minValue, maxValue);
        } else {
            double midValue             =   minValue + SEQUENTIAL_THRESHHOLD;
            ForkPoints left             =   new ForkPoints(minValue, midValue);
            ForkPoints right            =   new ForkPoints(midValue, maxValue);
            left.fork();
            Set<Point3D> rightPoints    =   right.compute();
            Set<Point3D> leftPoints     =   left.join();
            leftPoints.addAll(rightPoints);
            return leftPoints;
        }
    }

    private Set<Point3D> computeValue(double minv, double maxv) {

        //Assume starting point of 0,0,0
        double minX                 =   0 + minv;
        double maxX                 =   0 + maxv;
        double minY                 =   0 + minv;
        double maxY                 =   0 + maxv;
        double minZ                 =   0 + minv;
        double maxZ                 =   0 + maxv;
        double x                    =   minv;
        double y                    =   minv;
        double z                    =   minv;

        Set<Point3D> points         =   new LinkedHashSet<>();

        boolean notFinished = true;

        while (notFinished) {
            if (x > maxX) {
                x = minX;
                y++;
            }

            if (y > maxY) {
                y = minY;
                z++;
            }

            if (z > maxZ) {
                z = minZ;
            }

            Point3D ppoint = new Point3D(); 

            ppoint.setX(x);
            ppoint.setY(y);
            ppoint.setZ(z);

            points.add(ppoint);
            if (x == maxX && y == maxY && z == maxZ) {
                notFinished = false;
            }
            x++;
        }

        return points;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T08:38:30.173

这里的主要问题是您试图拆分 3D 对象，但仅在一个方向上拆分。即`ForkPoints.compute()`实际上应该产生的不是 2 个，而是至少 8 个子任务，以防它无法自行执行计算。

下面是它的外观示例 - 对您的代码进行的最小更改：

```
public class ForkPoints extends RecursiveTask<Set<Point3D>> {

    private static final long serialVersionUID = -5450450150370659468L;

    private final Point3D origin;
    private final double radius;

    static final double SEQUENTIAL_THRESHHOLD = 5;

    public ForkPoints(final Point3D origin, final double radius) {
        this.origin = origin;
        this.radius = radius;
    }

    @Override
    protected Set<Point3D> compute() {
        if (radius <= SEQUENTIAL_THRESHHOLD) {
            return computeValue();
        } else {
            final ForkPoints subCubes[] = new ForkPoints[8];
            final double newRadius = radius / 2;

            Point3D newOrigin = new Point3D();
            newOrigin.setX(origin.getX() + newRadius);
            newOrigin.setY(origin.getY() + newRadius);
            newOrigin.setZ(origin.getZ() + newRadius);
            subCubes[0] = new ForkPoints(newOrigin, newRadius);
            subCubes[0].fork();

            newOrigin = new Point3D();
            newOrigin.setX(origin.getX() + newRadius);
            newOrigin.setY(origin.getY() + newRadius);
            newOrigin.setZ(origin.getZ() - newRadius);
            subCubes[1]   = new ForkPoints(newOrigin, newRadius);
            subCubes[1].fork();

            newOrigin = new Point3D();
            newOrigin.setX(origin.getX() + newRadius);
            newOrigin.setY(origin.getY() - newRadius);
            newOrigin.setZ(origin.getZ() + newRadius);
            subCubes[2]   = new ForkPoints(newOrigin, newRadius);
            subCubes[2].fork();

            newOrigin = new Point3D();
            newOrigin.setX(origin.getX() + newRadius);
            newOrigin.setY(origin.getY() - newRadius);
            newOrigin.setZ(origin.getZ() - newRadius);
            subCubes[3]   = new ForkPoints(newOrigin, newRadius);
            subCubes[3].fork();

            newOrigin = new Point3D();
            newOrigin.setX(origin.getX() - newRadius);
            newOrigin.setY(origin.getY() + newRadius);
            newOrigin.setZ(origin.getZ() + newRadius);
            subCubes[4]   = new ForkPoints(newOrigin, newRadius);
            subCubes[4].fork();

            newOrigin = new Point3D();
            newOrigin.setX(origin.getX() - newRadius);
            newOrigin.setY(origin.getY() + newRadius);
            newOrigin.setZ(origin.getZ() - newRadius);
            subCubes[5]   = new ForkPoints(newOrigin, newRadius);
            subCubes[5].fork();

            newOrigin = new Point3D();
            newOrigin.setX(origin.getX() - newRadius);
            newOrigin.setY(origin.getY() - newRadius);
            newOrigin.setZ(origin.getZ() + newRadius);
            subCubes[6]   = new ForkPoints(newOrigin, newRadius);
            subCubes[6].fork();

            newOrigin = new Point3D();
            newOrigin.setX(origin.getX() - newRadius);
            newOrigin.setY(origin.getY() - newRadius);
            newOrigin.setZ(origin.getZ() - newRadius);
            subCubes[7]   = new ForkPoints(newOrigin, newRadius);
            subCubes[7].fork();

            final Set<Point3D> results = new LinkedHashSet<Point3D>();
            for(final ForkPoints singleSubCube : subCubes) {
                results.addAll(singleSubCube.join());
            }

            return results;
        }
    }

    private Set<Point3D> computeValue() {
        double minX                 =   origin.getX() - radius;
        double maxX                 =   origin.getX() + radius;
        double minY                 =   origin.getY() - radius;
        double maxY                 =   origin.getY() + radius;
        double maxZ                 =   origin.getZ() + radius;
        double x                    =   minX;
        double y                    =   minY;
        double z                    =   origin.getZ() - radius;

        Set<Point3D> points         =   new LinkedHashSet<>();

        boolean notFinished = true;

        while (notFinished) {
            if (x > maxX) {
                x = minX;
                y++;
            }

            if (y > maxY) {
                y = minY;
                z++;
            }

            if (z > maxZ) {
                break;
            }

            Point3D ppoint = new Point3D(); 

            ppoint.setX(x);
            ppoint.setY(y);
            ppoint.setZ(z);

            points.add(ppoint);
            x++;
        }

        return points;
    }
} 
```

但请注意，这段代码还有很多工作要做。例如 - 对相邻空间执行计算的两个子任务都生成位于相互窗格上的点；`Point3D.equals(..)`当前代码通过调用 by排除这些重复项`Set.addAll(..)`。在现实生活中，算法甚至不应该生成它们，因为这些重复的点占据了整个生成点的很大一部分，尤其是对于低值`SEQUENTIAL_THRESHHOLD`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-06T21:22:43.470

您正在尝试将任务分成几部分，但您忘记了您的数据是 3D 的：对所有三个坐标应用相同的约束将解决方案限制为沿“主对角线”的立方体链，而使所有其他空间未处理。这就是为什么你只得到 54 分（一倍）而不是 125：它是 27 + 27（两倍三立方），覆盖立方体 ((0,0,0)..(2,2,2)) 和 ( (2,2,2)..(5,5,5)) 与点 (2,2,2) 相同。

您可以通过多种方式解决问题。最简单的可能是将工作空间分成两半，最好在最长的边缘处，直到零件的点数足够低。

```
public class ForkPoints extends RecursiveTask<Set<Point3D>> {

    private static final long serialVersionUID = -5450450150370659468L;

    private double minX;
    private double minY;
    private double minZ;
    private double maxX;
    private double maxY;
    private double maxZ;

    // max number of points allowed for a task
    static final double PTS_THRESHOLD = 25;

    // cube case
    public ForkPoints(double minValue, double maxValue) {
        this.minX   =   minValue;
        this.minY   =   minValue;
        this.minZ   =   minValue;
        this.maxX   =   maxValue;
        this.maxY   =   maxValue;
        this.maxZ   =   maxValue;
    }

    // rectangular cuboid case
    public ForkPoints(double minx, double maxx, double miny, double maxy, double minz, double maxz) {
        this.minX   =   minx;
        this.minY   =   miny;
        this.minZ   =   minz;
        this.maxX   =   maxx;
        this.maxY   =   maxy;
        this.maxZ   =   maxz;
    }

    @Override
    protected Set<Point3D> compute() {
        double dx = maxX - minX + 1;  // no of points
        double dy = maxY - minY + 1;  // in every
        double dz = maxZ - minZ + 1;  // direction

        if (dx*dy*dz <= PTS_THRESHOLD) {  // no of points to make
            return computeValue();    // cuboid small enough
        } else {
            bool splitx = (dx >= dy) && (dx >= dz);  // choose axis
            bool splity = !splitx && (dy >= dz);     // for split

            ForkPoints left;
            ForkPoints right;

            if (splitx) {
                double midx = Math.floor( (minx + maxx)/2);
                left    =   new ForkPoints(minx,   midx, miny, maxy, minz, maxz);
                right   =   new ForkPoints(midx+1, maxx, miny, maxy, minz, maxz);
            } else if (splity) {
                double midy = Math.floor( (miny + maxy)/2);
                left    =   new ForkPoints(minx, maxx, miny,   midy, minz, maxz);
                right   =   new ForkPoints(minx, maxx, midy+1, maxy, minz, maxz);
            } else {
                double midz = Math.floor( (minz + maxz)/2);
                left    =   new ForkPoints(minx, maxx, miny, maxy, minz,   midz);
                right   =   new ForkPoints(minx, maxx, miny, maxy, midz+1, maxz);
            }
            left.fork();
            Set<Point3D> rightPoints    =   right.compute();
            Set<Point3D> leftPoints     =   left.join();
            leftPoints.addAll(rightPoints);
            return leftPoints;
        }
    }

    private Set<Point3D> computeValue() {
        Set<Point3D> points =   new LinkedHashSet<>();

        for (double z = minZ; z < maxZ + 0.01; z += 1)
        for (double y = minY; y < maxY + 0.01; y += 1)
        for (double x = minX; x < maxX + 0.01; x += 1)
        {
            Point3D ppoint = new Point3D(); 

            ppoint.setX(x);
            ppoint.setY(y);
            ppoint.setZ(z);

            points.add(ppoint);
        }

        return points;
    }
} 
```

# api - 计算 Github api 上的提交

> ID：13609759
> 
> 赞同：3
> 
> 时间：2012-11-28T16:26:37.373
> 
> 标签：api, github

是否可以使用 Github API v3 检索特定用户的提交次数？

我发现的唯一方法是列出所有提交并增加一个计数器......请问有更简单的方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-12T11:13:54.487

查看[存储库统计](http://developer.github.com/v3/repos/statistics)API 文档。具体来说，[贡献者](http://developer.github.com/v3/repos/statistics/#contributors)端点将对您有用。

您可以获得贡献者列表以及给定存储库的添加、删除和提交统计信息。

我不知道有一个 API 端点可以为您提供所有存储库中用户活动的提交统计信息。

# for-loop - 带星号的批处理 FOR 循环

> ID：13609760
> 
> 赞同：3
> 
> 时间：2012-11-28T16:26:40.570
> 
> 标签：for-loop, batch-file

我有这个单行 CMD 文件 TEST.CMD：

```
for %%f in (%1 %2 %3 %4 %5 %6 %7 %8) DO ECHO %%f 
```

如果我运行这个：

```
TEST this is a test 
```

它在单独的行上正确地回显每个参数，即

```
this
is
a
test 
```

但是，如果参数包含星号，则会跳过它。例如，

```
TEST this is a* test 
```

结果是：

```
this
is
test 
```

如何将带星号的参数视为普通标记？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:30:23.947

适用于大多数参数的最简单方法是将参数传输到变量“数组”，然后使用 FOR /L 循环遍历数组。这最好通过延迟扩展来实现。

这种技术可以处理任意数量的参数——不限于 9 个。

```
@echo off
setlocal

:: Transfer parameters to an "array"
set arg.cnt=1
:getArgs
(set arg.%arg.cnt%=%1)
if defined arg.%arg.cnt% (
  set /a arg.cnt+=1
  shift /1
  goto :getArgs
)
set /a arg.cnt-=1

:: Process the "array"
setlocal enableDelayedExpansion
for /l %%N in (1 1 %arg.cnt%) do echo arg %%N = !arg.%%N! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:23:23.663

你不能打印它，星号是一个动态运算符，它匹配某些命令中的“1 个或多个字符”，比如 FOR 命令，唯一的方法是使用**/F**参数来获取命令的输出。

看看如果你使用这个会发生什么：

```
@Echo OFF

Pushd "C:\"

Call :sub a b c * d e

:sub
for %%f in (%1 %2 %3 %4 %5 %6 %7 %8) DO ECHO %%f
Pause&Exit 
```

（FOR 打印当前目录中的所有文件）

然后你需要做...：

```
@Echo OFF

Call :sub a b c* d e

:sub
FOR /F "tokens=*" %%a in ('Echo %*') DO (ECHO %%a)
Pause&Exit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:46:42.963

在事先不知道参数的情况下，我发现的唯一方法是在`for`循环中回显参数

```
for /f %%f in ('"echo %1 && echo %2 && echo %3 && etc"') DO ECHO %%f 
```

# image - vb6 设置列表视图项/子项图像

> ID：13609761
> 
> 赞同：0
> 
> 时间：2012-11-28T16:26:49.780
> 
> 标签：image, listview, vb6, subitem

我有一个列表视图，我想实现此图像中看到的效果：

![带有屏蔽项和 sumitem 的列表视图](../Images/6929c35fa7e66f07a9588a441d3b3f03.png)

列表视图隐藏了一些项目，如下图所示，除了输入密码。我知道项目和子项目图像通常是左对齐的。

如何设置项目和子项目图像以覆盖列表视图的整个文本，如图所示？

**编辑**

我[从这里](http://www.vb-helper.com/howto_draw_hatch_samples.html)得到了如何在这张照片中绘制图案的提示，但是如何在列表项上绘制呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:22:07.640

最好使用子类化和所有者/自定义绘图。这将允许您绘制整行并让列表视图处理其余部分。

# php - 无法从 PHP 连接到 MSSQL

> ID：13609763
> 
> 赞同：0
> 
> 时间：2012-11-28T16:26:53.650
> 
> 标签：php, database

我一直在尝试使用内置的 PHP 函数从我的 Web 主机连接到我的 SQL 服务器，但到目前为止还没有运气。

这是我的代码：

`mssql_connect("201.252.95.27:1433/SQLEXPRESS", $sqlServerUsername, $sqlServerpassword);`

这是错误：

> 警告：mssql_connect() [function.mssql-connect]：无法连接到服务器

尝试使用“201.252.95.27”、“201.252.95.27:1433”、“201.252.95.27,1433”、“201.252.95.27:1433/SQLEXPRESS”和所有可能的组合，但它不起作用。

服务器正在运行并且端口已打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:32:31.093

SQL Server 通常使用逗号分隔端口，使用反斜杠分隔实例名称。

使用`201.252.95.27,1433\SQLEXPRESS`我能够连接到您的服务器，但缺少用户名/密码，我无法登录。

# c# - File.Copy - DirectoryNotFoundException 未处理

> ID：13609765
> 
> 赞同：0
> 
> 时间：2012-11-28T16:26:58.880
> 
> 标签：c#, file, copy

当我使用此代码时，它不会引发任何错误，但它仍然不会复制任何内容。有任何想法吗？。

```
 //string spath = string.Format("S:\\ 0A36303 / user:admin");
                DateTime theDate = dateTimePicker1.Value.Date;
                DirectoryInfo Dir = new DirectoryInfo("S:");
                string dircreate = string.Format(@"N:\{0:MM-dd-yyyy}\" + label1.Text + "LogFiles", dateTimePicker1.Value.Date, label1.Text);
                DirectoryInfo target = new DirectoryInfo(dircreate);

                FileInfo[] fis = Dir.GetFiles( ".txt", SearchOption.AllDirectories);
                foreach (FileInfo fi in fis)
                {
                    if (fi.LastWriteTime.Date == theDate)
                    {
                        File.Copy(fi.FullName, target.FullName + @"\" + fi.Name, true);
                    }

                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:29:51.023

尝试使用完整的 UNC 路径来访问该文件：

```
DirectoryInfo Dir = new DirectoryInfo(@"\\server\\share\\pathtofile"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:32:22.790

想到两个可能的问题：

1.  该`S:\PC.log`文件不存在=>您无法复制不存在的文件
2.  您正在执行代码的进程没有对指定文件夹 ( `S:`) 的读取权限。看起来像网络共享。如果您在 ASP.NET 应用程序中运行此代码，则该进程可能没有对此远程共享的读取权限 => 您无法复制您无权访问的文件。

# ruby-on-rails - ActiveScaffold url_options

> ID：13609768
> 
> 赞同：0
> 
> 时间：2012-11-28T16:27:05.480
> 
> 标签：ruby-on-rails, activescaffold

我对 Ruby 和 Rails 非常陌生，我正在尝试对使用 activescaffold 为记录生成显示、编辑和删除链接的页面进行修改。我遇到的问题是我正在查看的页面的链接是由 activescaffold 自动生成的，我只需要更改删除链接即可转到另一个页面，在该页面中我可以显示一条消息，上面写着“您正在删除”选项blah blah”，你确定要这样做吗？并给他们一个取消和确定按钮。

我此时的问题是我不确定在哪里寻找链接生成的位置，因此我无法定位新页面。

这是创建链接的代码

```
<table cellpadding="0" cellspacing="0">
<tr>
<td class="indicator-container">
  <%= loading_indicator_tag(:action => :record, :id => record.id) %>
</td>
<% active_scaffold_config.action_links.each :record do |link| -%>
  <% next if controller.respond_to? link.security_method and !controller.send(link.security_method) -%>
  <td>
  <% if record.class.statused? and record.disabled? -%>
      <%= link.action.to_sym == :enable ? render_action_link(link, url_options) : "" -%>
  <% else -%>
    <%= (record.authorized_for?(:action => link.crud_type) and link.action.to_sym != :enable) ? render_action_link(link, url_options) : "" -%>
  <% end -%>  
  </td>
<% end -%> 
```

感谢您在此问题上提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:31:55.147

这个答案不是特定于 ActiveScaffold，但在 Rails 3.2 中，破坏链接生成为

```
<%= link_to 'Destroy', foo_instance, method: :delete, data: { confirm: 'Are you sure?' } %> 
```

这导致链接具有一个`data-confirm`属性，这听起来像你想要的。你能把它添加到你的 ActiveScaffold 视图中吗？

更新（轨道 2）：

jQuery 支持该`data-confirm`属性（而不是原型，或者除了原型之外），因此如果您在 Rails 2 应用程序中使用 jQuery，它可能“正常工作”。否则，您可以直接在要确认的链接上添加 javascript。`url_options`参数 for`render_action_link`看起来很有趣——也许它会接受任意的 html 属性（就像 Rails一样`link_to`），例如

```
 url_options = { :onclick => 'return confirm("Are you sure?")` } 
 render_action_link(link, url_options) 
```

# kineticjs - 动力学js不尊重dragBoundsFunc来约束拖动

> ID：13609780
> 
> 赞同：1
> 
> 时间：2012-11-28T16:27:42.003
> 
> 标签：kineticjs

[在此示例 jsfiddle](http://jsfiddle.net/2vkL4/)中，我无法让 kineticjs 尊重[dragBoundsFunc](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-shapes-horizontally-or-vertically-tutorial)以限制水平和垂直拖动两个框。我需要做什么才能使以下代码正常工作？

```
$(function() {
    var stage = new Kinetic.Stage({
        container: 'container',
        width: $("#container").width(),
        height: window.innerHeight * 0.9,
        listening: true
    });

    var scrollAreas = new Kinetic.Group();
    var scrollBars = new Kinetic.Group();
    var scrollBarsLayer = new Kinetic.Layer();

    var hscrollArea = new Kinetic.Rect({
        x: 10,
        y: stage.getHeight() - 30,
        width: stage.getWidth() - 40,
        height: 20,
        fill: "gray",
        opacity: 0.3
    });

    var hscroll = new Kinetic.Rect({
        x: 10,
        y: stage.getHeight() - 30,
        width: 130,
        height: 20,
        fill: "orange",
        draggable: true,
          dragBoundsFunc: function(pos) {
            return {
                x: pos.x,
                y: this.getAbsolutePostion().y
            };
          },
        opacity: 0.9,
        stroke: "black",
        strokeWidth: 1
    });

    var vscrollArea = new Kinetic.Rect({
        x: stage.getWidth() - 30,
        y: 10,
        width: 20,
        height: stage.getHeight() - 40,
        fill: "gray",
        opacity: 0.3
    });

    var vscroll = new Kinetic.Rect({
        x: stage.getWidth() - 30,
        y: 10,
        width: 20,
        height: 70,
        fill: "orange",
        draggable: true,
        dragBoundsFunc: function(pos) {
            return {
                x: this.getAbsolutePosition().x,
                y: pos.y
            };
        },
        opacity: 0.9,
        stroke: "black",
        strokeWidth: 1
    });

    scrollBars.on("mouseover", function() {
        document.body.style.cursor = "pointer";
    });
    scrollBars.on("mouseout", function() {
        document.body.style.cursor = "default";
    });

    scrollAreas.add(hscrollArea);
    scrollAreas.add(vscrollArea);
    scrollBars.add(hscroll);
    scrollBars.add(vscroll);

    scrollBarsLayer.add(scrollAreas);
    scrollBarsLayer.add(scrollBars);
    stage.add(scrollBarsLayer);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:58:25.927

它是`dragBoundFunc`（而不是`dragBoundsFunc`，请注意`s`）。

# c# - 防止用户输入大于截止日期的起始日期c#

> ID：13609783
> 
> 赞同：0
> 
> 时间：2012-11-28T16:27:48.307
> 
> 标签：c#, asp.net, date

我正在根据 Asp.net 中的来自字段和收件人字段的两个日期搜索数据

我想阻止用户输入大于截止日期的起始日期并向用户显示消息 请选择有效的日期范围

```
 DateTime InvoiceDateFrom = new DateTime();
DateTime InvoiceDateTo = new DateTime();

if (TxtInvoiceDateFrom.Text.Trim() != "")
{

  //DateTime FromDate = DateTime.ParseExact(TxtInvoiceDateFrom.Text.Trim(), "dd/MM/yyyy", null).AddDays(1);
  InvoiceDateFrom = Convert.ToDateTime(TxtInvoiceDateFrom.Text);
  //DateTime toDate = DateTime.ParseExact(TxtInvoiceDateTo.Text.Trim(), "dd/MM/yyyy", null).AddDays(1);

}

if (TxtInvoiceDateTo.Text.Trim() != "")
{
  InvoiceDateTo = Convert.ToDateTime(TxtInvoiceDateTo.Text);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:32:33.463

```
if (InvoiceDateTo < InvoiceDateFrom)
    MessageBox.Show("Please select a valid date range."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T10:40:28.333

```
 DateTime x = DateTime.Parse("12/8/2012");   //as "12/8/2012" is the your specified date
 dateTimePicker1.MaxDate = x; // or you can use it in one line 
```

如果您想阻止用户选择大于今天的日期：

```
dateTimePicker1.MaxDate = DateTime.Today; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T16:35:40.137

请看看这是否有帮助！C# 的做法很好。但我宁愿建议使用 javascript。

```
DateTime toDate=DateTime.ParseExact(todateString,"dd/MM/yy",System.Globalization.InvariantCulture);
DateTime fromDate=DateTime.ParseExact(fromdateString,"dd/MM/yy",System.Globalization.InvariantCulture);

int comparison=DateTime.Compare(toDate,fromDate);

if(comparison>=0)
{
     //Post custom error message.
} 
```

# java - 在java中将变量从一个类传递到另一个类

> ID：13609788
> 
> 赞同：0
> 
> 时间：2012-11-28T16:27:59.070
> 
> 标签：java, android, class, variables, listener

我有一个 android 应用程序，我需要将一个变量（仪器）传递给它的主要活动。这似乎是一个简单的问题，但它让我感到困惑。我环顾四周，我已经注意到编写 getInstrument 方法似乎是个好主意。这是我到目前为止所做的：

```
public class MainActivity extends Activity{
//I need to read the instrument variable here
    public void addListenerOnSpinnerItemSelection(){

        instrumentSp = (Spinner) findViewById(R.id.instrument);
        instrumentSp.setOnItemSelectedListener(new CustomOnItemSelectedListener());

    }
} 
```

单独的类（在单独的文件中）：

```
public class CustomOnItemSelectedListener implements OnItemSelectedListener {

private int instrument;

  public void onItemSelected(AdapterView<?> parent, View view, int pos,long id) {
    Toast.makeText(parent.getContext(), 
        "Please wait a minute for the instrument to be changed. ", Toast.LENGTH_SHORT).show();
        //"Item : " + parent.getItemAtPosition(pos).toString() + " selected" + pos,
        //Toast.LENGTH_SHORT).show();
     instrument = pos;
  }

  public int getInstrument(){
      return instrument;
  }

} 
```

但我认为我不能从主要活动中调用 getInstrument() 方法，因为该对象仅存在于侦听器中。必须有一个非常简单的方法来解决它。我读了一些帖子，但问题似乎是该类的对象并不真正存在。感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:29:54.683

你可以试试这个：

```
public class MainActivity extends Activity{
   //I need to read the instrument variable here
   CustomOnItemSelectedListener MyListener = new CustomOnItemSelectedListener();

   public void addListenerOnSpinnerItemSelection(){

     instrumentSp = (Spinner) findViewById(R.id.instrument);
     instrumentSp.setOnItemSelectedListener(MyListener);  
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:32:08.407

如果您有对侦听器的引用，您应该能够调用它的方法，例如。

```
CustomOnItemSelectedListener listener = new CustomOnItemSelectedListener();
instrumentSp.setOnItemSelectedListener(listener);
....
int instrumentValue = listener.getInstrument(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:33:05.497

创建一个全局实例

```
CustomOnItemSelectedListener listener;
int instrument;
public void onCreate(Bundle b){
    listener = new CustomOnItemSelectedListener();
    instrument = listener.getInstrument();
} 
```

这将在 MainActivity 类

# javascript - 将日期（yyyy-mm-dd）转换为 yyyy MMM dd javascript

> ID：13609793
> 
> 赞同：2
> 
> 时间：2012-11-28T16:28:15.590
> 
> 标签：javascript, date

我有以下代码

```
startDate = "2012-08-12" 
```

我从那个日期减去 30 天

```
var date = new Date(startDate);
var newDate = date.setDate(date.getDate() - 30); 
```

我想将 newDate 转换为格式`yyyy MMM dd` `2012 JUL 11`（从日期减去 30 天）

**编辑**

我不想使用任何插件

我一直在尝试一种很长的方法来提取日期、月份和年份以及一系列月份，然后替换它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:39:00.843

您可以按以下方式执行此操作：

```
myDate= Date.parse("2012-08-12") - 2592000000;
newDate = new Date(myDate); 
```

只需解析日期，您就可以得到一个数字

# c++ - std::sort 对数组和索引列表进行排序？

> ID：13609797
> 
> 赞同：0
> 
> 时间：2012-11-28T16:28:23.600
> 
> 标签：c++, algorithm, sorting, c++11

我有一个函数，它接受两个与参数大小相同的向量：

```
void mysort(std::vector<double>& data, std::vector<unsigned int>& index)
{
   // For example :
   // The data vector contains : 9.8 1.2 10.5 -4.3
   // The index vector contains : 0 1 2 3
   // The goal is to obtain for the data : -4.3 1.2 9.8 10.5
   // The goal is to obtain for the index : 3 1 0 2
   // Using std::sort and minimizing copies
} 
```

如何解决最小化所需副本数量的问题？

一种明显的方法是制作一个向量`std::pair<double, unsigned int>`并指定比较器`[](std::pair<double, unsigned int> x, std::pair<double, unsigned int> y){return x.first < y.first;}`，然后将结果复制到两个原始向量中，但这不会有效。

注意：函数的签名是固定的，我不能传递`std::pair`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T16:42:42.677

在函数内部，`positions = [0,1,2,3...]` 使用比较器对位置进行矢量排序`(int x, int y){return data[x]<data[y];}`。

然后迭代位置，做`result.push_back(index[*it]);`

这假设 in 的值`index`可以是任意的。如果保证已经`[0,1,2..]`如您的示例中那样，那么您不要制作`positions`数组，只需`index`在其位置使用并跳过最后一个副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:42:29.853

[http://www.boost.org/doc/libs/1_52_0/libs/iterator/doc/index.html#iterator-facade-and-adaptor](http://www.boost.org/doc/libs/1_52_0/libs/iterator/doc/index.html#iterator-facade-and-adaptor)

写一个迭代器`std::pair<double&, signed int&>`，实际上将一对迭代器包装到每个向量中。唯一棘手的部分是确保`std::sort`实现结果是随机访问迭代器。

如果你不能使用 boost，就自己写一个等价的。

在执行此操作之前，请确定是否值得您费心。zip、sort 和 unzip 更容易编写，并且程序员的时间可以在很多地方换取性能：直到你知道它的最佳使用位置，也许你应该做一个足够好的工作，然后在你需要的地方进行基准测试加快速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T16:42:25.143

您可以使用仿函数类来保存对值数组的引用，并将其用作比较器来对索引数组进行排序。然后将这些值复制到一个新的值数组并交换内容。

```
struct Comparator
{
    Comparator(const std::vector<double> & data) : m_data(data) {}
    bool operator()(int left, int right) const { return data[left] < data[right]; }
    const std::vector<double> & m_data;
};

void mysort(std::vector<double>& data, std::vector<unsigned int>& index)
{
    std::sort(index.begin(), index.end(), Comparator(data));
    std::vector<double> result;
    result.reserve(data.size());
    for (std::vector<int>::iterator it = index.begin(), e = index.end();  it != e;  ++it)
        result.push_back(data[*it]);
    data.swap(result);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T16:45:42.023

您可以使用自定义迭代器类，它并行迭代两个向量。其内部成员将包括

1.  两个引用（或指针），每个向量一个
2.  指示当前位置的索引

迭代器的值类型应该是 a `pair<double, unsigned>`。这是因为`std::sort`不仅会交换项目，而且在某些情况下还会临时存储单个值。[我在这个问题](https://stackoverflow.com/q/11562124/1468366)的第 3 节中写了更多详细信息。

引用类型必须是某个类，它再次保存对向量和当前索引的引用。因此，如果您小心的话，您可以使引用类型与迭代器类型相同。引用类型的`operator=`必须允许从值类型赋值。并且该`swap`函数应该专门用于此引用，以允许通过分别交换两个列表来交换这些列表项。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-28T16:44:27.693

这应该这样做：

```
std::sort(index.begin(), index.end(), [&data](unsigned i1, unsigned i2)->bool
{ return data[i1]<data[i2]; });

std::sort(data.begin(), data.end()); 
```

# regex - 正则表达式匹配带有 type="text/javascript" 的仅 HTML 脚本标签

> ID：13609801
> 
> 赞同：1
> 
> 时间：2012-11-28T16:28:33.110
> 
> 标签：regex, textmate, sublimetext2

我正在使用存储在`<script type="text/template">`元素中的 HTML 中的 Backbone 应用程序的模板，但这变得令人沮丧，因为 Sublime Text 将模板中的 HTML 着色，就好像它是 Javascript 一样。我想让编辑器将这些脚本标记视为与普通 HTML 标记相同。

我已经尝试在 HTML.tmLanguage 上修改 source.js.embedded.html 块中的正则表达式，但作为一个对正则表达式没有经验的人，我无法做到正确。

有任何想法吗？

我相信这是需要修改的 tmLanguage 文件的相关部分：

```
 <key>begin</key>
                <string>(?&lt;!&lt;/(?:script|SCRIPT))(&gt;)</string>
                <key>captures</key>
                <dict>
                    <key>1</key>
                    <dict>
                        <key>name</key>
                        <string>punctuation.definition.tag.html</string>
                    </dict>
                    <key>2</key>
                    <dict>
                        <key>name</key>
                        <string>entity.name.tag.script.html</string>
                    </dict>
                </dict>
                <key>end</key>
                <string>(&lt;/)((?i:script))</string> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:06:47.813

我认为您应该编辑其他值：

```
 <key>begin</key>
        <string>(?:^\s+)?(&lt;)((?i:script))\b(?![^&gt;]*/&gt;)</string>
        <key>beginCaptures</key>
        <dict>
            <key>1</key>
            <dict>
                <key>name</key>
                <string>punctuation.definition.tag.html</string>
            </dict>
            <key>2</key>
            <dict>
                <key>name</key>
                <string>entity.name.tag.script.html</string>
            </dict>
        </dict> 
```

并更换`(?:^\s+)?(&lt;)((?i:script))\b(?![^&gt;]*/&gt;)`

和`(?:^\s+)?(&lt;)((?i:script))\b(?![^&gt;]*/&gt;)(?![^&gt;]*type="text/template")`

# r - 如何获取前两个字符匹配的元素

> ID：13609802
> 
> 赞同：0
> 
> 时间：2012-11-28T16:28:37.070
> 
> 标签：r, regex

例如，我观察以下数据

```
[1] "1.1"   "1.2"   "1.3"   "1.4"   "1.5"   "1.6"   "1.7"   "1.8"   "1.9"  
 [10] "1.10"  "1.11"  "1.12"  "1.13"  "1.14"  "2.1"   "2.2"   "2.3"   "2.4"  
 [19] "2.5"   "2.6"   "2.7"   "2.8"   "2.9"   "2.10"  "2.11"  "2.12"  "2.13" 
 [28] "2.14"  "3.1"   "3.2"   "3.3"   "3.4"   "3.5"   "3.6"   "3.7"   "3.8"  
 [37] "3.9"   "3.10"  "3.11"  "3.12"  "3.13"  "3.14"  "4.1"   "4.2"   "4.3"  
 [46] "4.4"   "4.5"   "4.6"   "4.7"   "4.8"   "4.9"   "4.10"  "4.11"  "4.12" 
 [55] "4.13"  "4.14"  "5.1"   "5.2"   "5.3"   "5.4"   "5.5"   "5.6"   "5.7"  
 [64] "5.8"   "5.9"   "5.10"  "5.11"  "5.12"  "5.13"  "5.14"  "6.1"   "6.2"  
 [73] "6.3"   "6.4"   "6.5"   "6.6"   "6.7"   "6.8"   "6.9"   "6.10"  "6.11" 
 [82] "6.12"  "6.13"  "6.14"  "7.1"   "7.2"   "7.3"   "7.4"   "7.5"   "7.6"  
 [91] "7.7"   "7.8"   "7.9"   "7.10"  "7.11"  "7.12"  "7.13"  "7.14"  "8.1"  
[100] "8.2"   "8.3"   "8.4"   "8.5"   "8.6"   "8.7"   "8.8"   "8.9"   "8.10" 
[109] "8.11"  "8.12"  "8.13"  "8.14"  "9.1"   "9.2"   "9.3"   "9.4"   "9.5"  
[118] "9.6"   "9.7"   "9.8"   "9.9"   "9.10"  "9.11"  "9.12"  "9.13"  "9.14" 
[127] "10.1"  "10.2"  "10.3"  "10.4"  "10.5"  "10.6"  "10.7"  "10.8"  "10.9" 
[136] "10.10" "10.11" "10.12" "10.13" "10.14" "11.1"  "11.2"  "11.3"  "11.4" 
[145] "11.5"  "11.6"  "11.7"  "11.8"  "11.9"  "11.10" "11.11" "11.12" "11.13"
[154] "11.14" "12.1"  "12.2"  "12.3"  "12.4"  "12.5"  "12.6"  "12.7"  "12.8" 
[163] "12.9"  "12.10" "12.11" "12.12" "12.13" "12.14" "13.1"  "13.2"  "13.3" 
[172] "13.4"  "13.5"  "13.6"  "13.7"  "13.8"  "13.9"  "13.10" "13.11" "13.12"
[181] "13.13" "13.14" "14.1"  "14.2"  "14.3"  "14.4"  "14.5"  "14.6"  "14.7" 
[190] "14.8"  "14.9"  "14.10" "14.11" "14.12" "14.13" "14.14" 
```

我想 grep 以“1.”开头的元素。我尝试使用 grep() 进行了几次尝试，但我总是以“11”获得元素。也。如果我在“\”上使用 strsplit。我会得到一份清单，这会使事情变得更加复杂。然后我尝试了 which() 函数进行精确匹配，但我只需要前两个字符的精确匹配。例如，我不关心“1”中的第二个数字。我敢打赌，有一种复杂的方法可以解决这个问题，但我就是不明白......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:29:33.827

你需要逃脱`.`两次！

```
grep('^1\\.', x) 
```

因为`.`它是正则表达式中的一个特殊字符，如果你想要一个句点，你需要在正则表达式中对其进行转义。然后由于`\`是 R 中的特殊字符，它也需要转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:33:21.000

我发现使用字符类可以帮助摆脱逃避愤怒：

```
x <- do.call("paste",c(expand.grid(1:14,1:14),sep="."))
grep("^[1][.]",x,value=T)
 [1] "1.1"  "1.2"  "1.3"  "1.4"  "1.5"  "1.6"  "1.7"  "1.8"  "1.9"  "1.10"
[11] "1.11" "1.12" "1.13" "1.14" 
```

开头的插入符号 ( `^`) 确保我们只匹配表达式的开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:08:36.493

假设这`dat`是您的数据集

```
dat <- c("1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","1.10","1.11","1.12","1.13","1.14","2.1","2.2","2.3","2.4","2.5","2.6","2.7","2.8","2.9","2.10","2.11","2.12","2.13","2.14","3.1","3.2","3.3","3.4","3.5","3.6","3.7","3.8","3.9","3.10","3.11","3.12","3.13","3.14","4.1","4.2","4.3","4.4","4.5","4.6","4.7","4.8","4.9","4.10","4.11","4.12","4.13","4.14","5.1","5.2","5.3","5.4","5.5","5.6","5.7","5.8","5.9","5.10","5.11","5.12","5.13","5.14","6.1","6.2","6.3","6.4","6.5","6.6","6.7","6.8","6.9","6.10","6.11","6.12","6.13","6.14","7.1","7.2","7.3","7.4","7.5","7.6","7.7","7.8","7.9","7.10","7.11","7.12","7.13","7.14","8.1","8.2","8.3","8.4","8.5","8.6","8.7","8.8","8.9","8.10","8.11","8.12","8.13","8.14","9.1","9.2","9.3","9.4","9.5","9.6","9.7","9.8","9.9","9.10","9.11","9.12","9.13","9.14","10.1","10.2","10.3","10.4","10.5","10.6","10.7","10.8","10.9","10.10","10.11","10.12","10.13","10.14","11.1","11.2","11.3","11.4","11.5","11.6","11.7","11.8","11.9","11.10","11.11","11.12","11.13","11.14","12.1","12.2","12.3","12.4","12.5","12.6","12.7","12.8","12.9","12.10","12.11","12.12","12.13","12.14","13.1","13.2","13.3","13.4","13.5","13.6","13.7","13.8","13.9","13.10","13.11","13.12","13.13","13.14","14.1","14.2","14.3","14.4","14.5","14.6","14.7","14.8","14.9","14.10","14.11","14.12","14.13","14.14") 
```

一种选择，利用它们是数字的事实

```
 as.numeric(dat) > 1  & as.numeric(dat) < 2 
```

此外，该`stringr`包包装了正则表达式函数，以便于使用

```
 library(stringr)
  str_detect(dat, "^1\\.") 
```

# php - 使用构建脚本（PHP 构建框架）将 PHP 文件转换为静态 HTML 文件

> ID：13609803
> 
> 赞同：2
> 
> 时间：2012-11-28T16:28:47.960
> 
> 标签：php, html, frameworks, build

我看到一个项目，他们在 php 中做一个动态构建脚本，它将从 php 页面构建静态 html 页面。也就是说，html 文件看起来与 php 文件完全一样。这背后的想法是所有的 html 页面都会加载得更快，并且数据将从 Webserviceses 中检索。

此外，构建脚本将能够为生产环境构建 tat is with min files for other environment without min files。与 JS 单元测试脚本相同。

我的问题是，是否有任何特定的 PHP 框架来实现此功能，即构建体系结构、php 到 html 的转换等...抱歉，如果我的问题如此基本，我对 PHP 几乎没有什么新意。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:37:58.877

这听起来像是大多数模板引擎所做的事情（[Smarty](http://www.smarty.net/)可能是最流行的独立引擎）。大量包含模板引擎的 CMS 系统，以及任何带有模板扩展的大型框架，都可能会做同样的事情。

为了实现您想要的，几乎任何主要的模板引擎、CMS 或框架都不会出错（您选择哪一个取决于您的其他需求），但您想要的关键要查找的内容类似于“模板缓存”、“输出缓存”、“视图缓存”或缓存功能列表中的类似措辞（您将其描述为将 PHP 文件转换为 HTML 文件），和“缩小”或“压缩”（注意 - 源代码压缩与“gzip 压缩”不同）用于生成文件的缩小版本。

# javascript - 如何根据用户单击和拖动触发的内联样式更改来切换类？

> ID：13609805
> 
> 赞同：0
> 
> 时间：2012-11-28T16:28:52.983
> 
> 标签：javascript, jquery

当用户单击并拖动光标时，该类`moz-grab`更改为`moz-grabbing`，我如何定位该类并使用它来更改另一个类？

```
//if
<div class="rsOverflow" style="cursor: -moz-grabbing;">

//then do this 
toggle collapse_inner_on to collapse_inner_off 
```

# php - PHP 命名空间和灵活的文件夹结构

> ID：13609810
> 
> 赞同：0
> 
> 时间：2012-11-28T16:28:58.010
> 
> 标签：php, namespaces

我让我的用户更改系统文件夹的名称。我还在其类中使用命名空间。系统文件夹的名称保存在全局常量中。

自动加载根据其名称空间搜索文件。

所以，假设我有一个名为 system 的文件夹和一个类：

\Project_Name\System\Something;

用户将此文件夹更改为“something_else”。命名空间将与文件夹结构不匹配，并且不会加载该类。

有什么办法可以防止这种情况发生吗？也许在命名空间的名称中使用常量？

还有一个问题：

自动加载的类是否总是在其名称的开头有“\”？即使该类属于某个相对名称空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:31:25.920

# 不要让他们

如果您的库依赖于 PSR-0（或任何其他）命名空间架构，请让您的用户知道他们**无法**更改文件夹名称，否则该库将无法工作。

如果他们更改文件夹名称 - 那是他们要解决的问题，而不是您要解决的问题。

# java - setDefaultCloseOperation 可以在不指定任何对象的情况下工作吗？

> ID：13609812
> 
> 赞同：1
> 
> 时间：2012-11-28T16:29:01.737
> 
> 标签：java, swing, jframe

我遇到了一个调用 setdefaultcloseoperation() 而不引用任何对象的代码。我读到方法是参考对象调用的。这是代码

```
public class Mainpage extends JFrame implements ActionListener{
    JFrame f = new JFrame("Mainpage");

    public Mainpage() {
        super("Mainpage");
        f.setSize(1000,6000);
        f.getContentPane().setLayout(null);
        f.setVisible(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE); // how is this happening?
} 
```

我想知道如何`setDefaultCloseOperation(EXIT_ON_CLOSE);`工作。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:30:28.653

该方法`setDefaultCloseOperation`引用 的当前实例`JFrame`。

* * *

一些旁注：

1）第二个`JFrame` `f`在这里是不必要的：

```
public class Mainpage extends JFrame implements ActionListener{

public Mainpage(){
   super("Mainpage");
   setSize(1000,6000);
   ...
   setDefaultCloseOperation(EXIT_ON_CLOSE);
   setVisible(true);
} 
```

2）避免使用`null`布局。请参阅[不使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)进行操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T16:30:35.510

好吧，你扩展了`JFrame`。所以本质上你在做`this.setDefaultOperation(EXIT_ON_CLOSE)`.

`JFrame`此外，您正在创建一个内部..也没有任何意义，`JFrame`除非这是您的实验。简单的答案是不要扩展 JFrame，而是使用 `f.setDefaultOperation(EXIT_ON_CLOSE)`.

# r - facet_grid 中的不同绘图类型

> ID：13609816
> 
> 赞同：1
> 
> 时间：2012-11-28T16:29:15.203
> 
> 标签：r, ggplot2

我又一次遇到了一个复杂的ggplot。我想使用构面网格在一个绘图中绘制不同的绘图类型。

我希望我可以用下面的例子来说明我的观点：我想制作一个类似于第一张图片的情节，但上面的情节应该看起来像第二张图片。我已经找到了使用子集函数的技巧，但我不能只在一个图中添加垂直线，更不用说两个或三个（或指定颜色）。

代码：

```
a <- rnorm(100)
b <- rnorm(100,8,1)
c <- rep(c(0,1),50)

dfr <- data.frame(a=a,b=b,c=c,d=seq(1:100))
dfr_melt <- melt(dfr,id.vars="d")

#I want only two grids, not three
ggplot(dfr_melt,aes(x=d,y=value)) + facet_grid(variable~.,scales="free")+
geom_line(subset=.(variable=="a")) + geom_line(subset=.(variable=="b"))

#Upper plot should look like this
ggplot(dfr,aes(x=d,y=a)) + geom_line() + geom_line(aes(y=c,color="c"))+
geom_hline(aes(yintercept=1),linetype="dashed")+
geom_hline(aes(yintercept=-2),linetype="dashed") 
```

![示例 1](../Images/aa9d3a45fad76a3e92d1df7fe18d2b07.png)

![示例 2](../Images/1c5bd88dfb5e0cbd1d4f6fd8e9d4395f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T17:36:57.977

如果我正确理解了您的问题，您只需要一`variable`列`dfr`以允许刻面工作：

```
dfr$variable = "a"
ggplot(subset(dfr_melt, variable=="a"),aes(x=d,y=value)) +  
  facet_grid(variable~.,scales="free")+
  geom_line(data=subset(dfr_melt,variable=="a"))  + 
  geom_line(data=subset(dfr_melt, variable=="b")) + 
  geom_line(data=dfr, aes(y=c, colour=factor(c))) + 
  geom_hline(aes(yintercept=1),linetype="dashed")+
  geom_hline(aes(yintercept=-2),linetype="dashed") 
```

请注意，我的情节没有 zig-zig 线，这是因为我改变了：

```
 #This is almost certainly not what you want
  geom_line(data=dfr, aes(y=c, colour="c")) 
```

至

```
 #I made c a factor since it only takes the values 0 or 1
  geom_line(data=dfr, aes(y=c, colour=factor(c)))
  ##Alternatively, you could have
  geom_line(data=dfr, aes(y=c), colour="red") #or
  geom_line(data=dfr, aes(y=c, colour=c)) #or 
```

![在此处输入图像描述](../Images/72913460fac4ef1083420743d77d7167.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:15:46.050

据我所知，您不能使用 facet.grid() 将多个绘图类型放在一个绘图中。据我所知，您的两个选择是

*   将空数据放在第一个方面，因此这些行“存在”但不显示，或者

*   使用视口将多个绘图合并为一个。

我认为第二种解决方案更通用，所以我就是这样做的：

```
#name each of your plots
p2 <- ggplot(subset(dfr_melt, variable=="a"),aes(x=d,y=value)) + facet_grid(variable~.,scales="free")+
  geom_line(subset=.(variable=="a")) + geom_line(subset=.(variable=="b"))

#Upper plot should look like this
p1 <- ggplot(dfr,aes(x=d,y=a)) + geom_line() + geom_line(aes(y=c,color="c"))+
  geom_hline(aes(yintercept=1),linetype="dashed")+
  geom_hline(aes(yintercept=-2),linetype="dashed")

#From Wickham ggplot2, p154
vplayout <- function(x,y) {
  viewport(layout.pos.row=x, layout.pos.col=y)
}

require(grid)
png("myplot.png", width = 600, height = 300) #or use a different device, e.g. quartz for onscreen display on a mac
grid.newpage()
pushViewport(viewport(layout=grid.layout(2, 1)))
print(p1, vp=vplayout(1, 1))
print(p2, vp=vplayout(2, 1))
dev.off() 
```

![在此处输入图像描述](../Images/2a28de912f632d4a14e7b32f5da07b3f.png)

您可能需要稍微摆弄一下才能让它们完全正确地排列。关闭上图的刻面，并将下图的图例移动到底部，应该可以解决问题。

# c# - C#通过自定义UI设置SSIS自定义数据流组件的自定义属性

> ID：13609818
> 
> 赞同：3
> 
> 时间：2012-11-28T16:29:25.213
> 
> 标签：c#, ssis, dataflowtask

我在尝试设置通过自定义表单创建的数据流组件的自定义属性时遇到了真正的问题。

我分配的值刚刚被设置，自定义属性要么保持原始值，要么保持为空。

在我的 TaskClass 中，我重写了 ProvideComponentProperties() 方法，并创建了自定义属性，如下所示。

```
IDTSCustomProperty100 componentCustomProperty = ComponentMetaData.CustomPropertyCollection.New();
componentCustomProperty.Name = "PAFProvider";
componentCustomProperty.Description = "PAF Provider";
componentCustomProperty.Value = "testinitial"; 
```

我创建了一个继承自 IDtsComponentUI 接口的 TaskClassUI。我实现了所有必需的方法。

我的初始化方法。

```
public void Initialize(IDTSComponentMetaData100 dtsComponentMetadata, IServiceProvider serviceProvider)
{
       this._dtsComponentMetaData = dtsComponentMetadata;
            this._serviceprovider = serviceProvider;

} 
```

我的编辑方法的实现

```
 public bool Edit(IWin32Window parentWindow, Variables variables, Connections connections)
    {
        bool flag;
        try
        {
            PAFUIMainWnd ui = new PAFUIMainWnd(this._dtsComponentMetaData, this._serviceprovider, connections);
            DialogResult result = ui.ShowDialog(parentWindow);
            bool flag1 = result != DialogResult.OK;
            if(!flag1)
            {
                flag = true;
                return flag;
            }
        }
        catch(Exception exe)
        {
            MessageBox.Show(exe.ToString());
        }
        flag = false;
        return flag;            
    } 
```

以及我的 UIFORM 的执行。

```
public PAFUIMainWnd(IDTSComponentMetaData100 iDTSComponentMetaData100, IServiceProvider serviceProvider, Connections connections)
        {            
            this.components = null;
            this.InitializeComponent();
            this._dtsComponentMetaData = iDTSComponentMetaData100;     
            this._designTimeComponent = this._dtsComponentMetaData.Instantiate();
            textBox1.Text = _dtsComponentMetaData.CustomPropertyCollection["PAFProvider"].Value.ToString();

        } 
```

仅出于测试目的，我在表单上粘贴了一个文本框和一个按钮。按钮的 OnClick 甚至在下面。我只是从文本框中获取值并将其分配给自定义属性，但它没有分配它。我可以从分配给文本框的自定义属性中读取原始值。我只是不明白为什么我不能分配它。我已经完全遵循了 MSDN 和其他各种示例。如果有人能指出我做错了什么，我将非常感激。它已经到了头部撞击阶段。

```
 private void btnOK_Click(object sender, EventArgs e)
    {
       _designTimeComponent.SetComponentProperty("PAFProvider", textBox1.Text);           

        this.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:32:06.907

重新启动解决了这个问题。代码非常好。

# c# - 棱镜事件以响应从区域中删除的视图

> ID：13609832
> 
> 赞同：1
> 
> 时间：2012-11-28T16:30:22.517
> 
> 标签：c#, wpf, prism, unity-container

我正在使用 Prism 来处理视图导航。

我想要一个视图来响应它被从一个区域中删除`myRegion.Remove(view)`。

处理这个问题的正确方法是什么（在视图中）？使用该`Unloaded`事件不起作用，也没有`OnNavigatedFrom`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:44:41.887

您可以做到这一点的一种方法是`CompositePresentationEvent`使用`EventAggregator`. 或者，也许更好，是根据您的观点实施（我相信`IActiveAware`这是其中的一部分）。`RegionManager`

# assembly - 汇编器 ARM 强制布尔方法始终返回 TRUE

> ID：13609833
> 
> 赞同：0
> 
> 时间：2012-11-28T16:30:25.607
> 
> 标签：assembly, arm, patch, ida

这就是我包含返回函数的代码的结尾。

```
MOVW            R1, #0x7368
ADD             R0, PC  ; 
MOVT.W          R1, #0xF
ADD             R1, PC ; 
LDR             R0, [R0] ; 
LDR             R1, [R1] ; 
LDR             R0, [R4,R0]
BLX             _objc_msgSend
MOVW            R1, #0x7DC4
MOV             R2, R8
MOVT.W          R1, #0xF
MOV             R3, R6
ADD             R1, PC ; 
LDR             R1, [R1] ; "
BLX             _objc_msgSend
LDR.W           R8, [SP+0x10+var_10],#4
POP             {R4-R7,PC} 
```

有人可以评论它的作用并解释我如何强制返回指令，我认为它是 POP 总是返回 TRUE！

我发布的代码部分......是一个布尔函数，它进行一些操作，然后返回 TRUE 或 FALSE。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:16:28.167

如果您的编译器遵循 ARM 体系结构的过程调用标准，则返回值将传入`R0`. 该`POP`指令恢复其他寄存器并加载`PC`以返回调用函数，但它不加载`R0`。如果您希望函数始终返回布尔值 true，那么您需要在加载之前添加一条`POP`指令`R0`。

# ruby-on-rails - RoR：带有设计的嵌套表单

> ID：13609840
> 
> 赞同：1
> 
> 时间：2012-11-28T16:30:36.453
> 
> 标签：ruby-on-rails, forms, devise, nested, profiles

我是 RoR 的新手，我想我可以请你帮忙。我没有找到我正在寻找的具体答案。

我想使用 Devise 进行建模时遇到问题。Devise 设置了一个 Member 模型，我想要一个 SuperMember 模型，它比 Member 具有更多的属性和一些不同的视图。

我想设置一个嵌套表单来创建一个超级会员，同时在后台自动创建会员帐户。

Member.rb（由设计生成）

```
class Member < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable
  attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

超级会员.rb

```
class Supermember < ActiveRecord::Base
  attr_accessible :first_name, :last_name
  belongs_to :member, :dependent => :destroy
  accepts_nested_attributes_for :member
end 
```

超级成员.controllers.rb

```
def new
@supermember = Supermember.new
  @supermember.member = Supermember.build

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @supermember }
  end
end

def create
  @supermember = Supermember.new(params[:supermember])

  respond_to do |format|
  if @supermember.save
    format.html { redirect_to @supermember, notice: 'Supermember was successfully created.' }
    format.json { render json: @supermember, status: :created, location: @supermember }
  else
    format.html { render action: "new" }
    format.json { render json: @supermember.errors, status: :unprocessable_entity }
  end
end 
```

我尝试创建一个嵌套表单以生成成员和超级成员：

```
<%= simple_form_for(@supermember) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :first_name %>
    <%= f.input :last_name %>
  </div>

    <% # Devise member %>
    <%= f.fields_for :member do |m| %>
  <div class="form-inputs">
    <%= m.input :email, :required => true, :autofocus => true %>
    <%= m.input :password, :required => true %>
    <%= m.input :password_confirmation, :required => true %>
  </div>
    <% end %>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

问题是，当我提交此表单时，我收到以下错误消息：

```
Can't mass-assign protected attributes: member_attributes

Application Trace | Framework Trace | Full Trace
  app/controllers/supermembers.rb:44:in `new'
  app/controllers/supermembers.rb:44:in `create' 
```

我真的不明白如何解决它。你能帮我解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:33:03.477

您需要允许超级会员接受会员属性的批量分配

```
class Supermember < ActiveRecord::Base
  attr_accessible :first_name, :last_name, :member_attributes
  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:37:27.887

如果您要做的是向成员添加属性，那么这样做是完全可以的。没有必要仅为此目的创建超级成员（当然，如果您有其他议程，请继续...）。

设备不关心您是否向模型添加属性，即使它是由它生成的。

# php - 检查密码时PHPPass不起作用

> ID：13609845
> 
> 赞同：0
> 
> 时间：2012-11-28T16:30:42.937
> 
> 标签：php, bcrypt, phpass

我正在尝试将 PHPass 与新站点一起使用。我生成了这样的哈希并将其存储在数据库中：

```
$hasher = new \Hautelook\Phpass\PasswordHash(8, true);
$password = $hasher->HashPassword('secretpassword');
// I store $password in the DB for the user 
```

在登录页面上，我获取用户并使用 CheckPassword 来查看它们是否相同：

```
function authUser($username, $password, $hasher, $db) {
    $sql = "SELECT * FROM users WHERE username = :username";
    $stmt = $db->prepare($sql);
    $stmt->bindValue("username", $username);
    $stmt->execute();
    $user = $stmt->fetch();

    $check = $hasher->CheckPassword($password, $user['password']);
    if($check) {
        return $user;
    } else {
        return null;
    }
} 
```

`$user['password']`确实包含我存储的正确哈希，所以我知道这是正确的。`$password`是从表单传入的明文密码。`CheckPassword()`总是返回 false，但是从我今天早上阅读的所有教程来看，这看起来是正确的并且应该可以工作。`$hasher`以相同的方式创建，成本为 8，便携设置为 true。

我不明白为什么 CheckPassword 总是返回 false。我是否需要以不同于哈希时的方式初始化 CheckPassword 的哈希？我错过了一些简单的东西吗？

我在 CentOS 6.3 上运行 PHP 5.3.19，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:43:06.197

检查数据库中的密码大小，如果它<50，那么它可能在存储完整哈希时有问题，这就是为什么总是错误的

# java - 为什么这个while循环会给我一个语法错误？

> ID：13609846
> 
> 赞同：-2
> 
> 时间：2012-11-28T16:30:47.477
> 
> 标签：java, syntax

这段代码：

```
@Service
public class IvsImport {

    private Logger logger = Logger.getLogger(IvsImport.class);

    @Autowired
    FileReader fileReader;

    @Autowired
    ValueProcessorProvider provider; 

    CSVEntryParser<IvsBerichtPojo> entryParser = new AnnotationEntryParser<IvsBerichtPojo>(IvsBerichtPojo.class, provider);
    CSVReader<IvsBerichtPojo> ivsBerichtReader = new CSVReaderBuilder<IvsBerichtPojo>(fileReader).entryParser(entryParser).build();

    public IvsImport(){}

    public FileReader getFileReader() {
        return fileReader;
    }

    public void setFileReader(FileReader fileReader) {
        this.fileReader = fileReader;
    }

    Iterator<IvsBerichtPojo> it = ivsBerichtReader.iterator(); //this } is not OK????
    while(it.hasNext()) {
            IvsBerichtPojo bericht = it.next();
            logger.info(bericht.getScheepsNummer()); 
    }
} //and here????? 
```

在迭代器声明之后和最后一个大括号处给我一个语法错误：

```
Syntax error, insert "}" to complete ClassBody 
```

但是当我这样做时，什么都没有改变....

请帮忙！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T16:32:03.670

您不能在方法之外编写代码。您需要编写可执行代码的方法。

将您的 while 循环放入任何方法中，然后查看它是否已编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T16:32:42.373

因为您的 while 循环存在于任何其他方法之外。您必须将其放入方法中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T16:33:06.803

您不能在方法/构造函数之外编写此类代码。您只能在该级别声明变量。将带有 while 循环的代码放在**方法主体**中，您的编译器错误就会消失。

更多要补充的是，您只能在类体内编写方法/构造函数/初始化块/变量声明。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-28T16:33:58.753

您直接在类体中编写代码，这是不正确的。相反，您的代码应该是某个方法的一部分。

```
public void logDetails(){
    Iterator<IvsBerichtPojo> it = ivsBerichtReader.iterator();
    while(it.hasNext()) {
        IvsBerichtPojo bericht = it.next();
        logger.info(bericht.getScheepsNummer()); 
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T17:57:49.243

在方法中编写代码，因为执行该代码需要方法。因此，将您的 while 循环放在任何方法中。谢谢！！

# javascript - jquery/javascript 加载混乱

> ID：13609849
> 
> 赞同：0
> 
> 时间：2012-11-28T16:30:51.197
> 
> 标签：javascript, jquery

我在我的网站上使用 jquery 和一些普通的 javascript，有人告诉我，我最好在页面的结束正文标记处以最小化形式加载所有 javascript，而不是像现在那样在标题中加载.

我还被告知我应该将我所有的 JS 集中到一个文件中以减少请求数量，尽管我也被告知我的一些 javascript 将无法包含在这个大型文件中因为 FB 需要它（例如）。

所以现在我完全糊涂了。首先，1）我使用 jquery 和 jquery.ui，可以将它们集中到大型文件中并在最后加载吗？

2）我可以将当​​前出现在我的页面源中的所有内容都粘贴到这个文件中吗？

3) 我必须遗漏什么？

当你是一个学习者时，这一切都有点不知所措

如您所见，该网站位于[http://www.traditionalirishgifts.c ​​om/ 我加载：](http://www.traditionalirishgifts.com/)

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

以及一堆其他 javascripts

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:36:20.583

正如评论所指出的，答案取决于许多变量。

您是否使用任何服务器端 Web 框架？任何物有所值的 Web 框架都会为您提供 javascript 和 css 连接的选项。通常，这些选项允许您定义您希望串联发生的确切方式。某些 js 文件会不经常更改，例如 jquery、jquery ui。而某些其他文件会经常更改，例如您自己的应用程序脚本。在决定连接什么时，可以考虑所有这些。

如果您可以分享您使用的服务器端技术和 Web 服务器，我可以帮助您找到具体的解决方案。

**关于你的三个问题，**都是关于管理你的依赖关系。如果您的应用程序脚本或“当前出现在我的页面源中被脚本标签包围的任何内容”依赖于 jQuery 或任何其他库，那么它们将需要在 jquery 或所述库之后包含。

依赖关系也可能存在于 DOM 中。如果您的脚本直接使用输出 html，`document.write`那么您将无法轻松移动它们。

我浏览了您链接到的网站主页的 html。该文件中的 js 代码可以移动到正文末尾之前，但您需要确保它们以相同的顺序出现。您包含的所有插件似乎都在初始化`document.ready`，只有在所有 html/js/css 被解析后才会发生。

您已经从 CDN 引用 jquery/jqueryui，因此不要将它们添加到连接文件中。

我没有注意到任何您无法连接的代码（由于使用 FB）。那就是说你可以问那个告诉你的人解释原因。

[最后，您可以在YSlow (http://developer.yahoo.com/performance/rules.html)](http://developer.yahoo.com/performance/rules.html)和[Google Page Speed (https://developers.google.com/speed/docs](https://developers.google.com/speed/docs/best-practices/rules_intro) )上阅读有关优化前端加载时间的更多信息[/最佳实践/rules_intro)](https://developers.google.com/speed/docs/best-practices/rules_intro)

就个人而言，我建议您继续将所有内容移至正文结束之前。如果出现问题，请针对您收到的错误提出有关 SO 的问题。

# apache - mod_rewrite 代理超时

> ID：13609852
> 
> 赞同：6
> 
> 时间：2012-11-28T16:30:58.460
> 
> 标签：apache, mod-rewrite

我有 apache 设置来代理对后端应用服务器的请求。有几个后端服务器，并且有一个很大的 rewrite_rules 文件，每个请求都会处理该文件，以正确地将所有请求代理到应用服务器。一个特定的应用服务器有时需要很长时间才能响应，如果大量请求被代理到该特定服务器，则会导致代理服务器变慢，因为请求正在等待返回响应并最终在指定的超时后超时对于 apache 请求。我只想为这个特定的重写规则设置一个超时值，它小于 apache 超时值，以便资源快速释放并避免在高峰流量时间出现其他问题。我尝试使用

或指令将 ProxyTimeout ProxyTimeout 30

但是这是不允许的。感谢专家对此问题的任何帮助。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-09T10:33:08.857

我刚刚遇到了这个问题，并通过增加 httpd.conf 中的整体超时指令来解决它。所以，改变：

```
#
# Timeout: The number of seconds before receives and sends time out.
#
Timeout 60 
```

到更合适的值。

[能够为单个 URL 执行此操作会很棒，但由于此处缺少响应和Apache 邮件列表](http://apache-http-server.18135.x6.nabble.com/ProxyTimeout-and-mod-rewrite-proxy-request-td4751417.html)，这似乎是不可能的。

# javascript - javascript字体大小调整

> ID：13609853
> 
> 赞同：1
> 
> 时间：2012-11-28T16:31:03.110
> 
> 标签：javascript

如果文本对于框来说太大（适合框），我有一个算法可以减小给定文本框中的字体大小

它工作得很好，但它确实效率低下，因为它实际上只是将字体大小减小了 1 直到它适合。

任何人都可以帮助我提高效率，例如二进制切碎或其他东西吗？

代码是：

```
function fitToBox(object, maxFontSize, minFontSize, maxHeight) {
    var box = document.getElementById(object);
    var currentHeight = box.offsetHeight;                       
    var currentFontSize = maxFontSize;                  
    do {
        box.style.fontSize = currentFontSize+"pt";
        currentFontSize = box.style.fontSize.replace("pt", "");
        currentHeight = box.offsetHeight;                                                       
        if(currentHeight >= maxHeight) {
            currentFontSize -= 1;
        }
    } while (currentHeight > maxHeight && currentFontSize > minFontSize);
    box.style.lineHeight = currentFontSize+"pt";
} 
```

HTML 中的完整示例（只需向 div 添加更多文本以查看正在进行的拟合）

```
<html>
<head>
<script type="text/javascript">
function fitToBox(object, maxFontSize, minFontSize, maxHeight) {
    var box = document.getElementById(object);
    var currentHeight = box.offsetHeight;                       
    var currentFontSize = maxFontSize;                  
    do {
        box.style.fontSize = currentFontSize+"pt";
        currentFontSize = box.style.fontSize.replace("pt", "");
        currentHeight = box.offsetHeight;                                                       
        if(currentHeight >= maxHeight) {
            currentFontSize -= 1;
        }
    } while (currentHeight > maxHeight && currentFontSize > minFontSize);
    box.style.lineHeight = currentFontSize+"pt";
}
</script>
</head>
<body>

<div id="fitme" style="background-color: yellow; font-size: 24pt; width: 400px;">
    This is some text that is fit into the box This is some text that is fit into the box This is some text that is fit into the box
</div>

<script type="text/javascript">
    fitToBox("fitme", 24, 4, 80);
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:42:20.687

这是一个将循环计数从示例中的 9 减少到 4 的版本：

```
function fitToBox(box, maxFontSize, minFontSize, maxHeight) {
    inc = (maxFontSize - minFontSize) / 2;
    currentFontSize = minFontSize + inc;
    box.style.fontSize = currentFontSize+"pt";
    while(inc >= 1) {
        if(box.offsetHeight > maxHeight) {
            dir = -1;
        } else {
            dir = 1;
        }
        inc = Math.floor(inc/2);
        currentFontSize += (dir * inc);
        box.style.fontSize = currentFontSize+"pt";
    }
} 
```

它首先假设中间大小是一个好的开始，并且二进制切碎到最大值以下的最佳拟合，并根据需要改变方向。

我不知道你为什么要更改 CSS 行高，所以我没有这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:43:39.717

你能做这样的事情来测量以 px 为单位的字体高度吗？

```
 function fitToBox(object, maxFontSize, minFontSize, maxHeight) {
     var box = document.getElementById(object);                       
     var currentFontSize = box.offsetHeight - 6; //however much space you want to leave                  
     if(currentFontSize > maxFontSize){
          currentFontSize = maxFontSize;
     }else if(currentFontSize < minFontSize){
          currentFontSize = minFontSize;
     }
     box.style.lineHeight = currentFontSize+"px";
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:45:42.383

尝试根据盒子样式计算最大允许大小。

获取元素高度 - 顶部填充 - 底部填充，您将获得最大尺寸。

```
var height = parseInt(box.clientHeight);
var pt = parseInt(box.style.paddingTop);
var pb = parseInt(box.style.paddingBottom);
var fontsize = (height - pt - pb) + "px"; 
```

至于下一部分。在检测溢出时想到的解决方案是执行类似的操作。

```
var boxClone = box.cloneNode(true)
boxClone.style.visibility = "hidden";
boxClone.id = "boxClone";
document.getElementsByTagName('body')[0].appendChild(boxClone);

box.onkeydown = function(e) { 

} 
```

在 keydown 事件中，截取即将附加的字符并将其附加到 boxclone 中 - 然后测量其大小并将其与原始字符进行比较。一旦你知道了数字，你就可以相应地调整你的文本。

# c# - 如何组织自定义 SQl 查询集合

> ID：13609855
> 
> 赞同：1
> 
> 时间：2012-11-28T16:31:07.993
> 
> 标签：c#, .net, sql, sqlite, windows-phone-7

我正在使用 SQlite 为 Windows Phone 开发一个应用程序，并且有很多自定义 SQL 查询。喜欢

```
string query = "SELECT distinct(destinations.name) as Destinations 
                FROM destinations, flights 
                WHERE destinations.d_ID = flights.d_ID 
                AND flights.Date = #" + date.ToShortDateString() + "#"; 
```

然后运行：

```
 var result = (Application.Current as App).db.Query(query); 
```

为了使用 SQlite，我正在使用[http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx#s2-introduction- to-sqlite-client-for-windows-phone](http://dotnetslackers.com/articles/silverlight/Windows-Phone-7-Native-Database-Programming-via-Sqlite-Client-for-Windows-Phone.aspx#s2-introduction-to-sqlite-client-for-windows-phone) 和他们的 DBHelper

我希望所有查询都在一个地方，所以我可以快速更改它们。

想请问如何正确操作？

*   创建一个静态类
*   使用查询集合创建枚举或字典
*   使用集合创建一些 XML 或类似文件 -

感谢您的建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:07:45.017

我不认为任何方法都是有效的，原因如下：

**创建一个静态类**

这是一个[上帝对象](http://en.wikipedia.org/wiki/God_object)，被认为是一种[反模式](http://en.wikipedia.org/wiki/Anti-pattern)，最好远离它。维护这将是一场噩梦。

**使用查询集合创建枚举或字典**

你现在没有一个上帝对象，而是一个上帝集合，并且实际上只是以不同的方式实现相同的反模式。

此外，您将拥有字符串键（或枚举键），并且两者之间没有强链接（如果字典由于某种原因没有填充怎么办？）。

**使用集合创建一些 XML 或类似文件**

有人可能会争辩说，您正在做与字典相同的事情。您必须以*某种方式*键入查询，然后进行查找。这是一种非常脆弱的方法。

**可能的解决方案**

我建议您首先将数据层抽象为逻辑单元。为相关的数据操作创建一个类。

例如，如果您有一些与目的地相关的查询和操作，请创建一个公开这些操作的接口：

```
public interface IDestinationDataOperations
{
    // Get destinations by date.
    IEnumerable<string> GetDestinationsByDate(DateTime asOf);
} 
```

然后，创建一个实现此特定于 SQL Lite 的类。在您要进行调用的地方，该变量属于*接口*类型。

这样做的好处是：

*   如果您将实现从 SQL Lite 更改为其他一些底层数据存储（Web 服务调用、JSON REST 调用等），您只需更改填充接口变量的位置（这是开始使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)的位置），如你所有的电话都反对*抽象*

*   接口更容易测试：

    *   您可以针对您想要的任何测试数据测试直接实现
    *   对于依赖于接口的项目，您可以以任何您喜欢的方式模拟接口，并且在下面没有用于测试的*实际*数据库。

然后，对于其他数据操作，您可以清洗、漂洗和重复。

对于奖励积分，您可以将界面分离为写入[的工作单元和读取的](http://www.google.com/url?sa=f&rct=j&url=http://martinfowler.com/eaaCatalog/unitOfWork.html&q=unit%20of%20work&ei=WUS2UOraGZHK0AGyroGgBg&usg=AFQjCNFMUJOEI8tFmMKWlYSKK5-oHStB9w)[存储库](http://martinfowler.com/eaaCatalog/repository.html)，具体取决于最适合您的需求。

# wcf - 由 maxReceivedMessageSize 引起的 WCF TimeoutException

> ID：13609857
> 
> 赞同：0
> 
> 时间：2012-11-28T16:31:15.870
> 
> 标签：wcf, wcf-binding, nettcpbinding

我们注意到我们使用 netTcpBinding 的应用程序突然停止工作。在检查托管服务的服务器上的事件日志后，我发现了以下警告（许多警告之一）：

> 异常信息：异常类型：TimeoutException 异常消息：打开操作未在分配的 00:01:00 超时内完成。分配给此操作的时间可能是较长超时的一部分。
> 
> 服务器堆栈跟踪：在 System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout) 在 System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) 在 System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
> 在 System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) 在 System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade) 在 System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout) 在 System. System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)。 ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息）

为了解决这个问题，我不得不将 maxReceivedMessageSize 的大小增加 10，所以我的新绑定如下所示：

```
>  <netTcpBinding>
>     <binding name="largeBufferNetTcpBinding" listenBacklog="100" maxBufferSize="519730000" maxConnections="100"
>              maxReceivedMessageSize="519730000" portSharingEnabled="true">
>       <readerQuotas maxArrayLength="519730000"/>
>       <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false"/>
>       <security>
>         <message clientCredentialType="Windows"/>
>       </security>
>     </binding>
>     <binding name="defaultNetTcpBinding" portSharingEnabled="true"/>
>     <binding name="defaultNetTcpMexBinding" portSharingEnabled="true">
>       <security mode="None"/>
>     </binding>      </netTcpBinding> 
```

我不明白 maxReceivedMessageSize 与上面显示的 TimeoutException 有何关系。我可以做些什么来进一步解决这个问题并使服务更可靠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:05:21.853

根据您问题中的信息，很难准确判断您的客户/服务交互中发生了什么，但这里有一些事情可以尝试：

首先，将您设置为 519730000 的所有内容更改回默认值，除了 maxReceivedMessageSize 应设置为 2 - 3 MB 范围内的值（从 2097152 开始并增加直到该消息大小异常消失）。

如果这不起作用，请保留我建议的相同设置，但将配置更改为，`basicHttpBinding`而不是`netTcpBinding`在此测试的服务和客户端中。如果此绑定更改有效，那么很可能您没有正确处理 WCF 客户端实例（`ClientBase`或来自 的通道`ChannelFactory`）。`netTcpBinding`取决于会话，如果客户端实例未正确处理，则您的代码不会在服务和客户端上有效地释放 TCP 资源。顺便说一句：包装客户端实例`using`也不是正确的方法，因为[WCF Dispose 实现](http://geekswithblogs.net/DavidBarrett/archive/2007/11/22/117058.aspx)的时髦。

如果调用仍然有超时，那么您几乎已经消除了不良的 TCP 和客户端配置，您应该关注服务实现的代码性能。

# ios - 锁定 iOS 设备扫描 BTLE 设备

> ID：13609859
> 
> 赞同：5
> 
> 时间：2012-11-28T16:31:20.510
> 
> 标签：ios, bluetooth, core-bluetooth

iOS 设备是否可以在锁定时扫描蓝牙 LE 设备的存在，然后通过打开应用程序来响应它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:42:33.967

扫描绝对可以在后台进行。

为了获得您正在谈论的功能，欧文的评论是正确的。我会稍微扩展一下。

我们所做的是，当我们识别出我们感兴趣的 BLE 设备并希望打开该应用程序时，我们会将信息发送到我们的服务器，如果用户需要，我们可以从那里发送推送通知。这也可以通过在未来一段时间内设置本地通知来实现。从那里标准规则适用于推送通知，如果他们选择查看它，您的应用程序可以打开，您可以响应最初触发的 BLE 设备的接近度。不过，用户始终可以选择忽略通知。

# flash - 在 Google 地球 kmz 中嵌入 Flash 播放器

> ID：13609862
> 
> 赞同：1
> 
> 时间：2012-11-28T16:31:27.693
> 
> 标签：flash, google-earth, kmz

我之前制作了一个嵌入了 Flash 视频内容的 Google 地球 kml。为了正确播放标签中的内容，我在我的网络服务器上托管了一个 Flash 播放器（当前使用 flowplayer），并在描述标签中使用了以下 HTML。这完美地工作：

```
 <description><![CDATA[ 
            <object id="flowplayer"
                    data="http://foo.com/flowplayer/flowplayer-3.2.15.swf" width="320" height="180"
                    type="application/x-shockwave-flash">
                <param name="movie" value="http://foo.com/flowplayer/flowplayer-3.2.15.swf" />
                <param name="flashvars" value='config={"clip":"http://foo.com/movies/flv/video.flv"}'/>
          </object>]]></description> 
```

但是，要求未连接到互联网的用户能够查看内容。我知道如何在 kmz 中正确嵌入图像和其他文件并让它们工作，但是 flashplayer 无法使用以下描述标签工作：

```
 <description><![CDATA[ 
            <object id="flowplayer"
                    data="flowplayer/flowplayer-3.2.15.swf" width="320" height="180"
                    type="application/x-shockwave-flash">
                <param name="movie" value="flowplayer/flowplayer-3.2.15.swf" />
                <param name="flashvars" value='config={"clip":"movies/flv/video.flv"}'/>
          </object>]]></description> 
```

kmz中的文件夹结构如下：

```
archive.kmz
|- doc.kml
|- flowplayer
   |- flowplayer-3.2.15.swf
|- movies
   |- flv
      |- video.flv 
```

似乎甚至没有加载 Flash 播放器（内容呈现好像它正在尝试加载 Flash 视频但没有看到任何 flowplayer 图像或错误）。有没有人尝试过这样的事情或有任何想法为什么这不能通过相对路径工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T11:34:16.523

我用本地的 flv 电影尝试了同样的事情，但我遇到了同样的问题。这似乎是因为安全问题。我试图在 html 页面中播放它，但由于 ActiveX 安全性，Internet Explorer 阻止了它。一个可行的解决方案是使用小型 Web 服务器（如 tinyweb）并将 kml 中 swf 和 flv 的链接替换为 http://localhost/swf/...swf 和 http://localhost/mymovies/.. .flv。tinyweb 服务器必须在打开 kml（或 kmz）之前启动。一个解决方案是制作一个sfx包来获取一个exe文件。打开 exe 文件时，可以运行启动 tiny.exe 和之后的 kmz 文件的脚本。这有点复杂，但我认为这可能是一个解决方案。

# spring - Spring roo 1.2.2 和 GWT 2.5 兼容性

> ID：13609866
> 
> 赞同：1
> 
> 时间：2012-11-28T16:31:40.147
> 
> 标签：spring, gwt, maven, spring-roo

我正在尝试使用 Spring Roo 和 GWT 部署应用程序。我是 GWT 和 Roo 的初学者，并按照[本](https://developers.google.com/web-toolkit/doc/2.1/tutorial/roo-sts)教程开始，但似乎存在问题，因为无法使用 mvn:gwt run 启动示例应用程序。上述maven命令的结果：

```
[信息]                                                                         
[信息] --------------------------------------------- -------------------------
[信息] 构建 gwt_crash.ly 0.1.0.BUILD-SNAPSHOT
[信息] --------------------------------------------- -------------------------
[信息]
[信息] >>> gwt-maven-plugin:2.2.0:run (default-cli) @ gwt_crash.ly >>>
[信息]
[信息] --- aspectj-maven-plugin:1.2:compile (默认) @ gwt_crash.ly ---
[错误] EntityManager 类型中的方法 createQuery(String) 不适用于参数 (String, Class)
[错误] EntityManager 类型中的方法 createQuery(String) 不适用于参数 (String, Class)
[错误] EntityManager 类型中的方法 createQuery(String) 不适用于参数 (String, Class)
[错误] EntityManager 类型中的方法 createQuery(String) 不适用于参数 (String, Class)
[错误] EntityManager 类型中的方法 createQuery(String) 不适用于参数 (String, Class)
[错误] EntityManager 类型中的方法 createQuery(String) 不适用于参数 (String, Class)
[错误] EntityManager 类型中的方法 createQuery(String) 不适用于参数 (String, Class)
[错误] EntityManager 类型中的方法 createQuery(String) 不适用于参数 (String, Class)
[错误] EntityManager 类型中的方法 createQuery(String) 不适用于参数 (String, Class)
[警告] org.springframework.orm.jpa.aspectj.JpaExceptionTranslatorAspect 中定义的建议尚未应用 [Xlint:adviceDidNotMatch]
[警告] org.springframework.mock.staticmock.AnnotationDrivenStaticEntityMockingControl 中定义的建议尚未应用 [Xlint:adviceDidNotMatch]
[警告] org.springframework.mock.staticmock.AbstractMethodMockingControl 中定义的建议尚未应用 [Xlint:adviceDidNotMatch]
[警告] org.springframework.mock.staticmock.AbstractMethodMockingControl 中定义的建议尚未应用 [Xlint:adviceDidNotMatch]
[警告] org.springframework.scheduling.aspectj.AbstractAsyncExecutionAspect 中定义的建议尚未应用 [Xlint:adviceDidNotMatch]
[信息] --------------------------------------------- -------------------------
[信息] 构建失败
[信息] --------------------------------------------- -------------------------
[INFO] 总时间：50.725s
[INFO] 完成时间：2012 年 11 月 28 日星期三 18:10:54 EET
[INFO] 最终内存：10M/81M
[信息] --------------------------------------------- -------------------------
[错误] 无法在项目 gwt_crash.ly 上执行目标 org.codehaus.mojo:aspectj-maven-plugin:1.2:compile (default)：编译器错误：
[错误] 返回 entityManager().createQuery("SELECT COUNT(o) FROM Report o", Long.class).getSingleResult();
[错误] ^^
[错误] /Users/alexsapran/Documents/workspace_j2ee/gwt_crash.ly/src/main/java/ly/crash/gwt/server/domain/Report_Roo_Jpa_ActiveRecord.aj:24:0::0 中的方法 createQuery(String) EntityManager 类型不适用于参数（字符串、类）
[ERROR] 返回 entityManager().createQuery("SELECT o FROM Report o", Report.class).getResultList() 时出错；
[错误] ^^
[错误] /Users/alexsapran/Documents/workspace_j2ee/gwt_crash.ly/src/main/java/ly/crash/gwt/server/domain/Report_Roo_Jpa_ActiveRecord.aj:28:0::0 中的方法 createQuery(String) EntityManager 类型不适用于参数（字符串、类）
[错误] 返回 entityManager().createQuery("SELECT o FROM Report o", Report.class).setFirstResult(firstResult).setMaxResults(maxResults).getResultList() 时出错；
[错误] ^^
[错误] /Users/alexsapran/Documents/workspace_j2ee/gwt_crash.ly/src/main/java/ly/crash/gwt/server/domain/Report_Roo_Jpa_ActiveRecord.aj:37:0::0 中的方法 createQuery(String) EntityManager 类型不适用于参数（字符串、类）
[ERROR] 返回 entityManager().createQuery("SELECT COUNT(o) FROM Employee o", Long.class).getSingleResult();
[错误] ^^
[错误] /Users/alexsapran/Documents/workspace_j2ee/gwt_crash.ly/src/main/java/ly/crash/gwt/server/domain/Employee_Roo_Jpa_ActiveRecord.aj:24:0::0 中的方法 createQuery(String) EntityManager 类型不适用于参数（字符串、类）
[ERROR] 返回 entityManager().createQuery("SELECT o FROM Employee o", Employee.class).getResultList() 时出错；
[错误] ^^
[错误] /Users/alexsapran/Documents/workspace_j2ee/gwt_crash.ly/src/main/java/ly/crash/gwt/server/domain/Employee_Roo_Jpa_ActiveRecord.aj:28:0::0 中的方法 createQuery(String) EntityManager 类型不适用于参数（字符串、类）
[错误] 返回 entityManager().createQuery("SELECT o FROM Employee o", Employee.class).setFirstResult(firstResult).setMaxResults(maxResults).getResultList() 时出错；
[错误] ^^
[错误] /Users/alexsapran/Documents/workspace_j2ee/gwt_crash.ly/src/main/java/ly/crash/gwt/server/domain/Employee_Roo_Jpa_ActiveRecord.aj:37:0::0 中的方法 createQuery(String) EntityManager 类型不适用于参数（字符串、类）
[错误] 返回 entityManager().createQuery("SELECT COUNT(o) FROM Expense o", Long.class).getSingleResult();
[错误] ^^
[错误] /Users/alexsapran/Documents/workspace_j2ee/gwt_crash.ly/src/main/java/ly/crash/gwt/server/domain/Expense_Roo_Jpa_ActiveRecord.aj:24:0::0 中的方法 createQuery(String) EntityManager 类型不适用于参数（字符串、类）
[ERROR] 返回 entityManager().createQuery("SELECT o FROM Expense o", Expense.class).getResultList();
[错误] ^^
[错误] /Users/alexsapran/Documents/workspace_j2ee/gwt_crash.ly/src/main/java/ly/crash/gwt/server/domain/Expense_Roo_Jpa_ActiveRecord.aj:28:0::0 中的方法 createQuery(String) EntityManager 类型不适用于参数（字符串、类）
[错误] 返回 entityManager().createQuery("SELECT o FROM Expense o", Expense.class).setFirstResult(firstResult).setMaxResults(maxResults).getResultList() 时出错；
[错误] ^^
[错误] /Users/alexsapran/Documents/workspace_j2ee/gwt_crash.ly/src/main/java/ly/crash/gwt/server/domain/Expense_Roo_Jpa_ActiveRecord.aj:37:0::0 中的方法 createQuery(String) EntityManager 类型不适用于参数（字符串、类）
[错误] -> [帮助 1]
[错误]
[错误] 要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。
[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。
[错误]
[错误] 有关错误和可能的解决方案的更多信息，请阅读以下文章：
[错误] [帮助 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
```

我尝试过使用标准 eclipse 和 STS，但没有运气，我能找到的每个教程都是关于 roo 1.1.1 的。所以我的问题是 GWT 是否与 Roo 兼容，如果是，是否有可用的示例代码教程？有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:49:35.313

您可能会遇到一些版本不匹配的问题。

文档没有更改，但始终参考最新的 - [https://developers.google.com/web-toolkit/doc/latest/tutorial/roo-sts#install](https://developers.google.com/web-toolkit/doc/latest/tutorial/roo-sts#install)

GWT 2.5 的 最新[STS -](http://s3.amazonaws.com/dist.springframework.org/release/ROO/spring-roo-1.2.3.RELEASE.zip) [http://blog.springsource.org/2012/12/18/spring-roo-1-2-3-release-available/](http://blog.springsource.org/2012/12/18/spring-roo-1-2-3-release-available/)

还要确保您使用的是最新的 gwt-maven-plugin 2.5 版

# asp.net-mvc - LB 上的 ASP.NET MVC 3 应用程序

> ID：13609870
> 
> 赞同：0
> 
> 时间：2012-11-28T16:31:48.577
> 
> 标签：asp.net-mvc, load-balancing

我们在生产中部署了一个 ASP.NET MVC 3 应用程序，LB 上有 3 个服务器。通过 SSL 访问的应用程序分别在这些服务器中的每一个中运行。当它在具有 LB 的域上时，相同的 Urls 会无限循环。任何想法，提前谢谢

-乔治

# javascript - toLowerCase() 返回未定义

> ID：13609872
> 
> 赞同：1
> 
> 时间：2012-11-28T16:31:50.610
> 
> 标签：javascript

我在这里遇到了一个奇怪的问题。我有这样的代码：

```
for (var j = events.length - 1; j >= 0; j--) {
    var evtName = events[j].name.toLowerCase();
    //Do something um evtName
} 
```

是一个带有 JSON 对象的`events`数组。

问题是有时 evtName 被设置为未定义，我不知道为什么。我试着放`console.log(events[j].name + ' - ' + evtName);`，输出是：

```
ENSAIO ABERTO - undefined
PERCUSSÃO TRADICIONAL PORTUGUESA - undefined 
VIAGEM À MÚSICA ANTIGA[CONCERTOS PARA TODOS] - undefined
A MÚSICA TOMA CONTA DE MIM - undefined
NOVIDADES SINFÓNICAS - undefined
OPTIMUS CLUBBING | THE PAINS OF BEING PURE AT HEART | SEBASTIAN DJ - undefined
ENSAIO ABERTO - undefined
DE GOUNOD A RAVEL - undefined 
ORQUESTRA SINFÓNICA DA ESMAE - undefined 
MÚSICA DE BOLSO[WORKSHOPS PRIMEIROS SONS] - undefined 
MISSÃO EM-POSSÍVEL [MÚSICA EM FAMÍLIA] - missão em-possível [música em família]
ENSAIO ABERTO - ensaio aberto 
CRIOLO - criolo 
OPTIMUS CLUBBING | SUPERNADA | THE MAGICIAN | JORI HULKKONEN - optimus clubbing |    supernada | the magician | jori hulkkonen 
```

而且我知道问题出在归因上，`var evtName = events[j].name.toLowerCase();`因为如果我把`console.log(events[j].name + ' - ' + events[j].name.toLowerCase());`字符串更正为“小写”。

我试图把`toString()`归因，也没有工作。

我需要将它放在一个变量中，因为我需要对其进行更多格式化（比如将首字母大写等）。

有什么帮助吗？提前致谢

找到了。这是一个缺少的'{'。虽然控制台没有提醒它......我真的很抱歉耽误了你们的时间，感谢所有帮助过的人

# c - C. 中的链接列表错误：类型冲突。解决方案？

> ID：13609875
> 
> 赞同：0
> 
> 时间：2012-11-28T16:32:01.353
> 
> 标签：c, pointers, linked-list, content-length

我定义了以下结构：

```
typedef struct PList{
    Person person;
    struct PList *nextPerson;  //  set to NULL by default <<<<<
}PList; 
```

这个方法：

```
int length(struct PList* db){
    PList* cur = db;
    int size = 0;
    while (cur != NULL){
    ++size;
    cur = cur->nextPerson;
}
    return size;
} 
```

> 错误：在长度方法的签名处引发了“长度”的冲突类型。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:34:36.023

这实际上意味着`length`在您的源代码结构的其他地方调用了另一个函数/声明，它具有不同的函数签名。

查找`length()`定义函数的位置，并将正确的结构对象传递给该函数（类型`struct PList`或`PList*`）

# php - 如何扩展子类？

> ID：13609883
> 
> 赞同：-1
> 
> 时间：2012-11-28T16:32:21.967
> 
> 标签：php, joomla, joomla2.5, subclass

我需要用我自己的类和一些方法来扩展 Joomla 中的所有模型，所以我再创建一个类

```
class Staff extends JModelLegacy{

    public function lol(){
        die('lol');
    }
} 
```

并用它扩展模型

```
require JPATH_BASE.'/components/com_component/misc/extend_model.php'; 

class ComponentModelSites extends Staff{
public function saveSiteInfo($input){
        $this->lol();
} 
```

问题是，当我打电话时，`saveSiteInfo`我得到了该方法`lol`未找到的致命错误，但`var_dump(get_class_methods($this));`显示了`JModelLegacy`. 我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:37:17.560

它工作正常，你一定做错了什么[其他]。

见[http://ideone.com/tDouwQ](http://ideone.com/tDouwQ)

```
<?php
class Staff {

    public function lol(){
        die('lol');
    }
}

class ComponentModelSites extends Staff{
public function saveSiteInfo($input){
        $this->lol();
}
}
$cms = new ComponentModelSites();
$cms->saveSiteInfo(null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:37:19.297

您的代码工作正常。

```
<?php

class Staff{

    public function lol(){
        die('lol');
    }
}

class ComponentModelSites extends Staff {

        public function saveSiteInfo($input){
                $this->lol();
        }
}

$obj = new ComponentModelSites();
$obj->saveSiteInfo(1); 
```

给出预期的结果。您必须包含错误的文件或做一些愚蠢的事情，但我无法从给出的示例中看出。

# iphone - 向服务器发送 json 数据

> ID：13609884
> 
> 赞同：0
> 
> 时间：2012-11-28T16:32:28.687
> 
> 标签：iphone, objective-c, ios, json, wcf

我正在向服务器发送 json 数据并出现错误

json -

*   { GETDatetime = "/日期(1354119549)/"; }

错误 -

*   服务器在处理请求时遇到错误。异常消息是“SqlDateTime 溢出。必须介于 1753 年 1 月 1 日上午 12:00:00 和 9999 年 12 月 31 日晚上 11:59:59 之间。

*obj-c 中的代码*

```
NSString* json = [dict JSONRepresentation];
//NSString *myRequestString = @"param="; // Attention HERE!!!!
//myRequestString = [myRequestString stringByAppendingString:json];
NSURL *url = [NSURL URLWithString:reqUrlStr];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

NSData *requestData = [NSData dataWithBytes:[json UTF8String] length:[json length]];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody: requestData]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:15:03.603

答案是在创建时间戳时**不要**乘以 1000（如您提供的链接中所示）。

1354119549233 是格林威治标准时间 44880 年 5 月 3 日星期五 23:13:53

1354119549 是格林威治标准时间 2012 年 11 月 28 日星期三 16:19:09

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T18:10:03.743

以下是我将日期传递给（以及相反地，从）Web 服务的方式......

```
NSDate *someDate = [NSDate date];

// get the serverDateFormat in an initial transaction with the server
// or, simpler and more brittle, hardcode something like the following ...
NSString *serverDateFormat = @"yyyy-MM-dd'T'HH:mm:ss'Z'";

// prepare a date formatter.  i allocate and hang onto this at init, but
// you can just do this inline to get started...
_dateFormatter = [[NSDateFormatter alloc] init];
[_dateFormatter setDateFormat:serverDateFormat];
[_dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];

// this is in a category method on NSDate called asHttpParam, but the code
// here works fine to get started. the following gets the date ready to pass to server...
NSString *dateParam = [_dateFormatter stringFromDate:someDate]; 
```

您提到的 SO 日期解决方案有几个问题，包括日期的纪元基础不明确，以及对本地调整的硬编码 GMT。相比之下，无论客户端的时区如何，dateParam 都是一个明确的绝对日期。

将 dateParam 添加到您的请求中，因为您已经拥有它、%-encoding、设置内容长度等。

服务器端需要将日期解析为日期。在 Rails 中，使用上面的格式字符串会导致日期解析看起来像这样......

```
the_date_param = DateTime.parse(params[:the_date_param]) 
```

# asp.net-mvc - 如何在不构建程序集的情况下进入 MVC4 源代码

> ID：13609891
> 
> 赞同：27
> 
> 时间：2012-11-28T16:32:51.167
> 
> 标签：asp.net-mvc, debugging, asp.net-mvc-4

有没有一种简单的方法可以从我的解决方案中逐步完成 MVC 4 源代码？

我发现了这个[问题](https://stackoverflow.com/questions/1914226/how-to-step-into-system-web-mvc)，但解决方案需要从源代码构建 MVC 4 程序集。我认为从服务器查找符号会更好，但无法做到这一点。

想法？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-28T16:44:34.057

将以下符号服务器添加到您的 Visual Studio 中，您就可以开始了：

*   [http://referencesource.microsoft.com/symbols](http://referencesource.microsoft.com/symbols)
*   [http://srv.symbolsource.org/pdb/Public](http://srv.symbolsource.org/pdb/Public)
*   [http://srv.symbolsource.org/pdb/MyGet](http://srv.symbolsource.org/pdb/MyGet)
*   [http://msdl.microsoft.com/download/symbols](http://msdl.microsoft.com/download/symbols)

这是我的样子：

![配置了符号的选项对话框](../Images/388026e93c971741f78e6e26f966c839.png)

您还需要配置调试器以使用它们：

1.  工具 -> 选项 -> 调试器 -> 常规。
2.  取消选中“仅启用我的代码（仅限托管）”
3.  选中“启用 .NET Framework 源单步执行”
4.  勾选“启用源服务器支持”
5.  取消选中“要求源文件与原始版本完全匹配”

哦，当您不再需要在 .NET 源中进行调试时，当然不要忘记恢复这些设置，否则调试可能会成为您痛苦的缓慢体验。

# java - 如何从 javax.persistence.Query 获取查询字符串？

> ID：13609896
> 
> 赞同：8
> 
> 时间：2012-11-28T16:33:00.410
> 
> 标签：java, jpa, orm, query-string

也许我遗漏了一些东西，但我只是想（在我的 java 程序中）从`javax.persistence.Query`对象中获取查询字符串？`Query`对象本身似乎没有这样做的方法。我也知道我们的经理不希望我们使用 Spring 框架的东西（例如使用他们的`QueryUtils`类）。

有没有办法简单地从`javax.persistence.Query`对象中获取查询字符串（同样，在 java 程序中）？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-04-25T18:01:45.887

没问题。休眠：

```
query.unwrap(org.hibernate.Query.class).getQueryString() 
```

或eclipselink

`query.unwrap(JpaQuery.class).getDatabaseQuery().getJPQLString(); // doesn't work for CriteriaQuery query.unwrap(JpaQuery.class).getDatabaseQuery().getSQLString();`

或打开 JPA

```
query.unwrap(org.apache.openjpa.persistence.QueryImpl.class).getQueryString() 
```

……你懂的……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:54:45.230

JPA中没有标准方法，

如果您使用的是 EclipseLink，请参阅，

[http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_get_the_SQL_for_a_Query.3F](http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_get_the_SQL_for_a_Query.3F)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:54:54.713

没有 JPA 标准的方法，但一些实现有自己的方法。例如 DataNucleus JPA 允许你做

```
query.toString(); 
```

查看您的实现文档以了解他们是如何做到的。另请参阅此博客条目 [http://antoniogoncalves.org/2012/05/24/how-to-get-the-jpqlsql-string-from-a-criteriaquery-in-jpa/](http://antoniogoncalves.org/2012/05/24/how-to-get-the-jpqlsql-string-from-a-criteriaquery-in-jpa/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-28T16:26:45.100

如果 JPA 由 hibernate 提供，请编辑您的持久性属性文件。添加以下部分 -

```
<property name="hibernate.show_sql" value="true"/> 
```

# xml - 带有内联命名空间的 XSD

> ID：13609898
> 
> 赞同：3
> 
> 时间：2012-11-28T16:33:03.303
> 
> 标签：xml, xslt, xsd

我们有一个名为 Camstar 的托管应用程序。它提供围绕 WCF 构建的 SOAP Web 服务。

我有一个有效的有效载荷。我可以使用下面的有效负载从 SoapUI 调用 Web 服务。

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soapenv:Header>
      <WSShopFloorHeader xmlns="http://www.camstar.com/WebService/WSShopFloor">
         <UserName>abc</UserName>
         <Password>def</Password>
      </WSShopFloorHeader>
   </soapenv:Header>
   <soapenv:Body>
      <Submit xmlns="http://www.camstar.com/WebService/WSShopFloor">
         <serviceData xmlns:ns0="http://www.camstar.com/WebService/DataTypes" ns0:type="LotStart">
            <Factory>
               <__CDOTypeName/>
               <__name>X30</__name>
            </Factory>
            <Comments/>
            <Workflow>
                  <__name>TESTSTOREWF</__name>
                  <__rev/>
                  <__useROR>true</__useROR>
            </Workflow>
            <WorkflowStep>
                <__CDOTypeName/>
               <__name>DBINTSINVSPEC</__name>
            </WorkflowStep>
            <Qty>1000</Qty>
            <Qty2>10</Qty2>
            <Product>
                <__CDOTypeName/>
               <__name>9672-02-9450-D00.BW</__name>
                <__rev/>
               <__useROR>true</__useROR>
            </Product>
            <StartReason>
                  <__CDOTypeName/>
                  <__name>NORMAL</__name>
               </StartReason>
               <Owner>
                  <__CDOTypeName/>
                  <__name>PROD</__name>
               </Owner>
               <Level>
                  <__CDOTypeName/>
                  <__name>LOT</__name>
               </Level>
               <ContainerName>TEST004</ContainerName>
             </serviceData>
      </Submit>
   </soapenv:Body>
    </soapenv:Envelope> 
```

我无法弄清楚如何基于上述 XML 创建 XSD。唯一的命名空间在 Submit 和 serviceData 元素中，它们是内联的。

另外，如果我需要从一个源生成名称 xml 到另一个源，如何创建 XSLT？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:11:06.580

架构定义只能定义一个命名空间——因此您需要为所需的每个命名空间编写单独的架构定义。

由于您有两个命名空间（`.../WSShopFloor`并且`.../DataTypes`- “...”只是我的缩写）。您需要两个模式定义。

让我们从简单的开始：命名空间的模式定义`.../DataTypes`。我把它放在一个文件名“types.xsd”中——这对我们`import`以后的时候很重要。它*唯一*做的就是`type`在目标命名空间中定义属性：

```
$ cat types.xsd
<xsd:schema
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 targetNamespace="http://www.camstar.com/WebService/DataTypes"
>
  <xsd:attribute name="type"/>
</xsd:schema> 
```

现在为`.../WSShopFloor`命名空间的模式定义。（我不会做所有的内容，只是为了解决命名空间问题。我会假装`<Factory>`只是有字符串内容，并跳过其中的所有元素。）

```
<xsd:schema
 elementFormDefault="qualified"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
 xmlns:ns0="http://www.camstar.com/WebService/DataTypes"
 xmlns:tns="http://www.camstar.com/WebService/WSShopFloor"
 targetNamespace="http://www.camstar.com/WebService/WSShopFloor"
>
  <xsd:import
    namespace ="http://www.camstar.com/WebService/DataTypes"
    schemaLocation = "types.xsd"/>

  <xsd:import
    namespace = "http://schemas.xmlsoap.org/soap/envelope/"
    schemaLocation = "http://schemas.xmlsoap.org/soap/envelope/"/>

  <xsd:element name="WSShopFloorHeader">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="UserName" type="xsd:string"/>
        <xsd:element name="Password" type="xsd:string"/>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>

  <xsd:element name="Submit">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="serviceData">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element name="Factory" type="xsd:string"/>   <!-- skip -->
            </xsd:sequence>
            <xsd:attribute ref="ns0:type"/>
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>

</xsd:schema> 
```

首先，查看`types.xsd`模式定义的导入，并且（在顶部）`ns0`指的是同一个`.../DataTypes`命名空间。进一步向下看`<serviceData>`元素定义，其中有一个属性，该属性引用该命名空间中的该定义。

其次，我们还必须导入soap 信封模式定义。顺便说一句：模式实际上位于命名空间 URI，解析器会下载它。你也可以下载它，并参考你给它的文件名（实际上，这就是我所做的——它运行得更快，无需每次都下载）。

只是为了您的兴趣，请查看`.../soap/envelope`架构 - 它定义了顶级元素`<Envelope>`，并且因为我们导入它，我们的文档也可以将其作为顶级元素。`<Envelope>`定义`<Header>`和`<Body>`元素。`<Header>`可以包含任何内容，只要它位于不同的命名空间 ( [`##other`](http://www.w3.org/TR/xmlschema-0/#nsTable)) 中：

```
<xs:any namespace="##other" minOccurs="0" maxOccurs="unbounded" processContents="lax"/> 
```

`<Body>`可以包含任何内容，完全（`##any`- 也就是说，包括在 this, the `.../soap/envelope`, schema中定义的内容

```
<xs:any namespace="##any" minOccurs="0" maxOccurs="unbounded" processContents="lax"/> 
```

这[`processContents="lax"`](http://www.w3.org/TR/xmlschema-0/#ref33)意味着它仅在可以获取架构的情况下验证内容 - 如果无法获取架构，则不会给出错误。因此，为了确保我的模式确实被使用，我故意引入了一个错误（例如在元素名称中插入一个字母），以查看是否报告了错误。

* * *

顺便说一句：我想知道您的 xml 中是否有错误 - 该`<serviceData>`元素具有`ns0:type`来自命名空间的属性`.../Datatypes`。但这是该命名空间中唯一使用的东西......我希望如果元素被标记为“类型”，那么它的所有内容都来自该命名空间，这将通过一个`xmlns`属性来完成......所以也许被省略了？[当然，我只是在这里猜测-也许它是正确的]

*我也是刚学这个，所以上面可能有错误或误解——如果有人看到错误，请纠正我！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:45:37.813

我将分两部分回答这个问题：

**1) 用于 Soap XML 的 XSD：** 嗯。分享我的个人经验.. 我们从第三方获得 SOAP XML！SOAP XMLs 实际上称为 WSDL，有一堆命名空间，在我们的实时业务中，这些命名空间会发生变化。

*另一方面，如果您将其视为 XML：*
当您遇到针对不同节点具有不同命名空间的 XML 文件时！我的意思是，父节点的命名空间与子节点的命名空间不同..您需要提出多个与`<import>` *13ren*链接的 XSD 文件已经发布了答案..但是！这种验证不适用于大多数 XML 解析器！我自己亲身经历过！

我观察到它在 MS-visual studio 中工作，XSD 的多个分配工作！.. 当您尝试`XmlValidatingReader`在 .Net 中使用加载 XML 和 XSD 时失败了！！与任何其他在线验证工具的行为相同..

这个 SOAP XML 还有一个问题。它们带有一堆不同的命名空间，通过这种方法我们不能继续添加与命名空间一样多的 XSD 文件！

我还尝试过尝试使用 XSD 对抗 Soap XML 的 .net 代码。[这是链接](https://stackoverflow.com/questions/4391857/validate-soap-against-xsd-schema) ..但恐怕..我不能成功！

如果您手动验证 XML，我对 13ren 的方法表示赞同！

**2) 用于 XML 的 XSLT：** XSLT 是一种函数式编程语言（不是过程式的）。这就是你练习 XSLT 的方式：

> 首先，您尝试按原样复制整个 XML .. 了解对的意义 `<copy> and <apply-templates select="@*|*|text()"/>`.. 了解身份模板！必须理解 @ 的属性通知和 * 的元素通知以及 text() 形式的文本数据。
> 
> 尝试添加和删除元素和属性 .. 用于`<template match="element_or_Attribute_name"/>`删除元素/属性 .. 也`<value-of select=""/>`出现在这里 ..
> 
> 尝试将属性转换为元素，反之亦然..
> 
> 尝试移动一组元素，或父标签..在其他一些..使用和理解的意义`<for-each select=""/>`（这里有必要..）..也编写代码来重命名标签..和属性..
> 
> 使用不同的子标签名称和孙标签构建一个巨大的 XML 构建一个可以添加和删除大量标签的 XSL .. 使用您在此之前尝试过的所有这些可能性（一次一个）

供您参考的教程： [https ://stackoverflow.com/questions/1858345/xsltwhich-is-the-best-tutorial-you-would-like-to-recommend](https://stackoverflow.com/questions/1858345/xsltwhich-is-the-best-tutorial-you-would-like-to-recommend)

# android - 用于 MonoDevelop 和 Android 的 GMGridview

> ID：13609901
> 
> 赞同：1
> 
> 时间：2012-11-28T16:33:06.517
> 
> 标签：android, android-layout, gridview, monodevelop

有谁知道用于 MonoDevelop 和 Android 的类似于 GMGridview 的东西？

我正在寻找可以让我在 Android 上放置大约 12 到 15 个图标/按钮的东西，我可以来回滑动/滚动。我正在使用 MonoDevelop 并且对 Android 开发非常陌生。

我不一定需要拖放功能，但我什至找不到在屏幕上放置许多图标并允许我来回滚动的示例。

我正在为如何布局而苦苦挣扎，因此不胜感激！

感谢您的任何帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:52:16.070

网格视图... ？ [http://developer.android.com/reference/android/widget/GridView.html](http://developer.android.com/reference/android/widget/GridView.html)

而且我不知道它是如何与 MonoDevelop 连接的。

# android - 菜单项图标上的动画列表

> ID：13609902
> 
> 赞同：0
> 
> 时间：2012-11-28T16:33:11.187
> 
> 标签：android, animation, menuitem

我想在 ActionBar 中有一个可视化布尔值的菜单项。如果此布尔值为 true，则图标应开始循环播放一系列 2 个图像。我做了以下事情：

我在 menu.xml 文件中添加了一个项目：

```
 <item
     android:id='@+id/myAnimation'
     android:icon='@drawable/pic1'
     android:showAsAction='ifRoom'>
  </item> 
```

我创建了一个动画列表：

```
<?xml version='1.0' encoding='utf-8'?>
<animation-list xmlns:android='http://schemas.android.com/apk/res/android'
    android:oneshot='false' >
    <item
        android:drawable='drawable/pic1'
        android:duration='100' />
    <item
      android:drawable='drawable/pic2'
      android:duration='100' />
</animation-list> 
```

在方法中`onCreateOptionsMenu`，我将此菜单项分配给一个变量

```
myMenuItem = menu.findItem(R.id.myAnimation); 
```

现在，我希望添加一个动画，只要我告诉菜单项动画，它就会执行。但我什至无法接近。

*   这甚至可能吗？
*   我怎样才能做到这一点？

谢谢！任何帮助表示赞赏！

编辑：应用程序应该支持 8 的 API

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-11T10:53:19.950

我`((AnimationDrawable) item.getIcon()).start();`在`onCreateOptionsMenu(Menu menu)` 这没有用。然后我想，也许应该在 UI 线程上完成，然后这个工作：

```
someView.postDelayed(new Runnable() {
        @Override
        public void run() {
            ((AnimationDrawable) item.getIcon()).start();
        }
    }, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T19:28:45.927

我一直在寻找同样的东西，只是发现你的问题没有得到解答，所以这是来自[Android 开发网站](http://developer.android.com/guide/topics/resources/animation-resource.html)的解决方案：

```
((AnimationDrawable)myMenuItem).start(); 
```

# opencl - OpenCL 成像 - 仅更新一个像素

> ID：13609903
> 
> 赞同：0
> 
> 时间：2012-11-28T16:33:13.223
> 
> 标签：opencl, opencl.net

我正在使用 Opencl.net，我正在尝试在 GPU 上进行一些图像处理。不幸的是，只有第一个像素 ([0;0]) 具有正确的值，其余的是 (0;0;0;0)。OpenCL 内核应该为每个像素的所有颜色分量分配 0.5。在我看来，内核只执行一次（或者读取函数可能只读取第一个像素）。我究竟做错了什么？我从我的代码中省略了不相关的部分：

```
...
int intPtrSize = 0;
intPtrSize = Marshal.SizeOf(typeof(IntPtr));
Cl.Mem srcImage2DBuffer;
Cl.ImageFormat imageFormat = new Cl.ImageFormat(Cl.ChannelOrder.ARGB, Cl.ChannelType.Float);
int imgWidth = 0, imgHeight = 0;

IntPtr srcFloatDataPtr;

int srcIMGBytesSize = 0;

GCHandle pinnedSrcFloatArray;

//Load image from file into OpenCL buffer
using (FileStream imageFileStream = new FileStream(inputImagePath, FileMode.Open) ) {
    System.Drawing.Image inputImage = System.Drawing.Image.FromStream( imageFileStream );

    imgWidth = inputImage.Width;
    imgHeight = inputImage.Height;

    System.Drawing.Bitmap bmpImage = new System.Drawing.Bitmap(inputImage);

    BitmapData bitmapData = bmpImage.LockBits( new Rectangle(0, 0, bmpImage.Width, bmpImage.Height),
                                   ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);

    srcIMGBytesSize = bitmapData.Stride * bitmapData.Height;

    //Convert image from byte to float array
    byte[] inputByteArray = new byte[srcIMGBytesSize];
    Marshal.Copy(bitmapData.Scan0, inputByteArray, 0, srcIMGBytesSize);
    bmpImage.UnlockBits( bitmapData );

    float[] inputFloatArray = new float[srcIMGBytesSize];
    Array.Copy(inputByteArray, inputFloatArray, srcIMGBytesSize);

    for (int i = 0; i < srcIMGBytesSize; i++) {
        inputFloatArray[i] /= 255.0f;
    }

    pinnedSrcFloatArray = GCHandle.Alloc(inputFloatArray, GCHandleType.Pinned);
    srcFloatDataPtr = pinnedSrcFloatArray.AddrOfPinnedObject();
    srcImage2DBuffer = Cl.CreateImage2D(_context, Cl.MemFlags.CopyHostPtr | Cl.MemFlags.ReadOnly, imageFormat,
                                        (IntPtr)bitmapData.Width, (IntPtr)bitmapData.Height,
                                        (IntPtr)0, srcFloatDataPtr, out error);
}
float[] outputFloatArray = new float[srcIMGBytesSize];

//I'm not sure whether the pointer here is correct or not.
Cl.Mem resultImage2DBuffer = Cl.CreateImage2D(_context, Cl.MemFlags.CopyHostPtr | Cl.MemFlags.WriteOnly, imageFormat,
                                              (IntPtr)imgWidth, (IntPtr)imgHeight, (IntPtr)0, outputFloatDataPtr, out error);

error = Cl.SetKernelArg(kernel, 0, (IntPtr)intPtrSize, srcImage2DBuffer);
error |= Cl.SetKernelArg(kernel, 1, (IntPtr)intPtrSize, resultImage2DBuffer);

...

IntPtr[] originPtr = new IntPtr[] { (IntPtr)0, (IntPtr)0, (IntPtr)0 };
IntPtr[] regionPtr = new IntPtr[] { (IntPtr)1, (IntPtr)1, (IntPtr)1 };
IntPtr[] workGroupSizePtr = new IntPtr[] { (IntPtr)imgWidth, (IntPtr)imgHeight, (IntPtr)1 };

error = Cl.EnqueueWriteImage(cmdQueue, srcImage2DBuffer, Cl.Bool.True, originPtr, regionPtr, (IntPtr)0, (IntPtr)0, srcFloatDataPtr, 0, null, out clevent);

pinnedSrcFloatArray.Free();
error = Cl.EnqueueNDRangeKernel(cmdQueue, kernel, 2, null, workGroupSizePtr, null, 0, null, out clevent);

error = Cl.EnqueueReadImage(cmdQueue, resultImage2DBuffer, Cl.Bool.True, originPtr, regionPtr,
                            (IntPtr)0, (IntPtr)0, outputFloatArray, 0, null, out clevent);

for (int i = 0; i < srcIMGBytesSize; i++) {
    outputFloatArray[i] *= 255.0f;
}

//Right here I'm learning that all of the components are 0
for (int i = 0; i < srcIMGBytesSize; i+=4) {
    Console.WriteLine("(" + outputFloatArray[i] + "; " + outputFloatArray[i+1] + "; "
                      + outputFloatArray[i+2] + "; " + outputFloatArray[i+3] + ")");
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:51:16.713

我已经弄清楚了问题所在。Cl.EnqueueWriteImage/Cl.EnqueueReadImage 中的区域应该是 (imageWidth, imageHeight, 1) 而不是 (1, 1, 1)：

```
IntPtr[] regionPtr = new IntPtr[] { (IntPtr)imgWidth, (IntPtr)imgHeight, (IntPtr)1 }; 
```

# .net - 为什么我的 DbContext 在运行时为我的对象创建代理，而不是在单元测试中？

> ID：13609911
> 
> 赞同：1
> 
> 时间：2012-11-28T16:33:45.767
> 
> 标签：.net, entity-framework

我有一个使用 Entity Framework 4.0 和 .NET 4.5 构建的应用程序。当我使用默认代码生成项时，它正在为表生成一个`DbContext`和`POCOs`。

当我在运行时，每当我执行查询时，返回的对象总是动态生成的代理类型，这些代理类型继承自原始类型。例如，如果我有一个`Person`类型，查询将始终返回一个`Person_48573435`继承自`Person`.

但是，在我的单元测试中，这并没有发生，这导致某些行为在上下文中有所不同。

的实例化的唯一区别`DbContext`是，在单元测试中，我明确地传递了连接字符串，并且在运行时它是从`web.config`文件中获取的。顺便说一句，我必须更改 TT，这样我才能引入一个接收连接字符串的构造函数。不知道为什么微软删除了这个构造函数，因为它存在于 ObjectContext TT 中。无论如何，除了这个代理之外，一切都很好。

问题是？什么控制查询返回对象的实例化方式？我可以做些什么来影响这种行为？

# iphone - iPhone 加速度计是否已校准？重力测量随方向变化

> ID：13609912
> 
> 赞同：3
> 
> 时间：2012-11-28T16:33:49.877
> 
> 标签：iphone, accelerometer, gravity, calibration

我正在用 iPhone 4S 加速度计做一些测试。如果我在 Z 轴上获取原始数据（电话放在桌面上），我会得到 9.65-9.70 m/s2 的加速度（在 g 转换为 9.8261 之后）。但是，如果我将电话放在边缘上，X 轴上的加速度计值的测量值会非常不同，大约。9.80-9.85 m/s2（相同g换算后）。我的问题是，如果重力相同，为什么会有这种差异？它没有校准吗？

另一方面，我检查了两种情况下的模块值，差异是一样的。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:03:10.507

我不知道您期望什么样的答案，但是在谈论校准时应该更精确。

当然，g 传感器一如既往地经过校准：每次校准都会出现错误。在您的情况下，误差低于 1%。

所以如果你想要一个答案：

**是的，iPhone 加速度计经过校准，在您的情况下误差低于 1%。**如果您从其他（数百名）用户那里收集测量值，您可以计算设备的平均误差（我猜它大约是 1%）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:49:16.190

问题是，当所有传感器（陀螺仪和罗盘）都显示固有误差时，不可能 100% 准确地确定重力。缺乏精确的外部参考系统会导致此错误。加速度计和陀螺仪相互校正，如果有轻微的漂移，它确实会影响传感器融合算法（卡尔曼滤波器或其他）计算重力的方向。

虽然陀螺仪在检测方向方面非常快，但它往往会产生漂移效应。加速度计反应较慢，但提供了一种检测重力的方法。磁力计甚至更慢，但有助于稳定整体结果。[结合陀螺仪和加速度计数据](https://stackoverflow.com/questions/1586658/combine-gyroscope-and-accelerometer-data)显示原始和处理后的传感器数据的一些图表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:04:31.783

我继续使用加速度计。结果还不错。关于 iPhone 加速度计校准，我可以说 STMicroelectronics 在他自己的传感器上进行校准。后来，iPhone 工厂将加速度计组装到电路板上。焊接会影响加速度计的精度（热效应），加速度计可能需要重新校准，但对于消费者的要求，精度已经很好，但如果您需要高要求，则需要重新校准。

# jquery - 包含多个图像时，Jquery tinyscrollbar 插件无法完全加载内容

> ID：13609913
> 
> 赞同：1
> 
> 时间：2012-11-28T16:33:49.723
> 
> 标签：jquery, html, tinyscrollbar

我正在使用 tinyscrollbar jquery 插件来更好地滚动。

如果您进入游戏规则部分，您将看到 5 个子部分：西洋双陆棋、Nackgammon、Narde、Tavla 和古英语。

Narde、Tavla 和古英语部分运行良好，因为它们没有很多内容并且只有一张图片。滚动没有问题。“Narde”部分未完全加载。西洋双陆棋部分也没有完全加载，有时文本会超出边距。这并不总是发生，因此可能需要一些刷新才能看到错误。

当我从步步高部分删除所有图像时，文本加载得很好。它甚至可以很好地加载包含 1 个图像。

我相信 jquery tinyscrollbar 插件可能会在内容之前加载并因此限制滚动。

非常感谢过去曾处理过此类问题的人们提供解决此问题的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:03:46.483

**如果在初始化tinyscrollbar**时图像未完全加载，则无法正确计算高度。要解决此问题，您需要为每个图像设置高度和宽度。

如果您不知道高度和宽度，您可以使用像[imagesloaded之类的插件来检测图像何时完全加载。](https://github.com/desandro/imagesloaded)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:20:32.910

加载图像后，您需要使用 tinyscrollbar_update。

```
$(myimage).load(function() { $(scroller).tinyscrollbar_update() } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T12:51:56.890

I had the same problem and if you include the tinyscrollbar init after window.load you will no problem.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T09:47:58.493

加载内容后，您可以尝试调用 tinyscrollbar_update。在 setTimeout 上执行此操作。例如，

```
$("#scrollDiv").tinyscrollbar(); 
//other code if present
//and then finally
setTimeout("$('#scrollDiv').tinyscrollbar_update();",200); 
```

这对我有用。

# python - 返回嵌套在多个数组中的数组的最简单方法

> ID：13609915
> 
> 赞同：5
> 
> 时间：2012-11-28T16:33:51.903
> 
> 标签：python

我有一种情况，我的数据有时可以嵌套在多个数组层中。

有时数据可以嵌套如下：

```
[ [ 'green', 'blue', 'red' ] ] 
```

其他时间

```
[[[ ['green', 'blue', 'red' ] ]]] 
```

我想提取数组并返回它，这样做最pythonic的方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:40:13.563

```
def get_nested_list(a):
    if len(a) == 1 and isinstance(a[0], list):
        return get_nested_list(a[0])
    return a 
```

例子：

```
>>> get_nested_list([[[ ['green', 'blue', 'red' ] ]]])
['green', 'blue', 'red']
>>> get_nested_list([[[[1, 2],[3]]]])
[[1, 2], [3]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T16:58:02.813

Numpy 一如既往地是你最好的朋友：

```
>>> import numpy as np
>>> a = [[[ ['green', 'blue', 'red' ] ]]]
>>> print np.squeeze(a)
['green' 'blue' 'red'] 
```

numpy 函数`squeeze()`删除数组中所有为 1 的维度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:42:36.967

递归解决方案：

```
def strip(a):
    if len(a)==1:
        if isinstance(a[0], list):
            a=a[0]
            return strip(a)
        else:
            return a
    return a 
```

# c# - 类型安全等效于将泛型方法的类型参数约束到给定接口的未封闭类型

> ID：13609917
> 
> 赞同：0
> 
> 时间：2012-11-28T16:33:54.223
> 
> 标签：c#, generics, type-safety, type-constraints, generic-method

在 C# 中是否可以约束泛型方法的类型参数，使其以类型安全的方式限制为接口的未封闭类型？让我详细说明...

例如，我有以下伪代码：

```
 public bool Validate<TValidator>(object validatable)
        where TValidator : IValidator<>
    {
        // code that finds all implementations of IValidator that closes on 
        // recursive base types / interfaces of the validatable object
        // return true if validates
    } 
```

我有几个实现 IValidator 的接口，例如 ICreateValidator 和 IDeleteValidator。我可以很容易地以反射方式收集我想要的验证器，它不像我想要的那样通用，它关闭所有类型 T、T 的所有基类以及由 T 实现的接口。

欲望将能够调用类似的东西

```
 var validates = Validate<IDeleteValidator<>>(concreteDomainObject); 
```

这将为我提供未封闭类型的 IDeleteValidator<> 允许我在内部找到 IDeleteValidaor 的每个实现，其中 T 是具体域对象类型、具体域对象类型实现的接口或递归基类型具体域对象类型一直延伸到对象.

当然我可以关闭域对象上的接口，我应该调用它对我来说没有意义

```
 Type unclosedValidatorType = typeof (TValidator).GetGenericTypeDefinition() 
```

鉴于我俩都无法保证 TValidator 在编译时将是一个泛型类型，并且除了剥离它的关闭类型之外不会使用显式关闭的 TValidator ，这对我来说似乎是错误的做事方式。

我提供的伪代码显然具有功能，但是是否有一种类型安全的等效于将泛型方法的类型约束为给定接口的未封闭类型？

*编辑以更正一些术语*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:38:32.327

> 在 C# 中，是否可以约束泛型方法的类型，使其以类型安全的方式限制为接口的未封闭类型？

不。类型参数必须是封闭的，因此将类型参数限制为无法表示为类型参数的类型是没有意义*的*。

忘记约束部分 - 这个简单的代码不起作用：

```
using System;

class Test
{
    static void Main()
    {
        Foo<Action<>>();
    }

    static void Foo<T>()
    {
        Console.WriteLine(typeof(T));
    }
} 
```

错误：

```
Test.cs(7,20): error CS1525: Invalid expression term '>'
Test.cs(7,23): error CS1525: Invalid expression term ')'
Test.cs(7,24): error CS1026: ) expected 
```

# html - 在 ASP.NET 中禁用 Android 软键盘

> ID：13609922
> 
> 赞同：1
> 
> 时间：2012-11-28T16:34:09.607
> 
> 标签：html

我在 ASP.NET 中构建了一个用于退货的 Web 应用程序。该应用程序运行良好，但在输入端要复杂得多。为了减轻这个负担，我想使用蓝牙条形码扫描仪和安卓平板电脑进行输入。当屏幕键盘不可见时，该应用程序看起来很棒。用户需要输入数量，将焦点转移到条形码输入字段并扫描。我不想使用屏幕上的 kb，而是想在应用程序上为用户构建一个键盘，而不是在数量或条形码字段获得焦点时弹出屏幕上的 kb。

这可以在 html、javascript 或 C# 中完成吗？

# jquery - 背景位置上的呼叫中心值失败

> ID：13609923
> 
> 赞同：0
> 
> 时间：2012-11-28T16:34:21.103
> 
> 标签：jquery, css

遇到以下问题：

这有效：

```
var var1 = 40+'%'; 
var var2 = 50+'%';

$some.css({'backgroundPosition': var1 + var2});

//Result: #some{background-position: 40% 50%} 
```

但如果我设置：

```
var var1 = 'center'; // or center (without '.') 
var var2 = 50+'%';

$some.css({'backgroundPosition': var1 + var2}); 
```

我什么都没有渲染！如何通过js设置“中心”值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:39:04.983

你试过类似的东西吗

```
var var1 = 'center '; // or center (without '.') 
```

或者

```
$some.css({'backgroundPosition': var1 + ' ' + var2}); 
```

?

编辑

我认为问题还在于你在写

> 背景位置

代替

```
background-position 
```

就像你在 {} 之间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:39:55.433

我相信你错过了一个空间：

```
$some.css({'backgroundPosition': var1 + ' ' + var2}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:57:09.993

```
<script type="text/javascript">
var var1 = "center ";
var var2 = 50 + "%";

$(".content").css({"background-position" : var1 + " " + var2}); 
```

# objective-c - 从 NSDictionnary 设置 ivars

> ID：13609924
> 
> 赞同：1
> 
> 时间：2012-11-28T16:34:22.393
> 
> 标签：objective-c, ivar

我目前正在开发一个项目，用户在 NSDictionnary 中定义一些参数，我用来设置一些对象。例如，您可以要求创建一个带有参数 param1=xxx、param2=yyy、gain=3.5 的 Sound 对象……然后是一个带有参数 speed=10、active=YES、name=zzz 的 Enemi 对象……

```
{
active = NO;
looping = YES;
soundList = "FINAL_PSS_imoverhere_all";
speed = 100.0; 
```

}

然后我实例化我的类，并希望从此字典中自动设置 ivars。我实际上已经写了一些代码来检查这个参数是否存在，但是我在实际设置参数值时遇到了麻烦，特别是当参数是非对象（float 或 bool）时。

这是我到目前为止所做的：

```
 //aKey is the name of the ivar 
    for (NSString *aKey in [properties allKeys]){
        //create the name of the setter function from the key (parameter -> setParameter)
        NSString *setterName = [aKey stringByReplacingCharactersInRange:NSMakeRange(0,1) withString:[[aKey substringToIndex:1] uppercaseString]];
        setterName = [NSString stringWithFormat:@"set%@:",setterName];
        SEL setterSelector =  NSSelectorFromString(setterName);
        //Check if the parameter exists
        if ([pge_object respondsToSelector:setterSelector]){
            //TODO : automatically set the parameter
        }
        else{
            [[PSMessagesChecker sharedInstance]logMessage:[NSString stringWithFormat:@"Cannot find %@ on %@", aKey, [dict objectForKey:@"type"]] inColor:@"red"];
            NSLog(@"Cannot find %@ on %@", aKey, [dict objectForKey:@"type"]);
        }
    }
} 
```

如您所见，一旦发现对象上存在参数，我不知道该怎么办。我尝试使用“performSelector ... withObject ...”，但我的问题是某些参数是非对象（float或bool）。我还尝试通过使用setter来获取参数的类，但是它没有帮助。

有没有人设法做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T17:29:57.277

杰克劳伦斯的评论很到位。您正在寻找的是所谓的**Key Value Coding**，或者只是**KVC**。Cocoa 的这个基本部分允许您使用其名称作为字符串和新值来获取和设置任何实例变量。

它会自动将对象强制转换为原始值，因此您也可以将它用于 int 和 float 属性。

还支持验证值和处理未知属性。

[查看文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/KeyValueCoding.html)

您的代码无需验证即可编写

```
for( id eachKey in props ) {
    [anOb setValue:props[eachKey] forKey:eachKey];
} 
```

要不就

```
[anOb setValuesForKeysWithDictionary:props]; 
```

正如杰克所说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:29:09.513

对于非对象参数，您必须将它们放入对象中，例如`NSNumber`or `NSValue`。然后，您可以将这些对象添加到您的字典中。

例如：

```
float f = 0.5;
NSNumber f_obj = [NSNumber numberWithFloat:f]; 
```

# ssis - 压缩 SSIS 中文件夹的内容

> ID：13609927
> 
> 赞同：4
> 
> 时间：2012-11-28T16:34:27.833
> 
> 标签：ssis

我正在尝试压缩 SSIS 中文件夹的内容，源文件夹中有文件和文件夹，我需要单独压缩它们。我可以让文件很好地压缩我的问题是文件夹。

我必须使用 7.zip 来创建压缩包。

谁能指点我一个很好的教程。我无法实现我找到的任何示例。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:09:04.903

![执行任务](../Images/581b300944e88727175a808e69ac2f50.png) 这就是我配置它的方式。

它易于配置，但诀窍在于构建**Arguments**。尽管您在屏幕截图中看到**Arguments**是静态的，但它实际上来自一个变量，并且该变量是在Execute Process Task的**Arguments 表达式中设置的。**

我假设您将在**For Each File 枚举器**中执行此执行流程任务，并检查**Traverse SubFolders**。

一旦你有了这个基本的设置，你需要做的就是构建参数来进行压缩，你想要的方式。[这里](http://www.dotnetperls.com/7-zip-examples)是查找所有命令行参数的好地方。

最后，我遇到的唯一问题是没有在 7zip 的命令行参数中提供工作目录。该包过去在我的开发环境中运行良好，但在通过 SQL 作业在服务器上运行时失败。这是因为 7zip 无权访问 SQL Server 上的“临时”文件夹，默认情况下它用作“工作目录”。我通过使用**-ws**开关在命令行参数的末尾指定如下的工作目录来解决这个问题：

例如：

a -t7z DestinationFile.7z SourceFile **-wS:YourTempDirectoryToWhichTheSQLAgentHasRights**

# android - 我可以在 Android 上的 JNI 库中使用 C++ 异常吗？

> ID：13609928
> 
> 赞同：4
> 
> 时间：2012-11-28T16:34:27.587
> 
> 标签：android, c++, exception, android-ndk, java-native-interface

有什么方法可以在 Android 上的 JNI（Java 本机接口）库中使用 C++ 异常？

编辑：我说的是完全在 JNI 库内部的 C++ 异常处理。也就是说，异常在库中被抛出和捕获，它永远不会离开库。

根据 Android 文档 (docs/CPLUSPLUS-SUPPORT.html)，只有当我使用 'GNU libstdc++' 作为 C++ 运行时而不是默认值时，才支持异常。

问题是文档还声明程序的所有部分都必须使用相同的 C++ 运行时：

> “您只能选择所有代码都依赖的单个 C++ 运行时。不能混合针对不同 C++ 运行时编译的共享库。”

根据我的解释，这意味着我不得不使用与 Dalvik（Android 上的 Java VM）相同的 C++ 运行时。

那么，如果 Dalvik 不使用“GNU libstdc++”，是否还有一种方法可以在我的 JNI 库中使用异常？

Dalvik 是针对什么 C++ 运行时编译的？

编辑：我必须假设无论哪个 Java 应用程序正在使用我的 JNI 库，可能还想使用其他 JNI 库，我无法控制。这会以任何方式限制我的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T18:41:20.193

是的，您可以使用例外

```
APP_STL := gnustl_static 
```

或`gnustl_shared`。该文档使用了一种令人生畏的语言，但他们只希望您不要**在您的应用程序**中混合期望不同 STL 实现的库。这就是为什么设置有`APP_`前缀，而不是`LOCAL_`.

Dalvik VM 完全支持文档中列出的任何 STL 实现。

通常你控制你的 JNI 的两边，并且可以确保所有的本地组件都是为 gnustl_shared 编译的。这是首选方案。

如果您的业务是提供一个可供其他人使用的黑盒库，而这些人可能决定也包含其他库，那么选择`gnustl_static`在您的代码中支持 C++ 异常会更安全。这样你就不会依赖别人的好意。您应该小心设计您的 API，以使您的本机对象（*尤其是异常*）永远不会暴露给其他组件。

# facebook - Facebook 503 502 相同的 html 不同的服务器不同的结果

> ID：13609929
> 
> 赞同：2
> 
> 时间：2012-11-28T16:34:34.330
> 
> 标签：facebook, facebook-opengraph, mediatemple

我在两台独立的 Mediatemple (DV) 服务器和一台 Godaddy 服务器上有相同的 html。Godaddy 快速解决，当通过 Facebook 调试器运行时，两个 Mediatemple 服务器都失败并出现 502。

媒体神殿 (DV)。 [http://www.site500.com/facebook.html](http://www.site500.com/facebook.html)

Godaddy [http://www.trainlearncreate.com/facebook.html](http://www.trainlearncreate.com/facebook.html)

当返回 502 时，我的服务器访问日志也没有记录 Facebook 的点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:59:42.390

> Godaddy [http://www.trainlearncreate.com/facebook.html](http://www.trainlearncreate.com/facebook.html)

该页面的 og:url 设置为`http://www.trainlearncreate.com/facebook.html`

> 媒体神殿 (DV)。[http://www.site500.com/facebook.html](http://www.site500.com/facebook.html)

该页面的 og:url 设置为`http://site500.com/facebook.html`

目前，第二页也在调试工具中为我工作——但如果你可能有一个非 www-to-www-redirect，这将导致一个重定向圈，因为 Facebook 试图从中检索 OG 信息以 og:url 形式给出的地址。

# iphone - 在视图控制器、iOS 应用程序之间切换

> ID：13609932
> 
> 赞同：2
> 
> 时间：2012-11-28T16:34:42.970
> 
> 标签：iphone, objective-c

我已经在天气应用程序上工作了几个星期。我目前有 4 个视图控制器设置和运行。当前所有内容都链接到我的标签栏控制器，但是我需要在栏上有更多空间，并且 3 个视图控制器是相似的。我不确定最好的方法是什么。3 个类似视图控制器是预测控制器，一个是当前条件，一个是扩展预测，第三个是周末视图。我想做的是将当前控制器链接到标签栏（很容易），并可以选择将视图从当前视图切换到其他选项。我尝试添加另一个标签栏控制器，但我不喜欢两个标签栏控制器的外观。我添加了一张图片，以便您查看当前的设置方式，基本上我想消除最后两个选项卡并通过第二个选项卡访问它们。关于实现这一目标的最佳最有效方法的任何建议？

![在此处输入图像描述](../Images/deebeddb44a54a79cd413788eeea36ef.png)

![在此处输入图像描述](../Images/913edbaf43875fe355d959a86d0f7f8b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T05:09:56.103

这实际上更像是一个 UI 设计问题，而不是一个编程问题……但无论如何我都会加入一些编程问题。

我建议您将三个预测放在一个支持分页的滚动视图中。然后你只需要一个标签，你就可以让用户在预测之间滑动：

![分页天气视图](../Images/0b2478353fa4921e248143ece0b89467.png)

您还可以`UIPageViewController`在 iOS 6 上通过将其设置为`transitionStyle`来实现此滚动`UIPageViewControllerTransitionStyleScroll`。

为了让用户知道有多个可用的预测，您可以添加一个[`UIPageControl`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPageControl_Class/Reference/Reference.html)，如果您可以在那个相当繁忙的预测屏幕上找到它的空间。

让用户了解其他预测页面的另一种方法是在滚动视图出现时反弹它。这是编程进来的！

在预测选项卡的视图控制器中执行此操作：

```
- (void)viewDidAppear:(BOOL)animated {
    [self bounceScrollViewIfNeeded];
}

- (void)bounceScrollViewIfNeeded {
    if (scrollView_.contentOffset.x != 0)
        return;

    [UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionAllowUserInteraction animations:^{
        scrollView_.contentOffset = CGPointMake(20, 0);
    } completion:^(BOOL finished) {
        if (finished && !scrollView_.tracking) {
            [UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionAllowUserInteraction animations:^{
                scrollView_.contentOffset = CGPointZero;
            } completion:nil];
        }
    }];
} 
```

*如果*滚动视图显示最左边的页面，则此代码在出现预测选项卡时使滚动视图弹跳一点。您可能还想在用户看到几次后停止反弹。无论如何，它看起来像这样：

![弹跳](../Images/97ba36b974f187cb4e7251c563ba13bf.png)

如果用户在弹跳发生时尝试开始拖动，则需要取消动画。您可以通过将视图控制器分配为滚动视图的委托并实现此委托方法来做到这一点：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    [scrollView_.layer removeAnimationForKey:@"bounds"];
} 
```

我认为没有一种简单的方法可以使用`UIPageViewController`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:53:11.053

我会考虑[`UISegmentedControl`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)在视图顶部使用 a 。如果视图足够相似，可以使用相同的`UIViewController`类仅以微小的变化显示它们，那么这是一个简单的解决方案。

如果视图差异很大以至于不方便控制同一视图中的视图`UIViewController`，我喜欢使用容器视图，尽管它们仅在 iOS 6 中可用。您可以将`UIViewController`使用嵌入 segue 嵌入到容器视图的`UIView`. 在该`segmentedControlValueChanged:`方法中，只需隐藏其他段的容器视图并取消隐藏当前选择的容器视图。

# haskell - 冻结haskell STrefs

> ID：13609933
> 
> 赞同：4
> 
> 时间：2012-11-28T16:34:43.537
> 
> 标签：haskell, data-structures, reference, mutable, freeze-thaw

我想实现一个在 Haskell 中使用的双连接边列表数据结构。此数据结构用于管理平面中线排列的拓扑结构，并包含面、边和顶点的结构。

在我看来，这个数据结构的一个很好的接口应该是一种类型`Arrangement`，具有如下功能

```
overlay :: Arrangement -> Arrangement -> Arrangement 
```

但通常的实现很大程度上依赖于引用（例如，每个面都有对相邻边的引用）。

在我看来，理想的工作方式类似于可变和不可变数组的工作方式：`Arrangement`数据结构的内部实现为函数数据结构，但改变排列的操作“解冻”它们以创建新的monad 中的可变实例（理想情况下使用 COW 魔法来提高效率）。

所以我的问题是：

(1) 有没有办法像数组一样冻结和解冻一个小堆？（2）如果没有，有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:29:49.970

这可能是您正在寻找的。循环应该可以正常工作。首先出现一个涉及循环的简单示例。

```
data List a t = Nil | Cons a t deriving (Show, Functor, Foldable, Traversable)
runTerm $ do
  x <- newVar Nil
  writeVar x (Cons 'a' (Var x)))
  return $ Var x 
```

现在，代码。

```
{-# LANGUAGE
    Rank2Types
  , StandaloneDeriving
  , UndecidableInstances #-}
module Freeze
       ( Term (..)
       , Fix (..)
       , runTerm
       , freeze
       , thaw
       , Var
       , newVar
       , writeVar
       , readVar
       , modifyVar
       , modifyVar'
       ) where

import Control.Applicative
import Control.Monad.Fix
import Control.Monad.Trans.Class
import Control.Monad.Trans.Reader
import Control.Monad.ST

import Data.STRef
import Data.Traversable (Traversable, traverse)

data Term s f
  = Var {-# UNPACK #-} !(Var s f)
  | Val !(f (Term s f))

newtype Fix f = Fix { getFix :: f (Fix f) }
deriving instance Show (f (Fix f)) => Show (Fix f)

runTerm :: Traversable f => (forall s . ST s (Term s f)) -> Fix f
runTerm m = runST $ m >>= freeze

freeze :: Traversable f => Term s f -> ST s (Fix f)
freeze t = do
  xs <- newSTRef Nil
  f <- runReaderT (loop t) xs
  readSTRef xs >>= mapM_' modifyToOnly
  return f
  where
    loop (Val f) = Fix <$> traverse loop f
    loop (Var (STRef ref)) = do
      a <- lift $ readSTRef ref
      case a of
        Both _ f' ->
          return f'
        Only f -> mfix $ \ f' -> do
          lift $ writeSTRef ref $! Both f f'
          ask >>= lift . flip modifySTRef' (ref :|)
          Fix <$> traverse loop f

thaw :: Traversable f => Fix f -> ST s (Term s f)
thaw = return . loop
  where
    loop = Val . fmap loop . getFix

newtype Var s f = STRef (STRef s (Many s f))

newVar :: f (Term s f) -> ST s (Var s f)
newVar = fmap STRef . newSTRef . Only

readVar :: Var s f -> ST s (f (Term s f))
readVar (STRef ref) = fst' <$> readSTRef ref

writeVar :: Var s f -> f (Term s f) -> ST s ()
writeVar (STRef ref) a = writeSTRef ref $! Only a

modifyVar :: Var s f -> (f (Term s f) -> f (Term s f)) -> ST s ()
modifyVar (STRef ref) f = modifySTRef' ref (Only . f . fst')

modifyVar' :: Var s f -> (f (Term s f) -> f (Term s f)) -> ST s ()
modifyVar' (STRef ref) f = modifySTRef' ref (\ a -> Only $! f (fst' a))

data Many s f
  = Only (f (Term s f))
  | Both (f (Term s f)) (Fix f)

fst' :: Many s f -> f (Term s f)
fst' (Only a) = a
fst' (Both a _) = a

modifyToOnly :: STRef s (Many s f) -> ST s ()
modifyToOnly ref = do
  a <- readSTRef ref
  case a of
    Only _ -> return ()
    Both f _ -> writeSTRef ref $! Only f

data List s a = Nil | {-# UNPACK #-} !(STRef s a) :| !(List s a)

mapM_' :: Monad m => (STRef s a -> m b) -> List s a -> m ()
mapM_' _ Nil = return ()
mapM_' k (x :| xs) = k x >> mapM_' k xs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:20:34.330

并不是说数组的安全版本`freeze`和`thaw`完整的副本，所以不一定那么有效。当然，制作一个完整的引用数组副本可以说是一种优化，而不是通过遍历它和递归地从`MVar`s 中提取东西等来制作一个结构的完整副本。

采取的另一种方法类似于`Repa`- 以代数方式表示对结构的操作，并编写一个`run`优化、融合然后一次执行所有操作的函数。可以说这是一个更实用的设计。（您甚至可以在幕后使用不安全的操作，以按需而不是显式地进行具体化）。

# ruby - ruby eventmachine http-request 可延迟

> ID：13609934
> 
> 赞同：0
> 
> 时间：2012-11-28T16:34:55.170
> 
> 标签：ruby, eventmachine

这是我第一次接触 EM，所以我真的需要一些帮助

所以这里是代码：

```
EM.run do
  queue = EM::Queue.new
  EM.start_server('0.0.0.0', '9000', RequestHandler, queue)

  puts 'Server started on localhost:9000' # Any interface, actually

  process_queue = proc do |url|
    request = EM::HttpRequest.new(url, connect_timeout: 1).get # No time to wait, sorry

    request.callback do |http| # deferrable
      puts http.response_header.status
    end

    queue.pop(&process_queue)
  end

  EM.next_tick { queue.pop(&process_queue) }
end 
```

我已经阅读了几篇关于 EM 的文章，现在我对上述代码的理解如下：

`EM::HttpRequest`是可延迟的，这意味着它不会阻塞反应堆。但是当我尝试运行 50 个并发连接时`ab`，它只能同时提供约 20 个（根据`ab`报告）。

但是如果我将`process_queue`执行放在里面`EM.defer`（这意味着它将在单独的线程中运行？）它执行得很好。

为什么会这样？`process_queue`只需初始化一个可延迟对象并分配一个回调，在内部运行它`EM.defer`有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:42:49.320

您可能想要做的一件事是将`queue.pop(&process_queue)`回调`process_queue`中的`EM.next_tick`. 目前，您将在允许任何新连接之前处理所有排队的连接。如果您将其`queue.pop`放入`next_tick`调用中，您将在处理下一个项目之前让反应器做一些工作。

# mysql - 从表中删除记录，其中 < 字段的最大数量并保留最大数量

> ID：13609943
> 
> 赞同：3
> 
> 时间：2012-11-28T16:35:16.553
> 
> 标签：mysql, sql, select

我知道这听起来很混乱，但我不知道如何更好地解释它。我在下面有一个简化的表格：

```
DB Type       ID
================
Table1         1                 
Table1         2                 
Table1         3                 
Table1         4                 
Table1         5                 
Table2         6                 
Table2         7                 
Table2         8                 
Table2         9                 
Table2        10 
```

我想要实现的是基本上清理这个表，但如果有意义的话，保留每个 DB 类型的最高 ID 的记录 - 所以在这种情况下，它将是 (Table1,5) 和 (Table2,10)其他记录被删除。是否可以通过 MySQL 专门执行此操作？

****编辑******

感谢 Yogendra Singh 的提示回答

```
DELETE FROM MyTable WHERE ID NOT IN (SELECT * FROM (SELECT MAX(ID) from MyTable GROUP BY DB Type) AS tb1 ) ORDER BY ID ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:39:09.143

尝试先选择最大`ID`组`db_type`，然后将其用作子查询`not in`。

```
 DELETE FROM MyTable 
 WHERE ID NOT IN 
    (SELECT ID FROM 
      (SELECT MAX(ID) AS ID from MyTable GROUP BY DB Type) AS tb1
    ) 
```

编辑：

```
 DELETE FROM MyTable
 HAVING MAX(ID) > ID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:50:18.510

```
delete your_table
from
  your_table left join
  (select max(id) max_id from your_table group by type) mx
  on your_table.id=mx.max_id
where mx.max_id is null 
```

子查询返回每种类型的最大 id，这些是要保留的值。通过左连接，我从表中选择 max_ids 中没有 in 的所有行，这些行是要删除的行。这仅在 id 是主键时才有效，否则我们还必须加入类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T17:25:15.190

DB Type - ID 组合是否唯一？

如果是这样，您可以分两个阶段进行攻击：

1.  只获取你想要的行

    ```
    SELECT [DB Type], Max(ID) AS MaxID
    FROM YourTable
    GROUP BY [DB Type] 
    ```

2.  删除其余部分（将前面的语句包装成更复杂的语句；不是那个意思）

    ```
    DELETE FROM YourTable
    FROM
        YourTable
        LEFT JOIN
        (SELECT [DB Type], Max(ID) AS MaxID
         FROM YourTable GROUP BY [DB Type]) DontDelete
        ON
          YourTable.[DB Type]=DontDelete.[DB Type] AND
          YourTable.ID=DontDelete.MaxID
    WHERE
      DontDelete.[DB Type] IS NULL 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T17:41:25.510

```
DELETE FROM MyTable del
WHERE EXISTS ( 
    (SELECT * 
     FROM MyTable xx
     WHERE xx."db Type" = del."db Type"
     AND xx.id > del.id
     ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T05:46:07.020

```
delete from my_Table  
 where Day in (select  MAX(day) d from my_Table   where id='id') 
```

# javascript - Amplify.js + Asp.net Web Api 发送多个参数

> ID：13609945
> 
> 赞同：1
> 
> 时间：2012-11-28T16:35:26.170
> 
> 标签：javascript, jquery, asp.net, asp.net-web-api, amplifyjs

js代码来定义一个ajax调用：

```
function InitDataServices() 
{    
    amplify.request.decoders.myDecoder =
    function (data, status, xhr, success, error) 
    {
      if (status === "success")           {
         success(data);
      } else if (status === "fail" || status === "error") {
        error(message, status);
    } else {
        error(message, "fatal");
    }
};

amplify.request.define("Emision_FiltrarSeguros", "ajax", {
    url: "http://localhost:63721/api/emision/filtrar",
    type: "POST",
    dataType: "json",
    decoder: "myDecoder"
});
} 
```

然后进行实际的ajax调用的代码是：

```
function Emision_FiltrarSeguros(requestData,okFunction, failFunction) 
{
     amplify.request({
    resourceId: "Emision_FiltrarSeguros",
    contentType: "application/json",
    data: JSON.stringify(requestData),
    success: function (data) {
        okFunction(data);
    },
    error: function (message, level) {
        failFunction(message,level);
    }
});
}; 
```

最后，页面中的这段代码进行调用：

```
function FiltrarSeguros()
    {   
        this.request = {Ramo:-1, 
                        NroSocio: 107701,
                        NroSeguro:-1,
                        NroEndoso:-1,
                        Vigentes:0,
                        Patente:"" };
        Emision_FiltrarSeguros(request,okFiltrarSeguros, failFiltrarSeguros);
    } 
```

控制器代码是这样的：

```
public List<FiltroSeguroResponse> Filtrar(FiltroSeguroRequest request)
    {
        return DLL.Service.EmisionService.FiltrarSeguros(request, "jdh");
    } 
```

问题是我从页面发布的数据永远不会映射到请求（类型为 FiltroSeguroRequest，其属性与我在 ajax 调用中构建的对象文字相同）参数。怎么了？？？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T02:47:47.783

将内容类型添加到您定义放大请求的位置，如下所示：

```
amplify.request.define("Emision_FiltrarSeguros", "ajax", {
    url: "http://localhost:63721/api/emision/filtrar",
    type: "POST",
    dataType: "json",
    decoder: "myDecoder",
    contentType: 'application/json; charset=utf-8',
}); 
```

# php - 避免按下后退按钮时的页面缓存

> ID：13609950
> 
> 赞同：3
> 
> 时间：2012-11-28T16:35:59.533
> 
> 标签：php, caching, browser, header

我已经完成了我的功课并阅读了这些：

[防止浏览器后退按钮在用户注销后显示安全数据的最简单方法？](https://stackoverflow.com/questions/211001/easiest-way-to-prevent-the-back-button-of-your-browser-from-showing-secure-data)

[后按清除缓存以防止在注销后返回登录页面或上一页](https://stackoverflow.com/questions/13099805/clear-cache-on-back-press-to-prevent-going-back-on-login-page-or-previous-page-a)

...但似乎没有什么在做我想做的事。本质上，当点击后退按钮时，我希望重新加载页面，而不是提供缓存版本。

我有一个表格。提交时，加载处理程序页面。如果用户出于任何原因返回，表单页面上的一段内容不应该仍然可见。我可以在卸载时删除它，但这会让用户感到困惑。最好不要在重访时出现。

但是，无论我尝试什么，缓存版本都会加载（在 Opera 中测试；我相信 Chrome 总是会重新加载 - 可能是错误的）。没有触发的 JavaScript 警报证明了这一点。

尝试过（顺便说一下，使用 PHP）：

第一个答案建议：

```
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); 
```

第二个答案建议：

```
header("Cache-Control: no-store, no-cache, must-revalidate, no-transform, max-age=0, post-check=0, pre-check=0");
header("Pragma: no-cache"); 
```

提前致谢

# silverlight - Silverlight 内存存储

> ID：13609952
> 
> 赞同：-1
> 
> 时间：2012-11-28T16:36:03.830
> 
> 标签：silverlight, memory

我正在制作一个 Silverlight 网站。

是否有可能建立某种记忆，我可以在其中存储一些值并可以从不同的页面中调用它们？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T05:24:47.837

我通常创建一个名为 Session 的类，其属性名为 Default，如下所示：

```
public class SessionBase<T> : INotifyPropertyChanged where T : class
{
    public static T Default
    {
        get
        {
            var instance = Application.Current.Resources["SessionName"] as T;
            if (instance == null)
            {
                instance = Activator.CreateInstance<T>();
                Application.Current.Resources.Add("SessionName", instance);
            }
            return instance;
        }
    }

} 
```

然后在我的 app.xaml 我有：

```
<Classes:Session x:Name="SessionName"/> 
```

通过这种方式，您可以使用绑定和 c#（代码隐藏）访问同一个实例。T 继承 SessionBase 并且在该类中您可以存储您想要的任何信息，并且它将在整个应用程序会话中保持可用。例如：

```
public class Session : SessionBase<Session>
{
    public int X { get; set; }
} 
```

然后，您将能够绑定到 X（需要提高 PropertyChanged 以进行双向绑定）并从 c# 访问它

# php - Apache mod_rewrite 将链接重定向到 localhost。如何使 .htaccess 与本地计算机中的每个站点一起工作？

> ID：13609955
> 
> 赞同：2
> 
> 时间：2012-11-28T16:36:25.880
> 
> 标签：php, apache, .htaccess, mod-rewrite, clean-url

我已将 Xampp 安装为 Web 服务器，并希望为我的一个项目创建干净的 URL。所以我把这些简单的行放在这个项目根目录下的 **.htaccess文件中：**

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

我也在这个项目中做了这样的链接：

```
<a href="/about/">About Us</a> 
```

我希望去**localhost/this_project/about/**，但它不起作用。我去**localhost/about/**这是错误的。我怎么解决这个问题？

我也将这一行放在 .htaccess 文件的第二行，但没有发生任何变化。

```
RewriteBase /this_project/ 
```

注意：每个项目的**htdocs**文件夹中有很多目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:44:16.530

你 htaccess 看起来不错，所以我猜你不见了

```
AllowOverride All 
```

在 VHOST`<directory>`块中。如果您在添加 AllowOverride 后服务器将失败，请确保您启用了 mod_rewrite。

# r - 如何缩放 y 轴以直观地检测数据中的微小差异

> ID：13609958
> 
> 赞同：1
> 
> 时间：2012-11-28T16:36:42.977
> 
> 标签：r, plot, ggplot2, scale

我有一个来自文献调查的数据集，我们研究`Metrics`了一组动物中 pH 值对某些参数 ( ) 的影响。因为实验是在不同的时间尺度上进行的，所以我将[响应比](http://www.jstor.org/stable/177062)除以时间。

这导致 1 左右的差异非常小（小于 1 有负面影响，大于 1 有正面影响），这仍然很有趣且重要（因为实际值除以时间）。问题是某些值要么非常低要么非常高，并且接近 1 的差异不可见。

![在此处输入图像描述](../Images/71324f230d6c540ff57018c41ac53f62.png)

由于值接近 1，y 轴刻度的对数变换没有帮助。**如何转换 y 轴刻度，`ggplot2`以便接近 1 的差异可见且直观？**（读者可以不用想太多就能发现差异；我可以将值标准化为最小值，乘以 10000 并采用 log10 比例，但这不会导致可以理解的差异。）

```
df <- structure(list(Study = c(1, 1, 2, 2, 3), pH_control = c(8.06, 
8.06, 8.01, 8.01, 7.99), pH_treatment = c(7.86, 7.75, 7.8, 7.8, 
7.45), time = c(120, 120, 60, 150, 140), Metrics = structure(c(3L, 
1L, 2L, 3L, 1L), .Label = c("Growth", "Metabolism", "Survival"
), class = "factor"), RR_per_time_unit = c(0.9998, 1.001, 1.002, 
0.98, 0.9), CI.max = c(1, 1.003, 1.00003, 0.9999, 0.92), CI.min = c(0.9996, 
0.9999, 1.004, 0.9789, 0.89), pH_diff = c(0.2, 0.31, 0.21, 0.21, 
0.54)), .Names = c("Study", "pH_control", "pH_treatment", "time", 
"Metrics", "RR_per_time_unit", "CI.max", "CI.min", "pH_diff"), row.names = c(NA, 
-5L), class = "data.frame")

df$pH_diff <- df$pH_control - df$pH_treatment

library(ggplot2)

ggplot(df, aes(y = RR_per_time_unit, x = pH_diff, ymin = CI.min, ymax = CI.max)) + 
geom_pointrange(aes(color = Metrics)) + geom_hline(aes(yintercept = 1)) + coord_trans(y = "log10") 
```

# c# - 当您无法等待时，您如何等待任务

> ID：13609963
> 
> 赞同：10
> 
> 时间：2012-11-28T16:36:56.257
> 
> 标签：c#, windows-8, windows-runtime, task-parallel-library, async-await

我正在开发一个 Windows 8 运行时组件，因此公共接口不能包含`Task<T>`，因为它不是 Windows 运行时类型。

这意味着我不能将方法标记为，`async`也不能将库中的方法标记为。这导致对如何处理我的应用程序逻辑有些困惑。`await``private async`

这就是我同步做我想做的事情的方式。

```
Result r = TryGetAuthResultFromFile();
if(r != null)
{
    return r;
}

r = GetAuthResultFromWebAuthenticationBroker();
return r; 
```

问题是 TryGetResultFrom 文件是`async Task<Result>`方法，而返回 r 的方法正在返回`IAsyncOperation<Result>`

我已经尝试过了（这不是完整的代码，但可以看到理论，在延续中处理结果并将它们返回，我必须对 IAsyncOperation 类型的结果进行一些处理）。

```
TryGetAuthResultFromFile().ContinueWith(x=>
{
    if(x.Result != null)
    {
        return x.result;
    }

    GetAuthResultFromWebAuthenticationBroker().ContinueWith(y=>
    {
        return y.Result;
    });
}); 
```

问题在于，`WebAuthenticationBroker`如果不是从 UI 线程调用，它似乎不起作用。它会抛出一个有用`NotImplementedException`的信息，但没有有用的错误消息。

我怎样才能打电话`TryGetAuthResultFromFile`然后等待结果，然后打电话`GetAuthResultFromWebAuthenticationBroker`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T17:07:58.360

您的界面不能使用`Task`/ `Task<T>`，但可以使用`IAsyncAction`/ `IAsyncOperation<T>`。

如果您有一个适当地调用/ /的包装器，则您的实现可以使用`Task`/ 。`Task<T>``AsAsyncAction``AsAsyncOperation``AsyncInfo.Run`

```
public interface IMyInterface
{
  IAsyncOperation<MyResult> MyMethod();
}

public sealed class MyClass: IMyInterface
{
  private async Task<MyResult> MyMethodAsync()
  {
    var r = await TryGetAuthResultFromFileAsync();
    if (r != null)
      return r;
    return await GetAuthResultFromAuthenticationBrokerAsync();
  }

  public IAsyncOperation<MyResult> MyMethod()
  {
    return MyMethodAsync().AsAsyncOperation();
  }
} 
```

# c# - 如何对 web 服务和/或 Oracle DB 建模？

> ID：13609964
> 
> 赞同：0
> 
> 时间：2012-11-28T16:36:59.587
> 
> 标签：c#, .net, asp.net-mvc

我正在学习MVC。有大量使用 SQL Server 的示例代码。编码员拥有从他/她的课程中动态创建的数据库，这可以实现非常干净和快速的开发工作流程。

我正在使用 Oracle DB。我还可以从我已经拥有的表中提取数据吗？我不需要抽象所有列（即我只需要 50 列中的两个）。我只需要读取权限并想使用 Web 服务或 oracle 作为输入。

您知道任何示例代码，所以我可以看到如何将 Web 服务或 Oracle 的数据抽象为数据源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:52:44.067

你可以看看[`Entity Framework`](http://msdn.microsoft.com/en-us/data/ef.aspx)。它允许您从底层数据库中抽象出您的数据访问代码。这确实不是 MVC 特定的，您可以在任何您希望的 .NET 应用程序中使用它。

就 Web 服务而言，我建议您设计一个数据访问层，该层将从您的 MVC 控制器调用，并将调用委托给底层 Web 服务。如果您想单独对控制器进行单元测试，那么对这个 Web 服务进行抽象将是有益的。

# jquery - jQuery中的基本正则表达式查找/替换

> ID：13609976
> 
> 赞同：0
> 
> 时间：2012-11-28T16:37:41.780
> 
> 标签：jquery, regex, replace

我对正则表达式非常陌生，并且由于涉及特殊字符，因此无法正确选择/替换这些字符串。

给定这样的表单元素：

```
<select id="referralForm_currentReferredProducts_1__soldProductId" class="autoWidth soldProductSelect" name="currentReferredProducts[1].soldProductId"> 
```

如何选择 id 和 name 属性并增加它们？表单元素作为 HTML 片段附加到表单中，在将它们附加到 DOM 之前，我无法实现它们。

谢谢！

**更新：** 我尝试使用正则[表达式](http://regexpal.com/)来测试不同的表达式，这个正确选择了下划线： `\_[0-9]+\_`

它实际上并没有替换任何东西..这是我的代码：

```
$.each($('#add-a-product-wrapper').children().last().find('[id*="__"]'), function(){
    $(this).attr('id').replace(/\_[0-9]+\_/, '_'+ replaceIndex +'_');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:05:33.337

我能够弄清楚..

```
$.each($('#add-a-product-wrapper').children().last().find('[id*="__"]'), function(){
    var newVal = $(this).attr('id').replace(/\_[0-9]+\_/g, '_'+ replaceIndex +'_');
    $(this).attr('id', newVal);
}); 
```

我没有意识到 replace()**返回**一个值，而不是直接设置一些东西。返回值后，可以将其设置为表单元素的新 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:45:23.383

尝试这个：

```
$('select').attr('id','new_id').attr('name','new_name'); 
```

# ios - iOS：格式化和本地化计时器/时间计数器

> ID：13609978
> 
> 赞同：4
> 
> 时间：2012-11-28T16:37:46.507
> 
> 标签：ios, localization, nsdateformatter, nsnumber, foundation

在我的项目中，我习惯于`NSDateFormatter`正确格式化应用程序中显示的日期。更具体地说，这里有一个例子：

```
English: 12:34 am
Arabic: ١٢:٣٤ ص 
```

看起来很棒，显示了我需要的数字。但是，我有一个在应用程序中向上/向下计数的时间计数器/计时器：

```
01:31:22 // HH:mm:ss 
```

我将如何正确本地化此计数器以显示为：

```
٠١:٣١:٢٢ 
```

我检查了`NSDateFormatter`，但据我所知，它并不能真正代表这个特定的用例。`NSNumberFormatter`似乎适用于货币和百分比。

* * *

**为什么`NSDateFormatter`没有意义：**

因为它有`NSTimeZone`属性，并且有`am/pm`后缀，当我们想使用计数器时，它们都是无用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:09:26.200

就在那时，我想我有东西要给你。我创建了一个基本的`NSFormatter`子类，它将为您解决问题。您需要做的就是为它提供一个`NSNumber`, 包含一个`NSTimeInterval`.

.h 和 .m 可在此处获得：[https ://github.com/WDUK/WDCountdownFormatter](https://github.com/WDUK/WDCountdownFormatter)

这是一些使用它的示例代码，是的，它应该尊重语言环境。

```
WDCountdownFormatter* format = [[WDCountdownFormatter alloc] init];
NSLog(@"70 - %@",[format stringForObjectValue:@(70)]);
NSLog(@"179 - %@",[format stringForObjectValue:@(179)]);
NSLog(@"-10 - %@",[format stringForObjectValue:@(-10)]); // Invalid, will return nil
NSLog(@"0 - %@",[format stringForObjectValue:@(0)]);
NSLog(@"9827193 - %@",[format stringForObjectValue:@(9827193)]);
NSLog(@"1 - %@",[format stringForObjectValue:@(1)]); 
```

生产

```
// UK English
2012-11-28 23:11:11.453 StackOverflow[28687:c07] 70 - 00:01:10
2012-11-28 23:11:11.456 StackOverflow[28687:c07] 179 - 00:02:59
2012-11-28 23:11:11.457 StackOverflow[28687:c07] -10 - (null)
2012-11-28 23:11:11.458 StackOverflow[28687:c07] 0 - 00:00:00
2012-11-28 23:11:11.458 StackOverflow[28687:c07] 9827193 - 2729:46:33
2012-11-28 23:11:11.459 StackOverflow[28687:c07] 1 - 00:00:01

// Egyptian Arabic
2012-11-28 22:59:54.057 StackOverflow[28400:c07] 70 - ٠٠:٠١:١٠
2012-11-28 22:59:54.659 StackOverflow[28400:c07] 179 - ٠٠:٠٢:٥٩
2012-11-28 22:59:55.473 StackOverflow[28400:c07] -10 - (null)
2012-11-28 22:59:56.464 StackOverflow[28400:c07] 0 - ٠٠:٠٠:٠٠
2012-11-28 22:59:57.311 StackOverflow[28400:c07] 9827193 - ٢٧٢٩:٤٦:٣٣
2012-11-28 23:10:36.657 StackOverflow[28400:c07] 1 - ٠٠:٠٠:٠١ 
```

# javascript - 验证表格 - 没有空格

> ID：13609979
> 
> 赞同：0
> 
> 时间：2012-11-28T16:37:49.097
> 
> 标签：javascript, jquery

我有一个验证字段值长度的函数，

```
function validateName(name) {
  if(name.val().length < 5) {
  }
} 
```

我还想检查是否存在空格。我试过这个，但没有奏效：

```
function validateName(name) {
  if(name.val().length < 5 && name.val(" ") < 0) {
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:39:23.777

上面代码中的问题是，[`$.fn.val`](http://api.jquery.com/val/)它根据作为输入接收的参数来改变行为；具体来说，当它在没有参数的情况下执行时是一个*getter ，当它使用一个参数执行时是一个**setter*。所以这一行：

```
name.val(" ") 
```

不检查值中是否存在空格，而是将值设置为单个空格。

有许多不同的方法可以检查一个字符串是否至少包含一个空格。在这里我会去[`String#indexOf`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf)，所以`validateName`函数可以写成：

```
function validateName(name) {
  var val = name.val();
  if (val && val.length < 5 && val.indexOf(" ") < 0) {
    // valid!
  }
} 
```

一种更具表现力的方法是使用[`String#includes`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes)，但它也不太被浏览器广泛支持。

```
function validateName(name) {
  var val = name.val();
  if (val && val.length < 5 && val.indexOf(" ") < 0) {
    console.log("valid", val);
  } else {
    console.log("invalid", val);
  }
}

validateName($('<input value="b" />'));
validateName($('<input value="br" />'));
validateName($('<input value="bru" />'));
validateName($('<input value="brun" />'));
validateName($('<input value="bruno" />'));
validateName($('<input value="b ru" />'));
validateName($('<input />'));
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
```

另外，作为一般建议，我不会用 jQuery 混淆验证逻辑；也就是说，最好`validateName`接受纯字符串作为输入，而不是表示输入字段的 jQuery 对象。

# javascript - 跟踪在线状态？

> ID：13609985
> 
> 赞同：1
> 
> 时间：2012-11-28T16:38:03.607
> 
> 标签：javascript, python, html, django, web-applications

我对 Web 开发很陌生，并且正在开发这个社交网站。

现在我想添加功能来显示一个人是否在线。

现在我想出的方法之一是在数据库中保留在线状态位。

我的问题是如何动态地做到这一点。假设页面已加载并且用户（例如连接）上线。如何在该页面上动态更改该连接的状态。

我想知道是否有任何工具（库）可用于这种类型的跟踪。我的网站是在 python 中使用 django 框架。我认为可以使用 javascript/jquery 来完成一些事情。我想知道我是否朝着正确的方向前进，或者还有什么我应该研究的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:03:42.643

`last_activity` `DateTimeField`使用 a和 a `OneToOneField`to创建一个新模型`User`。或者，如果您是子类化`User`，使用`User`django 1.5 中的自定义，或使用用户配置文件，只需将该字段添加到该模型。

编写一个自定义中间件，`last_activity`在每次请求时自动更新每个用户的字段。

在您的一个模型中编写一个`is_online`方法，该方法使用 timedelta 来确定用户的不活动期，以返回他们是否在线的布尔值。例如，如果他们`last_activity`的时间超过 15 分钟，则返回`False`。

编写一个通过 jQuery ajax 轮询的视图，以返回特定用户的在线状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:54:25.537

正如 Sanjay 所说，更喜欢使用内存解决方案（在线状态的使用非常短暂），例如 Django 缓存（Redis 或 Memcache）。

如果您想要一种简单的方法来更新已加载网页上用户的在线状态，请使用任何库（如 jQuery、AJAX-poll 提供用户状态的 URL），然后更新显示您的页面的一小部分想要的状态。不要太频繁地轮询这个页面，每 15 秒一次似乎是合理的。

# c - 从 C 中的同一文件中读取 int 和 char

> ID：13609986
> 
> 赞同：3
> 
> 时间：2012-11-28T16:38:02.650
> 
> 标签：c, file, input

我有一个如下所示的文本文件：

```
i 3755
i 3633
i 4435
i 1434 
```

我将如何将其作为输入阅读，我尝试使用 fscanf，但它在“i”之后不断给我一个随机字符

例如输出看起来像

> 我% 3755
> 
> i5 3633

等等

这是我一直在尝试的：

```
 int data = 0; 
char command; 
if(fptr==NULL)
    printf("File Cannot Be Read"); 

fscanf(fptr,"%c %d\n", &command, &data); 
printf("%c " , command);
printf("%d\n" , data);

fscanf(fptr,"%s %d\n", &command, &data); 
printf("%c " , command);
printf("%d\n" , data); 

fscanf(fptr,"%s %d\n", &command, &data); 
printf("%s " , command);
printf("%d\n" , data); 
```

它们似乎都不起作用。提前感谢您的帮助！

编辑：这是遇到相同问题的任何人的工作代码：

```
int data = 0; 
char command; 
fptr = fopen(argv[1], "r"); 

if(fptr==NULL)
    printf("File Cannot Be Read"); 

while(fscanf(fptr,"%c %d \n", &command, &data) == 2)
{

        if(command == 'i')
        {
            printf("insert found\n");
        }
            if(command == 'd')
        {
            printf("delete found\n");
        }

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T16:39:58.690

```
fscanf(fptr,"%c %d", command, &data); 
```

应该：

```
fscanf(fptr,"%c %d", &command, &data); 
getchar();  // consume the newline character that fscanf left. 
```

假设您定义：

```
char command;
int data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:40:35.540

为简单起见，我建议您在循环中读取一行`fgets()`，然后使用`strtok()`以获取不同的“字符串”，然后根据您的解析方法进行转换。但迈克也是对的，你可以`fscanf(fptr, "%c %d\n", &command, &data)`用来阅读。使用字符串时，可以忽略`&`变量名前的“”。但是当它是一个字符、一个整数或一个浮点数..你将需要使用 operator(" `&`")的地址

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T16:45:12.443

这是不正确的，会导致缓冲区溢出：

```
fscanf(fptr,"%s %d", &command, &data); 
```

as`command`只有一个足够的空间，`char`但`fscanf()`带有格式说明符`"%s"`的将读取到下一个空格，然后将终止的空字符写入`command`. 使用 a`char[]`读取并限制要`char`读取的 s 的数量。

请注意，`NULL`检查只是打印一条错误消息，它实际上并没有阻止使用`NULL`文件指针。

* * *

为确保每一行的格式正确[`fgets()`](http://en.cppreference.com/w/c/io/fgets)，请先读取一行，然后再[`sscanf()`](http://en.cppreference.com/w/c/io/fscanf)读取字段。如果`fscanf()`用于直接从文件中读取，那么*这两*行：

```
一世
3755

```

与*单行*相同：

```
我 3755

```

作为换行符也是空格。例子：

```
if (fptr)
{
    char line[1024];
    while (fgets(line, 1024, fptr))
    {
        char command;
        int data;
        if (2 == sscanf(line, "%c %d", &command, &data))
        {
            /* Use 'command' and 'data'. */
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T16:45:46.710

在这一行：

```
fscanf(fptr,"%c %d", command, &data); 
```

你应该给它一个指向命令的指针。像这样 ：

```
fscanf(fptr,"%c %d", &command, &data); 
```

下一行无法工作，因为读取光标已经在文件末尾。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T17:05:51.277

在您的`fscanf`函数中，您必须通过在格式末尾添加空格来期望返回行。像这样

```
fscanf(fptr,"%c %d ", &command, &data); 
```

空格字符替换换行符、制表符和空格

顺便说一句，我看到您`%s`用来读取字符`&command`，这是不正确的

```
fscanf(fptr,"%s %d\n", &command, &data); 
```

你必须改用这个

```
fscanf(fptr,"%c %d ", &command, &data); 
```

# esb - Mule 功能测试 - 完全糊涂

> ID：13609988
> 
> 赞同：5
> 
> 时间：2012-11-28T16:38:13.293
> 
> 标签：esb, mule

我们有一个 Mule 应用程序，它有 6 个或 7 个流，每个流大约有 5 个组件。这是设置。我们将 JMS 请求发送到 ActiveMQ 队列。骡听着。根据消息的内容，我们将其转发到相应的流。

```
 <flow name="MyAPPAutomationFlow" doc:name="MyAPPAutomationFlow">
      <composite-source>
            <jms:inbound-endpoint queue="MyAPPOrderQ" connector-ref="Active_MQ_1" doc:name="AMQ1 Inbound Endpoint"/>
            <jms:inbound-endpoint queue="MyAPPOrderQ" connector-ref="Active_MQ_2" doc:name="AMQ2 Inbound Endpoint"/>
      </composite-source>
        <choice doc:name="Choice">
            <when expression="payload.getProcessOrder().getOrderType().toString().equals(&quot;ANC&quot;)" evaluator="groovy">
                <processor-chain>
                    <flow-ref name="ProcessOneFLow" doc:name="Go to ProcessOneFLow"/>
                </processor-chain>
            </when>
            <when....
            ...........

         </choice>
    </flow>

 <flow name="ProcessOneFLow" doc:name="ProcessOneFLow">
        <vm:inbound-endpoint exchange-pattern="one-way" path="ProcessOneFLow" responseTimeout="10000" mimeType="text/xml" doc:name="New Process Order"/>
        <component doc:name="Create A">
            <spring-object bean="createA"/>
        </component>
        <component doc:name="Create B">
            <spring-object bean="createB"/>
        </component>
        <component doc:name="Create C">
            <spring-object bean="createC"/>
        </component>
        <component doc:name="Create D">
            <spring-object bean="createD"/>
        </component>    
</flow>

 <spring:beans>

    <spring:import resource="classpath:spring/service.xml"/>
    <spring:bean id="createA" name="createA" class="my.app.components.CreateAService"/>
    <spring:bean id="createB" name="createB" class="my.app.components.CreateBService"/>
    <spring:bean id="createC"  name="createC" class="my.app.components.CreateCService"/>
    <spring:bean id="createD" name="createD" class="my.app.components.CreateDService"/>
            ......
            ......
 </spring:beans> 
```

现在我不确定如何使用它们编写功能测试。

我浏览了 Mule 网站上的功能测试文档，但那里有非常简单的测试。

功能测试是否不应该使用 DAO 或服务层进行实际的后端更新，或者它只是模拟服务层的单元测试的扩展？

我的想法是——它可以接收一个请求并使用内存中的 Mule 服务器将请求-响应从一个组件传递到另一个组件。另请注意，我们的任何流都没有出站端点，因为它们主要是 Fire 和 Forget 类型的流，并且状态更新由组件执行的数据库更新管理。

另外，为什么我需要为测试创建单独的 mule config xml 文件？如果我没有测试将实际部署在 Live 上的流 xml，那么测试的意义何在？如果我只是为了测试而创建单独的 xml 配置，这在某种程度上违背了我的目的...... 一些专家能否详细说明并指出与我们正在使用的测试类似的示例测试。

PS：Mule 内部的组件依赖于 Web 服务、数据库等外部系统。对于功能测试，我们是否需要运行这些组件，或者我们是否应该模拟这些服务/数据库访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T16:52:49.070

Mule 应用程序的功能测试与测试依赖于外部资源（如数据库或 JMS 代理）的任何应用程序没有什么不同，因此您需要使用与标准应用程序相同的技术。

通常这意味着使用内存实现将资源存根，例如用于数据库的 HSQLDB 或用于 JMS 的瞬态 ActiveMQ 内存代理。对于 Mule 应用程序，这意味着将您的配置模块化，以便在单独的文件中定义“实时”传输，在测试时将其替换为包含内存中变体的文件。

要验证 Mule 与资源的交互是否正确，您可以使用其 Java 客户端（例如 JDBC 或 JMS）直接读取资源，如果您想确保纯粹的非 Mule 客户端在读取 Mule 时没有问题，这是很好的已调度，或使用 MuleClient 从这些资源中读取或创建使用这些资源并将消息传递给`<test:component>`.

> 仅供参考，这些不同的技术在[Mule in Action，第二版](http://manning.com/dossot2/)的第 12 章中进行了解释和演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T13:28:36.057

[https://blog.codecentric.de/en/2015/01/mule-esb-testing-part-13-unit-functional-testing/](https://blog.codecentric.de/en/2015/01/mule-esb-testing-part-13-unit-functional-testing/)

[https://developer.mulesoft.com/docs/display/current/Functional+Testing](https://developer.mulesoft.com/docs/display/current/Functional+Testing) 请参考此链接 如您所见，这是一个扩展 FunctionalMunitSuite 类的普通 JUnit 测试。在测试中我们需要做两件事：

准备 MuleEvent 对象作为我们流程的输入。我们可以通过使用提供的 testEvent(Object payload) 方法来做到这一点。执行 runFlow(String flowName, MuleEvent event) 方法，指定要测试的流名称和我们在第一步中刚刚创建的事件。

# ajax - ajax发布到控制器+ asp .net mvc3 + c#之前的Jquery对话框确认

> ID：13609990
> 
> 赞同：0
> 
> 时间：2012-11-28T16:38:22.683
> 
> 标签：ajax, asp.net-mvc, jquery-ui, modal-dialog, confirmation

我有一个完美工作的切换按钮。javascript和视图如下：

jQuery：

```
$('.list-delist-link').delegate("a", "click", function (e) {
    var obj = $(this);
    if ($(this).hasClass('delist-property')) {
        // Post to controller
        e.preventDefault();
    } else {
        // Post to controller
        e.preventDefault();
    }
}); 
```

看法：

```
<div class="list-delist-link">
    @if(item.IsPropertyDisabled) {
        @Html.ActionLink("List", "Enable", "Property", new { id = item.PropertyId }, new { @class="list-property other-button" })
    } else {
        @Html.ActionLink("Delist", "Disable", "Property", new { id = item.PropertyId }, new { @class="delist-property other-button" })
    }
</div> 
```

但是，现在我想在 ajax 操作之前添加一个确认对话框。但是，当我尝试这样做时，一切都崩溃了……我不知道为什么。我在布局页面上有 jQuery 和 css 文件

我所做的更改如下：

jQuery 的变化：

```
var obj;
$('.list-delist-link').delegate("a", "click", function (e) {
     obj = $(this);
    $("#dialog-confirm").dialog(open):
    e.preventDefault();
}); 
```

用于模态确认的附加 jQuery：

```
$(function() {        
    $( "#dialog-confirm" ).dialog({            
        resizable: false, height:140, modal: true,
        buttons: {
            "Delete all items": function() {
                if (obj.hasClass('delist-property')) {
                    // Post to controller
                } else {
                    // Post to controller
                }
                $(this).dialog("close");                
            },
            Cancel: function() {
                $(this).dialog("close");
            }            
        }
    });    
}); 
```

视图中的附加 div：

```
<div id="dialog-confirm" title="Are you sure?">   
        <p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>These items will be permanently deleted and cannot be recovered. Are you sure?</p>
</div> 
```

你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:16:17.797

你必须添加 `autoOpen: false`，看看这个

```
$( "#dialog-confirm" ).dialog({  
        autoOpen : false,  
        resizable: false, height:140, modal: true,
        buttons: {...... 
```

# c# - 在 IQueryProvider 的实现中构造 Linq.EnumerableQuery 时出现编译器错误

> ID：13609991
> 
> 赞同：1
> 
> 时间：2012-11-28T16:38:28.997
> 
> 标签：c#, linq, generics, compiler-errors, iqueryprovider

我有一个 IQueryProvider 的实现，并有以下方法：

```
public override IQueryable<T> CreateQuery<T>(System.Linq.Expressions.Expression expression)
    {
        return new System.Linq.EnumerableQuery<T>(this.Items);
    } 
```

items 属性定义为

```
public IEnumerable<T> Items { get; set; } 
```

对于 EnumerableQuery 构造函数，我得到一个神秘的编译器错误：

```
> Argument 1: cannot convert from
> 'System.Collections.Generic.IEnumerable<T>
> [c:\Windows\Microsoft.NET\Framework\v4.0.30319\mscorlib.dll]' to
> 'System.Collections.Generic.IEnumerable<T>> [c:\Windows\Microsoft.NET\Framework\v4.0.30319\mscorlib.dll]' 
```

我究竟做错了什么？我知道它很可能被包含在某个地方的泛型中，但论点对我来说是一样的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:46:08.983

问题是您的方法声明：

```
public override IQueryable<T> CreateQuery<T>(Expression expression) 
```

您在泛型方法中声明了一个*新*的类型参数`T`。这与 type 的*类型*`T`参数不同。将其更改为非泛型方法：

 *```
public override IQueryable<T> CreateQuery(Expression expression) 
```

`using`（顺便说一句，如果您使用适当的指令来避免在代码中包含如此多的完全限定类型名称，您的代码将更容易使用。）*

# javascript - Node.js 中自定义事件和观察者模式的性能

> ID：13609994
> 
> 赞同：1
> 
> 时间：2012-11-28T16:38:34.977
> 
> 标签：javascript, performance, node.js, events, observer-pattern

我有一个难题。我可以选择：

*   发出自定义事件并对它们做出反应，
*   实现观察者模式。

事件看起来更简单，但性能呢？你知道这两种技术的性能测试吗？这将非常有帮助。

//顺便提一句

是否可以为事件添加范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:17:21.533

事件模式和观察者模式共享相同的原则：触发和反应。由于 Java 没有函数指针，因此，我们使用对象来包装函数并在触发事件时通知。这是观察者模式。

JavaScript 支持函数指针。因此，我们可以移除对象“包装器”并以原始形式保留事件处理程序列表：函数。

我不知道任何关于观察者模式或 Node.JS 事件发射器的性能测试。但是在记忆方面，保持小东西有助于提高性能。此外，当一个事件被触发时，事件不需要你使用成员访问器（即点）。这也应该为您节省一些性能。

# nhibernate - 如何在 nHibernate 中从 HierarchyId 填充一组子项

> ID：13609996
> 
> 赞同：2
> 
> 时间：2012-11-28T16:38:41.897
> 
> 标签：nhibernate, nhibernate-mapping, hierarchyid

我有映射的父端，但不确定如何正确映射子端。

**父映射**

```
<many-to-one name="Parent" class="NHibernate.Map.OrganizationUnit, CentralDataLayer">
    <formula>(
        SELECT o.`ou_id`
        FROM `global`.`wmtb_orgunit` o
        WHERE o.`ou_hid` = `ou_hid`.GetAncestor(1)
    )</formula>
</many-to-one> 
```

我想孩子们会像这样绘制地图。如何将父 HierarchyId 填充到 where 子句中？

**儿童测绘**

```
<set name="Children" inverse="true" cascade="all" where="`ou_hid` != :HierarchyId and `ou_hid`.IsDescendantOf(:HierarchyId) = 1">
    <key column="`ou_hid`" />
    <one-to-many class="NHibernate.Map.OrganizationUnit, CentralDataLayer" />
</set> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:28:50.287

我相信我已经确定了填充 HierarchyId 的直接后代的最佳方式。为了使此功能起作用，需要在类上创建一个过滤器，并且将运行该类的一个方法来查询后代。

[有关在 NHibernate](https://stackoverflow.com/questions/3374904/sql-2008-hierarchyid-support-in-nhibernate/11087277#11087277)中设置 HierarchyId 支持的更多信息。

**儿童测绘**

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="CentralDataLayer" namespace="NHibernate.Map" schema="`global`">

    <class name="NHibernate.Map.OrganizationUnit, CentralDataLayer" table="`orgunit`">
        ...

        <property name="HierarchyId" column="`ou_hid`" type="NHibernate.UserTypes.HierarchyId, CentralDataLayer" not-null="true" />

        <filter name="FilterChildren" condition="`ou_hid`.IsDescendantOf(:HierarchyId) = 1 and `ou_hid`.GetLevel() = :HierarchyIdLevel" />
    </class>

    <filter-def name="FilterChildren">
        <filter-param name="HierarchyId" type="NHibernate.UserTypes.HierarchyId, CentralDataLayer" />
        <filter-param name="HierarchyIdLevel" type="Int16" />
    </filter-def>
</hibernate-mapping> 
```

**类对象**

```
namespace NHibernate.Map
{
    using Criterion;
    using Microsoft.SqlServer.Types;
    using NHibernate;
    using System.Collections.Generic;

    public partial class OrganizationUnit
    {
        #region Fields

        private SqlHierarchyId _hierarchyId;
        private ICollection<OrganizationUnit> _children;

        #endregion Fields

        #region Properties

        /// <summary>
        ///     Hierarchy Id
        /// </summary>
        [Description("Get the OrganizationUnit hierarchy id.")]
        public virtual SqlHierarchyId HierarchyId
        {
            get { return _hierarchyId; }
            protected internal set { _hierarchyId = value; }
        }

        #endregion Properties

        #region Public Methods

        /// <summary>
        ///     Get all direct child OrganizationUnits of current OrganizationUnit.
        /// </summary>
        /// <param name="provider">The DataProvider houseing the current Session</param>
        /// <returns></returns>
        public virtual ICollection<OrganizationUnit> GetChildren(ISession session)
        {
            if (_children.IsDefault()) {
                // Enable Filter
                session
                    .EnableFilter("FilterChildren")
                    .SetParameter("HierarchyId", HierarchyId)
                    .SetParameter("HierarchyIdLevel", (short)(HierarchyId.GetLevel() + 1));

                // Collect Direct Children
                _children = session.QueryOver<OrganizationUnit>().List();

                // Disable Filter
                session.DisableFilter("FilterChildren");
            }
            return _children;
        }

        #endregion Public Methods
    }
} 
```

# .net - ObjectContext 在 .NET 4.5 中是否已弃用？

> ID：13609997
> 
> 赞同：14
> 
> 时间：2012-11-28T16:38:42.983
> 
> 标签：.net, entity-framework

我已经使用`ObjectContexts`了很长时间了。现在我已经安装了 VS 2012，令我惊讶的是，实体数据模型没有用于创建`ObjectContexts`and`EntityObjects`而不是`DbContexts`and的代码生成项的选项`POCOs`。

现在被弃用了吗？我看到`ObjectContext`该类仍然可用，但我无法将它用作我的 EDMX 的输出。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-28T21:06:10.063

不推荐使用 ObjectContext。实际上 DbContext 只是 ObjectContext 之上的一层。DbContext API 具有更好/更小的 API，并且更易于使用。POCO 实体也更干净。这就是改变代码生成的原因。如果您仍想使用基于 ObjectContext 和 EntityObject 的实体，请删除 *.edmx 文件下的 *.tt 文件。双击 edmx 文件在设计器中打开它。单击设计器表面。在属性中将“代码生成策略”从“无”更改为“默认”。

**编辑**

该行为在 VS2013 附带的 EF6 设计器中发生了一些变化（并且可用于 VS2012 的下载）。如果您使用的是 EF5，则两个选项是：“T4”和“LegacyObjectContext”。如果您使用的是 EF6，则下拉菜单将被禁用。如果您想在 EF6 应用程序中使用 ObjectContext，您需要使用 EF6 的[实体对象生成器](http://visualstudiogallery.msdn.microsoft.com/66612113-549c-4a9e-a14a-f629ceb3f89a)（请注意，此链接仅指向模板的一个版本，但实际上有几个版本取决于您的需要 - C# 与 VB。 NET，网站非网站 -[这](http://visualstudiogallery.msdn.microsoft.com/site/search?query=EF%206.x&f%5B0%5D.Value=EF%206.x&f%5B0%5D.Type=SearchText&ac=2)是列表）。[您可以在此处](http://blog.3d-logic.com/2013/11/10/what-changed-in-the-ef-tooling-in-visual-studio-2013-and-visual-studio-2012-out-of-band/)找到有关 EF6 工具更改的更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T17:56:07.367

Microsoft 推荐`EF5.x DbContext Generator`用于新项目。它是 VS2012 中的默认模板。PreVS2012 用户可以使用 ExtensionManager 找到它（搜索 EF5.x）或[在此处](http://visualstudiogallery.msdn.microsoft.com/da740968-02f9-42a9-9ee4-1a9a06d896a2)下载。

当然，您仍然可以生成`EntityObjects`并`ObjectContext`使用`EF4.x EntityObject Generator`可以在[此处](http://visualstudiogallery.msdn.microsoft.com/e6db6554-345c-477a-9a73-3c5db06e9081)找到的模板。

[此处](http://www.codetuning.net/blog/post/Unittesting-ADONET-Entity-Data-Models.aspx)描述了如何设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T17:56:21.833

我不确定如何使用 EDMX 生成`ObjectContext`，但不建议使用它。`DbContext`之所以使用，是因为 99% 的用户`ObjectContext`不需要 的功能。

但是，您可以从 a 获取对 ObjectContext 的引用`DbContext`：`((IObjectContextAdapter)dbContext).ObjectContext`

# postscript - Postscript 仅在最后一页添加页脚

> ID：13609998
> 
> 赞同：0
> 
> 时间：2012-11-28T16:38:44.087
> 
> 标签：postscript

我正在使用生成 PostScript 文件的工具 (abcm2ps)。它让我可以添加自定义 postscript 代码。现在我知道如何在第一页添加页脚。像这样：

```
/cpr {
0 eq {   % first page only
gsave
/Arial 9 selectfont
300 30 moveto    % center the text
(Footer) showc
grestore
} if
} def
<< /BeginPage { cpr } >> setpagedevice 
```

如何仅在最后一页添加页脚？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:47:33.867

您需要知道 PostScript 程序中有多少页，如果您不知道，则无法在“最后”页添加页脚。如果您的文件符合 DSC，它将告诉您其中有多少页。