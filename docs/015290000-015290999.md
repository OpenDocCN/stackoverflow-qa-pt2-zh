# StackOverflow 问答 15290000-15290999

# javascript - 在画布中绘制数组图像？

> ID：15290002
> 
> 赞同：0
> 
> 时间：2013-03-08T08:50:11.130
> 
> 标签：javascript, android, cordova, canvas

我正在尝试在画布上绘制一组图像，但没有绘制任何内容！以下是我的代码！我也在尝试了解 phonegap 和 javascript index.html：

```
 <!DOCTYPE html>
<html>
<head>
<title>Minecraft Background Check</title>
</head>
<body>
<canvas id="mycanvas" style="position:fixed; top:0; left:0; border:1px solid #c3c3c3; width: 100%; height: 100%;"></canvas>
<script type="text/javascript" src="cordova-2.5.0.js"></script>
<script type="text/javascript">
document.addEventListener("deviceready",ondeviceReady,false);
function onDeviceReady () {}
    //get element by id 
var c = document.getElementById("mycanvas");
var ctx = c.getContext("2d");
    //array image which need to draw in canvas
var image = ["img/image12","img/image13","img/image14","img/image15","img/image10"];
var m_arrImages = {};
for (var src in image) {
    m_arrImages[src] = new Image();

    m_arrImages[src].src = image[src];
}
var imagePositionsX = [20, 80, 140, 200, 260, 320, 380, 440, 500, 560];
var imagePositionsY = [20, 60, 100, 140, 180, 220, 260, 300, 340, 380];
var i, x, y;
for (i = 0; i < m_arrImages.length; i++) {
    x = imagePositionsX[ Math.floor(Math.random()*10) ];
    y = imagePositionsY[ Math.floor(Math.random()*10) ];

    ctx.drawImage(m_arrImages[i], x, y, 50, 50);
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:53:03.060

您已将函数设置`ondeviceReady`为在`deviceready`事件中运行，但未定义该函数。您已经定义了一个名为`onDeviceReady`. Javascript 变量和函数名称区分大小写，因此在`deviceready`事件中不会运行任何内容。

改变：

```
document.addEventListener("deviceready",ondeviceReady,false); 
```

至

```
document.addEventListener("deviceready",onDeviceReady,false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:57:32.037

可能是我错了，但是..“m_arrImages” - 它只是带有字符串的数组，而不是图像，不是吗？

我想，它应该是这样的：

```
var m_arrImages = {};
for (var src in image) {
    m_arrImages[src] = new Image();
    m_arrImages[src].src = image[src];
} 
```

# jquery - 如何在 jQuery Mobile 中制作圆形按钮？

> ID：15290005
> 
> 赞同：3
> 
> 时间：2013-03-08T08:50:20.557
> 
> 标签：jquery, jquery-mobile, button

如何使用 jquery mobile 制作这样的按钮圆形？

（*顺便说一句，我不是在询问示例图像中的眩光效果*）

![圆形按钮](../Images/f0a7873d6c49820c76c9725a34e3f5eb.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T08:58:31.480

# 解决方案

这是一个工作示例：http: [//jsfiddle.net/Gajotres/XMu9t/](http://jsfiddle.net/Gajotres/XMu9t/)

```
#custom-btn {
    width: 100px !important;
    height: 100px !important;
    border-radius: 50% !important;
    http://www.lawyersgunsmoneyblog.com/wp-content/uploads/2012/08/american-flag-2a.jpg
}

#custom-btn span span {
    height: 100px !important;  
    line-height: 70px;
} 
```

# 更多信息

如果您想自己学习如何进行这种更改，您应该查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**，它将教您如何自己进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:54:48.790

您可以在 DIV 元素上使用 50% 的边框半径，并与标志的背景图像配对。然后，您可以将单击事件绑定到此 DIV 元素，以便使用它来执行操作。

```
.circle_button {
    width:250px;
    height:250px;
    border-radius: 50%;
    background:url(flag.png) center center no-repeat;
}

jQuery(".circle_button").click(function(){
    //add click code here
});

<div class="circle_button"></div> 
```

参考：[http ://davidwalsh.name/css-circles](http://davidwalsh.name/css-circles)

也许这可以通过 jQuery Mobile 使用他们的按钮类来完成，但是查看他们的文档，它只是让您指定按钮是否具有圆角，而不是特别是按钮的边框半径。

# iphone - 下载图像时iphone内存问题

> ID：15290009
> 
> 赞同：1
> 
> 时间：2013-03-08T08:50:45.643
> 
> 标签：iphone, objective-c, memory, uiscrollview, delegates

我有一个奇怪的问题。要求是在滑动时从 url 下载图像并将其显示在图像视图中。它工作得很好，但是在 30 张图像和几次滑动应用程序崩溃后，我收到了内存警告。

实施非常简单，但已经花了将近 2 天的时间来解决这个问题。在每次滑动时，我都在调用 A 方法：-

```
-(void)callDownloadImageAPI{

    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];
    [self loadIndicator:@"Please Wait.!!" :@"Please be patient while we are downloading image for you"];
    @try{
        DownloadImage *downLoadImge =[[DownloadImage alloc] init];
        downLoadImge.delegate=self;
        [downLoadImge getImage:[self.allUrlArray objectAtIndex:self.initialImageViewCounter]];
    }
    @catch (NSException *e) {
        NSLog(@"callDownloadImageAPI exception %@",[e description]);
        [HUD hide:YES];        
    }
    [pool release];
} 
```

此方法一次下载 1 张图像并将 UIImage 发送给其委托

//DownloadImage.h和.m的实现

```
 @protocol DownloadImageDelegate
    @required
    - (void)messageFormServerWithImage:(UIImage*)imageFromSever;
    - (void)gettingImageFailed :(NSString*)errorDesc;
    @end

        @interface DownloadImage : NSObject

        @property(strong) NSURLConnection*                       connection;
        @property(weak) id<DownloadImageDelegate>                delegate;
        @property(strong) NSMutableData*                         data;

        -(void)getImage:(NSString *)imageUrl; 
```

//下载图片.m

```
-(void)getImage:(NSString *)imageUrl{
    @autoreleasepool {

        [[NSURLCache sharedURLCache] removeAllCachedResponses];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:imageUrl]cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:60];
    self.connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    }
}

- (void)connectionDidFinishLoading:(NSURLConnection*)theConnection {
    @autoreleasepool {

    NSLog(@"connectionDidFinishLoading");
    self.connection=nil;
    if( self.data == nil) {
        return;
    }

//  NSString* jsonStr = [[NSString alloc] initWithData:self.data encoding:NSASCIIStringEncoding];
    UIImage *img=[UIImage imageWithData:self.data];
//  NSArray *messages_json = [parser objectWithString:jsonStr error:nil];
    [self.delegate messageFormServerWithImage:img];
    self.data = nil;
    img= nil;
    }
} 
```

NSUrlConnections 的其他代表已实现，但我没有把它放在这里。返回此图像后，我将此图像设置为滚动视图并显示它并从滚动视图中删除前一个图像。

**更多信息：-**

只是为了验证我注释掉了将图像设置为滚动视图并在每次滑动时下载了图像但它仍然崩溃了大约 30 个图像

令人惊讶的是，我使用同一个类 DownloadImage.h 和 .m 在同一工作的其他地方下载图像，即使使用 500images 也能正常工作。

我正在 iPod Touch 中进行测试，我检查了使用的内存保持在 12-14mb 之间（永远不要超过这个）

请帮助我，如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:55:45.963

它崩溃是因为所有图像都存储在虚拟内存中，您需要缓存它们，然后在用户实际查看它们时将它们加载回内存。

尝试在缓存或不需要图像对象后将它们设置为 nil。

在您的课程中，我还建议使用 didReceiveMemoryWarning 方法，并在调用此方法时从内存中释放一些图像。

# powershell - 从共享文件夹导入 Carbon Powershell 模块

> ID：15290014
> 
> 赞同：1
> 
> 时间：2013-03-08T08:50:52.907
> 
> 标签：powershell, import, module

我使用 Powershell Remoting 2.0 版。
我已经下载了[Carbon](http://get-carbon.org/) Powershell 模块。我将它复制到共享文件夹中：

**\SharedServer\PowershellModules\Carbon-1.0.0**

在我的脚本 ps1 中，我有以下源代码：

```
$PSPathCarbon = "\\SharedServer\PowershellModules\Carbon-1.0.0\Carbon"
. (Join-Path $PSPathCarbon Import-Carbon.ps1) 
```

我收到以下错误：

> 术语“\SharedServer\PowershellModules\Carbon-1.0.0\Carbon\Import-Carbon.ps1”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:13:12.410

尝试：

```
. (Join-Path $PSPathCarbon 'Import-Carbon.ps1') 
```

或者：

```
. "$PSPathCarbon\Import-Carbon.ps1" 
```

# onclick - 是否可以使用 JMeter 生成 onClick 事件？

> ID：15290018
> 
> 赞同：2
> 
> 时间：2013-03-08T08:51:14.817
> 
> 标签：onclick, jmeter, stress-testing

我正在尝试使用 JMeter 创建 sress 测试，因此绝对需要`onClick`为某些元素生成鼠标事件。但是我找不到任何使用 JMeter 产生 onClick 事件的可能性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:27:39.807

Jmeter旨在模拟客户端（例如Web浏览器）生成的服务器流量（例如HTTP）。它不会模拟整个浏览器。所以不，您不能产生或模拟 onClick() 事件，但您可能可以模拟该事件产生的流量。

为此，您需要一个工具来捕获在此 onClick() 事件发生时发送到服务器的请求。然后，您可以在 JMeter 脚本中对这些请求进行建模，就像您对其他请求进行建模一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T11:19:26.400

jMeter 不评估网络服务器返回的 HTML 或 JavaScript，它只是捕获它。

所以，不，你不能用 jMeter 做一个 onClick 事件。但是，您可以做的是提取 onClick 事件将使用 触发的 url [`Regular Expression Extractor`](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)，然后将该 url 提供给新的 HTTP 采样器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T09:06:40.870

JMeter is intended to run load (or general connectivity) tests against a back end service like, for example, a web application running on an application server like Tomcat, Weblogic, WebSphere, etc..

If you would like to 'drive' a browser in a test environment, take a look at tools like [Selenium](http://docs.seleniumhq.org/)

既然您提到了 JMeter，我假设您可能想要坚持使用 Java（或至少 JVM），因此您可以将[Geb](http://www.gebish.org/)视为 Selenium 的替代品。

不过，还有许多其他类似的工具。看看：[http ://alternativeto.net/software/selenium](http://alternativeto.net/software/selenium)

# java - Java 中的键绑定与键侦听器

> ID：15290035
> 
> 赞同：10
> 
> 时间：2013-03-08T08:52:10.293
> 
> 标签：java, swing, keylistener, key-bindings, key-events

我注意到在 Java / Swing 中似乎至少有两种不同的方式来处理关键事件：

*   [键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)
*   [关键听众](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

每种的优点/缺点是什么，什么时候你应该更喜欢一个而不是另一个？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T08:54:13.583

> 什么时候你应该更喜欢一个而不是另一个？

首选键绑定，因为它们被引入。A`KeyListener`是与事件的较低级别的连接。

[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)的那个页面涵盖了我倾向于使用它们而不是`KeyListener`. 它列出了许多对`KeyListener`. EG 选择：

*   `WHEN_FOCUSED`
*   `WHEN_ANCESTOR_OF_FOCUSED_COMPONENT`
*   `WHEN_IN_FOCUSED_WINDOW`

我阅读链接文档的次数越多，我就越无法理解提出问题的必要性。例如：

> 键绑定的替代方法是使用键侦听器。按键侦听器作为键盘输入的低级接口有它们的位置，但对于响应单个按键，按键绑定更合适，并且往往会导致更容易维护的代码。如果要在组件没有焦点时激活键绑定，则键侦听器也很困难。键绑定的一些优点是它们有点自我记录，考虑到包含层次结构，鼓励可重用的代码块（`Action`对象），并允许轻松删除、自定义或共享操作。此外，它们使更改绑定到动作的键变得容易。另一个优点`Actions`是它们具有启用状态，它提供了一种简单的方法来禁用操作，而无需跟踪它附加到哪个组件。

## 文本组件

正如@Robin 所指出的，文本组件也有[`DocumentListener`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/DocumentListener.html)&[`DocumentFilter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)可以添加更适合文本文档的功能。有关文档[侦听](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#doclisteners)器和[过滤器](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)的更多信息，请参阅[文本组件功能](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-08T09:40:37.933

1.  KeyBindings（高抽象）

* * *

好处

*   可设置的，可共享的，

*   指定用于简单快捷方式，没有不需要的副作用（这些事件中的大多数都非常简单且可设置）

*   舒适地解决窗口中焦点的任何问题（也可以设置，确保在 Java 中窗口必须在屏幕上具有焦点）

*   Swing 在内部使用 KeyBindings，内置快捷方式，动作，更多在[@camickr 的 Key Bindings 中](http://tips4java.wordpress.com/2008/10/10/key-bindings/)（在 Swing 中实现了有趣的快捷方式和动作）

*   输出应该是 Swing 动作（与 Swing 中相同的高可能抽象）

缺点

*   无法覆盖键盘上的所有键

*   无法覆盖同时按下三个或更多键

*   代码看起来非常复杂（根本不正确，与 KeyListener 中的相同代码相比，代码在大多数情况下是排序器）

*   **删除以查看更多详细信息以查看@camickr 的评论**（重复操作需要 Swing Timer）

*   无法使用 API 中实现的一种方法来使用（）

.

KeyListeners（低级监听器）

* * *

好处

*   非常易于使用，直观

*   一两个关键事件的代码很短

*   不需要任何关于 Swing、Java 的知识

*   可以覆盖树或按下更多键（例如），对于非常复杂的快捷键，那么哪个可以触发任何单独的键事件都没有关系

*   可以以编程方式对 event.consume()

*   可以从 Compound JComponents (JComboBox, JSpinner ...) 中侦听 non_finalized 内部事件

缺点

*   部分容器和 JComponents 无法访问

*   (J)组件应该是焦点所有者并且必须是可聚焦的

*   未指定用于 Swing JComponents

.

AWT事件监听器

* * *

*   结合所有键和鼠标事件，Java 中可能的低级监听器

*   基本上没有理由在大多数（甚至非常复杂的）基于 Swing 的 GUI 中使用这个监听器

*   我看到这个监听器在基于 AWT 的自定义组件中实现，所需的对等点来自本机操作系统

*   但是[@camickr 对 AWTEventListener Application Inactivity 和 Global Event Listeners 有很好的实现](http://tips4java.wordpress.com/?s=inactivity)

.

注意：关键事件的顺序因平台而异

* * *

# c# - 如何将数据从 kinect 发送到 arduino 以控制伺服？

> ID：15290037
> 
> 赞同：1
> 
> 时间：2013-03-08T08:52:19.483
> 
> 标签：c#, visual-studio, arduino, kinect, kinect-sdk

我正在使用 Microsoft Visual Studio 接收骨架数据，将数据发送到 arduino，然后它将根据用户的移动方式移动伺服电机。

我不知道我在做什么，所以有人能指点我一个教程，教我关于 Kinect 和 arduino 之间的串行通信吗？我只找到了使用 Visual Basic 而不是 Microsoft Visual Studio 的。

非常感谢

# asp.net - 数组列表错误第二个数组替换第一个数组

> ID：15290040
> 
> 赞同：0
> 
> 时间：2013-03-08T08:52:33.593
> 
> 标签：asp.net

我有个问题。

```
Dim Maxis As String
        'Dim MaxisExtra As String
        Dim b As New ArrayList
        Dim WS As New WebService1.Service1
        Dim cnt As String
        Dim MRWS As New MobileReload_WS.MobileReload_WS
        cnt = WS.StockCountTelco(1, Session("Maxis"))
        If CInt(cnt) >= CInt(DropDownList1.SelectedItem.Text) Then
            Dim sLock As String
            sLock = MRWS.LockAStock(1, 1, "Online", Session("Maxis"), DropDownList1.SelectedItem.Text)
            Session("sLock") = sLock

            If sLock = "" Then
                PopupMsgBox("Unable to allocate Stock")
            Else
                Maxis = "Maxis" & ";" & Session("Maxis") & ";" & DropDownList1.SelectedItem.Text & ";" & Session("Cost")
                'If MaxisExtra = "" Then
                '    b.Add(Maxis)
                '    Elseif
                '    MaxisExtra = MaxisExtra + Maxis
                '    b.Add(MaxisExtra)
                'End If                
            End If
        Else
            PopupMsgBox("Not enough stock")
        End If
        b.Add(Maxis)
        Session("Transaction") = b
    End Sub 
```

我第一次将字符串输入到数组列表中是可以的。但是当用户第二次再次按下按钮添加时，它会替换第一个字符串。谁能帮助我如何根据我的编码将字符串保存到第二个插槽中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:57:01.803

如果您在谈论`b` `ArrayList`，那么您每次都在创建一个新的并将新的存储`ArrayList`在`Session("Transaction")`

也许你的意思是这样的......

```
Dim b as ArrayList = Session("Transaction")
If b Is Nothing Then
  b = new ArrayList
End If
...
Session("Transaction") = b 
```

虽然很难准确的说，因为你的代码很乱，不清楚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:58:15.890

您将数组列表放入会话变量中，但您从未将其读回。您每次都创建一个新的数组列表，因此它将始终为空并替换前一个。

如果有，则从会话变量中获取数组列表：

```
Dim b As ArrayList = Session("Transaction")
If b Is Nothing Then b = New ArrayList 
```

# ruby-on-rails-3 - Facebook 分享图片/链接、标题、描述

> ID：15290041
> 
> 赞同：-2
> 
> 时间：2013-03-08T08:52:35.580
> 
> 标签：ruby-on-rails-3, facebook, facebook-opengraph, facebook-sharer

我需要在 Facebook 上分享一张照片/链接，带有自定义标题、自定义描述和照片缩略图。

分享链接是，

[http://www.facebook.com/sharer/sharer.php?s=100&p%5Btitle%5D=From+the+album%3A+Timeline+Photos&p%5Bsummary%5D=my+5th+%231+album+and+现在+i%27m+hosting+SNL.+u+made+this+happen.+thank+u+to+all+my+beliebers.+%0D%0A%0D%0Ahttp%3A%2F%2Fsmarturl.it% 2FJBBelieveAcoustic&p%5Burl%5D=By+Justin+Bieber&p%5Bimages%5D%5B0%5D=https%3A%2F%2Ffbcdn-sphotos-ca.akamaihd.net%2Fhphotos-ak-ash4%2Fs480x480%2F485171_101515907265138888_15&26513888_15999](http://www.facebook.com/sharer/sharer.php?s=100&p%5Btitle%5D=From+the+album%3A+Timeline+Photos&p%5Bsummary%5D=my+5th+%231+album+and+now+i%27m+hosting+SNL.+u+made+this+happen.+thank+u+to+all+my+beliebers.+%0D%0A%0D%0Ahttp%3A%2F%2Fsmarturl.it%2FJBBelieveAcoustic&p%5Burl%5D=By+Justin+Bieber&p%5Bimages%5D%5B0%5D=https%3A%2F%2Ffbcdn-sphotos-c-a.akamaihd.net%2Fhphotos-ak-ash4%2Fs480x480%2F485171_10151590726513888_1592108632_n.jpg&)

我收到“无法发布到墙上”。无法将消息发布到此墙。是否有任何其他方式在不传递应用程序 ID 的情况下共享？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:59:33.343

我正在使用以下代码，它工作正常，但最近我的图像在 facebook 共享框中加载。https://www.facebook.com/sharer/sharer.php?s=100&p[title]=thisismytitle&p[summary]=thisismysummary&p[url]=http://www.google.com&&p[images][0]=www .mysit/imag.jpg', 'Facebook', 'width=626,height=436,toolbar=0,status=0

# cakephp - 会话不适用于 cakephp 中的子域

> ID：15290049
> 
> 赞同：1
> 
> 时间：2013-03-08T08:53:22.413
> 
> 标签：cakephp, session-cookies, subdomain

我在测试站点上有一个主域和 4 个子域。在 bootstrap.php 中，我编写了一个代码`ini_set("session.cookie_domain", ".domain.com");`，它适用于所有子域中的会话。但是昨天当我把它放到现场时，子域抛出了一个

> 错误 301 重定向过多

我已经解决了这个问题，但是会话问题仍然存在。我不知道为什么它不能在实时站点上运行，尽管我从测试中复制了完全相同的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:03:57.580

在 APP/config/core.php 中，设置

```
 Configure::write('Security.level', 'low'); 
```

否则，您的 HTTP_HOST 检查将失败。

# c# - ASP.NET MVC 3 complex model binding issue

> ID：15290050
> 
> 赞同：1
> 
> 时间：2013-03-08T08:53:24.633
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

I'm trying to teach myself MVC. I mocked up a dummy project to reflect a real problem I have at the moment.

My Model(s):

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MvcPersistPartialView.Models {
    public class RemarkModels {

        public static List<RemarkTemplateModel> GetTemplateAll() {
            return new List<RemarkTemplateModel>() {RemarkTemplateModel.Create(1),
                RemarkTemplateModel.Create(2),
                RemarkTemplateModel.Create(3)};
        }

    }

    public class RemarkModel {
        public int ID { get; set; }
        public string Content { get; set; }
        public int TemplateID { get; set; }
        public List<RemarkTemplateModel> Templates { get; set; }

        public static RemarkModel Create() {
            return new RemarkModel() {
                Content = "This is a dummy remark, to learn MVC.",
                TemplateID = 1,
                Templates = RemarkModels.GetTemplateAll()
            };
        }
    }

    public class RemarkTemplateModel {
        public int ID { get; set; }
        public string Name { get; set; }
        public List<RemarkTemplateFieldModel> Fields { get; set; }

        public static RemarkTemplateModel Create(int id) {
            return new RemarkTemplateModel() {
                ID = id,
                Name = id.ToString(),
                Fields = new List<RemarkTemplateFieldModel>() {RemarkTemplateFieldModel.Create("Label A" + id.ToString(),
                    id.ToString() + "..."),
            RemarkTemplateFieldModel.Create("Label B" + id.ToString(),
                    id.ToString() + "..."),
            RemarkTemplateFieldModel.Create("Label C" + id.ToString(),
                    id.ToString() + "...")}
            };
        }
    }

    public class RemarkTemplateFieldModel {
        public string Label { get; set; }
        public string Content { get; set; }

        public static RemarkTemplateFieldModel Create(string label, string content) {
            return new RemarkTemplateFieldModel() { Label = label, 
                Content = content };
        }
    }
} 
```

What you see in the above models is a RemarkModel, representing a remark you can save on a person like: "This person hides issues with a big smile. Watch out for that!". You also see a RemarkTemplateModel to accomodate a slightly complex wish of my endusers to fill in certain pieces of information like with surveys. So, this 'RemarkModel' could have template 'Testtemplate A'. Templates consist of fields (RemarkTemplateFieldModel) which could look like: 'Testtemplate A' consists out of the fields: 'Field 'A', field 'B' and field 'C' (while ofcourse some 'Testtemplate B' could consist out of fields 'D', 'E', 'F', 'G'). I hope I made this clear. Please ask if it's not clear. Last model is RemarkModels (the 's' at the back), that's just to retrieve all the mocked up templates quickly.

My controller:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MvcPersistPartialView.Controllers {
    public class HomeController : Controller {
        public ActionResult Index() {
            ViewBag.Message = "Welcome to ASP.NET MVC!";

            Models.RemarkModel r = Models.RemarkModel.Create();

            return View(r);
        }

        [HttpPost]
        public ActionResult Index(Models.RemarkModel remark, Models.RemarkTemplateModel template, List<Models.RemarkTemplateFieldModel> fields) {

            if (ModelState.IsValid) {
                //Persist to database.
            }

            ViewBag.Message = "Welcome to ASP.NET MVC!";

            Models.RemarkModel r = Models.RemarkModel.Create();

            return View(r);
        }

        [AcceptVerbs("POST")]
        public ActionResult TemplateChosen(string selectedTemplateID) {

            Models.RemarkTemplateModel selectedTemp = (from temp in Models.RemarkModels.GetTemplateAll()
                                                              where temp.ID == Convert.ToInt32(selectedTemplateID)
                                                              select temp).FirstOrDefault();

            return PartialView("RemarkTemplate", selectedTemp);

        }

        public ActionResult About() {
            return View();
        }
    }
} 
```

As you can see with parameterless 'Index' I create a RemarkModel and pass it in my strongly typed View Index.cshtml. This view looks like:

```
@model MvcPersistPartialView.Models.RemarkModel

@using (Html.BeginForm()) {
    <fieldset>
        <div class="editor-label">
            @Html.LabelFor(model => model.Content)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Content)
            @Html.ValidationMessageFor(model => model.Content)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Templates)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(
            m => m.TemplateID,
            new SelectList(Model.Templates, "ID", "Name"),
            new {
                id = "templateDdl",
                data_url = Url.Action("TemplateChosen", "Home")
            }
        )
            <input type="button" value="Change template" id="template-button" />
        </div>
        <div id="template">
            @Html.Partial("RemarkTemplate", Model.Templates.First())
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

So far so good. I've been on here before to ask help with the DropDownListFor, this works like a charm now (so thank you community). We are getting to the core of my question, thank you for your patience so far. The partial view 'RemarkTemplate' looks like:

```
@model MvcPersistPartialView.Models.RemarkTemplateModel
<div class="display-field">
    @Html.Encode(Model.ID)
</div>
<div class="display-field">
   @* @Html.Encode(Model.Name)*@
   @Html.EditorFor(m => m.Name)
</div>
@foreach (MvcPersistPartialView.Models.RemarkTemplateFieldModel field in Model.Fields) {
@*    <div class="editor-label">
        @Html.Encode(field.Label)
    </div>
    <div class="editor-field">
        @Html.TextBox("Content", field.Content)
    </div>*@
    @Html.Partial("RemarkTemplateField", field)
} 
```

We'll get to the 2nd partial view. Because first I tried this without the partial view 'RemarkTemplateField' and only 2 parameters (remark + template) in the POST Action 'Index'. My problem is that the 'template' parameter's 'fields' property remained 'null'. I also noticed nothing was really posted about the template untill I used an 'EditorFor' for the name property of the template. The 'remark' parameter however contained the correct template ID in it's TemplateID property, so I figured if I could atleast get the fields, the template doesn't matter. So that is when I added the 2nd partial view:

```
@model MvcPersistPartialView.Models.RemarkTemplateFieldModel
<div class="editor-label">
    @Html.Encode(Model.Label)
</div>
<div class="editor-field">
    @*@Html.TextBox("Content", Model.Content)*@
    @Html.EditorFor(m => m.Content)
</div> 
```

It al displays perfectly. Very nice. But the POSTback to the Index action keeps returning an empty 'template' (well the 'name' of the template is filled in since I made it an EditorFor which is not an option on the real website) and the 'fields' list is empty. As you can see I again changed the Textbox on Content to an EditorFor. But alas, no magic.

So my question is my dear experts, how does one get a more complex model like this bound properly in MVC? How can I get the filled in contents of the fields in the Action of my Controller, so I can ultimatly persist the remark with the correct filled in template to the database? I would be very grateful for your help. Point me to tutorials, if you don't want to spell it out, which can help me. Just give me some starters. I've been at it for a workday now...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T10:18:40.830

I think what you are looking for is the binding of collections. This may help: [http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

# ios - 将图像加载到 tableView

> ID：15290052
> 
> 赞同：0
> 
> 时间：2013-03-08T08:53:29.573
> 
> 标签：ios, objective-c, ios5, ios6, ios4

我正在使用表格视图来显示来自互联网的图像以及加载图像需要时间..

我试过了

```
 dispatch_async(imageQueue_, ^{
    NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:[record imageURLString]];
    dispatch_async(dispatch_get_main_queue(), ^{
        [[cell imageView] setImage:[UIImage imageWithData:imageData]];
        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];
    }); 
```

但它的加载图像缓慢并重复图像直到其他图像加载到同一行..有没有办法同时加载tableview中的所有图像（通常会一一发生..）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:55:02.943

使用 AsyncImageView.h 和 .m 制作 2 类

在 AsyncImageView.h

```
@interface AsyncImageView : UIView 
{
    NSURLConnection *connection;
    NSMutableData *data;
    NSString *urlString; // key for image cache dictionary
}

-(void)loadImageFromURL:(NSURL*)url;
- (void)StoreImage:(UIImage*)image String:(NSString *)str;
@end 
```

和在.m

```
- (id)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) 
    {
    }
    return self;
}

- (void)drawRect:(CGRect)rect 
{
    // Drawing code
}

- (void)dealloc 
{
    [connection cancel];
    [connection release];
    [data release];
    [super dealloc];
}

-(void)loadImageFromURL:(NSURL*)url 
{
    if (connection != nil) 
    {
        [connection cancel];
        [connection release];
        connection = nil;
    }
    if (data != nil) 
    {
        [data release];
        data = nil;
    }

    if (imageCache == nil) // lazily create image cache
        imageCache = [[ImageCache alloc] initWithMaxSize:2*1024*1024];  // 2 MB Image cache

    [urlString release];
    urlString = [[url absoluteString] copy];
    UIImage *cachedImage = [imageCache imageForKey:urlString];
    if (cachedImage != nil) {
        if ([[self subviews] count] > 0) 
        {
            [[[self subviews] objectAtIndex:0] removeFromSuperview];
        }
        UIImageView *imageView = [[[UIImageView alloc] initWithImage:cachedImage] autorelease];
        imageView.contentMode = UIViewContentModeScaleAspectFill;
        imageView.autoresizingMask = 
            UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        [self addSubview:imageView];
        imageView.frame = self.bounds;
        [imageView setNeedsLayout]; // is this necessary if superview gets setNeedsLayout?
        [self setNeedsLayout];
        return;
    }

#define SPINNY_TAG 5555   

    UIActivityIndicatorView *spinny = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    spinny.backgroundColor=[UIColor whiteColor];
  //  spinny.tag = SPINNY_TAG;
  //  spinny.center = self.center;
    [spinny startAnimating];
    [self addSubview:spinny];
    [spinny release];

    NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)incrementalData 
{
    if (data==nil) 
    {
        data = [[NSMutableData alloc] initWithCapacity:2048];
    }
    [data appendData:incrementalData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)aConnection 
{
    [connection release];
    connection = nil;

    UIView *spinny = [self viewWithTag:SPINNY_TAG];
    [spinny removeFromSuperview];
    if ([[self subviews] count] > 0) 
    {
        [[[self subviews] objectAtIndex:0] removeFromSuperview];
    }
    UIImage *image = [UIImage imageWithData:data];
    [imageCache insertImage:image withSize:[data length] forKey:urlString];
    UIImageView *imageView = [[[UIImageView alloc] initWithImage:image] autorelease];
    imageView.contentMode = UIViewContentModeScaleAspectFill;
    imageView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [self addSubview:imageView];
    imageView.frame = self.bounds;
    [imageView setNeedsLayout]; 
    [self setNeedsLayout];
    [data release];
    data = nil;
} 
```

在您显示 tableview 的类中，只需导入 AsyncImageView.h 并在 tableView cellForRowAtIndexPath 中写入

```
 AsyncImageView *asyncImageView = nil;

    UIImageView *cellImage = (UIImageView *)[cell viewWithTag:1];
    asyncImageView = [[AsyncImageView alloc] initWithFrame:cellImage.frame] ;
    [asyncImageView loadImageFromURL:YourImageURL];
    asyncImageView.backgroundColor=[UIColor clearColor]; 
    [cell.contentView addSubview:asyncImageView]; 
```

我已经使用它并且工作正常。希望它也对你有用.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:49:49.653

正如尤金所说，使用[SDWebImage](https://github.com/rs/SDWebImage)。让这些东西变得如此简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:57:16.660

您将图像懒惰地加载到表格视图中。 [这](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)是Apple的一个很好的例子。

# python - python中的指针

> ID：15290056
> 
> 赞同：0
> 
> 时间：2013-03-08T08:53:39.130
> 
> 标签：python, c, matlab, pointers

我是一名物理专业的学生，​​主要使用 Python 和 Matlab 进行编程，现在正在学习 C 以提高我的模拟性能。

简单的问题：Python 中有指针吗？Matlab中有指针吗？如果是，我可以像在 C 中一样“轻松”地使用它们吗？

我知道在 Python 和 Matlab 的高层次背后，有很多指针在起作用。问题是：我可以在 Python 或 Matlab 中明确地做类似这样的 C 代码吗：

```
int *p;
int someValue = 1;
p = &someValue;
doSomethingForMe = callSomeFunction(p); 
```

我知道无论如何（对于大多数应用程序）这样做可能没有意义。我只是想学习。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T09:01:46.433

您通常会听到[Python 有名称](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#python-has-names)，而不是传统意义上的“变量”。它也没有“指针”，因为这样的概念仅在低级别工作时才有意义，例如使用 C。（因此，如果您在 Python 中使用 C 兼容库，例如`ctypes`.但是，这样的指针仅用于与 C 的互操作性。）

在 C 中使用指针的大多数功能在 Python 中以其他形式存在。例如：

*   从函数返回多个值。在 C 语言中，您`int foo(int *, int *)`需要返回两个整数（可能还有一个错误代码）。在 Python 中，只需使用 tuple unpacking: `x, y = foo()`with `return x, y`in `foo`。
*   传递大物体。由于无论如何都是通过引用传递的，因此您可以安全地将引用传递给一个巨大的对象，而无需复制它。
*   修改输入参数。通过选择适当的可变输入，这大部分是可能的。例如，您可以将列表传递给函数并在函数内修改列表。在 Python 中，由于引用相同，因此输入列表会出现修改：

    ```
    def change_list(l):
        l[0] = 3
    my_list = [1,2,3]
    change_list(my_list)
    print(my_list) # prints [3, 2, 3] 
    ```

* * *

MATLAB 的变量概念与 Python 不同。在 MATLAB 中，变量是具有某些维度的矩阵。有效地写入`x = y`副本（适当`y`地`x`设置`x`s 尺寸）。MATLAB 在内部进行优化以避免实际复制数据，除非必要，但对于程序员来说，它看起来好像`x`并且`y`是单独的矩阵。

MATLAB 也没有指针，除非您正在处理已编译的 MEX 扩展（它是用 C 等其他语言编写的）。与 Python 一样，您拥有无需指针即可传递事物的机制（例如，多个输入和输出参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:55:42.737

`ctypes`Python你显然可以有库的指针。此外，您可以[在 Python 中模拟指针的概念](https://stackoverflow.com/questions/1145722/simulating-pointers-in-python)，就像在这个问题中一样。

在 Matlab 中，您也没有指针。

# powershell - 使用powershell将参数从输入框传递到存储过程-请阅读全文，我知道它很长

> ID：15290061
> 
> 赞同：0
> 
> 时间：2013-03-08T08:53:58.163
> 
> 标签：powershell

嗨，有一个使用 powershell 创建输入框的脚本。看起来像这样

```
[void] [System.Reflection.Assembly]::LoadWithPartialName("System.Drawing") 
[void] [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms") 

$objForm = New-Object System.Windows.Forms.Form 
$objForm.Text = "Data Entry Form"
$objForm.Size = New-Object System.Drawing.Size(300,200) 
$objForm.StartPosition = "CenterScreen"

$objForm.KeyPreview = $True
$objForm.Add_KeyDown({if ($_.KeyCode -eq "Enter") 
{$x=$objTextBox.Text;$objForm.Close()}})
$objForm.Add_KeyDown({if ($_.KeyCode -eq "Escape") 
{$objForm.Close()}})

$OKButton = New-Object System.Windows.Forms.Button
$OKButton.Location = New-Object System.Drawing.Size(75,120)
$OKButton.Size = New-Object System.Drawing.Size(75,23)
$OKButton.Text = "OK"
$OKButton.Add_Click({$x=$objTextBox.Text;$objForm.Close()})
$objForm.Controls.Add($OKButton)

$CancelButton = New-Object System.Windows.Forms.Button
$CancelButton.Location = New-Object System.Drawing.Size(150,120)
$CancelButton.Size = New-Object System.Drawing.Size(75,23)
$CancelButton.Text = "Cancel"
$CancelButton.Add_Click({$objForm.Close()})
$objForm.Controls.Add($CancelButton)

$objLabel = New-Object System.Windows.Forms.Label
$objLabel.Location = New-Object System.Drawing.Size(10,20) 
$objLabel.Size = New-Object System.Drawing.Size(280,20) 
$objLabel.Text = "Please enter @from date:"
$objForm.Controls.Add($objLabel) 

$objTextBox = New-Object System.Windows.Forms.TextBox 
$objTextBox.Location = New-Object System.Drawing.Size(10,40) 
$objTextBox.Size = New-Object System.Drawing.Size(260,20) 
$objForm.Controls.Add($objTextBox) 

 $objForm.Topmost = $True

$objForm.Add_Shown({$objForm.Activate()})
[void] $objForm.ShowDialog()

$from 
```

现在我想将我输入的值 $from 传递给存储过程参数@from，我在下面尝试但没有工作。有什么建议吗？

```
$SqlConnection = New-Object System.Data.SqlClient.SqlConnection
$SqlConnection.ConnectionString = "Server=localhost;Database=AMSDataWarehouse      Test;Integrated Security=SSPI"
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand

 $SqlCmd.Connection = $SqlConnection
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$SqlAdapter.SelectCommand = $SqlCmd
$SqlCmd.CommandText = "YQBreport1"
$cmd.Parameters.Add("@from", $from)| Out-Null
$Command.ExecuteNonQuery()
$from = $Command.Parameters["@from"].value

$DataSet = New-Object System.Data.DataSet
$SqlAdapter.Fill($DataSet)
$SqlConnection.Close()
$SQLResult =$DataSet.Tables[0]
$commands = $SQLResult | foreach-object -process { $_.output }> output.ps1
.\output.ps1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T14:56:03.270

该行：

```
$OKButton.Add_Click({$x=$objTextBox.Text;$objForm.Close()}) 
```

仅适用于`Add_click`功能。要使其在其他地方可以访问，您需要将其稍微更改为：

```
$OKButton.Add_Click({$Global:x=$objTextBox.Text;$objForm.Close()}) 
```

`$x`然后是一个全局参数，您可以将其传递给您的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:03:39.723

是的，您可以使用 Windows Presentation Foundation (WPF) 在 PowerShell 中制作 GUI。我已经尝试过并且失败了。

读入如下值：

```
$from = Read-Host '@From'
$from 
```

Out-GridView 是我刚刚学到的新东西。你应该调查一下。

```
ls | Out-GridView -PassThru -Title 'GUI?' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:58:30.733

如何在 PowerShell 中创建输入框的好例子（使用 Windows 窗体）

[http://technet.microsoft.com/en-us/library/ff730941.aspx](http://technet.microsoft.com/en-us/library/ff730941.aspx)

# java - 使用不区分大小写的 Jboss LDAP 登录模块

> ID：15290068
> 
> 赞同：0
> 
> 时间：2013-03-08T08:54:20.087
> 
> 标签：java, jboss, ldap

我已经使用 Jboss LDAP 登录模块在我的 JBoss 6.0 服务器中设置了一个登录模块，如下所示：

```
 <login-module code="org.jboss.security.auth.spi.LdapLoginModule" flag="sufficient">
            <module-option name="java.naming.provider.url">ldap://@ACTIVE_DIRECTORY_DOMAINSERVER@:@DOMAINSERVER_PORT@</module-option>
            <module-option name="java.naming.security.protocol">ssl</module-option>     
            <module-option name="principalDNSuffix">****</module-option>
            <module-option name="rolesCtxDN">dc=***,dc=**,dc=**</module-option>
            <module-option name="uidAttributeID">sAMAccountName</module-option>
            <module-option name="roleAttributeID">memberOf</module-option>
            <module-option name="roleAttributeIsDN">true</module-option>
            <module-option name="searchScope">ONELEVEL_SCOPE</module-option>  
            <module-option name="allowEmptyPasswords">false</module-option> 
            <module-option name="roleNameAttributeID">cn</module-option>
            <module-option name="defaultRole">authenticated</module-option>
            <module-option name="debug">true</module-option>
        </login-module> 
```

对用户名的“uidAttributeID”属性执行不区分大小写匹配的语法是什么？如果属性定义很重要，那将如何更改？

提前致谢！

# java - 通过名单 通过意图

> ID：15290070
> 
> 赞同：0
> 
> 时间：2013-03-08T08:54:29.180
> 
> 标签：java, android, android-intent

我想将`List<String[]>`意图传递给活动，然后检索它。任何人都知道如何正确地做到这一点？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T08:56:50.633

我会将它放入一个可序列化的对象中，然后将包中的可序列化对象传递给下一个活动。

```
Bundle bundle = new Bundle();
bundle.putSerializable("list", serializableList);

mainIntent.putExtras(bundle);
startActivity(mainIntent); 
```

`java.util.ArrayList`已经实现了`Serializable`接口。所以这对你的目的来说是完美的。然后在另一个活动上，您可以使用以下代码来检索列表

```
Bundle bundle = getIntent().getExtras();
userInfo = (ArrayList) bundle.getSerializable("list"); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T08:59:29.020

将变量放在对象的静态属性中。

前任。

```
 public class Util {

     public static List<String[]>  mystaticlist;

} 
```

并从第二个活动静态访问它：

```
 List<String[]>  mystaticlist = Util.mystaticlist; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T09:03:36.110

这是可能的，但是您需要将其作为 Serializable 传递，并且在提取额外内容时需要转换结果。由于 ArrayList 实现了 Serializable 并且 String[] 本质上是可序列化的，因此代码很简单。要通过它：

```
ArrayList<String[]> list = . . .;
Intent i = . . .;

i.putExtra("strings", list); 
```

要检索它：

```
Intent i = . . .;
ArrayList<String[]> list = (ArrayList<String[]>) getSerializableExtra("strings"); 
```

# ruby-on-rails - 有没有办法查看参数化密码查询的字符串版本？

> ID：15290072
> 
> 赞同：0
> 
> 时间：2013-03-08T08:54:31.330
> 
> 标签：ruby-on-rails, neo4j, cypher, neography

在 Ruby on Rails 中，我使用 NeoGraphy 构建参数化密码查询并返回结果。

```
@results = $neo.execute_query(query, parameters) 
```

使用 gon，我将所有这些都放到客户端并在 javascript 控制台中检查出来：

```
gon.results = @results
gon.search_query = query
gon.search_parameters = parameters 
```

gon.search_query 正是我在 .rb 文件中看到的，所以我猜这意味着 cypher 接受它并接受参数然后创建查询。 **我可以访问**必须使用参数值创建的查询的字符串版本吗？

我想要这个的原因是我可以将它粘贴到 neo4j Web 管理控制台工具中并对其进行调整。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:22:03.970

也许最简单的方法是编写自己的打印方法，给定查询和参数将打印扩展的查询。您可以在 $neo.execute_query 之前/之后调用它

# typo3 - TYPO3 扩展“新闻”：获取“详细视图”URL

> ID：15290087
> 
> 赞同：1
> 
> 时间：2013-03-08T08:55:17.953
> 
> 标签：typo3

我已经开始使用 TYPO3 扩展“新闻”，我想在列表视图中为每个实体的详细视图创建一个“Facebook Like 按钮”。为此，我需要获取详细视图的 URL，而不是整个`<a>`标签。我怎样才能做到这一点？

我试过这个，但它没有用：

```
<n:link configuration="{returnLast: 'url'}" newsItem="{newsItem}" settings="{settings}">
    Link to detail page
</n:link> 
```

它使用流体模板，我是全新的，所以我不知道这实际上有多复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:27:09.567

我找到了解决方案。参数`uriOnly`：

```
<n:link uriOnly='1' newsItem='{newsItem}' settings='{settings}'></n:link>" 
```

# eclipse - “标记出现”在 Eclipse Juno 中不起作用

> ID：15290089
> 
> 赞同：23
> 
> 时间：2013-03-08T08:55:36.377
> 
> 标签：eclipse, eclipse-juno

在我现在在 Java 编辑器中将我的 IDE 从 Eclipse Indigo 切换到 Eclipse Juno 之后，标记所有出现的标记变量的可能性不再起作用。只有当我从符号栏中明确停用并再次激活正确的符号时，它才有效。通常，一旦激活该符号应该标记所有其他变量，并且当将光标设置为另一个变量时，同样应该继续。我不想通过重置符号栏中的符号来手动执行这些步骤。这里发生了什么？Eclipse Indigo 毫无怨言地做到了这一点。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-13T14:49:41.967

这是 Eclipse Juno 的一个已知问题。我在使用 Eclipse Juno 4.2.2 时遇到了这个问题

*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=400661](https://bugs.eclipse.org/bugs/show_bug.cgi?id=400661)
*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509)

**解决方法：**切换到大纲视图，选择一些内容，然后再次切换回您的文件。标记出现应该再次开始工作（至少一段时间）。

# scala - jenkins 上的 scala 代码覆盖工具 Cobertura

> ID：15290095
> 
> 赞同：2
> 
> 时间：2013-03-08T08:55:59.787
> 
> 标签：scala, code-coverage, cobertura

我在 Jenkins 中配置 Cobertura 代码覆盖工具以使用混合 Java/Scala 项目时遇到困难。Java 类工作正常，但 Cobertura 不分析 Scala 测试。

我的 pom.xml 中的 Scala 特定配置：

```
<version.scala.plugin>3.1.0</version.scala.plugin>
<build>
<plugins>
        <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <configuration>
                    <formats>
                        <format>html</format>
                        <format>xml</format>
                    </formats>
                    <check/>
                </configuration>
        <version>2.5.2</version
    </plugin>
    <plugin>
            <groupId>net.alchim31.maven</groupId>
            <artifactId>scala-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>scala-compile-first</id>
                    <phase>process-resources</phase>
                    <!--suppress MavenModelInspection -->
                    <goals>
                        <goal>add-source</goal>
                        <goal>compile</goal>
                    </goals>
                </execution>
                <execution>
                    <id>scala-test-compile</id>
                    <phase>process-test-resources</phase>
                    <!--suppress MavenModelInspection -->
                    <goals>
                        <goal>testCompile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
</plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T13:51:36.677

有用。这是某种代理问题，一旦我再次构建健康并构建了几次，就会出现正确的代码覆盖率。

# code-coverage - Emma 无法识别 Java7 中的 [ctl] 命令

> ID：15290097
> 
> 赞同：0
> 
> 时间：2013-03-08T08:56:02.990
> 
> 标签：code-coverage, instrumentation, emma, ctl

我正在使用最新版本的 Emma，即 2.0.5312 和 Java 7。如果我运行以下命令来即时获取 coverage.ec，我会收到错误消息。 **java emma ctl -connect localhost:47653 -command coverage.get,coverage.ec**

```
*Exception in thread "main" java.lang.IllegalArgumentException: unknown command:
[ctl]
    at com.vladium.emma.Command.create(Command.java:51)
    at emma.main(emma.java:39)* 
```

如果使用旧版本的 Emma，通常会看到此错误，但我相信 build 5312 是 Emma 的最新版本。此外，在 Java 6 中也没有出现此错误。

有人遇到过这个问题并能够解决吗？任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:50:10.497

Emma 的最新和最后一个版本是 2.1.5320。我下载了这个版本并且能够克服上述错误。

# c# - 使用数据库和 C#

> ID：15290102
> 
> 赞同：2
> 
> 时间：2013-03-08T08:56:21.190
> 
> 标签：c#, database

![在此处输入图像描述](../Images/075709c67645fadcc87b64746d3a41d9.png)我的数据库中有一个问题和答案表，现在我需要一个一个地提取每个问题及其自己的答案，然后按 NEXT 按钮转到第二个问题。

```
 {    
  public partial class TakeTest : Form
   {
    public static User CurrentUser { get; set; }
    private DataService dataService;
    private List<Category> categories;
    private List<Exam> tests;
    // private List<Question> questions;
    private Dictionary<Question, List<Answer>> qa;    

    public TakeTest()
    {
        InitializeComponent();
        dataService = new DataService();
    }

    private void TakeTest_Load(object sender, EventArgs e)
    {

        // category
        categories = dataService.GetCategories();

        if (categories.Count > 0)
        {   
            cmbSelCategory.Items.AddRange(categories.ToArray());
            cmbSelCategory.SelectedIndex = 0;
        }

    }

    private void cmbSelCategory_SelectedIndexChanged(object sender, EventArgs e)
    {
        Category selectedCategory = (Category)cmbSelCategory.SelectedItem;

        tests = dataService.GetTests(selectedCategory.Id);

        cmbSelTest.Items.Clear();
        if (tests.Count > 0)
        {
            cmbSelTest.Items.AddRange(tests.ToArray());
            cmbSelTest.SelectedIndex = 0;
        }

    } 
```

这就是我填写类别和测试的方式

问题：使用字典'问题，列出'答案''是个好主意吗？或者我还能怎么做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:02:46.570

你似乎已经`Question`上课了。为什么不`Answers`向该类添加一个属性并填充问题详细信息和所有答案。然后你可以创建一个`List<Question>`，你可以从头到尾迭代。

`Dictionary`迭代 a比迭代 a 更难`List`。

实际上，更仔细地查看您的代码，您似乎也有一个`Exam`类 - 这可能包含一个`Question`s 列表，每个都`Question`可以包含一个`Answer`s 列表。

# python - Python 服务器同时公开 xml 和 json rpc 接口

> ID：15290104
> 
> 赞同：1
> 
> 时间：2013-03-08T08:56:31.457
> 
> 标签：python, xml-rpc, rpc, json-rpc

正如标题所说，有没有办法将函数同时暴露给 JSON-RPC 和 XML-RPC 接口？优选地，在单个端口上运行的一台服务器将响应这两种类型的请求。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T09:19:54.777

返回不同格式的常用方法之一是以某种方式在 url 中指定您想要的类型。最常见的是：

```
http://example.com/some/page.<format> 
```

或者

```
http://example.com/some/page?output=<format> 
```

然后你返回的对象应该被转换成想要的格式：

```
// somewhere at the end of the method handling the request
return Formater(format_param).format(response_object) 
```

# typo3 - Typo3 6.0.2 添加 RTE 类

> ID：15290105
> 
> 赞同：3
> 
> 时间：2013-03-08T08:56:37.430
> 
> 标签：typo3, typoscript, rte

如何将新类添加到 TYPO3 RTE（版本 6.0.2）我尝试了与 Typo3 4 相同的方法： - 在 fileadmin 文件夹（fileadmin/css/rte.css）中创建了一个 css 文件 - 在这个 css 文件中添加样式 -在页面 TSConfig 中添加这些行：

```
RTE.default {
classesParagraph >
classesTable >
classesTD >
classesLinks >
classesCharacter >
classesAnchor >
classesImage >

ignoreMainStyleOverride=1
showTagFreeClasses=1

contentCSS = /fileadmin/css/rte.css

showButtons = *

showTagFreeClasses = 1

proc.allowedClasses >
}

RTE.classes {
left.name=Float left
} 
```

但没有任何改变，我添加的课程不会在 RTE 中显示...

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T12:03:02.737

我认为一些配置选项在 TYPO3 的较新版本中发生了变化。

**不推荐使用的属性 => 改为使用**

*   disableRightClick => contextMenu.disable
*   disableContextMenu => contextMenu.disable
*   hidePStyleItems => button.formatblock.removeItems
*   hideFontFaces => 按钮.fontstyle.removeItems
*   fontFace => 按钮.fontstyle.addItems
*   hideFontSizes => 按钮.fontsize.removeItems
*   fontSize => 按钮.fontsize.addItems
*   classesCharacter => buttons.textstyle.tags.span.allowedClasses
*   classesParagraph => buttons.blockstyle.tags.div.allowedClasses
*   classesTable => buttons.blockstyle.tags.table.allowedClasses
*   classesTD =>buttons.blockstyle.tags.td.allowedClasses
*   classesImage => buttons.image.properties.class.allowedClasses
*   classesLinks => buttons.link.properties.class.allowedClasses
*   盲图像选项 => 按钮.图像.选项.删除项目
*   盲链接选项 => 按钮.link.options.removeItems
*   defaultLinkTarget => 按钮.link.properties.target.default
*   RTE.default.classesAnchor => RTE.default.buttons.link.properties.class.allowedClasses
*   RTE.default.classesAnchor.default.[link-type] => RTE.default.buttons.link.[link-type].properties.class.default
*   mainStyleOverride => contentCSS
*   mainStyleOverride_add.[key] => contentCSS
*   mainStyle_font => contentCSS
*   mainStyle_size => contentCSS
*   mainStyle_color => contentCSS
*   mainStyle_bgcolor => contentCSS
*   inlineStyle.[any-keystring] => contentCSS
*   忽略MainStyleOverride => na
*   disableTYPO3Browser => buttons.image.TYPO3Browser.disabled 和 buttons.link.TYPO3Browser.disabled
*   showTagFreeClasses => buttons.blockstyle.showTagFreeClasses 和 buttons.textstyle.showTagFreeClasses
*   disablePCexamples => buttons.blockstyle.disableStyleOnOptionLabel 和 buttons.textstyle.disableStyleOnOptionLabel

见这里： http: [//forge.typo3.org/issues/28325](http://forge.typo3.org/issues/28325)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T13:24:46.547

如果您仍然需要帮助：这是另一个有帮助的问题： [无法在 RTE 中选择文本样式](https://stackoverflow.com/questions/13050092/cannot-choose-text-style-in-rte)

我在使用 TYPO3 6.0.2 时遇到了同样的问题，并且我发现许多教程或论坛条目都包含已弃用的属性。有了上述问题的答案，它就起作用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T12:22:40.240

css 文件 rte.css

```
a.youtube-vintage, a.fb-vintage, a.www-vintage {
    color: #9A3811;
} 
```

页面配置

```
/////////////////////////////////////////////////////////////
    //    RTE
    ///////////////////////////////////////////////////////////// 
    RTE.classes{
      youtube-vintage{
          name = youtube
          value = color:#636466; font-size:15px;
      } 
      fb-vintage{
          name = fb
          value = color:#9A3811;
      }
      www-vintage{
          name = www
          value = color:#9A3811;

      }
    }

    RTE.default{
      ignoreMainStyleOverride = 1 
      useCSS = 1
      showTagFreeClasses = 1
      contentCSS = fileadmin/templates/css/rte.css
      buttons {
        blockstyle.tags.div.allowedClasses := addToList(youtube-vintage, fb-vintage, www-vintage)
        blockstyle.tags.p.allowedClasses := addToList(youtube-vintage, fb-vintage, www-vintage)
        textstyle.tags.span.allowedClasses := addToList(youtube-vintage, fb-vintage, www-vintage)
      }
      proc.allowedClasses := addToList(youtube-vintage, fb-vintage, www-vintage)
    } 
```

# node.js - 在 NodeJS 和 ExpressJS 中显示基本 HTML 文件

> ID：15290107
> 
> 赞同：0
> 
> 时间：2013-03-08T08:56:40.137
> 
> 标签：node.js, backbone.js, express

我正在使用 NodeJS 和 ExpressJS 为简单的后端实现 RESTful API 服务器。我也在使用 BackboneJS 在前面渲染视图。因此，现在我有一个 index.html 文件，我想在客户端向“/”路由发送 /GET 时呈现该文件。这是我到目前为止所拥有的：

```
var express = require('express');
var app = express();
app.use(express.bodyParser());
var mongo = require('mongodb');
var mongoose = require('mongoose');

var Server = mongo.Server, 
    DB = mongo.Db,
    BSON = mongo.BSONPure;

var server = new Server('localhost', 27017, {auto_reconnect: true});

db = new DB('mydb', server, {safe: true});

db.open(function(err, db) {
    if(!err) {
        console.log("Connected to 'mydb' database");
        db.collection('items', {safe:true}, function(err, collection) {
            if (err) {
                console.log("Creating collection 'items'");
            }
        });
    }
});

var port = process.env.PORT || 3000;

app.engine('.html');

var listItems = function(req, res){
    db.collection('items', function(err, collection){
        var items = collection.find();
        console.log(items);
        res.send(items);
    });
}

var itemDetails = function(req, res){

}

var deleteItem = function(req, res){

}

var createItem = function(req, res){

}

var updateItem = function(req, res){

}

var routeHome = function(req, res){

        // What can I do here to render a plain .html file?

}

app.all('*', function(req, res, next){
    res.header("Access-Control-Allow-Origin", "*");
    res.header("Access-Control-Allow-Headers", "X-Requested-With");
    res.header("Content-Type", "application/json");
    next();
});

app.get('/', routeHome);

app.get('/items', listItems);
app.get('/items/:id', itemDetails);
app.del('/users/:id', deleteItem);
app.post('/users', createItem);
app.put('/users/:id', updateItem);

app.listen(port);

console.log("Server started up on port " + port); 
```

正如您所看到的，我已经完成了所有设置，除了我无法弄清楚如何将常规 .html 文件发送到客户端。我不需要渲染引擎，因为 Backbone 正在为我做这一切。我只想让 index.html 去客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:09:14.640

只使用`express.static`中间件怎么样？由于您使用的是 Backbone，您可能还需要发送静态 JS 文件：

```
app.use(express.static(__dirname)); 
```

Place that somewhere before your other routes. It will try and find files requested in `__dirname` (the directory where your app.js file resides, but you can of course change the location where the middleware will try and find files), including `index.html`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:41:34.790

Step One, Remove `app.engine(".html")`,

Step Two:

```
var routeHome = function(req, res){
    // Do What Ever
    res.sendFile("index.html",function(err){ // Transfer The File With COntent Type Text/HTML
        if(err){
            res.end("Sorry, Error.");
        }else{
            res.end(); // Send The Response
        }
    })
} 
```

# sql - SQL 将多行合并为多列

> ID：15290114
> 
> 赞同：2
> 
> 时间：2013-03-08T08:57:13.543
> 
> 标签：sql, sql-server, sql-server-2008-r2

我的查询结果中有多行：

例如，表“地址”：

```
Street | Number | City
----------------------
A1     | A2     | A3
B1     | B2     | B3 
```

我真正想要的是：

```
Address1_Street | Address1_Number | Address1_City | Address2_Street | Address2_Number | Address2_City
------------------------------------------------------------------------------------------------------
A1              | A2              | A3            | B1              | B2              | B3 
```

谁知道我怎么能做到这一点？

我现在已经做到了这一点（抱歉使用其他列，上面是一个例子，但我猜你会明白的）：

```
select distinct
    a.ID,
    a.Name, 
    ca1.NameLine1 as Address1_NameLine1, 
    ca2.NameLine1 as Address2_NameLine1
from 
    dbo.Accounts a, 
    dbo.Addresses ca1,
    dbo.Addresses ca2
where 
        (a.ID = ca1.AccountID AND a.ID = ca2.AccountID)
    AND (a.Name = 'TEST')
    AND (ca1.ID <> ca2.ID) 
```

但我仍然得到 2 行......其中 Address1 与 Address2 切换。有谁知道如何只得到一个？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T10:13:24.847

尝试：

```
select ID,
       max(Name) Name,
       max(case when rn=1 then NameLine1 end) Address1_NameLine1,
       max(case when rn=2 then NameLine1 end) Address1_NameLine2
from
(select a.ID,
        a.Name, 
        ca.NameLine1,
        rank() over (partition by a.ID order by ca.ID) rn
 from dbo.Accounts a 
 join dbo.Addresses ca on a.ID = ca.AccountID
 where a.Name = 'TEST') sq
group by ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:13:28.207

```
select address1.* ,address2.* from
Address address1 inner join on Address address2
on address1.userid=address2.userid 
```

您可以根据数据选择内连接或左连接。

# batch-file - 批处理脚本设置/错误

> ID：15290116
> 
> 赞同：1
> 
> 时间：2013-03-08T08:57:24.297
> 
> 标签：batch-file

这个脚本如何不断返回错误？

```
@echo off
set csd=Fri 03/08/2013
set edayn=%csd:~7,1%%csd:~8,1%
set /a tsday=%edayn%
echo %edayn%
echo %tsday%
pause 
```

时间格式：ddd mm/dd/yyyy
“csd”变量是我打开脚本的日期。
为了消除变量“edayn”或日期上的零，我使用“set /a”来消除它，但它显示了这个错误：

```
Invalid number.  Numeric constants are either decimal (17),
hexadecimal (0x11), or octal (021).
08
ECHO is off.
Press any key to continue . . . 
```

当一天不是从 0 开始时，它不会出现此错误。
我在这个脚本上找不到错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:18:01.980

您收到错误的原因是八进制数（当`/a`在命令中使用标志时`set`）以数字 0（零）为前缀。

不是有效数字的原因`08`是八进制数字系统仅包含 8 个符号 (0-7)，这意味着这`08`是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:47:52.277

您不需要 SET 中的 /a 来为变量赋值：
`set tsday=%edayn%`

我从你的 csd 得到月份和日期

```
%csd:~4,2%
%csd:~7,2% 
```

**编辑**
如果您想删除前导零，请将每个字段分成两部分（对于十位和单位），然后对于十位字段：-使用语法
搜索并用空字符串 '' 替换 '0'`%variable:0=%`

```
@echo off
set csd=Fri 13/08/2013
set day1=%csd:~4,1%
set day2=%csd:~5,1%
set mo1=%csd:~7,1%
set mo2=%csd:~8,1%
set day=%day1:0=%%day2%
set mo=%mo1:0=%%mo2%
echo %day%/%mo% 
```

# java - JAX-WS - 将 WebServiceContext 注入只有 @Oneway 方法的 @WebService

> ID：15290118
> 
> 赞同：1
> 
> 时间：2013-03-08T08:57:27.633
> 
> 标签：java, jax-ws, sap, java-ee-5, netweaver

我使用的是 SAP NetWeaver 7.3 EHP 1（JEE5 认证），我为现有的 WSDL 生成了一个 Web 服务框架。此 Web 服务中的所有方法都是非阻塞的，因此使用`@Oneway`. 服务本身工作得很好。

不过，我还需要访问注入`WebServiceContext`，这就是麻烦开始的地方。我可以很好地注入上下文，但对它的每次调用都只会在特定于服务器的 NPE 或 ISE 中结束。我有点能理解，因为非阻塞调用是由 SAP 的 JAX-WS 实现异步执行的。但是，我尝试通过查看 JAX-WS 规范来验证这种行为。现在我要么是盲人，要么规范没有明确说明 a`WebServiceContext`不能用于非阻塞 Web 方法。事实上，在整个最新版规范的第 5.3 章中，`@Oneway`都没有提到一次。主要描述是

> javax.xml.ws.WebServiceContext 接口使端点实现对象以及可能共享其执行上下文的任何其他对象都可以访问与正在服务的请求有关的信息。在调用其 Web 服务方法之一之外的组件的 WebServiceContext 上调用任何方法的结果是未定义的。如果一个实现检测到这样的用法，它应该抛出一个 java.lang-.IllegalStateException。

我想重点是“请求被服务”的定义。在 SOAP 操作的异步处理时，HTTP 请求已经完成。但是话又说回来，我没有访问“在调用其 Web 服务方法之外”的上下文。我很困惑...

你们有谁知道我是否应该被允许以`WebServiceContext`非阻塞的网络方法访问？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:46:48.507

**你是对的：规范没有说明这个限制——它只是隐含的暗示。**

来自 JAX-WS 规范（2.2 Rev A）：

> *WebServiceContext 被视为可在端点初始化时设置的可注入资源。然后，WebServiceContext 对象将使用**线程本地**信息返回正确的信息，而不管有多少线程同时用于为发往同一端点对象的请求提供服务。*

应该在端点存在的情况下可操作，但前提是在设置请求上下文信息并将请求上下文信息存储到线程本地内存存储中的同一线程中使用。鉴于 WebServiceContext 主要是 MessageContext 信息，即 HTTP 请求/Servlet 请求/WSDL 操作设置，线程本地上下文信息可能需要由最初编组 SOAP/HTTP 请求的线程填充，这意味着后面的异步处理线程没有此信息可用。仅基于阅读-尚未测试此组合。

# ruby-on-rails - 测试字段在 mongoid 中键入模型

> ID：15290122
> 
> 赞同：1
> 
> 时间：2013-03-08T08:57:38.527
> 
> 标签：ruby-on-rails, ruby, testing, model, mongoid

我在轨道上使用红宝石。我也使用 minitest 框架进行测试，使用 mongoid 进行数据库。我想写一个模型测试。我的模型如下：

```
class Identity
  include Mongoid::Document
  include OmniAuth::Identity::Models::Mongoid

  field :name
  field :email
  field :password_digest

  validates :name, uniqueness: true
end 
```

模型测试是：

```
describe Identity do
  it "must include OmniAuth::Identity::Models::Mongoid" do
    Identity.must_include OmniAuth::Identity::Models::Mongoid
  end

  it "should have name" do
    Identity.new.must_respond_to :name
  end

  it "should have email" do
    Identity.new.must_respond_to :email
  end

  it "should have password_digest" do
    Identity.new.must_respond_to :password_digest
  end

   it "should type of String" do
    Identity.new.name.type.must_equal "String"
  end
end 
```

我的问题是关于测试字段的类型

```
it "should type of String" do
  Identity.new.name.type.must_equal "String"
end 
```

如何测试字段的类型？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:53:39.753

只是一个提示 - 虽然不是您实际问题的答案，但通常不是那么明智的代码测试实现细节，因为它更有可能发生变化，如果您考虑通过测试进行系统验证，那么它的方式 *并不*重要已实现，但*它做了什么*，例如。*它的行为方式*。

一个典型的例子是测试 Stack 类的功能。与其从堆栈中推送和弹出项目并检查大小，不如只推送和弹出项目，并查看如果您弹出一个空堆栈，您会得到适当的异常。当然，您要检查物品是否按后进先出 (LIFO) 顺序退回。

因此，在您的情况下，与其测试您的字段`name`是哪种类型，不如测试您对名称*所做*的操作。

# php - 如何计算PHP / MySQL中多行两列之间的时间差

> ID：15290123
> 
> 赞同：0
> 
> 时间：2013-03-08T08:57:47.127
> 
> 标签：php, mysql, date, time

我有这个 PHP 代码：

```
 $sql="SELECT ticket_seq, SUM(TIMEDIFF(timeend, timestart)) as total FROM ticket_updates GROUP BY ticket_seq";
$rs=mysql_query($sql,$conn) or die(mysql_error());
if(mysql_num_rows($rs) > 0)
{
    while($result=mysql_fetch_array($rs))
    {
        $sql2="SELECT * from tickets where ticketnumber = '".$result["ticket_seq"]."' ";
        $rs2=mysql_query($sql2,$conn) or die(mysql_error());
        $result2=mysql_fetch_array($rs2);

        $sql3="SELECT * from customer where sequence = '".$result2["company"]."' ";
        $rs3=mysql_query($sql3,$conn) or die(mysql_error());
        $result3=mysql_fetch_array($rs3);

        if($result["total"] > $result3["support_hours"])
        {
            echo $result3["company"].' - '.$result["total"].'<br>';
        }
    }
} 
```

但是当我回显 $result["total"] 时，我只会得到随机数。

我正在尝试为多行选择 timestart 和 timeend 之间的时间差并将其相加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:31:12.423

我认为这样的事情会解决你的问题

```
SELECT SUM(
   (SELECT TIMEDIFF(timeend, timestart) FROM ticket_updates GROUP BY ticket_seq)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:14:20.543

快速播放和类似的东西可能会做到：-

```
$sql="SELECT ticket_updates.ticket_seq, customer.company, SUM(CAST((UNIX_TIMESTAMP(timeend) - UNIX_TIMESTAMP(timestart)) AS UNSIGNED)) as total 
    FROM ticket_updates 
    INNER JOIN tickets ON tickets.ticketnumber = ticket_updates.ticket_seq
    INNER JOIN customer ON customer.sequence = tickets.company
    GROUP BY ticket_updates.ticket_seq, customer.company
    HAVING total > (customer.support_hours*60*60)";
$rs=mysql_query($sql,$conn) or die(mysql_error());
if(mysql_num_rows($rs) > 0)
{
    while($result=mysql_fetch_array($rs))
    {
            echo $result3["company"].' - '.$result["total"].'<br>';
    }
} 
```

这是将日期/时间字段转换为 unix 时间戳，找到差异并将其转换为无符号，然后检查支持时间乘以 60 和 60（即，从小时转换为秒）

# php - 根据 Items 的第一个字母列出项目

> ID：15290126
> 
> 赞同：-1
> 
> 时间：2013-03-08T08:58:11.613
> 
> 标签：php, html, mysql

在我的网站中，我需要在一个页面中显示所有产品。让我进一步解释一下。项目的详细信息将保存在 mysql 表中。我需要使用该项目创建一个品牌目录页面。如果有从字母 A 开始的项目，

**一个**

*   阿玛尼
*   阿南
*   昂古多

以及从 B 开始的项目，

**乙**

*   百加得
*   巴洛尼

就像我需要展示的那个 AZ。但我是 PHP 新手，并试图创建一个逻辑，但没有附带任何东西。所以请任何人都可以帮助我吗？？>

提前致谢。

快速回复会很好。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:03:39.540

尝试这个 ：

```
$sql       = mysql_query("SELECT * FROM ......");

$res       = array();
while($row = mysql_fetch_assoc($sql)){
   $title  = $row['title'];
   $letter = substr($title, 0, 1);
   $res[$letter][] = $title;
}

ksort($res);
echo "<pre>";
print_r($res); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:03:22.777

您说您正在使用 MySQL，但出于某种原因想要在 PHP 中进行排序。你知道 (My)SQL 中的[ORDER BY](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)构造吗？

这使得即使在输入 PHP 之前，也可以很容易地按字母顺序对记录进行排序。想象一个看起来像这样的查询：

```
SELECT name 
FROM table 
```

然后你可以想象得到如下结果：

```
John
Abe
Pete
Frank 
```

但是，当您使用 ORDER BY 构造并将查询转换为：

```
SELECT name 
FROM table
ORDER BY name 
```

您按字母顺序获得结果（文本数据类型的默认值）

```
Abe
Frank
John
Pete 
```

如果您决定要降序排序，只需使用`ORDER BY name DESC`（或`ASC`显式升序）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:01:56.903

尝试在mysql查询中排序

```
SELECT id,name from TABLE order by name asc; 
```

现在从您从查询中收到的内容开始搜索 char 'A' 并相应地创建块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:05:18.613

建议这种方法：

1.  按照@SudipPal 的建议，首先在 mysql 中对结果列表进行排序。
2.  `for`使用循环遍历已排序的项目
3.  收集所有的'A'并将它们推入一个新的关联数组中，`key`作为'A'
4.  重复其余的字母

您最终应该得到一个像这样的结构的关联数组：

```
array(
    "A" => array("Armani", "Anan", "Aungundo"),
    "B" => array("Bacardi", "Barloni"),
    "C" => ... ,
    ...
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T09:09:35.657

您可以使用这样的 Mysql 查询来解决它：

```
$letter = 'a'; // or 'b' ... 'z'
$q = mysql_query(" select * from `my_table` where `my_coloumn` like '".$letter."%'  ");
while($r = mysql_fetch_object($q))
{
    echo $r->my_cloumn.'<br />';
} 
```

# html - 带有 html 的非缩进列表

> ID：15290129
> 
> 赞同：0
> 
> 时间：2013-03-08T08:58:16.493
> 
> 标签：html, styles, semantics

我有一个城市列表，其中包含有关城市的其他信息。我想根据他们的位置将这些城市固定在地图（图像）上，如果您悬停图钉，我想显示附加信息。

对于我可能会使用的城市地图，`<map>`但似乎不打算在`<area>`. 对于城市列表，我会使用列表。但是列表似乎总是要缩进的。而且似乎很难设置它们的样式，因此列表点会出现在地图上。

那么你实际上是用什么来做这个的呢？

编辑：这只是一个例子，我不想使用谷歌地图或任何东西。我想使用 HTML 和 CSS！它也可以是家谱上的人或天空中的星星或任何东西。

问题是我有一个语义列表，所以我会使用一个 html 列表，但我不希望它缩进。

由于我的“可访问性”标签被删除而没有在此处添加信息（感谢朋友...）：我希望尽可能多的人可以访问该页面。因此，在屏幕阅读器等上不起作用的解决方案不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:42:29.587

CSS 定义了一个样式属性`z-index`。z-index 最低的元素位于底部，较高的索引与较低的索引重叠。（谷歌“CSS 层”了解更多信息。）

因此，您可以将地图图像`<img>`放在最低索引处，并将例如文本段落`<p>`甚至`<a href>`每个城市的位置放在连续更高的索引处（因为城市标签也可能相互重叠）。

然后，您可以使用`onmouseover`操作来显示每个城市的信息（Javascript 等）。但是更简单的方法可能是使用`title`大多数 HTML 标签的属性，大多数浏览器（据我所知）在鼠标悬停时在“工具提示”处实现该属性。它更基本，但对于您的应用程序可能已经足够了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T09:16:07.443

供参考 ：

javascript [API](https://developers.google.com/maps/documentation/javascript/tutorial?hl=nl)。

一篇[关于 W3Schools](http://www.w3schools.com/googleAPI/default.asp)的文章，解释了 Google Maps API。

[google](http://www.google.com?q=google%20maps%20API)上有很多关于这方面的信息。

你是什​​么意思“列表似乎总是缩进”？只需一点 CSS，您就可以对 HTML 列表做任何事情。

```
ul {list-style-type:none;}
ul li {margin:0; padding:0;} 
```

`<map>`元素定义和用法是：

```
The <map> tag is used to define a client-side image-map. 
An image-map is an image with clickable areas. The required name attribute of 
the <map> element is associated with the <img>'s usemap attribute and creates a
relationship between the image and the map.

The <map> element contains a number of <area> elements, that defines the clickable
areas in the image map. 
```

您可以`<area>`使用 php 或任何其他服务器端语言制作标签。但不确定这种方法是否比使用 Google Maps API 更容易:)

# php - 如何使用 Facebook Graph API 获取群组的第一个帖子

> ID：15290138
> 
> 赞同：4
> 
> 时间：2013-03-08T08:58:40.410
> 
> 标签：php, facebook, facebook-graph-api

我在 Facebook 上有一个群组，用户在其中发布有趣的图片。我正在开发一个网站，该网站将以更有条理和有趣的方式呈现发布的图片。

我的方法是使用 Facebook OpenGraph API。我想知道如何获得第一个职位。例如：前 10 个帖子。

默认情况下，图形 API ( `https://graph.facebook.com/{group_id}/feed/`) 返回从 LAST 到 FIRST 排序的帖子。

我已阅读有关分页的页面（[http://developers.facebook.com/docs/reference/api/pagination/](http://developers.facebook.com/docs/reference/api/pagination/)）。所以，我知道`offset`和`limit`参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-06T03:23:22.493

似乎没有以任何其他顺序对提要进行排序的方法。

我能看到的唯一方法是下载整个提要并获取您需要的内容...

```
// Set your access token here...
$accessToken = 'XXX';

// Set your GroupID here...
$groupId = '123';

// Set the number of feed items required here...
$qtyRequired = 10;

$url = 'https://graph.facebook.com/v2.2/' . $groupId . '/feed/?limit=100&access_token=' . $accessToken;
$feed = array();

while ($url) {
    // Get the data from Facebook.
    $curl = curl_init();
    curl_setopt_array($curl, array(
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_URL => $url
    ));
    $data = json_decode(curl_exec($curl));

    // Store the feed to $feed.
    if (is_array($data->data)) $feed = array_merge($feed, $data->data);

    // Load the next page or quit.
    if (isset($data->paging->next)) $url = $data->paging->next;
    else $url = false;
}

// Feed will contain the oldest feed items.
$feed = array_slice($feed, -$qtyRequired); 
```

您可以通过指定所需的确切字段来加快速度。

# mysql - 多个左连接和排序依据

> ID：15290140
> 
> 赞同：0
> 
> 时间：2013-03-08T08:58:43.110
> 
> 标签：mysql, left-join, joomla1.5

我的文件中有以下查询：

```
function getItems($ShowFeatured,$OrderBy,$Order,$amountShow,$ShowPropertyID)

{        
switch($OrderBy) {
case 0 :
$OrderBy = 'p.id';
break;
case 1 :
$OrderBy = 'p.name';
break;
case 2 :
$OrderBy = 'p.price';
break;
case 3 :
$OrderBy = 'p.hits';
break;
case 4 :
$OrderBy = 'p.refresh_time';
break;
}
switch($Order) {
case 0 :
$Order = 'ASC';
break;
case 1 :
$Order = 'DESC';
break;
}   
if($ShowPropertyID){$where= 'WHERE p.id IN ('.$ShowPropertyID.')';}else{$where=        'WHERE p.published = 1 ';}
    if($ShowFeatured){$sqlFeatured= ' AND p.featured = 1';}
    $db = &JFactory::getDBO();     
    $query = 'SELECT p.*, i.name as imagename,c.id as key1,c.name as name_category,t.id as key5,t.name as name_type,cy.id as key2,cy.name as name_country,s.id as key3,s.name as name_state,l.id as key4,l.name as name_locality,'
            . ' CASE WHEN CHAR_LENGTH(p.alias) THEN CONCAT_WS(":", p.id, p.alias) ELSE p.id END as Pslug,'
    . ' CASE WHEN CHAR_LENGTH(c.alias) THEN CONCAT_WS(":", c.id, c.alias) ELSE c.id END as Cslug,'
    . ' CASE WHEN CHAR_LENGTH(cy.alias) THEN CONCAT_WS(":", cy.id, cy.alias) ELSE cy.id END as CYslug,'
    . ' CASE WHEN CHAR_LENGTH(s.alias) THEN CONCAT_WS(":", s.id, s.alias) ELSE s.id END as Sslug,'      
    . ' CASE WHEN CHAR_LENGTH(l.alias) THEN CONCAT_WS(":", l.id, l.alias) ELSE l.id END as Lslug, ' 
    . ' CASE WHEN CHAR_LENGTH(t.alias) THEN CONCAT_WS(":", t.id, t.alias) ELSE t.id END as Tslug '
            . ' FROM #__properties_products AS p '
            . ' LEFT JOIN #__properties_country AS cy ON cy.id = p.cyid '               
            . ' LEFT JOIN #__properties_state AS s ON s.id = p.sid '
            . ' LEFT JOIN #__properties_locality AS l ON l.id = p.lid '
            . ' LEFT JOIN #__properties_category AS c ON c.id = p.cid '
            . ' LEFT JOIN #__properties_type AS t ON t.id = p.type '
            . ' LEFT JOIN #__properties_images AS i ON  p.id = i.parent '
            . $where                
            . $sqlFeatured
            . ' GROUP BY p.id ' 
            . ' ORDER BY '.$OrderBy.' '.$Order
            . ' LIMIT '.$amountShow;

    $db->setQuery($query);  
    $items = $db->loadObjectList();

   // $items = ($items = $db->loadObjectList())?$items:array(); 
//echo str_replace('#_','jos',$query);

    return $items; 
```

获取图像的部分如下：

```
. ' LEFT JOIN #__properties_images AS i ON  p.id = i.parent ' 
```

此查询按 i.parent 排序图像 - 我不喜欢的图像。在我的数据库中，我有行 i.ordering - 是否可以通过 i.ordering 对上述查询进行排序？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:32:01.497

像你这样的查询我认为会做你想要的。

```
$query = 'SELECT p.*, i.name as imagename,c.id as key1,c.name as name_category,t.id as key5,t.name as name_type,cy.id as key2,cy.name as name_country,s.id as key3,s.name as name_state,l.id as key4,l.name as name_locality,'
            . ' CASE WHEN CHAR_LENGTH(p.alias) THEN CONCAT_WS(":", p.id, p.alias) ELSE p.id END as Pslug,'
    . ' CASE WHEN CHAR_LENGTH(c.alias) THEN CONCAT_WS(":", c.id, c.alias) ELSE c.id END as Cslug,'
    . ' CASE WHEN CHAR_LENGTH(cy.alias) THEN CONCAT_WS(":", cy.id, cy.alias) ELSE cy.id END as CYslug,'
    . ' CASE WHEN CHAR_LENGTH(s.alias) THEN CONCAT_WS(":", s.id, s.alias) ELSE s.id END as Sslug,'      
    . ' CASE WHEN CHAR_LENGTH(l.alias) THEN CONCAT_WS(":", l.id, l.alias) ELSE l.id END as Lslug, ' 
    . ' CASE WHEN CHAR_LENGTH(t.alias) THEN CONCAT_WS(":", t.id, t.alias) ELSE t.id END as Tslug '
            . ' FROM #__properties_products AS p '
            . ' LEFT JOIN #__properties_country AS cy ON cy.id = p.cyid '               
            . ' LEFT JOIN #__properties_state AS s ON s.id = p.sid '
            . ' LEFT JOIN #__properties_locality AS l ON l.id = p.lid '
            . ' LEFT JOIN #__properties_category AS c ON c.id = p.cid '
            . ' LEFT JOIN #__properties_type AS t ON t.id = p.type '
            . ' LEFT JOIN (SELECT parent, MAX(ordering) AS MostImportant FROM #__properties_images GROUP BY parent) x ON  p.id = x.parent '
        . ' LEFT JOIN #__properties_images AS i ON  x.parent = i.parent AND x.MostImportant = i.ordering '
            . $where                
            . $sqlFeatured
            . ' GROUP BY p.id ' 
            . ' ORDER BY '.$OrderBy.' '.$Order
            . ' LIMIT '.$amountShow; 
```

您可能希望使用 MIN 而不是 MAX，具体取决于排序的工作方式

# javascript - Jquery在调整大小时调整大小显示大小

> ID：15290143
> 
> 赞同：0
> 
> 时间：2013-03-08T08:58:55.110
> 
> 标签：javascript, jquery

我正在构建一个 jquery 项目，人们可以在其中绘制地图，他们可以将 div 放在地图上，然后他们可以四处移动和调整大小。我想要一个在调整 div 大小时更新 div 的当前宽度/高度的框。目前它可以工作，但它只会在他们完成调整大小后更新，但我希望它在他们调整大小时实时更新。

我当前的代码仅在调整大小后才会更新：

```
$(item).resizable({
            grid: Math.round(gridStand),
            stop : function(event,ui) {
                endW = Math.round($(this).outerWidth()/gridStand);
                endH = Math.round($(this).outerHeight()/gridStand);
                $(this).attr('w', endW).attr('h', endH)
                $('.standW').html('<h5>Breedte</h5><h4>'+($(item).attr('w')/2)+'</h4><span>meter</span>');
                $('.standH').html('<h5>Diepte</h5><h4>'+($(item).attr('h')/2)+'</h4><span>meter</span>')
                }
            })
            .draggable({
                grid: [ Math.round(gridStand), Math.round(gridStand) ],
                 containment: "#map", 
                 scroll: false,
                 stop : function(event,ui) {
                    endX = Math.round($(this).position().left/gridStand);
                    endY = Math.round($(this).position().top/gridStand);
                    $(this).attr('x', endX).attr('y', endY)
                }
            }) 
```

有谁知道如何更改它，以便它在调整大小时更新，而不仅仅是在您完成调整大小时更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:00:40.283

[`resize`](http://api.jqueryui.com/resizable/#event-resize)每次调整大小的对象的大小发生变化时，都会在调整大小期间触发该事件。您将要使用它而不是`stop`，它仅在调整大小完成后触发一次。

# asp.net-mvc - 数据库未正确自动生成实体框架 + 回购模式

> ID：15290144
> 
> 赞同：1
> 
> 时间：2013-03-08T08:58:55.407
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, repository-pattern

我已经使用通用存储库模式设置了实体框架代码。

这是我的模型：

```
public interface IEntity {
    int Key { get; set; }
}

public class Product : IEntity {
    public int Key {
        get {
            return ID;
        }
        set {
            ID = value;
        }
    }
    public int ID { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
    public IEnumerable<Category> Category { get; set; }

}

public class Category : IEntity {
    public int Key {
        get {
            return ID;
        }
        set {
            ID = value;
        }
    }
    public int ID { get; set; }
    public string Name { get; set; }
    public int ParentID { get; set; }

} 
```

这是我的通用存储库中的上下文：

```
public class EntitiesContext : DbContext, IDbContext {

    public DbSet<Product> Products { get; set; }
    public new IDbSet<T> Set<T>() where T : class {
        return base.Set<T>();
    }
} 
```

如您所见，产品有一个类别的 IEnumerable。如果我要创建一个数据库来匹配这将是这样的：

**产品** - ID - 名称 - 等。

**类别** - ID - 名称 - 等。

**ProductCategories** - ProductID - CategoryID

为什么我的数据库创建后没有连接表？

![在此处输入图像描述](../Images/2ef027fb6926b3dae139be2ed100cfc3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:15:11.880

我很确定这是因为您将集合定义为`IEnumerable<T>`. 我认为实体框架至少需要一个`ICollection<T>`来建立关系。 [这篇 SO 帖子](https://stackoverflow.com/questions/2866881/why-does-the-entity-framework-need-an-icollection-for-lazy-loading)涵盖了大部分内容。

所以，改变这个：

```
public IEnumerable<Category> Category { get; set; } 
```

对此：

```
public ICollection<Category> Category { get; set; } 
```

此外，如果您想延迟加载集合，也可以将其设为虚拟：

```
public virtual ICollection<Category> Category { get; set; } 
```

# c# - 使用 Visual Studio 2012 平板电脑模拟器模拟无网络

> ID：15290145
> 
> 赞同：3
> 
> 时间：2013-03-08T08:58:58.937
> 
> 标签：c#, networking, visual-studio-2012, windows-runtime, windows-store-apps

我目前正在编写一个 WinRT 应用程序，该应用程序具有一些网络访问权限以检索各种详细信息，我需要能够模拟没有网络或非常慢的网络时的条件，以确保应用程序在这些条件下正常工作。

如何获得作为 Visual Studio 2012 一部分的平板电脑模拟器来模拟这些条件？

干杯，鲁珀特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:07:02.683

要模拟“无网络”，您必须禁用主机上的网络。模拟器似乎与主机共享网络。

对于慢速网络连接，您可能必须再次在主机上执行此操作。见这篇文章：[模拟慢速网络连接的网络工具](https://stackoverflow.com/questions/1094760/network-tools-that-simulate-slow-network-connection)

# sublimetext2 - 如何在 sublimetext2 中查找特定标签的相关 CSS？

> ID：15290149
> 
> 赞同：0
> 
> 时间：2013-03-08T08:59:22.367
> 
> 标签：sublimetext2

我的 html 文件中有很多标签和类。组织起来越来越困难。在 Dreamweaver 中，很容易找到特定标签 ID 或类的相关 CSS（通过 CSS 托盘）在 sublime text 2 中有类似的东西吗？像这样：在正文部分，我单击一个标签，它会显示或导航到我的 css 文件中的相关 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:06:08.140

看看这个插件：[https ://github.com/rmaksim/Sublime-Text-2-Goto-CSS-Declaration](https://github.com/rmaksim/Sublime-Text-2-Goto-CSS-Declaration)

要安装它，你可以先安装 package-control ：[http ://wbond.net/sublime_packages/package_control/installation](http://wbond.net/sublime_packages/package_control/installation)

然后，使用命令快捷方式（在我的情况下为 ctrl+shift+P），您可以转到“Package-Control: Install Package”并搜索“Goto Css Declaration”

# wordpress - Apache .htaccess 重写

> ID：15290150
> 
> 赞同：0
> 
> 时间：2013-03-08T08:59:22.523
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite

嗨，大家好，

我在安装多语言 WordPress 时遇到了以下问题，我想知道它是否可以通过更改 WordPress 安装而不是通过重写 Apache 网络服务器的规则来解决。

网站可以通过这种方式正确显示各种语言的内容：

```
捷克语内容：
http://www.example.com/cs/
http://www.example.com/cs/some-czech-page-name/
...

斯洛伐克语内容：
http://www.example.com/sk/
http://www.example.com/sk/some-slovak-page-name/
...

英语内容：
http://www.example.com/en/
http://www.example.com/en/some-english-page-name/
...

```

现在，是否可以修改 .htaccess 以便在各个域中显示各种语言的内容？我的意思是这样的：

```
捷克语内容：
http://www.example.cz/
http://www.example.cz/some-czech-page-name/
...

斯洛伐克语内容：
http://www.example.sk/
http://www.example.sk/some-slovak-page-name/
...

英语内容：
http://www.example.com/
http://www.example.com/some-english-page-name/
...

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:06:30.973

尝试这个

```
RewriteCond %{HTTP_HOST} example.sk
RewriteCond %{REQUEST_URI} !^/sk
RewriteRule .* http://domain.com/sk/$0 [P,L]
#repeat for other domains 
```

用于代理，`P`否则 WP 和 Polylang 无法解析 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:39:38.690

这最终按预期工作。

```
RewriteEngine On

# EXAMPLE.COM
RewriteCond %{HTTP_HOST} www.example.com
RewriteCond %{REQUEST_URI} !^/cs/
RewriteCond %{REQUEST_URI} !^/sk/
RewriteCond %{REQUEST_URI} !^/en/
RewriteCond %{REQUEST_URI} !^/wp-admin/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /en/$1 [P,L]

# EXAMPLE.CZ
RewriteCond %{HTTP_HOST} www.example.cz
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*) http://www.example.com/cs/$1 [P,L]

# EXAMPLE.SK
RewriteCond %{HTTP_HOST} www.example.sk
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*) http://www.example.com/sk/$1 [P,L]

RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

但是，为了一切正常，需要进行一些模板编辑。

# javascript - 怎么获得 将 HTML 中的项目及其索引放入 JavaScript 数组？

> ID：15290154
> 
> 赞同：0
> 
> 时间：2013-03-08T08:59:34.900
> 
> 标签：javascript, jquery, html

我使用 Sortable jQuery 制作了一个重新排序列表。重新排序后，我想获得新的 LI 项目订单。我怎样才能做到这一点？

```
<li id="A1" class="ui-state-default">Item 2</li>
  <li id="A2" class="ui-state-default">Item 3</li>
  <li id="A3" class="ui-state-default">Item 4</li>
  <li id="A4" class="ui-state-default">Item 5</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:04:02.480

这将为您提供一个包含每个 li 的 ID 和索引的对象数组：

```
var order = $('li').map(function(i) { 
    return { id: this.id, index: i };
}).get(); 
```

示例 - [http://jsfiddle.net/czprf/](http://jsfiddle.net/czprf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:03:11.703

使用 jQuery 选择它们将使它们以新的顺序排列：

```
var myLis = $('.ui-state-default');

myLis.eq(0).html(); // This will return Item 2
myLis.eq(1).html(); // This will return Item 3
myLis.eq(2).html(); // This will return Item 4
myLis.eq(3).html(); // This will return Item 5 
```

jQuery 总是首先选择最接近 DOM 顶部的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:06:22.143

试试这样：

```
<ul id="AAA">
  <li id="A1" class="ui-state-default">Item 2</li>
  <li id="A2" class="ui-state-default">Item 3</li>
  <li id="A3" class="ui-state-default">Item 4</li>
</ul> 
```

JS：

```
var nodeList = Array.prototype.slice.call( document.getElementById('AAA').children ),
      liRef = document.getElementsByClassName('match')[0];    
console.log( nodeList.indexOf( liRef ) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:18:48.160

您想要的是访问`stop`可排序插件的事件。

```
var order;
$('#sortable').sortable({
    stop: function(){
        order = $('#sortable li').map(function(i, li){
            return {index: i, id: li.id, text: li.innerHTML};
        });
        console.log(order);
    }
}); 
```

[这是你的 jsFiddle](http://jsfiddle.net/UeAe2/)；

# matlab - 以固定间隔访问行

> ID：15290156
> 
> 赞同：0
> 
> 时间：2013-03-08T08:59:39.560
> 
> 标签：matlab, simulator

我正在寻找一种方法来更新向量 [nx113] 中的某些元素，以便为我的系统的每次完整旋转。

```
%% # Iterate through timesteps
for tt = 1:nTimeSteps
% # Initialise ink on transfer roller
rollers(2).ink = [zeros(1,98),ones(1,5),zeros(1,113)];

% # Rotate all rollers
for ii = 1:N
        rollers(ii).ink(:) = ...
            circshift(rollers(ii).ink(:),rollers(ii).rotDirection);
end

% # Update all roller-connections
for ii = 1:N
    for jj = 1:nBins(ii)
        if(rollers(ii).connections(jj) ~= 0)
            index1 = rollers(ii).connections(jj);
            index2 = find(ii == rollers(index1).connections);
            ink1 = rollers(ii).ink(jj);
            ink2 = rollers(index1).ink(index2);
            rollers(ii).ink(jj) = (ink1+ink2)/2;
            rollers(index1).ink(index2) = (ink1+ink2)/2;
        end
    end
end

% # Calculate average amount of ink on each roller
for ii = 1:N
    averageAmountOfInk(tt,ii) = mean(rollers(ii).ink);
end
rollers(18).TakeOff = averageAmountOfInk*0.6;

end 
```

矢量rollers(2).ink 是我要更新的矢量。目前该向量仅填充一次，因此我有第 98:103 行的向量。我希望为我的系统的每次“旋转”填充这一系列元素，而不仅仅是第一次。原因 - 我试图显示仅从辊子表面的一小部分间歇性添加墨水，因此只需要填充五个单元格。我认为如果我从 1 迭代到时间步数，在循环中以步长 nBins-Max 为单位：

```
for tt = 1:nBins_max:nTimeSteps 
```

这似乎不是我所追求的。我也希望最后从系统中去除墨水。对于每一转，我希望能够在每次旋转时去除一定百分比的墨水，这样它就不会留在系统中（就像它被打印到一张纸上并被带走一样）。希望有人能理解这一点，并可能就如何处理我的一个或两个问题提供一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:31:05.463

您的解释与您的代码不完全匹配（如果您愿意*，反之亦然*）所以我不完全确定您想要做什么，但以下内容可能会帮助您找到解决方案或更清楚地表达您的问题。

*   该向量`rollers(2).ink`有 1 行和 216 列，因此诸如`rollers(2).ink(98:103) = something`不会将第 98 行更新到第 103 行的操作。另请注意，该向量的元素 98 被初始化为`0`，它不包含在初始化为 的元素中`1`。
*   你写你想更新该向量中的一系列元素，然后编写一个循环语句`for tt = 1:nBins_max:nTimeSteps`，它跨越时间步长向量。当然，您想编写类似`rollers(2).ink(99:103) = new_values`.
*   至于滚轮每转一圈去墨，你可以执行一条线，比如`rollers(2).ink = rollers(2).ink * 0.975`每转一圈；显然，您需要将我选择的每次旋转 2.5% 的去除率替换为适合您的模拟的任何内容。

# matlab - 如何从 Matlab 的命令历史记录中检查命令的时间戳？

> ID：15290157
> 
> 赞同：4
> 
> 时间：2013-03-08T08:59:39.713
> 
> 标签：matlab

我想知道是否可以在 Matlab 中检查命令的时间戳？如果我查看命令历史记录，我可以看到分隔不同日期命令的时间戳，例如：

![在此处输入图像描述](../Images/a9d419898a153e48e566cc19f3390d3f.png)

但是是否可以获得特定命令的时间戳？=)

谢谢你的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:01:53.177

您正在寻找的行为不是 MATLAB 所固有的。

但是使用[这个](http://www.mathworks.com/matlabcentral/fileexchange/26471)自定义`Command Prompt`你可以实现它。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:05:09.757

发帖前你问谷歌了吗？[4-th 结果](http://www.mathworks.com/help/matlab/matlab_env/command-history.html)说这一切都写在 ˙history.m`

此[链接](http://thedaneshproject.com/posts/history-command-with-time-stamp/)说明您可以通过`history`在命令行中键入来检查历史记录。默认情况下，这不会为您提供时间戳。但是设置输出格式：

```
export HISTTIMEFORMAT=' %F %T ' 
```

你`history`会给你时间戳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-04T08:57:53.633

作为对@dedek-mraz 答案的更新，并供将来参考：我已`History.xml`在`%appdata%\MathWorks\MATLAB\R2018a`(Windows 10) 中找到该文件，您可以使用自己喜欢的文本编辑器打开和搜索该文件。然后我进入 Matlab GUI 中的命令历史记录并向后滚动到相应的日期。不是很优雅，但它确实有效。

# asp.net-mvc - 尝试从 Facebook 接收实时更新时遇到问题

> ID：15290159
> 
> 赞同：2
> 
> 时间：2013-03-08T08:59:45.577
> 
> 标签：asp.net-mvc, facebook, asp.net-mvc-3, asp.net-mvc-2, facebook-c#-sdk

我有一个`Mvc-facebook`应用程序。我已经在 Facebook 站点中配置了我的**Facebook-Sample 应用程序。**

**示例 Facebook 应用程序的目的** 每当我对名字进行一些更改时。Facebook 应该以 JSon 的形式将更改发送到我的 Web 服务器。

我已成功配置订阅。

![在此处输入图像描述](../Images/d848ffa3a012bae8b22c0b700ed640c3.png)

Facebook 发送了令牌。将它与我的代码匹配，我的代码将相同的令牌发送到 Facebook。到目前为止非常好。

**问题 1** - 在我的 Web 服务器中，我安装了 Fiddler。当 Facebook 将令牌发送到我的 Web 服务器 IIS 时，Fiddler 没有显示请求。

**问题 2** - 当我对我的名字进行一些更改时，Facebook 没有将数据发送到我的 Web 服务器。

请告诉我这些问题中缺少什么。

**代码**

```
[HttpGet]
[FacebookSubscriptionVerify("MyToken")]
public void Verify(FacebookClient fb)
{
    Response.Write(fb.AccessToken);
    var verifiedResult = new FacebookSubscriptionVerifiedResult();
    verifiedResult.ExecuteResult(ControllerContext);
}

[HttpPost]
[FacebookSubscriptionReceived]
[ActionName("Verify")]
public void ReceiveUserUpdates(object subscription)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T06:10:21.097

使用wireshark检查发送的内容，这将为您提供正确的视图。只需捕获所有内容并检查 http 协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:44:22.327

> 在我的 Web 服务器中，我安装了 Fiddler。当 Facebook 将令牌发送到我的 Web 服务器 IIS 时，Fiddler 没有显示请求。

好吧，这听起来不像您的调试/监控成功，是吗？您之前说过，Facebook 实际上已经向您发送了令牌。

寻找其他的调试手段，fe看看服务器的访问日志。

> 当我对我的名字进行一些更改时，Facebook 不会将数据发送到我的 Web 服务器。

如果你按照上面的方法推断，那么你可能推断错了……？

* * *

请注意，Facebook 为实时更新发送的 POST 请求不是您期望从 HTML 表单帖子中获得的“正常”格式，这意味着不是`Content-Type: application/x-www-form-urlencoded`.

# java - 在 PreparedStatement setObject 方法中传递空值会产生异常

> ID：15290161
> 
> 赞同：2
> 
> 时间：2013-03-08T08:59:49.840
> 
> 标签：java, null, prepared-statement

我们有解决方案吗？

我的代码是这样的：

```
preparedStatement.SetObject(i , MyArray); 
```

这里， MyArray 是从表中提取的记录数组。现在，只要上面的语句找到一个 null 值，它就会抛出一个 SQL 异常：无效的列类型。

可用的选项是使用 setObject(int parameterIndex, Object x, int sqlType) 或 setNull ，但在这种情况下，我需要提供目标列的 SQL 类型，这似乎是不可能的。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T23:38:53.007

您可以尝试将 setNull 与 NULL 类型一起使用：

```
if(myArray == null) {
    preparedStatement.setNull(i, Types.NULL);
} 
```

请遵循 Java 编码标准 -**变量和方法最初是小写的！**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T23:33:54.667

尝试：

```
preparedStatement.setObject(i , MyArray, java.sql.Types.ARRAY); 
```

有了可用的信息，这就是我能想到的。希望这应该有效。

阿比纳夫

# html - 从 HTML5 日期选择器中提取日、月、年

> ID：15290168
> 
> 赞同：0
> 
> 时间：2013-03-08T09:00:20.143
> 
> 标签：html, datepicker

如何从 HTML5 日期选择器中提取日、月和年？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:03:27.503

使用该[`valueAsDate`属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#dom-input-valueasdate)获取一个 JavaScript`Date`对象，然后使用普通[`Date`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date) `getDate()`, `getMonth()`（请记住 0-11）和`getFullYear()`（或 UTC 等价物`getUTCDate()`）。

# java - 是否有更快的方法来检查列表中的项目是否大于、小于或等于某个数字？

> ID：15290169
> 
> 赞同：0
> 
> 时间：2013-03-08T09:00:24.647
> 
> 标签：java

是否有更快的方法来检查列表中的项目是否大于、小于或等于某个数字？

或者你只需​​要循环遍历它？我只是好奇是否有为此预先构建的功能。

例子：

列表包含 5、5、10、15、15、20。

我想检查有多少项目实际上 >= 5。所以答案是 6。如果我想检查 >= 15，答案是 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:11:41.053

```
step 1 : sort the list
step 2 : find the index for desired element
step 3 : print length-index 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:02:12.477

[我在文档中](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)没有看到任何这样的方法，所以我会**说不**。您必须遍历列表。如果它已排序，您可以进行二进制搜索以获得更快的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:02:15.680

您需要循环检查每个元素的条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:02:38.867

你想排序吗？如果您正在处理数组，则可以使用`Arrays.sort()`else 如果您正在处理可以使用的集合`Collections.sort()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T09:05:46.333

不，没有预先构建的功能afaik。如果您的列表项不是顺序关键（即您没有制作任何优先级列表或 LIFO/FIFO），您可以在查找元素之前通过排序列表改进搜索。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T09:06:33.757

您可以对列表进行排序，然后您只需将其第一个和最后一个元素与数字进行比较。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T09:39:26.353

> 这就是为什么我要问一个问题，如果集合中当前存在这样的方法。

标准集合 API 中没有这样的方法。

写一个循环。它应该是更快的代码和测试一个 5 行方法来做到这一点，而不是在互联网上搜索一个 3rd 方库。而且您的代码很可能会更快......当然不会更慢。

去做就对了。（我会自己为你编写代码，但听起来你需要练习......）

# ruby - 解析哈希时出现 Json Parse 错误

> ID：15290172
> 
> 赞同：0
> 
> 时间：2013-03-08T09:00:33.687
> 
> 标签：ruby, json, ruby-on-rails-3, parsing

我正在研究 Ruby on Rails。我有一个像下面这样的哈希

```
{"attachment"=>"{:output_dir=>\"/home/mypath/\", :process_hash=>\"8b9d9c51\", :type=>\"pdf\", :processed_dir=>\"/513/9a1/88a\", :pdf=>\"/system/path/a3ae1194f76d737b6cfb141fa0fde17f78f2e94e.pdf\", :slides_count=>4, :meta=>{:swfs=>\"{/system/path/88a/8b9d9c51[*,0].swf,4}\", :pngs=>\"/system/path/8b9d9c51{page}.png\", :json=>\"/system/path/8b9d9c51.js\"}}" 
```

在我的代码中我有

JSON.parse(参数[:附件])

这给我一个错误

> JSON::ParserError (757: '{:output_dir=>"/home/path", :process_hash=>"8b9d9c51", :type=>"pdf", :processed_dir=>"/513/9a1/88a ", :pdf=>"/system/path/a3ae1194f76d737b6cfb141fa0fde17f78f2e94e.pdf", :slides_count=>4, :meta=>{:swfs=>"{/system/path/8b9d9c51[*,0].swf,4} ", :pngs=>"/system/path/8b9d9c51{page}.png", :json=>"/system/path/8b9d9c51.js"}}'):

建议我如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:26:59.377

JSON.parse 将 JSON 格式的字符串解析为哈希，而不是相反。我不确定你想完成什么？

如果您尝试将 Hash 转换为 JSON（字符串），您可以使用

> 参数[:附件].to_json

如果您尝试将 JSON（字符串）转换为 Hash，您可以使用

> JSON.parse(参数[:附件])

但是，您的字符串看起来不像 JSON（它包括`=>`它应该具有的位置`:`）

有效的 JSON 如下所示：

`{ "attachment": { "output_dir": "/home/mypath", "process_hash": "89r2432" } }`

# php - 仅在经过一段时间后才运行网站 php 脚本

> ID：15290173
> 
> 赞同：0
> 
> 时间：2013-03-08T09:00:38.447
> 
> 标签：php, mysql, database, pdo

我的网页上有一个 php 函数。每当有人重新加载该页面时，它就会运行，并且可能在谷歌等抓取它时运行。我只希望它的主要部分每小时执行一次。

我正在考虑将时间戳存储在数据库中，并且仅在自上次运行以来已过去 59 分钟时才执行它。有没有更好/更简单的方法？例如，它可以存储在一些全局持久的 php 变量中吗？

创建一个表并只在其中保留一个时间戳似乎有点矫枉过正。我无权访问存储代码的本地计算机。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:09:54.570

正如 AmazingDreams 所说，使用[cron](http://en.wikipedia.org/wiki/Cron)作业可能是解决此问题的最佳方法，尤其是看起来您似乎想每小时运行一次该脚本。如果您使用的是 Windows，则可以改用[Windows 任务计划程序](http://en.wikipedia.org/wiki/Windows_Task_Scheduler)。

# swing - Groovy-Issue：当微调器的 stateChanged 触发动作时，再次调用 vbox 内的闭包

> ID：15290174
> 
> 赞同：0
> 
> 时间：2013-03-08T09:00:38.833
> 
> 标签：swing, groovy, action, spinner, vbox

如果您将 numPanels 作为固定值，例如 20，那么这确实是一个很好的和时髦的摆动。

但是我从两天开始尝试动态添加或多或少的带有 groovy.swing.Spinner 的面板（我的程序将用于连接到不同的数据库并交换来自不同数据库表的值）。我尝试了绑定、重新验证、重新绘制 - 但我不能带来闭包以从微调器中获取新值......

```
import groovy.swing.SwingBuilder
import javax.swing.WindowConstants as WC
import javax.swing.JOptionPane
import javax.swing.JScrollPane
import javax.swing.BoxLayout as BXL
import javax.swing.SpinnerNumberModel

int numPanels = 2

swing = new SwingBuilder()

def setPanelAmount = swing.action(name:'Amount of Panels in vbox-element',  closure: this.&setPanelAmount )

frame = swing.frame(title:'test', pack:true, visible:true, defaultCloseOperation:WC.HIDE_ON_CLOSE) {
panel(id:'mainPanel'){
scrollPane( verticalScrollBarPolicy:JScrollPane.VERTICAL_SCROLLBAR_ALWAYS ) {
  vbox {
    (1..numPanels).each { num ->
      def panelID = "panel$num"
      def pane = panel( alignmentX:0f, id:panelID, background:java.awt.Color.GREEN ) {
        label('description') 
        textField( id: "description$num", text:panelID, columns: 70 )
        button( id: "buttonpanel$num", text:panelID, actionPerformed:{
          swing."$panelID".background = java.awt.Color.RED
        } )
      }
    }
  }
}

boxLayout(axis: BXL.Y_AXIS)
panel(id:'secondPanel' , alignmentX: 0f){                       
 hbox(){
 label 'Change amount of panels:'
 hstrut(10)
  spinner(id: 'numPanelSpinner', stateChanged: this.&setPanelAmount, model: new SpinnerNumberModel(2, 2, 10, 1))
  hstrut(50)
  button('Quit', actionPerformed:{
    frame.visible = false
  })
  }
}
}       
}
frame.size = [ frame.width, 600 ]

def setPanelAmount(event) {
    numPanels = swing.numPanelSpinner.getValue()
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:21:17.667

它必须与以下代码结合使用-但不幸的是，它不适用于包含的闭包-至少据我所知...

```
import groovy.swing.*
import javax.swing.*
import java.awt.*
import java.awt.BorderLayout as BL

new SwingBuilder().edt {
  frame(defaultCloseOperation: JFrame.EXIT_ON_CLOSE, visible: true, size: [600,500]) {
   panel(id:'main') {
    panel {   
      button(name:'x', action: action(name:'add', closure:{p.add(label('new')); p.revalidate()}))
      button(action: action(name:'remove', closure:{p.removeAll();p.revalidate();scroll.repaint()}))
}

panel() {
  scrollPane(id:'scroll',preferredSize: [200,200], constraints: context.CENTER) {
    panel(id:'p') {
      checkBoxList(listData: (1..20).collect([]){"Option $it"} as Object[])
    }
  }
}
  }
 } 
} 
```

BTW.：你也想改进 groovy 编程吗？我很高兴用我的程序开始一个基于 git 的“工程”。该程序会将用户给定数量的列表与来自一个或多个数据库或 excel 文件的文章进行比较，将它们和每个结果保存在 PostgreSQL 或 MSSQL 中。每个列表可能有零个、一个或多个由它们的文章编号标识的文章，每个实体中的数量不同。并且用户可以 - 在 GUI 的指导下 - 决定从另一个实体中添加或减去实体的顺序。除了文章编号和数量之外的其他（从零到无限）属性将通过列表进行。不太复杂，但对于第一个项目......

# javascript - 厚盒内容未加载

> ID：15290177
> 
> 赞同：0
> 
> 时间：2013-03-08T09:00:44.447
> 
> 标签：javascript, jquery, thickbox

我创建了一个页面，通过使用`window.open`方法从另一个页面调用。

现在，当我从新打开的窗口打开thickbox 时，它只显示浅黑色背景，但不显示thickbox 的内容。我的代码是这样的：

我已经包含了thickbox.js 和thickbox.css

这是我的**HTML**代码

```
<a href='#' id='createProfileNo' onclick="return addVideoUseful(false);">No</a>

<div id="editrowContainer" style="display: none;">
    <div>
        <label>comment:</label>
        <textarea cols="20" rows="4"></textarea>
    </div>
</div> 
```

这是我的**Javascript**函数

```
function addVideoUseful(isUseful)
{
   tb_show('title', '#TB_inline?keepThis=true&amp;TB_iframe=true&amp;height=500&amp;width=600&amp;modal=true&amp;inlineId=editrowContainer')
} 
```

请给我您宝贵的建议......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:50:12.437

你的意思是下面的这个div！

```
<div id="editrowContainer" style="display: none;"> 
```

如果是，则从该 div 中删除此样式`style="display: none;"`

这使您的 div 在该 div 中不显示任何内容..

我希望这个能帮上忙， ：）

# php - 带有 | 的 Wordpress 菜单 介于两者之间

> ID：15290181
> 
> 赞同：0
> 
> 时间：2013-03-08T09:00:57.977
> 
> 标签：php, wordpress

一个简单的我敢肯定，但我无法弄清楚。

当我使用标准的 wordpress 菜单时，如何输入分隔符

即首页 | 关于我们 | 联系我们

我现在得到的只是首页 关于我们 联系我们，他们似乎没有办法把 | 在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:04:51.207

我会建议你使用`Css`Trick。

```
.nav li + li:before{
    content: " | ";
    padding: 0 10px;
} 
```

WordPress方式：

```
<?php wp_nav_menu('menu=Top Menu&after=<span class="menu-divider">|</span>'); ?> 
```

**注意：**根据上面样式中的 html 更改类。

# c# - 使用 CloudTable 对象设置查询操作超时

> ID：15290182
> 
> 赞同：1
> 
> 时间：2013-03-08T09:00:58.393
> 
> 标签：c#, azure, cloud, azure-storage

我正在使用 Cloud Table 对象查询表存储，如下所示：

```
 private CloudTable _table

   _table.ExecuteQuery(query); 
```

在引发异常之前需要花费太多时间。我该如何改变呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:37:00.920

有两个超时需要考虑——**服务器超时**和**客户端超时**。服务器超时是表服务超时请求的时间跨度。您可以通过[TableRequestOptions类的](http://msdn.microsoft.com/en-us/library/jj733154.aspx)[ServerTimeout](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.table.tablerequestoptions.servertimeout.aspx)属性进行设置。

所以你的代码看起来像：

```
var tableRequestOptions = new TableRequestOptions()
{
    ServerTimeout = TimeSpan.FromSeconds(30),//Will timeout request on the server after 30 seconds
};
CloudTable _table;
_table.ExecuteQuery(query, tableRequestOptions); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-08T09:17:30.377

将此添加到**Web.config**

```
<configuration>
    <system.web>
             <sessionState timeout="20"></sessionState>
    </system.web>
</configuration> 
```

# android - Android Currentview Fragment by Tag 每次都给出 null

> ID：15290184
> 
> 赞同：0
> 
> 时间：2013-03-08T09:01:09.020
> 
> 标签：android

在我的 android 应用程序中，我正在使用片段，我想按标签获取显示的片段，因为我使用下面的代码按标签获取片段，我正在使用下面的代码用另一个片段替换当前片段我现在明白什么在我的代码中是错误的，所以任何人都会指导我正确的方式。

```
DigitalDisplayFragment myDigitalDisplayFragment = (DigitalDisplayFragment)getSupportFragmentManager().findFragmentByTag("DisplayFragment"); 

FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.replace(R.id.simple_fragment, displayFragment, "DisplayFragment");
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        ft.addToBackStack(null);
        ft.commit(); 
```

# powershell - Invoke-WebRequest - json 中的特殊字符问题

> ID：15290185
> 
> 赞同：10
> 
> 时间：2013-03-08T09:01:12.333
> 
> 标签：powershell, asp.net-mvc-4

我正在尝试使用 Invoke-WebRequest 将特殊字符（挪威语）发送到 ASP .NET MVC4 API 控制器。

我的问题是，如果我的 json 数据包含像 Æ Ø Å 这样的字符，控制器接收到的 json 对象显示为 NULL。

我的代码示例：

```
$text = 'Æ Ø Å'
$jsondata = $text | ConvertTo-Json
Invoke-WebRequest -Method POST -Uri http://contoso.com/create -ContentType 'application/json; charset=utf8' -Body $jsondata 
```

同样，在 fiddler 中查找时，字符会像通常奇怪的 utf8 框一样出现。

将 json 数据从提琴手发送到同一个 API 控制器工作正常

有什么建议吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-08T17:04:39.213

对于`Body`参数试试这个：

```
... -Body ([System.Text.Encoding]::UTF8.GetBytes($jsondata)) 
```

PowerShell 中的字符串是 Unicode，但您已经指定了 UTF8 编码，所以我认为您需要帮助它获取 UTF8。

# linux - 在文件中查找模式并重命名它们

> ID：15290186
> 
> 赞同：60
> 
> 时间：2013-03-08T09:01:16.527
> 
> 标签：linux, bash

我使用此命令查找具有给定模式的文件，然后将它们重命名为其他名称

```
find . -name '*-GHBAG-*' -exec bash -c 'echo mv $0 ${0/GHBAG/stream-agg}' {} \; 
```

当我运行这个命令时，我看到一些像这样的输出

```
mv ./report-GHBAG-1B ./report-stream-agg-1B
mv ./reoprt-GHBAG-0.5B ./report-stream-agg-0.5B 
```

但是最后，当我运行时`ls`，我看到了旧文件名。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-03-08T09:02:25.120

您正在回显您的“mv”命令，而不是实际执行它。改成：

```
find . -name '*-GHBAG-*' -exec bash -c 'mv $0 ${0/GHBAG/stream-agg}' {} \; 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-08T09:06:12.280

我建议使用该`rename`命令来执行此任务。`rename`根据指定为 Perl 正则表达式的规则重命名提供的文件名。

在这种情况下，您可以使用：

```
rename 's/GHBAG/stream-agg/' *-GHBAG-* 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-08-20T03:46:36.710

在回复 anumi 的评论时，您实际上可以通过匹配 '**' 递归地向下搜索目录：

```
rename 's/GHBAG/stream-agg/' **/*-GHBAG-* 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-06T01:37:14.167

这适用于我的需要，替换所有匹配的文件或文件类型。请注意，这是一个非常贪婪的搜索

```
# bashrc
function file_replace() {
  for file in $(find . -type f -name "$1*"); do
    mv $file $(echo "$file" | sed "s/$1/$2/");
  done
} 
```

我通常会`find . -type f -name "MYSTRING*"`在更换之前提前检查比赛。

例如：

```
file_replace "Slider.js" "RangeSlider.ts"

renamed:    packages/react-ui-core/src/Form/Slider.js -> packages/react-ui-core/src/Form/RangeSlider.ts
renamed:    stories/examples/Slider.js -> stories/examples/RangeSlider.ts 
```

或放弃文件类型以使其更加贪婪

```
file_replace Slider RangeSlider

renamed:    packages/react-ui-core/src/Form/Slider.js -> packages/react-ui-core/src/Form/RangeSlider.js
renamed:    stories/examples/Slider.js -> stories/examples/RangeSlider.js
renamed:    stories/theme/Slider.css -> stories/theme/RangeSlider.css 
```

# database - 将主键映射为数据库中的外键

> ID：15290187
> 
> 赞同：5
> 
> 时间：2013-03-08T09:01:17.163
> 
> 标签：database, foreign-keys, primary-key

我的数据库设计存在逻辑问题。我有一个包含 2 个字段的表，其中一个整数字段是主键，它在所有其他表中充当外键。

表结构为

1.  以 ID 作为主键的表
2.  ID 可以将基本数据类型作为值
3.  基于这些数据类型，表被映射到以 ID 作为主键的主表

如何在数据库创建中映射它？我怎样才能设计有这个要求的桌子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:24:59.227

标准 SQL 可以简单地处理这样的映射：

```
CREATE TABLE employee (
    first_name varchar,
    last_name varchar,
    date_started date,
    id int primary key
);
create table salary (
    employee_id int primary key references employee(id),
    yearly_amount numeric
);
CREATE TABLE wage (
    employee_id int primary key references employee(id),
    hourly_amount numeric
 ); 
```

# spring-mvc - Spring 3+ Tomcat apache中邮件轮询的正确方法是什么？

> ID：15290194
> 
> 赞同：0
> 
> 时间：2013-03-08T09:01:48.377
> 
> 标签：spring-mvc, jakarta-mail, spring-3

I am working on `Spring 3` + `Apache Tomcat` based web application I need to implement mail polling in which emails will be fetched using `JMS` or any other mail server technology (like `apache camel` or `apache james`) in Web Application . I have implemented mail polling using `JMS` only, But need some more proper way like, Fetch only those emails that have been not fetched before to web application. So Please suggest me the proper way to do Mail polling in java.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:06:26.687

也许我不明白您所说的“邮件轮询”是什么意思，但我不知道您如何使用 JMS 做到这一点。

假设您要做的是监视邮件服务器上的邮箱是否有新消息，然后在新消息到达时调用一些操作，您可以使用 JavaMail 来执行此操作。您需要一个单独的线程来进行轮询。您可以定期连接到服务器并查看它是否有新邮件，或者如果它是 IMAP 服务器，您可以使用 JavaMail 中的 IMAP IDLE 支持在新邮件到达时收到通知。您需要了解更多细节，但这应该可以帮助您入门。不要忘记阅读[各种 JavaMail 包的 javadocs](http://javamail.kenai.com/nonav/javadocs/index.html)和[JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html)。您会在 Web 上找到大量示例代码，但请特别查看常见问题解答中的示例以及[JavaMail 下载包中包含的示例代码](http://www.oracle.com/technetwork/java/javamail/index.html). monitor.java 示例程序可能会有所帮助。

# xcode - 我可以阻止 Xcode 在遇到异常时显示 main.m 吗？

> ID：15290198
> 
> 赞同：2
> 
> 时间：2013-03-08T09:01:57.777
> 
> 标签：xcode, debugging, exception

XCode 从 Project Navigator 跳转到 Debug Navigator，并且几乎总是切换到 main.m。然后您必须导航回项目视图并选择您正在处理的源。

我认为行为可能会有所帮助，但在那里看不到任何相关选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T09:23:14.893

我已经将我的项目设置为（至少）三个选项卡。我做事的一个选项卡，另一个名为`Build Results`的选项卡，第三个名为 的选项卡`Debugger`。使用 CMD-T 创建一个选项卡，通过双击名称显示的位置来编辑选项卡名称。

行为设置为`Build`切换到`Build Results`选项卡。`Running`将切换到`Debugger`选项卡。`Exits unexpectedly`将定义发生异常时显示的内容。设置`Running`如图所示

这样，我的工作选项卡将保留在我正在编辑的行上，并且`debugger`选项卡可以跳转到它想要跳转到的位置。

![在此处输入图像描述](../Images/eb64402976c645e0371e1a7afd007629.png)

您是否为 symbol 设置了符号断点`objc_exception_throw`？那应该停在发生异常的那一行，早在达到 main.m 之前。

# vb.net - 我很难将 sql 注入我的项目

> ID：15290202
> 
> 赞同：0
> 
> 时间：2013-03-08T09:02:07.820
> 
> 标签：vb.net, visual-studio-2010, vb.net-2010

我的 add 语句工作得很好，但是当它转向编辑数据时它就不起作用了。我一直在想我应该使用什么正确的代码。我真的需要你们的帮助！

我的 add 语句工作得很好，但是当它转向编辑数据时它就不起作用了。我一直在想我应该使用什么正确的代码。我真的需要你们的帮助！

```
Imports System.Data.SqlClient
Public Class Form1
Dim connetionString As String
Dim cnn As SqlConnection
Dim cmd As SqlCommand
Dim da As SqlDataAdapter
Dim dt As DataTable
Dim ds As DataSet
Dim sql As String
Private Sub btnAdd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAdd.Click

            connetionString = "Data Source=xxx;Initial Catalog=xxx;User ID=xxx;Password=xxx"
    sql = "INSERT INTO Table_Info (ID,Name) VALUES ('" & Me.txtID.Text & "','" & Me.txtName.Text & "')"

    cnn = New SqlConnection(connetionString)

    cnn.Open()
    cmd = New SqlCommand(sql, cnn)
    cmd.ExecuteNonQuery()
    cmd.Dispose()
    cnn.Close()

End Sub
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'TODO: This line of code loads data into the 'TestDataSet.Table_Info' table. You can move, or remove it, as needed.
    Me.Table_InfoTableAdapter.Fill(Me.TestDataSet.Table_Info)

End Sub
 Private Sub btnEdit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnEdit.Click

    Dim connetionString As String
    connetionString = "Data Source=xxx;Initial Catalog=xxx;User ID=xxx;Password=xxx"

    cnn = New SqlConnection(connetionString)
    sql = "insert into Table_Info (ID,Name) values('" & txtID.Text & "','" & txtName.Text & "')"
    Try
        cnn.Open()
        da.InsertCommand = New SqlCommand(sql, cnn)
        da.InsertCommand.ExecuteNonQuery()
        MsgBox("err.discription")
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try

End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:15:12.127

几点。

首先，`INSERT`SQL 命令用于向数据库表中插入新行。如果要编辑现有行，则需要使用该`UPDATE`命令。它看起来像`UPDATE Table_Info SET Name = @name WHERE ID = @id`.

其次，你真的不应该构建这样的 SQL 命令字符串。当您将未经验证的用户输入直接传递到数据库中时，您基本上是在向 SQL 注入攻击敞开心扉。您应该看看[参数化查询](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)。

# windows - 为什么 Windows 中的换行符是 2 个字节？

> ID：15290203
> 
> 赞同：3
> 
> 时间：2013-03-08T09:02:08.783
> 
> 标签：windows, byte, newline

换行符在 Windows 上为 2 个字节的原因是什么？\n 不只是 ASCII 中的一个字节吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T09:17:09.333

从历史上看，换行符由两个字符组成：U+000D 回车（我在这里使用 Unicode，因为这是我们现在使用的 - 那时它可能是 ASCII 或什至可能不是）和 U+000A 换行。这两个是必要的，因为一个会将打印头向前推进一行，而另一个会将其返回到下一行的开头。将其比作在打字机上转动纸卷（实际上，电传打字机只是连接到计算机）并将托架向后移动，右侧的杠杆为您完成了这两个任务。

顺便说一句，大多数网络协议都保留了 CR+LF 序列，所以在某种程度上，这里的怪事是 Unix。当电传打字机不复存在并被视频终端和后来的终端仿真器所取代时，两个字符序列不再需要物理了。此外，它还使检查代码中的换行变得困难，因为您总是必须比较两个字节。因此，决定（Multics 和更高版本的）Unix 只保留一个字符，这将简化许多事情。C 后来被指定在以文本模式读取或写入流时执行 U+000A 和平台原生换行序列之间的转换。

另一方面，Windows 通过 CP/M 和 DOS 继承了 CR+LF，并且没有任何有用的理由让他们更改该默认值。向后兼容性一直是微软的强项，他们不能在过去的某个时候打破这一点（我敢打赌，这会让一些非常愤怒的客户感到愤怒）。

Mac OS（旧的）是另一个奇怪的东西，只使用 CR 换行。

# popup - eclipse rcp：自定义弹出菜单行为（2 向弹出菜单）

> ID：15290211
> 
> 赞同：2
> 
> 时间：2013-03-08T09:02:31.060
> 
> 标签：popup, eclipse-rcp, popupmenu

我想就以下问题请教您的建议：

我想更改弹出菜单的默认行为，以便首先显示一个自定义预弹出窗口和一些菜单项——其中一个项目将打开默认弹出窗口，但其余的将是动态的，基于选定的对象（它们将很少）。

我已经尝试过的：

*   实现自定义**MenuManager**以插入自定义菜单
*   实现了自定义**MenuSourceProvider**来控制**menuAboutToShow**（因此替换/重新排序菜单项）
*   扩展模式来定义自定义菜单（仍然使用命令框架和**IConfigurationElement**）

这仍然是一个“半解决方案”，因为我没有得到双向弹出菜单（一个预弹出菜单，然后，如果需要，默认弹出菜单）。

你能提供一些提示吗？

先感谢您。

# ruby-on-rails - 允许用户裁剪和调整图像大小 Ruby on Rails

> ID：15290212
> 
> 赞同：9
> 
> 时间：2013-03-08T09:02:35.453
> 
> 标签：ruby-on-rails, image-processing, crop, rmagick

抱歉这个相当笼统的问题，但我想知道是否有人对如何最好地允许用户裁剪和编辑自己的图像有任何建议。

我想要发生的是，当用户将他们的图像上传到我的应用程序以使应用程序显示图像的副本时，该图像的副本具有仅允许固定纵横比（可能是 4:3）的叠加层，然后用户将能够选择他们想要裁剪的图像区域并保存为他们的图像。

我能想到的最好的例子是在 Facebook 上裁剪封面照片时。

我已经研究了我认为需要的各种宝石和元素，如下所示：

Carrierwave - 用于文件上传（我认为裁剪 - 如果我错了，请纠正我） ImageMagick/Mini-Magick/Rmagick - 处理图像处理。

但是我仍然有点不确定这些是如何组合在一起的。

人们对宝石的最佳组合以及他们如何协同工作以实现此裁剪功能的任何建议将不胜感激。

# jqgrid - Struts-jqGrid-plugin 不显示时间戳

> ID：15290216
> 
> 赞同：0
> 
> 时间：2013-03-08T09:02:45.560
> 
> 标签：jqgrid, timestamp, struts2-jquery

我在 Web 项目中使用**Struts2-jqGrid-plugin**来显示来自远程数据库的数据。现在，当我尝试在 json 结果中显示日期时，我感到很困惑。在struts-action 中，查询结果在一个列表中。这是来自服务器端的 json 响应中我的时间戳的 src 格式：

```
addtime: "2013-03-05T13:08:14"
dob: "1990-01-01T00:00:00" 
```

最初，我列表中的这个属性是时间戳类型，不知何故，在 json 响应中，它变成了这种格式。在我的页面上，jgGrid 日期格式化程序仅显示此列的  &。上面的两个列都不起作用。

```
<s:url var="ShowSubjectAction" action="showUserSubjects"
            namespace="Subject" />
    <sjg:grid gridModel="gridModel" id="SubjectGrid"
            caption="Subject Gird" dataType="json" href="%{ShowSubjectAction}"
            rowList="2,5,10,15" rowNum="2" rownumbers="true" pager="true"
            autowidth="true" height="200">
            <sjg:gridColumn name="id" index="id" title="ID" formatter="integer"
                sortable="false" />
            <sjg:gridColumn name="gender" index="gender" title="Gender"
                formatter="integer" />
            <sjg:gridColumn name="D.o.B" index="dob" title="D.o.B"
                formatter="date"
                formatoptions="{'srcformat':'Y-m-d H:i:sO','newformat':'d/m/Y'}" />
            <sjg:gridColumn name="AddTime" index="addtime" title="AddTime"
                formatter="date" />
    </sjg:grid> 
```

有什么方法可以通过使用 jqGrid 日期格式化程序而不是在我的服务器端进行转换来正确显示它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:29:18.847

如果您检查文档，您将看到可用的日期/时间格式化程序，如果这些还不够，您可以随时设置自己的自定义格式化程序并解析值并自己重新格式化。

文档： [http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:predefined_formatter](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:predefined_formatter)

自定义格式化程序示例：

```
 formatter: customTimeFormatter, unformat: customTimeUnformatter, 
```

职能：

```
function customTimeFormatter(cellvalue, options, rowObject) {
....

function customTimeUnformatter(cellvalue, options, rowObject) {
.... 
```

# core-data - 使用核心数据基于多个实体设置谓词

> ID：15290222
> 
> 赞同：0
> 
> 时间：2013-03-08T09:03:01.797
> 
> 标签：core-data, nspredicate

我有两个表`oldaddress`和`newaddress`common field `personID`。我还必须从中获取`personID`详细`newaddress`信息`oldaddress`。如何在核心数据中设置相同的实体和谓词？

等效查询是

```
select a.personID  from new address a, oldaddress b where a.personID=b.personID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:48:16.637

你还没有掌握 Core Data 的精髓。正如 Martin R 所指出的，它是一个对象图，而不是数据库。

您所描述的是一个连接表操作，它通过所谓的关系在 Core Data 中建模，消除了对诸如`personID`.

此外，创建代表同一种对象的不同身份也是不好的做法。

因此，您的模型应如下所示：

```
Address <<------>> User 
```

并且`Address`应该有一个布尔属性，如`isOld`.

`User`获取s时，您的谓词变得非常简单。

```
[NSPredicate predicateWithFormat:@"addresses.@count = 2"]; 
```

或者，如果您愿意，可以有两个从`User`to的一对多关系。`Address`

```
User.oldAddress <<-----------> Address
User.newAddress <<-----------> Address 
```

像这样的谓词

```
[NSPredicate predicateWithFormat:@"oldAddress != NULL && newAddress != NULL"] 
```

# java - 声明 url 的“数组”

> ID：15290223
> 
> 赞同：1
> 
> 时间：2013-03-08T09:03:02.283
> 
> 标签：java, xml, arrays, parsing, url

我正在尝试从文件中读取一组 url 并解析每个 url 上的 xml 文件（每个基本上都是 xml 文件的链接）。有没有办法声明一个“数组”的网址。我必须递归地将所有 url 传递给 sax 解析器。有什么办法吗？我对java很陌生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T09:06:10.280

如果您的 URL 是`String`对象，那么这是要走的路。

```
String[] urls = new String[10]; // Initialize as per your needs. 
```

否则，`ArrayList`更好。

```
List<String> urls = new ArrayList<String>(); // Initialize as per your needs. 
```

如果您有`URL`对象本身，请在上述两种情况下替换`String`为。`URL`

# asp-classic - 使用asp和javascript语言统计页数

> ID：15290224
> 
> 赞同：0
> 
> 时间：2013-03-08T09:03:02.697
> 
> 标签：asp-classic

我正在尝试创建一个 cookie 并计算我访问该页面的次数。这是代码：

```
<%
var visits=0;
visits=Request.Cookies("count");

if(visits="0") {
    Response.Cookies("count")=1;
    Response.Write("Welcome! You Have Visited This Page First  Time");
}
else {
    Response.Cookies("count")+=1;
    Response.Write("You Have visited this page" + Request.Cookies("count"));
    if(visits="1") {
        Response.Write(" time before");
    }
    else {
        Response.Write(" times before");
    }
}
%> 
```

我得到的输出为：

```
Welcome! You Have Visited This Page First Time 
```

即使我尝试刷新页面，我也会得到与输出相同的上述语句。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:52:26.397

您必须使用`==`来比较两个值。你正在比较`string`and `int`，但这是错误的。

尝试这个：

```
if(visits==0) { 
```

# asp.net - 我想将页面设置为不在根文件夹中的默认 url

> ID：15290225
> 
> 赞同：0
> 
> 时间：2013-03-08T09:03:06.037
> 
> 标签：asp.net

如何在 web 配置文件中设置它？

下面是我尝试过的代码，但它不起作用..

`

```
</system.web>

<system.webServer>
 <modules runAllManagedModulesForAllRequests="true"/>
<defaultDocument>
  <files>
    <add value="~/Account/Login.aspx"/>
  </files>
</defaultDocument>
</system.webServer>` 
```

我希望登录页面作为我网站的默认页面。这意味着如果我的网站 url 是 www.mysite.com 那么它应该打开我的登录页面。我可以在根目录中设置任何页面，但是当我尝试从解决方案中的子文件夹 Account 设置 login.aspx 页面时，我无法设置

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:31:33.847

您可以通过以下链接
[http://www.serverintellect.com/support/windowsserver2008/Default-document-IIS7.aspx](http://www.serverintellect.com/support/windowsserver2008/Default-document-IIS7.aspx)
[http://www.iis.net/configreference/system.webserver/defaultdocument](http://www.iis.net/configreference/system.webserver/defaultdocument)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:11:35.050

您正在寻找重定向 - 不是默认文档。

defaultDocument 用于选择在请求文件夹时应执行文件夹中的哪个文件。有一个子文件夹的值可能不是工作。

我的建议是在根文件夹中添加一个 default.aspx 文件，并使其重定向到您想要的页面。

# javascript - 如何使用 PHP 在 Selenium RC 上执行 Javascript

> ID：15290228
> 
> 赞同：0
> 
> 时间：2013-03-08T09:03:16.113
> 
> 标签：javascript, selenium, selenium-webdriver, selenium-rc

我需要从 selenium RC 执行 javascript，有人知道怎么做吗？

我尝试了以下方法：

在 user-extensions.js 中编写了以下自定义函数：

```
function sayhello() {
    document.write('hello');
} 
```

并在 WelcomeCept.php 中调用如下：

```
<?php

$I = new WebGuy($scenario);
$I->wait(3000);
selenium.getEval('sayhello'); 
```

**命令：**

php codecept.phar 运行验收 WelcomeCept.php

**结果：**

```
Codeception PHP Testing Framework v1.5.5 Powered by PHPUnit 3.7.14 by Sebastian
Bergmann.

Suite acceptance started PHP Fatal error:  Call to undefined function
getEval() in
/home/user/Projects/selenium/tests/acceptance/WelcomeCept.php on line
103

FATAL ERROR OCCURRED. TESTS NOT FINISHED. Call to undefined function
getEval()  in
/home/user/Projects/selenium/tests/acceptance/WelcomeCept.php:103 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:25:37.900

我认为，包括`sayhello`双引号`""`而不是单引号`''`将达到您的目的。

**编辑**单引号或双引号不是罪魁祸首。我正在尝试调试问题。

# javascript - 如何获取 URI 参数 - 使用 JavaScript 查询字符串？

> ID：15290239
> 
> 赞同：0
> 
> 时间：2013-03-08T09:03:43.667
> 
> 标签：javascript, jquery

我是使用 javascript 的新手。例如，我有以下 url：`index.jsp?page=home&lang=eng`如何从上面的 url中提取参数`home`和？`eng`

还回答了问题：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript?page=1&tab=votes#tab-top)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:18:01.173

解析 url 的参数：

```
var url = 'index.jsp?page=home&lang=eng';

var parse = function (url) {
    var getQuery = url.substring(url.indexOf('?') + 1);
    var parts = getQuery.split('&');
    var key = null;
    var value = null;
    var result = {};
    for (var i = 0; i < parts.length; i++) {
        var keyValue = parts[i].split('=');
        key = keyValue[0];
        value = keyValue[1];
        result[key] = value;
    }
    return result;
}; 
```

的输出`parse(url)`将是一个具有以下结构的对象：

```
{
    page: "home",
    lang: "eng"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T13:04:43.117

提取您想要的确切 URL 参数的简单方法，当找不到您搜索的参数时将返回 "" 空字符串：

```
function getUrlParam(param){
 var value = decodeURIComponent(
  (RegExp(param + '=' + '(.+?)(&|$)').exec(location.search)||["",""])[1]);
 return value;
} 

page_value = getUrlParam("page");    // home
lang_value = getUrlParam("lang");    // eng 
```

# javascript - 花式盒/彩盒/等

> ID：15290241
> 
> 赞同：-2
> 
> 时间：2013-03-08T09:03:53.983
> 
> 标签：javascript, lightbox, fancybox-2

我需要某种灯箱（Fancybox/ColorBox）来显示 YouTube 视频。我将演示放在与其他文件相同的位置，它工作得很好。问题是，当我将所有内容复制到需要 Fancybox 的文件时，它不起作用，它只会打开 YouTube 链接。

这可能很容易解决，但我是这个主题的菜鸟。有任何想法吗？

我的版本： http: [//pastebin.com/3rNTD0kT](http://pastebin.com/3rNTD0kT)

Fancybox 演示：[http ://pastebin.com/uceBdWcT](http://pastebin.com/uceBdWcT)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:42:06.080

1）确保您的文件位于正确的路径中。

2)jquery-1.9.0.min.js & jquery.min.js 在你的版本中调用了两次。这可能会发生冲突//造成一些冲突。

3）您的代码调用/包括css可能有一些问题......

```
 <script type="text/javascript" src="/fancybox/source/jquery.fancybox.js?v=2.1.4"></script>
 <link rel="stylesheet" type="text/css" href="../source/jquery.fancybox.css?v=2.1.4" media="screen" /> 
```

在这段代码中..查看应该是 src="./fancybox/...." 的 src="" 或者如果文件夹位于 html 文件所在的 sane 文件夹中，那么您可能会有这样的 src="花式盒子/....”

我希望这可能会有所帮助:)

# android - 确定用户是否运行 TWRP 或 CWM 恢复

> ID：15290247
> 
> 赞同：1
> 
> 时间：2013-03-08T09:04:12.183
> 
> 标签：android

我创建了一个小应用程序，可以一键刷新多个 rom 更新文件。

这个应用程序目前仅适用于 TWRP，但我想让它与 CWM aswel 兼容。

我需要从 java 确定用户在手机上运行的恢复系统。

文件系统上是否有某种属性文件可以显示该信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-05T09:33:12.473

这可以通过读取文件内容`/sdcard/recovery.log`并搜索来解决`TWRP`

# c++ - 父级指针的副本，在子级中没有副本

> ID：15290249
> 
> 赞同：-1
> 
> 时间：2013-03-08T09:04:15.603
> 
> 标签：c++, pointers, inheritance, copy

嗨，这是我的第一个话题。我在c ++中有以下情况：

```
class A;
class Child;
class Parent;

class A 
{
public:
    Parent *_p;
    A() {}
};

class Parent 
{
public:
    void add(A &a) { a._p = this; }
    Parent() {}
};

class Child : public Parent
{
public:
    A a;
    Child() : Parent() { add(a); }
}; 
```

主要很简单：

```
int main(int argc, char *argv[ ])
{
     Child c1,c2;
     c2=c1;
     return 0;
} 
```

目前`c2.a._p`有相同的地址`c1.a._p`（我做了一个副本）。我想修改 A 和/或 Parent 以便`_p`用正确的父级更新指针。我不能改变孩子，这是我的问题的强烈限制。

任何想法？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:41:13.807

当你这样做`c2=c1`时，很明显它`c2.a._p`具有与 相同的地址`c1.a._p`。基本上你告诉c2应该是c1！

**更新**：发表您的评论，那么您应该这样做。这有点难看，但我仍然没有全面了解您要实现的目标以及为什么不能修改 Class Child。这是某种伪 C++ 代码。

```
Parent c1;
Child c2, ....;
c2.a._p = &c1; 
```

# java - 测试命名捕获组的存在

> ID：15290250
> 
> 赞同：1
> 
> 时间：2013-03-08T09:04:18.517
> 
> 标签：java, regex

我有一段代码根据用户提供的正则表达式从字符串中提取日期。有几种不同的配置系统的方法，但通常对用户来说最方便的是指定一个命名的捕获组，然后代码从中提取日期。例如：

```
Input: ABC-20130308
Regex: ABC-(?<date>\d{8}) 
```

代码非常简单：

```
Pattern p = Pattern.compile( regex );
Matcher m = p.matcher( input );
m.find();
m.group( "date" ); 
```

问题是，当用户没有指定命名组时，会`m.group("date")`出现 IllegalArguementException。

我可以很容易地捕捉到这个异常并尝试获取日期的替代方法，但这基本上是使用异常来进行控制流。在我尝试得到它之前，我宁愿测试该组的存在。我是否错过了某种检查模式中是否存在命名组的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:10:01.903

[`java.util.regex.Matcher.group(String name)`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28java.lang.String%29)抛出一个

> IllegalArgumentException - 如果模式中没有给定名称的捕获组

所以也许你可以[`groupCount()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#groupCount%28%29)用来做一个基本的检查。但我担心你必须处理`IllegalArgumentException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:15:22.777

如何在模式上运行正则表达式匹配（由用户提供，并首先作为纯字符串处理）来检查是否包含组名？

例如`.*\(?<date>.+\).*`或类似的。

# android - newInstance 的回栈

> ID：15290251
> 
> 赞同：0
> 
> 时间：2013-03-08T09:04:30.240
> 
> 标签：android

我有 3 个活动：A（启动器）、B 和 C。我已将 A 的 launchMode（在清单中）指定为 singleInstance。A 有一个前往 B 的按钮，B 有一个启动 C 的按钮，C 有一个启动 A 的按钮——所有这些都使用默认的“标准”调用模式。

我采取以下步骤：

*   启动应用程序 -> A -> 启动 B -> B -> 启动 C -> C -> 启动 A -> A -> 启动 B -> C

这将我带到 C（而不是 B）！我不明白为什么。

另一个系列的步骤：

*   启动应用程序 -> A -> 启动 B -> B -> 启动 C -> C -> 启动 A -> A -> 启动 B -> C -> 启动 A -> A -> 启动 B -> C -> 返回-> B -> 返回 -> A -> 返回 -> 退出

堆栈的其余部分去了哪里？以及为什么 B 进入后堆（在最后一步）而我在前进时没有遇到。

另一个疑问是，通过 newInstance，我认为最多将为 A 创建一个新任务两次——我应该能够在最近的任务中看到这一点——但我不能。我如何“看到”一个任务？

编辑：添加相关代码（为简洁起见仅添加相关代码）：

```
**Manifest**
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.backstack.B"
        android:label="@string/title_activity_b" >
    </activity>
    <activity
        android:name="com.example.backstack.A"
        android:label="@string/title_activity_"
        android:launchMode="singleInstance" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.backstack.C"
        android:label="@string/title_activity_c" >
    </activity> 
```

A.java - launchB 在布局 xml 中设置为 onClick 成员

```
public void launchB(View v){
    Intent i= new Intent(this, B.class);
    startActivity(i);
} 
```

B.java

```
public void launchC(View v){
    Intent i= new Intent(this, C.class);
    startActivity(i);
} 
```

C.java

```
public void launchA(View v){
    Intent i= new Intent(this, A.class);
    startActivity(i);
} 
```

# cassandra - 当我不知道行键时如何从赫克托查询 cassandra

> ID：15290252
> 
> 赞同：-1
> 
> 时间：2013-03-08T09:04:33.887
> 
> 标签：cassandra, hector

我有一个用于存储用户详细信息的架构。现在，从我的 java 代码中，我想实现一种通过用户名和密码检查用户是否存在的方法。问题是 ColumnFamilyQuery 要求我提供应用程序不知道的行键。我将如何做到这一点。我对卡桑德拉真的很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:07:52.503

您使用什么数据作为行键？

如果您在客户端代码中强制执行用户名唯一性，您可以使用用户名作为行键本身。这样，您始终可以通过用户名找到用户记录。否则，您可以从用户名和其他一些唯一数据中创建一个复合键以避免冲突。

# html - 第二，第三等水平子弹（LI）被推下

> ID：15290253
> 
> 赞同：2
> 
> 时间：2013-03-08T09:04:37.533
> 
> 标签：html, css

在这个页面上，我被要求查看（参见下面的链接），UL#columns 中的第二个和第三个 LI 被推下。

删除`clear:both`default.css 的第 61 行可修复此问题。但是，我不清楚为什么。有任何想法吗 ？

```
#columns {width: 960px; clear: both; margin-top: 90px;}
#columns li {width: 290px; float: left; display: inline-block; background-position: center top; background-repeat: no-repeat; text-align: center; margin-right: 40px; opacity: 0;}
#columns li:nth-child(3) {margin-right: 0;}
#columns li h3 {font-size: 22px; color #33343d; display: block; clear: both; margin-top: 50px;}
#columns li P {color: #78797d; font-size: 15px; margin-top: 10px;}

#columns li.heart {background-image: url('../img/icons/heart.gif');}
#columns li.phone {background-image: url('../img/icons/phone.gif');}
#columns li.wheel {background-image: url('../img/icons/wheel.gif');} 
```

![在此处输入图像描述](../Images/5549beb6900de9222c1d309f91a7c202.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:09:25.203

您正在使用`float:left`and `display:inline-block`，删除`float:left`它会正常工作！

而不是使用`inline-block`，你可以使用`float:left`一个`clearfix`这样[的](http://nicolasgallagher.com/micro-clearfix-hack/)！

要使 IE 工作，`inline-block`请添加这些行：

```
*display : inline;
*zoom : 1; 
```

# python - 如何使用 python voluptuous 验证 url 和电子邮件？

> ID：15290254
> 
> 赞同：2
> 
> 时间：2013-03-08T09:04:48.763
> 
> 标签：python, validation

我想用 python voluptuous 验证 url 和 email 输入数据，可能是这样的：

```
schema = Schema({
    Required('url'): All(str, Url()),
    Required('email'): All(str, Email())
}) 
```

查看源代码，我看到 voluptuous 有一个内置的 Url 函数，在电子邮件的情况下它没有，所以我想构建自己的，问题是我不知道必须调用这个函数架构内。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T11:30:29.190

**更新**：现在`voluptuous`有电子邮件验证器。

您可以像这样编写自己的验证器

```
import re
from voluptuous import All, Invalid, Required, Schema

def Email(msg=None):
    def f(v):
        if re.match("[\w\.\-]*@[\w\.\-]*\.\w+", str(v)):
            return str(v)
        else:
            raise Invalid(msg or ("incorrect email address"))
    return f

schema = Schema({
        Required('email') : All(Email())
    })

schema({'email' : "invalid_email.com"}) # <-- this will result in a MultipleInvalid Exception
schema({'email' : "valid@email.com"}) # <-- this should validate the email address 
```

# sql - 加载后同步用户和登录的最佳方式是什么？

> ID：15290257
> 
> 赞同：1
> 
> 时间：2013-03-08T09:04:52.110
> 
> 标签：sql, sap-ase

我有生产和开发环境服务器。每月一次，我想从生产中转储数据库并将它们加载到开发中！

但也存在一些用户和登录问题（缺少登录、权限等）。

转储后同步用户和登录的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:24:00.870

您可以从 prod master中**bcp出您的 syslogins 表，然后将该表****bcp**到您的 dev master 中。这必须在第一次仔细完成。我建议您从开发系统中删除所有用户登录名（非系统默认登录名）。

要**bcp**进入 master，您必须设置以下标志以允许更新系统表：

```
sp_configure 'allow updates', 1 
```

然后使用 1 的块大小将数据**bcp**到 dev 系统，这将允许丢弃重复的行，而不影响非重复的行。

```
bcp master..syslogins in prodsyslogins.file -Usa -Psa_password -Smyserver -n{-c} -b1 
```

完成 bcp 后，您将需要取消设置系统表更新标志。

```
sp_configure 'allow updates',0 
```

如果正确完成，您的所有 syslogin suid 应该与每个数据库中的 sysusers suid 匹配，这应该可以解决您遇到的权限问题。

**锻炼注意** 在开始弄乱它之前，请确保您有 master 的备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:12:04.760

在开始加载之前，您可以 bcp out sysusers、sysalternates 和 sysprotects。一旦数据库在线，启用“允许更新”，删除 sysusers、sysalternates 和 sysprotects 并 bcp in。

您还可以检查是否有任何 suid 不匹配。

选择 t1.suid, t2.suid from sysusers t1, master..syslogins t2 where t1.name = t2.name and t1.suid != t2.suid and t1.suid != -2

# join - Primefaces 数据表内连接

> ID：15290263
> 
> 赞同：0
> 
> 时间：2013-03-08T09:05:20.197
> 
> 标签：join, primefaces, datatable

我得到了我的学生课程列表，学生有他自己的课程列表。通过 Hibernate Criteria API，我按姓名选择了学生，加入了课程，所以我的结构如下：

```
Student ID=1, Courses.size=2
Student ID=1, Courses.size=2
Student ID=2, Courses.size=1
Student ID=3, Courses.size=2
Student ID=3, Courses.size=2 
```

学生重复他的课程的大小。这就是我想做的。但是我在我的 Primefaces 数据表中显示它有问题。

```
<p:dataTable var="student" rowIndexVar="row" selectionMode="single"  paginator="true" value="#{studentsMB.students}" lazy="true"  rows="30">

<p:column id="tematpl" headerText="Temat pracy dyplomowej">  
    <h:outputText value="#{student.name}" /> 
</p:column> 

<p:column headerText="Test">                                
    <h:outputText value="#{student.courses[???].name} " />  
 </p:column> 

</p:dataTable> 
```

如何在“???”中包含变量 地方，所以我可以显示每门课程的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:44:58.100

从 UI 的角度来看，使用 primefaces[子表](http://www.primefaces.org/showcase/ui/datatableSubTable.jsf)或[行扩展](http://www.primefaces.org/showcase/ui/datatableExpandableRows.jsf)会更好

对于行扩展，一个简单的结构是

```
<p:dataTable var="student" rowIndexVar="row" selectionMode="single"  paginator="true" value="#{studentsMB.students}" lazy="true"  rows="30">

    <p:column style="width:2%">  
        <p:rowToggler />  
    </p:column>  

    <p:column id="tematpl" headerText="Temat pracy dyplomowej">  
        <h:outputText value="#{student.name}" /> 
    </p:column>  

    <p:rowExpansion>
        <p:datatable value="#{student.courses}"  var="course"
            <p:column  headerText="Course name">  
                <h:outputText value="#{course.name}" /> 
            </p:column>  
        </p:datatable>           
    </p:rowExpansion>  
</p:dataTable> 
```

# ruby-on-rails - 使用 poltergeist、rspec、capybara、spork guard 和 rails 3.2.12 登录子域

> ID：15290264
> 
> 赞同：3
> 
> 时间：2013-03-08T09:05:20.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capybara, rspec-rails, poltergeist

我无法让我的测试在子域上登录用户。

**更新**

我再次尝试使用 selenuim。现在我在 test.log 中得到了这个错误。

```
PG::Error: ERROR:  deadlock detected
DETAIL:  Process 15762 waits for AccessExclusiveLock on relation 2994754 of database 2952965; blocked by process 15020.
Process 15020 waits for ShareLock on transaction 93977; blocked by process 15762. 
```

我猜测 the`spec_helper.rb`和 the`rails s -e test -p 3001`都在不同的步骤上弄乱了测试数据库，这让 postgresql 痛苦地哭了出来。

但是，如何在不需要在测试环境中启动 rails 服务器的情况下在需要身份验证的子域上测试 javascript？

**原始问题**

**这个规范给了我**

```
require 'spec_helper'
feature 'home' do

  let(:user)        {FactoryGirl.create(:user)}
  let!(:firm)       {user.firm} 
  let(:project)     {FactoryGirl.create(:project, firm:firm)}
  let(:statistics)  {"http://#{firm.subdomain}.lvh.me:3001/statistics"} 
  let(:timesheet)   {"http://#{firm.subdomain}.example.com/timesheets/#{user.id}"}
  let(:account)     {"http://#{firm.subdomain}.lvh.me:3001/account"}

    before(:each) do 
      login_as(user, :scope => :user, :domains => :all)  
    end

    scenario "Statistics" do 
     visit statistics
     page.should have_content("Stats for users")
     page.should have_content(user.name) 
    end 
    scenario 'account' do 
     visit account
      page.should have_content("Memeber since: ") 
    end
    scenario "Statistics select", js: true do
      login_as(user, :scope => :user, :domains => :all) 
      visit statistics
      page.should have_content(firm.name)
      page.should have_content(user.name)
      page.current_url.should == statistics
      page.select("Stats for projects", :from => "stats")
       save_and_open_page
      page.should have_content(project.name)
    end    
end 
```

**这个错误**

```
..F   
Failures:

  1) home Statistics select
     Failure/Error: page.should have_content(firm.name)
       expected there to be text "name6" in "Please sign in. You need to sign in or register before continuing. Email Password Remember me Forgot your password?"
     # ./spec/features/home/statistics_spec.rb:30:in `block (2 levels) in <top (required)>'
     # ./spec/support/active_record.rb:13:in `block (3 levels) in <top (required)>'
     # ./spec/support/active_record.rb:12:in `block (2 levels) in <top (required)>'

Finished in 4.77 seconds
3 examples, 1 failure 
```

当我不使用时，`js: true`一切都很好。但是，poltergeist 和 phantomjs 无法登录。

**spec_helper**

```
require 'spork'
Spork.prefork do

  ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'database_cleaner'
require 'rspec/autorun'
require 'factory_girl'
require 'ruby-debug'
require 'capybara/rspec'
require 'capybara/poltergeist'
Capybara.javascript_driver = :poltergeist
include Warden::Test::Helpers
Warden.test_mode!

Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.include Devise::TestHelpers, :type => :controller

  config.extend ControllerMacros, :type => :controller
  config.include ControllerMacros, :type => :feature

  config.include RequestMacros, :type => :request
  config.mock_with :rspec

  config.use_transactional_examples = false
  config.use_transactional_fixtures = false
  config.before(:suite) do
    DatabaseCleaner.strategy = :truncation
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end
  config.infer_base_class_for_anonymous_controllers = false
 end 

 Spork.each_run do
   FactoryGirl.reload  
 end
end 
```

# python - 爬虫使用twisted，getPage遇到超时错误怎么办？

> ID：15290266
> 
> 赞同：1
> 
> 时间：2013-03-08T09:05:23.153
> 
> 标签：python, timeout, twisted, web-crawler, reactor

我使用 twisted 及其 deferredGenerator 编写了一个爬虫。以下是关于我的问题的代码：

```
 @defer.deferredGenerator
      def getReviewsFromPage(self,title,params):

          def deferred1(page):
              d = defer.Deferred()
              reactor.callLater(1,d.callback,self.parseReviewJson(page))
              return d

          def deferred2(dataL,title):
              d = defer.Deferred()
              reactor.callLater(1,d.callback,self.writeToCSV(dataL,title=title))
              return d

          cp = 1
          #for cp in range(1,15000):
          while self.running:
              print cp
              params["currentPageNum"] = cp

              url = self.generateReviewUrl(self.urlPrefix,params = params)
              print url

              wfd = defer.waitForDeferred(getPage(url,timeout=10))
              yield wfd
              page = wfd.getResult()
              wfd = defer.waitForDeferred(deferred1(page))
              yield wfd
              dataList = wfd.getResult()
              wfd = defer.waitForDeferred(deferred2(dataList,title))
              yield wfd
              cp = cp+1 
```

我使用发电机

```
 self.getReviewsFromPage(title,params)
    reactor.run() 
```

我的问题是：当函数'getPage'出现超时错误时，我该怎么做才能处理错误并再次抓取错误页面？我曾经在getPage中添加了一个addErrback并想调用getPage，但似乎当reactor运行时，它不会再接收新事件了。

你们中有人遇到过同样的问题吗？我很感激你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:27:05.760

> 似乎当反应堆运行时，它不会再收到新事件了。

事实并非如此。事件*仅*在反应堆运行时发生！

你没有分享使用的代码版本`addErrback`，所以我看不出你使用它的方式是否有问题。但是，由于您已经在使用`deferredGenerator`，因此更惯用的方法是：

```
page = None
for i in range(numRetries):
    wfd = defer.waitForDeferred(getPage(url,timeout=10))
    yield wfd
    try:
        page = wfd.getResult()
    except TimeoutError:
        # Do nothing, let the loop continue
        pass
    else:
        # Success, exit the loop
        break
if page is None:
    # Handle the timeout for real
    ...
else:
    # Continue processing
    ... 
```

# java - 如何设置 SWT 按钮上显示的文本的边距/填充？

> ID：15290267
> 
> 赞同：3
> 
> 时间：2013-03-08T09:05:26.567
> 
> 标签：java, swt

如何设置[SWT Button](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Button.html)上显示的文本的边距/填充？

```
Button b = new Button(parent, SWT.LEFT);
b.setText("Click me"); 
```

我有：

```
+-----------------+
|Click me         |
+-----------------+ 
```

我想要（注意左边的空间）：

```
+-----------------+
| Click me        |
+-----------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:21:37.040

不支持填充`Button`。标准解决方案是在标签的开头使用`SWT.CENTER`或添加空格...

# magento - Magento 在哪里存储用户锁定的信息？

> ID：15290271
> 
> 赞同：2
> 
> 时间：2013-03-08T09:05:45.960
> 
> 标签：magento, locked

我可以在 Magento 数据库的哪个位置找到有关用户是否被锁定的信息？我检查了所有 customer_* 表，但找不到任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:24:47.737

检查 admin_user 表中的 lock_expires 值，如果需要从数据库级别执行此操作，请将 failures_number 重置为 0

# windows - SSDT表在windows7中是可写的吗？

> ID：15290272
> 
> 赞同：2
> 
> 时间：2013-03-08T09:05:46.027
> 
> 标签：windows, driver

我已经编写了一个 windows7 设备驱动程序，它挂钩 SSDT 条目。我认为 SSDT（二级系统描述符表）是写保护的。但是我还是尝试覆盖 SSDT，并且成功且没有错误。我在本机机器上执行此操作（不在 VM 中）我打印了 CR0 寄存器以检查在覆盖 SSDT 之前是否清除了 WP。设置了 CR0 的 WP 位......我如何在没有任何规避的情况下覆盖 SSDT？我不明白这怎么可能。有人可以解释一下吗？

```
NTSTATUS DriverEntry(PDRIVER_OBJECT driverObject, PUNICODE_STRING RegistryPath) {

unsigned int m_cr0=0;
__asm
  {
          push eax
          mov eax, CR0
          mov m_cr0, eax;
          pop eax
  }

DbgPrint("CR0 : %08X\n", m_cr0);
driverObject->DriverUnload = Unload_driver;
DbgPrint("Hooking API! SSDT:%08X\n", (unsigned int)((void*)&KeServiceDescriptorTable));

Hooking();

return(STATUS_SUCCESS); 
```

}

```
#define SYSTEMSERVICE(_name) KeServiceDescriptorTable.ServiceTable[*(DWORD *) ((unsigned char *)_name + 1)]

void Hooking(void){

DbgPrint("Hooking API! ZwCreateFile : %08X, index : %d\n", ZwCreateFile, *(DWORD *) ((unsigned char *)ZwCreateFile + 1) );
DbgPrint("Hooking API! FakeZwCreateFile : %08X\n", FakeZwCreateFile);

DbgPrint("Hooking API! ZwQueryDirectoryFile : %08X, index : %d\n", ZwQueryDirectoryFile, *(DWORD *) ((unsigned char *)ZwQueryDirectoryFile + 1) );
DbgPrint("Hooking API! FakeZwQueryDirectoryFile : %08X\n", FakeZwQueryDirectoryFile);

DbgPrint("Hooking API! ZwQueryVolumeInformationFile : %08X, index : %d\n", ZwQueryVolumeInformationFile, *(DWORD *) ((unsigned char *)ZwQueryVolumeInformationFile + 1) );
DbgPrint("Hooking API! FakeZwQueryVolumeInformationFile : %08X\n", FakeZwQueryVolumeInformationFile);

//cli, sti - disable/enable interruptions
_asm{cli}
// hook CreateFile
OrigZwCreateFile = (ZWCREATEFILE) (SYSTEMSERVICE(ZwCreateFile));
(ZWCREATEFILE) (SYSTEMSERVICE(ZwCreateFile)) = FakeZwCreateFile;

// hook QueryDirectoryFile
OrigZwQueryDirectoryFile = (ZWQUERYDIRECTORYFILE) (SYSTEMSERVICE(ZwQueryDirectoryFile));
(ZWQUERYDIRECTORYFILE) (SYSTEMSERVICE(ZwQueryDirectoryFile)) = FakeZwQueryDirectoryFile;

// hook QueryVolumeInformationFile
OrigZwQueryVolumeInformationFile = (ZWQUERYVOLUMEINFORMATIONFILE) (SYSTEMSERVICE(ZwQueryVolumeInformationFile));
(ZWQUERYVOLUMEINFORMATIONFILE) (SYSTEMSERVICE(ZwQueryVolumeInformationFile)) = FakeZwQueryVolumeInformationFile;
_asm{sti} 
```

}

这是我的驱动程序入口代码和 SSDT 挂钩代码。我只是转储了 CR0 寄存器值并更改了 ZwCreateFile、ZwQueryDirectoryFile、ZwQueryVolumeInformationFile 的 SSDT 条目

![调试视图](../Images/422480d6841f1de3c9aaccee04d50951.png)

这是调试视图的屏幕截图（显示 DbgPrint 消息）CR0 是“8001003B”，它告诉我第 16 位（WP）已设置。但 SSDT 钩子工作正常。CreateFile、QueryDirectoryFile... 的系统 API 已根据我的喜好进行了更改。

操作系统为Windows7 Professional K, 32bit。它在实际机器上运行（不在VM中）

# mysql - 加入“小于...的最大值”，而无需先加入所有小于

> ID：15290279
> 
> 赞同：2
> 
> 时间：2013-03-08T09:06:19.123
> 
> 标签：mysql

这似乎应该是一个非常基本的问题，并且周围有很多*类似*的问题，但是经过数小时的研究和反复试验，我找不到答案。如果这是重复的，我很抱歉。

我想加入一个基于两个条件的表：

column_1 = something_1 AND column_2 = max（所有可能的条目小于 something_2）。

我想我应该能够做到这一点：

```
Select t1.id, t2.id from table1 as t1
join
(select t1.id, max(t2.condition_2) as big_condition_2 from table1 as t1
join table2 as t2
on t2.condition_1 = t1.condition_1 and t2.condition_2 < t1.condition_2
group by t1.id) as t3
on t3.id = t1.id
join table2 t2
on t2.condition_1 = t1.condition_1 and t2.condition_2 = t3.big_condition_2 
```

此查询当前在 20 分钟后超时，我不知道删除超时需要多长时间。我很确定我做错了什么。

每个表平均有大约 100 种类型，`condition_1`然后每个条件有大约 4000 个不同的`condition_2`值。所以每个表有 300k - 500k 行。然后我估计子查询应该生成大约 2000 x 100 = 200k 连接 - 浪费，但我认为这不会导致如此长的延迟。请注意，`condition_1`是一个`int`并且`condition_2`是一个`varchar(21)`。

我在每个引用字段上都有索引，可以是单独的，也可以是多个必要的，但是我生成这个 t3 表的事实可能会大大减慢速度，因为与 t3 的连接不使用索引？

不过，我认为更根本的是，我想知道是否有一种方法可以选择要加入的特定值，而无需进行所有这些否则不必要的联接？也就是说，执行类似（伪代码）的操作：

```
select t1.id, t2.id from table1 as t1
join table2 as t2
on t2.condition_1 = t1.condition_1
and t2.condition_2 = max(t2.condition_2 where t2.condition_2 > t1.condition_1) 
```

在此先感谢您的帮助！

**更新**

应史蒂夫的要求，我尝试对查询进行解释，但在 20 分钟后它也超时了。然后我尝试仅对子查询部分进行解释并得到以下输出

**更新 2**我添加了一些新索引并在子查询上重新运行解释。以下是结果（已格式化，因此它们现在也更具可读性）：

```
id  select_type  table  type    possible_keys                           key                  key_len  ref                       rows    Extra
1   SIMPLE       esnap  index   ticker_id,ticker_id_2,date_time_GMT     PRIMARY              4        null                      20  
1   SIMPLE       ep     ref     primary_ticker_id,secondary_ticker_id   secondary_ticker_id  5        adr.esnap.ticker_id       1       Using where
1   SIMPLE       ets    ref     ticker_id,date_time_GMT                 ticker_id            5        adr.ep.primary_ticker_id  22430   Using where; Using index 
```

作为解释的方式，`esnap`is `tableA`、`ets`is`tableB`和`ep`是一个表，它是将 tableA 连接到 tableB 所需的中间表。所以子查询实际上是：

```
select esnap.security_snap_id, max(ets.date_time_GMT) as snap_time from
equity_snapshots esnap
join equity_pairs ep on ep.secondary_ticker_id = esnap.ticker_id
join equity_trade_snaps ets on ets.ticker_id = ep.primary_ticker_id and
ets.date_time_GMT < esnap.date_time_GMT
group by esnap.security_snap_id 
```

其中`ticker_id`是一个`int`，`date_time_GMT`是一个`varchar(21)`。

**问不可能？**

进一步考虑，我认为子查询会生成一个太大的表。大约有 100 对要匹配 ( `condition_1`)，每对在 tableA 中有大约 6500 个不同的 id，在 tableB 中有 3500 个不同的 id。这意味着在分组*之前*将有大约 100 * 6500 * (3500/2) = 11 亿行加入。

**诉诸Java...**

除非其他人可以建议一种避免子查询的方法（即只加入“最大小于”，而不是“全部小于，然后分组”）我想我会放弃并使用 java 来导入整个表，做它的事情，然后将结果输出回mySql。对于应该更简单的事情来说，这一切似乎都非常耗时......所以如果有人有更好的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:01:34.650

```
SELECT t3.id, t2.id from (select t1.id,t1.condition_1, max(t2.condition_2) as big_condition_2 from table1 as t1
JOIN table2 as t2
on t2.condition_1 = t1.condition_1 and t2.condition_2 < t2.condition_2
group by t1.id,t1.condition_1 ) as t3

JOIN table2 t2
on t2.condition_1 = t3.condition_1 and t2.condition_2 = t3.big_condition_2 
```

需要更改条件`t2.condition_2 < t2.condition_2`，因为总是错误的可能是错字。

# jquery - Ajax 上传 dom 会变慢，直到 chrome 崩溃

> ID：15290284
> 
> 赞同：0
> 
> 时间：2013-03-08T09:06:36.240
> 
> 标签：jquery, ajax

我有一个通过 Ajax 加载的页面（说来话长，但我需要在一个 html 文件中为启用 javascript 的浏览器提供多个页面，并且如果禁用 js 则不加载它们）。通过 Ajax 加载的页面也有额外的 ajax 链接。因此页面被加载，如果您单击该页面中的链接，它会加载内容并更新 dom。这一切都很好，但是如果您继续单击 Ajax 链接来更新内容，页面会变得越来越慢，直到浏览器崩溃，所以我猜它必须是一个内存链接（在 Chrome 中尤其糟糕，但这可能是因为它比 Firefox 更消耗资源）。

我想知道这是否可能是因为在 ajax 回调中我再次调用该函数 - 我正在这样做，否则 ajax 内容中的链接不会将 ajax 事件应用于它们（即使我认为 .on应该以与 .live 类似的方式执行此操作）。无论如何，我认为以下内容对某人来说可能是显而易见的，非常感谢任何帮助。

```
function ajaxContent() {
    $('.ajaxContentWrapper').on('click', 'a.ajaxContentTrigger', function(event){
        event.preventDefault();
        var myUrl = $(this).attr("href") + " .ajaxContent";
        $(".ajaxContentWrapper").load(myUrl,function(){
            ajaxContent();  
        });

    return false;
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:12:35.510

您是否尝试过查看 chrome 开发人员工具中的 ajax 调用？另外我不明白您提供的功能，这种方法有什么问题？：

```
$('.ajaxContentWrapper').on('click', 'a.ajaxContentTrigger', function(event) {
    event.preventDefault();
    var myUrl = $(this).attr("href") + " .ajaxContent";
    $(".ajaxContentWrapper").load(myUrl);
}); 
```

# java - jasper 使用 iReport 报告：跨越多个页面，页面大小 A4

> ID：15290287
> 
> 赞同：0
> 
> 时间：2013-03-08T09:06:39.627
> 
> 标签：java, jasper-reports, ireport

我有一个使用 iReport 设计的 Jasper 报告，将 6 个固定大小的 6X6 块垂直放置在另一个下方。

问题是这些组合块（页眉+页脚+这些块）的长度超过了A4纸的大小。因此，当这些打印在 A4 纸上时，字体会缩小到非常小的尺寸，使整个报告几乎无法阅读。

我尝试将一半的块分成两个单独的细节带。但是，即使半块出现在第一页并停留在第二页，它也会导致相同的问题（小字体）。

（可能是由于单个布局需要的内容很大，jrxml页面的大小已经超出了A4页面的大小）

我应该怎么做才能将报告输出拆分为多个页面，并保留其正常字体大小，并且在 A4 纸上也是如此？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:28:51.120

谢谢 ：）

使用自己的细节带让我几乎找到了解决方案。但是我仍然停留在另一个点。

如果要同时显示所有波段的数据，那么这些波段会根据我的需要拆分为多个页面。

但是，如果只显示一个波段的数据，则报告末尾的空白页面会显示一个页脚（“第 2 页，共 2 页”）。但是，数据仅在第一页（“第 1 页，共 2 页”）。

任何想法如何消除这个额外的最后一页？

谢谢

# ssis - 从使用导入向导生成的命令行 SSIS 包运行

> ID：15290289
> 
> 赞同：2
> 
> 时间：2013-03-08T09:06:51.280
> 
> 标签：ssis, oracle10g, sql-server-2008-r2, data-migration

通过 SQL Server 2008 R2 的导入向导，我创建了一个 dtsx 包，用于将数据从 Oracle 数据库提取到 SQL 服务器。在向导步骤中，我编辑了 SQL 脚本命令，以便在迁移期间创建新表。

在向导步骤中，我在包保护级别区域中选择了“不保存敏感数据”。
生成的命令行是：

```
dtexec.exe /FILE import_data.dtsx 
CONNECTION DestinationConnectionOLEDB; Data Source=source;Initial Catalog=TEST;
           Provider=SQLNCLI10; Integrated Security=SSPI;Auto Translate=false; 
CONNECTION SourceConnectionAdoNET;Data Source=Oracle;PASSWORD=XYZ;User ID=Ned;  
CHECKPOINTING OFF  
REPORTING EWCDI 
```

但是我总是遇到以下异常：

```
Error: 2013-03-08 09:54:55.65
Code: 0xC0047062
Source: Data Flow Task 1 Source - test_Table [1]

Description: Microsoft.SqlServer.Dts.Runtime.DtsCouldNotCreateManagedConnecti
onException: Could not create a managed connection manager.

at Microsoft.SqlServer.Dts.Runtime.ManagedHelper.GetManagedConnection(String
assemblyQualifiedName, String connStr, Object transaction)
at Microsoft.SqlServer.Dts.Runtime.Wrapper.IDTSConnectionManager100.AcquireCo
nnection(Object pTransaction)
at Microsoft.SqlServer.Dts.Pipeline.DataReaderSourceAdapter.AcquireConnections(Object    
transaction)
at Microsoft.SqlServer.Dts.Pipeline.ManagedComponentHost.HostAcquireConnectio
ns(IDTSManagedComponentWrapper100 wrapper, Object transaction)
End Error 
```

如果我让包从导入向导运行，通过选择“立即运行”复选框，它工作正常。这让我觉得可能连接字符串中缺少某些内容，从而阻止正确连接到数据库。

对于 SQL Server（目标 DB），我们使用 Windows 身份验证登录数据库，并使用 Oracle（源 DB）的用户名/密码。

我也尝试使用 32 位版本的 dtexec.exe，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:20:22.160

奇怪的是它没有说明为什么它无法创建连接。我怀疑驱动程序，因为如果这是登录问题，它会这么说。

您是否明确运行了 32 位 dtexec？这非常棘手，我问的原因是因为在安装了 32 位运行时的 64 位环境中手动执行包（双击）时，默认情况下会调用 32 位版本（即使您在64 位）。这是因为 PATH 环境变量中的路径：32 位程序文件的目录 (%ProgramFiles(x86)%) 列在 64 位程序文件的目录路径 (%ProgramFiles%) 之前。

请记住，所有工具（BIDS 和 SSDT）都是 32 位应用程序；尽管它们可以在 64 位环境中使用，但它们使用的所有数据提供程序都是 32 位的。要使 SSIS 包能够在 64 位环境中使用，您必须拥有相应版本的数据提供程序；如果你不这样做；它们必须使用 32 位运行时执行。

# uml - UML 序列图中的垂直矩形表示什么？

> ID：15290291
> 
> 赞同：4
> 
> 时间：2013-03-08T09:06:58.147
> 
> 标签：uml, sequence-diagram

UML 序列图中的垂直矩形表示什么？![在此处输入图像描述](../Images/cccbdbc19d13b661edfa97dc7c31f136.png)

例如我想知道绿色箭头指向的矩形的含义。这些矩形的高度是否意味着什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-01T11:13:17.023

垂直矩形表示**执行规范**。

*   **执行规范**是对象交互的一部分，它表示对象在执行某些活动或只是等待其他对象的回复时的生命周期。通过某些活动，我的意思是发送消息等。但是，矩形的长度是无关紧要的。你可能会也可能不会画这些，因为它们不是强制性的。
    下面给出了带有图表的示例：

![执行规范](../Images/e54bd4d7922124b37cb54d260414bf8d.png)

详情可查看[以下链接。](http://www.uml-diagrams.org/sequence-diagrams.html#execution)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:00:18.270

不，矩形的高度无关紧要。可能是您需要使矩形更高以容纳更多消息。

形式上，矩形是*ExecutionSpecification*，虚线是*Lifeline*。UML 规范说：

> 沿着生命线的*OccurrenceSpecifications*的**顺序**很重要，表示这些 OccurrenceSpecifications 将出现的顺序。*然而，生命线*上的*OccurrenceSpecifications*之间的 绝对**距离**与语义无关。

 *****（*OccurrenceSpecifications是**Messages结尾处或**ExecutionSpecification*开头/结尾处的句法点。）

如果要对执行的持续时间进行建模，则应沿*ExecutionSpecification编写**DurationConstraint*。[这里](http://changevision.files.wordpress.com/2013/01/duration-constraint-in-sequence-diagram1.png)有一个例子。*****

# sql-server - 如何从表中获取使用一个特定列的所有“对象”

> ID：15290292
> 
> 赞同：0
> 
> 时间：2013-03-08T09:07:00.470
> 
> 标签：sql-server

我正在使用 Sql server 2008 R2，出于某种原因，对于我数据库中的一个字段，其值比用户插入的值发生了变化。我怀疑这是一项工作，一个程序，一个使用该字段的东西，并以某种方式改变了初始值。因此，我需要找到所有在其主体中指定了该字段的“对象”，作为一种说法。有什么线索吗？

非常感谢你，博格丹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:02:13.357

在 SQL Server 中，您可以右键单击表和`VIEW DEPENDENCIES`. 这将显示一些细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:43:12.840

我发现 RedGate 的 SQL 搜索对于以下内容非常有用：

[SQL 搜索](http://www.red-gate.com/products/sql-development/sql-search/)

这是一个插入 SSMS 的免费工具，可以查看实例上的所有数据库并非常快速地找到其中的文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:50:26.460

因为我没有得到任何合适的答案，所以我想帮助别人。所以可以使用：

```
DECLARE @SearchTextInformation NVARCHAR(MAX) 
SET @SearchTextInformation = '<the name of the table, view, or object you want to find>' ;
SELECT [ao].[name], [asm].[definition] 
FROM sys.all_objects ao 
JOIN sys.all_sql_modules asm 
ON [ao].[object_id] = [asm].[object_id] 
WHERE [asm].[definition] LIKE '%' + @SearchTextInformation+ '%' 
```

它将返回所有在其描述中提到您的“对象”的对象。最好的问候， 波格丹

# node.js - 带有 node.js 和 MongoDB 的警报系统

> ID：15290295
> 
> 赞同：1
> 
> 时间：2013-03-08T09:07:05.183
> 
> 标签：node.js, mongodb, user-interface

我想知道使用 node.js 和 mongoDB 实现创建用户警报系统的最佳方法是什么。

您是否仍需要让客户端轮询服务器端并检查是否有任何新的更新要显示给用户？（例如，新消息）

或者有没有一种有效的方法让数据库更改过滤到 UI，因为它们发生了？我刚开始学习节点，我无法在网上找到答案。

对此的任何解释都会很棒。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T09:16:09.353

对于警报系统，我将使用以下三个组件：

*   [可尾游标](http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/)
*   [封顶集合](http://docs.mongodb.org/manual/core/capped-collections/)
*   [套接字.io](http://socket.io/)

capped 集合将保存所有通知（即新通知只是添加到 capped 集合中，capped 集合具有自动删除旧消息的附加优势），tailable 光标将保持打开并不断返回任何新消息和套接字.io 将能够毫不费力地处理通知客户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:12:05.150

在我看来，您正在寻找的解决方案在这里：[https ://gist.github.com/scttnlsn/3210919](https://gist.github.com/scttnlsn/3210919)

# javascript - 删除添加的 html 表格行

> ID：15290296
> 
> 赞同：0
> 
> 时间：2013-03-08T09:07:07.190
> 
> 标签：javascript, jquery, html

我正在使用下面的代码，通过单击一个按钮来添加表格行，现在我需要另一个按钮来删除新创建的行。请帮助我做到这一点。谢谢

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">      </script>

<script>
jQuery(function(){
var counter = 1;
jQuery('input.add_row').click(function(event){
    event.preventDefault();
    counter++;
    var newRow = jQuery('<tr><td><select name="level' + counter + '"><option value="Matric or equivalent">Matric or equivalent</option><option value="10+2 or equivalent">10+2 or equivalent</option><option value="Diploma after matric">Diploma after matric</option><option value="Bachelor Degree">Bachelor Degree</option><option value="Master Degree">Master Degree</option><option value="Others">Others</option></select></td><td><input type="text" name="prog' +
        counter + '"/></td><td><input type="text" name="ins' +
        counter + '"/></td><td><input type="text" name="univ' +
        counter + '"/></td><td><input type="text" name="reg' +
        counter + '"/></td><td><input type="text" name="yr' +
        counter + '" size="4" maxlength="4"/></td><td><input type="text" name="mar' + 
        counter + '"/></td><td><input type="text" name="sub' + 
        counter + '" size="8"/></td></tr>');
    jQuery('table.aca_inf').append(newRow);
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:09:28.113

尝试：

```
jQuery('input.del_row').click(function(event){
    event.preventDefault();
    jQuery('table.aca_inf tr:last').remove();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:10:25.307

利用：

```
 function delete_row(){
   //delete last row of table
     while(counter){ 
     $('#btn').on("click", function (){
           $('#tab1 tr:last').remove();
           counter--;
     });
    }
  } 
```

# c - 为什么随机生成器只生成零

> ID：15290297
> 
> 赞同：0
> 
> 时间：2013-03-08T09:07:07.897
> 
> 标签：c

```
main()
{
     int i;
     srand((int)time(NULL));
     for(i = 0; i < 10; i++)
     printf("%f\n", randomInRange(0, 100));   // %f instead of %d
}

int randomInRange(int lo, int hi)
{

     double d = (double)rand() / ((double)RAND_MAX + 1);
     int k = (int)(d * (hi - lo + 1));
     return k+lo;
} 
```

使用 %d 打印值时，效果很好
，但是如果我选择 %f 而不是 %d，它只会生成 0
为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:20:05.863

n1570.pdf（C 标准）的第 7.21.6.1p9 节说，关于 printf：

> ...如果任何参数不是相应转换规范的正确类型，则行为未定义。

第 7.21.6.1p8 节说明了`%f`格式说明符的正确类型：

> **f,F**`double`表示浮点数的参数以 [−]ddd.ddd 样式转换为十进制表示法，其中小数点字符后的位数等于精度规范。

`randomInRange`返回一个整数。int 显然不是 double，因此行为是未定义的。一只鸡可能会跑来跑去，尽管它的头不见了……那只鸡可能会也可能不会导致某人摔倒并摔断脖子。避免无头鸡和未定义的行为。

在以后提出问题之前，请查阅手册并尝试自己找到答案。通过这样做，您将有助于减少 Internet 上此类信息的冗余。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:30:40.333

原因是解释为浮点数的小整数 (< 2^23)*非常*小。

```
s eeeeeee emmmmmmm mmmmmmmm mmmmmmmm  == sign * 1.mmmmmm * 2^(eeeee - 128)
0 0000000 00000000 00000000 11111111  == 255 as integer 
```

这个 32 位整数拆分为位并解释为浮点数约为 255 * 2^-128，或约 3.57e-43，正确显示为 0.0。

您也可以尝试将其打印为“%e”，显示科学表示，或“%g”，显示“最小准确”表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:20:33.660

我知道一种在c中随机化数字的简单而好方法

```
 #include<stdlib.h>
#include <time.h>

srand(time(NULL));

int  r = rand()%100; 
```

只需将其写在c中，随机数将放入“r”

# c++ - 获取我可以分配给取消引用的迭代器的类型

> ID：15290298
> 
> 赞同：0
> 
> 时间：2013-03-08T09:07:09.430
> 
> 标签：c++, c++11, iterator

我有功能（实际上它是部分专业化的）

```
template<typename T>
T generate(){

} 
```

要使用它，我必须隐式键入模板类型，例如

```
int v = generate<int>(); 
```

现在我想编写一个函数，它获取输出迭代器并`n`使用这个函数生成值。

```
template<typename OI>
fill(size_t n, OI it){

    for(size_t i = 0; i < n; ++i){
        *(it++) = generate<__TYPE???__>();
    }
} 
```

我知道，对于具有实际值的迭代器，那些被指出的，那里`value_type`，这表明了它。但是如果我得到例如`back_insert_iterator` `value_type`是无效的，那不是我想要的。

那么，有没有办法获得这种类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:27:13.843

输出迭代器故意不需要有`value_type`. 您无法自动检索可以插入到序列中的类型。对于给定的迭代器，甚至可能有几个一流的序列类型。

一种解决方法是简单地要求*与您的函数一起*使用的迭代器提供一个`value_type`成员或具有有用的`* iterator`取消引用操作。但正如您所观察到的，`std::back_insert_iterator`不符合这些要求。

更好的选择是采用两个模板参数。

```
template<typename T, typename OI>
fill(size_t n, OI it); 
```

这不允许扣除`T`，所以你需要

```
fill< int >( intvec.size(), std::back_inserter( intvec ) );
//    ^^^ explicit, but the iterator type is still deduced 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:15:21.367

如果您可以更改`generate()`为将引用作为输出参数而不是使用返回值，那么编译器可以根据您传入的内容计算出适合您的类型，例如：

```
template<typename T>
void generate(T &value)
{
    value = ...;
} 
```

.

```
int v;
generate(v); 
```

.

```
generate(*(it++)); 
```

# rtc - 在命令行中从 RTC 删除文件

> ID：15290299
> 
> 赞同：1
> 
> 时间：2013-03-08T09:07:19.203
> 
> 标签：rtc

在我的沙箱中，有一个新文件，一个更改的文件和一个删除的文件。

如果我运行“lscm checkin”。从根本上解决这个问题。
但我想知道，如果我想一个一个地处理它，即运行 lscm 状态 - 收集所有更改 - 对它们一一运行签入，我该如何处理已删除的文件。对已删除文件的 lscm 签入将返回一个错误，指出该文件不存在。
我想这样做，因为我的项目非常深，有大约 11K 的文件和大约 2K 的目录，因此希望通过仅对更改的文件运行 checkin 来获得一些性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:53:33.683

这篇[“使用 Rational Team Concert”文章](https://jazz.net/library/article/979/)确实提到：

> 当项目被删除时，有一种特殊的方法可以签入删除。
> **您以正常方式调用 checkin 命令，但您提供了已删除项目的父目录的路径，而不是项目本身的路径**。

因此，对于已删除的资源，似乎没有更细粒度的签入。

# proof - 当且仅当它解决当前目标时应用方法

> ID：15290300
> 
> 赞同：6
> 
> 时间：2013-03-08T09:07:20.233
> 
> 标签：proof, isabelle

有时，当我在写应用风格的证明时，我想要一种方法来修改证明方法 `foo`以

> 尝试`foo`第一个目标。如果它解决了目标，很好；如果没有解决，恢复到原始状态并失败。

这出现在以下代码中：

```
qed (subst fibs.simps, (subst fib.simps)?, simp add: nth_zipWith nth_tail)+ 
```

在进一步进行一些更改之后，对的调用`simp`将不再完全解决目标，然后这将循环。如果我可以指定类似的东西

```
qed (solve_goal(subst fibs.simps, (subst fib.simps)?, simp add: nth_zipWith nth_tail))+ 
```

或（替代建议的语法）

```
qed ((subst fibs.simps, (subst fib.simps)?, simp add: nth_zipWith nth_tail)!)+ 
```

或（也许更好的语法）

```
qed ((subst fibs.simps, (subst fib.simps)?, simp add: nth_zipWith nth_tail)[1!])+ 
```

它会停在这个脚本无法解决的第一个目标上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:40:47.657

Isabelle 没有这样的组合器，这也是我想念的。`auto`通常，如果我替换or`simp`调用`fastforce`or `force`（具有解决或失败行为），我可以避免对这种组合器的需要。

因此，如果`simp`您的示例中的 应该解决目标（不循环），

```
qed (subst fibs.simps, (subst fib.simps)?, fastforce simp: nth_zipWith nth_tail)+ 
```

可能是一个更强大的变体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-20T08:12:32.467

自从[Eisbach 证明脚本语言](https://isabelle.in.tum.de/dist/Isabelle2016/doc/eisbach.pdf)出现以来，现在就支持这一点。导入后`"~~/src/HOL/Eisbach/Eisbach"`可以替换

```
apply foo 
```

和

```
apply (solves ‹foo›) 
```

`solves`如果产生任何新目标，这条线将失败。这可以与`[1]`如下组合

```
apply (solves ‹(auto)[1]›) 
```

如果需要。

的定义`solves`其实很简单：

```
method solves methods m = (m; fail) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T00:17:14.220

虽然没有可用的内置策略或组合器，但您可以自己实现一个，如下所示：

```
ML {*
fun solved_tac thm =
  if nprems_of thm = 0 then Seq.single thm else Seq.empty
*}

method_setup solved = {*
  Scan.succeed (K (SIMPLE_METHOD solved_tac))
*} 
```

这创建了一个新方法`solved`，如果当前目标已完全解决，则该方法将成功，如果仍然存在一个或多个子目标，则该方法将失败。

例如，它可以按如下方式使用：

```
lemma "a ∨ ¬ a "
  apply ((rule disjI1, solved) | (simp, solved))
  done 
```

如果没有该`solved`子句，Isabelle 将选择步骤的`rule disjI1`一侧，给`apply`您留下一个无法解决的目标。`solved`Isabelle 尝试使用每一边的子句`rule disjI1`，当它未能解决目标时，切换到`simp`即成功的子句。

这可以通过使用 Isabelle 的`(...)[1]`语法来解决个人目标。例如，以下语句将尝试使用 解决尽可能多的子目标，但如果无法完全解决`simp`子目标，则将保持子目标不变：`simp`

```
apply ((simp, solved)[1])+ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T22:25:18.417

Isabelle 的 Isar 语言不提供该功能。这是故意的，而不是错误，如[isabelle 开发人员列表中所述](https://mailmanbroy.informatik.tu-muenchen.de/pipermail/isabelle-dev/2013-March/003913.html)：

> Isar 证明方法语言以某种方式设计，以达到证明文本中某些操作方面的“风格化”规范。它故意排除了任何类型的编程或复杂的控制结构。

# node.js - 为什么 connect-mongo 为每个请求创建新会话？

> ID：15290301
> 
> 赞同：8
> 
> 时间：2013-03-08T09:07:24.413
> 
> 标签：node.js, mongodb, authentication, express, passport.js

我有两个 nodejs 服务器（web-server、socket-server），它们通过 socket.io 相互连接。在 web 服务上，我使用 express.js 和 passport.js 作为身份验证中间件。

这是我的网络服务器配置：

```
var express = require('express'),
    mongo = require('mongodb'),
    io = require('socket.io'),
    passport = require('passport'),
    LocalStrategy = require('passport-local').Strategy,
    MongoStore = require('connect-mongo')(express);

app.configure(function () {
    app.use(express.cookieParser());
    app.use(express.methodOverride());
    app.use(express.bodyParser());
    app.use(express.session({
        secret: 'keyboard cat',
        store: new MongoStore({
          db: 'MyDatabase'
        })
    }));
    app.use(passport.initialize());
    app.use(passport.session());
    app.use(app.router);
    app.use(express.static(__dirname + '/htdocs'));
}); 
```

**当我使用 connect-mongo 时，它会为每个 http 请求创建一个新会话。**

此元素使用登录请求创建：

```
{
  "_id" : "UCnXade6Bk6ofOZ+jiEgzyH8",
  "session" : "{\"cookie\":{\"originalMaxAge\":31536000000,\"expires\":\"2014-03-07T13:07:45.703Z\",\"httpOnly\":true,\"path\":\"/\"},\"passport\":{\"user\":\"50cae08806e31ea2e5634e3f\"}}",
  "expires" : new Date("7.3.2014 19:07:45")
} 
```

每次按 F5 或使用套接字时，都会创建此元素。

```
{
  "_id" : "JhypbYFtj1CGOK/ylMhG8+Yk",
  "session" : "{\"cookie\":{\"originalMaxAge\":null,\"expires\":null,\"httpOnly\":true,\"path\":\"/\"},\"passport\":{}}",
  "expires" : new Date("21.3.2013 19:03:38")
} 
```

当 web-server 进行套接字连接时，connect-mongo 会创建新会话。每分钟大约有 50 个新文档。

可能是什么原因？

**更新**

在更新页面的情况下，帮助提示添加`app.use(express.favicon())`.

使用套接字的问题仍然是实际的。

我的套接字服务器代码

```
function sendPortalJSON (portal_id, data, _event) {
    https.get({
        host : ....,
        port : ....,
        path : "/" + _event + "?data=" + encodeURIComponent( JSON.stringify (data))
    }).on('error', function (err) {

    });
}
...
sendPortalJSON(1, agent_data[i].d, "cpu-details"); 
```

在网络服务器上：

```
app.get('/cpu-details', function (req, res) { }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:14:23.667

首先，尝试将静态中间件移动到会话中间件之前。此外，有些浏览器处理的请求`/favicon.ico`有点古怪，所以请尝试使用`express.favicon()`它来查看它是否能解决您的问题。

所以是这样的：

```
...
app.use(express.favicon());
app.use(express.static(__dirname + '/htdocs'));
app.use(express.session({...});
... 
```

# c# - 如何从点击事件中显示全尺寸的图像？

> ID：15290306
> 
> 赞同：0
> 
> 时间：2013-03-08T09:07:49.867
> 
> 标签：c#, winforms, gridview

我正在使用 a`GridView`在应用程序中显示一些表格数据`WinForm`。
我有一个表列，它存储为 VarBinary 数据类型，其中包含我的图像数据。

单击其中一个时，如何显示全尺寸图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T09:16:45.603

我只是不得不做类似的事情，所以我会给你代码

```
Form frm = new Form();
PictureBox pb = new PictureBox();
//pb.Image = Image.FromFile("my.bmp");
pb.Image = myImage;
pb.Dock = DockStyle.Fill;
frm.Controls.Add(pb);
frm.WindowState = FormWindowState.Maximized;
frm.ShowDialog(); 
```

# sql - T-SQL 中的行连接

> ID：15290313
> 
> 赞同：0
> 
> 时间：2013-03-08T09:08:27.537
> 
> 标签：sql, sql-server-2008, tsql

我使用 SQL Server 2008，我必须三个表、产品、产品标签和标签。

```
Products
-----------------
Id | Name

ProductTags 
------------------
Id | ProductId | TagId

Tags
------------------
Id | Name 
```

我正在尝试创建一个查询，该查询返回的结果包含第一列中的产品 id 以及与第二列中连接的产品关联的标签的名称，如下所示：

```
productid | Tags
-------------------------------------
1           tag1, tag2, tag3
2           tag2, tag3 
```

我知道这可以通过`FOR XML PATH('')`某种方式来完成，但我可以做到这一点。使用`FOR XML`并不重要。任何会产生结果的解决方案都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:13:50.033

```
SELECT
     c.ID, c.Name ProductName,
     STUFF(
         (SELECT    ',' + b.name
          FROM  ProductTags a
                INNER JOIN Tags b
            ON a.TagID = b.ID
          WHERE  a.ProductID = c.ID
          FOR XML PATH (''))
          , 1, 1, '')  AS TagListList
FROM Products AS c
GROUP BY c.Name, c.ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/e601d/3)

# php - 一种自动插入gettext调用的方法？

> ID：15290314
> 
> 赞同：2
> 
> 时间：2013-03-08T09:08:38.513
> 
> 标签：php, internationalization, gettext

我在 PHP 中使用 gettext 来国际化一些代码，所以我正在浏览它并更改如下代码：

```
<h1>Hello world</h1> 
```

对此：

```
<h1><?php echo gettext('Hello world'); ?></h1> 
```

但是，我继承的代码非常大，并且有很多需要翻译的字符串 - 所以我想知道是否有办法自动执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:59:57.193

**方法 3：将源 php 文件解析为带有处理指令的 HTML，或者“真正的 php 文档是什么”**

这并不完美，但它是一个起点：

```
$dom = new DOMDocument();

// load source
$dom->loadHTML('
  <html>
   <body>
    <h1>I\'m a title</h1>
    <p>My name is <?php echo $myname; ?></p>
    <style>
       p { margin-bottom: 1em; }
    </style>
    <script>
       alert(\'a really funny script that we don\\\'t want to enclose\');
    </script>
   </body>
  </html>');

//get all text nodes
$xpath = new DOMXPath($dom);
$textnodes = $xpath->evaluate('/html/body//*[not(self::script)][not(self::style)]/text()');

//store a list of translation keys:
$keys = array();

//wrap text nodes into php processing instructions
foreach($textnodes as $node) {
  $content = $node->nodeValue;
  $keys[] = $content;
  $content = trim(addcslashes($content, '\\\''));
  $wrap = $dom->createProcessingInstruction('php', 'gettext(\'' . $content . '\'); ?');
  $node->parentNode->replaceChild($wrap, $node);
}

//output or save the result;
echo $dom->saveHTML();

//output or store the keys, a little help for creating the translation files
print_r($keys); 
```

在这里测试它：http: [//sandbox.onlinephpfunctions.com/code/559542d98e8ddc60eeb7e156888d9d2fda61b843](http://sandbox.onlinephpfunctions.com/code/559542d98e8ddc60eeb7e156888d9d2fda61b843)

上面的代码段输出：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
        <h1><?php gettext('I\'m a title'); ?></h1>
        <p><?php gettext('My name is'); ?><?php echo $myname; ?></p>
        <style>
           p { margin-bottom: 1em; }
        </style><script>
           alert('a really funny script that we don\'t want to enclose');
        </script></body></html>
Array
(
    [0] => I'm a title
    [1] => My name is 
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T09:28:03.380

我认为这将是非常困难的。以下是一些潜在的方法及其问题。

**方法一：解析 PHP 文件**

1.  用于[`token_get_all()`](http://www.php.net/manual/en/function.token-get-all.php)解析 PHP 源文件。
2.  查找所有`T_INLINE_HTML`标记，它们代表文件中不是 PHP 代码的部分。
3.  在文件的这些部分中查找和替换文本。

*问题：可靠地找到要替换的文本的唯一方法是[解析 HTML](https://stackoverflow.com/q/3577641/1919238)。但是文件的非 PHP 部分无法自行解析。它们是零散的，并且依赖于内联 PHP 代码来生成完整的、可解析的文件。*

**方法 2：解析输出 HTML 文件**

1.  从浏览器保存站点的输出 HTML 文件。这将为您提供完整的 HTML 文件以进行解析。
2.  [解析那些 HTML 文件](https://stackoverflow.com/q/3577641/1919238)，保存需要替换的文本字符串。
3.  返回原始 PHP 文件，搜索那些文本字符串并替换它们。

*问题：您再次面临无法解析PHP文件的问题。在这种情况下，一个简单的正则表达式方法会更好，因为您正在搜索精确的字符串，但它仍然不是 100% 可靠的。而且您将无法分辨 HTML 源代码的哪些部分来自 HTML，以及哪些部分是由 PHP 生成的。*

我认为你最好用手来做这件事。在你的编辑器中让自己成为一个好的键盘宏，这样一旦你选择了文本，你就可以一键将其转换为 PHP 函数。

# c - 使用 FCGI 将 C 中的应用程序连接到 html 表单

> ID：15290318
> 
> 赞同：2
> 
> 时间：2013-03-08T09:08:58.217
> 
> 标签：c, iis-7, fastcgi

我有一个带有硬编码数据的 html 表单。我已将索引文件作为网站添加到 iis 并使其在浏览器中运行。现在我不想硬编码 d 数据，而是将输入数据从 C 或 C++ 或 C# 应用程序发送到表单通过 FCGI.Besides 在表单中我编写了单击 ok() 以更新输入数据和 show() 以从服务器获取更新数据的函数（数据作为 json 传递）。我已经在 html 中注释掉了服务器部分到目前为止的表单。html 表单包含字段名称：Id：Rate://Dropdownbox time://radio button ...等字段。

# oauth-2.0 - 使用“https://www.googleapis.com/auth/drive”范围时出错

> ID：15290320
> 
> 赞同：3
> 
> 时间：2013-03-08T09:09:00.920
> 
> 标签：oauth-2.0, google-drive-api, google-oauth

**google-api-java-client 版本：** google-api-1.13.2-beta.jar **Java 环境：** Java 6

描述问题。

我有个问题。我想使用 OAuth 2.0 for Devices 访问 Google Drive。`"https://www.googleapis.com/auth/drive"`使用范围是错误的。当您使用`"https://docs.google.com/feeds/"`in 范围时，我成功了。我想知道我是否使用`"https://docs.google.com/feeds/"`来使用“DriveAPI” I。这是正确的用法吗？

**要求：**

```
POST https://accounts.google.com/o/oauth2/device/code HTTP/1.1

client_id=xxxxx.apps.googleusercontent.com&scope=https://www.googleapis.com/auth/drive

Response: {   "error" : "invalid_scope" } 
```

* * *

**回复：**

```
POST https://accounts.google.com/o/oauth2/device/code HTTP/1.1

client_id=xxxxx.apps.googleusercontent.com&scope=https://docs.google.com/feeds/

Response:
{
  "device_code" : "4/e6HcZHKPz-eExgLb_Ll9V8qoT1NP",
  "user_code" : "zzwiv48b",
  "verification_url" : "http://www.google.com/device",
  "expires_in" : 1800,
  "interval" : 5
} 
```

您希望它如何修复？我认为可以在“ [https://www.googleapis.com/auth/drive](https://www.googleapis.com/auth/drive) ” I的范围内进行身份验证。

[developer.google.com](https://developers.google.com/accounts/docs/OAuth2ForDevices)

[stackoverflow.com](https://stackoverflow.com/questions/11323335/google-drive-sdk-mobile-integration-query)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:53:58.107

You are missing an h in the protocol. Try **[https://docs.google.com/feeds/](https://docs.google.com/feeds/)** instead of **ttps://docs.google.com/feeds/**. Apply the same change to all your scope urls

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-08T20:28:09.440

来自关于“将 OAuth 2.0 用于设备”的 Google 文档（[https://developers.google.com/identity/protocols/OAuth2ForDevices#allowedscopes](https://developers.google.com/identity/protocols/OAuth2ForDevices#allowedscopes)）：

> 当您对设备使用 OAuth 2.0 流程时，您只能访问以下范围：
> 
> *   分析配置和报告 API
> *   日历 API
> *   联系人 API
> *   云打印 API
> *   云存储 API
> *   健身 REST API
> *   融合表 API
> *   谷歌登录
> *   YouTube 数据和直播 API

我在此列表中没有看到 Drive API，我认为这是“invalid_scope”错误的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T08:35:56.223

我有完全相同的问题。我已按照开发文档中的说明进行操作，并在请求中使用**“www.googleapis.com/auth/drive”作为我的范围。**最终，我在响应中得到了“invalid_scope”。

所以我尝试使用**“www.googleapis.com/auth/devstorage.full_control”**作为范围，它起作用了！提示来自：[https ://cloud.google.com/storage/docs/authentication#oauth](https://cloud.google.com/storage/docs/authentication#oauth)

但！！当我使用我创建的访问令牌列出谷歌驱动器帐户信息时，我收到错误代码 403 并且消息是“权限不足”。

这是我用来请求帐户信息的内容： curl -H "Authorization: Bearer $ACCESS_TOKEN" [https://www.googleapis.com/drive/v2/about?key=](https://www.googleapis.com/drive/v2/about?key=) $APP_KEY

这真的让我很困惑......

# tortoisehg - tortoisehg 2.7.1 的“hg add”不起作用

> ID：15290321
> 
> 赞同：0
> 
> 时间：2013-03-08T09:09:02.413
> 
> 标签：tortoisehg, bitbucket

我在我的笔记本电脑和 PC 上都试过了（操作系统是 Win7 Enterprise x64），它们都不起作用。

测试过程非常简单：

1.  在 bitbucket 中应用帐户

2.  创建一个名为“test”的私有存储库

3.  下载“tortoisehg-2.7.1-hg-2.5.2-x64.msi”并安装（安装时不要更改任何默认设置）

4.  创建本地文件夹，运行命令“hg clone htts:.....”，克隆成功

5.  配置 UserPofile\mercurial.ini，添加以下部分

    [用户界面]

    用户名 = xxx xxx 邮箱

6.  在“test”文件夹中创建一个包含“foo”字符串的测试文件“foo.foo”

7.  运行命令“hg stat”，得到输出“?foo.foo”

8.  运行命令“hg add”，得到输出“adding foo.foo”

9.  运行命令“hg stat”，得到输出“?foo.foo”

10.  运行命令“hg commit -m”test”，得到输出“nothing changed”

11.  运行命令“hg log”，什么也不输出

我不知道为什么在第 9 步中我仍然得到“？foo.foo”而不是“A foo.foo”，有人遇到过类似的问题吗？

另一个奇怪的事情是在我的电脑中，第一个添加的文件可以成功添加/提交/放置，然后我再也无法添加文件，即使我删除了当前的存储库并创建了一个新的

我花了两天时间寻找根本问题，但似乎很少有人遇到这个问题。有人可以帮帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:53:21.573

看不到问题

*   在 x86 版本上
*   经验框
*   在同一版本的 TortoiseHG 上

`hg init`repo 与添加文件的效果相同，顺便说一句

```
>hg stat
? .hgignore
? file.txt

>hg add
adding .hgignore
adding file.txt

z:\test>hg status
A .hgignore
A file.txt

>hg commit -m "initial data"

>hg log
changeset:   0:3cc2ddcb0417
tag:         tip
user:        I
date:        Fri Mar 08 17:47:56 2013 +0600
summary:     initial data 
```

# jsf-2 - JSF 中的手动 Ajax

> ID：15290322
> 
> 赞同：2
> 
> 时间：2013-03-08T09:09:03.653
> 
> 标签：jsf-2, primefaces

是否可以在 JSF 中手动发送 ajax 请求？如果可能，请指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:20:44.433

当您使用 Primefaces 时，这里有 JavaScript API。您可以使用它`PrimeFaces.ajax.AjaxRequest`来执行此操作。有关此内容，请参阅 Primefaces 用户指南，但简单的示例是：

```
PrimeFaces.ajax.AjaxRequest({
    formId: 'userForm',
    source: 'userForm',
    process: 'userForm'
}); 
```

这是来自用户指南的示例。

此外，`p:remoteCommand`如果这更接近您的用例，您可以使用该组件创建 JavaScript 函数以从支持 bean 调用某些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:23:59.257

Checkout [OmniFaces`<o:commandScript>`标签](http://showcase.omnifaces.org/components/commandScript)，看起来很漂亮。还包含许多其他用于 JSF 项目的有趣实用程序。

# android - 向 getSharedPreferences() 提供 Context.MODE_MULTI_PROCESS 是否会使共享首选项线程安全？

> ID：15290323
> 
> 赞同：3
> 
> 时间：2013-03-08T09:09:04.450
> 
> 标签：android, multithreading, thread-safety, sharedpreferences

`SharedPreferences`不是线程安全的，正如[Android 文档](http://developer.android.com/reference/android/content/SharedPreferences.html)中明确指出的那样：

> 注意：目前此类不支持跨多个进程使用。这将在稍后添加。

`java.util.Threads`但是，我有一个应用程序可以触发其他六个`commit()`共享首选项，并且它们可能会同时触发（尽管不太可能全部触发）。这就是为什么我总是以这种方式从每个线程中获取对我的共享首选项的引用：

```
SharedPreferences prefs = getSharedPreferences(This.PREFS, Context.MODE_MULTI_PROCESS); 
```

但是，我不确定这是否使共享首选项引用线程安全。

例如，当六个线程中的两个同时被触发并调用`commit()`时，其中一个线程会等到另一个完成提交后再继续提交自己的更改，还是完全不提交？`commit()` [文档](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit%28%29)中的以下行对我来说听起来不清楚：

> 请注意，当两个编辑器同时修改首选项时，最后一个调用 commit 的人获胜。

这里的“赢”是什么意思？为什么会突然变成两个线程之间的“较量”？

**添加 3/11/2013：**每个线程修改共享首选项中的不同条目——它们没有修改相同的键值条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:11:20.077

根据这个答案，共享首选项是线程安全的。Android 文档所说的是它们不是**多进程安全的**。

[https://stackoverflow.com/a/4695567/855680](https://stackoverflow.com/a/4695567/855680)

# jquery - jquery垂直幻灯片在网格上扩展图片库

> ID：15290324
> 
> 赞同：2
> 
> 时间：2013-03-08T09:09:06.497
> 
> 标签：jquery, image, grid, gallery

我已经搜索并搜索了一个图片库以符合一组特定的标准，但没有运气。

这是一个完美的例子：[http ://theofficialbrand.com/collections/all](http://theofficialbrand.com/collections/all)

它本质上与在谷歌图像中搜索的效果相同。

网格上的图像缩略图库，悬停功能不是必需的。单击时，水平部分向上滑动或向下扩展，显示更多内容（左侧为全尺寸图像，右侧为图像或产品信息。）缩略图不需要影响，只需垂直扩展以允许扩展的空间。它还需要收缩或消失的能力，就像单击另一个图像或产品时一样。

我希望可能已经开发了一个画廊，与此类似，因为我对编写 jquery / javascript 并不是非常熟悉。如果可以操纵和组合多个 jquery 代码片段来创建它，我对 html、css 以及修改预先编写的代码相当有能力。我想避免使用灯箱，因此我对这种类型的画廊很感兴趣。

也许，我只是用错误的术语搜索，以找到我正在寻找的东西，或者我过于复杂了。任何帮助将不胜感激，我希望我不是在问已经多次解决的问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T00:28:23.403

CoDrops 有一个涵盖此内容的新教程：http: [//tympanus.net/codrops/2013/03/19/thumbnail-grid-with-expanding-preview/](http://tympanus.net/codrops/2013/03/19/thumbnail-grid-with-expanding-preview/)

# view - 在 extjs 中，如何将商店绑定到作为项目包含在其他视图中的视图

> ID：15290326
> 
> 赞同：1
> 
> 时间：2013-03-08T09:09:08.847
> 
> 标签：view, extjs4, store

我在 extjs 工作。我的看法是-QbqnsResultmain.js

```
Ext.define('Balaee.view.qb.qbqns.QbqnsResultmain',  
        {
    extend:'Ext.form.Panel',
    requires:[
              'Balaee.view.qb.qbqns.QbqnsResult'
              ],
              id:'QbqnsResultmainId',
              alias:'widget.QbqnsResultmain',
              title:'Result',
              height:400,
              items:[
                     {
                         xtype:'QbqnsResult',

                     },
                     ],
                     buttons:[
                              {
                                  xtype:'button',
                                  fieldLabel:'review',
                                  action:'getreview',
                                  name:'review',
                                  formBind:true,
                                  text:'Review',

                              },
                              {
                                  xtype:'button',
                                  fieldLabel:'papers',
                                  action:'getpapers',
                                  name:'papers',
                                  formBind:true,
                                  text:'Get all papers',
                             },
                           ]}); 
```

和 QbqnsResult.js-

```
Ext.define('Balaee.view.qb.qbqns.QbqnsResult',
{
        extend:'Ext.view.View',
        id:'QbqnsResultId',
        alias:'widget.QbqnsResult',
        //store:'kp.PollStore',
        store:'qb.QbqnsStore',
        config:
        {
            tpl:'<tpl for="1">'+
                '<div id="main">'+
                '</br>'+
                //'<b>Question :-</b></br>'+
                '<h1 id="q">Total number of Questions are:-</h1>{TotalQuestions}</br>'+
                '<h1 id="q">Number of attempted Questions:-</h1> {Attempted}</br>'+
                '<h1 id="q">Number of correct answers:-</h1> {CorrectAnswers}</br>'+
                '<h1 id="q">Total score:-</h1> {Total}</br>'+
                '<h1 id="q">Score you got is:-</h1> {Score}</br>'+
                '<h1 id="q">percentage you got is:-</h1> {percentage}</br>'+

            '<p>---------------------------------------------------------</p>'+
                '</div>'+
                '</tpl>',
            itemSelector:'div.main',    
        }
}); 
```

单击提交按钮时，我想显示上面的视图。所以我在控制器中编写了代码 -

```
check:function()
    {
    var resultStore=Ext.create('Balaee.store.qb.QbqnsStore');
            proxy=resultStore.getProxy();
            Ext.apply(proxy.api,{
            read:'index.php/QuestionBank/qbpaper/getResult',
            create:'index.php/QuestionBank/qbpaper/getResult'
            });

            Ext.apply(proxy.reader,{
                type:'json',
                //root:'polls',
                root:'questions'
            });

            Ext.apply(proxy.writer,{
                type:'json',
                //root:'polls',
                root:'data'
            });

        var getdata=this.getLocalvalue();
        console.log(getdata.data);
        Paperno=getdata.data.questionPaperNo;
        UserId=getdata.data.userId;

        var answers = '{"data":[';
        answers = answers + '{"paperNo":"'+Paperno+'","userId":"'+UserId+'"}';
        answers =answers+']}';
        console.log(answers);

        resultStore.load({
            params:{
                data: answers
            },
            callback: function(records,operation,success){
                console.log(records);
                console.log("Successfully data send");
            },
            scope:this
        });

        var temp= Ext.getCmp('qbqnsId');
        temp.removeAll();

        var worldChaptor3 =temp.add({xtype:'QbqnsResultmain',
                id:'QbqnsResultmainId',
                store:resultStore});

}, 
```

所以我想将 resultStore 绑定到 QbqnsResult 视图的 tpl，我已将其作为 xtype 包含在 QbqnsResultmain 视图中。但是 resultStore 绑定到 Qbqnsresultmain 视图而不是 Qbqnsresult ，后者通过其 xtype 作为项目包含在其中。那么如何将 store 绑定到它。有人可以指导我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:06:34.463

一种方法可以是：

```
var worldChaptor3 =temp.add({xtype:'QbqnsResultmain',
            id:'QbqnsResultmainId',
            store:resultStore});

worldChaptor3.down('QbqnsResultmain > QbqnsResult').bindStore(resultStore); 
```

But, it would be better if you do it in your `QbqnsResultmain`, i'll do it on the `afterrender` event, that way, you can bind the store automatically on creation.

# javascript - 为什么我在此脚本中未定义

> ID：15290327
> 
> 赞同：-2
> 
> 时间：2013-03-08T09:09:10.267
> 
> 标签：javascript

试图输出日期加上 30 天。我今天加载了脚本，当天显示“未定义”，脚本的其余部分都可以。'未定义，2013 年 4 月 7 日'。

这是我的脚本：

```
// handle the due date
var dayNames = new Array("Sunday","Monday","Tuesday","Wednesday", "Thursday","Friday","Saturday");
var monthNames = new Array("January","February","March","April","May","June","July", "August","September","October","November","December");    
var todayPlus30 = new Date();
todayPlus30.setDate(todayPlus30.getDate()+30)
var dateStr = (dayNames[todayPlus30.getDate()] + ", " + monthNames[todayPlus30.getMonth()] + " " +  todayPlus30.getDate()  + ", " +  todayPlus30.getFullYear());

$('#date').html(dateStr); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:12:27.257

您的 dayNames 数组有 7 个元素，因此它有来自 dayNames[0] .. dayNames[6] 的元素。

当你在这里引用它时：

```
dayNames[todayPlus30.getDate()] 
```

您正在尝试访问未定义的 dayNames[7]。这是因为 todayPlus30.getDate() 返回 7 （[getDate()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDate) “返回月份中的日期”（根据 MDN）。

将其更改为：

```
dayNames[todayPlus30.getDay()] 
```

获取星期几。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:11:50.023

对于一周中的（整数）天，您想要`getDay`，而不是`getDate`。

# c# - 检查位图以进行图像验证 c#

> ID：15290329
> 
> 赞同：0
> 
> 时间：2013-03-08T09:09:12.520
> 
> 标签：c#, winforms, bitmapimage

我正在检查文档的四个角以检查是否会有图像。我怎么可能用我的以下代码做到这一点。我得到了文档的所有四个角，但我想得到哪个角有图像（二维码），然后将那个角传递给之后的方法。

**代码：**

```
using (var fullImg = new Bitmap(workGif))
                {

                    Bitmap result = fullImg;
                    //top-left
                    var bandImg1 = result.Clone(new System.Drawing.Rectangle(0, 0, result.Width/2, result.Height/2), fullImg.PixelFormat);

                    //top-right
                    var bandImg2 = result.Clone(new System.Drawing.Rectangle(result.Width / 2, 0, result.Width / 2, result.Height / 2), fullImg.PixelFormat);
                    //bottom-left
                    var bandImg3 = result.Clone(new System.Drawing.Rectangle(0, result.Height / 2, result.Width / 2, result.Height / 2), fullImg.PixelFormat);
                    //bottom-right
                    var bandImg4 = result.Clone(new System.Drawing.Rectangle(result.Width / 2, result.Height / 2, result.Width / 2, result.Height / 2), fullImg.PixelFormat);

                    Bitmap[] corners = new Bitmap[] { bandImg1, bandImg2, bandImg3, bandImg4 };
                    string QRinfo = "";
                    for (int i = 0; i < corners.Length; ++i)
                    {
                        string tempQRinfo = Process(corners[i]);
                        if (tempQRinfo == null)
                        {
                            QRinfo = tempQRinfo;
                            switch (i)
                            {
                                case 0: break; //upper left
                                case 1: fullImg.RotateFlip(RotateFlipType.Rotate270FlipNone); break;
                                case 2: fullImg.RotateFlip(RotateFlipType.Rotate90FlipNone); break;
                                case 3: fullImg.RotateFlip(RotateFlipType.Rotate180FlipNone); break;
                            }
                            break;
                        }
                    } 
```

**处理方法**

```
public string Process(Bitmap bitmap)
    {
        var reader = new com.google.zxing.qrcode.QRCodeReader();

        try
        {
            LuminanceSource source = new RGBLuminanceSource(bitmap, bitmap.Width, bitmap.Height);
            var binarizer = new HybridBinarizer(source);
            var binBitmap = new BinaryBitmap(binarizer);
            return reader.decode(binBitmap).Text;
        }
        catch (Exception e)
        {
            return e.Message;
        }
    } 
```

# lua - 使用 tolua++ 导航 Lua 类层次结构

> ID：15290338
> 
> 赞同：2
> 
> 时间：2013-03-08T09:09:43.463
> 
> 标签：lua, tolua++

我需要在 Lua 中导航表示从 tolua++ 绑定的 C++ 类层次结构的元表层次结构。

例如，假设我在 C++ 中有一个类 CFoo，它已被 tolua++ 绑定。在 Lua 中，我可以创建这个类的一个实例（它变成一个 userdata 类型），如下所示：

```
local s = CFoo.new() 
```

我可以通过以下方式获取元表：

```
local mt = getmetatable(s) 
```

我可以按如下方式检查此类的绑定成员：

```
for i,v in pairs(mt[".get"]) do
    -- Blah...
end 
```

但是，mt[".get"] 仅包含在此类中显式绑定的成员，而不包含在任何父类中绑定的成员。我需要遍历所有绑定成员，包括父类中的成员。

通过检查 tolua++ 源代码，似乎 tolua++ 在“tolua_super”全局表中保存了超类信息。但目前尚不清楚如何从 Lua 方面进行导航。

# ios - Jwplayer 6：点击播放视频时 html5 全屏

> ID：15290340
> 
> 赞同：1
> 
> 时间：2013-03-08T09:09:45.600
> 
> 标签：ios, html, video, jwplayer, android-fullscreen

我希望能够使用 jwplayer 以便当用户单击视频时，视频将开始以全屏模式播放。

我希望此功能可以在支持 html5 的移动设备上运行。

如果视频在移动设备上播放，它将占据整个屏幕。Youtube 和 Vimeo 目前在移动设备上执行此操作。

下面的链接使用 Html5 视频标签，当点击视频时，它会在移动设备上全屏播放。

我知道 jwplayer 允许全屏的唯一方法是我手动单击全屏按钮，但最好只单击视频以触发视频全屏播放。

# javascript - JavaScript 删除确认框

> ID：15290347
> 
> 赞同：0
> 
> 时间：2013-03-08T09:10:00.010
> 
> 标签：javascript

我的功能是这样的：

```
function delete(type, id){
    if(id){
        window.location.href = '/site/'+type+'/delete/'+id;
    }
} 
```

我这样称呼它：

```
onclick="delete('position', <?php echo $key;?>) 
```

我应该在函数的哪个位置放置“确认”选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:12:01.377

试试这个：

```
function deleteIt(type, id)
{
    if(id && confirm('Are you sure you want to delete?'))
    {
        window.location.href = '/site/'+type+'/delete/'+id;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:14:25.190

```
function delete(type, id)
{
    if(id && (confirm('Are you sure you want to delete?')))
    {
        window.location.href = '/site/'+type+'/delete/'+id;
    }
} 
```

# c++ - 确定 WM_SYSCOMMAND 或 WM_ENTERMENULOOP 激活了哪些菜单项？

> ID：15290350
> 
> 赞同：1
> 
> 时间：2013-03-08T09:10:08.423
> 
> 标签：c++, api, winapi

在 Win32 API 中，在 windows 消息中假定一个菜单

&文件 -- &编辑 -- &查看

用户单击文件。一个 WM_SYSCOMMAND (WParam = SC_MOUSEMENU 或者 SC_KEYMENU) 然后一个 WM_ENTERMENULOOP 被发送。用户单击编辑。相同的。

我想知道在它弹出之前将要显示哪个。是&File，是&Edit 被激活了吗？

它看起来不像提供此信息的 WM_SYSCOMMAND 或 WM_ENTERMENULOOP 传递信息。有没有办法可以确定这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:15:11.347

那将是[WM_INITMENUPOPUP](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646347.aspx)。

该消息被发送到所有者窗口。它的`wParam`参数包含`HMENU`即将显示的弹出菜单的 。

其参数的低位字`lParam`指定打开弹出菜单的菜单项的索引，其高位字是`TRUE`弹出菜单是否为系统菜单，`FALSE`否则为其他。

# dependency-injection - Ninject 绑定所有实现相同接口的类

> ID：15290353
> 
> 赞同：14
> 
> 时间：2013-03-08T09:10:17.583
> 
> 标签：dependency-injection, ninject

我有一个接口类：

```
public interface IStartUpTask
{
    bool IsEnabled { get; }
    void Configure();
} 
```

我有多个实现相同接口的类

其中一个类如下所示：

```
public class Log4NetStartUpTask : IStartUpTask
{
    public bool IsEnabled { get { return true; } }

    public void Configure()
    {
        string log4netConfigFilePath = ConfigurationManager.AppSettings["log4netConfigFilePath"];
        if (log4netConfigFilePath == null)
            throw new Exception("log4netConfigFilePath configuration is missing");

        if (File.Exists(log4netConfigFilePath) == false)
            throw new Exception("Log4Net configuration file was not found");

        log4net.Config.XmlConfigurator.Configure(
            new System.IO.FileInfo(log4netConfigFilePath));
    }
} 
```

我如何告诉 Ninject 我希望所有实现 的类`IStartUpTask`自动绑定到它们自己？

我找到了一个使用 StructureMap 执行此操作的示例，但我不知道如何在 Ninject 中执行此操作。

```
Scan(x => {
    x.AssemblyContainingType<IStartUpTask>();
    x.AddAllTypesOf<IStartUpTask>();
    x.WithDefaultConventions();
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T09:58:52.020

> 我如何告诉 Ninject 我希望所有实现 IStartUpTask 的类都自动绑定到它们自己？

首先，让我告诉您，Ninject 会自动将所有类绑定到自身。你不需要为此做任何特别的事情。

话虽如此，我知道如果您想更改范围或附加名称或元数据，您可能需要显式绑定。在这种情况下，请继续阅读。

我不知道是否可以在 vanilla ninject 中做你想做的事情，但你可以使用[ninject.extensions.conventions](https://github.com/ninject/ninject.extensions.conventions)。使用这个库你可以写：

```
Kernel.Bind(x => 
    x.FromThisAssembly()
    .SelectAllClasses()
    .InheritedFrom<IStartUpTask>()
    .BindToSelf()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:13:22.987

您可以在代码中显式调用它：

```
...
Bind<IStartUpTask>().To<Log4NetStartUpTask>();
Bind<IStartUpTask>().To<SomeOtherStartUpTask>();
... 
```

在 SomeClass 中使用它

```
public class SomeClass
{
   private readonly List<IStartUpTask> startUpTaskList;

   public SomeClass(IEnumerable<IStartUpTask> startUpTaskList)
   {
      this.startUpTaskList = startUpTaskList;
   }

   foreach (var startUpTask in this.startUpTaskList)
   {
      ...
   }
} 
```

# regex - 使用 powershell ForEach-Object 用正则表达式匹配和替换字符串

> ID：15290354
> 
> 赞同：7
> 
> 时间：2013-03-08T09:10:18.450
> 
> 标签：regex, powershell, replace, match

我使用下面的管道读取文件并替换其中的一行并将其保存到另一个文件，但发现目标文件中的字符串没有被替换，它仍然是旧的。

原行是：name-1a2b3c4d

新行应该是：name-6a5e4r3h

```
(Get-Content "test1.xml") | ForEach-Object {$_ -replace '^name-.*$', "name-6a5e4r3h"} | Set-Content "test2.xml" 
```

那里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T11:32:06.193

您缺少的一件事是 -replace 运算符在数组上工作得很好，这意味着您根本不需要那个 foreach-object 循环：

```
(Get-Content "test1.xml") -replace '^name-.*$', 'name-6a5e4r3h' | Set-Content test2.xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:19:27.723

您没有更改 $_ 变量。

你可以试试：

```
$lines = Get-Content $file
$len = $lines.count
for($i=0;$i-lt$len;$i++){
    $lines[$i] = $lines[$i] -replace $bad, $good
}
$lines > $outfile 
```

# mvvm - ICommand 是否总是需要一个对象作为参数？

> ID：15290357
> 
> 赞同：0
> 
> 时间：2013-03-08T09:10:34.683
> 
> 标签：mvvm, icommand, relaycommand

当我实现`ICommand`接口时，会创建以下方法

```
#region ICommand Members

    public bool CanExecute(object parameter)
    {
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
    }

#endregion 
```

有趣的部分是

```
public void Execute(object parameter)
{
} 
```

仅仅是因为它表明它需要 1 个参数。如果我不需要传递参数怎么办？在我的 ViewModel 我有以下代码

```
public class DownloadViewModel : BaseViewModel
{
    public ICommand BrowseForFile { get; set; }

    public string File { get; set; }

    public DownloadViewModel()
    {
        BrowseForFile = new RelayCommand(new Action<object>(OpenDialog));
    }

    private void OpenDialog(object o)
    {
        var dialog = new System.Windows.Forms.FolderBrowserDialog();
        System.Windows.Forms.DialogResult result = dialog.ShowDialog();
        File = dialog.SelectedPath;
    }
} 
```

该`OpenDialog`方法不需要参数，但似乎我必须这样做才能满足接口。

我这样做是对的还是我错过了重点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:28:41.433

`Execute`接受参数的事实与您的`ViewModel`. 唯一影响参数`OpenDialog`需求的是您对`ICommand`.

例如，如果您的实现是：

```
public class MyRandomCommand : ICommand
{
    private readonly Action _action;

    public MyRandomCommand(Action action)
    {
        _action = action;
    }

    public void Execute(object parameter)
    {
        _action();
    }

    ...
} 
```

然后，您的方法不需要任何参数`OpenDialog`，因为您可以按如下方式创建命令：

```
public ICommand Command { get { return new MyRandomCommand(OpenDialog); } } 
```

但是，对于传递给命令的方法，您可以要求任何您喜欢的签名。

最常见的、现成的实现`RelayCommand`可以采用带有 0 或 1 参数的方法，并将被`Execute`适当地调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:31:09.410

是的，`ICommand`总是需要一个对象`RelayCommand`。如果你不需要它，你传递 null 并且不要在你的方法中使用它，这很丑陋。

我会用棱镜`DelegateCommand`代替。这存在于不带参数的非通用版本中：

```
Command = new DelegateCommand(DoSomething);
CommandWithParameter = new DelegateCommand<int>(DoSOmethingWithInt); 
```

它在 PRISM 程序集中，您必须下载和参考。

```
using Microsoft.Practices.Prism; 
```

[棱镜](http://compositewpf.codeplex.com/)

或者，使用 MVVMLight 工具包，它提供了一个基本相同的命令类。无论如何，在没有 MVVM 框架的情况下使用 MVVM 是没有意义的。我可以推荐 PRISM，也因为它是基本的东西，比如`DelegateCommand`或`EventAggregator`.

# javascript - Mojito - 加载 NodeJS 模块

> ID：15290358
> 
> 赞同：1
> 
> 时间：2013-03-08T09:10:37.903
> 
> 标签：javascript, node.js, module, yui, mojito

我在用着 ：

*   莫吉托 0.5.5
*   NPM 1.2.14
*   节点JS 0.8.22

我正在尝试使用与 NPM 打包的 NodeJS 模块创建一个简单的 Mojito 应用程序。

[文档](http://developer.yahoo.com/cocktails/mojito/docs/topics/mojito_npm.html)说：

*   创建一个 Mojito 应用程序。
*   将任何需要的依赖项添加到 package.json 中的依赖项对象。
*   使用 npm 安装依赖项：{app_dir}$ npm install
*   当 Mojito 启动时，您的应用程序将可以访问已安装的 npm 模块。

事实上，上面的例子是行不通的。

```
"dependencies": {
    "mojito": "0.5.x",
    "async": "0.2.x"
},

status: function(ac) {
    var async = require('async');
    ac.done({
        status: 'loaded'
    });
} 
```

Mojito 服务器：“错误：找不到模块‘异步’”

网页错误：“错误：MODULE_NOT_FOUND”

有什么线索吗？

PS：当然，在**npm install**之后，项目文件夹有一个带有**async**包的**node_modules**文件夹。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:22:13.747

与今天一样，`mojito`npm 包用作 cli，但它也包含 mojito 核心。`mojito start`这是有问题的，因为大多数开发人员将通过从全局`mojito`包运行的doing 来运行应用程序。这一点，再加上当前的 YUI 与`require`.

解决方法很简单，确保你在应用程序本地安装mojito，并通过do`./node_modules/mojito/bin/mojito start`或do`node server.js`而不是`mojito start`.

除此之外，我们正在努力将 cli 和 core 拆分为单独的包，并等待`YUI 3.9.0`一劳永逸地解决这个问题，以便开发人员可以继续使用`mojito start`.**

# java - 删除列表视图中单击的项目的 ID

> ID：15290360
> 
> 赞同：0
> 
> 时间：2013-03-08T09:10:42.123
> 
> 标签：java, android, listview, listitem

```
| Icon(image) |       Title(text)    |  cross(image)  | 
|             |     Description(text)|                |
|             |                      |  coupon(image) | 
```

它是一个列表视图。在这里，我想在列表视图中单独单击时获取不同项目的 ID，例如交叉，优惠券，单击图标，然后我将获取他们的 ID...我是新手...请帮帮我....

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/list_item_iv_icon"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:contentDescription="@string/app_name"
    android:paddingLeft="10dp"
    android:paddingRight="10dp" />

<ImageView
    android:id="@+id/list_item_iv_icon_cross"
    android:layout_width="30dp"
    android:layout_height="30dp"
    android:layout_alignParentRight="true"
    android:clickable="true"
    android:contentDescription="@string/app_name"        
    android:src="@drawable/cross_selector" />

<TextView
    android:id="@+id/list_item_tv_title"
    android:layout_width="wrap_content"
    android:layout_height="30dp"
    android:layout_toRightOf="@+id/list_item_iv_icon"
    android:gravity="left"
    android:textColor="#CC0033"
    android:textIsSelectable="false"
    android:textSize="20sp" />

<TextView
    android:id="@+id/list_item_tv_desc"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/list_item_tv_title"
    android:layout_toRightOf="@+id/list_item_iv_icon"
    android:gravity="left"
    android:textColor="#3399FF"
    android:textIsSelectable="false"
    android:textSize="14sp" />

<ImageView
    android:id="@+id/list_item_iv_type"
    android:layout_width="100dp"
    android:layout_height="30dp"
    android:layout_alignBottom="@id/list_item_iv_icon"
    android:layout_alignParentRight="true"
    android:contentDescription="@string/app_name" />

</RelativeLayout> 
```

我知道如何获取点击列表的 id。我想知道如何获取列表中单击项目的项目 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:26:33.830

这是像我这样的新手的答案......

```
<ImageView
    android:id="@+id/list_item_iv_icon_cross"
    android:layout_width="30dp"
    android:layout_height="30dp"
    android:layout_alignParentRight="true"
    android:clickable="true"
    android:contentDescription="@string/app_name"        
    android:src="@drawable/cross_selector"
    android:onClick="onCrossClick" /> 
```

我在项目上使用了 onClick 并获得了它被点击的位置，我使用了

```
final int position = listView.getPositionForView((View) v.getParent()); 
```

完整代码：-

```
public void onCrossClick(View v) {

    final int position = listView.getPositionForView((View) v.getParent());
    Toast.makeText(this, "click on button " + position, Toast.LENGTH_LONG)
            .show();        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:38:32.507

检查下面的示例代码：

```
public class ListViewAdapter_test extends BaseAdapter {

            private LayoutInflater mInflater;

            public ListViewAdapter_test(Context con) {
                // TODO Auto-generated constructor stub
                mInflater = LayoutInflater.from(con);
            }

            public int getCount() {
                // TODO Auto-generated method stub
                return a_product_id.size();
            }

            public Object getItem(int position) {
                // TODO Auto-generated method stub
                // return product_id1.size();
                return position;
            }

            public long getItemId(int position) {
                // TODO Auto-generated method stub
                // return product_id1.get(position).hashCode();
                return position;
            }

            public View getView(final int position, View convertView,
                    ViewGroup parent) {
                // TODO Auto-generated method stub
                final ListContent holder;
                View v = convertView;
                if (v == null) {
                    v = mInflater.inflate(R.layout.scan_row1, null);
                    holder = new ListContent();

                    holder.name = (TextView) v.findViewById(R.id.sc_textname);

                    holder.name1 = (TextView) v.findViewById(R.id.sc_review);

                    holder.ratings = (RatingBar) v.findViewById(R.id.sc_ratingBar1);

                    holder.total_rate = (Button) v.findViewById(R.id.button1);

                    holder.img_p = (ImageView) v.findViewById(R.id.image_prod);

                    // holder.total_rate.setOnClickListener(mOnTitleClickListener1);

                    v.setTag(holder);
                } else {

                    holder = (ListContent) v.getTag();
                }

                holder.total_rate.setOnClickListener(mOnTitleClickListener3);

                holder.img_p.setOnClickListener(mOnTitleClickListener_image);

                return v;
            }
        }

        static class ListContent {

            ImageView img_p;
            TextView name1;
            TextView name;
            RatingBar ratings;
            Button total_rate;

        }

        public OnClickListener mOnTitleClickListener3 = new OnClickListener() {
            public void onClick(View v) {
                final int position = list_v
                        .getPositionForView((View) v.getParent());

                Log.d("you are click on Ratings","you are click on Ratings");

            }
        };

            public OnClickListener mOnTitleClickListener_image = new OnClickListener() {
            public void onClick(View v) {
                final int position = list_v
                        .getPositionForView((View) v.getParent());

                Log.d("you are click on image view","you are click on image view");

            }
        }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:51:53.390

以下是为列表视图设置侦听器的代码，该侦听器将捕获列表项选择事件。

```
listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> list, View view, int position,
                long id) {
            // To get the item from the list use the position value
            Object yourObject = yourAdapter.getItem(position);                                
        }
    }) 
```

# excel - 如何在itextSharp（dll）中保留原始旋转页面

> ID：15290361
> 
> 赞同：1
> 
> 时间：2013-03-08T09:10:42.490
> 
> 标签：excel, pdf, rotation, pdf-generation, itextsharp

我想创建项目，从 Excel 中读取并在 pdf 上书写并打印此 pdf。从 Excel 文件（从单元格）读取计算机或服务器上原始 pdf 的目录，下一个单元格包含第二个 pdf 顶部写的信息。

问题就在这里，原始 pdf 是水平的、横向的、旋转的，我的程序从原始 pdf 创建副本，并在复制 pdf 文件的顶部写入来自 excel 的信息。但是横向的pdf旋转270度。这不行。人像旋转工作程序OK，复制OK，在复制上面写就OK。我的代码中的问题在哪里。

代码：

```
public int urediPDF(string inTekst)
{
    if (inTekst != "0")
    {
        string pisava_arialBD = @"..\debug\arial.ttf";
        string oldFile = null;
        string inText = null;
        string indeks = null;
        //razbitje stringa
        string[] vhod = inTekst.Split('#');
        oldFile = vhod[0];
        inText = vhod[1];
        indeks = vhod[2];

        string newFile = @"c:\da\2";

        //odpre bralnik pdf
        PdfReader reader = new PdfReader(oldFile);                
        Rectangle size = reader.GetPageSizeWithRotation(reader.NumberOfPages);
        Document document = new Document(size);

        //odpre zapisovalnik pdf                
        FileStream fs = new FileStream(newFile + "-" + indeks + ".pdf", FileMode.Create, FileAccess.Write);
        PdfWriter writer = PdfWriter.GetInstance(document, fs);
        //document.Open();
        document.OpenDocument();
        label2.Text = ("Status: " + reader.GetPageRotation(reader.NumberOfPages).ToString());

        //določi sejo ustvarjanje pdf
        PdfContentByte cb = writer.DirectContent;

        //izbira pisave oblike
        BaseFont bf = BaseFont.CreateFont(pisava_arialBD, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);
        cb.SetColorFill(BaseColor.RED);
        cb.SetFontAndSize(bf, 8);

        //pisanje teksta v pdf
        cb.BeginText();
        string text = inText;

        //izbira koordinat za zapis pravilnega teksta v pdf (720 stopinj roatacija (ležeče) in 90 stopinj (pokončno))
        if (reader.GetPageRotation(1) == 720)               //ležeča postavitev
        {
            cb.ShowTextAligned(1, text, 10, 450, 0);
            cb.EndText();
        }
        else                                              //pokončna postavitev
        {
            cb.ShowTextAligned(1, text + " - pokončen", 10, 750, 0);
            cb.EndText();
        }

        // create the new page and add it to the pdf
        PdfImportedPage page = writer.GetImportedPage(reader, reader.NumberOfPages);
        cb.AddTemplate(page, 0, 0);

        // close the streams and voilá the file should be changed :)
        document.Close();
        fs.Close();
        writer.Close();
        reader.Close();
    }
    else
    {
        label2.Text = "Status: Končano zapisovanje";
        return 0;
    }
    return 0;
} 
```

图片假pdf：

![假PDF](../Images/cbc5e81a8efba20abc6e5f64ebc6c85c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T12:17:34.450

正如之前多次解释的那样（[ITextSharp 包括输入文件中的所有页面](https://stackoverflow.com/questions/15218126/itextsharp-include-all-pages-from-the-input-file/15218677#15218677)，[Itext pdf Merge : Document overflow outside pdf (Text truncated) page and not displayed](https://stackoverflow.com/questions/14770942/itext-pdf-merge-document-overflow-outside-pdf-text-truncated-page-and-not-di/14771651#14771651)，等等），您应该阅读我的[iText in Action](http://itextpdf.com/book)一书的[第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)（您可以在[此处](http://tinyurl.com/itextsharpIIA2C06)找到示例的 C# 版本）。

您正在使用和的组合`Document`来拆分 PDF。请告诉我是谁让你这样做的，这样我就可以诅咒启发你的人（因为我已经回答了数百次这个问题，而且我已经厌倦了重复自己）。这些类不是该工作的好选择：`PdfWriter``PdfImportedPage`

*   你失去了所有的交互性，
*   如果页面是横向的，您需要自己旋转内容，
*   您需要考虑原始页面大小，
*   ...

您的问题类似于这个[itextsharp: unexpected elements on mapped pages](https://stackoverflow.com/questions/15309651/itextsharp-unexpected-elements-on-copied-pages)。您有什么理由不阅读文档吗？如果你说：*“我没有时间”*，如果我说我有将近 20 年的开发经验，请相信我，而且我从未将“阅读文档”视为浪费时间。

长话短说：阅读文档，替换`PdfWriter`为`PdfCopy`，替换`AddTemplate()`为`AddPage()`.

# gwt - 将鼠标滚轮事件添加到绝对面板

> ID：15290362
> 
> 赞同：0
> 
> 时间：2013-03-08T09:10:44.320
> 
> 标签：gwt, mousewheel

我们可以在 GWT 的绝对面板中添加鼠标滚轮事件吗？我已经向绝对面板添加了一个鼠标滚轮事件，但它不起作用。为什么会出现这个问题，但如果我将它添加到标签，那么它可以正常工作。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:34:48.970

这是因为 AbsolutePanel 没有具体实现 HasAllMouseHandlers 接口 HasMouseWheelHandlers。Label 实现 HasMouseWheelHandlers 接口。所以它适用于标签。

您必须扩展 AbsolutePanel 并实现 HasMouseWheelHandlers 接口才能使其与 AbsolutePanel 一起使用。以及您必须定义的行为。

```
public class MyAbsolutePanel extends AbsolutePanel implements HasMouseWheelHandlers 
{
    public HandlerRegistration addMouseWheelHandler(MouseWheelHandler handler) 
    {  
        // Define the behavior here.
       return addDomHandler(handler, MouseOutEvent.getType());  
    }  
} 
```

# lexical-analysis - 列表的词法分析

> ID：15290367
> 
> 赞同：0
> 
> 时间：2013-03-08T09:11:00.290
> 
> 标签：lexical-analysis

我必须为具有（除其他外）表单列表的语言制作词法分析器，`[1,2,3]`例如 或`['c','s','q','t']`.

我真的不明白我是否需要在词法分析阶段匹配列表。所以，例如会

> 2：[1,2,3]；

是

> NUM(2) 冒号 LSQBRACKET NUM(1) 逗号 NUM(2) 逗号 NUM(3) RSQBRACKET SEMI

或者

> NUM(2) 冒号列表([1,2,3]) 半

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:17:40.767

从技术上讲，这取决于您。如果您只需要匹配非常简单的列表文字，那么也许您可以将它们视为字符串文字。（但是，这可能不是一个好方法）。

您通常希望词法分析器输出一系列简单的标记。词法分析器应该相对简单——一个经验法则是它永远不需要递归。

因此，例如，要求它输出“LIST”标记会适得其反——词法分析器必须在嵌套列表上递归，这意味着它将实现一个迷你解析器。将该工作留给解析器。

第一种情况使词法分析器更简单，这对于后期解析器仍然有用。

# scala - 播放 2 模板不识别代码，而是打印它

> ID：15290372
> 
> 赞同：0
> 
> 时间：2013-03-08T09:11:17.930
> 
> 标签：scala, playframework-2.0

我正在尝试使用 Scala 将 List 对象中的项目输出到屏幕上的 XML。我正在尝试使用以下代码：

```
@(suppliers: List[Supplier])

@import helper._
@import scala.xml._

@main("Suppliers and Parts") {

    var xmlSuppliers = <suppliers>{ suppliers.map(s => s.toXml()) }</suppliers>
    println(xmlSuppliers)

} 
```

但所发生的只是这两行代码被逐字写入屏幕。他们没有被解释。

如果我只是使用@supplier.id @supplier.name 等，我可以访问供应商列表的值，但我想将列表输出到屏幕上的 XML，而这对我来说并没有发生。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:12:04.033

您应该将代码包装在一个块中，或者以*模板*`@{}`方式重写您的代码：

 *```
<suppliers>
    @suppliers.map { s => @s.toXml() }
</suppliers> 
```*

# kindle - 更新其他屏幕上的信息

> ID：15290374
> 
> 赞同：0
> 
> 时间：2013-03-08T09:11:25.493
> 
> 标签：kindle

我需要在公共场所（餐厅 - 用餐时间菜单）显示一个 html 文件。

例如，此文件的地址为[http://example.com/today-menu.html](http://example.com/today-menu.html)

最好使用哪种阅读器（kindle 或其他）每天自动更新一次此菜单？wifi更新是否有可能 - 例如每10分钟检查一次？

我需要最便宜的变体（便宜的阅读器，节能 - 例如在 10 分钟内连接到 wifi 一次）并使其 100% 自动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:15:04.120

这应该为你做`<meta http-equiv="refresh" content="5">`。把它放在你的`<head />`

`content`指定刷新频率（以秒为单位）。

这应该让任何符合标准的浏览器自动刷新页面。

# python - 函数返回语句期间的Python内存错误

> ID：15290375
> 
> 赞同：1
> 
> 时间：2013-03-08T09:11:26.200
> 
> 标签：python, regex, memory

嗨，我正在处理一个 600Mb 的文件。我写了下面的代码。我正在做的是，在 `<dest>`标签之间的数据中搜索关键字，如果存在，则将城市标签添加到`<dest>`标签中。它适用于少量数据，但是当我在大文件上运行程序时，它会抛出 MEMORY ERROR。我想我在使用 return 语句时遇到了这个错误，谁能`if condition`告诉我如何解决这个问题？

```
import re

def casp ( tx ):
    def tbcnv( st ):
        ct = ''
        prt = re.compile(r"(?i)(Slip Copy,.*?\))", re.DOTALL|re.M)
        val = re.search(prt, st)
        try:
            ct = val.group(1)
            if re.search(r"(?i)alaska", ct):
                jval = "Alaska"
                print jval
                if jval:
                    prt = re.compile(r"(?i)(.*?<dest.*?>)", re.DOTALL|re.M)
                    vl = re.sub(prt, "\\1\n" +  "<city>" + jval + "</city>" + "\n" ,st)
                    return vl
                else:
                    return st
            else:
                return st
        except:
            print "Not available"
            return st   

    pt = re.compile("(?i)(<dest.*?</dest>)", re.DOTALL|re.M)
    t = re.sub(pt, lambda m: tbcnv(m.group(1)), tx)
    return t

with open('input.txt', 'r') as content_file:
    content = content_file.read()
    pt = re.compile(r"(?i)<Lrlevel level='3'>(.*?)</Lrlevel>", re.DOTALL|re.M)
    content = re.sub(pt,lambda m: "<Lrlevel level='3'>" + casp(m.group(1) + "</Lrlevel>" ), content)

with open('out.txt', 'w') as out_file:
    out_file.write(content) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T01:39:28.597

如果删除`return`之前的语句`expect`，则构建的字符串`re.sub()`要小得多。

我得到的内存使用量是文件大小的 3 倍，这意味着如果你没有（超过）2GB，你会得到一个 MemoryError。这在这里是合理的——或者至少我可以猜到为什么。它是如何`re.sub()`工作的。

这意味着您以某种方式使用了错误的工具，如上面的评论中所述。您应该使用像 lxml 这样的完整 xml 处理工具，或者如果您想坚持使用正则表达式，请找到一种方法，永远不需要内存中的整个字符串；或者至少永远不要调用`re.sub()`它（例如，只有`tx`变量包含一个大字符串，它是输入；并且你`pt.search(tx, startpos)`在一个循环中执行，定位要更改的位置，并逐个编写部分`tx`）。

# windows - 带有网格的 Gridview 和 ItemClick

> ID：15290377
> 
> 赞同：0
> 
> 时间：2013-03-08T09:11:27.157
> 
> 标签：windows, gridview, styles, microsoft-metro

当我点击一个图块时，我的 ItemView_ItemClick 没有被执行（除非我点击了矩形选择器）。

为什么 ？我怎样才能做到这一点 ？谢谢。

```
<GridView Grid.Row="1" Grid.Column="1" ItemsSource="{Binding Products}" IsItemClickEnabled="True" ItemClick="ItemView_ItemClick">
    <GridView.ItemTemplate>
        <DataTemplate>
            <GridViewItem>
                <Grid Width="300" Height="200">
                    <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                        <Image Source="{Binding SmallPic, Converter={StaticResource imageConverter }}" Stretch="UniformToFill"/>
                    </Border>
                    <StackPanel VerticalAlignment="Bottom" Opacity="1" Background="#7F000000" >
                        <TextBlock Text="{Binding Name}" Style="{StaticResource ItemContentStyle}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}"  Margin="15,0,15,0"/>
                        <TextBlock Text="{Binding Price, Converter={StaticResource priceConverter }}" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
                    </StackPanel>
                </Grid>
            </GridViewItem>
        </DataTemplate>
    </GridView.ItemTemplate>
</GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:23:37.560

将我的评论移至答案....

包含是不必要的`<GridViewItem>`，并且似乎导致了不需要的行为。

# xml - 无法使用 JaxB 读取读取的 xml 属性

> ID：15290380
> 
> 赞同：1
> 
> 时间：2013-03-08T09:11:40.527
> 
> 标签：xml, jaxb, java-6

我有一个试图使用 JaxB 加载的 XML 文件。

```
<TABLE NAME="EMPLOYEE">
    <ROW>
        <EMP_ID>1002</EMP_ID>
        <EMP_NAME>Suraj</EMP_NAME>
        <EMP_DEPT_ID>3</EMP_DEPT_ID>
        <EMP_DES>SE</EMP_DES>
    </ROW>
    <ROW>
        <EMP_ID>1034</EMP_ID>
        <EMP_NAME>Birendra</EMP_NAME>
        <EMP_DEPT_ID>6</EMP_DEPT_ID>
        <EMP_DES>SSE</EMP_DES>
    </ROW>
</TABLE> 
```

Alos 为以下内容创建了 POJO

```
@XmlRootElement
public class EmpTable {
    private String NAME;
    private EmpRow ROW;

    public String getNAME() {
        return NAME;
    }
    @XmlAttribute
    public void setNAME(String nAME) {
        NAME = nAME;
    }

    public EmpRow getROW() {
        return ROW;
    }
    @XmlElement
    public void setROW(EmpRow rOW) {
        ROW = rOW;
    }

} 
```

EmpRow 也类似。使用以下代码读取 Xml

```
File file = new File("C:/Users/navnath.kumbhar/Desktop/ImportDataXml.xml");
EmpTable objEmpTable = JAXB.unmarshal(file, EmpTable.class); 
```

现在的问题是我能够正确读取完整对象及其数据，但 TABLE 标记的 NAME 属性除外。任何人都可以建议我有什么错误的暗示或需要其他什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:50:33.727

**映射到 XML 属性**

您应该如下注释您的`NAME`属性：

```
@XmlAttribute(name="NAME")
public void setNAME(String nAME) {
    NAME = nAME;
} 
```

虽然我建议使用以下命名约定：

```
@XmlAttribute(name="NAME")
public void setName(String nAME) {
    NAME = nAME;
} 
```

* * *

**映射根元素**

此外，您似乎应该使用`@XmlRootElement`如下。

```
@XmlRootElement(name="TABLE")
public class EmpTable { 
```

虽然你可能最好只`Table`上课：

```
@XmlRootElement(name="TABLE")
public class Table { 
```

* * *

**JAXB 运行时**

下面是一行代码，但是效率不是很高，

```
EmpTable objEmpTable = JAXB.unmarshal(file, EmpTable.class); 
```

相反，您应该创建一个`JAXBContext`映射元数据的线程安全初始化版本，可以从中创建编组器和解组器。

```
JAXBContext jc = JAXBContext.newInstance(EmpTable.class);
Unmarshaller unmarshaller = jc.createUnmarshaller();
EmpTable objEmpTable = (EmpTable) unmarshaller.unmarshal(file); 
```

# android - onStartActivity 上的动画活动

> ID：15290382
> 
> 赞同：0
> 
> 时间：2013-03-08T09:11:45.300
> 
> 标签：android

我想在开始另一个活动时为活动设置动画。我正在尝试做翻转动画的动画。

我用 objectanimtor 尝试了 ActivityOptions 和 overridePendingTransition。我想我做错了，objectanimator不能与上述这些方法一起使用。

是否有任何方法可以为 api 级别 8 的活动设置动画，还请解释 objecanimator 不使用 ActivityOptions 和 overridePendingTransition 的原因

下面附上样品

```
 <set xmlns:android="http://schemas.android.com/apk/res/android">
   <!-- Before rotating, immediately set the alpha to 0\. -->
        <objectAnimator
    android:valueFrom="1.0"
    android:valueTo="0.0"
    android:propertyName="alpha"
    android:duration="0" />

      <!-- Rotate. -->
       <objectAnimator
    android:valueFrom="180"
    android:valueTo="0"
    android:propertyName="rotationY"
    android:interpolator="@android:interpolator/accelerate_decelerate"
    android:duration="@integer/card_flip_time_full" />

        <!-- Half-way through the rotation (see startOffset), set the alpha to 1\. -->
       <`objectAnimator`
    android:valueFrom="0.0"
    android:valueTo="1.0"
    android:propertyName="alpha"
    android:startOffset="@integer/card_flip_time_half"
    android:duration="1" />
      </set>

        `enter code here`and i used this `xml` like this

        `overridePendingTransition`(`R.anim.card`_flip_right_in,`R.anim.card`_flip_right_out); 
```

# c++ - 将 Boost.asio 与 cmake 一起使用？

> ID：15290386
> 
> 赞同：4
> 
> 时间：2013-03-08T09:12:01.197
> 
> 标签：c++, boost, cmake, boost-asio

我想在没有外部库的情况下将 boost.asio 静态链接到我的小项目（结果中只有单个 exe/bin 文件来分发它）。Boost.asio 需要 Boost.system，我开始沉浸在试图弄清楚如何编译这一切的过程中。如何在 cmake 中使用 Boost.asio？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T18:05:00.187

如果我理解实际问题，它基本上是在询问如何在 CMake 中静态链接到 3rd 方库。

在我的环境中，我已将 Boost 安装到`/opt/boost`.

最简单的方法是使用`FindBoost.cmake`CMake 安装中提供的：

```
set(BOOST_ROOT /opt/boost)
set(Boost_USE_STATIC_LIBS ON)
find_package(Boost COMPONENTS system)

include_directories(${Boost_INCLUDE_DIR})
add_executable(example example.cpp)
target_link_libraries(example ${Boost_LIBRARIES}) 
```

查找所有 Boost 库并显式链接到系统库的变体：

```
set(BOOST_ROOT /opt/boost)
set(Boost_USE_STATIC_LIBS ON)
find_package(Boost REQUIRED)

include_directories(${Boost_INCLUDE_DIR})
add_executable(example example.cpp)
target_link_libraries(example ${Boost_SYSTEM_LIBRARY}) 
```

如果您没有正确安装 Boost，则有两种方法可以静态链接库。第一种方法创建一个导入的 CMake 目标：

```
add_library(boost_system STATIC IMPORTED)
set_property(TARGET boost_system PROPERTY
  IMPORTED_LOCATION /opt/boost/lib/libboost_system.a 
)

include_directories(/opt/boost/include)
add_executable(example example.cpp)
target_link_libraries(example boost_system) 
```

另一种方法是显式列出库`target_link_libraries`而不是目标：

```
include_directories(/opt/boost/include)
add_executable(example example.cpp)
target_link_libraries(example /opt/boost/lib/libboost_system.a) 
```

# php - 查询仅在 IE 上不显示行

> ID：15290389
> 
> 赞同：0
> 
> 时间：2013-03-08T09:12:08.233
> 
> 标签：php, internet-explorer

在我的 php 类中，我创建了一个用于连接选择表单（ajax 调用）的方法现在我有一个奇怪的问题，因为在 firefox、chrome 和其他浏览器中，该方法可以很好地显示我的查询选择的行，而在 ie 8-9 中没有显示行，但只有一个“白色”窗口。

```
public function ShowCat_2( $idca2, $idca1 ) {

    // for edit function
    $where = "";
    if(isset($idca1)){ $where .= " idcat_1='$idca1'"; }
    if(isset($_POST['idcat_1'])) { $where .= " idcat_1='$_POST[idcat_1]'"; }

    // query    
    $this->db->result = $this->db->mysqli->query("SELECT * FROM cat_2 WHERE $where");
    $cat_2 = '<option value="0">Select</option>';

        while($row = $this->db->result->fetch_assoc()) {

            $cat_2 .= '<option value="' . $row['idcat_2'] . '"';

                if($idca2 == $row['idcat_2']){ $cat_2 .= ' selected'; } // for edit fun

            $cat_2 .= '>' . utf8_encode(ucfirst(strtolower($row['descr']))) . '</option>';

        }

    return $cat_2;
} 
```

你能告诉我可能是什么问题以及如何解决吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:14:35.340

看一下页面源。那里可能有一个 PHP 警告/通知，它破坏了 HTML 代码。

# asp.net - C# 如何在 GridView 上创建超链接 OnClick 事件？

> ID：15290392
> 
> 赞同：4
> 
> 时间：2013-03-08T09:12:19.533
> 
> 标签：asp.net, gridview

我无法创建我想要的 GridView。我希望用户进入网站并查看附加到数据库的 GridView。列是：`ID, InsertionTime, Filepath, ProccessedByUser` 现在我希望用户单击他/她想要处理的文件路径。当他/她单击文件路径时，我希望将他们的用户名（使用内置的 asp 网站身份验证登录）更新（添加）到数据库中。

我的标记是标准的，我不必管理后面的代码。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataKeyNames="ID" DataSourceID="AccessDataSource1" 
    onselectedindexchanged="GridView1_SelectedIndexChanged">
    <Columns>
        <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
            ReadOnly="True" SortExpression="ID" />
        <asp:BoundField DataField="starttime" HeaderText="starttime" 
            SortExpression="starttime" />
        <asp:HyperLinkField DataNavigateUrlFields="path" DataTextField="path" 
            HeaderText="path" />
        <asp:BoundField DataField="user" HeaderText="user" SortExpression="user" />
    </Columns>
</asp:GridView> 
```

我尝试使用 HyperlinkField 但它似乎不支持 onlick 事件。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T09:31:18.110

我假设您正在寻找[`LinkButton`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton%28v=vs.110%29.aspx)具有`OnClick`事件的控件。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataKeyNames="ID" DataSourceID="AccessDataSource1" 
    onselectedindexchanged="GridView1_SelectedIndexChanged">
    <Columns>
        <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
            ReadOnly="True" SortExpression="ID" />
        <asp:BoundField DataField="starttime" HeaderText="starttime" 
            SortExpression="starttime" />
        <asp:TemplateField HeaderText="Path" SortExpression="Filepath">
            <ItemTemplate>
                <asp:LinkButton ID="LbPath" runat="server" 
                    Text='<%# Eval("Filepath") %>'
                    CommandName="PathUpdate" 
                    CommandArgument='<%#Bind("path") %>'>
                </asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="user" HeaderText="user" SortExpression="user" />
    </Columns>
</asp:GridView> 
```

现在您可以处理`LinkButton's` [单击事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.click.aspx)或`GridView's` `RowCommand`事件。

```
protected void Gridview1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "PathUpdate")
    {
        string path= e.CommandArgument.ToString();
        // do you what you need to do
    }
} 
```

请注意，我使用了 a`TemplateField`中最动态的列类型，`GridView`因为您可以添加任何您想要的内容，甚至是嵌套的 GridView 或`UserControls`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:31:43.283

您可以使用 ButtonField，然后处理 gridview 的 OnRowCommand。这里的例子：

[http://msdn.microsoft.com/SV-SE/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx](http://msdn.microsoft.com/SV-SE/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx)

您可以设置 ButtonField 的 ButtonType 属性以将按钮显示为链接。

# java - 如何实现版本控制客户端说 svn 作为 java web-service？

> ID：15290395
> 
> 赞同：1
> 
> 时间：2013-03-08T09:12:34.557
> 
> 标签：java, web-services, jakarta-ee, version-control

如何将 SVN/CVS/Mercurial/Git/TFS 客户端实现为 Java Web 服务？任何指针？基本上我正在开发一个 CMS，我想在其中支持版本控制。但不是新的 VC 系统，我想支持 SVC/GIT/Mercurial/CVS/TFS，以便它可以与现有的插件一起使用。

编辑：为了更清楚，我正在开发一个在线 VCS 客户端作为 CMS 的一部分。应该支持从流行的 VCS 上传，如 SVN/GIT/TFS/CVS。我想，我需要为不同的 VCS 客户端实现不同的处理程序。但是应该可以从受支持的客户端访问相同的数据（SVN/GIT ...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:41:30.400

好的，所以我误解了你的问题。要实现这一点，您必须为要支持的每个 VCS 使用一个库。对于 SVN，这将是[SVNKit](http://svnkit.com/)，对于 Git [JGit](http://www.jgit.org/)或[gitblit](http://code.google.com/p/gitblit/)（我不知道这两个，它们只是一个例子）。您必须学习每个 API 才能从每个 VCS 获取数据。

在您的 Java 应用程序（网站）中，UI 应提供类似浏览器的组件来选择存储库中的文件。依赖于 VCS 的用户选择合适的库将用于与存储库进行交互。

# opencv - opencv 像素的坐标与显示的像素不同

> ID：15290397
> 
> 赞同：0
> 
> 时间：2013-03-08T09:12:40.960
> 
> 标签：opencv, pixels

编辑：解决了，我必须通过使用访问像素

```
 (int)bw.at<uchar>(r,c) 
```

对于学校的一个项目，我必须检测一个球并计算它的位置。我通过颜色分割来做到这一点：使用 inRange 检查球的颜色，我得到一个二值图像作为结果。至少我认为它是二进制的，因为当我显示它时图片是黑白的。

我现在尝试通过简单地取所有检测到的像素的 x 和 y 坐标的平均值来获取球的位置。奇怪的是，y 值是正确的，但 x 值是完全错误的。

这是我的代码：

```
 int k = 0;
    int x = 0;
    int y = 0;
    ofstream myfile;
    myfile.open ("example.txt");
    for(int c = 0; c < bw.cols; c++){
    for(int r = 0; r < bw.rows; r++){

            if(bw.at<int>(r,c) != 0){
                x += c;
                y += r;
                cout << "x: " << c << " y: " << r << endl;
                k++;
                myfile << 1;
            }else{
                myfile << 0;
            }
        }
        myfile << endl;
    }
    myfile.close();
    bal.set_pos(x/k,y/k); 
```

我打印每个像素的 x 和 y 坐标，y 坐标是正确的，但 x 坐标分为 4 个不同的组，第一组的值在 88 左右，第二组的值在 248 左右，第三组 408，第四组 569。它们应该是但是在 350 到 360 之间。

# ios4 - 是否有可能隐藏静态库中使用的一些 .h 文件

> ID：15290398
> 
> 赞同：1
> 
> 时间：2013-03-08T09:12:42.467
> 
> 标签：ios4, ios6, xcode4.5, ios5.1, xcode4.6

我需要一些关于静态库创建的信息，实际上我是用 .h（头文件）文件创建的静态库，但我想从我的库中隐藏一些对其他人不可见的 .h（头文件）。你能提供任何解决方案吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T19:10:45.250

是的，有一种可能性，我最近就这样做了。

请参考[这个](https://developer.apple.com/library/ios/recipes/xcode_help-project_editor/Articles/Setting%20the%20Role%20of%20a%20Header%20File.html#//apple_ref/doc/uid/TP40010155-CH9-SW1)网站，它显示了如何公开头文件。

***注意***：您不应该在公共标头中导入您的私有标头。在其他项目中编译库时，您会遇到一些编译错误。

假设您有两个标题，

1.  XYZ.h ***（公共）***
2.  XYZInternal.h ***（私有）***

您必须在**XYZ.m文件中导入****XYZInternal.h**以避免**标头未找到错误**，当然还要隐藏私有标头/类的存在。

# visual-studio-2010 - 单击一次 - CD 部署不更新

> ID：15290402
> 
> 赞同：1
> 
> 时间：2013-03-08T09:12:53.003
> 
> 标签：visual-studio-2010, deployment, clickonce, updates

我正在使用 ClickOnce 部署 WPF 应用程序

通过 CD/DVD 计划初始部署，以便用户可以快速安装所有先决条件和应用程序，但同时提供了网站更新位置，以便每当发布更新时，用户都可以安装它。

但是我们面临的问题是，尽管我们增加了构建版本并将应用程序部署在网络服务器上，但没有一个用户识别出有更新并只运行初始版本。

我完全按照[这里的答案中描述的步骤进行操作](https://stackoverflow.com/questions/6400068/can-i-deploy-a-clickonce-application-via-cd-and-update-via-web)

以下是我所做的：

**1\. 第一个版本（例如 1.0.0.1）部署在 CD 中并安装在计算机上。**

*发布位置*

*   发布文件夹位置现为`Path of the CD Drive`
*   安装文件夹 URL 是`empty`. （因为它会从 CD 本身安装）

*更新中*

*   应用程序应该检查更新是`True`和`Before the application starts`
*   更新位置是网站：`www.xxxxx.com/ApplicationFolder/`

*选项*

*   对于 CD 安装，插入 CD 时自动启动安装程序是`Checked`

**2\. 第二个版本（例如 1.0.0.2）在 web 上部署**

*发布位置*

*   发布文件夹位置是`ftp://xx.xx.xx.xx/httpdocs/ApplicationFolder/`（与 CD 安装中的更新位置相同，但通过 ftp。我必须在此处使用 FTP，因为我的 Web 服务器上没有安装 FrontPage 服务器扩展。）

*   安装文件夹 URL 为 ``www.xxxxx.com/ApplicationFolder/`（与 CD 安装中更新位置的路径相同）

*更新*

*   应用程序应该检查更新是`True`和`Before the application starts`
*   更新位置是`empty`。

*选项*

*   对于 CD 安装，插入 CD 时自动启动安装程序是`Unchecked`

为什么它不识别任何更新？是否有可以验证更新位置的文件？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:55:41.133

填写第二个版本的更新位置。那应该可以解决您的问题。

# boost - Windows 和 Linux 下 C++ 时区数据库

> ID：15290404
> 
> 赞同：1
> 
> 时间：2013-03-08T09:12:58.743
> 
> 标签：boost, timezone

有人知道我可以在 Windows（使用 MinGW）和 Linux 下与 C++ 一起使用的 TimeZone 数据库吗？

将时间转换为不同的时区是不够的，我需要时区的历史数据（包括 UTC 偏移量和夏令时。

我找到了一些，例如[ftp://ftp.iana.org/tz/tz-link.html](ftp://ftp.iana.org/tz/tz-link.html)但我没有找到 c++ 的解析器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:06:07.287

谢谢！我尝试了以下示例：

```
 time_t time1 = makeTime(1975, 7, 2,10, 11, 41);
time_zone_ptr utc_tz(new posix_time_zone("UTC-00:00:00"));
local_date_time timeutc(toPtime(time1), utc_tz);

time_zone_ptr cet_tz = tz->tz_db.time_zone_from_region("Europe/Berlin");
local_date_time timecet(toPtime(time1), cet_tz);

cout<<timeutc<<endl; // Output: 1975-Jul-02 10:11:41 UTC
cout<<timecet<<endl; // Output: 1975-Jul-02 12:11:41 CEST 
```

根据维基百科，从 1950 年到 1979 年，德国没有夏令时。但正如您在输出中看到的那样，结果是 CEST

我是否需要做任何特别的事情才能使用历史时区数据来提升？

谢谢弗洛里安

# tcp - 像 Teamviewer 一样的远程连接程序

> ID：15290409
> 
> 赞同：0
> 
> 时间：2013-03-08T09:13:23.897
> 
> 标签：tcp, tcpclient, remote-desktop, tcpserver

由于某种原因，标准 TCPServer 和 TCPClient 无法在我的机器上运行，但 Teamviewer 设法在两台机器之间建立连接，我猜想实际的远程桌面会话并没有通过他们的服务器，因为它可能相当重的。

有人可以解释这是怎么可能的，因为我已经尝试了我能找到的每一个 TCP 服务器/客户端代码，但它仍然无法连接从外界接收信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:37:45.603

TeamViewer 使用一种称为[UDP 打孔](http://en.wikipedia.org/wiki/UDP_hole_punching)的技术。

这允许连接两个 nat'd 对等体，而无需使数据通过服务器。

# object - 通过 Web 服务自动序列化对象

> ID：15290415
> 
> 赞同：0
> 
> 时间：2013-03-08T09:13:40.227
> 
> 标签：object, service, web

我有我的 webservice 方法，它发送一个对象作为结果，例如：

```
public Dog GetDog(); 
```

狗看起来像这样：

```
 public class Dog{
  public string Name { get; set;}
  public int Age{ get; set;}
} 
```

有什么方法可以设置默认的序列化方法，而不必将方法更改为：

```
 public string GetDog(){
return dog.toString();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:53:34.643

假设您正在谈论 .net Web 服务。这是诀窍。

```
[WebMethod]
public Dog GetDog()
{
  //method code
} 

[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://tempuri.org/")]
public class Dog{
  public string Name { get; set;}
  public int Age{ get; set;}
} 
```

您可以阅读本文以进一步了解。 [http://ryanfarley.com/blog/archive/2004/05/26/737.aspx](http://ryanfarley.com/blog/archive/2004/05/26/737.aspx)

# r - 将带有指数的数字转换为 R 中美丽图例的绘图命令

> ID：15290417
> 
> 赞同：2
> 
> 时间：2013-03-08T09:13:44.103
> 
> 标签：r, plot, legend, exp, plotmath

我正在尝试在 R 图中生成一个美丽的传说。我有一个`factor=1e-5`, 应该在图例中很好地格式化。我在包中发现了一个很好的函数`sfsmisc`，可以将数字转换为表达式。要将此表达式添加到我的 bquote 命令中，我似乎需要将其转换为调用。`10^-5()`不幸的是，在字符串 ( )的末尾添加了大括号。

有没有办法避免添加那些大括号？或者有没有更简单的方法将数字转换为 plotmaths 命令以便在图例中使用？（无需手动操作）

```
factor = 1e-5
alpha = 1:10
omega = alpha^2 * factor

plot (
  alpha
  , omega
  , xlab=bquote(alpha)
  , ylab=bquote(omega)
  , type="b"
  )

text = expression()

# standard version
text[1] = as.expression(bquote(alpha%*%.(factor)))

# beautified version (use pretty10exp from sfsmisc package!?)
library("sfsmisc")
pretty = as.call(pretty10exp(factor, drop.1=T))
text[1] = as.expression(bquote(alpha^2%*%.(pretty)))

# add legend
legend("topleft", legend=text, pch=1, lty=1) 
```

![屏幕截图：红色箭头指向不应该存在的大括号](../Images/591f06b3c6533e17dc49ed097e0377bc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:08:11.980

以下是您可以使用 function 执行的操作`parse`：

```
text <- paste("alpha^2%*%",parse(text=pretty10exp(factor,drop.1=T)),sep="")
text
[1] "alpha^2%*%10^-5" # which we then use as the expression in your call to legend
legend("topleft", legend=parse(text=text), pch=1, lty=1) 
```

请参阅`?parse`有关此工作原理的更多说明。

# javascript - IndexOf 整个数组和警报名称

> ID：15290421
> 
> 赞同：0
> 
> 时间：2013-03-08T09:13:51.187
> 
> 标签：javascript, arrays, loops, for-loop, indexof

我正在尝试在 html 文件中编写以下 javascript。

创建一个包含 10 个运动队名称的数组。

然后使用“for 循环”遍历数组。如果团队名称包含字母“an”，则提醒团队名称。我想使用“indexOf”函数来确定团队名称中是否包含“an”。

这是我走了多远：

```
 // index:                                   
    var NHL = new Array("New Jersey Devils", "New York Islanders", 
                       "New York Rangers", "Philadelphia Flyers", 
                       "Pittsburgh Penguins", "Boston Bruins", 
                       "Buffalo Sabres", "Montreal Canadiens" , 
                       "Ottawa Senators", "Toronto Maple Leafs");

    for( i=0 , i<NHL.indexOf("an") , i++ ){
      if(NHL.indexOf == "an"){
          alert(indexOf)
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:18:20.720

`indexOf(str)`将返回非负索引。如果子字符串不存在，它将返回 -1，否则它将返回该 str 的第一次出现。

```
var NHL = new Array("New Jersey Devils", "New York Islanders", 
          "New York Rangers", "Philadelphia Flyers", "Pittsburgh Penguins", 
          "Boston Bruins", "Buffalo Sabres", "Montreal Canadiens" , 
          "Ottawa Senators", "Toronto Maple Leafs"); 

for(i=0; i<NHL.length; i++)
{
    if(NHL[i].indexOf("an") !== -1)
        alert(NHL[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:21:24.360

```
var NHL = new Array("New Jersey Devils", "New York Islanders", "New York Rangers", "Philadelphia Flyers", "Pittsburgh Penguins", "Boston Bruins", "Buffalo Sabres", "Montreal Canadiens" , "Ottawa Senators", "Toronto Maple Leafs");

for(var i=0, len=NHL.length; i<len; i++ ){
  var name=NHL[i];
  if(name.indexOf("an")>-1){
      alert(name);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:19:20.987

```
var NHL = new Array("New Jersey Devils", "New York Islanders", 
"New York Rangers", "Philadelphia Flyers", "Pittsburgh Penguins", 
"Boston Bruins", "Buffalo Sabres", "Montreal Canadiens" , 
"Ottawa Senators", "Toronto Maple Leafs"); 

/** 
 * Iterate through each array element,
 * Check against 'an', indexOf returns -1
 * if no match found.
**/
for( var i=0 ; i < NHL.length; i++ ) {
     if ( NHL[i].indexOf("an") !== -1 ) 
            alert( "This " + NHL[i] + " Contains 'an' at array index: " + i );
} 
```

**jsFiddle**：http: [//jsfiddle.net/HqXSs/1/](http://jsfiddle.net/HqXSs/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:21:20.023

干得好：

```
var NHL = new Array("New Jersey Devils", "New York Islanders", "New York Rangers", "Philadelphia Flyers", "Pittsburgh Penguins", "Boston Bruins", "Buffalo Sabres", "Montreal Canadiens" , "Ottawa Senators", "Toronto Maple Leafs");

for (var i=0; i<NHL.length; i++){
    if(NHL[i].indexOf("an") !== -1){
        alert(NHL[i]);
    }
} 
```

# objective-c - 在 Objective-c 中的 Switch/Case 语句中对 case 进行分组

> ID：15290422
> 
> 赞同：2
> 
> 时间：2013-03-08T09:13:52.440
> 
> 标签：objective-c, switch-statement

我有一个 switch 案例，在不同的案例中可能对应于相同的代码片段。

有没有一个优雅的选择，而不是复制所有的代码？

```
switch(expression) {

  case firstCase:
      // do something
      break;

  case secondCase:
      // do exactly the same of first case
      break;

  case otherCase:
      // do anything else
      break;

  case etceteraCase:
      .......

  default:
      break;

} 
```

我知道作为替代方案，我可以创建一个在案例中调用的方法，但这可能会导致难以维护的方法激增。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T09:16:07.310

是的：

```
switch(expression) {

  case firstCase:
  case secondCase:
      // do exactly the same of first case
      break;

  case otherCase:
  case yetAnotherCase:
      // do anything else
      break;

  case etceteraCase:
      .......

  default:
      break;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:16:29.487

在第一种情况后删除中断：

```
switch(expression) {

  case firstCase:

  case secondCase:
      // do the same of first case
      break;

  case otherCase:
      // do anything else
      break;

  case etceteraCase:
      .......

  default:
      break;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T09:16:41.170

```
switch(expression) {

  case firstCase:
  case secondCase:
      // do exactly the same of first case
      break;

  case otherCase:
      // do anything else
      break;

  case etceteraCase:
      .......

  default:
      break;

} 
```

排除`break;`将产生您的预期结果。

# jquery - 将代码注入 iframe 在 IE 中不起作用

> ID：15290424
> 
> 赞同：1
> 
> 时间：2013-03-08T09:13:53.173
> 
> 标签：jquery, internet-explorer, iframe

我正在尝试将 CSS 注入 iframe - 问题是它在除 IE 之外的所有地方都有效，我不明白为什么

这就是我使用的：

```
$(document).ready(function() {

    $('#the_iframe').load(function(){
        $('#the_iframe').contents().find('head').append('<link href="/css/slider_eri.css" rel="stylesheet" type="text/css" />');
    });

}); 
```

这里有什么问题？

更新：对我来说，IE9 似乎有一些负载问题。IE9 会很乐意接受这一点：

```
$(document).ready(function() {
     $('#the_iframe').load(add());
});

function add() {

    var timestamp =  +(new Date());
    $('#the_iframe').contents().find('head').append('<link href="/css/slider_eri.css?'+ timestamp +'" rel="stylesheet" type="text/css" />');

}; 
```

不幸的是，这也破坏了所有其他浏览器（包括 ie7 和 8），所以我仍然没有解决方案。

# mediaelement.js - 如何创建播放媒体的按钮

> ID：15290425
> 
> 赞同：1
> 
> 时间：2013-03-08T09:14:05.573
> 
> 标签：mediaelement.js

我正在尝试找到一种方法来创建一个播放媒体的按钮`mediaelement.js`。我试过了`player.stop`，然后`player.play`。但`player.stop`不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:37:20.327

该文档指出：

> HTML5 定义了“暂停”方法，但没有定义“停止”方法。“停止”方法仅用于支持 Flash RTMP 流式传输，因此您应在所有其他情况下使用“暂停”方法。

你不应该使用`.stop()`. `setCurrentTime(0)`如果您想从头开始播放相同的曲目，您可以使用。

# android - 在 Android 中创建 RESTful ContentProvider 时，SQLite 数据库中的唯一 id 是否应该与 RESTful 服务中的 Key 匹配？

> ID：15290432
> 
> 赞同：1
> 
> 时间：2013-03-08T09:14:56.430
> 
> 标签：android, android-sqlite, restful-architecture, google-cloud-endpoints

我正在使用 Virgil Dobjanschi 的选项 B（来自本次演讲：[http](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html) ://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html ）在我的 Android 应用程序上实现 Web 服务连接到 Google Cloud Endpoints RESTful 服务（因此，我的 URL 被抽象了）。

本地 SQLite 数据库需要一个主键（必须称为 _id 以便它可以与 ListView 链接）。AppEngine 服务还要求每条记录有一个唯一的 ID。服务中的资源在多个客户端之间共享，因此它们的 ID 在服务器上需要保持唯一。资源 ID 是从其他两个 ID 派生的，并以字符串的形式生成。

按照设计，这些资源永远不会在 Android 应用程序上本地创建，它们只会被读取和更新——创建和删除发生在其他地方，然后通过 Google Cloud Messaging 发送创建的资源，并附上它们的 REST Id，并插入到 SQLite 表中. 如果我在本地创建它们，我也可以在本地从 REST 资源生成唯一 ID。

我应该让 SQLite 数据库上的 ID 是一个单独的唯一 ID，在本地维护，并将 REST ID 存储在记录中，还是应该将 SQLite ID 设置为与 REST ID 相同？

IE：

我的 REST 资源采用以下形式：

```
String id; // unique, derived from two other ids
String data; 
```

我的 SQLite 选项是：

```
create table myResource (
  _id INTEGER PRIMARY KEY AUTOINCREMEMT,
  restId TEXT,
  data TEXT); 
```

或者：

```
create table myResource (
  _id TEXT PRIMARY KEY,
  data TEXT); 
```

在第一个选项中，我也可以将 restId 设为唯一。我倾向于第二种选择，但我想知道这种方法是否会遇到无法预料的问题。

对于一些不同的资源，我还有另一种类似的情况，其中 REST 键是 Long 而不是 String，但我仍然质疑我是否应该维护一个与 REST 资源 ID 分开的本地主键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:18:29.343

似乎最好对 SQLite 中的 _id 字段使用整数，这意味着它们不一定与 AppEngine 中的字符串键匹配。

[http://developer.android.com/reference/android/content/ContentUris.html](http://developer.android.com/reference/android/content/ContentUris.html)将id 称为“唯一的数字标识符”，并提供要求它为 long 的辅助方法。

可能可以解决这个问题，但鉴于此假设内置于 ContentUris，我希望它也将内置于其他地方，因此使用保留在应用程序内部的数字 id 来执行此操作会更容易，并强制执行AppEngine 键的唯一性。

# dom - 无法从 ANT 运行 TestNG 测试用例给 DomSource？

> ID：15290444
> 
> 赞同：1
> 
> 时间：2013-03-08T09:15:31.423
> 
> 标签：dom, ant, jar, testng, saxon

我有一个运行 testNG testCase 的 ant 任务。但是在运行时它显示如下错误

```
 [testng] Error 
 [testng]   DOMSource cannot be processed: check that saxon8-dom.jar is on the classpath
 [testng] [GeneralXMLOutput] [Error] DOMSource cannot be processed: check that saxon8- dom.jar is on the classpath 
```

我的 lib 文件夹包含与 xml 相关的 jdom-0.7.jar、saxon-8.7.jar、SaxonLiasion.jar。是jar文件依赖冲突吗？

如何解决此错误？

蚂蚁任务

```
 <target name="runTests" depends="compile">
    <testng classpath="${test.classpath}:${build.dir}">
        <xmlfileset dir="${basedir}" includes="testng.xml" />
    </testng>
</target> 
```

我在其他一些类中使用了来自 rt.jar 的 javax.xml.transform.Transformer api 并且 saxon 也有 Transformer Api。（是否会产生问题？）

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:53:39.207

信息很清楚：检查 saxon8-dom 是否在类路径中。从你说的情况来看，不是。

但是 Saxon 8.7 无论如何都是一个古老的版本，当前版本是 9.4。最近的版本包括主 JAR 文件中的 DOM 支持 - 过去将其分开的原因是因为 DOM API 在 JDK 1.4 和 JDK 1.5 之间以不兼容的方式更改，而当 Saxon 放弃对 JDK 1.4 的支持时，这个问题就消失了。

# java - 提供 java 代码时提供帮助的程序？

> ID：15290448
> 
> 赞同：3
> 
> 时间：2013-03-08T09:15:55.277
> 
> 标签：java, windows

我在一个会议上，有一位演讲者在一个应用程序中展示了一些 Java 8 代码示例，我正在寻找那个或类似应用程序的名称。

该应用程序编译了所有代码示例并显示了输出，但主要是他不必编写完整的 java 代码。它自动处理导入和类定义。他可以只专注于他想展示的代码。这使得快速创建示例变得容易。

编辑; 澄清一下，这不是一个完整的 IDE。它似乎是一个专门为快速编写和测试短代码示例而设计的程序。例如，他在 Java 8 中编写并展示了一个 for-each 循环，无需任何导入，也无需创建主类或任何语法绒毛。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:19:15.183

检查那些集成开发环境：

*   [蚀](http://www.eclipse.org/)
*   [智能理念](http://www.jetbrains.com/idea/)
*   [NetBeans](http://netbeans.org/)

为了改进您的演示文稿，您可以创建模板，这些模板将为您创建必要的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T12:19:01.600

我找到了主持人的联系方式，并询问了节目。事实证明他正在使用带有 TextMate 的 Mac。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:44:42.560

[Eclipse 提供了一个与它的java 剪贴簿页面](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/task-create_scrapbook_page.htm)类似的特性。

您只需输入 java 语句，它们就可以运行。

# .net - 在运行时添加附属程序集

> ID：15290450
> 
> 赞同：2
> 
> 时间：2013-03-08T09:15:57.647
> 
> 标签：.net, satellite-assembly, resourcemanager

我创建了一个可以在运行时切换文化的应用程序。但是现在我想在应用程序继续运行时向我的应用程序添加一个新的卫星程序集。我将特定的文化文件夹（例如`af`，其中包含`Localisation.resources.dll`文件的文件夹）复制到应用程序文件夹，然后运行以下代码：

```
ResourceManager rm = new ResourceManager(ResxExtension.GetDefaultResxName(this), this.GetType().Assembly);

radComboBox1.Items.Clear();
foreach (CultureInfo ci in CultureInfo.GetCultures(CultureTypes.AllCultures).OrderBy(x => x.DisplayName))
{
    ResourceSet resourceSet = rm.GetResourceSet(ci, true, false);
    if (resourceSet != null)
        radComboBox1.Items.Add(ci);
}

// Show CurrentUICulture in the combobox
radComboBox1.SelectedItem = GetResourceCulture(CultureManager.UICulture, rm); 
```

但随后什么也没有发生，我一直看到旧文化，但没有显示添加的文化。只有当我停止并启动应用程序时，新的文化才会添加到组合框中。

是否可以在运行时添加卫星程序集？还是我总是必须重新启动应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T17:24:59.963

您必须重新启动应用程序。如果您不这样做，Web 应用程序将不会注册在 bin 文件夹中找到的类型。

通常，触摸 web.config 会触发应用程序重新启动。

# java - 谷歌地图 api Android 崩溃

> ID：15290452
> 
> 赞同：1
> 
> 时间：2013-03-08T09:16:04.863
> 
> 标签：java, android, google-maps-android-api-2

我一步一步按照本教程[https://developers.google.com/maps/documentation/android/start进行操作，这是我的代码。](https://developers.google.com/maps/documentation/android/start)一旦我运行代码，模拟器就会崩溃这是我的代码

安卓清单：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.cics530searsprice"
    android:versionCode="1"
    android:versionName="1.0" >
    <permission
        android:name="com.example.cics530searsprice.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>
    <uses-permission android:name="com.example.cics530searsprice.permission.MAPS_RECEIVE"/>
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
   <uses-permission                    `     android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
   <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
   <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.cics530searsprice.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter> 
        </activity>
       <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="I PUT MY KEY HERE!!!"/>
      </application>
    </manifest> 
```

我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >
<EditText
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" >
    <requestFocus />
</EditText>
<Button
    android:id="@+id/price"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Advanced search " />
<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="72dp"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceLarge" />
 <TextView
    android:id="@+id/http"
    android:layout_width="match_parent"
    android:layout_height="136dp"
    android:text="please wait--- price of the product Loading" />
 <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Ratings"
    android:textAppearance="?android:attr/textAppearanceSmall" />
<RatingBar
    android:id="@+id/ratingBar1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:stepSize="3" />
<Button
    android:id="@+id/location"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Search Location" />
  <Button
    android:id="@+id/shoppingprice"
    android:layout_width="326dp"
    android:layout_height="match_parent"
    android:text="Shopping Price" 
    android:visibility="invisible"
    />
 <Button
    android:id="@+id/exit"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Close" />
 <fragment xmlns:android ="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:name="com.google.android.gms.maps.MapFragment"/>   
</LinearLayout> 
```

日志：

```
03-08 01:20:13.478: D/AndroidRuntime(302): Shutting down VM
03-08 01:20:13.478: W/dalvikvm(302): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-08 01:20:13.509: E/AndroidRuntime(302): FATAL EXCEPTION: main
03-08 01:20:13.509: E/AndroidRuntime(302): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.cics530searsprice/com.example.cics530searsprice.MainActivity}: android.view.InflateException: Binary XML file line #67: Error inflating class fragment
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.os.Looper.loop(Looper.java:123)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-08 01:20:13.509: E/AndroidRuntime(302):  at java.lang.reflect.Method.invokeNative(Native Method)
03-08 01:20:13.509: E/AndroidRuntime(302):  at java.lang.reflect.Method.invoke(Method.java:521)
03-08 01:20:13.509: E/AndroidRuntime(302):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-08 01:20:13.509: E/AndroidRuntime(302):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-08 01:20:13.509: E/AndroidRuntime(302):  at dalvik.system.NativeStart.main(Native Method)
03-08 01:20:13.509: E/AndroidRuntime(302): Caused by: android.view.InflateException: Binary XML file line #67: Error inflating class fragment
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
03-08 01:20:13.509: E/AndroidRuntime(302):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.app.Activity.setContentView(Activity.java:1647)
03-08 01:20:13.509: E/AndroidRuntime(302):  at com.example.cics530searsprice.MainActivity.onCreate(MainActivity.java:79)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-08 01:20:13.509: E/AndroidRuntime(302):  ... 11 more
03-08 01:20:13.509: E/AndroidRuntime(302): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.example.cics530searsprice-2.apk]
03-08 01:20:13.509: E/AndroidRuntime(302):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
03-08 01:20:13.509: E/AndroidRuntime(302):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
03-08 01:20:13.509: E/AndroidRuntime(302):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:544)
03-08 01:20:13.509: E/AndroidRuntime(302):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
03-08 01:20:13.509: E/AndroidRuntime(302):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
03-08 01:20:13.509: E/AndroidRuntime(302):  ... 20 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:27:18.040

我认为您正在扩展`FragmentActivity`，表明您正在尝试使用片段的 Android 支持包反向移植。但是，您的元素指的是`MapFragment`，这是`API Level 11`片段的本机版本。

替换`MapFragment`为`SupportMapFragment`, 应该可以清除这个特定的崩溃

如果那也没有解决那么你的 API 密钥或其他东西有问题。检查 LogCat 的消息

# asp.net - 创建唯一的字符串 model.Name

> ID：15290459
> 
> 赞同：0
> 
> 时间：2013-03-08T09:16:31.913
> 
> 标签：asp.net, c#-4.0, asp.net-mvc-4

如何使 Name 成为唯一的，因为它不是一个键，它是一个简单的字符串。场景是：您创建一些利润类别：您有 Jackpot、薪水、退休工资等。在您选择其中一个类别并在其他控制器中插入一些内容后。但不需要有两个具有相同名称的类别。我只需要唯一的利润类别。因为现在我可以创建 100 个名称为“Salary”和不同 Id 的类别，因为 Id 的 autoIncrement 主键。

```
 public ActionResult Create(ProfitCategoriesModel profitcategoriesmodel)
        {
            var user = db.UserProfiles.FirstOrDefault(x => x.UserId == WebSecurity.CurrentUserId);
            var addCategory = new ProfitCategoriesModel
            {
                Name = profitcategoriesmodel.Name,
                IdUser = user,
                Id = profitcategoriesmodel.Id,
            };
          db.ProfitCategories.Add(addCategory);
            db.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:18:41.767

如果我理解正确，您需要`Guid.NewGuid().ToString()`.

# java - 如何确定正确的编码？

> ID：15290461
> 
> 赞同：0
> 
> 时间：2013-03-08T09:16:36.933
> 
> 标签：java

我试图打印一些汉字如下，但这不起作用。我想应该进行某种编码。你能帮帮我吗？

```
public static void main(String[] args)
{
    String myString = "奥妙洗衣粉";
    System.out.println(myString);

   // Output in eclipse: Some characters cannot be mapped using Cp1252 character encoding.
   // Either change the encoding or remove the characters which are not supported 
   // by the Cp1252 character encoding.
} 
```

**编辑：**如何在打印字符串之前以编程方式进行（更改/应用编码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:18:49.173

Windows-1252 字符编码不支持您的代码中的字符。使用 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:19:18.800

eclipse 中的控制台默认不支持这些字符。这是一个[教程](http://www.mkyong.com/java/how-to-display-chinese-character-in-eclipse-console/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:44:23.297

您可以更改文件输出中的默认编码：

```
new PrintWriter(fileName, "UTF-8"); 
```

* * *

另一个问题，编译器只能读取 ASCII 字符（但 JVM 也可以读取其他字符）。这意味着，字符串不能由外来字符构建。正确的方法是确定字符的 Unicode - 4 char 十六进制代码 - 并像这样构建：

```
String myString = "\u3b12\uc2d4hello" 
```

这将创建一个字符串，其第一个字符为代码 3b12（使用`\u`Unicode 字符转义）+ c2d4 + hello。

这是我的输出：

```
㬒싔hello 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:47:41.857

问题是eclipse控制台编码不是utf-8。

您应该更改控制台编码，

我希望这个链接对你有帮助：[http ://www.mkyong.com/java/how-to-display-chinese-character-in-eclipse-console/](http://www.mkyong.com/java/how-to-display-chinese-character-in-eclipse-console/)

# javascript - 如何构造一个jQuery承诺数组？

> ID：15290463
> 
> 赞同：2
> 
> 时间：2013-03-08T09:16:38.200
> 
> 标签：javascript, jquery, jquery-deferred, deferred

假设我有一个异步函数返回一个承诺。我想链接很多这样的函数，每个函数都有不同的参数。

将执行此数组的函数如下所示：

```
function executePromiseQueueSync(queue){
    var seed = $.Deferred(),
        finalPromise;

    _reduce(queue, function(memo, promise){
        return memo.then(promise);
    }, seed.promise());

    seed.resolve();
    return finalPromise;
} 
```

我看到一些函数接受一系列承诺并同步执行它们。问题是我不知道如何创建这样的数组。例子：

```
var promiseQueue = [];
promiseQueue.push(AsynchEvent(someArg)); // WRONG: this is function call and will be executed immediately 
```

其他：

```
var promiseQueue = [];
promiseQueue.push(AsynchEvent); // WRONG: at some point I will have to apply this with arguments 
```

那么 - 有没有办法将返回承诺的函数放入数组而不执行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:21:52.673

编辑后更新：

好吧，如果您从一开始就包含该信息会很好，所以这里尝试一下。

我假设第一个输入是已知的，并且从最后一个函数返回的应该进入列表中的下一个。

在这种情况下，我们仍然像以前一样定义并添加到队列中：

```
var promiseQueue = [];
promiseQueue.push(AsynchEvent); 
```

但是我们需要修改循环。我将把它变成一个函数，只是为了展示它是如何使用的。

```
function calcPromise(initialArg) {
  aggregateArg = initialArg;
  for (var i = 0; i < myStringArray.length; i++) {
    aggregateArg = promiseQueue[i](aggregateArg);
  }
  return aggregateArg;
} 
```

请记住，这是 JavaScript - 您从一个函数返回并提供给下一个函数的内容在此函数的两次迭代之间可能完全不同。例如

*   promiseQueue[0] 可以期待一个 int 并返回一个 JSON 结构。
*   promiseQueue[1] 可以期待一个 JSON 结构并返回一个字符串。
*   等等。

# ios - UIReturnKey 未显示在 UIKeyboardTypeDecimalPad 中

> ID：15290465
> 
> 赞同：0
> 
> 时间：2013-03-08T09:16:44.060
> 
> 标签：ios, xcode, uikeyboardtype

非常简单的问题：如何将 UIReturnKey 添加到 UIKeyboardTypeDecimalPad？如果我将 分配`textField.returnKeyType = UIReturnKeyNext;`给文本字段，则不会发生任何事情（因为它通常会给出任何其他键盘类型）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:24:49.983

通常`UIKeyboardTypeDecimalPad`没有 iPhone 的返回键，但您可以使用添加自己的按钮

```
@property (readwrite, retain) UIView *inputAccessoryView 
```

的财产`UITextfield`

# jquery - 带有jquery的下拉更改功能

> ID：15290466
> 
> 赞同：0
> 
> 时间：2013-03-08T09:16:44.760
> 
> 标签：jquery, select

我有 3 选择（下拉）。

让第一个下拉菜单，第二个下拉菜单和第三个下拉菜单。我使用 jquery 更改功能。当我更改第一个下拉菜单时，会出现第二个下拉菜单。我更改了第二个下拉菜单。但没有出现第三个下拉菜单。我不知道哪里错了。请帮助我。

html:

```
 <div class='select'>
  <select class='myFirstDropdown' name='first'>
   <option value='1'>1
   <option value='2'>2
   <option value='3'>3
  </select>
 </div> 
```

JS：

```
$('.myFirstDropdown').change(function(){
//var result= $(this).val();
    $('.select').append("<select class='secondDropdown' name='second'><option value='second1'>second1<option value='second2'>Second2</select>");
});
$('.secondDropdown').change(function(){
$('.select').append("<select class='thirdDropdown' name='third'><option value='second1'>second1<option value='second2'>Second2</select>");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:13:32.573

试试这个：**[样品](http://jsfiddle.net/Rnf92/)**

```
$('.myFirstDropdown').change(function(){
    $('.select').append("<select class='secondDropdown' name='second'><option value='second1'>second1<option value='second2'>Second2</select>");
});

$('.select').on('change', '.secondDropdown', function(){
    $('.select').append("<select class='thirdDropdown' name='third'><option value='second1'>second1<option value='second2'>Second2</select>");
}); 
```

您的第二个选择框是动态添加的，因此应该使用[on()](http://api.jquery.com/on/)附加事件...

# ios - 核心数据设计设置发送用户数据和接收服务器数据

> ID：15290468
> 
> 赞同：0
> 
> 时间：2013-03-08T09:16:45.107
> 
> 标签：ios, core-data

我试图弄清楚如何设计核心数据设置。

我有一个在主线程中运行的 NSManagedObjectContext，它正在由另一个后台线程（它有自己的上下文）更新，通过使用 NSManagedObjectContextDidSaveNotification 回调更新主上下文：系统的这一部分工作正常。

我的问题是尝试保存用户数据以及如何立即向 Web 服务器发送请求以保存此数据，同时仍将其添加到主上下文中。实体对象很重要，因为在服务器上保存用户数据的请求是通过查看其属性生成的。如果该实体对象已成功更新 Web 服务器上的数据（从后台上下文到主上下文），则该实体对象应正确更新。

因此，例如，如果我要创建一个链接到主上下文的新 NSEntityDescription，我是否会监听 NSManagedObjectContextDidSaveNotification，然后创建一个后台线程，我将为该线程创建一个新上下文并发送实体对象 ID。然后这将更新主上下文并将对象实体设置为发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:18:21.660

在主线程的 managedObjects 中对 managedObjects 进行更改（但不要保存你的 moc），向服务器发送一个请求以进行更改（使用类似 NSURLConnection -sendAsynchronous 请求之类的东西），在你的完成处理程序中成功触发你自己的 NSNotification 来提醒你的控制器现在可以安全地保存 moc。如果它失败了，你可以提醒用户，使用核心数据的撤销，或者类似的东西。

# javascript - 播放 Adob e Edge 动画 仅当用户查看动画所在页面的一部分时

> ID：15290470
> 
> 赞同：0
> 
> 时间：2013-03-08T09:16:46.710
> 
> 标签：javascript, animation, onload, adobe-edge

我打算播放边缘动画，一旦在页面中查看/滚动 div 动画部分，而不是循环播放。

所以我从问答中找出并找到了[Rich Bradshaw](https://stackoverflow.com/users/16511/rich-bradshaw) 在此页面上显示的示例代码： [Adobe Edge 生成的代码是否符合良好的编程实践？](https://stackoverflow.com/questions/7665961/does-the-code-generated-by-adobe-edge-conform-to-good-programming-practice?answertab=votes#tab-top)：

这是他展示的代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Adobe EDGE TEST August 1, 2011</title>
<!--Adobe Edge Runtime-->
    <script type="text/javascript" src="edge_includes/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="edge_includes/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="edge_includes/edge.0.1.1.min.js"></script>
    <script type="text/javascript" src="edge_includes/edge.symbol.0.1.1.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="adobe_edge_test_edge.js"></script>
    <link rel="stylesheet" href="adobe_edge_test_edge.css"/>
<!--Adobe Edge Runtime End-->

<script type="text/JavaScript">
<!--
function timedRefresh(timeoutPeriod) {
    setTimeout("location.reload(true);",timeoutPeriod);
}
//   -->
</script>

</head><body onload="JavaScript:timedRefresh(4000);">
    <div id="stage" class="symbol_stage">
    </div>
</body>
</html> 
```

我试图在我的示例 html 页面中实现它，我把

```
'onload="JavaScript:timedRefresh(500);" 
```

如图所示，在 BODY 标记 html 内。

结果是，边缘动画重新加载整个页面以重新播放自己。然后我尝试将“onload”部分放在我用来显示边缘动画的 div 标签内，因为我认为“onload”部分将根据插入的位置工作

```
<div id="Stage" class="EDGE-109228010" onload="JavaScript:timedRefresh(5000);"> </div> 
```

但这使得动画不起作用:(帮我解决这个问题，有没有办法让边缘动画仅在用户查看页面部分时播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:55:23.903

我在 Edge Animate 中创建了一个 creationComplete 事件处理程序，然后使用此处的 JS 代码检查 div 是否可见（[检查滚动后元素是否可见](https://stackoverflow.com/questions/487073/check-if-element-is-visible-after-scrolling)）。这是我最终得到的代码：

```
 Symbol.bindSymbolAction(compId, symbolName, "creationComplete", function(sym, e) {
     // insert code to be run when the symbol is created here
     console.log('Start');

    function isScrolledIntoView(elem)
    {
        var docViewTop = $(window).scrollTop();
        var docViewBottom = docViewTop + $(window).height();

        var elemTop = $(elem).offset().top;
        var elemBottom = elemTop + $(elem).height();

        return ((elemBottom >= docViewTop) && (elemTop <= docViewBottom)
          && (elemBottom <= docViewBottom) &&  (elemTop >= docViewTop) );
    }         

     $(window).on("scroll", function(e) {
         if(isScrolledIntoView(sym.element)) {
            console.log('Start me up'); 
             sym.play(0);
             $(window).off("scroll");
         }
     });

  }); 
```

# magento - 如何取消设置 Magento 错误消息会话？

> ID：15290473
> 
> 赞同：6
> 
> 时间：2013-03-08T09:16:54.540
> 
> 标签：magento

我需要在 magento 中为以下代码取消设置错误消息会话。

```
Mage::getSingleton('core/session')->addError($message); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-08T09:24:40.753

您应该能够使用以下代码，尽管它会返回所有消息（它不会回显它们），但它会清除它们：

```
Mage::getSingleton('core/session')->getMessages(true); // The true is for clearing them after loading them 
```

我希望这回答了你的问题。^_^

# asp.net - 带有网页 2 的 Razor 2

> ID：15290478
> 
> 赞同：1
> 
> 时间：2013-03-08T09:17:08.437
> 
> 标签：asp.net, asp.net-webpages, razor-2

我无法让 Razor 2 视图引擎与我的网页项目一起使用。我安装了 Web Matrix 和所有东西，但很明显，使用的是 Razor 1 引擎，因为波浪号功能 (href="~/style.css") 不起作用。

我试图修改我的配置文件并引用 Razor 2 dll 文件，但它仍然无法正常工作。

这是我的配置文件的样子：

```
<?xml version="1.0"?>
<configuration>

  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>

  <appSettings>
    <add key="webpages:Enabled" value="true"/>
  </appSettings>

  <system.web>
    <compilation debug="true"/>
  </system.web>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:27:23.223

当您查看 bin 文件夹中的 System.Web.WebPages.dll 时，您会看到哪个版本？（例如我的是 v2.0.20710.0）

如果您使用的是最新的 Webmatrix v2 Rel 2，不知道为什么会有旧版本，但您可以在此处找到您感兴趣的程序集：

```
C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v2.0\Assemblies 
```

***基于评论线程更新：***

Adrian Rosca 最终在 VS2012 中完成这项工作的是引用所有以下程序集并使它们*“复制本地”*：

*   System.Web.Razor.dll*   System.Web.WebPages.Deployment.dll*   System.Web.WebPages.dll*   System.Web.WebPages.Razor.dll。

     ~~***编辑：***~~

    您可能想尝试将***targetFramework="4.0"***添加到您的 web.config 编译条目中：

    ```
     <compilation debug="true" targetFramework="4.0" /> 
    ```

    ~~查看以下 SO 帖子以了解更多信息，具体取决于您部署 Web 应用程序的位置，它对您是否真的很重要：
    [如果我不指定 targetFramework="4.0" 会发生什么？](https://stackoverflow.com/questions/2961130/what-happens-if-i-dont-specify-targetframework-4-0)~~

# php - 通过 PHP 向 MySQL 添加数据

> ID：15290480
> 
> 赞同：1
> 
> 时间：2013-03-08T09:17:13.563
> 
> 标签：php, mysql, insertion-sort

我有一个以下类型的结构表。网址数据似乎很好。间隔值 (B1 B2 B3) 设置为整数类型的 1。

```
 DateToBook          | B1 | B2 | B3 | 
 ------------------------------------
  8March2013         | 1  |  1 |  1 | 
```

我无法插入值。上述结构的baycount是3。

```
 <?php
   $DB_hostname = "localhost";
   $DB_Name = "root";
   $DB_pass = "pass123";

   if(isset($_GET["tabName"])){
       $tableName = $_GET["tabName"];
       $dB = $_GET["db"];
       $bayCount = $_GET["bayNo"];
       $date =  $_GET["d"];
       $b = '1';
    }

   $con = mysql_connect($DB_Hostname,$DB_Name,$DB_pass) or die(mysql_error());

   mysql_select_db($db, $con);

   $_bayColumn = array();
   for ($i = 1; $i <= $bayCount; $i++) {
      $_bayColumn[] = "B$i";
   }
   echo $_bayColumn[0];

   mysql_query("INSERT INTO $tableName (DateToBook) VALUES ($date)");

   for ($j =0; $j < $bayCount; $j++) {

   mysql_query("UPDATE $tableName SET $_bayColumn[$j] = '$b'  WHERE DateToBook = '$date'");

   }

  mysql_close($con);
  ?> 
```

语法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:24:37.587

你的问题是`$b`只存在于下面的`if`语句中。如果`$b`始终为 1，为什么不直接写`1`在查询中而不是`$b`

或将其更改为以下内容：

```
$b = '1'; //Place it here
if(isset($_GET["tabName"])){
   $tableName = $_GET["tabName"];
   $dB = $_GET["db"];
   $bayCount = $_GET["bayNo"];
   $date =  $_GET["d"];
   $b = '1'; //You can get rid of this now
} 
```

此外，我完全同意上面的评论，你应该使用 MySQLI 或 PDO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:28:41.663

你可以`die("INSERT INTO $tableName (DateToBook) VALUES ($date)")`用来检查你是否得到了正确的值。

# django - 表单上的 django-registration 自定义字段

> ID：15290482
> 
> 赞同：0
> 
> 时间：2013-03-08T09:17:22.823
> 
> 标签：django, django-forms, django-registration

我已经成功地扩展了基本的 django-registration 表单，表单上有自定义字段，它工作正常。现在困扰我的是，它的工作方式。我已经定义了新的后端与扩展 DefaultBackend 的注册方法

```
class MyBackend(DefaultBackend):
   def register(self, request, **kwargs): 
```

创建了将 User 对象作为外键保存的 UserProfile 模型

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, unique=True)
    custom_filed = models.CharField(max_length=200, blank=True) 
```

和定义的形式

```
class UserRegistrationForm(RegistrationForm):
    custom_field = forms.CharField(widget=forms.TextInput(attrs=attrs_dict))

    model = UserProfile 
```

网址中提供的

```
url(r'^accounts/register/$',  register, {'backend': 'app.regbackend.MyBackend','form_class':UserRegistrationForm},name='registration_register') 
```

它工作正常，custom_field 以我在注册方法中定义的方式保存。令我困扰的是注册表单（模板）仅显示在`RegistrationForm`（用户名，电子邮件，密码）模型中定义的字段，我必须将我的`custom_field`手动添加到表单类。我不明白为什么会这样，因为模型属性指向`UserProfile`，如果我`custom_field`从表单类中删除它就不会显示。为什么会这样？

# sql - Plsql 语句不适用于 ANT

> ID：15290485
> 
> 赞同：1
> 
> 时间：2013-03-08T09:17:30.630
> 
> 标签：sql, ant, plsql, sqlplus

我有一个包含以下内容的文件：

> -- KERNEL72 - SWIFT Silver 更改开始
> 
> /*
> 
> 删除同义词 ispkss_vals
> /
> 
> 为 ispks_vals 创建同义词 ispkss_vals
> /
> 
> */-- KERNEL72 - SWIFT Silver 更改在以下行之后结束
> 
> 创建或替换 ispks_vals 的同义词 ispkss_vals
> /

这在 SQL Plus 中正确编译。但是在使用 ANT 编译时，出现以下错误：

> ```
> [sql] Failed to execute: 
> ```
> 
> [sql] -- KERNEL72 - SWIFT Silver 更改开始
> [sql] /*
> [sql] drop synonym ispkss_vals
> [sql] java.sql.SQLException: Invalid SQL type
> [sql] 无法执行：
> [sql] create synonym ispkss_vals for ispks_vals
> [ sql] java.sql.SQLSyntaxErrorException: ORA-00955: name is already used by an existing object [sql] Failed to execute:
> [sql] */-- KERNEL72 - SWIFT Silver 更改在以下行后结束
> [sql] 创建或替换ispks_vals
> [sql] java.sql.SQLSyntaxErrorException 的同义词 ispkss_vals：ORA-00900：无效的 SQL 语句

我使用以下 ANT 脚本进行编译：

```
 <sql driver="oracle.jdbc.driver.OracleDriver"
        url="jdbc:oracle:thin:@10.184.1.13:1521:UPP"
        userid="${UsernameB}"
        password="${PasswordB}"
        onerror="continue"
        strictDelimiterMatching="false"
        delimiter="/"
        keepformat="yes"> 
```

请就为什么 ANT 编译不正确提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:36:30.000

也许问题是您正在`/`用作语句分隔符并且还试图用`/* ... */`?

它可能将注释打开和关闭视为分隔符，创建没有意义的 sql 语句。（以`*`等开头）

# c# - 通过代码使用 RegEdit 取消注册 DLL

> ID：15290487
> 
> 赞同：0
> 
> 时间：2013-03-08T09:17:30.953
> 
> 标签：c#, .net, vb.net

我在 VB/C# .net 上工作。我创建的是 com 类，必须使用 regasm 注册才能使我的特定组件正常工作。如果我进行任何类型的开发，每次我都必须重新注册 dll。现在这很好。

但是如果我需要注册旧版本的dll。我将不得不从注册表中手动删除该条目，然后重新注册 dll。为此，我将不得不在 regedit 中手动搜索类 id，然后删除。这似乎是一个忙碌的过程，有时它不起作用。任何人都可以提出正确的方法吗？批处理文件方法会很棒。

大约有 4 个类 id 需要搜索。

谢谢

# asp.net-mvc - 在 system.web.optimization 中自定义缓存清除

> ID：15290488
> 
> 赞同：6
> 
> 时间：2013-03-08T09:17:39.510
> 
> 标签：asp.net-mvc, asp.net-optimization, system.web.optimization

在优化时从包中渲染样式时，您会得到以下信息：

```
<link href="/Content/themes/base/css?v=UM624qf1uFt8dYtiIV9PCmYhsyeewBIwY4Ob0i8OdW81" rel="stylesheet" type="text/css" /> 
```

~~不幸的是，Android 浏览器似乎没有[加载带有查询字符串](https://code.google.com/p/android/issues/detail?id=17535)的 url。~~有什么方法可以在 System.Web.Optimization 中自定义这个字符串？

* * *

**编辑：**

> 我的问题得到了解答，我尝试在用户代理字符串上检测 android 并用一个查询字符串少的链接替换到样式表。显然我遇到的问题不是因为查询字符串，而是 webfont css 的缩小版本导致它无法在 Android 股票浏览器中完全加载样式表。
> 
> Android 股票浏览器[无法加载带有转义反斜杠的 css 内容字符串，](http://forum.fork-cms.com/discussions/3xx/1052-minify-and-css-media-queries)这是 ASP.NET 缩小[器错误地缩小相同 css 内容字符串的](http://aspnet.codeplex.com/workitem/10314)一种解决方法。我最终将图标字体 css 样式放在它自己的“手工缩小”样式表上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T09:37:24.007

您可以使用禁用缓存

```
@{string path = BundleTable.Bundles.ResolveBundleUrl("~/bundle/cssCommon", false);}
//may apply manual path transformation to remove ?v= anyway
<link href=@path rel="stylesheet" type="text/css" /> 
```

或简短的形式

```
<link href="@BundleTable.Bundles.ResolveBundleUrl("~/bundle/cssCustom", false)" 
```

但是您将遇到与缓存相关的问题，而不是 android WebView 问题。另一种可能的方法是使用 Microsoft Ajax Minifier

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T20:41:15.907

不幸的是，我们目前不支持自定义版本字符串在 url 中的显示方式。

这是我们 codeplex 网站上问题的链接：[Url version issue](http://aspnetoptimization.codeplex.com/workitem/20)

同时，如果您愿意在每次更改捆绑包时手动修改捆绑包路径，您可以避免使用帮助程序，而只使用指向您每次捆绑包更改时更新的捆绑包的显式链接：

```
<link href="/Content/themes/base/css" rel="stylesheet"> 
```

或者您可以通过以下方式禁用客户端上的缓存`bundle.Cacheability = HttpCacheability.NoCache`

# c# - 为应用程序定义路由

> ID：15290490
> 
> 赞同：3
> 
> 时间：2013-03-08T09:17:43.383
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

嗨，我正在尝试为我的 URL 定义路由路径。这是目前的样子：

```
routes.MapRoute(
            name: "Category",
            url: "{controller}/DisplayBooksByCategory/{categoryId}/{pageNumber}",
            defaults: new { controller = "Home", action = "DisplayBooksByCategory" }
        ); 
```

这可行，但它不完全是我想要的。目前我的网址看起来像这样：

> `http://localhost:51208/Home/DisplayBooksByCategory/7/1`

我想要的是能够将 categoryId 替换为实际的类别名称。类别名称不会作为参数传递给操作，只有 categoryId。这是我的操作：

```
 public ActionResult DisplayBooksByCategory(int pageNumber, int categoryId)
    {
        int bookByCategoryCount = bookRepository.CountBooksByCategory(categoryId);
        var entities = new BooksAndCategories
        {
            Books = bookRepository.GetBookByCategory(categoryId, pageNumber, numberOfBooksOnPage),
            PageNumber = pageNumber,
            LastPageNumber = (bookByCategoryCount / numberOfBooksOnPage) + 1,
            NumberOfBooksPerPage = numberOfBooksOnPage,
            Categories = categoryRepository.GetCategories(),
            CurentPage = "ProductManager",
            CurentCategory = categoryId
        };
        return View("DisplayBooksByCategory", entities);
    } 
```

有没有办法使用路由 API 来做到这一点而无需修改操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:21:40.363

如果您没有在请求中传递类别 ID，您打算从哪里获取它？那是不可能的。类别 ID 应保留为 url 的一部分，但您可以在路由中包含友好的类别名称参数。但不要指望 id 会自动来自某个地方。

就像 StackOverflow 为问题做的一样。查看您的浏览器地址栏。您应该看到如下内容：

```
https://stackoverflow.com/questions/15290490/defining-routing-for-application 
```

请注意问题 ID 和用户友好的问题标题。这个标题纯粹是为了展示的目的，完全被忽略了。如果需要，您可以将其替换为任意字符串。重要的部分是将唯一标识实体（即 id）的内容。

当然，如果您的类别名称是唯一的，您可以使用类别名称而不是路线中的 id。另外，如果您这样做，请不要忘记在 url 的路径部分中不允许使用一些特殊字符这一事实。Scott Hanselman 写了一篇[`nice blog post`](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)关于这个主题的文章。您将需要过滤掉那些危险的字符，并用所谓的*slug*替换实际的类别名称。例如，StackOverflow 如何做到这一点：[https ://stackoverflow.com/a/25486/29407](https://stackoverflow.com/a/25486/29407)

# android - 移动两个图像视图问题

> ID：15290503
> 
> 赞同：0
> 
> 时间：2013-03-08T09:18:32.527
> 
> 标签：android

嗨，我正在尝试独立移动两个图像视图。我的问题是我能够正确移动第一个，但第二个有问题。我一触摸它，它就会移出屏幕。如果两个 ImageViews 都在同一个位置，它工作正常。但是如果问题非常基本，我需要它是不同的对不起这是任何人帮助的代码吗？

```
int windowwidth;
    int windowheight;      
    ImageView ima1,ima2;
    Rect rect=null;

    private android.widget.RelativeLayout.LayoutParams layoutParams ;
   // private android.widget.RelativeLayout.LayoutParams layoutParams ;
    //private android.widget.RelativeLayout.LayoutParams layoutParams ;         

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.touch);

       /* Display display = getWindowManager().getDefaultDisplay(); 
        int width = display.getWidth();
        int height = display.getHeight();*/

        windowwidth = getWindowManager().getDefaultDisplay().getWidth()-130; 
        windowheight = getWindowManager().getDefaultDisplay().getHeight()-165;

        System.out.println("width" +windowwidth);
        System.out.println("height" +windowheight);             

        ima1 = (ImageView)findViewById(R.id.icon);
        ima2 = (ImageView)findViewById(R.id.icon1);
        ima2.setX(250);
        ima2.setY(1000);
        ima1.setOnTouchListener(new View.OnTouchListener() {  

            public boolean onTouch(View v, MotionEvent event) {

                layoutParams = (RelativeLayout.LayoutParams) ima1.getLayoutParams();

              //  layoutParams = (RelativeLayout.LayoutParams ima1.getLayoutParams();

                switch(event.getAction())

                {
                    case MotionEvent.ACTION_DOWN:                           
                        break;                   
                    /*case MotionEvent.ACTION_CANCEL:
                        break;*/
                    case MotionEvent.ACTION_MOVE:
                        int x_cord = (int) event.getRawX();
                        int y_cord = (int) event.getRawY();

                        System.out.println("value of x" +x_cord);
                        System.out.println("value of y" +y_cord);            

                        if (x_cord > windowwidth) {
                            x_cord = windowwidth;
                        }
                        if (y_cord > windowheight) {
                            y_cord = windowheight;
                        }
                        layoutParams.leftMargin = x_cord-25;
                        layoutParams.topMargin = y_cord-25;
                 //       layoutParams.rightMargin = x_cord-25;
                  //      layoutParams.bottomMargin = y_cord-25;
                        ima1.setLayoutParams(layoutParams);
                        break;
                    default: break;
                }  
                return true;
            }
        });

        ima2.setOnTouchListener(new View.OnTouchListener() {         

            public boolean onTouch(View v, MotionEvent event) {
                layoutParams = (RelativeLayout.LayoutParams) ima2.getLayoutParams();
                switch(event.getActionMasked())
                {
                    case MotionEvent.ACTION_DOWN:
                         // rect = new Rect(v.getLeft(), v.getTop(), v.getRight(), v.getBottom());

                        break;
                    case MotionEvent.ACTION_MOVE:

                    //  if(!rect.contains((int)event.getX(), (int)event.getY())){

                //      }
//                      else

                        {
                        int x_cord = (int) event.getRawX();
                        int y_cord = (int) event.getRawY();

                        System.out.println("value of x1" +x_cord);
                        System.out.println("value of y1" +y_cord);                          

                        if (x_cord > windowwidth) {
                            x_cord = windowwidth;
                        }
                        if (y_cord > windowheight) {
                            y_cord = windowheight;
                        }

           layoutParams.leftMargin = x_cord - 25;
                        layoutParams.topMargin = y_cord - 75;
                        ima2.setLayoutParams(layoutParams);
                        }
                        break;
                    default: break;
                }
                return true;
            }
        });
    }
}   

XML here

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout  
    xmlns:android="http://schemas.android.com/apk/res/android"  
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent">  
   <ImageView
     android:id="@+id/icon"
     android:layout_width="40dp"
     android:layout_height="40dp"
     android:src="@drawable/icon" />      
  <ImageView
     android:id="@+id/icon1"
     android:layout_y="30dip" 
     android:layout_x="118dip"
     android:layout_width="40dp"
     android:layout_height="40dp"
     android:src="@drawable/icon1" />
  <Button
     android:id="@+id/getvalue"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true"
     android:layout_marginBottom="25dp"
     android:text="Reset"
     android:textSize="30dp" />

 </RelativeLayout> 
```

# p2p - Put.io 之类的服务如何运作？

> ID：15290505
> 
> 赞同：1
> 
> 时间：2013-03-08T09:18:46.437
> 
> 标签：p2p, bittorrent

刚刚受邀访问 put.io ...这是一项服务，它以 torrent 文件（或磁力链接）作为输入，并提供可从其自己的服务器下载的静态文件。我一直在试图了解这样的服务是如何工作的？

它不能像简单地下载网站并通过 CDN 提供服务那么简单......可以吗？因为它提供的速度对我来说似乎非常快

关于服务的带宽影响（或使用量）有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T02:52:02.307

我相信像这样的服务通常只是在具有快速链接的强大机器上运行一个或多个 bittorrent 客户端。您只需在有人第一次请求时下载该种子，然后您可以将其缓存以供下一个请求它的人使用。

带宽使用并非不合理，因为您正在缓存文件，实际上您最终使用的带宽比您简单地为人们代理下载要少。

我想使用 CDN 不会很常见。这涉及到一定的开销。一旦您确定这些文件将继续流行，您就可以将缓存中的文件提升到 CDN。

我参与的服务只运行了 14 个 libtorrent 实例，每个实例都在一个单独的驱动器上，使用 nginx 直接从这些驱动器提供完整的文件。从 Web 前端请求种子并在移交给下载器之前对其进行优先级排序。每个实例将并行下载大约 70 个左右的种子。

# css - IE8 不应用 CSS 加载文件并将类添加到 DOM 对象

> ID：15290510
> 
> 赞同：0
> 
> 时间：2013-03-08T09:19:04.937
> 
> 标签：css, internet-explorer, styles, render

我在使用宝贵的 Internet Explorer 8 时遇到了一些问题。我们正在为酒店开发 CMS，一切都很好，直到不久前 IE8 停止正确渲染前端。这是[公共网站的演示](http://hotel.xandercms.com/en/home/)，顶部导航和菜单条在 IE8 中被弄乱了。与页脚右侧的“付款方式”相同，应显示已接受付款方式的小图标。

问题是，我们确实有一个处理 IE 问题的特殊 CSS 文件，它已加载到网站上，但 IE 并未将其应用于元素。此外，在我的本地计算机上，其他 CSS 文件（非条件）正在 IE 中加载，但浏览器不应用样式。

就像这样：

*   CSS 文件已加载
*   类应用于标签
*   但样式不适用于这些类（！）

现在这种行为发生在某些页面上，而不会发生在其他页面上（很少）。例如，在[此页面上](http://hotel.xandercms.com/en/rooms/)，菜单条就可以了。我在 IE 中读到了类似的问题[is not rendering the CSS](https://stackoverflow.com/questions/14989737/ie-isnt-rendering-the-css) and [js dom injection elements don't pick up CSS styles in IE](https://stackoverflow.com/questions/2424617/javascript-dom-injected-elements-dont-pick-up-css-styling-in-ie)。问题是这种行为已经在办公室以及家里的其他 PC 上重现。我对此感到很困惑。

有没有其他人遇到过类似的问题？如果是这样，你修了吗？你是怎么解决的？谢谢大家！

# jquery - 尝试添加多个项目，得到一个不稳定的结果

> ID：15290511
> 
> 赞同：1
> 
> 时间：2013-03-08T09:19:06.990
> 
> 标签：jquery, add

我正在尝试通过下拉列表将多个 div 添加到页面中。

我遇到的问题：

```
var antal =  $('.room-holder').size();
var roomholder = '<div class="room-holder">' + $('.room-holder').html() + '</div>';
var rooms = "";

while ( $( this ).val() > ( antal + 0 ) ) {
    rooms = rooms + roomholder;
    antal++;
}

$( rooms ).insertAfter( $('.room-holder') );
rooms = ""; 
```

我也尝试过这样的 for 循环：

```
var many = ( $( this ).val() - antal );

for( i=0; i < many; i++){
    rooms = rooms + roomholder;
}

$( rooms ).insertAfter( $('.room-holder') );
antal =  $('.room-holder').size();
rooms = ""; 
```

下拉列表的值从 1 - 10

当我第一次选择时，我得到了正确数量的字段，但是当我第二次选择时，我得到了应该添加的数量加上 2-3 个字段。

有谁知道为什么？

编辑：我将它添加到 jsfiddle：http: [//jsfiddle.net/gmKJw/](http://jsfiddle.net/gmKJw/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:35:41.653

错误是要插入的房间被附加到每个`roomholder`已经存在的房间。演示：[小提琴](http://jsfiddle.net/Ejbra/4/)

`room-holder`解决方法是在最后一个之后附加到新的`room-holder`

改变

```
$( rooms ).insertAfter( $('.room-holder') ); 
```

到

```
$( rooms ).insertAfter( $('.room-holder:last') ); 
```

演示：[小提琴](http://jsfiddle.net/Ejbra/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:39:03.337

如果您在下拉列表中选择的房间数量少于当前显示的房间数量，则可能会出现逻辑错误。我会提出以下解决方案（其中包括其他风格改进）：

```
var numRoomsReqd = parseInt( $(this).val(), 10);
var numCurrRooms =  $('.room-holder').length;        // use length, not size
var $roomholder = $('.room-holder').first().clone();
var $rooms = $();
$('.room-holder').slice(numRoomsReqd).remove()

while ( numCurrRooms < numRoomsReqd ) {
    $rooms = $rooms.add($roomholder.clone());
    numCurrRooms++;
}

$rooms.insertAfter( $('.room-holder').last() ); 
```

# regex - 查找由字符多次包围的文本

> ID：15290512
> 
> 赞同：0
> 
> 时间：2013-03-08T09:19:10.847
> 
> 标签：regex, perl

**问题：**

在包含的文件中查找文本片段`@`

输入：

```
@abc@ abc @ABC@
cba @cba@ CBA 
```

输出：

```
@abc@ @ABC@
@cba@ 
```

我尝试了以下方法：

```
cat test.txt | perl -ne 'BEGIN { $/ = undef; } print $1 if(/(@.*@)/s)."\n"' 
```

但这会导致：

```
@abc@ abc @ABC@
cba @cba@ 
```

补充：我不完整。上面的目标是用其他东西替换@之间的字符：a应该变成chr（0x430）b应该变成chr（0x431）c应该变成chr（0x446）A应该变成chr（0x410）B应该变成chr（ 0x411) C 应该变成 chr(0x426) 所以考虑到上面的输入，它应该导致： `абц abc АБЦ` `cba цба CBA`

对不起我的不完整。谢谢克鲁瑟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:32:15.497

问题`(@.*@)`在于它`*`是贪婪的：它匹配尽可能多的数量。因此它将匹配`@`字符串中第一个和最后一个之间的所有内容。

您可以使用`(@.*?@)`. 但是，更好的方法是匹配不在`@`两者之间的所有内容：

```
 (@[^@]*@) 
```

如果您想匹配每一个匹配项而不是第一个匹配项，您还需要使用`/g`修饰符并修改您的代码以使用循环：

```
perl -ne 'BEGIN { $/ = undef; } print $1 while(/(\@[^@]*\@)/gs); print "\n"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:21:55.777

像这样使用模式

```
@[a-zA-Z]+@ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:26:26.380

使用这个正则表达式：

```
cat test.txt | perl -pe 's/(?:(@ )|^[^@]).*?(?: (@)|$)/$1$2/g' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:27:48.893

使用非贪婪搜索`.+?`或`/(\@([^@]*)\@)/gsm`.

```
cat test.txt | perl -ne 'BEGIN { $/ = undef; } print $1." " while(/(\@([^@]*)\@)/gsm); print "\n";' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T09:31:09.587

单程：

```
$ perl -pe '@a=$_=~/@[^@]+@/g; $_="@a";' file
@abc@ @ABC@ @cba@ 
```

# python - 嵌套属性的 Pythonic 切片

> ID：15290521
> 
> 赞同：0
> 
> 时间：2013-03-08T09:19:37.180
> 
> 标签：python, list, dictionary, iterator, slice

我正在处理其属性有时是列表的类，其元素可以是字典或具有属性的进一步嵌套对象等。我想执行一些切片，在我掌握 python 的情况下，只有在感觉非常非 Pythonic 的情况下才可行。

我的最小代码如下所示：

```
class X(object):
    def __init__(self):
       self.a = []

x=X()
x.a.append({'key1':'v1'})
x.a.append({'key1':'v2'})
x.a.append({'key1':'v3'})

# this works as desired
x.a[0]['key1'] # 'v1' 
```

我想对嵌套字典中的键执行访问，但对包含该字典的列表的所有元素进行调用。执行此操作的标准 python 方式将是一个列表理解：

```
[v['key1'] for v in x.a] 
```

但是，我的最小示例并不能完全传达我真实场景中嵌套的全部范围：`a`类中的属性列表`X`可能包含对象，其属性是对象，其属性是字典，我想在迭代时选择其键外部列表。

```
# I would like something like
useful_list = x.a[:]['key1'] # TypeError: list indices must be integers, not str
# or even better
cool_list = where(x.a[:]['key1'] == 'v2') # same TypeError 
```

如果我开始理解每个有趣的键的列表，它很快看起来并不像 Pythonic。有没有一种很好的方法可以做到这一点，还是我必须为所有可能的列表和字典键配对编写“getter”方法？

更新：我一直在阅读有关重载列表的信息。显然，人们可能会弄乱**getitem**方法，该方法用于列表的索引和 dict 的键。也许是一个迭代列表成员的自定义类。这听起来开始做作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T07:08:15.070

因此，您想要创建一个层次结构，其操作对不同类型意味着不同的事物，并且是递归定义的。多态性来拯救。

您可以覆盖`__getitem__`而不是我的`get_items`下面，但在您的情况下，最好定义一个非内置操作以避免冒歧义的风险。这真的取决于你。

```
class ItemsInterface(object):
    def get_items(self, key):
        raise NotImplementedError

class DictItems(ItemsInterface, dict):
    def __init__(self, *args, **kwargs):
        dict.__init__(self, *args, **kwargs)
    def get_items(self, key):
        res = self[key]
        # apply recursively
        try:
            res = res.get_items(key)
        except AttributeError:
            pass
        return res

class ListItems(ItemsInterface, list):
    def __init__(self, *args, **kwargs):
        list.__init__(self, *args, **kwargs)
    def get_items(self, key):
        return [ x.get_items(key) for x in self ]

x = ListItems()
x.append(DictItems({'key1':'v1'}))
x.append(DictItems({'key1':'v2'}))
x.append(DictItems({'key1':'v3'}))
y = DictItems({'key1':'v999'})
x.append(ListItems([ y ]))
x.get_items('key1')
=> ['v1', 'v2', 'v3', ['v999']] 
```

当然，这个解决方案可能不是您所需要的（您没有解释如果缺少密钥等应该做什么），但您可以轻松修改它以满足您的需求。

`ListItems`此解决方案还支持`DictItems`. 该`get_items`操作以递归方式应用。

# java - Java 附加 API：UnsatisfiedLinkError

> ID：15290526
> 
> 赞同：6
> 
> 时间：2013-03-08T09:20:05.553
> 
> 标签：java, linux, java-native-interface, dynamic-linking, jvmti

使用 时`Java Attach API`，我仅在**Linux**上收到以下链接错误（在不同的机器上尝试过）：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: sun.tools.attach.WindowsAttachProvider.tempPath()Ljava/lang/String;
        at sun.tools.attach.WindowsAttachProvider.tempPath(Native Method)
        at sun.tools.attach.WindowsAttachProvider.isTempPathSecure(WindowsAttachProvider.java:74)
        at sun.tools.attach.WindowsAttachProvider.listVirtualMachines(WindowsAttachProvider.java:58)
        at com.sun.tools.attach.VirtualMachine.list(VirtualMachine.java:134)
        at sun.tools.jconsole.LocalVirtualMachine.getAttachableVMs(LocalVirtualMachine.java:151)
        at sun.tools.jconsole.LocalVirtualMachine.getAllVirtualMachines(LocalVirtualMachine.java:110)
        ... 
```

有趣的是，在**Solaris 和 Windows 上，它**开箱即用。

我尝试了几种指定`java.library.path`指向包含`libattach.so`但没有运气的目录的组合。

**这里有什么问题？**

*还有一个额外的问题*：
有没有办法查看哪个本机库实际上绑定到了 java 类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T10:48:39.070

在不同的平台上使用不同的 AttachProvider。在 Linux 上，它不应该使用 sun.tools.attach.WindowsAttachProvider。它适用于 Windows。

```
[solaris] sun.tools.attach.SolarisAttachProvider
[windows] sun.tools.attach.WindowsAttachProvider
[linux]   sun.tools.attach.LinuxAttachProvider 
```

这是在资源文件 META-INF\services\com.sun.tools.attach.spi.AttachProvider 中配置的（通常该文件存在于 tools.jar 中）。它将搜索 CLASSPATH 以获取此资源文件的第一次出现并从中读取 AttachProvider 实现类。

因此，您可以通过在 CLASSPATH 中搜索 sun.tools.attach.WindowsAttachProvider 来解决此问题。可能您已经包含了来自 Windows 的 tools.jar。

# java - Javascript 在 Servlet 连接上被截断

> ID：15290527
> 
> 赞同：1
> 
> 时间：2013-03-08T09:20:09.660
> 
> 标签：java, javascript, http, servlets, get

我写了一个 Servlet，它应该像一个网络代理。但是当我加载页面时，一些 Javascript GET 调用仅返回部分原始内容，例如`localhost:8080/Proxy?requestURL=example.com`.

将 java 脚本的内容打印到控制台时，它们是完整的。但是浏览器的响应被截断了。

我是这样写的：

```
ServletOutputStream sos = resp.getOutputStream();
OutputStreamWriter writer = new OutputStreamWriter(sos);
..
String str = content_of_get_request
..
writer.write(str);
writer.flush();
writer.close(); 
```

奇怪的是，当我直接请求页面请求期间加载的 Javascript 时，如下所示：

```
localhost:8080/Proxy?requestURL=anotherexaple.com/needed.js 
```

整个内容返回给浏览器。

如果有人有想法，那就太好了。问候

更新：

问题是我创建响应字符串的方式：

```
while ((line = rd.readLine()) != null)
{
    response.append(line);
} 
```

我从 Stream 中读取了一行并将其附加到 StringBuffer 上，但似乎 firefox 和 chrome 对此有问题。似乎某些浏览器为 JavaScript 实现了最大行长，但是 RFC HTTP 1.1 标准中没有提到最大行长。

使固定：

只需在该行中添加“\n”即可解决问题。

```
response.append(line+"\n"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:29:50.400

因为您所做的只是读取 Html Response ，但实际上并没有调用 HTML 中引用的其他资源，例如图像、js 等。

当您通过 Firebug for Firefox 监视浏览器如何呈现 html 时，您可以观察到这一点。

1) 浏览器收到 Html 响应。

2）然后它解析引用的资源并为每个资源进行单独的 Get 调用。

因此，为了让代理工作，您需要模仿这种浏览器行为。

我的建议是使用已经可用的开源库 [HTML 单元](http://htmlunit.sourceforge.net/)

# uitableview - UINavigationBar 与 UITableView 结合时缺少阴影

> ID：15290534
> 
> 赞同：2
> 
> 时间：2013-03-08T09:20:50.577
> 
> 标签：uitableview, ios6, uinavigationbar

当我尝试向导航栏添加自定义背景时，它们在表格视图顶部没有阴影。在子视图中一切都很好。

这是我使用的代码。

```
// Create resizable images
UIImage *gradientImage44 = [[UIImage imageNamed:@"navbar"]
                            resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];

// Set the background image for *all* UINavigationBars
[[UINavigationBar appearance] setBackgroundImage:gradientImage44
                                   forBarMetrics:UIBarMetricsDefault];
    // Customize NavBar Shadow
[[UINavigationBar appearance] setShadowImage:nil]; 
```

不存在投影

[![我的导航栏](../Images/2aa4dc9ff60e85bf7537d9c8f48f3b8d.png)](https://i.stack.imgur.com/DvXrJ.png)

现有的阴影

[![子视图](../Images/c13e0fe5a2356c81a5dfb7ea4baa232c.png)](https://i.stack.imgur.com/7J6Lu.png)

更新：找到这个[答案](https://stackoverflow.com/questions/14644641/navigationbar-setshadowimage-not-always-working)，但不起作用。我以完全相同的方式完成了它:-(。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T12:08:55.993

我通过重新实现导航控制器来修复它。视图层次结构看起来像这样。

```
UIView 
+- Navigation View
+- Table View 
```

我将 UIView 更改为表格视图并将其添加到 UINavigation 控制器。这解决了丢失的阴影问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:27:45.127

代替

`[[UINavigationBar appearance] setShadowImage:nil];`

和

`[[UINavigationBar appearance] setShadowImage:[UIImage imageNamed:@"SomeShadowImage"]];`

它适用于 iOS 6.0 及更高版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T11:01:43.233

我跟着@madcat 的回答。在我的情况下，UITableView 或 UITableViewController（嵌入在容器视图中）必须位于层次结构中的导航栏（拖到视图上）之上。就像导航栏是在 UITableView/Container 之后/上方用阴影绘制的

# .net - EasyNetQ 模型关闭

> ID：15290541
> 
> 赞同：2
> 
> 时间：2013-03-08T09:21:19.550
> 
> 标签：.net, rabbitmq, easynetq

我使用 EasyNetQ 实现了一个简单的 RabbitMQ 客户端。连接后，我收到通知**"Model shutdown for queue"**。这是我的代码：

```
var _bus = RabbitHutch.CreateBus(String.Format("host={0}", hostName)).Advanced;
var _exchange = Exchange.DeclareFanout(exName);
var _queue = Queue.DeclareTransient();
_queue.BindTo(_exchange, "_");
_bus.Subscribe(
 _queue,
 (msg, properties, messageReceivedInfo) =>
 {
  return Task.Factory.StartNew(() =>
  {
   Console.WriteLine(msg.Length.ToString());
  });
 }); 
```

使用更底层的方法，一切都很好（消息长度显示在控制台中）：

```
var factory = new ConnectionFactory();
factory.HostName = hostName;
var connect = factory.CreateConnection();
var channel = connect.CreateModel();
channel.ExchangeDeclare(exName, "fanout");
var resultQueue = channel.QueueDeclare(string.Empty, false, true, false, null);
string queueName = resultQueue.QueueName;
var consumer = new QueueingBasicConsumer(channel);
channel.QueueBind(queueName, exName, string.Empty);
var resultConsume = channel.BasicConsume(queueName, false, consumer);
while(true)
{
 var e = (BasicDeliverEventArgs)consumer.Queue.Dequeue();
 Console.WriteLine(e.Body.Length.ToString());
 channel.BasicAck(e.DeliveryTag, false);
} 
```

请提示，第一种方法有什么问题？

**UPD** 我用 IntelliTrace 捕获了异常：

> AMQP 操作被中断：AMQP 关闭原因，由 Peer 发起，code=406，text="PRECONDITION_FAILED - 无法在 vhost '/' 中以不同类型、持久、内部或自动删除值重新声明交换 'live'"，classId=40 , 方法 ID=10, 原因=

交换设置相同（见上文）。那么有什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:04:31.227

正如[Mike Hallow 所说，在我通过](https://stackoverflow.com/a/15309939/664054)[RabbitMQ 管理 Web 界面](http://www.rabbitmq.com/management.html)创建队列时添加了已经设置的参数之前，我遇到了同样的问题。

```
 var arguments = new Dictionary<string, object>( 2 );
    arguments.Add( "x-message-ttl", 900000 );
    arguments.Add( "x-dead-letter-exchange", "deadLetter" );
    this.requestMessageQueue = Queue.Declare( true, false, false, this.messageQueueConfiguration.RequestMessageQueueName, arguments ); 
```

您可以检查通过 RabbitMQ 管理 Web 界面设置的现有参数。

* * *

由于[最近的代码更改](http://mikehadlow.blogspot.co.uk/2013/09/easynetq-big-breaking-changes-in.html)，直接设置参数的唯一方法是通过[管理 API](https://github.com/mikehadlow/EasyNetQ/wiki/Queues)，除非您仅使用每个队列 ttl (x-message-ttl) 或过期 (x-expires) 在这种情况下您可以使用[高级 API](https://github.com/mikehadlow/EasyNetQ/wiki/The-Advanced-API#declaring-queues) .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T11:02:48.503

您是否在订阅后立即处理您的 _bus？这将关闭订阅频道。

# ruby-on-rails - 带有 Ajax 的 gmaps4rails + JQM 不起作用

> ID：15290554
> 
> 赞同：1
> 
> 时间：2013-03-08T09:22:00.500
> 
> 标签：ruby-on-rails, gmaps4rails, jquery-mobile

我正在用 rails 和 JQM 构建一个 webapp。地图在我的笔记本电脑和手机上都可以正常显示。问题是当我尝试从智能手机上保存的图标将其作为全屏应用程序启动时：

```
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black"> 
```

地图没有出现，只是一张白色的画布。当我禁用 ajax (data-ajax = false) 但页面在我的浏览器中打开并离开 webapp 时，它可以工作。

我按照以下说明进行操作： [gmaps4rails on jQueryMobile don't work](https://stackoverflow.com/questions/7735054/gmaps4rails-on-jquerymobile-dont-work)。（我不能调用 gmaps4rails(@json, false, false) 因为 gmaps4rails 只接受一个参数...）

这是我的一些代码：

应用程序.js：

```
//= require jquery
//= require jquery_ujs
//= require gmaps4rails/gmaps4rails.base
//= require gmaps4rails/gmaps4rails.googlemaps
//= require_tree .

$('#gmaps').live('pageshow',function(event){
    Gmaps.loadMaps();
}); 
```

布局：

```
 <%= javascript_include_tag "http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js" %>
  <%= javascript_include_tag "application" %>

  <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3.5&sensor=false&amp;libraries=geometry"></script>
  <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/src/infobox.js"></script>
  <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.1/src/markerclusterer.js"></script>
  <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/richmarker/src/richmarker-compiled.js"></script>

  <%= stylesheet_link_tag "https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.3.0/jquery.mobile-1.3.0.min.css", :media => "all" %>
  <%= stylesheet_link_tag "application", :media => "all" %>

  <meta name="viewport" content="width=device-width, initial-scale=1" user-scalable=no>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black"> 
```

看法：

```
<%= gmaps4rails(@markers_json) %>
<%= yield :scripts %> 
```

感谢您的帮助，这让我发疯了！

# ruby-on-rails - 使用 Rails 的身份验证错误 - 设计和 AngularJS

> ID：15290559
> 
> 赞同：8
> 
> 时间：2013-03-08T09:22:16.010
> 
> 标签：ruby-on-rails, authentication, devise, angularjs

我在 Rails 应用程序中使用 Devise 进行用户身份验证。我尝试在应用程序中使用 AngularJS 而不是默认的 rails 脚手架。问题是当我添加 before_filter :authenticate_user！在控制器中然后AngularJS调用更新/保存和删除资源不起作用说未经授权的访问（401）。这是一些代码：

资源：

```
@app.factory "employeesDB", ($resource) ->
  $resource("/employees/:id", {id: "@id"}, {update: {method: "PUT"}},
    {destroy: {method: "DELETE"}}
  ) 
```

保存动作：

```
 $scope.saveEmpl = ->
    $scope.em = new Object if !$scope.em
    employeesDB.save({}, $scope.em, (resource) ->
      $scope.employees.push(resource)
    , (response) ->
      console.log("Failed")
    ) 
```

$scope.em 是包含记录数据的对象，它使用 ng-model 绑定到 angular。

如果我删除 before_filter ：authenticate_user，一切都会完美！从控制器

```
class EmployeesController < ApplicationController
  #before_filter :authenticate_user! 
```

仅当我尝试保存/更新/删除记录时才会出现问题，只需阅读它就可以了。

有任何想法吗？？在使用 Angular 和 Devise 时，我应该遵循任何特定的指导方针吗？我是 rails 和 angularJS 的新手，因此将不胜感激详细的解释！谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T08:57:59.917

您可以将其添加到您的`app.js`：

```
myApp.config([
  "$httpProvider", function($httpProvider) {
    $httpProvider.defaults.headers.common['X-CSRF-Token'] = angular.element('meta[name=csrf-token]').attr('content');
  }
]); 
```

它将 CSRF 令牌添加到所有 Angular 请求中。

**编辑：**现在 jQuery 独立（使用[jqLit​​e](http://docs.angularjs.org/api/angular.element)）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T09:19:24.153

我发现我必须使用 CSRF 令牌。

[http://ngmodules.org/modules/ng-rails-csrf](http://ngmodules.org/modules/ng-rails-csrf)

# zend-framework2 - ZF2视图脚本路径生成

> ID：15290562
> 
> 赞同：0
> 
> 时间：2013-03-08T09:22:27.083
> 
> 标签：zend-framework2

ZF2[教程](http://framework.zend.com/manual/2.0/en/user-guide/routing-and-controllers.html)将视图脚本放入 module/Album/view/album/album 中，它说“存储在我们模块的视图目录中，位于以控制器命名的目录中”。

控制器是 AlbumController，因此它必须是“专辑”之一。但是另一张“专辑”从何而来？

我试图调试框架来解决这个问题，但是由于所有这些神奇的调用和触发的事件，我在一分钟内完全迷失了方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:26:23.413

默认结构是：

```
 view/[module]/[controller]/[action].phtml 
```

由于您有一个专辑模块和一个专辑控制器，您的视图将进入该目录。

如果您有一个名为 indexAction 的操作，那么您的视图将被称为 index.phtml

# javascript - false == (x > y) 是如何工作的？

> ID：15290563
> 
> 赞同：4
> 
> 时间：2013-03-08T09:22:33.760
> 
> 标签：javascript

我在一本书中读到了这个，只是想知道它是如何工作的，你是否会做这样的事情，以及你会这样做的原因。我知道你可以回来`(x>y)`，但你为什么要这样做`false == (x > y)`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T09:25:24.760

这只是一种更冗长的写作方式

```
x <= y 
```

的结果`x > y`被评估并与 比较`false`。由于结果`x > y`是布尔值，因此与写入相同

```
!(x > y)  // an == true is implied here if you don't add it yourself 
```

这当然和写作一样

```
x <= y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:27:56.973

*   `if(x <= y)`
*   `if(!(x > y))`
*   `if((x>y) == false)`

它们都评估为相同的条件。只是写法不同而已。我通常更喜欢使用更易读的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T09:40:38.903

假设我们有三个变量并且都取二进制值。我们可以用它来实现一些结果。像这样。

ex : if(a==(b>c)) 代表第一种情况。

```
 A   B    C
 0   0    0
 0   0    1
 0   1    0
 0   1    1
 1   0    0
 1   0    1
 1   1    0
 1   1    1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T11:27:07.327

将不可变的值放在 == 的左侧，将变量放在右侧是很常见的结构。这是为了以防您不小心错过了其中一个等号。这样编译器将突出显示您的错误。

例如，您是否不小心输入了

如果（a = true）{...}

这将始终执行大括号内的代码，因为它将 a 的值设置为 true。

但是，如果您不小心输入

如果（真 = a）{...}

编译器应该提醒您，因为您无法更改 true 的值

尽管在这个特定的例子中，有更好的方法来编写表达式，而不需要双等号（参见前面的所有答案）

# java - 在捕获异常中执行前面的步骤

> ID：15290565
> 
> 赞同：0
> 
> 时间：2013-03-08T09:22:42.713
> 
> 标签：java, exception, exception-handling

如果我发现一些特殊异常，我想重做这些步骤。

我不想再次复制代码。我怎样才能做到这一点？

```
try{
//step1
//step2
//step3
}catch(specialException1 e){
    //redo step1
    //redo step2
    //redo step3
} 
```

编辑：实际上，由于检查不同的条件，该异常是从另一个类中抛出的。当回到这个类时，由于需求，需要处理并再次执行该步骤。像 Oauth 过期的例子.. 所以需要再次刷新令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:25:14.297

首先，当其中一个步骤抛出一个`Exception`时，你为什么要再次执行它们？

如果这是一个要求，那么您可以将这些步骤组合在一起并将它们放在单独的方法中，然后在`try`和`catch`块中调用该方法。

```
try{
    mySteps();
}catch(SpecialException se){
    mySteps();
}

private void mySteps() throws SpecialException{
     // Step 1
     // Step 2
     // Step 3
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:24:54.897

将步骤导出为私有静态方法，在需要时调用它们。

如果这些步骤引发检查异常，`throws`则应将关键字添加到方法签名中。

# jquery - 根据锚标签的rel值添加类

> ID：15290568
> 
> 赞同：0
> 
> 时间：2013-03-08T09:22:55.777
> 
> 标签：jquery

我有一个 li 如下：-

```
<?php $i=0; foreach($bannerCollection as $banner): $i++; ?>
 <li><a href="#" class="pagination" rel="tab<?php echo $i;?>"><?php echo $i;?></a></li>
<?php endforeach; ?> 
```

此 php 代码生成以下 Html 代码：-

```
<div id="pettabs" class="indentmenu">
        <ul>
            <li><a href="#" class="pagination" rel="tab1">1</a></li>
            <li><a href="#" class="pagination" rel="tab2">2</a></li>
        </ul>
</div> 
```

现在我想在 rel 值的基础上再添加一个名为“selected”的类来锚定。为此我使用

```
jQuery('a.pagination').removeClass('selected').filter('a.pagination[rel=idvalue]').addClass('selected'); 
```

但它不起作用。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:31:27.997

您的`rel`属性将以“标签”开头，因此您的过滤器需要更像

```
var idvalue = 'tag2';
.filter('a.pagination[rel='+idvalue+']') 
```

目前您正在发送一个字符串`[rel=idvalue]`

编辑：最好使用类而不是 rel，因此您生成的代码将是

```
<li><a href="#" class="pagination tag1">1</a></li> 
```

然后你可以选择它

```
.filter('a.pagination.tag'+id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:41:08.033

您只是在 idvalue 周围缺少双引号。

应该：

```
.filter('a.pagination[rel="idvalue"]') 
```

# python - django 的 Komodo 7 或 8 代码完成

> ID：15290571
> 
> 赞同：5
> 
> 时间：2013-03-08T09:23:23.967
> 
> 标签：python, django, komodo

我正在使用 Komodo 7 编写我的 django/python 代码。

当我将 Eclipse 用于我的 python 东西时，我真的很喜欢一件事，那就是我可以做到：

```
assert isinstance([variable],[type]) 
```

并通过帮助 eclipse 确定特定变量的编码完成。

有没有办法使用 Komodo 来做到这一点？IsInstance 技巧在这里不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T22:10:52.787

[这个类似问题](https://stackoverflow.com/questions/1678953/komodo-python-auto-complete-type-inference-by-variable-metadata)的答案（由 interjay 提供）建议您可以添加以下提示：

```
if 0: foo = Bar() 
```

在你习惯使用的地方

```
assert isinstance(foo, Bar) 
```

没那么漂亮，当然...

编辑：它适用于我，使用 Komodo Edit 6.0.3 和 Komodo Edit 8.0.0

编辑：我也发现[了这个](http://community.activestate.com/node/6566)，这表明没有其他方法（而且不太可能很快）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T01:39:46.897

```
Go to Edit > Preferences. 
Expand the "Languages" group by clicking the [+] symbol. 
Click "Python". 
Click the little "Add..." button under "Additional Python Import Directories". 
Add the directory ABOVE your project and you should have intellisense enabled. 
```

这将允许您查看项目文件的代码完成 (Django)

# java - Java 从 listArray 中删除条目

> ID：15290574
> 
> 赞同：0
> 
> 时间：2013-03-08T09:23:36.557
> 
> 标签：java, arraylist

我有一个创建通讯录的任务。我基于良好的可用性创建了我的程序。例如，当创建一个新条目时，用户不能移动到下一个输入，直到给出一个有效的输入或者他们选择取消。在我创建程序后，我正在阅读导师给出的大学示例，而不是在添加条目之前检查有效输入，他们发送 .add 请求，然后在检测到错误数据时引发异常。

我问我的导师我是否应该这样做，因为即使我认为我的设计更好，我也不想失去分数，因为我没有按照他们的方式去做。他说我应该坚持以下例子：

```
public AddressBook()
{
    entries = new ArrayList < Entry >();
} 
```

```
public void addPerson(Entry addPerson)
{
    entries.add(addPerson);
} 
```

```
private void addCommand()
   {      

    System.out.print("Enter Full Name : ");
    String name = myScanner.nextLine();
    System.out.print("Enter House No and Street name: ");
    String street = myScanner.nextLine();
    System.out.print("Enter Town: ");
    String town = myScanner.nextLine();
    System.out.print("Enter Postcode: ");
    String postcode = myScanner.nextLine();
    postcode = postcode.toUpperCase();

    addressBook.addPerson(new Entry(name, street, town, postcode));        
   } 
```

```
public Entry(String strName, String strStreet, String strTown, String strPostcode)
    {
       name = strName;
       street = strStreet;
       town = strTown;
       postcode = strPostcode;
       try
       {
          checkDetails();
       }
       catch ( BadDataException e)
        {
            throw new RuntimeException( e.getMessage());             }
    } 
```

我尝试过这种方式并更改了：

```
throw new RuntimeException(e.getMessage()); 
```

读线

```
System.out.println( e.getMessage()); 
```

这样它就不会退出程序，但是这样做已经添加了条目，所以在给出适当的错误后，我需要删除已添加的条目。我怎样才能做到这一点？它有某种索引吗？我不知道导师为什么要你这样做，还是我没有抓住重点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:33:05.697

如果在此处调用的 Entry 构造函数中抛出异常：

```
addressBook.addPerson(new Entry(name, street, town, postcode)); 
```

它不会被添加到您的列表中。只需保留代码原样并在此处捕获异常：

```
try{
   addressBook.addPerson(new Entry(name, street, town, postcode));
catch(Exception e){
   //Tell the user what he did wrong and let him reenter
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:33:16.020

您可以在构造函数中声明已检查异常，即扩展`Exception`而不是`RuntimeException`. 然后，您将被迫在您的`addCommand`方法中处理它。

```
public AddressBook() {
    entries = new ArrayList< Entry>();
}

public void addPerson(Entry addPerson) {
    entries.add(addPerson);
}

private void addCommand() {

    System.out.print("Enter Full Name : ");
    String name = myScanner.nextLine();
    System.out.print("Enter House No and Street name: ");
    String street = myScanner.nextLine();
    System.out.print("Enter Town: ");
    String town = myScanner.nextLine();
    System.out.print("Enter Postcode: ");
    String postcode = myScanner.nextLine();
    postcode = postcode.toUpperCase();
    final Entry entry;
    try {
        entry = new Entry(name, street, town, postcode);
    } catch  (BadDataException ex) {
        System.out.println(ex.getMessage());
        return;
    }        
    addressBook.addPerson(new Entry(name, street, town, postcode));
}

public Entry(String strName, String strStreet, String strTown, String strPostcode) throws BadDataException {
    name = strName;
    street = strStreet;
    town = strTown;
    postcode = strPostcode;
    try {
       checkDetails();
    } catch(Exception ex) {
       throw new BadDataException(ex);
    }
}

private static class BadDataException extends Exception {

    public BadDataException(final Throwable cause) {
         super(cause);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:33:24.330

为什么不将您的条目添加在 a 中`try-catch`？

```
try{
    Entry entry = new Entry(name, street, town, postcode);
    addressBook.addPerson(entry);
}catch(Exception e){
    // Entry is not added into the List.
    // do something and make the user re-enter the details.
} 
```

# css - 使 HTML 输入拉伸以填充容器中的空间

> ID：15290575
> 
> 赞同：8
> 
> 时间：2013-03-08T09:23:37.863
> 
> 标签：css, html, stretch

有一个`<div id="MyDiv">`元素根据页面宽度调整大小。它包含`<input>`和`<a>`元素。

如何使`<a>`的右侧对齐`<div>`并拉伸以适合左侧和右侧`<input>`之间的可用空间？`<div>``<a>`

此外，不应该跳转到下一行，并且容器上`<a>`也有定义。这是代码：`min-width``max-width`

```
<div id="MyDiv" style="background:#AAAAAA; width:100%; min-width:300px; max-width:600px;">
    <input type="text" id="MyInput"/>
    <a id="MyButton" href="#">Button</a>
</div> 
```

和[**演示**](http://jsfiddle.net/aGHqV/3/)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T10:20:44.543

这可以通过 CSS3 轻松完成，尽管它在 IE9 或更低版本中不起作用。IE10 是第一个支持该标准的 Internet Explorer 版本。其他浏览器[已经支持](http://caniuse.com/#search=flex)相关的[灵活框](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_flexible_boxes)属性。

```
div {
  background: #AAAAAA;
  width: 100%;
  min-width: 300px;
  max-width: 600px;
  display: -webkit-flex;
}

input {
  -webkit-flex: 1;
}

a {
  margin: 0 10px;
}
```

```
<div>
  <input type="text" />
  <a href="#">Button</a>
</div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:37:18.817

最好的选择是使用 jQuery 来计算宽度。尝试这个：

```
$( window ).bind("resize", function(){
    fitInput();
});
//resize on window change

$(document).ready(function(){
   fitInput(); 
});
//resize after loading

function fitInput(){
    var divW = $("#MyDiv").width();
    var buttonW = $("#MyButton").width();
    $("#MyInput").width(divW - buttonW - 10);
}
//resize function 
```

小提琴：http: [//jsfiddle.net/Burnacid/aGHqV/4/](http://jsfiddle.net/Burnacid/aGHqV/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:13:16.077

您可以使用绝对定位：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
            <div id="MyDiv" style="position:relative;background:#AAAAAA; min-width:300px; max-width:600px;padding:0px 2px">
                <input type="text" id="MyInput" style="padding:0px;margin:0px;border:0px;width:100%;"/>
                <a id="MyButton" href="#" style="position:absolute;right:0px;top:0;padding:0px 2px; background:#aaa;">Button</a>
            </div>
        <body>
</html> 
```

[http://jsfiddle.net/uPZcW/](http://jsfiddle.net/uPZcW/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T09:43:41.737

试试这个html：

```
<div id="MyDiv" style="background:#AAAAAA; width:100%; min-width:300px; max-width:600px;">

       <input type="text" id="MyInput" style="width:74%;float:left"/>

       <a id="MyButton" href="#"  style="width:24%;float:right">Button</a>

  </div> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-07-10T22:39:13.557

我正在寻找解决这个问题的方法，或者至少我认为这是同一个问题。我也解决了。让我解释。

根据浏览器的不同，我让文本框变得太长或太短，但也注意到它有时确实符合预期。我使用`@meadia`构造来根据客户端视口大小缩放 UI，并注意到它仅在缩放为 100% 时非常适合。这导致我找到了一个不同的解决方案，或者更确切地说，指向了一个不同的问题。

我不确定所有浏览器都是这种情况，但我可以通过在我的 CSS 文件（CSS 重置部分）的开头添加一些简单的设置来解决它，添加以下内容：

```
/***************************************************/
/* Hack to make input[type='text'] fit width of
   parent element */

input {font-size: 1em;}  /* omitting [type=... deliberately */
textarea {font-size: 1em;}

/***************************************************/
/* Media scaling */

*      {margin: 0; border: 0; padding: 0;}
html   {min-width: 300px;}
body   {font-size:  80%;}  /* Default */
@media (min-width:  400px) {body {font-size:  80%;}}
@media (min-width:  600px) {body {font-size:  90%;}}
@media (min-width:  900px) {body {font-size:  95%;}}
@media (min-width: 1300px) {body {font-size: 100%;}}
@media (min-width: 1800px) {body {font-size: 110%;}}
@media (min-width: 2400px) {body {font-size: 120%;}} 
```

显然使用在缩放之前指定字体大小的 CSS 重置可以解决问题。我认为这实际上也很有意义。容易忘记的是元素并不总是从正文中正确继承，在这种情况下是文本类型输入（还有文本区域）。

确保您正在`width: 100%;`为 TD 或 DIV 中的文本框设置样式，并且您也在设置`box-sizing: border-box;`. 应该让它工作。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-03-08T09:32:48.853

只需将其添加到您的`<head>`标签中

```
input{width:92%;} 
```

# plone - 在 Plone 中安装文档查看器

> ID：15290577
> 
> 赞同：1
> 
> 时间：2013-03-08T09:23:46.667
> 
> 标签：plone, openoffice.org, libreoffice

我一直在尝试在 Plone 上安装 document.viewer，这将允许我内联查看 pdf 文档，到目前为止，我能够转换 pdf 文件并查看它们，但是当我尝试转换 .doc .ppt 文件时，它给出了以下错误，我的操作系统是Fedora。

```
 Traceback (most recent call last):
  File "/usr/local/Plone/buildout-cache/eggs/collective.documentviewer-2.2-py2.7.egg/collective/documentviewer/convert.py", line 530, in __call__
    pages = self.run_conversion()
  File "/usr/local/Plone/buildout-cache/eggs/collective.documentviewer-2.2-py2.7.egg/collective/documentviewer/convert.py", line 379, in run_conversion
    return docsplit.convert(self.storage_dir, **args)
  File "/usr/local/Plone/buildout-cache/eggs/collective.documentviewer-2.2-py2.7.egg/collective/documentviewer/convert.py", line 285, in convert
    self.convert_to_pdf(path, filename, output_dir)
  File "/usr/local/Plone/buildout-cache/eggs/collective.documentviewer-2.2-py2.7.egg/collective/documentviewer/convert.py", line 256, in convert_to_pdf
    self._run_command(cmd)
  File "/usr/local/Plone/buildout-cache/eggs/collective.documentviewer-2.2-py2.7.egg/collective/documentviewer/convert.py", line 118, in _run_command
    raise Exception(error)
Exception: Command
/usr/local/bin/docsplit pdf /tmp/tmp9c0S1q/dump.doc --output /tmp/tmp9c0S1q
finished with return code
1
and output:
Error: Could not find or load main class .usr.lib.libreoffice 
```

请注意，我已经安装了 openoffice，并且在 usr/lib 文件夹中有一个名为 libreoffice 的文件夹。Plone 作为具有管理权限的独立设备安装。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:01:00.340

[您是否安装了https://pypi.python.org/pypi/collective.documentviewer/#install-requirements](https://pypi.python.org/pypi/collective.documentviewer/#install-requirements)中的所有依赖项？

# android - 从服务提供商处获得平衡

> ID：15290578
> 
> 赞同：3
> 
> 时间：2013-03-08T09:23:46.847
> 
> 标签：android

我正在尝试创建一个应用程序来检查余额并在余额小于一定金额时提醒预付费用户说 < Rs.100

所以我使用代码检查余额

```
 Intent callIntent = new Intent(Intent.ACTION_CALL);
    callIntent.setData(Uri.parse("tel:*123#"));
    startActivity(callIntent); 
```

但是服务提供商的回复不是短信形式，而是显示为 toast 消息。如何从消息中检索值并在我的应用程序中使用它？

# java - 再次覆盖与重载

> ID：15290579
> 
> 赞同：0
> 
> 时间：2013-03-08T09:23:47.527
> 
> 标签：java, interface

考虑以下`Java` `interface`

```
public interface Script<T> {
    public T execute(Map<String,Object> args); 
} 
```

然后我们有一个

```
public interface SubScript<T> extends Script<T> {
    public T execute(String knownTypeArgument, Map<String,Object> args);
} 
```

Sub 中`knownTypeArgument`的方法总是需要这里。`execute`并且在`SubScript`接口中`public T execute(Map<String,Object> args);`不需要该方法。

我的问题是，定义一个子接口只是为了添加一个或两个参数是标准/正确的做法吗？

`SubScript`如果根本没有定义并`knownTypeArgument`传入，会导致实现中的错误代码`Map<String,Object> args`吗？

PS：两者都`execute(String knownTypeArgument, Map<String,Object> args);`应该`execute(Map<String,Object> args);`服务于完全相同的目的，只是在某些情况下`execute`需要更多信息。

PPS：根据 stackoverflow 规则，我正在寻找我遗漏的事实/要点，而不是讨论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:28:09.923

即使你写

> 并且在`SubScript`接口中`public T execute(Map<String,Object> args);`不需要该方法。

这并不意味着`execute(Map<String, Object) args)`会消失`SubScript`。该接口将具有*这两种*方法。它们可能具有相同的名称，但由于它们的签名不同，因此它们不会相互干扰。

的每个实现`SubScript`都必须实现*这两种*方法。当然，其中一种方法可以调用另一种方法，但这不是强制性的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:29:59.113

在您的情况下，任何实现 SubScript 的类都需要同时实现

```
public T execute(Map<String,Object> args); 
```

和

```
public T execute(String knownTypeArgument, Map<String,Object> args); 
```

作为两个单独的重载方法，因此上述模式不是您需要的好模式。

也许创建一个类来执行您的方法的设计目的，使用不带参数的 execute() 方法和设置任何所需参数的 setter 方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T09:31:45.887

接口应该用于定义给定行为所需的方法，因此通常以“able”后缀结尾，如可拖动或可定制的。

至于创建辅助接口只是为了添加新的方法签名，建议使用方法重载。Java 允许多个具有相同名称但参数集不同的方法共存。您可以轻松地将两种方法驻留在同一个类/接口中，并调用适合需要的方法。

# android - htc 渴望 C Location.getTime() 返回系统时间

> ID：15290582
> 
> 赞同：1
> 
> 时间：2013-03-08T09:24:06.743
> 
> 标签：android, gps, location

我有一个应用程序将系统时间与从 GPS 锁定获取的时间进行比较。如果我在我的 HTC One X 上运行该应用程序就可以正常工作。一个 X 正在运行 4.1。如果我在 HTC Desire C(2.3) 上运行该应用程序，则 Gps 的时间与系统时间相同。

例如，如果我进入手机设置并将手机的系统时间更改为向前 1 小时，那么来自 GPS 的时间也反映了这一点。谁能告诉我为什么会这样。它不是 Android 版本，因为它也适用于运行 2.3 的三星 Ace2。我认为这是特定设备的问题。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        nfcscannerapplication = (NfcScannerApplication) getApplication();
        appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(NfcBaseActivity.this.getApplicationContext());
        prefsEditor = appSharedPrefs.edit();
        mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        //setTitle(getCarername() + " is logged in");
    }

     @Override
    protected void onResume() {
         super.onResume();

         Cursor c = nfcscannerapplication.loginValidate.queryAllFromCompanyIdTable();

            if (c != null && c.getCount() > 0) {

                 mlocListener = new MyLocationListener();

                 if (Build.VERSION.SDK_INT > Build.VERSION_CODES.GINGERBREAD_MR1) {
                     mlocManager.requestSingleUpdate(LocationManager.GPS_PROVIDER, mlocListener, null);

                }else{
                    mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
                }

            }

    }

    private class MyLocationListener implements LocationListener {

            @Override
            public void onLocationChanged(Location loc) {

                if(mlocListener != null){

                 mlocManager.removeUpdates(mlocListener);
                 mlocListener = null;

                }

                DateTime dt = new DateTime(loc.getTime());
                DateTimeFormatter df3 = DateTimeFormat.forPattern("yyyy-MM-dd H:mm:ss.SSS");
                String formattedExternalTime = df3.print(dt);
                Log.e(TAG, "formatted ext time = " + formattedExternalTime);
                nfcscannerapplication.setExternalTime(dt);

                String systemExternalTimeTolerance = appSharedPrefs.getString("180", null);
                Log.e(TAG, " comp opt 180 = " + systemExternalTimeTolerance);
                long toleranceInMillis = Long.parseLong(systemExternalTimeTolerance) * 1000 * 60;
                Log.e(TAG, "toleranceInMillis = " + toleranceInMillis);

                long differenceBetweenTimes = nfcscannerapplication.getInternalTime().getMillis() - 
                     nfcscannerapplication.getExternalTime().getMillis();

                Log.e(TAG, "About to make comparison1 differenceBetweenTimes = " + differenceBetweenTimes);
                if(differenceBetweenTimes > toleranceInMillis){

                     DateTimeFormatter df4 = DateTimeFormat.forPattern("yyyy-MM-dd H:mm");
                        String formattedExternalTime2 = df4.print(dt);

                    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                            NfcBaseActivity.this);

                        // set title
                        alertDialogBuilder.setTitle("Please set your phone's system time to " + formattedExternalTime2);

                        // set dialog message
                        alertDialogBuilder
                            .setMessage("Click Ok to exit app")
                            .setCancelable(false)
                            .setPositiveButton("Ok",new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,int id) {
                                    dialog.cancel();
                                    System.exit(0);
                                }
                              });

                            // create alert dialog
                            AlertDialog alertDialog = alertDialogBuilder.create();

                            // show it
                            alertDialog.show();

                }

                long differenceBetweenTimes2 = nfcscannerapplication.getExternalTime().getMillis() - 
                     nfcscannerapplication.getInternalTime().getMillis();
                Log.e(TAG, "About to make comparison2 differenceBetweenTimes2 = " + differenceBetweenTimes2);
              if(differenceBetweenTimes2 > toleranceInMillis){

                 DateTimeFormatter df4 = DateTimeFormat.forPattern("yyyy-MM-dd H:mm");
                        String formattedExternalTime2 = df4.print(dt);

                 AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                            NfcBaseActivity.this);

                        // set title
                 alertDialogBuilder.setTitle("Please set your phone's system time to " + formattedExternalTime2);

                        // set dialog message
                        alertDialogBuilder
                            .setMessage("Click Ok to exit app")
                            .setCancelable(false)
                            .setPositiveButton("Ok",new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,int id) {
                                    dialog.cancel();
                                    System.exit(0);
                                }
                              });

                            // create alert dialog
                            AlertDialog alertDialog = alertDialogBuilder.create();

                            // show it
                            alertDialog.show();

                }

            } 
```

# c# - 将 html 文本导出为 PDF（带有内联样式）。背景颜色不起作用

> ID：15290589
> 
> 赞同：-2
> 
> 时间：2013-03-08T09:24:16.447
> 
> 标签：c#, pdf-generation, html-to-pdf

我正在开发一个将 html 数据导出到 pdf 文件（在 c# 中）的应用程序。我按照这些步骤来转换数据

```
StyleSheet styles = new StyleSheet();
tempText = tempText.Replace("\"", "&#34;");
ArrayList objects = HTMLWorker.ParseToList(new StringReader(tempText), styles);
       for (int k = 0; k < objects.Count; k++)
       {
                document.Add((iTextSharp.text.IElement)objects[k]);
       } 
```

让我们假设我的文字是否类似于

```
<h3 style="color:blue;">
       Write a Java 
       <span style="font-size:16px;">
           <span style="background-color:yellow;">
                program that prints two separate text
           </span> 
       </span>
       strings on the same line.

![ exported data in pdf is shown in the image below ][1]</h3> 
```

问题是内部跨度标记的转换失败。它不会`background-color`从样式解析。我怎样才能做到这一点？我不想使用任何第三方工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:36:29.797

在 c#.Net Web 应用程序中将 Html 字符串导出为 pdf

```
Response.ContentType = "application/pdf";
Response.AddHeader("content-disposition", "attachment;filename=LetterListing.pdf");
Response.Cache.SetCacheability(HttpCacheability.NoCache);
StringWriter sw = new StringWriter(PrintLetter());
HtmlTextWriter hw = new HtmlTextWriter(sw);
StringReader sr = new StringReader(sw.ToString());
Document pdfDoc = new Document(PageSize.A2, 7f, 7f, 7f, 0f);
HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
pdfDoc.Open();
htmlparser.Parse(sr);
pdfDoc.Close();
Response.Write(pdfDoc);
Response.End(); 
```

# windows - 现有程序的 Windows HPC 2008 调度程序？

> ID：15290590
> 
> 赞同：0
> 
> 时间：2013-03-08T09:24:17.400
> 
> 标签：windows, hpc

我需要使用 windows hpc sheduler 在现有程序的 48 分布式核心中创建分布式任务。

我如何创建一个任务，允许我在输入中使用变量文件分发一个简单的工作？

例如我想运行：

```
pgm.exe img1.png >core 1 machine 1
pgm.exe img2.png >core 2 machine 1
pgm.exe img3.png >core 3 machine 1 
```

等等

我不需要（也不想）修改现有的 exe 代码 pgm.exe

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:27:37.123

如果您可以通过命令行执行您需要执行的所有任务，您可以编写一个简单的应用程序来通过 HPC 执行此操作。

例如，如果您的命令将在目录 MyPNGFiles 中的所有 PNG 文件上执行，您可以将命令 foreach 到 HPC。我们假设我们已经将文件作为 FileInfo 对象的 List 获取并将其传递给此方法。

我们还假设您有一个 HPCSession 类，该类包装了 MS 公开的 DurableSession 或 Session 对象。此类处理您对 StartInfo 的创建，接受参数以打开与 HPC 的连接，并允许您从中生成调度程序。

```
IScheduler scheduler = new Scheduler();
scheduler.connect(HPCSession.HeadNode);

ISchedulerJob job = scheduler.CreateJob();
job.Name = "CMDLine HPCJob";

IScheduler task;
int i = 1;

foreach(FileInfo fi in files)
{
    task = job.CreateTask();
    task.Name = "Task Number " + i.ToString();
    task.CommandLine = "pgm.exe " + fi.FullName;
    job.AddTask(task);
    task.Commit();
    job.SubmitTask(task);
    task = null;
    i++;
}

job.Commit();
//A Job must be in a Configuring state before submission; usually isn't a problem but lets be sure
if (job.State != JobState.Configuring)
    scheduler.ConfigureJob(job.JobID);

scheduler.SubmitJob(job, "userName", "password"); 
```

请注意，您将希望对所有内容使用完全限定的路径；包括命令行工具。通过命令行任务在 HPC 上执行的 Job 与登录该机器并打开命令提示符并运行命令完全相同；所以在编写命令行命令时必须牢记这一点。

这是一个非常简单的实现；您可以执行其他操作，例如订阅 TaskStateChange 事件以检查集群的运行情况，例如，如果您从一个节点返回 15 个任务全部失败但其他任务没有失败，您可能希望通过打开调度程序并将该节点添加到排除节点列表中。但是在正确执行应用程序之后可能会考虑容错:)。

您还需要确保执行您的作业的 HPC 节点 a) 对文件所在的路径具有读或读/写访问权限；b) 对 exe 具有读/写/执行访问权限（或让 exe 位于 HPC 机器的本地）。

# css - CSS 分组元素的快捷方式

> ID：15290592
> 
> 赞同：0
> 
> 时间：2013-03-08T09:24:34.660
> 
> 标签：css

我有很多输入元素的 div。我需要将几个输入分组并添加一些样式：

```
div#tabs_add_invoice input#id_description,
div#tabs_add_invoice input#id_annotation,
div#tabs_add_invoice input#id_other {
    /*some style definition*/
} 
```

有什么捷径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:26:59.203

是的，您需要为要分组的 div 分配“类”
说，

```
<div id="div1" class="commonDiv"></div>
<div id="div2" class="commonDiv"></div>
<div id="div3" class="commonDiv"></div>
<div id="div4" class="commonDiv"></div> 
```

现在在您的 CSS 中，您只需要将样式表提供给 commonDiv

```
.commonDiv {
  //Your styling goes here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T09:28:31.577

我看到你的输入有一个 ID，这应该使它们独一无二，所以你不需要指定其他任何东西，比如父母。例如，`body div#content div#tabs_add_invoice input#id_description`与 相同`#id_description`。这意味着以下将执行相同的工作。

```
#id_description,
#id_annotation,
#id_other {
    /*some style definition*/
} 
```

甚至这个，但它会影响里面的所有输入`#tabs_add_invoice`

```
#tabs_add_invoice input {
    /*some style definition*/
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T09:43:41.917

> 有什么捷径吗？

是的。使用[CSS 类](http://www.w3schools.com/cssref/css_selectors.asp)来匹配元素而不是 ID。

您的输入元素可以通过分配相同的类来共享样式。像：

**CSS**

```
input.wideInput {
    width: 100%;
} 
```

**HTML**

```
<div id="tabs_add_invoice">
    <input type="text" id="id_description" class="wideInput" /> 
    <input type="text" id="id_annotation" class="wideInput" /> 
    <input type="text" id="id_other" class="wideInput" />
    <input type="text" id="id_different" />
</div> 
```

# sql-server-2008 - 集群共享磁盘可用检查失败

> ID：15290595
> 
> 赞同：0
> 
> 时间：2013-03-08T09:24:46.307
> 
> 标签：sql-server-2008

我正在做 sql cluster，我收到以下错误：-

> 集群共享磁盘可用检查失败错误

并在下面发出以下警告，从而阻止我继续安装

1.  微软集群服务（MSCS）
2.  集群验证错误
3.  窗口防火墙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-25T22:16:49.567

我知道这是一个相当老的问题，但我在自己进行集群配置时偶然发现了这个问题。现在，当我找到此类问题的原因时，我想我应该将其发布在这里，以便像我这样的人可以找到解决方案。所以这个验证在SQL server集群安装时失败的原因是windows集群中配置的唯一共享磁盘驱动器默认添加到quorum中，由于磁盘无法共享（这就是SQL server的想法，也尝试运行Windows 服务器集群验证也会失败）。

因此，要克服这个问题，请确保在配置 Windows 集群之前未添加共享驱动器。安装顺序应该是

1.  在所有节点上安装 Windows 集群（忽略存储验证）
2.  在所有节点上配置 iSCSI 驱动器
3.  在 Windows 集群中添加 iSCCI 驱动器
4.  安装 SQL server 集群（此时应该不会出现 SQL 验证失败）

我按照以下帖子单独记录了所有步骤

[https://sqlserverscribbles.com/2013/06/17/how-to-install-cluster-in-windows-2008-and-windows-2012/](https://sqlserverscribbles.com/2013/06/17/how-to-install-cluster-in-windows-2008-and-windows-2012/)

# javascript - 从文本文件中读取 iframe 的 src

> ID：15290596
> 
> 赞同：0
> 
> 时间：2013-03-08T09:24:48.930
> 
> 标签：javascript, jquery, html

我正在尝试在本地读取一个文本文件，该文件具有 eg.www.google.com 的 url，并将此字符串作为 src 传递给 iframe。但问题是 src 附加了这个：

```
//localhost/myfolder/%25/www/google.com 
```

`localhost/myfolder`我在其中使用 iframe 的文件的路径在哪里。

如果有人可以帮助我，请提前感谢。

```
function read() 
   {
   var txtFile = new XMLHttpRequest();
   txtFile.open("GET", "http://localhost/myfolder/Text.txt",true);
   txtFile.onreadystatechange = function () 
   {
   if (txtFile.readyState === 4)
{  
   // Makes sure the document is ready to parse.
   if (txtFile.status === 200)
{  
   var alltext=txtFile.responseText;
   var linetext=txtFile.responseText.split("\n");
var delimeter = '^';
var text0= linetext[0];
var splitted = text0.split(delimeter);
$('#iframe1').attr('src', splitted[1]);
   }
   }
   }
   txtFile.send(null)

   } 
```

我正在使用此代码来读取文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:32:27.730

```
<iframe src="http://www.google.com/" /> 
```

如果要显示当前页面外部的链接，则还需要指定协议（`http://`或`https://`）

试试看，让我知道结果如何！;)

**编辑**：
请参阅下面的评论 - 我对它进行了全部测试并将结果粘贴到**[Gist 粘贴中](https://gist.github.com/nicolaes/5115439)**

**编辑 2**（在下面回答@Hitesh 的评论）：
我建议在等式中插入fancybox**之前进行设置。**
当你有这个工作时，fancybox 的设置应该是一样的，就像`fancybox()`创建`<iframe />`动态的并将它插入到 DOM 中一样。
如果您有基本的 iframe 设置，请务必执行以下操作之一：

1.  打开fancybox，让它创建iframe。然后将 iframe 的 SRC 替换为您的内容。
2.  在 fancybox 实际打开*之前*`<a />`替换打开 iframe的 HREF 。在这个问题上，您可以使用[fancybox 回调。](http://fancybox.net/api)

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:31:16.537

也许您在 url 地址中犯了一个错误，因为 %25 是一个未使用的 HTML 字符代码，[请检查它](http://www.obkb.com/dcljr/charstxt.html)以获取详细信息。*

# c# - 每次按键仅允许 1 个值

> ID：15290600
> 
> 赞同：7
> 
> 时间：2013-03-08T09:24:56.543
> 
> 标签：c#, .net, winforms, richtextbox

我有一个`richtextbox`用户`windows form`可以输入文本，但需要进行设置，以便如果用户按住一个键，他们只能得到 1 个字符。

例如，如果他们`hold down A`那么它将只输入 A 而不是`AAAAAAAAAAAAAAAAAAAAAAAAAAAAA`等。

从钥匙放下的那一刻到钥匙向上的那一刻，我只希望它转换为 1 值。

有什么想法可以实现吗？

我想我需要使用`KeyDown`，`KeyUp`但我不确定过去。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T09:28:03.487

你对`KeyDown`和`KeyUp`事件是对的。你可以这样做。

```
bool keyDown = false;
bool keyPress = false;

private void richTextBox1_KeyDown(object sender, KeyEventArgs e)
{
    e.Handled = keyDown;
    keyDown = true;
}

private void richTextBox1_KeyUp(object sender, KeyEventArgs e)
{
    keyDown = keyPress = false;
}

private void richTextBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    e.Handled = keyPress;
    keyPress = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:42:24.437

您可以继承`TextBox`和覆盖`OnKeyDown`和`OnKeyUp`方法。如果`KeyUps`后面没有，只需设置为`KeyDown`忽略它。检查代码：`KeyEventArgs.SuppresKeyPress``true`

```
public class MyTextBox:TextBox
{
    bool down = false;
    protected override void OnKeyDown(KeyEventArgs e)
    {
        if (!down)
            base.OnKeyDown(e);
        else
            e.SuppressKeyPress = true;
        down = true;
    }
    protected override void OnKeyUp(KeyEventArgs e)
    {
        base.OnKeyUp(e);
        down = false;
    }
} 
```

或者，您可以像这样使用`KeyUp`和`KeyDown`事件处理程序，请注意这`SuppresKeyPress`是至关重要的：

```
bool down = false;
private void textBox1_KeyDown(object sender, KeyEventArgs e)
{
      if (down)
          e.SuppressKeyPress = true;
      down = true;
}

private void textBox1_KeyUp(object sender, KeyEventArgs e)
{
      down = false;
} 
```

# python - 在 python 的命令提示符中获取插入符号位置的跨平台方法

> ID：15290609
> 
> 赞同：2
> 
> 时间：2013-03-08T09:25:36.883
> 
> 标签：python, command-line, caret

我是 python 新手，正在寻找一种跨平台方法来获取 linux 终端或 windows 命令提示符中的当前插入符号/文本光标位置

任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:17:02.623

您正在要求 python 询问其他程序光标在哪里的方法。没有办法做到这一点，跨平台或其他方式。

根据您对这个问题的评论，听起来您想要一些不同的东西，尽管我可能错了。如果你想在命令窗口中创建一个简单的 ASCII GUI，你可以使用[curses](http://docs.python.org/2/library/curses.html)库。有了它，您可以在窗口周围移动光标，查询光标所在的位置等。

# java - 如何使用会话 ID 创建会话对象？

> ID：15290612
> 
> 赞同：0
> 
> 时间：2013-03-08T09:25:52.493
> 
> 标签：java, jsp, servlets

我想知道，如何在 java 中使用会话 ID 创建会话对象。

因为当我们通过附加 URL 传递会话 ID 时，服务器如何使用该会话 ID 创建会话对象。

他们有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:36:25.773

您不能从 Session Id 构造会话，它实际上是负责创建会话并管理它。Session Id 只是服务器传递给浏览器以唯一标识 HttpSession 并维护会话状态的唯一 ID，但实际上[HTTP 不是无状态的](http://en.wikipedia.org/wiki/Stateless_protocol)

检查下面的链接，这很简洁地解释了它

[会话如何工作](http://www.coderanch.com/t/170683/java-Web-Component-SCWCD/certification/session-works)

我强烈建议阅读[Head First Servlets 和 JSP](https://rads.stackoverflow.com/amzn/click/com/0596005407)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:26:21.700

当您`request.getSession()`在代码中再次调用（我再次说过）时，容器将自动使该会话可供您使用。我们不必担心。无论如何，如果您想知道如何处理/创建/（返回相同会话对象的引用），请使用反编译器并查看如何基于 jsessionID 创建会话对象的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:46:05.883

正如 Sudhakar 所回答的，无法使用 ID 创建会话。为什么实际上你需要这样做。如果您认为正确，那么您将不需要使用 id 创建会话。您的要求必须有另一种解决方案。分享您的确切要求，以便我们为您提供帮助。

# php - 在php中显示上次登录时间

> ID：15290620
> 
> 赞同：4
> 
> 时间：2013-03-08T09:26:20.920
> 
> 标签：php

我是 PHP 初学者。我已经制作了一个运行良好的登录和注册系统，但我希望在用户登录时显示上次登录时间。我有一个表（TIMESTAMP），它将数据存储为 2013-03-08 00:00:00 。它显示日期但不显示时间。我还想在用户登录时显示这些结果。

当数据验证成功并且设置了用户会话变量时，我正在使用以下代码。

```
$currentDate = date('Y-m-d g:i:s');
mysql_query('UPDATE `users` SET `last_sctivity` = "' . $currentDate . '"'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:37:40.233

如果您不使用代码中的任何位置，您也可以`now()`在查询中使用`$currentDate`

```
mysql_query('UPDATE `users` SET `last_sctivity` = now()'); 
```

还要确保列`last_sctivity`是`timestamp`而不是`date`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-09T09:03:22.450

你可以试试这个。我将 last_login 的数据类型设置为“时间戳”

```
$logintime = "UPDATE tbl_login SET last_login = now() where username = '$uname'";
mysqli_query($conn, $logintime); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T09:28:09.843

尝试 ：

`$currentDate = date('Y-m-d h:i:s');`

改变`g:i:s`->`h:i:s`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:41:56.853

不要在 MySQL 中使用 PHP 函数插入日期等，当 MySQL 有适当的函数时。改用 MySQL 的`NOW()`。

不建议在不需要时混合使用 PHP 和 MySQL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-22T02:43:47.633

```
$today = date('Y-m-d, g:i a');
$last = ("UPDATE users SET lastaccess = '$today'");
$query = mysqli_query($con, $last); 
```

# magento - magento 自定义扩展错误

> ID：15290623
> 
> 赞同：0
> 
> 时间：2013-03-08T09:26:26.413
> 
> 标签：magento

我正在为客户创建一个自定义 magento rma 扩展。在我的控制器文件中，当我尝试访问`$this->renderLayout();`功能时发生以下错误。

```
Attempt to add an invalid object

#0 D:\wamp\www\magentotest\app\code\core\Mage\Eav\Model\Entity\Collection\Abstract.php(263): Mage::exception('Mage_Eav', 'Attempt to add ...')
#1 D:\wamp\www\magentotest\app\code\core\Mage\Eav\Model\Entity\Collection\Abstract.php(1057): Mage_Eav_Model_Entity_Collection_Abstract->addItem(Object(sengar_Rma_Model_Item))
#2 D:\wamp\www\magentotest\app\code\core\Mage\Eav\Model\Entity\Collection\Abstract.php(871): Mage_Eav_Model_Entity_Collection_Abstract->_loadEntities(false, false)
#3 D:\wamp\www\magentotest\lib\Varien\Data\Collection.php(741): Mage_Eav_Model_Entity_Collection_Abstract->load()
#4 D:\wamp\www\magentotest\app\design\frontend\base\default\template\rma\return\view.phtml(182): Varien_Data_Collection->getIterator()
#5 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Template.php(241): include('D:\wamp\www\mag...')
#6 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Template.php(272): Mage_Core_Block_Template->fetchView('frontend\base\d...')
#7 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Template.php(286): Mage_Core_Block_Template->renderView()
#8 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#9 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#10 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Abstract.php(522): Mage_Core_Block_Abstract->_getChildHtml('rma.return.hist...', true)
#11 D:\wamp\www\magentotest\app\code\core\Mage\Page\Block\Html\Wrapper.php(52): Mage_Core_Block_Abstract->getChildHtml('', true, true)
#12 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Page_Block_Html_Wrapper->_toHtml()
#13 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Text\List.php(43): Mage_Core_Block_Abstract->toHtml()
#14 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
#15 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#16 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('content', true)
#17 D:\wamp\www\magentotest\app\design\frontend\base\default\template\page\2columns-left.phtml(48): Mage_Core_Block_Abstract->getChildHtml('content')
#18 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Template.php(241): include('D:\wamp\www\mag...')
#19 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Template.php(272): Mage_Core_Block_Template->fetchView('frontend\base\d...')
#20 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Template.php(286): Mage_Core_Block_Template->renderView()
#21 D:\wamp\www\magentotest\app\code\core\Mage\Core\Block\Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#22 D:\wamp\www\magentotest\app\code\core\Mage\Core\Model\Layout.php(555): Mage_Core_Block_Abstract->toHtml()
#23 D:\wamp\www\magentotest\app\code\core\Mage\Core\Controller\Varien\Action.php(390): Mage_Core_Model_Layout->getOutput()
#24 D:\wamp\www\magentotest\app\code\local\Sengar\Rma\controllers\ReturnController.php(227): Mage_Core_Controller_Varien_Action->renderLayout()
#25 D:\wamp\www\magentotest\app\code\core\Mage\Core\Controller\Varien\Action.php(419): sengar_Rma_ReturnController->viewAction()
#26 D:\wamp\www\magentotest\app\code\core\Mage\Core\Controller\Varien\Router\Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('view')
#27 D:\wamp\www\magentotest\app\code\core\Mage\Core\Controller\Varien\Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#28 D:\wamp\www\magentotest\app\code\core\Mage\Core\Model\App.php(354enter code here): Mage_Core_Controller_Varien_Front->dispatch()
#29 D:\wamp\www\magentotest\app\Mage.php(683): Mage_Core_Model_App->run(Array)
#30 D:\wamp\www\magentotest\index.php(87): Mage::run('', 'store')
#31 {main} 
```

该功能目前看起来像：

```
$this->loadLayout(); 
$this->_initLayoutMessages('catalog/session'); 
$this->getLayout() ->getBlock('head') ->setTitle(Mage::helper('sengar_rma')->__('RMA #%s', Mage::registry('current_rma')->getIncrementId())); 
$this->renderLayout(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:55:30.170

在文件中：frontend\base\default\template\rma\return\view.phtml，第 182 行您正在创建集合，这会导致错误 - 它与 renderLayout() 无关，导致 app\code\ 引发错误core\Mage\Eav\Model\Entity\Collection\Abstract.php:263。（集合不应该在视图中加载，而是在块中） - 修复该行和集合获取。

# c# - 消息框控件

> ID：15290625
> 
> 赞同：0
> 
> 时间：2013-03-08T09:26:31.920
> 
> 标签：c#, windows-phone-7, windows-phone

我想像消息框一样创建一个控件，但尝试使用画布或网格并不能满足我的目的，因为这些网格/画布后面的控件仍将处于活动状态。使用关于来自coding4fun的控件的提示似乎也不适合，因为我只想显示一些消息。在应禁用所有其他控件的情况下如何创建控件。禁用所有将是乏味的任务。

**编辑**

我想要的只是一个模态控件，它就像一个消息框控件。弹出窗口给了我一个无模式的控制。当显示类似弹出窗口时，可以访问其下方的控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:28:47.450

在 Windows Phone 中实现 MessageBox 的最佳方法是使用 Popup 类。CustomMessageBox 在 Windows Phone 8 上不能很好地工作。

这里是[链接](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup%28v=vs.95%29.aspx)。

# windows - CMake 错误 - 无法检测到 libjpeg 和 ADD_SUBDIRECTORY() 错误

> ID：15290626
> 
> 赞同：2
> 
> 时间：2013-03-08T09:26:32.063
> 
> 标签：windows, cmake

我正在使用 CMake 和 Visual Studio 在 Windows 中构建 Podofo 并遇到这两个问题。

一是CMake无法检测到libjpeg。

> CMakeLists.txt:312 (FIND_PACKAGE) 处的 CMake 警告：通过在 CMAKE_MODULE_PATH 中不提供“FindLIBJPEG.cmake”，该项目要求 CMake 查找“LIBJPEG”提供的包配置文件，但 CMake 没有找到。
> 
> 找不到由“LIBJPEG”提供的具有以下任何名称的包配置文件：
> 
> ```
> LIBJPEGConfig.cmake
> libjpeg-config.cmake 
> ```
> 
> 将“LIBJPEG”的安装前缀添加到 CMAKE_PREFIX_PATH 或将“LIBJPEG_DIR”设置为包含上述文件之一的目录。如果
> “LIBJPEG”提供单独的开发包或SDK，请确保已安装。
> 
> 未找到 Libjpeg。JPEG 支持将被禁用

虽然我已经在 build.cmd 文件中设置了如下命令：

```
 set LIBJPEG_DIR=D:\jpeg-9
    cmake -G "Visual Studio 10" ..\podofo-src -DCMAKE_INCLUDE_PATH="%LIBJPEG_DIR%" -DCMAKE_LIBRARY_PATH="%LIBJPEG_DIR%" -DPODOFO_BUILD_SHARED:BOOL=FALSE -DFREETYPE_LIBRARY_NAMES_DEBUG=freetype245_D -DFREETYPE_LIBRARY_NAMES_RELEASE=freetype245MT 
```

所有的 LIBJPEG 文件都在 d:\jpeg-9、头文件和 lib 文件中。为什么 Cmake 仍然无法检测到 LIBJPEG？

另一个问题是我在运行 CMake 时遇到如下错误。

> CMakeLists.txt:502 (ADD_SUBDIRECTORY) 处的 CMake 错误：
> add_subdirectory 给定的源“src”不是现有目录。

所以我搜索了 CMakeLists.txt 并找到了以下命令：

```
ADD_SUBDIRECTORY(src) 
```

是什么导致了这个错误？如何避免错误？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:46:42.587

要让 CMake 找到 libjpeg，您需要设置[`CMAKE_PREFIX_PATH`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_PREFIX_PATH)为 D:\jpeg-9 而不是[`CMAKE_INCLUDE_PATH`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_INCLUDE_PATH)or [`CMAKE_LIBRARY_PATH`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_LIBRARY_PATH)。如果 D:\jpeg-9\libjpeg-config.cmake 存在，[`find_package`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_package)则应将其拾取。

至于你的第二个问题，看起来你有一个损坏的源代码树。 `ADD_SUBDIRECTORY(src)`将需要一个名为“src”的目录存在于与 CMakeLists.txt 相同的文件夹中（可能是根文件夹？）也许在这里重新下载/结帐会有所帮助。

# c++ - 复制和分配向量有什么区别？

> ID：15290627
> 
> 赞同：-1
> 
> 时间：2013-03-08T09:26:39.090
> 
> 标签：c++, vector, initialization, assign

复制和分配向量有什么区别？第 2 行和第 4 行。

```
1    vector<int> V1(5);
2    vector<int> V3(V1);
3    vector<int> V4(V1.size());   
4    V4 = V1 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:12:46.627

第 2 行使用**复制构造函数**。第 4 行使用**复制分配**。两者都创建副本；第一个创建一个新对象，第二个覆盖现有对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:37:50.377

这是我的 stl 实现中的 doxygen 提取物`operator=`：

```
 /* All the elements of @a x are copied, but any extra memory in
   *  @a x (for fast expansion) will not be copied.  Unlike the
   *  copy constructor, the allocator object is not copied.
   */ 
```

如您所见，如果您使用自定义分配器会有所不同，但在其他情况下结果是相同的。

# php - 数组php中的排序问题

> ID：15290631
> 
> 赞同：-1
> 
> 时间：2013-03-08T09:26:46.180
> 
> 标签：php, arrays, sorting

我想对我的数组应用不同的排序，但我得到了意想不到的结果。这是我的数组结果：

```
Array ( 
[0] => Sony,HTC 
[1] => HTC 
[2] => AT&T 
[3] => Sony 
[4] => BlackBerry 
[5] => Nokia 
[6] => Toshiba 
[7] => Altori 
) 
```

当我使用它打印这个数组时，`sort($rows,SORT_ASC)`它显示`'1'.$rows`为包含元素的数组。任何人都可以找到这里的问题吗？

我想使用不同的选项对数组进行排序，例如`(SORT_REGULAR,SORT_NUMERIC)`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:28:31.840

[`sort`](http://www.php.net/manual/en/function.sort.php)重新排序数组但不返回其排序形式——相反，它就地修改原始数组并返回布尔成功/失败标志。此标志具有值`true`，`"1"`当您打印它时 PHP 会将其转换为该值。

所以代替这个：

```
print_r(sort($array)); 
```

你应该做这个：

```
sort($array);
print_r($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:30:46.373

`sort()`函数对传递的数组进行排序

`echo sort($array)`是一个错误的陈述

反而：

如果 $array 是未排序的使用`sort($array)`

然后`print_r($array)`看看结果。

我希望这会很有用。

# javascript - 启用或禁用元素时是否可以触发事件处理程序？

> ID：15290632
> 
> 赞同：3
> 
> 时间：2013-03-08T09:26:57.760
> 
> 标签：javascript, jquery, html

我想在启用或禁用输入时执行一个方法。可以在jQuery中做吗？

我想做与此类似的事情（`non-working code below`）：-

```
$('input').on('enabled', function(e){
   alert( 'Just now someone enabled : ' + $(this).attr('id') );
   executeSomeHandlerForENABLED();
}).on('disabled', function(e){
   alert( 'Just now someone disabled : ' + $(this).attr('id') );
   executeSomeHandlerForDISABLED();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-31T15:57:29.700

就在这里！对于现代浏览器，正确的方法是使用[MutationObservers](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)。不幸的是，甚至 IE10 都不支持 MutationObservers，更不用说 IE8 和 9。为了支持 IE 8-10，您需要在设置禁用时自己触发 propertychange 事件，为此您需要更改 getter以及要启用/禁用的元素的设置器。

这里有几篇关于这种技术的好文章：

*   [MSDN getter/setter 文章](http://msdn.microsoft.com/en-us/library/dd229916%28v=VS.85%29.aspx)
*   [MSDN getter/setter 示例](http://msdn.microsoft.com/en-us/library/ie/dd548687%28v=vs.94%29.aspx)

不幸的是，您不能只在 setter 中的禁用事件上使用本机 fireEvent，因为它遵循禁用状态。因此我们需要一个外部事件触发系统。对我们来说幸运的是，jQuery 的好人已经做到了！

因此，有了这些知识，我编写了一个[fireOnDisable](https://gist.github.com/cmcnulty/7036509) jQuery 插件。要使用它，只需将其应用于选择器，例如：

```
$('#disabled_thing').fireOnDisable(); 
```

如果您使用的浏览器本身不支持 propertychange 事件，则此插件将什么也不做。它专门用于 IE8-10。对于 IE7 或更低版本，您被搞砸了，因为它们没有公开 setter/getter 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:28:01.353

**是的，**但你正在尝试的并不是一件容易的事。

您可以做的是，使用`propertychange`事件（顺便说一句，在 IE 上不可用）来捕捉属性的变化。

我用谷歌搜索，发现[这个](http://darcyclarke.me/dev/watch/)解决方案已经实现。一个插件来观察属性的变化。对于 IE 来说，它回退到`setTimeout()`这确实是非常可悲的。

无论如何，您使用该解决方案的解决方案将类似于：

```
$("input").watch('disabled', function() {
    console.log($(this).is(":disabled"));
}); 
```

# activepivot - ActivePivot 上下文依赖格式

> ID：15290643
> 
> 赞同：1
> 
> 时间：2013-03-08T09:27:41.523
> 
> 标签：activepivot

我有一个价格度量，我想在不同的位置设置不同的格式，例如格式取决于维度的值。我可以有多个不同格式的度量，但这会使很多其他事情复杂化。

据我了解，标准 IFormatter 框架没有位置信息。

我想可以将其作为后处理的措施来实现吗？对于不同类型的价格，我可能也有不同的对象类型，然后使用打开对象类型的 IFormatter 实现？

是否有最佳实践 - 优点/缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:04:58.263

在 ActivePivot 中，格式化程序不知道为其生成单元格的多维数据集位置（实际上，使用 MDX 构造可以计算一些与任何位置无关的单元格值）。

但由于 ActivePivot 是基于对象的，因此总有一种解决方案可以满足您的需求：

对于价格度量，您可以编写一个包含金额和货币的“价格”Java 类，而不仅仅是使用数字。开箱即用的 ActivePivot 不知道如何聚合这些价格，因此您还将编写一个自定义聚合函数（扩展*com.quartetfs.biz.pivot.aggfun.impl.GenericAggregationFunction*）。

然后，您可以实现 Price 类的*toString()*方法，因为 ActivePivot 将其用于默认格式。并且您可以在格式化时访问货币。当然，如果您想要更解耦的设计或基于用户的上下文格式，您也可以编写 PriceFormatter 来格式化您的价格实例。

# javascript - 处理焦点行的 onkeypress 事件

> ID：15290645
> 
> 赞同：1
> 
> 时间：2013-03-08T09:27:46.257
> 
> 标签：javascript, jquery, html

我想在有焦点的表格行上按下按键时调用 java 脚本函数。下面是代码，但是当我按 Enter 键时，不会调用脚本函数。

[http://jsfiddle.net/sirishkumar/58FZG/19/](http://jsfiddle.net/sirishkumar/58FZG/19/)

```
<input id="test" type="text">
<table>
    <tr onkeypress="return openLog(e,'row 1')">
        <td>Row 1</td>
    </tr>
    <tr onkeypress="return openLog(e,'row 2')">
        <td>Test</td>
    </tr>
</table>

var j = jQuery;
var currentRow = 0;
var pagesize = 2;

function ChangeCurrentRow() {
    var tableRow = document.getElementsByTagName("tr")[(currentRow % pagesize)];
    tableRow.focus();
    j(tableRow).siblings().removeClass("highlight-row");
    j(tableRow).addClass("highlight-row");
}

j(document).ready(function () {
    j('#test').val("Ready");
    ChangeCurrentRow();

});

j(document).keydown(function (e) {

    if (e.keyCode == 38) {
        currentRow--;
        ChangeCurrentRow();
        return false;
    }
    if (e.keyCode == 40) {
        currentRow++;
        ChangeCurrentRow();
        return false;
    }
});

function openLog(e, id) {

    if (e.keyCode == 13) {
        $('#input').text(id)
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:17:42.463

行没有“聚焦”。你`focus()`什么都不做。试着写：

```
j(tableRow).focus(function(){alert('test');});
tableRow.focus(); 
```

你什么也看不到 =) 尝试在 a 中处理 keypress 事件`$(document).keypress()`并使用选定的行进行操作。`onkeypress`对于 tr - 什么都不做（`contenteditable="true"`tr 除外）。

# php - 在 woocommerce 结帐中添加新文件

> ID：15290652
> 
> 赞同：1
> 
> 时间：2013-03-08T09:28:04.517
> 
> 标签：php, wordpress, woocommerce

我正在为我的 woocmmerce 构建一个新的自定义文件，我找到了在 woocommerce 结帐中添加新文件的代码。

```
add_action('woocommerce_after_order_notes', 'my_custom_checkout_field');

function my_custom_checkout_field( $checkout ) {

    echo '<div id="my_custom_checkout_field"><h3>'.__('My Field').'</h3>';

    woocommerce_form_field( 'my_field_name', array(
        'type'        => 'select',
        'class'       => array('my-field-class form-row-wide'),
        'required'    => true,
        'label'       => __('Fill in this field'),
        'placeholder' => __('Enter something'),
        'options'     => array(
        'choice1'     => __('choice1', 'woocommerce' ),
        'choice2'     => __('choice2', 'woocommerce' )
        )
    ), $checkout->get_value( 'my_field_name' ));

    echo '</div>';
} 
```

我想要的是你在上面找到这段代码

```
'options'     => array(
    'choice1' => __('choice1', 'woocommerce' ),
    'choice2' => __('choice2', 'woocommerce' )
    ) 
```

我想从下面的代码到上面获取我的动态值和选项

```
option = <?php echo $software->name?> 
```

和

```
value="<?php echo $software->id?>|<?php echo $tt*$total/100;?>|<?php echo $software->name?>|<?php echo $software->email?>"

 <select name="dropdown" class="select" id="dropdown">
      <option>Select-name</option>

    <?php
      $table = bor_get_software();
      if($table){
       $i=0;
       foreach($table as $software) { 
           $i++;
    ?>

          <?php $tt=$software->percentage;?>
            <?php $ter=($tt *100);?>
     <option value="<?php echo $software->id?>|<?php echo $tt*$total/100;?>|<?php echo $software->name?>|<?php echo $software->email?>" ><?php echo $software->name?></option>

    <?php
       }
    }
    else{   
  ?>

    <?php
  }
    ?> 
```

# php - Symfony2 - Gedmo - 不翻译 slug

> ID：15290668
> 
> 赞同：2
> 
> 时间：2013-03-08T09:29:10.200
> 
> 标签：php, symfony, internationalization, doctrine-orm, slug

我正在开发一个多语言 symfony 2 电子商务网站，该网站使用 URL 的 slugs。

目前两种语言的行为是产品的 slug（基于产品名称）也被翻译。所以我有这种网址：

*   英语：example.com/en/products/english-product-name
*   中文：example.com/zh/products/chinese-product-name

slug 基于名称，因此为每种语言保存在翻译表中。我想要的是只对两种语言都使用英语 slug。在我的实体文件中，它看起来像这样：

```
/**
 * @Gedmo\Translatable
 * @Gedmo\Sluggable(slugField="slug")
 * @ORM\Column(type="string", unique=true)
 */
private $name;

/**
 * @Gedmo\Translatable
 * @Gedmo\Slug
 * @ORM\Column(length=128, unique=true)
 */
private $slug; 
```

我将[StofDoctrineExtensionsBundle](https://github.com/stof/StofDoctrineExtensionsBundle)用于我的 slug 和翻译。

我考虑过创建一个不可翻译的附加字段，并以此为基础（而不是产品名称），但这似乎不是一个好方法。

# hadoop - Exception in thread "main" org.apache.hadoop.mapred.InvalidJobConfException: Output directory not set

> ID：15290669
> 
> 赞同：2
> 
> 时间：2013-03-08T09:29:09.797
> 
> 标签：hadoop, mapreduce, hbase, bigdata, hadoop-streaming

Hey All can u please help me in clearing following error ? I am getting this when I am running Mapreduce job fopr inserting data into hbase tables from hdfs files. using `HFileOutputFormat.class` , earlier i ran the same using `MultiTableOutputFormat.class` it was working fine , but it was taking so much time while inserting data into hbase tables .

So can u please help me ... :) ***

> job.setMapOutputKeyClass(ImmutableBytesWritable.class); job.setMapOutputValueClass(Put.class); job.setInputFormatClass(TextInputFormat.class);
> job.setOutputFormatClass(HFileOutputFormat.class); job.setMapperClass(Map.class); HTable hTable = new HTable(conf,"ARK_3000"); HFileOutputFormat.configureIncrementalLoad(job, hTable);
> 
> ERROR security.UserGroupInformation: PriviledgedActionException as:reddym (auth:SIMPLE) cause:org.apache.hadoop.mapred.InvalidJobConfException: Output directory not set. Exception in thread "main" org.apache.hadoop.mapred.InvalidJobConfException: Output directory not set.

Thanks Madhusudhana Reddy

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:35:37.940

Make sure the output directory is not write protected and try again Don't use directories like the root of a drive. hope this helps Regards

EDIT : try adding this where it asks you for the output directory

```
HFileOutputFormat.setOutputPath(conf, new Path(<YOUR_LOCATION>)); 
```

or `FileOutputFormat.setOutputPath(conf, new Path(<YOUR_LOCATION>));`

And you need to mention the output directory so it knows where to write the data to.

Hope this helps you further with your problem, let me know if you need any more help. as i am always happy to help.

EDIT 2 : You need to mention an output directory because the tables you are writing to is stored in the memory and when you end the program all of the data in the memory is lost. For example if the program crashes all of the data is lost unless it is written to disk. So the data saved to the output directory is a backup in-case anything goes wrong.

I hope this answers your question clearly for you, if you need any more assistance leave another comment Regards Tom

# meteor - 如何使用递归模板？

> ID：15290670
> 
> 赞同：8
> 
> 时间：2013-03-08T09:29:15.600
> 
> 标签：meteor

我不知道如何处理模板中的递归数组。我在 handlebarsjs 的文档中找不到任何东西

有我的代码：js：

```
    var 分支 = [{
                name:"firstLayerNodeA",
                has_branch：真，
                分支：[{
                        名称：“第二个布局节点A”，
                        has_branch:false
                    },{
                        名称：“第二个布局节点B”，
                        has_branch：真，
                        分支：[{
                                名称：“第三层节点A”，
                                has_branch：真，
                                分支：[{
                                        //第四层
                                        //第五层
                                        //.....
                                }]
                        }]
                }]
            },{
                name:"firstLayerNodeB",
                has_branch:false
            }]

```

html

> ```
> <Template name="tree">
>   <ul>
>   {{#each brach}}
>       <li>
>         name
>         {{#if has_branch}}
>           <ul>
>           {{#each brach}}
>               <li>
>                 name
>                 {{#if has_brach}}
>                       {{#each brach}}
>                           .....third layer
>                           .....fourth layer
>                           ....
>                       {{/each}}
>                 {{/if}}
>               </li>
>           {{/each}
>           </ul>
>         {{/if}}
>       </li>
>   {{/each}}
>   </ul>
> </Template> 
> ```

有处理模板中分支的好主意吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:42:33.633

您可以使用嵌套模板：

**客户端js**

```
Template.tree.branch = function() {
    var branch = ...
    return branch;
} 
```

**html**

```
<template name="tree">
  <ul>
    {{#each branch}}
      <li>    
        {{>branch}}
      </li>       
    {{/each}}
  </ul>
</template>

<template name="branch">
    {{name}}
    {{#if branch.length}}
       <ul>
           {{#each branch}}
               <li>
                   {{>branch}}
               </li>
           {{/each}}
       </ul>
    {{/if}}
</template> 
```

你也不需要`has_branch`. 只需检查分支数组的长度，因为每个只会循环如果它是一个数组并且那里有东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-03T16:46:50.797

[Akshat 的回答](https://stackoverflow.com/a/15295326/1870254)非常好。但是，使用它时，我在事件处理方面遇到了一些问题。该事件被多次捕获；`branch`对于包含引发事件的元素的模板的每个实例一次。

不确定这是错误还是功能...无论如何我可以使用以下方法克服它：

```
Template.branch.events({
  'click': function (e,b) {    
    console.log("this will show up as often as deep your tree is");
    if (this._id==b.data._id)
      console.log("this will show up only once");
  }
}); 
```

# ruby - Ruby 中的 $DEBUG 全局变量

> ID：15290672
> 
> 赞同：2
> 
> 时间：2013-03-08T09:29:16.847
> 
> 标签：ruby

有人可以总结一下什么/什么时候`$DEBUG`使用。我不熟悉它，也没有找到文档（[Class Thread 文档](http://ruby-doc.org/core-1.9.3/Thread.html)和[Module Signal 文档](http://www.ruby-doc.org/core-1.9.3/Signal.html)）。

这些是我不清楚发生了什么的例子：

```
p @ivar if $DEBUG 
```

和：

```
Signal.trap("USR1") do
  $debug = !$debug
  puts "Debug now: #$debug"
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:32:48.627

这两者完全不同。第一个是仅在`$DEBUG`设置时执行的调试行；`$DEBUG`如果将命令行参数传递`-d`给`ruby`.

第二个是翻转一个`$debug`变量（不同的情况！！），这是特定于程序的。当您使用信号触发进程时`SIGUSR1`，它会更改调试模式（仅有时有助于让它打印调试信息）。

# ravendb - RavenDB 租户加载缓慢

> ID：15290673
> 
> 赞同：2
> 
> 时间：2013-03-08T09:29:20.640
> 
> 标签：ravendb, multi-tenant

我们在多租户环境中使用 RavenDB，用户可以创建自己的租户并在那里创建自己的应用程序。

然而问题是他们的数据库不时空闲（当然在接受，但它也发生在生产中），并且由于某种原因重新加载它需要超过 40 秒。但是我们只有约 1000 个文档和约 300 个索引（这是应用程序的蓝图，一旦投入生产，它应该包含更多文档），并且所有索引都有一个单独的子句`Map`和一个 -`TransformResults`子句。

版本：2.0.2230 和 2.0.2261（截至撰写时的最新稳定版本）

## 一般统计

```
 ...
TransactionalStorageSize:26222592,
TransactionalStorageSizeHumaneSize:"25.01 MBytes",
IndexStorageSize:376263,
IndexStorageHumaneSize:"367.44 KBytes",
TotalDatabaseSize:26598855,
TotalDatabaseHumaneSize:"25.37 MBytes",
CountOfDocuments:975,
... 
```

## 数据库统计

```
CountOfIndexes:305,
InMemoryIndexingQueueSize:0,
ApproximateTaskCount:0,
CountOfDocuments:975,
StaleIndexes:[],
CurrentNumberOfItemsToIndexInSingleBatch:256,
CurrentNumberOfItemsToReduceInSingleBatch:128,
DatabaseTransactionVersionSizeInMB:0.02,
....
Errors:[],
.... 
```

## 编辑

我们正在谈论的应用程序有两个组件，一个设计器和一个运行时。在 ravendb 中，我们存储设计和在运行时创建/使用的数据。每个租户都是一个应用程序。

我们有这么多索引，因为对于您在设计模式中创建的每个查询，我们都会在 ravendb 中创建一个索引。

索引具有以下形式： Map `from ... [from...|let...] [where ... ] select ...`with LoadDocument 调用以加载给定 lucene 查询所需的关联文档，以及类似的 TransfromResults 以将文档塑造成所需形式。

我将研究我们是否可以放松查询和索引之间的一对一耦合。

问：最好有几个巨大的索引，假设我们查询的每个实体都有一个，还是找到一些中间地带？

问：目前我们不允许在我们的实体设计中包含“复杂”实体，即除了价值属性或对其他文档的引用之外什么都没有，如果我们有更少和更大的文档，这会产生影响吗？因此必须减少调用`LoadDocument(...)`？

这需要这么长时间（40 秒）有什么原因吗？任何减轻这种情况的可能方法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:32:56.073

回答这个问题的 1 个子问题：

> 问：最好有几个巨大的索引，假设我们查询的每个实体都有一个，还是找到一些中间地带？

在正常情况下，每个实体类型永远不需要超过 1 个索引。

如果你有几十个实体类型，你很可能掉进了将 RDBMS 模型设计应用于非关系设计的坑。客观地说，我们有一个功能丰富的系统，它建立在总共 8 个聚合根之上。有 2-3 个支持基础设施实体。

我们共有 17 个索引。8 个 Map、5 个 Multi-map 和 5 个 map-reduce。如您所见，我们有 1:1 的 Map:Aggregate Root 索引。具有用于支持聚合搜索和自定义结果的映射/减少的附加索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:37:29.703

有一件事我觉得有点奇怪 - 您的索引与文档的比率似乎有点高。为什么需要这么多索引？你能合并它们吗？

例如，如果您在同一实体上有一些仅映射索引，例如：

```
// index 1
Map = customers => from customer in customers
                   select new
                   {
                       customer.FirstName
                   }

// index 2
Map = customers => from customer in customers
                   select new
                   {
                       customer.LastName
                   } 
```

显然，这些可以在一个索引中：

```
Map = customers => from customer in customers
                   select new
                   {
                       customer.FirstName,
                       customer.LastName
                   } 
```

如果您可以降低索引计数，它将显着降低服务器的压力。

请记住，所有索引都针对所有文档运行。在他们翻译的地图中，您会看到`docs.customer`- 这是`Raven-Entity-Type`元数据过滤的简写。

因此，如果您有 1000 个文档针对 300 个索引，则需要对地图进行 300,000 次评估。如果您要将索引减少到更常见的值 - 比如 20 左右，那会表现得更好。

# google-apps-script - GAS：setFormula 括号或引号丢失？

> ID：15290675
> 
> 赞同：0
> 
> 时间：2013-03-08T09:29:34.147
> 
> 标签：google-apps-script, google-sheets

如果我想输入 L2 = M2 ，这可行：

> for (var j = 2; j<=sheetold.getLastRow(); j++){
> 
> sheetold.getRange(["L"]+[(j)]).setFormula('=["M"]+[(j)]');

但是，如果我想要以下 L2 = (M2/P2)，我会被阻止（可能是我的一些括号或引号放错了位置？？）：

> sheetold.getRange(["L"]+[(j)]).setFormula('=["M"]+[(j)]/["P"]+[(j)]');

提前致谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:22:42.570

您不需要这么多方括号“[]”或圆括号。

尝试这个：

```
for (var j = 2; j<=sheetold.getLastRow(); j++){
  sheetold.getRange("L"+j).setFormula('=(M'+j+'\/P'+j+')'); } 
```

# c++ - const char 声明导致堆栈溢出

> ID：15290677
> 
> 赞同：0
> 
> 时间：2013-03-08T09:29:43.470
> 
> 标签：c++, visual-studio-2012, constants, stack-overflow, cppunit

在我的 VC++ CPPUNIT 项目中，单元测试中的以下代码会导致堆栈溢出异常：

```
const int n = 1000000;
const char *test[n]; 
```

> Utilities_Tests.exe 中 0x00AD89E7 处的第一次机会异常：0xC00000FD：堆栈溢出（参数：0x00000000、0x00132000）。Utilities_Tests.exe 中 0x00AD89E7 处的未处理异常：0xC00000FD：堆栈溢出（参数：0x00000000、0x00132000）。

但这不会：

```
const int n = 1000000;
char test[n]; 
```

堆栈溢出发生在代码执行之前，因此不会命中单元测试顶部的断点。知道为什么会这样吗？我有解决方法，但我只是好奇发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:31:34.793

A`char`是 1 个字节，a`char*`很可能是 4 个字节（可以更多，也可以更少）。

因此，第一种情况尝试为堆栈分配更多内存（约 4 倍）。堆栈内存是有限的，只是碰巧`1000000`字节适合堆栈上的平台，但`4 * 1000000`不适合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T09:32:02.767

在 32 位计算机上，指针是 4 个字节，所以一百万个指针是 400 万个字节（在 64 位计算机上，指针的大小是 64 位，所以数组是 800 万字节）。堆栈通常在 1 到 4 兆字节的范围内，因此您的`char`数组（一百万字节）适合堆栈，但指针数组不适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:31:56.163

发生这种情况是因为您的堆栈空间不足。堆栈空间是有限的每线程资源；进行嵌套函数调用并使用局部变量会消耗它。当你用完时，会发生堆栈溢出。

您的第一个示例分配了一百万`char*`，通常是 4MB 或 8MB 内存。您的第二个示例仅分配 1MB。分配的堆栈空间的典型大小也在 1MB 左右，因此结果并不令人惊讶。

有关可能的解决方案，请参见[此处](https://stackoverflow.com/questions/2275550/change-stack-size-for-a-c-application-in-linux-during-compilation-with-gnu-com)或[此处](http://msdn.microsoft.com/en-us/library/tdkhxaks%28v=vs.110%29.aspx)。

# iphone - 使用 UIAppearance 代理自定义字体时，MFMailComposeViewController 不起作用

> ID：15290678
> 
> 赞同：3
> 
> 时间：2013-03-08T09:29:49.660
> 
> 标签：iphone, ios, mfmailcomposeviewcontroller, uiappearance

当我不在我的应用程序中自定义字体时，MFMailComposeViewController 会显示并且工作正常。但是当我这样做时，有 50% 的时间它被呈现并直接调用他的代表，`mailComposeController:didFinishWithResult:`结果`MFMailComposeResultCancelled`与用户只是尝试关闭它完全一样。

并且还会在控制台中触发此错误：

```
_serviceViewControllerReady:error: Error Domain=XPCObjectsErrorDomain Code=2 "The operation couldn’t be completed. (XPCObjectsErrorDomain error 2.)" 
```

看起来邮件编辑器不喜欢外观代理，但问题是它不可能禁用外观代理。

对于我的应用程序中的每个导航栏，我都有一个自定义设计。为了实现这一点，我使用了这样的外观代理：

```
UIImage *navBarBackground = [UIImage stretchableHorizontalImageNamed:@"navbar-background"];
[[UINavigationBar appearance] setBackgroundImage:navBarBackground forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearance] setShadowImage:[UIImage imageNamed:@"navbar-shadow"]];
[[UINavigationBar appearance] setTitleTextAttributes:@{
    UITextAttributeTextColor: [UIColor colorWithRed:0.965f green:0.635f blue:0.647f alpha:1.f],
    UITextAttributeFont : [UIFont brothersBoldFontOfSize:20.f],
    UITextAttributeTextShadowColor: [UIColor blackColor],
    UITextAttributeTextShadowOffset: [NSValue valueWithUIOffset:UIOffsetMake(0, -1)]
}];

UIBarButtonItem *navBarButtonItemAppearance = [UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil];
[navBarButtonItemAppearance setTitleTextAttributes:@{
    UITextAttributeTextColor: [UIColor colorWithRed:0.478f green:0.008f blue:0.023f alpha:1.f],
    UITextAttributeFont : [UIFont brothersBoldFontOfSize:17.f],
    UITextAttributeTextShadowColor: [UIColor colorWithWhite:1.f alpha:0.3f],
    UITextAttributeTextShadowOffset: [NSValue valueWithUIOffset:UIOffsetMake(0, 1)]
} forState:UIControlStateNormal]; 
```

我使用以下内容删除了弹出框的一些背景自定义：

```
[[UINavigationBar appearanceWhenContainedIn:[UIPopoverController class], nil] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

它对弹出框工作正常。但是无法为邮件编写器删除它，即使我使用“包含在”MFMailComposeViewController 并将其设置为`nil`它仍然存在。

我也尝试对它进行子类化或设置系统字体，但这并没有改变任何东西。他得到介绍，打印错误，打电话给他的代表并被解雇。我刚刚看到，当它工作时，系统没有应用字体，当它没有应用时，它会显示如下自定义字体。

![在此处输入图像描述](../Images/466def283d61802b5e977c1828fcef3b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:52:25.120

问题是自定义字体加载时间过长，并且会触发等待栅栏的超时。

请参阅：[MFMailComposeViewController 抛出 viewServiceDidTerminateWithError 并在使用自定义标题字体时退出](https://stackoverflow.com/questions/12624151/mfmailcomposeviewcontroller-throws-a-viewservicedidterminatewitherror-and-then-e)

# c# - 当我使用 gridsplitter 调整列表视图的高度时，垂直滚动条被折叠

> ID：15290682
> 
> 赞同：1
> 
> 时间：2013-03-08T09:30:00.617
> 
> 标签：c#, wpf

我想使用 GridSplitter 调整包含许多元素的列表视图的大小，问题是当我使用 GridSplitter 时，允许我查看其他冒号的垂直滚动条消失了。我需要帮助来解决这个问题

```
<Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                <ListView Grid.Row="0" ItemContainerStyle="{StaticResource ListViewDate}" x:Name="DashboardListViewGeneral" Height="350" ItemsSource="{Binding Mode=OneWay}" IsSynchronizedWithCurrentItem="True" SelectionMode="Single" Behavior:GridViewSort.AutoSort="True" Behavior:GridViewSort.SortGlyphAscending="/Asset/Pict/arrow_down.png" Behavior:GridViewSort.SortGlyphDescending="/Asset/Pict/arrow_up.png" MaxHeight="Infinity" MinHeight="0">
                    <ListView.View>
                        <GridView AllowsColumnReorder="True" x:Name="zzz">
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=NumberGeco}" DisplayMemberBinding="{Binding Path=Id, Mode=OneWay}" Width="Auto" Behavior:GridViewSort.PropertyName="Id"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=NumSolution}" DisplayMemberBinding="{Binding Path=LastSolution.Number, Mode=OneWay}" Width="20" Behavior:GridViewSort.PropertyName="LastSolution.Number"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=Title}" DisplayMemberBinding="{Binding Path=Title, Mode=OneWay}" Width="400" Behavior:GridViewSort.PropertyName="Title"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=Programs}" DisplayMemberBinding="{Binding Path=ProgramListString, Mode=OneWay}" Behavior:GridViewSort.PropertyName="ProgramListString"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=Origin}" DisplayMemberBinding="{Binding Path=RequestOrigin.Name, Mode=OneWay}" Width="40" Behavior:GridViewSort.PropertyName="RequestOrigin.Name"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=Type}" DisplayMemberBinding="{Binding Path=RequestType.Name, Mode=OneWay, TargetNullValue='', FallbackValue=''}" Width="40" Behavior:GridViewSort.PropertyName="RequestTypeSort"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=Responsible}" DisplayMemberBinding="{Binding Path=LastSolution.CreatorString, Mode=OneWay, TargetNullValue='', FallbackValue=''}" Width="70" Behavior:GridViewSort.PropertyName="LastSolution.CreatorString"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=Siglum}" DisplayMemberBinding="{Binding Path=LastSolution.Creator.Department.Name, Mode=OneWay, TargetNullValue='', FallbackValue=''}" Width="70" Behavior:GridViewSort.PropertyName="LastSolution.Creator.Department.Name"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=Importance}" DisplayMemberBinding="{Binding Path=PriorityFaam.Name, Mode=OneWay}" Width="40" Behavior:GridViewSort.PropertyName="PriorityFaamSort"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=Reference}" DisplayMemberBinding="{Binding Path=Reference, Mode=OneWay, TargetNullValue='', FallbackValue=''}" Width="70" Behavior:GridViewSort.PropertyName="Reference"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=Status}" DisplayMemberBinding="{Binding Path=LastSolution.Statut.Name, Mode=OneWay}" Behavior:GridViewSort.PropertyName="LastSolution.Statut.Name"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=Identifier}" DisplayMemberBinding="{Binding Path=LastSolution.Identifier, Mode=OneWay, TargetNullValue='', FallbackValue=''}" Width="70" Behavior:GridViewSort.PropertyName="LastSolution.Identifier"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=ThresholdNRC}" DisplayMemberBinding="{Binding Path=LastSolution.Complement.ThresholdNrc.Name, Mode=OneWay}" Width="40" Behavior:GridViewSort.PropertyName="LastSolution.Number"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=ThresholdRC}" DisplayMemberBinding="{Binding Path=LastSolution.Complement.ThresholdRc.Name, Mode=OneWay}" Width="40" Behavior:GridViewSort.PropertyName="LastSolution.Number"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=DateReception}" DisplayMemberBinding="{Binding Path=LastSolution.DateReception, Mode=OneWay, StringFormat={}{0:dd/MM/yy}}" Behavior:GridViewSort.PropertyName="LastSolution.DateReception"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=DateObjective}" DisplayMemberBinding="{Binding Path=LastSolution.DateObjective, Mode=OneWay, StringFormat={}{0:dd/MM/yy}}" Behavior:GridViewSort.PropertyName="LastSolution.DateObjective"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=DateTechnicalFile}" DisplayMemberBinding="{Binding Path=LastSolution.Complement.DateTechnicalReport, Mode=OneWay, StringFormat={}{0:dd/MM/yy}}" Behavior:GridViewSort.PropertyName="LastSolution.Complement.DateTechnicalReport"/>
                            <GridViewColumn CellTemplate="{StaticResource DashBoardCellTemplate}" Header="{DynamicResource ResourceKey=DateDiffusion}" DisplayMemberBinding="{Binding Path=LastSolution.Complement.DateCirculatuion, Mode=OneWay, StringFormat={}{0:dd/MM/yy}}" Behavior:GridViewSort.PropertyName="LastSolution.Complement.DateCirculatuion"/>

                        </GridView>                          
                    </ListView.View>

                    </ListView>

                    <GridSplitter Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" Background="Black" ShowsPreview="True" Height="2" ResizeDirection="Rows" ResizeBehavior="PreviousAndNext" />

                <Grid Grid.Row="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition  Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <StackPanel  Orientation="Horizontal" Grid.Column="0" Margin="0,5,0,0">
                        <Image Source="/Asset/Pict/excel_logo.png" Width="20" MouseLeftButtonDown="ExportExcelGeneral_Click" Cursor="Hand" />
                        <TextBlock Text="{DynamicResource ResourceKey=ExportListToExcel}" VerticalAlignment="Center" Margin="5,0,0,0" MouseLeftButtonDown="ExportExcelGeneral_Click" Cursor="Hand" />
                    </StackPanel>

                    <TextBlock   Grid.Column="1" HorizontalAlignment="Right" Margin="0,5,0,0" VerticalAlignment="Center">
                        <TextBlock.Text>
                            <Binding ElementName="DashboardListViewGeneral" Path="Items.Count" StringFormat="{}{0} viewed demands" FallbackValue="nombre de dossiers affichés" Mode="OneWay" />
                        </TextBlock.Text>
                        </TextBlock>

                    </Grid>
                </Grid> 
```

# c# - 将 COMPLEX 存储过程转换为 C# 和 ADO.Net

> ID：15290686
> 
> 赞同：3
> 
> 时间：2013-03-08T09:30:22.707
> 
> 标签：c#, stored-procedures, ado.net

这不是关于 SP 是好是坏的问题。或者用 C# 编写 SQL 语句是好是坏。

很快我们就开始着手一个新项目，这是一个典型的库存/计费管理系统。这将使用 .Net 和 C# 作为语言进行开发。数据库尚未最终确定。

此应用程序中不允许使用存储过程，它将具有中等到复杂的数据库操作。因此，我可以使用 SP 轻松编写的逻辑，现在我必须使用 C# 和 ADO.Net 编写。

现在以一个非常假设的用例为例，客户选择了 5 件商品并准备好在柜台生成账单……。这通常具有以下数据库操作：

*   检查 INVENTORY 表以查看是否所有 5 行项目都可用（数量充足）。
*   如果任何项目不可用 - 从账单中删除项目并更新 BILL 表
*   INVENTORY 表的数量字段将被更新，并且数量字段将扣除已售出的项目。
*   警报/更新其他表是项目的阈值数量低于某个点。

现在看看这个场景，这一切都可以在 SP 中轻松完成。这包含很多查询、IF 条件、可能的循环等，看起来像是 SP 的一个很好的竞争者。我想从专家那里得到的是：

1.  是否有在 C# 和 ADO.Net 中编写此类代码的最佳实践。在 C# 中，我们通常可以使用 ADO.Net 重新创建相同的代码……。但这是唯一的方法还是正确的方法？
2.  我读过很多人说存储过程不好…… 但是当考虑像这样的复杂场景时……你不觉得存储过程更适合这种情况吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T15:02:29.300

> 是否有在 C# 和 ADO.Net 中编写此类代码的最佳实践。在 C# 中，我们通常可以使用 ADO.Net 重新创建相同的代码……。但这是唯一的方法还是正确的方法？

因此，我认为根据您的问题，您会更乐意使用[Dapper](http://code.google.com/p/dapper-dot-net/)之类的东西来访问数据库。如果您不知道，Dapper 是一个非常轻量级的数据库访问库，它甚至支持一些更复杂的需求（例如在一次往返中返回多个结果集，然后将这些结果反序列化为 POCO 类）。

简而言之，使用 Dapper，您可以灵活地***按照自己***的方式查询数据库，而且***速度快得离谱。***

现在，举一个更具体的例子，Dapper 扩展了`IDbConnection`接口，所以你选择什么数据库并不重要：

> 数据库尚未最终确定。

它很容易参数化，因此不受[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响：

```
var parms = new { ID = 1, Bar1 = "Hello" };
var foo = connection.Query<Foo>(
    "SELECT Bar1, Bar2 FROM Foo WHERE ID = @ID AND Bar1 = @Bar1",
    parms); 
```

它支持事务，因此您仍然可以将操作作为单个事务进行管理：

```
var tran = connection.BeginTransaction();
var parms = new { ID = 1, Bar1 = "Hello" };
var foo = connection.Query<Foo>(
    "SELECT Bar1, Bar2 FROM Foo WHERE ID = @ID AND Bar1 = @Bar1",
    parms, tran); 
```

老实说，虽然实体框架真的越来越流行，而且微软正在向他们投入**大量**资金，但我在使用 Dapper 后不再购买它们。这就是为什么。一般来说，最好利用数据库来做它最擅长的事情，Dapper 允许这样做，它所做的只是为您提供一种机制，通过该机制，您可以***大大减少***从数据库中获取数据和执行数据库所需的样板代码ADO.NET。

现在，这是进入存储过程参数的好方法。

> 我读过很多人说存储过程不好…… 但是当考虑像这样的复杂场景时……你不觉得存储过程更适合这种情况吗？

存储过程还***不错。***大多数人说这可能来自两个角度之一：

1.  他们只是在赶潮流。
2.  他们不知道存储过程的目的和好处。***请注意：***我没有说***愚蠢***，我说的是[***无知***](https://www.google.com/search?q=define%3a%20ignorant&sourceid=ie7&rls=com.microsoft%3aen-us%3aIE-Address&ie=&oe=&rlz=)。

尽管人们普遍认为，存储过程有一个很好的用途。首先，编译执行计划。其次，它们很容易参数化以更快地进行更复杂和多级的查询 - 而视图和直接 SQL 则不是。**第三，它们更容易被 DBA 保护。**

我有一个查询，它是一个直接的 SQL 查询，因为我当时工作的公司也有同样的想法，**我通过将其设置为存储过程将其性能提高了 98%。**这在他们准备购买的额外硬件上为公司每月节省了 2,000 美元！

正如我之前所说，***将数据库用于它擅长的领域。***我认为这经常会丢失，因为我看到很多人试图使用 C# 和 .NET 框架对 500,000 个对象进行排序，但他们无法弄清楚为什么它不够快 -***他们应该在数据库服务器上对它们进行排序！*****这是它真正**擅长的一件事！

不要让人们把你引向技术无用和糟糕的道路，因为许多人会告诉你触发器是糟糕的，**但如果使用正确的理由，它们是完美的！**

# ruby - 为什么在使用 Ruby 编码时使用 irb（而不是基于 GUI 的测试方法）很有帮助？

> ID：15290690
> 
> 赞同：-6
> 
> 时间：2013-03-08T09:30:29.237
> 
> 标签：ruby, irb

我读过 irb 在使用 Ruby 编程时的目的是帮助实时测试代码。在此之前我已经学习了 HTML 和 CSS，当时我可以通过在浏览器中打开页面并保存/刷新页面来测试我的代码。irb 是否与 Ruby 执行类似的功能？如果是这样，我是否认为在 irb（而不是浏览器）中测试 Ruby 代码的好处是 irb 可以更容易地将 Ruby 中的错误与 Javascript / HTML / 等中的错误区分开来？无论如何，Ruby 程序迟早会（理论上）在浏览器中运行，在我看来，程序员希望测试条件尽可能接近真实的用例环境。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T09:42:57.053

所以这个问题与测试有关，这是一个非常广泛的话题，但我会尝试从我的角度回答你的问题。

首先，在谈论 Ruby 和相关的网络技术时，我们必须在一个平台上达成一致。

1 - Ruby 并不是严格意义上的网络语言。这是一个巨大的误解。Ruby 不是 Ruby on Rails。因此，虽然现在大多数应用程序最终都在浏览器中，但这要归功于 RoR 而不是 Ruby。

Ruby 是一种万事通的语言，即。它可以做很多事情。脚本、网络、“普通应用程序”。如果您有问题，Ruby 作为一种语言很有可能解决它。

2 - IRB 是 Ruby 的 REPL（读取 eval 打印循环），或者更常见的解释器，它不是编译器。它代表交互式 RuBy 外壳。

那么关于你的问题：

你不使用 IRB 测试 pers，你使用 IRB 来测试较小的类型语句，比如`1 + 1`或者也许

```
my_name = "henrik"
my_age = 28
p = Person.new(my_name, my_age)
p.my_name
>> "henrik" 
```

您可以将 IRB 视为“您的小型测试向导”，即。“这行得通吗，让我们在 IRB 中试试吧！”。

对于您描述的实际测试，您使用`RSpec`或其他类型的测试框架，如果您想做独立测试，您可能会做`ruby my_test_file.rb`. 您`my_test_file.rb`包含所有测试的地方。

[RSpec](http://rspec.info/)阅读了这篇文章，这在开始用 Ruby 进行测试时非常有价值。

以您描述的方式进行测试非常乏味，但这与 IRB 无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:41:26.503

irb 适合我进行探索性测试，尝试单行代码。它还允许您使用 Ruby 的自省来探索可用的内容。我经常做的一件事*是*这样的：

```
irb
1.9.3-p327 :001 > s = "This is a string"
 => "This is a string"
1.9.3-p327 :002 > s.methods.sort - Object.methods
 => [:%, :*, :+, :<<, :[], :[]=, :ascii_only?, :between?, :bytes, :bytesize, :byteslice, :capitalize, :capitalize!, :casecmp, :center, :chars, :chomp, :chomp!, :chop, :chop!, :chr, :clear, :codepoints, :concat, :count, :crypt, :delete, :delete!, :downcase, :downcase!, :dump, :each_byte, :each_char, :each_codepoint, :each_line, :empty?, :encode, :encode!, :encoding, :end_with?, :force_encoding, :getbyte, :gsub, :gsub!, :hex, :index, :insert, :intern, :length, :lines, :ljust, :lstrip, :lstrip!, :match, :next, :next!, :oct, :ord, :partition, :prepend, :replace, :reverse, :reverse!, :rindex, :rjust, :rpartition, :rstrip, :rstrip!, :scan, :setbyte, :size, :slice, :slice!, :split, :squeeze, :squeeze!, :start_with?, :strip, :strip!, :sub, :sub!, :succ, :succ!, :sum, :swapcase, :swapcase!, :to_c, :to_f, :to_i, :to_r, :to_str, :to_sym, :tr, :tr!, :tr_s, :tr_s!, :unpack, :upcase, :upcase!, :upto, :valid_encoding?] 
```

现在您可以通过许多其他方式获得该列表，但是对于像我这样使用几种不同语言进行编码并且知道我想做的*事情*但不一定是正确的 Ruby 方法的人来说，这很棒。我可以测试我认为我需要的方法，并查看它是否正确。. .

还有很多其他有用的东西，例如调用您正在学习使用的库中的方法，并检查它返回的东西类型。

# java - 脸书 安卓 获取电子邮件

> ID：15290694
> 
> 赞同：0
> 
> 时间：2013-03-08T09:30:46.873
> 
> 标签：java, android

我正在尝试获取已使用 facebook 登录的用户的电子邮件。

这是我的代码`String userId=(String) user.asMap().get("email");`它返回null，我该如何解决？

我读到可能需要设置会话权限？这是什么许可？我需要在哪里写这个权限？

也许它的另一个问题？

```
Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

        Session session = Session.getActiveSession();
        if (session == null) {
            if (savedInstanceState != null) {
                session = Session.restoreSession(this, null, statusCallback, savedInstanceState);
            }
            if (session == null) {
                session = new Session(this);
            }
            Session.setActiveSession(session);
            if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
            }
        }

        updateView();

   //    End of OnCreate Method>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    }

    @Override
    public void onStart() {
        super.onStart();
        Session.getActiveSession().addCallback(statusCallback);
    }

    @Override
    public void onStop() {
        super.onStop();
        Session.getActiveSession().removeCallback(statusCallback);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        Session session = Session.getActiveSession();
        Session.saveSession(session, outState);
    }

    private void updateView() {
        Session session = Session.getActiveSession();
        session.openForRead(new Session.OpenRequest(this).setPermissions(Arrays.asList("email")));

        if (session.isOpened()) {
            //button logout string
            buttonLoginLogout.setOnClickListener(new OnClickListener() {
                public void onClick(View view) { onClickLogout(); }
            });
        } else {
            //button log in string
            buttonLoginLogout.setOnClickListener(new OnClickListener() {
                public void onClick(View view) { onClickLogin(); }
            });
        }
    }

    private void onClickLogin() {
        Session session = Session.getActiveSession();
        if (!session.isOpened() && !session.isClosed()) {
            session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        } else {
            Session.openActiveSession(this, true, statusCallback);
        }
    }

    private void onClickLogout() {
        Session session = Session.getActiveSession();
        if (!session.isClosed()) {
            session.closeAndClearTokenInformation();
        }
    }

    private class SessionStatusCallback implements Session.StatusCallback {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            if( session.isOpened() ){
                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                    @Override
                    public void onCompleted(GraphUser user, Response response) {
                        Intent i = new Intent(getApplicationContext(), ProfileActivity.class);
                        String userId=(String) user.asMap().get("email");
                        i.putExtra("epuzzle",userId  );
                        startActivity(i);
                    }
                });
            }
            updateView();
        }

    } 
```

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.sale"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <!-- The following two permissions are not required to use
     Google Maps Android API v2, but are recommended. -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <permission
        android:name="com.example.sale.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>
        <uses-permission android:name="com.example.sale.permission.MAPS_RECEIVE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="com.example.sale.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

              </activity>

         <!--  Entry for RegisterActivity.class -->
        <activity android:name=".RegisterActivity"
                  android:label="Register New Account"></activity>
        <meta-data android:value="@string/app_id" android:name="com.facebook.sdk.ApplicationId"/>
        <activity android:label="@string/app_name" android:name="com.facebook.LoginActivity"></activity>
        <activity android:name=".ProfileActivity" android:label="Profile page"></activity>

        <meta-data
              android:name="com.google.android.maps.v2.API_KEY"
              android:value="AIzaSyDTVRXMTmfe3jZyAlt-87kRgqM8y4TzIto"/>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:59:27.453

当您使用需要 Internet 权限的 Facebook 类型的 API 时。按照这个步骤，

*   打开 Androidmanifest.xml 文件
*   `<uses-permission android:name="android.permission.INTERNET" />`在标签后声明权限。

# wso2 - 错误处理在 WSO2ESB 中不起作用

> ID：15290696
> 
> 赞同：-3
> 
> 时间：2013-03-08T09:30:48.047
> 
> 标签：wso2, wso2esb, wso2dss

我的配置是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse"
       name="tReadingMobile"
       transports="https http"
       startOnLoad="true"
       trace="disable">
   <description/>
   <target>
      <inSequence onError="fault">
         <property name="ouid"
                   expression="//WorkOUId//text()"
                   scope="default"
                   type="STRING"/>
         <property name="Time"
                   expression="get-property('SYSTEM_TIME')"
                   scope="default"
                   type="STRING"/>
         <property name="entrymode"
                   expression="//entrymode/text()"
                   scope="default"
                   type="STRING"/>
         <property name="deviceid"
                   expression="//DeviceId/text()"
                   scope="default"
                   type="STRING"/>
         <property name="partybranchid"
                   expression="//PartyBranchId/text()"
                   scope="default"
                   type="STRING"/>
         <property name="userid"
                   expression="//userid/text()"
                   scope="default"
                   type="STRING"/>
         <property name="ReadingDateTime"
                   expression="//ReadingDateTime/text()"
                   scope="default"
                   type="STRING"/>
         <property name="remarks"
                   expression="//Remarks/text()"
                   scope="default"
                   type="STRING"/>
         <property name="taskid"
                   expression="//TaskId/text()"
                   scope="default"
                   type="STRING"/>
         <property name="activityid"
                   expression="//activityid/text()"
                   scope="default"
                   type="STRING"/>
         <property name="assetid"
                   expression="//AssetId/text()"
                   scope="default"
                   type="STRING"/>
         <property name="parametersetid"
                   expression="//ParametersetId/text()"
                   scope="default"
                   type="STRING"/>
         <property name="Reading"
                   expression="//ReadingsLiteTaildto"
                   scope="default"
                   type="STRING"/>
         <enrich>
            <source clone="true" xpath="//ReadingsLiteTaildto"/>
            <target type="property" property="Reading"/>
         </enrich>
         <log level="custom">
            <property name="Reading" expression="get-property('Reading')"/>
         </log>
         <payloadFactory>
            <format>
               <p:insert_taction_operation xmlns:p="http://ws.wso2.org/dataservice">
                  <xs:ouid xmlns:xs="http://ws.wso2.org/dataservice">$1</xs:ouid>
                  <xs:biztransactiontypeid xmlns:xs="http://ws.wso2.org/dataservice">1</xs:biztransactiontypeid>
                  <xs:transactionnumber xmlns:xs="http://ws.wso2.org/dataservice">-1</xs:transactionnumber>
                  <xs:transactiondate xmlns:xs="http://ws.wso2.org/dataservice">$2</xs:transactiondate>
                  <xs:referencenumber xmlns:xs="http://ws.wso2.org/dataservice">-1</xs:referencenumber>
                  <xs:referencedate xmlns:xs="http://ws.wso2.org/dataservice">$3</xs:referencedate>
                  <xs:entrymode xmlns:xs="http://ws.wso2.org/dataservice">$4</xs:entrymode>
                  <xs:deviceid xmlns:xs="http://ws.wso2.org/dataservice">$5</xs:deviceid>
                  <xs:partybranchid xmlns:xs="http://ws.wso2.org/dataservice">$6</xs:partybranchid>
                  <xs:personid xmlns:xs="http://ws.wso2.org/dataservice">$7</xs:personid>
                  <xs:periodfrom xmlns:xs="http://ws.wso2.org/dataservice">$8</xs:periodfrom>
                  <xs:periodto xmlns:xs="http://ws.wso2.org/dataservice">$9</xs:periodto>
                  <xs:remarks xmlns:xs="http://ws.wso2.org/dataservice">$10</xs:remarks>
                  <xs:tags xmlns:xs="http://ws.wso2.org/dataservice">0</xs:tags>
                  <xs:status xmlns:xs="http://ws.wso2.org/dataservice">1</xs:status>
                  <xs:version xmlns:xs="http://ws.wso2.org/dataservice">0</xs:version>
                  <xs:createdbyid xmlns:xs="http://ws.wso2.org/dataservice">$11</xs:createdbyid>
                  <xs:createdon xmlns:xs="http://ws.wso2.org/dataservice">$12</xs:createdon>
                  <xs:modifiedbyid xmlns:xs="http://ws.wso2.org/dataservice">$13</xs:modifiedbyid>
                  <xs:modifiedon xmlns:xs="http://ws.wso2.org/dataservice">$14</xs:modifiedon>
               </p:insert_taction_operation>
            </format>
            <args>
               <arg expression="get-property('ouid')"/>
               <arg expression="get-property('Time')"/>
               <arg expression="get-property('Time')"/>
               <arg expression="get-property('entrymode')"/>
               <arg expression="get-property('deviceid')"/>
               <arg expression="get-property('partybranchid')"/>
               <arg expression="get-property('userid')"/>
               <arg expression="get-property('ReadingDateTime')"/>
               <arg expression="get-property('ReadingDateTime')"/>
               <arg expression="get-property('remarks')"/>
               <arg expression="get-property('userid')"/>
               <arg expression="get-property('ReadingDateTime')"/>
               <arg expression="get-property('userid')"/>
               <arg expression="get-property('ReadingDateTime')"/>
            </args>
         </payloadFactory>
         <send receive="tActionid_Seq">
            <endpoint>
               <address uri="http://localhost:9764/services/taction_DataService/"
                        format="soap11"/>
            </endpoint>
         </send>
      </inSequence>
      <outSequence onError="fault">
         <send/>
      </outSequence>
   </target>
</proxy> 
```

我的序列文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<sequence xmlns="http://ws.apache.org/ns/synapse" name="tActionid_Seq" onError="fault">
   <property xmlns:ns="http://org.apache.synapse/xsd"
             xmlns:s="http://ws.wso2.org/dataservice"
             name="ActionID"
             expression="//s:actionid/text()"
             scope="default"
             type="STRING"/>
   <filter xmlns:ns="http://org.apache.synapse/xsd"
           xpath="get-property('taskid')='0' or get-property('taskid')='-1'">
      <then>
         <property name="actiontype" value="1"/>
      </then>
      <else>
         <property name="actiontype" value="0"/>
      </else>
   </filter>
   <log level="custom">
      <property xmlns:ns="http://org.apache.synapse/xsd"
                name="kk"
                expression="get-property('ActionID')"/>
   </log>
   <property xmlns:ns="http://org.apache.synapse/xsd"
             name="kk"
             expression="get-property('ActionID')"
             scope="default"
             type="STRING"/>
   <payloadFactory>
      <format>
         <p:insert_tactiondetail_operation xmlns:p="http://ws.wso2.org/dataservice">
            <xs:actionid xmlns:xs="http://ws.wso2.org/dataservice">$1</xs:actionid>
            <xs:slno xmlns:xs="http://ws.wso2.org/dataservice">1</xs:slno>
            <xs:actiontype xmlns:xs="http://ws.wso2.org/dataservice">$2</xs:actiontype>
            <xs:taskid xmlns:xs="http://ws.wso2.org/dataservice">$3</xs:taskid>
            <xs:partybranchid xmlns:xs="http://ws.wso2.org/dataservice">$4</xs:partybranchid>
            <xs:activityid xmlns:xs="http://ws.wso2.org/dataservice">$5</xs:activityid>
            <xs:assetid xmlns:xs="http://ws.wso2.org/dataservice">$6</xs:assetid>
            <xs:parametersetid xmlns:xs="http://ws.wso2.org/dataservice">$7</xs:parametersetid>
            <xs:actionstatus xmlns:xs="http://ws.wso2.org/dataservice">1</xs:actionstatus>
            <xs:reasonid xmlns:xs="http://ws.wso2.org/dataservice">-1</xs:reasonid>
            <xs:remarks xmlns:xs="http://ws.wso2.org/dataservice">$8</xs:remarks>
            <xs:periodfrom xmlns:xs="http://ws.wso2.org/dataservice">$9</xs:periodfrom>
            <xs:periodto xmlns:xs="http://ws.wso2.org/dataservice">$10</xs:periodto>
            <xs:duration xmlns:xs="http://ws.wso2.org/dataservice">0</xs:duration>
            <xs:alerts xmlns:xs="http://ws.wso2.org/dataservice">1</xs:alerts>
         </p:insert_tactiondetail_operation>
      </format>
      <args>
         <arg xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('kk')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              expression="get-property('actiontype')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              expression="get-property('taskid')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              expression="get-property('partybranchid')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              expression="get-property('activityid')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              expression="get-property('assetid')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              expression="get-property('parametersetid')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              expression="get-property('remarks')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              expression="get-property('ReadingDateTime')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              expression="get-property('ReadingDateTime')"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              expression="get-property('Message')"/>
      </args>
   </payloadFactory>
   <send receive="tActiondetailid_Seq">
      <endpoint>
         <address uri="http://localhost:9764/services/tactiondetail_DataService/"
                  format="soap11"/>
      </endpoint>
   </send>
</sequence> 
```

这是我的 WSO2DSS。

```
 <sql>INSERT INTO public.taction(ouid,biztransactiontypeid,transactionnumber,transactiondate,referencenumber,referencedate,entrymode,deviceid,partybranchid,personid,periodfrom,periodto,remarks,tags,status,version,createdbyid,createdon,modifiedbyid,modifiedon) VALUES(?,?,?,(SELECT TIMESTAMP WITH TIME ZONE 'epoch' + ?/1000 * INTERVAL '1 second'),?,(SELECT TIMESTAMP WITH TIME ZONE 'epoch' + ?/1000 * INTERVAL '1 second'),?,?,?,?,(SELECT TIMESTAMP WITH TIME ZONE 'epoch' + ?/1000 * INTERVAL '1 second'),(SELECT TIMESTAMP WITH TIME ZONE 'epoch' + ?/1000 * INTERVAL '1 second'),?,?,?,?,?,(SELECT TIMESTAMP WITH TIME ZONE 'epoch' + ?/1000 * INTERVAL '1 second'),?,(SELECT TIMESTAMP WITH TIME ZONE 'epoch' + ?/1000 * INTERVAL '1 second'))</sql>
      <result element="GeneratedKeys" rowName="Entry" useColumnNumbers="true">
         <element column="1" name="actionid" xsdType="BIGINT"/>
      </result>
      <param name="ouid" ordinal="1" sqlType="INTEGER"/>
      <param name="biztransactiontypeid" ordinal="2" sqlType="INTEGER"/>
      <param name="transactionnumber" ordinal="3" sqlType="STRING"/>
      <param name="transactiondate" ordinal="4" sqlType="BIGINT"/>
      <param name="referencenumber" ordinal="5" sqlType="STRING"/>
      <param name="referencedate" ordinal="6" sqlType="BIGINT"/>
      <param name="entrymode" ordinal="7" sqlType="SMALLINT"/>
      <param name="deviceid" ordinal="8" sqlType="INTEGER"/>
      <param name="partybranchid" ordinal="9" sqlType="INTEGER"/>
      <param name="personid" ordinal="10" sqlType="INTEGER"/>
      <param name="periodfrom" ordinal="11" sqlType="BIGINT"/>
      <param name="periodto" ordinal="12" sqlType="BIGINT"/>
      <param name="remarks" ordinal="13" sqlType="STRING"/>
      <param name="tags" ordinal="14" sqlType="STRING"/>
      <param name="status" ordinal="15" sqlType="SMALLINT"/>
      <param name="version" ordinal="16" sqlType="SMALLINT"/>
      <param name="createdbyid" ordinal="17" sqlType="INTEGER"/>
      <param name="createdon" ordinal="18" sqlType="BIGINT"/>
      <param name="modifiedbyid" ordinal="19" sqlType="INTEGER"/>
      <param name="modifiedon" ordinal="20" sqlType="BIGINT"/>
   </query>
   <query id="update_taction_query" useConfig="default"> 
```

当我提供适当的数据时，它正在工作。但是发生了一个没有被处理的错误。我添加了默认故障序列，但它不起作用。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:18:37.640

像这样尝试；向您的代理添加故障序列

```
 <target faultSequence="fault"> 
```

# jsf - JSF 将属性映射到操作类中

> ID：15290697
> 
> 赞同：0
> 
> 时间：2013-03-08T09:30:48.520
> 
> 标签：jsf, properties, action

我的行动课程中有一份员工详细信息列表。我在 JSF 的 dataTable 中显示它们。并允许用户编辑属性。

我想将所有这些属性和对象映射到操作类中的列表。我尝试使用托管属性...但我想如何从 JSP 页面传递这些属性。如何在 JSF 中实现这一点？

```
//faces-config
                 <managed-bean>
       <managed-bean-name>employeeProps</managed-bean-name>
  <managed-bean-class>com.test.EmployeePropertiesBean</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
  <managed-property>
            <property-name>emplyeeList</property-name>
            <property-class>java.util.ArrayList</property-class>
            <value>#{emplyeeList}</value>
  </managed-property>
 </managed-bean>
 // Navigation rule configured and works well

 //Action clss
public class EmployeePropertiesBean
{

    private List<Exmployee> emplyeeList = new ArrayList<Exmployee>(); //with getter setters
    .
    .
    .
}

//JSP page
<h:dataTable value="#{employeeProps.emplyeeList}" var="employeePropEntry" >

<h:inputText value="#{advancedPropEntry.value}" id="propText" rendered="#{employeePropEntry.type=='text'}">
.
.
.
.
// Trying to populated the Employee list properties using below the but not working... Similar stuff works with Struts
<h:inputHidden id="emplyeeList[0].name" value="#{employeePropEntry.name}"></h:inputHidden>

</h:dataTable> 
```

# wpf - ItemsControl 中的移位选择、滚动和虚拟化

> ID：15290698
> 
> 赞同：2
> 
> 时间：2013-03-08T09:30:52.360
> 
> 标签：wpf, virtualization, itemscontrol

我创建了一个`MultipleSelectionTreeView`继承自的`ItemsControl`，由于数据量巨大，它使用了虚拟化。

当我在树中选择一个项目然后向下滚动并使用 Shift 键选择另一个项目时，两者之间的项目也应该被选中。

我使用此函数获取下一个项目，并将其设置为稍后选择：

```
 internal MultipleSelectionTreeViewItem GetNextNodeAtSameLevel()
    {
        MultipleSelectionTreeViewItem nextNodeAtSameLevel = null;

        ItemsControl parentControl = ParentItemsControl;
        if (parentControl != null)
        {
            int index = parentControl.ItemContainerGenerator.IndexFromContainer(this);
            if (index != parentControl.Items.Count - 1) // if this is not the last item
            {
                var item = ParentControl.ItemContainerGenerator.ContainerFromIndex(index + 1);
                nextNodeAtSameLevel = item as MultipleSelectionTreeViewItem;
            }
        }

        return nextNodeAtSameLevel;
    } 
```

项目对我来说是空的。我知道这是因为虚拟化

有什么办法可以解决这个问题吗？或者创建我自己的虚拟化面板的唯一方法

# android - Android 计算器键盘按钮 OnClickListener 不起作用？

> ID：15290699
> 
> 赞同：0
> 
> 时间：2013-03-08T09:30:56.383
> 
> 标签：android, onclicklistener, android-button

嗨，我正在为我的应用程序实现一个计算器类型的键盘，用户单击它想要在 Edittext 中显示的键盘，但我没有收到任何错误，也没有结果这是我的 java 代码

```
public class MainActivity extends Activity {
GridView mKeypadGrid;
KeypadAdapter mKeypadAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Get reference to the keypad button GridView
    mKeypadGrid = (GridView) findViewById(R.id.grdButtons);

    // Create Keypad Adapter
    mKeypadAdapter = new KeypadAdapter(this);

    // Set adapter of the keypad grid
    mKeypadGrid.setAdapter(mKeypadAdapter);

    // Set button click listener of the keypad adapter
    mKeypadAdapter.setOnButtonClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Button btn = (Button) v;
            // Get the KeypadButton value which is used to identify the
            // keypad button from the Button's tag
            KeypadButton keypadButton = (KeypadButton) btn.getTag();

            // Process keypad button
            ProcessKeypadInput(keypadButton);
        }
    });

    mKeypadGrid.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

        }
    });

}

protected void ProcessKeypadInput(KeypadButton keypadButton) {
    // TODO Auto-generated method stub
    Toast.makeText(
            MainActivity.this,
            keypadButton.getText().toString() + " "
                    + keypadButton.toString(), Toast.LENGTH_SHORT).show();

        }
      } 
```

这是我的 KeypadAdapter.java

```
 public class KeypadAdapter extends BaseAdapter {
private Context mContext;

public KeypadAdapter(Context c) {
    mContext = c;
}

public int getCount() {
    return mButtons.length;
}

public Object getItem(int position) {
    return mButtons[position];
}

public long getItemId(int position) {
    return 0;
}

// create a new ButtonView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    Button btn;
    if (convertView == null) { // if it's not recycled, initialize some attributes
        btn = new Button(mContext);
        KeypadButton keypadButton = mButtons[position];

        // Set CalculatorButton enumeration as tag of the button so that we
        // will use this information from our main view to identify what to do
        btn.setTag(keypadButton);
    } 
    else {
        btn = (Button) convertView;
    }

    btn.setText(mButtons[position].getText());
    return btn;
}

// Create and populate keypad buttons array with CalculatorButton values
private KeypadButton[] mButtons = {KeypadButton.SEVEN,KeypadButton.EIGHT, KeypadButton.NINE, 
        KeypadButton.FOUR, KeypadButton.FIVE,KeypadButton.SIX, 
        KeypadButton.ONE, KeypadButton.TWO, KeypadButton.THREE,
        KeypadButton.ZERO,KeypadButton.DOT,KeypadButton.BACKSPACE };

public void setOnButtonClickListener(OnClickListener onClickListener) {
    // TODO Auto-generated method stub

}
public enum KeypadButton {
    BACKSPACE("Clear",KeypadButtonCategory.CLEAR)
    , ZERO("0",KeypadButtonCategory.NUMBER)
    , ONE("1",KeypadButtonCategory.NUMBER)
    , TWO("2",KeypadButtonCategory.NUMBER)
    , THREE("3",KeypadButtonCategory.NUMBER)
    , FOUR("4",KeypadButtonCategory.NUMBER)
    , FIVE("5",KeypadButtonCategory.NUMBER)
    , SIX("6",KeypadButtonCategory.NUMBER)
    , SEVEN("7",KeypadButtonCategory.NUMBER)
    , EIGHT("8",KeypadButtonCategory.NUMBER)
    , NINE("9",KeypadButtonCategory.NUMBER)
    , DOT(".",KeypadButtonCategory.OTHER);

    CharSequence mText; // Display Text
    KeypadButtonCategory mCategory;

    KeypadButton(CharSequence text,KeypadButtonCategory category) {
        mText = text;
        mCategory = category;
    }

    public CharSequence getText() {
        return mText;
    }
}
public enum KeypadButtonCategory {
    MEMORYBUFFER
    , NUMBER
    , OPERATOR
    , DUMMY
    , CLEAR
    , RESULT
    , OTHER
  }
  } 
```

所以请帮我解决这个问题............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:03:01.960

据我所知，要使 gridView 中的项目可点击，您需要完全实现 onItemClickListener 并使用 onClickListener 实际将该侦听器分配给网格视图，而不是网格视图中的每个单独按钮。我认为，如果您将 onClickListener 中的代码放入您的 onItemClickListener 中，那么它应该可以工作。

```
mKeypadAdapter.setOnButtonClickListener(new OnClickListener() { //This won't work 
    //because keypadAdaptor.setOnButtonClickAdaptor(.....); is empty
    @Override public void onClick(View v) { 
        Button btn = (Button) v; 
        KeypadButton keypadButton = (KeypadButton) btn.getTag();
        ProcessKeypadInput(keypadButton); 
    } 
});

mKeypadGrid.setOnItemClickListener(new OnItemClickListener() { 
    public void onItemClick(AdapterView<?> parent, View v, int position, long id)
    {
    //This needs to be filled in with your button processing code
    } 
}); 
```

由于您在 keypadAdator 中的方法定义为空，因此调用`keypadAdaptor.setOnButtonClickListener(onClickListener.....);`也不会做任何事情。

# batch-file - 如何编写批处理脚本以从多个目录中收集具有相同名称的文件

> ID：15290700
> 
> 赞同：1
> 
> 时间：2013-03-08T09:31:01.277
> 
> 标签：batch-file

我在许多目录中有许多不同但名称相同的文件。这些目录都位于单个根目录中的一层深处。我想要一个遍历所有这些子目录的脚本，并将同名文件复制到某个目的地。自然地，重命名它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:44:15.727

我最近有类似的要求，我写了一个脚本来做到这一点。它不仅限于同名文件或一级深层目录结构，但您可以使用它，我认为它应该满足您的需求。它采用完整的文件名，去除当前路径前缀并将任何反斜杠转换为下划线，从而将目录结构“扁平化”为文件名。您只需要为脚本指定一个目标目录和一个文件掩码即可运行（第 2 行和第 3 行）。

```
@ECHO OFF
SET filemask=*.gif
SET target_path=out
SETLOCAL EnableDelayedExpansion
SET current_path=%CD%\
IF NOT EXIST "%target_path%" MKDIR "%target_path%"
FOR /F "tokens=*" %%G IN ('DIR /B /S %filemask%') DO (
    SET file=%%G
    :: strip current path
    SET file_new=!file:%current_path%=!
    :: convert backslashes to underscores
    SET file_new=!file_new:\=_!
    :: copy file
    COPY %%G %target_path%\!file_new! >nul
)
ENDLOCAL 
```

# osclass - 在 OSClass 的搜索栏中添加地点搜索选项

> ID：15290703
> 
> 赞同：2
> 
> 时间：2013-03-08T09:31:04.177
> 
> 标签：osclass

我是 OSClass 的新手。这段代码`oc-content\themes\modern\inc.search.php`来自

```
<form action="<?php echo osc_base_url(true); ?>" method="get" class="search" onsubmit="javascript:return doSearch();">
    <input type="hidden" name="page" value="search" />
    <fieldset class="main">
        <input type="text" name="sPattern"  id="query" value="<?php echo osc_esc_html( ( osc_search_pattern() != '' ) ? osc_search_pattern() : $sQuery ); ?>" />
        <?php  if ( osc_count_categories() ) { ?>
            <?php osc_categories_select('sCategory', null, __('Select a category', 'modern')); ?>
        <?php  } ?>
        <button type="submit"><?php _e('Search', 'modern'); ?></button>
    </fieldset>
    <div id="search-example"></div>
</form> 
```

在这里，我需要再添加一个搜索选项。那是**Place**，与**#query**相同。我能做些什么？

我可以在哪里进行更改以更好地完成此搜索？

我知道以下代码，

```
<input type="text" name="sCity"  id="sCity" value="<?php _e('Enter your city here'); ?>" /> 
```

这给出了如下结果， ![在此处输入图像描述](../Images/b297de002c960c52f619bb60584753b5.png)

但是，我的要求是`sCity`也一样`sPattern`。两者都见`value`。sPattern 在重定向时显示相同的结果。但 sCity 不会。我需要它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:13:36.003

这应该工作

```
<form action="<?php echo osc_base_url(true); ?>" method="get" class="search" onsubmit="javascript:return doSearch();">
    <input type="hidden" name="page" value="search" />
    <fieldset class="main">
        <input type="text" name="sPattern"  id="query" value="<?php echo osc_esc_html( ( osc_search_pattern() != '' ) ? osc_search_pattern() : $sQuery ); ?>" />
        <input type="text" name="sCity"  id="sCity" value="<?php _e('Enter your city here'); ?>" />
        <?php  if ( osc_count_categories() ) { ?>
            <?php osc_categories_select('sCategory', null, __('Select a category', 'modern')); ?>
        <?php  } ?>
        <button type="submit"><?php _e('Search', 'modern'); ?></button>
    </fieldset>
    <div id="search-example"></div>
</form> 
```

此外，如果您更喜欢按地区而不是按城市搜索，请将 sCity 更改为 sRegion

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T05:08:11.923

对于可选城市字段

```
 <?php $aCities = City::newInstance()->listAll(); ?>
<?php if(count($aCities) > 0 ) { ?>
<select name="sCity" id="sCity">
<option value=""><?php _e('Select a city...')?></option>
    <?php foreach($aCities as $city) { ?>
    <option value="<?php echo $city['s_name'] ; ?>"><?php echo $city['s_name'] ; ?></option>
    <?php } ?>
</select>
<?php } ?> 
```

# webgl - 3D Dyn amics - 避免万向节锁定（一种可能的新方法）

> ID：15290712
> 
> 赞同：1
> 
> 时间：2013-03-08T09:31:19.540
> 
> 标签：webgl

这个问题可能违反了不应提出冗长问题的规则。但是我的回答如下：有人能指出我可以问这个问题的地方吗……（或正确地提出问题）？

首先，为了说明这一点，我是一名机械工程教授，专攻动力学。所以我知道万向节锁定的问题，我了解四分位数、欧拉角，以及必要时的泰特布赖恩角。

我开发了一种新的 3D 动力学方法。这种方法，基于李代数、移动框架和一种新的符号；它使 3D 动力学变得容易。它具有解决奇​​点的潜力，但没有四分位数的复杂性。

我希望证明这种方法可以解决计算机图形中的此类问题。

现在我已经在 OpenGL、SGI Inventor 和 webGL 中进行了编码。我用过 proEngineer 和 Blender。因此，如果您希望以这种方式解释，我将能够关注与这些相关的讨论。

现在问题来了……

webGL中的云台锁是如何解决的？即便如此：“解决”是什么意思？因为这一切我都不清楚。

是的，我可以避免某些将内部框架带向奇点的运动。那将解决它。或者当我接近奇点时，我可以切换到四分位数。或者我可以添加另一个运动度数。这些都是解决方案的不同“分类”：一些在用户级别，一些在编码器级别。

所以，假设我有一个方法（不是 C++ 意义上的词——但是，谁知道呢，对）……一个允许用户以更简单的方式实现 3D 旋转的方法。

是否归结为我要求 webGL 的开发人员实现一种新方法？webGL_quarternion webGL_euler_angle webGL_new_method_in_moving frame

新方法会在旧方法上编码吗？例如，四元数调用是否反过来调用欧拉角方法？

我只是想找到一种方法来证明这种新方法对计算机图形程序员或用户（例如：Blender 用户）更有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:31:40.373

WebGL 不使用任何特定方法来管理旋转；如果在您看来确实如此，那么您一定是在使用一些高级库来为您做这件事，这隐藏了 WebGL 的基础。WebGL 提供屏幕空间绘图和快速 4×4 矩阵运算，以在**您**编写的着色器中构建您的转换，这些转换可以从欧拉角、四元数、纯旋转矩阵或您想发明的任何其他矩阵推导出来。

如果你有更好的数学来管理旋转，那么我鼓励你继续编写顶点着色器来计算它；不需要对 WebGL 的扩展。

# mysql - 更新列数据mysql

> ID：15290715
> 
> 赞同：1
> 
> 时间：2013-03-08T09:31:28.227
> 
> 标签：mysql, sql, sql-update

我有具有 coursename 列的表名 course。

正如您所看到的“seaadventures”和“sea Adventures”等。信息名称不同，并且希望所有匹配的单词“seaadventures”都成为“sea Adventures”，我如何在 DB 中检查和更新它？

**课程名：**

```
seaadventures watersport1
sea adventures watersport2
cool seaadventures sport 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:33:03.863

使用`REPLACE()`功能，

```
UPDATE  tableName
SET     courseName  = REPLACE(courseName, 'seaadventures', 'sea adventures') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:34:27.627

只需[更换](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)每个`seaadventures`_`sea adventures`

```
UPDATE course 
SET coursename = REPLACE(coursename, 'seaadventures', 'sea adventures') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T09:36:54.710

您可以使用

```
Update course Set coursename='sea adventures' where coursename like '%seaadventures%' 
```

# android - 是否有适用于 Android 的通用数据容器？

> ID：15290716
> 
> 赞同：0
> 
> 时间：2013-03-08T09:31:33.703
> 
> 标签：android

我来自一个`C#`世界，并`DataTable`广泛使用类。

`DataTable`Android SDK中是否有与.Net类似的结构？

请注意，我需要一个在设计时不知道实际结构的情况下保存元数据和实际记录的结构——它必须是通用的、通用的。此结构不得链接到实际的数据库记录（如 RecordSet）。

有这样的事情还是我必须手动制作类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:36:40.420

我相信您在 Android SDK 中找不到类似的东西。据我所知，Android 开箱即用的每个数据容器都需要您在设计时了解数据的结构。例如 SQLite 需要一个模式，SharedPreferences 只存储类型化的键值对，除此之外你只有基本的文件存储。

可能有一些库可以提供您所追求的东西，尽管我不知道。

# android - 如何将从 GpsStatus 检索到的卫星数量链接到 LocationListener 记录的特定修复？

> ID：15290718
> 
> 赞同：1
> 
> 时间：2013-03-08T09:31:37.147
> 
> 标签：android, gps, locationmanager, locationlistener

我一直在阅读过去的问题`GpsStatus`，但我对一个问题感到困惑：当我从`GpsStatus`我更新的对象中检索上一次修复中使用的卫星数量时，我`GpsStatusListener`怎么知道这是同一个修复由我记录`LocatonListener`？

我记录修复中使用的卫星数量的第`onGpsStatusChanged`一种方法是在 my 的方法中计算它们，并将数字传递给一个变量，然后我在 my 方法的`GpsStatusListener`顶部访问该变量。但是我经常会报告零卫星计数以进行 GPS 修复，当我记录发生的事情时，我发现我正在发射一长串不同的卫星计数，然后我就抓住了最后一个 - 即使以前的更高，它也经常被证明为零。我的假设是这是一个时间问题：最新的修复在记录卫星数量的时间和开始其方法的时间之间发生了变化。`LocationListener``onLocationChanged``GpsStatusListener``LocationListener``GpSStatusListener``LocationListener``onLocationChanged`

我尝试的第二种方法是简单地更新 中的`GpsStatus`对象`GpsStatusListener`，然后在我`LocationListener`的`onLocationChanged`方法的最顶部计算来自该对象的卫星（见下文）。但是，这似乎也不能解决问题。

有没有人有更好的方法？还是我担心这个时间问题是错误的？

这是我用于第二种方法的代码的相关部分：

```
 //. . . 

private class GpsStatusListener implements GpsStatus.Listener {
    @Override
    public void onGpsStatusChanged(int event) {
        if (event == GpsStatus.GPS_EVENT_SATELLITE_STATUS) {
            if (gpsStatus != null) {
                locationManager.getGpsStatus(gpsStatus);
            }
        }
    }
}

private class mLocationListener implements LocationListener {
    public void onLocationChanged(Location location) {
        GpsStatus thisFixGpsStatus = gpsStatus;
        Iterator<GpsSatellite> sats = thisFixGpsStatus.getSatellites()
                .iterator();
        satCount = 0;
        while (sats.hasNext()) {
            GpsSatellite gpsSatellite = (GpsSatellite) sats.next();
            if (gpsSatellite.usedInFix()) {
                satCount++;
            }
        } // . . . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:54:38.370

虽然这可能无法完全回答您的问题，但一些背景信息：

GPS芯片通常不会每秒提供卫星（使用）数据集的数量。典型值为每 5 或 10 秒。原因是卫星星座不是每秒钟都在变化。

所以可能没有办法让 num sats 同步到 android 手机上的对应修复。

# clojure - 从 Clojure/ClojureCLR 中的 Java/C# 子类调用非虚拟保护方法

> ID：15290726
> 
> 赞同：1
> 
> 时间：2013-03-08T09:32:04.050
> 
> 标签：clojure, clojureclr

在 Clojure 中使用 gen-class 创建子类时，您可以通过暴露方法公开受保护的虚拟（非最终）方法，但是它是通过覆盖实现的，这对非虚拟（最终）方法不起作用。

是通过反射以这种方式调用受保护方法的唯一方法吗？

reify 或 proxy 能比 gen-class 做得更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:38:48.793

这原来是 clojure-clr 中的一个错误。它可能在 JVM 版本中运行良好。如果非虚拟/最终方法是受保护的/公共的，Clojure 确实允许调用它们。但是，我试图调用的方法是受保护的内部，这实际上意味着受保护*或*内部。clojure-clr 错误地将其解释为受保护的*和*内部的，内部含义只能在同一程序集中访问。因此，我的方法调用失败了。

这已在最新版本的 clojure-clr 中得到修复。

# ios - 使用键盘时使用 UIScrollView 滑动并向上移动视图

> ID：15290729
> 
> 赞同：0
> 
> 时间：2013-03-08T09:32:15.597
> 
> 标签：ios, objective-c, xcode, uiscrollview, uitextfield

我正在使用[这个](http://www.wannabegeek.com/?p=168)示例项目，我想做的是，当您将 a`UITextField`放在视图上时，当`UITextField`键盘下方的 in 时，视图会向上移动一点。

我已经使用了[这个](http://atastypixel.com/blog/a-drop-in-universal-solution-for-moving-text-fields-out-of-the-way-of-the-keyboard/)项目中的`TPKeyBoardAvoidingScrollView`类。但是，当我单击 时，视图向上移动，一切都很好，但是当我单击背景时，它不仅恢复正常的屏幕尺寸并关闭键盘，而是返回到第一个视图，而不是停留在我们所在的视图在那一刻。`UITextField`

当键盘弹出时您也可以左右滚动，知道我该如何解决这个问题吗？[这](http://www.2shared.com/file/89j92UaT/PageViewController-master.html)是我的项目，我将它们都添加在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:59:34.743

在 TPKeyboardAvoidingScrollView.m 中有一个方法（keyboardWillHide:)，当键盘要隐藏时会调用它。在该方法中，滚动视图的内容偏移设置为 CGPointZero，因此您的滚动视图将到达第一个视图控制器。

```
- (void)keyboardWillHide:(NSNotification*)notification {
    _keyboardRect = CGRectZero;
    _keyboardVisible = NO;

    // Restore dimensions to prior size
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationCurve:[[[notification userInfo] objectForKey:UIKeyboardAnimationCurveUserInfoKey] intValue]];
    [UIView setAnimationDuration:[[[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] floatValue]];
    self.contentInset = _priorInset;
    //self.contentOffset = CGPointZero;//Replacing this with below line
    self.contentOffset = CGPointMake(self.contentOffset.x, 0);
    [self setScrollIndicatorInsets:self.contentInset];
    _priorInsetSaved = NO;
    [UIView commitAnimations];
} 
```

在编辑文本字段时停止滚动-

```
- (void)keyboardDidShow:(NSNotification*)notification {
    [self setScrollEnabled:NO];
    //existing code
}

- (void)keyboardWillHide:(NSNotification*)notification {
    [self setScrollEnabled:YES];
    //existing code with modification of content offset
} 
```

请记住，这可能会影响您使用 TPKeyboardAvoidingScrollView 对象的其他视图。

# eclipse - 在 Eclipse 中按可见性对成员进行排序，无需字母排序

> ID：15290734
> 
> 赞同：4
> 
> 时间：2013-03-08T09:32:32.483
> 
> 标签：eclipse, sorting, formatting

我很好奇是否可以选择按可见性而**不是按字母**对字段、方法等不同类型进行排序。我知道我可以使用`Source -> Cleanup`. 但它也会按字母顺序对其进行排序。我只想按可见性排序并保留其余的旧顺序。

**例子：**

```
public class Person {

    private Person(final Long id, final String name, final String surname) {

    }

    public Person() {
    }

    private Long id;

    private String surname;

    private String name;

    public final static String SOME_CONSTANT = "SOME_CONSTANT";

} 
```

**排序后应该是这样的：**

```
public class Person {

    public final static String SOME_CONSTANT = "SOME_CONSTANT";

    private Long id;

    private String surname;

    private String name;

    public Person() {
    }

    private Person(final Long id, final String name, final String surname) {
    }

} 
```

**但我得到：**

```
public class Person {

    public final static String SOME_CONSTANT = "SOME_CONSTANT";

    private Long id;

    private String name;

    private String surname;

    public Person() {
    }

    private Person(final Long id, final String name, final String surname) {
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:31:45.143

在没有插件的 Eclipse 中，纯字母排序是不可能的。您是否尝试过设置自定义 Source->Sort Members 选项（Preferences->Java->Appearance->Members Sort Order）？

但是，您可能会在这篇文章中找到一些替代方法：[Eclipse 按字母顺序组织方法](https://stackoverflow.com/questions/6549319/eclipse-organize-methods-in-alphabetical-order)

# sql-server-2008-r2 - 在 T-SQL“模式”表达式字符类中转义 ] 和 ^ 字符

> ID：15290737
> 
> 赞同：3
> 
> 时间：2013-03-08T09:32:43.570
> 
> 标签：sql-server-2008-r2, escaping, patindex

我正在尝试`RTRIM(expression, characters)`使用以下查询在 MsSql Server 2008 R2 中模拟 Oracle：

```
REVERSE(
        SUBSTRING(
                  REVERSE(field),
                  PATINDEX('%[^chars]%', REVERSE(field)),
                  LEN(field) - PATINDEX('%[^chars]%', REVERSE(field)) + 1
             )
       ) 
```

问题是我希望能够修剪可能需要转义`]`的字符。`^`

我不知道该怎么做。诸如此类的`\]`事情不起作用。

我知道这个`ESCAPE`子句，但我不明白它是如何工作的，顺便说一下，如果把它放在模式字符串之后，SqlServer 会拒绝它。

有趣的事实：

如果我写`%[^^]%`（希望修剪`^`）它不起作用。

如果我写`%[^ ^]%`它会修剪`^`，但显然也修剪空格！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:03:31.570

不漂亮，但是...

```
CREATE FUNCTION dbo.RTRIMCHARS(
    @input AS VARCHAR(MAX), @chars AS VARCHAR(100)
) RETURNS VARCHAR(MAX) 
AS 
BEGIN
    DECLARE @charpos BIGINT
    DECLARE @strpos BIGINT

    SET @strpos = LEN(@input)
    SET @charpos = LEN(@chars)

    IF @strpos IS NULL OR @charpos IS NULL RETURN NULL
    IF @strpos = 0 OR @charpos = 0 RETURN @input

    WHILE @strpos > 0
    BEGIN
        SET @charpos = LEN(@chars)
        WHILE @charpos > 0
        BEGIN
            IF SUBSTRING(@chars, @charpos, 1) = SUBSTRING(@input, @strpos, 1)
            BEGIN
                SET @strpos = @strpos - 1
                BREAK
            END
            ELSE
            BEGIN
                SET @charpos = @charpos - 1
            END
        END
        IF @charpos = 0 BREAK
    END
    RETURN SUBSTRING(@input, 1, @strpos)
END 
```

用法

```
SELECT dbo.RTRIMCHARS('bla%123', '123%')   -- 'bla'
SELECT dbo.RTRIMCHARS('bla%123', '123')    -- 'bla%'
SELECT dbo.RTRIMCHARS('bla%123', 'xyz')    -- 'bla%123'
SELECT dbo.RTRIMCHARS('bla%123', ']')      -- 'bla%123'
SELECT dbo.RTRIMCHARS('bla%123', '')       -- 'bla%123'
SELECT dbo.RTRIMCHARS('bla%123', NULL)     -- NULL
SELECT dbo.RTRIMCHARS(NULL, '123')         -- NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:03:13.243

我在 MS Connect 上找到了这份文档：
[http ://connect.microsoft.com/SQLServer/feedback/details/259534/patindex-missing-escape-clause](http://connect.microsoft.com/SQLServer/feedback/details/259534/patindex-missing-escape-clause)

用户询问`ESCAPE`with 子句`PATINDEX`，然后另一个用户也扩展了请求`CHARINDEX`。

MS 回答：**票已关闭，因为*无法修复***:(

我完成了编写自己的自定义函数`LTrim`：

```
CREATE FUNCTION LTrim_Chars (
  @BaseString varchar(2000),
  @TrimChars varchar(100)
)

RETURNS varchar(2000) AS

BEGIN

  DECLARE @TrimCharFound bit

  DECLARE @BaseStringPos int
  DECLARE @TrimCharsPos int

  DECLARE @BaseStringLen int
  DECLARE @TrimCharsLen int

  IF @BaseString IS NULL OR @TrimChars IS NULL
  BEGIN
      RETURN NULL
  END

  SET @BaseStringPos = 1

  SET @BaseStringLen = LEN(@BaseString)
  SET @TrimCharsLen = LEN(@TrimChars)

  WHILE @BaseStringPos <= @BaseStringLen
  BEGIN 

      SET @TrimCharFound = 0
      SET @TrimCharsPos = 1

      WHILE @TrimCharsPos <= @TrimCharsLen
      BEGIN     
          IF SUBSTRING(@BaseString, @BaseStringPos, 1) = SUBSTRING(@TrimChars, @TrimCharsPos, 1)
          BEGIN
              SET @TrimCharFound = 1
              BREAK
          END             
          SET @TrimCharsPos = @TrimCharsPos + 1     
      END

      IF @TrimCharFound = 0
      BEGIN
        RETURN SUBSTRING(@BaseString, @BaseStringPos, @BaseStringLen - @BaseStringPos + 1)
      END       
      SET @BaseStringPos = @BaseStringPos + 1

  END

  RETURN ''

END 
```

对于`RTrim`：

```
CREATE FUNCTION RTrim_Chars (
  @BaseString varchar(2000),
  @TrimChars varchar(100)
)

RETURNS varchar(2000) AS

BEGIN

  RETURN REVERSE(LTrim_Chars(REVERSE(@BaseString), @TrimChars))

END 
```

至少，我学会了一些 MsSql 脚本...

* * *

**编辑：**

我添加`NULL`了对这两个参数的检查，以反映 Oracle 和 Postgres 的行为。

不幸的是，Oracle 的行为仍然略有不同：
在您编写 的情况下`LTRIM(string, '')`，它返回`NULL`，因为 0 长度的字符串就像`NULL`在 Oracle 中一样，所以它实际上返回的是 的结果`LTRIM(string, NULL)`，`NULL`确实如此。

顺便说一句，这是一个非常奇怪的案例。

# c# - XmlReader ArgumentException：不支持指定类型“System.Guid”

> ID：15290739
> 
> 赞同：0
> 
> 时间：2013-03-08T09:32:48.750
> 
> 标签：c#, mono, xmlreader

我正在尝试使用 XmlReader 读取 xml，但我收到了一个我没想到的异常。

```
ArgumentException: Specified type 'System.Guid' is not supported.
System.Xml.XmlReader.ValueAs (System.String text, System.Type type, IXmlNamespaceResolver resolver)
System.Xml.XmlReader.ReadElementContentAs (System.Type type, IXmlNamespaceResolver resolver) 
```

在以下代码行中引发了异常：

```
propInfo.Value = _cReader.ReadElementContentAs(propInfo.PropertyType, null); 
```

`propInfo`必须序列化的公共属性（getter-setter）的包装器在哪里。在这行代码中，我尝试从 xml 读取值并将其设置在包装器中。我以为 a`System.Guid`会被支持，因为还有一个`XmlConvert.ToGuid()`方法。

通过这种方式序列化单一类型的 xmlelement 的好方法是什么？`XmlSerializer`由于复杂的原因，我不能使用Mono。

# c++ - QApplication：在 Windows 上没有 Qt5 和 qtsingleapplication 的此类文件或目录

> ID：15290742
> 
> 赞同：4
> 
> 时间：2013-03-08T09:33:00.763
> 
> 标签：c++, windows, qt5

自从我使用 QT 5.0.1（来自[http://qt-project.org/downloads](http://qt-project.org/downloads)）和模块 qtsingleapplication（来自[http://qt.gitorious.org/qt-solutions](http://qt.gitorious.org/qt-solutions)的最新版本）后，我无法在 Windows 上编译）。

在 Linux 下，编译仍然有效（Qt 4.8.2）

我不明白为什么。这是 qtcreator 的详细输出。

> 09:57:58: Execution des étapes pour le projet Wahoo...
> 09:57:58: Configuration inchangée, étape QMake sautée。
> 09:57:58：首次亮相：“D:\Qt\Qt5.0.1\Tools\MinGW\bin\mingw32-make.exe”
> 
> D:/Qt/Qt5.0.1/Tools/MinGW/bin/mingw32-make -f Makefile.Release
> mingw32-make[1]:进入目录'C:/Documents and Settings/crazy/Bureau/Kowmedia.Wahoo/src/构建-发布/发布'
> 
> g++ -c -pipe -fno-keep-inline-dllexport -O2 -frtti -Wall -Wextra -fexceptions -mthreads -DUNICODE -DQT_NO_DEBUG -DQT_WEBKIT_LIB -DQT_WIDGETS_LIB -DQT_XML_LIB -DQT_NETWORK_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -DQT_NEEDS_QMAIN -I. ...\wahoo -I"....\wahoo\qtsingleapplication\src" -I"D:\Qt\Qt5.0.1\5.0.1\mingw47_32\include" -I"D:\Qt\Qt5.0.1 \5.0.1\mingw47_32\include\QtWebKit" -I"D:\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtWidgets" -I"D:\Qt\Qt5.0.1\5.0.1\mingw47_32 \include\QtXml" -I"D:\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtNetwork" -I"D:\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtGui" - I"D:\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtCore"-I"发布"-I"。" -我”。” -I"D:\Qt\Qt5.0.1\5.0.1\mingw47_32\mkspecs\win32-g++"
> 
> g++ -pipe -fno-keep-inline-dllexport -O2 -frtti -Wall -Wextra -fexceptions -mthreads -DUNICODE -DQT_NO_DEBUG -DQT_WEBKIT_LIB -DQT_WIDGETS_LIB -DQT_XML_LIB -DQT_NETWORK_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -DQT_NEEDS_QMAIN ../.. /wahoo/qtsingleapplication/src/qtsingleapplication.cpp -o ../../wahoo/qtsingleapplication/src/QtSingleApplication
> 
> 在 ../../wahoo/qtsingleapplication/src/qtsingleapplication.cpp:42:0:
> ../../wahoo/qtsingleapplication/src/qtsingleapplication.h:44:24 中包含的文件中：致命错误：QApplication：否这样的文件或目录
> 
> 编译终止。
> 
> <builtin>：目标 '../../wahoo/qtsingleapplication/src/QtSingleApplication' 的配方失败
> mingw32-make[1]: ** [../../wahoo/qtsingleapplication/src/QtSingleApplication] 错误 1
> ​​mingw32 -make [1]：离开目录'C：/Documents and Settings/crazy/Bureau/Kowmedia.Wahoo/src/Build-Release/release'makefile
> ：34：目标'release'的配方失败
> mingw32-make：** [ release] Error 2
> 09:57:59: Le processus "D:\Qt\Qt5.0.1\Tools\MinGW\bin\mingw32-make.exe" s'est terminé avec le code 2.
> 构建/部署项目时出错 Wahoo （套件：Desktop Qt 5.0.1 MinGW 32bit）Lors de l'exécution de l'étape “Make”

每个文件都存在，选项 -I"D:\Qt\Qt5.0.1\5.0.1\mingw47_32\include\QtWidgets" 也是。如果我从源代码浏览，QtCreator 可以找到该文件。所以我有点失落......

先感谢您

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T11:33:19.780

> ...QApplication：没有这样的文件或目录...

尝试添加

```
QT += widgets 
```

在您的 .pro 文件中。我也有同样的消息...从 5.0 开始，基于 Qt 的应用程序默认不喜欢小部件...每个人都迁移到 QML 吗？

PS：现在，作为这个任务的下一点 - 我找不到 QPrinter ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T21:13:49.390

我也遇到了这个问题。

一旦我添加

```
QT += widgets 
```

就像 Denjs 建议的那样，我还需要添加：

```
INCLUDEPATH += $$PWD/../qtsingleapplication-2.6-opensource/src/ 
```

这是 QtSingleApplication 源文件的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:42:49.687

它表明您在 IDE 中错误地配置了库搜索路径。未找到 QT SDK 库。您是否使用 QT 工具和/或安装手册安装了所有内容？

“QApplication”是头文件之一，包含在`#include <qapplication>`. 根据您安装 SDK 的方式和安装方式，它可能驻留在例如：

带有 Carbide/Eclipse 的诺基亚 SDK：

```
C:\????\Nokia\devices\Nokia_Symbian_Belle_SDK_v1.0\epoc32\include\mw\qtgui 
```

QtCreator 和 QT SDK 安装程序：

```
C:\????\QtSDK\Symbian\SDKs\SymbianSR1Qt474\include\QtGui 
```

在哪里 ？？？？代表您在安装工具时选择的位置。首先，检查您是否拥有该文件。

如果你有它，如果它没有损坏，如果你没有弄错驱动器等，然后检查你的 QT 项目文件并检查你是否真的有所有的导入和包含设置正确。也许你忘记了一些“\include”后缀，或者你有一个太多了？LINUX 和 WIN32 构建配置通常在许多设置上有所不同，很容易意外混合一些设置路径的条件

编辑：

感谢更新！路径确实看起来不错

我重新阅读了你的错误日志，一切看起来都很好，直到我重新格式化了一点。有什么奇怪的东西冒出来了。请查看第一个 G++ 调用并将其与第二个失败的调用进行比较。

第二个缺少所有路径设置。但这是正常的。第一个执行编译，第二个执行链接。`g++ -c`可通过与`g++`没有“-c”参数进行区分。但是看看传递给 G++ 的文件。

第一个编译`qtsingleapplication.cpp`成`qtsingleapplication.o`，而第二个试图链接`qtsingleapplication.cpp`成`-o QtSingleApplication`。

我觉得：

*   第二行忘记了参数“-c”和所有`-I`路径
*   或第二行有无效的输入文件，应该有`qtsingleapplication.o`而不是`.cpp`

我想你的 qtprojs 中确实有一些开关/条件搞砸了：win32 案例。对不起，我不能告诉你更多，在这一点上，我必须尝试自己编译项目并调查生成文件/qtprojs。尝试回溯第二行是如何生成的以及使用了哪些 makefile/qtproj 变量，然后对项目设置进行双重甚至三重检查。不要在 IDE 中执行此操作，而是在使用的实际项目文件中执行此操作。IDE 有时会向您隐藏一些条件和设置，尤其是 QT Creator 喜欢这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-18T06:01:36.580

我是 Qt 的新手。当我尝试第一个程序时，在 qmake -project qmake hello.pro

'make'后出现错误：'QApplication'file not found

但使用相同的代码，它可以在 Qt Creator 上成功调试。当我想释放它时发生了同样的错误。

解决方案是修改 .pro 文件。添加以下两行：

QT += 核心 gui

大于（QT_MAJOR_VERSION，4）：QT += 小部件

# javascript - jquery下拉菜单，切换类

> ID：15290743
> 
> 赞同：1
> 
> 时间：2013-03-08T09:33:01.873
> 
> 标签：javascript, jquery, css

我有一个下拉菜单，并在单击时使用 jQuery 切换类。因此，当我单击 时`<a>`，它的父级`<li>`变为活动状态，从而使用 css 显示其子菜单。我的问题是，`RemoveClass`这里的目的是它会删除`active`已经打开的子菜单中的类。

问题是当我`<a>`再次单击时，它并没有关闭当前的子菜单，即它似乎没有切换，只是添加了类。

```
$("#pop-out-left ul li a").click(function () {
    $("#pop-out-left ul li").removeClass("active");
    $(this).parent().toggleClass("active");

    }); 
```

这是CSS ..

```
#pop-out-left > ul > li.active > a + ul {
display: block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:44:16.820

这是因为您开始使用以下代码删除`active`所有`li`标签上的类：

```
$("#pop-out-left ul li").removeClass("active"); 
```

然后，当您切换时，该类将再次添加。这意味着第二次单击只是重复第一种情况。

要解决它，只需更改上面的语句以排除单击的项目，如下所示：

```
$("#pop-out-left ul li a").click(function () {
    $("#pop-out-left ul li")
        .not($(this).parent())
        .removeClass("active");
    $(this).parent().toggleClass("active");
}); 
```

这是一个工作小提琴：[jsfiddle.net/dDhYu](http://jsfiddle.net/dDhYu/)

# android - 在添加到根视图之前检查子视图的空间

> ID：15290746
> 
> 赞同：1
> 
> 时间：2013-03-08T09:33:05.013
> 
> 标签：android, android-linearlayout, android-view

如何检查**子视图的空间**

例如，我的子视图重新生成一个从 1 到 40 的数字

```
LinearLayout root=(LinearLayout)findViewById(R.id.linearroot);

        for(int i=1;i<40;i++)
        {
            TextView aa=new TextView(this);
            aa.setText(""+i);
            root.addView(aa);
        } 
```

同时将子子项添加到根视图。如果它到达屏幕底部，那么它应该像这样在右侧创建一个子视图

```
1 10 | 19
2 11 | 20
3 12 | 21
4 13 | 22
5 14 | 23  <-> 19-27 hidden, but columns scrollable horizontally
6 15 | 24
7 16 | 25
8 17 | 26
9 18 | 27 
```

任何人都可以知道空间计算。

提前致谢。

# blackberry - 升级黑莓应用程序安装为新应用程序？

> ID：15290749
> 
> 赞同：1
> 
> 时间：2013-03-08T09:33:07.513
> 
> 标签：blackberry

我正在尝试升级黑莓应用程序，但它正在作为单独的应用程序安装。可能是什么问题呢？应用程序（旧的和新的）都具有相同的名称，并使用相同的密钥进行签名。我还缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:02:19.333

您需要为升级应用程序提供与旧应用程序相同的文件名。

例如，如果您的旧应用程序具有文件名：`com_yourcompany_yourapp.cod`那么您的新应用程序，如果您想重写现有应用程序，则必须具有相同的文件名。在此上下文中的应用程序名称无关紧要。只有文件名可以。

# django - FieldError：类“用户”中的本地字段“密码”与基类“AbstractBaseUser”中类似名称的字段冲突？

> ID：15290750
> 
> 赞同：1
> 
> 时间：2013-03-08T09:33:08.023
> 
> 标签：django, django-authentication, django-1.5

我正在使用 Django 1.5。我有以下模型：

```
class User(AbstractBaseUser):
    #id = models.IntegerField(primary_key=True)
    #identifier = models.CharField(max_length=40, unique=True, db_index=True)
    username = models.CharField(max_length=90, unique=True, db_index=True)
    create_time = models.DateTimeField(null=True, blank=True)
    update_time = models.DateTimeField(null=True, blank=True)
    email = models.CharField(max_length=225)
    password = models.CharField(max_length=120)
    external = models.IntegerField(null=True, blank=True)
    deleted = models.IntegerField(null=True, blank=True)
    purged = models.IntegerField(null=True, blank=True)
    form_values_id = models.IntegerField(null=True, blank=True)
    disk_usage = models.DecimalField(null=True, max_digits=16, decimal_places=0, blank=True)
    objects = UserManager()
    USERNAME_FIELD = 'email'
    class Meta:
        db_table = u'galaxy_user' 
```

运行时出现此错误`./manage.py syncdb`：

```
FieldError: Local field 'password' in class 'User' clashes with field of similar name from base class 'AbstractBaseUser' 
```

我尝试从模型中删除密码字段，但即使密码字段已从模型中删除，它也不会进行身份验证。我正在使用我的自定义 Django 身份验证：

```
class AuthBackend:
    def authenticate(self, username=None, password=None):
        if '@' in username:
            kwargs = {'email': username}
        else:
            kwargs = {'username': username}
        try:
            user = User.objects.get(**kwargs)
            if user.check_password(password):
                return user
        except User.DoesNotExist:
            return None

    def get_user(self, user_id):
        try:
            return User.objects.get(pk=user_id)
        except User.DoesNotExist:
            return None 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-26T14:45:45.640

与普通的 python 继承不同，Django 中不允许字段名称“隐藏”

只需使用抽象用户提供的密码字段并在保存方法或表单/api中进行任何自定义保存/检查

阅读此处了解更多信息：

[https://docs.djangoproject.com/en/1.8/topics/db/models/#field-name-hiding-is-not-permitted](https://docs.djangoproject.com/en/1.8/topics/db/models/#field-name-hiding-is-not-permitted)

# java - 更改 Web 应用程序语言

> ID：15290751
> 
> 赞同：2
> 
> 时间：2013-03-08T09:33:10.783
> 
> 标签：java, web-applications, programming-languages, migration

我有一个用单一语言构建的 Web 应用程序，我想通过添加更多语言来使其国际化。我想使用一个包含键和值的属性文件来做到这一点（像'name'这样的键和每个属性文件中这个键的值发生变化）。前段时间我读到有一个应用程序能够从 jsp 文件中提取标签并生成包含键的属性文件。有人能告诉我最好的方法是什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:48:04.083

```
step 1 : use properties file for every language you want
step 2 : in all your view pages dont give static values but pick from language properties file 
```

您也可以根据自己的喜好参考此[链接](http://tomi.panula-ont.to/i18n/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:54:24.203

尝试使用资源包。假设您有名为 Resources_EN.properties、Resources_FR.properties 等的本地化属性文件。您必须将属性文件放在类路径中。要获取本地化字符串，请执行以下操作：

```
ResourceBundle resourceBundle = ResourceBundle.getBundle("Resources", new Locale("EN");
String value = resourceBundle.getString("myKey"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:40:32.870

该 Web 应用程序是否使用了 Struts？如果是。更改代码非常容易。您必须更改 I18N 和 jsps 的 Web.xml 才能根据语言获取属性文件。

# sql - SQL：仅首字母大写

> ID：15290754
> 
> 赞同：124
> 
> 时间：2013-03-08T09:33:17.327
> 
> 标签：sql, sql-server

我需要一条 SQL 语句来将每个单词的首字母大写。其他字符必须小写。

单词可以是这样的：

```
wezembeek-oppem
roeselare
BRUGGE
louvain-la-neuve 
```

必须是：

```
Wezembeek-Oppem
Roeselare
Brugge
Louvain-La-Neuve 
```

这应该是一个 UPDATE 语句，我想更新一列的数据。非常感谢您提前回答，我是 SQL 新手。

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2013-03-08T09:36:46.077

您是要求重命名列本身还是将列内的数据大写？如果您必须更改其数据，请使用以下命令：

```
UPDATE [yourtable]
SET word=UPPER(LEFT(word,1))+LOWER(SUBSTRING(word,2,LEN(word))) 
```

如果您只想更改它只是为了显示而不需要更改表中的实际数据：

```
SELECT UPPER(LEFT(word,1))+LOWER(SUBSTRING(word,2,LEN(word))) FROM [yourtable] 
```

希望这可以帮助。

**编辑：我意识到'-'所以这是我在一个函数中解决这个问题的尝试。**

```
CREATE FUNCTION [dbo].[CapitalizeFirstLetter]
(
--string need to format
@string VARCHAR(200)--increase the variable size depending on your needs.
)
RETURNS VARCHAR(200)
AS

BEGIN
--Declare Variables
DECLARE @Index INT,
@ResultString VARCHAR(200)--result string size should equal to the @string variable size
--Initialize the variables
SET @Index = 1
SET @ResultString = ''
--Run the Loop until END of the string

WHILE (@Index <LEN(@string)+1)
BEGIN
IF (@Index = 1)--first letter of the string
BEGIN
--make the first letter capital
SET @ResultString =
@ResultString + UPPER(SUBSTRING(@string, @Index, 1))
SET @Index = @Index+ 1--increase the index
END

-- IF the previous character is space or '-' or next character is '-'

ELSE IF ((SUBSTRING(@string, @Index-1, 1) =' 'or SUBSTRING(@string, @Index-1, 1) ='-' or SUBSTRING(@string, @Index+1, 1) ='-') and @Index+1 <> LEN(@string))
BEGIN
--make the letter capital
SET
@ResultString = @ResultString + UPPER(SUBSTRING(@string,@Index, 1))
SET
@Index = @Index +1--increase the index
END
ELSE-- all others
BEGIN
-- make the letter simple
SET
@ResultString = @ResultString + LOWER(SUBSTRING(@string,@Index, 1))
SET
@Index = @Index +1--incerase the index
END
END--END of the loop

IF (@@ERROR
<> 0)-- any error occur return the sEND string
BEGIN
SET
@ResultString = @string
END
-- IF no error found return the new string
RETURN @ResultString
END 
```

那么代码将是：

```
UPDATE [yourtable]
SET word=dbo.CapitalizeFirstLetter([STRING TO GO HERE]) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-08T09:55:10.380

创建以下函数

```
Alter FUNCTION InitialCap(@String VARCHAR(8000))
                  RETURNS VARCHAR(8000)
                 AS
 BEGIN 

                   DECLARE @Position INT;

SELECT @String   = STUFF(LOWER(@String),1,1,UPPER(LEFT(@String,1))) COLLATE Latin1_General_Bin,
                    @Position = PATINDEX('%[^A-Za-z''][a-z]%',@String COLLATE Latin1_General_Bin);

                    WHILE @Position > 0
                    SELECT @String   = STUFF(@String,@Position,2,UPPER(SUBSTRING(@String,@Position,2))) COLLATE Latin1_General_Bin,
                    @Position = PATINDEX('%[^A-Za-z''][a-z]%',@String COLLATE Latin1_General_Bin);

                     RETURN @String;
  END ; 
```

然后像这样称呼它

```
select dbo.InitialCap(columnname) from yourtable 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-08T10:15:55.320

请在不使用函数的情况下检查查询：

```
declare @T table(Insurance varchar(max))

insert into @T values ('wezembeek-oppem')
insert into @T values ('roeselare')
insert into @T values ('BRUGGE')
insert into @T values ('louvain-la-neuve')

select (
       select upper(T.N.value('.', 'char(1)'))+
                lower(stuff(T.N.value('.', 'varchar(max)'), 1, 1, ''))+(CASE WHEN RIGHT(T.N.value('.', 'varchar(max)'), 1)='-' THEN '' ELSE ' ' END)
       from X.InsXML.nodes('/N') as T(N)
       for xml path(''), type
       ).value('.', 'varchar(max)') as Insurance
from 
  (
  select cast('<N>'+replace(
            replace(
                Insurance, 
                ' ', '</N><N>'),
            '-', '-</N><N>')+'</N>' as xml) as InsXML
  from @T
  ) as X 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:39:43.957

```
select replace(wm_concat(new),',','-') exp_res from (select distinct initcap(substr(name,decode(level,1,1,instr(name,'-',1,level-1)+1),decode(level,(length(name)-length(replace(name,'-','')))+1,9999,instr(name,'-',1,level)-1-decode(level,1,0,instr(name,'-',1,level-1))))) new from table;
connect by level<= (select (length(name)-length(replace(name,'-','')))+1 from table)); 
```

# highcharts - 指定 min、max 和 tickInterval 的 HighCharts 未给出预期结果

> ID：15290755
> 
> 赞同：0
> 
> 时间：2013-03-08T09:33:20.337
> 
> 标签：highcharts

我在[jsFiddle](http://jsfiddle.net/dwatling/Y25kv/12/)上设置了2 个图表的示例，我认为这些图表在 yAxis 上应该有相同的刻度。第一种用途

```
yAxis: [{
    tickInterval: 94000,
    min: 628000,
    max: 1004000
}] 
```

第二个（期望的结果）使用

```
yAxis: [{
    tickPositions: [628000, 722000, 816000, 910000, 1004000]
}] 
```

我在第一个示例中做错了什么，还是应该将其报告为错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:43:17.263

Highcharts 中的逻辑与“设置最小值、间隔和将起作用”略有不同。它对值进行四舍五入以提高可读性等。在您的示例中，实际上并不那么明显。

如果您不想使用内置逻辑来设置刻度，请使用 tickPositioner 编写您自己的逻辑。例如：

```
 tickInterval: 94000,
        tickPositioner: function(min,max){
            var act = min,
                ticks = [];
            console.log(this);
            while(act <= max){
                ticks.push(act);
                act+= this.tickInterval;
            }
              return ticks;  
        },
        min: 628000,
        max: 1004000 
```

工作[jsFiddle](http://jsfiddle.net/Y25kv/15/)。

# r - R循环遍历名称和元素

> ID：15290759
> 
> 赞同：0
> 
> 时间：2013-03-08T09:33:28.587
> 
> 标签：r, loops, for-loop

到目前为止，我每行只有 5 个，但很快我就会有超过 20 个，所以我需要找到更好的方法来做到这一点。我在考虑`for`循环，但我不知道如何迭代名称（mt1、mt2 等）上的数字。

```
mt1<- do.call(cbind, dataoutput[[1]])
mt2<- do.call(cbind, dataoutput[[2]])
mt3<- do.call(cbind, dataoutput[[3]])
mt4<- do.call(cbind, dataoutput[[4]])
mt5<- do.call(cbind, dataoutput[[5]])

rownames(mt1)[1:No.file]<-paste("file", 1:No.file, sep=" ")
rownames(mt2)[1:No.file]<-paste("file", 1:No.file, sep=" ")
rownames(mt3)[1:No.file]<-paste("file", 1:No.file, sep=" ")
rownames(mt4)[1:No.file]<-paste("file", 1:No.file, sep=" ")
rownames(mt5)[1:No.file]<-paste("file", 1:No.file, sep=" ")

library(reshape)
mt11<-melt(mt1, id.vars="Legend")
mt21<-melt(mt2, id.vars="Legend")
mt31<-melt(mt3, id.vars="Legend")
mt41<-melt(mt4, id.vars="Legend")
mt51<-melt(mt5, id.vars="Legend") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:39:23.493

您可以使用`lapply`，例如：

```
lapply(1:5,function(i){
       mt <- do.call(cbind, dataoutput[[i]])
       rownames(mt)[1:No.file]<- paste("file", 1:No.file, sep=" ")
       mt.melt <-melt(mt, id.vars="Legend")
}) 
```

在这里，您会得到一个列表，`data.frame`其中的列表比单独的变量要好得多。

请注意，这`paste("file", 1:No.file, sep=" ")`对于所有 data.frame 都是相同的。

**编辑**

在这种情况下，最好循环，这将处理 dataoutput 长度==0 的情况并避免类似错误`subscript out of bounds`

```
lapply(dataoutput,function(do){
       mt <- do.call(cbind, do)
       rownames(mt)[1:No.file]<- paste("file", 1:No.file, sep=" ")
       mt.melt <-melt(mt, id.vars="Legend")
}) 
```

# jquery - Jquery - 文本框隐藏在其焦点上

> ID：15290760
> 
> 赞同：0
> 
> 时间：2013-03-08T09:33:33.857
> 
> 标签：jquery

我有几个 div，点击时会显示一个 TextBox。TextBox 是从另一个 div 复制而来的。它工作正常，但是当我将焦点放在 TextBox 上时，它就消失了。我究竟做错了什么？

[**JSFIDDLE**](http://jsfiddle.net/PpbWw/)

HTML

```
 <table>
        <tr>
            <td>
                <div class="panel_call">
                    Call 1
                    <div class="panel_authenticate_container" style="display: none">
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="panel_call">
                    Call 2
                    <div class="panel_authenticate_container" style="display: none">
                    </div>
                </div>
            </td>
        </tr>
    </table>
    <div class="panel_authenticate" style="display: none;">
        Email:
        <input id="Text1" type="text" />
    </div> 
```

查询

```
 $(".panel_call").click(function(e) {
            if ($(e.target).closest("tr").find(".panel_authenticate_container").is(":visible")) {
                var c = $(e.target).closest("tr").find(".panel_authenticate_container").html();
                $(".panel_authenticate").html(c);
                $(e.target).closest("tr").find(".panel_authenticate_container").html("");
                $(e.target).closest("tr").find(".panel_authenticate_container").hide();
            }
            else {
                if ($(".panel_authenticate_container:visible").length > 0) {
                    var b = $(".panel_authenticate_container:visible").html();
                    $(".panel_authenticate").html(b);
                    $(".panel_authenticate_container:visible").html("");
                    $(".panel_authenticate_container:visible").hide();
                }
                var a = $(".panel_authenticate").html();
                $(e.target).closest("tr").find(".panel_authenticate_container").html(a);
                $(e.target).closest("tr").find(".panel_authenticate_container").show();
                $(".panel_authenticate").html("");
                $(".panel_authenticate").hide();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:58:08.633

检查输入是否被点击，如果是则什么也不做

[JSFiddle](http://jsfiddle.net/PpbWw/1)

将以下行添加到单击处理程序

```
if ($(e.target).is(":input"))
    return; 
```

所以整个事情看起来像这样

```
$(".panel_call").click(function(e) {
if ($(e.target).is(":input"))
    return;
if ($(e.target).closest("tr").find(".panel_authenticate_container").is(":visible")) {
     var c = $(e.target).closest("tr").find(".panel_authenticate_container").html();
     $(".panel_authenticate").html(c);
     $(e.target).closest("tr").find(".panel_authenticate_container").html("");
     $(e.target).closest("tr").find(".panel_authenticate_container").hide();
 }
 else {
     if ($(".panel_authenticate_container:visible").length > 0) {
         var b = $(".panel_authenticate_container:visible").html();
         $(".panel_authenticate").html(b);
         $(".panel_authenticate_container:visible").html("");
         $(".panel_authenticate_container:visible").hide();
     }
     var a = $(".panel_authenticate").html();
     $(e.target).closest("tr").find(".panel_authenticate_container").html(a);
     $(e.target).closest("tr").find(".panel_authenticate_container").show();
     $(".panel_authenticate").html("");
     $(".panel_authenticate").hide();
 }
 }); 
```

要防止单击处理程序对面板中包含文本框的任何内容执行，请添加以下检查

```
if ($(e.target).is(".panel_authenticate_container *, .panel_authenticate_container"))
    return; 
```

整个事情看起来像这样

```
$(".panel_call").click(function(e) {
if ($(e.target).is(".panel_authenticate_container *, .panel_authenticate_container"))
    return;
if ($(e.target).closest("tr").find(".panel_authenticate_container").is(":visible")) {
     var c = $(e.target).closest("tr").find(".panel_authenticate_container").html();
     $(".panel_authenticate").html(c);
     $(e.target).closest("tr").find(".panel_authenticate_container").html("");
     $(e.target).closest("tr").find(".panel_authenticate_container").hide();
 }
 else {
     if ($(".panel_authenticate_container:visible").length > 0) {
         var b = $(".panel_authenticate_container:visible").html();
         $(".panel_authenticate").html(b);
         $(".panel_authenticate_container:visible").html("");
         $(".panel_authenticate_container:visible").hide();
     }
     var a = $(".panel_authenticate").html();
     $(e.target).closest("tr").find(".panel_authenticate_container").html(a);
     $(e.target).closest("tr").find(".panel_authenticate_container").show();
     $(".panel_authenticate").html("");
     $(".panel_authenticate").hide();
 }
 }); 
```

[JSFiddle](http://jsfiddle.net/PpbWw/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:42:16.970

那两条线导致了消失。

```
$(e.target).closest("tr").find(".panel_authenticate_container").html("");
$(e.target).closest("tr").find(".panel_authenticate_container").hide(); 
```

将它们注释掉，它应该可以正常工作。

```
$(".panel_call").click(function(e) {
        if ($(e.target).closest("tr").find(".panel_authenticate_container").is(":visible")) {
            var c = $(e.target).closest("tr").find(".panel_authenticate_container").html();
            $(".panel_authenticate").html(c);
            //$(e.target).closest("tr").find(".panel_authenticate_container").html("");
            //$(e.target).closest("tr").find(".panel_authenticate_container").hide();
        }
        else {
            if ($(".panel_authenticate_container:visible").length > 0) {
                var b = $(".panel_authenticate_container:visible").html();
                $(".panel_authenticate").html(b);
                $(".panel_authenticate_container:visible").html("");
                $(".panel_authenticate_container:visible").hide();
            }
            var a = $(".panel_authenticate").html();
            $(e.target).closest("tr").find(".panel_authenticate_container").html(a);
            $(e.target).closest("tr").find(".panel_authenticate_container").show();
            $(".panel_authenticate").html("");
            $(".panel_authenticate").hide();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T09:44:40.627

试试这个代码..

```
$(".panel_call").click(function (e) {
    if ($(e.target).closest("tr").find(".panel_authenticate_container").is(":visible")) {
        var c = $(e.target).closest("tr").find(".panel_authenticate_container").html();
        $(".panel_authenticate").html(c);

        if (e.target.nodeName == "DIV") {
            $(e.target).closest("tr").find(".panel_authenticate_container").hide();
        }
    } else {
        if ($(".panel_authenticate_container:visible").length > 0) {
            var b = $(".panel_authenticate_container:visible").html();
            $(".panel_authenticate").html(b);
            $(".panel_authenticate_container:visible").html("");
            $(".panel_authenticate_container:visible").hide();
        }
        var a = $(".panel_authenticate").html();
        $(e.target).closest("tr").find(".panel_authenticate_container").html(a);
        $(e.target).closest("tr").find(".panel_authenticate_container").show();
        $(".panel_authenticate").html("");
        $(".panel_authenticate").hide();
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T09:53:51.597

我认为它会正常工作。将此行更改为

```
 var c = $(e.target).closest("tr").find(".panel_authenticate_container").html();
 $(".panel_authenticate").html(c); 
```

至

```
var c = $(e.target).closest("tr").find(".panel_authenticate_container").html();
$(".panel_authenticate").html(c.clone().html());
c.remove(); 
```

# ios - 使用 AFNetworking 处理异步 POST json 请求

> ID：15290761
> 
> 赞同：5
> 
> 时间：2013-03-08T09:33:42.460
> 
> 标签：ios, afnetworking

我一直在尝试使用 AFNetworking 使用 POST json。经过一番研究，我终于让它工作了

```
- (IBAction)go:(id)sender {
    //Some POST
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"https://www.test.com/"]];
    [httpClient setParameterEncoding:AFJSONParameterEncoding];
    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST"
                                                            path:@"https://www.test.com/user/login/"
                                                      parameters:@{@"username":self.username.text, @"password":self.password.text}];
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        // Print the response body in text
        NSDictionary *jsonDict = (NSDictionary *) responseObject;
        BOOL *success = [[jsonDict objectForKey:@"success"] boolValue];
        NSLog(@"Response: %@", [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding]);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error: %@", error);
    }];
    [operation start];
} 
```

这对于演示目的来说很好，但现在我想最终使用 NSDirectory 来拆分我的 json 对象，所以我尝试做这样的事情，但是每当我输入点击按钮时我的应用程序就会崩溃

```
- (IBAction)go:(id)sender {
    //Some POST
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"https://www.test.com/"]];
    [httpClient setParameterEncoding:AFJSONParameterEncoding];
    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST"
                                                            path:@"https://www.test.com/user/login/"
                                                      parameters:@{@"username":self.username.text, @"password":self.password.text}];
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        // Print the response body in text
        NSDictionary *jsonDict = (NSDictionary *) responseObject;
        BOOL success = [[jsonDict objectForKey:@"success"] boolValue];
        if (success) {
            NSLog(@"yes!!!");
        }else{
            NSString *reason = [jsonDict objectForKey:@"reason"];
            NSLog(@"reason: %@",reason);
        }
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error: %@", error);
    }];
    [operation start];
} 
```

# 错误

```
2013-03-08 03:27:34.648 test[18253:c07] -[__NSCFData objectForKey:]: unrecognized selector sent to instance 0x888a6b0
2013-03-08 03:27:34.648 test[18253:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFData objectForKey:]: unrecognized selector sent to instance 0x888a6b0'
*** First throw call stack:
(0x1ce0012 0x111de7e 0x1d6b4bd 0x1ccfbbc 0x1ccf94e 0x24608 0x12e71 0x4a4453f 0x4a56014 0x4a467d5 0x1c86af5 0x1c85f44 0x1c85e1b 0x1c3a7e3 0x1c3a668 0x61ffc 0x21ad 0x20d5)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T09:38:43.863

您正在使用`AFHTTPRequestOperation`而不是`AFJSONRequestOperation`.

也可以`AFHttpClient`直接使用：

```
NSDictionary *parameter = @{@"username":self.username.text, @"password":self.password.text};
[httpClient setParameterEncoding:AFJSONParameterEncoding];
[httpClient registerHTTPOperationClass:[AFJSONRequestOperation class]];

[httpClient postPath:@"api/v1/user/login/" parameters:parameter success:^(AFHTTPRequestOperation *operation, id responseObject) {
    // Print the response body in text
    BOOL *success = [[responseObject objectForKey:@"success"] boolValue];
    NSLog(@"Response: %@",responseObject);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    [self handleConnectionError:error];
}]; 
```

我还建议创建一个只创建一个`AFHTTPClient`using`clientWithBaseURL:`方法的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T15:17:17.967

使用 AFHTTPRequestOperationManager 您将添加您的请求管理器，在我的情况下，我已经使用 NSdictionnary 作为参数完成了一个 POST 方法

```
[manager GET:url parameters:parameters success:success failure:failure]; 
```

使用此行，您可以选择您的方法/获取或发布

```
AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];
NSDictionary *parameters= dic;
NSMutableString *url = [[NSMutableString alloc] init];
[url appendString: RootObj.root];
    [url appendString:@"/yourURL/"];
manager.requestSerializer=[AFHTTPRequestSerializer serializer];
manager.responseSerializer = [AFJSONResponseSerializer serializer];

[manager POST:url parameters:parameters success:^(AFHTTPRequestOperation *operation, id responseObject) {
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {      
}];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T06:41:40.953

我试图发送 JSON 对象并取回 JSON 数据并解析它

```
NSURL *url = [NSURL URLWithString:@"https://MySite.com/"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc]initWithBaseURL:url];
//[httpClient setParameterEncoding:AFJSONParameterEncoding];
//[httpClient registerHTTPOperationClass:[AFJSONRequestOperation class]];

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                        @"Ans", @"name",
                        @"29",  @"age", nil];
NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST"
                                                        path:@"/testJSONReturn.php"
                                                  parameters:params];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"DATA: %@", [JSON valueForKeyPath:@"data"]);
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Request Failure Because %@",[error userInfo]);
}];

[operation start]; 
```

可能有帮助

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-22T10:17:44.940

另一种方法，使用 AFHTTPRequestOperation：

```
NSString* path = "http://www.test.com/file.php";
NSMutableURLRequest* request = [NSURLRequest requestWithURL:[NSURL URLWithString:path]];
//request.HTTPMethod = @"GET";
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:request];
//operation.responseSerializer = [AFJSONResponseSerializer serializer];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"success: %@", operation.responseString);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"error: %@",  operation.responseString);
}];
[operation start]; 
```

# ruby-on-rails - 如何使用 accept_nested_attributes_for 让 simple_form 做我想做的事

> ID：15290766
> 
> 赞同：0
> 
> 时间：2013-03-08T09:33:54.923
> 
> 标签：ruby-on-rails, activerecord, simple-form

每个`survey` `has_many` `results`和`accepts_nested_attributes_for` `results`。

**/app/models/survey.rb：**

```
attr_accessible :results_attributes
has_many :results
accepts_nested_attributes_for :results 
```

每个结果要么被选中，要么未被选中：

**/db/schema.rb：**

```
create_table "results", :force => true do |t|
  t.boolean  "selected", :default => false
  t.integer "survey_id"
end 
```

有时`@survey.additive == true`。在这些情况下，可以选择任意数量的结果。您可以使用一系列复选框来表示这一点，每个复选框`result`在`@survey.results`.

有时`@survey.additive == false`。在这些情况下，只能选择一个结果。您可以使用一系列单选按钮来表示这一点，每个单选按钮`result`在`@survey.results`.

我正在使用[simple_form](https://github.com/plataformatec/simple_form)和 HAML。

我正在尝试编写`/app/views/surveys/_form.html.haml`，以便它会创建一系列单选按钮来选择在`@survey.additive == false`.

（从那里应该很容易推断代码在 时也创建一系列复选框`@survey.additive == true`。）

我的第一次尝试是：

```
= simple_form_for [@competitor, @survey] do |f|
  = f.error_notification
  = f.simple_fields_for :results do |r|
    = r.input :selected, :as => :radio_buttons, :label => r.name
  = f.button :submit, :id => 'submit_survey' 
```

这让我犯了一个`undefined method 'name' for #<SimpleForm::FormBuilder:0x007fbd1f687048>`错误。

我的第二步是删除`:label => r.name`，但结果是四行单独的单选按钮，每行标记为“已选择”，每行包含一个“是”单选按钮和一个“否”单选按钮。分开我的意思是在一行中选择“是”会在该行中取消选择“否”，但对其他行中的单选按钮没有影响。（我实际需要的是四个连接的单选按钮，每个按钮都标有`result.name`in `@survey.results`，因此取消选择四个中的任何一个都会取消选择其他三个。）

在那之后，我尝试了很多变化，但到目前为止我所有的尝试都失败了。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:09:52.537

该`underfined method 'name'`错误可以通过使用来克服`r.object.name`。

如果您可以将许多结果`selected`设置为 true，那么这就足够了，并且它应该适用于上述情况。如果没有，请继续阅读。

布尔值上带有 radio_buttons 的东西是它们将生成一个`yes`and`no`选项。如果您只想要一个选定的结果，我建议切换到 Survey`has_many :results`和`belongs_to :selected_result`. 然后，您将能够构建一组单选按钮来设置`selected_result_id`, 生成自`survey.results`。

如果这不是一个选项，您将必须使用自定义验证来验证调查，以便它只能有一个 selected_result （为此添加范围）并构建一组从`survey.results`. `attr_accessor :selected_result_id`然后，在您的控制器中，您将不得不遍历结果并设置`result.selected = false`除所选结果之外的每个结果。

# java - Lucene 3.6.2 不包含 TopDocCollector 类

> ID：15290768
> 
> 赞同：0
> 
> 时间：2013-03-08T09:34:09.397
> 
> 标签：java, maven, netbeans, lucene

我正在尝试通过以下链接使用 lucene 示例[http://www.hascode.com/2010/03/how-to-build-a-quick-lucene-search/](http://www.hascode.com/2010/03/how-to-build-a-quick-lucene-search/)

但是，我没有使用 maven ，只是导入到 NetBeans 项目库中的 lucene 3.6.2 库

但以下代码让 NetBeans 抱怨：

```
 // searching ...
    int hitsPerPage = 10;
    IndexSearcher searcher = new IndexSearcher(index);
    TopDocCollector collector = new TopDocCollector(hitsPerPage);
    searcher.search(q, collector);
    ScoreDoc[] hits = collector.topDocs().scoreDocs; 
```

IDE 抱怨找不到类 TopDocCollector

我已经导入了以下包

```
import org.apache.lucene.search.TopDocCollector; 
```

如教程中所示，但看起来它不包含在库中

请有任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:43:37.033

如果您下载[lucene-3.6.2.zip](http://apache.mirrors.timporter.net/lucene/java/3.6.2/)，它包含`lucene-core-3.6.2.jar`. 这个罐子肯定包含`org/apache/lucene/search/TopDocsCollector.class`.

# c++ - 类对象和指针的区别

> ID：15290769
> 
> 赞同：0
> 
> 时间：2013-03-08T09:34:09.990
> 
> 标签：c++, class, object, pointers

假设我们有这个类：

```
class book {
  public:
  book(int pages = 0) {pages = m_pages;}
  getPages() { return m_pages;}
  setPages(int pages) { pages = m_pages;}
  private:
  int m_pages;
}; 
```

我永远不明白何时使用指向类的指针，或何时创建它的对象。示例：什么更好，为什么？

```
book The_lord_of_the_rings; 
```

或者：

```
book* The_lord_of_the_rings; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:35:34.383

在第一种情况下，变量`The_lord_of_the_rings` *是*对象。在第二种情况下，变量指向内存中对象所在的其他位置。

让我们尝试一个简单的 ASCII 图像：

在第一种情况下，您有一个对象：

```
+----------------------------------------------------+
| The_lord_of_the_rings |
| （与对象关联的所有数据）|
+----------------------------------------------------+

```

在第二个示例中，您有一个指针：

```
+------------------------+ +------------ --------+
| The_lord_of_the_rings | ----> | 实际对象及其数据 |
+------------------------+ +------------ --------+

```

**但是：**正如 juanchopanza 在评论中指出的那样，指针实际上*不必*指向有效对象。如果您只是将指针声明为局部变量，则它不会被初始化并指向内存中看似随机的位置。在这种情况下，取消引用（访问指针指向的数据）会导致*未定义的行为*，并且实际上可能会使程序崩溃。指针在使用前应始终初始化为指向有效对象。

* * *

在现代 C++ 中，几乎没有理由使用指针，尤其是原始指针。现在有很好的“智能指针”，比如[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)and [`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)。

何时使用指针在很大程度上取决于具体情况，但通常使用普通对象和引用可以取得很大进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:46:39.097

要使用多态，您需要使用指向类的指针。

[http://www.cplusplus.com/doc/tutorial/polymorphism/](http://www.cplusplus.com/doc/tutorial/polymorphism/)

另一种情况是在嵌入式系统编程中，或者当可用内存受到限制时，我们更喜欢使用指针，在需要时分配内存并在完成使用后取消分配内存，以便其他人在需要时可以获得内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:51:46.090

当与继承和虚函数有关时，我更喜欢使用指针。摆脱作为参数传递给函数时调用的复制构造函数也很有用。指针使您可以根据需要自由分配/删除（通过 new/delete 关键字）。另一方面，使用对象将帮助您减少内存泄漏问题，因为当对象超出范围时系统将自行声明内存。

# html - 图像映射在 Internet Explorer 中不起作用

> ID：15290776
> 
> 赞同：-1
> 
> 时间：2013-03-08T09:34:47.837
> 
> 标签：html, internet-explorer

我真的尝试了一切，但它不起作用。

代码是

```
<html>
<head>
  <title>Map test</title>
</head>
<body>
  <img usemap="#map1" src="/assets/templates/design01/header2.jpg" alt="SaveMe Header" />
  <map name="map1">
    <a href="/sitemap" shape="rect" coords="600,115,670,135" title="Sitemap"></a>
    <a href="/contact" shape="rect" coords="680,115,750,135" title="Contact"></a>
  </map>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:42:12.250

如果您将`a`标签更改为`area`，它将起作用。

```
<map name="map1">
  <area href="/sitemap" shape="rect" coords="600,115,670,135" title="Sitemap"></area>
  <area href="/contact" shape="rect" coords="680,115,750,135" title="Contact"></area>
</map> 
```

# c# - 如何防止重复项目listView C#

> ID：15290779
> 
> 赞同：6
> 
> 时间：2013-03-08T09:34:50.953
> 
> 标签：c#, listview, duplicates

我正在使用`Windows Forms`. 使用此代码，我将项目添加到`listView`from `comboBox`。

```
ListViewItem lvi = new ListViewItem();
lvi.Text = comboBox1.Text;
lvi.SubItems.Add("");
lvi.SubItems.Add("");
lvi.SubItems.Add("");
lvi.SubItems.Add("")

if (!listView1.Items.Contains(lvi))
{
    listView1.Items.Add(lvi);
} 
```

我需要防止重复项目但不起作用，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T09:42:14.313

ListView 类提供了几种检查项目是否存在的方法：

*   [`Contains`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.listviewitemcollection.contains.aspx)在[`Items collection`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.items.aspx), 和
*   [`FindItemWithText`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.finditemwithtext.aspx)方法

它可以像这样使用：

```
// assuming you had a pre-existing item
ListViewItem item = ListView1.FindItemWithText("item_key");
if (item == null)
{
    // item does not exist
}

// you can also use the overloaded method to match subitems
ListViewItem item = ListView1.FindItemWithText("sub_item_text", true, 0); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-08T09:43:23.693

你应该使用`ContainsKey(string key)`而不是`Contains(ListViewItem item)`

```
var txt = comboBox1.Text;

if (!listView1.Items.ContainsKey(txt))
{
    lvi.Text = txt;

    // this is the key that ContainsKey uses. you might want to use the value 
    // of the ComboBox or something else, depending the combobox is freetext 
    // or regarding your scenario.
    lvi.Name = txt;

    lvi.SubItems.Add("");
    lvi.SubItems.Add("");
    lvi.SubItems.Add("");
    lvi.SubItems.Add("");

    listView1.Items.Add(lvi);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-03T05:56:40.807

这段代码对我有用：

```
if(DialogResult.OK == fileDialogue.ShowDialog())
            {
                foreach (var v in fileDialogue.FileNames)
                {
                    if (listView.FindItemWithText(v) == null)
                    {
                        listView.Items.Add(v);
                    }

                    else
                    //Throw error message 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-16T05:13:28.250

```
String csVal = Value;
ListViewItem csItem = new ListViewItem(csVal);
if (!listViewABC.Items.ContainsKey(csVal))
{
    csItem.Name = csVal;
    listViewABC.Items.Add(csItem );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T09:43:11.043

```
if (!listView1.Items.Any(i => i.text == lvi.text))
{
    listView1.items.Add(lvi)
} 
```

我只是在猜测 text 属性，但我很确定它就在那里。

或者 - 只需拥有一个`List<string>`并将其用作列表的数据源。

# c# - 获取日期时间 CRM 2011

> ID：15290780
> 
> 赞同：2
> 
> 时间：2013-03-08T09:34:52.777
> 
> 标签：c#, plugins, dynamics-crm-2011, crm

我在使用 DateTime 时遇到了一些问题：使用 Fetch

```
 <attribute name='new_startdate' groupby='true' dategrouping='day' alias='new_startdate' /> 
  <attribute name='new_enddate' groupby='true' dategrouping='day' alias='new_enddate' /> 
  <attribute name='new_duedate' groupby='true' dategrouping='day' alias='new_duedate' /> 
```

认为这是错误的一点......

```
 DateTime scheduledstart = ((DateTime)((AliasedValue)a["new_startdate"]).Value);
  tracer.Trace("DateTime 1 Done");
  DateTime enddate = ((DateTime)((AliasedValue)a["new_enddate"]).Value);
  tracer.Trace("DateTime 2 Done");
  DateTime scheduledend = ((DateTime)((AliasedValue)a["new_duedate"]).Value); 
```

然后我添加到新实体...

```
 if (scheduledstart != null)
    {
      Activity.Attributes.Add("scheduledstart", scheduledstart);
    }
    if (enddate != null)
    {
       Activity.Attributes.Add("scheduledend", enddate);
    }
    if (scheduledend != null)
    {
     Activity.Attributes.Add("scheduledend", scheduledend);
    } 
```

任何想法我如何使用 fetch 中的 AliasedValue 编写 DateTime？或更好的方法来做到这一点>

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:17:55.850

我以前讨厌处理别名值，但后来我写了一些扩展方法，现在我不再担心它们了。查看我的博客[Simplifying Retrieval of Aliased Values in CRM 2011](http://www.dotnetdust.blogspot.com/2013/03/simplifying-retrieval-of-aliased-values.html)。我认为这将有助于解决您当前的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T10:39:18.050

感谢您的帮助，我决定只使用单独的获取日期值

```
string Date_Gather = string.Format(@"         
      <fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='false'>
         <entity name='new_import'>                       
                 <attribute name='new_enddate'/>         
         </entity>
       </fetch>", entity.Id);

foreach (var b in Date_Gather_result.Entities)
{

   if (b.Attributes.Contains("new_enddate"))
      {
          enddate = ((DateTime)(b["new_enddate"]));
          Entity.Attributes.Add("scheduledend", enddate);
      }
} 
```

无论如何谢谢希望它可以帮助别人

# css - IE css hacks 的起源是什么？

> ID：15290781
> 
> 赞同：0
> 
> 时间：2013-03-08T09:34:56.420
> 
> 标签：css, internet-explorer

我正在调整一个网站以使其与 IE7 一起使用，并且想知道：所有这些 IE hack 来自哪里？

问题是我无法想象一个人会说“是的，我们不会实施`display: inline-block`，但`*display: inline`会工作”。

这对我来说没有意义。那么是谁创造了这些黑客呢？是否有人发明了它们来替代某些不起作用的属性，或者这纯粹是运气？

PS：我了解您是否想将这个问题作为离题或其他内容结束，但如果至少您有链接或其他相关内容，我将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:48:06.300

hacks 起作用的原因是浏览器实现的变化和错误，主要是在旧版本的 Internet Explorer 中。

许多 hack 都围绕着对不寻常的选择器组合的不寻常反应。通常使用的是根据标准非法的选择器组合。由于标准没有指定非法代码应该如何工作，不同的浏览器对它的反应不同，这用于针对特定的浏览器。

在示例`*display: inline;`中，有一个错误的实现和错误处理的变体的组合。在 IE 中，该`inline`模式的实现有点像`inline-block`在其他浏览器中的实现，并且在选择器中使用星号会使其他浏览器忽略该规则。该 hack 将适用`display: inline;`于旧版本的 IE，并让其他浏览器使用该`display: inline-block;`规则。

# ajax - 无法通过 jquery 中的 ajax 回调函数提交表单

> ID：15290782
> 
> 赞同：0
> 
> 时间：2013-03-08T09:34:59.573
> 
> 标签：ajax, jquery

我做了一个 ajax 来防止表单提交进行验证

我通过将 ajaxs 返回存储在隐藏变量中来进行验证...

由于在我的 else 循环中返回 false，我的表单未提交

在 Ajax 返回成功后，我从 jquery 提交表单，但我得到了

未捕获的类型错误：对象＃的属性“提交”不是函数请帮助我.....

我只是在从 test.php 获得的隐藏字段中存储一个值 1 ....

但控制台在 $("#foo")[0].submit(); 上显示错误

如果我第二次点击提交，JavaScript 检查隐藏的值 = 1 并进入真正的循环......然后它得到提交

先感谢您

```
<form id="foo" name="foo" action="pop.php"  method="get">
    <label for="bar">A bar</label>
    <input id="bar" name="bar" type="text" value="" />
    <input id="bar1" name="bar1" type="text" value="" />
    <input type="hidden" name="statushidden" id="statushidden" value=""/>
    <input type="submit" value="submit" id="submit" />
</form>

$(document).ready(function() {

    $("#submit").click(function() {
        var $form = $(this);
        var status = validdata();

        if (document.getElementById("statushidden").value=="1")
        {
            alert("true loop");
            return true;
        }
        else
        {
            alert("false loop");
            return false;
        }

    });

    function validdata()
    {
        var url = "test.php"; 
        $.ajax({
           type: "POST",
           beforeSend: function(){},
           url: url,
           data: $("#foo").serialize(), // serializes the form's elements.
           success: function(data)
           {
               document.getElementById("statushidden").value=data;
               console.log($("#foo")[0].submit);
               $("#foo")[0].submit(); ///// SHOWING Error on this line///////      
           }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:38:42.273

你需要告诉 `contentType:"Application/Json"`

在您的点击方法之前。您阻止默认操作。一旦 ajax 完成，您调用 submit 方法。

```
$("#submit").click(function(e) {
         e.preventDefault();
        var $form = $(this);
        // your rest code. 
    }); 
```

像这样尝试ajax方法。

```
$.ajax({
url:url,
data:$("#foo").serialize(),
contentType:"Application/Json";
.... your success blocks. 
}); 
```

如果您在提交方法方面遇到问题。然后像这样尝试

```
$("form").submit(); ///// Error on this line will be fixed/////// 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:25:28.093

请通过从下面的函数中删除 [0] 来检查

```
function validdata()
    {
        var url = "test.php"; 
        $.ajax({
           type: "POST",
           beforeSend: function(){},
           url: url,
           data: $("#foo").serialize(), // serializes the form's elements.
           success: function(data)
           {
               document.getElementById("statushidden").value=data;
               $("#foo").submit(); ///// Removed [0] from your given snippet ///////      
           }
        });
    } 
```

# c++ - 使用小于 O(N^2) 的内存在 ij 范围内找到小于 O(ji) 的最小值

> ID：15290785
> 
> 赞同：1
> 
> 时间：2013-03-08T09:35:10.460
> 
> 标签：c++, algorithm, complexity-theory, minimum

假设有一个包含 N 个整数的大数组：

```
const unsigned N = 1e12;
int array[N] = { 1, 3 , 8, -5, 4, 3, -1 -6, 6, ....., N}; 
```

应该多次查询不同`i` `j`indecies范围内的最小元素。返回最小值的复杂度应该小于 O(ji) 并且应该使用少于 O(N^2) 的内存来解决问题。

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:40:17.953

RMQ 的工作方式如下：

我们保留一个数组 M[N][logN]，其中 M[i][j] 显示从 i 开始且长度为 2^j 的最小范围数。为了填充该数组，首先我们计算所有 M[i][0] 值，它们都等于 M[i][0] = A[i]（A[i] 是原始数组）。之后，通过归纳，每个 M[i][j] 将等于**min(M[i][j - 1], M[i + (1 << (j - 1))][j - 1])**即我们通过取其左右部分的最小值来获得更长间隔的值，这应该在上一步中计算，因为我们从最短到最长的间隔。

之后，为了得到[a..b]区间的最小值，你需要找到最大的P，使得2^P不超过区间[a..b]的长度。答案是**min(M[a][P], M[b - (1 << P) + 1][P])**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:49:48.493

正如您所提到的，对于静态数组，最快的解决方案是 O(1) 和 O(n) preproc。但在实践中，您可能希望使用以下方法之一，它也适用于动态数组，并且在我看来更容易理解和编码：

1.  将数组划分为 sqrt(n) 部分，每个部分包含 sqrt(n) 元素，并存储每个部分的最小值。每个 (i,j) 将完全包含其中一些片段，可能还有一些来自左右的元素。传递这些元素并存储片段的答案以找到最小值。这需要 O(n) preproc、O(sqrt(n)) 查询、O(sqrt(n)) 更新和 O(sqrt(n)) 内存。也很容易编码。

2.  在数组上构建[最小段树。](http://e-maxx.ru/algo/segment_tree)这为查询/更新提供了 O(logn)，O(n) 内存/preproc。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T10:37:50.837

对于那些懂俄语的人，这是解决方案：[http](http://e-maxx.ru/algo/rmq) ://e-maxx.ru/algo/rmq 对于那些不懂俄语的人，对不起，我没有找到任何东西。如果有人会找到，请编辑我的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T10:41:27.220

一个简单的解决方案是创建一个二维数组，其中条目 [i, j] 存储范围 arr[i..j] 中的最小值。现在可以在 O(1) 时间内计算给定范围的最小值，但预处理需要 O(n^2) 时间。此外，这种方法需要 O(n^2) 额外空间，这对于大型输入数组可能会变得巨大。

另一种解决方案是构建一个Segment树。Segment树可以在适当的时间内进行预处理和查询。对于分段树，预处理时间为 O(n)，范围最小查询的时间为 O(Logn)。存储段树所需的额外空间是 O(n)。

段树的表示

1.  叶节点是输入数组的元素。
2.  每个内部节点代表其下所有叶子的最小值。

Segment树的构建在这里详细解释：

[http://www.geeksforgeeks.org/segment-tree-set-1-range-minimum-query/](http://www.geeksforgeeks.org/segment-tree-set-1-range-minimum-query/)

# ios - 如何判断文件是否已发送或是否在 iOS 邮件的发件箱中

> ID：15290786
> 
> 赞同：1
> 
> 时间：2013-03-08T09:35:12.253
> 
> 标签：ios, mfmailcomposeviewcontroller, mfmailcomposer

我正在开发一个 iOS 应用程序，该应用程序允许用户发送到存储（使用核心数据）并以我使用 MFMailComposeViewController 类附加到电子邮件的 csv 文件的形式发回数据。

发送文件后，我想遍历数据并在每条记录上设置一个提交标志，这样当用户点击按钮提交更多数据时，它就不会再次发送

这很容易做到——我可以从内部调用方法来做到这一点

```
 -(void) mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{ 
```

使用

```
 case MFMailComposeResultSent: 
```

我想自己清理并在发送后删除 csv 文件，但我的问题是......（编辑 - 请参阅底部的更多测试后编辑）

MFMailComposeResultsSent 是 MFMailComposeResult ，如果邮件已发送，并且如果它已发送到发件箱但尚未发送。如果此时我删除了 csv 文件并且互联网连接已关闭并且邮件在发件箱中，那么当连接恢复并发送邮件时，附件已被删除并且显然不会发送。

我的 csv 文件的大小很小 - 一条记录大约 1kb，5 条大约 2kb（因为第一行是所有字段名称的差异），在此基础上，任何文件都不太可能更大超过 30kb，所以我不会使用大量内存。实际上，我看不到任何情况下，即使是最热情的用户也会生成超过半 MB 的数据

有什么想法我可以/应该如何解决这个问题？我不确定苹果对留下一堆小文件会采取什么态度，以及这可能会如何影响我的应用程序提交。

提前感谢您花时间阅读和/或回复此内容

西蒙

编辑

时间延迟似乎存在一些问题 - 也许 iOS 正在缓存已删除的文件？短暂的时间。

我进行了一系列测试运行，附件通过了 - 我一直在测试在 wifi 关闭和飞行模式打开的情况下发送，并且文件在我重新打开它们后不久就通过了。我刚刚测试了我在哪里打开了 wifi 路由，但我仍然连接着，但是从 wifi 路由器的背面拔了电缆，所以我后面没有互联网当我回到路由器并插入它的时候mail went ，它丢失了附件文件，邮件在没有它们的情况下通过。现在我有一堆测试，一半是附件通过，一半是附件没有

更多测试后编辑

我的问题可能是由于我对何时发生的事情的误解而引发的——但我没有将问题标记为已回答，因为我仍然想知道是否可以检查邮件是否真的已经消失。一个提供的答案说不，它不可能 - 其他任何人都可以确认这一点，然后我将其标记为答案。

反正

我认为丢失附件的问题可能来自进入邮件应用程序并在邮件无法找到连接时检查发件箱。有时 Mail 会在邮件上添加警告面，附件有时会消失。如果我不理会发件箱，附件似乎会正常运行。我将对此进行更多测试以确认情况确实如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:54:09.210

不幸的是，没有办法检查。

> **MFMailComposeResultSent**
> 
> ```
> The email message was queued in the user’s outbox. It is ready to send the next time the user connects to email. 
> ```

表示在消息排队等待发送（仍在发件箱中）时会得到此结果，发送后不会产生结果。

请[MFMailComposeViewController](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)了解详情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:54:21.903

您如何将 CSV 文件附加到电子邮件中？您可以尝试附加 NSData，而不是指定文件 URL。这样，您的附件就不会绑定到外部文件，而是嵌入到电子邮件本身中。

查看`MFMailComposeViewController addAttachmentData`更多详细信息。

例如

```
NSData *csvData = [NSData dataWithContentsOfFile:filePath]; 
```

使用 addAttachmentData 将 csvData 附加到您的 MFMailComposeViewController。

# javascript - 在 iframe IE8 内的函数中传递事件对象

> ID：15290787
> 
> 赞同：-1
> 
> 时间：2013-03-08T09:35:13.503
> 
> 标签：javascript, internet-explorer

我在 iframe 中动态加载 .htm 文件（.htm 在我的域中），如下所示：

```
el.innerHTML = "<iframe id='frmBook' onload='on_load()' src='blabla.htm'"; 
```

我的 on_load 是这样的：

```
function on_load() {

    document.getElementById("frmBook").contentWindow.document.body.ondblclick = function(event) {
        var oTextRange;
        if (!document.selection) {
            oTextRange = window.getSelection();
            if (oTextRange.rangeCount > 0) oTextRange.collapseToStart();
        }
        getWord(event);
    }

    document.getElementById("frmBook").contentWindow.document.body.oncontextmenu = function(event) {
        showContextMenu(event);
        return false;
    }
} 
```

现在我需要传递事件对象，因为它在 getWord() 和 showContextMenu() 中都使用。它在 getWord() 中用于获取 e.target.id（或 e.srcElement），在 showContextMenu() 中用于使用 e.page.X。问题是，IE8 无法识别（未定义）事件对象，因此无法通过。有没有办法为 IE8 传递事件对象？

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T13:36:56.130

首先，以这种方式分配您的 ifra 字符串：

```
el.innerHTML = '<iframe id="frmBook" onload="on_load()" src="blabla.htm"></iframe>'; 
```

否则无法运行。

然后，尝试使用**var**定义变量，这样可以防止其内容变为*undefined*：

```
function on_load() {

    document.getElementById("frmBook").contentWindow.document.body.ondblclick = function(event) {
        var e = event;
        var oTextRange;
        if (!document.selection) {
            oTextRange = window.getSelection();
            if (oTextRange.rangeCount > 0) oTextRange.collapseToStart();
        }
        getWord(e);
    }

    document.getElementById("frmBook").contentWindow.document.body.oncontextmenu = function(event) {
        var e = event;
        showContextMenu(e);
        return false;
    }
} 
```

# matlab - Matlab：我可以锁定 Y 轴（即使使用放大/缩小）？

> ID：15290788
> 
> 赞同：3
> 
> 时间：2013-03-08T09:35:15.387
> 
> 标签：matlab, plot, zooming

我有一个情节，我希望用户不能改变 Y 轴。可能吗？

放大/缩小工具功能是否有回调选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:15:52.940

这是解决方案：

```
ZoomHandle = zoom(h.Figure(1))
set(ZoomHandle,'Motion','horizontal') 
```

感谢所有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:19:47.640

查看“缩放”的帮助文件。

通常，仅将当前图形的缩放设置为水平，您只需要：

```
set(zoom(gcf),'Motion','horizontal','Enable','on'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:54:23.813

这可以通过句柄图形行为属性进行调整，请参阅[undocumentedmatlab.com 上的这篇文章](http://undocumentedmatlab.com/blog/handle-graphics-behavior/)。

# sql - 关于案例的两个查询。

> ID：15290797
> 
> 赞同：0
> 
> 时间：2013-03-08T09:35:38.700
> 
> 标签：sql

是否可以使用案例来选择黑白两种类型的查询？我想选择其中任何一个。而且我还希望两个查询的列都应该是可见的。

```
(CASE WHEN mti.category_code = 'SUBS'
  THEN (SELECT u.circle_code, u.city,
      u.msisdn AS subs_msisdn,
      u.user_name || '' || u.last_name AS subs_name
      FROM mtx_party u
      WHERE msisdn LIKE :msisdn
      AND u.user_id = mti.party_id)
  ELSE (SELECT u1.circle_code, u1.city,
          u1.msisdn AS ret_msisdn,
          u1.user_name || '' || u1.last_name AS ret_name,
                             u2.user_name || '' || u2.last_name AS dist_name,
                             u2.msisdn AS dist_msisdn, ' ' AS dist_acc_no,
                             u1.agent_code
                        FROM users u1, users u2
                       WHERE msisdn LIKE :msisdn
                         AND u1.user_id = mti.party_id
                         AND u2.user_id = u1.parent_id)
             END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:44:36.710

您可以改用联合

```
SELECT u.circle_code, u.city,
      u.msisdn AS subs_msisdn,
      u.user_name || '' || u.last_name AS subs_name
      FROM mtx_party u
      WHERE msisdn LIKE :msisdn
      AND u.user_id = mti.party_id
      /*STATEMENT THAT EXCLUDES THIS RESULTS FROM THIS QUERY*/
      AND mti.category_code = 'SUBS'
union
SELECT u1.circle_code, u1.city,
          u1.msisdn AS ret_msisdn,
          u1.user_name || '' || u1.last_name AS ret_name,
          u2.user_name || '' || u2.last_name AS dist_name,
          u2.msisdn AS dist_msisdn, ' ' AS dist_acc_no,
          u1.agent_code
FROM users u1, users u2
WHERE msisdn LIKE :msisdn
AND u1.user_id = mti.party_id
AND u2.user_id = u1.parent_id
/*STATEMENT THAT EXLUDES RESULTS FROM THIS QUERY*/
AND mti.category_code <> 'SUBS' 
```

或者您可以执行以下操作

```
select mti.*, 
  CASE WHEN mti.category_code = 'SUBS'
  THEN sub1.circle_code
  ELSE sub2.circle_code
  END as circle_code,
  CASE WHEN mti.category_code = 'SUBS'
  THEN sub1.city
  ELSE sub2.city
  END as city,
  CASE WHEN mti.category_code = 'SUBS'
  THEN sub1.subs_msisdn
  ELSE sub2.ret_msisdn
  END as msisdn,  
  etc......
from table mti
left outer join (
SELECT u.user_id, u.circle_code, u.city,
      u.msisdn AS subs_msisdn,
      u.user_name || '' || u.last_name AS subs_name
      FROM mtx_party u
      WHERE msisdn LIKE :msisdn
      /*STATEMENT THAT EXCLUDES THIS RESULTS FROM THIS QUERY*/
      AND mti.category_code = 'SUBS'
) sub1 on  sub1.user_id = mti.party_id
left outer join (
SELECT u1.user_id, u1.circle_code, u1.city,
          u1.msisdn AS ret_msisdn,
          u1.user_name || '' || u1.last_name AS ret_name,
          u2.user_name || '' || u2.last_name AS dist_name,
          u2.msisdn AS dist_msisdn, ' ' AS dist_acc_no,
          u1.agent_code
FROM users u1, users u2
WHERE msisdn LIKE :msisdn
AND u2.user_id = u1.parent_id
/*STATEMENT THAT EXLUDES RESULTS FROM THIS QUERY*/
AND mti.category_code <> 'SUBS'
) sub2 on sub2.user_id = mti.party_id 
```

# jquery - 带有皇家滑块的彩盒。仅在关闭并打开彩盒后在特定幻灯片上打开

> ID：15290801
> 
> 赞同：1
> 
> 时间：2013-03-08T09:35:48.147
> 
> 标签：jquery, colorbox

我正在使用带有 Royal 滑块的 Colorbox。我遇到的问题是我想打开 Colorbox 并从缩略图列表中滑动到 Royal 滑块中的特定幻灯片。我让它工作......有点......问题是它只有在我首先打开Conolbox然后关闭它时才有效。第二次打开并滑动以正确滑动。

我的 jQuery 和 javascript 知识相当有限；）

打开颜色框的链接如下所示

```
<a href="produkter2.html#2"  class="colorboxSlider"> 
```

颜色框和皇家滑块代码看起来像这样

```
var win = $(window),
  w,
  cContent = $('#cboxLoadedContent'),
  currRs;
$('#produkter ul li').on('click', '.colorboxSlider', function(e) {
  e.preventDefault();
  $.colorbox({
      preloading: true,
      modal: false,
      transition: 'none',
      speed: 0,      
      onComplete: function(e) {
        currRs = $('#cboxLoadedContent').find('.royalSlider').royalSlider({
          imageScaleMode: 'fill',
          keyboardNavEnabled: true,

          deeplinking: {
        // deep linking options go gere
        enabled: true,
        change:true,
        prefix: ''
    },          
        }).data('royalSlider');

$("#s2 a").on("click", function(e){
    e.preventDefault();
currRs.goTo(2);
});

$("#s1 a").on("click", function(e){
e.preventDefault();
currRs.goTo(1);
});

updateLightboxSize();

      },
      href:$(this).attr('href'),
  });

  return false;
}); 
```

我知道这可能是因为第一次单击时“currRS”不存在。但我不知道如何将其放入 onComplete: 函数中。

# dart - 如何在 Dart 中尚不存在的目录结构中创建文件？

> ID：15290802
> 
> 赞同：22
> 
> 时间：2013-03-08T09:35:48.893
> 
> 标签：dart, dart-io

我想创建一个文件，比如说`foo/bar/baz/bleh.html`，但是没有目录`foo`，`foo/bar/`等等。

如何创建我的文件以递归方式创建所有目录？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-10-11T14:11:32.130

或者：

```
new File('path/to/file').create(recursive: true); 
```

或者：

```
new File('path/to/file').create(recursive: true)
.then((File file) {
  // Stuff to do after file has been created...
}); 
```

递归意味着如果文件或路径不存在，则将创建它。请参阅：[https ://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart-io.File#id_create](https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart-io.File#id_create)

编辑：这种方式不需要调用新目录！如果您愿意，也可以以同步方式执行此操作：

```
new File('path/to/file').createSync(recursive: true); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-08T09:35:48.893

简单代码：

```
import 'dart:io';

void createFileRecursively(String filename) {
  // Create a new directory, recursively creating non-existent directories.
  new Directory.fromPath(new Path(filename).directoryPath)
      .createSync(recursive: true);
  new File(filename).createSync();
}

createFileRecursively('foo/bar/baz/bleh.html'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-15T13:43:37.617

以下是在 Dart 中创建、读取、写入和删除文件的方法：

**创建文件：**

```
import 'dart:io';

main() {
 new File('path/to/sample.txt').create(recursive: true);
} 
```

**读取文件：**

```
import 'dart:io';

Future main() async {
 var myFile = File('path/to/sample.txt');
 var contents;
 contents = await myFile.readAsString();
 print(contents);
} 
```

**写入文件：**

```
import 'dart:io';

Future main() async {
 var myFile = File('path/to/sample.txt');
 var sink = myFile.openWrite(); // for appending at the end of file, pass parameter (mode: FileMode.append) to openWrite()
 sink.write('hello file!');
 await sink.flush();
 await sink.close();
} 
```

**删除文件：**

```
import 'dart:io';

main() {
 new File('path/to/sample.txt').delete(recursive: true);
} 
```

注意：上述所有代码从 Dart 2.7 开始都能正常工作

# azure - Azure 免费网站和免费带宽

> ID：15290803
> 
> 赞同：0
> 
> 时间：2013-03-08T09:35:49.867
> 
> 标签：azure

在 Azure 网站上，我找到了 Windows Azure 网站（免费实例）的以下详细信息

> 使用 Windows Azure 网站免费实例模型，您将免费获得以下内容：

*   AzureWebSites.net 域上每个子区域* 10 个免费网站
*   每个子区域每天 165 MB 出站数据，每个区域最多 5 GB**
*   每个子区域 1 GB 存储空间（由所有网站共享）
*   前 12 个月每个子区域 20 MB 的第三方 MySQL 数据库

> 每个 Windows Azure 产品/服务包括每个区域每月至少 5 GB 的出站数据传输，免费。用于网站以外的其他服务的数据传输将根据您的报价中包含的金额进行应用。

现在，由于此优惠中包含的 5GB 优惠将在 2013 年 6 月结束时到期，是否还有每天免费的 165MB？这对于估算我的项目成本很重要。

亲切的问候汤姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T11:30:58.810

这里的基本点是，Azure 中有几种优惠/订阅类型，如 BizSpark、MSDN、免费试用等。每种都有不同的`free out-bandwidth`. 例如，BizSpark 带有 40 GB 的免费输出带宽，而免费试用版可能有 5GB 的免费输出带宽。

5 GB 限制适用于**除以免费**模式运行的 Azure 网站（如 Azure 云服务、Azure 存储 Blob 等）之外的所有服务。Azure 网站免费模式将限制该特定网站每天 165 MB。在这里查看[当超过每日下载限制 165MB 时会发生什么](http://navcode.info/2012/11/06/azure-websites-free-mode-what-happens-when-exceeding-daily-download-limit-165mb)

简而言之，165 MB 限制和 5 GB 限制是不同的。另一方面，如果超出免费带宽限制，美国和欧盟数据中心每 GB 12 美分，亚洲数据中心每 GB 19 美分。

# java - ProcessBuilder 和 cmd

> ID：15290804
> 
> 赞同：1
> 
> 时间：2013-03-08T09:35:50.427
> 
> 标签：java, cmd, processbuilder

为什么

```
ProcessBuilder pb = new ProcessBuilder("cmd","/C","dir"); 
```

工作但

```
ProcessBuilder pb = new ProcessBuilder("cmd","dir"); 
```

才不是。
我的意思是在后一种情况下 cmd 启动但目录列表没有发生。为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T09:39:01.090

这是正常的行为`cmd.exe`- 在命令行上也会发生同样的情况：

```
C:\>cmd dir
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved. 
```

```
C:\>cmd /c dir
 Volume in drive C is System
 Volume Serial Number is ABCD-EF10
... 
```

通过第一次调用，您正在创建一个新的（交互式）命令解释器进程，`cmd.exe`. 在第二次调用中，您正在创建一个新的命令解释器进程并告诉它执行给定的命令然后退出：

```
/C      Carries out the command specified by string and then terminates 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T09:41:38.663

因为`cmd.exe`那样工作。在命令窗口中试试这个：

```
cmd dir 
```

和

```
cmd /C dir 
```

也看看`help cmd`解释。

# firefox-addon-sdk - 如何使用 Mozilla addon-sdk cfx 工具指定最低要求版本？

> ID：15290808
> 
> 赞同：4
> 
> 时间：2013-03-08T09:36:11.163
> 
> 标签：firefox-addon-sdk

构建一个传统的 Firefox 扩展，您将在 install.rdf 中设置 minVersion 字段。由于这是由 package.json 和 cfx 抽象出来的，有没有办法设置 minVersion？

动机：由于 contextMenu API 中行为的某些变化，我的插件只能在某些版本的 Addon-SDK 及更高版本中按预期工作。我想强制执行此约束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:07:15.680

来自附加 SDK 文档
[更改 minVersion 和 maxVersion 值](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/firefox-compatibility.html#Changing%20minVersion%20and%20maxVersion%20Values)

# java - 如何为多个条件使用视图，每个条件都意味着禁用/启用不同的组件？

> ID：15290809
> 
> 赞同：1
> 
> 时间：2013-03-08T09:36:11.570
> 
> 标签：java, swing, oop

当您创建视图（在本例中为 Swing 面板）时，您会添加多个组件，例如按钮、标签、文本字段等。

然后你就有了这个视图的控制器。该视图将被控制器用于不同的模型。每个模型都需要启用/禁用不同的组件（并非所有组件都应该始终处于活动状态）。到目前为止，我所做的是在名为 example 的视图中创建一个方法：`carMode()`它在视图中进行所需的配置，并根据某些条件在控制器中调用此方法。

控制器代码：

```
if (something == car) { view.carMode() } 
```

但是，有时您需要查看多个不同的状态，我想知道这种方法是否可以用更好的方法代替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:50:42.807

考虑使用一个`enum`元素实现一个通用接口来实现[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。您可以让每个元素直接实现接口，如 oulined [here](https://stackoverflow.com/a/15076852/230513)，或者让每个元素都有一个实现接口的实例变量，如此处[所示](https://sites.google.com/site/drjohnbmatthews/enumerated-functions)。要操作视图，具体的实现可以做以下任何事情：

*   通过启用和禁用组件来配置单个面板。

*   在 中选择特定面板`CardLayout`。

*   导航到`JTabbedPane`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:55:25.883

更好的方法是通用视图。创建一个 viewBase 类，其中包含可以在视图之间共享的东西。然后创建专门的视图。每种模式一个。控制器可以初始化特定视图。

```
if(sometin == car) { view = new CarView()} 
```

第二个优点是您在特定文件中拥有特定视图的内容。这更灵活，更简单

# wpf - 为什么在嵌套 XAML 中编写时绑定语法不同

> ID：15290810
> 
> 赞同：2
> 
> 时间：2013-03-08T09:36:11.810
> 
> 标签：wpf, xaml, mvvm, binding

为什么在嵌套 XAML 中编写时绑定语法会有所不同。例如 ：

```
 <extensibility:CommandBehavior 
       Command="{Binding SelectionChanged}"  
       CommandParameter="{Binding ElementName=modeItemsListBox,Path=SelectedItems}" > 
```

在上面的例子中，我有 `CommandParameter` 和`ElementName`没有`Path`任何引号。

但同样可以写成：

```
<extensibility:CommandBehavior
      Command="{Binding SelectionChanged}">
      <extensibility:CommandBehavior.CommandParameter>
            <Binding ElementName="modeItemsListBox"="SelectedItems" />
      </extensibility:CommandBehavior.CommandParameter>
</extensibility:CommandBehavior> 
```

Where`ElementName`和`Path`都在引号内。这只是不一致还是我缺少一些层次结构？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T10:04:39.327

您显示的两个代码片段都将`Binding`类实例化为 a`MarkupExtension`并允许它为`CommandParameter`您的`CommandBehaviour`.

第二种变体（你称之为“嵌套 XAML”的那个）可以称为实例化`Binding`类并为属性提供值的规范方式：类名是元素名，每个属性都是一个属性，它遵循 XML 的所有约定：必须引用所有属性值。

当然，如果您需要使用标记扩展设置大量属性，则这种规范语法有点繁重，因此引入了另一种简写语法：如果您需要设置`CommandParameter`使用标记扩展命名的属性的值`Binding`，您可以使用简单的`CommandParameter="{Binding ...}"`XML 语法来做到这一点。值中的花括号非常重要，它们告诉 XAML 解析器以不同的方式处理该属性值。您需要为新实例化的 Binding 类设置属性值，并且不能使用通常的 XAML 语法，`name="value"`因为您将其写入属性值*中*，因此会跳过引号。

希望这能解释一切。

# php - 数组0键的PHP json_encode问题

> ID：15290811
> 
> 赞同：11
> 
> 时间：2013-03-08T09:36:13.700
> 
> 标签：php, arrays, key, json

我在使用 json_encode 从数组生成 json 编码字符串时遇到问题。

有问题的数组部分如下所示

```
RatingDistribution (Array, 11 elements)
    0 (Array, 1 element)
        0 (String, 3 characters ) 4.5
    1 (Array, 1 element)
        1 (String, 4 characters ) 11.9
    2 (Array, 1 element) 
```

但是在字符串中产生这个：

```
"RatingDistribution":[["4.5"],{"1":"11.9"}, 
```

我希望这样：

```
"RatingDistribution":[{"0":"4.5"},{"1":"11.9"}, 
```

我正在做的就是这样：

```
$result = json_encode($array); 
```

我做错了什么还是需要更多代码来确保 0 键存在？

干杯安迪

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-08T09:39:50.247

你得到的结果应该是预期的；`json_encode`检测到您仅在数组中使用数字键，因此它将其转换为数组而不是 JSON 中的对象。大多数时候，这正是您想要做的。

如果由于某种原因您不这样做（为什么？），在 PHP >= 5.3 中，您可以使用该[`JSON_FORCE_OBJECT`](http://www.php.net/manual/en/json.constants.php)标志来获得所需的输出：

```
$result = json_encode($array, JSON_FORCE_OBJECT); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-02T13:53:39.433

如果您想在 json 中使用数组，那么[`JSON_FORCE_OBJECT`](http://php.net/manual/en/json.constants.php)您可以简单地将数组转换为对象，而不是参数。

问题：

```
json_encode([0 => [1,2,3]]); // Return: [[1,2,3]]
json_encode(["0" => [1,2,3]]); // Return: [[1,2,3]]
json_encode([1 => [1,2,3]]); // Return: {"1":[1,2,3]} 
```

不是我们所期望的：

```
json_encode([0 => [1,2,3]], JSON_FORCE_OBJECT); // Return: {"0":{"0":1,"1":2,"2":3}} 
```

解决方案：

```
json_encode((object)[0 => [1,2,3]]); // Return: {"0":[1,2,3]}
json_encode(new \ArrayObject([0 => [1,2,3]])); // Return: {"0":[1,2,3]} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-08T09:38:51.463

Cou 可以尝试将数组键转换为字符串，例如使用 strval 或 (string)。

# javascript - Jquery $.when 阻止代码执行和 UI 更新？

> ID：15290817
> 
> 赞同：1
> 
> 时间：2013-03-08T09:36:34.283
> 
> 标签：javascript, jquery

我们在单页应用程序中使用 JQuery。我们的 boostrapper 是应用程序的起点，如下所示：

```
define('homebootstrapper',
    ['jquery', 'config', 'homerouteconfig', 'presenter', 'dataprimer', 'binder'],
    function ($, config, homeRouteConfig, presenter, dataprimer, binder) {
        var
            run = function () {
                $('#busyIndicator').activity(true);

                $.when(dataprimer.fetch())                
                    .done(function () {
                       // $('#busyIndicator').activity(false);
                    });
            };

        return {
            run: run
        };
    }); 
```

被调用的 dataprimer 如下所示：

```
define('dataprimer',
    ['ko', 'datacontext', 'config'],
    function (ko, datacontext, config) {

        var logger = config.logger,

            fetch = function () {

                return $.Deferred(function (def) {

                    console.log('in deferred');   
                    $.when(LongTimeProcessing())
                    .pipe(function () {                        
                        logger.success('Fetched data');
                    })

                    .fail(function () { def.reject(); })

                    .done(function () { def.resolve(); });

                }).promise();
            };

        return {
            fetch: fetch
        };
    });

function LongTimeProcessing(options) {
    console.log('in when');
    return $.Deferred(function (def) {
        var results = options;
        for (var i = 0; i < 10; i++) {
            var x = i;
            $('#counter').html(x);
        }
        def.resolve(results);
    }).promise();
} 
```

该行`$('#busyIndicator').activity(true);` 应显示基于 SVG 或 VML 的进度动画。这很好用，除非使用 JQuery $.when

使用此示例代码，我们尝试创建一个需要一些时间并称为“LongTimeProcessing”的方法（而不是通常通过放大使用的对后端的 ajax 调用）

我们看到，当我们使用 jquery 时，busyindicator 不起作用（读取：不显示），直到 dataprimer 使用 def.resolve() 返回。这似乎阻止了所有 UI 更新。此外，LongTimeProcessing 方法中的计数器值仅显示此循环中的最后一个值。它被执行但它永远不可见。

我们做错了什么？我们应该如何处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:41:10.913

您**必须**屈服于事件处理循环以允许 UI 更新和处理未完成的事件。这只发生在您自己的代码完成执行时。

您的`LongTimeProcessing`函数不会这样做，它会启动一个循环，并且在该循环完成之前不会将控制权返回给浏览器。

`setTimeout`您可以通过使用来处理循环迭代来实现您想要的：

```
function LongTimeProcessing(options) {
    console.log('in when');
    return $.Deferred(function (def) {
        var results = options;

        var i = 0;

        (function iterate() {
            $('#counter').html(i);
            if (i < 10) {
                ++i;
                setTimeout(iterate, 250);
            } else {
                def.resolve(results);
            }
        })();

    }).promise();
} 
```

调用`setTimeout`允许函数在第一次调用后立即终止`iterate()`，允许浏览器的事件处理循环处理 UI 更新，然后在计时器结束时进入下一次迭代。

# javascript - 尝试加载图像时出错

> ID：15290824
> 
> 赞同：0
> 
> 时间：2013-03-08T09:37:04.597
> 
> 标签：javascript, html, canvas, kineticjs

你好 stackoverflow 社区

我是 KineticJS 的新手，在将图像加载到画布元素时遇到了一些问题。如果我运行我的小片段，我会收到此错误：

TypeError：值无法转换为以下任何一种：HTMLImageElement、HTMLCanvasElement、HTMLVideoElement。

但是我怎样才能把它转换成需要的类型呢？

它的完整代码：

```
<!DOCTYPE HTML>
<html>
 <head>
 </head>
 <body>
  <div id="container"></div>
  <script src="kinetic-v4.3.1.min.js"></script>
  <script>

  var dia_bg = new Image();
  var dia_bg.src = 'http://www.m133.wallerdeknaller.ch/script/dia_img/bg_diagramm.jpg';

  dia_bg.onload = function() {
   var stage = new Kinetic.Stage({
    container: 'container',
    width: 578,
    height: 200
   });

   var layer = new Kinetic.Layer();

   var test = new Kinetic.Rect({
    x: 220,
    y: 50,
    width: 200,
    height: 100,
    fillPatternImage: dia_bg.src,
   });

   layer.add(test);
   stage.add(layer);
  }
  </script>
 </body>
</html> 
```

感谢您立即提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:47:07.743

1.  您不需要使用`var`来设置对象的属性。摆脱`var`你设置的地方`dia_bg.src`。
2.  更改`fillPatternImage: dia_bg.src`为`fillPatternImage: dia_bg`

在这里它在小提琴中工作：http: [//jsfiddle.net/kcSWA/](http://jsfiddle.net/kcSWA/)

# asp.net - 如何获取放置在 GridView 中的列表框的选定项？没有在第一个事件上工作

> ID：15290825
> 
> 赞同：2
> 
> 时间：2013-03-08T09:37:09.670
> 
> 标签：asp.net, gridview, listbox

在单击按钮两次时获取选定的值。但是单击一次时不起作用

```
 <asp:GridView ID="viewgrid"  runat="server" AutoGenerateColumns="False" 
      OnRowCommand="viewgrid_RowCommand" OnRowDataBound="viewgrid_RowDataBound" 
      DataKeyNames="RegionID"  >
     <AlternatingRowStyle BackColor="#DCDCDC" />
        <Columns>
           <asp:TemplateField HeaderText="RegionName">
              <HeaderStyle BackColor="#4B6C9E" ForeColor="White" />
                  <ItemTemplate>
                     <table style="width: 200px">
                        <tr>
                           <td>
                              <asp:Label ID="lblregion" runat="server" 
                                 Text='<%# Eval("name") %>' ToolTip='<%# Eval("RegionID") %>'>
                               </asp:Label><br />
                             </td>
                         </tr>
                         <tr>
                             <td>
                                <asp:ListBox ID="listlocation" runat="server" Width="200px" 
                                    Height="38px" SelectionMode="Multiple" 
                                    AppendDataBoundItems="true"></asp:ListBox>
                              </td>
                           </tr>
                       </table>
                    </ItemTemplate>
                    <FooterTemplate>
                    </FooterTemplate>
                    <FooterStyle BackColor="#4B6C9E" ForeColor="White" Height="15px" />
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Action">
                       <HeaderStyle BackColor="#4B6C9E" ForeColor="White" />
                        <ItemTemplate>
                            <table style="margin-top: 5px">
                                <tr>
                                    <td>
                                        <asp:Button ID="btnright" runat="server" CommandName="moveright" Text=">" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <asp:Button ID="btnallright" runat="server" CommandName="moveallright" Text=">>" />
                                    </td>
                                </tr>
                            </table>
                        </ItemTemplate>
                        <FooterTemplate>
                        </FooterTemplate>
                        <FooterStyle BackColor="#4B6C9E" ForeColor="White" />
                    </asp:TemplateField>
                </Columns>

            </asp:GridView>

  protected void viewgrid_RowCommand(object sender, GridViewCommandEventArgs e)
  {
    GridView grd = (GridView)sender;
    if (e.CommandName == "moveright")
    {

        //string newRegionID = string.Empty;
        GridViewRow gridrow = (GridViewRow)((Button)e.CommandSource).NamingContainer;
        int index = gridrow.RowIndex;

        //ListBox region = (ListBox)(gridrow.FindControl("listlocation"));

        ListBox region = (ListBox)(viewgrid.Rows[index].FindControl("listlocation"));
        List<ListItem> selectedregions = new List<ListItem>();
        List<object> toRemove = new List<object>();

        foreach (ListItem li in region.Items)
        {
            if (li.Selected)
            {
                selectedregions.Add(li);
                listlocation2.Items.Add(li);
            }
        }
        foreach (ListItem lll in selectedregions)
        {
            region.Items.Remove(lll);
        }

    }

    if (e.CommandName == "moveallright")
    {
        lblmessage.Visible = false;

        GridViewRow gridrow = (GridViewRow)((Button)e.CommandSource).NamingContainer;
        int index = gridrow.RowIndex;
        ListBox locationlist1 = (ListBox)(viewgrid.Rows[index].FindControl("listlocation"));

        while (locationlist1.Items.Count != 0)
        {
            for (int i = 0; i < locationlist1.Items.Count; i++)
            {

                listlocation2.Items.Add(locationlist1.Items[i]);

                locationlist1.Items.Remove(locationlist1.Items[i]);
            }
        }
    }

} 
```

# android - 如何在android中用不同的视图填充整个屏幕

> ID：15290829
> 
> 赞同：0
> 
> 时间：2013-03-08T09:37:24.703
> 
> 标签：android, textview, imagebutton

我有一个简单的问题，但这让我的发展很糟糕。

在不同的活动中，我有不同的看法。例如文本视图、按钮视图、编辑视图。我想要的是，所有视图都应该在屏幕上动态适应（无论我有一个视图还是 5 个视图），但它没有发生。有时视图会出现在屏幕之外，有时会在屏幕上留下空白。

波纹管是我试过的，我不想提供 android:layout_height="75dp"。

请F1

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <Spinner
                android:id="@+id/spinner1"
                android:layout_width="fill_parent"
                android:layout_height="75dp"
                android:background="@drawable/btnmusic"
                android:scaleType="fitCenter" />
        </LinearLayout>

            <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <ImageButton
                android:id="@+id/btnplay"
                android:layout_width="wrap_content"
                android:layout_height="75dp"
                android:layout_weight="1"
                android:onClick="onClick"
                android:scaleType="fitXY"
                android:src="@drawable/btnselectedsong" />

            <ImageButton
                android:id="@+id/btnpause"
                android:layout_width="wrap_content"
                android:layout_height="75dp"
                android:layout_weight="1"
                android:src="@drawable/btnplay"
                android:onClick="onClick"
                android:scaleType="fitXY" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <ImageButton
                android:id="@+id/btnplay"
                android:layout_width="wrap_content"
                android:layout_height="75dp"
                android:layout_weight="1"
                android:background="@drawable/btnpause"
                android:onClick="onClick"
                android:scaleType="centerInside" />

            <ImageButton
                android:id="@+id/btnpause"
                android:layout_width="wrap_content"
                android:layout_height="75dp"
                android:layout_weight="1"
                android:background="@drawable/btnstop"
                android:onClick="onClick"
                android:scaleType="fitCenter" />
        </LinearLayout>

            <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:51:58.007

当您使用 LinearLayout 时，您可以使用 layout_weight 来调整整个空间。

如果您想给除相等间距之外的特定空间，您可以定义一个**android:weightSum="100"** 并可以根据您的要求将其分配给子布局

我只是尝试了一些演示并更改了您的布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:android:weightSum="100" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="10" >

            <Spinner
                android:id="@+id/spinner1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/btnmusic"
                android:scaleType="fitCenter" />

        </LinearLayout>

       <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="10" >

           <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
          </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:orientation="horizontal"
            android:layout_weight="40" >

            <ImageButton
                android:id="@+id/btnplay"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:onClick="onClick"
                android:scaleType="fitXY"
                android:src="@drawable/btnselectedsong" />

            <ImageButton
                android:id="@+id/btnpause"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:src="@drawable/btnplay"
                android:onClick="onClick"
                android:scaleType="fitXY" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:orientation="horizontal"
            android:layout_weight="30" >

            <ImageButton
                android:id="@+id/btnplay"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/btnpause"
                android:onClick="onClick"
                android:scaleType="centerInside" />

            <ImageButton
                android:id="@+id/btnpause"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/btnstop"
                android:onClick="onClick"
                android:scaleType="fitCenter" />
        </LinearLayout>
 <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dp"
             android:layout_weight="10" >
            <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
       </LinearLayout>
    </LinearLayout> 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:42:59.927

如果您使用相对布局，您可以定义关于屏幕边缘以及水平和垂直中心的功能，从而允许动态放置按钮。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Spinner
            android:id="@+id/spinner1"
            android:layout_width="fill_parent"
            android:layout_centerHorizontal="true"
            android:background="@drawable/btnmusic"
            android:scaleType="fitCenter" />
    </RelativeLayout>
    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/spinner1"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />
....
....
....
</RelativeLayout> 
```

类似的东西应该给你一个动态的布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:41:51.570

设置`layout_weight=1`为您希望平等共享可用空间的所有视图。

对于您的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="odp"
            android:layout_weight="1" >

            <Spinner
                android:id="@+id/spinner1"
                android:layout_width="fill_parent"
                android:layout_height="75dp"
                android:background="@drawable/btnmusic"
                android:scaleType="fitCenter" />
        </LinearLayout>

            <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="odp"
            android:layout_weight="1"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="odp"
            android:layout_weight="1"
            android:orientation="horizontal" >

            <ImageButton
                android:id="@+id/btnplay"
                android:layout_width="wrap_content"
                android:layout_height="75dp"
                android:layout_weight="1"
                android:onClick="onClick"
                android:scaleType="fitXY"
                android:src="@drawable/btnselectedsong" />

            <ImageButton
                android:id="@+id/btnpause"
                android:layout_width="wrap_content"
                android:layout_height="75dp"
                android:layout_weight="1"
                android:src="@drawable/btnplay"
                android:onClick="onClick"
                android:scaleType="fitXY" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <ImageButton
                android:id="@+id/btnplay"
                android:layout_width="wrap_content"
                android:layout_height="75dp"
                android:layout_weight="1"
                android:background="@drawable/btnpause"
                android:onClick="onClick"
                android:scaleType="centerInside" />

            <ImageButton
                android:id="@+id/btnpause"
                android:layout_width="wrap_content"
                android:layout_height="75dp"
                android:layout_weight="1"
                android:background="@drawable/btnstop"
                android:onClick="onClick"
                android:scaleType="fitCenter" />
        </LinearLayout>

            <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="odp"
            android:layout_weight="1"            
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T10:11:06.930

> 1.  有一个`LinearLayout`作为父母
> 2.  设置其`layout_height="fill_parent"`和`orientation="horizontal"`
> 3.  将`views`您拥有的添加到此父级
> 4.  最后到每个视图集`layout_weight="1"`

最后一行的意思是，无论您有多少视图，它们都必须具有相同的高度，而第一行的意思是，所有视图都必须占据整个屏幕。

# css - 在表格中显示垂直 HTML5 范围

> ID：15290830
> 
> 赞同：0
> 
> 时间：2013-03-08T09:37:25.193
> 
> 标签：css, html

我正在尝试使 HTML5 范围在表格中垂直显示，但我不知道该怎么做。事实上，当范围在表格之外时，没有问题，但是当它在里面时，不可能使它垂直！恼人的...

```
<table>
<tr>
<div class="slide"><th><input type="range" min="0" max="100" id="slider1"></th></div>
</tr>
</table> 
```

和CSS：

```
slide {
    -webkit-appearance: slider-vertical;
    -moz-transfrom: rotate(270deg);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:43:31.577

您的代码有四个问题：

1.  您的标记无效。您不能将`div`元素作为元素的直接子`tr`元素。
2.  你的 CSS 类选择器是错误的。您`.`在开头缺少 a 。
3.  您应该将样式应用于范围元素，而不是包装 div。
4.  该`th`元素应仅用于 table-head`thead`元素中的列。从您的示例代码来看，情况并非如此，那么您应该改用该`td`元素。

**标记：**

```
<table>
<tr>
<td><input class="slide" type="range" min="0" max="100" id="slider1"></td>
</tr>
</table> 
```

**CSS：**

```
.slide {
    -webkit-appearance: slider-vertical;
    -moz-transfrom: rotate(270deg);
} 
```

[**演示**](http://jsfiddle.net/WU2vA/1/)

# sql - 计算状态变化

> ID：15290839
> 
> 赞同：3
> 
> 时间：2013-03-08T09:38:01.230
> 
> 标签：sql, sql-server

我想知道是否可以计算记录中值之间的更改次数

例如我有以下数据

```
| radio | name | state | timestamp           |
|-------|------|-------|---------------------|
| 1     | AP1  | down  | 2013-03-07 10:00:00 |
| 1     | AP1  | down  | 2013-03-07 10:15:00 |
| 1     | AP1  | up    | 2013-03-07 10:30:00 |
| 1     | AP1  | down  | 2013-03-07 10:45:00 |
| 1     | AP1  | pend  | 2013-03-07 11:00:00 |
| 1     | AP1  | pend  | 2013-03-07 11:15:00 |
| 1     | AP1  | pend  | 2013-03-07 11:30:00 |
| 1     | AP1  | pend  | 2013-03-07 11:45:00 | 
```

我需要进行一个执行以下技巧的查询

```
| name | S1     | S2     | S3       | S4         | (other time range) |
| AP1  | A      | A      | B        | A          | C                  |
                     \      /    \      /    \      /
                      DETECT      DETECT      DETECT    
                            \        \       / 
                             \------- \     /
                                       COUNT = 3 <-- this is the number i want 
```

到目前为止，我被困在基于计数的 SQL 中。

```
SELECT radio, name, state, COUNT(state) AS count FROM data
WHERE timestamp BETWEEN '2013-03-07 10:00:00' AND '2013-03-07 11:00:00'
GROUP BY radio, name, channel 
```

结果将是

```
| radio | name | state | count |
|-------|------|-------|-------|
| 1     | AP1  | down  | 3     |
| 1     | AP1  | up    | 1     |
| 1     | AP1  | pend  | 1     | 
```

所以现在的结果将是 3 行，也就是 3 状态变化，但后来我意识到这不是真的，因为这个数字只会告诉我不同​​状态名称的数量，在这种情况下是 3。

所以我的问题是这在 SQL 中是可能的，还是我需要将结果集拉入循环并通过外部脚本或视图检测更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:08:06.210

你可以使用类似的东西：

```
with Changes as
(
  select name
    , stateChange = case when prev.state is null then 0
      when sc.state <> prev.state then 1
      else 0
      end
  from data sc
    outer apply
    (
      select top 1 prev.state
      from data prev
      where sc.timestamp > prev.timestamp
        and sc.name = prev.name
      order by prev.timestamp desc
    ) prev
)
select name, stateChanges = sum(stateChange)
from Changes
group by name 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/32b5b/1)。

另外，在您的问题中，您的数据有点不一致；有时您会提到*AP1*，有时会提到*AP2*。如果上述查询/小提琴还不够，请提供更大的数据集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:35:45.153

您可以使用 LAG() ：

```
SELECT sq.RADIO,
  sq.NAME,
  COUNT(CASE WHEN sq.STATE != sq.PREV_STATE THEN 1 ELSE NULL END) CHG_COUNT
FROM
  (SELECT 
    td.RADIO,
    td.NAME,
    td.STATE,
    COALESCE(LAG(td.STATE,1) OVER(PARTITION BY td.RADIO, td.NAME ORDER BY td.TIMESTAMP ASC),td.STATE) PREV_STATE
  FROM DATA td) sq
GROUP BY sq.RADIO, 
  sq.NAME 
```

# sql - 为什么带有 nvarchar(max) 的变量工作不正确

> ID：15290840
> 
> 赞同：0
> 
> 时间：2013-03-08T09:38:04.093
> 
> 标签：sql

目前，我有一个函数来获取具有详细属性的 1 个表的列列表。当然，有些表格有很多列。因此，输出将超过 10.000 个字符。

在这里我这样测试：

```
declare @aa nvarchar(max) 
set @aa = dbo.fnGetColumnList('Table_Name')
print @aa 
```

结果总是有大约 4000 个字符。看起来 SQL 已经截断了它。

据我所知，当我们声明 nvarchar(max) 时，SQL 最多支持 2^32-1 (2GB) 这个字符串。但为什么它只有大约 4000 个字符？

当我这样执行时：

```
select dbo.fnGetColumnList('Table_Name') 
```

结果是正确的。

这是函数的代码：

```
-- get column list from table Mapping
ALTER FUNCTION [dbo].[fnGetColumnList] ( @tblName varchar (30))
RETURNS nvarchar(max)
AS
BEGIN

Declare @sql    nvarchar(max)

set @sql = ''
SELECT @sql = @sql + case 
when CHARINDEX('char', LOWER([DBType])) > 0 then ', ['+[DBColumn]+']' + ' ['+[DBType]+']' + ' ('+convert(varchar(10),[Length])+')  NULL' + CHAR(13)
when CHARINDEX('char', LOWER([DBType])) > 0 then ', ['+[DBColumn]+']' + ' ['+[DBType]+']' + ' NULL' + CHAR(13)
ELSE ', ['+[DBColumn]+']' + ' ['+[DBType]+']' + ' NULL' + CHAR(13)
end FROM dbo.Mapping WHERE [DBTable] = @tblName

return @sql
END 
```

请提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:53:33.690

这几乎总是一个变量赋值类型问题，如下所述：

[对于 Nvarchar(Max)，我在 TSQL 中只得到 4000 个字符？](https://stackoverflow.com/questions/1371383/for-nvarcharmax-i-am-only-getting-4000-characters-in-tsql?rq=1)

如果不是这样，那么可能只是打印的设置显示的字符太少：

[nvarchar(max) 仍然被截断](https://stackoverflow.com/questions/4833549/nvarcharmax-still-being-truncated)

查看更新的代码后，似乎是第二个问题，您的打印被截断，因为它没有设置为显示足够的字符。

您应该通过运行看到这一点

```
SELECT LEN(@aa) 
```

您将得到一个大于 4000 的数字，表明该值已正确保存在变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:50:52.300

SQL Management Studio 中有一个选项：工具 > 选项... > 查询结果 > SQL Server > 结果到文本 > 每列中显示的最大字符数

# nlp - 如何使用 GATE 嵌入外部插件，如“BWP Gazetteer”

> ID：15290847
> 
> 赞同：0
> 
> 时间：2013-03-08T09:38:34.740
> 
> 标签：nlp, gate

我想使用`BWP Gazetteer`而不是 GATE 的默认地名词典。为此，我将它作为资源添加到工作区中，`creole.xml`并将其 JAR 包括在工作区中。

克里奥尔语.xml

```
 <RESOURCE>
<NAME>BWPGazetteer</NAME>
<JAR>BWPGazetteer.jar</JAR>
<CLASS>bwp.gate.gazetteer.BWPGazetteer</CLASS>
<COMMENT>A BWPGazetteer.</COMMENT>
  <PARAMETER NAME="document" RUNTIME="true"
    COMMENT="The document to be processed"> gate.Document</PARAMETER>
  <PARAMETER NAME="annotationSetName" RUNTIME="true"
    COMMENT="The annotation set to be used for the generated annotations"
    OPTIONAL="true">java.lang.String</PARAMETER>
  <PARAMETER NAME="listsURL"
    DEFAULT="resources/gazetteer/lists.def"
    COMMENT="The URL to the file with list of lists" SUFFIXES="def">
    java.net.URL</PARAMETER>
  <PARAMETER DEFAULT="UTF-8"
    COMMENT="The encoding used for reading the definitions" NAME="encoding">
    java.lang.String</PARAMETER>
  <PARAMETER DEFAULT="true"
    COMMENT="Should this gazetteer diferentiate on case"
    NAME="caseSensitive">java.lang.Boolean</PARAMETER>
  <PARAMETER DEFAULT="true"
    COMMENT="Should this gazetteer only match whole words"
    NAME="wholeWordsOnly">java.lang.Boolean</PARAMETER>
    <PARAMETER NAME="normalizedDistanceThreshold"
            COMMENT="Maximum normalized distance(0.0-1.0) for a match"
            DEFAULT="0.1">
            java.lang.Double
        </PARAMETER>
<PARAMETER DEFAULT="true"
    COMMENT="Should this gazetter avoid overlapping annotations"
    NAME= "avoidOverlapingAnnotations">
    java.lang.Boolean
</PARAMETER> 
```

谁能告诉我需要在我的 JAVA 代码或配置文件中进行哪些进一步更改才能使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:24:37.890

您不需要修改任何 creole.xml 文件，您只需下载并解压 BWPGazetteer 发行版，将`BWPGazetteer`目录加载为 CREOLE 插件，创建地名词典的实例并将其插入管道中适当的位置。到目前为止，最简单的方法是使用 GATE Developer 构建您的管道（包括在正确位置的相关地名词典实例），然后右键单击并“为 GATECloud.net 导出”。这将生成一个 zip 文件，其中包含已保存的应用程序状态 (application.xgapp) 以及应用程序使用的所有插件和资源文件。

在项目中的某个位置解压缩此 zip 文件，然后您可以简单地使用`PersistenceManager.loadObjectFromFile`（或`loadObjectFromUrl`）加载保存的应用程序及其所需的所有插件。

# spring - 如何在调度程序 servlet 中使用 web.xml 中定义的上下文参数？

> ID：15290849
> 
> 赞同：2
> 
> 时间：2013-03-08T09:38:40.130
> 
> 标签：spring, servlets, properties

我有一个非常小的问题，即使在谷歌搜索了很长一段时间后我也找不到答案。

**我们如何在 dispatcher servlet 中使用 web.xml 中定义的 context-param？**

在我的 web.xml 中，我这样定义它：

```
<context-param>
    <param-name>root.path</param-name>
    <param-value>/root</param-value>
</context-param> 
```

我可以使用以下代码行在我的 Java 类中访问它：

`String rootPath = sce.getServletContext().getInitParameter("root.path");`

但是，我看不到在调度程序 servlet 中使用此值的方法。在以下情况下，我想为 /root 使用变量而不是值本身。

```
<bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="file:/root/main.properties" /> 
```

非常感谢任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:57:40.350

尝试使用

```
<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
    p:location="file:/#{contextParameters.root.path}/main.properties" /> 
```

如果我们将名称命名为“root.path”，而不是将名称命名为“root_path”，这将产生问题

# python - 在字符串 Django 中拆分所有需要的值

> ID：15290856
> 
> 赞同：0
> 
> 时间：2013-03-08T09:39:01.440
> 
> 标签：python, django, string, split

你好。我有一个函数，`views`其中有一个变量，我在模板中使用它。

```
 imagesj[str(i)]=str(j[0]) 
```

我从中得到与此类似的值

```
{'Adele-1-Fuchsia-9': 'product/adele_1_fuchsia_1.jpg',
 'Jealyn-37-Brown-10': 'product/jealyn_37_brown_1.jpg'} 
```

我只需要获取哪些是动态值`product/adele_1_fuchsia_1.jpg`，`product/jealyn_37_brown_1.jpg`它们将根据产品进行更改。我需要在字符串产品之前更换前部。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:09:30.797

我不知道您的原始数据结构是什么样的，但是如果您有如下字典：

```
dic = {'Adele-1-Fuchsia-9': 'product/adele_1_fuchsia_1.jpg', 'Jealyn-37-Brown-10': 'product/jealyn_37_brown_1.jpg'} 
```

您可以通过迭代值来获取产品元素：

```
print [x for x in dic.values() if 'product' in x] 
```

这打印：

```
['product/adele_1_fuchsia_1.jpg', 'product/jealyn_37_brown_1.jpg'] 
```

# java - Apache lucene 搜索代码打印 null

> ID：15290858
> 
> 赞同：0
> 
> 时间：2013-03-08T09:39:04.787
> 
> 标签：java, jakarta-ee, lucene

```
 Directory directory = FSDirectory.open(indexDir);
        IndexReader reader = DirectoryReader.open(directory);
        IndexSearcher searcher = new IndexSearcher(reader);
        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_41);

        QueryParser parser = new QueryParser(Version.LUCENE_41, "contents", analyzer);
        Query query = parser.parse(queryStr);
        System.out.println("Searching for: " + query.toString("contents"));
        TopDocs results = searcher.search(query, maxHits);

        ScoreDoc[] hits = results.scoreDocs;
        int numTotalHits = results.totalHits;

        System.out.println("\n\n\n-----------------------Results--------------------------\n\n\n");
       System.out.println(numTotalHits + " total matching documents");

        for (int i = 0; i < hits.length; i++) {
            int docId = hits[i].doc;
            Document d = searcher.doc(docId);
            System.out.println(i+":File name is"+d.get("filename"));
        }

        System.out.println("Found " + hits.length); 
```

我在搜索模块中使用了上面的代码。现在代码工作正常，但我得到的输出为

```
390:File name is/home/maclean/Installations/apache-tomcat-7.0.21/logs/localhost_access_log.2012-12-31.txt
391:File name isnull
392:File name isnull
393:File name isnull
394:File name isnull
395:File name isnull
396:File name isnull
397:File name isnull
398:File name isnull
399:File name isnull
400:File name is/home/maclean/Installations/apache-tomcat-7.0.21/logs/localhost_access_log.2013-01-09.txt
401:File name isnull
402:File name isnull
403:File name isnull
404:File name isnull
405:File name isnull
406:File name isnull
407:File name isnull
408:File name isnull
409:File name isnull
410:File name is/home/maclean/Installations/apache-tomcat-7.0.21/logs/localhost_access_log.2013-01-10.txt 
```

在这里，我只打印具有查询字符串的文件名，但我得到了太多结果，并且大多数结果的文件名为 null 为什么会发生这种情况？

对于索引，我正在使用此代码

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStreamReader;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.LongField;
import org.apache.lucene.document.StringField;
import org.apache.lucene.document.TextField;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.index.IndexWriterConfig.OpenMode;
import org.apache.lucene.index.Term;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.util.Version;

public class SimpleFileIndexer {

    public static void main() throws Exception {

        File dataDir = new File("/home/maclean/Installations/apache-tomcat-7.0.21/logs");
        File indexDir = new File("/home/maclean/NetBeansProjects/LogSearchEngine/Result");

        SimpleFileIndexer indexer = new SimpleFileIndexer();

        int numIndex = indexer.index(indexDir, dataDir);

        System.out.println("Total files indexed " + numIndex);

    }

    private int index(File indexDir, File dataDir) throws Exception {
    // API and code to convert text into indexable/searchable tokens.
    Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_41);
    //To store an index on disk
    Directory directory = FSDirectory.open(indexDir);
    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_41, analyzer);
        int numIndexed;
        try (IndexWriter indexWriter = new IndexWriter(directory, config)) {
            indexDirectory(indexWriter, dataDir);
            numIndexed = indexWriter.maxDoc();
            indexWriter.close();

        }

        return numIndexed;

    }

    private void indexDirectory(IndexWriter indexWriter, File dataDir) throws IOException {

        File[] files = dataDir.listFiles();
        for (int i = 0; i < files.length; i++) {
            File f = files[i];
            if (f.isDirectory()) {
                indexDirectory(indexWriter, f);
            }
            else {
                indexFileWithIndexWriter(indexWriter, f);
            }
        }

    }

    private void indexFileWithIndexWriter(IndexWriter indexWriter, File file) throws IOException {

        FileInputStream fis = null;
        if (file.isHidden() || file.isDirectory() || !file.canRead() || !file.exists()) {
            return;
        }

        System.out.println("Indexing file " + file.getCanonicalPath());

        try {
          fis = new FileInputStream(file);
        } catch (FileNotFoundException fnfe) {
          System.out.println("File Not Found"+fnfe);

       }

        Document doc = new Document();
        doc.add(new LongField("modified", file.lastModified(), Field.Store.NO));
        doc.add(new TextField("contents", new BufferedReader(new InputStreamReader(fis, "UTF-8"))));

        if (indexWriter.getConfig().getOpenMode() == OpenMode.CREATE) {
          // New index, so we just add the document (no old document can be there):
           System.out.println("adding " + file);
          indexWriter.addDocument(doc);
       } else {
          // Existing index (an old copy of this document may have been indexed) so 
       // we use updateDocument instead to replace the old one matching the exact 
           // path, if present:
            System.out.println("updating " + file);
            indexWriter.updateDocument(new Term("path", file.getPath()), doc);
          }

         fis.close();

    }

}* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:07:40.467

hits 数组比 numTotalHits 长，所以你的 for 循环限制应该是 numTotalHits 而不是 hits.length。

# algorithm - 计算最长公共子序列复杂度的数学递推关系

> ID：15290865
> 
> 赞同：0
> 
> 时间：2013-03-08T09:39:26.567
> 
> 标签：algorithm, recurrence

我想以数学方式计算 LCS 算法问题的递归关系。我的目的是应用大师定理来计算复杂度 O(2^n)。

```
/* Returns length of LCS for X[0..m-1], Y[0..n-1] */
int lcs( char *X, char *Y, int m, int n )
{
   if (m == 0 || n == 0)
     return 0;
   if(X[m-1] == Y[n-1])
     return 1 + lcs(X, Y, m-1, n-1);
   else
     return max(lcs(X, Y, m, n-1), lcs(X, Y, m-1, n));
} 
```

任何人都可以解释如何推动这种重复关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:07:58.410

递归关系为：

```
T(n,m) = T(n-1,m-1)+O(1), if (X[m-1] = Y[n-1])
         or
         T(n-1,m)+T(n,m-1)+O(1), otherwise 
```

我们必须考虑最坏的情况，即：

```
 T(n,m) = T(n-1,m)+T(n,m-1)+O(1) 
```

自始至终。这将归结为：

```
T(n,m) <= 2^(n-1) T(0,m) + ... , if m<n (longest branch of height n)
         or
         2^(m-1) T(n,0) + ... , if n<m (longest branch of height m) 
```

在这里，如果最长分支的长度为 k，如果假设所有其他分支的高度也为 k，我们将得到一个上限。因为 T(0,k) 和 T(k,0) 都是常数，所以我们有

```
T(n,m) = O(2^(max(n,m))) 
```

或者

```
T(n,m) = O(2^n) 
```

如果 n 和 m 相等。

# css - CSS 中间 div 高度

> ID：15290867
> 
> 赞同：2
> 
> 时间：2013-03-08T09:39:30.087
> 
> 标签：css, html

我有以下 css [http://jsbin.com/azivip/75/edit](http://jsbin.com/azivip/75/edit)我想要黄色 div 高度来填充蓝色和绿色 div 之间的空间。使用高度继承似乎使 div 超出了绿色 div。

请问有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T09:56:17.253

您可以使用 css3 `calc()`：

```
#testsContainer { 
   height: calc(100% - 140px);
} 
```

在哪里`140px = 100px of resultsContainer + 40px of buttonsContainer`

[小提琴](http://jsbin.com/azivip/79/edit)

**编辑**

旧版本的 Firefox 使用`-moz-calc()`前缀，旧版本的 Chrome/Safari 使用`-webkit-calc()`前缀。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T11:18:32.113

**[工作小提琴](http://jsbin.com/azivip/93/edit)**

只需在代码中更改以下 css：

```
 #testsContainer {
     position:absolute; /* replace with position: relative */
     top:100px;  /* height of the above container */
     bottom:40px; /* height of the below container */
     left:0px;
     right:0px;
     margin-top:0px;
     margin-bottom:0px;
     background-color:yellow; 
 } 
```

*   给出`top`等于高度的值`div#resultsContainer`和`bottom`等于高度的值`div#buttonsContainer`。

*   给`left: 0`和`right:0`。这样容器就可以在不使用 javascript 或 calc() css 属性的支持的情况下占用空间。

*   消除`height:inherit`

*   替换`position: relative`为`position: absolute`

# github - 如何将文件上传到仓库？

> ID：15290870
> 
> 赞同：1
> 
> 时间：2013-03-08T09:39:40.010
> 
> 标签：github

我有一个免费版本的 github 帐户，我在其中创建了一个 repo，我需要在这个 repo 中添加一个 670KB 的文本文件（它有测试数据）。我使用 IE 浏览器和 Windows XP 操作系统，并且没有在本地系统中下载或安装任何 gihub 软件或应用程序。

如何在不创建文件然后复制内容的情况下直接将文件上传到 repo 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:47:13.833

Github 应该与版本控制系统 git 一起使用。您需要使用 git 才能在 github 存储库中下载/上传/更新文件。

您还可以通过单击仓库名称右侧的小按钮直接在 Github 中创建文件：

![在guthub中创建文件](../Images/7f4d87eb3e4ac66fe947b1b63e77db4b.png)

然后你可以通过点击它在 Github 中修改它。

# javascript - 请求根据来自 javascript 的标准下载文件

> ID：15290871
> 
> 赞同：0
> 
> 时间：2013-03-08T09:39:40.163
> 
> 标签：javascript, ajax, download

我有一个 Web 应用程序（php/symfony2 - 但在这里没关系），AJAX 使用量很大，客户端层中有很多 javascript。该界面使用户能够过滤他想要显示的数据（句点、复选框、选择等），并根据这些选择，将 POST 请求发送到服务器端以获取数据，并通过 AJAX 返回 JSON。

现在，我想添加一个功能来根据驻留在 javascript 层中的标准/过滤器下载数据文件 - 我不知道该怎么做。

假设我有一个`<a href="some_action_url">`标签——如果我点击它——它会下载文件。我知道如何做所有服务器端的事情。但我不知道如何使用`<a>`标签将标准参数从 javascript 传递到服务器端控制器 a。

# scala - 如何在 SBT 中解决我自己的测试工件？

> ID：15290881
> 
> 赞同：11
> 
> 时间：2013-03-08T09:40:17.810
> 
> 标签：scala, sbt

我的一个项目将提供一个 jar 包，用于在其他几个项目中进行单元测试。到目前为止，我设法让 sbt 生成 a`objects-commons_2.10-0.1-SNAPSHOT-test.jar`并将其发布在我的存储库中。

但是，我找不到一种方法来告诉 sbt 在其他项目中将该工件与测试范围一起使用。

在我的 build.scala 中添加以下依赖项不会加载测试工件。

```
"com.company" %% "objects-commons" % "0.1-SNAPSHOT",
"com.company" %% "objects-commons" % "0.1-SNAPSHOT-test" % "test", 
```

我需要的是使用默认的 .jar 文件作为编译和运行时依赖项，并在我的测试范围内使用 -test.jar 作为依赖项。但不知何故，sbt 从不尝试解析测试 jar。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-05T13:58:20.060

**如何使用测试工件**

要在发布主工件时启用发布测试工件，您需要添加到库的 build.sbt 中：

```
publishArtifact in (Test, packageBin) := true 
```

发布您的工件。至少应该有两个 JAR：objects-commons_2.10.jar 和 objects-commons_2.10-test.jar。

要在运行时使用库并在测试范围内使用测试库，请将以下行添加到主应用程序的 build.sbt 中：

```
libraryDependencies ++= Seq("com.company" % "objects-commons_2.10" % "0.1-SNAPSHOT"
    , "com.company" % "objects-commons_2.10" % "0.1-SNAPSHOT" % "test" classifier "tests" //for SBT 12: classifier test (not tests with s)
) 
```

第一个条目加载运行时库，第二个条目强制“测试”工件仅在测试范围内可用。

我创建了一个示例项目：

```
git clone git@github.com:schleichardt/stackoverflow-answers.git --branch so15290881-how-do-i-resolve-my-own-test-artifacts-in-sbt 
```

或者您可以直接在 github中查看[示例。](https://github.com/schleichardt/stackoverflow-answers/tree/so15290881-how-do-i-resolve-my-own-test-artifacts-in-sbt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:31:37.500

您的问题是 sbt 认为您的两个 jar 是相同的工件，但版本不同。它采用“最新”，即 0.1-SNAPSHOT，并忽略 0.1-SNAPSHOT-test。这与您看到的行为相同，例如您有 0.1-SNAPSHOT 和 0.2-SNAPSHOT。

我不知道这两个罐子里有什么，但如果你希望它们都在类路径上，这就是你想要做的，那么你需要将测试工件的名称更改为对象-正如 Kazuhiro 建议的那样，commons-test。看来这对您来说应该很容易，因为您已经自己将其放入存储库中。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-08T10:55:01.100

如果您像这样更改它会正常工作`name`。

```
"com.company" %% "objects-commons" % "0.1-SNAPSHOT",
"com.company" %% "objects-commons-test" % "0.1-SNAPSHOT" % "test", 
```

# easymock - 模拟返回 void 的方法

> ID：15290882
> 
> 赞同：1
> 
> 时间：2013-03-08T09:40:24.597
> 
> 标签：easymock, powermock

我对编写模拟类相当陌生。我正在尝试为以下方法编写一个测试类，但我无法继续模拟方法调用“getSsnValue”。

```
public void setFieldValue(String fieldValue) {
    final Field<String> SSN = getSsnField(fieldValue);

    if (SSN !=null) {       
        getSsnValue(SSN ,fieldValue);
    }
} 
```

下面是为模拟方法“getSsnField”而编写的测试并且工作正常。任何人都可以帮助理解如何模拟 void 方法“getSsnValue”，以便在调用“controller.setFieldValue(name); "

**代码片段：**

```
controller = EasyMock.createMockBuilder(Controller.class).addMockedMethod("getSsnField",String.class).createMock(); 
EasyMock.expect(controller.getSsnField((String)EasyMock.anyObject())).andReturn(SSN).anyTimes();                
EasyMock.replay(controller);           
controller.setFieldValue(name); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:49:32.167

您是否在嘲笑这些方法，因为它们做了一些您在测试中负担不起的繁重工作？我问的原因是因为，IMO，如果你必须创建一个像这样的部分模拟来模拟对生活在同一个类中的方法的调用，那么你可能在一个太细粒度的级别上进行测试。换句话说，你真的需要模拟这些方法吗？

我还假设，如果您确实想模拟这些内部方法，那么测试的唯一原因必须是确保如果 getSsnField(fieldValue) 返回一个字段，则使用相同的 fieldValue 调用 getSsnValue()。

如果你想继续沿着这条路走下去，这就是你需要做的。在 EasyMock 中，要模拟一个 void 方法，您不要使用 expect(...); 相反，您只需直接在模拟对象上调用该方法（在调用 replay() 之前）。这样做会指示 EasyMock 创建将调用该 void 方法的期望。

```
Controller controller = EasyMock.createMockBuilder(Controller.class)
    .addMockedMethod("getSsnField", String.class)//
    .addMockedMethod("getSsnValue")//
    .createMock();
Field<String> SSN = new Field<String>();
String name = "name";
EasyMock.expect(controller.getSsnField(name)).andReturn(SSN).anyTimes();
// Just calling the getSsnValue method on the mock sets up the expectation
// that it must be called
controller.getSsnValue(SSN, name); // Mocking void method here
EasyMock.replay(controller);
controller.setFieldValue(name);

// This step is needed in order to enforce that all mocked methods were
// actually called.
EasyMock.verify(controller); 
```

# php - 将 JSON 传递给 PHP

> ID：15290883
> 
> 赞同：0
> 
> 时间：2013-03-08T09:40:27.593
> 
> 标签：php, javascript, json

我有一个带有一些复选框和一些选择字段的表单：

```
<input type="checkbox" name="service" value="1"> 
<select id="period1">
<option value="3">3</option>
<option value="6">6</option>
</select>   
<input type="checkbox" name="service" value="2">
<select id="period2">
<option value="3">3</option>
<option value="6">6</option>
</select> 
```

我正在尝试传递选定的复选框值和相关的选择字段值。例如：如果用户选中第一个复选框，则脚本应读取“period1”值。

**问题是：**如何使用 javascript 形成数据并使用 JSON 将其传递给 PHP。在 PHP 中，我想有一种：

```
array => [0]
service["id"] => 1
service["period"] => 6 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:42:14.210

用于`json_encode()`以 json 格式编码`json_decode()`并将数据解码回原始格式。

```
<?php
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);

echo json_encode($arr);
?>

<?php
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';

var_dump(json_decode($json));
var_dump(json_decode($json, true));

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:54:31.933

[使用 jQuery 将表单数据转换为 JavaScript 对象](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)

此链接可能对您有所帮助。如果你有 json 对象，你可以在 post 中传递服务器，比如：

$.post("地址", {json:jsonObj}, 函数(结果){...});

我想这是正确的语法，如果我错了，请纠正我。

# angularjs - 在编辑列表时禁用 AngularJS 中的 orderBy

> ID：15290887
> 
> 赞同：16
> 
> 时间：2013-03-08T09:40:34.100
> 
> 标签：angularjs, angularjs-orderby

在我的输入框列表中应用后`orderBy`，如果我编辑任何字段，它会立即开始排序并且我失去焦点。我试图挖掘角度代码，发现他们在 orderBy 的属性上应用了 $watch 之类的东西，因此每当值更改时，它都会对列表进行排序。有没有办法在编辑时禁用 orderBy？我不想让 orderBy 在编辑文本时对数据进行排序。任何帮助将不胜感激

[这是我的笨蛋](http://plnkr.co/edit/OOOTDf4qE5Gi7wF11BFi?p=preview)

**注意**：我想使用 orderBy 并且不需要任何替代方法，例如从任何控制器本身对列表进行排序。我只希望 orderBy 在页面加载时对列表进行一次排序，然后保持不变。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-06T10:42:30.643

我在一个可以使用[angular-sortable](https://github.com/angular-ui/ui-sortable)`orderBy`重新排序的列表上使用，并遇到了类似的问题。

我的解决方案是手动执行排序，通过`orderBy`在页面初始化时调用控制器内部的过滤器，然后在必要时随后调用它，例如在重新排序列表后的回调函数中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-08T11:30:50.683

您可以覆盖指令以将更新时刻更改为您希望重新排序的时刻。您也可以不使用`ng-model`并依赖[自定义指令](http://docs.angularjs.org/guide/directive)。

[该线程](https://groups.google.com/forum/#!msg/angular/LH0Q1A-qTVo/eyVIjJsFZGcJ)讨论了覆盖输入指令以更改要由 tge`blur`事件触发的模型更新。看看[小提琴](http://jsfiddle.net/JYTUB/1/)。

[尽管您可能会覆盖该指令，但您不应该这样做，正如@Liviu T](https://stackoverflow.com/users/527968/liviu-t)在[下面的评论中](https://stackoverflow.com/questions/15290887/disabling-orderby-in-angularjs-while-editing-the-list/15292977?noredirect=1#comment21582791_15292977)解释和举例说明的那样，最好的解决方案是创建一个自定义指令，该指令删除事件 keyup 绑定并添加一个模糊. 这是指令代码，这是[Liviu 的 plunker](http://plnkr.co/edit/yoUmEUMMzecNlbKmtgDq?p=preview)：

```
app.directive('modelChangeBlur', function() {
    return {
        restrict: 'A',
        require: 'ngModel',
            link: function(scope, elm, attr, ngModelCtrl) {
            if (attr.type === 'radio' || attr.type === 'checkbox') return;

            elm.unbind('input').unbind('keydown').unbind('change');
            elm.bind('blur', function() {
                scope.$apply(function() {
                    ngModelCtrl.$setViewValue(elm.val());
                });         
            });
        }
    };
}); 
```

```
<input type="text" ng-model="variable" model-change-blur/> 
```

不幸的是，由于 Angular 事件不是命名空间，您必须删除任何以前添加的事件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-10T21:15:58.217

一种不同的方法可能是一开始就不要失去重点。如果您的主要问题是失去焦点，那么不要禁用 orderBy，而是将此指令添加到您的输入中：

```
app.directive("keepFocus", ['$timeout', function ($timeout) {
    /*
    Intended use:
        <input keep-focus ng-model='someModel.value'></input>
    */
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function ($scope, $element, attrs, ngModel) {

            ngModel.$parsers.unshift(function (value) {
                $timeout(function () {
                    $element[0].focus();
                });
                return value;
            });

        }
    };
}]) 
```

然后只是：

```
<input keep-focus ng-model="item.name"/> 
```

我知道这并不能直接回答您的问题，但它可能有助于解决根本问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-10T21:20:42.457

在@CaioToOn 之后工作，但它在 Angular 1.2.4（可能是整个 1.2.X 分支）中中断。要使其工作，您还需要将自定义指令的优先级声明为 1（输入指令为 0）。然后该指令变为：

```
app.directive('modelChangeBlur', function() {
return {
    restrict: 'A',
    priority: 1,
    require: 'ngModel',
        link: function(scope, elm, attr, ngModelCtrl) {
        if (attr.type === 'radio' || attr.type === 'checkbox') return;

        elm.unbind('input').unbind('keydown').unbind('change');
        elm.bind('blur', function() {
            scope.$apply(function() {
                ngModelCtrl.$setViewValue(elm.val());
            });         
        });
    }
}; 
```

});

有关相关优先级修复，请参阅[http://plnkr.co/edit/rOIH7W5oRrijv46f4d9R?p=preview](http://plnkr.co/edit/rOIH7W5oRrijv46f4d9R?p=preview)和[https://stackoverflow.com/a/19961284/1196057](https://stackoverflow.com/a/19961284/1196057)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-29T07:48:20.200

您可以创建自定义过滤器并仅在必要时调用它。例如，当您单击“网格标题”进行排序或在向数组动态添加/删除值之后，或者只需单击一个按钮（刷新网格）

您需要依赖注入 Angular**过滤器**和**排序过滤器**

```
angular
   .module('MyModule')
   .controller('MyController', ['filterFilter', '$filter', MyContFunc])

     function ExpenseSubmitter(funcAngularFilter, funcAngularFilterOrderBy) {
       oCont = this;
       oCont.ArrayOfData = [{
         name: 'RackBar',
         age: 24
       }, {
         name: 'BamaO',
         age: 48
       }];
       oCont.sortOnColumn = 'age';
       oCont.orderBy = false;
       var SearchObj = {
         name: 'Bama'
       };

       oCont.RefreshGrid = function() {
         oCont.ArrayOfData = funcAngularFilter(oCont.ArrayOfData, SearchObj);
         oCont.ArrayOfData = funcAngularFilterOrderBy('orderBy')(oCont.ArrayOfData, oCont.sortOnColumn, oCont.orderBy);
   }
 } 
```

并在 HTML 中调用类似：

```
<table>
  <thead>
    <tr>
      <th ng-click="oCont.sortOnColumn = 'age'; oCont.RefreshGrid()">Age</th>
      <th ng-click="oCont.sortOnColumn = 'name'; oCont.RefreshGrid()">Name</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="val in oCont.ArrayOfData">
      <td>{{val.age}}</td>
      <td>{{val.name}}</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T11:54:39.090

没有简单或直接的方法来完成您想要的，但有一些选择。您将不得不在没有 ng-model 的情况下工作，而是使用 blur 事件：

JS：

```
var app = angular.module('myapp', []);

app.controller('MainCtrl', function($scope) {
  $scope.items = [
    { name: 'foo', id: 1, eligible: true },
    { name: 'bar', id: 2, eligible: false },
    { name: 'test', id: 3, eligible: true }
  ];

  $scope.onBlur = function($event, item){
    // Here you find the target node in your 'items' array and update it with new value
    _($scope.items).findWhere({id: item.id}).name = $event.currentTarget.value;
  };
});

app.directive('ngBlur', function($parse) {
  return function ( scope, element, attr ) {
    var fn = $parse(attr.ngBlur);
    element.bind( 'blur', function ( event, arg ) {
      scope.$apply( function(){
        fn(scope, {
          $event : event,
          arg: arg
        });
      });
    });
  };
}); 
```

HTML：

```
<div ng-controller="MainCtrl">
  <div ng-repeat="item in items | orderBy:'name'" >
    <input value="{{item.name}}" ng-blur="onBlur($event, item)"/>
  </div>
</div> 
```

[笨蛋](http://plnkr.co/edit/KFZScJNaUlNmnMYcfXqi)。

但请注意，这会破坏模型和视图之间的双向绑定。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-23T11:51:39.487

尝试使用范围变量来更改顺序。在这种情况下，当您要订购时，您在控制器中调用一个函数，将变量 order 值更改为您想要订购的字段，并且在您编辑时，您将其重置。

例子：

```
<li ng-repeat="item in filtered = (items | filter:search) |  orderBy:order:rever" > 
```

所以这里我们有变量“order”来告诉 ng-repeat 列表必须按哪个字段排序。一个按钮调用控制器中的一个函数来改变“order”值。

```
<button type="button" id="orderName" click="changeOrder('item.name')" >Name order </button>

<button type="button" id="orderDate" click="changeOrder('item.date')" >Date order </button>` 
```

然后，在 changeOrder 函数中

```
$scope.order = param; 
```

其中“参数”是您要订购的字段。如果你不做任何其他事情，你将遇到同样的问题，所以，在你为 order 变量分配正确的值之后，你去

```
$scope.order = ""; 
```

这会重置排序。结果是，当按钮被按下时，排序才会生效，然后除非你再次按下按钮，否则它不会再次排序。这可以更改，以便在您完成编辑项目时再次订购，如您所愿。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-19T15:10:43.437

您可以在编辑时冻结当前排序。假设您的 html 如下所示：

```
<tbody ng-repeat="item in items | orderBy:orderBy:reverse">
    <tr ng-click="startEdit()">
      <td>{{item.name}}</td>
    </tr>
</tbody> 
```

在您的控制器中，您编写：

```
var savedOrderBy, savedReverse;
$scope.startEdit() = function() {
    $scope.items = $filter('orderBy')($scope.items, $scope.orderby, $scope.reverse);

    for (var i = 0; i < $scope.items.length; ++i) {
        if (i < 9999) { 
            $scope.items[i]['pos'] = ("000" + i).slice(-4); 
        }
    }

    savedOrderBy = $scope.orderBy;
    savedReverse = $scope.reverse;
    $scope.orderBy = 'pos';
    $scope.reverse = false;
}; 
```

在用户开始编辑之前，您首先按照它们当前在页面中出现的顺序对当前项目进行排序。您可以通过使用当前排序参数调用 orderBy $filter() 来做到这一点。

然后你检查你的 - 现在排序的 - 项目，并添加一个任意属性（这里是“pos”）并将其设置为当前位置。我对其进行零填充，以便位置 0002 在 0011 之前整理。也许这没有必要，不知道。

你通常想记住当前的顺序，这里是作用域变量“savedOrder”和“savedReverse”。

最后，您告诉 angular 按该新属性“pos”进行排序，瞧，表格顺序被冻结，因为该属性在编辑时根本不会改变。

完成编辑后，您必须执行相反的操作。您从范围变量“savedOrder”和“savedReverse”恢复旧排序：

```
$scope.endEdit = function() {
    $scope.orderBy = savedOrderBy;
    $scope.reverse = reverse;
}; 
```

如果 $scope.items 数组的顺序对您很重要，您还必须将其重新排序为原始顺序。

# c# - DLL 导致 Winforms UI 在某些情况下运行缓慢

> ID：15290891
> 
> 赞同：1
> 
> 时间：2013-03-08T09:40:38.973
> 
> 标签：c#, dll, user-interface

我有一个`VideoObject`类使用 C++ DLL 从网络摄像头捕获图像和视频。我被告知 DLL 使用 DirectShow 来执行此操作。它似乎也启动了几个我无法控制的自己的线程。

该`VideoObject`课程本身似乎运行良好。我可以捕捉图像和视频。但是，它的使用会对主 UI 的性能产生负面影响：它变得非常滞后。

如果我`VideoObject`像这样实例化我的

```
public partial class ParentForm : Form

    private VideoObject videoObject;

    public ParentForm()
    {
        videoObject = new VideoObject();
    }
} 
```

然后用户界面变得非常滞后。我的猜测是，无论`VideoObject`底层 DLL 在做什么，它都会影响我的应用程序的 UI 线程。

`VideoObject`现在，我可以通过在它自己的 MTA 线程中启动实例来缓解这种滞后。（我对 C# 完全陌生，所以我猜以下可能不是很聪明。）

```
public partial class ParentForm : Form

    private VideoObject videoObject;
    private Thread videoObjectThread;

    public ParentForm()
    {
        videoObjectThread = new Thread(new ThreadStart(() => videoObject = new VideoObject()));
        videoObjectThread.SetApartmentState(ApartmentState.MTA);
        videoObjectThread.Start();
    }
} 
```

我现在可以与`videoObject`实例交互，并且 UI 不会滞后，但前提是我不再在 Form 的构造函数中进一步引用该实例。

如果我以任何方式在 Form 的构造函数中与这个线程实例交互，UI 将再次变得迟钝。就好像与`VideoObject`我的表单构造函数中的实例的任何直接交互都会导致 UI 的滞后行为。

有人对我所看到的行为有任何见解吗？

**编辑**：我可能应该澄清“迟钝”的意思。我的意思是主面板的用户界面变得永远滞后和缓慢。没有其他任何影响；VideoObject 上的所有操作都按预期工作，不会以任何方式运行缓慢或延迟。

如果我不“触摸”表单构造函数中的 VideoObject，则 UI 可以完美运行。随后调用 VideoObject 的方法也不会导致 UI 运行缓慢。

这一切似乎都取决于我是否在主窗体的构造函数中访问 VideoObject。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:14:09.123

每次调用 Video 对象上的方法时，它都必须有一些开销来临时阻塞您用来与视频对象交互的线程。当调用方法或实例化对象时，可能 Video 组件必须将大对象加载到内存中。

您是否尝试过对视频对象上的方法进行异步调用？在等待视频对象从它正在做的任何事情中返回时，实际上不会阻塞。

在不知道视频组件的细节的情况下，很难做出猜测。

您可以考虑的一件事是将视频对象包装在 WCF 服务中并将其托管在它自己的进程中，然后使用 NetTcpBinding 与组件进行交互。

[http://msdn.microsoft.com/en-us/library/bb332338.aspx](http://msdn.microsoft.com/en-us/library/bb332338.aspx)

[http://msdn.microsoft.com/en-us/library/system.servicemodel.nettcpbinding.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.nettcpbinding.aspx)

# c# - EF ObservableListSource 指定 ForeignKey

> ID：15290893
> 
> 赞同：1
> 
> 时间：2013-03-08T09:40:42.617
> 
> 标签：c#, entity-framework, entity-framework-4, ef-code-first, entity-framework-4.1

我有两个实体：`Employee`& `Contract`。

在`Contract`实体中，我有属性`AddedByEmployee`& `AssignedToEmployee`。

我想要一个类中的集合导航属性，`Employee`但是如何在类中引用正确的键`Contract`？

到目前为止，我有：

```
public class Employee
{
    public int EmployeeID {get; set;}
    public string Name {get; set;}
    private readonly ObservableListSource<Contract> _Contracts = new ObservableListSource<Contract>();
    public virtual ObservableListSource<Contract> Contracts { get { return _Contracts; }
}

public class Contract
{
    public int ContractID {get; set;}
    public string Name {get; set;}
    public int AddedByEmployeeID {get; set;}
    public int AssignedToEmployeeID {get; set;}

    [ForeignKey("AddedByEmployeeID")]
    public virtual Employee AddedByEmployee { get; set; }

    [ForeignKey("AssignedToEmployeeID")]
    public virtual Employee AssignedToEmployee { get; set; }
} 
```

所以基本上：我如何让`ObservableListSource<Contract>`知道它是`AddedByEmployeeID`我想要映射到的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:39:23.017

您可以使用`DataAnnotations`Fluent API 或 Fluent API 来做到这一点。

与`DataAnnotations`您一起执行此操作可以将`InverseProperty`属性添加到您的`Contracts`或`AddedByEmployee`属性（或两者，但这不是必需的）。

这将说明`Entity Framework`应该在`Contracts`和之间建立关系`AddedByEmployee`。

```
[InverseProperty("AddedByEmployee")]
public virtual List<Contract> Contracts
{
    get { return _Contracts; }
} 
```

如果您想改用 Fluent API，您只需像这样显式定义关系：

```
modelBuilder.Entity<Employee>()
    .HasMany(p => p.Contracts)
    .WithRequired(p => p.AddedByEmployee) 
```

# java - SDK 2.2.98 中的 Paypal Java SOAP GetExpressCheckoutDetails 失败

> ID：15290896
> 
> 赞同：0
> 
> 时间：2013-03-08T09:40:51.430
> 
> 标签：java, soap, paypal

我们尝试将 Paypal 整合为我们商店的支付选项。为此，我们选择了带有 SOAP api 的商家 SDK（版本 2.2.98）

SetExpressCheckoutAPI 的第一步工作正常，但在第二步中，当我们检索 GetExpressCheckoutDetails API 时，我们总是会收到此堆栈跟踪：

```
java.lang.IllegalArgumentException: NONE
urn.ebay.apis.eBLBaseComponents.AddressNormalizationStatusCodeType.fromValue(AddressNormalizationStatusCodeType.java:32)
urn.ebay.apis.eBLBaseComponents.AddressType.<init>(AddressType.java:631)
urn.ebay.apis.eBLBaseComponents.PaymentDetailsType.<init>(PaymentDetailsType.java:981)
urn.ebay.apis.eBLBaseComponents.GetExpressCheckoutDetailsResponseDetailsType.<init>(GetExpressCheckoutDetailsResponseDetailsType.java:627)
urn.ebay.api.PayPalAPI.GetExpressCheckoutDetailsResponseType.<init>(GetExpressCheckoutDetailsResponseType.java:78)
urn.ebay.api.PayPalAPI.PayPalAPIInterfaceServiceService.getExpressCheckoutDetails(PayPalAPIInterfaceServiceService.java:2855)
urn.ebay.api.PayPalAPI.PayPalAPIInterfaceServiceService.getExpressCheckoutDetails(PayPalAPIInterfaceServiceService.java:2875)
com.sample.merchant.CheckoutServlet.doPost(CheckoutServlet.java:329)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

为了验证行为，我们还使用了 SDK 中包含的示例应用程序，它显示了同样的问题。

有任何想法吗 ？这是 SDK/Java 包装器中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:15:25.543

似乎是 98 SDK 版本的一个已知问题。

使用 96 SDK 工作正常。对应的 jar 可以在 maven 仓库中找到。

[http://mvnrepository.com/artifact/com.paypal.sdk/merchantsdk/2.1.96](http://mvnrepository.com/artifact/com.paypal.sdk/merchantsdk/2.1.96)

[https://github.com/paypal/merchant-sdk-java/issues/3](https://github.com/paypal/merchant-sdk-java/issues/3)

# oracle - PL/SQL 块内的过程调用

> ID：15290897
> 
> 赞同：0
> 
> 时间：2013-03-08T09:40:53.590
> 
> 标签：oracle, plsql, oracle-xe

我有一些 SQL 代码来填充数据库，效果很好：

```
INSERT INTO PDF_DOCUMENT_ELEMENT (DOCUMENT_ELEMENT_ID, DOCUMENT_ID, ELEMENT_ID) VALUES (1, 1, 1);
INSERT INTO PDF_DOCUMENT_ELEMENT (DOCUMENT_ELEMENT_ID, DOCUMENT_ID, ELEMENT_ID) VALUES (2, 1, 1);
INSERT INTO PDF_DOCUMENT_ELEMENT (DOCUMENT_ELEMENT_ID, DOCUMENT_ID, ELEMENT_ID) VALUES (3, 1, 2);

EXECUTE RESET_SEQUENCE('DOCUMENT_ELEMENT_ID_SEQ', 4); 
```

为了提高可维护性，我试图用变量替换一些幻数。我以前从未使用过变量，但我读过我需要使用 PL/SQL 块，所以：

```
DECLARE
    ELEMENT_TEXT SMALLINT := 1;
    ELEMENT_IMAGE SMALLINT := 2;
BEGIN

INSERT INTO PDF_DOCUMENT_ELEMENT (DOCUMENT_ELEMENT_ID, DOCUMENT_ID, ELEMENT_ID) VALUES (1, 1, ELEMENT_TEXT);
INSERT INTO PDF_DOCUMENT_ELEMENT (DOCUMENT_ELEMENT_ID, DOCUMENT_ID, ELEMENT_ID) VALUES (2, 1, ELEMENT_TEXT);
INSERT INTO PDF_DOCUMENT_ELEMENT (DOCUMENT_ELEMENT_ID, DOCUMENT_ID, ELEMENT_ID) VALUES (3, 1, ELEMENT_IMAGE);

EXECUTE RESET_SEQUENCE('DOCUMENT_ELEMENT_ID_SEQ', 4);

END;
/ 
```

这工作得很好，除了过程调用：

```
EXECUTE RESET_SEQUENCE('DOCUMENT_ELEMENT_ID_SEQ', 4);
           *
ERROR en lÝnea 45:
ORA-06550: lÝnea 45, columna 9:
PLS-00103: Se ha encontrado el sÝmbolo "RESET_SEQUENCE" cuando se esperaba uno
de los siguientes:
:= . ( @ % ; immediate
El sÝmbolo ":=" ha sido sustituido por "RESET_SEQUENCE" para continuar. 
```

PLS-00103 错误转换为：

> PLS-00103：找到“字符串”但预期以下之一：“字符串”

如果我将呼叫更改为：

```
EXECUTE IMMEDIATE RESET_SEQUENCE('DOCUMENTO_ELEMENTO_ID_SEQ', 4); 
```

...我明白了：

```
PLS-00222: en este ßmbito no existe ninguna funci¾n cuyo nombre sea
'RESET_SEQUENCE'
ORA-06550: lÝnea 45, columna 1:
PL/SQL: Statement ignored 
```

...翻译为：

> PLS-00222：此范围内不存在名称为“字符串”的函数

我的问题是：

1.  我是否正确使用了变量，或者对于我的初始目标有更好的解决方案？
2.  我需要在我的过程调用语法中修复什么，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:50:40.823

1.  IMO，如果您有一个带有 3 个参数的程序会更好，其中您将有 1 个插入...然后使用该程序进行插入。这样你就可以添加异常处理，如果发生了什么你就会知道。

2.  在使用代码的块版本时尝试删除 EXECUTE。我认为你不需要它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:51:45.347

过程调用不是普通的 SQL，而是 PL/SQL。因此，您需要从 PL/SQL 上下文中运行它。选项包括：

*   创建一个 PL/SQL 块并直接调用该过程：

    ```
    BEGIN
        RESET_SEQUENCE('DOCUMENT_ELEMENT_ID_SEQ', 4);
    END;
    / 
    ```

*   如果您在 SQL*Plus，您可以使用[EXECUTE 内部命令](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12022.htm#i2697931)：

    ```
    EXECUTE RESET_SEQUENCE('DOCUMENT_ELEMENT_ID_SEQ', 4); 
    ```

我的问题是我在 PL/SQL 块内发出 SQL*Plus 命令。

*（截至`EXECUTE IMMEDIATE`，它是运行动态生成的 SQL 语句或匿名 PL/SQL 块的[PL/SQL 命令](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/executeimmediate_statement.htm)。它需要一个字符串，与此问题无关。Oracle 仅建议它，因为它的名称类似于 SQL*Plus 命令.)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T10:43:38.483

如果最初的目标是避免使用幻数，那么解决方案是使用具有这些数字含义的表格并引用它。

所以 ...

```
 create table element (
   element_id   integer primary key,
   element_name varchar2(30) not null unique);

 insert into element values (1,'Text');
 insert into element values (2,'Image');

 INSERT INTO PDF_DOCUMENT_ELEMENT (DOCUMENT_ELEMENT_ID, DOCUMENT_ID, ELEMENT_ID)
 Select 1, 1, element_id
 from   elements
 where  element_name = 'Text';

 INSERT INTO PDF_DOCUMENT_ELEMENT (DOCUMENT_ELEMENT_ID, DOCUMENT_ID, ELEMENT_ID)
 Select 1, 1, element_id
 from   elements
 where  element_name = 'Text';

 INSERT INTO PDF_DOCUMENT_ELEMENT (DOCUMENT_ELEMENT_ID, DOCUMENT_ID, ELEMENT_ID)
 Select 1, 1, element_id
 from   elements
 where  element_name = 'Image'; 
```

# sql - 报告中是否可以有多个参数

> ID：15290901
> 
> 赞同：0
> 
> 时间：2013-03-08T09:41:06.460
> 
> 标签：sql, tsql, reporting-services

我的报告中有一个名为报告级别的参数，您可以在其中从 4 个选项中进行选择：

公司 BDM 地区站点

我想要做的是：

选择 BDM，这将打开另一个参数调用 BDM 列表（这基于从查询中获取值），但我希望其他参数保持灰色。一旦从 BDM 列表中做出选择，时间和日期参数就会变得可用。

这可能吗？

这些是我的 BDM 列表和区域列表的数据集：

```
 SELECT SiteInfo FROM
    ((SELECT DISTINCT BDM, Region, SiteName As SiteInfo 
    FROM Site 
    WHERE @ReportingLevel = 'BDM' 
    union all
    SELECT DISTINCT BDM, Region, SiteName As SiteInfo 
    FROM Site 
    WHERE @ReportingLevel = 'Region' ) 
    union all
    SELECT DISTINCT BDM, Region, SiteName As SiteInfo 
    FROM Site
    WHERE @ReportingLevel = 'SiteName') AS QRY2 
```

这是我的主要数据集：

```
 SELECT       OccupancyDetail.CalendarYear, OccupancyDetail.CalendarMonth, SUM(OccupancyDetail.No_of_Nights) AS No_of_Nights, 
                         SUM(OccupancyDetail.Capacity) AS Capacity
FROM            OccupancyDetail INNER JOIN
                         Site ON OccupancyDetail.Site_Skey = Site.Site_Skey

WHERE  (OccupancyDetail.ReferenceDate = convert(Date,getdate()))
AND CASE WHEN @Time = 'YEAR' THEN CAST(CalendarYear as varchar(4)) else CalendarMonth + ' ' + CAST(CalendarYear as varchar(4)) end in (@Dates)
AND Site.BDM IN (@BDM)
AND Site.Region IN (@Region)
AND Site.SiteName IN (@SiteName)

GROUP BY OccupancyDetail.ReferenceDate, OccupancyDetail.CalendarYear, OccupancyDetail.CalendarMonth 
```

时间数据集

```
select DateChoice FROM
(select distinct CalendarYear, 1 as MonthNumber,CAST(CalendarYear as varchar(4)) as DateChoice from Time
where @Time = 'YEAR'

union all

select Distinct CalendarYear, MonthNumber,CalendarMonth + ' ' + CAST(CalendarYear as varchar(4)) as DateChoice from Time where @Time = 'MONTH') as QRYDATA
ORDER BY CalendarYear,MonthNumber 
```

我希望你能帮助这是我工作的第三天。

谢谢

韦恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:29:10.380

我相信您正在寻找使用级联参数，这里有一些链接应该可以帮助您。

[http://technet.microsoft.com/en-us/library/dd255197.aspx](http://technet.microsoft.com/en-us/library/dd255197.aspx)

[http://thevirtualzoneblog.wordpress.com/2011/03/30/creating-cascading-parameter-reports-using-sql-server-reporting-services-v2008/](http://thevirtualzoneblog.wordpress.com/2011/03/30/creating-cascading-parameter-reports-using-sql-server-reporting-services-v2008/)

通过第一个链接，转到标记为“创建数据集以提供相关参数值”的部分。下一个在父级选择选项之前将参数显示为灰色：

[http://www.resultdata.com/adding-cascading-parameters-to-a-ssrs-report/](http://www.resultdata.com/adding-cascading-parameters-to-a-ssrs-report/)

* * *

## 更新

我为您找到了一个视频教程： [http ://www.youtube.com/watch?v=VAYGupJcHkU](http://www.youtube.com/watch?v=VAYGupJcHkU)

# xcode - XCode 4.6 不显示整数的当前值

> ID：15290907
> 
> 赞同：0
> 
> 时间：2013-03-08T09:41:13.567
> 
> 标签：xcode, cocoa, debugging, watch

单步执行循环时，`NSLog(@"%d",intvar)`显示 intvar 正在增加，但将鼠标悬停在其上仍显示 0。这里，intvar 为 8 并且已触发断点，但调试器显示 0。 ![在此处输入图像描述](../Images/7d053cbc2f4cbe9a014c65958b23160f.png) 是否在项目中的某处设置了一些调试标志或目标？当我调试时，我希望能够看到任何变量或对象的当前值。但是 XCode 没有像标准 IDE 那样容易设置的“调试模式编译”或监视。

有时它甚至不显示整数的值，而只是显示名称。 ![在此处输入图像描述](../Images/2f14fb6378e7e6e80df6ada1756eaa39.png) 本地窗格也仍然为 0，有时它根本不显示值。

所有变量的范围都是方法范围的，我只是在这个方法内部调试。

是否有设置可以在 Xcode 中进行调试，或者它是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:49:13.290

即使我有 XCode 4.6，它对我来说也很好，检查截图。

你一定改变了一些设置，

![在此处输入图像描述](../Images/56218e124379892b9d0128fe87118a36.png)

**稍等片刻，尝试解决*

# android - Android 设备之间的 TCP 连接

> ID：15290910
> 
> 赞同：0
> 
> 时间：2013-03-08T09:41:27.200
> 
> 标签：android, tcp, udp, client-server

我正在考虑构建可以相互通信的 Android 应用程序 - 例如 IM 或游戏。与任何 Java/Android 一样，我可以使用一套 TCP/UDP 通信库。

问题是这样的：Android 设备通常通过 Telco 网络连接，而 Telco 通常有防火墙/NAT 路由器，这使得直接连接到 Android 设备是不可能的。

有没有人设法使用套接字直接连接 2 个设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:46:47.140

[STUN](https://en.wikipedia.org/wiki/STUN)通常用于 NAT 穿越。不过可能有点矫枉过正。

[Socket](https://developer.android.com/reference/java/net/Socket.html)、[ServerSocket](https://developer.android.com/reference/java/net/ServerSocket.html)和[DatagramSocket](https://developer.android.com/reference/java/net/DatagramSocket.html)用于通信。

# sql - 行不存在时 DB2 删除语句错误

> ID：15290914
> 
> 赞同：1
> 
> 时间：2013-03-08T09:41:32.630
> 
> 标签：sql, db2, error-code

伙计们，在 DB2 9.x 中，delete 语句正常工作并在特定行存在时给出成功的返回码。但如果该行不存在，则返回非零

即说EmployeeTable 不包含employeeID 1234 `db2 "delete from EmployeeTable where employeeID = 1234"`
它给出的输出如下。

```
SQL0100W  No row was found for FETCH, UPDATE or DELETE; or the result of a query is an empty table.  SQLSTATE=02000 
```

如果没有行，是否有返回成功/零返回码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:06:13.823

您可以将该删除语句包装在**存储过程**中，并在其中捕获异常。存储过程执行将始终抛出 0。

从命令行，您无能为力，因为该命令有警告。您还可以在调用 db2 delete 时进行后期处理，例如，创建一个**shell 函数**，并在引发该 sqlcode 时更改错误代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-21T19:44:50.747

当被迫使用另一个程序来执行您的 SQL 代码时，这种情况并不少见。

以下是一个坏主意，但如果您是该表的唯一用户，则可以使用。

如果您具有插入权限，则可以插入一个虚拟行并在该命令之后使用将包含该虚拟行的删除。这样删除总是至少获得一行：

```
 insert into mytable (id) values (9999999);

    delete from mytable
    where date_of_job >= current date - 1 day or
    id=9999999; 
```

# dependency-injection - 如何让 AngularJS 模块路由使用它自己的控制器？

> ID：15290915
> 
> 赞同：2
> 
> 时间：2013-03-08T09:41:34.143
> 
> 标签：dependency-injection, angularjs

我正在尝试按照[AngularJS 自己的教程](http://docs.angularjs.org/tutorial/step_07)学习 AngularJS 的视图和路由机制。

我的问题是本教程将其所有控制器都声明在全局范围内，我认为这是一种不好的做法，因为我们在添加更多控制器时会污染它。

这是我能够按照上述教程构建的快速工作页面（也有[一个小提琴](http://jsfiddle.net/kappa/7TGRY/)）：

```
<!doctype html>
<html>
    <head>
        <title>Test</title>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.1/angular.js"></script>
        <script>
            "use strict";

            var MyFirstController = function ($scope) {
                // Do something here.
            };

            var MySecondController = function ($scope) {
                // Do something here.
            };

            var myModule = angular.module("MyModule", []);

            myModule.config(["$routeProvider", function ($routeProvider) {
                $routeProvider.when("/first-page", {
                    template: "<p>My first controller.</p>",
                    controller: MyFirstController
                });

                $routeProvider.when("/second-page", {
                    template: "<p>My second controller.</p>",
                    controller: MySecondController
                });
            }]);

            $(document).ready(function () {
                angular.bootstrap(document, ["MyModule"]);
            });
        </script>
    </head>
    <body>
        <h1>Test</h1>
        <div data-ng-view></div>
        <p><a href="#/first-page">Click me!</a></p>
        <p><a href="#/second-page">Click me too!</a></p>
    </body>
</html> 
```

天真的，我试图在模块内移动控制器：

```
myModule.config(["$routeProvider", function ($routeProvider) {
    $routeProvider.when("/first-page", {
        template: "<p>My first controller.</p>",
        controller: MyFirstController
    });

    $routeProvider.when("/second-page", {
        template: "<p>My second controller.</p>",
        controller: MySecondController
    });
}]);

myModule.controller("MyFirstController", ["$scope", function ($scope) {
    // Do something here.
}]);

myModule.controller("MySecondController", ["$scope", function ($scope) {
    // Do something here.
}]); 
```

唉，它（显然）不起作用，抛出`ReferenceError: MyFirstController is not defined`异常。

如何让 AngularJS 模块在自己的路由配置中使用自己的控制器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T09:41:34.143

一旦你知道了解决方案，这真的很简单：只需将控制器指定为字符串而不是对象：

```
myModule.config(["$routeProvider", function ($routeProvider) {
    $routeProvider.when("/first-page", {
        template: "<p>My first controller.</p>",
        controller: "MyFirstController"
    });

    $routeProvider.when("/second-page", {
        template: "<p>My second controller.</p>",
        controller: "MySecondController"
    });
}]); 
```

这样，AngularJS 会将控制器名称解析为您在模块中定义的名称。

它也是缩小安全的！

我创建[了一个小提琴来演示它](http://jsfiddle.net/kappa/96hPJ/)。

# java - 将视频或音频转换为文本而不播放？

> ID：15290922
> 
> 赞同：-1
> 
> 时间：2013-03-08T09:42:01.647
> 
> 标签：java, audio, video, text, speech-recognition

是否有任何参考可以让我们将音频或视频文件转换为 java 中的文本文件（与文本到语音相反）。我已经在[这里](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)检查过，但我没有找到任何可以在不播放的情况下转换为文本的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:45:54.597

我不太确定您要查找的类型，但您可以在[此处](http://java.sun.com/products/java-media/speech/forDevelopers/jsapifaq.html#implementation)找到更多信息 ，而未列出的其他类型[在此处](http://cmusphinx.sourceforge.net/sphinx4/)。希望这可以帮助

# microdata - 警告：schema.org 的微数据不完整

> ID：15290927
> 
> 赞同：1
> 
> 时间：2013-03-08T09:42:16.450
> 
> 标签：microdata

我收到这样的警告：“警告：schema.org 的微数据不完整。” 当谷歌结构化数据测试工具。

```
<div itemscope itemtype="http://schema.org/Product" style="display: none;">
        <img itemprop="image" runat="server" id="listImage" src="" />
        <span itemprop="name" runat="server" id="listName"></span>
        <div itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
              <span itemprop="ratingValue" runat="server" id="rValue"></span>out of <span itemprop="bestRating">5</span> based on 
              <span itemprop="ratingCount" runat="server" id="allRating"></span>user ratings
        </div>
        <div itemprop="offers" itemscope itemtype="http://schema.org/AggregateOffer">
               <span itemprop="lowPrice" runat="server" id="lowPrice"></span>to <span itemprop="highPrice" runat="server" id="highPrice"></span>
               <meta itemprop="priceCurrency" content="TRY" />
        </div>
        <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
               <a itemprop="url" href="" runat="server" id="firstHotel"></a>
        </div>
        <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
               <a itemprop="url" href="" runat="server" id="secondHotel"></a>
        </div>
</div> 
```

问题是什么？感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:59:00.683

Google 要求存在某些属性才能触发丰富网页摘要。您应该在此处查看 Google 文档：http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=146750](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146750)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T17:23:35.107

我对价格值有同样的问题。它需要有 2 位小数精度。

错误的：

```
<meta content="4.5" itemprop="price"></meta> 
```

对：

```
<meta content="4.50" itemprop="price"></meta> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T07:56:30.270

感谢你。

我变了

```
 <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
           <a itemprop="url" href="" runat="server" id="firstHotel"></a>
    </div>
    <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
           <a itemprop="url" href="" runat="server" id="secondHotel"></a>
    </div> 
```

和

```
 <div>
     <a itemprop="url" href="" runat="server" id="firstHotel"></a>
     <a itemprop="url" href="" runat="server" id="secondHotel"></a>
     </div> 
```

# jpa - 如果在 Spring JPA 中未获取所有属性，自定义查询能否返回模型？

> ID：15290931
> 
> 赞同：1
> 
> 时间：2013-03-08T09:42:25.093
> 
> 标签：jpa, spring-data-jpa

我有一个有很多属性的模型。对于列表，我只想获取其中的一些属性，因为它们中的大多数仅显示在详细视图中。

所以我为我的存储库编写了这个查询：

```
JpaRepository< Customer, Long >

@Query("SELECT id, name FROM Customer")
public List<Customer> findAllSummary(); 
```

它有效 - 确实返回了一个 id 和一个名称，但不是作为 Customer 对象。当我将数据返回给 JSON 客户端时，这会成为一个问题：没有属性名称，只有每行的值，而在默认查询中也返回名称，例如：

```
"id": 1
"name": "John"
// rest of the properties 
```

即使某些属性为空，是否有办法使自定义查询返回模型对象？或者其他一些技术更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:49:42.007

您可以使用必填字段和适当的构造函数创建 DTO，并使用构造函数语法从查询中返回它：

```
@Query("SELECT new CustomerSummary(id, name) FROM Customer")
public List<CustomerSummary> findAllSummary(); 
```

# c++ - QTableWidget 与 QTableView

> ID：15290932
> 
> 赞同：36
> 
> 时间：2013-03-08T09:42:26.733
> 
> 标签：c++, qt, qtableview, qtablewidget

我是这个 Qt 模型/视图框架的新手。在我的应用程序中，我想要 1000 X 1000 个单元格。应该有最低的内存要求并且应该很快。我不知道这个模型术语是干什么用的。但是我有自己的类，它知道如何处理存储在表中的双变量。目前我正在使用带有验证器的 QLineEdit 来创建单元格数组。但是对于 > 50 X 50 的单元格来说，它太慢了。所以我决定采用旧的 MS Excel 方式。

那么我应该使用哪个小部件：`QTableWidget`或`QTableView`？

谁能简要解释一下这个模型/视图框架是什么？我不是计算机科学专业的人，因此我发现很难理解...

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-08T18:33:09.617

cmannett85 的推荐是不错的。阅读文档大约十几次。

然后，如果性能和内存问题是您最关心的问题，并且您认为您可以超越 QTableWidget 实现，那么您正在寻找[QAbstractTableModel](http://qt-project.org/doc/qt-4.8/QAbstractTableModel.html)或[QStandardItemModel](http://qt-project.org/doc/qt-4.8/qstandarditemmodel.html)之上的[QTableView接口。](http://qt-project.org/doc/qt-4.8/qtableview.html)

由于您不熟悉 Qt 的模型视图架构，因此我建议您使用 QStandardItemModel，直到您觉得自己掌握了窍门。如果您的性能仍然不够好，请通过实施您的自定义模型来避免大量内存重复和浪费的对象。另外，给自己买一本[好教科书](https://rads.stackoverflow.com/amzn/click/com/0132354160)，阅读它关于模型视图框架的章节大约 12 遍。恕我直言，仅这一部分就值金子了。

以下是 Qt 的自定义模型视图框架的基础知识：

*   您的**实际数据**存储在某处的列表/树中
*   该**模型**为查询和编辑数据提供了标准框架
*   **代理模型**允许您在不影响原始模型的情况下对数据进行排序/过滤
*   **视图**提供了一种可视化*观察*数据并*与之交互*的方法
*   **委托**（通常是可选的）调整数据的外观并为数据提供自定义编辑器

如果您觉得既便宜又勇敢，请查看有关实施您自己的自定义模型的[摘录。](http://www.informit.com/articles/article.aspx?p=1750226)一次使用一个功能，并在您使用时使用它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-08T09:49:48.280

要了解该框架，请从有关它的[文档](http://qt-project.org/doc/qt-4.8/model-view-programming.html)开始。它开始缓慢，但变得适度广泛并涵盖了所涉及的大部分课程。

> QTableWidget 还是 QTableView？

一旦你阅读了文档，你就会明白为什么这个问题没有任何意义： a`QTableWidget` *使用*a`QTableView`来显示数据。 `QTableWidget`（以及`QTreeWidget`等）使用 MVC 框架，但它将所有内容封装到一个方便的包中，用于大多数用途，但如果你需要做一些不同的事情，你将不得不将它破解成它的组件并重新实现你的位需要。

# c# - Rad chartview y xis 标签格式不起作用

> ID：15290937
> 
> 赞同：0
> 
> 时间：2013-03-08T09:42:52.960
> 
> 标签：c#, telerik, telerik-charting

我正在为我的 C#.net windows 应用程序使用最新的 telerik winform dll。在我的应用程序中，我通过以下几行以编程方式填充了 radchartview（折线图）控件：

```
 LineSeries lineSeria = new LineSeries();
        lineSeria.VerticalAxis.LabelFormat = "{0:#,###}";        // Y axis label formatting
        lineSeria.HorizontalAxis.LabelFormat = "{0:MM/dd/yyyy}"; //X axis label formatting
        lineSeria.HorizontalAxis.LabelRotationAngle = 300;
        lineSeria.HorizontalAxis.LabelFitMode = AxisLabelFitMode.Rotate;
        lineSeria.HorizontalAxis.LabelInterval = graphInterval;
        lineSeria.VerticalAxis.LabelInterval = 2;   

        List<Graph_Stat> lstGraph = _oGraphBal.LoadGraphs(); //Loading a generic list for populating chartview
        lineSeria.ValueMember = "Value"; //decimal value
        lineSeria.CategoryMember = "Date"; //date time
        lineSeria.DataSource = lstGraph;     //setting datasouce for line series
   this.chartFrontedContractsSold.Series.Add(lineSeria); //adding line series to chartview and populating it 
```

在这个例子中，我已经格式化了图表视图的 X 轴和 Y 轴标签。X 轴中的日期时间值显示正确的格式结果。但是 Y 轴标签不显示任何格式化输出（例如，如果我有一个值 1000，它应该显示为 1,000）。

请帮我。

-普拉文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:48:48.447

你写了错误的格式字符串：

```
lineSeria.VerticalAxis.LabelFormat = "{0,#,###}"; 
```

应该

```
lineSeria.VerticalAxis.LabelFormat = "{0:#,###}"; 
```

# delphi - 链接器消除了 TDictionary 上的 GetItem

> ID：15290943
> 
> 赞同：2
> 
> 时间：2013-03-08T09:43:01.457
> 
> 标签：delphi, linker, tdictionary

我正在使用`TDictionary`. `<string, string>`但是由于某种原因，链接器决定我不想从中获取项目。

我有以下代码：

```
function TSheet.GetFieldName(Field: string; Default: string): string;
begin
  Result := Default;
  if FFieldNames[Field] = '' then
    Result := Field
  else
    Result := FFieldNames[Field];
end; 
```

`FFieldNames`是一个`TDictionary<string, string>`。在第 2 行 ( `if FFieldNames[Field] = '' then`) 中，它会引发“找不到文件”异常。添加`FFieldNames[Field]`到我的手表告诉我*要调用的函数 {System.Generics.Collections}TDictionary.GetItem 已被链接器消除*。

[有人在这里问过类似的问题](https://stackoverflow.com/questions/1606105/how-do-i-force-the-linker-to-include-a-function-i-need-during-debugging)，关于如何避免链接器在调试期间消除功能。由此我收集到，编译器/链接器假定我没有使用它。有人建议——在谈话中——我应该尝试*更多地*使用它。

所以我创建了以下代码：

```
FFieldNames.Add(Name, S);
V := FFieldNames.Items[Name]; 
```

其中`S`和是`Name`字符串`V`。这是来自`FFieldNames`填充数据的代码。 `V`的唯一目的是获取刚刚插入的`S`；它什么也不做。

奇怪的是，虽然调试器告诉我同样的事情（`GetItem`即被淘汰），`V`但它确实被设置为预期值。但它不在我的`TSheet.GetFieldName`功能中。:|

我错过了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-09-07T05:47:33.840

同样的问题适用于`TList<>`. 即使代码使用类中的方法，调试器也无法访问它（“链接器消除了 TList 上的 xxx”）。我想这通常是泛型的问题。

如果你做一个后代类就不会出现这个问题

```
type
  TMyList = class(TList<TMyObject>)

  end;

var
  List : TMyList;
begin
  ...

end; 
```

# c - 为什么不同的测试有完全相同的数字？

> ID：15290944
> 
> 赞同：0
> 
> 时间：2013-03-08T09:43:01.633
> 
> 标签：c, performance, testing, buffer, microbenchmark

为什么缓冲 0.030000 秒与“更好”缓冲 0.030000 秒相同？如果 4 倍大的 linesize 不会改变时间，我怎样才能加快速度呢？

测试

```
$ ./a.out 
Unbuffered: 0.770000 seconds
Buffered: 0.030000 seconds
Better buffered: 0.030000 seconds 
```

代码

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define SIZE 1024 /* read 1024 bytes at a time */
#define betterSIZE 4096 /* read a better size at a time */

int copy() /* input2output ie anything to anything */
{
    char buf[betterSIZE];
    int n;
    while ((n = read(0, buf, betterSIZE)) > 0)
    write(1, buf, n);
    return 0;
}

int main(int argc, char **argv)
{

    /* copy(); */

    /* make the names known */

    void info(char file_name[]);
    void buffered(char file_name[]);
    void better_buffered(char file_name[]);

   /* test */

    clock_t toc;
    clock_t tic = clock();
    info("coreutils_8.13.orig.tar.gz"); 
    info("coreutils_8.13.orig.tar.gz"); 
    info("coreutils_8.13.orig.tar.gz"); 
    info("coreutils_8.13.orig.tar.gz"); 
    info("coreutils_8.13.orig.tar.gz"); 
    toc = clock();
    printf("Unbuffered: %f seconds\n", (double)(toc - tic) / CLOCKS_PER_SEC);
    tic = clock();    
    buffered("coreutils_8.13.orig.tar.gz"); 
    buffered("coreutils_8.13.orig.tar.gz"); 
    buffered("coreutils_8.13.orig.tar.gz"); 
    buffered("coreutils_8.13.orig.tar.gz");
    buffered("coreutils_8.13.orig.tar.gz"); 
    toc = clock();
    printf("Buffered: %f seconds\n", (double)(toc - tic) / CLOCKS_PER_SEC);
    tic = clock();    
    better_buffered("coreutils_8.13.orig.tar.gz"); 
    better_buffered("coreutils_8.13.orig.tar.gz"); 
    better_buffered("coreutils_8.13.orig.tar.gz"); 
    better_buffered("coreutils_8.13.orig.tar.gz");
    better_buffered("coreutils_8.13.orig.tar.gz"); 
    toc = clock();
    printf("Better buffered: %f seconds\n", (double)(toc - tic) / CLOCKS_PER_SEC);
    return 0;
}

void info(char file_name[])
{
    int ch;
    FILE *fp;
    fp = fopen(file_name,"r");
    // read mode
    if (fp == NULL)
    {
        perror(file_name);
        exit(EXIT_FAILURE);
    }
    while ((ch = fgetc(fp)) != EOF)
    {
        //putchar(ch);
    }
    fclose(fp);
}

void buffered(char file_name[])
{
    char buf[SIZE];
    FILE *fp;
    size_t nread;
    fp = fopen(file_name, "r");
    if (fp) {
        while ((nread = fread(buf, 1, sizeof buf, fp)) > 0)
    {
            //fwrite(buf, 1, nread, stdout);
    }
        if (ferror(fp)) {
            /* to do: deal with error */
        }
        fclose(fp);
    }
}

void better_buffered(char file_name[])
{
    char buf[betterSIZE];
    FILE *fp;
    size_t nread;
    fp = fopen(file_name, "r");
    if (fp) {
        while ((nread = fread(buf, 1, sizeof buf, fp)) > 0)
    {
            //fwrite(buf, 1, nread, stdout);
    }
        if (ferror(fp)) {
            /* to do: deal with error */
        }
        fclose(fp);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:51:14.677

`fread`已经缓冲数据，即在内部以通常大小为 4K 或 8K 的块读取数据（确切的默认缓冲区大小由实现定义）。出于这个原因，将你的读取从 1K 切换到 4K 没有任何作用，因为它只会减少操作的数量`memcpy`，这些操作足够便宜，不会在高于统计噪声的基准中注册。

要影响`stdio`缓冲区的大小，请查看[`setbuf`](http://en.wikibooks.org/wiki/C_Programming/C_Reference/stdio.h/setvbuf).

此外，您要更改的不是行大小，因为您不是逐行读取文件，而是块大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T09:54:29.880

无论如何，操作系统都会从 HD 读取整个块/[扇区](http://en.wikipedia.org/wiki/Disk_sector)，足以填满一个[页面](http://en.wikipedia.org/wiki/Page_%28computer_memory%29)，然后将其缓存一段时间。
所以读1024还是4096都没关系。一页通常是4096。

如果您想加快速度，请尝试一起阅读几页。例如 8 页。

```
#define PAGE_SIZE 4096
#define betterSIZE 8*PAGE_SIZE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T09:54:59.197

stdio 库本身实现了一个缓冲区 - 因此这两个函数本质上是相同的，它们使用与库实现的相同大小的缓冲区。

# html - Joomla 2.5 / 使用文章标题作为“浏览器页面标题”但不在文章上显示标题

> ID：15290951
> 
> 赞同：1
> 
> 时间：2013-03-08T09:43:17.413
> 
> 标签：html, joomla

本周初，我将一个网站从 Joomla 1.5 迁移到 2.5，我要做的第一件事是禁用页面标题，这样它们就不会出现在顶部的实际文章中。

但是在 Joomla 1.5 上，我将文章标题显示为浏览器页面标题，因此实际的“<标题>”在标题中，而不是在文章内容的顶部。

现在我看到有一种方法可以在“页面显示选项”>“浏览器页面标题”下的每个菜单项下手动设置

但是，是否有一个设置可以自动将文章标题显示为浏览器页面标题，而不是手动输入每个标题，因为对我来说，这违背了首先在文章上放置标题的目的，无论如何对我来说。

希望有人可以提供帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:38:00.997

我在这里找到了解决这个问题的方法：http: [//forum.joomla.org/viewtopic.php?p=2662239#p2661844](http://forum.joomla.org/viewtopic.php?p=2662239#p2661844)

除了我的菜单的“主页”按钮之外，似乎一个模板覆盖似乎可以很好地解决这个问题，我怀疑它与它是一篇特色文章有关。

# google-maps - 更改谷歌地图中的图钉标签？

> ID：15290953
> 
> 赞同：1
> 
> 时间：2013-03-08T09:43:25.527
> 
> 标签：google-maps

如何更改嵌入式谷歌地图中大头针的标签？

我想出了如何将标记更改为我的图标，但我需要重新设置 A、B、C 等的样式，类似于 travelodge 为那里的地图所做的操作[http://www.travelodge.co.uk/hotels/book/edinburgh-酒店](http://www.travelodge.co.uk/hotels/book/edinburgh-hotels)

更新这是成功使用自定义标记的代码：

```
 function addMarker(latlng, myTitle) {
        markers.push(new google.maps.Marker({
            position: latlng, 
            map: map,
            title: myTitle,
            icon: "www.linkto/myPin.png" 
          }));
    } 
```

我已经包含了 markerwithlabel.js 但是这根本不会创建任何标记：

```
 function addMarker(latlng, myTitle) {
        markers.push(new MarkerWithLabel({
            position: latlng, 
            map: map,
            title: myTitle,
            icon: "www.linkto/myPin.png",

            labelContent: "$425K",
            labelAnchor: new google.maps.Point(22, 0),
            labelClass: "labels", 
            labelStyle: {opacity: 0.75}

          }));
    } 
```

这是我要适应的代码：http: [//google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.8/examples/basic.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerwithlabel/1.1.8/examples/basic.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:50:32.067

如果您设法更改了标记图标，那么您**完成了所有工作**。

标记没有标签。travelodge 所做的是它对每个字母都有标记，然后根据搜索结果设置它们。

**编辑：**

似乎有一个特殊的库可以做你想做的事（去“样式标记”）：

[http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#MarkerWithLabel](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#MarkerWithLabel)

要查看代码，请单击“开发版本”，然后单击“示例”，然后查看页面的源代码。这是简单的示例代码：

```
function initialize() {
  var myLatLng = new google.maps.LatLng(37.313477473067, -121.880502070713);
  var myOptions = {
    zoom: 11,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.SATELLITE
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

  var styleMaker2 = new StyledMarker({styleIcon:new StyledIcon(StyledIconTypes.BUBBLE,{color:"ff0000",text:"I'm a marker!"}),position:new google.maps.LatLng(37.383477473067, -121.880502070713),map:map});
  var styleMaker1 = new StyledMarker({styleIcon:new StyledIcon(StyledIconTypes.MARKER,{color:"00ff00",text:"A"}),position:myLatLng,map:map});
  var styleMaker3 = new StyledMarker({styleIcon:new StyledIcon(StyledIconTypes.MARKER,{color:"0000ff"}),position:new google.maps.LatLng(37.263477473067, -121.880502070713),map:map});
} 
```

[您可以在此链接](https://developers.google.com/maps/documentation/javascript/overlays#Markers)上阅读有关标记的更多信息

# typo3 - Extbase 中的图像 - 流体

> ID：15290955
> 
> 赞同：0
> 
> 时间：2013-03-08T09:43:31.700
> 
> 标签：typo3, fluid, extbase

我在 TYPO3 后端有一个标准图像上传，允许上传多个图像。

所以我有一个图像数据库字段，其中包含如下数据：“image1.jpg，image2.jpg”。

在前端，我可以爆炸场，将数组发送到流体，并以流体的形式输出：对于每个这样的：

```
<f:image src="uploads/tx_myext/{image}"  /> 
```

第一个问题是：是否有一些新奇的 Extbase 或 Fluid Magic 可以直接从数据库创建图像对象？

第二个问题：如果我有一个巨大的 2MB 图像并制作一个宽度为 100 的流体：图像输出，它只是在浏览器中缩放，还是真的使用 ImageMagick 缩小了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:33:04.953

### 逗号列表到数组：

不幸的是，正如我在 Extbase 4.7 中看到的，仍然没有用于迭代逗号分隔字符串的 ViewHelper。您有两个选择：编写自定义 ViewHelper 或保持您使用的方式。

提示：为了避免传递额外的参数（特别是当你有许多逗号分隔的字段和/或使用许多`Partials`来呈现视图时）我正在向我的模型添加一个**公共**字段。如果在 TCA 中没有表示，它将被视为*瞬态*，即：

```
/**
 * @var array
 */
public $imagesArray; 
```

然后在分配之前将其填充到控制器中，以便我可以像`{project.imagesArray}`在视图中一样访问它：

```
public function showAction(Tx_Myext_Domain_Model_Project $project) {
    $project->imagesArray = explode(',', $project->getImage());
    $this->view->assign('project', $project);
} 
```

看法

```
<f:for each="{project.imagesArray}" as="image">
    <f:image src="uploads/tx_myext/{image}" width="200" height="200m" alt="" />
</f:for> 
```

很可能您正在使用非常相似的方法...

### 图像大小调整：

最简单的是...检查。`ImageMagick`散列调整大小图像的名称并将其默认存储在 temp 文件夹中，因此如果在代码预览中您看到如下路径：`typo3temp/pics/cd27baa408.jpg`而不是`uploads/tx_myext/photo123.jpg`表示它是使用 IM 转换的。是的，图像`ViewHelper`使用 IM。

您甚至可以通过在 viewhelper 的 phpdoc 中提供值来添加执行简单的计算`width="200m"`：`width="200c"`请*[参阅 imgResource.width 以获取可能的选项](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/1/5/#id551989)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:07:38.167

现在我在 Typo3 Forge 中创建了一个 ViewHelper，因为我认为处理来自数据库的图像会非常有用。

我为 JS Window 添加了 imageLinkWrap。

[http://forge.typo3.org/issues/46218](http://forge.typo3.org/issues/46218)

# sql - 删除 sql 查询中的重复项？

> ID：15290957
> 
> 赞同：0
> 
> 时间：2013-03-08T09:43:37.917
> 
> 标签：sql, oracle

我有以下 sql 查询。我正在使用 oracle 10g。在这里，我将两个查询的结果结合起来。

```
select distinct combined.some_id from (
  SELECT DISTINCT l.some_id FROM tableA l where
        l.some_code  ='ABC' and l.code_two IN('S','H')
        union all  
        SELECT DISTINCT e.some_id FROM tableA_Replica e where
        e.some_code  ='ABC' and e.code_two IN('S','H') and e.some_id NOT IN ( SELECT DISTINCT l.some_id FROM tableA l where
        l.some_code  ='ABC' and l.code_two IN('S','H'))
    ) combined,tableA_Replica_join_table_ONE x where 
        combined.some_id = x.some_id(+)
        AND (x.status   IN('ACTIVE','INACTIVE'))

        UNION

select distinct combined.some_id from (
  SELECT DISTINCT l.some_id FROM tableA l where
        l.some_code  ='ABC' and l.code_two IN('S','H')
        union all  
        SELECT DISTINCT e.some_id FROM tableA_Replica e where
        e.some_code  ='ABC' and e.code_two IN('S','H') and e.some_id NOT IN ( SELECT DISTINCT l.some_id FROM tableA l where
        l.some_code  ='ABC' and l.code_two IN('S','H'))
    ) combined,tableA_Replica_join_table_TWO x where 
        combined.some_id = x.some_id(+)
        AND (x.status   IN('ACTIVE','INACTIVE')) 
```

在下面的两个查询中都很常见。

```
SELECT DISTINCT l.some_id FROM tableA l where
        l.some_code  ='ABC' and l.code_two IN('S','H')
        union all  
        SELECT DISTINCT e.some_id FROM tableA_Replica e where
        e.some_code  ='ABC' and e.code_two IN('S','H') and e.some_id NOT IN ( SELECT DISTINCT l.some_id FROM tableA l where
        l.some_code  ='ABC' and l.code_two IN('S','H')) 
```

如何避免两个查询中的代码重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:53:40.257

这个查询删除了很多重复：

```
select distinct combined.some_id from (
        SELECT distinct l.some_id FROM tableA
           union
        SELECT distinct e.some_id FROM tableA_Replica
    ) combined
    inner join (
        select x.status, x.some_id from tableA_Replica_join_table_ONE x 
             union
        select y.status, y.some_id from tableA_Replica_join_table_TWO y 
    ) join_table
    on combined.some_id = join_table.some_id(+) and
       join_table.status IN('ACTIVE','INACTIVE') and
       combined.some_code  ='ABC' and l.code_two IN('S','H') 
```

什么查询是最好的取决于你的数据结构，总是。

你绝对不需要做的一件事：

```
SELECT DISTINCT l.some_id FROM tableA l where
        l.some_code  ='ABC' and l.code_two IN('S','H')
        union all  
        SELECT DISTINCT e.some_id FROM tableA_Replica e where
        e.some_code  ='ABC' and e.code_two IN('S','H') and e.some_id NOT IN ( SELECT DISTINCT l.some_id FROM tableA l where
        l.some_code  ='ABC' and l.code_two IN('S','H')) 
```

第二个查询中不需要该`NOT IN`子句。只需使用`union`而不是`union all`--it 会自动删除重复项。

另一件要考虑的事情：你`distinct`在很多地方使用。你真的需要所有这些吗？有些人似乎`distinct`到处使用来防止重复。但是，这是低效的，如果您不知道它在做什么，可能会导致细微的错误。

通常，仅`distinct`在您明确决定需要从特定查询中删除重复项时使用。（不看你的数据就不可能知道你是否需要所有这些，但它们的数量之多让我怀疑）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:52:57.727

您可以使用公用表表达式（CTE，有时也称为“WITH 语句”）：

```
WITH combined AS (
    SELECT DISTINCT l.some_id FROM tableA l where
        l.some_code  ='ABC' and l.code_two IN('S','H')
        union all  
        SELECT DISTINCT e.some_id FROM tableA_Replica e where
        e.some_code  ='ABC' and e.code_two IN('S','H') and e.some_id NOT IN ( SELECT DISTINCT l.some_id FROM tableA l where
        l.some_code  ='ABC' and l.code_two IN('S','H'))
)
SELECT distinct combined.some_id
FROM combined, tableA_Replica_join_table_ONE x
WHERE combined.some_id = x.some_id(+)
      AND (x.status   IN('ACTIVE','INACTIVE'))

UNION

SELECT distinct combined.some_id
FROM combined, tableA_Replica_join_table_TWO x
WHERE combined.some_id = x.some_id(+)
      AND (x.status   IN('ACTIVE','INACTIVE')) 
```

# javascript - 在jsp页面中单击按钮后再次设置会话变量

> ID：15290960
> 
> 赞同：0
> 
> 时间：2013-03-08T09:43:42.137
> 
> 标签：javascript, jsp

我正在处理一个 jsp 页面。在设置登录会话后，一切正常。但是在单击按钮后网站中有一个功能，我从 jquery 中获取按钮的值，需要再次设置会话。我怎么做？

如何将会话变量再次设置为存储在`javascript`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:15:12.770

会话在服务器端维护。因此，您不能存储在 Javascript 中。

我的建议是单击按钮，获取值并向服务器（通常是 Servlet）发出 Ajax 请求，并将更新的值存储在会话中。

正如您已经在使用`jQuery`. 你可以做这样的事情。

```
$(document).ready(function(){
  $('#myButton').click(function(){
           sendData();
    });
   });
function sendData(){
   var myVal = $('#myText').val();
    alert(myVal);
    $.ajax({
        type: "POST",
        url: "UtilServlet", // Map your servlet here.
        data: { myVal : myVal  }
      }).done(function( msg ) {
        alert( "Data Saved: " + msg );
      });
} 
```

阅读更多：http: [//javabelazy.blogspot.com/2012/08/jquery-ajax-call-to-servlet-example.html#ixzz2MxBBouHP](http://javabelazy.blogspot.com/2012/08/jquery-ajax-call-to-servlet-example.html#ixzz2MxBBouHP)

# wordpress - 如何通过 RSS 从另一个网站获取新闻

> ID：15290964
> 
> 赞同：1
> 
> 时间：2013-03-08T09:43:53.473
> 
> 标签：wordpress, rss

我有一个博客，我想要一些自动生成的新闻。我找到了一些生成 RSS 提要的新闻网站，我想将它们自动发布到我的博客上。我使用 WP-o-Matic 插件完成了这项工作，但由于 RSS 提要的内容仅限于某个点，整个新闻的文本不会出现在我的博客上。

有没有办法获取 RSS 提要链接到的帖子的全部内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:37:32.000

您将不得不自己编写代码。假设您订阅了 Google 新闻的 RSS 提要。您可以解析他们的提要以获取摘要文章的原始 URL，但随后您将不得不向该 URL 发出请求并获取该页面上的内容。除非来源碰巧通过其自己的 RSS 提要提供整篇文章（不太可能），否则您可能处于标记抓取领域。

必须这样说：考虑在您的网站上复制整个原始内容（而不是摘要片段）的道德/法律影响，即使有适当的归属。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:28:04.573

对于需要解决我描述的问题的人.. 有如下服务：

[http://fulltextrssfeed.com/](http://fulltextrssfeed.com/)

[http://fullrss.net/](http://fullrss.net/)

[http://www.wizardrss.com/](http://www.wizardrss.com/)

您可以使用它们为您完成工作。他们获取 RSS 提要、抓取网站并为您提取完整的文章。之后，他们用提取的数据提供自己的 RSS 提要。您可以将提取的数据（服务为您提供的 RSS 提要）与 WP-o-Matic 之类的 wordpress 插件相结合。这样，插件连接到服务的 RSS 提要，服务从原始 RSS 提要中提取内容。

请记住，这些服务并不完美。由于复杂的网站布局，这些服务可能无法找到内容，或包含不属于文章的内容。建议手动检查输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:35:18.433

对于顶部列出的服务，您还可以查看**[http://www.FeedsAPI.org](http://www.feedsapi.org)**，FeedsAPI 提供了将文章直接发布到您的秘密博客电子邮件的过程，所以您所需要的一切要做的是在 wordpress 管理员中管理出版物，您还可以将其定位到特定的提要以接收您想要的结果。另一种选择是这些服务之一与**IFTTT**的组合。我希望这会有所帮助。

# c#-4.0 - 从匿名对象动态创建对象

> ID：15290965
> 
> 赞同：3
> 
> 时间：2013-03-08T09:44:00.007
> 
> 标签：c#-4.0

使用类型生成器我可以动态创建类型。是否可以从匿名类型执行此操作？

到目前为止我有这个；

```
//CreateType generates a type (so that I can set it's properties once instantiated) from an //anonymous object. I am not interested in the initial value of the properties, just the Type.
 Type t = CreateType(new {Name = "Ben", Age = 23});
 var myObject = Activator.CreateInstance(t); 
```

现在可以使用类型“t”作为类型参数吗？

我的方法：

```
public static void DoSomething<T>() where T : new() 
{
} 
```

我想使用动态创建的类型“t”来调用这个方法。这样我就可以打电话；

```
DoSomething<t>(); //This won't work obviously 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:15:57.363

对的，这是可能的。要将类型用作类型参数，您需要使用[`MakeGenericType`](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)方法：

```
// Of course you'll use CreateType here but this is what compiles for me :)
var anonymous = new { Value = "blah", Number = 1 };
Type anonType = anonymous.GetType();

// Get generic list type
Type listType = typeof(List<>);
Type[] typeParams = new Type[] { anonType };
Type anonListType = listType.MakeGenericType(typeParams);

// Create the list
IList anonList = (IList)Activator.CreateInstance(anonListType);

// create an instance of the anonymous type and add it
var t = Activator.CreateInstance(anonType, "meh", 2); // arguments depending on the constructor, the default anonymous type constructor just takes all properties in their declaration order
anonList.Add(t); 
```

# android - Android 以编程方式声明按钮

> ID：15290967
> 
> 赞同：0
> 
> 时间：2013-03-08T09:44:01.510
> 
> 标签：android, android-layout, android-widget

今晚我在互联网上进行了大量搜索，这就是我想出的。由于某种原因，它不起作用。我没有收到任何错误，我可以验证我的循环实际上正在运行。这是我的代码。

```
TableLayout table = (TableLayout) findViewById(R.id.tablelayout1);
    while (numsounds>0){
        Log.d("MYTAG", ""+numsounds);

        if(numsounds>=3){
            Log.d("MYTAG", ""+numsounds);
            TableRow row = new TableRow(this);
            for (int j = 0; j < 3; j++) {

            int button_num = j + 1 + ( row_num * 3);
            row.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
            buttonparams.height = LayoutParams.MATCH_PARENT;
            int btnwidth = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 1, getResources().getDisplayMetrics());
            buttonparams.width = btnwidth;
            buttonparams.weight = .31f;
            Button btn = new Button(this);
            btn.setLongClickable(true);
            btn.setLayoutParams(buttonparams);
            btn.setText(soundtitleArray[button_num]);
            btn.setId(j + 1 + ( button_num));
            btn.getBackground().setAlpha(150);
            btn.setOnClickListener(buttonClickListener);
            btn.setOnLongClickListener(buttonLongClickListener);
            row.addView(btn);

            }
            numsounds=numsounds-3;
            Log.d("MYTAG", ""+numsounds);
            table.addView(row);
            row_num = row_num+1;
        }
        if(numsounds<3){
            Log.d("MYTAG", ""+numsounds);
            TableRow row = new TableRow(this);
            for (int j = 0; j < numsounds; j++) {

                int button_num = j + 1 + ( row_num * numsounds);
                row.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
                buttonparams.height = LayoutParams.MATCH_PARENT;
                int btnwidth = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 1, getResources().getDisplayMetrics());
                buttonparams.width = btnwidth;
                float btnweight = 1/numsounds;
                buttonparams.weight = btnweight;
                Button btn = new Button(this);
                btn.setLongClickable(true);
                btn.setLayoutParams(buttonparams);
                btn.setText(soundtitleArray[button_num]);
                btn.setId(j + 1 + ( button_num));
                btn.getBackground().setAlpha(150);
                btn.setOnClickListener(buttonClickListener);
                btn.setOnLongClickListener(buttonLongClickListener);
                row.addView(btn);

                }
                table.addView(row);
                row_num = row_num+1;
                numsounds=numsounds-1;
                Log.d("MYTAG", ""+numsounds);
        }
    } 
```

我知道代码正在运行，因为它将数字的变化输出到 logcat。我能弄清楚的是它一直给我一个空白屏幕，只显示我的背景。按钮不显示。

我的进口也如下。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import com.<MYAPP>.SoundBoard;
import com.<MYAPP>.R;
import android.content.ContentValues;
import android.content.Intent;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.provider.MediaStore.Audio.AudioColumns;
import android.util.Log;
import android.util.TypedValue;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnLongClickListener;
import android.widget.Button;
import android.widget.RelativeLayout;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.Toast;
import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;
import android.widget.TableRow.LayoutParams; 
```

我在课程开始时将按钮参数声明为：

```
private TableLayout.LayoutParams buttonparams = new TableLayout.LayoutParams(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:30:08.760

您用于 TableRow 的布局参数应该是 TableRow.LayoutParams，试试

```
TableRow.LayoutParams buttonparams = new TableRow.LayoutParams(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:49:02.317

您可以将此示例用作参考。

```
LinearLayout imageslayout = (LinearLayout)findViewById(R.id.imageslayout);

for (int i = 0; i < 10; i++) {
                Button im = new Button(getApplicationContext());

                TableRow.LayoutParams blp = new TableRow.LayoutParams();
                blp.rightMargin = 20;
                blp.width=170;
                blp.height=140;  
                im.setLayoutParams(blp); 

                imageslayout.addView(im); 
                im.setOnClickListener(this);

            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:52:15.157

通过 buttonParams = new LayoutParams(height,width) 等构造函数设置按钮参数，而不是通过 buttonParams.height = height 等设置。不同之处在于分配不会调用无效，因此维度将为零。

# c++ - 表现得像 unsigned int 溢出。是什么原因造成的？

> ID：15290970
> 
> 赞同：3
> 
> 时间：2013-03-08T09:44:14.707
> 
> 标签：c++, integer, overflow, limit

我有这个函数可以生成指定数量的所谓“三角形数”。如果我打印出双端队列后缀，数字会增加，向下跳，然后再次增加。随着 i 的上升，三角形的数字永远不会变低，所以一定会发生某种溢出。如果结果溢出，我尝试通过添加行`if(toPush > INT_MAX) return i - 1;`来尝试阻止函数生成更多数字（并返回它生成的数字）来修复它。但是，这不起作用，输出仍然不正确（增加一段时间，跳到较低的数字，然后再次增加）。我添加的行实际上似乎根本没有做任何事情。未达到退货。有谁知道这里发生了什么？

```
#include <iostream>
#include <deque>
#include <climits>
int generateTriangleNumbers(std::deque<unsigned int> &triangleNumbers, unsigned int generateCount) {
    for(unsigned int i = 1; i <= generateCount; i++) {
         unsigned int toPush = (i * (i + 1)) / 2;
         if(toPush > INT_MAX) return i - 1;
         triangleNumbers.push_back(toPush);
    }
return generateCount;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:59:03.323

`INT_MAX`是 的最大值`signed int`。`unsigned int`它大约是( )最大值的一半`UINT_MAX`。您的计算`toPush`可能会比`UINT_MAX`您对值的平方高得多（如果它接近`INT_MAX`结果将远远大于`UINT_MAX`您`toPush`可以容纳的值）。在这种情况下，`toPush`环绕并导致值小于前一个值。

首先，你的比较`INT_MAX`是有缺陷的，因为你的类型是`unsigned int`，不是`signed int`。其次，即使是与 的比较`UINT_MAX`也是不正确的，因为它意味着`toPush`（比较表达式的左操作数）可以保持一个高于其最大值的值——这是不可能的。正确的方法是将您生成的数字与前一个数字进行比较。如果它较低，你知道你有一个溢出，你应该停止。

此外，您可能希望使用可以容纳更大范围值的类型（例如`unsigned long long`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:58:22.027

第 92682 个三角形数已经大于`UINT32_MAX`。但这里的罪魁祸首要早得多，在`i * (i + 1)`. 在那里，第 65536 个三角数的计算溢出。如果我们询问 Python 的原生 bignum 支持：

```
>>> 2**16 * (2**16+1) > 0xffffffff
True 
```

哎呀。然后，如果您检查存储的数字，您将看到您的序列回落到低值。为了尝试模仿标准对这种情况的行为的描述，在 Python 中：

```
>>> (int(2**16 * (2**16+1)) % 0xffffffff) >> 1
32768 
```

这就是您将看到的第 65536 个三角形数的值，这是不正确的。

在这里检测溢出的一种方法是确保您生成的数字序列是单调的；也就是说，如果生成的第 N 个三角形数严格大于第 (N-1) 个三角形数。

为避免溢出，您可以使用 64 位变量来生成**和**存储它们，或者如果您需要大量三角形数，则可以使用大数库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:47:23.027

在 Visual C++ `int`（当然`unsigned int`）中，即使在 64 位计算机上也是 32 位。

使用`unsigned long long`或`uint64_t`使用 64 位值。

# ios - UITableView 屏幕图像下载延迟加载

> ID：15290974
> 
> 赞同：2
> 
> 时间：2013-03-08T09:44:21.003
> 
> 标签：ios, objective-c, xcode, uitableview, uiscrollview

首先，这不是重复的。我看到了一些相同的问题，但它们对我没有帮助，因为我的问题略有不同。

使用以下代码，我在我的项目中异步下载图像。

```
{
    NSURL *imageURL = [NSURL URLWithString:imageURLString];
    [self downloadThumbnails:imageURL];
}

- (void) downloadThumbnails:(NSURL *)finalUrl
{
    dispatch_group_async(((RSSChannel *)self.parentParserDelegate).imageDownloadGroup, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        NSData *tempData = [NSData dataWithContentsOfURL:finalUrl];

        dispatch_async(dispatch_get_main_queue(), ^{

            thumbnail = [UIImage imageWithData:tempData];
        });
    });
} 
```

由于程序的逻辑，我在 tableview 控制器以外的文件中使用了上面的代码，它在从 web 服务获取数据后显示所有数据。

**问题：**屏幕上的图像在我滚动之前不会显示。首先刷新离屏图像。我能做些什么来解决我的问题。

Apple 的延迟加载项目正在使用 scrollViewDidEndDragging 和 scrollViewDidEndDecelerating 来加载图像，但该项目太大而无法理解，而且我的代码位于 tableview 控制器以外的文件中。

**注意：**请不要推荐第三方库，如 SDWebImage 等。

**更新：**由于大多数人无法解决问题，我必须澄清这个问题与下载、缓存和重新加载 tableview 中的图像无关。所以请不要推荐第三方库。问题是图像仅在用户滚动表格视图而不是加载屏幕视图时显示。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:47:20.050

我认为你需要做的是：

1.  在下载图像时在表格单元格中显示一些占位符图像（否则您的表格将看起来是空的）；

2.  当下载的图像在那里时，向您的表发送一条刷新消息。

对于 2，您有两种方法：

1.  简单的一个：发送`reloadData`到您的表格视图（并检查您的应用程序的性能）；

2.  向您的表视图发送消息：

    ```
    - (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
    ```

使用`reloadRowsAtIndexPaths`要好得多，但它需要您跟踪哪个图像与哪个表格行相关联。

`NSFetchedResultController`请记住，如果您使用 Core Data 来存储图像，那么通过与表格视图集成，这个工作流程会变得更加容易。[有关示例，请参见此处](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)。

另一种方法是使用 KVO：

1.  在 ItemsViewCell 中声明这个观察方法：

    ```
    - (void)observeValueForKeyPath:(NSString *)keyPath
                  ofObject:(id)object
                    change:(NSDictionary *)change
                   context:(void *)context {

    if ([keyPath isEqual:@"thumbnail"]) {
      UIImage* newImage = [change objectForKey:NSKeyValueChangeNewKey];
      if (newImage != (id)[NSNull null]) {
        self.thumbContainer.image = newImage;
        [self.thumbContainer setNeedsLayout];
      }
    }

    } 
    ```

2.  然后，当您配置单元时，请执行以下操作：

    ```
    RSSItem *item = [[channel items] objectAtIndex:[indexPath row]];
    cell.titleLabel.text = [item title];
    cell.thumbContainer.image = [item thumbnail];

    [item addObserver:cell forKeyPath:@"thumbnail" options:NSKeyValueObservingOptionNew context:NULL]; 
    ```

通过这样做，每当给定的“缩略图”键路径更改`cell`时都会收到通知。`item`

另一个必要的改变是做这样的分配：

```
 self.thumbnail = [UIImage imageWithData:tempData]; 
```

（即，使用`self.`）。

另一个编辑：

> 我想像 Apple 的 LazyTableImages 示例一样下载和加载图像。当它不减速和拖动时，只加载屏幕上的图像，而不是一次加载所有图像。

我怀疑我们在这里讨论的是不同的问题。

我认为您的问题是下载的图像未正确显示（如果您不滚动表格）。这是我从你的问题中了解到的，我的建议解决了这个问题。

至于延迟加载，您正在做的事情（下载整个提要，然后将其作为一个整体存档）与您想要的（延迟加载）之间存在某种不匹配。这两件事不匹配，所以你应该重新考虑你在做什么。

除此之外，如果您想要延迟加载图像，您可以按照以下步骤操作：

1.  不加载图片`parser:foundCDATA:`，只存储图片URL；

2.  开始下载图像`tableView:cellForRowAtIndexPath:`（如果您知道 URL，则可以使用 dataWithContentOfURL ，就像在单独的线程上一样）；

3.  我在上面发布的代码将在图像存在时更新表格；

4.  首先，不要担心滚动/拖动，只需让 1-2-3 工作；

5.  一旦它工作，使用滚动/拖动代理来*防止*在滚动/拖动期间下载图像（第 2 点）；您可以在表格视图中添加标志并 `tableView:cellForRowAtIndexPath:`仅在标志显示“禁止滚动/拖动”时才下载图像。

我希望这足以让您获得最终结果。我不会为此编写代码，因为它非常简单。

PS：如果你懒加载图片，你的提要会在没有图片的情况下存储在磁盘上；您也可以删除 CGD 组和 CGD 等待。正如我所说，没有办法解决这个问题：您不能在进行延迟加载的同时将图像与提要一起存档（除非*每次*获得新图像时都将整个提要存档）。您应该找到另一种缓存图像的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T09:47:49.220

尝试使用[SDWebImage](https://github.com/rs/SDWebImage)，它非常适合在 UITableViews 中使用来自网络的图像并为您处理大部分工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:54:28.487

最好的办法是缓存图像并使用它们。我已经编写了表格视图的代码。 [细胞顶部的图像](https://stackoverflow.com/questions/15267046/image-on-top-of-cell/15268636#15268636) 这是一个很好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:57:08.063

尝试使用此代码下载图像，

```
 - (void) downloadThumbnails:(NSURL *)finalUrl
  {
     NSURLRequest* request = [NSURLRequest requestWithURL:finalUrl];
    [NSURLConnection sendAsynchronousRequest:request 
                     queue:[NSOperationQueue mainQueue]
                     completionHandler:^(NSURLResponse * response,
                     NSData * data, NSError * error)
                    {
                      if (!error)
                       {
                      thumbnail = [UIImage imageWithData:data];

                       }       

   }];
 } 
```

# java - 如何在 Lucene 4 中获取 Lucene 字段的所有术语

> ID：15290980
> 
> 赞同：12
> 
> 时间：2013-03-08T09:44:51.387
> 
> 标签：java, api, lucene

我正在尝试将我的代码从 Lucene 3.4 更新到 4.1。我想出了除了一个之外的变化。我有代码需要遍历一个字段的所有术语值。在 Lucene 3.1 中有一个 IndexReader#terms() 方法提供了一个 TermEnum，我可以对其进行迭代。对于 Lucene 4.1，这似乎已经改变，即使在文档中搜索了几个小时后，我也无法弄清楚如何。有人可以指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:52:55.273

请遵循[Lucene 4 迁移指南](http://lucene.apache.org/core/4_1_0/MIGRATE.html)::

> 您获取枚举的方式已经改变。主要入口点是 `Fields`类。如果您知道您的阅读器是单段阅读器，请执行以下操作：
> 
> ```
> Fields fields = reader.Fields();
> if (fields != null) {
>   ...
> } 
> ```
> 
> 如果读者可能是多段的，你必须这样做：
> 
> ```
> Fields fields = MultiFields.getFields(reader);
> if (fields != null) {
>   ...
> } 
> ```
> 
> `fields`可能是（例如，`null`如果阅读器没有字段）。
> 
> 请注意，该`MultiFields`方法需要对 性能造成影响 `MultiReaders`，因为它必须即时合并术语/文档/位置。如果可以的话，通常最好改为获取顺序阅读器（使用 `oal.util.ReaderUtil`），然后自己逐步浏览这些阅读器（这就是 Lucene 驱动搜索的方式）。
> 
> 如果您将 a 传递`SegmentReader`给`MultiFields.fields`它，它将简单地返回`reader.fields()`，因此在这种情况下不会影响性能。
> 
> 一旦你有一个非空字段，你可以这样做：
> 
> ```
> Terms terms = fields.terms("field");
> if (terms != null) {
>   ...
> } 
> ```
> 
> `terms`可能是（例如，如果该`null`字段不存在）。
> 
> 一旦你有一个非`null`条款，你可以得到一个这样的枚举：
> 
> ```
> TermsEnum termsEnum = terms.iterator(); 
> ```
> 
> 返回的`TermsEnum`不会为空。
> 
> 然后你可以`.next()`通过`TermsEnum`

# javascript - `var { ... } = ...` 语句中的大括号有什么作用？

> ID：15290981
> 
> 赞同：134
> 
> 时间：2013-03-08T09:44:52.323
> 
> 标签：javascript, ecmascript-6, destructuring, javascript-1.7

不确定这是否是 Mozilla 特定的 JS 语法，但我经常发现变量以这种方式声明，例如，在[附加 SDK 文档](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/hotkeys.html)中：

```
var { Hotkey } = require("sdk/hotkeys"); 
```

并在各种 chrome Javascript 中（`let`正在使用语句代替`var`），

```
let { classes: Cc, interfaces: Ci, results: Cr, utils: Cu }  = Components; 
```

我发现它非常令人困惑，但我无法找到关于这两种语法的任何文档，即使在[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)上也是如此。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-03-08T10:44:27.033

What you're looking at is a destructuring assignment. It's a form of [pattern matching](http://learnyouahaskell.com/syntax-in-functions#pattern-matching "Syntax in Functions - Learn You a Haskell for Great Good!") like in Haskell.

Using destructuring assignment you can extract values from objects and arrays and assign them to newly declared variables using the object and array literal syntax. This makes code much more succinct.

For example:

```
var ascii = {
    a: 97,
    b: 98,
    c: 99
};

var {a, b, c} = ascii; 
```

The above code is equivalent to:

```
var ascii = {
    a: 97,
    b: 98,
    c: 99
};

var a = ascii.a;
var b = ascii.b;
var c = ascii.c; 
```

Similarly for arrays:

```
var ascii = [97, 98, 99];

var [a, b, c] = ascii; 
```

This is equivalent to:

```
var ascii = [97, 98, 99];

var a = ascii[0];
var b = ascii[1];
var c = ascii[2]; 
```

You can also extract and rename an object property as follows:

```
var ascii = {
    a: 97,
    b: 98,
    c: 99
};

var {a: A, b: B, c: C} = ascii; 
```

This is equivalent to:

```
var ascii = {
    a: 97,
    b: 98,
    c: 99
};

var A = ascii.a;
var B = ascii.b;
var C = ascii.c; 
```

That's all there is to it.

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2013-03-08T10:09:32.590

它们都是 JavaScript 1.7 的特性。第一个是[**块级变量**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/let)：

> `let`允许您声明变量，将其范围限制为使用它的块、语句或表达式。这与`var`关键字不同，它在全局范围内定义变量，或者在本地定义整个函数，而不管块范围如何。

第二个称为[**解构**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)：

> 解构赋值使得使用反映数组和对象字面量构造的语法从数组或对象中提取数据成为可能。
> ...
> 解构赋值可以做的一件特别有用的事情是在单个语句中读取整个结构，尽管您可以用它们做许多有趣的事情，如以下充满示例的部分所示。

对于熟悉 Python 的人来说，它类似于以下语法：

```
>>> a, (b, c) = (1, (2, 3))
>>> a, b, c
(1, 2, 3) 
```

第一个代码块是以下代码的简写：

```
var {Hotkey: Hotkey} = require("sdk/hotkeys");
// Or
var Hotkey = require("sdk/hotkeys").Hotkey; 
```

您可以将第二个代码块重写为：

```
let Cc = Components.classes;
let Ci = Components.interfaces;
let Cr = Components.results;
let Cu = Components.utils; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-07T12:47:44.843

这是 JavaScript 中的破坏性赋值，是 ES2015 标准的一部分。它将数组中的值或对象的属性解包或提取到不同的变量中。

## 数组解构

### 无需解构

```
var foo = ["one", "two", "three"];
var one = foo[0];
var two = foo[1];
var three = foo[2];

console.log(one, two, three);
```

### 解构

```
var foo = ["one", "two", "three"];
var [one, two, three] = foo;

console.log(one, two, three);
```

## 对象解构

### 无需解构

```
var o = {p: 42, q: true};
var p = o.p;
var q = o.q;

console.log(p); //42
console.log(q); //true 
```

### 随着解构

```
var o = { p: 42, q: true };
var { p, q } = o;

console.log(p); //42
console.log(q); //true
```

**分配新的变量名**

```
var o = { p: 42, q: true };
var { p: foo, q: bar } = o;

console.log(foo); //42
console.log(bar); //true
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:48:24.690

`let`MDN 上有声明的文档： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/let](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/let)

`let`类似于`var`它限制了声明变量的范围。它允许您在块（或其他块）内声明一个变量，`if(){}`并使该变量仅在该块内“可见”（到目前为止，JavaScript 具有函数范围，而不像大多数其他语言那样具有块范围）。因此，`let`对于许多人遇到的问题，这基本上是一个“修复”。请注意，tihs 是 JavaScript 1.7 的一项功能。

上没有找到任何东西`{Foo}`。

# php - PHP 斜线、引号等在变量之间被删除

> ID：15290982
> 
> 赞同：0
> 
> 时间：2013-03-08T09:44:54.553
> 
> 标签：php, html, variables, echo

我不太确定为什么会这样。我查看了 PHP 文档，但找不到我要查找的内容，这很可能是由于对必要术语的了解不足。

```
<?php echo $variable_x; ?>

<div style="background-image: url("photo.png"); width: 100px; height: 100px; display: block;"></div>

<?php echo $variable_y; ?> 
```

在我将标记放在两个 PHP 变量之间的页面上，它通过删除引号、斜杠等来破坏所有标记。我不知道为什么。我环顾四周，看看是否有某种方法可以“结束” PHP 语句，因为我认为这就是原因。

任何人都可以识别问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:47:12.493

您已经用双引号包围了样式，从背景更改引号或删除它们：

```
<div style="background-image: url(photo.png); width: 100px; height: 100px; display: block;"></div> 
```

添加它们会破坏您的样式，因为样式以与它开始的相同类型的引号结尾，其余代码会中断。

或者，您可以添加一个类并将 CSS 移到外部文件中的 HTML 之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:50:30.020

在 div 的样式属性中，背景图像中的 url 再次带有双引号。用这个-

```
<div style="background-image: url('photo.png'); width: 100px; height: 100px; display: block;"> 
```

或这个-

```
<div style='background-image: url("photo.png"); width: 100px; height: 100px; display: block;'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:50:37.463

→ 当你这样做时会发生什么：

```
<?php echo $variable_x; ?>

<?php echo '<div style="background-image: url(\'photo.png\'); width: 100px; height: 100px; display: block;"></div>'; ?>

<?php echo $variable_y; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T09:53:18.680

```
 <div style="background-image: url("photo.png"); width: 100px; height: 100px; display: block;"></div> 
```

这是一个解析器杀手。如果您以双引号开头，请使内部字符串引用单引号或反向...这里有两个更正版本：

```
 <div style="background-image: url('photo.png'); width: 100px; height: 100px; display: block;"></div> 
```

或者

```
 <div style='background-image: url("photo.png"); width: 100px; height: 100px; display: block;'></div> 
```

希望这可以帮助...

# java - SOAP Web 服务回调架构？

> ID：15290984
> 
> 赞同：22
> 
> 时间：2013-03-08T09:45:31.267
> 
> 标签：java, .net, web-services, callback, jax-ws

我对 Web 服务、JAX-WS 等还是很陌生，所以可能是菜鸟问题......

因此，我想实现一个 Web 服务来使两个系统进行通信。“客户端”系统对“服务器”系统上生成的事件感兴趣。但是“客户端系统”本​​身就是不同应用程序的服务器。服务器是 Java（tomcat 中的 WAR）。客户端是.Net。

应该只有一个客户端系统，但客户端系统内有多个客户端进程，每个进程都对不同类别的事件感兴趣。

我将实现服务器端和测试客户端。其他人将实现 .Net 代码。

运行顺序应该沿着这条线：

1.  服务器正在运行...
2.  客户端发起对话，向服务器“注册”，并请求一些初始数据。
3.  服务器保留已注册客户端的端点列表
4.  在服务器中有一个监听器，当某些事件发生时会收到通知。然后它将遍历注册客户列表并将事件转发给每个客户
5.  在某些时候，客户端可以“取消注册”而不通知服务器它不想再接收事件。

首先，这听起来像是合理可行的吗？

并且是否有一个标准的内置机制，使用 SOAP（服务器上的 JAX-WS，无论客户端上的 .Net 是否可用）——服务器可以使用它从客户端获取回调端点？

例如，我使用 RMI 做了一些非常类似的事情，在这种情况下，客户端可以只发送一个远程引用给自己，服务器可以稍后存储 ant 引用。

最后，是否有一个标准库来存储端点引用，进行（集体）回调，并可能使列表保持最新，删除不响应的客户端所以一些“ping”调用？

为清楚起见：我需要的不仅仅是带有回调的异步方法：来自客户端的一条消息将生成从服务器到客户端的许多回调消息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T05:52:48.710

似乎您希望实现通知工具来通知任意匿名客户。

我建议您首先考虑如何使用 SOAP 消息传递信息。然后您可以考虑如何使用 java - JAX-WS 或其他非标准库来实现这一点。关键是传输 SOAP 消息可能需要很大的限制或假设。例如，防火墙可能会阻止您的 HTTP 消息，客户端可能“只是客户端”，无法充当服务器角色来接收 SOAP 通知请求

注意：在 JAX-WS 2.0 中定义了异步回调机制，其中服务获取客户端的端点引用。这与 Deepak Bala 描述的 WebLogic/Fusion 专有解决方案提供的功能相同。Websphere 有一个类似的专有异步解决方案。这些都不符合您的要求，因为它们只允许每个请求一个响应。

SOAP 选项：

1.  专有 SOAP 消息——“100% 自己动手”

    您设计完整的 SOAP 有效负载模式和消息交换模式。

    如果您知道客户端的 SOAP 端点地址，则可以将通知从服务器推送到客户端。客户端可以在原始 SOAP 请求负载中传输其 SOAP 端点地址。稍后，服务器可以向客户端发送 SOAP 请求。

    问题/假设：（1）从服务器到客户端的请求需要一个 SOAP/HTTP 通信路径——当存在防火墙时不能保证；(2) 客户端需要知道你的通知模式——实际上客户端需要充当服务端点来接收 SOAP 通知请求。如果您试图支持任意匿名客户端，那么这是两个重要的假设——这不是 SOAP“只支持”的东西，两端都需要详细设计所有这些。实际上，要以服务类型安全的方式执行此操作，客户端实际上应该声明它自己的服务 WSDL 接口，以便您可以调用它。(3) 如前所述，许多客户端“只是客户端”——它们可能没有 HTTP 服务器来接受 SOAP 请求。

    因此，要使专有的“推送”通知起作用，双方都需要服务器并且都需要发布他们的 SOA 接口。

    或者，您可以将通知拉到客户端。客户端可以使用阻塞或轮询的通知请求到服务器。服务器可以用通知或任何内容或错误来响应。

    问题/假设： (1) HTTP 服务器（即 SOAP 服务器）通常不支持阻塞请求，这意味着您必须轮询；(2) 客户端需要知道你的通知模式——实际上客户端需要充当服务端点来接收 SOAP 通知请求。对于任意匿名客户端来说，这是两个非常大的假设——这不是 SOAP“只支持”的东西，两端都需要详细设计所有这些。实际上，要以服务类型安全的方式执行此操作，客户端实际上应该声明它自己的服务 WSDL 接口，以便您可以调用它。

2.  与上面相同，但在 SOAP 标头中包含 WS-addressing 数据以通知对方端点地址的任何一方。

    与第一个选项基本相同的问题/假设。WS 寻址地址将帮助您智能地将 SOAP 消息路由到正确的 URL 地址，但仅此而已。

3.  使用 WS 通知

    此规范专为您的场景而设计。
    WS-BaseNotification 子标准将满足您的需求。它为通知生产者和消费者提供 WSDL 端口定义。它为从消费者到生产者的订阅以及从生产者到消费者的通知提供了一个符合 WS 标准的解决方案。

    问题/限制： (1) 它没有定义通知负载的格式。通知负载是特定于应用程序域的（专有设计）。该标准没有定义任何“标准”或“内置”通知情况或消息。(2) HTTP 通知通过防火墙也有同样的问题。(3) WS-Notification 不是 Java EE/JAX-WS 支持的标准（但是有很多应用服务器，开源的和商业的，都支持它作为扩展）。

4.  使用将流量封装在 HTTP 中的消息队列解决方案（例如 JMS） 这需要对在客户端和服务器之间传递的有效负载进行专有设计，并在双方之间重新形成合同。一个优点是客户端可以是纯客户端，在接收到消息时在线程中调用消息侦听器。

    问题/限制： (1) HTTP 通知通过防火墙时也存在上述问题。(2) 是自己动手的实现。(3) 使用比您目前使用的更多的技术。

最终结果：
您需要至少部分解决方案是专有设计——SOAP/WS 标准不能满足您的全部要求。从理论上讲，这种专有设计可以利用产品来提供大部分工作，但通知模式设计需要由您创建和集成。

如果您希望推送通知，您需要*某种*合同来将通知传递给客户端，客户端需要充当 SOA 服务器，并且您需要为您的流量打开防火墙。大多数公司不允许 HTTP 请求离开服务器并传递给客户端 - 通常你需要一个非常好的理由来打开防火墙端口，即使这样，许多公司也会不允许它......

如果您希望客户端轮询通知，您只需要在服务器端有一个可以被客户端频繁调用的基本 WSDL 接口。

未来选项：HTML5 Web Sockets
如果您的客户端是 HTML5 应用程序，那么启用 Web 套接字的服务器可以将流量推送到浏览器 - 并且公司有可能会打开防火墙。SOAP 消息可以通过 HTTP Web 套接字传输，使您能够推送通知。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T09:34:47.840

[通过使用轮询和回调](http://jax-ws.java.net/nonav/2.2.5/docs/asynch.html)，异步客户端支持基于 WSDL 的服务。在你的情况下，我认为要求相对更复杂。

Oracle 融合中间件[文档页面](http://docs.oracle.com/cd/E14571_01/web.1111/e15184/asynch.htm)概述了一个可以帮助您的方案。它详细介绍了一种方法，该方法允许客户端发送生成 HTTP 202（已接受）的请求，然后客户端等待消息队列上的响应。在您的情况下，可以从下面显示的场景中调整场景。

![客户端回调](../Images/6565973561e4b4df69a50278becf7223.png)

为每个回调类别启动多个响应队列。客户端可以通过为队列提供客户端和类别 ID 来过滤它们。这将作为每个客户端或每个客户端下管理的进程的回调机制。MDB 可以由文件存储或数据库存储支持，以确保可靠性和一次性交付。

当然，您不需要 Oracle fusionware 来实现这一点。您可以使用 RabbitMQ 或 Redis（带有事务）来确认在客户端收到消息。如果您的客户希望取消注册，请拨打电话并停止收听队列。

我不知道任何适合您的场景的行业标准，但我相信这个解决方案应该适合您。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-13T17:36:15.653

您是否考虑过使用消息传递产品更简单的“发布-订阅”方法？（如 MQ、EMS 或 ActiveMQ）

您描述的要求似乎不适合“经典”请求/回复同步/异步 SOAP Web 服务场景。

在 Pub/Sub 解决方案中，客户端订阅一个主题一次，发布者（在您的情况下为服务器）可以向所有订阅者发布任意数量的相关消息。

作为奖励，大多数消息传递产品都支持“持久订阅者”，因此客户端有时可以离线并在重新连接后接收所有消息。

在您的情况下，服务器可以容纳一个（免费）ActiveMQ 服务器......提供您似乎寻求的大部分功能。

如果您这样做，我建议您选择支持 .Net 的兼容 JMS 的产品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-21T06:20:16.930

对于那些从搜索引擎来到这里的人：

您现在可以将 WebHook 用于 Web API，其工作原理基本上与 OP 描述的一样。

例如，在 REST 中，客户端本身将有一个 HTTP 端点，专门用于接收来自实际服务器的 POST 事件/通知。客户端通过在他的通知端点上给它一个 URI 来向实际服务器注册他的端点。从那时起，实际的服务器可以 POST 到客户端的通知端点。如果您熟悉异步术语，它本质上是一个复杂的回调。

也许 Java 或 .Net 现在已经有了 WebHooks 库。

也就是说，SSE 和 Websockets 标准提供实际推送和实时消息，同时与 HTTP 和大多数浏览器兼容。

过去也使用长轮询变体，现在有时将彗星称为聚合。

# python - BeautifulSoup 没有读取格式错误的 html

> ID：15290991
> 
> 赞同：1
> 
> 时间：2013-03-08T09:46:05.567
> 
> 标签：python, beautifulsoup

我正在学习 BeautifulSoup。它没有正确阅读某些网站。我发现原因是一些 html 属性格式不正确。例如：

```
from bs4 import BeautifulSoup

html = """
        <html>
        <head><title>Test</title></head>
        <body>
        <p id="paraone"align="center">some content <b>para1</b>.<!--there is no space before 'align' attribute -->
        <p id="paratwo" align="blah">some content <b>para2</b>
        </html>
    """
soup = BeautifulSoup(html)
print "soup:", soup 
```

我认为 BeautifulSoup 旨在不阅读格式错误的 html。如果是这样，是否有任何其他模块可以读取上述给定的 html？我们不能解析格式错误的网站吗？

# javascript - 如何根据从 -date 到 to-date 生成网格结果？

> ID：15290994
> 
> 赞同：0
> 
> 时间：2013-03-08T09:46:27.223
> 
> 标签：javascript, kendo-ui

在我的项目中，我有一个网格和两个日期时间选择器，基于这两个（选择从和到日期），在网格中显示相关的日期行，这里是 jsbin [http://jsbin.com/exakic/14/edit](http://jsbin.com/exakic/14/edit)

请有人帮帮我

我尝试过的代码是：

```
 $(function() {
        $.datetimepicker.setDefaults({ dateFormat: "dd/mm/yy" });
      $("#datetimepicker, #datetimepicker1") .kendoDatetimePicker() .on('input keyup         change', filter);
     });

  function filter(){
  $('tr').show();
  var datefields = $('grid');
  datefields.each(function(){
   var evdate = pdate($(this).html());
   var mindate = pdate($('#datetimepicker').val());
   if (mindate)
   if (evdate < mindate)
    $(this).parent().hide();
    var maxdate = pdate($('#datetimepicker1').val());
    if (maxdate)
        if (evdate > maxdate)
            $(this).parent().hide();
  });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:50:48.927

要过滤范围内的数据，您可以通过添加[`dataSource.filter`](http://docs.kendoui.com/api/framework/datasource#filter)到您的`filter`函数来做到这一点：

```
var filter = {
    logic  : "and",
    filters: [
        { field: "OrderDate", operator: "ge", value: mindate },
        { field: "OrderDate", operator: "le", value: maxdate }
    ]
};
grid.dataSource.filter(filter); 
```

**注意**：您可以使用以下方法简化从输入字段读取日期值：

```
var mindate = $('#datetimepicker').data("kendoDatePicker").value();
var maxdate = $('#datetimepicker1').data("kendoDatePicker").value(); 
```