# StackOverflow 问答 14521000-14521999

# sql-server - MVC4：UserIsInRole - 无法连接到 SQL Server 数据库

> ID：14521003
> 
> 赞同：13
> 
> 时间：2013-01-25T11:35:18.907
> 
> 标签：sql-server, asp.net-mvc, roleprovider

用这个打破我的头，昨天它工作得很好，今天它似乎被打破了：

此行正在生成错误：

```
@if (Roles.IsUserInRole(HttpContext.Current.User.Identity.Name, "Admin")) 
```

错误是：无法连接到 SQL Server 数据库。

整个例外：

```
System.Web.HttpException was unhandled by user code
  HResult=-2147467259
  Message=Unable to connect to SQL Server database.
  Source=System.Web
  ErrorCode=-2147467259
  WebEventCode=0
  StackTrace:
       at System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile(String fullFileName, String dataDir, String connectionString)
       at System.Web.DataAccess.SqlConnectionHelper.EnsureDBFile(String connectionString)
       at System.Web.DataAccess.SqlConnectionHelper.GetConnection(String connectionString, Boolean revertImpersonation)
       at System.Web.Security.SqlRoleProvider.GetRolesForUser(String username)
       at WebMatrix.WebData.SimpleRoleProvider.GetRolesForUser(String username)
       at System.Web.Security.RolePrincipal.IsInRole(String role)
       at System.Web.Security.Roles.IsUserInRole(String username, String roleName)
       at ASP._Page_Views_Shared__LoginPartial_cshtml.Execute() in e:\LeasingWeb\LeasingWeb\Views\Shared\_LoginPartial.cshtml:line 10
       at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
       at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
       at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
       at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
       at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
       at System.Web.Mvc.HtmlHelper.RenderPartialInternal(String partialViewName, ViewDataDictionary viewData, Object model, TextWriter writer, ViewEngineCollection viewEngineCollection)
       at System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName, Object model, ViewDataDictionary viewData)
       at System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName)
       at ASP._Page_Views_Shared__Layout_cshtml.Execute() in e:\LeasingWeb\LeasingWeb\Views\Shared\_Layout.cshtml:line 35
       at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
       at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
       at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
       at System.Web.WebPages.WebPageBase.<>c__DisplayClass7.<RenderPageCore>b__6(TextWriter writer)
       at System.Web.WebPages.HelperResult.WriteTo(TextWriter writer)
       at System.Web.WebPages.WebPageBase.Write(HelperResult result)
       at System.Web.WebPages.WebPageBase.RenderSurrounding(String partialViewName, Action`1 body)
       at System.Web.WebPages.WebPageBase.PopContext()
       at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
       at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
       at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
       at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
       at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
  InnerException: System.Web.HttpException
       HResult=-2147467259
       Message=Unable to connect to SQL Server database.
       Source=System.Web
       ErrorCode=-2147467259
       WebEventCode=0
       StackTrace:
            at System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString)
            at System.Web.Management.SqlServices.SetupApplicationServices(String server, String user, String password, Boolean trusted, String connectionString, String database, String dbFileName, SqlFeatures features, Boolean install)
            at System.Web.Management.SqlServices.Install(String database, String dbFileName, String connectionString)
            at System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile(String fullFileName, String dataDir, String connectionString)
       InnerException: System.Data.SqlClient.SqlException
            HResult=-2146232060
            Message=A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
            Source=.Net SqlClient Data Provider
            ErrorCode=-2146232060
            Class=20
            LineNumber=0
            Number=-1
            Server=""
            State=0
            StackTrace:
                 at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
                 at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
                 at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover)
                 at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
                 at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
                 at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
                 at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions)
                 at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
                 at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
                 at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
                 at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
                 at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
                 at System.Data.SqlClient.SqlConnection.Open()
                 at System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString)
            InnerException: 
```

正如我所说，这几天来一直运行良好，我一直在使用创建新 MVC4 项目时创建的默认用户数据库。

网络配置：

```
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-LeasingWeb-20130113013313;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-LeasingWeb-20130113013313.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

客户端错误：

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. 
The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. 
(provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
```

数据库表看起来不错，用户和角色存在并且和以前一样。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-25T15:55:48.153

添加这个：

```
[InitializeSimpleMembership] 
```

到 HomeController 的顶部修复了该问题。

[属性说明](http://web.archive.org/web/20131007082131/http://blogs.msdn.com/b/rickandy/archive/2012/08/15/initializesimplemembership-attribute-and-simplemembership-exceptions.aspx)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-21T11:35:35.267

对于我的用例，在 web.config 文件中添加以下行修复了它！

```
<appSettings>
  <add key="enableSimpleMembership" value="false"/>
</appSettings> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-12T11:45:26.890

我发现使用`UserManager.IsInRole(User.Identity.GetUserId(), "Admin")`解决了我的问题。干杯

# c++ - Ubuntu 12.10 中的 wxTaskBarIcon

> ID：14521006
> 
> 赞同：5
> 
> 时间：2013-01-25T11:35:33.270
> 
> 标签：c++, wxwidgets, ubuntu-12.10

我在 Ubuntu 12.10 下构建了 wxWidgets 2.9.3（目前我必须坚持这个版本），我似乎无法使用`wxTaskBarIcon`类。wxWidgets 提供的示例正在编译和运行，但图标本身并未显示在任务栏本身上。我检查了我的配置，我知道，wxWidgets 库的编译是使用默认设置执行的（对于任务栏支持来说是“是”）。

知道如何使它工作吗？这个问题与 wxWidgets 和/或 Ubuntu 版本有关吗？

编辑：绝对没有连接到 wxWidgets 版本（在 wx 2.8、2.9.3、2.9.4 下检查）。

编辑 2：如果重要：系统在 VirtualBox 4.2.6 上，安装时使用所有默认设置。我每周至少安装一次更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T08:42:43.557

在 Ubuntu 下，自 11.04 以来任务栏由 Unity 管理，默认情况下不允许所有程序将其图标放在那里。您必须将您的应用程序列入白名单才能访问任务栏。这是我最初找到答案的地方：

[http://ubuntuforums.org/showthread.php?t=1737589](http://ubuntuforums.org/showthread.php?t=1737589)

基本上你必须打电话：

```
gsettings set com.canonical.Unity.Panel systray-whitelist "['JavaEmbeddedFrame', 'Mumble', 'Wine', 'Skype', 'YOUR_APPLICATION']" 
```

然后注销，登录。这会将 YOUR_APPLICATION 添加到 Unity.Panel 白名单中。请记住，在这种情况下，您还必须事先列出该列表中的项目。您可以通过调用以下方式检查白名单的外观：

```
gsettings get com.canonical.Unity.Panel systray-whitelist 
```

就我而言（因为我正在开发环境中），我只是将其设置为`"['all']"`. 这将允许所有应用程序访问任务栏。

请记住，Ubuntu 将放弃此类支持，将来您应该使用 AppIndicator 库来实现该目标。这意味着，除非它使用 AppIndicator 库，否则即使使用白名单 wxTaskBarIcon 也不会工作。

来源：[http ://www.webupd8.org/2013/02/unity-notification-area-systray.html](http://www.webupd8.org/2013/02/unity-notification-area-systray.html)

# jquery - HTML5 显示上传的图像直到下一张上传？

> ID：14521015
> 
> 赞同：2
> 
> 时间：2013-01-25T11:35:52.857
> 
> 标签：jquery, image, html, upload, storage

我不确定是否应该为此使用 HTML5 存储。我的问题是关于如何完成以下任务：

想一想博物馆里的一堵墙，框架是空的。我希望用户从他或她的计算机上传图像。该图像将显示在墙上的框架中（一个 div）。如果用户想要查看另一张图片，可以“移除”前一张图片并显示下一张。

下面的小提琴是一个 html5 存储的示例，但它存储了多个图像。我只想在上传另一张图片时替换一张图片。刷新页面时也不需要存储。它只是显示图像以查看其外观。

**[JsFiddle](http://jsfiddle.net/DFT78/)** (HTML5rocks)

毕竟你会建议我 HTML5 存储吗？或者我可以用 jQuery 做到这一点吗？先感谢您！

**代码**

```
<style>
  .thumb {
    height: 75px;
    border: 1px solid #000;
    margin: 10px 5px 0 0;
  }
</style>

<input type="file" id="files" name="files[]" multiple />
<output id="list"></output>

<script>
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

      // Only process image files.
      if (!f.type.match('image.*')) {
        continue;
      }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var span = document.createElement('span');
          span.innerHTML = ['<img class="thumb" src="', e.target.result,
                            '" title="', escape(theFile.name), '"/>'].join('');
          document.getElementById('list').insertBefore(span, null);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:24:28.613

只需更改该部分：

```
 reader.onload = (function(theFile) {
        return function(e) {
          document.getElementById('list').innerHTML = ['<img class="thumb" src="', 
          e.target.result,'" title="', escape(theFile.name), '"/>'].join('');
    };
  })(f); 
```

[http://jsfiddle.net/camus/SK3gC/](http://jsfiddle.net/camus/SK3gC/)

# ipad - iPad 应用程序在设备上崩溃

> ID：14521019
> 
> 赞同：0
> 
> 时间：2013-01-25T11:36:06.097
> 
> 标签：ipad, uitableview, ios4

我正在为 iPad 开发一个应用程序，其中包含`UITableView`. 该应用程序在模拟器上运行良好，但在安装并第一次运行时会在设备上崩溃。当我第二次尝试运行该应用程序时，它工作正常。我无法弄清楚问题所在。相同的代码在 iPhone 上运行良好，但在 iPad 上崩溃。我正在为表格使用以下代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *MythoViewCellIdentifier = @"MythoViewCellIdentifier ";

UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:MythoViewCellIdentifier];

if (cell==nil)
{
    cell=[[[UITableViewCell alloc] initWithFrame:CGRectZero] autorelease];        
}

[self getMythoData];

UIImageView *imgLogo =[[UIImageView alloc] initWithFrame:CGRectMake(-1,0,37,35)];
imgLogo.backgroundColor =[UIColor clearColor];
imgLogo.image=[UIImage imageNamed:@"bullet_swastik.png"];
[cell.contentView addSubview:imgLogo];

UITextView *txtDetails =[[UITextView alloc] initWithFrame:CGRectMake(37,34,740,200)];
txtDetails.backgroundColor =[UIColor clearColor];
txtDetails.editable=NO;
txtDetails.font=[UIFont systemFontOfSize:25.0];
[cell.contentView addSubview:txtDetails];

//    adding details to the cell
txtDetails.text = [NSString stringWithFormat:@"%@",[FinalmythoData objectAtIndex:indexPath.row]];
cell.selectionStyle = UITableViewCellSelectionStyleNone;

[txtDetails release];

return cell;
}

 I'm getting the following error

Exception Type:  EXC_BAD_ACCESS (SIGSEGV) Exception Codes:
KERN_INVALID_ADDRESS at 0x00000000 Crashed Thread:  0

    Thanks 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:49:25.457

> 该应用程序在模拟器上运行良好，但在安装并第一次运行时会在设备上崩溃。当我尝试第二次运行该应用程序时，它工作正常。

从您的模拟器中删除应用程序，清理您的项目，重建并再次运行该应用程序。它也有可能在模拟器上崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:48:50.580

确认您的应用没有加载任何可能导致崩溃的繁重数据（图像等）。

在设备上运行您的应用程序，并使用 Instrument 或任何其他工具确认它没有在低内存下运行。

# ruby - 从 FileUtils.remove_dir() 获取错误

> ID：14521028
> 
> 赞同：0
> 
> 时间：2013-01-25T11:36:19.313
> 
> 标签：ruby

我写了下面的代码，以满足我的一些要求：

```
src = "E:\\Download"
dest = "E:\\Scripts\\original"  #"E:\WIPData\Ruby\Scripts\"

FileUtils.copy_entry(src, dest, preserve = false, dereference_root = false, remove_destination = false)
FileUtils.remove_dir(src , force = false) 
```

但是 10 次中有 4 次出现以下错误。无法理解为什么我会收到这样的错误：

***错误***

```
C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1406:in `unlink': Permission denied - 
E:\\Download/BASIC USES OF THE ENGLISH TENSES.pdf.pa
rt (Errno::EACCES)
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1406:in `block in remove_fil
e'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1414:in `platform_support'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1405:in `remove_file'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:1394:in `remove'
        from C:/Ruby193/lib/ruby/1.9.1/fileutils.rb:770:in `block in remove_entr
y' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:45:32.557

It looks like you're trying to remove your src directory, but you do not have filesystem permissions to do so.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T03:22:35.723

你是双击脚本还是从 cmd/cygwin 运行它？如果您通过双击运行脚本，您可以尝试右键单击您的脚本并单击“以管理员身份运行”；它可能会修复权限错误。

# php - Zend 框架和 pthreads 库实现

> ID：14521042
> 
> 赞同：0
> 
> 时间：2013-01-25T11:37:11.170
> 
> 标签：php, zend-framework, pthreads

我在 Zend Framework 项目中使用 pthreads ( [http://php.net/manual/en/book.pthreads.php](http://php.net/manual/en/book.pthreads.php) ) 库。问题是新线程使用与整个 ZF 初始化不同的内存范围。所以从线程范围我无法达到 Zend Framework 的功能。所以我需要在每个线程调用中加载（初始化）整个 Zend 框架。但我不知道如何正确地做到这一点......我已经在做什么（线程中的 ZF 初始化）以及实际上对我不起作用的事情：

```
<?php

// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'development'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
); 
```

那么有什么想法吗？有没有正确加载整个 ZF 的例子？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:48:22.390

线程位于不同的地址空间中。但是，当您创建 Thread 您的环境时，就已加载的类（而不是对象）、函数、声明的常量和 ini 条目而言，新上下文是重复的。

代表您的应用程序的对象似乎是一个标准对象，应该是简单地将其设置为线程成员将使您的应用程序对象可用于线程上下文的情况。我不能说这是否是正确的做法，在每个线程中加载整个应用程序似乎没有用，我想你想加载框架的一个实例，但针对不同的任务对其进行不同的配置。

这是线程上下文中可用的 ZF2 的工作示例，正如我所说，我对框架一无所知，但它可能会有所帮助。

```
<?php
use Zend\Loader\StandardAutoloader;
use Zend\Feed\Reader\Reader;
use Zend\Debug\Debug;

require_once 'Zend/library/Zend/Loader/StandardAutoloader.php';
$loader = new StandardAutoloader(array('autoregister_zf' => true));
$loader->register();

class T extends Thread {
    public function __construct($loader) {
        $this->loader = $loader;
    }

    public function run() {
        $this->loader->register();

        printf(
            "Executing Thread with ZF2 Loaded (%s)\n", Debug::getSapi() 
        );

        var_dump ($this->loader);
    }
}

$t = new T($loader);
$t->start();
?> 
```

# php - 按日期和值分组

> ID：14521043
> 
> 赞同：1
> 
> 时间：2013-01-25T11:37:34.657
> 
> 标签：php, mysql

我在一个名为的表中有 4 列`articles`：created_at、文章、关键字和类别

我有这个查询来分析数据：

```
SELECT DATE(`created_at`) AS date, COUNT(1) AS articles 
FROM articles 
WHERE `keyword`='keyword1' 
GROUP BY DATE(`created_at`) 
```

这将返回一个关键字每天的文章总数。

我想有一个总数，然后将其分解并将文章分类为或`cat1`每个关键字。所以给一个这样的表：`cat2``cat3`

```
|date|keyword|articles|cat1|cat2|cat3| 
```

我似乎无法做到这一点，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:54:31.050

```
select 
DATE(`created_at`),
keyword,
count(*) as TotalCount,
SUM (case when Category = Cat1 then 1 else 0 end) as Cat1Count,
SUM (case when Category = Cat2 then 1 else 0 end) as Cat2Count,
SUM (case when Category = Cat3 then 1 else 0 end) as Cat3Count

from articles
group by DATE(`created_at`), keyword
order by DATE(`created_at`), keyword 
```

# django - 如何在电子邮件正文中发送日志信息？

> ID：14521045
> 
> 赞同：1
> 
> 时间：2013-01-25T11:37:39.760
> 
> 标签：django

我正在使用 Django 日志记录。以下是我当前调用 Django 日志记录的方式。

```
logger = logging.getLogger(__name__)
.
.
.
logger.info("Database results") 
```

下面是来自 settings.py 文件的我的 Django 日志记录配置。

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'formatters': {
        'default': {
            'format': '[%(asctime)s] %(levelname)s:%(message)s'
        },
    },
    'handlers': {
        'email_admins': {
            'level': 'INFO',
            'class': 'django.utils.log.AdminEmailHandler',
            'include_html': False,
        },
        'admin_console': {
            'level':'DEBUG',
            'class':'logging.StreamHandler',
            'formatter': 'default'
        },
        'null': {
            'level':'DEBUG',
            'class':'django.utils.log.NullHandler',
            'formatter': 'default',
        },
        'file_handler': {
            'level': 'DEBUG',
            'formatter':'default',
            'class': 'logging.handlers.TimedRotatingFileHandler',
            'filename':'logs/prj_log',
            'when':'midnight',
            'interval':1,
        },
        'request_handler': {
                'level':'ERROR',
                'class':'logging.handlers.RotatingFileHandler',
                'filename': 'logs/django_request.log',
                'maxBytes': 1024*1024*5, # 5 MB
                'backupCount': 5,
                'formatter':'default',
        },
    },
    'loggers': {
        '': {
            'handlers': ['email_admins', 'file_handler', 'admin_console'],
            'level': 'DEBUG',
            'propagate': True,
        },
        'django': {
            'handlers':['null'],
            'propagate': True,
            'level':'INFO',
        },
        'django.request': { 
            'handlers': ['email_admins', 'request_handler'],
            'level': 'ERROR',
            'propagate': False,
        },
    }
} 
```

我收到一封以`Database results`主题为主题的电子邮件。如何在电子邮件正文中添加更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:18:59.290

django.utils.log.AdminEmailHandler 仅将堆栈跟踪记录为电子邮件消息（有关更多详细信息，请参阅处理程序代码）。因此，如果您想在信息级别记录某些内容，您需要编写自己的处理程序来发送电子邮件。

即使使用自定义处理程序，您也不能一次记录两个参数（例如主题和消息文本）。由于您可能想要记录序列化对象，因此您必须对主题进行硬编码

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T01:04:07.700

```
LOGGING = {
'version': 1,
'disable_existing_loggers': False,
'filters': {
    'require_debug_false': {
        '()': 'django.utils.log.RequireDebugFalse'
    }
},
'handlers': {
    'mail_admins': {
        'level': 'ERROR',
        'filters': ['require_debug_false'],
        'class': 'django.utils.log.AdminEmailHandler'
    }
},
'loggers': {
    'django.request': {
        'handlers': ['mail_admins'],
        'level': 'ERROR',
        'propagate': True,
        },
    }
} 
```

# c++ - 获取对 const QString 的引用

> ID：14521052
> 
> 赞同：0
> 
> 时间：2013-01-25T11:38:02.777
> 
> 标签：c++, qt

我正在尝试获取`const QString &a`对我的函数之外的引用，即

```
void function(const QString &a)
{
    //code
}

void otherFunction()
{
    // code <<<<< 
    // I'm unsure how I would be able to get a reference to 
    // const QString &a here and use it. 
} 
```

我怎样才能获得对`a`in的引用`otherFunction`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:40:32.920

这是不可能的：在 中，`function()`参数的**范围**`a`仅限于函数本身。

您要么需要扩展`otherFunction`参数`const QString&`并相应地调用它，要么将值分配给内部的全局变量（通常不是首选方式）`function()`，以便可以从以下位置访问它`otherFunction()`：

```
static QString str;

void function(const QString& a) {
    str = a;
}

void otherFunction() { 
    qDebug() << str;
} 
```

由于您将此问题标记为`C++`，因此首选方法是创建一个包含以下成员的类`QString`：

```
class Sample {
   QString str;

public:
   void function(const QString& a) { str = a; }

   void otherFunction() { qDebug() << str; }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:40:17.573

例如，您可以将 QString a 定义为类成员:) 因此您可以从类的任何方法访问此变量：

```
classMyCoolClass
{
public:
  void function();
  void otherFunction();    
private:
   QString a;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:44:18.630

只需将参数添加到`otherFunction()`：

```
void function(const QString &a)
{
    //code
    otherFunction(a);
}

void otherFunction(const QString &a)
{
    //code
    //do stuff with a
} 
```

# javascript - 在 html5 画布上旋转对象后返回未转换的鼠标坐标

> ID：14521058
> 
> 赞同：6
> 
> 时间：2013-01-25T11:38:23.407
> 
> 标签：javascript, canvas, html5-canvas

我正在围绕可变原点旋转 html5 画布中的对象。

如果用户单击新旋转的矩形中的给定点，我需要将返回的鼠标坐标围绕同一原点旋转回。

我做了一个非常快速的绘图，希望能更好地说明：

![在此处输入图像描述](../Images/124426fa382b38469e7587a2a498731e.png)

我基本上需要一个函数，它将实际单击的鼠标坐标作为 x 和 y 并将它们转换为旋转之前的对象位置。

```
var origin = {
        x: 100,
        y: 100
};

var angle = 45;

function transformCoordinates(x,y){

         //Perform calculation to transform coordinates

         return {
                 x : newx,
                 y : newy
         };
} 
```

可用的变量将是旋转的变换原点和角度。以及画布上的鼠标单击坐标（相对于画布本身，0,0 是左上角等）

不幸的是，数学不是我的强项。希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T12:40:16.137

有一种比你做的方法更优雅的方法来解决这个问题，但你需要知道如何进行[矩阵乘法](http://en.wikipedia.org/wiki/Matrix_multiplication)才能理解它。

可以`context.currentTransform`用来获取画布的[变换矩阵](http://en.wikipedia.org/wiki/Transformation_matrix)。该矩阵表示由当前应用于上下文状态的所有缩放平移和旋转修改器产生的所有坐标修改。[这是矩阵的文档](https://developer.mozilla.org/en-US/docs/DOM/SVGMatrix)。

要将内部坐标转换为屏幕坐标，请使用以下公式：

```
screen_X = internal_X * a + internal_Y * c + e;    
screen_Y = internal_X * b + internal_Y * d + f; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T11:57:52.203

令人尴尬的是，我在提出问题后直接解决了这个问题。

如果其他人需要相同的功能，我是这样做的：

```
getTransformedCoords : function(coords){
    var self = this;
    var obj = self.activeObj;
    var angle = (obj.angle*-1) * Math.PI / 180;   
    var x2 = coords.x - obj.left;
    var y2 = coords.y - obj.top;
    var cos = Math.cos(angle);
    var sin = Math.sin(angle);

    var newx = x2*cos - y2*sin + obj.left; 
    var newy = x2*sin + y2*cos + obj.top;

    return {
        x : newx,
        y : newy
    };
}, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-25T11:54:15.260

我也在很长一段时间内搜索这种查询。在我的例子中，当用户在画布上单击鼠标时，我正在尝试在画布上显示一个点，即使在旋转之后也是如此。问题是，在上下文旋转后，错误显示的点。我采用了[gordyr](https://stackoverflow.com/users/884934/gordyr)提供的方法。

我已经为我的代码库稍微修改了代码。我已将完整的代码库[放在这里](https://github.com/johnywalker01/html-experiments/tree/master/put-dots-in-canvas-using-mouse-click)。

```
let model = {
    ctx: {},
    canvas: {},
    width: 500,
    height: 500,
    angleInRad: 0
};
function getTransformedCoords(coords) {
    var angle = (model.angleInRad * -1);
    var x2 = coords.x;
    var y2 = coords.y;
    var cos = Math.cos(angle);
    var sin = Math.sin(angle);

    var newx = Math.floor(x2 * cos - y2 * sin);
    var newy = Math.floor(x2 * sin + y2 * cos);

    return new Position(newx, newy);
} 
```

再次感谢[gordyr](https://stackoverflow.com/users/884934/gordyr)提供的代码。

# php - 在 csv_from_result 方法中为我们将 mysql 时间戳转换为 codeigniter 查询对象中的日期

> ID：14521063
> 
> 赞同：0
> 
> 时间：2013-01-25T11:38:47.860
> 
> 标签：php, mysql, codeigniter, date, time

我有以下代码：

```
$query = $this->EE->db->select('*')->where('form_name', 'Newsletter')->get('freeform_entries');
        $filename = "newsletter.csv";
        $path = "some/path";
        $delimiter = ",";
        $newline = "\r\n";
        $csv_data = $this->EE->dbutil->csv_from_result($query, $delimiter, $newline); 
```

但是其中一个字段是时间戳，我需要将其转换为日期时间，以便在输出到 csv 时就是它的外观。所以我需要 20-10-13 09:28 而不是 1357752502

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:45:51.297

**FROM_UNIXTIME**将 unix_timestamp 参数的表示形式返回为 'YYYY-MM-DD HH:MM:SS' 中的值：

```
$query = $this->EE->db->select('FROM_UNIXTIME(timestamp_field) AS "value"', ... )->where('form_name', 'Newsletter')->get('freeform_entries');
        $filename = "newsletter.csv";
        $path = "some/path";
        $delimiter = ",";
        $newline = "\r\n";
        $csv_data = $this->EE->dbutil->csv_from_result($query, $delimiter, $newline); 
```

更多信息：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)

# ruby-on-rails - 为什么语言环境不适用于我的项目？

> ID：14521067
> 
> 赞同：1
> 
> 时间：2013-01-25T11:38:59.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization

请让我先解释一下我做了什么。

我安装了 gem`rails-i18n`然后我做了 rails g i18n es 命令它生成了 translate_es.yml

模型名称和它们的列名都在那里，所以我是这样翻译的。

然后我重新启动了我的服务器以检查它是否适用，但事实并非如此。为什么？我试图提交一个带有空字段的表单。

我看到验证错误消息，但列名是英文的。我怎样才能解决这个问题？

```
es:
  activerecord:
    models:
      acts_as_taggable_on/tag: acts_as_taggable_on/tag  #g
      acts_as_taggable_on/tagging: acts_as_taggable_on/tagging  #g
      acts_as_votable/vote: acts_as_votable/vote  #g
      comment: comentario  #g
      community: comunidad  #g
      [...] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:59:38.917

试试这个，

```
es:
  activerecord:
    models:
      community: "comunidad"
      comment: "comentario" 
    attributes:
      "community":
        title: "titulo"
      "comment":
        title: "titulo"
      [...] 
```

给每个空格，不要给标签...尝试让知道...

修改后需要重启服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:44:16.430

首先，您必须切换当前的语言环境。如果您的项目只支持一种语言，您可以输入

```
I18n.locale = :es 
```

进入您的初始化程序之一。

如果此语言环境文件嵌套在其中的某个目录中`config/locales`，则应在其中加载嵌套目录`application.rb`

```
config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '**', '*.{rb,yml}').to_s] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:51:55.420

在您的 : 中设置默认语言以及当前语言`config/application.rb`：

```
 config.i18n.default_locale = config.i18n.locale = :es 
```

# javascript - Colorbox 和 ajax youtube - 不一起工作？

> ID：14521069
> 
> 赞同：0
> 
> 时间：2013-01-25T11:39:03.957
> 
> 标签：javascript, jquery, ajax, youtube, colorbox

我正在使用 ajax 获取并创建一个列表，其中包含来自特定用户的 youtube 视频和 jquery.colorbox 作为 jQuery 灯箱。

我不能让他们一起工作:(有人可以告诉我如何解决，拜托。

演示：[http ://dev.template-tuners.com/a/youtube.html](http://dev.template-tuners.com/a/youtube.html)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:47:09.857

您所做的有几个问题：首先，从您的代码中删除类 cboxElement。其次，不要在 $.each 中的每次迭代中查询文档中的所有 '.youtube' 链接，这是非常低效的。第三，如果您尚未将该 HTML 附加到文档中，则无法在文档中查询“.youtube”。

移动这些行：

```
$(".youtube").colorbox({
    iframe:true, 
    innerWidth:640, 
    innerHeight:360,
}); 
```

成为你的 show_my_videos 函数中的陈述。

# gwt - GWT RequestFactory：如何在一种方法中使用不同的请求类型

> ID：14521075
> 
> 赞同：1
> 
> 时间：2013-01-25T11:39:52.513
> 
> 标签：gwt, requestfactory

我在派生的 RequestFactory 中定义了两个实体和相应的两种请求类型。当我在单元测试中保留一个实体时，它工作正常。当我尝试将两个实体一个接一个地保存在同一个单元测试中时，第一个实体被存储，第二个实体也以 onSuccess 结束，但没有数据存储在数据库中。我使用一种 RequestFacory、一种 EventBus 和两种请求类型。

当我将第二个 persist.fire 放入第一个 onSuccess 方法时，相应的 onSuccess 方法没有被命中，并且测试终止且没有任何消息。

如何在一个代码位置保留两个不相关的实体？

```
//Company
@Entity
public class Company {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @Column(name = "version")
    private Integer version;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Integer getVersion() {
        return version;
    }

    public void setVersion(Integer version) {
        this.version = version;
    }

    private String instance;

    public static Company findCompany(Long id) {
        EntityManager em = emf.createEntityManager();
        try {
            Company company = em.find(Company.class, id);
            return company;
        } finally {
            em.close();
        }
    }

    public void persist() throws PersistenceException {
        EntityManager em = emf.createEntityManager();
        EntityTransaction tx = null;
        try {
            tx = em.getTransaction();
            tx.begin();
            em.persist(this);
            tx.commit();
        } catch (RuntimeException e) {
            tx.rollback();
            throw e;
        } finally {
            em.close();
        }
    }
}

//CompanyRequest
@Service(Company.class)
public interface CompanyRequest extends RequestContext {
    Request<CompanyProxy> findCompany(Long id);

    InstanceRequest<CompanyProxy, Void> persist();

    InstanceRequest<CompanyProxy, Void> remove();
}

//ServiceProvider
similar to Company with ServiceProviderRequest

//RequestFactory
public interface AftdRequestFactory extends RequestFactory {
    CompanyRequest companyRequest();
    ServiceProviderRequest serviceProviderRequest();
}

//UnitTest
public void testSetupDatabase() {
    final EventBus eventBus = new SimpleEventBus();
    final AftdRequestFactory requestFactory = GWT.create(AftdRequestFactory.class);
    requestFactory.initialize(eventBus);

    CompanyRequest request = requestFactory.companyRequest();
    CompanyProxy newCompany = request.create(CompanyProxy.class);
    newCompany.setInstance("1");
    request.persist().using(newCompany);
    request.fire(new Receiver<Void>() {
        @Override
        public void onSuccess(Void arg0) {
            ServiceProviderRequest spRequest = requestFactory.serviceProviderRequest();
            ServiceProviderProxy newServiceProvider = spRequest.create(ServiceProviderProxy.class);
            newServiceProvider.setInstance("12345");
            spRequest.persist().using(newServiceProvider);
            spRequest.fire(new Receiver<Void>() {
                @Override
                public void onSuccess(Void arg0) {
                    System.out.println("service provider instance created");
                }

                @Override
                public void onFailure(ServerFailure error) {
                }
           });

        }

        @Override
        public void onFailure(ServerFailure error) {
            System.out.println("could not create company instances");
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:26:42.210

根本问题似乎是时间问题。当我在 gwt 单元测试的开头添加“delayTestFinish(30000)”时，主线程会等待足够长的时间，直到两个 onSuccess() 方法都被调用并且异步线程完成。

# animation - Unity3D：导入关键帧动画（不是基于骨骼的动画）

> ID：14521080
> 
> 赞同：2
> 
> 时间：2013-01-25T11:40:22.620
> 
> 标签：animation, unity3d, blender, 3dsmax, fbx

据我所知，我只能从 3ds Max 或类似工具中导入基于骨骼的动画。有没有办法导入其他类型的动画？我想导入这样的建筑[动画](https://www.youtube.com/watch?v=rWmR9UIz5iA)。如何在 Unity 中导入这些动画？这种动画最简单的解决方案是什么？

[UnityAnswers](http://answers.unity3d.com/questions/387534/importing-keyframe-animation-not-bone-based-animat.html)中的相同问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:39:55.583

通常的做法是将骨骼添加到您想要动画的所有对象中。例如，在 3d App 中，您必须创建单个网格对象，该对象包含引擎的所有部分作为子网格，并为每个子网格添加一个骨骼（+ 设置骨骼权重），之后它可以像标准对象动画一样进行动画处理（性能原因需要一个网格，只使用一个蒙皮网格很重要）。

你也可以试试[Mega Fiers](http://www.west-racing.com/mf/?page_id=2)插件，它提供了顶点和变形动画的能力。

# mysql - MAMP/Library/bin 中的文件“mysql”unix 可执行文件

> ID：14521081
> 
> 赞同：0
> 
> 时间：2013-01-25T11:40:25.897
> 
> 标签：mysql, mamp

我在终端上使用“rm”命令不小心删除了文件“mysql”，它是 MAMP/Library/bin 文件夹中的一个 unix 可执行文件。我的问题是有没有办法在不重新安装 MAMP 的情况下取回该文件？还是我必须这样做？请帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:03:22.663

您应该能够简单地[下载 MAMP zip](http://www.mamp.info/en/downloads/index.html)并解压缩，然后将“mysql”文件复制到正确的文件夹中。也就是说，请确保您获得的是相同版本的 MAMP（或至少是 MySQL）。

以后可以将mamp目录（和文件）的所有者改为root，并将权限设置为0755。这样就只允许root用户删除文件，但每个人都可以读取和执行。像这样的东西：

```
> su root
Password: 
> chown -R root:root /path/to/mamp
> chmod -R 0755 /path/to/mamp 
```

请注意，您需要成为 root 用户才能执行此操作，因此请在第一行之后输入您的密码。

# c - 原子 if(A && B)？

> ID：14521087
> 
> 赞同：-4
> 
> 时间：2013-01-25T11:40:53.540
> 
> 标签：c, concurrency, atomic

`if`有没有办法用连词制作原子？也就是说，我可以以某种方式`if(A && B)`在 C 中进行原子测试吗？如果它在第一个合相中短路，那没问题，但如果没有，到它检查的时候`B`，`A`可能已经改变了。有任何想法吗？

**编辑**：不使用粗锁或信号量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:44:37.973

您必须手动同步对这两个对象的访问！你还想怎么做？

这是并行编程的基本思想，一次可以发生两件事，除非你自己做。

伪代码示例：

```
//Comparison:
{
  lock(Amutex);
  lock(Bmutex);
  bool result = A && B;
  unlock(Amutex);
  unlock(Bmutex);

  if (result) // ...
}

//assignment:
{
  lock(Amutex);
  A = val;
  unlock(Amutex);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:16:44.407

如果在检查 B 之前绝对不能更改 A，则可以按照建议在 A 上使用锁/互斥锁（或其他一些同步原语，例如关键部分）。

您还可以将 A 和 B 连接成一个对齐的 32 位或 64 位整数，您总是可以原子地作为一个整体进行读取和写入，再次使用同步原语或 CAS 或特殊 CPU 指令，正如建议的那样。

如果您的系统是单处理器的，您还可以在读写 A 和 B 时禁止所有中断或调度，以达到相同的效果。如果 A 或 B 可以由不同的 CPU 修改，这将不适用于多处理器系统。

如果您可以容忍 A 的变化，并且只对在读取 B 之后和读取 B 之前看到相同的 A 值感兴趣，那么您可以读取 A 两次，然后再读取 B。必须注意确保读取的顺序。volatiles 和/或内存屏障可以帮助执行命令。

所有这些都是特定于目标硬件、操作系统和编译器的，如果不了解这些细节，就无法详细回答这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:45:20.070

Use a `mutex` or a `semaphore` to protect `A` from changing.

Or you could try this.

```
bool A_initial;
if( (A_initial = A) && B && (A==A_initial) ) {  /*A has not changed and 
                                                condition evaluated to true.  */
}
else if (A ! = A_initial){ /* You have to redo the if() or 
                              whatever if A is changed  */
} 
```

# javascript - div 占满空间

> ID：14521092
> 
> 赞同：0
> 
> 时间：2013-01-25T11:41:15.020
> 
> 标签：javascript, jquery, html, css

无论屏幕分辨率如何，我希望我的页眉和页脚始终分别显示在顶部和底部，即只有主体应该包含滚动条。

这是我的jsfiddle：

[http://jsfiddle.net/sfctB/7/](http://jsfiddle.net/sfctB/7/)

```
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <div style="height:60px;background:#000;color:#fff;">This is header</div>
        <div style="height:100%;background:red;" id="red">...
</div>
        <div style="height:60px;background:#000;position:fixed;bottom:0px;width:100%;color:#fff;">This is footer</div>
    </body>
</html> 
```

我只希望红色部分占据滚动条（无论屏幕分辨率如何）。因此它也应该在 Ipad 或 iPhone 上工作。我试图给红色部分 100%，但滚动条的另一端不可见。因此，页脚和正文似乎重叠。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:54:07.933

[http://jsfiddle.net/sfctB/20/](http://jsfiddle.net/sfctB/20/)

```
html,body
{
    height:100%;
    width:100%;
    overflow:hidden;
}

body
{
    padding: 60px 0px;
    height: 100%;
    box-sizing: border-box;
}

.header
{
    height:60px;
    background:#000;
    color:#fff; 
    width: 100%;
    position: fixed;
    top:0;
}
.body
{
    overflow-y: scroll;
    height: 100%;
}

.footer
{
    height:60px;
    background:#000;
    position:fixed;
    bottom:0px;
    width:100%;
    color:#fff;
    bottom:0
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:47:48.550

关键是位置属性。试试这个：

```
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <div style="height:60px;background:#000;color:#fff; position: absolute; top: 0px;">This is header</div>
        <div style="height:100%;background:red;" id="red">...
</div>
        <div style="height:60px;background:#000;position:absolute;bottom:0px;width:100%;color:#fff;">This is footer</div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:59:03.770

我想说的问题是，如果您对自己的内容与页脚重叠感到高兴，那么您尝试实现可以​​轻松完成的事情的方式。

在您的页眉和页脚上使用`position:fixed;`，您就可以实现固定页眉和页脚的愿望。然后，您只需要像往常一样滚动内容。

为了偏移页眉和页脚，以便我们可以看到它下面的内容，我们只需在正文的顶部和底部添加一个边距。在这种情况下，它是：

```
body { margin: 60px 0; } 
```

这也适用于移动设备。

我总是建议开发人员利用浏览器已经做的事情，而不是试图用脚本/技巧来模仿默认行为。

这种开发方式会增加您的开发时间，并且不能总是跨浏览器工作。如果浏览器停止支持某些功能/脚本编写方式，这样做也会导致您的网站寿命出现问题。

我已经更新了你的小提琴来告诉你我的意思：http: [//jsfiddle.net/rnF9p/1/](http://jsfiddle.net/rnF9p/1/)

# c# - Word 2010 富文本内容控件一次选择所有内容

> ID：14521096
> 
> 赞同：0
> 
> 时间：2013-01-25T11:41:28.273
> 
> 标签：c#, ms-word, vsto, word-contentcontrol

我使用 VSTO (c#) 在 word 文档 2010 中添加了富文本内容控件

该文档受密码保护，每次用户打开文档时，我都会将内容控件的编辑器属性设置为当前用户，这使他只能编辑文档的该部分。

但是，当我打开以前保存的文档并单击内容控件时，我无法编辑内容控件的内容，因为它一次选择了完整的内容，甚至一次击键也会替换完整的内容。

我为此进行了高低搜索，但似乎没有找到可行的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:50:27.547

您可以通过处理[Entering](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.contentcontrolbase.entering.aspx)事件并取消选择文本来覆盖此行为。我认为你可以通过改变它来做到这一点`Range`。

您可能已将 Text 设置为 the `PlaceholderText`，这就是为什么在第一次击键时将其删除的原因，因为该属性用于引入提示性文本（请参阅 StackOverflow 的搜索框，它有一个占位符文本“搜索”）。

# java - Android ODK - 如何将图像存储在文件服务器中？

> ID：14521097
> 
> 赞同：1
> 
> 时间：2013-01-25T11:41:29.847
> 
> 标签：java, android, mysql, odk

我正在开发`ODK Framework`在 Android 中使用的数据收集应用程序。我刚刚在我的本地主机中设置了`MySQL`服务器，并且数据完美地存储在`MySQL`数据库中。但是图像以二进制格式存储。我想以图像格式（.jpg）将图像存储在本地目录中。我怎样才能做到这一点？我搜索并没有找到合适的解决方案。任何人都可以通过提供链接来帮助如何以图像格式将图像存储在本地主机中...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T08:09:33.407

`ODK Aggregate`将图像存储在数据库中，以便聚合可以扩展。目前，没有将图像保存在文件系统中的选项。您最好的选择是将所有数据加载到服务器后，编写一个小脚本来下载图像并保存它们。

您可以使用[cURL](http://en.wikipedia.org/wiki/CURL)作为下载图像的选项。

在`ODK Aggregate`允许匿名下载图像的选项中，确保选中此选项。

对于您的回答，我很抱歉没有灵丹妙药链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T23:50:26.393

我正在使用 python 脚本执行此操作。这是一个示例：

```
#!/usr/bin/python
import urllib
imageLink = "https://odkworkspace.appspot.com/view/binaryData?blobKey=BlahBlahBlah..."
outputFile = "c:/temp/test.jpg"
urllib.urlretrieve(imageLink, outputFile) 
```

正如另一位用户提到的，请确保在 ODK Aggregate 中选中允许匿名下载图像的选项。

# php - 使用 PHP 进行认证的随机数生成器

> ID：14521104
> 
> 赞同：2
> 
> 时间：2013-01-25T11:41:54.043
> 
> 标签：php, linux, php-extension

我会尝试解释我的问题，如果不是具体的解决方案，但至少理论上的想法就足够了。

我正在编写随机数生成器 - RNG（将仅在 Linux（Ubuntu）服务器上运行）并且此代码将被认证（代码/程序随时可以使用 sha1/md5 哈希检查，它有很多认证版本或其他东西像那样），因此它将无法再进行更改。基本上我使用`mt_rand`函数来生成值和几个服务器参数以及`microtime`种子（`mt_srand`）。如果代码足以进行认证，仍然不要不，但这不是主要问题。认证公司说我会被要求给出`mt_rand`函数的源代码和二进制代码（也许`mt_srand`还有）。那么如何以最简单和正确的方式做到这一点呢？

找到了 mt_rand 函数`php_src_files\ext\standard\rand.c` 所以我应该编译这个扩展并加载到安装的 PHP 作为扩展？

我不是 php 和 linux 的新手，但我想问一下如何正确地做，所以我在不同的 linux 服务器上部署这个 RNG 时不会那么头疼。

提前致谢。

**更新：**感谢您的回复，但正如我所说，我不是在问如何编写 RNG，而是如何提取/编译/准备/使用部分 php 源代码进行认证......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:33:20.087

在 Linux 上，您可以读取[`/dev/random`](http://manpages.ubuntu.com/manpages/jaunty/man4/random.4.html)，它会从环境噪声中产生高质量的随机位。所以这可能会为您服务：

```
function dev_random_integer($min, $max)
{
    $stream = fopen('/dev/random', 'r');
    $randomBinary = fread($stream, 4); // read 4 bytes (32 bit)
    fclose($stream);
    $randomInt = unpack('l', $randomBinary); // convert to 32 bit integer

    $range = $max - $min + 1;
    return $min + ($randomInt % $range);
} 
```

*编辑：你不应该使用那个确切的代码，看看下面的评论。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:47:24.157

您必须提供整个 PHP 源代码和一个二进制 PHP 包 ( `php-cli`)，该包可用于生成二进制流，以针对各种工具进行检查。（您可能会询问您的认证提供商他们支持哪种操作系统）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-21T22:12:33.353

虽然这是一个古老的问题，但它似乎是一个相关的问题。

我最近构建了一个赌场游戏，并使用了 Zend/Math/Rand，它提供了加密安全的 RNG。这通过了RNG认证测试，我的游戏现在已经通过了认证！

您可以在 packagist 上找到该库：[https ://packagist.org/packages/gamblingtec/certified-rng](https://packagist.org/packages/gamblingtec/certified-rng)

# javascript - JS内部动态加载JS

> ID：14521108
> 
> 赞同：427
> 
> 时间：2013-01-25T11:42:12.000
> 
> 标签：javascript, jquery

我有一个动态网页，我需要`IF`在另一个 javascript 文件中导入一个外部 JS 文件（在某种条件下）。

我试图寻找可行的解决方案，但没有奏效。

我尝试使用将 JS 文件加载到 DOM，`document.createElement()`但它也没有工作。显然 Js 已加载到 DOM 中，但在当前 JS 文件中无法访问。

jQuery中的解决方案也可以

* * *

## 回答 #1

> 赞同：827
> 
> 时间：2013-01-25T12:04:21.450

我的猜测是，在您的仅 DOM 解决方案中，您执行了以下操作：

```
var script = document.createElement('script');
script.src = something;
//do stuff with the script 
```

首先，这是行不通的，因为脚本没有添加到文档树中，所以它不会被加载。此外，即使您这样做了，javascript 的执行也会在其他脚本加载时继续执行，因此在该脚本完全加载之前，您将无法使用其内容。

您可以收听脚本的`load`事件，并按照您的意愿处理结果。所以：

```
var script = document.createElement('script');
script.onload = function () {
    //do stuff with the script
};
script.src = something;

document.head.appendChild(script); //or something of the likes 
```

* * *

## 回答 #2

> 赞同：171
> 
> 时间：2013-01-25T11:48:58.833

jQuery`$.getScript()`有时是错误的，所以我使用我自己的实现，例如：

```
jQuery.loadScript = function (url, callback) {
    jQuery.ajax({
        url: url,
        dataType: 'script',
        success: callback,
        async: true
    });
} 
```

并像这样使用它：

```
if (typeof someObject == 'undefined') $.loadScript('url_to_someScript.js', function(){
    //Stuff to do after someScript has loaded
}); 
```

* * *

## 回答 #3

> 赞同：112
> 
> 时间：2015-07-13T01:55:03.733

我需要经常这样做，所以我使用这个：

```
var loadJS = function(url, implementationCode, location){
    //url is URL of external file, implementationCode is the code
    //to be called from the file, location is the location to 
    //insert the <script> element

    var scriptTag = document.createElement('script');
    scriptTag.src = url;

    scriptTag.onload = implementationCode;
    scriptTag.onreadystatechange = implementationCode;

    location.appendChild(scriptTag);
};
var yourCodeToBeCalled = function(){
//your code goes here
}
loadJS('yourcode.js', yourCodeToBeCalled, document.body); 
```

有关详细信息，请参阅此站点[如何在另一个 JavaScript 文件中包含一个 JavaScript 文件？](https://stackoverflow.com/questions/950087/include-a-javascript-file-in-another-javascript-file)，这就是我的函数思想的来源。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2013-01-25T11:44:49.307

您可以在页面内动态加载 js 而不是另一个 js 文件。

您必须使用[getScript](http://api.jquery.com/jQuery.getScript/)来加载 js 文件。

```
$.getScript("ajax/test.js", function(data, textStatus, jqxhr) {
  console.log(data); // data returned
  console.log(textStatus); // success
  console.log(jqxhr.status); // 200
  console.log('Load was performed.');
}); 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2015-12-21T12:19:33.507

死灵术。

我用它来加载依赖脚本；
它适用于 IE8+，而无需添加对 jQuery 等其他库的任何依赖！

```
var cScriptLoader = (function ()
{
    function cScriptLoader(files)
    {
        var _this = this;
        this.log = function (t)
        {
            console.log("ScriptLoader: " + t);
        };
        this.withNoCache = function (filename)
        {
            if (filename.indexOf("?") === -1)
                filename += "?no_cache=" + new Date().getTime();
            else
                filename += "&no_cache=" + new Date().getTime();
            return filename;
        };
        this.loadStyle = function (filename)
        {
            // HTMLLinkElement
            var link = document.createElement("link");
            link.rel = "stylesheet";
            link.type = "text/css";
            link.href = _this.withNoCache(filename);
            _this.log('Loading style ' + filename);
            link.onload = function ()
            {
                _this.log('Loaded style "' + filename + '".');
            };
            link.onerror = function ()
            {
                _this.log('Error loading style "' + filename + '".');
            };
            _this.m_head.appendChild(link);
        };
        this.loadScript = function (i)
        {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = _this.withNoCache(_this.m_js_files[i]);
            var loadNextScript = function ()
            {
                if (i + 1 < _this.m_js_files.length)
                {
                    _this.loadScript(i + 1);
                }
            };
            script.onload = function ()
            {
                _this.log('Loaded script "' + _this.m_js_files[i] + '".');
                loadNextScript();
            };
            script.onerror = function ()
            {
                _this.log('Error loading script "' + _this.m_js_files[i] + '".');
                loadNextScript();
            };
            _this.log('Loading script "' + _this.m_js_files[i] + '".');
            _this.m_head.appendChild(script);
        };
        this.loadFiles = function ()
        {
            // this.log(this.m_css_files);
            // this.log(this.m_js_files);
            for (var i = 0; i < _this.m_css_files.length; ++i)
                _this.loadStyle(_this.m_css_files[i]);
            _this.loadScript(0);
        };
        this.m_js_files = [];
        this.m_css_files = [];
        this.m_head = document.getElementsByTagName("head")[0];
        // this.m_head = document.head; // IE9+ only
        function endsWith(str, suffix)
        {
            if (str === null || suffix === null)
                return false;
            return str.indexOf(suffix, str.length - suffix.length) !== -1;
        }
        for (var i = 0; i < files.length; ++i)
        {
            if (endsWith(files[i], ".css"))
            {
                this.m_css_files.push(files[i]);
            }
            else if (endsWith(files[i], ".js"))
            {
                this.m_js_files.push(files[i]);
            }
            else
                this.log('Error unknown filetype "' + files[i] + '".');
        }
    }
    return cScriptLoader;
})();
var ScriptLoader = new cScriptLoader(["foo.css", "Scripts/Script4.js", "foobar.css", "Scripts/Script1.js", "Scripts/Script2.js", "Scripts/Script3.js"]);
ScriptLoader.loadFiles(); 
```

如果您对用于创建它的[typescript -version 感兴趣：](http://www.typescriptlang.org/play/)

```
class cScriptLoader {
    private m_js_files: string[];
    private m_css_files: string[];
    private m_head:HTMLHeadElement;

    private log = (t:any) =>
    {
        console.log("ScriptLoader: " + t);
    }

    constructor(files: string[]) {
        this.m_js_files = [];
        this.m_css_files = [];
        this.m_head = document.getElementsByTagName("head")[0];
        // this.m_head = document.head; // IE9+ only

        function endsWith(str:string, suffix:string):boolean 
        {
            if(str === null || suffix === null)
                return false;

            return str.indexOf(suffix, str.length - suffix.length) !== -1;
        }

        for(let i:number = 0; i < files.length; ++i) 
        {
            if(endsWith(files[i], ".css"))
            {
                this.m_css_files.push(files[i]);
            }
            else if(endsWith(files[i], ".js"))
            {
                this.m_js_files.push(files[i]);
            }
            else
                this.log('Error unknown filetype "' + files[i] +'".');
        }

    }

    public withNoCache = (filename:string):string =>
    {
        if(filename.indexOf("?") === -1)
            filename += "?no_cache=" + new Date().getTime();
        else
            filename += "&no_cache=" + new Date().getTime();

        return filename;    
    }

    public loadStyle = (filename:string) =>
    {
        // HTMLLinkElement
        let link = document.createElement("link");
        link.rel = "stylesheet";
        link.type = "text/css";
        link.href = this.withNoCache(filename);

        this.log('Loading style ' + filename);
        link.onload = () =>
        {
            this.log('Loaded style "' + filename + '".');

        };

        link.onerror = () =>
        {
            this.log('Error loading style "' + filename + '".');
        };

        this.m_head.appendChild(link);
    }

    public loadScript = (i:number) => 
    {
        let script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = this.withNoCache(this.m_js_files[i]);

        var loadNextScript = () => 
        {
            if (i + 1 < this.m_js_files.length)
            {
                this.loadScript(i + 1);
            }
        }

        script.onload = () =>
        {
            this.log('Loaded script "' + this.m_js_files[i] + '".');
            loadNextScript();
        };

        script.onerror = () =>
        {
            this.log('Error loading script "' + this.m_js_files[i] + '".');
            loadNextScript();
        };

        this.log('Loading script "' + this.m_js_files[i] + '".');
        this.m_head.appendChild(script);
    }

    public loadFiles = () => 
    {
        // this.log(this.m_css_files);
        // this.log(this.m_js_files);

        for(let i:number = 0; i < this.m_css_files.length; ++i)
            this.loadStyle(this.m_css_files[i])

        this.loadScript(0);
    }

}

var ScriptLoader = new cScriptLoader(["foo.css", "Scripts/Script4.js", "foobar.css", "Scripts/Script1.js", "Scripts/Script2.js", "Scripts/Script3.js"]);
ScriptLoader.loadFiles(); 
```

如果要加载脚本的动态列表，请将脚本写入属性，例如 data-main，例如 `<script src="scriptloader.js" data-main="file1.js,file2.js,file3.js,etc." ></script>`
并执行`element.getAttribute("data-main").split(',')`

如

```
var target = document.currentScript || (function() {
  var scripts = document.getElementsByTagName('script');
  // Note: this is for IE as IE doesn't support currentScript
  // this does not work if you have deferred loading with async
  // e.g. <script src="..." async="async" ></script>
  // https://web.archive.org/web/20180618155601/https://www.w3schools.com/TAgs/att_script_async.asp
  return scripts[scripts.length - 1];
})();

target.getAttribute("data-main").split(',') 
```

获取列表。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-10-30T20:07:02.017

该**`jQuery.getScript()`**方法是 Ajax 函数的简写（带有 dataType 属性：）`$.ajax({ url: url,`**`dataType: "script"`**`})`

如果您希望脚本可缓存，请使用[**RequireJS**](http://requirejs.org/)或按照 jQuery 的示例扩展`jQuery.getScript`类似于以下的方法。

```
jQuery.cachedScript = function( url, options ) {

  // Allow user to set any option except for dataType, cache, and url
  options = $.extend( options || {}, {
    dataType: "script",
    cache: true,
    url: url
  });

  // Use $.ajax() since it is more flexible than $.getScript
  // Return the jqXHR object so we can chain callbacks
  return jQuery.ajax( options );
};

// Usage
$.cachedScript( "ajax/test.js" ).done(function( script, textStatus ) {
  console.log( textStatus );
}); 
```

*参考：[jQuery.getScript() | jQuery API 文档](http://api.jquery.com/jquery.getscript/)*

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-01-25T11:44:06.257

jQuery有[`$.getScript()`](http://api.jquery.com/jQuery.getScript/)：

> **描述**：使用 GET HTTP 请求从服务器加载一个 JavaScript 文件，然后执行它。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-01-25T11:48:00.687

您可以使用 JQuery 来做到这一点：

```
$.getScript("ajax/test.js", function(data, textStatus, jqxhr) {
  console.log(data); //data returned
  console.log(textStatus); //success
  console.log(jqxhr.status); //200
  console.log('Load was performed.');
}); 
```

这个链接应该有帮助： [http ://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-03-20T10:05:48.570

我建议将 requirejs 与 AMD javascript 类文件一起使用

如何在这里使用它的好例子

[http://www.sitepoint.com/understanding-requirejs-for-effective-javascript-module-loading/](http://www.sitepoint.com/understanding-requirejs-for-effective-javascript-module-loading/)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2014-03-28T11:37:52.780

为了创作我的插件，我需要在 JS 文件中加载外部脚本和样式，所有这些都是预定义的。为了实现这一点，我做了以下事情：

```
 this.loadRequiredFiles = function (callback) {
        var scripts = ['xx.js', 'yy.js'];
        var styles = ['zz.css'];
        var filesloaded = 0;
        var filestoload = scripts.length + styles.length;
        for (var i = 0; i < scripts.length; i++) {
            log('Loading script ' + scripts[i]);
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = scripts[i];
            script.onload = function () {
                log('Loaded script');
                log(this);
                filesloaded++;  // (This means increment, i.e. add one)
                finishLoad();
            };
            document.head.appendChild(script);
        }
        for (var i = 0; i < styles.length; i++) {
            log('Loading style ' + styles[i]);
            var style = document.createElement('link');
            style.rel = 'stylesheet';
            style.href = styles[i];
            style.type = 'text/css';
            style.onload = function () {
                log('Loaded style');
                log(this);
                filesloaded++;
                finishLoad();
            };
            document.head.appendChild(style);
        }
        function finishLoad() {
            if (filesloaded === filestoload) {
                callback();
            }
        }
    }; 
```

上下文中的更多脚本：

```
function myPlugin() {

    var opts = {
        verbose: false
    };                          ///< The options required to run this function
    var self = this;            ///< An alias to 'this' in case we're in jQuery                         ///< Constants required for this function to work

    this.getOptions = function() {
        return opts;
    };

    this.setOptions = function(options) {
        for (var x in options) {
            opts[x] = options[x];
        }
    };

    /**
     * @brief Load the required files for this plugin
     * @param {Function} callback A callback function to run when all files have been loaded
     */
    this.loadRequiredFiles = function (callback) {
        var scripts = ['xx.js', 'yy.js'];
        var styles = ['zz.css'];
        var filesloaded = 0;
        var filestoload = scripts.length + styles.length;
        for (var i = 0; i < scripts.length; i++) {
            log('Loading script ' + scripts[i]);
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = scripts[i];
            script.onload = function () {
                log('Loaded script');
                log(this);
                filesloaded++;
                finishLoad();
            };
            document.head.appendChild(script);
        }
        for (var i = 0; i < styles.length; i++) {
            log('Loading style ' + styles[i]);
            var style = document.createElement('link');
            style.rel = 'stylesheet';
            style.href = styles[i];
            style.type = 'text/css';
            style.onload = function () {
                log('Loaded style');
                log(this);
                filesloaded++;
                finishLoad();
            };
            document.head.appendChild(style);
        }
        function finishLoad() {
            if (filesloaded === filestoload) {
                callback();
            }
        }
    };

    /**
     * @brief Enable user-controlled logging within this function
     * @param {String} msg The message to log
     * @param {Boolean} force True to log message even if user has set logging to false
     */
    function log(msg, force) {
        if (opts.verbose || force) {
            console.log(msg);
        }
    }

    /**
     * @brief Initialise this function
     */
    this.init = function() {
        self.loadRequiredFiles(self.afterLoadRequiredFiles);
    };

    this.afterLoadRequiredFiles = function () {
        // Do stuff
    };

} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-12-11T14:18:57.177

这是一个动态加载 javascript 和 CSS 文件的小库：

[https://github.com/todotresde/javascript-loader](https://github.com/todotresde/javascript-loader)

我想按顺序动态加载css和js文件很有用。

支持扩展以加载您想要的任何库，而不仅仅是主文件，您可以使用它来加载自定义文件。

IE：

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="scripts/javascript-loader.js" type="text/javascript" charset="utf-8" ></script>    
    <script type="text/javascript">
        $(function() {

            registerLib("threejs", test);

            function test(){
                console.log(THREE);
            }

            registerLib("tinymce", draw);

            function draw(){
                tinymce.init({selector:'textarea'});
            }

        }); 
    </script>
</head>
<body>
    <textarea>Your content here.</textarea>
</body> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-03-18T12:12:03.537

如果您有**许多**具有**依赖**项的文件，请使用 AMD/RequireJS。 [http://requirejs.org/](http://requirejs.org/)

# android - 提交子片段的最佳时间是什么时候？

> ID：14521109
> 
> 赞同：4
> 
> 时间：2013-01-25T11:42:15.697
> 
> 标签：android, android-fragments, android-lifecycle

网络中缺少有关嵌套的信息`Fragments`，所以这是我的问题。

由于子片段只能动态添加，最好的地方是什么？为什么？我的意思是执行此操作的最佳回调是什么：`onCreate()`、、、`onCreateView()`等等`onActivityCreated()`？

**编辑**：我刚刚测试过，似乎没有区别，即使在`onAttach()`父片段的回调中也可以提交子片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:54:38.267

很好地基于直觉和关于[Fragment 生命周期](http://developer.android.com/reference/android/app/Fragment.html#Lifecycle)的一般想法。我会说你可以安全地做到这一点`onCreateView()`。但如果我是你，我会测试一下。嵌入的片段仍应由活动管理，因此我很确定应该可以像在`onCreate()`or中那样更早地做到这一点`onAttach()`。

# c# - 列表引用与列表对象作为类中的成员

> ID：14521113
> 
> 赞同：0
> 
> 时间：2013-01-25T11:42:27.507
> 
> 标签：c#, list

考虑我们正在上课，如下所示

```
public class Hotel
{
    public List<Room> lstRooms;
    public List<Room> objLstRoom = new List<Room>();
} 
```

如果我为这个 Hotel 类创建一个对象，

*   该对象中这两个变量之间有什么区别？
*   由于列表最初是空的，那么它会存储什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:43:44.177

第一个是`null`。第二个不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:45:08.817

*   `List<Room> lstRooms` would be `null` and
*   `List<Room> objLstRoom = new List<Room>()` would be an empty list

So the first would be a hotel with 0 rooms and the second would be a hotel with none defined rooms.

Calling an instance method on a `null` `List` causes a crash:

```
int count = lstRooms.Count; // crash because lstRooms is null 
```

but

```
int count = objLstRoom.Count; // => 0 
```

So **what is better**? I would always prefer an empty list.

Because this sucks:

```
if(hotelInstance.objLstRoom != null)
{
  foreach(va room in hotelInstance.objLstRoom)
    /* .... */
} 
```

This is better

```
foreach(va room in hotelInstance.objLstRoom)
    /* .... */ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T11:44:11.283

如果您不为成员分配任何东西，它将被分配*默认值*，因此它等于写作

```
public class Hotel
{
    public List<Room> lstRooms = default(List<Room>);
    public List<Room> objLstRoom = new List<Room>();
} 
```

对于引用类型，*默认*值为`null`，因此第一个变量将变为`null`.

其他列表呢，它会被初始化，但会保持为空，如你所说。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T11:44:24.930

`lstRooms`is `null`but`objLstRoom`是空列表。如果您访问`lstRooms`，您将获得空引用异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T11:44:20.377

`lstRooms`将为 null，`objLstRoom`将为空`List<Room>`，没有元素。

这意味着例如，这`lstRooms.Add(new Room())`将引发空引用异常，`objLstRoom.Add(new Room)`将正常工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-25T11:44:20.847

您的代码相当于：

```
public class Hotel
{
    public List<Room> lstRooms;
    public List<Room> objLstRoom;

    public Hotel()
    {
        objLstRoom = null;  // Default initialization in .NET
        objLstRoom = new List<Room>()
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-25T11:59:13.797

我一直试图把它想象成一个盒子。

`public List<Room> lstRooms;`一个空盒子也是如此。它有足够的空间容纳其中的房间对象列表，但它实际上并不包含列表。（然而）

`public List<Room> objLstRoom = new List<Room>();`是一个已经有房间列表的盒子。构造函数被调用，这是一个很大的区别。

在第一个示例中，您正在创建对列表的引用。就像一个指针，但第二个例子你实际上是在创建一个列表。

如果你尝试调用类似的东西，`lstRooms.Add(new Room());`你会得到一个未分配的变量错误，因为要添加新房间的对象不存在。其中 objLstRoom.Add(new Room()); 会工作得很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-25T11:45:11.997

```
public class Hotel
{
    public List<Room> lstRooms; // null
    public List<Room> objLstRoom = new List<Room>(); // empty list
} 
```

To answer your questions:

1.  What would be the difference between these two variables in that object?

    lstRooms would be null and objLstRoom would be an empty list.

2.  Since list would be empty initially, what would have been stored in it?

    It would have nothing stored in it.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-25T11:44:42.797

`What would be the difference between these two variables in that object?`

将`lstRoom`是`null`，`objLstRoom`将是一个`empty list`。

`Since list would be empty initially, what would have been stored in it?`

既不存储`lstRoom`也不`objLstRoom`存储任何内容。

# metadata - ServiceStack 元数据页面的默认 URL 不正确

> ID：14521116
> 
> 赞同：9
> 
> 时间：2013-01-25T11:42:32.170
> 
> 标签：metadata, servicestack

我正在使用 ServiceStack 开发 REST api，并且在默认重定向到元数据页面时遇到问题。我已将该服务发布到公共 IIS7 服务器上的虚拟文件夹“myservice”。

URL“http://mydomain/myservice/whatever”按设计工作，“http://mydomain/myservice/metadata”显示元数据页面（带有正确的链接 url）。

问题是，当访问“http://mydomain/myservice”时，它会重定向到“http:// **localhost** /myservice/metadata”，而不是“http:// **mydomain** /myservice/metadata”。

如何配置元数据 URL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T16:32:06.297

在[ServiceStack](http://www.servicestack.net)中，您可以通过以下方式指定用于所有重定向的 baseUrl `AppHost.Configure()`：

```
SetConfig(new HostConfig {
    WebHostUrl = "http://mydomain/",
}); 
```

### 覆盖已解析的 URL

您可以通过覆盖`ResolveAbsoluteUrl()`您的 AppHost 来覆盖 ServiceStack 如何解析 Absolute Url，例如：

```
public class AppHost : AppHostBase
{
    //...

    public override string ResolveAbsoluteUrl(string virtualPath, IRequest req)
    {
        virtualPath = virtualPath.SanitizedVirtualPath();
        return req.GetAbsoluteUrl(virtualPath);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-12T14:08:07.900

[老问题，但我也遇到了这个问题，并在这里](https://support.appharbor.com/discussions/problems/21938-why-does-my-service-stacknet-app-navigate-to-127001metadata-and-give-me-404)找到了解决方案。

基本上，如果您将服务部署在某处并且在同一台机器上，您在浏览器中打开元数据页面，使用“ [http://localhost:XXXX/metadata](http://localhost:XXXX/metadata) ”URL，ServiceStack 会记住这一点，直到服务重新启动并继续重定向到无论您尝试从何处打开此页面，此 URL。

因此，重新启动服务并使用其远程地址打开元数据页面，应该没问题。

# android - 带有自定义 ImageView 的 ListView

> ID：14521118
> 
> 赞同：0
> 
> 时间：2013-01-25T11:42:39.000
> 
> 标签：android

我有一个问题困扰了我将近 3 天。我有一个带有自定义数组适配器的 ListView。一切都很标准。然后，在布局中，我有一个自定义 ImageView。我认为自定义 ImageView 存在问题，因为滚动图像会消失。

我做了一个小测试并添加了一个矩形 onDraw() 方法，它总是显示出来。我还添加了一个普通的 ImageView，它也总是显示。

问题在于有时显示图像而其他不显示图像的自定义视图。

这是一些代码

**自定义视图**

```
 public class CropTopImageView extends ImageView {
        private static Paint paint;

        public CropTopImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public CropTopImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public CropTopImageView(Context context) {
        super(context);
        init();
    }

    private void init(){
        setScaleType(ScaleType.MATRIX);
          paint = new Paint();
          paint.setStrokeWidth(20);
          paint.setColor(Color.RED);
          paint.setStyle(Paint.Style.STROKE);
    }

    @Override
    protected boolean setFrame(int l, int t, int r, int b) {

        Matrix matrix = getImageMatrix();
        float scale;
        int viewWidth = getWidth() - getPaddingLeft() - getPaddingRight();
        int viewHeight = getHeight() - getPaddingTop() - getPaddingBottom();
        int drawableWidth = getDrawable().getIntrinsicWidth();
        int drawableHeight = getDrawable().getIntrinsicHeight();

        if (drawableWidth * viewHeight > drawableHeight * viewWidth) {
            scale = (float) viewHeight / (float) drawableHeight;
        } else {
            scale = (float) viewWidth / (float) drawableWidth;
        }

        matrix.setScale(scale, scale);
        setImageMatrix(matrix);
        return super.setFrame(l, t, r, b);http://imageshack.us/a/img560/8381/example3g.png
    }

        // This is just a test
    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

          int height = this.getMeasuredHeight();
          int width = this.getMeasuredWidth();

          // Draw a border
          canvas.drawRect(10, 10, width-10, height-10, paint);
    }
} 
```

**适配器 getView**

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Log.d("CardView", "getView " + position + " " + convertView);
        ViewHolder holder = null;

        if (convertView == null) {

            convertView = (RelativeLayout) inflater.inflate(resource, null);
            holder = new ViewHolder();
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.cardImage = (CropTopImageView) convertView
                .findViewById(R.id.cardImage);

        return convertView;
    } 
```

XML 布局

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="30dip"
    android:orientation="vertical"
    android:paddingTop="30dp"
>

    <com.td.fs.android.customview.CropTopImageView
        android:id="@+id/cardImage"
        android:layout_width="246dp"
        android:layout_height="70dip"
        android:layout_centerHorizontal="true"
        android:layout_gravity="center"
         android:src="@drawable/card_visa_blue"
     />

    <com.td.fs.android.customview.CropTopImageView
        android:id="@+id/pocketImage"
        android:layout_width="275dp"
        android:layout_height="30dp"
        android:layout_centerHorizontal="true"
        android:layout_gravity="center"
        android:layout_marginTop="50dip"
        android:adjustViewBounds="true"
        android:cropToPadding="false"
        android:scaleType="fitXY"
        android:src="@drawable/holder_pocket" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/pocketImage"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="92dp"
        android:src="@drawable/home_dashboard_picker" />

</RelativeLayout> 
```

ImageView 总是显示。onDraw 总是显示。CropTopImageView src 图像第一次显示比随机消失/出现。

我不知道我是否可以展示一些图片，因为它是一个公司的项目。

**更新** ![在此处输入图像描述](../Images/79dbeb99fb07eb1175618e80df91415b.png) ![在此处输入图像描述](../Images/392024ad5a9335e4d4a990965fd414a5.png) ![在此处输入图像描述](../Images/c3b38e3f6643cee514fbffd1a82d5e0f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:56:44.973

现在我不确定这是不是答案，但我们不妨将其用作错误日志；）

您使用的油漆是静态的，如果您想记住它，这是一个很大的问题。我会尝试消除静电。

# android - 尝试购买已购买的商品时应用程序崩溃

> ID：14521121
> 
> 赞同：0
> 
> 时间：2013-01-25T11:42:51.953
> 
> 标签：android, in-app-purchase, in-app-billing

在我的应用程序中实现应用程序购买时，我在应用程序计费版本 3 中使用过，为此我遵循他们在示例代码中给出的逻辑。一切正常，但是当我尝试购买已经购买的商品时，应用程序崩溃了。

他们是否有任何控制崩溃的方法，而是向用户显示该项目已购买的敬酒消息。

干杯拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:13:12.913

您需要检查`RESPONSE_CODE`，`BILLING_RESPONSE_RESULT_ITEM_ALREADY_OWNED`如果用户已经拥有它。

见这里：http: [//developer.android.com/google/play/billing/billing_reference.html](http://developer.android.com/google/play/billing/billing_reference.html)

# android - 在应用程序关闭时截取设备屏幕截图

> ID：14521128
> 
> 赞同：1
> 
> 时间：2013-01-25T11:43:26.973
> 
> 标签：android, background, screenshot

我知道这个问题是问了很多次，但是等等我问的是不同的东西。

我关注[这篇](https://stackoverflow.com/a/5651242/1139398)文章并能够拍摄屏幕截图。但是当我的应用程序关闭时是否可以截屏。

假设我在 1 小时后设置了计时器，然后我关闭了我的应用程序。然后恰好在 1 小时后，设备需要在屏幕上拍摄屏幕截图。

这可以通过[后台服务](https://developer.android.com/training/run-background-service/create-service.html)实现吗？

我已经按照代码进行了一些研究，但这可能吗？
是否需要root设备才能截图。

请给我任何提示或参考。
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:45:13.170

尝试使用：从服务调用此库中的方法。

[http://code.google.com/p/android-screenshot-library/](http://code.google.com/p/android-screenshot-library/)

Android 屏幕截图库 (ASL) 能够以编程方式从 Android 设备捕获屏幕截图，而无需拥有 root 访问权限。相反，ASL 使用在后台运行的本机服务，每次设备启动时通过 Android 调试桥 (ADB) 启动一次。

[开发者指南](http://code.google.com/p/android-screenshot-library/wiki/DeveloperGuide)

**更新：**

您参考中提到的方法在这种情况下不起作用，因为它会读取在应用程序上下文中绘制的视图。好像应用程序已关闭，那么您就无法获得该上下文。（至少在无根电话上）。

在根设备上，您可以读取完整的帧缓冲区，因此无需担心应用程序上下文。

我确实尝试过使用 ASL 一次，结果对我有好处。

# jsf - jsf 中的 t:savestate - 对页面加载时间的影响

> ID：14521133
> 
> 赞同：1
> 
> 时间：2013-01-25T11:43:47.303
> 
> 标签：jsf

最近我遇到了一个jsp页面，我在其中看到

1.  对同一个 bean使用`<t:savestate>`两次标记。
2.  还使用`<t:savestate>`bean 的许多标签和许多该页面功能不需要但仍然存在于页面上的变量，只是过时了。

我的问题是`<t:savestate>`以上两种情况对性能/页面加载时间的观点有影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:56:11.843

`t:savestate`通过将值表达式的结果值存储在组件本身中，将数据保存在视图范围内。因此，虽然它确实对性能有一些影响，但它主要取决于对象的大小（和数量）。

如果我正确理解了它的实现（[这里的源代码](http://svn.apache.org/viewvc/myfaces/tomahawk/trunk/core20/src/main/java/org/apache/myfaces/custom/savestate/UISaveState.java?revision=1395213&view=markup)），它将保存您传递的每个值的副本，除非您传递的值是[StateHolder](http://docs.oracle.com/javaee/6/api/javax/faces/component/StateHolder.html)的实例（如几个 JSF 组件，如输入、数据表等）。

因此，您可能会很好地删除不必要的标签，以便清理。但是，如果您主要关心的是性能，我不知道它是否会有很大的不同，并且您应该在开始出于性能原因进行更改之前进行配置。

另外，请务必注意重复的`t:saveState`标签是否在同一个`h:form`. 如果它们在不同`h:form`的 s 中，则可能在两个地方都需要它们。

# mongodb - 在列表中添加项目

> ID：14521141
> 
> 赞同：-3
> 
> 时间：2013-01-25T11:44:18.903
> 
> 标签：mongodb

请参阅以下代码：

```
Collection:
 [
  {
    _id: 'abc',
    UserName: 'aaaa',
    Password: 'xxxx',
    Friends: 
          [
               {
                  FriendId: 'bbb',
                  Confirm: 1
               },
               {
                  FriendId: 'ccc'
                  Confirm: 0
               }
          ]
  },
  {
    _id: 'cdk',
    UserName: 'bbbbbbbb',
    Password: 'xxxxzz',
    Friends: 
          [
               {
                  FriendId: 'bbb',
                  Confirm: 1
               },
               {
                  FriendId: 'aaa'
                  Confirm: 0
               }
          ]
    }
  ] 
```

我想加`{ Friend: 'ddd', Confirm: 0 }`进去`item _id: 'abc'`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:51:37.500

您需要`$push`- 运算符：

```
db.collection.update( { "_id": "abc" }, { $push: { Friends: { Friend: 'ddd, Confirm: 0 } } } ); 
```

# https - SoundCloud 自定义播放器和 YouTube 嵌入播放器 on https

> ID：14521154
> 
> 赞同：0
> 
> 时间：2013-01-25T11:44:44.667
> 
> 标签：https, youtube-api, soundcloud

我在 https 网站上使用 SoundCloud 自定义播放器，一切正常，但在 chrome（html5 播放器）上，我收到控制台警报，提示播放器从 [http://ak-media.soundcloud.com](http://ak-media.soundcloud.com)加载 mp3 文件...

当 YT 嵌入播放器（不是 iframe）从 http 加载视频或跨域文件时，也会出现此警报（在 chrome yt-flash-player 上）

是否可以强制这些玩家从 https 加载源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:58:59.927

您能否澄清一下 SoundCloud 自定义播放器是什么意思？您自己的基于 Widget API 或标准（基于 iframe）的播放器？

我没有看到任何通过 HTTPS 提供的小部件的 http 请求。你能给我们举个例子吗？

# jquery - jquery即使带有没有href的标签也可以点击

> ID：14521158
> 
> 赞同：0
> 
> 时间：2013-01-25T11:44:48.730
> 
> 标签：jquery, ajax

我有一个主页，我在其中定义了一个 id 为“mydiv”的 DIV。然后我使用 ajax 在该 DIV 中加载一些链接文本。

现在，当有人单击这些链接时，我想做一些事情，所以我定义了我的 jquery，如下所示。

```
$("#mydiv > a").live('click',function(){
  alert($(this).text());
}); 
```

加载的内容如下

```
<a style="cursor:pointer;">Text 1</a>
<a style="cursor:pointer;">Text 2</a>
<a style="cursor:pointer;">Text 3</a> 
```

任何人请告诉我我做错了什么？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:46:13.260

因为您正在动态加载内容`DIV with id "mydiv"`（通过ajax）......[在](http://api.jquery.com/on/)委托事件上使用

```
$("#mydiv").on('click','a',function(e){
  e.preventDefault();  //you may not need this... but this stops the default behaviour of <a> tag 
  alert($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:49:42.167

你可以这样使用。[演示](http://jsfiddle.net/muthusamy/2VvrW/1/)

```
$(document).ready(function(){

$("a").on('click',function(){
  alert($(this).text());
});

}); 
```

html

```
 <a style="cursor:pointer;">Text 1</a>
<a style="cursor:pointer;">Text 2</a>
<a style="cursor:pointer;">Text 3</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T11:53:06.543

当您动态加载内容时，处理程序将在**jQuery 版本 1.9.0**`.on()`中用于此目的：

 **你必须到`delegate the event`或`nearest existing parent`直接到`document`（这是所有其他元素的父级）。

```
$("#mydiv").on('click','a', function(){
  alert($(this).text());
}); 
```

或者：

```
$(document).on('click','#mydiv a', function(){
  alert($(this).text());
}); 
```**

# regex - using replaceAll to get a double

> ID：14521160
> 
> 赞同：0
> 
> 时间：2013-01-25T11:44:50.900
> 
> 标签：regex, double, comma, replaceall

I need to ectract a double out of a String. The problem is, that the String looks like this:

"13,05 €"

Now I tried to extract just the number, using regex.

```
Double.parseDouble(test.getAmount().replaceAll("\\D+", "")); 
```

As u can see, there is one problem. By using \D+ the ',' also will be replaced and I don't get the correct amount. Now I thought about how to fix this. Guess I need something like: "Replace all non-digits, but ,". But I can't figure out, how to express that with regex. Does someone have an idia?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:02:16.843

使用否定字符类：

```
Double.parseDouble(test.getAmount().replaceAll("[^\\d,]+", "")); 
```

`[^\\d,]`是一个否定字符类，因为它以`^`. 所以这个类匹配所有内容，但数字和逗号除外。

[在 Regexr 上](http://regexr.com?33hmk)查看

# wso2esb - 从 wso2 esb 序列调用 wso2 数据服务时出错

> ID：14521161
> 
> 赞同：0
> 
> 时间：2013-01-25T11:44:53.730
> 
> 标签：wso2esb

我正在尝试通过 wso2 esb 序列从 wso2 数据服务中获取一些数据，如下所示

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="ConcurGetSAEExtractFlow">
   <log level="custom">
      <property name="Debugging" value="ConcurGetSAEExtractFlow" />
   </log>
   <xslt key="GetConcurSAE_Extract_Transformation" />
   <property name="post-data-service-sequence" value="ConcurTransformSAEExtractFlow" />
   <property name="OUT_ONLY" value="false" />
   <send receive="DataServiceInvocationErrorFlow">
      <endpoint key="ConcurDataServiceEndpoint" />
   </send>
   <description />
</sequence> 
```

xslt 转换 GetConcurSAE_Extract_Transformation 如下

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dat="http://ws.wso2.org/dataservice" xmlns:fn="http://www.w3.org/2005/02/xpath-functions" version="1.0">
    <xsl:template match="/">
        <xsl:element name="dat:GetConcurSAEExtract">            
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

正如所见，没有提供服务的输入映射，并且提供了输出映射。我已经在 wso2 dss "try this service" 中测试了该服务，它运行良好。但是，当我尝试通过代理通过 wso2 esb 运行它时，我收到以下错误块

```
TID: [] [WSO2 ESB] [2013-01-25 01:26:24,244]  INFO {org.apache.synapse.mediators.builtin.LogMediator} -  Debugging = ConcurGetSAEExtractFlow {org.apache.synapse.mediators.builtin.LogMediator}
TID: [] [WSO2 ESB] [2013-01-25 01:26:24,252]  WARN {org.apache.synapse.transport.nhttp.ClientHandler} -  Received an internal server error : Internal Server Error For : 10.12.46.5:9764 For Request : Axis2Request [Message ID : urn:uuid:2b34a4c3-796e-410b-aa62-47f28f88f8b7] [Status Completed : true] [Status SendingCompleted : true] {org.apache.synapse.transport.nhttp.ClientHandler}
TID: [] [WSO2 ESB] [2013-01-25 01:26:24,253]  INFO {org.apache.axis2.builder.BuilderUtil} -  OMException in getSOAPBuilder {org.apache.axis2.builder.BuilderUtil}
org.apache.axiom.soap.SOAPProcessingException: First Element must contain the local name, Envelope , but found html
        at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.constructNode(StAXSOAPModelBuilder.java:305)
        at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.createOMElement(StAXSOAPModelBuilder.java:252)
        at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.createNextOMElement(StAXSOAPModelBuilder.java:234)
        at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:249)
        at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.getSOAPEnvelope(StAXSOAPModelBuilder.java:204)
        at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.<init>(StAXSOAPModelBuilder.java:154)
        at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.<init>(StAXSOAPModelBuilder.java:140)
        at org.apache.axis2.builder.BuilderUtil.getSOAPBuilder(BuilderUtil.java:728)
        at org.apache.axis2.transport.TransportUtils.createDocumentElement(TransportUtils.java:197)
        at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:145)
        at org.apache.synapse.transport.nhttp.ClientWorker.run(ClientWorker.java:223)
        at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
TID: [] [WSO2 ESB] [2013-01-25 01:26:24,254]  INFO {org.apache.axis2.builder.BuilderUtil} -  Remaining input stream :[] {org.apache.axis2.builder.BuilderUtil}
TID: [] [WSO2 ESB] [2013-01-25 01:26:24,254]  WARN {org.apache.synapse.transport.nhttp.ClientWorker} -  Unexpected response received. HTTP response code : 500 HTTP status : Internal Server Error exception : First Element must contain the local name, Envelope , but found html {org.apache.synapse.transport.nhttp.ClientWorker}
TID: [] [WSO2 ESB] [2013-01-25 01:26:24,273]  INFO {org.apache.synapse.mediators.builtin.LogMediator} -  status = success response from DSS {org.apache.synapse.mediators.builtin.LogMediator} 
```

我无法找出导致这种错误的问题所在。请如果有人对此有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:50:31.850

您没有使用 XSLT 复制肥皂信封和标题。`<log level="full"/>`在你的调用之前和之后做一次`<xslt>`，然后你会看到你的 XSLT 也会得到一个`<soap:envelope><soap:body>...`

所以你也必须把它放在输出中。

伪代码：

```
<xsl:template match="envelope|body">
    <xsl:copy>
        <xsl:apply-templates/>
    </xsl:copy/>
</xsl:template> 
```

# jqgrid - jqGrid：将 loadonce 作为参数添加到 AJAX 请求

> ID：14521167
> 
> 赞同：0
> 
> 时间：2013-01-25T11:45:06.130
> 
> 标签：jqgrid

我有一个 PHP 脚本来处理许多不同 jqGrid 的 AJAX 请求。

我生成带有“sidx”和“sord”参数的“ORDER BY”语句以及带有“page”和“rows”参数的“LIMIT”语句。

类似于[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3afirst_grid#php_and_mysql_example_file)的 PHP 示例。

问题是，在 PHP 脚本中，我无法确定当前 jqGrid 的 loadonce 参数是否已设置。但只有在没有设置的情况下，我必须过滤返回的数据（按页和行限制）。

如何强制 jqGrid 发送附加参数？我不想改变我所有的网格。有没有一种全球性的方式来做到这一点？

**- - - 编辑 - - -**

在这个答案（[这里](https://stackoverflow.com/questions/2675625/setting-the-content-type-of-requests-performed-by-jquery-jqgrid)和[这里](https://stackoverflow.com/questions/2839721/how-to-reload-jqgrid-in-asp-net-mvc-when-i-change-dropdownlist/2842199#2842199)）的帮助下，我现在得到了这个。

```
$.extend($.jgrid.defaults, {
    postData: {
        loadingType: function() {
            var isLoadonce = $("#list1").jqGrid('getGridParam', 'loadonce');
            console.log('isLoadonce: ' + isLoadonce);
            return isLoadonce ? 'loadAll' : 'loadChunk';
        },
    },
}); 
```

如果网格的 ID 为“list1”，则此方法有效。如何在没有 ID 的情况下引用当前 Grid？

**------ 编辑 2 ------**

这似乎有效。在我看来，它有点像黑客。有没有更好的办法？

```
$.extend($.jgrid.defaults, {
    serializeGridData: function(postData) {
        var isLoadonce = $(this).jqGrid('getGridParam', 'loadonce');
        var newPostData = $.extend(postData, {
            loadingType: isLoadonce ? 'loadAll' : 'loadChunk'
        });
        return $.param(newPostData);
    },
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:56:27.960

要传入额外的参数，您可以添加：

```
 postData: { ExtraDataName: ExtraDataValue }, 
```

然后，每当 jqGrid 去获取数据时，它都会将该名称对传递给您的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:44:02.690

使用`serializeGridData`，jqGrid 提供了一个事件来修改随 Request 发送的数据。该事件是在当前 Grid 的上下文中调用的，因此我们可以使用`this`.

通过扩展`$.jgrid.defaults`，我们可以使所有网格都将其`loadonce`参数作为附加请求参数发送，而无需更改任何网格。

```
$.extend($.jgrid.defaults, {
    serializeGridData: function(postData) {
        var isLoadonce = $(this).jqGrid('getGridParam', 'loadonce');
        var newPostData = $.extend(postData, {
            loadingType: isLoadonce ? 'loadAll' : 'loadChunk'
        });
        return $.param(newPostData);
    },
}); 
```

# html - Safari 6.0.2 没有调用 onaudioprocess

> ID：14521170
> 
> 赞同：3
> 
> 时间：2013-01-25T11:45:10.723
> 
> 标签：html, audio, safari, web-audio-api

我之前已经成功使用 Web Audio API 中的*JavaScriptAudioNode*在 Chrome 和 Safari 6.0 中合成和混合音频。但是，最新版本的 Safari 似乎不再工作，因为它不调用*onaudioprocess*来填充源缓冲区。

这是一个简化的示例，它只播放静音并在每次调用*onaudioprocess*时将文本附加到文档正文：

```
<html>
<head>  
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript">    
$(document).ready(function() {
  $("a").click(function() {    
    var context = new webkitAudioContext(); 
    var mixerNode=context.createJavaScriptNode(2048, 0, 2);                

    mixerNode.onaudioprocess=function(ape) {                     
      var buffer=ape.outputBuffer;
      for(var s=0;s<buffer.length;s++)
      {  
        buffer.getChannelData(0)[s]=0;      
        buffer.getChannelData(1)[s]=0;       
      }
      $("body").append("buffering<br/>");
    };               

    $("body").html("");               
    mixerNode.connect(context.destination);               
    return false;
  });                                                          
});                         
</script>    
</head>  
<body>  
<a href="#">start</a>        
</body>  
</html> 
```

上面的示例在 Chrome 中按预期工作，但在桌面 Safari 中不起作用。iOS 版本的 Safari 也不起作用，但它一开始就对我不起作用。

调用*context.createJavaScriptNode确实会返回类型为**JavaScriptAudioNode*的正确对象，并且将其连接到目标节点不会引发任何异常。*context.activeSourceCount*保持为零，但在 Chrome 中也是如此，因为它显然只计算*AudioBufferSourceNode*类型的活动节点。*context.currentTime*也按预期递增。

我在这里做错了什么还是这是一个实际的错误或 Safari 中缺少的功能？Apple 文档没有提到*JavaScriptAudioNode*（也没有提到新名称*ScriptProcessorNode*），但它在 Safari 6 的第一个版本之前确实有效。iOS Safari 对用户输入的要求似乎没有帮助，因为上面的示例应该注意那个。

简单的例子可以在[这里](http://mod.haxor.fi/webaudiotest.html)找到，一个更复杂的例子是我的[Protracker 模块播放器](http://mod.haxor.fi/)，它表现出相同的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:42:41.427

您需要注意 Safari 的 Web Audio API 实现中的几个错误。第一个在`createJavaScriptNode`构造函数中......似乎将“输入通道”参数设置为0有问题。尝试将其更改为：

```
createJavaScriptNode(2048, 1, 2) 
```

第二个问题与垃圾收集有关（我认为）；一旦您的 mixerNode 变量超出范围，Safari 似乎停止触发`onaudioprocess`回调。一种解决方案是在顶级范围内引入mixerNode（即`var mixerNode;`在脚本顶部声明），然后将您的JavaScriptNode 存储在该顶级变量中。如果您计划动态创建多个mixerNode，则可以通过将对它们的引用存储在顶级数组变量中来实现相同的效果。

如果您进行这两项更改（输入通道参数设置为 1，保持对混合器节点的引用），那么您的脚本应该可以在 Safari 中按预期工作。

# maven - 防止在 Maven 子 pom 中覆盖依赖版本

> ID：14521176
> 
> 赞同：10
> 
> 时间：2013-01-25T11:45:22.457
> 
> 标签：maven, maven-3

我在父 pom 中有一个 dependencyManagement 部分，例如

```
<dependencyManagement>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.2.1</version>
    </dependency>
</dependencyManagement> 
```

和一个孩子 pom，拥有它

```
<dependencies>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.0</version>
    </dependency>
</dependencies> 
```

我尝试使用[enforcer plugin](http://maven.apache.org/enforcer/maven-enforcer-plugin/)防止在子 pom 中发生这种覆盖，只允许在 parent 中设置这些，但无法做到。我希望这个构建失败。用那个插件或其他方式有可能吗？

有[DependencyCovergence](http://maven.apache.org/enforcer/enforcer-rules/dependencyConvergence.html)，它强制所有版本都相同，但这太严格了，因为我不想控制所有传递依赖项 - 只是明确定义的那些。

如果我可以完全阻止在子 pom 中引入任何新的依赖项，我会很高兴 - 定义的所有内容都应该在父 pom 中定义，然后在需要时在子 pom 中提及。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T15:32:17.157

您可以在父 pom 中添加[依赖项：analyze-dep-mgt](http://maven.apache.org/plugins/maven-dependency-plugin/analyze-dep-mgt-mojo.html)执行并将其配置为在版本不匹配时失败：

```
 <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.6</version>
        <executions>
          <execution>
            <id>analyze</id>
            <phase>package</phase>
            <goals>
              <goal>analyze-dep-mgt</goal>
            </goals>
            <configuration>
              <failBuild>true</failBuild>
              <ignoreDirect>false</ignoreDirect>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

# objective-c - What is difference between a class & class interface in Objective-c?

> ID：14521181
> 
> 赞同：-4
> 
> 时间：2013-01-25T11:45:41.457
> 
> 标签：objective-c

If both are same & then why we were calling like this in Objective C?

Please clarify this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:18:40.600

@class 用于[前向引用](https://stackoverflow.com/questions/10019961/objective-c-class-directive-before-interface)，停止循环调用。

类接口，即@interface 用于创建类的蓝图/.h/ 声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:56:44.183

`@Class`当我们只想声明任何类的对象时使用。

例如：

```
in .h file

@class Mindfire;

@interface MindfireSolutions :UIViewController
{
   Mindfire*   _mindfire;

} 
```

这样做是因为我们此时既不想使用`Mindfire`类的方法，也不想设置`Mindfire`类的委托。因此，我们可以使用它来提高编译器速度。

在.m文件中，不要忘记使用这个类的方法或者访问这个类的变量这一步：

```
#import Mindfire.h
#import MindfireSolution.h

@implementation MindfireSolution

-
-
-

@end 
```

现在我们已经这样做了，因为我们将只在 .m 中使用这个类的方法。

`#import`当我们想要使用任何类的方法或者我们想要为该类设置委托时总是使用。

例如，在 .h 文件中：

```
#import Mindfire.h

@interface MindfireSolutions:UIViewController<MindfireDelegate>
{
   Mindfire*   _mindfire;
} 
```

`#import`仅当我们为任何类设置委托时才在 .h 文件中使用。

# ember.js - ember-data 不支持嵌入对象

> ID：14521182
> 
> 赞同：0
> 
> 时间：2013-01-25T11:45:47.403
> 
> 标签：ember.js, ember-data

我正在使用 ember data rev-11 和 django sweetpie。看起来现在 ember-data 不支持嵌入资源但支持侧载（django tastepie 不支持它）。什么是最好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T12:14:25.963

# 这对 Ember Data 1.0 beta+ 无效，请参阅重复答案

Ember-data 仍然支持嵌入式。您只需要正确的配置。在这里你可以怎么做：

```
DS.RESTAdapter.map('App.Foo',{
    bar:{
        embedded:'always'
    }
})

App.Foo = DS.Model.extend({
    bar: DS.belongsTo(App.Bar,{embedded:'always'}),
}); 
```

嵌入式的可用值为：*always*和*load*。

> **load**：加载时嵌入子记录，但应保存为独立记录。为了使它起作用，子记录必须有一个 ID。
> 
> **always**：加载时嵌入子记录，并嵌入保存在同一记录中。这当然会影响记录的脏度（如果子记录发生更改，适配器会将父记录标记为脏）。

类似的设置适用于 HasMany 关系，详情见此[回复](https://stackoverflow.com/a/14324532/793002)

# wcf - Photos upload to Azure via WCF Services

> ID：14521192
> 
> 赞同：0
> 
> 时间：2013-01-25T11:46:26.493
> 
> 标签：wcf, azure, windows-phone, azure-storage

I have a simple project to upload pics and Images to Azure, I have these strategies

**WINDOWS PHONE -> WCF SERVICE -> AZURE SQL**

**WINDOWS PHONE -> WCF SERVICE -> AZURE STORAGE**

**WINDOWS PHONE -> AZURE STORAGE**

However, I have these questions...

Can I go ahead with WCF Services and if yes, how to deal with large size images?

Maybe better upload from Windows Phone to Azure storage directly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:15:59.543

I would suggest that SQL database can be counted off to a large degree. storage is a much more cost effective way to store images which are essentially blobs, however - depending on your needs you might want to store metadata on the blobs in sql to assist in querying

If that is the case using a service layer can assist encapsulating the two paths - storing the blob and storing the metadata

Having said that, passing large blobs through a service is very inefficient and so, for the images themselves, phone->storage is perhaps the most compelling approach and will be the most efficient way to do so both from a coding perspective, solution components and responsiveness; the main downside with that is that it requires the phone app to have the credentials to the storage account, which is a big security risk.

Given all of this you might want to consider a combined flow -> phone->service to store metadata and receive a [shared access signature](http://wely-lau.net/2012/01/10/uploading-file-securely-to-windows-azure-blob-storage-with-shared-access-signature-via-rest-api/) token to the blob and then phone->storage, using the SAS token received, for the photo itself

you will need to handle failures in this flow to update the metadata accordingly...

slightly more complex, but with a good balance between security and performance?

# c# - 如何在postgres sql的插入查询中返回自动生成的id

> ID：14521194
> 
> 赞同：2
> 
> 时间：2013-01-25T11:46:53.653
> 
> 标签：c#, postgresql-9.1

我有一张桌子。这是我桌子的脚本：-

```
CREATE TABLE news
(
  news_id bigint NOT NULL DEFAULT nextval('news_seq'::regclass),
  title character varying(1024),
  description character varying(2024),
  CONSTRAINT pk_news_newsid PRIMARY KEY (news_id)  
)
WITH (
  OIDS=FALSE
);
ALTER TABLE news OWNER TO viewer; 
```

现在我想 `news_id`在表中插入新记录时自动生成。

**这是用于插入新闻的 C# 函数：-**

```
 public Int64 AddNews(News newNews)
    {
        string query = string.Empty;
        try
        {
            string dateFormat = ConfigurationManager.AppSettings["DateFormat"];
            NpgsqlParameter[] parm = new NpgsqlParameter[2];
            parm[0] = new NpgsqlParameter("title", newNews.NewsTitle);
            parm[1] = new NpgsqlParameter("des", newNews.NewsDescription);

            query = @" INSERT INTO   news(title, description)
                            VALUES   (:title, :des) 
                         Returning   news_id";

            int id=NpgSqlHelper.ExecuteNonQuery(connectionString, CommandType.Text, query, parm);

            return id;
        }
        catch (Exception ex)
        {
            throw new Exception(ex.Message);
        }
    } 
```

`On executing this function I always get the -1 value`

提前致谢

在 pgAdmin 上执行以下查询时会给出正确的结果：

```
INSERT INTO news(title, description)
    VALUES ('title','description')
    Returning news_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:04:39.453

您是否尝试过[NpgsqlCommand.ExecuteScalar](http://npgsql.projects.pgfoundry.org/docs/api/Npgsql.NpgsqlCommand.ExecuteScalar.html)或您正在使用的 API 的等效项？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:10:47.130

我看到了两种可能性：

1) -1 值表示您遇到回滚情况。执行该函数时，检查表：记录是成功插入还是其他情况导致回滚？如果是这样，找出导致回滚的原因（参见#2）。

2) 如果您正在运行非插入语句，也可以返回 -1 值。我知道您正在运行插入，但是该表上的任何触发器呢？您是否在触发器中执行任何 Select 语句？

希望这可以帮助。

# jquery - 在应该停止的地方做一个 div 停止，然后定位固定

> ID：14521199
> 
> 赞同：1
> 
> 时间：2013-01-25T11:47:25.643
> 
> 标签：jquery, scroll

我正在使用以下内容将 div 修复到页面的几乎顶部，但是，当页面滚动时，我想在它到达顶部之前将其停止 60px。

目前它一直到顶部，然后又跳回 60px，这很混乱！

```
function moveScroller() {
        var move = function() {
            var st = $(window).scrollTop();
            var ot = $("#scroller-anchor").offset().top;
            var s = $("#scroller");
            if(st > ot) {
                s.css({
                    position: "fixed",
                    top: "60px"
                });
            } else {
                if(st <= ot) {
                    s.css({
                        position: "relative",
                        top: ""
                    });
                }
            }
        };
        $(window).scroll(move);
        move();
    }

    $(function() {
        moveScroller();
    }); 
```

这是一个小提琴：[JSFiddle](http://jsfiddle.net/A6gYg/1/)

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:54:39.903

当您将元素位置更改为“固定”时，我调整了条件。对我来说它现在有效：

```
$(document).ready(function() {

    function moveScroller() {
        var move = function() {
            var st = $(window).scrollTop();
            var ot = $("#scroller-anchor").offset().top;
            var s = $("#scroller");
            var marginTop = 60;

            if((st+marginTop) > ot) {
                s.css({
                    position: "fixed",
                    top: marginTop + "px"
                });
            } else {
                if(st <= ot) {
                    s.css({
                        position: "relative",
                        top: ""
                    });
                }
            }
        };
        $(window).scroll(move);
        move();
    }

    $(function() {
        moveScroller();
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:02:53.113

希望这可以满足您的要求。

```
function moveScroller() {
    var st = $(window).scrollTop();
    var ot = $("#scroller-anchor").offset().top;
    var s = $("#scroller");
    if (st > ot) {
        s.css({
            position : "fixed",
            top : "60px"
        });
    } else {
        if (st <= ot) {
            s.css({
                position : "relative",
                top : ""
            });
        }
    }
}

 $(window).scroll(moveScroller);
    $(function() {
       moveScroller();
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:19:40.020

朋友抱歉，我没有看到确切的内容，但这可能会解决您的目的:)。

```
function moveScroller() {
var st = $(window).scrollTop();
var ot = $("#scroller-anchor").offset().top;
var s = $("#scroller");
if (st >= 200) {

    s.css({
        position : "fixed",
        top : "60px"
    });
} else {
    if (st <= ot) {
        s.css({
            position : "relative",
            top : ""
        });
    }
} 
```

}

```
$(window).scroll(moveScroller);
$(function() {
moveScroller();
}); 
```

# php - if/else statement not working

> ID：14521200
> 
> 赞同：0
> 
> 时间：2013-01-25T11:47:29.627
> 
> 标签：php, html

I have an issue where the if statement doesn't want to work, I'm not sure what is wrong. Regardless, it will always display the if condition. Initially, I have used a provisional code for the combo box which I'll edit later from the internet, to check if the if/else statement works, but it doesn't, and I can't see any reason why. Any clues? I'll be also adding a foreach statement into the select box, like this...

```
 <select>
    <?php
    foreach($bids as $bid)
    {
    ?>
        <option value="tbc">Some PHP code here</option>
    <?php
    }
    ?>
    </select> 
```

This is the current full code I have:

```
<div class="frontpage_sidebar_header">Quick Flight Dispatch</div>
<div class="sidebox_content">
    <?php 
    if(!$bids)
    {
    ?>
        <table width="100%" style="padding: 5px; text-align: center;">
            <tr>
                <td>You haven't booked any flights</td>
            </tr>
        </table>
    <?php
    }
    else
    {
    ?>
        <select>
            <option value="volvo">Volvo</option>
            <option value="saab">Saab</option>
            <option value="mercedes">Mercedes</option>
            <option value="audi">Audi</option>
        </select>
    <?php
    }
    ?>      
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:50:06.503

```
if(is_array($bids) && count($bids) > 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:49:15.957

如果`$bids`是一个数组，您希望`(!$bids)`解决什么问题？

你应该这样写：

```
if (count($bids) === 0) { 
```

因为这就是你的意思

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:50:28.390

尝试检查数组是否为空：`if(count($bids) != 0) {}`

# iphone - UISwitch 在 UITableView 的滚动上取消切换

> ID：14521208
> 
> 赞同：1
> 
> 时间：2013-01-25T11:48:10.797
> 
> 标签：iphone, ios, objective-c

我有一个带有 UISwitch 作为附件视图的 UITableView。我的问题是，如果我切换其中一个开关然后滚动，以便将其从视图中移出，它会返回到之前的状态。

请看[视频](http://youtu.be/orHd9n6ZXdA)。

有谁知道为什么会这样以及如何解决它？

这是添加切换视图并处理其操作的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"POICell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier ];

    //set the cell text to the
    cell.textLabel.text = [self.catNames objectAtIndex:[indexPath row]];
    NSString *toggle = [self.toggleArray objectAtIndex:[indexPath row]];
    //add switch
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    //create an instance of the database oject
    DataBase * dataBase = [[DataBase alloc] init];

    //open the database connection
    [dataBase openDB];
    NSString *imageName = [dataBase getPinImageNameFromCatID:[self.catIDs objectAtIndex:[indexPath row]]];

    //get the root file path for the images
    NSArray   *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString  *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [NSString stringWithFormat:@"%@/pinImages/%@",documentsDirectory, imageName];

    //add image
    NSURL *imageURL = [NSURL fileURLWithPath:filePath];
    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
    UIImage *image = [UIImage imageWithData:imageData];

    cell.imageView.image = image;
    NSLog(@"%@",[self.catIDs objectAtIndex:[indexPath row]]);

    UISwitch *switchView = [[UISwitch alloc] initWithFrame:CGRectZero];
    cell.accessoryView = switchView;
    [switchView addTarget:self action:@selector(switchChanged: ) forControlEvents:UIControlEventValueChanged];

    if ([toggle isEqualToString: @"OFF"]) {
        [switchView setOn:NO animated:NO];
    }else{
        [switchView setOn:YES animated:NO];
    }
    return cell;
}

- (void) switchChanged:(id)sender {

    //get the switch that it was sent from
    UISwitch *switchInCell = (UISwitch *)sender;
    //get the cell it was sent from
    UITableViewCell * cell = (UITableViewCell *) switchInCell.superview;
    //get the row it was sent from
    NSIndexPath * indexpath = [self.inputTableView indexPathForCell:cell];
    //cast the indexpath to int
    NSInteger variable = indexpath.row;
    //set the filter as off in the user defualts.
    [self.filterDic setValue:switchInCell.on ? @"ON" : @"OFF" forKey:[self.catIDs objectAtIndex:variable]];
    //store the newdic in the user defualts
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    //save the dic to user defaults
    [prefs setObject:self.filterDic forKey:@"pinFilters"];

} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:52:50.147

也许你的细胞正在被回收。

看看这里接受的答案：

[iphone：uitableview：滚动时单元格的内容发生变化](https://stackoverflow.com/questions/5870367/iphone-uitableview-contents-of-a-cell-change-on-scrolling?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:53:08.330

请用这个方法。。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"POICell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
UISwitch *switchView;
if (cell == nil)
{
    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier ];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    switchView = [[UISwitch alloc] initWithFrame:CGRectMake(0, 0, 100, 30)];//Change the frame 
    cell.accessoryView = switchView;
}
//set the cell text to the
cell.textLabel.text = [self.catNames objectAtIndex:[indexPath row]];
NSString *toggle = [self.toggleArray objectAtIndex:[indexPath row]];
//add switch

//create an instance of the database oject
DataBase * dataBase = [[DataBase alloc] init];

//open the database connection
[dataBase openDB];
NSString *imageName = [dataBase getPinImageNameFromCatID:[self.catIDs objectAtIndex:[indexPath row]]];

//get the root file path for the images
NSArray   *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString  *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [NSString stringWithFormat:@"%@/pinImages/%@",documentsDirectory, imageName];

//add image
NSURL *imageURL = [NSURL fileURLWithPath:filePath];
NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
UIImage *image = [UIImage imageWithData:imageData];

cell.imageView.image = image;
NSLog(@"%@",[self.catIDs objectAtIndex:[indexPath row]]);

[switchView addTarget:self action:@selector(switchChanged: ) forControlEvents:UIControlEventValueChanged];

if ([toggle isEqualToString: @"OFF"]) {
    [switchView setOn:NO animated:NO];
}else{
    [switchView setOn:YES animated:NO];
}
return cell;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:22:07.180

您的代码有两个问题（至少:)

让我从让你困惑的一个开始。您根据 设置每个女巫的状态`toggle`。的值`toggle`是从一个数组中提取出来的`self.toggleArray`。

到目前为止还好。但是当一个值改变并且动作`switchChanged`被调用时，你更新`self.filterDic`但你不更新`self.toggleView`。

这会导致问题：下次当单元格变为可见`cellForRowAtIndexPath`时，将再次调用它，并将基于`toggle`wich设置值`self.toggleArray`。而且它仍然具有旧的价值观……你看到了吗？

你犯这个错误可能是因为你还没有完全理解细胞循环机制。这可能是导致我发现的第二个问题的原因。让我试着解释一下。iOS 或 cocoa 分别尝试将视图单元对象分配为必要的。这意味着从屏幕上滚动的单元格被添加到池中，下次需要（类似）销售时，可以从该池中重新使用它。因此，每次需要一个新的单元格（一个可见的）时`cellForRowAtIndexPath`都会被调用。在您使用`dequeueReusableCellWithIdentifier`. 如果该池中有一个单元格使用相同的重用标识符进行了初始化，那么那个（或其中之一）将返回给调用者。在最近的 iOS（分别为 SDK 版本）版本中，如果这些单元都不存在，则将分配并返回一个新单元。（这就是为什么 Murali 的建议也不能完美运行的原因）在旧版本中，您必须检查单元格中的 nil 并在这些情况下重新分配/初始化。

之后，您可以自由分配新的子视图对象，无论单元格是否被重新循环并且是否已经具有这些子视图。然后，您一次又一次地添加并添加和添加相同的子视图。

你怎么能解决这个问题？像往常一样，有几种处理方法：

首先 - 检查细胞是否被重复使用。只需检查 Switch 是否已经存在。为此，您可以使用一些不同于 0 的值对其进行标记，并使用此标记获取子视图。如果你没有得到它，那么这个单元格是新的，你必须创建所有额外的 subvies。

第二 - 您总是可以在使用`dequeueReusableCellWithIdentifier`. 这是最简单的解决方案，因为您不必将 mutch 更改为现有代码。虽然它不是最高效的解决方案。

第三 - 最优雅的解决方案可能是`UITableViewCell`每次要向单元格添加自定义元素时进行子类化。在这种情况下，它的 init 方法只会在创建时调用一次（而不是在重用时），您可以在其中以编程方式添加所有自定义子视图。当然，您可以设计单元格并在 IB 中添加所有子视图，就像对每个`UIView`对象一样。您`cellForRowAtIndexPath`只需要关心设置适当的值。

# android - Android中的权限被拒绝如何解决？

> ID：14521210
> 
> 赞同：1
> 
> 时间：2013-01-25T11:48:14.527
> 
> 标签：android, permissions, download

我尝试了这段代码，但我总是显示错误权限被拒绝。我尝试下面的代码。

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.hope.project"
    android:versionCode="1"
    android:versionName="1.0">
     <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />

      <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
      <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
      <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.RECORD_VIDEO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />   
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />
    <uses-permission android:name="com.android.browser.permission.WRITE_HISTORY_BOOKMARKS"/>

    <application android:label="@string/app_name"
        android:icon="@drawable/ic_launcher"
        android:theme="@style/AppTheme">

         <activity android:name="com.hope.project.MainActivity" android:label="@string/app_name"
                android:theme="@android:style/Theme.Black.NoTitleBar"
                android:configChanges="keyboardHidden|orientation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

我显示错误：

```
 01-25 17:24:17.853: DEBUG/szipinf(12612): Initializing inflate state
01-25 17:24:17.853: DEBUG/szipinf(12612): Initializing zlib to inflate
01-25 17:24:19.201: DEBUG/dalvikvm(338): GC_EXPLICIT freed 17K, 5% free 6276K/6599K, paused 3ms+115ms
01-25 17:24:25.424: DEBUG/dalvikvm(206): GC_EXPLICIT freed 153K, 6% free 6730K/7111K, paused 4ms+94ms
01-25 17:25:11.912: DEBUG/SntpClient(71): request time failed: java.net.SocketException: Address family not supported by protocol
01-25 17:25:24.961: VERBOSE/log(12612): onPageFinished: file:///android_asset/www/index.html#goToNode/2
01-25 17:25:27.276: VERBOSE/log(12612):  on ovverRide about:blank
01-25 17:25:44.464: VERBOSE/log(12612): onPageFinished: file:///android_asset/www/index.html#goToNode/328
01-25 17:26:25.692: VERBOSE/log(12612): onPageFinished: file:///android_asset/www/index.html#goToNode/10
01-25 17:26:25.901: DEBUG/dalvikvm(12612): GC_CONCURRENT freed 619K, 10% free 7242K/8007K, paused 4ms+3ms
01-25 17:26:33.711: VERBOSE/log(12612): login main url http://imprintingdesign.com/hiren_testing/TestHopeNew/testHope/pdf/TheMountain.mp4
01-25 17:26:33.781: VERBOSE/log(12612): login main url[0] http://imprintingdesign.com/hiren_testing/TestHopeNew/testHope/pdf/TheMountain.mp4
01-25 17:26:35.631: ERROR/Error:(12612): /mnt/sdcard/Downloads/TheMountain.mp4 (Permission denied) 
```

和我在下面下载的课程：

```
public class MainActivity extends Activity {

    WebView myWebView;
    TextView mDisplay;
    AsyncTask<Void, Void, Void> mRegisterTask;

    String Message;
    String deviceId;
    String regId;
    IntentFilter gcmFilter;
    SharedPreferences sharedPref;
    private final String PATH = "/sdcard/download/";
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        myWebView = (WebView)findViewById(R.id.webView1);

        final JavaScriptInterface myJavaScriptInterface = new JavaScriptInterface(
                this);
        myWebView.addJavascriptInterface(myJavaScriptInterface,
                "AndroidFunction");

        WebSettings settings = myWebView.getSettings();
        settings.setJavaScriptEnabled(true);
        settings.setDatabaseEnabled(true);
        settings.setDomStorageEnabled(true);
        settings.setAllowFileAccess(true);
        settings.setBuiltInZoomControls(true);
        settings.setUseWideViewPort(true);
        settings.setJavaScriptCanOpenWindowsAutomatically(true);
        settings.setLoadWithOverviewMode(true);
        myWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

         myWebView.setWebViewClient(new WebViewClient() {  
               public boolean shouldOverrideUrlLoading(WebView view, String url)  {                  

                            //handle stuff here 
                            //e.g. view.loadUrl(url);   
                   Log.v("log"," on ovverRide " + url);
                            return true;    
                        }

                        public void onPageFinished(WebView view, String url) {
                            //dismiss the indeterminate progress dialog
                            Log.v("log", "onPageFinished: " + url);
                            myWebView.setEnabled(false);

                        } 
                    });

        myWebView.loadUrl("file:///android_asset/www/index.html");

    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
    }
    public class JavaScriptInterface {
        Context mContext;

        JavaScriptInterface(Context c) {
            mContext = c;
        }
        public void DownloadUrl(String url) {
            Log.v("log","login main url " + url);

            String file_url = url;
            new DownloadFileFromURL().execute(file_url);
            //new DownloadFromUrl(v,g);

            /*String url_new = "http://"+url;
            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setData(Uri.parse(url_new));
            startActivity(i);*/

        }
    }

    class DownloadFileFromURL extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread
         * Show Progress Bar Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            //showDialog(progress_bar_type);
        }

        /**
         * Downloading file in background thread
         * */
        @Override
        protected String doInBackground(String... f_url) {
            int count;
             Log.v("log","login main url[0] " + f_url[0]);
            try {
                URL url = new URL(f_url[0]);
                String name = f_url[0].substring(f_url[0].lastIndexOf("/") + 1);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(), 1024 * 5);

                // Output stream to write file
                //OutputStream output = new FileOutputStream("/sdcard/downloadedfile.jpg");
                OutputStream output = new FileOutputStream(Environment.getExternalStorageDirectory() + "/Downloads/"
                + name);
                byte data[] = new byte[5 * 1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    publishProgress(""+(int)((total*100)/lenghtOfFile));

                    // writing data to file
                    output.write(data, 0, count);
                }

                // flushing output
                output.flush();

                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }

            return null;
        }

        /**
         * Updating progress bar
         * */
        protected void onProgressUpdate(String... progress) 
        {
            // setting progress percentage
            //pDialog.setProgress(Integer.parseInt(progress[0]));
       }

        /**
         * After completing background task
         * Dismiss the progress dialog
         * **/
        @Override
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after the file was downloaded
            //dismissDialog(progress_bar_type);

            // Displaying downloaded image into image view
            // Reading image path from sdcard
            //String imagePath = Environment.getExternalStorageDirectory().toString() + "/downloadedfile.jpg";
            // setting downloaded into image view
            //my_image.setImageDrawable(Drawable.createFromPath(imagePath));
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:57:38.907

在 AndroidManifest.xml 中，选择编辑器底部的“Permissions”选项卡（Manifest - Application - Permissions - Instrumentation - AndroidManifest.xml），然后“Add...”一个“Uses Permission”并从右侧的下拉列表，或者只是复制粘贴到必要的下拉列表中（例如您需要的“android.permission.INTERNET”权限）。

有关更多信息，请点击此链接：http: [//developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)

# matlab - 使用内核 PCA (KPCA) 进行特征选择

> ID：14521215
> 
> 赞同：2
> 
> 时间：2013-01-25T11:48:40.953
> 
> 标签：matlab, image-processing, machine-learning, computer-vision

我已经尝试使用主成分分析 (PCA) 进行特征选择，它从一组九个特征中给了我 4 个最佳特征（绿色的平均值、绿色的方差、绿色的标准 div、红色的平均值、红色的方差、标准 div . of Red, Mean of Hue, Variance of Hue, Std. div. of Hue，即[MGcorr,VarGcorr,stdGcorr,MRcorr,VarRcorr,stdRcorr,MHcorr,VarHcorr,stdHcorr])用于将数据分类为两个簇。从文献来看，PCA 似乎不是很好的方法，而是更好地应用内核 PCA (KPCA) 进行特征选择。我想应用 KPCA 进行特征选择，我尝试了以下操作：

```
d=4; % number of features to be selected, or d: reduced dimension
[Y2 eigVector para ]=kPCA(feature,d); % feature is 300X9 matrix with 300 as number of  
                                      % observation and 9 features
                                      % Y: dimensionanlity-reduced data 
```

以上 kPCA.m 函数可从以下网址下载：http: [//www.mathworks.com/matlabcentral/fileexchange/39715-kernel-pca-and-pre-image-reconstruction/content/kPCA_v1.0/code/kPCA.m](http://www.mathworks.com/matlabcentral/fileexchange/39715-kernel-pca-and-pre-image-reconstruction/content/kPCA_v1.0/code/kPCA.m)

在上面的实现中，我想知道如何从 9 个特征中找到 4 个特征来选择（即哪些顶级特征是最佳的）进行聚类。

或者，我还尝试了 KPCA 实施的以下功能：

```
options.KernelType = 'Gaussian';
options.t = 1;
options.ReducedDim = 4;
[eigvector, eigvalue] = KPCA(feature', options); 
```

在上述实现中，我在从 9 个功能集中确定 4 个顶级/最佳功能时也遇到了同样的问题。

以上KPCA.m函数可以从： http: [//www.cad.zju.edu.cn/home/dengcai/Data/code/KPCA.m下载](http://www.cad.zju.edu.cn/home/dengcai/Data/code/KPCA.m)

如果有人能帮助我为我的问题实现内核 PCA，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T17:57:08.210

PCA doesn't provide optimal features per se. What it provides is a new set of features that are uncorrelated. When you select the "best" 4 features, you are picking the ones that have the greatest variance (largest eigenvalues). So for "normal" PCA, you simply select the 4 eigenvectors corresponding to the 4 largest eigenvalues, then you project the original 9 features onto those eigenvectors via matrix multiplication.

From the link you provided for the kernel PCA function, the return value `Y2` appears to be the original data transformed to the top `d` features of the kernel-PCA space, so the transformation is already done for you.

# ios - how to check if bounding box contains my point

> ID：14521216
> 
> 赞同：0
> 
> 时间：2013-01-25T11:48:46.400
> 
> 标签：ios, objective-c, mkmapview, coordinates, bounding-box

I wanna know if my point is in my bounding box using coordinates:

point to check:

CLLocation -> 48.847172 2.386597

bounding box :

maxLat minLat / maxLon minLon

```
"48.7998602295",
"48.8198640442",
"2.46138595581",
"2.48138619423" 
```

how can i check that ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T11:50:47.420

将[`CGRectContainsPoint`](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html#//apple_ref/c/func/CGRectContainsPoint)

```
bool CGRectContainsPoint (
  CGRect rect,
  CGPoint point
); 
```

为你工作？

您可以将 a`CLLocationCoordinate2D`转换为`CGPoint`这样的：

```
CGPoint p = (CGPoint) { loc.latitude, loc.longitude }; 
```

# ruby-on-rails - Ruby On Rails：在循环中连接字符串

> ID：14521221
> 
> 赞同：9
> 
> 时间：2013-01-25T11:49:17.037
> 
> 标签：ruby-on-rails, loops, string-concatenation

我是 RoR 的新手。我试图找到一种通过谷歌搜索在 Controller 中循环连接字符串的方法。

```
assets = Asset.where({ :current_status => ["active"] }).all
assets.each do |a|
      string = string + ":"+ a.movie_title 
end 
```

我想将属性“movie_title”连接为一个用冒号分隔的字符串。

但我得到错误

```
undefined method `+' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-25T11:51:50.783

最简单的方法可能是：

```
string = assets.collect(&:movie_title).join(':') 
```

`collect(&:movie_title)`与 相同`collect { |asset| asset.movie_title }`，它返回一个电影标题数组。`join(':')`使用 Array 中的值创建一个字符串，以 . 分隔`:`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-25T11:51:44.020

试试这个

```
assets = Asset.where({ :current_status => ["active"] }).all
string = ""
if assets.present?
 assets.each do |a|
  string = string + ":"+ a.movie_title 
 end
end 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-10-25T15:43:04.663

为什么不只是这样：

```
"#{string} : #{a.movie_title}" 
```

如果他们是 nil 你会得到`" : "`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-25T11:57:58.307

方法`join`( [docs](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join) ) 和`map`( [docs](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map) ) 可能会对您有所帮助。

尝试以下操作：

```
assets = Asset.where(current_status: ["active"]).all
assets.map(&:movie_title).join(':') 
```

# php - 循环写入文件多次或创建巨大的字符串然后写入文件？

> ID：14521222
> 
> 赞同：1
> 
> 时间：2013-01-25T11:49:18.993
> 
> 标签：php, mysql, sql, io

我只是想知道在 PHP 中哪个被认为更有效。

我需要遍历 MySQL 结果并将其输出到使用特定格式的文件，我很想知道创建一个巨大的字符串（我将经历超过 100,000 行）并将字符串写入到一个文件，还是写（附加）我想使用 fwrite 添加到文件中的内容，因为我正在查看结果？

从一开始，我相信使用很长的字符串会比继续写入文件更有效，但我想知道 PHP 在处理很长的字符串时是否会遇到任何问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:54:01.773

PHP 创建一个很长的字符串不会有问题，但是它会使用大量内存。只要您有足够的可用内存，那么这将不是问题。从内存读取和写入比写入磁盘要快得多，因此尽管使用 100,000 行，您可以将其拆分并获得两全其美的优势。

我的意思是每 10,000 行将您的字符串附加到文件中，然后清空该字符串，这样，您只需写入文件 10 次并将少量数据存储在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:53:56.523

如果您创建一个大字符串，请尝试将所有值收集到一个数组中并在写入之前将其连接在一起。字符串是不可变的，如果您只是将值附加到字符串，这将导致性能不佳。

最好的解决方案是收集例如 1000 个结果，将此部分写入文件，再收集 1000 个结果等等。

# performance - Matlab GPU 性能 fft 与简单加法

> ID：14521224
> 
> 赞同：2
> 
> 时间：2013-01-25T11:49:35.420
> 
> 标签：performance, matlab, gpu

我想知道 fft 的巨大性能差异和使用 Matlab 在 GPU 上的简单添加。我希望 GPU 上的 fft 比简单的添加要慢。但为什么会反过来呢？有什么建议么？

```
a=rand(2.^20,1);
a=gpuArray(a);
b=gpuArray(0);
c=gpuArray(1);

tic % should take a long time
for k=1:1000
    fft(a);
end
toc % Elapsed time is 0.085893 seconds.

tic % should be fast, but isn't
for k=1:1000
    b=b+c;
end
toc %  Elapsed time is 1.430682 seconds. 
```

有趣的是，如果我减少向量 a 的长度，加法（第二个循环）的计算时间会减少。

**编辑**

如果我改变两个循环的顺序，即如果先加法，加法需要 0.2 秒而不是 1.4 秒。FFT时间还是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:48:55.713

我猜 Matlab 实际上并没有运行 fft，因为输出没有在任何地方使用。此外，在您的简单加法循环中，每次迭代都依赖于前一次，因此它必须连续运行。

我不知道为什么循环的顺序很重要。也许这与第一次循环后清理 GPU 内存有关。您可以尝试`pause(1)`在循环之间调用，让您的计算机在第二个循环之前回到空闲状态。这可能会使您的时间更加一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:47:48.417

我没有带 GPU 的 2012b MATLAB 来检查这一点，但我认为您缺少 wait() 命令。2012a 年，MATLAB 引入了异步 GPU 计算。因此，当您向 GPU 发送内容时，它不会等到完成后才继续编写代码。尝试这个：

```
mygpu=gpuDevice(1);

a=rand(2.^20,1);
a=gpuArray(a);
b=gpuArray(0);
c=gpuArray(1);

tic % should take a long time
for k=1:1000
    fft(a);
end
wait(mygpu); %Wait until the GPU has finished calculating before moving on
toc 

tic % should be fast
for k=1:1000
    b=b+c;
end
wait(mygpu); %Wait until the GPU has finished calculating before moving on
toc 
```

加法的计算时间不应再取决于何时执行。你介意检查一下然后回复我吗？

# sql - SQL：如果不存在则更新，否则删除

> ID：14521225
> 
> 赞同：5
> 
> 时间：2013-01-25T11:49:35.723
> 
> 标签：sql, sql-server, sql-update, not-exists, sql-delete

我目前正在尝试编写一个脚本，将用户的角色更改为另一个，而不在 SQL Server 数据库中创建重复项。

例如：

```
User_ID      Role_ID
---------------------
A            X
A            Z
B            Y
C            X
C            Y
D            Y 
```

用户可能拥有多个角色。

我想更改它，以便角色 Y 中的所有用户现在都是角色 X 的成员，并且角色 Y 将不再存在：

```
User_ID      Role_ID
---------------------
A            X
A            Z
B            X
C            X
D            X 
```

通过将所有 Y 角色更新为 X，这可能会创建重复值；因此，如果新值不存在，我只需要更新，否则只需删除此值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:08:29.727

试试这个（[SQL 演示](http://sqlfiddle.com/#!3/bb1d56/1)）

```
--Delete records with X if same user has Y 
delete t1
from userRoles t1 join (
    select * from userRoles t2 where t2.role_id = 'y') t3
    on t1.user_id = t3.user_Id
where t1.role_id = 'x'

--Update all Y records to X
update userRoles set role_id = 'X'
where role_id = 'y'

select * from userRoles
--RESULTS
USER_ID ROLE_ID
A         X
A         Z
B         X
C         X
D         X 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:31:12.647

您可以在单个`MERGE`语句中执行此操作（它提供优化的锁定）：

```
MERGE   tbl2
USING   (
                -- Create the desired data (together with duplicates)
        SELECT  User_ID, 
                CASE WHEN Role_ID = 'Y' THEN 'X' ELSE Role_ID END Role_ID
        FROM    tbl2
) new ON tbl2.User_ID = new.User_ID AND tbl2.Role_ID = new.Role_ID
WHEN NOT MATCHED THEN
                -- Insert the updated data
        INSERT(User_ID, Role_ID) VALUES(User_ID, Role_ID)
WHEN NOT MATCHED BY SOURCE THEN
                -- Filter out the 'X'-s
        DELETE; 
```

这是一个**[SQL 小提琴](http://sqlfiddle.com/#!3/f72f5/4/0)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:36:45.700

这可以通过以下方式完成`MERGE`：

```
DECLARE @T TABLE (User_ID CHAR(1), Role_ID CHAR(1));
INSERT @T (User_ID, Role_ID)
VALUES ('A', 'X'), ('A', 'Z'), ('B', 'Y'), ('C', 'X'), ('C', 'Y'), ('D', 'Y');

SELECT  *
FROM    @T;

WITH Y AS
(   SELECT  *,
            [d] = COUNT(*) OVER(PARTITION BY User_ID)
    FROM    @T
    WHERE   Role_ID IN ('Y', 'X')
), X AS 
(   SELECT  *
    FROM    @T
    WHERE   Role_ID = 'X'
)
MERGE INTO Y 
USING X ON X.User_ID = Y.User_ID
WHEN MATCHED AND Y.Role_ID = 'Y' AND d > 1 THEN DELETE
WHEN NOT MATCHED BY SOURCE THEN UPDATE
    SET Role_ID = 'X';

SELECT  *
FROM    @T; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:17:30.520

你首先必须清理你的表：

```
DECLARE
  @originalRole char(1) = 'Y',
  @newRole char(1) = 'X'

DELETE [r1] 
FROM [Roles] [r1]
WHERE [r1].[Role_ID] = @originalRole
  AND EXISTS(SELECT *
             FROM [Roles] [r2]
             WHERE [r2].[User_ID] = [r1].[User_ID] AND [r2].[Role_ID] = @newRole) 
```

在此之后，更新剩下的行（如果有）：

```
UPDATE [Roles]
SET [Role_ID] = @newRole
WHERE [Role_ID] = @originalRole 
```

这是[小提琴](http://sqlfiddle.com/#!3/5a2ff/2)。

# php - 使用 API 从 iTunes 获取专辑详细信息

> ID：14521230
> 
> 赞同：1
> 
> 时间：2013-01-25T11:50:01.810
> 
> 标签：php, api, itunes

我有一个流式音频应用程序（在线 FM 频道）。我必须获取有关当前在收音机上播放的专辑的详细信息。我只有专辑标题和艺术家姓名。歌曲的 Track Id 从 API 变为空（我正在使用 TD Player API）。

主要问题是我没有获得歌曲的所有信息，如封面 url、按 url 排序（iTunes 商店）等。但是当我得到这个曲目 ID 时，我可以使用他们的 API 从 iTunes 商店获得歌曲的所有详细信息。

所以我的 qstion 是使用专辑标题和艺术家姓名从 iTunes 获取曲目 ID 或完整专辑信息的任何方式。？？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T04:01:53.440

Search API 有一些参数可以帮助限定您想要返回的内容。

首先，您不能同时搜索专辑名称和艺术家。您可以将两者都放在“术语”字段中并希望最好，但如果您知道的话，最好在专辑级别搜索。

[https://itunes.apple.com/search?term=Live+at+Wembley+Stadium&attribute=albumTerm&entity=song](https://itunes.apple.com/search?term=Live+at+Wembley+Stadium&attribute=albumTerm&entity=song)

attribute=albumTerm 向 API 表明您希望您的“术语”与专辑标题严格相关，而不是任何其他元信息。

entity=song 告诉 API 您希望返回所有歌曲，而不仅仅是专辑信息（默认）。

此外，如果您只有艺术家姓名，您的搜索可能如下所示：

[https://itunes.apple.com/search?term=Queen&attribute=artistTerm&entity=song&limit=300](https://itunes.apple.com/search?term=Queen&attribute=artistTerm&entity=song&limit=300)

不幸的是，这返回了 Queen 的 300 首歌曲。如果此请求中未返回您期望的链接，您将需要进一步优化您的搜索。

# html - .each 语句中的 Ruby on rails 错误

> ID：14521231
> 
> 赞同：1
> 
> 时间：2013-01-25T11:50:03.133
> 
> 标签：html, mysql, ruby-on-rails

```
<% temp1= "secondary" %>
<% @query = "select  credentials_id from credentials where credentials_id LIKE '%" + temp1 + "%'" %>
<% Request.connection.execute(@query) %>

<% if @query.blank? %>
    <p>These are no  secondary users still created </p>
<% else %>
    <% @query.each do |c| %>
        <%= label_tag(:credentials_id,c.credentials_id)%>
    <%end%>
<%end%> 
```

我正在尝试执行上面写在“admin.html.erb”文件中的代码，但出现以下错误：

> # 的未定义方法“每个”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:56:07.343

`@query`变量只是`String`一个. 如果要遍历该字符串上的每个字符，则应使用`each_char`方法。

我真的相信您正在迭代错误的变量。我认为你想迭代你的查询结果，而不是你的查询字符！为此，您应该执行以下操作：

```
<% @query_result = Request.connection.execute(@query) %>
<% @query_result.each do |c| %>
    <%= label_tag(:credentials_id,c.credentials_id)%>
<%end%> 
```

# java - 焊缝未注入

> ID：14521232
> 
> 赞同：3
> 
> 时间：2013-01-25T11:50:04.977
> 
> 标签：java, weld

我正在尝试在 java SE 中建立一个非常简单的焊接实现。

我有扩展类：

```
public class MyExtension implements Extension {

    void beforeBeanDiscovery(@Observes BeforeBeanDiscovery bbd) {
        System.out.println("Starting scan...");
    }      
    <T> void processAnnotatedType(@Observes ProcessAnnotatedType<T> annotatedType, BeanManager beanManager) {
        System.out.println("Scanning type: " + annotatedType.getAnnotatedType().getJavaClass().getName());
    } 
    void afterBeanDiscovery(@Observes AfterBeanDiscovery abd) {
        System.out.println("Finished the scanning process");
    }

    public void main(@Observes ContainerInitialized event) {
        System.out.println("Starting application");
        new Test();
    }
} 
```

然后我有一个要注入的简单类：

```
public class SimpleClass {
    public void doSomething() {
        System.out.println("Consider it done");
    }
} 
```

最后是我想注入的类：

```
public class Test {

    @Inject
    private SimpleClass simple;

    @PostConstruct
    public void initialize() {
        simple.doSomething();
    }

    @PreDestroy
    public void stop() {
        System.out.println("Stopping");
    }
} 
```

结果输出是：

```
80 [main] INFO org.jboss.weld.Version - WELD-000900 1.1.10 (Final)
272 [main] INFO org.jboss.weld.Bootstrap - WELD-000101 Transactional services not available. Injection of @Inject UserTransaction not available. Transactional observers will be invoked synchronously.
Starting scan...
Scanning type: test.Test
Scanning type: test.SimpleClass
Scanning type: test.MyExtension
640 [main] WARN org.jboss.weld.interceptor.util.InterceptionTypeRegistry - Class 'javax.ejb.PostActivate' not found, interception based on it is not enabled
640 [main] WARN org.jboss.weld.interceptor.util.InterceptionTypeRegistry - Class 'javax.ejb.PrePassivate' not found, interception based on it is not enabled
Finished the scanning process
Starting application 
```

我希望在构造 Test() 时注入简单的类，并调用应该输出预期文本的 postconstruct 方法。

我到底做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T11:58:17.157

您的代码有两个问题：

**问题1**：

CDI 不管理使用`new`. 在大多数情况下，您需要 @Inject 一个 bean 以便其生命周期由容器管理

**问题2：**

在大多数情况下，您不能将 bean 实例注入到容器事件的观察者中。这是因为事件在容器初始化时触发，也就是在它可以实际开始管理对象生命周期之前。

您可以将容器初始化程序观察者直接挂接到您的 Test 类中。像这样的东西：

```
public class SimpleClass {
    public void doSomething() {
        System.out.println("Consider it done");
    }

   @PostConstruct
    public void initialize() {
        System.out.println("Starting");
    }

    @PreDestroy
    public void stop() {
        System.out.println("Stopping");
    }
}

public class Test {

    @Inject
    private SimpleClass simple;

    public void main(@Observes ContainerInitialized event) {
        System.out.println("Starting application");
        simple.doSomething();
    }       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:03:59.963

你做错了什么是打电话`new Test()`。这构造了一个新的 Test 实例，但在 CDI 的后面。为了让 CDI 注入您的测试实例，CDI 必须自己创建它。

请参阅[文档以了解如何在 Java SE 环境中增强 Weld](http://docs.jboss.org/weld/reference/1.1.5.Final/en-US/html_single/#d0e5408)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T13:45:15.600

使用 @ApplicationScoped 创建一个 utils 类。这个类可以产生各种类型的对象。在您的情况下，就像这样：

```
@Produces
static SimpleClass generateSimpleClass(){
return new SimpleClass();
} 
```

否则，如果您的 simpleclass 将成为应用程序中的唯一类，请将其类设置为 @ApplicationScoped。问题是如果既没有注解也没有生产者，weld 不知道该类属于容器

# .net - 正则表达式最少任意两个单词且总长度大于 5

> ID：14521235
> 
> 赞同：0
> 
> 时间：2013-01-25T11:50:10.087
> 
> 标签：.net, regex, asp.net-mvc-3

在 .net MVC 应用程序中，我需要正则表达式来验证输入中的至少两个单词，并且输入的最小长度应该大于 5。（允许的特殊字符只有“。”并且不允许使用数字）

目前我正在使用

```
^([a-zA-Z\.\s]{5,})+$. 
```

两个字都行不通。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T14:43:15.150

听起来你可能需要类似的东西：

```
^[a-zA-Z\.]{6,} [a-zA-Z]{6,} .+$ 
```

这将根据您的规范匹配 2 个单词，然后允许字符数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:42:58.700

如果输入的总长度应大于 5： `"^([a-zA-Z.\\s]{6,})$"`- 它对我来说很好。

如果每个单词的长度应大于 5： `"^([a-zA-Z]{6,}[\\s.]*)++$"`

# android - Android/Facebook：获取哈希键

> ID：14521237
> 
> 赞同：0
> 
> 时间：2013-01-25T11:50:20.867
> 
> 标签：android, facebook, eclipse, hash, key

> **可能重复：**
> [Facebook Android 生成密钥哈希](https://stackoverflow.com/questions/5306009/facebook-android-generate-key-hash)

我正在尝试获取一个哈希键，以便在我的 android 应用程序中使用 facebook。我下载了 openssl 并把它放在 java\jre7\bin

这是我在控制台中输入的内容

```
C:\Program Files (x86)\Java\jre7\bin>keytool -exportcert -alias androiddebugkey
-keystore C:\Users\morgane\.android\debug.keystore ¦ C:\Program Files (x8
6)\Java\jre7\bin\openssl.exe sha1 -binary ¦ openssl base64 
```

我有这个错误：

> 非法选项：ª
> keytool -exportcert [OPTION]...

我不知道字符 ª 的含义以及如何解决我的错误。

顺便说一句，使 fb 与 android 应用程序一起工作所必需的关键是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:21:11.903

我敢打赌，它是管道字符，它不被识别`cmd.exe`，而是作为参数传递给`keytool`它，这会导致`keytool`. 如果您从某处复制/粘贴管道字符，请尝试自己在键盘上键入管道字符。

# android - 将发现的蓝牙设备写入文本文件

> ID：14521248
> 
> 赞同：1
> 
> 时间：2013-01-25T11:51:21.900
> 
> 标签：android, bluetooth, broadcastreceiver, text-files

我编写了一个代码，它应该发现蓝牙设备并将其写入文本文件。但是在写入文本文件时，只写入最后找到的设备，其余的将被忽略。

例如，我的设备发现“abcd”、“efgh”和“ijkl”蓝牙设备，只有“ijkl”被写入文本文件。

如何将所有发现的设备写入文本文件？

下面是我的广播接收器的代码

```
 private final BroadcastReceiver bcReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if(BluetoothDevice.ACTION_FOUND.equals(action)){
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

            deviceName = device.getName();

            try{
                File root = new File(Environment.getExternalStorageDirectory(), "Folder");
                if(!root.exists()){
                    root.mkdirs();
                }
                File deviceFiles = new File(root, "File");
                FileWriter writer = new FileWriter(deviceFiles);
                writer.append(deviceName);
                writer.flush();
                writer.close();
            }catch(IOException e){
                e.printStackTrace();
            }
            btArrayAdapter.add(deviceName);
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:58:45.110

发生这种情况是因为，每次找到新设备时，您都在创建一个新文件。因此，在将**abcd**设备保存在文件中（例如**DeviceFile**）之后，它会搜索下一个设备，在找到**efgh**时，它会创建一个文件**DeviceFile**来替换旧设备。因此只有最后一个设备保存在文件中。

因此，在开始扫描之前创建文件。

**编辑-**

```
 private final BroadcastReceiver bcReceiver = new BroadcastReceiver() {
        File deviceFiles;

        @Override
        public void onReceive(Context context, Intent intent) {
            try {
                File root = new File(
                        Environment.getExternalStorageDirectory(), "Folder");
                if (!root.exists()) {
                    root.mkdirs();
                }
                deviceFiles = new File(root, "File");
            } catch (Exception e) {

            }
            String action = intent.getAction();
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                BluetoothDevice device = intent
                        .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                deviceName = device.getName();
                try {
                    BufferedWriter out = new BufferedWriter(new FileWriter(
                            "deviceFiles", true));
                    out.write(deviceName);
                    out.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                btArrayAdapter.add(deviceName);
            }
        }
    }; 
```

虽然我还没有测试过。刚刚实现了逻辑。必要时进行相关调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:12:30.957

首先 - 按照 Sahil 的建议，在开始扫描之前创建文件。
还可以使用参数以附加模式打开文件-

```
writer = new FileWriter(deviceFiles, true);
writer.write(deviceName); 
```

# magento - Magento 升级错误：Uri 不包含主机部分

> ID：14521252
> 
> 赞同：2
> 
> 时间：2013-01-25T11:51:38.510
> 
> 标签：magento, terminal, ubuntu-12.04

我正在尝试通过终端使用以下指南在 ubuntu 12.04 上从 Magento 1.4.1 升级到最新版本：

[http://turnkeye.com/blog/magento-upgrade-guide/](http://turnkeye.com/blog/magento-upgrade-guide/)

但是，当我通过法师运行命令时，例如：

```
./mage list-upgrades 
```

或者

```
./mage upgrade-all --force 
```

我收到错误“Uri 不包含主机部分”

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-31T17:20:25.177

您缺少 php5-curl。

在 ubuntu（或任何基于 debian 的）系统上，您可以使用以下命令安装它：

```
sudo apt-get install php5-curl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T04:01:33.520

确保您的堆栈包含所有必需的软件包（php5、php5-curl、php5-mcrypt、php5-gd），如果没有，则 apt-get 安装它们并重新启动您的堆栈。

# ebay-api - eBay API AddItem Ebay 调用返回错误 314“您无法为 StoresFixedPrice 列表类型创建 Shop Buy It Now 项目列表”

> ID：14521253
> 
> 赞同：0
> 
> 时间：2013-01-25T11:51:43.090
> 
> 标签：ebay-api

我在通过 eBay API 添加产品时遇到问题，使用`AddItem`,`GTC`作为持续时间和`StoresFixedPrice`作为列表类型：

```
<ListingDuration>GTC</ListingDuration>
<ListingType>StoresFixedPrice</ListingType> 
```

作为回复，我收到错误 314：

> 您无法创建 Shop Buy It Now 商品列表。只有 Shop 所有者可以创建 Shop Buy It Now 列表。

但是，我是 eBay 上的“基本商店”所有者。

这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:20:01.257

似乎 StoresFixedPrice 不再可用作列表类型值

> 请不要列出列表类型为“StoresFixedPrice”的项目。在 Add/Revise/Relist 系列调用中不应再使用此枚举值。

此值也不会出现在 Call Reference 中的列表类型的可能值列表中

# jquery - 使用 JQuery 删除 LI 的问题

> ID：14521258
> 
> 赞同：2
> 
> 时间：2013-01-25T11:51:56.143
> 
> 标签：jquery, html-lists

我正在使用`<ul>`和制作导航栏`<li>`

我的第一个数据像（html）

```
 <ul id="menu_xml_txt">
     <li id="1"> Root Catalog </li>
 </ul> 
```

当点击`Root Catalog`它会替换这一切`<li>`它会喜欢

```
<ul id="menu_xml_txt">
 <li id="2">Apparel</li> 
 <li id="3">Accessories</li>
</ul> 
```

等等。当您单击时，它将更改并替换为全新的`<li>`

当您单击`<li>`它时，它将添加到`div=reg_navlist`我正在使用`.append`的 jquery 函数中

然后它会喜欢

```
<ul id="reg_navlist">
 <li id="1">Root Catalog</li>  
 <li id="3">Accessories</li> 
 <li id="45">bla bla..</li> 
 <li id="80">bla bla..</li> 
 <li id="95">bla bla..</li> 
 <li id="115">bla bla..</li> 
 </ul> 
```

我只想删除那些`<li>`我点击了 & li 并在它之后出现的元素，例如，如果我点击了 where`<li id=45>`则 id=45 和 id= 80、id=95 和 id=115 将被删除而不是 id =1 和 id=3

我试过这个 jQuery 代码

```
 j('#region_navlist li').live('click', function() {
    var cliked_id = j(this).attr('id');
    j('#region_nav li:not(:first)').remove();
}); 
```

但它正在删除所有`<li>`不是第一个的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T12:00:58.910

做：

```
j('#region_navlist li').on('click', function() {
    j(this).nextAll().andSelf().remove();
}); 
```

参见：[andSelf()](http://api.jquery.com/andSelf/)和[nextAll()](http://api.jquery.com/nextAll/)

```
Note:- .live() is deprecated you use .on() if version 1.7 
```

# perl - 在perl中使用grep在excel中精确匹配单词

> ID：14521259
> 
> 赞同：0
> 
> 时间：2013-01-25T11:51:56.647
> 
> 标签：perl, unix

我正在尝试使用 perl 在 csv 文件中搜索文本。但我需要完全匹配，让我们看看我是否正在搜索一个我不想让脚本在结果中显示 US 的单词。我曾尝试在开头和结尾使用“” & /b，如果我将值从 CSV 存储到数组，它可以工作，但如果我想直接在 CSV 中搜索，它不起作用。我的 $curr = U if(grep $curr, "test.csv") print "Done"

这向我展示了美国作为输出

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:15:36.003

首先，让我纠正你的一个误解。这个：

```
grep "U", "test.csv" 
```

...不是string`grep`的文件，它为计算结果为 true的项目的字符串列表进行 greps （这是所有项目，始终为 true）。在 Perl 中，应用于参数列表，如下所示：`test.csv``U``test.csv``"U"``"U"``grep`

```
grep /foo/, @list; 
```

但是，您不需要这样做`grep`。使用它意味着将整个文件读入内存来为`grep`.

我假设您在这里寻找的是一种简单的方法来检查 csv 文件中的确切字符串。一种简单的方法是使用否定的环视断言：

```
my $del = ",";     # your csv delimiter
my $search = "U";  # the text you search for

while (<>) {
    print if /(?<![^$del])$search(?![^$del])/;
} 
```

`(?<![^$del])`断言字符串之前的字符不是非分隔符，同样断言`(?![^$del])`后面的字符不是非分隔符。双重否定可能看起来很复杂，但好处是它们还匹配搜索字符串没有被两边的分隔符包围的条件，即 csv 行的开头或结尾。

此处的菱形运算符将打开作为脚本参数提供的文件，并在 while 循环的每次迭代中通读其内容。例如：

```
perl mygrep.pl test.csv 
```

这不是一个完整的解决方案，但它应该让您知道如何到达目的地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:17:34.050

```
perl -lne 'print if(/\bU\b/)'' your_csv_file 
```

测试如下：

```
> cat temp
info   info US   info    cat
info   info U   info    cow
info   info    info    dog
info   info U   info    dinosaur 
info   info    info    bat
phoenix.209> perl -lne 'print if(/\bU\b/)' temp
info   info U   info    cow
info   info U   info    dinosaur 
```

或者您也可以在命令行上使用 grep，如下所示

```
> grep -w U temp
info   info U   info    cow
info   info U   info    dinosaur 
```

# oracle - ORACLE SELECT GROUP BY + 我不知道的东西

> ID：14521261
> 
> 赞同：0
> 
> 时间：2013-01-25T11:52:09.270
> 
> 标签：oracle, select, group-by, max, min

我在 ORACLE 数据库中有一个表，详细信息如下：

```
--------------------------------------------
|                  FRUITS                  |
--------------------------------------------
| FRUIT_NAME | GROWTH_TIME | GROWTH_PLACE  |
--------------------------------------------
|      melon |        0600 |        shelf1 |
|      melon |        0630 |        shelf1 |
|      melon |        0700 |        shelf1 |
|      melon |        0730 |        shelf1 |
|      melon |        0800 |        shelf1 |

|     orange |        0600 |        shelf5 |
|     orange |        0630 |        shelf5 |
|     orange |        0700 |        shelf5 |
|     orange |        0730 |        shelf5 |
|     orange |        0800 |        shelf5 |
|     orange |        0830 |        shelf5 |
|     orange |        0900 |        shelf5 |
|     orange |        0930 |        shelf5 |
|     orange |        1000 |        shelf5 |

|     orange |        1200 |        shelf5 |
|     orange |        1230 |        shelf5 |
|     orange |        1300 |        shelf5 |
|     orange |        1330 |        shelf5 |
|     orange |        1400 |        shelf5 |

|      apple |        0600 |        shelf3 |
|      apple |        0630 |        shelf3 |
|      apple |        0700 |        shelf3 |
|      apple |        0730 |        shelf3 |
|      apple |        0800 |        shelf3 |
--------------------------------------------
```

我想得到如下结果：

```
--------------------------------------------
| FRUIT_NAME | GROWTH_TIME | GROWTH_PLACE  |
--------------------------------------------
|      melon |   0600-0800 |        shelf1 |

|     orange |   0600-1000 |        shelf5 |
|     orange |   1200-1400 |        shelf5 |

|      apple |   0600-0800 |        shelf3 |
```

或像这些：

```
-------------------------------------------------------------------
| FRUIT_NAME | GROWTH_START_TIME | GROWTH_END_TIME | GROWTH_PLACE |
-------------------------------------------------------------------
|      melon |              0600 |            0800 |       shelf1 |

|     orange |              0600 |            1000 |       shelf5 |
|     orange |              1200 |            1400 |       shelf5 |

|      apple |              0600 |            0800 |       shelf3 |
```

ORANGE 表壳有一个小间隙（在 1000 和 1400 之间），这仍然是同一个架子，但时间上的差距很小。它发生了，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:13:06.383

您可以通过分析解决此问题：

```
SQL> select fruit_name, min(growth_time) || '-' || max(growth_time) growth_time, growth_place
  2    from (select fruit_name, growth_place, growth_time,
  3                 max(grp) over(partition by fruit_name, growth_place order by growth_time) grp
  4             from (select fruit_name, growth_time, growth_place,
  5                          case
  6                            when to_date(lag(growth_time, 1)
  7                                   over(partition by fruit_name, growth_place order by growth_time), 'hh24mi')
  8                                 < to_date(growth_time, 'hh24mi') - (30/1440)
  9                            then
 10                              row_number() over(partition by fruit_name, growth_place order by growth_time)
 11                            when row_number() over(partition by fruit_name, growth_place order by growth_time) = 1
 12                            then
 13                              1
 14                          end grp
 15                      from fruits))
 16   group by fruit_name, growth_place, grp
 17   order by fruit_name, growth_time
 18  /

FRUIT_ GROWTH_TIME                              GROWTH
------ ---------------------------------------- ------
apple  0600-0800                                shelf3
melon  0600-0800                                shelf1
orange 0600-1000                                shelf5
orange 1200-1400                                shelf5 
```

即首先我们将结果集分成组，其中组被定义为给定水果/货架的连续日期。

我们通过检查前一个日期并查看它是否 < 当前行日期 - 30 分钟来做到这一点

```
lag(growth_time, 1) over (partition by fruit_name, growth_place order by growth_time) 
```

由此我们可以得出前一行比这一行早 30 分钟以上的组：

```
SQL> select fruit_name, growth_time, growth_place,
  2         case
  3           when to_date(lag(growth_time, 1)
  4                over(partition by fruit_name, growth_place order by growth_time), 'hh24mi')
  5                < to_date(growth_time, 'hh24mi') - (30/1440)
  6           then
  7             row_number() over(partition by fruit_name, growth_place order by growth_time)
  8           when row_number() over(partition by fruit_name, growth_place order by growth_time) = 1
  9           then
 10             1
 11         end grp
 12    from fruits;

FRUIT_ GROW GROWTH        GRP
------ ---- ------ ----------
apple  0600 shelf3          1
apple  0630 shelf3
apple  0700 shelf3
apple  0730 shelf3
apple  0800 shelf3
melon  0600 shelf1          1
melon  0630 shelf1
melon  0700 shelf1
melon  0730 shelf1
melon  0800 shelf1
orange 0600 shelf5          1
orange 0630 shelf5
orange 0700 shelf5
orange 0730 shelf5
orange 0800 shelf5
orange 0830 shelf5
orange 0900 shelf5
orange 0930 shelf5
orange 1000 shelf5
orange 1200 shelf5         10
orange 1230 shelf5
orange 1300 shelf5
orange 1330 shelf5
orange 1400 shelf5 
```

现在我们只需使用 max() 分析将组分配给每一行：

```
SQL> select fruit_name, growth_place, growth_time,
  2         max(grp) over(partition by fruit_name, growth_place order by growth_time) grp
  3    from (select fruit_name, growth_time, growth_place,
  4                 case
  5                 when to_date(lag(growth_time, 1)
  6                        over(partition by fruit_name, growth_place order by growth_time), 'hh24mi')
  7                      < to_date(growth_time, 'hh24mi') - (30/1440)
  8                 then
  9                   row_number() over(partition by fruit_name, growth_place order by growth_time)
 10                 when row_number() over(partition by fruit_name, growth_place order by growth_time) = 1
 11                 then
 12                   1
 13               end grp
 14          from fruits);

FRUIT_ GROWTH GROW        GRP
------ ------ ---- ----------
apple  shelf3 0600          1
apple  shelf3 0630          1
apple  shelf3 0700          1
apple  shelf3 0730          1
apple  shelf3 0800          1
melon  shelf1 0600          1
melon  shelf1 0630          1
melon  shelf1 0700          1
melon  shelf1 0730          1
melon  shelf1 0800          1
orange shelf5 0600          1
orange shelf5 0630          1
orange shelf5 0700          1
orange shelf5 0730          1
orange shelf5 0800          1
orange shelf5 0830          1
orange shelf5 0900          1
orange shelf5 0930          1
orange shelf5 1000          1
orange shelf5 1200         10
orange shelf5 1230         10
orange shelf5 1300         10
orange shelf5 1330         10
orange shelf5 1400         10 
```

现在剩下的就是最后一组，`GRP`以获得最终答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:59:05.957

可以使用[LEAD](http://www.techonthenet.com/oracle/functions/lead.php)函数，使用按 GROWTH_TIME 排序的 FRUIT_NAME 分区，得到下一条记录的 GROWTH_TIME，与当前的比较可以知道是否有间隙。

```
SELECT FRUIT_NAME , MIN(GROWTH_TIME ) || '-' || MAX(GROWTH_TIME ), GROWTH FROM (
    SELECT FRUIT_NAME , GROWTH_TIME , 
    NVL(lead (GROWTH_TIME ) over (partition by FRUIT_NAME  order by GROWTH_TIME ) -   GROWTH_TIME , 0) as gap
    FROM FRUITS
  )
GROUP BY FRUIT_NAME, gap
HAVING (gap <= 70) 
```

# php - 自定义 php 脚本上的 Magento 会话未显示在 phtml 页面上 - ajax

> ID：14521264
> 
> 赞同：0
> 
> 时间：2013-01-25T11:52:23.033
> 
> 标签：php, ajax, magento, session

我在 Magento phtml 文件中有一些带有 ajax 的 jQuery，该文件发布到我拥有的自定义 php 脚本。我想要做的是在自定义 php 脚本中创建一个 Magento 会话，该值在进行 ajax 调用的 phtml 文件中可用。

例如 phtml 文件（类别列表页面）有 ajax 调用：

```
$.ajax({     
type: "POST",     
url: "/php/process.php",     
data: dataString,     
success: function(){       
location.reload();
    }     
    }); 
```

成功调用了我的自定义 php 脚本（process.php）。

process.php 包含以下用于测试的代码：

```
require_once ("/app/Mage.php");
umask(0);
Mage::app();  
$returnedString= "123";
Mage::getSingleton('core/session')->setMyValue($returnedString); 
```

我也用 session_start() 试过这个。

现在在 phtml 文件中测试会话是否处于活动状态，我有以下测试代码：

```
if(Mage::getSingleton('core/session')->getMyValue()=='123'):
   echo "Session created";
else:
   echo "Session not created";
endif; 
```

如果我在 phtml 文件中显示会话数组，则会话也不可见。我不确定我哪里出错了。

任何帮助是极大的赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:49:28.317

你正在尝试的是不可能的。phtml 文件是在您对网站的第一次请求时解释的。在解释之后，您会得到一个带有 javascript 的 html 文件作为服务器的响应。之后，您的浏览器会解释 Javascript 并执行 ajax 调用。这是一个全新的要求。您的 phtml 文件不会再次呈现或解释。

当您想用一些内容来实现您的网站时，您必须将该内容作为对您的 ajax 调用的响应。

# n2cms - 如何让 N2CMS 默认在管理界面显示编辑页面？

> ID：14521267
> 
> 赞同：0
> 
> 时间：2013-01-25T11:52:37.263
> 
> 标签：n2cms, n2

当我在 N2 管理/管理界面中时，如果我单击树中的一个节点，默认情况下它会显示该页面的输出。我可以通过右键单击节点并单击“编辑”来显示该节点的编辑屏幕。我可以通过单击节点来显示该节点的编辑屏幕吗？我可以在 web.config 中更改一些设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:56:48.683

所以我在上面的问题上留下的评论并没有真正回答这个问题（它只适用于根节点）。但是，N2 中的几乎所有东西都是可插拔的，因此您可以使用依赖注入框架将编辑界面中生成 URL 的代码替换为您自己的代码，如下所示：

```
using N2.Configuration;
using N2.Edit;
using N2.Engine;
using N2.Web;

namespace MyWebsite
{
    [Service(typeof(IEditUrlManager), Replaces = typeof(EditUrlManager))]
    public class MyEditUrlManager : EditUrlManager
    {
        public MyEditUrlManager(IUrlParser parser, EditSection config)
            : base(parser, config)
        {

        }

        public override string GetPreviewUrl(N2.ContentItem selectedItem)
        {
            return GetEditExistingItemUrl(selectedItem);
        }
    }
} 
```

# php - OffLiberty.com 如何解析链接以获取文件？

> ID：14521268
> 
> 赞同：4
> 
> 时间：2013-01-25T11:52:38.577
> 
> 标签：php, parsing, mp3

有人知道他们是怎么做到的吗？我目前使用 OffLiberty.com 来解析 Mixcloud 链接以获取原始 MP3 URL，以便在自定义 HTML5 播放器中使用以实现 iOS 兼容性，我只是想知道是否有人知道他们的流程到底是如何工作的，所以我可以创建类似的东西可以这么说，这样我的最终用户就不必去外部站点获取他们想要发布的混音的 MP3 链接。真的只是一个想法，如果它不能完成，并不是非常重要，但它会是一个很好的接触:)

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T12:39:59.927

请注意，**我反对内容抓取**，**您应该请求这些网站允许**抓取他们的 MP3 URL。否则，如果我是他们，我会立即阻止您并*广告 vitam æternam*。

无论如何，您可以使用[`DOMDocument`](http://www.php.net/manual/en/class.domdocument.php).

例如 ：

```
<?php
// just so you don't see parse errors
$internal_errors = libxml_use_internal_errors(true);     
// initialize the document
$doc = new DomDocument();
// load a page
$doc->loadHTMLFile('http://www.mixcloud.com/LaidBackRadio/le-motel-on-the-road/');
// initialize XPATH for the document
$xpath = new DomXPath($doc);
// span with "data-preview-url" seems to contain MP3 url
// we request them inside a DomNodeList http://www.php.net/manual/en/class.domnodelist.php
$mp3 = $xpath->query('//span[@data-preview-url]');

foreach($mp3 as $m){
      // we print the attribute value 
    echo $m->attributes->getNamedItem('data-preview-url')->nodeValue . '<br/>';
}
libxml_use_internal_errors($internal_errors); 
```

# sql - INTERVAL DAY TO SECOND 数据类型：查找大于 1 分钟的值

> ID：14521270
> 
> 赞同：0
> 
> 时间：2013-01-25T11:52:46.240
> 
> 标签：sql, oracle, oracle10g, timestamp, compare

time_created 和 time_ended 是 VARCHAR 字段。

SQL 语句

```
SELECT time_created,
   time_ended,
   TO_TIMESTAMP (time_ended, 'YYYY/MM/DD-HH24:MI:SS:FF9')
   - TO_TIMESTAMP (time_created, 'YYYY/MM/DD-HH24:MI:SS:FF9')
  FROM trans 
```

输出

```
2012/10/28-18:46:13.855 2012/10/28-18:47:43.357 +00 00:01:29.502000
2012/10/20-22:40:10.363 2012/10/20-22:40:35.265 +00 00:00:24.902000
2012/10/20-22:40:08.951 2012/10/20-22:40:24.717 +00 00:00:15.766000
2012/10/20-22:40:09.454 2012/10/20-22:40:28.217 +00 00:00:18.763000
2012/10/20-22:40:09.912 2012/10/20-22:40:31.767 +00 00:00:21.855000
2012/10/22-10:11:29.360 2012/10/22-10:14:08.692 +00 00:02:39.332000
2012/10/22-10:11:08.335 2012/10/22-10:11:43.781 +00 00:00:35.446000
2012/10/20-22:40:07.900 2012/10/20-22:40:17.508 +00 00:00:09.608000
2012/10/20-22:40:08.469 2012/10/20-22:40:21.144 +00 00:00:12.675000
2012/10/22-11:00:42.355 2012/10/22-11:01:41.706 +00 00:00:59.351000
2012/10/22-10:11:09.268 2012/10/22-10:11:54.185 +00 00:00:44.917000
2012/10/22-10:11:13.072 2012/10/22-10:12:21.365 +00 00:01:08.293000 
```

我希望 where 子句只显示大于 1 分钟的记录。

我在 Sun Solaris 上使用 Oracle 数据库 10g。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:12:17.160

如果您为差异列设置别名，则可以将其包装在外部选择中并添加一个`where`子句：

```
SELECT * FROM (
    SELECT time_created,
        time_ended,
        TO_TIMESTAMP (time_ended, 'YYYY/MM/DD-HH24:MI:SS:FF9')
            - TO_TIMESTAMP (time_created, 'YYYY/MM/DD-HH24:MI:SS:FF9') AS diff
    FROM trans
)
WHERE diff > INTERVAL '1' MINUTE 
```

使用虚拟数据匹配您的输出，填充在 CTE 中：

```
with trans as (
select '2012/10/28-18:46:13.855' time_created,
    '2012/10/28-18:47:43.357' time_ended from dual
union all select '2012/10/20-22:40:10.363', '2012/10/20-22:40:35.265' from dual
union all select '2012/10/20-22:40:08.951', '2012/10/20-22:40:24.717' from dual
union all select '2012/10/20-22:40:09.454', '2012/10/20-22:40:28.217' from dual
union all select '2012/10/20-22:40:09.912', '2012/10/20-22:40:31.767' from dual
union all select '2012/10/22-10:11:29.360', '2012/10/22-10:14:08.692' from dual
union all select '2012/10/22-10:11:08.335', '2012/10/22-10:11:43.781' from dual
union all select '2012/10/20-22:40:07.900', '2012/10/20-22:40:17.508' from dual
union all select '2012/10/20-22:40:08.469', '2012/10/20-22:40:21.144' from dual
union all select '2012/10/22-11:00:42.355', '2012/10/22-11:01:41.706' from dual
union all select '2012/10/22-10:11:09.268', '2012/10/22-10:11:54.185' from dual
union all select '2012/10/22-10:11:13.072', '2012/10/22-10:12:21.365' from dual
)
SELECT * FROM (
    SELECT time_created,
        time_ended,
        TO_TIMESTAMP (time_ended, 'YYYY/MM/DD-HH24:MI:SS:FF9')
            - TO_TIMESTAMP (time_created, 'YYYY/MM/DD-HH24:MI:SS:FF9') AS diff
    FROM trans
)
WHERE diff > INTERVAL '1' MINUTE

TIME_CREATED            TIME_ENDED              DIFF
----------------------- ----------------------- ------------------------------
2012/10/28-18:46:13.855 2012/10/28-18:47:43.357 +000000000 00:01:29.502000000
2012/10/22-10:11:29.360 2012/10/22-10:14:08.692 +000000000 00:02:39.332000000
2012/10/22-10:11:13.072 2012/10/22-10:12:21.365 +000000000 00:01:08.293000000

3 rows selected. 
```

# linux - 使用密件抄送和从标头从 linux 命令行发送邮件

> ID：14521280
> 
> 赞同：3
> 
> 时间：2013-01-25T11:53:14.233
> 
> 标签：linux, email, command-line

我想从 linux（ubuntu，postfix）命令行发送（批量）电子邮件。

我想包含一个密件抄送标头（实际上将邮件发送到此地址），并且我想提供一个 from: 地址。

我不需要附件，只有文字。但是，unicode 支持会很好（不是必需的）。我想要一个简单而强大的解决方案（不太重要：也适用于其他机器/MTA）

到目前为止，我尝试过：

*   发邮件。这很好用，但 BCC 标题被忽略（这可能是一个后缀设置？我不想修改我的后缀设置......
*   笨蛋。可以通过命令行使用，但是您必须为 from: 标头创建自己的 muttrc，并且您可能还需要更改其他一些设置；同样，这似乎不是很简单或健壮。
*   旧的“邮件”命令在较新的版本中似乎没有按预期工作，至少我在 ubunto 上得到的那个命令不能识别 -b (bcc) 选项。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:31:40.403

如果您有一个**本地**邮件服务器正在运行（exim、sendmail、...），您可以将完整的、格式正确的消息通过管道传输到其中，并且它将被传递。您必须有一套完整的标头（From:, To:, Cc:, Date: ...），标头之后和消息文本之前必须有一个空行，例如

```
exim -t -i < fullyFormattedMessage.txt 
```

大多数邮件服务器会伪装成 sendmail 并接受 -t 标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:03:12.820

[这个问题](https://stackoverflow.com/q/4458460/841108)和[这个](https://stackoverflow.com/q/1546856/841108)问题似乎与您的问题非常相关（至少如果您想编写一个可以发送电子邮件的命令行程序）

你可以使用[libsmtp](http://libsmtp.berlios.de/)、[libesmtp](http://www.stafford.uklinux.net/libesmtp/)、[libvmime](http://www.vmime.org/)等。

许多脚本语言（Python、Ruby、Perl，...）都有多种邮件发送工具。

在 Debian 上，[mime-construct](http://search.cpan.org/~rosch/mime-construct-1.9/mime-construct)命令能够以密件抄送方式发送消息，并且您可以找到许多其他邮件实用程序。

# java - 无法通过从 ITLSSPProc.dll 调用 Native 方法打开端口

> ID：14521284
> 
> 赞同：0
> 
> 时间：2013-01-25T11:53:27.370
> 
> 标签：java, dll, java-native-interface, jna

> 这是来自 ITLSSPProc.dll 的本机方法

```
NOMANGLE int CCONV OpenSSPComPort (SSP_COMMAND * cmd); 
```

> 这里，SSP_COMMAND 是 ITLSSPProc.dll 中的结构，它是 C++ 语言。

```
struct SSP_COMMAND
{
unsigned long BaudRate;
unsigned char PortNumber;
}; 
```

> 因此，我必须使用 JNI 在 java 中访问 OpenSSPComPort (SSP_COMMAND * cmd)。这是我写的代码，

```
public class Main {
    public interface ITLSSPProc extends Library {
     ITLSSPProc INSTANCE = (ITLSSPProc) Native.loadLibrary(
            (Platform.isWindows() ? "ITLSSPProc" : "simpleDLLWindowsPort"), ITLSSPProc.class);

        int OpenSSPComPort(Pointer param); 
        int CloseSSPComPort();                    
    }

    public static void main(String[] args)throws IOException {

     ITLSSPProc sdll = ITLSSPProc.INSTANCE;

        Memory intMem = new Memory(10); // allocating space
        intMem.setLong(0,9600);
        intMem.setString(1,"com7");        

        if(sdll.OpenSSPComPort(intMem)==1)
        {// calling function with int parameter&result
            System.out.println("connected");
        }
        else
        {
            System.out.println("failed");
        }
     }
}

Output : failed 
```

> 端口号是我们正在使用的 COM7。因此，当我运行此应用程序并按照用户手册中给出的手动传递波特率时，如果端口号正确，则必须在控制台上打印“已连接”。所以，任何人都知道我哪里出错了，我不明白实际问题在哪里..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:18:10.373

基本类型( `long`, `char`)[的 JNA 文档。](https://github.com/twall/jna/blob/master/www/Mappings.md)

[聚合类型](https://github.com/twall/jna/blob/master/www/StructuresAndUnions.md)( `struct`, `struct *`) 的 JNA 文档。

```
// tl;dr
class SSP_COMMAND extends Structure {
    public NativeLong BaudRate;
    public byte PortNumber;
}

int OpenSSPComPort(SSP_COMMAND param) 
```

# android - 如何使相对布局可点击？

> ID：14521290
> 
> 赞同：12
> 
> 时间：2013-01-25T11:53:41.170
> 
> 标签：android, android-layout, styles

我有这样的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:addStatesFromChildren="true"
    android:clickable="true"
    android:duplicateParentState="true"
    android:focusable="true"
    android:paddingBottom="10dip" >

    <ImageView
        android:id="@+id/imagView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:focusable="false"
        android:background="@drawable/imageView_bg"
        android:focusableInTouchMode="false" />

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="18dip"
        android:background="@drawable/button_bg"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:gravity="left|center_vertical"
        android:paddingLeft="25dip"
        android:textColor="#ffffff"
        android:textSize="20dip" />

</RelativeLayout> 
```

button_bg.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:drawable="@drawable/btn_pressed" 
            android:state_pressed="true"/>
        <item android:drawable="@drawable/btn_normal"/>

    </selector> 
```

imageView_bg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/img_pressed" 
        android:state_pressed="true"/>
    <item android:drawable="@drawable/img_normal"/>

</selector> 
```

图像视图和按钮已按下图像。当用户单击视图时，想要同时按下图像视图和按钮（显示按下的图像）。但它不显示按下的图像。如何做到这一点？问题出在哪里？

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-25T11:59:30.900

```
RelativeLayout rl = (RelativeLayout)findViewById(R.id.mainLayout);

rl.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v) {}
 }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T12:01:29.707

我认为它解决了问题

```
((RelativeLayout)findViewById(R.id.mainLayout)).setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View view) {
    ViewGroup viewGroup = (ViewGroup) view;
     for (int i = 0; i < viewGroup .getChildCount(); i++) {

       View viewChild = viewGroup .getChildAt(i);
       viewChild.setPressed(true);

          }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:57:56.837

Simple.Place RelativeLayout 在 FrameLayout 内。

# java - 用于远程调试多个 JVM 的端口配置

> ID：14521295
> 
> 赞同：2
> 
> 时间：2013-01-25T11:54:01.470
> 
> 标签：java, remote-debugging

我已经在 J​​ava 运行时变量中定义了我的远程调试端口，但是当多个 JVM 在具有该配置的同一主机上运行时会发生什么行为。

在第一个实例使用该端口后，其他 JVM 是否将无法访问，或者是否有回退来确定另一个可用端口？

有什么方法可以确定此端口或配置要使用的其他端口？

我的 Java 运行时设置：

**-Xms64m -Xmx256m -agentlib:jdwp=transport=dt_socket,address=58000,server=y,suspend=n**

![日食设置](../Images/ecb4fdbb4f2c192a7340fe2aa70afff6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T14:25:31.407

每个 JVM 都需要分配一个唯一的端口号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:37:41.040

只有 1 个调试器可以连接到单个端口。我不明白为什么您需要多次同时调试相同的代码，您会感到困惑。

我要给你的建议是：

1.  在第一个 JVM 上调试
2.  完成后，分离第一个 JVM
3.  在第二个 JVM 上调试 .....

# automation - 为什么L={wxw^R| w, x 属于 {a,b}^+ } 是正则语言

> ID：14521300
> 
> 赞同：5
> 
> 时间：2013-01-25T11:54:30.617
> 
> 标签：automation, regular-language, dfa, nfa, pumping-lemma

使用pumping lemma，我们可以很容易地证明该语言`L1 = {WcW^R|W ∈ {a,b}*}`是**正则语言**。（字母表是{a,b,c}；W^R 代表逆向字符串W）

但是，如果我们用 替换字符`c`，`"x"(x ∈ {a,b}+)`比如说`L2 = {WxW^R| x, W ∈ {a,b}^+}`，，那么 L2**是一种常规语言**。

你能给我一些想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-26T07:26:49.933

> 如果我们将字符 c 替换为 x 其中 (x ∈ {a,b} ^+ )，例如，L2 = {WXW ^R | x, W ∈ {a,b} ^+ }，则 L2 是正则语言。

是的，`L2`是常规语言:)。

[您也可以编写正则表达式`L2`。]

语言 L2 = {WXW ^R | x, W ∈ {a,b} ^+ } 表示：

*   string 应该以包含`a`and的任何字符串开头，`b`即`W`以反向字符串 W ^R结尾。
*   *注意：*因为 W 和 W ^R是相反的，所以字符串以相同的符号开始和结束*（可以是`a`or `b`）*
*   并在中间包含*任何字符串*和。（因为，长度变得大于一） `a``b``X``+``X``|X| >= 1`

这种字符串的示例如下：

aabababa，如下：

```
 a    ababab    a  
  --   --------   --
   w     X        W^R 
```

或者也可以是：

bababbabb，如下：

```
 b    ababab    b
  --   --------   --
   w     X        W^R 
```

请参阅长度`W`不是语言定义中的约束。

因此可以假定任何字符串 WXW ^(R等于)`a(a + b)`^+`a`或`b(a + b)`^+`b`

```
 a    (a + b)+   a
   ---   --------  ---
    W      X       W^R 
```

或者

```
 b    (a + b)+   b
   ---   --------  ---
    W      X       W^R 
```

这种语言的正则表达式是^：`a(a + b)`^(++)`a` `+` `b(a + b)`^(`b`)

[不要将`WXW`^R与`WCW`^R`X`混合使用，它`+`会使语言变得规则。`X`通过包含that is来思考`(a + b)*`我们可以有**有限的选择**that `W`is`a`和`b`（有限是常规的）。]

语言`WXW`^R可以说： if start with `a`end with `a`and if start with `b`end with `b`。所以相应地我们需要两个最终状态。

*   Q6 如果`W`是`a`
*   Q5 如果`W`是`b`

它的 DFA 如下所示。

![DFA](../Images/adf9e4633ef2f6bf4f23828a64c80800.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T18:28:23.693

带有 |W| 的语言中的任何字符串 > 1 可以解释为语言中的字符串，其中 |W| = 1。因此，如果字符串以相同的符号开头和结尾，则该字符串属于该语言。有两个符号：a 和 b。所以说语言就等于语言`a(a+b)(a+b)*a + b(a+b)(a+b)*b`。为了证明这一点，您应该形式化“如果 y 在 WxW 中，则 y 在 a(a+b)(a+b)*a + b(a+b)(a+b)*b 中；并且如果 y 在 a(a+b)(a+b)*a + b(a+b)(a+b)*b 中，则 y 在 WxW 中”。

在另一种情况下它不起作用，因为 c 是一个固定符号，并且不能包含除末端字符之外的所有字符。一旦您在示例中绑定了“x”的长度，该语言就会变得非常规。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T13:38:44.013

问题是 W ∈ {a,b}^+ ，所以 a^n(a+b)a^n 应该是 L2 语言。现在没有这样的 DFA 将接受字符串 a^n(a+b)a^n，因为在接受 n 个 a 和 (a+b)^+ 之后，dfa 无法准确记住如何一开始它接受了很多，所以L2不应该是常规的............但是我搜索这个答案的每个地方都说它是常规的......这让我很烦恼

# python - celery 3.0.12 typeerror :run() 为关键字参数“分离”的值获取了多个值

> ID：14521301
> 
> 赞同：2
> 
> 时间：2013-01-25T11:54:30.427
> 
> 标签：python, django, celery, django-celery, kombu

我想使用 celery 和 celerybeat.am 使用 celery 3.0.12 django-celery 3.0.11 kombu 2.5.3 和 billiard 2.7.3.19 python 2.6 django 1.4.2 运行定期任务。谁能告诉它哪里出错或缺少任何配置部分？

```
Traceback (most recent call last):
File "manage.py", line 10, in <module>
execute_from_command_line(sys.argv)
File "/usr/lib/python2.6/site-packages/django/core/management/__init__.py", line 443,    in execute_from_command_line
utility.execute()
File "/usr/lib/python2.6/site-packages/django/core/management/__init__.py", line 382,  in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File "/usr/lib/python2.6/site-packages/django_celery-3.0.11-py2.6.egg/djcelery/management/base.py", line 74, in run_from_argv
return super(CeleryCommand, self).run_from_argv(argv)
File "/usr/lib/python2.6/site-packages/django/core/management/base.py", line 196, in run_from_argv
self.execute(*args, **options.__dict__)
File "/usr/lib/python2.6/site-packages/django_celery-3.0.11-py2.6.egg/djcelery/management/base.py", line 67, in execute
super(CeleryCommand, self).execute(*args, **options)
File "/usr/lib/python2.6/site-packages/django/core/management/base.py", line 232, in execute
output = self.handle(*args, **options)
File "/usr/lib/python2.6/site-packages/django_celery-3.0.11-py2.6.egg/djcelery/management/commands/celerybeat.py", line 24, in handle
beat.run(*args, **options)
TypeError: run() got multiple values for keyword argument 'detach' 
```

蒂亚：）

更新：task.py

```
from celery.utils.log import get_task_logger
import celery
from celery.task.schedules import crontab
from celery.task import periodic_task
@periodic_task(run_every=crontab(hour='*', minute='10', day_of_week='*'))
def spam_task():
    """
    am fetching the user's spam and sending mail to spam users
    using django EmailMultiAlternatives
    """
@periodic_task(run_every=crontab(hour='*', minute='10', day_of_week='*'))
def notify():
    """
    fetching the activities and notifying to users by sending mail
    """ 
```

设置.py

```
CELERY_IMPORTS = ("myapp.tasks", )
CELERY_ENABLE_UTC = True
CELERY_TIMEZONE = 'America/Chicago'
import djcelery
djcelery.setup_loader()
BROKER_URL = 'django://'

BROKER_HOST = 'localhost'
BROKER_PORT = 5672
BROKER_USER = 'guest'
BROKER_PASSWORD = 'guest'
BROKER_VHOST = '/' 

CELERY_EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
CELERY_EMAIL_TASK_CONFIG = {
     'queue' : 'email',
     'rate_limit' : '10/m',
     'name': 'djcelery_email_send',
     'ignore_result': True  } 
```

# php - 将日期时间插入数据库时 的loadinfile问题

> ID：14521307
> 
> 赞同：0
> 
> 时间：2013-01-25T11:54:37.667
> 
> 标签：php, mysql

我遇到了一个问题，我需要上传一个包含几列的 csv 文件，包括日期时间列到数据库中。通过读取每一行并插入数据库来上传数据时，日期和时间可以正常工作。但是当我使用加载文件时，整个日期和时间在表的数据库列中显示为 0000-00-00 00:00:00 数据类型是日期。我正在`$date = date("Y-m-d h:i:s");`使用 php 以相同的格式在 csv 文件中写入数据和时间。可能是什么原因？

# c# - 我可以保留 Excel 模板的格式吗

> ID：14521314
> 
> 赞同：1
> 
> 时间：2013-01-25T11:55:05.233
> 
> 标签：c#, excel

我的解决方案中有一个 Excel 模板，其中适用于日期（dd-mmm-yy）、文本（左对齐）和数字（#、##0.0）的各种格式

如果我现在使用代码将数据从`SQL-Server`该模板中移动，我将使用如下代码：

将 feed 的输入参数输入`DataTable dt`到最终执行以下操作的方法中：

```
string data = null;
int i = 0;
int j = 0;
for(i = 0; i <= dt.Rows.Count - 1; i++) {
   for(j = 0; j <= dt.Columns.Count - 1; j++) {
        data = dt.Rows[i].ItemArray[j].ToString();
        xlWorkSheet.Cells[i + 1, j + 1] = data;
   }
} 
```

上面的问题是所有数字和日期都被转换为字符串，然后移动到模板中 - 所以模板格式将丢失。

有没有办法移动数据并保留模板的格式？
还是我需要将数据作为字符串移动，然后在数据移动后应用格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:08:15.053

如果您明确设置单元格的值，则应保留格式：

```
xlWorkSheet.Cells[i + 1, j + 1].Value = data; 
```

# python - Python中的N维线性插值（使用基本原理索引评估数组）

> ID：14521315
> 
> 赞同：3
> 
> 时间：2013-01-25T11:55:07.643
> 
> 标签：python, interpolation

假设我有一个 N 维数组`ar`。`ar.shape=(n1,...,nN)`是否有允许以`ar`基本原理指数进行评估的 python 模块？

作为一个例子，让我们假设：`ar.shape=(3,4,5)`. 然后我正在寻找`f`执行此操作的函数：`result=f(ar,[2.3,1.5,3.4])`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:10:27.760

来自 scipy 文档：：`scipy.interpolate.griddata`插入[非结构化 N 维数据](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html#scipy.interpolate.griddata)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:08:31.780

[scipy.ndimage.map_coordinates](https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.map_coordinates.html)快速简单；[请参阅multivariate-spline-interpolation-in-python-scipy](https://stackoverflow.com/questions/6238250/multivariate-spline-interpolation-in-python-scipy)
下的清晰 2d 示例 。

（`map_coordinates( ... order=1 )`这就是你所要求的 ——2d 中的[Bilinear_interpolation](http://en.wikipedia.org/wiki/Bilinear_interpolation)，3d 中的三线性 ...
`order=0`是最近的网格点，`order=2`或者 3 看 (order+1)^d 点——更慢更平滑。）

补充：您可能知道，numpy 将浮点索引向下舍入为整数：

```
A = np.eye( 3 )
print A[ 0.1, 0.9 ], A[ 1.1, 2.9 ] 
```

# python - Tkinter & Threads - 异常：堆栈空间不足（无限循环？）

> ID：14521319
> 
> 赞同：3
> 
> 时间：2013-01-25T11:55:14.263
> 
> 标签：python, multithreading, exception, tkinter, tk

我们实现了一个分布式聊天，它使用 Tkinter GUI。当我将系统更新到 Fedora18 时，我在调用 Tkinter 事件时遇到异常，与[此处](https://stackoverflow.com/questions/14444459/tkinter-event-generate-throws-exception-infinite-loop)描述的几乎相同：

```
Exception in thread Thread-1:
Traceback (most recent call last):
File "/usr/lib64/python2.7/threading.py", line 551, in bootstrap_inner self.run()
File "/usr/lib64/python2.7/threading.py", line 504, in run self.target(*self.__args, **self.__kwargs)
File "/hachat/peer.py", line 156, in startRecvLoop
self.processMessage(msg, addr)
File "/hachat/peer.py", line 222, in processMessage
self.gui.receive(msg) 
File "/hachat/gui.py", line 74, in receive
self.textfenster.insert(END,msg.name+": "+msg.text+'\n')
File "/usr/lib64/python2.7/lib-tk/Tkinter.py", line 2986, in insert
self.tk.call((self._w, 'insert', index, chars) + args)
TclError: out of stack space (infinite loop?) 
```

这是 gui 类的一个片段：

```
import Tkinter
import ScrolledText
import tkMessageBox
import tkSimpleDialog
import threading 

class gui(object):

    def __init__(self, parent):
        self.root = Tkinter.Tk()             
        self.textfenster = ScrolledText.ScrolledText(self.fpopup,width=90,height=24,background='white')
        self.textfenster.pack(fill=Tkinter.BOTH, expand=Tkinter.YES)

    def run(self):
        self.guiRunThread = threading.Thread(target=self.root.mainloop())
        self.guiRunThread.daemon = True
        self.guiRunThread.start()

    def receive(self,msg):
        self.textfenster.insert(Tkinter.END,msg.name+": "+msg.text+'\n')
        self.textfenster.see(Tkinter.END) 
```

异常只出现在我的系统上，原因似乎是 tk 没有在支持线程的情况下编译。我必须摆脱这个 Exeption - 由于程序是分布式的，它需要在不同的系统上运行。因此，我询问如何摆脱此异常以及获得 tk 以支持线程的提示。我使用的 Python 版本是 2.7.3，Tcl/Tk 版本是 8.5。`import Tkinter; Tkinter.Tk().tk.eval("puts $tcl_platform(threaded)")`也在回馈一个异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:59:37.157

我解决了队列与 Tk 通信的问题。有关示例，请参见[使用 Tkinter 的多线程 python ！](https://stackoverflow.com/questions/14379106/mutli-threading-python-with-tkinter/14381671#14381671)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T08:15:17.637

这个有效：

```
from Tkinter import *
from ScrolledText import ScrolledText
from threading import Thread

scrolled = None

def start():
    global scrolled
    root = Tk()
    scrolled = ScrolledText(root)
    scrolled.pack(fill=BOTH, expand=YES)
    return root

Thread(target=start().mainloop).start()

print scrolled.get(0.0, END) 
```

# java - 访问超类的私有成员

> ID：14521324
> 
> 赞同：5
> 
> 时间：2013-01-25T11:55:34.253
> 
> 标签：java, oop, inheritance

从子类间接访问超类私有成员的例子是什么？

> 嵌套类可以访问其封闭类的所有私有成员——包括字段和方法。因此，子类继承的公共或受保护的嵌套类可以间接访问超类的所有私有成员。

引自[http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:16:26.793

在引用中，我们谈论“嵌套”类

这是一个内部类如何访问外部类的私有字段的示例。

```
class OuterClass {
private int x = 7;

public void makeInner(){
    InnerClass in = new InnerClass();
    in.seeOuter();
}
class InnerClass {
    public void seeOuter() {
        System.out.println("Outer x is " + x);
    }
}
public static void main(String[] args) {
    OuterClass.InnerClass inner = new OuterClass().new InnerClass();
    inner.seeOuter();
} 
```

}

最后，如果您使用 InnerClass 扩展一个类，如果您的 InnerClass 是公共的或受保护的，它们还将访问 OuterClass 的私有字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:00:01.657

应该假设（但编译器不强制执行它，仅警告），`private`方法将最终被 a`public`或`protected`默认方法使用（否则它是无用的）。

`private`因此，扩展类可以通过调用结束调用私有方法的默认方法或默认方法`public`来“间接”调用该方法。`protected`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T20:14:19.500

是的，我们可以通过超类的公共方法访问子类中超类的私有成员，该方法可以从子类的引用变量调用子类的引用ID。例如：-

```
class Base
{
    private int x=10;

    void show()
    {
        System.out.println(x);
    }
}

class Child extends Base
{

    public static void main(String... s)// public static void main(String[] args)
    {    
        //rom jdk 1.7 main can be defined like above
        Child c=new Child();
        c.show();
    }
} 
```

输出将是 10

# java - 循环减少数万，然后是数千，然后是数百，然后是数十

> ID：14521329
> 
> 赞同：0
> 
> 时间：2013-01-25T11:55:47.867
> 
> 标签：java, math, loops

我想在 Java 中创建一个循环，它在数学上采用一个变量，比如一百万，然后通过下面程序和表中详述的步骤来减少它。

```
package com.sbs.test.maths;

import org.testng.annotations.Test;

public class Maths {
  @Test
  public void test() {
    int i = 1000000;
    System.out.println( i );
    while( i > 1 ) {
      i = reduce( i );
      System.out.println( i );
    }
  }

  private int reduce( int value ) {
    if ( value > 1 && value <= 10 ) value -= 1;
    else if ( value > 10 && value <= 100 ) value -= 10;
    else if ( value > 100 && value <= 1000 ) value -= 100;
    else if ( value > 1000 && value <= 10000 ) value -= 1000;
    else if ( value > 10000 && value <= 100000 ) value -= 10000;
    else if ( value > 100000 && value <= 1000000 ) value -= 100000; 
    else if ( value > 1000000 && value <= 10000000 ) value -= 1000000; 
    else if ( value > 10000000 && value <= 100000000 ) value -= 10000000; 
    return value;
  }
} 
```

IE

```
value     reduce-by   result
1000000 - 100000    = 900000
900000  - 100000    = 800000
...
200000  - 100000    = 100000
100000  - 10000     = 90000
90000   - 10000     = 80000
...
20000   - 10000     = 10000
10000   - 1000      = 9000
9000    - 1000      = 8000
...
2000    - 1000      = 1000
1000    - 100       = 900
900     - 100       = 800
...
200     - 100       = 100
100     - 10        = 90
90      - 10        = 80 
```

如果检测数量是 100、1000、10000、100000 或更多，这可以在没有令人讨厌的 if 级联的情况下完成吗？

我找到了一个几乎可以在 Java 中工作的[javascript 示例，但它并不适用于所有变体。](https://stackoverflow.com/questions/6696469/refactor-this-basic-code-that-determines-if-number-is-in-tens-hundreds-thousan)我在下面运行了程序，但正如您将看到的，它卡在了我们需要在减少结束时丢失零的点。

```
System.out.println( "----------------------------------------------" );
for ( int i = 1000000; i > 0; i -= (int) Math.pow( 10, Math.floor( Math.log( i ) / Math.log(10) ) ) ) {
  System.out.println( i );
} 
```

输出：

```
1000000
900000
800000
700000
600000
500000
400000
300000
200000
100000 
```

不幸的是，数学不是我的强项，因此非常感谢您对此的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:01:36.013

我在java中不是那么好，但是两个嵌套循环可能会起作用并且更简单：

```
for ( int i = 1000000; i > 1; i /= 10 ) {
  for ( int j = i; j > i / 10; j -= i / 10 ) {
    System.out.println( j );
  }
}
System.out.println( 1 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:15:14.217

```
 int total = 1000000;
    int reducedBy = 100000;
    while (total > 0 && reducedBy >= 1) {
        System.out.println(total);
        total -= reducedBy;
        if (total == reducedBy)
            reducedBy /= 10;
    }
    System.out.println(total); 
```

万一你还需要它。

# python - 有效存储大型稀疏矩阵（浮点数）

> ID：14521332
> 
> 赞同：0
> 
> 时间：2013-01-25T11:56:00.940
> 
> 标签：python, matrix, numpy, sparse-matrix, pytables

我正在寻找一种解决方案来存储稀疏矩阵的大约 1000 万个浮点（双精度）数。该矩阵实际上是由 100 万乘 100 万个元素组成的二维三角矩阵。element是 element和 element之间`(i,j)`的实际得分度量。存储方法必须允许非常快速地访问此信息，可能通过内存映射包含矩阵的文件。我当然不想将所有文件加载到内存中。`score(i,j)``i``j`

```
class Score(IsDescription):
    grid_i = UInt32Col()
    grid_j = UInt32Col()
    score  = FloatCol() 
```

我已经尝试`pytables`使用暴露的类，但是如果不扫描所有行`Score`，我就无法直接访问元素。`i,j`有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:40:11.563

1000 万个双精度浮点数占用 80 MB 内存。如果将它们以[CSR 或 CSC](http://en.wikipedia.org/wiki/Sparse_matrix#Compressed_sparse_row_.28CSR_or_CRS.29)格式存储在 100 万 x 100 万稀疏矩阵中，则需要额外的 1100 万个 int32，总共大约 125 MB。这可能不到系统中物理内存的 7%。根据我的经验，在一个运行 32 位版本的 python 的 4GB 系统上，你很少会遇到分配数组的问题，直到你尝试获得十倍的内存。

在您的计算机上运行以下代码：

```
for j in itertools.count(100) :
    try :
        a = np.empty((j * 10**6,), dtype='uint8`)
        print 'Allocated {0} MB of memory!'.format(j)
        del a
    except MemoryError:
        print 'Failed to allocate {0} MB of memory!'.format(j)
        break 
```

除非它不能让你得到至少 4 倍以上计算的数量，否则不要犹豫，使用一种`scipy.sparse`格式将整个东西粘在内存中。

我没有使用 pytables 的经验，也没有使用 numpy 的`memmap`数组。但在我看来，其中任何一个都将涉及您编写处理稀疏性的逻辑，除非不可能，否则我会尽量避免。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:23:51.617

你应该使用[`scipy.sparse`](http://docs.scipy.org/doc/scipy/reference/sparse.html). [这是](http://www.scipy.org/SciPyPackages/Sparse)有关格式和用法的更多信息。

# java - java - 如何避免java多播中缓冲区大小的限制？

> ID：14521338
> 
> 赞同：1
> 
> 时间：2013-01-25T11:56:21.187
> 
> 标签：java, multicast

在收到`Multicasting`一个：`MulticastSocket``DatagramPacket`

```
buffer = new byte[BUFFER_SIZE];
packet = new DatagramPacket(buffer, BUFFER_SIZE);
socket.receive(packet); 
```

所以我必须制作一个具有特定长度的字节数组，我不喜欢这样限制可以通过我的网络传输的数据大小。有什么办法`Multicasting`可以避免这个限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:26:41.357

网络已经限制了传输大小。程序中的缓冲区大小是您最不必担心的。在您无法完全控制的网络上，普遍接受的 UDP 数据报限制是 534 字节。

# visual-studio-2010 - 缺少包导致 NuGet 包还原失败

> ID：14521347
> 
> 赞同：5
> 
> 时间：2013-01-25T11:56:47.860
> 
> 标签：visual-studio-2010, nuget, nuget-package

我们是 NuGet 的热心用户，无论是内部构建的还是第三方包的。

我们最近开始在我们的一些构建项目中启用 NuGet 包还原选项，以减少我们提交给源代码控制的二进制文件的数量，但我们遇到了一个问题。

我们看到 Visual Studio 需要很长时间才能启动，一旦启动（可能需要半个多小时），随后的构建同样耗时。发生这种情况时，您可以在进程资源管理器中看到许多子 NuGet 进程出现和死亡。

我们发现，如果 packages.config 文件中引用的包版本不能从任何配置的包源中获得（可能它是内部包的旧版本，并且有人帮助清理了我们的本地存储库） ，似乎 NuGet 和 Visual Studio 进入某种无限（或至少长时间运行）重试循环。

如果我们从命令行运行 NuGet 安装命令，我们会返回错误

```
>.nuget\NuGet.exe install project\packages.config -o packages
Unable to find version '1.0.0.1' of package 'my.internal.package'. 
```

但看起来这似乎没有被 Visual Studio/NuGet 正确使用。

*   NuGet 是否在任何地方记录其操作？
*   我们能否限制 NuGet 还原重试或超时（可能在`nuget.targets`文件中？）
*   看起来好像没有使用 NuGet 的语义版本控制，因为在我们上面的场景中 1.0.0.2 可以从 repo 中获得，可以启用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:17:35.063

这似乎类似于这个问题[http://nuget.codeplex.com/workitem/2970](http://nuget.codeplex.com/workitem/2970) 对我有用的临时解决方法是打开 nuget.targets 并替换
<!-- 我们需要确保在程序集解决之前恢复包 - >
<ResolveReferencesDependsOn Condition="$(RestorePackages) == 'true'">
RestorePackages;
$(ResolveReferencesDependsOn);
</ResolveReferencesDependsOn>
与

<BuildDependsOn Condition="$(RestorePackages) == 'true'">
RestorePackages;
$(BuildDependsOn);
</BuildDependsOn>

在 VS 中关闭并重新加载解决方案。这将使构建依赖于恢复包，而不是似乎可以解决问题的程序集解析。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:13:43.700

首先，您的版本控制不符合 nuget 的建议，即 1.2.3。因此，您应该尝试将您的版本升级为 1.0.1 以查看是否可以解决问题。

*   NuGet 是否在任何地方记录其操作？

您可以在命令行“nuget install”中使用 -verbosity 标志来获取更多信息。详细信息也可在输出窗口中找到。从下拉列表中选择“包管理器”。更多使用 devenv /log

*   我们能否限制 NuGet 恢复重试或超时（可能在 nuget.targets 文件中？）

不知道这里有什么办法。

*   看起来好像没有使用 NuGet 的语义版本控制，因为在我们上面的场景中 1.0.0.2 可以从 repo 中获得，可以启用吗？

这可以通过检查工具->选项->包管理器中的“自动检查升级”来实现？查看您的 packages.config 是否将版本限制为 1.0.0.1

# php - 使用 PHP 代码创建电子邮件转发器并延迟转发？

> ID：14521348
> 
> 赞同：0
> 
> 时间：2013-01-25T11:57:02.993
> 
> 标签：php, html, cpanel

我设法通过此[链接](http://forums.glowhost.com/programming-talk/using-cpanel-api-creating-email-account-forwarders-your-own-php-scripts-2798.html)找到了与 cPanel 合作创建 PHP 转发器的 PHP 代码。

使用该代码...如何将此类电子邮件的转发延迟 10 分钟？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:58:25.363

您需要设置一个[cron](http://en.wikipedia.org/wiki/Cron)，以便您可以在特定日期/时间发送邮件。

[另请参阅此处的](https://stackoverflow.com/questions/10097609/how-to-run-php-file-using-cron-jobs)示例

**编辑：** 您需要打开您的 linux（我假设）机器并设置一个 cron。打开 linux 命令终端并输入：`crontab -e`打开 cron 作业并放置在您的 php 文件中。[如何从 cron 调用 php 文件](https://stackoverflow.com/questions/4421020/use-php-to-create-edit-and-delete-crontab-jobs)？

`php /home/USER/public_html/cron.php`

# visual-studio-2010 - 合并后检查怪异

> ID：14521349
> 
> 赞同：0
> 
> 时间：2013-01-25T11:57:06.240
> 
> 标签：visual-studio-2010, tfs

视觉工作室 2010。

几周前我们分支了我们的项目，昨天我们合并了它们。一切都很顺利，新合并的项目似乎正确地捕捉到了差异变化。

但是，当我签出一个对象以进行编辑，然后再将其签入时，我会在“签入”对话框中得到一个很长的对象列表。

新签出的对象在更改列中标记为**锁定，编辑。**

但是，项目中的所有其他对象也出现在标记为**合并、锁定的列表中**

我不知道这意味着什么，我也不想签入，以防之前的合并操作被更改或撤消。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:15:19.837

我决定硬着头皮检查未完成的未决更改，查看了选择的未决更改与已知良好版本之间的差异，并没有发现任何差异。这一切似乎都正确地完成了，所以我将把它记下来以供体验。

# javascript - 如何在全日历中隐藏 qtip？

> ID：14521351
> 
> 赞同：1
> 
> 时间：2013-01-25T11:57:06.893
> 
> 标签：javascript, fullcalendar, qtip

这是我的全日历代码

```
$('#calendar').fullCalendar({ 
                      ..... 
            eventRender: function(event, element) {

                  element.bind('dblclick', function() {
                      $('#wrap').hide();
                      $('#inserimento').show();
                  });
                  element.qtip({
                        content: {
                             title: {
                                text: event.title,
                                button: 'X'
                             },
                             text: '<b>Ore: </b>' + event.ore + '<br />' +'<b>Note spese: </b>' + event.spese + '<br /><br />' +
                                   '<a href="javascript:elimina(\'' + event.id + '\' )">Elimina</a>'
                          }
     ..... 

    }); 
```

这个 javascipt 的函数删除事件：

```
function elimina(value){
        $('#calendar').fullCalendar("removeEvents",  value);
        $('#calendar').fullCalendar("rerenderEvents");

} 
```

该函数删除了 fullCalendar 中的事件，但相关的 qtip 仍然存在。我不知道如何隐藏/删除 qTip。你能帮我吗？

# c# - 正则表达式中的自定义字符串变量

> ID：14521352
> 
> 赞同：-2
> 
> 时间：2013-01-25T11:57:08.147
> 
> 标签：c#, regex

我想用正则表达式在字符串中找到两个或多个变量。例如，我有一个像这样的字符串“Result = Num + 2 ( 6 * Count )”。我想知道“Result”、“Num”和“Count”是否在这个字符串中。假设我想构建一个小型编译器，这些字符串是我的保留字，我想使用正则表达式进行检查。

区分大小写对我来说更重要。例如，如果客户端在字符串中输入“num”或“count”，则该方法必须返回 false。

我怎样才能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:31:27.177

更新以使用任意词集合

```
var words = new [] { 
                     "Result",
                     "Num",
                     "Count"
                   };

var source = "Result = Num + 2 ( 6 * Count)";
var regex=new Regex(string.format(@"\b(?<words>(?-i){0})\b", string.Join("|",words));
var results = (
            from m in regex.Matches(source).OfType<Match>()
            select m.Groups["words"].Value
            ).ToArray(); 
```

`results`将是匹配单词的数组

但是，如果您在另一个答案中声明您正在构建一个小型编译器，那么您最好构建一个标记化引擎。例如[构建一个更好的标记器](http://en.csharp-online.net/CSharp_Regular_Expression_Recipes%E2%80%94A_Better_Tokenizer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:00:52.217

这可能是 Regex 教程中的第一件事。

```
string expression = "Result = Num + 2 ( 6 * Count )";

foreach (Match match in Regex.Matches(expression, "[a-zA-Z]+")) {
    Console.WriteLine(match.Value);
} 
```

# c# - Url Rewriting ASP.NET - 某些图像拒绝加载

> ID：14521354
> 
> 赞同：0
> 
> 时间：2013-01-25T11:57:17.740
> 
> 标签：c#, asp.net, url-rewriting

我最近在我的网站上实施了 UrlRewriter (http://urlrewriter.net)，但遇到了一些问题。

我正在实现它，因此页面请求是无扩展的。例如`www.example.com/my-cool-product`， 重定向到`www.example.com/Product.aspx?id=1`。这工作正常。

我遇到的问题是，我的一些网站图像拒绝作为静态内容提供。如果我将一些图像的路径放在我的网站上，它们会立即提供（作为静态内容），但一些图像会尝试通过 .NET 管道进行路由。

例如，`www.example.com/Asset/Image/Image.png`当它试图点击时返回 404 `www.example.com/Asset/Image/Default.aspx`。

任何人都可以解释为什么某些图像会发生这种情况而不是其他图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:02:56.123

您使用的是什么版本的 IIS？你可能需要：

```
<modules runAllManagedModulesForAllRequests="true"> 
```

在您的 web.config`<system.webServer>`块中

或者`<base>`在你的页面头部设置一个 url

# javascript - jquery click stop working after view load with layout

> ID：14521357
> 
> 赞同：0
> 
> 时间：2013-01-25T11:57:24.277
> 
> 标签：javascript, jquery, model-view-controller

我有一个点击绑定到外部 JS 文件中的元素：

```
$(document).ready(function ()
{
    $(document).on("click", "#loginRegisterLink", function () {
        $("#loginInfoPanel:visible").hide();
        $("#loginWindow:hidden").show();
    });
}); 
```

布局共享 CSHTML 中的这段代码：

```
<script src="~/Scripts/Presenter/Account/loginheader.presenter.js"></script> 
```

加载主页时，代码工作正常，但是当我使用包含此脚本的相同布局导航到另一个视图时，单击功能不再触发，为什么？

注意：当通过Layout文件在第二个视图中加载JS文件时，我从浏览器中得到“Status Code:304 Not Modified”。

谢谢。

# javascript - onbeforeunload 只执行一次

> ID：14521358
> 
> 赞同：0
> 
> 时间：2013-01-25T11:57:24.577
> 
> 标签：javascript

我使用 onbeforeunload 来重置带有 Ajax 请求的变量。但它只执行一次。例如，如果我访问页面（登录后）并关闭窗口，则执行该功能，但如果我重复该操作（在完成登录后将地址放入浏览器并关闭窗口），则不会执行该功能。

```
window.onbeforeunload = function (e) {
    //Ajax request to reset variable in database 
    resetDemoValueWithAjax();
};

//Ajax request to reset variable in database and exit
function resetDemoValueWithAjax(){
    $.ajax({
        async:true,
        type: "POST",
        dataType: "json",  
        url:"http://localhost/site/index.php/welcome/resetDemoValue",
        data: {name: "demo"},
        success:function(){
            document.location.href='http://localhost/site/index.php/auth/logout';   
        },
        error: function(){
            document.location.href='http://localhost/site/index.php/auth/logout';   
        } 
    });     
} 
```

`document.location.href='http://localhost/site/index.php/auth/logout';`仅在其他时刻使用：当用户注销时。不在这里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:02:26.587

你有一个[竞争条件](https://en.wikipedia.org/wiki/Race_condition)。竞争是在异步 Ajax 请求和浏览器试图离开页面（这是`beforeunload`首先引起的）之间的竞争。导航离开可能总是会获胜，因此浏览器会在 Ajax 回调完成之前离开页面。

如果您使 Ajax 请求与 同步`async:false`，则不会发生这种竞争，因为 JavaScript 线程会阻塞，直到 Ajax 请求解决。请注意，这会导致潜在的烦人用户体验（即，用户尝试关闭页面但必须等待 Ajax 请求解决，然后选项卡才会关闭）。

# javascript - 函数中的变量

> ID：14521360
> 
> 赞同：0
> 
> 时间：2013-01-25T11:57:38.783
> 
> 标签：javascript, variables, global-variables

问题在于变量和函数返回。此代码有助于连接到 mysql 数据库并选择两个城市之间的距离。变量`ret_pomoc`是距离。

I 中的值`ret_pomoc`需要在另一个函数中使用，例如`another_fuction()`.

这是代码：

```
var ret_pomoc;
var vzdialenost;

function ajaxFunction(mesto_1,mesto_2){
            var ajaxRequest;  // The variable that makes Ajax possible!
            try{
               // Opera 8.0+, Firefox, Safari
               ajaxRequest = new XMLHttpRequest();
             }catch (e){
               // Internet Explorer Browsers
               try{
                  ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
               }catch (e) {
                  try{
                     ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                  }catch (e){
                     // Something went wrong
                     alert("Your browser broke!");
                     return false;
                  }
               }
             } 
     // Create a function that will receive data 
     // sent from the server and will update
     // div section in the same page.

     ajaxRequest.onreadystatechange = function(){
       if(ajaxRequest.readyState == 4){
          var ajaxDisplay = document.getElementById('mapa2');
          ajaxDisplay.value = ajaxRequest.responseText;

        ret_pomoc=ajaxDisplay.value; //HERE IS KEY VARIABLE
        console.log(ret_pomoc); // 1\. Here it is OK show 91

       }

     } 

    console.log(ret_pomoc); // 2\. Here it does not work show undefined and return does not work 

     // Now get the value from user and pass it to
     // server script.
            var z_mesta = mesto_1;
            var do_mesta = mesto_2;
            var queryString = "?z_mesta=" + z_mesta ;
            queryString +=  "&do_mesta=" + do_mesta;
            ajaxRequest.open("GET", "pristup.php" + 
                                  queryString, true);
            ajaxRequest.send(null); 

    } 
```

我需要使用`ret_pomoc`另一个函数中的值

```
function another_function(){

    vzdialenost=ajaxFunction('Bratislava','Nitra') + ajaxFunction('Poprad','Nitra') ;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:02:43.677

ajax 请求是异步工作的，所以这样做的方法是传递一个`callback`在响应返回时将调用的函数。

[理解 Javascript 中的回调函数](http://recurial.com/programming/understanding-callback-functions-in-javascript/)

```
function some_function2(url, callback) {
    var httpRequest; // create our XMLHttpRequest object
    if (window.XMLHttpRequest) {
        httpRequest = new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        // Internet Explorer is stupid
        httpRequest = new
            ActiveXObject("Microsoft.XMLHTTP");
    }

    httpRequest.onreadystatechange = function() {
        // inline function to check the status
        // of our request
        // this is called on every state change
        if (httpRequest.readyState === 4 &&
                httpRequest.status === 200) {
            callback.call(httpRequest.responseXML);
            // call the callback function
        }
    };
    httpRequest.open('GET', url);
    httpRequest.send();
}
// call the function
some_function2("text.xml", function() {
    console.log(this);
});
console.log("this will run before the above callback"); 
```

# mysql - 重启后如何让 Shell 脚本继续运行？

> ID：14521366
> 
> 赞同：1
> 
> 时间：2013-01-25T11:58:01.043
> 
> 标签：mysql, shell

我有一个需要循环运行的 Shell 脚本，并执行一系列命令，完成后重复，因此循环。在每个命令之间有一个睡眠命令，持续几分钟。“工作”永远不应该终止。我可以让脚本启动启动时间，但它需要在系统重新启动时按照命令顺序从中断的地方继续。

我怎样才能最好地做到这一点？我是否应该创建命令队列的 MySQL 表，并在每次成功执行后删除每一行？然后，当它完成循环时，它将重新填充队列表并从顶部开始。

似乎我错过了一些让这更简单的东西。提前感谢您的有用见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:38:21.397

您可能想要重写您的代码，使其看起来像这样：

```
while: ; do
    case $step in
        0) command_1 && ((step++)) ;;
        1) command_2 && ((step++)) ;;
        ...
        9) command_9 && step=0 ;;
        *) echo "ERROR" >&2 ; exit 1 ;;
    esac
done 
```

因此，您将通过测试 的值来了解所做的工作`step`。

然后，您可能希望`trap`在循环执行之前设置 a `while`，以便在退出时将值`step`写入日志文件：

```
trap "echo step=$step > log_file" EXIT 
```

然后，您需要做的就是`source`在脚本开头的日志文件中，最后一个将继续其已停止的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:06:52.750

对于这种情况，MySQL 听起来像是一个非常复杂的解决方案。一般来说，我会考虑某种基于文件系统的标记。您可以将当前执行状态保存在一个或多个文件中，例如 in`/var/run`并让您的脚本在启动时检查这些文件。

完成一个步骤后，您可以重命名文件以反映需要完成的下一步，依此类推。

最后，重命名或删除它，以便下次脚本运行时，它将开始一个新的循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:08:57.807

我认为您可以为此使用 cron 作业。cron 作业可以每分钟运行一次，并且使用“锁定文件”策略，只有当锁定文件不存在时，您才能运行脚本，因此在前一个运行脚本结束时。

# javascript - 带有垂直滚动条的 jQuery vTicker

> ID：14521371
> 
> 赞同：0
> 
> 时间：2013-01-25T11:58:22.417
> 
> 标签：javascript, jquery, jsp

我正在使用 jQuery vTicker，但我想要用户可以使用滚动条查看的整个列表。我不想要动态滚动条。只是一个简单的滚动条。这就是我正在做的事情。

HTML：

```
<div id="liveData" style="max-height: 490px; overflow: auto;">
    <div class="live-feeds">
        <ul>
            <li>
            /*Live data here*/
            </li>
        </ul>
    </div>
</div> 
```

JS：

```
$('.live-feeds').vTicker({
        speed: 800,
        pause: 2000,
        animation: 'fade',
        height: 490,
        mousePause: true,
        showItems: 50
    }); 
```

有谁知道我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:10:55.553

添加

```
direction:'down' 
```

到您的 (.live-feeds).vTicker JS

你的js真的应该是

```
 $(function() {$('#live-feeds').vTicker({
         speed: 800,
         pause: 2000,
         showItems: 50,
         animation:'fade',
         mousePause:true,
         height: 490,
         direction:'down'
        });
   }); 
```

# java - 如何让 java.io.File.list() 与 Windows 资源管理器中的顺序相同

> ID：14521373
> 
> 赞同：1
> 
> 时间：2013-01-25T11:58:25.037
> 
> 标签：java, windows

如何获得`java.io.File.list()`与 Windows 资源管理器中相同的订单？

在一个程序中，我正在创建`Temp`文件夹，例如`Temp1`，`Temp2`等等。但是当我`java.io.File.list()`用来检索文件夹列表时，它会给出 as `Temp1`，`Temp10`依此类推。

请告诉如何获得与 Windows 资源管理器中显示的相同的订单列表？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T12:05:38.530

Windows 资源管理器默认显示按名称排序的文件。查看 javadoc 的`File.list()`，

> 无法保证结果数组中的名称字符串会以任何特定顺序出现；特别是，它们不能保证按字母顺序出现。

因此，在使用 获取文件列表后`File.list()`，您需要按文件名对其进行排序`Arrays.sort(file.list())`以获得所需的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T01:54:22.163

您需要编写自己的比较器。比较器需要拆分文件名字符串，将它们分成连续的非数字字符序列和数字字符序列。然后对序列进行排序，在比较之前将数字字符序列转换为整数。此外，如果整数相等（由于前导零），则将较长的数字序列排序在较短的序列之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T11:20:01.003

这是一种称为自然排序的特定窗口排序算法的实现。

[Java - 像 Windows 资源管理器一样对字符串进行排序](https://stackoverflow.com/questions/23205020/java-sort-strings-like-windows-explorer)

简而言之，它将两个字符串拆分为字母 - 数字部分进行比较，并以特定方式比较这些部分以实现这种排序。

# bash - 有没有办法同时使用 qsub 和 source ？

> ID：14521375
> 
> 赞同：0
> 
> 时间：2013-01-25T11:58:30.650
> 
> 标签：bash, shell, qsub

我写了一个shell脚本来分别处理一堆文件，像这样

```
#!/bin/bash

#set parameters (I have many)
...

#find the files and do iteratively
for File in $FileList; do
    source MyProcessing.sh
done 
```

`MyProcessing.sh`是调用脚本，主脚本中的变量和函数在调用脚本中使用。

现在我想将我的 shell 脚本移动到集群中，并`qsub`在迭代中使用。我试过了

```
#find the files and do iteratively
for File in $FileList; do
    echo "source MyProcessing.sh" | qsub
done 
```

但它不能以这种方式工作。任何人都可以帮忙吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:21:06.490

变量和函数对于脚本来说是本地的。这意味着`source MyProcessing.sh`将起作用，但`bash MyProcessing.sh`不会。第二种语法创建一个子外壳，这意味着一个新的 Unix 进程和 Unix 进程是隔离的。

`qsub`由于您通过管道调用它，因此也是如此：BASH 将创建一个新进程`qsub`并将标准输入设置为`source MyProcessing.sh`. 这只将这 23 个字节传递给`qsub`其他任何东西。

如果你想让它工作，那么你将不得不编写一个 100% 独立于主脚本的新脚本（即它不能使用任何变量或函数）。然后您必须阅读文档`qsub`以了解如何设置它。通常，此类工具仅在您`MyProcessing.sh`在集群的每个节点上分发副本后才能工作。

此外，该工具可能不会尝试找出脚本需要的其他数据，因此您还必须将文件复制到集群节点（可能通过将它们放在共享文件系统上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:19:20.057

利用：

```
(set; echo "source MyProcessing.sh") | qsub 
```

`qsub`您需要在shell中设置当前变量。

# xml - 无法用 xslt 显示图片

> ID：14521376
> 
> 赞同：0
> 
> 时间：2013-01-25T11:58:31.603
> 
> 标签：xml, xslt

我正在尝试使用 xslt 和 xml 显示图片。虽然所有其他事情都正常工作并显示实际图片，但在标签“图片”内的 photo.xml 文件中指定路径的实际图片不会显示。

我有一个看起来像这样的 photo.xml 文件：

```
<?xml version="1.0"?>
<pic:photoCatalog xmlns:pic="pictureCatalog">
  <pic:photos>
    <pic:photo>
           <pic:title>Alcazar</pic:title>
           <pic:location>Segovia - Spain</pic:location>
           <pic:picture> pic
           <pic:img src="images/DSC_0183.jpg" orginalwidth="150" />
           </pic:picture>
           <pic:date>Jan 2013</pic:date>
           <pic:camera>Sony</pic:camera>
           <pic:resolution>12px</pic:resolution>
           <pic:format>.jpg</pic:format>
           <pic:description>
            Medieval Castle over the hill overlooking the old city of Segovia.
           </pic:description>
    </pic:photo>
   </pic:photos>

</pic:photoCatalog> 
```

然后我有一个 index.xml 文件，如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<?xml-stylesheet type="text/xsl" href="merge.xsl"?>

<pic:catalog xmlns:pic = "pictureCatalog">
    <pic:logo>Logo</pic:logo>
    <Author>User Name</Author>
    <pic:allPhotos>photos</pic:allPhotos>
</pic:catalog> 
```

最后是转型：

```
 <!-- All the photos-->
   <xsl:template match = "pic:catalog/pic:allPhotos">
     <html>
         <head>
            <link rel="stylesheet" type="text/css" href="Style.css" />
         </head>
         <body>

      <!--Loop for the sort-->
    <xsl:for-each select="document(concat(., '.xml'))/pic:photoCatalog/pic:photos">
                <!--point at the fine-->
                <xsl:sort select="pic:photo" />
                 <xsl:value-of select="pic:photo"/><br/>
            </xsl:for-each>

         </body>
   </html>
   </xsl:template> 
```

预期的输出是带有标签信息的图片列表。正如我所说，一切正常，但没有显示图片。

```
<div id="CenterAreaTop">

                <link rel="stylesheet" type="text/css" href="Style.css">

           Acqueduct
           Segovia <!--the picture right after this-->
           Jan 2013
           Olympus
           12px
           .jpg

2000 Year old aqueduct built by the romans ca. xxxx during the reign of xxx

.....

 </div> 
```

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:06:59.643

好的，这是怎么回事：

```
 <xsl:template match = "pic:catalog/pic:allPhotos">
    <html>
      <head>
        <link rel="stylesheet" type="text/css" href="Style.css" />
      </head>
      <body>
        <xsl:apply-templates select="document(concat(., '.xml'))/pic:photoCatalog/pic:photos/pic:photo">
          <xsl:sort select="pic:title" />
        </xsl:apply-templates>          
      </body>
    </html>
  </xsl:template>

  <xsl:template match="pic:photo">
    <xsl:apply-templates select="*" />
    <br />
  </xsl:template>

  <xsl:template match="pic:img">
    <img src="{@src}" alt="" />
  </xsl:template> 
```

# css - CSS 不寻常的字体

> ID：14521378
> 
> 赞同：0
> 
> 时间：2013-01-25T11:58:40.477
> 
> 标签：css

> **可能重复：**
> [如何向网站添加一些非标准字体？](https://stackoverflow.com/questions/107936/how-to-add-some-non-standard-font-to-a-website)

我创建了一个网站，并在我的 CSS 文件中使用从网络下载的字体，它在 Windows 中运行良好，我可以在我的网站上使用它，但是如果我在 Linux 上运行我的页面，它当然不起作用，因为 Linux 不知道那个字体，所以我的问题是，如果我将我的页面放在某个服务器上，我需要在服务器上“安装”该字体或类似的东西，或者它是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:01:16.963

您需要创建字体的 Web 兼容格式（不同的浏览器需要不同的格式），然后在样式表中使用[`@font-face`规则来包含它。](http://www.w3.org/TR/css3-fonts/#font-face-rule)例如（这是[http://fontsquirrel.com](http://fontsquirrel.com)生成的输出）：

```
@font-face {
    font-family: "YourFont";
    src: url("YourFont.eot");
    src: url("YourFont.eot?#iefix") format("embedded-opentype"),
         url("YourFont.woff") format("woff"),
         url("YourFont.ttf") format("truetype"),
         url("YourFont.svg#YourFont") format("svg");
    font-weight: normal;
    font-style: normal;
} 
```

然后浏览器将下载适当的字体文件并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:02:46.747

字体取决于**客户端**安装的字体。在服务器上安装字体没有用。

使用 CSS3（并非所有浏览器都支持），您可以使用[@font-face CSS 属性](http://www.css3.info/preview/web-fonts-with-font-face/)来使用自定义字体。自定义字体的另一个解决方案是使用[Google Webfonts](http://www.google.com/webfonts)。否则，只需选择任何[网络安全字体](http://www.w3schools.com/cssref/css_websafe_fonts.asp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:03:56.440

如果您使用的字体可能无法被所有系统识别，则必须在 Web 服务器上包含匹配的字体文件。您可以使用 CSS 的*@font-face*属性注册这些字体。

尝试以多种格式注册字体（如 TrueType 和 OpenType）。提供一些广泛使用的后备字体也是一种很好的做法，例如 Times New Roman 或 Arial。

# javascript - 从 asp.net 控件中的 Javascript 返回字符串

> ID：14521379
> 
> 赞同：1
> 
> 时间：2013-01-25T11:58:40.727
> 
> 标签：javascript, asp.net, vbscript

我有这个javascript函数

```
 function getListOfUidMeter(){
    input = "";
    var tbl = document.getElementById('tableStripy'), i;
    for (i = 0; i < tbl.rows.length; i++) {
        input = input + tbl.rows[i].cells[11].outerText).split(",")[0] + ",";
    }
    return input;
} 
```

这个函数返回一个字符串

我想在asp页面中得到这个函数的输出，但我不知道怎么做

```
<form name="Form1" method="post" onkeypress="if (event.keyCode==13) {this.submit();event.returnValue=false;} else event.returnValue=true;">
<input class="lookup" type=hidden name="Id" value="<%=PageParams1.Id%>">
<input type=hidden name="SessionId" value="<%=PageParams1.SessionId%>">
<input type=hidden name="Command" value="">
<input type=hidden name="AccountID" value="<%=PageParams1.AccountID%>">
<input type=hidden name="UIDFACILITY" value="<%=PageParams1.UIDFACILITY%>">
<input type=hidden name="FACILITYID" value="<%=PageParams1.FACILITYID%>">
<input type=hidden name="METERID" value="<%=PageParams1.METERID%>">
<input type=hidden name="UIDMETER" value="<%=PageParams1.UIDMETER%>">
<input type=hidden name="UIDMeterHistory" value="<%=PageParams1.UIDMeterHistory%>">
<input type=hidden name="CustomerName" value="<%=PageParams1.CustomerName%>">
<input type=hidden name="CustomerId" value="<%=PageParams1.CustomerId%>">
<input type=hidden name="EntityParam" value="<%=PageParams1.EntityParam%>">
<input type=hidden name="SORT_BY" value="<%=PageParams1.SORT_BY%>"> 
<input type=hidden name="SORT_ORDER" value="<%=PageParams1.SORT_ORDER%>">
<input type=hidden name="Mode" value="<%=PageParams1.Mode%>">
    <table class="SnapIn" cellpadding="0" cellspacing="0" border=0><tr class="ToolsTabs">
  <td class="Title"><nobr><%=Proxy1.i18n.FM("MeterHistory")%></nobr></td>
   <td class="ToolsLeft">
    <b><%=Proxy1.i18n.FM("ID")%></b> &nbsp; <%=meterId %>
     <%if (PageParams1.Mode == "ServicePoint") {%>
          &nbsp;&nbsp;|&nbsp;&nbsp;<a href="../../ccs/MainWebPart.aspx?Mode=             

    <%=PageParams1.Mode%>&SessionId=<%=PageParams1.SessionId%>&Uid=  
    <%=Proxy1.Session.GetPropertyValue("SERVICEPOINT_UID")%>">
    <%=Proxy1.i18n.FM("ServicePointSummary")%></a>
    <% } else if (PageParams1.Mode == "MarketParticipant") { %>
        &nbsp;&nbsp;|&nbsp;&nbsp;<a href="../../ccs/MainWebPart.aspx?Mode=
    <%=PageParams1.Mode%>&SessionId=<%=PageParams1.SessionId%>&Uid=
    <%=Proxy1.Session.GetPropertyValue("MARKETPARTICIPANT_UID")%>">   
    <%=Proxy1.i18n.FM("MarketParticipantSummary")%></a>
    <% } %>
  </td>
  <td class="ToolsRight"><nobr>&nbsp;
        <%if (PageParams1.AccountID) {%>
      <b><%=Proxy1.i18n.FM("AccountID")%></b>
      <a class="Link" onclick='window.navigate("../viewaccount/Meters.asp?Id=<%= escape(PageParams1.AccountID)%>&SessionId=<%=PageParams1.SessionId%>")'><u><%=PageParams1.AccountID %></u></a>
    &nbsp;&nbsp;
    <%} if (PageParams1.CustomerId) {%>
    <b><%=Proxy1.i18n.FM("CustomerID")%></b>
      <a class='Link' onclick='navigate("../../ccs/MainWebPart.aspx?Id=

    <%=escape(PageParams1.CustomerId)%>&SessionId=<%=PageParams1.SessionId%>"+"&Mode=Customer")'> 
          <%=PageParams1.CustomerId%>
      </a>
      &nbsp;&nbsp;
      <%} if (PageParams1.UIDFACILITY) {%>
        <b><%=Proxy1.i18n.FM("FacilityID")%></b>
        <a class=Link onclick='navigate("../cust_facility/Basics.asp?UIDFACILITY=<%=PageParams1.UIDFACILITY%>&SessionId=<%=PageParams1.SessionId%>&X_ROWPERPAGE=50")'>
            <%=PageParams1.FACILITYID%>
        </a>
      <%}%>
  </nobr></td>
</tr><tr>
    <td class="TabBox" colspan="3"><%= RenderTabs("MeterRead") %></td>
</tr><tr>
    <td class="Body" colspan="3">
    <%          if (OperationError) ReportError(OperationError)%>

    <%if (PageParams1.Command=='Edit') { %>
            <table width=100%><tr><td class=LinkBox>
              <%if (Proxy1.Allow("//ACCTMGT/ACCTCOMP/ACCTMET/@UPDATE")) {%>
              <a href="javascript: Save()"><%=Proxy1.i18n.FM("Save")%></a> |
              <%}%>
              <%if (PageParams1.EntityParam && Proxy1.Allow("//ACCTMGT/ACCTCOMP/ACCTMET/@REMOVE") ) { %><a href="javascript: Delete()"><%=Proxy1.i18n.FM("Delete")%></a> |<% } %>
              <a href="javascript: Cancel()"><%=Proxy1.i18n.FM("Cancel")%></a>
            </td></tr></table>
    <%} else%>
        <%=tMeterHistoryTable %>

    <%if (PageParams1.Command != 'Edit') { %>
        <table style="width: expression(Math.max(document.body.offsetWidth-55, 540))">
        <tr>
        <td align=left>
        <%
                    if (Proxy1.Allow("//FACILITY/ADD"))
                    {
                %>
                                <a href="javascript: Edit()" ><%=Proxy1.i18n.FM("Add")%></a>&nbsp;&nbsp;&nbsp;
                <%
                    }
                    if (Proxy1.Allow("//FACILITY/REEST_ACTION/@REESTIMATE")) { %>
                                <a href="javascript: reestimate()">Ristima</a>&nbsp;&nbsp;&nbsp;
                <%
                    }
                    if (Proxy1.Allow("//FACILITY/REEST_ACTION_2")) { %>
                                <a href="javascript: reestimate2()">Ristima lettura conferimento</a>&nbsp;&nbsp;&nbsp;
                <%  }
                    if (Proxy1.Allow("//FACILITY/REEST_ACTION/@DISCHARGE")) { %>
                                <a href="javascript: discharge()">Scarta</a>
                <%  } %>
                            </td>
                            <!--Indicazione righe e pagina-->
                            <td align=right>
                            <%= Paginator_b(PageParams1.ROWPERPAGE, PageParams1.PAGENUMBER) %>
                            </td>
                        </tr>
                    </table>
            <%
                } 
            %>
<div class="mAppScroll" style="height:100% width:100%"><% =tTable %></div>
<tr>
                        <td>
                            <!--Cannata Alberto - modifica del 09/10/2006: aggiorniamo i campi LSUSER e LSTIME della METERHISTORY.-->
                            <input type="hidden" name = "OLD_STATUS" value = "<%=oldstatus_str%>">
                            <input type="hidden" name = "X_LSUSER" value = "<%=username_web.toUpperCase()%>">
                            <input type="hidden" name = "X_LSTIME" value = "<%=data_modifica%>">
                        </td>
                    </tr>
</td>
</tr>
</table><!-- /SnapIn -->
<SCRIPT language="javascript">
getListOfUidMeter();
</SCRIPT>
    </form>
    </body></html>
    <% }     
    catch (e) {ReportError(e); } %> 
```

我已经在其中调用了 javascript 函数，但是如何获得在 asp 页面中使用它的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:42:28.093

但是，有很多方法可以实现这一点，因为您在这里使用隐藏字段是一种简单的方法：

*   为前“hfTemp”添加一个新的隐藏字段

*   在您的`Javascript`函数中将返回的值存储在该隐藏字段中。

    $get('hfTemp').value = 输入

*   在 Asp.net 中调用 JS 函数后，使用：

(五)

```
 Dim JSValue As String = Request.Form("hfTemp") 
```

（C＃）

```
string JSValue = Request.Form("hfTemp"); 
```

# yii - 在 Yii 的 layouts main.php 中显示登录表单

> ID：14521381
> 
> 赞同：1
> 
> 时间：2013-01-25T11:58:41.980
> 
> 标签：yii

我想更改“views/layouts/main.php”以在用户未通过身份验证时显示登录表单。

所以我像这样更改了“siteController”actionIndex：

```
public function actionIndex() {

$loginForm = new LoginForm();
    $this->render('index', array('loginForm'=>$loginForm)); 
} 
```

然后像这样在“views/layouts/main.php”中调用它：

```
if(Yii::app()->user->isGuest):
    echo $loginForm;
else :
    echo 'JJJ';
endif; 
```

然后当我访问我的网站时，它显示错误：“未定义变量：loginForm”。

我不知道如何解决这个问题？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:16:22.230

这里有几个问题。首先，您正在创建一个名为的对象`$loginForm`并为其分配一个值`new LoginForm();`

```
$loginForm = new LoginForm(); 
```

我不确定您是否故意这样做并且`LoginForm()`是返回某些内容的函数或方法，但我感觉您打算这样做：

```
$loginForm = new LoginForm; 
```

**它创建了类**LoginForm的一个新实例（这是一个默认的 Yii webapp [CFormModel](http://www.yiiframework.com/doc/api/1.1/CFormModel)类）。即使是这样，也有更好的方法来做到这一点。

*最简单的方法是在index.php*视图中调用`renderPartial`已经存在的*login.php*视图（位于*protected/views/site/login.php*），如下所示：

 *```
if(Yii::app()->user->isGuest) {
    $this->renderPartial("loginform",array("model"=>new LoginForm));
} else {
    echo 'JJJ';
} 
```

这会渲染视图*login.php*（不渲染布局，因为我们已经渲染了布局 -这是关于和[的文档](http://www.yiiframework.com/doc/api/1.1/CController)）并将模型的新实例传递给名为 的变量。`render``renderPartial``LoginForm``$model`

您很可能必须编辑 login.php 视图的外观以使其“适合”，但请记住，此视图也用于*SiteController actionLogin*。

剩下要做的就是修改你的*actionIndex*来处理表单提交（你可以复制现有的*SiteController actionLogin*功能）

另一个更好的解决方案是为登录表单创建一个可以在整个应用程序中使用的小部件。我不打算深入讨论，但您可以在 SO 上阅读有关它的信息，或者查看[本教程](http://yiitutorials.net/easy/creating-a-widget-with-the-yii-framework)或[本](http://www.yiiframework.com/doc/blog/1.1/en/portlet.menu)教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:17:18.653

这是因为*index 模板是在 main template 之前加载的*。因此，更好的方法是在控制器中定义一个公共属性。我建议你在 Controller 类中定义这个属性，因为 SiteController 和 *Controller 扩展了它。

然后，您可以运行它。

```
if(Yii::app()->user->isGuest) {
    echo $this->loginForm;
} else {
    echo 'JJJ';
} 
```

注意，因为在这种工作方式中你走出了 MVC 模式。这种工作方式迫使您在每个操作中定义一个 LoginForm。我建议你这样做：

保持清洁您对渲染文件的调用。

```
public function actionIndex() {
    $this->render('index'); 
} 
```

并在您的 Controller 类中添加一个 getLoginForm 方法，获取：

```
if(Yii::app()->user->isGuest) {
    echo $this->getLoginForm();
} else {
    echo 'JJJ';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:03:15.370

在控制器类中定义新属性：

```
public $loginForm; 
```

在您的`main.php`访问中，它像：

```
echo $this->loginForm; 
```

如果您在`render`方法中传递变量，它将仅在视图文件中可用，但在布局文件中不可用。*

# visual-c++ - 从复杂转换 * 到 fftw_complex*

> ID：14521386
> 
> 赞同：1
> 
> 时间：2013-01-25T11:59:01.047
> 
> 标签：visual-c++, fftw

我有一个输入`complex<double>* g (2D-array)`。

为了对其进行傅里叶变换，我首先将其转换

`in=(fftw_complex*)g;`

`in`的输入在哪里`fftw`。

执行fft后，代码

```
fftw_free(out);
fftw_free(in); 
```

不工作。

我收到“未处理的异常”错误。

恐怕问题出在转换上。有任何想法吗？

非常感谢。

# unit-testing - 是否可以为 Spring 安全拦截的 Urls 创建单元测试

> ID：14521392
> 
> 赞同：3
> 
> 时间：2013-01-25T11:59:25.683
> 
> 标签：unit-testing, spring-security, java-ee-5

我们的应用程序使用 spring security 对 Urls 进行过滤，如下所示：

```
<intercept-url pattern="/resources/**" access="ROLE_ANONYMOUS,ROLE_USER"/> 
```

我们想编写一个单元测试，它采用 Url 列表并检查每个方法（GET、POST、PUT ..）是否可访问。

我正在考虑使用，`DelegatingFilterProxy`但不确定如何`config/context`在我们的`web.xml`.

这是一种有效的方法还是可取的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:09:53.493

您可以通过 @Autowire DelegatingFilterProxy 为您的拦截 URL 创建测试，并使用 MockHttpServletRequest、MockHttpServletResponse 和 MockFilterChain 来验证结果。

如果您使用的是 Spring MVC，您可以查看支持过滤器（包括 Spring Security）的 Spring Test MVC。您可以[在存储库中找到一个示例](https://github.com/SpringSource/spring-test-mvc/blob/master/src/test/java/org/springframework/test/web/server/samples/context/SpringSecurityTests.java)。请注意，Spring Test MVC 包含在 Spring 3.2+ 中（在 spring-test 模块中）。它也可以作为 Spring 3.1 的外部模块使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-06T17:44:23.083

在我的测试中，涉及拦截 URL：

```
@ContextConfiguration({
        "classpath:spring/spring-app.xml",
         ...
})
@WebAppConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
@Transactional
public class ControllerTest {

    private static final CharacterEncodingFilter CHARACTER_ENCODING_FILTER = new CharacterEncodingFilter();

    static {
        CHARACTER_ENCODING_FILTER.setEncoding("UTF-8");
        CHARACTER_ENCODING_FILTER.setForceEncoding(true);
    }

    protected MockMvc mockMvc;

    @Autowired
    private WebApplicationContext webApplicationContext;

    @PostConstruct
    private void postConstruct() {
        mockMvc = MockMvcBuilders
            .webAppContextSetup(webApplicationContext)
            .addFilter(CHARACTER_ENCODING_FILTER)
            .apply(springSecurity())
            .build();
    }

    @Test
    public void testUsers() throws Exception {
        mockMvc.perform(get("/users")
            .with(authentication(new UsernamePasswordAuthenticationToken("user", "password")))
            .andDo(print())
            .andExpect(status().isOk())
            .andExpect(view().name("users"))
            .andExpect(forwardedUrl("/WEB-INF/jsp/users.jsp"));
    }
    ... 
```

# raphael - Raphael 集是否接受事件处理程序？

> ID：14521396
> 
> 赞同：0
> 
> 时间：2013-01-25T11:59:33.940
> 
> 标签：raphael

Raphael 集是否接受事件处理程序？当我在 raphael 集上设置事件处理程序时，它似乎被分配在集内的每个 Raphael 形状上，而不是集本身，如果您尝试单击集，您可以在此处看到：

[http://jsbin.com/aponen/3/edit](http://jsbin.com/aponen/3/edit)

我对各种 hack 不感兴趣，例如通过自定义属性或类似方法将集合内的元素与集合本身链接起来。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:36:48.060

是的，事件处理程序单独应用于每个对象——Raphael 不使用`<g>`SVG 的元素。但是，您可以通过几个按键来解决您的问题：

```
set.push(rect);
set.push(circle);
set.attr({'fill': 'yellow'});
set.click(function(evt) {
    //old
    this.attr({'fill': 'red'});
    //new
    set.attr({'fill': 'red'});
}); 
```

它的工作方式和您认为它可能工作的方式的最大区别是处理程序中“this”的含义。将其更改为“设置”将解决该问题。

**更新，2013 年 1 月 26 日根据评论，您还可以使用**[Raphael 的“数据”方法](http://raphaeljs.com/reference.html#Element.data) 将集附加到集的子集的一行：

```
set.push(rect);
set.push(circle);

set.data('myset', set);

set.attr({'fill': 'yellow'});
set.click(function(evt) {
  this.data('myset').attr({'fill': 'red'});
}); 
```

我不相信有一种本地方式可以从孩子那里访问该集合，但我可能会错过它。

# wso2 - forgerock 身份管理解决方案与 WSO2 身份服务器

> ID：14521397
> 
> 赞同：9
> 
> 时间：2013-01-25T11:59:34.743
> 
> 标签：wso2, openam, federated-identity, identity-management, openidm

我正在尝试选择 forgerock 身份管理解决方案（openAM、openIDM）和 wso2 身份服务器之一来实施身份和访问管理解决方案。

我有兴趣使用以下功能：

*   单点登录 (SSO)
*   基于策略的访问控制
*   管理用户身份
*   连接到中央存储库，如 Active Directory、OpenLdap、Oracle Internet Directory 等。
*   ETC..

这两种开源产品看起来都是可行的。我有兴趣拥有上述所有功能以及实现这些功能的良好 API，以及积极的社区支持。

两者中哪一个是最好的？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-26T06:45:08.917

我是 WSO2 的架构师 - 主要是领导 WSO2 身份服务器。我尽量不要有偏见:-)

这两款产品都为您带来了一个全面的身份管理平台——支持 SAML2、OpenID、XACML 3.0、OAuth 2.0、SCIM、WS-Security 标准。

我想在 WSO2 Identity Server 上强调的几个独特功能是……

1.  分散式联合 SAML2 IdP ( [http://blog.facilelogin.com/2012/08/security-patterns-decentralized.html](http://blog.facilelogin.com/2012/08/security-patterns-decentralized.html) )
2.  分布式 XACML PDP
3.  用户友好的 XACML PAP 向导
4.  高可扩展性（我们有一个中东客户使用 WSO2 IS 超过 400 万的用户群来支持 OpenID。）
5.  基于 Cassandra 的用户存储（我们的一位生产客户将使用超过 8 亿用户群）
6.  轻量级和非常低的内存占用。WSO2 IS 的精简版可以以 64MB 堆大小启动，标准版本以 96MB 堆运行。
7.  高度可扩展。WSO2 IS 背后的架构是高度可扩展的。您可以轻松地插入您的身份验证器、用户存储等...
8.  支持多租户。
9.  支持多个用户存储（AD、LDAP、JDBC）
10.  互操作性。
11.  WSO2 提供的经过验证的 SOA 产品平台的一部分。

此外，我们计划今年通过一组改进的身份管理功能增加对 OpenID Connect 的支持。

[您还可以从http://blog.facilelogin.com/2012/08/wso2-identity-server-flexible.html](http://blog.facilelogin.com/2012/08/wso2-identity-server-flexible.html)阅读有关 WSO2 身份服务器的更多信息

对于您的问题，您不会得到我公正的回答 :-) “哪一个是两个中最好的？”。您也将在这里从 Forgerock 和其他人那里得到答案。最好是评估和决定。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-26T20:10:29.863

我是 ForgeRock 的产品经理，但不适用于您提到的产品（OpenAM、OpenIDM）。

ForgeRock Open Identity Stack 完全支持您的所有要求，基于现有标准，例如 Prabath 提到的标准。它提供了一个单一的、通用的 REST API 来跨平台交互。它易于部署、模块化、轻量级且高度可扩展。但在我看来，关键是它是一个经过验证的解决方案，由数百个组织部署，具有内置的互联网规模。该解决方案已被电信服务提供商、大中型企业用于内部或面向客户的服务。

我同意 Prabath 的观点，既然您已经从 ForgeRock 和 WSO2 获得了答案，那么最好是评估并做出自己的决定。

问候。

卢多维奇。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-13T20:53:29.257

我目前正在评估 WSO2。它有一个更宽松的 APACHE 许可模型和一个更友好的管理模型，因为我遇到了 ForgeRock 人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-01T15:51:38.070

阿卜杜勒，请分享你的发现，因为我也在研究这两者。几年前，就在它过渡到 OpenAM 之前，我们在生产环境中实施了 OpenSSO。这是一款出色的产品，具有思想领导力和出色的执行力。不幸的是，即将过渡到 OpenAM 对我们中的一些人来说太令人不安了，我们以巨大且不必要的成本转向了另一种产品，并继续关注我们的肩膀。当时的一些缺点是能够通过来自 dev-test-stage-prod 的通道迁移策略、保持配置同步和问题解决。此外，细粒度策略是非常新的。所以我的信息有点过时了，我知道他们从那时起已经成熟了。

刚从 WSO2 开始。根据其他评论，它具有强大的思想领导力和良好的执行力以及多个平台。他们的基础架构看起来很稳固，这使他们能够非常快速地创建和使用/改进开源技术，并将其转化为集成的、商业支持的解决方案。

# syntax - 在函数上传递路径（未捕获的错误：语法错误，无法识别的表达式）

> ID：14521399
> 
> 赞同：1
> 
> 时间：2013-01-25T11:59:40.200
> 
> 标签：syntax, parameters, path, expression

今天我正在努力解决“未捕获的错误：语法错误，无法识别的表达式：”。我会将路径传递给预加载图像的函数，但是当我要调用它时，出现错误：

```
preLoader('img/realizzazione-impianti-fotovoltaici-header.png'); 
```

这是功能：

```
var preLoader = function (arrayOfImages){
    $(arrayOfImages).each(function(){
        //$('<img/>')[0].src = this;
        var cacheImage = document.createElement('img');
        cacheImage.src = this;
        cacheImg.push(cacheImage);
        });//each

    }//preLoader 
```

# spring-mvc - 通过spring验证器类完成验证时jsp页面上的异常

> ID：14521401
> 
> 赞同：0
> 
> 时间：2013-01-25T11:59:46.220
> 
> 标签：spring-mvc

我在使用验证器类进行验证时遇到了 spring 验证问题，验证正常进行，但是对于`int and date`类型，当我在表单字段中提供不同类型（如字符串）时，整个`exception`都粘贴在我的 jsp 页面上，我想在上面提供正确的消息格式。我想做的另一件事是我想在这个验证器类中使用正则表达式 请提供一段正则表达式的代码片段以及任何示例，以便我可以在这个验证器类中实现

这是我的控制器

```
 package com.nousinfo.tutorial.controllers;
    import java.text.SimpleDateFormat;
    import java.util.Date;
    import java.util.Map;
    import javax.servlet.http.HttpServletRequest;
    import org.springframework.beans.propertyeditors.CustomDateEditor;
    import org.springframework.stereotype.Controller;
    import org.springframework.ui.Model;
    import org.springframework.validation.BindingResult;
    import org.springframework.web.bind.ServletRequestDataBinder;
    import org.springframework.web.bind.annotation.ModelAttribute;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RequestMethod;
    import org.springframework.web.bind.annotation.RequestParam;
    import org.springframework.web.servlet.ModelAndView;
    import com.nousinfo.tutorial.model.EmployeeForm;
    import com.nousinfo.tutorial.service.impl.EmployeeServiceImpl;
    import com.nousinfo.tutorial.service.impl.ProjectServiceImpl;
    import com.nousinfo.tutorial.service.model.EmployeeBO;
    import com.nousinfo.tutorial.validator.EmployeeValidator;

    /**
     * 
     * @author ankurj
     * 
     */
    @Controller
    @RequestMapping("employee")
    public class EmployeeController {

        private EmployeeServiceImpl employeeServiceImpl;
        private ProjectServiceImpl projectServiceImpl;
        private EmployeeValidator employeeValidator;

        public void setEmployeeServiceImpl(EmployeeServiceImpl employeeServiceImpl) {
            this.employeeServiceImpl = employeeServiceImpl;
        }

        /**
         * Set the view to Employee Form
         * 
         * @param model
         *            is the entity mapped to form object
         * @return view
         * @throws Exception
         */
        @RequestMapping(value = "/searchspring", method = RequestMethod.GET)
        public String view(Model model) throws Exception {
            EmployeeBO employeeBO = new EmployeeBO();
            model.addAttribute("employeeBO", employeeBO);
            return "EmployeeForm";
        }

        public void setEmployeeValidator(EmployeeValidator employeeValidator) {
            this.employeeValidator = employeeValidator;
        }

        /**
         * set the view to "AboutUS"
         * 
         * @return VIEW
         */
        @RequestMapping(value = "/aboutUs", method = RequestMethod.GET)
        public String aboutUsView() {
            return "AboutNous";
        }

        /**
         * This method is used to insert the detail of employee or simply create new
         * employee with detail
         * 
         * @param employeeForm
         *            is the model entity mapped to form object
         * @param bindingResult
         * @param model
         * @return
         * @throws Exception
         */
        @RequestMapping(value = "/createEmployee", method = RequestMethod.POST)
        public ModelAndView createEmployee(
                @ModelAttribute("employeeBO") EmployeeBO employeeBO,
                BindingResult bindingResult) throws Exception {
            ModelAndView model = new ModelAndView();
            employeeValidator.validate(employeeBO, bindingResult);
            System.out.println(bindingResult);
            System.out.println(employeeBO.getEmployeeNumber());
            if (bindingResult.hasErrors()) {
                model.setViewName("EmployeeForm");
                return model;
            }
            model.addObject("employeeBO", employeeBO);

            if (employeeBO.getUpdateStatus() == 'A') {
                boolean flag = employeeServiceImpl.actionDecider(employeeBO);
                if (flag == false) {
                    model.setViewName("DBError");

                } else
                    model.setViewName("Success");
            }

            return model;
        }
} 
```

这是我的验证器类

```
package com.nousinfo.tutorial.validator;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import org.springframework.validation.Errors;
import org.springframework.validation.ValidationUtils;
import org.springframework.validation.Validator;
import com.nousinfo.tutorial.service.model.EmployeeBO;

public class EmployeeValidator implements Validator {

    public boolean supports(Class<?> arg0) {
        return EmployeeBO.class.isAssignableFrom(arg0);
    }

    public void validate(Object object, Errors errors) {
        boolean found = false;
        Pattern pattern = Pattern.compile("[0-9]");

        ValidationUtils.rejectIfEmpty(errors, "firstName",
                "employeeBO.firstName");
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "title",
                "employeeBO.title");
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "city",
                "employeeBO.city");
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "state",
                "employeeBO.state");

        EmployeeBO employeeBO = (EmployeeBO) object;

        if (pattern.matcher(employeeBO.getFirstName()).find()) {
            found = true;
        }
        if (found) {
            errors.rejectValue("firstName", "employeeregex.string");
        }

        if (pattern.matcher(employeeBO.getLastName()).find()) {
            found = true;
        }
        if (found) {
            errors.rejectValue("lastName", "employeeregex.string");
        }

        if (pattern.matcher(employeeBO.getCity()).find()) {
            found = true;
        }
        if (found) {
            errors.rejectValue("city", "employeeregex.string");
        }
        if (pattern.matcher(employeeBO.getState()).find()) {
            found = true;
        }
        if (found) {
            errors.rejectValue("state", "employeeregex.string");
        }
        if (employeeBO.getEmployeeNumber() == null) {

            errors.rejectValue("employeeNumber", "employeeBO.employeeNumber");

        }
        if (employeeBO.getPincode() == null) {
            errors.rejectValue("pincode", "employeeBO.pincode");

        }

        if (employeeBO.getTelephoneNumber() == null) {
            errors.rejectValue("telephoneNumber", "employeeBO.telephoneNumber");

        }
        if (employeeBO.getMobileNumber() == null)
            errors.rejectValue("mobileNumber", "employeeBO.mobileNumber");

    }

} 
```

这是我的jsp，我通过它提供输入

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://jakarta.apache.org/taglibs/input-1.0"
    prefix="input"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="s"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Create Employee</title>
<script>
    function home() {
        window.location.href = "/EmployeeWebSpring/search/searchspring";

    }
</script>
</head>

<body background="../images/flower.jpg">

    <table width="1254" height="74" border="0" align="center">

        <tr>

            <td width="20" height="68" align="center" bgcolor="#FFFFFF"><img
                src="../images/Header.png" width="1300" height="92" /></td>
        </tr>
    </table>
    <p>
        <br />
    </p>
    <hr size="1" width="1254">
    <h1 align="center">
        <font color="FFA54F">Employee Form</font>
    </h1>
    <form:form id="form" method="post"
        action="/EmployeeWebSpring/employee/createEmployee"
        commandName="employeeBO">
        <table align="center" class="table">
            <tr>
                <form:hidden path="updateStatus" value="A" />
            </tr>
            <tr>
                <td>EmployeeNumber:</td>

                <td><form:input path="employeeNumber" /><font color="red"><form:errors
                            path="employeeNumber" /></font></td>
            </tr>
            <tr>
                <td>First_Name:</td>

                <td><form:input path="firstName" /><font color="red"><form:errors
                            path="firstName" /></font></td>
            </tr>

            <tr>
                <td>Last_Name:</td>

                <td><form:input path="lastName" /><font color="red"><form:errors
                            path="lastName" /></font></td>
            </tr>
            <tr>
                <td>Title:</td>

                <td><form:input path="title" /><font color="red"><form:errors
                            path="title" /></font></td>
            </tr>
            <tr>
                <td>Department_Id:</td>

                <td><form:input path="departmentId" /></td>
            </tr>
            <tr>
                <td>Address1:</td>

                <td><form:input path="address1" /></td>
            </tr>
            <tr>
                <td>Address2:</td>

                <td><form:input path="address2" /></td>
            </tr>
            <tr>
                <td>City:</td>

                <td><form:input path="city" /><font color="red"><form:errors
                            path="city" /></font></td>
            </tr>

            <tr>
                <td>State:</td>

                <td><form:input path="state" /><font color="red"><form:errors
                            path="state" /></font></td>
            </tr>
            <tr>

                <td>Pincode:</td>

                <td><form:input path="pincode" /><font color="red"><form:errors
                            path="pincode" /></font></td>
            </tr>
            <tr>
                <td>Telephone_Number:</td>

                <td><form:input path="telephoneNumber" /><font color="red"><form:errors
                            path="telephoneNumber" /></font></td>
            </tr>

            <tr>
                <td>Mobile_Number:</td>

                <td><form:input path="mobileNumber" /><font color="red"><form:errors
                            path="mobileNumber" /></font></td>
            </tr>
            <tr>
                <td>Date_Of_Birth:</td>

                <td><form:input path="dateOfBirth" /><font color="red"><form:errors
                            path="dateOfBirth" /></font></td>
            </tr>
            <tr>
                <td>Date_Of_Anniversary:</td>

                <td><form:input path="dateOfAnniversary" /><font color="red"><form:errors
                            path="dateOfAnniversary" /></font></td>
            </tr>

            <tr>
                <td>Date_Of_Joining:</td>

                <td><form:input path="dateOfJoining" /><font color="red"><form:errors
                            path="dateOfJoining" /></font></td>
            </tr>
            <tr>
                <td>Date_Of_Leaving:</td>

                <td><form:input path="dateOfLeaving" /><font color="red"><form:errors
                            path="dateOfLeaving" /></font></td>
            </tr>
            <tr>
                <td>Reason_For_Leaving:</td>

                <td><form:input path="reasonForLeaving" /></td>
            </tr>
        </table>

        <br>
        <br />
        <p>&nbsp;</p>
        <br>

        <table align="center">
            <tr>
                <td><input type="submit" name="method" value="Save" /></td>
                <td><input type="button" value="Cancel" onclick="home()" /></td>
            </tr>
        </table>
        <hr size="1" width="786">
        <p>&nbsp;</p>
    </form:form>
</body>
</html> 
```

![在此处输入图像描述](../Images/f0b0927cd6442bd6cb6ced91b85df26b.png)

![在此处输入图像描述](../Images/53a1a15910effe9511655b7ea8b20645.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:26:51.093

我认为问题出在您没有初始化控制器中的转换器这一事实。

您需要添加的第一件事是`InitBinder`在您的控制器中：

```
@InitBinder public void initBinder(WebDataBinder binder) {
 SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");  //Select the format you want
 dateFormat.setLenient(false); 
 binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, false));
} 
```

根据您要执行的操作，您将需要不同的 CustomEditor：

```
 binder.registerCustomEditor(String.class, new StringTrimmerEditor(true)); //Trim strings
 binder.registerCustomEditor(byte[].class, new ByteArrayMultipartFileEditor()); //to handle file upload 
```

您还可以`EmployeeBO`根据要使用的类型添加以下注释：

```
@Temporal(TemporalType.TIMESTAMP) 
@DateTimeFormat(style = "S-")  //format: 'S' for short style, 'M' for medium, 'L' for long, and 'F' for full. A date or time may be ommitted by specifying a style character '-'.
private Date dateOfBirth;

@NumberFormat(style=Style.NUMBER)
private Long employeeNumberamount; 
```

# google-drive-api - Google 云端硬盘品牌政策

> ID：14521402
> 
> 赞同：0
> 
> 时间：2013-01-25T11:59:47.483
> 
> 标签：google-drive-api

这个问题与编程或软件开发没有直接关系，但由于这是官方的 Google Drive SDK 支持平台，所以我将它放在 SO 上。

我是一个 Android 应用程序的发布者，该应用程序以通常的 Free/Pro 格式（其中 Pro 版本提供比 Free 版本更多的功能）分发。

目前我正计划将该应用程序与 Google Drive 集成，但仅限于专业版。免费版仍将显示按钮和 Google Drive 品牌，但当用户尝试交互时，它将显示一条消息，指出该功能仅在 Pro 版中可用，并带有指向 Pro 应用程序版本的相应链接。

现在问题本身：免费应用程序版本是否合法（或允许）显示 Google Drive 品牌，因为它只是广告而不是实际上集成？如果不是，我应该如何宣传专业版中包含的 Google Drive 集成（来自免费版）？在这一点上，花哨的 Google Drive 品牌对于吸引用户注意力至关重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:04:44.133

据我所知，如果使用谷歌资源/访问权限开发应用程序是免费的，则不会有任何版权问题，只是该应用程序将具有专业版提供的额外功能，可以与谷歌驱动器一起使用。从用户的角度来看，我只想说，这看起来像是通过向人们收取额外费用而将钱从人们身上拖走

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:46:01.243

这是合法的，但请务必查看[品牌指南](https://developers.google.com/drive/branding)和[服务条款](https://developers.google.com/drive/terms)。

# c# - 在 C# 中将长值转换为日期时间

> ID：14521405
> 
> 赞同：-1
> 
> 时间：2013-01-25T12:00:04.370
> 
> 标签：c#, datetime

我正在使用格式化函数来格式化日期，大多数值都以 DateTime 格式出现，这些值被发送到这个函数进行格式化，但有时我会得到像`40544`长值数据这样的值，因此我得到 DateTime 异常，所以我想将其转换为数据时间。当我将其粘贴到 Excel 中并将其格式化为日期时，它给了我。我怎样`1/1/2011`才能在 C# 中得到相同的结果。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T12:02:48.350

我想您可能正在寻找，[`DateTime.FromOADate()`](http://msdn.microsoft.com/en-GB/library/system.datetime.fromoadate.aspx)但很难说，因为您的问题有点含糊。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T12:03:27.337

这是自 1900 年 1 月 1 日以来的天数。

因此，只需尝试以下操作：

```
var number = 40544;
var date = new DateTime(1900, 1, 1).AddDays(number); 
```

# c# - vbPixel 位置到真实像素位置

> ID：14521406
> 
> 赞同：0
> 
> 时间：2013-01-25T12:00:12.930
> 
> 标签：c#, graphics, vb6, bitmap

我正在将从 vb6 应用程序导出的数据导入到用 c#.net 制作的新应用程序中。数据中的像素坐标以 vbPixels 为单位。有没有办法将它们转换为真实的像素坐标？位图为 800x500，像素为 x=2265 y=1620。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:51:03.933

使用[.NET 中的这些函数](http://msdn.microsoft.com/en-us/library/9a59w6f5.aspx)：

ToPixelsX - 用于坐标转换。

ToPixelsY - 用于坐标转换。

并[阅读此](http://msdn.microsoft.com/en-us/library/dy2xdatz.aspx)内容以了解发生了什么。缇有一个非常特殊的定义，它取决于分辨率。

在我之前的回答中，我假设您知道给定坐标是图像的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:07:13.060

在 VB6 中你可以使用

```
Screen.TwipsPerPixelx 
```

和

```
Screen.TwipsPerPixelY 
```

这些几乎总是 15，但用户可以更改一些可能导致其他值的设置（虽然我不确定哪些设置:)）

# javascript - Javascript设置桌面壁纸

> ID：14521407
> 
> 赞同：2
> 
> 时间：2013-01-25T12:00:17.287
> 
> 标签：javascript, html, desktop, wallpaper

点击后我需要制作一个按钮或链接将图片设置为桌面壁纸。这可以用 JavaScript 实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T12:02:17.153

在 JS 中不可能，您无法访问文件系统或任何系统首选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:02:38.123

这是不可能的。如果你可以通过 JavaScript 进行这样的系统附近操作，那将是非常危险的。

# .htaccess - 将网站导入 xampp：htaccess 更改

> ID：14521410
> 
> 赞同：2
> 
> 时间：2013-01-25T12:00:27.947
> 
> 标签：.htaccess, joomla, xampp

例如，我有一个正在运行的 Joomla 网站，它也使用 .htaccess 来生成对 SEO 友好的 URL。由于升级，我想在第一步将网站导入 xampp。这适用于欢迎页面。但是，如果我从菜单中选择一个链接，我总是会收到“找不到对象”错误。这是由于 .htaccess 文件。我必须以某种方式将其从 www.mypage.com 调整为 localhost/mypage。

这是常规网站的 .htaccess 的样子：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www\.mypage\.de$
RewriteRule ^(.*)$ http://www.mypage.de/$1 [L,R=301]

########## Begin - Rewrite rules to block out some common exploits
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule ^(.*)$ index.php [F,L]

#  Uncomment following line if your webserver's URL
#  is not directly related to physical file paths.
#  Update Your Joomla! Directory (just / for root)

RewriteBase /

########## Begin - Joomla! core SEF Section
#
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
#
########## End - Joomla! core SEF Section 
```

现在我必须改变它，以便它适用于 localhost/mypage 而不是 www.mypage.de。我对 .htaccess 不熟悉，所以如果有人能说出错误来自哪里以及必须在此处进行哪些更改，那就太好了。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:52:35.183

我发现了它是如何工作的：

```
RewriteEngine on

########## Begin - Rewrite rules to block out some common exploits
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule ^(.*)$ index.php [F,L]

#  Uncomment following line if your webserver's URL
#  is not directly related to physical file paths.
#  Update Your Joomla! Directory (just / for root)

RewriteBase /mypage

########## Begin - Joomla! core SEF Section
#
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
#
########## End - Joomla! core SEF Section 
```

关键是将 RewriteBase 更改为 /mypage。

除此之外，我删除了这部分：

```
RewriteCond %{HTTP_HOST} !^www\.mypage\.de$
RewriteRule ^(.*)$ http://www.mypage.de/$1 [L,R=301] 
```

因为它仅适用于网络上的生产性网站。

# ruby - 如何在 ruby 的 selenium web 驱动程序中获取测试用例名称？

> ID：14521411
> 
> 赞同：0
> 
> 时间：2013-01-25T12:00:29.393
> 
> 标签：ruby, selenium, selenium-webdriver

我是 Selenium 的新手，我有这个疑问。说我有这样的代码

```
it "test_name" do 
   #test code enter code here 
end 
```

有什么方法可以获取“test_name”，或者可以将它存储在一个字符串中并在它之前使用它。提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:22:40.557

运行测试时，传递命令行参数`-v`。V 代表`verbose`。

所以例如

```
ruby test.rb -v 
```

# jquery - 如何在 X 秒内禁用 keydown/keyup/keypress 功能？

> ID：14521413
> 
> 赞同：1
> 
> 时间：2013-01-25T12:00:44.213
> 
> 标签：jquery, keypress, keydown, keyup

我想在几秒钟内禁用`.keydown()`, `.keyup()`,之类的功能。`.keypress()`

我可以使用哪个 jQuery 函数？

```
$(window).keydown(function(e) {
 if(e.keyCode==32) {
     $("code").append(".");
 }
});

setTimeout(function(){
        // ?????
},3000); 
```

**游乐场：http:** [//jsfiddle.net/jpGm8/](http://jsfiddle.net/jpGm8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:05:50.763

命名事件，使用绑定它并使用`.on()`删除它`.off()`。

```
$(window).on( 'keydown.my', function(e) {
    if(e.keyCode==32) {
        $("code").append(".");
    }
});

setTimeout(function(){
    $( window ).off( 'keydown.my' );
}, 3000); 
```

演示：http: [//jsfiddle.net/jpGm8/2/](http://jsfiddle.net/jpGm8/2/)

# python - Python - 编译后的两个进程？

> ID：14521414
> 
> 赞同：2
> 
> 时间：2013-01-25T12:00:50.890
> 
> 标签：python, windows, multithreading

我目前正在编写一个小型 python 脚本，用于控制我的家用电脑（实际上只是一个爱好项目 - 没什么大不了的）。

在脚本内部，有两个线程同时运行，使用线程（可能开始使用线程），如下所示：

```
thread.start_new_thread( Function, (Args) ) 
```

它在测试脚本时按预期工作......但在使用 Pyinstaller 编译代码后有两个进程（每个线程一个 - 我认为）。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-29T17:21:05.133

如果它真的困扰你，只需从主程序中杀死加载程序。这是一种方法。

```
import os
import win32com.client

proc_name = 'MyProgram.exe'
my_pid = os.getpid()

wmi = win32com.client.GetObject('winmgmts:')
all_procs = wmi.InstancesOf('Win32_Process')

for proc in all_procs:
   if proc.Properties_("Name").Value == proc_name:
        proc_pid = proc.Properties_("ProcessID").Value
        if proc_pid != my_pid:
            print "killed my loader %s\n" % (proc_pid)
            os.kill(proc_pid, 9) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T12:32:32.710

Python 代码不需要“用 pyinstaller 编译”

像“Pyinstaller”或“py2exe”这样的产品对于创建一个可以分发给第三方的可执行文件很有用，或者在你的计算机中重新定位而不用担心 Python 的安装——但是，它们不会增加“速度”，生成的二进制文件也不会文件比原始 .py（或 Windows 上的 .pyw）文件更“完成”。

这些产品所做的是创建 Python itnrepreter 的另一个副本，与您的 porgram 使用的所有模块对齐，并将它们打包到一个文件中。Pyinstaller 可能会继续运行第二个进程来检查主脚本上的内容（比如启动它，也许它上面有保持脚本运行的选项等等）。这不是标准 Python 程序的一部分。

Pyinstaller 不太可能将线程拆分为 2 个单独的进程，因为这会导致兼容性问题 - 线程在同一进程上运行并且可以透明地访问相同的数据结构。

“规范” Python 程序如何运行：操作系统看到的主进程是 Python 二进制文件（Windows 上的 Python.exe）——它会找到调用它的 Python 脚本——如果它有一个“.pyc”文件，即已加载 - 否则，它会加载您的“.py”文件并将其编译为 Python 字节码（而不是 Windwos 可执行文件）。这种编译对运行程序的人来说是自动和透明的。它类似于从 .java 文件到 .class 的 Java 编译 - 但程序员或用户不需要明确的步骤 - 它是就地完成的 - 其他因素控制 Python 是否将生成的字节码存储为 .pyc文件与否。

总结一下：直接运行“.py”脚本而不是使用 Pyinstaller 或其他产品生成 .exe 文件对性能没有影响。但是，如果这样做，您的磁盘空间使用会受到影响，因为您将拥有每个脚本的 Python 解释器和库的副本。

Janne Karila 在评论中指出的 URL 指出了这一点——它比我想象的还要糟糕：为了运行 yioru 脚本，pyinstaller 将 Python DLL 和模块解包到一个临时目录中。与单个脚本运行相比，执行此操作所需的时间和系统资源并非微不足道。 [http://www.pyinstaller.org/export/v2.0/project/doc/Manual.html?format=raw#how-one-file-mode-works](http://www.pyinstaller.org/export/v2.0/project/doc/Manual.html?format=raw#how-one-file-mode-works)

# sql - 存储过程中的多个插入语句一给出错误

> ID：14521416
> 
> 赞同：0
> 
> 时间：2013-01-25T12:00:55.417
> 
> 标签：sql, sql-server, sql-server-2008-r2

我问这个问题只是为了知识。我有 SQL Server 2008 R2 并且我创建了一个存储过程，其中我有五个插入语句，它们针对不同的表逐一执行。

我没有在该存储过程中放置​​任何锁或事务代码。现在如果第三个插入语句抛出错误怎么办？剩下的两条语句会被执行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:10:26.290

根据错误的类型，SQL Server 将中止语句或批处理。如果它中止语句，其他插入仍将运行。如果它中止批处理，则中止该过程并且不运行剩余的插入。

[Sommarskog 的一篇优秀文章的](http://www.sommarskog.se/error-handling-I.html#whathappens)全部细节来自 Martin Smith 的评论。

这是一个示例设置。它包含一个`TestProc`执行六次插入的存储过程。第三次插入导致外键违规，第五次插入导致转换错误。只有第二个错误会导致存储过程停止：

```
use test
GO
set nocount on
IF OBJECT_ID(N't2', N'U') IS NOT NULL
    DROP TABLE t2;
IF OBJECT_ID(N't1', N'U') IS NOT NULL
    DROP TABLE t1;
IF OBJECT_ID(N'TestProc', N'P') IS NOT NULL
    DROP procedure TestProc
GO
CREATE TABLE t1 (a INT NOT NULL PRIMARY KEY);
CREATE TABLE t2 (a INT NOT NULL REFERENCES t1(a));
GO
create procedure TestProc
as
INSERT INTO t1 VALUES (1);
INSERT INTO t1 VALUES (2);

INSERT INTO t2 VALUES (3); -- Foreign key error (statement abort)
INSERT INTO t2 VALUES (1); -- Still gets inserted
INSERT INTO t2 VALUES ('a'); -- Conversion failed (batch abort)
INSERT INTO t2 VALUES (2); -- Does *not* get inserted
go
exec TestProc
go
select * from dbo.t1
select * from dbo.t2 
```

输出：

```
Msg 547, Level 16, State 0, Procedure TestProc, Line 6
The INSERT statement conflicted with the FOREIGN KEY constraint "FK__t2__a__035179CE".
The conflict occurred in database "test", table "dbo.t1", column 'a'.
The statement has been terminated.
Msg 245, Level 16, State 1, Procedure TestProc, Line 8
Conversion failed when converting the varchar value 'a' to data type int.
a
-----------
1
2

a
-----------
1 
```

# php - 使用 wordpress 处理 ajax 请求响应

> ID：14521423
> 
> 赞同：1
> 
> 时间：2013-01-25T12:01:27.523
> 
> 标签：php, javascript, wordpress, request

我在我的 wordpress 插件中完成了一个 ajax 请求。我的请求基于以下步骤：

**1）我正在包括js文件并准备好开始请求文档**

**2）在php方面，我想接受这个请求并将其打印出来进行测试。**

对于所有这些东西，我写了这些代码：

主.js：

```
 $(function(){      
    $.post('/wp-content/plugins/dsn/functions.php',{token:"1tibu4"},function(data) {
      console.log(data);
    },"json");
 }); 
```

函数.php：

```
 <?php 

   add_action('loop_end', 'init');

   function init(){
       global $_POST;

       $post= $_POST;   
       echo json_encode($post);Exit;

   } 
```

我的问题是当请求完成时，控制台屏幕的响应选项卡上没有任何内容。这是怎么发生的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:11:05.507

WordPress 具有处理 AJAX 的独特方式。如果您直接向 php 文件发出请求，那么您不会加载 WordPress 框架的其余部分，并且您将无法使用许多 WordPress 特定功能。

在 PHP 方面，您需要做的是使用如下所示的代码：

```
//for logged in users
add_action('wp_ajax_my_action', 'my_action_callback');
//for not logged in users
add_action('wp_ajax_nopriv_my_action', 'my_action_callback');

function my_action_callback() {
  //your function here
  exit; //always call exit at the end of a WordPress ajax function
} 
```

在 JS 端，您需要将您的请求发送到一个名为“wp-admin/admin-ajax.php”的文件

所以你的请求看起来像这样（使用 jQuery）：

```
$.ajax({
    url : '/wp-admin/admin-ajax.php',
    type : 'get', //or 'post'
    data : {
                action: 'my_action_callback'
            }
})
     .fail(function(r,status,jqXHR) {
         console.log('failed');
     });
     .done(function(r,status,jqXHR) {
        console.log('success');
     }); 
```

注意 my_action_callback 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:27:05.710

确保您已将自定义脚本排入队列，如下所示。如果在自定义注入 Wordpress jQuery 脚本之前包含您的脚本，您的代码可能无法正常工作。

```
function my_scripts_method() {
    wp_enqueue_script(
        'custom-script',
        get_template_directory_uri() . '/js/main.js',
        array('jquery')
    );
}
add_action('wp_enqueue_scripts', 'my_scripts_method'); 
```

# knockout.js - 使用替换表单元素的 knockoutjs

> ID：14521428
> 
> 赞同：0
> 
> 时间：2013-01-25T12:01:41.583
> 
> 标签：knockout.js

我有一个设计已经完成的网站，我正在尝试与 Knockout.js 集成，而不是正常`<input type="checkbox">`的 UI 有一些 jQuery 代码，它用一个带有图像的复选框替换所有复选框，`<span>`以表现得像一个正常的复选框.

绑定到这个动态添加`<span>`并像普通复选框一样使用它的最佳方法是什么？

这是我拥有的代码的 jsfiddle：http: [//jsfiddle.net/Fw28P/](http://jsfiddle.net/Fw28P/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:19:34.407

将 jQuery 逻辑包装在自定义绑定中

[http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

# java - 同时迭代两个大小不同的列表

> ID：14521434
> 
> 赞同：0
> 
> 时间：2013-01-25T12:02:04.717
> 
> 标签：java

我有两个列表 X，Y。

哪些是 Strings 列表。

有可能有两个不同大小的列表。

如果两个列表的大小相同，均为 2，那么我可以像

```
 for (int i =0;  i<anyList.size(); i++){
     system.out.printLn(X(i) +" "+Y(i));
  }

example result  :

stringX1 stringY1 
stringX2 stringY2 
```

我如何处理具有不同大小的循环

示例结果应如下所示

示例结果：

```
 stringX1 stringY1 
    stringX2 stringY2
    stringX3
    stringX4 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T12:08:07.450

```
Iterator<String> x_it = x.iterator();
Iterator<String> y_it = y.iterator();
while(x_it.hasNext() && y_it.hasNext()){
   System.out.println(x.next() + " " + y.next())
}
while(x_it.hasNext()){
   System.out.println(x.next());
}

while(y_it.hasNext()){
   System.out.println(y.next());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:11:02.620

```
for (int i =0;  i<max(X.size(),Y.size()); i++){
  if(i<X.size() && i<Y.size()) {
    print(X.get(i) + " " + Y.get(i));
  } else if(i<Y.size()) {
    print(Y.get(i));
  } else {
    print(X.get(i));
  }
} 
```

编写 max(int, int) 和 print(String) 方法应该不难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:26:06.117

```
if(arr1.size()>=arr2.size())
    max  = arr1.size();
else
    max = arr2.size();

for(int i=0;i<max;i++)
{
    if(arr1.size() >= i+1)
        System.out.println(arr1.get(i));
    if(arr2.size() >= i+1)
    System.out.println(arr2.get(i));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:10:44.747

```
public static void main(String[] args) {
    List<String> l1 = new ArrayList<String>();
    l1.add("Pif");
    l1.add("Paf");
    l1.add("Pouf");
    List<String> l2 = new ArrayList<String>();
    l2.add("Argh!");
    l2.add("Aie!");

    Iterator<String> it1 = l1.iterator();
    Iterator<String> it2 = l2.iterator();

    String s1, s2;
    while (it1.hasNext() || it2.hasNext()) {
        if (it1.hasNext()) {
            s1 = it1.next();
            System.out.print(s1 + " - ");
        }
        if (it2.hasNext()) {
            s2 = it2.next();
            System.out.print(s2);
        }
        System.out.println();
    }

} 
```

产生：

```
Pif - Argh!
Paf - Aie!
Pouf - 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T12:12:11.467

```
List<String> shorter = Arrays.asList("red", "blue");
List<String> longer = Arrays.asList("one", "two", "three", "four");

int size = Math.max(shorter.size(), longer.size());

StringBuilder sb = new StringBuilder();
for (int i = 0; i < size; i++) {

  if (shorter.size() > i) {
    sb.append(shorter.get(i)).append('\t');
  } else {
    sb.append("\t\t");
  }

  if (longer.size() > i) {
    sb.append(longer.get(i));
  }

  sb.append('\n');
}

System.out.println(sb.toString()); 
```

输出

```
red   one
blue  two
      three
      four 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T12:12:59.897

```
 int size = x.size() > y.size ? x.size() : y.size();
 for (int i =0;  i< size ; i++)
 {
     System.out.printLn( ( x.size() > i + 1 ? X(i) : "") +" "+( y.size() > i + 1 ? Y(i) : "") );
  } 
```

# jquery - 如何从饼图（highchart）中的html表中获取文本？

> ID：14521436
> 
> 赞同：2
> 
> 时间：2013-01-25T12:02:06.217
> 
> 标签：jquery, html, charts, highcharts, pie-chart

我正在将数据从 html 表显示到饼图（HighChart）。我想显示`<th>..</th>`表格标签之间的文本。但不是文本 .. 它显示 slice ... slice .. slice 无处不在，无论是分区。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Pie Charts</title>
    <script src="js/jquery-migrate-1.0.0.js" type="text/javascript"></script>
    <script src="js/jquery.js" type="text/javascript"></script>
    <script>
        $(function () 
        {
            // On document ready, call visualize on the datatable.
            $(document).ready(function () 
            {
                /**
                * Visualize an HTML table using Highcharts. The top (horizontal) header
                * is used for series names, and the left (vertical) header is used
                * for category names. This function is based on jQuery.
                * @param {Object} table The reference to the HTML table to visualize
                * @param {Object} options Highcharts options
                */
                Highcharts.visualize = function (table, options) 
                {
                    // the categories
                    options.xAxis.categories = [];
                    $('tbody th', table).each(function (i) 
                    {
                        options.xAxis.categories.push(this.innerHTML);
                    });

                    // the data series
                    options.series = [];
                    $('tr', table).each(function (i) 
                    {
                        var tr = this;
                        $('th, td', tr).each(function (j) 
                        {
                            if (j > 0) { // skip first column
                                if (i == 0) 
                                { // get the name and init the series
                                    options.series[j - 1] = 
                                    {
                                        name: this.innerHTML,
                                        data: []
                                    };
                                }
                                else 
                                { // add values
                                    options.series[j - 1].data.push(parseFloat(this.innerHTML));
                                }
                            }
                        });
                    });

                    var chart = new Highcharts.Chart(options);
                }

                var table = document.getElementById('datatable'),
        options = {
            chart: {
                renderTo: 'container',
                type: 'pie'
            },
            title: {
                text: 'Data extracted from a HTML table in the page'
            },
            xAxis: {
        },
        yAxis: {
            title: {
                text: 'Units'
            }
        },
        tooltip: 
       {
            formatter: function() 
           {
               return '<b>'+ this.series.name +'</b><br/>'+
                  this.y +' '+ this.point.name;
            }
       },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function () {
                        return '<b>' + this.point.name + '</b>: ' + this.percentage + ' %';
                    }
                }
            }
        }
    };

                Highcharts.visualize(table, options);
            });

        });

    </script>
</head>
<body>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

<table id="datatable" border=1>
    <thead>
        <tr>
            <th>Fruits</th>
            <th>Qty</th>

        </tr>
    </thead>
    <tbody>
        <tr>
            <th>Apples</th>
            <td>3</td>

        </tr>
        <tr>
            <th>Pears</th>
            <td>2</td>

        </tr>
        <tr>
            <th>Plums</th>
            <td>5</td>

        </tr>
        <tr>
            <th>Bananas</th>
            <td>1</td>

        </tr>
        <tr>
            <th>Oranges</th>
            <td>2</td>

        </tr>
    </tbody>
</table>
</body>
</html> 
```

![在此处输入图像描述](../Images/bed99d7c0e4d4b10478cd5e298006f6b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T13:01:45.493

您不应通过 xAxis 的类别字段给出切片名称。切片名称应包含在数据对象中。试试这个：

```
sliceNames = [];
$('tbody th', table).each(function (i) 
{
    sliceNames.push(this.innerHTML);
});

options.series[j - 1].data.push({name: sliceNames[i - 1], y: parseFloat(this.innerHTML)}); 
```

您根本不需要类别对象，只需将切片名称填充到任何数组变量中并在推送数据时使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T21:07:16.523

我对 HighChart 还是很陌生，但你不能用这样的东西来格式化你的工具提示或 dataLabel 的输出......

```
this.series.name = this.series.chart.options.xAxis[0]
                       .categories[this.series.processedYData.indexOf(this.y)]; 
```

# java - 两次扩展 Java 类

> ID：14521437
> 
> 赞同：0
> 
> 时间：2013-01-25T12:02:07.590
> 
> 标签：java, class, extend

> **可能重复：**
> [Java 中多重继承的替代方案 Java 中的](https://stackoverflow.com/questions/1038314/alternative-of-multiple-inheritance-in-java)
> [多重继承？](https://stackoverflow.com/questions/7230661/multiple-inheritance-in-java)

我有这样的代码：

```
public class myApplet extends JApplet 
```

我有兴趣像这样添加另一个扩展：

```
public class myApplet extends JApplet, extends Object implements Serializable 
```

这可以通过某种方式完成吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:08:24.693

您不能在 Java 中扩展多个类。但是您可以实现多个接口。

但是，如果您的父母是另一个父母的孩子，那么您当然也扩展了层次结构中的所有类。

如果您不添加扩展语句，则会自动选择 Object 作为父级。Object 是超父级，在每个层次结构中您都会找到它。因此，在您的情况下，您可以跳过“扩展对象”，因为 hiracy 如下：

```
java.lang.Object
  extended by java.awt.Component
      extended by java.awt.Container
          extended by java.awt.Panel
              extended by java.applet.Applet
                  extended by javax.swing.JApplet
                      extended by your.package.myApplet 
```

（见[http://docs.oracle.com/javase/6/docs/api/javax/swing/JApplet.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JApplet.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:03:34.723

Java没有多重继承，任何类都可以扩展`Object`，所以在这种情况下它是没用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:03:55.690

Java没有多重继承，但你可以实现多个接口。

```
public class myApplet extends JApplet implements Serializable, SomeThingElse 
```

您不需要扩展`Object`，因为所有类都会扩展它。

如果您处于两个类中的方法想要在一个类中共享的情况，请考虑定义使用这两个类的第三个类，前提是函数集具有内**聚性**并执行不同的操作。不要试图组合类来获得他们的权力。创建单独的类来解决不同的问题，并将这些问题的实例存储在更高阶的类中。

如果您确实有两个执行相似功能的类，则可以将它们的公共代码抽象为超类。因此，A 类将扩展 B 类，而您将依次扩展 C 类并在那里添加更多细节。

如果您有两个结构非常相似但操作不同数据结构或算法的类，那么您可能会考虑创建一个它们都实现的接口。一个很好的例子是具有`drive()`方法的 Vehicle 接口。A将具有与 a不同`Car`的实现。`drive()``Motorbike`

为了扩展最后一个想法，如果这些类将共享公共代码并且可以说“A Car **is** a Vehicle”和“A Motorbike **is** a Vehicle”，那么很可能使用继承优于接口，`Car`并且`Motorbike`两者都扩展车辆及其抽象功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:03:58.947

不，Java 不支持多重继承。但是，每个类都自动继承自 Object 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T12:12:33.373

Java不支持多重继承，你可以使用多个接口

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T12:03:51.370

你不能在 java 中扩展类两次......不过，java 中的每个类都立即从类 Object 继承，所以你不必用 Object 类扩展你的类；）

# php - where子句中的多个参数

> ID：14521447
> 
> 赞同：3
> 
> 时间：2013-01-25T12:02:48.463
> 
> 标签：php, sql, propel

我需要为 where 子句附加多个参数。有什么方法可以使用 Propel 来实现。它给了我，

> Criteria:(错误：无法为表达式“LATITUDE”构建 SQL，因为 Criteria::RAW 仅适用于包含单个问号占位符的子句）

这是我的查询。

```
$userArray = UserQuery::create()
  ->where('( 3959 * acos( cos( radians(?) )
    * cos( radians( User.latitude ) )
    * cos( radians( User.longitude ) - radians(?) )
    + sin( radians(?) )
    * sin( radians( User.latitude) ) ) ) > 10', 
    $user->getLatitude(),
    $user->getLongitude(),
    $user->getLatitude()
  )->find(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:37:13.347

您是否尝试将数组作为第一个参数传递给 where 方法？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:37:03.280

对于任何提到这个的人。我能够使用以下代码实现这一目标。

```
$userArray = UserQuery::create()->where('( 3959 * acos( cos( radians(?) )
                                          * cos( radians( User.latitude ) )
                                          * cos( radians( User.longitude ) - radians(?) )
                                          + sin( radians(?) )
                                          * sin( radians( User.latitude) ) ) ) < 10000', 
                                          array($user->getLatitude(),
                                          $user->getLongitude(),
                                          $user->getLatitude()))->find(); 
```

# cocos2d-iphone - cocos2d 和 glReadPixels 不起作用？

> ID：14521449
> 
> 赞同：0
> 
> 时间：2013-01-25T12:02:48.543
> 
> 标签：cocos2d-iphone

我对 cocos2d 和 glReadPixels 有疑问，因为它们不能正常工作。我在网上找到了像素完美碰撞的代码，并为我的应用程序进行了修改，但动画或更快速的动画不起作用。

这是代码：

`-(BOOL) isCollisionBetweenSpriteA:(CCSprite*)spr1 spriteB:(CCSprite*)spr2 pixelPerfect:(BOOL)pp { BOOL isCollision = NO; CGRect intersection = CGRectIntersection([spr1 boundingBox], [spr2 boundingBox]);`

 ````
// Look for simple bounding box collision
if (!CGRectIsEmpty(intersection))
{
    // If we're not checking for pixel perfect collisions, return true
    if (!pp) {return YES;}

    // Get intersection info
    unsigned int x = intersection.origin.x;
    unsigned int y = intersection.origin.y;
    unsigned int w = intersection.size.width;
    unsigned int h = intersection.size.height;
    unsigned int numPixels = w * h;
    //NSLog(@"\nintersection = (%u,%u,%u,%u), area = %u",x,y,w,h,numPixels);

    // Draw into the RenderTexture
    [_rt beginWithClear:0 g:0 b:0 a:0];

    // Render both sprites: first one in RED and second one in GREEN
    glColorMask(1, 0, 0, 1);
    [spr1 visit];
    glColorMask(0, 1, 0, 1);
    [spr2 visit];
    glColorMask(1, 1, 1, 1);

    // Get color values of intersection area

    ccColor4B *buffer = malloc( sizeof(ccColor4B) * numPixels );
    glReadPixels(x, y, w, h, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

    /******* All this is for testing purposes *********/

    // Draw the intersection rectangle in BLUE (testing purposes)

    /**************************************************/

    [_rt end];

    // Read buffer
    unsigned int step = 1;
    for(unsigned int q=0; q<1; q+=step)
    {
        ccColor4B color = buffer[q];

        if (color.r > 0 && color.g > 0)
        {
            isCollision = YES;
            break;
        }
    }

    // Free buffer memory
    free(buffer);
}

return isCollision; 
```` 

`}`

问题出在哪里？我试过了，但没有。

非常感谢。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:15:56.263

如果您使用的是 iOS6，请查看[此帖子](https://stackoverflow.com/questions/12528365/why-is-glreadpixels-failing-in-this-code-in-ios-6-0)以获取解决方案：

```
CAEAGLLayer *eaglLayer = (CAEAGLLayer *) self.layer;
eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithBool:YES],
                                    kEAGLDrawablePropertyRetainedBacking,
                                    kEAGLColorFormatRGBA8,        kEAGLDrawablePropertyColorFormat,
                                    nil]; 
```

解释是 iOS6 修复了 iOS Open GL 实现中的一些错误，以便 GL 缓冲区在每次呈现到屏幕时都（正确地）清除。[这是苹果公司写的](http://developer.apple.com/library/ios/#qa/qa1704/_index.html)：

> 重要提示：除非您使用保留的后台缓冲区，否则您必须在调用 EAGLContext/-presentRenderbuffer: 之前调用 glReadPixels：以获得定义的结果。

`glReadPixels`正确的解决方案是在渲染缓冲区呈现到屏幕之前调用。之后，它就失效了。

上面的解决方案只是使图像具有“粘性”的一种解决方法。

请注意，它可能会影响您的应用程序渲染性能。`glReadPixels`关键是如果你使用 cocos2d，在渲染缓冲区出现之前你不能轻易调用。

希望能帮助到你。

# java - 如何使用 maven 启动/停止 hsqldb？

> ID：14521452
> 
> 赞同：4
> 
> 时间：2013-01-25T12:03:02.287
> 
> 标签：java, maven, hsqldb

我正在尝试使用 maven 启动和停止 hsqldb。我想在测试阶段之前使用特定配置（数据库）启动 hsqldb 服务器，然后在应用程序启动之前和之后停止它，并与其他配置相同。

目前我使用 maven exec 插件启动 hsqldb，但问题是服务器启动阻止了完整的 maven 构建过程（点击**`CTRL`+`C`**停止服务器。）也没有自动停止服务器的解决方案。

最好的祝福

赫默罗克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-10T17:21:57.373

检查我的 hsqldb maven 插件： [https ://github.com/avianey/hsqldb-maven-plugin](https://github.com/avianey/hsqldb-maven-plugin)

您可以像 jetty-maven-plugin 或 tomee-maven-plugin 一样启动/停止它：

```
<plugin>

    <!-- current version -->
    <groupId>fr.avianey.mojo</groupId>
    <artifactId>hsqldb-maven-plugin</artifactId>
    <version>1.0.0</version>

    <!-- 
        default value for in memory jdbc:hsqldb:hsql://localhost/xdb
        override only values you want to change
    -->
    <configuration>
        <driver>org.hsqldb.jdbcDriver</driver>
        <path>mem:test</path>
        <address>localhost</address>
        <name>xdb</name>
        <username>sa</username>
        <password></password>
        <validationQuery>SELECT 1 FROM INFORMATION_SCHEMA.SYSTEM_USERS</validationQuery>
    </configuration>

    <!-- call start and stop -->
    <executions>
        <execution>
            <id>start-hsqldb</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>start</goal>
            </goals>
        </execution>
        <execution>
            <id>stop-hsqldb</id>
            <phase>post-integration-test</phase>
            <goals>
                <goal>stop</goal>
            </goals>
        </execution>
    </executions>

</plugin> 
```

# java - 骆驼过滤器方法签名

> ID：14521453
> 
> 赞同：4
> 
> 时间：2013-01-25T12:03:04.307
> 
> 标签：java, apache-camel, esb, middleware

我有一个`Order`POJO，在我的骆驼路线上，我想`Order`通过一个过滤器传递每个实例（消息），如下所示：

```
ExpensiveOrderFilter eof = new ExpensiveOrderFilter();

from("direct:whatever")
    .filter().method(eof)
    .to("direct:wherever"); 
```

过滤器应该只`Order`在它们`Order#getPrice()`超过 100.00 美元时才允许。

```
public class ExpensiveOrderFilter {
    public void filterCheapOrders(Order order) {
        if(order.getPrice() < 100.00)
            ???
        else
            ???
    }
} 
```

该`filterCheapOrders`方法需要是什么样子才能正确过滤掉“便宜”（< 100 美元）订单，防止它们被路由到`direct:wherever`？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T14:29:15.203

这有两个部分。第一个是`method(..)`一种称为谓词的 Camel[表达式。](https://camel.apache.org/expression)您将调用的任何实际方法都需要返回一个布尔值，因此：

```
public class ExpensiveOrderFilter {
    public boolean isCheapOrder(Order order) {
        return order.getPrice() < 100.00;
    }
} 
```

Order 参数将通过称为[bean binding](https://camel.apache.org/bean-binding.html)的 Camel 机制以最佳尝试方式注入，该机制将尝试将消息的主体转换为 Order。如果失败，路由会抛出异常。

`method(..)`您命名要在块内的 bean 上调用的方法：

```
.filter().method(eof, "isCheapOrder") 
```

只有便宜的订单才会继续。对于简单的表达式，您还可以考虑内置于 Camel的[简单表达式语言，并跳过编写您的 bean：](https://camel.apache.org/simple.html)

```
.filter().simple("${body.price} < 100") 
```

# json - 如何使用 JSON4S 有条件地生成 JSON

> ID：14521459
> 
> 赞同：2
> 
> 时间：2013-01-25T12:03:23.293
> 
> 标签：json, scala, lift-json

我正在使用 JSON4S 来生成一些 JSON。

如果满足条件，我想生成以下内容：

```
{"fld1":"always", "fld2":"sometimes"} 
```

如果条件不满足，我想产生：

```
{"fld1":"always"} 
```

到目前为止，我尝试过的是：

```
val fld1 = "fld1" -> "always"

val json = if(condition) ("fld2" -> "sometimes") ~ fld1 else fld1

compact(render(json)) 
```

但是，这给了我`render`“找到：具有可序列化的产品。必需：org.json4s.package.JValue”中的类型不匹配。

有趣的是，这是`render(("fld2" -> "sometimes") ~ fld1)`有效的，也是如此`render(fld1)`。问题似乎与推断的类型有关`json`。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T13:35:31.693

虽然当前的两个答案都提供了合适的解决方法，但都没有解释这里发生了什么。问题是，如果我们有两种类型，像这样：

```
trait Foo
trait Bar 
```

以及从一个到另一个的隐式转换（或*view ）：*

```
implicit def foo2bar(foo: Foo): Bar = new Bar {} 
```

带有`Foo`for its`then`子句和 a `Bar`for its子句的条件仍将被键入为and`else`的最小上限（在这种情况下，在您的情况下）。`Foo``Bar``Object``Product with Serializable`

这是因为类型推断系统不会介入并说，好吧，我们可以将其`Foo`视为 a `Bar`，所以我只需将整个内容输入为 a `Bar`。

如果您考虑一下，这是有道理的——例如，如果它愿意处理这样的条件，那么如果我们有两种方式的隐式转换，它会做什么？

在您的情况下，`then`子句的类型为 a `JObject`，`else`子句为 a `(String, String)`。我们有从后者到前者的观点，但是除非您`JObject`通过显式声明类型或通过在它必须是一个`JObject`.

考虑到所有这些，最简单的解决方法可能就是确保从一开始就正确键入两个子句，方法是提供如下类型注释`fld1`：

```
val fld1: JObject = "fld1" -> "always" 
```

现在，您的条件将按原样正确键入，而无需类型注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:14:25.843

不是我能想到的最好的方式，但自己声明类型应该可以工作：

```
val json: JObject = 
  if(condition) ("fld2" -> "sometimes") ~ fld1 else fld1

compact(render(json)) 
```

另外，请注意，您可以获得类型推断来帮助自己：如果您可以一次性渲染：

```
compact(render(
  if(condition) fld1 ~ ("fld2" -> "sometimes") else fld1  
)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T12:42:42.067

另一种方法是将条件值装箱到选项中。

```
val json = fld1 ~ ("fld2" -> (if (condition) Some("sometimes") else None))

compact(render(json)) 
```

# performance - 在 Visual Studio 2012 中记录下载

> ID：14521461
> 
> 赞同：0
> 
> 时间：2013-01-25T12:03:26.873
> 
> 标签：performance, testing, visual-studio-2012, recording

我将对此非常直截了当：

通过在记录测试之前将上传的文件部署到项目中，我设法在 Visual Studio 2012 中记录了文件上传测试。

现在的问题是，我如何为我要下载的文件执行此操作？

# android - 使用不同的 android API 编译不同的 android 模块

> ID：14521463
> 
> 赞同：1
> 
> 时间：2013-01-25T12:03:29.443
> 
> 标签：android, intellij-idea

我有两个模块：我的应用程序模块，我想使用**Android 2.3 平台**编译，以及 ActionBarSherlock 库模块，它必须使用**Android 4.0 平台**编译。当我以这种方式设置项目结构并运行应用程序（并且 ActionBarSherlock 设置为我的模块的依赖项）时 - IDEA 尝试使用 2.3 API 编译所有内容，并显示如下错误：

> android-apt-compiler: action-bar-sherlock\res\values-v14\abs__themes.xml:32: error: Error retrieving parent for item: No resource found that match the given name 'android:Theme.Holo.Light.Dialog '

如何正确设置 IDEA？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:07:48.333

您可以使用 4.0 库编译所有内容，但使用以下清单声明支持 2.3：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" /> 
```

在示例中，17 是当前最新的 API 版本，但您可以使用 15 或任何您需要的版本。

# jquery - jQuery Isotope 与每个过滤器的文本

> ID：14521465
> 
> 赞同：0
> 
> 时间：2013-01-25T12:03:35.180
> 
> 标签：jquery, filtering, jquery-isotope

我正在使用带有过滤方法的 jQuery Isotope：http: [//isotope.metafizzy.co/demos/filtering.html](http://isotope.metafizzy.co/demos/filtering.html)

当您单击过滤器时，我想添加一个附加功能：显示的 ap 文本，每个过滤器都不同。

目前，我只能调出相同的文本。我想知道如何为每个类别创建一个不同的类别，仅当您单击过滤器时才会显示，这是我的 jsFiddle：http: [//jsfiddle.net/itzuki87/Xy5pZ/](http://jsfiddle.net/itzuki87/Xy5pZ/)

```
var $container = $('#container');
$container.isotope({
});

$('#filters a').click(function(){
 var selector = $(this).attr('data-filter');
  $(".text_category").slideUp(500);
  $(".text_category").slideDown(500);
 $container.isotope({ filter: selector });
return false;
}); 
```

谁能帮我？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:13:13.313

您可以使用在 p 的数据过滤器中添加的类，例如

```
<li><a href="#" data-filter="*">show all</a></li>
<li><a href="#" data-filter=".metal">metal</a></li>
<li><a href="#" data-filter=".transition">transition</a></li> 
```

和段落

```
<p class="text_category hide" data-category="*">
Donec auctor faucibus libero ...
</p>
<p class="text_category hide" data-category=".metal">
metal para
</p>
<p class="text_category hide" data-category=".transition">
transition para content here
</p> 
```

和js

```
$('#filters a').click(function(){
  var selector = $(this).attr('data-filter');
    alert(selector);
    $(".text_category").hide();  //hide all p's
    $("p[data-category='"+selector+"']").slideUp(500); //show respective
    $("p[data-category='"+selector+"']").slideDown(500);
    $container.isotope({ filter: selector });
    return false;
}); 
```

演示：[更新的小提琴](http://jsfiddle.net/Xy5pZ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:11:05.787

您可以使用 if 语句检查选择器，然后使用 ajax 脚本更改文本，该脚本替换包含文本的 div 的 html，或者实际打印每个 div 并通过 jQuery 隐藏/显示它们。

# sql-server - 在 T-SQL 中，多个 INNER JOIN 的最佳设计是什么？

> ID：14521466
> 
> 赞同：1
> 
> 时间：2013-01-25T12:03:35.800
> 
> 标签：sql-server, tsql, inner-join

我一直在寻找类似的问题，但无济于事。如果我错过了解决方案，我深表歉意，请指出正确的方向。

我一直在玩 MS AdventureWorks，想知道使用我创建的 INNER JOIN 的两个 SELECT 语句之间是否存在任何功能差异。他们给出了相同的结果。

**版本 1**

```
SELECT  pp.BusinessEntityID, pp.FirstName, pp.MiddleName, pp.LastName, pp.Suffix, 
    pe.EmailAddress, 
    pa.AddressLine1, pa.AddressLine2, pa.City, pa.PostalCode FROM 
Person.BusinessEntityAddress AS bea 
INNER JOIN  Person.Address AS pa 
    ON bea.AddressID = pa.AddressID 
INNER JOIN  Person.Person AS pp 
    ON bea.BusinessEntityID = pp.BusinessEntityID   
INNER JOIN  Person.EmailAddress AS pe 
    ON pp.BusinessEntityID = pe.BusinessEntityID 
WHERE pp.Suffix IS NOT NULL 
```

* * *

**版本 2**

```
SELECT      pp.BusinessEntityID, pp.FirstName, pp.MiddleName, pp.LastName, pp.Suffix,
        pe.EmailAddress,
        pa.AddressLine1, pa.AddressLine2, pa.City, pa.PostalCode 
FROM        Person.BusinessEntityAddress AS bea 
        INNER JOIN Person.Address AS pa 
            ON bea.AddressID = pa.AddressID 
        INNER JOIN Person.Person AS pp 
            ON bea.BusinessEntityID = pp.BusinessEntityID
        INNER JOIN Person.EmailAddress AS pe 
            ON bea.BusinessEntityID = pe.BusinessEntityID 
WHERE     pp.Suffix IS NOT NULL 
```

唯一的区别在于最后一个 ON 子句。设计图看起来完全不同，但任何想法都会非常受欢迎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:06:35.923

这里没有区别，因为相等是传递的。(*)

但是，如果您在某处混合了 OUTER JOINS，结果可能会有所不同。

(*) 不过，我会看看两者的执行计划，因为查询计划器可能不够聪明，无法选择最佳选项，并且通过不同的措辞，可能会以一种或另一种方式强制执行。您也可以尝试加入多余的第三等式。虽然它们都达到相同的结果，但连接的执行顺序可能会导致执行时间截然不同。

# entity-framework - 实体框架电动工具定制

> ID：14521467
> 
> 赞同：1
> 
> 时间：2013-01-25T12:03:36.677
> 
> 标签：entity-framework

我使用 EF 电动工具进行逆向工程代码。问题是我的现有数据库有多个 scehma，但我需要对其中一个进行逆向工程。我该如何定制它

# debugging - Monodevelop，调试附加到进程的 DLL 项目，

> ID：14521471
> 
> 赞同：2
> 
> 时间：2013-01-25T12:03:54.970
> 
> 标签：debugging, dll, monodevelop

我创建了一个项目，并在输出时设置了“DLL”模式。我想调试我的dll项目，所以我做了“附加到进程”，（一开始，我找不到“附加到进程”，但是在我安装了“GUN调试器插件monodevelop”之后，我可以在RUN中找到它菜单。）

我调试了一个已经附加到进程的 DLL 项目，但它总是停`"b7799424 pop %ebp"` 在`"Disassemly+"file`.

应用程序输出显示：`"0Xb7799424in__kernel_vsyscall()"`。

我无法调试 DLL 程序。

```
 Anyone can give me some help to this trouble. 
```

黛米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:25:52.737

***在 Monodevelop IDE 中调试 DLL（或库）项目的方法：***
MonoDevelop 为您启动 exe，而不是附加到引用您的 dll 的 exe。让 MonoDevelop 为您启动 exe 的技巧是这样的：

1.  创建一个空的解决方案。
2.  将您的 .exe 项目添加到此解决方案中。
3.  继续将您的 .dll 项目添加到解决方案中。
4.  将您的 .exe 项目设置为启动项目。
5.  在 .exe 项目的调试文件中设置 dll 项目的输出路径。
6.  构建整个解决方案并从“运行”菜单中选择“调试”。

MonoDevelop 将在调试器中启动您的 exe，并且应该能够在您的 dll 项目中的断点处中断。
这个[网页](http://mono.1490590.n4.nabble.com/Debugging-mono-dll-loaded-by-Unity3d-td2291591.html)引用了这个方法。我试过这个方法，它可以工作。希望这可以帮助其他人。黛米

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:46:46.880

看起来您使用的是相当低级的 GDB 调试器，也许您应该尝试使用软或硬调试器，[说明可在 monodevelop 网站上找到](http://www.mono-project.com/Debugger)

# svn - svn 无法在文件中设置位置指针

> ID：14521473
> 
> 赞同：5
> 
> 时间：2013-01-25T12:03:55.817
> 
> 标签：svn, svnadmin, fsfs

我遇到了一个 svn 存储库的问题，该存储库到目前为止一直运行良好。

我收到错误

```
svnadmin: Can't set position pointer in file 'repository/db/revs/0/783': Invalid argument 
```

例如当我跑步时

```
svnadmin verify 
```

其他一般症状包括无法签出、更新、提交等。

非常感谢任何帮助

谢谢！彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-10-18T20:37:39.663

好的...我刚遇到这个问题并且能够解决它。我正在使用 FSFS。我的最后一个好版本是第 88 版。第 89 版被破坏了。

1.  我复制了存储库并将其命名为`repository-2018-10-18-broken`. 绝对要先做这个！！！

2.  我删除了原始存储库中的以下文件：

/repository/db/revs/0/89

/repository/db/revprops/0/89

/repository/db/transactions/89*.*

3.  使用我可信赖的文本编辑器，然后我编辑了文件`/repository/db/current`并将其更改`89`为`88`. 我离开了尾随的新行。

这就像一个魅力。我不能说它适用于其他任何人，但我不明白为什么它不会。看起来它确实有效地删除了错误的修订。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-12T14:31:03.983

当发生同样的问题时，我们能够将其追踪到一个包含错误移动文件的文件夹。

其他文件夹允许提交和更新，只有在包含该文件夹时，我们才会收到无法设置指针的消息。

**解决方案**是：

1.  从 SVN 中删除有问题的文件夹（忽略，递归）
2.  再次添加文件夹。
3.  提交文件夹。

这似乎可以解决任何问题。

通过更多的试验和错误，我想问题可以被追踪到负责的文件，但在这种情况下，我们在文件夹级别停止了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:14:54.030

我能找到的唯一解决方案是按如下方式复制我的存储库

```
svnadmin create newrepo
svnadmin dump -r 0:783 repository | svnadmin load newrepo
mv repository repository_corrupted
mv newrepo repository 
```

在此之后，通常需要在用户签出的目录中进行 svn 清理

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-10T06:24:00.687

**无法在文件中设置位置指针的最简单方法：**

我是这样做的：

1.  转到**Project**的**父目录（文件夹）**。
***   按**右键单击***   按**T​​ortoiseSVN**然后按**清理...***   清理对话框将自动出现*   选择`Clean up working copy status`, `Break locks`, `Fix time stamps`, `Vacuum pristine copies`, `Refresh shell overlays`,`Include externals`*   按**确定****

 **检查屏幕截图以供参考。

**第一步：**

[![在此处输入图像描述](../Images/35b54460a6e19871c2e9989a907fe64a.png)](https://i.stack.imgur.com/HlM52.png)

**第二步：**

[![在此处输入图像描述](../Images/5c7c55f264b366f1c5d5c83690f773e6.png)](https://i.stack.imgur.com/wT8Pi.png)

希望这会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-08T10:04:07.183

对某些文件有同样的问题。当我深入到有问题的文件夹时，修订文件 repository/db/revs/89 是一个零文件。我猜这个问题可能是由于某些硬件故障或电源中断（存储库位于 USB 驱动器上）。我修复的方法是将 88 复制到 89，然后我能够再次提交更改。**

# qt - 将填充和边距设置为 0 不起作用

> ID：14521477
> 
> 赞同：1
> 
> 时间：2013-01-25T12:03:58.810
> 
> 标签：qt, stylesheet, margin, padding, qtstylesheets

它只是一个容器，我想将小部件放入其中并隐藏它们并显示它们。我不希望它有任何边距或填充，它将是不可见的（没有边框，没有背景）

我通过样式表将 QWidget#container 设置为 margin:0px, padding:0px。并将 setObjectName("container") 设置为包含的所有小部件。

没发生什么事。但是设置背景颜色是有效的，所以它被执行了。

在哪些情况下会发生这种情况？如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:44:11.167

QWidget 不支持[box model](http://doc.qt.io/qt-5/stylesheet-customizing.html#box-model)，因此它不理解 padding/margin CSS 指令。使用 QFrame 作为容器。要查看哪些小部件支持框模型，请查看[可样式化小部件列表](http://doc.qt.io/qt-5/stylesheet-reference.html#list-of-stylable-widgets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-20T12:32:08.567

鉴于没有简洁的答案，我将总结以上内容：

要创建一个没有边距和填充的容器，而不是`QWidget`使用`QFrame`，并在其上设置布局。然后在布局上将间距设置为 0，并将内容边距设置为 0。使用样式表将 padding/margin 设置为 0 将无效。

代码：

```
 QFrame* containerFrame = new QFrame();
QVBoxLayout* layout = new QVBoxLayout;
layout->setSpacing(0);
layout->setContentsMargins(0, 0, 0, 0);
// add some widgets to the layout
containerFrame->setLayout(layout); 
```

# android - android微调器setfocus

> ID：14521479
> 
> 赞同：0
> 
> 时间：2013-01-25T12:04:00.980
> 
> 标签：android, focus, android-edittext, spinner

这个问题似乎被问了很多次，但在尝试了 20 多个不同的想法之后，我仍然有一个问题。

我有一个由（从顶部开始）7 个微调器和几个edittext 组成的膨胀对话框。微调器和编辑文本位于单独的线性布局上。

创建对话框时，焦点转到第一个编辑文本，因为它位于对话框下方，第一个微调器被滚动到视图之外。

我需要的是一种使第一个微调器聚焦或滚动到最上面的方法。

我做了什么？

那么我已经设置了： dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

停止显示软键盘（有效）

```
manufacturer = (Spinner) entryView.findViewById(R.id.myyarns_add_dialog_manufacturer_spinner);
manufacturer.setFocusable(true); 
manufacturer.setFocusableInTouchMode(true);
manufacturer.requestFocus(); 
```

这在 onPrepareDialog 或 onCreateDialog 中均无效

然后我尝试设置

```
weight = (EditText) entryView.findViewById(R.id.myyarns_add_dialog_weight); 
weight.clearFocus(); 
```

其中 weight 是获得焦点的第一个 edittext 的 id - 仍然 weight 获得焦点

然后我尝试将对话框视图滚动到顶部，但没有做任何事情

```
ScrollView scroller = (ScrollView) entryView.findViewById(R.id.myyarns_scroll);
scroller.scrollTo(0, 0); 
```

还有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:14:40.677

对于您在 xml 集中的所有 editText`android:focusable="false"`

对于您的第一个微调器组`android:focusable="true"`

或者

以编程方式将焦点设置到您需要的字段

# android - GCM 服务器 API 密钥是否过期？

> ID：14521484
> 
> 赞同：0
> 
> 时间：2013-01-25T12:04:26.107
> 
> 标签：android, notifications, google-cloud-messaging

我在 GCM 中遇到问题。最初，该应用程序运行良好，但一段时间后它停止运行。

所以我更改了我的服务器 API 密钥，然后它又开始工作了。现在，我又体验到了。我无法接收通知。

所以我想问一下，Server API key 是过期了还是有其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T05:59:13.680

Android 客户端密钥将在 7 天后过期，您可以通过调用此方法获取过期时间：

```
 long serverLifeSpan = GCMRegistrar.getRegisterOnServerLifespan(this); 
```

结果是 7 天，所以 7 天后，android 客户端必须重新注册 gcm，否则您无法收到 gcm 消息，因为之前的客户端 gcm 令牌无效。

更好的方法是在每次启动应用程序时进行注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T14:03:08.340

API 密钥永不过期，但如果您更改了它，您应该更改您的令牌以发送通知。要在应用程序中生成令牌，您需要使用 GCM 项目 ID，它链接到该 API 密钥，因此只有使用该密钥和令牌的服务器才能向该应用程序发送推送。我希望它有帮助

# c++ - 查找在给定指针类型上调用 free 的位置

> ID：14521486
> 
> 赞同：0
> 
> 时间：2013-01-25T12:04:41.013
> 
> 标签：c++, visual-c++

我正在将类型从 C 风格的结构转换为 C++ 风格的结构；我正在添加一个成员，它将强制类型需要一个构造函数，因此我必须从`malloc`and切换`free`到`new`and `delete`。我可以通过查找`sizeof(TYPE)`.

有什么方法可以找到传递该类型指针的所有实例`free`？我意识到这一点，因为它的论点并`free`不能`void*`保证我在任何地方都发现了该类型被释放。

例如，我是否可以`free`以某种方式重载，以便在任何地方`free(TYPE*)`调用编译错误，但在其他任何地方都没有？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T12:47:12.137

> 我能以某种方式免费超载吗

你当然可以试一试。例如：

```
#include <cstdlib>
#include <iterator>

namespace my {
    class TYPE { };
    template <typename T>
    void free(T *ptr) { std::iterator_traits<T>::attempt_to_free_TYPE; }
}

using std::malloc;
using std::free;
using my::TYPE;

int main() {
    TYPE *ptr = (TYPE *) malloc(sizeof(TYPE));
    free(ptr);
} 
```

感谢 ADL，该调用`free`是 to `my::free`，因此代码无法编译。显然这不会捕获`free((void*)ptr);`，因为`free`使用参数以外`my::TYPE*`的参数调用不受影响。

正如我所写，不需要对`free`内部命名空间`my`或具有`using namespace my;`. 因此，您可能希望为此目的使用新发明的命名空间。或者写一个不那么全面的模板，我即兴创作的。

它也没有捕捉到对`std::free`. 重载（或命名空间 std 中的任何内容）是未定义的行为`std::free`，但如果有必要，您可能会为了查找调用站点而侥幸逃脱。像这样的东西：

```
template <typename T>
struct allowed_to_free {
    enum { value };
};
template <>
struct allowed_to_free<TYPE> {};

namespace std {
    template <typename T>
    void free(T *ptr) {
        allowed_to_free<T>::value; 
        free((void*)ptr); 
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:08:13.703

使用 valgrind：如果您愿意在运行时进行检查，请考虑使用 valgrind 来执行此类任务。

当您错误地分配了`free`'da`new()`对象时，Valgrind 会告诉您。

由于 OP 不在 Linux 中，但在 VS 中，我猜有类似于 valgrind 的工具。

另一种选择是使用静态分析器，例如 Coverity 或 clang-analyze。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:13:06.800

您不能直接执行此操作...但是，您可以使用技巧来查找使用此类（未正确初始化）实例的所有位置。只需将您以前的结构的所有成员 - 现在是类 - 私有。无论使用这些字段/成员，编译器都会引发错误。这将为您提供进一步分析代码并消除任何 malloc/free 调用的起点。

# javascript - API 可用于将 wordpress 博客文章拉入 JQuery 移动应用程序

> ID：14521488
> 
> 赞同：2
> 
> 时间：2013-01-25T12:04:45.547
> 
> 标签：javascript, wordpress, cordova, jquery-mobile

我目前正在创建一个基于 Web 的应用程序，该应用程序将与 PhoneGap 一起用于跨各种平台分发。

我目前正在研究的功能之一是将 Wordpress 博客文章集成到一个滑块中，当点击该滑块时，该滑块将显示在一个对话框中。不幸的是，我还没有找到允许我使用 Javascript 从 Wordpress 中提取博客文章的 API 或类似的东西。

我想知道是否有其他人正在做类似的事情并会分享他们正在使用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:27:22.657

你可以使用

*   RSS ( [http://yourblog.wordpress.com/feed/](http://yourblog.wordpress.com/feed/) )
*   XML-RPC ( [http://codex.wordpress.org/XML-RPC_Support](http://codex.wordpress.org/XML-RPC_Support) )
*   JSON-RPC ( [http://austinmatzko.com/wordpress-plugins/wp-json-rpc-api/](http://austinmatzko.com/wordpress-plugins/wp-json-rpc-api/) )

我会建议 JSON-RPC 但这就是我

然后我建议阅读动态脚本页面上的 jQM 文档

v1.2.0

*   [http://jquerymobile.com/demos/1.2.0/docs/pages/page-dynamic.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-dynamic.html)
*   [http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)

v.1.3.0（测试版）

*   [http://jquerymobile.com/demos/1.3.0-beta.1/docs/pages/index.html](http://jquerymobile.com/demos/1.3.0-beta.1/docs/pages/index.html)
*   [http://jquerymobile.com/demos/1.3.0-beta.1/docs/pages/page-dynamic.html](http://jquerymobile.com/demos/1.3.0-beta.1/docs/pages/page-dynamic.html)
*   [http://jquerymobile.com/demos/1.3.0-beta.1/docs/pages/page-cache.html](http://jquerymobile.com/demos/1.3.0-beta.1/docs/pages/page-cache.html)

相关文章：

*   [从我自己的博客中获取帖子](https://stackoverflow.com/questions/6743822/get-posts-from-my-own-blog-on-wordpress-com)
*   [https://wordpress.stackexchange.com/questions/7303/how-to-get-all-posts-in-chunks-via-xml-rpc](https://wordpress.stackexchange.com/questions/7303/how-to-get-all-posts-in-chunks-via-xml-rpc)
*   [http://digwp.com/2010/05/wordpress-json-api-plugin/](http://digwp.com/2010/05/wordpress-json-api-plugin/)

# javascript - 使用 PhoneGap 将数据从 JS 发送到父级

> ID：14521489
> 
> 赞同：0
> 
> 时间：2013-01-25T12:04:54.260
> 
> 标签：javascript, android, cordova

我正在 Android 上试验 PhoneGap，并将其嵌入`CordovaWebView`到`Activity`实现`CordovaInterface`. 我想知道是否可以将一些数据从 JavaScript 发送到包含`CordovaWebView`.

在 CordovaInterface 中有一个 onMessage 方法，我认为可以在那里处理来自 JS 的消息，但我似乎无法找到有关其工作原理的文档。

在[这个问题](https://stackoverflow.com/questions/12764705/communicating-with-objective-c-from-js-in-phonegap)中，我看到创建插件可以做到这一点，但这是唯一的方法吗？是不是已经在 PhoneGap 中实现了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:55:05.897

这可能对您有帮助，也可能对您没有帮助，但如果您想查看如何实现插件的示例，我已经在[我的博客](http://thewahlstedts.blogspot.com/2012/12/upgrading-phonegap-plugin-for-saving.html)上完成了此操作。它确实允许您在两者之间进行通信，并且可能是您这样做的最佳选择。我的理解是这就是PhoneGap中插件接口的原因。

# r - 通过排序数据框的奇怪行为

> ID：14521492
> 
> 赞同：9
> 
> 时间：2013-01-25T12:05:08.957
> 
> 标签：r, dataframe

我有以下数据框，我想按第五列（“距离”）排序。当我尝试`

```
df.order <- df[order(df[, 5]), ] 
```

我总是收到以下错误消息。

```
Error in order(df[, 5]) : unimplemented type 'list' in 'orderVector1'` 
```

我不知道为什么 R 将我的数据框视为列表。运行`is.data.frame(df)`返回`TRUE`。我不得不承认，`is.list(df)`也有回报`TRUE`。是否可以强制我的数据框只是一个数据框而不是列表？谢谢你的帮助。

```
structure(list(ID = list(1, 2, 3, 4, 5, 6, 7, 8, 9, 10), 
               Latitude = list(50.7368, 50.7368, 50.7368, 50.7369, 50.7369, 50.737, 50.737, 50.7371, 50.7371, 50.7371), 
               Longitude = list(6.0873, 6.0873, 6.0873, 6.0872, 6.0872, 6.0872, 6.0872, 6.0872, 6.0872, 6.0872), 
               Elevation = list(269.26, 268.99, 268.73, 268.69, 268.14, 267.87, 267.61, 267.31, 267.21, 267.02), 
               Distance = list(119.4396, 119.4396, 119.4396, 121.199, 121.199, 117.5658, 117.5658, 114.9003, 114.9003, 114.9003), 
               RxPower = list(-52.6695443922406, -52.269130891243, -52.9735258244422, -52.2116571930007, -51.7784534281727, -52.7703448813654, -51.6558862949081, -52.2892907635308, -51.8322993596551, -52.4971436682333)), 
          .Names = c("ID", "Latitude", "Longitude", "Elevation", "Distance", "RxPower"),
          row.names = c(NA, 10L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T12:30:40.373

您的数据框包含列表，而不是向量。`as.data.frame`您可以使用and将此数据框转换为“经典”格式`unlist`：

```
df2 <- as.data.frame(lapply(df, unlist)) 
```

现在，可以按预期方式对新数据框进行排序：

```
df2[order(df2[, 5]), ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T12:17:33.060

我用一个小例子说明了问题所在：

```
df <- structure(list(ID = c(1, 2, 3, 4), 
          Latitude = c(50.7368, 50.7368, 50.7368, 50.7369), 
          Longitude = c(6.0873, 6.0873, 6.0873, 6.0872), 
          Elevation = c(269.26, 268.99, 268.73, 268.69), 
          Distance = c(119.4396, 119.4396, 119.4396, 121.199), 
          RxPower = c(-52.6695443922406, -52.269130891243, -52.9735258244422, 
                         -52.2116571930007)), 
          .Names = c("ID", "Latitude", "Longitude", "Elevation", "Distance", "RxPower"), 
          row.names = c(NA, 4L), class = "data.frame") 
```

请注意，`list`这只发生一次。并且所有值都由`c(.)`而不是包裹`list(.)`。这就是为什么`sapply(df, class)`对您的数据执行操作会导致所有列都具有 class `list`。

现在，

```
> sapply(df, classs)
#       ID  Latitude Longitude Elevation  Distance   RxPower 
# "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" 
```

现在`order`工作：

```
> df[order(df[,4]), ]  
#   ID Latitude Longitude Elevation Distance   RxPower
# 4  4  50.7369    6.0872    268.69 121.1990 -52.21166
# 3  3  50.7368    6.0873    268.73 119.4396 -52.97353
# 2  2  50.7368    6.0873    268.99 119.4396 -52.26913
# 1  1  50.7368    6.0873    269.26 119.4396 -52.66954 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:24:18.890

这会将您的 data.frame 列表转换为矩阵：

```
mat <- sapply(df,unlist) 
```

现在你可以订购了。

```
mat[order(mat[,5]),] 
```

如果所有列都是一种类型，例如数字，则矩阵通常更可取，因为对矩阵的操作比对 data.frames 的操作要快。但是，您可以使用`as.data.frame(mat)`.

顺便说一句，data.frame 是一种特殊的列表，因此会为每个 data.frame`is.list`返回`TRUE`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-28T16:38:38.843

遇到同样的问题。这对我有用（也许它可能会帮助遇到同样问题并偶然发现此页面的其他人）。

我的结构如下：

```
lst <- list(row1 = list(col1="A",col2=1,col3="!"), row2 = list(col1="B",col2=2,col3="@"))
> lst
$row1
$row1$col1
[1] "A"

$row1$col2
[1] 1

$row1$col3
[1] "!"

$row2
$row2$col1
[1] "B"

$row2$col2
[1] 2

$row2$col3
[1] "@" 
```

我在做：

```
df <- as.data.frame(do.call(rbind, lst)) 
```

当我尝试这样做时，我一直收到与您相同的错误`df[order(df$col1),]`。原来我必须这样做：

```
df <- do.call(rbind.data.frame, lst) 
```

# android - 安卓应用优化

> ID：14521493
> 
> 赞同：0
> 
> 时间：2013-01-25T12:05:13.347
> 
> 标签：android, optimization

嗨，我正在制作一个聊天应用程序。在那个应用程序中，我使用了很多位图。此应用程序占用大约 55 mb 的内存空间。谁能告诉我如何优化我的应用程序以减少内存空间。一些朋友建议我解绑 Bitmap，但我对此一无所知。谁能帮我 。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:06:48.387

您看过“高效显示位图”培训课程吗？[http://developer.android.com/training/displaying-bitmaps/](http://developer.android.com/training/displaying-bitmaps/)

除非您在某处发生内存泄漏，否则手动取消绑定不会真正帮助您使用内存。您可能想要查看的调用是[Bitmap.recycle()](https://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:26:00.220

> 在那个应用程序中，我使用了很多位图

您是否同时使用大量位图？

当不再需要位图对象时，您是否持有对它们的引用？如果是 - 不要那样做！

您是否将位图解码为实际需要显示它们的高度和宽度？（将显示它们的实际 imageView 大小）如果不是 - 你应该这样做！

`Bitmap.recycle()`如果您接受我的建议并且仍然消耗如此多的本机内存 - 您可以通过调用不再需要的位图对象上的方法来执行您所称的“解除绑定” 。此方法释放驻留在与位图关联的本机内存中的像素数组。

如果没有人再持有位图引用，系统会自行释放此内存，但调用该`recycle()`方法将导致系统在您告诉它时释放内存。如果您在短时间内使用大量位图，这可能很有用，系统通常不会在那段时间触发内存释放。

# c# - Linq Casting 返回类型为复杂类型

> ID：14521502
> 
> 赞同：0
> 
> 时间：2013-01-25T12:06:42.783
> 
> 标签：c#, linq, entity-framework

我正在使用 Linq 从数据库和实体框架中选择项目来创建我的实体。Entity Frameworks 还使用导入函数向导创建了复杂类型。每次我使用任何复杂类型返回查询时，当我尝试将结果转换为复杂返回类型时都会得到一个空值。

```
private AWorksLTEntities db = new AWorksLTEntities();

public IQueryable<SelectAll_Result> SelectAllMethod()
{
    var result = from p in db.Products
                 select p;
    return result as IQueryable<SelectAll_Result>;
} 
```

SelectAll_Result 是 EntityFrameworks 创建的复杂类型，强制转换不起作用，我的方法返回 null。

使用普通实体的相同代码确实返回值

```
private AWorksLTEntities db = new AWorksLTEntities();
public Product SelectAllMethod()
{
    var result = from p in db.Products
                 select p;
    return result;
} 
```

我的问题是，虽然这个例子很简单，但我正在使用我正在使用的代码生成器创建这个查询，并且返回类型很难确定，所以我需要能够使用实体生成的复杂返回类型框架函数导入而不是标准实体返回。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:25:29.407

强制转换运算符不知道如何从一个类转换为另一个不相关的类。您必须自己提供转换：

```
public IQueryable<SelectAll_Result> SelectAllMethod()
{
    var result = from p in db.Products
                 select new SelectAll_Result() { a = p.a, b = p.b, ... };
    return result;
} 
```

# sql - 光标锁定表格

> ID：14521504
> 
> 赞同：0
> 
> 时间：2013-01-25T12:06:47.537
> 
> 标签：sql, oracle, plsql, oracle10g

```
 declare 
     CURSOR C1 
      IS select tgt.exp_date ,(src.eff_date - 1/(24*60*60))eff_date 
         from mira_rate tgt,mira_rate_dummy src
       where src.tc_code = tgt.tc_code and src.carrier_code = tgt.carrier_code and tgt.exp_date is null for update of tgt.exp_date;
       v_a date;
       v_b date;
        i number:=0;
      begin 
      open c1;
      loop
        fetch c1 into v_a, v_b;
        exit when c1%notfound;

        update mira_rate 
        set exp_date =v_b where current of c1;
        i:=i+1;
        end loop;

        dbms_output.put_line(i||' rows updated');

      close c1;
   commit;
      end; 
```

在我执行查询后，它正在锁定表说

ORA-00054: 资源繁忙并使用指定的 NOWAIT 获取

另外请告诉我如何删除我试图杀死它没有发生的会话的锁。但它说的一样

取下锁后。请清除我这个要求

```
select tgt.exp_date ,(src.eff_date - 1/(24*60*60))eff_date 
             from mira_rate tgt,mira_rate_dummy src
           where src.tc_code = tgt.tc_code and src.carrier_code = tgt.carrier_code and tgt.exp_date is null; 
```

它会返回行我需要转到 mira_rate 表需要更新 exp_date=eff_date。

请建议我如何使用 Oracle 9i 进行即时操作，以便在没有不匹配的情况下进行合并

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:18:02.007

乍一看，代码中没有提交。

带有提交的代码就可以了。提交将释放锁（[Oracle 游标示例/expl](http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/static.htm#CHDGEHBF)）

但最好你会：

```
MERGE INTO mira_rate tgt
USING mira_rate_dummy src
ON (src.tc_code = tgt.tc_code and src.carrier_code = tgt.carrier_code)
WHEN MATCHED THEN UPDATE
SET exp_date= src.eff_date - 1/(24*60*60) --or just src.eff_date
WHERE tgt.exp_date is null; 
```

据我了解，这就是您想要做的。

作为一个规则：你可以在 SQL 中做的，在 SQL 中做，而不是 PL/SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:27:30.987

取出“用于更新”。

您需要非常清楚为什么需要它，而根据我的经验，您通常不需要。

在我们之间，我想我们是说这应该是你的方法

```
begin
  UPDATE mira_rate 
  SET exp_date= src.eff_date - 1/(24*60*60)
  WHERE exp_date is null;

  DBMS_OUTPUT.PUT_LINE
    (TO_CHAR(SQL%ROWCOUNT) || ' Rows Updated);

end; 
```

不需要锁，也不需要游标。

希望有帮助。

编辑 - 仍然不完全确定您的要求是什么，但以下 sql 可能是您正在寻找的。

```
UPDATE MIRA_RATE TGT
SET EXP_DATE = 
  (
    SELECT SRC.EFF_DATE - 1/86400 
    FROM MIRA_RATE_DUMMY SRC
    WHERE 
      SRC.TC_CODE = TGT.TC_CODE AND
      SRC.CARRIER_CODE = TGT.CARRIER_CODE
  )
WHERE
  TGT.EXP_DATE IS NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T09:45:48.437

@Satheesh，可更新选择仅适用于主键列。查看 select 是否获取主键并在 where 子句中使用它。否则更新将引发错误。有一些东西要检查 `cannot modify a column which maps to a non key-preserved table` 你可以加入，但更新需要主键来更新基表。

# jquery - 当元素在屏幕上可见时运行动画

> ID：14521509
> 
> 赞同：0
> 
> 时间：2013-01-25T12:07:14.207
> 
> 标签：jquery, visible

我有一点进度条脚本。它工作正常，但在页面加载时运行。我想在屏幕上可见栏时运行动画（如果进度条在选项卡中，它也应该工作）。我怎样才能得到这个？

这是脚本：

```
setTimeout(function(){

    $('.skill-bar .skill-bar-content').each(function() {
        var me = $(this);
        var perc = me.attr("data-percentage");

        var current_perc = 0;

        var progress = setInterval(function() {
            if (current_perc>=perc) {
                clearInterval(progress);
            } else {
                current_perc +=1;
                me.css('width', (current_perc)+'%');
            }

            me.text((current_perc)+'%');

        }, 10);

    });

},10); 
```

jsFiddle：http: [//jsfiddle.net/fUyYL/](http://jsfiddle.net/fUyYL/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:16:29.070

像这样的东西？[http://jsfiddle.net/fUyYL/1/](http://jsfiddle.net/fUyYL/1/)

```
var ele = $('#skill-bars');
if( ele.is(':visible') ) {
    ...
} 
```

# javascript - Javascript：如果参数未作为函数调用，则返回默认值

> ID：14521510
> 
> 赞同：0
> 
> 时间：2013-01-25T12:07:18.187
> 
> 标签：javascript, jquery, variables, module, closures

我想知道如何在变量调用中返回默认值，假设这个变量返回一个带有函数的对象，但如果我直接调用它（即直接调用模块，而不是 module.get）我希望它从其内部函数之一返回默认值：

目前我有这个：

```
function createModule() {    
    module = (function() {
        var val = null;

        function getVal() {
            return val;
        }

        function setVal(newVal) {
            val = newVal;
        }

        return {
            get: getVal, 
            set: setVal
        }
    })();
} 
```

目前模块返回一个`object`，你可以使用`get()`和`set()`参数函数来修改它的`val`变量，但是我希望模块有一个默认的返回值到“模块”。

有什么办法可以实现这一点吗？

编辑：我想要的功能是这样的：

```
> module.set('testValue');

> module.get();
'testValue'

> module; // or using module(); instead
'testValue' 
```

我想打电话给`module`或`module()`与打电话完全相同`module.get()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:08:48.843

您可以使`module`对象成为一个函数，其行为类似于`get`：

```
module = (function() {
    var val = null;

    function getVal() {
        return val;
    }

    function setVal(newVal) {
        val = newVal;
    }

    function module() {
        return val;
    }
    module.get = getVal;
    moudle.set = setVal;
    return module;
})();

> module.set('testValue')
> module.get()
'testValue'
> module()
'testValue' 
```

但是我不明白你为什么需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:20:52.540

```
function createModule(opt) {

  var options = {
    val: 'foo'
  };

  if(typeof opt === 'object'){
    // Using underscore's extend method... jQuery has a similar method, or you can create your own.
    _.extend(options, opt);
  }

  module = (function() {
      var val = options.val;

      function getVal() {
          return val;
      }

      function setVal(newVal) {
          val = newVal;
      }

      return {
          get: getVal, 
          set: setVal
      }
  })();
} 
```

# ruby-on-rails - 保存前的 MD5 哈希值

> ID：14521511
> 
> 赞同：1
> 
> 时间：2013-01-25T12:07:19.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, md5

我在表中有一个字段，该字段`Order`由其他值填充，如下例所示：

```
company_name: A-Z Traders
company_tel: (111) 111 1111
MD5_hash_field: A-Z Traders|(011) 111 1111 
```

这正在通过隐藏字段创建记录。

我需要的是在`MD5_hash_field`将 MD5 保存到数据库之前对其进行哈希处理。

尝试添加以下内容：

```
before_create :hash_field

def hash_field
  self.md5_field = Digest::MD5.hexdigest(self.md5_field)
end 
```

但似乎没有做任何事情

编辑：

它确实在一定程度上起作用

```
<%= f.hidden_field :checksum, :value => '10011013800|Customer1|3299|ZAR|http://localhost|2012-01-30 18:30:00|secret' %> 

   Result should be: 31d1244f08a62f0551e9263c4835ba88

   but getting : aae1ee590e4d4e08e7c0363cca90a22b 
```

解决了：

```
This Does Work! - Fellow Developers when working on multiple Applications make sure you are restarting the correct App. LOL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:55:46.030

你不能把代码改成

```
def hash_field
  p self.md5_field
  self.md5_field = Digest::MD5.hexdigest(self.md5_field)
end 
```

看看它在日志中给了你什么？

# asp.net-mvc-4 - 来自 DropDownList 的 Ajax.ActionLink 参数

> ID：14521513
> 
> 赞同：0
> 
> 时间：2013-01-25T12:07:27.410
> 
> 标签：asp.net-mvc-4, actionlink

我有以下视图部分：

```
<div class="editor-label">
    @Html.LabelFor(model => model.Type)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.Type, ElangWeb.Helpers.ModelHelpers.GetExerciseTypes())
</div> 
```

我想要一个链接，它将根据我的模型的 Type 属性生成一些部分视图，该属性是一个枚举（我根据类型返回不同的部分视图），我添加了以下链接：

```
@Ajax.ActionLink("AddExerciseItem", 
                        "AddExerciseItem",
                        "Exercise",
                        new { type=@Model.Type},
                        new AjaxOptions() { HttpMethod="GET", InsertionMode = InsertionMode.InsertBefore, UpdateTargetId="ExerciseItems"}) 
```

我的控制器动作定义如下：

```
public ActionResult AddExerciseItem(ExerciseType type)
{

  return PartialView("ExerciseItemOption", new ExerciseItemOption());
} 
```

但是我不起作用，因为我的模型有例外“对象引用未设置为对象的实例”。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:12:48.920

您可以使用普通链接：

```
@Html.ActionLink(
    "AddExerciseItem", 
    "AddExerciseItem", 
    "Exercise", 
    null, 
    new { id = "add" }
) 
```

你可以不显眼地进行 AJAXify：

```
// When the DOM is ready
$(function() {
    // Subscribe to the click event of the anchor
    $('#add').click(function() {
        // When the anchor is clicked get the currently
        // selected type from the dropdown list.
        var type = $('#Type').val();

        // and send an AJAX request to the controller action that 
        // this link is pointing to:
        $.ajax({
            url: this.href,
            type: 'GET',
            // and include the type as query string parameter
            data: { type: type },
            // and make sure that you disable the cache because some
            // browsers might cache GET requests
            cache: false,
            success: function(result) {
                // When the AJAX request succeeds prepend the resulting
                // markup to the DOM the same way you were doing in your
                // AJAX.ActionLink
                $('#ExerciseItems').prepend(result);
            }
        });
        return false;
    });
}); 
```

现在您的`AddExerciseItem`控制器操作可以采用类型参数：

```
public ActionResult AddExerciseItem(string type)
{
    ...
} 
```

# jquery - 使用带有 jquery ui 的自定义样式表

> ID：14521518
> 
> 赞同：-1
> 
> 时间：2013-01-25T12:08:06.093
> 
> 标签：jquery, css, jquery-ui, stylesheet

我在我的 asp.net MVC 网站中使用 jquery UI。在一个页面上，我单击一个按钮，然后以 window.open 的形式打开一个新窗口。新打开的窗口在加载时打开 Jquery UI 弹出窗口。我将参数 css 传递给 window.open。如果该参数不为空。我希望新打开的窗口的 jquery 弹出窗口使用该样式表。我的问题是如何将我的样式表用于 jquery ui 弹出窗口，因为 jquery ui 在 css 上有它使用自己的图像，而 jquery ui css 也使用这些样式名称。

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:17:00.493

[您可以通过此处](http://jqueryui.com/themeroller/)滚动自己的主题，然后在弹出`layout.cshtml`页面中对其进行编码

```
 <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")

if (!string.isNullOrEmpty(Reuqest.QueryString["useCSS"])
{
@Styles.Render("~/Content/css/"+Reuqest.QueryString["useCSS"])
}

    </head> 
```

但由于您没有提供任何代码、项目布局、描述等。我只是假设您的意思是一个完整的弹出窗口，而不仅仅是一个 jquery.ui.dialog 对象。

**编辑** 此解决方案要求您为新主题创建捆绑器方法。

```
bundles.Add(new StyleBundle("~/Content/themes/base/css/themeName").Include(
                        "~/Content/themes/themeName/jquery.ui.core.css",
                        "~/Content/themes/themeName/jquery.ui.resizable.css",
                        "~/Content/themes/themeName/jquery.ui.selectable.css",
                        "~/Content/themes/themeName/jquery.ui.accordion.css",
                        "~/Content/themes/themeName/jquery.ui.autocomplete.css",
                        "~/Content/themes/themeName/jquery.ui.button.css",
                        "~/Content/themes/themeName/jquery.ui.dialog.css",
                        "~/Content/themes/themeName/jquery.ui.slider.css",
                        "~/Content/themes/themeName/jquery.ui.tabs.css",
                        "~/Content/themes/themeName/jquery.ui.datepicker.css",
                        "~/Content/themes/themeName/jquery.ui.progressbar.css",
                        "~/Content/themes/themeName/jquery.ui.theme.css")); 
```

# ruby-on-rails - 为什么使用 Omnicontacts 导入 gmail 联系人只需要 99 个联系人

> ID：14521520
> 
> 赞同：3
> 
> 时间：2013-01-25T12:08:06.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, omniauth

我正在使用omnicontacts 从gmail 导入联系人。但它只需要 99 个联系人而不是全部。这是我的代码

```
def contacts_callback
  @contacts = request.env['omnicontacts.contacts']
  @contacts.each do |contact|
  contact1 = current_user.contacts.new
  contact1.name = contact[:name]
  contact1.email = contact[:email]
  contact1.group = "Others"
  contact1.save(:validate => false)
end
  redirect_to "/contact"
end 
```

我想不出问题。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T18:10:11.270

您需要在初始化程序中添加 max_contacts 选项：

```
importer :gmail, "xxx", "yyy", :max_results => 1000 
```

我刚刚更新了自述文件以包含此内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:28:04.160

解决了:)

我去了 lib/omnicontacts/importer/gmail.rb

```
 def initialize *args
    super *args
    @auth_host = "accounts.google.com"
    @authorize_path = "/o/oauth2/auth"
    @auth_token_path = "/o/oauth2/token"
    @scope = "https://www.google.com/m8/feeds"
    @contacts_host = "www.google.com"
    @contacts_path = "/m8/feeds/contacts/default/full"
    @max_results =  (args[3] && args[3][:max_results]) || 100
  end 
```

我只是将@max_results 100 更改为 500。现在它可以工作了

# php - 使用 PHP GD 合并两个图像

> ID：14521524
> 
> 赞同：0
> 
> 时间：2013-01-25T12:08:25.817
> 
> 标签：php, image, gd, watermark

我正在尝试创建一个图像，其中包含我的图像 A（上传的图像）和图像 B（我的水印图像）。我的问题是我没有得到正确的方法来从底部扩展图像的大小，这将使用图像 A 和 B 创建。

我的代码是 -

```
$img_width=imagesx($img);
$img_height=imagesy($img);
$watermark=imagecreatefrompng($watermark);
$watermark_width=imagesx($watermark);
$watermark_height=imagesy($watermark);

$image=imagecreatetruecolor($img_width, $img_height+35);
imagealphablending($image, false);
$dest_x=$img_width-$watermark_width;
$dest_y=$img_height-$watermark_height+20;

imagecopy($img, $watermark, $dest_x, $dest_y, 0, 0,$watermark_width, $watermark_height);
imagesavealpha($img, true);
imagejpeg($img, $config['pdir']."/t/l-".$thepp, 90);
} 
```

我用这段代码得到的是 -

[结果 http://www.9gag.in/pdata/t/l-76.jpg](http://www.9gag.in/pdata/t/l-76.jpg)

您可以看到水印图像没有与我要创建的图像完全合并。我想要目标图像中的扩展区域，水印将正确安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:18:31.843

当你写：

```
$dest_y=$img_height-$watermark_height+20; 
```

我想你真的想要：

```
$dest_y=$img_height-$watermark_height-20; 
```

Y = 0 在图像的顶部，因此越往底部，您的高度就越高。

# php - 将空格 (%20) 更改为 -

> ID：14521526
> 
> 赞同：0
> 
> 时间：2013-01-25T12:08:31.410
> 
> 标签：php

嘿，我现在有我的网站 URL 链接到这里：

```
 <div id="blog_posts_container">
    <h3><a href="<?php echo (isset($row_getDisplay['post_id']) ? $row_getDisplay['post_id'] : ''); ?>_<?php echo (isset($row_getDisplay['title']) ? $row_getDisplay['title'] : ''); ?>.html"<?php echo (isset($row_getDisplay['title']) ? $row_getDisplay['title'] : ''); ?></a></h3> 
```

在我的 .htaccess 中，我有：

```
RewriteRule ^([^_]*)_([^_]*).html$ post.php?post_id=$1&title=$2 [L] 
```

如何将我的 URLS 从“86_I%20am,%20who%20I%20am.html”获取到“86_I-am-who-I-am.html”

编辑：我做到了，我用它来替换特殊字符，例如 : ; / 等，但现在它又有了空格。这是我的代码：

```
<h3><a href="<?php echo (isset($row_getDisplay['post_id']) ? $row_getDisplay['post_id'] : ''); ?>_<?php echo str_replace(array(':', '\\', '/', '*'), ' ', urldecode($row_getDisplay['title'])); ?>.html" ><?php echo (isset($row_getDisplay['title']) ? $row_getDisplay['title'] : ''); ?></a></h3> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:13:29.123

使用`str_replace`函数替换空间 - 像这样：

$url = str_replace(' ', '-', urldecode($row_getDisplay['title']));

参见 PHP 手册[str_replace](http://php.net/manual/en/function.str-replace.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:34:19.503

```
 urldecode($row_getDisplay['title']) 
```

%20 是单词之间的空格

# javascript - 这段代码是否容易受到 XSS 攻击？

> ID：14521534
> 
> 赞同：6
> 
> 时间：2013-01-25T12:09:20.390
> 
> 标签：javascript, html, xss

这个问题确实出现了：
[为什么浏览器会修改包含 &#x 的 HTML 元素的 ID？](https://stackoverflow.com/questions/14519250/why-does-the-browser-modify-the-id-of-an-html-element-that-contains-x)

给定以下网页：

```
<html>
  <head>
    <script type="text/javascript">
      // --------------------------------------------------------
      // could calling this method produce an XSS attack?
      // --------------------------------------------------------
      function decodeEntity(text){
        text = text.replace(/<(.*?)>/g,''); // strip out all HTML tags, to prevent possible XSS
        var div = document.createElement('div');
        div.innerHTML = text;
        return div.textContent?div.textContent:div.innerText;
      }
      function echoValue(){
        var e = document.getElementById(decodeEntity("/path/&#x24;whatever"));
        if(e) {
          alert(e.innerHTML);
        }
        else {
          alert("not found\n");
        }
      }
    </script>
  </head>
  <body>
    <p id="/path/&#x24;whatever">The Value</p>
    <button onclick="echoValue()">Tell me</button>
  </body>
</html> 
```

元素的包含为了防止 XSS 攻击而转义的字符`id`。`<p>`HTML 部分和 JS 部分由服务器生成，服务器在这两个部分上插入相同的转义值（可能来自不安全的源）。

`&#x`服务器以以下格式转义以下字符范围：

*   0x00 – 0x2D
*   0x3A – 0x40
*   0x5B – 0x5E
*   0x60
*   0x7B – 0xFF
*   0x0100 – 0xFFFF

换句话说：唯一*没有*转义的字符是：

*   0x2E – 0x39 ( `.`, `/`, `0123456789`)
*   0x41 – 0x5A ( `A`– `Z`)
*   0x5F ( `_`)
*   0x61 – 0x7A ( `a`– `z`)

现在，我必须`<p>`通过 javascript 访问它。引用问题中的函数`echoValue()`总是失败，因为浏览器在 HTML 部分中转换`&#x24;`为`$`，但`&#x24;`在 JS 部分中保留它。

因此，[Gareth](https://stackoverflow.com/users/1855592/gareth-cornish)想出了[一个简单有效的答案](https://stackoverflow.com/a/14519991/520162)。

`decodeEntity()`我担心的是，当使用引用答案中提供的函数时，通过转义动态字符串消除的 XSS 攻击的可能性会再次出现。

有人可以指出是否存在安全问题（**哪个？**）或没有（**为什么不？**）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T13:02:55.593

我首先建议您查看以下讨论 JavaScript 中的 HTML 卫生和 Javascript 中的 XSS 的链接：

*   [在客户端清理/重写 HTML](https://stackoverflow.com/questions/295566/sanitize-rewrite-html-on-the-client-side)
*   [如何防止用户生成的 HTML 中的 Javascript 注入攻击](https://stackoverflow.com/questions/942011/how-to-prevent-javascript-injection-attacks-within-user-generated-html)

**安全第一课：** 不要重新发明轮子。如果以前做过某些事情，那么他们可能比您的临时解决方案做得更好。

尽管我无法从脑海中找到一种方法来利用您的简单正则表达式，但我并不相信它真的能捕捉到所有情况。第一个链接提供了一个更详细的解决方案，并且已经过彻底的审查和测试。

我还建议您查看[XSS Filter Evasion Cheat Sheet](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet)。向您展示人们可能会想出什么样的讨厌的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:02:07.653

您对输入应用的额外约束可能会导致此攻击失败，但假设对 的任意输入`decodeEntity`，以下是运行脚本的示例：

```
decodeEntity("<img onerror='alert(\"test\")'\nsrc='test'>") 
```

这是因为`/<(.*?)>/`只有在`<`和`>`位于同一行时才匹配。

# php - 匹配包含两个“针”的字符串

> ID：14521538
> 
> 赞同：3
> 
> 时间：2013-01-25T12:09:34.537
> 
> 标签：php, regex, string, parsing, pcre

我有一个看起来有点像这样的字符串

```
1: u:mads g:folk 2: g:andre u:jens u:joren 
```

我需要的是一种方法（我猜是正则表达式）来获取例如 u:jens 和它之后的数字（1 或 2）。

我如何在 php 中解决这个问题（最好只有一个函数）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:25:29.340

这将找到所有匹配项。如果您只需要第一个，请`preg_match`改用。

```
<?php
$subject = '1: u:mads g:folk 2: g:andre u:jens u:joren 3: u:jens';
preg_match_all('#(\d+):[^\d]*?u:jens#msi', $subject, $matches);
foreach ($matches[1] as $match) {
    var_dump($match);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:25:00.150

您可以使用以下正则表达式：

```
(\d+):(?!.*\d+:.*).*u:jens 
```

您要查找的数字放在第一个捕获组中。因此，如果您使用的是 PHP：

```
$matches = array();
$search = '1: u:mads g:folk 2: g:andre u:jens u:joren';
if (preg_match('/(\d+):(?!.*\d+:.*).*u:jens/', $search, $matches)) {
  echo 'Found at '.$matches[1]; // Will output "Found at 2"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T13:10:06.813

这将解析字符串并返回一个数组，其中包含找到搜索字符串的数字键：

```
function whereKey($search, $key) {
  $output = array();
  preg_match_all('/\d+:[^\d]+/', $search, $matches);

  if ($matches[0]) {
    foreach ($matches[0] as $k) {
      if (strpos($k, $key) !== FALSE) {
        $output[] = (int) current(split(':', $k));
      }
    }
  }

  return $output;
} 
```

例如：

```
whereKey('1: u:mads g:folk 2: g:andre u:jens u:joren', 'u:jens') 
```

...将返回：

```
array(1) { [0]=> int(2) } 
```

# java - java - 获取给定月份每周的开始日期和结束日期

> ID：14521539
> 
> 赞同：3
> 
> 时间：2013-01-25T12:09:35.850
> 
> 标签：java, date, calendar

以下是我用来计算给定月份的周开始日期和结束日期的代码。假设周开始日是星期一，周末结束日是星期日。例如，2013 年 1 月将有 5 周。如果月份从星期日开始 - 忽略那一天

2013 年 1 月 第一周 - 2012 年 12 月 31 日至 2013 年 1 月 6 日 第二周 - 2013 年 1 月 7 日至 2013 年 1 月 13 日 第三周 - 2013 年 1 月 14 日至 2013 年 1 月 20 日 第四周 - 1 月 21 日-2013 年至 2013 年 1 月 27 日第五周 - 2013 年 1 月 28 日至 2013 年 2 月 3 日

```
public static void main(String[] args) {
    List<List<String>> weekdates = getNumberOfWeeks(2013, Calendar.JULY);
    for(List<String> weekDatesLoop:weekdates){
        System.out.println("Start day: "+weekDatesLoop.get(0).toString());
        System.out.println("End day: "+weekDatesLoop.get(1).toString());
    }
  }
public static List<List<String>> getNumberOfWeeks(int year, int month) {
        System.out.println("Month Id: "+month);
        month = month-1;
        System.out.println("Month Id: " + month);
        SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");
        List<List<String>> weekdates = new ArrayList<List<String>>();

        List<String> dates = new ArrayList<String>();
        Calendar c = Calendar.getInstance();
        c.set(Calendar.YEAR, year);
        c.set(Calendar.MONTH, month);
        c.set(Calendar.DAY_OF_MONTH, 1);
        dates.add(format.format(c.getTime()));
        //int numOfWeeksInMonth = 1;
        while (c.get(Calendar.MONTH) == month) {
          //System.out.println(c.get(Calendar.DAY_OF_WEEK) );

          if (c.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY) {
            dates.add(format.format(c.getTime()));
            weekdates.add(dates);
          }
          else if (c.get(Calendar.DAY_OF_WEEK) == Calendar.MONDAY) {
            dates = new ArrayList<String>();
            dates.add(format.format(c.getTime()));
            //numOfWeeksInMonth++;
          }
          c.add(Calendar.DAY_OF_MONTH, 1);
        }
        if(dates.size() < 2){
          c.add(Calendar.DAY_OF_MONTH, -1);
          dates.add(format.format(c.getTime()));
          weekdates.add(dates);
        }
        System.out.println(weekdates);
        return weekdates;
      } 
```

我仍在努力。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-08-06T21:27:44.967

您正在使用糟糕的日期时间类，这些类在几年前被 JSR 310 中定义的现代*java.time*类所取代。现在这项工作变得容易得多。

# `YearMonth`

该类[`YearMonth`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/YearMonth.html)代表一个特定的月份。[`Month`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Month.html)使用枚举指定月份。

```
YearMonth ym = YearMonth.of( 2013 , Month.JANUARY ) ; 
```

# `LocalDate`

获得当月的第一天。

```
LocalDate firstOfMonth = ym.atDay( 1 ) ; 
```

# `TemporalAdjuster`

获取前一个星期一，如果是星期一，则保留此日期。

```
TemporalAdjuster ta = TemporalAdjusters.previousOrSame( DayOfWeek.MONDAY ) ;
LocalDate previousOrSameMonday = firstOfMonth.with( ta ) ; 
```

然后一次循环一周。

```
LocalDate endOfMonth = ym.atEndOfMonth() ;
LocalDate weekStart = previousOrSameMonday ; 
do {
    LocalDate weekStop = weekStart.plusDays( 6 ) ;
    System.out.println( "Week: " + weekStart + " to " + weekStop ) ;
    // Set up the next loop.
    weekStart = weekStart.plusWeeks( 1 ) ;
} while ( ! weekStart.isAfter( endOfMonth ) ) ; 
```

请参阅[在 IdeOne.com 上实时运行的代码](https://ideone.com/DsTLw7)。

> 周：2012 年 12 月 31 日星期一至 2013 年 1 月 6 日星期日
> 
> 周：2013 年 1 月 7 日星期一至 2013 年 1 月 13 日星期日
> 
> 周：2013 年 1 月 14 日星期一至 2013 年 1 月 20 日星期日
> 
> 周：2013 年 1 月 21 日星期一至 2013 年 1 月 27 日星期日
> 
> 周：2013 年 1 月 28 日星期一至 2013 年 2 月 3 日星期日

顺便说一句，您可能想了解并考虑使用[ISO 860 标准定义的一周](https://en.wikipedia.org/wiki/ISO_week_date)。然后使用[*ThreeTen-Extra*](https://www.threeten.org/threeten-extra/)库的[`YearWeek`](https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/YearWeek.html)类。[](https://www.threeten.org/threeten-extra/)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:33:43.217

我得到以下代码的答案

```
List<List<String>> getNumberOfWeeks(int year, int month) {
        SimpleDateFormat format = new SimpleDateFormat("dd-MM-yyyy");
        List<List<String>> weekdates = new ArrayList<List<String>>();
        List<String> dates;
        Calendar c = Calendar.getInstance();
        c.set(Calendar.YEAR, year);
        c.set(Calendar.MONTH, month);
        c.set(Calendar.DAY_OF_MONTH, 1);
        while (c.get(Calendar.MONTH) == month) {
                dates = new ArrayList<String>();
              while (c.get(Calendar.DAY_OF_WEEK) != Calendar.MONDAY) {
                c.add(Calendar.DAY_OF_MONTH, -1);
              }
              dates.add(format.format(c.getTime()));
              c.add(Calendar.DAY_OF_MONTH, 6);
              dates.add(format.format(c.getTime()));
              weekdates.add(dates);
              c.add(Calendar.DAY_OF_MONTH, 1);
        }
        System.out.println(weekdates);
        return weekdates;
      } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:18:40.980

一个可能的解决方案可能是不重新发明轮子并使用[JodaTime](http://joda-time.sourceforge.net)或类似的库。例如，您可以使用 a 上的[dayOfWeek()](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#dayOfWeek%28%29)函数`DateTime`来获取您想要的信息。*

# ruby-on-rails-3 - Rails 3.1+迁移中数据库级别的唯一模型字段？

> ID：14521541
> 
> 赞同：0
> 
> 时间：2013-01-25T12:09:39.540
> 
> 标签：ruby-on-rails-3, activerecord, model, unique

有没有办法在 Rails 3.1+ 迁移中的字段上指定数据库级别的唯一性约束？我知道 ActiveRecord`validates_uniqueness_of`会起作用，但我很想知道这是否可以在其他地方指定。

例如，为了指定“登录”字段在迁移中应该是唯一的，例如...

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name
      t.string :login

      t.timestamps
    end
  end
end 
```

...我想添加一个选项，例如`:unique => true`.

[文档](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)中没有提到任何内容，所以我认为这不是一个好地方/做事的方式，但是有谁知道如何实现这一点（即使它是手动添加到生成的架构中的）？还是 validates_uniqueness_of 是首选方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:18:28.410

您可以添加唯一索引，以便：

```
def change
  create_table :users do |t|
    t.string :name
    t.string :login

    t.timestamps
  end

  add_index :users, :login, :unique => true
end 
```

# c# - 正则表达式不起作用（无法将字符串转换为 int (Regex.IsMatch)

> ID：14521543
> 
> 赞同：0
> 
> 时间：2013-01-25T12:09:46.447
> 
> 标签：c#, .net, regex

对此有一个非常简单的答案，我知道有。但我无法理解它。它是一个控制台应用程序，您输入一个单词“密码”，它会告诉我它是否与我的正则表达式匹配，因为您可以正确收集。

基本上我想知道为什么这不起作用：

```
static void Main(string[] args)
{
    Regex regularExpression = new Regex("/^[a-z0-9_-]{3,16}$/");

    Console.Write("Enter password: ");
    string password = Console.ReadLine();

    if (Regex.IsMatch(password, regularExpression))
        Console.WriteLine("Input matches regular expression");
    else
        Console.WriteLine("Input DOES NOT match regular expression");

    Console.ReadKey(); 
} 
```

我确定这与`Regex.IsMatch`无法将字符串转换为 int 的方法有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:17:51.190

因为您使用的是静态方法`isMatch`并且正在提供一个正则表达式对象，所以它需要一个正则表达式作为字符串，请参阅[Regex 类](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)。

此外，您不需要 .net 中的正则表达式分隔符。

用这个：

```
static void Main(string[] args) {
    Regex regularExpression = new Regex(@"^[a-z0-9_-]{3,16}$");

    Console.Write("Enter password: ");
    string password = Console.ReadLine();

    if (regularExpression.IsMatch(password))
        Console.WriteLine("Input matches regular expression");
    else
        Console.WriteLine("Input DOES NOT match regular expression");
    Console.ReadKey(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:17:50.290

```
Regex regularExpression = new Regex("/^[a-z0-9_-]{3,16}$/"); 
```

`/`是符号，将它们替换为字符串空 =>`@"^[a-z0-9_-]{3,16}$"`

# c# - Windows Phone ListPicker 传递 SelectedItem

> ID：14521544
> 
> 赞同：1
> 
> 时间：2013-01-25T12:09:55.527
> 
> 标签：c#, windows-phone-7, rss, selecteditem, listpicker

我正在使用[rss 阅读器示例](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh487167%28v=vs.105%29.aspx)和 listPicker。我想要做的是将 rss url 从 listPicker 项传递给 webClient.DownloadStringAsync。

```
**MainPage.xaml**
[...]
<toolkit:ListPicker.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Nazwa}"
                                   Margin="12 0 0 0"
                                   VerticalAlignment="Center"/>
                        <Image Source="/Repertuar;component/Images/open.png" FlowDirection="RightToLeft" />
                    </StackPanel>
                </DataTemplate>
            </toolkit:ListPicker.ItemTemplate>
            <toolkit:ListPicker.FullModeItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="16 21 0 20">
                        <TextBlock Text="{Binding Nazwa}"
                                   FontSize="43"/>
                    </StackPanel>
                </DataTemplate>
            </toolkit:ListPicker.FullModeItemTemplate>
[...] 
```

.

```
**MainPage.xaml.cs**
[...]
public class Miasto
{
    public string Nazwa
    {
        get;
        set;
    }

    public string Adres
    {
        get;
        set;
    }
}

public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    public MainPage()
    {
        InitializeComponent();
        IEnumerable<Miasto> source = this.GetDataSource();
        this.listPicker.ItemsSource = source;
    }
    private IEnumerable<Miasto> GetDataSource()
    {
        List<Miasto> source = new List<Miasto>();
        source.Add(new Miasto() { Nazwa = "Bydgoszcz", Adres = "http://film.wp.pl/rss.xml?id=10" });
        source.Add(new Miasto() { Nazwa = "Gdańsk", Adres = "http://film.wp.pl/rss.xml?id=27" });
        return source;
    }
[...]
    webClient.DownloadStringAsync(new System.Uri("http://film.wp.pl/rss.xml?id=27"));
[...] 
```

我不知道如何解决这个问题。这个问题有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:17:16.033

您可以在选择更改事件中将 id 传递给 url。您是否尝试预加载列表项上的信息？

# c# - C# 中的命名约定 - 全局变量

> ID：14521546
> 
> 赞同：6
> 
> 时间：2013-01-25T12:10:06.650
> 
> 标签：c#, naming-conventions

我知道关于在私有字段/属性方面使用关键字或下划线存在争议/意见`this`（我会提到，我被困在 .NET 2.0 上）

就个人而言，我更喜欢`this`，但有时您不能使用它，例如当您需要从静态方法中引用全局变量时。好吧，那么我们就不得不使用下划线了（假设我们只有两个选择，`this`或者下划线）。这意味着如果我的班级使用任何我无法`this`在整个文档中使用的静态方法。

现在，我已经阅读了[命名指南](http://msdn.microsoft.com/en-us/library/xzf533w0%28VS.71%29.aspx)并使用了[StyleCop](http://stylecop.codeplex.com/documentation)，两者都希望我不使用下划线，但我的 Resharper 几乎坚持使用 _。

我觉得让一个类使用 _ 而下一个类`this`只是为了适应类混合非静态和静态方法的情况是不对的！这里关于 SO 的建议是保持一种实现/风格，但我不知道这是否意味着我应该忽略微软（而且我知道微软并不总是遵循他们自己的规则）！

建议使用其他前缀，类似于匈牙利语，但前缀为 globVariableName，其中 glob 表示全局。我讨厌这个想法，它太定制了，对我团队之外的任何其他开发人员来说都不是显而易见的。

所以，我的问题是，一致地定义全局变量的最佳方法是什么？由于它们是命名指南，可能我可以忽略（至少 _ 可以始终如一地使用，但忽略语言创建者的建议感觉不对）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:20:00.533

只需像在静态类中使用“this”一样使用类名。示例如下：

```
public static class MyStatic
{
    public static object Global;

    public static void SomeMethod()
    {
        var theGlobal = MyStatic.Global;
    }
}

public class MyNonStatic
{
    public object Global;

    public void SomeMethod()
    {
        var theGlobal = this.Global;
    }
} 
```

注意：我实际上想不出任何其他方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:19:05.247

通过全局变量，我假设您的意思是`const`或`static`字段

我认为 StyleCop 曾经鼓励您使用`ClassName.staticField`for`static`和`const`字段，但它似乎已经放弃了该规则，至少在默认情况下是这样。不过，这仍然是一个不错的方法。

此外，您可以配置 Resharper 以与 StyleCop 完美配合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:23:37.003

这只是我个人的看法；

*   我相信`this`对每个私有变量都使用非常有用；它对代码的可读性有积极的影响。此外，当您使用一些 DI 构造函数注入方法时，它使您可以使用相同的变量而不会产生任何混淆，这似乎非常合适。

    ```
    public void SomeMethod(int someVariable)
    {
        this.someVariable = someVariable;
    } 
    ```

*   我更喜欢`this`而不是下划线；下划线乍一看似乎很漂亮；但参考前面的例子，它对可读性有负面影响。

*   我命名静态变量的方式与命名类变量的方式相同；关键字的使用`this`降低了私有变量和静态变量之间混淆的风险。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:26:40.977

我总是对静态变量和实例变量使用下划线。

例如我使用的变量`this.variable`

对于`static`变量 i ，有时会在它们前面加上类名，例如，`ClassName.variable`

# java - 嵌套 for 循环中的 if-else 块 - 编译器声称我需要一个 return 语句

> ID：14521547
> 
> 赞同：1
> 
> 时间：2013-01-25T12:10:17.787
> 
> 标签：java, boolean

我该如何进行这项工作？它说我需要添加一个退货声明，但我有一个。

```
public boolean clockFactCheck(int a, int b){
    for (int i = 0; i <= 276; i++){
        for (int h = 0; h <= 55; h++){
            if (a == i + 186 && b == h + 133){
                return true;
            } else {
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:12:06.160

`return`对于任何输入，提供的代码可能无法到达其中一个，`a,b`这就是编译器所抱怨的。

实际上，在您的情况下，`if-else`第一次迭代就会达到 - 不幸的是编译器无法推断出一些东西。因此，它采用保存方式并发出此错误。

*评论：*因此，在您的循环中似乎没有多大意义，因为它根本不会迭代，而是在第一次迭代中停止，`i==0`并且`h==0`. 你的意思是编写这样的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:11:47.407

你在 for 循环之后没有 return 语句，但即使这样 h++ 也是死代码，因为它永远不会超过第一次迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:13:14.460

将 return 语句放在循环之外。（在你的函数中声明一个布尔值，修改它并在最后返回它）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:17:16.870

我的猜测是编译器不够聪明，无法确定循环周围没有代码路径。

如果这是真实代码，请将其简化为

```
return (a == 186 && b == 133); 
```

如果这不是真正的代码，则可能存在另一个不返回的路径（如果粘贴时出错），或者确实存在编译器错误或限制。在某一时刻，停止问题困扰着您，而且代码太复杂，编译器无法理解。

在后一种情况下，我会放置一个

```
throw new RuntimeException(
   String.format("should never get here (a = %d, b = %d) !",a,b)); 
```

在最后的声明中。

这使编译器感到高兴，并且不会为不应该发生的情况引入“未定义”返回值，或者如果确实发生了，则没有考虑过。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T12:41:59.773

Java 要求每个路径都返回一个值。编译器无法判断循环是否会返回路径。如果你的代码是这样的：

```
public boolean add(){
for(int i=0;i<100;i++)
    if(i==5000)
    return true;} 
```

函数 add 不会返回值。相反，会发生错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T20:43:07.260

哦，是的，我的错，我很抱歉这是一个愚蠢的问题，当我发布这个时是凌晨 5 点。我想出了我的问题的答案。如果你犯了和我一样的愚蠢错误，这里就是修复

```
public boolean clockFactCheck(int a, int b){
    for (int i = 0; i <= 276; i++){
        for (int h = 0; h <= 55; h++){
            if (a == i + 186 && b == h + 133){
                return true;
            }
        }
    }
    return false;
} 
```

# c++ - 将 [out] 数组传递给 C++ 函数

> ID：14521551
> 
> 赞同：0
> 
> 时间：2013-01-25T12:10:30.727
> 
> 标签：c++, arrays, c++-cli, managed-c++, out-parameters

我有一个 C++\CLI 托管类方法，它取出一个数组。我想将这个输出数组传递给底层 C++ 函数，该函数采用向量< char >&。这个 C++ 函数用值填充数组。

```
bool MyLib::GetBits([Out] array<unsigned char>^ %bits)
{
  MyCppClass->GetBits(bits); // ????  
  // ERROR: C2664: cannot convert from 'cli::array<Type> ^' to 'std::vector<_Ty> &'
}

'GetBits' is declared as MyCppClass::GetBits(vector<char> &bits); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:29:07.860

您有什么理由期望`array<unsigned char>^ %bits`可以转换为`vector<char> &bits`?

您可以尝试修改`MyCppClass`，添加一个返回对静态向量的引用的成员。在 GetBits 中，您可以清除它，并遍历将字符添加到其中的位。您可能还会发现[C++ 中的编组](http://msdn.microsoft.com/en-us/library/bb384865.aspx)很有用。

# matlab - 为什么随着特征数量的增加，使用 svm 时分类精度会降低

> ID：14521552
> 
> 赞同：2
> 
> 时间：2013-01-25T12:10:36.863
> 
> 标签：matlab, classification, svm

我正在使用`libsvm`图像分类。为什么当我使用更多特征进行分类时，我的预测准确度会降低？不应该增加吗？我的数据集大小固定为 1600 用于训练和 400 用于测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T12:47:29.357

因为附加特征对于分离特征空间中的类可能根本没有用。准确性不一定与特征数量相关。

包含许多不良特征可能会导致您的 SVM 学习数据中的噪声，从而损害准确性。

例如，如果您的额外功能看起来像这样（为了清楚起见使用 2D 图）：

![class1 = 红色，class2 = 蓝色](../Images/4a06202b12239e54a626e88f829464e7.png)

那么分离（在这种情况下）两个类将不是一个很好的功能。例如，如果 SVM 只在这种模式上进行训练，那么它就不能很好地预测未来点的类别。但是，您的数据集中可能存在如下所示的特征： ![class1 = 红色，class2 = 蓝色](../Images/7d329428d7d4e21158dee082b7eb8e05.png)

像这样的功能在分离这两个类时非常有用。

# haskell - 如何运行 Haskell WebSockets 库的官方示例

> ID：14521553
> 
> 赞同：0
> 
> 时间：2013-01-25T12:10:43.177
> 
> 标签：haskell, websocket

根据这个主题：[https](https://stackoverflow.com/questions/14494922/examples-of-websocket-usage-in-haskell) ://stackoverflow.com/questions/14494922/examples-of-websocket-usage-in-haskell我有我的第一个问题。为什么 WebSockets 库的官方示例不能在我的机器上运行？

```
import Data.Char (isPunctuation, isSpace)
import Data.Monoid (mappend)
import Data.Text (Text)
import Control.Exception (fromException)
import Control.Monad (forM_, forever)
import Control.Concurrent (MVar, newMVar, modifyMVar_, readMVar)
import Control.Monad.IO.Class (liftIO)
import qualified Data.Text as T
import qualified Data.Text.IO as T
import Network.WebSockets

meow :: TextProtocol p => WebSockets p ()
meow = forever $ do
    msg <- receiveData
    sendTextData $ msg `T.append` ", meow."

main :: IO ()
main = runServer "0.0.0.0" 8000 meow 
```

我得到：

```
ciembor@freedom ~> ghc hchat.hs; and ./hchat
[1 of 1] Compiling Main             ( hchat.hs, hchat.o )

hchat.hs:15:35:
    Couldn't match expected type `Text' with actual type `[Char]'
    In the second argument of `T.append', namely `", meow."'
    In the second argument of `($)', namely `msg `T.append` ", meow."'
    In a stmt of a 'do' block: sendTextData $ msg `T.append` ", meow."

hchat.hs:18:33:
    Couldn't match expected type `Request -> WebSockets p0 ()'
                with actual type `WebSockets p1 ()'
    In the third argument of `runServer', namely `meow'
    In the expression: runServer "0.0.0.0" 8000 meow
    In an equation for `main': main = runServer "0.0.0.0" 8000 meow 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:22:30.820

第一个错误是因为您没有启用`OverloadedStrings`语言扩展。没有它， a`"xyz"`是 a `String`，但`Data.Text.append`需要两个`Text`s 作为参数。添加

```
{-# LANGUAGE OverloadedStrings #-} 
```

到模块的顶部来修复那个。

第二个错误是因为第三个参数`runServer`必须有类型

```
Request -> WebSockets p0 () 
```

但你给了它一个`WebSockets p1 ()`. 如果你想传递一个动作，你必须将它提升为一个函数，

```
main = runServer "0.0.0.0" 8000 $ const meow 
```

会编译（它是否会工作[做你想做的]是我无法回答的问题，它只会忽略所有请求并总是做同样的事情）。

# mysql - SQLite 迁移从 schema.rb 文件中删除 'add_index' 和 'add_foreign_key'

> ID：14521563
> 
> 赞同：0
> 
> 时间：2013-01-25T12:11:15.913
> 
> 标签：mysql, ruby-on-rails, sqlite, rails-migrations, foreigner

我在同一个 Rails 项目上使用 SQLite3 和 MySQL，但在两台不同的计算机上。我注意到，`schema.rb`当我运行所有迁移时生成的 which 在两种环境中看起来都不同。当我在 SQLite3 环境中运行迁移时，会从文件中删除以下**语句。**`schema.rb`

```
add_index "places", ["user_id"], :name => "places_user_id_fk"
add_foreign_key "places", "users", :name => "places_user_id_fk" 
```

请注意，我使用了通过和扩展迁移的[外国人 gem](https://github.com/matthuhiggins/foreigner)。`add_foreign_key``remove_foreign_key`

以下是与问题相关的迁移和模型：

```
# 20130123004056_create_places.rb
class CreatePlaces < ActiveRecord::Migration
  def change
    create_table :places do |t|
      t.string :name
      t.string :location
      t.integer :user_id
      t.timestamps
    end
  end
end 
```

...

```
# 20130123234250_add_foreign_key.rb
class AddForeignKey < ActiveRecord::Migration
  def change
    add_foreign_key(:places, :users)
  end
end 
```

...

```
# user.rb
class User < ActiveRecord::Base
  has_many :places
end 
```

...

```
# place.rb
class Place < ActiveRecord::Base
  belongs_to :user    
end 
```

**问题：**如何定义 SQLite3 和 MySQL 都可以处理的`users`关系`places`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:15:40.853

自述`foreigner` [文件](https://github.com/matthuhiggins/foreigner/blob/master/README.rdoc)明确指出

> 支持以下适配器：
> 
> *   sqlite **（外键方法是无操作的）**

所以你的 SQLite 数据库没有设置外键约束，**因为`foreigner`不支持它们**。当`db/schema.rb`从 SQLite 数据库生成时，这就是没有指定外键的原因。

[Rails Guide on Migrations](http://guides.rubyonrails.org/migrations.html)多次提到外键

> 如果您需要执行特定于您的数据库的任务（例如创建外键约束），那么该`execute`方法允许您执行任意 SQL

甚至还有一个[如何添加/删除外键](http://guides.rubyonrails.org/migrations.html#using-the-up-down-methods)的示例。

在`foreigner`刚开始使用 Rails 时使用过，我建议你将它从你的`Gemfile`或者

1.  根本不要使用外键；只需在 ActiveRecord 关联中指定您的级联
2.  使用`execute`上面链接示例中描述的迁移方法*（并确保所有不同的 RDBMS 支持您在`execute`方法中输入的任何内容）*
3.  如果您坚持使用外键，请停止在开发中使用 SQLite。无论如何，您不会在生产中使用 SQLite，并且已经在其他机器上使用更好的 RDMS（MySQL，“更好”，因为它具有**您**正在寻找的外键支持）。

正如您在评论中[指出](https://stackoverflow.com/a/1884841/356895)的那样，SQLite 缺乏在创建表后添加外键的支持；它们不能通过 Rails 中的未来迁移添加。**我个人建议您使用选项 1 或 3**`execute` ，因为通过迁移中的命令创建满足 SQLite 限制同时在其他 RDMS 上具有相同最终结果的解决方案将更加困难。

# facebook-c#-sdk - 带有 facebook c# sdk 的控制台应用程序以提取 facebook 页面的指标

> ID：14521564
> 
> 赞同：0
> 
> 时间：2013-01-25T12:11:28.257
> 
> 标签：facebook-c#-sdk, console-application

我正在编写一个控制台应用程序，它每天午夜运行并提取我的 Facebook 页面的所有见解。我正在使用 Facebook C# SDK 与 Facebook 连接。我的问题是为了从 Facebook 获取数据，我需要有访问令牌，但要做到这一点，我必须经过身份验证。由于它是一个控制台应用程序和自动执行过程，我无法提示插入 Facebook 凭据是否有任何方法可以使身份验证方法自动进行，或者是否有任何其他方法来获取访问令牌？

我按照以下步骤获取访问令牌

1.  [对https://graph.facebook.com/oauth/authorize?client_id=My_AppId&scope=Manage_page&redirect_uri=http://www.facebook.com/connect/login_success.html](https://graph.facebook.com/oauth/authorize?client_id=My_AppId&scope=Manage_page&redirect_uri=http://www.facebook.com/connect/login_success.html)的HTTP 请求应该返回授权码。但这会返回我用户被拒绝的错误，因为我尚未进行身份验证。

2.  然后我使用上面的授权码来获取访问令牌

    ```
    var fbClient = new FacebookClient();
    dynamic accessToken = fbClient.Get("oauth/access_token", new {
        client_id = appId,
        client_secret = appSecret,
        redirect_uri = "http://www.facebook.com/connect/login_success.html",
        code = code
    }); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:34:28.587

如果您只打算检索有关您自己页面的信息，我知道的最简单的方法是使用 PowerShell 和[http://facebookpsmodule.codeplex.com](http://facebookpsmodule.codeplex.com)。您只需要调用一次 New-FBConnection（这将显示一个 Facebook 对话框，您可以在其中输入您的凭据），该模块将自动缓存您的加密访问令牌。然后安排一个脚本在午夜运行，它会自动读取令牌。

请注意，最近对 Facebook 的更改可能会导致“用户”（而不是“页面”）的令牌在 60 天后过期。FacebookPSModule 还包含对自动更新令牌的支持。

# ruby-on-rails - 当存根对象时，RSpec 讨厌名为 :public 的 Rails 范围

> ID：14521568
> 
> 赞同：6
> 
> 时间：2013-01-25T12:11:50.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec-rails

只是我还是全局 RSpec 行为，当我命名我的 rails 模型范围`:public`时，从这个模型初始化对象，然后存根这个对象 Rspec 失败

```
class DocumentName < ActiveRecord::Base

  scope :public,    lambda{where( public: true) }  #line 3
end 
```

没什么特别的，Rails 应用程序有效

```
DocumentName.public  # => [ #DN, #DN, #DN... ]
# SELECT `document_names`.* FROM `document_names` WHERE `document_names`.`public` = 1 
```

但是 RSpec 失败了

```
describe DocumentName do
  let(:resource){DocumentName.new}  
  it do
     resource.stub(:name).and_return('foo')   #line 16
     resource.save.should be true
  end
end

 Failure/Error: resource.stub(:name).and_return('foo')
 ArgumentError:
   wrong number of arguments (1 for 0)
 # ./app/models/document_name.rb:3:in `block in <class:DocumentName>'
 # ./spec/models/document_name_spec.rb:16:in `block (2 levels) in <top (required)>' 
```

...而且最有趣的是，在这种情况下，我没有在那个范围内做任何事情。

但是，如果我将此范围命名为`:public`例如`:are_public`：

```
class DocumentName < ActiveRecord::Base
  scope :are_public,    lambda{where( public: true) }
end 
```

...一切都通过 O_O

```
Rails 3.2.11 (but same thing on any 3.2.x)
Ruby ruby-2.0.0-rc1 ( but same for any ruby-1.9.3) 
rspec-core (2.12.2)
rspec-expectations (2.12.1)
rspec-mocks (2.12.1)
rspec-rails (2.12.2) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T12:15:55.840

`private`并且`public`是 Ruby 的访问修饰符：

```
class User
  private
  def some_private_method
  end

  public
  def some_public_method
  end
end 
```

虽然它们看起来像关键字，但它们实际上是方法调用。覆盖它们并不是一个好主意。

# php - 请参阅 Eclipse 中的 PHP 日志文件以及指向源代码的链接

> ID：14521577
> 
> 赞同：0
> 
> 时间：2013-01-25T12:12:28.203
> 
> 标签：php, eclipse, logging, console, stack-trace

我正在寻找一种解决方案来查看 eclipse 中的日志文件（当前来自 php 代码），并且能够单击堆栈跟踪的一行，该行将打开堆栈跟踪所涉及的源文件。

例如，如果日志文件包含这样的行： `E:\PROGRAM\wamp\www\QUAL\plugins\tctools\inc\commondb.class.php:27 userErrorHandlerNormal()`

我希望能够点击这一行，eclipse 应该`commondb.class.php`在`line 27`.

真的可以节省很多时间！！！

欢迎任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T12:11:12.613

我找到的最佳解决方案是使用 Zend Studio 浏览器工具栏在 DEBUG 模式下运行浏览器。因此，服务器错误变得可圈可点。

# android - 如何在android的相同布局中添加单个滚动到视图和列表视图

> ID：14521583
> 
> 赞同：0
> 
> 时间：2013-01-25T12:12:34.933
> 
> 标签：android, listview, scrollview

我有一种情况，在这种情况下，一个视图包含上部的图像视图和下部的列表视图，当我们滚动它时它只是滚动列表视图部分，但我必须同时滚动整个视图和单个滚动。
我使用了列表视图的添加标题功能，但我必须将 imageview 和 listview 的单独 xml 文件放在一个 xml 文件中。我该怎么做..

```
<ViewFlipper
    android:id="@+id/viewFlipper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/header_relativelayout" >

    <!-- //settings  First view  Setting -->

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:paddingLeft="3dp"
        android:paddingRight="3dp" >

        <LinearLayout
            android:id="@+id/first_view"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:weightSum="3" >

                <TextView
                    android:id="@+id/textView_chooseteam"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="d"
                    android:textColor="@color/gray"
                    android:textSize="10sp"
                    android:visibility="invisible" />

                <ImageView
                    android:id="@+id/imageView_cbk"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:adjustViewBounds="true"
                    android:scaleType="fitXY"
                    android:src="@drawable/cbk_btn" />

                <TextView
                    android:id="@+id/textView_chooseteam"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="d"
                    android:textColor="@color/gray"
                    android:textSize="20sp"
                    android:visibility="invisible" />

                <ImageView
                    android:id="@+id/imageView_cfb"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:adjustViewBounds="true"
                    android:scaleType="fitXY"
                    android:src="@drawable/cfb_btn" />

                <TextView
                    android:id="@+id/textView_chooseteam"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="d"
                    android:textColor="@color/gray"
                    android:textSize="20sp"
                    android:visibility="invisible" />

                <ImageView
                    android:id="@+id/imageView_mlb"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:adjustViewBounds="true"
                    android:scaleType="fitXY"
                    android:src="@drawable/mlb_btn" />

                <TextView
                    android:id="@+id/textView_chooseteam"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="d"
                    android:textColor="@color/gray"
                    android:textSize="10sp"
                    android:visibility="invisible" />
            </LinearLayout>

            <TextView
                android:id="@+id/textView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="3dp"
                android:text="@string/Games_Placebet_chooseteam"
                android:textColor="@color/gray"
                android:textSize="10sp"
                android:textStyle="bold"
                android:visibility="invisible" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="horizontal"
                android:weightSum="3" >

                <TextView
                    android:id="@+id/textView_chooseteam"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="d"
                    android:textColor="@color/gray"
                    android:textSize="10sp"
                    android:visibility="invisible" />

                <ImageView
                    android:id="@+id/imageView_nba"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:adjustViewBounds="true"
                    android:scaleType="fitXY"
                    android:src="@drawable/nba_btn" />

                <TextView
                    android:id="@+id/textView_chooseteam"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="d"
                    android:textColor="@color/gray"
                    android:textSize="20sp"
                    android:visibility="invisible" />

                <ImageView
                    android:id="@+id/imageView_nfl"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:adjustViewBounds="true"
                    android:scaleType="fitXY"
                    android:src="@drawable/nfl_btn" />

                <TextView
                    android:id="@+id/textView_chooseteam"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="d"
                    android:textColor="@color/gray"
                    android:textSize="20sp"
                    android:visibility="invisible" />

                <ImageView
                    android:id="@+id/imageView_nhl"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:adjustViewBounds="true"
                    android:scaleType="fitXY"
                    android:src="@drawable/nhl_btn" />

                <TextView
                    android:id="@+id/textView_chooseteam"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="d"
                    android:textColor="@color/gray"
                    android:textSize="10sp"
                    android:visibility="invisible" />
            </LinearLayout>

            <TextView
                android:id="@+id/textView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="3dp"
                android:text="@string/Games_Placebet_chooseteam"
                android:textColor="@color/gray"
                android:textSize="12sp"

                android:visibility="invisible" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/middle_line"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/first_view"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/small_line"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:adjustViewBounds="true"
                android:scaleType="fitXY"
                android:src="@drawable/small_line" />

            <TextView
                android:id="@+id/textView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="3dp"
                android:text="f"
                android:textColor="@color/gray"
                android:textSize="5sp"

                android:visibility="invisible" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/list_header_layout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/middle_line" >

            <TextView
                android:id="@+id/textView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="dd"
                android:textColor="@color/gray"
                android:textSize="14sp"
                android:visibility="invisible" />

            <TextView
                android:id="@+id/list_header"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Recent Activities"
                android:textColor="@color/gray"
                android:textSize="12sp" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/list_header_layout" >

            <ExpandableListView
                android:id="@id/android:list"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/first_view"
                android:cacheColorHint="#00000000"
                android:childDivider="@android:color/black"
                android:divider="@android:color/black"
                android:fadingEdge="none"
                android:scrollingCache="false" >
            </ExpandableListView>

        </LinearLayout> 
    </RelativeLayout>
    //settings  Second view  Setting

    <RelativeLayout
        android:id="@+id/progressrelative"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:layout_gravity="center_vertical|center_horizontal"
        android:gravity="center_vertical|center_horizontal" >

        <ProgressBar
            android:id="@+id/progressbar2"
            style="@android:style/Widget.ProgressBar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:layout_gravity="center_vertical|center_horizontal"
            android:gravity="center_vertical|center_horizontal"
            android:indeterminate="true"
            android:visibility="gone" />

        <ListView
            android:id="@+id/channellist"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/frameLayout"
            android:layout_below="@+id/header_relativelayout"
            android:cacheColorHint="#00000000"
            android:divider="@android:color/transparent"
            android:fadingEdge="none"
            android:scrollingCache="false" >
        </ListView>
    </RelativeLayout>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/betView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:paddingTop="8dp" >

            <TextView
                android:id="@+id/textView_chooseteam"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="3dp"
                android:text="@string/Games_Placebet_chooseteam"
                android:textColor="@color/gray"
                android:textSize="16sp"
                android:textStyle="bold" />

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:orientation="vertical" >

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/gm4_headar_parch"
                    android:gravity="center" >

                    <TextView
                        android:id="@+id/button_date_time"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:paddingLeft="8dp"
                        android:text="Saturday, 10/27/2012 at 01:00 PM"
                        android:textColor="@color/white"
                        android:textSize="13sp" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="bottom"
                    android:layout_marginTop="-5dp"
                    android:background="@drawable/gm4_1white_bg"
                    android:orientation="vertical"
                    android:paddingLeft="5dp"
                    android:paddingRight="5dp" >

                    <RelativeLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:orientation="horizontal"
                        android:paddingLeft="5dp"
                        android:paddingRight="5dp" >

                        <TextView
                            android:id="@+id/button_hometeam"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_centerVertical="true"
                            android:clickable="true"
                            android:text="Denver Broncos"
                            android:textColor="@color/gray"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <ImageView
                            android:id="@+id/imageView_button_hometeam"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_alignParentRight="true"
                            android:src="@drawable/game_click_btn" />
                    </RelativeLayout>

                    <View
                        android:layout_width="fill_parent"
                        android:layout_height="2dp"
                        android:layout_marginTop="8dp"
                        android:background="@drawable/recent_bigpatch_line" />

                    <RelativeLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:orientation="horizontal"
                        android:paddingLeft="5dp"
                        android:paddingRight="5dp" >

                        <TextView
                            android:id="@+id/button_visitorteam"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_centerVertical="true"
                            android:text="SD Chargers"
                            android:textColor="@color/gray"
                            android:textSize="16sp"
                            android:textStyle="bold" />

                        <ImageView
                            android:id="@+id/imageView_button_visitorteam"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_alignParentRight="true"
                            android:src="@drawable/game_unclick_btn" />
                    </RelativeLayout>
                </LinearLayout>
            </LinearLayout>

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:layout_marginTop="5dp"
                android:text="Betting Amount"
                android:textColor="@color/gray"
                android:textSize="16sp"
                android:textStyle="bold" />

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:orientation="vertical" >

                <RelativeLayout
                    android:id="@+id/upper_relative"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/gm4_headar_parch"
                    android:orientation="horizontal"
                    android:paddingLeft="8dp"
                    android:paddingRight="8dp" >

                    <TextView
                        android:id="@+id/textView_placebet_balance"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="8dp"
                        android:paddingTop="2dp"
                        android:text="@string/Games_Placebet_balance"
                        android:textColor="@android:color/white"
                        android:textSize="16sp"
                        android:textStyle="bold" />

                    <!--
                     <TextView
                    android:id="@+id/textView_placebet"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:paddingRight="32dp"
                    android:paddingTop="4dp"
                    android:text="$"
                    android:textColor="@android:color/white"
                    android:textStyle="bold" />
                    -->

                    <TextView
                        android:id="@+id/textView_placebet_dollar"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentRight="true"
                        android:paddingRight="10dp"
                        android:paddingTop="4dp"
                        android:text="100"
                        android:textColor="@android:color/white"
                        android:textStyle="bold" />
                </RelativeLayout>

                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_marginTop="-5dp"
                    android:background="@drawable/gm4_1white_bg"
                    android:orientation="vertical" >

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center"
                        android:layout_marginTop="10dp" >

                        <TextView
                            android:id="@+id/button_placebet_name"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="10dp"
                            android:text="Denver Broncos"
                            android:textColor="@color/gray"
                            android:textSize="16sp" />
                    </LinearLayout>

                    <View
                        android:layout_width="match_parent"
                        android:layout_height="2dp"
                        android:layout_marginTop="10dp"
                        android:background="@drawable/recent_bigpatch_line" />

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center"
                        android:layout_marginRight="3dp"
                        android:layout_marginTop="10dp" >

                        <Button
                            android:id="@+id/button_placebet_up_counter"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginLeft="10dp"
                            android:background="@drawable/pg_2_up_arrow_btn" />

                        <Button
                            android:id="@+id/textview_placebet_counter_digipanel"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:layout_marginLeft="10dp"
                            android:background="@drawable/counter_digitaldisplay"
                            android:textColor="#109EE6" />

                        <Button
                            android:id="@+id/button_placebet_counter_down"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center_vertical"
                            android:layout_marginLeft="10dp"
                            android:background="@drawable/pg_2_down_arrow_btn" />
                    </LinearLayout>
                </LinearLayout>
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:orientation="vertical" >

                <Button
                    android:id="@+id/button_betaganist"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal|center_vertical"
                    android:background="@drawable/bet_against_btn_new"
                    android:gravity="center_horizontal|center_vertical"
                    android:paddingBottom="5dp"
                    android:text="@string/Games_Placebet_betaganist"
                    android:textColor="@color/white"
                    android:textSize="18sp"
                    android:textStyle="bold" />

                <Button
                    android:id="@+id/button_placebet"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="5dp"
                    android:background="@drawable/placebet_btn_new"
                    android:gravity="center_horizontal|center_vertical"
                    android:paddingBottom="5dp"
                    android:text="Place Bet"
                    android:textColor="@android:color/white"
                    android:textSize="18sp"
                    android:textStyle="bold" />
            </LinearLayout>
        </LinearLayout>
    </ScrollView>

    <ListView
        android:id="@+id/friendlist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/frameLayout"
        android:layout_below="@+id/header_relativelayout"
        android:cacheColorHint="#00000000"
        android:divider="@android:color/transparent"
        android:fadingEdge="none"
        android:scrollingCache="false" >
    </ListView>
</ViewFlipper> 
```

这是一个xml文件的代码，我在其中使用了viewflipper，并且我添加了视图，因此第一个视图是上侧listview的图像视图，当我们单击图像视图时，下一个视图将翻转等等.. .但在第一个视图中它只滚动列表视图部分我需要用单个滚动滚动整个视图。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:44:19.320

问题是，混合两个卷轴的所有可能方法都不能很好地产生（据我所知），设置标题 xml 可能是最好的方法。试图找到解决这种情况的方法。

# php - if else else 构造

> ID：14521585
> 
> 赞同：0
> 
> 时间：2013-01-25T12:12:37.180
> 
> 标签：php, database

我对这里定义的 PHP 类不是 100% 满意：[mysqli](https://github.com/opencart/opencart/blob/master/upload/system/database/mysqli.php)

我去掉了一些胆量来缩短它，并在运行时得到一个解析错误。

```
<?php

function query($x) 
{
if ($x > 8) {
    return 'greater than eight!';   
    } else {
    return true;
}
} else {
    exit();
    }
}
print query(7); 
```

（我认为）与原版的构造相同，不是吗？当然除了签名和方法体。我以前没有遇到过 if else else 子句，它至少在逻辑上对我来说“感觉不对”。此外，我的代码不会编译。也许你可以让我直截了当？

你有任何关于如何使用它的例子吗？

其次，从原始类 - $resource 变量在哪里或如何进入它？在什么情况下对象会被传递一个 $resource 变量？

我的客户代码可能是：

```
$db = new MySQLi;
$db->query("SELECT * FROM my_table"); 
```

但我不明白 $resource 是如何发挥作用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:22:33.187

您有第二个 else 构造，它应该如下所示：

```
if($x > 8) {
    // your if(true) code
} else {
    // your if(false) code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:25:57.693

缺少一个 if else 块，用 ** 突出显示，这就是你得到解析器错误，因为同样是你的代码的问题

```
<?php
final class MySQLi {
private $mysqli;

public function __construct($hostname, $username, $password, $database) {
    $this->mysqli = new mysqli($hostname, $username, $password, $database);

    if ($this->mysqli->connect_error) {
        trigger_error('Error: Could not make a database link (' . $this->mysqli->connect_errno . ') ' . $this->mysqli->connect_error);
    }

    $this->mysqli->query("SET NAMES 'utf8'");
    $this->mysqli->query("SET CHARACTER SET utf8");
    $this->mysqli->query("SET CHARACTER_SET_CONNECTION=utf8");
    $this->mysqli->query("SET SQL_MODE = ''");
}

public function query($sql) {
    $result = $this->mysqli->query($sql);

    if ($this->mysqli->errno) {
    //$mysqli->errno
    }

        if (is_resource($resource)) {
            $i = 0;

            $data = array();

            while ($row = $result->fetch_object()) {
                $data[$i] = $row;

                $i++;
            }

            $result->close();

            $query = new stdClass();
            $query->row = isset($data[0]) ? $data[0] : array();
            $query->rows = $data;
            $query->num_rows = $result->num_rows;

            unset($data);

            return $query;  
        } else {
            return true;
        }
    ***} else {
        trigger_error('Error: ' . mysql_error($this->link) . '<br />Error No: ' . mysql_errno($this->link) . '<br />' . $sql);
        exit();
    }***
}

public function escape($value) {
    return $this->mysqli->real_escape_string($value);
}

public function countAffected() {
    return $this->mysqli->affected_rows;
}

public function getLastId() {
    return $this->mysqli->insert_id;
}   

public function __destruct() {
    $this->mysqli->close();
}
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:29:07.413

我假设您正在尝试做一些不同的事情，但我希望这有助于解释您如何将三个条件联系在一起。

```
function query($x) {
    if ($x > 8) { // If $x is greater than 8
        return 'greater than eight!';   
    } else if ($x < 8) { // If $x is lower than 8
        return true;
    } else {
        return "The number is 8!";
    }
}

print query(7); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:30:56.953

您的代码中缺少某些内容。如果你有人运行你的代码。

> 解析错误：语法错误，第 8 行出现意外的 T_ELSE

所以你的函数应该如下所示

```
function query($x) 
{
    if ($x > 8) 
    {
     //runs when $x value is greater than 8
     return 'greater than eight!';   
    } 
    else 
    {
     // if the condition didnt meet, according to my knowledge you should return false here 
     return true;
    }

    exit();
}

print query(7); 
```

如果你想要一个 else if，

```
if (condition)
  {
  code to be executed if condition is true;
  }
else if (condition)
  {
  code to be executed if condition is true;
  }
else
  {
  code to be executed if condition is false;
  } 
```

# android - 本机库 .so.XY 在运行时无法链接

> ID：14521588
> 
> 赞同：2
> 
> 时间：2013-01-25T12:12:49.490
> 
> 标签：android, shared-libraries, native

我已经为 Android 构建了 FFmpeg，并希望在这样的应用程序中使用它：

```
System.loadLibrary("avutil");
System.loadLibrary("swscale");
System.loadLibrary("avcodec");
System.loadLibrary("avformat"); 
```

构建输出是`lib*.so`,`lib*.so.MAJOR`和`lib*.so.MAJOR.MINOR.OTHER`文件。共享对象内部是引用`lib*.so.MAJOR`，例如`libswscale.so.2`requires `libavutil.so.52`。

现在，如果我将`*.so`文件放在项目的`libs`文件夹中（更准确地说`libs/armeabi-v7a`），我当然会得到

> 01-25 12:06:40.270：E/AndroidRuntime(2905)：java.lang.UnsatisfiedLinkError：无法加载库：link_image [1936]：107 无法为“libswscale.so”加载所需的库“libavutil.so.52” （load_library[1091]：找不到库'libavutil.so.52'）

但是，如果我将`*.so.MAJOR`文件放在文件`libs`夹中以解决链接异常，则从 Eclipse 运行应用程序时会出现相同的错误。而且我注意到如果我创建一个 APK，文件甚至不会被导出！**那么如何告诉 Eclipse 将`*.so.MAJOR`文件打包为库呢？**或者，我如何以它们相互引用`*.so`而不是相互引用的方式编译共享对象`*.so.MAJOR`？

编辑：似乎没有办法[自动](http://en.usenet.digipedia.org/thread/12874/9875/)`*.so.XYZ`打包文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:28:59.300

没有找到`.so.MAJOR`按照我的意愿获取文件的解决方案。在我看来，Android 构建系统只`*.so`自动复制文件并且不允许其他文件扩展名。
所以我重写了 FFmpeg makefile 让共享对象通过`libXXX.so`.

在，我在下面的食谱中`library.mak`替换了`$(SHFLAGS)`

```
$(SUBDIR)$(SLIBNAME_WITH_MAJOR): $(OBJS) $(SUBDIR)lib$(NAME).ver
    $(SLIB_CREATE_DEF_CMD)
    $$(LD) $(SHFLAGS) $(LDFLAGS) $$(LD_O) $$(filter %.o,$$^) $(FFEXTRALIBS)
    $(SLIB_EXTRA_CMD) 
```

所以第三行看起来像

```
$(subst $$(@F),$(SLIBNAME),$(SHFLAGS)) 
```

对于那些不理解替换的人（像我之前一样），请查看[这个直接相关的答案](https://stackoverflow.com/a/14522778/245706)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T06:55:57.243

实际上，您不需要这样做。您需要做的是编辑配置文件。并找出这个：

```
SLIBNAME_WITH_MAJOR='$(SLIBNAME).$(LIBMAJOR)'
LIB_INSTALL_EXTRA_CMD='$$(RANLIB) "$(LIBDIR)/$(LIBNAME)"'
SLIB_INSTALL_NAME='$(SLIBNAME_WITH_VERSION)'
SLIB_INSTALL_LINKS='$(SLIBNAME_WITH_MAJOR) $(SLIBNAME)' 
```

将它们修改为：

```
SLIBNAME_WITH_MAJOR='$(SLIBPREF)$(FULLNAME)-$(LIBMAJOR)$(SLIBSUF)'
LIB_INSTALL_EXTRA_CMD='$$(RANLIB) "$(LIBDIR)/$(LIBNAME)"'
SLIB_INSTALL_NAME='$(SLIBNAME_WITH_MAJOR)'
SLIB_INSTALL_LINKS='$(SLIBNAME)' 
```

# .net-4.5 - 从 .Net 4.5 控制台应用程序对 AD FS 进行身份验证

> ID：14521589
> 
> 赞同：6
> 
> 时间：2013-01-25T12:12:51.013
> 
> 标签：.net-4.5, wif, adfs

我正在使用 AD FS 对 .NET 4.5 应用程序中的用户进行身份验证。我找不到任何从控制台应用程序请求/接收令牌并将该令牌转换为 ClaimsPrinciple 的示例。我能找到的唯一示例是基于 WCF 配置的，我真的很想看到可以以最简单的形式执行此操作的实际代码。

我已经安装了 AD FS，并认为我已经将其配置为可以接收请求。我创建了一个依赖方，给它一个密钥并为其分配了几个声明。

谁能指出我正确的方向或我现在需要在我的控制台应用程序中做什么才能向它发送身份验证请求？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T13:04:46.063

最简单的方法是使用 .NET 4.5 中的 WSTrustChannelFactory。

请参阅此处的 RequestSecurityToken 方法：http: [//leastprivilege.com/2012/11/16/wcf-and-identity-in-net-4-5-external-authentication-with-ws-trust/](http://leastprivilege.com/2012/11/16/wcf-and-identity-in-net-4-5-external-authentication-with-ws-trust/)

获得令牌后，通过相应的令牌处理程序运行它以将其转换为 ClaimsPrincipal。

我在 github 上的库中有辅助方法和绑定： [https ://github.com/thinktecture/Thinktecture.IdentityModel.45](https://github.com/thinktecture/Thinktecture.IdentityModel.45)

（查找 WCF 文件夹、WSTrustClient 和 Extensions 文件夹）。

# java - Camel CBR 和 POJO 财产检查

> ID：14521595
> 
> 赞同：3
> 
> 时间：2013-01-25T12:13:12.503
> 
> 标签：java, apache-camel, enterprise-integration

我有一个路由`Order`实例的骆驼路由：

```
from("direct:start")
    .choice()
        .when(order.getProduct() == Product.Widget)
            .to("direct:widgets")
        .when(order.getProduct() == Product.Fizz)
            .to("direct:fizzes")
        .otherwise()
            .to("direct:allOtherProducts"); 
```

因此，如果某个特定`Order`是 a 的订单`Widget`，则需要将其路由到`direct:widgets`等。

我对在每种`when(...)`方法中放入什么感到窒息。我所拥有的不是合法的 Camel DSL 语法，用于说明我想要完成的事情。

所以我问：**我在每种`when(...)`方法中添加了什么来完成我正在寻找的那种路由？**提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:28:33.807

您应该将 order.getProduct() 的值放在标题中并像这样使用它::

```
from("direct:start")
        .choice()
            .when(header("product").isEqualTo(Product.Widget))
                .to("direct:widgets")
            .when(header("product").isEqualTo(Product.Fizz))
                .to("direct:fizzes")
            .otherwise()
                .to("direct:allOtherProducts"); 
```

编辑 ：

您可以使用一个过程（即：在 DSL 中）：

```
<route id="foo">
    <from uri="direct:start"/>
    <process ref="beanProcessor" />
    <choice>
        <when>
            ...
        </when>
        <when>
            ...
        </when>
        <otherwise>
            ...
        </otherwise>
    </choice> 
```

豆声明：

```
<bean id="beanProcessor" class="MyProcessor" /> 
```

班上 ：

```
public class MyProcessorimplements Processor {

     @Override
     public void process(Exchange exchange) throws Exception {
         exchange.getIn().setHeader("headerName", yourOrderObject);
     }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T17:54:58.377

我认为 Order 类型是消息体。所以在Java DSL中你可以做

```
from("direct:start")
  .choice()
     .when(body().isInstanceOf(MyOrder.class)).to("direct:myOrder")
     .when(body().isInstanceOf(MyOtheOrder.class)).to("direct:myOtherOrder")
     .otherwise().to("direct:other"); 
```

# php - 在 Facebook 上 2 人之间提供数据

> ID：14521603
> 
> 赞同：0
> 
> 时间：2013-01-25T12:13:34.483
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql, facebook-timeline

是否有可能获取一个人在 Facebook 上另一个人的时间轴上发布的数据？

如果是，我该怎么做？我需要使用 FQL 查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:12:30.417

这将为您提供其他人使用 FQL 在活动用户的时间线上发布的内容：

```
SELECT actor_id, created_time, message, attachment FROM stream 
   WHERE source_id=me() AND actor_id != me() 
```

# java - 在Java中的类之间交谈？

> ID：14521608
> 
> 赞同：0
> 
> 时间：2013-01-25T12:14:08.447
> 
> 标签：java, android, class, static

我正在为 Android 应用程序创建一个 UDP 消息系统。为此，我创建了一个带有发送、接收、解析线程的单独类。该类必须仅实例化一个-即。只有一个UDP服务器！

现在，在 Android 中，您的设计中有多个活动，它们基本上是不同的类。我想使用这些不同类的 UDP 通信接口。但目前 UDP CI 在主类中实例化一次。因此我无法从不同的类访问对象。此外，CI 解析模块将不得不根据消息更改整个应用程序的设置/UI/...。

所以：

1.  如果我不需要超过 1 个对象，我是否需要实例化？
2.  将类中的所有内容都设为静态是一个不错的选择吗？
3.  在某些时候，我需要反过来说（obj->main）。我应该使用回调还是只将必要的资源从 main 传递到 CI 并在 CI 中处理它们？

我希望我描述的问题足够清楚。如果有任何问题，请询问我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:19:58.053

要么将其存储在应用程序上下文中（这是一个单例）。或者在服务中进行连接，让每个活动根据需要检索数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:22:54.490

似乎您的不同类需要一个 Or 的实例，正式地说依赖于`UDP Cl`. 为了解决这个问题，我们有两个选择 -

*   使用依赖注入框架，例如[guice](http://code.google.com/p/google-guice/)在不同的类中自动注入这样的依赖
*   老派方式 -为所有需要 UDP Cl 的类创建一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)，可以执行类似获取实例的操作`UDP Cl``UDBCl.getInstance()``UDP Cl`

我个人更喜欢方法 1，因为它对单元测试很友好。方法2会更快解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:55:03.917

在第二个类中创建第一个类的实例。此外，您可以使用捆绑包在类之间传输数据。

# java - 如何为liferay ide设置java EE版本

> ID：14521617
> 
> 赞同：1
> 
> 时间：2013-01-25T12:14:39.757
> 
> 标签：java, jakarta-ee, liferay, portlet, liferay-ide

我使用的是 java 6 SE，但是现在，当我使用 wsdl2java 时，它使用 EE 版本的 javax.xml.ws.Service 生成类，所以我已经下载并安装了 java 6 EE，但我不确定我应该在哪里更改我的 portlet 项目中从 SE 到 EE 的 java 版本。

我安装了一些 tomcats 和 glassfishes 服务器，包括从 oracle 网站下载的一个作为“java ee sdk”包（http://www.oracle.com/technetwork/java/javaee/downloads/java-ee-sdk-6u3-downloads -439814.html）。我仍然不知道在哪里可以找到使用 EE api 而不是 SE api 的 jre。我用谷歌搜索应该有目录 glassfish3/jdk，但没有这样的。

我能找到的唯一 JRE 是 java 6 和 7 SE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:55:05.483

终于找到了如何做到这一点。首先，您需要下载打包为 jar 的 java EE API（空签名，没有方法代码体）。它可以从 maven 中央仓库下载。

[http://search.maven.org/](http://search.maven.org/) + javaee.api 给出[http://search.maven.org/remotecontent?filepath=javax/javaee-api/6.0/javaee-api-6.0.jar](http://search.maven.org/remotecontent?filepath=javax/javaee-api/6.0/javaee-api-6.0.jar)的结果（我是使用 jre 6）。

现在我把那个jar 放到我的portlet 项目中。在日食中：

```
project settings -> Java Build Path -> Libraries -> Add External JARs... 
```

然后在 java ee api jar 进入项目后，您必须将其移至 SE JRE 上方：

```
project settings -> Java Build Path -> Order and Export 
```

就是这样。您可以使用 EE API 而不会出现任何错误。请记住，此 jar 仅提供空 API。此类应用程序必须部署到 java EE 驱动的服务器，很可能您希望将其部署到 glassfish（tomcat 默认使用 SE，而不是 EE，但是您可以设置 tomcat 以使用 EE）。

如果您像我一样需要 tomcat + EE（因为 liferay IDE 不能与 glassfish 一起使用），请查看该项目[http://tomee.apache.org/downloads.html](http://tomee.apache.org/downloads.html)

注意：我还没有使用它，所以我无法确认它是否适用于 liferay 和 liferay IDE。

# awk - 未打印 awk 部分匹配

> ID：14521623
> 
> 赞同：3
> 
> 时间：2013-01-25T12:15:18.220
> 
> 标签：awk, match, partial

```
awk -F"," -v var=$test '$1 ~ /^var$/{print}' alpha.txt 
```

我尝试用我的实际变量输入对我的 var 进行硬编码，我发现这段代码有效。但是，当我尝试例如`/^ppl$/`搜索苹果的部分匹配时，它不会显示。有人可以就如何将变量解析到命令中给我一些指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:22:04.597

尝试这个：

```
awk -F"," -v var=$test '$1 ~ "^"var"$"' alpha.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:10:47.473

如果您在开始*和*结束时锚定比赛，只需使用`==`

```
awk -F"," -v var=$test '$1 == var' alpha.txt 
```

除非`$test`包含正则表达式，在这种情况下@Kent 有正确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:19:00.127

```
awk -F"," '$1 ~ /^'"$test"'$/{print}' alpha.txt 
```

# pdf - libreoffice draw的pdf导出中圆圈周围的假点

> ID：14521626
> 
> 赞同：8
> 
> 时间：2013-01-25T12:15:30.240
> 
> 标签：pdf, draw, libreoffice

当我在 LibreOffice 中绘制一个小圆圈并将其导出为 pdf 时，我会在圆圈周围得到一些额外的点。尤其是在圆圈的左上和右下外角。在此处查看示例 PDF：[https](https://dl.dropbox.com/u/233922/example-dots-circle.pdf) ://dl.dropbox.com/u/233922/example-dots-circle.pdf 或此处的屏幕截图：

![在此处输入图像描述](../Images/fc3134d8b663ad3611e35dabe1725071.png)

你知道我怎么能摆脱这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-04T07:46:18.310

这是[老错误](https://www.libreoffice.org/bugzilla/show_bug.cgi?id=37559)，尚未修复。我可以在 Linux 和 Windows 下重现它。我的版本：LibreOffice 4.1.0。

1.  在 LO Impress 或 LO Draw 中创建新文件。
2.  画椭圆（或圆角矩形，或微笑等）。
3.  设置线宽，例如 5 毫米（以获得更好的视图）。
4.  导出为 PDF。

我提出两种解决方法：

1.  导出到 MS PowerPoint 并在其中导出：/
2.  打印为 PDF（使用例如[cups-pdf](http://www.cups-pdf.de/)）。

广告 1) 你必须有 MS PP，而且你的图形可能看起来很糟糕。

广告 2）我使用[cups-pdf](http://www.cups-pdf.de/)和 PDF 看起来非常好，但是：

*   文本存储为位图图形（小矩形）！不使用 OCR 就无法提取文本。
*   您必须使用列表中的纸张格式（A4、A0、Letter 等）。如果您使用非标准化的纸张格式，则必须使用更大的格式，并且您会在 PDF 上看到白条。但是，您可以使用[pdfcrop](http://pdfcrop.sourceforge.net/)并删除白条。
*   PDF 始终是水平方向的。如果您垂直打印，您可以使用[pdf270](http://freecode.com/projects/pdfjam)命令行工具旋转 pdf。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T07:25:17.007

在 Adob​​e Reader（至少 11 版）-> 转到“首选项”=>“页面显示”=> 取消选中“增强细线”

Libre Office 似乎添加了 0 大小的点，几乎没有可见性。当检查“增强细线”时，Adobe Reader将使这些点可见。

最良好的祝愿，

帕特里克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T10:52:37.007

另一个对我有用的“解决方法”：没有大纲。您可以将 Draw 中的线条样式设置为“无”，并且只使用平面实体对象。

PS：我在 Draw 中也看到了这些点，而不仅仅是在导出的 pdf 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-30T03:38:39.093

一个简单的解决方法是使用白色对象“修补”Libreoffice Draw 中的点——例如，具有白色区域和白色轮廓的正方形。请注意，您在 Draw 中看不到点。因此，您首先使用原始绘图生成 pdf，查看点在 pdf 中出现的位置，返回到 Draw，并在需要的地方添加一个白色补丁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-22T02:15:03.990

类似于[https://stackoverflow.com/users/1797782/dzwiedziu-nkg](https://stackoverflow.com/users/1797782/dzwiedziu-nkg)的答案，我需要一个多步骤的过程来解决这个问题。

脚步：

1.  在 pdf 查看器中打开文件（Ubuntu 中的文档查看器。）
2.  从查看器将 pdf 打印到文件（也是 pdf）。我假设这也使用 cups-pdf，因为它会修改图像大小。（我不介意，因为无论如何我都会使用下一步来消除所有边距。）
3.  使用 pdfcrop 删除实际内容边界框周围的所有额外空间。如果你只给 pdfcrop 一个参数，它不会覆盖旧文件，所以使用相同的参数两次：

    ```
    $ pdfcrop monkey.pdf monkey.pdf 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-06T18:05:19.947

在自己寻找解决方法时，我发现这个名为[awk 的脚本](https://github.com/Sv3n/odg2epsfix)`odg2epsfix`将修复导出的 EPS 不再包含那些鬼点。

[我在这个启动板错误条目](https://bugs.launchpad.net/ubuntu/+source/openoffice.org/+bug/689349)中偶然发现了它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-22T22:25:10.150

在 LibreOffice 预导出中已修复。

脚步：

1.  右键单击 LibreOffice 中的圆圈并选择“线”
2.  在“线条”页面上，将“角样式”设置为“-none-”
3.  保存文档并导出为 PDF。

没有删除线增强，点就消失了。我的仍然显示在预览中，但不打印。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-16T18:15:29.320

LO 6.0 中仍然存在该错误。但是，如果您在“图形样式”的“线条”选项卡中将“帽子样式”设置为“扁平”，这些点将从屏幕和导出的 pdf 中消失。

# actionscript-3 - 将动作脚本从外部 .as 移动到时间线

> ID：14521628
> 
> 赞同：0
> 
> 时间：2013-01-25T12:15:46.110
> 
> 标签：actionscript-3, flash, flashdevelop, flash-cs5.5

我想问如何制作一个外部脚本.as 可以移动到时间轴上？？我不了解as3 ..请帮助我:(

这是我要移至时间线的脚本

```
 package {
    import flash.display.*;
    import flash.events.*; 
    import flash.text.*;
    import flash.net.URLRequest;

    //import fl.display.ProLoader;

    dynamic public class bismillah extends MovieClip
    {
        public var ba:MovieClip;
        public var scorebox:TextField;
        public var alif:MovieClip;
        public var dal:MovieClip;
        public var tong:MovieClip;
        public var book:MovieClip;
        public var objArray:Array;
        public var targetArray:Array;
        public var objek:MovieClip;
        public var original_x:Number;
        public var original_y:Number;
        public var score:int;
        public var i:int;
        public var tombol1:MovieClip;
        var singleLoader:Loader = new Loader();

        public function bismillah()
        {
            stop();
            addFrameScript(0, frame1);
            tombol1 = Object(root).tombol1 as MovieClip;
            tombol1.addEventListener(MouseEvent.MOUSE_UP, tes);
            return;

        }// end function

        public function tes(param : MouseEvent) : void
        {
            var req:URLRequest = new URLRequest("dragdragon.swf");
            //singleLoader.unload();
            singleLoader.load(req);
            addChild(singleLoader);

        }

        public function down(param1:MouseEvent) : void
        {
            objek = MovieClip(param1.target);
            original_x = objek.x;
            original_y = objek.y;
            addChild(objek);
            objek.startDrag();
            stage.addEventListener(MouseEvent.MOUSE_UP, stageUp);
            return;
        }// end function

        public function stageUp(param1:MouseEvent) : void
        {
            stage.removeEventListener(MouseEvent.MOUSE_UP, stageUp);
            objek.stopDrag();
            if (objek.dropTarget)
            {
                if (objek.dropTarget.parent.name == "book")
                {
                if ((objek == alif) || (objek == ba)){  //yg perlu diganti
                    objek.x = objek.dropTarget.parent.x;
                    objek.y = objek.dropTarget.parent.y + 50;
                    objek.removeEventListener(MouseEvent.MOUSE_DOWN, down);
                    objek.buttonMode = false;
                    var _loc_2:Number;
                    objek.scaleY = 0.4;
                    objek.scaleX = _loc_2;
                    objek.alpha = 0.6;
                    score+=5;
                    scorebox.text = "Score: " + score;
                }
                else {
                objek.x = objek.dropTarget.parent.x;
                    objek.y = objek.dropTarget.parent.y + 50;
                    objek.removeEventListener(MouseEvent.MOUSE_DOWN, down);
                    objek.buttonMode = false;
                    var _loc_2:Number;
                    objek.scaleY = 0.4;
                    objek.scaleX = _loc_2;
                    objek.alpha = 0.6;
                    score-=2;
                    scorebox.text = "Score: " + score;}
                }

                else if (objek.dropTarget.parent.name == "tong")
                {
                    if (objek == dal) { //yg perlu diganti
                    objek.x = objek.dropTarget.parent.x;
                    objek.y = objek.dropTarget.parent.y + 50;
                    objek.removeEventListener(MouseEvent.MOUSE_DOWN, down);
                    objek.buttonMode = false;
                    var _loc_2:Number;
                    objek.scaleY = 0.4;
                    objek.scaleX = _loc_2;
                    objek.alpha = 0.6;
                    score+=5;
                    scorebox.text = "Score: " + score;
                }
                else {
                    objek.x = objek.dropTarget.parent.x;
                    objek.y = objek.dropTarget.parent.y + 50;
                    objek.removeEventListener(MouseEvent.MOUSE_DOWN, down);
                    objek.buttonMode = false;
                    var _loc_2:Number;
                    objek.scaleY = 0.4;
                    objek.scaleX = _loc_2;
                    objek.alpha = 0.6;
                    score-=2;
                    scorebox.text = "Score: " + score;
                    }
                }
            }
            else
            {
                objek.x = original_x;
                objek.y = original_y;
            }
            return;
        }// end function

        public function returnToOriginalPosition() : void
        {
            return;
        }// end function

        function frame1()
        {
            objArray = [alif, dal, ba]; //yg perlu diganti
            targetArray = [book, tong];
            score = 0;
            scorebox.text = "Score: " + score;
            i = 0;
            while (i < objArray.length)
            {

                objArray[i].buttonMode = true;
                objArray[i].addEventListener(MouseEvent.MOUSE_DOWN, down);
                i++;
            }
            return;
        }// end function

    }

} 
```

请问有人可以帮我把代码移到时间线上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:39:51.320

1.  在 fla 库中创建新的 MovieClip
2.  选择“为 ActionScript 导出”复选框
3.  在输入字段“Class”中输入您的 as 文件的名称
4.  将 *.as 文件放在与 fla 文件相同的文件夹中。

不要忘记在新的 MovieClip - *ba*、*scorebox*等中创建所有嵌套剪辑。

# xml - 如何设置正确的 xpath

> ID：14521629
> 
> 赞同：1
> 
> 时间：2013-01-25T12:15:48.857
> 
> 标签：xml, xpath, kettle

我想在 Keetle Spoon 中生成列表输出：

系统名称，产品名称

例子：

```
JOHN Adobe Reader XI (11.0.01)
JOHN D3DX10
JOHN Google Drive
JOHN Adobe Flash Player 11 ActiveX
JOHN Adobe Flash Player 11 Plugin 
```

来自 xml 文件：

```
<computer>
 <system name="JOHN" />
 <operatingsystem name="Microsoft Windows 7 Professional " servicepack="Service Pack 1" />
 <windowscomponents>
  <component name="Windows Media Player (from Start Menu and Desktop)" class="2200" classname="" level="1" />
 </windowscomponents>
 <installedapplications>
  <msiapplication productname="Adobe Reader XI (11.0.01)" vendor="Adobe Systems Incorporated" version="11.0.01" installdate="20130111" />
  <msiapplication productname="D3DX10" vendor="Microsoft" version="15.4.2368.0902" installdate="20121219" />
  <msiapplication productname="Google Drive" vendor="Google, Inc." version="1.7.4018.3496" installdate="20130108" />
  <regapplication productname="Adobe Flash Player 11 ActiveX" version="11.5.502.146" />
  <regapplication productname="Adobe Flash Player 11 Plugin" version="11.5.502.146" />
 </installedapplications>
</computer> 
```

我使用设置： `Loop XPath /computer`

领域：

1.  `system/@name`
2.  `installedapplications/msiapplication/@productname`
3.  `installedapplications/regapplication/@productname`

但我只得到行：

```
JOHN Adobe Reader XI (11.0.01)
JOHN Adobe Flash Player 11 ActiveX 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:54:52.543

我对水壶勺的所有了解都来自于回答您之前的问题，但我相信您应该使用以下内容：

```
Loop XPath /computer/installedapplications/* 
```

字段

```
../../system/@name
@productname 
```

# asp.net-mvc - 使用组合 URL 参数映射路线

> ID：14521630
> 
> 赞同：2
> 
> 时间：2013-01-25T12:15:49.803
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, url-routing

用户可以下载位于`PriceInformations`带有指定文档类型的子文件夹的文件夹中的价格信息 PDF，例如：

```
/PriceInformations/Clothes/Shoes.pdf
/PriceInformations/Clothes/Shirts.pdf
/PriceInformations/Toys/Games.pdf
/PriceInformations/Toys/Balls.pdf 
```

考虑在 Controller 中执行以下操作`Document`以下载这些 PDF：

```
// Filepath must be like 'Clothes\Shoes.pdf'
public ActionResult DownloadPDF(string filepath)
{
    string fullPath = Path.Combine(MyApplicationPath, filepath);

    FileStream fileStream = new FileStream(fullPath, FileMode.Open, FileAccess.Read);

    return base.File(fileStream, "application/pdf");
} 
```

要获取 PDF 文档，我的客户希望 URL 类似于：

```
/PriceInformations/Clothes/Shoes.pdf 
```

我可以轻松地为这种情况创建一个重载函数：

```
public ActionResult DownloadPDF(string folder, string filename)
{
    return this.DownloadPDF(Path.Combine(folder, filename);
} 
```

并像这样映射它

```
routes.MapRoute(
    "DownloadPriceInformations",
    "DownloadPriceInformations/{folder}/{filename}",
    new
    {
        controller = "Document",
        action = "DownloadPDF"
    }); 
```

但我很好奇是否可以在没有重载函数的情况下工作并将这种情况映射到`RegisterRoutes`Global.asax 中，以便能够从多个参数中创建一个参数：

```
routes.MapRoute(
    "DownloadPriceInformations",
    "DownloadPriceInformations/{folder}/{filename}",
    new
    {
        controller = "Document",
        action = "DownloadPDF",
        // How to procede here to have a parameter like 'folder\filename'
        filepath = "{folder}\\{filename}"
    }); 
```

问题变得更长了，但我想确保你得到我想要的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:52:57.603

抱歉，ASP.NET 路由不支持此功能。如果您想要路由定义中的多个参数，则必须向控制器操作添加一些代码以组合文件夹和路径名称。

另一种方法是使用包罗万象的路线：

```
routes.MapRoute(
    "DownloadPriceInformations",
    "DownloadPriceInformations/{*folderAndFile}",
    new
    {
        controller = "Document",
        action = "DownloadPDF"
    }); 
```

并且特殊的 {*folderAndFile} 参数将包含初始静态文本之后的所有内容，包括所有“/”字符（如果有）。然后，您可以在您的操作方法中接收该参数，它将是类似“clothes/shirts.pdf”的路径。

我还应该注意，从安全角度来看，您需要绝对确定只会处理允许的路径。如果我将 /web.config 作为参数传入，您必须确保我无法下载存储在您的 web.config 文件中的所有密码和连接字符串。

# hibernate - Hibernate select manyToMany 与包含列表所有元素的条件关联

> ID：14521649
> 
> 赞同：0
> 
> 时间：2013-01-25T12:16:41.707
> 
> 标签：hibernate, many-to-many, hql, hibernate-criteria

我有两个休眠实体 A 和 B。A 和 B 之间存在多对多关联。

```
public class A {
  @ManyToMany(targetEntity=B.class)
  @JoinTable(name = "AB",
    joinColumns = @JoinColumn(name="A_FK"),
    inverseJoinColumns = @JoinColumn(name="B_FK"))  
  private Set<B> collectionOfB = new HashSet<B>();
  // ...
}

public class B {
  // no reference to A
} 
```

我有一个 B 元素的数组 {b1, b2,... ,bn}。

我需要搜索与上面列表的所有 B 元素相关联的所有 A 元素（{b1，b2，...，bn} 的所有元素都应该在 collectionOfB 中）。

所以我必须做这样的事情：

```
select * from A as a where {b1, b2,... ,bn} in a.collectionOfB 
```

但这是不可能的:-(

有谁知道如何处理这个问题？

谢谢

卡姆兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:15:05.020

如果您的映射是正确的，您可以这样做：

```
 sql="select a.* from A a where ...";
    for (Long bId: myListOfBcriteria) {
        sql += " and " + bId+ " in (select ab.b_fk from AB ab where ab.a_fk=a.id)";
    } 
```

在休眠中。

```
 select a from A join a.collectionOfB as ab where ab.id in (:collectionOfB) 
```

如果你打算使用 ORM，你应该使用它，除非你绝对不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:42:29.867

经过一番调查，我发现解决我的问题的最简单方法是通过`session.createSQLQuery(sql)`.

和：

```
sql="select a.* from A a where ...";
for (Long bId: myListOfBcriteria) {
  sql += " and " + bId+ " in (select ab.b_fk from AB ab where ab.a_fk=a.id)";
} 
```

哪里`myListOfBcriteria={b1, b2,... ,bn}`。

也许它不是很“好”，但效果很好:-)

我希望这可以帮助一些人，

卡姆兰

# selenium - 使用 selenium webdriver 在 Internet Explorer 中配置代理

> ID：14521650
> 
> 赞同：0
> 
> 时间：2013-01-25T12:16:42.783
> 
> 标签：selenium, internet-explorer-9, webdriver, selenium-webdriver

我想在 webdriver 的帮助下在 Internet Explorer 中设置一些代理设置。

目前我正在使用此代码：

```
System.setProperty("webdriver.ie.driver", "Path to IEDriverServer.exe");
    Proxy proxy = new Proxy();
    proxy.setProxyAutoconfigUrl("proxyhost:port");
    DesiredCapabilities capability = new DesiredCapabilities(); 
    capability.setBrowserName(DesiredCapabilities.internetExplorer().getBrowserName());
    capability.setCapability(CapabilityType.PROXY, proxy); 
    driver=new InternetExplorerDriver(capability); 
```

但除了在控制台上给出此消息外，它什么也不做：

```
org.openqa.selenium.browserlaunchers.WindowsProxyManager backupRegistrySettings
INFO: Backing up registry settings... 
```

我已经完成了与区域相关的设置以及使用 IEDriver 所需的所有设置。

我可以通过 webdriver 使用 Internet Explorer，而无需使用代理配置。

**我在 Windows 7 上使用 IE9，IEDriver.exe 版本为 2.28.0。**

有人可以建议我解决这个问题。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:59:36.173

可能的解决方法：在 IE 中手动设置 PAC 文件。只需启动 IEdriver。不好的是，如果你用 IE 上网，你会一直切换它。

# c# - Entity Framework 5 - 仅选择实体 IsActive 的实体

> ID：14521657
> 
> 赞同：4
> 
> 时间：2013-01-25T12:16:57.863
> 
> 标签：c#, asp.net-mvc-3, entity-framework, entity-framework-5

使用 Code First 方法，我创建了许多从`IConcurrent`具有属性的接口继承的不同实体，`IsActive`例如：

```
public class Currency : IConcurrent
{
    public string CurrencyId { get; set; }

    public string Description { get; set; }

    public bool IsActive { get; set; }
} 
```

每次我选择实体时，我发现自己总是必须包含一个条件子句，例如这个真实的基本示例：

```
db.Currencies.Where(c => c.IsActive); 
```

我的问题是，是否有可能拦截/挂钩，`DbContext`以便我的 LINQ 查询将始终返回`IsActive == true`继承 IConcurrent 接口的实体，以避免`.Where(c => c.IsActive)`每次都显式添加？

到目前为止，我已经研究了可能的覆盖方法，`DbContext`其中没有一个似乎符合要求。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:35:38.603

模型优先方法支持条件映射，但代码优先方法不直接支持。您可以通过在 DBContext 中创建类似于以下内容的属性来解决此问题；

```
public IQueryable<Currency> ActiveCurrencies 
{
    get 
    {
        db.Currencies.Where(c => c.IsActive);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T12:44:29.117

您可以对方法使用过滤[`Set<>`](http://msdn.microsoft.com/en-us/library/gg696521%28v=vs.103%29.aspx)来获取活动实例，类似于：

```
public IQueryable<T> GetActive<T>() where T : class, IConcurrent
{
   return Set<T>().Where(e => e.IsActive);
} 
```

该方法可以包含在继承该类的`DbContext`类中，或者您可以将其作为扩展方法，例如：

```
public static DbContextExtensions
{
  public static IQueryable<T> GetActive<T>(this DbContext context) 
    where T : class, IConcurrent
  {
     return context.Set<T>().Where(e => e.IsActive);
  }
} 
```

# html - 如何在表格单元格“高度：100％”内制作一个div

> ID：14521660
> 
> 赞同：3
> 
> 时间：2013-01-25T12:17:01.243
> 
> 标签：html, css, cell, css-tables

我有一个使用表格单元格的布局。我知道，使用表格已经过时了，但是我需要它来使每一行的高度相同**，而不使用它们的高度的绝对值**

请参阅[此小提琴](http://jsfiddle.net/rob_st/NDMTH/)或[此草稿](http://blog-n.de/wordpress-testsite/wp-content/themes/applike/dev-sidebar.html)。

我需要`.wrapper`div，才能`.infobox`在 Firefox 中正确显示。在此之前，我将`.infobox`设置为 100% 高度（具有绝对位置），这在 chrome 上运行良好，因为 parenting`td`元素具有`position:relative`.

我希望将悬停效果应用于整个表格单元格，但我很想知道如何。我只想对高度和宽度使用相对值（如 em 或 %），以使布局具有响应性/流畅性。

*编辑：*好的，使用@OneTrickPony 的想法，我尝试将它们包装在另一个“table-row”-div 中。那么我现在如何使两个“table-cell”-div 具有相同的高度，`vertical-align: middle`但**没有**为“table-row”-div 指定绝对高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:47:53.693

还有另一种选择，但它是否适合您的项目取决于您要支持的浏览器。

[http://caniuse.com/#search=flexbox](http://caniuse.com/#search=flexbox)

我稍微简化了您的标记并完全删除了表格。

```
<div id="pictures">
    <article class="entry picture">
        <div class="entry picture">
            <img class="picture" src="./images/150x150.jpg" width="150" height="150"></img>
        </div>
        <div class="entry picture infobox">
            <a href="#" class="entry">
                <h3 class="entry picture headline">contents_0 alpha headline</h3>
                <div class="view picture">
                    <span class="comments_amount">5</span>
                    <span class="articlenk info">Bild zeigen</span>
                </div>
            </a>
        </div>
    </article>

    <article class="entry picture"><div class="picture wrapper">
        <div class="entry picture">
            <img class="picture" src="./images/150x71.jpg" width="150" height="71"></img>
        </div>
        <div class="entry picture infobox">
            <a href="#" class="entry">
                <h3 class="entry picture headline">contents_0 beta headline</h3>
                <div class="view picture">
                    <span class="comments_amount">5</span>
                    <span class="pictures info">Bild zeigen</span>
                </div>
            </a>
        </div></div>
    </article>
</table> 
```

用于此的 CSS 非常简单，但我省略了前缀：

```
div#pictures {
    display: flex;
    flex-flow: row wrap;
}

article {
    flex: 1 1 50%;
    box-sizing: border-box; /* optional */
    position: relative;
}

div.infobox {
    position: absolute;
    bottom: 0;
} 
```

[http://jsfiddle.net/NDMTH/1/](http://jsfiddle.net/NDMTH/1/)

图/figcaption 在这里可能是比文章更合适的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:45:00.157

好的，所以我认为实际上**没有办法在****不定义绝对值**的情况下将两个（或更多）div 的高度设置为相等的值。作为一种解决方法，我编写了这个小脚本，它完成了这项工作：

```
$(window).load(function() { /* Important because the script has to "wait" until the content (images) has been loaded */
  $('.picture-row').each(function() {
    var rowHeight = 0;
    $(this).children('.picture.item').each(function() {
      if ($(this).outerHeight() > rowHeight) {
        rowHeight = $(this).outerHeight();
      }
    });
    $(this).children('.picture.item').each(function() {
      $(this).height(rowHeight + 'px');
    });
  });
}); 
```

# javascript - 使用javascript更改标签属性的值

> ID：14521663
> 
> 赞同：0
> 
> 时间：2013-01-25T12:17:15.877
> 
> 标签：javascript, fieldset

我有 Drupal 生成的以下 HTML

```
<fieldset id="webform-component-lunchset" class="webform-component-fieldset form-wrapper" style="">
    <div id="webform-component-lunchset--lunch" class="form-item webform-component webform-component-radios webform-container-inline" style="">
        ...Radio Button div tags here
    </div>
</fieldset>
<fieldset id="webform-component-dinnerset" class="webform-component-fieldset form-wrapper" style="display: none;">
    <div id="webform-component-dinnerset--dinner" class="form-item webform-component webform-component-radios webform-container-inline" style="display: none;">
        ...Radio Button div tags here
    </div>
</fieldset> 
```

我的意图是允许用户根据他开始预订时的一天中的时间来选择用餐时间。为此，我注意到我必须更改 style="display: none;" 对于我要隐藏的字段集，而 style="" 对于我要显示的字段集。我有以下 Javascript 语句来更改 DIV 标记的样式属性，但它似乎不起作用。任何帮助，将不胜感激。

```
window.onload = (function() { 
    var today = new Date();
    var day = today.getDay();
    var hour = today.getHours();
    var lunchtime1 = document.getElementById('webform-component-lunchset');
    var lunchtime2 = document.getElementById('webform-component-lunchset--lunch');
    var dinnertime1 = document.getElementById('webform-component-dinnerset');
    var dinnertime2 = document.getElementById('webform-component-dinnerset--dinner');
    if (hour >= 15 && hour < 22) {
        lunchtime1.style="display: none;";
        lunchtime2.style="display: none;";
        dinnertime1.style=" ";
        dinnertime2.style=" ";
        sundaytime1.style="display: none;";
    }
}); 
```

不知道为什么它不起作用，将不胜感激任何帮助。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:20:50.467

当您想使用对`style`节点的引用的属性时，您正在使用 DOM API。DOMElement 对象有一个名为 的属性，`style`它*也*必须是一个对象。所以要么写：

```
lunchtime1.style.display = 'none'; 
```

或者使用该`setAttribute`方法 - 这样您就可以一次性设置整个样式属性：

```
lunchtime1.setAttribute('style','display: block; background-color: #F00;'); 
```

这应该够了吧...

*注意：*
正如 Tim Down 所指出的，旧的 IE 的`setAttribute`表现不如像样的浏览器，所以第一种方法是最可靠的。我正在调查此事。例如，IE 不允许您编写`someNode.setAttribute('onclick', 'clickHandler()');`。
我也遇到过似乎只影响某些元素（通常是表单元素）的问题，但是在设置样式属性时，我不能确定......要么你不能设置某些属性，要么你可能无法在某些元素上设置任何属性。无论如何...一旦我对此有所了解，我将更新此答案。（目前没有 Windows 框，所以没有 IE 来测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:19:23.483

```
dinnertime1.style.display="inline"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:19:36.760

我认为`style="<string>"`是不可能的。你必须写`lunchtime1.style.display = "none"`。Style 是一个“完整”的 js 对象。

无论如何，有理由不使用 jQuery 吗？

# javascript - 访问对象数组中的值

> ID：14521680
> 
> 赞同：0
> 
> 时间：2013-01-25T12:18:14.083
> 
> 标签：javascript

> **可能重复：**
> [我有一个嵌套的数据结构/JSON，我怎样才能访问一个特定的值？](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-i-access-a-specific-value)

我是 JavaScript 初学者，并在 Javascript 中创建了以下对象数组：

```
var values = [[{
       x_value: {
           x_axis: 1,
           y_axis: 1.8445
       },
       y_value: {
           x_axis: 1,
           y_axis: 1.2445
       },
       z_value: {
           x_axis: 1,
           y_axis: 1.1445
       }
   }],[{
       x_value: {
           x_axis: 2,
           y_axis: 1.35
       },
       y_value: {
           x_axis: 2,
           y_axis: 1.245
       },
       z_value: {
           x_axis: 22,
           y_axis: 1.345
       }
   }],[{
       x_value: {
           x_axis: 3,
           y_axis: 1.087
       },
       y_value: {
           x_axis: 3,
           y_axis: 1.125
       },
       z_value: {
           x_axis: 3,
           y_axis: 1.95
       }
   }]]; 
```

我想访问 x_axis 的值，比如 values[0] 中的 y_value，我应该使用什么方法？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:19:40.940

由于您将对象放在另一个数组中（仅保存对象），因此您需要进行类似的操作来获取值：

```
var x_axis = values[0][0].y_value.x_axis,
    y_axis = values[0][0].y_value.y_axis; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:32:31.310

如果可能的话，没有充分的理由将每个对象包装在另一个数组中，就像你正在做的那样：

```
 var yourCode = [[{}],[{}]];
 var better = [{},{}]; 
```

如果您可以更改数据，只需确保您的脚本接收一个包含所有对象的数组（如`var better`上面的格式）。
按照现在的情况，您还必须访问内部数组的第一个索引：

```
var x = values[0][0].x_axis;
var y = values[0][0].y_axis; 
```

如果您更改格式以适合我的建议：

```
var x = values[0].x_axis; 
```

请注意，对象还支持方括号表示法，如果属性名称/键是变量的值，这非常有用：

```
var getProp = 'x_axis';
console.log(values[0][0].getProp);//undefined, looks for property called getProp
console.log(values[0][0][getProp]);//returns value of x_axis property, variables value is used 
```

够了...如果可以的话，请使用第二种格式，真的。它不仅需要更少的输入，而且无论开销多么小，数组都不是免费的。您正在创建完全不相关的第二个对象（instanceof Array）。

# matlab - 具有重叠搜索结果的 MATLAB strrep 函数

> ID：14521682
> 
> 赞同：4
> 
> 时间：2013-01-25T12:18:22.550
> 
> 标签：matlab

MATLABs`strrep`做的事情与我预期的不同：

```
strrep('ababab', 'bab', 'bbb') 
```

我希望字符串被增量替换，因此 first`abbbab`和 than `abbbbb`。但是，MATLAB 会返回`abbbbbb`（注意最后的第 6 个附加`b`部分）。

MATLAB 在幕后做什么？查找索引然后在每个索引处插入新字符串？完全不同的东西？

而且，最重要的是，我如何归档预期结果？

* * *

准确地说，上面的例子只是减少额外错误来源的最小例子。在现实世界中，我想替换整数向量中的序列：

```
strrep([1 0 1 0 1 0],  [0  1 0], [0 0 0]) 
```

并得到

```
1 0 0 0 0 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:40:46.477

[Matlab 的文档`strrep`](http://www.mathworks.com/help/matlab/ref/strrep.html)告诉你你需要知道什么。从页面底部的提示部分：

> 在替换字符串之前，strrep 会在 origStr 中查找 oldSubstr 的所有实例，就像 strfind 函数一样。对于重叠模式，strrep 执行多次替换。请参阅示例部分中的最后一个示例。

最后一个示例比较 和 的`strrep`行为`regexprep`。我认为[`regexprep`](http://www.mathworks.com/help/matlab/ref/regexprep.html)会在字符串上做你想做的事。要处理数字，您可以使用 转换为字符串`char(vector)`，在其上运行`regexprep`，然后使用 转换回数字`double(string)`。

# php - 从 json 代码点火器中的控制器检索数据

> ID：14521684
> 
> 赞同：0
> 
> 时间：2013-01-25T12:18:33.697
> 
> 标签：php, javascript, json, codeigniter, jquery

```
 $(document).ready(function(){

        $('#bill_no').blur(function(){

            if( $('#bill_no').val().length >= 3 )
                {
                  var bill_no = $('#bill_no').val();
                  getResult(bill_no); 
                }
            return false;
        })
        function getResult(billno){
            var baseurl = $('.hiddenUrl').val();
          //  $('.checkUser').addClass('preloader');
            $.ajax({
                url : baseurl + 'returnFromCustomer_Controller/checkBillNo/' +   billno,
                cache : false,
                dataType: 'json',
                success : function(response){
                    $(".text").prepend(response.text);
                }
            })
        }
    }) 
```

我的控制器

```
 function checkBillNo($billno){
    $this->load->model('returnModel');
    $query = $this->returnModel->checkBillNo($billno);

        header('Content-Type: application/x-json; charset=utf-8');
       echo(json_encode($this->returnModel->sale($billno)));

} 
```

从控制器获取值后，如何在跨度类“文本”中打印值..我已经签入了萤火虫，在其中的响应选项卡中我成功获得了结果，但是如何在跨度类的视图页面中打印..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:39:42.900

你需要得到这样的响应`objet.parameter`：

```
success : function(response)
 {
    $(".text").html(response.result);
 } 
```

因为正如您在评论中所说：

> 这是响应 {"result":"142"}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:28:27.530

```
 success : function(response)
 {
    $(".text").html(response);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:31:07.967

您可以使用段号从 url 检索参数

```
function checkBillNo($billno)
{
    $this->load->model('returnModel');

    $query = $this->returnModel->checkBillNo($billno);

    $billno =   $this->uri->segment(3);
    $billno_results  = $this->returnModel->sale($billno)

    //header('Content-Type: application/x-json; charset=utf-8');
    echo    json_encode($billno_results);
} 
```

$query 在这里有什么用。你也不需要设置标题类型

还有你的 ajax

```
$.ajax({
    url : baseurl + 'returnFromCustomer_Controller/checkBillNo/' +   billno,
    cache : false,
    dataType: 'json',
    success : function(response){
        $(".text").prepend(response);
    }
}) 
```

看你不需要 response.text 简单的打印响应

# c# - 在 WinRT 平台中使用 C# 导入电子表格并操作数据

> ID：14521685
> 
> 赞同：0
> 
> 时间：2013-01-25T12:18:37.153
> 
> 标签：c#, excel, windows-runtime

我正在开发一个主要导入电子表格的应用程序，它读取数据并对其进行操作。我整天在谷歌上搜索，找不到从 excel 文件中读取数据的方法。如果我能得到一些帮助来完成所需的工作，那就太好了。

信息：我正在**使用 C#/XAML 开发 Windows Store 应用程序。**

参考读取 excel 的库/应用程序：

[http://www.componentone.com/SuperProducts/SpreadNET/](http://www.componentone.com/SuperProducts/SpreadNET/)

[http://www.greatwindowsapps.com/app/tile-charts](http://www.greatwindowsapps.com/app/tile-charts)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:32:22.283

如果您寻找免费的开源解决方案，我在几个项目中使用了[来自 codeplex](http://exceldatareader.codeplex.com/) lib 的 exceldatareader，非常简单易用。

它仅取决于 SharpZipLib，我认为您只需将两个项目重新编译为可移植库即可使其在 WinRT 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T06:17:59.087

如果您正在处理`.xlsx`文件，则始终可以[从 NuGet 获得](http://nuget.org/packages/DocumentFormat.OpenXml/)[Open XML SDK](https://www.microsoft.com/en-us/download/details.aspx?id=5124)。[这里](http://msdn.microsoft.com/en-us/library/cc850837%28v=office.14%29.aspx)有一堆教程可以帮助您入门。不幸的是，非常好的包装库[ClosedXML](https://closedxml.codeplex.com/)不适用于 Windows 应用商店应用程序。

还有一个可用的商业组件，[来自 Syncfusion 的 XlsIO](http://www.syncfusion.com/products/winrt/controls)，您可以尝试一下。我没有任何第一手经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:22:07.530

我在 MSDN 博客中发布了同样的问题

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/4fce4765-2d05-4a2b-8d0a-6219e87f3307](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/4fce4765-2d05-4a2b-8d0a-6219e87f3307)

**VT.CrazyAppy**提供的代码 可以很好地读取和解析简单的电子表格文件。代码片段是静态的，我正在努力使其更通用。完成后将发布代码。

注意：代码将提供一种机制来读取简单的电子表格文件并将它们作为 K,V 对返回。您可以修改它以满足您的需要。

# ios - 从 UIWebView 中的链接打开 iOS6 Apple Maps 应用程序

> ID：14521689
> 
> 赞同：5
> 
> 时间：2013-01-25T12:18:50.740
> 
> 标签：ios, url, uiwebview, ios6, maps

如果我在网页中显示指向地图的链接

```
<a href="http://maps.apple.com/?q=Pricketts+Hill+Southampton+Hampshire+SO32+2JW&ll=50.913127,-1.191398">Location</a> 
```

在标准 iPhone Safari 浏览器中单击它会打开原生 iOS6 Apple Maps 应用程序。当我在我的应用程序内的 UIWebView 中显示相同的网页然后单击链接时，我的委托方法

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType { 
```

被调用，参数为

```
url=http://maps.apple.com/?q=Pricketts+Hill+Southampton+Hampshire+SO32+2JW&ll=50.913127,-1.191398
navigationType=UIWebViewNavigationTypeLinkClicked 
```

如果delegate方法返回`YES`指示UIWebView应该继续打开链接，则立即触发对delegate的新调用，此时参数为

```
url=http://maps.google.com/?q=Pricketts+Hill+Southampton+Hampshire+SO32+2JW&ll=50.913127,-1.191398 
navigationType=UIWebViewNavigationTypeLinkClicked 
```

回到`YES`这个，可以预见的是，maps.google.com 网页会在我的 UIWebView 中打开。但我确实希望启动 iOS6 Apple Maps 应用程序。我可以尝试从 URL`CLGeocoder`创建一个`MKMapItem`，按照[如何在 iOS 6 中使用特定地址启动 iOS 地图应用程序？](https://stackoverflow.com/questions/13535027/how-to-launch-ios-maps-app-with-specific-address-in-ios-6?rq=1)，但`CLGeocoder`似乎想要纯文本而不是带有所有常规注释的 url，这是一项非常详细的解析工作。如果我解析 URL 的方式与 Mobile safari 的解析方式不同，那么我可能会看到不同的地图结果，具体取决于我是通过 UIWebView 还是 Safari 从相同的初始链接到达 Maps 应用程序。

**有没有办法让 UIWebView 从链接打开 iOS6 Apple Maps 应用程序，而无需解析然后对 URL 进行地理编码？**

顺便说一句，在使用 maps.google.com url 调用我的委托方法后，它会使用以下参数调用两次：

```
url=about:blank 
navigationType=UIWebViewNavigationTypeOther 
```

并且最终对显示没有影响。知道那是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T09:29:54.777

是的，有一种方法可以从 UIWebview 打开到 Maps 应用程序的 maps.apple.com 链接。不要让 UIWebview 直接打开链接，而是将其传递给操作系统进行整理。在`webView: shouldStartLoadWithRequest: navigationType:`中，我寻找地图链接并特别对待它：

```
if (([url.scheme isEqualToString:@"http"] || [url.scheme isEqualToString:@"https"]) && [url.host isEqualToString:@"maps.apple.com"]) { //it's an apple maps app request
    NSLog(@"Attempting Apple Maps app open");
    [[UIApplication sharedApplication]openURL:url];
    return NO;
} 
```

这会在 iOS6 中打开 Apple Maps 应用程序。在 iOS5 中，它将在 Safari 中打开谷歌地图网页。我将寻找 iOS5 系统并在那里以不同的方式处理 URL。

# java - OpenJPA 映射工具 ClassNotFoundException

> ID：14521692
> 
> 赞同：2
> 
> 时间：2013-01-25T12:18:57.693
> 
> 标签：java, jpa, orm, openjpa

我在使用 MappingTool 时遇到问题，当我在 Java 源文件上运行它时，它不断抛出 java.lang.ClassNotFoundException。感觉这是一个类路径问题，但我不确定。请看下面：

我这样运行它：

```
java -cp .:openjpa-2.2.1.jar:openjpa-all-2.2.1.jar:/home/vic/tmp/test/src
org.apache.openjpa.jdbc.meta.MappingTool -p ~/tmp/test/persistence.xml
~/tmp/test/src/java/org/mag/Magazine.java 
```

它返回这个：

```
Exception in thread "main" java.lang.IllegalArgumentException:
java.lang.ClassNotFoundException: org.mag.Magazine
    at serp.util.Strings.toClass(Strings.java:164)
    at serp.util.Strings.toClass(Strings.java:108)
    at
org.apache.openjpa.lib.meta.ClassArgParser.parseTypes(ClassArgParser.java:164)
    at org.apache.openjpa.jdbc.meta.MappingTool.run(MappingTool.java:1035)
    at org.apache.openjpa.jdbc.meta.MappingTool.run(MappingTool.java:1001)
    at org.apache.openjpa.jdbc.meta.MappingTool$1.run(MappingTool.java:937)
    at
org.apache.openjpa.lib.conf.Configurations.launchRunnable(Configurations.java:748)
    at
org.apache.openjpa.lib.conf.Configurations.runAgainstAllAnchors(Configurations.java:738)
    at org.apache.openjpa.jdbc.meta.MappingTool.main(MappingTool.java:932) 
```

Magazine.java 看起来像这样：

```
package org.mag;

@Entity
@IdClass(Magazine.MagazineId.class)
public class Magazine {

    public static class MagazineId {

    }
} 
```

谢谢

# google-api - Symfony2 和 Google API 集成

> ID：14521696
> 
> 赞同：5
> 
> 时间：2013-01-25T12:19:03.063
> 
> 标签：google-api, symfony-2.1, composer-php

我将在我的 Symfony2 应用程序中使用位于[http://google-api-php-client.googlecode.com/svn/trunk/的 Google API。](http://google-api-php-client.googlecode.com/svn/trunk/)

是否可以使用 导入此 API `composer`？

将此 API 用于我的应用程序的最佳做法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-07T09:21:49.180

可能来不及了，不过没必要用forked git repos，可以直接参考谷歌的“native”svn。

将以下部分添加到您的`composer.json`:

```
"repositories": [
    {
        "type": "package",
        "package": {
            "name": "project/google-api-php-client",
            "version": "1.0.0",
            "source": {
                "type": "svn",
                "url": "http://google-api-php-client.googlecode.com/svn",
                "reference": "trunk"
            }
        }
    }
] 
```

笔记：

*   `"project/google-api-php-client"`名字可以任意选择
*   如果您需要特定版本，请在“参考”条目中使用“trunk@revision-number-here”格式

然后将以下行添加到您的`"require"`部分：

```
"require": {
    ...
    "project/google-api-php-client": "1.0.0"
} 
```

这将使作曲家在下一次更新/安装时检查 repo。

如果您希望自动加载 Google API 类，请将以下行添加到“自动加载”部分：

```
"autoload": {
    ...
    "classmap": ["vendor/project/google-api-php-client/src"]
} 
```

将完整路径放入全局“自动加载”部分似乎不是很整洁，但我还没有设法使其与“存储库/包”下的“自动加载”部分一起工作:(

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-10T16:44:11.690

Google 现在已经开始使用 github 并添加了 composer.json 文件。

Github：[https ://github.com/google/google-api-php-client](https://github.com/google/google-api-php-client)

打包师：[https ://packagist.org/packages/google/apiclient](https://packagist.org/packages/google/apiclient)

```
“要求”： {
    ...
    “谷歌/apiclient”：“开发大师”
}

```

遗憾的是没有命名空间，但通过有一个作曲家文件，它们比以前更近了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-30T17:50:37.500

[**2014 年Google**](https://github.com/google/google-api-php-client)[在 Github 上发布了一个包含](https://github.com/google/google-api-php-client)[官方 Google API 库](https://github.com/google/google-api-php-client)**的 Symfony2 包。这样，API 客户端可以作为服务使用，您可以将配置存储在 Symfony2 配置文件中。**

 **Symfony2 捆绑包：[https ://github.com/Happy/GoogleApiBundle](https://github.com/Happyr/GoogleApiBundle)

```
$ composer require happyr/google-api-bundle 
```

```
<?php
// app/AppKernel.php

public function registerBundles()
{
    $bundles = array(
        // ...
        new HappyR\Google\ApiBundle\HappyRGoogleApiBundle(),
    );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T14:06:26.957

Google API 的 github 存储库[https://github.com/evert/google-api-php-client](https://github.com/evert/google-api-php-client)与作曲家。

您可以添加到您的 composer.json 文件：“evert/google-api-php-client”**

# iphone - iPhone 和 iPad iOS 6 SDK 的区别？

> ID：14521697
> 
> 赞同：2
> 
> 时间：2013-01-25T12:19:04.033
> 
> 标签：iphone, ipad, ios6, nsdateformatter

我为 iPhone 开发了一个应用程序，但在 iPad 上以兼容模式（仅限 iPhone 的应用程序）运行它时遇到问题。

该类`NSDateFormatter`行为错误：

```
NSString *dateString = @"2013-01-18T14:55:50Z";
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
NSDate *theDate = [dateFormatter dateFromString:dateString]; 
```

在 iPhone 上运行此代码时，我得到了正确的日期`theDate`，而当我在 iPad（在我的情况下为第 3 代）上运行相同的代码时，我总是得到一个`nil`值。

这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T12:39:59.093

NSDateFormatter 会考虑您设备上的设置，例如您在国际选项卡中设置的区域格式（区域设置）和设备中设置的 12 或 24 小时格式。检查 iPad 的区域格式和时间格式。也许它是 12 小时格式的！

# jquery - jQuery奇怪的重复迭代

> ID：14521700
> 
> 赞同：0
> 
> 时间：2013-01-25T12:19:07.697
> 
> 标签：jquery, forms, webforms

我有一个包含 5 个文件上传字段和一个“[+] 添加更多文件”链接的表单。通过每次点击显示一个字段，它可以正常工作，但是在我添加附件之后，DOM 结构会发生变化，如下所示，因此当我点击 [+] 添加更多文件时，它会一次显示两个字段（而不是一个）。我不明白为什么

![在此处输入图像描述](../Images/d699b9c8103d0d99ff5c503f0f90407b.png)

这是HTML结构 ![在此处输入图像描述](../Images/0176d633fe1f64fcd1f5f6926dbc3bc1.png)

这是jQuery代码：

```
//FETCH THE ARRAY OF 5    
var webform_divs = $('.webform-client-form').find('div[id$="-ajax-wrapper"]');
//INITIAL STATE    
    if (!($("#addmore").length > 0)) {
                    webform_divs.hide();
                   webform_divs.first().show();
                    webform_divs.last().after('<a id="addmore" href=#>'+"[+] Add more files"+'</a>');
                }
//FUNCTION CALL 
more_upload_fields(webform_divs);    

//FUNCTION BODY
                function more_upload_fields(field_wrappers) {

                    $("#addmore").click(function(e) {
                        e.preventDefault();

                        field_wrappers.each(function(index) {
                           if ($(this).is(":hidden")) {
                                //console.log(index);
                                //console.log($(this));
                                $(this).show();
                                if ($(this).next().is('#addmore')) {
                                    $("#addmore").hide();
                                }
                                return false;
                            }
                        });
                        return false;
                    });
                } 
```

# jquery - Kendo UI Grid - 过滤多个项目会导致错误

> ID：14521704
> 
> 赞同：0
> 
> 时间：2013-01-25T12:19:31.643
> 
> 标签：jquery, kendo-ui

我有一个 Kendo UI 网格，我正在尝试应用过滤。

以下过滤器子句可以正常工作：

```
filter: [{
   logic: "or",
   filters: [
           {
               field: "country",
               value: "France",
               operator: "eq"
           },
           {
               field: "country",
               value: "Germany",
               operator: "eq"
           }
        ] 
```

}

但是，当我添加第三个过滤器时失败并出现错误“无法调用未定义的方法集”。

包含 3 个项目的过滤器是：

```
filter: [{
   logic: "or",
   filters: [
           {
               field: "country",
               value: "France",
               operator: "eq"
           },
           {
               field: "country",
               value: "Germany",
               operator: "eq"
           },
           {
               field: "country",
               value: "UK",
               operator: "eq"
           }
        ]
   } 
```

我真的被这个难住了，因为我期望我可以添加任意数量的过滤器项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:01:43.123

问题归结为剑道控件的版本，一旦我抓住了最新版本，问题就消失了

# javascript - 从图像中检索 EXIF

> ID：14521708
> 
> 赞同：3
> 
> 时间：2013-01-25T12:19:36.707
> 
> 标签：javascript, image, exif

我正在使用这个库[http://blog.nihilogic.dk/2008/05/reading-exif-data-with-javascript.html](http://blog.nihilogic.dk/2008/05/reading-exif-data-with-javascript.html)。我这样调用库：`EXIF.pretty(image)`其中图像是图像对象。即使我使用带有 EXIF 数据的图像，我的结果也是一个空字符串。我究竟做错了什么？

我也试过这种方式：

```
var binary_reader = new FileReader();

     var temp = binary_reader.readAsBinaryString(image);
     var temp2 = new BinaryFile(temp);

    alert(EXIF.readFromBinaryFile(temp2)); 
```

但没有成功。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:27:09.500

`exif.readfrombinaryfile`不返回单个字符串或值。尝试这样的事情来显示单个 EXIF 值：

```
 var exif = EXIF.readFromBinaryFile(temp);
    alert(exif.Make); 
```

# javascript - 在#page HTML 链接顶部添加一个空格

> ID：14521716
> 
> 赞同：3
> 
> 时间：2013-01-25T12:19:53.670
> 
> 标签：javascript, jquery, css

当我有一个在同一页面中加载一个部分的链接时，该链接将使该部分在浏览器窗口顶部加载时单击，我需要以某种方式在所有这些部分顶部添加一个 100px 的空间/间隙像这样链接。

关于如何做到这一点的任何想法？

```
The link to section
<a href="#page">Page</a>

The section
<a id="page"></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:21:55.540

在您的 CSS 中，只需将[padding-top](https://developer.mozilla.org/en-US/docs/CSS/padding-top)设置为 100px（您需要某种形式的 CSS 选择器来仅定位“正确”链接）：

```
a.someCssClassOrSelector {
  padding-top: 100px
} 
```

# mocking - 通缉但未调用：实际上，与此模拟的交互为零

> ID：14521722
> 
> 赞同：0
> 
> 时间：2013-01-25T12:20:17.610
> 
> 标签：mocking, mockito

 ````
Wanted but not invoked:
provider.startAudit(
    "cn=dlakshman,cn=organizational users,o=system,cn=cordys,cn=Audit,o=vanenburg.com",
    "XMLS tore",
    "/Cordys/Test/test.log",
    "UpdateXMLObject",
    "o=system,cn=cordys,cn=Audit,o=vanenburg.com",
    "Add",
    "input",
    Cordys.XMLStore.Messages.xmlstoreUpdateEntryStart, 
 ""
);->

at com.cordys.XMLStoreAudit.MockXMLStoreAuditTest.verifyUpdate(MockXMLStoreAuditTest.java:146)
Actually, there were zero interactions with this mock.

    at com.cordys.XMLStoreAudit.MockXMLStoreAuditTest.verifyUpdate(MockXMLStoreAuditTest.java:146)
    at com.cordys.XMLStoreAudit.MockXMLStoreAuditTest.testAuditXMLStoreCreate(MockXMLStoreAuditTest.java:102)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:46)
    at org.junit.rules.RunRules.evaluate(RunRules.java:18)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)
    at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 

```

请帮我解决上述问题：

我的来源看起来像：

 ````
 {@RunWith(MockitoJUnitRunner.class)
public class MockXMLStoreAuditTest
{
    private static final String     XMLSTORE_ARTIFACT_TYPE  = "XMLS tore";

    private static final String     USER_DN                 = "cn=dlakshman,cn=organizational users,o=system,cn=cordys,cn=Audit,o=vanenburg.com";

    private static final String     DESCRIPTION             = "UpdateXMLObject";

    private static final String     ORG_DN                  = "o=system,cn=cordys,cn=Audit,o=vanenburg.com";

    public @Rule
    SystemPropertySetter            propertiesSetter        = new SystemPropertySetter();

    @Mock
    AuditProvider                   provider;
    @Mock
    AuditRecording                  recording;

    private Connector connector;
    @Before
    public void setAuditInspector() throws ExceptionGroup, DirectoryException
    {
        propertiesSetter.setValue(Audit.AUDITPROVIDER_PROPERTY_NAME, TestAuditProvider.class.getCanonicalName());
        TestAuditProvider.auditProvider = provider;

        when(provider.isAuditEnabled(anyString(), anyString())).thenReturn(true);
        when(provider.startAudit(anyString(),
                                isA(String.class),
                                isA(String.class),
                                isA(String.class),
                                isA(String.class),
                                isA(String.class),
                                anyString(),
                                isA(IStringResource.class),
                                anyVararg())).thenReturn(recording);

        connector = Connector.getInstance("XMLStore");
        if(!connector.isOpen())
        {
            connector.open();
        }
    }
    @Test
    public void testAuditXMLStoreCreate () throws Exception
    {
        updateXMLObject("Add");
        verifyUpdate("Add");
    }

    private void updateXMLObject ( String operation ) throws DirectoryException, XMLException, TimeoutException,
            ExceptionGroup, UnsupportedEncodingException
    {
        int request = 0;
        int response = 0;
        try
        {
            request = connector.createSOAPMethod("http://schemas.cordys.com/1.0/xmlstore", "UpdateXMLObject");
            Node.appendToChildren(XPath.getFirstMatch(".//" + operation + "/tuple", null,NomUtil.readResourceAsNom(getClass(), "UpdateXMLRequests.xml")), request);
            response = connector.sendAndWait(request);
        }
        finally
        {
            Node.delete(request);
            Node.delete(response);
        }
    }

        private void verifyUpdate (String actionType)
        {
            verify(provider).startAudit(USER_DN,
                                        XMLSTORE_ARTIFACT_TYPE,
                                        "/Cordys/Test/test.log",
                                        DESCRIPTION,
                                        ORG_DN,
                                        actionType,
                                        "input",
                                        Messages.XMLSTORE_UPDATE_ENTRY_START,
                                        "");
            verify(recording).completed(AuditStatus.COMPLETE, Messages.XMLSTORE_AUDIT_ENTRY_COMPLETE, anyString());
            verify(provider).isAuditEnabled(ORG_DN, XMLSTORE_ARTIFACT_TYPE);

        }

} 

```

对以下的调用将在内部调用 startAudit() 方法。

> response = connector.sendAndWait(request);

我认为它不是调用模拟的 startAudit()，而是调用实际的 startAudit()。

一世

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:44:42.040

当我直接将模拟的 AuditProvider 注入连接器时，它工作正常。谢谢大家。``

# android - 在按钮单击时重新启动 GlSurfaceView

> ID：14521724
> 
> 赞同：3
> 
> 时间：2013-01-25T12:20:41.513
> 
> 标签：android, opengl-es-2.0

我目前正在开发一个 Android 应用程序，我希望在单击按钮时重新启动 glSurfaceView。即当单击按钮时，应将图像再次读入程序并重置所有纹理。我应该怎么办？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:04:20.823

听起来您只想在用户导航回您的应用程序后重新加载数据而不是重新创建纹理。在这种情况下，在您的渲染器中创建一个公开的方法，例如 setResetFlag()。在这种方法中，您设置了一个布尔变量重置。在 onDrawFrame 方法中，检查标志是否已设置，如果已设置，则重新加载纹理/重置状态（将其状态重置回名义上的非重置状态）。通过这种方式，您可以将工作卸载到 openGL 线程并保持 UI 美观且响应迅速。

# hadoop - 使用 Sqoop 将数据从 RDBMS 导入 Hive 时如何在命令行中指定 Hive 数据库名称？

> ID：14521730
> 
> 赞同：0
> 
> 时间：2013-01-25T12:20:49.640
> 
> 标签：hadoop, cloudera, sqoop

我需要将 RDBMS 表中的数据导入远程 Hive 机器。我怎样才能使用 Sqoop 实现这一点？

简而言之，如何在导入命令中指定 hive 数据库名称和 hive 机器 i/p？

请帮助我使用适当的 sqoop 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:20:03.323

您应该在`sqoop`安装了 Hive 的机器上运行该命令，因为`sqoop`会寻找`$HIVE_HOME/bin/hive`执行 the`CREATE TABLE ...`和其他语句。

或者，您可以使用`sqoop`命令`--hive-home`行选项来指定 Hive 的安装位置（只是覆盖`$HIVE_HOME`）

要连接到远程 RDBMS：

```
sqoop import --connect jdbc:mysql://remote-server/mytable --username xxx --password yyy 
```

要导入 Hive：

```
sqoop import --hive-import 
```

您可以通过查看 http://archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html#_literal_sqoop_import_literal">此链接获得更全面的命令列表。

# android - 滚动时具有两种不同布局的 ListView 获取空指针异常

> ID：14521735
> 
> 赞同：0
> 
> 时间：2013-01-25T12:21:05.943
> 
> 标签：android, listview, nullpointerexception

我正在使用具有两种不同行布局的 ListView。数据已正确设置和显示，但是当我向上滚动时，它会出现空指针异常。在日志中它指向 holder.mainContainer 作为空指针，我在代码中添加了注释，我得到空指针异常。

```
public static class ViewHolder {

      ....

      public TextView title; 
      public RelativeLayout mainContainer;
      public LinearLayout categoryContainer;
      public TextView submenuCategoryTitle;
      ....

}

public View getView(int position, View convertView, ViewGroup parent) {

    View vi = convertView;
    ViewHolder holder;

    final MultiTierMenu multiTierMenu = mMultiTierMenuList.get(position);

    if (convertView == null) {

        holder = new ViewHolder();

        if(multiTierMenu instanceof SubMenu) {

        vi = inflater.inflate(R.layout.event_list_snippet),
                        null);

        ....

        holder.mainContainer = (RelativeLayout)  vi.findViewById(R.id. snippet_container);

        holder.title = (TextView) vi.findViewById(R.id.list_title);

        ....    

        vi.setTag(holder);

    }
    else if(multiTierMenu instanceof MenuCategory) {

        vi = inflater.inflate(R.layout.submenu_category_list_item),
                        null);
        ....

        holder.categoryContainer = (LinearLayout) vi.findViewById(R.id.category_container);

        holder.submenuCategoryTitle = (TextView) vi.findViewById(R.id.subcategory_title);               
        ....

        vi.setTag(holder);

    } 
    else
        holder = (ViewHolder) vi.getTag();

    //SubMenu
    if(multiTierMenu instanceof SubMenu) {

        final SubMenu subMenu = (SubMenu) multiTierMenu;

        //GETTING NULL POINTER EXCEPTION HERE ON SCROLL UP
        //if(null != holder.mainContainer) {
            if(subMenu.getIsVisibleMenu())
    ==>         holder.mainContainer.setVisibility(View.VISIBLE);
            else
                holder.mainContainer.setVisibility(View.GONE);
        //}

        //ADDING NULL CHECK ABOVE - GETTING NULL POINTER EXCEPTION HERE
        holder.title.setText(subMenu.getTitle());

        ....

    }
    else if(multiTierMenu instanceof MenuCategory) {

        final MenuCategory menuCategory = (MenuCategory) multiTierMenu;

        holder.submenuCategoryTitle.setText(menuCategory.getTitle());

        ....                
    }

    return vi;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:35:28.783

您是否实现了以下两种方法？

1.  获取项目视图类型

你必须按位置返回每个数字

```
@Override
public int getItemViewType(int position) {
    if (position % 2 == 0) {// example
        return 0;// MenuCategory
    }
    else {
        return 1;// SubMenu???
    }
} 
```

1.  getViewTypeCount

您必须返回查看次数

```
@Override
public int getViewTypeCount() {
    return 2;
} 
```

如果实现了他们的方法，则仅在 (convertView == null) 中需要“膨胀”。喜欢跟...

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;
    int type = getItemViewType(position);
    if (convertView == null){
        holder = new ViewHolder();
        switch (type) {
            case 0:// MenuCategory
                convertView = inflater.inflate(R.layout.event_list_snippet, null);
                holder.mainContainer = (RelativeLayout) convertView.findViewById(R.id. snippet_container);
                holder.title = (TextView) convertView.findViewById(R.id.list_title);
                break;
            case 1:// SubMenu???
                convertView = inflater.inflate(R.layout.submenu_category_list_item, null);
                holder.categoryContainer = (LinearLayout) convertView.findViewById(R.id.category_container);
                holder.submenuCategoryTitle = (TextView) convertView.findViewById(R.id.subcategory_title);
                break;
        }
        convertView.setTag(holder);
    }
    else {
        holder = (ViewHolder) convertView.getTag();
    }

    // assign data into view
    switch (type) {
    case 0:// MenuCategory
        holder.submenuCategoryTitle.setText(menuCategory.getTitle());
        break;
    case 1:// SubMenu???
        holder.title.setText(subMenu.getTitle());
        break;
    } 
```

# asp.net - ASP.NET WebAPI 将 urlencoded 正文中的空字符串作为 null 传递

> ID：14521741
> 
> 赞同：7
> 
> 时间：2013-01-25T12:21:46.080
> 
> 标签：asp.net, .net, web-services, asp.net-web-api, urlencode

我有一个简单的 ApiController

```
public HttpResponseMessage Put(int orderid, [FromBody] Order order)
{
    // Do something useful with order.Notes here
} 
```

和一个类（实际的类包含更多属性）

```
public class Order
{
    public string Notes { get; set; }
} 
```

并希望处理以下类型的 PUT 请求

```
PUT http://localhost/api/orders/{orderid}
Content-Type: application/x-www-form-urlencoded

notes=sometext 
```

一切正常，但空值作为 null 传递

```
notes=blah            // passes blah
notes=                // Passes null
someothervalue=blah   // Passes null 
```

是否可以让 ApiController 区分空值和缺失值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:06:14.180

您是否尝试过使用 DisplayFormatAttribute 注释属性，例如，

```
public class Order
{
    [DisplayFormat(ConvertEmptyStringToNull=false)]
    public string Notes { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-11T20:04:04.040

其根源来自`ReplaceEmptyStringWithNull`that 调用`string.IsNullOrWhiteSpace`而不是`string.IsNullOrEmpty`

要在整个 WebAPI 项目中解决此问题，您需要将 替换`ModelMetadataProvider`为`ConvertEmptyStringToNull`将`false`

请参阅[将 DisplayFormatAttribute.ConvertEmptyStringToNull 的默认设置为 false](https://stackoverflow.com/questions/20308201/set-default-for-displayformatattribute-convertemptystringtonull-to-false/36558116#36558116)

这实际上是在 v6 中“修复”的 - 请参阅[https://github.com/aspnet/Mvc/issues/3593](https://github.com/aspnet/Mvc/issues/3593)

# java - 将一个浮点数从顶点着色器传递给片段着色器

> ID：14521742
> 
> 赞同：0
> 
> 时间：2013-01-25T12:21:53.193
> 
> 标签：java, android, opengl-es, opengl-es-2.0, shader

目前我正在从顶点着色器传递一个浮点数：

```
varying float fog_factor;
...
fog_factor = clamp(gl_Position.z, 0.0, 1.0);
... 
```

到片段着色器：

```
varying float fog_factor;
...
gl_FragColor = texture2D(sampler_texture_4, ...) * fog_factor;
... 
```

我的问题，我需要在 java 代码中添加什么吗？传递浮点数组时，我需要添加如下内容：

```
vertex_position_handle = GLES20.glGetAttribLocation(program, "vertex_position");
GLES20.glEnableVertexAttribArray(vertex_position_handle);
GLES20.glVertexAttribPointer(vertex_position_handle, 3, GLES20.GL_FLOAT, false, 3 * 4, vertex_buffer); 
```

现在我只在我的 java 代码中为我的 float 执行此操作：

```
fog_handle = GLES20.glGetAttribLocation(program, "fog_factor"); 
```

我问这个是因为这段代码在我的设备上运行，但在其他设备上崩溃......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:19:49.373

好吧，问题是fog_factor是一个变化的。虽然这会将信息从顶点传递到片段着色器，但您无法从客户端 (java) 代码访问它。如果要将信息发送到着色器，则需要属性或统一变量。

每个顶点的属性可以改变，而每组顶点的制服保持不变（glDrawElements 调用）

我在顶点着色器中经常做的是：

```
 attribute vec2 clientTexCoord;
  varying vec2 texCoord;  

  main(){
        ... // other code
        texCoord = clientTexCoord;
        ... // other code
  } 
```

并在客户端/Java 代码中获取 clientTexCoord 的属性位置，因为您做得正确。令人难以置信的是，它现在可以正常工作，但我已经看到一些 GLSL 编译器比其他编译器不那么挑剔。

尝试修改您的顶点着色器以允许传入一个属性以设置您拥有的不同雾因子的值。

# c++ - Win32 多线程资源

> ID：14521744
> 
> 赞同：3
> 
> 时间：2013-01-25T12:21:59.533
> 
> 标签：c++, c, windows, multithreading, numerical-methods

我正在寻找指向 Win32 上 C/C++ 的一些多线程资源的快速指针。我有兴趣比较使用单线程和多线程的数值计算的相对性能。这些问题不必是现实世界的，但它们不应该如此微不足道，以至于相对性能无关紧要。我的第一次尝试是实现 Eratosthenes 的单线程 Sieve 和 Atkin 的 Sieve，假设两者都有相对简单的多线程示例，但我无法找到任何示例。我不想成为多线程专家，但接受这需要付出一些努力，我已经为大约 30 小时的编程时间做了预算。我有 Russinovich 和 Solomon 的 Windows Internals 以及 Richter 和 Nasarre 通过 C/C++ 编写的 Windows 的副本，

我想避免使用任何外部库，例如 Boost，以使示例尽可能干净，以避免任何依赖问题。我不想去 CLR 附近的任何地方

上下文是我为 Excel 编写 dlls/xlls，因为 Excel 12 Microsoft 声称这些函数可以是多线程的，所以我想研究它是如何工作的。

我已经离开 Stack Exchange 一两年了，所以请保持温和。我对我发现的大多数东西都进行了一些探索，这些东西都集中在理论而不是实现上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:55:04.677

关于 WinAPI 中的多线程调用的[MSDN 部分可以在这里提供帮助吗？](http://msdn.microsoft.com/en-us/library/ms684847%28v=vs.85%29.aspx)还是您需要更多“类似教程”的东西？

[有关步入示例，请参阅CreateThread](http://msdn.microsoft.com/en-us/library/ms682453%28v=vs.85%29.aspx)调用文档引用的 MSDN 文章“[创建线程”。](http://msdn.microsoft.com/en-us/library/ms682516%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:21:13.357

在 Visual Studio 中，您可以激活 OpenMP 支持，然后很容易并行化循环或代码区域。您可以轻松找到教程，例如[此处](http://openmp.org/mp-documents/omp-hands-on-SC08.pdf)。

# html - 如何在换行符上显示空格

> ID：14521749
> 
> 赞同：1
> 
> 时间：2013-01-25T12:22:35.407
> 
> 标签：html, css

在我的`<p>`标签中，我有一些文字，并且在很多行上都断了。

```
<p>
some really long text broken in many places...
</p> 
```

正常行为不是在换行时显示空格字符，但在我的应用程序中我需要显示它，有可能以任何方式吗？

**编辑：**

如果你运行[这个](http://jsfiddle.net/Q2Nmr/)：

```
<p style="width:100px;">
    <span style="background-color: #008000">
        some long text bla bla bla bla bla bla bla
    </span>
</p> 
```

您可以看到，单词之间的空格 (" ") 看起来像任何其他字符，但每行的末尾没有空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T13:10:13.017

您的答案可以在 css`white-space`属性中找到。这应该是您的 HTML：

```
<p style="width:100px;">
  <span style="background:#008000;">some long text bla bla bla bla bla bla bla</span>
</p> 
```

你的 CSS 应该是：

```
span {
  white-space: pre-wrap;
} 
```

但是，一个问题`white-space:pre-wrap;`是它还包括您可能在 HTML 格式中使用的所有选项卡。所以你不能缩进`<span>`标签内的文本。

看看我制作的这个小提琴：[jsfiddle.net/jWbgW/](http://jsfiddle.net/jWbgW/)

当然，你真的应该把所有的样式定义都放在 css 中，但这是给定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T13:45:00.723

空格字符实际上并未显示在行尾。如果`white-space: pre`在`span`元素上设置，则其内容将按原样显示，保留分割为行以及多个或行尾空格。要在显示的行尾仅显示一些单独的空格（在它们占据空间并获得背景颜色的意义上），您可以使用不间断空格，表示为`&nsbsp;`.

但是，如果您想像往常一样包装文本，那么恐怕没有简单的方法可以让浏览器在行尾附加这样一个“可见空间”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:31:07.393

要在不同段落部分之间的 HTML 中添加换行符，您可以将每个部分包装在`<P></P>`标签中，使用 a`<BR />`或使用 CSS padding-bottom 属性。当您使用这些中的每一个时，实际上取决于具体情况。

这是一篇很好的文章，提供了一些很好的解释： http: [//www.newbiewebsitedesign.com/html-line-break-tag-cod](http://www.newbiewebsitedesign.com/html-line-break-tag-cod)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:31:19.527

您可以`<br />`在 CSS 中用于新行或边距/填充。

```
<p>
some really long text broken in many places...
<br />
</p> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T12:53:06.240

```
p { white-space:nowrap;}

<p>This text will be not broken on many lines...</p> 
```

也检查一下：[http ://www.impressivewebs.com/css-white-space/](http://www.impressivewebs.com/css-white-space/)

# android - facebook sdk 3.0 无法在 android 4 及更高版本中运行

> ID：14521754
> 
> 赞同：0
> 
> 时间：2013-01-25T12:23:14.733
> 
> 标签：android, facebook

我的应用程序在 android 2.2 上运行，我刚刚将 facebook sdk 更改为 3.0。但在那之后，当我要使用 facebook 登录时，它会使 facebook 登录窗口关闭，并将我从应用程序中抛出。它只发生在 android 4.0 或更高版本，但它仍然适用于 android 2.2、android 2.3。

谁能知道这个的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:27:30.230

Facebook SDK 3.0 改变了很多东西。在此处粘贴您的登录代码。

# android - 将 ActionBarSherlock 添加到项目

> ID：14521755
> 
> 赞同：0
> 
> 时间：2013-01-25T12:23:20.967
> 
> 标签：android

我正在尝试将 actionbarsherlock 添加到我的项目中。这是一个庞大的项目，大部分代码都是编写的。我已将 actionbarsherlock 导入我的工作区，当我尝试将其作为库添加到我的项目中时，eclipse“只是忘记了”我添加了 actionbarsherlock。

![在此处输入图像描述](../Images/ca7f81f59a2cfe935b476d82f9b48805.png)

当我再次进入这个屏幕时，对 actionbarsherlock 项目的引用消失了！日食有什么问题？穴居人工具..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:49:25.057

您是否检查过文件的文件权限`project.properties`？

那里保存了对图书馆项目的所有引用。我的猜测是它无法将更改写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:34:49.720

转到您的 actionBar 项目 -> 属性 -> Android 并检查 IsLibrary

# java - Object 类中的 hashCode() 方法是如何实现的？

> ID：14521756
> 
> 赞同：5
> 
> 时间：2013-01-25T12:23:27.503
> 
> 标签：java, object, hashcode

> **可能重复：**
> [java对象中hashCode的实现是什么？](https://stackoverflow.com/questions/13602501/whats-the-implementation-of-hashcode-in-java-object)

当我浏览 Object 类时，我发现只有 hashCode() 方法的声明。执行部分在哪里？如果没有实现 hashCode() 方法如何返回结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T12:32:27.853

它是在本机代码中实现的。至于实现，它有点棘手 - 您可以更改默认实现。如果您查看“Open JDK”源代码，您将看到以下选项：

> -XX:hashCode=n（从 0 到 5）。

*   0 – Park-Miller RNG（默认）
*   1 – 地址函数和一些全局状态
*   2 – 常量 1
*   3 – 顺序计数器
*   4 – 对象的地址
*   5 – 线程特定的异或移位

您可以在这里找到详细的实现：http: [//hg.openjdk.java.net/jdk7/jdk7/hotspot/file/tip/src/share/vm/runtime/synchronizer.cpp](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/tip/src/share/vm/runtime/synchronizer.cpp)

考虑源代码和`static inline intptr_t get_next_hash()`函数注释。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T12:25:32.483

`native`关键字表示它已在本机代码（JVM）中实现。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T12:26:36.217

如果你看到[声明](http://www.grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Object.java#Object.hashCode%28%29)`hashcode`

```
public native int hashCode(); 
```

`native`in 声明表示它是在 jvm 代码中本地实现的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:26:59.317

> 执行部分在哪里？

它已经由框架实现。[请参阅文档。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#hashCode%28%29)

> 如果没有实现 hashCode() 方法如何返回结果？

但是，如果您创建自定义类型，则您负责生成一个`int`可以很好地表示对象当前状态的值。[这是一个很好的例子。](https://stackoverflow.com/questions/2827612/effective-java-hashcode-implementation)

# c# - SQL Server 日期时间接受 NULL

> ID：14521760
> 
> 赞同：9
> 
> 时间：2013-01-25T12:23:48.377
> 
> 标签：c#, sql-server

我试图使我的代码尽可能紧凑。

使用 Microsoft SQL Server、.NET 2.0

我的数据库中有一个日期字段，它接受空值

```
LeaseExpiry(datetime, null) 
```

我获取文本框的值并将其转换为日期时间。

```
DateTime leaseExpiry = Convert.ToDateTime(tbLeaseExpiry.Text);

INSERT_record(leaseExpiry); 
```

我遇到的问题是表单是否已提交并且文本框为空。我得到了这个错误：

> *字符串未被识别为有效的日期时间。*

如何设置我的代码，以便如果文本框为空，则在数据库中创建行`NULL`？

我尝试将变量初始化为 NULL，但在 Visual Studio 中出现错误

```
DateTime leaseExpiry = null; 
```

> *无法将 null 转换为“System.DateTime”，因为它是不可为 null 的值类型。*

如果有帮助，这里是数据访问层

```
public string INSERT_record(DateTime leaseExpiry)
{
     //Connect to the database and insert a new record 
     string cnn = ConfigurationManager.ConnectionStrings[connname].ConnectionString;

     using (SqlConnection connection = new SqlConnection(cnn))
     {
        string SQL = string.Empty;
        SQL = "INSERT INTO [" + dbname + "].[dbo].[" + tblAllProperties + "] ([LeaseExpiry]) VALUES (@leaseExpiry);

         using (SqlCommand command = new SqlCommand(SQL, connection))
         {
                command.Parameters.Add("@leaseExpiry", SqlDbType.DateTime);
                command.Parameters["@leaseExpiry"].Value = leaseExpiry;
         }

         try
         {
                connection.Open();
                command.ExecuteNonQuery();
                return "Success";
         }
         catch (Exception ex)
         {
                return ex.Message;
         }
     }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T12:27:03.573

确实，`DateTime`不能`null`。但是：`DateTime?`可以。另请注意，在参数上，`null`表示“不发送”；你需要：

```
public string INSERT_record(DateTime? leaseExpirey)
{
    // ...
    command.Parameters.Add("@leaseExpirey", SqlDbType.DateTime);
    command.Parameters["@leaseExpirey"].Value =
                ((object)leaseExpirey) ?? DBNull.Value;
    // ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T12:32:18.107

尝试使用可为空的 DateTime 和 TryParse()

```
DateTime? leaseExpirey = null;
DateTime d;
if(DateTime.TryParse(tbLeaseExpiry.Text, out d))
{
    leaseExpirey = d;
}

INSERT_record(leaseExpirey); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T12:28:12.993

你可以使`leaseExpirey`一个空值`DateTime`- 即`DateTime? leaseExpirey`

然后你可以说：

```
DateTime? leaseExpirey;
if (!string.IsNullOrEmpty(tbLeaseExpiry.Text.Trim()))
    leaseExpirey = Convert.ToDateTime(tbLeaseExpiry.Text);

INSERT_record(leaseExpirey); 
```

您还需要更改`INSERT_record`以接受`DateTime?`参数而不是`DateTime`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:38:10.317

您应该使用`DateTime.MinValue`，因为 DateTime 永远不会`null`。

# html - 如何从 HTML 表格数据创建基本折线图（HightCharts）？

> ID：14521763
> 
> 赞同：-2
> 
> 时间：2013-01-25T12:23:52.633
> 
> 标签：html, highcharts, html-table

我想知道我们可以用highcharts创建折线图并且可以从HTML表格中提取数据吗？我是新手，我已经搜索过了，但没有根据需要得到任何帮助。因此，如果有人知道，请向我提供链接或示例/示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:19:45.120

[HighCharts 演示库在此处](http://www.highcharts.com/demo/column-parsed)提供了一个示例。这就是[jsFiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-parsed/)。只需将`type`图表从更改`'column'`为`'line'`：

```
...
            chart: {
                renderTo: 'container',
                type: 'line'
            },
... 
```

# java - 使用正则表达式验证德国汽车牌照

> ID：14521768
> 
> 赞同：-5
> 
> 时间：2013-01-25T12:24:20.450
> 
> 标签：java, regex

我正在寻找完美的正则表达式来验证德国汽车牌照，这个数字也看起来像这样：

> 1-3 字母
> a MINUS（我知道减号现在已经过时了，但客户希望这样）
> 1-2 字母
> a SPACE
> 1-4 数字

ma 12 --> 错误
abc a 12 --> 错误
ma 12 --> 正确
abc-abc 12 --> 错误
abc-ab-12 --> 错误
abc-ab 1234 --> 正确
ab-ab 1234 -- > 正确
abc-ab 12345 错误

我正在使用`([a-z]+)[-]?([a-z]*)\s*(\d+)`（所以没有数数）但它走错了路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:27:14.407

尝试以下操作：

```
^[a-zA-Z]{1,3}-[a-zA-Z]{1,2} \d{1,4}$ 
```

这大致分为：

*   ^ 字符串开头
*   [a-zA-Z]{1,3} 1 到 3 次（含）之间的字母
*   - 一个连字符
*   [a-zA-Z]{1,2} 1 到 2 次（含）之间的字母
*   （空格）空格字符
*   \d{1,4} 1 到 4 次（含）之间的数字 (0 - 9)
*   $ 字符串的结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:27:22.580

你应该使用这个正则表达式

```
^[a-zA-Z]{1,3}-[a-zA-Z]{1,2} \d{1,4}$ 
```

* * *

`[a-zA-Z]`匹配单个字符

`[a-zA-Z]{1,3}`匹配 1 到 3 个字符

`\d`类似于 [0-9]

`\d{1,4}`匹配 1 到 4 位数字

# aspose - 使用 Aspose.Cells 在数据透视表中设置数字格式

> ID：14521771
> 
> 赞同：1
> 
> 时间：2013-01-25T12:24:36.480
> 
> 标签：aspose

我正在通过 aspose.cells 在 excel 表中创建一个数据透视表。我希望将值格式化为会计，带有符号、逗号和 2 个小数位。aspose.cells 可以吗？请建议如何使用 Aspose.Cells 和 c# 执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:13:49.453

如果您需要 PivotField 的会计编号格式，您可以尝试使用以下数字格式使用 PivotField.Number 属性来代替。

```
pivotTable.DataFields[0].Number = 43; //You may also try it with 44 if it suits your needs. 
```

或者，您可以尝试对 PivotField 的 NumberFormat 自定义属性使用以下格式字符串。您也可以签入 MS Excel 以获取您想要的自定义字符串以尝试使用 NumberFormat 属性。

```
_($* #,##0.00_);_($* (#,##0.00);_($* "-"??_);_(@_) 
```

如果您仍然遇到任何困惑/问题，请分享示例 Excel 文件，您可以在其中手动设置 MS Excel 中数据透视表字段所需的数字格式，并与我们分享文件，以便我们测试场景在我们的最后。

此外，您能否将代码/示例应用程序与模板文件（输入、输出和预期输出文件等）共享。这些文件也可以在[Aspose.Cells 产品支持论坛](http://www.aspose.com/community/forums/aspose.cells-product-family/19/showforum.aspx)中共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:18:18.157

请尝试使用 PivotField.NumberFormat 属性来指定他想要的格式，请参阅下面的代码段以供参考：

```
//Specify the number formatting to the first data field added.
pivotTable.DataFields[0].NumberFormat = "$#,##0.00"; 
```

此外，我们还建议您使用我们最新版本的[Aspose.Cells for .NET 7.4.0](http://www.aspose.com/community/files/51/.net-components/aspose.cells-for-.net/entry439948.aspx)，其中我们对数据透视表进行了更多增强。

*PS，我在 Aspose 担任支持开发人员/技术传播者。*

# joomla - 获取 joomla 注册表变量？

> ID：14521773
> 
> 赞同：0
> 
> 时间：2013-01-25T12:24:55.563
> 
> 标签：joomla, registration

我正在努力获取用户在注册时输入的 joomla 注册表单值。经过两天的搜索，我找到了文件**Joomla2.5.7\components\com_users\controllers\registration.php**。在 register() 方法中，我尝试回显 $data 和 $requestData 变量，但在注册新条目时没有看到任何输出。我也尝试回显 javascript，但没有成功。我正在尝试将 joomla 数据库与我自己的数据库连接起来，这样每当新用户注册时，他也会注册到我的网站。我如何获得注册表单变量，非常感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:36:11.940

泰这个

在注册控制器上，您可以找到对模型的函数调用，如下所示

```
$return = $model->register($data); 
```

在那之后

```
echo "<pre/>";
print_r($data); 
```

同样在注册模型 components\com_users\model\registration.php

register() 方法已定义，您可以查看该方法以获取更多信息。

此外，如果您想将用户信息添加到其他数据库，例如您的网站数据库。编写 mysql 查询的最佳位置是：

```
 // Store the data.
        if (!$user->save()) {
            $this->setError(JText::sprintf('COM_USERS_REGISTRATION_SAVE_FAILED', $user->getError()));
            return false;
        }else{

                  //Your custom mysql query to other DB or tables
            } 
```

在 register() 方法中的注册模型中找到上述部分。

希望这可以解决您的问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T11:50:07.257

我希望本教程对您有所帮助。您会发现它很好地解释了 joomla 注册表单的过程。

[http://youtu.be/2AyCzb2vTaU](http://youtu.be/2AyCzb2vTaU)

# algorithm - 自动完成

> ID：14521776
> 
> 赞同：2
> 
> 时间：2013-01-25T12:25:08.190
> 
> 标签：algorithm, autocomplete, nosql

谷歌或亚马逊如何在他们的搜索框中实现自动建议。我正在寻找具有技术堆栈的算法。

PS：我在网上搜索过，发现了[这个](http://www.quora.com/Google-Autocomplete/How-does-Googles-autocomplete-feature-work)和[这个](http://googleblog.blogspot.in/2010/09/google-instant-behind-scenes.html)以及更多。但我更感兴趣的不是他们做什么，而是他们如何做。NoSQL 数据库来存储阶段？还是根据关键字排序或散列？所以换个说法：考虑到忽略个性化、地理位置等的不同搜索列表，他们如何存储、管理和推荐它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:41:56.263

这属于`stastical language processing problems`. 查看[Norvig 的拼写建议文章](http://norvig.com/spell-correct.html)。自动完成将使用类似的机制。这个想法是，从过去的搜索中，你知道短语的概率（或者更好地称为 bigram、trigram、ngram）。对于每个这样的短语，自动完成选择具有最大值的短语

```
P(phrase|word_typed) = P(word_typed|phrase) P(phrase) / P(word_typed) 
P(phrase|word_typed) = Probability that phrase is right phrase if word typed 
so far is word_typed 
```

Norvig 的文章是对这个概念的一个非常容易理解和很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:57:25.367

谷歌接受您的输入并根据排名 ID 给出 TOP4 结果 [如果结果较少，它会以空字符串形式返回参数] 给不同的关键字，这些关键字因命中和未命中计数而动态不同。然后，他们进行搜索查询并在 Json 中返回 4 个字段，其中包含 url、标题和另外 2 个字段，然后多功能框使用 Chrome 主干中的预填充函数填充数据。

# ios - 面板中的 UIScrollView 不滚动

> ID：14521784
> 
> 赞同：0
> 
> 时间：2013-01-25T12:25:23.740
> 
> 标签：ios, gridview, uiscrollview

我正在尝试在 UIScrollview 中创建一个“GridView”样式表，该表本身位于受限空间内。我把它放在一个 Scrollview 中，这样如果行数多于可以显示的行数，用户就可以向下滚动。

我的相关部分的故事板如下所示：

![在此处输入图像描述](../Images/d53d2e4369dd92011b221e8be0fcc2ab.png)

为了测试它，我尝试用 UILabel 填充它，使用以下代码：

```
for (int i = 0; i < 15; i++)
{
    UILabel *cliLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, (60+(i*30)), 80, 40)];
    UILabel *cliColum2Label = [[UILabel alloc] initWithFrame:CGRectMake(110, (60+(i*30)), 150, 40)];
    UILabel *cliColum3Label = [[UILabel alloc] initWithFrame:CGRectMake(270, (60+(i*30)), 80, 40)];
    UILabel *cliColum4Label = [[UILabel alloc] initWithFrame:CGRectMake(360, (60+(i*30)), 80, 40)];
    [cliLabel setText:@"Column 1"];
     [cliColum2Label setText:[NSString stringWithFormat:@"Column 2, row %d", i]];
    [cliColum3Label setText:@"Column 3"];
    [cliColum4Label setText:@"Column 4"];
    [self.cliTableScrollView addSubview:cliLabel];
    [self.cliTableScrollView addSubview:cliColum2Label];
    [self.cliTableScrollView addSubview:cliColum3Label];
    [self.cliTableScrollView addSubview:cliColum4Label];
} 
```

这导致以下结果：

![在此处输入图像描述](../Images/b342618b64307db8601ce460050a0581.png)

如您所见，滚动视图中无法显示的行数更多。

我想知道的是如何修改上面的内容，以便出现滚动条，从而可以访问越界行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:45:04.920

`UIScrollView`不知道它要滚动多少，你需要通过提供来告诉它`contentSize`。例如，在循环结束时：

```
self.cliTableScrollView.contentSize = CGsizeMake(self.cliTableScrollView.frame.size.width, 60 + i * 30); 
```

# javascript - 仅从元素中获取属性，其中事件在 AngularJS 中被触发

> ID：14521788
> 
> 赞同：0
> 
> 时间：2013-01-25T12:25:39.797
> 
> 标签：javascript, angularjs

我是 AngularJS 的新手。我尝试从 Backbone.js 迁移到 Angular，首先我想我想做的很简单：fadeIn 和 fadeOut。

所以我的 HTML 看起来像这样：

```
<div id="calendar" style="padding-left: 50px" ng-controller="CalendarButtonController">
    <!-- prev button -->
    <div class="calendar-btn prev" ng-mouseover="fadeIn()" ng-mouseleave="fadeOut()" fade-duration="5000" fade-target="btnPrev">
        <img id="btnPrev" src="img/btn-prev_hover.png"> 
    </div>

    <!-- next button -->
    <div class="calendar-btn next" ng-mouseover="fadeIn()" ng-mouseleave="fadeOut()" fade-duration="5000" fade-target="btnNext">
        <img id="btnNext" src="img/btn-next_hover.png">
    </div>
</div> 
```

所以思路是：如果鼠标在prev-button div上，div里面的图片会淡入。fade-target-Attribute里面是元素的具体ID，会淡入。在鼠标悬停时，元素（在fade-target-Attribute 中定义）将淡入，而在鼠标离开时，元素将淡出。所以我实现了一个控制器和一个指令：

```
function CalendarButtonController($scope){
    $scope.fadeIn = function() {
        $scope.$emit('event', 'fadeIn');
    }

    $scope.fadeOut = function() {
        $scope.$emit('event', 'fadeOut');
    }
}

angular.module('components', [])
    .directive('fadeDuration', function ($rootScope) {
        return {
            restrict: 'A',
            link: function(scope, el, attrs) {              
                $rootScope.$on('event', function(event, message) {
                    if(message  == "fadeIn"){
                        fadeIn();
                    }

                    if(message  == "fadeOut"){
                        fadeOut();
                    }
                });

                function fadeIn(){
                    $('#'+attrs.fadeTarget).fadeIn(attrs.fadeDuration);             
                }

                function fadeOut(){
                    $('#'+attrs.fadeTarget).fadeOut(attrs.fadeDuration);                
                }
            }
        }       
    }); 
```

元素的淡入和淡出有效，但问题是：如果我将鼠标移到 prev-button-div 上，两个图像（prev-Button 和 next-Button）都会淡入。但它应该只淡入 prev 的图像-按钮。怎么可能只获取触发事件的元素的属性？指令中始终包含与指令匹配的所有元素的所有属性。

编辑：有没有更简单的方法来实现淡入淡出效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:08:56.640

与其尝试通过范围或控制器控制 DOM 事件，不如将该事件绑定逻辑移动到指令中，然后在那里使用普通的 jquery。大多数时候，您不需要使用范围事件与指令进行通信。

显示比解释更容易（检查[小提琴](http://jsfiddle.net/WRms8/8/)）

```
<div ng-controller="itemsController">
    <div ng-repeat="item in items">
        <div class="item" fade="mouseover" fade-duration="5000" fade-target="item-{{item.name}}">
            <span id="item-{{item.name}}">{{item.name}}</span>
        </div>        
    </div>    
</div>

myApp.controller('itemsController', function($scope) {
    $scope.items = [{ name: 'Foo' }, { name: 'Bar'}, { name: 'Baz'}];    
});

myApp.directive('fade', function() {
    return {
        restrict: 'A',
        link: function(scope, element, attrs) {

            var fadeDuration = attrs.fadeDuration || 100;
            var onEvent = attrs.fade || "mouseover";

            // See how the directive alone controls the events, not the scope
            element.on(onEvent, function() {
                var targetElement = $('#' + attrs.fadeTarget);
                targetElement.fadeOut(fadeDuration, function(){
                   targetElement.fadeIn(fadeDuration);                   
                });                
            });
        }
    };
}); 
```

# git - 虚拟机上的 PhpStorm + GIT

> ID：14521790
> 
> 赞同：1
> 
> 时间：2013-01-25T12:25:51.350
> 
> 标签：git, virtual-machine, phpstorm, sshfs

这是我的工作站设置：

*   Ubuntu 12.04
*   一些虚拟机（一个带有 nginx，另一个带有 apache 等）。我为此使用虚拟盒子。
*   PhpStorm 作为我的 IDE

`sshfs`我用( )在某些位置安装了虚拟机`sshfs root@test.com:/var/www/ ~/vm/`，所以我看到了 PhpStorm 中的文件。由于`/var/www/`此处仅显示其中的文件，因此 PhpStorm 不知道 GIT 已安装。

是否可以使我的 VM 中的 GIT 与 PhpStorm 一起使用？如果是，我该怎么做？我在任何地方都没有找到任何关于此的信息，我需要手动编写 GIT 可执行文件的路径以使其工作（我无法/不知道如何访问它，因为它位于 VM 上）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T13:11:04.830

要在 PhpStorm 中使用 git 集成，您需要在运行 IDE 的主机上本地安装版本控制客户端，以便 IDE 可以找到并运行它。

# php - 如果没有属性，PHP 对象返回 false

> ID：14521795
> 
> 赞同：3
> 
> 时间：2013-01-25T12:26:00.890
> 
> 标签：php, class, object, properties, logic

我正在尝试创建一个包含一组属性的类。它将像这样使用：

```
$class = new test_class();

$class->property;
$class->second_property; 
```

基本上，如果属性存在，则为真，如果属性不存在，则为假。属性没有价值，只有存在。

现在，我想做这样的事情：

```
$class = new test_class();

var_dump($class->property); // false - property does not exist
var_dump($class->second_property); // true - second_property exists

var_dump( (bool) $class); // true 
```

因此，即使测试类的一个属性存在，var dumping the`$class`也会显示 true，因为它是一个对象。

但是，在类没有属性的情况下，我希望发生这种情况：

```
$class = new test_class();

var_dump($class->property); // false - property does not exist
var_dump($class->second_property); // false - second_property does not exist

var_dump( (bool) $class); // false 
```

但是，我仍然想`$class`成为逻辑测试中`instanceof`的`test_class`但返回 false。

这是可能吗？如果是这样，我会怎么做？

谢谢，奥兹

**编辑：**

澄清一下，我已经在使用 __get() 魔术函数了。我想要发生的是，如果`test_class`没有属性，那么当`var_dump`对它执行 a 时，它返回 false 但 an`instanceof`将返回`test_class`。

**详细...**

我正在创建一个复杂的权限系统。用户获得分配的部分，每个部分都有一组权限。

它将像这样工作：

```
$user = permissions::get_user(USER_ID_HERE);
// Every property of the $user is a section

var_dump($user->this_section_exists); // true - returns an object
var_dump($user->this_section_doesnt); // false - returns a boolean 
```

如果某个部分存在，则它返回该部分权限的对象。

```
var_dump($user->this_section_exists); // true
var_dump($user->this_section_exists->this_permission_exists); // true

var_dump($user->this_section_exists->this_permission_doesnt); // false 
```

这是边缘情况：

```
var_dump($user->this_section_doesnt); // false

var_dump($user->this_section_doesnt->some_permission);
// This should also return false, which it does,
// But it throws a notice: "Trying to get property of non-object" 
```

我希望能够在不修改调用该类的代码的情况下抑制该通知，即没有 @ 来抑制.. 或者能够返回一个没有属性的对象，该对象在逻辑测试中评估为 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:37:45.250

> 我想要发生的是，如果 test_class 没有属性，那么当对其执行 var_dump 时，它会返回 false，但 instanceof 将返回 test_class。

那是不可能的，`var_dump`总是会告诉你正确的类型，这就是它的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:37:35.227

不，你不能完全按照你写的那样做。但是你可以模拟类似的东西：

```
class A {

    public function __toString() { // this is what you want, but it only works when you use your object as a string, not as a bool.
        if (count(get_class_vars(__CLASS__))) { // so if the class has at least 1 attribute, it will return 1.
            return '1';
        } else {
            return '0';
        }
    }
}

$a = new A;
var_dump((bool)(string)$a); // false 
```

如果我在 A 类中添加一个属性，它将返回 true。您也可以不使用`(bool)`.

```
if ((string)$a) {
    echo 'I am not empty';
} else {
    echo 'I am an empty object';
} 
```

如果您不想使用`(string)`，您还有一个选择，即创建一个包含来自的代码的方法`__toString()`并调用它而不是强制转换。

参考：

*   [__toString()](http://php.net/manual/en/language.oop5.magic.php#object.tostring)
*   [get_class_vars()](http://php.net/manual/en/function.get-class-vars.php)
*   [`__CLASS__`](http://php.net/manual/en/language.constants.predefined.php)

PS：关于你所说的 -`var_dump()`在对象上做一个返回false。不，那是不可能的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T12:30:39.767

你可以试试[PHP 的魔法功能](http://php.net/manual/en/language.oop5.magic.php)

```
<?php

class Test {

    private $name = 'name';

    public $age = 20;

    public function __get($name) {
        return isset($this->$name) ? true : false;
    }

    public function __toString() {
        return true;
    }

}

$object = new Test();

var_dump($object->name); // output `true`
var_dump($object->age); // output `20`
var_dump($object->notfound); // output `false`
var_dump((bool)$object); // output `true` 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T12:31:56.357

[您可以使用__get()](http://php.net/manual/en/language.oop5.overloading.php#object.get "__得到（）")进行一些包装来操纵答案。

说类似

```
class test_class {

  private $_validProperties;
  public function __construct()
  {
    $this->validProperties = array('foo', 'bar', 'widget');
  }

  public function __get($prop)
  {
    if (isset($this->_validProperties[$prop])
    {
      return true;
    }
    return false;
  }
}

$a = new test_class();
var_dump($a->foo); //true
var_dump($a->tree); //false 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-25T13:33:42.807

如果我理解正确，我只能这样做。

希望它可以帮助你

```
<?php
class Permissions {
    private $userPermissions = array(
        1 => array(
            'Blog' => array('Post'),
        ),
    );

    private $permission;

    public function __construct($id) {
        $this->permission = $this->userPermissions[$id];
    }

    public function __get($name) {
        if(isset($this->permission[$name])) {
            return new $name($this->permission[$name]);
        }
        return new Notfound();
    }

}

class Blog {
    private $permission;

    public function __construct($permission) {
        $this->permission = $permission;
    }

    public function __get($name) {
        if(($key = array_search($name, $this->permission)) !== false) {
            return new $name();
        }
        return new Notfound();
    }

    public function __tostring() {
        return true;
    }
}

class Post {
    public function __get($name) {
        return isset($this->$name) ? true : new Notfound();
    }
    public function __tostring() {
        return true;
    }
}

class Notfound {
    public function __get($name) {
        return false;
    }
    public function __tostring() {
        return false;
    }
}

$user = new Permissions(1);
var_dump('Blog ', $user->Blog); // return Blog
var_dump('Blog:Post', $user->Blog->Post); // return Post
var_dump('News', $user->News); // return Notfound
var_dump('News:Post', $user->News->Post); // return false 
```

# xaml - 如何取消触摸xaml上的循环组合框

> ID：14521798
> 
> 赞同：1
> 
> 时间：2013-01-25T12:26:12.910
> 
> 标签：xaml, windows-8

我正在开发一个 win 8 Metrostyle 应用程序，我在应用程序中有组合框。当我用鼠标单击组合框时，它工作正常。它会弹出一个列表，我可以滚动，但是当我使用触摸组合框中的项目时，它会继续滚动。它不会停在顶部或底部

有取消它的属性吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T07:05:34.907

MSDN 论坛有[一个答案](http://social.msdn.microsoft.com/Forums/da/winappswithcsharp/thread/00807f53-8163-409a-ae84-1f30fb1a5238)。您可以做的是设置组合框的项目面板以覆盖此默认行为。

```
<ComboBox>
    <ComboBox.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel />
        </ItemsPanelTemplate>
    </ComboBox.ItemsPanel>
<ComboBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:32:57.170

从发布的第一天起，我就一直致力于开发 Windows 8 Metro 风格的应用程序。我上周遇到了同样的问题，但无法解决。过了一会儿，我从我的开发机器上卸载并重新安装了 Visual Studio 2012，问题就自动修复了。

你可以试一试。

# file - 将多个文本文件合并为一个

> ID：14521799
> 
> 赞同：3
> 
> 时间：2013-01-25T12:26:14.963
> 
> 标签：file, text, batch-file

我搜索了万维网高低，似乎找不到任何解决我问题的方法！我有多个要合并的文本文件。

展示例子比解释我为什么要这样做更容易。

第一个文件如下所示：

```
John
Paul
Mark
Sam
Herold 
```

该文件用作“主键”。

其余文件包含这样的每个项目的数据。一个程序每小时将这些数据生成一个新文件。

```
4
10
20
5
200 
```

我对 windows 批处理文件最熟悉，所以我试着写这样的东西：

```
for /f "tokens=*" %%A in (file1.txt) do 
    (for /f "tokens=*" %%B in (file2.txt) do (echo %%A,%%B>>combined.txt)) 
```

不幸的是，这会将每个价值写入每个人。如果这将按预期工作，最终结果将是这样的：

```
John,4,2,6,9,1,2,5,6,12,51,53,3,6,7,8,1,4,7,2,743,21,4,7,5
Paul,10,5,6,1,7,9,34,56,1,76,48,23,222,12,54,67,23,652,1,6,71,3,6,4 
```

等等。

我正在使用的软件以这种格式显示数据，并且无法更改。我对任何和所有建议持开放态度。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T13:51:16.983

您可以通过标准句柄读取批处理程序中的*多个*输入文件。请记住，0 是 Stdin，1 是 Stdout，2 是 Stderr，但这使得句柄 3 到 9 可用！下面的批处理文件对两个文件的内容进行*文件合并*；当然，这种方法最多可以组合8个文件。

```
@echo off
setlocal EnableDelayedExpansion
Rem First file is read with FOR /F command
Rem Second file is read via standard handle 3
3< file2.txt (for /F "delims=" %%a in (file1.txt) do (
   Rem Read next line from file2.txt
   set /P line2=<&3
   Rem Echo lines of both files
   echo %%a,!line2!
)) 
```

更多细节在这里：[http ://www.dostips.com/forum/viewtopic.php?f=3&t=3126](http://www.dostips.com/forum/viewtopic.php?f=3&t=3126)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:32:27.503

unix 命令[粘贴](http://en.wikipedia.org/wiki/Paste_%28Unix%29)可能是您要查找的内容。另请参阅[StackOverflow 上的这个问题](https://stackoverflow.com/questions/7031687/merge-2-txt-files-in-a-single-tab-delimited-file-in-batch)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:32:53.993

你可以这样做：

```
paste -d, file*.txt > combined.txt 
```

如果你`paste`有空。您可能需要安装 cygwin，或在 *nix 机器上工作。（您确实说过您愿意接受所有建议！）这依赖于按顺序命名的数据文件。如果你想调整顺序，你可以把它拼出来而不是使用 glob。

# javascript - 从函数中打开带有 iframe 的 fancybox 弹出窗口

> ID：14521803
> 
> 赞同：4
> 
> 时间：2013-01-25T12:26:44.487
> 
> 标签：javascript, jquery, fancybox, lightbox

我已经在 Stackoverflow 中进行了足够多的搜索，但我无法找到一个线程来回答我的问题。

下面是我的场景，

```
function openVideo(videoid,urlid){
        var videourl = 'http://localhost/ptchoice-local/welcome/video/'+videoid+'/'+urlid;

        $("a#video_link").fancybox({
                    'type': 'iframe', 
            'width' : 1000,
            'height' : 600,
            'autoDimensions' : false,
            'autoScale' : false,
            'href' : videourl
        });

    $("a#video_link").trigger('click');
    return false;
} 

<a href="#" onclick="openVideo('2134sdf234532sdfs324234','1')">Show video</a> 
```

因此，我想在单击锚标记本身中的“openVideo”功能时设置 href 值。

Fancybox 版本：jquery.fancybox-1.3.4.pack.js

请就此提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T14:37:34.733

如果我正确理解了您的问题，这应该对您有用：

需要给anchor添加一个ID：

```
<a href="#" id="showVideo">Show video</a> 
```

jQuery：

```
$("#showVideo").click(function () {
    var videourl = 'http://localhost/ptchoice-local/welcome/video/2134sdf234532sdfs324234/1';

    $("#video_link").fancybox({
        'type': 'iframe', 
        'width' : 1000,
        'height' : 600,
        'autoDimensions' : false,
        'autoScale' : false,
        'href' : videourl
    });

    $("#video_link").trigger('click');
}); 
```

由于在您的示例中对 videoid 和 urlid 进行了硬编码，因此我在这里也做了同样的事情。如果需要，它们可以是变量——只需以相同的方式设置它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-29T07:16:00.083

你可以这样做。

```
function openVideo(videoid,urlid) {
    var videourl = 'http://localhost/ptchoice-local/welcome/video/'+videoid+'/'+urlid;
    $.fancybox.open({
        href: videourl,
        type: 'iframe',
        padding: 0
    });
} 
```

# ios - iOS UIScrollView 微调

> ID：14521804
> 
> 赞同：0
> 
> 时间：2013-01-25T12:26:47.840
> 
> 标签：ios, uiscrollview, performance

在 Apple 的应用程序中，我注意到滚动非常完美。一切都很好，当你停下来时，它就会停下来。您可以拥有一个巨大的图像并直接移动到任何位置并保持在那里。

我想提供相同的 UE，但是对于我的应用程序，如果内容超过滚动视图的大小（应该如此 - 否则滚动视图有什么意义？）滚动视图永远不会停留，你有拖动以查看边缘上的内容，然后它会弹回并再次隐藏它。非常烦人，特别是如果那里有像按钮这样的活动内容。

我不是 iOS 专家，例如，我最近才发现 viewWillAppear 对 UIScrollView 的重要性。是否有关于如何获得完美坚如磐石的滚动的简明参考？（即不是 Apple 的开发文档！）

谢谢阅读，

益民

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:00:00.850

你是在设置`contentSize`属性`UIScrollView`吗？

```
scrollView.contentSize = CGSizeMake(2000, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:18:18.377

苹果可以访问我们没有的内部结构，因此它的产品往往表现更好。在 iOS 中滚动基本上是接受或离开。遵循教程中的指导方针，它们都有片状滚动，特别是在缩放时边缘并不总是可见。

# axapta - 在 Numbersequences 中将年份设置为前缀

> ID：14521813
> 
> 赞同：0
> 
> 时间：2013-01-25T12:27:22.457
> 
> 标签：axapta, dynamics-ax-2012, number-sequence

在 AX 2012 中，我想在 ID 字段中添加年份（例如 2011）作为前缀。

例如，我在 AX 中创建了一个新客户。这个新客户的 ID 应该是：2013-00000123

是否可以在段中设置年份而不是对其进行编码。

我怎样才能做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:09:19.723

如果 Sshaheen 提出的“*固定*”解决方案不适合您的需求，并且您**确实**需要获取年度动态值，则唯一合适的解决方案是通过 X++ 代码开发它，在*CustTable*表或类中（只需找到其中获得了新的序列号）。

无论如何，正如 Sshaheen 所说，我建议在数列上使用一个常数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:36:38.760

最简单的方法是[创建一个新的数字序列](http://dynamicsuser.net/forums/p/53329/279140.aspx)并制作两个段，一个是恒定的（2013 年），另一个是字母数字。然后，转到 AR 参数并将客户设置为您的新编号序列。但是，您需要在每年的第一天执行此操作以更改常数。

# iphone - UILabel 只能访问键盘字母

> ID：14521817
> 
> 赞同：0
> 
> 时间：2013-01-25T12:27:29.853
> 
> 标签：iphone, xcode

谁能告诉如何通过键盘仅访问字母。数字和特殊字符不应输入到`UILabel`.

我是 iOS 编程的新手，我正在从最后 2 个小时的无用中搜索这个。帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:32:36.377

尝试这个 ...

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range 
{
     static NSCharacterSet *charSet2 = nil;
   if(textField==txtfirstname)
  {
    if(!charSet2)
    {

    charSet2 = [[NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ "] invertedSet];

    } 
        NSRange location = [string rangeOfCharacterFromSet:charSet2];
        return (location.location == NSNotFound);
  }
} 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:37:03.300

要获得通知，您必须使用 UITextField 的委托功能。如果你使用 UILabel。您可能必须继续使用键盘通知。相反，您可以使用 UITextField。您可以使用 UITextField 边框样式属性使其看起来像 UILabel。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
    { 
        NSCharacterSet *myCharSet = [NSCharacterSet characterSetWithCharactersInString:@"0123456789"];
        for (int i = 0; i < [string length]; i++) 
        {
            unichar c = [string characterAtIndex:i];
            if (![myCharSet characterIsMember:c]) 
            {
                return YES;
            }
            else 
            {
                return NO;
            }
         }
    } 
```

# jquery - Grails formRemote multipart catch data onSucess

> ID：14521819
> 
> 赞同：1
> 
> 时间：2013-01-25T12:27:41.257
> 
> 标签：jquery, ajax, grails, multipart

我只是在使用 Grails 进行照片上传，当我使用 g:form 一切正常时，文件被解析、转换并放入控制器中的会话中，作为响应，我渲染了一个包含照片和一些隐藏输入的模板，因为下一步是裁剪图像并发送回新坐标。

这是“上传表单”代码：

```
<g:form name="uploadForm" onSuccess="sucess()" enctype="multipart/form-data" url="[controller:ProfileEditor, action:"preview${type.capitalize()}", params:[profilId:profilId]]" >
<input type="file" name="${type}" />
<input type="submit" value="<g:message code="button.${type}.upload" />">
</g:form>
<div id="uploadPreview"></div>
<script type="text/javascript">
    function success() {
        $('#uploadPreview').html(data);
    alert("upload complete");   
}
</script> 
```

我希望将响应插入

```
('#uploadPreview') 
```

而不是单击提交按钮，浏览器导航到 url-attr 中指定的 url，其中包含带有图像的模板

问题是当我使用 g:formRemote 时没有发布数据，就像 enctype="multipart/form-data" 被完全忽略一样，afaik 通过 ajax 上传文件有点棘手，我们已经用 jquery 解决了这个问题form.js 和它的 ajaxForm，它不需要 formRemote，并且可以在同一页面上上传照片，但我们不能再使用它，它会在 chrome 中随机导致严重的会话问题和脚本错误/ium 和歌剧，所以我必须找到另一种方式

这是简单的 form.js 方式，在上面的代码中 sucessFunction 是：

```
-       var options =  {
-           beforeSubmit : function() {
-               uploadPreview.empty();
                },  
-           complete : function(xhr) {
-               percent.empty();
-               uploadPreview.html(xhr.responseText);
-           }
-       };
-       $('#uploadForm').ajaxForm(options); 
```

我想知道是否有一个简单的解决方案来使用 formRemote 将文件作为 formData 发布并更新 div，因为在包装表单内进行裁剪的 ajax-foto 上传是常见的事情？

提前致谢

# spring-mvc - Spring组件扫描多个目录

> ID：14521830
> 
> 赞同：0
> 
> 时间：2013-01-25T12:28:34.427
> 
> 标签：spring-mvc, portlet

我需要将这些目录添加到我的应用程序中。这实际上有效：

```
<context:component-scan base-package="web.controllers"/>
<context:component-scan base-package="web.controllers.gec"/>
<context:component-scan base-package="web.controllers.gec.costs"/>
<context:component-scan base-package="web.controllers.gec.pay"/> 
```

Bu我想知道我怎么能用一行代码做到这一点。就像是：

```
 <context:component-scan base-package="web.controllers">
       <context:include-filter type="regex" expression=".*.*"/>
 </context:component-scan> 
```

有什么帮助或想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:00:40.813

```
<!-- The controllers are autodetected POJOs labeled with the @Controller annotation. -->
<context:component-scan base-package="com.company.app" use-default-filters="false">
    <context:include-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
</context:component-scan> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:49:28.413

抱歉，但实际上我之前发布的解决方案可以正常工作：

```
<context:component-scan base-package="web.controllers">
   <context:include-filter type="regex" expression=".*.*"/>
</context:component-scan> 
```

# c# - 使用断言扩展 Simple.Data

> ID：14521831
> 
> 赞同：3
> 
> 时间：2013-01-25T12:28:39.097
> 
> 标签：c#, assertions, simple.data, fluent-assertions

我正在使用这个非常好的迷你 ORM **Simple.Data**来设置大量测试数据，快速而简单。我真的很想将它扩展到断言。例如我想断言计数：

```
Db.MyTable.GetCount(); <- Returns a dynamic 
```

这样我就可以或多或少地像您对 FluentAssertions 所做的那样进行评估。它可能看起来像这样：

```
Db.MyTable.GetCount().ShouldBe(X); 
```

**但是我发现在不失去动态优势的情况下**很难做到这一点。

有没有人暗示如何做到这一点，或者在合理范围内是否有可能？

我目前正在 GitHub 上遍历 src，试图找到一种我可以在本地执行此操作的方法，并**[临时玩弄](http://code.google.com/p/impromptu-interface/)**以找到一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:00:38.907

可悲的是，对此没有满意的答案。正如 Jon S 和 Eric L 所解释的，动态方法和扩展方法不能混合使用：[扩展方法和动态对象](https://stackoverflow.com/questions/5311465/extension-method-and-dynamic-object-in-c-sharp)

与该问题一样，答案是调用 ShouldBe 作为静态方法：

```
AssertionExtensions.ShouldBe(Db.MyTable.GetCount(), 3); 
```

或将方法的返回值内联转换为已知类型：

```
((int)Db.MyTable.GetCount()).ShouldBe(3); 
```

或者，正如您正在调查的那样，使用 Impromptu 通过 GetCount 方法将接口应用于 MyTable。我猜你已经看过我关于 Simple.Data 和 Impromptu 的博文，但如果你没有看过：http: [//blog.markrendle.net/2012/10/12/howto-dial-up-the-static -关于简单数据/](http://blog.markrendle.net/2012/10/12/howto-dial-up-the-static-on-simple-data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:46:36.660

在您正在创建的类中，为什么不创建自己的自定义断言类并使您正在创建的对象类继承自它们。

```
public class MyClass : MyCustomExceptionClass
{

} 
```

这样，您可以更轻松地以您想要的方式测试方法

# spring - java.lang.IllegalArgumentException: ::0 处的错误找不到引用的切入点

> ID：14521832
> 
> 赞同：3
> 
> 时间：2013-01-25T12:28:44.810
> 
> 标签：spring, aop, spring-aop, multipart, pointcut

我对 Spring AOP 真的很陌生。在我的应用程序中，我配置[`HiddenHttpMethodFilter`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)了将方法参数转换为 HTTP 方法，并使 Spring 能够处理其他 HTTP 方法，例如 等`DELETE`，`PUT`包括`GET`和`POST`.

有时需要禁用此功能，尤其是在处理多部分请求时。为了在特定请求时禁用它（关于 mulripart），我使用了以下代码。

```
package resolver;

import javax.servlet.http.HttpServletRequest;
import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Pointcut;
import org.springframework.util.Assert;
import org.springframework.web.multipart.MultipartResolver;

/**
 * Disables the spring multipart resolver for specific client requests and
 * therefore keeps the request intact so that controllers can process it in
 * whatever way they wish. This behaviour is triggered by a particular GET
 * parameter in the client request so it is configurable.
 * @see MultipartResolver
 */
@Aspect
public final class MultipartResolverDisablingAspect
{
    /**
     * GET parameter which, if present in request, enables advice.
     */
    private static final String DISABLING_HTTP_REQUEST_PARAMETER_KEY = "_multipartResolverDisable";

    private static boolean disablingParameterExists(final HttpServletRequest request) 
    {
        Assert.notNull(request);
        return request.getParameter(DISABLING_HTTP_REQUEST_PARAMETER_KEY) != null;
    }

    /**
     * If above GET parameter exists in request then prompt the spring multipart
     * resolver to always tell spring that request is not of type multipart.
     * Spring then does not process the request any further.
     * @param pjp
     * @param request
     * @return
     * @throws Throwable
     */
    @Around("isMultipartOperation() && args(request)")
    public Object disableIsMultipartOperation(final ProceedingJoinPoint pjp, final HttpServletRequest request) throws Throwable 
    {

        Assert.notNull(pjp);
        Assert.notNull(request);

        if (disablingParameterExists(request)) 
        {
            return Boolean.FALSE;
        }

        return pjp.proceed();
    }

    /**
     * Applies to any implementation of {@linkplain MultipartResolver}
     */
    @SuppressWarnings("unused")
    @Pointcut("execution(public boolean " + "org.springframework.web.multipart.MultipartResolver." + "isMultipart(javax.servlet.http.HttpServletRequest))")
    private void isMultipartOperation() {}
} 
```

在`application-context.xml`文件中，需要以下 xml。

```
<aop:aspectj-autoproxy proxy-target-class="false" />
<bean class="resolver.MultipartResolverDisablingAspect" /> <!--Registers the above bean (class)--> 
```

此代码取自[这篇](http://dhruba.name/2008/12/27/implementing-single-and-multiple-file-multipart-uploads-using-spring-25/)文章的“多部分解析器禁用方面”部分。

它旨在通过[`HiddenHttpMethodFilter`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)将`GET`参数`multipartResolverDisable=1`用作**上面代码指定**的查询字符串来禁用多部分处理，以便可以像往常一样使用[公共](http://commons.apache.org/fileupload/)`multipartResolverDisable=1`文件上传（当作为查询字符串提供时）

* * *

实际的问题仍然不在图片中。此方法之前在以下环境中正常工作（使用 NetBeans 6.9.1）。

*   春天 3.2.0
*   带有 Servlet API 2.5 的 Apache Tomcat 6.0.26.6。

最近我用具有 Servlet API 3.0 的 Apache Tomcat 7.0.35 升级了 NetBeans 7.2.1。**Spring 版本与之前相同**- Spring 3.2.0。

通过此更新，上述方法导致以下异常。

```
Caused by: org.springframework.beans.factory.BeanCreationException:
Error creating bean with name
'org.springframework.transaction.config.internalTransactionAdvisor':
Cannot resolve reference to bean
'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0'
while setting bean property 'transactionAttributeSource'; nested
exception is org.springframework.beans.factory.BeanCreationException:
Error creating bean with name
'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0':
Initialization of bean failed; nested exception is
**java.lang.IllegalArgumentException: error at ::0 can't find referenced
pointcut isMultipartOperation** 
```

其中`isMultipartOperation()`是上述类中的最后一个方法。

代码可能会有一点小改动，但我对 AOP 知之甚少，无法在这段好看的代码中找出这个异常的原因。

这个异常的原因是什么？它必须与 Servlet API 做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:54:30.013

我认为您应该将周围的建议更改为

```
@Around("isMultipartOperation(..) && args(request)") 
```

你的切入点注释

```
@Pointcut("execution(* org.springframework.web.multipart.MultipartResolver.isMultipart(..)) && args(request)") 
```

和切入点注释方法

```
private void isMultipartOperation(HttpServletRequest request) {} 
```

从记忆中，我遇到了这个问题，我试图用一些建议包装一个切入点，并且该建议对切入点有不同数量的参数。在您的代码中，您似乎使用 @Around 来定位带有 args(request) 的切入点，但您的切入点方法没有这样的参数。

# c# - WPF 应用程序中的 MessageBox 仍然显示未设置样式

> ID：14521835
> 
> 赞同：3
> 
> 时间：2013-01-25T12:29:01.593
> 
> 标签：c#, wpf

我仔细按照说明如何在 WPF 应用程序中更改标准对话框的样式，所以我创建了一个 app.manifest，从创建的模板中取消了这部分的注释

```
<!-- Enable themes for Windows common controls and dialogs (Windows XP and later) -->
<dependency>
   <dependentAssembly>
  <assemblyIdentity
      type="win32"
      name="Microsoft.Windows.Common-Controls"
      version="6.0.0.0"
      processorArchitecture="*"
      publicKeyToken="6595b64144ccf1df"
      language="*"
    />
</dependentAssembly> 
```

检查项目属性： Icon and Manifest-> Manifest selected app.manifest in combo。重建项目...

仍然得到这样的坏风格：

![作风不好](../Images/2cb0d6604e6d0b66326a81a44a92991b.png)

有任何想法吗？

使用 64 位 Win 7，VS 2010 SP1，为 x86 构建应用程序

谢谢回答

*** 编辑 *** Anton Tykhyy 作为评论回答了这个问题。谢谢安东

引用 Anton 的评论：“您是从 VS 内部运行项目吗？尝试直接运行可执行文件（开始->运行或资源管理器）。– Anton Tykhyy”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T15:14:36.147

当您从 VS 内部运行项目时，VS 实际运行的可执行文件不是您的构建输出 .exe，而是扩展名为 .vshost.exe 的特殊插页式可执行文件。此插页式可执行文件负责 VS 调试器和新进程之间的通信，但它没有您指定的图标或清单。这就是为什么你会得到不同的行为。

顺便说一句，在“调试”选项卡下的项目设置中有一个名为“启用 Visual Studio 托管进程”的复选框。如果您取消选中它，VS 将直接运行您的输出 .exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:08:14.703

您在 assemblyIdentity 标记中指定的所有属性都是正确的，并给出您获得的结果。样式“不好”，因为您指定了“旧”样式。（故意？）。

您的问题既不是操作系统版本也不是 VS，而是您的目标程序集

斯蒂芬妮·哈利米

# php - 1 页上有 2 个选择下拉菜单的问题

> ID：14521838
> 
> 赞同：0
> 
> 时间：2013-01-25T12:29:11.227
> 
> 标签：php, select, drop-down-menu, joomla, html-select

我在 Joomla 中有一个问题，我有一个从菜单创建选择下拉列表的模块。

如果我在页面上只有 1 个下拉菜单，则效果很好 - 如果我通过创建从另一个菜单（即 dropdown1 和 dropdown2）拉出的模块的另一个实例来创建 2 个下拉菜单，则页面崩溃。

我想知道这是否与我的模块 default.php tmpl 文件中的以下代码有关：

```
<?php
// No direct access.
defined('_JEXEC') or die;
?>
<form name="SelMenFrm">
<?php if($params->get('showLabel') == 1) echo $params->get('selectLabel')."&nbsp;"; ?>
<select name="SelMenSel" class="<?php echo $class_sfx;?>" onchange="javascript:location.href=document.SelMenFrm.SelMenSel.options[document.SelMenFrm.SelMenSel.selectedIndex].value;">
<option><?php echo $params->get('topText');?></option>
<?php
foreach ($list as $i => &$item) :
    // Determine if item shoud be set as selected
    $selected = "";
    if (($item->home == 0) && ($item->id == $active_id)) $selected = "selected=\"selected\"";
    // Set indent
    if ($item->level == 1) $indent = "";
    if ($item->level == 2) $indent = "&nbsp;-&nbsp;";
    if ($item->level == 3) $indent = "&nbsp;-&nbsp;&nbsp;-&nbsp;";
    if ($item->level == 4) $indent = "&nbsp;-&nbsp;&nbsp;-&nbsp;&nbsp;-&nbsp;";
    if ($item->level == 5) $indent = "&nbsp;-&nbsp;&nbsp;-&nbsp;&nbsp;-&nbsp;&nbsp;-&nbsp;";
    if ($item->level == 6) $indent = "&nbsp;-&nbsp;&nbsp;-&nbsp;&nbsp;-&nbsp;&nbsp;-&nbsp;&nbsp;-&nbsp;";
    echo "<option ".$selected."value=\"".$item->flink."\">".$indent.$item->title."</option>";
endforeach;
?>
</select></form> 
```

任何想法/帮助将不胜感激；）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:58:36.303

if you're loading the modules with this code:

```
<select name="SelMenSel" class="<?php echo $class_sfx;?>" onchange="javascript:location.href=document.SelMenFrm.SelMenSel.options[document.SelMenFrm.SelMenSel.selectedIndex].value;" 
```

then they can't work, as they would have the same id and onchange is relying on the id to identify the select: document.SelMenFrm.SelMenSel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:50:23.780

```
$indent = str_repeat("&nbsp;",($item->level>=1?($item->level-1):0)); 
```

那个怎么样？

# c# - 如何在没有客户端发送任何请求的情况下将消息从 Windows azure 服务器发送到客户端移动应用程序（iOS）？

> ID：14521846
> 
> 赞同：1
> 
> 时间：2013-01-25T12:29:43.427
> 
> 标签：c#, asp.net-mvc, azure, asp.net-web-api

我在服务器端维护一个队列，用户可以向其中添加文件。应用程序上显示不同用户添加的文件的队列必须动态更新。我不想定期轮询服务器以检查队列中是否有任何新项目。有什么方法可以通知客户端应用程序有新项目已到达队列，您现在必须轮询服务器以检索该文件？而且我不想要推送通知，因为推送通知会通知用户，我宁愿希望在内部处理消息，并且应用程序应该在收到消息时轮询服务器

如果您有任何想法，请告诉我，因为这个问题，我对我的项目感到震惊。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:48:47.673

推送通知正是为此目的，尽管您的应用程序最初必须注册（出于安全考虑） - [http://weblogs.asp.net/scottgu/archive/2012/12/04/ios-support-with-windows-azure-移动服务现在与推送通知.aspx](http://weblogs.asp.net/scottgu/archive/2012/12/04/ios-support-with-windows-azure-mobile-services-now-with-push-notifications.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:20:57.930

比特相，

您可以使用**Windows Azure 服务总线通知中心**。它在几天前（甚至不到一周）刚刚发布。它将支持多平台推送通知（ios，android，windows 8，win phone now）

[http://msdn.microsoft.com/library/jj927170.aspx](http://msdn.microsoft.com/library/jj927170.aspx)

[检查此链接](http://channel9.msdn.com/Blogs/Subscribe/)。它有一些很棒的视频教程可以开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T06:57:13.723

我找到了我的问题的答案。它的网络套接字！！Web Sockets 可用于维护客户端和服务器之间的持久连接。并且有一个库 - SignalR

SignalR 是为 ASP.Net 开发人员引入的一个新库，用于构建实时 Web 应用程序，其中服务器需要不断地将数据推送到客户端。

SignalR 的一些链接

[http://blogs.msdn.com/b/webdev/archive/2012/12/17/signalr-building-real-time-web-applications.aspx](http://blogs.msdn.com/b/webdev/archive/2012/12/17/signalr-building-real-time-web-applications.aspx)

[http://www.mikesdotnetting.com/Article/206/SignalR-And-Knockout-In-ASP.NET-Web-Pages-Using-WebMatrix](http://www.mikesdotnetting.com/Article/206/SignalR-And-Knockout-In-ASP.NET-Web-Pages-Using-WebMatrix)

# css - Ember.js 路由器：如何动画状态转换

> ID：14521847
> 
> 赞同：25
> 
> 时间：2013-01-25T12:29:43.793
> 
> 标签：css, animation, ember.js, router

有人找到动画状态转换的好方法了吗？

路由器立即从 DOM 中删除视图。问题是我不能推迟到动画结束。注意：我使用的是*v1.0.0-pre.4*。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T23:01:08.193

Billy's Billing 刚刚发布了一个支持动画转换的[Ember 模块。](https://github.com/billysbilling/ember-animated-outlet)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-10T20:42:44.867

我知道这已经很老了，但今天这个特定于上下文的动画的最佳解决方案可能是[ember liquid fire](https://github.com/ember-animation/liquid-fire)。

它允许您在转换文件中执行以下操作：

```
export default function(){
  this.transition(
    this.fromRoute('people.index'),
    this.toRoute('people.detail'),
    this.use('toLeft'),
    this.reverse('toRight')
  );
}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-05T09:41:56.653

我将扩展 Lesyk 的答案。如果您需要以 DRY 方式将其应用于多个视图，您可以创建一个自定义类，如下所示：

```
App.CrossfadeView = {
  didInsertElement: function(){
    //called on creation
    this.$().hide().fadeIn(400);
  },
  willDestroyElement: function(){
    //called on destruction
    this.$().slideDown(250);
  }
}; 
```

然后在您的代码中将其应用于各种视图类。由于 Ember 依赖于 jQuery，您几乎可以使用任何 jQuery 动画。

```
App.IndexView = Ember.View.extend(App.CrossfadeView);
App.PostView = Ember.View.extend(App.CrossfadeView); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-10T07:32:34.623

在我的应用程序上遇到了同样的要求。尝试了[Ember Animated Outlet](https://github.com/billysbilling/ember-animated-outlet)，但没有给出我需要的粒度（特定于元素的动画）。

对我有用的解决方案如下 -

***将linkTo*更改为一个*动作***

```
{{#linkTo "todos"}}<button>Todos</button>{{/linkTo}} 
```

变成...

```
<a href="#/todos" {{action "goToTodos"}}><button>Todos</button></a> 
```

**在当前控制器中为 goToTodos 创建方法**

```
App.IndexController = Ember.Controller.extend({
    goToTodos: function(){

        // Get Current 'this' (for lack of a better solution, as it's late)
            var holdThis = this;

        // Do Element Specific Animation Here
            $('#something').hide(500, function(){

                // Transition to New Template
                    holdThis.transitionToRoute('todos');

            });

    }
}); 
```

**最后——要在 Todos 模板上的元素中设置动画，请在视图上使用 didInsertElement**

```
App.TodosView = Ember.View.extend({
    didInsertElement: function(){

        // Hide Everything
            this.$().hide();

        // Do Element Specific Animations Here
            $('#something_else').fadeIn(500);

    }
}); 
```

到目前为止，这是我为元素特定的过渡动画找到的最优雅的解决方案。如果有更好的，很想听听！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-06T09:35:46.247

我找到了另一个在视图中实现动画的插入式解决方案：[ember-animate](https://github.com/gigafied/ember-animate)

例子：

```
App.ExampleView = Ember.View.extend({

    willAnimateIn : function () {
        this.$().css("opacity", 0);
    },

    animateIn : function (done) {
        this.$().fadeTo(500, 1, done);
    },

    animateOut : function (done) {
        this.$().fadeTo(500, 0, done);
    }
} 
```

Demo：[作者的个人网站](http://www.gigafied.com/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-25T17:42:34.253

```
App.SomeView = Ember.View.extend({
  didInsertElement: function(){
   //called on creation
   this.$().hide().fadeIn(400);
  },
  willDestroyElement: function(){
   //called on destruction
   this.$().slideDown(250)
  }
}); 
```

# iphone - 核心数据建模基础

> ID：14521849
> 
> 赞同：0
> 
> 时间：2013-01-25T12:29:54.143
> 
> 标签：iphone, ios, xcode, core-data

我正在开发一个用于学习目的的应用程序。它是一个使用 NSXMLParser 的提要解析器。除了坚持，几乎所有事情都完成了。我已经学习了归档并在我的项目中实现了它，但是为了转向更好的解决方案并使我的学习曲线更好，我决定将我的应用程序移动到 Core Data。

下面是我的解析器代码。FeedChannel 正在处理 feedburner 的提要中的频道属性，并获取 FeedItem 文件正在处理的“项目”。

**FeedChannel.h**

```
#import <Foundation/Foundation.h>

@interface FeedChannel : NSObject <NSXMLParserDelegate> {

    NSMutableArray *items;
    NSMutableString *currentString;
}

@property (nonatomic, assign) id parentParserDelegate;
@property (nonatomic, retain) NSString *title;
@property (nonatomic, retain) NSString *sDescription;
@property (nonatomic, readonly) NSMutableArray *items;

@end 
```

**饲料项目.h**

```
#import <Foundation/Foundation.h>

@interface FeedItem : NSObject <NSXMLParserDelegate> {

    NSMutableString *currentString;

}

@property (nonatomic, assign) id parentParserDelegate;
@property (nonatomic, retain) NSString *title;
@property (nonatomic, retain) NSString *link;
@property (nonatomic, retain) NSString *creator;
@property (nonatomic, retain) NSString *pubDate;
@property (nonatomic, retain) UIImage *thumbnail;

@end 
```

我曾尝试学习 CoreData，但对于新程序员来说显然有点复杂。

目前我所做的是在我的项目中添加了CoreData框架，创建了一个模型文件，添加了两个名为FeedChannel和FeedItem的实体。我不知道该怎么做如下：

**1）我应该使用 Xcode 中的“创建托管子类”来覆盖现有文件，还是只在检查器面板中的每个条目的数据模型中提及类名，还是两种方法都相同？**

**2）如果我使用“创建托管子类”，它也使用动态而不是综合，我不知道它是否影响我的项目。**

**3）Core Data的数据模型中有UIImage类型，如何处理缩略图属性。**

最重要的问题：

**4）如何处理FeedChannel文件中保存FeedItem中项目的NSMutableArray“项目”？我需要以某种方式建立一对多的关系吗？**

希望它能回答新手面临的所有与核心数据相关的基本问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:55:12.827

1.  “创建托管子类”快捷方式就是这样。它真正做的只是子类 NSManagedObject（与 NSObject 相比）并为您的所有属性和关系创建属性。所以不，你不必使用它。如果您愿意，您可以手动执行相同的操作。

2.  是的，托管对象的属性必须是`@dynamic`. 这告诉编译器该属性将在运行时由核心数据解析。

3.  您想要`transformable`处理任何对象的类型 - 您的属性将是 type `id`，通用对象。

4.  核心数据将替换您的数组。您将`to-many`在频道和提要项目之间建立关系。确保`to-one`在提要项和频道之间创建反向关系，并将关系标记为反向。

有一些关于使用 Core Data 的很好的教程和书籍。乍一看似乎有点吓人，但实际上并没有那么糟糕。

# c++ - OpenSceneGraph 可以为 RGB 颜色使用更少的字节吗？

> ID：14521851
> 
> 赞同：2
> 
> 时间：2013-01-25T12:30:01.793
> 
> 标签：c++, rgb, openscenegraph

我正在使用每个顶点的颜色将一个大型彩色点云加载到*OpenSceneGraph中。*`Vec4Array`这是非常低效的内存，每个顶点需要 16 个字节的颜色信息，我想存储 4 个或更少。我正在处理的数据集很大，所以这是一个重大问题。

有什么方法可以让 OpenSceneGraph 使用较低分辨率的颜色（例如 24 位颜色绰绰有余）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T00:51:10.223

您可以使用顶点属性和着色器将 XYZ 和颜色编码为尽可能少的位，然后在着色器中将它们解码出来。但除此之外，OpenGL（和 OSG）并没有真正给你很大的灵活性。

许多游戏架构（游戏机和移动设备使用 16 位 5-6-5 RGB 位编码方案。

# gcc - 在 MinGw 下构建完整的 gcc

> ID：14521852
> 
> 赞同：0
> 
> 时间：2013-01-25T12:30:02.443
> 
> 标签：gcc, compiler-errors, mingw

我正在尝试使用 cc、c++、fortran、objc 和 java 在 MinGw 下构建 gcc 4.7.2。当它到达最终链接级别的编译 libgcc 时，它会给出错误。

> 找不到 dllcrt2.o

其次是

> 找不到 -lmingwthrd、-lmingw32、-lmingwex、-lmoldname、-lmsvcrt、-ladvapi、-lshell32、-luser32、-lkernal32

我认为这是因为 ld.exe 找不到 /mingw/lib 目录。有什么解决方案可以解决这个问题吗？我尝试谷歌搜索但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:57:34.423

您尝试构建自己的集合的 MinGw 编译器有什么问题？

配置/构建 GCC 是一项复杂的任务（在如此恶劣的环境中更是如此），一个小小的失误可能会导致你看到的结果。重新检查每个步骤。

获取 MinGw 的源代码副本并研究他们是如何做到的，检查他们的文档。

# ruby-on-rails - 如何在测试环境中设置 dalli 缓存？

> ID：14521857
> 
> 赞同：5
> 
> 时间：2013-01-25T12:30:23.293
> 
> 标签：ruby-on-rails, caching, dalli

我将使用 Dalli 缓存作为键值存储。

通常在生产和开发环境中我们有线

```
config.cache_store = :dalli_store 
```

所以我们可以使用`Rails.cache`构造来读取和写入缓存。

但是通常在测试环境中，我们没有这个配置行。

在测试环境中设置缓存以测试我的存储逻辑的正确方法是什么？

PS我正在使用Linux（Ubuntu）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-28T05:57:06.007

dalli 是缓存服务（memcached）的客户端，无论环境如何，都可以全局设置，即在您的 config/application.rb 中

```
config.cache_store = :dalli_store 
```

在测试环境中禁用缓存是一种常见的方法，请检查 config/environments/test.rb

```
config.action_controller.perform_caching = false 
```

所以你可以为测试环境启用它，但它可能会导致一些奇怪的冲突，最好的可能是只为特定的规格启用它：

```
before do # enable caching
  @caching_state = ActionController::Base.perform_caching
  ActionController::Base.perform_caching = true
end

after do # disable caching
  ActionController::Base.perform_caching = @caching_state
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T09:06:14.857

我假设您在 Ubuntu 上，并在谷歌上搜索了“ubuntu install memcached rails”，并找到了几页详细信息。以下是关键点。

**安装 memecache**

```
sudo apt-get install memcached 
```

**重新启动 memcahce**

```
/etc/init.d/memcached restart 
```

# android - Flash Air：“new Video()”使屏幕变黑

> ID：14521862
> 
> 赞同：0
> 
> 时间：2013-01-25T12:30:45.443
> 
> 标签：android, flash, video, air

我正在使用 Flash Builder 4.6 开发 Flash AIR 3.5 Android 应用程序。

如果我将此代码放在我的应用程序的开头：

```
import flash.media.Video;
...
        new Video(); 
```

然后屏幕变黑（在 XPeria Arc S 上测试）。应用程序**正在运行**（我能听到），我只是没有得到视觉反馈。

如果事实上，屏幕在任何时候都会变黑，我可能会放一个“新视频（）”：即使应用程序已正确启动并正在运行！

当然，“new Video()”本身并不能提供任何服务，我只是想查明问题的根源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T01:32:48.940

尝试将应用的渲染模式设置为“GPU”，然后在应用配置 xml 中添加`<containsVideo>false</containsVideo>`为节点的子`<android />`节点。

# javascript - 双击事件在 Internet Explorer 中对选项列表不起作用

> ID：14521863
> 
> 赞同：5
> 
> 时间：2013-01-25T12:30:45.477
> 
> 标签：javascript, jquery, html

HTML 代码：

```
<select name="options" id="options" style="width: 100%;" size="12">
        <option id="optList1" value="1">
            1\. ABC
        </option>
</select> 
```

Javascript：

```
document.getElementById('optList1').ondblclick = function () {
            alert("asf");
        }; 
```

我在 select 中有选项列表，在示例中只有一项。问题是我需要在双击此选项时打开对话框......它在 Chrome 和 Firefox 中工作正常，问题很常见，在 IE 中不起作用......

**[演示](http://jsfiddle.net/yw6kv/5/)**

任何帮助都非常感谢......在此先感谢......！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:49:15.040

```
document.getElementById('options').ondblclick = function () {
       var optio = options.options;
var id      = options[options.selectedIndex].id;
   if(id == "optList1")
   {
      alert("abc");
   }
   else 
   {
      alert("xyz")
   }
};

<select name="options" id="options" style="width: 100%;" size="12">
    <option id="optList1" value="1.1">
        2\. Enter/Update W/H Data Manually
    </option>
    <option id="optList2" value="1.1">
        1\. Enter/Update W/H Data Manually
    </option> 
```

试试这段代码，它在 IE 上运行良好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:34:13.167

IE 不支持`<option>`标签上的事件。

考虑双击事件似乎也很奇怪，`<option>`因为这不是大多数用户习惯做的事情

# c++ - 动态图算法的实现，在删除边后保持图的连通分量的数量

> ID：14521868
> 
> 赞同：4
> 
> 时间：2013-01-25T12:30:58.143
> 
> 标签：c++, algorithm, graph

我有一个图表，我想获得连接组件的数量。这可以通过 BFS 或 DFS 遍历轻松完成。但之后，我将迭代地删除图的某些边，并再次询问结果图中的连通分量的数量。

一个简化的使用示例是：

```
graph G = some_graph();
while (some_condition) {
    cout << connected_components(G);
    edge e = some_edge_of(G);
    G.delete(e);
} 
```

我已经找到了几种处理这个主题的动态图算法（使用允许更快地重新计算连接组件数量的数据结构，而不是对图进行另一次遍历）。

但是你能节省我一些时间来实现它们并为我提供一些免费实现的链接吗？（最好在 C 或 C++ 中）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T13:12:01.910

[Boost Graph Library](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/)有您正在寻找的东西，尽管从我的角度来看，学习曲线非常陡峭......

有[一本书](http://search.barnesandnoble.com/Boost-Graph-Library/Jeremy-G-Siek/e/9780201729146)关于它。

# c++ - SDL2_Image 所需的 png/jpeg dll

> ID：14521870
> 
> 赞同：1
> 
> 时间：2013-01-25T12:31:01.777
> 
> 标签：c++, dll, sdl

我正在尝试使用 SDL2_Image 加载 png 和 jpeg 文件。但是，我在获取正确的 dll 文件时遇到了一些问题。显然库在运行时需要这两个文件：

`libjpeg-8.dll`

`libpng15-15.dll`

这两个文件的可靠来源在哪里，或者我如何自己构建它们？我正在使用 Windows 7 并尝试制作 32 位应用程序。

网络上有很多这些`.dll`文件的副本，但我检查的每个文件似乎都有不同的大小，所以我认为它们不可靠 - 至少在有人告诉我*这*是文件之前......

**库**

为了让这个工作我检查了[http://www.libpng.org/pub/png/libpng.html](http://www.libpng.org/pub/png/libpng.html)并最终在这里：[http://sourceforge.net/projects/libpng/files/](http://sourceforge.net/projects/libpng/files/)。从那里我下载了最新的可用版本 - [lpng1514.7z](http://sourceforge.net/projects/libpng/files/latest/download?source=files)（+ 需要[zlib125.zip](http://sourceforge.net/projects/libpng/files/zlib/1.2.5/zlib125.zip/download)）并设法构建它，生产`libpng15.dll`- 这*几乎*是我需要的。

作为一个肮脏的黑客，我尝试重命名文件，到目前为止它似乎正在工作，但我更喜欢有一个合适的 dll。

**libjpeg**

对于 jpeg，我遵循[http://www.ijg.org/](http://www.ijg.org/)并最终下载了[jpegsr8.zip](http://www.ijg.org/files/jpegsr8.zip)，但我得到的源代码我不确定如何在 Windows 下构建（使用 Visual Studio）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T18:41:33.520

`gnuplot`具有用于 Windows 的预构建二进制文件，其中包含这些 DLL，例如参见[http://downloads.sourceforge.net/project/gnuplot/gnuplot/4.6.0/gp460win32.zip 。](http://downloads.sourceforge.net/project/gnuplot/gnuplot/4.6.0/gp460win32.zip)

或者

`Gimp for Windows`安装一大堆 DLL，包括`libjpeg-8.dll`并`libpng15-15.dll`查看[http://downloads.sourceforge.net/project/gimp-win/GIMP%20%2B%20GTK%2B%20%28stable%20release%29/GIMP%202.8.2/gimp -2.8.2-setup-1.exe](http://downloads.sourceforge.net/project/gimp-win/GIMP%20+%20GTK+%20%28stable%20release%29/GIMP%202.8.2/gimp-2.8.2-setup-1.exe)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T20:23:27.790

`libpng15.dll`应该足够好，这意味着它是 1.5 版（15_15 必须是 1.5 的第 15 版）。

至于`libjpeg`，你可以自己重建它。有关使用免费工具在 Windows 上构建它的方法（它在 Visual Studio 之外完成），请参阅此[问题。](https://stackoverflow.com/questions/12652178/compiling-libjpeg)

您可能会尝试适应`makefile`您的 Visual Studio 版本，但使用 MinGW 可能更容易。

我会将我的一个项目转换到`SDL2`本周，如果您仍然坚持使用`SDL2_Image`.

**编辑**正如我告诉你的，我正在将自己的引擎移植到 SDL2。在构建 SDL_image 时，我注意到`external`文件夹中有一个文件`VisualC`夹。该`external`文件夹包含`DLL`SDL_Image 使用的所有文件：

```
31/01/2013  12:54 AM           200,192 libjpeg-8.dll
31/01/2013  12:54 AM           211,456 libpng15-15.dll
31/01/2013  12:54 AM           466,944 libtiff-5.dll
31/01/2013  12:54 AM           222,208 libwebp-2.dll
31/01/2013  12:54 AM             2,998 LICENSE.jpeg.txt
31/01/2013  12:54 AM             4,438 LICENSE.png.txt
31/01/2013  12:54 AM             1,294 LICENSE.tiff.txt
31/01/2013  12:54 AM             1,653 LICENSE.webp.txt
31/01/2013  12:54 AM             1,450 LICENSE.zlib.txt
31/01/2013  12:54 AM            90,624 zlib1.dll
              10 File(s)      1,203,257 bytes 
```

所以不需要构建任何东西，只需从位于此处的 Mercurial 存储库同步：http: [//hg.libsdl.org/SDL_image/](http://hg.libsdl.org/SDL_image/)

# java - Java 推断类型化 HashSet 的错误类型

> ID：14521882
> 
> 赞同：4
> 
> 时间：2013-01-25T12:31:40.920
> 
> 标签：java, jsf, generics

> **可能重复：**
> [调用 TreeSet<Long>.contains(Long.valueOf(someLongValue)) 时出现 ClassCastException](https://stackoverflow.com/questions/14048382/classcastexception-when-calling-treesetlong-contains-long-valueof-somelongva)

问题请看截图：

![奇怪的类型推断问题](../Images/2019ae44cb292773e7c037885e02ed2e.png)

似乎 Typed Set 中的一个条目`cylinderIds`突然变成了类型`String`- 但这是怎么发生的呢？

该 bean 是在 JSF 页面中使用的，但我一直认为 Java 中的类型系统应该防止这种情况发生……知道这里出了什么问题吗？

在 Windows 7 上使用 1.7.0_06 64 位，应用程序在相同 Java 版本的 JBoss 7.1.0 中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:10:48.670

这不完全是 Java 的错。泛型类型信息只是在运行时丢失。Java/JSF/EL 不在编译时运行，而是在运行时运行。它在运行时看到的只是 a `Set`，而不是`Set<Long>`.

当 JSF 将提交的输入值设置为 bean 属性时，它首先检索它们，`String`因为这是 的默认返回类型`request.getParameter()`，JSF 在幕后使用它来获取请求参数。只要没有指定转换器，JSF 就会在via 反射中设置那些`String`未转换的提交值。`Set`这基本上是“幕后”发生的事情：

```
package com.stackoverflow.q14521882;

import java.lang.reflect.Field;
import java.util.Collection;
import java.util.HashSet;
import java.util.Set;

public class Test {

    private Set<Long> set = new HashSet<Long>();

    public static void main(String[] args) throws Exception {
        Test test = new Test();
        Field field = test.getClass().getDeclaredField("set");
        Object object = field.get(test);
        if (object instanceof Collection) {
            ((Collection) object).add("string");
        }
        System.out.println(test.set.iterator().next().getClass()); // CCE!
    }

} 
```

`Long[]`当您使用而不是 时，它会起作用`Set<Long>`，但鉴于它`Set`首先是，您只想保留唯一值，`Long[]`因此可能不是一个选项。为了解决它，您需要`Converter`在输入组件中显式指定 a 。您可以为此使用内置的 JSF [`LongConverter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/LongConverter.html)，它的转换器 ID 为[`javax.faces.Long`](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.faces.convert.LongConverter.CONVERTER_ID)：

```
<h:selectManyListbox ... converter="javax.faces.Long"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:38:25.903

第一个问题是您`Iterator`每次踏入`while`. 第二个问题是`Iterator`通用的，所以你最好做这样的事情：

```
Iterator<Long> cylinderIter = cylinderIds.iterator();

while(cylinderIter.hasNext()) {
    cylinderIter.next() // ...
    // do something
} 
```

第三个问题是我看不到你碰巧在哪里填充`Set`。如果您向我们展示代码，我可以为您提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:44:39.130

无需查看您的代码，我就可以回答某些事情正在改变您的集合类型：

> 泛型是通过类型擦除实现的：泛型类型信息仅在编译时出现，之后由编译器擦除。这种方法的主要优点是它提供了通用代码和使用非参数化类型（技术上称为原始类型）的遗留代码之间的完全互操作性。 **主要缺点是参数类型信息在运行时不可用，并且在与行为不良的遗留代码互操作时，自动生成的强制转换可能会失败。**然而，有一种方法可以保证泛型集合的运行时类型安全，即使在与行为不良的遗留代码互操作时也是如此。

oracle 文档的[泛型文章更好地为您解释。](http://docs.oracle.com/javase/1.5.0/docs/guide/language/generics.html)

尝试此代码以查看问题何时发生：

```
Set<Long> s = Collections.checkedSet(new HashSet<Long>(), Long.class); 
```

# r - R识别频率分布的类型

> ID：14521887
> 
> 赞同：1
> 
> 时间：2013-01-25T12:32:05.757
> 
> 标签：r, frequency-distribution

我对非正态分布的频率分布感兴趣。如果我有一个非正态分布的频率分布表。是否有可以为我识别分发类型的功能或包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:50:26.950

您可以使用该`fitdistr`功能（我认为是库 MASS）并自行检查是否找到“合适的”分布。但是我建议您先绘制函数并查看它的外观。通常不建议使用这种方法，因为您总是可以使用不同的参数来拟合分布，从而将一个分布与另一个分布混淆。如果您找到了合适的发行版，您应该根据数据对其进行测试。

编辑：例如，正态分布可能看起来像泊松分布。我认为拟合只有在你有足够的随机变量时才有用。否则，如果需要，只需从数据中提取变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:52:42.730

[您始终可以尝试使用QQ 图](http://en.wikipedia.org/wiki/Q%E2%80%93Q_plot)测试分布是否适合您的数据。如果您有动态数据，我建议您使用 ECDF（经验累积分布函数），它会随着数据的增长为您提供更精确的分布。[您可以通过ecdf() 函数](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/ecdf.html)在 R 中使用 ECDF 。

# android - 无法在 Android JellyBean 中使用 maxlength

> ID：14521890
> 
> 赞同：3
> 
> 时间：2013-01-25T12:32:12.663
> 
> 标签：android, android-4.2-jelly-bean

我在 Android 中遇到了一个问题，就像我在输入上使用 maxlenth 属性时一样；在 android 选项卡上输入 20 个字符后，该页面挂起，我无法删除任何内容或在任何其他输入中添加任何内容，其他页面工作正常但不是这个我输入字符的页面达到最大限制

我在 KArbonn Smart Tab 8 Android JellyBean 上使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:06:48.540

这是一个众所周知的 Android 4.1 问题。

[Jelly Bean WebView 不能很好地与文本框的 HTML maxlength 属性配合使用](https://stackoverflow.com/questions/11754575/jelly-bean-webview-not-working-well-with-html-maxlength-attribute-for-text-box/11767743#11767743)

[http://code.google.com/p/android/issues/detail?id=35264](http://code.google.com/p/android/issues/detail?id=35264)

不幸的是，还没有修复。您可以按照上面的堆栈溢出帖子进行操作，其中有 JS 修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T06:34:06.277

我找到了答案，它对我有用：

```
x$("#fieldWithMaxLength").on("keydown", function(e) {
            if(e.keyCode != 8) {
                maxlength = $(this).attr('maxlength');
                if(this.value.length >= maxlength ) {
                    var curIndex = $(this).attr('tabindex');
                    $('[tabindex=' + curIndex + ']').focus();
                    return false;
                }
            }
        }); 
```

# java - java简单的银行账户程序

> ID：14521891
> 
> 赞同：-2
> 
> 时间：2013-01-25T12:32:16.567
> 
> 标签：java, class

我正在尝试构建一个简单的银行账户程序，该程序从余额中减去提款金额，但是当我调用**dept**方法时，它并没有进行减法。

如何让这个程序工作，我不确定是否应该让**dept**方法无效或让它返回一个值。

```
 import java.util.Scanner;
    public class JavaApplication7 {

    public static void main(String[] args) {
        Scanner input = new Scanner( System.in );

        Account account1 = new Account( 50.0 ); 

        System.out.printf( "account1 balance: $%.2f\n", account1.getBalance() );

        double withdrawalAmount;

        System.out.print( "Enter withdrawal amount for account1: " );

        withdrawalAmount = input.nextDouble();

        System.out.printf( "\nsubtracting %.2f from account1 balance\n", withdrawalAmount );

        account1.dept(withdrawalAmount);

        System.out.printf( "account1 balance: $%.2f\n", account1.getBalance() );
    }

}

public class Account {
    private double balance; // instance variable that stores the balance

    public Account( double initialBalance )
    {

        if ( initialBalance > 0.0 )
            balance = initialBalance;
        } 

        public double dept (double dept1){

        dept1=balance-dept1;    
        return dept1;    
    }

    public double getBalance()
    {
        return balance;
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:34:56.223

您的`dept`方法永远不会更新余额，而是返回一个您从未使用过的值。

您应该更新余额：

```
public void dept (double dept1){
    balance=balance-dept1;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:35:28.323

您的债务方法返回新的余额值但不设置它

你可以做的是：

```
public void dept (double dept1){
balance-=dept1;    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T12:35:59.940

像 double 这样的原语是按值传递的，而不是按引用传递的。您不会在债务方法之外改变价值。

但是是的 - 你正在返回一个值，但你没有在任何地方分配它 - 尝试分配它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:40:17.197

尝试这个

```
System.out.println("New Balence is : "+account1.dept(withdrawalAmount)); 
```

或更改此功能：

```
public void dept (double dept1){
    balance=balance-dept1;        
    } 
```

# teradata - 从 Teradata 表导出到 CSV

> ID：14521892
> 
> 赞同：4
> 
> 时间：2013-01-25T12:32:17.420
> 
> 标签：teradata

是否可以将 Teradata 表中的日期直接传输到 .csv 文件中。问题是 - 我的表有超过 1800 万行。如果是，请告诉我过程

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:51:08.010

对于这样大小的表，我建议使用 FastExport 实用程序。它本身不支持 CSV 导出，但您可以模仿这种行为。

Teradata SQL Assistant 将导出为 CSV，但不适合与该大小的表一起使用。

BTEQ 是另一种替代方案，如果表是一次性转储，则它可能是可以接受的。

您可以访问其中任何一个吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-11T21:41:30.383

实际上可以在 Teradata SQL Assistant 中更改导出文本文件的分隔符，而无需任何单独的应用程序：

转到**工具 > 选项 > 导出/导入**。从那里，您可以将“**在列之间使用此分隔符”**选项从 {Tab} 更改为“,”。

您可能还希望将“将列数据包含在”选项设置为“双引号”，这样数据本身中的任何逗号都不会破坏文件结构。

[![导出/导入设置](../Images/b1f1e90e9b65523b96043538ede2eddb.png)](https://i.stack.imgur.com/heuEG.png)

从那里，您可以使用常规文本导出：**文件 > 导出结果**，运行查询，然后选择一种**分隔文本**类型。

[![文件类型选择](../Images/dc438b849a64ae79a658215ddcb19ed1.png)](https://i.stack.imgur.com/YkOmA.png)

然后，您可以使用您的操作系统手动将文件扩展名从 .txt 更改为**.csv**。

这些说明来自 SQL 助手版本 16.20.0.7。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T10:46:11.317

我使用以下代码将 Teradata 表中的数据直接导出到`.csv`文件中。

```
CREATE EXTERNAL TABLE 
database_name.table_name (to be created) SAMEAS database_name.table_name (already existing, whose data is to be exported)
USING (DATAOBJECT ('C:\Data\file_name.csv')
DELIMITER '|' REMOTESOURCE 'ODBC'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-29T07:12:10.563

您可以使用 Teradata Studio 中的 FastExport 实用程序以 CSV 格式导出表格。您也可以定义分隔符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-08T12:25:01.323

很简单。

基本思路是将第一个表导出为 TXT 文件，然后使用 R...read.table ()---> write.csv() 将 TXT 转换为 CSV .....

以下是将TD表导出为txt文件的步骤：

*   从文件中选择导出选项

[![在此处输入图像描述](../Images/6e6516eaa3c6e23b5c60f9e06a47b20d.png)](https://i.stack.imgur.com/kyItW.jpg)

*   从要导出的表中选择所有记录

[![在此处输入图像描述](../Images/bc9a8ae9c01306d73c1a64d2496235eb.png)](https://i.stack.imgur.com/OH4Do.jpg)

*   将其保存为 TXT 文件

[![在此处输入图像描述](../Images/69c1d59f59b7d0a0ffd2ed3ffe681892.png)](https://i.stack.imgur.com/BpL8O.jpg)

然后使用***R 将 TXT 文件转换为 CSV***（将工作目录设置为您保存大 TXT 文件的位置）：

```
my_table<-read.table("File_name.txt", fill = TRUE, header = TRUE)
write.csv(my_table,file = "File_name.csv") 
```

这适用于 1500 万条记录表。希望能帮助到你。

# java - 自下而上的服务生成工具

> ID：14521914
> 
> 赞同：0
> 
> 时间：2013-01-25T12:33:24.190
> 
> 标签：java, web-services, wsdl

通常我会进行自上而下的服务创建（例如编写 wsdl，然后基于它生成服务）现在我需要自下而上生成服务 - 最好的工具是什么？

我有一个旧指南，它描述了使用 Sun Java Studio Enterprise 生成 ws - 正如我所见，它不再存在......那么替换是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:33:00.590

您可以使用 Java API for XML Web Services ( [JAX-WS](http://jax-ws.java.net/) ) 创建 Web 服务。JAX-WS 使用注释来简化 Web 服务客户端和端点的开发和部署。从版本 6 开始，JAX-WS 可以在 Java SE 中使用。

有几种 JAX-WS 实现：

*   [Apache Axis2/Java](http://axis.apache.org/axis2/java/core/)
*   [阿帕奇 CXF](http://cxf.apache.org/)
*   [地铁](http://jax-ws.java.net/)

您可以遵循 Mohammad Juma 的[JAX-WS 五分钟教程](http://java.dzone.com/articles/jax-ws-hello-world)。而且，为什么不在[Tomcat 上部署 JAX-WS Web 服务](http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/)。

对于 NetBeans 和 Glassfish，您可以参阅[JAX-WS Web 服务入门](http://netbeans.org/kb/docs/websvc/jax-ws.html)。在 Eclipse 上，您可以看到[使用 Eclipse、CXF 和 Glassfish V3 创建 JAX-WS 的分步教程](http://al-moayed.de/2011/11/05/step-by-step-tutorial-to-create-a-jax-ws-with-eclipse-and-glassfish-v3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:45:58.003

我使用[Apache CXF](http://cxf.apache.org/)来创建和使用 Web 服务。它真的很容易使用，我从来没有遇到过任何大问题。

# tridion - Tridion 2011 SP1 中的新用户界面更新 (SiteEdit) 在 IE 8 和 9 中不起作用

> ID：14521916
> 
> 赞同：0
> 
> 时间：2013-01-25T12:33:32.460
> 
> 标签：tridion, tridion-2011

当我们在 IE 浏览器中单击 SDL Tridion 按钮时，它会重定向到`servername/WebUI/Editors/SiteEdit/Views/Editor.aspx`页面未找到消息。但在 Firefox 中它运行良好并且重定向到`servername/WebUI/Editors/SiteEdit/Views/Editor.aspx#url=https%3A%2F%2Fdev.view.mysite.com%2Findividual%2FnewUserInterfaceDemo%2Findex.html%23Basics`.

请在这个问题上帮助我。IE浏览器有什么配置吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T13:20:36.787

阅读 UI 的先决条件（[http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/reference_339904289670453B90BED5AEB7258EB8](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/reference_339904289670453B90BED5AEB7258EB8%29)需要登录），不再支持 IE8，所以现在可能专注于 IE9。

您使用的是 HTTP 还是 HTTPS？它看起来像 HTTPS，因此您可能需要按照文档的此部分中的说明签署证书： http: [//sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/task_A56C7DD930D14BAB9C2C30C40D29747A](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/task_A56C7DD930D14BAB9C2C30C40D29747A)（也需要登录）

您可以使用这些浏览器访问常规的 Content Manager Explorer 吗？

尝试删除浏览器中的**所有**缓存，包括密码等，关闭并重试。这可能是某种导致您的问题的缓存值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T14:09:41.077

我看到您的预览网站在`https`. 您是否安装了正确的 SSL 证书。如果您有任何自签名或无效证书，IE9 会发出警告，除非您接受风险，否则不会让您继续下一步。

首先，试试看`http`它是否适用于 https。

（或者）

尝试将自签名证书加载到您的 IE 9 浏览器并再次检查。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T12:55:31.750

代码中没有任何特定于 Internet Explorer 的内容，因此发生了其他事情。

请联系客户支持以获取有关此问题的帮助，因为这不是 StackOverflow 的适当问题。

# ruby-on-rails - 宝石安装 kgio 错误

> ID：14521917
> 
> 赞同：7
> 
> 时间：2013-01-25T12:33:35.190
> 
> 标签：ruby-on-rails, ruby, gem, bundle

我已经下载了一个 Rails 开源 webapp，当我开始使用它时：

```
C:\Users\admin\Downloads\iCare\icare-develop>rails server
←[31mCould not find kgio-2.8.0 in any of the sources←[0m
←[33mRun `bundle install` to install missing gems.←[0m 
```

我尝试使用以下方法修复此错误：

```
cmd:>gem install kgio -v '2.8.0' 
```

我得到了错误：

```
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing kgio:
ERROR: Failed to build gem native extension.C:/Ruby193/bin/ruby.exe extconf.rb
checking for CLOCK_MONOTONIC in time.h... no
checking for CLOCK_MONOTONIC() in time.h... no
checking for clockid_t in time.h... no
checking for clock_gettime() in -lrt... no
checking for t_open() in -lnsl... no
checking for socket() in -lsocket... no
checking for poll() in poll.h... no
checking for getaddrinfo() in sys/types.h,sys/socket.h,netdb.h... no
getaddrinfo required
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

和

```
Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/Ruby193/bin/ruby
        --with-rtlib
        --without-rtlib
        --with-nsllib
        --without-nsllib
        --with-socketlib
        --without-socketlib 
```

并且 Gem 文件将继续安装在 C:/Ruby193/lib/ruby/gems/1.9.1/gems/kgio-2.8 中。0 用于检查。结果记录到 C:/Ruby193/lib/ruby/gems/1.9.1/gems/kgio-2.8.0/ext/kgio/gem_ma ke.out

我确实输入了：`bundle install`之后，但什么也没发生..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T16:27:27.633

kgio 仅适用于 *nix 系统。

kgio 宝石页面：

> kgio 2.8.0 kgio 为 Ruby 提供非阻塞 I/O 方法，而不会在 EAGAIN 和 EINPROGRESS 上引发异常。它适用于独角兽和彩虹！机架服务器，但可能被其他应用程序（**在类 Unix 平台上运行**）使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-04T03:12:39.543

试试这个

```
platforms :ruby do # linux

  gem 'unicorn'

end

platforms :mswin do

  # gems specific to windows

end 
```

资料来源： [在 windows 上开发，在 heroku 上运行 unicorn 生产](https://stackoverflow.com/questions/10764199/develop-on-windows-run-unicorn-in-production-on-heroku)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-17T05:31:13.253

我认为您使用的是 Windows 操作系统，因此您需要解决此错误的唯一方法是在您的 gem 文件中注释或删除**gem 'unicorn'**，因为这仅适用于 linux 系统

# jquery - jQuery Overlay 查询字符串没有被刷新

> ID：14521918
> 
> 赞同：0
> 
> 时间：2013-01-25T12:33:34.177
> 
> 标签：jquery, overlay, query-string, jquery-tools

我有一个带有多个选择框的 HTML/PHP 表单。在提交表单时，我调用一个 jquery 函数来创建一个带有来自选择框的变量和一些其他变量的查询字符串，并将这个查询字符串传递给 jQuery Tools Overlay 以在外部加载它。

覆盖正确加载并显示具有正确查询字符串的页面。当我关闭覆盖，更改一些选择框值并重新提交表单时，就会出现问题。外部页面仍然被加载，但查询字符串没有刷新，它与打开覆盖的第一个实例相同。

以下是我的jQuery代码：

```
 $(function(){
$('#form').submit(function(){ 
. //code to get $str which contains the querystring Example $str="page='abc'&sub='xyz'"
.
$go='displaygroups.php?'+$str;
alert($go);//just to check if querystring is correct.
dispgrps($go);
return false;
}); 

function dispgrps($go){
 $("#overlay").overlay({ 
// custom top position
top: 100, 
// some mask tweaks suitable for facebox-looking dialogs
mask: { 
    color: '#d1eaf1', 
   loadSpeed: 10, 
   opacity: 0.9
},   
// load it immediately after the construction
load: false,
   onBeforeLoad: function() {

        // grab wrapper element inside content
        var wrap = this.getOverlay().find(".contentWrap");

        // load the page specified in the trigger
      wrap.load($go);
    },
    onClose:function(){
    $('.contentWrap').html('Loading...');   
    }

    });
    $("#overlay").overlay().load();

}
}); 
```

如果我第一次从选择框中使用 page='1' 提交，那么即使将 select 的值更改为说 page='2' 并重新提交表单，外部页面 displaygroups.php 仍将页面反映为 1。

我只是在 displaygroups.php 上呼应值以进行测试：

```
if(isset($_GET['page'])) echo $_GET['page']; 
```

覆盖css元素是

```
 <div class="apple_overlay" id="overlay">
 <!-- the external content is loaded inside this tag -->
 <div class="contentWrap">Loading...</div>
 </div> 
```

请帮忙。谢谢你。

编辑：无法弄清楚，所以我更改了代码以使其成为链接而不是表单提交。现在可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:41:27.783

尝试改变

```
$(function() { // code } 
```

1号线到

```
(function ($) { 
    // code
})(jQuery) 
```

现在，您将所有内容都包装在一个 jquery 对象中。

这可能会有所帮助， [为什么要定义一个匿名函数并将 jQuery 作为参数传递给它？](https://stackoverflow.com/questions/10371539/why-define-anonymous-function-and-pass-it-jquery-as-the-argument/10372429#10372429)

# android - 如何在 Android 的 LineChart 上绘制从数据库中检索到的日期

> ID：14521920
> 
> 赞同：0
> 
> 时间：2013-01-25T12:33:50.743
> 
> 标签：android, database, datetime, achartengine

我正在开发一个简单的 android 应用程序，它将当前（现在）日期存储到 sqlite 数据库中。稍后，它将日期值从数据库中检索到活动，并将它们绘制在折线图上，并为日期分配一些值。我已经完成了所有的编码，比如从数据库中检索保存的日期并将它们存储到 ArrayList，为折线图和所有内容编码。最后我得到一个空指针异常。请查看我的代码并提供解决方案。在程序中查找异常将是一项简单的任务。

这是布局xml代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Add Date" 
            android:layout_weight="1"/>

        <Button
            android:id="@+id/chartButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Chart" 
            android:layout_weight="1"/>
    </LinearLayout>

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

chartButton 用于使用意图显示图形。

以下是折线图的部分代码：

```
public void openChart() {
        // TODO Auto-generated method stub
        //Date[] dt = new Date[c.getCount()];
        //int i=0;
        c=dbAdapter.getAllRecords();
        c.moveToFirst();
        List<Date> dt = new ArrayList<Date>();

        while(c.moveToNext()){
            String stringDate = c.getString(1);
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            Date date = null;
            try {
                date = sdf.parse(stringDate);
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            dt.add(date);//dt[i] = date;
            //i++;
        }

        Double[] numbers = null; //= {20.0,20.1,20.2,20.3,20.4,20.5,20.6,20.7,20.8,20.9,21.0,21.2};

        TimeSeries numbersTime = new TimeSeries("Numbers Time");

        for(int i2=0;i2<dt.size();i2++){
            numbers[i2]=(double) i2;
            numbersTime.add(dt.get(i2),numbers[i2]);
        }

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        dataset.addSeries(numbersTime);

        XYSeriesRenderer numbersRenderer = new XYSeriesRenderer();
        numbersRenderer.setColor(Color.BLACK);
        numbersRenderer.setPointStyle(PointStyle.CIRCLE);
        numbersRenderer.setFillPoints(true);
        numbersRenderer.setLineWidth(2);
        numbersRenderer.setDisplayChartValues(true);

        XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();

         multiRenderer.setChartTitle("Visits vs Views Chart");
         multiRenderer.setXTitle("Date Time");
         multiRenderer.setYTitle("Double Numbers");
         multiRenderer.setZoomButtonsVisible(true);

         multiRenderer.addSeriesRenderer(numbersRenderer);

         // Creating an intent to plot line chart using dataset and multipleRenderer
            Intent intent = ChartFactory.getLineChartIntent(getBaseContext(), dataset, multiRenderer);

            // Start Activity
            startActivity(intent);
    } 
```

这是 DBAdapter 类中的 Cursor 方法：

```
Cursor getAllRecords(){
        String[] columns = {COL_ID,COL_DATE};
        return db.query(TABLE_NAME, columns, null, null, null, null, null); 
    } 
```

这是清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.dateexample.seenu"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.dateexample.seenu.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <activity android:name="org.achartengine.GraphicalActivity" />
    </application>

</manifest> 
```

这是 LogCat 报告：

```
01-25 18:11:39.656: D/AndroidRuntime(28121): Shutting down VM
01-25 18:11:39.656: W/dalvikvm(28121): threadid=1: thread exiting with uncaught exception (group=0x40018578)
01-25 18:11:39.992: E/AndroidRuntime(28121): FATAL EXCEPTION: main
01-25 18:11:39.992: E/AndroidRuntime(28121): java.lang.NullPointerException
01-25 18:11:39.992: E/AndroidRuntime(28121):    at com.example.dateexample.seenu.MainActivity.openChart(MainActivity.java:103)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at com.example.dateexample.seenu.MainActivity$2.onClick(MainActivity.java:70)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.view.View.performClick(View.java:2485)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.view.View$PerformClick.run(View.java:9080)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.os.Handler.handleCallback(Handler.java:587)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.os.Looper.loop(Looper.java:130)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.app.ActivityThread.main(ActivityThread.java:3687)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at java.lang.reflect.Method.invokeNative(Native Method)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at java.lang.reflect.Method.invoke(Method.java:507)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at dalvik.system.NativeStart.main(Native Method)
01-25 18:11:39.992: E/AndroidRuntime(28121): FATAL EXCEPTION: main
01-25 18:11:39.992: E/AndroidRuntime(28121): java.lang.NullPointerException
01-25 18:11:39.992: E/AndroidRuntime(28121):    at com.example.dateexample.seenu.MainActivity.openChart(MainActivity.java:103)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at com.example.dateexample.seenu.MainActivity$2.onClick(MainActivity.java:70)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.view.View.performClick(View.java:2485)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.view.View$PerformClick.run(View.java:9080)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.os.Handler.handleCallback(Handler.java:587)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.os.Looper.loop(Looper.java:130)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at android.app.ActivityThread.main(ActivityThread.java:3687)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at java.lang.reflect.Method.invokeNative(Native Method)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at java.lang.reflect.Method.invoke(Method.java:507)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
01-25 18:11:39.992: E/AndroidRuntime(28121):    at dalvik.system.NativeStart.main(Native Method) 
```

最后，我在 logCat 中显示了 null pointerException。我再次请求为我提供一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:57:50.473

`Double[] numbers = null;`您有一个尝试向其添加值的未初始​​化数组 ( )。您需要`numbers`在向其添加值之前分配数组。

`Double[] numbers = new Double[100];`

注意：您可能希望研究更灵活的存储容器（Vectors、ArrayList 等），这些容器会随着您的添加而增长。

# android - 需要帮助，蜂窝模拟器启动失败

> ID：14521921
> 
> 赞同：0
> 
> 时间：2013-01-25T12:33:54.047
> 
> 标签：android, android-emulator

当我使用 Honeycomb 模拟器运行我的应用程序时，它显示以下错误

```
[2013-01-25 17:56:54 - Demo] Launching a new emulator with Virtual Device 'Honeycomb'
[2013-01-25 17:57:07 - Emulator] Failed to create Context 0x3005
[2013-01-25 17:57:07 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
[2013-01-25 17:57:08 - Demo] New emulator found: emulator-5556
[2013-01-25 17:57:08 - Demo] Waiting for HOME ('android.process.acore') to be launched...
[2013-01-25 17:58:24 - Demo] emulator-5556 disconnected! Cancelling 'android.demo.com.MainActivity activity launch'! 
```

但其他应用程序在 Gingerbread 等其他模拟器中运行良好。

有人遇到过这个问题吗？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:58:50.227

可能这会帮助您
转到位置 C:\users\ur_pc_name\.android\cache 并删除所有文件

# sqlite - 为 System.Data.SQLite 编译 sqlite Levenshtein 函数

> ID：14521922
> 
> 赞同：1
> 
> 时间：2013-01-25T12:34:05.470
> 
> 标签：sqlite, compilation, system.data.sqlite

好的，我是编译程序的新手，我已经尝试了一切。

我从这里下载了 System.Data.SQLite：http: [//system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

这让我可以在我的 C# 应用程序中使用 sqlite 功能。现在我正在寻找添加一个 Levenshtein 函数，以便我可以在我的 c# 应用程序中进行搜索以找到类似的结果。

我偶然发现： [https ://github.com/mateusza/SQLite-Levenshtein](https://github.com/mateusza/SQLite-Levenshtein)

但老实说，我不知道如何编译它并将其作为扩展加载。我在 sqlite 的主网站上阅读了有关 sqlite 扩展的信息。

我对如何加载我的扩展有一个想法：运行 select load_extension('path to .dll')，但我不知道如何将 SQLite-Levenshtein 转换为可以从 sqlite 加载的 dll 文件。我将不胜感激您能提供的任何帮助。（请耐心等待，我正在慢慢潜入广阔的编译世界）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:57:30.607

这就是我用 mingw GCC 编译这个扩展的方式：

```
gcc -s -O4 -I /path/to/sqlite/headers/ -shared -o levenshtein.dll levenshtein.c 
```

`/path/to/sqlite/headers/`是文件所在的地方`sqlite3ext.h`。

如果您的平台是 x86（32 位），您可以使用[http://www.siftsoft.com/misc/levenshtein.dll——](http://www.siftsoft.com/misc/levenshtein.dll)这就是我现在从 git HEAD 构建的。

# php - WordPress 中的导航

> ID：14521926
> 
> 赞同：0
> 
> 时间：2013-01-25T12:34:27.927
> 
> 标签：php, wordpress

下午好，我正在我的 Wordpress 网站上创建一个“区域”页面，页面结构如下；

```
Home About Us Areas
- Wiltshire
-- Salisbury
-- Wilton
- Hampshire
-- Andover
-- Portsmouth 
```

我正在寻找一种方法来生成区域页面上的所有链接，城镇的父级是标题！

例如

```
<h2>Wiltshire</h2>
<ul>
   <li><a href>Salisbury</a></li>
   <li><a href>Wilton</a></li>
</ul> 
```

在 Wordpress 中生成这些链接的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:38:56.387

创建页面，然后创建自定义[菜单](http://codex.wordpress.org/Navigation_Menus)。一旦注册[添加菜单项](http://codex.wordpress.org/WordPress_Menu_User_Guide)。大多数主题的顶部都有一个导航菜单。`functions.php`您可以在主题目录中找到注册它的代码。如果您的页面与常规页面具有不同的功能，请考虑注册[自定义帖子类型](http://codex.wordpress.org/Post_Types)并添加它们而不是常规页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:44:15.343

如果您打算使用 Wordpress 仪表板中的菜单选项，您使用的主题应该支持菜单，请检查[Menu_User_Guide](http://codex.wordpress.org/WordPress_Menu_User_Guide)

如果您想编写代码，请检查[Horizo​​ntal_Menus](http://codex.wordpress.org/Creating_Horizontal_Menus)

# internet-explorer - Windows Phone Internet Explorer 中的 IRequiresSessionState

> ID：14521927
> 
> 赞同：0
> 
> 时间：2013-01-25T12:34:34.833
> 
> 标签：internet-explorer, session, windows-phone, ashx

我有 ASP.NET 网站，它检查使用 ashx 处理程序访问某些文件的权限。所以我给用户链接到 ashx 并且处理程序检查是否创建了会话并且其中有一些值 - 它返回一些带有文件流的响应。为了使会话在处理程序中工作，我使用`IRequiresSessionState`标记接口。所有这些都适用于所有浏览器（甚至在 iPhone 上），但不适用于 windows phone 中的 Internet Explorer！在 IE 上 WP`context.Session`不为空，但`context.Session.Count`即使有对象存储在 Session 中也为 0（我在网站的其他部分使用 Session 对象，它照常工作。无法仅在 .ashx 文件中获取 Session 对象） ！在 WP8 和 UC 浏览器中尝试了股票 IE（我相信它基于 WP7 的 IE9）没有工作:(

MS浏览器又是什么问题以及如何处理？

# vb.net - VB.NET 中的 VLC Player 似乎不会检测到播放结束，我做错了什么吗？

> ID：14521928
> 
> 赞同：0
> 
> 时间：2013-01-25T12:34:36.283
> 
> 标签：vb.net, visual-studio-2010, media-player, vlc, libvlc

VB.NET 中的 VLC Player 似乎不会检测到播放结束，我做错了什么吗？

我的意图是使用“_MediaPlayerEndReached”让播放器移动到下一个视频，但是一旦视频播放完成，什么都不会发生，它就会停止（如下图所示）。

而不是移动到下一个视频，它只是保持这样：

仅供参考：用于测试的剪辑是免费的预告片。

![在此处输入图像描述](../Images/be54968f0da62538ca35e3bc23debd50.png)

代码：

```
Public Class Form1
    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        AxVLCPlugin21.playlist.items.clear()
        AxVLCPlugin21.playlist.add("file:///C:/Users/Adminx/Downloads/The_Hobbit_Full_Length_Trailer_2_HD.mp4")
        AxVLCPlugin21.playlist.play()
    End Sub

    Private Sub AxVLCPlugin21_MediaPlayerEndReached(sender As Object, e As EventArgs) Handles AxVLCPlugin21.MediaPlayerEndReached
        AxVLCPlugin21.playlist.items.clear()
        AxVLCPlugin21.playlist.add("file:///C:/Users/Adminx/Downloads/ShortestVid.avi")
        AxVLCPlugin21.playlist.play()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:05:15.143

您不能在 EndReached() 事件中播放另一个媒体文件。最好的解决方案是在最后创建另一个线程，这个线程将在媒体的 REAL 结束之后播放新文件。与 MediaPlayer 用户控件相同。

如果您不知道如何创建新线程，这是最简单的方法：

```
thread = new Thread(() => while(VLC IS PLAYING) {}; PlayNewFile;  )); 
thread.Start(); 
```

我没有测试它，但这应该可以完成工作。

该线程正在等待 VLC 停止视频，然后播放下一个。

编辑：

看看这个：[DMediaPlayer - 简单的 VLC 前端](http://dmediaplayer.codeplex.com/)

并在这里阅读：[.Net_Interface_to_VLC](http://wiki.videolan.org/.Net_Interface_to_VLC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:14:48.843

我已经弄清楚了如何使用计时器。感谢所有帮助

代码：

```
Public Class Form1
    Dim Paused As Boolean = False
    Dim Started As Boolean = False
    Dim PlayedSecond As Boolean = True
    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        PlayedSecond = False
        AxVLCPlugin21.playlist.items.clear()
        AxVLCPlugin21.playlist.add("file:///C:/Users/Adminx/Downloads/The_Hobbit_Full_Length_Trailer_2_HD.mp4")
        AxVLCPlugin21.playlist.play()
        Started = True
    End Sub

    Sub playsecond()
            AxVLCPlugin21.playlist.items.clear()
            AxVLCPlugin21.playlist.add("file:///C:/Users/Adminx/Downloads/ShortestVid.avi")
            AxVLCPlugin21.playlist.play()
            PlayedSecond = True
            Started = False
    End Sub

    Private Sub AxVLCPlugin21_pause(sender As Object, e As EventArgs) Handles AxVLCPlugin21.pause
            Paused = True
    End Sub

    Private Sub IsFinished_Tick(sender As Object, e As EventArgs) Handles IsFinished.Tick
        If Not AxVLCPlugin21.playlist.isPlaying And Paused = False And Started = True And PlayedSecond = False Then
            playsecond()
            Started = True
        End If
    End Sub

    Private Sub AxVLCPlugin21_play(sender As Object, e As EventArgs) Handles AxVLCPlugin21.play
        Paused = False
    End Sub
End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T03:23:41.580

```
Public Class Form1
    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        AxVLCPlugin21.playlist.items.clear()
        AxVLCPlugin21.playlist.add("file:///C:/Users/Adminx/Downloads/The_Hobbit_Full_Length_Trailer_2_HD.mp4")
        AxVLCPlugin21.playlist.playItem(0)
    End Sub

    Private Sub AxVLCPlugin21_MediaPlayerEndReached(sender As Object, e As EventArgs) Handles AxVLCPlugin21.MediaPlayerEndReached
        AxVLCPlugin21.playlist.items.clear()
        AxVLCPlugin21.playlist.add("file:///C:/Users/Adminx/Downloads/ShortestVid.avi")
        AxVLCPlugin21.playlist.playItem(0)
    End Sub
End Class 
```

您必须通过新帖子这样做。如果您执行代码，它将重置所有第一次通过帖子的人。试试看好吗！新希捷

# javascript - 引导灯箱。如何在自己的站点中使用简单的示例？

> ID：14521930
> 
> 赞同：2
> 
> 时间：2013-01-25T12:34:47.427
> 
> 标签：javascript, html, twitter-bootstrap, twitter, lightbox

我正在尝试将 Bootstrap Lightbox 与我自己的 twitter 引导站点集成。如何使用来自[http://jbutz.github.com/bootstrap-lightbox/#demo的示例](http://jbutz.github.com/bootstrap-lightbox/#demo)

在我的代码中？我需要导入什么？

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Template &middot; Bootstrap</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 20px;
        padding-bottom: 40px;
      }

      /* Custom container */
      .container-narrow {
        margin: 0 auto;
        max-width: 700px;
      }
      .container-narrow > hr {
        margin: 30px 0;
      }

    </style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  </head>

  <body>

    <div class="container-narrow">

      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#">Nothing</a></li>
          <li><a href="#">About</a></li>
        </ul>
        <h3 class="muted">My site</h3>
      </div>

      <hr>

      <div class="footer">
        <p>&copy; Company 2012</p>
      </div>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap-transition.js"></script>
    <script src="js/bootstrap-alert.js"></script>
    <script src="js/bootstrap-modal.js"></script>
    <script src="js/bootstrap-dropdown.js"></script>
    <script src="js/bootstrap-scrollspy.js"></script>
    <script src="js/bootstrap-tab.js"></script>
    <script src="js/bootstrap-tooltip.js"></script>
    <script src="js/bootstrap-popover.js"></script>
    <script src="js/bootstrap-button.js"></script>
    <script src="js/bootstrap-collapse.js"></script>
    <script src="js/bootstrap-carousel.js"></script>
    <script src="js/bootstrap-typeahead.js"></script>

  </body>
</html> 
```

需要什么文件？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T12:42:33.313

我倾向于为此使用内置的 twitter 引导模式对话框：

完整信息可在官方引导站点上找到：

[http://getbootstrap.com/javascript/#modals](http://getbootstrap.com/javascript/#modals)

如果向下滚动，您将看到如下所示的“启动演示模式”按钮：

![启动演示按钮](../Images/f39e6e69076370400e0421a206281524.png)

选择此项将显示如下模型：

![启动模态](../Images/dde664c813cb51f12362a872242f5a2b.png)

网站中详细介绍了如何实现这一点的完整细节。

# php - 在 php 中构建自己的“小框架”

> ID：14521932
> 
> 赞同：1
> 
> 时间：2013-01-25T12:34:50.617
> 
> 标签：php, model-view-controller, singleton, project, structure

**背景/想法**
我目前正在开发一个小型框架，只是为了提高我的 php 知识。这个框架应该非常简单（最小化开销）并且在后期扩展方面很灵活。

**不同的含义**
由于阅读了更高级的教程、认真的 php 开发人员的笔记、不同的类结构（单例、单例、依赖注入、JIT ......）、oop、mvc、路由、缓存......等等我发现很难过滤“正确的方式”（如果有的话），因为在我看来每个人都说不同的话。

许多人称赞那里的观点是“最好的”，并说与之相关的一切都是邪恶的。在我看来，没有对错之分。只有几种方法可以实现一个人的目标。

**到目前为止我做了什么**

*   index：ini设置，定义常量，调用bootstrap（不是oop）
*   引导：自动加载器类、命名空间（按需包含文件）
*   静态类：htmlManager，fileHandler，databaseManager，...
*   单身人士：无
*   非静态类：控制器、模型、视图、路由……

我知道这是非常基础的，到目前为止我没有做太多，但我想首先创建一个可靠的平台。

**问题**
在我想进一步了解我的项目之前，我很想听听您对下面列出的事情的看法。

*   您如何组织/构建小型甚至更大的项目？
*   您在代码的简单性、逻辑性、性能、可读性、可扩展性和可重用性方面有何经验？
*   真的有一种“正确的编码方式”还是这只是解释？
*   有什么东西因为已经过时而不能使用吗？

**我不想听到的**

*   忘记框架或 php
*   不要这样做，不要在没有说明原因的情况下这样做

非常感谢我收到的每一个回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:30:34.040

> 我目前正在开发一个小型框架，只是为了提高我的 php 知识。这个框架应该非常简单（最小化开销）并且在后期扩展方面很灵活。

去吧。

> 由于阅读了更高级的教程、认真的 php 开发人员的笔记、不同的类结构（单例、单例、依赖注入、JIT ......）、oop、mvc、路由、缓存......以及更多我发现过滤“正确的方式”（如果有的话）非常困难，因为在我看来，每个人都说不同的话。

那是因为有些人不理解为什么应该以某种方式解决某事，或者为什么某事是糟糕的做法，但他们在某个框架上看到了一些东西，他们认为这是自切片面包以来最好的东西。

尽管意见可能不同，但如果您追求的是干净的代码和正确的 OOP，您就不能争论。在适当的 OOP 中，单例和`static`s 没有位置。此外，大多数人所说的 MVC 实际上是对模式的一些错误看法（主要是因为他们再次看到一些框架以某种方式做到了这一点）。这并不总是坏事，但它*不是*MVC。

> 许多人称赞那里的观点是“最好的”，并说与之相关的一切都是邪恶的。在我看来，没有对错之分。只有几种方法可以实现一个人的目标。

在我看来，并不是所有不是最好的都是可怕的。但有些东西只是不好的做法。并且某些模式的定义方式使您的应用程序更易于维护、调试和测试。如果您要实现其他模式，我觉得这一切都很好，但是您将失去其他模式的好处。

一般来说，我在进行 OOP 编程时使用的第一条经验法则是遵循[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。

> 静态类：htmlManager，fileHandler，databaseManager，...

这些在适当的 OOP 中没有位置。除其他外，因为这将紧密耦合类。这使得可维护性、可读性和可测试性成为一种痛苦。

> 单身人士：无

很好，因为它们只是一种幻想`global`。

> 您如何组织/构建小型甚至更大的项目？

将两个代码中的关注点分离为结构。其中一种模式可以帮助您：[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)、[MVP](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter)、[MVVM](Model View ViewModel)。就我个人而言，我最喜欢 MVC 模式，因为它与其他模式相比有一些很好的好处。

> 您在代码的简单性、逻辑性、性能、可读性、可扩展性和可重用性方面有何经验？

可读性和可测试性是最重要的。就在那个 SOLID 之后（这也由第一个点（重叠）处理）

1.  真的有一种“正确的编码方式”还是这只是解释？
2.  有什么东西因为已经过时而不能使用吗？
3.  表现

> 忘记框架或 php 不要这样做，不要在没有说明原因的情况下这样做

正如我之前所说：去吧。做它并搞砸！最好的学习方法是实际去做并犯下可怕的错误。我认为我 1 年前制作的框架（尽管恕我直言仍然比现有框架的 90% 好）是一个适当的废话™。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:51:58.243

> 您如何组织/构建小型甚至更大的项目？

许多 PHP 框架使用 MVC 结构。

> 您在代码的简单性、逻辑性、性能、可读性、可扩展性和可重用性方面有何经验？

除了严格遵循 MVC 之外，我建议遵循 KISS 和 DRY 等原则。我不会将性能视为高优先级主题。稍后您可以熟悉缓存策略和好的算法（一般主题，而不是 PHP）。

> 真的有一种“正确的编码方式”还是这只是解释？

有些事情可以被认为是最佳实践，您会在[Zend](http://framework.zend.com/)或[symfony](http://symfony.com/)等流行框架上找到许多提示。

> 有什么东西因为已经过时而不能使用吗？

你必须自己找出答案。您可以跳过编写数据库处理并使用 ORM 库，如教义或推进。您可以为您的视图表示选择一个特殊的模板引擎，如 twig 或 smarty。

> 不要这样做，不要在没有说明原因的情况下这样做

我认为所有长期使用 PHP 的程序员都至少启动过一次自己的框架，没有人反对它，尤其是如果你想提高自己的知识。

# php - shell_exec 不工作无法转换 pdftotext

> ID：14521935
> 
> 赞同：4
> 
> 时间：2013-01-25T12:35:04.480
> 
> 标签：php, linux, shell, cakephp, pdf

我正在尝试将`pdf`文件转换为文本文件。当我通过终端运行命令时，它工作正常，但是当尝试通过它执行它时`PHP`它不起作用。

从过去四个小时开始，我就陷入了这种情况，在谷歌上花了很多时间，但没有可用的解决方案。任何机构都可以解决这个问题吗？

文件所有者 - 没有人

```
shell_exec('/usr/bin/pdftotext /opt/lampp/htdocs/foldername/filename.pdf'); 
```

谁能提供任何有用的解决方案？

我还尝试将`usr`文件夹所有权从root更改为nobody，并为文件夹及其上下文提供777权限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T10:59:50.550

您运行 pdftotext 的命令不正确。

应该有第二个参数告诉 pdftotext 写入特定文件或只使用破折号“-”写入标准输出，除非您实际上希望程序创建一个文件名为 pdf 的文本文件（这需要写入/opt/lampp/.../ 文件夹中的权限）

这至少对于`pdftotext version 0.12.4`

> "pdftotext 读取 PDF 文件，PDF-file，并写入一个文本文件，*text-file*。如果未指定 text-file，pdftotext 将 file.pdf 转换为 file.txt。如果*text* *-file*是'-'，则文本被发送到标准输出。”

因此，您的问题的解决方案只需在文件名后添加一个破折号，如下所示：

```
<?php
$pdftext = shell_exec('/usr/bin/pdftotext /opt/lampp/htdocs/foldername/filename.pdf -');
echo $pdftext; 
```

前提是二进制文件存在并且 PHP 被允许使用 shell_exec 并且你有权限并且 pdf 文件存在并且你有权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:41:42.837

从[如何测试是否允许 PHP system() 函数？并且出于安全原因没有关闭](https://stackoverflow.com/questions/4033841/how-to-test-if-php-system-function-is-allowed-and-not-turned-off-for-security)

```
function isAvailable($func) {
    if (ini_get('safe_mode')) return false;
    $disabled = ini_get('disable_functions');
    if ($disabled) {
        $disabled = explode(',', $disabled);
        $disabled = array_map('trim', $disabled);
        return !in_array($func, $disabled);
    }
    return true;
} 
```

您可能需要检查`isAvailable('shell_exec')` 在共享主机上此功能是否可能被禁用。

如果它没有被禁用，请检查 Apache 日志，这就是你所能做的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T00:38:33.470

尝试 exec 并确保在您的 php.ini 文件中关闭安全模式，例如 safe_mode = Off

```
exec('/usr/bin/pdftotext /opt/lampp/htdocs/foldername/filename.pdf') 
```

还在终端中运行此 cmd 以检查软件是否正常工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T12:38:54.893

这通常是许多网络服务器禁用的功能，您可以检查：

```
var_dump(ini_get('disable_functions')); // not available if shell_exec disabled
var_dump(ini_get('safe_mode')); // not available if true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T08:55:42.000

## 由于您正在运行 Linux，因此您可能拥有权限问题

1.  检查您的文件是否归 apache 所有。

    chown apache apache file.php

2.  检查您的文件是否有权限

    chmod 644 文件.php

3.  也许还要检查您的 sudoers 文件
    [Sudoers ManPage](http://linux.die.net/man/8/visudo)

# java - hadoop中所有slave和master是否需要有相同的用户名？

> ID：14521936
> 
> 赞同：2
> 
> 时间：2013-01-25T12:35:05.687
> 
> 标签：java, hadoop, bigdata

1.  所有的奴隶和主人应该有相同的用户名吗？
2.  所有的奴隶和主人都应该在同一条路径上拥有hadoop吗？

如果是，有没有办法克服上述限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:20:59.213

请确保（namenode，datanode）共享相同的用户，并且（jobtracker，tasktracker）共享相同的用户（不一定与（namenode，datanode）相同的用户。所以回答你的问题（1）：是的。

对于#2，您应该让所有主/从机器共享相同的 hadoop 版本，并且最好在相同的目录结构中。您可以使用诸如 puppet/chef/ansible/etc 之类的部署工具或简单地使用 rsync 在所有系统上维护相同的文件

# osgi - 无法访问 webconsole 界面

> ID：14521937
> 
> 赞同：0
> 
> 时间：2013-01-25T12:35:06.110
> 
> 标签：osgi, apache-felix, osgi-bundle

几天以来，我一直在玩 apache felix。启动 lb 命令时可以看到一切正常：

```
START LEVEL 2
   ID|State      |Level|Name
    0|Active     |    0|System Bundle (4.0.3)
    1|Active     |    2|Apache Felix Bundle Repository (1.6.6)
    2|Active     |    2|Apache Felix Configuration Admin Service (1.6.0)
    3|Active     |    2|Apache Felix Gogo Command (0.12.0)
    4|Active     |    2|Apache Felix Gogo Runtime (0.10.0)
    5|Active     |    2|Apache Felix Gogo Shell (0.10.0)
    6|Active     |    2|Apache Felix Http Bundle (2.2.0)
    7|Active     |    2|Apache Felix iPOJO (1.8.6)
    8|Active     |    2|Apache Felix iPOJO OSGi Junit Runner (1.0.0)
    9|Active     |    2|Apache Felix Shell Service (1.4.3)
   10|Active     |    2|Apache Felix Web Management Console (3.1.8)
   11|Installed  |    3|[Optimacs/OSGi] DataService - Hello World (1.1.0)
   12|Active     |    2|[Optimacs/OSGi] DataService Model (0.4.1.SNAPSHOT)
   13|Active     |    2|[Optimacs/OSGi] DataService Network API (0.4.1.SNAPSHOT)
   14|Active     |    2|[Optimacs/OSGi] DataService Container (0.4.1.SNAPSHOT) 
```

根据这个列表，我可以使用 Web 管理控制台。为此，我将 org.osgi.service.http.port 选项设置为 8080。当我打开浏览器（Chrome，最新版本）并尝试访问 Web 控制台 ( `url = http://localhost:8080/system/console`) 时，会出现问题。我收到错误 102（连接被拒绝）。我错过了任何特定的配置步骤吗？

**编辑**

运行`inspect cap service`gogo shell 会报告以下关于 HttpService 的信息：

```
org.apache.felix.http.bundle [6] provides:
------------------------------------------
service; javax.servlet.http.HttpServlet with properties:
   http.felix.dispatcher = org.apache.felix.http.base.internal.DispatcherServlet
   service.description = Dispatcher for bridged request handling
   service.id = 20
   service.vendor = The Apache Software Foundation
service; java.util.EventListener with properties:
   http.felix.dispatcher = org.apache.felix.http.base.internal.EventDispatcher
   service.description = Dispatcher for bridged HttpSession events
   service.id = 21
   service.vendor = The Apache Software Foundation 
```

不幸的是，没有关于使用的端口的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:35:32.237

由于 Neil 的评论，该问题已得到解决：

> 我想知道 HttpService 是否存在，你能从 shell 检查 cap 服务并扫描 HttpService 吗？如果它在那里，它还应该报告它正在使用的端口号。

# .net - 尽管重绘已停用，.net win 表单仍会不断更新。

> ID：14521938
> 
> 赞同：0
> 
> 时间：2013-01-25T12:35:13.690
> 
> 标签：.net, winforms, drawing, refresh, block

我需要一些帮助。我想在没有窗口自动在屏幕上应用这些更改的情况下设置某些 win 表单属性（大小/位置/..）。

我在表单上尝试了 WM_SETREDRAW，在更改期间我跳过了表单的 WndProc 中的所有消息，没有任何效果。窗口由系统自动调整。

背景：我们的应用程序需要一个全屏切换。问题是用户可以在切换到全屏之前将窗口设置为最大化状态。

所以过渡可以是：正常 -> 最大化 -> 全屏（是 WindowState 正常（无边框样式，最大尺寸））

根据这个过渡：当离开全屏模式时，应用程序必须切换回最大化状态。然后，还原应将应用程序切换回第一个位置和大小。为了使控制按钮（最大化/恢复）正常工作，从全屏切换回最大化时，我必须采用以下方式：

1.  将位置和大小设置为“第一个”值。（因为他们处于正常状态）
2.  将应用设置为最大化

然后恢复按钮完美运行，但您可以看到 windows 在步骤 1 中绘制应用程序，然后在步骤 2 中再次绘制。您可以在步骤 1 和 2 中看到 windows 桌面，因为窗口实际上已调整大小。

现在我需要一种方法来以某种方式设置值（以便内部正常工作）但防止窗口在第 2 步之前绘制应用程序。

这种“停用”在全屏转换期间也会有所帮助，因为您可以看到面板调整大小，直到应用程序覆盖整个屏幕。一点都不好。

任何想法都会很棒。

# wcf - WCF HTTPS 和 IIS 中的多个站点

> ID：14521945
> 
> 赞同：0
> 
> 时间：2013-01-25T12:35:38.203
> 
> 标签：wcf, iis, https, wcf-binding

我正在尝试将 IIS 配置为在两个 IIS 网站中托管一组二进制文件。所以我们希望能够访问这些网址：

*   [http://external.example.com/ADataService](http://external.example.com/ADataService)
*   [https://external.example.com/ADataService](https://external.example.com/ADataService)
*   [http://internal.example.com/ADataService](http://internal.example.com/ADataService)

internal.example.com 和 external.example.com 设置为不同的 IIS 站点，以便我们为它们分配不同的应用程序池。但是，当我在 web.config 中添加 HTTPS 支持时，内部 HTTP 支持停止工作；[http://internal.example.com/ADataService](http://internal.example.com/ADataService)现在返回错误：

> 找不到与具有绑定 CustomBinding 的端点的方案 https 匹配的基地址。注册的基地址方案是 [http]。

这是我们的 web.config 的详细信息

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <bindings>
      <customBinding>
        <binding name="jsonCustomMapper">
            <webMessageEncoding webContentTypeMapperType="Service.JSONCustomMapper, Service" />
            <httpTransport manualAddressing="true" />
        </binding>
        <binding name="httpsjsonCustomMapper">
            <webMessageEncoding webContentTypeMapperType="Service.JSONCustomMapper, Service" />
            <httpsTransport manualAddressing="true" />
        </binding>
      </customBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="jsonBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="defaultBehavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="Service.Service" behaviorConfiguration="defaultBehavior">
        <endpoint address="json" binding="customBinding" bindingConfiguration="jsonCustomMapper" behaviorConfiguration="jsonBehavior" contract="Service.IJSONService" />
    <endpoint address="json" binding="customBinding" bindingConfiguration="httpsjsonCustomMapper" behaviorConfiguration="jsonBehavior" contract="Service.IJSONService" />
      </service>
    </services>
  </system.serviceModel> 
```

据我了解`multipleSiteBindingsEnabled="true"`，HTTPS 不混用，但我不明白他们将共享哪些资源？如果我们将 internal.example.com 和 external.example.com 托管在不同的应用程序池中，我认为它们会有进程隔离吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:37:21.540

似乎将 HTTPS 证书添加到“internal.example.com”的站点可以解决问题。注意：如果没有此证书，我们将无法通过 HTTP 或 HTTPS 访问 internal.example.com，但有了证书，这两种机制都可以正常工作。

# mysql - MySQL数据插入错误

> ID：14521949
> 
> 赞同：0
> 
> 时间：2013-01-25T12:35:54.587
> 
> 标签：mysql, sql, database

请在此代码中找到错误，我正在尝试保存数据，但它没有使用 Eclipse、MySQL、64 位存储

**错误**：

> java.sql.SQLException: [MySQL][ODBC 5.2(w) Driver][mysqld-5.5.28]您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'database ('did','dname','dadress','salary','sex','specialist','cell#')VALUES 附近使用的正确语法(?,' 在第 1 行

```
package pk.pucit;
import javax.swing.*;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

class DoctorsRecord {

public JFrame frm=new JFrame("Doctor's Record Information");
public  JButton btn1,btn2,btn3,btn4;
public  JLabel lbl1,lbl2,lbl3,lbl4,lbl5,lbl6,lblr;
public JTextField txt1,txt2,txt3,txt4,txt5,txt6,txt7;
public  JRadioButton rbtn1,rbtn2;
//frm.setBackground(Color.green);

public DoctorsRecord(){
    lbl1=new JLabel("Doctor ID");
    lbl2=new JLabel("Doctor's Name");
    lbl3=new JLabel("Address");
    lblr=new JLabel("Gender");
    lbl4=new JLabel("Salary");
    lbl5=new JLabel("Rank");
    lbl6=new JLabel("Ph #");

    txt1=new JTextField(7);
    txt2=new JTextField(7);
    txt3=new JTextField(7);
    txt4=new JTextField(7);
    txt5=new JTextField(7);
    txt6=new JTextField(7);
    txt7=new JTextField(7);

    /*rbtn1=new JRadioButton("Male");
    rbtn2=new JRadioButton("Female");*/

    btn1=new JButton("Save");
    btn2=new JButton("Search ");
    btn3=new JButton("Reset");
    btn4=new JButton("Cancel");

    JPanel pnl1=new JPanel();

    pnl1.add(lbl1);
    pnl1.add(txt1);
    pnl1.add(lbl2);
    pnl1.add(txt2);
    pnl1.add(lbl3);
    pnl1.add(txt3);
    pnl1.add(lblr);
    pnl1.add(txt7);
    pnl1.add(lbl4);
    pnl1.add(txt4);
    pnl1.add(lbl5);
    pnl1.add(txt5);
    pnl1.add(lbl6);
    pnl1.add(txt6);
    pnl1.setLayout(new GridLayout(8,1));

    JPanel pnl=new JPanel();

    pnl.add(btn1);
    pnl.add(btn2);
    pnl.add(btn3);
    pnl.add(btn4);
    pnl.setLayout(new GridLayout(1,2));

    frm.add(pnl1,BorderLayout.CENTER);
    frm.add(pnl,BorderLayout.SOUTH);

    //frm.setLayout(new GridLayout(10,1));
    frm.setBounds(400,100,400,500);
    frm.setVisible(true);
    frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    btn1.addActionListener(new ActionListener()
    {

        public void actionPerformed(ActionEvent ae){
            try{
                String id=txt1.getText();
                String name=txt2.getText();
                String add=txt3.getText();
                String sal=txt4.getText();
                String sex=txt5.getText();
                String sep=txt6.getText();
                String cell=txt7.getText();
                dataHandler(id,name,add,sal,sex,sep,cell);
            }
            catch(Exception e){
                System.out.println("Exception occur");
            }
        } 

    }
            );
}
    public void dataHandler(String id,String dn,String add,String sal,String   sex,String sep,String cell)throws ClassNotFoundException, SQLException{
        try{
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    Connection con = DriverManager.getConnection("jdbc:odbc:Dbms", "root", "root");
    String query = "insert into database    ('did','dname','dadress','salary','sex','specialist','cell#')" +"VALUES (?,?,?,?,?,?,?)";
       PreparedStatement preparedStatement = con.prepareStatement(query);
        preparedStatement.setString(1, id);
        preparedStatement.setString(2, dn);
        preparedStatement.setString(3, add);
        preparedStatement.setString(4, sal);
        preparedStatement.setString(5, sex);
        preparedStatement.setString(6, sep);
        preparedStatement.setString(7, cell);
        preparedStatement.execute();
        con.close();
    }catch(Exception oc){
        System.out.println(oc.toString());
    }
    }
    public static void main(String []args){
        new DoctorsRecord();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:39:07.763

你的查询有两个问题。

**首先**，`DataBase`是一个保留关键字，你必须用反引号转义它。

```
String query = "insert into `database` (did,dname,dadress,salary,sex,specialist,`cell#`) 
                VALUES (?,?,?,?,?,?,?)"; 
```

**其次**，列名不能用单引号引起来。因为如果你这样做，它也会产生一个错误，告诉你没有找到该列。只有`columnNames`and`tableNames`可以用反引号括起来。

*   [MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:37:24.613

数据库是保留关键字。您必须正确转义它才能将其用作表名。

```
INSERT INTO `database` ... 
```

# xcode - zbarSDK 阅读器不扫描快速设备上的二维码 (XCODE)

> ID：14521951
> 
> 赞同：0
> 
> 时间：2013-01-25T12:36:00.070
> 
> 标签：xcode, xcode4.5, qr-code, zbar-sdk, zbar

我在我的 IOS 应用程序上使用 zbarSDK。它就像一个魅力，它是完美的。问题是当我按下二维码前的扫描按钮时（在 4s 或 iPhone 5 等快速设备上），我只得到绿色矩形，没有任何反应，我需要从代码中移动设备一秒钟并再次扫描，然后它的工作原理。

如果我单击扫描按钮，然后将其带到 QR 码上，它就可以工作。

我正在考虑以下解决方案，但我不知道什么是最好的：

*   如何延迟读者阅读，直到 PresentModalView 动画完成。
*   使用其他东西代替 PresentModalView 动画：是的。

请指教

# twitter-bootstrap - i18n 可以应用于 emberjs TextFields/Labels 等吗？

> ID：14521954
> 
> 赞同：0
> 
> 时间：2013-01-25T12:36:12.770
> 
> 标签：twitter-bootstrap, ember.js, handlebars.js, rails-i18n

有没有办法在 ember/emberjs-bootstrap TextField 标签上使用 i18n。

例如

```
{{view "Bootstrap.Forms.TextField"  valueBinding="account.email" label={{t 'account.email'}}}} 
```

这是行不通的，但我正在寻找一些东西，如果它可能通过 Handlebars 语法，我不需要扩展我想要支持 i18n 的每个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:18:43.233

我不确定您是否已经在使用[Ember-i18n](https://github.com/jamesarosen/ember-i18n)，但它与 Ember 有很好的集成，并且似乎是构建或扩展的良好开端。这里有一些简单的例子，一个使用插值数据。

```
<h2>{{t user.edit.title}}</h2>

<h2>{{t user.followers.title count="2"}}</h2> 
```

你的钥匙被定义为

```
Em.I18n.translations = {
  'user.edit.title': 'Edit User',
  'user.followers.title.one': 'One Follower',
  'user.followers.title.other': 'All {{count}} Followers',
  'button.add_user.title': 'Add a user',
  'button.add_user.text': 'Add',
  'button.add_user.disabled': 'Saving...'
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:39:04.900

我将其用作解决方法，这与优雅相去甚远。

```
{{#T frontend.signup.name}}
{{view "Bootstrap.Forms.TextField"  valueBinding="account.name"  label=i18Label}}
{{/T}}

Handlebars.registerHelper "T", (key, options) ->
 ret = options.fn( i18Label: I18n.t(key) ) 
```

通常我一次得到一个字符串的情况。只有其他方法是扩展 TextField 视图。

# android - 如何在android的可扩展列表视图中触发子点击部分的事件

> ID：14521957
> 
> 赞同：3
> 
> 时间：2013-01-25T12:36:35.417
> 
> 标签：android, expandablelistview

在父单击的展开列表中，我有一个孩子，其中有 3 个文本视图，例如，当我单击不同的文本视图时，我想触发不同的事件。

```
for text view 1 output is hello
for text view 2 output is hi
for text view 3 output is heya 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:52:37.803

正如edwin所说，您可以制作一个服装适配器。您可以在其中对每个视图设置 OnClickListner() 方法。就像我在这里做的一样..

```
 class CustomAdapter extends ArrayAdapter<Contact>
  {
     LayoutInflater inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    public CustomAdapter(Context context, int textViewResourceId,
     ArrayList<Contact> strings) {

      //let android do the initializing :)
  super(context, textViewResourceId, strings);
  }

        //class for caching the views in a row  
   private class ViewHolder
   {

    TextView id,name,phn_no;

   }

   ViewHolder viewHolder;

   @Override
   public View getView(int position, View convertView, ViewGroup parent) {

    if(convertView==null)
    {        
                                 //inflate the custom layout                        
     convertView=inflater.inflate(R.layout.activity_main, null);
     viewHolder=new ViewHolder();

     //cache the views
     viewHolder.id=(TextView) convertView.findViewById(R.id.contact_id_txt);
     viewHolder.name=(TextView) convertView.findViewById(R.id.contact_name_txt);
     viewHolder.phn_no=(TextView) convertView.findViewById(R.id.contact_ph_no_txt);
     viewHolder.id.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(getApplicationContext(), "Hi!!", Toast.LENGTH_SHORT).show();

        }
    }); 
     viewHolder.name.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "Hello!!", Toast.LENGTH_SHORT).show();

        }
    });
     viewHolder.phn_no.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "Heya!!!", Toast.LENGTH_SHORT).show();      
        }
    });

     //link the cached views to the convertview
     convertView.setTag(viewHolder);

    }
    else
     viewHolder=(ViewHolder) convertView.getTag();
       //set the data to be displayed
       viewHolder.id.setText(contacts.get(position).get_id()+"");
    viewHolder.name.setText(contacts.get(position).get_name());
    viewHolder.phn_no.setText(contacts.get(position).get_phn_no());

    //return the view to be displayed
   return convertView;
   }

  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:41:34.207

```
ExpandableListView expandableListView; 
expandableListView.setOnChildClickListener(new OnChildClickListener() {

            @Override
            public boolean onChildClick(ExpandableListView parent, View v,
                    int groupPosition, int childPosition, long id) {
                // TODO Auto-generated method stub

//////////////////////////Change your child text values here.

                return false;

            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:48:28.697

试试这种方式：

> ```
> public View getChildView(int groupPosition, int childPosition, boolean isLastChild,View convertView, ViewGroup parent) 
> {
>     if (convertView == null) 
>     {
>         LayoutInflater infalInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
>         convertView = infalInflater.inflate(R.layout.layout, null);
>     }       
>     tv_ChildFieldId = (TextView) convertView.findViewById(R.id.tv1);
>     tv_ChildFieldId.setText(getChildIdFromDB(groupPosition, childPosition).toString());
> tv_ChildFieldId.setOnClickListener(new ID_OnClickListener());
>     //And so on   
>     return convertView;
> }
> /**Onclick Listener for the Textview*/
> private class ID_OnClickListener implements OnClickListener
> {
>     @Override
>     public void onClick(View v) 
>     {
>     }
> }); 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:40:33.733

因此，您必须为可扩展列表创建**自定义适配器**。然后`onClickListener`在自定义适配器类中为您的不同小部件接口实现

在您的自定义适配器类中

```
 @Override
public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
        View convertView, ViewGroup parent) {

    if (convertView == null) {
        LayoutInflater infalInflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = infalInflater.inflate(R.layout.child_layout, null);
    }
   //Give your On click Implementations Here
    return convertView;
} 
```

经历[这个](http://androidword.blogspot.in/2012/01/how-to-use-expandablelistview.html)和[这个](http://shenhengbin.wordpress.com/2012/03/25/android-practice-custom-expandablelistview-sample-2/)

实施您的**活动**`OnChildClickListener`

```
@Override
public boolean onChildClick(ExpandableListView parent, View v,
   int groupPosition, int childPosition, long id) {
     Toast.makeText(MainActivity.this, "Clicked On Child",
     Toast.LENGTH_SHORT).show();
      return true; //or false
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T12:45:24.833

看看[这里](http://shenhengbin.wordpress.com/2012/03/25/android-practice-custom-expandablelistview-sample-2/) 您可以定义您的自定义可扩展适配器

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) 
```

在此方法中，您可以确定相对于父级的子级位置并设置所需的 oc click listener

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-06T10:54:09.393

试试这个它会有所帮助

```
 expListView.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {
        @Override
        public boolean onChildClick(ExpandableListView parent, View v, int     groupPosition, int childPosition, long id) {
   if (groupPosition == 0){
       if (childPosition == 0){
           Intent intent = new Intent(MarketJaipur.this, ClothesMarket.class);
           startActivity(intent);
       }
   }
        return false;
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-03T15:14:39.700

上面@edwin 的方法失败了！在活动中实现**ExpandableListView.onchildItemClick**不会发出任何调用。

如果您有自定义且复杂的 ChildView，则该问题会特别出现。

对我来说，它通过在***convertView***本身上设置一个 **onclickListener来工作。**我从适配器内部获得了完美的点击。

 *```
convertView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(_context, groupPosition + " clicked "
                    + childPosition, Toast.LENGTH_SHORT).show();
        }
    }); 
```

**确保你把它写在外面**

```
if(convertView==null){.....layout inflation} 
```

插入语。*

# php - 为什么我们需要在 YII 中使用规则方法？

> ID：14521958
> 
> 赞同：0
> 
> 时间：2013-01-25T12:36:40.310
> 
> 标签：php, yii

我对 yii 框架中的规则方法有点困惑。这是来自示例博客应用程序的规则函数。

```
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('title, content, status, author_id', 'required'),
        array('status, create_time, update_time, author_id', 'numerical', 'integerOnly'=>true),
        array('title', 'length', 'max'=>128),
        array('tags', 'safe'),
        // The following rule is used by search().
        // Please remove those attributes that should not be searched.
        array('id, title, content, tags, status, create_time, update_time, author_id', 'safe', 'on'=>'search'),
    );
} 
```

*   为什么我们的课堂需要这个方法？
*   如何有效地使用它？
*   它对我们有什么帮助？在验证表格中？？？
*   任何人都可以解释它是如何工作的？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:41:17.407

> 这些规则由 CModel::validate() 方法应用，该方法返回一个布尔值。默认情况下，方法 CActiveRecord::save() 自动调用此验证，并要求它在尝试保存记录之前成功。

[参考：模型规则验证](http://www.yiiframework.com/wiki/56/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T12:42:09.573

Yii 是一个采用 MVC 模式的框架。M，在 MVC 中代表模型。这意味着所有与数据相关的东西都位于模型类中。字段类型，规则，关系，... 规则，关于日期，所以你会在模型类中找到它。

特别是 Yii 在创建表单时使用模型方法（为数据生成表单）。Yii 在验证数据时使用模型。当您需要验证某些特定字段（如电子邮件、日期、密码等）时，Yii 使用模型。

它对我们有帮助，因为您不需要任何时间来实施电子邮件的验证规则。一个字段只能是一个数字？一封电邮？一个约会？一个网址？在整个模型中必须是唯一的？Yii 为我们提供[了很多验证器](https://github.com/yiisoft/yii/tree/master/framework/validators)。

此外，您可以[创建自己的验证器规则](http://www.yiiframework.com/wiki/168/create-your-own-validation-rule/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T10:13:55.793

当您进行开发并需要验证数据（在大多数情况下 - “用户数据”）时，它将允许您节省大量时间和代码行。

Yii 带有很好的文档和维基。除了上面列出的之外，我还会添加一个[链接](http://www.yiiframework.com/doc/guide/1.1/en/form.model#declaring-validation-rules)，它可以帮助您了解它是什么以及如何烹饪它。

# java - 添加多个页面进行报告

> ID：14521961
> 
> 赞同：0
> 
> 时间：2013-01-25T12:36:50.500
> 
> 标签：java, jasper-reports

如何将多个页面添加到具有相同布局和不同内容的*JR报表中？*

我正在尝试为员工打印工资单。因此，我不想打印员工的每张工资单，而是想将所有这些工资单一起打印在一个碧玉报告中。根据员工人数，每页一张工资单，多页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:44:07.627

在列表或地图中填充您的数据。然后，使用适当的`JRDataSource - JRMapDataSource or JRBeanDataSource`并将其传递给`JReport exporter - PDF, XLS, whatever`. 您甚至可以使用您的数据源填充表格并将每一行打印为单独的工资单（如果您已正确填充数据）。

简而言之，将数据填充到集合中，然后遍历`JasperReport Detail Band`.

我强烈建议使用`iReport`Designer 工具`JasperReports`。

祝你好运！

# iphone - ios 版 Jasmine YouTube 客户端如何工作？

> ID：14521962
> 
> 赞同：2
> 
> 时间：2013-01-25T12:37:01.763
> 
> 标签：iphone, ios, video, youtube

如您所知，没有办法在 iOS 上播放 YouTube 视频`MPMoviePlayerController`（除了在将 url 传递给 MPMoviePlayerController 之前提取直接 url 的情况，这是谷歌禁止的）。虽然有可能`UIWebView`。

但是`Jasmine`应用程序如何工作？我在应用程序中没有发现任何 UIWebView 的痕迹。是否有合法的方式可以使用我可以使用的 MPMoviePlayerController 播放 youtube？

# c++ - 我可以使用插入队列的 C++ 向量进行 FIFO 顺序吗

> ID：14521972
> 
> 赞同：3
> 
> 时间：2013-01-25T12:37:36.903
> 
> 标签：c++

大家好我可以使用向量而不是队列吗？我只想使用不同的线程在内存中推送和弹出。而且我还需要在弹出后删除数据。使用向量而不是队列有什么优势吗？

提前致谢....

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T12:39:32.663

这是不明智的，因为队列是先进先出的，所以你需要从你推入的另一端弹出。为此，要使用的结构是[`std::deque`](http://en.cppreference.com/w/cpp/container/deque)，这是[`std::queue`](http://en.cppreference.com/w/cpp/container/queue)默认情况下在后台使用的结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T12:39:19.897

向量类似于堆栈而不是队列。您只能从一侧推送和弹出，而不能从一侧推送并从另一侧弹出。向量将使您能够在恒定时间内通过其索引访问任意元素，但无法从其开头有效地删除元素。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T12:39:58.647

将向量用于队列将强制您从向量的第一个位置插入或删除元素。向量包含在单个内存块中，这样的操作成本很高。队列可以更有效地实现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-02-28T15:19:10.397

如果队列生命周期很短或者如果您知道队列的最大大小，您“可以”在队列上使用向量。只需在其中使用一个向量 push_back，并保留“头”所在位置的索引。例如，如果我推回 3 个元素，并且我想弹出一个，我只需将我的“头”索引增加 1。

Chandler Carruth 在此视频中解释了这种技术： [https ://youtu.be/fHNmRkzxHWs?t=2541](https://youtu.be/fHNmRkzxHWs?t=2541)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-09T23:29:46.583

如果你真的需要一个 FIFO 的向量，你可以使用`insert()`and `pop_back()`。

```
std::vector<glm::vec3> m_vertices;
glm::vec3 point1 = glm::vec3();
glm::vec3 point2 = glm::vec3();

m_vertices.insert(m_vertices.begin(), point1) ;

m_vertices.pop_back();
m_vertices.insert(m_vertices.begin(), point2); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-05T20:35:15.730

我有一个类似的用例，不同之处在于我只需要填充“队列”一次，然后我需要*按照添加的顺序使用**所有*元素，然后丢弃队列。

 *任何有类似情况的人都可以简单地

*   使用向量
*   用一系列 push_back() 调用填充它
*   然后按正常顺序使用条目（从*begin()*到*end()*）
*   然后只需*clear()*向量

我还没有测试过，但很快就会尝试。*

# java - 从 JSP 到 JavaFX 的输入

> ID：14521978
> 
> 赞同：1
> 
> 时间：2013-01-25T12:37:57.510
> 
> 标签：java, javafx-2, java-ee-6

我想从 JSP 页面向 Java FX 应用程序提供动态输入。我找不到任何合适的方法。从某种意义上说是动态的，我想根据 JSP 页面中的用户输入向 JavaFX 应用程序提供输入。我在同一个 JSP 页面中嵌入了同一个 Java FX 应用程序。欢迎任何帮助。我想在 Java FX 应用程序通过 JSP 页面运行时为其提供输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T00:57:43.847

请参阅 JavaFX 部署主题：[从网页访问 JavaFX 应用程序](http://docs.oracle.com/javafx/2/deployment/javafx_javascript.htm#BCEIBFGD)。

JavaFX 中的 JavaScript => JavaFX 接口与用于传统 Java 小程序的接口相同——它利用了一种称为 LiveConnect 的技术。有关使用 LiveConnect 的更多文档位于 LiveConnect 文档主题：[从 JavaScript 调用到 Java](http://jdk6.java.net/plugin2/liveconnect/#INTRODUCTION)。

JavaFX 文档提供了以下示例代码：

*Java 代码*

```
package testapp;

public class MapApp extends Application {
    public static int ZOOM_STREET = 10;

    public static class City {
        public City(String name) {...}
        ...
    }

    public int currentZipCode;

    public void navigateTo(City location, int zoomLevel) {...}
    ....
} 
```

*JavaScript 代码*

```
function navigateTo(cityName) {
    //Assumes that the Ant task uses "myMapApp" as id for this application
    var mapApp = document.getElementById("myMapApp");
    if (mapApp != null) {
        //City is nested class. Therefore classname uses $ char 
        var city = new mapApp.Packages.testapp.MapApp$City(cityName);
        mapApp.navigateTo(city, mapApp.Packages.testapp.MapApp.ZOOM_STREET);
        return mapApp.currentZipCode;
    }
    return "unknown";
}
window.alert("Area zip: " + navigateTo("San Francisco")); 
```

请注意 JavaScript 代码中的重要注释“假设 Ant 任务使用“myMapApp”作为此应用程序的 id”。引用的 id 是[fx:deploy task](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference001.htm#CIABIFCI)`placeholderid`的参数。

现在，因为您使用的是 JSP，所以大概包含应用程序的 html 页面是由 JSP 处理器动态生成的。因此，您可能想要做的是利用[fx:template](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference002.htm#CIACACDA)任务生成修改后的 jsp 源代码，该源代码调用[dtjava 部署脚本](http://docs.oracle.com/javafx/2/deployment/deployment_toolkit.htm#BABJHEJA)来嵌入您的目标 JavaFX 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:28:04.210

我不确定，但请尝试：[HostServices.getWebContext](http://docs.oracle.com/javafx/2/api/javafx/application/HostServices.html#getWebContext%28%29)

# ios - 从自定义 UISplitview 导航回来

> ID：14521980
> 
> 赞同：0
> 
> 时间：2013-01-25T12:38:08.743
> 
> 标签：ios, xcode, ios6, xcode4.5, uisplitviewcontroller

在我的 iPad 应用程序中，我有一个主菜单屏幕......上面有各种图标。

在点击图标时，它会将我导航到自定义 UISplitViewController。我用这段代码做到了。在 SplitView 中一切正常。

问题：我在点击 MASTER Viewcontroller 导航栏中的按钮时遇到返回主菜单屏幕的问题。

自定义 UIsplitview 的代码：-

```
self.navigationController.navigationBarHidden = NO;
self.navigationController.navigationBar.barStyle = UIBarStyleBlack;

left = [[LeftViewController alloc] initWithStyle:UITableViewStylePlain];
UINavigationController *leftNav = [[UINavigationController alloc] initWithRootViewController:left];
right = [[RightViewController alloc] initWithNibName:@"RightViewController" bundle:nil];
UINavigationController *rightNav = [[UINavigationController alloc] initWithRootViewController:right];
left.right = right;

splitViewController = [[UISplitViewController alloc] init];    
splitViewController.viewControllers = [NSArray arrayWithObjects:leftNav,rightNav, nil];

splitViewController.delegate = right;

appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate];
UISplitViewController *cvc = (UISplitViewController *) splitViewController;
[appDelegate.window setRootViewController:cvc]; 
```

编辑：自定义按钮代码

```
UIButton *a1 = [UIButton buttonWithType:UIButtonTypeCustom];
[a1 setFrame:CGRectMake(0.0f, 0.0f, 32.0f, 32.0f)];
[a1 addTarget:self action:@selector(menu:) forControlEvents:UIControlEventTouchUpInside];
[a1 setImage:[UIImage imageNamed:@"icon.png"] forState:UIControlStateNormal];
UIBarButtonItem *random = [[UIBarButtonItem alloc] initWithCustomView:a1];
left.navigationItem.leftBarButtonItem = random;

- (void)menu {

[self.view removeFromSuperview];
ViewController *vc = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

[appDelegate.window setRootViewController:vc];
[vc release];

} 
```

这会导致 CRASH，并带有 EXC_BAD_ACCESS 消息。

请指导我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:48:49.490

我假设您可以通过从断点单步执行来查看崩溃发生在代码的哪一行？

老实说，我不喜欢你的 sw 设计，因为我不会使用 UISplitViewController 子类。我更有可能使用 UIViewController 包含 API 创建自定义 SplitViewController，然后将其与 UINavigationController 结合使用。

也就是说，如果您必须使用 UISplitViewController 子类，那么我建议您使用所有代码从主 appDelegate 的窗口中添加或删除 viewController，然后使用通知告诉 appDelegate 何时添加或删除相关的 viewController（切换根）。通过这种方式，您可以减少相同视图控制器的多个实例围绕主要内存问题的可能性。尝试让 viewController 将自己从其父级中移除总是很棘手，并且最好由父级或更高级别的实体（在本例中为主应用程序委托）管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:06:30.410

我不确定这是一个好的设计。从主菜单屏幕床边转到拆分视图控制器，您还做了什么？

如果你想保持这种设计，你可以做你在发布代码末尾所做的同样的事情——在按钮的操作方法中，创建一个主菜单控制器的实例并将其设置为窗口的根视图控制器。

**编辑后：**

我可以看到一个肯定会导致崩溃的问题——当您创建按钮时，您将操作设置为“菜单：”，但您的方法实现只是没有冒号或参数的“菜单”。删除冒号，一切正常。

我认为这 3 行不会造成麻烦，但没有必要做你正在做的事情：

```
appDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate];
UISplitViewController *cvc = (UISplitViewController *) splitViewController;
[appDelegate.window setRootViewController:cvc]; 
```

您已经有一个属性或 ivar，splitViewController，无需将其重新分配给 cvc。也不需要获取应用程序委托，您可以使用 self.view.window 获取窗口。因此，这 3 行可以更改为：

```
self.view.window.rootViewController = splitViewController; 
```

# android - 将一组图像转换为android中的单个视频文件

> ID：14521986
> 
> 赞同：4
> 
> 时间：2013-01-25T12:38:30.637
> 
> 标签：android, image, video

我有一组图像，我希望通过循环运行它们，并将其保存为 sdcard 中的视频文件。android中是否有我可以使用的默认实用程序。? 任何可以满足我要求的库。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:46:28.257

您需要一个库来创建这些。这里有一些关于此的帖子：

[用于创建视频的 Java 包](https://stackoverflow.com/questions/2175210/looking-for-a-java-package-to-create-video)

[使用 Xuggler 创建视频](https://stackoverflow.com/questions/9175543/video-creation-from-a-set-of-images-with-xuggler)

**教程 ：**

[从 Xuggler 创建视频的教程](http://www.javacodegeeks.com/2011/02/xuggler-tutorial-frames-capture-video.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:49:06.697

没有`Android`支持此功能的内置库。[这篇 SO 帖子](https://stackoverflow.com/questions/3688993/encode-a-series-of-images-into-a-video)建议`ffmpeg`通过 Java 端口使用用 C/C++ 编写的或使用`Android NDK`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T09:07:06.167

使用 Java`javacpp.jar`和`javacv.jar`在您的 android 项目中创建一系列图像到视频

下面的代码用于创建视频

```
recorder = new FFmpegFrameRecorder("Videofilename", 480, 480);

try {
    recorder.setVideoCodec(13);
    recorder.setFrameRate(0.4d);
    recorder.setPixelFormat(0);
    recorder.setVideoQuality(1.0d);
    recorder.setVideoBitrate(4000);

    startTime = System.currentTimeMillis();
    recorder.start();

    int time = Integer.parseInt(params[0]);
    resp = "Slept for " + time + " milliseconds";

    for (int i = 0; i < iplimage.length; i++) {
        long t = 1000 * (System.currentTimeMillis() - startTime);
        if (t < recorder.getTimestamp()) {
            t = recorder.getTimestamp() + 1000;
        }
        recorder.setTimestamp(t);
        recorder.record(iplimage[i]);
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-25T12:52:44.867

用于创建逐帧动画的对象，由一系列 Drawable 对象定义，可用作 View 对象的背景。

创建逐帧动画的最简单方法是在 XML 文件中定义动画，放在 res/drawable/ 文件夹中，并将其设置为 View 对象的背景。然后，调用 start() 运行动画。

XML 中定义的 AnimationDrawable 由单个元素和一系列嵌套标签组成。每个项目定义动画的一帧。请参见下面的示例。

res/drawable/ 文件夹中的 spin_animation.xml 文件：

```
<!-- Animation frames are wheel0.png -- wheel5.png files inside the
 res/drawable/ folder -->
 <animation-list android:id="@+id/selected" android:oneshot="false">
    <item android:drawable="@drawable/wheel0" android:duration="50" />
    <item android:drawable="@drawable/wheel1" android:duration="50" />
    <item android:drawable="@drawable/wheel2" android:duration="50" />
    <item android:drawable="@drawable/wheel3" android:duration="50" />
    <item android:drawable="@drawable/wheel4" android:duration="50" />
    <item android:drawable="@drawable/wheel5" android:duration="50" />
 </animation-list> 
```

这是加载和播放此动画的代码。

```
 // Load the ImageView that will host the animation and
 // set its background to our AnimationDrawable XML resource.
 ImageView img = (ImageView)findViewById(R.id.spinning_wheel_image);
 img.setBackgroundResource(R.drawable.spin_animation);

 // Get the background, which has been compiled to an AnimationDrawable object.
 AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();

 // Start the animation (looped playback by default).
 frameAnimation.start(); 
```

# google-maps-api-3 - 将 gps 坐标映射到具有相应坐标系的给定图像

> ID：14521988
> 
> 赞同：1
> 
> 时间：2013-01-25T12:38:42.077
> 
> 标签：google-maps-api-3, gps

我有一张地图，它与现实世界的地图准确（足够），如在谷歌地图中所见。我正在使用`google.maps.ImageMapType`该类投影绘制的图像，因此新绘制的地图的角是 (sw)-90,-180 和 (ne)90,180。现在，知道了现实世界地图中叠加层的西南和东北坐标，如何将 GPS 坐标转换为这个新比例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T16:46:56.850

好的，我在“巴黎”中添加了一个标记到[**您的 jsFiddle**](http://jsfiddle.net/u6bdS/6/)中，但该标记显然不在它应该在的位置。

我想你可能正在混合`google.maps.MapType`对象和`google.maps.ImageMapType`

`google.maps.ImageMapType`使用一个`google.maps.ImageMapTypeOptions`对象，它应该有一个`getTileUrl()`方法，但是你有一个`getTile()`破坏投影的方法。

# python - 如何使用 django python 从 html 表单中获取值到数据库中

> ID：14521991
> 
> 赞同：0
> 
> 时间：2013-01-25T12:39:01.043
> 
> 标签：python, django

我是 python 和 django 的新手，在将 html 页面的各个字段存储到数据库中时遇到了困难。例如，我有一个包含 5 个字段和一个提交按钮的 html 页面。在提交表单时，我希望 html 表单中的所有值都应该存储在给定数据库的表中。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:51:24.797

您应该从模型的角度来处理这个问题，模型将模型的属性映射到数据库字段，并且可以方便地用于创建表单。这称为[对象关系映射](http://en.wikipedia.org/wiki/Object-relational_mapping)。

首先在您的应用程序文件夹中创建（或修改）models.py，然后在其中声明模型（基本上是您要存储的字段）。如前所述，请参阅 Django 的[创建表单](https://docs.djangoproject.com/en/dev/topics/forms/)和[模型-表单映射](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:48:19.317

```
models.py

from django.contrib.auth.models import User
from django.db import models

class AllocationPlan(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=50)
    data = models.CharField(max_length=4096)
    total = models.DecimalField(max_digits=10, decimal_places=2)

forms.py

from django import forms
from django.forms import ModelForm
from app_name.models import AllocationPlan   

class AllocationPlanForm(ModelForm):
    class Meta:
        model = AllocationPlan

views.py

from django.shortcuts import render
from app_name.forms import AllocationPlanForm

def add(request):
    if request.method == 'POST':
        form = AllocatinPlanForm(request.POST)
        if form.is_valid():
            form.save()
return render(request, 'page.html', {
    'form': AllocationPlanForm()
})

 page.html

 <form method="post">{% csrf_token %}
     {% for field in form %}
     {{field}}
     <input type="submit" value="Submit"/>
     {% endfor %}
 </form> 
```

# sql - 将 4 个表中的数据合并到一列/字段中

> ID：14521992
> 
> 赞同：2
> 
> 时间：2013-01-25T12:39:01.940
> 
> 标签：sql, ms-access, ms-access-2010

我需要在 MS Access 2010 中创建一个查询，将来自 4 个不同表的数据组合在一列中。

表格定义如下；

```
Table 1: date, country, channel, calls_in
Table 2: date, country, channel, calls_out
Table 3: date, country, channel, email
Table 4: date, country, channel, chat 
```

查询应如下所示：

```
Query 1: Date, country, channel, contacts 
```

联系人列应结合相应日期、国家和渠道的 4 种联系人类型（即 call_in/out、电子邮件和聊天）。

所有 4 个表都有相同的日期和国家。频道特定于每个表。

我一直在努力完成这项工作，但无法理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:42:41.163

使用`UNION`（隐式不同）或`UNION ALL`：

```
SELECT date, country, channel, 'calls_in' AS ContactType, calls_in AS ContactData
FROM table1
UNION ALL
SELECT date, country, channel, 'calls_out', calls_out        
FROM table2
UNION ALL
SELECT date, country, channel, 'email', email
FROM table3
UNION ALL
SELECT date, country, channel, 'chat', chat
FROM table4; 
```

这将为您提供四个表中的所有数据，`ContactType`以及三种类型的新列`calls_in`、 、`calls_out`，`email`并`chat`与它们的数据组合在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T12:47:57.347

您可能会在此之后：

```
SELECT
  all_contacts.date,
  all_contacts.country,
  all_contacts.channel,
  "calls in: " & [calls_in] & ", calls out: " & [calls_out] & ", email: " & [email] & ", chat " & [chat] AS contacts
FROM
  ((((select date, country, channel from [Table 1] union
      select date, country, channel from [Table 2] union
      select date, country, channel from [Table 3] union
      select date, country, channel from [Table 4])  AS all_contacts
  LEFT JOIN [Table 1] ON (all_contacts.channel = [Table 1].channel) AND (all_contacts.country = [Table 1].country) AND (all_contacts.date = [Table 1].date))
  LEFT JOIN [Table 2] ON (all_contacts.channel = [Table 2].channel) AND (all_contacts.country = [Table 2].country) AND (all_contacts.date = [Table 2].date))
  LEFT JOIN [Table 3] ON (all_contacts.channel = [Table 3].channel) AND (all_contacts.country = [Table 3].country) AND (all_contacts.date = [Table 3].date))
  LEFT JOIN [Table 4] ON (all_contacts.channel = [Table 4].channel) AND (all_contacts.country = [Table 4].country) AND (all_contacts.date = [Table 4].date); 
```

由于 MS-Access 不支持 FULL OUTER JOINS，并且没有像 GROUP_CONCAT 这样的聚合函数，我将加入一个 UNION 子查询，其中包含每个表的所有日期、国家和频道，然后我将所有联系人（calls_in、calls_out、电子邮件和聊天）合并到一个单元格中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:51:23.623

我想稍微改进一下 Mahmoud 的回答：

```
SELECT date, country, channel, calls_in, 'Calls_in' as ContactType  FROM table1
UNION ALL
SELECT date, country, channel, calls_out, 'Calls_out' as ContactType FROM table2
UNION ALL
SELECT date, country, channel, email, 'email' as ContactType FROM table3
UNION ALL
SELECT date, country, channel, chat, 'Calls_in' as ContactType FROM table4; 
```

但我必须说，很明显数据库可以进行一些规范化。如果您*可以*修改数据库，您可以很容易地将所有数据放在一个表中，并且只需有一个字段来跟踪您使用的通信类型。

# iphone - 从服务器 txt/xml 导入数据

> ID：14521998
> 
> 赞同：1
> 
> 时间：2013-01-25T12:39:37.127
> 
> 标签：iphone, ios, objective-c, xml

我目前正在开发一个将用作跟踪应用程序的应用程序。此应用程序需要位于服务器上的数据。假设我们在服务器上为每个客户创建一个文件。该文件将包含跟踪信息。如果这是一个 xml 文件或文本文件会更容易吗？代码会是什么样子？

假设我们已经知道客户编号，并且文件与客户编号同名。用户点击按钮获取数据。然后，该应用程序联系服务器，请求获得相同客户编号的文件，并读取该文件，并在标签或类似内容中显示信息。

有什么建议从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:45:38.690

如果您没有任何其他特定要求，从服务器获取 xml 文件就足够了。例如，如果您在 url [www.test.com/user1.xml](http://www.test.com/user1.xml)有文件，您可以加载到数据中

```
NSData *tmpData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"www.test.com/user1.xml"] ];
                    //convert data to string
NSString *tmpString = [[NSString alloc] initWithData:tmpData encoding:NSUTF8StringEncoding];
NSArray *piecesArray = [tmpString componentsSeparatedByString:@" "];
if(piecesArray.count==2)
{
   labelA.text = [piecesArray objectAtIndex:0];
   labelB.text = [piecesArray objectAtIndex:1];
} 
```