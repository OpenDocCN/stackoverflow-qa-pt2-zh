# StackOverflow 问答 15417000-15417999

# javascript - jQuery modal 不能正确交互

> ID：15417003
> 
> 赞同：0
> 
> 时间：2013-03-14T18:10:29.673
> 
> 标签：javascript, jquery, jquery-ui

我有一个出现在 OpenLayers 地图顶部的 jQuery 模式。当我尝试控制模态时，它会忽略模态并控制地图。我只能控制地图之外的区域。我该如何解决这个问题？

谢谢！

```
function init_editor() {

$( '#widthColor' ).colorPicker();
$( '#fillColor').colorPicker();
$( "#slider" ).slider({
    value:1,
    min: 1,
    max: 5,
    step: 1,
    slide: function( event, ui ) {
        $( "#amount" ).val(  ui.value );
    }
});

$( "#transparency" ).slider({
    value: 0.5,
    min: 0.1,
    max: 1,
    step: 0.1,
    slide: function( event, ui ) {
        $( "#trans_val" ).val( ui.value );
    }
});

$( "#amount" ).val(  $( "#slider" ).slider( "value" ) );
$( "#trans_val" ).val(  $( "#transparency" ).slider( "value" ) );

//Map KML editor modal
var dlg = $( "#layer-manager" ).dialog({
    modal: true,
    width: 300,
    height: 300,
    autoOpen: false,
    buttons: {
        Ok: function( e ) {
            e.preventDefault();
            setColor( $('#widthColor').val(), $('#fillColor').val(), $('#amount').val(), $('#trans_val').val() );
            $( this ).dialog( "close" );
        }
    }
}); 

//Register the modal
$(document).on("click", "a.layer-manager", function(e){
    $( "#layer-manager").dialog( "open" );
});
} 
```

还有网站[http://uganda.csrcdev.com/map/](http://uganda.csrcdev.com/map/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:55:10.957

您需要添加：

```
function init_editor() {

$( "#layer-manager").css('z-index','1000'); 
```

然后模态将成为顶级元素。现在它隐藏在其他一切之后。

打开 firebug 并找到靠近底部的对话框。然后`z-index: 1000;`在你做出改变之前给它看看它的工作原理。

# php - 让用户选择要从 PHP 数据库中提取要显示的图像

> ID：15417009
> 
> 赞同：0
> 
> 时间：2013-03-14T18:10:41.940
> 
> 标签：php, mysql

我的网站由存储在 php 数据库中的用户加载图像组成。我正在尝试创建一个页面，用户可以在其中输入与其图像关联的“image_id”，并将其与一些统计数据（赢/输）一起显示在页面上。目前我必须将 image_id 放入代码中以提取图像。

这是我用来从数据库中提取信息的代码

```
<?php
include('mysql.php');

$query="SELECT filename FROM images WHERE image_id = 449";
$result = @mysql_query($query);

while($row = mysql_fetch_object($result)) {
$images[] = (object) $row;
}
</php> 
```

这是显示图像的代码。

```
<img src="images/<?=$images[0]->filename?>" width="300" /> 
```

有什么建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:22:37.917

使用 ajax 或 jquery 获取输入，异步调用 php 文件，并加载它发回的文件名。Jquery 的 $.post 非常适合这种事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:22:41.613

为用户创建所有可用图像的下拉菜单，并使用下拉菜单的 onchange 事件将 image_id 值提交回服务器，运行查询，获取结果并显示图像...

# jquery - carouFredSel slideTo/slideToPage 事件

> ID：15417011
> 
> 赞同：2
> 
> 时间：2013-03-14T18:10:44.843
> 
> 标签：jquery, caroufredsel

我在将 carouFredSel 用作带有控件以转到特定幻灯片的无限圆形滑块时遇到了一些麻烦。这是我的实现代码：

```
$('.circular-gallery ul').carouFredSel({
    width: '100%',
    height:270,
    align:'center',
    items: {
        start: 10,
        width:340,
        visible: 10
    },
    prev: {
        button: $('.circular-gallery .prev')
    },
    next: {
        button: $('.circular-gallery .next')
    },
    scroll: {
        items: 1,
        easing: 'quadratic',
        onBefore: function(data){
            var $current = $(data.items.visible[4]);
            if(!data.scroll.duration){ // this happens on init, so just set active class
                $current.addClass('active');
            } else {
                var $active = $('.circular-gallery ul li.active');
                $active.find('.physician-name').fadeOut('normal', function(){
                    $(this).css('display','block').css('visibility','hidden');
                    $active.removeClass('active');
                });
                $current.find('.physician-name').css('visibility','visible').hide().fadeIn('normal', function(){
                    $current.addClass('active');
                });
            }
        }
    },
    auto: {
        play: false
    }
});

var $items = {};
$('.physician').hoverIntent(function(){
    slideToPhysician($(this).attr('rel'));
}, function(){ return false; });

function slideToPhysician(rel){
    var $items = $('.circular-gallery ul li').trigger('currentVisible');
    var index = $items.index($('li.'+rel));
    //console.log(index);
    //$('.circular-gallery ul').trigger('slideToPage', index);
    $('.circular-gallery ul').trigger('slideTo', index);
} 
```

问题是每个元素的索引不是恒定的。每次滑块移动时它都会改变。所以我很难确定要滑到哪一个。我的滑块中的每个 li 都有类，并使用链接上的“rel”属性将相应的类传递给 hoverIntent 事件。在调试过程中，如果我翻转相同的名称，我可能会得到 6 的索引，然后它会滑到某个幻灯片，如果我再次翻转它，我会得到 10。我无法弄清楚模式或者我正在做首先是错误的。

也许我刚刚做错了什么，但目标是在页面中心有一个带有“突出显示”项目的滑块，然后如果您将鼠标悬停在名称上几秒钟，滑块就会移动到该特定照片。

感谢您抽出宝贵时间提供帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T11:16:48.683

我通过将数组作为参数传递给`slideTo`Event 解决了几乎相同的问题。它包含点击的项目和 carouFredSel 项目索引：

```
$li.on('click', function() {
  var index = 0;
  $('#fred').trigger('slideTo', [$(this), index]);
}); 
```

[在此处](http://docs.dev7studios.com/jquery-plugins/caroufredsel)查看示例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-15T20:46:39.927

这段代码对我有用：

```
$('.circular-gallery ul li')('click', function() {
  $('#fred').trigger('slideTo', $(this).index());
}); 
```

# php - PHP代码警告SQL

> ID：15417012
> 
> 赞同：1
> 
> 时间：2013-03-14T18:10:50.087
> 
> 标签：php, sql, warnings

我正在尝试运行一个 php 文件，但我收到两个警告，我似乎无法放置。警告：

*   PHP 警告：指令 'safe_mode' 在 PHP 5.3 中已弃用，在第 0 行的 Unknown 和更高版本中已弃用

*   PHP 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 19 行的 /etc/baseconetrial2.php 中给出

编码：

```
<?php

//connectie database

mysql_connect('localhost','heregoestheusername','heregoesthepass');

@mysql_select_db('admin_subscriptions') or die( "Unable to select database");

$type = "proefabonnement";

$checksql = "SELECT * FROM subscriptions where (type_abonnement = '$type' AND  DATE(timestamp) = DATE_SUB( CURDATE( ) , INTERVAL 26))";

$checkresult = mysql_query($checksql);

while ($check = mysql_fetch_array($checkresult)) {

$mail_ontv = "email@emailadress.com"; 

$_POST['onderwerp'] = "Verlopen Trial Account";

    // set datum 
    $datum = date("d.m.Y H:i"); 

    // set ip 
    $ip = $_SERVER['REMOTE_ADDR']; 

    $inhoud_mail .= $_SERVER['SCRIPT_URI'] . "\n\n";

    $inhoud_mail .= "Binnenkort verloopt er een trail account!\n\n\n";  
    $inhoud_mail .= "Bedrijfsnaam: " . $check['bedrijfsnaam'] . "\n\n"; 
    $inhoud_mail .= "Telefoonnummer: " . $check['telefoonnummer'] . "\n\n"; 
    $inhoud_mail .= "E-mail adres: " . $check['email'] . "\n\n"; 
    $inhoud_mail .= "Telefoonnummer contactpersoon: " . $check['telefoonnummercontact'] . "\n\n"; 
    $inhoud_mail .= "E-mail adres contactpersoon: " . $check['emailcontact'] . "\n\n"; 
    $inhoud_mail .= "Hieronder de link voor de klant:\n\n\n";
    $inhoud_mail .= "http://www.basecone.nl/upgrade1?key=".$check['unique']."\n\n"; 

    $inhoud_mail .= "Verstuurd op " . $datum . " via het ip " . $ip . "\n\n"; 

    $headers = "From: BaseconeWizard < wizard@basecone.nl >";

    $headers = stripslashes($headers);
    $headers = str_replace("\n", "", $headers); // Verwijder \n 
    $headers = str_replace("\r", "", $headers); // Verwijder \r 
    $headers = str_replace("\"", "\\\"", str_replace("\\", "\\\\", $headers)); // Slashes van quotes 

    $_POST['onderwerp'] = str_replace("\n", "", $_POST['onderwerp']); // Verwijder \n 
    $_POST['onderwerp'] = str_replace("\r", "", $_POST['onderwerp']); // Verwijder \r 
    $_POST['onderwerp'] = str_replace("\"", "\\\"", str_replace("\\", "\\\\", $_POST['onderwerp'])); // Slashes van quotes 

    mail($mail_ontv, $_POST['onderwerp'], $inhoud_mail, $headers); 

}

?> 
```

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:18:39.053

PHP 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 19 行的 /etc/baseconetrial2.php 中给出

```
$checksql = "SELECT * FROM subscriptions where (type_abonnement = '$type' AND  DATE(timestamp) = DATE_SUB( CURDATE( ) , INTERVAL 26 DAY))"; 
```

注意 DATE_SUB mysql 函数的 DAY 参数

我还建议使用 mysql_real_escape_string() 函数来清理“$type”变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:16:45.107

您的代码或主机正在使用的某些部分`safe_mode`已被弃用。

> PHP 安全模式是解决共享服务器安全问题的一种尝试。尝试在 PHP 级别解决此问题在架构上是不正确的，但由于 Web 服务器和操作系统级别的替代方案不太现实，许多人，尤其是 ISP，现在使用安全模式。

请不要使用`@`来抑制错误。使用错误处理程序或启用完整的错误报告。

> `mysql_fetch_array()`期望参数 1 是资源

您的查询失败，因此将布尔结果传递给`mysql_fetch_array`. 但是由于您没有发现错误，因此您不会知道。

```
$checkresult = mysql_query($checksql) or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T18:17:47.003

为了

`PHP Warning: Directive 'safe_mode' is deprecated in PHP 5.3 and greater in Unknown on line 0`

删除或评论

`safe_mode = "On/Off"`从你的 php.ini

为了`PHP Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /etc/baseconetrial2.php on line 19`

请用

```
if (!$checksql) die(mysql_error()); 
```

它将在查询中显示问题

# javascript - 添加和删 除模板

> ID：15417014
> 
> 赞同：0
> 
> 时间：2013-03-14T18:10:59.080
> 
> 标签：javascript, jquery, mongodb, meteor

假设我有这个“模型”

```
 var lists = [
  {

    title:          'Default title',
    image:          '/img/default.jpeg',
    section:        [
                      {   name: 'Default Name',
                          description: 'Default Description'
                      }
                    ],
    activity:       ['default']
  }
]; 
```

这是视图模板

```
<template name="main_list_view">
   {{#each list.section}}
      {{> section}}
   {{/each}}
   <a id="addSection" href='#'>Add Section</a>
</template>

<template name="section">
   <li>{{section.name}}</li>
   <li>{{section.description}}</li>
   <a class="deleteSection" href='#'>Delete Section</a>
</template> 
```

我需要有关添加更多部分和从集合中删除特定部分的逻辑的帮助。

我已经检查了 mongoDB，看起来我必须使用 addToset 和 $unset 之类的东西来更新模型，但我真的只想从视图中删除它们，因为我希望默认模型始终保持不变。

那么当用户单击 Addcontent 时如何删除并将模板添加到视图中，并在用户单击 remove 时删除特定视图？有流星的方法吗？因此，用户单击 addContent 并在单击删除时呈现或删除新的部分模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:36:05.920

删除一个应该很简单。首先，在删除链接中添加部分的 id 可能会有所帮助：

`<a data-id="{{section._id}}" class="deleteSection" href='#'>Delete Section</a>`

```
Template.section.events({
  'click a.deleteSection': function(evt) {
    Sections.remove($(evt.target).data('id'));
  }
}); 
```

添加一个是另一回事，因为这完全取决于您单击`addSection`链接时想要发生的事情。`Section`该链接是否呈现一个在提交时创建新的表单？或者该链接的处理程序是否创建一个`Section`对象并填写值？

**编辑**

有人指出，这`Sections`不是一个集合。我应该看到的。将其制成一个集合将是处理该问题的明显方法。所以而不是：

```
 {{#each list.section}}
      {{> section}}
   {{/each}} 
```

你会有：

```
{{#each sections list._id}}
  {{> section}}
{{/each}} 
```

在你的 js 文件中：

```
Template.main_list_view.helpers({
  sections: function(list_id) {
    return Sections.find({ list_id: list_id });
  }
}); 
```

或者，您可以将“部分”模板向上移动到父级，然后您可以将 list_id 添加为链接上的数据属性::

```
{{#each list.section}}
  <li>{{name}}</li>
  <li>{{description}}</li>
  <a data-id="{{list._id}}" data-name="{{name}}" data-description="{{description}}" class="deleteSection" href="#">Delete Section</a>
{{/each}} 
```

然后在你的js文件中：

```
Template.section.events({
  'click a.deleteSection': function(evt) {
    var list = Lists.find($(evt.target).data('id'));
    var section = { name: $(evt.target).data('name'), description: $(evt.target).data('description') };
    sections = list.sections;
    sections.splice(sections.indexOf(section), 1);
    Lists.update(list._id, $set: { sections: sections });
  }
}); 
```

# unit-testing - 在域对象约束中使用 grails 配置值

> ID：15417015
> 
> 赞同：3
> 
> 时间：2013-03-14T18:11:01.527
> 
> 标签：unit-testing, grails, config, domain-object

圣杯 2.2.0

如何访问 Grails 域对象约束中的自定义配置变量。

我想要这样的东西：

```
 class User {

         def grailsApplication

         String name

         static constraints = {
             name size: grailsApplication.config.maxlength
         }  

    } 
```

但它因“没有这样的属性：grailsApplication”而失败。我试图通过遵循[在域对象中获取 grails 2.0.0M1 配置信息和静态范围的建议来使其工作？](https://stackoverflow.com/questions/6976983/getting-grails-2-0-0m1-config-info-in-domain-object-and-static-scope)但还没有设法使任何组合起作用。

如何访问域对象约束中的配置？此外，如何在域约束的单元测试中处理这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-09T19:42:41.170

您可以使用`grails.util.Holders`该类来访问配置对象，如下所示：

在`Config.groovy`：

```
myMaxSize = 10 
```

在您的域类中：

```
class User {
    String name

    static constraints = {
        name minSize: Holders.config.myMaxSize
    }
} 
```

# android - 在应用计费 (v3) - 了解 nullpointerexception

> ID：15417019
> 
> 赞同：6
> 
> 时间：2013-03-14T18:11:14.480
> 
> 标签：android, in-app-purchase

我有一个应用程序，我在应用程序计费 (v3) 中添加了该应用程序。已发布的应用程序似乎在我测试的（当然数量很少）设备上运行良好。代码被proguard混淆了，但我保留了对应的proguard mapping.txt。

一些购买成功，但我也收到了崩溃的报告。然后我使用retrace.bat 来翻译崩溃堆栈跟踪并得到以下结果：

```
java.lang.NullPointerException

at com.mycompany.mygame.util.IabHelper.void startSetup(com.mycompany.mygame.util.IabHelper$OnIabSetupFinishedListener)(Unknown Source)
                                      void dispose()
                                      void launchPurchaseFlow(android.app.Activity,java.lang.String,int,com.mycompany.mygame.util.IabHelper$OnIabPurchaseFinishedListener,java.lang.String)
                                      boolean handleActivityResult(int,int,android.content.Intent)
                                      com.mycompany.mygame.util.Inventory queryInventory$337baa91(boolean,java.util.List)
                                      void queryInventoryAsync$69bb631c(java.util.List,com.mycompany.mygame.util.IabHelper$QueryInventoryFinishedListener)
                                      java.lang.String getResponseDesc(int)
                                      int getResponseCodeFromBundle(android.os.Bundle)
                                      int queryPurchases(com.mycompany.mygame.util.Inventory,java.lang.String)
                                      int querySkuDetails(java.lang.String,com.mycompany.mygame.util.Inventory,java.util.List)
                                      void logDebug(java.lang.String)

at com.mycompany.mygame.util.IabHelper.void startSetup(com.mycompany.mygame.util.IabHelper$OnIabSetupFinishedListener)(Unknown Source)
                                      void dispose()
                                      void launchPurchaseFlow(android.app.Activity,java.lang.String,int,com.mycompany.mygame.util.IabHelper$OnIabPurchaseFinishedListener,java.lang.String)
                                      boolean handleActivityResult(int,int,android.content.Intent)
                                      com.mycompany.mygame.util.Inventory queryInventory$337baa91(boolean,java.util.List)
                                      void queryInventoryAsync$69bb631c(java.util.List,com.mycompany.mygame.util.IabHelper$QueryInventoryFinishedListener)
                                      java.lang.String getResponseDesc(int)
                                      int getResponseCodeFromBundle(android.os.Bundle)
                                      int queryPurchases(com.mycompany.mygame.util.Inventory,java.lang.String)
                                      int querySkuDetails(java.lang.String,com.mycompany.mygame.util.Inventory,java.util.List)
                                      void logDebug(java.lang.String)

at com.mycompany.mygame.util.IabHelper$2.void run()(Unknown Source)
at java.lang.Thread.run(Thread.java:1019) 
```

我对如何读取堆栈跟踪有点模糊，但我猜 OnIabPurchaseFinishedListener 中可能有一个空指针......？如果是这样，那是怎么发生的？

**编辑：**堆栈跟踪中出现“launchPurchaseFlow”这一事实是否意味着程序在用户尝试购买东西时崩溃了？

**编辑：**根据要求，这是听众：

```
/**
 * Callback that notifies when a purchase is finished.
 */
public interface OnIabPurchaseFinishedListener {
    /**
     * Called to notify that an in-app purchase finished. If the purchase was successful,
     * then the sku parameter specifies which item was purchased. If the purchase failed,
     * the sku and extraData parameters may or may not be null, depending on how far the purchase
     * process went.
     *
     * @param result The result of the purchase.
     * @param info The purchase information (null if purchase failed)
     */
    public void onIabPurchaseFinished(IabResult result, Purchase info);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T02:17:52.920

也许这与这里提出的问题有关： [https ://code.google.com/p/android/issues/detail?id=42338](https://code.google.com/p/android/issues/detail?id=42338)

更新的代码尚未推送到 SDK 管理器，但您可以在此处查看与此问题相关的所有更改：[https ://code.google.com/p/marketbilling/source/detail?r=7ec85a9b619fc5f85023bc8125e7e6b1ab4dd69f](https://code.google.com/p/marketbilling/source/detail?r=7ec85a9b619fc5f85023bc8125e7e6b1ab4dd69f)

有 4 个文件受此问题影响。进行他们建议的更改，看看您是否仍然遇到同样的问题。

# javascript - 如果多个选项值为空，如何显示警报

> ID：15417023
> 
> 赞同：0
> 
> 时间：2013-03-14T18:11:26.023
> 
> 标签：javascript, jquery, select, input

我有以下 HTML 和 Javascript，但不起作用：

```
<select id="shirtinfo[0]" name="shirtinfo[0]">
    <option value="">Confederation</option>
    <option value="6770">Europe (UEFA)</option>
    <option value="16272">South America (CONMEBOL)</option>
    <option value="21684">Africa (CAF)</option>
    <option value="21771">North &amp; Central America (CONCACAF)</option>
    <option value="18091">Asia (AFC)</option>
    <option value="19193">Oceania (OFC)</option>
</select>
...
<select id="season" name="season">
    <option value="">Season</option>
    <option value="2013">2013</option>
    ...
</select>
...
<input id="submit" type="submit" value="[[Save:raw]]" onclick="validate()" />

<script>
function validate() {
    if  (document.querySelectorAll("#shirtinfo[0], #shirtinfo[1], #shirtinfo[2], #shirtinfo[3], #shirtinfo[4], #season, #style, #status").value)
        {
            alert("[[Please enter the mandatory fields]]");
            return false;
        }
}
</script> 
```

所有第一个选项值都是空的，只有标题，如果没有选择任何选项，则会显示警报。因此，用户至少需要从列表中选择不是第一个选项的其他内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T18:14:25.290

根据需要更改以下代码。只需遍历适当的元素，如果`select`' 的值为空，则根据需要进行中断和处理。

```
function validate() {
    "use strict";
    var selectEls = document.querySelectorAll('select'),
        numSelects = selectEls.length;

    for(var x=0;x<numSelects;x++) {
        if (selectEls[x].value === '') {
            alert('[[Please enter the mandatory fields]]');
            return false;
        }
    }

    // If the code execution reaches this point, all the tests pass
    // ...
} 
```

*可以*改进代码，例如，如果您想继续循环遍历所有元素，并突出显示问题`select`元素，但这超出了本问题的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:21:50.723

试试这个：也在这个小提琴中：http: [//jsfiddle.net/9f76X/](http://jsfiddle.net/9f76X/)

```
<select id="shirtinfo" name="shirtinfo[0]">
    <option value="">Confederation</option>
    <option value="6770">Europe (UEFA)</option>
    <option value="16272">South America (CONMEBOL)</option>
    <option value="21684">Africa (CAF)</option>
    <option value="21771">North &amp; Central America (CONCACAF)</option>
    <option value="18091">Asia (AFC)</option>
    <option value="19193">Oceania (OFC)</option>
</select>
...
<select id="season" name="season">
    <option value="">Season</option>
    <option value="test">test</option>
</select>
...
<input id="submit" type="submit" value="[[Save:raw]]" onclick="return validate();" />

<script type="text/javascript">
    function validate() {
    var controls, cnt, showAlert;
    controls = document.querySelectorAll("#shirtinfo,#season");

    for (cnt=0;cnt < controls.length; cnt++)
    {
        if (!controls[cnt].value) 
        {
            showAlert = true;
            break;
        }
    }

    if (showAlert) {
        alert("[[Please enter the mandatory fields]]");
    }
    return !showAlert;
}

</script> 
```

# oracle-adf - ADF 任务流重置

> ID：15417026
> 
> 赞同：0
> 
> 时间：2013-03-14T18:11:40.077
> 
> 标签：oracle-adf, jdeveloper

在 ADF 中，如何重新启动任务流区域。我有一个由一侧的命令链接和另一侧的区域组成的 jsf 页面。该区域始终是相同的任务流，但我需要在单击任何命令链接时将任务流重新启动回默认活动。RefreshCondition 和 refresh ifNeeded 属性没有重置任务流活动。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:39:59.650

使用 TF 本身： [http](http://andrejusb.blogspot.be/2011/08/adf-dialog-framework-and-adf-task-flow.html) ://andrejusb.blogspot.be/2011/08/adf-dialog-framework-and-adf-task-flow.html 在您的支持 bean 中使用代码： [https ://forums.oracle.com /forums/thread.jspa?threadID=1013471](https://forums.oracle.com/forums/thread.jspa?threadID=1013471)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T09:50:02.307

有一个任务流的输入参数，当你想重启区域时，改变输入参数的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T04:56:22.720

在同一页面开始和结束的任务流中添加“控制流”。给那个“控制流”起个名字。假设值是“back” 现在在每个命令链接动作上传递那个值。例如：。

//这会起作用。让我知道会发生什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-17T08:27:43.080

实现这一点的最简单选项：-
1\. 创建一个动态区域
2\. 创建一个带有单个空白页面（用于重置）的有界任务流，并作为默认区域添加到动态区域
3\. 根据需要添加其他任务流并添加命令链接到左侧
4\. 享受...

# android - 如何在键盘xml中映射重音字符

> ID：15417028
> 
> 赞同：3
> 
> 时间：2013-03-14T18:11:50.370
> 
> 标签：android, android-softkeyboard, android-xml

我必须在我的应用程序中实现一个简单的自定义软键盘，并且我也想在键盘上显示重音字符。

它们是：í、é、á、ű、ú、ő、ó、ü、ö

我的问题是如何在键盘 xml 中映射这些？这些的关键代码是什么？[我在官方KeyEvent](http://developer.android.com/reference/android/view/KeyEvent.html)文档中找不到它们。

我当前的键盘定义 xml 如下所示：

```
<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
    android:keyWidth="10%p"
    android:horizontalGap="0px"
    android:verticalGap="0px"
    >

<Row android:keyHeight="16%">
    <Key android:codes="45" android:keyLabel="q" android:keyEdgeFlags="left"/>
    <Key android:codes="51" android:keyLabel="w"/>
    <Key android:codes="33" android:keyLabel="e"/>
    <Key android:codes="46" android:keyLabel="r"/>
    <Key android:codes="48" android:keyLabel="t"/>
    <Key android:codes="54" android:keyLabel="z"/>
    <Key android:codes="49" android:keyLabel="u"/>
    <Key android:codes="37" android:keyLabel="i"/>
    <Key android:codes="43" android:keyLabel="o"/>
    <Key android:codes="44" android:keyLabel="p" android:keyEdgeFlags="right"/>
</Row>

<Row android:keyHeight="16%">
    <Key android:codes="?" android:keyLabel="ö" android:keyEdgeFlags="left"/>
    <Key android:codes="?" android:keyLabel="ő"/>
    <Key android:codes="?" android:keyLabel="ü"/>
    <Key android:codes="?" android:keyLabel="ű"/>
    <Key android:codes="?" android:keyLabel="ó"/>
    <Key android:codes="?" android:keyLabel="é"/>
    <Key android:codes="?" android:keyLabel="á"/>
    <Key android:codes="?" android:keyLabel="í" android:keyEdgeFlags="right"/>
</Row>
</Keyboard> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T20:53:17.380

最后我用一个技巧解决了它。

在包含我的重音字符的行中插入了一个从 900 到 908 的自定义键码。

```
<Row android:keyHeight="16%">
    <Key android:codes="900" android:keyLabel="ö" android:keyEdgeFlags="left"/>
    <Key android:codes="901" android:keyLabel="ő"/>
    <Key android:codes="902" android:keyLabel="ü"/>
    <Key android:codes="903" android:keyLabel="ű"/>
    <Key android:codes="904" android:keyLabel="ó"/>
    <Key android:codes="905" android:keyLabel="ú"/>
    <Key android:codes="906" android:keyLabel="á"/>
    <Key android:codes="907" android:keyLabel="é"/>
    <Key android:codes="908" android:keyLabel="í" android:keyEdgeFlags="right"/>
</Row> 
```

在我设置我的 KeyboardView 的动作侦听器的地方，我将目标 EditText 作为对象传递给我的 OnKeyboardActionListener。

这样，在我的 OnKeyboardActionListener 的 onKey 方法中，我可以检查 primaryCode 是否大于 900 或等于它，所以我只需设置 EditText 的文本并将我的重音字符插入光标位置：

```
@Override
public void onKey(int primaryCode, int[] keyCodes) {        
    if(primaryCode >= 900) {
    String character = null;

    switch(keyCode) {
        case 900:
            character = "ö";
            break;
        case 901:
            character = "ő";
            break;
        case 902:
            character = "ü";
            break;
        case 903:
            character = "ű";
            break;
        case 904:
            character = "ó";
            break;
        case 905:
            character = "ú";
            break;
        case 906:
            character = "á";
            break;
        case 907:
            character = "é";
            break;
        case 908:
            character = "í";
            break;
        default:
            return;
    }

    int start = mTargetView.getSelectionStart();
    int end = mTargetView.getSelectionEnd();
    mTargetView.getText().replace(Math.min(start, end), Math.max(start, end), character, 0, character.length());
    } else {
        long eventTime = System.currentTimeMillis();
        KeyEvent event = new KeyEvent(eventTime, eventTime,
                KeyEvent.ACTION_DOWN, primaryCode, 0, 0, 0, 0,
                KeyEvent.FLAG_SOFT_KEYBOARD | KeyEvent.FLAG_KEEP_TOUCH_MODE);

        mTargetActivity.dispatchKeyEvent(event);
    }

} 
```

mTargetView 是我的 EditText。通过这个技巧，我可以使用标准键盘 xml 映射将重音 unicode 字符和基本上所有内容插入到 EditText 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-08T01:23:07.420

一个更短的解决方案是删除，`codes`因为在这种情况下会发送标签文本。

```
<Row>
    <Key android:keyLabel="ö" android:keyEdgeFlags="left"/>
    <Key android:keyLabel="ő"/>
    <Key android:keyLabel="ü"/>
    <Key android:keyLabel="ű"/>
    <Key android:keyLabel="ó"/>
    <Key android:keyLabel="ú"/>
    <Key android:keyLabel="á"/>
    <Key android:keyLabel="é"/>
    <Key android:keyLabel="í" android:keyEdgeFlags="right"/>
</Row> 
```

另请参阅[*如何制作 Android 自定义键盘*](https://stackoverflow.com/questions/9577304/how-to-make-an-android-custom-keyboard/44939816#44939816)。

# jquery - 我在一个表格中并排运行 2 个 jquery 循环幻灯片放映，似乎无法让它们对齐中心

> ID：15417029
> 
> 赞同：0
> 
> 时间：2013-03-14T18:11:51.907
> 
> 标签：jquery, css, slideshow, show, slide

我设置了 1 的边框，这可能会帮助我找出哪里出错了。我计划在解决居中问题后删除边界。幻灯片放映功能完美，我似乎无法让它们居中。

我搜索了 google 和 SO，并尝试了其他帖子中建议的几个选项，但没有得到任何结果。你能提供的任何建议都会很棒！

**查询：**

```
<style type="text/css">
.slideshow { height: 432px; width: 632px; }
.slideshow img { margin:auto; padding: 15px; border: 1px solid #ccc; background-color:#eee;
display:block; margin:auto; }

</style>

<!-- include jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<!-- include Cycle plugin -->
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    });
});
</script> 
```

**HTML**

```
<table border="5" table padding="25" align="center">
<tr align="center">
            <td align="middle">move<div class="slideshow">

                </div></td>

            </div></td>
        </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:16:33.593

根据我所做的，具有边距的居中元素通常仅在您定义宽度时才有效。此外，您只需将水平边距定义为 auto 即可使其居中。

您将幻灯片中的图像元素居中。如果要将幻灯片居中，则必须在此处应用边距规则。

# web-applications - 如何配置插件以出现在 joomla 2.5 前端

> ID：15417033
> 
> 赞同：-2
> 
> 时间：2013-03-14T18:12:00.527
> 
> 标签：web-applications, plugins, joomla, joomla2.5, joomla-extensions

我已经从这个网站下载了一个社交媒体插件[http://itprism.com/free-joomla-extensions/social-marketing-seo/floating-multi-share](http://itprism.com/free-joomla-extensions/social-marketing-seo/floating-multi-share)

我已经启用它并且没有从前端看到它，通常我如何配置插件以显示在前端

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:02:42.133

首先，[确保您了解插件是什么。](http://docs.joomla.org/Extension_types_%28general_definitions%29)

一些扩展附带了模块 - 插件 - 组件的组合。

其次，视觉上你可以看到一个模块或一个组件。要查看一个模块，您需要启用它并决定它将出现在哪个模板位置。

如果它是一个组件，您很可能会从菜单链接它，创建一个新的菜单项。

希望这可以帮助。

# javascript - 如何通过javascript访问网络摄像头

> ID：15417036
> 
> 赞同：17
> 
> 时间：2013-03-14T18:12:11.030
> 
> 标签：javascript, html, webcam

我需要通过 JavaScript 打开网络摄像头我知道可以访问 html5`<video>`但需要使用纯 JavaScript 访问网络摄像头

有人可以帮助我或给我一些想法吗？

我只需要使用 JavaScript 访问网络摄像头，对不起我的英语，我正在使用谷歌翻译。

我不能使用标签“<视频>”

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-14T18:17:01.230

正如我在评论中所说，我对你的措辞感到困惑。您说，您知道“HTML5”可以访问网络摄像头，但您需要纯Javascript。

好吧，如果你不知道，*HTML5*引入了*WebRTC*，它是*Real-Time Communications*的缩写。~~其中，还引入了一个名为navigator.getUserMedia()~~ 的新东西`navigator.mediaDevices.getUserMedia(constraints)`。也就是说，一个 ECMAscript 对象，它允许您访问用户机器*WebCam*和*Microphone*设备。

如您所见，整个节目都嵌入在*HTML5*推出/规范中，因此我们无法在此处真正将 Javascript 与 HTML5 分开。

进一步阅读：

*   [https://developer.mozilla.org/en-US/docs/WebRTC](https://developer.mozilla.org/en-US/docs/WebRTC)
*   ~~[https://developer.mozilla.org/en-US/docs/WebRTC/navigator.getUserMedia](https://developer.mozilla.org/en-US/docs/WebRTC/navigator.getUserMedia)~~
*   [https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-18T16:04:51.960

这是一个仅在 HTML5 回退情况下使用 flash 的 js 库：

[https://github.com/jhuckaby/webcamjs](https://github.com/jhuckaby/webcamjs)

从代码示例：

```
<script src="webcam.js"></script>

<div id="my_camera" style="width:320px; height:240px;"></div>
<div id="my_result"></div>

<script language="JavaScript">
    Webcam.attach( '#my_camera' );

    function take_snapshot() {
        Webcam.snap( function(data_uri) {
            document.getElementById('my_result').innerHTML = '<img src="'+data_uri+'"/>';
        } );
    }
</script>

<a href="javascript:void(take_snapshot())">Take Snapshot</a> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T18:16:42.897

[HTML5rocks](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)有这个很棒的教程。

基本上，[getUserMedia](https://developer.mozilla.org/en-US/docs/WebRTC/navigator.getUserMedia)让浏览器请求权限，然后让您使用相机。

您必须意识到它仍然受到严重支持，并且 API 可能会再次更改，特别是如果您想通过 Internet 发送这些流。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T18:17:41.207

现在有一些 JavaScript 库可以做到这一点。

*   ~~脚本凸轮：[http](http://www.scriptcam.com/)~~ ://www.scriptcam.com/ （已死）
*   jQuery 网络摄像头：[http ://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/)

# php - php 和 mysql - 插入有效但更新无效

> ID：15417039
> 
> 赞同：0
> 
> 时间：2013-03-14T18:12:22.570
> 
> 标签：php, mysql

我的代码有什么问题，因为插入工作正常，但更新不起作用。我已经从 phpmyadmin 复制了 updaet 的查询并将静态值更改为变量

```
<?php
if (isset($_POST['submitContactInfo'])) {
    $socityId = $_SESSION['socityid'];
    $city = $_POST['city'];
    $pin = $_POST['pin'];
    $state = $_POST['state'];
    $telephone = $_POST['telephone'];
    $mobile = $_POST['mobile'];
    $email = $_POST['email'];
    $address = $_POST['address'];

    $sql = "INSERT INTO `_abc1`.`profile` (SOCIETY_ID,ADDR,CITY,PIN,STATE,TEL,MOBILE,EMAIL) VALUES ('$socityId','$address','$city','$pin','$state','$telephone','$mobile','$email');";

    $sql = "UPDATE `_abc1`.`profile` SET `ADDR` = '$address', `CITY` = '$city', `PIN` = '$pin', `STATE` = '$state', `TEL` = '$telephone', `MOBILE` = '$mobile', `EMAIL` = '$email' WHERE `society_profile`.`SOCITY_ID` = '$socityId'; ";

    $res = mysql_query($sql);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:17:52.273

您的更新中有错字。你有 SOCITY_ID 在第一个查询中它是 SOCIETY_ID

尝试

```
$sql = "UPDATE `_abc1`.`profile` SET `ADDR` = '$address', `CITY` = '$city', `PIN` = '$pin', `STATE` = '$state', `TEL` = '$telephone', `MOBILE` = '$mobile', `EMAIL` = '$email' WHERE `SOCIETY_ID` = '$socityId'; "; 
```

此外，如前所述，您应该使用 mysqli_query 而不是这些旧的不推荐使用的函数。

[http://www.php.net/manual/en/mysqli.query.php](http://www.php.net/manual/en/mysqli.query.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:16:01.663

*   首先，您应该考虑使用 mysqli 或 PDO 而不是标准的 mysql 类。
*   其次，您还没有加入一个表，那么您希望它如何匹配您尝试查询的两个表？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:17:57.280

尝试这个..

```
$sql = "UPDATE '_abc1'.'profile' SET 'ADDR' = '".$address."', 'CITY' = '".$city."', 'PIN' = '".$pin."', 'STATE' = '".$state."', 'TEL' = '".$telephone."', 'MOBILE' = '".$mobile."', 'EMAIL' = '".$email."' WHERE 'society_profile'.'SOCITY_ID' = '".$socityId."'; "; 
```

# ios - 如果我想每 x 秒 y 次执行一个方法，我应该使用 NSTimer 吗？

> ID：15417052
> 
> 赞同：3
> 
> 时间：2013-03-14T18:13:17.827
> 
> 标签：ios, objective-c, ios5, ios6, nstimer

我想让不同的东西每 2 秒出现一次，比如 10 次。我将如何在 Objective-C 中实现这一目标？

我正在考虑使用 NSTimer 并在这么多秒后使其无效，例如在上面的示例中，在我启动计时器后 2 * 10 秒。或者有没有办法测量蜱虫？

或者我正在考虑使用 for 循环并使用 performSelector:withDelay: 方法。

哪个更可取？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T18:25:01.890

使用[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)并将时间设置`interval`为`2 seconds`和。`repeats``YES`

计算它触发的次数。`Invalidate` 当它达到10时。就是这样

**代码：**

```
[NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(trigger:) userInfo:yourObject repeats:YES];

- (void)trigger:(NSTimer *)sender{

    id yourObject = sender.userInfo;

    static int count = 1;

    @try {

        NSLog(@"triggred %d time",count);

        if (count == 10){

            [sender invalidate];
            NSLog(@"invalidated");
        }

    }
    @catch (NSException *exception)
    {
        NSLog(@"%s\n exception: Name- %@ Reason->%@", __PRETTY_FUNCTION__,[exception name],[exception reason]);
    }
    @finally {

        count ++;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T19:21:10.713

我用了你的第二个选项，不需要计时器

```
for (int a=0; a<10; a++) {
    [self performSelector:@selector(print) withObject:nil afterDelay:2.0*a];
}

-(void)print
{
    NSLog(@"sth");
} 
```

您可以使间隔和重复计数灵活。

# codeigniter - 代码点火器将具有多个值的行更新为列

> ID：15417056
> 
> 赞同：0
> 
> 时间：2013-03-14T18:13:28.850
> 
> 标签：codeigniter

我正在为我的模型获取一个数组。假设数组有一个值 1 和 2。

现在我需要将其更新为单列 1,2 以便该列看起来像这样

柱子

1,2

```
foreach($x as $y){
 $this->db->where('column',4);
 $this->db->set('id',$data);
 $this->db->update('table');
 } 
```

但这只是更新 2，它省略了 1。我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:38:39.260

利用`implode`

例如：

```
 $data = [1,2]
  $comma_data = implode(",", $data) 
```

然后更新列`$comma_data`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:44:06.560

我有错误的数据类型，我想通了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:42:19.170

如果您想在一列中保存多个值，请将它们放在一个数组中并序列化它们。比将其保存在列中。使列类型文本。

```
$array['name']      =   'test';
$array['otherinfo'] =   'otherinfo';

$data   =   serialize($array);

foreach($x as $y)
{
    $this->db->where('column',4);
    $this->db->set('id',$data);
    $this->db->update('table');
} 
```

当您选择时，您可以使用 unserialize() 反序列化数组；

# javascript - JQuery 移动延迟加载问题

> ID：15417057
> 
> 赞同：1
> 
> 时间：2013-03-14T18:13:33.333
> 
> 标签：javascript, jquery-mobile, lazy-loading

所以我在一个 jQuery 页面上的 ListView 上进行延迟加载。当您单击 ListItem 时，它会将您带到详细信息页面。问题是，由于我已将`scrollstop`事件绑定到窗口，因此延迟加载仍会尝试在详细信息页面上触发。

```
$("#index").on("pageshow", function () {
  //get initial list view data

  var inital = $('#filters').serialize(); //gets 'filter' params for data-access
  RetrieveMeetings(inital);  //Populate initial set

  //lazy load
  //Window Event From: http://stackoverflow.com/questions/9983835/detect-if-user-has-scrolled-to-the-bottom-of-a-div
  $(window).bind('scrollstop', function () { //this also fires on details page!!!
    var screenBottom = $(this).scrollTop() + parseInt($(window).height());
    var $div = $('#meetings-list');
    var divBottom = $div.offset().top + parseInt($div.height());

    if (screenBottom > divBottom) {
       var values = $('#filters').serialize();
       LoadMoreMeetings(values);
    }
  });

  //new dataset from filter forum
  $("#submit").click(function (event) {

    /* stop form from submitting normally */
    event.preventDefault();
    var values = $('#filters').serialize();
    ResetMeetingList();
    RetrieveMeetings();

  });

}); 
```

我可以通过`page`从事件的 DOM 中删除 来解决这个问题，`pagehide`但是每当用户返回 ListView 时，我就会丢失过滤器论坛的页面状态（这也会增加页面加载时间）。

```
 //remove pages from DOM on hide
    $(document).on("pagehide", function (e) {
        $(e.target).remove();
    }); 
```

有没有办法将`scrollstop`事件附加到`page`而不是`window`？

这种方法的另一个问题是，如果屏幕足够大，可以在没有滚动条的情况下加载页面，那么延迟加载显然不会触发！也许这个问题有更好的整体解决方案？

# c# - 使用 .Net HttpListener 时更改 HTTP.sys 内核队列限制？

> ID：15417062
> 
> 赞同：4
> 
> 时间：2013-03-14T18:13:44.940
> 
> 标签：c#, httplistener, http.sys

我有一个使用`HttpListener`.Net 4.0 中的类来服务 http 请求的应用程序。

在负载下，我注意到我得到`503 - QueueFull`- 日志中报告的错误。搜索此错误表明它发生在`http.sys`超过将排队的最大请求数时。

默认队列长度为 1000。如果您正在使用`IIS`这似乎可以通过应用程序池的高级设置中的“队列长度”参数进行调整。

如果您**不**使用 IIS，是否有任何方法可以调整此值？还是这个参数的控制隐藏在HttpListener类中，不暴露给开发者？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-08T10:38:36.660

似乎**HttpListener**不允许直接更改**HttpServerQueueLengthProperty**属性。默认情况下，[此属性设置为 1000](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364458(v=vs.85).aspx)。

但是你可以尝试在**HttpListener**启动后手动设置。这是 hack，因为它使用**HttpListener的内部属性****RequestQueueHandle**，所以***使用它需要你的风险***。

 ***黑客：

```
using System;
using System.Linq;
using System.Net;
using System.Reflection;
using System.Runtime.InteropServices;

namespace Network.Utils
{
    public static class HttpApi
    {
        public unsafe static void SetRequestQueueLength(HttpListener listener, long len)
        {
            var listenerType = typeof (HttpListener);
            var requestQueueHandleProperty = listenerType.GetProperties(BindingFlags.NonPublic | BindingFlags.Instance).First(p => p.Name == "RequestQueueHandle");

            var requestQueueHandle = (CriticalHandle)requestQueueHandleProperty.GetValue(listener);
            var result = HttpSetRequestQueueProperty(requestQueueHandle, HTTP_SERVER_PROPERTY.HttpServerQueueLengthProperty, new IntPtr((void*)&len), (uint)Marshal.SizeOf(len), 0, IntPtr.Zero);

            if (result != 0)
            {
                throw new HttpListenerException((int) result);
            }
        }

        internal enum HTTP_SERVER_PROPERTY
        {
            HttpServerAuthenticationProperty,
            HttpServerLoggingProperty,
            HttpServerQosProperty,
            HttpServerTimeoutsProperty,
            HttpServerQueueLengthProperty,
            HttpServerStateProperty,
            HttpServer503VerbosityProperty,
            HttpServerBindingProperty,
            HttpServerExtendedAuthenticationProperty,
            HttpServerListenEndpointProperty,
            HttpServerChannelBindProperty,
            HttpServerProtectionLevelProperty,
        }

        [DllImport("httpapi.dll", CallingConvention = CallingConvention.StdCall, SetLastError = true)]
        internal static extern uint HttpSetRequestQueueProperty(
            CriticalHandle requestQueueHandle,
            HTTP_SERVER_PROPERTY serverProperty,
            IntPtr pPropertyInfo,
            uint propertyInfoLength,
            uint reserved,
            IntPtr pReserved);         
    }
} 
```

使用示例：

```
using (var listener = new HttpListener())
{
    listener.Prefixes.Add("http://*:8080/your/service/");
    listener.Start();

    Network.Utils.HttpApi.SetRequestQueueLength(listener, 5000);

    // ...
} 
```

应用程序启动后，您可以通过运行以下命令检查队列长度：

```
netsh http show servicestate 
```

检查您的流程的“最大请求数”属性。现在它必须等于 5000。***

# javascript - 具有边界半径的角落中的事件

> ID：15417063
> 
> 赞同：0
> 
> 时间：2013-03-14T18:13:45.427
> 
> 标签：javascript, hover, css

如何防止事件在`border-radius`（白角）设置的边界之外的角落触发？

[JSFiddle 示例](http://jsfiddle.net/daykkin/C2dwX/)

```
<div class="circle">
   <a href="#"><span></span></a>
</div>

.circle {
    border-radius:100px;
}
span {
    display:block;
    background:#000;
    width:200px;
    height:400px;
    border-radius:100px;
}

$(".circle").click(function() {
   alert("GOD! WHY I'AM WORK ON WHITE CORNERS!?! KILL ME PLEASE!");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:34:43.783

使用 html 标签 map 和 erea 创建一个圆圈 ;-)

例子来了..

# apache-poi - 带有 Apache POI 的可运行 jar

> ID：15417077
> 
> 赞同：0
> 
> 时间：2013-03-14T18:14:26.303
> 
> 标签：apache-poi, java

我正在尝试将我的程序导出为可运行的 jar，打包必要的库（Apache POI）。.jar 已创建，但它不起作用。使用这些库进行部署是否有问题？因为程序本身在 Eclipse 中运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:47:56.020

有以下策略。

1.  创建你的罐子。把它放到选择的目录。将应用程序的所有依赖项放在那里。创建脚本（shell 脚本、批处理文件等，具体取决于您的平台），其中`java`命令行要么是硬编码的，要么是生成的。该行必须包含类路径，例如 `java -cp myapp.jar;poi.jar com.company.MyMain`
2.  创建确实可运行的 jar，即可以使用类似命令执行的 jar `java -jar myapp.jar`。如果您的应用程序具有依赖项，则此 jar 必须具有`MANIFEEST.MF`使用属性定义类路径的文件`Class-Path`
3.  将所有类和所有依赖项打包到一个大 jar 文件中。

显然，所有这些操作都应该通过自制脚本或可用的构建工具之一实现自动化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T21:15:44.940

在这种情况下要问自己几个问题：

*   程序在哪里失败？控制台中是否有任何错误？您是否从命令行 ( `java -jar myJAR.jar`) 运行以便可以看到控制台输出？
*   好的，所以你得到了读取文件的 NullPointerException。读取的文件是在 JAR 中，还是在哪里？程序如何知道读取的文件在哪里？
*   JAR 的打包方式真的有问题，还是你的代码在文件中定位和读取的方式有问题？也许您的代码假定了从 JAR 运行时无法解析的相对位置。

# java - JApplet 从其他网页获取数据

> ID：15417087
> 
> 赞同：1
> 
> 时间：2013-03-14T18:15:02.273
> 
> 标签：java, security, url, japplet, accesscontrolexception

我做了一个货币转换器，可以从雅虎获得最新的汇率。只要我从小程序查看器运行它就可以正常工作，我可以转换任何货币。当我打开 html 文件时，小程序可以工作，但我无法转换任何货币，也无法检索任何汇率。

```
 Url = "http://finance.yahoo.com/q?s=EURUSD%3DX&ql=1";

        URLPage = new URL(Cur);
        Input = new BufferedReader(new InputStreamReader(URLPage.openStream()));
        while ((inputLine = Input.readLine()) != null) {
          results = results + inputLine;
        }

        Input.close();
        Pattern patternSeeked = Pattern.compile("x\">([0-9.]+)</span>");
        Matcher findMatch = patternSeeked.matcher(results);
        findMatch.find(); 
```

我得到的异常是 java.security.AccessCONtrolException: access denied("java.net.SocketPermission" "finance.yahoo.com:80" "connect,resolve");

# php - 一个提交按钮将表单数据发送到一个 PHP 目的地或另一个

> ID：15417093
> 
> 赞同：0
> 
> 时间：2013-03-14T18:15:24.210
> 
> 标签：php, html

我是 HTML 和 PHP 的新手，想知道是否有人可以帮助我解决问题...我正在尝试编写一个表单，该表单可以从一个菜单或另一个菜单中提交选择，并根据选择的方式发送数据到两个不同的 PHP 页面之一。

```
 <form id="form1" method="post" action="">
                <label for="SubjectID">Text Books by Subject</label>
            </p>
            <p>
                  <select "name="SubjectID" id="SubjectID">
                    <?php do {  ?>
                    <option value="<?php echo $row_rsSubject['SubjectID']?>"><?php echo $row_rsSubject['SubjectName']?></option>
                    <?php } while ($row_rsSubject = mysql_fetch_assoc($rsSubject));
                         $rows = mysql_num_rows($rsSubject);
                        if($rows > 0) {
                            mysql_data_seek($rsSubject, 0);
                            $row_rsSubject = mysql_fetch_assoc($rsSubject);
                        } ?>
                  </select>
            </p>
            <p>
                &mdash;&mdash;&mdash; OR &mdash;&mdash;&mdash;
            </p>
            <p>
                  <select name="CourseID" id="CourseID">
                    <?php do {  ?>
                    <option value="<?php echo $row_rsCourse['CourseID']?>"><?php echo $row_rsCourse['CourseID']?></option>
                    <?php } while ($row_rsCourse = mysql_fetch_assoc($rsCourse));
                        $rows = mysql_num_rows($rsCourse);
                        if($rows > 0) {
                            mysql_data_seek($rsCourse, 0);
                            $row_rsCourse = mysql_fetch_assoc($rsCourse);
                        } ?>
                  </select>
            </p>
            <p>
                  <label for="CourseID">Text Books by Course</label>
             </form> 
```

因此，操作应该是（取决于用户从哪个菜单中选择）表单提交给 subject.php 或 course.php，我不知道如何使用单个提交按钮来执行此操作。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:24:26.080

首先设置onchange事件来选择：

```
<select name="CourseID" id="CourseID" onchange='myFunc(this)'> 
```

然后：

```
<script>
    function myFunc(element){
      // set the form action depends on option chosen
      // element.setAttribute('action', 'yourPageLink' );
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:28:15.390

为什么不在表单中有一个单选按钮，其发布的表单值由中央 PHP 表单处理程序处理？这样，根据单选按钮上输入的内容，您可以根据需要处理请求。

这可能不是您正在寻找的答案，但我不清楚您是否希望用户能够更改目的地或什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:18:46.233

`action`当用户更改他的选择时，您可以使用 javascript 更新属性，将他引导到相关页面。

否则，为什么不提交单个函数并根据用户选择调用相关函数？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T18:19:26.920

老实说，我会使用 jquery 的 $.post 来做到这一点。据我所知，你不能用直接的 html 真正做到这一点，并且 php 是在页面加载之前执行的，所以这没有帮助。使用 JQuery，您可以为按钮设置一个动作来调用一个函数。然后您的函数可以检查 select 的值并将正确的 url 传递给 $.post 函数。

您可以在此处阅读有关该特定 jquery 函数的信息：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

如果您不熟悉 JQuery，如果您精通 JavaScript，那么只需阅读一点内容就可以轻松使用它。

# lambda - 如何将 Lambda 表达式分解为组成表达式的对象？

> ID：15417098
> 
> 赞同：0
> 
> 时间：2013-03-14T18:15:45.857
> 
> 标签：lambda, expression, modelmetadata

给定一个表达式，例如：

**m => m.Employee.Address.Line1**

我需要创建一个函数，它可以遍历表达式，提取所涉及的对象，或者至少是链中的最终对象（即上面的地址对象）。所以对于上面的例子，函数会发现：

*   “这里”是 m 参数的实例（我可以从中获取类型）
*   “这里”是 Employee 成员的实例
*   （即重复链条）

目的是能够为“路径”生成配置信息。

如果我至少可以得到最终的“包含”对象，那么我可以产生类型信息，如果它支持特定的属性或方法，则可以调用该对象，以向对象请求额外的配置信息（以及要获取的对象类型）容器类型的配置信息）。

即使是稍微复杂一点的语句也会使这变得更加困难，例如：

**m.Employee.Address[i].Line1**

--- 只是为了提供一个我在 MVC 中为 BASIC 场景工作的示例。下面的 GetContainingModel() 在加载的 DataAnnotationsMetadataProvider 中的 CreateMetadata() 中被调用。传递给 CreateMetadata() 的模型是 Lambda 语句根的模型，并不是我们真正想要的。所以逻辑试图找到最终的包含对象。我宁愿不要像我正在做的那样使用反射，或者更糟的是，接触到一个私人成员（不好），但是......我愿意接受建议。

```
 [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    private object GetContainingModel()
    {
        if (_metadata == null)
        {
            throw new SystemException("Unexpected NULL Metadata");
        }

        var model = _metadata.Model;

        try
        {
            if (_modelAccessor != null)
            {
                var data = _modelAccessor.Target;
                if (data != null)
                {
                    if (GetModelFromContainer(data, ref model))
                    {
                        GetModelFromExpression(data, ref model);
                    }
                }
            }
        }
        catch (Exception ex)
        {
            var msg = ex.Message;
        }

        return model;
    }

    [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    private bool GetModelFromContainer(object data, ref object model)
    {
        var isSet = false;

        var container = data.GetType().GetField("container");
        if (container != null)
        {
            model = container.GetValue(data);
            isSet = true;
        }
        else
        {
            var vdi = data.GetType().GetField("vdi");
            if (vdi != null)
            {
                var viewDataInfo = vdi.GetValue(data) as ViewDataInfo;
                if (viewDataInfo != null)
                {
                    model = viewDataInfo.Container;
                    isSet = true;
                }
            }
        }

        return isSet && model != null;
    }

    [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    private bool GetModelFromExpression(object data, ref object model)
    {
        if (model == null)
            return false;

        var expressionField = data.GetType().GetField("expression");
        if (expressionField == null)
            return false;

        return GetModelFromExpression(expressionField.GetValue(data) as LambdaExpression, ref model);
    }

    [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    private bool GetModelFromExpression(LambdaExpression sourceExpression, ref object model)
    {
        if (sourceExpression == null)
            return false;

        var expressionBody = sourceExpression.Body as MemberExpression;

        if (expressionBody == null || expressionBody.NodeType != ExpressionType.MemberAccess || expressionBody.Member == null)
            return false;

        var expression = expressionBody.Expression as MemberExpression;
        if (expression == null)
        {
            return false;
        }

        switch (expression.Member.MemberType)
        {
            case MemberTypes.Field:
                if (expression.NodeType == ExpressionType.MemberAccess)
                {
                    var fieldInfo = (FieldInfo)expression.Member;
                    if (fieldInfo != null)
                    {
                        model = fieldInfo.GetValue(model);
                    }
                }
                break;
            case MemberTypes.Property:
                var propertyInfo = (PropertyInfo)expression.Member;
                if (propertyInfo != null)
                {
                    model = propertyInfo.GetValue(model, null);
                }
                break;
        }

        return model != null;
    } 
```

# git - gitolite/git clone 不会覆盖以前的版本

> ID：15417099
> 
> 赞同：1
> 
> 时间：2013-03-14T18:15:47.623
> 
> 标签：git, unix, version-control, gitolite

我[与 git/gitolite 的斗争仍在继续](https://stackoverflow.com/questions/15407350/deploying-a-website-webapp-via-git-gitolite-permissions-error)。我正在尝试通过使用`post-receive`钩子来设置部署网站/webapp 的方法。

基本上我有一个远程仓库，然后将其克隆到一个`DocumentRoot`供 apache 服务的仓库中。我的`post-receive`钩子看起来像这样：

```
document_root=/path/to/document/root
echo "deploying to web directory"
sudo GIT_WORK_TREE=$document_root git checkout -f
sudo chown -R apache:apache $document_root 
```

一切都很好 - 对于第一次部署，但是 git 似乎忽略了此后的任何更改。如果我提交了`add`文件，那么`git push`它们会转到我的远程存储库，但不会克隆到其中`DocumentRoot`，也不会给出错误。

谁能想到可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:42:59.927

明确指定分支应该会更好：

```
sudo GIT_WORK_TREE=$document_root git checkout -f master 
```

（当然，假设您确实将新提交推送到`master`分支）

# c# - 制作一个捕捉选定单选按钮的事件 - 使用 C# Windows 窗体

> ID：15417104
> 
> 赞同：0
> 
> 时间：2013-03-14T18:16:02.937
> 
> 标签：c#, .net, windows, radio-button

我列出了一系列问题，每个数字可以是两个可能的答案，其中只有一个是您可以选择的，因此我分组在一个 GroupBox 和两个 RadioButton 中放置每个 GroupBox。问题是，如果他们选择了我想要的选项，您必须为此回复添加额外的评论，只有当您选择该特定回复时。但是，有 25 个问题并使每个事件 RadioButton 为每个批次代码增加而不是优化，一旦做出更改，每个 GroupBox 中的响应就会出现某种形式，因此请使用我在那里的 GroupBox 并验证那是什么改变，即：答案1或答案2。GroupBox的名称可以更实用。你可以吗？创建一个等待 camiod 和每个 RadioButton 的事件，它需要响应数据。谢谢！-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:29:58.947

最好的方法是使用 ajax 并使用一个 div，可以将评论与选定的单选按钮一起插入然后存储。

或者，您可以在银行端使用一种方法来捕获该信息。不过，您仍然必须为每个单独的单选按钮调用它。

如果这不是您想要做的，请澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:33:04.027

您可以使用一个处理程序来处理来自多个单选按钮的相同事件，然后在处理程序内部查看`sender`以确定选择了哪个框。

在这种情况下，我将使用`tag`控件的属性来存储一些关于我希望数据返回到何处的信息。在您的组框问题中，我会将标签存储在组框上：

```
this.radioButton1.Click += this.radioButtonx_Click;
this.radioButton2.Click += this.radioButtonx_Click;
this.radioButton3.Click += this.radioButtonx_Click;
this.radioButton4.Click += this.radioButtonx_Click;

private void radioButtonx_Click(object sender, EventArgs e)
{
    (((sender as RadioButton).Parent as GroupBox).Tag as MyWidget).MyProperty 
        = (sender as RadioButton).Text
} 
```

# android - 强制 Android 模拟器将更改存储到 /system

> ID：15417105
> 
> 赞同：26
> 
> 时间：2013-03-14T18:16:05.257
> 
> 标签：android, emulation

我知道在使用 Android 模拟器时这是一个经常出现的问题，但是有没有办法强制模拟器接受对 的持久更改`/system`？

模拟器基于 QEMU，因此理论上应该可以强制`system`图像以相同的方式`userdata`（例如）运行，但我不熟悉 QEMU 如何处理事情。任何指针？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T07:40:47.007

**更新：**该`-nand`选项显然已从 QEMU 的最新版本中删除，因此以下可能不再起作用。

**更新：**查看当前处理方式的公认答案。

* * *

Yury 的回答是常见的，但是如果你希望能够编写脚本（这就是我最终想要的），你需要能够在`/tmp`目录中找到模拟器图像。

我发现你可以覆盖 QEMU 的行为。这有点骇人听闻，但它有效，所以我最终这样做了：

1.  从平台目录复制`system.img`到您的 AVD 目录。
2.  将您需要的空间量转换为十六进制。例如，如果您需要 500M，则为`0x1f400000`.
3.  以读写模式运行模拟器：

    ```
    emulator -avd Galaxy_Nexus -qemu -nand system,size=0x1f400000,file=/home/fx/.android/avd/Galaxy_Nexus/system.img 
    ```

    *（如果您将模拟器置于详细模式，您会注意到默认情况下它会使用`initfile=`而不是 just `file=`）*

4.  进行更改，它们会立即保存到本地`system.img`

5.  现在您可以使用 启动模拟器`emulator -avd Galaxy_Nexus`，它会使用您的更改

***更新：**如果编写脚本，QEMU 不会立即将更改同步到映像，因此如果您在更改某些内容后立即重新启动，您很可能会丢失数据。我正在寻找解决这个问题的方法...*

***下次更新：**用于`adb -e emu kill`停止模拟器。`reboot`只会做坏事。*

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-04-12T17:22:16.760

目前（使用 Build Tools v26，如果 Google 没有像他们那样经常更改内容）如果您`-writable-system`在从命令行启动模拟器时使用该指令，它将允许`/system`通过重新启动对分区进行持久性。也就是说，您将能够写入`/system`分区，并且如果您重新启动，更改仍将保留。

`emulator -avd <AVD_NAME> -writable-system`

这也将保留您对`qcow2`图像文件的更改，通常在`.android/avd/<AVD_NAME>.avd/system.img.qcow2`

您甚至可以复制此`system.img.qcow2`文件，使用该`-wipe-data`指令擦除 AVD 中的数据，将此文件放回目录中，重新启动，您最初所做的系统更改仍将保留。（警告：至少现在，因为谷歌一直在改变）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-14T20:06:45.450

这实际上是一个非常好的问题。我有同样的麻烦。这是我的发现。实际上，我使用的是 Ubuntu，我将描述 Ubuntu 的步骤。如果您使用 Windows，您应该只更改路径。

1.  例如，创建新的 AVD`example.avd`
2.  将 system.img 从复制`android-sdk-linux/platforms/android-10/images` 到`~/.android/avd/example.avd`
3.  使 system.img 可写和可读（在属性中或仅使用终端）
4.  使用命令运行您的 AVD`emulator -avd example`
5.  使用 adb shell 将系统重新挂载为 rw `mount -o rw,remount -t yaffs2 /dev/block/mtd0 /system`（以发现分区使用命令`cat /proc/mtd`）
6.  进行更改...
7.  现在在模拟器运行过程中找到 tmp 模拟器， `/tmp/android-<your_computer_name>`名称很奇怪，例如： `emulator-PQ7LgE`并将其复制到`~/.android/avd/example.avd`
8.  删除`system.img`并将复制的 tmp 模拟器重命名为`system.img`
9.  关闭模拟器
10.  删除`cache.img`，`userdata.img`并`userdata-qemu.img`从 `~/.android/avd/example.avd`
11.  再次运行你的模拟器

祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-02T14:30:04.943

解决方案#2 很棒。

如果您使用 MS Win 作为主机 AVD 目录位于以下位置，这里有一些提示，但“短”路径名应用作 file= path 参数。由于某种原因，引用的路径变体不起作用。

Win XP: C:\Documents and Settings\ (username) \ .android\avd\ ... 短 C:\DOCUME~1\ (username) \ANDROI~1\avd\ ...

Win 7 C:\Users\（用户名）\.android\avd\ ...

您可以按照以下示例创建自己的 bat 文件，例如“startrw.bat”：

```
@echo off
C:\<ADTFOLDER>\sdk\tools\emulator -avd <AVDNAME> -qemu -nand system,size=0x1f400000,file=C:\DOCUME~1\<USERNAME>\ANDROI~1\avd\<AVDNAME>.AVD\system.img
cd C:\<ADTFOLDER>\sdk\platform-tools
echo .
echo Wait ... 
echo .
echo When emulator is FULLY loaded press any key to connect adb shell to it
echo To make /system writeable type in adb shell:
echo .
echo -----------------------------
echo mount -o rw,remount /system 
echo -----------------------------
echo .
echo You can use the Eclipse ADT DDMS File Browser to browse or push-pull files now.
echo .
echo Closing this window closes the emulator ! 
echo .
echo Wait emulator to load Android. When done
pause
C:\<ADTFOLDER>\sdk\platform-tools\adb shell 
```

这样您就可以一键加载。完成修改后，只需关闭当前命令窗口即可终止模拟器。

大多数东西加载需要很长时间，例如模拟器、ADT 编辑器、挂钩 DDMS 文件浏览器（您需要单击模拟器行左侧才能看到右侧窗口中的文件树）等等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-26T22:35:10.427

我很难找到 FX 发布的 system.img 文件和 AVD 目录。在 Mac 上，您可以在这里找到它们：

*   系统.img：`~/Library/Android/sdk/system-images/android-19/default/`
*   AVD 目录：`~/.android/avd/Nexus.avd/`

我没有足够的声誉将其添加为评论，所以我不得不像这样发布它。对不起。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-24T21:52:43.427

FX 的答案对我来说不适用于 Windows 上的 Android API 19 和 21。使用给定的参数

```
emulator -avd <AVD> -qemu -nand system,size=0x<SIZE IN HEX>,file=<PATH/TO/system.img> 
```

系统挂载镜像失败。通过查看内核输出，我发现它使用了可疑的页面大小（2048）和两个非零参数值：额外大小和“擦除”。这些参数在任何地方都没有记录，但是您可以在[qemu 的源代码](https://android.googlesource.com/platform/external/qemu/+/master/hw/android/goldfish/nand.c)中看到它们。最终为我工作的是

```
emulator -avd <AVD> -qemu -nand system,size=0x<SIZE IN HEX>,file=<PATH/TO/system.img>,pagesize=512,extrasize=0 
```

指定这些参数后，“erase”也设置为 0。

我还惊讶地发现，使用这些参数系统无法启动到图形环境，但 adb 可以工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-01T19:04:02.157

最好的方法是使用以下命令：

```
<path-to-emulator-executable> -avd <AVD> -partition-size 512 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-19T13:22:20.763

在终端中使用此命令

```
cd /Users/NAME_USER/Library/Android/sdk/emulator # Move to emulator folder
sudo ./emulator -writable-system -avd NAME_AVD -partition-size 280 # Run avd by writable system 
sudo adb root # Change to root
sudo adb remount # remount again
sudo adb shell 
su
mount -o remount,rw -t yaffs2 /dev/block/mtdblock3 /system 
```

更改 NAME_USER 和 NAME_AVD

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-12T10:05:29.330

正如这里所说的[https://justus.berlin/2015/02/make-persistent-changes-to-system-in-android-emulator/](https://justus.berlin/2015/02/make-persistent-changes-to-system-in-android-emulator/) 将 system.img 复制到 avd 文件夹中将起作用。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-04-26T20:50:44.747

> 新年新解决方案。

只需将 system.img 复制到您的 avd 文件夹并将 system.img 重命名为 system-qemu.img

对我来说，复制 并重**命名为 system-qemu.img**`C:\Android\sdk\system-images\android-22\android-tv\armeabi-v7a\system.img` 就可以了。`C:\Users\Neil Agarwal\.android\avd\Android_TV_1080p_API_22.avd\`

 **请在此之后重新启动您的 avd。**

# jquery - jQuery硬币滑块插件不起作用

> ID：15417107
> 
> 赞同：0
> 
> 时间：2013-03-14T18:16:19.480
> 
> 标签：jquery

我正在尝试在我的页面上使用 jQuery Coin Slider 插件。我已经下载了最新的 Jquery 并将其附加到我的标题中，以及所有必要的 Coin-slider 文件。当最新版本的 jQuery 不起作用时，我下载了说明中使用的旧版本。但是，该页面只是将图像堆叠起来，就好像我只是插入了标签一样。

所有文件的路径都是正确的。我尝试按照他在“如何安装”页面上的说明进行操作，但没有成功。

我相信我以正确的顺序附加 .js，所以我不确定问题是什么。

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Title</title>
<script type="text/javascript" src="js/jquery-1.4.2.js"></script>
<script type="text/javascript" src="js/coin-slider.min.js"></script>
<link rel="stylesheet" href="coin-slider-styles.css" type="text/css" />
<link href="styles/screen.css" rel="stylesheet" type="text/css">
</head>

<body>
<header id="mainHeading">
<div id="headingContent">
<h1>Header</h1>

</div> <!--Closes headingContent div-->
</header>

<article id="page-content">

<section>
<hgroup>
<h1></h1>
<h2></h2>
</hgroup>

</article>

<div id="coin-slider">
    <a href="img01_url" target="_blank">
        <img src='img01.jpg' >
    <span>
        Description for img01
    </span>
    </a>

    <a href="img02_url">
        <img src='img02.jpg' >
    <span>
        Description for img02
    </span>
    </a>

    <a href="img03_url">
        <img src='img03.jpg' >
    <span>
        Description for img03
    </span>
    </a>
</div>

<script type="text/javascript">
$(document).ready(function() {
$('#coin-slider').coinslider({ width: 600, height: 300, navigation: false, delay: 5000, hoverPause: true });
});
</script>

</div> <!--Closes the main content-->

<footer id="mainFooter">
<p>Footer</p>
</footer> <!--Closes the footer-->

</div> <!--Closes the wrapper-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:25:18.947

您确定 coin-slider-styles.css 的 url 不应该指向“css”子目录吗？

# vb.net - 除了 *.SelectionColor 之外还有一种更改字体颜色的方法，还是一种更好地利用它的方法？

> ID：15417108
> 
> 赞同：0
> 
> 时间：2013-03-14T18:16:21.047
> 
> 标签：vb.net, richtextbox

因此，我正在尝试创建一个或两个函数，该函数采用 html 标记并将它们的颜色与文本的其余部分不同（类似于 Visual Studio 对诸如 之类的关键字的处理方式`Dim`）。我发现的唯一方法是使用富文本框，然后 do`*.SelectionColor = Color.Blue`或类似的东西。有没有其他方法可以做到这一点？我这样做了，每当文本框更新时，它都会读取它，并将所有 html 标记更改为不同的颜色。这适用于一个非常短的 html 文件，但是当它们变得更大时，它会花费太长时间，并且选择会移动光标。

**那么，有没有其他方法可以做到这一点，即使我必须使用富文本框以外的东西？如果没有，有没有人看到改善这一点的方法？**

这是文本框更新时运行的两个函数。标签为蓝色，属性为红色，引号中的内容为绿色。

```
 '//////////////////////////////////////////////////////////////////////////
    '// findTag()
    '// -finds a tag
    '//////////////////////////////////////////////////////////////////////////
    Private Function findTag()
        Dim tag As String = ""
        Dim i As Integer = 0
        Dim startTag As Integer

        While (i < txtCurrentFile.TextLength - 1)
            If txtCurrentFile.Text(i) = "<" Then
                startTag = i
                While txtCurrentFile.Text(i) <> ">"
                    tag += txtCurrentFile.Text(i)
                    i += 1
                End While
                tag += ">"
                colorCode(startTag, tag)
                tag = ""
            End If
            i += 1
        End While
        Return Nothing
    End Function

    '//////////////////////////////////////////////////////////////////////////
    '// colorCode()
    '// -colors different tags accordingly
    '//////////////////////////////////////////////////////////////////////////
    Private Function colorCode(ByVal startIndex As Integer,
                               ByVal tag As String)
        Dim i As Integer = 0
        Dim isAttributes As Boolean = False
        Do While (tag(i) <> " " And tag(i) <> ">")
            txtCurrentFile.Select(startIndex + i, 1)
            txtCurrentFile.SelectionColor = Color.Blue
            i += 1
        Loop

        If i < tag.Length Then
            Do Until (tag(i) = ">")
                Do Until (tag(i) = Chr(34))
                    txtCurrentFile.Select(startIndex + i, 1)
                    txtCurrentFile.SelectionColor = Color.Red
                    i += 1
                Loop
                i += 1
                Do Until (tag(i) = Chr(34))
                    txtCurrentFile.Select(startIndex + i, 1)
                    txtCurrentFile.SelectionColor = Color.Purple
                    i += 1
                Loop
                i += 1
            Loop
            txtCurrentFile.Select(startIndex + i, 1)
            txtCurrentFile.SelectionColor = Color.Blue
        End If
        Return Nothing
    End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:34:34.043

几点建议：

1.  放弃字符扫描仪。用任何速度更快的东西（RegEx，HTML Agility Pack，...）替换它

2.  如果您真的想保留字符扫描器，则将扫描限制在修改周围的区域（例如，光标前后 200 个字符）

3.  在开始颜色处理之前记住光标所在的位置，并在完成后恢复它。

4.  实现一个背景着色器，它在单独的线程上对完整的文件重新着色（您必须克隆 RTB，并且只有在着色器运行时用户没有进行任何更改时才应用更改）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:41:31.970

...我不知道这是否会起作用!!!，但如果它确实会很酷...

也许在 webbrowser 控件中打开文件并在 css 表中设置您的着色规则？

同样，我不知道这是否是一个好主意，但它可能会很好地解决问题，因为它已经是你正在处理的 HTML ......

# spring - Spring AOP 和 ClassNotFoundException：org.springframework.core.convert.converter.ConvertingComparator

> ID：15417111
> 
> 赞同：1
> 
> 时间：2013-03-14T18:16:28.497
> 
> 标签：spring, aspectj, classnotfoundexception, spring-aop

我正在尝试将我们的项目从 AspectJ 切换到 Spring AOP。我们正在使用 Spring AOP 支持的 AspectJ 注释和方法执行切点。我们在编译时编织没有问题，但我们正试图摆脱不必要的构建步骤。

我已经添加到我们的 Spring 配置文件并从我们的 pom.xml 中删除了 weaver 插件。结果是一个非常奇怪的错误，似乎是独一无二的（即谷歌不知道它）：

```
19:05:19,213 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-4) Context initialization failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.aop.config.internalAutoProxyCreator': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/core/convert/converter/ConvertingComparator
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:734) [spring-context-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:457) [spring-context-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389) [spring-web-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294) [spring-web-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112) [spring-web-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) [classes.jar:1.6.0_43]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) [classes.jar:1.6.0_43]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_43]
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/core/convert/converter/ConvertingComparator
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    ... 20 more
Caused by: java.lang.NoClassDefFoundError: org/springframework/core/convert/converter/ConvertingComparator
    at org.springframework.aop.aspectj.annotation.ReflectiveAspectJAdvisorFactory.<clinit>(ReflectiveAspectJAdvisorFactory.java:74) [spring-aop-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.<init>(AnnotationAwareAspectJAutoProxyCreator.java:53) [spring-aop-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [classes.jar:1.6.0_43]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) [classes.jar:1.6.0_43]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [classes.jar:1.6.0_43]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [classes.jar:1.6.0_43]
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147) [spring-beans-3.1.4.RELEASE.jar:3.1.4.RELEASE]
    ... 22 more
Caused by: java.lang.ClassNotFoundException: org.springframework.core.convert.converter.ConvertingComparator from [Module "deployment.api-0.1.0-SNAPSHOT.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 29 more 
```

这些是我们的配置文件：

spring-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <import resource="classpath:spring/*.xml"/>

    <bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>

    <bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
        <property name="defaultLocale" value="en"/>
    </bean>

    <context:annotation-config/>
    <context:component-scan base-package="xyz.censored"/>
    <mvc:annotation-driven/>
</beans> 
```

spring-dao.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.springframework.org/schema/beans"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa" xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <bean id="propertyPlaceholderConfigurer"
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:spring/jdbc.properties</value>
            </list>
        </property>
    </bean>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${jdbc.driver_class}"/>
        <property name="url" value="${jdbc.url}?characterEncoding=UTF-8"/>
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
    </bean>

    <!-- Hibernate is used as JPA vendor -->
    <bean id="hibernateJpaVendorAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="generateDdl" value="true"/>
        <property name="showSql" value="true"/>
        <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect"/>
    </bean>

    <!-- Entity manager -->
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="jpaVendorAdapter" ref="hibernateJpaVendorAdapter"/>
        <property name="packagesToScan" value="xyz.censored"/>
    </bean>

    <!-- Configure transaction management -->
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" mode="aspectj"/>

    <jpa:repositories base-package="xyz.censored"/>
</beans> 
```

弹簧方面.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd

       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">

    <context:spring-configured/>
    <aop:aspectj-autoproxy/>

    <bean id="stringTranslationInterceptor" class="xyz.censored.aspects.StringTranslationInterceptor"/>

    <bean id="translationAspect" class="xyz.censored.aspects.TranslationAspect">
        <property name="translationInterceptors">
            <map key-type="java.lang.String" value-type="xyz.censored.aspects.TranslationInterceptor">
                <entry key="java.lang.String" value-ref="stringTranslationInterceptor"/>
            </map>
        </property>
    </bean>
</beans> 
```

问题是什么？我被困住了。:(

**编辑：**

partlov 建议摆脱其他版本的 Spring。我通过明确排除一些依赖项来做到这一点。异常现在消失了，但是 Spring 忽略了以前的 AspectJ 方面。我的配置有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-13T11:34:29.343

这个错误似乎是由于 spring 模块的不同版本造成的。请确保您在 pom.xml 中为不同的 spring 模块使用相同的 spring 版本。例如 spring-web、spring-webmvc、spring-aop 应该有相同的 spring 版本。让我知道这是否可以解决您的问题，或者发布您的 pom.xml 文件以进一步分析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T13:08:35.743

错误 java.lang.NoClassDefFoundError: org/springframework/core/convert/converter/ConvertingComparator 是因为您的 jar 具有 org.springframework.core.convert.converter.convertingComparator 实际上没有为它定义类..尝试下载不同的版本具有 ConvertingComparator 并再次运行的那个 jar

# python - 有人可以给我看一个如何在 Django 中使用 threadlocals 的例子吗？

> ID：15417113
> 
> 赞同：1
> 
> 时间：2013-03-14T18:16:34.300
> 
> 标签：python, django, django-admin, thread-local

本质上，我试图在我的一个应用程序中访问 models.py 中的当前用户。我已经在views.py等中阅读了关于你不应该如何执行此操作以及应该如何执行此操作等内容。我想要完成的只是利用Django admin后端，即视图.py 根本不使用。

这就是我转向threadlocals的原因。我查看了一些与此相关的问题，我发现的只是这个死链接：[http ://code.djangoproject.com/wiki/CookBookThreadlocalsAndUser](http://code.djangoproject.com/wiki/CookBookThreadlocalsAndUser)

坦率地说，我很困惑，希望有人可以为我提供一些关于如何使用 threadlocals 的信息，包括我需要添加到我的 settings.py 中的哪些设置以及我需要制作哪些文件的详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:29:31.117

根据评论，如果您的`Entry`模型具有 的外键`User`，则在保存或删除模型实例后，您无需使用 threadlocals 来获取有关用户的所有信息。

[Signals](https://docs.djangoproject.com/en/1.5/topics/signals/)子框架将为您提供您正在寻找的能力。例如，`pre_delete`可用于在删除对象之前发送电子邮件。`post_save`可以在创建或更新条目后发送。

信号处理程序将接收触发信号的对象的实例，您将能够访问用户对象，包括它的所有属性以发送您的电子邮件。虽然只有 User 的 id 存储在数据库中，但 Django 会通过 ForeignKey 字段让您访问完整的对象。

[编辑]

要在信号处理程序中获取对象实例，请从传递给处理程序的 kwargs 中检索它：

```
def my_callback(sender, **kwargs):
    instance = kwargs.get('instance')
    # you can now reference instance.user
    # send email code here 
```

# css - CSS：不是另一个类的选择器元素

> ID：15417115
> 
> 赞同：2
> 
> 时间：2013-03-14T18:16:35.980
> 
> 标签：css, selector

我有一个`<td>`没有类的里面`<tr class="alt">`

如何`<td>`在不修改 HTML 标记的情况下选择它，但不是全部在表格内？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T21:29:42.830

如果我对您的理解正确，并且您想针对所有未定义**任何类**`td`的 s，那么您可以这样做

 **```
tr.alt td:not([class]) {
    background-color:red;
    ...
} 
```

见**[jsFiddle](http://jsfiddle.net/pmatseykanets/xEuRQ/)**

另一方面，如果您需要定位**没有特定类**（例如）但可能有其他类`td`的 s**`main`**

 **```
tr.alt td:not(.main) {
    background-color:red;
    ...
} 
```

见**[jsFiddle](http://jsfiddle.net/pmatseykanets/TYdC6/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T18:18:40.503

在 tr 上使用类说明符：

```
tr.alt > td 
```

如果您只想选择 each 中的第一个 td `tr.alt`，您可以使用：

```
tr.alt > td:nth-child(1) 
```****

# javascript - 即使定义了变量，“也无法调用 null 的方法‘调用’”（Chrome）

> ID：15417118
> 
> 赞同：2
> 
> 时间：2013-03-14T18:16:44.980
> 
> 标签：javascript, google-chrome

我收到错误

```
TypeError: Cannot call method 'call' of null 
```

在铬。打开控制台，设置捕获未捕获的异常并重新加载页面后，它在以下行停止（缩小->美化代码）：

```
return this instanceof Q && (b = null != (d = this.getO()) ? d.id : void 0, 0 <= L.call(null != (f = null != c ? "function" === typeof c.get ? c.get("foo") : void 0 : void 0) ? f : [], b)) 
```

该行中唯一的实例`call`是 at `L.call(...)`。看着`Scope Variables`，我没有看到`L`in 的实例`Local`。在`Closure`中，我看到：

```
L: function indexOf() { [native code] }
  arguments: null
  caller: null
  length: 1
  name: "indexOf"
  __proto__: function Empty() {} 
```

正如预期的那样，它已定义并且是一个函数。检查`__proto__`显示`call`方法。

此外，控制台反映了如下所示的状态`Scope Variables`：

```
> L
function indexOf() { [native code] }
> L.call
function call() { [native code] }
> L.call([], b) // This is what it is getting called with
-1 
```

并复制有问题的行（减去`return`）按预期运行。

```
> this instanceof Q && (b = null != (d = this.getO()) ? d.id : void 0, 0 <= L.call(null != (f = null != c ? "function" === typeof c.get ? c.get("foo") : void 0 : void 0) ? f : [], b))
false 
```

我只能在我们的生产环境中重现这种行为。它发生得相当零星，我找不到任何模式。我们既没有观察到也没有得到关于它在 Chrome 以外的任何浏览器中发生的报告。我正在运行`Chrome 25.0.1364.172`，并且在`Chrome 25.0.1364.152`.

这发生在一大段 javascript 的中途（在运行时动画中有一秒钟左右的可见停顿）。在减少的数据集上运行它不会重现它。

有没有人有任何调试提示和/或有关控制台可能以这种方式与脚本不同步的原因的信息？

编辑：我搜索了变量的缩小源`L`，但只有两个地方设置为除 之外的任何值`[].indexOf`，当我点击这一行时，它们都肯定超出了范围。

相同的问题发生在 中`Chrome Canary 27.0.1440.0`，但在不同的行上。其他情况相同：变量`L`已定义但`L.call(...)`抛出`TypeError`.

# ruby-on-rails - 在 Rails ActiveRecord 测试套件中使用 Ruby 1.9 lambda 文字感到困惑

> ID：15417123
> 
> 赞同：1
> 
> 时间：2013-03-14T18:16:47.440
> 
> 标签：ruby-on-rails, ruby, activerecord, lambda

在尝试解决一个几乎不相关的问题时，我在这个 Rails ActiveRecord 测试文件中遇到了一些代码：http: [//github.com/rails/rails/blob/master/activerecord/test/models/post.rb](http://github.com/rails/rails/blob/master/activerecord/test/models/post.rb)

```
belongs_to :author_with_posts, -> { includes(:posts) }, :class_name => "Author", :foreign_key => :author_id 
```

我知道（或者我知道吗？）**->** “箭头”创建了一个文字 lambda，但我不知道这是如何或为什么这是**belongs_to(name, options = {})**的有效参数集。我会期待这样的事情：

```
belongs_to :author_with_posts, <something that results in a key/value pair>, :class_name => "Author", :foreign_key => :author_id 
```

上述文件充满了这种构造的实例，它显然工作正常，但我不知道为什么。我尝试在我自己的（显然）类似的 ActiveRecord 关联中使用 -> 语法，但它不起作用，我得到了这个：

```
ArgumentError: wrong number of arguments(3 for 2) 
```

看来我要么错过了一些非常基本的东西吗？或者 post.rb 代码可能比我们看到的更多？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:26:19.537

实际上`belongs_to`在最新版本中需要 3 个参数。

第二个参数是`scope`参数，在4.0.0版本中已经引入。

[4.0.0 的代码在这里](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/associations.rb#L1395)，添加`scope`参数的提交在[那里](https://github.com/rails/rails/commit/5a54bffe37f9e16405779d9729d7903d7c7d6c56)

它对您不起作用，因为您很可能使用 rails 3.2.12。

# angularjs - 使用 AngularJS 按 Enter 提交表单

> ID：15417125
> 
> 赞同：369
> 
> 时间：2013-03-14T18:16:58.573
> 
> 标签：angularjs, forms, form-submit, keypress, enter

在这种特殊情况下，当我按 Enter 时，我必须使用哪些选项才能使这些输入调用函数？

html:

```
<form>
    <input type="text" ng-model="name" <!-- Press ENTER and call myFunc --> />
    <br />
    <input type="text" ng-model="email" <!-- Press ENTER and call myFunc --> />
</form> 
```

```
// Controller //
.controller('mycontroller', ['$scope',function($scope) {
    $scope.name = '';
    $scope.email = '';
    // Function to be called when pressing ENTER
    $scope.myFunc = function() {
       alert('Submitted');
    };
}]) 
```

* * *

## 回答 #1

> 赞同：523
> 
> 时间：2013-03-14T19:05:41.050

Angular 开箱即用地支持这一点。您是否在表单元素上尝试过[ngSubmit](http://docs.angularjs.org/api/ng.directive:ngSubmit)？

```
<form ng-submit="myFunc()" ng-controller="mycontroller">
   <input type="text" ng-model="name" />
    <br />
    <input type="text" ng-model="email" />
</form> 
```

编辑：根据有关提交按钮的评论，请参阅[通过按 Enter 提交表单而不使用提交按钮](https://stackoverflow.com/questions/477691/submitting-a-form-by-pressing-enter-without-a-submit-button)，该按钮提供了以下解决方案：

```
<input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;"/> 
```

如果您不喜欢隐藏提交按钮的解决方案，则需要将控制器功能绑定到 Enter 按键或 keyup 事件。这通常需要一个自定义指令，但 AngularUI 库已经设置了一个很好的按键解决方案。见[http://angular-ui.github.com/](http://angular-ui.github.com/)

添加 angularUI 库后，您的代码将类似于：

```
<form ui-keypress="{13:'myFunc($event)'}">
  ... input fields ...
</form> 
```

或者您可以将回车键绑定到每个单独的字段。

另外，请参阅此 SO 问题以创建简单的 keypres 指令： [如何在 AngularJS 中检测 onKeyUp？](https://stackoverflow.com/questions/11264188/how-can-i-detect-onkeyup-in-angularjs)

编辑（2014-08-28）：在编写此答案时，ng-keypress/ng-keyup/ng-keydown 在 AngularJS 中不作为本机指令存在。在下面的评论中@darlan-alves 有一个很好的解决方案：

`<input ng-keyup="$event.keyCode == 13 && myFunc()"... />`

* * *

## 回答 #2

> 赞同：289
> 
> 时间：2013-06-28T12:25:52.123

如果你想调用没有表单的函数，你可以使用我的 ngEnter 指令：

**Javascript**：

```
angular.module('yourModuleName').directive('ngEnter', function() {
        return function(scope, element, attrs) {
            element.bind("keydown keypress", function(event) {
                if(event.which === 13) {
                    scope.$apply(function(){
                        scope.$eval(attrs.ngEnter, {'event': event});
                    });

                    event.preventDefault();
                }
            });
        };
    }); 
```

**HTML**：

```
<div ng-app="" ng-controller="MainCtrl">
    <input type="text" ng-enter="doSomething()">    
</div> 
```

[我在我的 twitter](https://twitter.com/_PandaJS)和我的[gist 帐户](https://gist.github.com/EpokK)上提交了其他很棒的指令。

* * *

## 回答 #3

> 赞同：201
> 
> 时间：2014-02-03T18:34:57.283

如果您只有一个输入，则可以使用表单标签。

```
<form ng-submit="myFunc()" ...> 
```

如果您有多个输入，或者不想使用表单标签，或者想将输入键功能附加到特定字段，则可以将其内联到特定输入，如下所示：

```
<input ng-keyup="$event.keyCode == 13 && myFunc()" ...> 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2014-02-19T13:35:22.193

我想要一些比给定答案更具可扩展性/语义的东西，所以我编写了一个指令，该指令以类似于内置的方式获取 javascript 对象`ngClass`：

### HTML

```
<input key-bind="{ enter: 'go()', esc: 'clear()' }" type="text"></input> 
```

对象的值在指令范围的上下文中进行评估 - 确保它们用单引号括起来，否则所有函数将在指令加载时执行（！）

例如： `esc : 'clear()'`而不是`esc : clear()`

### Javascript

```
myModule
    .constant('keyCodes', {
        esc: 27,
        space: 32,
        enter: 13,
        tab: 9,
        backspace: 8,
        shift: 16,
        ctrl: 17,
        alt: 18,
        capslock: 20,
        numlock: 144
    })
    .directive('keyBind', ['keyCodes', function (keyCodes) {
        function map(obj) {
            var mapped = {};
            for (var key in obj) {
                var action = obj[key];
                if (keyCodes.hasOwnProperty(key)) {
                    mapped[keyCodes[key]] = action;
                }
            }
            return mapped;
        }

        return function (scope, element, attrs) {
            var bindings = map(scope.$eval(attrs.keyBind));
            element.bind("keydown keypress", function (event) {
                if (bindings.hasOwnProperty(event.which)) {
                    scope.$apply(function() {
                         scope.$eval(bindings[event.which]);
                    });
                }
            });
        };
    }]); 
```

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2016-10-21T05:18:39.940

另一种方法是使用 ng-keypress ，

```
<input type="text" ng-model="data" ng-keypress="($event.charCode==13)? myfunc() : return"> 
```

[使用 AngularJS 按 Enter 提交输入 - jsfiddle](https://jsfiddle.net/darkarcherroy/ntr89m4g/2/)

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2015-02-02T20:52:06.123

非常好的、干净和简单的指令，带有 shift + enter 支持：

```
app.directive('enterSubmit', function () {
    return {
        restrict: 'A',
        link: function (scope, elem, attrs) {
            elem.bind('keydown', function(event) {
                 var code = event.keyCode || event.which;
                 if (code === 13) {
                       if (!event.shiftKey) {
                            event.preventDefault();
                            scope.$apply(attrs.enterSubmit);
                       }
                 }
            });
        }
    }
}); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-06-29T02:28:56.433

**如果你也想要数据验证**

```
<!-- form -->
<form name="loginForm">
...
  <input type="email" ng-keyup="$loginForm.$valid && $event.keyCode == 13 && signIn()" ng-model="email"... />
  <input type="password" ng-keyup="$loginForm.$valid && $event.keyCode == 13 && signIn()" ng-model="password"... />
</form> 
```

这里重要的补充是`$loginForm.$valid`它将在执行功能之前验证表单。您将不得不添加其他属性进行验证，这超出了此问题的范围。

祝你好运。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-08-05T21:43:41.510

只是想指出，在有隐藏提交按钮的情况下，您可以使用 ngShow 指令并将其设置为 false，如下所示：

**HTML**

```
<form ng-submit="myFunc()">
    <input type="text" name="username">
    <input type="submit" value="submit" ng-show="false">
</form> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-11-18T05:25:36.310

使用 ng-submit 并将两个输入包装在单独的表单标签中：

```
<div ng-controller="mycontroller">

  <form ng-submit="myFunc()">
    <input type="text" ng-model="name" <!-- Press ENTER and call myFunc --> />
  </form>

  <br />

  <form ng-submit="myFunc()">
    <input type="text" ng-model="email" <!-- Press ENTER and call myFunc --> />
  </form>

</div> 
```

将每个输入字段包装在其自己的表单标记中允许 ENTER 在任一表单上调用提交。如果您对两者都使用一个表单标签，则必须包含一个提交按钮。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-17T10:38:07.813

使用 CSS 类而不是重复内联样式会稍微整洁一些。

**CSS**

```
input[type=submit] {
    position: absolute;
    left: -9999px;
} 
```

**HTML**

```
<form ng-submit="myFunc()">
    <input type="text" ng-model="name" />
    <br />
    <input type="text" ng-model="email" />
    <input type="submit" />
</form> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-25T19:28:22.917

FWIW - 这是我用于基本确认/警报引导模式的指令，不需要`<form>`

（只需将 jQuery 单击操作切换为您喜欢的任何内容，然后添加`data-easy-dismiss`到您的模态标签中）

```
app.directive('easyDismiss', function() {
    return {
        restrict: 'A',
        link: function ($scope, $element) {

            var clickSubmit = function (e) {
                if (e.which == 13) {
                    $element.find('[type="submit"]').click();
                }
            };

            $element.on('show.bs.modal', function() {
                $(document).on('keypress', clickSubmit);
            });

            $element.on('hide.bs.modal', function() {
                $(document).off('keypress', clickSubmit);
            });
        }
    };
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-13T06:43:26.430

您可以简单地将 @Hostlistener 与组件绑定，其余的将由它来处理。它不需要绑定其 HTML 模板中的任何方法。

```
@HostListener('keydown',['$event'])
onkeydown(event:keyboardEvent){
  if(event.key == 'Enter'){
           // TODO do something here
           // form.submit() OR API hit for any http method
  }
} 
```

上面的代码应该适用于 Angular 1+ 版本

# javascript - 如何从谷歌地图 v3 api 获取纬度和经度？

> ID：15417130
> 
> 赞同：13
> 
> 时间：2013-03-14T18:17:21.667
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试使用谷歌地图 v3 api 创建地图。我在互联网上找到了以下代码，我想在地图窗口而不是地址中显示纬度和对数。

```
<script>
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-33.8688, 151.2195),
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById('map_canvas'),
          mapOptions);

        var input = document.getElementById('searchTextField');
        var autocomplete = new google.maps.places.Autocomplete(input);

        autocomplete.bindTo('bounds', map);

        var infowindow = new google.maps.InfoWindow();
        var marker = new google.maps.Marker({
          map: map
        });

        google.maps.event.addListener(autocomplete, 'place_changed', function() {
          infowindow.close();
          marker.setVisible(false);
          input.className = '';
          var place = autocomplete.getPlace();
          if (!place.geometry) {
            // Inform the user that the place was not found and return.
            input.className = 'notfound';
            return;
          }

          // If the place has a geometry, then present it on a map.
          if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
          } else {
            map.setCenter(place.geometry.location);
            map.setZoom(17);  // Why 17? Because it looks good.
          }
          var image = {
            url: place.icon,
            size: new google.maps.Size(71, 71),
            origin: new google.maps.Point(0, 0),
            anchor: new google.maps.Point(17, 34),
            scaledSize: new google.maps.Size(35, 35)
          };
          marker.setIcon(image);
          marker.setPosition(place.geometry.location);
          marker.setVisible(true);

          var address = '';
          if (place.address_components) {
            address = [
              (place.address_components[0] && place.address_components[0].short_name || ''),
              (place.address_components[1] && place.address_components[1].short_name || ''),
              (place.address_components[2] && place.address_components[2].short_name || '')
            ].join(' ');
          }

          infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
          infowindow.open(map, marker);
        }); 
```

请有人帮我获取并显示纬度和经度。非常感谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T18:29:27.300

你在哪里

```
 var address = '';
  if (place.address_components) {
    address = [
      (place.address_components[0] && place.address_components[0].short_name || ''),
      (place.address_components[1] && place.address_components[1].short_name || ''),
      (place.address_components[2] && place.address_components[2].short_name || '')
    ].join(' ');
  }

  infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
  infowindow.open(map, marker); 
```

将 infowindow 行更改为读取

```
 infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + place.geometry.location.lat() + ',' + place.geometry.location.lng()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-11T05:26:17.587

更简单的解决方案将是：

```
var address = "New Delhi"
$.ajax({
  url:"http://maps.googleapis.com/maps/api/geocode/json?address="+address+"&sensor=false",
  type: "POST",
  success:function(res){
     console.log(res.results[0].geometry.location.lat);
     console.log(res.results[0].geometry.location.lng);
  }
}); 
```

干杯

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-08T06:33:41.110

看看这段代码..

```
<!DOCTYPE html>
<html>
<head>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
    <script>
        function initialize() {
        var address = 'Kolkata';
            geocoder = new google.maps.Geocoder();
            geocoder.geocode({
            'address': address
            }, function(results, status) {      
                var lat=document.getElementById("lat").innerHTML=results[0].geometry.location.lat();    
                var lng=document.getElementById("lng").innerHTML=results[0].geometry.location.lng();        
            });
        }
        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head>
<body>
    <p id="lat"></p> 
    <p id="lng"></p> 
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-07T14:18:20.930

看起来您可能只是在寻找常规的地理位置信息？这是我从一个项目中获取用户纬度/经度的片段

触发 show_user_location(); 开始地理定位 API。

```
function show_user_location(){ 

    navigator.geolocation.getCurrentPosition(display_user_location, error_response); 
} 
function display_user_location(user_position){ 
    var lat = user_position.coords.latitude; 
    var lon = user_position.coords.longitude; 

// once we get here make that AJAX query
// #loc.value="<p>Your latitude is: "+lat+", your longitude is: "+lon+"</p>"+ "<p><a href='http://maps.google.com/?q="+lat+","+lon+"'>View your location on Google Maps</a></p>";

    // I often put the lat/lon in a hidden form for later retrieval here.
    // value = document.getElementById('lat').value;
    // value = document.getElementById('lat').value;

    document.getElementById("lat").value = lat;
    document.getElementById("long").value = lon;

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-20T11:00:38.877

当您想要地图任何部分的纬度和经度时，请尝试为地图添加点击侦听器而不是标记。代码应如下所示：

```
var infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(map);

    service.getDetails({
        placeId: 'ChIJN1t_tDeuEmsRUsoyG83frY4'
    },function(place,status){
        if(status === google.maps.places.PlacesServiceStatus.OK)
        {
            var marker = new google.maps.Marker({
                map:map,
                position: place.geometry.location

            });

        google.maps.event.addListener(map, 'click', function(e) {
          infowindow.setContent('<div>'+'Longitute'+'<strong>' + e.latLng.lng() + '</strong><br>' +
            'Latitude:'+'<strong>' + e.latLng.lat()+'</strong>'  + '</div>');
          infowindow.open(map, this);
        });
        }
    }); 
```

这将使用信息窗口显示地图上任何位置的纬度和经度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-27T12:20:41.683

我创建了一个小组件来说明`React`。虽然，都是一样的`API`。我认为这可能会有所帮助。

```
import React, { useState } from 'react';

import PropTypes from 'prop-types';
import { GoogleApiWrapper } from 'google-maps-react';

const SearchLocation = ({ google }) => {
  const [inputData, setInputData] = useState('');

  const handleChange = ({ target: { value } }) => {
    if (value) {
      setInputData(value);
      const autoCompleteService = new google.maps.places.AutocompleteService();
      autoCompleteService.getPlacePredictions(
        { input: value },
        (predictions, status) => {
           if (status === google.maps.places.PlacesServiceStatus.OK) {
              // update prediction, so that user can click on the predicted address
              const updatePredictions = (predictions) => {};
              // or get the coordinate of one prediction
              if (predictions.length > 0) {
                 geoCodeLocation(predictions[0]);
              }
           }
        }
      );
    }
  };

  const geoCodeLocation = (suggestion) => {
    const placeId = suggestion.place_id;
    const GeoCoder = new google.maps.Geocoder();
    GeoCoder.geocode({ placeId }, (response) => {
      const lattitude = response[0].geometry.location.lat();
      const longitude = response[0].geometry.location.lng();
      const coordinates = [longitude, lattitude];
      // save coordinate and suggestion
      const selectLocation = ({ coordinates, suggestion }) => {};
    });
  };

  return (
    <div>
        <input
          type="text"
          name="searchLocation"
          placeholder="Enter your address..."
          className="text-field"
          onChange={handleChange}
        />
      {/* handle suggestion */}
   </div>
  );
};

export default GoogleApiWrapper({
  apiKey: process.env.GOOGLE_API_KEY,
  v: '3'
})(SearchLocation);

SearchLocation.defaultProps = {};

SearchLocation.propTypes = {
  google: PropTypes.shape({}).isRequired,
}; 
```

# dependency-injection - 无法使用 Autofac 将依赖项注入 Signalr Hub

> ID：15417132
> 
> 赞同：3
> 
> 时间：2013-03-14T18:17:27.620
> 
> 标签：dependency-injection, signalr, autofac, signalr-hub

如何让 Autofac 将依赖项注入信号器集线器，我已经尝试了所有唯一的问题，其中许多现在已经过时，我已经尝试从他们的站点下载 signalr.autofac，但似乎没有任何效果？

我的 Autofac

```
var builder = new ContainerBuilder();
builder.RegisterControllers(typeof(MvcApplication).Assembly);

//Register Context
builder.Register(c => new myContext()).As<IUnitOfWork>().InstancePerLifetimeScope();

//Repositories
builder.RegisterGeneric(typeof(BaseRepository<>)).As(typeof(IBaseRepository<>)).InstancePerHttpRequest();           

//Service Layer
builder.RegisterType<UserService>().As<IUserService>().InstancePerHttpRequest();

//other services etc

builder.RegisterType<ChatHub>(); 

var container = builder.Build();           

DependencyResolver.SetResolver(new AutofacDependencyResolver(container));          

GlobalHost.DependencyResolver = new Autofac.Integration.SignalR.AutofacDependencyResolver(container);
RouteTable.Routes.MapHubs(); 
```

我从 autofac 网站获得的依赖左轮手枪；

[http://code.google.com/p/autofac/downloads/detail?name=Autofac.SignalR.3.0.0.zip](http://code.google.com/p/autofac/downloads/detail?name=Autofac.SignalR.3.0.0.zip)

但我明白了；

> 从请求实例的范围中看不到带有与“AutofacWebRequest”匹配的标记的范围。这通常表明注册为 per-HTTP 请求的组件正在由 SingleInstance() 组件（或类似场景）请求。在 Web 集成下，始终从 DependencyResolver.Current 或 ILifetimeScopeProvider.RequestLifetime 请求依赖项，而不是从容器本身.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T15:09:35.853

我从 autofac 得到了一个解决方案，虽然不完美，但它可以工作：

[http://code.google.com/p/autofac/issues/detail?id=416](http://code.google.com/p/autofac/issues/detail?id=416)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:12:30.373

值得一试，也许这个新的文档页面可以帮助您找到您的问题： [https ://code.google.com/p/autofac/wiki/SignalRIntegration](https://code.google.com/p/autofac/wiki/SignalRIntegration)

# c++ - 蛇的头部距离身体几个点（c ++游戏）

> ID：15417133
> 
> 赞同：-5
> 
> 时间：2013-03-14T18:17:29.887
> 
> 标签：c++, linux

我已经在这个项目上工作了一段时间，但我在我的项目中找不到我的问题。网址：[https](https://github.com/blackwolf12333/Snake) ://github.com/blackwolf12333/Snake 这条蛇离身体只有几个点，似乎没有移动。我之前有一个段错误，我修复了，但我找不到这个错误的问题！我几乎尝试过任何东西，重写代码以从头到尾阅读它。它在Linux中编码！

主程序

```
#include "snake.h"
#include "ncurses.h"

void update();
void draw_snake();
void check_move(int c);

void cleanup();

int main() {
initscr();
noecho();
cbreak();

snake = create_snake_at(20, 10);
add_body_part(&snake.head);
//add_body_part(snake.head.next);

int key;
printw("Press any key to continue...");
while((key = getch()) != 'q') { // when 'q' is pressed the game will exit.
check_move(key);
update(); // updates game logic/graphics
refresh();
}
refresh();
endwin();
cleanup();
return 0;
}

void update() {
    //clear();
    move_snake();
    draw_snake();
}

void check_move(int c) {
    switch(c) {
    case 6517: // up arrow
move_up();
break;
case 6617:
move_down();
break;
case 6817:
move_left();
break;
case 6717:
move_right();
break;
default:
break;
    }
    draw_snake();
}

void print_body_part(body_part_t *part) {
    move(part->pos.y, part->pos.x);
if(part->head) {
addch('$'); 
} else {
addch('*');
}
}

void draw_snake() {
    body_part_t *next = &snake.head;
    int i = 0;
    while(next) {
        move(i, 0);
        printw("part is head: %d\tpart x: %d\tpart y: %d\n", next->head, next->pos.x, next->pos.y);
        print_body_part(next);
        next = next->next;
        i++;
    }
}

void cleanup() {
    body_part_t *next;
    for(next = &snake.head; next != NULL; next = next->next) {
        //free(next);
    }
} 
```

移动.c

```
#include "move.h"
#include "snake.h"

//TODO: add collision logic here!
void move_up() {
snake.head.pos.y++;
}

void move_down() {
snake.head.pos.y--;
}

void move_left() {
snake.head.pos.x--;
}

void move_right() {
snake.head.pos.x++;
} 
```

移动.h

```
#ifndef MOVE_H
#define MOVE_H

void move_up();
void move_down();
void move_left();
void move_right();

#endif 
```

位置.c

```
#include "position.h"

void initialize_position(position_t *pos, int x, int y) {
pos->x = x;
pos->y = y;
} 
```

位置.h

```
#ifndef POSITION_H
#define POSITION_H

typedef struct position {
int x;
int y;
} position_t;

void initialize_position(position_t *pos, int x, int y);

#endif 
```

蛇.c

```
#include "snake.h"

body_part_t create_body_part(int head, int x, int y);
position_t get_position_next_to(body_part_t *part);

void add_body_part(body_part_t *prev) {
body_part_t *part = malloc(sizeof(body_part_t));
part->head = prev->head & 0;
part->pos = get_position_next_to(prev);
part->dir = prev->dir;
part->next = NULL;
prev->next = part;
}

snake_t create_snake_at(int x, int y) {
snake_t *snake = malloc(sizeof(snake_t));
body_part_t head = create_body_part(1, x, y);
snake->head = head;
snake->health = MAX_HEALTH;
return *snake;
}

body_part_t create_body_part(int head, int x, int y) {
body_part_t *part = malloc(sizeof(body_part_t));
part->head = head;
initialize_position(&part->pos, x, y);
part->dir = LEFT;
part->next = NULL;
return *part;
}

position_t get_position_next_to(body_part_t *part) {
    position_t pos;
    switch(part->dir) {
    case UP:
        initialize_position(&pos, part->pos.x, part->pos.y++);
        break;
    case DOWN:
        initialize_position(&pos, part->pos.x, part->pos.y--);
        break;
    case LEFT:
        initialize_position(&pos, part->pos.x--, part->pos.y);
        break;
    case RIGHT:
        initialize_position(&pos, part->pos.x++, part->pos.y++);
        break;
    default:
        break;
    }
    return pos;
}

void move_snake() {
body_part_t *next;
for(next = &snake.head; next != NULL; next = next->next) {
switch(next->dir) {
case UP:
move_up();
break;
case DOWN:
move_down();
break;
case LEFT:
move_left();
break;
case RIGHT:
move_right();
break;
}
}
} 
```

蛇.h

```
#ifndef SNAKE_H
#define SNAKE_H

#include "stdlib.h"
#include "position.h"
#include "move.h"

#define MAX_HEALTH 20

typedef struct body_part body_part_t;

typedef enum DIR {
UP,
DOWN,
LEFT,
RIGHT
} direction;

typedef struct body_part {
int head;
position_t pos;
direction dir;
body_part_t *next;
} body_part_t;

typedef struct snake {
body_part_t head;
int health;
} snake_t;

/*
This is the main snake struct, if later multiple snakes will be implemented this should be replaced with something else
*/
snake_t snake;

snake_t create_snake_at(int x, int y);
void add_body_part(body_part_t *prev);
void move_snake();

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:47:01.400

我认为您的问题可能部分出在 get_next_position_to 函数中，您可以在其中增加传递给函数的主体部分的位置。我认为这可能只应该添加。'RIGHT' 情况也同时修改了 X 和 Y。

```
position_t get_position_next_to(body_part_t *part) {
    position_t pos;
    switch(part->dir) {
    case UP:
        initialize_position(&pos, part->pos.x, part->pos.y + 1);
        break;
    case DOWN:
        initialize_position(&pos, part->pos.x, part->pos.y - 1);
        break;
    case LEFT:
        initialize_position(&pos, part->pos.x - 1, part->pos.y);
        break;
    case RIGHT:
        initialize_position(&pos, part->pos.x + 1, part->pos.y);
        break;
    default:
        break;
    }
    return pos;
} 
```

此外，您的 move_snake 函数不会更新以下身体部位。由于您使用的是链表，因此您可以将列表的最后一个元素移动到头部之后，并在移动头部之前将位置等从头部复制到下一个元素。为此，您需要将列表更改为双向列表。您可以使用循环缓冲区更有效地进行编码。

您的列表清理功能是错误的，因为您在再次访问之前释放了下一个元素。您需要存储一个临时文件并进行迭代，然后释放临时文件。而且你绝对不应该释放 &snake.head 因为你没有 malloc 它。它应该是这样的：

```
void cleanup() {
    body_part_t* tmp;
    body_part_t *next = snake.head.next;
    while (next) {
        tmp = next;
        next = next->next;
        free(tmp);
    }
} 
```

# c# - Int 类型的参数不能转换

> ID：15417134
> 
> 赞同：0
> 
> 时间：2013-03-14T18:17:30.607
> 
> 标签：c#, parameters

```
public List<Client> SearchBy(string proc, string var, string value)
    {
        List<Client> clients = new List<Client>();
        var reader = dal.ExecuteProc(proc, var, value);
        while (reader.Read())
        {
            List<Contact> Contacts = new List<Contact>();
            EnumFactory.ClientType type = new EnumFactory.ClientType();
            EnumFactory.Language language = new EnumFactory.Language();

            Client c = new Client(Convert.ToInt32(reader["ClientID"]), reader["Name"].ToString(), reader["Surname"].ToString(), reader["Address"].ToString(), reader["Email"].ToString(), Contacts, reader["Email"].ToString(), type, DateTime.Now, reader(Convert.ToChar(reader["Gender"]), language, reader["AdhocNotes"].ToString(), reader["Status"].ToString(), reader["Color"].ToString());
            clients.Add(c);
        }
        return clients;
    } 
```

所以我正在努力将 ClientID 转换为整数，并将 Gender 转换为 Char 请帮助！我已经尝试了上述转换。我试过这个 aswel

```
Client c = new Client(reader(Convert.ToInt32(["ClientID"])) 
```

但这也不起作用......我对存储过程阅读器的使用相当陌生。我搜索并没有找到结果（我找到的所有源都使用上述转换为int的方法）

回复之前：是的，字段、构造函数和属性都是 int 类型，Char 问题也是如此。通过构造我的参数你会看到我的构造函数类型如下（int、string、string、string、string、list、string、enum、date、char、enum、string、string、string）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:21:43.970

如果您的存储过程返回一个`int`参数（它应该），您应该像这样进行转换

```
int clientId = (int)reader["ClientID"]; 
```

如果结果是可为空的整数（或任何其他类型），则转换将如下所示：

```
int? clientId = (reader["ClientID"] is DBNull) ? (int?)null : (int)reader["ClientID"]; 
```

如果这对您不起作用，您应该发布您收到的异常消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:25:00.157

尝试

```
Convert.ToInt32(reader["ClientID"].ToString()] , 
```

它可能会抛出异常，所以最好使用 int.TryParse 方法，正如我在评论中问你的那样，如果这些字段在数据库中可以为空，那么你可以使用 Nullable 类型。

# c# - 调整矩形大小并捕捉到固定比例

> ID：15417135
> 
> 赞同：1
> 
> 时间：2013-03-14T18:17:32.890
> 
> 标签：c#, .net, math, aspect-ratio

我目前有代码，当用户单击与以下区域相对应的多个锚点时，它会根据鼠标移动调整矩形的大小：Left、Top、Right、Bottom、TopLeft、TopRight、BottomLeft、BottomRight。

因此用户可以单击并拖动顶部锚点，它将根据鼠标的位置调整矩形的顶部坐标。所有其他锚点都一样。

事实上，我想通过根据动作捕捉矩形的适当边来强制执行固定比例（例如 2:3 或 5:7）。我已经为左、上、右和下锚做了这个，因为它很容易，如果我调整宽度，我只需要根据比例自动调整高度，反之亦然。

我遇到的困难是当用户拖动诸如右下角或左上角锚点之类的角时。我需要弄清楚如何选择拍摄哪一面。我有鼠标坐标和矩形的左、上、右和下。

这是我尝试过的代码：

```
case Anchor.BottomRight:
    float maxRight = CursorPosition.X;
    float maxBottom = CursorPosition.Y;

    float newRight = Bounds.Left + (Bounds.Width * widthRatio);
    float newBottom = Bounds.Top + (Bounds.Height * heightRatio);

    if (newRight < maxRight)
    {
        Width = Height * widthRatio;
    }
    else
    {
        Height = Width * heightRatio;
    }

    break; 
```

在 2:3 的固定比率示例中，widthRatio 为 0.666，heightRatio 为 1.5。

这段代码有一半的时间可以工作，但当然它基本上是 50/50 的工作机会。我必须确定一个合适的条件来捕捉宽度或高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:02:27.677

我想到了。

```
if (Height * widthRatio <= Width)
    Width = Height * widthRatio;
else if (Width * heightRatio <= Height)
    Height = Width * heightRatio; 
```

这将以固定比率模拟 Photoshop 中的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:34:29.980

只需捕捉到具有更高比率的那个。无论哪个更大，都应该驱动矩形的形状。只要确保你抓住了所有的情况——都 > 1，都 < 1，和一个或另一个：

```
bool calcHeight;
if (widthRatio >= 1 && heightRatio >=1)
{
    calcHeight= (widthRatio > heightRatio);
}
else if (widthRatio < 1 && heightRatio < 1)
{
    calcHeight= (widthRatio < heightRatio); // because the width change is "bigger"
}
else if (widthRatio >= 1)
{
    calcHeight= (widthRatio > (1.0/heightRatio)); // get them both > 1
}
else
{
    calcHeight= (widthRatio < (1.0/heightRatio)); // get them both < 1
}

if (calcHeight)
{
    Height = Width * heightRatio;
} else {
    Width = Height * widthRatio;
} 
```

当然，这是假设我知道你在谈论你的比率。我假设它是旧长度（或宽度）与新长度（或宽度）的比率。

我*强烈*推荐的一件事是 - 在用户拖动锚点时强制纵横比约束，而不是在他们放置锚点时。如果这样做，用户的感觉会更加直观。

# javascript - 通过 HTTP 请求将文本文件作为数组 javascript 返回

> ID：15417142
> 
> 赞同：1
> 
> 时间：2013-03-14T18:17:51.143
> 
> 标签：javascript, arrays, xmlhttprequest, return

我在开发网站时遇到了障碍。我需要它在同一目录中提取一个文本文件并将每一行作为一个数组返回。

所以我做了研究，想出了一个看起来很简单的函数。但是，当我提醒（theArray）；它返回未定义。我究竟做错了什么？

```
function pullText(x)
{
  var fullText = [];
  fileReturn=new XMLHttpRequest();
  fileReturn.onreadystatechange=function()
  {
    if (fileReturn.readyState==4 && fileReturn.status==200)
    {
      entireTextFile = fileReturn.responseText;
      // alert(entireTextFile); works as expected here
      lines = fileReturn.responseText.split("\n");
      // alert(lines); works as expected here
      fullText = lines;
    }
  }
  // alert(fullText); does not work.
  fileReturn.open("GET",x,true);
  fileReturn.send();
  return fullText;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:20:29.570

它不会那样工作，因为 AJAX 是异步的。您应该传递一个回调处理程序并在文档准备好后调用它。

```
function pullText(x, callback)
{
//      var fullText = []; not necessary
  fileReturn=new XMLHttpRequest();
  fileReturn.onreadystatechange=function()
  {
    if (fileReturn.readyState==4 && fileReturn.status==200)
    {
      entireTextFile = fileReturn.responseText;
      // alert(entireTextFile); works as expected here
      lines = fileReturn.responseText.split("\n");
      // alert(lines); works as expected here
      callback(lines);
    }
  }
  // alert(fullText); does not work.
  fileReturn.open("GET",x,true);
  fileReturn.send();
}

pullText(whatever, function(lines) {
    // use lines here
}); 
```

# python - 如何使用 Django ORM 在日期时间字段中仅按时间查询

> ID：15417143
> 
> 赞同：2
> 
> 时间：2013-03-14T18:17:51.430
> 
> 标签：python, django

我有一个日期时间字段：2013-03-14 17:30:21
我只想按时间查询，而忽略日期。

像这样：

> list = MyModel.filter(dateTimeField_ *time* _gte = '09:00:00', dateTimeField_ *time* _lte = '10:00:00')

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:27:21.840

有关如何按日期或时间范围过滤的一些见解，请参阅此 Stack Overflow 问题：[Django 模型时间范围过滤方法](https://stackoverflow.com/questions/3043859/django-model-timerange-filtering-method)

# python - Python Scapy nfqueue

> ID：15417144
> 
> 赞同：0
> 
> 时间：2013-03-14T18:17:51.740
> 
> 标签：python, linux, iptables, scapy

我正在编写 python 代码来与 linux 系统上的 iptables nfqueue 交互。我能够检索队列数据包并根据需要修改它们，但是我无法通过队列接受它们。

```
 payload.set_verdict_modified(nfqueue.NF_ACCEPT, str(p), len(p)) 
```

据我了解，这就是允许它通过队列的线路。p 是我创建的新数据包，有效负载是原始队列数据包。

确实没有太多关于此的文档，因此我们将不胜感激。谢谢

这就是我创建数据包的方式

```
def queue_callback(i, payload)

    data = payload.get_data()
    packet = IP(data) 
```

这是我创建数据包的地方。我做了一点数据包操作，这就是我返回它的地方

```
 packet[TCP].payload = after;

    return packet; 
```

返回数据包后，我尝试使用上一个命令更新 iptables 中的 nfqueue

```
 p = modify(packet)
            print p[TCP].payload
            payload.set_verdict_modified(nfqueue.NF_ACCEPT, str(p), len(p)) 
```

修改功能是我创建一个新数据包并返回它的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T15:20:48.960

我不明白你在哪里修改数据包。通常你的数据包操作应该在回调函数中：

```
def cb(payload):
    data = payload.get_data()
    p = IP(data)
    #Here you can manipulate the packet and modify it as you want
    p[IP].src = "10.2.0.2" #change the src address for exemple

    payload.set_verdict_modified(nfqueue.NF_ACCEPT, str(p), len(p)) 
```

然后在创建队列后调用回调函数：

```
 q.set_callback(cb)
    q = nfqueue.queue()
    q.open()
    q.create_queue(0) #Same queue number of the iptables rule 
```

# jquery - 如何使用 jquery 设置永久变量

> ID：15417147
> 
> 赞同：-5
> 
> 时间：2013-03-14T18:17:58.623
> 
> 标签：jquery, mysql, wordpress

嗨，伙计们，我见过类似的听起来的问题，但他们没有回答我需要的问题我可能措辞错误，但无论如何这里就是案例

对于视觉：[http ://screencast.com/t/iLaTfNyek](http://screencast.com/t/iLaTfNyek)

用户将注册获取他的附属链接，将其输入到文本框中，然后单击保存，然后我想要显示单击此处以将其网址永久更改为该用户的附属链接的图像。它会一直保持这种状态，直到另一个用户注册并点击保存。

从逻辑的角度来看，我猜这将涉及将用户定义的 url 存储到 mysql 数据库中，然后在加载页面时加载该变量。我知道基本的 Jquery 和非常小的 mysql。而且由于在我需要一些编码帮助之前我还没有这样做。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:22:24.343

看看这篇文章：[http ://carst.me/2011/04/ajax-contact-form-with-php/](http://carst.me/2011/04/ajax-contact-form-with-php/)

应该适应你想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:22:45.670

您将无法从 JavaScript 直接写入数据库。您必须将数据发送回服务器（可能使用注册表单的提交），并且在服务器端表单处理程序中，您可以将值存储在数据库中。完整的实现超出了简单问答的范围；你需要学习一些基本的服务器端编程。

如果您想要一个仅限客户端的解决方案，您可以使用 JavaScript 将值存储在 cookie 中，以便您可以在后续页面视图中读取它。

# android - 更改标题栏导致不显示（字体问题）列表视图项

> ID：15417148
> 
> 赞同：1
> 
> 时间：2013-03-14T18:18:00.777
> 
> 标签：android

我想更改标题栏颜色。按照[此处](https://stackoverflow.com/questions/2251714/set-title-background-color)的说明进行操作 ，或者在 AndroidManifest 中使用 Notitle bar 消除标题栏会导致在列表视图中不显示文本字体（我使用“simple_list_item_checked”列表视图）。

这是此活动的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#FFFAFA"
     >
<Button
    android:id="@+id/btn"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/green_button"
    android:text="@string/show_items_kfc"
    android:onClick="onClick"/>

<ListView
    android:id="@+id/android:list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     />
</LinearLayout> 
```

（其余xml代码与上面的链接相同）

有什么解决办法吗？

谢谢！

![这里有标题栏，还有列表视图](../Images/9ebc610144931b90fce758e04c0d1f86.png) ![在这里我更改了标题栏，但为了查看列表视图项目，我需要先单击它们](../Images/c057c86224d1f539274074befe4911f5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:34:27.040

如果我遇到问题：

而不是`parent="android:Theme"`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="customTheme" parent="android:Theme"> 
        <item name="android:windowTitleBackgroundStyle">@style/WindowTitleBackground</item>   
    </style> 
</resources> 
```

使用`parent="android:Theme.Light"`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="customTheme" parent="android:Theme.Light"> 
        <item name="android:windowTitleBackgroundStyle">@style/WindowTitleBackground</item>   
    </style> 
</resources> 
```

问题是您正在覆盖具有黑色背景和白色字母的原生黑色主题。通过切换到 Light 主题，您可以实现黑色字母也有自己的白色背景！

**注意：**之后，如果自定义主题颜色（例如，标题文本颜色强制为白色）不适合您需要的 UI，您可能必须将它们修复为白色/黑色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:23:15.980

您可以为此目的使用标题栏对象...

下面的链接很好地解释了如何做到这一点......

[标题栏颜色变化问题](https://stackoverflow.com/questions/11146359/title-bar-color-change-issues)

# ember.js - Ember JS - 查看插入事件

> ID：15417149
> 
> 赞同：1
> 
> 时间：2013-03-14T18:18:02.073
> 
> 标签：ember.js, handlebars.js

我有以下 Handlebars 模板，其中包含一些在#each 中输出的视图。

```
<script type="text/x-handlebars" data-template-name="thread">
  {{#view My.ContainerView}}
      {{#each message in messages}}
          {{view My.MessageView contentBinding="message"}}
      {{/each}}
  {{/view}}
</script> 
```

我正在使用 didInsertElement 事件来捕获父视图的插入。

我知道在插入每个 My.MessageView 时会触发 didInsertElement 但我想知道的是在插入所有 My.MessageViews 时是否触发了*事件*？意味着#each 已完成。也许完全渲染的视图有类似的事件？

// Ember Noobie

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:27:53.283

关于在子视图呈现后在何处触发 jquery 事件，我遇到了类似的情况。在这个论坛的一些帮助下，我最终得到了这样的结果：

下面的视图为我 ajax 中的每个项目呈现一次（对于引导手风琴）。

```
App.AccItemView = Em.View.extend
  classNames: ['accordion-group']
  templateName: 'acc_item'
  didInsertElement: ->
    Ember.run.next this, ->
      @.$('.collapse').collapse({parent:"#accordion2"}) 
```

还有一个 afterRender 钩子，我还在自己试验。

```
didInsertElement: ->
    Ember.run.scheduleOnce 'afterRender', this, () ->
      @.$('.collapse').collapse({ parent:'#accordion2'}) 
```

一个小提琴在这里，如果它有任何用处。 [http://jsfiddle.net/nrionfx/s59fA/16/](http://jsfiddle.net/nrionfx/s59fA/16/)

# python - Google Drive SDK - 更改（）键错误

> ID：15417151
> 
> 赞同：2
> 
> 时间：2013-03-14T18:18:04.583
> 
> 标签：python, python-2.7, google-drive-api

我正在使用以下代码检查 Drive 的更改：

```
 deltaDict = drive_service.changes().list(includeDeleted = True, startChangeId = driveRC.deltaCursor).execute()
    if not str(driveRC.deltaCursor) == str(deltaDict['largestChangeId']):
        print '*** Change Detected ***'
        fileItems = deltaDict['items']
        for item in fileItems:
            isDeleted = item['deleted']
            theFile = item['file']
            fileID = theFile['id']
            fileLabels = theFile['labels']
            fileName = theFile['title'] 
            isTrashed = fileLabels['trashed'] 
```

这在一段时间内运行良好。但是，目前，我看到了错误：

```
 theFile = item['file']
    KeyError: 'file' 
```

但是查看[文档](https://google-api-client-libraries.appspot.com/documentation/drive/v2/python/latest/drive_v2.changes.html#list)在我看来它应该可以工作吗？谁能发现我错过了什么？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:24:31.347

根据文档，`item['file']`仅当文件未被删除时才存在，因此您只能在`item['deleted']`为 False 或至少将其包装在 try/except 块中时使用它。

```
for item in fileItems:
    isDeleted = item['deleted']
    try:
        theFile = item['file']
        # Rest of your code
    except KeyError:
        print "Item deleted" 
```

# java - 如何从 GPSDirectory 获取日期？

> ID：15417153
> 
> 赞同：0
> 
> 时间：2013-03-14T18:18:11.383
> 
> 标签：java, geolocation

我正在编写一个 java 程序，它从图像中收集所有元信息（GPS：纬度、经度和日期）（使用库 metadata-extractor-2.6.4）

```
 GpsDirectory gpsDir = (GpsDirectory) metadata.getDirectory(GpsDirectory.class);
 GpsDescriptor gpsDesc = new GpsDescriptor(gpsDir);
 System.out.println("Date : " + gpsDesc.getGpsTimeStampDescription()); 
```

我得到像“日期：15:45:26 UTC”这样的日期。有没有任何方法可以像 yyyy.MM.dd G 'at' HH:mm:ss z 这样的标准格式给出日期？

我试着用

```
 gpsDir.getDate(GpsDirectory.TAG_GPS_DATE_STAMP), but it returns null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:44:01.213

> 我试着用
> 
> gpsDir.getDate(GpsDirectory.TAG_GPS_DATE_STAMP)，但它返回 null

在 的[文档](http://metadata-extractor.googlecode.com/svn/trunk/Javadoc/com/drew/metadata/Directory.html#getDate%28int%29)中`getDate()`，它说：“将指定标记的值作为 java.util.Date 返回。如果该值未设置或无法转换，则返回 null。” 因此，`gpsDir.getDate(GpsDirectory.TAG_GPS_DATE_STAMP)`返回 null 可能是因为您没有调用此行：

```
gpsDir.setDate(GpsDirectory.TAG_GPS_DATE_STAMP, myDate); 
```

> 有没有任何方法可以像 yyyy.MM.dd G 'at' HH:mm:ss z 这样的标准格式给出日期？

是的，只需使用`SimpleDateFormat`. 我还没有测试过这段代码，但这应该可以工作：

```
final String OLD_FORMAT = "...";
final String NEW_FORMAT = "yyyy.MM.dd G at HH:mm:ss z";

String oldDateString = gpsDesc.getGpsTimeStampDescription();
String newDateString;

SimpleDateFormat sdf = new SimpleDateFormat(OLD_FORMAT);
Date d = sdf.parse(oldDateString);
sdf.applyPattern(NEW_FORMAT);
newDateString = sdf.format(d); 
```

# ssrs-2008 - 在 ssrs 报告中隐藏基于另一个选择的选择

> ID：15417157
> 
> 赞同：0
> 
> 时间：2013-03-14T18:18:23.637
> 
> 标签：ssrs-2008, reporting-services

我需要编写一个 SSRS 报告，根据用户选择的选项（参数）显示数据。该报告将根据付费或未付费数据运行。如果选择的是未付款数据，则报告不需要日期值（它将选择数据库中的所有未付款记录）。但是，如果用户选择付费数据，他们也应该输入一个日期范围。如果用户选择未付费数据，有没有办法隐藏或禁用日期参数？

我发现几个论坛表明这是不可能的，但想在 stackoverflow 上与这里的人们进行验证（我对这里的回复有更高的信心）。我还查看了级联参数，但这似乎不适合那个模型。

谢谢你的帮助！

# sql - SQL连接有2个条件

> ID：15417158
> 
> 赞同：0
> 
> 时间：2013-03-14T18:18:25.817
> 
> 标签：sql, database, postgresql

假设我们有一个包含记录的表“页面”

```
|ID    | Name |
|1     | Test1|
|2     | Test2| 
```

和“类别”：

```
|PAGE_ID| ID | NAME  |
|1      |  1 | Nice  | 
|1      |  2 | Supper|
|2      |  3 | Nice  | 
```

我需要获取属于“Nice”**和**“Supper”类别的所有页面，在这种情况下，我们有 1 页 => Test1。

这可以在 1 个 SELECT 和 1 个连接中完成，还是需要子选择或第二个连接？最好的办法是得到类似的结果

```
|PAGE_ID | PAGE.NAME| CATEGORY.NAME_1 | CATEGORY.NAME_2 
```

然后只需通过一个简单的位置即可找到正确的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:31:32.670

你可以这样做

```
SELECT p.ID page_id, p.Name page_name, 'Nice' Category1, 'Supper' Category2
  FROM categories c LEFT JOIN
       pages p ON c.PAGE_ID = p.ID
WHERE c.Name IN ('Nice', 'Supper')
GROUP BY p.ID, p.Name
HAVING COUNT(p.ID) = 2 
```

输出：

```
| PAGE_ID | PAGE_NAME | CATEGORY1 | CATEGORY2 |
-----------------------------------------------
|       1 |     Test1 |      Nice |    Supper | 
```

**[SQLFiddle](http://sqlfiddle.com/#!1/73cf9/9)**

*当您需要查找多于两个类别的页面而不连续链接`JOIN`s 时，此解决方案可以正常工作。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:33:15.633

```
select
    c1.page_id, p.name, c1.name, c2.name
from
    pages p
    inner join
    categories c1 on p.id = c1.page_id
    inner join
    categories c2 on p.id = c2.page_id
where
    c1.name = 'Nice' and c2.name = 'Supper' 
```

# .net - 允许 https Web API 连接

> ID：15417163
> 
> 赞同：1
> 
> 时间：2013-03-14T18:18:41.773
> 
> 标签：.net, asp.net-mvc-4, https, asp.net-web-api

如何仅启用与 mvc4 Web Api 功能的 https 连接？

**更新：**

api控制器中是否有可能进行https连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:33:48.083

其中之一对您有用吗？[http://www.sslshopper.com/iis7-redirect-http-to-https.html](http://www.sslshopper.com/iis7-redirect-http-to-https.html)

# sqlite - SQLite3：从（子查询）中选择时列名中的意外包装

> ID：15417165
> 
> 赞同：0
> 
> 时间：2013-03-14T18:18:46.543
> 
> 标签：sqlite

我正在使用`SQLite3 in .cpp`并且正在使用 a`std::map<std::string, special_variant_type>`来存储行。一切都很好，但我发现当我`SELECT`从`(subqueries)`.

比较这些查询：

```
SELECT `name` FROM `sqlite_master` WHERE `type`='table'; // works as I expected 
```

和*（选择任何一个）*：

```
// do not work as I expected but might work as expected...
SELECT `name` FROM (SELECT `name` FROM `sqlite_master` WHERE `type`='table');
SELECT [name] FROM (SELECT `name` FROM `sqlite_master` WHERE `type`='table'); 
```

**问题**：第一个带来未修饰的列名。所以，列名是`name`。对于从子查询中选择的第二个，列名保持不变。返回`backticks, square brackets [], double quotes "`......任何应该是...... IMO的名称包装器，被丢弃。

**这是预期的行为吗？**似乎不一致，要么保留包装器，要么丢弃它们......

**PS**：*我现在在配对列映射时丢弃它们，仍然......我想知道这是否正确......*

**PPS**：*它发生在 sqlite3 库和 Navicat 客户端中。*

**快速解决方案**：3.7.14 已损坏。将您的客户端更新到新版本！替换第 3 方软件中也存在此问题的 DLL（但保留备份副本以防万一）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:04:20.910

似乎是一致的：

```
$ sqlite3
SQLite version 3.7.15.2 2013-01-09 11:53:05
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> create table test(x);
sqlite> .headers on
sqlite> .mode columns
sqlite> SELECT `name` FROM `sqlite_master` WHERE `type`='table';
name
----------
test
sqlite> SELECT `name` FROM (SELECT `name` FROM `sqlite_master` WHERE `type`='table');
name
----------
test 
```

无论如何，SQLite 不保证列名。

要在结果中强制使用列名，请使用`AS`定义别名。

访问列最可靠的方法是通过索引，从而避免公式问题或重复列名。

# postgresql - null 计算结果为 false 的情况

> ID：15417167
> 
> 赞同：26
> 
> 时间：2013-03-14T18:18:50.957
> 
> 标签：postgresql

`case`今天我对这种行为感到惊讶：

```
select case when null then true else false end;
 case 
------
 f 
```

我希望它会返回`null`，因为`null`转换为布尔值的结果是 a`null`不是 a `false`：

```
select null::boolean is null;
 ?column? 
----------
 t 
```

对这种行为的基本原理有何评论？我错过了什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-07-10T22:38:03.297

使用类似的东西

```
case when p.parent_id is null then false else true end as has_parent 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-08-17T14:12:17.643

如果您（也）需要类似的东西

```
if column is null then 'value' 
```

利用：

```
COALESCE(column_name, 'replacment for null value') as column_name 
```

如果您仍然需要 case 语句，请使用：

```
case COALESCE(column_name, 'asdf') 
when 'asdf' then true
else false
end as desired_column_name 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-14T23:52:07.643

您正在考虑将`CASE`表达式`null`作为函数或运算符的输入，其中 null 输入通常会导致 null 输出：

```
regress=> SELECT 't'::boolean = NULL::boolean;
 bool 
------

(1 row) 
```

而事实上它`WHERE`在 null 处理方面表现得像一个子句：

```
craig=> SELECT 't' WHERE NULL;
 ?column? 
----------
(0 rows) 
```

在`WHERE`子句 - 和 in 中`CASE`，`NULL`来自测试表达式的结果被视为“不正确，因此为错误”。在某些方面，令人遗憾的是 SQL 标准没有将表达式`NULL`中的结果`WHERE`作为错误而不是将其视为错误，但事实就是如此。

`NULL`这是人格分裂的另一个痛苦症状， SQL 规范无法确定`NULL`是“未知/未定义值”还是“没有值”，就像`NULL`s 和聚合的可怕混乱一样。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-25T07:33:56.237

您可以使用“选择”来检查 DATA 列是否为空：

```
select 
  ID,
  case (select 1 where DATA is null)
    when 1 then 'no data'
    else data
  end
from ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T18:39:05.610

正如[PostgreSQL 文档](http://www.postgresql.org/docs/current/static/functions-conditional.html)所述：

> 如果没有 WHEN***条件***为真，则 case 表达式的值是 ELSE 子句中的***结果***。如果省略 ELSE 子句并且没有条件匹配，则结果为空。

Postgresql 不会强制转换输出，并且由于您`else`有条件，因此您将获得`false`. 下一个查询返回一个空值（因为没有`else`条件）

```
select case when null then true end; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T18:40:07.133

你写的`CASE`语句有两个分支：

一个, `when null then true`, 永远不会发生（因为`null`不等于`true`）

和分支，当常规分支`else`中没有匹配时，就会发生这种情况。`when`

例子：

```
CASE WHEN val = 1 THEN 5
     WHEN val = 2 THEN 10
     ELSE 20 /*all other values, including null*/
END 
```

# c# - 在 C# 中对泛型参数使用“params”关键字

> ID：15417174
> 
> 赞同：69
> 
> 时间：2013-03-14T18:19:14.327
> 
> 标签：c#, generics

我今天在 C# .NET 4.5 中遇到了漂亮的[`Func<T1, T2, T3, T4, T5, T6, T7, T8, T9, T10, T11, T12, T13, T14, T15, T16, TResult>`](http://msdn.microsoft.com/en-us/library/dd402862.aspx)委托。我假设 16 是一个任意的停止位置（哪些方法有超过 16 个参数？）但它让我思考：**在 C# 中是否可以指定泛型类型可以有任意数量的类型参数？**类似于方法的 params 关键字允许方法使用任意数量的参数。像这样的东西：

```
public class MyInfiniteGenericType<params T[]> { ... } 
```

在类内部，您可以通过枚举类型参数或以与方法内允许`T[index]`的相同方式使用来访问类型参数。`params`

我个人从来没有用过这个，但是 Func 代表将是一个完美的地方使用它。不需要 16 种不同类型的 Func！

所以我的问题是，这可以在 C# 中以任何方式完成吗？**如果不是，这是一个愚蠢的想法**吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-14T18:22:18.277

> 是否可以在 C# 中指定泛型类型可以具有任意数量的类型参数？

不，我担心 C# 没有类似的东西。

从根本上说`Func<T>`，`Func<T1, T2>`就 CLR 而言，它们是完全不相关的类型，没有什么`params`比指定多个类型参数更好的了。

至于它的实用性：我可以看到它可能有用的情况，但我怀疑它们非常罕见，这意味着该功能不会超过“收益/成本”阈值。（请注意，它几乎肯定也需要更改 CLR。​​）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-14T18:25:09.627

C++11 具有您本质上正在谈论的功能。他们称之为[可变参数模板](http://en.wikipedia.org/wiki/Variadic_template)。

但是，C# 泛型与 C++ 模板不太一样，并且会使得构建完全相同的东西变得困难。

在 C++ 案例中，模板在编译时扩展为使用的具体类型。在 C# 案例中，类型规范完全发生在运行时。生成的 IL 需要支持遇到的不同类型的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T18:26:08.940

不，这是做不到的。

它不像将其视为类型数组（C# 中甚至不存在的概念）那么简单。考虑`Func`- 类型参数的数量必须与委托`Invoke`方法的参数数量相同。但是程序员如何表达类型参数和常规参数之间的这种关系呢？

但是，此功能确实存在于 C++11[可变参数模板](http://en.wikipedia.org/wiki/Variadic_template)中。请注意，C++ 不允许使用数组语法访问单个类型参数 - 相反，函数通常将第一个类型参数与其余类型参数分开，并使用递归调用来解包其余部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-14T22:09:57.843

我只是发现自己很好奇，看看是否有其他人对此有用。我刚刚编写了一个通用作曲家，用于从使用 Castle Dynamic Proxy 组装的 mixin 构建复合材料。

我构建了 Composer 以支持两个 mixin，并且即将继续*“复制、粘贴和调整 (bleh)”*这两个 mixin composer 到 15 个变体，最多 17 个混合 composer（类似于`Func<T>`through `Func<T1...T16, T>`）。但后来我想，如果我能定义，那不是很好`Composer<TComposer, TIComposite, params TIMixin[]>`吗！

可悲的是，我要去复制、粘贴和调整（泛型帮助我们避免的活动）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-29T10:03:13.117

我有类似的问题。我需要`params KeyValuePair<Base, Implementation>[] pairs`，其中**Implementation是从****Base**继承的。

最初，我想过`IDictionary<Type, Type>`，但这会杀死泛型在这里的使用。

所以，我所做的是创建一个接口：

```
public interface IMapping
{
    Type Key { get; }
    Type Value { get; }
} 
```

及其实现：

```
public class Mapping<Base, Implementation> : IMapping where Base : class where Implementation : class, Base
{
    public Type Key => typeof(Base);
    public Type Value => typeof(Implementation);

} 
```

创建了一个方法：

```
public static void Initialize(params IMapping[] mappings)
{
    foreach (var mapping in mappings)
    {
        //We got our mapping, let's map
    }
} 
```

并将其用作：

```
Initialize(
    new Mapping<IMainView, MainView>(),
    new Mapping<IDashboardView, DashboardView>()
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T18:22:37.837

不，不可能有任意数量的通用参数。这可能也是一个愚蠢的想法，因为泛型类型参数不是在运行时解析的，而是在编译时解析的，所以像这样迭代它们根本不是一件显而易见的事情。

您可能还认为 Tuple<,,,,,,,,,> 可能是一个明显的地方，但是当您用完通用参数时，解决方案是，您将最后一个设置为 Tuple<,,,,>其余字段。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-07T10:06:18.630

我不知道这是否有用，但解决方法可能是：

```
Func<List<object>> 
```

您必须手动将每个元素转换为相应的数据类型。您可以迭代地使用它：

```
 Convert.ChangeType(obj, obj.GetType())//using System; 
```

你可以拥有你想要的一组变量。

# iphone - 在代码和 IB 之间组织 NSLayoutContraints

> ID：15417175
> 
> 赞同：0
> 
> 时间：2013-03-14T18:19:15.370
> 
> 标签：iphone, ios, ipad, nslayoutconstraint

我相信这一定是一个普遍的问题。我有一个 UIViewController，它有一个 UINavigation 栏和一个 ContentView（它包含 UIView 和一堆子控件。用户可以通过向左滑动来隐藏这个内容视图，然后它会在屏幕左侧显示动画。我想要导航bar 展开并填充整个宽度。不能将这两个与 Interface Builder 链接，所以必须在代码中完成。没问题：

```
 // Called from viewWillAppear
    -(void)addLayoutConstraints{
        UINavigationBar *navigationBar = self.navigationBar;
        UIView *facetView = self.facetViewController.view;
        NSDictionary *views = NSDictionaryOfVariableBindings(navigationBar, facetView);
        NSArray* constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|-[facetView]-[navigationBar]-|"
                                                                                options:NSLayoutFormatAlignAllBaseline
                                                                                metrics:nil
                                                                                  views:views];
        [self.view addConstraints:constraints];

    } 
```

被剪断的代码应该做得很好。问题是我在IB中布局了UINavigationBar，这样我就可以很方便的给它添加自定义按钮并看到它等等...问题是当我在IB中布局导航栏时，IB添加了一堆无法删除的默认约束。其中之一与我在上面代码中添加的冲突。

你如何解决这个问题？以下是我提出的 3 种可能性：

1.) 我也可以通过编程方式创建 UINavigation 栏。这样，它只有我添加到它的约束。我不想这样做，但这是一个选择

2.) 使用 IB，以某种方式删除默认约束，以免它们发生冲突。我没有办法做到这一点

3.) 在代码中，删除 IB 添加到 UINavigation 栏的默认约束，然后添加我的自定义约束。我确实看到有 removeConstraint 和 removeConstraints。我想我可以检索约束，删除它们，然后添加我自己的。再一次，有点漫长的混乱过程。

你有什么意见？你做过类似的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:49:51.950

选项3是假定的方式。[在 WWDC 2012 会议 — iOS 和 OS X 的自动布局简介](http://developer.apple.com/itunes/?destination=adc.apple.com.16351493766)中准确地谈到了这一点。

# dst - 如何获取 CLLocation 的时区名称

> ID：15417176
> 
> 赞同：2
> 
> 时间：2013-03-14T18:19:20.673
> 
> 标签：dst, clgeocoder, nstimezone

我有一个使用 CLGeocoder 从地址字符串转发地标的应用程序。CLPlacemark 响应包含一个 CLLocation，它为我提供 GPS 坐标。

创建 NSTimeZone 的唯一方法似乎是使用正确的时区名称。需要指出的是，我没有使用设备的当前位置，因此 [NSTimeZone localTimeZone] 对我不起作用。

有没有办法获取 CLLocation 的时区名称，以便我可以正确创建 NSTimeZone？

注意：我一直在使用 timeZoneForSecondsFromGMT，但它从不包含正确的 DST 数据，所以它对我没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-21T16:47:11.500

您应该使用[https://github.com/Alterplay/APTimeZones](https://github.com/Alterplay/APTimeZones)从 CLLocation 获取 NSTimeZone。它也适用于 CLGeocoder。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T05:12:40.473

由于 iOS9 应该可以直接使用`CLGeocoder`这里指定的：[https ://developer.apple.com/library/prerelease/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS9.html](https://developer.apple.com/library/prerelease/ios/releasenotes/General/WhatsNewIniOS/Articles/iOS9.html)

> MapKit 和 CLGeocoder 的搜索结果可以为结果提供时区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-18T07:05:37.737

我发现了一种使用 CLGeocoder 的[有趣方法](https://stackoverflow.com/questions/9188871/how-to-identify-timezone-from-longitude-and-latitude-in-ios/27054583#27054583)，我将其放入 CLLocation 上的一个类别中。有趣的部分如下所示：

```
-(void)timeZoneWithBlock:(void (^)(NSTimeZone *timezone))block {        
    [[[CLGeocoder alloc] init] reverseGeocodeLocation:self completionHandler:^(NSArray *placemarks, NSError *error) {           
        NSTimeZone *timezone = nil;

        if (error == nil && [placemarks count] > 0) {               
            CLPlacemark *placeMark = [placemarks firstObject];
            NSString *desc = [placeMark description];

            NSRegularExpression  *regex  = [NSRegularExpression regularExpressionWithPattern:@"identifier = \"([a-z]*\\/[a-z]*_*[a-z]*)\"" options:NSRegularExpressionCaseInsensitive error:nil];
            NSTextCheckingResult *result = [regex firstMatchInString:desc options:0 range:NSMakeRange(0, [desc length])];

            NSString *timezoneString = [desc substringWithRange:[result rangeAtIndex:1]];

            timezone = [NSTimeZone timeZoneWithName:timezoneString];
        }
        block(timezone);            
    }];
} 
```

用法是这样的：

```
CLLocation *myLocation = ...
[myLocation timeZoneWithBlock:^(NSTimeZone *timezone) {
    if (timezone != nil) {
        // do something with timezone
    } else {
        // error determining timezone
    }
}]; 
```

尽管需要网络连接和异步工作，但我发现这是获取某个位置的时区的最可靠方法。

**多年后编辑**

自从在 iOS9 中将 timeZone 属性添加到 CLPlacemark 以来，这个答案并没有很好地老化（感谢 Ortwin Genz）。这是一个更新的类别方法：

```
-(void)timeZoneWithBlock:(void (^)(NSTimeZone *timezone))block {

    [[[CLGeocoder alloc] init] reverseGeocodeLocation:self completionHandler:^(NSArray *placemarks, NSError *error) {

        NSTimeZone *timeZone = nil;

        if (error == nil && [placemarks count] > 0) {
            CLPlacemark *placeMark = [placemarks firstObject];
            timeZone = placeMark.timeZone;
        }

        block(timeZone);

    }];

} 
```

# python - 在python中比较两个字符串

> ID：15417178
> 
> 赞同：0
> 
> 时间：2013-03-14T18:19:29.087
> 
> 标签：python, string, compare, difflib

好吧，我需要比较两个字符串，或者至少找到从一个字符串到另一个字符串的字符序列。这两个字符串包含`md5`我必须比较的文件并说出我是否找到匹配项。

我当前的代码是：

```
def comparemd5():
    origmd5=getreferrerurl()
    dlmd5=md5_for_file(file_name)
    print "original md5 is",origmd5
    print "downloader file md5 is",dlmd5
    s = difflib.SequenceMatcher(None, origmd5, dlmd5)
    print "ratio is:",s.ratio() 
```

我得到的输出是：

```
original md5 is ['0430f244a18146a0815aa1dd4012db46', '0430f244a18146a0815aa1dd40
12db46', '59739CCDA2F15D5AC16DB6695CAE3378']

downloader file md5 is 59739ccda2f15d5ac16db6695cae3378

ratio is : 0.0 
```

因此！有一个匹配项`dlmd5`，`origmd5`但不知何故找不到它......我在某处做错了什么......请帮帮我：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:26:07.047

基本上，你想要 idom `if test_string in list_of_strings`。看起来你不需要区分大小写，所以你可能想要

```
if test_string.lower() in (s.lower() for s in list_of_strings) 
```

在你的情况下：

```
>>> originals = ['0430f244a18146a0815aa1dd4012db46', '0430f244a18146a0815aa1dd40 12db46', '59739CCDA2F15D5AC16DB6695CAE3378']
>>> test = '59739ccda2f15d5ac16db6695cae3378'
>>> if test.lower() in (s.lower() for s in originals):
...    print '%s is match, yeih!' % test
... 
59739ccda2f15d5ac16db6695cae3378 is match, yeih! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:29:03.533

看起来您遇到了问题，因为字母的大小写不匹配。可能想尝试：

```
def comparemd5():
    origmd5=[item.lower() for item in getreferrerurl()]
    dlmd5=md5_for_file(file_name)
    print "original md5 is",origmd5
    print "downloader file md5 is",dlmd5
    s = difflib.SequenceMatcher(None, origmd5, dlmd5)
    print "ratio is:",s.ratio() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:31:14.640

给定输入：

> 原始 md5 是 ['0430f244a18146a0815aa1dd4012db46', '0430f244a18146a0815aa1dd40 12db46', '59739CCDA2F15D5AC16DB6695CAE3378']
> 
> 下载器文件 md5 为 59739ccda2f15d5ac16db6695cae3378

你有两个问题。

首先，第一个不仅仅是一个 MD5，而是一个 MD5 和另外两个东西。

要解决这个问题：如果您知道它`origmd5`总是采用这种格式，只需使用`origmd5[2]`而不是`origmd5`. 如果您不知道是什么`origmd5`，除了其中的一件事是实际的 MD5，您将不得不与所有元素进行比较。

其次，实际的 MD5 值都是表示相同二进制数据的十六进制字符串，但它们是不同的十六进制字符串（因为一个是大写的，另一个是小写的）。您可以通过只进行不区分大小写的比较来解决此问题，但是将它们都[解开](http://docs.python.org/2/library/binascii.html#binascii.unhexlify)并比较二进制值可能更可靠。

事实上，如果您正确地复制和粘贴了输出，那么这些十六进制字符串中至少有一个在其中间有一个空格，因此您实际上需要在十六进制对之间使用可选空格来取消十六进制字符串。AFAIK，没有执行此操作的 stdlib 函数，但您可以一步自己编写：

```
def unhexlify(s):
    return binascii.unhexlify(s.replace(' ', '')) 
```

同时，我不确定您为什么要尝试使用`difflib.SequenceMatcher`。两个略有不同的 MD5 哈希指的是完全不同的原始来源；这就是 MD5 和加密哈希函数的全部意义所在。没有 95% 的匹配。要么匹配，要么不匹配。

因此，如果您知道第三个值`origmd5`是您想要的值，只需执行以下操作：

```
s = unhexlify(origmd5[2]) == unhexlify(dlmd5) 
```

否则，请执行以下操作：

```
s = any(unhexlify(origthingy) == unhexlify(dlmd5) for origthingy in origmd5) 
```

或者，将其翻转以使其更简单：

```
s = unhexlify(dlmd5) in map(unhexlify, origthingy) 
```

或者任何你觉得最易读的等价物。

# javascript - 在 trigger('click') 完成触发后执行操作？

> ID：15417180
> 
> 赞同：0
> 
> 时间：2013-03-14T18:19:40.057
> 
> 标签：javascript, jquery, sharepoint

我管理一个 SharePoint 网站，并且对底层代码的访问权限有限；但是，我可以在页面加载后通过 JavaScript 进行操作。一直在使用 jQuery 和 SPServices。

我有一个要添加到表单的自定义按钮；它覆盖了页面上的标准“保存”按钮，因此我可以在保存/关闭之前执行一些其他 ajax 内容。这工作正常：

```
$('#the_save_button').hide();

$("#my_custom_save_button").click(function() {
    // do some custom stuff first
    $('#the_save_button').trigger('click'); // 
    window.close();
} 
```

该项目保存和`window.close()`火灾。伟大的！但是，现在，我宁愿不关闭窗口而是设置`window.location.href`... 但是，当我这样做时，页面会在完成触发之前被重定向，*并且*`trigger('click')`我的项目没有保存：

```
$('#the_save_button').hide();

$("#my_custom_save_button").click(function() {
    // do some custom stuff first
    $('#the_save_button').trigger('click'); // 
    window.location.href = "/my/new/url.aspx";
} 
```

我试过使用`window.setTimout`，但`$('#the_save_button').trigger('click')`它本身有一个内置的重定向......

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:23:07.133

是的，只需让您的点击处理程序返回一个延迟对象并使用它来决定何时重定向。

```
$("#the_save_button").click(function(e){
    e.preventDefault();
    return $.ajax({...});
}); 
```

现在你可以这样做：

```
$("#my_custom_save_button").click(function() {
    // do some custom stuff first
    $('#the_save_button').triggerHandler('click').done(function(){
        window.location.href = "/my/new/url.aspx";
    });

}); 
```

注意：在这种情况下使用`triggerHandler`而不是很重要，允许您使用返回的对象。`trigger``triggerHandler``jqXHR`

# c# - 从文本文件中删除停用词

> ID：15417181
> 
> 赞同：0
> 
> 时间：2013-03-14T18:19:43.393
> 
> 标签：c#, regex, c#-4.0

我想从我的文本文件中删除停用词，为此我编写了以下代码

```
 TextWriter tw = new StreamWriter("D:\\output.txt");
 private void button1_Click(object sender, EventArgs e)
        {
            StreamReader reader = new StreamReader("D:\\input1.txt");
            string line;
            while ((line = reader.ReadLine()) != null)
            {
                string[] parts = line.Split(' ');
                string[] stopWord = new string[] { "is", "are", "am","could","will" };
                foreach (string word in stopWord)
                {
                    line = line.Replace(word, "");
                    tw.Write("+"+line);
                }
                tw.Write("\r\n");
            } 
```

但它不会在**输出文件**中显示结果，并且输出文件保持为空。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:35:04.950

正则表达式可能非常适合这项工作：

```
 Regex replacer = new Regex("\b(?:is|are|am|could|will)\b");
        using (TextWriter writer = new StreamWriter("C:\\output.txt"))
        {
            using (StreamReader reader = new StreamReader("C:\\input.txt"))
            {
                while (!reader.EndOfStream)
                {
                    string line = reader.ReadLine();
                    replacer.Replace(line, "");
                    writer.WriteLine(line);
                }
            }
            writer.Flush();
        } 
```

此方法只会用空格替换单词，如果停用词是另一个单词的一部分，则不会对它们执行任何操作。

祝你的任务好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:29:20.740

以下对我来说按预期工作。但是，这不是一个好方法，因为它会删除停用词，即使它们是更大单词的一部分。此外，它不会清除已删除单词之间的多余空格。

```
string[] stopWord = new string[] { "is", "are", "am","could","will" };

TextWriter writer = new StreamWriter("C:\\output.txt");
StreamReader reader = new StreamReader("C:\\input.txt");

string line;
while ((line = reader.ReadLine()) != null)
{
    foreach (string word in stopWord)
    {
        line = line.Replace(word, "");
    }
    writer.WriteLine(line);
}
reader.Close();
writer.Close(); 
```

此外，我建议`using`您在创建流时使用语句，以确保及时关闭文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T18:30:28.943

您应该将 IO 对象包装在 using 语句中，以便正确处理它们。

```
using (TextWriter tw = new TextWrite("D:\\output.txt"))
{
    using (StreamReader reader = new StreamReader("D:\\input1.txt"))
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {
            string[] parts = line.Split(' ');
            string[] stopWord = new string[] { "is", "are", "am","could","will" };
            foreach (string word in stopWord)
            {
                line = line.Replace(word, "");
                tw.Write("+"+line);
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T18:28:41.540

尝试 wrap`StreamWriter`和`StreamReader`in`using() {}`子句。

```
using (TextWriter tw = new StreamWriter(@"D:\output.txt")
{
  ...
} 
```

您可能还想`tw.Flush()`在最后打电话。

# eclipse - Gradle 为本机依赖项生成错误的 Eclipse 类路径

> ID：15417183
> 
> 赞同：2
> 
> 时间：2013-03-14T18:19:44.820
> 
> 标签：eclipse, gradle, sigar

我有一个依赖于 Sigar 库的 Gradle 项目，它使用本机库（作为其传递依赖项）。这是依赖树的相关片段：

```
+--- sigar:sigar:2.0
|    +--- libsigar-amd64-linux:libsigar-amd64-linux:1.0
|    +--- libsigar-ia64-linux:libsigar-ia64-linux:1.0
|    +--- libsigar-x86-linux:libsigar-x86-linux:1.0
|    +--- sigar-amd64-winnt:sigar-amd64-winnt:1.0
|    \--- sigar-x86-winnt:sigar-x86-winnt:1.0 
```

不幸的是，Gradle 似乎没有认识到这些是本机库，并将它们添加到 eclipse 类路径中，就像它们是常规库一样`jar`。这会导致 Eclipse 中的错误：

```
Archive for required library: '/home/ghik/.gradle/caches/artifacts-23/filestore/libsigar-x86-linux/libsigar-x86-linux/1.0/so/c9af548445db750ad46e8beb3e77c58ff2315f3f/libsigar-x86-linux-1.0.so' in project 'myproject' cannot be read or is not a valid ZIP file   
Archive for required library: '/home/ghik/.gradle/caches/artifacts-23/filestore/libsigar-ia64-linux/libsigar-ia64-linux/1.0/so/19d7aa37a3c40b6812a80eca518c6b81fd5c8416/libsigar-ia64-linux-1.0.so' in project 'myproject' cannot be read or is not a valid ZIP file    
Archive for required library: '/home/ghik/.gradle/caches/artifacts-23/filestore/libsigar-amd64-linux/libsigar-amd64-linux/1.0/so/9481ceafe276c92327f8f3389c5e1c791eac6a81/libsigar-amd64-linux-1.0.so' in project 'myproject' cannot be read or is not a valid ZIP file 
Archive for required library: '/home/ghik/.gradle/caches/artifacts-23/filestore/sigar-x86-winnt/sigar-x86-winnt/1.0/lib/1a608efcfd2e8358862b7dce02892fa98d63c97b/sigar-x86-winnt-1.0.lib' in project 'myproject' cannot be read or is not a valid ZIP file  myproject       
Archive for required library: '/home/ghik/.gradle/caches/artifacts-23/filestore/sigar-x86-winnt/sigar-x86-winnt/1.0/dll/14dfa28510c62eee00812e8d231f72ec69ac45b9/sigar-x86-winnt-1.0.dll' in project 'myproject' cannot be read or is not a valid ZIP file  myproject       
Archive for required library: '/home/ghik/.gradle/caches/artifacts-23/filestore/sigar-amd64-winnt/sigar-amd64-winnt/1.0/dll/b326449439e280c723ac45ada770a8d65a1272cc/sigar-amd64-winnt-1.0.dll' in project 'myproject' cannot be read or is not a valid ZIP file    myproject       
The project cannot be built until build path errors are resolved    myproject 
```

我怎样才能解决这个问题？

**编辑：**

我试图从 Eclipse 类路径中排除本机依赖项，​​如下所示：

```
configurations {
    natives
    compile.extendsFrom(natives)
}

eclipse {
    classpath {
        minusConfigurations += configurations.natives
        ...
    }
}

dependencies {
    ...

    compile("sigar:sigar:2.0")
    natives("libsigar-amd64-linux:libsigar-amd64-linux:1.0")
    natives("libsigar-ia64-linux:libsigar-ia64-linux:1.0")
    natives("libsigar-x86-linux:libsigar-x86-linux:1.0")
    natives("sigar-amd64-winnt:sigar-amd64-winnt:1.0")
    natives("sigar-x86-winnt:sigar-x86-winnt:1.0")

    ...
} 
```

这仅部分有效。Gradle 不再向 Eclipse 类路径添加`dll`和文件，但仍添加文件：`so``lib`

```
Archive for required library: '/home/ghik/.gradle/caches/artifacts-23/filestore/sigar-x86-winnt/sigar-x86-winnt/1.0/lib/1a608efcfd2e8358862b7dce02892fa98d63c97b/sigar-x86-winnt-1.0.lib' in project 'myproject' cannot be read or is not a valid ZIP file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-11T17:35:27.437

我对 Gradle 生成的 Eclipse 构建路径有同样的问题，但我必须通过`lib`以下方式调整（部分..文件不被尊重？）解决方案：

*   较新的 Groovy 版本需要适应从`minusConfigurations += configurations.natives`到`minusConfigurations += [configurations.natives]`
*   我有一个**安装库的普通目录，而不是存储库**。它对我有用`native files`，而不是在该部分`natives`内使用（仅在存储库中搜索）`dependencies`

`build.gradle`摘录这两个变化：

```
apply plugin: 'application'
apply plugin: 'eclipse'
apply plugin: 'java' 
```

..

```
configurations{
    natives
    compile.extendsFrom(natives)
  }

sourceSets.main.compileClasspath += [configurations.provided]
eclipse {
    classpath {
      minusConfigurations += [configurations.natives]
    }
  }

dependencies {
    native files('D:/lib/nativeDLL.dll')
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-06T11:33:39.020

我对 eclipse 和 gradle 4.3 也有类似的问题。终于找到解决办法了，想和大家分享一下：

```
eclipse {
    classpath {
       file {
            whenMerged { classpath ->
                java.util.List wanted = new java.util.ArrayList()
                def entries = classpath.getEntries()
                entries.each {
                    if (it.path.endsWith('.so')) {
                        println('Removing native library: ' + it.path + ' from eclipse classpath (unreadable to eclipse)')
                    } else {
                        wanted.add(it)
                    }
                }
                classpath.setEntries(wanted)
             }
        }
    }
} 
```

# report - 如何安排 TFS 查询的每晚电子邮件

> ID：15417188
> 
> 赞同：3
> 
> 时间：2013-03-14T18:20:14.517
> 
> 标签：report

我有一个我写的 TFS 2010 查询。从门户网站我可以运行查询，然后从工具菜单中选择“将所有工作项作为列表发送电子邮件”。这封电子邮件是完美的。有没有办法让这个计划每天运行？

我需要把它作为 SSRS 的报告吗？我可以将查询转换为报告吗？

# php - Imagecreate/GD 问题（PHP）

> ID：15417191
> 
> 赞同：3
> 
> 时间：2013-03-14T18:20:21.163
> 
> 标签：php, gd

我正在使用以下功能，我从用户发布的 php 站点稍微调整了该功能。

```
function createImgText ($string=NULL, $fontsize=0, $marginX=0, $imgH=0, $fontfile=NULL, $imgColorHex=NULL, $txtColorHex=NULL){
    if($string != ""){
    //header("Content-type: image/png");    
    //
    $spacing = 0;

    $line = array("linespacing" => $spacing);

    if (file_exists($fontfile)) $box = @imageftbbox($fontsize,0,$fontfile,$string,$line) or die('Box command error');
    else die("ERROR - font");

    $tw=$box[4]-$box[0]; //image width
    $marginY = $imgH - (($imgH - $fontsize) / 2);
    $imgWidth = $tw + (2*$marginX);
    $im = ImageCreate($imgWidth, $imgH);
    $int = hexdec($imgColorHex);
    $arr = array("red" => 0xFF & ($int >> 0x10),
           "green" => 0xFF & ($int >> 0x8),
           "blue" => 0xFF & $int);
    $black = ImageColorAllocate($im, $arr["red"], $arr["green"], $arr["blue"]);
    $int = hexdec($txtColorHex);
    $arr = array("red" => 0xFF & ($int >> 0x10),
           "green" => 0xFF & ($int >> 0x8),
           "blue" => 0xFF & $int);
    $white = ImageColorAllocate($im, $arr["red"], $arr["green"], $arr["blue"]);
    ImageFtText($im, $fontsize, 0, $marginX, $marginY, $white, $fontfile, $string, array());
    ImagePng($im);
    ImageDestroy($im);
}else{
    echo "ERROR - no string";
}
} 
```

我在我的 index.php 中使用以下内容

```
 error_reporting(-1); 
  ini_set('display_errors', true); 
```

以及输出图像的页面。

我没有收到任何错误。:( 但是，取消注释标题部分会导致 Firefox 说“图像包含错误并且不会显示”。

图像 php 文件：

```
<?php
 error_reporting(-1); 
ini_set('display_errors', true);
$code = $sys->core->generateRandomString($sys->settings['captchal']);
echo 'Debug: Using string: ' . $code . ' font: fonts/' . $sys->settings['captchaf'] . '<br>';

$sys->core->createImgText($code, 9, 10, 18, 'fonts/' . $sys->settings['captchaf'], "000000", "FFFFFF");
?> 
```

它说：

```
Debug: Using string: nrcujP font: fonts/airstream.ttf
�PNG  IHDR0�H@�PLTE������������???___uV#�pIDAT�c` �E�D�x���*�s�bP     �@fR�SVV``�F�0t4UTu6uuh3rl@�+4h3k6 �),6F�!�P�LHPTD8� �c�p�,�8�( �8�Q+|�Q��IEND�B`� 
```

我有一个页面

```
 <?php echo phpinfo(); ?> 
```

它说启用了 GD 和所有插件，包括 TTF 支持。以前有人遇到过类似的问题吗？我尝试了其他方法，但似乎在第二个 ImageColorAllocate 上失败了。当我搜索时，我在谷歌上没有看到任何提及它。假设在调用时渲染图像然后自行销毁，而不占用文件空间。

* * *

在 NXT 的帮助下解决了问题。我之前有一个空格

```
 <?php 
```

我忽略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:30:27.230

```
imagepng($im,"new.png",0);
imagedestroy($im); 
```

试试这个我希望它会工作........ [https://stackoverflow.com/questions/13619834/upload-png-image-with-transparency-code-but-it-not-working-and-also -showing-the/13621103#13621103-](https://stackoverflow.com/questions/13619834/upload-png-image-with-transparency-code-but-it-not-working-and-also-showing-the/13621103#13621103-) >此链接符合您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:18:19.783

我使用了您的代码并稍作更改，并且效果很好。

我的改变只有：

*   用我周围的其他一些 .ttf 替换字体名称
*   对验证码文本进行硬编码
*   删除了带有调试文本的行（它不能在那里，因为它会破坏图像）
*   调整了函数调用
*   取消注释 header() 行

如果仍然有问题，请确保只输出图像内容并直接在任何可用的文本编辑器中打开脚本 URL 以查看源代码。还要检查输出中是否没有任何前导和尾随空格。

```
function createImgText($string=NULL, $fontsize=0, $marginX=0, $imgH=0, $fontfile=NULL, $imgColorHex=NULL, $txtColorHex=NULL){
    if($string != ""){
    header("Content-type: image/png");    

    $spacing = 0;

    $line = array("linespacing" => $spacing);

    if (file_exists($fontfile)) $box = @imageftbbox($fontsize,0,$fontfile,$string,$line) or die('Box command error');
    else die("ERROR - font");

    $tw=$box[4]-$box[0]; //image width
    $marginY = $imgH - (($imgH - $fontsize) / 2);
    $imgWidth = $tw + (2*$marginX);
    $im = ImageCreate($imgWidth, $imgH);
    $int = hexdec($imgColorHex);
    $arr = array("red" => 0xFF & ($int >> 0x10),
       "green" => 0xFF & ($int >> 0x8),
       "blue" => 0xFF & $int);
    $black = ImageColorAllocate($im, $arr["red"], $arr["green"], $arr["blue"]);
    $int = hexdec($txtColorHex);
    $arr = array("red" => 0xFF & ($int >> 0x10),
       "green" => 0xFF & ($int >> 0x8),
       "blue" => 0xFF & $int);
    $white = ImageColorAllocate($im, $arr["red"], $arr["green"], $arr["blue"]);
    ImageFtText($im, $fontsize, 0, $marginX, $marginY, $white, $fontfile, $string, array());
    ImagePng($im);
    ImageDestroy($im);
}else{
    echo "ERROR - no string";
}
}

error_reporting(-1); 
ini_set('display_errors', true);
$code = 'abcdef';

createImgText($code, 9, 10, 18, 'MyFont.ttf', "000000", "FFFFFF"); 
```

# javascript - event.target.id 在 Firefox 中不起作用

> ID：15417203
> 
> 赞同：0
> 
> 时间：2013-03-14T18:20:50.727
> 
> 标签：javascript, jquery, firefox, cross-browser

每次用户将鼠标悬停在我的一个页面按钮上时，我都会运行一个脚本。这在 safari 和 chrome 中效果很好，但在 Firefox 中 event.target.id 被返回 null 所以我的脚本的其余部分无法运行。起初我认为这是 mouseenter 的问题，但我向我的函数添加了一个警报，它被触发了，所以它被触发了。控制台将 event.target.id 显示为空，这就是问题所在。

有人有解决办法吗？这会获取用户悬停在上面的按钮的 id，并将页面的主体设置为与按钮 id 具有相同类的隐藏 div 的 html。

```
$(".label").mouseenter(function(){
   var hover=(event.target.id);
   $('.centercover').fadeIn(400)
   var filler= $('.'+hover).html();
   ....rest of script for fadding in new content...
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:22:20.863

```
$(".label").on('mouseenter', function(event){ //pass the parameter
   var hover = event.target.id;
   $('.centercover').fadeIn(400)
   var filler = $('.' + hover).html();

}); 
```

# sql - 如何在 SQL Server 2008 中的 set insert 期间创建 int ID

> ID：15417205
> 
> 赞同：0
> 
> 时间：2013-03-14T18:20:52.157
> 
> 标签：sql, sql-server-2008, sql-insert, table-valued-parameters

我正在探索在存储过程中使用表值参数在对数据库的一次调用中进行多次插入。

表值参数包含的信息或多或少反映了我要插入的表的定义。它只缺少 ID 列。

如果我有下表定义：

```
Create Table Product
(
     ProductID int,
     ProductName varchar(100),
     ProductDesc varchar(4000),
     ProductCost int
) 
```

类型定义：

```
Create Type ProductTable as Table
(
    ProductName varchar(100),
    ProductDesc varchar(4000),
    ProductCost int
) 
```

和存储过程定义：

```
Create Procedure usp_Product_Insert
    @Products ProductTable READONLY
AS
    INSERT Product
    (
        ProductID,
        ProductName,
        ProductDesc,
        ProductCost
    )
    SELECT
        (Select ISNULL(Max(ProductID),0) + 1 From Product),
        P.ProductName,
        P.ProductDesc,
        P.ProductCost
    FROM
        @Products P 
```

如果我的参数中有多个数据集，如何更改必须插入唯一 ID 的内容？

现在，如果我运行以下语句

```
Truncate Table Product
Declare @Products ProductTable
Insert @Products Values ('Playstation', 'Game Console', 300)
exec usp_Product_InsertUpdate_WithOutput @Products 
```

通过表中没有以前记录的存储过程，我得到

```
ProductID   ProductName ProductDesc ProductCost
1           Playstation     Game Console    300 
```

但如果我运行不止一张唱片

```
Truncate Table Product
Declare @Products ProductTable
Insert @Products Values
('Playstation', 'Game Console', 300),
('Xbox', 'Game Console', 200),
('Wii', 'Game Console', 150)
exec usp_Product_InsertUpdate_WithOutput @Products 
```

我明白了

```
ProductID   ProductDesc     ProductDesc ProductCost
1           Playstation     Game Console    300
1           Xbox            Game Console    200
1           Wii             Game Console    150 
```

我想看到的是

```
ProductID   ProductDesc     ProductDesc ProductCost
1           Playstation     Game Console    300
2           Xbox            Game Console    200
3           Wii             Game Console    150 
```

**在不使用身份的情况下如何有效地完成此任务？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:50:49.573

你不能。甚至不应该尝试。

业务定义业务键。

开发人员定义[代理键](http://en.wikipedia.org/wiki/Surrogate_key)。

你想要的是一个代理键，所以使用一个`IDENTITY`列。

如果您的企业定义了代理键，那么您的职责是教他们不应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:34:28.977

经过进一步搜索，我发现了[hiss056](https://stackoverflow.com/users/1369235/hims056)提供的[这种方法](https://stackoverflow.com/questions/11088430/sql-select-insert-into-generate-unique-id)：

存储过程将被重写如下：

```
Create Procedure usp_Product_Insert
    @Products ProductTable READONLY
AS
    INSERT Product
    (
        ProductID,
        ProductName,
        ProductDesc,
        ProductCost
    )
    SELECT
        (ROW_NUMBER( ) OVER ( ORDER BY ProductID ASC )) + (Select ISNULL(Max(ProductID),0) From Product),
        P.ProductName,
        P.ProductDesc,
        P.ProductCost
    FROM
        @Products P 
```

# php - PEAR Crypt_Blowfish 加密 MP3 文件时出错

> ID：15417207
> 
> 赞同：2
> 
> 时间：2013-03-14T18:20:55.903
> 
> 标签：php, performance, performance-testing

所以，叫我疯子（我知道你会的），但这只是为了学习目的。我正在使用 php 进行一些探索，并在逐行读取 mp3 文件时使用 PEAR Crypt_Blowfish。这是非常服务器密集型的，我看到了奇怪的输出。我想知道是否有人知道为什么：

```
<?php
include_once '/home/.../php/Crypt/Blowfish.php';

$bf = new Crypt_Blowfish('super');

$handle = @fopen("Judith_full.mp3", "r");
if ($handle) {
    while (($buffer = fgets($handle, 1024)) !== false) {
        echo $buffer;
        echo '<br><br>ENCRYPTED: <br>';
        echo $bf->encrypt($buffer).'<br><br>';
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
} 
```

它只是向我显示该行，然后对该行进行加密...但是在页面加载的部分过程中，我看到了带下划线的文本：

```
....juMbLEDteXt_thenStartsUnderlinedJuMbLEDteXt_... // can not paste, cause it's encrypted garbage. 
```

该页面永远不会完全加载，只是挂起。同样在下划线之后，它开始忽略`<br>`那里的 's。

感谢任何花时间的人。

# jquery - 表格行高值与 Firefox 中的实际显示高度不同

> ID：15417208
> 
> 赞同：2
> 
> 时间：2013-03-14T18:21:10.740
> 
> 标签：jquery, html, css, firefox, html-table

我在这里遇到了一个有趣的问题，就是我用来显示消息的表格中的行高。要求规定，如果有超过 7 条消息，则`div`包含表格的整体应调整到 7 条消息的高度，并打开滚动条，以便查看其余消息。

在 JS 代码 (JQuery) 中，一旦页面准备就绪，它首先将“偶数”类应用于表中的每个偶数行。

**JS**

```
 var $table = $('#messageTable');
 $('tr:even', $table).addClass('even'); 
```

**风格**

```
.even {background: none repeat scroll 0 0 #F8F8F8;} 
```

该处理和应用的类是奇数行和偶数行之间的唯一区别。

完成后，它会检查表中的行数，如果超过 7 行，它会捕获前 7 行中每一行的高度，将它们加在一起，将父 div 的高度设置为该值, 并将`scrolling`类添加到该 div。

**JS**

```
var $allRows = $('#messageTable tr');

var $totalRowsHeight = 0;

if ($allRows.length > 7) {
    for (var i = 0; i < 7; i++) {
        $totalRowsHeight += $('#messageTable tr:eq(' + i + ')').outerHeight();
    }

    $('#messageTable ').closest('.msgSection').css({'height': $totalRowsHeight +'px'}).addClass('scrolling');
} 
```

**风格**

```
.scrolling {overflow: auto;} 
```

这是运行完所有这些后生成的 HTML 结构：

```
<div class="msgSection scrolling" style="height: 266px">
    <table summary="This table shows your messages" id="messageTable">
        <tbody>
            <tr>
                <td class="messageDateWidth">03/14/2013</td>
                <td class="messageWidth">
                    <a name="message_01" href="TARGET_URL_HERE">D000012348</a>
                </td>
            </tr>
            <tr class="even">
                <td class="messageDateWidth">03/13/2013</td>
                <td class="messageWidth">
                    <a name="message_02" href="TARGET_URL_HERE">C000012347</a>
                </td>
            </tr>
            <tr>
                <td class="messageDateWidth">03/12/2013</td>
                <td class="messageWidth">
                    <a name="message_03" href="TARGET_URL_HERE">B000012346</a>
                </td>
            </tr>
            <tr class="even">
                <td class="messageDateWidth">03/12/2013</td>
                <td class="messageWidth">
                    <a name="message_04" href="TARGET_URL_HERE">A000012345</a>
                </td>
            </tr>

            . . .

        </tbody>
    </table>
</div> 
```

所以，一切正常。. . JS 和 CSS 做他们应该做的事。Firefox 除外（适用于 IE、Chrome 和 Safari）。

在 Firefox 中，该`.outerHeight()`函数为每一行返回一个值“38”。 `.height()`并`.outerHeight(true)`返回“38”。当您检查`<tr>`Firebug 中的标签时，它会说它们是 38 像素高。当您乘以 7 时，您会得到“266”（参见`style="height: 266px"`上面的 HTML 中的）。

问题是`<div>`4 像素太长了。

在做了一些调查之后，我发现 Firefox 将所有奇数行渲染为**37**像素高（尽管所有报告都报告它们是 38）。由于前 7 行中有 4 个奇数行，因此计算的高度比实际的行集高 4 个像素。

我尝试将奇数行设置为“偶数”样式（通过 Firebug 手动设置，并通过控制台以编程方式设置，并且在应用样式时，高度保持在相同的 37 像素（并且仍报告为 38）。

我被正式难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:07:14.400

Do you have a border-collapse property applied? if so, it would "lose" a pixel between rows if you have a 1px border applied. It's not considered in the inner height of the table cell, which could be why the heights vary. Add to that the potential of sub-pixel rendering that Firefox has capability of and it could very well be trying to display a height of 47.44... and it comes out as alternating 48/47\. see: [Sub-Pixel Problems...](http://ejohn.org/blog/sub-pixel-problems-in-css/)

That really isn't an answer for you if you don't have borders on your table cells. Sorry.

# assembly - 立即数（方括号）和索引寄存器 + 堆栈段中具有 2x dw 的文件

> ID：15417211
> 
> 赞同：1
> 
> 时间：2013-03-14T18:21:24.450
> 
> 标签：assembly, x86, disassembly, memory-segmentation

我对汇编很陌生，并尝试通过了解一个旧的 16 位 dos 游戏的反汇编来学习它（由 IDA Free 生成的反汇编）。

我在该代码中读到了两件事，我想，猜到了它的作用。不过我不确定我是否正确，所以我想检查一下（顺便说一句，这里只是缩短了示例代码）：

**1)**

```
lds di, some_adress ; (eg: ds = 0012h, di=BAF6h afterwards)
xor cx, cx
mov [di], cx ; <- what segment is used here 
```

我猜它使用`ds`一些神奇的默认段来应用偏移量并计算物理地址。

**2)**

```
assume ds:dseg (e.g. 0012h)
mov ax, 0BAF6h ; <- why is the leading 0 here btw
push ds
push ax 
```

所以我的堆栈看起来像：

```
...  ...
02   ds (0012)
00   ax (BAF6)  <- sp 
```

然后：

```
mox bx, sp
les di, ss:[bx] 
```

我猜寄存器现在是`es`=`0012h`和`di`= `BAF6h`，这在查看其余游戏代码时是有意义的，但由于我的堆栈看起来像`BAF6 0012 ...`，这意味着第一个单词被放入`di`，而第二个单词被放入`es`。这让我有点困惑，因为它有点颠倒了这两个词的顺序（从我的角度来看）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:28:18.583

1.  `ds``[bp+immediate]`是除,`[bp+si+immediate]`和之外的所有其他 16 位内存寻址模式的默认段`[bp+di+immediate]`。所以基本上，除非您`bp`在间接寻址中使用，否则默认段是`ds`. 如果`bp`在间接寻址中使用，则默认段为`ss`.

2.  十六进制数字中的前导零是许多反汇编程序和汇编程序语法用来将十六进制数字与符号分开的约定（其他一些反汇编程序和汇编程序使用`0x`代替`0`）。前导零不会影响任何数字的**数值**，并且在所有数字系统（二进制、十进制、十六进制等）中都是相同的。

正如您所假设的，将第一个单词加载到and 并将第二个单词加载到中，所以它相当于：[`les`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/les.html)`di, ss:[bx]``di``es`

```
mov di,ss:[bx]
mov es,ss:[bx+2] 
```

# javascript - 谷歌浏览器 webkit 通知撤销权限？切换开/关？

> ID：15417213
> 
> 赞同：3
> 
> 时间：2013-03-14T18:21:30.177
> 
> 标签：javascript, google-chrome, webkit

我的 webkit 通知运行良好，但我想允许用户选择关闭它们，如果他们觉得它们很烦人。

我已经搜索了 API，但找不到与撤销权限有关的任何内容。

基本上看起来像下面的东西......

```
<input type="button" onclick="window.webkitNotifications.requestPermission();" value="Yes" />
<input type="button" onclick="window.webkitNotifications.revokePermission();" value="No" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-31T07:58:53.537

您不能撤销通知权限，只能使用每页的 chrome 配置来撤销它们。设置 » 高级设置 » 隐私设置 » 内容设置 » 通知。

如果您不想显示它们，则需要跟踪用户的选择而不是创建通知，而不是撤销权限。

这是铬 api：

```
interface NotificationCenter {
 // Notification factory methods.
 Notification createNotification(in DOMString iconUrl, in DOMString title, in DOMString body) throws(Exception);
 optional Notification createHTMLNotification(in DOMString url) throws(Exception);

 // Permission values
 const unsigned int PERMISSION_ALLOWED = 0;
 const unsigned int PERMISSION_NOT_ALLOWED = 1;
 const unsigned int PERMISSION_DENIED = 2;

 // Permission methods
 int checkPermission();
 void requestPermission(in Function callback);
} 
```

# css - css 绝对定位与右对齐

> ID：15417215
> 
> 赞同：15
> 
> 时间：2013-03-14T18:21:34.297
> 
> 标签：css

我有以下代码：

```
<!DOCTYPE html>
<html>
<head>
  <style>
     img
     {
         position:absolute;
         right:50px;
     }
  </style>
</head>

<body>
     <h1>This is a heading</h1>
     <img src="logocss.gif" width="95" height="84" />
</body>
</html> 
```

来自[http://www.w3schools.com/cssref/tryit.asp?filename=trycss_position_right](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_position_right)

如果我将 h1 的样式更改为： h1 { position:absolute; 右：50px；} 然后 h1 和 img 都重叠。

现在我没有提到 img 或 h1 的最高位置。因此，在第一种情况下，当 h1 没有任何样式时，img 将 h1 单独放置并占据 h1 之后的下一个可用空间并与右侧对齐（相距 50 px）。但是当我提到 h1 相距 50px（绝对定位）时，img 和 h1 都重叠了。现在因为我没有提到最高位置，那么为什么 img 不单独离开 h1 并跟随它（而不是重叠它）？我知道我们使用的是绝对定位，它会模糊指定顶部位置，那么为什么它会自动假设 img 必须占据 top:0 位置？如果 h1 占据 top:0 位置，那很好，因为它是第一个元素。但是 img 应该尊重 h1 的空间。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T18:27:50.783

这是因为`position:absolute`从文档流中删除了元素——它们不再堆叠，因为它们是绝对位置的。

我认为更好的方法是：

```
h1, img{
    float:right;
    margin-right:50px;
    clear:both;
} 
```

jsfiddle：http: [//jsfiddle.net/R7bXZ/](http://jsfiddle.net/R7bXZ/)

**对你来说更好的方法：**

只需给出 h1 `text-align:right;`。

jsfiddle：http: [//jsfiddle.net/KvMLb/2/](http://jsfiddle.net/KvMLb/2/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-11T15:05:03.270

是的，您也可以`top`像这样更改css中的标签：

```
 img
 {
     position:absolute;
     right:50px;
     top:100px;
 }
 h1
 {
     position:absolute;
     right:50px;
     top:75px;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T18:30:16.357

`img`占据该`top: 0`位置的原因是，通过指定`h1`as `position: absolute`，您将其从页面流中取出。`img`试图计算它的位置并且看不到`h1`那里。`position: absolute`尽管[此 JSFiddle 可能对您有用，](http://jsfiddle.net/bwkrm)但仅使用此方法并没有很好的解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T18:27:56.637

在这里阅读绝对定位：[http ://www.w3.org/wiki/CSS_absolute_and_fixed_positioning](http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning)

当使用绝对定位时，你应用它的元素，用 lamens 术语来说，会与页面和其他元素断开连接。它本质上是使该元素自行运行，而其他元素的影响为 0。从我读过的内容来看，您想要 position:absolute img 来检测 h1 的位置并避免它。使用 position:absolute 根本不可能做到这一点，它本身就是为了不这样做而设计的。

您如何希望这些实际出现，以便我可以在不使用 position: absolute 的情况下协助实现这一目标？

# r - ggplots条件色标

> ID：15417220
> 
> 赞同：4
> 
> 时间：2013-03-14T18:21:47.167
> 
> 标签：r, ggplot2

我正在研究一些密度图，其中填充以值（0.05）为条件

```
library(plyr)
library(ggplot2)

allNorm<-data.frame(value=rnorm(300),
                 aCategory=rep(1:3, c(100, 100, 100)))
allNorm<-ddply(allNorm, .(aCategory), mutate,
            shapWilkP=shapiro.test(value)$p.value)

mixed<-data.frame(value=c(rlnorm(200), rnorm(100)),
                aCategory=rep(1:3, c(100, 100, 100)))
mixed<-ddply(mixed, .(aCategory), mutate,
            shapWilkP=shapiro.test(value)$p.value)

ggplot(allNorm, (aes(x=value)))+
  geom_density(aes(fill=shapWilkP>0.05))+
  facet_wrap(~aCategory)

ggplot(mixed, (aes(x=value)))+
  geom_density(aes(fill=shapWilkP>0.05))+
  facet_wrap(~aCategory) 
```

这有效（几乎） - 我只需要弄清楚如何强制 TRUE 一直是蓝色的。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T18:26:55.137

添加到`scale_fill_manual()`您设置所需颜色`TRUE`和`FALSE`值的两个图中。

```
+ scale_fill_manual(values=c("FALSE"="red","TRUE"="blue")) 
```

# ios - 如何在 X 文件之间分离 ViewController 方法

> ID：15417225
> 
> 赞同：0
> 
> 时间：2013-03-14T18:22:02.243
> 
> 标签：ios, objective-c

我刚开始为 iPhone 开发 1 周前，一切进展顺利，但我什至不知道如何问这个问题（英语不是我的自然语言），让我们看看你是否能理解我。

我有一个 ViewController 可以做很多事情。显示一些图像，做一些动画，滚动图像，同时从页面控制器更改白点......嗯，这种东西。

但是我的 ViewController.m 只有一个文件有这么多代码。好吧，**还没有**。

我想做的是创建另一个文件，我可以在其中编写 moar 代码，提高可读性和组织性。像这样：

```
ViewController.m (ViewController general code)
ViewController_Navigation.m
ViewController_ImagesScrolling.m
ViewController_DBActions.m 
```

如果需要，使用它们各自的头文件。

那么，我该怎么做的任何想法或例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:24:34.623

您需要为单个视图/xib 添加更多对象/控制器类。

他们每个人都将被分配/链接到您的班级。

![在此处输入图像描述](../Images/9c8c1d7ee8763f75b812a2e2b6cd5886.png)

*- 这是 OSX 中非常常见的设计模式，我希望这对 ios 也是有效的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:28:00.887

iOS 基于 MVC 模型。因此，您应该使用控制器来管理模型和视图。

理想情况下，我会这样做：

一种。实现单独的控制器来管理
   1\. 图像 -> 分离用于显示图像的视图
   2\. 数据库
   3\. 你拥有的任何其他东西......

b。实现一个单独的控制器来管理上述控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:37:33.263

将函数分离和封装到单独的类中是分解大量代码的常用概念。与一项任务有关的所有方法都可以作为对象集中在一起，通常是某种 UIView 子类，或 UIViewController 子类，用于值得拥有自己的信息屏幕的更大任务。例如，您可能拥有一个在设置了所需的 UIImage 后自行处理图像滚动的设备。但是，除此之外，您通常不应该拆分单个控制器的代码。控制器包含所有将视图与 MVC 模式中的模型一起显示的粘合剂。因此，一旦所有不依赖于模型的功能都被划分为视图，您就可以

我不建议将代码拆分为单独的文件，因为它们都有一个目的：协调屏幕上发生的事情并允许视图与模型交互。但是，我通常做的是根据代码管理的任务对代码进行分类和排序。因此，所有的生命周期和普通方法都可以排在最前面，然后是所有表格视图方法、图像查看器方法等。

这使得查找与特定任务相关的代码变得容易，在`pragma`指令的帮助下甚至更容易。在任何方法之外，在已排序的方法组之间，您可以使用 a`pragma mark`将标识符分配给代码中的某个位置，可以通过跳转栏访问，就像我在以下示例代码中所做的那样。

```
#pragma mark - UIViewController Lifecycle Methods:

- (void) viewWillAppear{
    //stuff
};
- (void) loadView{
    //stuff
};

#pragma mark - UITableView Delegate & Datasource Methods:

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    //stuff
 };
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    //stuff
}; 
```

现在，如果您要转到 Xcode 代码查看器顶部的跳转栏并单击最右侧的对象以查找方法，您会看到：

![在此处输入图像描述](../Images/452d22f684ea137210a0577d729de09b.png)

我不相信在对您的代码进行排序、用 pragma 标记将其标记并将您可以使用的所有代码分离到其他 UIView 和 UIViewController 之后，您应该觉得需要将代码拆分为几个文件；您可以使用跳转栏转到代码的任何部分，就像交换文件一样。但是，这样一来，您就不会从一个类中分割代码并在整个地方留下点点滴滴。

# wordpress - 博客文章打破了页脚

> ID：15417226
> 
> 赞同：0
> 
> 时间：2013-03-14T18:22:03.057
> 
> 标签：wordpress, wordpress-theming

我是 WordPress 的新手，我正在从头开始创建一个主题，因为我想看起来和我的设计完全一样。起初，它非常简单，拥有 index.php 并调用页眉和页脚，甚至循环都非常简单。但是，在努力寻找为什么不起作用之后，我终于找到了一种在博客页面中显示我的帖子的方法。但是，我有一个问题。我没有分页，因为我不知道该怎么做，而且当我添加多个帖子时，容器会遍布页脚和更远的地方。我将如何“推动”或缩放页脚？抱歉，如果我的问题听起来有点奇怪，任何反馈都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:33:23.887

从默认主题中获取分页。

如果您对 WordPress 法典没有深入了解，最好从它们中获取默认模板和设计。那么你就有了你可能需要的所有代码/功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:32:41.127

你有两个不同的问题：

1.  如何在我的博客页面上创建分页？
2.  如何防止内容超出页脚/如何使内容推到页脚底部？

**1**`previous_posts_link()` 、你可以在你的博客页面上创建分页，有以下两个函数：`next_posts_link()`这两个函数都有两个参数，第一个参数可以设置链接文本。

*例子：*

```
previous_posts_link("&laquo; Previous Posts");
//will output a link:
//<a href="link to previous page">&laquo; Previous Posts</a> 
```

**2.**您的第二个问题有点难以回答，因为您没有提供任何代码，请将您的 CSS 添加到您的原始问题中。

# python - Django：在最大外键值上选择不同的值

> ID：15417227
> 
> 赞同：3
> 
> 时间：2013-03-14T18:22:05.917
> 
> 标签：python, mysql, django

我正在使用 SQLite3 和 MySQL 测试以下模型：

```
# (various model fields extraneous to discussion removed...)

class Run(models.Model):
    runNumber = models.IntegerField()

class Snapshot(models.Model):
    t = models.DateTimeField()

class SnapshotRun(models.Model):
    snapshot = models.ForeignKey(Snapshot)
    run = models.ForeignKey(Run)
    # other fields which make it possible to have multiple distinct Run objects per Snapshot 
```

我想要一个查询，它会给我一组 runNumbers 和快照 ID，其中 Snapshot.id 低于某个指定值。我天真地希望这能奏效：

```
print SnapshotRun.objects.filter(snapshot__id__lte=ss_id)\
                         .order_by("run__runNumber", "-snapshot__id")\
                         .distinct("run__runNumber", "snapshot__id")\
                         .values("run__runNumber", "snapshot__id") 
```

但这爆炸了

```
NotImplementedError: DISTINCT ON fields is not supported by this database backend 
```

对于两个数据库后端。不幸的是，Postgres 不是一个选择。

是时候回退到原始 SQL 了吗？

**更新**：

由于 Django 的 ORM 无法帮助我解决这个问题（感谢@jknupp），我确实设法让以下原始 SQL 工作：

```
cursor.execute("""
            SELECT r.runNumber, ssr1.snapshot_id
            FROM livedata_run AS r
            JOIN livedata_snapshotrun AS ssr1
            ON ssr1.id =
            (
                SELECT id
                FROM livedata_snapshotrun AS ssr2
                WHERE ssr2.run_id = r.id
                  AND ssr2.snapshot_id <= %s
                ORDER BY snapshot_id DESC
               LIMIT 1
            );
""", max_ss_id) 
```

这`livedata`是这些表所在的 Django 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:39:26.857

[Django 文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.distinct)中的注释非常清楚：

> 笔记：
> 
> 在 order_by() 调用中使用的任何字段都包含在 SQL SELECT 列中。当与 distinct() 一起使用时，这有时会导致意想不到的结果。如果按相关模型中的字段排序，这些字段将被添加到选定的列中，否则它们可能会使重复的行看起来不同。由于额外的列不会出现在返回的结果中（它们只是为了支持排序），因此有时看起来返回的结果不明确。
> 
> 同样，如果您使用 values() 查询来限制选定的列，则任何 order_by() （或默认模型排序）中使用的列仍将涉及并可能影响结果的唯一性。
> 
> 这里的寓意是，如果您使用 distinct() 小心按相关模型排序。同样，当一起使用 distinct() 和 values() 时，在按不在 values() 调用中的字段排序时要小心。

此外，在此之下：

> 这种指定字段名称（具有不同）的能力仅在 PostgreSQL 中可用。

# doctrine-orm - 带有连接表的 Doctrine 2 多对一

> ID：15417229
> 
> 赞同：6
> 
> 时间：2013-03-14T18:22:17.853
> 
> 标签：doctrine-orm

我正在寻找有关如何映射使用连接表的 OneToMany/ManyToOne 关系的建议。我没有进行映射，并且我收到一个错误，即 article_id 未在媒体表中设置。 

```
class Media
{
    // ...

    /**
     * @ManyToOne(targetEntity="Document", inversedBy="media")
     * @JoinTable(name="articles_x_media", referencedColumnName="id")
     * joinColumns={@JoinColumn(name="media_id", referencedColumnName="id")},
     * inverseJoinColumns={@JoinColumn(name="bid_id", referencedColumnName="id")})
     * )
     */
    protected $document;
}

class Document
{
    // ...

    /**
     * @OneToMany(targetEntity="Media", mappedBy="document"))
     * @JoinTable(name="articles_x_media", referencedColumnName="id")
     * joinColumns={@JoinColumn(name="article_id", referencedColumnName="id")},
     * inverseJoinColumns={@JoinColumn(name="media_id", referencedColumnName="id")}
     * )
     */
    protected $media;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T02:10:46.147

[`OneToMany`文档中有一段关于使用连接表进行映射](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-many-unidirectional-with-join-table)的特定段落。

无论如何，您可能想要的是[单向`ManyToMany`关联](https://www.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#many-to-many-unidirectional)。

此外，`@OneToMany`不带有`@JoinTable`, 并且两者都相同`@ManyToOne`。

# git - Sublime Text 2 Theme 包被自动删除

> ID：15417232
> 
> 赞同：0
> 
> 时间：2013-03-14T18:22:19.800
> 
> 标签：git, sublimetext2

我在 Fedora 17 64 位机器上使用 Sublime Text 2 和 3。

**问题**

1.  我使用 git 将 Theme 包安装到 sublime Package 文件夹中，它工作正常。这是我用来安装的命令。

    git clone git://github.com/jaromero/soda-refined-theme.git “主题 - 苏打精制”

2.  几个小时后，我关闭编辑器并重新打开编辑器。编辑说找不到主题。编辑器到处都是奇怪的红色。我检查了 Package 文件夹，并删除了主题文件夹。

3.  我再次使用上述命令重新安装主题，主题现在可以正常工作。并且这个 install-auto_removal-reinstall 循环永远循环。

我不确定是什么触发了主题被自动删除，因此不完全知道我需要在这篇文章中提供哪些信息。请评论解决此问题的必要信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:00:58.280

您是否尝试过使用[包控制](http://wbond.net/sublime_packages/package_control)？使用该方法可能会更好地“坚持”，并且会自动使其保持最新状态。另一种选择是尝试将其安装到您的`Packages/User`目录中，因为这是专门针对用户内容的。

# mips - MIPS可以将li和sb组合成一条指令吗？

> ID：15417243
> 
> 赞同：0
> 
> 时间：2013-03-14T18:22:45.997
> 
> 标签：mips

我是 MIPS 的新手，所以如果这是一个愚蠢的问题，我深表歉意。我似乎无法在网上找到这个问题的答案。这两条指令可以写成一条指令吗？我下面的代码感觉多余：

```
li    $t0, 23
sb    $t0, 0x10010000 
```

提前感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:29:06.730

不，它们不能合并。没有“存储中间存储器”指令之类的东西。

Mips 实现了一个简单的 ISA。作为 RISC 架构，在内存中存储字节的唯一方法是使用`sb`指令。

# jquery - 动态 jquery 滑块

> ID：15417245
> 
> 赞同：0
> 
> 时间：2013-03-14T18:22:48.400
> 
> 标签：jquery, dom, slider

我有越来越多的对象要附加滑块。我正在动态构建一个包含对象的 ul/li，当将滑块附加到函数时，滑块是为每个 li 项目构建的，但它们都控制最后一个 LI。有没有人遇到/解决过这个？

代码片段：

```
 $('<span>').attr({
        class: 'sliderO'
    }).appendTo('#' + lyrVar.liID);

    $('.sliderO').slider({
        min: 0, max: 1, value: 1, step: 0.10,
        change: function(event, ui) {
            lyrVar.setOpacity(ui.value);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:12:58.220

已解决：对于创建的每个元素，我添加了一个额外的字段来为每个元素分配一个唯一的 ID。

```
$('<span>').attr({
    class: 'sliderO',
    id: lyrVar.sliderID
}).appendTo('#' + lyrVar.liID); 
```

# php - Magento - 使用 SQL 查询删除选定的产品

> ID：15417250
> 
> 赞同：0
> 
> 时间：2013-03-14T18:23:02.763
> 
> 标签：php, mysql, sql, magento, magento-1.7

我的 magento 数据库中有大约 800,000 个产品，我需要删除其中大约一半的产品（大约 400,000 个）。

在 magento 1.7.0.2 上运行

从“管理产品”页面上做这件事只需要我永远。该过程需要很长时间，并且服务器不断超时。

是否有可以从数据库中删除选定产品的 SQL 语句？所有需要删除的产品，标题以*NLA开头

我知道磁电机将产品数据存储在几个不同的表中，所以我试图弄清楚如何从所有表中删除与所选产品相关的所有数据。

我知道 MySQL 语句，但我不是专家，无法弄清楚这一点。例如，如果只有一张表，我会这样做：DELETE FROM product_table WHERE title_value LIKE '*NLA%'

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:30:58.390

您可以使用此查询

```
DELETE FROM product_table WHERE title_value LIKE '*NLA% 
```

Magento 使用带有外键的 MySQL 的 InnoDB 引擎存储。所有具有 FK 键的数据也将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:37:49.540

在 Magento 中，产品详细信息使用 EAV 概念存储在数据库中，因此有 30 多个表可以存放产品数据。

我建议您使用 Magento 导入导出工具进行批量删除。

请参阅此链接： [magento：通过导入/导出工具批量删除产品？](https://stackoverflow.com/questions/7980754/magento-bulk-delete-products-via-import-export-facility)

有一个扩展 Magmi 也可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:30:12.733

`SQL`如果您要从单个表中删除，您的语句应该可以完成这项工作。

如果存储在不同的表上，则取决于它们的存储方式。例如，如果产品根据它们的键为 a 存储`foreign key`在不同的表中，那么当产品从主表中删除时，所有相关表都会更新（取决于是否设置了外键`CASCADE ON DELETE`）。

但要注意`LIKE`条件中给出的正则表达式，确保没有其他产品在其标题中的某处有“NLA”。

编辑：你说从'NAL'开始？在这种情况下，您的正则表达式应该类似于`'NAL*%'`

```
DELETE FROM product_table WHERE title LIKE 'NAL*%' 
```

# java - Class.forName() 抛出 ClassNotFoundException

> ID：15417254
> 
> 赞同：27
> 
> 时间：2013-03-14T18:23:26.150
> 
> 标签：java

一个 Thinking in Java 程序如下：

```
package typeinfo;
import static util.Print.*;

class Candy {
 static { print("Loading Candy"); }
}

class Gum {
 static { print("Loading Gum"); }
}

class Cookie {
 static { print("Loading Cookie"); }
}

public class SweetShop {
 public static void main(String[] args) {  
   print("inside main");
   new Candy();
   print("After creating Candy");
   try {
     Class.forName("Gum");
   } catch(ClassNotFoundException e) {
     print("Couldn't find Gum");
   }
   print("After Class.forName(\"Gum\")");
   new Cookie();
   print("After creating Cookie");
 }
} 
```

我期待输出如下：

```
/* Output:
inside main
Loading Candy
After creating Candy
Loading Gum
After Class.forName("Gum")
Loading Cookie
After creating Cookie
*/ 
```

但是得到

```
inside main
Loading Candy
After creating Candy
Couldn't find Gum
After Class.forName("Gum")
Loading Cookie
After creating Cookie 
```

显然，try 块抛出了一个 ClassNotFoundException，这是出乎意料的。任何想法为什么代码抛出这个而不是初始化 Gum 类，如预期的那样？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-14T18:24:29.800

您的类在 package`typeinfo`中，因此它们的完全限定名称是`typeinfo.Gum`,`typeinfo.Candy`和`typeinfo.Cookie`。[`Class.forName()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String%29)只接受完全限定名称：

> **参数：**
> 
> `className`- 所需类的完全限定名称。

将您的代码更改为：

```
try {
  Class.forName("typeinfo.Gum");
} catch(ClassNotFoundException e) {
  print("Couldn't find Gum");
} 
```

# r - sapply 有问题

> ID：15417256
> 
> 赞同：0
> 
> 时间：2013-03-14T18:23:31.267
> 
> 标签：r, datetime, zoo, sapply

这是可复制的示例（至少在我的计算机上）

```
a <- as.Date(as.Date("2012-10-01"):as.Date("2013-03-25"))
myFun <- function (x) {
    return(sqrt(abs(as.numeric(x-as.Date("2013-01-01")))))
} 
```

`for (i in 1:length(a)) { print(myFun(a[i])) }` 工作正常，但

`sapply(a,myFun)`失败并显示错误消息

```
"Error in `-.Date`(x, as.Date("2013-01-01")) : 
Can only subtract from Date objects" 
```

欢迎所有想法！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:36:05.360

`zoo`在我加载包之前它对我不起作用。在此之前，这是因为日期和数字之间的强制问题，并且没有提供`origin`. 如果您尝试`detach(package:zoo)`运行：

```
 a <- as.Date("2012-10-01"):as.Date("2013-10-01")

myFun <- function (x) {
    return(sqrt(abs( x - as.numeric( as.Date( "2013-01-01" ) ) ) ) )
}
sapply(a,myFun) 
```

当我加载 package 时，我会做同样的事情`zoo`。原因是（在我的 R 会话中）没有`zoo`运行，第一个命令导致：

```
 as.Date(as.Date("2012-10-01"):as.Date("2013-03-25")) 
```

结果是：

```
Error in as.Date.numeric(as.Date("2012-10-01"):as.Date("2013-03-25")) : 
  'origin' must be supplied 
```

# apache - 忽略查询/参数的 Apache 重写规则，始终基于路径重定向

> ID：15417258
> 
> 赞同：0
> 
> 时间：2013-03-14T18:23:35.997
> 
> 标签：apache, url, mod-rewrite, url-rewriting, apache2

我正在尝试创建一个重写规则，该规则将忽略任何其他 URL 查询/参数，并仅根据路径进行重定向。

我的公司有一个 Wifi Hotspot 服务，它会做一些 DNS 路由技巧来强制人们在使用它之前登录。不幸的是，当人们从 WiFi 断开连接并返回到他们的正常蜂窝数据服务时，有时 URL 请求仍会发送到我们的主机，它显示为：

```
www.ourwebsite.com/login?dst=http://www.google.com/m?client=ms-android-verizon&source=android-home 
```

我已经编写了一组规则来处理 /login 和 /login/ 的基本路径以重定向到我们的主页，

```
RewriteCond %{THE_REQUEST} ^.*\/login/\ HTTP/
RewriteRule ^(.*)login/?$ "/$1" [R=301,L]
RewriteCond %{THE_REQUEST} ^.*\/login\ HTTP/
RewriteRule ^(.*)login?$ "/$1" [R=301,L] 
```

但我无法想出一个适当的字符串来始终在路径上重定向基于灵魂，并忽略可能会或可能不会出现的任何查询参数。

任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:47:06.037

如果我理解正确，应该这样做：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteRule ^login    /?   [R=301,L] 
```

只要传入的 URL 是这样的，这个规则集就会重定向到 root：

`http://www.ourwebsite.com/login?any_query`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-17T09:04:18.880

从 Apache 2.4.0 开始，您可以将`QSD`-flag 应用于规则。

> 当请求的 URI 包含查询字符串而目标 URI 不包含时，RewriteRule 的默认行为是将该查询字符串复制到目标 URI。使用 [QSD] 标志会导致查询字符串被丢弃。-- [https://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_qsd](https://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_qsd)

当将此标志用于早期 Apache 版本时，您将导致`500 Internal Server Error`.

# php - 简单的 Mod 重写不起作用。试图屏蔽文件名

> ID：15417260
> 
> 赞同：1
> 
> 时间：2013-03-14T18:23:42.623
> 
> 标签：php, .htaccess

这似乎非常基本，我不确定为什么它不起作用。我只是希望能够用来`www.mydomain.com/sso-login`加载`www.mydomain.com/login.php`. 这是我在 .htaccess 文件中使用的代码，当我输入 url 时，它会将我带到 404 页面`www.mydomain.com/sso-login`。任何想法为什么这不起作用？其他 url 重写在同一个 .htaccess 文件中工作。

```
RewriteEngine On
RewriteRule ^/sso-login$ /login.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:27:12.313

尝试这个 ：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^sso-login/?$ /login.php [L]
</IfModule> 
```

# php - Eclipse 中用于 Web 开发的类 Android 插件

> ID：15417266
> 
> 赞同：0
> 
> 时间：2013-03-14T18:24:00.333
> 
> 标签：php, html, eclipse, plugins, web

我已经开发 Web 应用程序和网站将近 3 年了。我使用的语言是 PHP、JS 和 HTML，使用 Aptana。大约 1 年前，我也开始使用 Eclipse 的 ADT 插件进行 Android 开发。不久之后，我完全爱上了 Android 组织/集成不同文件类型的方式，以及它们之间的交互方式。例如，您不只是在 XML 文件中内联 Android Java，反之亦然。特定的 Android 方法用于以透明的方式操作 XML 函数，并且非常容易避免将 GUI 功能与实际应用程序功能混合。

我正在寻找的是类似于网络开发的东西。例如，调用一个 PHP 函数`page->getButton('id')->setText('text');`来操作 HTML，然后在必要时单独编辑实际的 HTML 进行特定的调整。我通常将 jQuery 用于类似的功能，但这几乎不能解决我的问题，因为我通常需要在 HTML 中内联 PHP。我知道那里有一些所见即所得的编辑器，但是他们生成的大量垃圾代码让我对使用它们的想法失去了所有尊重。

有没有什么好的插件/类可以满足我的需求？我正在考虑在业余时间编写自己的 Eclipse 插件来做我想做的事。

# antlrworks - 从 ANTLR4 中的 Parser 访问解析的数据

> ID：15417269
> 
> 赞同：0
> 
> 时间：2013-03-14T18:24:09.053
> 
> 标签：antlrworks, antlr4

我正在通过我的自定义语法处理我的输入文件，并提取标记并将它们以`HashMap`. 在 ANTLR 3 中，我能够通过`rule()`在解析器上调用方法来解析文件并获得`HashMap`类似`parser.record`.

这似乎在 ANTLR 4 中不起作用。我参考了这本书，看来我必须调用`parser.init()`才能开始解析，但我在解析器中看不到任何方法。

我使用 ANTLRWorks 2 来生成我的词法分析器和解析器文件。我没有生成监听器类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T21:04:48.733

在 ANTLR 4 中，您通过调用匹配条目规则名称的方法开始解析。如果您的语法中的规则被调用`rule`，您将通过调用`rule()`. 如果您的语法中的规则被调用`init`，那么您将通过调用`init()`.

请注意，ANTLR 4 中的 Java 目标不允许您有一个名为 的规则`rule`，因此如果您的语法中有这样的规则，您需要在语法编译之前重命名它。

# wordpress - 适用于所有子类别但不适用于父类别的 Wordpress 模板

> ID：15417291
> 
> 赞同：1
> 
> 时间：2013-03-14T18:25:19.770
> 
> 标签：wordpress, templates, categories

我在 Wordpress 中找到的对子类别和孙子类别使用相同类别模板的最佳方法就在 stackoverflow 上： [https ://stackoverflow.com/a/3117202/391929](https://stackoverflow.com/a/3117202/391929)

但是如何让 JUST 子类别使用该模板而不是基本父类别？

我试过像这样编辑 if 行，从这里：

```
if (is_category(get_cat_id('projects')) || cat_is_ancestor_of(get_cat_id('projects'), get_query_var('cat'))) 
```

对此：

```
if (is_category(get_cat_id('projects')) || cat_is_ancestor_of(get_cat_id('projects'), get_query_var('cat'))) 
```

但它不起作用，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:39:35.490

我设法以程序方式解决了这个问题：

1 在主题功能中添加了这个片段：

```
add_action('template_redirect', 'load_category_tree_template');
function load_category_tree_template() {
        if (is_category() && !is_feed()) {
            // replace 'your-base-category-slug' with the slug of root category
            $base_tree_cat_id = get_cat_id('your-base-category-slug'); 
                // get current category id
            $catid = get_query_var('cat'); 

            if (is_category($base_tree_cat_id) || cat_is_ancestor_of($base_tree_cat_id, $catid)) {
                load_template(STYLESHEETPATH . '/category-your-base-category-slug.php');
                exit;
            }
        }
    } 
```

然后在 category-your-root-category-slug.php 文件中，我根据当前类别 slug 包含一个不同的其他文件：

```
<?php get_header(); ?>

<?php
if (is_category( )) {
  $cat = get_query_var('cat');
  $currentcat = get_category ($cat);
  $currentslug = $currentcat->slug;
 }
// if we are in base category we know it by the slug
if ($currentslug == 'your-base-category-slug'){
        // if we are load a file with the loop for the root category
    require_once('post-loop-caregory-tree-root.php'); 
}else{
        // otherwise we are not in the root, so show the loop for all other category in the tree
    require_once('post-loop-category-tree.php'); 
}
?>

<?php get_footer(); ?> 
```

我知道它可以做得更好，但最终它是非常简单的解决方案。

# c++ - 数组不是 namespace::std 的成员

> ID：15417298
> 
> 赞同：2
> 
> 时间：2013-03-14T18:25:57.510
> 
> 标签：c++, gcc, c++11, std, libstdc++

我正在使用 g++ 版本 4.5.2 。

虽然我有包含数组头文件 `#include <array>`，但它并没有抱怨头文件的存在。

但是当我这样做时`std::array<char , 16>`，

当我尝试用 g++ 编译时抛出异常

> “数组不是命名空间 std 的成员”

我在网上搜索，看到一个地方使用的建议`std::tr1::array<>`，

但这也没有帮助？

有人知道问题是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:29:25.923

您需要使用 GCC 4.6 及更高版本进行编译才能拥有 C++11 功能，并且您需要`-std=C++0x`在 GCC 4.7 或中设置正确的标志`-std=C++11`

# flat-file - 将大量 Web 发布请求写入平面文件（基于文件的队列）

> ID：15417307
> 
> 赞同：0
> 
> 时间：2013-03-14T18:26:28.117
> 
> 标签：flat-file, queuing

我正在开发一个基于 Spring 的 Web 应用程序，它将每分钟处理大量请求，并且这个 Web 应用程序需要非常快速地响应。为此，我们决定实现一个基于平面文件的队列机制，它只会将请求（一组数据库列值）写入平面文件，另一个进程会定期从平面文件中提取这些数据并将其写入数据库。我只拿起那些写完的文件。

在使用平面文件时，对于收到的每个请求，我都需要在控制器方法中打开和关闭平面文件。

**我的问题是**：有没有更好的方法来实施这个解决方案？JMS 超出了我们的范围，因为我们现在没有基础设施。如果这种基于文件的方法看起来不错，那么有没有更好的方法来减少文件 I/O ？使用当前的设计，我为收到的每个 Web 请求打开/写入/关闭平面文件，我知道这很糟糕。:(

环境：SpringSource ToolSuite、Apache/Tomcat，后端为 Oracle。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:27:30.200

文件访问必须同步，否则会损坏它。同步访问与您计划的大量请求发生冲突。

看看像[Kestrel](http://robey.github.com/kestrel/)这样的东西，或者只是使用像[SQLite](http://www.sqlite.org/)这样的数据库（至少你可以委派同步负担）

# javascript - 为什么类型化数组构造函数要求偏移量是底层类型大小的倍数？

> ID：15417310
> 
> 赞同：6
> 
> 时间：2013-03-14T18:26:46.570
> 
> 标签：javascript, websocket, typed-arrays

在[类型化数组规范](http://www.khronos.org/registry/typedarray/specs/latest/)中，有一个构造函数允许采用现有的 ArrayBuffer 并将其视为另一种数组类型。有趣的是，offset 参数必须是构造数组的基础类型的倍数。这种限制的原因是什么？

对于背景 - 我正在尝试对要通过 WebSocket 发送的二进制缓冲区进行编码。缓冲区包含不同大小的各种变量。最初我想使用以下代码：

```
var buffer = new ArrayBuffer(10);
new Uint32Array(buffer, 0, 1)[0] = 234;
new Int16Array(buffer, 4, 1)[0] = -23;
new Uint32Array(buffer, 6, 1)[0] = 6000;  // Exception is raised here, 
                                          // because 6 is not multiple of 4 
```

为了完成这项工作，我需要将最后一行重写如下：

```
var tempArray = new Uint32Array(1);         // Create 32-bit array
tempArray[0] = 6000;                        // Write 32-bit number
var u8Src = new Uint8Array(tempArray, 0);   // Create 8-bit view of the array
var u8Dest = new Uint8Array(buffer, 6, 4);  // Create 8-bit view of the buffer
u8Dest.set(u8Src);                          // Copy bytes one by one 
```

对于这样一个简单的操作来说，代码太多了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T17:13:13.007

未对齐的内存访问不适用于所有平台：

[为什么创建一个 Float32Array 的偏移量不是元素大小的倍数是不允许的？](https://stackoverflow.com/questions/7372124/why-is-creating-a-float32array-with-an-offset-that-isnt-a-multiple-of-the-eleme) [http://en.wikipedia.org/wiki/Data_structure_alignment](http://en.wikipedia.org/wiki/Data_structure_alignment)

使用 DataView 对象访问非对齐数据：

[https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/DataView](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/DataView)

# r - 在 R 中操作列表对象 - 处理 MCMC 输出

> ID：15417316
> 
> 赞同：2
> 
> 时间：2013-03-14T18:26:57.393
> 
> 标签：r, plyr

在下面编辑以显示一个非常简洁的解决方案——感谢哈德利·威克姆。

我有一个非常具体的查询，但它也与我想纠正的 R 知识中的一些普遍缺陷有关。我还想（如果可能的话）不仅解决我的问题，而且以一种优雅而有效的方式来解决问题——也许我将目光投向了高处。任何人都可以回答我的具体问题，但也可以推荐一个好的来源来了解更多信息吗？非常感谢任何帮助。似乎 Hadley Wickham 在这里遇到了类似的问题 - [http://www.slideshare.net/hadley/plyr-one-data-analytic-strategy](http://www.slideshare.net/hadley/plyr-one-data-analytic-strategy) - 但这些是演示文稿中的幻灯片，我很难理解这些幻灯片他们自己。

我正在尝试操作存储在 R 列表中的 MCMC 输出。数据分为五年，每年我有四组。目标是绘制这些。为了使问题易于处理，这里是十次迭代的输出，就像这样。

```
iterations      [,1]       [,2]      [,3]       [,4]
      [1,] 49.184181  4.3515983 16.051958 -14.896019
      [2,] 45.910362  2.1738066 17.161775 -29.880989
      [3,] 14.575248  7.9476606  8.385455 -34.753004
      [4,] 55.029604  2.3422748 16.366960 -66.182627
      [5,] 25.338546  8.3039173 16.937638 -26.697235
      [6,] 48.633115  0.4698014 16.130142 -65.659992
      [7,]  1.356642  3.0249349  2.388576  -1.700559
      [8,] 49.831352 -2.0644832 15.403726 -23.378055
      [9,] 13.057886 -2.8856576 11.481152 -36.697754
     [10,] 50.889166  2.6846852 15.763382 -23.049868

, , 2

 iterations       [,1]      [,2]      [,3]       [,4]
      [1,] 51.6134663 15.659392 17.218244 -47.864892
      [2,] 46.0545981 17.067779 18.158151 -38.336587
      [3,] 16.5690775 10.386358 10.991029 -30.225820
      [4,] 55.5724832 14.840466 15.556193 -54.432882
      [5,] 26.1064404  5.656579 15.063810  -5.085942
      [6,] 57.3084200 12.551751 16.212203 -52.459935
      [7,]  0.9825892  6.651478  1.999976  -5.350995
      [8,] 56.1117252  3.204124 16.011812 -21.179722
      [9,] 15.4204854  5.761157 12.594028 -43.691113
     [10,] 50.1407397 16.404882 15.990908 -26.019990

, , 3

iterations      [,1]      [,2]      [,3]       [,4]
      [1,] 53.521436 24.340327 16.073063 -20.939950
      [2,] 46.040969 21.025351 16.535917 -47.611395
      [3,] 19.276578 16.575285 14.824175 -18.432136
      [4,] 58.050774 20.886686 15.944355 -37.646286
      [5,] 26.008007 11.449253 13.027001 -56.572886
      [6,] 61.474771 18.270354 15.879238 -31.316868
      [7,]  1.515227  1.434234  3.568761  -1.328706
      [8,] 61.725967 19.212081 16.717331 -18.993349
      [9,] 15.303739  6.939953 11.940742 -54.261739
     [10,] 47.968838 20.070758 17.168400 -48.598802

, , 4

 iterations      [,1]      [,2]      [,3]       [,4]
      [1,] 51.952695 24.267668 17.867717 -28.129743
      [2,] 49.680524 22.914727 16.001512 -44.434294
      [3,] 18.519755 17.961953 15.831455 -57.110802
      [4,] 59.652211 21.655724 16.876315 -24.965724
      [5,] 29.091609 20.831196 15.546565 -59.272164
      [6,] 62.190041 21.112490 15.759867 -19.910655
      [7,]  3.116584  1.187595  1.050807  -7.721749
      [8,] 61.384355 27.331487 16.646250 -17.793893
      [9,] 16.320224 14.321294 13.726538 -47.748184
     [10,] 47.676867 27.325987 17.056364 -31.032911

, , 5

iterations      [,1]      [,2]      [,3]      [,4]
      [1,] 55.326522 33.737691 19.698060 -46.34804
      [2,] 51.122038 31.055026 19.668949 -64.52942
      [3,] 22.036674 17.577561 13.546166 -85.24881
      [4,] 60.481009 34.300432 16.903054 -25.19277
      [5,] 29.168884 26.811356 16.066908 -37.56252
      [6,] 54.221450 28.760434 16.480317 -36.42441
      [7,]  3.672456  1.571084  2.397663 -10.91522
      [8,] 56.223306 30.730421 18.185858 -28.30282
      [9,] 16.955258 16.699139 18.101711 -36.85851
     [10,] 48.220404 29.749342 17.557532 -38.22831 
```

一些进一步的信息：

```
> str(a.type)
List of 1
 $ a_type: num [1:10, 1:4, 1:5] 49.2 45.9 14.6 55 25.3 ...
  ..- attr(*, "dimnames")=List of 3
  .. ..$ iterations: NULL
  .. ..$           : NULL
  .. ..$           : NULL 
```

我正在寻找（针对当前问题）是一种命名维度（即组和年份）的方法（使用`dimnames()`命令），其次，从每个列（组）中获取一些汇总值五年。将以下内容应用于五年中每一年的四列中的每一列：

```
 myfunc <- function(x)c(mean(x),
                   quantile(x,c(.025,.975))) 
```

非常感谢任何帮助。另外，正如我所说，如果有人可以推荐此类问题的良好来源，那么我将来可能不必经常问这样的问题。

* * *

补充说明：根据下面的有用答案，我已经解决了部分问题。我可以将尺寸命名如下：

```
dimnames(a.type[[1]])=list(paste('iter',1:10,sep=''),                       ## 10 iterations
               paste(c("Delivery", "Other", "Regulatory", "Transfer")),     ## 4 groups
               paste('Year',1:5,sep=''))                                    ## 5 Years 
```

这使得以下内容（仅显示第 1 年）：

```
> a.type
$a_type
, , Year1
        Delivery      Other Regulatory   Transfer 
iter1  49.184181  4.3515983  16.051958 -14.896019
iter2  45.910362  2.1738066  17.161775 -29.880989
iter3  14.575248  7.9476606   8.385455 -34.753004
iter4  55.029604  2.3422748  16.366960 -66.182627
iter5  25.338546  8.3039173  16.937638 -26.697235
iter6  48.633115  0.4698014  16.130142 -65.659992
iter7   1.356642  3.0249349   2.388576  -1.700559
iter8  49.831352 -2.0644832  15.403726 -23.378055
iter9  13.057886 -2.8856576  11.481152 -36.697754
iter10 50.889166  2.6846852  15.763382 -23.049868 
```

所以这行得通。另一个问题：我如何才能命名组和年份——我对命名迭代没有太大兴趣，实际上我希望能够在不更改代码的情况下输出不同数量的迭代。换句话说，是否有一种逻辑方法可以跳过命名迭代。如果我做...

```
dimnames(a.type[[1]])=list(,                       ## 
               paste(c("Delivery", "Other", "Regulatory", "Transfer")), ## 4 groups
               paste('Year',1:5,sep=''))                                ## 5 Years 
```

...然后我收到一条错误消息...

```
> dimnames(a.type[[1]][2:3])=list(#paste('iter',1:10,sep=''),                       ## 10 years
+                    paste(c("Delivery", "Other", "Regulatory", "Transfer")), ## 4 groups
+                    paste('Year',1:5,sep=''))                                ## 5 Years
Error in dimnames(a.type[[1]][2:3]) = list(paste(c("Delivery", "Other",  : 
 'dimnames' applied to non-array 
```

另一方面，应用一个功能。我可以执行以下操作，但这让我认为所有年份的平均值和分位数：

```
> myfunc <- function(x)c(mean(x),
+                        quantile(x,c(.025,.975)))
>                      
> 
>                  
>                      
> a.type.bar <- apply(a.type[[1]], 2, myfunc)
> a.type.bar

   Delivery     Other Regulatory  Transfer
  38.351706 14.892788  14.450314 -34.61954
  2.5%   1.392323 -1.494269   2.087411 -66.06503
  97.5% 61.669447 33.134091  19.335254  -2.46227
 > 
```

另一方面，我可以执行以下操作，并将我的功能一次仅应用于一年：

```
a.type.bar <- apply(a.type[[1]][,,1], 2, myfunc) 
```

现在显然，这将解决我的问题——我只需要输入五行代码。但要弄清楚更深层次的问题，有没有办法一次获得平均值和分位数？

谢谢。

* * *

注意添加于 2013 年 3 月 17 日。感谢 Hadley Wickham 的奇妙 plyr 包，我似乎有了一个解决方案——感谢 Zach 让我接受它。

```
library(plyr)

myfunc <- function(x)c(mean(x),
                   quantile(x,c(.025,.975)))

summaries <- adply(a.type[[1]], 2:3, myfunc) 
```

这给出了以下输出。

```
> summaries
       X1   X2           V1        2.5%       97.5%
1    Delivery 1996   78.6691388   39.912455   109.61078
2       Other 1996    4.3485461   -4.584758    16.61764
3  Regulatory 1996   19.6444938   14.135322    24.00373
4    Transfer 1996   -0.7922307 -195.263744   203.95175
5    Delivery 1997   79.6291215   29.853200   109.26860
6       Other 1997   14.3462871    5.607952    22.68043
7  Regulatory 1997   22.4131984   16.861994    30.09017
8    Transfer 1997 4392.7699174  991.168626  8426.64365
9    Delivery 1998   85.9237011   52.100181   115.78991
10      Other 1998   21.4735955    9.790307    37.40546
11 Regulatory 1998   25.5654754   19.558132    30.58021
12   Transfer 1998 6166.7374268 2456.330035 10249.00350
13   Delivery 1999   90.1843678   52.574874   128.28546
14      Other 1999   27.2028622   14.373959    38.54636
15 Regulatory 1999   28.8851480   20.913437    34.59272
16   Transfer 1999 8116.6049650 4186.782183 12030.65517
17   Delivery 2000   91.0299168   47.211931   125.35626
18      Other 2000   31.5885924   16.087480    46.28089
19 Regulatory 2000   31.7628775   21.082236    40.29969
20   Transfer 2000 9203.9975199 2349.851364 14382.00472 
```

现在剩下的就是绘制这个（好吧，以及同一模型的其他几个版本）。我正在玩 ggplot。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:53:04.027

我不知道你的数组的尺寸，但这里有一个例子：

```
dat <- array(sample(1:5,10*4*5,rep=TRUE),c(10,4,5)) 
```

在这里使用`dimnames`是一个好主意，因为您有很多维度，这将帮助您了解聚合函数的输出。您只需要提供具有良好尺寸的名称列表。

```
dimnames(dat)=list(paste('year',1:10,sep=''),          ## 10 years
                   paste('group',letters[1:4],sep=''), ## 4 groups
                   paste('iter',1:5,sep=''))           ## 5 iterations 
```

然后使用`apply`通过迭代获取手段

```
apply(dat,3,rowMeans)
       iter1 iter2 iter3 iter4 iter5
year1   2.25  3.00  3.75  3.00  3.00
year2   3.00  3.00  3.00  2.25  3.25
year3   3.75  3.50  3.50  3.50  3.50
year4   2.00  2.25  3.50  1.50  3.50
year5   2.50  2.50  3.50  2.75  3.50
year6   2.75  3.75  2.00  4.00  2.50
year7   3.50  2.50  3.50  2.50  2.75
year8   3.25  2.75  4.50  2.50  3.75
year9   4.50  3.25  3.25  3.00  2.25
year10  1.75  4.25  3.25  1.50  2.00 
```

多年来按组获得手段

```
> apply(dat,3,colMeans)
       iter1 iter2 iter3 iter4 iter5
groupa   3.1   3.0   3.3   2.8   2.9
groupb   2.7   3.6   3.0   2.8   2.7
groupc   3.6   3.3   3.4   2.1   3.3
groupd   2.3   2.4   3.8   2.9   3.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:42:28.373

您想将数据放入数据框而不是矩阵，然后使用公式接口来`aggregate`.

理想情况下，您希望以可以直接读入数据框的形式获得 MCMC 输出，但如果您被矩阵卡住，则使用`melt`or `reshape`+`as.data.frame`或执行类似的操作（假设您有一个`M`使用三个上面讨论的尺寸）：

```
d<-data.frame(year=rep(1991:1995,each=40),
              agency=rep(c("D","O","T","R"),50),
              iteration=rep(0:9,5,each=4),
              spend=as.vector(M)) 
```

为了得到一个看起来像这样的数据框：

```
 year agency iteration      spend
1 1996      D         0  49.184181
2 1996      O         0   4.351598
3 1996      R         0  16.051958
4 1996      T         0 -14.896019   
5 1996      D         1  45.910362
6 1996      O         1   2.173807
7 1996      R         1  17.161775
... 
```

现在您可以使用`aggregate`来应用您的功能，如下所示：

```
aggregate(spend~agency+year,d,myfunc) 
```

要得到

```
 agency year   spend.V1 spend.2.5% spend.97.5%
1       D 1996  35.380610   3.989422   54.098005
2       O 1996   2.634854  -2.700893    8.223760
3       R 1996  13.607076   3.737874   17.111344
4       T 1996 -32.289610 -66.065034   -4.669537
5       D 1997  37.588003   4.231116   57.039164
6       O 1997  10.818397   3.755926   16.918627
... 
```

现在你可以随心所欲地切片和切块

```
aggregate(spend~year,d,myfunc)
aggregate(spend~agency,d,myfunc)
etc... 
```

# sd-card - 安装在 sd 卡中时如何减小应用程序大小

> ID：15417318
> 
> 赞同：0
> 
> 时间：2013-03-14T18:27:08.173
> 
> 标签：sd-card, internal, apk

我最近开始开发一个简单的应用程序，它只有很少 KB（小于 20KB）的资源，其中大部分是 png 图像。我在应用程序清单上写了应用程序应该更喜欢外部存储。

问题是应用程序大小仅从 680KB 减少到 500KB。我见过一些游戏在移动到 SD 卡时将其应用程序大小从 10MB 减少到 200KB。由于我的手机只有 70MB 可用的内部存储空间，而没有从 google play 安装任何内容，因此对于具有单个活动的应用程序来说似乎很愚蠢，其中包含一些按钮和文本框以及 2 个 32X32 png 文件来获取 0.5 MB 数据。

在开发应用程序时我应该怎么做才能使其大部分移动到 sd 卡上？我并不真正关心apk文件的大小，而是内部存储上的剩余数据，因为购买4GB sd卡比购买具有更大内存的新手机相当便宜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T16:05:53.213

看起来有一个专门为此目的而设计的工具，谷歌建议开发人员使用它。它称为[proguard](http://developer.android.com/tools/help/proguard.html)。它对应用程序的大小有奇效。

# javascript - JavaScript - 使用 DDL 更改图像的 src

> ID：15417320
> 
> 赞同：0
> 
> 时间：2013-03-14T18:27:13.560
> 
> 标签：javascript, image, src

环顾四周，找不到任何似乎适合我需要的东西。我希望能够将 T 恤的图像更改为一种不同的颜色，具体取决于在下拉菜单中选择的颜色。

这是 DDL：

```
<select name="Colours" onchange = "changeImage()">
                    <option value="White">White</option>
                    <option value="Red">Red</option>
                    <option value="Blue">Blue</option>
                    <option value="Yellow">Yellow</option>
                    <option value="Purple">Purple</option>
            </select> 
```

这是我编写的 JS 函数（每个选项都重复 switch 语句）：

```
 <script type="text/javascript">
               function changeImage(){
                       var x = document.getElementById("Colours").value;
                       switch(x){
                       case "White":
                                  document.Mainimg.src = images/white.jpg;
                                  location.reload();
                                  break;
                       case "Red":
                                 document.Mainimg.src = images/red.jpg;
                                 location.reload();
                                 break; 
```

最后，如果需要，图像的代码：

```
 <div id="main_img">
                    <img id="Mainimg" name="Mainpic" src=images/white.jpg>
                </div> 
```

这不起作用，当我在列表中选择一个新选项时没有任何反应。我对如何做到这一点有完全错误的想法还是只是一个简单的调整？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:28:32.917

删除`location.reload()`：当您重新加载页面时，您会丢失所做的更改。您更改`src`图像的事实足以加载它。

使用 getElementById 获取您的图像并将 URL 放在引号之间：

```
document.getElementById('Mainimg').src = "images/white.jpg"; 
```

只需使用显示编译错误的控制台就可以发现缺少的引号。使用[控制台](https://developers.google.com/chrome-developer-tools/docs/console)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:46:29.500

也许你想要做的是：http: [//jsfiddle.net/jWbUv/](http://jsfiddle.net/jWbUv/)

HTML：

```
<select name="Colours" onchange = "changeImage(this)">
                    <option value="">please select</option>
                    <option value="White">White</option>
                    <option value="Red">Red</option>
                    <option value="Blue">Blue</option>
                    <option value="Yellow">Yellow</option>
                    <option value="Purple">Purple</option>
            </select>
 <div id="main_img">
 </div> 
```

JS：

```
function changeImage(src) {
    var mainImg = document.getElementById('main_img');
    mainImg.style.setProperty('background-image', 'url(\''+ src.value +'.png\')');
} 
```

CSS：

```
 #main_img {
        width: 100px;
        height: 100px;
        background-size: contain;
        background-repeat: no-repeat;
    } 
```

# ios - 调整 UISearchDisplayController 的 UITableview 大小

> ID：15417325
> 
> 赞同：1
> 
> 时间：2013-03-14T18:27:27.133
> 
> 标签：ios, uitableview, uisearchdisplaycontroller

我在布局中使用了两个相互重叠的搜索栏，如下所示：

![双搜索栏](../Images/94f225a858772eeb1739683a9447a057.png)

两个搜索栏都有一个显示建议表的 UISearchDisplayController。

我的问题是，顶部搜索栏的显示控制器将其 UITable 绘制在底部搜索栏上，如下所示：

![在底栏上画](../Images/5d8297333a87fdbc9b620e57c652fa8e.png)

我试图在 uisearchdisplaydelegate 中向下移动底部表格，如下所示：

```
- (void)searchDisplayController:(UISearchDisplayController *)controller      
didLoadSearchResultsTableView:(UITableView *)tableView
{
float yOffset = 50.0f;
tableView.frame =  CGRectMake(tableView.frame.origin.x,tableView.frame.origin.y + yOffset,tableView.frame.size.width, tableView.frame.size.height);                                  
} 
```

但是即使该方法在正确的时间被调用，它似乎也没有做任何事情。

我基本上喜欢顶部搜索栏建议表位于与底部搜索栏建议表相同的位置

我正在使用故事板和自动布局最新的 xcode

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T21:42:29.367

在 iOS 7 中，您只需将 y 原点设置为 yOffset。如果您打印出表格视图的框架

-(void)searchDisplayController:(UISearchDisplayController *)控制器 didShowSearchResultsTableView:(UITableView *)tableView

您会注意到 origin.y 位于 0,0。然而，在 iOS 6 中，情况有所不同。如果您计划同时支持这两个版本，则需要在那里进行检查。尝试在上面提到的委托方法中设置 origin.y。

# javascript - 正则表达式替换逗号

> ID：15417326
> 
> 赞同：0
> 
> 时间：2013-03-14T18:27:29.497
> 
> 标签：javascript, regex

我有一个看起来像这样的变量：

```
var name = 'John, Doe'; 
```

这个名字也可以这样表示：

```
var name = 'john , doe'; 
```

或者

```
var name = 'john ,doe'; 
```

甚至

```
var name = 'john    ,   doe'; 
```

在所有情况下，我想让这个名字最终是这样的：

```
var name = 'john*doe'; 
```

通过执行以下操作，我已经违反了 DRY 原则：

```
name= name.replace(' ,', '*');
name= name.replace(', ', '*');
name = name.replace(',', '*'); 
```

这甚至没有考虑额外的空白。有没有我可以申请的正则表达式模式来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:29:48.700

试试下面这个？

```
name = name.replace(/\s*,\s*/, '*'); 
```

@Bergi 的回答还添加了`g`标记以捕获所有逗号（带空格），因此根据您的输入，这也可能有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T18:29:58.537

您可以使用[多次重复的](http://www.regular-expressions.info/repeat.html)[`\s`空白字符类](http://www.regular-expressions.info/charclass.html) ：

```
name = name.replace(/\s*,\s*/g, '*'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T18:28:57.710

您可以执行以下操作

```
name = name.replace(/[ ]*,[ ]*/, '*'); 
```

*为了清楚起见，我在 [] 中放置了空格。*

请注意，JavaScript 中的正则表达式需要`/`围绕它。该模式匹配 0 或 1 个空格，然后是逗号，然后是 0 或 1 个空格。

* * *

如果可以有制表符，也可以使用`\s`而不是空格。将`\s`匹配任何类型的空间。所以 ：

```
name = name.replace(/\s*,\s*/, '*'); 
```

# c++ - 有关变量等函数的更多信息？

> ID：15417329
> 
> 赞同：1
> 
> 时间：2013-03-14T18:27:42.073
> 
> 标签：c++, function, variables

在阅读有关右值的文章时，我偶然发现了一段代码：

```
int main()
{
    int& foo();
} 
```

而且我不太确定括号中的`foo()`含义是什么意思，或者它是如何使用的。我假设它与函数有关，但我可能是错的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:29:11.987

它是一个`foo`不带参数并返回对整数的引用的函数声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:29:32.400

它在另一个函数的范围内声明一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:31:02.343

它是稍后定义的函数的局部声明。它是本地的，可以在本地使用。

# java - 我可以重新排序现有的 XML 以遵守 XSD

> ID：15417330
> 
> 赞同：3
> 
> 时间：2013-03-14T18:27:42.953
> 
> 标签：java, xml, xsd

我们正在使用 Java ( *org.w3c.dom.Node* ) 生成 XML，基本上使用

```
parent.appendChild(doc.createElement(nodeName)); 
```

这会生成一个 XML，其中节点按调用“appendChild”的顺序排序。然而，最终的 XML 需要遵守给定的 XSD。我们的代码可以确保有效的值类型、必填字段等都可以。然而，我在节点顺序上苦苦挣扎。

是否有任何方法：

*   插入时确保节点顺序与 XSD 匹配
*   创建后根据 XSD 对整个 XML 重新排序

澄清：

我们拥有的是：

```
<myNodeA>...</myNodeA>
<myNodeC>...</myNodeC>
<myNodeB>...</myNodeB> 
```

XSD 想要的是：

```
<myNodeA>...</myNodeA>
<myNodeB>...</myNodeB>
<myNodeC>...</myNodeC> 
```

谢谢，西蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T21:53:23.520

我之前通过遍历模式然后从 XML 模型中提取相关部分并沿途对其进行流式传输来完成此操作。

有多个 xsd 模型库可供使用：

*   xsom
*   练习
*   xml架构

这是一个使用 xsom（可以替换为上述之一）和 xom（可以替换为 dom）的示例

主要的：

```
package main;

import java.io.File;
import java.io.FileOutputStream;
import java.io.OutputStream;

import javax.xml.stream.XMLOutputFactory;
import javax.xml.stream.XMLStreamWriter;

import node.xom.WrappedDocument;
import nu.xom.Builder;
import nu.xom.Document;
import nu.xom.Element;
import reorder.xsom.UncheckedXMLStreamWriter;
import reorder.xsom.XSVisitorWriteOrdered;

import com.sun.xml.xsom.XSElementDecl;
import com.sun.xml.xsom.XSSchemaSet;
import com.sun.xml.xsom.parser.XSOMParser;

public class ReorderXmlToXsd {
  public static void main(String[] args) throws Exception {
    File unorderedXml = new File("unordered.xml");
    File xsd = new File("your.xsd");
    File orderedXml = new File("ordered.xml");

    XSOMParser p = new XSOMParser();
    p.parse(xsd);
    XSSchemaSet parsed = p.getResult();

    Builder xom = new Builder();
    Document unorderedDoc = xom.build(unorderedXml);
    Element unorderedRoot = unorderedDoc.getRootElement();

    XSElementDecl root = parsed.getElementDecl(
        unorderedRoot.getNamespaceURI(),
        unorderedRoot.getLocalName());

    XMLOutputFactory stax = XMLOutputFactory.newInstance();

    try (OutputStream to = new FileOutputStream(orderedXml)) {
      XMLStreamWriter using = stax.createXMLStreamWriter(to, "UTF-8");

      root.visit(
          new XSVisitorWriteOrdered(
              new WrappedDocument(unorderedDoc),
              new UncheckedXMLStreamWriter(using)));
    }
  }
} 
```

实际的重新排序逻辑。您可能需要进一步修改它。例如，我不必为我的项目处理 xsd:any。

```
package reorder.xsom;

import node.WrappedNode;

import com.sun.xml.xsom.*;
import com.sun.xml.xsom.visitor.XSVisitor;

public class XSVisitorWriteOrdered implements XSVisitor {
  private final WrappedNode currNode;
  private final UncheckedXMLStreamWriter writeTo;

  public XSVisitorWriteOrdered(WrappedNode currNode, UncheckedXMLStreamWriter writeTo) {
    this.currNode = currNode;
    this.writeTo = writeTo;
  }

  @Override
  public void attributeUse(XSAttributeUse use) {
    attributeDecl(use.getDecl());
  }

  @Override
  public void modelGroupDecl(XSModelGroupDecl decl) {
    modelGroup(decl.getModelGroup());
  }

  @Override
  public void modelGroup(XSModelGroup model) {
    for (XSParticle term : model.getChildren()) {
      term.visit(this);
    }
  }

  @Override
  public void particle(XSParticle particle) {
    XSTerm term = particle.getTerm();
    term.visit(this);
  }

  @Override
  public void complexType(XSComplexType complex) {
    for (XSAttributeUse use : complex.getAttributeUses()) {
      attributeUse(use);
    }

    XSContentType contentType = complex.getContentType();
    contentType.visit(this);
  }

  @Override
  public void elementDecl(XSElementDecl decl) {
    String namespaceUri = decl.getTargetNamespace();
    String localName = decl.getName();

    for (WrappedNode child : currNode.getChildElements(namespaceUri, localName)) {
      writeTo.writeStartElement(namespaceUri, localName);

      XSType type = decl.getType();
      type.visit(new XSVisitorWriteOrdered(child, writeTo));

      writeTo.writeEndElement();
    }
  }

  @Override
  public void attributeDecl(XSAttributeDecl decl) {
    String namespaceUri = decl.getTargetNamespace();
    String localName = decl.getName();

    WrappedNode attribute = currNode.getAttribute(namespaceUri, localName);
    if (attribute != null) {
      String value = attribute.getValue();
      if (value != null) {
        writeTo.writeAttribute(namespaceUri, localName, value);
      }
    }
  }

  @Override
  public void simpleType(XSSimpleType simpleType) {
    String value = currNode.getValue();
    if (value != null) {
      writeTo.writeCharacters(value);
    }
  }

  @Override
  public void empty(XSContentType empty) {}

  @Override
  public void facet(XSFacet facet) {}

  @Override
  public void annotation(XSAnnotation ann) {}

  @Override
  public void schema(XSSchema schema) {}

  @Override
  public void notation(XSNotation notation) {}

  @Override
  public void identityConstraint(XSIdentityConstraint decl) {}

  @Override
  public void xpath(XSXPath xp) {}

  @Override
  public void wildcard(XSWildcard wc) {}

  @Override
  public void attGroupDecl(XSAttGroupDecl decl) {}
} 
```

税务作家：

```
package reorder.xsom;

import javax.xml.stream.XMLStreamException;
import javax.xml.stream.XMLStreamWriter;

public class UncheckedXMLStreamWriter {
  private final XMLStreamWriter real;

  public UncheckedXMLStreamWriter(XMLStreamWriter delegate) {
    this.real = delegate;
  }

  public void writeStartElement(String namespaceUri, String localName) {
    try {
      real.writeStartElement(namespaceUri, localName);
    } catch (XMLStreamException e) {
      throw new RuntimeException(e);
    }
  }

  public void writeEndElement() {
    try {
      real.writeEndElement();
    } catch (XMLStreamException e) {
      throw new RuntimeException(e);
    }
  }

  public  void writeAttribute(String namespaceUri, String localName, String value) {
    try {
      real.writeAttribute(namespaceUri, localName, value);
    } catch (XMLStreamException e) {
      throw new RuntimeException(e);
    }
  }

  public void writeCharacters(String value) {
    try {
      real.writeCharacters(value);
    } catch (XMLStreamException e) {
      throw new RuntimeException(e);
    }
  }
} 
```

xml 视图：

```
package node;

import java.util.List;

import javax.annotation.Nullable;

public interface WrappedNode {
  List<? extends WrappedNode> getChildElements(String namespaceUri, String localName);

  @Nullable
  WrappedNode getAttribute(String namespaceUri, String localName);

  @Nullable
  String getValue();
} 
```

XOM 实现：

文档：

```
package node.xom;

import java.util.Collections;
import java.util.List;

import node.WrappedNode;
import nu.xom.Document;
import nu.xom.Element;

public class WrappedDocument implements WrappedNode {
  private final Document d;

  public WrappedDocument(Document d) {
    this.d = d;
  }

  @Override
  public List<WrappedElement> getChildElements(String namespaceUri, String localName) {
    Element root = d.getRootElement();
    if (isAt(root, namespaceUri, localName)) {
      return Collections.singletonList(new WrappedElement(root));
    }
    return Collections.emptyList();
  }

  @Override
  public WrappedAttribute getAttribute(String namespaceUri, String localName) {
    throw new UnsupportedOperationException();
  }

  @Override
  public String getValue() {
    throw new UnsupportedOperationException();
  }

  @Override
  public String toString() {
    return d.toString();
  }

  private static boolean isAt(Element e, String namespaceUri, String localName) {
    return namespaceUri.equals(e.getNamespaceURI())
        && localName.equals(e.getLocalName());
  }
} 
```

元素：

```
package node.xom;

import java.util.AbstractList;
import java.util.List;

import node.WrappedNode;
import nu.xom.Attribute;
import nu.xom.Element;
import nu.xom.Elements;

class WrappedElement implements WrappedNode {
  private final Element e;

  WrappedElement(Element e) {
    this.e = e;
  }

  @Override
  public List<WrappedElement> getChildElements(String namespaceUri, String localName) {
    return asList(e.getChildElements(localName, namespaceUri));
  }

  @Override
  public WrappedAttribute getAttribute(String namespaceUri, String localName) {
    Attribute attribute = e.getAttribute(localName, namespaceUri);
    return (attribute != null) ? new WrappedAttribute(attribute) : null;
  }

  @Override
  public String getValue() {
    return e.getValue();
  }

  @Override
  public String toString() {
    return e.toString();
  }

  private static List<WrappedElement> asList(final Elements eles) {
    return new AbstractList<WrappedElement>() {
      @Override
      public WrappedElement get(int index) {
        return new WrappedElement(eles.get(index));
      }

      @Override
      public int size() {
        return eles.size();
      }
    };
  }
} 
```

属性：

```
package node.xom;

import java.util.List;

import node.WrappedNode;
import nu.xom.Attribute;

class WrappedAttribute implements WrappedNode {
  private final Attribute a;

  WrappedAttribute(Attribute a) {
    this.a = a;
  }

  @Override
  public List<WrappedNode> getChildElements(String namespaceUri, String localName) {
    throw new UnsupportedOperationException();
  }

  @Override
  public WrappedNode getAttribute(String namespaceUri, String localName) {
    throw new UnsupportedOperationException();
  }

  @Override
  public String getValue() {
    return a.getValue();
  }

  @Override
  public String toString() {
    return a.toString();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:37:17.437

我不认为这样的事情存在。简单的重新排序可能是可能的，但是 XML-Schema 允许定义如此多的约束，以至于不可能编写一个通用工具来根据某些模式将一些 XML 文档转换为有效文档。

因此，首先要正确构建文档。

# android - Android应用程序在崩溃时

> ID：15417338
> 
> 赞同：0
> 
> 时间：2013-03-14T18:28:03.700
> 
> 标签：android, button, crash, while-loop

当我按下一个按钮时，我的应用程序应该会启动一段时间，然后在我单击同一个按钮时停止它。应用程序进入并播放一次声音然后崩溃。为什么？

Java代码：

```
 metronomepp.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (ms==0) {ms=1;}
            while (ms == 1) {
                if (metronome.isPlaying()) {metronome.pause();}
                metronome.seekTo(0);
                metronome.setOnSeekCompleteListener(null);
                metronome.start();
                metronome.setOnCompletionListener(null);
                try {
                    wait ((long) timetw);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                metronomepp.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                        Log.i("Metronome", "InWhile1");
                        ms=0;
                    }
                });
            }
        }
    }); 
```

按下按钮后的 LogCat：

```
03-14 19:10:30.584: I/Metronome clicked(25448): 1
03-14 19:10:30.584: I/Metronome(25448): InWhile
03-14 19:10:30.584: V/MediaPlayer(25448): isPlaying: 0
03-14 19:10:30.584: V/MediaPlayer-JNI(25448): isPlaying: 0
03-14 19:10:30.584: V/MediaPlayer-JNI(25448): seekTo: 0(msec)
03-14 19:10:30.584: V/MediaPlayer(25448): seekTo 0
03-14 19:10:30.584: V/MediaPlayer(25448): getDuration
03-14 19:10:30.584: V/MediaPlayer(25448): message received msg=4, ext1=0, ext2=0
03-14 19:10:30.589: V/MediaPlayer(25448): Received seek complete
03-14 19:10:30.589: V/MediaPlayer(25448): All seeks complete - return to regularly scheduled program
03-14 19:10:30.589: V/MediaPlayer(25448): callback application
03-14 19:10:30.589: V/MediaPlayer(25448): back from callback
03-14 19:10:30.589: V/MediaPlayer-JNI(25448): start
03-14 19:10:30.589: V/MediaPlayer(25448): start
03-14 19:10:30.619: D/AndroidRuntime(25448): Shutting down VM
03-14 19:10:30.619: W/dalvikvm(25448): threadid=1: thread exiting with uncaught exception (group=0x40c581f8)
03-14 19:10:30.624: E/AndroidRuntime(25448): FATAL EXCEPTION: main
03-14 19:10:30.624: E/AndroidRuntime(25448): java.lang.IllegalMonitorStateException: object not locked by thread before wait()
03-14 19:10:30.624: E/AndroidRuntime(25448):    at java.lang.Object.wait(Native Method)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at java.lang.Object.wait(Object.java:401)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at com.example.guitartools.MetronomeActivity$3.onClick(MetronomeActivity.java:72)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.view.View.performClick(View.java:3627)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.view.View$PerformClick.run(View.java:14329)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.os.Handler.handleCallback(Handler.java:605)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.os.Looper.loop(Looper.java:137)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.app.ActivityThread.main(ActivityThread.java:4511)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at java.lang.reflect.Method.invokeNative(Native Method)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at java.lang.reflect.Method.invoke(Method.java:511)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at dalvik.system.NativeStart.main(Native Method)
03-14 19:10:30.969: V/MediaPlayer(25448): message received msg=2, ext1=0, ext2=0
03-14 19:10:30.969: V/MediaPlayer(25448): playback complete
03-14 19:10:30.969: V/MediaPlayer(25448): callback application
03-14 19:10:30.969: V/MediaPlayer(25448): back from callback 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:44:42.343

您可能想尝试使用[runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable))。你需要一个单独的线程。你不希望你的`UI`线程`sleep`或`wait`

[这是一个相关的SO问题](https://stackoverflow.com/questions/11140285/how-to-use-runonuithread/11140429#11140429)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:55:17.770

你不应该阻塞主线程：

```
at java.lang.Object.wait(Native Method)
...
at android.app.ActivityThread.main(ActivityThread.java:4511) 
```

Android 的推荐方法是使用 Handler 和 Runnable，如下所示：

```
metronomepp.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        if (ms==0) {ms=1;}

        if (ms==1) {
            metronomepp.postDelayed(new Runnable() {
                @Override
                public void run() {
                    metronomepp.setOnClickListener(new OnClickListener() {
                        public void onClick(View v) {
                            Log.i("Metronome", "InWhile1");
                            ms=0;
                        }
                    });
                }
            }, timetw);
        }

        while (ms == 1) {
            if (metronome.isPlaying()) {metronome.pause();}
            metronome.seekTo(0);
            metronome.setOnSeekCompleteListener(null);
            metronome.start();
            metronome.setOnCompletionListener(null);
        }
    }
}); 
```

`postDelayed()``timetw`在第二个参数 ( )中传递的毫秒数之后执行 Runnable 中的代码。

# d3.js - 如何在d3.js中获取父节点的数据

> ID：15417340
> 
> 赞同：48
> 
> 时间：2013-03-14T18:28:12.970
> 
> 标签：d3.js

我在 D3 和嵌套元素中进行嵌套，我需要到达其父级上的数据对象。

现在我正在做

```
d3.select(this).node().parentNode.__data__; 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-07-03T23:30:32.490

`d3.select(this).node()`与仅`this`在传递给 D3 选择的函数的上下文中相同。您可以像这样重做它`d3.select(this.parentNode).datum()`并获得正确的值，而不必使用丑陋的双下划线属性。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-14T21:16:51.280

我熟悉的另一种方法是`.each()`在父级上使用，然后在闭包内处理子级：

```
d3.selectAll('.parent').each(function(parentDatum) {
    d3.select(this).selectAll('.child').each(function(childDatum) {
        // do stuff with parentDatum and childDatum here
    });
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-16T16:26:00.213

当我遇到完全相同的问题时，我发现了这篇文章。我的解决方案是更改选择以传递我在子节点中需要的数据，如果您可以忍受节点中的数据冗余，我认为这可能是一种有效的方法。

```
[
  {
    title: "Google",
    link: "www.google.com",
    languagePath : "en,fr,it"
  },

  ...
] 
```

为了帮助解释，我在表格的上下文中使用了它，有两列。对于每个项目，第一列具有`title`，第二列具有。`a``accept-language`

`languagePath`因此，我对每个呼叫的拆分进行了子选择`enter`，我将创建一个`a`以文本为语言的内容。

所以此时我还需要`link`, 使`a`元素看起来像：

```
<a href="www.google.com/en">EN</a>
<a href="www.google.com/fr">FR</a> 
```

但是这`link`不是传递给这个孩子的数据的一部分，所以当我做选择而不是做：

```
var langLinks = tableRow
     .append("td")
     .selectAll("span")
     .data(function(d) {
        return d.languagePath.split(",")
      }) 
```

我做了

```
 var langLinks = tableRow
     .append("td")
     .selectAll("span")
     .data(function(d) {
        return d.languagePath.split(",").map(function(item) {
                 return {
                   lang : item,
                   link : d.link
               })
      }) 
```

所以，当我处理`data`这个`enter()`选择时，我确实有父母的数据。

希望这对你们中的某些人来说是一个有效的选择，它确实帮助了我。

# node.js - facebook请求的快速路线

> ID：15417345
> 
> 赞同：2
> 
> 时间：2013-03-14T18:28:26.013
> 
> 标签：node.js, routes, express

我有一个请求进入我的应用程序，如下所示：

```
POST /?post%2F5125504547b49d91b2000001 200 53ms - 9.35kb 
```

其中，当未编码时看起来像：

```
POST /?post/5125504547b49d91b2000001 200 53ms - 9.35kb 
```

我的问题是如何通过快速路线捕捉到这一点？

我尝试了以下方法：

```
app.all "/?post/:id",

app.all "/?post%2F:id", 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:31:03.710

路由路径定义是一个正则表达式，因此您需要[双重转义](https://stackoverflow.com/a/889978/112196)问号，这是一个特殊字符

```
app.all "/\\?post%2F:id" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:48:15.597

我建议使用中间件将 url 操纵回“正常”的东西，以便您可以像在 express 中那样路由和响应它。

也许像这样的伪代码：

```
 app.use(function (req, res, next) {
    if (req.originalUrl.match(/^\/(\?post)/))
      req.url = req.originalUrl = req.originalUrl.replace('%2F', '/').replace('/?','/');
    next();
  }); 
```

# visual-c++ - 在头文件中更改类成员变量的访问说明符同时保持与之关联的 dll 不变是否安全？

> ID：15417348
> 
> 赞同：0
> 
> 时间：2013-03-14T18:28:31.790
> 
> 标签：visual-c++

我在 Visual Studio 2008 上使用 C++。

我在我的应用程序中使用了第 3 方库 (BCG)。我需要更改 BCG 类的成员变量的访问说明符（从受保护到公共）。问题是：仅在包含在我的应用程序中的头文件中更改访问说明符而不重新生成 dll 文件是否安全？有可能做到这一点，而且从表面上看，它似乎工作正常。但是我不确定它是否安全。

我正在尝试从该第三方库中使用的类派生，为了实现我想要的，我需要从另一个类访问受保护的变量。我希望进行破坏性最小的更改（以供将来集成），因此我想避免更改 dll 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:51:22.053

实例成员访问不涉及链接器中的任何符号修复。相反，成员的身份编译为针对对象指针的偏移量，因此名称修改和其他链接问题不会进入其中。这就是为什么它似乎对你有用。

通常，修改描述由您无法重建的 DLL 发布的类的标头显然是危险的行为，因此请谨慎行事。

# wpf - caliburn.micro 会在 ViewModel 上使用异步方法做正确的事情吗？

> ID：15417354
> 
> 赞同：7
> 
> 时间：2013-03-14T18:28:43.493
> 
> 标签：wpf, async-await, caliburn.micro

正如其他地方所提到的，新的 .NET async/await 模型像病毒一样通过软件层传播。最近的异步更改现在已经出现在我的视图模型中，我想知道从`public void DoStuff()`to是否是安全的更改声明`public async Task DoStuff()`？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-16T09:05:05.667

现在 Caliburn.Micro 对异步编程模型的支持已经很好了。

您可以做的几件事：

*   **在 Action 方法中使用 async/await**。请注意，由于操作方法在技术上是事件处理程序，因此您应该这样做`async void`而不是`async Task`.
*   **Screen 事件的异步事件处理程序**，如 Activated、ViewLoaded 等。
*   **Screen 方法的异步覆盖**：OnInitialize、OnActivate、...您可以覆盖 then，因为`protected override async void OnInitialize(){}`您可以在内部等待另一个任务。
*   **将协程转换为任务**。使用`ExecuteAsync()`扩展方法。协程在某些场景下仍然有一些优势，比如执行上下文。
*   `IHandleWithTask<TMessage>`- 很方便...

有[一篇博客文章描述了一些](https://caraulean.com/2013/using-caliburn-micro-with-async-await/)带有少量代码片段的用例。还有一个[GitHub 存储库，其中包含](https://github.com/vcaraulean/CaliburnMicro.AsyncDemo)我曾经在 Caliburn 中使用 async/await 的示例项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:35:26.193

答案是肯定的，从 Caliburn.Micro 1.5 开始。

见[发布公告](http://devlicio.us/blogs/rob_eisenberg/archive/2013/03/18/durandal-1-2-0-and-caliburn-micro-1-5-0-released.aspx?)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-10T06:48:13.043

它是安全的，但会破坏您现有的全局异常处理。在我进行重构之后，我不再看到任何错误对话框，为了解决这个问题，我必须订阅该`Coroutine.Completed`事件：

```
Coroutine.Completed += (s, a) =>
{
    //Do something here ...
}; 
```

你可以在你的`App.xaml.cs`文件中做到这一点。

我的代码中关于如何处理我的应用程序中出现的所有可能错误的示例：

```
protected override void OnStartup(StartupEventArgs e)
{
    SetupExceptionHandlers();
    base.OnStartup(e);
}

private void SetupExceptionHandlers()
{
    AppDomain.CurrentDomain.UnhandledException += (s, a) =>
    {
        HandleException((Exception)a.ExceptionObject, "AppDomain.CurrentDomain.UnhandledException");
    };

    Current.DispatcherUnhandledException += (s, a) =>
    {
        HandleException(a.Exception, "Application.Current.DispatcherUnhandledException");
        a.Handled = true;
    };

    TaskScheduler.UnobservedTaskException += (s, a) =>
    {
        Dispatcher.InvokeAsync(() => HandleException(a.Exception, "TaskScheduler.UnobservedTaskException"));
        a.SetObserved();
    };

    Coroutine.Completed += (s, a) =>
    {
        if (a.Error != null)
        {
            HandleException(a.Error, "Coroutine.Completed");
        }
    };
}

private void HandleException(Exception exception, string source)
{
    logger.Error(exception, "Unhandled exception occured (Source: {0})", source);

    var msg = new ShowErrorDialogEvent(exception, exception.GetBaseException().Message);
    eventAggregator.PublishOnUIThread(msg);
} 
```

如果您想知道，`logger`和`eventAggregator`变量`OnStartup`在调用`DisplayRootViewFor`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T22:49:54.817

[Caliburn.Micro 项目的项目经理Marco Amendola](http://www.codeplex.com/site/users/view/marcoamendola)写了一篇文章，标题[是：协程已死。协程万岁。](http://marcoamendola.wordpress.com/2012/10/16/coroutines-are-dead-long-live-coroutines/)他这样命名它是因为异步/等待编程模型的出现，如果你阅读这篇文章，你会发现异步/等待让 Coroutines 过去所做的事情变得栩栩如生，所以我假设你可以在你拥有的地方安全地使用它们之前用过协程。我建议你阅读这篇文章。

# java - MVC 模型包含什么？它可以只保存 Hibernate POJO 吗？

> ID：15417361
> 
> 赞同：0
> 
> 时间：2013-03-14T18:29:02.673
> 
> 标签：java, ajax, hibernate, model-view-controller

我对基于`Spring+Hibernate+IceFaces`. 如果我们选择`MVC pattern + ajax`，在 MVC 中传递给视图的模型应该持有什么样的数据？

我是否必须创建从 Hibernate 提取数据的域对象？如果我只是使用 Hibernate DAO/pojo 作为模型数据，会不会有影响？

在前端，我们有视图的值对象。但是，我们需要做很多工作才能使 VO 与 Hibernate 持久实体同步。这对 AJAX 调用不利。如果我们只是`POJO`用作视图对象，我唯一需要担心的是序列化。这看起来很简单。不太确定这是否有效。优点和缺点？有什么建议么？

# meteor - 如何向 Meteor.users 集合添加转换？

> ID：15417365
> 
> 赞同：8
> 
> 时间：2013-03-14T18:29:07.427
> 
> 标签：meteor

如何向 Meteor.users 集合添加转换？

我试过了：`Users = new Meteor.Collection 'users'`但这会破坏 Meteor，因为该集合已经存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T18:42:56.060

我至少想出了如何破解它。

Meteor.users 集合有一个 _transform 属性，就像所有其他集合一样。

做就是了：

```
Meteor.users._transform = function(user) { 
  // attach methods, instantiate a user class, etc.
  // return the object
} 
```

把它挂起来！凉爽的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T19:26:44.083

听起来像使用 _transform 可能会导致问题，不幸的是使用包装器更安全，这两者都有点hacky。

来源和更多细节：[https ://github.com/meteor/meteor/issues/810#issuecomment-15069258](https://github.com/meteor/meteor/issues/810#issuecomment-15069258)

# c# - C# 使用文本框将记录添加到 DataBound DataGridView

> ID：15417369
> 
> 赞同：1
> 
> 时间：2013-03-14T18:29:12.913
> 
> 标签：c#, datagridview, ssms

我是整个 C# 数据库的新手。我在 SQL Server Management Studio 2012 中创建了一个数据库，然后通过从 Visual C# 中的 DataGridView 任务中选择 DataSource 将其连接到 DataGrid（在 Windows 窗体中）。我想要做的是用新的记录数据填充 texboxes，然后按下一个按钮，将文本框信息添加到 DataGrid 中的新行。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:47:11.607

您可以通过结合使用网格视图的 onrowdatabound 方法和模板字段来做到这一点

```
<asp:GridView ID="gridview" OnRowDataBound="grd_OnRowDataBound">
   <Columns>
      <asp:TemplateField HeaderText="#">
         <ItemTemplate>
            <asp:Label ID="id" runat="server" Text='<%# Bind("data value") %>'></asp:Label>
         </ItemTemplate>
      </asp:TemplateField>
   </Columns>
</asp:GridView> 
```

然后在后端创建方法如下

```
 protected void grd_OnRowDataBound(Object sender, GridViewRowEventArgs e)
    {
         if (e.Row.RowType == DataControlRowType.DataRow)
         {
             TextBox txtbox = (TextBox)e.Row.FindControl("id");
         }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:50:54.147

您可以尝试以下概念。请看我的笔记没有。3也一样。

```
public Form1()
{
    ds = new DataSet();
    // 1\. Create connection.
    conn = new OleDbConnection(@"connection_string.");
    // 2\. init SqlDataAdapter with select command and connection
    da = new OleDbDataAdapter("Select * from YouRtable", conn);

    // 3\. fill in insert, update, and delete commands 

       (For No. 3 - You can search around the internet on how to construct a SQL Command). You can refer the values that you to insert from the textboxes that you have.)

    OleDbCommandBuilder cmdBldr = new OleDbCommandBuilder(da);
    da.Fill(ds, "YouRtable");
    dataGridView2.DataSource = ds;
    dataGridView2.DataMember = "YouRtable";
}

//Here is your save/update button code.
private void btnSaveGridData_Click(object sender, EventArgs e)
{
    da.Update(ds, "YouRtable");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:24:33.490

这可能是您想要的。在您的 sql server 数据库中创建一个表，如下所示

```
CREATE TABLE [dbo].[StudentInfo](
    [StudentId] [numeric](2, 0) IDENTITY(1,1) NOT NULL,
    [SName] [varchar](35) NOT NULL,
    [FName] [varchar](35) NOT NULL,
    [Class] [varchar](35) NOT NULL,
 CONSTRAINT [PK_StudentInfo] PRIMARY KEY CLUSTERED 
(
    [StudentId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO 
```

现在在您的 Windows 应用程序中使用此编码来更新删除和保存创建的表中的数据

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace WindowsFormsApplication6
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            this.DataGrid.CellClick += new System.Windows.Forms.DataGridViewCellEventHandler(this.DataGrid_CellClick);
        }
        SqlConnection cn = new SqlConnection("data source=localhost;initial catalog=acc;integrated security=true");
        private void Form1_Load(object sender, EventArgs e)
        {
            TBStudentID.Enabled = false;
            GetData();
        }
        private void GetData()
        {
            SqlDataAdapter da = new SqlDataAdapter("select * from StudentInfo", cn);
            DataTable dt = new DataTable();
            da.Fill(dt);
            DataGrid.DataSource = dt;
        }
        private void BtnSave_Click(object sender, EventArgs e)
        {
            SqlCommand cmd = new SqlCommand("insert into StudentInfo(SName, FName, Class) values('" + TBSName.Text + "','" + TBFName.Text + "','" + TBClass.Text + "')", cn);
            cn.Open();
            cmd.ExecuteNonQuery();
            cn.Close();
            GetData();
        }
        // using this CellClick event you will be able to get the selected row values
        // in Respective TextBoxes by clicking any of the datagridview rows
        private void DataGrid_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            try
            {
                TBStudentID.Text = DataGrid.Rows[e.RowIndex].Cells[0].Value.ToString();
                TBSName.Text = DataGrid.Rows[e.RowIndex].Cells[1].Value.ToString();
                TBFName.Text = DataGrid.Rows[e.RowIndex].Cells[2].Value.ToString();
                TBClass.Text = DataGrid.Rows[e.RowIndex].Cells[3].Value.ToString();
            }
            catch (Exception)
            {
            }
        }
        private void TextBoxClear()
        {
            TBStudentID.Text = null;
            TBSName.Text = null;
            TBFName.Text = null;
            TBClass.Text = null;
        }
        private void BtnDelete_Click(object sender, EventArgs e)
        {
            SqlCommand cmd = new SqlCommand("delete from StudentInfo where StudentId = '" + TBStudentID.Text + "'", cn);
            cn.Open();
            cmd.ExecuteNonQuery();
            cn.Close();
            GetData();
            TextBoxClear();
        }

        private void BtnUpdate_Click(object sender, EventArgs e)
        {
            SqlCommand cmd = new SqlCommand("update StudentInfo set SName = '" + TBSName.Text + "', FName = '" + TBFName.Text + "', Class = '" + TBClass.Text + "' where StudentId = '" + TBStudentID.Text + "'", cn);
            cn.Open();
            cmd.ExecuteNonQuery();
            cn.Close();
            GetData();
            TextBoxClear();
        }
    }
} 
```

# java - Maven & Protobuf 编译错误：在包 com.google.protobuf 中找不到符号

> ID：15417378
> 
> 赞同：24
> 
> 时间：2013-03-14T18:29:35.333
> 
> 标签：java, maven, maven-2, maven-3, protocol-buffers

我是 Linux 和 Protobuf 的新手。我需要帮助。

我正在尝试“mvn package”一个包含许多“.proto”文件的项目，当然还有一个 pom.xml 文件......

我在 Ubuntu 上工作

========================================

# 错误

当我运行“mvn package”时，我收到此错误：

后

```
...
Compiling 11 source files to .../target/classes
... 
```

我得到一堆这些错误：

```
[ERROR] .../target/generated-sources/...java:[16457,30] cannot find symbol
[ERROR] symbol  : class Parser
[ERROR] location: package com.google.protobuf
[ERROR] 
[ERROR] .../target/generated-sources/...java:[17154,37] cannot find symbol
[ERROR] symbol  : class Parser
[ERROR] location: package com.google.protobuf
[ERROR] 
[ERROR] .../target/generated-sources/...java:[17165,30] cannot find symbol
[ERROR] symbol  : class Parser
[ERROR] location: package com.google.protobuf
[ERROR] 
[ERROR] .../target/generated-sources/...java:[17909,37] cannot find symbol
[ERROR] symbol  : class Parser
[ERROR] location: package com.google.protobuf
[ERROR] 
```

========================================

# 聚甲醛

这是 pom.xml 文件，取出了 groupId 和 artifactId：

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <parent>
     <groupId>*****</groupId>
     <artifactId>*****</artifactId>
     <version>1.0-SNAPSHOT</version>
  </parent>
  <artifactId>*****</artifactId>
  <version>1.0-SNAPSHOT</version>
  <properties>
      <proto.cas.path>${project.basedir}/src</proto.cas.path>
      <target.gen.source.path>${project.basedir}/target/generated-sources</target.gen.source.path>
  </properties>
 <dependencies>
      <dependency>
                <groupId>com.google.protobuf</groupId>
                <artifactId>protobuf-java</artifactId>
                <version>2.4.1</version>
                <scope>compile</scope>
            </dependency>
  </dependencies>
  <build>
    <sourceDirectory>${project.basedir}/src</sourceDirectory>
        <plugins>
            <plugin>
               <artifactId>maven-compiler-plugin</artifactId>
               <version>2.0.2</version>
               <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                    <includes><include>**/commonapps/**</include></includes>
                </configuration>            
             </plugin>
             <plugin>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <executions>
                        <execution>
                            <id>generate-sources</id>
                            <phase>generate-sources</phase>
                            <configuration>
                                <tasks>
                                    <mkdir dir="${target.gen.source.path}" />    
                                    <path id="proto.path.files">
                                        <fileset dir="${proto.cas.path}">
                                            <include name="*.proto" />
                                        </fileset>  
                                    </path>
                                    <pathconvert pathsep=" " property="proto.files" refid="proto.path.files" />

                                    <exec executable="protoc">
                                         <arg value="--java_out=${target.gen.source.path}" />
                                         <arg value="--proto_path=${proto.cas.path}" />
                                            <arg line="${proto.files}" />
                                    </exec>
                                </tasks>
                                <sourceRoot>${target.gen.source.path}</sourceRoot>
                            </configuration>
                            <goals>
                                <goal>run</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
         </plugins>
     </build>
</project> 
```

========================================

# PROTOBUF 安装

我弄完了

```
./configure
make
make check
make install 
```

在 protobuf/ 中，

和

```
mvn test
mvn install
mvn package 
```

在 protobuf/java 中。

我把罐子放在 protobuf/java/target

并通过运行将其添加到我的 Maven 存储库中：

```
mvn install:install-file -Dpackaging=jar -DgeneratePom=true  -DgroupId=com.google.protobuf   -DartifactId=protobuf-java   -Dfile=protobuf-java-2.4.1.jar -Dversion=2.4.1 
```

请注意，我弄乱了 $LD_LIBRARY_PATH。目前，当我运行 echo 它时，我得到：

```
/usr/local/lib/:/usr/:/usr/lib/:/usr/local/ 
```

是的....你可以告诉我，我不知道设置 $LD_LIBRARY_PATH

我也跑了：

```
apt-get install protobuf-compiler 
```

========================================

# 协议安装

我忘记了我为使 protoc 工作所做的工作，但是当我运行时

```
protoc --version 
```

我明白了

```
libprotoc 2.5.0 
```

========================================

# 我的问题类似于：

[在 java 和 scala 中使用 protobuf 的问题](https://stackoverflow.com/questions/8265801/problems-using-protobufs-with-java-and-scala)

[maven编译失败](https://stackoverflow.com/questions/1589121/maven-compilation-failure)

========================================

# 可能的相关性？

[在'mvn install'之后仍然找不到包](https://stackoverflow.com/questions/12509050/still-not-find-package-after-mvn-install)

[http://www.scriptol.com/programming/protocol-buffers-tutorial.php](http://www.scriptol.com/programming/protocol-buffers-tutorial.php)

任何人都可以帮忙吗？

========================================

# 进步

显然这是一个插件失败：

[https://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException](https://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException)

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project casprotobuf: Compilation failure: Compilation failure: 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T13:33:22.867

我有同样的问题。直接从google构建protobuf源（我使用2.5.0）并做

```
mvn install:install-file -Dpackaging=jar -DgeneratePom=true  -DgroupId=com.google.protobuf   -DartifactId=protobuf-java   -Dfile=protobuf-java-2.5.0.jar -Dversion=2.5.0 
```

为我解决了这个问题。

在我之前的试验中，我注意到 /root/.m2/repository/com/google/protobuf/protobuf-java/2.5.0/ 中的 jar 文件丢失了。

也许尝试在 pom.xml 中使用 2.5.0 版本和/或手动复制 jarfile。

干杯

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-05T21:00:06.750

当安装的 protoc 版本与 pom.xml 中列出的版本不匹配时，我遇到了这个问题。匹配版本解决了问题。就我而言，我不得不将我的 protoc 版本切换回 2.4.1 以匹配 POM。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-28T14:13:21.260

必须与文件 ( )中设置的`protoc --version`版本相同。`pom.xml``protobuf-java-2.5.0.jar`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-22T14:00:25.540

我的问题是主文件夹中的一个单元测试扩展类。我解决了它：

```
<!-- Allow tests to call classes in main folder -->

<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.9.1</version>
    <executions>
        <execution>
            <id>add-source</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>add-source</goal>
            </goals>
            <configuration>
                <sources>
                    <source>src/test/java</source>
                    <source>src/main/java</source>
                </sources>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-11T05:18:08.747

对我来说，在构建脚本中使用以下内容后解决了

```
<clearOutputDirectory>false</clearOutputDirectory 
```

完整的构建脚本

```
<build>
        <extensions>
            <extension>
                <groupId>kr.motd.maven</groupId>
                <artifactId>os-maven-plugin</artifactId>
                <version>1.5.0.Final</version>
            </extension>
        </extensions>
        <plugins>
            <plugin>
                <groupId>org.xolstice.maven.plugins</groupId>
                <artifactId>protobuf-maven-plugin</artifactId>
                <version>0.5.1</version>
                <configuration>
                    <protocArtifact>com.google.protobuf:protoc:3.6.1:exe:${os.detected.classifier}</protocArtifact>
                    <pluginId>grpc-java</pluginId>
                    <pluginArtifact>io.grpc:protoc-gen-grpc-java:1.19.0:exe:${os.detected.classifier}</pluginArtifact>
                    <clearOutputDirectory>false</clearOutputDirectory>
                    <outputDirectory>${basedir}/src/main/java/</outputDirectory>

                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                            <goal>compile-custom</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-16T06:52:20.850

问题出现在您的 protoc 和 protobuf jar 之间的版本不匹配的地方，保持相同的版本它将起作用。对于依赖关系，您需要检查 pom.xml 文件。

# firefox - 阻止 Firefox 向 XMLHTTP Req 添加编译指示和缓存标头？

> ID：15417379
> 
> 赞同：-1
> 
> 时间：2013-03-14T18:29:36.437
> 
> 标签：firefox, caching, pragma, xmlhttprequest

我编写了一个发送 XHR POST 的扩展，但是添加了两个我不想要的标头：

```
Pragma: no-cache
Cache-Control: no-cache 
```

我读过有这个问题的其他人已经在开发者工具中关闭了他们的缓存，但我不记得这样做了，而且我只能说应该启用缓存。

什么可能会添加这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:06:47.590

Firefox 正在添加这些标头。相关代码注释为：

```
// Bypass the network cache in cases where it makes no sense:
// POST responses are always unique, and we provide no API that would
// allow our consumers to specify a "cache key" to access old POST
// responses, so they are not worth caching. 
```

该代码已添加到[https://bugzilla.mozilla.org/show_bug.cgi?id=295074](https://bugzilla.mozilla.org/show_bug.cgi?id=295074)

# algorithm - 寻找下一个组合的概率算法

> ID：15417393
> 
> 赞同：-1
> 
> 时间：2013-03-14T18:30:19.373
> 
> 标签：algorithm, math, statistics, probability

适合我的问题的最好例子是**彩票**，但它与彩票略有不同，但想法相似。我的程序正在从存储先前生成的数字的数据库中获取数据。数字采用以下格式：

```
...
5, 10, 11
... 
```

3个**随机**数。现在表格最多可容纳**10,000 个**先前生成的数字，表格格式如下：

```
 UniqueID (autoincrement), Number1, Number2, Number3, DateOfGeneration 
```

我需要什么样的算法，或者建议一本书来帮助我提出算法。我不是要求你为我编写代码，我只是要求一个教程、书籍或网站，以便我可以自己阅读和弄清楚。

我需要计算最有可能出现的下一个组合。意思是说，在之前生成的**10,000**个组合中，组合**3、5、19**的出现是该组合下次出现的概率的**350倍：**

```
350/10000 = 0.035 or 3.5% 
```

我会将这个 0.035 存储在具有以下结构的数组中：

```
$arrayOfCombinations[combinationisthekey] = probability 
```

例子：

```
$arrayOfCombinations['3,5,19'] = 0.035 
```

然后运行某种算法，从这个数组中随机选择最有可能出现的组合，因此组合**3、5、19**将有**0.035**的机会被选中。

我知道如何进入包含所有组合及其概率的数组的步骤。我需要能够从数组中随机选择的算法。

我是否需要考虑生成该数字的日期以使其更准确？它是否必须增加/减少概率？这些我需要但不知道在哪里寻找的因素。

感谢您提供任何建议或链接/教程，非常感谢您。

再说一次，我不是要你花时间为我写代码。我会自己写，只需要某种教程。

**编辑：（阅读本文的要点）**

我要寻找的主要内容是：我需要记住什么样的因素可以增加/减少组合的概率。例如生成数字的日期，3个数字是偶数还是奇数等......当我得到所有这些因素时，哪种算法最好（如果有的话）插入这些数据并获得准确的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:42:07.273

我想到了两种方法。

第一个切入点：您可以尝试将数字存储在数组中，索引是一个简单的数字（即索引是 1、2、3 等），而不是将概率存储在以数字作为索引的数组中。您为表中的每个条目在数组中放置一个条目，然后从数组中的 1..number 个元素中随机选择一个数字。使用此随机数从数组中提取组合。通过这种方式，您将从具有预期频率的阵列中提取组合。

另一种选择是继续使用组合作为键，但不是将概率存储在数组中，而是存储每个组合的实际出现次数（例如，存储 350 而不是 0.035）。随机选择一个从 1 到出现总数的数字并遍历数组，从随机值中减去存储在数组中的出现计数，直到随机值变为零或负数，在这种情况下，您刚刚的元素的索引看着是你找到的组合。

如果我必须这样做，我更喜欢＃1 - 它简单易行。#2 节省了一点内存，30 年前我会选择，但今天我们可以使用千兆字节的实际内存，我认为没有充分的理由尝试尽量减少非关键资源的使用。

YMMV。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:05:19.173

看起来您正在尝试计算[n-grams 的](http://en.wikipedia.org/wiki/N-gram)概率；这类似于谷歌在自然语言处理中使用的，你使用的是数字而不是单词。有许多现有的模型来解决这个问题。

您可以特别有效地做的一件事是根据数字估计马尔可夫链模型，该模型将有效地存储并为您提供所有 n-gram 的概率。不过，这确实做出了一个仅取决于您当前观察到的数字的假设。

# git - 为什么在指定本地分支名称的 git 中签出远程分支与使用远程默认名称的行为不同？

> ID：15417394
> 
> 赞同：1
> 
> 时间：2013-03-14T18:30:23.663
> 
> 标签：git

根据[https://www.kernel.org/pub/software/scm/git/docs/git-checkout.html](https://www.kernel.org/pub/software/scm/git/docs/git-checkout.html)上的文档：

```
git checkout <branch>

  If <branch> is not found but there does exist a tracking branch in exactly
  one remote (call it <remote>) with a matching name, treat as equivalent to

    $ git checkout -b <branch> --track <remote>/<branch> 
```

如果我随后调用，比如说，`git checkout project/phpunit/trunk`（从一个远程的*origin*），然后执行`git remote show origin`给我：

```
Local branches configured for 'git pull':
  master                merges with remote master
  project/phpunit/trunk merges with remote project/phpunit/trunk
Local refs configured for 'git push':
  master                pushes to master                (up to date)
  project/phpunit/trunk pushes to project/phpunit/trunk (up to date) 
```

但是，如果我想给我的本地分支起个不那么罗嗦的名字，而是根据文档的建议，我改为使用，`git checkout -b phpunit --track origin/project/phpunit/trunk`而是随后`git remote show origin`给出：

```
Local branches configured for 'git pull':
  master  merges with remote master
  phpunit merges with remote project/phpunit/trunk
Local ref configured for 'git push':
  master pushes to master (up to date) 
```

简而言之，拉动的跟踪是完整的，但是，推送参考的创建却不是。

使用上存在这种差异并不一定让我感到困扰，但我想知道我对 git 的了解中缺少什么，以了解这种差异的**原因**。

如果有*一种*基于远程跟踪分支创建和签出新本地分支的方法，但使用不同的本地名称命名：该方法是什么？

非常感谢您的阅读。

# angularjs - AngularJS - 基于表达式隐藏/显示指令输出

> ID：15417395
> 
> 赞同：2
> 
> 时间：2013-03-14T18:30:24.893
> 
> 标签：angularjs, angularjs-directive

我想从自定义指令中输出一些标记，但前提是模型包含一些文本。

我快到了，但我不太确定如何在模型更改时打开/关闭模板，以及这是否是最有效的方法。

这是标记：

```
<div data-ng-controller="test">
<div class="box">
    <input type="text" id="search" maxlength="75" data-ng-model="keywords" />
</div>
<searched data-ng-model="keywords"></searched>
</div> 
```

JS：

```
var app = angular.module('myApp', []);

app.directive('searched', function(){
    return {
        restrict: 'E',
        replace: true,
        scope: {
            keywords: '=ngModel'
        },
        template: '<span><span class="field">You searched for:</span> {{ keywords }}</span> ',
        link: function(scope, element, attrs) {
            scope.$watch('keywords', function(newVal, oldVal){
                if(newVal === null) {
                    // Output nothing!
                } else {
                    // Output Template as normal.
                }
            }, true);

        }
    };
});

app.controller("test", ['$scope', function($scope) {
    $scope.keywords = null;
}]); 
```

还有一个示例[JSFiddle](http://jsfiddle.net/YPdV2/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T18:37:04.850

如果我了解您想要做什么，最简单的方法是使用`ng-show`. 那么你甚至不需要`$watch`（或链接功能）

```
app.directive('searched', function(){
    return {
        restrict: 'E',
        replace: true,
        scope: {
            keywords: '=ngModel'
        },
        template: '<span ng-show="keywords.length > 0"><span class="field">You searched for:</span> {{ keywords }}</span> '
    };
}); 
```

[更新的小提琴](http://jsfiddle.net/YPdV2/3/)

# perl - 仅当 STDOUT 是不同的目的地时，如何打印到 STDERR？

> ID：15417397
> 
> 赞同：9
> 
> 时间：2013-03-14T18:30:29.160
> 
> 标签：perl, unix, io, stdout, stderr

我希望 Perl 只有在 STDOUT 不同时才写入 STDERR。例如，如果 STDOUT 和 STDERR 都将输出重定向到终端，那么我不希望打印 STDERR。

考虑以下示例（outerr.pl）：

```
#!/usr/bin/perl

use strict;
use warnings;

print STDOUT "Hello standard output!\n";
print STDERR "Hello standard error\n" if ($someMagicalFlag);
exit 0 
```

现在考虑这个（这是我想要实现的）：

```
bash $ outerr.pl
Hello standard output! 
```

但是，如果我重定向到一个文件，我想得到：

```
bash $ outerr.pl > /dev/null
Hello standard error 
```

反过来类似：

```
bash $ outerr.pl 2> /dev/null
Hello standard output! 
```

如果我将两个 out/err 都重定向到*同一个*文件，那么应该只显示 out：

```
bash $ outerr.pl > foo.txt 2>&1
bash $ cat foo.txt
Hello standard output! 
```

那么有没有办法评估/确定 OUT 和 ERR 是否指向同一个“事物”（描述符？）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T19:13:41.473

在 Unix 风格的系统上，您应该能够：

```
my @stat_err = stat STDERR;
my @stat_out = stat STDOUT;

my $stderr_is_not_stdout = (($stat_err[0] != $stat_out[0]) ||
                            ($stat_err[1] != $stat_out[1])); 
```

但这不适用于没有实际 inode 编号的 Windows。它给出了误报（认为它们不不同时它们是不同的）和误报（认为它们不同时它们是相同的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T18:34:38.603

你可以（几乎）用 -t 做到这一点：

```
-t STDERR 
```

如果它是终端则为真，对于 STDOUT 也是如此。

这仍然不会告诉你是哪个终端，如果你重定向到同一个文件，你可能仍然会得到两者。

因此，如果

```
-t STDERR && ! (-t STDOUT) || -t STDOUT && !(-t STDERR) 
```

或更短

```
-t STDOUT ^ -t STDERR  # thanks to @mob 
```

你知道你没事。

编辑：STDERR 和 STDOUT 都是常规文件的情况的解决方案：

Tom Christianson 建议统计和比较 dev 和 ino 字段。这将适用于 UNIX，但正如@cjm 指出的那样，不适用于 Windows。

如果您可以保证没有其他程序会写入该文件，您可以在 Windows 和 UNIX 中执行以下操作：

1.  检查 STDOUT 和 STDERR 的文件描述符所在的位置，如果它们不相等，则将其中一个重定向`>>`到非空文件。
2.  否则，将 42 字节写入文件描述符 2
3.  查找文件描述符 1 的末尾。如果它比以前多 42，则两者都被重定向到同一个文件的机会很高。如果它没有改变，文件是不同的。如果它被改变了，但不是 42，其他人正在那里写，所有的赌注都被取消了（但是，你不在 Windows 中，所以 stat 方法将起作用）。

# android - 定时 Android Eclipse 活动页面

> ID：15417403
> 
> 赞同：0
> 
> 时间：2013-03-14T18:30:53.890
> 
> 标签：android, eclipse, android-activity

有人可以告诉我如何让我的 android 应用程序的活动页面出现 5 秒钟然后开始一个新活动。这将是我的应用程序“启动”页面，所以我只想在应用程序开始时显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:34:20.243

此启动活动称为 splash，您可以在此处找到有关它的更多信息：

[http://myandroidsolutions.blogspot.co.il/2012/06/android-simple-splash-screen.html](http://myandroidsolutions.blogspot.co.il/2012/06/android-simple-splash-screen.html) [http://www.androidaspect.com/2012/12/android-splash-screen-tutorial.html](http://www.androidaspect.com/2012/12/android-splash-screen-tutorial.html)

只是谷歌'android启动画面'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:38:54.117

你可以做这样的事情

```
 public class SplashActivity extends Activity
{
    // Set the display time, in milliseconds (or extract it out as a configurable parameter)
    private final int SPLASH_DISPLAY_LENGTH = 500;
    Intent mainIntent;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_splash);

    }

    @Override
    protected void onResume()
    {
        super.onResume();
            new Handler().postDelayed(new Runnable()
            {
                @Override
                public void run()
                {
                    //Finish the splash activity so it can't be returned to.
                    SplashActivity.this.finish();
                    // Create an Intent that will start the main activity.

                        mainIntent = new Intent(SplashActivity.this, MyChecklistsActivity.class);
                    SplashActivity.this.startActivity(mainIntent);
                }
            }, SPLASH_DISPLAY_LENGTH);

    }
} 
```

或者只是谷歌“android启动活动”，有很多解决方案

# linux - Linux 上的菜单和子菜单脚本

> ID：15417404
> 
> 赞同：1
> 
> 时间：2013-03-14T18:30:55.200
> 
> 标签：linux, bash, loops, menu

有两件事我不确定我一直在尝试做什么，我很抱歉听起来很愚蠢，但我不确定在哪里集成代码，以便在按下选项 A 或 B 时子菜单显示“已选择选项 A”我也不确定如何循环子标题，以便在显示“已选择选项 A/B”时返回子菜单屏幕。直到我按下返回主菜单按钮时，它将进入主菜单。我非常感谢任何帮助，因为我是新手，特别是在这方面苦苦挣扎，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:07:28.817

另一种方法：

```
select x in submenu1 submenu2 exit ; do
    [[ $x == exit ]] && exit 0
    select y in optionA optionB; do
        echo "submenu $y heading"
        echo "$x selected"
        break
    done
done 
```

## 例子

```
1) submenu1
2) submenu2
3) exit
> 1
1) optionA
2) optionB
> 1
submenu optionA heading
submenu1 selected
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:57:42.857

简化任务的一种方法是将每个菜单保留在其自己的功能中，每个菜单循环直到用户按下退出键。在这种情况下，使用“x”。我的 bash 没有

```
function subopt1
{
   subopt1=""
   while [ "$subopt1" != "x" ]
   do
      echo Sub Menu 1 Heading
      echo Option A
      echo Option B
      echo x Back to Main Menu
      read -p "Select sub option1" subopt1
   done
 }

 function subopt2
 {
     subopt2=""
     while [ "$subopt2" != "x" ]
     do
         echo Sub Menu 2 Heading
         echo Option A
         echo Option B
         echo x Back to Main Menu
         read -p "Select sub-option2" subopt2    
     done
 }

 function mainopt
 {
    opt=""
    while [ "$opt" != "x" ]
    do
        echo Menu Heading
        echo Sub Menu 1
        echo Sub Menu 2
        read -p "Select Otion: " opt
        if [ "$opt" = "1" ]; then
             subopt1
        elif [ "$opt" = "2" ]; then
             subopt2
        elif [ "$opt" = "x" ];then
             break
        fi
   done
}

mainopt 
```

# javascript - 仅在同一日期运行逻辑

> ID：15417409
> 
> 赞同：0
> 
> 时间：2013-03-14T18:31:06.760
> 
> 标签：javascript, jquery

我有一种情况，我的逻辑是将我的第 0 列（时间列表）与 24 小时 javascript 时钟进行比较，并根据时间的接近程度在行上返回一个红绿灯配色方案。

问题是当它是 23:00（晚上 11 点）时，我的时间栏中有一个项目显示为“凌晨 2:10”（第二天），我的逻辑认为这是一个迟到的时间，并且不承认它是明天的项目。我的颜色编码逻辑有效，但我只需要在 cell[0] 日期等于系统日期（js 时钟）时执行此操作。

```
 //date time object 
        var t = new Date();

    // loops through each row
        for (i = 0; i < rows.length; i++) {
        cells = rows[i].getElementsByTagName('td');

        //configures the clock
        var hm = cells[0].innerText.split(":");
        t.setHours(hm[0], hm[1], 0, 0);
        var r = (t.getTime() - currentTime.getTime()) / 1000 / 60 / 60;

        //logic  executed

             if (r <= 0.25 && cells[1].innerText == false)
                rows[i].className = "ewTableRowConditionalRed";

            else if (r > 0.25 & r <= 0.5 && cells[1].innerText == false)
                rows[i].className = "ewTableRowConditionalYellow";

            else if (r > 0.5 & r <= 2 && cells[1].innerText == false)
                rows[i].className = "ewTableRowConditionalGreen";

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:12:57.373

听起来您首先需要先比较两件事的日期（而不是日期时间）。您可以使用 getYear()、getMonth()、getDate() 方法来执行此操作。

```
var origDate = new Date(); //or the you're getting from the td
var roundedDate = new Date(origDate.getYear(), origDate.getMonth()+1, origDate,getDay()); 
```

请注意，getMonth() 返回一个从 0 到 11 的数字。

如果您的代码可能在不同的时区运行，最好转换为并比较 UTC 日期。

# ios - 禁用 UIBezierPath 的抗锯齿

> ID：15417410
> 
> 赞同：9
> 
> 时间：2013-03-14T18:31:06.703
> 
> 标签：ios, core-graphics

我需要在没有抗锯齿的情况下渲染 UIBezierPaths，然后将它们保存为 PNG 以保留完整的像素表示（例如，不要让 JPEG 弄脏图像）。在抚摸 UIBezierPaths 之前，我尝试过调用下面的 CG 函数，但似乎对生成的渲染图像没有任何影响。路径仍然使用抗锯齿（即平滑）渲染。

```
CGContextSetShouldAntialias(c, NO);
CGContextSetAllowsAntialiasing(c, NO);
CGContextSetInterpolationQuality(c, kCGInterpolationNone); 
```

任何点击将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-14T19:16:02.580

当我使用这些选项时，它会关闭抗锯齿。左边是默认选项。在右边，有你的选择。

[![在此处输入图像描述](../Images/25a635becf410e788f9dada0a5dbf724.png)](https://i.stack.imgur.com/Lfic1.png)

如果您使用`UIView`子类，这很容易控制。这是我的`drawRect`：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetShouldAntialias(context, NO);

    [[UIColor redColor] setStroke];
    UIBezierPath *path = [self myPath];
    [path stroke];
} 
```

并捕获屏幕，从[如何以编程方式截取屏幕截图](https://stackoverflow.com/questions/2200736/how-to-take-a-screenshot-programmatically)

```
- (void)captureScreen
{
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        UIGraphicsBeginImageContextWithOptions(self.window.bounds.size, NO, [UIScreen mainScreen].scale);
    else
        UIGraphicsBeginImageContext(self.window.bounds.size);
    [self.window.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSData *data = UIImagePNGRepresentation(image);
    [data writeToFile:[self screenShotFilename] atomically:YES];
} 
```

如果您使用的是`CAShapeLayer`，那么我认为您无法控制屏幕上的抗锯齿，因为[正如文档所述](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html)：

> 该形状将被抗锯齿绘制，并尽可能在光栅化之前将其映射到屏幕空间以保持分辨率独立性。但是，应用于图层或其祖先的某些类型的图像处理操作（例如 CoreImage 过滤器）可能会强制在局部坐标空间中进行光栅化。

但是，不管屏幕上的抗锯齿如何，如果你想让你的屏幕快照不被抗锯齿，你可以将你的插入`CGContextSetShouldAntialias`到`captureScreen`例程中：

```
- (void)captureScreen
{
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        UIGraphicsBeginImageContextWithOptions(self.window.bounds.size, NO, [UIScreen mainScreen].scale);
    else
        UIGraphicsBeginImageContext(self.window.bounds.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetShouldAntialias(context, NO);
    [self.window.layer renderInContext:context];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSData * data = UIImagePNGRepresentation(image);
    [data writeToFile:[self screenShotFilename] atomically:YES];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T19:14:19.383

你从哪里来`c`？您确定这与您使用的绘图周期中`c`的内容相同吗？从上面的样本很难看出。`UIGraphicsGetCurrentContext()``[UIBezierPath stroke]`

如果您想确定您正在绘制到您正在配置的相同上下文，请`CGPath`从 中获取`UIBezierPath`，然后直接绘制它：

```
- (void)drawRect:(CGRect)rect {
  CGContextRef context = UIGraphicGetCurrentContext();
  CGPathRef path = [self.bezier CGPath];
  CGContextSetShouldAntialias(context, NO);
  CGContextAddPath(context, path);
  CGContextStrokePath(context);
} 
```

# python - Python：导入时出现语法错误

> ID：15417415
> 
> 赞同：9
> 
> 时间：2013-03-14T18:31:21.467
> 
> 标签：python, python-import

我有一个技术上命名为的 python 脚本`/home/pi/Adafruit-Raspberry-Pi-Python-Code/Adafruit_BMP085/Adafruit_BMP085_example.py`

该脚本的第一行是

```
from Adafruit_BMP085 import BMP085 
```

此目录中还有一个名为 Adafruit_BMP085 的 python 文件，它具有 BMP085 函数。

我想创建一个`/home/pi`导入相同 BMP085 的 python 脚本。

我试过了：

```
from /home/pi/Adafruit-Raspberry-Pi-Python-Code/Adafruit_BMP085/Adafruit_BMP085 import BMP085 
```

但这只是给我一个语法错误：

```
SyntaxError: invalid syntax 
```

我已经尝试过这种相同方法的各种语法组合，但找不到一个有效的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T18:32:48.097

您需要将`/home/pi/Adafruit-Raspberry-Pi-Python-Code`路径添加到模块搜索路径中[`sys.path`](http://docs.python.org/2/library/sys.html#sys.path)：

```
import sys

sys.path.append('/home/pi/Adafruit-Raspberry-Pi-Python-Code')
from Adafruit_BMP085 import BMP085 
```

或将`Adafruit_BMP085`包移动到您的`sys.path`.

脚本本身的目录也是 的一部分`sys.path`，因此您也可以运行：

```
$ cd /home/pi/Adafruit-Raspberry-Pi-Python-Code
$ cp Adafruit_BMP085/Adafruit_BMP085_example.py .
$ python Adafruit_BMP085_example.py 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-03-02T09:18:17.270

我有同样的问题。在 RPI 上升级到**Jessie**时首先出现该问题。原因可能在路径之内。在 Python 程序中添加了以下行：

```
sys.path.append('/home/pi/Adafruit-Raspberry-Pi-Python-Code/Adafruit_BMP085') 
```

现在问题解决了。

# r - 在 ggplot2 中做 geom_hline 时选择最新的数据集

> ID：15417420
> 
> 赞同：3
> 
> 时间：2013-03-14T18:31:46.933
> 
> 标签：r, ggplot2

输入（x）

```
structure(list(Host = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L), .Label = "A", class = "factor"), TimeStamp = structure(c(1L, 
2L, 3L, 4L, 5L, 1L, 2L, 3L, 4L, 5L), .Label = c("1/11/2013", 
"1/12/2013", "1/13/2013", "1/14/2013", "1/15/2013"), class = "factor"), 
    Instance = structure(c(1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 
    2L), .Label = c("/application", "/db"), class = "factor"), 
    Free_Space = c(5048L, 5049L, 6000L, 4800L, 5100L, 317659L, 
    340000L, 350000L, 356666L, 370000L), Used_Space = c(3017L, 
    56000L, 60000L, 55000L, 54000L, 271657L, 150000L, 175000L, 
    165000L, 189999L), Total_Space = c(8064L, 61049L, 66000L, 
    59800L, 59100L, 589316L, 490000L, 525000L, 521666L, 559999L
    )), .Names = c("Host", "TimeStamp", "Instance", "Free_Space", 
"Used_Space", "Total_Space"), class = "data.frame", row.names = c(NA, 
-10L)) 
```

我有这个数据框。我通过在给定主机、时间戳和实例的情况下使用 data.table 包添加 Free_Space 和 Used_Space 来驱动列名 Total_Space。

```
x<-data.table(x)
x<-x[,Total_Space:=Free_Space+Used_Space, by=c("Host", "Instance", "TimeStamp")] 
```

我喜欢使用 ggplot2 中的 ggplot facet_wrap 来绘制以 GB 为单位的已用空间，并通过 Total_Space 绘制 geom_line，以便用户可以看到有多少空间。

例如，我正在这样做：

```
ggplot(x, aes(TimeStamp, Used_Space/1024, group=Instance)) + geom_area(fill="blue") + geom_smooth(method="lm", colour="orange",se=T, size=1) + geom_hline(data=x, aes(yintercept = Total_Space/1024), col="red")+ facet_wrap(~Host+Instance, ncol=3, scales="free") 
```

我看到的问题是我为同一个实例和主机获得了多个 geom_hline，因为 Total_Space 正在改变。

我的问题是，在为每个实例和主机执行 geom_hline 时如何选择最新的时间戳？我需要在 geom_hline 中显示最新的 Total_Space。

我尝试了这种方法：

x<-x[,LatestTS:=tail(p[order(p$TimeStamp),],1)$Total_Space, by=c("Host", "Instance", "TimeStamp")]

不工作。它为所有实例选择相同的数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T19:12:40.350

我的解决方案是，首先，让您的专栏`TimeStamp`符合日期

```
x$TimeStamp<-as.Date(x$TimeStamp,format="%m/%d/%Y") 
```

然后，由于您的数据对象是`data.table`，您可以根据`Host`and对数据进行子集化，`Instance`并且设置`TimeStamp`应该是最大值。

```
x[,.SD[TimeStamp==max(TimeStamp)],by="Host,Instance"]
   Host     Instance  TimeStamp Free_Space Used_Space Total_Space
1:    A /application 2013-01-15       5100      54000       59100
2:    A          /db 2013-01-15     370000     189999      559999 
```

现在你可以在里面使用这条线了`geom_hline()`。现在`scale_x_date()`，您将获得更多控制此规模的可能性。

```
library(scales)
ggplot(x, aes(TimeStamp, Used_Space/1024, group=Instance)) + 
  geom_area(fill="blue") + geom_smooth(method="lm", colour="orange",se=T, size=1) + 
  geom_hline(data=x[,.SD[TimeStamp==max(TimeStamp)],by="Host,Instance"], aes(yintercept = Total_Space/1024), col="red")+ 
  facet_wrap(~Host+Instance, ncol=3, scales="free") +
  scale_x_date(labels = date_format("%m/%d/%Y")) 
```

![在此处输入图像描述](../Images/0b814bd95370a09736ba88936c9ec3d7.png)

# java - Android中的Apache POI - awt依赖

> ID：15417422
> 
> 赞同：0
> 
> 时间：2013-03-14T18:31:54.137
> 
> 标签：java, android, apache, awt, apache-poi

我试图**在 Android 中**使用 Apache POI 将图像插入 xls 文件。它相当简单（[示例](http://poi.apache.org/spreadsheet/quick-guide.html#Images)），但它使用**java.awt**包来处理图像，以及最后一种方法

```
drawing.createPicture(anchor, pictureIdx); 
```

崩溃

```
java.lang.NoClassDefFoundError: java.awt.Dimension 
```

没错，因为它在android中不存在。但是如何解决这个问题？Poi 在 jar 中编译，所以我不能用假类替换它，而且我找不到任何用于 android 的 lib 版本。

# haskell - 分组排序的升序整数序列 - 修订

> ID：15417425
> 
> 赞同：1
> 
> 时间：2013-03-14T18:32:05.610
> 
> 标签：haskell

我写了一个似乎工作正常的函数。（再想一想，它错过了前两组的联系……我得再考虑一下。）

```
import Data.List (groupBy)

makeGroups xs = 
  map concat $ groupBy (\a b -> head b == last a + 1) (groupBy mGroups0 xs)
    where mGroups0 = \a b -> a == length xs && elem b [1,2] 
                             || b /= length xs && b == a + 1 
```

输出：

```
*Main> makeGroups [3,4,5,6,7,8,1,9,10,2]
[[3,4,5,6],[7,8],[1],[9,10,2]] 
```

（谢谢大家对标签的回答......现在我只要求一般的编码天才）

是否有更有效/更方便的方法将排序的升序整数序列分组到列表中（保持原始顺序）？

唯一的额外规定是：

```
the possible groups [length xs] [1] [2] [1,2] [length xs,1] [length xs,2] 
must be separated, but [length xs, 1, 2] should join any larger sequence. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:34:31.667

像这样的东西？（感谢 Daniel Fischer 的建议）

```
makeGroups xs = foldr comb [[last xs]] (init xs) where
  comb a b = if a == head (head b) - 1
                then (a:head b) : tail b
                else [a] : b

*Main> makeGroups [3,4,5,6,7,8,1,9,10,2]
[[3,4,5,6,7,8],[1],[9,10],[2]] 
```

这是一个丑陋的刺：

```
makeGroups xs = foldr comb [[last xs]] (init xs) 
  where n = length xs
        ngroup = [1,2,n]
        comb a b = let (x:xs) = head b in 
          if a == n && isPrefixOf [1,2] (x:xs)
             then if not (null $ tail b) && head (head $ tail b) == 3
                     then ((n:head b) ++ (head $ tail b)) : drop 1 (tail b)
                     else (n:head b) : tail b
             else if a == n && isPrefixOf [2,1] (x:xs)
                     then if null (drop 1 xs)
                             then [n,2,1] : tail b
                             else [n,2,1] : drop 1 xs : tail b
             else if elem a ngroup
                     then if elem x ngroup
                             then if null xs
                                     then [a,x] : tail b
                                     else [a,x] : xs : tail b
                             else [a] : b
             else if a /= n && a == x - 1
                     then if x /= n
                             || isPrefixOf [n,1,2] (x:xs)
                             then (a:x:xs) : tail b
                             else [a] : b
                     else [a] : b 
```

# highcharts - highstock 1.3 禁用导航器拖动重绘

> ID：15417426
> 
> 赞同：2
> 
> 时间：2013-03-14T18:32:27.523
> 
> 标签：highcharts, highstock, navigator

有没有办法在拖动导航器或导航器手柄时禁用 highstock 1.3 中发生的不断重绘？

在 1.25 中，当您移动导航器或通过拖动平移图表时，一旦您释放鼠标，就会触发 1 个重绘事件。
在 1.3 中，当您拖动导航器/平移图表时会触发多次重绘。

我想知道我是否可以将 1.3 中图表的行为恢复到 1.25 中的工作方式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:01:48.730

要在滚动时禁用自动重绘，我们在 highstock 1.3 api 中有一个新选项：

[http://api.highcharts.com/highstock#scrollbar.liveRedraw](http://api.highcharts.com/highstock#scrollbar.liveRedraw)

```
scrollbar: {
    liveRedraw: false 
} 
```

这解决了问题。

# d3.js - D3.js 从 file:/// 加载本地数据文件

> ID：15417437
> 
> 赞同：18
> 
> 时间：2013-03-14T18:32:56.460
> 
> 标签：d3.js

我知道 D3.js 支持使用 XHR 和 JSONP[请求](https://github.com/mbostock/d3/wiki/Requests)加载数据文件。

但是在我的情况下，我将通过从文件系统中双击它们来运行 .html 文件，这将像`file://.../foo.html`在浏览器上一样运行它。

是否可以在与浏览器相同的目录中从计算机加载数据文件（csv 或 json）`foo.html`（虽然没有运行`http://`但`file://`）？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-14T18:36:14.340

最好的解决方案是在您的计算机上运行服务器以使其正常工作。

拥有本地 Web 服务器的最简单方法是在您拥有源代码的目录中运行此命令，如下所述[：](https://github.com/mbostock/d3/wiki#using)

```
python -m SimpleHTTPServer 8888 & 
```

然后只需加载页面`http://localhost:8888`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-14T19:01:50.753

您可以在浏览器中禁用相应的安全机制。我认为它默认在 Opera 中工作，您可以使用`--allow-file-access-from-files`命令行标志启动 Chrome 以允许从`file://`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-03T23:30:17.580

与上面 Christopher Chiche 的 python 回答类似，您也可以使用各种 PHP 版本附带的内置服务器。

```
php -S localhost:8888 & 
```

这对我来说更有用，因为我的应用程序有一个 php 后端脚本以及 d3 前端的钩子。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-18T01:56:31.610

添加到 Christopher Chiche 的答案（我是新用户，无法评论）。对于 Windows 中的 python 3，该命令不起作用。而是使用这个

```
python -m http.server [<portNo>] 
```

[如此处](https://stackoverflow.com/questions/17351016/set-up-python-simplehttpserver-on-windows/17351115#17351115)所述，在 python 3 中

> 模块 SimpleHTTPServer 已被 http.server 取代，至少在 Windows 中是这样。

# c# - 插入查询上的 SysDateTime() 作为参数

> ID：15417440
> 
> 赞同：0
> 
> 时间：2013-03-14T18:33:13.217
> 
> 标签：c#, sql

这是场景：

我需要在我的数据库中插入一些行，其中一列是 DateTime 类型，它具有 SysDateTime 作为值，通常我的查询看起来像这样

```
String sqlString = "INSERT INTO Temas(Id, Level,Date, Description) " + 
                        " VALUES (100, 3, SYSDATETIME() , 'Text ')"; 
```

现在我必须使用参数进行插入，现在它看起来像这样：

```
private void InsertTemaInTesauro(OleDbDataReader origenReader,Materias materia)
    {
        SqlConnection connectionEpsOle = Conexiones.GetConecction();
        SqlDataAdapter dataAdapter;

        DataSet dataSet = new DataSet();
        DataRow dr;

            string sqlCadena = "SELECT * FROM Temas WHERE idTema = 0";
            dataAdapter = new SqlDataAdapter();
            dataAdapter.SelectCommand = new SqlCommand(sqlCadena, connectionEpsOle);

            dataAdapter.Fill(dataSet, "Temas");

            dr = dataSet.Tables["Temas"].NewRow();
            dr["Id"] = 100;
            dr["Level"] = 3;
            dr["Date"] = ????;
            dr["Description"] = 'Some text';

            dataSet.Tables["Temas"].Rows.Add(dr);

            //dataAdapter.UpdateCommand = connectionEpsOle.CreateCommand();
            dataAdapter.InsertCommand = connectionEpsOle.CreateCommand();
            dataAdapter.InsertCommand.CommandText =
                                                   "INSERT INTO Temas(Id,Level,Date,Description) (@Id,@Level,@Date,@Description)";

            dataAdapter.InsertCommand.Parameters.Add("@Id", SqlDbType.Numeric, 0, "Id");
            dataAdapter.InsertCommand.Parameters.Add("@Level", SqlDbType.Numeric, 0, "Level");
            dataAdapter.InsertCommand.Parameters.Add("@Date", SqlDbType.DateTime, 0, "Date");
            dataAdapter.InsertCommand.Parameters.Add("@Description", SqlDbType.Numeric, 0, "Description");

            dataAdapter.Update(dataSet, "Temas");

            dataSet.Dispose();
            dataAdapter.Dispose();
            connectionEpsOle.Close();
    } 
```

我的问题是如何设置日期参数以获取 sysdatetime() 的值，我无法将其设置为列的默认值，因为我无权访问数据库，也无法使用 DateTime.Now，因为老板要数据库的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:37:36.673

我很确定你可以简单地做到这一点：

```
dataAdapter.InsertCommand.CommandText = 
   "INSERT INTO Temas(Id,Level,Date,Description) (@Id,@Level,SYSDATETIME(),@Description)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:37:46.687

你能做到吗

dataAdapter.InsertCommand.CommandText = "插入 Temas(Id,Level,Date,Description) (@Id,@Level, SYSDATETIME() ,@Description)";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:41:52.077

你能试试这个吗？我现在正在打电话，所以这可能不是确切的答案，但你会明白的 -

```
dataAdapter.InsertCommand.CommandText = "INSERT INTO Temas(Id,Level,Date, Description) (@Id,@Level, SYSDATETIME(), @Description")"; 
```

# .htaccess - htaccess 带空格和 %20

> ID：15417442
> 
> 赞同：0
> 
> 时间：2013-03-14T18:33:15.993
> 
> 标签：.htaccess, spaces

我已经浏览了 Stack Overflow 并尝试了所有给出的答案，但无法解决我的问题。我重新设计了我的网站，并尝试使用重定向 301 更正 404 错误。这是我尝试过的，但所有选项都失败了：

重定向 301 /wp-content/themes/taketheleap/images/52week/high-res/8V%20Beat%20Lehigh%20Mascot%20Greensboro%20North%20Carolina.jpg [http://taketheleap.ca/wp-ttld-content/themes/ taketheleap/images/52week/8v-beat-lehigh-mascot-greensboro-north-carolina.jpg](http://taketheleap.ca/wp-ttld-content/themes/taketheleap/images/52week/8v-beat-lehigh-mascot-greensboro-north-carolina.jpg)

RewriteRule ^/wp-content/themes/taketheleap/images/52week/high-res/8V Beat Lehigh Mascot Greensboro North Carolina.jpg [http://taketheleap.ca/wp-ttld-content/themes/taketheleap/images/52week/ 8v-beat-lehigh-mascot-greensboro-north-carolina.jpg](http://taketheleap.ca/wp-ttld-content/themes/taketheleap/images/52week/8v-beat-lehigh-mascot-greensboro-north-carolina.jpg) [R=301, NE]

我尝试过使用 %20s 和空格的 Redirect 301，以及使用 %20s 和空格的 RewriteRule。他们都失败了。

我知道我遗漏了一些明显的东西，但不知道它是什么。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:47:04.223

根据[此处](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)的文档，我们看到 rewriterule 与 % 解码版本匹配。所以将 \s 用于空格字符 `^/wp-content/themes/taketheleap/images/52week/high-res/8V\sBeat\sLehigh\sMascot\sGreensboro\sNorth\sCarolina\.jpg`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:02:48.903

只需使用一个空间。我最近遇到了同样的问题。因此，如果您尝试从或重定向到使用字符编码的 url，只需使用该字符。

使用：[http](http://somesite.com/?a-value=some) ://somesite.com/?a-value=some thing 代替：[http ://somesite.com/?a-value=some%20thing](http://somesite.com/?a-value=some%20thing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:28:04.793

找到答案： [301 重定向问题，旧 URL 中有空格？](https://stackoverflow.com/questions/7235383/301-redirect-issue-spaces-in-old-url)

本质上，这：将原始网址放在引号中并带有文字空间解决了这个问题。

所以，我的重定向现在是这样的：

重定向 301 '/wp-content/themes/taketheleap/images/52week/redux/high-res/34 Rome - Victor Emmanuel II Monument Tomb of the Unknown Soldier.jpg' [http://taketheleap.ca/wp-ttld-content /themes/taketheleap/images/52week/redux/34-rome-victor-emmanuel-ii-monument-tomb-of-the-unknown-soldier.jpg](http://taketheleap.ca/wp-ttld-content/themes/taketheleap/images/52week/redux/34-rome-victor-emmanuel-ii-monument-tomb-of-the-unknown-soldier.jpg)

# mysql - 为什么 MySQL Workbench 会为视图生成占位符表？

> ID：15417443
> 
> 赞同：5
> 
> 时间：2013-03-14T18:33:23.387
> 
> 标签：mysql, database, view, mysql-workbench

在我在 MySQL Workbench 中创建的数据库模型中，我定义了一个视图。`Menu -> Database -> Forward Engineer`当我现在从图表（或）生成 SQL 时`Ctrl + G`，将为我的视图创建此代码：

```
-- -----------------------------------------------------
-- Placeholder table for view `myview`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `myview` (...table columns...);
SHOW WARNINGS;

-- -----------------------------------------------------
-- View `myview`
-- -----------------------------------------------------
DROP VIEW IF EXISTS `myview` ;
SHOW WARNINGS;
DROP TABLE IF EXISTS `myview`;
SHOW WARNINGS;
DELIMITER $$
CREATE OR REPLACE VIEW `myview` AS

...view definition...

$$
DELIMITER ;

;
SHOW WARNINGS;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 
```

为什么要创建这个占位符表？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:42:50.363

占位符被创建（不仅由 WB 也由 mysqldump 创建）来解决循环引用。视图定义可以引用需要该视图的表（或需要一个需要最终需要初始视图的视图的表的表）。这无法自动检测或解决，除非通过定义虚拟视图（暂时作为表，因为视图在大多数方面类似于表）然后在所有其他对象可用时重新定义它们。

# c - 如何从文件中读取带有特殊字符的浮点型数字

> ID：15417447
> 
> 赞同：1
> 
> 时间：2013-03-14T18:33:31.863
> 
> 标签：c, special-characters, scanf

我想从这样的 txt 文件中读取浮点类型数：

```
American history 91 12.9% 8 1 
```

但如果我读

```
fscanf(file, "%s %d %f %d %d", major, &number1, &percentage, &number2, &number3); 
```

它给了我一个错误，因为涉及到一个特殊字符。我应该怎么做才能只取出浮动部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:52:49.423

它不是因为百分号而失败，而是因为您的格式字符串错误。`%s`不读取任意字符串，它读取字符直到第一个空格，即“American”。`fscanf`之后会失败。提示：向上看`[`。

为了克服这个`%`问题，你需要做的就是在你的格式字符串中包含这个：（`%f%%`读取一个浮点数，匹配一个`%`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:49:24.863

从[手册页](http://linux.die.net/man/3/scanf)：

> **%**
> 
> 匹配文字 '%'。也就是说，格式字符串中的 %% 匹配单个输入的 '%' 字符。不进行任何转换（但初始空白字符被丢弃），并且不会发生分配。

* * *

例子：

```
#include <stdio.h>

int main() {
    float a, b;
    scanf("%f%%%f", &a, &b);
    printf("%f, %f\n", a, b);
    return 0;
} 
```

输出：

```
$ gcc test.c && echo "1.2%3.4" | ./a.out
1.200000, 3.400000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:48:30.783

使用反斜杠（）作为转义字符

> fscanf(file, "%s %d %f\% %d %d", 主要, &number1, &percentage, &number2, &number3);

# php - 在 Android 平板电脑上打开下载的 excel 文件时出现问题

> ID：15417450
> 
> 赞同：0
> 
> 时间：2013-03-14T18:33:41.553
> 
> 标签：php, android, excel, download

我正在开发一个应用程序，该应用程序使用系统中的数据生成一个 excel 文件。excel文件在桌面上生成和下载很好，但是当我尝试在我的android平板电脑上下载它时它不会打开。它下载正常，但打开它时，一条消息告诉我它不是有效的 MS Excel 文件。

它尝试下载的文档是从页面顶部带有这些标题的 php 脚本生成的：

```
header('Pragma: public');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Last-Modified: '.gmdate('D, d M Y H:i:s').' GMT');
header('Cache-Control: no-store, no-cache, must-revalidate');
header('Cache-Control: pre-check=0, post-check=0, max-age=0');
header('Pragma: no-cache');
header('Expires: 0');
header('Content-Transfer-Encoding: none');
header('Content-Type: application/vnd.ms-excel;');
header('Content-type: application/x-msexcel');
header('Content-Disposition: attachment; filename="Report.xls"');

// code below 
```

我尝试了许多不同的标题变体，但没有任何效果。通过单击运行的图标开始下载：

```
top.document.location = 'script_that_generates_excel_file.php'; 
```

我应该补充一点，文件的大小在平板电脑上是正确的，所以数据应该在那里。关于发生了什么的任何想法？为什么我无法在平板电脑上打开文件？

尝试在平板电脑上打开文件时遇到的错误：

北极星办公室：

> 打开文档时出错

工作表：

> 此文件无法打开，因为它不是有效的 MS Excel 97 - 2011 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:25:59.090

> 在我的桌面上创建了一个 excel 电子表格并将其复制到平板电脑上，它在平板电脑上可以正常打开！那是好消息。我还拿了一个在我的平板电脑上生成但没有打开的文件，并将它复制到我的桌面上，它打开得很好。显然它必须是生成过程。有任何想法吗？

从技术上讲，HTML 代码不是有效的 XLS - 只是 Excel 可以忽略这一点，并像您指示它导入 HTML 文件一样导入数据。我猜其他非 Microsoft 查看器没有那么宽容，并坚持认为文件是实际的 XLS（或 XSLX 或任何新格式的名称）。

If that's true, you may have to generate real, actual XLS, using a tool like [PHPExcel](http://phpexcel.codeplex.com/), it you want your documents to work on the tablet.

# asp.net - 更改网格视图详细信息

> ID：15417451
> 
> 赞同：0
> 
> 时间：2013-03-14T18:33:41.970
> 
> 标签：asp.net, datagridview

我有一个带有角色 ID 和用户 ID 的表格以及带有角色 ID 和用户 ID 的 gridview，而不是显示 ID 我希望它显示用户名和角色。请问我该如何更改。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:42:51.390

我假设 ID 是具有名称和角色的其他表的外键。在您的 SQL 中，您需要将这些表连接到您在网格中显示的表。我使用左外连接。

因此（通常）你会有类似的东西：

```
SELECT
 t.*
,u.UserName
,r.RoleName
FROM MyTable t
LEFT OUTER JOIN myRoleMasterTable r on r.Id = t.RoleId
LEFT OUTER JOIN myUserMasterTable u on u.Id = t.UserId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:57:52.333

如果您使用的是实体框架，您可以为您的实体创建一个部分类，以显示您的用户名和角色。

```
public partial class EntityUserRole
{
    public string UserName
    {
        get { return User!= null ? User.Name: ""; }
    }
    public string RoleName
    {
        get { return Role!= null ? Role.Name: ""; }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:55:37.227

你的桌子一定是这样的..

**tbl_user：**

## 用户名 | 用户名 | xyz

```
 100   | Jack        | blah
   101   | Matt        | blahh 
```

**tbl_role**

## fk_userid | 角色ID | 角色

```
 101       |  1      | doctor    
 102       |  2      | nurse 
```

**询问：**

```
SELECT tbl_user.name, tbl_role.role FROM tbl_user.userid inner join tbl_role 
ON tbl_user.userid = tbl_role.fk_userid 
```

无论您使用什么，在您的 DataTable 或 DataSet 中获取它，然后像这样将您的 GridView 与它绑定...

```
GridView1.DataSource = dt ;
GridView1.DataBind(); 
```

不要犹豫，问任何你不明白的东西。

# django - Django 1.5 NoReverseMatch 在 /blog/

> ID：15417455
> 
> 赞同：2
> 
> 时间：2013-03-14T18:34:11.930
> 
> 标签：django

在 Django 1.5 中，我的页面可以正常工作，直到我尝试使用 {% url %} 来显示链接。我已经阅读了一些 Django 文档并查看了 Stack Overflow，但我无法让我的项目正常工作。

有人看到我在这里做错了吗？

**我得到的错误**

```
NoReverseMatch at /blog/
Reverse for 'single' with arguments '(1,)' and keyword arguments '{}' not found. 
```

**网址.py**

```
urlpatterns = patterns('',
    url(r'^$', blog, name = 'blog'),
    url(r'^(?P<id>(\d+))/$', single, name = 'single')
) 
```

**博客.html**

```
<a href="{% url 'single' o.id %}">Read More</a> 
```

**解决方案**

**解决方案**

**解决方案**

就是那个愚蠢的分号！

```
<a href="{% url 'blog:single' o.id %}">Read More</a> 

urlpatterns = patterns('',
    url(r'^$', blog, name = 'blog'),
    url(r'^(?P<id>\d+)/$', single, name = 'single')   
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:58:44.813

尝试：

```
urlpatterns = patterns('',
    url(r'^(?P<id>\d+)/$', single, name='single')
    url(r'^$', blog, name='blog')
) 
```

`\d+`在这种情况下，您不需要在模式周围加上括号。

# jquery - 根据单击的元素用不同的值替换元素的文本（简化代码）

> ID：15417461
> 
> 赞同：1
> 
> 时间：2013-03-14T18:34:34.980
> 
> 标签：jquery

我有以下代码和 8 个不同的 .overlay 元素。我想根据单击的 .overlay 更改具有唯一值的#target 的文本。如果我使用其中的 8 个并使用唯一 ID 而不是 .overlay 类作为我的选择器，它会起作用，但我更愿意让它尽可能干净，也许使用 var 代替“一些文本”

```
$('.overlay').on("click",function(){
    $('#target').animate({'opacity': 0}, 1000, function () {
        $(this).text("some text");
    }).animate({'opacity': 1}, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:40:18.180

您可以在项目上添加一个`data`属性`.overlay`并使用该值。它可能看起来像这样：

```
$('.overlay').on("click",function(){
    var $clicked = $(this);
    $('#target').animate({'opacity': 0}, 1000, function () {
        $(this).text($clicked.data('text'));
    }).animate({'opacity': 1}, 1000);
}); 
```

你的 html 看起来像：

```
<div class="overlay" data-text="some-text"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:44:26.910

在叠加层上设置标题属性，然后执行以下操作：

```
$('.overlay').on("click",function(){
    var text = $(this).attr("title");
    $('#target').animate({'opacity': 0}, 1000, function () {
        $(this).text(text);
    }).animate({'opacity': 1}, 1000);
}); 
```

演示[http://jsfiddle.net/calder12/PJTre/1](http://jsfiddle.net/calder12/PJTre/1)

# android - Android - 使用 HTTPPOST 发送和接收 XML

> ID：15417462
> 
> 赞同：0
> 
> 时间：2013-03-14T18:34:35.953
> 
> 标签：android, xml, http-post

你好！

我知道这个问题和它的版本已经在 SO 上多次提出，我已经阅读了我能找到的关于这个问题的每一个线程。我已经尝试了我能找到的所有解决方案组合，但不知何故，我仍然遇到问题。我希望您不会介意我创建自己的问题，以便我可以发布我的特定代码。我对 Android 应用程序完全陌生，并且有一些基本的 Java 背景。

定义一些变量...

sendXML 是一个字符串，它是我的 XML 代码。

httppost 是我要发布到的 URL。

points 是一个 TextView，我最终将根据服务器的响应 XML 对其进行更新。

```
 public void postTo() {

    try {
        StringEntity entity = new StringEntity(sendXML,HTTP.UTF_8);
        entity.setContentType("text/xml");
        httppost.setEntity(entity);

        HttpResponse response = httpclient.execute(httppost);
        HttpEntity responseEntity= response.getEntity();
        points.setText(EntityUtils.toString(responseEntity));

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        points.setText("SomeMessageHere");
        e.printStackTrace();
    } catch (IOException q) {
        // TODO Auto-generated catch block
        points.setText("SomeMessageHere");
        q.printStackTrace();

    }

} 
```

每当我尝试单击应用程序中调用 postTo() 的按钮时，我的整个应用程序都会崩溃。任何帮助将不胜感激！

日志如下：

```
03-14 19:03:13.761: E/AndroidRuntime(922): FATAL EXCEPTION: main
03-14 19:03:13.761: E/AndroidRuntime(922): java.lang.IllegalArgumentException: Source     string may not be null
03-14 19:03:13.761: E/AndroidRuntime(922):  at org.apache.http.entity.StringEntity.<init>(StringEntity.java:59)
03-14 19:03:13.761: E/AndroidRuntime(922):  at  com.appname.app.Stash.postTo(Stash.java:136)
03-14 19:03:13.761: E/AndroidRuntime(922):  at com.appname.app.Stash$1.onClick(Stash.java:97)
03-14 19:03:13.761: E/AndroidRuntime(922):  at android.view.View.performClick(View.java:4204)
03-14 19:03:13.761: E/AndroidRuntime(922):  at android.view.View$PerformClick.run(View.java:17355)
03-14 19:03:13.761: E/AndroidRuntime(922):  at android.os.Handler.handleCallback(Handler.java:725)
03-14 19:03:13.761: E/AndroidRuntime(922):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-14 19:03:13.761: E/AndroidRuntime(922):  at android.os.Looper.loop(Looper.java:137)
03-14 19:03:13.761: E/AndroidRuntime(922):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-14 19:03:13.761: E/AndroidRuntime(922):  at java.lang.reflect.Method.invokeNative(Native Method)
03-14 19:03:13.761: E/AndroidRuntime(922):  at java.lang.reflect.Method.invoke(Method.java:511)
03-14 19:03:13.761: E/AndroidRuntime(922):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-14 19:03:13.761: E/AndroidRuntime(922):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-14 19:03:13.761: E/AndroidRuntime(922):  at dalvik.system.NativeStart.main(Native Method)
03-14 19:03:13.810: W/ActivityManager(297):   Force finishing activity com.appname.app/.Stash
03-14 19:03:13.860: W/WindowManager(297): Failure taking screenshot for (328x583) to layer 21015
03-14 19:03:14.360: I/Choreographer(297): Skipped 30 frames!  The application may be doing too much work on its main thread.
03-14 19:03:14.390: W/ActivityManager(297): Activity pause timeout for ActivityRecord{411022b8 u0 com.appname.app/.Stash}
03-14 19:03:14.390: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property 
```

下面是一个额外的 logcat 打印出 sendXML 字符串的值。我已经尝试过在字符串的开头包含和不包含 xml version="1.0" 。我不确定哪个是正确的。XMLNS="URLHERE" 当然有正确的 URL 发布到：

```
03-14 23:53:26.870: I/myApp(1048): sendXML = <?xml version="1.0"?><EmailRequest xmlns="URLHERE"><Hash>5e1da0407254ec8882c6f6c27385a890ef544b32</Hash></EmailRequest>
03-14 23:53:26.970: D/AndroidRuntime(1048): Shutting down VM
03-14 23:53:26.970: W/dalvikvm(1048): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-14 23:53:26.990: E/AndroidRuntime(1048): FATAL EXCEPTION: main
03-14 23:53:26.990: E/AndroidRuntime(1048): android.os.NetworkOnMainThreadException
03-14 23:53:26.990: E/AndroidRuntime(1048):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at com.myapp.app.Stash.postTo(Stash.java:140)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at com.mymapp.app.Stash$1.onClick(Stash.java:96)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at android.view.View.performClick(View.java:4204)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at android.view.View$PerformClick.run(View.java:17355)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at android.os.Handler.handleCallback(Handler.java:725)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at android.os.Looper.loop(Looper.java:137)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at java.lang.reflect.Method.invokeNative(Native Method)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at java.lang.reflect.Method.invoke(Method.java:511)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-14 23:53:26.990: E/AndroidRuntime(1048):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:55:45.913

你有没有要求互联网权限？如果没有，请将其添加到清单中，如下所示。

```
<manifest xlmns:android...>
  ...
   <uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

编辑：好的，所以堆栈跟踪似乎表明您的 sendXML 字符串为空。可以加吗

```
Log.i("myApp", "sendXML = " + sendXML); 
```

在 try 块的顶部检查是否是这种情况。它会将其打印到 logcat。

# java - 使用 Iterable 和 Iterator 接口

> ID：15417472
> 
> 赞同：1
> 
> 时间：2013-03-14T18:35:08.947
> 
> 标签：java, iterator, iterable

我对 Java 还是很陌生，今天我尝试了解迭代器的使用。
所以我有几个问题：

1.  为什么我需要实现 Iterable，它只提供了一种为集合创建新迭代器的方法，但如果我想获取所有元素，我也可以使用普通或增强的 for 循环。我已经读过这个问题：[Iterable 接口用于什么？](https://stackoverflow.com/questions/1059127/what-is-the-iterable-interface-used-for)还有更多，但他们只是说它允许您遍历所有元素，这又回到了我的问题。

2.  如果我实现 Iterable，我是否也应该实现 Iterator？
    因为这实际上提供了可能对覆盖有用的方法。
    例如，如果我的班级有一个布尔值，我是否希望我的对象处于循环中，我可以写

    ```
    public boolean hasNext() {
    if(loop)
        return true;
       //other things
    } 
    ```

3.  如果我确实像 2\. 中所说的那样，增强的 for 循环会使用这些覆盖的方法吗？
    例如上面提到的循环属性：如果它是真的，for循环会无限运行吗？

我希望有人可以帮助我更好地理解整个概念。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:48:38.267

如果您正在定义一个集合，那么您*正在*实现一个`Iterable`. 例如，如果您想创建一个自定义列表，您通常会将其设为子类`AbstractList`，它本身扩展`AbstractCollection`、实现`Collection`、实现`Iterable`。因此，您的列表将是“事实上的”一个`Iterable`.

但是如果你子类`AbstractList`化，你就不必自己实现迭代器，因为这个方法已经在那里实现了。也就是说，您可能希望为您的需要提供一个专门的迭代器。

当你实现时`Iterable`（如果你真的想要），你返回一个`Iterator`. 集合本身不应该实现`Iterator`，只有返回的迭代器。查看`AbstractList`源代码，以查看它是如何完成的示例。

当您使用增强的 for 循环时，您正在使用`Iterable`. 增强的 for 循环只是 . 返回的迭代器上循环的语法糖`iterator()`。这意味着编译器将您的代码转换为使用迭代器。这就是为什么您必须实现`Iterable`集合以在增强的 for 循环中使用。

# date - 在 PowerShell 中使用 Get-Date cmdlet

> ID：15417474
> 
> 赞同：0
> 
> 时间：2013-03-14T18:35:10.453
> 
> 标签：date, powershell, filtering, getdate

我有以下代码行，当前将获取服务器的打印机事件日志：

```
Get-EventLog -ComputerName ********* -LogName System -Source Print|where-object{$_.timeGenerated -gt (get-date "2013-03-11")}|select-object eventid,timegenerated,message |export-CSV -Path "C:\temp\export.csv" 
```

目前，Get-Date 用于获取我在代码行中编写的特定日期的打印机日志。但是，我想更改此设置，以便一次获取一整周的打印机日志。我正在查看 TechNet 关于 Get-Date 的文章，但我没有看到任何关于如何设法指定要从前一周而不是一天中提取结果的内容。我该怎么做呢？

编辑：另外，我想找到一种不需要指定具体日期的方法。例如，我希望能够从本周获取日志，然后在下周获取新日志，而无需更改代码上的日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T18:52:17.107

我假设这是您上一篇文章的后续文章，[使用 WMI 获取打印机日志](https://stackoverflow.com/questions/15210764/using-wmi-to-get-printer-logs)

正如我在对该问题的回答中指出的那样，您应该在源头进行过滤`Get-EventLog`- 而不是在`Where-Object`. `Get-EventLog`为此提供了两个参数 -`-Before`和`-After`.

通过在源头进行过滤，您将通过网络发送*更少*的数据，这可以显着提高性能。它还将减少远程系统处理您的请求所需的时间。*为什么要索取和检索您甚至不看就丢弃的数据？*

要获取一周前和现在之间的所有内容，请执行以下操作：

```
get-eventlog -computername ******* -logname system -after $((get-date).adddays(-7).date) -before $(get-date) -source Print | select-object eventid,timegenerated,message |export-CSV -Path "C:\temp\export.csv" 
```

根据需要更改传递给`-After`和的值`-Before`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:41:48.453

您的 Where-Object 仅返回大于该日期的记录。

```
Where-Object { $_.timeGenerated -gt (get-date "2013-03-11") } 
```

要获取日期范围，请尝试

```
Where-Object { $_.timeGenerated -gt [datetime]'2013-03-11' -and $_.timeGenerated -lt [datetime]'2013-03-18' } 
```

这基本上是说：（下限）2013-03-11 <（日志条目生成日期）<2013-03-18（上限）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:41:58.860

在 where 语句中包含另一个测试。像这样：

```
Get-EventLog -ComputerName ********* -LogName System -Source Print |
where-object{$_.timeGenerated -gt ([datetime]"2013-03-11") -and $_.timeGenerated -lt ([datetime]"2013-03-18")} |
select-object eventid,timegenerated,message |
export-CSV -Path "C:\temp\export.csv" 
```

它检查事件是否比 2013-03-11 新，但比 2013-03-18 旧。

# python - 为什么“或”会这样？

> ID：15417475
> 
> 赞同：0
> 
> 时间：2013-03-14T18:35:20.083
> 
> 标签：python, syntax, python-2.7

我在 Python 2.7.3 上尝试了很多不同的东西，我遇到了这段代码：

输入：

```
x = 4
y = 7
x or y 
```

输出：

```
4 
```

根据[文档](http://docs.python.org/2/library/stdtypes.html#boolean-operations-and-or-not)，`or`是一个布尔运算。**不`or`应该屈服`True`还是`False`只屈服？**

所以，我用这段代码尝试了更多：

输入：

```
a = 3
b = 2
a or b 
```

输出：

```
3 
```

然后在这一点上，我假设代码将返回表达式的第一个参数。

**为什么 Python 会给我这个输出？Python`or`操作背后到底发生了什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:38:26.553

从文档中：

> x 或 y ：如果 x 为假，则为 y，否则为 x (1)

对于每个不为零的整数，`x or y`将返回`x`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T18:59:47.213

georgesi 的回答完美地回答了您提出的确切问题——但是您链接到的文档也是如此，因为他只是引用了这些文档。所以，大概你想要更多。

你可能会问两件事：

1.  *当我的母语直觉/最喜欢的语言说`or`应该返回 a时，*为什么*`bool`Python 会这样设计？*
**   *Python如何*实现这一点？*

 *既然你加粗了“ Python**操作****背后到底发生了什么`or`**”这个问题，我猜是后者。

请记住，Python 有多种实现，只要它们符合参考文档设置的规范，它们就可以随意实现它们。但通常，当人们问“Python 是如何做到这一点的？”时。他们的意思是“CPython 实现是如何做到这一点的？”

首先，让我们看一些字节码：

```
>>> def f():
...     return 1 or 2
>>> import dis
>>> dis.dis(f)
2           0 LOAD_CONST               1 (1) 
            3 JUMP_IF_TRUE_OR_POP      9 
            6 LOAD_CONST               2 (2) 
      >>    9 RETURN_VALUE 
```

这是什么意思？在 Python 式的伪代码中，它是这样的：

```
top = 1
if top:
     goto 9
else:
     del top
top = 2
label 9
return top 
```

如果您想更好地理解（而 CPython 是您关心的实现），您只需要知道 CPython 字节码解释器是一个简单的堆栈机器，并且该堆栈机器的代码在文件`ceval.c`中。所以，我们可以在[这里](http://hg.python.org/cpython/file/3.3/Python/ceval.c#l2443)`JUMP_IF_TRUE_OR_POP`找到代码。（操作码只是将常量值推送到堆栈上，这样就可以找到它们。我认为我们真的不需要研究它来理解它是如何工作的。）`LOAD_CONST``w = TOP()``or`

你可以看到它有点复杂。

这主要是因为它通过在调用等效的 C-API 之前`if top`检查`if top == False`和优化部件，并且因为它必须处理来自该调用的异常。但它也在优化堆栈的使用。如果不解释如何和工作，很难变得太精确，但基本思想是，它避免了将值从堆栈中弹出只是为了将它们推回以返回。`if top == True``bool(top)``bool``DISPATCH``FAST_DISPATCH`

但这就是“Python`or`操作背后到底发生了什么？”

* * *

您还加粗了“**不`or`应该屈服`True`还是`False`只屈服？** ”所以，这使我们回到问题 1。

首先，请记住鸭子类型是 Python 的核心。`or`应该产生一些可以被使用的东西，就好像它在它重要的地方`True`或`False`任何地方一样。你应该特别写类似`if foo:`而不是`if foo == True:`（或`if foo is True:`或`if foo != False:`或其他）的东西，所以你不应该关心差异。

其次，大约一半的语言同意你的“布尔运算”应该严格返回布尔类型的值，而一半的语言不同意。即使在不是围绕鸭子类型构建的语言中，比如 C。那么，语言设计者如何决定呢？

使`or`运算符始终返回的“C++ 风格”`bool`避免了副本，允许编译器更好地执行静态类型，并为程序员提供更好的动态类型信息。前两个在 Python 中完全不相关，最后一个通常仅在您编写依赖于类型而不是鸭子类型的代码时才有用，这通常被认为是非 Python 的。

使其返回第一个真值（或最后一个假值）的“C 风格”使得实现稍微简单一些，并为程序员提供了一种三元表达式`if`的速记。`else`

当 Python 没有三元`if`-`else`时，这是一个更容易调用的方法。如今，也许它是一个更接近的电话 - 特别是因为有些人讨厌`a or b`它的速记`a if a else b`并认为它不符合标准。

但是历史站在已经存在的一边；除非有令人信服的理由，否则什么都不会改变，并且根据您的口味可能会朝相反方向发展的近距离通话并不是令人信服的理由。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T18:39:19.230

从您提供的[文档链接](http://docs.python.org/2/reference/expressions.html#or)：

> 表达式 x 或 y 首先计算 x；如果 x 为真，则返回其值；否则，评估 y 并返回结果值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T18:40:17.600

请注意，唯一`or`应该返回一个假对象的情况是两个操作数都是假的。

考虑到这种行为，我们可以看到在第一个操作数为真的情况下，我们已经知道两个操作数都不为假。这意味着无论第二个操作数是什么，整个表达式的计算结果都应该为真。返回第一个操作数（为真）。

在第一个操作数（我们称之为 x）为*false*的情况下，`x or y`逻辑上等价于`y`. 如果 y 为真，则 x 和 y 都不为假，因此`x or y`为真。如果 y 是假的，那么 x 和 y 都是假的，所以`x or y`也是假的。这就是为什么如果 x 为假则返回 y。

这种方法称为短路评估，当 x 为假时，计算成本较低，因为不需要对 y 进行不必要的评估。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T18:38:39.653

Python 中的`or`运算符将返回第一个值，如果它被认为是 true，或者如果第一个是 false，第二个是 true，则返回第二个值。如果两者都是假的，那么它将返回`False`。在这种情况下，4 和 3 都是真值，因此它们被返回。如果您改为使用 0，您将看到使用的第二个值

```
x = 0
y = 3
x or y 
```

这将返回 3

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T19:11:01.920

这个问题已经回答了，但你仍然可能会问自己为什么这种行为是有意义的。

这是一个简单的用例：

```
port = int(raw_input("Port number (default 5000): ") or 5000) 
```

在这种情况下，`or`(and `and`) 的行为非常合理。另一个：

```
url_scheme = enable_https and 'https' or 'http'  # although this can be also expressed as:
url_scheme = 'https' if enable_https else 'http'
# but i personally prefer the above, because i can read it
# more easily due to the two possible values being closer together 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-14T18:49:50.330

这有点像 if 语句的简写。我一直在 JS 编码中使用它。

你可以`AND`以同样的方式使用。

```
var x = 0;

x && console.log('x is not truth-y');
x || console.log('x is false-y'); 
```

正如一堆其他人已经说过的那样，`&&`or`||`运算符**评估**它们左侧的表达式，然后，取决于我们是在谈论`&&`or`||`并且取决于评估是真值还是假值，它们将要么停止，要么继续**计算**它们右侧的表达式。*

# objective-c - stringByReplacingOccurrencesOfString 不接受多个单词

> ID：15417477
> 
> 赞同：0
> 
> 时间：2013-03-14T18:35:26.570
> 
> 标签：objective-c, nsstring

所以我有以下代码行：

```
text = [text stringByReplacingOccurrencesOfString:@"%@" withString:[NSString stringWithString:name]]; 
```

`[NSString stringWithString:name]`防止单个字符串异常。

但是，现在我的问题是，如果有人输入了一个`name`以上的单词，即`name = @"John Doe";`，则整行都会失败。我觉得这是一个非常简单的解决方法，但对于我的生活来说，我无法弄清楚。有谁知道怎么回事？

**编辑：包括错误行周围的代码。**

此函数存储名称：

```
- (void) buttonSelected:(UIButton *)button
{
NSString *text;
if ([button.titleLabel.text isEqualToString:@"NEXT"]  || [button.titleLabel.text isEqualToString:@"DEBATE BACK"] || [button.titleLabel.text isEqualToString:@"ISSUE A CLOTURE"])
{
    bool noText = true;
    bool foundTextBox = false;
    for (UIView *view in [scrollView subviews])
    {
        if (view.tag == 51)
        {
            if ([view isKindOfClass:[UITextField class]])
            {
                foundTextBox = true;
                UITextField *blah = (UITextField *)view;
                text = blah.text;
                NSLog(@"%@", text);
                if (![text isEqualToString:@""] && text != nil) noText = false;
            }
        }
    }
    if (!foundTextBox) noText = false;
    if (!noText)
    {
        if (questionNumber == 0)        name = text;
        else if (questionNumber == 1)   state = text;
        else if (questionNumber == 2)   billSubject = text;
        [self hideKeyboard];
        [UIView animateWithDuration:0.8 animations:^
         {
             for (UIView *view in [scrollView subviews])
             {
                 CGPoint origin = CGPointMake(-10 - (view.frame.size.width/2), view.frame.origin.y+(view.frame.size.height/2));
                 [view setTag:view.tag + 100];
                 [view setCenter:origin];
                 [view setAlpha:0.0];
             }
         }
         completion:^(BOOL finished)
         {
             for (UIView *view in [scrollView subviews])
             {
                 [view removeFromSuperview];
             }
             [self nextQuestion];
         }];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning!" message:@"You have not entered any text!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show]; [alert release];
    }
}
} 
```

现在我想起来了，由于`NSLog(@"%@", text);`某种原因，从未真正打印过。甚至没有空行。但是，`noText`在查找文本框的 for 循环之后仍然为 false；

这里是调用`name`：

```
- (void) setText:(NSString *) text label:(UILabel *) label
{
if (questionNumber == 1)
{
    NSLog(@"%@", name);
    text = [text stringByReplacingOccurrencesOfString:@"%@" withString:[NSString stringWithString:name]];
    label.text = text;
}
else
    label.text = text;
} 
```

`name`确实打印了整个名称。

注意：`questionNumber`、`name`、`state`、 和`billSubject`都是全局变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:26:16.393

`[text stringByReplacingOccurrencesOfString:@"some character pattern" withString:name]`

（您希望替换的“某些字符模式”是什么？真的是“%@”吗？或者可能只是“@”或其他什么？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:51:40.983

```
bool noText = true;
bool foundTextBox = false;
for (UIView *view in [scrollView subviews])
{
    if (view.tag == 51)
    {
        if ([view isKindOfClass:[UITextField class]])
        {
            foundTextBox = true;
            UITextField *blah = (UITextField *)view;
            text = blah.text;
            NSLog(@"%@", text);
            if (![text isEqualToString:@""] && text != nil) noText = false;
        }
    }
}
if (!foundTextBox) noText = false; 
```

如果 foundTextBox 设置为 true，!foundTextBox 将为 false，并且 noText 将保持为 true。noText 仅在 foundTextBox 为 false 时设置为 false。

（这是不必要的混乱逻辑。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:58:47.717

所以我设法解决了这个问题，尽管它不是一个完美的解决方案。我将`name`, `state`, 和`billSubject`合并到一个`NSMutableArray`可以存储它们的地方。它现在可以回忆一个单词的所有大小写，无论是一个字符还是一个字符串中的 10 个单词。不知道 global 出了什么问题，`NSString`但这个问题已经解决。

# android - 我正在尝试用密码锁定我的应用程序，但它不起作用

> ID：15417479
> 
> 赞同：1
> 
> 时间：2013-03-14T18:35:33.400
> 
> 标签：android, if-statement, password-protection

这是我的代码，我不知道我做错了什么。但它不起作用！理想情况下，我想要的是如果所有文本视图都是空的，它应该“请填写详细信息”或“保存”，但它总是如何“保存”

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener {

EditText et1;
EditText et2;
EditText et3;
EditText et4;
EditText et5;
Button b;

FileOutputStream fos1;
FileOutputStream fos2;
FileOutputStream fos3;
FileOutputStream fos4;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    et1=(EditText) findViewById(R.id.editText1);
    et2=(EditText) findViewById(R.id.editText2);
    et3=(EditText) findViewById(R.id.editText3);
    et4=(EditText) findViewById(R.id.editText4);
    et5=(EditText) findViewById(R.id.editText5);

    b=(Button) findViewById(R.id.button1);

    b.setOnClickListener(this); 
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    String password=et1.getText().toString();
    String confirmPassword=et2.getText().toString();
    String secQues=et3.getText().toString();
    String secAns=et4.getText().toString();
    String hint=et5.getText().toString();

    if(password!=null && confirmPassword!=null && secQues!=null && secAns!=null && hint!=null)
    {
        Toast.makeText(MainActivity.this, "saved", Toast.LENGTH_SHORT).show();
    }
    else
    {
        Toast.makeText(MainActivity.this, "Please fill all the details.", Toast.LENGTH_SHORT).show();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:37:40.073

字符串将始终不是`null`，因为它们是由 EditTexts 生成的。但是，您获得的 String 可以是`""`长度为 0 的空 String ( )。这意味着您应该改为比较 String 的长度。[TextUtils 在这里会更好地工作](https://developer.android.com/reference/android/text/TextUtils.html#isEmpty%28java.lang.CharSequence%29)：

```
if(!TextUtils.isEmpty(password) && !TextUtils.isEmpty(confirmPassword)  && !TextUtils.isEmpty(secQues)   && !TextUtils.isEmpty(secAns)  && !TextUtils.isEmpty(hint)){
  Toast.makeText(MainActivity.this, "saved", Toast.LENGTH_SHORT).show();
} 
```

此外，由于您有很多`EditTexts`，更好的检查方法是制作一个 EditTexts 数组，然后循环并检查长度。如果发现任何空内容，请将布尔标志设置为 false 并退出循环。

```
boolean noneEmpty = true;

for (int x =0; x < editTextArray.length;x++)
{
  if (TextUtils.isEmpty(editTextArray[x].getText()))
  {
    noneEmpty = false;
    break;
  }
}

if(noneEmpty){
  Toast.makeText(MainActivity.this, "saved", Toast.LENGTH_SHORT).show();
}
else{
  Toast.makeText(MainActivity.this, "Please fill all the details.", Toast.LENGTH_SHORT).show();
} 
```

# c# - WP8 公司中心应用程序 - AddPackageAsync() 未安装

> ID：15417481
> 
> 赞同：1
> 
> 时间：2013-03-14T18:35:35.617
> 
> 标签：c#, windows-phone-8

我有一个用作公司应用程序中心的 Windows Phone 8 应用程序。

它将用于安装托管在服务器上的指定公司应用程序。

我正在尝试测试 InstallationManager.AddPackageAsync() 函数以通过应用程序安装分配的应用程序。我按照此处的所有步骤创建了一个空的测试分配应用程序（只是一个标题屏幕）并打包并签名了 .xap 文件：[Company App Distribution for Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206943%28v=vs.105%29.aspx)

因此，我在服务器上托管了我的公司中心应用程序以及分配给该测试的公司应用程序（两者都已签名，并且使用上述链接中所述生成的 AET 注册了设备。）

我很好地安装了公司中心应用程序，中心应用程序发现可用的分配应用程序并尝试使用 AddPackageAsync 安装它，它提示用户“你想从 MyCompany 安装 AssignedCompanyApp 吗？”

但是，单击“安装”并关闭提示对话框后，什么也没有发生 - 该应用程序未安装。我没有看到它列出，并且在使用 InstallationManager.FindPackagesForCurrentPublisher(); 搜索后它没有显示出来。

我不认为这是一个签名问题 - 设备已注册，并且中心应用程序和测试分配的应用程序都已预编译并使用我们的 PFX 文件签名。

此外，当我简单地将手机导航到 Internet Explorer 中分配给测试的应用程序 .xap 文件时，它会下载、安装并正常运行，并且当集线器应用程序随后运行 FindPackagesForCurrentPublisher() 时它会显示出来。

这是有问题的代码：

```
Uri uri = new Uri(@"http://www.myServer.com/xaps/MyAssignedCompanyApp.xap");
InstallationManager.AddPackageAsync("My Assigned Company App", uri); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T00:10:25.393

您需要将 AppPackageAsync 作为异步方法调用，如示例中所示：

```
Uri uri = new Uri(@"http://www.myServer.com/xaps/MyAssignedCompanyApp.xap");
await InstallationManager.AddPackageAsync("My Assigned Company App", uri); 
```

# c - 什么时候使用 CORDIC 或多项式近似更有效？

> ID：15417482
> 
> 赞同：7
> 
> 时间：2013-03-14T18:35:39.057
> 
> 标签：c, algorithm, math, assembly, floating-point

我正在研究一种不具有浮点硬件，但只有 16 位 ALU 和 40 位 MAC 的架构。

我已经在这个架构上的软件中实现了 32 位单精度浮点加法/减法、乘法、余弦、正弦、除法、平方根和范围缩减。

[为了实现余弦和正弦，我首先使用KC NG 的论文“ARGUMENT REDUCTION FOR HUGE ARGUMENTS”](http://www.derekroconnor.net/Software/Ng--ArgReduction.pdf)中描述的方法使用范围缩减， 然后我实现了余弦和正弦函数，它们是余弦和正弦函数在范围 -pi 上的多项式逼近/4 到 +pi/4。我参考了 Hart 等人的《计算机近似》一书。为多项式。

我也听说我应该考虑CORDIC算法。但是，我想知道是否有人知道它是否比我已经使用的方法效率更高或更低（在吞吐量、内存开销和所需的指令数量方面）？我在多核架构上实现了我的软件功能，其中每个内核只有 128 个字的指令存储器和一个 128 个字的 16 位数据存储器。我还尝试搜索如何为余弦和正弦实现 CORDIC 算法，但我找不到任何用于 32 位浮点实现的好的资源。有人有建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T19:31:13.280

CORDIC 为您每次循环迭代提供一位，因此在软件中实现它可能会比您的多项式版本慢。这也可能是为什么很难找到有关 CORDIC 软件实现的文章的原因：它的性能较差，所以没有人打扰。

回复您的评论： [霍纳的方法](http://en.wikipedia.org/wiki/Horner%27s_method)是通过重复添加系数，然后乘以变量来评估从最高阶系数到最低阶系数的多项式的做法`x`。相比之下，朴素方法（即，`x`首先评估 的幂，然后将它们乘以它们的系数并将它们相加）需要更多的工作并且在数值上可能比霍纳的方法更不稳定。

你还没有确切地提到你是如何尝试评估你的多项式的，所以我会建议一个公式：

```
x2 = x * x
cos = ((COS_D * x2 + COS_C) * x2 + COS_B) * x2 + COS_A
sin = (((SIN_D * x2 + SIN_C) * x2 + SIN_B) * x2 + SIN_A) * x 
```

请注意，如果将常数调整到评估函数的范围，而不是使用泰勒系数，则可以获得更好的精度。（再次，如果您做了部分或全部这些事情，请道歉，但您没有提及您已经尝试过的内容......）

* * *

这可能与您的情况不太相关（大概只有一个 16x16 位 MAC），但是如果您的处理器可以一次启动多个算术评估，如果您将评估写成树状，您可能可以获得更好的性能形式，避免一些操作的顺序依赖：

```
x2 = x * x
x4 = x2 * x2
cos = (COS_D * x2 + COS_C) * x4 + (COS_B * x2 + COS_A)
sin = ((SIN_D * x2 + SIN_C) * x4 + (SIN_B * x2 + SIN_A)) * x 
```

如果你的处理器有一个向量 ALU，这个公式也表明它的生产用途......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T23:30:14.357

如果 MAC 明显快于等价的移位和与加法序列，则使用多项式；甚至不考虑CORDIC（除了可能减少一个或两个范围的步骤）。很难准确地找到 FP CORDIC 算法，因为该标准始终适用于使用 FP 的任何系统（过去约 35 年），因此不考虑 CORDIC。

# sql - 如何在 VS 2012 中使用 LocalDb 连接到较旧的 sql 数据库？

> ID：15417483
> 
> 赞同：22
> 
> 时间：2013-03-14T18:35:56.840
> 
> 标签：sql, sql-server, visual-studio-2012, sql-server-express, localdb

我正在尝试在 VS 2012 中构建到 2008 SQL Express 数据库文件的连接字符串。我收到一个错误对话框：

> 此数据库文件与 SQL Server 的当前实例不兼容。要解决此问题，您必须通过创建新的数据连接来升级数据库文件，或者您必须修改与此数据库文件的现有连接。有关详细信息，请参阅 [http://go.microsoft.com/fwlink/?LinkId=235986](http://go.microsoft.com/fwlink/?LinkId=235986)

我点击了指向 Microsoft 总是非常有用的文档的链接（咳咳……）。当我通过升级数据库功能时，没有提示我升级文件。我真的希望使用 LocalDb 而不必安装 SQL Express 2008。有什么想法吗？

**其他：**为什么这么多年来 Visual Studio 还没有实现单击错误对话框中的链接？真的很难实施吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-06-27T10:10:16.720

我的简单方法：

1.  前往**VisualStdio 2012**
2.  在**服务器资源管理器**窗口中
3.  打开**数据连接**
4.  右键单击**ASPNETDB.MDF**
5.  点击**修改连接...**
6.  为您打开一个新窗口...您只需单击**确定**
7.  如果为您打开其他窗口，请单击**是**
8.  完成（快乐）：D

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-05-08T02:27:24.813

根据我之前的经验：

1.  忘记尝试`SQL Server Express` `.mdf`在 Visual Studio 2012 中打开旧文件。在旧 VS 2010 解决方案到 VS 2012 的转换过程中，它告诉您只需双击数据库文件并将其升级为使用 LocalDb 即可。这完全是谎言！:D

2.  打开[SQL Server Management Studio](http://msdn.microsoft.com/en-us/library/ms365247%28v=sql.105%29.aspx)，选择`Databases`节点，右键单击它并选择`Attach...`.

3.  提供`.mdf`文件的路径，单击“确定”，然后您就可以开始了。

4.  现在在里面`Visual Studio 2012`，打开`Server Explorer`（菜单`View -> Server Explorer`），右键单击`Data Connections`然后选择`Add Connection...`。输入`Server name:`并选择您之前附加的数据库`(localdb)\v11.0`。`Connect to a database:`

5.  右键单击`Data Connection`刚刚添加的`Solution Explorer`并选择`Properties`. 复制该`Connection String`属性并将`Web.Config`or替换`App.Config`为此值。

**注意：**在`SQL Server Management Studio`尝试附加`.mdf`从 DayPilot 的示例项目中获得的旧文件时出现错误：[Scheduler for ASP.NET MVC 4 Razor (C#, VB.NET, SQL Server)](http://code.daypilot.org/62492/scheduler-for-asp-net-mvc-4-razor)。这与数据库文件`.log`附带的文件的路径问题有关。`.mdf`我刚刚`.log`在对话框窗口中选择了文件条目`Attach...`并将其删除。然后尝试再次附加数据库并且它工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-20T13:00:45.507

你可以这样做：

```
USE [master]
GO
CREATE DATABASE [database_name] ON 
    ( FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\Data\<database name>.mdf' ),
    ( FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\Data\<database name>.ldf' )
FOR ATTACH ;
GO 
```

如此处所述：[http ://technet.microsoft.com/en-us/library/ms165673%28v=sql.105%29.aspx](http://technet.microsoft.com/en-us/library/ms165673%28v=sql.105%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-15T14:16:40.017

打开 sql server management studio 连接 localDB 删除同名 mdf 文件，然后附加您的 mdf 文件

转到服务器资源管理器中的Visual Studio->数据连接右键单击您的数据库->修改连接->文本连接->单击确定

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-23T11:03:52.440

转到 VisualStadio 2012 在服务器资源管理器窗口中打开数据连接右键单击 ASPNETDB.MDF 单击修改连接...为您打开一个新窗口...如果为您打开其他窗口，您只需单击确定单击是

# jquery - 更改背景图像 jquery

> ID：15417485
> 
> 赞同：0
> 
> 时间：2013-03-14T18:36:04.087
> 
> 标签：jquery, css, background-image

所以我试图从我拥有的一组三个图像中旋转背景图像。我想出了一种方法来做到这一点，但这里发生了一些奇怪的事情。从下面的示例中，您应该得到 i= 0、1 和 2，但仍然达到值 3！并且 newBg[3] 是未定义的！所以它会保持 10 秒无显示

你可以在这里找到一个工作示例：[http ://www.goesenlinea.com/agus/](http://www.goesenlinea.com/agus/)

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!--[if IE ]>
    <link href="css/bootstrap.min.ie.css" rel="stylesheet">
    <![endif]-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/jqueryBg.js"></script>
    <script type="text/javascript" src="js/bootstrap.js"></script>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <style>
        body { 
            background: url('img/fond1.png') no-repeat center center fixed;
            background-color: black;
            -moz-background-size: cover;
            -webkit-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
            -webkit-transition: 2s;
            -moz-transition: 2s;
            -ms-transition: 2s;
            -o-transition: 2s;
            transition: 2s;

        } 
        .blackbox {
            /*border-top: 1px solid #2b2b2b;*/
            border-left: 1px solid #2b2b2b;
            border-right: 1px solid #000;
            border-bottom: 1px solid #000;
            background: url('img/boxes_background_color_1x1.png') repeat transparent;
        }

    </style>
    <script>
        var newBg = ['img/fond1.png', 'img/fond2.png', 'img/fond3.png'];
        var i = 0;
        var rotateBg = setInterval(function(){
            if(i==3)
                i=0;
            else
                i++;
            $('body').css({backgroundImage : 'url(' + newBg[i] + ')'});
        }, 10000);
    </script>
</head>

<body>
    <div class="container-fluid" >

        <div class="row-fluid">
            <div class="span2">
                <!-- espaciador izquierda -->
            </div>
            <div class="span8 blackbox">
                <div class="span12" >
                    <img src="img/logo glx.png" />
                    <div class="row-fluid">
                        <div class="span12">
                            <div class="navbar navbar-inverse">
                                <div class="navbar-inner">
                                    <div class="container">

                                        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
                                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                                            <span class="icon-bar"></span>
                                            <span class="icon-bar"></span>
                                            <span class="icon-bar"></span>
                                        </a>

                                        <!-- Be sure to leave the brand out there if you want it shown -->
                                        <a class="brand" href="#">Project name</a>

                                        <!-- Everything you want hidden at 940px or less, place within here -->
                                        <div class="nav-collapse collapse">
                                            asdfasdfad
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                </div> 
            </div>
            <div class="span2">
                <!-- espaciador derecha -->
            </div>
        </div>
    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:41:52.327

```
 if(i==3)
        i=0;
    else
        i++;
    $('body').css({backgroundImage : 'url(' + newBg[i] + ')'}); 
```

如果执行此代码时 i 等于 2 会发生什么？它递增到 3，然后在 中使用`newBg[i]`，这会导致对`newBg[3]`. 您可以通过将 if-else 替换为`i = (i+1) % 3;`（`%`此处使用的称为模运算符）来修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:43:21.577

@tcovo 说了什么。

除了我会这样做：

```
i++;
if ( i > 2 ){
    i = 0;
}
$('body').css({backgroundImage : 'url(' + newBg[i] + ')'}); 
```

# c++ - 将函数作为参数传递

> ID：15417490
> 
> 赞同：0
> 
> 时间：2013-03-14T18:36:15.470
> 
> 标签：c++, qt, opencv

我试图将一个函数作为参数传递给另一个函数。以下代码在没有使用类时有效，但是当我使用 qt 类尝试它时，会发生以下错误...

```
error: argument of type 'void (MainWindow::)(int, int, int, int, void*)'
does not  match 'void (*)(int, int, int, int, void*)' 
```

我的代码是

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <opencv/cv.h>
#include <opencv/cvaux.h>
#include <opencv/highgui.h>

// for filelisting
#include <stdio.h>
#include <sys/file.h>
#include<io.h>
// for fileoutput
#include <string>
#include <fstream>
#include <sstream>
#include <dirent.h>
#include <sys/types.h>
using namespace std;
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    roi_x0=0;
     roi_y0=0;
     roi_x1=0;
     roi_y1=0;
     numOfRec=0;
     startDraw = 0;
     window_name="<SPACE>add <B>save and load next <ESC>exit";
}

MainWindow::~MainWindow()
{
    delete ui;
}
string MainWindow::IntToString(int num)
{
    ostringstream myStream; //creates an ostringstream object
    myStream << num << flush;
    /*
    * outputs the number into the string stream and then flushes
    * the buffer (makes sure the output is put into the stream)
    */
    return(myStream.str()); //returns the string form of the stringstream object
}

void MainWindow::on_mouse(int event, int x, int y, int flag, void *param)
{
    if(event==CV_EVENT_LBUTTONDOWN)
    {
        if(!startDraw)
        {
            roi_x0=x;
            roi_y0=y;
            startDraw = 1;
        } else {
            roi_x1=x;
            roi_y1=y;
            startDraw = 0;
        }
    }
    if(event==CV_EVENT_MOUSEMOVE && startDraw)
    {

        //redraw ROI selection
        image2=cvCloneImage(image);
        cvRectangle(image2,cvPoint(roi_x0,roi_y0),cvPoint(x,y),CV_RGB(255,0,255),1);
        cvShowImage(window_name,image2);
        cvReleaseImage(&image2);
    }
}

void MainWindow::on_actionMark_Faces_triggered()
{
    char iKey=0;
    string strPrefix;
    string strPostfix;
    string input_directory;
    string output_file;

    input_directory ="E:/My/";
    output_file ="pos.txt";

    /* Get a file listing of all files with in the input directory */
    DIR    *dir_p = opendir (input_directory.c_str());
    struct dirent *dir_entry_p;

    if(dir_p == NULL) {
        fprintf(stderr, "Failed to open directory %s\n", input_directory.c_str());

    }

    fprintf(stderr, "Object Marker: Input Directory: %s  Output File: %s\n", input_directory.c_str(), output_file.c_str());

    //    init highgui
    cvAddSearchPath(input_directory);
    cvNamedWindow(window_name,1);
    cvSetMouseCallback(window_name,on_mouse,NULL);

    fprintf(stderr, "Opening directory...");
    //    init output of rectangles to the info file
    ofstream output(output_file.c_str());
    fprintf(stderr, "done.\n");

    while((dir_entry_p = readdir(dir_p)) != NULL)
    {
        numOfRec=0;

        if(strcmp(dir_entry_p->d_name, ""))
        fprintf(stderr, "Examining file %s\n", dir_entry_p->d_name);

        /* TODO: Assign postfix/prefix info */
        strPostfix="";
        //strPrefix=input_directory;
        strPrefix=input_directory+dir_entry_p->d_name;
        //strPrefix+=bmp_file.name;
        fprintf(stderr, "Loading image %s\n", strPrefix.c_str());

        if((image=cvLoadImage(strPrefix.c_str(),1)) != 0)
        {

            //    work on current image
            do

    {
                cvShowImage(window_name,image);

                // used cvWaitKey returns:
                //    <B>=66        save added rectangles and show next image
                //    <ESC>=27        exit program
                //    <Space>=32        add rectangle to current image
                //  any other key clears rectangle drawing only
                iKey=cvWaitKey(0);
                switch(iKey)
                {

                case 27:

                        cvReleaseImage(&image);
                        cvDestroyWindow(window_name);
                        return;
                case 32:

                        numOfRec++;
                printf("   %d. rect x=%d\ty=%d\tx2h=%d\ty2=%d\n",numOfRec,roi_x0,roi_y0,roi_x1,roi_y1);
                //printf("   %d. rect x=%d\ty=%d\twidth=%d\theight=%d\n",numOfRec,roi_x1,roi_y1,roi_x0-roi_x1,roi_y0-roi_y1);
                        // currently two draw directions possible:
                        //        from top left to bottom right or vice versa
                        if(roi_x0<roi_x1 && roi_y0<roi_y1)
                        {

                            printf("   %d. rect x=%d\ty=%d\twidth=%d\theight=%d\n",numOfRec,roi_x0,roi_y0,roi_x1-roi_x0,roi_y1-roi_y0);
                            // append rectangle coord to previous line content
                            strPostfix+=" "+IntToString(roi_x0)+" "+IntToString(roi_y0)+" "+IntToString(roi_x1-roi_x0)+" "+IntToString(roi_y1-roi_y0);

                        }
                        else
                                                    //(roi_x0>roi_x1 && roi_y0>roi_y1)
                        {
                            printf(" hello line no 154\n");
                            printf("   %d. rect x=%d\ty=%d\twidth=%d\theight=%d\n",numOfRec,roi_x1,roi_y1,roi_x0-roi_x1,roi_y0-roi_y1);
                            // append rectangle coord to previous line content
                            strPostfix+=" "+IntToString(roi_x1)+" "+IntToString(roi_y1)+" "+IntToString(roi_x0-roi_x1)+" "+IntToString      (roi_y0-roi_y1);
        }

                        break;
                }
            }
            while(iKey!='b');

            {
            // save to info file as later used for HaarTraining:
            //    <rel_path>\bmp_file.name numOfRec x0 y0 width0 height0 x1 y1 width1 height1...
            if(numOfRec>0&&iKey=='b')
            {
                //append line
                /* TODO: Store output information. */
                output << strPrefix << " "<< numOfRec << strPostfix <<"\n";

            cvReleaseImage(&image);
            }

         else
        {
            fprintf(stderr, "Failed to load image, %s\n", strPrefix.c_str());
        }
    }

    }}

    output.close();
    cvDestroyWindow(window_name);
    closedir(dir_p);
} 
```

错误发生在行

```
 cvSetMouseCallback(window_name,on_mouse,NULL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:48:09.573

成员函数不同于常规函数（因为它们必须传入一个额外隐藏的“this”参数）。

这就是为什么它说：

```
void (MainWindow::)(int, int, int, int, void*) 
```

不匹配：

```
void ()(int, int, int, int, void*) 
```

**MainWindow::**部分很重要。

如果您使用的是 C++11，则可以使用 std::function 和 std::bind 并且它会起作用（请参阅[此问题](https://stackoverflow.com/questions/9281172/how-do-i-write-a-pointer-to-member-function-with-stdfunction)）。静态成员函数也可以工作，因为静态成员函数也没有**this**指针，并且行为类似于常规函数（但在命名空间中，并且具有私有成员访问权限）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:50:14.997

回调方法必须是`static`and `public`（或非成员函数）。正如您发现的那样，如果它是一个非成员函数，它就可以工作，但如果它是一个非静态方法，则会出现错误。您应该将您的定义`MainWindow::on_mouse`为：

```
static void MainWindow::on_mouse(int event, int x, int y, int flag, void *param) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:31:10.423

这不是一个不常见的问题。解决方案是有一个包装函数：

```
static void MainWindow::on_mouse_wrapper(int event, int x, int y, int flag, void *param)
{
   MainWindow* self = reinterpret_cast<MainWindow*>(param);
   self->on_mouse(event, x, y, flag, NULL);
} 
```

然后编辑你的

cvSetMouseCallback(window_name,on_mouse,NULL);

到：

cvSetMouseCallback(window_name,on_mouse,this);

# java - 不向超类列表添加重复项（检查与子类是否相等）

> ID：15417492
> 
> 赞同：0
> 
> 时间：2013-03-14T18:36:25.277
> 
> 标签：java, inheritance, comparison

我有一个`List<Item> items = new ArrayList<>();`我添加了两个不同的项目，两个子类`Item`：`PortableItem`和`SceneryItem`。

```
public class Item implements Comparable<item> {
    public String id;
    public String desc;

    ...

    public int compareTo(Item o) {
        return getId().compareTo(o.getId());
    }  
} 
```

现在，我想`ID`在将新项目添加到我的列表之前检测具有重复 s 的项目。

```
 PortableItem a = new PortableItem("a");
    SceneryItem b  = new SceneryItem("a");
    items.add(a);
    items.contains(b); 
```

返回假。我怎样才能改变这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:51:32.407

您可以添加一个`equals`在 id 上进行比较的方法，默认情况下`Object`它们等于另一个`==`- 即相同的实例。这不是你想要的。

```
public class Item implements Comparable<Item> {

    public String id;
    public String desc;

    public String getId() {
        return id;
    }

    @Override
    public int compareTo(Item o) {
        return getId().compareTo(o.getId());
    }

    @Override
    public int hashCode() {
        int hash = 7;
        hash = 17 * hash + Objects.hashCode(this.id);
        return hash;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == this) {
            return true;
        }
        if (!(obj instanceof Item)) {
            return false;
        }
        final Item other = (Item) obj;
        if (!Objects.equals(this.id, other.id)) {
            return false;
        }
        return true;
    }
} 
```

**无论如何，鉴于您的方法和与 equals 一致**`compareTo`的要求，这确实是一种很好的做法-如果它们具有相同的.现在将返回 true 。**`a.equals(b)``id`**

 **因为你现在有一个`equals`方法，所以你**必须有**一个`hashCode()`方法，再次符合 equals 的要求。

请注意，如果您`equals`在超类中重写该方法，除非您在最后使用调用，否则这显然不起作用`return super.equals`。

现在，使用`List`该`contains`方法可以保证 O(n) - 这*非常慢*。我建议使用保证 O(1)的`Set`地方。`contains`如果您需要维护订单，请使用 a`LinkedHashSet`甚至更好的 a `TreeSet`，它将使用您的`compareTo`方法自动订购商品。

无论如何，您总是可以通过一个 O(n) 调用将事情变成`List`事后...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:51:13.830

您需要覆盖基类中的`equals()`and`hashCode()`方法以按 ID 进行比较。
`compareTo()`仅用于排序。**

# java - 使用对话框最小化和恢复

> ID：15417497
> 
> 赞同：0
> 
> 时间：2013-03-14T18:36:53.687
> 
> 标签：java, swing, jdialog

我有一个使用 Swing 的项目。有一个主体 JFrame 调用辅助 JDialog，而这些辅助对话框调用其他 jdialog。辅助对话框不是模态的，我一次可以调用更多的 onde 对话框。这样我就可以为所有打开的二级对话框调用其他（第 3 级）对话框。

当我在打开一个或多个辅助对话框并恢复它时最小化主框架时，可以正确看到所有窗口但是当我打开一个第 3 级对话框时（请记住，它的模式是辅助对话框之一）其他屏幕不能除非我关闭第三级对话框，否则会被看到。

我需要最小化主框架并在最小化它们之前恢复所有窗口。我该怎么做？

# javascript - jQuery：无法识别 CSS 动画期间设置的值

> ID：15417498
> 
> 赞同：0
> 
> 时间：2013-03-14T18:36:54.470
> 
> 标签：javascript, jquery, css, css-animations

我有以下功能：

```
var height = $('.fade').outerHeight();

function fadeIt() {
    var fade = function() {
        var opcty = (height - window.scrollY) / height;

        if (opcty >= 0) {
            console.log(opcty);
            $('.fade').css('opacity', opcty);
        }
    };

    $(window).on('scroll', fade);
} 
```

它应该将 div 的不透明度“映射”到滚动位置。实际上，它甚至可以工作！但不能与设置不透明度的 CSS 动画结合使用。我相信这是因为 jQuery 无法识别 CSS 动画中的值，但我不确定。我怎样才能使这项工作？在下面的[Fiddle](http://jsfiddle.net/XaufD/1/)中，我标记了需要删除的两个 CSS 规则以查看该功能是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:50:02.827

嗯，我编辑了这个，它可以工作

```
.fade {
position: fixed;
width: 100px;
height: 100px;
background-color: red;}

var height = $('.fade').outerHeight();function fadeIt() {    var fade = function() {
    var opcty = (height - window.scrollY) / height;

    if (opcty >= 0) {
        console.log(opcty);
        $('.fade').css({opacity: (height - window.scrollY) / height});
    }
};

$(window).on('scroll', fade);}fadeIt(); 
```

这样就可以了，buuutt，如果您将.css 更改为.animate 并添加250 次，效果会更好，再见。

# asp.net - 从 IIS 下载 resx 文件（或任何其他类型的 asp 文件）

> ID：15417499
> 
> 赞同：1
> 
> 时间：2013-03-14T18:36:57.870
> 
> 标签：asp.net, iis, ihttphandler

我已经有了一个文件处理程序，可以为所有类型的文件提供服务（它们是从数据库加载的）。这是配置：

```
<handlers>
  <add name="Supertext Document Download" path="*" verb="*" preCondition="integratedMode" type="Supertext.Handlers.FileTypeHandler" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" />
</handlers> 
```

这就是我访问它们的方式：

[https://www.page.com/file/165298/SalesReport-en.resx](https://www.page.com/file/165298/SalesReport-en.resx)

不幸的是，对于 resx 文件，我总是得到 404。如果我更改文件扩展名，它就可以工作。附注：对于文件处理程序，只有文件名之前的 id 很重要。

我查看了各种帖子，但找不到与我的问题相似的任何内容： [如何在 ASP.NET 中提供 resx 文件？](https://stackoverflow.com/questions/9267297/how-to-serve-resx-file-in-asp-net)
[下载一个aspx页面](https://stackoverflow.com/questions/6178009/downloading-an-aspx-page)

我想这是一些安全问题？我拥有对服务器的完全访问权限，因此配置更改不是问题。只要我知道我需要改变什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:02:43.410

实际上，.resx 默认是受限的，但是如果你知道你在做什么，你可以在 web.config 中启用它。

```
 <security>
      <requestFiltering>
          <fileExtensions allowUnlisted="true">
             <remove fileExtension=".resx" />
             <add fileExtension=".resx" allowed="true" />
          </fileExtensions>
      </requestFiltering>
    </security> 
```

# windows - Inno Setup 驱动程序安装 API

> ID：15417503
> 
> 赞同：2
> 
> 时间：2013-03-14T18:37:07.427
> 
> 标签：windows, driver, inno-setup

我无法调用几个 Windows API 来安装驱动程序。具体来说：
[SetupCopyOEMInf](http://msdn.microsoft.com/en-us/library/aa376990%28v=vs.85%29.aspx)或[DriverPackageInstall](http://msdn.microsoft.com/en-us/library/windows/hardware/ff544813%28v=vs.85%29.aspx)

我使用的原型似乎不起作用，可能是由于 Unicode 字符串或使用了指针。注意：我使用的是 Inno Setup 的 Unicode 版本。有些参数可能是NULL，但我不知道如何在Code部分指定NULL。

以下是我尝试过的原型：

```
function SetupCopyOEMInf(SourceInfFileName: String;
  OEMSourceMediaLocation: String; OEMSourceMediaType: Longword;
  CopyStyle: Longword; DestinationInfFileName: String;
  DestinationInfFileNameSize: Longword; var RequiredSize: Longword;
  DestinationInfFileNameComponent: String): Longword;
external 'SetupCopyOEMInfW@setupapi.dll stdcall setuponly';

function GetLastError(): Longword;
external 'GetLastError@kernel32.dll stdcall setuponly';

type
InstallerInfo = record
  pApplicationId: String;
  pDisplayName: String;
  pProductName: String;
  pMfgName: String;
end;

function DriverPackageInstall(DriverPackageInfPath: String;
  Flags: Longword; pInstallerInfo: InstallerInfo;
  var pNeedReboot: Longword): Longword;
external 'DriverPackageInstall@files:difxapi.dll stdcall setuponly'; 
```

原型可能是正确的，但我遇到了不同的错误，我不知道。我知道出了点问题，因为调用失败（返回失败代码）并且从 C 程序进行相同的调用工作正常。

**更新1：**
`DriverPackageInstall`可能不会立即有用。DLL 必须在使用前注册。并不是说这是不可能的，只是需要比这个问题更多的工作。

**更新 2、3：**
示例用法：

```
const
  MAX_PATH = 260;
  SPOST_PATH = 1;
  SP_COPY_DELETESOURCE = $0000001;

procedure InstallUsbDriver();
var
  RequiredSize: DWORD;
  DestinationInfFileName: String;
  DestinationInfFileNameComponent: String;
begin
  SetLength(DestinationInfFileName, MAX_PATH);
  SetLength(DestinationInfFileNameComponent, MAX_PATH);
  if not SetupCopyOEMInf(ExpandConstant('{app}\driver.inf'),
    ExpandConstant('{app}'), SPOST_PATH, SP_COPY_DELETESOURCE,
    DestinationInfFileName, MAX_PATH, RequiredSize,
    DestinationInfFileNameComponent) then begin
    MsgBox('Error installing USB driver: ' + SysErrorMessage(DLLGetLastError),
      mbError, MB_OK);
    CancelWithoutPrompt := True;
    WizardForm.Close;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T14:39:05.627

由于我花了一些时间来弄清楚为什么给定且经过验证的答案不起作用，因此我在此处发布了针对我的案例的正确答案。我在 ANSI 模式下使用 InnoSetup 5.5.3。使用 var 修饰符为字符串声明外部方法时，出现访问冲突错误。您不应该添加此修饰符。

轻松复制/粘贴答案：

```
#ifdef UNICODE
  #define AW "W"
#else
  #define AW "A"
#endif

function GetLastError: DWORD;
  external 'GetLastError@kernel32.dll stdcall setuponly';

function SetupCopyOEMInf(SourceInfFileName, OEMSourceMediaLocation: String;
  OEMSourceMediaType, CopyStyle: DWORD; DestinationInfFileName: String;
  DestinationInfFileNameSize: DWORD; var RequiredSize: DWORD;
  DestinationInfFileNameComponent: String): BOOL;
  external 'SetupCopyOEMInf{#AW}@setupapi.dll stdcall setuponly';

const
  MAX_PATH = 260;

  SPOST_NONE = 0;
  SPOST_PATH = 1;
  SPOST_URL = 2;

  SP_COPY_DELETESOURCE = $0000001;
  SP_COPY_REPLACEONLY = $0000002;
  SP_COPY_NOOVERWRITE = $0000008;
  SP_COPY_OEMINF_CATALOG_ONLY = $0040000;

function InstallDriver(PathLocation, FileName : String) : Boolean;
var
  RequiredSize: DWORD;
  DestinationInfFileName: String;
  DestinationInfFileNameComponent: String;
begin
  Result := False;
  if FileExists(PathLocation+'\'+FileName) then begin
    SetLength(DestinationInfFileName, MAX_PATH);
    SetLength(DestinationInfFileNameComponent, MAX_PATH);
    Result := SetupCopyOEMInf(PathLocation+'\'+FileName,
                              PathLocation, SPOST_PATH, SP_COPY_DELETESOURCE,
                              DestinationInfFileName, MAX_PATH, RequiredSize,
                              DestinationInfFileNameComponent);
  end;
end; 
```

像这样使用它：

```
 if not InstallDriver(ExpandConstant('{app}\drivers'), 'mydriver.inf') then
 begin
  MsgBox('Error: '+SysErrorMessage(GetLastError), mbError, MB_OK);
 end 
```

# sql-server - -1 在 SQL Server 元数据表中是否总是表示“最大值”？

> ID：15417505
> 
> 赞同：1
> 
> 时间：2013-03-14T18:37:10.253
> 
> 标签：sql-server, sql-server-2008, character, metadata, maxlength

在 SQL Server 中运行它时，我看到在 CHARACTER_MAXIMUM_LENGTH 列中为数据类型为 nvarchar(max) 的表字段/列定义了 -1。如果没有定义长度，我可以假设它总是设置为-1吗？

```
SELECT COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE,ORDINAL_POSITION 
FROM INFORMATION_SCHEMA.COLUMNS WHERE COLUMN_NAME LIKE 'Ancestor_C%' 
```

![在此处输入图像描述](../Images/cab38e263c64a3b6d8f7efe73bdd6700.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:42:28.610

根据[这个线程](http://www.sqlservercentral.com/Forums/Topic1240828-338-1.aspx#bm1240898)，如果是的`char, varchar, nchar, nvarchar`话`MAX`：

```
...
CASE WHEN t.NAME IN ('char','varchar','nchar','nvarchar')
     THEN CASE WHEN c.max_length = - 1
               THEN 'MAX'
               ELSE CONVERT(VARCHAR(4), CASE WHEN t.NAME IN ('nchar','nvarchar') THEN c.max_length / 2
... 
```

根据[这个网站](http://www.mssqltips.com/sqlservertutorial/183/informationschemacolumns/)，它表明：

> -1 用于 xml 和大值类型数据。否则，返回 NULL。

[本站](http://sqlintegrity.blogspot.com/2012/07/sql-server-hint-on-max-size-in-data.html)也支持

![](../Images/a0bca84d20eb4c44cf56fd019c26949f.png)

# php - 尝试使用 FPDF 和 FPDI 写入 PDF 文件

> ID：15417506
> 
> 赞同：1
> 
> 时间：2013-03-14T18:37:10.867
> 
> 标签：php, pdf, fpdf

我得到了一个 PDF 文件，其中包含需要用数据库中的值填写的点。我将 FPDF 库与 FPDI 一起使用，定位文本似乎需要反复试验……我必须使用 X 和 Y 坐标才能将文本放置在正确的位置。似乎是一种繁琐且低效的方法。我在这里错过了什么吗？

```
 require_once('fpdf/fpdf.php');
 require_once('fpdi/fpdi.php');

 // initiate FPDI  
 $pdf = new FPDI();  
 // add a page
 $pdf->AddPage();  
 // set the sourcefile  
 $pdf->setSourceFile('1.pdf');  
 // import page 1  
 $tplIdx = $pdf->importPage(1);  
 // use the imported page and place it at point 10,10 with a width of 200 mm   (This is    the image of the included pdf)
 $pdf->useTemplate($tplIdx, 10, 10, 200);  
 // now write some text above the imported page
 $pdf->SetTextColor(0,0,0);

 $pdf->SetFont('Arial','B',20);  
 $pdf->SetXY(85, 50);  
 $pdf->Write(0, "Johnny Walker");
 $pdf->SetFont('Arial','B',11);
 $pdf->SetXY(92, 69); 
 $pdf->Write(0, "3"); 
 $pdf->SetFont('Arial','B',10);
 $pdf->SetXY(114, 76); 
 $pdf->Write(0, 'Ventilation Management of the Amyotropic Lateral Scleropsis'); 
 $pdf->SetFont('Arial','B',10);
 $pdf->SetXY(114, 90); 
 $pdf->Write(0, date('m/d/Y'));  
 $pdf->SetFont('Arial','B',7);
 $pdf->SetXY(66, 127); 
 $pdf->Write(0, '1.5');  
 $pdf->Output('1.pdf', 'I'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T18:43:56.563

我过去用过`FPDF`一次，你是对的，设置 XY 位置非常麻烦。但似乎没有别的办法。

我唯一建议的是考虑

```
$pdf->SetXY($pdf->GetX() + $x_value, $pdf->GetY() +  $y_value) 
```

在您不确定应该放置的确切位置的地方。

# xcode - 在第一个视图中单击按钮时，可可如何在第二个视图中更改标签文本

> ID：15417507
> 
> 赞同：0
> 
> 时间：2013-03-14T18:37:10.963
> 
> 标签：xcode, cocoa-touch, views, label

我对 xcode 很陌生，对它了解不多。我正在制作一个应用程序，您在第一个视图中将文本输入到 textField 中，然后单击一个按钮，并将更改第二个视图中标签的文本。

这是代码。（小版本）首先查看代码。

```
 #import "SecondViewController.h"  
    - (IBAction)Settext:(id)sender;
    @property (weak, nonatomic) IBOutlet UITextField *textField;
    @implementation FirstViewController 

    - (IBAction)Settext:(id)sender {
    self.text = self.textField.text;
    self.label.text = self.text

    }
    @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T19:52:07.590

你需要使用segues。这些让我困惑了一段时间，但它们确实不错。当你点击按钮时，你需要触发一个 segue（这只是意味着视图正在移动到另一个控制器）然后你像你所做的那样 #import 第二个视图控制器的 .h 。然后使用 -(void)prepareForSeuge 方法，如下所示

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{    
        // Get reference to the destination view controller
        YourViewController *vc = [segue destinationViewController];

        //This is where you would set the text from the second view controller to what you want
       vc.yourText = @"What ever you need it to be";
    }
} 
```

您需要在第二个视图控制器中为 NSString 创建一个名为 yourText 的 @property

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:25:45.903

在第二个视图类中创建一个字符串属性。在调用第二个视图时设置字符串值。使用`viewDidLoad`secovd 视图中的值。

# java - 如何停止继承主窗口菜单的新窗口

> ID：15417511
> 
> 赞同：0
> 
> 时间：2013-03-14T18:37:22.637
> 
> 标签：java, swing

我有一个主类，它在程序启动时加载我的应用程序窗口，如以下代码所示：

```
public class SwendaEye{

    public static void main(String[]args){  
    FrameandComp frame = new FrameandComp();
    JFrame win;

    win = frame.mainFrame();
    /*========================================================================*/
    JMenuBar bar;
    bar = new JMenuBar();
    win.setJMenuBar(bar); 

    JMenu swenda = new JMenu("SWENDAEYE");// adding Swenda menu to the bar.
    bar.add(swenda);

                 JMenuItem open = new JMenuItem("Open");
                 swenda.add(open);
                 JMenuItem exit = new JMenuItem("Exit");
                 swenda.add(exit);

    JMenu tools = new JMenu("Tools");// adding Tools menu to the bar.
    bar.add(tools);
                 JMenuItem convertIP = new JMenuItem("Convert IP Address");
                 tools.add(convertIP);
                 JMenuItem convertDomain = new JMenuItem("Convert Domain Name");
                 tools.add(convertDomain);
                 Domain dom = new Domain();

                 dom.iniTheEvent(convertDomain);
                 convertDomain.addActionListener(dom);

       JMenu view = new JMenu("View"); // adding Swenda menu to the bar.
       bar.add(view);
                 JMenuItem webDetail = new JMenuItem("Website header");
                 view.add(webDetail);
                 JMenuItem report = new JMenuItem("Report");
                 view.add(report);

       win.setVisible(true);
    }
} 
```

例如，当我单击域转换器时，我应该能够触发在`Domain`类中设置的新窗口。在我的情况下，窗口确实打开了，但是“域转换器”窗口包含一个 `Menu`在类中定义的，`Main`当它应该只有一个按钮和一个文本字段时。正如你所看到的，我还没有在课堂上实施或发起一个`Menu`或任何地方。`MenuItem``Domain`

```
public class Domain implements ActionListener{

    FrameandComp frame = new FrameandComp();
    JFrame domFrame;
    String DomainTitle= "Domain Converter";
    TextField text = new TextField(20);
    JButton bot = new JButton("Convert");
    JMenuItem men;
    public Domain(){        
    }

    public void createFrame(){

        FlowLayout flow = new FlowLayout(); // Create a layout manager
        domFrame =frame.setFrame(400,200,DomainTitle,JFrame.DISPOSE_ON_CLOSE);
        Container content = domFrame.getContentPane(); // Get the content pane
        content.setLayout(flow);
        content.add(text);
        content.add(bot);
        domFrame.add(content);
        domFrame.setVisible(true);

    }

    public JMenuItem iniTheEvent(JMenuItem menuIt){
        return men = menuIt;
    }

     public void actionPerformed(ActionEvent event) {

               if(event.getSource() == men ){
                   this.createFrame();
               }

        }

} 
```

我希望能够单击域转换器`MenuItem`并能够打开一个新窗口，而无需从主窗口继承任何菜单功能。

有人能告诉我我在应用程序中做错了什么导致我的新窗口继承了主窗口的菜单吗？

您的支持将不胜感激。

该类`FrameandComp`用于初始化所有`JFrames`：

```
public class FrameandComp {
    static JFrame awindow = new JFrame();

        public FrameandComp(){}

        public  JFrame setFrame(int width, int height, String title, int exitRule){

            Toolkit thekit = awindow.getToolkit();
            Dimension wndsize =  thekit.getScreenSize();
            awindow.setBounds(wndsize.width/4,wndsize.height/4,width, height);
            awindow.getContentPane().setBackground(Color.DARK_GRAY);
            awindow.setTitle(title);
            awindow.setDefaultCloseOperation(exitRule);
            return awindow;

        }

        public JFrame mainFrame(){

            Toolkit thekit = awindow.getToolkit();
            Dimension wndsize =  thekit.getScreenSize();
            awindow.setBounds(wndsize.width/4,wndsize.height/4,
            ((2 *wndsize.width)/2), ((2 *wndsize.height)/2));
            awindow.getContentPane().setBackground(Color.DARK_GRAY);
            awindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            awindow.setTitle("SWENDAEYE");
            return awindow;

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:51:52.887

如果您只想要一个简单的输入对话框，请查看[JOptionPane](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html)（或[此处](http://www.java2s.com/Tutorial/Java/0240__Swing/InputPopUps.htm)查看一些示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:19:36.890

在您的`Domain`班级中，删除此行-

```
FrameandComp frame = new FrameandComp(); 
```

并在`createFrame()`方法中将 domFrame 对象初始化为新的 JFrame -

```
domFrame = new JFrame(DomainTitle);
domFrame.setSize(400,200); 
```

代替 -

```
domFrame =frame.setFrame(400,200,DomainTitle,JFrame.DISPOSE_ON_CLOSE); 
```

您正在向框架对象添加元素，而不是创建您提到的新 JFrame （窗口）。

如果您只想从用户那里获取输入，我会建议您尝试

```
JOptionPane.showInputDialog(...) 
```

希望对你有帮助。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:58:00.557

在您的`FrameandComp`类中，您创建一个实例`awindow`并将其用于`mainframe`和`setFrame`方法。

相反，尝试在这些方法中的每一个中创建一个新框架并返回它，这样，每次调用这些方法之一时，都会得到一个新框架。

# java - 调用具有较少特定参数的重载方法

> ID：15417512
> 
> 赞同：0
> 
> 时间：2013-03-14T18:37:23.740
> 
> 标签：java

`java.util.Vector`有方法： `remove(int index)`和 `remove(Object o)`

我有：

```
vector<Integer> a;
int b=3; 
```

我想：

`remove(Object o)`使用`b`变量调用方法。写作`a.remove(b)`显然调用`remove(int index)`

在此先感谢， Maciej

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:39:29.647

```
a.remove(Integer.valueOf(b)); 
```

应该管用。在自动装箱被认为调用之前`Integer`，将首先解析为引用类型和匹配。`remove(Object)``remove(int)`

来自[Java 语言规范，15.2.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)：

> ## 编译时步骤 2：确定方法签名
> 
> 第一阶段（第 15.12.2.2 节）执行重载决议**，不允许装箱或拆箱转换**，或使用变量 arity 方法调用。如果在此阶段没有找到适用的方法，则处理继续到第二阶段。
> 
> 第二阶段（§15.12.2.3）执行重载决议，同时**允许装箱和拆箱**......

# php - 使用 PHP 从本地 xampp 服务器到在线免费服务器的 FTP 文件。可以吗？

> ID：15417513
> 
> 赞同：-2
> 
> 时间：2013-03-14T18:37:24.927
> 
> 标签：php, file, ftp, xampp

我正在尝试将其作为大学项目的一部分。基本上我在脚本中的 php 中创建了一个文件。这个 PHP 脚本在我的 xampp 服务器上本地运行。我的文件也位于 xampp 服务器上。我想做的是 FTP 这个文件，使用 PHP 和可能的 Filezilla 到我设置的在线免费托管服务器。这可能吗？感谢您提前给我的任何信息:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:43:06.053

我认为您要问的是“如何将我的 PHP 脚本部署到免费的托管服务器上”。

为此，您需要先注册一个托管服务器 - 为简单起见，假设您使用 Amazon EC2。它不是免费的，但它便宜且易于设置（使用微型实例）。

注册后，您将获得对该框的 SSH 访问权限。之后，您可以在新机器上安装 Apache/PHP（例如通过 XAMPP）。适当的 SSH 客户端（例如，如果您使用的是 Windows，则为 Tunnelier）将允许您通过内置的 SFTP 客户端将文件传输到 EC2 盒子。

如果您不想使用 EC2，请考虑在 Google 上搜索“PHP 托管”——您也许可以找到一个免费的；确保它提供 FTP 访问，你是金子。

# c# - 对格式错误的 app.config 进行最干净的处理

> ID：15417518
> 
> 赞同：0
> 
> 时间：2013-03-14T18:37:39.753
> 
> 标签：c#, exception-handling

我有一个`app.config`（由 Visual Studio 从`Settings.settings`文件生成），主要用于包含诸如连接字符串之类的设置。

我通过 访问这些`Properties.Settings.Default.MySettingName`，一切正常。当我部署到目标机器时，我让用户编辑 .config 文件以更改（例如）连接字符串或其他设置之一；这也可以正常工作...直到用户错误地编辑文件并意外删除了关闭 XML 标记的一部分，或其他一些同样具有灾难性的 XML 错误。

那时，`System.Configuration.ConfigurationErrorsException`只要读取其中一个设置，运行应用程序就会抛出 a（这是有道理的）。

我的问题是，最干净的方法是什么？我宁愿不将每个调用都`Properties.Settings`包含在 try/catch 中，并且对其中一个设置进行任意（陷入）检查似乎是任意的。

有没有更好的方法来检查设置是否可以正确读取？

# python - 如何访问 ATNewsItem 对象的“imageCaption”字段的值？

> ID：15417521
> 
> 赞同：2
> 
> 时间：2013-03-14T18:37:43.030
> 
> 标签：python, plone, archetypes

如何访问`imageCaption`ATNewsItem 对象的字段值？

我试过`news_item_obj.getField('imageCaption')`了，但结果总是`None`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T21:09:16.420

您只得到字段本身，而不是值。只需使用访问器：

```
news_item_obj.getImageCaption() 
```

# java - Java 类设计中的提交事务

> ID：15417523
> 
> 赞同：0
> 
> 时间：2013-03-14T18:37:49.143
> 
> 标签：java, jsf

我正在寻找 Java 类设计中的最佳策略。我正在使用 JSF 2.1，基本上我有一个类可以下订单并从 Web 服务中检索。

*   如果使用此类出错，我想提交事务或回滚。

就班级设计而言，我可以采取什么最佳方法来解决这个问题。我需要使用嵌套类设计吗？我至少有 15 种方法必须协同工作，以确保即使其中一种方法失败，事务也会回滚。任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:41:18.317

JSF 是一种视图技术。如果你做对了，它根本不应该参与交易。

JSF 视图应该与控制器对话。控制器应该具有对服务的引用，该服务是了解工作单元和事务的对象。该服务编排模型对象、持久性对象和其他服务来完成用例。

获取数据库连接和提交或回滚事务的逻辑属于服务。

如果您使用面向方面的编程，这很容易做到。（这就是 Spring 的做法。）

```
view--->controller--->service--+--->persistence
                               |
                               +--->model 
```

它被称为分层设计。当我绘制它们时，依赖项应该遵循箭头。模型和持久性不了解服务、控制器或视图。

# html - Facebook 分享者仅拉取 3 张图片

> ID：15417531
> 
> 赞同：2
> 
> 时间：2013-03-14T18:38:18.050
> 
> 标签：html, facebook, sharing

我在一个网页上使用 facebook 共享器，其中包含一堆不同纵横比的图像。我正在`og:image`为一些图像（通常是 7-10 个）定义元标记，并且在[调试器](http://developers.facebook.com/tools/debug)中一切看起来都很好，但是我使用调试器刷新的所有新页面和任何旧页面仅在共享弹出窗口中显示 3 个图像。这种情况一直在发生，并且似乎与图像的大小或内容无关。它总是返回 3 的事实让我认为这是一个 fb 问题。还有人看到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:21:40.723

我之前在 Facebook 上也遇到过这个问题。有时，即使没有正确的错误/警告消息，您也需要将图像的较大版本设置为默认值。虽然 Facebook 的调试器警告消息的最小尺寸为 200x200，但我通常尽可能坚持不小于 600x300。还要记住纵横比，正如其他人所说，你可能需要提交一份错误报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:55:49.763

我还注意到，如果您将 og:type 设置为“文章”，Facebook 最多会拉出 3 张图片。

作为一种可能的解决方案，您可以将 og:type 更改为“网站”或“产品”，这样 Facebook 将提取更多图像。

# crystal-reports - 水晶报告两个表中的两个日期参数

> ID：15417539
> 
> 赞同：0
> 
> 时间：2013-03-14T18:38:40.000
> 
> 标签：crystal-reports, report

我正在尝试从两个表中制作生产报告，两者都是不同的日期。（下面的表格示例）

```
first table (machine ID, production time, date)
-result should be sum of time group by machine ID (parameters - date from - to)

second table (machine ID, repair time, date)
-result should be sum of repair time group by(parameters - date from-to). 
```

在报告中，我需要计算两个表中的总和（例如：）`from 1.1.2013 to 10.1.2013`。问题是我需要从两个表中使用两个不同的日期参数，但是当我使用该连接时，它不能正常工作，`LEFT OUTER JOIN`但是`INNER JOIN`。（从第一个表我需要所有记录，从第二个只需要 where `id=id`）

表格示例：![在此处输入图像描述](../Images/08f6b57a662d7d7f9239d058d2ca5762.png)

结果必须是：

机器ID | 生产时间总和 | 维修时间总和（如果有） - 基于从到到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:33:23.420

不要加入表格，而是尝试联合它们。类似于以下内容：

```
SELECT machineID, spent_time as time, production_date as date, 'Production' as type
FROM table1
WHERE production_date between {?date_from} and {?date_to}

UNION

SELECT machineID, repair_time as time, repair_date as date, 'Repair' as type
FROM table2
WHERE repair_date between {?date_from} and {?date_to} 
```

然后，您可以轻松地按机器分组并分别汇总所有“生产”行和所有“修复”行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:37:15.983

您可以在一个“主”报告中嵌入两个子报告。在主报表中定义参数，然后将它们链接到每个子报表。

# php - 如何在 JavaScript 中编码/解码字符串？

> ID：15417540
> 
> 赞同：0
> 
> 时间：2013-03-14T18:38:49.040
> 
> 标签：php, javascript, security, encryption

我需要在 onclick 函数中传递一个变量，我不希望用户能够查看页面源并轻松阅读。我想对字符串进行编码，然后在我将字符串传递给的函数中对其进行解码。

我已经对此进行了谷歌搜索，只能找到有关编码/解码 URL 的信息以安全地传递它们，但通常不能找到字符串。JavaScript 是否有任何内置的编码/解码函数（希望 PHP 也有，因为我也将使用 PHP 来发送编码字符串）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:45:50.340

你试图做的事情是不可行的。无论您使用什么解密逻辑，您都需要使用 JavaScript 将其发送到消费者的计算机，这意味着任何足够聪明的脚本小子都可以使用 Firebug 轻松解码您的所有秘密。此外，他们将能够在客户端、浏览器控制台中修改数据，并欺骗您的服务器。

我鼓励您将这些类型的机密保存在服务器端，可能处于会话状态，或者与当前登录的用户相关联。不要将其发送给客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:12:06.223

要从 javascript 中获取您的 URL，请尝试使用一些 ID。您必须将该 ID 服务器端转换为 URL。您可以使用简单的数组，例如：

```
function getLink($songID) {
    $decodeArray=array(
        1=>"www.mysite.com/myfirstsong.mp3",
        2=>"www.othersite.net/othersong.mp3");
    return $decodeArray[$songID];
}

die(getLink($_GET['songID']));//send back the URL 
```

或者您可以在翻译 php 代码中使用数据库（上图）

您有 2 种选择如何执行此“应答服务”1）使用 url（来自您的 php 脚本）回复 XMLHttpRequest 并将返回的值从 javascript 传递到 flash 客户端（如上面的代码）或 2）只向 Javascript 回答一些“OK”状态消息并将 URL 直接发送到 Flash 播放器 - 您需要能够在 Actionscript 中编写一些代码才能做到这一点。

问题仍然在于您需要通知客户端（或 Flash）有关实际歌曲位置（可以在其中找到该歌曲的可读 URL 字符串），因此它必须返回客户端并且可以使用嗅探器（数据包分析器）网络工具。如果是上面的代码，可以直接查询该 php 脚本并在屏幕上阅读答案，而无需嗅探。

为防止您需要通过 https 直接与 Flash 通信（不确定它是否有效），或者根本不发送 url，而是使用 Flash 之间的套接字连接将该歌曲的内容直接流式传输到您的 Flash 应用程序播放器客户端和您的（自制）php 套接字服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T19:19:14.310

您要实现的是 DRM，使用浏览器和 JavaScript 实现是不可行的。当然，您总是可以让用户更难获取声音文件，但请注意，您很容易吓跑您的用户。

你可以做的是在服务器端生成一个大的随机数（比如 8 到 16 个字节左右），或者散列一个计数器。然后，您使用给定的随机值使 MP3仅可用于下载*一次。*下次任何用户想要下载文件时，他都会得到一个新的随机数。随机数足够大，用户永远猜不到下一个文件。如前所述，您当然不能禁止第一次下载，因此任何聪明到可以使用浏览器缓存的人都可以轻松破坏该计划。

您还可以嵌入一个接收和解码数据流的 Flash 播放器，这样您就可以以非专家不易解码的形式发送数据。您可以将其与随机 URL 方法混合使用。

您可以使用十六进制对随机值进行 URL 编码，或者使用 base64 然后使用 URL 编码函数。

# excel - 如何在一组数据后自动插入一个空白行

> ID：15417544
> 
> 赞同：6
> 
> 时间：2013-03-14T18:39:03.783
> 
> 标签：excel, vba, rollup, blank-line

我在下面创建了一个示例表，它与我在 excel 中的表足够相似，它应该可以用来说明问题。我想简单地在 column1 中的每个不同数据之后添加一行（最简单的方法，使用 excel，谢谢）。

_

## 当前表：

```
column1   |   column2   |  column3
----------------------------------
  A       |     small   |  blue
  A       |     small   |  orange
  A       |     small   |  yellow
  B       |     med     |  yellow
  B       |     med     |  blue
  C       |     large   |  green
  D       |     large   |  green
  D       |     small   |  pink 
```

_

## 所需的表

**注意：**每个不同的column1之后的空白行

```
column1   |   column2   |  column3
----------------------------------
  A       |     small   |  blue
  A       |     small   |  orange
  A       |     small   |  yellow

  B       |     med     |  yellow
  B       |     med     |  blue

  C       |     large   |  green

  D       |     large   |  green
  D       |     small   |  pink 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-14T19:15:49.633

这完全符合您的要求，检查行，并**在 A 列的每次更改中**插入一个空白的空行：

```
sub AddBlankRows()
'
dim iRow as integer, iCol as integer
dim oRng as range

set oRng=range("a1")

irow=oRng.row
icol=oRng.column

do 
'
if cells(irow+1, iCol)<>cells(irow,iCol) then
    cells(irow+1,iCol).entirerow.insert shift:=xldown
    irow=irow+2
else
    irow=irow+1
end if
'
loop while not cells (irow,iCol).text=""
'
end sub 
```

我希望这能让你开始，让我们知道！

菲利普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-20T06:08:07.330

选择您的数组，包括列标签，DATA > Outline -Subtotal，在每次更改时：column1，使用函数：Count，将小计添加到：column3，选中 Replace current subtotals 和 Summary below data，OK。

筛选并选择 Column1、文本筛选器、包含...、计数、确定。选择除标签之外的所有可见内容并删除内容。删除过滤器，如果需要，取消组合行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-01T13:21:50.340

如果数据不是连续的（1 2 3 4 但 5 7 3 1 5），这将不起作用，因为在这种情况下您无法对其进行排序。

以下是我为我解决这个问题的方法：

列 A 初始数据，每个数字之间需要包含 5 行 - 5 4 6 8 9

B 列 - 1 2 3 4 5（最终数字表示您需要在 A 列中的数字之间的空行数）只要 A 列中有数字，就在 B 列中复制粘贴 1-5。

跳转到 D 列，在 D1 中键入 1。在 D2 中键入此公式 -`=IF(B2=1,1+D1,D1)` 将其拖动到与 B 列相同的长度。

返回 C 列 - 在 C1 单元格中键入此公式 - `=IF(B1=1,INDIRECT("a"&(D1)),"")`。把它拖下来，我们就完成了。现在在 C 列中，我们有与 A 列中相同的数字序列，分别分布为 4 行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T19:13:30.297

弄清楚了。

## 第1步

在 column1 的左侧放置一个新列，然后复制+粘贴以下公式

=B2=B3

=B3=B4

=B4=B5

...一直到底部（假设此处的 B 列是原始问题中的 column1）。

此公式评估下一行是否是 column1 中的新值。根据结果​​，您将得到 TRUE 或 FALSE。将这些结果复制并粘贴为值，然后将“FALSE”替换为 nil，将“TRUE”替换为 0.5

## 第2步

然后将只有 0.5 的那一列添加到 column1，这将产生下表：

```
 newcolumn0  |   column1 ("B") |   column2   |  column3
-----------------------------------------------------
              |     1           |     small   |  blue
              |     1           |     small   |  orange
      1.5     |     1           |     small   |  yellow
              |     2           |     med     |  yellow
      2.5     |     2           |     med     |  blue
      3.5     |     3           |     large   |  green
              |     4           |     large   |  green
      4.5     |     4           |     small   |  pink 
```

## 第 3 步

最后，将 newcolumn0 中的值复制并粘贴到 column1 中值的正下方，然后按 column1 对表格进行排序，您应该在 column1 中每个不同的整数之间有一个空白行，表格如下所示：

```
 newcolumn0   |  column1 ("B")  |   column2       |  column3
---------------------------------------------------------------
                 |     1           |     small   |  blue
                 |     1           |     small   |  orange
        1.5      |     1.5         |             |
                 |     1           |     small   |  yellow
                 |     2           |     med     |  yellow
                 |     2           |     med     |  blue
        2.5      |     2.5         |             |
                 |     3           |     large   |  green
        3.5      |     3.5         |             |
                 |     4           |     large   |  green
                 |     4           |     small   |  pink
        4.5      |     4.5         |             | 
```

## 替代解决方案（仍然没有 VBA）

1.  输入 1 Column 1, Row 2 的值（假设这是 A2）
2.  将此公式放入 A3`=IF(B3=B2,A2,A2+1)`并将此公式复制+粘贴到第 2 列的其余部分
3.  然后将第 1 列中的所有值复制并粘贴到新的临时 excel 表中，删除重复项，然后将 0.5 添加到所有数字，然后将这些值粘贴到原始电子表格中第 1 列数据下方的值下方，将列中的所有数据粘贴为值，然后按该列排序，删除临时 excel 表

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-16T18:34:36.587

只是一个想法，如果您知道上面提到的小型，中型和大型类别...

在工作表的底部，制作 3 行，分别表示小、中和大，将字体更改为白色，然后按字母顺序排序，在每个部分之间放置一个空白行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-29T07:17:30.027

1.  在表格“控件”的左侧插入一列
2.  将数据编号为 1 到 1000（假设有 1000 行）
3.  将关键字段复制到另一个工作表并删除重复项
4.  在第 1000 条记录之后，将唯一的行项目复制到主工作表
5.  在“控制”列中，将数字 1001 添加到所有唯一记录
6.  对数据（包括添加的记录）进行排序，首先在关键字段上，然后在“控制”上
7.  添加了一个空行（在关键字段和“控制”中包含数据）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-11-12T08:12:03.353

我在处理共同基金单位买卖的excel中有一个大文件。工作表中的行数超过 4000。我没有使用 VBA 的经验，想使用基本的 excel。从上面建议的解决方案中得到提示，我尝试通过以下方式解决问题（自动插入空白行）：

1.  我根据控制字段对文件进行了排序
2.  我在文件中添加了一列
3.  我使用“IF”函数来确定控制数据何时发生变化。
4.  如果有变化，结果将显示“是”，否则“否”
5.  然后我过滤数据以对所有“是”项目进行分组
6.  我复制了共同基金名称、作品集编号等（无财务数据）
7.  然后我删除了过滤器并再次对文件进行了排序。结果是在所需位置添加了一行。（它不完全是一个空白行，因为如果它是完全空白的，排序将不会将该行放在所需的位置。）
8.  排序后，您可以轻松删除所有值以获得完全空白的行。

读者也可以尝试这种方法。

# java - JPopupMenu 的 MenuItems 没有响应更改...为什么？

> ID：15417546
> 
> 赞同：0
> 
> 时间：2013-03-14T18:39:06.120
> 
> 标签：java, swing, jpopupmenu

我注意到，一旦我的 JPopupMenu 第一次变得可见，它的 MenuItems 就不会反映对它们所做的更改以用于下一次可见性。这是代码；

```
private static void addListener(final JPopupMenu popup, final String someLetter)
{
    popup.addPopupMenuListener(new PopupMenuListener(){            
        @Override
        public void popupMenuWillBecomeVisible(PopupMenuEvent evt)
        {
            JMenuItem menuItem3 = (JMenuItem)popup.getComponent(3); 
            String[] letters = {"A", "B", "C", "D"};
            ArrayList<String> lettersList = new ArrayList<String>();
            lettersList.addAll(Arrays.asList(letters));
            if(lettersList.contains(someLetter)){
                menuItem3.setEnabled(true);
            }
            else{
                menuItem3.setEnabled(false);
            }
        }
    });
} 
```

通常，我希望每当弹出时，下面`popupMenuWillBecomeVisible`的行将始终执行。`popupMenu`但令我惊讶的是，它只在第一次工作，随后不测试指定为 enable 或 disable 的条件`menuItem3`。请有好心人帮帮兄弟！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:39:11.987

这对我来说似乎工作得很好。查看下面的示例，该示例显示 5 个菜单项并在每次执行右键单击时切换它们的“启用”：

```
import java.awt.event.ActionEvent;
import java.util.ArrayList;
import java.util.List;

import javax.swing.AbstractAction;
import javax.swing.JFrame;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.PopupMenuEvent;
import javax.swing.event.PopupMenuListener;

public class TestPopupMenu {

    private void initUI() {
        final JFrame frame = new JFrame(TestPopupMenu.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        final JPopupMenu popup = new JPopupMenu();
        final List<JMenuItem> items = new ArrayList<JMenuItem>();
        for (int i = 0; i < 5; i++) {
            JMenuItem item = new JMenuItem(new AbstractAction("Action " + (i + 1)) {

                @Override
                public void actionPerformed(ActionEvent e) {
                    JOptionPane.showMessageDialog(popup, getValue(NAME) + " has been clicked");
                }
            });
            item.setEnabled(i % 2 == 0);
            items.add(item);
            popup.add(item);
        }
        popup.addPopupMenuListener(new PopupMenuListener() {

            @Override
            public void popupMenuWillBecomeVisible(PopupMenuEvent e) {
                for (JMenuItem item : items) {
                    item.setEnabled(!item.isEnabled());
                }
            }

            @Override
            public void popupMenuWillBecomeInvisible(PopupMenuEvent e) {

            }

            @Override
            public void popupMenuCanceled(PopupMenuEvent e) {

            }
        });
        panel.setComponentPopupMenu(popup);
        frame.add(panel);
        frame.setSize(300, 200);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestPopupMenu().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:47:26.987

感谢@mKorbel 推动我在此过程中尝试编写 SSCCE cos，我找到了解决方案。无论如何，这是我的 SSCCE，它可能对其他人有用。谁知道？只需复制并运行即可查看其工作原理。

（注意：代码不是很短，因为我打算在此之后提出次要问题）

```
import java.awt.Dimension;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JMenuItem;
import javax.swing.JPopupMenu;
import java.util.ArrayList;
import java.util.Arrays;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.PopupMenuEvent;
import javax.swing.event.PopupMenuListener;

public class CustomPopup extends JPopupMenu
{
    private JMenuItem menuItem1 = new JMenuItem("One");
    private JMenuItem menuItem2 = new JMenuItem("Two");
    private JMenuItem menuItem3 = new JMenuItem("Three");
    private JMenuItem menuItem4 = new JMenuItem("Four");
    private JMenuItem menuItem5 = new JMenuItem("Five");

    public CustomPopup()
    {
        this.add(menuItem1);
        this.add(menuItem2);
        this.add(menuItem3);
        this.add(menuItem4);
        this.add(menuItem5);
        addListeners(this);
    }

    private  void addListeners(final JPopupMenu popup /*, final String someLetter*/)
    {
        popup.addPopupMenuListener(new PopupMenuListener(){            
            @Override
            public void popupMenuWillBecomeVisible(PopupMenuEvent evt)
            {
                JMenuItem menuItem = (JMenuItem)popup.getComponent(3); 
                String[] letters = {"A", "B", "C", "D"};
                ArrayList<String> lettersList = new ArrayList<String>();
                lettersList.addAll(Arrays.asList(letters));
                String someLetter = getRandomAlphabet();
                if(lettersList.contains(someLetter)){
                    menuItem.setEnabled(true);
                }
                else{
                    menuItem.setEnabled(false);
                }
            }
            @Override
            public void popupMenuWillBecomeInvisible(PopupMenuEvent evt){
                // No Override
            }

            @Override
            public void popupMenuCanceled(PopupMenuEvent evt){
                // No Override
            }
        });
    }

    private  String getRandomAlphabet()
    {
        String alpha = "";
        String Alphas[] = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J"};
        double bigNum = Math.random() * 1000000;
        String str = String.valueOf(bigNum);
        int idx = Integer.valueOf(String.valueOf(str.charAt(str.length() - 1)));
        if(idx < 6)
        {
            alpha = Alphas[idx];
        }
        else
        {
            alpha = Alphas[idx - 5];
        }
        return alpha;
    }

    public static void main(String[] args)
    {
        /*try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }*/

        JPanel panel = new JPanel();
        JPopupMenu popupMenu = new CustomPopup();
        panel.setComponentPopupMenu(popupMenu);
        panel.setLayout(new GridBagLayout());

        /*JButton button = new JButton("Action");
        button.setSize(new Dimension(60, 20));
        button.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e)
            {
                JOptionPane.showMessageDialog(null, "Button was clicked");
            }
        });
        panel.add(button);*/

        JFrame frame = new JFrame("popupTest");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(new Dimension(200, 200));
        frame.add(panel);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

问题：现在这可以满足我的要求（即`menuItem4`根据某些指定计算的随机结果动态启用和禁用`getRandomAlphabet()`），我查看了@Guillaume Polet 的 Lovely 实现并对其进行了测试。`UIManager`非常好......所以我决定添加一个按钮并测试我在使用不是本机 Java 默认值时遇到的最烦人的问题之一......同样的事情发生了！

我是什么意思？当 LnF 不是默认值`Metal`时，在显示 popupMenu 后在任何其他 Actionable 组件上单击 popupMenu 外部在第一次单击时不起作用（这只会将弹出窗口设置为不可见）。然后您必须再次（第二次）单击该组件，然后才能触发其 Action... 很烦人不是吗？

要了解这种情况，只需取消注释`UIManager`上面的代码部分（我从@Guillaume Polet 的漂亮解决方案中获取）并取消注释`Button`我添加的部分，然后运行程序并查看当您尝试单击时会发生什么显示后立即按钮`popupMenu`。有趣的是，在使用 Java 的默认 Metal LnF 时不会出现这个问题

我已经在 Windows 7 上使用系统默认外观解决了这个问题，但无济于事，所以我决定让睡狗撒谎......但老实说，我认为有一个解决这个问题......我知道一定有人对这个东西有破解......代码块，方向，链接，任何解决这个问题的任何地方都会让我感到非常高兴。谢谢好心人！

# keyboard - AutoHotkey：用于修复键盘颤动的键去抖动，但用于按住键

> ID：15417547
> 
> 赞同：1
> 
> 时间：2013-03-14T18:39:09.197
> 
> 标签：keyboard, autohotkey

我的键盘有问题，我在某些键上遇到了非常糟糕的键盘颤动。我设法找到了一个自动热键脚本，它有助于过滤键盘上的按键，但是它实际上所做的是在按住它时重复发送相同的键，当我使用需要键的应用程序时，这给我带来了问题按住某些快捷方式（Maya、XSI 等）

我尝试使用 {blind} 标志修改 SendInput 命令并将 'down' 修饰符添加到 %k_ThisHotkey%，但我永远无法让它正常工作。

（我为第一个 sendinput 添加了一个“down”，并执行了 GetKeyState 以检查键是否被按住，然后做了一个条件，如果键被释放，SendInput up 将执行。但是，这并没有按预期工作，我没有想法。）

有人愿意就我如何让一个适当的去抖动脚本工作，同时还允许按住键给出一些指示吗？

谢谢！

```
; ---- setups
#UseHook On
;Capslock::LShift

; ---- initialize parameters
if (%0% > 0)
    k_TimeThreshold = %1%
else
    k_TimeThreshold = 40
;k_TimeThreshold = 1000  ; for debugging

; ---- initialize variables
k_LastHotkey = 0
k_LastTick := A_TickCount

; ---- Set all keys as hotkeys. See www.asciitable.com
k_ASCII = 33
Loop
{
    Transform, k_char, Chr, %k_ASCII%

    Hotkey, %k_char%, k_KeyPress

        if ((k_char Not In +,^)  AND  (k_ASCII != 123  AND k_ASCII != 125))
    {
        Hotkey, +%k_char%, k_KeyPress       ; shift
        ; Hotkey, ^%k_char%, k_KeyPress     ; control
        ; Hotkey, !%k_char%, k_KeyPress     ; alt
        ; Hotkey, #%k_char%, k_KeyPress     ; win
    }

    if k_ASCII = 64
        k_ASCII = 91
    else if k_ASCII = 126
        break
    else
        k_ASCII++
}
return 

; ---- End of auto-execute section.

; ---- When a key is pressed by the user, send it forward only if it's not a "bounce"
; ---- A "bounce" is defined as: "key is same as last"  AND  "time since last key is very short"
Enter::
Space::
Tab::
Esc::
BS::
Del::
Ins::
Home::
End::
PgUp::
PgDn::
Up::
Down::
Left::
Right::
k_KeyPress:
{
    k_ThisHotkey := A_ThisHotkey        ; grab the current hotkey
    k_ThisTick := A_TickCount       ; grab the current tick
    ElapsedTime := k_ThisTick - k_LastTick  ; time since last hotkey (ticks)

    if (ElapsedTime > k_TimeThreshold  ||  k_ThisHotkey <> k_LastHotkey)
    {
        if k_ThisHotkey In !,#,^,+,{,},Enter,Space,Tab,Esc,BS,Del,Ins,Home,End,PgUp,PgDn,Up,Down,Left,Right
            SendInput {%k_ThisHotkey%}
        else
            SendInput %k_ThisHotkey%
        ;SendInput %ElapsedTime%  ; for debugging
    }

    k_LastHotkey := k_ThisHotkey    ; store the current hotkey for next time
    k_LastTick := k_ThisTick    ; store the current tick for next time
}
return

; ---- other keys that could be filtered (but caused issues on some keyboards)
;LWin::
;RWin::
;LAlt::
;RAlt:: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:16:13.117

这是一个想法。不确定它是否能解决您的问题。让我知道。我可以使用 Shift 来移动字母，弹跳键和普通按键之间有明显的区别。我只用`Shift`,`q`和测试过它`a`。

```
#SingleInstance Force
#installKeybdHook
#Persistent

Shift::
q::
a::
keywait, %A_ThisHotkey%
if (A_PriorHotkey = A_ThisHotkey AND A_TimeSincePriorHotkey < 900)  ; bouncy key
{
    Soundbeep, 500, 200
    Return
}
Soundbeep, 2000, 200
return 
```

# jquery-ui - 使用 jquery UI 1.9+ 重新加载 Ajax 选项卡

> ID：15417549
> 
> 赞同：1
> 
> 时间：2013-03-14T18:39:13.287
> 
> 标签：jquery-ui, jquery

虽然他们有很多关于通过 load 方法重新加载 jQueryUI 选项卡的帖子，但我似乎无法让它在 1.9+ 中工作。我希望我能看到一种在小提琴中展示它的方法，但因为我没有......请注意，刷新按钮/功能每次都在以下嵌套选项卡设置中在 1.8+ 下工作，但**在 1.9 下只能工作一次+**，然后失败。在上下文中，（*在 wordpress 下通过 php 加载动态内容）它***根本**不起作用。根据 ajaxStart()ajaxStop() 函数调用，每次单击刷新按钮时都会进行 ajax 调用，但是内容（在***选项卡 E****或选项卡 A/子****父 E****下查看日期/时间*****) 仅在第一次单击 #refresh 按钮时重新加载，该按钮无法在后续单击时重新加载选项卡内容。****

 ******样式.css**

```
div.clear { clear:both; }
#refresh {  position: relative; top:-40px; left:300px; }
#loading 
{   display:none; 
    position: absolute; 
    top:100px; 
    left:300px; 
    font-size: 200%; 
    z-index:1001; 
    border:3px solid green; 
    background:#ffffff; 
} 
```

**tabs.js**

```
jQuery(function()
{   set_tabs();
    jQuery('body').on("click", "#refresh", function()
    {   jQuery('.tabset ul li a').each(function()
        {   var link = jQuery(this);
            var tab = link.parent();
            var tabset = link.closest('div.tabset');
            if(tabset.is(':visible') && tab.hasClass('ui-state-active')) index = link.text().replace(/ /g, '_');
        });
        jQuery(".tabset").tabs( "load" , index );
    });
    jQuery("#loading").ajaxStart(function() {jQuery(this).show();});
    jQuery("#loading").ajaxStop(function(){ jQuery(this).fadeOut(1500); });
});
function set_tabs()
{   jQuery('.tabset').tabs({ cache:true }); } 
```

**索引.html**

```
 <!--script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
<link type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/themes/smoothness/jquery-ui.css" rel="stylesheet"-->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<link type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/smoothness/jquery-ui.css" rel="stylesheet">
<script type="text/javascript" src="tabs.js"></script>
<link type="text/css" href="style.css" rel="stylesheet" />

<div id="parentTabSet" class="tabset">
    <ul>
        <li><a href="#A">A</a></li>
        <li><a href="#B">B</a></li>
        <li><a href="#C">C</a></li>
        <li><a href="#D">D</a></li>
        <li><a href="tabs_e.html">E</a></li>
    </ul>
    <input type='button' id='refresh' value='refresh' />
    <div id='loading'>Loading...</div>
    <div id="A" class="tabset">
        <ul>
            <li><a href="#A_1">A_1</a></li>
            <li><a href="#A_2">A_2</a></li>
            <li><a href="tabs_e.html">parent E</a></li>
        </ul>
        <div id="A_1"><p>A_1 - FOO</p></div>
        <div id="A_2"><p>A_2 - BAR</p></div>
    </div>
    <div id="B"><p>Div B</p></div>
    <div id="C"><p>Div C</p></div>
    <div id="D"><p>Div D</p></div>
</div> 
```

**tabs_e.html**

```
<script>
jQuery( function()
{   set_tabs();
    var d = new Date();
    jQuery('#E_1 p').text(d);
    jQuery('#E_2 p').text(d);
});
</script>
<div class="tabset">
    <ul>
        <li><a href="#E_1">E_1</a></li>
        <li><a href="#E_2">E_2</a></li>
    </ul>
    <div id="E_1"><p>E_1 - BAR</p></div>
    <div id="E_2" class='clear'><p>E_2 - BAZ</p></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:56:20.457

所以事实证明，不仅[缓存选项](http://jqueryui.com/upgrade-guide/1.9/#deprecated-ajaxoptions-and-cache-options-added-beforeload-event)在 1.9+ 中被弃用，它的遗留行为也被改变了，因此（如果使用）加载方法不会重新加载选项卡内容。我想出的方法是——我认为——一种可憎的东西，我希望有人可以提供一个更清洁的替代方案。（哦，pleeeaazzz！）无论如何，FWIW ......这就是我想出的。

**tabs.js**（重新访问）

```
jQuery(function()
{   set_tabs();
    jQuery(document).on("click", "#refresh", function()
    {   refresh = {};
        refresh.tab = true;
        jQuery('.tabset ul li a').each(function()
        {   var link = jQuery(this);
            var tab = link.parent();
            var tabset = link.closest('div.tabset');
            if(tabset.is(':visible') && tab.hasClass('ui-state-active')) index = link.text().replace(/ /g, '_');

        });
        jQuery(".tabset").tabs( "load" , index );
    });
    jQuery("#loading").ajaxStart(function() {jQuery(this).show();});
    jQuery("#loading").ajaxStop(function(){ jQuery(this).fadeOut(1500); });
});
function set_tabs()
{   jQuery('.tabset').tabs(
    {   beforeLoad: function( event, ui)
        {   if(typeof refresh.tab =='undefined')
            {   if ( ui.tab.data( "loaded" ))
                { event.preventDefault();
                    return;
                }
                ui.jqXHR.success(function() {   ui.tab.data( "loaded", true );});
            }   else refresh={};
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:42:51.750

该`.live()`功能已经被弃用了一段时间，并且在 jQuery 1.9+ 中完全没有支持。用这个：

```
$(document).on("click", "#refresh", function() {
      // your current "live" code
}); 
```****

# javascript - Django模板中动态生成表单的Javascript验证

> ID：15417554
> 
> 赞同：1
> 
> 时间：2013-03-14T18:39:33.877
> 
> 标签：javascript, django, django-forms

我正在为可能非常基本的事情而苦苦挣扎：我需要为我的大学数据库应用程序生成一个带有标记的表单。每个模块中的每个学生都有一个班级，其中存储了该模块的所有分数。有不同的评估，性能类计算它们的平均值。

例如，我需要能够输入第一次评估的所有分数，并且我使用动态生成的 Django 表单作为模板中的表格来做到这一点：

```
{% for performance in performances %}
    <tr>
        <td>
            {{ performance.student }}
        </td>
        <td>
            {% if to_mark == 1 %} 
                <input type="text" class="input-mini" name="{{ student.student_id }}" value="{{ performance.assessment_1 }}">
            {% else %}
                {{ performance.assessment_1 }}
            {% endif %}
        </td>

       And the same for the other assessments (to_mark gets passed on by views.py to indicate which assessments needs to be marked here) 
```

我没有使用 Inlineformfields，因此决定动态生成一个表单并使用 Javascript 对其进行验证，也是因为验证很简单（必须是 1 到 100 之间的数字），还因为我想使用 Javascript 来计算平均值在飞行中。

我的问题是我对Javascript一无所知。所有的教程（比如这个[http://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)）都在 Javascript 函数中使用表单字段的名称，但在我的例子中，这个名称是动态生成的，所以我可以访问在views.py中很容易：

```
if student.student_id in request.POST:
    tmp = request.POST[student.student_id]
    try:
        mark = int(tmp)
        if mark in range(0, 100):
        performance = Performance.objects.get(student=student, module=module)
        if to_change == 1:
            performance.assessment_1 = mark
       ...and so on for the other assessments
    except ValueError:
        pass (in case someone accidentally enters a letter and not a number) 
```

有没有办法可以使用 Javascript 来处理我的表单字段？或者我应该使用不同于以 student_id 作为名称来读出它的方法吗？我怎么能那样做？

谢谢，托比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:13:55.390

至少有 3 种方法可以使用 JavaScript 访问表单字段：

按 ID、按 CSS 类或按 DOM 遍历。如果您不熟悉 JavaScript，我建议您找到一个对 django 友好的客户端表单验证器，例如：[https ://code.google.com/p/django-ajax-forms/](https://code.google.com/p/django-ajax-forms/)

# imageresizer - ImageResizer 不适用于虚拟目录

> ID：15417558
> 
> 赞同：0
> 
> 时间：2013-03-14T18:39:42.000
> 
> 标签：imageresizer

我在我网站的其他区域成功使用 ImageResizer，其中图像是从应用程序中的文件夹提供的（.jpg?width=100 和 .jpg.ashx?width=100 都有效），但是当我尝试来自位于本地计算机上的虚拟目录，如果我使用“jpg.ashx?width=100”方法指定图像页面，我只能调整大小才能工作。

该站点的应用程序池正在使用 NetworkService 身份，并且虚拟文件夹已启用直通身份验证。我也授予了虚拟文件夹上 NetworkService 的修改权限，希望这会有所帮助。

我在经典模式下使用 IIS 7.5，并且调整大小诊断页面没有显示任何问题。

有没有人知道为什么会发生这种情况？任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:54:52.650

经典模式需要`.ashx`语法，因为 ASP.NET 看不到静态文件请求。

如果您在同一主机上的同一站点中看到不同的行为，那么您的虚拟文件夹可能*不是*虚拟文件夹，它可能是一个子应用程序。

# python - 在 Python 中对字符串进行分区

> ID：15417562
> 
> 赞同：1
> 
> 时间：2013-03-14T18:39:56.353
> 
> 标签：python, string, set

我有一个格式为：

```
name = '>n263590 | AK138667 | mRNAlike lncRNA |' 
```

所以当我想对它进行分区时，我使用了字符串：

```
name = name.partition(' |')[0] 
```

* * *

我尝试对格式中的字符串使用相同的概念：

```
name2 = '>mm10_refGene_NM_147038 range=chr1:92479681-92480629' 
```

我只想要以“NM”开头的区域，直到数字结尾

```
#i want the output to be name2 = 'NM_147038' 
```

所以我尝试了

```
name2 = name2.partition('NM','range')|[0] 
```

但它没有用

我想我知道一种使用正则表达式的方法，但它的内存效率不是很高。无论如何我可以使用分区工具来执行这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:40:47.117

使用`split()`，这是完成这项工作的一种简单方法。例如：

```
'NM' + name2.split('NM')[1]
=> 'NM_147038 range=chr1:92479681-92480629' 
```

或者，如果只有一个分隔符，您可以使用该`index`函数创建一个新的字符串切片：

```
name2[name2.index('NM'):]
=> 'NM_147038 range=chr1:92479681-92480629' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:42:55.103

使用正则表达式：

```
import re

re.findall(r'(NM_\d*)', name2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T19:18:47.883

```
import re

m = re.search(r"(NM_\d+)\s+range", name2)
if m:
   print(m.group(1)) 
```

# c - 用 struct 覆盖 char 数组

> ID：15417563
> 
> 赞同：-1
> 
> 时间：2013-03-14T18:39:57.353
> 
> 标签：c

我是第一次在 C 语言中使用结构，我不想承认我认为我不太了解它。我正在尝试构建一个指向学生结构的指针数组，以创建一个完整的学生数据库。问题是，如果我创建了一个以上的学生，第一个学生的姓名和课程会被第二个学生覆盖。此外，仅 name 的输出真的很奇怪。如果我给“莎拉”这个名字，我会得到“莎拉？LG？？fa？e”但是课程出来的很好。我觉得我的内存分配可能有问题？我们也只是倾向于这一点，我也不是 100% 理解它。

这是我现在正在处理的代码部分：

```
typedef struct student Student;

struct student 
{
    char *name;
    int age;
    char *course1;
    char *course2;
};

Student *Data[30];
int count = 0;

void new()
{
    int age;
    char name [300];
    char course1 [300];
    char course2 [300];
    char together[300];
    char remarks[300];

    printf("name: ");
    scanf("%s", name);

    printf("age: ");
    scanf("%d", &age);

    printf("course-1: ");
    scanf("%s", course1);

    printf("course-2: ");   
    scanf("%s", course2);

    Data[count] = malloc(sizeof(Student));
    Data[count]->name = name;
    Data[count]->age = age;
    Data[count]->course1 = course1;
    Data[count]->course2 = course2;
    count++;

}

void display()
{

    int i;
    for(i=0; i<count; i++)
    {
        printf("name:\t%s\n", Data[i]->name);
        printf("age:\t%d\n", Data[i]->age);
        printf("course1:\t%s\n", Data[i]->course1);
        printf("course2:\t%s\n", Data[i]->course2);
    }

} 
```

谢谢大家的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:48:38.040

哦，您没有在任何地方为个人分配内存`Student`。如果字段的大小已知，则可以将存储声明为结构的一部分：

```
struct student 
{
   char name[300];
   int age;
   char course1[300];
   char course2[300];
}; 
```

然后按如下方式填充它：

```
Data[count] = malloc(sizeof(Student));
strncpy(Data[count]->name, name, sizeof(Data[count]->name));
Data[count]->age = age;
strncpy(Data[count]->course1, course1, sizeof(Data[count]->course1));
strncpy(Data[count]->course2, course2, sizeof(Data[count]->course2)); 
```

如果你想使用动态内存分配，那么结构应该是现在的样子，但是分配会改变：

```
Data[count] = malloc(sizeof(Student));
Data[count]->name = strdup(name);
Data[count]->age = age;
Data[count]->course1 = strdup(course1);
Data[count]->course2 = strdup(course2);

.... 
```

当你解除分配时，不要忘记字段：

```
free(Data[count]->name);
free(Data[count]->course1);
free(Data[count]->course2);
free(Data[count]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:43:52.543

您只是将引用（指针）复制到数据，这意味着您的旧数据会丢失。你需要复印

```
Data[count]->name = (char*)malloc(...);
strcpy(Data[count]->name,name); 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:50:11.817

那是......不是处理结构中的指针的正常方法。您正在将结构中的指针设置为本地静态分配的数组。您想要做的是`malloc()`为每个数组的结构成员提供内存，例如：

```
void new()
{

    printf("name: ");
    Data[count]->name = malloc(300);
    scanf("%299s", Data[count]->name); 
```

但是，当您完成代码后，您现在必须为所有结构的元素以及结构本身释放内存。

* * *

现在，如果您想变得更高级一些，*并且*`gcc`仅使用`%a`or`%m`修饰符（取决于标准）进行编译，则可以跳过 malloc：

```
 printf("name: ");
    scanf("%m", Data[count]->name); 
```

但是，当然，您仍然必须自己释放它。

# jquery - 如何在做混蛋的圆圈中旋转图像？

> ID：15417566
> 
> 赞同：0
> 
> 时间：2013-03-14T18:39:59.307
> 
> 标签：jquery, css, animation

我需要制作一个动画，类似于下一个网站的“*让人们快乐*”部分中的动画：

[https://layervault.com/](https://layervault.com/)

但是，我需要做一个简单的圆圈，而不是制作一个八的形式。它是使用 CSS3 制作的，但我也可以使用 jQuery 来完成（如果我得到想要的结果，我不介意这种技术）。

我发现这段代码在 jQuery 中产生了类似的效果：

```
var t = 0;

function moveit() {
t += 0.05;

var r = 100;
var xcenter = 100;
var ycenter = 100;
var newLeft = Math.floor(xcenter + (r * Math.cos(t)));
var newTop = Math.floor(ycenter + (r * Math.sin(t)));

$('.rotate').animate({
    top: newTop,
    left: newLeft,
}, 1, function() {
    moveit();
});
}

$(document).ready(function() {
    moveit();
}); 
```

在 jsfiddle 中查看：http: [//jsfiddle.net/W69s6/810/](http://jsfiddle.net/W69s6/810/)

但正如您将看到的，这个例子正在做连续循环，我想移动图像做混蛋。我的意思是，每秒停止和启动。

此外，我还会同时旋转更多图像，例如本文开头 layervault.com 提供的示例。

你能给我一些建议或例子来获得这种特殊的效果吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:16:31.990

在他们的网站上，他们使用 CSS3 动画（带有每个适当的供应商前缀）。我使用 Chrome 的 Web 控制台来选择其中一个动画元素。你会看到他们`animation name`有财产。

该名称对应`@keyframes`于他们的 CSS 文件中的指令（您也需要供应商前缀）。

[这里](https://developer.mozilla.org/en-US/docs/CSS/@keyframes)和[这里](http://coding.smashingmagazine.com/2011/05/17/an-introduction-to-css3-keyframe-animations/)有一些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:07:26.617

您可以尝试添加延迟以获得所需的效果

```
$('.rotate').delay(1000).animate({
    //rest of code
}.... 
```

# python - 将大型 DataFrame 输出到 CSV 文件的最快方法是什么？

> ID：15417574
> 
> 赞同：32
> 
> 时间：2013-03-14T18:40:11.043
> 
> 标签：python, performance, pandas, output

对于 python / pandas，我发现 df.to_csv(fname) 以每分钟约 100 万行的速度工作。我有时可以将性能提高 7 倍，如下所示：

```
def df2csv(df,fname,myformats=[],sep=','):
  """
    # function is faster than to_csv
    # 7 times faster for numbers if formats are specified, 
    # 2 times faster for strings.
    # Note - be careful. It doesn't add quotes and doesn't check
    # for quotes or separators inside elements
    # We've seen output time going down from 45 min to 6 min 
    # on a simple numeric 4-col dataframe with 45 million rows.
  """
  if len(df.columns) <= 0:
    return
  Nd = len(df.columns)
  Nd_1 = Nd - 1
  formats = myformats[:] # take a copy to modify it
  Nf = len(formats)
  # make sure we have formats for all columns
  if Nf < Nd:
    for ii in range(Nf,Nd):
      coltype = df[df.columns[ii]].dtype
      ff = '%s'
      if coltype == np.int64:
        ff = '%d'
      elif coltype == np.float64:
        ff = '%f'
      formats.append(ff)
  fh=open(fname,'w')
  fh.write(','.join(df.columns) + '\n')
  for row in df.itertuples(index=False):
    ss = ''
    for ii in xrange(Nd):
      ss += formats[ii] % row[ii]
      if ii < Nd_1:
        ss += sep
    fh.write(ss+'\n')
  fh.close()

aa=DataFrame({'A':range(1000000)})
aa['B'] = aa.A + 1.0
aa['C'] = aa.A + 2.0
aa['D'] = aa.A + 3.0

timeit -r1 -n1 aa.to_csv('junk1')    # 52.9 sec
timeit -r1 -n1 df2csv(aa,'junk3',myformats=['%d','%.1f','%.1f','%.1f']) #  7.5 sec 
```

注意：性能的提高取决于 dtypes。但是（至少在我的测试中）to_csv() 的执行速度总是比未优化的 python 慢得多。

如果我有一个 4500 万行的 csv 文件，那么：

```
aa = read_csv(infile)  #  1.5 min
aa.to_csv(outfile)     # 45 min
df2csv(aa,...)         # ~6 min 
```

问题：

```
What are the ways to make the output even faster?
What's wrong with to_csv() ? Why is it soooo slow ? 
```

注意：我的测试是在 Linux 服务器的本地驱动器上使用 pandas 0.9.1 完成的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T16:38:18.400

列弗。Pandas 已重写`to_csv`以大幅提高本机速度。该过程现在是 i/o 绑定的，解决了许多微妙的 dtype 问题和引用案例。这是我们与 0.10.1（即将发布的 0.11）版本相比的性能结果。这些都在`ms`，比例越低越好。

```
Results:
                                            t_head  t_baseline      ratio
name                                                                     
frame_to_csv2 (100k) rows                 190.5260   2244.4260     0.0849
write_csv_standard  (10k rows)             38.1940    234.2570     0.1630
frame_to_csv_mixed  (10k rows, mixed)     369.0670   1123.0412     0.3286
frame_to_csv (3k rows, wide)              112.2720    226.7549     0.4951 
```

因此，单个 dtype（例如浮点数）的吞吐量不太宽，约为 20M 行/分钟，这是您上面的示例。

```
In [12]: df = pd.DataFrame({'A' : np.array(np.arange(45000000),dtype='float64')}) 
In [13]: df['B'] = df['A'] + 1.0   
In [14]: df['C'] = df['A'] + 2.0
In [15]: df['D'] = df['A'] + 2.0
In [16]: %timeit -n 1 -r 1 df.to_csv('test.csv')
1 loops, best of 1: 119 s per loop 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-02-10T15:19:56.913

在 2019 年，对于这样的情况，最好只使用 numpy。看时间：

```
aa.to_csv('pandas_to_csv', index=False)
# 6.47 s

df2csv(aa,'code_from_question', myformats=['%d','%.1f','%.1f','%.1f'])
# 4.59 s

from numpy import savetxt

savetxt(
    'numpy_savetxt', aa.values, fmt='%d,%.1f,%.1f,%.1f',
    header=','.join(aa.columns), comments=''
)
# 3.5 s 
```

因此，您可以使用 numpy 将时间缩短两倍。当然，这是以降低灵活性为代价的（与 相比`aa.to_csv`）。

以 Python 3.7、pandas 0.23.4、numpy 1.15.2 为基准（`xrange`被替换`range`为使问题中的已发布函数在 Python 3 中工作）。

PS。如果您需要包含索引，`savetxt`则可以正常工作 - 只需传递`df.reset_index().values`并相应地调整格式化字符串。

2021 年更新：正如评论中指出的，pandas 的性能有了很大提高。`savetxt`仍然是最快的选择，但差距很小：以`pandas`1.3.0 和`numpy`1.20.3 为基准时，`aa.to_csv()`耗时 2.64 秒，而`savetxt`2.53 秒。问题 ( `df2csv`) 中的代码花费了 2.98 秒，使其成为当今最慢的选项。

您的里程可能会有所不同 - 2021 年的测试是在具有非常快 CPU 的 SSD 上执行的，而在 2019 年我使用的是 HDD 和较慢的 CPU。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-13T11:59:25.910

使用块大小。我发现这有很大的不同。如果您手头有内存，请使用好的块大小（行数）进入内存，然后写入一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T10:25:08.880

您的`df_to_csv`功能非常好，除了它做了很多假设并且不适用于一般情况。

如果它对您有用，那很好，但请注意，它不是通用解决方案。CSV 可以包含逗号，那么如果要写入这个元组会发生什么？`('a,b','c')`

python`csv`模块将引用该值，以免出现混淆，并且如果任何值中存在引号，则会转义引号。当然，生成适用于所有情况的东西要慢得多。但我想你只有一堆数字。

你可以试试这个，看看它是否更快：

```
#data is a tuple containing tuples

for row in data:
    for col in xrange(len(row)):
        f.write('%d' % row[col])
        if col < len(row)-1:
            f.write(',')
    f.write('\n') 
```

我不知道这样会不会更快。如果不是，那是因为完成了太多系统调用，所以您可能会使用`StringIO`而不是直接输出，然后每隔一段时间将其转储到真实文件中。

# java - Class.newInstance() 方法怎么用？

> ID：15417575
> 
> 赞同：0
> 
> 时间：2013-03-14T18:40:12.203
> 
> 标签：java, class, abstract-class

我创建了一个抽象类，如下所示：

```
abstract class Chance
{

   public void setTeams(SportEvent aSportEvent)
   {
      firstTeam = aSportEvent.getFirstTeam();
      secondTeam = aSportEvent.getSecondTeam();
   }

   private int totalPlayedGames()
   {
      int playedAtHome = firstTeam.getHomePlayedGames();
      int playedAway = secondTeam.getAwayPlayedGames();
      int playedGames = playedAtHome + playedAway; 
      return playedGames;
   }

   private int totalScoredGoals()
   {
      int homeScoredGoals = firstTeam.getHomeScoredGoals();
      int awayScoredGoals = secondTeam.getAwayScoredGoals();
      int scoredGoals = homeScoredGoals + awayScoredGoals; 
      return scoredGoals;
   }

   abstract double getChance()

   Team firstTeam;
   Team secondTeam; 
} 
```

然后，当然，我有几个类的方法`getChance()`......

现在，我想创建一个类，我可以在其中获得`getChance()`这些新类的结果。我想使用类似的东西：

```
Class aClass = Class.forName(chanceClass....);
Object obj = aClass.newInstance(); 
```

现在我想使用'getChance（）'方法。

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:41:27.380

您可以简单地转换它：

```
Chance obj = (Chance) aClass.newInstance();
double d = obj.getChance(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T18:45:46.260

没有铸造：

```
Class<? extends Chance> aClass = Class.forName(chanceClass....).asSubclass(Chance.class); 
Chance obj = aClass.newInstance();
double d = obj.getChance(); 
```

# java - 在 OpenGL ES 中旋转以放置对象然后旋转世界

> ID：15417578
> 
> 赞同：-1
> 
> 时间：2013-03-14T18:40:20.287
> 
> 标签：java, android, opengl-es, augmented-reality

我正在为 android 开发一个增强现实应用程序，并尝试使用 openGl 将立方体放置在世界各地。我当前的方法可以在下面的代码中看到：

```
 for(Marker ma: ARData.getMarkerlist().values()) {

        Log.d("populating", "");
        gl.glPushMatrix();

        Location maLoc = new Location("loc");
        maLoc.setLatitude(ma.lat);
        maLoc.setLongitude(ma.lng);
        maLoc.setAltitude(ma.alt);

        float distance = currentLoc.distanceTo(maLoc);
        float bearing = currentLoc.bearingTo(maLoc);
        Log.d("distance", String.valueOf(distance));
        Log.d("bearing", String.valueOf(bearing));
        gl.glRotatef(bearing,0,0,1);
        gl.glTranslatef(0,0,-distance);
        ma.cube.draw(gl);          

        gl.glPopMatrix();
    }

    gl.glRotatef(y, 0, 1, 0);
    gl.glRotatef(x, 1, 0, 0);` 
```

其中 y 是偏航角，x 是俯仰角。目前，我在屏幕上以 45 度角在远处某个地方看到了一个立方体。看起来我得到了合理的方位和距离值。这可能与手机方向有关吗？如果您需要更多代码，请告诉我。

**编辑：**我将轴承旋转更新为`gl.glRotatef(bearing,0,1,0);`我现在正在将我的立方体沿屏幕水平映射到不同深度。使用航向和俯仰仍然没有移动，但@Mirkules 已经确定了一些可能的原因。

**编辑 2：**我现在尝试通过将矩阵旋转到标记的航向和方位之间的角度差来放置立方体。然而，我得到的只是一种抖动，立方体似乎被渲染在一个新位置，然后又跳回到旧位置。代码同上，但以下内容除外：

```
 float angleDiff = bearing - y;
        gl.glRotatef((angleDiff),0,1,0);
        gl.glTranslatef(0,0,-distance); 
```

*轴承*和*y*都归一化为 0 - 360 范围。此外，我将“相机旋转”移动到设置标记的代码上方。

**编辑 3：**我现在正在使用`float angleDiff = (bearing + y)/2;`. 但是，我似乎无法让音高工作。我曾尝试使用`gl.glRotatef(-x,1,0,0);`，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:22:19.873

很难准确地说出您要在这里做什么，但有一些事情会作为潜在问题突出。

首先，您的最后两次轮换似乎实际上并不适用于任何事情。如果这些应该代表世界或相机的运动（几乎等同于同一件事），那么它们需要在绘制任何东西*之前发生。*

那么您的轮换本身可能不会完全按照您的意图进行。

您的立方体围绕 Z 轴旋转。GL 中通常的约定是让相机向下看 Z 轴，而 Y 轴被认为是“向上”。您可以根据自己的喜好自然地解释轴，但围绕“Z”的旋转通常不是“轴承”，而是“滚动”。“轴承”对我来说类似于“偏航”。

当您沿 Z 轴平移时，我假设您正在尝试通过旋转和平移来定位对象，但显然如果旋转与您平移时围绕同一轴，它实际上不会改变立方体的位置 - 它将始终直接在相机前面，绕其轴旋转。

我不太清楚为什么你要像这样定位立方体，而看起来你从一个更具体的位置开始。您可能可以直接构建一个更合适的矩阵。

最后，您的相机/世界旋转是围绕 Y 和 X 的两个串联旋转。您称它们为俯仰和滚动，但通常使用欧拉角进行相机旋转不会产生直观的结果，其中俯仰和滚动等术语完全有意义。通常保持一个方向并对其应用单独的旋转以对其进行更新，而不是尝试更新几个相关的旋转。

所以是的，我希望这段代码在没有其他矩阵运算的情况下，可能会导致直接绘制一个或多个立方体，这些立方体只是围绕视图方向旋转了某个角度。

# iphone - 使用 ASIFormDataRequest 上传视频帧？

> ID：15417579
> 
> 赞同：0
> 
> 时间：2013-03-14T18:40:27.533
> 
> 标签：iphone, ios, objective-c, asihttprequest

是否可以使用 ASIFormDataRequest 上传捕获视频的帧？

我有代码：

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        frameCount = 0;
        [myQueue cancelAllOperations];
        [myQueue setDelegate:self];
        NSString *urlString = @"url";
        NSURL *url = [NSURL URLWithString:urlString];
        request = [ASIFormDataRequest requestWithURL:url];

        objReturner = [[ReturnerClass alloc] init];
        NSError *deviceError;
        AVCaptureDevice *cameraDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
        AVCaptureDeviceInput *inputDevice = [AVCaptureDeviceInput deviceInputWithDevice:cameraDevice error:&deviceError];

        // make output device
        AVCaptureVideoDataOutput *outputDevice = [[AVCaptureVideoDataOutput alloc] init];
        outputDevice.videoSettings = [NSDictionary dictionaryWithObject: [NSNumber numberWithInt:kCVPixelFormatType_32BGRA] forKey: (id)kCVPixelBufferPixelFormatTypeKey];
        [outputDevice setSampleBufferDelegate:self queue:dispatch_get_main_queue()];

        // initialize capture session
        self.captureSession = [[AVCaptureSession alloc] init];
        [self.captureSession addInput:inputDevice];
        [self.captureSession addOutput:outputDevice];

        // make preview layer and add so that camera's view is displayed on screen
        AVCaptureVideoPreviewLayer *previewLayer = [AVCaptureVideoPreviewLayer layerWithSession:self.captureSession];
        previewLayer.frame = self.previewLayer.bounds;
        [self.previewLayer.layer addSublayer:previewLayer];
        [self.captureSession startRunning];

    }

-(void) captureOutput:(AVCaptureOutput*)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection*)connection
    {
        //[connection setVideoMinFrameDuration:CMTimeMake(1, 30)];
        /*We create an autorelease pool because as we are not in the main_queue our code is
         not executed in the main thread. So we have to create an autorelease pool for the thread we are in*/

        CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
        /*Lock the image buffer*/
        CVPixelBufferLockBaseAddress(imageBuffer,0);
        /*Get information about the image*/
        uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer);
        size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
        size_t width = CVPixelBufferGetWidth(imageBuffer);
        size_t height = CVPixelBufferGetHeight(imageBuffer);

        /*Create a CGImageRef from the CVImageBufferRef*/
        CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
        CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
        CGImageRef newImage = CGBitmapContextCreateImage(newContext);

        /*We release some components*/
        CGContextRelease(newContext);
        CGColorSpaceRelease(colorSpace);

        /*We display the result on the custom layer. All the display stuff must be done in the main thread because
         UIKit is no thread safe, and as we are not in the main thread (remember we didn't use the main_queue)
         we use performSelectorOnMainThread to call our CALayer and tell it to display the CGImage.*/
        //[self.customLayer performSelectorOnMainThread:@selector(setContents:) withObject: (id) newImage waitUntilDone:YES];

        /*We display the result on the image view (We need to change the orientation of the image so that the video is displayed correctly).
         Same thing as for the CALayer we are not in the main thread so ...*/
        UIImage *image= [UIImage imageWithCGImage:newImage scale:1.0 orientation:UIImageOrientationRight];

        /*We relase the CGImageRef*/
        CGImageRelease(newImage);

        //[self.imageView performSelectorOnMainThread:@selector(setImage:) withObject:image waitUntilDone:YES];

        NSData *imageData = UIImageJPEGRepresentation(image,0.1);     //change Image to NSData

        [self sendFrameToServer:imageData];
        /*We unlock the  image buffer*/
        CVPixelBufferUnlockBaseAddress(imageBuffer,0);

    }

-(void)sendFrameToServer:(NSData *)imageData{
        [request setData:imageData withFileName:[NSString stringWithFormat:@"%i_%@.png",frameCount,[objReturner returnTimeStamp]] andContentType:@"image/png" forKey:@"imagetoupload"];
        [request startSynchronous];
        [myQueue addOperation:request];
        NSLog(@"Value: %@",[request responseString]);
        frameCount++;
    } 
```

我在 .h 中声明 myQueue 和请求对象

我在这里遇到的问题是 NSLog 响应总是显示发送到服务器的第一张图像，它永远不会改变，例如“值：文件 0_2013-03-14 19:27:34.png 已上传”保持不变这一直是，而 frameCount 正在增加并且日期秒数甚至没有上升。

有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:02:32.977

一旦尝试使用委托方法，例如，

```
-(void)sendFrameToserver:(NSData *)imageData {

    NSURL *url = [NSURL URLWithString:@"YOUR_URL_TO_POST"];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setUseKeychainPersistence:YES];
    [request setData:imageData withFileName:[NSString stringWithFormat:@"%i_%@.png",frameCount,[objReturner returnTimeStamp]] andContentType:@"image/png" forKey:@"imagetoupload"];
    [request setDelegate:self];
    [request setDidFinishSelector:@selector(uploadRequestFinished:)];
    [request setDidFailSelector:@selector(uploadRequestFailed:)];
    [request startAsynchronous];

   } 
```

现在编写您的委托方法，

```
- (void)uploadRequestFinished:(ASIHTTPRequest *)request{    

     NSString *responseString = [request responseString];
     NSLog( @"response--%@",responseString );

   }
 - (void)uploadRequestFailed:(ASIHTTPRequest *)request{

    NSLog(@" Error - Statistics file upload failed: \"%@\"",[[request error] localizedDescription]);

   } 
```

希望对你有帮助......

# javascript - 模板呈现正常，但随后被清除

> ID：15417581
> 
> 赞同：0
> 
> 时间：2013-03-14T18:40:29.473
> 
> 标签：javascript, meteor

我在摆弄 Meteor 并遇到了一些奇怪的行为。我的模板已渲染，但渲染后立即再次清除。

我的模板文件；/client/game.html

```
<head>
  <title>test</title>
</head>

<body>
    <h1>test h1</h1>
    {{> board}}
</body>

<template name="board">
  <table class="gameboard">
    {{#each model}}
      {{>row}}
    {{/each}}
  </table>
</template>

<template name="row">
  <tr>
    {{#each this}}
      {{>cell this}}
    {{/each}}
  </tr>
</template>

<template name="cell">
  <td>
    {{answer this}}
  </td>
</template> 
```

客户档案；/client/client.js

```
Meteor.startup(function () {
    Meteor.call('generateBoard');
});

Template.cell.answer = function (cell) {
    console.log(cell.question.answer);
    return cell.question.answer;
}

Template.board.model = function () {
    //var game = Games.findOne(Session.get("selected"));
    var game = Games.findOne(Session.get("selected"));
    if(game) {
        console.log(game);
        return game.board;
    }
} 
```

和我的模型文件 /model.js

```
Games = new Meteor.Collection("games");
Meteor.methods({    
    generateBoard: function(){

        var boardSize = 64;

        var rowSize = cellSize = Math.sqrt(boardSize);
        var board = [];
        var row = [];

        for(var rows = 0; rows < rowSize; rows++) {
            for (var cells = 0; cells < cellSize; cells++) {
                var cell = {
                    question: Meteor.call("generateAnswer"),
                    state: 0,
                    player: null
                }
                row.push(cell);
            }
            board.push(row);
            row = [];
        }
        var gameId = Games.insert({
            board: board
        });
        Session.set("selected", gameId);
    },

    generateAnswer: function(){
        var lowerNumber = 2;
        var higherNumber = 8;

        var firstNumber = Math.round( Math.random() * (higherNumber - lowerNumber) ) + lowerNumber;
        var secondNumber = Math.round(Math.random() * (higherNumber - lowerNumber) ) + lowerNumber;
        return {
            firstNumber: firstNumber,
            secondNumber: secondNumber,
            answer: firstNumber * secondNumber
        };
    }
}); 
```

为什么我会得到这种行为？我做了什么奇怪的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T15:10:54.617

你不应该在 Meteor.isClient-check 之外使用 Session.set

# c++ - C++ AMP 在硬件上崩溃 (GeForce GTX 660)

> ID：15417583
> 
> 赞同：3
> 
> 时间：2013-03-14T18:40:32.983
> 
> 标签：c++, visual-c++, c++11, c++-amp

我在编写一些 C++ AMP 代码时遇到问题。我已经包含了一个样本。它在模拟加速器上运行良好，但在我的硬件（Windows 7、NVIDIA GeForce GTX 660、最新驱动程序）上崩溃了显示驱动程序，但我看不出我的代码有任何问题。

我的代码有问题还是硬件/驱动程序/编译器问题？

```
#include "stdafx.h"

#include <vector>
#include <iostream>
#include <amp.h>

int _tmain(int argc, _TCHAR* argv[])
{
    // Prints "NVIDIA GeForce GTX 660"
    concurrency::accelerator_view target_view = concurrency::accelerator().create_view();
    std::wcout << target_view.accelerator.description << std::endl;

    // lower numbers do not cause the issue
    const int x = 2000;
    const int y = 30000;

    // 1d array for storing result
    std::vector<unsigned int> resultVector(y);
    Concurrency::array_view<unsigned int, 1> resultsArrayView(resultVector.size(), resultVector);

    // 2d array for data for processing 
    std::vector<unsigned int> dataVector(x * y);
    concurrency::array_view<unsigned int, 2> dataArrayView(y, x, dataVector);
    parallel_for_each(
        // Define the compute domain, which is the set of threads that are created.
        resultsArrayView.extent,
        // Define the code to run on each thread on the accelerator.
        [=](concurrency::index<1> idx) restrict(amp)
    {
        concurrency::array_view<unsigned int, 1> buffer = dataArrayView[idx[0]];
        unsigned int bufferSize = buffer.get_extent().size();

        // needs both loops to cause crash
        for (unsigned int outer = 0; outer < bufferSize; outer++)
        {
            for (unsigned int i = 0; i < bufferSize; i++)
            {
                // works without this line, also if I change to buffer[0] it works?
                dataArrayView[idx[0]][0] = 0;
            }
        }
        // works without this line
        resultsArrayView[0] = 0;
    });

    std::cout << "chash on next line" << std::endl; 
    resultsArrayView.synchronize();
    std::cout << "will never reach me" << std::endl; 

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T21:39:20.920

您的计算很可能超过了允许的量子时间（默认为 2 秒）。在那之后，操作系统进入并强制重启 GPU，这称为[超时检测和恢复 (TDR)](http://msdn.microsoft.com/en-us/windows/hardware/gg487368)。软件适配器（参考设备）没有启用 TDR，这就是计算可能超过允许的量子时间的原因。

您的计算是否真的需要 3000 个线程（变量 x），每个线程执行 2000 * 3000 (x * y) 循环迭代？您可以对计算进行分块，这样每个块的计算时间不到 2 秒。您还可以考虑禁用 TDR 或超过允许的量程时间以满足您的需要。

我强烈建议阅读有关如何在 C++ AMP 中处理 TDR 的博客文章，其中详细解释了 TDR：http: [//blogs.msdn.com/b/nativeconcurrency/archive/2012/03/07/handling-tdrs-in- c-amp.aspx](http://blogs.msdn.com/b/nativeconcurrency/archive/2012/03/07/handling-tdrs-in-c-amp.aspx)

此外，这里是关于如何在 Windows 8 上禁用 TDR 的单独博客文章：http: [//blogs.msdn.com/b/nativeconcurrency/archive/2012/03/06/disabling-tdr-on-windows-8- for-your-c-amp-algorithms.aspx](http://blogs.msdn.com/b/nativeconcurrency/archive/2012/03/06/disabling-tdr-on-windows-8-for-your-c-amp-algorithms.aspx)

# python - Python matlplotlib 为文本添加超链接

> ID：15417586
> 
> 赞同：8
> 
> 时间：2013-03-14T18:40:41.283
> 
> 标签：python, hyperlink, matplotlib

我使用 matplotlib 在 Python 中创建了一个绘图。在注释每一行之后，我想让标签成为超链接（或者，让行本身成为超链接）。文本项有一个名为“url”的属性，但我已经尝试过了，但我不知道它是做什么的，如果有的话。

是否可以将文本或线条对象变成超链接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:43:32.907

[此示例](http://matplotlib.org/examples/pylab_examples/hyperlinks.html)说明在输出 SVG 时如何设置超链接。请注意，这只对 SVG 有意义。如果情节只是一个图像，它只是一个图像，图像中不能有超链接。

如果您希望能够单击交互式绘图窗口中的对象并使其充当超链接，则可以创建一个事件处理程序来处理“pick”事件，然后打开浏览器或其他任何东西。请参阅[此示例](http://matplotlib.org/examples/event_handling/pick_event_demo.html)了解如何选择事件。Matplotlib 图不是网页，甚至不是真正的文档，它们只是显示图形的窗口，因此它们不支持超链接；使用 pick 事件，您可以通过在单击对象时打开 Web 浏览器来模拟超链接。

编辑：你是对的，它不起作用。似乎 URL 属性仅被读取并用于某些类型的对象。谷歌搜索，我看到一些关于它的旧 matplotlib 邮件列表讨论，似乎想法是逐渐为不同的艺术家类型添加 URL 支持，但我想他们从来没有解决这个问题。我建议你在[matplotlib bug tracker](https://github.com/matplotlib/matplotlib/issues)上提出一个关于这个的错误。

与此同时，有一种方法可以做到，但它有点迂回。URL 是为 PathCollection 对象绘制的，因此您可以从文本中创建一个 Path，然后从该路径中创建一个 PathCollection，然后将该 PathCollection 添加到您的绘图中。这是一个例子：

```
pyplot.scatter([1, 2, 3], [4, 5, 6])
t = mpl.text.TextPath((2, 4), 'This is text', size=0.1)
pc = mpl.collections.PathCollection([t])
pc.set_urls(['http://www.google.com'])
ax = pyplot.gca()
ax.add_collection(pc)
pyplot.draw()
f = pyplot.gcf()
f.canvas.print_figure('fig.svg') 
```

请注意，您必须使用`set_urls`而不是`set_url`. 此方法生成带有可点击文本的 SVG，但它有一些缺点。最值得注意的是，您似乎必须在数据坐标中手动设置文本大小，因此可能需要花费一些时间才能找到相对于您绘制的数据的大小而言不是太大或太小的文本大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-10T02:35:11.883

例如，在使用 SVG 文件时，添加超链接是有意义的。

该`url`属性适用于较新的 matplotlib 版本：

```
text = plt.annotate("Link", xy=(2,5), xytext=(2.2,5.5),
                    url='http://matplotlib.org', 
                    bbox=dict(color='w', alpha=1e-6, url='http://matplotlib.org')) 
```

例如，在浏览器中运行的 Jupyter 笔记本中，可以显示带有如下超链接的 SVG：

```
import matplotlib.pyplot as plt
from IPython.display import set_matplotlib_formats
set_matplotlib_formats("svg")

fig, ax = plt.subplots()
ax.scatter([1, 2, 3], [4, 5, 6])
text = ax.annotate("Link", xy=(2,5), xytext=(2.2,5.5),
                    url='http://matplotlib.org', 
                    bbox=dict(color='w', alpha=1e-6, url='http://matplotlib.org')) 
```

在以这种方式生成的图中，您可以单击链接并被定向到 matplotlib.org。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-07T11:08:45.687

这可以通过 pgf 后端实现：

```
#!/usr/bin/env python3

import matplotlib
matplotlib.use("pgf")
pgf_with_custom_preamble = {
    "text.usetex": True,
    "pgf.preamble": [
        r"\usepackage{hyperref}"
        ]
}
matplotlib.rcParams.update(pgf_with_custom_preamble)
from matplotlib import pyplot as plt

x = range(5)
y = range(5)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot(x, y, "r-", label=r"Hyperlink: \url{http://google.com}")

ax.legend()

fig.savefig("mwe.pdf") 
```

# ajax - jsp的ajax代码

> ID：15417587
> 
> 赞同：0
> 
> 时间：2013-03-14T18:40:42.250
> 
> 标签：ajax

当我们从下拉框中选择选项时，如何编写 Ajax 代码来检索网页特定部分的信息？

我想要我从网页特定部分的下拉菜单中选择的特定项目的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:32:35.683

假设您的标记看起来像：

```
<select id="dropdown">
    <option value="1">Some option</option>
    <option value="2">Other option</option>
    <option value="3">Helpfull option</option>
    <option value="4">Don't pick this option</option>
</select>
<div id="details"></div> 
```

为了进行 AJAX 调用，我会使用某种库。例如，使用 jQuery 将比编写处理跨不同浏览器的 ajax 调用的代码容易得多。代码可能如下所示：

```
$('#dropdown').on('change', function(e) {
    var currentValue = $('#dropdown').val();
    $.get('<someurl>', function(data) {
        $('#details').html(data);
    });
}; 
```

替换`'<someurl>'`为所需资源的 url。在不使用 jQuery 或类似库的情况下执行此操作会涉及更多内容。有关一些指导，您可以查看以下答案：[https ://stackoverflow.com/a/2557268/355499](https://stackoverflow.com/a/2557268/355499)

# android - 使用 java.lang.ClassNotFoundException 扩展布局时出错

> ID：15417588
> 
> 赞同：4
> 
> 时间：2013-03-14T18:40:42.673
> 
> 标签：android, android-layout, classnotfoundexception, layout-inflater

好的，现在我知道这个问题已经在 SO 上被问过好几次了，但没有一个答案对我有用。

我正在尝试为我的项目创建自定义首选项。更具体地说，它是[`HorizontalListView`](http://www.dev-smart.com/archives/34)直接在其下方附加的首选项。我基本上是通过修改[这个代码](http://robobunny.com/wp/2011/08/13/android-seekbar-preference/)来创建它的`SeekBarPreference`（我也在使用它并且工作正常）。My与（正如我所说的没有问题）`ListViewPreference`位于完全相同的文件夹中`SeelkBarPreference`，但我不断得到一个`ClassNotFoundException`（参见下面的 logcat）。这是我的`ListViewPreference`课：

```
package com.example.ebookreader;

import android.content.Context;
import android.content.res.TypedArray;
import android.preference.Preference;
import android.util.AttributeSet;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.view.ViewParent;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class ListViewPreference extends Preference {

    private final String TAG = getClass().getName();

    private static final String ROBOBUNNYNS = "http://robobunny.com";
    private static final int DEFAULT_VALUE = 50;

    private int mCurrentValue;
    private String mUnitsLeft = "";
    private String mUnitsRight = "";

    private HorizontalListView mListView;

    private TextView mStatusText;

    public ListViewPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
        initPreference(context, attrs);
    }

    public ListViewPreference(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initPreference(context, attrs);
    }

    private void initPreference(Context context, AttributeSet attrs) {
        setValuesFromXml(attrs);

        mListView = new HorizontalListView(context, attrs);
        LayoutParams params = mListView.getLayoutParams();
        params.width = LayoutParams.MATCH_PARENT;
        params.height = LayoutParams.WRAP_CONTENT;
        mListView.setLayoutParams(params);
    }

    private void setValuesFromXml(AttributeSet attrs) {
        mUnitsLeft = getAttributeStringValue(attrs, ROBOBUNNYNS, "unitsLeft",
                "");
        String units = getAttributeStringValue(attrs, ROBOBUNNYNS, "units", "");
        mUnitsRight = getAttributeStringValue(attrs, ROBOBUNNYNS, "unitsRight",
                units);
    }

    private String getAttributeStringValue(AttributeSet attrs,
            String namespace, String name, String defaultValue) {
        String value = attrs.getAttributeValue(namespace, name);

        if (value == null)
            value = defaultValue;

        return value;
    }

    @Override
    protected View onCreateView(ViewGroup parent) {
        RelativeLayout layout = null;

        try {
            LayoutInflater mInflater = (LayoutInflater) getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            layout = (RelativeLayout) mInflater.inflate(
                    R.layout.horizontal_list_view_preference, parent, false);
        } catch (Exception e) {
            Log.e(TAG, "Error creating seek bar preference", e);
        }

        return layout;
    }

    @Override
    public void onBindView(View view) {
        super.onBindView(view);

        try {
            // move our seekbar to the new view we've been given
            ViewParent oldContainer = mListView.getParent();
            ViewGroup newContainer = (ViewGroup) view
                    .findViewById(R.id.listViewPrefBarContainer);

            if (oldContainer != newContainer) {
                // remove the seekbar from the old view
                if (oldContainer != null) {
                    ((ViewGroup) oldContainer).removeView(mListView);
                }
                // remove the existing seekbar (there may not be one) and add
                // ours
                newContainer.removeAllViews();
                newContainer.addView(mListView,
                        ViewGroup.LayoutParams.FILL_PARENT,
                        ViewGroup.LayoutParams.WRAP_CONTENT);
            }
        } catch (Exception ex) {
            Log.e(TAG, "Error binding view: " + ex.toString());
        }

        updateView(view);
    }

    /**
    * Update a SeekBarPreference view with our current state
    * 
    * @param view
    */
    protected void updateView(View view) {
        try {
            RelativeLayout layout = (RelativeLayout) view;

            mStatusText = (TextView) layout
                    .findViewById(R.id.listViewPrefValue);
            mStatusText.setText(String.valueOf(mCurrentValue));
            mStatusText.setMinimumWidth(30);

            TextView unitsRight = (TextView) layout
                    .findViewById(R.id.listViewPrefUnitsRight);
            unitsRight.setText(mUnitsRight);

            TextView unitsLeft = (TextView) layout
                    .findViewById(R.id.listViewPrefUnitsLeft);
            unitsLeft.setText(mUnitsLeft);
        } catch (Exception e) {
            Log.e(TAG, "Error updating seek bar preference", e);
        }
    }

    @Override
    protected Object onGetDefaultValue(TypedArray ta, int index) {
        int defaultValue = ta.getInt(index, DEFAULT_VALUE);
        return defaultValue;
    }

    @Override
    protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {
        if (restoreValue) {
            mCurrentValue = getPersistedInt(mCurrentValue);
        } else {
            int temp = 0;
            try {
                temp = (Integer) defaultValue;
            } catch (Exception ex) {
                Log.e(TAG, "Invalid default value: " + defaultValue.toString());
            }

            persistInt(temp);
            mCurrentValue = temp;
        }
    }
} 
```

对于大多数人来说，这个问题是没有带参数的构造函数的结果`Context`，`AttributeSet`但正如你所看到的，我显然拥有它。

这是错误不断发生的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res/com.example.ebookreader"
    android:background="@drawable/wallpaper" >

    <android:PreferenceCategory
        android:key="device_settings"
        android:title="Device Settings" >

        <android:CheckBoxPreference
            android:key="wifi"
            android:summary="Enable or Disable Wi-Fi"
            android:title="Wi-Fi" />

        <android:CheckBoxPreference
            android:key="bluetooth"
            android:summary="Enable or Disable Bluetooth"
            android:title="Bluetooth" />

        <android:CheckBoxPreference
            android:key="autosync"
            android:summary="Enable or Disable AutoSync"
            android:title="AutoSync" />

        <custom:SeekBarPreference
            android:id="@+id/brightness_adjust"
            android:defaultValue="100"
            android:key="brightness"
            android:max="200"
            android:summary="Adjust Brightness Levels"
            android:title="Brightness" />
    </android:PreferenceCategory>

    <android:PreferenceCategory
        android:key="account_settings"
        android:title="Account Settings" >

        <custom:ListViewPreference> <!-- Error happens here -->
                android:id="@+id/font_selector"
                android:key="font"
                android:title="Font"
                android:summary="Edit Font"     
            />
        </custom:ListViewPreference>
    </android:PreferenceCategory>

</PreferenceScreen> 
```

以下是我的完整 Logcat：

```
03-14 17:53:14.290: E/AndroidRuntime(449): FATAL EXCEPTION: main
03-14 17:53:14.290: E/AndroidRuntime(449): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ebookreader/com.example.ebookreader.SettingsActivity}: android.view.InflateException: Binary XML file line #40: Error inflating class ListViewPreference
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1736)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1752)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.os.Looper.loop(Looper.java:126)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.app.ActivityThread.main(ActivityThread.java:3997)
03-14 17:53:14.290: E/AndroidRuntime(449):  at java.lang.reflect.Method.invokeNative(Native Method)
03-14 17:53:14.290: E/AndroidRuntime(449):  at java.lang.reflect.Method.invoke(Method.java:491)
03-14 17:53:14.290: E/AndroidRuntime(449):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-14 17:53:14.290: E/AndroidRuntime(449):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-14 17:53:14.290: E/AndroidRuntime(449):  at dalvik.system.NativeStart.main(Native Method)
03-14 17:53:14.290: E/AndroidRuntime(449): Caused by: android.view.InflateException: Binary XML file line #40: Error inflating class ListViewPreference
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.preference.GenericInflater.createItemFromTag(GenericInflater.java:441)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.preference.GenericInflater.rInflate(GenericInflater.java:481)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.preference.GenericInflater.rInflate(GenericInflater.java:493)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.preference.GenericInflater.inflate(GenericInflater.java:326)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.preference.GenericInflater.inflate(GenericInflater.java:263)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java:269)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:1333)
03-14 17:53:14.290: E/AndroidRuntime(449):  at com.example.ebookreader.SettingsActivity.onCreate(SettingsActivity.java:31)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1700)
03-14 17:53:14.290: E/AndroidRuntime(449):  ... 11 more
03-14 17:53:14.290: E/AndroidRuntime(449): Caused by: java.lang.ClassNotFoundException: android.preference.ListViewPreference in loader dalvik.system.PathClassLoader[/data/app/com.example.ebookreader-2.apk]
03-14 17:53:14.290: E/AndroidRuntime(449):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251)
03-14 17:53:14.290: E/AndroidRuntime(449):  at java.lang.ClassLoader.loadClass(ClassLoader.java:548)
03-14 17:53:14.290: E/AndroidRuntime(449):  at java.lang.ClassLoader.loadClass(ClassLoader.java:508)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.preference.GenericInflater.createItem(GenericInflater.java:375)
03-14 17:53:14.290: E/AndroidRuntime(449):  at android.preference.GenericInflater.onCreateItem(GenericInflater.java:417)
03-14 17:53:14.290: E/AndroidRuntime(449):  at    android.preference.GenericInflater.createItemFromTag(GenericInflater.java:428)
03-14 17:53:14.290: E/AndroidRuntime(449):  ... 20 more 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T18:45:27.797

但是你为什么写

```
 <custom:ListViewPreference 
```

它应该是

```
 <com.example.ebookreader.ListViewPreference 
```

作为您的包裹，放置类的位置，称为

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T18:44:47.927

通常，您需要使用组件的完整路径：

```
<com.example.ebookreader.ListViewPreference
     android:id="@+id/font_selector"
     android:key="font"
     android:title="Font"
     android:summary="Edit Font"      
/> 
```

我从未见过使用“自定义：”作为元素。

# c# - SQL语法错误手动检查

> ID：15417590
> 
> 赞同：0
> 
> 时间：2013-03-14T18:40:53.797
> 
> 标签：c#, mysql

对于下面的代码，我得到了错误

> 您的 SQL 语法有误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'Name','Score') VALUES('cain','0') 附近使用正确的语法

```
private void btnSubmitScore_Click(object sender, EventArgs e)
{
    string connStr = "server=bel.sunderland.ac.uk; " +
                     "database=bg30xw; " +
                     "uid=USERNAME; " +
                     "pwd=PASSWORD;";

    string query = "INSERT INTO highscore('Name','Score') VALUES (@Name, @Score);";

    using(MySqlConnection myconn = new MySqlConnection(connStr))
    {
        Console.WriteLine(query);
        MySqlCommand insertCommand = new MySqlCommand(query,myconn);
        insertCommand.Parameters.AddWithValue("@Name",sName);
        insertCommand.Parameters.AddWithValue("@Score",iTotalScore);

        try
        {
            myconn.Open();
            insertCommand.ExecuteNonQuery();

        }
        catch (MySqlException ex)
        {
            MessageBox.Show(ex.Message);
        }
        myconn.Close();
    } 
```

错误出现在“messagebox.show(ex.message);”中 当我运行程序时。我在谷歌上查看，但大多数建议都是关于引号的，我已经更改并重新更改它们但无济于事。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:41:54.853

使用反引号来转义列（和表）名称，而不是引号

```
INSERT INTO highscore(`Name`,`Score`) VALUES (@Name, @Score) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:50:31.380

不需要转义单个单词的列名（我认为 MySQL 不允许，但我可能错了）；因此，这应该有效：

```
INSERT INTO highscore(Name,Score) VALUES (@Name, @Score); 
```

您可以在运行`select`语句时使用空格为列指定别名，但我通常会避免使用它们。

# c# - 在 C# 中枚举特殊事件日志

> ID：15417593
> 
> 赞同：1
> 
> 时间：2013-03-14T18:41:10.333
> 
> 标签：c#, event-log

我正在尝试获取 C# 中“特殊”事件日志的列表，例如“Microsoft\Windows\Audio\CaptureMonitor”日志以及所有其他类似的日志。当我使用 System.Diagnostics.EventLog.GetEventLogs() 时，它们似乎没有返回。有没有一种特殊的方法来获取所有特殊事件日志的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:08:09.587

老实说，我承认我不知道这些视图如何与 EventLogs 和 EventSources 相关联，但请看一下注册表项：

HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\WINEVT\Channels

看看这是否会让你走上正确的道路。还结帐：

[如何在 Windows 事件系统中创建日志名层次结构？](https://stackoverflow.com/questions/10428158/how-do-i-create-a-hierarchy-of-lognames-in-the-windows-event-system)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:56:08.960

您可以使用[*WevtUtil.exe 工具*](http://msdn.microsoft.com/en-us/library/bb671205.aspx)：

> 要从命令行访问事件日志信息，请使用 WevtUtil.exe 工具。此工具位于 %SystemRoot%\System32 目录中。对于 WevtUtil.exe 工具帮助，请使用**wevtutil /?** 命令。

我猜您可能会使用 a [`System.Diagnostigs.Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)，启动该工具，然后捕获并解析控制台输出。

```
using System;
using System.Diagnostics;
using System.Linq;

class Program
{
    static void Main(string[] args)
    {
        var output = "";
        var p = new Process();
        var psi = new ProcessStartInfo("wevtutil.exe", "el");

        psi.CreateNoWindow = true;
        psi.RedirectStandardOutput = true;
        psi.UseShellExecute = false;
        p.StartInfo = psi;
        p.Start();

        using (var processOutput = p.StandardOutput)
        {
            output = processOutput.ReadToEnd();
        }

        p.WaitForExit();

        var eventLogs = output
            .Split(new string[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries)
            .ToList();

        foreach (var item in eventLogs)
        {
            Console.WriteLine(item);
        }
    }
} 
```

要读取事件日志，您可以使用相同的方法（例如 call `wevtutil qe Microsoft-Windows-Audio/CaptureMonitor /f:text`）或[`System.Diagnostics.Eventing.Reader`Namespace](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.aspx) 。尝试以下操作：

```
using System;
using System.Diagnostics.Eventing.Reader;

class Program
{
    static void Main(string[] args)
    {
        EventLogQuery subscriptionQuery = 
            new EventLogQuery("Microsoft-Windows-Audio/CaptureMonitor", 
                PathType.LogName, "*");

        using (EventLogReader logReader = 
            new EventLogReader(subscriptionQuery))
        {
            DisplayEventAndLogInformation(logReader);
        }
    }

    private static void DisplayEventAndLogInformation(EventLogReader logReader)
    {
        for (EventRecord eventInstance = logReader.ReadEvent();
            null != eventInstance; eventInstance = logReader.ReadEvent())
        {
            Console.WriteLine("--------------------------------------");
            Console.WriteLine("Event ID: {0}", eventInstance.Id);
            Console.WriteLine("Publisher: {0}", eventInstance.ProviderName);

            try
            {
                Console.WriteLine("Description: {0}", 
                    eventInstance.FormatDescription());
            }
            catch (EventLogException)
            {
                // The event description contains parameters, 
                // and no parameters were passed to the 
                // FormatDescription method, so an exception is thrown.
            }

            // Cast the EventRecord object as an EventLogRecord 
            // object to access the EventLogRecord class properties
            EventLogRecord logRecord = (EventLogRecord)eventInstance;
            Console.WriteLine("Container Event Log: {0}", 
                logRecord.ContainerLog);
        }
    }
} 
```

您可能需要根据需要稍微调整`EventLogQuery`构造函数的查询参数 ( `*`)。[如何：查询事件](http://msdn.microsoft.com/en-us/library/bb671200.aspx)主题显示了一个实现示例。

# c# - 如何在 ASP.NET MVC 项目中将 id 属性传递给控制器 的操作？

> ID：15417596
> 
> 赞同：0
> 
> 时间：2013-03-14T18:41:15.560
> 
> 标签：c#, asp.net, asp.net-mvc, web-applications

我是 asp.net 的新手，如果有人可以帮助我，我将不胜感激。我认为我有一个表格：

```
@using (Html.BeginForm("Edit", "Projects", FormMethod.Post, new { enctype = "multipart/form-data", id = serviceId })) 
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Project</legend>

            @Html.LabelFor(model => model.Title)     
            @Html.EditorFor(model => model.Title)
            @Html.ValidationMessageFor(model => model.Title)       

            @Html.LabelFor(model => model.Description)

            @Html.TextAreaFor(model => model.Description, new { rows = 20})
            @Html.ValidationMessageFor(model => model.Description)

            <input type="submit" value="Save"  />

</fieldset>
} 
```

`serviceId`我通过 ViewData（在控制器中声明）：

```
@{
    var serviceId = ViewData["serviceid"];
 } 
```

现在提交时，我想将其传递`serviceId`给我`ActionResult`，并在此视图中添加了脚本：

```
 $(function () {
    $("form").submit(function () {

        $.post("Projects/Edit", {Sid: $(this).attr('id'), }, function (data) {

        });
    });
}); 
```

在我的`Projects`控制器中，在`Edit`ActionResult 中，我将此 id 作为参数：

```
[HttpPost]
    public ActionResult Edit(Models.Project EditedProject, int Sid)
    {
        Models.DBProjects dbproject = new Models.DBProjects();
        PoleInvestProjectContext context = new PoleInvestProjectContext();
        UserAccount curUser = context.Users.Where(u => u.UserName ==    User.Identity.Name).First();
        EditedProject.UserId = curUser.UserId;

        EditedProject.ServiceId = Sid;
        dbproject.EditProject(EditedProject);

        return RedirectToAction("Index", new { id = Sid });
    } 
```

这是一个`Error`:(当我尝试提交表单时：

```
The parameters dictionary contains a null entry for parameter 'Sid' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult Edit(MyProject.Models.Project, Int32)' in 'MyProject.Controllers.ProjectsController'. 
An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter. 
```

如果有人可以提供帮助，我将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:49:25.587

使用视图模型，抛弃 javascript 和 ViewData

```
public class EditViewModel()
{
  public string Title {get; set;}
  public string Description {get; set;}
  public int ServiceId {get; set;}
} 
```

将 ServiceId 设置为 viewModel 属性，而不是控制器中的 ViewData 对象。

将您的视图强输入到 viewModel 而不是实体对象。

然后使用隐藏字段将值传递回控制器

```
@Html.LabelFor(model => model.Title)     
@Html.EditorFor(model => model.Title)
@Html.ValidationMessageFor(model => model.Title)       
@Html.LabelFor(model => model.Description)
@Html.TextAreaFor(model => model.Description, new { rows = 20})
@Html.ValidationMessageFor(model => model.Description)

@Html.HiddenFor(model => model.ServiceId)

<input type="submit" value="Save"  /> 
```

并更改您发布操作的签名

```
[HttpPost]
public ActionResult Edit(EditViewModel viewModel)
{
  //... 
```

# visual-studio-2010 - 如何在 vs2010 项目中向 moc 添加特定标志？

> ID：15417599
> 
> 赞同：1
> 
> 时间：2013-03-14T18:41:23.717
> 
> 标签：visual-studio-2010, qt, moc, qt-vs-addin

我正在尝试解决[此错误](https://bugreports.qt-project.org/browse/QTBUG-22829)，建议的解决方法是传递`-DBOOST_TT_HAS_OPERATOR_HPP_INCLUDED`给 moc.exe。

[这个](https://stackoverflow.com/q/8486992/942596)问题与我的有关。不同之处在于我想在 VS2010 项目（VS 插件）中添加 MOC 标志。

我试过**左键单击 -> Qt Project Setting -> MocOptions**并添加`-DBOOST_TT_HAS_OPERATOR_HPP_INCLUDED`

请注意，我的问题是使用 boost 1.53 发生的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:01:45.390

昨天从[这里提供了解决方案](https://bugreports.qt-project.org/browse/QTBUG-22829)

我们还需要添加`-DBOOST_NO_TEMPLATE_PARTIAL_SPECIALIZATION`moc 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:50:21.827

您尝试过的实际上是正确的解决方案。但是，您需要重新构建项目才能解决该错误。当 DBOOST_TT_HAS_OPERATOR_HPP_INCLUDED 被设置时，它会改变你的 Boost 头文件的预编译。正如您所说，您在预编译的标头中使用了 boost。您还必须重建它们以解决您的问题。

# javascript - 作物上的Jcrop + Canvas透明图像问题

> ID：15417600
> 
> 赞同：0
> 
> 时间：2013-03-14T18:41:25.767
> 
> 标签：javascript, jcrop

目前我们在我们的项目中仅使用 Javascript + jQuery，我们正在尝试将最终图像从 jCrop 转换为 base64，以便在 HTML 画布的帮助下传递给第三方服务。到目前为止，我们已经弄清楚了一切，只需要一件。当用户将透明 PNG 上传到 jCrop 时，我们会裁剪图像，在画布预览中，当移动或展开 jCrop 选择时，图像的透明部分会变得模糊。

你可以在这里看到问题的例子，你可以看到当我在 jCrop 中拖动选择时，图像的透明部分严重模糊：http: [//i46.tinypic.com/23jl946.png](http://i46.tinypic.com/23jl946.png)

我在 jCrop 中使用了一些不透明度设置，例如：

```
bgColor: 'transparent' 
```

并为画布尝试了 globalAlpha，但这些似乎不起作用。

```
var c           = canvas.getContext('2d');
c.globalAlpha   = 0; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:21:56.453

实际上只是使用画布的 clearRect 修复了它。

```
context.clearRect(0, 0, canvas.width, canvas.height); 
```

# django - 在 django 的 http 响应重定向中使用 reverse

> ID：15417611
> 
> 赞同：1
> 
> 时间：2013-03-14T18:41:51.047
> 
> 标签：django, django-forms, django-views

我想在处理带有反向的表单后传递一个变量，但是在尝试了很多事情之后没有任何效果。这是我的代码：

```
@login_required(login_url='/accounts/login/')
def pujar_track(request):
    if request.method=='POST':
        formulari = TrackForm(request.POST, request.FILES)
            if formulari.is_valid():                    
                track = formulari.save(commit=False)
                track.usuari = request.user
                track.save()

                url = reverse('acoplar_track', kwargs={'trac_id': track.id})
                return HttpResponseRedirect(url)

    else:
        formulari = TrackForm()

    return render(request,'principal/trackForm.html',
    {'formulari':formulari})

@login_required(login_url='/accounts/login/')
def acoplar_track(request, track_id):   
    track = get_object_or_404(Track, id=track_id)

    return render_to_response('principal/acoplarTrack.html',
        dict(track=track.nom),
        context_instance = RequestContext(request)) 
```

网址.py

```
url(r'^track/acoplar/(?P<track_id>\d+)/$',
    'principal.views.acoplar_track', name='acoplar_track'), 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:10:19.383

您`track_id`的 URLConf 中有：

```
url(r'^track/acoplar/(?P<track_id>\d+)/$', 'principal.views.acoplar_track', name='acoplar_track'), 
```

在您的`reverse`声明中，您将`trac_id`其用作关键字参数。尝试这个：

```
url = reverse('acoplar_track', kwargs={'track_id': track.id}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:11:36.627

尝试：

```
url = reverse('acoplar_track', args=(), kwargs={'track_id': track.id}) 
```

# ruby - Rack::Request.send :include Alex 在 Ruby Geocoder 中做什么

> ID：15417618
> 
> 赞同：1
> 
> 时间：2013-03-14T18:42:11.960
> 
> 标签：ruby

[https://github.com/alexreisner/geocoder](https://github.com/alexreisner/geocoder)

我喜欢 Ruby Geocoder Gem，因为它具有惊人的元编程，其中大部分我根本不明白。

有谁知道 Geocoder::Request 模块底部发生了什么？

有一个简单的 3 行块让我感到困惑：

它实际上在模块定义之外，它读作

```
 if defined?(Rack) and defined?(Rack::Request)
      Rack::Request.send :include, Geocoder::Request
    end 
```

Rack::Request 上没有预定义方法 .include 所以我不确定这里发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:51:11.853

该块意味着如果满足条件，`Geocoder::Request`模块将被包含在`Rack::Request`类中，因此本质上是扩展`Rack::Request`功能以包含`location`刚刚定义的方法。该`include`方法位于 ruby[​​ Module](http://ruby-doc.org/core-2.0/Module.html#method-i-include)中。

这是您所指的文件：[地理编码器请求](https://github.com/alexreisner/geocoder/blob/master/lib/geocoder/request.rb)

# xcode - How do you update Xcode on OSX to the latest version?

> ID：15417619
> 
> 赞同：235
> 
> 时间：2013-03-14T18:42:14.450
> 
> 标签：xcode, macos, homebrew

What is the easiest way to update Xcode on OSX?

I see this in the terminal:

```
$ brew install xxxxxxx
Warning: Your Xcode (4.3.3) is outdated
Please install Xcode 4.6. 
```

But when I go to open up `Xcode > Preferences > Downloads`, it says there are no updates?

* * *

## 回答 #1

> 赞同：331
> 
> 时间：2013-03-14T18:49:10.560

1.  Open up App Store

    ![enter image description here](../Images/7cc7a1b7df1686f3419729a3601361a6.png)

2.  Look in the top right for the updates section (may also be in lefthand column "Updates"..)

    ![enter image description here](../Images/3f8e00c66d01fa492e7db277305565ef.png)

3.  Find Xcode & click Update ![enter image description here](../Images/ab7dc0c622d1c4a32e0655fdb8fd91d8.png)

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2016-06-14T03:25:12.747

`softwareupdate --list` see the list of outdated software.

`softwareupdate --install --all` update all outdated software.

`softwareupdate --install <product name>` update the software you named.

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2016-05-05T07:19:54.083

Sometime I don't see the Xcode update in `Updates tab` in `AppStore`
So I search Xcode in AppStore [![enter image description here](../Images/80279aed1579d79fd075b3cdcb8fcef7.png)](https://i.stack.imgur.com/UN4wp.png)

Then click update and it update

* * *

## 回答 #4

> 赞同：60
> 
> 时间：2017-05-30T00:24:24.083

[![enter image description here](../Images/ce5d3071bbdbcda90851ac606a69a1db.png)](https://i.stack.imgur.com/OlwEJ.png)

If attempting to download via the App Store leaves you with a little grey spinner and nothing actually happening, then you can go to :

### [https://developer.apple.com/download/more/](https://developer.apple.com/download/more/)

log in with your Apple Developer ID, and the latest Xcode should be available as a .zip download.

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2015-04-05T16:36:11.597

In my case (Xcode 6.1, iOS 8.2) I did not see the update in AppStore. I found Xcode 6.2 for download and pressed "Install". Then, it installed and asked for the update (more than 2 Gb). Xcode 6.2 works correctly with iOS 8.2 and iOS 8.1.2

Hopefully this tip will help somebody else...

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2020-01-08T17:59:46.020

`xcode-select --install` worked for me

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-09-04T18:10:45.887

If you want the latest Beta, it will not be in the AppStore. Instead you have to login to [https://developer.apple.com](https://developer.apple.com) and download from there.

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-09-11T23:17:04.790

Another best way to update and upgrade OSX development tools using command line is as follows:

Open terminal on OSX and type below commands. Try 'sudo' as prefix if you don't have admin privileges.

```
brew update 
```

and for upgrading outdated tools and libraries use below command

```
brew upgrade 
```

These will update all packages like node, rethinkDB and much more.

Also, `softwareupdate --install --all` this command also work best.

Important: Remove all outdated packages and free some space using the simple command.

```
brew cleanup 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-07-28T22:54:18.453

I ran into this bugger too.

I was running an older version of Xcode (not compatible with ios 9.2) so I needed to update.

I spent hours on this and was constantly getting spinning wheel of death in the app store. Nothing worked. I tried CLI softwareupdate, updating OSX, everything.

I ultimately had to download AppZapper, then nuked XCode.

I went into the app store to download and it still didn't work. Then I rebooted.

And from here I could finally upgrade to a fresh version of xcode.

WARNING: AppZapper can delete all your data around Xcode as well, so be prepared to start from scratch on your profiles, keys, etc. Also per the other notes here, of course be ready for a 3-5 hour long downloading expedition...

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-05-11T21:52:29.973

I used the `Command_Line_Tools_OS_X_10.XX_for_Xcode_7.2.dmg` and therefore had to download the latest version from [here](https://developer.apple.com/downloads/).

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-11-18T05:31:29.720

You can try `mas-cli` (Mac App Store cli). Github project [here](https://github.com/mas-cli/mas)

It would be

```
$ brew install mas
$ mas list
$ mas search Xcode
$ mas install <id> 

$ mas upgrade <id> 
```

upd:

Had issues installing Xcode 12.2 in Big Sur. Solved them by entering into the App Store from the devs link.

[https://developer.apple.com/download/release/](https://developer.apple.com/download/release/)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-01-23T04:47:56.373

Check [https://xcodereleases.com/](https://xcodereleases.com/) where you can also download legacy versions.

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-05-27T00:36:19.723

For me it was >41GB for the update to start. ~/Library contains a lot of cached content for mail, browsers, etc...you can safely remove those. Remove big apps too, like iMovie..you can always install it back later

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-22T08:03:29.813

You DO NOT need to upgrade Xcode.

Just open the file `/usr/local/Homebrew/Library/Homebrew/extend/os/mac/diagnostic.rb` ,

then remove this line `check_xcode_minimum_version` in the following function.

```
def fatal_build_from_source_checks
    %w[
      check_xcode_license_approved
      check_xcode_minimum_version //<-- this one
      check_clt_minimum_version
      check_if_xcode_needs_clt_installed
    ].freeze
    end 
```

Then `brew install` should works fine.

# c# - 如何获得 IEnumerable 的 linq 总和 How do I get the sum of numbers that are in an IEnumerable collection of objects? I know for sure that the underlying type will always be numeric but the type is determined at runtime. 问问题 问问题 2013-03-14T18:42:36.590 16559 次 This question shows research effort; it is useful and clear 8 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. How do I get the sum of numbers that are in an IEnumerable collection of objects? I know for sure that the underlying type will always be numeric but the type is determined at runtime. IEnumerable listValues = data.Select(i => Convert.ChangeType(property.GetValue(i, null), columnType)); After that I want to be able to do the following (the following has the error:"Cannot resolve method Sum"): var total = listValues.Sum(); Any ideas? Thank you. If you know the exact type is always going to be a numeric type, you should be able to use something like: double total = listValues.Sum(v => Convert.ToDouble(v)); This will work because Convert.ToDouble will look for IConvertible, which is implemented by the core numeric types. You are forcing the type to be a double and not the original type, as well. c#.netgenericsreflection 4 4 回答 4 This answer is useful 14 如果你知道确切的类型总是数字类型，你应该能够使用类似的东西： double total = listValues.Sum(v => Convert.ToDouble(v)); 这将起作用，因为Convert.ToDouble将查找IConvertible由核心数字类型实现的 。您也将类型强制为 adouble而不是原始类型。 于 2013-03-14T18:45:02.650 回答 This answer is useful 4 You can use expression trees to generate the required add function, then fold over your input list: private static Func <object, object,="" object="">GenAddFunc(Type elementType) { var param1Expr = Expression.Parameter(typeof(object)); var param2Expr = Expression.Parameter(typeof(object)); var addExpr = Expression.Add(Expression.Convert(param1Expr, elementType), Expression.Convert(param2Expr, elementType)); return Expression.Lambda<func<object, object,="" object="">>(Expression.Convert(addExpr, typeof(object)), param1Expr, param2Expr).Compile(); } IEnumerable listValues; Type elementType = listValues.First().GetType(); var addFunc = GenAddFunc(elementType); object sum = listValues.Aggregate(addFunc); note this requires the input list to be non-empty, but it has the advantage of preserving the element type in the result. 于 2013-03-14T18:51:26.230 回答 This answer is useful 0 convert to one type. Say, decimal. data.Select(i => Convert.ToDecimal(property.GetValue(i, null)).Sum(); 于 2013-03-14T18:48:35.133 回答 This answer is useful -1 you can use dyanmic, works perfect: listValues.Sum(x => (dynamic)x); 于 2013-03-14T20:58:24.730 回答 Related 1 php - PHP将mysql行转换为数组以查找其大小 2 encryption - 如何混淆加密功能的密钥？ 2 ruby - 用于选择 Ruby on Rails 索引排序的用户下拉列表 30 java - Eclipse - Android 设备选择器中的目标“未知” 1 jquery - jQuery datetimepicker - 选择时间时捕获鼠标 2 iphone - 如果正在录制视频，如何提醒和停止尝试的 segue 4 android - Android：月日年的日期格式 6 c++ - C++：类/结构是否在编译时初始化？ 1 python - Mongoengine，在字典键字段之后.. Mongoengine 无法将字段名称转换为 db_fields 1 sqlite - SQLite：检索刚刚添加的内容？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15417623
> 
> 赞同：8
> 
> 时间：
> 
> 标签：c#, .net, generics, reflection

How do I get the sum of numbers that are in an IEnumerable collection of objects? I know for sure that the underlying type will always be numeric but the type is determined at runtime.

```
IEnumerable<object> listValues = data.Select(i => Convert.ChangeType(property.GetValue(i, null), columnType)); 
```

After that I want to be able to do the following (the following has the error:"Cannot resolve method Sum"):

```
var total = listValues.Sum(); 
```

Any ideas? Thank you.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T18:45:02.650

如果你知道确切的类型总是数字类型，你应该能够使用类似的东西：

```
double total = listValues.Sum(v => Convert.ToDouble(v)); 
```

这将起作用，因为`Convert.ToDouble`将查找[`IConvertible`](http://msdn.microsoft.com/en-us/library/system.iconvertible.aspx)由核心数字类型实现的 。您也将类型强制为 a`double`而不是原始类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T18:51:26.230

You can use expression trees to generate the required add function, then fold over your input list:

```
private static Func<object, object, object> GenAddFunc(Type elementType)
{
    var param1Expr = Expression.Parameter(typeof(object));
    var param2Expr = Expression.Parameter(typeof(object));
    var addExpr = Expression.Add(Expression.Convert(param1Expr, elementType), Expression.Convert(param2Expr, elementType));
    return Expression.Lambda<Func<object, object, object>>(Expression.Convert(addExpr, typeof(object)), param1Expr, param2Expr).Compile();
}

IEnumerable<object> listValues;
Type elementType = listValues.First().GetType();
var addFunc = GenAddFunc(elementType);

object sum = listValues.Aggregate(addFunc); 
```

note this requires the input list to be non-empty, but it has the advantage of preserving the element type in the result.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:48:35.133

convert to one type. Say, decimal.

> data.Select(i => Convert.ToDecimal(property.GetValue(i, null)).Sum();

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T20:58:24.730

you can use dyanmic, works perfect:

```
 listValues.Sum(x => (dynamic)x); 
```</func<object,></object,>

# c++ - 在 Turbo C++ 中移动圆

> ID：15417624
> 
> 赞同：0
> 
> 时间：2013-03-14T18:42:37.273
> 
> 标签：c++

我们如何在 Turbo c++ 中在屏幕上移动一个圆圈并且没有清晰的设备我想将它从左到右然后从右到左移动我的代码在这里但是它使用清晰的设备使屏幕闪烁一点所以任何帮助？？？

```
main() {
  int gd=DETECT,gm,col=0; 
  initgraph(&gd,&gm,"../bgi"); 
START: 
  int get = 0;col=40; 
  while(!kbhit()) 
  { 
    rectangle(20,20,getmaxx()-20,getmaxy()-20);
    circle(col,210,20); 
    delay(5); 
    if(col <600 && get == 0) col++; 
    else{ get=1; col--; } 
    cleardevice(); 
    if(col==40) goto START; 
  } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:45:04.280

自从我做 Turbo-C++ 以来已经有一段时间了，但我也处理过类似的案例。如果圆圈是空心的，您可以通过在背景颜色中重新绘制来模拟清晰。这将足够快以避免眨眼。

# linux - 在 CD 上运行的 Grep 脚本

> ID：15417628
> 
> 赞同：-1
> 
> 时间：2013-03-14T18:42:52.167
> 
> 标签：linux, bash, grep

我正在尝试学习一些 bash 脚本编写和清理一些旧 CD（还记得那些吗？）

我拥有的是一堆没有押韵或理由的备份 CD，因此我想创建一个 grep 脚本，该脚本将根据关键字搜索它们。（我目前正在尝试首先在桌面上测试脚本）我知道如何运行 grep，但它是我遇到问题的脚本。

所以这就是我所拥有的：

```
 #!/bin/bash
 #CDGrepScript

 SOURCEDIR=/home/name/Desktop (I'm currently testing it with files on the desktop)
 #mount /dev/cdrom     
 #SOURCEDIR=/dev/cdrom

 echo "hello, $USER. I will search your files"
 echo Begin Search...

 grep -ir "taxes|personal|School" * 

 echo $results
 echo "The search is complete. Goodbye"

 exit 
```

现在，当我对桌面上的文件运行它时。我的脚本在“开始搜索”后挂起我做错了什么？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:47:00.933

更通用的工具可能会更好地为您服务。就像一个 rgrep（递归 grep）将遍历一棵树以搜索搜索词。一个例子：

```
# rgrep
#
# Search for text strings in a directory hierarchy
set +x
case $# in
0 | 1 )
       # Not enough arguments -- give help message
       echo "Usage: $0 search_text pathname..." >&2
       exit 1
       ;;
* )
       # Use the first argument as a search string
       search_text=$1
       shift
       # Use the remaining argument(s) as path name(s)
       find "$@" -type f -print |
       while read pathname
       do
        egrep -i "$search_text" $pathname /dev/null
       done
       ;;
esac 
```

把它放在你的路径中，然后你只需将目录更改为 CD-ROM 的安装点，然后键入

```
$ rgrep "taxes" . 
```

或者您希望执行的任何其他搜索。

# c# - 从数据库中读取的日期格式错误？

> ID：15417631
> 
> 赞同：0
> 
> 时间：2013-03-14T18:42:55.743
> 
> 标签：c#, sql, datetime, formatexception

我`DateTime`在我的 C# winforms 工具中使用，我使用这一行将日期存储到 SQL 数据库中：

`iDisc.acquirementDate.ToString("yyyy-MM-dd")`

SQL数据库字段是`DATE`类型的，当这个日期被存储时，它的存储是正确的，比如这样：`2013-03-14`

当我想要这个值时，我使用这一行：

```
DateTime acquirementDate = DateTime.ParseExact(iDiscRow[TableNames.Discs.acquirementDate].ToString(), "yyyy-MM-dd", CultureInfo.InvariantCulture); 
```

但是，在上面的行会发生 FormatException，因为正在解析的字符串不是有效的 DateTime 投诉字符串。

正在解析的值是：`3/14/2013 12:00:00 AM`

我不明白的是，为什么`3/14/2013 12:00:00 AM`在数据库中存储的值读取为`2013-03-14`？

我正在使用`SqlDataReader`从数据库中检索数据。可以在这里发布该代码，但我认为它不是非常基本的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:44:49.337

该行作为对象检索。ToString() 方法正在格式化它。您需要将要使用的格式传递给 ToString() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:47:14.713

看来您`iDiscRow[TableNames.Discs.acquirementDate]`已经是 DateTime 了。在这种情况下，您只需要投射它。

```
DateTime acquirementDate = (DateTime)iDiscRow[TableNames.Discs.acquirementDate]; 
```

你得到的原因`3/14/2013 12:00:00 AM`是`DateTime.ToString()`使用当前的线程文化转换`DateTime`为`string`. 由于它是 WinForm 应用程序，我猜这是您的 Windows 系统格式`DateTime`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:47:44.817

仅当数据库值可能为空时，此答案才有意义。这经常是我自己的情况，所以我在类库的帮助类中编写了这个函数。

```
 public DateTime? SetDateTimeValue(DataTable dataTableIn
      , int rowNumber, string fieldName)
    {
        DateTime? returnValue = new DateTime?();
        DateTime tempValue = new DateTime();
        try
        {
         string fieldValueAsString = dataTableIn.Rows[rowNumber][fieldName].ToString();
         result = DateTime.TryParse(fieldValueAsString, out tempValue);
         if (result)
                returnValue = tempValue;
            }
        catch
        {
            returnValue = null;
        }
        return returnValue;
    } 
```

这是一个示例调用

```
DataTable data = dataAccess.GetEmergencyVisitDataFromClinicalApplicationSupport(VisitID);

        if (data.Rows.Count == 1)
        {
            ValueSetter setterOfValues = new ValueSetter();
            skip a bunch of lines.
            AdmitDecisionDateTime = 
            setterOfValues.SetDateTimeValue(data, 0, "admit_decision_datetime"); 
```

# r - ggplot stat_bin2d 具有严重偏斜数据的绘图

> ID：15417635
> 
> 赞同：3
> 
> 时间：2013-03-14T18:43:05.327
> 
> 标签：r, ggplot2

我有一组严重偏斜的数据。这在进行 stat_bin2d 绘图时会产生问题。结果是大部分图形是深蓝色的，只有少数点是不同的颜色。我想让图表更多地使用整个颜色范围。

问题的一个例子来自 ggplot 文档方向。

```
ggplot(diamonds, aes(carat, price)) + stat_bin2d() 
```

结果图只有几个位置不是深蓝色。

如何调整颜色范围的映射以显示更多细节？我知道我可以设置限制，但这并不完全符合要求，因为它会使超出限制的任何内容变为灰色。

```
ggplot(diamonds, aes(carat, price)) + stat_bin2d() + scale_fill_gradient(limits=c(1, 100)) 
```

像这样的东西，它们的灰色也很合适。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:54:05.937

快速的答案是

```
ggplot(diamonds, aes(carat, price)) + stat_bin2d() +
  scale_fill_gradient(trans="log10") 
```

**编辑：** 更长的答案是您可能想要某种颜色或填充比例的转换。对于内置转换，请参阅“另见”部分

```
library(scales)
?trans 
```

如果没有适合的内置转换，那么您可以构建自己的转换。[有关如何转换色标的](https://stackoverflow.com/questions/12186827/transform-color-scale-but-keep-a-nice-legend-with-ggplot2/12189857#12189857)示例，请参阅此 SO 问题的答案。

# c - 在 C 中解压缩 .gz 字符串？

> ID：15417648
> 
> 赞同：2
> 
> 时间：2013-03-14T18:43:36.983
> 
> 标签：c, string, gzip, compression

我需要解压缩当前存储在任意长字符串中的 .gz 文件（如 stuff.txt.gz）。我看过很多 zip 库，但没有一个直接的答案。

popen 是不可接受的，我需要一切都在我的程序中。另外，这是Windows。

我可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:46:21.307

看看[gzunpack](https://code.google.com/p/freecodecollection/wiki/gzunpack)库。

## 用法

```
#include "gzunpack.h"

...

    // read .GZ file header

    FILE *packedFileHandle = fopen("test1.gz", "rb");

    GzFileHeader *gzFileHeader = gzUnpackHeader(packedFileHandle);

    printf("Header:\n");
    printf("compressionMethod = %d\n", gzFileHeader->compressionMethod);
    printf("originalFileName = '%s'\n", gzFileHeader->originalFileName);
    printf("fileComment = '%s'\n", gzFileHeader->fileComment);

    // unpack .GZ file

    fseek(packedFileHandle, 0, SEEK_SET); // rewind

    FILE *unpackedFileHandle = fopen(gzFileHeader->originalFileName, "wb");

    gzUnpackFile(packedFileHandle, unpackedFileHandle);

    // free resources

    fclose(unpackedFileHandle);
    fclose(packedFileHandle);

    gzFreeHeader(gzFileHeader); 
```

# c - 解析方程

> ID：15417652
> 
> 赞同：-2
> 
> 时间：2013-03-14T18:43:53.070
> 
> 标签：c

我想问是否有人可以帮助我解决我的问题。

我必须将任意方程解析为变量和数字。

方程将是形式`"y1 + y2 + ... + y10"`。

样本：`"y1 + 2 y2 + 3y3 + y3 + 3 + 5 + 10 = y4 + 4"`

可以有随机数量的空格。“y1”不是 1*y。它是 y，索引为 1。

我正在考虑以`strchar(string," ")`这种方式使用和解析它，但它可以没有空格，所以也许在 char 之后读取 char，但是我不知道如何做方程`"3 y2"`，也许如果我考虑取第一个 char，然后读下一个字符`while(char == " ")`，然后取下一个字符并查看它是变量还是“+”。我不需要它的源代码，我可以提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:55:50.423

我建议您在 Google 上搜索“C 解析库”。这是一个看起来很有趣的：

[http://warp.povusers.org/FunctionParser/](http://warp.povusers.org/FunctionParser/)

嗯，那个实际上是 C++……如果你真的想要 C，还有其他的。

你不是第一个遇到这个问题的人，有图书馆可以解决它。

您也可以使用 Flex 和 Bison。这是一个教程。

[http://gnuu.org/2009/09/18/writing-your-own-toy-compiler/](http://gnuu.org/2009/09/18/writing-your-own-toy-compiler/)

# java - 如何处理禁止网络线程并需要更新 UI 线程上的列表适配器？

> ID：15417656
> 
> 赞同：0
> 
> 时间：2013-03-14T18:44:00.063
> 
> 标签：java, android, listadapter, couchbase

开发一个使用 CouchBase 作为其数据存储的 Android 应用程序。与 Couch 的所有交互都是通过 HTTP 进行的，因此无法在 UI 线程上完成。这通常是我们可以相当合理地解决的问题，但我遇到了这个问题：

我正在尝试开发一个封装/可重复使用的`CouchListAdapter`. 这个概念是，从页面中的 Couch 获取数据，然后缓存它。说页面大小是`20`，所以在初始化时，首先获取`20`，然后如果要求`21`，去获取`21`- `40`。

由于线程上网络的禁止，my `CouchViewLoader`which has methods `JSONObject getItemAt(int i)`and `int getCount()`，当被要求提供它没有的数据时，必须启动一个异步线程来获取数据，然后发送一个由封闭活动处理的广播，然后重新绑定/通知数据已更改。

我几乎让它工作了，但现在被困在我得到的地方：

> `java.lang.IllegalStateException`：适配器的内容发生了变化，但`ListView`没有收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。

如何调和无法在 UI 线程上点击 Couch 和只需要从 UI 线程更新我的适配器？

其他人肯定已经解决了这个问题吗？

（请记住，这一切都是围绕给定视图返回的结果可能比我们在内存中或在屏幕上显示的更多的想法设计的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:59:10.993

您可能需要考虑使用带有[loader的](http://developer.android.com/guide/components/loaders.html)[内容提供](http://developer.android.com/guide/topics/providers/content-providers.html)程序。基本上，您需要的所有信息都位于这些链接中。

对于一般视图：

*   内容提供者提供数据。
*   加载器在后台线程中从内容提供者那里获取数据。
*   加载器完成后台作业后，它们会通知 UI（例如[`CursorAdapter`](http://developer.android.com/reference/android/widget/CursorAdapter.html)，[`CursorTreeAdapter`](http://developer.android.com/reference/android/widget/CursorTreeAdapter.html)...）进行更新。

你的工作是：

*   让您的内容提供商通过服务器查询数据。您*可以*在内容提供商中执行网络任务。
*   用加载器获取的数据装饰 UI。

关于内容提供者，尽管他们说*如果您不打算与其他应用程序共享数据，则无需开发自己的提供者。*— 但正如他们强烈推荐使用加载器（他们确实支持带有[支持库](http://developer.android.com/training/basics/fragments/support-lib.html)的旧 API ），并且根据我的经验，内容提供者将节省您很多时间。我会说：就和内容提供商一起去吧:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:59:26.260

您是否考虑过[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)？

您可以在 doInBackground(...) 中完成艰苦的工作。

然后，您可以在 onPostExecute(...) 方法中更新您的 ListAdapter。

# regex - 正则表达式选择一个html代码块？

> ID：15417665
> 
> 赞同：-1
> 
> 时间：2013-03-14T18:44:28.073
> 
> 标签：regex, select

我需要选择一个代码块，以便可以使用 TextSoap 将其删除。

如何选择从开头的“<!DOCTYPE”到第一个“<h1>”的所有内容？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:49:48.373

一般的正则表达式可能看起来像`'^<!DOCTYPE(.|\n)*?<h1>'`评论者说的正确，你使用的是什么语言？语言可能有不同的方式来处理正则表达式。你也可以试试这个：[http ://regexpal.com/](http://regexpal.com/)

# android - 带有原生代码的 Android 原生库项目

> ID：15417674
> 
> 赞同：-2
> 
> 时间：2013-03-14T18:44:43.867
> 
> 标签：android, pdf

我只是下载[这个项目](https://code.google.com/p/vudroid/)，我想把它变成一个 Android 库项目。在其他 Android 应用程序中使用它。但这并不像我想的那么容易。当我把它放在其他 Android 应用程序中时，我在使用它时得到了一个空指针异常。我认为问题是因为这个项目有一些本机代码 - JNI，我必须做一些配置，但我不知道是什么配置。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:30:09.463

如果没有更多详细信息，例如您正在使用的构建系统（ant、Eclipse、Intellij、maven 等），很难确切地说应该执行哪些步骤，我认为完整堆栈跟踪的请求是正确的，但只是笼统地说您需要确保 vudroid 的 jni 目录中的代码是使用 Android NDK 构建的，您可以在此处找到：

[http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

还要确保 NDK 生成的 ARM 目标文件被您使用的任何构建系统正确打包。

看看这里的答案，以使用 ant 为例：

[使用 ANT 脚本构建 Android NDK](https://stackoverflow.com/questions/7432449/android-ndk-build-with-ant-script)

# wcf - 使用 BasicHttpBinding 时，FaultException 无法正常工作

> ID：15417679
> 
> 赞同：4
> 
> 时间：2013-03-14T18:44:49.173
> 
> 标签：wcf, wcf-binding

所以，我注意到`FaultException`当我使用`BasicHttpBinding`. 当我使用`WSHttpBinding`它的工作文件。

`FaultException`问题是，如果我在下面抛出类似的内容，则从 WCF 服务，

```
var translations = new List<FaultReasonText> { new FaultReasonText("FaultReasonText 1"), new FaultReasonText("FaultReasonText 2") };

throw new FaultException<MessageServiceFault>(MessageServiceFault.Fault1, new FaultReason(translations)); 
```

当它到达客户端时，`fault.Reason.Translations`计数为 1。这意味着第一个 ( `FaultReasonText 1`) 仅返回客户端。

但是当我使用时`WSHttpBinding`计数是 2。问题出在哪里？谁可以帮我这个事。

**当我使用BasicHttpBinding**和 **WSHttpBinding**绑定测试以下代码时，它给了我不同的结果。

```
class Program
{
    static void Main(string[] args)
    {
        try
        {
            string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
            ServiceHost host = new ServiceHost(typeof(MessageService), new Uri(baseAddress));
            host.AddServiceEndpoint(typeof(IMessageService), new WSHttpBinding(), "");
            host.Open();
            Console.WriteLine("Host opened");

            ChannelFactory<IMessageService> myChannelFactory = new ChannelFactory<IMessageService>(new WSHttpBinding(), new EndpointAddress(baseAddress));
            IMessageService channel = myChannelFactory.CreateChannel();
            var response = channel.GetMessage();
        }
        catch (FaultException fault)
        {
            fault.Reason.Translations.ToList().ForEach(i => Console.WriteLine(i.Text));
            Console.WriteLine(false);
        }
    }
}

[ServiceContract]
public interface IMessageService
{
    [OperationContract]
    [FaultContract(typeof(MessageServiceFault))]
    string GetMessage();
}

public class MessageService : IMessageService
{
    public string GetMessage()
    {
        var translations = new List<FaultReasonText> { new FaultReasonText("FaultReasonText 1"), new FaultReasonText("FaultReasonText 2") };

        throw new FaultException<MessageServiceFault>(MessageServiceFault.Fault1, new FaultReason(translations));
    }
}

[DataContract]
public enum MessageServiceFault
{
    [EnumMember]
    Fault1,

    [EnumMember]
    Fault2
} 
```

**编辑**：

但是，这篇[文章](http://blogs.msdn.com/b/drnick/archive/2006/12/14/creating-faults-part-2.aspx)说，您可以根据用户的语言设置提供许多不同的文本字符串。Translations 存储桶包含所有不同的文本字符串及其相关的文化标识符（由 FaultReasonText 绑定在一起）。当由于故障原因或翻译搜索未指定文化时，假定的文化是当前线程文化。例如，如果您想要翻译成“en-UK”，我们将首先查找“en-UK”，然后再查找“en”。如果我们仍然找不到匹配项，那么我们将采用列表中的第一个翻译，它可以是任何内容。

如果是这样，为什么如果`WsHttpBinding`它返回我 2 `FaultReasonText`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T00:15:35.820

要使用 FaultException，您需要在 Web 服务上激活 SOAP 1.2。

BasicHttpBinding 使用 SOAP 1.1，WSHttpBinding 使用 SOAP 1.2。这就是为什么它适用于 WSHttpBinding 而不适用于 BasicHttpBinding。

与其使用 BasicHttpBinding，不如使用 customBindings，带有 textMessageEncoding 和 httpTransport：

```
<customBinding>
    <binding name="simpleBinding">
        <textMessageEncoding messageVersion="Soap12" writeEncoding="utf-8" />
        <httpTransport />
    </binding>
</customBinding> 
```

如果您使用[此工具](http://webservices20.cloudapp.net/default.aspx)转换默认的 basicHttpBinding ：您将获得：

```
<!-- generated via Yaron Naveh's http://webservices20.blogspot.com/ -->
<customBinding>
    <binding name="NewBinding0">
        <textMessageEncoding MessageVersion="Soap11" />
        <httpTransport />
    </binding>
</customBinding>
<!-- generated via Yaron Naveh's http://webservices20.blogspot.com/ --> 
```

源绑定：

```
<bindings>
    <basicHttpBinding>
        <binding name="NewBinding0" />
    </basicHttpBinding>
</bindings> 
```

尝试为您的服务激活 SOAP 12，它将起作用

# r - 替换 [r] 中的 lm 系数

> ID：15417680
> 
> 赞同：2
> 
> 时间：2013-03-14T18:44:52.323
> 
> 标签：r, lm

是否可以替换 lm 对象中的系数？

我认为以下会起作用

```
# sample data 
set.seed(2157010)
x1 <- 1998:2011
x2 <- x1 + rnorm(length(x1))
y <- 3*x1 + rnorm(length(x1))
fit <- lm( y ~ x1 + x2)

# view origional coefficeints
coef(fit)

# replace coefficent with new values
fit$coef(fit$coef[2:3]) <- c(5, 1)

# view new coefficents
coef(fit) 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:51:48.767

您的代码不可重现，因为您的代码几乎没有错误。这是更正的版本，也显示了您的错误：

```
set.seed(2157010) #forgot set.
x1 <- 1998:2011
x2 <- x1 + rnorm(length(x1))
y <- 3*x2 + rnorm(length(x1)) #you had x, not x1 or x2
fit <- lm( y ~ x1 + x2)

# view original coefficients
coef(fit)
 (Intercept)           x1           x2 
260.55645444  -0.04276353   2.91272272 

# replace coefficients with new values, use whole name which is coefficients:
fit$coefficients[2:3] <- c(5, 1)

# view new coefficents
coef(fit)
(Intercept)          x1          x2 
260.5565      5.0000      1.0000 
```

所以问题是你正在使用`fit$coef`，尽管`lm`输出中组件的名称确实是`coefficients`. 缩写版本用于获取值，但不适用于设置，因为它创建了名为 的新组件`coef`，并且该`coef`函数提取了 的值`fit$coefficient`。

# matlab - 'KeyPressFcn' 函数返回一个值

> ID：15417681
> 
> 赞同：1
> 
> 时间：2013-03-14T18:44:59.327
> 
> 标签：matlab, input, figure

我正在尝试为我指定为“KeyPressFcn”的函数找到一种返回值的方法。

目前我有：

```
figure('KeyPressFcn', @myFunc); 
```

这很好，但我需要访问 myFunc 返回的值

有没有办法做到这一点？

我已经在[http://www.mathworks.com/help/matlab/ref/figure_props.html#KeyPressFcn](http://www.mathworks.com/help/matlab/ref/figure_props.html#KeyPressFcn)看过了，但是看看他们展示的例子，我仍然不明白发生了什么。

他们使用的示例有：

```
figure('KeyPressFcn', @(obj,evt)disp(evt)); 
```

它说它说函数传递了一个事件结构。那么为什么不简单：

```
figure('KeyPressFcn', @disp(evt)); 
```

函数名前面的 (obj,evt) 术语是什么意思？

什么是evt？什么是obj？有什么意义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:51:50.987

您不能在 MATLAB 中使用回调函数返回值。相反，您可以使用[`setappdata`](http://www.mathworks.com/help/matlab/ref/setappdata.html). 您可以在[`getappdata`](http://www.mathworks.com/help/matlab/ref/getappdata.html)需要时获取已设置的数据。

你可以像这样使用它们：

```
function myFunc(obj, evt)
    a = 42;
    setappdata(0, 'varName', a);
end 
```

在回调之外：

```
otherVarName = getappdata(0, 'varName'); 
```

`otherVarName`将具有 42 的值。

* * *

`obj`是正在执行其回调的对象。`evt`是事件数据。[GUIDE 文档](http://www.mathworks.com/help/matlab/creating_guis/customizing-callbacks-in-guide.html)是这样说的：

> hObject — 触发回调的对象的句柄，例如 GUI 组件。对于按钮组 SelectionChangeFcn 回调，hObject 是所选单选按钮或切换按钮的句柄。
> 
> eventdata - 由用户操作触发的事件序列，例如由 MATLAB 结构形式的组件发出的表选择（或不生成事件数据的组件的空矩阵）

在这里，`hObject`是`obj`和`eventdata`是`evt`。

假设您有一个编辑框，并且您想要获取用户编写的文本。为此，您需要编辑框的句柄。这就是`hObject`给你的。

```
function buttonCallback(hObject, eventdata)
    str = get(hObject, 'String');
end 
```

# git - Jenkins Git UnknownHostKey

> ID：15417685
> 
> 赞同：2
> 
> 时间：2013-03-14T18:45:10.027
> 
> 标签：git, jenkins

我不断收到 Jenkins 的一个奇怪错误：

```
ERROR: Problem fetching from origin / origin - could be unavailable. Continuing anyway
hudson.plugins.git.GitException: org.eclipse.jgit.api.errors.TransportException: git@127.0.0.1:healthtrustsoftware/hts_traditional.git: UnknownHostKey: 127.0.0.1\. RSA key fingerprint is 1c:f9:59:92:ab:8f:f6:2a:c6:be:43:26:5c:e7:ba:b9
    at org.jenkinsci.plugins.gitclient.JGitAPIImpl.fetch(JGitAPIImpl.java:212)
    at hudson.plugins.git.GitAPI.fetch(GitAPI.java:230)
    at hudson.plugins.git.GitSCM.fetchFrom(GitSCM.java:793)
    at hudson.plugins.git.GitSCM.access$000(GitSCM.java:57)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:976)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:942)
    at hudson.FilePath.act(FilePath.java:865)
    at hudson.FilePath.act(FilePath.java:838)
    at hudson.plugins.git.GitSCM.determineRevisionToBuild(GitSCM.java:942)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1101)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1353)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:683)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:588)
    at hudson.model.Run.execute(Run.java:1567)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:237)
Caused by: org.eclipse.jgit.api.errors.TransportException: git@127.0.0.1:healthtrustsoftware/hts_traditional.git: UnknownHostKey: 127.0.0.1\. RSA key fingerprint is 1c:f9:59:92:ab:8f:f6:2a:c6:be:43:26:5c:e7:ba:b9
    at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:137)
    at org.jenkinsci.plugins.gitclient.JGitAPIImpl.fetch(JGitAPIImpl.java:208)
    ... 17 more
Caused by: org.eclipse.jgit.errors.TransportException: git@127.0.0.1:healthtrustsoftware/hts_traditional.git: UnknownHostKey: 127.0.0.1\. RSA key fingerprint is 1c:f9:59:92:ab:8f:f6:2a:c6:be:43:26:5c:e7:ba:b9
    at org.eclipse.jgit.transport.JschConfigSessionFactory.getSession(JschConfigSessionFactory.java:142)
    at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:121)
    at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.<init>(TransportGitSsh.java:248)
    at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:147)
    at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:136)
    at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:122)
    at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1104)
    at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:128)
    ... 18 more
Caused by: com.jcraft.jsch.JSchException: UnknownHostKey: 127.0.0.1\. RSA key fingerprint is 1c:f9:59:92:ab:8f:f6:2a:c6:be:43:26:5c:e7:ba:b9
    at com.jcraft.jsch.Session.checkHost(Session.java:718)
    at com.jcraft.jsch.Session.connect(Session.java:313)
    at org.eclipse.jgit.transport.JschConfigSessionFactory.getSession(JschConfigSessionFactory.java:116)
    ... 25 more
ERROR: Could not fetch from any repository
FATAL: Could not fetch from any repository
hudson.plugins.git.GitException: Could not fetch from any repository
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:981)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:942)
    at hudson.FilePath.act(FilePath.java:865)
    at hudson.FilePath.act(FilePath.java:838)
    at hudson.plugins.git.GitSCM.determineRevisionToBuild(GitSCM.java:942)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1101)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1353)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:683)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:588)
    at hudson.model.Run.execute(Run.java:1567)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:237) 
```

当我尝试运行构建时会发生此错误。git 服务器在同一台机器上运行。我可以毫无问题地 su 到 jenkins 用户和 ssh 到 git@127.0.0.1，但由于某种原因，它会从 jenkins 抛出这个错误。这里的任何建议都会很棒。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:52:55.667

此问题存在[一个错误](https://issues.jenkins-ci.org/browse/JENKINS-17204)，其中包含评论中的修复。一个[相关问题](https://issues.jenkins-ci.org/browse/JENKINS-17083)还提到 Git 插件版本 1.1.26 不受影响。

# php - PHP更新密码脚本不起作用

> ID：15417688
> 
> 赞同：-3
> 
> 时间：2013-03-14T18:45:32.337
> 
> 标签：php, sql

我正在一个带有注册系统的网站上工作。在 userCP 中，您可以更改您的密码。我为它制作了这个脚本，但它不起作用。有人可以帮助我吗？当我更改密码时，它没有给出错误，但它只是没有更新它。

PHP代码：

```
<?php 
    if (isset($_POST['updatePassBtn']))
    {
        $cpassword = $_POST['cpassword'];
        $npassword = $_POST['npassword'];
        $rpassword = $_POST['rpassword'];
        if (!empty($cpassword) && !empty($npassword) && !empty($rpassword))
        {
            if ($npassword == $rpassword)
            {
                if (mysql_num_rows(mysql_query("SELECT * FROM `users` WHERE `username` = '".$_SESSION['username']."' AND `password` = '".SHA1($cpassword)."'")))
                {
                    mysql_query("UPDATE `users` SET `password` = '".SHA1($npassword)."' WHERE `username` = '".$_SESSION['username']."' AND `ID` = '".$_SESSION['id']."'");
                    echo '<div class="nNote nSuccess hideit"><p><strong style="color:green;">SUCCESS: </strong>Password Has Been Updated</p></div>';
                }
                else
                {
                    echo '<div class="nNote nFailure hideit"><p><strong style="color:red;">FAILURE: </strong>Current Password is incorrect.</p></div>';
                }
            }
            else
            {
                echo '<div class="nNote nFailure hideit"><p><strong style="color:red;">FAILURE: </strong>New Passwords Did Not Match.</p></div>';
            }
        }
        else
        {
            echo '<div class="nNote nFailure hideit"><p><strong style="color:red;">FAILURE: </strong>Please fill in all fields</p></div>';
        }
    }
?> 
```

我的表格：

```
<form action="" class="form" method="POST">
    <fieldset>
        <label></label>
        <input name="cpassword" type="text" value="Current Password" onfocus="this.value = (this.value=='Current Password')? '' : this.value;" onblur="if(this.value == ''){this.value='Current Password';}"/>
    </fieldset>
    <fieldset>
        <label></label>
        <input name="npassword" type="text" value="New Password" onfocus="this.value = (this.value=='New Password')? '' : this.value;" onblur="if(this.value == ''){this.value='New Password';}"/>
    </fieldset>
    <fieldset>
        <label></label>
        <input name="rpassword" type="text" value="Repeat Password" onfocus="this.value = (this.value=='Repeat Password')? '' : this.value;" onblur="if(this.value == ''){this.value='Repeat Password';}"/>
        <input type="submit" value="Update" name="updatePassBtn"/>
    </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:53:33.283

您计算与用户名和密码匹配的行数，但是当您更新时，您还具有它必须匹配 $_SESSION['id'] 的条件。如果您的会话不包含正确的“id”，那么您的更新可能不会匹配任何行。

在报告更新成功之前，您应该检查[mysql_affected_rows() 。](http://www.php.net/manual/en/function.mysql-affected-rows.php)

您还应该检查 mysql 函数是否返回成功（正如@RocketHazmat 在评论中建议的那样）。许多返回`false`错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T18:52:36.203

```
 mysql_query("UPDATE `users` SET `password` = '".SHA1($npassword)."' WHERE `username` = '".$_SESSION['username']."' AND `ID` = '".$_SESSION['id']."'"); 
```

你已经设置了 mysql_query 但我没有看到你执行它

# c++ - c ++ #define和连接大小写（我正在使用gcc）

> ID：15417696
> 
> 赞同：2
> 
> 时间：2013-03-14T18:46:07.937
> 
> 标签：c++, c, gcc

我有

```
#define NAME(value) my ## value ## value 
```

当我这样做时`NAME(1)`，它是`my1value`，这很好！

但我想将变量传递给`NAME()`，例如

```
for(int i=0;i<10;i++)
{
    NAME(i);
    ...
} 
```

但不幸的是，它变成了`myivalue`，但我想要`my0value`，`my1value`等等。

我应该改变什么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:48:35.860

宏在编译时被替换（实际上，它们甚至在“真正的”编译开始之前就被预处理器替换），它是纯**文本**处理。

你不能指望你的宏根据*变量*的值来计算它的展开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:32:48.670

宏只在编译前进行文本替换。这与对代码执行“查找和替换”基本相同。循环在运行时执行——所以这没有任何意义。

但是无论如何要回答您的问题....您可以使用（编译时）宏“循环”：

```
#include <iostream>

#define NAME(v) my##v##value
#define LOOP10 NAME(0), NAME(1), NAME(2), NAME(3), NAME(4), NAME(5), NAME(6), NAME(7), NAME(8), NAME(9)

int main()
{
    int LOOP10;    // example usage
} 
```

据我所知，boost 支持预处理器循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:15:11.407

**##**是预处理器指令

*##将***##**之前的 内容与 #define 语句中的内容连接起来

正如你所说**的“#define NAME(value) my ## value ## value”**这变成了一个错误。它的意思是“myii”而不是 myivalue

# r - R 中的数据转换

> ID：15417698
> 
> 赞同：3
> 
> 时间：2013-03-14T18:46:18.060
> 
> 标签：r

我需要以不同的方式查看数据框中的数据。问题来了。。

我有一个数据框如下

```
Person  Item  BuyOrSell
1        a    B
1        b    S
1        a    S
2        d    B
3        a    S
3        e    S 
```

我需要把它变成这种方式。显示个人对单个项目进行的所有交易的总和。

```
Person   a   b    d   e
1        2   1    0   0
2        0   0    1   0
3        1   0    0   1 
```

我能够通过使用

`table(Person,Item)` 在 R 中

我的新要求是查看数据如下。显示个人在按交易类型（B 或 S）细分的单个项目上进行的所有交易的总和

```
Person    aB   aS   bB   bS   dB   dS   eB   eS
1          1    1    0    1    0    0   0     0
2          0    0    0    0    1    0   0     0
3          1    0    0    0    0    0   0     1 
```

所以我创建了一个新列并附加了 Item 和 BuyOrSell 的值。

```
df$newcol<-paste(Item,"-",BuyOrSell,sep="")
table(Person,newcol) 
```

并且能够达到上述的效果。

R中有更好的方法来进行这种类型的转换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:03:54.697

您的方式（通过创建新列`paste`）可能是最简单的。你也可以这样做：

```
require(reshape2)
dcast(Person~Item+BuyOrSell,data=df,fun.aggregate=length,drop=FALSE) 
```

# android - 具有环绕效果的 MediaPlayer？

> ID：15417703
> 
> 赞同：6
> 
> 时间：2013-03-14T18:46:32.527
> 
> 标签：android, android-mediaplayer

`MediaPlayer`是否可以像默认播放器（至少在三星设备上）那样播放曲目时强制 android模拟 5.1 环绕声？感谢任何有用的链接和建议，花了很多时间寻找解决方案，但仍然一无所获。

# sql - 如何在 SQL 中透视数据

> ID：15417705
> 
> 赞同：-1
> 
> 时间：2013-03-14T18:46:34.910
> 
> 标签：sql, pivot

我有看起来很像这样的数据（3 列数据），不幸的是我无法正确显示它

```
NCR NO  LU_NAME           KEY_REF
100001  Project           PROJECT_ID=ID#^
100001  SupplierInfo      SUPPLIER_ID=UNIQUESUPPLIERNUMBER^
100001  PurchaseOrder     ORDER_NO=UNIQUEORDERNO^
100196  PurchaseReceipt   UNIQUE PURCHASE RECEIPT
100511  InventoryPart     CONTRACT=UNIQUECONTRACTNO 
```

我想要的是为每个记录一个记录，为,等`NCR number`提供一列数据，其中包含唯一的. 假设表名是. 有人可以协助代码执行此操作吗？ `Project``SupplierInfo``Key_Ref``OC`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:53:29.173

这种类型的数据转换称为数据转换*，*某些数据库产品具有可以为您执行此操作的功能。

如果您在没有数据透视函数的数据库中工作，则可以使用带有`CASE`表达式的聚合函数：

```
select ncr_no,
  max(case when LU_NAME = 'Project' then KEY_REF end) Project,
  max(case when LU_NAME = 'SupplierInfo' then KEY_REF end) SupplierInfo,
  max(case when LU_NAME = 'PurchaseOrder' then KEY_REF end) PurchaseOrder,
  max(case when LU_NAME = 'PurchaseReceipt' then KEY_REF end) PurchaseReceipt,
  max(case when LU_NAME = 'InventoryPart' then KEY_REF end) InventoryPart
from yourtable
group by ncr_no 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/419d9/1)。

上述方法适用于已知数量或有限数量的`LU_NAME`值，如果您有未知数量，那么您将需要实现动态 SQL，但该代码将根据您的数据库而有所不同。

# sql - SQL获取特定行中具有特定值的列数

> ID：15417706
> 
> 赞同：2
> 
> 时间：2013-03-14T18:46:41.630
> 
> 标签：sql, sqlite, count, command, multiple-columns

我知道我可以通过使用 COUNT(*) 函数来获取特定列中具有特定值的行数，但我想找到特定行中具有特定值的列数。关于如何做到这一点的任何建议？

我会发布一个到目前为止我已经尝试过的例子，但我完全迷失了这个......

编辑 1 - 这是一些示例数据和预期结果：

表 - 跟踪单 | u1 | u1付费 | u2 | u2付费 | u3 | u3付费 | u4 | u4付费 | u5 | u5付费

所以我想做的是，当我使用 trackbill 选择特定行时，我想浏览它的所有列，看看哪些列的值为“false”。因此，如果 u1paid 和 u3paid 是唯一的值为 false 的列，则返回的答案应该是 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:12:42.200

我认为您的表结构如下：

```
TABLE trackbill
( u1     NUMBER(10,2)
, u1paid VARCHAR(10)  -- contains values 'Yes' or 'No'
, u2     NUMBER(10,2)
, u2paid VARCHAR(10)  -- contains values 'Yes' or 'No'
, u3     NUMBER(10,2)
, u3paid VARCHAR(10)  -- contains values 'Yes' or 'No'
, u4     NUMBER(10,2)
, u4paid VARCHAR(30)  -- contains values 'Yes' or 'No'
, u5     NUMBER(10,2)
, u5paid VARCHAR(30)  -- contains values 'Yes' or 'No'
) 
```

因此，要检查列中有多少“是” `uxpaid`，我们可以将 SQL 编写为：

```
SELECT u1, u1paid, u2, u2paid, u3, u3pai, u4, u4paid, u5, u5paid
       , CASE u1paid WHEN 'Yes' THEN 1 ELSE 0 END
       + CASE u2paid WHEN 'Yes' THEN 1 ELSE 0 END
       + CASE u3paid WHEN 'Yes' THEN 1 ELSE 0 END
       + CASE u4paid WHEN 'Yes' THEN 1 ELSE 0 END
       + CASE u5paid WHEN 'Yes' THEN 1 ELSE 0 END
       AS no_of_paid_columns
  FROM trackbill 
```

因为我不知道，所以我无法帮助您使用 SQLite。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:10:23.937

如果您的列是布尔值，请尝试简单地添加列所以您的计数是 u1paid + u2paid + u3paid + u4paid。根据语法，您可能需要稍微调整一下，但只要错误条目为 0，它就可以成为您计数的一种方法。

如果列不是 bool，您仍然可以对返回 bool 的每个字段进行比较，具体取决于它是否具有您要查找的值，然后添加那些为 true 的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:11:09.630

最简单的方法是*取消透视*数据。您可以使用 a`CROSS JOIN`创建一个虚拟表：

```
select trackbill,
  count(*) Total
from
(
  select t.trackbill,
    case c.col
      when 'u1paid' then u1paid
      when 'u2paid' then u2paid
      when 'u3paid' then u3paid
      when 'u4paid' then u4paid
      when 'u5paid' then u5paid
    end as data
  from yourtable t
  cross join
  (
    select 'u1paid' as col
    union all select 'u2paid'
    union all select 'u3paid'
    union all select 'u4paid'
    union all select 'u5paid'
  ) c
) src
where data = 'false'
group by trackbill 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/38507/4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T19:19:40.783

你说如果它是垂直格式你已经知道怎么做......

所以这是你的水平表垂直：

```
SELECT Trackbill, u1paid FROM table
UNION
SELECT Trackbill, u2paid FROM table
UNION
SELECT Trackbill, u3paid FROM table
UNION
SELECT Trackbill, u4paid FROM table
UNION
SELECT Trackbill, u5paid FROM table 
```

您可以将其用作派生表来编写另一个选择。

# c++ - Cedet - 看不到所有功能原型

> ID：15417708
> 
> 赞同：1
> 
> 时间：2013-03-14T18:46:46.457
> 
> 标签：c++, autocomplete, semantics, cedet

`CEDET`我开始使用 Alex 的教程“CEDET 的简单介绍”来管理我的 c++ 项目并进行配置，并且几乎所有内容都正常运行。

然而，虽然我已经`semantic-idle-completion-mode`积极地查看了我的函数原型，但它并没有按预期工作。

更准确地说，当我想调用具有多个可能构造函数的类的多态方法或构造函数时，迷你缓冲区只显示一个可能的定义。

这是一个示例，我尝试调用 SrmSkeleton 类的 3 个构造函数中的一个。

> 无效 createChainsFromSkel() {
> 
> > 矢量效应器 = mySkeleton->getEndEffectors();
> > 
> > mySkeleton = 新 SmrSkeleton(

唯一的原型`Semantic`建议我是

> SmrSkeleton SmrSkeleon (string _name)

但是，如果使用 `Mx semantic-analize-current-context，这就是我得到的

> 上下文类型：#
> 
> 界限：无
> 
> 功能：SmrSkeleton SmrSkeleton（字符串_name）
> 
> ```
>  SmrSkeleton SmrSkeleton (SmrModeType _mode,SmrTransformationOrderType _rotOrder,string _name)
>      SmrSkeleton SmrSkeleton (const SmrSkeleton& _skel)
>       virtual void ~SmrSkeleton (void) 
> ```
> 
> 参数索引：1
> 
> 论据：无效
> 
> 前缀类：'function'variable'type

列出了 3 个现有的构造函数，但不建议使用。当我尝试使用`M-x semantic-ia-complete-symbol`emacs 时完全停止。

我想知道为什么会这样`CEDET`工作，如果有什么问题（更改我的 cedet 配置，重新定义一些变量......）我可以解决这个奇怪的行为。

# asp.net-mvc - .where 中的 LINQ 自定义函数

> ID：15417714
> 
> 赞同：1
> 
> 时间：2013-03-14T18:47:01.290
> 
> 标签：asp.net-mvc, linq, entity-framework

我可以，如果可以的话，如何编写这样的 LINQ 语句：

```
public IQueryable<Advert> SearchSimilarAdverst(string query)
    {
        Levenshtein compute = new Levenshtein();
        return _db.Adverts.Where(a => a.IsActive  && 
              (compute.FindSimilarity(a.Name, query) <= 2));
    } 
```

谢谢

**编辑**

我已经厌倦了[Jeffery](https://stackoverflow.com/users/212566/jeffery-khan)建议的解决方案并且它有效，但是当我尝试这行代码时，我得到了 EntityCommandExecutionException，有人知道为什么吗？

```
adverts.Where(a => a.WhoAmILookingForTags.Any
             (t => compute.FindSimilarity(t.Name,query) <= 2)); 
```

标签和广告与多对多关系相连，WhoAmILookingForTags 是标签列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:50:53.070

EF 将无法转换`compute.FindSimilarity(a.Name, query)`为 SQL，因此您将不得不承受性能损失并执行以下操作。

```
public IEnumerable<Advert> SearchSimilarAdverst(string query)
{
    Levenshtein compute = new Levenshtein();
    var adverts = _db.Adverts.Where(a => a.IsActive).ToList();
    return adverts.Where(a => compute.FindSimilarity(a.Name, query) <= 2));
} 
```

*注意方法的返回类型也需要改变以反映返回类型*

如下所述，`FindSimilarity`由于执行延迟，应在过滤使用之前强制运行查询。 `query.ToList()`是众多选择之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:51:22.177

简而言之，不，因为 EF 需要能够将您的 Linq 谓词转换为 T-SQL（或您的 RDBMS 使用的任何 SQL 方言）。仅支持 .NET BCL 函数的子集（例如`String.Contains`自定义用户代码是正确的）。

对于复杂的谓词，我建议您手动编写自己的 SQL - 您还将获得更好的性能，EF 在生成 SQL 时可能会很慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:51:02.860

我希望我错了，但我不相信你会被允许在 Linq-to-Entities 查询中这样做。在这些类型的 LINQ 查询中，它必须将`Where`函数中的所有内容转换为 SQL 语句，以便在底层数据库上运行。由于您的方法不是 SQL 方面的东西，因此在您尝试此操作时会导致异常。

对于常规的 LINQ 查询（即在所有内容都已放入内存之后），完成此操作应该没有问题。

您也可以尝试一下，看看它是否有效...

# c# - 循环通过 XmlNodeList 然后为每个启动新线程

> ID：15417717
> 
> 赞同：0
> 
> 时间：2013-03-14T18:47:07.173
> 
> 标签：c#

我正在尝试遍历 XmlNodeList，从中获取一些数据，然后启动一个使用该数据的新线程。

这是我到目前为止所拥有的：

```
 public void startRun(string kwd)
    {
        doRun run = new doRun();
        run.run(kwd);
    }

    private void startBtn_Click(object sender, EventArgs e)
    {
        XmlDocument searches = new XmlDocument();
        searches.Load("data\\Searches.xml");

        XmlNodeList search = searches.SelectNodes("Searches/search");
        var nodeCount = search.Count;

        for(var i = 0; i < nodeCount; i++)
        {
            string kwd = System.Uri.EscapeDataString(search[i].SelectSingleNode("query").InnerText);
            doRun run = new doRun(this);
            Thread newThread = new Thread( new ThreadStart( startRun(kwd) ) );
        }
    } 
```

这根本行不通。Visual Studio`Method name expected`对这一行说：

`Thread newThread = new Thread( new ThreadStart( startRun(kwd) ) );`

如何将此参数传递给新的主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:49:24.733

您的方法有几个问题：

首先，您创建委托的语法是错误的：`new ThreadStart(startRun(kwd))`不是有效的语法。正确的语法是：`new ThreadStart(startRun)`- 只使用方法名。

然后，如果您希望将参数传递给线程，您应该使用[ParameterizedThreadStart](http://msdn.microsoft.com/en-us/library/system.threading.parameterizedthreadstart.aspx)委托而不是[ThreadStart](http://msdn.microsoft.com/en-us/library/system.threading.threadstart.aspx)委托。

```
Thread newThread = new Thread( new ParameterizedThreadStart(startRun)); 
```

并通过调用来启动线程`Start(...)`：

```
newThread.Start(kwd); 
```

并且签名`startRun`应该在参数中使用对象而不是字符串：

```
public void startRun(object kwdObject) 
```

在里面你可以`kwd`使用`string`它：

```
public void startRun(object kwdObject)
{
    string kwd = (string)kwdObject;
    // continue to do work.. 
```

现在，就 的实现而言`startRun`，方法本身似乎是多余的。如果您有一个名为的类`doRun`（顺便说一句，最好将类名的第一个字母大写） - 那么为什么不直接使用 doRun 的 run 方法作为 ThreadStart 委托。除非 doRun.run(..) 不接受 oject 在这种情况下，您创建*转发*函数的方法是可以的。

```
doRun run = new doRun();
run.run(kwd); 
```

* * *

**第2部分**

照原样解决代码中的问题后，如果您正在执行的任务不是长时间运行的任务（即，如果您期望几秒钟内完成的任务）。

为此，您可以像这样修改代码：

```
 for(var i = 0; i < nodeCount; i++)
  {
      string kwd = System.Uri.EscapeDataString(search[i].SelectSingleNode("query").InnerText);
      ThreadPool.QueUserWorkItem((WaitCallback)startRun, kwd);
  } 
```

* * *

**第 3 部分**

一个完整的例子，使用 ThreadPool 线程：

```
public void startRun(object kwd)
{
    doRun run = new doRun();
    run.run((string)kwd);
}

private void startBtn_Click(object sender, EventArgs e)
{
    XmlDocument searches = new XmlDocument();
    searches.Load("data\\Searches.xml");

    XmlNodeList search = searches.SelectNodes("Searches/search");
    var nodeCount = search.Count;

    for(var i = 0; i < nodeCount; i++)
    {
        string kwd = System.Uri.EscapeDataString(search[i].SelectSingleNode("query").InnerText);

        ThreadPool.QueueUserWorkItem((WaitCallback)startRun, kwd);
        // replace line above with the following two lines if you want to use regular threads
        //  Thread newThread = new Thread((ParameterizedThreadStart)startRun);
        //  newThread.Start(kwd);
    }
} 
```

# javascript - 在独立的 Web 应用程序中处理 javascript 链接

> ID：15417725
> 
> 赞同：1
> 
> 时间：2013-03-14T18:47:52.850
> 
> 标签：javascript, pinterest, iphone-standalone-web-app

我发现这个 javascript 可以将移动网站变成一个独立的网络应用程序。除了 Pinterest Pin 按钮外，它的效果很好，我相信它是一个 javascript 链接。我不精通 javascript，所以如果有人能告诉我如何添加到此代码以在 safari 中打开 pinterest 链接或允许用户在独立应用程序中固定，我将不胜感激。谢谢。

这是我正在使用的代码。

```
(function(a,b,c){
    if(c in b && b[c]){
        var d,e=a.location,
        f=/^(a|html)$/i;
        a.addEventListener("click", function(a){
            d=a.target;
            while(!f.test(d.nodeName)) d=d.parentNode;
            "href" in d && (chref=d.href).replace(e.href,"").indexOf("#") && (!/^[a-z\+\.\-]+:/i.test(chref) || chref.indexOf(e.protocol+"//"+e.host)===0) && (a.preventDefault(),e.href=d.href)
        },!1)
    }
})(document,window.navigator,"standalone"); 
```

# ipad - 加载页面时 ipad 电影暂停而不是播放

> ID：15417726
> 
> 赞同：0
> 
> 时间：2013-03-14T18:47:55.067
> 
> 标签：ipad, mpmovieplayercontroller

我有一部电影可以正常加载并且可以正常播放，但它会在页面加载后立即播放。我希望它以暂停状态加载，要求用户按播放观看。

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSString *moviePath = [[NSBundle mainBundle] pathForResource:@"iobserve1" ofType:@"mov"];
NSURL *movieURL = [NSURL fileURLWithPath:moviePath];
moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
moviePlayerController.view.frame = CGRectMake(60, 44, 900, 656);  // player's frame must match parent's
[self.movieView addSubview:moviePlayerController.view];
moviePlayerController.controlStyle = MPMovieControlStyleEmbedded;
[moviePlayerController prepareToPlay];
[moviePlayerController pause];
} 
```

最后一行的停顿似乎没有做任何事情。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:12:59.237

将您在上面编写的代码简介放在 viewwillappear 中。然后像这样在最后添加播放：

```
-(void) viewWillAppear: (BOOL) animated {
  NSString *moviePath = [[NSBundle mainBundle] pathForResource:@"iobserve1" ofType:@"mov"];
  NSURL *movieURL = [NSURL fileURLWithPath:moviePath];
  moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
  moviePlayerController.view.frame = CGRectMake(60, 44, 900, 656);  // player's frame must match parent's
  [self.movieView addSubview:moviePlayerController.view];
  moviePlayerController.controlStyle = MPMovieControlStyleEmbedded;
  [moviePlayerController prepareToPlay];
  [moviePlayerController play];
 } 
```

最后。

在 viewdidappear 中做一个

```
 -(void) viewDidAppear: (BOOL) animated {
    [moviePlayerController pause];
  } 
```

记得从 viewDidLoad 中删除代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:05:05.513

您可能想尝试将`MPMoviePlayerController`属性设置`shouldAutoplay`为`NO`.

`prepareToPlay`在您的通话前添加以下行；

```
moviewPlayerController.shouldAutoplay = NO; 
```

* * *

从参考：

```
shouldAutoplay 
```

一个布尔值，指示电影是否应自动开始播放。

```
@property (nonatomic) BOOL shouldAutoplay 
```

***讨论***

> 此属性的默认值为 YES。此属性确定当有足够的缓冲数据以确保不间断播放时，是否自动开始播放基于网络的内容。

可用性 适用于 iOS 3.2 及更高版本。宣布于

# angularjs - 在 angular-ui 路由器中注入 $element

> ID：15417732
> 
> 赞同：3
> 
> 时间：2013-03-14T18:48:15.933
> 
> 标签：angularjs, angular-ui

我正在尝试从控制器访问 dom 元素（$element），但收到“未知提供者”错误（未知提供者：$elementProvider <- $element）

这是代码：

```
 CatalogController = function($scope, $state,$http,$element) {
    console.log('CatalogController',$scope.$id,'parent:',$scope.$parent.$id);

}
appModule.config(function($stateProvider) {
    $stateProvider.state('catalog1', {
        url: '/catalog',
        views: {
            'catview':{
                templateUrl: 'partials/catalog.html',
                controller: [        '$scope', '$state','$http','$element',CatalogController ]
            }
        }
    });
}) 
```

$http 的注入很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:32:23.437

我很高兴地宣布 ui-router 的人们接受了我的更改/拉取请求以及我的原因解释。正式支持元素和属性的注入：[https ://github.com/angular-ui/ui-router/tree/master/src](https://github.com/angular-ui/ui-router/tree/master/src)

我要感谢所有参与这场热烈讨论的人

编辑：一年多后，它似乎被接受了：[https ://github.com/angular-ui/ui-router/issues/1657](https://github.com/angular-ui/ui-router/issues/1657)

# python - 如何从 Python 上现有列表的一部分创建列表？

> ID：15417737
> 
> 赞同：0
> 
> 时间：2013-03-14T18:48:25.467
> 
> 标签：python, list

我有一个包含 6899 个数字的列表，从中我必须创建一个新列表，其中仅包含从 i=3200 到 i=4121 的 te 项。有点像复制和粘贴。

我尝试了以下方法：

```
e = a[3200<i<4121] 
```

作为“e”新列表和“a”原始列表，但是这段代码返回一个浮点数，而不是一个新列表，有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T18:49:15.157

您可以使用`slice`符号：

```
e = a[3200:4121] 
```

还有一个可选`step`参数：

```
e = a[3200:4121:1] 
```

这完全等同于上述内容，但您可以使用该表单获取（例如）从索引 3200 开始并以索引 4121（不包括在内）结束的所有其他元素：

```
e = a[3200:4121:2] 
```

请注意，“start”参数是**包含**的，但“stop”参数是**排除**的。所以， `lst[n:m]`会给你一个列表，盯着索引切出索引`n`到`m-1`.

# javascript - 使用 javascript 突出显示 html 文本

> ID：15417739
> 
> 赞同：2
> 
> 时间：2013-03-14T18:48:29.903
> 
> 标签：javascript, jquery, highlight

我正在开发一个在 div 中突出显示 html 的功能，我之前已经检查了一些答案，但我没有找到任何解决方案。问题是，我实际上拥有的功能不能同时使用 2 对 html 标签，例如：

有这个html代码：

```
<span>Les malalties vasculars cerebrals (MVC)
      conegudes també com a <i>feridures o ictus</i> representen la tercera causa de 
```

而这个函数使用jquery

```
jQuery.fn.highlight = function(pat) {
 function innerHighlight(node, pat) {
  var skip = 0;
  if (node.nodeType == 3) {
   var pos = node.data.toUpperCase().indexOf(pat);
   if (pos >= 0) {
    var spannode = document.createElement('span');
    spannode.className = 'highlight';
    var middlebit = node.splitText(pos);
    var endbit = middlebit.splitText(pat.length);
    var middleclone = middlebit.cloneNode(true);
    spannode.appendChild(middleclone);
    middlebit.parentNode.replaceChild(spannode, middlebit);
    skip = 1;
   }
  }
  else if (node.nodeType == 1 && node.childNodes && !/(script|style)/i.test(node.tagName)) {
   for (var i = 0; i < node.childNodes.length; ++i) {
    i += innerHighlight(node.childNodes[i], pat);
   }
  }
  return skip;
 }
 return this.length && pat && pat.length ? this.each(function() {
  innerHighlight(this, pat.toUpperCase());
 }) : this;
};

jQuery.fn.removeHighlight = function() {
 return this.find("span.highlight").each(function() {
  this.parentNode.firstChild.nodeName;
  with (this.parentNode) {
   replaceChild(this.firstChild, this);
   normalize();
  }
 }).end();
}; 
```

1.  项目清单

如果我搜索：“Les”效果**很好**。

如果我搜索：“feridures”也**可以**。

但如果我搜索“com a feridures”，该功能不会突出显示我的文字。

这是我完成申请唯一需要做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:12:50.740

问题不在于 HTML 标签，但它与两个标签无关。实际上，您的应用程序正在搜索文字文本，这意味着它会找到“com a feridures”而不是“com a feridures”，因此没有匹配项。

您可以先使用 jQuery 将 HTML 从 span 中剥离出来，然后它将起作用。

```
$(".highlight").html( $(".highlight").text() ); 
```

示例：http: [//jsfiddle.net/calder12/nJ5mQ/](http://jsfiddle.net/calder12/nJ5mQ/)

# android - NullPointerException: 锁定 == null

> ID：15417741
> 
> 赞同：4
> 
> 时间：2013-03-14T18:48:31.073
> 
> 标签：android, multithreading, file

我在活动中遇到了一个问题：我想从`Ordinazioni.txt`上一个活动中正确写入的文件中读取所有文件，将它们放入一个并将其中的`ArrayList`每个元素写入 MySQL 数据库。

现在，PHP 文件和文件是正确的，我已经单独检查了它和它们的工作，但此时 LogCat 阻止了应用程序。所以，这里是活动和 LogCat。

```
public class AggiungiProdotto extends Activity {

    TextView tv1;
    private static String indirizzo ="http://10.0.2.2/tesina/Aggiungi_Ordinazione";
    FileInputStream in = null;
    InputStreamReader inputStreamReader = new InputStreamReader(in);
    BufferedReader bufferedReader = new BufferedReader(inputStreamReader);
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(indirizzo);
    StringBuilder sb = new StringBuilder();
    int Tavolo = 1;
    String line;
    public ArrayList<String> Lettura = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.aggiungi_prodotto);
        Invio();
    }

    public void Invio() {
        try {
            FileInputStream in = openFileInput("Ordinazioni.txt");
            while ((line = bufferedReader.readLine()) != null) {
                Lettura.add(line);
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        Thread thread = new Thread() {

            @Override
            public void run() {
                try {
                    for (int i = 0; i < Lettura.size(); i++) {
                        List<NameValuePair> Comanda = new ArrayList<NameValuePair>(2);
                        Comanda.add(new BasicNameValuePair("Nome", Lettura.get(i)));
                        Comanda.add(new BasicNameValuePair("Tavolo",
                                Integer.toString(Tavolo).trim()));

                        httppost.setEntity(new UrlEncodedFormEntity(Comanda));

                        ResponseHandler<String> responseHandler =
                                new BasicResponseHandler();
                        final String Risposta = httpclient.execute(httppost,
                                responseHandler);
                        tv1 = (TextView) findViewById(R.id.tv1);
                        tv1.setText("Response : " + Risposta);
                    }
                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        };

        thread.start();
    }
} 
```

LogCat 错误：

```
03-14 18:40:42.028: E/AndroidRuntime(772): FATAL EXCEPTION: main
03-14 18:40:42.028: E/AndroidRuntime(772): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.gabriele.tesina/com.gabriele.tesina.AggiungiProdotto}: java.lang.NullPointerException: lock == null
03-14 18:40:42.028: E/AndroidRuntime(772):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
03-14 18:40:42.028: E/AndroidRuntime(772):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-14 18:40:42.028: E/AndroidRuntime(772):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-14 18:40:42.028: E/AndroidRuntime(772):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-14 18:40:42.028: E/AndroidRuntime(772):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-14 18:40:42.028: E/AndroidRuntime(772):  at android.os.Looper.loop(Looper.java:137)
03-14 18:40:42.028: E/AndroidRuntime(772):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-14 18:40:42.028: E/AndroidRuntime(772):  at java.lang.reflect.Method.invokeNative(Native Method)
03-14 18:40:42.028: E/AndroidRuntime(772):  at java.lang.reflect.Method.invoke(Method.java:511)
03-14 18:40:42.028: E/AndroidRuntime(772):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-14 18:40:42.028: E/AndroidRuntime(772):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-14 18:40:42.028: E/AndroidRuntime(772):  at dalvik.system.NativeStart.main(Native Method)
03-14 18:40:42.028: E/AndroidRuntime(772): Caused by: java.lang.NullPointerException: lock == null
03-14 18:40:42.028: E/AndroidRuntime(772):  at java.io.Reader.<init>(Reader.java:64)
03-14 18:40:42.028: E/AndroidRuntime(772):  at java.io.InputStreamReader.<init>(InputStreamReader.java:122)
03-14 18:40:42.028: E/AndroidRuntime(772):  at java.io.InputStreamReader.<init>(InputStreamReader.java:59)
03-14 18:40:42.028: E/AndroidRuntime(772):  at com.gabriele.tesina.AggiungiProdotto.<init>(AggiungiProdotto.java:32)
03-14 18:40:42.028: E/AndroidRuntime(772):  at java.lang.Class.newInstanceImpl(Native Method)
03-14 18:40:42.028: E/AndroidRuntime(772):  at java.lang.Class.newInstance(Class.java:1319)
03-14 18:40:42.028: E/AndroidRuntime(772):  at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-14 18:40:42.028: E/AndroidRuntime(772):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 
```

我在做什么错？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T18:53:23.690

```
FileInputStream in = null;
InputStreamReader inputStreamReader = new InputStreamReader(in); 
```

我认为这是问题所在：您将FileInputStream**添加**`NULL`到**InputStreamReader**中。

此外，您的代码更混乱。看这里

```
tv1 = (TextView) findViewById(R.id.tv1);
tv1.setText("Response : " + Risposta); 
```

您正在尝试从**工作线程更新****UI** ，因此如果您要解决第一个问题，下一个问题就是这个。

 ****您无法使用来自工作线程的 UI 进行操作**。这不被允许。只有**起源（UI）线程**可以使用 UI 进行操作。

因此，如果你想让它工作，你需要使用已经在 UI 线程而不是普通线程上运行的[runOnUiThread() 。](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable))

**注意：**为了改进您的代码，我建议您使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)通过 Internet 执行操作，并在某些操作期间/之后执行 UI 更新。AsyncTask 被指定用于像你这样的事情。如果您以前从未实施过，这里是[Lars Vogel 的好教程。](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:53:05.033

除了指出的其他问题外，请注意您正在尝试`TextView`从新线程更新您的。Android 的 UI 系统不是线程安全的，所以下面一行是另一个问题：

```
tv1.setText("Response : " + Risposta);' 
```

[您可以使用docs](http://developer.android.com/guide/faq/commontasks.html#threading)中的此示例解决此问题，而无需对代码进行太多重组。它使用`Handler`该类返回 UI 线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-19T16:37:40.277

我收到了类似的错误。我遇到的问题是我在我的 Mac 上运行了两个 Android Studio 实例，当我在设备上运行应用程序时它们相互冲突。

在我关闭了一个 Android Studio 实例后，我能够毫无问题地运行该应用程序。**

# java - Java中的类型安全如何防止隐式转换？

> ID：15417743
> 
> 赞同：4
> 
> 时间：2013-03-14T18:48:34.347
> 
> 标签：java

假设一个方法如下：

```
void foo(int i)
{
} 
```

有没有办法使以下调用非法或产生异常？

```
foo((short)3); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T18:50:25.123

也许这个？

```
class AClass {
  void foo(int x) { /* do work */ }
  void foo(short x) { throw new IllegalArgumentException(); }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T18:54:52.853

Bruno 的重载将起作用，但如果您正在考虑防止其他类型的转换，您总是可以将整数装箱到它的 Object 类中：

```
void foo(Integer i) {
    // handle data normally
} 
```

这将阻止您向它发送简短的参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T18:52:27.630

此解决方案可能不是您正在寻找的，但我会使用**函数重载**来创建一个版本`void foo(int)`，它像正常一样处理数据，另一个版本的签名`void foo(short)`像处理数据一样是错误的。例如：

```
void foo(int i) {
    // handle data normally
}

void foo(short s) {
    throw new IllegalArgumentException("your message here");
} 
```

# php - 在 Yii 框架中创建删除页面表单？

> ID：15417748
> 
> 赞同：0
> 
> 时间：2013-03-14T18:48:39.887
> 
> 标签：php, html, forms, yii

我知道通常您只会使用管理员中的集成 CRUD 删除按钮，但是出于我的目的，我需要一个实际的删除页面，该页面只有一个字段中的 id 和一个提交按钮，但到目前为止它只产生错误视图所以任何帮助表示赞赏。我试图创建它，就像我的创建和更新页面一样，请看下面的代码：

**删除页面的链接：**

```
<?php echo CHtml::link('Delete Article', array('delete', 'id'=>$pageid)); ?> 
```

**它产生的链接：**

```
http://local/..../Yii/news/index.php/delete?id=3 
```

**控制器：**

```
public function actionDelete($id)
{
$model=$this->loadModel($id);

    if(isset($_POST['news_model']))
    {
        $model->attributes=$_POST['news_model'];
        if($model->save())
            $this->redirect('index');
    }

    $this->render(array('delete', array(
        'model'=>$model,
    ));
} 
```

**删除.php：**

```
<h2>Delete a news item</h2>

<?php echo $this->renderPartial('_form2', array('model'=>$model)); ?> 
```

**_form2.php**

```
<?php echo $form->errorSummary($model); ?>

<?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'news-model-form',
'enableAjaxValidation'=>false,
)); ?>

<div class="form">

<div class="row">
    <?php echo $form->labelEx($model,'id'); ?><br>
    <?php echo $form->textField($model,'id',array('size'=>50,'maxlength'=>128)); ?>
    <?php echo $form->error($model,'id'); ?>
</div><br>

<div class="row buttons">
    <?php echo CHtml::submitButton($model->isNewRecord ? 'Delete a news item'); ?>
</div>

    <?php $this->endWidget(); ?>

    </div><!-- form --> 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:53:50.753

**_form2.php**中的 php 语法有错误

 **```
<?php echo CHtml::submitButton($model->isNewRecord ? 'Delete a news item'); ?> 
```

更像

```
<?php echo CHtml::submitButton($model->isNewRecord ? 'Delete a news item':'Delete an old item'); ?> 
```

请参阅[**PHP**](http://php.net/manual/en/language.operators.comparison.php)**中的三元运算符**：比较运算符[](http://php.net/manual/en/language.operators.comparison.php)

 **...但我不明白那句话的重点，对我来说它看起来更像是：

```
<?php if (!$model->isNewRecord) echo CHtml::submitButton("Delete Record"); ?> 
```

...但是记录在加载时保证不是新的`$model=$this->loadModel($id);`

此外，在**Delete.php**

```
<?php echo $this->renderPartial('_form2', array('model'=>$model)); ?> 
```

会更像

```
<?php echo $this->renderPartial('_form2', array('model'=>$model), true); ?> 
```

或者

```
<?php $this->renderPartial('_form2', array('model'=>$model)); ?> 
```

看文档[`renderPartial()`](http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail)，特别注意它的第三个参数的返回值。事实证明，您实际上是在回显 NULL。这就解释了为什么没有显示。****

# php - Linux、Apache、PHP - 需要文档上传、编辑和版本控制的解决方案

> ID：15417749
> 
> 赞同：-2
> 
> 时间：2013-03-14T18:48:42.717
> 
> 标签：php, linux, apache, web-applications

我正在开发一个运行 Linux、Apache、PHP 和 CodeIgniter 的内部网站。我需要找到满足以下条件的解决方案：

*   文件上传。（想想word docs、excel docs和pdfs）
*   文档编辑/签出功能。
*   文档版本控制（谁对该文档进行了哪些更改）
*   维基能力。（查看、编辑、为网站内的某些页面创建文本）

这些东西中的每一个都将在 Intranet 站点中本地化。我不想链接到另一个系统来执行上述任务。我想要网站本身的所有控件。

我考虑打开 sharepoint 和 mediawiki 并使用 API 调用与之交互。然而，当涉及到 API 时，sharepoint 在 Linux 上的表现并不好。Mediawiki 有一套可怕的工具来添加文本样式。制作粗体/斜体/下划线根本不直观。

是否有充当 CMS 后端的 apache 插件？有什么项目可以用来帮助我吗？我愿意从头开始构建它，但我也想聪明一点。任何想法在这里使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:58:08.510

您正在寻找的被称为“文档管理系统”，并且有几十个开源免费的可用。不要从头开始发明一个。您将花费数月的时间来维护该系统多年

如果您想要所见即所得的编辑，请考虑 TinyMCE 或 CKEditor，两者都很棒，并且相对容易集成到任何后端。

# c++ - 转换 std::vector 到 const std::vector &Vec

> ID：15417753
> 
> 赞同：0
> 
> 时间：2013-03-14T18:49:11.037
> 
> 标签：c++, std

我继承了一些代码，并坚持我认为应该是一个简单的更新。

我有以下功能

```
template<typename T>
class ArrayRef { 
public:
typedef const T *iterator;
typedef const T *const_iterator;

private:
/// The start of the array, in an external buffer.
const T *Data;

public:
/// Construct an ArrayRef from a std::vector.
template<typename A>
ArrayRef(const std::vector<T, A> &Vec)
: Data(Vec.empty() ? (T*)0 : &Vec[0]), Length(Vec.size()) {}
}; 
```

我需要将一个用以下定义的向量传递给该函数。

```
std::vector<const myType*> myVector(4); 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:01:00.217

只需传递您的向量：

```
ArrayRef<const myType*> myArrayRef(myVector); 
```

是否有某些原因这对您不起作用？

# ruby-on-rails - Omniauth-Facebook 回调未在 Rails Mountable Engine 中初始化

> ID：15417758
> 
> 赞同：0
> 
> 时间：2013-03-14T18:49:22.720
> 
> 标签：ruby-on-rails, facebook, omniauth, rails-engines

我正在开发一个使用 Devise、OmniAuth 和 OmniAuth-Facebook 的可安装引擎（称为 SimpleUser）。首先，我用宝石制作了一个测试应用程序，每个都运行良好。接下来，我以测试应用程序的代码为例，从头开始构建引擎。

一切都差不多完成了，除了与 Facebook 的连接（它使用 Javascript 弹出窗口）。当我单击“登录”时，会显示 FB 弹出窗口，我授予该应用程序，它会重定向到指定的路线（请参阅路线），但会引发此错误：

```
NoMethodError in SimpleUser::AuthController#create
undefined method `[]' for nil:NilClass 
```

错误发生在该操作中，在**auth**为 nil的行`authentication = Authentication.find_by_provider_and_uid(auth['provider'], auth['uid'])`中（ **auth**来自）。****`auth = request.env["omniauth.auth"]`****

 ****我检查的一件事是回调阶段它没有初始化。这是测试应用程序的日志：

> 在 2013 年 3 月 14 日 08:52:56 -0600 (facebook) 开始为 127.0.0.1 获取“/auth/facebook/callback” 回调阶段。由 AuthController#create 作为 HTML 参数处理：{"provider"=>"facebook"}

这是引擎应用程序的日志：

```
Started GET "/simple_user/auth/facebook/callback" for 127.0.0.1 at 2013-03-14 08:51:19 -0600
Processing by SimpleUser::AuthController#create as HTML
  Parameters: {"provider"=>"facebook"} 
```

为了管理 OmniAuth，我将 gem 添加到 .gemspec 和 Gemfile；另外，我需要引擎中的 gem，并且在引擎的生成器中，我在安装期间将omniauth.rb 的模板移动到父应用程序的配置/初始化程序。这就是我所拥有的：

**AuthController（位于 app/controllers/simple_user/auth_controller.rb 中）**

```
module SimpleUser
  class AuthController < ApplicationController

    def create
      auth = request.env["omniauth.auth"]   
      authentication = Authentication.find_by_provider_and_uid(auth['provider'], auth['uid'])

      if authentication
        flash[:notice] = "Signed in successfully."
        sign_in(:user, authentication.user)
        redirect_to root_url
      else
        user = User.build_new_auth(auth)
        #user.apply_omniauth(auth)
        if user.save(:validate => false)
          flash[:notice] = "Account created and signed in successfully."
          sign_in(:user, user)
          redirect_to root_url
        else
          flash[:error] = "Error while creating the user account. Please try again."
          redirect_to root_url
        end
      end
    end

  end
end 
```

**引擎**

```
module SimpleUser

  require 'rubygems'
  require 'devise'
  require 'cancan'
  require 'rolify'
  require 'omniauth'
  require 'omniauth-facebook'
  require 'simple_form'

  class Engine < ::Rails::Engine
    isolate_namespace SimpleUser

    config.before_configuration do
      env_file = File.join(Rails.root, 'config', 'fb_config.yml')
      YAML.load(File.open(env_file)).each do |key, value|
        ENV[key.to_s] = value.to_s
      end if File.exists?(env_file)

      env_file = File.join(Rails.root, 'config', 'devise_config.yml')
      YAML.load(File.open(env_file)).each do |key, value|
        ENV[key.to_s] = value.to_s
      end if File.exists?(env_file)
    end
  end
end 
```

**发电机**

```
module SimpleUser
  module Generators
    class InstallGenerator < ::Rails::Generators::Base
      source_root File.expand_path("../templates", __FILE__)
      desc "Install SimpleUser"

      def copy_config_file
        copy_file "fb_config.yml", "config/fb_config.yml"
        copy_file "devise_config.yml", "config/devise_config.yml"
        copy_file "omniauth.rb", "config/initializers/omniauth.rb"
      end

      def copy_migrations
        rake "simple_user:install:migrations"
        SimpleUser::Engine.load_seed
      end

    end
  end
end 
```

**omn​​iauth.rb 的模板**

```
require 'omniauth'
require 'omniauth-facebook'

OmniAuth.config.logger = Rails.logger

Rails.application.config.middleware.use OmniAuth::Builder do
    provider :facebook, ENV['FACEBOOK_KEY'], ENV['FACEBOOK_SECRET'], :scope => ENV['FACEBOOK_SCOPE']
end 
```

**路线（在引擎上）**

```
match 'auth/:provider/callback', to: 'auth#create'
match 'auth/failure', to: redirect('/') 
```

**路线（在虚拟应用程序上）**

```
mount SimpleUser::Engine => "/simple_user", :as => "simple_user" 
```

**.gemspec 依赖项**

```
 s.add_dependency "rails", "~> 3.2.12"
  s.add_dependency "devise"
  s.add_dependency "cancan"
  s.add_dependency "rolify"
  s.add_dependency "omniauth"
  s.add_dependency "omniauth-facebook", "1.4.1"
  s.add_dependency "simple_form"

  #s.add_development_dependency "mysql2"
  s.add_development_dependency "sqlite3"
  s.add_development_dependency "jquery-rails"
  s.add_development_dependency "debugger" 
```

**宝石文件**

```
source "http://rubygems.org"

gemspec

gem 'devise'
gem 'cancan'
gem 'rolify'
gem 'omniauth'
gem 'omniauth-facebook', '1.4.1'
gem 'simple_form'

# Development
gem 'jquery-rails'
gem 'debugger' 
```

我认为问题是没有初始化的回调，原因可能是OmniAuth没有被加载，但我不知道它是否以及如何解决它。

[你可以在https://github.com/pablomarti/simple_user](https://github.com/pablomarti/simple_user)查看项目，如果你想克隆它并测试你可以使用生成器`rails g simple_user:install`，你也可以看到 test/dummy 的代码来了解这个想法。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:54:33.423

解决的办法是去掉omniauth.rb，在引擎中包含OmniAuth的中间件，所以引擎看起来是这样的：

```
module SimpleUser

  require 'rubygems'
  require 'devise'
  require 'cancan'
  require 'rolify'
  require 'omniauth'
  require 'omniauth-facebook'
  require 'simple_form'

  class Engine < ::Rails::Engine
    isolate_namespace SimpleUser

    middleware.use OmniAuth::Builder do
      provider :facebook, ENV['FACEBOOK_KEY'], ENV['FACEBOOK_SECRET'], :scope => ENV['FACEBOOK_SCOPE']
    end

    config.before_configuration do
      env_file = File.join(Rails.root, 'config', 'fb_config.yml')
      YAML.load(File.open(env_file)).each do |key, value|
        ENV[key.to_s] = value.to_s
      end if File.exists?(env_file)

      env_file = File.join(Rails.root, 'config', 'devise_config.yml')
      YAML.load(File.open(env_file)).each do |key, value|
        ENV[key.to_s] = value.to_s
      end if File.exists?(env_file)
    end

  end
end 
```

感谢 Dmitry Lihachev在类似问题中的回答[https://stackoverflow.com/a/8413724/347501 。](https://stackoverflow.com/a/8413724/347501)****

# netty - 在 Netty 中生成 HTTP 多部分响应

> ID：15417762
> 
> 赞同：3
> 
> 时间：2013-03-14T18:49:29.220
> 
> 标签：netty, multipart

我正在创建一个 REST 服务，它将一些计算值返回给客户端。Netty 在这方面表现非常出色。但是，在某些情况下，我需要为同一个 URI（查询）返回多个值。以下是我们考虑的方法： i) 将所有值打包成客户必须知道如何解码的自定义格式。ii) 使用 MIME 多部分支持。

方法 ii) 更加简洁，并且符合 REST 方法。只是我，还是我很难弄清楚如何在 Netty 中做到这一点？

我浏览了 Netty 文档中引用的文件上传示例。但我不知道如何对内存数据做同样的事情？

任何线索/想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T08:59:23.140

我知道这是一个老问题，但如果仍然需要：如果我理解，您想将多个同名的值作为 MIME 多部分内容发送回来，对吗？

*   首先创建你的（如果你想在内存中饱和，`HttpDataFactory`可能设置为 False）`useDisk`
*   然后创建你`HttpPostRequestEncoder`的`multipart`设置为true
*   并使用`encoder.addBodyAttribute(name, value)`where value 是唯一改变的属性添加任意数量的属性

那应该做你想要的吗？

# excel - Excel使用连接引用范围

> ID：15417763
> 
> 赞同：1
> 
> 时间：2013-03-14T18:49:29.633
> 
> 标签：excel, concatenation, excel-formula, covariance

我正在尝试使用以下公式引用两个数组：

```
=COVAR(CONCATENATE("Returns!"&D27&":"&D28),CONCATENATE("Returns!"&D27&":"&D28)) 
```

例如，单元格 D27 包含：`=ADDRESS($B$3,D$29)`返回 $C$6。因此，理论上我应该有一个包含正确元素的 COVAR 参数。

然而，COVAR 计算反而给了我一个#VALUE！错误。我不能为此使用 CONCATENATE 吗？如果不是，解决方案是什么？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:08:34.533

要从文本值中获取有效的单元格引用，您可以使用 INDIRECT 函数，例如

`=COVAR(INDIRECT(CONCATENATE("Returns!"&D27&":"&D28)),INDIRECT(CONCATENATE("Returns!"&D27&":"&D28)))`

尽管根本不使用 D27 和 D28 并将原始 B3 和 D29 值与 INDEX 一起使用可能会更容易，例如

`=INDEX(Returns!A1:Z100,B3,D29)`将为您提供范围的起始单元格，以便您可以组合两个索引，例如

`=INDEX(Returns!A1:Z100,B3,D29):INDEX(Returns!A1:Z100,cell,cell)`

您可以直接在 COVAR 等函数中使用该范围，而无需 INDIRECT

# php - 改进 PHP 中的类结构而不是使用多重继承

> ID：15417766
> 
> 赞同：2
> 
> 时间：2013-03-14T18:49:34.643
> 
> 标签：php, oop, design-patterns, inheritance

我有一个设计问题，我的课程是以这种方式设置的：

```
abstract class Advertiser        abstract class AdvertiserCampaign
      |                                    |
      |                                    |
class AdvUno extends Advertiser  class AdvUnoCampaign extends AdvertiserCampaign
class AdvDos extends Advertiser  class AdvDosCampaign extends AdvertiserCampaign
class AdvTre extends Advertiser  class AdvTreCampaign extends AdvertiserCampaign 
```

问题是`AdvUno`两者`AdvUnoCampaign`都需要一种对其他人来说不需要的特殊身份验证方法。现在我已经把它放在了`AdvUno`，但同样，它会被`AdvUnoCampaign`（以及以这种方式设置的一堆其他类）所需要。

*   我无法进行`AdvUnoCampaign`扩展`AdvUno`，因为 PHP 中没有多重继承，而且还因为它通常不是一个好的、干净的设计实践。
*   如果我进行`AdvertiserCampaign`extend `Advertiser`，那么下面的所有扩展类（`AdvUnoCampaign`、`AdvDosCampaign`等）都必须实现一堆与它们无关的抽象方法，并且已经在每个`Advertiser`类中实现了这些方法。

简而言之，在这种情况下，最佳设计实践是什么？我宁愿不只是将代码复制并粘贴到所有`AdvOne`类中。任何帮助或建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:10:16.710

[并行继承层次结构](http://c2.com/cgi/wiki?ParallelInheritanceHierarchies)被认为是一种*代码异味*，应该重构。

Martin Fowler 在“重构”中建议：

> 消除重复的一般策略是确保一个层次结构的实例引用另一个层次结构的实例。如果您使用**Move Method**和**Move Field**，则引用类的层次结构会消失。

但我认为你可以更进一步。我不知道，您为每个广告商及其广告系列制作子类的决定是基于什么，但我会质疑这个决定。一个好的做法是[优先考虑组合而不是继承](http://c2.com/cgi/wiki?CompositionInsteadOfInheritance)。

你可以这样开始：

```
class Advertiser
{
  protected $authentication;
}

class AdvertiserCampaign
{
  protected $authentication;
}

interface AdvertiserAuthentication
{
}

class SpecialAuthenticationForAdvertiserUno implements AdvertiserAuthentication
{
}

class NoSpecialAuthenticationForOtherAdvertisers implements AdvertiserAuthentication
{
} 
```

现在，广告商之间的第一个区别被移到另一个类别中。继续进行其他差异，直到每个广告商都只是`Advertiser`以不同方式组合的对象。竞选活动也是如此。我想更具体一点，但如前所述，我不知道为什么您的广告客户首先都有自己的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:09:47.443

通常，要解决与您类似的问题，通常使用桥接设计模式。

[http://sourcemaking.com/design_patterns/bridge](http://sourcemaking.com/design_patterns/bridge)

# xna - 如何计算 xna 上雾效模型的距离？

> ID：15417768
> 
> 赞同：2
> 
> 时间：2013-03-14T18:49:39.150
> 
> 标签：xna, shader, game-engine, effects, fog

我为在我的 xna 游戏中添加**雾**效果而苦苦挣扎了一段时间。我在文件 (.Fx) 中使用自定义着色器效果。“ **PixelShaderFunction** ” 可以正常工作。但问题是**我所有的土地都是一样的颜色**。我认为问题出**在相机和模型之间距离**的计算上。

```
float distance = length(input.TextureCoordinate - cameraPos); 
```

这是我使用“PixelShaderFunction”的完整代码

```
// Both techniques share this same pixel shader.
float4 PixelShaderFunction(VertexShaderOutput input) : COLOR0
{
      float distance = length(input.TextureCoordinate - cameraPos);
      float l = saturate((distance-fogNear)/(fogFar-fogNear));
      return tex2D(Sampler, input.TextureCoordinate) * lerp(input.Color, fogColor, l);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:26:49.850

如果您的 input.TextureCoordinate 确实代表采样器的纹理坐标，那么您尝试计算距离的方式是错误的。

您可以按如下方式更改 PixelShaderFunction 的主体：

```
float distance = distance(cameraPos, input.Position3D);
float l = saturate((distance-fogNear)/(fogFar-fogNear));
return lerp(tex2D(Sampler, input.TextureCoordinate), fogColor, l); 
```

将以下内容添加到您的 VertexShaderOutput 声明中：

```
float4 Position3D : TEXCOORD1; 
```

在您的顶点着色器中，用顶点位置在世界矩阵上相乘来填充 Position3D：

```
output.Position3D = mul(input.pos, matWorld); 
```

# php - mysql_* 如何易受 SQL 注入攻击，为什么 mysqli 不能

> ID：15417770
> 
> 赞同：1
> 
> 时间：2013-03-14T18:49:44.000
> 
> 标签：php, mysql, mysqli, code-injection

我已经看到很多关于`mysql_*`不能使用的评论。但找不到答案**为什么**

# mysql - MySQL Left Join 运行速度非常慢，拆分为 2 个查询要快得多

> ID：15417774
> 
> 赞同：0
> 
> 时间：2013-03-14T18:49:58.140
> 
> 标签：mysql, join, query-optimization, left-join

当我使用 a 运行查询时`LEFT JOIN`，需要 20 秒。当我将它分成 2 个查询时，它会在 4 秒内运行。但是，正如您可以想象的那样，这使得以特定顺序显示结果变得非常困难。**我的初始查询有什么问题，我可以将 2 合并为 1 吗？**

`Table1`有 ~400,000 行，Table2 有 ~200,000 行。

`Field3`是 中的主键`Table2`，并在 中建立索引`Table1`。

查询返回大约 ~100k 行。

```
SELECT Table1.Field1, Table2.Field4
FROM
    Table1
    LEFT JOIN
        Table2 USING (Field3)
WHERE Table1.Field1 = 'Example' 
```

当我按照书面方式运行查询时，平均需要 20 秒才能运行。但是，如果我在没有 的情况下运行查询`LEFT JOIN`并运行第二个查询以获取该数据，则所有内容总共运行大约 4 秒。

```
SELECT Table1.Field1, Table1.Field3
FROM Table1
WHERE Table1.Field1 = 'Example'

//PHP
$first = true;
while ($row = mysql_fetch_assoc($query))
{
    if (!$first)
    {
        $field3Values .= ",";   
    }
    $field3Values .= "'" . mysql_real_escape_string($row['Field3']) . "'";  
    $first = false;
}

//Now run the 2nd query
SELECT Field4
FROM People
WHERE Field3 IN (" . $field3Values . ") 
```

**编辑：**根据要求，`EXPLAIN`来自第一个查询： ![在此处输入图像描述](../Images/8af3e082d4f387be2dd7f998f2793612.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:33:02.710

约翰和我在一次聊天中发现了这一点。单个查询很慢，因为查询优化器没有为`Table1`. 通过添加`FORCE INDEX (Field1)`到查询中，索引`Table1.Field1`用于过滤结果，而不是进行全表扫描。我们不完全确定为什么这两种查询方法运行得更快，但我的猜测是，由于某种原因，查询优化器在第一个单个查询中使用索引，而不是在单个查询中。

# php - 不使用“$this->”解析成员属性？

> ID：15417777
> 
> 赞同：1
> 
> 时间：2013-03-14T18:50:14.503
> 
> 标签：php, oop, syntax

给定如下基本对象，我的倾向（基于使用 AS3）是`$friend`可以解释`$this->friend`的，但 PHP 解析器仅将`$friend`其视为函数本地化的未初始化变量`holler`。有没有办法在不使用的情况下访问成员变量`$this->`？我的目标是发现最精简的语法。

```
class MyBuddy
{
   private $friend = true;

   public function holler()
   {
       if ( $friend ) // <- parser won't resolve $friend to a member variable
          return 'Heeeeey Buuuuuday!';
       else
          return null;
   }
} 
```

* * *

**更新：**在考虑给出的答案之后，似乎最简洁和易于理解的方法是通过引用函数顶部的函数级变量来传递实例变量。对于引用详细实例变量的函数来说，这是一个不错的解决方案。

```
// Demonstrating a simple cache which abbreviates $this->thingCollection 
// to $things for the function body
public function getThing( $id, $qty )
{
   $things = &$this->thingCollection; // <-- pass by reference

   if ( empty($things) )
      $things = [];

   if ( empty($things[$id]) )
      $things[ $productId ] = [];

   if ( empty($things[ $id ][ $qty ]) )
      $things[ $id ][ $qty ] = get_thing_from_database( $id, $qty );

   return $things[ $id ][ $qty ];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:52:44.400

不要发明聪明的变通方法，让开发人员在您难以理解之后维护代码。PHP 这样做的方式是使用 $this，您应该接受语言的约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:14:57.970

问题是 php 不认为它们是同一个，因此允许特定方法具有具有该属性名称的局部变量。例如：

```
class MyBuddy
{
   private $friend = true;

   public function holler($friend)
   {
       if ($this->friend == $friend ) // <- parser won't resolve $friend to a member variable
          return 'Heeeeey Buuuuuday!';
       else
          return null;
   }
}

define("HELL_NAW", false);
define("MMM_HMMM", true);

$hombre = new MyBuddy();
echo $hombre -> holler(HELL_NAW);

$l_jessie = new MyBuddy();
echo $l_jessie -> holler(MMM_HMMM); 
```

所以要得到你所追求的，你可以去：

```
 public function holler()
   {
       $friend = $this ->friend;
       if ($friend )
          return 'Heeeeey Buuuuuday!';
       else
          return null;
   } 
```

但这可能被称为精益的反面。但这也说明了这一点（和 Alex 的），即 php 没有考虑到你的责任原则，你最终会做更多的工作来让下一个人更难实现基于原则的目标，但会对其他人来说似乎是审美的。

另一方面，php 确实有[神奇的方法](http://us1.php.net/manual/en/language.oop5.magic.php) `__get()`，`__set()`通过定义它们的处理方式来允许引用未定义或不可访问的属性。有了它，你就不需要参考`$this->friend`了，因为它不存在。只需引用该方法的论点（这很方便，但又会让事情变得很麻烦）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:00:11.140

我很同情你的问题，因为我几乎是自己发布的。在这种情况下，您想要做的事情对您来说更具可读性，但对于另一个期望在针对类级别对象时标准使用 $this-> 的 PHP 开发人员来说，这不会是。

# batch-file - 仅在根目录中的 .bat 的子目录中运行 .bat？

> ID：15417779
> 
> 赞同：0
> 
> 时间：2013-03-14T18:50:15.473
> 
> 标签：batch-file, file-organization

我有一系列命令将文件从文件夹 AE 移动到一个文件夹 X，例如：

```
for /f "delims=" %%a in (
    'dir /s /b ^| find /i "\Folder A\"'
    ) do move "%%a" "G:\Folder X"
for /f "delims=" %%a in (
    'dir /s /b ^| find /i "\Folder B\"'
    ) do move "%%a" "G:\Folder X" 
```

ETC

并且一旦它们在 X 中，在 X 中运行 .bat 以根据它们的名称将这些文件按名称排序到文件夹中：

```
for /f "tokens=2 delims= " %%b in ('dir /b *.pdf') do (
    md %%b > nul 2>&1
    move *%%b*.pdf %%b
    ) 
```

但它似乎想在根文件夹中的 X 中运行 .bat 而不仅仅是`\X\`.bat 有没有办法告诉`X\*.bat`它只在 X 中运行？除了更改`*.pdf`为`X\*.pdf`? 我正在尝试编写，以便每个 .bat 尽可能便携。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:22:52.520

如果我理解正确，唯一的问题是当前目录没有改变，并且您想将其更改为`G:\Folder X`在该文件夹中运行批处理文件时。

您可以从“父”批处理文件中执行此操作：

```
pushd "G:\Folder X"
call "G:\Folder X\process.bat"
popd 
```

或者从“子”批处理文件中，您可以强制它始终将其当前目录设置为包含批处理文件的目录：

```
pushd "%~dp0"
:: do your stuff
popd 
```

# ruby-on-rails - 从 Rails 控制台获取“SQLite3::CorruptException：数据库磁盘映像格式错误”

> ID：15417781
> 
> 赞同：3
> 
> 时间：2013-03-14T18:50:18.307
> 
> 标签：ruby-on-rails, database, sqlite, ruby-on-rails-3.2

我正在学习 Michael Hartl 的 rails 截屏教程，在第 7 章中，出于测试用户显示页面的原因，我正在尝试将用户添加到数据库中。当我创建用户时，它会因**SQLite3::CorruptException: database disk image is malformed**错误而回滚。对此错误的研究建议停止“后缀”进程，但我没有安装后缀。有任何想法吗？请注意，我是新手，这很可能是我的一个简单错误！谢谢！

```
1.9.3p194 :009 > user = User.create(name: "dax", email: "poo@foo.bar", password: "lala", password_confirmation: "lala")
(0.1ms)  SAVEPOINT active_record_1
User Exists (0.2ms)  SELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('poo@foo.bar') LIMIT 1
SQL (0.6ms)  INSERT INTO "users" ("created_at", "email", "encrypted_password", "name", "salt", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Thu, 14 Mar 2013 18:29:58     UTC +00:00], ["email", "poo@foo.bar"], ["encrypted_password", "68beb4b809ab79efd7fcbd175a58d7938d595f360df82b85f8f73e209abe6327"], ["name", "dax"], ["salt", "da4687fa5f380d0b1087810fdccfe96fddd4abab4409c2d96adf7c14f6c4b77b"], ["updated_at", Thu, 14 Mar 2013 18:29:58 UTC +00:00]]
(0.1ms)  ROLLBACK TO SAVEPOINT active_record_1
ActiveRecord::StatementInvalid: SQLite3::CorruptException: database disk image is malformed: INSERT INTO "users" ("created_at", "email", "encrypted_password", "name", "salt", "updated_at") VALUES (?, ?, ?, ?, ?, ?)
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/sqlite3-1.3.7/lib/sqlite3/statement.rb:108:in `step'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/sqlite3-1.3.7/lib/sqlite3/statement.rb:108:in `block in each'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/sqlite3-1.3.7/lib/sqlite3/statement.rb:107:in `loop'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/sqlite3-1.3.7/lib/sqlite3/statement.rb:107:in `each'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/connection_adapters/sqlite_adapter.rb:263:in `to_a'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/connection_adapters/sqlite_adapter.rb:263:in `block in exec_query'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/connection_adapters/sqlite_adapter.rb:242:in `exec_query'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:63:in `exec_insert'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:90:in `insert'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/relation.rb:66:in `insert'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/persistence.rb:367:in `create'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/timestamp.rb:58:in `create'
... 15 levels...
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/attribute_methods/dirty.rb:22:in `save'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/transactions.rb:208:in `transaction'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/transactions.rb:259:in `block in save'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/transactions.rb:258:in `save'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.12/lib/active_record/persistence.rb:45:in `create'
from (irb):9
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.12/lib/rails/commands/console.rb:47:in `start'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.12/lib/rails/commands/console.rb:8:in `start'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.12/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>'1.9.3p194 :010 >` 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-14T18:59:25.760

听起来数据库已经损坏了。您可以使用以下方法从头开始：

```
rake db:drop
rake db:create
rake db:migrate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-13T21:24:02.460

对我来说，没有任何工作。我删除了所有 *.sqlite3 文件，然后运行

```
rake db:create
rake db:migrate 
```

然后它起作用了。

# scala - 如何使用 Scala 的 apache commons（或任何其他不属于 jdk 的库）

> ID：15417793
> 
> 赞同：3
> 
> 时间：2013-03-14T18:51:03.927
> 
> 标签：scala, apache-commons-net

看起来这应该很简单，但我不是java人。我打算尝试使用 apache commons ftp 组件（org.apache.commons.net.ftp），但我不知道如何让我的 scala 代码可以访问它。

目前，我刚刚尝试将包放入一个目录，从该目录启动 scala repl，并发出：import org.apache.commons.* 我被告知 apache 不是包 org 的成员，它我假设它无法找到代码。

这看起来应该很容易，但任何建议都会受到赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T18:56:44.280

您需要将 jar 添加到类路径中。在 REPL 中，这样做是这样的：

```
scala -classpath some.jar 
```

如果您正在构建一个项目，您可能需要考虑使用像 sbt ( [http://www.scala-sbt.org/](http://www.scala-sbt.org/) ) 这样的构建工具，它允许您指定依赖项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T21:11:12.260

使用 SBT，您可以将`build.sbt`

`libraryDependencies += "commons-net" % "commons-net" % "3.2"`

# sql - 将光标转换为基于集合的操作

> ID：15417794
> 
> 赞同：1
> 
> 时间：2013-03-14T18:51:06.220
> 
> 标签：sql, sql-server, sql-server-2008, tsql

所以我有这个查询，它通过 id 搜索 id 并相应地计算成本。但是速度很慢，我想了解如何将其转换为基于集合的操作。

因此，根据我们的情况，我们以不同的方式计算我们的模型成本。

当用户更新驱动程序时，我们可以根据更改的位置在整个驱动程序列上运行更新。

但是在计算建模成本时。**我们逐行进行，因为固定成本不同**，然后除以月。我已经粘贴了下面的代码。通过基于集合的操作还有办法做到这一点吗？

首先，我们根据使用更新更改的值更新同一表中的驱动程序，然后逐行更新建模成本（这真的很慢）

代码 ：

```
SELECT @rowCounter = 1, @totalrows = @@ROWCOUNT

WHILE @rowCounter <= @totalrows
    BEGIN

        SELECT @currentId = tempId
        FROM @temp
        WHERE row = @rowCounter     

        SELECT  
                @newModeledCost = 
                case when not exists (select 1 from dbo.DIMSTD_SCENARIO where SCENARIO0_Name = SCENARIO and SCENARIO2_Name = 'Model') then 
                ISNULL(DriverValue1,0)*ISNULL(DriverValue2,0)*ISNULL(UnitA,0)*ISNULL(UnitB,0)+ISNULL(FixedCost,0) 
                -- normal allocation for all scenarios
                else
                (ISNULL(unita,0) * (ISNULL(DriverValue1,0)/ISNULL(NULLIF(DriverValue2,0),1))* ISNULL(UnitB,0))+ISNULL(FixedCost,0)  
                --(ISNULL(unita,0) * (ISNULL(DriverValue1,0)/ISNULL(DriverValue2,0))*ISNULL(UnitB,0))+ISNULL(FixedCost,0) 
                -- allocation for model scenarios
                end
                ,                                       
                @oldModeledCost = ISNULL(ModeledCost,0),
                @newOct = (ISNULL(@newModeledCost,0) * (ISNULL(Oct, 0) /ISNULL(NULLIF(@oldModeledCost,0),1))),
                @newNov = (ISNULL(@newModeledCost,0) * (ISNULL(Nov, 0) /ISNULL(NULLIF(@oldModeledCost,0),1))),
                @newDec = (ISNULL(@newModeledCost,0) * (ISNULL(Dec, 0) /ISNULL(NULLIF(@oldModeledCost,0),1))),
                @newJan = (ISNULL(@newModeledCost,0) * (ISNULL(Jan, 0) /ISNULL(NULLIF(@oldModeledCost,0),1))),
                @newFeb = (ISNULL(@newModeledCost,0) * (ISNULL(Feb, 0) /ISNULL(NULLIF(@oldModeledCost,0),1))),
                @newMar = (ISNULL(@newModeledCost,0) * (ISNULL(Mar, 0) /ISNULL(NULLIF(@oldModeledCost,0),1))),
                @newApr = (ISNULL(@newModeledCost,0) * (ISNULL(Apr, 0) /ISNULL(NULLIF(@oldModeledCost,0),1))),
                @newMay = (ISNULL(@newModeledCost,0) * (ISNULL(May, 0) /ISNULL(NULLIF(@oldModeledCost,0),1))),
                @newJun = (ISNULL(@newModeledCost,0) * (ISNULL(Jun, 0) /ISNULL(NULLIF(@oldModeledCost,0),1))),
                @newJul = (ISNULL(@newModeledCost,0) * (ISNULL(Jul, 0) /ISNULL(NULLIF(@oldModeledCost,0),1))),
                @newAug = (ISNULL(@newModeledCost,0) * (ISNULL(Aug, 0) /ISNULL(NULLIF(@oldModeledCost,0),1))),
                @newSep = (ISNULL(@newModeledCost,0) * (ISNULL(Sep, 0) /ISNULL(NULLIF(@oldModeledCost,0),1)))
        FROM dbo.TBF_BUDGETExpenses
        WHERE BudgetId = @currentId 
        --and not exists (select 1 from dbo.DIMSTD_SCENARIO where SCENARIO0_Name = SCENARIO and SCENARIO2_Name = 'Model')

        UPDATE dbo.TBF_BUDGETExpenses
        SET ModeledCost = @newModeledCost,
            Oct = @newOct,
            Nov = @newNov,
            Dec = @newDec,
            Jan = @newJan,
            Feb = @newFeb,
            Mar = @newMar,
            Apr = @newApr,
            May = @newMay,
            Jun = @newJun,
            Jul = @newJul,
            Aug = @newAug,
            Sep = @newSep,
            Username = 'Cascade',
            lastmodified = getdate()                
        WHERE BudgetId = @currentId
        AND @oldModeledCost <> 0

        Print 'Record Update ' + CAST(@currentId AS VARCHAR(15))

        SET @rowCounter = @rowCounter + 1

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:13:19.803

如果没有完整的架构、测试数据和预期结果，很难验证这一点。这是您当前更新的基于快速设置的复制。注意：我将您的 ModeledCost`CASE`向下移动到子查询中，以避免在每个列集中重复它。这取决于你是否合乎逻辑......我假设 BudgetId 是 PK。

运行更新`SELECT`以确认其产生所需的结果集：

```
select  t.BudgetId,
        --
        Oct = (ISNULL(new.ModeledCost,0) * (ISNULL(Oct, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Nov = (ISNULL(new.ModeledCost,0) * (ISNULL(Nov, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Dec = (ISNULL(new.ModeledCost,0) * (ISNULL(Dec, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Jan = (ISNULL(new.ModeledCost,0) * (ISNULL(Jan, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Feb = (ISNULL(new.ModeledCost,0) * (ISNULL(Feb, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Mar = (ISNULL(new.ModeledCost,0) * (ISNULL(Mar, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Apr = (ISNULL(new.ModeledCost,0) * (ISNULL(Apr, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        May = (ISNULL(new.ModeledCost,0) * (ISNULL(May, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Jun = (ISNULL(new.ModeledCost,0) * (ISNULL(Jun, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Jul = (ISNULL(new.ModeledCost,0) * (ISNULL(Jul, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Aug = (ISNULL(new.ModeledCost,0) * (ISNULL(Aug, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Sep = (ISNULL(new.ModeledCost,0) * (ISNULL(Sep, 0) /ISNULL(NULLIF(t.ModeledCost,0),1)))
        Username = 'Cascade',
        lastmodified = getdate(),
        ModeledCost = new.ModeledCost
from    dbo.TBF_BUDGETExpenses as [t]
left
join    (   select  BudgetId,
                    case
                        when not exists (select 1 from dbo.DIMSTD_SCENARIO where SCENARIO0_Name = SCENARIO and SCENARIO2_Name = 'Model') 
                        then ISNULL(DriverValue1,0)*ISNULL(DriverValue2,0)*ISNULL(UnitA,0)*ISNULL(UnitB,0)+ISNULL(FixedCost,0) 
                        -- normal allocation for all scenarios
                        else (ISNULL(unita,0) * (ISNULL(DriverValue1,0)/ISNULL(NULLIF(DriverValue2,0),1))* ISNULL(UnitB,0))+ISNULL(FixedCost,0)  
                            --(ISNULL(unita,0) * (ISNULL(DriverValue1,0)/ISNULL(DriverValue2,0))*ISNULL(UnitB,0))+ISNULL(FixedCost,0) 
                            -- allocation for model scenarios
                    end
            from    dbo.TBF_BUDGETExpenses
        ) as new(BudgetId, ModeledCost) on t.BudgetId = new.BudgetId
where   ISNULL(t.ModeledCost,0) <> 0 
```

作为`UPDATE`：

```
update  t
set     Oct = (ISNULL(new.ModeledCost,0) * (ISNULL(Oct, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Nov = (ISNULL(new.ModeledCost,0) * (ISNULL(Nov, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Dec = (ISNULL(new.ModeledCost,0) * (ISNULL(Dec, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Jan = (ISNULL(new.ModeledCost,0) * (ISNULL(Jan, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Feb = (ISNULL(new.ModeledCost,0) * (ISNULL(Feb, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Mar = (ISNULL(new.ModeledCost,0) * (ISNULL(Mar, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Apr = (ISNULL(new.ModeledCost,0) * (ISNULL(Apr, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        May = (ISNULL(new.ModeledCost,0) * (ISNULL(May, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Jun = (ISNULL(new.ModeledCost,0) * (ISNULL(Jun, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Jul = (ISNULL(new.ModeledCost,0) * (ISNULL(Jul, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Aug = (ISNULL(new.ModeledCost,0) * (ISNULL(Aug, 0) /ISNULL(NULLIF(t.ModeledCost,0),1))),
        Sep = (ISNULL(new.ModeledCost,0) * (ISNULL(Sep, 0) /ISNULL(NULLIF(t.ModeledCost,0),1)))
        Username = 'Cascade',
        lastmodified = getdate(),
        ModeledCost = new.ModeledCost
from    dbo.TBF_BUDGETExpenses as [t]
left
join    (   select  BudgetId,
                    case
                        when not exists (select 1 from dbo.DIMSTD_SCENARIO where SCENARIO0_Name = SCENARIO and SCENARIO2_Name = 'Model') 
                        then ISNULL(DriverValue1,0)*ISNULL(DriverValue2,0)*ISNULL(UnitA,0)*ISNULL(UnitB,0)+ISNULL(FixedCost,0) 
                        -- normal allocation for all scenarios
                        else (ISNULL(unita,0) * (ISNULL(DriverValue1,0)/ISNULL(NULLIF(DriverValue2,0),1))* ISNULL(UnitB,0))+ISNULL(FixedCost,0)  
                            --(ISNULL(unita,0) * (ISNULL(DriverValue1,0)/ISNULL(DriverValue2,0))*ISNULL(UnitB,0))+ISNULL(FixedCost,0) 
                            -- allocation for model scenarios
                    end
            from    dbo.TBF_BUDGETExpenses
        ) as new(BudgetId, ModeledCost) on t.BudgetId = new.BudgetId
where   ISNULL(t.ModeledCost,0) <> 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:26:28.367

对于您的情况，绝对设置操作更好且可行，但我认为最好的方法是不使用任何查询，而是使用表的 DDL。创建表时，可以使用持久化创建计算列。就像您的十二个月列一样，它们可以是计算列，并且所有参与计算的因素实际上都来自同一个表。这是链接：http: [//msdn.microsoft.com/en-us/library/ms186241.aspx](http://msdn.microsoft.com/en-us/library/ms186241.aspx)

# php - 蜘蛛将使用哪个链接来搜索列表，静态链接还是 RewriteRule url？

> ID：15417799
> 
> 赞同：1
> 
> 时间：2013-03-14T18:51:14.853
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我是 Apache 重定向的新手，但已经学会了如何处理由 PHP 在我的网站上生成的干净 url，它们运行良好。

我一直在研究这个问题，似乎找不到一个简单、直接的答案。

我的问题是爬虫/蜘蛛/机器人会使用我网站上显示的链接 php：example.com\Shoes\Running\Men 还是他们会使用 RewriteRule url：example.com\subsubcat_lookup.php?c=$1&s=$2 &ss=$3 作为最终会出现在搜索引擎中的那个？（见下面我的 .htaccess）

我还看到了 PT|passthrough 标志，如下例所示：[Apache.org - Redirecting and Remapping with mod_rewrite](http://httpd.apache.org/docs/2.4/rewrite/remapping.html#old-to-new "Apache.org - 使用 mod_rewrite 重定向和重新映射")

那是我应该在我的情况下使用的东西吗？

非常感谢您对此主题的任何澄清。

我的 .htaccess 文件：

```
RewriteEngine on

# do not do anything if already existing file, symbolic link or directory
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .+ - [L]

# redirect clean url (/category) for processing
RewriteRule ^([^/]+)$ ./cat_lookup.php?c=$1 [L,B]
RewriteRule ^([^/]+)/$ ./cat_lookup.php?c=$1 [L,B]

# redirect clean url (/category/subcategory) for processing
RewriteRule ^([^/]+)/([^/]+)$ ./subcat_lookup.php?c=$1&s=$2 [L,B]
RewriteRule ^([^/]+)/([^/]+)/$ ./subcat_lookup.php?c=$1&s=$2 [L,B]

# redirect clean url (/category/subcategory/subsubcategory) for processing
RewriteRule ^([^/]+)/([^/]+)/([^/]+)$ ./subsubcat_lookup.php?c=$1&s=$2&ss=$3 [L,B]
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/$ ./subsubcat_lookup.php?c=$1&s=$2&ss=$3 [L,B] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:48:17.557

> 我的问题是爬虫/蜘蛛/机器人会使用我网站上显示的链接 php：example.com\Shoes\Running\Men 还是他们会使用 RewriteRule url：example.com\subsubcat_lookup.php?c=$1&s=$2 &ss=$3 作为最终会出现在搜索引擎中的那个？

由于这种重写发生在您的服务器内部（除非您使用显式重定向）——您的蜘蛛是如何知道这些内部 URL 的……？

蜘蛛会跟随他们在网络上找到的链接——如果您的页面中只有 example.com/Shoes/Running/Men 链接，他们会在哪里找到其他版本？

无论如何，为了确保列出“正确”的 URL——添加一个`link`元素`rel=canonical`并给出你想在那里使用的 URL。[http://en.wikipedia.org/wiki/Canonical_link_element](http://en.wikipedia.org/wiki/Canonical_link_element)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:20:14.713

这取决于爬虫的实现。例如，我可以编写一个爬虫来存储原始 URL（不是 .htaccess 使用重写给出的那个），然后未清理的 URL 将存储在我的数据库中，否则将存储干净的 URL。据我所知，像谷歌等爬虫存储干净（重写）的 URL。您可以尝试使用 apache nutch 来查看大多数爬虫的默认行为是什么。

# hadoop - 如何在 Hadoop Reducer 中创建新的唯一键

> ID：15417804
> 
> 赞同：2
> 
> 时间：2013-03-14T18:51:25.077
> 
> 标签：hadoop, mapreduce

在 Hadoop Reducer 中，我想在特定条件下创建和发出新键，并且我想确保这些键是唯一的。

我想要的伪代码如下：

```
@Override
protected void reduce(WritableComparable key, Iterable<Writable> values, Context context) 
                       throws IOException, InterruptedException {
     // do stuff:
     // ...
     // write original key:
     context.write(key, data);
     // write extra key:
     if (someConditionIsMet) {
       WritableComparable extraKey = createNewKey()
       context.write(extraKey, moreData);
     }
} 
```

所以我现在有两个问题：

1.  是否有可能在 reduce() 中发出多个不同的键？我知道不会使用钥匙，但这对我来说没问题。
2.  额外的密钥在所有 reducer 中必须是唯一的 - 出于应用程序的原因，因为我认为否则它会违反 reduce 阶段的合同。什么是生成跨 reducer（可能跨作业）唯一的密钥的好方法？

    也许获取减速器/作业 ID 并将其合并到密钥生成中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:42:42.470

1.  是的，您可以输出任意数量的键
2.  您可以将任务尝试信息合并到您的密钥中，以使其作业唯一（跨减速器，甚至根据需要处理推测执行）。您可以从reducer的方法中获取此信息`Context.getTaskAttemptID()`，然后使用`TaskAttemptID.getTaskID().getId()`

# java - 如何更改 android 中的菜单项大小？

> ID：15417810
> 
> 赞同：2
> 
> 时间：2013-03-14T18:51:40.680
> 
> 标签：java, android, android-layout, actionbarsherlock

我在 ActionBarSherlock 的帮助下创建了一个简单的菜单项：

```
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, ITEMD, 0, "item").setIcon(R.drawable.topbar_btn_inbox).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.breadcrumb_bar_menu, menu);
    return true;
} 
```

但我不能改变它的宽度和高度。如何在 XML 中或以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:21:09.703

正如@Tanis.7x 所述并根据[操作栏图标文档](http://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html)大小和密度已经为不同设备预定义以保持一致性，因此您无法更改任何内容。但是，您可以定义自定义操作栏视图，然后像视图一样操作并更改大小等：

```
actionBar = getActionBar();
actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM,
actionBar.DISPLAY_SHOW_CUSTOM);
actionBar.setCustomView(R.layout.custom_view); 
```

# ios - 不能将谷歌地图 GMSMapView 放在主视图的子视图中？

> ID：15417811
> 
> 赞同：42
> 
> 时间：2013-03-14T18:51:45.453
> 
> 标签：ios, uiview, subview, google-maps-sdk-ios

我正在努力解决这个问题！我想将谷歌地图添加`GMSMapView`到`UIView`只是`UIView`我的主要部分的一部分`ViewController`。

它应该很简单......我用`UIView`我想要的大小的情节提要 a 创建并将它放在 main 中`UIView`。

来自接口文件的片段：

```
@interface MapViewController : UIViewController <CLLocationManagerDelegate>

@property(nonatomic) IBOutlet GMSMapView *mapView; 
```

将 mapView 与`UIView`main中的 this 链接`UIView`。

我在实施中做了什么：

```
@synthesize mapView = _mapView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.8683
                                                            longitude:151.2086
                                                                 zoom:10];
    _mapView = [GMSMapView mapWithFrame:_mapView.bounds camera:camera];
    _mapView.myLocationEnabled = YES;

} 
```

这应该有效，不是吗？我得到的是我的内部 UIView 是空的。

[如果我按照 google 的启动指南Google Map Integration Document](https://developers.google.com/maps/documentation/ios/start)实例化地图，它可以工作，但它会将地图分配给 MAIN UIView，这是另一回事。

我什至尝试将情节提要中的 mapView 的类从`UIView`更改为`GMSMapView`. 地图显示在内部视图中，但它以一种奇怪的方式初始化

1.  系统抛出错误说

> “无法制作完整的帧缓冲区”

并大大减慢了视图的加载速度（在模拟器上需要 2-3 秒）

2.  在该`viewDidLoad`方法中完成的任何相机更改中，地图都没有响应。

有什么建议么？

我在 StackOverflow 上阅读了一些帖子，但找不到有效的解决方案:(

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-07-19T20:30:58.550

根据其他答案，这里有三种实际可行的方法。

1.  在 XIB 上放置一个视图，并在 XIB 构建器中将其类更改为 GMSMapView。请参见下面的 *map1。或者...
2.  全部编码。将地图添加为主视图的子视图。请参见下面的 *map2。或者...
3.  将地图添加为已在 XIB 中带有插座的另一个子视图的子视图。*下面的地图3。

。H

```
@interface GPViewController : UIViewController
@property (strong, nonatomic) IBOutlet GMSMapView *map1;
@property (strong, nonatomic) IBOutlet UIView *plainViewOnXIBHoldsMap3;
@end 
```

.m

```
- (void)viewDidLoad{
    [super viewDidLoad];
    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.0
                                                        longitude:151.20
                                                             zoom:6];

    /* Option 1\. view on XIB is class GSMMapView */
    self.map1.camera = camera;

    /* Option 2\. add a map as a subview */
    GMSMapView *map2 = [GMSMapView mapWithFrame:CGRectMake(0, 0, 100, 100) camera:camera];
    [self.view addSubview:map2];

    /* Option 3\. add a map to a subview already on the XIB */
    GMSMapView *map3 = [GMSMapView mapWithFrame:self.plainViewOnXIBHoldsMap3.bounds camera:camera];
    [self.plainViewOnXIBHoldsMap addSubview:map3];
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-10-15T17:04:10.307

已签出并开始在 Swift 2.0 中使用**cloudsurfin**提供的所有三个选项。为那些在 Swift 2.0 中面临同样问题的人翻译他的答案：

*选项 1* - 在 XIB 上放置一个视图，并在 XIB 构建器中将其类更改为 GMSMapView。

*选项 2* - 全部编码。将地图添加为主视图的子视图。

*Option3* - 将地图添加为现有 UIView 子视图的 GMSMapView 子视图。

*选项1*在XIB中的准备说明：

1）为您的视图设置一个类：

![GMSMapView 标记](../Images/65bb5225b7bae587764133f02ac0dd76.png)

2）不要忘记将您的视图与代码中的插座连接：

![连接视图和插座](../Images/66a11558eceafc7407213ee0adcb99a5.png)

```
import UIKit
import GoogleMaps

class MapViewController: UIViewController {

    @IBOutlet weak var map1 : GMSMapView!

    @IBOutlet weak var map3 : UIView!

    override func viewDidLoad() {
        super.viewDidLoad()

        let camera = GMSCameraPosition.cameraWithLatitude(53.9,
        longitude: 27.5667, zoom: 6)

        // Option 1\. view on XIB is class GSMMapView
        self.map1.camera = camera;

        // Option 2\. add a map as a subview
        let map2 = GMSMapView.mapWithFrame(CGRectMake(0, 64, 320, 460), camera:camera)
        self.view.addSubview(map2)

        // Option 3\. add a map to a subview of UIView class that is already on the XIB
        let map3 = GMSMapView.mapWithFrame(self.plainViewOnXIBHoldsMap3.bounds, camera:camera)
        self.plainViewOnXIBHoldsMap3.addSubview(map3)
    }
} 
```

希望这篇笔记对某人有帮助:)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-20T12:47:53.977

我的建议：

1.  将故事板中的 UIView 作为 UIView 实例变量链接到头文件，而不是 GMSMapView
2.  将 mapWithFrame:camera: 方法更改为链接的 UIView 的边界
3.  在 viewDidLoad: 方法的最后，将 UIView 实例变量设置为您的 GMSMapView，或者添加一个子视图。我也遇到过这个问题，并且通常可以解决这个问题。

。H

```
@interface MapViewController: UIViewController <CLLocationManagerDelegate>
{
    IBOutlet UIView *mapViewOnSreen;
} 
```

.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view.
    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.8683
                                                                longitude:151.2086
                                                                     zoom:10];
    _mapView = [GMSMapView mapWithFrame:mapViewOnScreen.bounds camera:camera];
    _mapView.myLocationEnabled = YES;

    mapViewOnScreen = _mapView
    //OR [self.view addSubview:_mapView];
    //OR [mapViewOnScreen addSubview:_mapView];   <--This worked for me
} 
```

*编辑：我使用 IB 在主视图中创建了一个小的 UIView。我按照列出的步骤进行操作，当我设置 [mapViewOnScreen addSubview:_mapView]; 时，我能够在小 UIView 中查看地图。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-05-27T12:05:34.433

你可以通过IB做到

```
.h
@property (weak, nonatomic) IBOutlet GMSMapView *theMapView;

.m
GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.868
                                                        longitude:151.2086
                                                             zoom:12];

//This next line is not needed if you have a GMSMapView outlet
//self.theMapView = [GMSMapView mapWithFrame:self.theMapView.frame camera:camera];
self.theMapView.camera=camera;
self.theMapView.mapType = kGMSTypeSatellite;
self.theMapView.delegate=self; 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-06-07T13:57:37.820

我只是因为忘记添加这一行而出现黑屏：

```
[super loadView]; 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-01-30T08:56:06.293

对于 Swift 3，如果您将`GMSMapView`

1.  添加`UIView`到`UIViewController`故事板

[![在此处输入图像描述](../Images/89d04bb0bf2b315bc34deb0e2aeb3662.png)](https://i.stack.imgur.com/5hxAk.png)

2.  改为`GMSMapView`改为`UiView`

[![在此处输入图像描述](../Images/4b635c5cb7d7096513b8da99819bddf4.png)](https://i.stack.imgur.com/qXMuU.png)

3.  `UIViewController`在类中创建引用

    ```
    @IBOutlet weak var mapView: GMSMapView! 
    ```

4.  当您进行子类化时，您不需要使用`GMSMapView.map(withFrame: CGRect.zero, camera: camera)`文档中提到的内容。只需按如下方式加载地图

    ```
     let camera = GMSCameraPosition.camera(withLatitude: 51.50, longitude: -0.076, zoom: 10.0)
        mapView.camera = camera 
    ```

5.  为了添加标记

    ```
    let marker = GMSMarker()
    marker.position = CLLocationCoordinate2D(latitude: 51.50, longitude: -0.076)
    marker.title = "London"
    marker.snippet = "UK"
    marker.map = mapView 
    ```

6.  一起作为一个功能

    ```
    override func viewDidLoad() {
    super.viewDidLoad()

      load()
    }

    func load() {
      //map
      let camera = GMSCameraPosition.camera(withLatitude: 51.50, longitude: -0.076, zoom: 10.0)
      mapView.camera = camera

      //marker
      let marker = GMSMarker()
      marker.position = CLLocationCoordinate2D(latitude: 51.50, longitude: -0.076)
      marker.title = "London"
      marker.snippet = "UK"
      marker.map = mapView
    } 
    ```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-04-01T06:23:30.407

我花了大约半个小时试图让它工作，然后我发现我用了错误的方法。谷歌入门示例告诉您将其放入 - (void)loadView 但如果您这样做，您会得到黑屏或全屏地图。你需要把它放在 - (void)viewDidLoad 中。然后它工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-07T09:42:56.447

在身份检查器中将 UIVIEW 类设置为 GMSMapView。

然后从中制作一个 IBOutlet :D 并且它是工作 :P

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-11T14:21:59.133

遵循2017 年 9 月的**Swift谷歌教程**

我通过像这样将代码放入 viewDidLoad 来修复

```
var mapView: GMSMapView!

override func viewDidLoad() {
    super.viewDidLoad()

    // Create a GMSCameraPosition to display the initial center of the map
    let camera = GMSCameraPosition.camera(withLatitude: 23.885942, longitude: 45.079162, zoom: 5.1)

    // Set the frame size , don't forget to replace "<CustomFrame>" with the required frame size
    mapView = GMSMapView.map(withFrame: "<CustomFrame>", camera: camera)

    // Add the map to any view here 
    view.addSubview(mapView)  //or customView.addSubview(mapView)
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-30T10:24:16.700

```
(void)viewDidLoad {
    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.86
                                                        longitude:151.20
                                                             zoom:14];

    GMSMarker *marker = [[GMSMarker alloc] init];
    marker.position = CLLocationCoordinate2DMake(-33.86, 151.20);
    marker.title = @"Sydney";
    marker.snippet = @"Australia";
    marker.map = self.mapContainerView;

    //set the camera for the map
    self.mapContainerView.camera = camera;

    self.mapContainerView.myLocationEnabled = YES;
} 
```

# c++ - 读取 .bmp 文件 c++，错误的值？

> ID：15417813
> 
> 赞同：1
> 
> 时间：2013-03-14T18:51:47.410
> 
> 标签：c++, bmp

这是我从 bmp 文件中读取的代码（使用 windows.h）。它从 BITMAPFILEHEADER 读取正确的值，但从 BITMAPINFOHEADER 读取的所有值都是 40（十六进制的 28）。怎么了？

```
ifstream file("d3.bmp",ios::binary);
BITMAPFILEHEADER fheader;
BITMAPINFOHEADER aImg;

ofstream fileOut("newfile5.txt",ios::app);

file.read((char*)&fheader.bfType, sizeof(WORD));
fileOut<<std::hex<<fheader.bfType<<"\n";
file.read((char*)&fheader.bfSize, sizeof(DWORD));
fileOut<<fheader.bfSize<<"\n";
file.read((char*)&fheader.bfReserved1, sizeof(WORD));
fileOut<<fheader.bfReserved1<<"\n";
file.read((char*)&fheader.bfReserved2, sizeof(WORD));
fileOut<<fheader.bfReserved2<<"\n";
file.read((char*)&fheader.bfOffBits, sizeof(DWORD));
fileOut<<fheader.bfOffBits<<"\n";

file.read((char*)&aImg.biSize,sizeof(DWORD));
fileOut<<aImg.biSize<<"\n";
file.read((char*)&aImg.biWidth, sizeof(LONG));
fileOut<<aImg.biSize<<"\n";
file.read((char*)&aImg.biHeight, sizeof(LONG));
fileOut<<aImg.biSize<<"\n";
file.read((char*)&aImg.biPlanes, sizeof(WORD));
fileOut<<aImg.biSize<<"\n";
file.read((char*)&aImg.biBitCount, sizeof(WORD));
fileOut<<aImg.biSize<<"\n";
file.read((char*)&aImg.biCompression, sizeof(DWORD));
fileOut<<aImg.biSize<<"\n";
file.read((char*)&aImg.biSizeImage, sizeof(DWORD));
fileOut<<aImg.biSize<<"\n";
file.read((char*)&aImg.biXPelsPerMeter, sizeof(LONG));
fileOut<<aImg.biSize<<"\n";
file.read((char*)&aImg.biYPelsPerMeter, sizeof(LONG));
fileOut<<aImg.biSize<<"\n";
file.read((char*)&aImg.biClrUsed, sizeof(DWORD));
fileOut<<aImg.biSize<<"\n";
file.read((char*)&aImg.biClrImportant, sizeof(DWORD));
fileOut<<aImg.biSize<<"\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:06:28.423

我敢打赌，正在*读取*的值是正确的，只是你总是一遍又一遍地*输出相同的字节：*

```
file.read((char*)&aImg.biSize,sizeof(DWORD));
fileOut<<aImg.biSize<<"\n"; //ok, biSize
file.read((char*)&aImg.biWidth, sizeof(LONG));
fileOut<<aImg.biSize<<"\n"; //wait, biSize again?
file.read((char*)&aImg.biHeight, sizeof(LONG));
fileOut<<aImg.biSize<<"\n"; //well somehow I'm getting suspicious
file.read((char*)&aImg.biPlanes, sizeof(WORD));
fileOut<<aImg.biSize<<"\n"; //...
file.read((char*)&aImg.biBitCount, sizeof(WORD));
... 
```

# xslt - 在 XSLT（或分组元素）中使用乱序标签

> ID：15417817
> 
> 赞同：0
> 
> 时间：2013-03-14T18:51:54.897
> 
> 标签：xslt, xslt-1.0

使用 1.0 可以在 XSLT 中使用乱序标签吗？我最初的猜测不是，因为它违反了 XML 的规则。

考虑具有 X 元素的 XML 数据，我想将这些 X 条目拆分为单个块中的 3 个`<div>`块。我**想做**的是这样的事情，但显然它是完全无效的代码......

```
<div>
  <xsl:for-each select="mydata">
    <xsl:value-of select="myvalue"/><br/>
    <xsl:if test="(position() mod 3)=0">
      </div> <!-- This is invalid -->
      <div> <!-- This is invalid -->
    </xsl:if>
  </xsl:for-each>
</div> 
```

所以对于 8 个元素，示例结果将是

```
<div>
  value1<br/>
  value2<br/>
  value3<br/>
</div>
<div>
  value4<br/>
  value5<br/>
  value6<br/>
</div>
<div>
  value7<br/>
  value8<br/>
</div> 
```

如果以上根本不可能（因为我怀疑它不是），有人可以建议一种可以接受的方式将它们分组吗？

（请注意，这必须是 XSLT 1.0 解决方案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:59:00.127

JLRishe 向您展示了解决方案。

您的问题是您将样式表视为编写开始和结束标记。这不是 XSLT 所做的：它编写一棵树。您不能将半个节点写入结果树。考虑节点，而不是标签。

当您遇到输出结构与输入结构不完全匹配的此类问题时，另一个有用的经验法则是样式表的结构应该反映输出的树结构，而不是输入的树结构。不要想“我应该如何处理下一个 ABC 输入节点”，而是“我需要在结果树中生成一个 XYZ 节点，我应该如何计算它的内容？”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T19:07:34.430

您尝试做的事情*是*可能的，但这不是一个好主意。这是一个更好的方法：

```
<xsl:apply-templates select="mydata[position() mod 3 = 1]" mode="group" />

<!-- Separate templates -->
<xsl:template match="mydata" mode="group">
  <div>
    <xsl:apply-templates select=". | following-sibling::mydata[position() &lt; 3]" />
  </div>
</xsl:template>

<xsl:template match="mydata">
  <xsl:value-of select="myvalue"/><br/>
</xsl:template> 
```

# c - C函数返回一个值，但调用者分配了另一个值

> ID：15417819
> 
> 赞同：1
> 
> 时间：2013-03-14T18:51:58.987
> 
> 标签：c, return-value

我有一个名为 的 C 函数`from_binary_to_decimal`，它被另一个函数调用`x_caching`。问题是`from_binary_to_decimal`返回例如 2.25 （一个浮点数）但是`x_caching`（写了一行来存储返回值）修改了第一个函数返回的前一个值。

我放置了代码的图像（按照它们的执行顺序）：

```
float** cache_provider(struct INPUT_DATA* d, char** arrszChromosomes)
{
    static float** arrfCache = NULL;
    int i;
    if (d == NULL && arrszChromosomes == NULL) return arrfCache;

    if (arrfCache == NULL)
    {
        arrfCache = (float**)malloc(d->m_iPopulationSize * sizeof(float*));
        for (i = 0; i < d->m_iPopulationSize; ++i)
        arrfCache[i] = (float*)malloc(2 * sizeof(float));
    }

    x_caching(d, arrszChromosomes, &arrfCache);

    return arrfCache; 
```

}

```
void x_caching(struct INPUT_DATA *d,
               char **arrszChromosomes,
               float **arrfCache)
{  
    int i;
    float fTemp = 0.0f;

    for (i = 0; i < d->m_iPopulationSize; ++i) {
        arrfCache[i][0] = get_cache_key(arrszChromosomes[i]);
        fTemp = from_binary_to_decimal(d, arrszChromosomes[i], 0);
        arrfCache[i][1] = fTemp;
    }
}

float from_binary_to_decimal(struct INPUT_DATA *d,
                             char *szChromosome,
                             int iCacheQuery)
{  
    float fRetVal = 0.0;
    float fFinal = 0.0f;
    float *fCacheVal = NULL;
    int i = 0;

    if (iCacheQuery
        && (fCacheVal = get_x_value_from_cache(szChromosome)) != NULL)
        return *fCacheVal;

    for (i = 0; i < strlen(szChromosome); ++i)
        fRetVal +=
            (szChromosome[i] == '1' ? 1 : 0) *
            powf(2, d->m_iBitsPChromosome - (i + 1));

    fFinal = d->m_arrcDomainInterval[0] + (fRetVal * d->m_fDelta);
    return fFinal;
} 
```

`fTemp`应该存储像 2.51 这样的数字，而不是存储像 8133608 这样的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:10:25.717

对于初学者，您分配的浮点数组的数量以及用于访问它们的数组索引是不同的：

```
arrfCache = (float**)malloc(d->m_iMaxGenerations * sizeof(float*));
for (i = 0; i < d->m_iPopulationSize; ++i)
    arrfCache[i] = (float*)malloc(2 * sizeof(float)); 
```

您已经分配了`d->m_iMaxGenerations`浮点数组，但您正在遍历`d->m_iPopulationSize`它们。

与`for`您拥有的循环相同`fTemp`：

```
for (i = 0; i < d->m_iPopulationSize; ++i) 
```

当您只分配`arrfCache`. 如果更小，这可能会导致内存损坏和奇怪的值，如您所见。`d->m_iPopulationSize``d->m_iMaxGenerations``d->m_iMaxGenerations`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T19:12:14.903

您永远不会设置`arrfCache`为非空值。此外， x_caching 应该具有以下形式的声明：

```
void x_caching (struct INPUT_DATA* d, char** arrszChromosomes, float*** arrfCache) 
```

因为您希望 arrfCache 成为输出参数。

```
x_caching(d, arrszChromosomes, &arrfTempCache);
...
*arrfCache = malloc(....)
....
(*arrfCache)[i][0] = ... 
```

# iphone - iPhone iOS 如何创建交互式拖动、旋转、调整大小、删除视图控件？

> ID：15417820
> 
> 赞同：2
> 
> 时间：2013-03-14T18:52:01.983
> 
> 标签：iphone, ios, objective-c, interface, resize

我有一个允许用户向画布添加内容的应用程序。我希望能够为用户提供移动、旋转、调整大小、反映此内容的能力。目前我正在使用手势进行此操作，但想知道是否有某种开源小部件可以在视图周围绘制一个框并添加 4 个按钮来执行这些功能：

*   旋转 90 度
*   自由旋转
*   调整大小
*   删除

**谁能想到一个开源框架，我可以将其添加到我的项目中以创建与显示的控件类似的控件？**

![旋转控件](../Images/ed6128f2d98bc4435c3dc5123083bab1.png)

我可能可以手动构建它，但调试手势识别器和视图旋转并不是最有趣的事情，所以我正在寻找更精致的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:05:30.610

这是一个关于可可控件的开源控件的链接，看起来像您可以使用的东西：[TDResizerView](http://www.cocoacontrols.com/controls/tdresizerview)。

> “TDResizerView 用于用单指调整图像视图的大小和旋转”

听起来是个不错的起点，即使您需要对其进行修改。不过，我从来没有使用过这个特殊的控件，所以相信它的价值。

**编辑：**还要记住，在 iOS 上，用户通常*期望*手势。强迫他们使用手柄而不是捏或旋转可能不利于您的用户体验，这取决于您为什么要使用手柄。

# ios - ScrollViewDidScroll 中的动画

> ID：15417822
> 
> 赞同：1
> 
> 时间：2013-03-14T18:52:02.890
> 
> 标签：ios, uiscrollview

我通过修改 PullToRefresh 库在 scrollViewDidScroll 中触发了 UIView 动画。我想要的是在用户开始拉动时触发动画，并在拉动以刷新标题视图离开屏幕时终止它。但是，动画仅在用户释放拉动时起作用；在用户继续拉动期间，动画不起作用......非常感谢您提前提供的帮助！:)

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{   
    if (scrollView.isDragging) {
        if (refreshHeaderView.state == EGOOPullRefreshPulling && scrollView.contentOffset.y > -65.0f && scrollView.contentOffset.y < 0.0f && !_reloading) {
            [refreshHeaderView setState:EGOOPullRefreshNormal];
            if (timer) {
                [timer invalidate];
                timer = nil;
            }
        } else if (refreshHeaderView.state == EGOOPullRefreshNormal && scrollView.contentOffset.y < -65.0f && !_reloading) {
            [refreshHeaderView setState:EGOOPullRefreshPulling];
            if (!timer) {
                timer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(startMyAnimation) userInfo: nil repeats: YES];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:30:00.253

通常，当用户在滚动视图中拖动时，计时器不会触发。

尝试像这样安排计时器：

```
timer = [NSTimer timerWithTimeInterval:0.5 target:self selector:@selector(startMyAnimation) userInfo: nil repeats: YES];
[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

# drupal - 如何在 drupal 自定义图像样式中使用 imagemagick 中的合成

> ID：15417823
> 
> 赞同：0
> 
> 时间：2013-03-14T18:52:06.073
> 
> 标签：drupal, imagemagick

这是我的目标：在应用了 scale_and_crop 效果之后，我想创建一个精灵来保存裁剪后的图像 + 其下方的副本，该副本将对其应用效果（称为组合乘法）。我可以使用如下图像在命令行中生成“受影响的”图像：

```
 $cmd = 'composite -compose Multiply -gravity center \
        ' . $img_original_path . ' ' . $img_texture_path . ' ' .$img_result_destination;

    $return = null;
    $output = array();
    exec($cmd, $output, $return);
    var_dump($cmd, $output, $return); 
```

我最后的手段是将调用包装在模板中以在从裁剪图像调用时生成精灵，但我希望能够一次性完成......

感谢您花时间阅读！

# ajax - 如何在带有 JSF2 的 Facelets 中使用 f:ajax？

> ID：15417826
> 
> 赞同：0
> 
> 时间：2013-03-14T18:52:06.637
> 
> 标签：ajax, events, jsf, facelets, validation

我正在尝试使用 f:ajax 标记在 inputText 框中触发我的验证器，但我没有任何运气。它似乎并没有解雇验证者。但是验证器确实会在表单提交时触发。

这就是我正在使用的。

* * *

```
<td>
  <h:inputText id="email" value="#{contactInfo.email}">
    <f:validator validatorId="com.tcs.trn.validator.EmailValidator"></f:validator>
    <f:validator validatorId="com.tcs.trn.validator.TcsEmailValidator"></f:validator>
    <f:ajax execute="@this" event="blur" render="emailMessage"></f:ajax>
  </h:inputText>
</td>
<td>
  <h:message for="email" warnClass="warningMessage" errorClass="errorMessage" id="emailMessage"></h:message>
</td> 
```

* * *

请求标头

```
 Request URL:http://localhost:9080/JSF2Template/javax.faces.resource/jsf.js.xhtml?ln=javax.faces&stage=Development
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:oam.Flash.RENDERMAP.TOKEN=y4ftx6y5q; JSESSIONID=0000N5Uz-oCoU910GNVdCP3M8jc:-1
Host:localhost:9080
Referer:http://localhost:9080/JSF2Template/login/userDetails.xhtml
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11
Query String Parametersview URL encoded
ln:javax.faces
stage:Development
Response Headersview source
Content-Language:en-US
Content-Type:application/x-javascript
Date:Thu, 14 Mar 2013 19:32:10 GMT
Expires:Thu, 14 Mar 2013 19:32:10 GMT
Last-Modified:Thu, 14 Mar 2013 18:33:59 GMT
Server:WebSphere Application Server/7.0
Transfer-Encoding:chunked 
```

通过将其添加到头部来解决此问题。脚本链接默认显示，但这实际上允许它出于某种原因工作。

```
<h:outputScript name="jsf.js" library="javax.faces" /> 
```

# javascript - JavaScript：传输具有 IE 合规性的 DDL

> ID：15417827
> 
> 赞同：0
> 
> 时间：2013-03-14T18:52:14.357
> 
> 标签：javascript, performance, internet-explorer, html-select

你如何用另一个 ddl 填充一个 ddl 并与 Internet Explorer 兼容，同时仍然能够横穿选项数组来设置选定的选项？

```
/*******************************************************************************
*  Function: func_copy_all
*  Created By: A. Fulton
*  Created Date: 3/8/2013
*  For Release or Issue: RSP5.02
*  Modified Date: 
*  Purpose:  Populate city ddls and selecteds.
*******************************************************************************/
function func_copy_all()
{

  var ln_start_location = ((Number(document.getElementById('page_index').value) - 1) * Number(document.getElementById('page_size').value)) +1;
  for(i = ln_start_location; i < (ln_total_rows + 1); i++){
    //load the current city ddl with options
    var lo_city = document.getElementById('city_'+i);
    var lo_temp_city = document.getElementById('temp_city_selection');
         /*For IE*/
         var node = document.getElementById('city_cell_' + i);
         var lo_cell = document.createElement("TD");
         var lo_textNode = document.createTextNode(lo_temp_city);
         lo_cell.appendChild(lo_textNode);
         node.appendChild(lo_cell);

    //Believe innterHTML inside a div might be a problem for IE
    //lo_city.innerHTML = lo_temp_city.innerHTML;  

    //option value that needes to be selected
    var ls_selected_city = document.getElementById('city2_'+i).value;
    //Get the length of the ddl
    var optCount = lo_temp_city.options.length;
    //Traverse the array to get the index and set it to the city to selected
    for(var ln_j = 0; ln_j < optCount; ln_j++){
      if(lo_temp_city.options[ln_j].value == ls_selected_city){
      //set selected and break
      lo_city.options[ln_j].selected = "true";
      //break
      ln_j = optCount + 1;
      }
    }
  }
} 
```

如果我使用innerHTML，我可以让它在firefox上正常工作，但不能在IE上工作？如果我避免使用 innerHTML，我有一个文本节点，我无法遍历该节点来设置所选值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:59:08.203

```
/*******************************************************************************
*  Function: func_copy_all
*  Created By: A. Fulton
*  Created Date: 3/8/2013
*  For Release or Issue: RSP5.02
*  Modified Date: 
*  Purpose:  Populate city ddls and selecteds.
*******************************************************************************/
function func_copy_all()
{
  var ln_start_location = ((Number(document.getElementById('page_index').value) - 1) * Number(document.getElementById('page_size').value)) +1;
  var lo_node;
  for(var i = ln_start_location; i < (ln_total_rows + 1); i++){
    var lo_temp_city = document.getElementById('temp_city_selection').cloneNode(true);
    /*For IE*/
    lo_node = document.getElementById('city_cell_' + i);
    lo_temp_city.setAttribute("id", 'city_' + i);
    lo_temp_city.setAttribute("jselected", 'city_' + i);
    lo_temp_city.setAttribute("name", 'city_' + i);

    //option value that needes to be selected
    var ls_selected_city = document.getElementById('city2_'+i).value;

    //Get the length of the ddl
    var optCount = lo_temp_city.options.length;

    //Traverse the array to get the index and set it to the city to selected
    for(var ln_j = 0; ln_j < optCount; ln_j++){
      if(lo_temp_city.options[ln_j].value == ls_selected_city){
      //set selected and break
      lo_temp_city.options[ln_j].selected = "true";
      //break
      ln_j = optCount + 1;
      }
    }
    //Add temp city to the city cell
    lo_node.appendChild(lo_temp_city);
  }
} 
```

这适用于 Firefox 和 IE8。

# php - 在本地托管 DBpedia 以获取类别

> ID：15417828
> 
> 赞同：0
> 
> 时间：2013-03-14T18:52:14.360
> 
> 标签：php, dbpedia

我注意到您可以下载 DBpedia 数据的整个数据转储，但我不确定如何从我的 PHP 应用程序中获取它。[目前，我需要通过http://dbpedia.org/resource/Category:Cities_in_England](http://dbpedia.org/resource/Category:Cities_in_England)等 URL 访问我目前正在远程执行的类别信息 ，但该站点速度很慢，有时还处于离线状态。有没有办法以类似的方式在本地托管 DBpedia？我正在使用 PHP，是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T01:41:12.950

如果您已经可以从 PHP 运行远程 SPARQL 查询，那么如果您可以在本地 SPARQL 端点上托管数据，则可以使用相同的 PHP 代码来查询本地端点。我不知道任何基于 PHP 的 SPARQL 端点（我不是 PHP'er），但[这个答案](https://stackoverflow.com/questions/16608265/querying-open-data-communities-data-with-sparql/16610663#16610663)的后半部分描述了如何使用 Jena 的 TDB 设置 RDF 存储，并且 Jena 的 Fuseki 可以使用该存储对于 SPARQL 端点（只需将 a 添加`--loc=DIR`到命令行；请参阅[此答案](https://stackoverflow.com/a/17012988/1281433)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T06:19:17.023

您可以参考此链接设置 virtuso 三重商店[设置 Virtuso 三重商店](http://joernhees.de/blog/2014/04/23/setting-up-a-local-dbpedia-3-9-mirror-with-virtuoso-7/)

通过开始运行 virtuso 服务器并向其添加文件。您可以在本地 sparql 端点本地获取数据，您可以在 SPARQL 的帮助下进行查询。

# rrd - 这种对 RRD 数据丢失的模糊指控是关于什么的？

> ID：15417832
> 
> 赞同：1
> 
> 时间：2013-03-14T18:52:27.930
> 
> 标签：rrd

我想使用 CollectD 收集一些统计信息（关于存储）并让 Graphite 很好地显示它们。显然这可以通过

1.  让 CollectD 将数据存储为 RRD 文件并将 Graphite 指向这些文件，或者
2.  使用 CollectD 插件将数据推送到 Graphite 的 Carbon API，后者会将数据存储在 Whisper 数据库中（类似于 RRD，但不兼容）。

我想我想使用 RRD，但我在[Whisper 文档](http://graphite.readthedocs.org/en/1.0/whisper.html#differences-between-whisper-and-rrd)中发现了这个与我有关的声明：

> 在许多情况下（取决于配置），如果对 RRD 系列进行了更新但没有很快跟进另一个更新，则原始更新将丢失。

嗯。这有点吓人，但指控是如此模糊，以至于我不知道该怎么做。他们在谈论什么配置，以及它导致数据丢失的情况？

我的情况是，我收集的度量数据将分块提供——我会定期获取最新数据，并在数据库中输入尽可能多的新样本。因此，例如，我可能会获取一些数据并使用 3 分钟前、2 分钟前和 1 分钟前的值更新数据库，一个接一个。事实上，我一次可能有几十个新样本要放入数据库。以这种方式使用 RRD 是否与 Whisper 的指控有关？

注意：我不需要回填数据；我将始终添加比已经存储的数据更新的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T22:59:50.200

我看到这种情况发生的一种情况是，如果您设置了 AVERAGE RRA，并且将 xxf 值设置为较低的百分比。当数据随着时间的推移被压缩时，您可能会收到一个*未知*值并“松散”所有平均数据。如果您将 RRD 用于其设计用途，并使用正确的类型和设置进行设置，我认为您不会遇到问题。

我建议深入查看在[此处](http://oss.oetiker.ch/rrdtool/doc/rrdcreate.en.html)找到的 RRD 文档，以回答有关 RRD 和 RRA 如何处理数据以及可供您使用的不同存储技术的问题。

# ruby-on-rails - 如何在视图中引用哈希并围绕它编写 if/else 语句？

> ID：15417834
> 
> 赞同：1
> 
> 时间：2013-03-14T18:52:30.553
> 
> 标签：ruby-on-rails, ruby, view, hash

我已经确认 app["rating"] == 0 在 rails 控制台中。鉴于此，我正在尝试编写一个 if/else 语句，该语句将打印出某些文本，但在这样做时遇到了麻烦。

有什么建议吗？

```
 <% if <%= app["rating"] %> == 0 %>
    no rating
    <% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:56:49.983

如果您使用的是 ERB 模板，您应该这样做：

```
<% if app["rating"] == 0 %>
no rating
<% end %> 
```

我不知道你为什么要这样嵌套你的模板声明。

请记住，内部的任何内容都`<% ... %>`被评估为文字 Ruby 代码。如果您希望显示该评估的结果，请使用`<%= ... %>`. 由于那里有非 Ruby 代码，因此`if`将具有显示或不显示该部分的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:57:46.037

`<%`和之间的所有`%>`内容都是插值的，所以就这样做

```
<% if app["rating"] == 0 %>
  html content
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T19:02:49.867

无需`<% %>`在 if 语句中嵌套 erb 标签。例如：

```
<% if app["rating"] == 0 %>
  no raiting
<% end %> 
```

但是，当您将条件逻辑放入视图时，您会模糊 MVC 绘制的线条。在不深入讨论有关演示者或 DSLS 的情况下，处理此问题的最简单方法是添加一个辅助方法。

假设这是在一个名为的控制器中，`apps_controller.rb`您将`apps_helper.rb`在`/app/helpers`文件夹中有一个。您可以创建一个看起来像这样的辅助方法：

```
def display_rating(rating)
  rating = "No Rating" if rating == 0
  concat(rating)
end 
```

然后，在您看来，您可以通过使用`<%= display_rating(app["rating"]) %>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T18:56:21.270

假设您正在使用 ERB，请执行以下`if/else`操作：

```
 <%if app["rating"] == 0 %>
   No Rating
   <%elsif app["rating"] == 10 %>
      rating 10 
   <%elsif app["rating"] == 20 %>
      rating 20
       etc...
 <% end %> 
```

# c - 我应该对线程之间的共享结构使用访问控制吗？

> ID：15417838
> 
> 赞同：0
> 
> 时间：2013-03-14T18:52:37.833
> 
> 标签：c, multithreading, concurrency, pthreads, posix

我正在使用 pthread 库用 C 语言编写一个小软件。我有一堆线程需要对包含动态允许的字符数组的共享结构进行写访问，**但**我可以保证两个不同的线程永远不会尝试访问该数组的相同元素。我的问题是：我应该使用信号量或互斥锁之类的东西还是没有必要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:01:34.333

在您的情况下，线程之间不共享数据，并且由于线程之间不共享数据，因此不需要同步机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:02:20.777

好吧，我想你自己回答了这个问题！

互斥锁的目的是防止不同线程对某些资源的并发访问。如果您可以通过设计保证您的线程永远不会同时访问（读取或写入）相同的内存区域，那么您不需要互斥锁保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:05:28.950

如果您的线程只读取信息，则不需要锁定。

如果您的线程修改了其他线程看不到的信息，则不需要锁定。

如果有一个地方可以被一个线程修改并被其他人使用，则需要使用互斥锁。

# javascript - innerhtml中的javascript不起作用

> ID：15417839
> 
> 赞同：-1
> 
> 时间：2013-03-14T18:52:42.340
> 
> 标签：javascript, innerhtml

例如：

```
<html>
    <div id="media">123</div>
    <a href="javascript:void(0)" onClick="return fun()">Click</a>
    <script type="text/javascript">
        function fun() {
            document.getElementById("media").innerHTML = '<script type="text/javascript">alert("working");<\/script>';
        }
    </script>
</html> 
```

单击后不显示警报。

`alert("working")`; 只是一个例子。我希望它完成其他 javascript 的一项工作。我有一个要通过ajax处理的工作应该使用innerHTML

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:56:55.913

HTML[规范](http://www.w3.org/TR/2008/WD-html5-20080610/dom.html#innerhtml0)指定不应执行使用 innerHTML 插入的脚本标记。这是一个安全考虑。

如果你下定决心，仍然有办法做到这一点，例如将其添加到`img`处理程序或创建脚本元素，将其插入 DOM 并更改其`text`属性。我不会详细说明这些，因为这样做通常被认为有些粗略。如果您不尝试注入脚本，则应在页面源中包含脚本元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:00:06.147

```
<script type="text/javascript">

function fun() {
    alert("working");
}
</script>

<div id="media">123</div> <a href="javascript:void(0)" onClick="fun();">Click</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:56:35.680

你的 JS 函数应该是这样的。

```
function fun() {
  alert("working");
} 
```

# ios - 用户退出应用时的数据持久性

> ID：15417840
> 
> 赞同：-1
> 
> 时间：2013-03-14T18:52:44.050
> 
> 标签：ios, objective-c

我正在处理一个包含两个表视图控制器和一个“详细”视图的应用程序，用于编辑第二个表视图的单元格中的内容。segues 用于在两个表视图控制器之间导航。当在第二个表中编辑对象并返回上一个表时，编辑会保存在那里，但是当我在第二个表中并重新启动应用程序时，应用程序不会保存，尽管发生编辑时上下文确实通过保存：功能。注意：第一个表视图中的实体与第二个表的实体是一对多的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:31:50.407

如果用户希望编辑在进行时保存（而不是仅在单击“保存”按钮后），那么您有几个选项：

您可以简单地将您的tableViewController 设置为您的detailViewController 的委托，并保存使用发生在detailViewController 视图（即UITextFieldDelegate 等）上的事件进行的编辑。

不过，在之前的设置中保持相同的委托模式可能会更好，但仅在用户退出 detailViewController 视图或关闭应用程序时调用 save 函数。

像下面这样的东西可以工作。

**表视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "DetailViewController.h"

@interface TableViewController : UITableViewController <DetailViewControllerDelegate>

@end 
```

.

**表视图控制器.m**

```
#import "TableViewController.h"

@interface TableViewController ()

@end

@implementation TableViewController

- (void)editObject:(MyManagedObject *)object {
    DetailViewController *detailVC = [DetailViewController new];
    detailVC.myObject = object;
    detailVC.delegate = self;

    [self.navigationController pushViewController:detailVC animated:YES];
}

- (void)detailViewControllerDidFinishWithObject:(id)object {
    // Your saving functions
}

@end 
```

.

**DetailViewController.h**

```
#import <UIKit/UIKit.h>

@protocol DetailViewControllerDelegate;

@interface DetailViewController : UIViewController

@property (nonatomic, weak) id <DetailViewControllerDelegate>delegate;
@property (nonatomic, strong) MyManagedObject *myObject;

@end

@protocol DetailViewControllerDelegate <NSObject>

- (void)detailViewControllerDidFinishWithObject:(MyManagedObject *)object;

@end 
```

.

**细节视图控制器.m**

```
#import "DetailViewController.h"

@interface DetailViewController ()

@end

@implementation DetailViewController
@synthesize delegate;
@synthesize myObject;

- (void)viewDidLoad {
    [super viewDidLoad];

    // Do your normal view loading things

    // Register a notification to know the app will terminate
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(applicationWillResignActive:)
                                                 name: UIApplicationWillResignActiveNotification
                                               object:[UIApplication sharedApplication]];
}

- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];

    [delegate detailViewControllerDidFinishWithObject:myObject];
}

- (void)applicationWillResignActive:(NSNotification *)notification {
    [delegate detailViewControllerDidFinishWithObject:myObject];
}

@end 
```

# angularjs - AngularJS 向关联集合添加 2 个属性

> ID：15417846
> 
> 赞同：0
> 
> 时间：2013-03-14T18:52:57.163
> 
> 标签：angularjs

**1\. 我有一个 Truck 类，它有一个名为 AxleTypes 的集合，带有以下标记：**

```
public class AxleType : Entity
{
    public string Description { get; set; }
    public string Type { get; set; }
} 
```

**2\. 我的 Angular 表单包括以下内容（为了尽可能简短，我省略了表单的其他轴类型，并且我使用 $parent，因为这是一个模板，并且通过 ng-include 在主表单上）：**

```
<label for="frontAxles">Front Axle: </label>
<input ng-model="$parent.frontAxleType" type="hidden" value="Front">
<select ng-model="$parent.selectedFrontAxle" ng-options="axleType.Description for axleType in axleTypes">
    <option value="" selected>Select Axle Type ..</option>  
</select> 
```

**3.主窗体通过卡车控制器插入一辆新卡车，因此在卡车控制器中：**

```
 a. I instantiate an instance of the AxleTypes collection so the form is populates the select w/axle types.
  b. I instantiate an instance of AxleType to pass the selected data from the form.
  c. I pass the respective ng-models on the form to the AxleType variable.
  d. I add that AxleType variable to the Truck's AxleTypes collection.

  a: if ($scope.axleTypes == undefined || !($scope.axleTypes.length > 0)) 
       { $scope.axleTypes = API.GetAxleTypes(); }

  b: $scope.axleType = {};

  c: var frontAxle = $scope.axleType;
         frontAxle.Description = $scope.selectedFrontAxle;
         frontAxle.Type = $scope.frontAxleType;

  d: newTruck.AxleTypes = [
        angular.copy(frontAxle)
    ]; 
```

**调试时这是最终结果：**

![在此处输入图像描述](../Images/645a411b572066973c2a5c20c423c330.png)

为了尽可能地简短，我没有说明上面选择的第 2 轴类型。但是正如您所看到的，服务器选择了 2 个轴类型，但是每个 [Type & Description] 的两个属性都为空。有没有人有什么建议？

**在 console.log 中，这两个值都是“未定义的”。**

**一个有趣的观察：**

当我对 TruckCtrl 中的值进行硬编码时，一切正常：

```
 frontAxle.Description = 'Some Front Value';
    frontAxle.Type = 'Front';
    rearAxle.Description = 'Some Rear Value';
    rearAxle.Type = 'Rear';

    newTruck.AxleTypes = [
        angular.copy(frontAxle),
        angular.copy(rearAxle)
    ]; 
```

这会导致有人认为问题出在轴模板上的 ng-model 上。但是，当我在服务器类 AxleType 中只有一个属性，即描述，而不是类型时，仅通过以下方式添加了选择的描述：

```
 newTruck.AxleTypes = [
        angular.copy($scope.selectedFrontAxle),
        angular.copy($scope.selectedRearAxle)
    ]; 
```

传递的值。非常混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:48:49.077

**解决了 ！！！**

我有很多话想对 40 位在没有输入的情况下仔细阅读这个问题的奇怪眼球说，Stewie，好吧，我们知道 Stewie 是什么。但我不会。相反，我会为有同样问题的人提供帮助。

好的，进入解决方案。

**问题 #1：Angular 不接受 html 输入中的默认值。**

我很困惑为什么我有这样的输入：

```
<input ng-model="$parent.selectedRearType" type="hidden" value="Front"> 
```

然而 angular 说它没有价值。

**问题 1 的解决方案：**

您需要在控制器中初始化以下内容：

```
 $scope.selectedFrontType = 'Front';
    $scope.selectedRearType = 'Rear'; 
```

**问题 #2：如何在集合中传递多个属性的值？**

尽管这种情况是多么真实，但令人不安的是，关于此事的文档为零。

**问题 #2 的解决方案：**

在我的 html 中，我有这个选择语句：

```
 <select ng-model="$parent.selectedFrontAxle" ng-options="axleType.Description for axleType in axleTypes"> 
```

我错误地认为这个 ng-model严格来说是**AxleType**类的 Description 属性（参见上面的类模型）。**这是一个巨大的错误，事实并非如此。**那个 ng-model 不是类的 Description 属性，而是**整个类**本身。因此，在检查该 select 的 ng-model 时，请意识到它是整个 AxleType 类，即使只提供了 Description 属性。所以 ng-model 给我的是用户做出选择后我的控制器中的返回值：

**AxleType class => Description = "无论选择什么人", Type=""**

在这种情况下，我需要填写 angular 没有的空白，即在这种情况下，Type 属性。

**这是整个解决方案：**

```
 // beginning of controller when it initializes
    $scope.selectedFrontType = 'Front';
    $scope.selectedRearType = 'Rear';    

   // $scope.axleType = {}; -> NOT NEEDED

    // in the save method    
    // axles
    var frontAxle = $scope.selectedFrontAxle;
    frontAxle.Type = $scope.selectedFrontType;

    var rearAxle = $scope.selectedRearAxle;
    rearAxle.Type = $scope.selectedRearType;

    newTruck.AxleTypes = [
        angular.copy(frontAxle),
        angular.copy(rearAxle)
    ]; 
```

![在此处输入图像描述](../Images/74d26619e3e69822db1036e33aa85cda.png)

**我希望我帮助了某人！**

# c# - 在每周的特定日期和时间运行 System.Timers.Timer 事件 c#

> ID：15417851
> 
> 赞同：1
> 
> 时间：2013-03-14T18:53:08.953
> 
> 标签：c#, .net, timer

我正在使用 System.Timers.Timer 编写 Windows 服务来跟踪我的时间间隔。我想做的是让我的服务根据我的 app.config 文件中的变量在特定的日期和时间启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:56:57.020

我不认为你真的在写一个 Windows 服务，我认为你是在写一份工作。解决您的问题的一种更简洁、更简单的方法是编写一个控制台应用程序，然后设置一个[Windows 计划任务](http://windows.microsoft.com/en-us/windows7/schedule-a-task)以按您想要的时间间隔运行该控制台应用程序。

别介意您必须使用该`Timer`方法以毫秒为单位设置时间，Windows 服务将无法处理夏令时等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:47:37.120

尽管我认为最好的办法是将其设置为计划任务，但您可以轻松创建一个可等待的计时器，该计时器将在每天的同一时间发出信号。Windows 有一个 Waitable Timer 对象，但没有 .NET 支持它。

不久前，我发表了一篇名为*Waitable Timers in C#*的文章，其中我展示了如何在 C# 程序中使用这个对象。不幸的是，发表该文章的网站已不再存在。[但是，您可以从我的网站http://www.mischel.com/pubs/waitabletimer.zip](http://www.mischel.com/pubs/waitabletimer.zip)下载本文的代码示例。您可以以任何您认为合适的方式自由使用代码。

# magento - 在 magento 产品页面上显示付款方式折扣规则

> ID：15417852
> 
> 赞同：1
> 
> 时间：2013-03-14T18:53:10.390
> 
> 标签：magento

我想根据客户直接在产品页面上选择的付款方式显示折扣价。

基本上，我需要的是一种获取适用于付款方式的购物车规则的方法。所以我可以用它来建立一个付款方式表 X 折扣是这样的：

现金：90 美元（10% 折扣）
抄送：100 美元（全价）
转账：100 美元（全价）

到目前为止，我找不到访问购物车规则的方法。有什么见解吗？

**更新：**

对于那些想知道的人，我找到了一种获取购物车规则的方法。其实很简单：

```
$model = Mage::getModel('salesrule/rule')
        ->getCollection(); 
```

有了这些信息，我可以遍历规则并找到适用于支付方式的规则。

```
$conditions = unserialize($item['conditions_serialized']); 
```

但我意识到这种方式工作量太大，如果规则复杂，可能会变得复杂。我决定通过 ID 获取我想要的规则并获取折扣值，因为它不会一直更改。

如果您知道如何让 Magento 为我计算所有内容，例如我问“如果用户选择这种付款方式，除了其他所有内容（用户组、目录折扣等），最终价格是多少？”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:36:14.893

```
$model = Mage::getModel('salesrule/rule')
        ->getCollection();

foreach($model as $item){
    // check, do whatever and get discount
} 
```

# php - Joomla 管理员的 403 禁止错误

> ID：15417862
> 
> 赞同：3
> 
> 时间：2013-03-14T18:53:38.847
> 
> 标签：php, joomla

让我先说一下，只有*一个*用户遇到这个问题。其他人都可以很好地登录 Joomla 管理。

最初，当我发现单个用户在登陆管理员页面时收到 403 时，我检查以确保所有目录都可以按照*Site Information*下列出的目录写入。我还确认管理员目录有 755 权限，并且用户已经清除了她的缓存。

**此外**，该站点最近从一台服务器移动到另一台服务器。将旧服务器上的A记录更改为新服务器的IP。

关于为什么单个用户只会在 Joomla 管理页面中收到 403 错误的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:17:18.177

经过聊天讨论，事实证明服务器最近被移动了，从那时起问题就开始了。

问题好像是用户这边缓存了dns，所以用户只好清除dns缓存，或者等待provider清除dns缓存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-18T09:49:19.870

如果您查看管理员文件夹，请查看其中是否有 .htaccess 文件。如果有，请下载并打开它。看看你可以看到以下规则：

拒绝 ALL 允许来自 xxx.xxx.xx.xx

这将阻止所有人访问 Web 上的管理员页面，除了 ALLOW 之后的 IP 地址。

添加用户 IP 地址（他可以通过访问 www.ipchicken.com 找到它）。

因此，如果有两个现有的 Allow from（此处为 IP 地址），您将复制整行并将其粘贴到最后一行下方，然后更改 IP 地址。

保存并上传回管理员文件夹并尝试。

# c# - DynamicAssembly 中的数组边界检查仅在评估堆栈为空时有效

> ID：15417863
> 
> 赞同：2
> 
> 时间：2013-03-14T18:53:40.957
> 
> 标签：c#, .net, reflection.emit, il, bounds-check-elimination

我有简单的 for 循环和使用 ILGenerator 编写的数组访问。当使用这个确切的代码创建方法时，我打开反汇编，没关系，没有数组边界检查。

但是当我首先将其他类的实例放在评估堆栈上，然后运行 ​​for 循环时，它会检查数组边界。我正在发布。

知道为什么吗？我已经阅读了有关数组绑定检查的博客文章：http: [//blogs.msdn.com/b/clrcodegeneration/archive/2009/08/13/array-bounds-check-elimination-in-the-clr.aspx](http://blogs.msdn.com/b/clrcodegeneration/archive/2009/08/13/array-bounds-check-elimination-in-the-clr.aspx)

```
 // Uncomment this to enable bound checks, type of arg0 is some my class
        //il.Emit(OpCodes.Ldarg_0);

        var startLbl = il.DefineLabel();
        var testLbl = il.DefineLabel();
        var index = il.DeclareLocal(typeof(Int32));
        var arr = il.DeclareLocal(typeof(Int32).MakeArrayType());

        // arr = new int[4];
        il.Emit(OpCodes.Ldc_I4_4);
        il.Emit(OpCodes.Newarr, typeof(Int32));
        il.Emit(OpCodes.Stloc, arr);

        // Index = 0
        il.Emit(OpCodes.Ldc_I4_0); // Push index
        il.Emit(OpCodes.Stloc, index); // Pop index, store

        il.Emit(OpCodes.Br_S, testLbl); // Go to test

        // Begin for
        il.MarkLabel(startLbl);

        // Load array, index
        il.Emit(OpCodes.Ldloc, arr);
        il.Emit(OpCodes.Ldloc, index);

        // Now on stack: array, index
        // Load element
        il.Emit(OpCodes.Ldelem_I4);
        // Nothing here now, later some function call
        il.Emit(OpCodes.Pop);

        // Index++
        il.Emit(OpCodes.Ldloc, index);
        il.Emit(OpCodes.Ldc_I4_1);
        il.Emit(OpCodes.Add);
        il.Emit(OpCodes.Stloc, index);

        il.MarkLabel(testLbl);
        // Load index, count, test for end
        il.Emit(OpCodes.Ldloc, index);
        il.Emit(OpCodes.Ldloc, arr);
        il.Emit(OpCodes.Ldlen); // Push len
        il.Emit(OpCodes.Conv_I4); // Push len
        il.Emit(OpCodes.Blt_S, startLbl);
        // End for

        // Remove instance added on top
        //il.Emit(OpCodes.Pop); 
```

当我生成 IL 代码时，最好将类的实例保存在评估堆栈或局部变量中？

例如，我得到实例，遍历字段，为每个字段做任何事情然后返回。在读取下一个字段之前，我刚刚将实例保存在堆栈上并调用了 Emit(OpCodes.Dup)。但这似乎是错误的（至少对于上述情况）。

任何关于生成（高效/格式良好）IL 代码的文章/博客文章都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:07:50.390

一般来说，使用局部变量通常会产生更易于调试的可读代码，鉴于 IL 已经不是大多数开发人员习惯阅读的东西，这很重要。JIT 甚至有可能消除这样做可能带来的任何性能损失。

从我在 ILSpy 中看到的情况来看，csc 也更喜欢本地人，尽管我不得不承认，当我查看 IL 而不是反编译为 C# 时，它主要是调试代码。由于 JIT 的编写可能期望它主要运行在 Microsoft 编译器的输出上，因此如果它不能识别与其编译器发出的内容不匹配的循环构造，那就不足为奇了。额外的堆栈条目阻碍了 JIT 认识到它可以消除边界检查的能力，这是非常合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:53:27.643

在您的方法被 Jitted 之前，您是否在未附加调试器的情况下以发布模式运行？然后再贴上去？我知道执行此步骤似乎没有必要，但如果附加了调试器，调试器将发出不太理想的代码。

包括您认为错误所在的整个方法。我建议使用该方法发出一个程序集，以便您可以针对它运行 PEVerify。有时你会是编译但无效的代码。

`unboxed T`对于无效的代码（例如，错误堆栈，如仅与对象一起运行的通用代码上预期的堆栈） ，抖动可能会非常困难`boxed T`，尤其是无法验证，这不是正常模式。（例如，通过 C# 或 C++/CLI 永远不会发生的不安全代码）。除非您期待一个错误，否则您应该始终尝试在 peverify 中出现 0 个错误。（例如`calli`）

# jstl - 使用 jstl 逻辑标签

> ID：15417865
> 
> 赞同：0
> 
> 时间：2013-03-14T18:53:48.893
> 
> 标签：jstl

在内部`<c:chosse>`，当我们有多个`<c:when>`标签时，它的行为就像 if、else if、else if...逻辑结构。但如果我想做：

```
if(){
  if(){}
  else if{}
  if(){}
  if(){}
  if(){}
  else{} 
} 
```

然后我可以`<c:if>`在`<c:when>`里面使用吗`<c:choose>`

```
<c:choose>
  <c:when>
  <c:when>
  <c:if>
  </:if>

  <c:if>
  </:if>

  <c:when>
  </:when>

  <c:when>
  </:when>
  <c:otherwise>
  </:otherwise>
</c:choose> 
```

我似乎在工作，但这种行为是否得到保证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:17:55.667

您可以使用 jstl 但考虑更改逻辑并将其移动到后端，因为它在 jsp 中将过于复杂的逻辑。

# forms - Yii bootstrap 自定义登录页面

> ID：15417867
> 
> 赞同：1
> 
> 时间：2013-03-14T18:53:59.470
> 
> 标签：forms, twitter-bootstrap, login, yii, themes

我为我的 yii 应用程序安装了一个引导主题，以便在其登录页面上显示。如何将这些表单中输入的信息传递给 中的变量`login.php`？

另外，如何使主题中的“登录”按钮调用主题中的“登录”按钮`login.php`？

这些是引导主题中的形式：

```
 <div class="clearfix">
            <input type="text" placeholder="username">
          </div>

          <div class="clearfix">
            <input type="password" placeholder="password">
          </div>

          <button class="btn primary" type="submit">Sign in</button> 
```

这些是 yii 将在 login.php 中使用其默认主题显示的表单：

```
<div class="row">
    <?php echo $form->labelEx($model,'username'); ?>
    <?php echo $form->textField($model,'username'); ?>
    <?php echo $form->error($model,'username'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'password'); ?>
    <?php echo $form->passwordField($model,'password'); ?>
    <?php echo $form->error($model,'password'); ?>
</div>

<div class="row buttons">
    <?php echo CHtml::submitButton('Login'); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:17:37.040

对于 Yii 最佳实践。不要使用 login.php 文件，而是使用控制器/动作，并在该动作中定义您的登录逻辑，如下所示：登录视图文件

```
<?php $form=$this->beginWidget('CActiveForm', array(
        'id'=>'login-form',
        'enableClientValidation'=>true,
        'clientOptions'=>array(
            'validateOnSubmit'=>true,
        ),
        )); ?>
<div class="row">
  <?php echo $form->labelEx($model,'username'); ?>
  <?php echo $form->textField($model,'username'); ?>
  <?php echo $form->error($model,'username'); ?>
</div>

<div class="row">
  <?php echo $form->labelEx($model,'password'); ?>
  <?php echo $form->passwordField($model,'password'); ?>
  <?php echo $form->error($model,'password'); ?>
</div>
  <div class="row buttons">
  <?php echo CHtml::submitButton('Login'); ?>
</div> 
```

这是您的控制器操作：

```
public function actionLogin()
{
  $model=new LoginForm;
   if(isset($_POST['LoginForm']))
    {
           $model->attributes=$_POST['LoginForm'];
           if($model->validate() && $model->login()){
             //Your Logic//  
            }
      $this->render('login',array('model'=>$model));
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:52:49.230

```
 <?php $form=$this->beginWidget('CActiveForm', array(
                    'action'=>array('login.php')
                )); ?> 
```

通常 Yii 在控制器上调用一个动作。你了解 Yii 的基础知识吗？

# events - 这个同步原语有名字吗？

> ID：15417869
> 
> 赞同：1
> 
> 时间：2013-03-14T18:54:02.473
> 
> 标签：events, synchronization, terminology, semaphore

假设我有一个具有以下特性的同步原语：

1.  它有一个初始为零的*Count属性。*
2.  它有一个*等待*方法。*当在Count*为零的对象上调用时，它会立即返回。
    否则，它会阻塞并等待对象发出信号。
3.  它有一个*Signal*方法。当在具有正*Count*的对象上调用时，它会递减它并解除对*Wait*的当前/下一次调用的阻塞。
4.  如果在*Wait等待期间调用**Signal* 5 次，不仅当前的*Wait*会返回，而且接下来的 4 次 Wait 调用*也会*立即返回。
****   它有一个*ExpectSignal*（不确定名称）方法。它增加*Count*属性。***

 **这样的实体是否有一个标准的（即使是晦涩的）名称？**

# javascript - Riak - 如何在 Map 函数中获取当前项目的 ID

> ID：15417870
> 
> 赞同：0
> 
> 时间：2013-03-14T18:54:03.220
> 
> 标签：javascript, mapreduce, riak

使用 Riak，我如何获取在 Javascript 地图函数中正在处理的当前项目的 ID？

```
function(v, kd, arg) {
    var element = v.values[0];
    var id = "??"; // How to get the ID of the current item
    return [id];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:05:19.347

我发现了如何做到这一点：

```
function(v, kd, arg) {
    return [v.key];
} 
```

我在以下位置找到了来源：[http ://contrib.basho.com/get_keys.html](http://contrib.basho.com/get_keys.html)

# vb.net - 为什么我的 ListView 仍然包含表中的旧值并且不会根据查询刷新？

> ID：15417871
> 
> 赞同：0
> 
> 时间：2013-03-14T18:54:04.550
> 
> 标签：vb.net, oracle, listview

```
 listView.Items.Clear()

    cmd.CommandText = " select Item1," & _
                      "Item2, " & _
                      "Item3, " & _
                      "Item4," & _
                      "Item5," & _
                      "Item6" & _
                      " FROM myTable"

    gDR = cmd.ExecuteReader()

    While gDR.Read

        lstpenaltyview = listView.Items.Add(Null_To_String(gDR("Item1")))
        lstpenaltyview.SubItems.Add(gDR("Item2"))
        lstpenaltyview.SubItems.Add(gDR("Item3"))
        lstpenaltyview.SubItems.Add(gDR("Item4"))
        lstpenaltyview.SubItems.Add(gDR("Item5"))
        lstpenaltyview.SubItems.Add(gDR("Item6"))

    End While 
```

一切看起来都不错，除了当我从表中删除一些东西时，我仍然注意到我的 ListView 中的旧项目。我确实清楚了不是吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:00:24.323

这些是我会做的事情：

1）我将尝试在删除内容后重新填充列表视图。或者

2）[尝试实现一个代码，就像那个人如何实现一个数据绑定的列表视图：](https://stackoverflow.com/questions/435379/c-sharp-clear-all-items-in-listview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:03:52.920

我所需要的只是在查询结束时“提交”。

# excel - Excel 宏从多个工作簿写入单个

> ID：15417874
> 
> 赞同：2
> 
> 时间：2013-03-14T18:54:15.420
> 
> 标签：excel, vba

我有 300 个单独的工作簿，它们的格式相同，并且希望在每个工作簿中获取某些字段并写入一个工作簿，以便我可以将 infile 导入 SAS 并运行报告。我知道如何使用宏来进行简单的复制和粘贴，但你必须知道每本书的名称并打开它们，我有 300 个单独的工作簿，它们的名称都不同，因为它们是从不同的医院寄来的。

示例：我的书简称为宏 1 医院的书是 johnhopkins，另一本是 centralflorida 等等

一个可能的代码是：

johnhopkins.worksheets("sheet1").range("a1:g2").copy workbooks("macro.xslx").worksheets("sheet1").range("a1").insert shift:x1down

问题是我想复制和粘贴某些单元格，而不是所有在我提供给我的单个工作簿的工作簿中，我不确定如何从他们发送的内容中选择我想要的单元格。它们是实际的单元格 B5、b8、g13、i13、j13、k13、l13

我想将它们复制到我的工作簿上的 a1 到 g2 中。

然后另一个问题是工作簿的名称都不同，全部 300 个。是否有一个宏可以只复制我打开的工作簿而不每次都输入实际名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:15:25.707

你可以从这样的事情开始：

```
For i = 1 To Sheets.Count

Sheets.Item(i).Select
Range("A1:D10").Select
Selection.Copy
Sheets("Result").Select
Range("A1").Select
Selection.End(xlDown).Select
ActiveSheet.Paste

Next i 
```

您可以在不知道名称的情况下遍历工作表，然后将结果粘贴到“结果”工作表中现在，您只需复制您描述的范围，然后粘贴到另一张工作表中

玩得开心！

# c# - 无法确定要使用的参数规范

> ID：15417883
> 
> 赞同：2
> 
> 时间：2013-03-14T18:55:01.607
> 
> 标签：c#, mocking, nsubstitute

我在使用 NSubstitute 时遇到问题。我有这个短代码：

```
ReportingCycleDeliveryRepository
.When(f => f.Add(Arg.Any<ReportingCycleDelivery>()))
.Do(x => RepCycleDeliveries.Add((ReportingCycleDelivery)x[0])); 
```

`ReportingCycleDeliveryRepository.Add()`因此，当使用任何 ReportingCycleDelivery 参数调用我的 (void) 方法时，它应该将此项目添加到我的`RepCycleDeliveries`列表中。

但相反，它会引发异常：

*NSubstitute.Exceptions.AmbiguousArgumentsException*

“无法确定要使用的参数规范。请对同一类型的所有参数使用规范。”

这是为什么？为什么 NSubstitute 不能确定要使用的正确参数规范？我清楚地提供了一个提示，即论点可以是任何`ReportingCycleDelivery`项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:01:58.800

您应该能够将您的代码更改为以下内容，并让它按照您希望的方式工作：

```
ReportingCycleDeliveryRepository
    .When(f => f.Add(Arg.Do<ReportingCycleDelivery>(
        x => RepCycleDeliveries.Add(x[0]))); 
```

`ReportingCycleDeliveryRepository`如果没有看到and的代码，很难准确地说出为什么会出现这个错误`ReportingCycleDelivery`。

# xml - 根据数据中的字符数对 XML 数据进行排序

> ID：15417886
> 
> 赞同：1
> 
> 时间：2013-03-14T18:55:05.837
> 
> 标签：xml, sorting, xslt, xslt-1.0

我必须根据数据中的字符数对 XML 输出进行排序。到目前为止，我还无法在 XSLT 1.0 中弄清楚它。这是我正在使用的内容：

源 XML 文件：

```
<ROOT>
<REPLIST>
    <NAME>ABCDE.xml</NAME>
    <NAME>ABCDEFGH.xml</NAME>
    <NAME>ABC.xml</NAME>
    <NAME>ABCDEFG.xml</NAME>
    <NAME>ABCD.xml</NAME>
    <NAME>ABCDEF.xml</NAME>
    <NAME>JKLMNOPQRST.xml</NAME>
    <NAME>JKLMNOPQRS.xml</NAME>
    <NAME>JKLMNOPQ.xml</NAME>
    <NAME>JKLMN.xml</NAME>
</REPLIST>
<DATALIST>
    <ExtractedName>ABCDEFGH.xml</ExtractedName>
    <ExtractedName>JKLMN.xml</ExtractedName>
    <ExtractedName>ABCDEFG.xml</ExtractedName>
    <ExtractedName>ABCD.xml</ExtractedName>
    <ExtractedName>JKLMNOPQRST.xml</ExtractedName>
    <ExtractedName>ABCDEFG.xml</ExtractedName>
</DATALIST>
</ROOT> 
```

输出

```
<TestData>
<FormName>ABCDEFGH</FormName>
<FormName>ABCDEFG</FormName>
<FormName>ABCD</FormName>
<FormName>JKLMNOPQRST</FormName>
<FormName>JKLMN</FormName>
</TestData> 
```

期望的输出：

```
<TestData>
<FormName>JKLMNOPQRST</FormName>
<FormName>ABCDEFGH</FormName>
<FormName>ABCDEFG</FormName>
<FormName>JKLMN</FormName>
<FormName>ABCD</FormName>
</TestData> 
```

样式表（1.0）：

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes"/>
<xsl:output method="xml" omit-xml-declaration="yes" standalone="no"/>
<xsl:template match="/">
    <TestData>
        <xsl:apply-templates/>
    </TestData>
</xsl:template>
<xsl:template match="/ROOT/REPLIST/NAME[.=/ROOT/DATALIST/ExtractedName]">
    <FormName>
        <xsl:value-of select="translate(.,'.xml','')"/>
    </FormName>
</xsl:template>
<xsl:template match="text()">
</xsl:template> 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:03:01.710

以下是您的操作方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:output method="xml" omit-xml-declaration="yes" standalone="no"/>
  <xsl:key name="kExtract" match="ExtractedName" use="."/>

  <xsl:template match="/ROOT">
    <TestData>
      <xsl:apply-templates select="REPLIST/NAME[key('kExtract', .)]">
        <xsl:sort select="string-length(substring-before(., '.xml'))"
                  data-type="number" order="descending"/>
      </xsl:apply-templates>
    </TestData>
  </xsl:template>

  <xsl:template match="REPLIST/NAME">
    <FormName>
      <xsl:value-of select="substring-before(., '.xml')"/>
    </FormName>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<TestData>
  <FormName>JKLMNOPQRST</FormName>
  <FormName>ABCDEFGH</FormName>
  <FormName>ABCDEFG</FormName>
  <FormName>JKLMN</FormName>
  <FormName>ABCD</FormName>
</TestData> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:23:43.050

**更短、更简单、更健壮的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:key name="kNameByVal" match="NAME" use="."/>

 <xsl:template match="REPLIST">
  <TestData>
   <xsl:apply-templates select=
     "key('kNameByVal', /*/DATALIST/*)">
     <xsl:sort select="-string-length()" data-type="number"/>
   </xsl:apply-templates>
  </TestData>
 </xsl:template>

 <xsl:template match="NAME">
  <FormName><xsl:value-of select="substring(.,1, string-length()-4)"/></FormName>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<ROOT>
    <REPLIST>
        <NAME>ABCDE.xml</NAME>
        <NAME>ABCDEFGH.xml</NAME>
        <NAME>ABC.xml</NAME>
        <NAME>ABCDEFG.xml</NAME>
        <NAME>ABCD.xml</NAME>
        <NAME>ABCDEF.xml</NAME>
        <NAME>JKLMNOPQRST.xml</NAME>
        <NAME>JKLMNOPQRS.xml</NAME>
        <NAME>JKLMNOPQ.xml</NAME>
        <NAME>JKLMN.xml</NAME>
    </REPLIST>
    <DATALIST>
        <ExtractedName>ABCDEFGH.xml</ExtractedName>
        <ExtractedName>JKLMN.xml</ExtractedName>
        <ExtractedName>ABCDEFG.xml</ExtractedName>
        <ExtractedName>ABCD.xml</ExtractedName>
        <ExtractedName>JKLMNOPQRST.xml</ExtractedName>
        <ExtractedName>ABCDEFG.xml</ExtractedName>
    </DATALIST>
</ROOT> 
```

**产生了想要的正确结果**：

```
<TestData>
   <FormName>JKLMNOPQRST</FormName>
   <FormName>ABCDEFGH</FormName>
   <FormName>ABCDEFG</FormName>
   <FormName>JKLMN</FormName>
   <FormName>ABCD</FormName>
</TestData> 
```

# python - 从python中的文件名中提取数字

> ID：15417893
> 
> 赞同：0
> 
> 时间：2013-03-14T18:55:55.203
> 
> 标签：python, file, python-2.7, python-3.x, file-handling

我有一个目录，其中有许多数据文件，但数据文件名有任意数字。例如

```
data_T_1e-05.d
data_T_7.2434.d
data_T_0.001.d 
```

等等。由于文件名中的小数点，它们没有根据数字的值进行排序。我想做的是以下内容：我想打开每个文件，从文件名中提取数字，将其放入数组中并使用数据进行一些操作。例子：

```
a = np.loadtxt("data_T_1e-05.d",unpack=True)
res[i][0] = 1e-05
res[i][1] = np.sum[a] 
```

我想通过运行循环为每个文件执行此操作。我认为这可以通过创建一个包含所有文件名的数组（使用`import os`）然后用它做一些事情来完成。如何做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T18:57:23.877

如果您的文件都以相同的前缀开头并以相同的后缀结尾，只需切片并传递给`float()`：

```
number = float(filename[7:-2]) 
```

这将删除前 7 个字符（即`data_T_`）和后 2个字符（ `.d`）。

这适用于您的示例文件名：

```
>>> for example in ('data_T_1e-05.d', 'data_T_7.2434.d', 'data_T_0.001.d'):
...     print float(example[7:-2])
... 
1e-05
7.2434
0.001 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:46:48.573

```
import os
# create the list containing all files from the current dir
filelistall = os.listdir(os.getcwd())
# create the list containing only data files. 
# I assume that data file names end with ".d"
filelist = filter(lambda x: x.endswith('.d'), filelistall)
for filename in filelist:
   f = open(filename, "r")
   number = float(filename[7:-2])
   # and any other code dealing with file
   f.close() 
```

# knockout.js - 在动态淘汰 js 应用程序上使用 CSS3 pie

> ID：15417899
> 
> 赞同：0
> 
> 时间：2013-03-14T18:56:33.357
> 
> 标签：knockout.js, css3pie

`Knockout.js,`我已经使用定期添加、移动和销毁节点的地方构建了一个单页应用程序`html`，我一直在 Chrome、Firefox 和 IE 9 中开发它，但一直计划使用`CSS3 PIE`.

现在我已经到了添加 PIE 的阶段，我似乎遇到了问题。

我已经将行为应用于两个`divs`- 一个在初始 HTML 源中，另一个是动态添加的。最初渲染的 div 具有所需的框阴影和边框半径。

动态添加的 div 没有 CSS3 样式，但确实应用了相同的边框`CSS selector.`

是否`CSS3 PIE only`在运行时运行？我可以触发它重新运行吗？

非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:52:12.317

最后，我通过将行为应用到一个类来解决这个问题 - “ie-behaviour”，然后在渲染后将这个类添加到元素中，不知道为什么，但这似乎触发了 CSS3 PIE 应用所有必需的样式。

# c# - 发送响应时并非所有数据都已发送

> ID：15417904
> 
> 赞同：0
> 
> 时间：2013-03-14T18:56:51.110
> 
> 标签：c#, .net-4.0

我有一个基于 HTTPListener 的 .NET 网络服务器，它根据请求生成数据并将其输出。我正在使用 StreamWriter 写入输出流。当我编写数据时，并非所有数据都在 Chrome 中接收，但所有数据都在代码中发送。如果我去查看源代码，它只显示发送的部分数据。

它几乎看起来像是某种超时，或者它变得太大，或者其他什么。是否需要在 HTTPListener 或请求上下文中设置一些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:01:10.113

根据评论：

`Flush`在发送之前调用流。

# jsf - 没有出现在里面

> ID：15417908
> 
> 赞同：0
> 
> 时间：2013-03-14T18:57:05.500
> 
> 标签：jsf, jsf-2, primefaces

我想就地编辑一个自动完成文本字段：

```
 <h:panelGroup>
        <ui:repeat value="#{cc.attrs.relations}" var="ur">
            <p:panel headerText="Relation">

                <p:inplace  editor="true" >
 <!--                        <p:inputText value="#{ur.relation.name}"
                                 required="true" label="text"/>-->
                    <p:autoComplete  
                                    value="myval"  
                                   />
                </p:inplace>

            </p:panel> 
        </ui:repeat>
    </h:panelGroup> 
```

但是，这不起作用（未显示自动完成功能。）。

你知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:49:25.000

没有显示自动完成的原因是 inplace 没有像 inputText 那样获得它的标签。添加 label="TheLabel" 解决了这个问题。

```
<h:panelGroup>
    <ui:repeat value="#{cc.attrs.relations}" var="ur">
        <p:panel headerText="Relation">

            <p:inplace  editor="true" label="TheLabel">
<!--                        <p:inputText value="#{ur.relation.name}"
                             required="true" label="text"/>-->
                <p:autoComplete  
                                value="myval"  
                               />
            </p:inplace>

        </p:panel> 
    </ui:repeat>
</h:panelGroup> 
```

# android - Android Opengl 2.0 Alpha Blending 问题 - 半透明纹理

> ID：15417910
> 
> 赞同：4
> 
> 时间：2013-03-14T18:57:07.127
> 
> 标签：android, opengl-es, transparent, alpha-transparency

我在游戏中遇到了 Apha Blending 的问题，当我用 alpha 纹理绘制表面时，本应不可见的部分是不可见的，但本应可见的部分是半透明的。这取决于光量 - 距离光源越近越好，但在阴影中这些物体几乎消失。

我启用 Alpha 混合：

```
GLES20.glEnable(GLES20.GL_BLEND); 
```

然后我设置功能：

```
GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA); 
```

或者

```
GLES20.glBlendFunc(GLES20.GL_ONE, GLES20.GL_ONE_MINUS_SRC_ALPHA); 
```

效果还是一样的。我使用带有 alpha 通道的 48 位 png 文件。

我的片段着色器如下所示：

```
final String fragmentShader =   
"precision mediump float; \n"           
    +"uniform vec3 u_LightPos; \n"      
    +"uniform sampler2D u_Texture; \n"  
    +"varying vec3 v_Position;  \n" 
    +"varying vec4 v_Color;  \n"        
    +"varying vec3 v_Normal; \n"        
    +"varying vec2 v_TexCoordinate; \n" 
    +"void main() \n"                           
    +"{          \n"                              
    +"float distance = length(u_LightPos - v_Position); \n"                  
    +"vec3 lightVector = normalize(u_LightPos - v_Position);    \n"                 
    +"float diffuse = max(dot(v_Normal, lightVector), 0.0); \n"                                                                               
    +"diffuse = diffuse * (" + Float.toString((float)Brightness) +" / (1.0 + (0.08 * distance)));   \n"
    +"diffuse = diffuse;    \n"  
    //+3
    +"gl_FragColor = (v_Color * diffuse * texture2D(u_Texture, v_TexCoordinate));   \n"
    +"} \n"; 
```

和顶点着色器：

```
uniform mat4 u_MVPMatrix;                  
uniform mat4 u_MVMatrix;        
attribute vec4 a_Position;      
attribute vec3 a_Normal;        
attribute vec2 a_TexCoordinate; 
varying vec3 v_Position;    
varying vec4 v_Color;   
varying vec3 v_Normal;  
varying vec2 v_TexCoordinate;             
void main()                                                     
{                                                         
    v_Position = vec3(u_MVMatrix * a_Position);            
    v_Color = a_Color;
    v_TexCoordinate = a_TexCoordinate;                                      
    v_Normal = vec3(u_MVMatrix * vec4(a_Normal, 0.0));
    gl_Position = u_MVPMatrix * a_Position;                               
}      

 Thx for any suggestions:) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:16:39.697

您的片段着色器将纹理颜色的所有 4 (RGBA) 分量与漫反射因子相乘。这将使您的 alpha 分量在漫射光消失时趋向于零，从而使您的精灵几乎不可见。

要修复您的代码，请将其更改为以下内容：

```
gl_FragColor = v_Color * texture2D(u_Texture, v_TexCoordinate);
gl_FragColor.rgb *= diffuse; 
```

# ruby-on-rails - 用于生产的 Rails Active Admin 预编译问题

> ID：15417911
> 
> 赞同：1
> 
> 时间：2013-03-14T18:57:08.270
> 
> 标签：ruby-on-rails, activeadmin

当我编译资产时，它工作正常并且没有给活动管理员错误

```
Undefined mixin 'global-reset'. 
```

我陷入了这个问题，无法找到任何解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:48:01.837

看看[这个问题](https://github.com/gregbell/active_admin/issues/810)。

尝试将以下内容添加到`production.rb`：

```
config.assets.precompile += %w( active_admin.css active_admin/print.css active_admin.js ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T06:59:18.297

我最近在使用 rails 4 时遇到了这个问题：

这可能是由使用“require_tree”引起的。在 application.css 中。一种解决方案是将 active_admin 样式表移动到供应商/资产/样式表中。

# c# - 在 2 个图表对象之间对齐图表垂直轴

> ID：15417913
> 
> 赞同：7
> 
> 时间：2013-03-14T18:57:18.673
> 
> 标签：c#, winforms, user-interface, mschart

在我的应用程序中，我有 2 个图表，一个在 UI 上的另一个上方（如靠近显示器顶部）。两张图的水平轴指的是相同的时间范围。虽然它们的垂直轴可能非常不同，所以我想将它们保留为图表。他们提供免费信息，因此，我想保持他们的水平轴同步，即使他们的垂直轴标签让他们移动。

在这两种情况下，包含它们的图表控件具有相同的宽度，只是内部的数据被移动了。

我目前有这个：

```
10000|
 8000|
 6000|
 4000|
 2000|
    0 ---------------------------------
      0                              10

Long Label 3|
Long Label 2|
Long Label 1|
Long Label 0 -----------------------
             0                    10 
```

我想要这个：

```
 10000|
        8000|
        6000|
        4000|
        2000|
           0 ---------------------------------
             0                              10

Long Label 3|
Long Label 2|
Long Label 1|
Long Label 0 ---------------------------------
             0                              10 
```

它们最初是单独的 Chart MSChart 控件。我尝试将它们与不同的图表区域放在同一个图表控件中，但它并没有解决问题。

我怎么能做到这一点？我希望它们在单独的图表控件上，但如果必须，我可以满足于单独的图表区域。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T20:47:15.237

我终于找到了答案。我仍然希望在不同的图表控件中使用它，但是，如果它们是同一图表控件中的不同图表区域，则可以使用该`ChartArea.AlignWithChartArea`属性。

```
//Say We have 2 Chart areas, one named "Main Info" and the other "Supplemental"
chart1.ChartAreas["Supplemental"].AlignWithChartArea = "Main Info";
chart1.ChartAreas["Supplemental"].AlignmentOrientation = AreaAlignmentOrientations.Vertical;
chart1.ChartAreas["Supplemental"].AlignmentStyle = AreaAlignmentStyles.All; 
```

这将使它们按照我想要的方式排列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T01:08:46.333

这是迟到的答案，但写给想要这个答案的人。
我的答案是使用其他图表。

```
double x_position = chart1.ChartAreas[0].AxisX.ScaleView.Position;
double x_size = chart1.ChartAreas[0].AxisX.ScaleView.Size;
chart2.ChartAreas[0].AxisX.ScaleView.Zoom(x_position, x_position + x_size); 
```

对于实时同步，请在图表事件 AxisViewChanged 中使用此代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-02T14:25:19.343

对于实时同步多个 CharArea，如 Temp 所说：

```
private void chart1_AxisViewChanged(object sender, ViewEventArgs e)
{
    foreach (var charArea in chart1.ChartAreas)
    {
        if (charArea != e.ChartArea)
        {
            double x_position = e.ChartArea.AxisX.ScaleView.Position;
            double x_size = e.ChartArea.AxisX.ScaleView.Size;
            charArea.AxisX.ScaleView.Zoom(x_position, x_position + x_size);    
        }                
    }            
} 
```

# tabs - 在 Aptana Studio 中可以有一个多行选项卡组

> ID：15417916
> 
> 赞同：2
> 
> 时间：2013-03-14T18:57:30.843
> 
> 标签：tabs, aptana

我经常打开许多文件，并且希望有一种方法可以显示选项卡组中的所有选项卡（我的当前位于顶部），以便能够选择适当的文件进行编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-04T20:03:47.530

在 Aptana 中不可能做到这一点

# verilog - 如何在系统verilog中取消注册

> ID：15417925
> 
> 赞同：1
> 
> 时间：2013-03-14T18:58:03.517
> 
> 标签：verilog, verification, system-verilog

如果我不知道大小，如何使 SystemVerilog 中的寄存器无效？例如，如果我有：

```
reg [DATA_WIDTH-1:0] data_stack; 
```

`DATA_WIDTH`给模块一些参数。是否可以为寄存器分配零`data_stack`？

请注意，将 a 初始化`reg`为零就足够了，因为我可以简单地在两者之间执行按位和 nullify `data_stack`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T19:02:16.860

IEEE Std 1800-2009 是黄金参考。以下将所有位设置为 0：

```
data_stack = '0; 
```

请参阅“整数文字常量”部分。

> 可以通过在单位值前面加上撇号 (') 来指定未调整大小的单位值，但没有基本说明符。unsized 值的所有位都应设置为指定位的值。在一个自行确定的上下文中，一个无大小的单比特值应具有 1 位的宽度，并且该值应被视为无符号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T19:02:37.133

如果我理解你的问题，你想知道如何生成一个宽度相同的零值`data_stack`？

在这种情况下，请使用复制运算符：

```
data_stack = {DATA_WIDTH{1'b0}}; 
```

这会生成`DATA_WIDTH`多个零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T19:08:31.220

如果您搜索初始化寄存器而不是无效，我认为您的搜索会产生更好的结果。

如果这是一个测试台变量，那么只需：

```
initial begin
  data_stack = {DATA_WIDTH{1'b0}};
end 
```

如果要在触发器中使用，则需要将其重置：

```
always @(posedge clk or negedge reset_n) begin
  if (~reset_n) begin
    data_stack <= {DATA_WIDTH{1'b0}};
  end
  else begin
    //<=nextvalue;
  end
end 
```

# javascript - 制作灵活的变量名

> ID：15417926
> 
> 赞同：-2
> 
> 时间：2013-03-14T18:58:03.160
> 
> 标签：javascript, html

我有这个包含多个值的变量。我希望价值是独一无二的。例如：'q1'+ num : document.getElementById("q1").value

注意： num 具有唯一数字的值

```
var newItem = {

    'methv': document.getElementById("methv").value,
    'q1': document.getElementById("q1").value,
    'q2':document.getElementById("q2").value,
    'q3':document.getElementById("q3").value,
    'q4':document.getElementById("q4").value,
    'comm':document.getElementById("comm").value,

}; 
```

我的 php 页面上的 num 具有以下值：

```
<input id="num" type="hidden" value="<?php echo $post['unique person code']; ?>" /> 
```

我希望这是添加到变量时的唯一标识符。例如 'methv' + num : document.getElementById("methv").value

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:12:33.143

您可以使用`[]`. 所以你可以这样做：

```
var num = document.getElementById("num").value;

var newItem = {};
newItem['methv'+num] = document.getElementById("methv").value; 
```

或者，您可以将`num`其用作自己的键，然后在其下方嵌套一个对象。像这样：

```
var num = document.getElementById("num").value;

var newItem = {};
newItem[num] = {
    "methv": document.getElementById("methv").value
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T19:04:37.623

`eval(...)`是答案：

```
eval( document.getElementById('methv').value + ": document.getElementById('methv').value"); 
```

eval 允许您生成使用变量值作为变量名的源代码。

# r - 如何修改系统打印方式？

> ID：15417929
> 
> 赞同：2
> 
> 时间：2013-03-14T18:58:20.943
> 
> 标签：r, oop

a ( )的默认`R`打印方法报告*Null Deviance*和*Residual Deviance*但不报告后者的相对大小作为前者的一部分，即 IMO，与评估模型拟合比绝对值更相关。`glm``print.glm`

 **我想修改方法以使其打印相对偏差。例如，现在`R`打印：

```
Degrees of Freedom: 36 Total (i.e. Null);  35 Residual
Null Deviance:      182.8 
Residual Deviance: 10.22    AIC: 63.39 
```

我要打印

```
Degrees of Freedom: 36 Total (i.e. Null);  35 Residual
Null Deviance:      182.8 
Residual Deviance: 10.22    AIC: 63.39 
Relative Residual Deviance: 5.59% 
```

（注意：我知道如何计算和漂亮地打印数字！）

不同的系统为此提供不同的设施；例如，`Emacs`有*钩子*和 CLOS MOP 有[`after`-methods](http://www.lispworks.com/documentation/HyperSpec/Body/07_fb.htm)，但我不知道如何在`R`.

我该怎么做`R`？是否`R`有方法限定符？

谢谢！

PS。我不想显式地编辑系统代码，我也不想复制和修改它：当下一个版本`R`发布时，我不想编辑我的代码来合并对系统所做的改进`print.glm`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:31:02.620

啊，原来很简单：

```
print.glm.system <- print.glm
print.glm <- function(glm, ...) { 
  print.glm.system(glm, ...)
  cat("Relative Residual Deviance: ",100*glm$deviance/glm$null.deviance,"%\n") 
  invisible(glm)
} 
```

PS。这不是一个无限循环，因为`print.glm.system`包含原始的“系统”函数**对象**。**

# c# - 如何在此处应用单例模式以防止一次又一次地创建 fom3 对象

> ID：15417932
> 
> 赞同：0
> 
> 时间：2013-03-14T18:58:21.663
> 
> 标签：c#

```
public Form fr;
private void button2_Click(object sender, EventArgs e)
{

       fr = Form1.ActiveForm;

       fr.Hide();

       Form3 fr1 = new Form3(fr);
       fr1.Show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:02:24.583

您不需要创建`Form3`为单例（我认为您不能这样做），但您只需要实例化一次。例如你可以使用这样的东西：

```
public Form fr;
Form3 fr1 = null;
private void button2_Click(object sender, EventArgs e)
{

       fr = Form1.ActiveForm;

       fr.Hide();
       if(fr1==null)
        fr1 = new Form3(fr);
       fr1.Show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:02:35.980

不。

不能将单例模式与 UI 组件一起使用，因为 Windows 窗体封装了一个 Win32 hWnd 窗口，最终需要将其释放，并且您无法复活窗口，必须重新创建它，这与单例模式相反。

此外，Windows 窗体设计器需要一个公共默认构造函数。即使您可以使用单例，您每次在设计器中编辑表单时都需要禁用私有构造函数。

假设您的项目没有消费者，一个更好的主意是将您的表单更改为`internal`并自己跟踪每个实例化。

# ruby-on-rails - Ajax 语法错误

> ID：15417934
> 
> 赞同：0
> 
> 时间：2013-03-14T18:58:25.233
> 
> 标签：ruby-on-rails, ajax

我试图实现这个代码，当我运行我的本地服务器时，我得到一个语法错误。我正在运行 rails 版本 3.2.11 并认为这可能与此代码有关。

```
<h1>Time Ajax Demo</h1>
<p><%= link_to 'Get Current Time', time_refresh_path, 
     remote: true %>
</p>
<p id='currentTime'>
Current time will appear here
</p> 
```

这是我的错误：

```
syntax error, unexpected ':', expecting ')'
     remote: true );@output_buffer.safe_concat(' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:33:17.290

我认为您正在使用 ruby`1.8.X`​​ 。如果您使用的 Ruby 版本少于`1.9.X`使用`=>`：

```
<%= link_to 'Get Current Time', time_refresh_path, :remote => true %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:03:43.947

尝试`link_to 'Get Current Time', time_refresh_path, :remote => true`

[http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

# javascript - 在 onload 事件中调用脚本或将代码放在 html 末尾之间的区别

> ID：15417938
> 
> 赞同：1
> 
> 时间：2013-03-14T18:58:37.713
> 
> 标签：javascript, html, dom, html-parsing

我正在阅读 google maps api 文档，偶然发现了一段解释异步加载 API 的段落。api文档可以在[这里找到](https://developers.google.com/maps/documentation/javascript/tutorial)

作为示例，它显示了一个如下所示的脚本：

```
function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=TRUE_OR_FALSE&callback=initialize";
  document.body.appendChild(script);
}

window.onload = loadScript; 
```

这段代码和只是简单地将脚本调用一直添加到 html 标记的末尾有什么区别？像这样：

```
 <!-- rest of the markup -->

        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=TRUE_OR_FALSE&callback=initialize"></script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:05:36.173

您通常希望 JS 脚本在 DOM 加载后运行，并且在读取/解析 html 时不一定会发生此事件。IE 在读取 HTML 和构建 JS 需要遍历的 DOM 之间存在一些时间。

# database - 自动完成文本视图

> ID：15417941
> 
> 赞同：-1
> 
> 时间：2013-03-14T18:58:46.320
> 
> 标签：database

我正在开发应用程序，其中我使用两个 autocompletetextview，其中第一个 autocompletetextview 数据是我从数据库中获取的，而在第二个 autocompletetextview 中，我只想要那些与第一个 autocompletetextview 相关的数据。意味着如果数据库中有 3 列，并且 1 列链接到第一个 autocomlepettextview，那么只有第 2 列中的那些数据必须是可见的，这些数据在 column 中被选中。public String[] getSymptom() { Cursor cursor = this.sqliteDBInstance.query(DB_TABLE_NAME, new String[] {COLUMN_2_Symptom}, null, null, null, null, null);

```
 if(cursor.getCount() >0)
        {
             str = new String[cursor.getCount()];
            int i = 0;

            while (cursor.moveToNext())
            {
                 str[i] = cursor.getString(cursor.getColumnIndex(COLUMN_2_Symptom));
                 i++;
             }

            return str;
        }
        else
        {
            return new String[] {};
        }
    }

    public String[] getSymptom1() {
        // TODO Auto-generated method stub
        String[] clmn=new String[]{COLUMN_3_Symptom1};
        Cursor curs=this.sqliteDBInstance.query(DB_TABLE_NAME,clmn ,"Symptom = ?",new String[]{COLUMN_2_Symptom},null,null,null);
        //Cursor curs=this.sqliteDBInstance.rawQuery("Select Symptom1 from Diseaseslist where Symptom='" + + "'  ", null);
        if(curs.getCount()>0)
        {
            str1 = new String[curs.getCount()];
            int j= 0;
            while(curs.moveToNext())
            {
                str1[j] = curs.getString(curs.getColumnIndex(COLUMN_3_Symptom1));
                j++;
            }
            return str1;
        }
        else
        {
        return new String[] {};
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:10:24.997

我不知道你在什么环境下构建你的应用程序，所以我假设它是一个网络应用程序。

您要求的是“级联自动完成” - 这是一个带有代码的示例：

[http://www.webdeveasy.com/cascading-autocompletes-using-jquery-ui/](http://www.webdeveasy.com/cascading-autocompletes-using-jquery-ui/)

# javascript - Internet Explorer 中的 srcElement.readOnly 和 target.readOnly 问题

> ID：15417943
> 
> 赞同：1
> 
> 时间：2013-03-14T18:59:01.187
> 
> 标签：javascript, jquery, internet-explorer, readonly

我不确定我是否理解我正在工作的这个脚本中 IE 的行为。这是我正在使用的脚本的一部分，似乎在 Chrome 中运行良好

```
$(document).keydown(function (event) {
    var keyvalue = event.which || event.keyCode; 
    var eventtarget =  event.srcElement.nodeName || event.target.nodeName; 
    var readonlycheck = event.srcElement.readOnly || event.target.readOnly;
}); 
```

问题出现在 readonlycheck 变量上。在 IE 中，我收到“无法获取未定义或空引用的属性 'readOnly'”的错误。

在 Chrome 中，如果已定义，则 readOnly 返回“true”，如果未定义，则返回“false”。IE 给我一个错误，即使它仍然适用于 nodeName。

我真正感到困惑的是，我可以通过更改最后一行来消除 target.readOnly 来使其工作。所以这似乎适用于两种浏览器......

```
var readonlycheck = event.srcElement.readOnly; 
```

谁能解释为什么 readOnly 的行为不同？另外，我认为 srcElement 只是 IE，那么为什么 Chrome 在没有 target.readOnly 的情况下仍然可以工作？

任何帮助，将不胜感激。我对 javascript 和 jquery 还是很陌生，所以我确定我错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:02:23.913

```
var readonlycheck = event.srcElement.readOnly || event.target.readOnly; 
```

应该将其更改为

```
var readonlycheck = (event.srcElement !== undefined) ? event.srcElement.readOnly : event.target.readOnly; 
```

您如何编写代码，即使 srcElement.readOnly 确实存在，但当它评估为 false 时，它​​会尝试读取 event.target，这会破坏 IE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:04:52.980

在您的代码中，`function(e)`尽管您在函数中指定使用`event`而不是`e`.
此外，由于 event.target 和 event.srcElement 是同一件事，因此在开始时启动一次目标会更有意义。

```
 var target = event.target || event.srcElement; 
```

将您的代码更新为类似于以下内容应该可以工作：

```
$(document).keydown(function (event) {
    var target = event.target || event.srcElement;    

    var keyvalue = event.which || event.keyCode; 
    var eventtarget =  target.nodeName; 
    var readonlycheck = target.readOnly;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:06:34.573

问题是短路`||`运算符。如果`event.srcElement.readOnly`计算结果为`false`，则将计算正确的操作数（应该是）`e.target.readOnly`。和写法一样，例如：

```
var readonlycheck = false || e.target.readOnly; 
```

您可以改用大括号来解决此问题：

```
var readonlycheck = (e.target || event.srcElement).readOnly 
```

请注意，我将符合标准的标准移至左侧，以便首先对其进行评估。它在这里并没有太大的区别，但是在更耗时的操作中它可以，所以我只是发现这是一个很好的实践。

当我需要事件对象和事件目标时，我使用以下代码启动大多数事件处理程序：

```
function evtHandler(evt) {
    evt = evt || window.event;
    var target = evt.target || evt.srcElement;
} 
```

# vba - 在 QTP 中如何识别一个 web 元素是否在当前可见的浏览器窗口中可见

> ID：15417944
> 
> 赞同：1
> 
> 时间：2013-03-14T18:59:03.377
> 
> 标签：vba, qtp

在我的全屏浏览器页面上，页眉可见，但页脚在当前窗口中不可见。要查看页脚，我们需要向下翻页 N 次，因为当我们向下翻页（动态填充）时会填充中间内容。所以我的问题是要知道我需要向下翻页多少次才能看到页脚。添加到这个问题，是否有可能知道一个 web 元素是否在当前可见的浏览器区域下方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:07:24.290

如果您使用 QTP 来识别和操作对象，则无需向下滚动。确保您使用强大的定位器属性（htmlId、ObjectId 等）来识别元素，并且您的代码可以正常工作。QTP 作用于网页的 HTML 源代码；因此，您要处理的元素是否可见并不重要。我假设这里没有 AJAX 组件。使用 AJAX，您需要采用不同的策略。

# matrix - 稀疏矩阵编辑

> ID：15417946
> 
> 赞同：0
> 
> 时间：2013-03-14T18:59:24.237
> 
> 标签：matrix, editing, inversion, singular

我是新来的，所以我不确定以前是否有人问过，但我确实看过它是否在那里。

如果有人遇到过类似的问题，我很感兴趣。我有稀疏矩阵正在被 LU 分解，并且那些 L 和 U 因子比倒置。现在我遇到的问题如下。由于输入数据，原始稀疏矩阵需要编辑，并且在某些情况下（我知道为什么）它会变成单数。解决方案很简单，我将删除那些使其单一的元素的行和列，并继续我的代码，但是有没有办法编辑反转的 LU 因子或者我每次都必须创建新的？它消耗大量时间，因为非零元素的数量大约为 10K 或更多。

# ios - NSFetchedResultsController 的 didChangeSection 方法没有被调用（错误）

> ID：15417950
> 
> 赞同：0
> 
> 时间：2013-03-14T18:59:33.993
> 
> 标签：ios, xcode, uitableview, nsfetchedresultscontroller

我的 NSFetchedResultsController 的 didChangeSection 方法没有被调用。我在网上搜索过，发现可能是对 sectionNameKeyPath 使用瞬态属性会导致这个问题。从这里：[“didChangeSection：” NSfetchedResultsController 委托方法没有被调用](https://stackoverflow.com/questions/4637744/didchangesection-nsfetchedresultscontroller-delegate-method-not-being-called)

这真的是因为瞬态属性吗？以及如何在对 sectionNameKeyPath 使用瞬态属性时调用 didChangeSection？我使用 viewForHeaderInSection 自定义节标题，如何在没有 didChangeSection 方法的情况下让它更新？

现在我用`[self.tableView reloadDate]`in `viewWillAppear`，但是添加或删除一个项目后感觉有点慢，虽然可能是 0.5 秒。

我的 fetchedResultsController 的设置就像 DateSectionTitles，Apple 的一个示例：http: [//developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html)

该示例很简单，仅包含`- (NSFetchedResultsController *)fetchedResultsController`在获取结果控制器部分中。我添加了一些与 tableview 相关的方法：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller 
```

只是`- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type`没有被调用。

我使用日期作为部分标题，但需要更新部分标题的另一部分，即行项目金额的总和。

更新：我错了。它正在被调用。我想插入一个单元格（不是新部分），应该调用 didChangeSection 并更新我自定义的部分标题。但是 didChangeSection 仅被调用以插入删除部分。只需使用 [self.tableView reloadDate]，节标题将更新单元格更改。

我尝试将 [self dismissViewControllerAnimated:YES completion:NULL] 放在模态视图的关闭视图方法的前面位置，视图将快速关闭并且可以看到单元格插入动画。

# sas - 从 SPSS 导入过程

> ID：15417951
> 
> 赞同：0
> 
> 时间：2013-03-14T18:59:40.193
> 
> 标签：sas

对 SAS 来说相对较新，我在 SPSS (.sav) 数据文件上使用 proc import，它运行良好，但我注意到它只引入了 SPSS 值标签而不是数字等价物。例如，在 Gender 列中 1='male', 2='female' 并且在 SAS 数据集中显示 'male' 和 'female' 而不是 1 或 2。

任何见解将不胜感激。当前代码...

```
 proc import datafile = "C:\Data\workload_20130314.sav"
     out=library.workload_20130314
     dbms = sav
     replace;
 run; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:37:12.007

您可能在那里有基础值，它们可能只是格式化了。尝试打开数据集并查看您正在查看的列之一的列属性；它可能具有类似于 Q49F 的格式。或这样做的东西。它仍然适用于 PROC MEANS 或其他任何数字变量。

你可以跑，我想，像

```
proc datasets;
modify my_dataset;
format _all_;
quit; 
```

删除覆盖。您也可以根据具体情况执行此操作。

# session - GWT：登录记住我

> ID：15417954
> 
> 赞同：1
> 
> 时间：2013-03-14T18:59:53.607
> 
> 标签：session, gwt, login

我试图理解这个[登录示例](http://code.google.com/p/google-web-toolkit-incubator/wiki/LoginSecurityFAQ)。
有一个称为“checkWithServerIfSessionIdIsStillLegal”的过程。
我想知道服务器如何验证会话是否仍然有效，因为当用户关闭浏览器时会话 ID 总是不同的。
有人可以解释一下这是如何工作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:48:14.707

通过在 onModule load(when he `logs in`) 中将会话 id 设置为 cookie，并在他访问登录页面后再次检查。

```
 String sessionID = result.getSessionId();
         final long DURATION = 1000 * 60 * 60 * 24 * 1;
         Date expires = new Date(System.currentTimeMillis() + DURATION);
         Cookies.setCookie("sid", sessionID, expires, null, "/", false); 
```

这是您所指的[checkWithServerIfSessionIdIsStillLegal()](http://varuntayur.wordpress.com/2012/01/25/session-management-in-gwt/)的完整实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:57:48.057

看看下面的链接。

[不能对多个 GWT 应用程序使用相同的 cookie](https://stackoverflow.com/questions/14305654/cannot-use-same-cookie-for-multiple-gwt-applications/14306386#14306386)

这可能会解决您的问题。

# php - 为什么我的用户名被截断了？

> ID：15417955
> 
> 赞同：1
> 
> 时间：2013-03-14T19:00:00.490
> 
> 标签：php

在下面的数组中，您会看到`userId = 16`. 但是，当我运行一个`foreach`循环时，它会返回`userId = 1`. 为什么它返回`1`而不是返回`16`？

```
Array
(
    [userId] => 16
    [positionTitle] => Array
        (
            [0] => j1
            [1] => j2
        )

    [company] => Array
        (
            [0] => c1
            [1] => c2
        )

    [jobDescription] => Array
        (
            [0] => d1
            [1] => d2
        )

    [startDate] => Array
        (
            [0] => 03/01/2013
            [1] => 03/03/2013
        )

    [endDate] => Array
        (
            [0] => 03/02/2013
            [1] => 03/04/2013
        )

    [jobCity] => Array
        (
            [0] => city1
            [1] => city2
        )

    [jobState] => Array
        (
            [0] => state1
            [1] => state2
        )

) 
```

循环代码：

```
foreach($updates as $key => $value){
    echo $key . " " . $value[0] . "<br/>";
} 
```

样本输出：

```
userId 1
positionTitle j1
company c1
jobDescription d1
startDate 03/01/2013
endDate 03/02/2013
jobCity city1
jobState state1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T19:02:49.827

你的问题在这里：

```
foreach($updates as $key => $value){
    echo $key . " " . $value[0] . "<br/>";
} 
```

您正在输出字符串“16”的第一个字符（第零个元素）。

将您的代码更改为此以获得所需的效果：

```
foreach($updates as $key => $value){
    if(!is_array($value))
       echo $key . " " . $value . "<br/>";
    else
       echo $key . " " . $value[0] . "<br/>";
} 
```

# javascript - 即使隐藏了一些，也总是显示选择标签的选项

> ID：15417956
> 
> 赞同：1
> 
> 时间：2013-03-14T19:00:03.963
> 
> 标签：javascript, jquery, html, select

Hi i have this code that will hide an option once its already selected by other select tags on the same page, the problem now is that when a lot of the options have been selected the height of the drop down decreases to the point where the other选择不再可见。有没有办法让下降的高度停止下降？

谢谢你。

隐藏功能：

```
function updateOthers2(val) {
    $("option").show();
    $(".tblboxes").each(function (i) {
        var obj = $("option[value='" + $(this).val() + "']");
        if ($(this).val() != "") obj.hide();
    });
} 
```

# php - 从表a复制某些列并插入表b？

> ID：15417961
> 
> 赞同：0
> 
> 时间：2013-03-14T19:00:11.143
> 
> 标签：php, mysql

请有人能帮我处理这个查询几个小时。我正在尝试从我的表 ptb_registrations 中复制某些列并将它们作为新行插入到 ptb_users 中。

我的 ptb_registrations 表如下所示：

```
id  |   username  |  password   | firstname   |  lastname   |   email 

1        dave        password       james          tanner       email@email.com
2        jonx10      gundam00       eric           davies       something@email.com
3        33csgge     henry10        daniel         gilmart      mail@inbox.com 
```

从这些列中，我只想插入 ID、名字、姓氏、电子邮件和密码，而不是用户名。

所以我的 ptb_user 表如下所示：

```
 id   | user_id  |  password   | firstname   |  lastname   |   email 

    1        1        password       james          tanner       email@email.com
    2        2        gundam00       eric           davies       something@email.com
    3        3        henry10        daniel         gilmart      mail@inbox.com 
```

id 是一个自动增量值，我希望 user_id 在插入数据时也具有与 auto_incremented id 列相同的值（如果这是可能的，那么 id 为 1 - user_id 也将为 1）

到目前为止，我已经尝试了很多不同的方法来获取从 ptb_registrations 插入到 ptb_users 中的列，但没有什么对我有用。

谁能告诉我哪里出错了，谢谢。

```
 // Make a safe query
    $query ="insert into ptb_users(id, first_name)
    select ptb_registrations.id, ptb_registrations.firstname
    from ptb_registrations, temp
    where ptb_users.id=temp.id;
    ";

    mysql_query($query)or die('Could not update members: ' . mysql_error()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:05:09.497

无法保证您的新`AUTO_INCREMENT`用户 ID 与您之前的用户 ID 匹配...如果序列中断会发生什么？最好的办法是在插入记录后重新分配新表的 id。

您的查询应该是这样的：

```
INSERT INTO ptb_user (user_id, password, firstname, lastname, email)
SELECT id, password, firstname, lastname, email
FROM ptb_registrations
ORDER BY id 
```

PS 我希望您不要以***纯文本格式***保存密码。

# python - __getitem__, __setitem__ 多个键

> ID：15417962
> 
> 赞同：5
> 
> 时间：2013-03-14T19:00:17.243
> 
> 标签：python, class, magic-methods, datamodel

我正在尝试创建一个将数据存储在本地缓冲区中并充当数据库接口的类。我有以下代码：

```
class Table(object):    
    def __init__(self, tableName, **columnDict):
       self.tableName      = tableName
       self.columns        = {}
       self.types          = {}
       self.columns['id']  = []
       self.types['id']    = 'INT PRIMARY KEY NOT NULL'
       for name in columnDict:
           self.columns[name] = []
           self.types[name]    = columnDict[name]

    def updateBufferRow(self, index, updateDict):
       for key in updateDict:
           self.columns[key][index] = updateDict[key]

    def getBufferRow(self, index):
       row = {}
       for key in self.columns:
           row[key] = self.columns[key][index]
       return row

    def __getitem__(self, key, **args):
       """ Allows using self[key] method """
       return self.getBufferRow(key)

    def __setitem__(self, key, value, **args):
       """ Allows using self[key] = value method """
       self.updateBufferRow(key, value) 
```

这是我初始化表的方式：

```
testTable = Table('BestTable', test = 'TestType', test2='INT') 
```

如果我尝试，它会按预期工作：

```
testTable[0]['test'] = "LALALA" 
```

它什么也不做，另一方面，它更新而不是覆盖表：

```
testTable[0] = {"test": "LALALA"} 
```

我知道我必须重写 updateBufferRow() 和 getBufferRow() 方法，唯一我不太确定的是如何使用 _ *getitem* _ 和 _ *setitem* _ 方法获取多个键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:09:14.150

`dict`您返回的与`__getitem__`您的列不再有任何关系。您需要返回一些可能看起来像`dict`但将调用映射`__setattr__`到表列的内容：

```
class Row(dict):
    def __init__(self, table, index, *args, **kw):
        self._table, self._index = table, index
        super(Row, self).__init__(*args, **kw)

    def __setitem__(self, key, value):
        super(Row, self).__setitem__(key, value)
        self._table.columns[key][self._index] = value 
```

然后返回它而不是常规`dict`：

```
def getBufferRow(self, index):
   row = {}
   for key in self.columns:
       row[key] = self.columns[key][index]
   return Row(self, index, row) 
```

# javascript - 突出显示美国各州、获得指定的分类并选择相关州

> ID：15417966
> 
> 赞同：0
> 
> 时间：2013-03-14T19:00:30.083
> 
> 标签：javascript, html, css, geomap

我不是 100% 确定从哪里开始。

我怀疑我可以使用[Google GeoMaps](https://developers.google.com/chart/interactive/docs/gallery/geomap)和[getSelection()但在使用 Google 的](https://developers.google.com/chart/interactive/docs/reference#visgetselection)[Code Playground](https://code.google.com/apis/ajax/playground/?type=visualization#geo_map)进行了一些试验之后，我还没有真正得到任何地方。

**我的目标**
是为客户建立一个支持页面，他们希望页面上有一张地图，当您将鼠标悬停在某些州上时，它会在工具提示中显示该地区的总部。不过，总部仅适用于地区，而不适用于每个州，因此当他们将鼠标悬停在密歇根上空时，他们希望俄亥俄州和印第安纳州也能突出显示。

谁能指出我正确的方向？我对刚开始使用 GeoMaps 的任何方法持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:05:10.533

我确信这可以在多个框架中完成，但一种选择是 David Lynch 的基于 jQuery 的 maphilight：[http](http://davidlynch.org/projects/maphilight/docs/) ://davidlynch.org/projects/maphilight/docs/ 。

这会在现有 HTML 图像地图之上创建地图突出显示行为。他有一个使用美国地图的例子：http: [//davidlynch.org/projects/maphilight/docs/demo_usa.html](http://davidlynch.org/projects/maphilight/docs/demo_usa.html)

假设您有几个区域要一起突出显示（这只是一个示例，因此我简化了坐标）：

```
<area href="#" title="MI" class="hq4" shape="poly" coords="562,99, 564,97, 566,96, 571,92, 573,91, 574,92, 569,97, 565,99, 563,100, 562,99">
<area href="#" title="OH" class="hq4" shape="poly" coords="708,208, 701,212, 697,214, 694,217, 690,221, 687,222, 684,222, 710,226, 708,208">
<area href="#" title="IN" class="hq4" shape="poly" coords="598,311, 597,307, 598,303, 600,300, 602,296, 604,292, 604,287, 602,284, 598,311"> 
```

请注意，在`title`指定州缩写的属性之后，我放置了一个`class`. maphilight 有一个名为的选项`groupBy`，它完全符合您的需要 - 它将多个区域分组，因此如果您将鼠标悬停在一个区域上，它们都会突出显示。初始化 maphilight 时，只需`groupBy`适当设置，所有具有公共类的状态都会一起突出显示：

```
$('.map').maphilight({groupBy:"class"}); 
```

请注意，您不需要使用他提供的美国地图 - 您可以使用任何图像地图来执行此操作，如果您想要使用一组特定的州坐标，您可以制作一个图像地图其中-只要记住将相同的班级添加到具有共同总部的州即可。

# php - 我能在调试这个正则表达式时得到一点帮助吗？

> ID：15417968
> 
> 赞同：0
> 
> 时间：2013-03-14T19:00:46.033
> 
> 标签：php, regex, youtube

这是我得到的错误`preg_match() [function.preg-match]: Compilation failed: nothing to repeat at offset 77`

这是业务：

```
$youtubeIdPattern = "#(?<=(?:v|i)=)[a-zA-Z0-9-]+(?=&)|(?<=(?:v|i)\/)[^&\n]+|(?<=embed\/)[^\"&\n]+|(?<=??(?:v|i)=)[^&\n]+|(?<=youtu.be\/)[^&\n]+#";
                $youtubeIdMatch = array();
                if ( isset( $regexMatch[0] ) && $regexMatch[0] != "" ) :
                    preg_match($youtubeIdPattern,$regexMatch[0],$youtubeIdMatch);
                endif; 
```

仅供参考，我们正在尝试仅从 Youtube URL 中获取视频 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:11:28.697

是`??`，布莱恩！

`?`如果要匹配文字，则需要转义`?`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T19:11:48.593

你连续有 2 个问号`(?=??(?`- 你的意思是它是一个字面问号 ( `\?`) 吗？

# php - MYSQL - 查找刚刚添加的记录的ID

> ID：15417969
> 
> 赞同：1
> 
> 时间：2013-03-14T19:00:45.887
> 
> 标签：php, mysql

好的，这就是我的情况——你可能不同意我正在尝试做的事情，但我有我的理由。用户能够将各种信息上传到数据库，我也希望他们能够同时上传图片。现在由于各种原因，我想用我正在添加的记录的 ID 号的文件名存储图像（我有一个 ID 列作为自动增量的主要列）。显然我也必须将文件扩展名存储在数据库中。现在有没有一种方法可以添加记录，然后知道设置了什么 ID 以便我可以保存图像？我不想查询并选择最高 ID，因为如果两个人同时提交表单，这可能会出错。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:02:46.493

[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)会给你`ID`自动生成的：

> ...返回一个`BIGINT`（64 位）值，表示`AUTO_INCREMENT` 由最近执行的`INSERT`语句为列设置的第一个自动生成的值，以影响此类列。例如，插入产生 `AUTO_INCREMENT`值的行后，可以这样获取值：
> 
> ```
> mysql> SELECT LAST_INSERT_ID();
>         -> 195 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:06:30.277

在 PHP 中运行插入后，您可以`AUTO_INCREMENT`从`$mysqli->insert_id`（其中 $mysqli 是一个`MySQLi`连接对象）、`$pdo->lastInsertId`（其中 $pdo 是一个`PDO`连接对象）或`mysql_insert_id()`（如果您仍在使用`MySQL`，您不应该使用）获取 ID必须运行另一个查询。

# jquery - 尝试动态更改 div 的类时 addClass 不起作用

> ID：15417970
> 
> 赞同：0
> 
> 时间：2013-03-14T19:00:49.280
> 
> 标签：jquery

[http://jsfiddle.net/hdn6e/10/](http://jsfiddle.net/hdn6e/10/)

这里有什么问题？我已经尝试了一切，但似乎没有任何效果

```
<div class="main">
    <div class="qty" style="float:left">1</div>
    <div class="name" >A</div>    
</div>
<div id="main">
    <div class="qty" style="float:left">2</div>
    <div class="name">B</div>    
</div>
<input type="button" id="ADD">

$('#main').on('click', function(){
        $(this).addClass('selected');
    });
$('.name').on('click', function(){
        $(this).addClass('selected');
    });
$('.qty').on('click', function(){
        $(this).addClass('selected');
    });

$('#ADD').click( function(){
        $(".selected").nearest(".qty").text($(".selected").nearest(".qty").text() +1);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:12:44.553

如果问题是您的第二个`<div id="main">`没有获得`selected`课程，那是因为您不能在 DOM 上拥有与[jsfiddle 示例](http://jsfiddle.net/hdn6e/10/)中相同 ID 的多个项目。

更改`main`为班级，它将按预期工作。

**HTML**

```
<div class="main">
    <div class="qty" style="float:left">1</div>
    <div class="name" >A</div>    
</div>
<div class="main">
    <div class="qty" style="float:left">2</div>
    <div class="name">B</div>    
</div>
<input type="button" id="ADD"> 
```

**JS**

```
$('.main').on('click', function(){
    $(this).addClass('selected');
}); 
```

**[演示](http://jsfiddle.net/ye4MF/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:05:48.063

您的代码正在尝试向每个单击的元素添加一个 CSS 类。如果要添加类属性，请执行以下操作：

```
$('#main').on('click', function(){
    $(this).attr('class', 'selected');
}); 
```

如果要应用 CSS 类，请在样式标签中创建选定的类

```
<style>
    .selected {
        color: blue;
    }
</style> 
```

然后将其添加到单击的元素

```
.addClass("selected"); 
```

# c# - 来自 AD 的证书模板信息

> ID：15417972
> 
> 赞同：0
> 
> 时间：2013-03-14T19:00:57.687
> 
> 标签：c#, .net, active-directory, certificate

如何使用 C# 从活动目录中检索证书模板的哈希算法和名称？另外，是否可以从 Oid 中找到 OIDGroup 和名称？

# javascript - Html 表单提交在 URL 参数中附加 +（加号）

> ID：15417976
> 
> 赞同：0
> 
> 时间：2013-03-14T19:01:16.160
> 
> 标签：javascript, html, forms, urlencode, url-parameters

我有一个简单的表格，下面是代码

```
<form action="search.html" method="get" accept-charset="utf-8" id="search-within-form"">
    <input type="hidden" name="within" id="within" value="">
    <input type="text" name="q" value="" id="search-within" autocomplete="off" class="search-within-results inactive" title="">
    <input type="submit"/>
</form> 
```

我在字段中输入***测试数据进行搜索***，然后单击提交，在我看到的 URL 中是

> /search.html?within=&q=test+data+for+search

但我需要 url 像 tis

> /search.html?within=&q=用于搜索的测试数据

我知道这可以通过使用 java 脚本表单提交等来完成。我想知道有什么方法可以使用 html 来实现吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:05:34.400

您的 URL 永远不会在浏览器中以这种方式显示。文本将由那些“+”字符分隔，或者将由“%20”分隔。您是否有理由需要以这种方式显示 URL？最终归结为浏览器如何在地址栏中显示 URL。'%20' 是空格的代码。您也许可以开发一个浏览器扩展程序，使它们与空格一起显示，但这对我来说听起来很糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T19:07:32.640

为什么不在从表单中检索值的地方清理文本？你有什么理由不能这样做？

# iphone - 如何在 linphone 中注销 SIP？

> ID：15417977
> 
> 赞同：3
> 
> 时间：2013-03-14T19:01:18.187
> 
> 标签：iphone, ios, sip, linphone

当我想在 Linphone 中时，有没有办法从 SIP 注销并重新注册？

我找不到注销功能。

我应该为此彻底摧毁linphone核心吗？
还是有更软的解决方案？

目前我正在尝试在 iOS 中实现它，但稍后将需要其他平台。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-27T07:32:13.227

```
// Get the default proxyCfg in Linphone
LinphoneProxyConfig* proxyCfg = NULL;
linphone_core_get_default_proxy([LinphoneManager getLc], &proxyCfg);

// To unregister from SIP
linphone_proxy_config_edit(proxyCfg);
linphone_proxy_config_enable_register(proxyCfg, false);
linphone_proxy_config_done(proxyCfg);

// And re-register when want
linphone_proxy_config_edit(proxyCfg);
linphone_proxy_config_enable_register(proxyCfg, true);
linphone_proxy_config_done(proxyCfg); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-08-23T18:20:51.077

您可能有多个 SIP 帐户。首先，指定您想要的帐户并从中获取您的代理`getProxyConfigList`。然后通过以下方法从 linphone 的核心中删除您想要的代理`removeProxyConfig`：

```
private static AuthInfo mAuthInfo;
private static ProxyConfig mProxyConfig;

Core core = LinphoneManager.getCore();
ProxyConfig[] proxyConfigs = core.getProxyConfigList();
if (proxyConfigs.length != 0) {
  mProxyConfig = proxyConfigs[0];
  mAuthInfo = mProxyConfig.findAuthInfo();
}

if (core != null) {
{
 if (mProxyConfig != null) {
        core.removeProxyConfig(mProxyConfig);
  }
 if (mAuthInfo != null) {
        core.removeAuthInfo(mAuthInfo);
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-02T09:04:20.057

有方法如何使用 linphone 取消注册。

获取 LinphoneProxyConfig

```
LinphoneProxyConfig* proxyCfg = NULL;
linphone_core_get_default_proxy([LinphoneManager getLc], &proxyCfg); 
```

从 SIP 注销

```
linphone_proxy_config_edit(proxyCfg); /*start editing proxy configuration*/
linphone_proxy_config_enable_publish(proxyCfg, TRUE);
linphone_proxy_config_set_publish_expires(proxyCfg, 0);
linphone_proxy_config_enable_register(proxyCfg,FALSE); /*de-activate registration for this proxy config*/
linphone_proxy_config_done(proxyCfg); /*initiate REGISTER with expire = 0*/

while(linphone_proxy_config_get_state(proxyCfg) !=  LinphoneRegistrationCleared){
    NSLog(@"state = %i",linphone_proxy_config_get_state(proxyCfg));
    linphone_core_iterate(lc); /*to make sure we receive call backs before shutting down*/
    ms_usleep(100000);
} 
```

但它仅适用于前台应用程序。在后台，如果操作系统出于任何原因杀死您的应用程序，它就会被杀死。没有通知。您无法捕捉到 SIGKILL 信号。查看 kill 的手册页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T13:26:24.090

未完全给出注销。删除 sip 扩展，然后调用刷新寄存器。现在您的软电话已从 sip 中注销

```
 [[NSUserDefaults standardUserDefaults] setObject:@"" forKey:@"username_preference"];

if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]
        && [UIApplication sharedApplication].applicationState ==  UIApplicationStateBackground
        && [[NSUserDefaults standardUserDefaults] boolForKey:@"disable_autoboot_preference"]) {
        // autoboot disabled, doing nothing
        return;
    } else if ([SipManager instance] == nil) {
        [self startApplication:caldelegate];

    }

    [[LinphoneManager instance] becomeActive];

    if (callCenter == nil) {
        callCenter = [[CTCallCenter alloc] init];
        callCenter.callEventHandler = ^(CTCall* call) {
            // post on main thread
            [self performSelectorOnMainThread:@selector(handleGSMCallInteration:)
                                   withObject:callCenter
                                waitUntilDone:YES];
        };
    }
    // check call state at startup
    [self handleGSMCallInteration:callCenter];

    LinphoneCore* lc = [SipManager getLc];
    LinphoneCall* call = linphone_core_get_current_call(lc);
    if (call == NULL)
        return;

    SipManager* instance = [SipManager instance];
    if (call == instance->currentCallContextBeforeGoingBackground.call) {
        const LinphoneCallParams* params = linphone_call_get_current_params(call);
        if (linphone_call_params_video_enabled(params)) {
            linphone_call_enable_camera(
                                        call,
                                        instance->currentCallContextBeforeGoingBackground.cameraIsEnabled);
        }
        instance->currentCallContextBeforeGoingBackground.call = 0;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-17T15:08:41.157

我在 Linphone 上工作了几个月，我从 SIP 注销的功能是：

```
- (void)clearProxies {
    LinphoneProxyConfig *config = linphone_core_get_default_proxy_config(LC); // Get the default proxy configured.

    const LinphoneAuthInfo *ai = linphone_proxy_config_find_auth_info(config);
    linphone_core_remove_proxy_config(LC, config); // Remove the selected proxy config.
    if (ai) {
        linphone_core_remove_auth_info(LC, ai); // Remove the authentication infos.
    }

    linphone_proxy_config_done(config); // Confirm the actual configuration.
} 
```

您必须清除代理配置和身份验证信息并确认新配置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-03T13:44:14.043

```
LinphoneCore *lc = [LinphoneManager getLc];
LinphoneProxyConfig *config = linphone_core_get_default_proxy_config(lc);
linphone_proxy_config_edit(config);
linphone_proxy_config_set_expires(config, 0);
linphone_proxy_config_done(config); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-10T05:24:31.637

*   实际上，sip 服务器没有“注销”选项。位置服务器将更新到最新的注册信息（包括您最新的 IP 地址）。

*   如果您正在谈论如何停止 linphone 迭代注册，并重新注册到其他 SIP 服务器。然后按照@Mun Chun 的指南

# html - 导航栏 div 边框偏离中心

> ID：15417985
> 
> 赞同：1
> 
> 时间：2013-03-14T19:01:54.670
> 
> 标签：html, css, border, margin

我有一个导航栏：

HTML：

```
<div id="navbar">
</div> 
```

CSS：

```
#navbar{
    width: 100%;
    height: 50px;
    background-color: #F0F0F0;
    border-color: #B2B2B2;
    border-style: solid;
    -webkit-border-radius: 16px;
    -moz-border-radius: 16px;
    border-radius: 16px;
} 
```

出于某种原因，边框使它偏离中心，div 的左侧总是有一些空间，但右侧没有。我该如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:08:04.277

`width: 100%`从您的 CSS 中删除。是块级的`div`，所以会占用所有可用的水平空间。添加一个明确的 100% 只会在你给它时引入问题，`padding`或者在这种情况下，`border`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:10:22.673

添加边框宽度和 CSS3 框大小以解决此问题。

```
border-width:2px;
-moz-box-sizing:border-box;
-webkit-box-sizing:border-box;
box-sizing:border-box; 
```

[http://jsfiddle.net/ADwwP/1/](http://jsfiddle.net/ADwwP/1/)

# google-apps-script - 在 GAS 中插入帖子 Blogger API 失败

> ID：15417993
> 
> 赞同：0
> 
> 时间：2013-03-14T19:02:25.743
> 
> 标签：google-apps-script, httprequest, blogger, blogspot

大家好，我正在尝试使用 GAS 插入帖子但失败了..你能告诉我我错了什么...提前谢谢....

这是我的代码

```
`function sendHttpPost() {
 var API_KEY = 'my api key';
 var scope = "http://www.blogger.com/feeds/";       
 var oAuthConfig = UrlFetchApp.addOAuthService("blogger");
 oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
 oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
 oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
 oAuthConfig.setConsumerKey("anonymous");
 oAuthConfig.setConsumerSecret("anonymous");
  var payload = 
    {
  "kind": "blogger#post",
  "blog": {
    "id": "486683248036684073"
  },
  "title": "A new post",
  "content": "With <b>exciting</b> content..."
}
  var options =
    {
      "contentType":"application/json",
      "oAuthServiceName" : "blogger",
      "oAuthUseToken" : "always",
      "method" : "POST",
      "payload" : payload
    };

  var respon = UrlFetchApp.fetch("https://www.googleapis.com/blogger/v3/blogs/486683248036684073/posts?key="+API_KEY, options); 
```

这是错误消息

> 返回代码 400 的请求失败。服务器响应：{“error”：{“errors”：[{“domain”：“global”，“reason”：“parseError”，“message”：“Parse Error”}]，“代码”：400，“消息”：“解析错误”}}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:18:41.293

[我相信您在需要 oauth2](https://developers.google.com/blogger/docs/3.0/using#auth)时尝试使用 oauth1 。[这里](https://stackoverflow.com/questions/14589152/retrieve-blog-feeds-using-google-oauth-2-0-and-scribe)已经有一个未答复的请求。使用 Google 应用脚本实现 oauth 2 真的很痛苦，所以我尝试构建一个可以满足需求的库（[双氧库](https://sites.google.com/a/ousset.net/orgasm-library/home/dioxygen-library)）——它的工作方式有点像[oauth2 游乐场](https://developers.google.com/oauthplayground/)，但它不那么漂亮。通过一些工作，您应该能够通过博客使其适应您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:20:39.037

我尝试了 Harold 的库，但在成功检索 OAuth 令牌后，我遇到了同样的错误。

但是，当我通过 API Explorer 发出与脚本中相同的 JSON 请求时，它已被处理： [https ://developers.google.com/blogger/docs/3.0/reference/posts/insert](https://developers.google.com/blogger/docs/3.0/reference/posts/insert)

[更新]

我要把它拿回来。此代码有效。我只是替换了**有效负载**变量并将 JSON 请求直接放入 URL fetch **options**中。**因此，将该有效负载**变量传递给**选项**变量存在一些问题。

```
function testBlogger() {

  var payload =
      {
        "kind": "blogger#post",
        "blog": {
          "id": "YOUR_BLOG_ID"
        },
        "title": "New post",
        "content": "With content..."
      };

  var options =
      {
        "method" : "post",
        "headers" : { "Authorization" : "Bearer YOUR_ACTIVE_TOKEN"},
        "contentType" : "application/json",
        "payload" : '{ "kind": "blogger#post", "blog": { "id": "YOUR_BLOG_ID" }, "title": "New post", "content": "With content..." }'
      };

  try {

    var result = UrlFetchApp.fetch(
      "https://www.googleapis.com/blogger/v3/blogs/YOUR_BLOG_ID/posts",
      options);

    Logger.log(result);

  } catch (e) {
    Logger.log(e);
  }
} 
```