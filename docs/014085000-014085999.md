# StackOverflow 问答 14085000-14085999

# windows - Visual Studio 2012 的 gui 是如何实现的，我们如何制作外观相似的应用程序

> ID：14085000
> 
> 赞同：1
> 
> 时间：2012-12-29T19:08:32.183
> 
> 标签：windows, winapi, visual-c++, mfc, visual-studio-2012

Visual Studio 2012，在 windows 8 下的桌面模式下运行。不共享其他 windows 8 桌面应用程序的外观。

这个 GUI 是如何实现的？

Microsoft 是否完全废弃了 MFC/Winapi（因为它如此不同）并使用 Direct2d 创建自定义 gui？或者，他们是否只是调用 Winapi 来定制它的外观？

我们开发者有什么捷径可以在我们的应用中实现vs2012主题吗？使用 MFC 应用程序模板向导，我们可以从许多主题中进行选择，但没有类似的 vs2012 可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T17:19:34.760

事实上，Visual Studio 2010/2012 利用了 WPF。

利用 WPF

WPF 利用 DirectX。WPF 尝试为构建应用程序提供一致的编程模型，并提供用户界面和业务逻辑之间的分离。WPF 利用 XAML，它是一种声明性标记语言。XAML 代表可扩展应用程序标记语言，它基于 XML。XAML 被设计为开发应用程序用户界面的一种更有效的方法

关于多文档窗口和浮动工具窗口

Visual Studio 被编写为支持多个文档窗口和浮动工具窗口。

有很棒的图书馆可供使用

Codeplex 提供了一个库来对多个文档窗口进行建模。 [http://wpfmdi.codeplex.com/](http://wpfmdi.codeplex.com/)

您还可以利用一个对接库：http: [//avalondock.codeplex.com/](http://avalondock.codeplex.com/)

MEF 被大量使用

使用托管可扩展性框架 (MEF) 重新设计了内部结构。

MEF 允许应用程序开发人员发现和使用扩展，而不用弄乱配置文件。

MEF 允许您轻松封装代码并避免脆弱的硬依赖。

这允许开发人员创建插件来修改 IDE 的行为。

设计目标

在 Visual Studio 2012 中，一个变化是界面使用了全大写菜单栏。

一些设计目标包括通过删除 UX 中过多的线条和渐变来减少混乱和视觉复杂性。

UI 已通过删除过时的 3D 斜面进行了现代化改造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T01:25:53.827

您可以使用 Visual Studio 附带的 Spy++ 并检查应用程序的窗口/类名称。如果你用VS 2008来做，很明显它是MFC。如果您使用 VS 2010 及更高版本执行此操作，您将看到这都是 WPF 的东西——不涉及 MFC。

# asp.net-mvc-2 - GeoJSON 地图无法在 .Net MVC2 视图中显示

> ID：14085001
> 
> 赞同：1
> 
> 时间：2012-12-29T19:08:33.253
> 
> 标签：asp.net-mvc-2, openlayers

当我在本地服务器上的直接 HTML 页面中运行 JavaScript 时，它工作得很好。但是，当我将它移到 .aspx 页面时，它不再显示。Firebug 没有显示脚本错误，我知道地图数据正在加载，因为它正确列出了页面上的属性。但是，地图本身不显示。通常在角落的缩放图标也不显示，该元素保持不变。它在 IE 中也不起作用。

这是初始化的代码，它在窗口加载时调用。

```
function init() {
    var map = new OpenLayers.Map('map', {
        allOverlays: true
    });

    countries = new OpenLayers.Layer.Vector("Countries", {
        protocol: new OpenLayers.Protocol.HTTP({
            url: "../../Content/simplify3.geojson",
            format: new OpenLayers.Format.GeoJSON({
                extractAttributes: true,
                visibility: true
            })
        }),
        strategies: [new OpenLayers.Strategy.Fixed()]
    });

    map.addLayer(countries);
    select = new OpenLayers.Control.SelectFeature(countries,
            { multiple: true, toggle: true });

    countries.events.on({
        "featureselected": onFeatureSelect,
        "featureunselected": onFeatureUnselect,
        "loadend": populateList
    });

    map.addControl(select);
    select.activate();
    map.zoomToMaxExtent();
} 
```

地图应该在这里：

```
<div id="map" style="width: 800px; height: 400px; border: 2px solid black;">There Should Be A Map Here!</div> 
```

除了射这该死的东西还有什么想法吗？

# visual-studio-2012 - 括号/引号中的 Visual Studio 选项卡？

> ID：14085007
> 
> 赞同：7
> 
> 时间：2012-12-29T19:09:08.887
> 
> 标签：visual-studio-2012, resharper

我主要是一名 Java 开发人员，最近我开始使用 Visual Studio 2012 为 Windows 应用商店开发应用程序。几年前开始编码时，我使用了 Visual Studio 2008。直到我开始做之前，我没有想到某些功能Eclipse 中的 Java。无论如何，在 Eclipse 中，我可以按“制表符”跳出引号或括号。我能找到的唯一与此类似的 Visual Studio 2012 功能包含在[Visual Studio 2012 Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd)中。它允许我在一行的任何地方执行 Shift+Enter，它会在行尾添加一个分号并转到下一行。虽然这很有用，但在许多情况下并不理想。我也在使用 Resharper，但没有找到这样的设置。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T16:11:29.970

跳出自动插入的引号或括号的最简单方法是键入右引号或括号，即：`"`后跟`"`或`(`后跟`)`。您也可以使用右箭头键。如果您有 resharper，那么您可以使用++`CTRL`自动完成当前语句。`SHIFT``ENTER`

如果你喜欢使用键盘快捷键来移动你的代码，那么试试[VsVim 扩展](http://visualstudiogallery.msdn.microsoft.com/59ca71b3-a4a3-46ca-8fe1-0e90e3f79329)。

# c - 用于学习足够困难的 C 环境

> ID：14085015
> 
> 赞同：0
> 
> 时间：2012-12-29T19:10:15.607
> 
> 标签：c, windows, gcc, compiler-construction

我是 C 新手（来自 Java，所以我不是第一次学习编程）。我正在读《C Primer Plus》这本书。我一直在四处寻找以了解在 Windows 上开发 C 程序的编译器或环境之间的差异。

我已经安装了 MinGW 和 Visual Studio 2010。我已经测试了在这两个环境中编译一个 hello world。对于 MinGW，我正在考虑 Code::Blocks 或 vim。Code::Blocks 上的多编译器支持听起来很方便，但我还没有达到这个水平，无法理解这个功能会有多大帮助。

我愿意以我应该的方式学习 C，而不是被像 Visual Studio 这样的 IDE 隐藏的工作背景所宠坏。一旦我提高了理解力，我不介意切换到更方便的环境。

我对 Visual Studio 感到不舒服的原因是它不像 gcc 那样支持标准。我已经阅读了一个论点，即 VS 在生产中被广泛使用，并且这就是它的方式。有人说只要在我不想要的地方开始写 C。我已经看到有人说体验命令提示符并查看链接是如何完成的，等等。

这是来自维基百科，但它说 Visual C++ 不应该用于编译 C。[http://en.wikipedia.org/wiki/Visual_C%2B%2B#Issues](http://en.wikipedia.org/wiki/Visual_C%2B%2B#Issues)

所以这里是我需要说清楚的。可能是几个街区。

我的理解是，只要我正在为 Windows 平台进行开发，Visual Studio 就适用，并且也适合那些只想开始编码的人。

如果我想采用更新的标准并使用 gcc（在 Linux 中使用），我应该选择 MinGW。MinGW 是移植到 Windows 的最小的类似 gcc 的环境，因此我可以使用与 Linux 类似的环境，这使我受益于比 VS 更好地支持的标准。此外，这应该有助于我的程序在 Linux 上更成功地编译，而不是完全用于在 Windows MinGW 上编译程序以在 Linux 上运行，对吧？

我们所说的可移植性是在每个平台上编译一个源代码，而不是在一个特定平台上编译一个程序来使用其他平台上的执行文件，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:08:53.543

虽然 Visual C++ 不是 C 编译器，但 Visual Studio 工具确实允许编译 C 代码 - Visual Studion 下的编译器用于编译几乎所有 Microsoft 的 C 代码（Microsoft 中有很多 C 代码） Windows 系统，即使相当一部分较新的工具可能是 C，但很多东西的基础仍然是 C)。您只需要确保将 C 编译为 C，而不是 C++，因为 C++ 在某些东西的风格上略有不同——C 中允许的一些东西在 C++ 中是不允许的。

做到这一点的方法是调用文件something.c，而不是something.cpp - 这真的很容易。

gcc 也是一个非常称职的编译器，这一点毫无疑问。并且使用 Code::Blocks 等中的工具将是一个很好的学习方式。

实际上，我会说 Visual Studio 绝对是一个更流畅、更流畅的环境，如果你愿意，你仍然可以使用 make 等命令行工具来构建东西——编译器不是 IDE 的一部分，它只是一个很好的集成 IDE。学习计算机语言应该尽可能少的障碍。让自己的生活变得艰难是没有帮助的。

我个人在 Linux 上使用 (x)emacs 和 gcc，但我第一次用 C 编程时，甚至没有合适的标准，计算机通常有 8 位或 16 位处理器——我们 1985 年的学校计算机有2MB 内存和 3 个 64MB 磁盘（131000 个 512 字节的块）。那台机器在我的学校有 8 个终端，在另一所学校还有 8 个终端，而实际计算机所在的主学校有两个房间，我认为每个房间有 16 个终端。所以我们有时会在 30 个人之间共享这台机器！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:19:40.183

您应该选择任何让您感觉最舒适的平台，并等待担心跨平台可移植性等的复杂性。从 Java 开始，您一开始会忙于指针等，因此请专注于它的环境。

如果您以前在 Eclipse 环境中编写过 Java，那么 C/C++ 的 CDT 插件可能是您的最佳选择。它确实支持 gcc 工具链。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T22:55:21.440

如果您要为 Windows 编译，请尝试 CodeBlocks、Dev-CPP 或 Eclipse，因为我认为它们都使用 GCC。本质上，您想要一些**不会**强迫您制作新解决方案/包含新项目/制作新文件的东西，这样您就可以测试一些功能。您想编译单个 .c 文件并运行它，并以该格式播放。

如果你要为 Linux 编译，试试 Geany、Eclipse 或只使用 gcc。当你在它的时候，不妨拿起makefile。

除此之外，编写 C 代码，或查看其中一些公共本机 java 调用的最终位置。但是不要看数学包，你会失望的。

编辑：刚刚注意到你的便携性。是的，您需要在每个目标上重新编译，或者使用交叉编译器。

但是交叉编译是不够的，还必须为不同的平台编写代码，比如在 Windows 中您将使用 Win API 调用 CreateThreadA()，但在 linux-build 中您可能会使用 pthread_create()。您应该熟悉使用

```
//some code
#ifdef __platform_windows
   //windows code here
#endif
#ifdef __platform_linux
   //linux code here
#endif
//crossplatform code 
```

# android - 如何在 ListView 上显示同一张表中的多列数据？

> ID：14085030
> 
> 赞同：1
> 
> 时间：2012-12-29T19:12:00.377
> 
> 标签：android, sqlite, android-listview

我的 ListView 目前只能显示一列数据。我希望它显示两列数据。

这是我的 ListView 的代码：

```
public class ProjectExplorer extends ListActivity {

private projectdatabase database;
protected Cursor cursor;
protected ListAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    database = new projectdatabase(ProjectExplorer.this);

    getinfo();
}

private void getinfo() {

    database.open();
    cursor = database.getDataforDisplay();
    adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, cursor, new String[] {"project_name"}, new int[] { android.R.id.text1 }, 0);
    setListAdapter(adapter);

}

@Override
public void onListItemClick(ListView parent, View view, int position, long id) {

    super.onListItemClick(parent, view, position, id);

    Cursor c = ((SimpleCursorAdapter)parent.getAdapter()).getCursor();
      c.moveToPosition(position);

      // get project name here

      String str_projectname= c.getString(c.getColumnIndex("project_name"));

      Toast.makeText(this, str_projectname, Toast.LENGTH_LONG).show();

} 
```

这是数据库类中返回游标的方法：

```
public Cursor getDataforDisplay () {    

    String[] columns = new String[] {KEY_ROWID, PROJECT_NAME, PROJECT_FINISH_DATE, PROJECT_DIFFICULTY, PROJECT_STATUS};
    Cursor c = projectDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

    projectDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

    c.moveToFirst();
    return c;

} 
```

我还想显示定义为 _id 的 KEY_ROWID

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T19:25:59.827

您可以使用 android.R.layout.simple_list_item_2 指定表中的第 2 列，从中可以检索数据并指定可以在 Activity 上显示的位置 - android.R.id.text2

```
 adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_2, cursor, new String[] {"project_name","column_no2"}, new int[] { android.R.id.text1, andriod.R.id.text2 }, 0); 
```

您还可以创建您的自定义适配器，指定您自己的 Listview 并从头开始创建它并自定义所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T19:34:59.340

至少在我看来，实现这一点的最佳方法是为您创建自定义适配器，`ListView`在这种情况下，您可以设置自己的设计，单个 listview 元素应该是什么样子。只需使用您的填充一些数组`Cursor`并将它们设置为您的自定义适配器。

# python - 'QueryDict' 对象没有属性 'id'

> ID：14085032
> 
> 赞同：1
> 
> 时间：2012-12-29T19:12:13.717
> 
> 标签：python, django, django-forms

在“面板”页面上，我有一个选择字段，其中包含上传文档或“机器人”列表，正如我通常所说的那样。此列表仅显示当前用户已上传的“机器人”。

```
panel\forms.py

from django import forms
import os

from upload.models import Document

#### RETRIEVE LIST OF BOTS UPLOADED BY CURRENT USER ####
def get_files(user):
    bots = Document.objects.filter(user=user.id)
    file_list = []
    for b in bots:
        file_list.append((b.id,b.docfile))
    return file_list

class botForm(forms.Form):

    def __init__(self, user, *args, **kwargs):
        super(botForm, self).__init__(*args, **kwargs)
        self.fields['bot'] = forms.ChoiceField(choices=get_files(user)) 
```

这可以正常工作并显示所有用户机器人的列表。当我尝试将这些值传递到“游戏”页面并在此处访问它们时，就会出现问题。

```
game\views.py

from django.shortcuts import render_to_response
from django.template import RequestContext
from django.http import HttpResponseRedirect
from django.core.urlresolvers import reverse

from game.models import game
from game.forms import GameForm
from upload.models import Document
from panel.forms import botForm
import league

def RPS(request):
    if request.method == 'POST': # If the request is a POST method...

        if 'PanelPlay' in request.POST:
            panel = botForm(request.POST)
            if panel.is_valid():
                print panel.cleaned_data['bot']

        elif 'GamePlay' in request.POST:
            form = GameForm(request.POST) # A form bound to the POST data
            if form.is_valid(): # All validation rules pass
                leagueOuput = []
                leagueOutput = league.run(form.cleaned_data['bot1'],form.cleaned_data['bot2'])
                newGame = game()
                newGame.bot1 = leagueOutput[0]
                newGame.bot2 = leagueOutput[1]
                newGame.bot1wins = leagueOutput[2]
                newGame.bot2wins = leagueOutput[3]
                newGame.save()
                return HttpResponseRedirect(reverse('game.views.RPS')) # Redirect after POST

    form = GameForm() # An unbound form
    results = game.objects.all()    # Load messages for the list page     

    return render_to_response('game.html', {'results': results, 'form': form}, context_instance=RequestContext(request)) 
```

尝试访问和验证面板数据时，出现以下错误。

> 'QueryDict' 对象没有属性 'id'

参考这个特定的行。

```
bots = Document.objects.filter(user=user.id) 
```

我发现并阅读了许多类似的问题，但我似乎无法将他们的解决方案延续到我自己的项目中。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T19:15:09.477

当您构建 时`botForm`，您将`request.POST`(a QueryDict) 作为`user`参数传递。你的意思是

```
panel = botForm(request.user, data=request.POST) 
```

?

（假设您正在使用 django 身份验证）。

# objective-c - UITEXTVIEW：获取最近在 uitextview 中输入的单词

> ID：14085034
> 
> 赞同：5
> 
> 时间：2012-12-29T19:12:15.853
> 
> 标签：objective-c, ios, uitextview, uimenucontroller

我想从 UITextView 获取用户输入的最新单词。

用户可以在 UITextView 的任意位置输入单词，在中间或末尾或开头。当用户完成输入并按下空格并使用“来自的建议`UIMenuController`”进行任何更正时，我会认为它是一个词。

示例：用户在文本中间的某处输入“kimd” `UITextView`，他会弹出一个自动更正“种类”的弹出窗口。在他这样做之后，我想捕获“善良”并在我的应用程序中使用它。

我在互联网上进行了很多搜索，但找到了有关用户最终何时输入文本的解决方案。我还尝试检测一个空格，然后进行向后搜索，直到找到一些文本后的另一个空格，这样我就可以将它限定为一个单词。但我认为可能有更好的方法来做到这一点。

我在某处读到 iOS 缓存了我们在文本字段或文本视图中输入的最近文本。如果我能从顶部弹出，这就是我想要的。我只需要处理那个对象。

我非常感谢您的帮助。

注意：用户可以在 UItextview 的任何地方输入文本。我需要最近输入的单词

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:05:34.697

```
//This method looks for the recent string entered by user and then takes appropriate action.

     - (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {

 //Look for Space or any specific string such as a space
if ([text isEqualToString:@" "]) {
NSMutableCharacterSet *workingSet = [[NSCharacterSet whitespaceAndNewlineCharacterSet]   mutableCopy];

  NSRange newRange = [self.myTextView.text rangeOfCharacterFromSet:workingSet
                                     options:NSBackwardsSearch
                                     range:NSMakeRange(0, (currentLocation - 1))];

 //The below code could be done in a better way...
 UITextPosition *beginning = myTextView.beginningOfDocument;
 UITextPosition *start = [myTextView positionFromPosition:beginning offset:currentLocation];
 UITextPosition *end = [myTextView positionFromPosition:beginning   offset:newRangeLocation+1];
 UITextRange *textRange = [myTextView textRangeFromPosition:end toPosition:start];

 NSString* str = [self.myTextView textInRange:textRange]; 
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T19:36:53.433

这是我建议做的事情，可能看起来有点老套，但它会很好用：

首先在 .h 中符合`UITextViewDelegate`并将您的文本视图设置`delegate`为`self`如下所示：

```
myTextView.delegate = self; 
```

并使用此代码：

```
- (void)textViewDidChange:(UITextView *)textView { // Delegate method called when any text is modified

if ([textView.text substringFromIndex: [textView.text length] - 1]) { // Gets last character of the text view's text

    NSArray *allWords = [[textView text] componentsSeparatedByString: @" "]; // Gets the text view's text and fills an array with all strings seperated by a space in text view's text, basically all the words

    NSString *mostRecentWord = [allWords lastObject]; // The most recent word!
}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T13:46:08.720

我使用此代码来获取 @-sign 后面的单词：

```
- (void)textViewDidChange:(UITextView *)textView {
    NSRange rangeOfLastInsertedCharacter = textView.selectedRange;
    rangeOfLastInsertedCharacter.location = MAX(rangeOfLastInsertedCharacter.location - 1,0);
    rangeOfLastInsertedCharacter.length = 1;
    NSString *lastInsertedSubstring;
    NSString *mentionSubString;
    if (![textView.text isEqualToString:@""]) {
        lastInsertedSubstring = [textView.text substringWithRange:rangeOfLastInsertedCharacter];
        if (self.startOfMention > 0 || self.startOfHashtag > 0) {
            if ([lastInsertedSubstring isEqualToString:@" "] || (self.startOfMention > textView.selectedRange.location || self.startOfHashtag > textView.selectedRange.location)) {
                self.startOfMention = 0;
                self.lenthOfMentionSubstring = 0;
            }
        }
        if (self.startOfMention > 0) {
            self.lenthOfMentionSubstring = textView.selectedRange.location - self.startOfMention;
            NSRange rangeOfMentionSubstring = {self.startOfMention, textView.selectedRange.location - self.startOfMention};
            mentionSubString = [textView.text substringWithRange:rangeOfMentionSubstring];
            dhDebug(@"mentionSubString: %@", mentionSubString);

            UIAccessibilityPostNotification(UIAccessibilityLayoutChangedNotification, nil);

        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-04T15:54:14.600

的简单扩展`UITextView`：

```
extension UITextView {

    func editedWord() -> String {

        let cursorPosition = selectedRange.location
        let separationCharacters = NSCharacterSet(charactersInString: " ")

        let beginRange = Range(start: text.startIndex.advancedBy(0), end: text.startIndex.advancedBy(cursorPosition))
        let endRange = Range(start: text.startIndex.advancedBy(cursorPosition), end: text.startIndex.advancedBy(text.characters.count))

        let beginPhrase = text.substringWithRange(beginRange)
        let endPhrase = text.substringWithRange(endRange)

        let beginWords = beginPhrase.componentsSeparatedByCharactersInSet(separationCharacters)
        let endWords = endPhrase.componentsSeparatedByCharactersInSet(separationCharacters)

        return beginWords.last! + endWords.first!
    }
} 
```

# php - PHP - 如何从复制粘贴登录后保护 URL

> ID：14085035
> 
> 赞同：0
> 
> 时间：2012-12-29T19:12:23.023
> 
> 标签：php, login

`main.php`我创建了一个登录脚本，用户在输入他的用户名和密码后，如果输入有效数据，就会被重定向到名为 的站点的主页。

我已经看到，通过将此页面的 URL 复制并粘贴到另一个资源管理器，该页面可以成功打开，而无需执行日志记录过程。我怎样才能阻止这个？我可以保护我的`main.php`页面，以便只有注册过程后的用户才能看到它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T19:12:54.070

使用会话 cookie 而不是将会话 ID 放在 URL 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T19:21:06.930

使用会话变量。

以下是一些资源：

[http://www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)
[http://php.net/manual/en/book.session.php](http://php.net/manual/en/book.session.php)

# java - 来自 IntBuffer Java 的图像

> ID：14085036
> 
> 赞同：0
> 
> 时间：2012-12-29T19:12:37.370
> 
> 标签：java, image

我有图像的 RGB 数据，`IntBuffer`并希望通过绘画将其显示到`JPanel`. 最有效的方法是什么？

编辑

我目前正在通过以下代码将数据绘制到 a`BufferedImage`上，但想知道是否存在更快的方法：

```
Raster raster= image.getData();
intBuffer.get( ((DataBufferInt) raster.getDataBuffer()).getData() );
image.setData(raster); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:43:53.420

```
BufferedImage image = new BufferedImage(800, 600, BufferedImage.TYPE_INT_RGB);
int[] rgb = ((DataBufferInt)image.getRaster().getDataBuffer()).getData(); 
```

然后只需将 IntBuffer 的内容复制到 rgb 数组中并绘制 BufferedImage。对数组的任何更改都会直接更改图像。当然，图像需要具有正确的尺寸。

# rspec - rspec 查看存根和部分

> ID：14085037
> 
> 赞同：4
> 
> 时间：2012-12-29T19:12:40.677
> 
> 标签：rspec, views, partials, stubs

我正在使用 RSpec（Rails 3.2.8 上的 2.12）测试视图。我正在使用 CanCan 有条件地在页面上显示某些元素。这需要一个控制器方法'current_user'。在我的一些规范中，我已经能够删除 current_user，例如。controller.stub(:current_user).and_return(etc) 或 view.stub.etc 。

这适用于我的一些规格。但是我有几个不起作用，我不明白为什么。

它不起作用的两个规范测试了一个视图，该视图调用了一个部分，并且在部分内部我将“current_user”作为一种方法访问。错误是

```
undefined local variable or method `current_user' 
```

所以我想我的问题是如何正确地存根方法，以便可以在部分内部访问它们。

应该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-29T20:44:35.760

控制器存根不起作用，因为您不是在测试控制器，而是在测试视图。只需使用视图存根：

```
view.stub(:current_user).and_return(etc) 
```

这应该在部分和视图中起作用。

请参阅：[传递存根辅助方法的视图规范](https://www.relishapp.com/rspec/rspec-rails/v/2-7/docs/view-specs/view-spec#passing-view-spec-that-stubs-a-helper-method)

# asp.net-mvc - 无法确定相关操作的有效排序

> ID：14085038
> 
> 赞同：1
> 
> 时间：2012-12-29T19:12:48.990
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4, edmx

我正在使用 Entity Framework 4.1 我有一个“DomainEntities”表，其中包含我所有域实体的公共信息。我有一个用户表，用户 ID 是来自“DomainEntities”的外键。

见 EDMX： ![EDMX 文件](../Images/94cfaa6c43ac3c9ef431bcb60d6fecba.png)

当我运行以下代码时，出现错误：

> 无法确定相关操作的有效排序。由于外键约束、模型要求或存储生成的值，可能存在依赖关系。

编码：

```
static void addUserTest()
{
    DomainEntity userToAdd = new DomainEntity()
    {
        EntityName = "Test User",
        EntityTypeID = DomainEntity.eEntityType.User,
        EntityCreationDate = new DateTime(),
        EntityLastUpdateDate = new DateTime(),
        EntityCreatorUserID = 0,
        EntityUpdaterUserID = 0,
        EntityParentID = null,
        UserDetails = new User()
        {
            Username = "TestUser",
            Password = "123",
            FirstName = "Test",
            LastName = "User"

        }
    };

    using (var context = new CamelotDB())
    {
        context.DomainEntities.Add(userToAdd);
        context.SaveChanges();
    }

} 
```

我无法理解 EF 能够理解所需的 INSERT 顺序的原因是什么，它应该是“DomainEntities”中的一条记录，然后是“Users”中的一条记录。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T05:51:10.390

再搜索一天后，我发现问题出在 Creator 和 Updater 自引用外键上。

CreatorID 不是 Nullable，UpdaterID 也是如此，这就是为什么 EF 要求导航属性指向数据库中的实际实体，所以我在 Test User 的初始化程序中添加了以下几行。

```
EntityCreatorUserID = 0,
Creator = context.DomainEntities.Find(0),
EntityUpdaterUserID = 0,
Updater = context.DomainEntities.Find(0), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:30:44.433

看来，与其让您`User`与您的 相关`DomainEntity`，不如让您`User`成为 的*子*类`DomainEntity`。在实体模型设计器中，这是通过使用继承工具完成的（双击工具箱中的继承工具，然后在父实体上单击一次，在子实体上单击一次。）

这更准确地描述了 a 的性质`User`；一个`User` *是一个* `DomainEntity`。您当前的模型表明 a`User`与a*相关*`DomainEntity`，这似乎不正确。

# java - 为什么我的字符串显示不相等？

> ID：14085041
> 
> 赞同：-3
> 
> 时间：2012-12-29T19:13:14.210
> 
> 标签：java, android

我目前正在 Eclipse 中制作 Android 应用程序。目前我有两个字符串，我需要检查它们是否相等，问题是字符串相等，但它显示它们不相等，这让我很沮丧。

```
 if (newSource.equals(source)) {
        Log.d("Equal:", "Strings are equal");
    }
    else {
        Log.d("Not Equal: ", "Strings aren't equal");     
    } 
```

当我运行它时，它只是在日志 cat 中打印字符串不相等。我已经在 log cat 中打印了两个字符串，以检查它们是否 100% 相等。我只是想知道是否有人可以在我的代码中看到错误？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T19:19:51.230

这是因为字符串并不真正相等。要查看字符串的字节表示，您可以执行

```
System.out.println(Arrays.toString(str1.getBytes()));
System.out.println(Arrays.toString(str2.getBytes())); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T19:18:02.317

使用`trim()` which 将消除空格（如果有）

```
if ((newSource.trim()).equals(source.trim())) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T19:16:01.693

尝试使用[String.equalsIgnoreCase](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)

```
if (newSource.trim().equalsIgnoreCase(source.trim())) {
      Log.d("Equal:", "Strings are equal");
   }
 else {
        Log.d("Not Equal: ", "Strings aren't equal");     
   } 
```

因为字符串可能包含空格、大小写字母

# html - NSXMLParser - 修改 iPhone 中的元素

> ID：14085042
> 
> 赞同：1
> 
> 时间：2012-12-29T19:13:22.893
> 
> 标签：html, objective-c, nsxmlparser

我有一个需要修改其元素的 HTML 字符串。

我查看了`NSXMLParser`，但在阅读元素时没有看到任何修改元素的方法。

我不喜欢创建 a`NSMutableString`并向其添加字符串的解决方案。

有没有办法以优雅的方式读取 HTML 字符串并修改其元素？

例如，

```
<div style="color:grey"></div> 
```

将会

```
<div style="color:black"></div> 
```

不幸的是，我看到不能`NSXMLDocument`在 iPhone 应用程序中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T22:20:32.340

see the github project KissXML which is a 'clone of NSXML library and works the same. [https://github.com/robbiehanson/KissXML](https://github.com/robbiehanson/KissXML)

* * *

shameless self-advert: my fork of it works way **better with html** that's not real xml [https://github.com/Daij-Djan/KissXML](https://github.com/Daij-Djan/KissXML)

# objective-c - 为什么 webFrameLoadDelegate 协议不起作用？

> ID：14085046
> 
> 赞同：2
> 
> 时间：2012-12-29T19:14:01.060
> 
> 标签：objective-c, macos, webview, delegates, protocols

我刚开始使用 Xcode，我正在尝试制作一个 OS X 网络浏览器。

我想知道我的 webview 什么时候加载，什么时候不加载。我已经从这里和 Apple Developer Library 中查看了很多页面，这就是我得到的：

```
- (void)webViewDidStartLoad:(WebView *)webView {
    //enter code here  
} 
```

当然我也看到了`webViewDidFinishLoad` `void`，但是当我尝试这个时，我`AppDelegate.m`什么也没发生。我已将 webview 连接`frameLoadDelegate`到 App Delegate，据我所知，我还需要使用文件`<>`中的协议`AppDelegate.h`。我的问题是，当我输入`webFrameLoadDelegateProtocol`s`<>`时，它告诉我它`webFrameLoadDelegateProtocol`不存在。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-29T20:10:41.087

这似乎是因为您尚未设置 webView 委托。不过，您不需要将协议添加到您的标头中。相反，您需要在某处添加此代码，我建议在 applicationDidFinishLaunching

```
[webView setFrameLoadDelegate:self]; 
```

然后你可以覆盖这些方法。如果这不起作用，请确保您已将 webView 从标头连接到 IB 中的 webView。另外一定要在`.m`.

最后，您可以将我的开源示例用于 OS X 浏览器。它在 MIT 许可下，因此您可以自由使用它。

[https://github.com/JosiahOne/basic_cocoa_web_browser](https://github.com/JosiahOne/basic_cocoa_web_browser)

编辑

我刚刚意识到，您对 Cocoa 使用了错误的方法。请改用这些方法。

```
-(void)webView:(WebView *)sender didStartProvisionalLoadForFrame:(WebFrame *)frame
{
    //Did start Load
}

-(void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame
{
    //Did finish Load
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T19:26:52.107

> 我的问题是，当我在“<>”中输入“webFrameLoadDelegateProtocol”时，它告诉我“webFrameLoadDelegateProtocol”不存在。

[`WebFrameLoadDelegate`协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebFrameLoadDelegate_Protocol/Reference/Reference.html)是一种[*非正式协议*](https://stackoverflow.com/questions/2010058/informal-protocol-in-objective-c)。它没有资格以同样的方式被收养。`<webFrameLoadDelegateProtocol>`从你的班级中省略`@interface`。

> 当我在我的 AppDelegate.m 中尝试这个时，什么也没有发生。我已将 webview 的 frameLoadDelegate 连接到 App Delegate

什么时候将 Web 视图的`frameLoadDelegate`属性设置为您的应用程序委托？

# ios - 在 iphone 中将相机/照片库图像文件大小减少到 100 KB 以下

> ID：14085055
> 
> 赞同：7
> 
> 时间：2012-12-29T19:14:55.670
> 
> 标签：ios, iphone, image, uiimage, image-size

我想减小从`UIImagePickerController`. 我用这个方法

> NSData *imageData = UIImageJPEGRepresentation(image, 0.1);

但它将 2.2 MB 图像文件大小减少到 300 KB 我希望我的图像文件大小小于 100 KB。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T19:21:41.080

苹果的文档状态：

> 生成的 JPEG 图像的质量，表示为 0.0 到 1.0 之间的值。值 0.0 表示最大压缩（或最低质量），而值 1.0 表示最小压缩（或最佳质量）。

并且由于压缩质量是 CGFloat，它支持十位以上的小数位。话虽如此，请尝试：

```
NSData *imageData = UIImageJPEGRepresentation(image, 0.032); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T00:25:49.467

以公斤为单位减小图像大小的最简单方法是以像素为单位减小大小！将其缩小：

```
CGFloat scaleSize = 0.2f;
UIImage *smallImage = [UIImage imageWithCGImage:image.CGImage
                      scale:scaleSize
                      orientation:image.imageOrientation]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-15T06:20:19.277

First resize the image with below method:

```
- (UIImage *)resizeImage:(UIImage*)image newSize:(CGSize)newSize {
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

call this by:

```
UIImage *newImage=yourImage;
CGSize size=CGSizeMake(newImage.size.width/8,newImage.size.height/8);
newImage=[self resizeImage:newImage newSize:size]; 
```

And finally compressed your image as required:

```
NSData *imageData = UIImageJPEGRepresentation(newImage, 0.5);
NSLog(@"Size of image = %lu KB",(imageData.length/1024)); 
```

# c# - 使用 ServiceController 或其他以编程方式创建非托管内核驱动程序服务

> ID：14085057
> 
> 赞同：0
> 
> 时间：2012-12-29T19:15:06.600
> 
> 标签：c#, service, windows-services, driver, servicecontroller

我有一个 C/C# 混合项目，由一个用 C 编写的内核驱动程序和一个用 C# 编写的应用程序组成。现在，要创建内核驱动程序服务并运行它，我将本机 API OpenSCManager 和 CreateService 与互操作服务一起使用，代码片段是：

```
string sDriverFileName = @"c:\path\of\my\driver.sys";
IntPtr hServiceManager = IntPtr.Zero;
IntPtr hService = IntPtr.Zero;

if (System.IO.File.Exists(sDriverFileName) == false)
    throw new IOException( string.Format( "Driver file '{0}' does not exist.", sDriverFileName ) );

hServiceManager = WIN32.OpenSCManager(IntPtr.Zero, IntPtr.Zero, WIN32.SC_MANAGER_ALL_ACCESS);
if (hServiceManager == IntPtr.Zero)
    throw new Win32Exception(Marshal.GetLastWin32Error(), "Could not open service manager.");

hService = WIN32.CreateService
(
    hServiceManager,
    "DriverServiceName",
    "Driver Service Display Name",
    WIN32.SERVICE_ACCESS.SERVICE_ALL_ACCESS,
    WIN32.SERVICE_TYPE.SERVICE_KERNEL_DRIVER,
    WIN32.SERVICE_START.SERVICE_DEMAND_START,
    WIN32.SERVICE_ERROR.SERVICE_ERROR_NORMAL,
    sDriverFileName,
    IntPtr.Zero,
    IntPtr.Zero,
    IntPtr.Zero,
    IntPtr.Zero,
    IntPtr.Zero
); 
```

但我想（如果可能的话）让这个完全管理，只有用 C 编写的驱动程序并依赖系统 API/natives/whatever。

我知道如何使用 ServiceController 来管理（启动/停止/等）已安装的 Windows 服务，但我不知道如何使用它（或任何其他类）为内核驱动程序创建服务。

谢谢你的帮助。

# java - 无法从 sql 显示我的 netbeans jtable 中的所有行

> ID：14085061
> 
> 赞同：0
> 
> 时间：2012-12-29T19:15:37.340
> 
> 标签：java, swing, jdbc, jtable, actionlistener

我想显示我的 SQL 数据库表`bk_det`的所有 5 列，`jtable`该表是用 java 语言的 netbeans ide 显示的，但我只能显示 4 列而不是 5 列。有什么问题可以帮助我发布下面的代码：

```
 private void btviewbkdetActionPerformed(java.awt.event.ActionEvent evt) {
if(evt.getSource()==btviewbkdet){
    try {
            DBUtil util = new DBUtil();
            Connection con = util.getConnection();
            Statement stmt = con.createStatement();
            ResultSet rs = stmt.executeQuery("select * from bk_det");
            ResultSetMetaData rsmetadata = rs.getMetaData();
            int columns = rsmetadata.getColumnCount();
            DefaultTableModel dtm = new DefaultTableModel();
            Vector columns_name = new Vector();
            Vector data_rows = new Vector();
            for(int i=1; i< columns; i++){
            columns_name.addElement(rsmetadata.getColumnName(i));
            }
            dtm.setColumnIdentifiers(columns_name);

            while(rs.next()){
            data_rows = new Vector();
            for(int j=1; j< columns; j++){
            data_rows.addElement(rs.getString(j));
            }
            dtm.addRow(data_rows);
            }
            tblbnkdet.setModel(dtm);
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, ex.getMessage());
            Logger.getLogger(Demo.class.getName()).log(Level.SEVERE, null, ex);
        }        // TODO add your handling code here:
}
    }

    private void btbkrepviewActionPerformed(java.awt.event.ActionEvent evt) {
if(evt.getSource()==btviewbkdet){
    try {
            DBUtil util = new DBUtil();
            Connection con = util.getConnection();
            Statement stmt = con.createStatement();
            ResultSet rs = stmt.executeQuery("select * from dbo.bk_rep");
            ResultSetMetaData rsmetadata = rs.getMetaData();
            int columns = rsmetadata.getColumnCount();
            DefaultTableModel dtm = new DefaultTableModel();
            Vector columns_name = new Vector();
            Vector data_rows = new Vector();
            for(int i=1; i< columns; i++){
            columns_name.addElement(rsmetadata.getColumnName(i));
            }
            dtm.setColumnIdentifiers(columns_name);

            while(rs.next()){
            data_rows = new Vector();
            for(int j=1; j< columns; j++){
            data_rows.addElement(rs.getString(j));
            }
            dtm.addRow(data_rows);
            }
            tblbkrep.setModel(dtm);
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, ex.getMessage());
            Logger.getLogger(Demo.class.getName()).log(Level.SEVERE, null, ex);
        }        // TODO add your handling code here:
}        // TODO add your handling code here:
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:20:15.863

这里是变化

```
 for(int i=1; i<= columns; i++){
    columns_name.addElement(rsmetadata.getColumnName(i));
 } 
```

# android - Android Parcelables

> ID：14085067
> 
> 赞同：0
> 
> 时间：2012-12-29T19:16:35.400
> 
> 标签：android, parcelable

我只是有一个快速的问题。代码并没有真正涉及。当你有一个实现Parcelable的android类时，如果类中有arrayList，是不是必须循环遍历数组列表，在writeToParcel函数中单独写入每个元素？

感谢您的洞察力

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:19:48.517

AFAIK，您可以[使用`writeList()`](http://developer.android.com/reference/android/os/Parcel.html#writeList%28java.util.List%29)：

> 在当前 dataPosition() 处将列表展平到包裹中，如果需要，增加 dataCapacity()。列表值是使用[writeValue(Object)](http://developer.android.com/reference/android/os/Parcel.html#writeValue%28java.lang.Object%29)写入的，并且必须遵循那里的规范。

# r - 用于可重复研究的自动化文本

> ID：14085072
> 
> 赞同：11
> 
> 时间：2012-12-29T19:16:56.423
> 
> 标签：r, latex, r-markdown, reproducible-research

我正在使用 RStudio、R Markdown、Latex 和 Pandoc 来清理数据、构造变量、运行分析并报告结果。我对可重复研究的概念不熟悉，但我被迷住了。很有意义。

动态表格和数字没有问题。然而，动态文本难倒我。我可以插入内联代码来说明所有统计数据中有 95% 是错误的，但我不确定如何以可重现的方式改变我的语言。

例如，如果我有一个对象 x=0.66，我想写“三分之二的牙医使用 Crest”怎么办？我可以查看 x 的当前值 0.66，然后在文本中键入“2 out of 3”，但这是不可重现的。假设我得到新数据并重新运行分析，x 变为 0.52。我的文字会过时。当然，我可以动态报告 52% 的牙医更喜欢 Crest，但是当所有内容都以百分比报告时，报告就会变得陈旧。

我的想法是，当我想改变写作时，我可以创建可以在文本中调用的函数。例如，“out.of”函数可以处理 if else 语句来生成文本：

```
ifelse(x < 0.09,"fewer than 1 out of 10",
ifelse(x >= 0.09) & x < 0.11,"roughly 1 out of 10",
ifelse(x >= 0.11 & x < 0.15,"slightly more than 1 out of 10",
ifelse(x >= 0.15 & x < 0.19,"nearly 2 out of 5",
ifelse(x >= 0.19 & x < 0.21,"roughly 2 out of 5",
...
ifelse(x >= 0.95 & x < 0.99,"nearly all",
ifelse(x >= 0.99,"all","fubar"))...) 
```

我还可以创建一个分数函数，它可以对十分之一、五分之二、三分之一做类似的事情......

我相信其他人已经解决了这个问题。有什么线索吗？想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T19:42:01.377

有一个包 FRACTION ，当您将 / 替换为“out of”时，它可以工作。但是，使用小数位数时的输出很奇怪：

```
library(FRACTION)
fra(0.66,j=2)
# [1] "33 / 50"
fra(0.66,j=1)
#"7 / 1e+08" 
```

由@Dieter Menne 编辑：忘记这一点，请参阅下面的@Ben Bolker。

# binding - javafx 将 fx:id 传递给控制器 或 fxml onAction 方法中的参数

> ID：14085076
> 
> 赞同：7
> 
> 时间：2012-12-29T19:17:17.827
> 
> 标签：binding, controller, javafx

有没有办法将参数传递给 fxml 文件中的 onAction 方法？或者，我可以以某种方式获取调用 onAction 方法的组件的 fx:id 吗？

我有几个按钮应该做同样的事情，比如 5 个 ID 为 button1 - button5 的按钮，当按下时，应该打印相应的数字 1-5。我不希望有 5 个与此变量相同的 onAction 方法。

任何帮助表示赞赏，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-29T19:26:45.793

只调用一个处理程序，actionEvent.source 是发起事件的对象。

试试这个：

```
myButton1.setOnAction(new MyButtonHandler());
myButton2.setOnAction(new MyButtonHandler());

private class MyButtonHandler implements EventHandler<ActionEvent>{
    @Override
    public void handle(ActionEvent evt) {
        if (evt.getSource().equals(myButton1)) {
          //do something
        } else if (evt.getSource().equals(myButton2)) {
          //do something
        }
    }
} 
```

或者：

```
myButton1.addEventHandler(ActionEvent.ACTION, new MyButtonHandler());
myButton2.addEventHandler(MouseEvent.CLICKED, new MyButtonHandler());

private class MyButtonHandler implements EventHandler<Event>{
    @Override
    public void handle(Event evt) {
        if (evt.getSource().equals(myButton1)) {
          //do something
        } else if (evt.getSource().equals(myButton2)) {
          //do something
        }
    }
} 
```

# powershell - PowerShell：如何强制将结果作为数组而不是对象

> ID：14085077
> 
> 赞同：44
> 
> 时间：2012-12-29T19:17:30.037
> 
> 标签：powershell

```
$result = Get-ADUser -Filter $filter 
```

如果我有 2 个或更多结果，我将 $x 作为数组，但如果我只有一个结果，则将 $x 作为对象。如何使其更正确，始终接收数组 - 空的，一个元素或一些元素？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-29T19:20:42.473

试试 $x = @(get-aduser)

@() 语法强制结果为数组

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-04-14T08:16:39.653

顺便说一句，由于他们的评论中所述的原因，这个问题中的其他解决方案并不是最好的方法。更好的方法是在函数前加一个逗号，比如

```
$result = ,(Get-ADUser -Filter $filter) 
```

这会将一个空结果放入一个空数组中，一个 1 元素结果放入一个 1 元素数组中，一个 2+ 元素结果放入一个相等元素的数组中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T03:35:36.473

此外，您可以使用`$x=[array]get-aduser`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-29T17:57:56.307

我在循环中使用索引值时遇到了同样的问题。我通过改变来修复它

```
$PatchGroupData.SCCM_Collection[$i] 
```

到

```
@($PatchGroupData.SCCM_Collection)[$i] 
```

# c++ - 用于dll注入的Win32 Form

> ID：14085096
> 
> 赞同：0
> 
> 时间：2012-12-29T19:20:08.533
> 
> 标签：c++, winapi, dll, inject, dll-injection

我创建了一个带有表单的 dll，当我们注入 dll 时，表单打开。但是当我这样做时，问题是我注入的过程，卡住了，我无法让他注意到。

这就是我所做的。

```
DWORD WINAPI MessageLoop(HINSTANCE hInstance)
{
    hWindow = CreateDialog(hInstance, MAKEINTRESOURCE(IDD_DIALOG1), NULL, DLGPROC(WindowProc));

    MSG Msg;
    while(GetMessage(&Msg, 0, 0, 0))
    {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }

    return 0;
} 
```

和注射：

```
DWORD WINAPI DllMain(HINSTANCE hInstance, DWORD dwReason, LPSTR lpszReserved)
{
    if(dwReason == DLL_PROCESS_ATTACH)
    {
        CreateThread(0, 0, (LPTHREAD_START_ROUTINE)MessageLoop(hInstance), 0, 0, 0);
    }

    return 0;
} 
```

@雷米勒博：

```
DWORD WINAPI DllMain(HINSTANCE hInstance, DWORD dwReason, LPSTR lpszReserved)
{
    if(dwReason == DLL_PROCESS_ATTACH)
    {
        CreateThread(0, 0, &MessageLoop, hInstance, 0, 0);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T19:29:15.527

你的电话`CreateThread()`是错误的。您没有将地址传递`MessageLoop()`给它，而是实际上是在调用它`MessageLoop()`。尝试这个：

```
DWORD WINAPI MessageLoop(LPVOID lpParameter)
{
    HINSTANCE hInstance = (HINSTANCE) lpParameter;
    ...
}

CreateThread(0, 0, &MessageLoop, hInstance, 0, 0); 
```

顺便说一句，`CreateThread()`打电话不安全`DllMain()`。这在各种 MSDN 文档中都有明确说明。您必须将其移出`DllMain()`，例如让 DLL 导出一个在`CreateThread()`内部调用的单独函数，然后让您的注入代码在 DLL 加载到内存后调用导出的函数。

# php - PHP Composer 安装

> ID：14085098
> 
> 赞同：1
> 
> 时间：2012-12-29T19:20:18.427
> 
> 标签：php, git, composer-php

我在一个通过 ssh 连接到服务器的控制台中。现在我从 git 克隆了我的项目。

如果我执行以下操作：`php composer.phar install`我收到下一个错误：

```
Loading composer repositories with package information
Installing dependencies from lock file
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - Installation request for doctrine/doctrine-bundle dev-master -> satisfiable by doctrine/doctrine-bundle dev-master.
    - doctrine/doctrine-bundle dev-master requires jdorn/sql-formatter >=1.1,<2.0 -> no matching package found.
  Problem 2
    - Installation request for doctrine/doctrine-bundle 1.0.x-dev -> satisfiable by doctrine/doctrine-bundle 1.0.x-dev.
    - doctrine/doctrine-bundle 1.0.x-dev requires jdorn/sql-formatter >=1.1,<2.0 -> no matching package found.
  Problem 3
    - Installation request for zendframework/zend-i18n 2.0.5 -> satisfiable by zendframework/zend-i18n 2.0.5.
    - zendframework/zend-i18n 2.0.5 requires ext-intl * -> the requested PHP extension intl is missing from your system.
  Problem 4
    - zendframework/zend-i18n 2.0.5 requires ext-intl * -> the requested PHP extension intl is missing from your system.
    - zendframework/zend-validator 2.0.5 requires zendframework/zend-i18n 2.0.5 -> satisfiable by zendframework/zend-i18n 2.0.5.
    - Installation request for zendframework/zend-validator 2.0.5 -> satisfiable by zendframework/zend-validator 2.0.5.

Potential causes:
 - A typo in the package name
 - The package is not available in a stable-enough version according to your minimum-stability setting
   see <https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion> for more details.

Read <http://getcomposer.org/doc/articles/troubleshooting.md> for further common problems. 
```

我的作曲家.js：

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "friendsofsymfony/user-bundle": "*",
        "friendsofsymfony/jsrouting-bundle": "1.0.*",
        "mv/name1-bundle" : "*",
        "mv/name2-bundle" : "*",
        "psliwa/pdf-bundle": "*"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "repositories": [
        {
            "type": "vcs",
            "url": "git@bitbucket.org:name1/name1bundle.git"
        },
        {
            "type": "vcs",
            "url": "git@bitbucket.org:name2/name2bundle.git"
        },
        {
            "type": "composer",
            "url": "http://packages.zendframework.com/"
        },
        {
            "type": "composer",
            "url": "http://packagist.org/"
        }
    ],
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "public_html",
        "symfony-assets-install": "symlink"
    }
} 
```

奇怪的是，本地它就像一个魅力！但在服务器上它给了我错误。有什么问题以及如何解决这个问题？

哦，我做不到`php composer.phar update`（外部托管服务器）

```
Loading composer repositories with package information
Updating dependencies                                 

Fatal error: Allowed memory size of 536870912 bytes exhausted (tried to allocate 71 bytes) in phar:///composer.phar/src/Composer/DependencyResolver/RuleWatchGraph.php on line 47 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:59:37.783

`wget`最新的 composer.phar 以确保您在那里安全。或者你可以做的更好：

```
php composer.phar self-update 
```

问题 1 和 2 很可能有一些非法的版本符号。尝试`jdorn/sql-formatter`使用特定版本号将包直接添加到您自己的要求中。

问题 3 和 4 与作曲家无关。PHP 扩展`intl`未安装在您的系统上，但它是某些 ZF2 组件的必需依赖项。这意味着您需要在服务器上安装它或将其编译为 PHP。

# java - 如何在java中将对象集合作为方法的参数传递

> ID：14085099
> 
> 赞同：0
> 
> 时间：2012-12-29T19:20:17.637
> 
> 标签：java, generics, collections

我有一个填充的 ArrayList 对象（学生）集合，现在我想将该填充的对象传递到方法签名中，以将每个唯一对象写入文件。

```
 public static ArrayList<PopulateAlumnosObj> populateAlumnos(int idAlumno, String nombreAlumno) {
    ArrayList<PopulateAlumnosObj> alumnosList = new ArrayList<PopulateAlumnosObj>();
    for (int i = 0; i <= 100; i++) {
        mPopulateAlumnosObj = new PopulateAlumnosObj(i, nombreAlumno);     
        mPopulateAlumnosObj.setTelefonoAlumno("5555-5555"+i);
        mPopulateAlumnosObj.setDireccionAlumno("Dirección"+i);
        alumnosList.add(mPopulateAlumnosObj);
    }
    return alumnosList;
}

 *Here I receive the populate objct.*

 ArrayList<PopulateAlumnosObj> mReceiveAlumnosObjList = new  ArrayList<PopulateAlumnosObj>();
    mReceiveAlumnosObjList = populateAlumnos(1, "Isaías");
    writeToFile(mReceiveAlumnosObjList);

  *This does not work!*

  public static void writeToFile(ArrayList<PopulateAlumnosObj> aAlumnoToFile) { 
```

现在它起作用了！我每个人都错过了这个！不管怎么说，还是要谢谢你。

```
 for (PopulateAlumnosObj eachAlumnoToFile : aAlumnoToFile) {
            pw.println(eachAlumnoToFile.getIdAlumno() + "\t");
            pw.println(eachAlumnoToFile.getNombreAlumno() + "\t\t");
            pw.println(eachAlumnoToFile.getTelefonoAlumno() + "\t\t");
            pw.println(eachAlumnoToFile.getDireccionAlumno() + "\t\t");
        } 
```

我只是在练习收集之类的；但我会很感激你的建议。感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:25:02.203

1.  不要实例化`ArrayList`两次。仅将实例化保留在方法内`populateAlumnos`。
2.  我没有看到你的`mPopulateAlumnosObj`声明。`PopulateAlumnosObj mPopulateAlumnosObj;`里面一定有类似的东西`populateAlumnos`。
3.  传递你的`ArrayList`into`writeToFile`方法看起来是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T19:39:37.587

可能是这样的：

```
 List<PopulateAlumnosObj> populateAlumnos = new ArrayList<PopulateAlumnosObj>(100);

        for (int i = 0; i <= 100; i++) {
            PopulateAlumnosObj mPopulateAlumnosObj = new PopulateAlumnosObj(i, nombreAlumno);
            mPopulateAlumnosObj.setTelefonoAlumno("5555-5555"+i);
            mPopulateAlumnosObj.setDireccionAlumno("Dirección"+i);
            populateAlumnos.add(mPopulateAlumnosObj);
        }

        for(PopulateAlumnosObj student: populateAlumnos) {
            writeToFile(student);
        }

        public void writeToFile(PopulateAlumnosObj alumnos) { //method implementation... 
```

但我不确定你的`PopulateAlumnosObj`构造函数和设置者......他们看起来很奇怪......

# c# - 宇宙飞船：侧身滚动

> ID：14085100
> 
> 赞同：1
> 
> 时间：2012-12-29T19:20:33.297
> 
> 标签：c#, c++, math, unity3d

实际上，我正在编写一个小型太空射击游戏（2.5D，Topdown View）。玩家可以沿着 XZ 轴移动并通过右迷你杆（游戏手柄）旋转飞船或查看光标位置（键盘 + 鼠标）。

因此，运动和旋转（Y 轴，偏航）是分开的。整个事情工作正常，看起来不错 - 但现在我想做以下事情：

如果宇宙飞船侧向移动，它应该围绕 X / Pitch 轴旋转 / 左右倾斜一点，取决于侧向速度。

所以，我必须从以下给定输入计算横向速度：

速度矢量（X 和 Z 轴上的运动，Y 始终为“0”）方向矢量（Y 轴上的旋转，X 和 Z 始终为“0”）

通过横向速度，我可以围绕 X 轴旋转我的宇宙飞船，并将得到的四元数乘以围绕 y 轴的旋转。

有谁对此有解决方案吗？

* * *

**解决方案**：*只需通过飞船的航向“旋转”速度矢量，并使用“roll/z”轴作为围绕 X 轴（您的船头指向的轴）的侧向旋转：*

```
Quaternion Rotation     = Quaternion.Euler(0, mHeading.y, 0);
Vector3 RealVeloctiy    = Quaternion.Euler(0, -mHeading.y, 0) * Velocity; 
float Angle         = RealVeloctiy.z * 2.5f;        
Rotation            = Rotation *   Quaternion.Euler(Angle, 0, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T23:32:03.870

几种可能性：

1.  将速度矢量与飞船的局部左方向进行比较（确保它们首先在相同的坐标空间中）。您可以使用 Vector3.Angle 函数或点积来进行比较。适当缩放结果，并围绕前向轴应用局部旋转。

2.  直接接受用户输入。如果用户在一个方向扫射，则应用滚动值。您可以使用介于 -1 和 +1 之间的浮点数以及变化率。如果他们向左扫射，则以该速率将值移向 -1，或者如果他们向左扫射，则将值移至 +1。如果两个键都没有被按下，则将值移回 0。（您可能也想玩弄 Lerp、SmoothStep 和 SmoothDamp 函数）。缩放值以围绕相关轴应用适当的旋转。

# ios - SDWebImage 仅是 ARC。为项目打开 ARC 或使用 -fobjc-arc 标志 IOS

> ID：14085103
> 
> 赞同：1
> 
> 时间：2012-12-29T19:20:42.703
> 
> 标签：ios, xcode, sdwebimage

我正在尝试在 IOS 项目中使用 SDWebImage。

我正在按照他们的 github 中的这些说明进行操作：

```
import the project as a static library.

Add the SDWebImage project to your project

Download and unzip the last version of the framework from the download page
Right-click on the project navigator and select "Add Files to "Your Project":
In the dialog, select SDWebImage.framework:
Check the "Copy items into destination group's folder (if needed)" checkbox
Add dependencies

In you application project app’s target settings, find the "Build Phases" section and open the "Link Binary With Libraries" block:
Click the "+" button again and select the "ImageIO.framework", this is needed by the progressive download feature:
Add Linker Flag

Open the "Build Settings" tab, in the "Linking" section, locate the "Other Linker Flags" setting and add the "-ObjC" flag:

Import headers in your source files

In the source files where you need to use the library, import the header file:

#import <SDWebImage/UIImageView+WebCache.h> 
```

但我收到此错误：

```
SDWebImage is ARC only. Either turn on ARC for the project or use -fobjc-arc 
```

我试图搜索其他一些答案所说的标题搜索路径，我得到了这些结果：

```
Always search user paths -No
Header search paths
User header search paths 
```

我必须在那里设置一个值吗？还是我应该做其他事情？

我在他们的演示中注意到的另一件事是：在他们的演示中，他们在 frameworks 文件夹中导入了 sdwebimageview 的 .xcodeproject ，我已经按照 github 中的说明导入了 sdwebimageview.framework。

谢谢！

编辑：我的项目是非 Arc。

我尝试更改`other Linker flags from -ObjC to fobjc-arc`但仍然遇到相同的错误。

1）这是正确的还是我应该改变其他东西？2）如果我将我的项目从非弧更改为弧我应该更改什么？我只想使用那个库，所以我不想改变它。

在 .h 文件 os SDWebImage 它说：

```
#if !__has_feature(objc_arc)
#error SDWebImage is ARC only. Either turn on ARC for the project or use -fobjc-arc flag
#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T21:24:10.880

[本教程](http://www.codeography.com/2011/10/10/making-arc-and-non-arc-play-nice.html)向您展示如何在项目中为每个文件设置 ARC 或非 ARC。

除非您无论如何都想切换到 ARC，否则我建议您保留项目原样，只需启用`-fobjc-arc`SDWebImage 中文件的选项。查看上面的教程，其中的图像向您展示了放置标志的位置。（他们的示例使用`-fno-objc-arc`，它的作用相反，所以只要确保你使用`-fobjc-arc`。你在同一个地方输入它。）

# javascript - jquery在加载之前从页面中删除图像

> ID：14085112
> 
> 赞同：0
> 
> 时间：2012-12-29T19:21:10.463
> 
> 标签：javascript, html, css, responsive-design

我的问题与[此](https://stackoverflow.com/questions/6835957/javascript-remove-images-before-browser-requests-them-possible-on-page-loading)类似，但我不能在服务器端执行此操作，因为我只想在浏览器宽度小于 850 像素时删除*图像*。
我目前正在使用这个：

```
$(function () {
    if($(document).width() < 850) {
        $('.thumb').remove();
    }
}); 
```

图像被删除，但正如您[在此处](https://i.imgur.com/Nt0Dq.png)看到的，浏览器仍然会加载它们。
有人对此有解决方案吗？

谢谢

**解决方案（它现在有效！：**

不要总是加载图像，永远不要加载它们，除非浏览器大于 850 HTML：

```
<?php 
if(file_exists($sites[$i].'/thumb.png')) { ?>
    <img class="thumb" data="/experiments/<?=$sites[$i]?>/thumb.png" />
<?php 
} 
?> 
```

JS：

```
$('.thumb').each(function(index, element) {

        $(this).attr('src', $(this).attr('data'));
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T19:24:10.813

我认为你必须反过来：这意味着你只会在 doc.xml 文件中加载图像。宽度比 850 宽。据我所知，如果图像在 HTML 文档中被“硬编码”，则将在脚本运行之前请求/加载图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T19:31:59.153

当然。Remove() 首先加载它们，然后从 DOM 中删除它们。

删除它们以使浏览器永远不会加载它们的唯一方法是使用服务器端语言。在服务器端语言中，您可以检测图片是否在页面上，如果是，您可以删除它们。因此图像永远不会发送到浏览器。

至于您的情况，使用了“if($(document).width() < 850)”，因此您不能在服务器端完成所有操作。

为什么不在服务器端和浏览器端之间进行交换？喜欢 PHP 和 JavaScript？

例如，您可以使用 JavaScript 检测文档宽度是否小于 850。如果是，它会加载带有参数 (remove=true) 的 iframe。iframe 页面将包含所有 .thumb 和图像以及所有内容，您可以在页面上使用 PHP 来检测是否存在“remove=true”参数（使用 $_GET[remove]）。如果是，它将不会显示 .thumb 并且永远不会将其发送到浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T19:36:20.013

KG Christensen 和您设置图像`src`属性的想法很好。

另一个可行的想法是使图像具有`display: none;`样式，并`display: inline;`仅在满足您的条件时才将其更改为。如果图像被隐藏，浏览器不应加载它们。

类似于以下内容：

```
<style type="text/css">
.thumb {
  display: none;
}
</style>

<script type="text/javascript">
$(document).ready(function() {
  if ($(document).width() >= 850)
    $('.thumb').show();
});
</script> 
```

# emacs - Emacs Tramp 连接失败并显示“没有这样的目录”

> ID：14085114
> 
> 赞同：1
> 
> 时间：2012-12-29T19:21:54.390
> 
> 标签：emacs, aquamacs

我希望使用 Tramp 模式来编辑远程 Linux 机器上的文件，所以我打开一个像这样的文件：

```
C-x C-f /ssh:hwolff@<host>:/home/hwolff/temp.txt 
```

但是没有提示输入密码，保存文件会出现“没有这样的目录”的错误。Emacs 似乎将文件路径视为本地文件，而不是尝试连接到远程机器。我可以毫无问题地通过 SSH 连接到那台机器。

在 SO 讨论[Emacs Tramp 有时无法打开目录之后](https://stackoverflow.com/questions/7856399/emacs-tramp-unable-to-open-directory-at-times)，我尝试打开 tramp-debug-buffer，但没有出现任何调试缓冲区。

*Messages* 缓冲区中的相关行：

```
Use M-x make-directory RET RET to create the directory and its parents
...
Saving file /ssh:hwolff@<host>:/home/hwolff/temp.txt...
ad-Orig-error: /ssh:hwolff@<host>:/home/hwolff/: no such directory 
```

我像这样加载 Tramp：

```
(load-file "/Applications/Aquamacs.app/Contents/Resources/lisp/net/tramp.elc") 
```

这似乎工作正常，并且 Emacs 似乎报告 Tramp 已准备好：

```
M-x tramp-version
2.1.10 
```

我在 Mac OS 10.7.5 上将 Emacs 23.3.1 作为 Aquamacs 运行：

```
GNU Emacs 23.3.1 (i386-apple-darwin9.8.0, NS apple-appkit-949.54)
of 2011-03-18 on braeburn.aquamacs.org - Aquamacs Distribution 2.2 
```

# c# - 从字符串创建 Facebook.JsonArray 对象，用于测试目的

> ID：14085115
> 
> 赞同：0
> 
> 时间：2012-12-29T19:21:54.717
> 
> 标签：c#, facebook, facebook-c#-sdk

我在我的项目中使用[Facebook C# SDK](http://csharpsdk.org/)，出于测试目的，我希望能够存根`FacebookClient`并插入我自己的假客户端，它将返回对 Facebook API 调用的预定义响应（我只是`FacebookClient.Get`在我的应用程序）。使用工厂模式和可配置的 StructureMap 设置很容易实现这一点。

除了一件事...

我的假货`FacebookClient`需要退货[`Facebook.JsonArray`](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/blob/master/Source/Facebook/SimpleJson.cs#L80)。

我一直在筛选 SDK 源代码，可以看到[`SimpleJson`](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/blob/master/Source/Facebook/SimpleJson.cs#L473)该类可用于创建`JsonArray`对象。但是它被标记为内部，除非我开始搞乱并重建 SDK。

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T06:03:41.327

您应该直接使用 SimpleJson。您可以通过“SimpleJson”NuGet 包或在 Github 上获得它。基本上，我们不希望人们将 Facebook C# SDK 用作 JSON 序列化程序 - 这就是我们将您引用的方法标记为已弃用的原因。

Github 来源：[https ://github.com/facebook-csharp-sdk/simple-json](https://github.com/facebook-csharp-sdk/simple-json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:15:42.203

自己找到了答案；[`FacebookClient.DeserializeJson`](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/blob/master/Source/Facebook/FacebookClient.cs#L191)做的伎俩，虽然它已被弃用。

```
var content = /* Previously obtained JSON string */;

var client = new Facebook.FacebookClient();

var result = client.DeserializeJson(content, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T20:25:55.477

您也可以尝试将`Facebook.Moq`其用于测试目的。 [https://github.com/prabirshrestha/Facebook.Moq](https://github.com/prabirshrestha/Facebook.Moq)

安装包 Facebook.Moq

```
var mockFb = FacebookMock.New();

mockFb
    .FbSetup()
    .ReturnsJson("{\"id\":\"4\",\"name\":\"Mark Zuckerberg\",\"first_name\":\"Mark\",\"last_name\":\"Zuckerberg\",\"link\":\"http:\\/\\/www.facebook.com\\/zuck\",\"username\":\"zuck\",\"gender\":\"male\",\"locale\":\"en_US\"}");

var fb = mockFb.Object;

dynamic result = fb.Get("/4");

Assert.Equal("Mark Zuckerberg", result.name); 
```

# php - 提交页面时不返回任何内容。“未定义的索引：”

> ID：14085116
> 
> 赞同：0
> 
> 时间：2012-12-29T19:22:06.430
> 
> 标签：php, html

我已经完成了一个代码，在其中单击提交按钮时，我从 Image selected from 中获取了一个值，但是当我尝试从 $_POST 获取值时，它给了我这样的错误：未定义的索引：....（虽然我有使用文件输入选择图像）

这是我放置的 HTML 标签的代码：

```
<input type="file" name="imgFile" accept="image/*" id="imgFile" /> 
```

这是我试图在提交按钮上获得价值的代码：

```
$img = $_POST['imgFile']; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T19:23:58.903

您需要使用变量`$_FILES['imgFile']`而不是`$_POST['imgFile']`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T19:24:38.097

文件应该通过`$_FILES`超全局访问，而不是`$_POST`. 因此，对于您的示例，它看起来像：

```
$_FILES['imgFile'] 
```

此外，请确保您已`enctype`在表单上设置相关事件（即`multipart/form-data`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T19:24:17.100

您打开了严格的 php，这就是您收到错误消息的原因。但另外，您正试图通过一个不适用于 php 的命令获取`$_FILES`数据。`$_POST`所有`type="file"`需要取自`$_FILES`所有其他 POST 数据来自`$_POST`.

```
<?php
$img = "";
if(isset($_FILES["imgFile"])){
    $img = $_FILES["imgFile"];
} 
```

我建议每个人都在 php 严格模式下编程，而不是禁用它；它将有助于消除将来令人困惑的错误。

# wpf - windows forms/wpf（非硬件加速）可以处理这个吗？

> ID：14085117
> 
> 赞同：0
> 
> 时间：2012-12-29T19:22:14.797
> 
> 标签：wpf, winforms

我在 XNA 中创建了这个图表工具，它可以可视化数据并让我与之交互（放大和缩小以及及时前后移动）。无论如何，我只是想知道我是否应该坚持使用 XNA，或者 Windows 窗体是否可以处理这种实时交互和如此多的数据？

我不知道还要提供什么，希望屏幕截图足以作为一般指南。提前致谢！ ![图表图像](../Images/0b2fd232ab76233d9ba87120de653f74.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:32:34.563

我认为 WPF 应该能够处理这个问题，但你自己说它已经在 XNA 中创建了。您应该权衡在 XNA 中使用它的缺点，而不是在将其移植到 WPF 中的缺点。我想这真的取决于CPU。您可以使用等效的 .NET openGL 手动绘制它，而不是使用本机工具，这意味着您可以利用超过 1 个核心

# c++ - SIGSEGV 的原因会是系统内存不足吗？

> ID：14085119
> 
> 赞同：2
> 
> 时间：2012-12-29T19:22:19.317
> 
> 标签：c++, ram, segmentation-fault

我的系统内存很小，1.5GB。我有一个调用特定方法大约 300 次的 C++ 程序。这个方法使用了 2 个映射（每次都被清除），我想知道在这个方法的某些调用中是否有可能堆栈溢出并且程序失败。如果我放入小数据（因此该方法被调用 30 次），程序运行良好。但现在它引发了 SIGSEGV 错误。我试图解决这个问题大约 3 天，但没有运气，我尝试的每个解决方案都失败了。

我在下面找到了 SIGSEGV 的一些原因，但没有任何帮助 [什么是 C++ 中的 SIGSEGV 运行时错误？](https://stackoverflow.com/questions/1564372/what-is-sigsegv-run-time-error-in-c/)

好的，这里是代码。我有 2 个实例，其中包含一些关键字特征及其分数

我想得到他们的欧几里德距离，这意味着我必须保存每个实例的所有关键字，然后找到第一个关键字与第二个关键字的差异，然后找到第二个关键字的差异实例。我想要的是在迭代第一个地图时，能够从第二个地图中删除元素。由于我们有两个消息集合，因此多次调用以下方法，并且将来自第一个的每条消息与来自第二个的每条消息进行比较。

我有这段代码，但是它突然停止了，尽管我检查了它在某些地方放置了多个 cout 的情况下工作了几秒钟

请注意，这是针对大学任务的，因此我不能使用 boost 和所有这些技巧。但我想知道绕过我遇到的问题的方法。

```
float KNNClassifier::distance(const Instance& inst1, const Instance& inst2) {   
map<string,unsigned> feat1;
map<string,unsigned> feat2;
for (unsigned i=0; i<inst1.getNumberOfFeatures(); i++) {
  feat1[inst1.getFeature(i)]=i;
}
for (unsigned i=0; i<inst2.getNumberOfFeatures(); i++) {
  feat2[inst2.getFeature(i)]=i;
}
float dist=0;

map<string,unsigned>::iterator it;
for (it=feat1.begin(); it!=feat1.end(); it++) {
  if (feat2.find(it->first)!=feat2.end()) {//if and only if it exists in inst2
    dist+=pow( (double) inst1.getScore(it->second) - inst2.getScore(feat2[it->first]) , 2.0);
    feat2.erase(it->first);
  }
  else {
    dist+=pow( (double) inst1.getScore(it->second) , 2.0);
  }
}

for (it=feat2.begin(); it!=feat2.end(); it++) {//for the remaining words
  dist+=pow( (double) inst2.getScore(it->second) , 2.0);
}
feat1.clear(); feat2.clear(); //ka8arizoume ta map gia thn epomenh xrhsh
return sqrt(dist);    
} 
```

我也尝试了这个想法，以便不必删除某些东西，但它也突然停止了。

```
float KNNClassifier::distance(const Instance& inst1, const Instance& inst2) {
map<string,unsigned> feat1;
map<string,unsigned> feat2;
map<string,bool> exists;
for (unsigned i=0; i<inst1.getNumberOfFeatures(); i++) {
  feat1[inst1.getFeature(i)]=i;
}
for (unsigned i=0; i<inst2.getNumberOfFeatures(); i++) {
  feat2[inst2.getFeature(i)]=i;
  exists[inst2.getFeature(i)]=false;
  if (feat1.find(inst2.getFeature(i))!=feat1.end()) {
    exists[inst2.getFeature(i)]=true;
  }
}
float dist=0;
map<string,unsigned>::iterator it;
for (it=feat1.begin(); it!=feat1.end(); it++) {
  if (feat2.find(it->first)!=feat2.end()) {
    dist+=pow( (double) inst1.getScore(it->second) - inst2.getScore(feat2[it->first]) ,      2.0);
  }
  else {
    dist+=pow( (double) inst1.getScore(it->second) , 2.0);
  }
}

for (it=feat2.begin(); it!=feat2.end(); it++) {
  if(it->second==false){//if it is true, it means the diff was done in the previous iteration
    dist+=pow( (double) inst2.getScore(it->second) , 2.0);
  }
}

feat1.clear(); feat2.clear(); exists.clear();
return sqrt(dist);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T19:24:55.560

如果`malloc`失败并因此返回`NULL`，假设程序没有正确处理该失败，它确实可能导致 SIGSEGV。但是，如果内存太低，您的系统更有可能开始使用大量内存杀死进程（实际逻辑更复杂，如果您有兴趣，请在谷歌搜索“oom killer”）。

很有可能您的程序中只有一个错误。解决这个问题的一个好方法是使用内存调试器，例如`valgrind`查看您是否访问了无效的内存位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:12:28.547

一种可能的解释是您的程序在释放动态分配的对象后访问它。如果对象足够小，内存分配器会保留内存以供下次分配使用，释放后的访问是无害的。如果对象很大，内存分配器会取消映射用于保存对象的页面，并且释放后的访问会导致 SIGSEGV。

几乎可以肯定的是，无论 SIGSEGV 发生的底层机制如何，代码中的某个地方都存在一个错误，这是因果链的关键部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T19:54:52.173

1.5GB 不算小。一般来说，你可以在 1.5GB 中做很多事情。对于 300 次迭代要使用 1.5GB（假设操作系统内核使用 0.5GB 等），每次迭代大约需要使用 32MB。那是相当多的内存，所以，我的猜测是您的代码实际上使用了很多内存，或者您的代码包含某种泄漏。更有可能是后者。我曾在小于 64KB 的机器上工作，而我的第一台 PC 有 8MB 的内存，这在当时被认为是很多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-08T21:14:39.443

不，如果系统内存不足，此代码无法导致段错误。map 分配使用 new 运算符，它不使用堆栈进行分配。它使用堆，如果内存耗尽，将抛出 bad_alloc 异常，在发生无效内存访问之前中止：

```
 $ cat crazyalloc.cc
    int main(void)
    {
            while(1) {
                    new int[100000000];
            }

            return 0;
    }
    $ ./crazyalloc
    terminate called after throwing an instance of 'std::bad_alloc'
      what():  std::bad_alloc
    Aborted (core dumped) 
```

替代实现也崩溃的事实暗示问题不在此代码中。

问题出在 Instance 类上。可能不是内存不足，应该是缓冲区溢出，可以用调试器确认。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-17T17:35:21.080

如上所述，最可能的原因是内存分配错误或内存泄漏。检查缓冲区溢出，或者是否在释放资源后尝试访问它。

# mysql - 内连接、计数和分组以获取比率

> ID：14085124
> 
> 赞同：1
> 
> 时间：2012-12-29T19:22:56.360
> 
> 标签：mysql, count, group-by, inner-join

我希望对于知道他们在用 mysql 做什么的人来说，这将是一个简单的问题。

我现在有两张桌子；“任务”和“完成”。

任务：

```
taskID  |  task_name  |  desciption  |  deadline
1       |  task 1     |  do this     | 2012-08-11
2       |  task 2     |  do that     | 2012-10-11
3       |  task 3     |  do the other| 2012-12-31 
```

完成：

```
taskID  |  userID  |  status
1       |  24      |  complete
1       |  72      |  complete
1       |  15      |  late
2       |  41      |  complete
2       |  86      |  incomplete
3       |  4       |  incomplete
3       |  19      |  incomplete 
```

我正在尝试在一个查询中检索完成（准时或迟到）每项已超过截止日期的任务的用户比例（如下所示）：

```
taskID  |  task_name  |  description  |  deadline  |  completion_ratio
1       |  task 1     |  do this      | 2012-08-11 |  0.66666
2       |  task 2     |  do that      | 2012-10-11 |  0.5 
```

任务 3 未显示，因为截止日期尚未过去。

以下代码为我提供了两个表的简单连接，并仅选择那些已超过截止日期的任务，但我想知道如何获得上面显示的结果。

```
SELECT task.taskID,task.task_name,task.description,task.deadline,completion.status
  FROM task 
  INNER JOIN completion ON task.taskID=completion.taskID 
  WHERE task.deadline>=CURDATE() 
```

查询结果：

```
taskID  |  task_name  |  description  |  deadline  |  status
1       |  task 1     |  do this      | 2012-08-11 | complete
1       |  task 1     |  do this      | 2012-08-11 | complete
1       |  task 1     |  do this      | 2012-08-11 | late
2       |  task 2     |  do that      | 2012-10-11 | complete
2       |  task 2     |  do that      | 2012-10-11 | incomplete 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:41:13.390

试试这个：

```
SELECT
  t.taskID,
  t.task_name,
  t.desciption, 
  t.deadline,
  SUM(CASE WHEN c.status = 'complete' THEN 1 ELSE 0 END) * 1.0 / 
  COUNT(c.status) AS completion_ratio
FROM tasks t
INNER JOIN completion c ON t.taskID = c.taskID 
WHERE t.deadline >= CURDATE()
GROUP BY   t.taskID,
  t.task_name,
  t.desciption, 
  t.deadline; 
```

[SQL Fiddle Demo](http://sqlfiddle.com/#!2/890ff/2)^(**请注意：**我修改了 fiddle 演示中的日期以进行演示。)

这会给你：

```
| TASKID | TASK_NAME | DESCIPTION |   DEADLINE | COMPLETION_RATIO |
-------------------------------------------------------------------
|      1 |    task 1 |    do this | 2012-12-30 |          0.66667 |
|      2 |    task 2 |    do that | 2012-12-31 |              0.5 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:08:07.590

根据问题提供的表格数据，也可以在这里查看：

```
SELECT T.task_id,
  T.task_name,
  T.description,
  T.deadline,
  SUM( if(C.status = 'complete', 1, 0)) * 1.0 /count(C.status)
FROM tasks AS T
INNER JOIN completions AS C ON T.task_id = C.task_id 
GROUP BY T.task_id
HAVING T.deadline >= CURDATE() 
```

[SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/3b1da/1)

# math - 两个角之间的一点是从另一点出发吗？

> ID：14085126
> 
> 赞同：0
> 
> 时间：2012-12-29T19:23:19.067
> 
> 标签：math, opengl-es

我试图确定一个点是否在来自原始点的两个角度之间（以确定是否使用 OpenGL 绘制它，尽管这无关紧要）。最简单的方法是什么？ ![在此处输入图像描述](../Images/800f8576a5161a3a1a6ee26bcf32bffe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:26:14.290

如果角度 CAB + BAD = 45 的绝对值，则点在内部。如果 CAB + BAD > 45，那么点在外面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T19:46:46.880

2 个向量`u = (ux, uy`), `v = (vx, vy)`, 的二维叉积是

```
u x v = ux * vy - uy * vx = |u| * |v| * sin(phi) 
```

其中是到`phi`之间的角度（从 到 测量`u`）。如果角度在 0 到 180 度之间，则叉积为正。`v``u``v`

所以

```
(B - A) x (D - A) > 0 
```

如果`B`位于从`A`到的向量“左侧”的半平面上`D`，因此

```
(B - A) x (D - A) > 0 and (B - A) x (C - A) < 0 
```

确切地说，如果`B`位于该部门。如果您还想捕获`B`位于扇区边界的情况，请使用`>=`resp。`<=`.

（*注意：*只要扇区的角度`A`小于 180 度，此方法就有效，并且可能可以推广到更大的角度。由于您的角度是 45 度，因此可以使用这些公式。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T19:31:12.820

如果您有点坐标且没有角度，则使用极坐标将 [X,Y] -> [R,Theta]（半径和角度）相对于中心（图中的 A）转换，然后比较角度（θ）。

此代码将 Point 转换为相对于中心点的 PolarPoint：

```
/// <summary>
/// Converts Point to polar coordinate point
/// </summary>
public static PolarPoint PointToPolarPoint(Point center, Point point)
{
  double dist = Distance(center, point);

  double theta = Math.Atan2(point.Y - center.Y, point.X - center.X);

  if (theta < 0)  // provide 0 - 2Pi "experience"
    theta = 2 * Math.PI + theta;

  return new PolarPoint(dist, theta);
}

/// <summary>
/// Calculates distance between two points
/// </summary>
public static int Distance(Point p1, Point p2)  
{
  return (int) Math.Sqrt
         (
           Math.Pow(p1.X - p2.X, 2) +
           Math.Pow(p1.Y - p2.Y, 2)
         );
} 
```

C# 中的 Polar Point 类（包括转换回 Point）：

```
 /* NFX by ITAdapter
     * Originated: 2006.01
     * Revision: NFX 0.2  2009.02.10
     */
    using System;
    using System.Collections.Generic;
    using System.Drawing;
    using System.Text;

    namespace NFX.Geometry
    {

      /// <summary>
      /// Represents a point with polar coordinates
      /// </summary>
      public struct PolarPoint
      {

        #region .ctor

          /// <summary>
          /// Initializes polar coordinates
          /// </summary>
          public PolarPoint(double r, double theta)
          {
            m_R = r;
            m_Theta = 0;
            Theta = theta;
          }

          /// <summary>
          /// Initializes polar coordinates from 2-d cartesian coordinates
          /// </summary>
          public PolarPoint(Point center, Point point)
          {
            this = CartesianUtils.PointToPolarPoint(center, point);
          }
        #endregion

        #region Private Fields 
          private double m_R;
          private double m_Theta;

        #endregion

        #region Properties
          /// <summary>
          /// R coordinate component which is coordinate distance from point of coordinates origin
          /// </summary>
          public double R
          {
            get { return m_R; }
            set { m_R = value; }
          }

          /// <summary>
          /// Angular azimuth coordinate component. An angle must be between 0 and 2Pi.
          /// Note: Due to screen Y coordinate going from top to bottom (in usual orientation)
          ///  Theta angle may be reversed, that is - be positive in the lower half coordinate plane.
          /// Please refer to:
          ///  http://en.wikipedia.org/wiki/Polar_coordinates
          /// </summary>
          public double Theta
          {
            get { return m_Theta; }
            set
            {
              if ((value < 0) || (value > Math.PI * 2))
                throw new NFXException("Invalid polar coordinates angle");
              m_Theta = value;
            }
          }

          /// <summary>
          /// Returns polar coordinate converted to 2-d cartesian coordinates.
          /// Coordinates are relative to 0,0 of the angle base vertex
          /// </summary>
          public Point Point
          {
            get
            {
              int x = (int)(m_R * Math.Cos(m_Theta));
              int y = (int)(m_R * Math.Sin(m_Theta));
              return new Point(x, y);
            }
          }
        #endregion

        #region Operators  
          public static bool operator ==(PolarPoint left, PolarPoint right)
          {
            return (left.m_R == right.m_R) && (left.m_Theta == right.m_Theta);
          }

          public static bool operator !=(PolarPoint left, PolarPoint right)
          {
            return (left.m_R != right.m_R) || (left.m_Theta != right.m_Theta);
          }
        #endregion

        #region Object overrides
          public override bool Equals(object obj)
          {
            if (obj is PolarPoint)
             return this==((PolarPoint)obj);
            else
             return false; 
          }

          public override int GetHashCode()
          {
            return m_R.GetHashCode() + m_Theta.GetHashCode();
          }

          public override string ToString()
          {
            return string.Format("Distance: {0}; Angle: {1} rad.", m_R, m_Theta);
          }

        #endregion

      }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T09:15:44.800

我最终把它归结为这个函数（其中cameraYR是点A旋转的角度，cameraX是Ax，cameraY是Ay，x是Bx，y是By）：

```
float cameraAngle = PI + cameraYR;
float angle = PI / 2 + atan2f(cameraY - y, cameraX - x);
float anglediff = fmodf(angle - cameraAngle + PI, PI * 2) - PI;
return (anglediff <= visibleAngle && anglediff >= -visibleAngle) || (anglediff <= -PI * 2 + visibleAngle && angleDiff >= -PI * 2 - visibleAngle); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T15:49:52.453

我刚刚回答了一个类似的问题。找出一个角度是否在两个角度之间（这也解决了你的问题）。检查下面

[是两个角之间的角](https://stackoverflow.com/questions/10236848/is-angle-in-between-two-angles/15070642#15070642)

希望能帮助到你

# android - 使用apktool反编译apk文件

> ID：14085128
> 
> 赞同：14
> 
> 时间：2012-12-29T19:23:27.657
> 
> 标签：android

我尝试使用 apktool 提取 apk 文件。我按照下面提到的步骤进行操作。 [有没有办法从 APK 文件中获取源代码？](https://stackoverflow.com/questions/3593420/android-getting-source-code-from-an-apk-file)

但我无法完全得到它。我不确定将 apktool 放在哪里以及如何反编译 apk 文件。运行 apktool 命令时出现以下错误 C:\Windows\System32>apktool.bat Unable to access jarfile C:\Windows\System32\apktool.jar

请帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T10:50:58.563

我遇到了同样的问题。我的情况是，我发现 jar 文件存在于一个单独的包中，除了 apktool-install-windows-r05-ibot.tar.bz2 之外，我还必须下载 apktool1.5.2.tar.bz2 。然后我提取了jar文件并将其放在与apktool相同的目录中。希望能帮助到你。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-28T03:21:13.353

我也有这个问题，然后我在[apktool](http://ibotpeaches.github.io/Apktool/install/)中注意到了这一点。完成之后，apktool 运行良好。

> 3.  将下载的 jar 重命名为 apktool.jar

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T22:25:52.807

我会在不会被删除的地方创建一个名为“apktool”的文件夹（安全点）。

通过 Google 代码页（链接如下）下载包装文件和 apktool 文件本身。这是2个文件。一个是特定于操作系统的包装器，以及 aapt（重建所需的），另一个是简单的 apktool.jar，它是主应用程序。

完成后，进入 Windows 环境变量 (PATH)，并将当前目录添加到其中。因此，您可以通过命令提示符在任何地方访问 apktool / aapt。

[http://code.google.com/p/android-apktool/](http://code.google.com/p/android-apktool/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-26T11:02:21.833

我已经关注了 Windows 的[https://ibotpeaches.github.io/Apktool/install/](https://ibotpeaches.github.io/Apktool/install/)链接，并将 jar 文件重命名为“apktool.jar”，并带有额外的 jar 扩展名（ie.apktool.jar.jar），所以我收到“错误：无法访问 jarfile C:\APKtool\apktool.jar"。

正确重命名（删除额外的 .jar 扩展名）后，我可以正确使用“apktool.jar”。

我知道这是一个愚蠢的错误，但有时它会发生:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-24T14:23:37.437

ApkTool + Dex2Jar + 任何 java 反编译器？来吧！这是旧风格:0)

尝试名为 Jadx 的新开源 APK 和 DEX 反编译器：[https ://sourceforge.net/projects/jadx/files/](https://sourceforge.net/projects/jadx/files/)

它在这里也有在线版本：[http ://www.javadecompilers.com/apk/](http://www.javadecompilers.com/apk/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-03T07:43:25.493

那些仍然面临同样问题的人，请按照以下步骤操作：

1.  下载“ [https://raw.githubusercontent.com/iBotPeaches/Apktool/master/scripts/windows/apktool.bat](https://raw.githubusercontent.com/iBotPeaches/Apktool/master/scripts/windows/apktool.bat) ”
2.  [从https://bitbucket.org/iBotPeaches/apktool/downloads/](https://bitbucket.org/iBotPeaches/apktool/downloads/)下载最新的 apktool
3.  将 apktool_version.jar 重命名为 apktool.jar
4.  将 .bat 和 .jar 放在同一个文件夹中。
5.  跑`apktool.bar d "path of apkfile/example.apk"`

[![在此处输入图像描述](../Images/e3b685a597523ffe84763029b1c1be21.png)](https://i.stack.imgur.com/gnQ68.png)

# jquery - 当我使用 jQuery 单击链接时，如何从 URL 中检索内容？

> ID：14085140
> 
> 赞同：1
> 
> 时间：2012-12-29T19:24:16.377
> 
> 标签：jquery

我有以下 HTML：

```
 <div class="button accessLink"
      id="loginLink"
      data-href="/User/Account/Login"
      title="Login">Login</div> 
```

我需要做的是，当用户点击 div 时，我想调用 URL“/User/Account/Login”，然后获取内容。我有以下代码，但我不确定。我是否需要使用 Ajax，如果需要，我该如何对其进行编码以调用 URL。

```
 $('#loginLink')
      .click(function () {

      return false;
      }); 
```

我想获取内容并将它们放在这个 HTML 中：

```
<article id="article" class="container_12">
</article> 
```

任何关于我如何做到这一点的建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T19:27:48.193

您可以使用[data](http://api.jquery.com/data/)来获取 href 并使用[load](http://api.jquery.com/load/)来加载内容：

```
 $('#loginLink').click(function () {
     $('#article').load($(this).data('href'));
     return false;
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T19:27:37.477

在此处使用 jQuery 'Load' 函数 [是文档的链接](http://api.jquery.com/load/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T19:28:43.660

由于它位于同一原点，因此您可以使用 jQuery 的[`load()`](http://api.jquery.com/load/)功能：

```
$('#loginLink').click(function (e) {
    e.preventDefault();
    $('#article').load('/User/Account/Login');
}); 
```

# cocoa - 没有从 MainMenu.nib 调用可可 NSPanel initWithCoder

> ID：14085141
> 
> 赞同：-1
> 
> 时间：2012-12-29T19:24:26.477
> 
> 标签：cocoa

我的 MainMenu.xib 中有一个顶级 NSPanel。我将面板的类指定为我的类，它是 NSPanel 的子类。我期待方法 initWithCoder: 在应用程序启动时被调用，但事实并非如此。

有谁知道我需要做什么来获取 initWithCoder: 应用程序启动时从 MainMenu.xib 调用？我是 Xcode 的新手，xcode 中 xib 文件的 UI 有点让人不知所措。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T22:46:01.053

根据[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/uid/20000013-15207)：

> 虽然 NSWindow 类继承了 NSResponder 的 NSCoding 协议，但该类不支持编码。

你检查过其他初始化程序吗？

*   `-initWithContentRect:styleMask:backing:defer:`
*   `-initWithContentRect:styleMask:backing:defer:screen:`

# javascript - 使用包含、扩展和块时，jade 脚本加载顺序看起来很奇怪

> ID：14085148
> 
> 赞同：3
> 
> 时间：2012-12-29T19:24:52.840
> 
> 标签：javascript, html, node.js, express, pug

好的，我将尽量简化这个例子。这是我的问题。我正在使用 node 和 express 来生成 html。我有一个主要的 layout.jade 文件，它在正文的末尾包含以下内容：

```
block scripts
  script(src='/javascripts/libs/jquery-1.8.1.min.js') 
```

然后我有一个翡翠部分（_shapes.jade），它具有以下代码：

```
block append scripts
  script(src='/javascripts/wire.js') 
```

然后我有生成 html 的玉文件 (properties_panel.jade)：

```
extends ../layout

include _shapes

block controls
  include ../_controls 
```

wire.js 文件需要 jQuery 才能运行。翡翠的 html 输出与我期望的完全一样。我在正文标记的末尾有一个脚本标记块，并且顺序正确（首先是 jQuery）。

问题是浏览器没有首先加载 jQuery。但是，在 jQuery 加载之后，它似乎也会再次加载文件。我已经推断出这一点，因为我的 wire.js 文件被包装在一个像这样的自执行匿名函数中：

```
!function (context, $) {
  console.log($);
}(this, window.jQuery); 
```

在我的控制台中，我得到 2 个日志。第一个说“未定义”，第二个正确记录 jQuery。

所以这是奇怪的部分。如果我从我的 _shapes.jade 中注释掉脚本行，而是将其添加到 jQuery 导入行之后的 layout.jade 文件中，它会生成完全相同的 html 文件，但所有内容都以正确的顺序加载。

使用 chrome 开发人员工具，我可以在资源选项卡中看到加载顺序，即使 html 根本没有改变，加载顺序也会根据玉文件生成相同 html 的方式而改变。

难道我做错了什么？我对玉比较陌生，所以我很可能是。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:48:20.893

您应该在形状中使用“扩展布局”：

```
extends layout

block append scripts
   script(src='/javascripts/wire.js') 
```

# linux - 如何从正在运行的进程中捕获用户输入？

> ID：14085154
> 
> 赞同：0
> 
> 时间：2012-12-29T19:25:13.033
> 
> 标签：linux, bash

我正在运行下面的脚本部分：

```
gpg -c --cipher-algo AES256 key
File `key.gpg' exists. Overwrite? (y/N) n
Enter new filename: filekey 
```

如何从 gpg 进程中捕获用户的输入（即“filekey”），以便将其分配给脚本内的变量？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:38:02.360

在调用之前，`gpg`您可以检查文件是否存在并根据将新文件名读入变量然后调用`gpg`.

```
#!/bin/bash

infile=${1:-key}     # use argument as filename or `key` by default
filename="${infile}.gpg"

while [ -f "$filename" ] 
do
   echo -n "File $filename exists. Overwrite? (y/N)"
   read option
   case "$option" in
     y|Y )
       rm $filename
       ;;
     * )
       echo -n "Enter new filename:"
       read filename
       ;;
   esac
done

gpg -c --cipher-algo AES256 -o $filename $infile 
```

当文件存在时，这种方式`gpg`永远不会问问题。

# image - 带有背景图像和颜色的网格

> ID：14085164
> 
> 赞同：14
> 
> 时间：2012-12-29T19:26:58.447
> 
> 标签：image, xaml, colors, background, grid

是否可以在 xaml 中为整个网格同时提供背景图像和颜色？我没有缩放图像，所以有些区域没有颜色。是否可以用颜色为网格的其余部分着色？

这是我当前的代码：

```
<Grid>
            <Grid.Background>
                <ImageBrush Stretch="None" ImageSource="Images/background_top.png" AlignmentY="Top" AlignmentX="Center"/>
            </Grid.Background>

        <Grid.RowDefinitions>
            <RowDefinition Height="50*" />
            <RowDefinition Height="50*" />
        </Grid.RowDefinitions>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-29T19:43:55.520

我能想到的唯一方法是使用背景属性设置颜色，然后将图像添加到网格，确保跨越所有行和列。只要图像是网格中的第一个项目，其他项目就会分层。我相信它会给你你正在寻找的效果。

```
<Grid Background="Red">
    <Image Grid.RowSpan="2" Stretch="None" Source="Images/background_top.png" VerticalAlignment="Top" HorizontalAlignment="Center"/>
    <Label Content="Label" Grid.Row="0" Height="28" HorizontalAlignment="Center"  Margin="10,10,0,0" Name="label1" VerticalAlignment="Top" />
    <Grid.RowDefinitions>
        <RowDefinition Height="50*" />
        <RowDefinition Height="50*" />
    </Grid.RowDefinitions>
</Grid> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-30T01:56:48.613

在 WPF 中，如果您想使用 VisualBrush 定义具有 png 和颜色的画笔，您甚至可以执行此操作（此画笔 - 由于渲染画笔时性能受到影响，Windows 商店应用程序中不提供许多其他画笔）这里是一个基本的例子，画笔有很多你可以玩的属性：

```
 <Window.Resources>
    <VisualBrush x:Key="myBrush">
        <VisualBrush.Visual>
            <Grid>
                <Rectangle Fill="Red"/>
                <Image Source="troll.png"/>
            </Grid>
        </VisualBrush.Visual>
    </VisualBrush>
</Window.Resources>
<Grid Background="{StaticResource myBrush}"/> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-29T19:46:41.920

您可以尝试在网格周围使用将所需颜色设置为背景颜色的边框。

```
<Border Background="Red">
    <Grid>
        <Grid.Background>
            <ImageBrush Stretch="None" ImageSource="Images/background_top.png" AlignmentY="Top" AlignmentX="Center"/>
        </Grid.Background>

        <Grid.RowDefinitions>
            <RowDefinition Height="50*" />
            <RowDefinition Height="50*" />
        </Grid.RowDefinitions>
    </Grid>
</Border> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T19:33:57.093

你的意思是这样的：

```
<Grid Background="Red">
        <Grid.Background>
            <ImageBrush Stretch="None" ImageSource="Images/background_top.png" AlignmentY="Top" AlignmentX="Center"/>
        </Grid.Background>
    <Grid.RowDefinitions>
        <RowDefinition Height="50*" />
        <RowDefinition Height="50*" />
    </Grid.RowDefinitions>
</Grid> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-02T20:56:39.230

不完全是您问题的答案，但为了获得类似的视觉效果，您可以将网格的背景设置为图像；和你的页面/窗口的背景颜色。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-30T17:13:17.167

将一个网格放在另一个网格中。外部网格有一个 SolidColorBrush，内部网格有一个部分透明的 ImageBrush。

# php - 仅使用 apache、php 和 mysql 实现实时推送消息的最佳方法是什么？

> ID：14085167
> 
> 赞同：1
> 
> 时间：2012-12-29T19:27:46.240
> 
> 标签：php, mysql, apache

我正在尝试为 android 实现一个聊天应用程序（用户可以在其中与位于同一位置的人交流）。我认为它是一个面向地理特定的 facebook 信使。我遇到了诸如重复拉动、彗星、波什、websockects、套接字编程、xmpp（需要像openfire这样的xmpp服务器）等术语来做到这一点。但是我的资源是固定的，比如 apache、php (codeignter) 和 MySql。我需要找到有效的方法来做到这一点。伙计们，我需要这个。请帮我。

谢谢你，阿比亚

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T19:36:06.447

Android 上的首选方法是[**Google Cloud Messaging**](http://developer.android.com/google/gcm/index.html)。

> Google Cloud Messaging for Android (GCM) 是一项服务，可让您将数据从服务器发送到用户的 Android 设备。这可能是一条轻量级消息，告诉您的应用程序要从服务器获取新数据（例如，朋友上传的电影），也可能是一条包含高达 4kb 有效负载数据的消息（因此即时消息等应用程序可以直接消费消息）。
> 
> GCM 服务处理消息排队和传递到目标设备上运行的目标 Android 应用程序的所有方面。无论您的消息传递需求有多大，GCM 都是完全免费的，并且没有配额。

本质上，它的工作原理是这样的：**您的服务器与 Google 对话，Google 将消息实时**（或几乎如此，只要设备已打开电源并连接到 Internet）推送到 Android 设备。首次安装应用程序时（以及将来重新验证注册），Android 设备上会发生一个注册过程。**在您的 Android 应用程序中，您有责任将此注册 ID 发送到您的服务器，以便您可以存储它以备将来使用。**当您的服务器想要将消息推送到该设备时，它会使用此注册 ID。

**您的服务器和 Google 之间的通信协议是基于 HTTPS 的 JSON。**您的服务器可以使用任何语言/技术，只要它可以与 Google 的服务器通信。一个 PHP/MySQL 应用程序绝对可以满足服务的基本要求：

> 在编写使用 GCM 功能的客户端 Android 应用程序之前，您必须有一个满足以下条件的应用程序服务器：
> 
> *   能够与您的客户沟通。
> *   能够向 GCM 服务器发出 HTTPS 请求。
> *   能够使用指数回退处理请求并根据需要重新发送。
> *   能够存储 API 密钥和客户端注册 ID。

在客户端，**Android 设备必须运行 API 版本 8 (Android 2.2) 或更高版本**。当然，处理传入消息也是您的 Android 应用程序的责任（使用广播接收器，因为每当消息到达时，Android 系统都会向您的接收器发送一个 Intent），这允许您根据需要处理消息。

# excel - excel vba - 如何将数据透视表中的所有字段复制到同一张表中的其他单元格

> ID：14085172
> 
> 赞同：1
> 
> 时间：2012-12-29T19:28:04.110
> 
> 标签：excel, vba, pivot-table

我在 excel 中有一个带有组合框的用户表单，当我在组合框中选择某些内容时，它会自动更新某个工作表中的数据透视表。现在我想获取数据透视表中的所有字段并将它们复制到另一个库。我需要用 vb 编写它，但由于某种原因它不会复制单元格。那是我的代码：

```
Set x = ActiveSheet.PivotTables("PivotTable4.1").DataBodyRange.Cells
x.Copy
Application.Goto Reference:="pivot_paste"
x.Paste 
```

出于某种原因，除了最后一行之外，一切都很好，请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T19:34:07.077

`x.Paste`意味着将其复制到范围 x，这显然不是您想要的。像这样的东西应该工作：

```
Set x = ActiveSheet.PivotTables("PivotTable4.1").DataBodyRange.Cells
x.Copy Destination:=ActiveSheet.Range("pivot_paste") 
```

# vb.net - 具有公共 getter 和私有 setter 的自动属性

> ID：14085180
> 
> 赞同：11
> 
> 时间：2012-12-29T19:29:12.003
> 
> 标签：vb.net

**注意：**这不是 C# 属性简写的[VB.NET 等价物的](https://stackoverflow.com/questions/460027/vb-net-equivalent-of-c-sharp-property-shorthand)**副本吗？**. *这个*问题是关于如何对VB自动属性的getter和setter具有*不同的访问权限；*例如*public getter 和 private setter*。*这个*问题是关于自动属性的语法（并且没有提到这个问题）。

 **** * *

我正在尝试将自动属性（**公共**getter 和**私有**setter）从 C# 转换为 VB.NET。

但转换后 VB.NET 是维护一个私有字段。

C# 代码

```
class DemoViewModel
{
    DemoViewModel (){  AddCommand = new RelayCommand(); }

    public ICommand AddCommand {get;private set;}
} 
```

[来自代码转换器](http://converter.telerik.com/)的VB.NET 等效项是

```
Class DemoViewModel
Private Sub New()
    AddCommand = New RelayCommand()
End Sub

Public Property AddCommand() As ICommand
    Get
        Return m_AddCommand
    End Get
    Private Set
        m_AddCommand = Value
    End Set
End Property
Private m_AddCommand As ICommand
End Class 
```

VB.NET 代码生成私有支持字段。

是否有可能在源代码（如 c#）中摆脱这个后场？如何？

如果没有这个特性，VB.NET 源代码就会有很多这样的冗余。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-29T19:38:54.357

使用 VB.NET，如果要为 Get 和 Set 过程**指定不同的可访问性，则****不能使用自动实现的属性**，而必须使用标准或扩展的属性语法。

阅读 MSDN：[https ://docs.microsoft.com/en-us/dotnet/visual-basic/programming-guide/language-features/procedures/auto-implemented-properties](https://docs.microsoft.com/en-us/dotnet/visual-basic/programming-guide/language-features/procedures/auto-implemented-properties)

* * *

如果 getter 和 setter**具有相同的可访问性**，例如两者都是`Public`，那么您**可以使用自动属性语法**，例如：

```
Public Property Prop2 As String = "Empty" 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-12-05T09:10:38.420

在 VB.NET 中是

```
Public ReadOnly Property Value As String 
```

然后要访问私有设置器，请在属性名称前使用下划线

```
Me._Value = "Fred" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-06-28T09:00:41.920

由于上述答案成立，您可以引入公共道具来公开私人道具。这可能不是一个很好的解决方案，但与扩展的属性语法相比，代码仍然更少

```
Private Property internalprop as object
Public Readonly Property exposedprop as Object = internalprop 
```***

# cuda - CUDA 和不同全局函数之间的共享变量

> ID：14085187
> 
> 赞同：1
> 
> 时间：2012-12-29T19:30:08.057
> 
> 标签：cuda, global-variables

只是对CUDA的一些疑问。也许他们可能看起来很愚蠢的问题；我为此道歉。

如果我在 GPU 上声明一个变量（例如，具有*N*个元素的数组*alpha* ， ）并在全局函数中分配其值而不释放其内存，则该变量应该可用于其他连续的全局函数，对吗？*`cudaMalloc((void**)&alpha, N * sizeof(double))`*

 *此外，是否可以（或建议）在 GPU 上计算一个标量变量并使其在 GPU 上的多个全局函数之间共享，还是每次都将它作为来自 CPU 的参数传递更好？

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:06:54.807

是的，如果您将值写入分配的全局内存，这些值将一直存在，直到您释放该内存，即使跨内核调用也是如此。

至于访问标量变量（它们是常量），更好的方法是将其作为参数传递给全局内核启动，而不是将其放入全局内存并从那里读取。全局内存访问是昂贵的，这避免了每次需要读取全局内存时从全局内存中加载该标量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:09:32.353

如果我的问题是正确的，那么您正在分配一个数组，将数组填充到 GPU 上的全局内核函数中，然后在另一个内核调用中处理该数组的值。

只要您不释放分配的数组，它的值就会保留在全局内存中。因此，您可以这样做并处理相同的数组，而无需将其复制回 CPU。当您有执行时间限制或内核函数之一在库中时，在多个内核调用之间划分作业可能会很方便。但在大多数其他情况下，似乎最好在一个函数调用中完成所有工作。

将标量值作为参数传递似乎也更好，因为从全局内存中读取它的开销非常高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T20:15:12.057

> 如果我在 GPU 上声明一个变量（例如，具有 N 个元素的数组 alpha，cudaMalloc((void**)&alpha, N * sizeof(double))) 并在全局函数中分配它的值而不释放它的内存，这个变量应该可用于其他连续的全局功能，对吧？

您不能`cudaMalloc()`从全局函数（内核）调用。这是一个主机功能。您可以在内核中使用`malloc()`和`new`，但这可能效率低下。

您可以在多个内核中使用相同的数组，例如，您可以使用不同的内核执行多个计算步骤。

> 此外，是否可以（或建议）在 GPU 上计算一个标量变量并使其在 GPU 上的多个全局函数之间共享，还是每次都将它作为来自 CPU 的参数传递更好？

如果您将常量作为参数传递给内核，它会在所有线程之间非常有效地共享。因此，在 CPU 上计算参数并将它们传递给内核通常会更有效率。

如果在创建标量时需要进行大量并行计算，那么最好使用单独的内核进行计算，将其传递回主机，然后将其作为参数传递给下一个内核。替代方案只会增加代码的复杂性，而没有任何性能优势。

如果标量几乎不需要计算，那么用内核计算它是没有意义的。另外，请记住，无法保证在内核中启动块的顺序，因此您必须在内核中创建一个单独的代码路径来设置标量，然后进行昂贵的线程索引测试和同步来计算标量并使其可用于所有线程。*

# coq - 在匹配块的分支中，如何使用匹配表达式等于分支的数据构造函数表达式的断言？

> ID：14085189
> 
> 赞同：5
> 
> 时间：2012-12-29T19:30:54.950
> 
> 标签：coq

我正在尝试开发一种基于尽快防止错误输入的编程风格。例如，对于自然数的先行函数，而不是以下似是而非的定义：

```
Definition pred1 n :=
  match n with
    | O   => None
    | S n => Some n
  end. 
```

我想写如下：

```
Theorem nope n (p : n = O) (q : n <> O) : False.
  contradict q.
  exact p.
Qed.

Definition pred2 n (q : n <> O) :=
  match n with
    | S n => n
    | O   =>
      let p := _ in
      match nope n p q with end
  end. 
```

但我不知道用什么代替`_`。我的直觉告诉我，分支中一定有一些`assumption : n = O`可用的。`| O =>`Coq 是否确实引入了这样的假设？如果有，它的名字是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T21:24:20.257

Coq 不会自动引入这样的假设，但您可以使用完整的`match`构造形式明确地引入它：

```
Definition pred2 n (q : n <> O) :=
  match n as n' return n = n' -> nat with
    | S p => fun _ => p
    | O   => fun Heq => match q Heq with end
  end (eq_refl n). 
```

说明：

*   `return`引入带有整个`match ... end`表达式类型的类型注释；
*   `as`引入了一个可在此类型注释中使用的变量名，并将在每个分支中用左侧替换。这里，
    *   在第一个分支中，右侧有 type `n = S p -> nat`；
    *   在第二个分支中，右侧有 type `n = O -> nat`。因此，`q Heq`有类型`False`并且可以匹配。

[参考手册](http://coq.inria.fr/distrib/V8.4/refman/)中的更多信息，在[扩展模式匹配](http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual022.html)一​​章中。

# javascript - 在另一个更新面板上使用 __doPostBack 时停止更新面板更新

> ID：14085196
> 
> 赞同：2
> 
> 时间：2012-12-29T19:31:54.483
> 
> 标签：javascript, asp.net, updatepanel, dopostback

当我不想更新 .NET 更新面板时，我遇到了问题。

我正在使用 .NET Ajax 和 Twitter Bootstrap Javascript 的组合。我在一个页面上有两个更新面板（您会注意到两个面板都将 ChildrenAsTriggers 设置为 false 并将 UpdateMode 设置为条件，因此我不知所措！！）：

小组 1：

```
 <asp:UpdatePanel ID="upAreas" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false">
                <ContentTemplate>
                    <asp:Literal ID="litEmptyAreas" runat="server" Text="You currently have no goals or actions." Visible="false" />
                    <asp:Repeater ID="rptAreas" runat="server" 
                        OnItemDataBound="getAreaGoals" >
                        <ItemTemplate>
                                <div class="accordion-group" id="areagroup">
                                <div class="accordion-heading area-heading">
                                    <a class="accordion-toggle" data-toggle="collapse" href='#collapse-<%# Eval("area_id") %>' >
                                        <div class="areatitle">
                                        <asp:Literal ID="litAreaTitle" runat="server" Text='<%# Eval("area_title") %>' />
                                        <!-- <span class="areacreatedate"><asp:Literal ID="litAreaCreateDate" runat="server" Text='<%# "created " + String.Format("{0:dd MMMM yyyy}", Eval("area_createdate")) %>' /></span>-->
                                        </div>
                                    </a>
                                    <div class="areaicons">
                                        <a href="#" data-toggle="modal" data-target= "#myModal"><i class="icon-plus-sign icon-white areaiconplus"></i></a>
                                        <!--<a href="#" data-toggle="modal" data-target= "#myModal"><i class="icon-file icon-white areaiconlist"></i></a>-->
                                        <a href="#" data-toggle="modal" data-target= "#myModal"><i class="icon-eye-open icon-white areaiconeye"></i></a>
                                    </div>
                                </div>
                                <div id='collapse-<%# Eval("area_id") %>' class="accordion-body collapse">
                                    <div class="accordion-inner">
                                    <asp:Literal ID="litEmptyGoals" runat="server" Text="You currently have no goals or actions for this life area." Visible="true" />
                                    <asp:Repeater ID="rptGoals" runat="server"
                                        OnItemDataBound="setUpGoals" >
                                        <ItemTemplate>
                                            <div class="theGoals clearfix">      
                                                <span class="goalid"><%# Eval("goal_id") %></span>          
                                                <span class="goaltitle"><asp:Literal ID="theGoal" runat="server" Text='<%# Eval("goal_title") %>' /></span>
                                                <div class="goalicons">
                                                    <a href="#" data-toggle="modal" data-target= "#myModal"><i class="icon-plus-sign icon-white goal_iconplus"></i></a>
                                                    <a href="#" data-toggle="modal" data-target= "#myModal"><i class="icon-eye-open icon-white goal_iconeye"></i></a>
                                                </div>
                                                <span class="goalduedate"><asp:Literal ID="theDuedate" runat="server" Text='<%# "<span>Due:</span> " + String.Format("{0:dd MMM yy}", Eval("goal_duedate")) %>' Visible="true" /></span>
                                            </div>                                        
                                        </ItemTemplate>
                                    </asp:Repeater>
                                    </div>
                                </div>
                                </div>                    
                        </ItemTemplate>
                    </asp:Repeater>
                </ContentTemplate>
            </asp:UpdatePanel> 
```

这在 Page_Load 中填充，但可能需要稍后在用户添加新项目时进行更新。

当用户单击此更新面板中的 div 时，它应该更新页面上的第二个更新面板。（仅供参考，面板没有嵌套）

小组 2：

```
<asp:UpdatePanel ID="upActionlist" runat="server" UpdateMode="Conditional" OnLoad="getActions" ChildrenAsTriggers="false">
                <ContentTemplate>
                    <div class="listheading">
                        <div class="goaltitle">
                            <asp:Literal ID="litGoalTitle" runat="server" Text="Nationally Recognised Consultancy" />
                        </div>
                        <div class="goalicons">
                            <a href="#" data-toggle="modal" data-target= "#myModal"><i class="icon-plus-sign icon-white goaliconplus"></i></a>
                            <a href="#" data-toggle="modal" data-target= "#myModal"><i class="icon-eye-open icon-white goaliconeye"></i></a>
                        </div>
                    </div>
                    <div class="listinner">
                        <asp:Literal ID="litEmptyActions" runat="server" Text="You currently have no actions to view." Visible="true" />
                        <asp:Repeater ID="rptActions" runat="server" 
                            OnItemDataBound="setUpActions">
                            <ItemTemplate>
                                <div class="theActions clearfix">
                                    <div class="actiontitle">      
                                        <span class="actionid"><%# Eval("item_id") %></span>          
                                        <asp:Literal ID="theAction" runat="server" Text='<%# Eval("item_title") %>' />
                                    </div>
                                    <div class="actionicons">
                                        <!--<a href="#" data-toggle="modal" data-target= "#myModal"><i class="icon-th-list icon-white actioniconlist"></i></a>
                                        <a href="#" data-toggle="modal" data-target= "#myModal"><i class="icon-file icon-white actioniconnote"></i></a>-->
                                        <a href="#" data-toggle="modal" data-target= "#myModal"><i class="icon-eye-open icon-white actioniconeye"></i></a>
                                        <a href="#" data-toggle="modal" data-target= "#myModal"><i class="icon-check icon-white actioniconcomplete"></i></a>
                                    </div>
                                    <div class="actiondate">
                                        <span class="actionduedate"><asp:Literal ID="theActionduedate" runat="server" Text='<%# "<span>Due:</span> " + String.Format("{0:dd MMM yy}", Eval("item_duedate")) %>' Visible="true" /></span>
                                    </div>
                                </div>  
                            </ItemTemplate>
                        </asp:Repeater>
                    </div>
                </ContentTemplate>
            </asp:UpdatePanel> 
```

使用添加到 document.ready 的第一个更新面板中的 DIV 的以下 javascipt click 事件调用更新：

```
 $('.theGoals').click(function () {
            //remove from all goal other classes
            $('.theGoals').removeClass('active'); // "this" is the current element in the loop

            $(this).addClass('active');

            // Load content
            __doPostBack('<%=upActionlist.ClientID %>', $(this).children('.goaltitle').text() + "|" + $(this).children('.goalid').text());

        }); 
```

当它运行这个 javascript 时，它会更新两个面板，而不仅仅是第二个面板。感激地收到任何帮助，因为这让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:06:33.357

我通过在页面上放置一个 hidden`asp:button`并从客户端调用它的 click 方法来强制正确回发来解决这个问题：

**JS：**

```
$('#<%=bla.ClientID %>').click(); 
```

# java - java中mp3到wav的转换

> ID：14085199
> 
> 赞同：7
> 
> 时间：2012-12-29T19:32:16.603
> 
> 标签：java, audio, mp3, wav, javasound

我将 mp3 转换为 wav 的代码是：

```
package audio1;

import java.io.File;
import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;

public class NewClass {
    public static void main(String [] args){
        try{
            AudioFileFormat inputFileFormat = AudioSystem.getAudioFileFormat(new File("c:\\1.mp3"));
            AudioInputStream ais = AudioSystem.getAudioInputStream(new File("c:\\1.mp3"));

            AudioFormat audioFormat = ais.getFormat();

            System.out.println("File Format Type: "+inputFileFormat.getType());
            System.out.println("File Format String: "+inputFileFormat.toString());
            System.out.println("File lenght: "+inputFileFormat.getByteLength());
            System.out.println("Frame length: "+inputFileFormat.getFrameLength());
            System.out.println("Channels: "+audioFormat.getChannels());
            System.out.println("Encoding: "+audioFormat.getEncoding());
            System.out.println("Frame Rate: "+audioFormat.getFrameRate());
            System.out.println("Frame Size: "+audioFormat.getFrameSize());
            System.out.println("Sample Rate: "+audioFormat.getSampleRate());
            System.out.println("Sample size (bits): "+audioFormat.getSampleSizeInBits());
            System.out.println("Big endian: "+audioFormat.isBigEndian());
            System.out.println("Audio Format String: "+audioFormat.toString());

            AudioInputStream encodedASI = AudioSystem.getAudioInputStream(AudioFormat.Encoding.PCM_SIGNED, ais);

            try{
                int i = AudioSystem.write(encodedASI, AudioFileFormat.Type.WAVE, new File("c:\\converted.wav"));
                System.out.println("Bytes Written: "+i);
            }catch(Exception e){
                e.printStackTrace();
            }
        }catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

但我得到以下输出：

```
File Format Type: MP3
File Format String: MP3 (.mp3) file, byte length: 9631340, data format: MPEG1L3 48000.0 Hz, unknown bits per sample, stereo, unknown frame size, 41.666668 frames/second, , frame length: 10030
File lenght: 9631340
Frame length: 10030
Channels: 2
Encoding: MPEG1L3
Frame Rate: 41.666668
Frame Size: -1
Sample Rate: 48000.0
Sample size (bits): -1
Big endian: true
Audio Format String: MPEG1L3 48000.0 Hz, unknown bits per sample, stereo, unknown frame size, 41.666668 frames/second, 
java.lang.ArrayIndexOutOfBoundsException: 1
        at org.tritonus.sampled.convert.javalayer.MpegFormatConversionProvider$DecodedMpegAudioInputStream$DMAISObuffer.append(MpegFormatConversionProvider.java:386)
        at javazoom.jl.decoder.Obuffer.appendSamples(Unknown Source)
        at javazoom.jl.decoder.SynthesisFilter.compute_pcm_samples(Unknown Source)
        at javazoom.jl.decoder.SynthesisFilter.calculate_pcm_samples(Unknown Source)
        at javazoom.jl.decoder.LayerIIIDecoder.decode(Unknown Source)
        at javazoom.jl.decoder.LayerIIIDecoder.decodeFrame(Unknown Source)
        at javazoom.jl.decoder.Decoder.decodeFrame(Unknown Source)
        at org.tritonus.sampled.convert.javalayer.MpegFormatConversionProvider$DecodedMpegAudioInputStream.execute(MpegFormatConversionProvider.java:307)
        at org.tritonus.share.TCircularBuffer.read(TCircularBuffer.java:138)
        at org.tritonus.share.sampled.convert.TAsynchronousFilteredAudioInputStream.read(TAsynchronousFilteredAudioInputStream.java:194)
        at javax.sound.sampled.AudioInputStream.read(AudioInputStream.java:292)
        at com.sun.media.sound.PCMtoPCMCodec$PCMtoPCMCodecStream.read(PCMtoPCMCodec.java:506)
        at com.sun.media.sound.SunFileWriter$NoCloseInputStream.read(SunFileWriter.java:199)
        at java.io.SequenceInputStream.read(SequenceInputStream.java:208)
        at java.io.SequenceInputStream.read(SequenceInputStream.java:211)
        at java.io.InputStream.read(InputStream.java:101)
        at com.sun.media.sound.WaveFileWriter.writeWaveFile(WaveFileWriter.java:247)
        at com.sun.media.sound.WaveFileWriter.write(WaveFileWriter.java:145)
        at javax.sound.sampled.AudioSystem.write(AudioSystem.java:1354)
        at audio1.NewClass.main(NewClass.java:33) 
```

谁能帮助我我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T18:31:38.400

```
public static byte [] getAudioDataBytes(byte [] sourceBytes, AudioFormat audioFormat) throws UnsupportedAudioFileException, IllegalArgumentException, Exception{
        if(sourceBytes == null || sourceBytes.length == 0 || audioFormat == null){
            throw new IllegalArgumentException("Illegal Argument passed to this method");
        }

        ByteArrayInputStream bais = null;
        ByteArrayOutputStream baos = null;
        AudioInputStream sourceAIS = null;
        AudioInputStream convert1AIS = null;
        AudioInputStream convert2AIS = null;

        try{
            bais = new ByteArrayInputStream(sourceBytes);
            sourceAIS = AudioSystem.getAudioInputStream(bais);
            AudioFormat sourceFormat = sourceAIS.getFormat();
            AudioFormat convertFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, sourceFormat.getSampleRate(), 16, sourceFormat.getChannels(), sourceFormat.getChannels()*2, sourceFormat.getSampleRate(), false);
            convert1AIS = AudioSystem.getAudioInputStream(convertFormat, sourceAIS);
            convert2AIS = AudioSystem.getAudioInputStream(audioFormat, convert1AIS);

            baos = new ByteArrayOutputStream();

            byte [] buffer = new byte[8192];
            while(true){
                int readCount = convert2AIS.read(buffer, 0, buffer.length);
                if(readCount == -1){
                    break;
                }
                baos.write(buffer, 0, readCount);
            }
            return baos.toByteArray();
        } catch(UnsupportedAudioFileException uafe){
            //uafe.printStackTrace();
            throw uafe;
        } catch(IOException ioe){
            //ioe.printStackTrace();
            throw ioe;
        } catch(IllegalArgumentException iae){
            //iae.printStackTrace();
            throw iae;
        } catch (Exception e) {
            //e.printStackTrace();
            throw e;
        }finally{
            if(baos != null){
                try{
                    baos.close();
                }catch(Exception e){
                }
            }
            if(convert2AIS != null){
                try{
                    convert2AIS.close();
                }catch(Exception e){
                }
            }
            if(convert1AIS != null){
                try{
                    convert1AIS.close();
                }catch(Exception e){
                }
            }
            if(sourceAIS != null){
                try{
                    sourceAIS.close();
                }catch(Exception e){
                }
            }
            if(bais != null){
                try{
                    bais.close();
                }catch(Exception e){
                }
            }
        }
    } 
```

这里 sourceBytes 代表 MP3 文件或 WAV 文件。audioFormat 是您要转换的 PCM 格式。我们还需要将来自 javazoom.com 的 mp3spi.jar、tritonus_mp3.jar、jl*.jar、tritonus_share.jar 放在类路径中。希望这可能对其他人有所帮助。

Java 7 版本：

```
public static byte [] getAudioDataBytes(byte [] sourceBytes, AudioFormat audioFormat) throws UnsupportedAudioFileException, IllegalArgumentException, Exception {
    if(sourceBytes == null || sourceBytes.length == 0 || audioFormat == null){
        throw new IllegalArgumentException("Illegal Argument passed to this method");
    }

    try (final ByteArrayInputStream bais = new ByteArrayInputStream(sourceBytes);
         final AudioInputStream sourceAIS = AudioSystem.getAudioInputStream(bais)) {
        AudioFormat sourceFormat = sourceAIS.getFormat();
        AudioFormat convertFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, sourceFormat.getSampleRate(), 16, sourceFormat.getChannels(), sourceFormat.getChannels()*2, sourceFormat.getSampleRate(), false);
        try (final AudioInputStream convert1AIS = AudioSystem.getAudioInputStream(convertFormat, sourceAIS);
             final AudioInputStream convert2AIS = AudioSystem.getAudioInputStream(audioFormat, convert1AIS);
             final ByteArrayOutputStream baos = new ByteArrayOutputStream()) {
            byte [] buffer = new byte[8192];
            while(true){
                int readCount = convert2AIS.read(buffer, 0, buffer.length);
                if(readCount == -1){
                    break;
                }
                baos.write(buffer, 0, readCount);
            }
            return baos.toByteArray();
        }
    }
} 
```

马文：

```
<dependency>
    <groupId>com.googlecode.soundlibs</groupId>
    <artifactId>mp3spi</artifactId>
    <version>1.9.5-1</version>
</dependency>
<dependency>
    <groupId>com.googlecode.soundlibs</groupId>
    <artifactId>jlayer</artifactId>
    <version>1.0.1-1</version>
    <exclusions>
        <exclusion>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-02T10:51:50.410

“迟到者”注意事项：Java 不再支持 MP3 文件，至少截至目前（2022 年 3 月）。（出于知识产权原因等）

# c# - 如何根据从组合框中选择的月份和年份在数据库中搜索？

> ID：14085203
> 
> 赞同：0
> 
> 时间：2012-12-29T19:32:27.017
> 
> 标签：c#, sql, sql-server-2008

我有一个应用程序，我将一些信息注册到我有一个列（日期时间）的数据库中。在此列中，我从 DateTimePicker 插入日期。

现在我想创建一个搜索按钮，根据从组合框中选择的日期进行搜索...但是在这个组合框中我只留下了一个选项，选择 MONTH 和 YEAR...我如何进行 SELECT 查询来选择所有信息到从组合框中选择的月份和年份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:56:47.240

所有使用`datepart`or`month`和`year`函数的解决方案都使服务器无法使用索引来优化查询。

`between`就性能而言，唯一有效的解决方案是使用该子句的@Sparkys 第二种方法。他还描述了时间分数带来的问题。这就是为什么我更喜欢使用普通`date`列（而不是`datetime`）。然后你可以写

```
select * 
from YourTable 
where DateColumn between <FirstDayOfSelectedMonthAndYear> 
                     and <LastDayOfSelectedMonthAndYear> 
```

因为当使用日期时间列和范围时

```
between '20121201' and '20121231 23:59:59' 
```

在一年的最后一秒和午夜之后的所有内容仍然会被丢弃。尽管这不太可能在技术上是不正确的。

@Nicarus 建议将结束时间扩大到 23:59:59,997'。这似乎有效，但“丑陋”（但是，wtf，它有效！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T19:41:00.867

```
select * from <table>
where month(searchDate)=Month_from_box and Year(searchDate)=Year_from_box 
```

但是，根据数据的大小，这可能不是最快的方法。如果您的数据在 100 甚至 1000 行中，则这种方法可能没问题...

另一种方法是根据您的输入在 C# 中构建开始和结束日期，然后执行范围搜索

```
select * from <table>
where searchDate between Start_date_from_C# and End_Date_from_C# 
```

如果您采用这种方法，请务必考虑时间部分，在第一个日期将其设为 0，在结束日期将其设为 23:59:59

如果您在日期字段上有索引，则第二种方法会更快......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T20:06:10.270

确保将组合值存储到 C# 中的整数变量中，然后再将它们放入 SQL 查询中。正如其他人所暗示的那样，如果您允许将直接用户输入放置在 SQL 字符串中，则 SQL 注入攻击是可能的。

假设您有 2 个 int 变量“intMonth”、“intYear”和“dateFieldname”的字段名称，下面的 SQL 应该可以工作。

```
SELECT  *
FROM    [table]
WHERE   datepart[mm,dateFieldname] = intMonth
    AND datepart[yyy,dateFieldname] = intYear 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T19:46:02.107

像这样的东西

`Select * from tablename where datepart(mm,datecolumnname)=@cmboxMonthvalue nd datepart(yyyy,datecolumnname)=@ComboboxYearvalue`

# java - 容易循环不工作

> ID：14085204
> 
> 赞同：0
> 
> 时间：2012-12-29T19:32:32.830
> 
> 标签：java, for-loop, while-loop, do-while

所以我试图让（EX）输入一些值：1 -2 -3 2 5 num of positive num is 5 num of neg num is -3 total is 3 avg is .6 我想让它像这样但是当我运行它，它不起作用是什么部分错误？？？

```
import java.util.*;

public class Welcome {

public static void main(String [] args){

    Scanner input = new Scanner(System.in);
System.out.print("Enter an int value, the program exits if the input is 0: ");
    int num = input.nextInt();
    int countpos = 0;
    int countneg = 0;
    int totalnum = 0;
    int total = 0;
    double avg = 0.0;

    while(num != 0){

        if(num < 0)
            countpos++;
        else
            countneg++;

        total = total + num;
        totalnum++;
    }

    System.out.print("num of pos is: " + countpos);
    System.out.print("num of neg is: " + countneg);
    System.out.print("total is: " + total);
    System.out.print("the avg is: " + total / totalnum );

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:33:31.247

你也必须`num = input.nextInt();`在循环中做

```
 while(num != 0){

        if(num < 0)
            countpos++;
        else
            countneg++;

        total = total + num;
        totalnum++;

        num = input.nextInt();
    } 
```

# ruby-on-rails - 使用设计变量写入模型

> ID：14085206
> 
> 赞同：0
> 
> 时间：2012-12-29T19:32:40.133
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我有模型，当我写入它时，我使用的是标准`Model.create!(params[:somesymbol])` 但是在我的表单中，我有隐藏字段`current_user.id` `current_user`及其来自设计的变量，它返回已记录的用户。所以当我创建新记录时，我相信用户，他没有改变隐藏字段中的值。有没有办法避免这种情况，并以某种方式写入模型 `Model.create!(params[:somesymbol], user_id: current_user.id)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:43:21.667

您可以使用 ：

```
Model.create!(params[:somesymbol].merge(user_id: current_user.id)) 
```

`user_id`in将`params`被覆盖`current_user.id`（参见[doc](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-merge)）

# objective-c - FBRequest 获取相册的照片

> ID：14085207
> 
> 赞同：3
> 
> 时间：2012-12-29T19:32:44.890
> 
> 标签：objective-c, facebook-graph-api

我正在尝试从 Facebook 页面获取特定专辑的封面照片。

```
for(NSDictionary *album in albums)
         {
             [albumNames addObject:[album objectForKey:@"name"]];
             NSLog(@"%@\n", [album objectForKey:@"id"]);
             [[FBRequest requestWithGraphPath:[NSString stringWithFormat:@"%@/photos", [album objectForKey:@"id"]] parameters:nil HTTPMethod:nil]
              startWithCompletionHandler:
              ^(FBRequestConnection *connection,
                FBGraphObject *albumPhoto,
                NSError *error) {
                  if(!error) {
                      [albumCoverPhotos addObject:[UIImage imageWithData:[[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[[albumPhoto objectForKey:@"data"] objectForKey:@"picture"]]]]];
                  }
              }];
         } 
```

但它从不执行该行`if(!error)`，因此`albumCoverPhotos`在这段代码的末尾是空的。

我的目标是将页面的所有专辑的所有封面图片放入数组中`albumCoverPhotos`。

# java - glBufferSubData 导致缓冲区用零填充

> ID：14085209
> 
> 赞同：2
> 
> 时间：2012-12-29T19:33:12.843
> 
> 标签：java, opengl, lwjgl

我正在制作一个使用 lwjgl 动态呈现文本的系统。我有一个系统设置为自动生成用于渲染的纹理，并且图像确实有效。这就是问题所在。
我有这段代码来初始化 2 个 VBO 和一个 VAO，两者都设置为能够处理 1024 个文本字符的数据。

```
vbo = GL15.glGenBuffers(); //Main VBO to hold data
vao = GL30.glGenVertexArrays();

GL30.glBindVertexArray(vao);
GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, vbo);
GL15.glBufferData(vbo, dataBuffer, GL15.GL_DYNAMIC_DRAW);
GL20.glVertexAttribPointer(0, 3, GL11.GL_FLOAT, false, 36, 0); //Position
GL20.glVertexAttribPointer(1, 4, GL11.GL_FLOAT, false, 36, 12); //Color
GL20.glVertexAttribPointer(3, 2, GL11.GL_FLOAT, false, 36, 28); //Texture Coordinates
GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, 0);
GL30.glBindVertexArray(0);

indvbo = GL15.glGenBuffers(); //VBO to hold indices
GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, indvbo);
GL15.glBufferData(GL15.GL_ELEMENT_ARRAY_BUFFER, indices, GL15.GL_DYNAMIC_DRAW);
GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, 0); 
```

我尝试使用此代码更新 vbo 中的数据

```
GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, vbo);
dataBuffer.clear();
for(Vertex vert : vertices) { //Vertex is a custom class to hold vertex data.
    dataBuffer.put(new float[] { //Put position, color, and texture coordinates in buffer
        vert.x,
        vert.y,
        vert.z,
        vert.r,
        vert.g,
        vert.b,
        vert.a,
        vert.u,
        vert.v
    });
}
dataBuffer.flip();
GL15.glBufferSubData(GL15.GL_ARRAY_BUFFER, 0, dataBuffer);
GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, 0);

GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, indvbo);
indices.clear();
indices.put(indArray.getIndices());
indices.flip();
GL15.glBufferSubData(GL15.GL_ELEMENT_ARRAY_BUFFER, 0, indices);
GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, 0); 
```

但它什么都没有出现在屏幕上。如果我使用 glGetBufferSubData 从任一 vbo 检索数据，我会得到一个填充为零的缓冲区。但是，如果我改变

```
GL15.glBufferSubData(GL15.GL_ARRAY_BUFFER, 0, dataBuffer); 
```

成为

```
GL15.glBufferData(GL15.GL_ARRAY_BUFFER, dataBuffer, GL15.GL_DYNAMIC_DRAW); 
```

我改变

```
GL15.glBufferSubData(GL15.GL_ELEMENT_ARRAY_BUFFER, 0, indices); 
```

成为

```
GL15.glBufferData(GL15.GL_ELEMENT_ARRAY_BUFFER, indices, GL15.GL_DYNAMIC_DRAW); 
```

一切都会出现在屏幕上，glGetBufferSubData 将返回我最初输入的内容。我不想使用 glBufferData，因为我每帧都这样做，我不想每帧重新分配内存。我在做什么导致 glBufferSubData 不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:47:08.570

```
GL15.glBufferData(vbo, dataBuffer, GL15.GL_DYNAMIC_DRAW); 
```

首先，您不要将*缓冲区对象*作为第一个参数传递；您将缓冲区对象绑定到的目标传递给。你把它绑定到`GL15.GL_ARRAY_BUFFER`，所以你通过了。

其次，如果`dataBuffer`此时为空，这`glBufferData`将有效地具有 0`glBufferSubData`的大小。不能重新分配缓冲区的大小。我建议使用正确[`glBufferData`](http://www.lwjgl.org/javadoc/)分配特定大小的缓冲区存储，而不是通过`dataBuffer`.

并确保您以后的`glBufferSubData`调用不会尝试在该存储之外设置内存。所以分配一堆内存。

最后，如果您对此很认真，请研究一些[缓冲区对象流技术。](http://www.opengl.org/wiki/Buffer_Object_Streaming)

# java - LibGDX FrameBuffer 缩放

> ID：14085212
> 
> 赞同：5
> 
> 时间：2012-12-29T19:33:47.540
> 
> 标签：java, textures, libgdx, scaling, framebuffer

我正在使用 LibGDX 框架开发一个绘画应用程序，并且我正在使用他们的 FrameBuffer 类将用户绘制的内容合并到一个实体纹理上，这就是他们所看到的他们的绘图。这方面工作得很好，但是，用户可以绘制的区域并不总是相同的大小，而且我很难让它在整个窗口以外的分辨率上正确显示。

我已经对此进行了非常广泛的测试，似乎正在发生的事情是 FrameBuffer 正在以与窗口本身相同的分辨率创建纹理，然后简单地拉伸或收缩它以适应它应该位于的实际区域，即对于任何大于或小于窗口的绘图，都会产生非常不愉快的效果。

我已经验证，在我的过程的每一步，我从来没有做任何这样的伸展自己，并且所有的东西都是以正确的尺寸和位置绘制的。我还研究了 FrameBuffer 类本身以尝试找到答案，但奇怪的是在那里也没有发现任何东西，但是，鉴于我所做的所有测试，它似乎是这个问题唯一可能出现的地方以某种方式创建。

我完全没有想法，花了相当多的时间试图解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T00:19:53.180

非常感谢 Synthetik 找到了核心问题。这是解决您逃避的这种情况的正确方法。（我认为！）

无论实际设备窗口大小如何，使帧缓冲区产生正确比率和缩放纹理的方法是将投影矩阵设置为所需的大小，如下所示：

```
SpriteBatch batch = new SpriteBatch();
Matrix4 matrix = new Matrix4();
matrix.setToOrtho2D(0, 0, 480,800); // here is the actual size you want
batch.setProjectionMatrix(matrix); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T04:43:21.490

我相信我已经解决了我的问题，我将简要概述问题所在。

基本上，这个问题的原因在于 SpriteBatch 类。具体来说，假设我没有使用该类的过时版本，问题出在第 181 行，其中设置了投影矩阵。该行：

```
 projectionMatrix.setToOrtho2D(0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight()); 
```

这导致所有被绘制到的东西，本质上，都是按照窗口/屏幕的比例绘制的，然后被拉伸以适应它需要的位置。我不确定是否有更“正确”的方法来处理这个问题，但我只是在 SpriteBatch 类中创建了另一个方法，它允许我用自己的尺寸再次调用这个方法，并在必要时调用它。请注意，并非每次抽奖或类似的事情都需要它，只有一次或任何时候尺寸可能会改变。

# java - Java仅在需要时将字符串转换为数字，浮点数？

> ID：14085229
> 
> 赞同：1
> 
> 时间：2012-12-29T19:36:26.973
> 
> 标签：java

我想在 Java 中将字符串转换为数字。我已经尝试过两种方法，但都对整数不好，添加了一个不需要的浮点：“1”> 1.0（当我想要“1”> 1 和“1.5”> 1.5 时）。我发现了更多将字符串转换为数字的方法，但它们要么不起作用，要么行数很多，我不敢相信它来自我只需要 parseFloat() 的 javascript 如此复杂。

这就是我现在正在尝试的：

```
String numString = "1".trim().replaceAll(",","");
float num = (Float.valueOf(numString)).floatValue(); // First try
Double num2 = Double.parseDouble(numString); // Second try
System.out.println(num + " - " + num2); // returns 1.0 - 1.0 
```

我怎样才能只在需要时使用浮点数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T19:42:29.077

要根据需要格式化浮点数，请使用[DecimalFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)：

```
DecimalFormat df = new DecimalFormat("#.###");
System.out.println(df.format(1.0f)); // prints 1
System.out.println(df.format(1.5f)); // prints 1.5 
```

在你的情况下，你可以使用

```
System.out.println(df.format(num) + " - " + df.format(num2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T19:43:21.783

我想你要找的是`DecimalFormat`

```
DecimalFormat format = new DecimalFormat("#.##");
double doubleFromTextField = Double.parseDouble(myField.getText());
System.out.println(format.format(doubleFromTextField)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T19:45:44.850

问题在于您的问题实际上是一种类型安全的语言，我认为您正在混合转换和字符串表示。在 Java 或 C# 或 C++ 中，您转换为某些可预测/预期的类型，看起来就像您期望在 JavaScript 中习惯的“变体”行为。

您可以使用类型安全的语言执行以下操作：

```
public static Object convert(String val)
{
  // try to convert to int and if u could then return Integer
  ELSE
  //try to convert to float and if you could then return it
  ELSE
  //try to convert to double
  etc...
} 
```

当然，这是非常低效的，就像 JavaScript 与 C++ 或 Java 相比一样。变体/多态性（使用对象）是有代价的

然后你可以做 toString() 将整数格式化为整数，浮点数为浮点数，双倍多态。但是您的问题充其量是模棱两可的，这使我相信存在概念问题。

# java - 使用源代码创建和运行 jar 文件

> ID：14085231
> 
> 赞同：0
> 
> 时间：2012-12-29T19:36:33.977
> 
> 标签：java, jar, netbeans-7

我编写了一个非常简单的 java 程序，其中包含两个类：`Business`和`Main`.

我想创建一个罐子，这样如果我将它通过电子邮件发送给某人，他们可以：

*   运行程序（即运行jar）
*   打开jar查看源代码。
*   代码可以在mac或windows上运行

我已经使用 IDE 很长时间了，我忘记了如何做到这一点。

我正在使用 netbeans 7.x

编辑：

我在 Netbeans 上找到了以下方法：

```
properties > packaging > exclude from jar file :: delete **/*.java 
```

但是当我尝试使用

```
java -jar mybusiness.jar 
```

它说

```
no main manifest attribute, in mybusiness.jar 
```

但请注意，我的 jar 有一个主类。我是否缺少清单文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:50:08.963

您可以使用 Netbeans 导出包含源代码的 JAR 文件：

1.  右键单击项目并选择属性
2.  构建 -> 打包
3.  从排除的文件中删除 Java 文件。并在编译后选择build jar

如果编译成功，它将创建包含源代码的 jar 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T19:39:04.730

那么肯定一个IDE也可以做到这一点？只需制作一些文本文件并将源代码放入其中并将它们拖到 ide 中即可。它是java，所以它应该在所有平台上自动运行。我不确定这里有什么问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:00:17.727

此[链接](http://www.skylit.com/javamethods/faqs/createjar.html)说明了如何创建清单文件以及如何在清单文件中指定主类作为执行 jar 所必需的。

# java - 错误的解释器：没有这样的文件或目录，与类路径有关吗？

> ID：14085232
> 
> 赞同：0
> 
> 时间：2012-12-29T19:36:37.570
> 
> 标签：java, bash, shell

我[下载](ftp://ftp.cis.upenn.edu/pub/adwait/jmx/jmx.tar.gz)了 MxTerminator 并按照[这些说明](http://web.mit.edu/course/6/6.863/tools/jmx/MXTERMINATOR.html)进行操作。我将它解压缩到一个名为 jmx 的目录中。然后我做了第 1 步，编辑您的 CLASSPATH 变量以包含文件 mxpost.jar。所以我使用了这个命令：

`export CLASSPATH=/usr/home/daniel/jmx/mxpost.jar` 然后我做了第2步：

`mxterminator jmx< engcorpus.txt`

但它说：

`bash: ./mxpost: /bin/ksh: bad interpreter: No such file or directory`

我认为我的类路径有问题？

我正在使用 Linux Mint 14（与 Ubuntu 相同）

但是文件存在！我尝试了其他答案，但它们对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:39:07.607

不，与您的类路径无关。`mxpost`是一个`ksh`脚本，看起来你还没有`ksh`安装。

# mysql - MySQL INNER JOIN 查找行组的最大值

> ID：14085238
> 
> 赞同：1
> 
> 时间：2012-12-29T19:37:50.937
> 
> 标签：mysql, inner-join, max

我已经放了一个我在这里尝试做的样本

[http://sqlfiddle.com/#!2/514d2/2](http://sqlfiddle.com/#!2/514d2/2)

此演示查找“bids”表中不是每个listing_id 最高出价的所有行。我需要做的是找到所有列表，其中 $userid（在本例中为用户 1）是最高出价者。

有人可以帮我解决这个问题吗？

对于那些不使用 SQLFiddle...

*   表名：列表
*   表名：出价

SQL：

```
SELECT listings.end_date, 
    listings.user_id, 
    listings.title, 
    listings.auc_fp, 
    listings.id, 
    listings.auc_image1 
FROM listings 
INNER JOIN 
    (SELECT 
     listing_id, 
     user_id, 
     bid maxBid 
 FROM bids 
 WHERE bid 
 NOT IN 
     (SELECT MAX(bid) 
      FROM bids) 
      GROUP BY 
         listing_id, 
         user_id) 
    bids ON 
      listings.id = bids.listing_id 
  WHERE bids.user_id=1 
  AND listings.end_date > NOW() 
  ORDER BY listings.list_ts DESC 
```

此查询成功找到 $userid 已出价但不是最高出价者的所有列表。我想找到 $userid 出价并且是最高出价者的所有列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:04:49.263

## 初步观察

原始查询可以重新格式化，以便于阅读，如下所示：

```
SELECT listings.end_date, 
       listings.user_id, 
       listings.title, 
       listings.auc_fp, 
       listings.id, 
       listings.auc_image1 
  FROM listings 
  JOIN (SELECT listing_id, 
               user_id, 
               bid maxBid 
          FROM bids 
         WHERE bid NOT IN (SELECT MAX(bid) FROM bids) 
         GROUP BY listing_id, user_id
       ) AS bids
    ON listings.id = bids.listing_id 
 WHERE bids.user_id = 1 
   AND listings.end_date > NOW() 
 ORDER BY listings.list_ts DESC 
```

我注意到别名列`maxBid`不一定是任何列表的最高出价。此查询也仅适用于仍处于打开状态的列表。我不相信它会产生预期的答案。唯一排除的出价是包含任何列表的总体最高出价的出价。

* * *

## TDQD — 测试驱动的查询设计

真正的问题是：

> 查找 $userid (= 1) 已出价且出价最高者的所有当前打开的*列表*。

是时候做TDQD了——测试驱动的查询设计；我的大脑工作速度不够快，无法一次完成所有工作。

### 每个列表的最高出价

```
SELECT listing_id, MAX(bid) AS maxBid
  FROM bids
 GROUP BY listing_id 
```

### 查找出价最高的用户是用户 1 的列表的出价

```
SELECT b.listing_id
  FROM bids AS b
  JOIN (SELECT listing_id, MAX(bid) AS maxBid
          FROM bids
         GROUP BY listing_id
       ) AS m
    ON m.listing_id = b.listing_id AND m.maxBid = b.bid
 WHERE b.user_id = 1 
```

### 查找出价最高的用户是用户 1 的列表

```
SELECT l.*
  FROM listings AS l
  JOIN (SELECT b.listing_id
          FROM bids AS b
          JOIN (SELECT listing_id, MAX(bid) AS maxBid
                  FROM bids
                 GROUP BY listing_id
               ) AS m
            ON m.listing_id = b.listing_id AND m.maxBid = b.bid
         WHERE b.user_id = 1
       ) AS u
    ON l.id = u.listing_id 
```

### 限制查询以打开列表

```
SELECT l.*
  FROM listings AS l
  JOIN (SELECT b.listing_id
          FROM bids AS b
          JOIN (SELECT listing_id, MAX(bid) AS maxBid
                  FROM bids
                 GROUP BY listing_id
               ) AS m
            ON m.listing_id = b.listing_id AND m.maxBid = b.bid
         WHERE b.user_id = 1
       ) AS u
    ON l.id = u.listing_id
 WHERE l.end_date > NOW() 
```

您可以并且应该将 替换为`*`您感兴趣的确切列。如果您需要出价详细信息，您也可以获取这些信息。

* * *

### 针对 Informix 进行测试

需要进行细微的语法更改——NOW() 被 CURRENT YEAR TO SECOND 替换——但这只会影响最后一个查询。在 DDL 上需要做更多的工作才能将语法转换为更接近 DBMS 中立的格式。MySQL 有一些奇怪的约定。

未来读者请注意：将`NOW()`or替换为`CURRENT YEAR TO SECOND`诸如`2012-12-29 12:37:43`获得相同结果的值。数据中的列表从 2013-01-10 00:00:001 开始过期。

查询一：

```
SELECT listing_id, MAX(bid) AS maxBid
  FROM bids
 GROUP BY listing_id; 
```

输出 1：

```
listing_id  maxbid
34          95.37
40          103.00
38          507.00
41          94.00
48          76.00
6469        22.00
6472        5.00
37          511.00
31          100.00 
```

查询 2：

```
SELECT b.listing_id
  FROM bids AS b
  JOIN (SELECT listing_id, MAX(bid) AS maxBid
          FROM bids
         GROUP BY listing_id
       ) AS m
    ON m.listing_id = b.listing_id AND m.maxBid = b.bid
 WHERE b.user_id = 1; 
```

输出 2：

```
listing_id
34
37
48
6469
6472 
```

查询 3：

```
SELECT l.end_date, l.user_id, l.title, l.id
  FROM listings AS l
  JOIN (SELECT b.listing_id
          FROM bids AS b
          JOIN (SELECT listing_id, MAX(bid) AS maxBid
                  FROM bids
                 GROUP BY listing_id
               ) AS m
            ON m.listing_id = b.listing_id AND m.maxBid = b.bid
         WHERE b.user_id = 1
       ) AS u
    ON l.id = u.listing_id; 
```

输出 3：end_date user_id title id 2013-01-09 08:11:16 1 圣诞树 6469 2013-01-11 09:17:31 3 另一个测试项目 6472

查询 4

```
SELECT l.end_date, l.user_id, l.title, l.id
  FROM listings AS l
  JOIN (SELECT b.listing_id
          FROM bids AS b
          JOIN (SELECT listing_id, MAX(bid) AS maxBid
                  FROM bids
                 GROUP BY listing_id
               ) AS m
            ON m.listing_id = b.listing_id AND m.maxBid = b.bid
         WHERE b.user_id = 1
       ) AS u
    ON l.id = u.listing_id
 WHERE l.end_date > CURRENT YEAR TO SECOND; 
```

输出 4：

```
end_date                user_id     title                   id
2013-01-09 08:11:16     1           Christmas Tree          6469
2013-01-11 09:17:31     3           Another test item       6472 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T19:55:04.550

这应该使用左连接来满足您的需求，以确保每种产品都没有更好的出价；

```
SELECT DISTINCT listings.end_date, listings.user_id, listings.title, 
       listings.auc_fp, listings.id, listings.auc_image1
FROM listings 
JOIN bids b1 
  ON b1.listing_id=listings.id 
LEFT JOIN bids b2 
  ON b2.listing_id=listings.id AND b1.bid < b2.bid
WHERE b1.user_id = 1
  AND b2.bid IS NULL
  AND listings.end_date > NOW() 
```

[一个基于原始的 SQLfiddle 来测试](http://sqlfiddle.com/#!2/59452/4)。

# android - 为 xml 设置一个值

> ID：14085242
> 
> 赞同：0
> 
> 时间：2012-12-29T19:38:32.593
> 
> 标签：android

使用 sharedpreferences 我保存了一个值。我需要将此值（持续时间）设置为 xml 文件。我如何解决？

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
   android:interpolator="@android:anim/accelerate_interpolator"
   android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="1500" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:55:53.627

在您的动画代码上使用：

```
Animation alphaAnim = AnimationUtils.loadAnimation(this, R.anim.animate);
YOURVIEW.startAnimation( alphaAnim ); 
alphaAnim.setDuration(VALUE); 
```

# qt - 选项卡未添加到 QTabWidget

> ID：14085250
> 
> 赞同：0
> 
> 时间：2012-12-29T19:39:12.210
> 
> 标签：qt, qtabwidget

这很奇怪。使用此代码，我正在尝试向 QTabWidget 添加一个选项卡：

```
void SideWidget::changePanel(SearchablePanel* panel){
    ui->nextButton->setEnabled(false);
    cout << pointer;
    widgetHistory[++pointer] = panel;
    QWidget* widget = panel->getWidget();
    cout << panel->id;
    MainWindow::main->addTab(widget, "nT");
    QTextEdit* thing = new QTextEdit("Test");

    MainWindow::main->addTab(thing, "tabqx");
    this->internalChange(panel);
} 
```

和内部变化：

```
void SideWidget::internalChange(SearchablePanel *panel){
    cout << "internale change, "+panel->id;
    ui->scrollPanel->setWidget(panel->getWidget());
    ui->prevButton->setEnabled(true);
} 
```

现在，当我添加选项卡“tabqx”时，它可以工作，并且当我将滚动面板的小部件设置为`panel->getWidget()`它时，它可以工作。但是，当我尝试添加选项卡“nT”时，它不起作用。我很迷茫。我应该注意到`panel->getWidget()`返回 a `QWidget`，正如预期的那样。具体来说，在这种情况下，它将返回一个`QTextEdit`. 另外，`MainWindow::main`是静态的`QTabWidget`。

所以我的问题是，为什么没有添加标签“nT”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:22:43.947

基本上你的代码是这样做的：

```
MainWindow::main->addTab(panel->getWidget(), "nT"); 
ui->scrollPanel->setWidget(panel->getWidget()); 
```

而且由于一个小部件一次只能在一个地方，一旦你将它添加到滚动面板，它就会从`QTabWidget`你刚刚放置的地方删除。

However you could create a new `QTextEdit` that would share the same underlying `QTextDocument` by using [QTextEdit::document()/setDocument()](http://qt-project.org/doc/qt-4.8/qtextedit.html#document).

# javascript - 我使用 javascript 设置字段值，未触发 onchange。替代解决方案？

> ID：14085251
> 
> 赞同：1
> 
> 时间：2012-12-29T19:39:21.633
> 
> 标签：javascript, jquery, forms, onupdate

我已经阅读了一些解决方案，但没有一个是无忧无虑的，所以我认为现在可能存在一些现代解决方案来解决这个问题。无论如何，它应该，因为问题已经存在了一段时间。在最近的 jQuery 更新中可能有一些东西？

我这样设置我的表单字段：

```
parent.window.document.getElementById(parent.window.imageInputField).value = '{{ path }}'+image; 
```

我有一个像这样的 onchange 事件，我想在上面的字段更新时触发。

```
$('#data_1').change(function(){
img = "url(" + $('#data_1').val() + ")"
$('#slide_bg').css("backgroundImage", img );
}); 
```

* * *

更新

所以这段代码工作正常：

```
alert( $('#'+parent.window.imageInputField, window.parent.document).val() ); 
```

虽然这没有任何作用，没有错误或什么都没有

```
$('#'+parent.window.imageInputField, window.parent.document).change(); 
```

更改事件在这里定义

```
$('#data_1').change(function(){
alert('change event called');
img = "url(" + $('#data_1').val() + ")"
$('#slide_bg').css("backgroundImage", img );
}); 
```

这很完美：

```
<input type='button' value='Uppdatera förhandsgr.' onclick="$('#data_1').change()" /> 
```

我想要的只是触发这个按钮的作用，但是通过代码......有人看到我哪里出错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T19:43:07.050

您需要使用您的代码触发更改处理程序。使用脚本更新值不会触发`change`事件

```
parent.window.document.getElementById(parent.window.imageInputField).value = '{{ path }}'+image;
$('#data_1').change() 
```

# python - 调用帮助函数时 repr.py 中的 Python 语法错误

> ID：14085252
> 
> 赞同：0
> 
> 时间：2012-12-29T19:39:28.990
> 
> 标签：python, python-2.7, syntax-error, pydoc

我对 Python 有一个非常奇怪的问题。每当我尝试使用内置**帮助**功能时，都会收到此错误：

```
 Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/site.py", line 468, in __call__
    import pydoc
  File "/usr/lib/python2.7/pydoc.py", line 56, in <module>
    from repr import Repr
  File "repr.py", line 21
    def 
       ^
SyntaxError: invalid syntax 
```

我已经手动检查了上述文件，但没有看到提到的错误。我还尝试删除**/usr/share/python2.7目录中 trceback 中提到的文件的****.pyc**文件，但我仍然遇到问题。

 **我的电脑运行的是 Ubuntu 12.10 64 位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T22:00:44.173

当前目录中是否有一个名为 repr.py 的文件？该文件不完整，并且隐藏了标准库`repr`模块。从 traceback 可以看出，该文件没有完整路径，只有本地路径。重命名或删除它。

请不要只从系统文件夹中删除 .pyc 文件，请从包中重新安装 python（使用包管理器）。**

# java - 如何使用 JSlider 更改 JLabel 背景颜色

> ID：14085254
> 
> 赞同：3
> 
> 时间：2012-12-29T19:39:40.027
> 
> 标签：java, swing, jlabel, jslider

具有“ChangeListener”接口和句柄“ChangeEvent”的 JSlider，当滑块值更改时将更改 JLabel 背景颜色。请帮助我，我做不到。在此先感谢。我无法应用 JLabel

```
 package org.kodejava.example.swing;
              import javax.swing.*;
               import javax.swing.event.ChangeEvent;
               import javax.swing.event.ChangeListener;
              import java.awt.*;
           public class JSliderDemo extends JPanel implements ChangeListener {
private JTextField field;

public JSliderDemo() {
    initializeUI();
}

private void initializeUI() {
    setLayout(new BorderLayout());
    setPreferredSize(new Dimension(400, 100));

    //
    // Creates an instance of JSlider with a horizontal
    // orientation. Define 0 as the minimal value and
    // 50 as the maximum value. The initial value is set
    // to 10.
    //
    JSlider slider = new JSlider(JSlider.HORIZONTAL, 0, 50, 10);

    slider.setPaintTicks(true);
    slider.setPaintLabels(true);
    slider.setMinorTickSpacing(1);
    slider.setMajorTickSpacing(10);

    slider.addChangeListener(this);

    JLabel label = new JLabel("The Value:");
    field = new JTextField(5);

    JPanel panel = new JPanel();
    panel.setLayout(new FlowLayout());
    panel.add(label);
    panel.add(field);

    add(slider, BorderLayout.NORTH);
    add(panel, BorderLayout.SOUTH);
}

public void stateChanged(ChangeEvent e) {
    JSlider slider = (JSlider) e.getSource();

    //
    // Get the selection value of JSlider
    //
    field.setText(String.valueOf(slider.getValue()));
}

public static void showFrame() {
    JPanel panel = new JSliderDemo();
    panel.setOpaque(true);

    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setTitle("Slider Example");
    frame.setContentPane(panel);
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            JSliderDemo.showFrame();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T20:14:54.930

1.  `JLabel`是透明的，然后必须改变它的不透明度`JLabel.setOpaque(true)`

2.  阅读 Oracle 教程[如何使用滑块](http://docs.oracle.com/javase/tutorial/uiswing/components/slider.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T06:33:11.707

JLabel 是透明的，不能直接改变它的背景颜色。

您可以从 JLabel 扩展并覆盖paint方法

或更改面板的背景颜色。您将 JLabel 放在面板上，当滑块移动时，只需更改该面板的 bgcolor。由于 JLabel 是透明的，您将看到更改。

至于代码尝试在你的 statechange 方法中添加这样的东西

```
panel.setBackground(new Color(int,int,int));//ints could be slider.getValue(); 
```

# jquery - 固定位置 div 不会淡出

> ID：14085257
> 
> 赞同：3
> 
> 时间：2012-12-29T19:39:59.787
> 
> 标签：jquery, html, css, internet-explorer

我遇到了 Internet Explorer 上的 jQuery 淡出功能问题。

正如您在这个[FIDDLE](http://jsfiddle.net/2ZGfL/)上看到的，它不会在任何版本的 Internet Explorer 上淡出。

但我注意到只有当 div 具有固定位置时（`position:fixed;`）

有什么解决方法吗？

您可以使用此代码重现错误

```
 <head>
        <script type="text/javascript">
            $(function() {
                $('.goBack').click( function(){   
                    $('#about').fadeOut(1000, function ()
                    {
                        $('#backend').fadeOut("slow");
                    });
                });
            });
        </script>
    </head>
    <body>
        <div id="backend">
            <div id="about">
                <div class="leftPanel">
                    <h1>About</h1>
                    <div class="menu">
                        <ul>
                            <li>Menu1</li>
                            <li>Menu2</li>
                            <li>Menu3</li>
                            <li>Menu3</li>
                        </ul>
                    </div>
                    <div class="goBack">
                        <p>Go Back</p>
                    </div>
               </div>   
            </div>
        </div>
    </body> 
```

有了这个 CSS

```
.leftPanel
{
    position:fixed;
    color:black;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:55:04.257

演示没有为`fixed`. 向父母申请`position:relative`并提供`top`&`left`它工作正常

```
#about{position:relative}

.leftPanel
{
    position:fixed;
     top:0;left:0;
 } 
```

演示：http: [//jsfiddle.net/2ZGfL/1/](http://jsfiddle.net/2ZGfL/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T19:55:08.567

尝试将您的脚本标签放在正文标签之后或正文标签结束之前。

```
<body> 
    ........
    ........
    <script>

     // JQuery Script

    </script>
 </body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:06:11.450

尝试使用 setTimeout 函数......像这样......

```
setTimeout(function(){$("#about").fadeOut("fast");},2000); 
```

它可能工作...

并尝试使用 position: absolute 或 relative ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T20:07:13.587

无需更改您的CSS。这将起作用：

```
$(function() {
$('.goBack').click( function(){   
  $(this).parent($('#backend')).fadeOut(1000);
});
}); 
```

# postgresql - 如何获得具有连续增加数字的列，而不会丢失任何数字？

> ID：14085258
> 
> 赞同：8
> 
> 时间：2012-12-29T19:40:01.923
> 
> 标签：postgresql, triggers, tabbing

> **可能的重复：**
> [如何在 PostgreSQL 查询中显示行号？](https://stackoverflow.com/questions/3397121/how-to-show-row-numbers-in-postgresql-query)[使用带有子选择的更新](https://stackoverflow.com/questions/6725783/postgresql-record-reordering-using-update-with-a-sub-select)
> [对 Postgresql PostgreSQL 记录重新排序中具有标识符的列进行重新排序](https://stackoverflow.com/questions/6037045/resequencing-a-column-with-identifier-in-postgresql)

我只是问在 PostgreSQL 中是否存在这样的可能性，如果我有 5 行并且在一列中有数字`1, 2, 3, 4, 5`并且在那些列中不是主键，如果我删除说 postgreSQL 重新枚举该列的 tird 行，那么我可以有`1, 2, 3, 4`而不是`1, 2, 4, 5`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T17:17:45.913

改编自之前的答案。*当应用程序需要变量的制表顺序*（阅读：EAV 模型中的记录）时，这种事情经常发生，这也可能是（部分）备用键。

*   该`priority`字段需要保持连续。[这是*标签顺序*]
*   在 INSERT 上：优先级 >= 新记录的所有记录的优先级都应该增加
*   类似地：在 DELETE -> decremented
*   如果一条记录的优先级被 UPDATE 更改，新旧优先级值之间的记录的优先级应该向上或向下移动。
*   避免递归触发器调用：
    *   基于触发器的更新会翻转`flipflag`他们接触的任何记录。
    *   他们测试`old.flipflag=new.flipflag`以检测*真正的*更新。（那些不是由触发引起的）

* * *

```
 -- Make some data
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE fruits
        ( id INTEGER NOT NULL PRIMARY KEY
        , priority INTEGER NOT NULL
        , flipflag boolean NOT NULL default false
        , zname varchar NOT NULL
        , CONSTRAINT unique_priority UNIQUE (priority) DEFERRABLE INITIALLY DEFERRED
        );
INSERT INTO fruits(id,zname,priority) VALUES
 (1  , 'Pear' ,4)
,(2  , 'Apple' ,2)
,(3  , 'Orange' ,1)
,(4  , 'Banana' ,3)
,(5  , 'Peach' ,5)
        ;

        -- Trigger functions for Insert/update/delete
CREATE function shift_priority()
RETURNS TRIGGER AS $body$

BEGIN
        UPDATE fruits fr
        SET priority = priority +1
        , flipflag = NOT flipflag       -- alternating bit protocol ;-)
        WHERE NEW.priority < OLD.priority
        AND OLD.flipflag = NEW.flipflag -- redundant condition
        AND fr.priority >= NEW.priority
        AND fr.priority < OLD.priority
        AND fr.id <> NEW.id             -- exlude the initiating row
                ;
        UPDATE fruits fr
        SET priority = priority -1
        , flipflag = NOT flipflag
        WHERE NEW.priority > OLD.priority
        AND OLD.flipflag = NEW.flipflag
        AND fr.priority <= NEW.priority
        AND fr.priority > OLD.priority
        AND fr.id <> NEW.id
        ;
        RETURN NEW;
END;

$body$
language plpgsql;

CREATE function shift_down_priority()
RETURNS TRIGGER AS $body$

BEGIN

        UPDATE fruits fr
        SET priority = priority -1
        , flipflag = NOT flipflag       -- alternating bit protocol ;-)
        WHERE fr.priority > OLD.priority
                ;
        RETURN NEW;
END;

$body$
language plpgsql;

CREATE function shift_up_priority()
RETURNS TRIGGER AS $body$

BEGIN
        UPDATE fruits fr
        SET priority = priority +1
        , flipflag = NOT flipflag       -- alternating bit protocol ;-)
        WHERE fr.priority >= NEW.priority
                ;
        RETURN NEW;
END;

$body$
language plpgsql;

        -- Triggers for Insert/Update/Delete
CREATE TRIGGER shift_priority_u
        AFTER UPDATE OF priority ON fruits
        FOR EACH ROW
        WHEN (OLD.flipflag = NEW.flipflag AND OLD.priority <> NEW.priority)
        EXECUTE PROCEDURE shift_priority()
        ;
CREATE TRIGGER shift_priority_d
        AFTER DELETE ON fruits
        FOR EACH ROW
        EXECUTE PROCEDURE shift_down_priority()
        ;
CREATE TRIGGER shift_priority_i
        BEFORE INSERT ON fruits
        FOR EACH ROW
        EXECUTE PROCEDURE shift_up_priority()
        ;

        -- Do some I/U/D operations
\echo Pears are Okay
UPDATE fruits
SET priority = 1
WHERE id=1; -- 1,4

SELECT * FROM fruits ORDER BY priority;

\echo dont want bananas
DELETE FROM fruits WHERE id = 4;
SELECT * FROM fruits ORDER BY priority;

\echo  We want Kiwis
INSERT INTO fruits(id,zname,priority) VALUES (4  , 'Kiwi' ,3) ;
SELECT * FROM fruits ORDER BY priority; 
```

结果：

```
Pears are Okay
UPDATE 1
 id | priority | flipflag | zname  
----+----------+----------+--------
  1 |        1 | f        | Pear
  3 |        2 | t        | Orange
  2 |        3 | t        | Apple
  4 |        4 | t        | Banana
  5 |        5 | f        | Peach
(5 rows)

dont want bananas
DELETE 1
 id | priority | flipflag | zname  
----+----------+----------+--------
  1 |        1 | f        | Pear
  3 |        2 | t        | Orange
  2 |        3 | t        | Apple
  5 |        4 | t        | Peach
(4 rows)

We want Kiwis
INSERT 0 1
 id | priority | flipflag | zname  
----+----------+----------+--------
  1 |        1 | f        | Pear
  3 |        2 | t        | Orange
  4 |        3 | f        | Kiwi
  2 |        4 | f        | Apple
  5 |        5 | f        | Peach
(5 rows) 
```

# java - 在 Eclipse 中配置 Logback

> ID：14085260
> 
> 赞同：11
> 
> 时间：2012-12-29T19:40:29.387
> 
> 标签：java, logging, slf4j, logback

我正在从 Log4j 切换到 Logback，但我还没有成功地使 Logback 工作。我已经放置`logback.xml`在我的 Eclipse Java 项目的根目录中，下面是它的内容：

```
<configuration>

  <appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>myApp.log</file>

    <encoder>
      <pattern>%date %level [%thread] %logger{10} [%file:%line] %msg%n</pattern>
    </encoder>
  </appender>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%msg%n</pattern>
    </encoder>
  </appender>

  <root level="debug">
    <appender-ref ref="FILE" />
    <appender-ref ref="STDOUT" />
  </root>
</configuration> 
```

以下是我的相关内容`Main.java`：

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
public class Main
{
  static final Logger logger = LoggerFactory.getLogger(Main.class);

  public static void main(String[] args)
  {
    logger.info("Main started");
  }
} 
```

这似乎不起作用，因为`myApp.log`在我的 Eclipse Java 应用程序的根目录中没有创建任何名为的文件。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T20:12:07.793

配置文件需要在类路径中。我的猜测是它不是。检查项目的构建路径。

# .net - WCF 中存储的默认协议映射在哪里

> ID：14085262
> 
> 赞同：4
> 
> 时间：2012-12-29T19:40:46.207
> 
> 标签：.net, wcf, wcf-binding

我想将`http`方案绑定从更改`basicHttpBinding`为`wsHttpBinding`. 我知道我可以将它覆盖到`app.config`. 但这需要更改所有受影响的 WCF 主机应用程序中的设置。

我也找不到 machine.config 中的协议映射部分。

默认协议映射如下。

```
<protolMapping>
    <add scheme ="http" binding="basicHttpBinding" bindingConfiguration="" />
    <add scheme ="tcp"  binding="netTcpBinding" bindingConfiguration="" />
..
</protocolMapping> 
```

更改后它应该看起来像。

```
<protolMapping>
    <add scheme ="http" binding="wsHttpBinding" bindingConfiguration="" />
    <add scheme ="tcp"  binding="netTcpBinding" bindingConfiguration="" />
..
</protocolMapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-28T10:29:41.367

默认值在 machine.config 中设置，如果它们在 machine.config 中不存在，则可以在 web.config / app.config 中覆盖，这可能是因为服务器未设置 WCF 预安装。通常这将使用 IIS 安装和配置，但如果 IIS 未安装或未用于托管 WCF，则不会使用 WCF 功能。

[有关该主题的 MSDN 链接](https://msdn.microsoft.com/en-us/library/ee816881(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T07:25:12.307

我相信默认值是在代码中实现的，而不是在 .config 文件中，如果您使用 Reflector 或等效工具查看[ProtocolMappingSection 类](http://msdn.microsoft.com/en-us/library/system.servicemodel.configuration.protocolmappingsection.aspx)、方法[InitializeDefault](http://msdn.microsoft.com/en-us/library/system.configuration.configurationelement.initializedefault.aspx)，您会看到：

```
protected override void InitializeDefault()
{
    this.ProtocolMappingCollection.Add(new ProtocolMappingElement("http", "basicHttpBinding", ""));
    this.ProtocolMappingCollection.Add(new ProtocolMappingElement("net.tcp", "netTcpBinding", ""));
    this.ProtocolMappingCollection.Add(new ProtocolMappingElement("net.pipe", "netNamedPipeBinding", ""));
    this.ProtocolMappingCollection.Add(new ProtocolMappingElement("net.msmq", "netMsmqBinding", ""));
} 
```

# nhibernate - 使用一对多关系映射 Fluent NHibernate 组件

> ID：14085263
> 
> 赞同：0
> 
> 时间：2012-12-29T19:40:55.010
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有这些课程：

```
class A
{
    public virtual Guid Id { get;set; }
    public virtual B Data { get; set; }
}

class B
{
    public IList<byte[]> InnerData1 { get; set; } // (1)
    public IList<C> InnerData2 { get; set; } // (2)
}

class C
{
    public int Value1 { get; set; }
    public int? Value2 { get; set; }
} 
```

以及 A 类的以下映射：

```
Id(x => x.Id).GeneratedBy.Guid();
Component(x => x.Data,
    m => 
        {
            m.HasMany(x => x.InnerData1).Element("InnerData1").Not.LazyLoad(); // (1)
            m.HasMany(x => x.InnerData2).Element("InnerData2").Not.LazyLoad(); // (2)
        }); 
```

由于设置 (1) 工作正常，它会自动创建一个表并正确引用它，我对 (2) 有一个问题，它引发了异常：

`Could not determine type for: (...), for columns: NHibernate.Mapping.Column(InnerData1)`

为什么它创造了一切正常`IList<byte[]>`并且有问题`with IList<C>`？我是否必须为 C 设置单独的映射？没有其他更简单的方法吗？我不希望在 C 中向我的模型添加任何额外的 ID 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:11:38.027

您必须显式映射 C，因为它是复合类型（具有多个值的类型）。它不需要有明确的 id 列

```
HasMany(x => x.InnerData2)
    .Component(x => 
    {
        x.Map(c => c.Value1, "Value1").Not.Nullable();
        x.Map(c => c.Value2, "Value2");
    })
    .Not.LazyLoad(); 
```

# java - 在具有动态 ip 的服务器上运行 java 服务

> ID：14085267
> 
> 赞同：0
> 
> 时间：2012-12-29T19:41:15.550
> 
> 标签：java, redirect, service, dns, port

我正在尝试设置一个 java 服务（服务器），它在用户定义的端口（比如 5555）上接受来自 GPS 跟踪设备的 tcp/udp 连接。

由于我的服务器上没有静态 IP，我无法将我的 gps 设备配置为指向特定的 IP 地址。

如何使用像[no-ip.com](http://no-ip.com)这样的动态 dns 服务，以便我可以将静态名称映射到我的动态 ip。

我可以将 gps 设备配置为指向像 gpst.no-ip.org 这样的域

如果我使用动态 dns 服务，它会将 gps 设备重定向到我服务器的端口 5555。

他们还有其他方法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T19:45:06.823

dns-lookup 将在不知道端口的情况下发生。因此，由您的应用程序决定使用哪个端口。

我认为将动态 IP 地址绑定到静态名称是解决该问题的一种不错的方法。

# c++ - C++ decltype 无法推断类型

> ID：14085274
> 
> 赞同：4
> 
> 时间：2012-12-29T19:42:17.853
> 
> 标签：c++, visual-c++, c++11, decltype

decltype 在 Visual Studio 2012 中真的有问题吗，或者它实际上应该很难使用？

例子：

```
namespace ptl
{

    struct Test
    {
        Test(float ){}
    };

    template<class T, class A0>
    static T* static_constructor(void* p, A0 a0){return new(p) T(a0);}

    template<class T>
    T*  MakeVS2012Happy(T*);
}

inline auto ExampleFxn() -> decltype(ptl::MakeVS2012Happy(&ptl::static_constructor<ptl::Test, float>)) 
{
   return &ptl::static_constructor<ptl::Test, float>;
}
inline auto ExampleFxn2() -> decltype(&ptl::static_constructor<ptl::Test, float>)
{
   return &ptl::static_constructor<ptl::Test, float>;
} 
```

ExampleFxn 可以编译，因为我已经使用该无意义的函数将代码包装在 decltype 中。

ExampleFxn2 没有，VS2012 吐出非常有用的错误消息：

错误 C3555：“decltype”的参数不正确

有谁知道这是什么原因？我似乎必须经常与 decltype 作斗争才能使其按预期工作......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:00:09.277

的类型`&ptl::static_constructor<ptl::Test, float>`可以推导出来`decltype()`。这看起来像 MSVC++ 中的错误。clang 和 gcc 都同意代码很好（假设`#include <new>`添加了）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T20:09:50.237

我同意 Dietmar：这是编译器中的一个错误。问题似乎是`decltype`不能应用于采用函数模板特化地址的表达式。也就是说，以下是此问题的最小重现：

```
template <typename>
void f();

typedef decltype(&f<void>) t; 
```

作为一种解决方法，考虑`decltype`直接应用到函数模板特化，然后添加`*`以形成所需的指针类型：

```
inline auto ExampleFxn2()
    -> decltype(ptl::static_constructor<ptl::Test, float>)*
{
   return &ptl::static_constructor<ptl::Test, float>;
} 
```

[请考虑在Microsoft Connect](http://connect.microsoft.com/VisualStudio)上为此打开一个错误，并在此处发布一个链接作为评论供未来的读者阅读（或者，如果您不想这样做，请告诉我，我很乐意为此问题打开一个错误）。

# android - 应用内计费安全

> ID：14085279
> 
> 赞同：11
> 
> 时间：2012-12-29T19:42:45.323
> 
> 标签：android, security, in-app-billing

我已经完成了在应用计费 v3 中使用的应用程序的开发。我的应用程序是一个考试帮助应用程序，其中包含一个插入数据库的问题列表。让我担心的是安全性，因为除了 proguard 之外几乎没有其他东西。我的应用程序查询购买物品的库存，因此存储购买不是问题。

所以第一个问题是有人可以反编译应用程序（我已经完成了），即使使用 proguard，您也可以轻松检索所有问题。

接下来是应用程序的公钥。这可以很容易地从我的应用程序中获取，并且根据开发人员指南，这是我应该保持安全的东西。

但是我真的不知道如何实现任何形式的安全性。甚至我应该在安全方面走多远。如果没有服务器，如果我将所有东西都保留在设备上，我会认识到它不会是完美的（远非如此），但我至少希望黑客被吓倒而不是被逗乐。

所以本质上问题是：

我应该使用哪种类型的安全性以及如何使用它？只需将我指向逐步通过它的链接，这样我就可以理解它会很棒。

非常感谢！

澄清：

不涉及服务器。数据存储在应用程序中。当它查询库存时（通过 queryinventoryasync 方法），它会返回是否购买了库存，并且每次启动应用程序时都会运行。在应用程序计费本身我认为没问题，我正在询问更多关于我自己的应用程序的应用程序公钥 - 我的意思是让它更难复制，但目前我刚刚将它分成 15 个字符串，我只是“添加”它们在运行时相互连接，但这几乎没有比将它作为一个字符串更好。我想以某种方式加密它只是不知道如何。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-08-22T14:24:24.803

好问题。

公钥必须在设备上可用才能使用。一旦它出现在设备上，它就不再受到真正的保护。密钥本身并不是秘密，但我们需要使其可能的替换成为一项更困难的任务。

您可以做的是使用所谓的 XOR 加密。这是 XOR 加密器和解密器方法的示例。

```
public static String xorEncrypt(String input, String key) {
    byte[] inputBytes = input.getBytes();
    int inputSize = inputBytes.length;

    byte[] keyBytes = key.getBytes();
    int keySize = keyBytes.length - 1;

    byte[] outBytes = new byte[inputSize];
    for (int i=0; i<inputSize; i++) {
        outBytes[i] = (byte) (inputBytes[i] ^ keyBytes[i % keySize]);
    }

    return new String(Base64.encode(outBytes, Base64.DEFAULT));
}

public static String xorDecrypt(String input, String key) {
    byte[] inputBytes = Base64.decode(input, Base64.DEFAULT);
    int inputSize = inputBytes.length;

    byte[] keyBytes = key.getBytes();
    int keySize = keyBytes.length - 1;

    byte[] outBytes = new byte[inputSize];
    for (int i=0; i<inputSize; i++) {
        outBytes[i] = (byte) (inputBytes[i] ^ keyBytes[i % keySize]);
    }

    return new String(outBytes);
} 
```

您需要如何选择一个密码字符串 ( `String key`) 并使用它加密您的公钥 ( `String input`)。您可以将此加密密钥存储在一个类中。当您需要真正的密钥值时，您可以`xorDecrypt()`使用密码和公共（加密）密钥字符串进行调用。密码也是您存储在代码中某处的字符串。正如我所说，我们并没有真正保护它，但我们使它更难找到和/或更换。

您也可以添加更复杂的逻辑来说明如何组合加密的公钥和密码。这只会增加更多复杂性，但不会给您任何保证您的密钥不会被解密。无论如何，[谷歌确认](http://developer.android.com/google/play/billing/billing_best_practices.html#key)异或加密总比没有好。

Android 4.3 添加了一些更多的安全功能，也可以用于存储公钥。该解决方案需要服务器通信和硬件支持才能真正安全。这些是[Key Chain 增强功能和 Android Keystore Provider](http://developer.android.com/about/versions/jelly-bean.html#43-enterprise-security)。

# r - 一个绘图中的多条 ROC 曲线 ROCR

> ID：14085281
> 
> 赞同：26
> 
> 时间：2012-12-29T19:43:17.843
> 
> 标签：r, plot, roc

是否可以使用 ROCR 包在同一图中绘制不同分类器的 roc 曲线？我试过了：

```
>plot(perf.neuralNet, colorize=TRUE)
>lines(perf.randomForest) 
```

但我得到：

> 错误 en as.double(y) : 无法将类型“S4”强制转换为“double”类型的向量

谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-29T20:09:42.617

您的 - 方法的问题在于，对于包中定义的类对象`lines`没有通用行函数。但是您可以像使用附加参数一样使用通用绘图函数。例如，这部分来自示例页面：`S4``performance``ROCR``add = TRUE``?plot.performance`

```
library(ROCR)
data(ROCR.simple)
pred <- prediction( ROCR.simple$predictions, ROCR.simple$labels )
pred2 <- prediction(abs(ROCR.simple$predictions + 
                        rnorm(length(ROCR.simple$predictions), 0, 0.1)), 
        ROCR.simple$labels)
perf <- performance( pred, "tpr", "fpr" )
perf2 <- performance(pred2, "tpr", "fpr")
plot( perf, colorize = TRUE)
plot(perf2, add = TRUE, colorize = TRUE) 
```

或者，您可以将所有预测存储在一个矩阵中，然后将所有后续步骤合二为一：

```
preds <- cbind(p1 = ROCR.simple$predictions, 
                p2 = abs(ROCR.simple$predictions + 
                rnorm(length(ROCR.simple$predictions), 0, 0.1)))

pred.mat <- prediction(preds, labels = matrix(ROCR.simple$labels, 
                nrow = length(ROCR.simple$labels), ncol = 2) )

perf.mat <- performance(pred.mat, "tpr", "fpr")
plot(perf.mat, colorize = TRUE) 
```

顺便说一句，如果您出于某种原因真的想用来`lines`绘制连续的 ROC 曲线，您将不得不做某事。像这样：

```
plot(perf) 
lines(perf2@x.values[[1]], perf2@y.values[[1]], col = 2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-30T20:28:28.830

呼应@adibender，并添加评论：该示例不包括如何使用第二种（一次全部绘制）方法为每条曲线设置单独的颜色。在这种情况下，将 col 作为列表传递：

```
library(ROCR)
data(ROCR.hiv)
x   <- prediction(ROCR.hiv$hiv.nn$predictions, ROCR.hiv$hiv.nn$labels)
ROC <- performance(x, "tpr", "fpr")
plot(ROC, col = as.list(1:10)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T19:56:05.807

R 具有在一个窗口中绘制多个绘图的功能。如果包不支持在一个窗口中绘制多个图，您可以使用 R 的标准工具解决问题。其他方式：[几个 ROC](https://github.com/chupvl/R_scripts)的示例 使用此脚本的文章：[使用 ROCR 绘制 ROC 曲线的示例](http://www.r-bloggers.com/an-example-of-roc-curves-plotting-with-rocr/)

# c++ - 如何在模拟点击时保持窗口不活动？

> ID：14085286
> 
> 赞同：4
> 
> 时间：2012-12-29T19:43:40.623
> 
> 标签：c++, winapi, click, window

我用 C++ 制作了一个程序，它使用以下方法模拟对非活动窗口的点击：

```
PostMessage (z, WM_LBUTTONDOWN, 0,MAKELONG(t.left+x,t.top+y)); 
```

但是每当它点击它时，它就会激活窗口并且窗口移动到顶部。

有没有一种方法可以使窗口保持非活动状态或以其他方式单击它？

我曾经`SetWindowPos(z , HWND_BOTTOM,....)`使该窗口位于 z 顺序列表的底部，但它仍然会激活。

编辑：窗口是游戏机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:06:51.903

尝试从`PostMessage`to切换[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)，看看是否得到相同的效果。

# java - 我们如何使用 for 循环在 java 中打印这种模式（请不要使用除 main 函数之外的函数）

> ID：14085296
> 
> 赞同：-6
> 
> 时间：2012-12-29T19:45:05.620
> 
> 标签：java, loops, for-loop

```
--g   h   i   j--
----d   e   f----
------b   c------
--------a-------- 
```

我们如何使用 for 循环在 java 中打印此模式。我不想使用“System.out.print()”打印该模式。我尝试使用嵌套的 for 循环，但被卡住了。我无法理解在打印第一行后如何切换到第二行。

破折号（-）指的是空格

这不是我的作业……我刚刚尝试了新的练习程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T19:50:32.867

```
for (int i = 0; i < 1; i ++) {
    System.out.println("--g   h   i   j--");
    System.out.println("----d   e   f----");
    System.out.println("------b   c------");
    System.out.println("--------a--------");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T20:14:58.333

此代码将仅在主函数中使用 for 循环准确打印您需要的内容：

```
public static void main(String[] args) {
    int x = 2;
    int nr = 3;
    char base = 'g';
    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < x; ++j) {
        System.out.print("-");
        }
        int letNr = 4 - i;
        for(int j = 0; j < letNr - 1; ++j) {
            System.out.print((char)(base + j) + "   ");
        }
        System.out.print((char)(base + letNr - 1)); 
        for(int j = 0; j < x; ++j) {
        System.out.print("-");
        }
        System.out.println();
        x+=2;
        base = (char)(base - nr );
        nr--;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T19:49:56.203

您唯一的要求是打印该图案？

这将完成这项工作：

```
public static void main(String[] args) {
    System.out.println("--g   h   i   j--");
    System.out.println("----d   e   f----");
    System.out.println("------b   c------");
    System.out.println("--------a--------");
} 
```

请考虑添加我们需要以有意义的方式回答您的问题的所有信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T19:59:39.657

如果你真的想要一个正确的答案，你会想要这个

```
String[][] letters = { {"a"}, {"b", "c"}, {"d", "e", "f"}, {"g", "h", "i", "j"} };
for (int i = 0; i < 4; i ++) {
    int amountOfHashes = (i+1) * 2;
    String outputString = "";
    for (int i2 = 0; i < amountOfHashes; i ++) {
        outputString += "-";
    }
    String tempArray = letters[3 - i];
    for (int i2 = 0; i < tempArray; i ++) {
        if (i2 != 0) { outputString += " "; }
        outputString += tempArray[i2];
    }
    for (int i2 = 0; i < amountOfHashes; i ++) {
        outputString += "-";
    }
} 
```

还没有测试，所以你必须调试它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-29T20:45:58.403

尝试：：

```
for (int i = 0; i < 1; i ++) {
    System.out.println("--g   h   i   j--\n----d   e   f----\n------b   c------\n--------a--------");

} 
```

# android - 插入 SQLite Android 时出错

> ID：14085297
> 
> 赞同：0
> 
> 时间：2012-12-29T19:45:08.393
> 
> 标签：android, database, sqlite, insert

```
public static final String MYDATABASE_NAME = "MY_DATABASE";
    public static final String MYDATABASE_TABLE = "MY_TABLE";
    public static final int MYDATABASE_VERSION = 1;
    public static final String KEY_ID = "_id";
    public static final String KEY_CONTENT = "Content";
    public static final String DRINK_NAME = "Name";
    public static final String DRINK_CATEGORY = "Category";
    public static final String DRINK_COLOR = "Color";
    public static final String DRINK_TYPE = "Type";
    public static final String INGREDIENT_1="In1", INGREDIENT_2="In2", INGREDIENT_3="In3", INGREDIENT_4="In4", 
                               INGREDIENT_5="In5", INGREDIENT_6="In6";
    public static final String TIME_1="T1", TIME_2="T2", TIME_3="T3", TIME_4="T4", TIME_5="T5", TIME_6="T6";

    //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE =
            "CREATE TABLE IF NOT EXISTS " + MYDATABASE_TABLE + " ("
                    + DRINK_NAME + " TEXT, " + DRINK_CATEGORY + " TEXT, "
                    + DRINK_COLOR + " TEXT, " + DRINK_TYPE + " TEXT, "  
                    + INGREDIENT_1 + " TEXT, " + INGREDIENT_2 + " TEXT, " 
                    + INGREDIENT_3 + " TEXT, " + INGREDIENT_4 + " TEXT, " 
                    + INGREDIENT_5 + " TEXT, " + INGREDIENT_6 + " TEXT, "
                    + TIME_1 + " TEXT, " + TIME_2 + " TEXT, "
                    + TIME_3 + " TEXT, " + TIME_4 + "TEXT, " 
                    + TIME_5 + " TEXT);"; 
```

我不断收到错误“表 MYDATABASE_TABLE 没有名为 T4 的列”显然，我有一个名为 TIME_4 的列，它是“T4”的变量名

然后我在此处插入值：

```
public long insert(String name, String category, String color, String type, String ingredient1,
                        String ingredient2, String ingredient3, String ingredient4, String ingredient5,
                        String ingredient6, int time1, int time2, int time3, int time4, int time5){

        ContentValues contentValues = new ContentValues();
        contentValues.put(DRINK_NAME, name);
        contentValues.put(DRINK_CATEGORY, category);
        contentValues.put(DRINK_COLOR, color);
        contentValues.put(DRINK_TYPE, type);
        contentValues.put(INGREDIENT_1, ingredient1);
        contentValues.put(INGREDIENT_2, ingredient2);
        contentValues.put(INGREDIENT_3, ingredient3);
        contentValues.put(INGREDIENT_4, ingredient4);
        contentValues.put(INGREDIENT_5, ingredient5);
        contentValues.put(INGREDIENT_6, ingredient6);
        contentValues.put(TIME_1, time1);
        contentValues.put(TIME_2, time2);
        contentValues.put(TIME_3, time3);
        contentValues.put(TIME_4, time4);
        contentValues.put(TIME_5, time5);
        //  contentValues.put(TIME_6, time6);

        return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
    } 
```

谁能告诉我我做错了什么？我是 SQLite 的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:49:28.037

改变

```
 + TIME_3 + " TEXT, " + TIME_4 + "TEXT, " 
```

到

```
+ TIME_3 + " TEXT, " + TIME_4 + " TEXT, " 
```

因为你忘记在`TIME_4` 和之间放置空格`TEXT,`

# android - 来自 Android 开发者网站 Ubuntu 12.04 的 Android Eclipse Juno 或 ADT

> ID：14085299
> 
> 赞同：0
> 
> 时间：2012-12-29T19:45:51.283
> 
> 标签：android, eclipse, ubuntu, adt

只是想知道 Eclipse JUNO 和 Android 开发者网站上的 ADT 有什么区别。在 Ubuntu 12.04 上使用哪个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T19:54:28.303

要开发 android 应用程序，您应该使用 Eclipse 和 ADT。Eclipse 是多种编程语言的开发环境。例如，借助 Java 开发工具 (JDT)，它支持 Java 开发。[ADT](http://developer.android.com/tools/sdk/eclipse-adt.html)（Android 开发工具）是 Eclipse 的另一个扩展，用于支持 Android 开发。它为 Eclipse 添加了许多功能，例如在编写和运行 android 应用程序时帮助您的调试工具。但是，要使用 ADT 运行 Eclipse，您仍然需要[Android SDK](http://developer.android.com/sdk/index.html)。

[android 开发者网站](http://developer.android.com/index.html)始终是开发 android 应用程序的良好开端。你会在那里找到你需要的一切。

# c# - 复制文件和文件夹保持 Windows 7 界面

> ID：14085300
> 
> 赞同：2
> 
> 时间：2012-12-29T19:45:54.053
> 
> 标签：c#, winforms, c#-4.0, process, xcopy

我已经使用 xcopy 将文件从一个文件夹复制到另一个文件夹：

```
Process proc = new Process();
//proc.StartInfo.UseShellExecute = false;
//proc.StartInfo.CreateNoWindow = true;
proc.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
proc.StartInfo.FileName = @"C:\WINDOWS\system32\xcopy.exe";
string arg = @"R:\TREM " + fbd.SelectedPath + " /E /I /Y";
//proc.StartInfo.Arguments = @"C:\source C:\destination /E /I /Y";
proc.StartInfo.Arguments = arg;
proc.Start(); 
```

现在，当我们使用 Windows 7 界面复制任何内容时，我想查看确切的小窗口（在复制时间），例如`Ctrl+C`, `Ctrl+V`. 可能吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T19:48:26.683

您需要使用Shell 接口的[IFileOperation](http://msdn.microsoft.com/en-us/library/bb775771.aspx)接口[。](http://msdn.microsoft.com/en-us/library/bb774328%28v=vs.85%29.aspx)

示例 -> [Windows Vista 中的 IFileOperation](http://msdn.microsoft.com/en-us/magazine/cc163304.aspx)

# python - 带有模块 os 的 python 程序无法按预期工作

> ID：14085304
> 
> 赞同：0
> 
> 时间：2012-12-29T19:46:33.307
> 
> 标签：python

我刚刚开始学习 python 并将它与我的树莓派和 GPIO 一起使用。我正在尝试对此进行编程，使其运行“echo p >> /home/pi/.config/pianobar/ctl”这一行，这将暂停正在播放的歌曲。我得到它来打印它，但它实际上并没有暂停歌曲。

```
#!/usr/bin/python
import os
import time
import RPi.GPIO as GPIO
GPIO.setmode(GPIO.BOARD)
GPIO.setup(11, GPIO.IN)
while True:
        mybutton = GPIO.input(11)
        if mybutton == False:
                print "pause"
                os.system("echo 'echo 'p' >> /home/pi/.config/pianobar/ctl'")
                time.sleep(.2) 
```

输出是： echo p >> /home/pi/.config/pianobar/ctl

暂停

但实际上什么也没发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:04:47.427

这一行：

```
os.system("echo 'echo 'p' >> /home/pi/.config/pianobar/ctl'") 
```

有两个`echo`s，并且`>>`操作符被引用，所以它所做的就是将一些东西打印到标准输出。尝试：

```
os.system("echo 'p' >> /home/pi/.config/pianobar/ctl") 
```

# css - 包含图像的锚标记没有边框

> ID：14085307
> 
> 赞同：9
> 
> 时间：2012-12-29T19:47:03.013
> 
> 标签：css, image, anchor, border

我的文档中有一个锚标记的全局规则：

```
a,a:hover {border-bottom: 1px solid #ccc;} 
```

但是边框在图像上看起来不太好。我很好奇是否有一种方法可以删除仅使用纯 css 的包含图像的锚标记的边框？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-29T13:17:51.487

我发现了这个： http: [//konstruktors.com/blog/web-development/1122-remove-border-from-image-links/](http://konstruktors.com/blog/web-development/1122-remove-border-from-image-links/)

它基本上是一个非常简单的 hack，如下所示：

```
a img { border:none; vertical-align:top; } 
```

它就像一个魅力，没有浏览器冲突：有关更多详细信息，请参阅文章。

编辑：`border:none`在大多数情况下，实际上并没有做任何有用的事情。边框在锚点上，而不是 img 标签，所以如果您已经使用全局 CSS 重置将锚定图像的边框归零，您只需将' 边框向上`vertical-align:top`推到图像后面，这样就不会了`a`更长的可见性（只要您的图像不透明）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T20:03:08.400

不，目前 CSS 中没有选择器可以根据其后代选择元素。您需要在 CSS 中使用 JavaScript 或类。

最可靠的是，您将`class`在所有不包含图像的链接上使用一个属性，并在您的 CSS 规则中使用相应的类选择器。

如果您的大多数链接不包含图像，您可以使用否定方法并在那些包含图像的链接上设置一个类，例如，并在 CSS 中`class=imagelink`使用选择器。`:not(.imagelink)`支持`:not(...)`是广泛的，但不是普遍的。另一种方法，不指望这种支持，是在你的问题中的所有链接上设置一个底部边框，然后为图像链接关闭它：

```
a.imagelink {border-bottom: none;} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T20:04:17.990

不幸的是，不可能！我想我只使用 jquery 完成了这个。

[http://www.w3schools.com/cssref/css_selectors.asp](http://www.w3schools.com/cssref/css_selectors.asp)

[活动孩子的父母的复杂 CSS 选择器](https://stackoverflow.com/questions/45004/complex-css-selector-for-parent-of-active-child/45530#45530)

[有 CSS 父选择器吗？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-29T20:09:21.207

无法使用`css`，但`css`如果[添加](http://demo.idered.pl/jQuery.cssParentSelector/)使用`jQuery`. [这是一个例子](http://jsfiddle.net/5PXY3/)

```
a! >  img { border: none; }​ 
```

如果它是标签的父标签，上面`css`的规则会从标签中删除边框，但现在它仍然不是 pure ，具有依赖关系。`a``img``css`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-16T16:54:31.487

该技巧仅适用于非透明图像，如果大于图像高度（想想小型社交网络图标）`vertical-align`，则根本不起作用。`a` `line-height`

我希望我可以在这里使用公认的解决方案，但它会导致文本块内的内联图像对齐，以及上述问题。

`box-shadow`我已经决定在底部做一个纯白色，也许是IE8 和更早版本`a > img`的备份阴影，然后就结束了。`filter`不会弄乱布局：

```
a { text-underline: none; 
    border-bottom: 1px solid blue; }

a img { box-shadow: 0 .333em 0 0 white; /* white, or your background color */
        filter: progid:DXImageTransform.Microsoft.Shadow... etc  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-15T01:04:05.520

正如您问题的其他答案所说，现在不可能用 CSS 来做。但是如果你使用 jQuery，这个效果很好：

```
$(document).ready(function(){

   $('a img').parent().css('border','none');

}); 
```

它基本上在页面加载后搜索包含图像的链接并声明css规则***边框：无；***对于图像的父元素，即。链接。

# visual-studio-2010 - 使用 VB 获取 VS2010 插件的 DTE？

> ID：14085310
> 
> 赞同：2
> 
> 时间：2012-12-29T19:47:11.547
> 
> 标签：visual-studio-2010, add-in

我正在将 Visual Studio 2010 宏转换为在插件中工作。我正在使用 VB。如何更正以下行：

```
Dim win As Window = DTE.ActiveWindow 
```

这给出了这个错误：

> 错误 3 对非共享成员的引用需要对象引用。C:\Users\Frank\documents\visual studio 2010\Projects\MyAddin2\MyAddin2\Module1.vb 28

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T23:28:37.027

DTE 通过[IDTExtensibility2.OnConnection中的](http://msdn.microsoft.com/en-US/library/extensibility.idtextensibility2.onconnection%28v=vs.100%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)*Application*参数传递。此方法在 Visual Studio 初始化 AddIn 时调用。

AddIn 项目向导应该已经生成了一些代码，将*Application*参数转换为*DTE2*类型的字段。使用该字段访问*ActiveWindow*属性。

# c# - 在鼠标按下按钮时将对象向上移动（更改位置）

> ID：14085314
> 
> 赞同：1
> 
> 时间：2012-12-29T19:47:33.140
> 
> 标签：c#, winforms, location, visible, slowdown

我想更改单选按钮的位置并在我单击按钮时使其向上移动

试过这个

```
private void up_MouseDown(object sender, MouseEventArgs e)
{
    while(P.Location.Y>0)
    P.Location = new System.Drawing.Point(P.Location.X, P.Location.Y - 1);    
} 
```

`P`是一个`radiobutton`

* * *

我希望它在我按下时继续向上移动，但它只是跳到表格的顶部。它在调试中运行良好，但它确实移动得很快我想减慢单选按钮的移动并使其可见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T19:59:56.773

实际上，您正在启动一个 while 循环，该循环在您的 RadioButton 位于表单顶部之前不会退出，无论您是否仍在按下按钮。您可以通过在循环中放置一个 Thread.Sleep 来减慢它的速度，这样它就会减慢可见。

```
private void up_MouseDown(object sender, MouseEventArgs e)
{
    while (P.Location.Y > 0)
    {
        P.Location = new System.Drawing.Point(P.Location.X, P.Location.Y - 1);
        System.Threading.Thread.Sleep(10);
    }

} 
```

如果您想更好地控制我会使用计时器。在此示例中，间隔设置为 10。

```
private void up_MouseDown(object sender, MouseEventArgs e)
{
    timer1.Start();
}

private void up_MouseUp(object sender, MouseEventArgs e)
{
    timer1.Stop();
}

private void timer1_Tick(object sender, EventArgs e)
{
    if (P.Location.Y > 0)
    {
        P.Location = new System.Drawing.Point(P.Location.X, P.Location.Y - 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:01:53.613

您可以使用计时器。从工具箱中添加一个计时器，说它的名字是 timer1，然后添加以下方法：

```
private void P_MouseUp(object sender, MouseEventArgs e) {
    timer1.Enabled=false;
}

private void P_MouseDown(object sender, MouseEventArgs e) {
    timer1.Enabled=true;
}

private void timer1_Tick(object sender, EventArgs e) {
    if(P.Location.Y>0)
        P.Location=new System.Drawing.Point(P.Location.X, P.Location.Y-1);
} 
```

您可以在属性窗口中更改 timer1 的时间间隔。我猜你写这个是为了好玩；所以，玩得开心！

# python - 自动导入给定文件夹中的所有 Python 文件？

> ID：14085317
> 
> 赞同：4
> 
> 时间：2012-12-29T19:47:53.560
> 
> 标签：python, python-2.7, python-2.x, python-module

*我对 Python 比较陌生，我尝试学习“Pythonic”的做事方式，为 Python 开发打下坚实的基础。也许我想要实现的根本不是 Python，但我仍然在寻找解决这个问题的“正确”方法。*

我正在构建一个应用程序，我正在为其创建模块。我刚刚注意到我的一个模块有 7 个不同的 .py Python 文件，它们都导入了 3 个不同的相同的东西。所以所有这些文件共享这些导入。

我尝试删除它们，并将这些导入插入到文件夹中的空**init** .py 中，但它没有起到作用。

如果可能的话，由于所有这些模块文件都需要这些导入，我不希望它们被一个一个地导入到每个文件中。

我可以做些什么来执行通用导入？

非常感谢您，我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T20:28:57.900

正如[Python 之禅](http://www.python.org/dev/peps/pep-0020/)所说，“显式胜于隐式”，这是一个很好的例子。

在导入中明确列出模块的依赖关系非常有用，这意味着文件中的每个符号都可以通过简单的文本搜索追溯到其来源。例如，如果您在文件中搜索`some_identifier`，您将在文件中找到定义，或者`from some_module import some_identifier`. 直接引用`some_module.some_identifier`. （这也是你不应该这样做的原因之一`from module import *`。）

在不丢失上述属性的情况下，您可以做的一件事是将您的三个共享模块导入第四个模块：

```
#fourth.py
import first
import second
import third 
```

然后...

```
#another.py
import fourth

fourth.first.some_function()
#etc. 
```

如果你不能忍受（它确实使调用更冗长，毕竟），那么重复三个导入就可以了，真的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T20:06:59.820

我同意 DrewV，这完全是 pythonic

文件1：

```
import xyz

import abc 
```

...

文件2：

```
import xyz 
```

以下链接也解决了一个几乎相同的问题：

[一个公共模块的python多次导入](https://stackoverflow.com/questions/4689252/python-multiple-imports-for-a-common-module)

正如它所解释的，Python 完成了优化模块加载的工作，因此您可以编写多个导入语句而不必担心性能损失，因为模块只*加载*一次。事实上，列出每个文件中的所有导入可以明确地清楚每个文件所依赖的内容。

有关导入如何与命名空间交互的讨论，请参阅：

[跨模块和全局变量的 Python 导入](https://stackoverflow.com/questions/8165703/python-imports-across-modules-and-global-variables)

# html - 水平对齐 2 个块（一个左浮动）

> ID：14085324
> 
> 赞同：0
> 
> 时间：2012-12-29T19:49:07.350
> 
> 标签：html, css, css-float

我想水平对齐（对于任何屏幕分辨率）两个主要块。一个有一个浮动：左。

如果我将 margin-left:auto 设置为 .site （主要内容块，在右侧），它会水平对齐。问题是我不知道如何让侧边栏（左侧的块）也对齐。这很困难，因为我需要确保菜单完全“附加”到内容块（所以我不能使用 position:relative;left:XXpx 因为它会在不同的分辨率下变化）。

有任何想法吗？:)

编辑：如果可能的话，也适用于 IE 7-8 的解决方案（不幸的是）：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:29:57.320

我可能在这里遗漏了一些东西，但是您只想获得 2 个块元素并使它们水平居中对齐？

只需将它们包装在另一个 div 中并将包装器 div 与`margin: 0 auto`.

检查[此链接](http://jsfiddle.net/fabio_silva/WwvN7/)。

```
<div id="#wrapper">
  <div id="sidebar">Sidebar</div>
  <div id="content">Content</div>
</div> 
```

**编辑：** 当然，您还必须浮动 Content div（不仅是侧边栏）

# heroku - 安装 Heroku Toolbelt 时出错

> ID：14085325
> 
> 赞同：0
> 
> 时间：2012-12-29T19:49:17.087
> 
> 标签：heroku, heroku-toolbelt

尝试安装 Heroku Toolbelt，但现在`Gem:LoadError`尝试发出任何 heroku 命令时出现错误。

> $ heroku -v
> 
> /Users/xyz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247：在`to_specs'中：找不到heroku（> = 0） [...] (Gem::LoadError)
> 
> $哪个heroku
> 
> /Users/xyz/.rvm/gems/ruby-1.9.3-p194@global/bin/heroku

它似乎仍在寻找宝石，但我已经卸载了它。我怎样才能解决这个问题？

(OSX 山狮)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T07:56:16.310

我可能误解了这个问题，但如果只是没有安装/缺少 heroku gem，请尝试：

```
$ gem install heroku 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T05:21:08.687

我最初在 Windows/OS X 上使用 ROR 时遇到了同样的问题。（每个人都建议我迁移到 LINUX/UNIX）

与其安装 Heroku Toolbet（它会破坏已经安装的 ruby​​ 和 rails），不如安装 heroku gem 和 foreman gem。

```
gem install heroku

gem install foreman 
```

然后，您可以轻松使用它。

# php - 这个 iCal 日历有什么问题？

> ID：14085326
> 
> 赞同：2
> 
> 时间：2012-12-29T19:49:18.553
> 
> 标签：php, icalendar

我编写了一个脚本来根据我数据库中的事件生成 iCal 日历。这是一个示例输出：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//hacksw/handcal//NONSGML v1.0//EN
BEGIN:VEVENT
ORGANIZER;CN=Blodgruppen
DTSTART:20130128T173000Z
DTEND: 20130128T193000Z
SUMMARY: Su-möte
END:VEVENT
BEGIN:VEVENT
ORGANIZER;CN=F-styret
DTSTART:20130128T173000Z
DTEND: 20130128T193000Z
SUMMARY: Su-möte
END:VEVENT
BEGIN:VEVENT
ORGANIZER;CN=Blodgruppen
DTSTART:20130412T100000Z
DTEND: 20130414T180000Z
SUMMARY: KTH
END:VEVENT
BEGIN:VEVENT
ORGANIZER;CN=F-styret
DTSTART:20130412T100000Z
DTEND: 20130414T180000Z
SUMMARY: KTH
END:VEVENT
END:VCALENDAR 
```

当我尝试在 iCal 中订阅它时，它说该文件无效。有谁知道为什么？

另外，有谁知道我是否会因为我的文件结尾是 .php 而不是 .ics 而在某个地方遇到问题？

（如果有帮助，我通过查看维基百科上的示例构建了上述内容：[http](http://en.wikipedia.org/wiki/ICalendar#Core_object) ://en.wikipedia.org/wiki/ICalendar#Core_object ）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:27:18.030

回到基础，你不能上传你的 PHP 脚本，一些日历客户端允许你订阅一个 URL 来获取 iCal 提要，确保这是你正在做的并且你没有尝试上传 PHP 脚本文件。

如果没问题，那么我们可以查看定义。根据[文档](https://www.rfc-editor.org/rfc/rfc5545#section-3.8.4.3 "RFC 5545 第 3.8.4.3 节。 组织者")，`ORGANIZER`参数是可选的，如果包含它，它必须有一个冒号`:`和一个*cal-address*，它必须是一个*URI*。您的`ORGANIZER`字段如下所示：

```
ORGANIZER;CN=Blodgruppen 
```

它们应该如下所示：

```
ORGANIZER;CN=Blodgruppen:URI 
```

如果*URI*不一定是*mailto*，[这里有一些例子](https://www.rfc-editor.org/rfc/rfc3986#section-1.1.2 "RFC 3986 第 1.1.2 节。 例子")。为方便起见，可以像这样添加电子邮件地址...

```
ORGANIZER;CN=Blodgruppen:MAILTO:bob@b.com 
```

或者电话号码...

```
ORGANIZER;CN=Blodgruppen:TEL:+49-01234-56789 
```

您可以包含一个 ftp URL 网络以及其他一些较少使用的东西。或者，该参数不是必需的，因此您可以简单地删除它。

此外，似乎`VEVENT`缺少 a`UID`和 a`DTSTAMP`这是必需的属性。

`UID`可以是您选择的标识符，但它应该是全局唯一的。我将花点时间通过描述参数的含义来解释全局唯一性的含义`UID`。日历客户端将使用它来识别事件，如果您使用日历中已经存在的事件的 id，它将更新该事件，认为您的意思是让它这样做，因此它不能与现有事件的 id 匹配. 如果您考虑将事件添加到可能还包含事件的许多不同日历客户端，这就是它必须“全局”唯一的原因。`uniqid()`您可以在 PHP 中使用一个函数，它可能有助于创建您自己的全局唯一标识符。

`DTSTAMP`是事件创建或上次更新的时间。

您定义中的空格不一致，文档没有讨论参数和值之间的空格，但所有示例都显示没有空格，因此您可能还想删除任何非必要的空格...

```
DTEND: 20130128T193000Z 
```

成为...

```
DTEND:20130128T193000Z 
```

它可能不会受到伤害，但有可能。我也会开始尝试使用最少参数的一个事件，以检查它是否是导致问题的 iCal 定义。

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//hacksw/handcal//NONSGML v1.0//EN
BEGIN:VEVENT
UID:20121229T212000Z-test-1
DTSTAMP:20121229T212000Z
DTSTART:20130128T173000Z
DTEND:20130128T193000Z
END:VEVENT
END:VCALENDAR 
```

您可能想检查您的 PHP 脚本是否也使用了正确的 mime-type `text/calendar`。如果不是，您可以`Content-Type`使用以下函数将标头添加到响应中`header`：

```
 header("Content-Type: text/calendar"); 
```

我希望这有帮助...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-17T13:32:45.277

为了将来使用，这里有一些在线 icalendar 验证器：

*   [icalendar.org](http://icalendar.org/component/com_icalvalidator/Itemid,150/view,validator/)
*   [severinghaus.org](http://severinghaus.org/projects/icv/)

icalendar.org 在您的样本中报告了这些错误：

错误

```
Missing DTSTAMP property near line # 4Reference: RFC 5545 3.6.1\. Event Component
Missing UID property near line # 4Reference: RFC 5545 3.6.1\. Event Component
Invalid DTEND value, must be a date or date-time value near line # 4Reference: 3.3.5\. Date-Time
Missing DTSTAMP property near line # 10Reference: RFC 5545 3.6.1\. Event Component
Missing UID property near line # 10Reference: RFC 5545 3.6.1\. Event Component
Invalid DTEND value, must be a date or date-time value near line # 10Reference: 3.3.5\. Date-Time
Missing DTSTAMP property near line # 16Reference: RFC 5545 3.6.1\. Event Component
Missing UID property near line # 16Reference: RFC 5545 3.6.1\. Event Component
Invalid DTEND value, must be a date or date-time value near line # 16Reference: 3.3.5\. Date-Time
Missing DTSTAMP property near line # 22Reference: RFC 5545 3.6.1\. Event Component
Missing UID property near line # 22Reference: RFC 5545 3.6.1\. Event Component
Invalid DTEND value, must be a date or date-time value near line # 22Reference: 3.3.5\. Date-Time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:53:47.777

您可以将 ics 文件导入谷歌日历进行测试，

你会发现其中一个借口是，你应该在每个事件中都有 UID 属性，

然后，您可以轻松地将这些事件放入谷歌日历

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T19:51:48.540

iCal 目前不支持 PHP 文件，但您可以在此处阅读，有一个方便的转换工具[将 iCal 日历导入 MySQL 数据库](https://stackoverflow.com/questions/8908066/importing-ical-calendar-into-mysql-database)

# java - RSA 加密解密：BadPaddingException：数据必须从零开始

> ID：14085333
> 
> 赞同：3
> 
> 时间：2012-12-29T19:50:00.143
> 
> 标签：java, encryption, cryptography, rsa

对于一个被问了很多次的问题，我很抱歉问你的技能。我有一个关于 RSA 加密的问题。我已经检查了有关此问题的其他主题，但没有找到任何有用的答案。我希望你能帮助我。

我想读取一个文件，加密它的包含然后解密它并将这些解密的字节放入一个新文件中。

我实际上可以： - 获取文件的字节 - 加密它

我有一个例外：javax.crypto.BadPaddingException：数据必须从零开始。

这是我的代码：

```
 package com.bodom.ghosty;

    import javax.crypto.BadPaddingException;
    import javax.crypto.Cipher;
    import javax.crypto.IllegalBlockSizeException;
    import javax.crypto.NoSuchPaddingException;
    import java.io.*;
    import java.math.BigInteger;
    import java.nio.ByteBuffer;
    import java.nio.channels.FileChannel;
    import java.nio.file.Files;
    import java.nio.file.Path;
    import java.nio.file.Paths;
    import java.security.*;
    import java.security.spec.InvalidKeySpecException;
    import java.security.spec.RSAPrivateKeySpec;
    import java.security.spec.RSAPublicKeySpec;
    import java.util.Scanner;

    public class EncryptionUtil {
        private final PrivateKey privateKey;
        private final PublicKey publicKey;

        /**
         * Build an EncryptionUtil object
         *
         * @param keyPair The KeyPair used for Ghosty
         */
        public EncryptionUtil (KeyPair keyPair) {
            this.privateKey = keyPair.getPrivate();
            this.publicKey = keyPair.getPublic();
        }

        /**
         * Generate a pair of RSA keys
         *
         * @return A keypair of RSA keys
         * @throws NoSuchAlgorithmException
         */
        private static KeyPair keyGenerate() throws NoSuchAlgorithmException {
            KeyPairGenerator keyGen = KeyPairGenerator.getInstance("RSA");
            keyGen.initialize(2048);
            return keyGen.genKeyPair();
        }

        /**
         * Crypt data
         *
         * @param data      Data to encrypt
         * @return          The crypted data
         * @throws NoSuchAlgorithmException
         * @throws NoSuchPaddingException
         * @throws InvalidKeyException
         * @throws IllegalBlockSizeException
         * @throws BadPaddingException
         */
        private static byte[] rsaEncryption(byte[] data, EncryptionUtil encryptionUtil) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
            Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
            cipher.init(Cipher.ENCRYPT_MODE, encryptionUtil.publicKey);
            return cipher.doFinal(data);
        }

        /**
         * Read the bytes of a file
         *
         * @param file is the file to read
         * @return     the bytes of the file
         * @throws IOException
         */
        private static byte[] readBytesInFile (Path file) throws IOException {
            byte[] result = new byte[(int)Files.size(file)];
            try {
                try (InputStream inputStream = new BufferedInputStream(new FileInputStream(file.getFileName().toString()))) {
                    int bytesRead = 0;
                    while (bytesRead < result.length) {
                        int bytesLeft = result.length - bytesRead;
                        int bytesGet = inputStream.read(result, bytesRead, bytesLeft);
                        if (bytesGet > 0) {
                            bytesRead += bytesGet;
                        }
                    }
                }
            } catch (IOException e) {
                System.out.println(e);
            }
            return result;
        }

        /**
         * Encrypt a file
         *
         * @param file      Path of the file to crypt
         * @return          A byte array which contains the crypted lines of the file
         * @throws java.io.IOException
         * @throws javax.crypto.IllegalBlockSizeException
         * @throws java.security.InvalidKeyException
         * @throws javax.crypto.BadPaddingException
         * @throws java.security.NoSuchAlgorithmException
         * @throws javax.crypto.NoSuchPaddingException
         */
        public static byte[] encryption (Path file, EncryptionUtil encryptionUtil) throws IOException, IllegalBlockSizeException, InvalidKeyException, BadPaddingException, NoSuchAlgorithmException, NoSuchPaddingException {
            byte[] datatocrypt = readBytesInFile(file);
            int offset = 0;
            byte[] cryptedfile = null;

            while (offset < datatocrypt.length) {
                byte[] outputBytes;
                byte[] tmp;

                if(datatocrypt.length - offset < 200 ) {
                    outputBytes = new byte[datatocrypt.length - offset];
                    System.arraycopy(datatocrypt, offset, outputBytes, 0, datatocrypt.length - offset);

                    byte[] crypt = rsaEncryption(outputBytes, encryptionUtil);

                    tmp = cryptedfile;
                    if (tmp != null) {
                        cryptedfile = new byte[tmp.length + crypt.length];
                    }
                    else cryptedfile = new byte[crypt.length];

                    if (tmp != null) {
                        System.arraycopy(tmp, 0, cryptedfile, 0, tmp.length);
                        System.arraycopy(crypt, 0, cryptedfile, tmp.length, crypt.length);
                    }
                    else {
                        System.arraycopy(crypt, 0, cryptedfile, 0, crypt.length);
                    }
                    break;
                }

                outputBytes = new byte[200];
                System.arraycopy(datatocrypt, offset, outputBytes, 0, 200);

                byte[] crypt = rsaEncryption(outputBytes, encryptionUtil);

                tmp = cryptedfile;
                if (tmp != null) {
                    cryptedfile = new byte[tmp.length + crypt.length];
                }
                else cryptedfile = new byte[crypt.length];

                if (tmp != null) {
                    System.arraycopy(tmp, 0, cryptedfile, 0, tmp.length);
                    System.arraycopy(crypt, 0, cryptedfile, tmp.length, crypt.length);
                }
                else {
                    System.arraycopy(crypt, 0, cryptedfile, 0, crypt.length);
                }

                offset += 200 ;
            }
            return cryptedfile;
        }

        /**
         * Decrypt data
         *
         * @param crypteddata Crypted data to decrypt
         * @return            The decrypted data
         * @throws NoSuchAlgorithmException
         * @throws NoSuchPaddingException
         * @throws InvalidKeyException
         * @throws IllegalBlockSizeException
         * @throws BadPaddingException
         */
        private static byte[] rsaDecryption(byte[] crypteddata, EncryptionUtil encryptionUtil) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
            Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
            cipher.init(Cipher.DECRYPT_MODE, encryptionUtil.privateKey);
            return cipher.doFinal(crypteddata);
        }

        /**
         * Decrypt a file
         *
         * @param file       Path of the file to decrypt
         * @return           A byte array which contains the decrypted lines of the file
         * @throws IOException
         * @throws IllegalBlockSizeException
         * @throws InvalidKeyException
         * @throws BadPaddingException
         * @throws NoSuchAlgorithmException
         * @throws NoSuchPaddingException
         */
        public static byte[] decryption(Path file, EncryptionUtil encryptionUtil) throws IllegalBlockSizeException, InvalidKeyException, BadPaddingException, NoSuchAlgorithmException, NoSuchPaddingException, IOException {
            byte[] crypteddata = readBytesInFile(file);
            int offset = 0;
            byte[] decryptedfile = null;

            while (offset < crypteddata.length) {
                byte[] outputBytes;
                byte[] tmp;

                if(crypteddata.length - offset < 200 ) {
                    outputBytes = new byte[crypteddata.length - offset];
                    System.arraycopy(crypteddata, offset, outputBytes, 0, crypteddata.length - offset);

                    byte[] decrypt = rsaDecryption(outputBytes, encryptionUtil);

                    tmp = decryptedfile;
                    if (tmp != null) {
                        decryptedfile = new byte[tmp.length + decrypt.length];
                    }
                    else decryptedfile = new byte[decrypt.length];

                    if (tmp != null) {
                        System.arraycopy(tmp, 0, decryptedfile, 0, tmp.length);
                        System.arraycopy(decrypt, 0, decryptedfile, tmp.length, decrypt.length);
                    }
                    else {
                        System.arraycopy(decrypt, 0, decryptedfile, 0, decrypt.length);
                    }
                    break;
                }

                outputBytes = new byte[200];
                System.arraycopy(crypteddata, offset, outputBytes, 0, 200);

                byte[] decrypt = rsaDecryption(outputBytes, encryptionUtil);

                tmp = decryptedfile;
                if (tmp != null) {
                    decryptedfile = new byte[decrypt.length + tmp.length];
                }
                else decryptedfile = new byte[decrypt.length];

                if (tmp != null) {
                    System.arraycopy(tmp, 0, decryptedfile, 0, tmp.length);
                    System.arraycopy(decrypt, 0, decryptedfile, tmp.length, decrypt.length);
                }
                else {
                    System.arraycopy(decrypt, 0, decryptedfile, 0, decrypt.length);
                }
                offset +=200 ;
            }
            return decryptedfile;
        }

        /**
         * Save a key in a file
         *
         * @param modulus  Modulus of the key to save
         * @param exponent Exponent of the key to save
         * @param filename File used to save the keys
         * @throws IOException
         * @throws NoSuchAlgorithmException
         */
        private static void saveKeyToFile (BigInteger modulus, BigInteger exponent, String filename) throws IOException, NoSuchAlgorithmException {
            Path path = Paths.get(filename);
            if(!Files.exists(path)) {
                Files.createFile(path);
            }

            try (ObjectOutputStream objectOutputStream = new ObjectOutputStream(new FileOutputStream(filename))) {
                objectOutputStream.writeObject(modulus);
                objectOutputStream.writeObject(exponent);
            }
        }

        /**
         * Save a KeyPair in two files
         *
         * @throws NoSuchAlgorithmException
         * @throws InvalidKeySpecException
         * @throws FileNotFoundException
         * @throws IOException
         */
        public static void saveKeyPair(EncryptionUtil encryptionUtil, String directorypath) throws NoSuchAlgorithmException, InvalidKeySpecException, IOException {
            KeyFactory keyFactory = KeyFactory.getInstance("RSA");

            RSAPublicKeySpec rsaPublicKeySpec = keyFactory.getKeySpec(encryptionUtil.publicKey, RSAPublicKeySpec.class);
            saveKeyToFile(rsaPublicKeySpec.getModulus(), rsaPublicKeySpec.getPublicExponent(), directorypath + "/public.key");

            RSAPrivateKeySpec rsaPrivateKeySpec = keyFactory.getKeySpec(encryptionUtil.privateKey, RSAPrivateKeySpec.class);
            saveKeyToFile(rsaPrivateKeySpec.getModulus(), rsaPrivateKeySpec.getPrivateExponent(), directorypath + "/private.key");
        }

        /**
         * Get a PublicKey from a file
         *
         * @param filename File where the PublicKey is saved
         * @return         The PublicKey get in the file
         * @throws IOException
         * @throws ClassNotFoundException
         * @throws NoSuchAlgorithmException
         * @throws InvalidKeySpecException
         */
        private static PublicKey getPublicKeyFromFile (String filename) throws IOException, ClassNotFoundException, NoSuchAlgorithmException, InvalidKeySpecException {
            try (ObjectInputStream objectInputStream = new ObjectInputStream(new FileInputStream(filename))) {
                BigInteger modulus = (BigInteger) objectInputStream.readObject();
                BigInteger exponent = (BigInteger) objectInputStream.readObject();

                RSAPublicKeySpec rsaPublicKeySpec = new RSAPublicKeySpec(modulus, exponent);
                KeyFactory keyFactory = KeyFactory.getInstance("RSA");
                return keyFactory.generatePublic(rsaPublicKeySpec);
            }
        }

        /**
         * Get a PrivateKey from a file
         *
         * @param filename File where the PrivateKey is saved
         * @return         The PrivateKey get in the file
         * @throws IOException
         * @throws ClassNotFoundException
         * @throws NoSuchAlgorithmException
         * @throws InvalidKeySpecException
         */
        private static PrivateKey getPrivateKeyFromFile (String filename) throws IOException, ClassNotFoundException, NoSuchAlgorithmException, InvalidKeySpecException {
            try (ObjectInputStream objectInputStream = new ObjectInputStream(new FileInputStream(filename))) {
                BigInteger modulus = (BigInteger) objectInputStream.readObject();
                BigInteger exponent = (BigInteger) objectInputStream.readObject();

                RSAPrivateKeySpec rsaPrivateKeySpec = new RSAPrivateKeySpec(modulus, exponent);
                KeyFactory keyFactory = KeyFactory.getInstance("RSA");
                return keyFactory.generatePrivate(rsaPrivateKeySpec);
            }
        }

        /**
         * Get the RSA keypair from the files
         *
         * @return The Keypair which contains the public and the private key
         * @throws IOException
         * @throws ClassNotFoundException
         * @throws NoSuchAlgorithmException
         * @throws InvalidKeySpecException
         */
        public static KeyPair getKeysFromFiles (String directorypath) throws IOException, ClassNotFoundException, NoSuchAlgorithmException, InvalidKeySpecException{
            PublicKey publicKey = getPublicKeyFromFile(directorypath + "/public.key");
            PrivateKey privateKey = getPrivateKeyFromFile(directorypath + "/private.key");
            return new KeyPair(publicKey, privateKey);
        }

        public static void main(String[] args) {
            EncryptionUtil encryptionUtil = null;

            Scanner scanner = new Scanner(System.in);
            System.out.println("Path of the keys :");
            String path = scanner.nextLine();

            try {
                encryptionUtil = new EncryptionUtil(EncryptionUtil.keyGenerate());
            } catch (NoSuchAlgorithmException e) {
                e.printStackTrace();
            }

            Path directorypath = Paths.get(path);
            try {
                Files.createDirectories(directorypath);
            } catch (IOException e) {
                e.printStackTrace();
            }

            try {
                saveKeyPair(encryptionUtil, path);
            } catch (NoSuchAlgorithmException | InvalidKeySpecException| IOException e) {
                System.out.println("Error during the storage of the keys : " + e);
            }

            // Crypt part
            byte[] uncrypt;
            try {
                if (encryptionUtil != null) {
                    if (encryptionUtil.publicKey != null && encryptionUtil.privateKey != null) {
                        //Cryptage
                        byte[] crypt = encryption(Paths.get("filetocrypt"), encryptionUtil);

                        FileOutputStream fileOutputStream = new FileOutputStream("cryptedfile");
                        FileChannel channel = fileOutputStream.getChannel();
                        ByteBuffer byteBuffer = ByteBuffer.allocate(crypt.length * 2);
                        byteBuffer.put(crypt);
                        byteBuffer.flip();
                        channel.write(byteBuffer);
                        channel.close();

                        //Decryptage
                        uncrypt = decryption(Paths.get("cryptedfile"), encryptionUtil);

                        String v = new String(uncrypt);
                        System.out.println("END " + v);
                    }
                }
            } catch (InvalidKeyException | NoSuchAlgorithmException
                    | NoSuchPaddingException | IllegalBlockSizeException
                    | BadPaddingException | IOException e) {
                e.printStackTrace();
            }
        }
    } 
```

我读到，当使用错误的私钥解密或滥用密码时，通常会出现这个问题。但我不认为这里是这种情况，或者我没有看到它......我不知道我的代码有什么问题。要运行此代码，您需要一个名为“filetocrypt”的文件。我使用 bytes[] 并将它们拆分以加密和解密文件，以避开 RSA 的字节大小问题。这种拆分效果很好（我在不使用 RSA 算法的情况下尝试了带有字符串的文件）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T21:44:15.413

您的解密代码需要与您的加密代码不同。有很多问题，但导致您的错误的问题如下。由于 RSA 填充，您的输入块为 200 字节，输出块为 256 字节。因此，在解密时，您需要一次读取 256 个字节并期望得到 200 个字节。相反，您一次只能读取 200 个字节。

```
import java.security.*;
import java.security.interfaces.*;
import javax.crypto.Cipher;

public class RsaToy {

    public static void main(String[] args) throws Exception {
        KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
        kpg.initialize(1024);
        KeyPair kp = kpg.generateKeyPair();
        RSAPublicKey pub = (RSAPublicKey) kp.getPublic();
        RSAPrivateKey priv = (RSAPrivateKey) kp.getPrivate();

        Cipher c = Cipher.getInstance("RSA/ECB/PKCS1PADDING");
        c.init(Cipher.ENCRYPT_MODE, pub);

        byte [] plain = new byte[100]; // initialize to all zero bytes

        // First encrypt: length of input (plain) is 100

        byte [] cipher = c.doFinal(plain);

        System.out.println("length of cipher is " + cipher.length);

        // Now decrypt: length of input(cipher) is 128;

        c.init(Cipher.DECRYPT_MODE, priv);

        byte [] decrypted_cipher = c.doFinal(cipher);

        System.out.println("length of decrypted cipher is " + decrypted_cipher.length);
    }
} 
```

所以，在你的解密方法中，把3中出现的200改一下？？位置到 256。你真的不应该对这些常量进行硬编码。

# list - 基于字符串从列表中提取信息，而不是 Emacs 中的项目位置

> ID：14085334
> 
> 赞同：2
> 
> 时间：2012-12-29T19:50:04.090
> 
> 标签：list, emacs

我想从初始帧列表中选择值，即宽度后的数字：

初始帧列表`evals`到`"((top . 1) (left . 1) (width . 50) (height . 30)))"`

我想从宽度中提取 50。问题是对于其他人来说，这个设置可能会有所不同，即宽度将是第一个而不是第三个项目（因此`car`等将不起作用；位置可以不同。

如何从列表中选择部分（宽度。50）（可能基于字符串“宽度”），之后可以选择第二项？

更说明性的例子：

`(car initial-frame-alist)`评估为`(top . 1)`

`(car (car initial-frame-alist))`评估为`top`

编辑：也可以不关心列表结构，而是将其视为一个字符串，尽管我也不知道如何去做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:03:47.820

```
(cdr (assoc 'width initial-frame-alist)) 
```

`assoc`是与 alist 一起走的路；它不同于任何列表；它是一个关联列表。

# python - 将 check_call 语句转换为 subprocess.Popen

> ID：14085337
> 
> 赞同：2
> 
> 时间：2012-12-29T19:50:40.563
> 
> 标签：python, subprocess

我在将 check_call 语句转换为 subprocess.Popen 时遇到了以下错误，我想我在搞砸“&&”，有人可以帮忙解决它吗？

```
check_call("git fetch ssh://username@company.com:29418/platform/vendor/company-proprietary/radio %s && git cherry-pick FETCH_HEAD" % change_ref , shell=True)
proc = subprocess.Popen(['git', 'fetch', 'ssh://username@company.com:29418/platform/vendor/company-proprietary/radio', change_ref , '&& git' , 'cherry-pick', 'FETCH_HEAD'], stderr=subprocess.PIPE)

Error:-

fatal: Invalid refspec '&& git 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:53:23.047

`&&`是一个外壳功能。分别运行命令：

```
proc = subprocess.Popen(['git', 'fetch', 'ssh://username@company.com:29418/platform/vendor/company-proprietary/radio', change_ref], stderr=subprocess.PIPE)
out, err = proc.communicate()  # Wait for completion, capture stderr

# Optional: test if there were no errors
if not proc.returncode:
    proc = subprocess.Popen(['git' , 'cherry-pick', 'FETCH_HEAD'], stderr=subprocess.PIPE)
    out, err = proc.communicate() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T19:56:28.620

```
rc = Popen("cmd1 && cmd2", shell=True).wait()
if rc != 0:
   raise Error(rc) 
```

或者

```
rc = Popen(["git", "fetch", "ssh://...", change_ref]).wait()
if rc != 0:
   raise Error("git fetch failed: %d" % rc)
rc = Popen("git cherry-pick FETCH_HEAD".split()).wait()
if rc != 0:
   raise Error("git cherry-pick failed: %d" % rc) 
```

捕捉`stderr`：

```
proc_fetch = Popen(["git", "fetch", "ssh://...", change_ref], stderr=PIPE)
stderr = proc_fetch.communicate()[1]
if p.returncode == 0: # success
   p = Popen("git cherry-pick FETCH_HEAD".split(), stderr=PIPE)
   stderr = p.communicate()[1]
   if p.returncode != 0: # cherry-pick failed
      # handle stderr here
      ...
else: # fetch failed
    # handle stderr here
    ... 
```

# javascript - 为什么我的函数没有执行我的全局变量？

> ID：14085338
> 
> 赞同：1
> 
> 时间：2012-12-29T19:50:42.667
> 
> 标签：javascript

```
<script type="text/javascript">

  var number = "10";

  (function(){
    alert(number);    
    alert(eval('number=22'));

  })();

  var func = function() {
      alert (new Function( 'return (' + number + ')' )());
  }

  func(); // prints 22.

</script> 
```

它首先发出警报`10`，然后发出警报，`22`然后为什么会发出警报`22 again instead of 10`。eval 函数是否会在全局范围内覆盖我的变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T19:52:49.447

不，`eval`不在全局范围内执行，但您没有`number`在本地范围内命名的变量。所以你正在改变全局。

你可能会看到这个小小的变化：

```
(function(){
  var number; // this will ensure the global number isn't changed
  alert(number);  // this will print "undefined"
  alert(eval('number=22')); // this won't change the global variable
})(); 
```

请注意，`alert(eval('number=22'));`返回评估结果并`number=22`返回`22`. 这就是第二个警报给出的原因`22`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:04:42.750

由于您在本地范围内没有变量，因此它会更改全局变量。试试下面这个。它将打印 100 而不是 22。

```
<script type="text/javascript">

  var number = 100;

  (function(){
    var number;
    alert(number);    
    alert(eval('number=22'));

  })();

  function func() {
      alert (new Function( 'return (' + number + ')' )());
  }

  func();

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:01:05.620

## 评估是邪恶的

[不要使用它](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)。

如果您删除 eval 的使用，正在发生的事情可能会更明显 - 您正在重新定义`number`第一个匿名函数内的全局变量的值：

```
var number = "10";

(function(){
    number = 22; // this is a reference to the global variable `number`
})();

var func = function() {
    alert (new Function( 'return (' + number + ')' )()); // this is another use of eval - don't do this
}

func(); // prints 22 - expected. 
```

# r - R-package lavaan（结构方程建模） - 如何访问潜在变量的估计值？

> ID：14085339
> 
> 赞同：3
> 
> 时间：2012-12-29T19:51:08.760
> 
> 标签：r

假设我在*lavaan*中适合这样的模型：

```
# model
model <- '
  L1 =~ x1 + x2
'  
# fit & summary
fit <- lavaan(model=model1, model.type="sem", data=PE_test)
summary(fit) 
```

如何访问每个案例的潜在变量 (L1) 的估计值？我一直在寻找某种*fit$coeff*使用*str(fit)*但到目前为止我还没有成功。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-20T21:43:21.463

该`predict`函数将返回潜在变量得分估计。例如，

`LatentScoreEstimates <- predict(fit)`

# c# - 如何使用 linq 优化嵌套的 for 循环

> ID：14085340
> 
> 赞同：1
> 
> 时间：2012-12-29T19:51:11.870
> 
> 标签：c#, linq, optimization, linq-to-entities

我将如何用 linq 写这个？

```
foreach (var to in allCurrentTradeObjects)
{
    foreach (var ro in theseWantMe)
    {
        if (ro.Type != to.Type
                || ro.MaxRent < to.Rent
                || ro.MinRooms > to.Rooms
                || ro.MinSquareMeters > to.SquareMeters
                || ro.MaxPrice < to.Price
                || ro.MinFloors > to.Floors
                || ro.TradeObjectId == to.TradeObjectId
                || ro.TradeObjectId == myTradeObject.TradeObjectId)
        {
            continue;
        }
        RatingListTriangleModel rlt = new RatingListTriangleModel
        {
            To1Id = myTradeObject.TradeObjectId,
            To2Id = to.TradeObjectId,
            To3Id = ro.TradeObjectId,
            T1OnT2Rating = 0,
            T2OnT3Rating = 0,
            T3OnT1Rating = 0,
            TotalRating = 0
        };

        //_context.RatingListTriangle.Add(rlt);
        this.InsertOrUpdate(rlt);

    }
}
this.Save(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T19:59:02.710

```
var query = from to in allCurrentTradeObjects
            from ro in theseWantMe
            where ro.Type == to.Type &&
                  ro.MaxRent >= to.Rent &&
                  ro.MinRooms <= to.Rooms &&
                  ro.MinSquareMeters <= to.SquareMeters &&
                  ro.MaxPrice >= to.Price &&
                  ro.MinFloors <= to.Floors &&
                  ro.TradeObjectId != to.TradeObjectId &&
                  ro.TradeObjectId != myTradeObject.TradeObjectId
            select new RatingListTriangleModel
            {
                To1Id = myTradeObject.TradeObjectId,
                To2Id = to.TradeObjectId,
                To3Id = ro.TradeObjectId,
                T1OnT2Rating = 0,
                T2OnT3Rating = 0,
                T3OnT1Rating = 0,
                TotalRating = 0
            };

foreach(var rlt in query)
   this.InsertOrUpdate(rlt);

this.Save(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T20:03:54.650

首先将嵌套循环的骨架转换为 LINQ：

```
 var rtls = allCurrentTradeObjects
     .SelectMany(to => theseWantMe.Select(ro => new {to, ro})); 
```

这为您提供了对列表`{to, ro}`。现在通过反转`continue`条件添加过滤：

```
 var rtls = allCurrentTradeObjects
     .SelectMany(to => theseWantMe.Select(ro => new {to, ro}));
     .Where(p => p.ro.Type == p.to.Typpe && p.ro.MaxRent >= p.to.Rent && ...) 
```

最后，添加一个`Select`调用`new：

```
 var rtls = allCurrentTradeObjects
     .SelectMany(to => theseWantMe.Select(ro => new {to, ro}));
     .Where(p => p.ro.Type == p.to.Typpe && p.ro.MaxRent >= p.to.Rent && ...)
    .Select(p => new RatingListTriangleModel {
        To1Id = myTradeObject.TradeObjectId,
        To2Id = p.to.TradeObjectId,
        To3Id = p.ro.TradeObjectId,
        ...
    }); 
```

有了`rtls`列表，您可以`InsertOrUpdate`循环调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T20:03:46.257

以下是方法语法。

```
allCurrentTradeObjects.Select (
            to => to.theseWantMe.Where ( ro => !(ro.Type != to.Type 
                || ro.MaxRent < to.Rent
                || ro.MinRooms > to.Rooms
                || ro.MinSquareMeters > to.SquareMeters
                || ro.MaxPrice < to.Price
                || ro.MinFloors > to.Floors
                || ro.TradeObjectId == to.TradeObjectId
                || ro.TradeObjectId == myTradeObject.TradeObjectId))
               .Select({
                             var rlt =  new RatingListTriangleModel
                              {
                                 To1Id = myTradeObject.TradeObjectId,
                                 To2Id = to.TradeObjectId,
                                 To3Id = ro.TradeObjectId,
                                 T1OnT2Rating = 0,
                                 T2OnT3Rating = 0,
                                 T3OnT1Rating = 0,
                                TotalRating = 0
                            };
                           this.InsertOrUpdate(rlt);
                           return rlt;
                         } ).ToArray();
 this.Save(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T03:36:26.193

这里有很多提倡 SelectMany （或 double from）的答案。这些是“优化可读性”的答案，因为它们不会更改此操作的 N*M 嵌套循环性能。

如果两个集合都很大，则不应使用该方法。相反，您应该利用两个集合之间定义明确的关系以及 Enumerable.Join 中的散列来将操作减少到 N+M。

```
var myTradeObject = GetThatOneObject();

IEnumerable<RatingListTriangleModel> query =
  from to in allCurrentTradeObjects
 //pre-emptively filter to the interesting objects in the first collection
  where to.TradeObjectId == myTradeObject.TradeObjectId
 //take advantage of hashing in Enumerable.Join - theseWantMe is enumerated once
  join ro in theseWantMe
    on to.Type equals ro.Type
 //remaining matching criteria
  where to.Rent <= ro.MaxRent   //rent is lower than max
    && ro.MinRooms <= to.Rooms   //rooms are higher than min
    && ro.MinSquareMeters <= to.SquareMeters  //area is higher than min
    && to.Price <= ro.MaxPrice     //price is lower than max
    && ro.MinFloors <= to.Floors   // floors are higher than min
    && to.TradeObjectId != ro.TradeObjectId //not same trade object
  select CreateRatingListTriangleModel(myTradeObject, to, ro);

foreach(RatingListTriangleModel row in query)
{
  this.InsertOrUpdate(row);
}
this.Save(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-29T20:33:14.723

为了增加可读性，我将首先重构复杂的条件并将其移动到一个简洁的小函数（它也可以是对象的方法）

```
private bool IsMatchingTradeObject (TradeObject to, SomeOtherObject ro, int TradeObjectId)
{
  return ro.Type == to.Type &&
                  ro.MaxRent >= to.Rent &&
                  ro.MinRooms <= to.Rooms &&
                  ro.MinSquareMeters <= to.SquareMeters &&
                  ro.MaxPrice >= to.Price &&
                  ro.MinFloors <= to.Floors &&
                  ro.TradeObjectId != to.TradeObjectId &&
                  ro.TradeObjectId != TradeObjectId;
} 
```

其次，我会对 . 的创建和初始化做同样的事情，`RatingListTriangleModel`即将它移动到一个小方法并给它一个有意义的名称。

```
private RatingListTriangleModel CreateModel(TradeObject to, SomeOtherObject ro, int TradeObjectId)
{
  return new RatingListTriangleModel
    {
        To1Id = myTradeObject.TradeObjectId,
        To2Id = to.TradeObjectId,
        To3Id = ro.TradeObjectId,
        T1OnT2Rating = 0,
        T2OnT3Rating = 0,
        T3OnT1Rating = 0,
        TotalRating = 0
    }; 
```

剩下的代码更容易阅读

```
 foreach (var to in allCurrentTradeObjects)
     foreach (var ro in theseWantMe)
       if (IsMatchingTradeObject(to, ro, myTradeObject.TradeObjectId))
         this.InsertOrUpdate(CreateModel(to, ro, myTradeObject.TradeObjectId));

this.Save(); 
```

将其转换为 LINQ 很容易：

```
allCurrentTradeObjects.Select (
  to => to.Where ( 
    ro => IsMatchingTradeObject (to, ro, myTradeObject.TradeObjectId)
    )
  ).Select(
     {
       this.InsertOrUpdate(CreateModel(to, ro, myTradeObject.TradeObjectId));
       return null;
     } 
  );
 this.Save(); 
```

但是，foreach 循环似乎更易于阅读。

# facebook - 移动广告安装跟踪 - 获取广告系列名称和广告名称

> ID：14085342
> 
> 赞同：1
> 
> 时间：2012-12-29T19:51:32.993
> 
> 标签：facebook, mobile, installation, tracking, ads

在用户安装我的应用并在我的系统中注册后，我希望能够跟踪移动广告安装。我知道我需要使用 publishInstall (Android) 来通知 Facebook 以跟踪安装次数，但是我找不到从 Facebook 每台设备获取活动和广告名称的方法，有没有办法获取每次设备安装时来自 Facebook 的广告系列和广告名称/ID？

# java - 如何使用 JSP 和 JAVA 读取 URL

> ID：14085343
> 
> 赞同：0
> 
> 时间：2012-12-29T19:51:37.257
> 
> 标签：java, jsp

我有一个关于 JAVA 的查询（直接从 URL 中读取）。我想从 URL 中读取内容。我刚刚在 JAVA 中实现了一个代码，它运行良好。但我希望该代码在 JSP 中实现。我尝试在 JSP 页面上使用它，但它不读取 URL 的内容。请帮帮我。

**JAVA代码**

```
import java.net.*;
import java.io.*;

public class URLReader {
    public static void main(String[] args) throws Exception {

        URL oracle = new URL("http://www.oracle.com/");
        BufferedReader in = new BufferedReader(
        new InputStreamReader(oracle.openStream()));

        String inputLine;
        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);
        in.close();
    }
} 
```

**JSP 代码**

```
<%@ page import="java.sql.*,java.net.*,java.io.*,java.lang.*,java.util.*"%>
<html>
<title></title>
<head></head>
<body>

<%
try{
    URL oracle = new URL("http://www.oracle.com/");
    BufferedReader in = new BufferedReader(
    new InputStreamReader(oracle.openStream()));

    String inputLine;
    while ((inputLine = in.readLine()) != null)
        System.out.println(inputLine);
    in.close();
    }catch(Exception ex){}
%>
</body>
</html> 
```

**我正在使用 JDK1.5.0_16 和 Tomcat 3.0 版**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T20:37:19.550

您在 JSP 中的错误是以下行：

```
System.out.println(inputLine); 
```

这会将行打印到标准输出（控制台、日志文件等），而不是 HTTP 响应。

`out`使用引用响应输出流的隐式对象：

```
out.println(inputLine); 
```

或者，更好的是，只使用[JSTL](https://stackoverflow.com/tags/jstl/info) [`<c:import>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/import.html)。[十年来一直不鼓励使用](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)[*Scriptlet*](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)。

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
...
<c:import url="http://www.oracle.com" /> 
```

不要忘记首先升级您的古老（这是轻描淡写的......）服务器。鉴于您正在以老式的方式摆弄 JSP，我还想知道您在学习 JSP 时是否正在阅读正确和最新的资源。 

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:04:36.507

您可以使用[HttpClient](http://hc.apache.org/httpclient-3.x/)库，因为它非常易于用于您的任务，例如

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet("http://www.yahoo.com");
HttpResponse response = client.execute(request);

// Get the response
BufferedReader rd = new BufferedReader
  (new InputStreamReader(response.getEntity().getContent()));

String line = "";
while ((line = rd.readLine()) != null) {
  textView.append(line);
} 
```

这是一个[教程](http://www.vogella.com/articles/ApacheHttpClient/article.html)

不实现 HttpClient 对您来说是一个限制吗？还有一点我想说的是，将这种逻辑放入 JSP 脚本中是个坏主意，您应该使用一些从 URL 获取值并从 JSP 调用相同的服务类。您可以使用 setproperty 和 getproperty 标记从该外部服务加载属性

```
<jsp:useBean id="some_identifier" class="Foo.class" />

<jsp:getProperty name="some_identifier" property="SomeProperty" /> 
```

# objective-c - 如何在 UIImageView 中的某个点定位旋转的 CAShapeLayer？

> ID：14085346
> 
> 赞同：0
> 
> 时间：2012-12-29T19:51:48.213
> 
> 标签：objective-c, ios, core-animation, cashapelayer

我有以下代码使椭圆围绕其中心旋转。我希望能够将它定位`UIImageView`在某个位置（比如视图的中间）。

如果有人可以帮助我解决这个问题，我将不胜感激。

```
-(void)drawCircle
{
CGMutablePathRef circlePath = CGPathCreateMutable();
int radius = 400;
CGRect circleRect = CGRectMake(CENTER_Y-radius*0.7, CENTER_X-radius, 1.4*radius, 2*radius);
float midX = CGRectGetMidX(circleRect);
float midY = CGRectGetMidY(circleRect);

CGAffineTransform transform = CGAffineTransformMakeTranslation(-midX, -midY);
CGPathAddEllipseInRect( circlePath ,&transform , circleRect);

CAShapeLayer *circle = [[CAShapeLayer alloc] init];
circle.path = circlePath;
circle.opacity = 0.1;
circle.contentsScale = SCREEN_SCALE;
circle.fillColor = [UIColor blueColor].CGColor;

[aView.layer addSublayer:circle];
CABasicAnimation* theAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
theAnimation.fromValue = 0;
theAnimation.toValue = @(2*M_PI);
theAnimation.duration=3.5;
theAnimation.autoreverses=FALSE;
theAnimation.repeatCount=HUGE_VALF;
theAnimation.fillMode = kCAFillModeBoth;
theAnimation.removedOnCompletion=FALSE;
theAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
[circle addAnimation:theAnimation forKey:@"transform.rotation.z"];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:30:33.180

一个缺失的部分：

```
[circle setPosition:CGPointMake(CENTER_X, CENTER_Y)]; 
```

# excel - 如何删除使用数组元素添加值的空格？

> ID：14085350
> 
> 赞同：0
> 
> 时间：2012-12-29T19:52:24.480
> 
> 标签：excel, vbscript, vba

我遇到了一个`Array`值的主要问题，这些值在添加到数组时添加了空格。那么有没有办法删除这些空格意味着`Trim`在单行语句中使用它们，然后再将它们用于进一步处理，否则我需要`Trim`在每次计算中使用。那么有什么更快的过程可以在`code`?

```
Dim VMHArray
VMHArray = Array("VMH All Fields Review - Add Supplier  Emergency", _
                 "VMH All Fields Review  (Req. Provides Supplier Details) - Update/Enable Supplier", _
                 "VMH Triggered Final Sourcing Review - Add Address_Direct", _
                 "Activate / Create supplier in business system - Add Address", _
                 "Activate / Create supplier in Business System - Add Supplier") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:17:48.720

将值插入到数组中时对其进行修剪。或者，循环遍历数组，修剪每个元素并将修剪后的元素重新插入数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T20:18:31.180

你不能在初始化后清理数组吗，像这样：

```
Sub test()
   Dim a(2) As String
   a(0) = "t1"
   a(1) = "t2  "
    a(2) = "test3 "
    Dim i As Integer

    Dim trimmed As Variant

    trimmed = TrimArray(a)

     For i = 0 To UBound(trimmed)
         Debug.Print trimmed(i) + "|"
     Next

End Sub

Function TrimArray(ByRef a() As String) As Variant
    For i = 0 To UBound(a)
     a(i) = Trim(a(i))
    Next

    TrimArray = a
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T23:00:03.557

我的 VBE 不接受数组中的 350 个条目。

但是，对于 VBA，下面的代码使用简化的集合：

```
Sub main()

Dim VMHArray As Variant

VMHArray = Array("VMH All Fields Review - Add Supplier  Emergency", _
"VMH All Fields Review (Req. Provides Supplier Details) - Update/Enable Supplier", _
"VMH Triggered Final Sourcing Review - Add Address_Direct", _
"Activate - / Create supplier in business system - Add Address", _
"Activate /Create supplier in Business System - Add Supplier", _
"Activate / Create supplier in Business System -Add Supplier Emergency")

VMHArray = TrimArrayElements(VMHArray)

End Sub

Function TrimArrayElements(InputArray As Variant) As Variant

  Dim arr_element As Variant

  For Each arr_element In InputArray
    arr_element = Trim(arr_element)
  Next

End Function 
```

# search - 在 Lucene 中搜索属性值对应关系

> ID：14085354
> 
> 赞同：3
> 
> 时间：2012-12-29T19:53:07.070
> 
> 标签：search, lucene, nlp, search-engine, corpus

这是一个含糊不清的文字：“一个人看到了一头大象。”

每个单词都有属性：引理、词性和取决于其词性的各种语法属性。

对于“锯”，它就像：

{lemma：see，pos：动词，时态：过去}，{lemma：saw，pos：名词，number：单数}

所有这些属性都来自 3rd 方工具，Lucene 本身不参与词消歧。

我想执行类似“pos=verb & number=singular”的查询，而不是在结果中得到“saw”。

我想将不同的语法注释编码成字符串，如 "l:see;pos:verb;t:past|l:saw;pos:noun;n:sg" 并搜索正则表达式 "pos\:verb[^\|]+ n\:sg"，但由于性能问题，我绝对负担不起正则表达式查询。

也许可以应用一些带有发布列表有效负载的技巧？

UPD：我的解决方案草稿

以下是我的项目的细节：一个单词可以拥有的解析次数是固定的（比如 8 次）。因此，我想在每个属性的有效负载中插入解析号，并在发布列表相交阶段使用此有效负载。例如，我们有一个 'pos = Verb' 的发布列表，如 ...|...|1.1234|...|...，还有一个 'number = Singular' 的发布列表：...|... |2.1234|...|... 在发布列表处理的所有阶段处理“pos = Verb AND number = single”之类的查询时，将接受“x.1234”条目，直到它们被拒绝的交集阶段因为不对应的解析数字。

我认为这是一个非常紧凑的解决方案，但是将它整合到 Lucene 中会有多难呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:44:44.383

所以......这样做的骗子方式是（确实）控制你如何构建lucene索引。

在构建 lucene 索引时，在 Lucene 索引它之前修改每个单词，以便它包含该单词的所有必要属性。如果以这种方式索引事物，则必须以相同的方式进行查找。

单程：

这意味着对于您执行的每种类型的查询，您还必须以相同的方式构建索引。

例子：

saw 变成了名词-saw -- 索引它。看到也变成名词过去看到——索引它。锯也变成了名词过去单数 - 索引它。

另一种方法：

如果您想在单个索引中进行基于属性的查找，您可能必须对单词“saw”执行排列完成之类的操作，这样您就可以拥有一个大的必要属性的所有可能排列，而不是名词锯。逻辑陈述。

不确定这是否是一个好的答案，但这就是我能想到的。

# mysql - MySQL设置了一个规则，确保两列中只有一个可以填充值

> ID：14085356
> 
> 赞同：3
> 
> 时间：2012-12-29T19:53:17.867
> 
> 标签：mysql

有没有办法在 MySQL 数据库中设置“规则”/索引，所以如果我们有两列：Canceled 和 Claimed，那么其中只有一个可能被填充值。

所以如果我们将 cancelled 设置为 1，那么如果它是另一种方式，则声明不能是 1 和相同的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:55:52.270

此处推荐的解决方案是更改架构，使其具有*一个*状态为`cancelled`or的列`claimed`，*如果*这些列是非 NULL 布尔列，因此只有两种可能的状态。

你可以用触发器做你想做的事`BEFORE UPDATE`，但这似乎在已经过于复杂的模式上增加了额外的复杂性。

类似下面的东西，虽然语法可能需要工作，因为我不`UPDATE`经常做触发器：

```
CREATE TRIGGER `trg_status` BEFORE UPDATE ON your_table
FOR EACH ROW
BEGIN
  /* If the claimed was set to 1, set cancelled to 0 */
  IF OLD.cancelled = 1 AND NEW.claimed = 1 THEN 
    SET NEW.cancelled = 0;
  /* Or the opposite.... */
  ELSEIF OLD.claimed = 1 AND NEW.cancelled = 1 THEN
    SET NEW.claimed = 0;
  END IF
END 
```

# macos - NSPopover - 可以隐藏标准窗口吗？

> ID：14085359
> 
> 赞同：2
> 
> 时间：2012-12-29T19:53:38.473
> 
> 标签：macos, cocoa

在我的 Mac 应用程序中，我想使用由 NSStatusItem 激活的 NSPopover。激活就像一个魅力，但我想摆脱 NSPopover 提供的标准窗口（白色或 HUD），并改用我自己的视图。有谁知道这是否可能？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:00:41.593

不，这是不可能的——我们努力尝试并最终恢复到使用自定义类的 10.7 方式.. 检查 MAAttachedWindow

* * *

好吧，只要有足够的调酒和摆姿势，当然是可能的……但这非常邪恶，至少与您自己的班级一样多！

# c++ - 如何在 C++ 中使用外部类的模板类型作为内部类中的字段？

> ID：14085360
> 
> 赞同：0
> 
> 时间：2012-12-29T19:53:40.870
> 
> 标签：c++, templates, generics, field

我有一个如下所示的 C++ 文件。

```

    // 用于文本调试
    ＃包括
    ＃包括
    //＃包括
    ＃包括

    // stl 包括
    ＃包括
    ＃包括
    ＃包括

    // 快速固定大小内存分配器，用于快速节点内存管理
    #包括“fsa.h”

    // 可以禁用固定大小的内存分配器来比较性能
    // 如果你关闭它，则使用 std new 和 delete
    #define USE_FSA_MEMORY 1

    // 禁用调试信息有被截断行的警告
    // 出现在 stl 头文件中
    #pragma 警告（禁用：4786）

    // AStar 搜索类。UserState 是用户状态空间类型
    模板类 AStarSearch {

    上市：
        // 数据

        枚举{
            SEARCH_STATE_NOT_INITIALISED，
            SEARCH_STATE_SEARCHING,
            SEARCH_STATE_SUCCEEDED,
            SEARCH_STATE_FAILED，
            SEARCH_STATE_OUT_OF_MEMORY，
            SEARCH_STATE_INVALID
        };

        // 一个节点代表搜索中的可能状态
        // 用户提供的状态类型包含在此类型中

    上市：

        类节点{
        上市：

            节点*父；// 在搜索过程中用于记录后继节点的父节点
            节点 *child; // 用于搜索应用程序后查看反向搜索

            浮动 g; // 这个节点的成本 + 它的前辈（迄今为止的成本）
            浮动 h; // 到目标距离的启发式估计（启发式估计）
            浮动 f; // 前辈和自我和启发式的累积成本之和（costSoFar + 启发式估计）。

            节点（）：
                    父母（0），孩子（0），g（0.0f），h（0.0f），f（0.0f）{
            }

             用户状态 m_用户状态；
        };

        // 为了对堆进行排序，STL 需要比较函数来让我们进行比较
        // 两个节点的 f 值

        类堆比较_f {
        上市：

            bool operator()(const Node *x, const Node *y) const {
                // 总启发式估计比较。
                返回 x->f > y->f;
            }
        };

    上市：
        // 方法

        // 构造函数只是初始化私有数据
        AStarSearch(int MaxNodes = 1000);

        // 随时调用取消搜索并释放所有内存
        无效的取消搜索（）；

        // 设置开始和目标状态
        无效 SetStartAndGoalStates(UserState &Start, UserState &Goal) ;

        // 使搜索前进一步
        无符号 int SearchStep() ;

        // 用户调用它来将后继者添加到后继者列表中
        // 扩展搜索边界时
        bool AddSuccessor(UserState &State) ;

        // 释放解节点
        // 这样做是为了在你完成后清理所有使用的节点内存
        // 搜索
        无效的自由解决方案节点（）；

        // 遍历解的函数

        // 获取起始节点
        用户状态 *GetSolutionStart() ;

        // 获取下一个节点
        用户状态 *GetSolutionNext() ;

        // 获取结束节点
        用户状态 *GetSolutionEnd() ;

        // 向后步进解决方案迭代器
        用户状态 *GetSolutionPrev() ;

        // 对于教育用途和调试，能够查看很有用
        // 每一步的打开和关闭列表，这里有两个函数允许这样做。

        用户状态 *GetOpenListStart() ;

        UserState *GetOpenListStart(float &f, float &g, float &h) ;

        用户状态 *GetOpenListNext() ;

        UserState *GetOpenListNext(float &f, float &g, float &h) ;

        用户状态 *GetClosedListStart() ;

        UserState *GetClosedListStart(float &f, float &g, float &h) ;

        用户状态 *GetClosedListNext() ;

        UserState *GetClosedListNext(float &f, float &g, float &h) ;

        // 获取步数

        int GetStepCount() ;

        无效的 EnsureMemoryFreed() ;

    私人的：
        // 方法

        // 当搜索失败或被取消以释放所有已使用的时调用
        // 记忆
        无效 FreeAllNodes() ;

        // 此调用由搜索类在搜索结束时进行。可能有很多节点
        // 搜索结束时仍然存在的创建。他们将被删除
        // 搜索结束后的例程
        无效 FreeUnusedNodes() ;

        // 节点内存管理
        节点 *AllocateNode() ;

        无效自由节点（节点*节点）；

    私人的：
        // 数据

        // 堆（简单向量，但用作堆，参见 Steve Rabin 的游戏 gems 文章）
        std::vector m_OpenList；

        // 封闭列表是一个向量。
        std::vector m_ClosedList;

        // Successors 是一个由用户填写的向量，每个节点的后继类型
        // 被生成
        std::vector m_Successors;

        // 状态
        无符号整数 m_State；

        // 计算步数
        诠释 m_Steps;

        // 开始和目标状态指针
        节点 *m_Start;
        节点 *m_Goal;

        // 用于支持遍历解决方案链的指针。
        节点 *m_CurrentSolutionNode;

    #if USE_FSA_MEMORY
        // 记忆
        FixedSizeAllocator m_FixedSizeAllocator;
    ＃万一

        //调试：需要保留这两个迭代器
        // 用于用户 Dbg 函数
        类型名 std::vector::iterator iterDbgOpen;
        类型名 std::vector::iterator iterDbgClosed;

        // 调试：计算内存分配和空闲
        int m_AllocateNodeCount;

        布尔 m_CancelRequest;

    };

```

我无法编译它；我得到的错误是：

> 字段的类型“UserState”不完整

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:06:00.627

您可以直接使用外部类的模板参数，无需多言。但是，当您`A<X>`使用某种类型进行实例化时，`X`您需要确保`X`在访问内部类型时该类型是完整的：

```
struct X;
A<X>::B a0; // ERROR: X is incomplete

struct X {};
A<X>::B a1; // OK: X is complete 
```

# c# - 从 XML 数据写入 SQLite 数据库

> ID：14085365
> 
> 赞同：2
> 
> 时间：2012-12-29T19:54:28.723
> 
> 标签：c#, xml, sqlite, xamarin.ios

给定以下代码来导出数据库中的每个表：

```
string strSql = "SELECT * FROM " + tableName;
SqliteConnection sqlCon = new SqliteConnection("Data Source=" + dbPath);

using (SqliteCommand sqlComm = new SqliteCommand(strSql, sqlCon) { CommandType = CommandType.Text })
{
    var da = new SqliteDataAdapter(sqlComm);
    DataSet ds = new DataSet();
    da.Fill(ds);
    ds.Tables[0].WriteXml(Path.Combine(syncPath, tableName + "_4.xml"));
} 
```

我正在尝试使用以下内容将 XML 导入回数据库：

```
SqliteConnection sqlCon = new SqliteConnection("Data Source=" + dataPath + "/Empty.db3");
sqlCon.Open();

DataSet ds = new DataSet();
ds.ReadXml(Path.Combine(syncPath, tableName + "_4.xml"));

DataTable dt = ds.Tables[0];
string keyField = dt.Columns[0].ColumnName;
dt.PrimaryKey = new DataColumn[] { dt.Columns[keyField] };

var adapterForTable1 = new SqliteDataAdapter("Select * from " + tableName, sqlCon);
adapterForTable1.AcceptChangesDuringFill = false;
var builderForTable1 = new SqliteCommandBuilder(adapterForTable1);
adapterForTable1.Update(ds, tableName);

sqlCon.Close(); 
```

但我得到了错误：`Dynamic SQL generation is not supported with no base table.`我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:41:45.740

放弃了更新选项并写了这个：

```
SqliteConnection sqlCon = new SqliteConnection("Data Source=" + dataPath + "/Empty.db3");
            sqlCon.Open();
            SqliteCommand sqlCmd = new SqliteCommand(sqlCon);

            DataSet ds = new DataSet();
            ds.ReadXml(Path.Combine(syncPath, tableName + "_4.xml"), XmlReadMode.ReadSchema);
            foreach(DataTable dt in ds.Tables)
            {
                //Get field names
                string sqlString = "INSERT into " + tableName + " (";
                string valString = "";
                var sqlParams = new string[dt.Rows[0].ItemArray.Count()];
                int count = 0;
                foreach(DataColumn dc in dt.Columns)
                {
                    sqlString += dc.ColumnName + ", ";
                    valString += "@" + dc.ColumnName + ", ";
                    sqlParams[count] = "@" + dc.ColumnName;
                    count++;
                }
                valString = valString.Substring(0, valString.Length - 2);
                sqlString = sqlString.Substring(0, sqlString.Length - 2) + ") VALUES (" + valString + ")";

                sqlCmd.CommandText = sqlString;
                foreach(DataRow dr in dt.Rows)
                {
                    for (int i = 0; i < dr.ItemArray.Count(); i++) 
                    {
                        sqlCmd.Parameters.AddWithValue(sqlParams[i], dr.ItemArray[i] ?? DBNull.Value);
                    }

                    sqlCmd.ExecuteNonQuery();
                }
            } 
```

# linux - Tomcat Intellij 理念：远程部署

> ID：14085371
> 
> 赞同：12
> 
> 时间：2012-12-29T19:55:43.590
> 
> 标签：linux, tomcat, deployment, intellij-idea

*RackSpace 云服务器 Ubuntu-12.04、Intellij Idea-11.1.2、Windows-8、Tomcat-7.0.26、JDK-6。*

在 Intellij Idea 上，当我尝试在远程 Tomcat 7 服务器上运行 jsf 项目时，它说：

> 运行*服务器*名时出错：无法连接到*IP 地址*：1099

似乎问题是关于 1099 的 JNDI 端口，但我猜我无法激活它。Tomcat配置是……。像那样：

![在此处输入图像描述](../Images/34d1563a53768b4f737846b06a1633d5.png)

**我试过什么？**

在服务器端设置 CATALINA_OPTS 或 JAVA_OPTS：

```
 CATALINA_OPTS=-Dcom.sun.management.jmxremote 
-Dcom.sun.management.jmxremote.port=1099 
-Dcom.sun.management.jmxremote.ssl=false 
-Dcom.sun.management.jmxremote.authenticate=false 
```

和

```
JAVA_OPTS=-Dcom.sun.management.jmxremote 
-Dcom.sun.management.jmxremote.port=1099 
-Dcom.sun.management.jmxremote.ssl=false 
-Dcom.sun.management.jmxremote.authenticate=false 
```

但是这个没有用，有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-01T12:22:11.420

我对我的问题的回答：

远程部署的正确方法是在远程服务器上编辑 JAVA_OPTS 环境变量。只需输入以下命令：

```
export JAVA_OPTS="-Dcom.sun.management.jmxremote=
-Dcom.sun.management.jmxremote.port=1099
-Dcom.sun.management.jmxremote.ssl=false
-Dcom.sun.management.jmxremote.authenticate=false" 
```

如果这行不通，并且如果您不热衷于通过 Intellij Idea 部署您的网站，那么我已经找到了解决此问题的方法。为了能够在 Tomcat 下运行您的网站，您可以/应该以`.war`文件的形式获取工件。

它可以在 Intellij 中从项目设置（ctrl+alt+shift+s）中完成，然后点击加号按钮并添加新工件（web:application archieve）

![在 Intellij 中获取战争文件](../Images/d22d1b901f93175bc5660c725c17fdd2.png)

重建工件后，`.war`文件可以在`project-folder\out\artifacts`. 接下来，您应该将此文件放入您的`tomcat/webapps`文件夹中。

例如，如果您使用的是 Tomcat-7，我的意思是该文件夹存在于`/var/lib/tomcat7/webapps`. 在复制您的之前`.war file`，您应该将其重命名为`ROOT.war`. 这提供了直接通过 访问您的站点`http://youripaddress:8080`。重启Tomcat7服务后即可访问该站点。

但尚未完成，您可以远程调试项目，就像在本地机器上使用 Intellij Idea 调试项目一样。在 Idea 中打开运行/调试配置，点击加号按钮，必须有`Remote`. 这是为 JBoss、Glassfish 以及 Idea 等应用程序服务器调试项目的方法。输入您的主机和端口号，选择您的项目作为模块。

在开始调试之前，正如 Intellij 所说，您应该为服务器 JVM 提供以下参数：

```
JAVA_OPTS="$JAVA_OPTS -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005" 
```

为了能够在 Ubuntu 和 Tomcat-7 中执行此操作，请修改文件`usr/share/tomcat7`夹中的 catalina.sh 文件。我在该行的上方插入了参数`if [ -z "$LOGGING_MANAGER" ]; then`。它必须位于文件的中间部分。然后您应该能够使用 Intellij Idea 调试您的项目。

# android - 使用多项选择将文件加载到 ListFragment

> ID：14085376
> 
> 赞同：0
> 
> 时间：2012-12-29T19:56:05.030
> 
> 标签：android, listview, android-listview, android-fragments, android-listfragment

在 Android 中，如何将互联网上的文本文件保存到 sdcard、从 sdcard 加载文件并用逗号将文件的条目分隔到 ListView 中？

重要的是可以一次选择 ListView 中的多个条目。片段的使用也很好，因为它可以更容易地用于不同的屏幕尺寸，例如手机和平板电脑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:56:05.030

我将您的问题视为 2 个不同的问题，每个问题都有自己的解决方案和障碍，最终结合在一起。我的示例都是针对 API16（4.1 Jelly Bean）编译的，至少有 API11（3.0 Honeycomb）。**- 警告 -**大量文本传入。

# 从互联网加载

起初从互联网加载似乎势不可挡，尽管最终很简单。首先，您要确保设备具有连接。为此，您创建一个名为`getConnectivityStatus`如下所示的方法：

```
public boolean getConnectivityStatus() {
    ConnectivityManager cm = (ConnectivityManager) this
            .getSystemService(CONNECTIVITY_SERVICE);
    NetworkInfo info = cm.getActiveNetworkInfo();
    if (info != null)
        return info.isConnected();
    else
        return false;
} 
```

如果存在连接，您将需要创建一个目录来保存文件并使用 DownloadManager 类下载文件。为此，只需说：

```
File directory = new File(Environment.getExternalStorageDirectory(), "ExampleDirectory");
if (!directory.exists())
        directory.mkdir(); 
```

接下来，您需要使用 方法下载文件`downloadFile(String)`，并传入您想要的文件名。如果您在任何给定时间只想要文件的一个副本，则必须在下载前删除旧文件（如果它存在），否则您将拥有多个文件，例如 examplefile.txt；示例文件-1.txt；示例文件-2.txt；将第一部分代码放在您要开始下载的方法中，例如`onClick`：

```
String FILE_NAME = "examplefile.txt",
File examplefile = new File(Environment.getExternalStorageDirectory()
        + "/ExampleDirectory", FILE_NAME);
if (examplefile.exists()) {
    boolean deleted = examplefile.delete();
    if (deleted) {
        if (getConnectivityStatus())
            downloadFile(FILE_NAME);
    }
} 
```

`downloadFile(String)`方法：

```
public void downloadFile(String FILE_NAME) {
    String url = "http://www.example.com/filetobedownloaded.txt";
    DownloadManager.Request request = new DownloadManager.Request(
            Uri.parse(url));
    request.setDescription("Example file to be displayed.");
    request.setTitle(FILE_NAME);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        request.allowScanningByMediaScanner();
        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE);
    }
    request.setDestinationInExternalPublicDir("ExampleDirectory", FILE_NAME);

    DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
    manager.enqueue(request);
} 
```

您还可以注册一个接收器以在下载完成时返回回调。为此，只需在`onCreate`方法中注册接收器，如下所示：`registerReceiver(onComplete, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE));`并将以下方法放在您的类中：

```
BroadcastReceiver onComplete = new BroadcastReceiver() {
    public void onReceive(Context ctxt, Intent intent) {
        if (!started) {
            started = true;
            // perform action upon completion
        }
    }
}; 
```

这是最后一`DownloadFile.java`堂课：

```
public class DownloadFile extends Activity {

boolean started = false;
String url = "http://www.example.com/filetobedownloaded.txt";
String FILE_NAME = "examplefile.txt",
File directory = new File(Environment.getExternalStorageDirectory(), "ExampleDirectory");
File examplefile = new File(Environment.getExternalStorageDirectory()
        + "/ExampleDirectory", FILE_NAME);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_downloadfile);
    registerReceiver(onComplete, new IntentFilter(
            DownloadManager.ACTION_DOWNLOAD_COMPLETE));
    check();
}

public void check {
    if (!directory.exists())
        directory.mkdir();
    if (!getConnectivityStatus()) {
        if (!started) {
            started = true;
            // perform action if no connection
        }
    }
    if (examplefile.exists()) {
        boolean deleted = examplefile.delete();
            if (deleted && !started) {
                if (getConnectivityStatus())
                    downloadFile(FILE_NAME);
            }
    }
}

public boolean getConnectivityStatus() {
    ConnectivityManager cm = (ConnectivityManager) this
            .getSystemService(CONNECTIVITY_SERVICE);
    NetworkInfo info = cm.getActiveNetworkInfo();
    if (info != null)
        return info.isConnected();
    else
        return false;
}

public void downloadFile(String FILE_NAME) {
    String url = "http://www.example.com/filetobedownloaded.txt";
    DownloadManager.Request request = new DownloadManager.Request(
            Uri.parse(url));
    request.setDescription("Example file to be displayed.");
    request.setTitle(FILE_NAME);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        request.allowScanningByMediaScanner();
        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE);
    }
    request.setDestinationInExternalPublicDir("ExampleDirectory", FILE_NAME);

    DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
    manager.enqueue(request);
}

BroadcastReceiver onComplete = new BroadcastReceiver() {
    public void onReceive(Context ctxt, Intent intent) {
        if (!started) {
            started = true;
            // perform action upon completion
        }
    }
}; 
```

# 加载到 ListFragment

为了将文件加载到 ListFragment 中，并稍后显示所选项目，您必须在布局目录中创建 3 个类和 2 个 xml 文件。在我的示例中，我将使用`MainActivity.java`、 `PreviewFragment.java`、 `SelectionFragment.java`、 `activity_main.xml`和`fragment_preview.xml`。我们将从 xml 开始。第一个 xml 文件是您正在查看的文件，其中包含我们正在使用的两个片段：ListFragment 和 PreviewFragment。设置相当简单；您指定两个片段、它们的 id 和约束以及它们各自的类。这里是`activity_main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

<fragment
    android:id="@+id/fragmentSelection"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="2"
    class="com.smarticle.catering.update.SelectionFragment" />

<fragment
    android:id="@+id/fragmentPreview"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    class="com.smarticle.catering.update.PreviewFragment" />
</LinearLayout> 
```

上述布局针对横向模式下的平板电脑进行了优化。如果您愿意，可以调整安排。
接下来，您必须在 xml 中指定 PreviewFragment，这也相当简单，因为它只是一个水平和垂直居中的 TextView，最终将显示所选项目。这里是`fragment_preview.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<TextView
    android:id="@+id/tvPreview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:text="@string/app_name"
    android:textAppearance="?android:attr/textAppearanceLarge" />
</RelativeLayout> 
```

ListFragment 将在运行时创建，因此它不需要自己的 xml 文件。
为了在屏幕上显示片段，您必须`activity_main.xml`在活动中加载布局。这是一项非常简单的任务，因为它看起来就像其他所有活动一样。这是`MainActivity.java`：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
} 
```

就是这样，认真的。但现在继续。为了更改 PreviewFragment 中的文本，您必须在 中扩展`Fragment`类`PreviewFragment.java`，膨胀视图并设置 setText 方法。类`PreviewFragment.java`如下图所示：

```
public class PreviewFragment extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_preview, container,
                false);
        return view;
    }

    public void setText(String item) {
        TextView tvPreview = (TextView) getView().findViewById(R.id.tvPreview);
        tvPreview.setText(item);
    }

} 
```

片段的生命周期可以在[这里](http://developer.android.com/guide/components/fragments.html#Creating "http://developer.android.com/guide/components/fragments.html#Creating")找到。
现在您必须设置 ListFragment。这将在`ListFragment.java`课堂上完成。在该`onActivityCreated()`方法中，您需要加载文件，确保它实际下载并位于该`load(String)`方法的正确目录中。此时，您还将通过文件的分隔符将文件分隔为一个数组。这是`load(String)`方法：

```
public void load(String FILE_NAME) {
String[] list;
String FILE_NAME = "examplefile.txt",
File directory = new File(Environment.getExternalStorageDirectory(), "ExampleDirectory");
File examplefile = new File(Environment.getExternalStorageDirectory()
    + "/ExampleDirectory", FILE_NAME);
if (examplefile.exists()) {
    try {
        File myFile = new File(directory + "/" + FILE_NAME);
        FileInputStream fIn = new FileInputStream(myFile);
        BufferedReader myReader = new BufferedReader(new InputStreamReader(
                fIn));
        String aDataRow = "";
        String aBuffer = "";
        while ((aDataRow = myReader.readLine()) != null) {
            aBuffer += aDataRow;
            aBuffer = aBuffer.trim();
            list = aBuffer.split(",");
        }
        myReader.close();
        if (!loaded)
            Toast.makeText(getActivity(),
                    "Done reading '" + FILE_NAME + "'.", Toast.LENGTH_SHORT)
                    .show();
        loaded = true;
        if (!selections.equals("")) {
            for (int i = 0; i < selections.size(); i++) {
                getListView().setItemChecked(selections.get(i), true);
            }
        }
    } catch (Exception e) {
        Toast.makeText(getActivity(), e.getMessage(), Toast.LENGTH_SHORT)
                .show();
        }
    }
} 
```

这将返回字符串数组`list`，其中 examplefile.txt 的内容用逗号分隔。只要 aBuffer.split(String delimiter) 的表达式与文本文件中的分隔符一致，您就可以将逗号替换为您想要的任何分隔符。布尔值`loaded`只是为了确保每次重新创建活动时都不会出现新的 Toast，例如在方向更改时。
在`load(String)`方法中，也是设置 ListFragment 的适配器和模式的好时机。您需要选择一个允许多选的 textViewResourceId，除非您想要单选。这可以通过简单地插入以下行在 while 语句之后顺利完成：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                getActivity(),
                android.R.layout.simple_list_item_activated_1, list);
setListAdapter(adapter);
getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

如果需要单选，请更改`ListView.CHOICE_MODE_MULTIPLE`为`ListView.CHOICE_MODE_SINGLE`并更改`android.R.layout.simple_list_item_activated_1`为`android.R.layout.simple_list_item_1`。或者，如果您想要检查而不是突出显示，请更改为`android.R.layout.simple_list_item_checked`.
在这个类中，您还必须初始化您的 PreviewFragment，`onActivityCreated`方法如下：`fragment = (PreviewFragment) getFragmentManager().findFragmentById( R.id.fragmentPreview);`
最后，您必须能够读取 ListFragment 中选择了哪些项目并将它们显示在 PreviewFragment 上。我使用`getSelectedItems()`如下所示的方法执行此操作：

```
public void getSelectedItems() {
    cntChoice = getListView().getCount();
    items = "";
    selections.clear();
    SparseBooleanArray sparseBooleanArray = getListView()
            .getCheckedItemPositions();
    for (int i = 0; i < cntChoice; i++) {
        if (sparseBooleanArray.get(i) == true) {
            items += getListView().getItemAtPosition(i).toString()
                    + ";\n";
            selections.add(i);
        }
    }
    if (fragment != null && fragment.isInLayout())
        fragment.setText(items);
} 
```

String`items`是 TextView 中显示的`selections`内容，`ArrayList<Integer>`用于在方向更改时恢复状态。`android:configChanges="orientation"`通常，您会在标签下的`AndroidManifest.xml`文件中指定一个`<activity >`，但是当为纵向或横向使用单独的布局时会出现问题。如果您允许 Manifest 处理方向更改，则在更改方向时不会更改布局，因为不会像在正常情况下那样创建新活动。因此，您创建`static ArrayList<Integer>`包含包含所选项目的位置。
最后要做的是在单击 ListItem 时读取并调用该`getSelectedItems`方法，这是一项相当简单的任务。将其插入到您的课程中的任何位置：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    getItems();
} 
```

你完了！现在把它们放在一起。这是`ListFragment.java`课程：

```
public class ListFragment extends ListFragment {

    String FILE_NAME = "examplefile.txt", items = "";
    String[] list;
    static ArrayList<Integer> selections = new ArrayList<Integer>();
    int cntChoice, position;
    static boolean loaded = false;
    File directory = new File(Environment.getExternalStorageDirectory(), "ExampleDirectory");
    File examplefile = new File(Environment.getExternalStorageDirectory()
            + "/ExampleDirectory", FILE_NAME);
    PreviewFragment fragment;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        fragment = (PreviewFragment) getFragmentManager().findFragmentById(
                R.id.fragmentPreview);
        check();
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        getSelectedItems();
    }

    public void getSelectedItems() {
        cntChoice = getListView().getCount();
        items = "";
        selections.clear();
        SparseBooleanArray sparseBooleanArray = getListView()
                .getCheckedItemPositions();
        for (int i = 0; i < cntChoice; i++) {
            if (sparseBooleanArray.get(i) == true) {
                items += getListView().getItemAtPosition(i).toString()
                        + ";\n";
                selections.add(i);
            }
        }
        if (fragment != null && fragment.isInLayout())
            fragment.setText(items);
    }

    public void check() {
        if (examplefile.exists())
            load(FILE_NAME);
    }

    public void load(String FILE_NAME) {
        try {
            File myFile = new File(directory + "/" + FILE_NAME);
            FileInputStream fIn = new FileInputStream(myFile);
            BufferedReader myReader = new BufferedReader(new InputStreamReader(
                    fIn));
            String aDataRow = "";
            String aBuffer = "";
            while ((aDataRow = myReader.readLine()) != null) {
                aBuffer += aDataRow;
                aBuffer = aBuffer.trim();
                list = aBuffer.split(",");
            }
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                    getActivity(),
                    android.R.layout.simple_list_item_activated_1,     list);
            setListAdapter(adapter);
            getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
            myReader.close();
            if (!loaded)
                Toast.makeText(getActivity(),
                        "Done reading '" + FILE_NAME + "'.",     Toast.LENGTH_SHORT)
                        .show();
            loaded = true;
            if (!selections.equals("")) {
                for (int i = 0; i < selections.size(); i++) {
                    getListView().setItemChecked(selections.get(i),     true);
                }
                getSelectedItems();
            }
        } catch (Exception e) {
            Toast.makeText(getActivity(), e.getMessage(), Toast.LENGTH_SHORT)
                    .show();
        }
    }
} 
```

# 结论

我希望这能解决你的问题。我知道它很长，但它很彻底，经过测试并且效果很好。要开始这个，你可以在类的接收者`Intent intent = new Intent(getBaseContext(), MainActivity.class); startActivity(intent); finish();`的方法中做一个。我还建议在方法中放置相同的代码行，特别是在没有连接时调用的部分，在这种情况下，它将加载先前下载到目录中的文件。Good luck, happy coding and always remember... 01101000011101000111010001110000011100110011101000101111001011110111011101110111011101110010111001111001011011110111010101110100011101010110001001100101001011100110001101101111011011010010111101110111011000010111010001100011011010000011111101110110001111010110100101110101011000100100101000101101010110000101001101001100001110010110011101101111`onReceive``DownloadFile.java``check()`

# javascript - JS / d3js，调用一个CSV；有些数字给出了 NaN 错误，有些则没有……修复？

> ID：14085379
> 
> 赞同：4
> 
> 时间：2012-12-29T19:56:17.570
> 
> 标签：javascript, csv, d3.js

我正在使用 d3.js 库制作一个小图。

我正在使用 d3.csv() 调用 .csv 中的数字。五列工作正常。

但是根据 console.log(typeof d.Rate_10) ，尽管它们*是*数字，但据称有两列充满了“NaN”

```
d3.csv("minerals.csv", function(data) 
{
    data.forEach(function(d) 
    {
        d.Value_Total_10 = d.Value_Total_10 // works
        d.Value_Total_11 = d.Value_Total_11 //works

        d.Commodity = d.Commodity   //works

        d.Volume_Total_10 = d.Volume_Total_10 // works
        d.Volume_total_11 = d.Volume_Total_11 // works

        d.Rate_10 = +d.Rate_10 // script is not recognizing these values as numbers.

        console.log(typeof d.Rate_10) //prints "number"
        console.log(d.Rate_10) // prints "NaN"

        d.Rate_11 = +d.Rate_11 // script is not recognizing these values as numbers.

        console.log(typeof d.Rate_11) //prints "number"
        console.log(d.Rate_11); //prints "NaN"

        ... 
```

我的 .csv 是另存为 .csv 的 Excel。我的麻烦“率”列最初是计算列，但我手动重新输入它们作为尝试修复。没用。

我知道这与 float 或 int 或 IEEE 或其他东西有关，但我并不完全理解这一点，我的所有值都是简单的 'ol 数字到小数点后一位或两位。

我的 .csv 在这里： http: [//greencracker.net/wp-content/uploads/2012/12/minerals.csv](http://greencracker.net/wp-content/uploads/2012/12/minerals.csv)

是什么赋予了？我不明白我的工作列和我的 NaN 列之间的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-29T03:11:07.347

刚刚遇到同样的问题。

我导入 d3.csv 的 csv 文件，一些数字返回 NaN。原来我的问题是 csv 文件。

我使用 excel 创建了它，在我导入的其中一列中，我在大约 3,000 行有大约 3 个单元格，它们的格式设置为“数字”。这意味着 excel 在数字中放置了一个逗号作为千位分隔符。重新格式化列，没有逗号或额外的格式。瞧

# api - citeseerx 搜索 API

> ID：14085383
> 
> 赞同：8
> 
> 时间：2012-12-29T19:56:49.140
> 
> 标签：api, metadata, web-scraping, citations

有没有办法以编程方式访问[CiteSeerX](http://citeseerx.ist.psu.edu/advanced_search)（例如按作者和/或标题搜索？）令人惊讶的是，我找不到任何相关的东西；肯定其他人也在尝试获取学术文章元数据而不求助于抓取吗？

编辑：请注意，CiteSeerX[支持](http://csxstatic.ist.psu.edu/about/data)OAI PMH，但这似乎是一个面向数字图书馆的 API（“内容传播”），并不专门支持搜索。此外，该页面上的 citeseer 信息非常稀少，甚至说“目前，OAI 存在困难”。

还有[一个](https://stackoverflow.com/questions/8297528/citation-lookup-with-ajax-using-oai-pmh)关于 CiteSeerX API 的 SO question（虽然不是专门搜索）；2 个答案没有解决问题（一个谈到 Mendeley，另一个软件，另一个说 OAI-PMH 实现可以免费提供对最小规范的扩展）。

或者，任何人都可以提出一种以编程方式从作者/标题中获取引文的好方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T14:03:31.113

正如其中一位评论者所建议的那样，我首先尝试了 jabref：

> jabref -n -f "citeseer:title:(来自) 作者:(Brewer)"

然而，jabref 似乎没有意识到查询字符串需要包含冒号，因此会引发错误。

对于搜索结果，我最终用 Python 的 BeautifulSoup 抓取了 CiteSeerX 结果：

```
url = "http://citeseerx.ist.psu.edu/search?q="
q = "title%3A%28{1}%29+author%3%28{0}%29&submit=Search&sort=cite&t=doc"
url += q.format (author_last, title.replace (" ", "+"))
soup = BeautifulSoup (urllib2.urlopen (url).read ())
result = soup.html.body ("div", id = "result_list") [0].div
title = result.h3.a.string.strip ()
authors = result ("span", "authors") [0].string
authors = authors [len ("by "):].strip ()
date = result ("span", "pubyear") [0].string.strip (", ") 
```

可以从结果中获取文档 ID（摘要链接 URL 中误导性命名为“doi=...”的部分），然后将其传递给 CiteSeerX OAI 引擎以获取都柏林核心 XML（例如[http:// citeseerx.ist.psu.edu/oai2?verb=GetRecord&metadataPrefix=oai_dc&identifier=oai:CiteSeerX.psu:10.1.1.42.2177](http://citeseerx.ist.psu.edu/oai2?verb=GetRecord&metadataPrefix=oai_dc&identifier=oai:CiteSeerX.psu:10.1.1.42.2177) ); 然而，XML 最终包含多个 dc:date 元素，这使得它不如抓取输出有用。

太糟糕了 CiteSeerX 使人们尽管有所有开放档案/开放访问的言论，但仍会求助于抓取。

# iphone - Apple iOS6 地图 - 目的地地址 > 显示公司名称而不是纬度/经度

> ID：14085387
> 
> 赞同：3
> 
> 时间：2012-12-29T19:57:31.730
> 
> 标签：iphone, objective-c, ios, ios6

我有一个应用程序可以将用户引导到 Apple 的地图上以获取前往营业地点的路线，并且我正在通过纬度/经度。很简单，我使用的 URL 如下：

[http://maps.apple.com/maps?daddr=lat,long](http://maps.apple.com/maps?daddr=lat,long)

这当然可以正常工作，但是客户端不喜欢用户访问地图时显示的纬度/经度，因为它看起来不太“用户友好”。他们更愿意将公司名称（我们有）实际显示在那里。我告诉他们，如果我们只传入企业名称，这将不起作用，因为 Apple 的地图可能不知道该特定企业的位置。

然而，他们想知道是否有可能让它在目的地地址中仍然显示公司名称，以及纬度/经度。类似于以下内容：“（企业名称）经纬度”，其中企业名称最终被忽略并使用纬度/经度。我玩过这个有点没有运气。

查看 Apple 的[文档](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)，我看不到实现此目的的明显方法。这甚至可能吗？如果没有，请不要担心，但只是想获得一些反馈。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:19:26.100

如果您正在编写一个应用程序，您可以使用`MKMapItem`而不是使用链接 URL 方法。使用其中一个，您可以添加一堆额外的信息，例如公司名称和电话号码，以及纬度/经度。然后，您可以通过调用它在地图应用程序中`openInMapsWithLaunchOptions:`打开它。

# java - 使用 SWT 浏览器的 HTML 代码获取器

> ID：14085393
> 
> 赞同：2
> 
> 时间：2012-12-29T19:58:49.170
> 
> 标签：java, html, eclipse, swt

如何使用 SWT Broser 将 html 页面代码转换为字符串？

```
 Display display = new Display();
    Shell shell = new Shell(display);
    shell.setSize(100, 100);

    Browser browser = new Browser(shell, SWT.NONE);
    browser.setBounds(5, 75, 100, 100);

    shell.open();
    browser.setUrl("https://google.com");

    String html = browser.getText(); //NOTHING!

    while (!shell.isDisposed()) {

        if (!display.readAndDispatch() && html == null) {

            display.sleep();
        }
    }

    display.dispose();

    Syste.out.println(html); ////NOTHING! 
```

那么，我该如何获取 html 呢？最好的方法是，在获取显示窗口的 html 代码后何时关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:03:34.347

您正在寻找的方法是：[`Browser#getText()`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/browser/Browser.html#getText%28%29)。这是javadoc的重要部分：

> 返回一个带有 HTML 的字符串，表示当前页面的内容。

所以这可以完成这项工作：

```
String html = browser.getText();

System.out.println(html); 
```

* * *

对于您的第二个问题：您可以通过调用[`Shell#close()`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Shell.html#close%28%29). 这是Javadoc：

> 请求窗口管理器以与用户单击“关闭框”时关闭接收器相同的方式关闭接收器，或执行指示应删除窗口的其他平台特定键或鼠标组合。

# dll - Dumpbin 显示奇怪的方法名称（在 MS Visual C++ 中生成导出函数）

> ID：14085396
> 
> 赞同：1
> 
> 时间：2012-12-29T19:59:05.550
> 
> 标签：dll, pinvoke, dllexport, dumpbin, cdecl

我在我的 VS 中创建了新的 Win32 项目，并为此目的选择了动态库 ( *.dll )。

我在主文件中定义了一些导出函数：

```
__declspec(dllexport)
int TestCall(void)
{
    int value = 4 / 2;
    std::cout << typeid(value).name() << std::endl;
    return value;
}

__declspec(dllexport)
void SwapMe(int *first, int *second)
{
    int tmp = *first;
    *first = *second;
    *second = tmp;
} 
```

当我查看转储/出口时，我得到了：

```
ordinal hint RVA      name

      1    0 00001010 ?SwapMe@@YAXPEAH0@Z
      2    1 00001270 ?TestCall@@YAHXZ 
```

我正在调用 C# 版本，如下所示：

```
[DllImport(@"lib1.dll", EntryPoint = "?TestCall@@YAHXZ",
CallingConvention = CallingConvention.Cdecl)]
static extern int TestCall(); 
```

这不是使用导出方法的正确形式。我在哪里为 C++ dll 项目中的导出方法生成这样的名称失败了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T20:14:57.337

这是正常的，C++ 编译器将*名称修饰*应用于函数。C++ 语言支持函数重载，就像 C# 一样。所以你可以写一个`Foo(int)`和一个`Foo(double)`函数。显然，它们不能都导出为名为“Foo”的函数，客户端代码不知道要调用哪一个。因此，额外的字符对名称进行编码，使其对于重载是唯一的。

您可以通过声明 function 来关闭它`extern "C"`，C 语言不支持重载，因此不需要相同类型的装饰。

但实际上，如果你不这样做会更好。因为它也是捕捉错误的好方法。就像更改 C++ 代码中的函数声明但忘记修改 C# 代码中的 pinvoke 声明一样。您现在将获得一个易于诊断的“找不到入口点”异常，而不是一个非描述性且非常难以诊断的 AccessViolationException。不一定必须在 C++ 代码中提出，堆栈不平衡也可能使您的 C# 代码崩溃。然而，查找修饰名称有点痛苦，通过要求链接器创建一个映射文件（/MAP 选项）来改进它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T20:05:30.267

使用 extern "C" 指定链接以避免名称损坏：

```
extern "C" __declspec(dllexport) int TestCall(void);
extern "C" __declspec(dllexport) void SwapMe(int *first, int *second); 
```

# wordpress - Wordpress 将用户更改为管理员

> ID：14085397
> 
> 赞同：1
> 
> 时间：2012-12-29T19:59:11.610
> 
> 标签：wordpress, admin

我正在建立一个 wp 网站，并且即将完成。我将网站设置为我自己的管理员、我的电子邮件地址和头像。问题是我需要以管理员的身份使用他的姓名、电子邮件和头像与客户一起交付它，因此他的头像显示为代理。

有人可以指出我之前处理过此问题的正确文档或解释执行此操作的最佳方法吗？

更新：

我已将客户端添加为管理员，但我仍然显示为站点的代理（超级用户）。这是一个房地产网站。

这是否特定于我正在使用的模板（agentpress 2.0）或所有 wp 站点中的某种设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:00:56.823

如果您是通过 PHP 执行此操作，请[阅读此](http://www.joshuawinn.com/create-a-new-wordpress-admin-user-from-php/)内容，否则您可以添加具有管理员权限的用户。

# android - Android 通讯录、短信/彩信、通话记录

> ID：14085399
> 
> 赞同：1
> 
> 时间：2012-12-29T19:59:26.127
> 
> 标签：android

我意识到这是与其他帖子的重复想法，但略有不同，请继续阅读：

我正在有效地尝试为 android 联系人、短信、彩信和通话记录提取所有原始数据，并将每行数据作为 JSON 对象输出到全局 JSON 数组中。

我想知道的是，如何使用 Android 内容提供程序解决这个问题？

我知道我可以查询他们每个人。SMS、MMS 和通话记录是直截了当的，但是，我似乎无法找到一种方法来处理联系人数据，除非我使用 VCARD，而我不想这样做。

澄清一下：我需要为涉及联系人、通话记录、短信和彩信的所有内容获取每一列及其相关值。

任何人都可以帮忙吗？

# jquery - jquery单击并计算更多输入

> ID：14085406
> 
> 赞同：1
> 
> 时间：2012-12-29T20:00:01.110
> 
> 标签：jquery, click, onchange

我是 Jquery 的新手：

我有一个单击功能和一个更改功能：更改功能似乎“停止”了单击功能的工作：

```
$(".calc").click(function() {

    for (i = 1; i <= 2; i++) {

        $("#p" + i).val(parseFloat((parseFloat($("#amount" + i).val())) / (parseFloat($("#q" + i).val()))).toFixed(5)).change();

    }

});

$('.priceRow').change(function() {

    var q1 = parseFloat($('#q1').val(), 10);
    var qval1 = 0;
    if (q1 > 0) {
        qval1 = q1;
    }

    var q2 = parseFloat($('#q2').val(), 10);
    var qval2 = 0;
    if (q2 > 0) {
        qval2 = q2;
    }

    var p1 = parseFloat($('#p1').val(), 10);
    var puval1;
    if (p1 > 0) {
        puval1 = p1;
    }
    var p2 = parseFloat($('#p2').val(), 10);
    var puval2 = 0;
    if (p2 > 0) {
        puval2 = p2;
    }

    var subtot1;

    subtot1 = parseFloat(qval1 * puval1);

    var subtot2;
    subtot2 = parseFloat(qval2 * puval2);
    var subtot = 0;

    $('#amount1').val(parseFloat(subtot1).toFixed(2)).change();
  //  $('#amount2').val(parseFloat(subtot2).toFixed(2)).change();

}); 
```

});

html代码

```
<div class="priceRow">
q1 : <input id="q1" value="0" class="priceRow"/>
p1 : <input id="p1" value="0" class="priceRow"/>
<a href="#" id="calc2" class="calc">calc</a>
</div>
<div class="priceRow">
 q2 :  <input id="q2" value="0"/>
 p2 :  <input id="p2" value="0" />
<a href="#" id="calc2" class="calc">calc</a> 
</div>
<br>
amount1: <input id="amount1" class="subtot">  </span><br>
amount2: <input id="amount2" class="subtot">  </span><br>
</p> 
```

点击功能在第二行不起作用：我的错误是什么？？？

非常感谢

演示：http: [//jsfiddle.net/skipperit/mCnqH/3/](http://jsfiddle.net/skipperit/mCnqH/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:17:45.830

我建议你从头开始。

ID 不能在页面中重复。您应该改用类。

要仅使用`row`要遍历行的主父级的元素，请使用`closest()`并使用`find()`仅查找该行中的元素

例子：

```
$(".calc").click(function(){
   /* "this" is the current element clciked*/

    var $row= $(this).closest( '.priceRow')
     var q1=$row.find('.q1');/* note using class="q1" not ID*/
}); 
```

`change`事件只发生在表单输入上，所以你`$('.priceRow').change`永远不会触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:15:45.460

我*认为*您想要的是将更改事件处理程序附加到价格行中的文本框。div 上的更改事件充其量是不确定的。尝试将您的更改事件附件更新为以下内容。

```
$('.priceRow input:text').change(...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:16:03.570

添加

```
class="priceRow" 
```

到具有 id **p2**和**q2**的输入字段。目前只有**p1**和**q1**有这个

[http://jsfiddle.net/mCnqH/5/](http://jsfiddle.net/mCnqH/5/)

# android - EditText Android 输入类型

> ID：14085409
> 
> 赞同：0
> 
> 时间：2012-12-29T20:00:28.767
> 
> 标签：android, android-edittext

查看 EditText 视图可以看到的输入类型，我看到了“textPersonName”，我尝试使用类似 editText.getName 的方法来搜索（如果可能）拆分姓名和姓氏的方法。我的问题是存在一种在edittext中拆分姓名和姓氏的edittext方法吗？如果不存在，最好的方法是使用 split 还是其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:08:40.687

这`textPersonName`只是一个样式选项，例如它将每个单词的第一个字母大写。它不会帮助您区分名字和姓氏。但是，您可以搜索空格，例如：

```
String[] names = editText.getText().toString().split(" "); 
```

字符串数组将在不同的字符串中具有每个名称。如果用户输入：`John Doe`您将有“John” in`names[0]`和“Doe” in `names[1]`。

# ruby-on-rails-3 - Rails：如何在 before_update 方法中向用户提出错误

> ID：14085410
> 
> 赞同：1
> 
> 时间：2012-12-29T20:00:38.810
> 
> 标签：ruby-on-rails-3

我已经搜索了很多这个问题没有运气......

我有一个带有 before_update 方法的模型，我不能用验证器替换它，因为实际的方法会检查许多事物的存在并更新许多其他事物。我的问题是，如果 before_update 方法的进程失败，我该如何引发错误？就像是：

```
def update_status
    if !(many verifications and updates)
       self.errors[:base] << "Could not update if ...."
    end
end 
```

使用 abobe 代码，我在页​​面加载后从控制器收到更新通知，但我想显示 before_update 方法的错误。如何向用户显示错误？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:04:23.727

```
def update_status
    if !(many verifications and updates)
       raise "Could not update if ...."
    end
end 
```

现在确实在控制器上显示错误消息，您可以执行以下操作：

```
begin
  @myObject.update_status
rescue => ex
  flash[:notice] = ex.message
end 
```

# python - 解决 ODE 的 python 时出错

> ID：14085412
> 
> 赞同：6
> 
> 时间：2012-12-29T20:00:58.973
> 
> 标签：python, scipy, integrate, differential-equations, orbital-mechanics

我有一个大学项目，要求我们使用 ODE 和 SciPy 的 odeint 函数模拟卫星接近火星。

我设法通过将二阶 ODE 转换为两个一阶 ODE 来在 2D 中模拟它。但是我被时间限制困住了，因为我的代码使用的是 SI 单位，因此可以在几秒钟内运行，而 Python 的 linspace 限制甚至不能模拟一个完整的轨道。

我尝试将变量和常量转换为小时和公里，但现在代码不断出错。

我遵循了这个方法：

[http://bulldog2.redlands.edu/facultyfolder/deweerd/tutorials/Tutorial-ODEs.pdf](http://bulldog2.redlands.edu/facultyfolder/deweerd/tutorials/Tutorial-ODEs.pdf)

代码是：

```
import numpy

import scipy

from scipy.integrate import odeint

def deriv_x(x,t):
    return array([ x[1], -55.3E10/(x[0])**2 ]) #55.3E10 is the value for G*M in km and hours

xinit = array([0,5251]) # this is the velocity for an orbit of period 24 hours

t=linspace(0,24.0,100) 

x=odeint(deriv_x, xinit, t)

def deriv_y(y,t):
    return array([ y[1], -55.3E10/(y[0])**2 ])

yinit = array([20056,0]) # this is the radius for an orbit of period 24 hours

t=linspace(0,24.0,100) 

y=odeint(deriv_y, yinit, t) 
```

我不知道如何从 PyLab 复制/粘贴错误代码，所以我拍摄了错误的 PrintScreen：

![为 x 运行 odeint 时出错](../Images/b11304632455046127fa1a471a67fac4.png)

t=linspace(0.01,24.0,100) 和 xinit=array([0.001,5251]) 的第二个错误：

![第二种错误](../Images/4c405c8dec7ca729c28c4c6c21df6d66.png)

如果有人对如何改进代码有任何建议，我将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T21:43:04.497

```
odeint(deriv_x, xinit, t) 
```

用作`xinit`的初始猜测`x`。这个值`x`在评估时使用`deriv_x`。

```
deriv_x(xinit, t) 
```

`x[0] = xinit[0]`因为等于 0，所以引发被零除错误，然后`deriv_x`除以`x[0]`.

* * *

看起来您正在尝试解决二阶 ODE

```
r'' = - C rhat
      ---------
        |r|**2 
```

其中 rhat 是径向的单位向量。

您似乎将`x`和`y`坐标分离为单独的二阶 ODES：

```
x'' = - C             y'' = - C
      -----    and          -----
       x**2                  y**2 
```

初始条件 x0 = 0 和 y0 = 20056。

这是非常有问题的。问题之一是当`x0 = 0`,`x''`爆炸。的原始二阶 ODE不存在这个问题——因为, 所以远非零时，`r''`分母不会爆炸。`x0 = 0``y0 = 20056``r0 = (x**2+y**2)**(1/2)`

结论：您将`r''`ODE 分成两个 ODE 的`x''`方法`y''`是不正确的。

尝试寻找解决`r''`ODE 的不同方法。

暗示：

*   如果您的“状态”向量是`z = [x, y, x', y']`怎么办？
*   `z'`你能写出关于`x`、`y`和 `x'`的一阶常微分方程`y'`吗？
*   你可以通过*一个*电话解决它`integrate.odeint`吗？

# objective-c - 如何在 CocoaLibSpotify 注销时清除用户名和密码？

> ID：14085414
> 
> 赞同：4
> 
> 时间：2012-12-29T20:01:09.637
> 
> 标签：objective-c, ios, spotify, cocoalibspotify-2.0

我正在使用该`CocoaLibSpotify`库来开发将利用 Spotify API 的 iOS 应用程序。我在我想要的地方得到了它，但我遇到了一些问题。

当用户触摸我的“注销 Spotify”按钮时，我执行以下代码：

```
-(IBAction)logoutButtonTouched:(id)sender
{
    // Clear out the user's settings that I am saving.
    NSString *appDomain = [[NSBundle mainBundle] bundleIdentifier];
    [[NSUserDefaults standardUserDefaults] removePersistentDomainForName:appDomain];

    [[SPSession sharedSession] logout:^(void) {
        SPLoginViewController *controller = [SPLoginViewController loginControllerForSession:[SPSession sharedSession]];
        controller.allowsCancel = NO;
    }];
} 
```

这确实会注销用户并显示`SPLoginViewController`，但我的问题是，用户名和密码字段仍然包含他们登录时使用的值。有谁知道当我显示时清除这些字段的方法`SPLoginViewController`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:19:48.037

此功能不在登录控制器中，这确实是一个错误。

你可以这样做。请注意，这是非常脆弱的代码，如果登录控制器的任何内部细节发生变化，它将失败，并且*将来会*：

```
SPLoginViewController *controller = [SPLoginViewController loginControllerForSession:[SPSession sharedSession]];

id internalLoginViewController = [controller.viewControllers objectAtIndex:0];
UITextField *loginField = [internalLoginViewController valueForKey:@"usernameField"];
UITextField *passwordField = [internalLoginViewController valueForKey:@"passwordField"];
loginField.text = @"";
passwordField.text = @""; 
```

# c++ - 从 access 访问 rundate 附近的最新数据

> ID：14085417
> 
> 赞同：0
> 
> 时间：2012-12-29T20:01:30.877
> 
> 标签：c++, sql, visual-c++, mfc

我正在通过 sql 查询从访问数据库中检索记录。origina 查询检索最近的日期数据。但是，如果我想运行该工具，例如 2012 年 3 月 3 日，它仍然会获取最新数据。但我需要等于日期 2012 年 3 月 3 日或接近 2012 年 3 月 3 日但不超过日期的数据。例如，如果 3/3/2012 不可用且 3/2/2012 在 db 中可用，则应选择该日期。修改后的查询如下所示。它给出了保留字拼写错误或标点错误..等的例外情况。你能帮我查询一下吗？在查询中，截断日期是从我的程序输入的。我的查询现在是：

CString sel = "SELECT I.ProductType, I.Spread, I.DateUpdated FROM MortgageRateSpreads I,(select ProductType, MAX(DateUpdated) AS DateUpdated1"; sel += "where DateUpdated <=" ;
sel += tRunDate.Format(" {ts '%Y-%m-%d' }");

CRecordset set(&pdatabase);

```
 try
    {

        double  val;
        CDBVariant var;

        if (set.Open(CRecordset::forwardOnly, sel/*, CRecordset::readOnly*/)) 
        {
            m_Log->Log("recordset is open");
            while (!set.IsEOF()) 
```

我的选择是：

```
sel "SELECT I.ProductType, I.Spd, I.DateUpdated FROM MRSpds I,(select ProductType, MAX(DateUpdated) AS DateUpdated1where DateUpdated <={ts '2012-02-08'  } FROM MRSpds GROUP BY ProductType) T WHERE I.ProductType = T.ProductType AND I.DateUpdated =T.DateUpdated1" 
```

谢谢你

```
 { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T00:39:43.347

我认为 ms access 喜欢日期周围的 # 符号。DateUpdated<=#3-3-2012# 在 sel += "where..." 你需要一个空格，例如 sel += " where ..." SQL 语句中的日期字符串应该看起来像 DateUpdated <= #3/3/2012#

此外，您的嵌套 select 语句似乎在 where 子句之后有 from 子句。我认为应该是这样的

> (选择 ProductType, MAX(DateUpdated) AS DateUpdated1 FROM MRSpds where DateUpdated <= #2012-02-08# GROUP BY ProductType) T

# iphone - Facebook 结果变成 NSArray

> ID：14085419
> 
> 赞同：1
> 
> 时间：2012-12-29T20:01:43.897
> 
> 标签：iphone, ios, facebook

我正在使用 Facebook api 来获取用户的朋友姓名、UID 和生日。我遇到的问题是，一旦我得到结果，我如何获得这些值。意思是，我想获取每个返回值的用户名、生日？

这段代码在这里一直为我崩溃

```
//set query
NSString *query =  @"SELECT uid, name, birthday_date FROM user WHERE uid IN " @"(SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 25)";

// Set up the query parameter
NSDictionary *queryParam = [NSDictionary dictionaryWithObjectsAndKeys:query, @"q", nil];

[FBRequestConnection startWithGraphPath:@"/fql"
                             parameters:queryParam
                             HTTPMethod:@"GET"
                      completionHandler:^(FBRequestConnection *connection,
                                          id result,
                                          NSError *error) {
    if (error) {
            NSLog(@"Error: %@", [error localizedDescription]);
        } 
    else {
        NSLog(@"Result: %@", result);
        NSArray *friendInfo = (NSArray *) [result objectForKey:@"data"];
        NSArray *arryData3 = [[NSArray alloc] initWithArray:friendInfo];
        NSLog(@"[friendInfo count]: %d ... [arryData3 count]: %d ...",[friendInfo count],[arryData3 count]);
        for (int i=0; i<[arryData3 count]; i++) {
            NSArray *bdayArray = [[NSArray alloc] initWithArray:[arryData3 objectAtIndex:i]];
            //CODE CRASH HERE!!!!
            NSString *bdayStr = [bdayArray objectAtIndex:0];
            NSString *nameStr = [bdayArray objectAtIndex:1];
        }
    }
}]; 
```

这就是我的崩溃日志的样子

```
data(
    {
        "birthday_date" = "01/06";
        name = "John Doe";
        uid = 555555;
    },
    {
        "birthday_date" = "09/01/1984";
        name = "Mrs. Smith";
        uid = 4444444;
    },
)
[friendInfo count]: 2 ... [arryData3 count]: 2 ...
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSArray initWithArray:range:copyItems:]: array argument is not an NSArray'
*** First throw call stack:
(0x168f052 0x1cabd0a 0x167fe0b 0x15e8170 0x16ca2 0x27c03 0x26c7e 0x2444e 0x2927e 0x296e7 0xfc1a59 0xfbfe94 0xfc0eb7 0xfbfe4f 0xfbffd5 0xf04f6a 0x3964bbd 0x3a315ea 0x395b298 0x3a3116b 0x395b137 0x166397f 0x15c6b73 0x15c6454 0x15c5db4 0x15c5ccb 0x3bd1879 0x3bd193e 0x5cca9b 0x2038 0x1f95) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:25:10.830

对于任何可能对未来感兴趣的人。这就是您在 Facebook 的结果中获得个人价值观的方式。

```
NSLog(@"Result: %@", result);
NSArray *friendInfo = (NSArray *) [result objectForKey:@"data"];
NSLog(@"[friendInfo count]: %d ....",[friendInfo count]);
for (int i=0; i<[friendInfo count]; i++)
{
    NSMutableString *userNameStr = [NSMutableString stringWithFormat:@"%@", [[friendInfo objectAtIndex:i]  objectForKey:@"name"]];
    NSMutableString *userDateStr = [NSMutableString stringWithFormat:@"%@", [[friendInfo objectAtIndex:i]  objectForKey:@"birthday_date"]];
    NSLog(@"userNameStr: %@ ... userDateStr: %@ ...", userNameStr,userDateStr);
   //From this point onwards you can put these individual strings into an array 
   //and if you had defined the array globally you can get to these results from 
   //any function in your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:07:18.703

返回的是字典，而不是数组。请阅读 NSDictionary 并像使用结果一样使用它 - objectForKey 函数。在这种情况下，键是生日日期，然后是 for 函数中字符串的名称。

利维乌

# php - 实施 password_compat

> ID：14085421
> 
> 赞同：-3
> 
> 时间：2012-12-29T20:01:52.300
> 
> 标签：php, validation, authentication, pdo, cryptography

我已经用这个库正确地实现了哈希的创建，只改变了成本值。现在我坚持实际验证用户。对于我当前的系统，我还必须检查用户是否已激活，然后还要启动会话。这就是我所拥有的：

```
 <?php 
require('core/init.php');

// Required field names
$required = array('username', 'password');

// Loop over field names, make sure each one exists and is not empty
$error = false;
    foreach($required as $field) {
        if (empty($_POST[$field])) {
        $error = true;
        }
    }
//This is what will make the password 
$form_password = $_POST['password'];
$hash = password_hash($form_password, PASSWORD_BCRYPT);
    if ($error) {
        echo "Please Check username and password field!";
    }
        else { 
                if (password_verify($form_password, $hash)) {
                    $member_username = $_POST['username'];
                    $query = $dbh->prepare("SELECT * FROM users WHERE username = :user");
                    $query->bindParam(':user', $member_username);
                    $query->execute();
                    $row = $query->fetch();

                        if($row['activated'] > 0){
                            $_SESSION["user_id"] = $row['user_id'];
                            header("location: login_success.php");

                            }   else {
                                    echo "Account not activated wait for system administrator!";

                                }

                } else {
                            Echo "Wrong password or username please <a href='index.php'><bold>Retry!</bold></a>";

                        }

        } 
```

如果密码验证实际上是真的，我所做的是运行查询。该查询然后获取激活的行以检查该值是否大于 0，如果不是，则未激活用户。

但是我的错误是，无论我输入什么，我都会收到错误的密码或用户名，请重试！

我知道密码和用户不正确。我第二次猜测自己是否正确实施了 password_compat 的验证部分。

任何帮助都会很棒。谢谢你。

编辑 ：

dev-null-dweller 在评论中回答的问题。

问题：我没有意识到我不能将库 $password 和 $hash 变量用作全局变量。所以为了修复它，我创建了变量并且一切正常。谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T21:11:48.897

两者`$password`和`$hash`在您的代码中都未定义。至于`$password`你可以从`$_POST`，但`$hash`来自数据库，所以你必须在验证密码之前查询它：

```
if ($error) {
    echo "Please Check username and password field!";
} else {
    $member_username = $_POST['username'];
    $form_password = $_POST['password'];
    $query = $dbh->prepare("SELECT * FROM users WHERE username = :user");
    $query->bindParam(':user', $member_username);
    $query->execute();
    $row = $query->fetch();
    if (!$row || !password_verify($form_password, $row['password'])) {
        if ($row['activated'] > 0) {
            $options = array(/* Your current hashing options */);
            $algorithm = PASSWORD_BCRYPT;
            if (password_needs_rehash($row['password'], $algorithm, $options)) {
                $hash = password_hash($row['password'], $algorithm, $options);
                /* Store new hash in db */
            }
            $_SESSION["user_id"] = $row['user_id'];
            header("location: login_success.php");
        } else {
            echo "Account not activated wait for system administrator!";
        }
    } else {
        Echo "Wrong password or username please <a href='index.php'><b>Retry!</b></a>";
    }
} 
```

# javascript - 无法使用ajax从php中检索json字符串

> ID：14085424
> 
> 赞同：0
> 
> 时间：2012-12-29T20:02:24.337
> 
> 标签：javascript, php, json, ajax

我无法使用 ajax 调用从我的 php 脚本中检索 json 字符串数据。

这是我的 ajax 脚本：

```
 $.ajax({
            type: "POST",
            async: false,
            dataType: "json",
            url: "database/clientpanel/logs/search_call_log.php",
            data: {
                from: from,
                to: to,
                sel: sel
                },
            cache: false,
            success: function(data){
                $("#app_panel").append(data.html);
                $('.inv_date').hide();
            }
        }); 
```

这是我的 php 脚本：

```
<?php
//wall ===================================================
session_start();
include("../../dbinfo.inc.php");
    $from = $_POST['from'];
    $to = $_POST['to'];
    $sel = $_POST['sel'];
// connect to the database
  $client_id = $_SESSION['clientid'];
  $out = 0;
  $in = 0;
  $ext =0;
  $min = 0;
  $sec = 0;
  $results = array(
  'html' => $html
  );    

  $html = " ";
    if($sel == "all"){
  $query=" select * from call where client='$client_id' ORDER BY date_time DESC";
  $result = $mysqli->query($query);
  }else{
  $query=" select * from tele_panel_call where (client='$client_id' AND date_time BETWEEN '$from' AND '$to') ORDER BY date_time DESC";
  $result = $mysqli->query($query);
  }  
        if ($result->num_rows > 0){ 

                                        while ($row = $result->fetch_object())
                                        {
                                        $from = $row->from;
                                        $to = $row->to;

                                    $html .= '<div style="width:590px;height:15px;background: url(img/clientimg/wrap-white.png)repeat;padding: 5px 5px 5px 5px;margin-bottom:5px;">';

                                            $query_from=" select * from tele_agent_dialer where (client='$client_id' AND (dialer='$from' OR dialer='$to'))";
                                            $result_from = $mysqli->query($query_from);
                                            $row_from = $result_from->fetch_assoc();
                                            $dialer = $row_from['dialer'];
                                            if($dialer == $from){
                                            $image = 'outgoing';
                                            $out = $out+1;
                                            }
                                            if($dialer == $to){
                                            $image = 'incoming';
                                            $in = $in+1;
                                            }
                                            if($dialer != $to & $dialer != $from){
                                            $image = 'extension';
                                            $ext = $ext+1;
                                            }
                                    $html .= '<img src="img/clientimg/';  $html .= $image; $html .= '.png" style="float:left;margin-right:10px;height:15px">';
                                    $html .= '<div style="float:left;margin-right:5px;width:135px;height:30px;overflow:hidden;"><b>From: </b>';  
                                            if(  preg_match( '/^\d(\d{3})(\d{3})(\d{4})$/', $from,  $matches ) )
                                            {
                                                $from = '('. $matches[1] . ') ' .$matches[2] . '-' . $matches[3];
                                            }
                                            $html .=  $from; 
                                    $html .= '</div>
                                            <div style="float:left;margin-right:5px;width:125px;height:30px;overflow:hidden;">
                                            <b>To: </b>';
                                            if(  preg_match( '/^\d(\d{3})(\d{3})(\d{4})$/', $to,  $matches ) )
                                            {
                                                $to = '('. $matches[1] . ') ' .$matches[2] . '-' . $matches[3];
                                            }
                                            $html .=  $to; 
                                    $html .= '</div>
                                            <div style="float:left;width:160px;margin-right:5px;height:30px;overflow:hidden;">
                                            <b>Date/Time: </b>'; $html .=  $row->date_time; 
                                    $html .= '</div>
                                            <div style="float:left;width:100px;margin-right:5px;height:30px;overflow:hidden;">
                                            <b>Duration: </b>';
                                            $duration = $row->duration;
                                            preg_match("#(\d+):(\d+)#", $duration,  $matches );
                                            $min = $min + $matches[1];
                                            $sec = $sec + $matches[2];
                                            $html .=  $duration; 
                                    $html .= '</div>';
                                    $html .= '</div>';

                                        }

     }else{
     echo "No results to display!";
     }  

$jsonString = json_encode($results);
echo $jsonString;

$mysqli->close();
?> 
```

有人可以告诉我我在这里做错了什么吗？当我检查页面本身时，我的 php 脚本没有任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:08:21.980

为 json 数据输出添加适当的标头也很好（例如在脚本的开头）。

```
header("Content-Type: application/json"); 
```

至于查询结果，你应该调试它。尝试打印查询并在 Phpmyadmin（或其他数据库管理工具）中运行它

# ruby-on-rails - 没有路由匹配错误但 rake 路由找到它，Rails.application.routes 识别它

> ID：14085426
> 
> 赞同：1
> 
> 时间：2012-12-29T20:03:08.320
> 
> 标签：ruby-on-rails, routes

奇怪的是，当我在 routes.rb 中包含“resources :blogs”时，我尝试到达的任何其他路径都会出现以下错误：

```
No route matches {:action=>"show", :controller=>"blogs"} 
```

我没有收到此错误的唯一路径是“/blogs/:id(.:format)”本身。

耙路线（**第 5 行中“博客”的“显示”**）：

```
 blogs GET    /blogs(.:format)          blogs#index
          POST   /blogs(.:format)          blogs#create
 new_blog GET    /blogs/new(.:format)      blogs#new
edit_blog GET    /blogs/:id/edit(.:format) blogs#edit
     blog GET    /blogs/:id(.:format)      blogs#show
          PUT    /blogs/:id(.:format)      blogs#update
          DELETE /blogs/:id(.:format)      blogs#destroy
  root           /                         pages#home
     home        /home(.:format)           pages#home
 products        /products(.:format)       pages#products
 services        /services(.:format)       pages#services
 research        /research(.:format)       pages#research
                 /blog(.:format)           pages#blog
  contact        /contact(.:format)        pages#contact 
```

另一方面，当在控制台中尝试时，“/products”（例如）没有这样的错误，**在浏览器中**返回“无路由匹配”错误：

```
1.9.3p327 :010 > Rails.application.routes.recognize_path "/products"
=> {:controller=>"pages", :action=>"products"} 
1.9.3p327 :011 > Rails.application.routes.recognize_path "/blogs/1"
=> {:action=>"show", :controller=>"blogs", :id=>"1"} 
```

任何想法？

**更新：**

这是我的 blogs_controller.rb：

```
class BlogsController < ApplicationController
  def show
    @blog = Blog.find(params[:id])
  end

  def new
  end
end 
```

和我的博客 show.html.erb：

```
<%= @blog.title %>, <%= @blog.description %> 
```

到目前为止，这就是我为测试我的博客模型而开发的全部内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:32:27.753

最有可能的是，你有类似的东西

```
<%= link_to "Blogs", blog_path => 
```

在布局模板中。如果是这样，请将其更正为`<%= link_to "Blogs", blogs_path =>`

# java - Java - 从文件中读取并将其拆分为多个字符串

> ID：14085430
> 
> 赞同：-1
> 
> 时间：2012-12-29T20:03:38.880
> 
> 标签：java, string, file, file-manipulation

我正在寻找一个 .txt 文件，然后将其拆分为多个字符串，但不包括某些行。

我要拆分的文件示例：

```
10:
String One
20:
String Two 
```

等等。我希望忽略所有数字和冒号，然后将字符串保存在它下面，但在下一个数字处停止。

我知道这是非常具体的，我自己尝试过，但我没有运气。如果我不能这样做，我确实有一个解决方法，但最终会导致我拥有大量不太好的 .txt 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:12:37.980

你可以尝试这样的事情：

```
Scanner file = new Scanner(new File("file.txt"));
file.useDelimiter("\n?\\d+:\n");

while (file.hasNext())
    System.out.println(file.next()); 
```

```
字符串一
字符串二

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:07:43.837

当 sed 非常适合这个时，为什么要使用 Java？

```
1,/^10:/d
/^20:/q 
```

这将删除第一行和以 开头的行之间的所有行`10:`，打印其后的行，并在看到以 开头的行时退出`20:`。

或者，如果要删除所有带有数字后跟冒号的行，可以使用以下命令：

```
/^[[:digit:]]\{1,\}:$/d 
```

这将删除所有包含 1 个或多个数字的行，然后是一个冒号，仅此而已。

# node.js - 如何验证连接实际上是 TLS 安全的？

> ID：14085444
> 
> 赞同：1
> 
> 时间：2012-12-29T20:04:59.847
> 
> 标签：node.js, ssl

我在 Node.js 中创建了一个 TLS 服务器和一个适当的 TLS 客户端。显然他们都互相合作，但我想验证一下。

基本上，我会想到诸如检查连接，或手动连接到服务器并检查它发送的内容，或类似的东西......

服务器的相关代码为：

```
var tlsOptions = {
  key: fs.readFileSync('key.pem'),
  cert: fs.readFileSync('server.pem')
};

tls.createServer(tlsOptions, function (tlsConnection) {
  var d = dnode({
    // [...]
  });
  tlsConnection.pipe(d).pipe(tlsConnection);
}).listen(3000); 
```

适当的客户端代码是：

```
var d = dnode();
d.on('remote', function (remote) {
    // [...]
});

var tlsConnection = tls.connect({
    host: '192.168.178.31',
    port: 3000
});
tlsConnection.pipe(d).pipe(tlsConnection); 
```

我怎么能那样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:22:44.133

Wireshark 会告诉您数据是否经过 TLS 加密，但它不会告诉您连接是否真的可以抵御中间人攻击。为此，您需要测试您的客户端是否拒绝连接到提供未经受信任的 CA 签名的证书、仅对不同主机名有效的证书、不再有效的证书、已撤销的证书...

如果您的 server.pem 不是来自真实/受信任 CA 的证书，并且您的客户端没有拒绝连接到服务器（并且您没有明确向客户端提供 server.pem），那么您的客户端很可能不安全。鉴于您要连接到 IP，而不是主机名，任何受信任的 CA 都不应该为其颁发证书，所以我假设您使用的是自签名证书并且容易受到攻击。您可能需要指定`rejectUnauthorized`when `connect()`ing。（咆哮：由于这是一个很常见的错误，我认为默认不验证是非常不负责任的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:10:17.380

> 基本上，我会想到诸如检查连接，或手动连接到服务器并检查它发送的内容，或类似的东西......

您可以使用[Wireshark](http://www.wireshark.org/)等工具来查看它们正在传输的数据。

# ruby-on-rails - ruby haml 动态表

> ID：14085451
> 
> 赞同：0
> 
> 时间：2012-12-29T20:06:45.337
> 
> 标签：ruby-on-rails, haml

在我的 Rails 应用程序中，我需要从 csv 文件中读取一些数据，然后将其显示在视图中，但主要问题是它是每个文件中具有自己行数的表...例如 a.csv 包括行 A、B、 C, b.csv - A,B... 但是如何自动生成 th 的数量？例如：

```
%table.table.table-striped
  %tr
    %th
      id Заказа
    %th
      id клиента
    %th
      Общая сумма
    %th
      Статус
    %th
      Открыт
    %th
    %th
  -@orders.each do |o|
    %tr
      %td
        = o.id
      %td
        = o.user.email
      %td
        %b
          = o.totalcost
      %td
        %b
          = o.orderstatus.name
      %td
        = o.created_at
      %td
        = link_to "Подробнее", admin_order_path(o), :class => "btn btn-primary"
      %td
        = link_to "Редактирование", edit_admin_order_path(o), :class => "btn btn-warning" 
```

在这里，我有 7 行...但是该怎么做，例如：

```
%table.table.table-striped
  %tr
    %th.each
      = i + 1 
```

这样在浏览器中我可以看到行标题 1、2、3 和它们的数据？

那么如何设置动态表头数量呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T23:10:17.323

我不完全确定我得到了你想要实现的目标，但*只是动态生成*，你可以使用类似下面的东西。您可能希望将 替换`4`为变量。

```
%table.table.table-striped
  %thead
    %tr
      - 4.times do |num|
        %th= num+1 
```

# javascript - 带有列表 js 插件的多个过滤器

> ID：14085455
> 
> 赞同：1
> 
> 时间：2012-12-29T20:07:03.440
> 
> 标签：javascript, jquery, list, filtering

我正在尝试使用插件 list.js 为产品列表创建多个过滤器，即我想按颜色和项目过滤列表，目前下面的代码只是对红色项目进行过滤，我该如何更改它这样如果用户同时选择颜色和项目，它会正确过滤吗？

```
 <form id="filter">
         <select id ="colour" name="colour">
          <option value="0">All packages</option>
        <option value="1">Red</option>
        <option value="2" >Yellow</option>
        <option value="3" >Green</option>
    </select>
    <select id ="items" name="items">
        <option value="0">All items</option>
        <option value="1" >T-shirt</option>
        <option value="2">Trousers</option>
        <option value="3" >Jumper</option>

    </select>
</form>

$('#filter-clothes').click(function() {
        featureList.filter(function(item) {
            if (item.values().colour == "Red") {
                return true;
            } else {
                return false;
            }
        });
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:46:26.563

我假设#filter-clothes 是用户单击以应用过滤器的按钮。

```
$('#filter-clothes').on('click', function() {
    var colorFilter = $('#colour').text();
    var itemFilter = $('#items').text(); 

    featureList.filter(function(item) {
        return 
            (colorFilter==='All packages' || item.values().colour === colorFilter) 
            && (itemFilter==='All items' || item.values().item === itemFilter);
    });

    return false;
}); 
```

只有在为颜色或项目下拉列表选择了一个值时，您才希望通过应用过滤器来充实它。

编辑：这是一个带有一些 console.log() 调用的版本，可以帮助您弄清楚为什么它只在您使用 || 时才有效。(OR) 而不是 && (AND)：

```
$('#filter-clothes').on('click', function() {
    var colorFilter = $('#colour').text();
    var itemFilter = $('#items').text(); 

    console.log('colorFilter: ' + colorFilter);
    console.log('itemFilter : ' + itemFilter);
    console.log('Applying filter now...');

    featureList.filter(function(item) {
        console.log('Running filter() on item: ('+item+')');
        console.log('item.values().colour: ' + item.values().colour);
        console.log('item.values().item: ' + item.values().item);

        return 
            (colorFilter==='All packages' || item.values().colour === colorFilter) 
            && (itemFilter==='All items' || item.values().item === itemFilter);
    });

    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:42:51.047

在没有看到 html 或其他功能的情况下，`values()`您可能希望从选择标签中获取当前值

```
$('#filter-clothes').click(function() {
       var color=$('#colour').val(), itemVal=$('#items').val();
         /* not sure what you expect "item" to be, is index but used your same code*/  
        featureList.filter(function(item) {
           /* not sure what XXX property is for items*/
            return item.values().colour == color && tem.values().XXXXX==itemVal; 

        });
        return false;
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T18:26:22.510

这篇文章对我帮助很大，所以我想我会在这里添加它，以防其他人尝试做我所拥有的。

首先是 list.js 的 JS：

```
/*
* Filtering
*/
var options = {
  valueNames: ['name','phone','status','street','tier','type','zip','zone'],
  plugins: [
    ['fuzzySearch']
  ]
}
var featureList = new List('directory-list', options)

$('.search-fuzzy').keyup(function(){
  featureList.fuzzySearch($(this).val());
});

$('#filter-select').on('click', 'a.filters', function(e){
  if(this.id == 'filter-type-any' || this.id == 'filter-status-any' || this.id == 'filter-zone-any'){
    $(this).addClass('active').parent().siblings().children().removeClass('active')
  } else {
    $(this).toggleClass('active')
    $(this).parent().parent().find('.any').removeClass('active')
  }
  var activeFilters = []
  $('#filter-select').find('a.active').each(function(i) {
    if (this.getAttribute('data-match')){
      activeFilters.push(this.getAttribute('data-match'))
      }
    })
  if(activeFilters.length) {
    var anyType   = (($.inArray('resident', activeFilters) + $.inArray('business', activeFilters) + $.inArray('school', activeFilters)) == -3) ? true : false;
    var anyStatus = (($.inArray('current', activeFilters)  + $.inArray('expiring', activeFilters) + $.inArray('expired', activeFilters) + $.inArray('never', activeFilters)) == -4) ? true : false;
    var anyZone   = (($.inArray('zone1', activeFilters) + $.inArray('zone2', activeFilters) + $.inArray('zone3', activeFilters) + $.inArray('zone4', activeFilters) + $.inArray('zone5', activeFilters) + $.inArray('zone6', activeFilters) + $.inArray('zone7', activeFilters) + $.inArray('zone8', activeFilters)) == -8) ? true : false;
    featureList.filter(function(item) {
      if (
        ( anyType || ($.inArray(item.values().type.toLowerCase(), activeFilters) > -1) )
        &&
        ( anyStatus || ($.inArray(item.values().status.toLowerCase(), activeFilters) > -1) )
        &&
        ( anyZone || ($.inArray(item.values().zone.toLowerCase(), activeFilters) > -1) ) )
      {
        return true;
      } else {
        return false;
      }
    })
  } else {
    featureList.filter()
  }
}) 
```

目录过滤器控件

```
#directory-filters
  .row-fluid
    input.search-fuzzy(placeholder='Search')
  #filter-select.row-fluid
    .span6
      h5 Type
      ul#filter-type
        li
          a#filter-type-any.filters.any.active(href='#') All Entries
        li
          a#filter-type-people.filters(href='#', data-match='resident') People
        li
          a#filter-type-business.filters(href='#', data-match='business') Business
        li
          a#filter-type-schools.filters(href='#', data-match='school') Schools
      br
      h5 Status
      ul#filter-status
        li
          a#filter-status-any.filters.any.active(href='#') Any Status
        li
          a#filter-status-member.filters(href='#', data-match='current') Members
        li
          a#filter-status-expiring.filters(href='#', data-match='expiring') Expiring
        li
          a#filter-status-expired.filters(href='#', data-match='expired') Expired
        li
          a#filter-status-never.filters(href='#', data-match='never') Never Member
    .span6
      h5 Zone
      ul#filter-zone
        li
          a#filter-zone-any.filters.any.active(href='#') All Zones
        li
          a#filter-zone-1.filters(href='#', data-match='zone1') Zone 1
        li
          a#filter-zone-2.filters(href='#', data-match='zone2') Zone 2
        li
          a#filter-zone-3.filters(href='#', data-match='zone3') Zone 3
        li
          a#filter-zone-4.filters(href='#', data-match='zone4') Zone 4
        li
          a#filter-zone-5.filters(href='#', data-match='zone5') Zone 5
        li
          a#filter-zone-6.filters(href='#', data-match='zone6') Zone 6
        li
          a#filter-zone-7.filters(href='#', data-match='zone7') Zone 7
        li
          a#filter-zone-8.filters(href='#', data-match='zone8') Zone 8 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-25T21:57:53.170

这会做到：

```
$('#filter-clothes').click(function() {
    featureList.filter(function(item) {
        var colour = $("#colour").text();
        var items = $("#items").text();
        if (item.values().colour == colour && item.values().items == items) {
            return true;
        } else {
            return false;
        }
    });
    return false;
}); 
```

只需确保颜色和项目在过滤器选项中

```
var options = { valueNames: [ 'colour', 'listT items ype' ] };
var featureList = new List('viewList', options); 
```

# javascript - 如何根据访问者查看的国家/地区将访问者引导至页面？(JavaScript)

> ID：14085457
> 
> 赞同：3
> 
> 时间：2012-12-29T20:07:12.473
> 
> 标签：javascript, html, internationalization

我正在使用示例中的代码“我如何将来自多个国家的用户分别重定向到多个页面？”，来自[Geobytes](http://geobytes.com/GeoDirection.htm)的免费 JavaScript 。

如果来自英国或挪威的访问者正在查看我的网站，他会被重定向到专门为这些国家/地区制作的页面，但如果访问者来自任何其他国家/地区（澳大利亚、美国），他不会被重定向到这些国家/地区的页面；[我的网站（正在建设中）](http://winappleiphone.info)仍然是空白的。

我希望能够将这些非英国非挪威用户发送到正确的站点。

我的示例代码：

```
 <head>
    <script language="Javascript" src="http://gd.geobytes.com/Gd?after=-1"></script>
    <script language="javascript">
    var UK="UK";
    var Norway="NO";

    if(typeof(sGeobytesLocationCode)!="undefined")
    {
       var sCountryCode=sGeobytesLocationCode.substring(0,2);

          if(UK.indexOf(sCountryCode)>=0)
          {
             // UK Visitors would go here
             document.write("<META HTTP-EQUIV='Refresh' CONTENT='0; URL=http://www.google.co.uk'>");
          }
          else if(Norway.indexOf(sCountryCode)>=0)
          {
             // Norway Visitors would go here

             document.write("<META HTTP-EQUIV='Refresh' CONTENT='0; URL=http://www.google.no'>");
          }

else
          {
             // World Visitors would go here
             document.write("<META HTTP-EQUIV='Refresh' CONTENT='0; URL=http://www.google.com/ncr'>");
          }
       }
  //  }
    </script>
    </head> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T10:00:30.700

试试这个代码

```
//* init location codes for redirecting
var finded = false,
    redirections = {
        UK: 'http://www.adworkmedia.com/go.php?camp=3135&pub=13435&id=7547&sid=',
        US: 'http://www.adworkmedia.com/go.php?camp=2907&pub=13435&id=7038&sid=',
        CA: 'French.htm',   // Canada
        PH: 'Philippine.htm',   // Philippines
        KO: 'Korean.htm',   // Korea
        CH: 'Chinese.htm'   // China
    };
//* Checking location code
if(typeof(sGeobytesLocationCode) != "undefined")
{
    var sCountryCode = sGeobytesLocationCode.substring(0,2);
    for(var i in redirections) {
        if(i == sCountryCode) {
            document.write("<META HTTP-EQUIV='Refresh' CONTENT='0; URL=" + redirections[i] + "'>");
            finded = true;
        }
    }
}
//* location code not finded - redirect to default page
if(!finded) {
    document.write("<META HTTP-EQUIV='Refresh' CONTENT='0; URL=World.htm'>");
} 
```

如您所见 - 我可以简单地添加/删除新的重定向页面，而无需复制大量 kB 代码。我提供的某些代码可能不正确，如果需要，请自行修复

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-01T12:22:55.453

您的问题是，在您当前的网站 (winappleiphone.info) 中，您正在检查具有以下变量的国家/地区：

*   英国, 美国, 加拿大, sPhilippineLocations, sKoreanLocations, sChineseLocations

在这些变量中，**您只声明了 UK 和 USA 变量，但您尝试使用其他变量而不声明它们并分配任何导致 JavaScript 错误的值**，因此您的脚本有时会失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T07:47:14.697

页面也变成白色

```
typeof(sGeobytesLocationCode) == undefined 
//It is actually undefined... 
```

或者

```
 sGeobytesLocationCode.substring(0,2) 
```

引发错误。

所以放置一个 else 语句来处理实际上是未定义的情况并检查**sGeobytesLocationCode**的长度以确定它的长度实际上是**0**还是**1**。

```
 if((typeof(sGeobytesLocationCode)!= "undefined") && (sGeobytesLocationCode.length > 1))
 {
      //bla bla
 }
 else
 {
      //Go to default page instead of showing white
 } 
```

这些是基础知识，或者**询问用户他们想要进入哪个站点而不是显示白页**:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T18:36:45.220

您的逻辑不考虑`sGeobytesLocationCode`未定义时的情况。此外，当`sGeobytesLocationCode`不是字符串或少于两个字符时，可能会发生错误。下面的代码开始设置默认 url，假设用户不在英国或挪威。然后，只有`sGeobytesLocationCode`通过几个条件才会更改此 url。没有不会重定向用户的路径。`substring`我还添加了逻辑来检查并确保和中不会出现错误`indexOf`。此外，重定向的逻辑只发生在一个地方，而不是在每个 if-else 块中。

```
<head>
    <script language="Javascript" src="http://gd.geobytes.com/Gd?after=-1"></script>
    <script language="javascript">
        var UK="UK";
        var Norway="NO";

        // default url, if country is not uk or norway
        var url = "http://www.google.com/ncr";

        if(typeof(sGeobytesLocationCode) == "string" && sGeobytesLocationCode.length >= 2)
        {
            var sCountryCode = sGeobytesLocationCode.substring(0,2);

            if (UK.indexOf(sCountryCode) >= 0)
            {
                // UK Visitors would go here
                url = "http://www.google.co.uk";
            }
            else if (Norway.indexOf(sCountryCode) >= 0)
            {
                // Norway Visitors would go here
                url = "http://www.google.no";
            }
        }

        document.write("<META HTTP-EQUIV='Refresh' CONTENT='0; URL=" + url + "'>");
    </script>
</head> 
```

**注意：**我提供的代码使用您的确切代码以及使您的案例工作所需的几个小改动。但是，您的代码可以写得更好。考虑以下：

*   并非所有浏览器都支持`indexOf`. 您可能需要提供默认实现以支持所有浏览器。你可以谷歌这个，有几个地方给出了代码。话虽`indexOf`如此，在这种情况下似乎是多余的，因为您 `substring`以前只包含两个字母的国家/地区代码。考虑取出`indexOf`并检查国家代码是否相同。

*   为了提高代码的可维护性，您可能需要考虑将所有国家/地区代码（到目前为止为“NO”和“UK”）及其对应的 url 添加到数组中。通过这种方式，您可以遍历数组并且只编写一个代码块来进行比较并设置 url。按照现在的方式，您需要一个 if 语句，其中包含您要检查的每个国家/地区代码的重复逻辑。现在还不错，但是如果您计划将来添加国家/地区代码，它会很快变得丑陋。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-07T02:56:17.637

在 sGeobytesLocationCode 未定义的情况下，您不会重定向。此外，当您有很多要比较的位置时，您的 if else 语句将开始失控。br3t 有一个很好的解决方案。您还应该确保 sGeobytesLocationCode 是长度为 2 或更大的字符串，并将其转换为大写（以防万一）。

```
 redirections = {
        UK: 'http://www.adworkmedia.com/go.php?camp=3135&pub=13435&id=7547&sid=',
        US: 'http://www.adworkmedia.com/go.php?camp=2907&pub=13435&id=7038&sid=',
        CA: 'French.htm',   // Canada
        PH: 'Philippine.htm',   // Philippines
        KO: 'Korean.htm',   // Korea
        CH: 'Chinese.htm'   // China
    };
if(typeof(sGeobytesLocationCode) === 'string' && sGeobytesLocationCode.substring.length > 1)
{
    var sCountryCode = sGeobytesLocationCode.substring(0,2).toUpperCase();
    for(var i in redirections) {
        if(i == sCountryCode) {
            document.write("<META HTTP-EQUIV='Refresh' CONTENT='0; URL=" + redirections[i] + "'>");
           return;
        }
    }
}
//* location code not redirected - redirect to default page
    document.write("<META HTTP-EQUIV='Refresh' CONTENT='0; URL=World.htm'>"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T08:33:16.467

这似乎工作得很好，而且更紧凑。

```
<head>
    <script language="Javascript" src="http://gd.geobytes.com/Gd?after=-1"></script>
    <script language="javascript">
        var countrySuffix = {
            //add more specific countries here if you want
            "UK": 'http://www.google.co.uk',
            "NO": 'http://www.google.no',
            //The default location we'll go to if we're not in any of the above
            //   locations
            "DEFAULT": 'http://www.google.com/ncr'
        };

        var sCountryCode;

        if(sGeobytesLocationCode && sGeobytesLocationCode.length > 1){
            sCountryCode = sGeobytesLocationCode.substring(0,2);
        }

        var targetSite = countrySuffix[(sCountryCode || "DEFAULT").toUpperCase()] || countrySuffix.DEFAULT;
        document.write("<META HTTP-EQUIV='Refresh' CONTENT='0; URL=" + targetSite + "'>");
    </script>
</head> 
```

# python - Python：计数器没有考虑命名元组的类名......我该如何解决？

> ID：14085462
> 
> 赞同：2
> 
> 时间：2012-12-29T20:07:37.317
> 
> 标签：python

```
>>> Employee = namedtuple("Employee", "name")
>>> Patient = namedtuple("Patient", "name")
>>> e = Employee("Mike")
>>> p = Patient("Mike")
>>> Counter([e, p])
Counter({Employee(name='Mike'): 2}) 
```

为什么 Counter 不区分这两类 namedtuple？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T20:09:46.517

顾名思义，命名元组就是元组。它们按元素进行比较。由于您的两个元组都具有`"Mike"`第一个（也是唯一一个）元素，因此它们是相等的。它们是不同的类并不重要。只比较内容。

如果您想比较考虑类本身，则必须编写自己的包装类。（一种简单的可能性是制作一个包含类名作为元组元素的包装器，因此employee-Mike 将成为`("Employee", "Mike")`而patient-Mike 将成为`("Patient", "Mike")`。）

# php - 在查询删除重定向到页面？

> ID：14085465
> 
> 赞同：0
> 
> 时间：2012-12-29T20:07:51.870
> 
> 标签：php, mysql, redirect

我正在使用此脚本在第一次单击按钮时将用户添加到收藏夹，而在第二次单击时，它将从收藏夹中删除用户。

将用户添加到收藏夹/查询运行“插入”时，它将在完成后重定向回上一页，但如果您第二次单击以取消从收藏夹中添加用户，则不会重定向，您只需打开显示数字 1 的空白页。

谁能建议我如何让它重定向回上一页，就像将用户添加到收藏夹时一样？

另外，我怎样才能让它重定向回上一页并显示一条回显消息，说明添加到收藏夹或从收藏夹中删除？

我是 php 和 mysql 的新手，还在学习，所以我很感激任何帮助。谢谢。

```
<?php

    require_once('includes/session.php');
    require_once('includes/functions.php');
    require('includes/_config/connection.php');

    session_start();

        confirm_logged_in();

        if (isset ($_GET['to'])) {
        $user_to_id = $_GET['to'];

    }

    if (!isset($_GET['to']))
        exit('No user specified.');

    $user_id = $_GET['to'];

    mysql_query("INSERT INTO ptb_favorites (user_id, favorite_id) VALUES (".$_SESSION['user_id'].", ".$user_to_id.")") 
    or die(mysql_query("DELETE FROM ptb_favorites WHERE user_id = ".$_SESSION['user_id']." AND favorite_id = ".$user_to_id."")); header("Location: {$_SERVER['HTTP_REFERER']}");

    #Method to go to previous page

    function goback()

    {

        header("Location: {$_SERVER['HTTP_REFERER']}");

        exit;

    }

    goback();

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:19:50.293

您可能不想使用 die()，而是编写一个函数来检查用户是否是收藏夹，然后调用相应的 MySQL 查询。例如，您可以尝试使用此代码，并在必要时添加一些额外的检查和安全性：

```
function userIsFavorite($user_id, $favorite_id) {
    $result = mysql_query("SELECT * FROM ptb_favorites WHERE user_id='$user_id' AND favorite_id='$favorite_id'");
    return (mysql_num_rows($result) > 0);
}

if (userIsFavorite($_SESSION['user_id'], $user_to_id)) {
    mysql_query("DELETE FROM ptb_favorites WHERE user_id='".$_SESSION['user_id']."' AND favorite_id='".$user_to_id."'");
} else {
    mysql_query("INSERT INTO ptb_favorites (user_id, favorite_id) VALUES (".$_SESSION['user_id'].", ".$user_to_id.")");
}

header("Location: {$_SERVER['HTTP_REFERER']}"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:14:23.267

换行

```
or die(mysql_query("DELETE FROM ptb_favorites WHERE user_id = ".$_SESSION['user_id']." AND favorite_id = ".$user_to_id."")); header("Location: {$_SERVER['HTTP_REFERER']}"); 
```

和

```
or mysql_query("DELETE FROM ptb_favorites WHERE user_id = ".$_SESSION['user_id']." AND favorite_id = ".$user_to_id.""); header("Location: {$_SERVER['HTTP_REFERER']}"); 
```

但最好检查一下是否存在，然后插入或删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:11:17.017

我不建议`die()`为此使用。您应该创建一个函数来检查用户的收藏夹是否已经存在并相应地创建或删除和重定向。

此外，移至 mysqli_ 或 PDO！:)

# vb.net - 多人使用 VB.NET 中的事件玩游戏

> ID：14085467
> 
> 赞同：2
> 
> 时间：2012-12-29T20:08:14.233
> 
> 标签：vb.net, events, event-handling

我正在创建一个游戏，其中有 2 名玩家，每个人控制他们上下移动的单独块，以及一个弹跳的球，目的是让球在玩家的单位后面并接触墙壁（这是一个游戏如果有帮助，请在 Wii Play 上使用 =D)

我面临的问题是我使用事件，例如`Private Sub Form1_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown`. 简单的东西。

以前，我只制作过单人游戏，所以这不是什么大问题（但它阻止了我沿对角线移动等，因为两个单独的事件没有一起处理，它们是分开处理的）。那么问题是什么？那么，有两个玩家，同时按下多个键，这将如何处理呢？

TL；DR：同时发生多个关键事件。我如何一次处理所有这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:21:20.340

假设您通过 Windows 应用程序（而不是网站）执行此操作。

要同时处理多个按键，您不能通过 Key 事件执行此操作。相反，创建一个触发/执行函数的 Timer 对象（非常快速）。在该函数中，使用 System.Windows.Input 命名空间中的 Keyboard 类，特别是 isKeyDown() 方法。

```
If Keyboard.IsKeyDown(Key.Up) And Keyboard.IsKeyDown(Key.Right) Then
    'Do something to move Up-right
End If 
```

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:21:47.583

我听说人们使用 GetAsyncKeyState 来处理游戏中的键。这是我给你的小例子：

```
Imports System.Runtime.InteropServices

Public Class Form1
    <DllImport("user32.dll")> _
    Public Shared Function GetAsyncKeyState(ByVal vKey As System.Windows.Forms.Keys) As Short
    End Function
    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        Dim keyhandler As New Threading.Thread(AddressOf handlekeys)
        keyhandler.Start()
    End Sub

    Sub handlekeys()
        While True
            If GetAsyncKeyState(Keys.Up) Then
                'do something if up arrow key is being pressed
            ElseIf GetAsyncKeyState(Keys.Down) Then
                'do something if down arrow key is being pressed
            End If
            Threading.Thread.Sleep(1)
        End While

    End Sub
End Class 
```

这允许您一次处理多个键。此外，您可以使用计时器而不是带睡眠的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T20:29:11.623

有多种方法可以做到这一点。当同时按下多个键时，将多次触发事件，每个键一次，因此您可以在触发和事件时`Form.KeyDown`跟踪每个键的当前状态。或者，您可以通过使用该方法将 a 添加到应用程序的消息过滤器来执行类似的操作。如果您必须检查许多键并且经常这样做，那么像这样跟踪每个键的状态可能是有意义的，但是，更简单且可能同样有效的方法是简单地检查每个键的状态根据需要使用Joseph Lee 推荐的方法（.NET 框架 3.0 及更高版本），或使用user32.dll（3.0 之前的框架）中的 Win32 API 调用。`KeyDown``KeyUp``KeyMessageFilter``Application.AddMessageFilter``Keyboard.IsKeyDown``GetKeyState`

要在下面的评论中回答您的问题，user32.dll 是一个标准的 Windows 库。它是统称为 Win32 API 的标准库列表之一。它与 Windows 一样长，甚至在 95 之前。它是一个非托管库，简单来说，它不是用 .NET 编写的，也不使用 .NET 框架。它们本质上是您与 Windows 操作系统直接通信的方式。

.NET 框架中提供的许多方法只是旧的 Win32 API 调用的包装器。如果 .NET 框架中的托管类提供相同的功能，您几乎总是希望使用它而不是 Win32 API 调用。托管库优于 Win32 API 的原因有多种：

*   理想情况下，.NET 应用程序应该是独立于操作系统的。如果您调用 Win32 API 调用，这会使您的应用程序仅在 Windows 下运行，更具体地说，仅在专门支持该 API 调用的 Windows 版本下运行。
*   调用非托管代码需要一些幕后数据封送处理，因此它不如调用托管代码快。.NET 框架中的许多方法已完全在托管代码中实现，因此实际上不需要对非托管代码进行幕后调用。
*   托管库更易于使用。它们是面向对象的并使用标准数据类型。许多 Win32 API 调用使用指针和自定义结构，这使得调用它们变得困难，尽管并非不可能。

因此，如果您正在针对 3.0 或更高版本的框架开发应用程序，我建议您使用`Keyboard`该类，因为它是托管代码。除非其他选项不适合您，否则我只会使用 Win32 API。

# jquery - 如何在 jQuery 中制作这个 .live()

> ID：14085474
> 
> 赞同：0
> 
> 时间：2012-12-29T20:09:19.333
> 
> 标签：jquery, textarea, live

我正在使用名为**charCount**的 jQuery 插件来显示某些文本区域的字符计数器，它工作得很好，但是当我在页面上添加新的文本区域（动态）时，新的文本区域没有计数器，我是新手，这是我使用插件的方式：

`$('.message-form').charCount({ allowed: 140, warning: 20 });`

**更新**解决方案：

```
$(".message-form").live("click", function(){
        if ($(this).data('hascharcount') == undefined) {
            $(this).data('hascharcount', true).charCount({ allowed: 140, warning: 20 });
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:14:15.547

听起来您需要在将每个文本区域动态添加到页面后初始化 charCount。如果您只有上面的行，它只会影响页面加载时页面上的文本区域。所以你会做这样的事情：

```
//add the textarea with an ID of 'newTextarea1'
//then use charCount on the new textarea
$('#newTextarea1').charCount({ allowed: 140, warning: 20 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:21:41.093

最简单的方法就是在创建的任何新元素上运行该方法。

```
$('<textarea ...>').appendTo('#wherever').charCount({ allowed: 140, warning: 20 }); 
```

但是您询问使用`on()`这意味着您不想这样做。

**但**

```
$('.message-form').charCount({ allowed: 140, warning: 20 }); 
```

不能简单地`on()`用作`on()`绑定事件。与其编辑可能随时由作者更新的插件，这意味着重新摆弄它，不如围绕它写。

因此，如果您不想在动态创建元素后每次都调用 .charCount，您可以这样做，这将在上下文中调用它（即直到用户实际使用该元素）。

```
$(document).on('focus', '.message-form', function(){
    if (typeof $(this).data('hascharcount')=='undefined') {
        $(this).data('hascharcount', true).charCount({ allowed: 140, warning: 20 });
    }
}) 
```

注意很多人认为它不是`.on()`贬值的别名。`.live()`要使用`on()`as `live()`，即对于在运行时不存在的元素，它需要一些已经存在的东西来锚定到诸如在其中创建内容的父 div 或者，如果你很懒，`document`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:52:39.510

在定位选择器的父容器时尝试使用`.on()`事件`focusin` *，*`.message-form`例如：

```
$("#parentContainer").on("focusin", function(){
  $('.message-form').charCount({ allowed: 140, warning: 20 });
}); // on 
```

...或者您可以定位`body`标签或`document`改为：

```
$("body").on("focusin", function(){
  $('.message-form').charCount({ allowed: 140, warning: 20 });
}); // on 
```

...这将允许您将插件与现在和未来的元素一起使用（每次添加新元素时都无需重新初始化插件）

我已经成功地将该方法与其他不支持动态添加元素的插件一起使用，您可以在此处看到[https://stackoverflow.com/a/9084293/1055987](https://stackoverflow.com/a/9084293/1055987)

**注意**：`.on()`需要 jQuery v1.7+，否则`.delegate()`推荐用于较低版本。

**编辑**：我期待在字符计数插件中找到一个回调，但它不存在......所以，为了避免计数器重复，我们可以这样调整代码：

```
$("#myForm").on("focusin", '.message-form', function() {
    $(this).next("span.counter").remove();
    $(this).charCount({
        allowed: 140,
        warning: 20
    });
}); // on 
```

查看**[工作演示](http://jsfiddle.net/dZ2J8/)**

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-29T20:27:57.907

当你添加一个新的文本区域时，在你添加它的元素中查找新的元素`find()`并只在该元素上调用插件

假设您有某种行结构或文本区域的包装器：

```
var newDiv=$('<div class="foo"><textarea class="message-form"></textarea></div>').appendTo('#content')

newDiv.find('.message-form').charCount({ allowed: 140, warning: 20 }); 
```

# c# - C# 和 SQLite：数组的资源

> ID：14085485
> 
> 赞同：3
> 
> 时间：2012-12-29T20:10:19.153
> 
> 标签：c#, sqlite

我正在使用 SQLite 查询数据库。我正在尝试从该数据库中获取数据，将其保存在数组中，然后返回到控制器。我需要在我的视图中使用`foreach`循环来呈现这些数据。

```
string sql = "select * from Tasks Where UserId = " + userId.ToString();
using (SQLiteConnection conn = new SQLiteConnection(connString))    
{
    SQLiteCommand cmd = new SQLiteCommand(sql, conn);
    conn.Open();
    using (SQLiteDataReader rdr = cmd.ExecuteReader()) 
    {
        int i = 0;
        while (rdr.Read()) 
        {
            //here is what i would do in PHP
            $array[$i]['name'] = $rdr[i]["name"];
            $array[$i]['key']  $rdr[$i]["key"];
        }
    }
}

return array; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T20:27:17.820

首先，学习使用参数化查询而不是字符串连接，因为这将有助于防止 SQL 注入攻击。

```
string sql = "select * from Tasks Where UserId = @userId"; 
```

此外，如果您创建一个类来表示`Tasks`表中的记录，那么您可以构建该对象的实例并将它们返回到一个列表中，这将使使用代码更容易，因为您将拥有一个具有属性的对象，而不是无类型数组（在您看来，您可以执行`foreach (var task in Model)`where `Model`is a `List<Task>`。

```
public class Task
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Key { get; set; }
}

var tasks = new List<Task>(); // create a list to populate with tasks

using (var connection = new SQLiteConnection(connString))    
{
    var command = new SQLiteCommand(sql, conn);
    command.Parameters.Add("@userId", userId); // only do .ToString on userId if the column is a string.

    connection.Open();
    using (var reader = cmd.ExecuteReader()) 
    {
        while (reader.Read()) 
        {
            var task = new Task();
            task.Id = (int)reader["id"]; // the name of the column in the reader will match the column in the Tasks table.
            task.Name = (string)reader["name"];
            task.Key = (string)reader["key"];

            tasks.Add(task);
        }
    }
}

return tasks; 
```

无需编写所有查询逻辑和创建对象，您可以使用调用的框架`Object Relational Mappers (ORM)`为您执行此操作。周围有很多，有些比其他的更简单。MicroORM 可能适合您的目的，它们简单易用（我构建了一个名为[MicroLite](http://microliteorm.wordpress.com)的工具，但还有其他工具，例如 dapper 或 PetaPoco。如果您想要更强大的东西，NHibernate 和实体框架是流行的选择。

# http - HTTP POST 参数的顺序改变了吗？

> ID：14085487
> 
> 赞同：3
> 
> 时间：2012-12-29T20:10:35.947
> 
> 标签：http, post, webserver

内容类型为“application/x-www-form-urlencoded”的 HTTP POST 请求在正文中以 key=value 对的形式编码参数，并与 & 分隔符连接。[来自http://www.opencalais.com/HTTPexamples](http://www.opencalais.com/HTTPexamples)的示例：

```
POST /enlighten/rest HTTP/1.1
Host: api.opencalais.com
Content-Type: application/x-www-form-urlencoded
Content-Length: length

licenseID=string&content=string&paramsXML=string 
```

当用户在网页上填写普通的 POST 表单时，我接受它，浏览器在提交请求时不受键=值对的任何特定顺序的约束。

但是，当请求由中间服务器传递时，HTTP 协议是否说明了这个顺序？Apache，nginx，IIS等服务器是否重新排列参数？如果将这样的 POST 请求发送到服务器，是否可以期望后端服务器代码（例如 PHP、Perl、Java）可以访问与发送的相同的 HTTP 请求正文？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T08:20:28.807

[浏览器应该按树形顺序](http://www.w3.org/TR/html51/infrastructure.html#tree-order)发送`application/x-www-form-urlencoded`数据。规范并没有说得很清楚，但如果你仔细看，你可以梳理出来。请参阅[x-www-form-urlencoded-encoding-algorithm](http://www.w3.org/TR/html51/forms.html#application/x-www-form-urlencoded-encoding-algorithm)和[构建表单数据集](http://www.w3.org/TR/html51/forms.html#constructing-form-data-set)。解码部分还将输出称为“名称-值对的排序列表”。

所以是的，一个表现良好的代理应该保留表单条目的顺序。

# sql - sql - 仅当没有字段等于 A 时才返回所有行？

> ID：14085489
> 
> 赞同：0
> 
> 时间：2012-12-29T20:10:43.637
> 
> 标签：sql

我有点卡住了。我手头没有当前的 SQL，但我会尽量说清楚。假设我有一张学生 ID 表以及课程编号和成绩。我只想返回成绩不等于 A 的学生。我不想要不等于 A 的行，但我试图找到所有没有关联 A 成绩的学生 ID，否则学生至少有一个 A不会被退回。

我该如何解决这个问题？我对 SQL 很陌生。谢谢

编辑：好的，现在我有了实际的 SQL，我可以放弃我可怕的类比了。

```
SELECT  ALL
        ITEMS.QTY_ONHAND AS QTY_ONHAND,
        ITEMS.ITEM_ID AS ITEM_ID_I0,
        MEDORDER.MO_STAT AS MOMO_STAT,
        UPPER(ITEMS.ITEM_ID) AS ITEM_ID_IC,
        ITEMS.RX_DISP AS RX_DISP,
        OMNIS.OMNI_ID AS OMNI_ID,
        MEDORDER.ITEM_ID AS MOITEM_ID
  FROM   ITEMS ITEMS,
         MEDORDER MEDORDER,
         OMNIS OMNIS,
        "PATIENTS" PATIENTS
  WHERE (ITEMS.OMNI_STID = OMNIS.OMNI_STID) AND 
        (PATIENTS.PAT_ID = MEDORDER.PAT_ID) AND 
        (OMNIS.AREA = PATIENTS.AREA) AND (UPPER(ITEMS.ITEM_NAME) LIKE '%Doxycycline%'
     AND MEDORDER.ITEM_ID = UPPER(ITEMS.ITEM_ID)
     AND MEDORDER.MO_STAT='A')
  ORDER BY  ITEMS.QTY_ONHAND DESC, OMNIS.OMNI_ID, MEDORDER.ITEM_ID 
```

我这里有一个位置，omni_id。我的查询正在查找具有此 item_id 的每个omni_id。这将为每个omni_id 返回多个结果，这些结果对应于同一item_id 的多个medorders。我想要做的，只是返回对于任何 medorder.mo_stat 等于 'A' 的结果为 0 的 omni_ids。例如，omni_id 3W 将有 3 个返回，其中 medorder_mo_stat 等于 A、C 和 C。另一个是 4S，其 medorder.mo_stats 为 C、C、C。我只希望我的查询返回该 4S 组，因为它没有“A”的medorder.mo_stats。

抱歉解释不好..我现在正在处理几个项目，而且我的 SQL-fu 不是很强大，我不确定如何实施以下解决方案来获得我想要的东西。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:15:30.427

根据您的更新 - 我认为这可能会有所帮助，但我仍然不确定我是否理解您的架构，所以也许我遗漏了一些东西......

```
SELECT
    OMNIS.OMNI_ID AS OMNI_ID,
    COUNT(MEDORDER.ITEM_ID) AS A_COUNT
FROM
    ITEMS
JOIN
    OMNIS
    ON  (ITEMS.OMNI_STID = OMNIS.OMNI_STID)
JOIN
    PATIENTS
    ON  (OMNIS.AREA = PATIENTS.AREA)
LEFT JOIN
    MEDORDER
    ON  (MEDORDER.ITEM_ID = UPPER(ITEMS.ITEM_ID)
    AND (PATIENTS.PAT_ID = MEDORDER.PAT_ID)
    AND (MEORDER.MO_STAT = 'A')
WHERE
    UPPER(ITEMS.ITEM_NAME) LIKE '%Doxycycline%'
GROUP BY
    OMNIS.OMNI_ID
HAVING
    COUNT(MEDORDER.ITEM_ID) = 0 
```

* * *

^编辑^

* * *

失去了解决这个问题的方法。我会这样做：

```
SELECT
    StudentID,
    MAX(CASE Grade WHEN 'A' THEN 1 ELSE 0 END) AS HasAnA
FROM
    MyTable
GROUP BY
    StudentID
HAVING
    MAX(CASE Grade WHEN 'A' THEN 1 ELSE 0 END) = 0 
```

甚至只是这取决于您的桌子设计：

```
SELECT DISTINCT
    StudentID
FROM
    MyTable
WHERE
    Grade != 'A' 
```

# seo - 索引是否需要“google-site-verification”元标记？

> ID：14085492
> 
> 赞同：7
> 
> 时间：2012-12-29T20:10:50.910
> 
> 标签：seo, meta-tags, meta

一位 SEO 顾问建议我将“google-site-verification”元标记添加到我网站的每个页面。这是为了确保我的页面被谷歌索引。

但是，我不愿意这样做有几个原因 1) 我的网站已经使用另一种验证方法进行了验证 - 通过在服务器上托管一个 html 验证文件。

2）我记得读过一篇文章，表明此元标记不会影响爬网或页面排名。

我确实有一些未编入索引的页面。一个例子是 [http://www.contractsforgeeks.com/TechJobs/Florida/Tampa.aspx](http://www.contractsforgeeks.com/TechJobs/Florida/Tampa.aspx)

但我假设添加此元标记不会帮助页面被索引。

将站点验证元标记添加到每个页面而不是上传单个 html 验证文件是否有任何价值？

例如，如果我不小心从我的站点中删除了验证文件（站点已经通过验证后的某个时间），会发生什么情况。是否需要重新验证。还是验证过程是一次性的？在这种情况下，包含在每个页面中可能更安全（即使它无助于索引？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T10:50:52.647

一种方法足以验证您的网站。如果您选择 HTML 文件方法，则无需将元标记“google-site-verification”放置到每个页面。

此外，作为假设，此元标记不会帮助您的网站被 Google 索引。它不会影响抓取或 PageRank。

如果您希望看到您的网站被编入索引，您可以向 Google 网站管理员工具提交一个*sitemap.xml*并放置更多来自其他网站的链接指向您的网站。

如果您从您的网站中删除验证 HTML 文件，您将需要再次验证您的网站，此过程不是一次性交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:52:14.290

它无助于索引。它无助于排名。它的唯一目的是验证您是在 Google 网站管理员工具上注册时声称的那个人。

如果您删除验证，则需要再次验证您的域。否则，尽管所有者在此期间发生了变化，但仍然可以在 GWT 控制域。

如果你需要反对使用相应的`meta`元素，你可以指出它实际上会*降低*你的排名，——当然这不会有实际的、可衡量的效果，只是理论上的！-- 因为谷歌更喜欢加载速度更快的页面。

# javascript - javascript类检查

> ID：14085494
> 
> 赞同：0
> 
> 时间：2012-12-29T20:11:15.293
> 
> 标签：javascript, html, css

这有点难以解释，但我会尽力而为。我有一堆链接

```
<li><a class="various fade "  href="FOOTWEAR_SUB_PAGES/NIKE_SNOW.html"> <img src="MAIN_IMAGES/ZOOM_FORCE_2.jpg" border="0"/></a></li>                   
<li><a class="various1 fade " href="FOOTWEAR_SUB_PAGES/MERCURIAL_SUPERFLY.html"><img src="MAIN_IMAGES/MERCURIAL_SUPERFLY-2.jpg"  border="0" /></a></li>
<li><a class="various2 fade " href="FOOTWEAR_SUB_PAGES/AIRMAX_MOTO.html"><img src="MAIN_IMAGES/AIRMX-2.jpg"  border="0"  /></a></li>
<li><a class="various3 fade "  href="FOOTWEAR_SUB_PAGES/le-coq-joakim-noah.html"><img src="MAIN_IMAGES/JOAKIM-NOAH-3.jpg" border="0"  /></a></li>  
<li><a class="various4 fade "  href="FOOTWEAR_SUB_PAGES/NIKE_BMX.html"><img src="MAIN_IMAGES/GYZIRO-3.jpg"  border="0"  /></a></li> 
```

和另一组链接

```
<a class="ex1 various" href="FOOTWEAR_SUB_PAGES/NIKE_SNOW.html">ZOOM FORCE ONE ///</a>            
<a class="ex1 various1" href="FOOTWEAR_SUB_PAGES/MERCURIAL_SUPERFLY.html">MERCURIAL SUPERFLY ///</a> 
<a class="ex1 various2" href="FOOTWEAR_SUB_PAGES/AIRMAX_MOTO.html">AIRMX MOTO BOOT ///</a> 
<a class="ex1 various3" href="FOOTWEAR_SUB_PAGES/le-coq-joakim-noah.html">JOAKIM NOAH ///</a> 
<a class="ex1 various4" href="FOOTWEAR_SUB_PAGES/NIKE_BMX.html">DUNK GYRIZO</a> 
```

现在，当有人点击这些链接中的任何一个时，就会调用这个 js。

```
$(document).ready(function () {

$("ul#gallery li a").each(function (i, item) {         
    var url = $(item).attr("href");           
    var links = $("a.ex1.various");            
    var link = $(links.parent().find("a[href='" + url + "']"));            
    var redclass = "showing-in-gallery";           
    var gallery = $("#gallery");           
    var scroll = function () {

        link.addClass(redclass);               
        gallery.animate({ left: -1 * $(item).position().left }, 1500);           
        gallery.css("width", gallery.width() + 640 + "px");               
        $(item).parent().after('<li id="gallery_spacer" style="width: 640px;"></li>');

                imageIndex = $(".ex1").index($(this));              
                imageIndex = $(".fade").index($(this));

        setGalleryLinks();

    };

    $(this).bind("click", scroll);     
    link.bind("click", scroll);
}); 
```

如何检查是否单击了 .ex1 或 .fade？如

```
 if (ex1 clicked){   
        imageIndex = $(".ex1").index($(this));}
    if (fade clicked){          
        imageIndex = $(".fade").index($(this));} 
```

任何帮助都可以挽救我的生命，我已经为此花费了数天时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T20:14:00.330

用这个：

```
if ($(e.target).hasClass('fade'))
    // something
else
    // something else 
```

将事件参数添加到`scroll`函数：

```
var scroll = function (e) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T20:15:03.510

使用 jQuery hasClass 方法。

[http://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)

```
if($(this).hasClass('ex1'))
    // An ex1 link was clicked
else if($(this).hasClass('fade')
    // A fade link was clicked
else
    // An unknown link was clicked 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T20:16:20.483

您使用事件的目标：

```
$('.ex,.fade').on('click', function(e) {
   var target = $(e.target);

   // do sth with target
}); 
```

# html - ajax检索mysql数据

> ID：14085497
> 
> 赞同：1
> 
> 时间：2012-12-29T20:11:31.163
> 
> 标签：html, mysql, ajax

我正在尝试在表单中输入姓名和电话，并根据输入值从 mysql 获取数据。当我通过单击功能运行查询时，浏览器会显示我的 php 和查询，但它不会显示来自数据库的值，而是显示“对象 HTMLInputElement”。

我的脚本中一定遗漏了一些东西，但不知道它是什么。当我提交这个 ajax/mysql 时，谁能告诉我为什么没有显示该值。请参阅下面的代码并寻求您的帮助...

HTML 和脚本

```
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script language="javascript" type="text/javascript">

function ajaxFunction(){
var ajaxRequest;  

try{

    ajaxRequest = new XMLHttpRequest();
} catch (e){

    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){

            alert("Your browser broke!");
            return false;
        }
    }
}

ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        var ajaxDisplay = document.getElementById('ajaxDiv');
        ajaxDisplay.innerHTML = ajaxRequest.responseText;
    }
}
var age = document.getElementById('lname').value;
var queryString = "?lname=" + lname + "&phone=" + phone ;
ajaxRequest.open("GET", "find.php" + queryString, true);
ajaxRequest.send(null); 
}

</script>
<form name='myForm'>
Last Name: <input type='text' id='lname' />
Phone: <input type='text' id='phone' />
<input type='button' onclick='ajaxFunction()' value='Query MySQL' />
</form>
<div id='ajaxDiv'>Your result will display here</div>
</body>
</html> 
```

PHP

```
$inputedname = $_GET['lname'];
$inputedphone = $_GET['phone'];

$inputedname = mysql_real_escape_string($inputedname);
$inputedphone = mysql_real_escape_string($inputedphone);

$query = "SELECT FirstName, Phone FROM ClientInfo WHERE LastName = '$inputedname' AND Phone = '$inputedphone'";

$qry_result = mysql_query($query) or die(mysql_error());

$display_string = "<table>";
$display_string .= "<tr>";
$display_string .= "<th>Name</th>";
$display_string .= "<th>Phone</th>";
$display_string .= "</tr>";

while($row = mysql_fetch_array($qry_result)){
$display_string .= "<tr>";
$display_string .= "<td>$row[FirstName]</td>";
$display_string .= "<td>$row[Phone]</td>";
$display_string .= "</tr>";

}
echo "Query: " . $query . "<br />";
$display_string .= "</table>";
echo $display_string; 
```

在浏览器中

![在此处输入图像描述](../Images/e783cd0935007c311b82225db2d50325.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:18:05.337

那是因为您从未在您的行中定义变量`lname`和。因此，浏览器会根据您的输入元素 ID 生成变量。当您在字符串连接中使用 DOM 元素时，它会被调用并输出. 这是 IE 从早期就为我们提供的功能，其他浏览器复制为与 IE 兼容。这是您不应该使用的功能。`phone``var queryString = "?lname=" + lname + "&phone=" + phone ;``toString()``[object HTMLInputElement]`

以下代码将解决您的问题。

```
var lname = document.getElementById('lname').value;
var phone = document.getElementById('phone').value;
var queryString = "?lname=" + lname + "&phone=" + phone ;
ajaxRequest.open("GET", "find.php" + queryString, true); 
```

顺便说一句，为了防止 SQL 注入，您应该使用[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)而不是已弃用的[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

# linux - 安装 Wordpress / Red Hat 9

> ID：14085499
> 
> 赞同：-1
> 
> 时间：2012-12-29T20:11:59.187
> 
> 标签：linux, wordpress, installation, redhat

我试图在 Redhat 9 上安装 WordPress，但服务器没有运行 PHP 并返回默认的 Apache 欢迎页面[Default Apache Welcome Page](http://i.stack.imgur.com/krPQD.png)

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:45:43.487

由于帖子中缺乏细节，我只能猜测 Apache 欢迎页面正在显示，因为您尚未编辑`welcome.conf`.

```
/etc/httpd/conf.d/welcome.conf 
```

如果主机托管多个域，那么您需要为每个域添加一个 .conf 以将域重定向到服务器上的特定路径。[在此处](http://www.techiecorner.com/1822/how-to-remove-apache-test-page-in-centos/)查看更多详细信息和一些示例。

关于 Wordpress 安装和服务器不运行 PHP ......我们需要更多细节。如果服务器上没有 PHP 支持，那么您可以在此处阅读更多相关信息：如何[在 CentOS 5 上安装 WordPress 在五分钟内完成](http://blog.adlibre.org/2010/03/10/how-to-install-wordpress-on-centos-5-in-five-minutes-flat/)。

# jquery - jQuery 将 callbox 动画到不同的位置

> ID：14085500
> 
> 赞同：0
> 
> 时间：2012-12-29T20:12:02.020
> 
> 标签：jquery, jquery-animate

我的网站上有一个电话图标，当您单击它时，图标会向右滑动，显示隐藏在网站宽度之外的电话号码。这是我为此使用的代码：

```
$(".call-button").click(function(){
$(".call-button").animate({ 
    left: "+=225px",
}, 1000 );
}); 
```

问题是，一旦电话号码显示出来，如果再次单击该框，它会向右移动额外的 225 像素。有没有办法让它，如果 CSS left 属性设置为 0，那么一旦框被点击，它就会移回 -225px？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-29T20:30:01.323

尝试使用切换：

```
$(".call-button").toggle(
  function() {
    $(this).stop(true).animate({ left: "0" }, 1000 );
  }, 
  function() { 
    $(this).stop(true).animate({ left: "-225px" }, 1000 );
  }
); 
```

​</p>

# javascript - 试图从谷歌地方 API 中提取数据

> ID：14085502
> 
> 赞同：0
> 
> 时间：2012-12-29T20:12:05.520
> 
> 标签：javascript, google-places-api

尝试从 Google Places API 中提取数据，但在阅读文档后无法正常工作。我一定错过了什么，有人可以帮忙吗？

```
<script>

    var request = {
        location: new google.maps.LatLng(-33.8665433,151.1956316), 
        radius: '500',
        types: ['store']
    };

    var service = new google.maps.places.PlaceService(map);
    service.nearbySearch(request, callback);

    function callback(results, status) {
        for(var i = 0; i < results.length; i++){
            document.write(results[i] + '<br/>'); 
        }
    };      

    </script> 
```

* * *

通过将代码更改为此，我得到了错误：

```
 var request = {
        location: new google.maps.LatLng(-33.8665433,151.1956316), 
        radius: '500',
        types: ['store']
    };

    service = new google.maps.places.PlacesService(map);
    service.nearbySearch(request, callback);
     if (status == google.maps.places.PlacesServiceStatus.OK){
    function callback(results, status) {
        for(var i = 0; i < 7; i++){
            document.write(results[i] + 'test <br/>'); 
        }
        }
    };      

    </script> 
```

但是它仍然没有返回任何数据。请有人帮忙。谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:02:18.170

文档的[示例页面](https://developers.google.com/maps/documentation/javascript/examples/)上有 Google Maps JavaScript API v3 - Places Library 的代码示例。

[您可以在此处查看](https://google-developers.appspot.com/maps/documentation/javascript/examples/place-search)Place Library Nearby Search 的工作示例。

# git - Git：从命名远程获取和从 URL 获取有什么区别？

> ID：14085504
> 
> 赞同：5
> 
> 时间：2012-12-29T20:12:25.380
> 
> 标签：git, fetch

假设我从路径克隆了一个 git 存储库`/path/to/repo`。原始存储库将是一个名为“origin”的远程存储库。我可以使用命令从原点获取对象`git fetch origin`。这将从远程“原点”检索所有对象，包括所做的任何分支。

奇怪的是，如果我使用 command 从同一个存储库中显式获取`git fetch /path/to/repo`，我似乎检索到了所有提交对象，但没有检索到任何分支。

这是为什么？在这两种情况下，我做的事情不是完全相同吗？Git 的行为怎么会如此不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T21:47:15.030

命名远程使用他们的配置，他们`refspec`在获取此远程时设置模式：

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url   = /path/to/repo 
```

所以，这两种格式是等价的：

```
git fetch origin
git fetch /path/to/repo +refs/heads/*:refs/remotes/origin/* 
```

基本上：`git fetch <path> <source>:<destination>`。目的地在这里很重要，因为它是存储远程 HEAD 和分支指针的地方。

通过这样做`git fetch /path/to/repo`，您不会设置任何 refspec。因此，它只获取提交，而不是对象，因为`git`没有被指示获取和存储它们。

*这里可能有一些细节或命名约定不正确，请随时编辑。但全球的想法应该是正确的*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T12:45:55.840

主要区别在于，从 URL 获取不会将远程存储库中分支的状态存储到远程跟踪分支（例如，远程分支到`refs/heads/master`aka中） ，而仅存储在.`master``origin``refs/remotes/origin/master``origin/master`**`FETCH_HEAD`**

*一次性使用使用****URL***而不是设置远程通过`git remote add`，即：

 **```
$ git pull <URL> <branch or tag> 
```**

# windows - SPI_SETDISABLEOVERLAPPEDCONTENT

> ID：14085508
> 
> 赞同：1
> 
> 时间：2012-12-29T20:12:46.310
> 
> 标签：windows, delphi, winapi

我有功能

```
function bgSetDisableOverlappedContent(CAA: BOOL; var ErrorCode: DWORD; ErrorText: string): Boolean;  
begin
  errorCode := ERROR_SUCCESS;
  ErrorText := '';  
  if not GetOSVersion >= 60 then
    Exit;
  Result := SystemParametersInfo(SPI_SETDISABLEOVERLAPPEDCONTENT, 0, @CAA, 0);
  if not Result then
  begin
    ErrorCode := GetLastError;
    ErrorText := GetErrorText(ErrorCode);
  end;
end; 
```

并准确地称呼它

```
procedure TForm1.Button3Click(Sender: TObject);
var
  CAA: BOOL;
  OS: TUsableInOS;
  ErrorCode: DWORD;
  ErrorText: string;
begin
  CAA := False;
  if bgSetDisableOverlappedContent(CAA, ErrorCode, ErrorText) then
    ShowMessage('Success');
end; 
```

但是，当我用下一个代码再次检查时

```
function bgGetDisableOverlappedContent(var CAA: BOOL; OS: TUsableInOS; ErrorCode: DWORD; ErrorText: string): Boolean;
begin
  errorCode := ERROR_SUCCESS;
  ErrorText := '';
  os := tosVistaUp;   
  if not GetOSVersion >= 60 then
    Exit;   
  Result := SystemParametersInfo(SPI_GETDISABLEOVERLAPPEDCONTENT, 0, @CAA, 0);   
  if not Result then
  begin
    ErrorCode := GetLastError;
    ErrorText := GetErrorText(ErrorCode);
  end;
end;
function GetOSVersion: Integer;
var
  OSVersionInfo : TOSVersionInfo;
begin
  Result:= 0;
  FillChar(OsVersionInfo, Sizeof(OsVersionInfo), 0);
  OSVersionInfo.dwOSVersionInfoSize := SizeOf(OSVersionInfo);
  if GetVersionEx(OSVersionInfo) then
  begin
    if OSVersionInfo.dwPlatformId = VER_PLATFORM_WIN32_NT then
    begin
      if (OsVersionInfo.dwMajorVersion = 5) and ((OsVersionInfo.dwMinorVersion = 0)) then
         Result:= 50; //2000
      if (OsVersionInfo.dwMajorVersion = 5) and ((OsVersionInfo.dwMinorVersion = 1)) then
         Result:= 51; //XP
      if (OsVersionInfo.dwMajorVersion = 5) and ((OsVersionInfo.dwMinorVersion = 2)) then
         Result:= 52; //2003, 2003 R2
      if (OsVersionInfo.dwMajorVersion = 6) and ((OsVersionInfo.dwMinorVersion = 0)) then
         Result:= 60; //Vista, Windows Server 2008
      if (OsVersionInfo.dwMajorVersion = 6) and ((OsVersionInfo.dwMinorVersion = 1)) then
         Result:= 61; //Server 2008 R2, 7
    end;
  end;
end; 
```

CAA 的结果再次为 True，即使我完全设置 CAA := False; 我正在开发 Win 7\. 和 Result 的结果 := SystemParametersInfo(SPI_SETDISABLEOVERLAPPEDCONTENT, 0, @CAA, 0); 为 True，但 SPI_GETDISABLEOVERLAPPEDCONTENT 为 CAA 返回 True，即使在它被设置为 False 之前的步骤中也是如此。

```
procedure TForm1.Button3Click(Sender: TObject);
var
  CAA: BOOL;
  OS: TUsableInOS;
  ErrorCode: DWORD;
  ErrorText: string;
  Res: Bool;
begin
  CAA := False;
{  if bgSetDisableOverlappedContent(CAA, ErrorCode, ErrorText) then
    ShowMessage('Success'); }
  Res := SystemParametersInfo(SPI_SETDISABLEOVERLAPPEDCONTENT,
                                 0,
                                 @CAA,
                                 0);

  Res := SystemParametersInfo(SPI_GETDISABLEOVERLAPPEDCONTENT,
                                 0,
                                 @CAA,
                                 0);
  if Caa then
    ShowMessage('True')
  else
    ShowMessage('False');
end; 
```

CAA 是真的。

你有什么主意吗？

在此先感谢博扬

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T20:32:41.483

主要问题是，当传递时，`SPI_SETDISABLEOVERLAPPEDCONTENT`你应该传递一个`BOOL`变量，但你传递的是一个指向 a 的指针`BOOL`。[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724947.aspx#SPI_SETDISABLEOVERLAPPEDCONTENT)说：

> pvParam 参数是一个 BOOL 变量。将 pvParam 设置为 TRUE 以禁用重叠内容，或设置为 FALSE 以启用重叠内容。

这意味着您设置属性的代码需要如下所示：

```
SystemParametersInfo(SPI_SETDISABLEOVERLAPPEDCONTENT, 0, Pointer(CAA), 0) 
```

* * *

你`GetOSVersion`是一场灾难。抱歉听起来很刺耳！它会`0`在 Windows 8 及更高版本中返回。而且您的代码存在运算符优先级问题。你写：

```
if not GetOSVersion >= 60 then 
```

和运算符优先级意味着被解释为

```
if (not GetOSVersion) >= 60 then 
```

由于`GetOSVersion`返回一个有符号值，因此无论 Windows 版本如何，都会`(not GetOSVersion) >= 60`计算为。`False`那是因为`not GetOSVersion`总是 <= `0`。

您需要逻辑否定而不是按位否定。所以你应该写

```
if not (GetOSVersion >= 60) then 
```

或等效地

```
if GetOSVersion < 60 then 
```

实际上，有一个内置函数可以做到这一点。它被称为`CheckWin32Version`。像这样称呼它：

```
if not CheckWin32Version(6, 0) then
  exit; 
```

* * *

不过，您的其余功能有点混乱。您`ErrorText`按值传递，然后分配给它。大概您打算让调用者接收该值。除非您经过，否则不会发生这种情况`var`。

我个人会这样写你的程序：

```
procedure bgSetDisableOverlappedContent(CAA: BOOL);
begin
  if CheckWin32Version(6, 0) then
    if not SystemParametersInfo(SPI_SETDISABLEOVERLAPPEDCONTENT, 0, Pointer(CAA), 0) then
      RaiseLastOSError;
end; 
```

我认为最好将错误转换为`SystemParametersInfo`异常，因为这是一种特殊情况。我无视你实际上对`SystemParametersInfo`. 在这种情况下，没有必要为根本不会发生的事情建立错误代码返回机制。检查错误并转换为运行时异常。这使得调用代码变得非常简单。

您的按钮单击处理程序可以更简单：

```
procedure TForm1.Button3Click(Sender: TObject);
begin
  bgSetDisableOverlappedContent(False);
end; 
```

并且 getter 函数也比必要的复杂得多。我会这样：

```
function bgGetDisableOverlappedContent: Boolean;
var
  CAA: BOOL;
begin
  if not CheckWin32Version(6, 0) then
  begin
    Result := False;//or True, I don't know, you decide
    exit;
  end;
  if not SystemParametersInfo(SPI_GETDISABLEOVERLAPPEDCONTENT, 0, @CAA, 0) then
    RaiseLastOSError;
  Result := CAA;
end; 
```

# java - 在spring MVC中将图像上传到服务器并将参考存储在mysql数据库中

> ID：14085511
> 
> 赞同：4
> 
> 时间：2012-12-29T20:12:55.797
> 
> 标签：java, mysql, spring, spring-mvc, blob

我正在编写一个`Spring MVC 3.0`使用 Tomcat 作为 Web 服务器的应用程序。

我们的要求是让用户上传一张图片。我正在考虑将此图像存储在磁盘文件系统上并将参考路径存储在 MySQL 中，而不是将 MySQL 数据库中的所有文件信息存储为 BLOB（有人告诉我存储在 MySQL 中不是最佳做法）。

任何人都可以推荐如何在 Spring MVC 中执行此操作吗？

干杯

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-30T04:19:42.323

存储在磁盘中和存储在 MySQL 中都有一些注意事项。[这](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay#3756)是关于它的很好的讨论。

要将其存储在文件系统中，您可以使用[Commons File Upload](http://commons.apache.org/fileupload/)。这是一个示例

**pom.xml**

```
 <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>${release.version}</version>
    </dependency>

    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>${release.version}</version>
    </dependency> 
```

**JSP**

```
<h2>Spring MVC file upload example</h2>

<form method="POST" action="<c:url value='/upload' />"
    enctype="multipart/form-data">

    Please select a file to upload : <input type="file" name="file" />
    <input type="submit" value="upload" />

</form> 
```

**控制器**

```
@RequestMapping(value = "/upload", method = RequestMethod.POST)
public String handleFormUpload( 
    @RequestParam("file") MultipartFile file) throws IOException{
if (!file.isEmpty()) {
 BufferedImage src = ImageIO.read(new ByteArrayInputStream(file.getBytes()));
 File destination = new File("File directory with file name") // something like C:/Users/tom/Documents/nameBasedOnSomeId.png
 ImageIO.write(src, "png", destination);
 //Save the id you have used to create the file name in the DB. You can retrieve the image in future with the ID.
 }  
} 
```

并在您的应用程序上下文中定义它

```
 <bean id="multipartResolver"
    class="org.springframework.web.multipart.commons.CommonsMultipartResolver"> 
```

我希望这有帮助。

# c++ - 相当于 Qt 中的 Win32 'SetProp'？

> ID：14085512
> 
> 赞同：1
> 
> 时间：2012-12-29T20:12:57.223
> 
> 标签：c++, qt, winapi, properties, window

在 Win32 API 中，我们有 2 个名为“SetProp”和“GetProp”的函数来设置和获取由 HWND 标识的窗口的属性

SetProp：http: [//msdn.microsoft.com/en-us/library/ms633568%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms633568%28VS.85%29.aspx)

我有 2 个应用程序，一个用 Qt 编码，另一个用 Win32 API 编码。我需要某种标志，以便 Win32 中的应用程序可以识别 Qt 中的应用程序。

Qt 中是否有任何等效的函数来设置和获取 QMainWindow 的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T06:33:27.817

我只会将返回的 QMainWindow 的 HWND[`QWidget::winId()`](http://qt-project.org/doc/qt-4.8/qwidget.html#winId)与您在问题中提到的两个 Windows 函数一起使用。

有点相关...以下是访问与 a 的 HWND 关联的其他属性的方法`QMainWindow`：

大多数都被窗口标志覆盖

[窗口标志示例](http://qt-project.org/doc/qt-4.8/widgets-windowflags.html)

[`Qt::WindowFlags`](http://qt-project.org/doc/qt-4.8/qt.html#WindowType-enum)

[`QWidget::setWindowFlags()`](http://qt-project.org/doc/qt-4.8/qwidget.html#windowFlags-prop)

和小部件属性...

[`QWidget::setAttribute()`](http://qt-project.org/doc/qt-4.8/qwidget.html#setAttribute)

[`Qt::WidgetAttribute`](http://qt-project.org/doc/qt-4.8/qt.html#WidgetAttribute-enum)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:22:42.373

这应该会产生你的答案：

[关于在 Qt 中使用未记录的类](https://stackoverflow.com/questions/8260763/about-using-an-undocumented-class-in-qt)

（如果您喜欢冒险，请使用 setProperty 或未记录的类）。

[http://doc.qt.digia.com/qt/qobject.html#setProperty](http://doc.qt.digia.com/qt/qobject.html#setProperty)

# pthreads - 从 Solaris 上的 pthread_t 获取 LWP id 以与 processor_bind 一起使用

> ID：14085515
> 
> 赞同：1
> 
> 时间：2012-12-29T20:13:26.593
> 
> 标签：pthreads, solaris, setthreadaffinitymask

在 Solaris 上，`processor_bind`用于设置线程的亲和性。您需要知道目标线程的 LWPID 或使用常量`P_MYID`来引用自己。

我有一个看起来像这样的函数：

```
void set_affinity(pthread_t thr, int cpu_number)
{
   id_t lwpid = what_do_I_call_here(thr);
   processor_bind(P_LWPID, lwpid, cpu_number, NULL);
} 
```

实际上，我的函数中有一堆跨平台的东西，为了清楚起见我已经省略了。

关键是我想设置任意 pthread_t 的亲和力，所以我不能使用`P_MYID`.

如何使用`processor_bind`或替代接口来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:41:00.347

跟进这一点，由于我的困惑：

lwpid 是由

```
pthread_create( &lwpid, NULL, some_func, NULL); 
```

线程数据可通过接口在外部用于不是`pthread_create()`调用的进程`/proc`

```
/proc/<pid>/lwp/<lwpid>/    lwpid == 1 is the main thread, 2 .. n are the lwpid in the above example. 
```

但这几乎没有告诉您您正在处理哪个线程，除了它是上面示例中的 lwpid。

```
/proc/pid/lwp/lwpid/lwpsinfo 
```

可以读入包含更多信息的 struct lwpsinfo，您可以从中确定您是否正在查看所需的线程。看`/usr/include/sys/procfs.h`

或者`man -s 4 proc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T01:42:54.320

Solaris 11 内核具有关键的线程优化。您设置了哪些线程需要特别小心，其余的由内核完成。这似乎是你想要的。请阅读这个简短的解释，看看我是否理解你想要的。

```
https://blogs.oracle.com/observatory/entry/critical_threads_optimization 
```

以上为备用。它可能根本不适合你。但是，根据 Oracle，它是首选机制。

对于 Solaris 10 `pthread_t tid`，`idtype_t`在`P_LWPID`调用`processor_bind`. 这适用于 Solaris 8 -> 11。它仅适用于进程中的 LWP。我不清楚这是否是你的模型。

高温高压

# python - 熊猫排序pivot_table或分组数据框？

> ID：14085517
> 
> 赞同：3
> 
> 时间：2012-12-29T20:13:46.717
> 
> 标签：python, sorting, pandas, pivot

我有个问题。我这样做了：

```
In [405]: pippo=ass_t1.pivot_table(['Rotazioni a volume','Distribuzione Ponderata'],rows=['SEGM1','DESC']).sort()

In [406]: pippo
Out[406]: 
                      Distribuzione Ponderata  Rotazioni a volume
SEGM1 DESC                                                       
AD     ACCADINAROLO                    74.040       140249.693409
      ZYMIL AMALAT Z                   90.085       321529.053570
FUN   SPECIALMALAT S                   88.650       120711.182177
NORM   STD INNAROLO                    49.790       162259.216710
       STD P.NAROLO                    52.125      1252174.695695
       STD PLNAROLO                    54.230       213257.829615
      BONTA' MALAT B                   79.280       520454.366419
      DA STD RILGARD                   35.290       554927.497875
      OVANE VT.MANTO                   15.040       466232.639628
      WEIGHT MALAT W                   79.170       118628.572692 
```

我的目标是让每个“SEGM1”按“Distribuzione Ponderata”排序。例如，在“NORM”子集中，第一行应该是“BONTA' MALAT B”，具有更高级别的“Distribuzione Ponderata”。我能够使用 groupby 方法获得部分结果，但无法设置多个列。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T21:17:32.070

```
import io
import pandas as pd
import numpy as np

text = '''\
SEGM1\tDESC\tDistribuzione Ponderata\tRotazioni a volume
AD\tACCADINAROLO\t74.040\t140249.693409
AD\tZYMIL AMALAT Z\t90.085\t321529.053570
FUN\tSPECIALMALAT S\t88.650\t120711.182177
NORM\tSTD INNAROLO\t49.790\t162259.216710
NORM\tSTD P.NAROLO\t52.125\t1252174.695695
NORM\tSTD PLNAROLO\t54.230\t213257.829615
NORM\tBONTA' MALAT B\t79.280\t520454.366419
NORM\tDA STD RILGARD\t35.290\t554927.497875
NORM\tOVANE VT.MANTO\t15.040\t466232.639628
NORM\tWEIGHT MALAT W\t79.170\t118628.572692
'''

df = pd.read_csv(io.BytesIO(text), delimiter = '\t',
                 index_col = (0,1),)

key1 = df.index.labels[0]
key2 = df['Distribuzione Ponderata'].rank(ascending=False)
sorter = np.lexsort((key2, key1))

sorted_df = df.take(sorter)
print(sorted_df) 
```

产量

```
 Distribuzione Ponderata  Rotazioni a volume
SEGM1 DESC                                                       
AD    ZYMIL AMALAT Z                   90.085       321529.053570
      ACCADINAROLO                     74.040       140249.693409
FUN   SPECIALMALAT S                   88.650       120711.182177
NORM  BONTA' MALAT B                   79.280       520454.366419
      WEIGHT MALAT W                   79.170       118628.572692
      STD PLNAROLO                     54.230       213257.829615
      STD P.NAROLO                     52.125      1252174.695695
      STD INNAROLO                     49.790       162259.216710
      DA STD RILGARD                   35.290       554927.497875
      OVANE VT.MANTO                   15.040       466232.639628 
```

[我在这里](https://stackoverflow.com/a/10606901/190597)学到了这个技巧。关键思想是使用[numpy.lexsort](http://docs.scipy.org/doc/numpy/reference/generated/numpy.lexsort.html#numpy-lexsort)。

# mysql - 触发导致 MySQL 错误 1054 未知列

> ID：14085518
> 
> 赞同：2
> 
> 时间：2012-12-29T20:13:49.773
> 
> 标签：mysql, triggers, mysql-error-1054

我似乎无法追查为什么 MySQL 在尝试更新表中的列时抛出错误，如下所示。

更新查询是：

```
update jobitems set itemprice=itemprice/100; 
```

错误是：

```
 Error Code: 1054\. Unknown column 'JobID' in 'where clause' 
```

当我从 jobitems 的触发器中删除以下内容时，更新有效。

```
DELIMITER $$
CREATE
DEFINER=`root`@`localhost`
TRIGGER `alacarte`.`jobitems_beforeupdate`
BEFORE UPDATE ON `alacarte`.`jobitems`
FOR EACH ROW
Begin
declare customer varchar(45);
Set @customer = (select CustomerID FROM jobs WHERE JobID=old.JobID);
If new.ItemCompleted<=>1
AND (select InvoiceStatus
    FROM 
        (Select InvoiceStatus, CustomerID
        FROM invoices
        as custinvoices
        Where CustomerID=@customer)
    as InvoiceStatus
    WHERE InvoiceStatus='Open') IS NULL
then
insert into invoices
set
CustomerID=@customer,
InvoiceBillToName=ifnull((select CustomerName FROM customers WHERE CustomerID=@customer),'-'),
InvoiceBillToAddress=etc; 
```

当然，jobs 表有一个 JobID 和 CustomerID 列。许多其他触发器和我们的前端都使用这些列，它们可以完美地工作。

以下查询有效并返回正确的“cust-000002”。

```
Set @customer = (select CustomerID FROM jobs WHERE JobID='ALC-20121119-001');
select @customer; 
```

以下查询也有效（此作业项的 ItemCompleted=0，因此它不会触发上述触发器）：

```
update jobitems set itemprice=itemprice/100 where JobID='ALC-20121119-001'; 
```

所以，我正式坚持上述信息。请帮忙 ：）。

**更新：**

正如预期的那样，在整个触发器中消除变量并将“@customer”替换为 (select CustomerID FROM jobs WHERE JobID=old.JobID) 会产生相同的错误。

此外，通过修改触发器，错误消失了。我以一种新的方式简单地使用了该变量，它可以工作。以下将每个作业的@customer 输出添加到测试列中，并且可以完美运行。呃！

```
declare customer varchar(45);
Set @customer = (select CustomerID FROM jobs WHERE JobID=old.JobID);

If new.ItemCompleted<=>1
then
update jobs set testcol=@customer where JobID=old.JobID;
end if; 
```

**更新：**

为了确保我没有发疯，我将触发器复制并粘贴回来，我得到了与以前完全相同的错误消息，因此这个问题是可重现的。此外，为了彻底起见，“ItemCompleted=1”的条目无法*在没有错误的情况下更新，而**“ItemCompleted=0”的条目可以*通过尝试通过我们的前端逐个编辑条目而在没有错误的情况下更新。我想我只是确定一下，因为我现在完全糊涂了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:44:49.243

我会尝试通过在任何使用它的地方调用它来限定 JobID，以进行额外的消除歧义。

但我的 dba 直觉表明，实际问题可能出在其他地方——您可能有另一个触发器，该触发器被此触发器中发生的某些事情触发……也许是工作或发票表上的触发器？还是在`AFTER UPDATE`同一张桌子上？

打开您的常规日志，`SET GLOBAL general_log = 1`然后运行导致触发器错误的查询。

然后再次关闭常规日志（这样更容易找到错误，因此不要填满硬盘），然后查看常规日志，看看你遇到错误时到底发生了什么......*一般*除了您手动运行的最初导致触发器触发的查询之外，日志实际上*应该记录从触发器**内部运行的查询。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T20:12:27.140

当你这样做时：

```
(select CustomerID FROM jobs WHERE JobID=old.JobID) 
```

*JobID*，没有前缀，是您说您拥有的*工作表中的列。*现在*old.JobId*是*jobitems.JobID*，因为 old 引用了在触发它的更新中使用的表。

检查您与*jobitems*匹配的列名是否正是*jobID*。

# android - 首选项菜单显示在默认视图的顶部

> ID：14085521
> 
> 赞同：1
> 
> 时间：2012-12-29T20:14:03.657
> 
> 标签：android, android-fragments, android-preferences

我有以下代码。当用户从菜单中选择“设置”时，它应该创建一个偏好视图。它会这样做，但是当用户选择“设置”时，设置菜单会出现在我的默认视图顶部，就像它具有透明背景一样。创建设置菜单时，我已经包含了它的外观。

![应用图片](../Images/a6b7fdfad0be8c534d80ab93a6618fd4.png) 如您所见，除了屏幕中间的“大文本”之外，我的默认视图是空白的，但首选项菜单仅显示在其顶部。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        case R.id.menu_settings:
             getFragmentManager().beginTransaction()
             .replace(android.R.id.content, new SettingsMenu())
             .addToBackStack(null)
             .commit();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T23:32:25.977

通常，您应该开始一项新活动，而不是`PreferenceFragment`直接将我认为的活动添加到您的活动中。

或者，您应该将现有的 UI（“大文本”）放在一个通过您的`replace()`调用替换的片段中。就目前而言，您现有的 UI 似乎不在一个片段中，或者至少不在一个被标识为`android.R.id.content`.

# php - 用点对 MySql 中的项目进行排序

> ID：14085534
> 
> 赞同：2
> 
> 时间：2012-12-29T20:15:16.183
> 
> 标签：php, mysql

如何对id的widt dot进行排序。我有这张桌子：
`1, 1.2, 2, 3, 3.1, 3.2, 4, 5, 100, 101, 200 ...`

如果我们使用`SELECT * FROM table ORDER BY id ASC`它会显示：
`1, 100, 101, 1.2, 2, 200, 3, 3.1, 3.2, 4, 5 ...`

但我需要这个：
`1, 1.2, 2, 3, 3.1, 3.2, 4 ,5, 100, 101, 200 ...`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:17:02.830

尝试这个：：

```
SELECT * FROM table ORDER BY CAST(id AS DECIMAL) ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:22:15.103

您可以做的其他事情是将数据库中的列设为 FLOAT

然后你像在没有 CAST 的 sql 中一样订购你的数字

```
SELECT * FROM table ORDER BY id ASC 
```

它会起作用

# c++ - 如何使用鼠标按下事件在 C++ 中绘图

> ID：14085537
> 
> 赞同：0
> 
> 时间：2012-12-29T20:15:29.907
> 
> 标签：c++, drawing, mouseevent, paint

我想用鼠标绘制一些像素，我想在 C++ 中像在 Paint 中一样，但到目前为止我无法让它工作。

我做了什么：

```
// NewPaint.cpp : main project file.
#include "stdafx.h"
#include <windows.h>
#include <iostream>
#include <conio.h>
#include <dos.h>
#include <Winuser.h>

int main()
{
    SetConsoleTitle(L"PaintER"); // Set text of the console so you can find the window
    HWND hWnd = GetConsoleWindow(); // Get the HWND
    HDC hdc = GetDC(hWnd); // Get the DC from that HWND
    textbackgroundcolor(WHITE); // Background color
    textcolor(BLACK); // Text color
    POINT p; // Pointer
    while(1) // Smt like  mouse button 1 
    {
        if (ScreenToClient(hWnd, &p)) // Mouse position
        {
            SetPixel(hdc, p.x, p.y, RGB(0,0,0)); // Draw black pixels
        }
    }
    ReleaseDC(hWnd, hdc); // Release the DC
    DeleteDC(hdc); // Delete the DC
    system("pause");
    return 0;
} 
```

我为此使用 Visual Studio 2010 并使用 Windows 7。我听说这些可能是重要信息..

我没有我只有 GDI+ 参考，所以如果你知道如何使用它，请告诉我。

正如我在代码中给出的那样，我需要编码示例和解释。

# .net - 将 JSON 数组转换为 VB.NET 数组

> ID：14085546
> 
> 赞同：-1
> 
> 时间：2012-12-29T20:16:04.090
> 
> 标签：.net, arrays, vb.net, json, visual-studio-2010

我有一个非常简单的 JSON 数组，我想将它转换为 VB.NET 数组。JSON是：

```
{"UPTIME": "UNKNOWN", "VERSION ": 2.0, "SENDTIME": "03:33:52",  "SENDDATE": "28- 12-2012", "HOSTNAME": "My-PC"} 
```

在这种情况下`[0]="UNKNOWN"`, `[1]=2.0`,`[2]=03:33:52`等。

我已经阅读了以前的问题，我只是变得更加困惑，而且它们似乎都是针对比我所拥有的更复杂的 json 示例。我正在使用 Newtonsoft.Json 库，因为它似乎被推荐了很多，但我不明白它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:21:09.330

您可以使用 Json.Net 一个 .Net JSON 转换器库。从我所见，您应该能够将字符串转换为 Json 对象，然后您可以编写一个 cast 方法来从该 JSON 对象的成员构建一个数组。

[http://json.codeplex.com/](http://json.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T01:10:19.277

我最终通过随机实验得到了它，这产生了一个包含值的字典，它足够接近，所以我可以创建我想要的变量，而不必使用我认为我必须使用的 VB.NET 数组我希望这个帮助他人：

进口：

```
Imports Newtonsoft.Json
Imports Newtonsoft.Json.Linq 
```

声明的变量：

```
Dim json As String 'this is the string of json data that needs decoding
Dim version As String
Dim obj As New JObject 
```

转换代码：

```
json = '{"UPTIME": "UNKNOWN", "VERSION ": 2.0, "SENDTIME": "03:33:52",  "SENDDATE": "28- 12-2012", "HOSTNAME": "My-PC"}'
Dim deserializedProduct As Object = JsonConvert.DeserializeObject(Of Object)(json)
obj = JsonConvert.DeserializeObject(recv)
uptime = obj.Item("UPTIME").ToString
version = obj.Item("VERSION").ToString
Console.WriteLine(uptime)
Console.WriteLine(version) 
```

结果：

```
UNKNOWN
2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T14:41:31.300

我没有使用过任何这些，所以我不知道它的用处。[.net System.Runtime.Serialization.Json](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.aspx)内置了一个 Json 序列化程序类

# microdata - 有谁知道为什么 Google 推荐 Microdata 而不是 Microformats 和 RDFa？

> ID：14085547
> 
> 赞同：4
> 
> 时间：2012-12-29T20:16:09.843
> 
> 标签：microdata, microformats, rdfa

我对标记格式 Microdata、Microformats 和 RDFa 进行了很多研究。谷歌推荐微数据超过其他两个标记，我想知道为什么。阅读大量文件并研究这些标记让我比开始阅读之前更加一无所知。有谁知道为什么谷歌推荐这种类型？它与 HTML5 有关吗？

[这](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=99170)是我从 Google 获得信息的网站的链接。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T13:54:33.383

因为在 RFDa 使用中发现了许多（语法）错误。Schema.org 的一位领导人谈到了他们选择微数据的原因：

> （...）错误率（即，网站管理员在他们的页面上标记为 X，而真正的意思是 Y）大约是其他格式（包括微格式）的 3 倍 [使用 RFDa，红色。] 、站点地图、谷歌购物提要等）。(...) 超过 40% 的错误与 rel 和 property 之间的混淆有关。
> 
> (...) 我们真的不想在理论上讨论 rel 和 property 之间是否存在区别。我们还了解到，有一些极端情况会导致 RDFa 的作者做出这种区分。但底线仍然是，只要 RDFa 使用中的错误率没有大幅下降，这对我们来说不是一个可行的选择。(...)

[资源](http://lists.w3.org/Archives/Public/public-vocabs/2011Oct/0113.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-29T20:35:48.127

我认为这仅仅是因为 schema.org 是谷歌自己的倡议（他们与微软和雅虎一起创建了它）。请参阅[http://en.wikipedia.org/wiki/Schema.org](http://en.wikipedia.org/wiki/Schema.org)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-08T04:11:31.667

这是另一个观点： http: [//manu.sporny.org/2012/microdata-cr/](http://manu.sporny.org/2012/microdata-cr/)
有趣的是，我们都曾经厌恶微软的歪曲标准。猜猜谷歌现在正步入他们的行列。

# c++ - C++11“不可移动”类型

> ID：14085553
> 
> 赞同：11
> 
> 时间：2012-12-29T20:16:54.007
> 
> 标签：c++, gcc, c++11, clang, move-semantics

> **可能重复：**
> [为什么 C++11 删除的函数参与重载决议？](https://stackoverflow.com/questions/14085620/why-do-c11-deleted-functions-participate-in-overload-resolution)

我对以下 C++11 代码有两个问题：

```
#include <iostream>

using namespace std;

struct A {
  A()  { cout << "Default c-tor" << endl; }
  A(const A&)  { cout << "Copy c-tor" << endl; }
  A(A&&) = delete;
};

A f()
{
 A a;
 return a;
}

int main()
{
  A b = f();
  return 0;
} 
```

我使用 gcc 和 clang 得到以下编译错误

gcc-4.7.2 (g++ --std=c++11 main.cpp):

```
main.cpp: In function ‘A f()’:
main.cpp:16:9: error: use of deleted function ‘A::A(A&&)’
main.cpp:8:2: error: declared here
main.cpp: In function ‘int main()’:
main.cpp:21:10: error: use of deleted function ‘A::A(A&&)’
main.cpp:8:2: error: declared here 
```

clang-3.0 (clang++ --std=c++11 main.cpp):

```
main.cpp:19:4: error: call to deleted constructor of 'A'
        A b = f();
          ^   ~~~
main.cpp:8:2: note: function has been explicitly marked deleted here
        A(A&&) = delete;
        ^
1 error generated. 
```

*   如果显式删除了移动构造函数，编译器不应该使用复制构造函数吗？
*   有谁知道“不可移动”类型的任何用途？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T20:21:32.300

```
A(A&&) = delete; 
```

声明和定义它`delete`仍然声明它，并没有使它完全不存在。相反，它*类似于*（但不完全相同）将其声明为空且私有。像这样：

```
private: 
  A(A&&){} 
```

事实上，这就是以前有时用于其他运营商的技巧`= delete`。同样，它存在于查找的意义上，但永远不允许调用它，并且在 C++ 中，调用权限（在几乎或所有情况下）在其他所有事情之后完成，例如重载解析、名称查找。

该标准实际上说（8.4.3）

> 已删除的函数是隐式内联的。

并且注意到（我发现）说删除的函数不应该参与名称查找。

此外，从 8.4.3

> 隐式或显式引用已删除函数（而不是声明它）的程序是格式错误的。[注意：这包括隐式或显式调用函数并形成指向函数的指针或指向成员的指针。它甚至适用于未潜在评估的表达式中的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T20:21:45.533

这是一项研究任务，但我*认为*声明移动构造函数表明要考虑移动构造函数。当它得到`delete`d 时，这意味着如果有移动构造函数，对象可以移动到它们可以移动的位置。如果您想要一个不移动而是复制的对象，您只需声明一个复制构造函数，而不会提及移动构造函数。

我还没有完全找到标准中的声明，它明确说明了上述内容，但 12.8 [class.copy] 第 9 段中有注释支持上述声明的一部分：

> [注意：当移动构造函数没有被隐式声明或显式提供时，否则会调用移动构造函数的表达式可能会调用复制构造函数。——尾注]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T20:23:53.637

当您删除移动构造函数时，它不会将其从名称查找找到的函数集中删除。每当您的代码通常使用移动构造函数时，您都会收到一个错误，因为即使找到它，它也已被删除。

您的代码中有两个动作。第一个是当你`return a`因为复制省略是可能的并且将被复制的对象由左值（`a`此处，这里）指定时，它被视为移动。第二个在 assignment`A b = f()`中，因为 a`f()`给你一个尚未绑定到引用的临时。

如果您希望找到复制构造函数而不是删除的移动构造函数，则应该摆脱已删除的定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T20:47:11.587

来自 C++ 工作草案 2012-11-02

> **8.4.3 删除的定义 [dcl.fct.def.delete]**
> ...
> 2 隐式或显式引用已删除函数的程序，而不是声明它，是格式错误的。[*注意*：这包括隐式或显式调用函数并形成指向函数的指针或成员指针。它甚至适用于未潜在评估的表达式中的引用。如果函数被重载，则仅当函数被重载决议选择时才会被引用。— 尾注]
> ...
> 4 已删除的函数是隐式内联的。

由于引用了已删除的移动构造函数，因此程序格式错误。

不可移动类型的“用途”可能是防止移动，从而防止返回本地对象。我自己没有见过这样的用法，我不知道这是否有意义，但是 YMMV。

# opencv - 将 OpenCV 与 DevCPP 一起使用

> ID：14085562
> 
> 赞同：2
> 
> 时间：2012-12-29T20:17:45.850
> 
> 标签：opencv, dev-c++

我是 OpenCV 的新手，我正在尝试将它与 DevC++ 一起使用。虽然我知道我可以使用 Visual Studio 来做同样的事情，但我仍然想使用 DevC++。

OpenCV Wiki-how 对于这些信息似乎已经过时了。你能告诉我在 DevCpp 中修改编译器选项的步骤，以便我可以开始使用 OpenCV。

非常感谢任何帮助...

此外，OpenCV wiki 指示我将以下代码粘贴到 Compiler Options 中，

`-L"C:\Program Files\OpenCV\lib" -lcxcore -lcv -lcvaux -lhighgui -lml -lcvcam`

可悲的是，我没有`lib`在我的 OpenCV 目录中找到该文件夹​​..

# mysql - 从 MySQL 数据库中的相同记录中选择特定记录

> ID：14085565
> 
> 赞同：0
> 
> 时间：2012-12-29T20:17:55.057
> 
> 标签：mysql

我有一张这样的桌子：

```
+---------+---------+-----------------------------------------+
| type    | city    | name                                    |
+---------+---------+-----------------------------------------+
| cricket | kolkata | Khadim's Ashok Malhotra Cricket Academy |
| cricket | kolkata | Calcutta Cricket Coaching Center (C4)   |
| cricket | kolkata | Sambaran Banerjee Cricket academy       |
| cricket | kolkata | Bournvita cricket acadamemy of arun lal |
| cricket | kolkata | friends of the stadium                  |
| cricket | kolkata | pankaj roy cricket academy              |
| cricket | kolkata | sunil gavaskar cricket foundation       |
| cricket | kolkata | castlewood india                        |
| cricket | kolkata | GK sports                               |
| cricket | kolkata | NULL                                    |
| cricket | kolkata | NULL                                    |
| cricket | kolkata | NULL                                    |
| cricket | kolkata | NULL                                    |
| cricket | kolkata | NULL                                    |
| cricket | kolkata | NULL                                    |
+---------+---------+-----------------------------------------+ 
```

我想给出不同的名称而不是`NULL`，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:19:22.617

尝试`IFNULL`

```
Select IFNULL(name,'Jon Smith') as name from myTable 
```

如果您在 name 中的值为 null 时想要该机构的名称，您可以::

```
Select IFNULL(name,institute) as name from myTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:49:02.170

您也可以使用它：

从...开始`name`

```
select * from table_name where name like "Cricket%" 
```

包含任何地方

```
select * from table_name where name like "%Cricket%" 
```

以。。结束

```
select * from table_name where name like "%Cricket" 
```

# python - 将 python-QRCode 模块转换为 Python 3 时出错

> ID：14085566
> 
> 赞同：1
> 
> 时间：2012-12-29T20:17:58.593
> 
> 标签：python, regex, python-3.x, typeerror

下午好，几天来我尝试从 lincolnloop 获取 Python QR-Code 模块，在 Python3 下运行。它在 Python 2.x 上完美运行。- [https://github.com/lincolnloop/python-qrcode](https://github.com/lincolnloop/python-qrcode)

一般来说，我对 Python 编程非常陌生，但我认为到目前为止我已经完成了我的作业。

第一个错误：

```
 File "/usr/lib/python3.2/qrcode/util.py", line 274, in __init__

    if not isinstance(data, basestring):
NameError: global name 'basestring' is not defined 
```

所以在 Python3 中不再存在 basestring，我用这里找到的这个代码语句来解决这个问题。- [https://github.com/oxplot/fysom/issues/1](https://github.com/oxplot/fysom/issues/1)

```
try:
    unicode = unicode
except NameError:
    # 'unicode' is undefined, must be Python 3
    str = str
    unicode = str
    bytes = bytes
    basestring = (str,bytes)
else:
    # 'unicode' exists, must be Python 2
    str = str
    unicode = unicode
    bytes = str
    basestring = basestring 
```

所以下一个错误出现了。

```
 File "/usr/lib/python3.2/qrcode/util.py", line 285, in __init__
    elif re.match('^[%s]*$' % re.escape(ALPHA_NUM), data):
  File "/usr/lib/python3.2/re.py", line 153, in match
    return _compile(pattern, flags).match(string)
TypeError: can't use a string pattern on a bytes-like object 
```

所以我尝试在这里找到的解决方案 - [Python TypeError on regex](https://stackoverflow.com/questions/5184483/python-typeerror-on-regex)并更改以下代码：

```
elif re.match('^[%s]*$' % re.escape(ALPHA_NUM), data): 
```

至：

```
elif re.match(b'^[%s]*$' % re.escape(ALPHA_NUM), data): 
```

以二进制模式处理 RegEx。但这会在同一行代码中引发下一个执行。

```
 elif re.match(b'^[%s]*$' % re.escape(ALPHA_NUM), data):
TypeError: unsupported operand type(s) for %: 'bytes' and 'str' 
```

我也尝试改变

```
ALPHA_NUM = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:' 
```

至

```
ALPHA_NUM = b'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:' 
```

但这不会改变 Execption。

所以这对我来说表明了与以前相同的错误，并且代码中的任何地方都必须是这种类型的错误，无论是字节还是字符串类型。但我找不到它。

我知道整个脚本对于深入研究 python 是非常复杂的，但是对于我的项目，我需要一个有效的 QR 码生成器。

有人可以给我一个线索吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:42:09.483

您不能将 % 运算符用于`bytes`对象。您现在处理的数据是真正的二进制数据，还是文本？如果是文本，你应该把它当作字符串来处理，而不是字节。

此外，与模块的作者交谈。他们可能已经完成了大部分移植工作，或者他们可能愿意提供帮助。第三，阅读有关该主题的免费书籍[python3porting.com 。](http://python3porting.com/)

处理 Unicode 和字节数据*是*移植的困难部分。您必须确保始终使用其中一种，而要正确使用通常会很痛苦。

# php - 将值从超链接传递到新页面

> ID：14085568
> 
> 赞同：0
> 
> 时间：2012-12-29T20:18:12.510
> 
> 标签：php, mysql

有人可以看看我的代码吗？我正在尝试显示上一页链接中的记录。当我回显 $id （下）...它显示上一页中的 'id' 的值。但是，查询返回表的所有行。我让它早点工作。从那以后我改变了一些东西。请指出我在看什么。先感谢您。

```
<?php
mysql_connect('host', 'userid', 'password') or die (mysql_error());
mysql_select_db('my_database') or die (mysql_error());
//$result = mysql_query("SELECT * from table");

$id= mysql_real_escape_string($_GET["id"]);

echo $id;
$result = mysql_query("SELECT * FROM uatbeta1 WHERE id=".intval($_REQUEST['id']));

if (!$result) {
echo 'Could not run query: ' . mysql_error();
exit;
}

$row = mysql_fetch_row($result);

echo $result;
while($row = mysql_fetch_array($result)){
//Display the results from the current row and a line break

echo "<table border='1'>";

echo "<tr>";
echo "<td>".$row['id']."</td>";
echo "<td>".$row['company']."</td>";
echo "<td>".$row['constructioncontractor']."</td>";
echo "<td>".$row['weldingcontractor']."</td>";
echo "<td>".$row['ndtcontractor']."</td>";
echo "<td>".$row['weldid']."</td>";
echo "<td>".$row['projectname']."</td>";
echo "<td>".$row['examinationdate']."</td>";
echo "<td>".$row['shift']."</td>";
echo "</tr>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:20:27.190

为什么不使用`$id`？你已经很好地逃脱了，所以使用这个变量：

```
$result = mysql_query("SELECT * FROM uatbeta1 WHERE id=".$id); 
```

# javascript - 浏览器中不可见元素的键盘快捷键

> ID：14085571
> 
> 赞同：3
> 
> 时间：2012-12-29T20:18:22.967
> 
> 标签：javascript, css, keyboard, markup

我想为页面上的按钮分配键盘快捷键。

事实证明，直接在标记中执行此操作会导致危险的副作用：即使按钮不可见，快捷方式也会触发单击事件。

我可以在前端控制器中使用动态设置/取消设置快捷方式，但这似乎有点混乱。有没有更优雅的方法来做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:23:06.903

你应该能够做这样的事情

```
var shortcuts = {
    49: document.getElementById("button"), //character "1"
    50: document.getElementById("button2") //character "2"
};

var isVisible = function(el) {
    return !(el.style.display === "none" || el.style.visibility === "hidden");
};

var bindEvent = function(el, event, handler) {
  if (el.addEventListener){
    el.addEventListener(event, handler, false); 
  } else if (el.attachEvent){
    el.attachEvent('on'+event, handler);
  }
};

bindEvent(window, "keydown", function(e) {
    var charCode = (typeof e.which == "number") ? e.which : e.keyCode;
    if(typeof shortcuts[charCode] !== "undefined" && shortcuts[charCode] && isVisible(shortcuts[charCode])) {
        shortcuts[charCode].click();
    }
}); 
```

[http://jsfiddle.net/Z2baQ/](http://jsfiddle.net/Z2baQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T02:32:31.280

我最终做了如下所示，这正是我想要的：隐藏按钮的快捷方式不起作用，但可见按钮的快捷方式起作用。

```
<head>

    $(document).ready(function () {
         var self = 'document_ready';
         assignListeners();
     });

    var assignListeners = function() {
        $('#btn1').on('click', function(){
            if ($(this).css('display') != 'none')
                realListener1();
        });
        $('#btn2').on('click', function() {
            if ($(this).css('display') != 'none') {
                realListener2();
            }
        });
    };

    var realListener1 = function() {
        alert('Button 1 clicked')
    };
    var realListener2 = function() {
        alert('Button 2 clicked')
    };

</head>
<body style="margin:0; padding:0;">
<div>
<button id="btn1" accesskey="Z" style="display: none;">Button 1</button>
<button id="btn2" accesskey="X" >Button 2</button>
</div>

</body> 
```

# php - 将 PHP 与源文件相关联

> ID：14085575
> 
> 赞同：0
> 
> 时间：2012-12-29T20:18:57.600
> 
> 标签：php, html

抱歉，如果标题有点含糊，无论如何也想不出更好的表达方式。

我正在尝试为网站制作页面系统。您可以预见地从第一页开始，然后单击第二页并出现一组不同的图像。每页有 12 张图片，都是缩略图。您单击缩略图，灯箱会显示高分辨率照片。我目前的问题是我无法将 PHP 脚本正确链接到图像。对我来说，它看起来是正确的，但它不起作用，所以显然不是。

信息：缩略图是 1-24 中的名称“thumb1.jpg”，完整图像是 1-24 中的名称“img1.jpg”

```
<?php
$imgs = array(12, 12, );

if(!empty($_GET["page"]))      
{
  $currPage = $_GET["page"];
}
else
{
  $currPage = 1;
}

for($i = 1; $i<$imgs[$currPage-1]+1;$i++)
{
  echo "<a href='albums/norfolk weekender 2012/img'.$imgs[$currPage][$i].'.jpg' rel='lightbox[group]'><img src='albums/norfolk weekender 2012/thumb'.$imgs[$currPage][$i].'.jpg'/></a>";
}
?> 
```

. 无论如何，我不确定为什么它不起作用，任何帮助将不胜感激。塔。约翰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:22:25.327

```
'.$imgs[$currPage][$i].' 
```

看起来你应该在代码中引用它时使用`"`而不是`'`环绕这个嵌入变量，因为你的 echo 由`"`.

无论哪种方式，从这个角度来看，您正在进行的这个数组结构似乎都不起作用。

```
"albums/norfolk weekender 2012/img".$imgs[$currPage][$i].".jpg" 
```

你有没有考虑过这样的事情（小心，这很粗糙）；与`$pageNo`代表`$_GET["page"]`

```
for ( $i = ($pageNo - 1) * 12 + 1; $i <= ($pageNo * 12); $i++ )
{
    echo "<a href='albums/norfolk weekender 2012/img".$i.".jpg' rel='lightbox[group]'><img src='albums/norfolk weekender 2012/thumb".$i.".jpg'/></a>";
} 
```

如果演示（即在显示之前检查图像是否存在）是一个主要问题，您可以使用`file_exists( filename )`. 通过创建`Array`这样的...

```
$imgs = array(12, 12, ); 
```

...您只是创建一个包含两个 12 元素的数组（可能还有一个空白元素，我不完全确定。）我认为您出错的地方是您试图在`Array`;的“构造函数”中声明大小 在 PHP 中，情况并非如此。

# javascript - 两个无线电检查重定向到特定链接。

> ID：14085576
> 
> 赞同：0
> 
> 时间：2012-12-29T20:19:18.047
> 
> 标签：javascript, html

当每个收音机都从两个问题中检查时，我正在尝试重定向。但我使用的以下代码不起作用。

```
 function chekcSubmitType()
    {

        if(document.getElementById('ra').checked, document.getElementById('rc').checked)
        {
            window.location="page-1.html"; 
        }

        if(document.getElementById('ra').checked, document.getElementById('rd').checked)
        {
            window.location="page-2.html"; 
        }

        if(document.getElementById('rb').checked, document.getElementById('rc').checked)
        {
            window.location="page-3.html"; 
        }

        if(document.getElementById('rb').checked, document.getElementById('rd').checked)
        {
            window.location="page-4.html"; 
        }
    } 
```

我使用 JavaScript 代码将这两个问题分开。

```
<form name="myquiz" method="post">

<p>Question (1)</p>
        <span>500</span>
        <input type="radio" id="ra" value="question1"/>
        <span>1000</span>
        <input type="radio" id="rb" value="question1"/>

<!--I have separated these both by using a JavaScript code-->

<p>Question (2)</p>
        <span>1500</span>
        <input type="radio" id="rc" value="question2"/>
        <span>2000</span>
        <input type="radio" id="rd" value="question2"/>

<input type="button" onClick="chekcSubmitType()" value="Go" />

</form> 
```

这是我真正想做的：

(r) 代表无线电

```
ra + rc redirect to page-1.html
ra + rd redirect to page-2.html
rb + rc redirect to page-3.html
rb + rd redirect to page-4.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:22:47.787

如果要检查 2 个表达式是否为真，请使用 - 运算`&&`符，不要使用 a`,`分隔它们：

```
function chekcSubmitType()     {
    if(document.getElementById('ra').checked && document.getElementById('rc').checked) {
        window.location="page-1.html"; 
    }

    if(document.getElementById('ra').checked && document.getElementById('rd').checked) {
        window.location="page-2.html"; 
    }
    // and so on...
} 
```

有关更多信息，请参阅有关[逻辑运算符](http://www.w3schools.com/js/js_comparisons.asp)的附加信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:23:46.107

使用`&&`运算符...

还可以利用`else if`来使您的代码更好...

```
function chekcSubmitType() {

if (document.getElementById('ra').checked && document.getElementById('rc').checked) {
    window.location = "page-1.html";
}

else if (document.getElementById('ra').checked && document.getElementById('rd').checked) {
    window.location = "page-2.html";
}

else if (document.getElementById('rb').checked && document.getElementById('rc').checked) {
    window.location = "page-3.html";
}

else if (document.getElementById('rb').checked && document.getElementById('rd').checked) {
    window.location = "page-4.html";
}
}​ 
```

这是[演示](http://jsbin.com/uhecuw/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:28:43.837

Vegar 关于 && 运算符是正确的，你也应该使用 window.location.href='' 而不是 window.location。（某些浏览器需要 .href 才能工作）

```
function checkSubmitType()
{
    if(document.getElementById('ra').checked && document.getElementById('rc').checked)
        window.location.href = 'page-1.html';
    if(document.getElementById('ra').checked && document.getElementById('rd').checked)
        window.location.href = 'page-2.html';
    if(document.getElementById('rb').checked && document.getElementById('rc').checked)
        window.location.href = 'page-3.html';
    if(document.getElementById('rb').checked && document.getElementById('rd').checked)
        window.location.href = 'page-4.html';
} 
```

# ios - 相当于 setFrameCenterRotation 的 UI？

> ID：14085585
> 
> 赞同：0
> 
> 时间：2012-12-29T20:20:10.293
> 
> 标签：ios, uiimageview, rotation

几个月来我一直在为 MacO 编写代码，现在正在探索 iOS。这有点令人困惑。

在 MacOS 中，我有一个可以使用 setFrameCenterRotation 旋转的 NSImageView。一个出口，一个电话，工作就完成了。

我想在 iOS 中有一个等价物，但我只能找到使用动画和大量计算的代码示例（当然是为了在这个小屏幕上制作“漂亮”的类似游戏的功能）。

我不想要任何动画，只是我的 ...UIImageView 从给定的度数旋转一个块。

可以做到吗？

任何建议真的很受欢迎！

问候，B.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:24:35.177

您可能希望将视图的`transform`属性设置为旋转变换。例子：

```
CGFloat radians = degrees * M_PI / 180;
myImageView.transform = CGAffineTransformMakeRotation(radians); 
```

`UIImageView`从 继承`transform`属性`UIView`，因此您需要查阅[*UIView 类参考*](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW4)以获取文档。

# javascript - knockoutjs - 如何重用我的视图模型？

> ID：14085595
> 
> 赞同：0
> 
> 时间：2012-12-29T20:21:08.777
> 
> 标签：javascript, knockout.js

开发人员，

假设我有下面的淘汰赛 js 视图模型示例，我想管理 100 个“人员对象”。我不想重新创建低于 100 次的代码，那么有没有另一种方法可以使用与 knockoutjs 的绑定并管理大量项目？

```
function PersonAppViewModel() {
  this.firstName = "Bert";
  this.lastName = "Bertington";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:27:16.277

使用集合。例如，viewmodel 有集合 Persons。View 绑定到 viewmodels 的 Persons 属性。[您可以在此处](http://knockoutjs.com/examples/collections.html)查看示例。

# data-structures - 带有条件通知者的消息队列

> ID：14085597
> 
> 赞同：1
> 
> 时间：2012-12-29T20:21:19.273
> 
> 标签：data-structures, terminology, message-queue

假设我有一个消息队列，它接收具有 members 的消息`name`，`type`依此类推。

此队列上是否有一种类型的观察者的名称，它需要具有特定内容的消息？

```
if (message.name.equals(observer.wantedName) {
  observer.notify();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:31:05.473

以下只是伪代码中如何解决问题的示例。MessageQueue 有一个哈希表，其中键是消息类型和值数组，带有此消息类型的侦听器。此外，您还需要一个`YourMessageQueue:observe()`描述条件的附加参数。

```
class YourMessageQueue extends /* or implements */ EventDispatcher {

    function addMsg(msg) {
        foreach(this.listeners[msg.type] as listener) {
            listener.notify(msg, this);
        }
    }
}

class YourObserver implements Observer {

    function createMesssageQueue() {
        msgq = new MessageQueue();
        msgq.addObserver(this, 'foo');
    }
}

class EventDispatcher {

    protected hashtable observers;

    function addObserver(Observer observer, string eventType) {
        this.observers[eventType].push(observer);
    }
}

interface Observer {

    function notify($data, $sender);
} 
```

# r - 添加具有值和 NA 的列

> ID：14085600
> 
> 赞同：3
> 
> 时间：2012-12-29T20:21:33.350
> 
> 标签：r

> **可能重复：**
> [使用先前的非 NA 值填充向量中的 NA？](https://stackoverflow.com/questions/9023072/populate-nas-in-a-vector-using-prior-non-na-values)

我一直试图解决这个问题，但我似乎无法找到解决这个编码问题的方法。我喜欢创建一个列向量，它会重复相同的值，直到下一个非`NA`列出现在另一列中。所以这里有一个表格来说明我想要实现的目标（第 2 栏）。

```
 [,1] [,2]
    [1,] A     a1
    [2,] NA    a1
    [3,] NA    a1
    [4,] B     a2
    [5,] NA    a2
    [6,] A     a3 
```

很抱歉造成混乱。之前写这篇文章的时候，我一定是真的很紧张。我已对第 2 列进行了更正（请参见上文）。阅读您的帖子后，这是我想出的代码，虽然它效率不高也不优雅：

```
 d <- paste("a", 1:sum(!is.na(column1)), sep="")  # get a1, a2, a3  
     column2 <- rep(NA, length(column1)  #create empty vector w/ column1 length
     column2[!is.na(colum1)] <- d #when col1 has a value, populate col2 with a1   
     e  <- na.locf.default(column2) #fill NAs in col2 with previous value 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:30:13.557

给定`x`：

```
x <- c('A', NA, NA, 'B', NA, 'A') 
```

根据您对问题的最新编辑，您想要什么：

```
y <- x
y[!is.na(x)] <- seq(sum(!is.na(x)))

paste0('a', na.locf(y))
[1] "a1" "a1" "a1" "a2" "a2" "a3" 
```

正如@flodel 观察到的，我正在计算字符串中的非 NA 字符。这直接做到了：

```
> cumsum(!is.na(x))
[1] 1 1 1 2 2 3

> paste0('a', cumsum(!is.na(x)))
[1] "a1" "a1" "a1" "a2" "a2" "a3" 
```

这个结果`a1, a1, a1, a4, a4, a6`以它自己的方式看起来是合乎逻辑的，显示了哪个值被重复了，但这不是你想要的：

```
y <- x
y[!is.na(x)] <- seq_along(x)[!is.na(x)]

paste0('a', na.locf(y))
[1] "a1" "a1" "a1" "a4" "a4" "a6" 
```

对于@Arun 的评论所指出的（重复的问题），这是一种方法：

```
library(zoo)
na.locf(x)
[1] "A" "A" "A" "B" "B" "A" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T20:37:47.410

如果字符值是“NA”，即北美的缩写，您可能会遇到困难，而不是将`NA_character_`其打印为 NA 有点令人困惑：

```
 c("NA", NA_character_, NA)
#[1] "NA" NA   NA 
is.na(c("NA", NA_character_, NA))
#[1] FALSE  TRUE  TRUE 
```

....但假设这不是问题然后按照马修建议的那样做：

```
require(zoo)
filled <- na.locf(vec) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T23:13:32.200

您也可以使用以下函数在没有`zoo`包的情况下非常简洁地执行此操作：`rle`

```
x <- c('A', NA, NA, 'B', NA, 'A')
x.rle <- rle(replace(x, which(is.na(x)), na.str <- '.'))
x[is.na(x)] <- with(x.rle, rep(values[which(values == na.str) - 1], 
                               lengths[values == na.str]))

# [1] "A" "A" "A" "B" "B" "A" 
```

# java - 是否可以仅使用 1 个 UDPSocket 在同一端口上发送/接收？

> ID：14085606
> 
> 赞同：6
> 
> 时间：2012-12-29T20:21:54.993
> 
> 标签：java, networking, udp, packet, datagram

我正在尝试发送一个 DatagramPacket，然后必须等待来自服务器的确认，以便我知道是否必须重新发送相同的数据包或发送下一个数据包..

我在客户端使用同一个套接字，发送数据包并接收确认（ack），在服务器端，另一个套接字用于接收数据包，然后将确认发送到客户..

第一个问题是客户端正在发送数据包，服务器正在接收它，然后向客户端发送确认，但客户端在接收确认包时阻塞。

我正在制作一些 System.out.println 来确定问题出在哪里，但我找不到任何解决这个问题的方法。

第二个问题是服务器仍然一直在接收数据，而不是等待客户端发送一些东西，我检查了因为我得到了那些行（比如“得到长度为 xxx 的数据包”“ack sent with ackNr yyy”...... "打印在服务器端，尽管客户端在发送第一个数据包后一直阻塞，因为它正在等待未收到的确认！

这是客户端的代码：

```
package blatt7;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketTimeoutException;
import java.net.UnknownHostException;
import java.nio.ByteBuffer;
import java.util.zip.CRC32;

public class FileSender { 

String zielRechner;
String filePath;
InetAddress host;
File file;
FileInputStream fis;
int readLength;
int sequenceNr = 0;
int receivedSeqNr = 1;
static int port = 7777;
int packetNr = 0;
byte[] packet = new byte[1216];
byte[] data = new byte[1200];
byte[] header = new byte[16];
byte[] readLengthByte = new byte[4];
byte[] sequenceNrByte = new byte[4];
byte[] checksumByte = new byte[8];
byte[] ackBuffer = new byte[4];
CRC32 checksumCalculator = new CRC32();
DatagramPacket dp;
DatagramPacket ackPacket;
DatagramSocket sendSocket = null;
//DatagramSocket ackSocket = null;
static boolean ackReceived = true;

public FileSender(String zielRechner, String filePath) throws UnknownHostException, FileNotFoundException {
    this.zielRechner = zielRechner;
    this.filePath = filePath;
    this.host = InetAddress.getByName(zielRechner);
    this.file = new File(filePath);
    fis = new FileInputStream(file);        
}

public void sendFile() throws IOException {

    while((readLength = fis.read(data)) != -1) {
        if (sequenceNr == 1)
            sequenceNr = 0;
        else
            sequenceNr = 1;

        readLengthByte = intToBytes(readLength);
        sequenceNrByte = intToBytes(sequenceNr);

        for(int i=0; i<4; i++) {
            header[8+i] = readLengthByte[i];                
        }

        for(int i=0; i<4; i++) {
            header[12+i] =sequenceNrByte[i];                
        }

        int j=0; 
        for (int i=0; i<packet.length; i++) {
            if (i < header.length) 
                packet[i] = header[i];
            else { 
                packet[i] = data[j];
                j++;
            }
        }

        checksumCalculator.reset();
        checksumCalculator.update(packet,8,8+readLength);
        checksumByte = longToBytes(checksumCalculator.getValue());

        for(int i=0; i < 8; i++) {
            packet[i] = checksumByte[i];
        }

        dp = new DatagramPacket(packet, packet.length, host, port);

        while(receivedSeqNr == sequenceNr && ackReceived) {
            try {
                ackReceived = false;
                sendSocket = new DatagramSocket();
                sendSocket.send(dp);
                sendSocket.setSoTimeout(10000);
                packetNr++;
                System.out.println("Packet sent with seqNr: " + sequenceNr + " and length: " + bytesToInt(readLengthByte, 0) + " - PACKET NR: " + packetNr);
                ackPacket = new DatagramPacket(ackBuffer, ackBuffer.length);
                System.out.println("TEST!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
                sendSocket.receive(ackPacket);
                System.out.println("Receiving ACK!!");
                ackReceived = true;
                ackBuffer = ackPacket.getData();
                receivedSeqNr = bytesToInt(ackBuffer,0);
                System.out.println("got SequenceNr with receivedSeq-Nr: " + receivedSeqNr);
            } catch (SocketTimeoutException e) {
                    e.printStackTrace();
                    break;
            }
        }   
    }

    fis.close();
    System.out.println("Transfer Completed Successfully!");
    sendSocket.close();
}

public static byte[] longToBytes(long value) {
    ByteBuffer buffer = ByteBuffer.allocate(8);
    buffer.putLong(value);
    return buffer.array();
}

public static long bytesToLong(byte[] bytes, int index) {
    ByteBuffer buffer = ByteBuffer.allocate(8);
    buffer.put(bytes);
    buffer.flip();//need flip 
    return buffer.getLong(index);
}

public static byte[] intToBytes(int value) {
    ByteBuffer buffer = ByteBuffer.allocate(4);
    buffer.putInt(value);
    return buffer.array();
}

public static int bytesToInt(byte[] bytes, int index) {
    ByteBuffer buffer = ByteBuffer.allocate(4);
    buffer.put(bytes);
    buffer.flip();//need flip 
    return buffer.getInt(index);
}

public static void main(String[] args) throws IOException,ClassNotFoundException {

    FileSender sender = new FileSender("localhost", "C:/Users/Kb/Desktop/Deepophile - Psychedelic Sessions.wav");
    sender.sendFile();

}

} 
```

这是服务器的代码：

```
package blatt7;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketException;
import java.util.zip.CRC32;

public class FileReceiver {

byte[] incomingBuffer;
DatagramPacket incomingPacket;
DatagramSocket receiveSocket;
DatagramPacket ackPacket;
int packetCounter = 0;
int dataLength;
int receivedSeqNr;
long calculatedChecksum;
long receivedChecksum;
CRC32 checksumCalculator = new CRC32();
byte[] dataLengthByte = new byte[4];
byte[] receivedSeqNrByte = new byte[4];
byte[] receivedChecksumByte = new byte[8];
byte[] ackArray;

public FileReceiver() throws SocketException {
    incomingBuffer = new byte[1500];
    incomingPacket = new DatagramPacket(incomingBuffer, incomingBuffer.length);
}

public void receive() throws IOException {

    receiveSocket = new DatagramSocket(FileSender.port);
    receiveSocket.setSoTimeout(10000);
    System.out.println("Server socket created. Waiting for incoming data...");

    while(true && FileSender.ackReceived)
    {   
        receiveSocket.receive(incomingPacket);
        packetCounter++;

        for (int i=0; i <4; i++) {
            dataLengthByte[i] = incomingBuffer[8+i];
        }
        dataLength = FileSender.bytesToInt(dataLengthByte,0);

        checksumCalculator.reset();
        checksumCalculator.update(incomingBuffer, 8, dataLength+8);             
        calculatedChecksum = checksumCalculator.getValue();

        for (int i=0; i <4; i++) {
            receivedSeqNrByte[i] = incomingBuffer[12+i];
        }
        receivedSeqNr = FileSender.bytesToInt(receivedSeqNrByte,0);

        for (int i=0; i <8; i++) {
            receivedChecksumByte[i] = incomingBuffer[i];
        }
        long receivedChecksum = FileSender.bytesToLong(receivedChecksumByte,0);

        System.out.println("Got packet with checksum: " + receivedChecksum);
        System.out.println("Server-calculated checksum: " + calculatedChecksum);
        System.out.println("Got packet with seqNr: " + receivedSeqNr + " and length: " + dataLength);

        if (calculatedChecksum != receivedChecksum)  {
            sendACK(receivedSeqNr);
            System.out.println("Packet have erros(s)! It must be sent another time!");
        }
        else if(calculatedChecksum == receivedChecksum && receivedSeqNr == 1) {
            sendACK(0);
            System.out.println("SeqNr '0' sent");
        }
        else if (calculatedChecksum == receivedChecksum && receivedSeqNr == 0) {
            sendACK(1);
            System.out.println("SeqNr '1' sent");
        }
    }
}

public void sendACK(int seqNum) throws IOException {
    byte[] ackArray = FileSender.intToBytes(seqNum);
    ackPacket = new DatagramPacket(ackArray, ackArray.length, InetAddress.getByName("localhost"), FileSender.port);
    receiveSocket.send(ackPacket);      
}

public static void main(String[] args) throws IOException,ClassNotFoundException {
    FileReceiver receiver = new FileReceiver();
    receiver.receive();     
}

} 
```

您可以尝试执行它以查看问题出在哪里...因此，如果您知道如何解决此问题，请告诉我！

非常感谢你！

谁能告诉我在哪里可以找到收到的文件？或者我应该如何更改我的代码以便我选择保存它的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T01:18:23.193

是的，有可能。您的问题是发送 ACK 数据报时目标地址：端口错误。您应该从收到的 DatagramPacket 中获取目标地址：端口，或者更简单地仍然只是*重用*具有不同数据的数据报作为 ACK 数据报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:50:34.710

服务器如何使用自己的端口发送给客户端？您正在服务器端口上从服务器向客户端发送 ACK，您应该从接收到的数据包中获取客户端的 UDP 端口并将数据发送到该端口。

**编辑**

将 SendACK 方法中的 Server 更改为：

```
ackPacket = new DatagramPacket(ackArray, ackArray.length, InetAddress.getByName("localhost"), incomingPacket.getPort()); 
```

现在通过运行来分析代码。

# c# - 文本框文本颜色更改

> ID：14085607
> 
> 赞同：7
> 
> 时间：2012-12-29T20:22:10.133
> 
> 标签：c#, wpf, textbox

我有`textbox` `textbox1`并且我想更改文本颜色，但在所有文本的一部分。例如从`/*`到`*/`喜欢视觉工作室中的评论？

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T20:39:34.760

试试这个：

```
TextRange rangeOfText1 = new TextRange(richTextBox.Document.ContentEnd, richTextBox.Document.ContentEnd);
rangeOfText1.Text = "Text1 ";
rangeOfText1.ApplyPropertyValue(TextElement.ForegroundProperty, Brushes.Blue);
rangeOfText1.ApplyPropertyValue(TextElement.FontWeightProperty, FontWeights.Bold);

TextRange rangeOfWord = new TextRange(richTextBox.Document.ContentEnd, richTextBox.Document.ContentEnd);
rangeOfWord.Text = "word ";
rangeOfWord.ApplyPropertyValue(TextElement.ForegroundProperty, Brushes.Red);
rangeOfWord.ApplyPropertyValue(TextElement.FontWeightProperty, FontWeights.Regular);

TextRange rangeOfText2 = new TextRange(richTextBox.Document.ContentEnd, richTextBox.Document.ContentEnd);
rangeOfText2.Text = "Text2 ";
rangeOfText2.ApplyPropertyValue(TextElement.ForegroundProperty, Brushes.Blue);
rangeOfText2.ApplyPropertyValue(TextElement.FontWeightProperty, FontWeights.Bold); 
```

或这个：

```
public TestWindow()
{
InitializeComponent();

this.paragraph = new Paragraph();
rich1.Document = new FlowDocument(paragraph);

var from = "user1";
var text = "chat message goes here";
paragraph.Inlines.Add(new Bold(new Run(from + ": "))
{
    Foreground = Brushes.Red
});
paragraph.Inlines.Add(text);
paragraph.Inlines.Add(new LineBreak());
this.DataContext = this;
}
private Paragraph paragraph; 
```

来源：

[在 WPF C# 中更改部分文本的颜色和字体](https://stackoverflow.com/questions/5442067/change-color-and-font-for-some-part-of-text-in-wpf-c-sharp)

和 MSDN：

[http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.document.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.document.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:24:26.533

您可以这样做，但是，您可能想要查看 RichTextBox 控件，哪里更容易做到。

简单的例子：

```
richtextbox.SelectionFont = new Font("Verdana", 10, FontStyle.Regular);
richtextbox.SelectionColor = Color.Blue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:41:28.413

您必须从中派生控件`TextBox`并放入代码，以允许用户更改颜色或根据您的规则更改颜色。

A[`RichTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.aspx)将为您提供基础，因为它允许不同的文本“运行”，每个文本都可以有自己的样式：

```
<RichTextBox Name="richTB">
  <FlowDocument>
    <Paragraph>
      <Run>Paragraph 1</Run>
    </Paragraph>
    <Paragraph>
      <Run>Paragraph 2</Run>
    </Paragraph>
    <Paragraph>
      <Run>Paragraph 3</Run>
    </Paragraph>
  </FlowDocument>
</RichTextBox> 
```

If you add controls for colour etc. then you can create a new run from the user's selection with the required style.

# c++ - Explorer.exe DLL 注入

> ID：14085614
> 
> 赞同：0
> 
> 时间：2012-12-29T20:22:57.263
> 
> 标签：c++, windows

我有提供图标覆盖的 OverlayIcon.dll，现在我想将此 dll 注入 explorer.exe 或注册 dll 并重新启动 explorer.exe。

在这两个过程中，我想知道如何重新启动 explorer.exe 或刷新它以反映新的覆盖图标。

# actionscript-3 - 事件驱动的动作脚本

> ID：14085616
> 
> 赞同：1
> 
> 时间：2012-12-29T20:23:18.030
> 
> 标签：actionscript-3, flash, events, flash-builder

我在操作脚本项目时遇到问题。我必须向用户询问 5 次问题，用户必须回答，当用户单击按钮时，必须验证答案。

有没有办法让 for 循环等待点击事件？

我在想的是这样的：

```
for(teller = 0; teller < 5; teller++){
   //show new question
   //user answers , and when finished the user clicks the button
   buttonNext.addEventListener(MouseEvent.CLICK,checkAnswer);                               
   //it has to wait until the user clicks the button , and then begin all over again
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T23:37:07.803

是的，但是以不同的方式进行（不使用 for 循环）：

```
var questionsAnswered = 0; //in class files put this higher up

nextQuestionButton.addEventListener(MouseEvent.CLICK, nextQuestion);
function nextQuestion(e:MouseEvent){
    trace(questionsAnswered);
    questionsAnswered++;
    // Logic here
} 
```

# android - Android 文本颜色选择器

> ID：14085618
> 
> 赞同：5
> 
> 时间：2012-12-29T20:23:29.660
> 
> 标签：android, android-layout, android-listview, android-theme

我正在尝试`TextView`使用以下代码为 textColor 设置选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false" android:color="?android:attr/textColorTertiary" />
    <item android:color="?android:attr/textColorPrimary"/>
</selector> 
```

但是，颜色总是出现`red`而不是那些`theme colors`。如果我输入硬编码颜色，一切似乎都正常。（例如`<item android:state_enabled="false" android:color="#666666" />`）。

问题是什么以及如何解决？PS如果有人知道如何为列表中的禁用项目设置主题的默认禁用颜色，请分享，这就是我想要实现的。谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-29T20:32:01.003

据我所知，您可能必须在选择器中使用 3 个状态。

```
state enabled
state focused
state pressed 
```

完全按照这个顺序。这可能会有所帮助

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-30T06:26:04.057

您出于什么原因使用选择器？
如果您想让文本视图的文本始终为红色，则不需要选择器。只需使用添加颜色在 color.XML 或 string.XML 中定义颜色。
如果你想在选择或焦点上改变它而不是使用状态。
**状态启用**
**状态按下**
**状态聚焦**
比它将按您的需要工作。

# c++ - 为什么 C++11 删除的函数会参与重载决议？

> ID：14085620
> 
> 赞同：94
> 
> 时间：2012-12-29T20:23:48.380
> 
> 标签：c++, c++11

为什么 C++11 让[“ `delete`d”函数参与重载决议](https://stackoverflow.com/a/13951621/541686)？
为什么这很有用？或者换句话说，为什么它们被隐藏而不是被完全删除？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-12-29T20:37:14.683

语法的一半目的`= delete`是能够防止人们使用某些参数调用某些函数。这主要是为了防止某些特定场景下的隐式转换。为了禁止特定的过载，它必须参与过载解决。

您引用的答案为您提供了一个完美的例子：

```
struct onlydouble {
  onlydouble(std::intmax_t) = delete;
  onlydouble(double);
}; 
```

如果`delete`完全删除该函数，这将使`= delete`语法等同于：

```
struct onlydouble2 {
  onlydouble2(double);
}; 
```

你可以这样做：

```
onlydouble2 val(20); 
```

这是合法的 C++。编译器将查看所有构造函数；它们都没有直接采用整数类型。但是其中一个可以在隐式转换后接受它。所以它会这么叫。

```
onlydouble val(20); 
```

这*不是*合法的 C++。编译器将查看所有构造函数，包括`delete`d 构造函数。它将看到一个完全匹配的 via `std::intmax_t`（它将完全匹配任何整数文字）。所以编译器会选择它然后立即发出错误，因为它选择了一个`delete`d 函数。

`= delete`意思是“我禁止这个”，而不仅仅是“这不存在”。这是一个更强有力的声明。

> 我在问为什么 C++ 标准说 = delete 意味着“我禁止这个”而不是“这个不存在”

这是因为我们不需要特殊的语法来说“这不存在”。我们通过简单地不声明所讨论的特定“this”来隐含地得到这一点。“我禁止这个”表示没有特殊语法*就无法*实现的结构。所以我们得到特殊的语法来说“我禁止这个”而不是其他的东西。

通过明确的“这不存在”语法，您将获得的唯一功能是防止某人稍后声明它存在。这还不足以需要它自己的语法。

> 否则无法声明复制构造函数不存在，并且它的存在会导致无意义的歧义。

复制构造函数是一个特殊的成员函数。每个类*总是*有一个复制构造函数。就像他们总是有一个复制赋值运算符、移动构造函数等一样。

这些功能存在；问题只是打电话给他们是否合法。如果您试图说这`= delete`意味着它们不存在，那么规范将不得不解释函数不存在的含义。这不是规范处理的概念。

如果您尝试调用尚未声明/定义的函数，则编译器将出错。但它会因为*未定义的标识符*而出错，而不是因为“函数不存在”错误（即使你的编译器以这种方式报告它）。各种构造函数都由重载决议调用，因此它们的“存在”是在这方面处理的。

在每种情况下，要么有一个通过标识符声明的函数，要么是一个构造函数/析构函数（也通过标识符声明，只是一个类型标识符）。运算符重载将标识符隐藏在语法糖后面，但它仍然存在。

C++ 规范无法处理“不存在的函数”的概念。它可以处理过载不匹配。它可以处理过载歧义。但它不知道什么不存在。所以`= delete`被定义为更有用的“尝试称之为失败”，而不是不太有用的“假装我从未写过这行”。

再次，重新阅读第一部分。你*不能*用“函数不存在”来做到这一点。这也是它被定义为这种方式的另一个原因：因为`= delete`语法的主要用例之一是能够强制用户使用某些参数类型、显式转换等等。基本上，为了阻止隐式类型转换。

你的建议不会那样做。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-29T22:25:46.693

C++ 工作草案 2012-11-02 并未提供此规则背后的基本原理，仅提供一些示例

> **8.4.3 删除的定义 [dcl.fct.def.delete]**
> ...
> 3 [*示例*：可以使用以下命令强制执行非默认初始化和非整数初始化

```
struct onlydouble {  
  onlydouble() = delete; // OK, but redundant  
  onlydouble(std::intmax_t) = delete;  
  onlydouble(double);  
}; 
```

> —*结束示例*]
> [*示例*：可以通过使用已删除的用户声明的运算符 new 为该类定义来防止在某些新表达式中使用该类。

```
struct sometype {  
  void *operator new(std::size_t) = delete;  
  void *operator new[](std::size_t) = delete;  
};  
sometype *p = new sometype; // error, deleted class operator new  
sometype *q = new sometype[3]; // error, deleted class operator new[] 
```

> —*结束示例*]
> [*示例*：通过使用复制构造函数和复制赋值运算符的已删除定义，然后提供移动构造函数和移动赋值运算符的默认定义，可以使类不可复制，即只能移动。

```
struct moveonly {  
  moveonly() = default;  
  moveonly(const moveonly&) = delete;  
  moveonly(moveonly&&) = default;  
  moveonly& operator=(const moveonly&) = delete;  
  moveonly& operator=(moveonly&&) = default;  
  ~moveonly() = default;  
};  
moveonly *p;  
moveonly q(*p); // error, deleted copy constructor 
```

> —*结束示例*]

# asp.net - 带有百分比符号的 SQL 查询语法错误

> ID：14085622
> 
> 赞同：0
> 
> 时间：2012-12-29T20:24:19.890
> 
> 标签：asp.net, sql, sql-server

我在 SQLDataSource 中有以下 SQL 查询：

```
SELECT 
   stn_ID, stn_Name, stn_Website, stn_IsDestination, 
   stn_NRCode, stn_NRCodeExist, stn_PostCode, twn_ID 
FROM 
   dbo.tbl_Station AS s 
WHERE 
   (stn_ID NOT IN (SELECT tds_Stn 
                   FROM dbo.tbl_tripDeptStation AS tr 
                   WHERE (tds_Trip LIKE @trip_ID))) 
   AND (stn_Name LIKE %@dept_search%) 
```

但是我收到语法错误警告：

> *“@dept_search”附近的语法不正确。*

我该如何纠正错误？我要求`%`符号在参数的前后，除非有替代方法。如果我删除这些符号，查询将正确运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T20:25:50.953

`%`'s 必须用单引号括起来

`(stn_Name LIKE '%' +@dept_search + '%')`

# c - C标准二叉树

> ID：14085626
> 
> 赞同：4
> 
> 时间：2012-12-29T20:24:52.030
> 
> 标签：c, data-structures, tree, binary-tree

在 C 编程方面，我几乎是个菜鸟。

几天来一直在尝试从以下形式的表达式创建二叉树：

```
A(B,C(D,$)) 
```

每个字母都是节点。

`'('`在我的树中下降一个级别（向右）。

`','`去我树的左边树枝

`'$'`插入一个 NULL 节点。

`')'`意味着上升一个层次。

这是我在编码 2-3 天后得出的结论：

```
#define SUCCESS 0

typedef struct BinaryTree
{
char info;
BinaryTree *left,*right,*father;
}BinaryTree;

int create(BinaryTree*nodeBT, const char *expression)
{   
    nodeBT *aux;
    nodeBT *root;
    nodeBT *parent;
    nodeBT=(BinaryTree*) malloc (sizeof(BinaryTree));         
        nodeBT->info=*expression;
    nodeBT->right=nodeBT->left=NULL;
    nodeBT->father = NULL;

    ++expression;   
    parent=nodeBT;                                                 
    root=nodeBT;

    while (*expression)
        {if (isalpha (*expression))
            {aux=(BinaryTree*) malloc (sizeof(BinaryTree));
             aux->info=*expression;
             aux->dr=nodeBT->st=NULL;
             aux->father= parent;
             nodeBT=aux;}

        if (*expression== '(')
            {parent=nodeBT;
            nodeBT=nodeBT->dr;}

        if (*expression== ',')
            {nodeBT=nodeBT->father;
            nodeBT=nodeBT->dr;}

        if (*expression== ')')
            {nodeBT=nodeBT->father;
            parent= nodeBT->nodeBT;}

        if (*expression== '$')
            ++expression;

        ++expression;
    }

nodeBT=root;
return SUCCESS;
} 
```

最后，在尝试访问新创建的树时，我不断收到“内存不可读 0xCCCCCC”。而且我没有丝毫暗示我在哪里弄错了。

任何想法 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-29T20:56:09.127

几个问题：

1.  您没有向我们展示 type 的定义`nodeBT`，但您已经声明`aux`,`root`和`parent`to 是指向该类型的指针。

2.  然后，即使它被声明为指向 a ，您也将其分配`aux`给指向a 。`BinaryTree``nodeBT`

3.  您分配给`aux->dr`，这不是 的一部分`BinaryTree`，所以我不能只假设您输入`nodeBT`了您的意思`BinaryTree`。您分配给`nodeBT->st`，那不是`BinaryTree`两者的一部分。

4.  您尝试通过分配返回解析树`nodeBT=root`。问题在于 C 是一种“按值调用”的语言。这意味着当您的`create`函数分配给 时`nodeBT`，它只是更改其局部变量的值。的调用者`create`没有看到这种变化。所以调用者没有收到根节点。这可能就是您收到“内存不可读”错误的原因；调用者正在访问一些随机内存，而不是包含根节点的内存。

如果您使用称为“递归下降”的标准技术编写解析器，您的代码实际上会更容易理解。就是这样。

让我们编写一个函数，从表达式字符串中解析一个节点。天真地，它应该有这样的签名：

```
BinaryTree *nodeFromExpression(char const *expression) { 
```

要解析节点，我们首先需要获取节点的`info`：

```
 char info = expression[0]; 
```

接下来，我们需要查看节点是否应该有子节点。

```
 BinaryTree *leftChild = NULL;
    BinaryTree *rightChild = NULL;
    if (expression[1] == '(') { 
```

如果它应该有孩子，我们需要解析它们。这就是我们将“递归”放在“递归下降”中的地方：我们只是`nodeFromExpression`再次调用来解析每个孩子。要解析左孩子，我们需要跳过 中的前两个字符，因为它们是当前节点`expression`的 info 和 the ：`(`

```
 leftChild = nodeFromExpression(expression + 2); 
```

但是我们跳过多少来解析正确的孩子？我们需要跳过我们在解析左孩子时使用的所有字符......</p>

```
 rightChild = nodeFromExpression(expression + ??? 
```

我们不知道那是多少个字符！事实证明，我们不仅需要`nodeFromExpression`返回它解析的节点，还需要返回它消耗了多少字符的一些指示。所以我们需要改变签名`nodeFromExpression`来允许它。如果我们在解析时遇到错误怎么办？让我们定义一个结构，它`nodeFromExpression`可以用来返回它解析的节点、它消耗的字符数以及它遇到的错误（如果有的话）：

```
typedef struct {
    BinaryTree *node;
    char const *error;
    int offset;
} ParseResult; 
```

我们会说 if`error`是非 null 的，then`node`是 null 并且`offset`是我们发现错误的字符串中的偏移量。否则，`offset`只是过去用于 parse 的最后一个字符`node`。

所以，重新开始，我们将`nodeFromExpression`return a `ParseResult`。它将把整个表达式字符串作为输入，它会采用该字符串中开始解析的偏移量：

```
ParseResult nodeFromExpression(char const *expression, int offset) { 
```

现在我们有了报告错误的方法，让我们做一些错误检查：

```
 if (!expression[offset]) {
        return (ParseResult){
            .error = "end of string where info expected",
            .offset = offset
        };
    }
    char info = expression[offset++]; 
```

我第一次没有提到这一点，但我们应该`$`在这里处理你的 NULL 令牌：

```
 if (info == '$') {
        return (ParseResult){  
            .node = NULL,
            .offset = offset   
        };
    } 
```

现在我们可以回到解析孩子的问题了。

```
 BinaryTree *leftChild = NULL;
    BinaryTree *rightChild = NULL;
    if (expression[offset] == '(') { 
```

因此，要解析左孩子，我们只需再次递归调用自己。如果递归调用出错，我们返回相同的结果：

```
 ParseResult leftResult = nodeFromExpression(expression, offset);
        if (leftResult->error)
            return leftResult; 
```

OK，我们成功解析了左孩子。现在我们需要检查并使用孩子之间的逗号：

```
 offset = leftResult.offset;
        if (expression[offset] != ',') {
            return (ParseResult){
                .error = "comma expected",
                .offset = offset
            };
        }
        ++offset; 
```

现在我们可以递归调用`nodeFromExpression`来解析右孩子：

```
 ParseResult rightResult = nodeFromExpression(expression, offset); 
```

如果我们不想泄漏内存，那么现在的错误情况会稍微复杂一些。我们需要在返回错误之前释放左孩子：

```
 if (rightResult.error) {
            free(leftResult.node);
            return rightResult;
        } 
```

请注意，`free`如果您通过它，它什么也不`NULL`做，所以我们不需要明确地检查它。

现在我们需要检查并消费`)`after子元素：

```
 offset = rightResult.offset;
        if (expression[offset] != ')') {
            free(leftResult.node);
            free(rightResult.node);
            return (ParseResult){
                .error = "right parenthesis expected",
                .offset = offset
            };
        }
        ++offset; 
```

我们需要在and变量仍在作用域内时设置局部变量`leftChild`和变量：`rightChild``leftResult``rightResult`

```
 leftChild = leftResult.node;
        rightChild = rightResult.node;
    } 
```

如果需要，我们已经解析了两个子节点，所以现在我们准备构建需要返回的节点：

```
 BinaryTree *node = (BinaryTree *)calloc(1, sizeof *node);
    node->info = info;
    node->left = leftChild;
    node->right = rightChild; 
```

我们还有最后一件事要做：我们需要设置`father`孩子的指针：

```
 if (leftChild) {
        leftChild->father = node;
    }
    if (rightChild) {
        rightChild->father = node;
    } 
```

最后，我们可以返回一个成功的`ParseResult`：

```
 return (ParseResult){
        .node = node,
        .offset = offset
    };
} 
```

我已将所有代码放在[此要点](https://gist.github.com/4409503)中，以便于复制粘贴。

### 更新

如果您的编译器不喜欢该`(ParseResult){ ... }`语法，您应该寻找更好的编译器。该语法自 1999 年以来一直是标准的（§6.5.2.5 复合文字）。当您正在寻找更好的编译器时，您可以像这样解决它。

首先，添加两个静态函数：

```
static ParseResult ParseResultMakeWithNode(BinaryTree *node, int offset) {
    ParseResult result;
    memset(&result, 0, sizeof result);
    result.node = node;
    result.offset = offset;
    return result;
}

static ParseResult ParseResultMakeWithError(char const *error, int offset) {
    ParseResult result;
    memset(&result, 0, sizeof result);
    result.error = error;
    result.offset = offset;
    return result;
} 
```

然后，用对这些函数的调用替换有问题的语法。例子：

```
 if (!expression[offset]) {
        return ParseResultMakeWithError("end of string where info expected",
            offset);
    } 
```

```
 if (info == '$') {
        return ParseResultMakeWithNode(NULL, offset);
    } 
```

# css - 为什么发送 HTML 电子邮件时 CSS 不起作用？

> ID：14085630
> 
> 赞同：9
> 
> 时间：2012-12-29T20:25:12.290
> 
> 标签：css, ruby-on-rails-3, heroku, html-email, sendgrid

当我在 heroku 使用 SendGrid 服务时，我注意到当我发送基于 HTML 的电子邮件时，CSS 没有效果，谁能告诉我可能出了什么问题？

我尝试将其作为 html.haml、html.erb 发送，但两者都不起作用，尽管在发送的电子邮件中可以正确查看图像。

任何的想法 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-29T20:28:58.270

尝试使用内联样式而不是外部样式表。像这样：

```
<div style="color:green;" id="div"></div> 
```

而不是这样的：

```
<style>
    #div {
        color:green;
    }
</style>

<div id="div"></div> 
```

（感谢 Kelvis Miho 指出这一点）

**编辑：**我在谷歌上搜索了@Joe 的文字，我意识到大部分是从 [http://css-tricks.com/using-css-in-html-emails-the-real-story/](http://css-tricks.com/using-css-in-html-emails-the-real-story/)复制的。

**编辑：**乔编辑了他的帖子以包含参考链接。

请记住，大多数电子邮件客户端不支持很多 CSS，因此您应该主要同时使用图像和表格。

例如，您可以编写出色的电子邮件设计代码，然后对其进行截图。使用表格，您可以将徽标放在顶部居中，将截图精美的“特色”窗格放在左侧，将“折扣”作为徽标下方的中心内容等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-29T20:29:04.213

**你不能做的事：**

*   包括一个带有样式的部分。Apple Mail.app 支持它，但 Gmail 和 Hotmail 不支持，所以这是一个禁忌。Hotmail 将支持正文中的样式部分，但 Gmail 仍然不支持。
*   链接到外部样式表。没有多少电子邮件客户端支持这一点，最好忘记它。
*   背景图像/背景位置。Gmail 也是这个问题的罪魁祸首。
*   清除你的花车。再次使用 Gmail。
*   利润。是的，说真的，Hotmail 忽略了利润。基本上任何 CSS 定位都不起作用。
*   字体-任何东西。Eudora 很可能会忽略您尝试使用字体声明的任何内容。

还有很多事情你应该注意。有关哪些在线电子邮件服务支持哪些内容的完整列表，请查看 Xavier Frenette 上的这篇文章。

**你可以做什么。**

简而言之，**内联样式**。这并不像您想象的那么糟糕，因为我们基本上是在开发一次性电子邮件，内联样式并不像在网站上使用它们那样令人震惊。

[从这个网站](http://css-tricks.com/using-css-in-html-emails-the-real-story/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T20:26:45.223

您需要使用内联样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-17T20:10:28.990

对我来说，[premailer-rails](https://github.com/fphilipe/premailer-rails) gem 就像一个魅力。您只需要将这些宝石添加到您的 Gemfile

```
gem 'nokogiri'
gem 'premailer-rails' 
```

您的所有电子邮件都将包含资产文件夹中的样式。`email.css.less`我通常在资产文件夹中创建一个，然后`<head>`像这样将它包含在电子邮件中

```
<%= stylesheet_link_tag 'email.css' %> 
```

而且，当我需要包含**图像**时，我发现了这个助手，它允许我将图像附加到电子邮件中，以便它们具有徽标和内容。

```
module EmailHelper
  def email_image_tag(image, **options)
    attachments[image] = File.read(Rails.root.join("public/#{image}"))
    image_tag attachments[image].url, **options
  end
end 
```

在 .erb 模板中

```
<%= email_image_tag "img/logo.png", :class => "some-class" %> 
```

希望它可以帮助某人，问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-12T10:39:48.380

确保将内部样式放在 head 标签内

例如：

```
<head>
    <style type="text/css">
    ...
    ...
    </style>
</head> 
```

> 注意：仅支持内联样式和内部样式（必须在 head 标签中）。

# c++ - 单生产者-多消费者：如何告诉消费者生产已经完成

> ID：14085633
> 
> 赞同：0
> 
> 时间：2012-12-29T20:26:37.260
> 
> 标签：c++

我的程序生产者线程从文本文件中读取文本行（大约有 8000 行文本）并将这些行加载到并发队列中。

三个消费者线程从队列中读取行，每个线程写入一个单独的文件。

当我运行程序时，只有生产者线程和消费者线程之一完成。其他两个线程似乎挂起。

我如何可靠地告诉所有消费者线程已到达文件末尾，因此它们应该返回但确保队列完全为空。

我的平台是 Windows 7 64 位

VC11。

编译为 64 位和 32 位的代码具有相同的行为。

这是代码。（它是自包含和可编译的）

```
#include <queue>
#include<iostream>
#include<fstream>
#include <atomic>
#include <thread>
#include <condition_variable>
#include <mutex>
#include<string>
#include<memory>

template<typename Data>
class concurrent_queue
{
private:
    std::queue<Data> the_queue;
    mutable std::mutex the_mutex;
    std::condition_variable the_condition_variable;
public:
    void push(Data const& data){
        {
            std::lock_guard<std::mutex> lock(the_mutex);
            the_queue.push(data);
        }
        the_condition_variable.notify_one();
    }

    bool empty() const{
        std::unique_lock<std::mutex> lock(the_mutex);
        return the_queue.empty();
    }

    const size_t size() const{
        std::lock_guard<std::mutex> lock(the_mutex);
        return the_queue.size();
    }

    bool try_pop(Data& popped_value){
        std::unique_lock<std::mutex> lock(the_mutex);
        if(the_queue.empty()){
            return false;
        }
        popped_value=the_queue.front();
        the_queue.pop();
        return true;
    }

    void wait_and_pop(Data& popped_value){
        std::unique_lock<std::mutex> lock(the_mutex);
        while(the_queue.empty()){
            the_condition_variable.wait(lock);
        }
        popped_value=the_queue.front();
        the_queue.pop();
    }
};

std::atomic<bool> done(true);
typedef std::vector<std::string> segment;
concurrent_queue<segment> data;
const int one_block = 15;

void producer()
{
    done.store(false);
    std::ifstream inFile("c:/sample.txt");
    if(!inFile.is_open()){
        std::cout << "Can't read from file\n";
        return;
    }

    std::string line;
    segment seg;
    int cnt = 0;
    while(std::getline(inFile,line)){
        seg.push_back(line);
        ++cnt;
        if( cnt == one_block ){
            data.push( seg );
            seg.clear();
            cnt = 0;
        }
    }
    inFile.close();
    done.store(true);
    std::cout << "all done\n";
}

void consumer( std::string fname)
{
    std::ofstream outFile(fname.c_str());
    if(!outFile.is_open()){
        std::cout << "Can't write to file\n";
        return;
    }

    do{
        while(!data.empty()){
            segment seg;
            data.wait_and_pop( seg );
            for(size_t i = 0; i < seg.size(); ++i)
            {
                outFile << seg[i] << std::endl;
            }
            outFile.flush();
        }
    } while(!done.load());
    outFile.close();
    std::cout << fname << "  done.\n";
}

int main()
{
    std::thread th0(producer);
    std::thread th1(consumer, "Worker1.txt");
    std::thread th2(consumer, "Worker2.txt");
    std::thread th3(consumer, "Worker3.txt");

    th0.join();
    th1.join();
    th2.join();
    th3.join();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:54:25.763

我用来终止在队列中等待的所有线程的方法是在队列上设置一个标志，说明它是否已完成，在检查`pop()`函数中是否存在元素之前对其进行测试。如果标志指示程序应该停止，`pop()`则如果队列中没有元素，则任何线程调用都会引发异常。当标志改变时，改变线程只调用`notify_all()`相应的条件变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:53:12.523

看下面的代码：

```
while(!data.empty()){
    segment seg;
    data.wait_and_pop( seg );
    ... 
```

考虑要读取最后一段数据的情况。消费者正在等待数据被读取`th1`。`th2`

消费者`th1`检查`!data.empty()`并发现有要读取的数据。然后在`th1`调用之前`data.wait_and_pop()`，消费者`th2`检查`!data.empty()`并发现它是真的。假设`th1`消费者消费了最后一段。现在，由于没有要读取的段，因此`th2`无限期地等待`the_queue.empty()`in `data.wait_and_pop()`。

试试这个代码而不是上面的代码片段：

```
segment seg;
while(data.try_pop(seg)){
    ... 
```

应该让它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:54:48.093

您可能想在`concurrent_queue`. 读取文件后设置它（在互斥锁下）。读取文件*且*队列为空后，使用 . 从清空队列的消费者那里广播条件变量`notify_all`。

这将唤醒所有其他需要发现最终条件（标志集和队列为空）并退出循环的消费者。为了避免竞争条件，这意味着他们需要在等待之前检查相同的组合条件。

您现有标志的问题是永远不会从等待 condvar 中醒来的线程，永远不会检查它。“完成”标志需要是他们正在等待的状态的一部分。

[编辑：Dietmar 对标志的微妙不同含义可能会导致代码更简单，但我还没有将它们都写出来进行比较。]

# iphone - 防止移动 safari 上的水平滚动，overflow-x:hidden break 站点

> ID：14085641
> 
> 赞同：4
> 
> 时间：2012-12-29T20:27:33.727
> 
> 标签：iphone, ios, mobile, overflow, hidden

![在此处输入图像描述](../Images/63ef3e02026fc45694e7142615d8733c.png)我希望在移动 safari 中防止我的投资组合网站上的水平滚动。该设计的特点是内容 div 不在屏幕上，直到用户单击菜单项然后他们转换到屏幕上。这在桌面上运行良好，但在移动设备上，它留下了大量额外的空白空间，用户可以水平滚动进入。

该网站是[http://www.robiannone.com](http://www.robiannone.com)

我用过这个视口标签 `<meta name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=1.0, initial-scale=1" />`

我尝试过使用`overflow-x:hidden`媒体查询，但没有任何运气。当我将 overflow-x:hidden 添加到 html 或 body 标记时，没有任何反应，但是当我将它添加到 html 和 body 标记时，站点会中断，并在标题附近放置一个滚动条。我已经搜索了其他解决方案，但到目前为止还没有提出任何帮助。它会因为我故意将内容放在屏幕外而不起作用吗？

非常感谢您提供的任何帮助！

这是内容 div 的 css：

```
.web {
width: 953px;
height: 150px;
position: absolute;
margin-top:40px;
margin-left:0px;
z-index:1;opacity:0;
padding:7px;
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
-o-border-radius: 10px;
-ms-border-radius: 10px;
border-radius: 10px;

/*Transition Effect, Thanks css-tricks.com!  */
-webkit-transition: opacity 1s linear 0.3s, height 1s linear 0.2s, z-index 0.1s linear, margin-top 1.5s ease, margin-left 0.9s ease;
-moz-transition: opacity 1s linear 0.3s, height 1s linear 0.2s, z-index 0.1s linear, margin-top 1.5s ease, margin-left 0.9s ease;
-o-transition: opacity 1s linear 0.3s, height 1s linear 0.2s, z-index 0.1s linear, margin-top 1.5s ease, margin-left 0.9s ease;
-ms-transition: opacity 1s linear 0.3s, height 1s linear 0.2s, z-index 0.1s linear, margin-top 1.5s ease, margin-left 0.9s ease;
transition: opacity 1s linear 0.3s, height 1s linear 0.2s, z-index 0.1s linear, margin-top 1.5s ease, margin-left 0.9s ease;
}
.video {
width: 953px;
height: 150px;
position: absolute;
margin-top:40px;
margin-left:0px;
z-index:500;
overflow:hidden;
opacity:0;
padding:7px;
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
-o-border-radius: 10px;
-ms-border-radius: 10px;
border-radius: 10px;

/*Transition Effect, Thanks css-tricks.com!  */
-webkit-transition:opacity 1s linear 0.3s, height 1s linear 0.3s, z-index 0.1s linear, margin-top 0.9s ease, margin-left 1.5s ease;
-moz-transition:opacity 1s linear 0.3s, height 1s linear 0.3s, z-index 0.1s linear, margin-top 0.9s ease, margin-left 1.5s ease;
-o-transition:opacity 1s linear 0.3s, height 1s linear 0.3s, z-index 0.1s linear, margin-top 0.9s ease, margin-left 1.5s ease;
-ms-transition:opacity 1s linear 0.3s, height 1s linear 0.3s, z-index 0.1s linear, margin-top 0.9s ease, margin-left 1.5s ease;
 transition:opacity 1s linear 0.3s, height 1s linear 0.3s, z-index 0.1s linear, margin-top 0.9s ease, margin-left 1.5s ease;
}
.about {
width: 953px;
height: auto !important;
position: absolute;
margin-top:40px;
z-index:9000;
opacity:0;
padding:7px;

-webkit-border-radius: 10px;
-moz-border-radius: 10px;
-o-border-radius: 10px;
-ms-border-radius: 10px;
border-radius: 10px;
border-radius: 10px;

/*Transition Effect, Thanks css-tricks.com!  */
  -webkit-transition:opacity 1s linear 0.3s, height 1s linear 0.2s, z-index 0.1s linear, margin-top 1.5s ease, margin-left 0.9s ease;
  -moz-transition:opacity 1s linear 0.3s, height 1s linear 0.2s, z-index 0.1s linear, margin-top 1.5s ease, margin-left 0.9s ease;
  -o-transition:opacity 1s linear 0.3s, height 1s linear 0.2s, z-index 0.1s linear, margin-top 1.5s ease, margin-left 0.9s ease;
  -ms-transition:opacity 1s linear 0.3s, height 1s linear 0.2s, z-index 0.1s linear, margin-top 1.5s ease, margin-left 0.9s ease;
    transition:opacity 1s linear 0.3s, height 1s linear 0.2s, z-index 0.1s linear,            margin-top 1.5s ease, margin-left 0.9s ease;  

/*Classes that Div's take once clicked*/
.prime{
width: 953px;
height: 750px;
background:rgba(255,255,255,.9);
margin-left:0px;
position: absolute;
margin-top:75px;
z-index:9001;
opacity:1;
overflow:auto;   
}

.third{
 width: 953px;
height: 200px;
opacity: 0.0 !important;
position: absolute;
margin-top:-499px;
margin-left:1810px;
z-index:1;
overflow:hidden;  
}

.secondary{
width: 953px;
height: 200px;
opacity: 0 !important;
position: absolute;
margin-top:499px;
margin-left:-1810px;
z-index:500;
overflow:hidden;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:36:10.307

我刚刚解决了一个类似的问题，方法是使用媒体查询在元素加载到小屏幕时设置溢出：隐藏元素。

所以我在我的css中有：

*   溢出：在我的 div 上可见，我的所有内容都在等待滑动
*   overflow-x:hidden 在 html 标记上以摆脱由于内容宽度而创建的侧向滚动条
*   设置溢出的媒体查询：如果屏幕很小，则隐藏在内容 div 上

我从用户的角度认为，当屏幕大于 1024 像素时，他们将受益于让内容准备好从任一侧滑到屏幕上的额外视觉影响，但是当在 1024 像素或更小的屏幕上查看 960 像素宽的网站时，这种影响将是丢失，因为内容几乎是不可见的。

```
html
{
    overflow-x:hidden;
}

@media only screen and (max-width: 1024px)
{
    overflowing_content_div { overflow:hidden; }
} 
```

可能有一个不那么老套的解决方案，而且这个解决方案在未来足以应对屏幕分辨率高于 1024 像素的移动设备，如果是这样，我想听听它，并希望它被选为主要答案

# scheme - .vimrc 中用于 Scheme 的条件选项

> ID：14085642
> 
> 赞同：4
> 
> 时间：2012-12-29T20:27:38.097
> 
> 标签：scheme, vim

我想在编辑方案/lisp 文件时在 vim 中切换颜色匹配的括号。如何有条件地在我的 .vimrc 中运行某些东西？

就像是：

```
if syntax == scheme:
  RainbowParenthesesToggle 
```

编辑：目前我手动激活它

```
:RainbowParenthesesToggle 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T20:32:19.850

使用`autocmd`基于`scheme`文件类型的：

```
autocmd FileType scheme RainbowParenthesesToggle 
```

或者根据[插件文档](http://www.vim.org/scripts/script.php?script_id=3772)，具体`RainbowParenthesesLoadRound`初始化它`()`：

```
autocmd FileType scheme RainbowParenthesesLoadRound 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T20:41:26.603

如果您想使用自动命令，您可以遵循@MichaelBerkowski 的建议。但是，如果您愿意，也可以执行以下操作：

```
if (&ft == 'scheme')
    :RainbowParenthesesToggle       " Toggle it on/off
    :RainbowParenthesesLoadRound    " (), the default when toggling
    :RainbowParenthesesLoadSquare   " []
    :RainbowParenthesesLoadBraces   " {}
    :RainbowParenthesesLoadChevrons " <>
endif 
```

`&ft`代表文件类型，因此您可以访问此变量以了解当前缓冲区的文件类型。检查`:h ft`更多信息。

当然，你也可以在这个 if 语句中使用各种自动命令，如果你想进一步改进它，或者更多 if 语句，无论你想要什么。

记住括号是可选的，我只是喜欢使用它们。:)

# entity-framework - EF 对象已处置

> ID：14085644
> 
> 赞同：0
> 
> 时间：2012-12-29T20:27:48.537
> 
> 标签：entity-framework, entity-framework-5

我有 mvc3 应用程序，我首先使用 EF 5 代码进行数据访问，我确实收到以下错误消息，但我不明白为什么。

谁能解释为什么会这样，我怎样才能再次避免这个问题？

**ObjectContext 实例已被释放，不能再用于需要连接的操作。**

我的数据访问代码是：

```
var list = new List<Task>();

using (var db = new SiteContext())
{
    var queryableAll = db.Tasks.AsQueryable();

    // setup order descending
    queryableAll = (orderByTimeDescending)
            ? queryableAll.OrderByDescending(x => x.Created)
            : queryableAll.OrderBy(x => x.Created);

    list.AddRange(queryableAll
        .Include("Customer")
        .Include("Collection").ToList());

}
return list; 
```

我的观点：

```
@foreach (var task in Model.Tasks.OrderByDescending(x => x.Created))
{
  Html.RenderPartial("_ProjectLine", task);
} 
```

我的部分 _ProjectLine

```
@model ProjectManagement.DataAccess.Models.Task
<tr>
    <td>@Model.TaskId</td>
    <td>
        @Html.ActionLink(Model.Name, "ManageTask", "Task", new { id = Model.TaskId }, null)
    </td>
    <td>
        @Model.Collection.Name
    </td>
    <td>@Model.Customer.Name</td>
</tr> 
```

更新：

渲染局部视图时出现异常。我知道如果我删除 using 并将其留给垃圾收集器处理，它可以工作。但我不喜欢这个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:24:28.233

您在页面呈现之前处理您的上下文。如果您随后执行任何需要活动上下文的操作（例如，引用延迟加载的属性，但还有许多其他示例 - 查看异常中的调用堆栈以了解为您设置它的原因），那么您将看到这个错误。

避免这种情况的常用方法是配置您的 DI 容器以围绕 HTTP 请求限定上下文生存期，然后使用构造函数注入将上下文传递给您的方法，而不是在 using 块中显式实例化/处置它。

有关示例，请参见 Mark Seeman 的*.NET 中的依赖注入一书。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:02:10.833

我同意克雷格关于问题原因的看法。确保这些问题不会发生的一个好方法是创建一个单独的、简单的 POCO 视图模型类，该类仅包含视图所需的信息。然后你可以在控制器中填充它（这也给你一个钩子来验证它是否被正确填充）然后你可以将它传递给查看。如果您的视图模型类对 EF 类没有任何依赖关系，则仍然需要 SiteContext 没有风险。

# android - 从 Eclipse 上传和安装应用程序会导致手机重启

> ID：14085646
> 
> 赞同：1
> 
> 时间：2012-12-29T20:28:19.740
> 
> 标签：android, eclipse

我正在开发多个应用程序，但是使用这个应用程序时，当我尝试通过 Eclipse 运行最后一个构建时，手机有时会重新启动。

这是重启前的 logcat，应用程序尚未安装（Eclipse 控制台显示“正在安装 MyApplication”：

```
12-29 21:04:53.375: E/PeopleApp(30398): DialerService connected !
12-29 21:04:53.445: E/ExternalAccountType(30398): Unsupported attribute readOnly
12-29 21:04:53.505: E/ExternalAccountType(30398): Unsupported attribute readOnly
12-29 21:04:53.555: E/ExternalAccountType(30398): Unsupported attribute readOnly
12-29 21:04:53.615: E/ExternalAccountType(30398): Unsupported attribute readOnly
12-29 21:04:53.666: E/ExternalAccountType(30398): Unsupported attribute readOnly
12-29 21:04:54.396: E/VoldProcessKiller(204): Process system_server (26373) has open file /mnt/asec/com.haarman.whopayswhat-2/pkg.apk in /mnt/asec/com.haarman.whopayswhat-2
12-29 21:04:54.617: E/SurfaceTexture(209): [StatusBar] dequeueBuffer: SurfaceTexture has been abandoned!
12-29 21:04:54.617: E/SurfaceTextureClient(26503): dequeueBuffer failed (No such device)
12-29 21:04:54.617: E/ViewRootImpl(26503): IllegalArgumentException locking surface
12-29 21:04:54.617: E/ViewRootImpl(26503): java.lang.IllegalArgumentException
12-29 21:04:54.617: E/ViewRootImpl(26503):  at android.view.Surface.lockCanvasNative(Native Method)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at android.view.Surface.lockCanvas(Surface.java)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at android.view.ViewRootImpl.draw(ViewRootImpl.java)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at android.os.Handler.dispatchMessage(Handler.java)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at android.os.Looper.loop(Looper.java)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at android.app.ActivityThread.main(ActivityThread.java)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at java.lang.reflect.Method.invokeNative(Native Method)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at java.lang.reflect.Method.invoke(Method.java)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
12-29 21:04:54.617: E/ViewRootImpl(26503):  at dalvik.system.NativeStart.main(Native Method)
12-29 21:04:54.987: E/installd(215): eof
12-29 21:04:54.987: E/installd(215): failed to read size
12-29 21:04:55.327: E/InputQueue-JNI(26503): channel '411ae9f8 StatusBar (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
12-29 21:04:55.327: E/InputQueue-JNI(26645): channel '41356a40 com.android.htccontacts/com.android.htccontacts.DialerTabActivity (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
12-29 21:04:55.337: E/InputQueue-JNI(26503): channel '41138d70 NavigationBar (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
12-29 21:04:55.337: E/InputQueue-JNI(26503): channel '40d93408 StatusBarExpanded (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
12-29 21:04:55.337: E/InputQueue-JNI(26956): channel '413254b0 com.teslacoilsw.launcher/com.android.launcher2.Launcher (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
12-29 21:04:55.367: E/InputQueue-JNI(26503): channel '414c3db0 TrackingView (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
12-29 21:04:55.367: E/InputQueue-JNI(26503): channel '4154af30 com.android.systemui.ImageWallpaper (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
12-29 21:04:55.367: E/InputQueue-JNI(27444): channel '413020c8 com.android.vending/com.google.android.finsky.activities.MainActivity (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
12-29 21:04:55.668: E/NetlinkEvent(204): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.668: E/NetlinkEvent(204): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.718: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.718: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.718: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.718: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.728: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.738: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.738: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.738: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.738: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.738: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.738: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.738: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.738: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.748: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.748: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.748: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.748: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.748: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.748: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.758: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.768: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.778: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.788: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.798: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.808: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.808: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:55.808: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_NAME' not found
12-29 21:04:55.808: E/NetlinkEvent(30431): NetlinkEvent::FindParam(): Parameter 'SWITCH_STATE' not found
12-29 21:04:56.639: E/alsa_ucm(30422): Unknown type: p  
12-29 21:04:56.789: E/(30422): actp_diag_init: call diag init function with 40E43215
12-29 21:04:56.789: E/(30422): actp_diag_init: diag init failed
12-29 21:04:57.430: E/PhonePolicy(30424): Could not preload class for phone policy: com.android.internal.policy.impl.PhoneWindow$ContextMenuCallback
12-29 21:05:00.002: E/HtcBootAnimation(30467): Could not find width. 
12-29 21:05:00.002: E/HtcBootAnimation(30467): Could not find height. 
12-29 21:05:00.002: E/HtcBootAnimation(30467): Could not find framerate. 
12-29 21:05:00.002: E/HtcBootAnimation(30467): Could not find part1\. 
12-29 21:05:00.002: E/HtcBootAnimation(30467): Could not find part2\. 
12-29 21:05:00.012: E/HtcBootAnimation(30467): Could not find part3\. 
12-29 21:05:00.012: E/HtcBootAnimation(30467): SQL error: unable to open database file
12-29 21:05:00.012: E/HtcBootAnimation(30467): sqlite result: 14, errno: 13, Permission denied
12-29 21:05:01.864: E/MediaPlayerService(30422): getService( activity ): returned null
12-29 21:05:01.864: E/OMXMaster(30422): A component of name 'OMX.qcom.audio.decoder.aac' already exists, ignoring this one. 
```

我的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myapp"
    android:installLocation="preferExternal"
    android:versionCode="2"
    android:versionName="20121222alpha" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <permission
        android:name="com.myapp.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.myapp.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.USE_CREDENTIALS" />
    <uses-permission android:name="android.permission.VIBRATE" />

<application
    android:name="com.myapp.utils.MyApplication"
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity android:name=".ui.MainActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <service android:name=".GCMIntentService" />

    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />

            <category android:name="com.myapp" />
        </intent-filter>
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.myapp" />
        </intent-filter>
    </receiver>
</application> 
```

如前所述，我在使用任何其他应用程序时都没有遇到过这种情况。我不知道在哪里寻找解决方案。

***编辑***
这是来自的日志`adb shell cat /proc/kmsg`：

```
<6>[39753.677547] [K][PM] CPU1: msm_pm_power_collapse: change clock rate (old ra
te = 0)
<6>[39754.592334] mdp4_overlay_pipe_free: pipe=c0c760a8 ndx=3 stage 2 mixer 0
<6>[39754.592487] mdp4_overlay_pipe_free: pipe=c0c762b8 ndx=4 stage 3 mixer 0
<6>[39754.592609] mdp4_overlay_pipe_free: pipe=c0c75e98 ndx=2 stage 4 mixer 0
<4>[39754.593525] mdp4_overlay_update_layers: unstaging pipe ndx=3
<4>[39754.593525] mdp4_overlay_update_layers: unstaging pipe ndx=4
<4>[39754.593555] mdp4_overlay_update_layers: unstaging pipe ndx=2
<4>[39754.593555] mdp4_overlay_update_layers: mask=0000F0FF new layermixer_cfg=0
0000100
<6>[39754.608083] mdp4_overlay_req2pipe: pipe=c0c760a8 ndx=3 num=2 zorder=2 mixe
r 0 format = b
<6>[39754.627250] mdp4_overlay_req2pipe: pipe=c0c762b8 ndx=4 num=3 zorder=3 mixe
r 0 format = 9
<6>[39754.631187] mdp4_overlay_req2pipe: pipe=c0c75e98 ndx=2 num=1 zorder=4 mixe
r 0 format = 9
<6>[39755.921130] [SMD] smsm_change_state b29
<6>[39755.925556] [SMD] smsm_change_state 929
<6>[39755.970237] [SMD] smsm_change_state f29
<6>[39755.970390] [SMD] smsm_change_state d29
<6>[39756.043761] [SMD] smsm_change_state b29
<6>[39756.043914] [SMD] smsm_change_state f29
<6>[39756.044097] [SMD] smsm_change_state d29
<6>[39756.510387] call alarm, type 2, func alarm_triggered+0x0/0xa0, 84242213000
000 (s 84242213000000)
<6>[39757.486184] [LED]Setting amber off_timer to 0 min 0 sec +
<6>[39757.486368] [LED]pm8xxx_led_gpio_set, bank:0, brightness:0
<6>[39757.486642] [LED]pm8xxx_led_blink_store: bank 0 blink 0
<6>[39757.486856] [LED]Setting green off_timer to 0 min 0 sec +
<6>[39758.496867] [SMD] smsm_change_state b29
<>378479][M]ss_hnesae99<>378479][M]ss_hnesae99_e iecc6a d= tg  ie
6[95.028 d4oelypp_re iecc6b d= tg  ie
6[95.030 d4oelypp_re iecc59 d= tg  ie
4[95.064 d4oelyudt_aes ntgn ienx3<>378720]mp_vra_paelyr:usaigpp d=
4[95.065 d4oelyudt_aes ntgn ienx2<>378723]mp_vra_paelyr:ms=000Fnwlyrie_f=0010<6>
[39758.968223] [K][PM] CPU1: msm_pm_power_collapse: change clock rate (old rate
= 0)
<6>[39759.053253] alarm_release: clear alarm, pending 0
<6>[39759.054687] alarm_release: clear alarm, pending 0
<6>[39759.054962] alarm_release: clear alarm, pending 0
<6>[39759.055237] alarm_release: clear alarm, pending 0
<6>[39759.385833] [LS][cm3629] lightsensor_release
<6>[39759.408052] [SMD] smsm_change_state f29
<6>[39759.410372] [SMD] smsm_change_state d29
<6>[39759.498515] request_suspend_state: wakeup (0->0) at 39756372649691 (2012-1
2-29 21:03:46.151247964 UTC)
<3>[39759.522107] init: untracked pid 29490 exited
<3>[39759.544265] init: untracked pid 31171 exited
<3>[39759.547439] init: untracked pid 31211 exited
<3>[39759.607320] init: untracked pid 29489 exited
<3>[39759.607778] init: untracked pid 29884 exited
<3>[39759.619131] init: untracked pid 32538 exited
<3>[39759.649285] init: untracked pid 29739 exited
<3>[39759.651757] init: untracked pid 29752 exited
<6>[39759.695096] genlock: genlock_release_lock: Releasing a handle that still h
olds lock (2)
<3>[39759.696256] init: untracked pid 29642 exited
<6>[39759.704100] genlock: genlock_release_lock: Releasing a handle that still h
olds lock (2)
<3>[39759.705015] init: untracked pid 30198 exited
actd e!<>370730][U]hcaosi:oe
6[96.013 AD t-cutc upr opnns x
6[96.014 AD t-cutc ees
<3>[39760.868452] init: untracked pid 467 exited
<3>[39760.869185] init: untracked pid 29840 exited
<3>[39760.869886] init: untracked pid 30039 exited
<3>[39760.870527] init: untracked pid 29791 exited
<3>[39760.871321] init: untracked pid 30506 exited
<6>[39760.871474] [SMD] smsm_change_state b29
<3>[39760.872114] init: untracked pid 30667 exited
<3>[39760.872816] init: untracked pid 30826 exited
<3>[39760.873366] init: untracked pid 30855 exited
<3>[39760.873885] init: untracked pid 30905 exited
<3>[39760.874495] init: untracked pid 31157 exited
<6>[39760.875960] [SMD] smsm_change_state 929
<3>[39760.887344] init: untracked pid 32716 exited
<3>[39760.887802] init: untracked pid 32739 exited
<3>[39760.888290] init: untracked pid 302 exited
<3>[39760.888748] init: untracked pid 324 exited
<3>[39760.889206] init: untracked pid 380 exited
<3>[39760.889725] init: untracked pid 393 exited
<3>[39760.890213] init: untracked pid 424 exited
<3>[39760.890671] init: untracked pid 453 exited
<3>[39760.892044] init: untracked pid 481 exited
<3>[39760.893631] init: untracked pid 407 exited
<6>[39760.961051] [SMD] smsm_change_state f29
<6>[39760.961234] [SMD] smsm_change_state b29
<6>[39760.961417] [SMD] smsm_change_state 929
<6>[39760.961966] [SMD] smsm_change_state f29
<6>[39760.962089] [SMD] smsm_change_state d29
<6>[39760.962241] [SMD] smsm_change_state b29
<6>[39760.962516] [SMD] smsm_change_state f29
<6>[39760.962668] [SMD] smsm_change_state d29
<6>[39761.268666] [K][PM] CPU1: msm_pm_power_collapse: change clock rate (old ra
te = 0)
<6>[39762.186047] [SMD] smsm_change_state b29
<6>[39762.186200] [SMD] smsm_change_state 929
<6>[39763.666071] [LS][cm3629] lightsensor_open
<6>[39763.666132] [LS][cm3629] lightsensor_ioctl LIGHTSENSOR_IOCTL_GET_ENABLED,
enabled 1
<6>[39763.746096] [PS][cm3629] psensor_open
<6>[39763.746248] [PS][cm3629] psensor_ioctl cmd 1
<6>[39763.882827] mdp4_overlay_req2pipe: pipe=c0c760a8 ndx=3 num=2 zorder=2 mixe
r 0 format = b
<6>[39763.886123] [COMP] Compass enable
<6>[39763.886306] [GYRO][PANASONIC] Open device node:ewtzmu2hal times.
<6>[39763.886398] [GYRO][PANASONIC] Release ewtzmu2hal, remainder is  times.
<6>[39763.886520] [COMP][AKM8975] [COMP] Compass disable
<6>[39764.006068] [GYRO][PANASONIC] Open device node:ewtzmu2hal times.
<6>[39764.006221] [GYRO][PANASONIC] Release ewtzmu2hal, remainder is  times.
<6>[39764.006557] [PS][cm3629] psensor_ioctl cmd 2
<6>[39764.006679] [PS][cm3629] psensor_disable
<6>[39764.006740] [PS][cm3629] psensor_disable: already disabled
<6>[39764.006801] [PS][cm3629] psensor_release
<6>[39764.006923] [PS][cm3629] psensor_disable
<6>[39764.007015] [PS][cm3629] psensor_disable: already disabled
<6>[39764.007137] [LS][cm3629] lightsensor_ioctl LIGHTSENSOR_IOCTL_ENABLE, value
 = 0
<6>[39764.007198] [LS][cm3629] lightsensor_disable
<6>[39764.010067] [LS][cm3629] lightsensor_release
<6>[39765.915850] [AUD] snd_soc_qdsp6: msm_pcm_routing_process_audio: reg 2 val
0 set 1
<6>[39765.916583] [AUD] board_ville_audio: ville_get_q6_effect_mode: mode 0
<6>[39765.938374] [AUD] board_ville_audio: ville_get_q6_effect_mode: mode 0
<6>[39765.938801] [AUD] q6asm: q6asm_open_write: change to HTC_POPP_TOPOLOGY
<6>[39765.966361] [AUD] board_ville_audio: ville_get_q6_effect_mode: mode 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:53:42.073

好像是手机固件有问题。如果您想使用手机不支持的功能（例如播放不支持的媒体、使用不支持的 OpenGL 命令等），则可能会发生这种情况。logcat 显示的错误消息清楚地表明有东西破坏了 Surface，所以这是某种绘图错误。

如果您的手机已植根，您可能希望通过键入以下内容查看连续内核日志：

```
adb shell su -c "cat /proc/kmsg" 
```

或者，如果仅通过以下方式启用 root adb 访问：

```
adb root
adb shell cat /proc/kmsg 
```

如果您的手机没有植根，您仍然可以尝试使用`dmesg`：

```
adb shell dmesg 
```

但它不会连续打印内核日志，因此您可能会错过一些直接导致手机重启的重要行，因此您可能需要root手机以获取这几行丢失的行。

# c++ - 如何在 QSlider 的侧面添加图像

> ID：14085655
> 
> 赞同：1
> 
> 时间：2012-12-29T20:29:24.087
> 
> 标签：c++, qt, qtstylesheets, qslider

我使用它的样式表重新设计并实现了一个 QSlider。

我找不到如何在滑块本身之前和之后（左或右，顶部或底部）放置图像。

前任：

滑块：

```
----00--------------- 
```

左图：

```
qqqqq 
```

图片右：

```
ddddd 
```

结果：

```
qqqqq----00---------------ddddd 
```

我目前正在使用 QHBoxLayout 并使用 QLabels 插入这些图像，但它似乎不是正确或最好的方法。

我怎样才能正确添加这些图像？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T01:53:31.773

滑块的三个“主体部分”是`groove`、`add-page`和`sub-page`。所有这些实际上都在 的范围内`QSlider`，因此样式可以为您提供类似于[此博客文章中](http://thesmithfam.org/blog/2010/03/10/fancy-qslider-stylesheet/)的效果。使用样式表会给你以下效果：

```
qqqq00ddddddddddddddd 
```

代替

```
qqqqq----00---------------ddddd 
```

你可以通过简单地坚持你的`QHBoxLayout`策略来实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:51:58.620

您实际上可以仅使用样式表和子控件`border-image`上的属性来实现`groove`。

例如，像这样的边框图像：

![滑块装饰图像](../Images/40d907d9bcaa282b73a74fae5a1f53d6.png)

为了更好地查看去哪里，B 为 10 像素宽，空间为 2，A 为 12 像素宽。

```
QSlider::groove {      
   border-image: url(:/slider-decoration.png) 0 12 0 10;
   border-left: 10px solid transparent;
   border-right: 12px solid transparent;
}
QSlider::handle {
    width: 8px;
    background-color: green;
} 
```

这给了你你所期望的：

![结果滑块](../Images/fa591e60537ce9c22ab477b4ed39d035.png)

不过，这个解决方案有一个小问题。鼠标忽略边框的存在，手柄位置和鼠标位置之间的两端附近有一个偏移量。因此，为避免这种情况，手柄必须一直移动到任一侧，但我们为其添加了一个透明边框，使其看起来就像在图像边框之前停止：

```
QSlider::groove {      
   border-image: url(:/slider-decoration.png) 0 12 0 10;
   border-left: 10px;
   border-right: 12px;
}
QSlider::handle {
    width: 8px;
    /* add borders to the handle that will sit above the groove border */
    border-right: 10px solid transparent;
    border-left: 12px solid transparent;       

    /* negative margins to allow the handle borders 
       to go past the groove borders */
    margin-right: -10px;    
    margin-left: -12px;
    background-color: green;
    /* make the background color fill the content, not the border */
    background-clip: content;
} 
```

# knockout.js - KnockoutJS 获取属性值

> ID：14085656
> 
> 赞同：1
> 
> 时间：2012-12-29T20:29:33.877
> 
> 标签：knockout.js

我有一个非常简单的问题，但不明白我错过了什么。这是代码：

```
$(document).ready(function() {
var viewModel = {
    test: ko.observable(null)
}
var obj = {
    name: "name123"
}
viewModel.test(obj);    
ko.applyBindings(viewModel.test, document.getElementById("a"));
alert(viewModel.test.name());
});​ 
```

链接到 jsfiddle： http: [//jsfiddle.net/bwkAB/](http://jsfiddle.net/bwkAB/) 为什么我无法获取 name 属性值？

更新：应该是 viewModel.test().name

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:32:59.533

这是更正的[jsfiddle](http://jsfiddle.net/bwkAB/2/)，您需要使子对象属性可观察才能绑定到它。以及添加 with 绑定以帮助 HTML 中的范围

```
$(document).ready(function() {
    var viewModel = {
        test: ko.observable(null)
    }
    var obj = {
        name: ko.observable("name123")
    }
    viewModel.test(obj);    
    ko.applyBindings(viewModel);
    alert(viewModel.test().name());
});​ 
```

# c# - ManualResetEvent - 这里怎么可能出现竞争条件？

> ID：14085658
> 
> 赞同：0
> 
> 时间：2012-12-29T20:29:57.027
> 
> 标签：c#, concurrency, thread-safety, race-condition, manualresetevent

我正在尝试确定是否可以使用`ManualResetEvent`此处来确保在并发环境中，`myMethod()`永远**不会**同时调用内部操作。

```
 static volatile bool _syncInitialized = false;  

    static ManualResetEvent _syncEvent = new ManualResetEvent(false);

    static object _syncLock = new object();

    void myMethod()
    {
        lock (_syncLock)       
        {
            if (!_syncInitialized)          // sync hasn't started, so 
            {
                _syncInitialized = true;    
                _syncEvent.Set();           // signal for the first time only 
            }
        }

        if (_syncEvent.WaitOne())           // wait for signal
        {
            _syncEvent.Close(); 
            _syncEvent = new ManualResetEvent(false); // reset to false 

            // actions that should be forced to run sequentially
        }
    } 
```

**编辑**- 注意我使用 ManualResetEvent 而不是 lock() 因为我希望能够添加超时，可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:58:33.370

您至少有一次比赛条件的机会。考虑：

线程 #1 执行`_syncEvent.WaitOne()`并成功，然后在执行`_syncEvent.Close()`. 线程 #2 出现并执行`WaitOne()`, 并且也成功了。

另一个问题是您在调用`Close()`之后构建了一个新实例，显然是一种重置方式。想象一下，然后，您调用`Close()`，线程被换出，下一个线程出现并尝试执行`WaitOne()`，并由于对象已关闭而引发异常。

如果要重置事件，请调用`Reset()`。

您可能无法使用`ManualResetEvent`. 正如其他人所说，`ManualResetEvent`用于信令，而不是互斥。

您说您将来要实现超时。如果您只想让线程在锁上等待一段时间，然后在无法获得锁时退出，请使用接受超时值的[Monitor.TryEnter重载之一。](http://msdn.microsoft.com/en-us/library/system.threading.monitor.tryenter.aspx)例如：

```
private object _syncObject = new Object();
void MyMethod()
{
    if (!Monitor.TryEnter(_syncObject, TimeSpan.FromSeconds(5)))
    {
        return; // couldn't get the lock
    }
    try
    {
        // got the lock. Do stuff here
    }
    finally
    {
        Monitor.Exit(); // release the lock
    }
} 
```

关于您是否真的要释放`finally`. 如果代码抛出异常，那么您保护的资源可能（很可能？）现在处于不完整或损坏状态。在这种情况下，您可能不想让其他线程对其进行操作。是否在遇到异常时释放锁是您必须做出的设计决定，与您的应用程序的要求一致。

# cakephp - 使用带有条件的分页并使用 CakePHP 包含

> ID：14085663
> 
> 赞同：1
> 
> 时间：2012-12-29T20:30:32.477
> 
> 标签：cakephp, pagination, conditional-statements, contain

所以，我想对我的一个请求进行分页。“正常方式”似乎效果不佳，所以，我做了一些研究，所有的答案都告诉你要做这样的事情：

```
$this->paginate("Like",
    array("Like.user_id" => $id),
    array(
        "order" => "Like.created desc",
        "contain" => array(
            "User",
            "Post",
            "Post.User",
            "Post.Like"
        )
    )
); 
```

问题是……它不起作用。A`debug`给了我类似的东西：

```
array(
    (int) 0 => array(
        'Like' => array(
            'id' => '38',
            'created' => '2012-10-03 21:21:27',
            'post_id' => '29',
            'user_id' => '19'
        ),
        'Post' => array(
            'id' => '29',
            'title' => 'Don't Panic',
            'description' => 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam elementum sem ac sem imperdiet cursus. Quisque venenatis pulvinar ornare. Donec rutrum, lacus vel imperdiet sagittis, metus risus interdum ante, iaculis venenatis arcu nibh et odio.',
            'image' => '29-c49cb96c.jpg',
            'model' => '',
            'created' => '2012-09-07 01:46:49',
            'user_id' => '19',
            'project_id' => '1',
            'like_count' => '1'
        ),
        'User' => array(
            'password' => '*****',
            'id' => '19',
            'username' => 'Axiol'
        )
    )
) 
```

没有痕迹`Post.User`和`Post.Like`...

任何想法 ？

编辑：

以下是模型关联：

邮政

```
public $belongsTo = array("User", "Project");
public $hasMany = array("Comment", "Like"); 
```

喜欢

```
public $belongsTo = array("User", "Post" => array("counterCache" => true)); 
```

用户

```
public $hasMany = array("Post", "Comment"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T03:19:04.850

首先，您确实应该`contain`按照 Oldskool 的回答更正您的数组。

这应该很明显，因为 cake 是这样的：

```
Warning (512): Model "Post.Like" is not associated with model "Like" 
[CORE\Cake\Model\Behavior\ContainableBehavior.php, line 342] 
```

由于您的实际问题，您可能没有看到这一点。

您没有提及您是否以任何方式加载`Containable`行为。我假设你不是，你有它。该`contain`数组被完全忽略。

[这](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)是该`Containable`行为的文档。我的建议是您将其添加到您的`AppModel::actsAs`属性中，如下所示：

```
class AppModel extends Model {
    public $actsAs = array('Containable');
} 
```

通过这种方式，它会自动适用于您的所有模型，并且您也应该停止使用`recursive`madness。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T00:21:47.043

正如 Dave 已经提到的，您的型号名称已关闭。您不应使用该表示法，而应将它们作为“嵌套”模型包含在您正在加载的模型之下。像这样：

```
"contain" => array(
    "User",
    "Post" => array(
        "User", // Get post related user data
        "Like" // Get post related like data
    )
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T22:38:37.257

删除`Post.User`and `Post.Like`- 那些不是模型，不应该在`contain`数组中列出。

如果它们是模型名称 - 即，您已经`$name`在模型中指定了它们（即使它违反了命名约定），那么请发布您的模型及其关联，我们可以进一步了解。

# core-data - 使用 Magical Record 导入数据时避免重复条目

> ID：14085666
> 
> 赞同：7
> 
> 时间：2012-12-29T20:30:55.543
> 
> 标签：core-data, magicalrecord

我正在使用 Magical Record 来促进 Core Data 操作。想象一下，我们有一组这样的 json，并且定义了一个完全相同的 Core Data 模型：

```
{
    "cars": [
        {
            "name": "Corolla",
            "brand": {
                "name": "Toyota"
            },
            "price": 20000
        },
        {
            "name": "Pirus",
            "brand": {
                "name": "Toyota"
            },
            "price": 50000
        },
        {
            "name": "RAV-4",
            "brand": {
                "name": "Toyota"
            },
            "price": 30000
        },
        {
            "name": "Golf",
            "brand": {
                "name": "VW"
            },
            "price": 40000
        },
        {
            "name": "Polo",
            "brand": {
                "name": "VW"
            },
            "price": 20000
        }
    ]
} 
```

现在，如果我们使用 Magical Record 辅助方法：

```
- (BOOL) MR_importValuesForKeysWithObject:(id)objectData; 
```

或者

```
+ (id) MR_importFromObject:(id)data; 
```

它将作为 Car 的 5 个条目和 Brand 的 5 个条目导入。

但是，在我们的核心数据模型中，Car-Brand 关系是多对多的，并且 Brand 的 name 属性应该是唯一的，所以我期待 Car 的 5 个条目和 Brand 的 2 个条目（Toyota 和 VW） .

我的问题是如何在使用 Core Data 导入时保持数据的唯一性。这是我可以在核心数据模型中定义的东西，比如唯一属性吗？还是我需要覆盖 Magical Record 的导入方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-04T18:41:41.910

您需要告诉 MagicalRecord 什么是唯一标识符。在您的情况下，您没有唯一 ID，但您可能可以使用该`name`属性。

假设您有一个`Car`与 NSManagedObject 有关系的`Brand`NSManagedObject，您必须在用户信息字典中设置`relatedByAttribute`与`name`的关系。`Brand`

完成后，此 MagicalRecord 将查找具有该属性的任何记录，`name`如果已存在则使用适当的记录，或者在需要时创建一个。

这意味着您不必使用类别类覆盖重要。

如果您需要更多信息，请告诉我。

# c# - 从数据库设计时填充用户控件属性

> ID：14085670
> 
> 赞同：1
> 
> 时间：2012-12-29T20:31:22.697
> 
> 标签：c#, entity-framework, sqlite, properties, user-controls

我正在使用 Windows 窗体和 SQLite 数据库在 C# 中开发应用程序。

我正在创建的控件需要从数据库中检索数据，以便它可以填充自定义属性上的可选选项。但是，当我尝试在代码中执行此操作时：

```
 public AddCategoryControl()
    {
        InitializeComponent();

        if (System.Diagnostics.Process.GetCurrentProcess().ProcessName == "devenv")
        {
            using (ResourceTypeRepository repo = new ResourceTypeRepository())
            {
                _resourceTypeList = repo.GetAllResourceTypes();
                if (!Object.ReferenceEquals(ResourceTypeList[0], null))
                {
                    ResourceType = ResourceTypeList[0];
                }
            }
        }
    } 
```

然后我进入 Visual Studio 中的设计模式，我收到此错误：“在应用程序配置文件中找不到名为 'WinterContext' 的连接字符串。

这对我来说没有意义，因为当我实际运行应用程序时，它可以很好地找到数据库信息。不过作为参考，这是我的 App.Config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <connectionStrings>
    <add name="WinterContext" connectionString="metadata=res://*/Data.Database.WinterEngineModel.csdl|res://*/Data.Database.WinterEngineModel.ssdl|res://*/Data.Database.WinterEngineModel.msl;provider=System.Data.SQLite;provider connection string='data source=&quot;C:\Users\Tyler\Documents\Visual Studio 2010\Projects\WinterEngine\WinterEngineToolset\Data\WinterEngineDatabase.s3db&quot;'" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

我不知道该怎么做，我的搜索什么也没找到。希望你们中的一个可以提供帮助。

提前致谢！

# css - 背景颜色位置

> ID：14085672
> 
> 赞同：2
> 
> 时间：2012-12-29T20:31:39.533
> 
> 标签：css, background

我设置的背景颜色未应用于整个内容区域（内容包装器）。它仅适用于大约一半的页面。[提琴手](http://jsfiddle.net/247t1aW3b/VNtJw/6/)

（内容的位置在JsFiddle之外居中）

```
<!DOCTYPE html>
<html lang="en-US">    
<head>
    <link rel="stylesheet" href="sidenav3.css" type="text/css"/>
    <title>web page</title>
</head>

<body>

<div id="page-wrapper">
    <div id="header"></div>
      <div id="content-wrapper">
        <div id="content">

         <h1>Title</h1>           

<p>
Ham hock turkey flank corned beef beef brisket, chicken tri-tip sirloin ham sausage bresaola drumstick short loin speck. Kielbasa speck chicken flank bresaola, meatloaf frankfurter. Andouille pork chop spare ribs fatback pork loin. Strip steak meatball ribeye, turducken boudin shoulder fatback tongue cow meatloaf ground round short loin. Tri-tip prosciutto chuck capicola jerky. Pastrami chuck turkey, brisket pork belly hamburger corned beef speck.
</p>&nbsp

<p>
T-bone frankfurter meatloaf, ham jerky pork boudin tail short loin. Filet mignon salami sirloin, leberkas sausage short loin pork. Prosciutto biltong kielbasa turkey ribeye brisket. Bacon swine shank, frankfurter boudin short ribs drumstick tongue tail fatback.
</p>&nbsp

<p>Turkey t-bone beef, tenderloin pig drumstick biltong ham turducken. Turducken kielbasa spare ribs t-bone tri-tip. Strip steak speck flank tenderloin. Prosciutto spare ribs flank, turkey rump beef ribs cow biltong tenderloin ham hamburger leberkas pastrami. Leberkas turkey flank capicola short loin kielbasa. Sausage meatloaf shankle venison flank ribeye tail strip steak. Turducken salami rump cow corned beef.
</p>&nbsp

<p>T-bone frankfurter meatloaf, ham jerky pork boudin tail short loin. Filet mignon salami sirloin, leberkas sausage short loin pork. Prosciutto biltong kielbasa turkey ribeye brisket. Bacon swine shank, frankfurter boudin short ribs drumstick tongue tail fatback.
</p>&nbsp

<p>T-bone frankfurter meatloaf, ham jerky pork boudin tail short loin. Filet mignon salami sirloin, leberkas sausage short loin pork. Prosciutto biltong kielbasa turkey ribeye brisket. Bacon swine shank, frankfurter boudin short ribs drumstick tongue tail fatback.
</p>&nbsp            

</div><!-- END content-->

<div id="menu-wrap">
    <div id="menu">
          <ul>
             <li><a href="#">index</a>
                   <ul>
                       <li><a href="#">Item one</a></li>
                       <li><a href="#">Item two</a></li>
                       <li><a href="#">Item three</a></li>
                       <li><a href="#">Item four</a></li>
                       <li><a href="#">Item five</a></li>  
                       <li><a href="#">Item six</a></li>              
                       <li><a href="#">Item seven</a></li>         
                   </ul>
              </li>
          </ul>
     </div><!-- END menu-->
</div> <!-- END menu-wrap-->        

    </div><!-- END content-wrapper-->     
    <div id="footer"></div>
</div><!-- END page-wrapper-->
</body>
</html> 
```

CSS

```
span.anchor {
    display: block;
    height: 50px;
    margin-top: -50px;
    visibility: hidden;
}

ul {padding: 0; margin: 0;}
body {padding:0; margin:0;}

h1 {
 font-size:34px;
 text-align: center;    
}

#header {
  height: 35px;
  width: 100%;
  background-color: #336699;
  position: fixed;
  top: 0px;
  z-index: 10;
}

#content-wrapper {
  position: absolute;
  top: 0px;
  bottom: 0px;
  left: 0px;
  right: 0px;
  background: #f6f6f6;  
}

#content {
  width: 90%;
  height: 100%;
  float: right;
  margin-top: 70px;
  margin-bottom: 50px;
  padding-right: 75px;
  line-height: 2.5em;
  font-size: 13pt;   
}

#menu ul li {
 list-style-type: none;  
}  

 #menu ul ul {
   display:none;
   position: fixed;
}

 #menu ul ul a {
}

 #menu ul a {
  text-decoration: none;
  color: black;
}

#menu ul li:hover ul {
  display:block;
  left: 0;  
  line-height: 20px;
  width: 220px;
  height: 750px;
  background: #CCC;
  border-top-right-radius:1em;
  border-bottom-right-radius:1em;
  padding-left: 22px;
  text-align: left;
  line-height: 35px;
  padding-top:20px;
  font-size: 14px;
  border:1px solid grey;
  box-shadow: 3px 3px 4px #888888;
}

 #menu-wrap {
   position:fixed;
   top: 80px;
   width: 55px;
   height: 22px;
   border-top-right-radius: 6px;
   border-bottom-right-radius:6px;
   background: grey;
   text-align: center;
   padding-top: 3px;
   z-index: 0;
   box-shadow: 2px 2px 3px #888888;  
}

#footer {
  height: 10px;
  width: 100%;
  background-color: green;
  position: fixed;
  bottom: 0px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:40:13.523

原因是`top:0px; bottom:0px`基本上强制元素高度为其容器的 100%，结果也是视口的 100%。

删除`bottom:0px`让我们`content-wrapper`根据需要扩展，连同它的背景：

[http://jsfiddle.net/VNtJw/15/](http://jsfiddle.net/VNtJw/15/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:40:06.787

删除位置：绝对；

似乎可以在您的 jsfiddle 示例中修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T23:49:34.553

我无法访问您的网站，但如果我没看错的话，如果您使用 CSS 正文组中的 background-color 元素，这样背景也会缩放并出现，这也可能会有所帮助。

```
body{
      background-color: #f6f6f6;
    } 
```

我希望这有帮助！

# smalltalk - Smalltalk 字符串中的转义 HTML 标签

> ID：14085675
> 
> 赞同：2
> 
> 时间：2012-12-29T20:31:57.333
> 
> 标签：smalltalk, html-encode

我拼命尝试在 Smalltalk 中编写一个非常基本的方法来转义 HTML 标记（'<' 和 '>'）。

到目前为止，这就是我想出的：

```
escapeHtml: str
    |tags newString tmpString|
    newString := String new.
    tags := Dictionary new.
    tags at: '<' put: '&lt;'.
    tags at: '>' put: '&gt;'.
    tags keysAndValuesDo:
    [ :k :v |
        tmpString := str copyReplaceAll: k with: v.
        newString := tmpString
    ].
    ^newString
! 
```

不幸的是，它似乎只替换了`tags`字典的最后一项。我究竟做错了什么？我可能还应该指出，我对 Smalltalk 的经验很少。

选择的解释器是“syx”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T21:41:34.137

我想你想做类似的东西

```
newString := str 
```

然后在`keysAndValuesDo:`块中：

```
tmpString := newString copyReplaceAll: k with: v. 
```

因为现在您正在`tmpString`为每个键/值对生成一个，只替换一个键。比您将其分配给`newString`. 为了实现您的目标，您应该发送`copyReplaceAll:`到在先前迭代中处理的字符串。这可以通过向 a 发送消息来完成`newString`，但是要使第一次迭代起作用，您应该为其分配一个值 an `str`。

**PS** 我也认为这个更清洁的版本应该可以工作：

```
escapeHtml: str
    |tags newString|
    newString := str copy.
    ...
    tags keysAndValuesDo: [ :k :v | newString replaceAll: k with: v ].
    ^newString 
```

# android - 安卓应用和谷歌地图：

> ID：14085679
> 
> 赞同：1
> 
> 时间：2012-12-29T20:32:37.063
> 
> 标签：android, google-maps

我上了这门课

```
public class GoogleMapActivity extends MapActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);
    }
} 
```

我在编辑器中收到错误 - **“MapActivity 无法解析为类型”**。

本[教程](https://developers.google.com/maps/documentation/android/v1/hello-mapview)说我必须扩展这个特定的类。

我提到我在清单中指定我需要像这样的谷歌地图库

```
 <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <uses-library android:name="com.google.android.maps"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:50:20.217

确保您已通过选择**Google API SDK**创建了您的项目。如果没有，请参阅本教程了解我们如何创建 Android 谷歌地图应用程序：

[http://www.androidhive.info/2012/01/android-working-with-google-maps/](http://www.androidhive.info/2012/01/android-working-with-google-maps/)

# python - py2exe 没有给出属性 '__getitem__' 但脚本很好

> ID：14085680
> 
> 赞同：0
> 
> 时间：2012-12-29T20:32:39.093
> 
> 标签：python, py2exe

这是我使用 py2exe 将 python 脚本转换为 exe 时的回溯

```
Traceback (most recent call last):
  File "scarpV4.py", line 10, in <module>
  File "ntpath.pyc", line 205, in dirname
  File "ntpath.pyc", line 170, in split
  File "ntpath.pyc", line 125, in splitdrive
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

在我的 scrapV4.py 文件第 10 行是

```
currentPath = os.path.dirname(inspect.getsourcefile( lambda:None )) 
```

这是我的完整代码[http://pastebin.com/RXDCb63r](http://pastebin.com/RXDCb63r)

请帮我解决这个问题。

PS：脚本本身工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:44:49.043

如果您使用*zipfile*选项

```
setup(options = {"py2exe":
                    {"compressed": CompressLevel,
                     "optimize": OptimizeLevel, 
                     "bundle_files": BundleFiles}},
      zipfile = None,
      console = [ProgramName]) 
```

检查此选项的值。如果您不想使用 zipfile 选项，它必须是**None**，否则它必须是**library.zip**的名称以及您在程序中使用的依赖库。

就我而言，此选项中的错误会导致与您相同的错误。

# java - 如何将自述文件添加到从 netbeans 创建的 jar

> ID：14085688
> 
> 赞同：0
> 
> 时间：2012-12-29T20:34:14.547
> 
> 标签：java, jar, netbeans-7

我可以通过 netbeans 创建一个 jar 文件然后运行它。有谁知道如何在 jar 中包含自述文件，以便提取 jar 的任何人都可以看到自述文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T20:44:06.653

只需使用您选择的 zip 工具来添加额外的文件。

# android - Android ListView 项目大小问题

> ID：14085692
> 
> 赞同：0
> 
> 时间：2012-12-29T20:34:55.483
> 
> 标签：android, android-layout, android-listview, android-keypad

这是我的问题，我有 2 个活动，一个包含 Listview 和一个添加按钮，该按钮调用另一个包含 listview 和搜索面板的活动，当用户搜索产品并按下它时，产品会被发送回主要活动（具有列表视图和按钮的活动）和产品被添加到列表视图中。

这就是我要解决的问题：

1）在用户找到他想要的产品并单击它后，当 MAIN 活动重新加载时，它会在键盘打开的情况下重新加载，我无法让它不打开。

2）每个列表视图项目都很大！它几乎占据了整个屏幕，每个列表视图项目之间的空间很大。

这是relavnet代码：

主要活动：

```
public class Main extends Activity
{
    public ListView lstView;
    ProductAdapter productListAdapter;
    DBAdaptor mDb;
    ArrayList<Product> products;
    EditText et;
    @SuppressWarnings("unchecked")
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_screen);
        InputMethodManager imm = (InputMethodManager) getSystemService(Activity.INPUT_METHOD_SERVICE);
        imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0);
        openDB();
        Bundle b = this.getIntent().getExtras();
        if(b!=null) 
        {
            products =(ArrayList<Product>) b.getSerializable("products");
            productListAdapter = new ProductAdapter(this, R.layout.shoping_list_row,ArrayListToArray(products));
            lstView = (ListView)findViewById(R.id.main_list);
            lstView.setAdapter(productListAdapter);

        }
    }

    private Product[] ArrayListToArray(ArrayList<Product> products)
    {
        Product[] prods = new Product[products.size()];
        for (int i = 0; i < prods.length; i++)
        {
            prods[i]=products.get(i);
        }
        return prods;
    }

    public void startSearchActivity(View v)
    {
        Intent i = new Intent(this,SearchActivity.class);
        if(products!=null)
        {
            Bundle b = new Bundle();
            b.putSerializable("products", products);
            i.putExtras(b);
        }

        startActivity(i);
    }

    private void openDB()
    {
        mDb = new DBAdaptor(this);  
        mDb.open();

    }
} 
```

这是 Main Activity 的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"

    android:orientation="vertical" >

    <ListView
        android:id="@+id/main_list"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"

         >

    </ListView>

    <Button
        android:id="@+id/button1"
        style="@style/AppTheme"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:onClick="startSearchActivity"
        android:text="+"
        android:textColor="#009900"
        android:textSize="50sp" />

</LinearLayout> 
```

继承人的搜索活动：

```
public class SearchActivity extends Activity implements Serializable {

    /*
     *Class Properties 
     */

    private ListView searchListView;
    ArrayAdapter<String> shopingListAdapter;
    EditText inputSearch;
    DBAdaptor mDb;
    ArrayList<Product> products;

    /*
     *Initialize All Views And Data For ListView
     */
    @SuppressWarnings("unchecked")
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search_screean_layout);
        searchListView = (ListView) findViewById(R.id.list_view);
        inputSearch = (EditText) findViewById(R.id.inputSearch);
        InputMethodManager imm = (InputMethodManager)getSystemService(
                  Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(inputSearch.getWindowToken(), 0);
        Bundle b = this.getIntent().getExtras();
        if(b!=null) products =(ArrayList<Product>) b.getSerializable("products");
        openDB();
        fillListView();
        setOnTextChangedListener();
        setOnItemClickListener();
        setOnEditorActionListener();

    }

    /*
     *Fills the ListView with data from the Database
     * 
     */
    private void fillListView() 
    {
        String[] products = getAllProducts();
        shopingListAdapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name, products);
        searchListView.setAdapter(shopingListAdapter);  

    }

    private void setOnItemClickListener()
    {
        searchListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) 
            {
                if(products==null) products = new ArrayList<Product>();
                String selectedProduct = (String)searchListView.getItemAtPosition(arg2);
                products.add(new Product(DBAdaptor.getProductByName(selectedProduct).getImg(),selectedProduct, 0));
                Bundle b = new Bundle();
                b.putSerializable("products", products);
                Intent i = new Intent(getBaseContext(),Main.class);
                i.putExtras(b);
                startActivity(i);

                //START INTENT TO MAIN SCREEN

            }
        });
    }

    /*
     *Sets the event listener
     * for the ListView Search Bar
     * Each time a letter will be entered the filter kick in;
     */

    private void setOnTextChangedListener() {
        inputSearch.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text
                SearchActivity.this.shopingListAdapter.getFilter().filter(cs);
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable arg0) {
                // TODO Auto-generated method stub
            }
        });

    }

    /*
     *Gets all the products from the Database
     */

    private String[] getAllProducts()
    {

        ArrayList<Product> list = mDb.getAllProducts();
        String[] products = new String[list.size()];
        for (int i = 0; i < products.length; i++) 
        {
            products[i] = list.get(i).getName();
        }
        return products;

    }

    /*
     *Initialize DBAdapter
     * And opens communication with the Database 
     */
    private void openDB()
    {
        mDb = new DBAdaptor(this);  
        mDb.open();
        mDb.deletAllProductTable();
        mDb.createProductEntry(new Product(R.drawable.bread_1_icon, "Bread", 0));

    }

    public void onEditTextClick(View v)
    {

    }

    public void setOnEditorActionListener()
    {
        inputSearch.setOnEditorActionListener(
                new EditText.OnEditorActionListener() {
                    @Override
                    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                        if (actionId == EditorInfo.IME_ACTION_SEARCH ||
                                actionId == EditorInfo.IME_ACTION_DONE ||
                                event.getAction() == KeyEvent.ACTION_DOWN &&
                                event.getKeyCode() == KeyEvent.KEYCODE_ENTER) {
                            if (!event.isShiftPressed()) {

                                return true; 
                            }                
                        }
                        return false; // pass on to other listeners. 
                    }

                });
    }
} 
```

下面是搜索活动的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <!-- Editext for Search -->
    <EditText android:id="@+id/inputSearch"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="Search products.."
        android:inputType="textVisiblePassword"
        android:onClick="onEditTextClick"/>

    <!-- List View -->
    <ListView
        android:id="@+id/list_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />

     <ListView
        android:id="@+id/list_v"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />

</LinearLayout> 
```

下面是 ListView 项目 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

     <ImageView
         android:id="@+id/imgIcon"
         android:layout_width="20dp"
         android:layout_height="20dp"
         android:gravity="center_vertical" />

     <TextView
         android:id="@+id/productName"
         android:layout_width="116dp"
         android:layout_height="51dp"
         android:gravity="center_vertical"
         android:textSize="22dp"
         android:textStyle="bold" />

     <EditText
         android:id="@+id/productQuantity"
         android:layout_width="98dp"
         android:layout_height="wrap_content"
         android:ems="10"
         android:gravity="center_vertical"
         android:textSize="22dp"
         android:textStyle="bold" />

</LinearLayout> 
```

我知道这是很多代码，但我认为这是向您展示漏洞故事，以便你们可以帮助我。

非常感谢任何可以帮助我的人...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T21:15:59.750

在 Manifest 文件的 MainActivity 标记中使用它

```
android:windowSoftInputMode="stateHidden" 
```

关于 ListViewItems 大小，请尝试降低 Items 布局中视图的高度。

并且默认情况下Item之间的差距必须很小。但无论如何你可以这样设置

```
android:dividerHeight="2dp" 
```

但是在浏览完你的代码之后，你不应该在 MainActivity 中使用**startActivityForResult**而不是**startActivity 。**或者至少`finish()`在去 SearchActivity 之前。

# css - HTML，3 列布局

> ID：14085695
> 
> 赞同：2
> 
> 时间：2012-12-29T20:35:19.857
> 
> 标签：css, html, inline

大家好，我需要帮助我将我的网站从表格更改为 div

我的问题是我的网站需要 3 个内联 div 我需要在页面中心 788px 的 div 其他 2 个在左右它们将有一个重复的背景图像，根据屏幕分辨率增加和减少，但 div 在中心必须保持相同的大小，并且无论分辨率如何，它都必须保持在页面的中心。这可以使用div吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:53:12.527

这当然是可能的：我建议查看浮动（http://www.w3schools.com/css/css_float.asp）和背景图片（http://www.w3schools.com/cssref/pr_background-image.asp )

要设置背景图像：

```
<div style="background-image:url('location/image.ext');"> 
```

查看背景重复：[http ://www.w3schools.com/cssref/pr_background-repeat.asp](http://www.w3schools.com/cssref/pr_background-repeat.asp)

至于 3 列布局示例，网上有很多，在这里可以找到一个简单的示例：[http ://www.electrictoolbox.com/basic-3-column-fixed-width-css-layout/](http://www.electrictoolbox.com/basic-3-column-fixed-width-css-layout/)

```
 <div id="container">

    <div id="left">
    </div>

    <div id="right">
    </div>

    <div id="content">
    </div>

    <div class="clear"></div>

    <div id="footer">
    </div>

</div>

#container {
    width: 700px;
}

#left {
    float: left;
    width: 150px;
}

#content {
    padding: 0 210px 0 160px;
}

#right {
    float: right;
    width: 200px;
}

.clear {
    clear: both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T22:48:39.863

你的意思是这样的吗？
[http://jsfiddle.net/UY5XY/5/](http://jsfiddle.net/UY5XY/5/)

```
<div id="containter">
    <div id="left">LEFT</div>
    <div id="center">CENTER</div>
    <div id="right">RIGHT</div>
</div> 
```

CSS：

```
#containter div {
    position:relative;
    text-align:center;
    width:100%;
    height:auto;
}
#containter div {
    position:absolute;
    text-align:left;
    width:100px;
    height:100px;
    display:block;
}
#left {
    left:0;            
}
#center {
    width:10%;
    margin:0 40%;
}
#right {
    right:0;   
} 
```

-> IE 的文本对齐（应该没问题）
-> 边距：左右为 0
-> 中心边距是百分比值，但可以是例如。50px，但你应该使中心边距也像'margin：0 50px'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T22:31:52.330

Check out [http://matthewjamestaylor.com/blog/perfect-3-column.htm](http://matthewjamestaylor.com/blog/perfect-3-column.htm)

You would need to set the middle column to a fixed-width (px) instead of %.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T22:09:35.797

您想要的（具有固定中心的液体侧）已经在另一个 SO 帖子中得到了回答：

[三列布局：固定宽度中心与流体侧列](https://stackoverflow.com/questions/8283225/three-column-layout-fixed-width-center-with-fluid-side-columns)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-29T21:02:03.363

你可以试试这个...

为每个 div 设置单独的 id，并尝试使用像素而不是百分比来表示值......并将位置用作相对或固定......这样当浏览器减少时它不会改变......

例如。比如说，你有一个中心 div 的 id 为 #center_div ......然后试试这个......

```
#center_div{
position:relative (or fixed);
width: (value)px;
height: (value)px;
display: block;
} 
```

如果您希望中心 div 出现在其他两个 div 之上...只需使用 z-index 属性...

希望它有效...

# ruby-on-rails - 为什么我的 RoR 破坏链接不起作用？

> ID：14085696
> 
> 赞同：0
> 
> 时间：2012-12-29T20:35:25.677
> 
> 标签：ruby-on-rails, scaffolding, destroy

有一个与 Ruby on Rails 应用程序相关的问题让我困惑了很长时间。我在 3 个不同的环境中测试了相同的工作流程，但在任何一个环境中，我都无法让“破坏”链接正常工作！

使用此设置：

*   RVM 1.17.4
*   红宝石 1.9.3p327
*   导轨 3.2.9

然后，从字面上看，执行这些命令：

```
$ rails new foo
$ cd foo/
$ rails g scaffold bar title:string
$ rake db:migrate 
```

它生成了这个控制器：

```
 # DELETE /bars/1
  # DELETE /bars/1.json
  def destroy
    @bar = Bar.find(params[:id])
    @bar.destroy

    respond_to do |format|
      format.html { redirect_to bars_url }
      format.json { head :no_content }
    end
  end 
```

这是视图中的破坏线：

```
<%= link_to 'Destroy', bar, method: :delete, data: { confirm: 'Are you sure?' } %> 
```

这是最后一页中的代码：

```
<a href="/bars/1" data-confirm="Are you sure?" data-method="delete" rel="nofollow">Destroy</a> 
```

在布局中，我有这些：

```
 <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %> 
```

在 application.js 我有这些：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

这些是 html 输出中的行：

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/bars.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

这些是路线：

```
 bars GET    /bars(.:format)          bars#index
         POST   /bars(.:format)          bars#create
 new_bar GET    /bars/new(.:format)      bars#new
edit_bar GET    /bars/:id/edit(.:format) bars#edit
     bar GET    /bars/:id(.:format)      bars#show
         PUT    /bars/:id(.:format)      bars#update
         DELETE /bars/:id(.:format)      bars#destroy 
```

有人得出相同的结果吗？为什么它不起作用？

我在 Internet 上找到的解决方法表明 javascript 未正确加载，有时建议将操作从 DELETE 更改为 GET。有些人建议更改按钮的链接。无论如何，确认永远不会出现，并且在所有视图中重写所有销毁操作真的很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T22:41:04.277

给定html，应该没有问题。因此，这可能是客户端问题，而不是服务器端问题。

如你所说...

> 我在 Internet 上找到的解决方法表明 javascript 未正确加载...

1.  您可能有一个不支持 javascript 的浏览器，或者您禁用了 javascript。

    你在哪些浏览器中测试过这个？尝试 Firefox，并在**选项**窗口中，确保**内容**选项卡已选中**启用 javascript 。**

2.  或者，转到浏览器`/assets/jquery.js?body=1`并`/assets/jquery_ujs.js?body=1`在浏览器中确保 javascript 框架文件存在。如果没有，您需要将这些添加到您的资产目录中，如果您在生产环境中运行，则*可能*需要运行。`rake assets:precompile`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T21:26:34.780

如果启用了 JavaScript，并且您确定*销毁*操作必须有效，但链接未发送正确的 HTTP_METHOD = DELETE，并且路由设置正确，**则尝试更改 DOCTYPE**：

```
<!DOCTYPE html> 
```

# c# - 以 StorageFile 为参数的 C# 测试方法

> ID：14085697
> 
> 赞同：3
> 
> 时间：2012-12-29T20:35:29.330
> 
> 标签：c#, mocking, windows-runtime, nunit, .net-4.5

首先，这是一个**Microsoft Store** winrt 库，我正在尝试使用此签名测试一个公共方法：

```
string GetStringFromFile(StorageFile storageFile); 
```

但是`StorageFile`没有构造函数，所以我不能在我的 NUnit 测试代码上创建它。另外，我认为我不能`Moq`在 WinRt 上使用或任何其他 Mocking 库。

我一直在寻找从 IStorageFile 接口创建一个手工制作的假货​​，但它内部有很多方法，我再次坚持另一个深层属性，指出内部没有公共构造函数的类，`StorageFile`如`ImageProperties`示例。

`StorageFile`那么...用和/或`ImageProperties`类测试方法的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T20:39:43.327

该类`StorageFile`实现了一个接口[IStorageFile](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.istoragefile.aspx)，因此您应该将依赖项更改为该接口，然后您可以使用模拟或存根（如果您不能使用 Moq 等，可能是您创建的类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:40:28.470

假设此方法是您的一种方法，而不是您无法控制的另一个库中的方法；我会更改签名，因此参数是 IStorageFile 类型而不是具体类。然后，您可以为您的测试创建一个假的，但在应用程序中使用真实的 StorageFile。

# python - 如何将原始字符串或整数传递给 django 模板过滤器？

> ID：14085699
> 
> 赞同：0
> 
> 时间：2012-12-29T20:35:52.390
> 
> 标签：python, django

我有一个字符串需要传递给 django 模板过滤器。但仅是字符串，没有涉及 django 模型，我认为这就是导致问题的原因。

```
var pk = "123";
var age = "{{ pk|pk_into_age }}"; 
```

在我的 django 模板过滤器代码中：

```
def pk_into_age(pk):
    timestamp = Model.objects.get(pk=int(pk)).timestamp
    return humanizeTimeDiff(timestamp) // Ex: "5 hours ago"
return timestamp 
```

但是这不起作用，错误是“pk”值只是一个空字符串“”，事实并非如此，它没有从上面抓取 pk 字符串文字。

谢谢帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:40:09.220

您以错误的方式调用模板过滤器。请参见下文：您不能将 javascript 变量传递给模板过滤器，而是从上下文传递变量。

```
<script>
    var age = "{{ pk|pk_into_age }}";
</script> 
```

假设`pk`变量存在于上下文中。或者将 pk 值硬编码为：

```
var age = "{{ '123'|pk_into_age }}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T23:55:33.537

您不能在模板过滤器中使用 javascript 变量，因为 javascript 在客户端运行，而模板是在服务器端生成的。

据我所知，没有办法绕过这个问题，而无需再次与服务器通信。

因此，要将 javascript 变量传递给模板过滤器，例如，您可以使用 ajax 请求。编写额外的视图，它处理给定的 pk 并返回一个纯模板，没有 html 标题，只包含您需要的数据。

或者...如果您不需要与用户沟通来获取“新闻”对象，只需在视图中检索 news.age。

# java - Android：向 Activity 添加计时器会导致崩溃

> ID：14085702
> 
> 赞同：-1
> 
> 时间：2012-12-29T20:36:20.950
> 
> 标签：java, android, timer

我正在学习android，我遇到了一个小问题。我有一个按钮，我想在点击它后移到屏幕的右侧。我添加了一个计时器，该计时器在单击按钮后启动，但是当我单击按钮时，程序/活动会崩溃。

这是代码：

```
import android.app.Activity;
import android.graphics.Point;
import android.os.Bundle;
import android.view.Display;
import android.view.View;
import android.widget.Button;

public class Testing extends Activity{

Timer timer = new Timer();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.testing_layout);

    final Button bt = (Button)findViewById(R.id.testButton);

    bt.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            timer.scheduleAtFixedRate(new TimerTask(){
                @Override
                public void run() {
                    float btLoc = bt.getX();
                    bt.setX(btLoc+= 50);
                }
            }, 2000, 2000);

        }
    });
} 
```

移动按钮的同一段代码在没有计时器的情况下工作。我不知道为什么程序在 `onClick(View v)`执行时崩溃。

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:51:19.890

使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)从非 UI 线程更新 UI：

```
@Override
public void onClick(View v) {
  timer.scheduleAtFixedRate(new TimerTask(){
    @Override
      public void run() {

       Testing.this.runOnUiThread(new Runnable() {
           public void run() {
             //update ui here
              float btLoc = bt.getX();
              bt.setX(btLoc+= 50);
        }
      });
        }
     }, 2000, 2000);

  }
}); 
```

# javascript - Javascript闭包：循环内循环

> ID：14085706
> 
> 赞同：0
> 
> 时间：2012-12-29T20:36:56.677
> 
> 标签：javascript, loops, closures

由于这样的关闭，我已经知道如何循环：

```
for (var i = first; i <= last; i++) {
    document.getElementById(more + i).onmouseover = (function(arg1) {
        return function() {
            document.getElementById(arg1).style.display = "block";
        }
    })(i);
} 
```

但我现在想看看循环内部。我有必须动态附加到其他元素的 DOM 元素。元素的类型是：`'1text1', '1text2', '1text3',...`我`'2text1', '2text2', '2text3', '3text4'...` 尝试过这样的事情：

```
var text;
var ktext;
for (var k = 1; k <= last_number; k++) {
    for (var i = first; i <= last; i++) {
        ktext = k + text;
        document.getElementById(ktext + i).onmouseover = (function(arg1, arg2) {
            return function() {
                document.getElementById(arg1 + arg2).style.display = "block";
            }
        })(ktext, i);
    }
} 
```

但是循环部分丢失了。如果我只是放在循环`alert(ktext + i)`的开头，我会看到： then （如预期的那样），但不像循环的第二次循环过早停止。`var i``1text1, 1text2, 1text3, 1text4``2text1``2text2, 2text3...``var k`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:42:13.327

您不需要使用闭包：

```
for( k=1; k<=last_number; k++) {
  for( i=first; i<=last; i++) {
    document.getElementById(k+text+i).onmouseover = function() {
      this.style.display = "block";
    }
  }
} 
```

无论如何，如果页面上不存在其中一个元素，您的循环可能会提前停止。在尝试分配给它之前，您应该检查元素的存在。

# ios - 是否可以在IOS模拟器中模拟本地联系人以外的联系人

> ID：14085708
> 
> 赞同：2
> 
> 时间：2012-12-29T20:37:06.383
> 
> 标签：ios, xcode, ios-simulator, contacts

我正在尝试创建一个应用程序，它将访问来自所有不同类型的联系人来源的联系人。但是，除了本地来源之外，我还没有找到任何模拟联系人的好方法。即我想测试从以下位置获取联系人：

*   kABSourceTypeExchange,
*   kABSourceTypeExchangeGAL,
*   kABSourceTypeMobileMe，
*   kABSourceTypeLDAP,

有谁知道或建议如何在 IOS 模拟器中设置这些不同的来源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T11:56:35.480

您唯一能做的就是在模拟器中设置 iCloud 帐户。我在 iOS 7 中尝试过，在此之前，我没有尝试过。

不能添加其他类型，因为在模拟器中没有其他方法可以添加其他帐户。

# ravendb - 查询嵌套集合的问题

> ID：14085709
> 
> 赞同：1
> 
> 时间：2012-12-29T20:37:11.983
> 
> 标签：ravendb

我刚开始使用 RavenDb。我想为火车时间表建模。每列火车在现实世界中都是这样描述的。

```
Train no: 123
Reda      07:00
Gdynia    07:30
Sopot     08:00

Train no: 555
Reda      08:00
Gdynia    08:30
Sopot     09:00

Train no: 666
Reda      08:00
Wejherowo 09:00 
```

我想查询访问 A 站（不必从那个站开始）然后去 B 站（不必完成它在那里运行）并且没有在 08:00 之前从 A 站出发的火车。因此，对于上面的时间表，如果我在 08:00 要求从`Reda`到到的火车，`Gdynia`我会得到 555 号火车。如果我在 08:00 要求从`Reda`到到的火车也是一样`Sopot`的。但我不应该收到 666 路火车。

我在代码中这样建模。

```
public class Train
{
    public string Id { get; set; }
    public string Number { get; set; }
    public string Description { get; set; }
    public ICollection<Station> Stations { get; set; }

    public Train()
    {
        Stations = new List<Station>();
    }
}

public class Station
{
    public string Name { get; set; }
    public string DepartFrom { get; set; }    
} 
```

我第一次尝试查询它是这样的：

```
using (var documentStore = new DocumentStore { Url = "http://localhost:8080" })
{
    documentStore.Initialize();
    var session = documentStore.OpenSession();

    var found = from train in session.Query<Train>()
                     where train.Stations.Any(s => s.Name == from)
                        && train.Stations.Any(s => s.Name == to)
                     select train;
} 
```

但是 && 不适用于嵌套集合。我发现只有|| 有效，那是因为 Lucene 的工作方式。我还发现[这里](https://stackoverflow.com/questions/10121061/finding-objects-which-contains-at-least-all-elements-from-subset-using-ravendb-a)有 Intersect 方法可以让我创建我想要的查询，但我无法在任何地方找到该扩展方法（我使用的是 RavenDB Stable v1.0 build 992）。这样做的方法是什么，我必须创建索引吗？它应该怎么看？

# jquery - jquery的jcanvas插件——旋转后对象的x和y不变

> ID：14085712
> 
> 赞同：0
> 
> 时间：2012-12-29T20:37:26.680
> 
> 标签：jquery, html5-canvas, jcanvas

我正在使用 jquery 的 jcanvas 插件的最新版本。当我旋转对象时，它的 x 和 y 应该改变，但它们没有。我应该调用一些方法来重置这些属性吗？我参考 jquery 和 jcanvas 省略了脚本标签，因为很明显它们在那里;)。

```
 <head>
        <style type="text/css">
            canvas { border: 1px solid black; width: 400px; height: 400px; margin: 0 auto; }
        </style>

        <script type="text/javascript">

            $(function() {
                var cfg = {
                    strokeStyle : "#000",
                    strokeWidth : 1,
                    fillStyle : "#FF7400",
                    group : "objects",
                    cursor : "pointer",
                    x : 100, 
                    y : 100,
                    width : 40,
                    height : 200,
                    fromCenter : false,
                    cornerRadius : 5,
                    layer : true,
                    draggable : true,
                    bringToFront : true,
                };

                $("#mine").drawRect(cfg);

                console.log($("#mine").getLayer(0).x);
                console.log($("#mine").getLayer(0).y);

                $("#mine").animateLayer(0, {
                    rotate : "+=90",
                }, "fast");

                console.log($("#mine").getLayer(0).x);
                console.log($("#mine").getLayer(0).y);
            });

        </script>
    </head>
    <body>
        <div id="wrap">
            <canvas width="400" height="400" id="mine">

            </canvas>
        </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:20:40.900

@Asad，在您 2012 年 12 月 29 日 21:50 的回复中，您试图通过“.restoreCanvas()”调用来实现什么？在我使用您的代码进行的测试中（在 Linux 上的 Chromium 23.0.1271.97 和 FF 17.0.1 上），这就是导致您描述的鼠标悬停行为的行。这是@Caleb531 关于该方法的文档： [http ://calebvans.me/projects/jcanvas/docs.php?p=restoreCanvas](http://calebevans.me/projects/jcanvas/docs.php?p=restoreCanvas)

# java - 使用 Handlers 进行线程交互

> ID：14085718
> 
> 赞同：1
> 
> 时间：2012-12-29T20:38:52.557
> 
> 标签：java, android, multithreading

我有两个工作线程：

*   数据库线程
*   网络线程

它们将是**单例**，以便应用程序的每个部分都可以使用它们。

> ```
> public class DbThread extends Thread {
> 
>       public Handler handler;
> 
>       @Override
>       public void run() {
>           Looper.prepare();
> 
>           handler = new Handler();
> 
>           Looper.loop();
>       }
>   } 
> ```

它们通过处理程序进行通信。我关心的是同步。另一个线程可以在创建处理程序时尝试访问它以发送消息。如何正确同步处理程序访问？

我的想法是想要访问另一个线程的处理程序的线程应该在处理程序创建之前等待。但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:56:05.540

[我在实施此](https://stackoverflow.com/questions/4838207/how-to-create-a-looper-thread-then-send-it-a-message-immediately)解决方案方面取得了一些成功。

您将在 HandlerThread 中隐藏 looper，您可以等到线程准备好接收消息。

它之所以有效，是因为内部的*getLooper*调用`waitUntilReady`将阻塞，直到 Looper 被初始化。这样做不仅可以确保处理程序已创建，而且您的线程已准备好接收消息。

# java - 使用 Sharedpreferences 检索值

> ID：14085719
> 
> 赞同：2
> 
> 时间：2012-12-29T20:38:54.947
> 
> 标签：java, android, sharedpreferences, store

我是 Android 新手，我不知道如何检索使用 sharedpreferences 存储的值，我找不到任何示例说明我必须在其他活动上写什么才能使用这些值。如果有人可以帮助我，我将不胜感激

这就是我存储数据的方式：

```
protected void onResume() {
    super.onResume();
    SharedPreferences prefs = getPreferences(0);
    String restoredText1 = prefs.getString("cpw", "30");
    if (restoredText1 != null) {
        savedcostperworker.setText(restoredText1, TextView.BufferType.EDITABLE);

        int selectionStart = prefs.getInt("selection-start", -1);
        int selectionEnd = prefs.getInt("selection-end", -1);
        if (selectionStart != -1 && selectionEnd != -1) {
            savedcostperworker.setSelection(selectionStart, selectionEnd);
        }
    }
}

protected void onPause() {
    super.onPause();
    SharedPreferences.Editor editor = getPreferences(0).edit();
    editor.putString("cpw", savedcostperworker.getText().toString());
    editor.putInt("selection-start", savedcostperworker.getSelectionStart());
    editor.putInt("selection-end", savedcostperworker.getSelectionEnd());
}

private EditText savedcostperworker; 
```

现在我想在另一个活动的 TextView 中显示值“cpw”，但我不知道如何

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T20:58:48.180

您忘记调用[`commit()`](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit%28%29)以保存编辑器更改：

```
SharedPreferences.Editor editor = getPreferences(0).edit();
...
editor.commit(); 
```

* * *

> 现在我想在另一个活动的 TextView 中显示值“cpw”，但我不知道如何

只需调用`getSharedPreferences()`第一个 Activity 的名称并像以前一样使用它：

```
SharedPreferences prefs = getSharedPreferences("MainActivity", 0);
String string = prefs.getString("cpw", "String not found");
Log.v("SharedPrefs", string); 
```

您不能`getPreferences()`在第二个 Activity 中使用，因为它会`getSharedPreferences()`以错误的文件名调用。有关更多信息，请参阅[`getPreferences()`](http://developer.android.com/reference/android/app/Activity.html#getPreferences%28int%29)文档。

# php - php获取变量不在链接中

> ID：14085721
> 
> 赞同：0
> 
> 时间：2012-12-29T20:39:22.387
> 
> 标签：php, html, get

这是 Opera Dragonfly 向我展示的内容：

```
<form action="rejectQuestion.php?q_id=24" id="reject_question" method="get">
<input type="submit" value="Reject" id="form_button"/>
</form> 
```

但点击提交按钮后，我得到的是：

`http://project/rejectQuestion.php?`，所以没有论据。同样的事情在另一种形式上。是服务器问题还是我病得很重，看不到代码问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-29T20:49:38.113

当表单具有时，它会用要发送的表单数据`method="get"`覆盖 中的任何查询字符串。`action`因此，如果您想要任何“固定”值，则必须将它们添加为隐藏输入：

```
<form action="rejectQuestion.php" id="reject_question" method="get">
  <input type="hidden" name="q_id" value="24" />
  <input type="submit" value="Reject" id="form_button" />
</form> 
```

***但是***...... HTTP 规范明确指出，GET 请求不得用于任何变革性的事情，例如您似乎在做的事情，以“拒绝问题”的名称来判断。您应该为此使用`POST`请求。

应该这样做的一个原因是为了防止欺诈性请求。恶意用户可以轻松地将“删除”链接发送给毫无戒心的用户，而受害者可能会发现他们的东西不见了。它甚至不必是被点击的链接，恶意用户可以简单地在公共论坛上发布看起来像损坏的图像，但它实际上向服务器发出了请求并修改或删除了内容。

所有变革性的要求都应该`POST`，永远不要`GET`。`GET`应该只用于*获取*东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T20:44:11.723

向表单添加隐藏输入

```
<form action="rejectQuestion.php" id="reject_question" method="get">
<input type="hidden" name="q_id" value="24">
<input type="submit" value="Reject" id="form_button">
</form> 
```

您必须这样做，因为`GET`在表单中使用该方法时，它会覆盖表单中使用的查询字符串`action`。

另一种方法是让表单使用该`POST`方法，在这种情况下，查询字符串将被单独保留。`GET`尽管这在后端可能会让人感到困惑，因为在和超全局变量中都会有值`POST`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T20:50:25.833

您的代码的问题是您在`action`URL 中使用 GET 参数并且具有`method="get"`.

这会导致浏览器丢弃查询字符串，`action`并且仅使用基于表单字段的（在您的情况下为空的）查询字符串。出于这个原因，您要么需要使用`method="POST"`（无论如何这是一个好主意，因为您将使用请求修改数据）或将其移动`q_id`到隐藏的表单字段中。实际上，即使使用 POST，您也应该这样做。无需通过 GET 传递 ID。

```
<form action="rejectQuestion.php?q_id=24" id="reject_question" method="get">
  <input type="hidden" name="q_id" value="24" />
  <input type="submit" value="Reject" id="form_button" />
</form> 
```

# ruby-on-rails - 对于聊天目的，使用 Ajax 自动部分重新加载是否过于繁重？

> ID：14085723
> 
> 赞同：0
> 
> 时间：2012-12-29T20:39:37.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我正在尝试使用[Ruby on Rails](http://en.wikipedia.org/wiki/Ruby_on_Rails)和[jQuery](http://en.wikipedia.org/wiki/JQuery)制作一个聊天应用程序。我让它每五秒重新加载一次，这样用户就可以看到新消息，而且我有大量的聊天室。

对服务器来说太重了吗？或者这应该是正常的事情？

请想象一下，如果有 20 个聊天室，每个聊天室有 10 个用户。每五秒就有 200 人使用 Ajax 请求重新加载。是不是太重了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:41:15.310

我喜欢尽可能避免超时和间隔，所以我建议你看看[WebSocket](http://en.wikipedia.org/wiki/WebSocket)。

我还想指出，在您的情况下，[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)可能不会那么重，因为您没有那么多用户，但是如果您真的会使用 Ajax，请确保具有良好的请求结构并且不允许用户每毫秒发布一次，所以添加适当的控件:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T21:09:46.507

我认为 Ajax 加载聊天并不是实现聊天的最佳方式，因为随着时间的推移和用户将面临加载问题，这样做的一种方法是 Web 套接字。

或者我发现了这个[推送](http://pusher.com/)服务，它似乎提供了一个简单的解决方案，虽然它不是免费的。我认为他们的免费计划足以开始。当您有用户时，您可以选择他们的付费计划。

但请注意，我没有试过这个：D

# visual-studio-2010 - VS2010 中的 Emacs 扩展不能用作键盘布局选项

> ID：14085726
> 
> 赞同：2
> 
> 时间：2012-12-29T20:39:58.817
> 
> 标签：visual-studio-2010, emacs

我正在设置一台新笔记本电脑并刚刚安装了 VS2010 Professional。我下载并安装了 emacs 扩展。它出现在已安装扩展的列表中，但是当我选择工具-> 选项-> 键盘时，它不是选项之一。扩展程序的网页说它应该要求管理员权限才能安装，但这不会发生。我删除了扩展，以管理员身份启动 VS2010 并再次尝试，结果相同。

我很困惑——几年前我在另一台机器上完成了这项工作，但这次不是。不知道我在做什么不同。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:40:33.480

在更新了所有内容并没有看到任何变化之后，我又尝试了一个想法——我加载了一个解决方案。加载解决方案后，我收到了请求提升权限的对话框。去搞清楚。现在我可以选择 emacs 作为键盘绑定。

# python - 如何检查 Pyserial 发送的数据

> ID：14085733
> 
> 赞同：0
> 
> 时间：2012-12-29T20:41:00.363
> 
> 标签：python, windows-7, pyserial

我是 Python pyserial 的初学者。我正在使用基本的 pyserial 代码打开一个串行端口并将数据写入其中。

```
import serial

ser = serial.Serial(0)  # open first serial port
print ser.portstr       # check which port was really used
ser.write("hello")      # write a string
ser.close() 
```

该代码在 Win 7 上的 Python 2.7 上运行良好，没有任何错误。我对此代码有一些疑问。

1）我的笔记本电脑没有任何“可视”串行端口。它有 3 个 USB 端口。那么我怎样才能让 pyserial 与设备进行串行通信。换句话说，我应该在哪里以及如何连接我的微控制器以串行发送和接收数据。

2）如何在系统上虚拟地通过pyserial（如代码中提到的）查看发送的数据，而无需将任何硬件连接到串口。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:50:05.420

1) 你需要一个 USB->RS232 适配器。有数百种设备，主要基于几个芯片组。易趣是你的朋友。搜索“USB RS232”

2) 尝试[http://com0com.sourceforge.net/](http://com0com.sourceforge.net/)。它允许您创建一个虚拟环回，以便您可以在一端连接 Python 应用程序，在另一端连接 Putty。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:55:35.903

您可以使用[`serial.tools.list_ports.comports()`](http://pyserial.sourceforge.net/pyserial_api.html#serial.tools.list_ports.comports)来获取所有现有端口的列表。由于 USB 端口可以有 RS232 转换器，因此 pyserial 默认使用它们。

要捕获发送到串行端口的数据，您需要一个窥探器。看到[这个问题](https://stackoverflow.com/questions/1023181/rs232-serial-snoop-tools-for-protocol-development-debugging)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T23:29:01.087

为了通过 USB 使用串行端口通信，您的微控制器 USB 设备必须在设备列表中显示为 VCP（虚拟 Com 端口）。如果是这样，则可以从该设备的设备管理器属性中获取“COM”名称，然后在 python 脚本中使用该名称（例如“COM23”）。

大多数人都很懒惰，因为他们只是在他们的微控制器上使用 FTDI 芯片组。如果是这样，您可以从 FTDI 网站下载 FTDI VCP 驱动程序。

FTDI 还支持不同的 USB 设备（相同的物理设备，但不同的驱动程序），需要您使用自定义代码和 DLL，但速度更快。VCP 速度较慢，但​​更易于使用。他们有两者的驱动程序。

在使用 Python 脚本之前，请使用免费软件终端应用程序进行完整性检查。PuTTY、RealTerm 和 TeraTerm 对此很有用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-30T13:17:16.217

我猜您的问题与[Python Test Scripts](http://pythontestscripts.blogspot.ro/2011/12/pyserial-port-scan.html)有关。

# java - java - 如何从java中的另一个类中调用组合框选定项？

> ID：14085734
> 
> 赞同：-1
> 
> 时间：2012-12-29T20:41:01.873
> 
> 标签：java, swing, variables, jcombobox

```
final JComboBox departure = new JComboBox();
departure.setModel(new DefaultComboBoxModel(new String[] {"city1", "city2", "city3"}));
departure.setBounds(413, 11, 147, 20);
int selectedIndex1=departure.getSelectedIndex();
contentPane.add(departure); 
```

我正在为我的作业编写一个巴士预订系统，我用它`JComboBox`来选择目的地和出发城市。我想从另一个班级调用选定的项目。在这个类中，用户将选择他的座位。

如何从另一个班级调用所选项目？请帮助我..谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T21:08:18.560

您可以创建`JComboBox`一个类成员变量并添加一个方法来返回结果`getSelectedItem`：

```
public class MyGuiApp {

    private JComboBox comboBox;

    // constructor, init method, etc.

    public String getSelectedItem() {
       return (String)comboBox.getSelectedItem();
    }
} 
```

# java - 尝试共享 mp3，但不包括文件扩展名

> ID：14085740
> 
> 赞同：1
> 
> 时间：2012-12-29T20:41:45.807
> 
> 标签：java, android, android-intent

```
Uri clipUri = Uri.parse("android.resource://com.packagename.community/raw/" + rawname);
Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_STREAM, clipUri);
shareIntent.setType("audio/mpeg");
startActivity(Intent.createChooser(shareIntent, getResources().getText(R.string.send_to))); 
```

这段代码几乎可以工作，我可以成功地将剪辑发送到另一个应用程序（例如保管箱）并且文件一切正常，除了它缺少 .mp3 扩展名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:15:47.060

欢迎来到 StackOverflow！StackOverflow 用于编程问题，这不是问题。

我将您的非问题解释为：

> 为什么，当我使用`Uri`没有文件扩展名的 a 时，文件扩展名不是由文件扩展名精灵神奇地添加的？

那是因为Android缺少文件扩展精灵。

如果你想在你的文件中有一个扩展名`Uri`，你需要放一个。而且，由于我知道没有任何语法会给出`android.resource://` `Uri`文件扩展名，因此您的选择是：

1.  共享文件，而不是资源

2.  创建一个`ContentProvider`将通过`openFile`响应某些`Uri`确实具有所需文件扩展名的资源来提供资源的

3.  没有文件扩展名的生活

4.  不要共享资源

# ruby - 使用每个第 n 个元素压缩数组

> ID：14085741
> 
> 赞同：2
> 
> 时间：2012-12-29T20:41:50.840
> 
> 标签：ruby, arrays

有没有办法以`zip`这样的方式使用 2 个数组将在 n 元素之间用空格压缩，例如：

```
a = [1,2,3,4,5,6,7,8,9,10]
b = ["x","y","z"]
n = 3 
```

结果将是

```
res = [[1,"x"],2,3,[4,"y"],5,6,[7,"z"],8,9,10] # note that 10 is alone and b is not cycled 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T20:59:27.053

我会写：

```
res = a.each_slice(n).zip(b).flat_map do |xs, y| 
  y ? [[xs.first, y], *xs.drop(1)] : xs
end
#=> [[1, "x"], 2, 3, [4, "y"], 5, 6, [7, "z"], 8, 9, 10] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T23:20:11.250

怎么样：

```
a.map.with_index{|x, i| i%n < 1 && b.size > i/n ? [x, b[i/n]] : x}
#=> [[1, "x"], 2, 3, [4, "y"], 5, 6, [7, "z"], 8, 9, 10] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T23:57:52.923

迭代 b 是一种可能性：

```
# Note this destroys array a;use a dup it if it is needed elsewhere
res = b.flat_map{|el| [[el].unshift(a.shift), *a.shift(n-1)] }.concat(a) 
```

# spring-mvc - @requestmapping 参数="表单"

> ID：14085744
> 
> 赞同：1
> 
> 时间：2012-12-29T20:42:12.720
> 
> 标签：spring-mvc, spring-roo

有人可以解释请求映射中的`params="form"`参数吗？
例如像这样：

```
@RequestMapping(value = "/{id}", params = "form", method = RequestMethod.GET) 
```

我知道`{id}`作为数字传入，GET 是不言自明的，但让`params = "form"`我感到困惑。我显然是 Spring MVC 的新手，我找不到解释。如果有人知道涵盖该主题的好教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:49:21.593

这可确保 URL 具有查询参数“form”。

这样 RequestMapping 将匹配这样的 url：`some_url/123?form`但不是`some_url/123`

# ember.js - Ember.Container 的用途是什么

> ID：14085749
> 
> 赞同：18
> 
> 时间：2012-12-29T20:42:51.327
> 
> 标签：ember.js

谁能解释一下最新 Ember 中 Container 模块的用途是什么？

在设置和此测试开始时的使用示例：

```
module("Ember.View - handlebars integration", {
  setup: function() {
    Ember.lookup = lookup = { Ember: Ember };
    lookup.TemplateTests = TemplateTests = Ember.Namespace.create();

    container = new Ember.Container();
    container.optionsForType('template', { instantiate: false });
  }

test("template view should call the function of the associated template", function() {
  container.register('template', 'testTemplate', Ember.Handlebars.compile("<h1 id='twas-called'>template was called</h1>")); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-30T07:35:49.077

容器的目标是提供一种更通用的机制来描述模块依赖关系，而不是我们一直使用的 ad-hoc 方法。

例如，假设您想找到`post`路由的控制器。默认的 Ember 规则是我们将其查找为`App.PostController`. 在容器之前，我们只需在需要查找的地方（使用`classify`和朋友）对这些规则进行硬编码。

容器为我们提供了一种在一个地方定义这些规则的方法。作为奖励，对于需要不同约定的应用程序，可以覆盖这些规则。

所以`Ember.get(namespace, Ember.String.classify(name) + 'Controller')`我们现在做的是内部而不是内部`container.lookup('controller:' + name)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:12:45.450

供内部使用。

不打算成为公共 API

[https://github.com/emberjs/ember.js/commit/5becdc4467573f80a5c5dbb51d97c6b9239714a8](https://github.com/emberjs/ember.js/commit/5becdc4467573f80a5c5dbb51d97c6b9239714a8)

# java - MouseListener/KeyListener 不工作（JPanel）

> ID：14085757
> 
> 赞同：5
> 
> 时间：2012-12-29T20:44:16.903
> 
> 标签：java, swing, jpanel, keylistener, mouselistener

我正在做一个涉及 JPanel 中的鼠标和键侦听器的小项目。不幸的是，当我使用鼠标/键盘时，没有调用任何方法。我以前使用过 JPanels/JFrame/JApplet 和 JComponents。代码片段如下所示：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
import java.io.File;
import java.io.PrintWriter;
import java.io.IOException;
import java.io.FileNotFoundException;
import java.awt.image.BufferedImage;
import javax.imageio.ImageIO;
import java.util.Scanner;

public class Hello extends JPanel implements KeyListener, MouseListener{
    JPanel panel = new JPanel();
    JFrame frame = new JFrame();
    public Hello(){
        addKeyListener(this);
        addMouseListener(this);
    }
    public static void main(String [] args){
        Hello play = new Hello();
        play.setPanel();
    }
    public void setPanel(){
        panel.setLayout(null);
        frame.add(panel);
        frame.setLayout(null);
        panel.setBounds(0,0,100,100);
        frame.setVisible(true);
        panel.setVisible(true);
        panel.setFocusable(true);
        frame.setSize(100,100);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
    public void keyTyped(KeyEvent evt){
        System.out.println("keytyped");
    }
    public void keyPressed(KeyEvent evt){
        System.out.print("keypressed");
    }
    public void keyReleased(KeyEvent evt){
        System.out.println("keyreleased");
    }
    public void mousePressed(MouseEvent evt){
        System.out.println("mousepressed");
    }
    public void mouseReleased(MouseEvent evt){
        System.out.println("mousereleased");
    }
    public void mouseClicked(MouseEvent evt){
        System.out.println("mouseclicked");
    }
    public void mouseEntered(MouseEvent evt){
        System.out.println("mousenentered");
    }
    public void mouseExited(MouseEvent evt){
        System.out.println("mouseexited");
    }
} 
```

题外话：我不断收到错误您的帖子似乎包含未正确格式化为代码的代码。请使用代码工具栏按钮或 CTRL+K 键盘快捷键将所有代码缩进 4 个空格。如需更多编辑帮助，请单击 [?] 工具栏图标。我不知道如何解决它。有时我把所有东西都放在代码中，它仍然不会提交。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-29T20:51:57.590

看看[JFrame 的 Java KeyListener 没有响应？](https://stackoverflow.com/questions/286727/java-keylistener-for-jframe-is-being-unresponsive).

您需要注册您的`KeyListener`和`MouseListener`每个`JComponent`您想收听的：

```
public Hello() {
    addKeyListener(this);
    addMouseListener(this);
    panel.addKeyListener(this);
    panel.addMouseListener(this);
    frame.addKeyListener(this);
    frame.addMouseListener(this);
} 
```

**编辑：**
键和鼠标事件仅从`JComponent`当时具有焦点的事件中触发。因此，似乎有共识认为 KeyBindings 可能对 KeyListeners 有利。然而，两者都有其应用程序，因此这里没有硬性规定。阅读“[如何编写键侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)”和“[如何编写键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)”，您将了解要点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T20:53:39.093

最好避免使用`KeyListeners`with `JPanel`，而是使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。`JPanel`无法获得焦点，因此无法与 交互`KeyEvents`。使用`KeyBindings`，即使组件没有焦点，您也可以将 Action 映射到 KeyStroke。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T20:50:35.617

试试这个：

```
 panel.addKeyListener(this);
 panel.addMouseListener(this); 
```

您必须将侦听器添加到您想要收听的每个组件中。

# javascript - Javascript：使用 document.getElementById 时出现语法错误

> ID：14085759
> 
> 赞同：-2
> 
> 时间：2012-12-29T20:44:38.980
> 
> 标签：javascript

我正在尝试创建一个动态条形图，其中 div 会根据从 JSON 文件加载的数据而变化。

但是，我似乎无法通过 javascript 修改任何 div。以下代码会导致 Chrome 出现错误：

```
document.getElementById("div123").style.width = 500px; 
```

有问题的 DIV 在 javascript 上方的 CSS 中定义，并且具有 id="div123"。

我究竟做错了什么？如何在不使用库的情况下以轻量级的方式动态更改 div？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T20:45:36.433

使用引号

```
document.getElementById("div123").style.width = "500px"; 
```

# javascript - 多个 jQuery UI 范围滑块交互

> ID：14085761
> 
> 赞同：1
> 
> 时间：2012-12-29T20:44:52.817
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-slider

我正在使用 jQuery UI 创建三个独立的范围滑块。但是，由于某种原因，当在滑块上移动一个手柄时，另一个手柄将跳转到最后一个修改的滑块上相应手柄的位置（参见下面的 gif）。我真的很想停止这种情况并使滑块完全独立。

[![破碎的滑块](../Images/5da427b3a7a5507e2c115ae9fc701268.png)](https://i.stack.imgur.com/XudbA.gif)

目前我只在 Chrome 中测试过。

[这是一个演示问题的 JSFiddle](http://jsfiddle.net/nquinlan/4GLrV/)。下面是相关代码：

### HTML

```
<ul id="sliders">
    <li id="red">
        <div class="slider"></div>
    </li>
    <li id="green">
        <div class="slider"></div>
    </li>
    <li id="blue">
        <div class="slider"></div>
    </li>
</ul>​ 
```

### Javascript

```
$( "#sliders .slider" ).slider({
    range: true,
    orientation: "horizontal",
    min: 0,
    max: 255,
    values: [ 0, 255 ],
    slide: function( event, ui ) {
        $(this).parent().children(".range").text(ui.values[ 0 ] + " - " + ui.values[ 1 ]);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:56:51.300

您需要将`.slider()`小部件应用于每个项目，而不是项目集合。

```
$( "#sliders .slider" ).each(function(){
    $(this).slider({
        range: true,
        orientation: "horizontal",
        min: 0,
        max: 255,
        values: [ 0, 255 ],
        slide: function( event, ui ) {
            $(this).prev(".range").text(ui.values[ 0 ] + " - " + ui.values[ 1 ]);
        }
    });
}); 
```

另请注意，您可以使用`.prev()`而不是`.parent().children()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T21:22:27.787

请尝试对您的代码进行此修改：

```
$("#sliders .slider").each(function() {
    $(this).slider({
        range : true,
        orientation : "horizontal",
        min : 0,
        max : 255,
        values : [0, 255],
        orientation : "horizontal",
        slide : function(event, ui) {
            $(this).parent().children(".range").text(ui.values[0] + " - " + ui.values[1]);
        }
    });
}); ​ 
```

希望这可以帮助。

# c# - 将代码从 vb.net 转换为 c#-await 任务

> ID：14085765
> 
> 赞同：2
> 
> 时间：2012-12-29T20:45:42.640
> 
> 标签：c#, wpf, vb.net, async-await

我一直在愉快地使用以下代码行一段时间，它似乎令人满意地完成了这项工作。我希望将其转换为 C#。我正在尝试转换：

```
Dim result as string = Await Task(Of String).Factory.StartNew(Function() MyClass.PerformJob(param1,param2,param3)) 
```

我在 C# 中输入以下代码：

```
string result = await Task<string>.Factory.StartNew((Func<string>) MyClass.PerformJob((param1,param2,param3)); 
```

这会产生以下错误：

```
'Cannot convert type 'string' to 'System.Func<string>' 
```

我认为这与以我的方式传递参数有关；我不知道为什么这应该在 VB.NET 而不是 C# 中工作？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:52:54.477

您正在尝试将`MyClass.PerformJob`方法`Func<string>`的结果转换为结果类型为`string`. 用这个：

```
string result = await Task<string>.Factory
    .StartNew(() => MyClass.PerformJob(param1,param2,param3)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:53:38.500

您不需要将其强制转换为 Func，并且您可能需要使用 lambda 将参数放入 PerformJob 调用中。试试这个。

```
string result = await Task<string>.Factory.StartNew(() => MyClass.PerformJob(param1,param2,param3)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T04:12:11.500

您必须将 'MyClass' 替换为 'this' - C# 没有严格等同于 'MyClass'：

```
string result = await Task<string>.Factory.StartNew(() => this.PerformJob(param1,param2,param3)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T20:52:29.827

假设`PerformJob`是一个`Func<string>`我不认为你需要`Func<string>`演员表。

```
string result = await Task<string>.Factory.StartNew(MyClass.PerformJob(param1,param2,param3)); 
```

# android - Android Hello World 应用在我的 nexus 7 上放大并模糊

> ID：14085768
> 
> 赞同：1
> 
> 时间：2012-12-29T20:45:58.657
> 
> 标签：android, screen-size

我正在开始 android 开发，我正在关注 developer.android.com 上的第一个培训指南。

我创建了一个这样的应用程序：

```
android create project --target <target-id> --name MyFirstApp \
--path <path-to-workspace>/MyFirstApp --activity MainActivity \
--package com.example.myfirstapp 
```

当我将它安装在我的 nexus 7 上时，它全部放大模糊。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:47:20.140

这很模糊，因为该应用程序最初是为手机大小的设备创建的，当您在平板电脑上运行它时，该应用程序被放大以适应 7 英寸屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T22:53:27.087

原来我需要`supports-screens`在我的`AndroidManifest.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.gpsinsight.gpsandroid"                                                             
      android:versionCode="1"
      android:versionName="1.0">
    <supports-screens
        android:smallScreens="true"
        android:normalScreens="true"        android:largeScreens="true"
        android:xlargeScreens="true" />
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="MainActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

# php - 从谷歌地图 img 的 src 中提取坐标

> ID：14085769
> 
> 赞同：2
> 
> 时间：2012-12-29T20:46:04.550
> 
> 标签：php, regex, string, google-maps, split

我想要的是从字符串中获取坐标（从 Google Maps img 的 src 中获取）。下面是我的一个失败的正则表达式尝试。

那么，最好的方法是什么？用正则表达式？那么应该如何组成呢？

```
$string = "//maps.google.com/maps/api/staticmap?sensor=false&amp;center=56.393906,16.066206&amp;zoom=12&amp;size=344x170&amp;language=sv&amp;markers=56.393906,16.066206&amp;maptype=roadmap&amp;scale=1";

$matches = array();
preg_match('/center=(.*?)\zoom/s', $string, $matches);

... ? 
```

**想要的最终结果：**

```
$coordiates = (
    [0] = '56.393906',
    [1] = '16.066206'
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T20:52:02.963

你不应该对这样的事情使用正则表达式，因为如果 URL 发生变化，它会更慢并且更容易中断。PHP 已经为这样的事情内置了函数。使用[parse_url()](http://us3.php.net/manual/en/function.parse-url.php)和[parse_str()](http://us3.php.net/parse_str)轻松完成它。

```
$string = "//maps.google.com/maps/api/staticmap?sensor=false&center=56.393906,16.066206&zoom=12&size=344x170&language=sv&markers=56.393906,16.066206&maptype=roadmap&scale=1";

parse_str(parse_url($string, PHP_URL_QUERY), $vars);

print_r($vars); 
```

输出：

```
Array
(
    [sensor] => false
    [center] => 56.393906,16.066206
    [zoom] => 12
    [size] => 344x170
    [language] => sv
    [markers] => 56.393906,16.066206
    [maptype] => roadmap
    [scale] => 1
) 
```

因此，要获取您的坐标，只需执行以下操作：

```
$coords = explode(',', $vars['center']);
print_r($coords);

// Outputs:
Array
(
    [0] => 56.393906
    [1] => 16.066206
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:59:21.947

这并不完美，但只需稍作修改，它就可以为您工作。它还显示了一个简单的可扩展正则表达式，您可以使用它来分解地图 URL。

```
$data = preg_replace('/.*?center=(.*?)\,(.*?)&amp(.*?)/g', '$1~$2~$3~', $string);
$coordinates = explode('~', $data);

echo "X: " . $coordinates[0] . "<br />Y: " . $coordinates[1]; 
```

*   编辑 修正错别字

# android - 使用布尔标志控制 MediaPlayer 行为

> ID：14085770
> 
> 赞同：0
> 
> 时间：2012-12-29T20:46:07.017
> 
> 标签：android

我的应用使用 MediaPlayer 对象播放背景音乐。我将它与其他名为的全局变量一起存储在 .java 文件中 - 还有什么？- GlobalVariables，所以要访问它和其他变量，我使用这个调用：

```
GlobalVariables.mPlayer 
```

我想让 MediaPlayer 在我的应用程序中的活动之间切换时继续播放音频，但在应用程序失去焦点时暂停。为了尝试实现这一点，我声明了一个名为 keepPlaying 的布尔值，它也存储在 GlobalVariables 中，以便应用程序中的所有活动都可以访问它。这个想法是让 Activity 在每次调用 onStop() 时检查布尔标志，如果发现 keepPlaying = false，则暂停播放，否则什么也不做（继续播放）。我在每次 startActivity() 调用之前将标志设置为 true，并在每次 onResume() 调用中将其设置为 false。

如果我正确理解了 Activity 生命周期，则在切换 Activity 时，我的应用程序将首先在当前应用程序上调用 OnStop()。所以首先我将 keepPlaying 设置为 true，然后调用 onStop()。该方法包括三行：

```
super.onStop();
if(GlobalVariables.keepPlaying == false)
    GlobalVariables.mPlayer.pause(); 
```

因此，每当我进行 startActivity 调用时，它*应该会继续播放，但在我最小化应用程序时会暂停播放。*然后，在下一个 Activity 的 onResume() 方法中，我将标志设置为 false：

```
if(GlobalVariables.keepPlaying == true){
    GlobalVariables.keepPlaying = false;
}else{
    GlobalVariables.mPlayer.start(); 
```

但是，该应用程序的行为不符合我的要求。切换活动时它仍然会暂停音频播放。我已经尝试为 keepPlaying 标志创建 getter 和 setter 方法，但这并没有解决它，所以我知道这不是访问问题。

谁能想到这种方法不起作用的任何原因或我该如何解决？

谢谢！

[编辑] 根据要求，这是一个更完整的代码示例。我现在无法访问自己的计算机，但这应该是精确的重新创建。假设所有必要的进口。

```
public class GlobalVariables{

    public boolean keepPlaying;
    public MediaPlayer mPlayer;

    // Getter and setter methods, found to be unnecessary
    public void setKeepPlaying(boolean input){keepPlaying = input;}
    public boolean getKeepPlaying(){return keepPlaying;}
}

// First activity. Music plays after starting Activity, as expected.
public class FirstActivity extends Activity{

    @Override
    public void onCreate(...){
        super.onCreate(...);

        GlobalVariables.keepPlaying = false;
        GlobalVariables.mPlayer.create(this, R.raw.music);
    }

    @Override
    public void onStop(){
        super.onStop();

        // Check to see if we want to stop audio playback
        if(GlobalVariables.keepPlaying == false){
            GlobalVariables.mPlayer.pause();
    }

    @Override
    public void onResume(){
        super.onResume();

        // If audio is already playing, set keepPlaying to false. Otherwise, start audio playback.
        if(GlobalVariables.keepPlaying == true) //Thus audio is playing
            GlobalVariables.keepPlaying = false;
        else
            GlobalVariables.mPlayer.start();
    }

    public void launchNextActivity(){
        GlobalVariables.keepPlaying = true;
        startActivity(new Intent(FirstActivity.this, SecondActivity.class));
    } 
```

}

```
Code for SecondActivity is the same as FirstActivity. When starting SecondActivity, the music abruptly stops. When hiding the app and resuming it, the music begins playing again. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:59:29.963

我想出了一个不涉及服务的解决方案——对于一个简单的小应用程序来说，这非常好。

您需要创建一个公共 int 变量来跟踪要为 MediaPlayer 播放音乐的活动数量，我通过将其放在名为 GlobalVariables 的 .java 文件中来实现：

```
public int activitiesPlaying; 
```

确保将此 int 初始化为 0。在我的例子中，我在主菜单 Activity 中完成了这一步，在它的 onStart() 方法中，返回主菜单会停止音乐。

```
GlobalVariables.activitiesPlaying = 0; 
```

从那时起，只需为每个要播放音乐的 Activity 操作每个 Activity 的 onStart() 和 onStop() 方法。就我而言，音乐应该在 Activity 启动时播放，所以 onStart() 相当简单：

```
public void onStart(){
    super.onStart();

    GlobalVariables.activitiesPlaying++;
    GlobalVariables.mPlayer.start(); // MediaPlayer is stored in GlobalVariables
} 
```

onStop() 类似，但需要检查ActivitiesPlaying 的值。首先，由于 Activity 正在停止，我们减少 activitesPlaying。如果它 <= 0，则暂停音乐播放，并且为了做家务，将 activityPlaying 设置回 0，以防由于某种原因它被设置为负值。这可能不是必需的，而是及时缝合等等。

```
public void onStop(){
    super.onStop();

    GlobalVariables.activitiesPlaying--;

    if(GlobalVariables.activitiesPlaying <= 0){
        GlobalVariables.activitiesPlaying = 0;
        GlobalVariables.mPlayer.pause();
    }
} 
```

由于活动生命周期的顺序，不可能像我上面尝试的那样只使用布尔值，因为它将在下一个活动启动时设置为 true，但在检查之前将设置为 false MediaPlayer 应该继续播放。但是，使用整数值会使这个决定更加灵活，因为只要它大于 0，音乐就会继续播放。

我意识到可以使用服务来实现类似的结果，我鼓励每个研究这个问题的人考虑它。但是考虑到我的编程背景和对定制服务的不熟悉，这个解决方案对我来说最有意义。

# java - 如何在任何其他数据库上的 objectDB 中动态指定表字段名称

> ID：14085780
> 
> 赞同：0
> 
> 时间：2012-12-29T20:47:57.833
> 
> 标签：java, jpa, orm, object-oriented-database, objectdb

我正在`objectdb`使用`jpa2`. 我想让我的用户指定我的实体的字段。我怎么做？

例如，假设我有一个名为的实体`Animal`，并且我希望用户是指定字段名称的人， all `Strings`。我该怎么做？用户可以向我传递一个带有字段名称的 csv 文件，例如`name`, `owner`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:06:01.447

您可以将 Map 用作 Animal 类中的持久字段，将值动态地放入该映射中。

但是，这可能比使用普通持久字段效率低。

或者，您也可以使用特殊库（例如 cglib、ASM、javassist、arch4j）动态生成实体类。

# ruby-on-rails - 如何仅在特定控制器和方法中显示 JavaScript？

> ID：14085781
> 
> 赞同：0
> 
> 时间：2012-12-29T20:48:11.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

我有很多模型。现在我想只向特定的控制器和方法展示 JavaScript。

例如，如果我有这样的代码并且只想在**community/show**中显示它， 我应该将它粘贴到 view/communities/show.html.erb 的头部吗？
还是有更聪明的方法来管理这类事情？显然，如果我把它放在显示文件的头部看起来很丑，因为 JavaScript 总是应该放在**<head>**标记中。

```
<%= javascript_tag do %>
    jQuery(document).ready(function () {
        refreshPartial();
        setInterval(refreshPartial, 5000)
    });

    function refreshPartial() {
      $.ajax({
        url: "<%= community_path %>/refresh_part",
        type: "GET",
        dataType: "script",
      });
    }
<% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T20:56:08.893

**社区.js**

```
jQuery(document).ready(function () {
  refreshPartial();
  setInterval(refreshPartial, 5000)
});

function refreshPartial() {
  $.ajax({
    url: "community/refresh_part",
    type: "GET",
    dataType: "script",
  });
} 
```

**查看/社区/show.html.erb**

```
<%- content_for(:head) do -%>
<%= javascript_include_tag :communities.js -%>
<%- end -%> 
```

**社区布局**

```
<head>
<title>Merry Christmas!</title>
<%= yield(:head) -%>
</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:54:43.173

有几种方法可以做到这一点

1.  你的 show.html.erb 的顶部：

    ```
    <% content_for :javascript_includes do %>
    <%= javascript_include_tag "forms.js" %>   
    <% end %> 
    ```

    也可以参考[这个答案](https://stackoverflow.com/questions/602147/javascript-file-per-view-in-rails)

2.  [你把页面特定的 JavaScript 代码放在哪里，](https://stackoverflow.com/questions/6167805/using-rails-3-1-where-do-you-put-your-page-specific-javascript-code?lq=1) 看看[Asset Pipeline 是如何工作的](http://guides.rubyonrails.org/asset_pipeline.html)

# c# - 为什么这个递归不会产生 StackOverFlowException？

> ID：14085783
> 
> 赞同：10
> 
> 时间：2012-12-29T20:48:24.320
> 
> 标签：c#, .net, recursion, stack-overflow, csc

这段代码有什么问题：

```
using System;
namespace app1
{
    static class Program
    {
        static int x = 0;
        static void Main()
        {
            fn1();
        }
        static void fn1()
        {
            Console.WriteLine(x++);
            fn1();
        }
    }
} 
```

我使用以下命令编译这段代码：

```
csc /warn:0 /out:app4noex.exe app4.cs 
```

当我双击 exe 时，它​​似乎没有抛出异常（StackOverFlowException），并且永远运行。

使用visual studio命令提示符2010，但我在系统上也安装了vs 2012，都是最新的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-29T20:51:15.410

因为优化器将尾递归调用展开为：

```
 static void fn1()
    {
      START:

        Console.WriteLine(x++);
        GOTO START;
    } 
```

重写以获得如下异常：

```
 static int y;

   static void fn1()
   {
       Console.WriteLine(x++);
       fn1();
       Console.WriteLine(y++);
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T21:07:05.577

x64 抖动将其检测为尾调用并将其优化掉，而 x86 抖动则不这样做。x64 抖动对这些优化更具侵略性。请参阅 Bart de Smet 的[分析](http://community.bartdesmet.net/blogs/bart/archive/2010/07/07/the-case-of-the-failed-demo-stackoverflowexception-on-x64.aspx)和 CLR 团队的[博客文章](http://blogs.msdn.com/b/clrcodegeneration/archive/2009/05/11/tail-call-improvements-in-net-framework-4.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T21:12:54.723

有一种东西叫做[尾递归优化](http://en.wikipedia.org/wiki/Tail_call)。

从堆栈的角度来看，基本上它意味着如果一个方法做的最后一件事是调用另一个方法，那么新的调用可以获取调用方法的堆栈帧。例如在：

```
static void Main()
{
  fn(0);
}

static void fn(int value)
{
   fn(value+1);
} 
```

而不是调用堆栈变得`Main->fn(0)->fn(1)->...`令人作呕，它将恰好有两个链接长，第一个`Main->fn(0)`比`Main->fn(1)`，直到`Main->fn(int.MaxValue)`它会爆炸或溢出的地方。

现在，问题是，C# 编译器真的这样做了吗？
AFAIK，使用 4.0 和更高版本的 C# 编译器，在 x86 环境中编译时，它**不**使用尾调用优化，而在编译 x64 应用程序时，它**确实**使用尾调用优化（显然，从其他评论/答案我'是正确的）。例如，在我的系统上，使用 LINQPad，您提供的代码会立即以`StackOverflowException`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-29T21:10:59.173

当程序在 Visual Studio 环境中运行时，它将使用有限的堆栈深度。我的意思是，当您在 VS2012 中通过按键盘上的 F5 和 F6 来编译程序时，它会向 csc.exe 程序发送一些参数以限制程序并导致堆栈溢出来了解您程序中的错误源代码和算法。实际上，没有 Stack-over-flow 错误，程序的进程将使用真实存储和虚拟存储，操作系统会为您完成。

注意：这也和你的操作系统有关，有些操作系统在内存管理和cpu调度方面的弱点会报错。

# vb.net - VB.NET 类或模块的用途是什么？

> ID：14085784
> 
> 赞同：7
> 
> 时间：2012-12-29T20:48:53.590
> 
> 标签：vb.net

新手酱在这里...所以，我试图找到答案但找不到。

拥有一个类或模块的目的是什么？我阅读的所有内容都试图告诉我它是什么，而不是它的用途。为什么我需要做一个？

我阅读的所有内容似乎都对阅读教程的人做出了假设，好像我知道很多。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-29T22:38:44.043

一个模块非常类似于只包含共享成员的类。事实上，在 C# 中，没有“模块”这样的结构。如果没有至少一个模块或类，您就无法编写任何应用程序，所以我怀疑您真正的问题不是“为什么使用类和模块”，而是“为什么使用多个类和模块以及何时开始一个新的” . 由于模块和类本质上是相同的，我将只关注为什么你会有多个类。创建一个新类基本上有四个主要原因：

1.  将数据存储在谨慎的项目中
2.  组织你的代码
3.  在代码中提供接缝
4.  将您的代码划分为层并支持 n 层

现在，让我们更详细地看一下每一个：

## 将数据存储在谨慎的项目中

通常，您需要存储有关单个项目的多个数据，并将该数据作为单个对象在方法之间传递。例如，如果您编写一个与某人一起工作的应用程序，您可能希望存储有关此人的多个数据，例如他们的姓名、年龄和头衔。您显然可以将这三个数据存储为三个单独的变量，并将它们作为单独的参数传递给方法，例如：

```
Public Sub DisplayPerson(name As String, age As Integer, title As String)
    Label1.Text = name
    Label2.Text = age.ToString()
    Label3.Text = title
End Sub 
```

但是，将所有数据作为单个对象传递通常更方便，例如，您可以创建一个`MyPersonClass`，如下所示：

```
Public Class MyPersonClass
   Public Name As String
   Public Age As Integer
   Public Title As String
End Class 
```

然后你可以在一个参数中传递一个人的所有数据，像这样：

```
Public Sub DisplayPerson(person As MyPersonClass)
    Label1.Text = person.Name
    Label2.Text = person.Age.ToString()
    Label3.Text = person.Title
End Sub 
```

通过这种方式，将来修改您的人会变得更加容易。例如，如果您需要为人员添加存储技能的功能，并且您没有将人员数据放在类中，则您必须前往代码中传递人员数据的每个地方并添加附加参数. 在一个大型项目中，可能很难找到所有这些地方来修复，这可能会导致错误。但是，当您开始需要存储多人列表时，对类的需求变得更加明显。例如，如果您需要为 10 个不同的人存储数据，则需要一个变量列表或数组，例如：

```
Dim names(9) As String
Dim ages(9) As Integer
Dim titles(9) As String 
```

当然，一点也不明显，`names(3)`两者`age(3)`都为同一个人存储数据。这是您必须知道的，或者您必须将其写在评论中，这样您就不会忘记。然而，当你有一个类来存储一个人的所有数据时，这会更干净、更容易：

```
Dim persons(9) As Person 
```

现在，很明显，`persons(3).Name`两者`persons(3).Age`都是同一个人的数据。这样，它是自我记录的。不需要评论来澄清你的逻辑。结果，再次，代码将不太容易出错。

通常，类不仅包含特定项目的数据，还包含作用于该数据的方法。这是一种方便的机制。例如，您可能希望向`GetDesciption`person 类添加一个方法，例如：

```
Public Class MyPersonClass
   Public Name As String
   Public Age As Integer
   Public Title As String

   Public Function GetDescription() As String
       Return Title & " " & Name
   End Function
End Class 
```

然后你可以像这样使用它：

```
For Each person As MyPersonClass In persons
    MessageBox.Show("Hello " & person.GetDescription())
Next 
```

我相信你会同意，这比做这样的事情更干净、更容易：

```
For i As Integer = 0 To 9
    MessageBox.Show("Hello " & GetPersonDescription(title(i), names(i)))
Next 
```

现在假设您要为每个人存储多个昵称。如您所见，`persons(3).Nicknames(0)`它远比一些疯狂的二维数组简单得多，例如`nicknames(3)(0)`. 如果您需要存储有关每个昵称的多个数据会怎样？如您所见，不使用类会很快变得一团糟。

## 组织你的代码

当您编写一个冗长的程序时，如果您没有正确组织代码，它很快就会变得非常混乱并导致代码非常错误。在与意大利面条代码的战斗中，您拥有的最重要的武器是创建更多类。理想情况下，每个类将仅包含逻辑上彼此直接相关的方法。每种新类型的功能都应该分解为一个新的命名类。在一个大型项目中，这些类应该被进一步组织成单独的命名空间，但如果你至少不将它们分成类，那你真的会搞得一团糟。例如，假设您将以下方法全部放入同一个模块中：

*   `GetPersonDescription`
*   `GetProductDescription`
*   `FirePerson`
*   `SellProduct`

我相信您会同意，如果将这些方法分解为单独的类，则遵循代码会容易得多，例如：

*   `Person`
    *   `GetDescription`
    *   `Fire`
*   `Product`
    *   `GetDescription`
    *   `Sell`

这只是一个非常非常简单的例子。当你有成千上万的方法和变量处理许多不同的项目和不同类型的项目时，我相信你可以很容易地想象为什么类对于帮助组织和自我记录代码很重要。

## 在代码中提供接缝

这个可能更高级一些，但它非常重要，所以我将尝试用简单的术语来解释它。假设您创建了一个将日志条目写入跟踪日志文件的跟踪记录器类。例如：

```
Public Class TraceLogger
    Public Sub LogEntry(text As String)
        ' Append the time-stamp to the text
        ' Write the text to the file
    End Sub
End Class 
```

现在，假设您希望记录器类能够写入文件或数据库。此时很明显，将日志条目写入文件实际上是一种单独的逻辑类型，应该一直在其自己的类中，因此您可以将其分解为单独的类，如下所示：

```
Public Class TextFileLogWriter
    Public Sub WriteEntry(text As String)
        ' Write to file
    End Sub
End Class 
```

现在，您可以创建一个通用接口并在两个不同的类之间共享它。这两个类都将处理写入日志条目，但它们各自将以完全不同的方式执行功能：

```
Public Interface ILogWriter
    Sub WriteEntry(text As String)
End Interface

Public Class TextFileLogWriter
    Implements ILogWriter

    Public Sub WriteEntry(text As String) Implements ILogWriter.WriteEntry
        ' Write to file
    End Sub
End Class

Public Class DatabaseLogWriter
    Implements ILogWriter

    Public Sub WriteEntry(text As String) Implements ILogWriter.WriteEntry
        ' Write to database
    End Sub
End Class 
```

现在，您已经将该数据访问逻辑分解为它自己的类，您可以像这样重构您的记录器类：

```
Public Class TraceLogger
    Public Sub New(writer As ILogWriter)
        _writer = writer
    End Sub

    Private _writer As ILogWriter

    Public Sub LogEntry(text As String)
        ' Append the time-stamp to the text
        _writer.WriteEntry(text)
    End Sub
End Class 
```

现在，您可以在更多情况下重用`TraceLogger`该类，而无需接触该类。例如，您可以给它一个`ILogWriter`将条目写入 Windows 事件日志、电子表格甚至电子邮件的对象——所有这些都无需接触原始`TraceLogger`类。这是可能的，因为您已经在条目的格式和条目的写入之间创建了逻辑 *接缝。*

格式并不关心如何记录条目。它只关心如何格式化条目。当它需要写入和输入时，它只需要一个单独的 writer 对象来完成这部分工作。该作家在内部实际上如何以及做什么是无关紧要的。同样，作者并不关心条目的格式，它只希望传递给它的任何内容都是需要记录的已经格式化的有效条目。

您可能已经注意到，现在不仅可以`TraceLogger`重用写入任何类型的日志，而且写入器可重用用于将任何类型的日志写入这些类型的日志。例如，您可以重复使用`DatabaseLogWriter`来编写跟踪日志和异常日志。

**关于依赖注入的一点抱怨**

稍微幽默一下，因为我对一些对我很重要的事情进行了咆哮，使这个答案变得更长一点......在最后一个示例中，我使用了一种称为依赖注入（DI）的技术。之所以称为依赖注入，是因为 writer 对象是 logger 类的*依赖*项，并且该依赖项对象通过构造函数注入到 logger 类中。您可以通过执行以下操作来完成类似的操作，而无需依赖注入：

```
Public Class TraceLogger
    Public Sub New(mode As LoggerModeEnum)
        If mode = LoggerModeEnum.TextFile Then
            _writer = New TextFileLogWriter() 
        Else
            _writer = New DatabaseLogWriter() 
        End If
    End Sub

    Private _writer As ILogWriter

    Public Sub LogEntry(text As String)
        ' Append the time-stamp to the text
        _writer.WriteEntry(text)
    End Sub
End Class 
```

但是，如您所见，如果您这样做，现在您需要在每次创建新类型的编写器时修改该记录器类。然后，仅仅为了创建一个记录器，你必须引用每种不同类型的编写器。当您以这种方式编写代码时，很快，每当您包含一个类时，您突然不得不引用整个世界来完成一项简单的任务。

依赖注入方法的另一种替代方法是使用继承来创建多个`TraceLogger`类，每种类型的编写器一个：

```
Public MustInherit Class TraceLogger
    Public Sub New()
        _writer = NewLogWriter() 
    End Sub

    Private _writer As ILogWriter

    Protected MustOverride Sub NewLogWriter()

    Public Sub LogEntry(text As String)
        ' Append the time-stamp to the text
        _writer.WriteEntry(text)
    End Sub
End Class

Public Class TextFileTraceLogger
    Inherits TraceLogger

    Protected Overrides Sub NewLogWriter()
        _Return New TextFileLogWriter() 
    End Sub
End Class

Public Class DatabaseTraceLogger
    Inherits TraceLogger

    Protected Overrides Sub NewLogWriter()
        _Return New DatabaseLogWriter() 
    End Sub
End Class 
```

像这样使用继承比模式枚举方法更好，因为您不必引用所有数据库逻辑来记录到文本文件，但是，在我看来，依赖注入更干净、更灵活.

**回到逻辑接缝总结**

因此，总而言之，逻辑中的接缝对于代码的可重用性、灵活性和可互换性很重要。在小型项目中，这些事情并不是最重要的，但随着项目的发展，清晰的接缝可能变得至关重要。

创建接缝的另一大好处是它使代码更加稳定和可测试。一旦你知道它的`TraceLogger`工作原理，能够扩展它以供将来使用，例如将日志写入电子表格，而无需接触实际的`TraceLogger`类，这是一个很大的优势。如果您不必接触它，那么您就不会冒险引入新的错误并可能损害已经使用它的其余代码。此外，单独测试每段代码变得容易得多。例如，如果你想测试这个`TraceLogger`类，你可以为了你的测试，让它使用一个伪造的 writer 对象，它只记录到内存、控制台或其他东西。

## 将您的代码划分为层并支持 N 层

一旦你将你的代码正确地组织成单独的类，每个类只负责一种类型的任务，那么你就可以开始将你的类组合成*层*。层只是代码的高级组织。语言中没有什么特定的东西可以在技术上使某些东西成为一个层。由于语言中没有直接说明每一层的开始和结束位置，因此人们通常会将每一层的所有类放入单独的名称空间中。因此，例如，您可能有如下所示的命名空间（其中每个命名空间都是一个单独的层）：

*   `MyProduct.Presentation`
*   `MyProduct.Business`
*   `MyProduct.DataAccess`

通常，您总是希望代码中至少有两层：表示或用户界面层和业务逻辑层。如果您的应用程序进行任何数据访问，则通常也将其放在它自己的层中。每一层都应该尽可能地独立和可互换。因此，例如，如果`TraceLogger`上面示例中的类位于业务层中，则它应该可以被任何类型的 UI 重用。

层通过提供进一步的组织、自文档、可重用性和稳定性来扩展所有先前的主题。但是，层的另一个主要好处是将应用程序拆分为多个层变得容易得多。例如，如果您需要将业务和数据访问逻辑移动到 Web 服务中，如果您已经将代码干净地写入定义的层，那么这样做将非常简单。但是，如果所有这些逻辑都是混合和相互依赖的，那么尝试将数据访问和业务逻辑分解到一个单独的项目中将是一场噩梦。

## 我要说的结束

简而言之，您永远*不需要*创建多个类或模块。总是可以*在*单个类或模块中编写整个应用程序。毕竟，甚至在面向对象语言发明之前，就已经开发了整个操作系统和软件套件。但是，面向对象编程 (OOP) 语言如此受欢迎是有原因的。对于许多项目，面向对象是非常有益的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T20:54:16.660

类是封装状态（数据）和行为（方法）的机制。

如果你想在你的代码中有任何类型的抽象，你需要使用类——组织你的代码以供使用的方法。

没有它们意味着你的代码到处都是，它会退化成难以改变和维护的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T22:11:47.443

计算机程序可以采用的最基本形式称为**过程**：您编写指令列表（代码行）供计算机执行，然后程序退出。

然而，许多计算机程序旨在独立于每次需要时单击“运行”来运行。*重用*代码的概念是大多数关于编写软件的讨论的核心。**模块**允许您将代码存储在容器中并在程序的其他部分中引用它。

类是面向对象编程中更通用**的**概念，它允许您定义一个“事物”，然后在程序运行时多次创建它。

假设您想在 Visual Basic 中创建一个虚拟宠物游戏。您允许用户根据需要添加任意数量的不同动物，并且您开始意识到跟踪这一点非常复杂。通过使用类，这变得非常容易......

```
Class PetDog
   Private _id As Integer
   Public Name As String
   Public Breed As String

   Public Sub Bark()
      Console.WriteLine(Name + " says Woof!")
   End Sub

End Class 
```

一旦您编写了此代码，允许用户将另一只狗添加到他们的宠物动物园就变得如此简单：

```
Dim Dog1 As New PetDog()
Dim Dog2 As New PetDog() 
```

*现在，您可以彼此独立地*与 Dog1 和 Dog2 交互，尽管在您的代码中只定义了一次。

```
Dog1.Name = "Fido"
Dog2.Breed = "Poodle"
Dog1.Bark() 
```

上面的代码片段会打印出“Fido says Woof!”。

希望有帮助:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T21:40:58.847

类、表单和代码——“模块”是 VB 中的所有模块类型。

**模块**只是代码的命名容器，所有代码都必须在某种模块中。在最简单的情况下，它们是将您的日常活动组织成有意义的组的一种方式。

最基本的，所谓的“模块”（或“代码模块”，因为它们曾经被称为将它们与更一般的模块概念区分开来）提供的只是这些，加上一种声明存在于任何外部的变量的方法单个例程并且在您退出例程时不会消失，并且是关联哪些代码/模块在哪些源文件中的一种简单方法。

**类**是一种更强大的 Module(*) 类型，可以“实例化”，这意味着您可以将它们视为数据类型，创建具有不同值/内容的它们的多个副本，将它们分配给变量，传递它们往返函数和其他方法等。这些副本或“实例”通常称为“对象”。

**表单**只是一种特殊类型的类，它自动神奇地与可视组件和控件集成，以帮助您制作图形用户界面。

(* -- 请注意，今天这是相反的方式：类是一般概念，VB 代码模块只是一个非常有限的专业类，称为“单例”。但无论是在历史上还是在 Basic 的传统中，它都是模块早于类。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-29T21:16:28.717

如果您要创建自定义类型，然后创建该类型的对象 - 使用类。

如果您正在处理其他人的类 - 并且需要实现一些快速而肮脏的功能来增强它们 - 使用模块。

C# 开发人员现在可能会脸色难看，因为您将使用共享类的共享方法而不是 C# 中的模块，最终因为 C# 没有模块。因此，您将在 C# 中的两种情况下都使用类。你应该在 VB.NET 中做同样的事情，真的。它为您提供命名空间分离问题​​，因此您的智能感知更有条理。使用模块，所有模块中的所有公共方法*都*在全局方法桶中 - 需要处理更多混乱。

VB.NET 中模块的唯一用途是编写扩展方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T00:45:36.267

听起来您熟悉某种级别的脚本，但不一定熟悉面向对象的编程。

使用类或模块（它们都是对象）的原因很像函数允许重用代码，对象允许重用。

除了可重用性之外，它们还具有可以包含数据（属性）和函数的优点。例如，Person 类可以具有姓名、生日等属性，以及计算年龄的方法。

这样，每次您有一个新人时，您都会创建该人的一个新实例，并且很容易计算他们的年龄（基于他们的生日和当前日期）。

或者，您可以通过编写一个计算年龄的函数并为每个人创建一个数组，然后通过传递年龄数组来调用您的计算年龄函数来类似地执行所有这些操作，但是您不会具有相同级别的可重用性.

要找到有用的文章，您可以在 Google 上搜索面向对象编程的介绍。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-29T03:14:05.557

简而言之，对我来说编程中的 Class 或 Module 用于在加载时不给太多脚本提供形式。所以我们需要将它们简化为类和模块。

# css-float - 为什么左浮动块元素不能浮动到他之前的兄弟块元素的左侧

> ID：14085786
> 
> 赞同：0
> 
> 时间：2012-12-29T20:49:16.073
> 
> 标签：css-float

如果在保留浮动样式的块元素之前有一个内联元素。块元素将水平浮动到内联元素的左侧。

如果在保留浮动样式的块元素之前有块元素。浮动块元素将垂直位于第一个块元素之后。

为什么浮动块元素不能水平浮动到第一个块元素的左侧？css 规范中是否有任何规则要求浏览器遵循这种行为？谢谢！

对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:22:09.310

块级元素和内联元素对它们周围的浮动元素的反应不同。内联元素环绕浮动元素，例如 Word 中图像周围的文本。

块级元素占用空间，因此块级元素之后的浮动元素将在前一个元素结束的点开始浮动。

在元素周围使用边框有助于了解发生了什么：http: [//jsfiddle.net/B9FVg/](http://jsfiddle.net/B9FVg/)

**HTML**

```
<span>I am inline!</span>
<div class="floating">I'm floating left</div>

<div>I am block!</div>
<div class="floating">I'm floating left</div> 
```

**CSS**

```
div{
    padding:20px;
    border:1px solid #000;
}

.floating{
    float:left;
} 
```

# css - 表头问题内带有输入的引导下拉菜单

> ID：14085790
> 
> 赞同：1
> 
> 时间：2012-12-29T20:49:57.143
> 
> 标签：css, twitter-bootstrap, html-table

我希望`<th></th>`我的表格中的一个成为单击时显示下拉列表的链接。我还想要一个输入字段，在同一个下拉列表的右侧放置一个过滤器按钮。

```
 <th>
                    <div class="dropdown inline-dropdown input-dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <span>Name</span>
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu input-dropdown-menu">
                            <li>
                                <input class="pull-left input-first" type="text"/>
                                <button type="submit" class="btn">Filter</button>
                            </li>
                        </ul>
                    </div>
                </th> 
```

请参阅我的小提琴以获得更多说明。

旧：http: ~~[//jsfiddle.net/qeT6T/19/](http://jsfiddle.net/qeT6T/19/)~~

更新：http: [//jsfiddle.net/qeT6T/47/](http://jsfiddle.net/qeT6T/47/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T22:54:21.657

对于整体解决方案来说，这可能太快太脏了，但是如何将其添加到您的 css 中：

```
.table .input-append {
   width: 300px;
} 
```

这里的例子：http:
[//jsfiddle.net/VeMBq/1/](http://jsfiddle.net/VeMBq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T22:55:35.697

放在`white-space: nowrap`下拉列表中`li`：

```
.dropdown-menu li {
    white-space: nowrap;
} 
```

[http://jsfiddle.net/userdude/qeT6T/55/](http://jsfiddle.net/userdude/qeT6T/55/)

# ruby-on-rails - 在 Rails 模板中渲染 youtube 嵌入代码

> ID：14085791
> 
> 赞同：0
> 
> 时间：2012-12-29T20:50:03.220
> 
> 标签：ruby-on-rails, iframe, html-parsing

我正在尝试将 youtube 嵌入到 Rails 视图中

在控制器中我有

```
@embed_code = '<iframe width="480" height="270" src="https://www.youtube.com/embed/#{video_id}?frameborder="0"allowfullscreen"></iframe>' 
```

我无法找到一种方法将其写入视图有效转义并使 html 安全并将其显示为`<%= @embed_code.html_safe %>`

如果有人可以提供一些建议，我将不胜感激，我已经绕着圈子走了，在这个阶段很困惑。据我所知，这是导致问题的参数周围的第二个引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T20:59:04.183

控制器：

```
@embed_code = %Q{<iframe.....#{video_id}..>...</iframe>}.html_safe
# or
@embed_code = ActiveSupport::SafeBuffer.new(%Q{<iframe.....#{video_id}..>...</iframe>}) 
```

看法：

```
<%= @embed_code %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T09:08:09.697

我想`sanitize`也许你想要什么

```
%= sanitize @article.body %>

def sanitize(html, options = {})
  self.class.white_list_sanitizer.sanitize(html, options).try(:html_safe)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:51:36.923

利用

```
<%= raw @embed_code %> 
```

帮助器[`raw`](http://api.rubyonrails.org/classes/ActionView/Helpers/OutputSafetyHelper.html#method-i-raw)阻止 Rails 自动转义视图中的 html 代码。

# php - 用于更改 url 结构的基本 php 正则表达式帮助

> ID：14085793
> 
> 赞同：0
> 
> 时间：2012-12-29T20:50:11.333
> 
> 标签：php, regex

我有一个形式的图像：

[http://sub-domain.example.net/random-folder-here/4422414324235_4234234.jpg](http://sub-domain.example.net/random-folder-here/4422414324235_4234234.jpg)

我想像这样在 url 中间添加一个文件夹（添加了 s720x720）

[http://sub-domain.example.net/random-folder-here/s720x720/4422414324235_4234234.jpg](http://sub-domain.example.net/random-folder-here/s720x720/4422414324235_4234234.jpg)

如何在 php 中运行正则表达式调用来帮助我做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:52:07.737

```
preg_replace('![^/]+$!', 's720x720/$0', $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T22:06:23.537

您想在*dirname*和*basename*`s720x720`之间添加（如果将 URL 作为路径）。PHP 有一个函数可以在此处分开 URI（请参阅 参考资料）：**[`pathinfo`](http://php.net/pathinfo)**

 **```
$url = 'http://sub-domain.example.net/random-folder-here/4422414324235_4234234.jpg';
vprintf("%s/s720x720/%s", pathinfo($url)); 
```

输出：

```
http://sub-domain.example.net/random-folder-here/s720x720/4422414324235_4234234.jpg 
```

我希望这有帮助。并不总是需要使用正则表达式。其他功能可能更合适。**

# ruby-on-rails - Rails - 支持为多个模型创建草稿的好方法

> ID：14085798
> 
> 赞同：3
> 
> 时间：2012-12-29T20:50:46.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我想允许用户创建多个模型的草稿（例如文章、博客文章等）。我正在考虑通过为我当前的每个模型（例如 articleDraft、blogpostDraft 等）创建一个草稿模型来实现这一点。有一个更好的方法吗？为每个应该支持草稿的现有模型创建一个新模型似乎很麻烦，而且工作量很大。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T20:57:24.713

我认为更好的是在表中添加一个标志（例如：称为草稿的 int 列），以识别记录是否为草稿。

如我所见，拥有这样一个没有单独表格的列的优点：

1.  使您的记录不草稿很容易（只需更改标志）

2.  您不会重复数据（因为实际上您在草稿和非草稿记录中将拥有相同的数据）

3.  编码将很容易，无需复杂的登录

4.  所有数据都将在一个地方，因此出错的空间更小

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-22T20:04:26.517

我一直在研究[Draftsman](https://github.com/liveeditor/draftsman)，这是一个 Ruby gem，用于创建 ActiveRecord 数据的草稿状态。

`drafts`Draftsman 的默认方法是通过多态关系将所有草稿模型的草稿数据存储在单个表中。它将对象状态作为 JSON 存储在`object`列中，并可选择将表示更改的 JSON 数据存储在`object_changes`列中。

Draftsman 允许您根据需要为每个模型（例如 、 ）创建单独的草图`article_drafts`模型`blog_post_drafts`。我同意这种方法相当麻烦且容易出错。

将草稿数据拆分为单独的模型（或仅`draft`在主表上使用布尔标志，根据 sameera207 的回答）的真正优势在于，您最终不会得到一个`drafts`包含大量记录的巨大表。我会提出，只有当您的应用程序有大量使用时，这才会成为一个真正的问题。

综上所述，我的最终建议是将所有草稿数据存储在主模型 ( `blog`) 或单个`drafts`表中，然后如果您的应用程序需要扩展，则根据需要分开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-29T20:58:32.920

查看 The Ruby Toolbox 中的[Active Record 版本控制](https://www.ruby-toolbox.com/categories/Active_Record_Versioning)类别。目前的领导者是[Paper Trail](https://github.com/airblade/paper_trail)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T00:23:13.417

我会沿着状态机路线走。您可以仅在模型处于特定状态时验证每个属性。比多个复选框容易得多，并且每个状态更改都可以有一个操作（或多个操作）与之关联。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-04T09:07:04.273

在模型中有一个标志有一些缺点：

*   除非数据有效，否则不能另存为草稿。当然，您可以跳过 Rails 模型中的验证，但请考虑数据库中定义的“NOT NULL”列

*   要查找“真实”记录，您必须使用过滤器（例如“WHERE draft = FALSE”）。这会降低查询性能。

作为替代方案，请查看我的 gem [drafting](https://github.com/ledermann/drafting)。它将不同模型的草稿存储在单独的表中。

# php - 将登录详细信息从 php/mysql 迁移到 asp/sqlserver

> ID：14085799
> 
> 赞同：0
> 
> 时间：2012-12-29T20:50:47.207
> 
> 标签：php, asp.net, mysql, data-migration, login-control

我有一个 php 网站，我已将所有页面转换为 .aspx，但该网站有登录/注册页面。

我想知道如何将已经存在的登录详细信息传输到 sql server 表，因为密码在 mysql 表中被散列（加扰）？

我计划在 asp.net 中使用登录控件，在登录/注册页面上进行基于表单的身份验证。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:03:24.343

在 ASP 中实现与在 PHP 中相同的逻辑，无论您使用哪种语言，散列都是散列。

# android - 对日历中无限重复的事件进行建模？

> ID：14085800
> 
> 赞同：0
> 
> 时间：2012-12-29T20:50:49.413
> 
> 标签：android, calendar

我想创建一个自己的日历源（不是自己的日历应用程序，只是一个应用程序在添加到 CalendarContract.Calendars 的新日历中填充一些数据），其中包含每年一次的重复事件，但是不会在同一天重复发生，让我们举`eastern`个例子吧！

现在我怎么能模拟东部的无限时间跨度？（计算它不是问题，也不是我的问题）

我可以将它插入到我的日历中未来 10 年，但随后可能有用户跳转到 2100 年并抱怨我的日历没有报告那一年的东部 - 如何解决这个问题？

*   我必须在接下来的 1000 年中插入东方吗？
*   android系统是否通过一些回调向日历源发出某种请求，告诉我用户当前正在寻找哪个月份和年份，这样我就可以检查那一年的东部是否是用户当前正在查看的月份然后我在飞行中为东部添加一个条目？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T20:16:36.437

您可以创建一个重复事件，频率为一年，没有到期。（[https://developer.android.com/guide/topics/providers/calendar-provider.html#add-event](https://developer.android.com/guide/topics/providers/calendar-provider.html#add-event)）

要检查特定日期是否会发生此事件，您可以使用 Instances 表 ( [https://developer.android.com/guide/topics/providers/calendar-provider.html#instances](https://developer.android.com/guide/topics/providers/calendar-provider.html#instances) ) 来查询特定事件是否发生在一个时间段。

# c++ - 什么是“快照”功能？

> ID：14085807
> 
> 赞同：1
> 
> 时间：2012-12-29T20:51:33.040
> 
> 标签：c++, windows, header, comments

我的英语不太好。我在 tlhelp32.h 1.0 版中看到了这一点：

```
/****** Shapshot function **********************************************/

HANDLE
WINAPI
CreateToolhelp32Snapshot(
    DWORD dwFlags,
    DWORD th32ProcessID
    ); 
```

LN31。这是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T20:55:07.877

这意味着它将创建系统中*进程的**快照*。*快照*是某物在给定时间点的状态。创建*快照*后，可能会启动新进程或结束旧进程，但这些更改不会反映在*快照*中。

 *****更新：**我什至没有注意到错字，应该`snapshot`不是`shapshot`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T21:56:30.220

CreateToolhelp32Snapshot() 是一个帮助您迭代所有正在运行的进程的函数。或者进程使用的资源。就像进程加载的所有 DLL 一样。或者进程使用的线程。等等。

一般来说，这是一个危险的操作。因为进程继续执行并且可能加载或卸载 DLL 或启动或结束线程，*而*您正在迭代它们。这通常不会有好的结果，当先前迭代的资源不再存在时，很难要求“给我下一个”。

因此，CreateToolhelp32Snapshot() 所做的是非常简单地暂停进程并复制有关进程使用的资源的所有信息。所以当它返回时，您可以安全地调用 Module32First/Next 和 Thread32First/Next 来迭代*复制*的信息。它创建进程状态的**快照**。就像一张照片，一个凝固的瞬间。顺便说一句，它获取进程状态的原子副本的确切方式没有记录。

请注意，您获得的信息总是过时的，这是不可避免的。请注意 dwFlags 参数，它可以让您请求要迭代的特定资源。这有助于它更快地制作快照并消耗更少的内存。***

# iphone - arc4random 抛出大量数字

> ID：14085816
> 
> 赞同：2
> 
> 时间：2012-12-29T20:52:20.383
> 
> 标签：iphone, objective-c, cocos2d-iphone, arc4random

在 cocos2d 游戏中，我使用 arc4random 生成随机数，如下所示：

```
 float x = (arc4random()%10 - 5)*delta; 
```

（delta 是计划更新方法中更新之间的时间）

```
 NSLog(@"x: %f", x); 
```

我一直在检查它们。

我得到的大多数数字是这样的：

```
 2012-12-29 15:37:18.206 Jumpy[1924:907] x: 0.033444 
```

或者

```
 2012-12-29 15:37:18.247 Jumpy[1924:907] x: 0.033369 
```

但出于某种原因，我有时会得到这样的数字：

```
 2012-12-29 15:37:18.244 Jumpy[1924:907] x: 71658664.000000 
```

编辑：三角洲几乎总是：

```
 2012-12-29 17:01:26.612 Jumpy[2059:907] delta: 0.016590 
```

我认为它应该返回 -5 到 5 范围内的数字（乘以一些小数字）。为什么我会收到这样的数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T22:18:35.373

[`arc4random`返回一个`u_int32_t`。](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/arc4random.3.html) 该`u_`部分告诉您它是未签名的。所以括号内的所有运算符都使用无符号算术。

如果您`2 - 5`使用无符号 32 位算术执行减法运算，您将得到 2 ^(32) + 2 - 5 = 2 ^(32) - 3 = 4294967293（一个“巨大的数字”）。

在执行减法之前转换为有符号类型。`arc4random_uniform`此外，如果您的部署目标是 iOS 4.3 或更高版本，则更可取：

```
float x = ((int)arc4random_uniform(10) - 5) * delta; 
```

如果希望范围包括 -5 和 5，则需要使用 11 而不是 10，因为范围 [-5,5]（含）包含 11 个元素：

```
float x = ((int)arc4random_uniform(11) - 5) * delta; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T22:19:43.870

`arc4random`返回 a `u_int32_t`，一个无符号类型。模数也是使用无符号算术执行的，它产生一个介于 0 和 9 之间的数字，正如预期的那样（顺便说一句，不要这样做；`arc4random_uniform`改用）。然后减去 5，它被解释为一个**无符号**值，由于下溢而产生一个可能很大的正值。

解决方案是通过将 5 存储在带符号类型的变量或带有后缀（如`5L`）的变量中来显式键入 5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T20:54:40.000

看起来`arc4random % 10`变得小于`5`，稍后您将使用负整数。

的价值是`delta`多少？

# c# - Windows Phone 8 中的自定义字体使用

> ID：14085818
> 
> 赞同：5
> 
> 时间：2012-12-29T20:52:30.867
> 
> 标签：c#, fonts, windows-phone-8

我对 Windows Phone 8 模拟器有一个奇怪的问题！我有一个小型测试应用程序，我在其中更改主页上的“页面名称”文本框，以便它使用自定义字体显示。现在在视觉工作室设计器中，我看到了该字体，并且在运行应用程序时，我也在模拟器中看到了它，所以一切都很好......

但是，当我将主页移动到名为 View 的文件夹中并更改 WMAppManifest.xml 以反映此移动时 > 导航页面现在设置为 View/MainPage.xaml。我仍然在我的设计师中看到这种自定义字体，但在模拟器中不再看到了！！

我还没有 wp8 设备......所以任何人都可以为我验证这一点，如果当您尝试将故障项目部署到手机时这个问题是相同的？

有没有人知道为什么会这样？非常烦人无法在模拟器中看到正确的设计。

[工作和失败的项目](https://skydrive.live.com/redir?resid=5DD87D96B9334A59!3928)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-29T21:31:40.247

好的，我自己找到了解决方案......这是因为对 styles.xaml 中的字体的引用。

它应该是一个完整的路径！因此，而不是设置：

```
<Setter Property="FontFamily" Value="Fonts/ClementePDae-Light.ttf#ClementePDae" /> 
```

设置这个：

```
<Setter Property="FontFamily" Value="/PhoneApp1;component/Fonts/ClementePDae-Light.ttf#ClementePDae" /> 
```

比一切正常！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T06:30:43.890

我希望你已经找到了解决方案。请查看[如何添加自定义字体](http://www.reflectionit.nl/Blog/2012/windows-8-xaml-tips-custom-fonts)

这在 Windows Phone 8 (Lumia 920) 上对我
有用。在 .ttf 之后为字体名称添加标签非常重要
如果您在 PC 上预览 ttf 文件并编写完全相同的字体名称，您可以找到字体名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T12:49:19.013

首先，您应该将外部 ttf 保存到您的项目中（如果您想使用外部字体）。

然后，你可以使用这个：

```
FontFamily="Helvetica.ttf#Helvetica"

FontFamily="Cookies.ttf#Cookies" 
```

当 .ttf 字体文件位于根文件夹中时，在设计和运行时工作正常。

```
FontFamily="/FontsTestApp;component/Cookies.ttf#Cookies" 
```

和上面一样。

```
FontFamily="/Font/Cookies.ttf#Cookies 
```

当 .ttf 字体文件位于子文件夹“font”中时。在设计和运行时工作正常。

```
FontFamily="../Fonts/Cookies.ttf#Cookies"; 
```

当使用该字体的 XAML 文件位于另一个子文件夹中时。在设计和运行时工作正常。

```
FontFamily="../Fonts/Cookies.ttf#Cookies"; 
```

如果 XAML 文件位于根文件夹中，则字体仅在运行时应用，而不是在设计时应用。

# c# - 包装 C 结构以在 WPF 应用程序中访问

> ID：14085821
> 
> 赞同：2
> 
> 时间：2012-12-29T20:53:01.587
> 
> 标签：c#, c++, wpf, struct, wrapper

对于我的一个项目，我想包装一个 C 结构以便在 C# 代码中使用它。我的 C++ 算法返回一个结构对象，我想查看 C#/WPF 代码中包含的信息。

当我尝试“我的方式”时，我在编译时收到一条错误消息：“'Wrapper.WrapperAlgo.createMediumMap()' 由于其保护级别而无法访问”

我的 C# 代码：

```
public partial class MainWindow : Window
{    
    unsafe public MainWindow()
    {
        WrapperAlgo algo = new WrapperAlgo();
        square** map = (square**)algo.createMediumMap();
    }
} 
```

我的包装

```
#ifndef __WRAPPER__
#define __WRAPPER__

#include "../CivilizationAlgo/mapalgo.h"
#pragma comment(lib, "../Debug/CivilizationAlgo.lib")

using namespace System;

namespace Wrapper {
    public ref class WrapperAlgo {
        private:
            Algo* algo;
    public:
        WrapperAlgo(){ algo = Algo_new(); }
        ~WrapperAlgo(){ Algo_delete(algo); }
        square** createSmallMap() { return algo->createSmallMap(); }
        square** createMediumMap() { return algo->createMediumMap(); }
        int computeFoo() { return algo->computeFoo(); }
    };
}
#endif 
```

我的 C++ algo.h 和我想在 C# 中使用的结构

```
#ifdef WANTDLLEXP
#define DLL _declspec(dllexport)
#define EXTERNC extern "C"
#else
#define DLL
#define EXTERNC
#endif

#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <vector>

using namespace std;

struct square {
    // 0: Mountain, 1: Plain, 2: Desert
    int type;
    // 0: No additionnal ressource, 1: Additionnal Iron, 2: Additionnal Food
    int bonus;
    // 0: free, 1: checked, 2: frozen
    int state;
};

class DLL Algo {
    public:
        Algo() {}
        ~Algo() {}
        square** createSmallMap();
        square** createMediumMap();
        int computeFoo();
}; 
```

你知道我哪里错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T00:09:47.513

如果我理解你，你正在寻找一种在你的 C# 代码中使用非托管库（如 cpp/c 库）的方法。如果是，那么您应该阅读有关编组的信息，例如。[这里](http://www.codeproject.com/Articles/66245/Marshaling-with-C-Chapter-1-Introducing-Marshaling)，[这里](https://stackoverflow.com/questions/2240804/marshalling-what-is-it-and-why-do-we-need-it)，或者[这里](https://stackoverflow.com/questions/4608876/c-sharp-dllimport-with-c-boolean-function-not-returning-correctly/4621621#4621621)。

可以在[MSDN](http://msdn.microsoft.com/en-us/library/hh560563(v=vs.95).aspx)或[MSDN Magazine](http://msdn.microsoft.com/en-us/magazine/cc301501.aspx)上找到有关在 C# 应用程序中包含非托管代码的基础知识。

希望能帮助到你。

# css - CSS Firefox 框阴影和轮廓

> ID：14085822
> 
> 赞同：9
> 
> 时间：2012-12-29T20:53:04.633
> 
> 标签：css, firefox

我在我的 CSS 代码中添加了轮廓和框阴影到一个 div。
div 在 Chrome 和 IE 上看起来很棒，但在 Firefox 中却不行：
Chrome 和 IE：http: [//i.phirune.com/csrjfyqoczob](http://i.phirune.com/csrjfyqoczob)

火狐：http: [//i.phirune.com/4gsrrub3ww6e](http://i.phirune.com/4gsrrub3ww6e)

CSS代码如下：

```
#container {
width:960px;
margin:0px;
padding:0px;
margin-left:auto;
margin-right:auto;
margin-top:-10px;
background-color: #415475;
-moz-box-shadow: 0 0 25px 25px rgba(0,0,0,0.2);
-webkit-box-shadow: 0 0 25px 25px rgba(0,0,0,0.2);
box-shadow: 0 0 25px 25px rgba(0,0,0,0.2);
outline:#000000 solid thick;
} 
```

我不知道如何解决这个问题，任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T12:07:01.397

为什么不使用多个盒子阴影？只需用逗号分隔你的盒子阴影。

```
box-shadow:
    0px 0px 0px 1px #fff,
    0px 0px 0px 2px #606054,
    0px -1px 9px 1px rgba(119, 119, 119, 0.4); 
```

您可以添加任意数量的您心中的愿望。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T12:01:48.240

这是一个 Firefox 错误。你只能绕过它。门票仍然有效，您可以在以下网址看到：[https ://bugzilla.mozilla.org/show_bug.cgi?id=480888](https://bugzilla.mozilla.org/show_bug.cgi?id=480888)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T20:57:22.157

```
-moz-box-shadow: 1px 1px 10px #00f;
-webkit-box-shadow: 1px 1px 10px #00f;
box-shadow: 1px 1px 10px #00f; 
```

您尝试支持哪些浏览器版本？现代浏览器支持 css3，你不需要做 css hacks。

这是一些用于阴影的 css3 文档：[http ://www.css3.info/preview/box-shadow/](http://www.css3.info/preview/box-shadow/)

# c# - 来自 WPF 的数据库连接

> ID：14085831
> 
> 赞同：2
> 
> 时间：2012-12-29T20:54:03.337
> 
> 标签：c#, wpf, database

我的 WPF 应用程序中有一个文件夹“数据”，其中有一个 .sdf 数据库文件。该文件是我的应用程序的数据库。

在开发我的应用程序时，我使用了指向我的数据库的固定路径，如下所示：

```
'Data Source=P:\Dropbox\Projects\MembersApp\MembersApp\bin\Debug\Data\RF_db.sdf' 
```

现在我想使用 |DataDirectory| 值，以便应用程序在安装应用程序时始终可以找到数据库。我在 StackOverflow 上找到了这个解决方案：

```
string executable = System.Reflection.Assembly.GetExecutingAssembly().Location;
string path = (System.IO.Path.GetDirectoryName(executable));
AppDomain.CurrentDomain.SetData("DataDirectory", path);
string dataSourceHome = "Data Source=|DataDirectory|\RF_db.sdf"; 
```

但是在最后一行“错误的编译常量值”上给了我一个错误。我试过：

```
string dataSourceHome = @"Data Source=|DataDirectory|\RF_db.sdf"; 
```

但这不起作用。

知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T21:32:17.567

你可以使用：

```
string dataSourceHome = string.Format("Data Source={0}\\RF_db.sdf", Environment.CurrentDirectory); 
```

或者

```
 string dataSourceHome = string.Format("Data Source={0}\\RF_db.sdf", System.IO.Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T02:49:54.537

不要更改`DataDirectory`您的代码；它由安装程序设置，更改它会阻止您的应用程序知道数据的安装位置。只需使用：

```
string dataSourceHome = @"Data Source=|DataDirectory|\RF_db.sdf"; 
```

没有别的了。不要打电话`AppDomain.CurrentDomain.SetData("DataDirectory", path)`；这就是破坏事物的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T21:14:09.773

看起来您正在创建一个 ADO.Net 连接字符串。你的信息不只是缺少`dataSourceHome`吗？看看[这个帖子](https://stackoverflow.com/questions/1409358/ado-net-datadirectory-where-is-this-documented)。

或者，可以在[ConnectionStrings.com](http://www.connectionstrings.com/sql-server-ce)上找到创建连接的不同方法。

# java - 无法设置 JPanel 颜色和 JRadioButton 不可见性

> ID：14085840
> 
> 赞同：1
> 
> 时间：2012-12-29T20:54:52.340
> 
> 标签：java, swing, jradiobutton, setbackground

我在设置`JPanel`和`JFrame`颜色为白色时遇到问题，尽管我使用了`panel.setBackground(Color.white)`. 第二个问题是构造函数中的设置导致它`ImageIcon`是不可见的。这是我的代码：`JRadioButton``JRadioButton`

```
public class proby {

    static JPanel panel = new JPanel();
    static JPanel panel2 = new JPanel();

    private void createAndShowGUI() {
        final ImageIcon zielonaikona = new ImageIcon("green2.png");
        final ImageIcon czerwonaikona = new ImageIcon("red2.png");
        final ImageIcon niebieskaikona = new ImageIcon("blue.png");
        final ImageIcon szaraikona = new ImageIcon("grey.png");
        JFrame frame1 = new JFrame("MasterMind");
        final JRadioButton zielony = new JRadioButton(zielonaikona);
        zielony.setBackground(Color.WHITE);
        final JRadioButton czerwony = new JRadioButton("czerwony");
        czerwony.setBackground(Color.white);
        final JRadioButton niebieski = new JRadioButton("niebieski");
        niebieski.setBackground(Color.white);
        final JRadioButton szary = new JRadioButton("szary");
        szary.setBackground(Color.white);
        zielony.setSelected(true);
        ButtonGroup gruparadio = new ButtonGroup();
        gruparadio.add(zielony);
        gruparadio.add(czerwony);
        gruparadio.add(niebieski);
        gruparadio.add(szary);
        frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton akceptuj = new JButton("Akceptuj");

        akceptuj.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                JLabel label2;
                if (zielony.isSelected()) {
                    label2 = new JLabel(zielonaikona);
                } else if (czerwony.isSelected()) {
                    label2 = new JLabel(czerwonaikona);
                } else if (szary.isSelected()) {
                    label2 = new JLabel(szaraikona);
                } else {
                    label2 = new JLabel(niebieskaikona);
                }
                panel2.add(label2);
                panel2.revalidate();
            }
        });

        BoxLayout layout = new BoxLayout(panel, BoxLayout.Y_AXIS);
        BoxLayout layout2 = new BoxLayout(panel2, BoxLayout.Y_AXIS);
        panel.setLayout(layout);
        panel2.setLayout(layout2);
        panel.add(zielony);
        panel.add(czerwony);
        panel.add(niebieski);
        panel.add(szary);
        panel.add(akceptuj);
        panel.setBackground(Color.WHITE);
        panel2.setBackground(Color.white);
        frame1.getContentPane().add(panel);
        frame1.getContentPane().add(panel2);
        BoxLayout layout3 = new BoxLayout(frame1.getContentPane(), BoxLayout.Y_AXIS);
        frame1.setLayout(layout3);
        frame1.setBackground(Color.white);
        frame1.setSize(300, 300);
        frame1.setVisible(true);
    }

    public static void main(String[] args) {
        proby kk = new proby();
        kk.createAndShowGUI();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T21:09:08.913

如果要将`JFrame`背景颜色设置为白色，则必须获取`ContentPane`并将其设置为白色：

```
frame1.getContentPane().setBackground(Color.white); 
```

看看[JFrame.setBackground() 不起作用 - 为什么？](https://stackoverflow.com/questions/2742270/jframe-setbackground-not-working-why)

至于`ImageIcon`问题，可能是因为您指定的路径没有图像文件。（在您的情况下，它就在项目文件夹中）。

编辑：既然我知道你想用 做什么，我在看到[Andrew Thompson 的把戏](https://stackoverflow.com/a/6811752/1933512)`ImageIcon`后想出了这个

```
String imageText = "<html><img src=\""+this.getClass().getResource("green2.png")
            .toString()+"\"></img></html>";
JRadioButton zielony = new JRadioButton(imageText); 
```

但是，它确实涉及您将图像放置在`src`文件夹中，而不是项目中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T21:40:23.077

> 只有没有`JRadioButton`' 洞的图像可见。

外观由外观和感觉相关的 UI 委托控制，它是`ButtonUI`. 如果没有编写自己的替换，您可以使用`ColorIcon`, 在[这里](https://stackoverflow.com/a/3072979/230513)看到，根据需要渲染按钮 - 带或不带孔。然后您可以使用[此处](https://stackoverflow.com/a/12228640/230513)`setIcon()`显示的更新图标。

```
Icon czerwonaikona = new ColorIcon(SIZE, Color.red);
JRadioButton czerwony = new JRadioButton("czerwony", czerwonaikona); 
```

# ios - iOS - 将应用购买数据保存在 plist 文件中？

> ID：14085841
> 
> 赞同：4
> 
> 时间：2012-12-29T20:54:55.927
> 
> 标签：ios, in-app-purchase, save, plist

# 注意----下面的答案使用iOS6-方法，Apple从那时起删除了开发人员对MAC地址的访问权限。如果您正在为 iOS7+ 开发，请忽略第一个答案，而只是根据每个设备独有的其他变量（例如应用程序首次启动的日期）加密您的 IAP 解锁数据

我有需要解锁音调的功能，所以我将它们存储在我的 plist 文件中.... 像聊天室中的新头像这样的功能可能具有 id “13891”，如果它已解锁，我可能会为其分配一些键，如“93 “如果它被锁定，它可能有任何其他键“37”例如......所以plist会说：“13891”=“93”我的问题是越狱手机可以轻松编辑plist文件并为自己解锁功能吗？存储这些数据的更好方法是什么？我不想每次都检查 Apple 的服务器，因为互联网连接速度太慢，这需要很长时间。

编辑：当前答案：

4 措施：

1）将其存储在钥匙串中。（或者我想现在我已经添加了措施#4）

2) 每次都检查 Apple 的服务器，但如果您担心随后的延迟，只需在后台检查它，同时让用户使用该应用程序，如果它说可以的话。

3）将您的变量作为加密密钥存储在钥匙串中......不要存储“FishingRod = unlocked”存储“3dhk34D@HT% = d3tD@#”。

4) 使用设备 MAC 地址加密每个密钥（这些 MAC 地址不会更改，并且无论是否有 WiFi 连接都可用......下面的代码）。这样，如果用户从 Internet 下载 plist 并尝试使用它，它将无法正常工作，因为当您使用他们的设备 ID 对其进行解密时，您将无法随机废话而不是解锁密钥（在我的示例中将是“d3tD@#”。）**！！！-- 从 iOS7+ 起无法再访问 Mac 地址，而是使用其他设备独有的东西加密，例如应用程序首次启动的日期**

MAC 地址代码（只需将其粘贴在 .H 导入中的视图控制器 ViewDidAppear... 中）

```
#include <sys/socket.h>
#include <sys/sysctl.h>
#include <net/if.h>
#include <net/if_dl.h>

-(void)viewDidAppear:(BOOL)animated {

    int                 mgmtInfoBase[6];
    char                *msgBuffer = NULL;
    NSString            *errorFlag = NULL;
    size_t              length;

    // Setup the management Information Base (mib)
    mgmtInfoBase[0] = CTL_NET;        // Request network subsystem
    mgmtInfoBase[1] = AF_ROUTE;       // Routing table info
    mgmtInfoBase[2] = 0;
    mgmtInfoBase[3] = AF_LINK;        // Request link layer information
    mgmtInfoBase[4] = NET_RT_IFLIST;  // Request all configured interfaces

    // With all configured interfaces requested, get handle index
    if ((mgmtInfoBase[5] = if_nametoindex("en0")) == 0)
        errorFlag = @"if_nametoindex failure";
    // Get the size of the data available (store in len)
    else if (sysctl(mgmtInfoBase, 6, NULL, &length, NULL, 0) < 0)
        errorFlag = @"sysctl mgmtInfoBase failure";
    // Alloc memory based on above call
    else if ((msgBuffer = malloc(length)) == NULL)
        errorFlag = @"buffer allocation failure";
    // Get system information, store in buffer
    else if (sysctl(mgmtInfoBase, 6, msgBuffer, &length, NULL, 0) < 0)
    {
        free(msgBuffer);
        errorFlag = @"sysctl msgBuffer failure";
    }
    else
    {
        // Map msgbuffer to interface message structure
        struct if_msghdr *interfaceMsgStruct = (struct if_msghdr *) msgBuffer;

        // Map to link-level socket structure
        struct sockaddr_dl *socketStruct = (struct sockaddr_dl *) (interfaceMsgStruct + 1);

        // Copy link layer address data in socket structure to an array
        unsigned char macAddress[6];
        memcpy(&macAddress, socketStruct->sdl_data + socketStruct->sdl_nlen, 6);

        // Read from char array into a string object, into traditional Mac address format
        NSString *macAddressString = [NSString stringWithFormat:@"%02X:%02X:%02X:%02X:%02X:%02X",
                                      macAddress[0], macAddress[1], macAddress[2], macAddress[3], macAddress[4], macAddress[5]];
        NSLog(@"Mac Address: %@", macAddressString);

        // Release the buffer memory
        free(msgBuffer);

        //return macAddressString;
        NSLog(@"MAC: %@", macAddressString);
        //F0:DC:E2:1D:EB:50
    }

    // Error...
    NSLog(@"Error: %@", errorFlag);
} 
```

注意：我从朋友那里得到了 MAC 地址代码……我并不是说我编写了代码……我不知道是他编写的还是从其他人那里得到的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T19:22:36.523

4 措施：

1）将其存储在钥匙串中。（或者我想现在我已经添加了措施#4）

2) 每次都检查 Apple 的服务器，但如果您担心随后的延迟，只需在后台检查它，同时让用户使用该应用程序，如果它说可以的话。

3）将您的变量作为加密密钥存储在钥匙串中......不要存储“FishingRod = unlocked”存储“3dhk34D@HT% = d3tD@#”。

4) 使用设备 MAC 地址加密每个密钥（这些 MAC 地址不会更改，并且无论是否有 WiFi 连接都可用......下面的代码）。这样，如果用户从 Internet 下载 plist 并尝试使用它，它将无法正常工作，因为当您使用他们的设备 ID 对其进行解密时，您将无法随机废话而不是解锁密钥（在我的示例中将是“d3tD@#”。）**！！！-- 从 iOS7+ 起无法再访问 Mac 地址，而是使用其他设备独有的东西加密，例如应用程序首次启动的日期**

MAC 地址代码（只需将其粘贴在 .H 导入中的视图控制器 ViewDidAppear... 中）

```
#include <sys/socket.h>
#include <sys/sysctl.h>
#include <net/if.h>
#include <net/if_dl.h>

-(void)viewDidAppear:(BOOL)animated {

    int                 mgmtInfoBase[6];
    char                *msgBuffer = NULL;
    NSString            *errorFlag = NULL;
    size_t              length;

    // Setup the management Information Base (mib)
    mgmtInfoBase[0] = CTL_NET;        // Request network subsystem
    mgmtInfoBase[1] = AF_ROUTE;       // Routing table info
    mgmtInfoBase[2] = 0;
    mgmtInfoBase[3] = AF_LINK;        // Request link layer information
    mgmtInfoBase[4] = NET_RT_IFLIST;  // Request all configured interfaces

    // With all configured interfaces requested, get handle index
    if ((mgmtInfoBase[5] = if_nametoindex("en0")) == 0)
        errorFlag = @"if_nametoindex failure";
    // Get the size of the data available (store in len)
    else if (sysctl(mgmtInfoBase, 6, NULL, &length, NULL, 0) < 0)
        errorFlag = @"sysctl mgmtInfoBase failure";
    // Alloc memory based on above call
    else if ((msgBuffer = malloc(length)) == NULL)
        errorFlag = @"buffer allocation failure";
    // Get system information, store in buffer
    else if (sysctl(mgmtInfoBase, 6, msgBuffer, &length, NULL, 0) < 0)
    {
        free(msgBuffer);
        errorFlag = @"sysctl msgBuffer failure";
    }
    else
    {
        // Map msgbuffer to interface message structure
        struct if_msghdr *interfaceMsgStruct = (struct if_msghdr *) msgBuffer;

        // Map to link-level socket structure
        struct sockaddr_dl *socketStruct = (struct sockaddr_dl *) (interfaceMsgStruct + 1);

        // Copy link layer address data in socket structure to an array
        unsigned char macAddress[6];
        memcpy(&macAddress, socketStruct->sdl_data + socketStruct->sdl_nlen, 6);

        // Read from char array into a string object, into traditional Mac address format
        NSString *macAddressString = [NSString stringWithFormat:@"%02X:%02X:%02X:%02X:%02X:%02X",
                                      macAddress[0], macAddress[1], macAddress[2], macAddress[3], macAddress[4], macAddress[5]];
        NSLog(@"Mac Address: %@", macAddressString);

        // Release the buffer memory
        free(msgBuffer);

        //return macAddressString;
        NSLog(@"MAC: %@", macAddressString);
        //F0:DC:E2:1D:EB:50
    }

    // Error...
    NSLog(@"Error: %@", errorFlag);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T21:14:07.407

你甚至不需要越狱。无论您将可写文件存储在何处，iPhone Explorer 之类的应用程序都可以让用户抓取并修改该文件，然后将其写回设备。只需一个人购买即可将解锁的 plist 文件发送到整个互联网。

我要做的是将解锁的项目存储在设备上的钥匙串中（只是为了让它稍微模糊一点），并在启动时相信它 - 但每次尝试在后台联系 Apple 服务器以验证用户真的应该拥有那些未锁定的物品。这样，即使他们可以伪造钥匙串条目，他们也可能会在短时间内解锁项目，但如果在应用程序运行时设备完全连接到互联网，则该功能将被删除。必须记住在每次运行之前断开设备与互联网连接的连接可能太烦人了，以至于盗窃的解锁对伪造者来说是值得的。

由于钥匙串即使在应用程序删除时仍然存在，您可能还想在第一次启动时写出一个 plist 文件，如果您在以后的启动中没有检测到最初创建的 plist 文件，请清除钥匙串。

如果有的话，有人在你的应用程序中摆弄和解锁东西的风险可能很低。当情况不明朗时，总是错误地给予用户访问权限，这样你就不会给真实用户带来问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T21:01:18.770

> 越狱手机可以轻松编辑plist文件并为自己解锁功能吗？

对，就是这样。

> 存储这些数据的更好方法是什么？

也许是钥匙串，但在越狱设备上也可以改变。

> 我不想每次都检查 Apple 的服务器，因为互联网连接速度太慢，这需要很长时间。

太糟糕了。如果你想至少在某种程度上是安全的，你最好检查苹果的服务器，甚至更好的是，你自己的服务器也是如此。（这也不是 100% 保证您的游戏不会在越狱手机上被黑客入侵，因为可以使用 MobileSubstrate 随意修改应用程序的行为，但至少它更安全一些。）

# macos - 以编程方式创建 ICNS：“不支持的图像大小”

> ID：14085843
> 
> 赞同：2
> 
> 时间：2012-12-29T20:54:56.783
> 
> 标签：macos, cocoa, size, nsimage, icns

*我正在尝试以编程方式创建 ICNS（包括 1024x1024 图像）。目前我正在创建一个`NSImage`，然后我创建`CGImageRef`具有适当分辨率的对象，最后我通过使用将它们添加到图标中`CGImageDestinationAddImage()`。Peter Hosey 已经帮助我创建了“@2x”图像，但不想设置图像的大小。*

这是代码（还是有点乱，`sourcefile`代表图片的路径）：

```
NSSize sizes[10];
sizes[0] = NSMakeSize(1024,1024);
sizes[1] = NSMakeSize(512,512);
sizes[2] = NSMakeSize(512,512);
sizes[3] = NSMakeSize(256,256);
sizes[4] = NSMakeSize(256,256);
sizes[5] = NSMakeSize(128,128);
sizes[6] = NSMakeSize(64,64);
sizes[7] = NSMakeSize(32,32);
sizes[8] = NSMakeSize(32,32);
sizes[9] = NSMakeSize(16,16);
int count = 0;
for (int i=0 ; i<10 ; i++) {
    if ([[NSUserDefaults standardUserDefaults] boolForKey:[NSString stringWithFormat:@"Size%i",i+1]]) count++;
}
NSURL *fileURL = [NSURL fileURLWithPath:aPath];

// Create icns
CGImageDestinationRef dr = CGImageDestinationCreateWithURL((CFURLRef)fileURL, kUTTypeAppleICNS , count, NULL);
NSImage *img = [[NSImage alloc] initWithContentsOfFile:sourcefile];
for (int i=0 ; i<10 ; i++) {
    if ([[NSUserDefaults standardUserDefaults] boolForKey:[NSString stringWithFormat:@"Size%i",i+1]]) {

        // Create dictionary
        BOOL is2X = true;
        if (i == 1 || i == 3 || i == 5 || i == 7 || i == 9) is2X = false;
        int dpi = 144, size = (int)(sizes[i].width/2);
        if (!is2X) {dpi = 72;size = sizes[i].width;}
        [img setSize:NSMakeSize(size,size)];
        for (NSImageRep *rep in [img representations])[rep setSize:NSMakeSize(size,size)];
        const void *keys[2] = {kCGImagePropertyDPIWidth, kCGImagePropertyDPIHeight};
        const void *values[2] = {CFNumberCreate(0, kCFNumberSInt32Type, &dpi), CFNumberCreate(0, kCFNumberSInt32Type, &dpi)};
        CFDictionaryRef imgprops = CFDictionaryCreate(NULL, keys, values, 2, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);

        // Add image
        NSRect prect = NSMakeRect(0,0,size,size);
        CGImageRef i1 = [img CGImageForProposedRect:&prect context:nil hints:nil];
        CGImageDestinationAddImage(dr, i1, imgprops);
    }
}
CGImageDestinationFinalize(dr);
CFRelease(dr); 
```

`size`是当前图像的宽度或高度。`dpi`如果我们正在制作“@2x”图像，则为 144，否则为 72。这些值已用`NSLog`.

生成的 ICNS 文件中的图像都与输入图像大小相同。如果输入图像的大小是 1024x1024，ImageIO 会报错：

> ImageIO：_CGImagePluginWriteICNS 不支持的图像大小（1024 x 1024） - 缩放因子：1

每次dpi为72，大小为1024x1024时都会显示上述错误。

**我需要知道如何设置要添加到 ICNS 文件的 CGImage 的大小。**

* * *

编辑：我记录了图像：

> 2012-12-31 12:48:51.281 Eicon[912:680f] |NSImage 0x101b4caf0 大小={512, 512} 代表=(
> 
> ```
> "NSBitmapImageRep 0x10380b900 Size={512, 512} ColorSpace=(not yet loaded) BPS=8 BPP=(not yet loaded) Pixels=1024x1024 Alpha=YES 
> ```
> 
> Planar=NO Format=(尚未加载) CurrentBacking=nil (faulting) CGImageSource=0x10380ae70"
> 
> )|
> 
> 2012-12-31 12:48:52.058 Eicon[912:680f] |NSImage 0x101b4caf0 大小={512, 512} 代表=(
> 
> ```
> "NSBitmapImageRep 0x10380b900 Size={512, 512} ColorSpace=Generic RGB colorspace BPS=8 BPP=32 Pixels=1024x1024 Alpha=YES Planar=NO 
> ```
> 
> 格式=2 当前支持=|CGImageRef: 0x101c14630| CGImageSource=0x10380ae70"
> 
> )|
> 
> 2012-12-31 12:48:52.111 Eicon[912:680f] |NSImage 0x101b4caf0 大小={256, 256} 代表=(
> 
> ```
> "NSBitmapImageRep 0x10380b900 Size={256, 256} ColorSpace=Generic RGB colorspace BPS=8 BPP=32 Pixels=1024x1024 Alpha=YES Planar=NO 
> ```
> 
> 格式=2 当前支持=|CGImageRef: 0x101c14630| CGImageSource=0x10380ae70"
> 
> )|
> 
> 2012-12-31 12:48:52.238 Eicon[912:680f] |NSImage 0x101b4caf0 大小={256, 256} 代表=(
> 
> ```
> "NSBitmapImageRep 0x10380b900 Size={256, 256} ColorSpace=Generic RGB colorspace BPS=8 BPP=32 Pixels=1024x1024 Alpha=YES Planar=NO 
> ```
> 
> 格式=2 当前支持=|CGImageRef: 0x101c14630| CGImageSource=0x10380ae70"
> 
> )|
> 
> 2012-12-31 12:48:52.309 Eicon[912:680f] |NSImage 0x101b4caf0 大小={128, 128} 代表=(
> 
> ```
> "NSBitmapImageRep 0x10380b900 Size={128, 128} ColorSpace=Generic RGB colorspace BPS=8 BPP=32 Pixels=1024x1024 Alpha=YES Planar=NO 
> ```
> 
> 格式=2 当前支持=|CGImageRef: 0x101c14630| CGImageSource=0x10380ae70"
> 
> )|
> 
> 2012-12-31 12:48:52.409 Eicon[912:680f] |NSImage 0x101b4caf0 大小={128, 128} 代表=(
> 
> ```
> "NSBitmapImageRep 0x10380b900 Size={128, 128} ColorSpace=Generic RGB colorspace BPS=8 BPP=32 Pixels=1024x1024 Alpha=YES Planar=NO 
> ```
> 
> 格式=2 当前支持=|CGImageRef: 0x101c14630| CGImageSource=0x10380ae70"
> 
> )|
> 
> 2012-12-31 12:48:52.534 Eicon[912:680f] |NSImage 0x101b4caf0 大小={32, 32} 代表=(
> 
> ```
> "NSBitmapImageRep 0x10380b900 Size={32, 32} ColorSpace=Generic RGB colorspace BPS=8 BPP=32 Pixels=1024x1024 Alpha=YES Planar=NO Format=2 
> ```
> 
> CurrentBacking=|CGImageRef: 0x101c14630| CGImageSource=0x10380ae70"
> 
> )|
> 
> 2012-12-31 12:48:52.616 Eicon[912:680f] |NSImage 0x101b4caf0 大小={32, 32} 代表=(
> 
> ```
> "NSBitmapImageRep 0x10380b900 Size={32, 32} ColorSpace=Generic RGB colorspace BPS=8 BPP=32 Pixels=1024x1024 Alpha=YES Planar=NO Format=2 
> ```
> 
> CurrentBacking=|CGImageRef: 0x101c14630| CGImageSource=0x10380ae70"
> 
> )|
> 
> 2012-12-31 12:48:52.729 Eicon[912:680f] |NSImage 0x101b4caf0 大小={16, 16} 代表=(
> 
> ```
> "NSBitmapImageRep 0x10380b900 Size={16, 16} ColorSpace=Generic RGB colorspace BPS=8 BPP=32 Pixels=1024x1024 Alpha=YES Planar=NO Format=2 
> ```
> 
> CurrentBacking=|CGImageRef: 0x101c14630| CGImageSource=0x10380ae70"
> 
> )|
> 
> 2012-12-31 12:48:52.864 Eicon[912:680f] |NSImage 0x101b4caf0 Size={16, 16} Reps=(
> 
> ```
> "NSBitmapImageRep 0x10380b900 Size={16, 16} ColorSpace=Generic RGB colorspace BPS=8 BPP=32 Pixels=1024x1024 Alpha=YES Planar=NO Format=2 
> ```
> 
> CurrentBacking=|CGImageRef: 0x101c14630| CGImageSource=0x10380ae70"
> 
> )|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T02:01:56.810

错误信息是正确的。您正在放入 IconFamily 格式不支持的大小的图像。具体来说，从您的输出中：

> 2012-12-26 13:48:57.682 Eicon[1131:1b0f] |NSImage 0x1025233b0 **Size={11.52, 11.52}** Reps=("NSBitmapImageRep 0x10421fc30 **Size={11.52, 11.52}** ColorSpace=(尚未加载) BPS=8 BPP =（尚未加载）像素=1024x1024 Alpha=NO Planar=NO 格式=（尚未加载）CurrentBacking=nil（故障）CGImageSource=0x104221170”

11.52 磅不是 IconFamily 的任何元素的有效大小。您需要找出为什么此图像和代表具有该大小。

其他几件事：

1.  正如我在另一个答案中告诉您的那样，您不需要更改表示的像素大小。保留像素大小。设置`size`代表和图像的（点大小）（最好是有效的）。
2.  `-[NSImage initWithSize:]`文档说：

    > 允许通过传递 (0.0, 0.0) 的大小来初始化接收器；但是，在使用 NSImage 对象之前，必须将接收器的大小设置为非零值，否则将引发异常。

    您没有设置任何一个对象的大小，这是您需要做的。（我很惊讶你没有像文档承诺那样得到例外。）

正如我在您的另一个问题中提到的，不再有 1024 点元素；1024 x 1024 像素元素的正确规格是 512 点 @ 2x。这是（点）的（`size`图像和代表）`(NSSize){ 512.0, 512.0 }`，代表是 1024`pixelsWide`和 1024 `pixelsHigh`。

* * *

看起来我之前错过了一种关键成分。这里是。

你给 CGImageDestination 的 CGImage 没有与之关联的点大小——只有 NSImages 和 NSImageReps 有。CGImage 只有一个像素大小；没有任何东西表明图像的物理尺寸或分辨率。

要告诉 CGImageDestination 给定的 CGImage 是 @1x 还是 @2x，您需要创建一个提供图像 DPI 的字典：

```
NSDictionary *imageProps1x = @{
    (__bridge NSString *)kCGImagePropertyDPIWidth: @72.0,
    (__bridge NSString *)kCGImagePropertyDPIHeight: @72.0,
};
NSDictionary *imageProps2x = @{
    (__bridge NSString *)kCGImagePropertyDPIWidth: @144.0,
    (__bridge NSString *)kCGImagePropertyDPIHeight: @144.0,
}; 
```

将正确的字典作为最后一个参数传递给`CGImageDestinationAddImage`.

# haskell - 如何在 Haskell 中以列表作为参数或返回值来记忆函数？

> ID：14085847
> 
> 赞同：5
> 
> 时间：2012-12-29T20:55:29.690
> 
> 标签：haskell, memoization

我正在实现一个具有以下签名的函数来解决 Haskell 中的 0-1 背包问题。

```
knapsack :: [Item] -> Capacity -> [Item] 
```

其中`Item`和`Capacity`文件定义为：

```
type Value = Int
type Weight = Int

type Capacity = Int

type Item = (Value, Weight) 
```

我想记住它以获得更好的性能。我尝试使用[Data.MemoCombinators](http://hackage.haskell.org/packages/archive/data-memocombinators/0.4.3/doc/html/Data-MemoCombinators.html)但我不知道如何让它工作。

你能给我一些提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T21:25:44.800

我成功地将[MemoTrie](http://hackage.haskell.org/package/MemoTrie)用于此类任务。您想用作记忆索引的每种类型都必须实现[`HasTrie`](http://hackage.haskell.org/packages/archive/MemoTrie/0.6.1/doc/html/Data-MemoTrie.html#t%3aHasTrie)。在您的情况下，您不必实现任何东西，因为该包已经为原始数据类型以及对和列表提供了实例。

```
import Data.MemoTrie

type Value = Int
type Weight = Int

type Capacity = Int

type Item = (Value, Weight)

knapsack :: [Item] -> Capacity -> [Item]
knapsack = memo2 knapsack'
  where
    knapsack' items capacity = ... -- your computation goes here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T21:11:22.103

如果您正在寻找列表操作的性能优化，我建议您查看严格的迭代函数，例如`Data.List.foldl'`：

> foldl' :: (a -> b -> a) -> a -> [b] -> a

# android - 改变风格（使用变量）

> ID：14085848
> 
> 赞同：3
> 
> 时间：2012-12-29T20:55:33.480
> 
> 标签：android

我有这段代码，我需要将 MyCustonTheme1 更改为 2 或 3 或 4（从 sharedpreferences 的值中，用户选择一个值 (1,2,3,4)

```
AlertDialog.Builder builder = new AlertDialog.Builder(this, R.style.MyCustomTheme1); 
```

在 MainActivity 我有：

```
if (fade == 500){
            animazione = "R.style.MyCustomTheme1";
        }
        if (fade == 1000){
            animazione = "R.style.MyCustomTheme2";
        }
            [...] 
```

现在，我需要把“animazione”像这样的代码：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this, animazione); 
```

构造函数 AlertDialog.Builder(MainActivity, String) 未定义

是否可以将 R.style.MyCustomTheme1 更改为像“animazione”这样的变量？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:00:31.370

> **注意：不鼓励使用此功能。**按标识符检索资源比按名称检索资源效率更高。

*如果您需要按名称*查找 Android 资源（例如，String -> int 转换），请使用[`getIdentifier(String, String, String)`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29).

第一个参数是*字符串*形式的资源名称。第二个参数是*字符串*形式的资源类型（例如，`"id"`to look in`R.id`或`"drawable"`to look in `R.drawable`）。第三个参数是包名。

因此，理论上，您应该能够像这样查找样式资源：

```
int style = getResources().getIdentifier("MyCustomTheme1", "style", getPackageName()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T20:59:14.917

是的，有可能。但是你做错了，你应该使用

```
int animazione = R.style.MyCustomTheme1; // look, no quotes!

AlertDialog.Builder builder = new AlertDialog.Builder(this, animazione); 
```

请注意，采用*主题标识符*的重载是在*API 级别 11*中添加的，因此它仅适用于*Android 3.0*及更高版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T21:00:39.500

如果你想改变样式，`AlertDialog.Builder`那么你必须传入上下文和样式。样式是 int，但您传入的是字符串。将其更改为：

```
int animazione; // change it to an int

if (fade == 500){
            animazione = R.style.MyCustomTheme1;
        }
else if (fade == 1000){ // also add an 'else' in here (else if)
            animazione = R.style.MyCustomTheme2;
        }
            [...]

AlertDialog.Builder builder = new AlertDialog.Builder(this, animazione); 
```

就像 k-ballo 已经指出的那样，这仅适用于 API 级别 11+。

# java - Java 中的字符串创建（内存使用）

> ID：14085854
> 
> 赞同：-1
> 
> 时间：2012-12-29T20:56:09.033
> 
> 标签：java, string

在Java中，以下两段代码有区别吗？我正在寻找有关内存使用和字符串池的答案。

首先：

```
String s = new String();

s = "abcdef"; 
```

第二：

```
String s = new String("abcdef"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:00:14.867

您在第一个中进行创建和赋值。在第二个中，您只需进行创作。您在第一个中进行（几乎）两次处理器活动。说到记忆，没有区别。

对您的问题的字符串池解释：

[什么是 Java 字符串池，“s”与 new String(“s”) 有何不同？](https://stackoverflow.com/questions/2486191/java-string-pool?rq=1)

# python - Python-OpenCv FindContours

> ID：14085855
> 
> 赞同：0
> 
> 时间：2012-12-29T20:56:16.180
> 
> 标签：python, image-processing, opencv

我尝试在二进制图像中查找轮廓，但是当尝试执行 cvFindContours 时，它给了我错误消息

> 回溯（最近一次调用最后）：文件“convert.py”，第 30 行，轮廓 = cvFindContours(img2, storage, cv.CV_RETR_CCOMP, cv.CV_CHAIN_APPROX_SIMPLE) 文件“/usr/lib/pymodules/python2.7/opencv/ cv.py”，第 580 行，在 cvFindContours 计数中，seq = cvFindContoursUntyped( *args ) 文件“/usr/lib/pymodules/python2.7/opencv/cv.py”，第 6521 行，在 cvFindContoursUntyped 返回 _cv.cvFindContoursUntyped(* args) RuntimeError: openCV Error: Status=Incorrect size of input array function name=cvStartFindContours error message= file_name=/build/buildd/opencv-2.1.0/src/cv/cvcontours.cpp line=205

我使用全新安装的 Ubuntu 11.10 和 Opencv 2.3.1。

这是我的源代码

```
from opencv.cv import *
from opencv.highgui import *

image = cvLoadImage('test.png')
def getthresholdedimg(image):
    size = cvSize(640, 480)

    imghsv=cvCreateImage(cvGetSize(image),8,3)
    cvCvtColor(image,imghsv,cv.CV_BGR2HSV)
    imgblue=cvCreateImage(cvGetSize(image),8,1)
    imgblue2=cvCreateImage(cvGetSize(image),8,1)
    imgthreshold=cvCreateImage(cvGetSize(image),8,1)

    cvInRangeS(imghsv,cvScalar(100,100,100),cvScalar(120,255,255),imgblue)
    cvInRangeS(imghsv,cvScalar(100,100,100),cvScalar(120,255,255),imgblue2)
    cvAdd(imgblue,imgblue,imgthreshold)
    return imgthreshold

cvFlip(image,image,1)

cvSmooth(image, image, CV_GAUSSIAN, 3, 0)
imgthresh=getthresholdedimg(image)
cvErode(imgthresh,imgthresh,None,3)
cvDilate(imgthresh,imgthresh,None,10)
storage = cvCreateMemStorage(0)
img2=cvCloneImage(imgthresh)
contour = cvFindContours(img2, storage, cv.CV_RETR_CCOMP, cv.CV_CHAIN_APPROX_SIMPLE) 
```

我的原始和二进制图像

原图 [http://tinypic.com/r/34rul9x/6](http://tinypic.com/r/34rul9x/6)

和蓝色过滤的二进制图像 [http://tinypic.com/r/ifbotx/6](http://tinypic.com/r/ifbotx/6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-10T14:21:00.327

**在 python cv2 中查找轮廓**

```
    将 numpy 导入为 np
    导入简历2

    img = cv2.imread('sample_image.jpg')
    imgray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
    ret,thresh = cv2.threshold(imgray,127,255,0)
    _，轮廓，层次结构 = cv2.findContours(thresh,cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE)

    cv2.drawContours(img, 轮廓, -1, (0,255,0), 3)
    cv2.imshow('img',img)
    cv2.waitKey(0)
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T03:06:48.100

我认为这种 API 风格已从 OpenCV 中终止。目前有两个 API，旧的一个是`cv`通过

```
>>> import cv2.cv as cv 
```

第二个和新的是`cv2`可用的：

```
>>> import cv2 
```

关于错误：

将导入语句替换为`from cv2.cv import *`

然后删除所有`cv`前缀，它应该可以正常工作。

**笔记 ：**

我认为您正在尝试对物体进行颜色跟踪。

但是既然你有 OpenCV 2.3.1，你为什么要使用非常古老的 Python API 呢？

新的 Python API`cv2`版本，简单、快速、灵活。此外，与新 API 相比，旧 API 中的各种对象很难玩。所以我建议你更新到新的`cv2`API。在旧 API 中甚至很难调试错误。

`cv2`您可以在此链接中找到带有新 API 的颜色跟踪代码：http: [//goo.gl/db2KW](http://goo.gl/db2KW)

或者，如果您确定使用旧 API，代码如下：http: [//goo.gl/AFEmv](http://goo.gl/AFEmv)

# c# - RichTextBox 选择文本部分

> ID：14085856
> 
> 赞同：2
> 
> 时间：2012-12-29T20:56:33.030
> 
> 标签：c#, textbox

我有`RichTextBox`。如何在和之间选择文本`/*`并使`*/`该文本变为绿色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:47:45.033

```
string text = "abc /*defg*/ hij /*klm*/ xyz";
richTextBox1.Text = text;

Regex.Matches(text, @"\/\*(.*?)\*\/",RegexOptions.Singleline).Cast<Match>()
        .ToList()
        .ForEach(m =>
        {
            richTextBox1.Select(m.Index, m.Value.Length);
            richTextBox1.SelectionColor = Color.Blue;
            //or 
            //richTextBox1.Select(m.Groups[1].Index, m.Groups[1].Value.Length);
            //richTextBox1.SelectionColor = Color.Blue;
        }); 
```

# android - 如何让 WakefulService (IntentService) 等到 MediaPlayer 完成？

> ID：14085857
> 
> 赞同：4
> 
> 时间：2012-12-29T20:56:35.730
> 
> 标签：android, media-player, intentservice

我正在尝试制作一个应用程序，该应用程序在预定时间使用 MediaPlayer 播放一系列声音。为了正确处理唤醒锁定并安排播放，我使用了[CommonsWare 的 WakefulIntentService](https://github.com/commonsguy/cwac-wakeful)。

不幸的是，IntentService 的工作线程在我调用后立即退出，`MediaPlayer.play()`并且没有调用 MediaPlayer 注册的侦听器。相反，会记录异常：

```
W/MessageQueue(6727): Handler (android.media.MediaPlayer$EventHandler) {4160d820} sending message to a Handler on a dead thread
W/MessageQueue(6727): java.lang.RuntimeException: Handler (android.media.MediaPlayer$EventHandler) {4160d820} sending message to a Handler on a dead thread
W/MessageQueue(6727):   at android.os.MessageQueue.enqueueMessage(MessageQueue.java:294)
W/MessageQueue(6727):   at android.os.Handler.sendMessageAtTime(Handler.java:473)
W/MessageQueue(6727):   at android.os.Handler.sendMessageDelayed(Handler.java:446)
W/MessageQueue(6727):   at android.os.Handler.sendMessage(Handler.java:383)
W/MessageQueue(6727):   at android.media.MediaPlayer.postEventFromNative(MediaPlayer.java:2063)
W/MessageQueue(6727):   at dalvik.system.NativeStart.run(Native Method) 
```

据我了解，这是由于 MediaPlayer 完成时工作线程已经死亡引起的。如果我通过调试器暂停线程并让播放器完成，一切正常。

在我的监听器中，我不仅释放 MediaPlayer 的资源，还使用 ​​OnCompletionListener 进行连续`MediaPlayer.play()`调用，直到声音队列为空。

我尝试在初始调用之后立即放置一个等待循环`play()`，检查自定义完成标志，但它似乎冻结了，因为 MediaPlayer 的回调是在调用同一个线程`play()`上调用的。

问题是，我怎样才能让工作线程在我让它退出之前不退出（即已经处理过并且`onCompletion()`最后一次调用了该方法？

这是我的服务代码：

```
public class SoundService extends WakefulIntentService {
    private static final TAG = "SoundService";
    private final Queue<SoundDescriptor> soundQueue = new ConcurrentLinkedQueue<SoundDescriptor>();

    private final OnCompletionListener onComediaPlayerletionListener = new OnComediaPlayerletionListener() {
        @Override
        public void onCompletion(MediaPlayer mediaPlayer) {
            mediaPlayer.reset();
            try {
                if (!playNextFromQueue(mediaPlayer)) {
                    Log.v(TAG, "Reached end of queue. Cleaning up.");
                    release();
                }
            } catch (Exception e) {
                Log.e(TAG, "Exception!", e)
                release();
            }
        }
    };
    private final OnErrorListener onErrorListener = new OnErrorListener() {
        @Override
        public boolean onError(MediaPlayer mediaPlayer, int what, int extra) {
            Log.v(TAG, "Error!!");
            release();
            return false;
        }
    };

    public SoundService() {
        // populate soundQueue
    }

    protected void doWakefulWork(Intent intent) {
        MediaPlayer mediaPlayer = new MediaPlayer();
        mediaPlayer.setOnComediaPlayerletionListener(onComediaPlayerletionListener);
        mediaPlayer.setOnErrorListener(onErrorListener);
        playNextFromQueue(mediaPlayer);
    }

    private boolean playNextFromQueue(MediaPlayer mediaPlayer) throws IllegalArgumentException, IllegalStateException, IOException {
        SoundDescriptor descriptor = soundQueue.poll();
        if (descriptor != null) {
            mediaPlayer.setDataSource(descriptor.getFileDescriptor(), descriptor.getStartOffset(), descriptor.getLength());
            descriptor.close();
            mediaPlayer.prepare();
            mediaPlayer.start();
            return true;
        } else {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T21:09:32.900

> 为了正确处理唤醒锁定并安排播放，我使用了 CommonsWare 的 WakefulIntentService。

这不是一个合适的选择。

> 不幸的是，IntentService 的工作线程在我调用 MediaPlayer.play() 后立即退出，并且没有调用 MediaPlayer 注册的侦听器。

这就是为什么它不是一个合适的选择。:-)

> 问题是，我怎样才能让工作线程在我让它退出之前不退出（即已经处理过并且最后一次调用了 onCompletion() 方法？

不要使用`WakefulIntentService`. 不要使用`IntentService`. 使用`Service`. 管理`WakeLock`自己，并`stopSelf()`在音频完成后调用服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-24T16:41:02.267

MediaPlayer 的问题在于它在实例化时将 Handler 缓存到当前线程。如果当前线程没有 Looper，则默认为主线程。它将使用此处理程序来执行侦听器回调。

假设您实例化播放器并在服务线程中使用它。如果您通过服务调用播放器方法，然后此服务线程死亡，播放器将尝试使用指向已死亡线程的处理程序调用已注册侦听器的回调，并抛出问题中显示的异常。

我发现 MediaPlayer 非常棘手且不可靠。最简单的解决方案是在主线程中使用播放器。它们是空头跟注，不应该加注 ANR。

# perl - Perl EMAIL 依赖项

> ID：14085860
> 
> 赞同：2
> 
> 时间：2012-12-29T20:56:51.500
> 
> 标签：perl, email, dependencies

我正在尝试使用 [http://learn.perl.org/examples/email.html](http://learn.perl.org/examples/email.html)中列出的示例来使用测试 perl 的电子邮件。我在 Windows 7 上运行它。出于某种原因，Email::Sender::Simple 引用了加载 Email::Sender 时未加载的其他模块。

如何加载这些模块以便加载所有依赖项而不在每个模块中搜索所有引用的包？目前我正在使用 ActiveState 和 ppm 安装。

```
use 5.14.2;
use strict;
use warnings;

# first, create your message
use Email::MIME;
my $message = Email::MIME->create(
  header_str => [
    From    => 'you@example.com',
    To      => 'friend@example.com',
    Subject => 'Happy birthday!',
  ],
  attributes => {
    encoding => 'quoted-printable',
    charset  => 'ISO-8859-1',
  },
  body_str => "Happy birthday to you!\n",
);

# send the message
use Email::Sender::Simple qw(sendmail);
sendmail($message); 
```

当然，我可以转储 %INC，但输出包含大量模块。理想情况下，我想加载 Email::MIME 和 Email::Sender::Simple 并完成这项工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T23:42:53.320

我建议使用[`Mail::Sender`](http://search.cpan.org/perldoc?Mail%3a%3aSender)，你可以在 ActivePerl 中使用`ppm install Mail::Sender`，在 Linux 中使用

```
sudo apt-get install libmail-sender-perl 
```

这个模块非常通用，支持多个附件、内联、SMTP 密码身​​份验证（甚至包括 NTLM - 与 Exchange 服务器通信所必需的）。

这是使用以下方式发送 HTML 邮件的示例`Mail::Sender`：

```
use Mail::Sender;

my $sender = new Mail::Sender({
    # provider may require using port 587:
    smtp    => "smtp.example.com",
    # auth parameters below are optional
    # and depend on provider requirements
    auth    => "LOGIN",
    authid  => $username,
    authpwd => $password,
    from    => "myself@example.com",
});

$sender->Open({
    to       => "recipient@example.com",
    cc       => "anotherguy@example.com",
    subject  => "Subject line",
    ctype    => "text/html",
    encoding => "7bit",
}) or die ($Mail::Sender::Error, "\n");

my $html = "<html><body>Test HTML content</body></html>";

$sender->SendEx($html)
    or die ($Mail::Sender::Error, "\n");
$sender->Close();

print "Test message has been sent\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T23:30:15.083

*Email::Sender::Simple*和只是*Email::Sender*是两个不同的模块，所以你必须这样做：

从命令：

```
C:\>cpan
C:\>install Email::Sender::Simple 
```

就这样。

# jquery - jQuery，缩略图不透明度

> ID：14085861
> 
> 赞同：0
> 
> 时间：2012-12-29T20:57:14.683
> 
> 标签：jquery, opacity

我想在 jQuery 中做一个照片库，为此我想要 1 中的第一个缩略图的不透明度，以及 0.5 中的所有其他缩略图，一旦我的鼠标在缩略图上方，这个的不透明度就会为 1，当我的鼠标退出时，不透明度将恢复为 0.5。所以我做了所有这些，问题是我不想要我点击的缩略图的这个“mouseover”，“mouseout”代码，所以我所做的是：

```
var selector = $('.thumb:first'); 
```

然后

```
 $('.thumb').click(function() {
    selector = $(this);
  $(this).css('opacity','1'); 
```

$('.thumb').css('不透明度','0.5'); });

和

```
$('.thumb').mouseover(function() {
    if($(this) != selector){
    $(this).css('opacity','1');
    }
});

$('.thumb').mouseout(function() {
    if($(this) != selector){
    $(this).css('opacity','0.5');
    }
}); 
```

但它不起作用，只要我的鼠标离开我点击的最后一个缩略图，缩略图的不透明度就会变为 0.5 而不是保持在 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T21:04:55.783

听起来 CSS 可以为您处理！查看`first-child`或`first-of-type`伪选择器。通过将这样的表示逻辑从您的 JS 中移到 CSS 中，您将在未来帮助您自己和您的其他开发人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T21:09:48.093

`selector != $(this)`

将始终评估为`true`，因为它们是使用`new`关键字创建的单独对象实例。所以，同样地，

`$(this) != $(this)`

也将始终评估`true`为 。

尝试将类添加到拇指并以这种方式进行比较。

```
var classStr = $('.thumb:first').attr('class'); 
```

然后在您的事件处理程序中：

```
if ($(this).attr('class') !== classStr) {
    // elements are not the same
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T21:09:58.670

您可以向单击的拇指添加一个类，并检查拇指是否在鼠标悬停事件上具有该类。

```
$('.thumb').click(function() {
    $(this).addClass('clicked');
    $(this).css('opacity','1');
});

$('.thumb').mouseover(function() {
    if (!$(this).hasClass("clicked")) {
        $(this).css('opacity','1');
    }
});

$('.thumb').mouseout(function() {
    if (!$(this).hasClass("clicked")) {
        $(this).css('opacity','0.5');
    }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-29T21:23:32.447

JS：

```
$('.thumb:first').addClass("selected");

$('.thumb').click(function() {
  $('.thumb.selected').removeClass("selected");
  $(this).addClass("selected");
}); 
```

CSS：

```
.thumb { opacity: 0.5; }
.thumb:hover { opacity: 1; }
.thumb.selected { opacity: 1; }
.thumb.selected:hover { opacity: 1; } 
```

​ ​</p>

# python - 用 Tastypie 暴露模型方法

> ID：14085865
> 
> 赞同：11
> 
> 时间：2012-12-29T20:57:44.053
> 
> 标签：python, django, tastypie

我目前正在努力在我的 Django 项目中实现一个 API，而 Tastypie 似乎是最合适的。

我似乎无法解决的是如何使用 Tastypie 在我的模型中公开一个函数。

例如，我有这个模型：

```
class game(models.Model):
    id = models.AutoField("ID", primary_key=True, editable=False)
    ip_address = models.OneToOneField(IPAddress, verbose_name="IP Address")
    port = models.CharField("Port", max_length=5)
    name = models.CharField("Game Name", max_length=100)
    ram = models.IntegerField("RAM (mb)", max_length=10)
    node = models.ForeignKey(node)
    user = models.ForeignKey(User)
    config = models.ForeignKey(Config)
    mysqlserver = models.ForeignKey(MySQLserver)
    mysqlenabled = models.BooleanField("MySQL Created?")
    suspended = models.BooleanField("Suspended") 
```

在这个模型中，我有这样的功能：

```
def start(self):
    config = Config.objects.get(pk=self.config.id)
    cmds = config.startcmds
    game = config.gametype
    parsedcmds = self.replace_variables(cmds)

    client = phPanel.jelly.jelly.zmqclient(self.ip_address.address)
    data = {'user':self.generate_username(), 'method':'start_server', 'id':self.id, 'memory':self.ram, 'ip':self.ip_address.address,
            'port':self.port, 'startcmds':parsedcmds, 'game':game}

    result = client.send(data)
    return result 
```

我想通过 API 使用 sweetpie 来公开它。

我浏览了文档和食谱，但似乎找不到我要找的东西。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-27T12:14:58.303

在您的游戏资源中，您始终可以预先添加可以公开方法的新 url。例如（根据@BigglesZX 的评论编辑）：

```
from tastypie.resources import ModelResource
from tastypie.utils import trailing_slash

class GameResource(ModelResource):
    class Meta:
         queryset = Game.objects.all()
         resource_name = 'store'

    def prepend_urls(self):
        """ Add the following array of urls to the GameResource base urls """
        return [
            url(r"^(?P<resource_name>%s)/(?P<pk>\w[\w/-]*)/start%s$" %
                (self._meta.resource_name, trailing_slash()),
                self.wrap_view('start'), name="api_game_start"),
        ]

    def start(self, request, **kwargs):
         """ proxy for the game.start method """  

         # you can do a method check to avoid bad requests
         self.method_check(request, allowed=['get'])

         # create a basic bundle object for self.get_cached_obj_get.
         basic_bundle = self.build_bundle(request=request)

         # using the primary key defined in the url, obtain the game
         game = self.cached_obj_get(
             bundle=basic_bundle,
             **self.remove_api_resource_names(kwargs))

         # Return what the method output, tastypie will handle the serialization
         return self.create_response(request, game.start()) 
```

所以现在你可以使用下面的 uri "/game/[pk]/start/" 调用这个方法 所以 "/game/1/start/" 将调用 pk = 1 的游戏的启动方法

# jquery - 如何使用 Jquery 正确检查单击的元素

> ID：14085870
> 
> 赞同：1
> 
> 时间：2012-12-29T20:58:36.493
> 
> 标签：jquery, if-statement, click, css-transitions

我试图找出正确的方法，或者更好的方法是在单击元素时滑出导航块，然后在单击相同元素时隐藏导航块。这是我到目前为止所拥有的：

```
$('.menu').click(function(e) {

    e.preventDefault();

    $('#pic-slideNav').css('display', 'block');

    if ($.browser.webkit) {
        $('#pic-wrapper').css('-webkit-transform', 'translate(250px,0px)');
        console.log('This is Chrome');
    } else {
        $('#pic-wrapper').css('transform', 'translate(250px,0px)');
        console.log('This is Everything else');

    }
}); 
```

我还在检查浏览器类型，以便通过正确的 css 规则。

**更新了对我有用的代码：**

```
$('.menu-icon').click(function(e) {

    e.preventDefault();

    if($('#pic-slideNav').is(':visible')) {
        $('#pic-slideNav').hide();
        if ($.browser.webkit) {
            $('#pic-wrapper').css('-webkit-transform', 'translate(0px,0px)');
            console.log('This is Chrome');
        } else {
            $('#pic-wrapper').css('transform', 'translate(0px,0px)');
            console.log('This is Everything else');
        }

    } else {
        $('#pic-slideNav').show();
        if ($.browser.webkit) {
            $('#pic-wrapper').css('-webkit-transform', 'translate(250px,0px)');
            console.log('This is Chrome');
        } else {
            $('#pic-wrapper').css('transform', 'translate(250px,0px)');
            console.log('This is Everything else');
        }
    }

}); 
```

我确信有一种更清洁的方法可以实现这一目标，但它确实有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:19:14.030

你在寻找这样的[东西吗](http://jsfiddle.net/3rx5y/1/)

```
var i=0;
jQuery("#btn").click(function() {
    var t = (Math.pow(-1,i))*160;
    jQuery("#id").stop(true, false).animate({
        left: t
    }, 500);
    i = (i>10) ? 0 : (i+1);
});​ 
```

# jquery - 使用 jQuery 设置 HTML5 音频的属性音量不起作用

> ID：14085879
> 
> 赞同：5
> 
> 时间：2012-12-29T21:00:34.257
> 
> 标签：jquery, html, audio

我正在尝试使用 jQuery 设置音频元素的音量。

```
<audio class="audio" autoplay="autoplay" controls="controls" src="All_Right.mp3"></audio> 
```

所以我选择音频标签并设置音量，如下所示：

```
$('.audio').prop(volume, 0.1); 
```

但我得到了未捕获的参考错误：`volume is not defined`

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-29T21:36:47.730

在您的行中：

```
$('.audio').prop(volume, 0.1); 
```

您`volume`作为变量而不是字符串传递。您没有名为 的变量`volume`，这就是为什么您收到有关它未定义的错误的原因。尝试将其更改为：

```
$('.audio').prop("volume", 0.1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-25T21:18:58.733

试试这个代码：

```
$('.audio').volume = 0.1; 
```

# java - JSF 中基于表单的身份验证

> ID：14085881
> 
> 赞同：4
> 
> 时间：2012-12-29T21:00:40.000
> 
> 标签：java, security, jsf, authentication, jaspic

我想在 JSF/Primefaces 应用程序中实现一个简单的身份验证。我尝试了很多不同的东西，例如[Dialog - Login Demo](http://www.primefaces.org/showcase/ui/overlay/dialog/loginDemo.xhtml)对对话框进行了简单的测试，但它没有登录用户还是？

我还查看了 Java 安全性，例如：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Protected Area</web-resource-name>
        <url-pattern>/protected/*</url-pattern>
        <http-method>PUT</http-method>
        <http-method>DELETE</http-method>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <auth-constraint>
        <role-name>REGISTERED_USER</role-name>
    </auth-constraint>
</security-constraint> 
```

有了这个 /protected 下的所有内容都受到保护，但据我了解，我需要在服务器中定义一个领域以进行身份​​验证。我不想在服务器中指定它，而只是在数据库中进行简单的查找。

有没有一种方法来验证用户而不在应用程序服务器中定义一些东西？或者另一个简单的解决方案来验证和保护不同的页面？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T22:01:52.130

> 有没有一种方法来验证用户而不在应用程序服务器中定义一些东西？

这是一个漫长而充满荆棘*的*故事。它经常成为对 Java EE 的主要批评之一。

故事的核心是传统的 Java EE 应用程序应该使用“未解决的依赖项”进行部署。这些依赖项必须在应用程序服务器上得到满足，通常由非开发人员来满足，通常使用某种 GUI 或控制台。

安全配置是那些未解决的依赖项之一。

如果安全配置是在应用服务器上完成的，根据定义，这总是不可移植的，例如，它必须以应用服务器特定的方式完成。它完全排除了使用应用程序域模型（例如 JPA 实体`User`）进行此身份验证。

一些服务器（例如 JBoss AS）允许从应用程序中配置其专有的安全机制，并且还允许从应用程序加载“自定义登录模块”（几乎每个服务器的术语都不同）。通过一些小技巧，这将允许使用应用程序域模型和应用程序本身用于身份验证的相同数据源。

最后，还有一种相对未知的可移植方式从应用程序中进行身份验证。这是通过**JASPIC** SPI（也称为**JASPI**或**JSR 196** ）完成的。基本上，这个 JASPIC 似乎就是你要找的。

不幸的是，JASPIC 并不完美，尽管它是 Java EE 6 中的一项技术，而且我们几乎处于 Java EE 7 阶段，但目前在各种应用程序服务器中对 JASPIC 的支持仍然很粗略。最重要的是，即使 JASPIC 是标准化的，应用服务器供应商*仍然*以某种方式需要专有配置才能使其真正工作。

我写了一篇关于 JASPIC 的文章，更详细地解释了当前的问题：[Implementing container authentication in Java EE with JASPIC](http://arjan-tijms.blogspot.com/2012/11/implementing-container-authentication.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T15:09:41.917

通过简单地使用 Web 过滤器，我找到了适合我的简单解决方案。我已经向 web.xml 添加了一个过滤器，例如

```
<!-- Authentication Filter -->
<filter>
    <filter-name>AuthenticationFilter</filter-name>
    <filter-class>org.example.filters.AuthenticationFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>AuthenticationFilter</filter-name>
    <url-pattern>/protected/*</url-pattern>
</filter-mapping> 
```

过滤器看起来像这样

```
@WebFilter(filterName="AuthenticationFilter")
public class AuthenticationFilter implements Filter {

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        Cookie[] cookies = ((HttpServletRequest)request).getCookies();

        // Try to find a valid session cookie
        if (cookies != null) {
            String sessionId = null;
            for (Cookie cookie : cookies) {
                if ("sessionId".equals(cookie.getName())) {
                        sessionId = cookie.getValue();
                }
            }

            // Check if we have a valid session
            UserSession session = Backend.getInstance().getSessionGateway().getBySessionId(sessionId);

            if (session != null) {
                chain.doFilter(request, response);
                return;
            } else if (sessionId != null) {
                // Remove the cookie
                Cookie cookie = new Cookie("sessionId", null);
                cookie.setMaxAge(-1);
                ((HttpServletResponse)response).addCookie(cookie);
            }
        }

//      Problem due to relative path!!
//      ((HttpServletResponse)response).sendRedirect("../login.xhtml");
        RequestDispatcher rd = request.getRequestDispatcher("/login.xhtml");
        rd.forward(request, response);
    }
} 
```

所以我只需要实现一个 Bean 来验证和设置会话 cookie。我将添加用户代理以获得额外的安全性，但它基本上可以工作。

我唯一的问题是我无法进行重定向，因为它没有使用上下文路径，而只是重定向到 /index.xhtml 而不是 /my_app_context/index.xhtml

# php - 显示特定行的数量？

> ID：14085883
> 
> 赞同：-4
> 
> 时间：2012-12-29T21:00:43.560
> 
> 标签：php, mysql

我已经在几个小时内搜索了这个。我对 PHP 很陌生，所以我不明白我做错了什么以及为什么做错了。这就是我想要的：假设我有这张桌子：

```
Player    |online
----------|------
Max       |  0
Jacob     |  1
Peter     |  1
Jørgen    |  1
osborne   |  0
Jimmy     |  1 
```

我想要一个脚本，它可以在线打印出带有“1”的行数，所以它会在我的网站上写下数字“4”（在这种情况下）。

我该怎么做呢？请发布完整的脚本，因为我是一个完整的新手：s

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:02:21.690

尝试这个：：

```
Select count(online) from myTable where online=1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T21:02:30.513

您的查询将如下所示：

```
SELECT COUNT(*) as `rows` FROM `users` WHERE online = 1; 
```

然后你就用`fetch_row_assoc`or 什么，然后 echo `$result_set['rows']`;

# javascript - jquery选择和取消选择多个输入而无需ctrl单击

> ID：14085886
> 
> 赞同：4
> 
> 时间：2012-12-29T21:01:04.057
> 
> 标签：javascript, jquery, jquery-selectors

这是场景：

```
<select id="id_user" name="user" multiple="multiple">
    <option value="1">User 1</option>
    <option value="2">User 2</option>
    <option value="3">User 3</option>
    <option value="4">User 4</option>
</select>

<span id="select1">Select 1 user</span> <span id="remove1">Remove 1 select</span>
<span id="select2">Select 2 user</span> <span id="remove2">Remove 2 select</span>
<span id="select3">Select 3 user</span> <span id="remove3">Remove 3 select</span>
<span id="select4">Select 4 user</span> <span id="remove4">Remove 4 select</span>

<script type="text/javascript">
    $("#select1").click(function(){ $("#id_user").val("1").prop("selected", true);

    ???

    });
    $("#remove1").click(function(){ $("#id_user").val("1").prop("selected", false);

    ???

    });
</script> 
```

例如，我想让用户单击 Select 1 span，然后单击 Select 2 span，**这两个**选项都将在多选中被选中。然后，如果用户单击 Remove 1 select span，则只会删除 Select 1。我不知道如何完成这项任务。当我使用#select2、#select3 (...) 创建其他单击功能时，单击一个选择会删除最后一次单击选择的选项。删除选项也有同样的问题。如何创建Ctrl-click效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T21:30:02.360

如果你有这个 HTML：

```
<select id="id_user" name="user" multiple="multiple">
    <option value="1">User 1</option>
    <option value="2">User 2</option>
    <option value="3">User 3</option>
    <option value="4">User 4</option>
</select>
<br/>
<span class="select" value="1">Select 1 user</span> | <span class="remove" value="1">Remove 1 select</span><br/>
<span class="select" value="2">Select 2 user</span> | <span class="remove" value="2">Remove 2 select</span><br/>
<span class="select" value="3">Select 3 user</span> | <span class="remove" value="3">Remove 3 select</span><br/>
<span class="select" value="4">Select 4 user</span> | <span class="remove" value="4">Remove 4 select</span><br/> 
```

并使用了这个javascript：

```
$(".select,.remove").click(function(){
    var option = $("#id_user").find("option[value='" + $(this).attr("value") + "']");
    option.prop("selected", $(this).is(".select"));
}); 
```

您最终将得到控制多选列表中所选项目的跨度。可以在[这个 jsfiddle](http://jsfiddle.net/kqzFL/1/)中预览。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T21:31:12.993

我为您创建了一个工作示例：http: [//jsfiddle.net/Gajotres/WESdZ/](http://jsfiddle.net/Gajotres/WESdZ/)

```
$("#select1, #select2, #select3, #select4").click(function(){
    $("#id_user option[value='" + $(this).attr('id').replace("select","") + "']").prop("selected", true);
});
$("#remove1, #remove2, #remove3, #remove4").click(function(){
    $("#id_user option[value='" + $(this).attr('id').replace("remove","") + "']").prop("selected", false);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T21:40:15.603

您可以动态生成控件...（参见[现场演示](http://jsfiddle.net/cEr56/)）：

```
<div id="selectControls"></div>

<script type="text/javascript">
$(function() {
    $('#id_user > option').each(function() {
        var $this = $(this);
        $('#selectControls').append($('<span></span>')
            .text("Select " + $this.val() + " user")
            .click(function() { $this.attr('selected', true); $('#id_user').focus(); })
        ).append('&nbsp;').append($('<span></span>')
            .text("Deselect " + $this.val() + " user")
            .click(function() { $this.removeAttr('selected'); $('#id_user').focus(); })
        ).append('<br />');
    });
});
</script> 
```

生成您自己的控件不仅是一个更好的解决方案，如果您在列表中添加/删除`OPTION`元素，它可以避免维护......并且如果您的选择增加，则可以缩短从服务器下载的 HTML。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-29T21:50:26.347

首先控制键使用`event.which` [http://api.jquery.com/event.which/](http://api.jquery.com/event.which/)

以下还使用`data-`属性来定义项目编号：

```
<span class="item_select" data-item="1">Select 1 user</span> 
```

如果您将所有 ID 更改为 2 个类`item_select`，`item_remove`如下所示将在单击跨度时管理选择标签：

```
var ctrlKey = false;
$(document).on('keydown keyup',function(e) {
    if (e.which === 17) {
        ctrlKey = e.type=='keydown';
    }
});

var $user = $('#id_user')
$('.item_select,.item_remove ').click(function() {
    var isSelect = $(this).is('.item_select');
    /* reset if ctrl key not active*/
    if (!ctrlKey && isSelect) {
        $user.val('')
    }
    $user.find('option[value="' + $(this).data('item') + '"]').prop('selected', isSelect)
}); 
```

演示：http: [//jsfiddle.net/pR9vj/6/](http://jsfiddle.net/pR9vj/6/)

# javascript - 使用 css 浮动的 Jquery 动画

> ID：14085888
> 
> 赞同：4
> 
> 时间：2012-12-29T21:01:13.247
> 
> 标签：javascript, jquery, html, css, css-float

我的代码有问题，宽度似乎有效，但浮动没有。这里是：

**这是一个例子：**

[http://jsfiddle.net/v82ck/](http://jsfiddle.net/v82ck/)

**问题：悬停时菜单上的浮动属性没有改变，我希望每个菜单元素下方的行在悬停该菜单元素时滑动到元素下方。**

代码并不复杂，我只是不知道发生了什么

**JAVASCRIPT**：

```
 $(document).ready(function () { 
    $('#line-menu').css({ //initial state
        'float': 'left',
         'width' : $('#menu-1').width(),
    });
    $('#menu-1').hover(function(){ //first menu element
        var width = $(this).width();

        $('#line-menu').animate({
            'float': 'left',
            'width' : width
        },  "slow");
    });
    $('#menu-2').hover(function(){ //second menu element

        var width = $(this).width();

        $('#line-menu').animate({ 
            'float': 'none', 
            'width' : width
        },  "slow");
    });
    $('#menu-3').hover(function(){ //third menu element

        var width = $(this).width();

        $('#line-menu').animate({
            'float': 'right',
            'width' : width
        },  "slow");
    });
}); 
```

CSS，所以你可以看到它

**CSS：**

```
#line-menu{
    height: 3px;
    width: 100px;
    position:absolute;
    z-index:50;
    background: #CC0000;
    margin-left:55px;
    padding-left:3px;
    padding-right:3px;
}
#line-menu-container{
    text-align: center;
    min-width: 617px;
    max-width: 1113px;
    margin-left: auto;
    margin-right: auto;
} 
```

这是冲突的部分

**HTML：**

```
<header> 
    <div id='menu'>
        <div class='menu-element' id='menu-1'>HORARIOS</div>
        <div class='menu-element' id='menu-2'>UBICACI&Oacute;N</div>
        <div class='menu-element' id='menu-3'>CONTACTO</div>
    </div>
</header>

   <div id='line-menu-container'> //the line contained in a container just to fix the centered position
       <div id='line-menu' ></div>
   </div> 
```

我使用的 jquery 库是[https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js)

我问你们，因为我真的不知道如何解决它......

* * *

**编辑：**已经有一段时间了（2年）。如果我不得不再次这样做，我将使用抽象，例如使用像 twitter bootstrap 这样的框架。没有必要重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T21:06:24.800

您不能将`float`属性用于绝对定位的元素。实际上它并没有改变任何东西，`position: relative`而是使用它。

看来你想根据悬停元素的偏移量来定位`width`元素`left`，你可以使用`offset`方法和 CSS`left`属性而不是`float`属性：

```
$(document).ready(function () {    
    var $first = $('#menu-1'), $line = $('#line-menu');
    $line.css({
        'width' : $first.width(),
        'left'  : $first.offset().left
    });
    $('#menu > div').mouseenter(function(){
        var $this = $(this),
            width = $this.width(),
            left  = $this.offset().left;

        $line.stop().animate({
            'left'  : left,
            'width' : width
        },  "slow");
    });
}); 
```

[http://jsfiddle.net/2dwJR/](http://jsfiddle.net/2dwJR/)

# objective-c - 进行连续循环以从 iTunes 获取信息的最佳方式是什么？

> ID：14085893
> 
> 赞同：0
> 
> 时间：2012-12-29T21:01:29.827
> 
> 标签：objective-c, macos, cocoa, loops, nstimer

我想进行连续循环以从 iTunes 获取信息以获取以下内容：播放器位置 (1:37)、正在播放的当前曲目等...我正在使用`iTunes.h`并`ScriptingBridge`获取 iTunes 数据。

我尝试过使用`[NSTimer scheduledTimerWithTimeInterval:0 target:self selector:@selector(getInformation) userInfo:nil repeats:YES];`，但从我在活动监视器上看到的情况来看，这会消耗大量 CPU，例如，如果我`NSWindow`在我拥有`NSTimer`应用程序的 UI 的地方按下一个按钮，这应该会会更新，不会更新。如果我松开按钮，UI 就会开始正常更新。
我也尝试过使用 a`while(1){}`但由于某种原因我的应用程序冻结了。

any1 对如何执行我正在寻找的内容有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T21:04:27.340

那会像疯了一样烧毁CPU..不要投票！

* * *

注册分发通知：

```
//the distributed notification sent
#define SONG_CHANGE_NOTIFICATION @"com.apple.iTunes.playerInfo" 
```

* * *

无耻的广告：查看 github 上的 DDBoomBox 的源代码，它完全符合您的要求 :)

[https://github.com/Daij-Djan/BoomBox](https://github.com/Daij-Djan/BoomBox)

# ios - 如何使用 UIActivityViewController 标记 Facebook 页面

> ID：14085896
> 
> 赞同：0
> 
> 时间：2012-12-29T21:02:04.030
> 
> 标签：ios, facebook, uiactivityviewcontroller

我正在使用 UIActivityViewController 在 iOS 6 中发布到 Facebook，并且工作正常。但是，当我尝试通过在消息中包含 @pagename 来标记 Facebook 页面时，会发布原始文本“@pagename”并且未链接到该页面。我可以直接在 Facebook 网站上执行此操作，因此我知道页面名称是正确的。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:54:08.713

经过大量搜索，我确定当前的 UIActivityViewController API 无法做到这一点。即使它确实有效，您也需要先“喜欢”一个页面，然后才能标记它，所以这不适用于我的情况。

# emacs - 使用什么（而不是 Cx Cf）来打开 UTF-8 编码的文件？

> ID：14085904
> 
> 赞同：3
> 
> 时间：2012-12-29T21:02:47.883
> 
> 标签：emacs

我知道`-*- coding: utf-8 -*-`在文件顶部附近包含一个指令会告诉 Emacs 采用 UTF-8 编码，但通常情况下，我想打开不包含此类指令的 UTF-8 编码文件。（在某些情况下，修改文件以添加编码指令并不是什么大问题，但即便如此，这也是一个非常不令人满意的解决方案。）

> 在这种情况下，我应该使用什么（而不是 plain `C-x C-f`）来打开使用 UTF-8 作为编码系统的文件？

编辑：要明确：即使是“现代 Emacs”有时也会猜出错误的编码系统（可能是由于文件中的错误或损坏）；我想告诉 Emacs：*当打开这个文件时，忽略你的启发式，**假设**一个 UTF-8 编码*。`-*- coding: utf-8 -*-`基本上，我想要一个不需要我修改文件的指令的等效项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T23:06:55.430

尝试为您的命令添加前缀`C-x``RET``c`以手动指定编码系统。例如：

`C-x``RET``c``utf-8``RET` *（告诉 emacs 应该使用以下命令`utf-8`）*

`C-x``C-f``path/to/your/file``RET` *（打开文件）*

* * *

但正如评论中所指出的，如果您的系统配置良好，通常不需要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T10:33:59.000

如前所述，使用现代 Emacs，您无需为正确打开 utf-8 编码文件做任何事情。

也就是说，`set-language-environment`在你的 .emacs 中查找，你可以尝试删除它，或者写：

```
(set-language-environment "utf-8") 
```

用于配置 Emacs 使用 utf-8 作为默认编码。

# java - 如何以相同的顺序遍历 SortedMap？

> ID：14085906
> 
> 赞同：3
> 
> 时间：2012-12-29T21:03:02.313
> 
> 标签：java, map, sortedmap

可以使用来自的迭代器来迭代 SortedMap `myMap.entrySet().iterator()`。但是这个迭代器是否保留了排序后的地图对象的顺序？

SortedMap 接口没有自己的方法来遍历条目。**遍历**条目的标准方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T21:08:03.647

对于键和条目，标准迭代器保证迭代顺序与键的自然顺序完全相同。这在[文档](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html)中进行了说明，并且可以轻松测试。

另一方面，如果您有兴趣以与插入键相同的顺序保留键和条目的迭代顺序，那么您正在寻找[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)。

# xml - 为什么 clojure.data.xml 不会往返我的 svg 文件？

> ID：14085909
> 
> 赞同：0
> 
> 时间：2012-12-29T21:03:17.750
> 
> 标签：xml, clojure, svg

这是一个文件**yo.svg**：

```
<svg  width="200" height="200" xmlns="http://www.w3.org/2000/svg">
<circle cx="50" cy="50" r="50" stroke="black"  stroke-width="2" fill="red" />
</svg> 
```

Firefox 和 Chrome 都将其呈现为带有黑色边框的红色圆圈。（我不知道其他浏览器在做什么）。

下面是一些 clojure 代码（1.4 版），它将其写入**yo.svg**、解析、重新编码，然后将结果写入**yo2.svg**，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<svg width="200" height="200">
  <circle cx="50" cy="50" r="50" stroke="black" stroke-width="2" fill="red"/>
</svg> 
```

显然，clojure 正在做出改变。两种浏览器都不会呈现**yo2.svg**。

我在想我做错了什么，但大量的研究让我感到困惑：

我想知道为什么 clojure 进行这些更改，以及我是否应该忽略 clojure.data.xml 并手动生成 xml，或者使用 clojure.data.xml 做中间位并编写我自己的标头。svg 甚至是一种 xml 吗？

这是我的clojure程序：

```
(require 'clojure.data.xml)
(let [ xml-picture "<svg  width=\"200\" height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">
<circle cx=\"50\" cy=\"50\" r=\"50\" stroke=\"black\"  stroke-width=\"2\" fill=\"red\" />
</svg>"

      round-trip-picture (clojure.data.xml/indent-str
                             (clojure.data.xml/parse-str
                              xml-picture))]

  (spit "yo.svg" xml-picture)
  (spit "yo2.svg" round-trip-picture)
  (println xml-picture)
  (println "------------------")
  (println round-trip-picture)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T23:36:11.557

你想要的是：

```
(clojure.data.xml/parse-str xml-picture :namespace-aware false) 
```

这样，解析器会将命名空间标记视为另一个属性。否则它不会在解析树中包含 xmlns 标记。

# d3.js - 使用 d3js 制作烛台或 ohlc 图表

> ID：14085915
> 
> 赞同：17
> 
> 时间：2012-12-29T21:04:09.713
> 
> 标签：d3.js

是否可以使用 d3js 或从其中一个或其分支构建的插件制作 OHLC 或烛台图表？d3.js 是一个非常强大的内置 javascript 图表库，使用它的惊人功能进一步自定义使用它构建的图表会很好。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T22:56:43.867

我找到了这个，看起来很漂亮。

[http://phrogz.net/js/d3-playground/#StockPrice_HTML](http://phrogz.net/js/d3-playground/#StockPrice_HTML)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-29T21:11:54.880

看看[这个例子](http://bl.ocks.org/1074045)。它完全符合您的要求。

更新：上面的链接目前已损坏，但@lakenen 非常友好地在[此处](http://bl.ocks.org/8529857)提供了一个固定版本。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-09-29T11:17:17.413

I know this question is an old question but I spent lots of time looking for a working example in 2017 and found very little.

Below is a working format for a candlestick chart using d3.js v4\. The data in the code below is an array which in my case was being brought in from c# in the back.

```
 var twoHundredDayCandleStickChart = [];

    var width = 900;
    var height = 500;
    var margin = 50;

    function min(a, b) { return a < b ? a : b; }

    function max(a, b) { return a > b ? a : b; }

    var y = d3.scaleLinear().range([height - margin, margin]);

    var x = d3.scaleTime().range([margin, width - margin]);

    //line for the sma
    var line1 = d3.line()
        .x(function (d) { return x(d["date"]); })
        .y(function (d) { return y(d["sma"]); });

    function buildChart(data) {

        data.forEach(function (d) {
            d.date = new Date(d.date);
            d.high = +d.high;
            d.low = +d.low;
            d.open = +d.open;
            d.close = +d.close;
            d.sma = +d.sma;
        });

    var chart = d3.select("#divId")
        .append("svg")
        .attr("class", "chart")
        .attr("width", width)
        .attr("height", height);

    y.domain([d3.min(data.map(function (x) { return x["low"]; })), d3.max(data.map(function (x) { return x["high"]; }))])

    x.domain(d3.extent(data, function (d) { return d["date"]; }))

    chart.selectAll("line.x")
        .data(x.ticks(10))
        .enter().append("line")
        .attr("class", "x")
        //.text(String)
        .attr("x1", x)
        .attr("x2", x)
        .attr("y1", margin)
        .attr("y2", height - margin)
        .attr("stroke", "#ccc");
    chart.selectAll("line.y")
        .data(y.ticks(10))
        .enter().append("line")
        .attr("class", "y")
        .attr("x1", margin)
        .attr("x2", width - margin)
        .attr("y1", y)
        .attr("y2", y)
        .attr("stroke", "#ccc");

    chart.append("g")
        .attr("transform", "translate(0," + 450 + ")") //need to change this 450 to a variable- it is how far down the axis will go
        .attr("class", "xrule") 
        .call(d3.axisBottom(x))
        .selectAll("text")
        .style("text-anchor", "end")
        .attr("dx", "-.8em")
        .attr("dy", ".15em")
        .attr("transform", function (d) {
        return "rotate(-65)"
        });

    chart.selectAll("text.yrule")
        .data(y.ticks(10))
        .enter()
        .append("text")
        .attr("class", "yrule")
        .attr("x", 0)
        .attr("y", y)
        .attr("dy", 0)
        .attr("dx", 20)
        .attr("text-anchor", "middle")
        .text(String);

    chart.selectAll("rect")
        .data(data)
        .enter().append("rect")
        .attr("x", function (d) { return x(d["date"]); })
        .attr("y", function (d) { return y(max(d["open"], d["close"])); })
        .attr("height", function (d) { return y(min(d["open"], d["close"])) - y(max(d["open"], d["close"])); })
        .attr("width", function (d) { return 0.5 * (width - 2 * margin) / data.length; })
        .attr("fill", function (d) { return d["open"] > d["close"] ? "red" : "green"; });

    chart.selectAll("line.stem")
        .data(data)
        .enter().append("line")
        .attr("class", "stem")
        .attr("x1", function (d) { return x(d["date"]) + 0.25 * (width - 2 * margin) / data.length; })
        .attr("x2", function (d) { return x(d["date"]) + 0.25 * (width - 2 * margin) / data.length; })
        .attr("y1", function (d) { return y(d["high"]); })
        .attr("y2", function (d) { return y(d["low"]); })
        .attr("stroke", function (d) { return d.open > d.close ? "red" : "green"; });

    chart.append("path")
        .data([data])
        .attr("d", line1)
        .attr("class", "line")
        .style("stroke", "white")
        .attr("fill", "none")
        .attr("stroke-width", 2);
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-09-30T23:37:16.330

[techan.js](http://techanjs.org/)做你需要的。如他们的主页所示：

> 基于 D3 构建的可视化、股票图表（烛台、OHLC、指标）和技术分析库。为现代和移动浏览器构建交互式财务图表。

[![TechanJS](../Images/0094e97a28319f394b8f88eb66c62244.png)](https://i.stack.imgur.com/l6lxE.png)

[这里](http://bl.ocks.org/andredumas/27c4a333b0e0813e093d)显示了 Andre Dumas 的另一个工作示例，带有示例代码。上次更新时间为 2017 年 7 月 7 日。

[![TechanJS_demo](../Images/6f2ee4cc7f6df8d14b3e645427aab9bd.png)](https://i.stack.imgur.com/B9FbJ.png)

# iphone - 从另一个 UIViewController 文本框获取文本框的值

> ID：14085918
> 
> 赞同：0
> 
> 时间：2012-12-29T21:04:24.547
> 
> 标签：iphone, cocoa-touch, uitextview, viewcontroller

我有一个带有与 PickerView 链接的文本框的视图 1。我有一个带有文本框的视图 2。View 1 通过 Modal segue 与 View 2 链接。

如何将 textbox.View1 中的值用于 texbox.View2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T22:47:23.997

第一个视图控制器应该实现 prepareForSegue: 并为第二个视图控制器提供它需要的值：

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([[segue identifier] isEqualToString:@"TheSegueThatTriggersViewController2"]) {
        ViewController2 *vc2 = (ViewController2 *)segue.destinationViewController;
        vc2.vc2TextBox.text = self.vc1TextBox.text;
    }
} 
```

# objective-c - 在 UITableViewController 底部添加一个按钮 - 工具栏替代

> ID：14085921
> 
> 赞同：1
> 
> 时间：2012-12-29T21:05:06.877
> 
> 标签：objective-c, ios

我有一个`UITableViewController`并且我想在屏幕底部添加一个固定的单个按钮。

我不希望它与表格的其余部分一起滚动。我知道我需要按钮和表格视图处于同一级别，但我不知道如何使用`TableViewController`.

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:09:09.747

您并没有真正解释为什么工具栏不是一个选项，但这将是最简单的方法。您也可以通过使您的视图控制器不继承自 来做到这一点`UITableViewController`，而是从`UIViewController`. 然后添加一个占据整个屏幕的表格视图，减去底部的一个小区域，然后您可以在其中放置按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T21:09:39.097

在 xib 中，放置“UITableview `in a`UIView”（新的“根”视图）并制作`UITableview`高度 view.height - 高度约为 44px，在视图中放置一个 UIButton，在桌子下方 :)

您可能需要将 tableViewController 子类化..实际上没有..您需要一个默认的 UIViewController 代替，这没关系，因为 tableViewController 本身并没有太多作用：D

```
@interface BetterTableVC : UIViewController<UITableViewDataSource, UITableViewDelegate>
@property(weak) IBOutlet UITableView *tableView;
@end 
```

# android - Android 没有选择正确的布局文件

> ID：14085922
> 
> 赞同：0
> 
> 时间：2012-12-29T21:05:16.643
> 
> 标签：android, android-layout, layout

我有 3 个不同的布局文件

```
layout/
    main.xml
layout-large/
    main.xml
layout-sw600dp/
    main.xml 
```

我的 nexus 7 一直在使用`layout/main.xml`

我必须做些什么才能让它使用该`layout-sw600dp/main.xml`文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T22:52:13.310

文档没有提到它，但你必须`supports-screens`在 AndroidManifest.xml 中正确设置

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.gpsinsight.gpsandroid"                                                             
      android:versionCode="1"
      android:versionName="1.0">
    <supports-screens
        android:smallScreens="true"
        android:normalScreens="true"        android:largeScreens="true"
        android:xlargeScreens="true" />
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="MainActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

# mysql - MySQL Select：时间大于时间小于时间的地方

> ID：14085923
> 
> 赞同：6
> 
> 时间：2012-12-29T21:05:35.987
> 
> 标签：mysql, between

我有一个接受两个时间参数的函数：`$start_time`，`$end_time` 每个参数在 php 中定义为时间

```
$start_time = date("H:i:s",strtotime($start)); ->like "06:12:44"
$end_time = date("H:i:s",strtotime($end)); ->like "08:22:14" 
```

我想构建一个查询，在这些时间之间给出结果这是我的功能

```
function statistics_connected_hour($gateway_id , $date_sql ,$start_time ,$end_time){
$statistics_connected = mysql_query(

    "SELECT * 
       FROM cdr_table 
       WHERE OwnerUserID ='$_SESSION[user_id]'
       AND GatewayID = $gateway_id
       AND DATE(Dialed) = $date_sql
       AND Dialed != 0
       AND Hour(StartTime) BETWEEN ('$start_time') AND ('$end_time')
    "); 

return $statistics_connected;
} 
```

数据库中的 StartTime 列定义为“2012-12-28 13:32:28”

查询不返回任何结果，尽管应该返回当我检查时->

```
$num = mysql_num_rows($statistics_connected); 
```

它总是在 $num 中返回 0

谁能帮我理解问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T21:12:25.567

你想要[`TIME()`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_time)，没有[`HOUR()`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_hour)。

```
SELECT * FROM cdr_table 
WHERE OwnerUserID = '$_SESSION[user_id]'
  AND GatewayID = $gateway_id
  AND DATE(Dialed) = $date_sql
  AND Dialed != 0
  AND TIME(StartTime) BETWEEN '$start_time' AND '$end_time' 
```

此外，我*强烈*建议您转义您嵌入 SQL 代码中的所有变量[`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string)或等效变量，即使您确定它们没有任何害处，只是为了养成习惯。

请注意，这样的查询本质上可能效率低下，因为它不能利用`StartTime`列上的索引。如果表中有很多可能匹配的行，最好通过创建一个*仅*存储时间部分的单独列`StartTime`并在其上设置索引（可能与其他相关列组合）来对表进行非规范化.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T21:11:05.617

原因是因为您正在提取 HOUR 并与时间进行比较，您需要转换时间部分尝试您的查询：

```
SELECT 

* 
FROM cdr_table 
WHERE 
OwnerUserID ='$_SESSION[user_id]' 
AND GatewayID = $gateway_id 
AND DATE(Dialed) = $date_sql 
AND Dialed != 0 
AND DATE_FORMAT(StartTime,'%r') BETWEEN ('$start_time') AND ('$end_time') 
```

# c# - 为什么在 lock 语句中必须指定同步对象

> ID：14085924
> 
> 赞同：3
> 
> 时间：2012-12-29T21:05:36.360
> 
> 标签：c#, synchronization, locking

我正试图围绕[lock 语句](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx)中究竟发生了什么。

如果我理解正确，lock 语句是语法糖，以下是...

```
Object _lock = new Object();

lock (_lock)
{
    // Critical code section
} 
```

...被翻译成大致如下：

```
Object _lock = new Object();

Monitor.Enter(_lock);
try
{
    // Critical code section
}
finally { Monitor.Exit (_lock); } 
```

我已经使用了几次 lock 语句，并且总是创建一个私有字段`_lock`，作为一个专用的同步对象。我确实理解为什么您不应该锁定公共变量或类型。

但是为什么编译器不创建该实例字段呢？我觉得实际上可能存在开发人员想要指定锁定什么的情况，但根据我的经验，在大多数情况下，这完全没有兴趣，你只想要那个锁！那么为什么没有无参数的锁重载呢？

```
lock()
{
   // First critical code section
}

lock()
{
   // Second critical code section
} 
```

将被翻译成（或类似的）：

```
[DebuggerHidden]
private readonly object _lock1 = new object()

[DebuggerHidden]
private readonly object _lock2 = new object()

Monitor.Enter(_lock1);
try
{
    // First critical code section
}
finally { Monitor.Exit(_lock1); }

Monitor.Enter(_lock2);
try
{
    // Second critical code section
}
finally { Monitor.Exit(_lock2); } 
```

**编辑**：我显然不清楚多个锁定语句。更新了问题以包含两个锁定语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T21:07:46.253

需要存储锁的*状态。*是否输入。这样可以阻止另一个尝试进入同一锁的线程。

这需要一个变量。只是一个非常简单的，一个普通的对象就足够了。

对这样一个变量的硬性要求是它是在任何 lock 语句使用它*之前创建的。*尝试按照您的建议即时创建它会产生一个新问题，现在需要使用锁来安全地创建变量，以便只有进入锁的第一个线程创建它，而其他线程试图进入锁在创建之前被阻塞。这需要一个变量。等等，一个无法解决的先有鸡还是先有蛋的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T21:15:19.243

在某些情况下，您将需要两个不同`lock`的 '，它们彼此独立。这意味着当代码的一个“可锁定”部分被锁定时，其他“可锁定”部分不应被锁定。这就是为什么能够提供锁定对象的原因 - 您可以将其中几个用于几个独立`lock`的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T02:27:27.427

In order for the no-variable thing to work, you'd have to either:

*   Have one auto-generated lock variable per lock block (what you did, which means that you can't have two different lock blocks locking on the same variable)
*   Use the same lock variable for all lock blocks in the same class (which means you can't have two independent things protected)

Plus, you'd also have the issue of deciding whether those should be instance-level or static.

In the end, I'm guessing the language designers didn't feel that the simplification in one specific case was worth the ambiguity introduced while reading code. Threading code (which is the reason to use locks) is already hard to write correctly and verify. Making it harder would be a not-good thing.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T21:17:01.217

允许隐式锁定对象可能会鼓励使用单个锁定对象，这被认为是不好的做法。通过强制使用显式锁定对象，该语言鼓励您将锁定命名为有用的名称，例如“countIncementLock”。

因此命名的变量不会鼓励开发人员在执行完全独立的操作时使用相同的锁对象，例如写入某种流。

因此，对象可以在一个线程上写入流，同时在另一个线程上增加计数器，并且两个线程都不会相互干扰。

该语言不这样做的唯一原因是因为它看起来像是一个好的做法，但实际上隐藏了一个不好的做法。

**编辑：**

也许 C# 的设计者不想要隐式锁定变量，因为他们认为这可能会鼓励不良行为。

也许设计者根本没有考虑隐式锁变量，因为他们首先要考虑其他更重要的事情。

如果每个 C# 开发人员在编写时都确切地知道发生了什么`lock()`，并且他们知道其中的含义，那么它没有理由不存在，也没有理由不应该按照您的建议工作。

# mono - 在 OpenSuse 中运行 NuGet

> ID：14085934
> 
> 赞同：0
> 
> 时间：2012-12-29T21:06:54.877
> 
> 标签：mono, nuget, opensuse

我正在尝试使用单声道在 OpenSuse 中运行 NuGet.exe (Nuget BootStrapper)。我正在关注[这里](http://monomvc.wordpress.com/)提到的文章。但我面临问题。当我尝试使用单声道运行 NuGet.exe 时，会出现错误，提示 NuGet 包还原未启用，请使用 Visual Studio 启用它或设置环境变量。显然我在 Linux 中没有 Visual Studio，所以我尝试使用导出设置环境变量。但我仍然遇到同样的错误。

我被困在那里。

如果需要任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T23:49:01.300

您收到的错误是因为 NuGet 包还原需要同意。可以在此处找到有关此软件包恢复同意的更多信息：http: [//blog.nuget.org/20120518/package-restore-and-consent.html](http://blog.nuget.org/20120518/package-restore-and-consent.html)

默认情况下，包还原使用`NuGet.exe install`带有`-RequireConsent`选项（[命令参考](http://docs.nuget.org/docs/reference/command-line-reference#Install_Command)）的命令。您可以`NuGet.targets`在 $(SolutionDir).nuget 文件夹（默认）的 MSBuild 文件中找到它。只需**删除 -RequireConsent 选项**。

如果你没有使用 -RequireConsent 选项，NuGet 包还原不应该寻找环境变量，你的问题应该不再存在。

# c# - 对字典应用双重检查锁定是否安全？

> ID：14085937
> 
> 赞同：2
> 
> 时间：2012-12-29T21:07:08.217
> 
> 标签：c#

应用双重检查锁定是否安全`Dictionary`？

`TryGetValue`即，从不同线程调用和其他“获取/包含”方法是否安全？（不调用其他非 get 方法）。

**upd**收藏对 N 个读者和 1 个作者来说是安全的吗？假设在循环 10 中，线程尝试使用双重检查锁定访问带有键 X 的元素，如果访问，它们只是将其删除。在某些时候，我确实从另一个线程添加了带有键 X 的元素（使用锁）。我希望只有一位读者应该获得此元素并将其删除。

**upd2，关于答案**，所以我的问题令人困惑。其实我问了两个问题：

1.  `TryGetValue`从不同线程调用和其他“获取/包含”方法是否安全？（不调用其他非 get 方法）。
2.  收藏对 N 位读者和 1 位作者来说是安全的吗？

第一个问题的答案是肯定的，第二个问题的答案是否定的。

所以有时它是安全的，`apply double-checked locking`有时它不是。这取决于您是否同时写入集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T21:11:58.750

我假设你在谈论泛型`Dictionary<TKey, TValue>`类。该课程对 N 个读者或 1 个作者是安全的。因此，只要您不修改它，您就可以拥有想要从中读取的任意数量的线程，而无需锁定。

如果线程可能要修改字典，则必须同步对它的访问。我建议[ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T21:54:41.293

这是不安全的，因为它没有被证明是安全的。你不能有一个作者和 N 个读者。

这是文档中的一个适用句子：

> 只要不修改集合，字典就可以同时支持多个阅读器。

实际上，如果您使用 Reflector 查看 Dictionary，您会发现它是不安全的，但这不是重点。关键是您不能依赖未记录的属性，因为它们可以随时更改，将错误引入生产中，而没人知道。

您也无法测试它是否安全。它可能适用于您的盒子并在其他地方损坏。这是线程错误的本质。不值得。

# html - 如何在 html5 输入中使用“form=form_id”属性

> ID：14085941
> 
> 赞同：0
> 
> 时间：2012-12-29T21:08:17.040
> 
> 标签：html

我正在尝试对 html5 输入使用“form”属性，如下所述：

[1] [http://www.w3schools.com/html5/att_input_form.asp](http://www.w3schools.com/html5/att_input_form.asp)

[2] [http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_input_form](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_input_form)

属性的描述说 form 属性：“为元素所属的一个或多个表单指定一个空格分隔的 id 列表”

我正在使用 W3C 的 TryIt 编辑器中的以下代码对此进行测试（上面的链接 2）

```
<form action="demo_form.asp" id="form1">
First name: <input type="text" name="fname" /><br>
<input type="submit" value="Submit" />
</form>

<form action="demo_form.asp" id="form2">
First name: <input type="text" name="fname" /><br>
<input type="submit" value="Submit" />
</form>

Last name: <input type="text" name="lname" form="form1 form2" /> 
```

我在 form2 中提供了“string_for_form2”，在 lname 字段中提供了“lastname”。我得到的输出为：

```
fname=string_for_form2 
```

代替

```
fname=string_for_form2&lname=lastname 
```

任何想法为什么结果不符合预期？我已经尝试过 Firefox 17 和 Chrome 23。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:14:24.537

因为您正在尝试分配两个表单所有者。

> “默认情况下，与表单关联的元素与其最近的祖先表单元素相关联（如下所述），但可能具有指定的表单属性来覆盖它。”
> 
> > [http://www.w3.org/TR/html5/forms.html#association-of-controls-and-forms](http://www.w3.org/TR/html5/forms.html#association-of-controls-and-forms)

这个属性只允许标记的灵活性，它不会改变以前规范的表单所有权范式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T08:44:53.263

我在 W3C HTML5 规范中找不到任何内容来支持[www.w3schools.com](http://www.w3schools.com/html/html5_form_attributes.asp)网站上关于 input 元素可以属于 2 种或更多形式的声明。输入元素的所有者始终以单数形式提及，而从不作为列表提及。此外，在[developer.mozilla.org](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms_in_HTML)上有关于仅与一种表单的输入关联的明确声明。form 属性的描述如下：

> form：一个字符串，指示此输入属于哪个元素。输入只能是一种形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T21:13:49.310

输入字段只能在一个表单上。为了清楚起见，最好将其包含在表单范围内。

在您的表单上也使用*名称*而不是仅使用*id 。*虽然 html5 支持它，但旧的浏览器呢？IE 怎么了？

```
<form action="demo_form.asp" name="form1" id="form1">

<form action="demo_form.asp" name="form2" id="form2"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-27T21:42:24.213

在提交时使用 javascript 和名称表单

```
<form action="demo_form.asp" onsubmit= 'this.id="form1"'>
First name: <input type="text" name="fname" /><br>
<input type="submit" value="Submit" />
</form>

<form action="demo_form.asp" onsubmit= 'this.id="form1"'>
First name: <input type="text" name="fname" /><br>
<input type="submit" value="Submit" />
</form>

Last name: <input type="text" name="lname" form="form1" /> 
```

# http-headers - G-WAN 3.12.26 64 位添加重复的 http 标头

> ID：14085945
> 
> 赞同：2
> 
> 时间：2012-12-29T21:09:23.460
> 
> 标签：http-headers, g-wan

我使用 gwan 生成图像，所以我需要设置正确的内容类型，但是 G-WAN 3.12.26 在经过一些加载后会添加自己的内容类型为 text/html 的标头并返回带有 2 个 http 标头的页面。

如何重现这个：

使用 gwan 包中的 setheaders.c servlet，启动 gwan 并打开这个页面，假设`http://localhost/?setheaders.c`你会得到这个（正确的响应）：

```
HTTP/1.1 200 OK
Date: Sat, 29 Dec 2012 20:37:52 GMT
Last-Modified: Sat, 29 Dec 2012 20:37:52 GMT
Content-type: text/html
Content-Length:    371
Connection: close

<!DOCTYPE HTML><html lang="en"><head><title>Setting response headers</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link href="imgs/style.css" rel="stylesheet" type="text/css"></head><body style="margin:16px;"><h1>Setting response headers</h1><br>This reply was made with custom HTTP headers, look at the servlet source code.<br></body></html>` 
```

现在运行 apache bench：`ab -n 1000 'http://localhost/?setheaders.c'`（1000 个请求对我的系统来说已经足够了）。

不要重新启动 GWAN，`http://localhost/?setheaders.c`再次打开，这就是你应该得到的（不正确的响应，2 个 http 标头）：

```
HTTP/1.1 200 OK
Server: G-WAN
Date: Sat, 29 Dec 2012 20:43:34 GMT
Last-Modified: Fri, 16 Jan 1970 16:53:33 GMT
ETag: "be86ada7-14b40d-16f"
Vary: Accept-Encoding
Accept-Ranges: bytes
Content-Type: text/html; charset=UTF-8
Content-Length: 367
Content-Encoding: gzip
Connection: close

HTTP/1.1 200 OK
Date: Sat, 29 Dec 2012 20:43:34 GMT
Last-Modified: Sat, 29 Dec 2012 20:43:34 GMT
Content-type: text/html
Content-Length:    371
Connection: close

<!DOCTYPE HTML><html lang="en"><head><title>Setting response headers</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link href="imgs/style.css" rel="stylesheet" type="text/css"></head><body style="margin:16px;"><h1>Setting response headers</h1><br>This reply was made with custom HTTP headers, look at the servlet source code.<br></body></html> 
```

如果 gzip 和 x-gzip 未在请求标头 ( `Accept-Encoding: gzip, x-gzip`) 中设置为可接受的编码，GWAN 将返回正确的响应。

是否有可能解决这个修改只是servlet？如果是，那么如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T09:29:34.690

您是否设置`MIME type`如下所示`fractal.c`：

```
 // -------------------------------------------------------------------------
   // specify a MIME type so we don't have to build custom HTTP headers
   // -------------------------------------------------------------------------
   char *mime = (char*)get_env(argv, REPLY_MIME_TYPE);
   // note that we setup the FILE EXTENTION, not the MIME type:
   mime[0] = '.'; mime[1] = 'g'; mime[2] = 'i'; mime[3] = 'f'; mime[4] = 0; 
```

如果您这样做，则无法混淆自动标题功能。

除此之外，由于我们的直接系统调用和 GLIBC 包装器，v3.12 还存在许多不稳定性问题（文件时间故障、pthread 故障、信号故障等） - 最初旨在使程序在所有版本的 Linux 上运行的努力。

我们发现（多亏了像你这样的许多报告），与其尝试一个一个地解决这些问题（毫无意义地与 GLIBC 作斗争，一个移动的目标，有许多不同的版本，每个版本都有自己的错误和特性）更安全的路径是放弃GLIBC。

这就是 G-WAN v4 将在几天后做的事情。

# doctrine-orm - 教义 findBy '不等于'

> ID：14085946
> 
> 赞同：61
> 
> 时间：2012-12-29T21:09:31.383
> 
> 标签：doctrine-orm

我该怎么办

```
WHERE id != 1 
```

在教义？

到目前为止我有这个

```
$this->getDoctrine()->getRepository('MyBundle:Image')->findById(1); 
```

但是我该如何做一个“不等于”呢？

这可能很愚蠢，但我找不到任何参考？

谢谢

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2014-08-21T07:58:31.710

现在有一种方法可以做到这一点，使用 Doctrine's Criteria。

一个完整的例子可以在[如何使用具有比较标准的 findBy 方法](https://stackoverflow.com/questions/14786937/how-to-use-a-findby-method-with-comparative-criteria/14790069#14790069)中看到，但下面是一个简短的答案。

```
use \Doctrine\Common\Collections\Criteria;

// Add a not equals parameter to your criteria
$criteria = new Criteria();
$criteria->where(Criteria::expr()->neq('prize', 200));

// Find all from the repository matching your criteria
$result = $entityRepository->matching($criteria); 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-12-30T08:45:11.750

没有内置的方法可以让你做你想做的事。

您必须向存储库添加一个方法，如下所示：

```
public function getWhatYouWant()
{
    $qb = $this->createQueryBuilder('u');
    $qb->where('u.id != :identifier')
       ->setParameter('identifier', 1);

    return $qb->getQuery()
          ->getResult();
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-05-24T21:16:39.340

为了提供更多的灵活性，我将在我的存储库中添加下一个函数：

```
public function findByNot($field, $value)
{
    $qb = $this->createQueryBuilder('a');
    $qb->where($qb->expr()->not($qb->expr()->eq('a.'.$field, '?1')));
    $qb->setParameter(1, $value);

    return $qb->getQuery()
        ->getResult();
} 
```

然后，我可以像这样在我的控制器中调用它：

```
$this->getDoctrine()->getRepository('MyBundle:Image')->findByNot('id', 1); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-09-15T21:38:38.547

根据 Luis 的回答，您可以执行更像默认 findBy 方法的操作。

首先，创建一个所有实体都将使用的默认存储库类。

```
/* $config is the entity manager configuration object. */
$config->setDefaultRepositoryClassName( 'MyCompany\Repository' ); 
```

或者你可以在 config.yml 中编辑它

学说：orm：default_repository_class：MyCompany\Repository

然后：

```
<?php

namespace MyCompany;

use Doctrine\ORM\EntityRepository;

class Repository extends EntityRepository {

    public function findByNot( array $criteria, array $orderBy = null, $limit = null, $offset = null )
    {
        $qb = $this->getEntityManager()->createQueryBuilder();
        $expr = $this->getEntityManager()->getExpressionBuilder();

        $qb->select( 'entity' )
            ->from( $this->getEntityName(), 'entity' );

        foreach ( $criteria as $field => $value ) {
            // IF INTEGER neq, IF NOT notLike
            if($this->getEntityManager()->getClassMetadata($this->getEntityName())->getFieldMapping($field)["type"]=="integer") {
                $qb->andWhere( $expr->neq( 'entity.' . $field, $value ) );
            } else {
                $qb->andWhere( $expr->notLike( 'entity.' . $field, $qb->expr()->literal($value) ) );
            }
        }

        if ( $orderBy ) {

            foreach ( $orderBy as $field => $order ) {

                $qb->addOrderBy( 'entity.' . $field, $order );
            }
        }

        if ( $limit )
            $qb->setMaxResults( $limit );

        if ( $offset )
            $qb->setFirstResult( $offset );

        return $qb->getQuery()
            ->getResult();
    }

} 
```

用法和findBy方法一样，例子：

```
$entityManager->getRepository( 'MyRepo' )->findByNot(
    array( 'status' => Status::STATUS_DISABLED )
); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-11-13T16:49:51.057

我很容易解决了这个问题（没有添加方法），所以我将分享：

`use Doctrine\Common\Collections\Criteria;`

`$repository->matching( Criteria::create()->where( Criteria::expr()->neq('id', 1) ) );`

顺便说一句，我正在使用 Zend Framework 2 中的 Doctrine ORM 模块，我不确定这在任何其他情况下是否兼容。

在我的例子中，我使用了这样的表单元素配置：在单选按钮数组中显示除“guest”之外的所有角色。

```
$this->add(array(
    'type' => 'DoctrineModule\Form\Element\ObjectRadio',
        'name' => 'roles',
        'options' => array(
            'label' => _('Roles'),
            'object_manager' => $this->getEntityManager(),
            'target_class'   => 'Application\Entity\Role',
            'property' => 'roleId',
            'find_method'    => array(
                'name'   => 'matching',
                'params' => array(
                    'criteria' => Criteria::create()->where(
                        Criteria::expr()->neq('roleId', 'guest')
                ),
            ),
        ),
    ),
)); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-25T12:35:05.500

我使用 QueryBuilder 来获取数据，

```
$query=$this->dm->createQueryBuilder('AppBundle:DocumentName')
             ->field('fieldName')->notEqual(null);

$data=$query->getQuery()->execute(); 
```

# xcode - 如何在 XCode 中构建 dylib？

> ID：14085949
> 
> 赞同：-2
> 
> 时间：2012-12-29T21:09:44.863
> 
> 标签：xcode, dylib, libtool-xcode

我在源代码中有一个库，它构建在 .a 静态库中，但我需要 .dylib。因此，我在“构建设置”中选择 Mach-O-Type 作为“动态库”，但出现错误：

> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool -static -arch_only x86_64 -syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/ MacOSX10.8.sdk -L/Users/abc/Library/Developer/Xcode/DerivedData/mylib-fwducbhnvcuzuzaopjfimtlylztm/Build/Products/Debug-filelist /Users/abc/Library/Developer/Xcode/DerivedData/mylib-fwducbhnvcuzuzaopjfimtlylztm/Build/中间体/mylib.build/Debug/mylib-osx.build/Objects-normal/x86_64/mylib-osx.LinkFileList -fobjc-link-runtime -framework Foundation -o /Users/abc/Library/Developer/Xcode/DerivedData/mylib -fwducbhnvcuzuzaopjfimtlylztm/Build/Products/Debug/libmylib-osx.a
> 
> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool：未知选项字符“f”在：-fobjc-link-runtime

libtool 出于某种原因使用“-static”而不是“-dynamic”标志...我设置的兼容版本。你认为可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:33:22.087

目标文件 (.o) 可以从存档文件 (.a) 中提取，然后使用 libtool 或 gcc 打包到 .dylib

# django - Django 404 页面返回 200 状态码

> ID：14085953
> 
> 赞同：5
> 
> 时间：2012-12-29T21:10:03.777
> 
> 标签：django

我正在阅读 Django 教程，并在第 5 部分：测试。我遇到了使用 DetailView 和 ListView “快捷方式”视图来分解代码的问题（如教程所建议的那样），但是当显示 404 页面时，会返回 200 状态代码。难道我做错了什么？教程说状态码应该是 404。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T14:03:24.337

您需要将 Http 标头定义为具有 404 状态。

```
return HttpResponse(content=template.render(context), content_type='text/html; charset=utf-8', status=404) 
```

通知搜索引擎当前页面是 404 是很重要的。垃圾邮件发送者有时会创建许多看起来会引导您到某个地方的 url，但随后会为您提供其他内容。他们经常使许多不同的地址为您提供几乎完全相同的内容。而且由于它对用户不友好，因此大多数 SEO 指南都会对此进行处罚。因此，如果您有很多地址显示相同的伪 404 内容，那么搜索网站的爬虫系统可能会看起来不太好。因此，您要确保用作自定义 404 的页面具有 404 状态。

如果您正在尝试制作自定义 404 页面，这是一个不错的方法：

在您的应用程序的 urls.py 中添加：

```
# Imports
from django.conf.urls.static import static
from django.conf.urls import handler404
from django.conf.urls import patterns, include, url
from yourapplication import views

##
# Handles the URLS calls
urlpatterns = patterns('',
    # url(r'^$', include('app.homepage.urls')),
)

handler404 = views.error404 
```

在您的应用程序的 views.py 中添加：

```
# Imports
from django.shortcuts import render
from django.http import HttpResponse
from django.template import Context, loader

##
# Handle 404 Errors
# @param request WSGIRequest list with all HTTP Request
def error404(request):

    # 1\. Load models for this view
    #from idgsupply.models import My404Method

    # 2\. Generate Content for this view
    template = loader.get_template('404.htm')
    context = Context({
        'message': 'All: %s' % request,
        })

    # 3\. Return Template for this view + Data
    return HttpResponse(content=template.render(context), content_type='text/html; charset=utf-8', status=404) 
```

秘密在最后一行：status=404

希望它有所帮助！

我期待看到社区对这种方法的投入。=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T01:05:42.763

你可以

```
return HttpResponseNotFound(render_to_string('404.html')) 
```

反而。

# cookies - 如何从 nginx 响应中删除某些 cookie

> ID：14085954
> 
> 赞同：10
> 
> 时间：2012-12-29T21:10:28.413
> 
> 标签：cookies, nginx, reverse-proxy

我已将 nginx 设置为反向代理服务器，并且我想删除在支持服务器 (apache) 上设置的某些 cookie

我的网站使用了很多我无法控制的 cookie（Expression Engine CMS，不要问我为什么）。我想删除其中一些 cookie（比如说 cookie AB 和 C）并保留一些其他的（cookie D 和 E）。

之后，我将设置 nginx 以仅在请求没有 cookie 时才响应缓存的内容。

你知道怎么做吗？谢谢

到目前为止，我的配置中有：

```
proxy_cache_path /opt/nginx/cache levels=1:2 keys_zone=mycache:20m max_size=1G;
proxy_temp_path /opt/nginx/tmp_cache/;
proxy_ignore_headers Expires Cache-Control Set-Cookie;
proxy_cache_use_stale error timeout invalid_header http_502;
proxy_cache_bypass $cookie_nocache;
proxy_no_cache $cookie_nocache; 
```

...

```
location / {
    proxy_set_header X-Real-IP  $remote_addr;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_cache mycache;
    proxy_cache_valid  200 302  6h;
    proxy_cache_valid  404      1m;
    proxy_pass http://x.x.x.x:8080;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-11T14:31:53.170

尽管您已经提到您切换到 Varnish 来完成您的要求，但正确的答案应该是使用[`headers-more-nginx-module`](https://github.com/agentzh/headers-more-nginx-module)基本上允许您与 Varnish 功能相同的功能（以及更多功能）。

# c++ - 为什么我的 constexpr 函数不能返回 lambda？

> ID：14085956
> 
> 赞同：21
> 
> 时间：2012-12-29T21:10:49.537
> 
> 标签：c++, c++11, lambda, constexpr

我发现这段代码不起作用：

```
typedef int (*fp)(int a, int b);

constexpr fp addition()
{
    return [](int a, int b){ return a+b; };
}

#include <iostream>

int main()
{
    fp fun = addition();
    std::cout << fun(2,2);
} 
```

它给了我错误

```
cexpr.cpp: In function 'constexpr int (* addition())(int, int)':
cexpr.cpp:5:43: error: call to non-constexpr function 'addition()::<lambda(int,
int)>::operator int (*)(int, int)() const' 
```

这是为什么？我不是在这里称呼它。

直接方法有效：

```
typedef int (*fp)(int a, int b);

#include <iostream>

int main()
{
    fp fun = [](int a, int b){ return a+b; };
    std::cout << fun(2,2);
} 
```

我将 MinGW 与 g++ 版本 4.7.2 一起使用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-29T21:56:40.487

您的函数`fp()`不返回文字类型，因此它不能是*constexpr 函数*：

> 从 7.1.5 开始：“constexpr 函数的定义应满足以下约束：
> 
> *   它不应是虚拟的（10.3）；
> *   **它的返回类型应该是文字类型**；
> *   它的每个参数类型都应该是文字类型；
> *   其函数体应为 = delete、= default**或仅包含**
>     *   空语句，
>     *   静态断言声明
>     *   不定义类或枚举的 typedef 声明和别名声明，
>     *   使用声明，
>     *   使用指令，
>     *   **并且只有一个返回声明**；”

我认为这里没有任何错误，尤其是与前面答案中提到的 lambdas 无关：变量根本无法在*constexpr function*中声明。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-29T21:53:03.847

根据标准第 5.19 节 [expr.const] 的 N3376 工作草案：

> 某些上下文需要满足本子条款中详述的附加要求的表达式；根据表达式是否满足这些要求，其他上下文具有不同的语义。满足这些要求的表达式称为常量表达式。[注：常量表达式可以在翻译过程中求值。——尾注]

它接着说：

> 条件表达式是核心常量表达式，除非它涉及以下之一作为潜在评估的子表达式 (3.2)，但逻辑与 (5.14)、逻辑或 (5.15) 和条件 (5.16) 操作的子表达式不被评估不被考虑 [注意：重载的运算符调用函数。-结束注释]：

在它下面列出：

> — 一个 lambda 表达式 (5.1.2)；

所以虽然我不知道足够的标准，但我相信这说明 constexpr 内部不应该有 lambda 表达式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-29T22:52:36.393

gcc 给你的错误信息是准确和正确的：

> 错误：调用非 constexpr 函数 'addition()::
>              <lambda(int,int)>::
>              **operator int (*)(int, int)() const** '

我对其进行了一些重新格式化并增加了重点。通过将 lambda 强制转换为函数指针，您将隐式调用从 lambda to 自动创建的转换函数`pointer to function of type "auto (int, int)->int"`，这不是 constexpr 函数，因为未声明自动创建的转换函数`constexpr`（并且标准不要求它是）。

# java - 在 android 上启动多个异步任务

> ID：14085965
> 
> 赞同：2
> 
> 时间：2012-12-29T21:12:02.773
> 
> 标签：java, android, android-asynctask

我想启动 2 个异步任务，但只有一个被执行。LogCat 的输出应该是这样的：

```
firstAsync started
secondAsync started
secondAsync ends
firstAsync ends
end 
```

但 LogCat 的输出是

```
firstAsync started
end 
```

它表明从未执行过 secondAsync。这是java代码：

```
package com.example.async;

import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.app.Activity;

public class MainActivity extends Activity {

    public boolean stopAsync=false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        new firstAsync().execute();
        new secondAsync().execute();
        Log.e("end","end");
    }

    class firstAsync extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... params) {
            Log.e("firstAsync started","firstAsync started");
            while(!stopAsync)
            {

            }
            Log.e("firstAsync ends","firstAsync ends");
            return null;
        }
    }

    class secondAsync extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... params) {
            Log.e("secondAsync started","secondAsync started");
            stopAsync = true;
            Log.e("secondAsync ends","secondAsync ends");
            return null;
        }
    }

} 
```

所以，问题是，我怎样才能启动多个异步任务，希望你能帮助我。问候克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T21:25:07.453

[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)s 总是一次执行一个，除非你使用`executeOnExecutor()`：

> AsyncTask 被设计为一个辅助类`Thread`，`Handler`并且不构成通用线程框架。
> 
> **从 开始`HONEYCOMB`，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。**如果你真的想要并行执行，你可以调用 `executeOnExecutor(java.util.concurrent.Executor, Object[])`with `THREAD_POOL_EXECUTOR`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T22:01:05.873

这是有趣的

在此，我在第一个异步中放置了第二个异步以开始预执行。logcat 和代码显示得最好：

我的日志猫：

```
12-29 21:53:35.661: E/Async1: being executed
12-29 21:53:35.661: E/Async1: executing
12-29 21:53:35.661: E/Async2: being started
12-29 21:53:35.669: E/Async2: backgrounding
12-29 21:53:35.669: E/Async1: backgrounding
12-29 21:53:35.676: E/Async2: finishing
12-29 21:53:35.676: E/Async1: finishing 
```

对于以下代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Log.e("Async1", "being executed");
    new Async1().execute();
}

public class Async1 extends AsyncTask {

    @Override
    protected void onPreExecute() {
        Log.e("Async1", "executing");
        Log.e("Async2", "being started");
        new Async2().execute();
        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(Object result) {
        // TODO Auto-generated method stub
        Log.e("Async1", "finishing");
        super.onPostExecute(result);
    }

    @Override
    protected Object doInBackground(Object... arg0) {
        Log.e("Async1", "backgrounding");
        return null;
    }

    public class Async2 extends AsyncTask {

        @Override
        protected void onPostExecute(Object result) {
            Log.e("Async2", "finishing");
            super.onPostExecute(result);
        }

        @Override
        protected Object doInBackground(Object... params) {
            Log.e("Async2", "backgrounding");
            return null;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T21:17:26.747

在第一个 AsyncTask 的 onPostExecute() 方法上，启动第二个 AsyncTask

```
protected void onPostExecute(String result) {
    if (result!=null)
    //start the Second asyncTask
    new secondAsync().execute();
} 
```

# javascript - 使用 JQuery 创建元素时遇到问题

> ID：14085966
> 
> 赞同：1
> 
> 时间：2012-12-29T21:12:09.653
> 
> 标签：javascript, jquery, ajax, dom

我有这个表格：

```
<form>
  <input id="checkuser" type="text" name="user" placeholder="Your username"/>
</form> 
```

我用 JQuery 做的是检查所写的用户名是否可用。这是 JQuery 代码：

```
 $('#checkuser').click(function (){

     $(this).change(function () {
     $.ajax( {
       url: '/check',
       type: 'POST',
       cache: false,
       data: { checkuser: $(this).val() },
       dataType: "json",
       complete: function() {

    },

    success: function(data) {

        var check = JSON.stringify(data.aval);

        if (check == "false") {

            $('<p>Not available.</p>').insertAfter('#checkuser');

        }

        else {

              $('<p> Available!</p>').insertAfter('#checkuser');

        }

    },
    error: function() {

       console.log('process error');

    }
   });   
  }); 
 }); 
```

问题是：如果用户不可用，则用户必须重写用户名，当 jQuery 重新检查是否可用时，JQuery 不会重写 的内容，而是在旧的 ergo 旁边`<p>`创建另一个，结果如下：只写其中之一。我该如何解决这个问题？`<p>``<p>``Not available.Available!`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T21:20:50.890

为了解决这个问题，我会`<p></p>`在输入之后添加一个空白标签，并在需要时更新这个标签。

```
 <form>
       <input id="checkuser" type="text" name="user" placeholder="Your username"/>
       <p></p>
     </form>
     $('form p').text('Available!'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T21:20:55.180

`insertAfter`将新的 html 上下文**附加**到 div。而是在 div 之后创建另一个 div`checkuser`并替换里面的 html：

```
<input id="checkuser" type="text" name="user" placeholder="Your username"/>
<div id="msg"></div> 
```

然后只是：

```
$('#msg').text('your text if available or not here'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T21:24:49.667

insertAfter **()**方法按设计工作：它找到元素（在本例中为***#checkuser***）并在其后附加一个新段落。

您可能需要在 INPUT 标记之后创建一个 DIV 或 SPAN 元素，如下所示：

```
<span id="checkuser-validation"></span> 
```

然后调整您的 JavaScript 代码，使其如下所示：

```
if (check == "false") {

        $('#checkuser-validation').Empty();
        $('#checkuser-validation').Html('Not Available');

} 
```

... 等等。希望有帮助:)

# ruby - 使用 Tk 和 Ruby 打开文件并取消时出错

> ID：14085971
> 
> 赞同：1
> 
> 时间：2012-12-29T21:13:17.687
> 
> 标签：ruby, tk

我是 Ruby 新手（以及一般的脚本或编程），似乎无法找出这个错误（或烦恼）的来源：

所以复制问题的最少代码是：

```
require 'tk'

open(Tk.getOpenFile) 
```

现在对话框按预期打开，只要我选择一些文件，一切都会正常。如果我按下取消，我希望它会安静地关闭对话框，但它会引发各种错误。我能做些什么来防止这些错误消息吗？

我收到的错误消息是：

```
file_path:in `initialize': No such file or directory -  (Errno::ENOENT)
    from file_path:3:in `open'
    from file_path:3:in `<top (required)>'
    from -e:1:in `load'
    from -e:1:in `<main>' 
```

我不得不说我真的不明白发生了什么。有人可以以介绍性的方式解释这一点（我已经用谷歌搜索了很长一段时间，但是（可能是由于我在这些问题上的知识和词汇量有限）我还没有找到任何可以向我解释的东西）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T22:40:51.270

问题是`Tk.getOpenFile`当您按下取消时返回一个空字符串。然后，您将空字符串传递给该`open`方法（它需要一个正确的文件路径）并且它会爆炸。

要使代码在所有情况下都能正常工作，您只需要检查空字符串。

```
file_path = Tk.getOpenFile
open(file_path) unless file_path.empty? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T22:40:05.867

Errno::ENOENT 是找不到文件的操作系统错误。

取消时 Tk.getOpenFile 返回什么？空字符串

对空字符串调用 open 时的错误消息是什么？错误::ENOENT

您可能应该执行以下操作：

```
file = Tk.getOpenFile
open(file) unless file.empty? 
```

# java - Android复选框边框消失使用Java

> ID：14085975
> 
> 赞同：0
> 
> 时间：2012-12-29T21:14:00.927
> 
> 标签：java, android, checkbox, border

我正在制作一个带有复选框的 Android 应用程序。我使用 XML 文件添加了一些示例内容，只是为了让布局看起来像我想要的那样。当我使用 XML 文件放置一个复选框时，它周围有一个边框，但是当我使用 Java 以编程方式添加复选框时，它会去掉它周围的边框，几乎看不到复选框。

我想知道的是如何将复选框格式化为与 XML 样式相同？可以使用`LayoutParams`还是有其他方法可以完成？我已经读过`setButtonDrawable`一些东西，但不知道如何去做，如果这是要走的路，有人可以指点我一个基本教程吗？

XML Checkbox [xml 复选框图像 http://redsquirrelsoftware.co.uk/xml.jpg](http://redsquirrelsoftware.co.uk/xml.jpg)

Java Checkbox [java 复选框图像 http://redsquirrelsoftware.co.uk/java.jpg](http://redsquirrelsoftware.co.uk/java.jpg)

XML 代码

```
<CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingRight="30dp"
        android:text="@string/checkbox" /> 
```

Java 代码：

```
 CheckBox checkbox = new CheckBox(this);
    checkbox.setText(R.string.checkbox);
    checkbox.setTextSize(TypedValue.COMPLEX_UNIT_PT, 10);
    checkbox.setTextColor(Color.BLACK); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T22:28:29.023

How about adding padding? checkbox.setPadding(0,0,30,0);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T20:54:14.713

好的，它实际上是在 XML 文件中使用的标准复选框样式，但只有当我关闭应用程序并重新打开它时。我猜这可能是因为我在开发人员模式下通过 Eclipse 的 USB 运行它。

一旦我将它上传到 Play 商店，将对其进行测试，看看它是否能正常工作。如果应用程序在正确显示之前必须重新打开，这不是世界上最大的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T02:08:52.263

我试过这个并且工作，也许是因为你没有设置 LayoutParams

```
CheckBox checkbox = new CheckBox(this);
checkbox.setText("completed");
checkbox.setTextSize(TypedValue.COMPLEX_UNIT_PT, 10);
checkbox.setTextColor(Color.BLACK);
checkbox.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

LinearLayout layout = (LinearLayout)findViewById(R.id.layoutku);
layout.addView(checkbox); 
```

# java - Java：在超级之前在子类中分配最终变量

> ID：14085976
> 
> 赞同：3
> 
> 时间：2012-12-29T21:14:01.350
> 
> 标签：java

我有一个包含最终 int valA 的类 A。

我有一个子类 B，其中包含一个大的最终对象 objB。

valA 的值取决于与 B 的构造函数一起传入的 objB。

如何创建 B 的实例？

我已经为我正在尝试做的事情包含了最少的代码。

```
public class Test {
    public static void main(String[] args){
        System.out.println(new B(3).valA);
    }
    static class A{
        final int valA;
        A(int valA) {
            this.valA = valA;
        }
    }
    static class B extends A{
        final Object objB;
        B(int initVal) {
            this.objB = someMethod(initVal);
            super(objB.hashCode()+1);
        }
    }
    Object someMethod(int initVal){
        // pretend there's some super complicated logic that returns a large object
        return new Object();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T21:17:27.847

超级构造函数调用必须是构造函数中的第一条语句。因此，`B`应该如下所示：

```
static class B extends A{
    final int valB;
    B(int valB) {
        super(valB+1);
        this.valB = valB;
    }
} 
```

此外，您不能从超级构造函数调用中对实例方法进行任何引用。您可以创建`initC()`一个`static`方法，但这会破坏其目的，因为您不能再从内部分配实例变量`initC()`

### 鉴于更新的问题...

您无法解决这个初始化问题，这实际上是一个设计问题。我建议您将超大对象的构造提取到外部“工厂”，并降低`A`' 和`B`' 初始化的复杂性，使构造函数尽可能苗条。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T22:03:52.217

您可以在 B 中使用重载的构造函数。在下面的代码中 someMethod 已被设为静态，或者它可以是 B 中的最终成员方法。

```
public class Test {
    public static void main(String[] args){
        System.out.println(new B(3).valA);
    }
    static class A{
        final int valA;
        A(int valA) {
            this.valA = valA;
        }
    }
    static class B extends A{
        final Object objB;
        B(int initVal) {
            this(someMethod(initVal));
        }
        private B(Object objB) {
            super(objB.hashCode()+1);
            this.objB = objB;
        }
    }
    static Object someMethod(int initVal){
        // pretend there's some super complicated logic that returns a large object
        return new Object();
    }
} 
```

# javascript - 更改 div 可见性并切换按钮文本的 Javascript 切换按钮

> ID：14085979
> 
> 赞同：1
> 
> 时间：2012-12-29T21:14:14.020
> 
> 标签：javascript, html, button, toggle

如果我可以使用 jQuery，这会容易得多，但出于一些原因，我试图避免这样做。同时，我已经让一些脚本工作了——我正在尝试添加函数来切换按钮文本与 div 的状态。

```
<script type="text/javascript">
function toggleMe(a){
    var e = document.getElementById(a);
    if(!e) return true;
    if(e.style.display == "none") {
        e.style.display = "block"
    } else {
        e.style.display = "none"
    }
    return true;
}
</script> 
```

该脚本可以很好地使用我当前的按钮：

```
<input type="button" onclick="return toggleMe('para0')" value="Expanse"><br> 
<div id="para0">TEST TEXT</div> 
```

试图让文本切换到 div 可见性的状态。我见过的大多数答案都是使用 jQuery，而我将脚本放入的上下文使表单成为非选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T21:22:12.093

看看这是否有帮助：

HTML：

```
<button id="toggle">Toggle</button>
<div id="text">Lorem ipsum dolor sit amet.</div> 
```

JavaScript：

```
var button = document.getElementById('toggle'),
    text = document.getElementById('text');

button.onclick = function() {
  var isHidden = text.style.display == 'none';
  text.style.display = isHidden ? 'block' : 'none';
}; 
```

**演示：http:** [//jsbin.com/emikux/1/edit](http://jsbin.com/emikux/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T22:18:44.157

My JS is a little rusty and I can't check this right now, but I think somthing like this will do what you want:

```
<input type="button" onclick="return toggleMe(this,'para0')" value="Expanse"><br> 
<div id="para0">TEST TEXT</div>

<script type="text/javascript">
    function toggleMe(btn,a){
    var e=document.getElementById(a);
    if(!e)return true;
    if(e.style.display=="none"){
      e.style.display="block";
      btn.value = "Hide";
   }
   else{
      e.style.display="none";
      btn.value = "Show";
   }
   return true;
  }
  </script> 
```

Fixed the spacing show /script would show.

# css - 将 Bootstrap 内容与缩略图中图像的右侧对齐

> ID：14085980
> 
> 赞同：1
> 
> 时间：2012-12-29T21:14:22.397
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我无法在引导缩略图中将标题与图像右侧对齐

我的 HTML

```
 <div class="container">
   <div class="row">
    <div class="span8 offset2">
     <% @response.each do |f| %>
     <% f.each_pair do |k, v| %>
     <h3 class="smallTitle">Available on&nbsp;<%= k %></h2>
      <% v.each do |film| %>

     <div class="thumbnail">
      <img src="http://placehold.it/180x200">
       <div class="caption">
        <%= link_to film[1], film[0] %> : <%= link_to "remind me", "#", :class => 'remind' %>
       </div>
      </div>
     <% end %>
    <% end %>
   <% end %>
  </div>
 </div><!--Row-->
</div><!--/container--> 
```

所以目前我的图像在左侧，而标题在图像下方.. 有没有一种简单的 CSS 方法可以让 div 的标题位于图像的右侧

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T02:49:07.980

您可以在缩略图 div 中浮动图像和标题

```
 <div class="thumbnail clearfix">
  <img src="http://placehold.it/180x200" class="pull-left">
   <div class="caption" class="pull-right">
    <%= link_to film[1], film[0] %> : <%= link_to "remind me", "#", :class => 'remind' %>
   </div>
  </div> 
```

# android - Android 应用程序停止工作 - servlet 和 Httpget

> ID：14085981
> 
> 赞同：0
> 
> 时间：2012-12-29T21:14:23.317
> 
> 标签：android, tomcat, servlets

我有个问题。我从 servlet 和 Android 开始我的冒险，我设计了一个简单的 servlet，它写着“Hello world”。现在我想在我的 Android 应用程序中收到这条消息。我的代码：

```
public class MyServlet extends Activity implements OnClickListener{

Button button;
TextView outputText;

public static final String URL = "http://10.0.2.2:8080/ServletExample/HelloServletExample";

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    findViewsById();

    button.setOnClickListener(this);

}

private void findViewsById() {
    button = (Button) findViewById(R.id.button);
    outputText = (TextView) findViewById(R.id.outputTxt);
}

public void onClick(View view) {

    String output = null;

        HttpClient httpclient = new DefaultHttpClient();
        try {
            HttpResponse response = httpclient.execute(new HttpGet(URL));
            HttpEntity httpEntity = response.getEntity();
            output = EntityUtils.toString(httpEntity);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    //} catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    //} catch (IOException e) {
        // TODO Auto-generated catch block
    //}

    outputText.setText(output);

} 
```

我的小服务程序：

```
@WebServlet("/HelloServletExample")
public class HelloServletExample extends HttpServlet {
private static final long serialVersionUID = 1L;

/**
 * @see HttpServlet#HttpServlet()
 */
public HelloServletExample() {
    super();
    // TODO Auto-generated constructor stub
}

/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    PrintWriter out = response.getWriter();
    out.println("Hello World");

}

} 
```

我不知道为什么，但我的应用程序崩溃了。我尝试注释掉一些行，结果发现问题出在这一行：

```
HttpEntity httpEntity = response.getEntity(); 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:37:20.940

如果您使用 **API 级别 >= 9**，则无需`AsyncTask`用于从 Ui 线程发出网络请求，只需在 Activity onCreate 方法中添加[StrictMode.ThreadPolicy即可：](http://developer.android.com/reference/android/os/StrictMode.ThreadPolicy.html)

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().
                                                   permitAll().build();

StrictMode.setThreadPolicy(policy); 
```

# c# - 使用级联删除包与 ravendb 级联

> ID：14085983
> 
> 赞同：3
> 
> 时间：2012-12-29T21:14:25.390
> 
> 标签：c#, ravendb

我有一个乌鸦驱动的应用程序，我正在尝试实现级联删除包。设置看起来很简单，但是从他们关于级联的 1 个文档中我有点不清楚映射设置部分。无论如何，这是我的设置，感谢您的帮助。

```
// An album class with no reference to photos
class Album
{
    public string Id { get; set; } //ID for album from raven
}

// A photo class with a reference to its parent album
class Photo
{
    public string Id { get; set; } //ID for photo from raven
    public string PhotoName { get; set; }
    public Album PhotoAlbum  { get; set; }
}

// On album store 
session.Store(album);
session.Advanced.GetMetadataFor(album)["Raven-Cascade-Delete-Documents"] =
    RavenJToken.FromObject(new[] { album.Id });

// THIS DOES NOT WORK, But I was assuming that it would search for each document
// with a reference to an album and delete it. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T00:06:12.593

首先，在对文档之间的引用进行建模时，您需要引用外部文档键，而不是整个文档。您现在拥有的内容会将相册嵌入到文档中。改为这样做：

```
public class Photo
{
    public string Id { get; set; }
    public string PhotoName { get; set; }
    public string AlbumId { get; set; }
} 
```

关于级联删除，bundle 在删除文档时只查看元数据并删除任何引用的文档。它*不能*帮助您建立开始的文档列表。你必须自己做。每次添加照片时，都会加载相册并将照片的 Id 添加到相册的级联删除列表中。

因此，在保存相册和前几张照片时：

```
using (var session = documentStore.OpenSession())
{
    var album = new Album();
    session.Store(album);

    var photoA = new Photo { PhotoName = "A", AlbumId = album.Id };
    var photoB = new Photo { PhotoName = "B", AlbumId = album.Id };
    var photoC = new Photo { PhotoName = "C", AlbumId = album.Id };
    session.Store(photoA);
    session.Store(photoB);
    session.Store(photoC);

    session.Advanced.AddCascadeDeleteReference(album,
                                               photoA.Id,
                                               photoB.Id,
                                               photoC.Id);

    session.SaveChanges();
} 
```

稍后，将照片添加到现有相册

```
using (var session = documentStore.OpenSession())
{
    // you would know this already at this stage
    const string albumId = "albums/1";

    var photoD = new Photo { PhotoName = "D", AlbumId = albumId };
    session.Store(photoD);

    var album = session.Load<Album>(albumId);
    session.Advanced.AddCascadeDeleteReference(album, photoD.Id);

    session.SaveChanges();
} 
```

这是`AddCascadeDeleteReference`我上面使用的扩展方法。你可以自己做，但这会让事情变得更容易一些。把它放在一个静态类中。

```
public static void AddCascadeDeleteReference(
  this IAdvancedDocumentSessionOperations session,
  object entity, params string[] documentKeys)
{
    var metadata = session.GetMetadataFor(entity);
    if (metadata == null)
      throw new InvalidOperationException(
        "The entity must be tracked in the session before calling this method.");

    if (documentKeys.Length == 0)
      throw new ArgumentException(
        "At least one document key must be specified.");

    const string metadataKey = "Raven-Cascade-Delete-Documents";

    RavenJToken token;
    if (!metadata.TryGetValue(metadataKey, out token))
        token = new RavenJArray();

    var list = (RavenJArray) token;
    foreach (var documentKey in documentKeys.Where(key => !list.Contains(key)))
        list.Add(documentKey);

    metadata[metadataKey] = list;
} 
```

# wordpress - 从 Wordpress 中的特定自定义帖子类型输出帖子计数

> ID：14085985
> 
> 赞同：0
> 
> 时间：2012-12-29T21:15:16.097
> 
> 标签：wordpress

好的，所以我有这个。

```
<?php 
    $count_posts = wp_count_posts('attractions'); 
    echo $count_posts->publish; 
?> 
```

我目前有很多吸引人的帖子在页面上回响，但是当我尝试添加另一个帖子时，它会中断。例如，如何将景点和餐厅添加在一起？

如果我做

```
$count_posts = wp_count_posts('attractions', 'festivals'); 
echo $count_posts->publish; 
```

它不会将两者加在一起，所以我的问题是如何编写它以便将它们加在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T00:49:39.293

你的问题是基本的PHP。

```
$attractions_count = wp_count_posts('attractions');
$restaurants_count = wp_count_posts('restaurants');
$festivals_count   = wp_count_posts('festivals');
$total = $attractions_count->publish + $restaurants_count->publish + $festivals_count->publish;
echo $total; 
```

始终检查[PHP 手册](http://php.net/manual/en/langref.php)。

很多[很好的教程](http://wp.tutsplus.com/tag/php/)。

[WordPress Codex](http://codex.wordpress.org/)，必不可少。

提问前先搜索一下这个网站，可能你会发现很多疑问已经得到解答，PHP、Html、CSS 和 jQuery。

[WordPress StackExchange](https://wordpress.stackexchange.com/)也充满了好材料。

# php - 简单的php联系表问题，不发送

> ID：14085994
> 
> 赞同：0
> 
> 时间：2012-12-29T21:16:56.593
> 
> 标签：php, forms, contact

为客户建立网站但联系表无法正常工作，我为客户设置了一个电子邮件帐户“contact@eunicedcolvin.co.uk”，但它似乎没有完成发送以加载成功消息，这是下面的代码。我对 PHP 相当陌生，但无法弄清楚问题所在。

```
<div id="contact-form" style="background: none;">

            <div id="contact-header"></div>

                <div id="contact-middle">

            <?php 
            if ($_POST["email"]<>'') {  
                $ToEmail = 'contact@eunicedcolvin.co.uk'; 
                $EmailSubject = 'Website Contact'; 
                $mailheader = "From: ".$_POST["email"]."\r\n"; 
                $mailheader .= "Reply-To: ".$_POST["email"]."\r\n"; 
                $mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
                $MESSAGE_BODY = "Name: ".$_POST["name"]."<br>"; 
                $MESSAGE_BODY .= "Email: ".$_POST["email"]."<br>"; 
                $MESSAGE_BODY .= "Comment: ".n12br($_POST["comment"])."<br>"; 
                mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 
                ?> 
                <div id="contact-success">
                <span style="font-size:16px; font-weight:bold; ">Thanks! Your message was sent</span><br>
                I will get back to you as soon as I can
                </div>
                </div>
        <?php 
        } else { 
        ?>       
      <form method="POST">
        <table width="360" border="0" cellspacing="8" cellpadding="0" style="margin-left: 11px;">
          <tbody><tr>
            <td class="contact-label">Your name:<br></td>
            <td class="contact-text-border"><input name="name" type="text" id="name" size="32" class="contact-name"></td>
            </tr>
          <tr>
            <td class="contact-label">Your Email address:</td>
            <td class="contact-text-border"><input name="email" type="text" id="email" size="32" class="contact-name"></td>
            </tr>
          <tr>
            <td class="contact-label">Comment:</td>
            <td class="contact-text-border" style="padding: 2px 2px;"><textarea name="comment" cols="45" rows="6" id="comment" class="contact-comment"></textarea></td>
            </tr>
          <tr>
            <td height="33" class="contact-label">&nbsp;</td>
            <td align="left" valign="top">
            <input type="submit" name="Submit" class="submit" value="."></td>
            </tr>
          </tbody></table>
        </form> 
        <?php 
        };      
        ?>

        </div>
        <div id="contact-bottom"></div>
            </div>

        </div> 
```

如果您想现场观看它的样本，请点击此处：[http ://www.eunicedcolvin.co.uk/contact.html](http://www.eunicedcolvin.co.uk/contact.html)

[链接到网站](http://www.eunicedcolvin.co.uk/contact.html)

问题是，最初它被设置为发布到我的个人电子邮件中进行测试，然后当我将它交换过来时它拒绝工作！一段时间以来一直在为此绞尽脑汁：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T21:24:48.630

您的电子邮件发送服务器很可能没有正确设置。

如果它实际上正在发送，那么它可能会被垃圾邮件过滤。

此外，您不应将发件人地址设置为表单中提交的地址，因为您的服务器将无权从该域发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T10:22:51.960

要尝试您的服务器是否已配置邮件：

```
if(@mail($emailRecipient, $subject, $message, $headers))
{
  echo "Mail Sent Successfully";
}else{
  echo "Mail Not Sent";
} 
```

使用此代码，仅使用此代码将其上传到简单的 x.php 文件（插入邮件等），您就知道您的服务器是否正常 :)...

或者可能被放入接收者的垃圾邮件文件夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T13:07:21.573

使用 SMTP。

不要花时间尝试使邮件正常工作....在我看来，这只是浪费时间，并且大多数与它一起发送的电子邮件最终都在垃圾邮件文件夹中。

# logging - log4cplus - 如何将记录器子级别配置为依赖于其父级

> ID：14085996
> 
> 赞同：1
> 
> 时间：2012-12-29T21:17:03.883
> 
> 标签：logging, log4j, log4cplus

嘿，我正在尝试 log4cplus（类似于 log4j 和我的标签）库。

从属性文件中，是否可以使记录器级别取决于其父级，如下所示：

*   如果 parent=INFO & child=WARN ，孩子应该记录消息 >= "WARN"
*   如果 parent=OFF & child=WARN ，孩子不应该记录任何消息。
*   如果 parent.parent=ALL & parent=WARN & child=INFO，孩子应该记录消息 >=WARN
*   如果 parent.parent=OFF & parent=ALL & child=WARN ，则任何人都不应记录导致 parent.parent 的消息。

使用下面的代码，结果如下（并且错误！）

*   parent=WARN & child=FATAL ，孩子正在记录 WARN 消息
*   parent=OFF & child=WARN ，孩子正在记录消息。

我的属性文件 - log.properties：

```
 log4cplus.logger.cpuLoad=WARN, FILEAPPENDER
    log4cplus.logger.cpuLoad.child=FATAL, FILEAPPENDER
    log4cplus.additivity.cpuLoad.child=false

    log4cplus.appender.FILEAPPENDER=log4cplus::RollingFileAppender
    log4cplus.appender.FILEAPPENDER.File=./cpuLoad.log
    log4cplus.appender.FILEAPPENDER.MaxFileSize=1MB
    log4cplus.appender.FILEAPPENDER.layout=log4cplus::PatternLayout
    log4cplus.appender.FILEAPPENDER.layout.ConversionPattern=%d{%m/%d/%y %H:%M:%S} %-5p %c{2} – %m%n 
```

我的 C++ 代码 - main.cpp：

```
 Logger loggerCpu = Logger::getInstance("cpuLoad");
    Logger loggerCpuChild = Logger::getInstance("cpuLoad.child");

    LOG4CPLUS_WARN(loggerCpu, "hello from loggerCpu");
    LOG4CPLUS_WARN(loggerCpuChild, "hello from loggerCpuChild" ); 
```

我希望它可以从 log4cplus 库本身工作，并且主要来自属性文件。我还需要这个父/子关系，所以我可以使用 getParent()。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:47:48.157

尝试更改此行

```
log4cplus.logger.cpuLoad.child=FATAL, FILEAPPENDER 
```

进入这个

```
log4cplus.logger.cpuLoad.child=INHERITED, FILEAPPENDER 
```

这应该够了吧。

**编辑：**

@jaguzu：我不太了解 log4j，但在我看来，您想要实现的目标超出了 log4j 和 log4cplus 使用的模型：要么明确设置日志级别，要么从父记录器继承它。您可以使用记录器阈值和附加过滤器实现更多过滤，但两者都不是从父记录器 AFAIK 继承的。

# arrays - 一两个数组可以解决这个问题吗？

> ID：14085999
> 
> 赞同：0
> 
> 时间：2012-12-29T21:17:20.100
> 
> 标签：arrays, actionscript-3

我接手了一个项目，我对 as3 真的很陌生！我需要解决一个未解决的问题，而不是从头开始。

我有一个 contaner_mc，有四个 puppet_mc ( `puppet_mc1`, `puppet_mc2`, `puppet_mc3`, `puppet_mc4`)，每个 puppet_mc 有四个按钮 ( `buddy_bnt_1`, `buddy_bnt_2`, `buddy_bnt_3`, `buddy_bnt_4`)。

我需要听众知道单击了哪个按钮以及单击了哪个木偶？

```
Object(this).contaner_mc.puppet_mc?.buddy_bnt_?.addEventListener(MouseEvent.CLICK, fl_Click);

function fl_Click(event:MouseEvent):void
{
    gotoAndPlay(15);
} 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T21:38:22.610

事件冒泡应该是神奇的：

```
container_mc.addEventListener(MouseEvent.CLICK, click_handler);

function click_handler(event:MouseEvent):void {
  if (event.currentTarget == event.target) {
    return; // the container is the dispatcher
  }

  const sprite:Sprite = event.target as Sprite; // just for a typing
  if (!sprite) {
    trace("event.target is no sprite, set break point here for debugging.");
    return;
  }

  if (sprite.name == 'buddy_bnt_1' || sprite.name == 'puppet_mc1') {
    // do something
  } else if (sprite.name == 'buddy_bnt_2' || sprite.name == 'puppet_mc2') {
    // do something different
  } else if (sprite.name == 'buddy_bnt_3' || sprite.name == 'puppet_mc3') {
    // do something different
  } else if (sprite.name == 'buddy_bnt_4' || sprite.name == 'puppet_mc4') {
    // do something different
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T23:10:24.340

```
container_mc.addEventListener(MouseEvent.CLICK, clickHandler);

function clickHandler(event:MouseEvent):void
{
    var clickedObject:DisplayObject = event.target as DisplayObject;

    trace (clickedObject.name);   // name of button clicked
    trace (clickedObject.parent.name);  // name of the parent
} 
```

我使用了 DisplayObject，以便代码可以与 sprite、movieclip 或任何 DisplayObject 一起使用。因此，如果您还没有导入，请确保导入：

```
import flash.display.DisplayObject; 
```