# StackOverflow 问答 14156000-14156999

# c# - outlook redemption

> ID：14156007
> 
> 赞同：0
> 
> 时间：2013-01-04T11:09:54.793
> 
> 标签：c#, outlook-2010

I was evaluating the outlook redemption for conversion of .eml to .msg file and subsequently purchase of the software.

what I found was it uses current user login to connect to outlook and convert a .eml file to .msg.

but I would like to know is that if we deploy this on the server we would use a service account for the conversion.

now the question is whether this service account that is used to perform the .eml to .msg conversion is required to have valid email id on the exchange server.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:18:30.640

您可以使用
LogonExchangeMailbox(User, ServerName) 或
LogonPstStore(Path, Format, DisplayName, Password, Encryption) [http://www.dimastr.com/redemption/rdo/rdosession.htm](http://www.dimastr.com/redemption/rdo/rdosession.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T18:00:45.690

请记住，您无需登录即可将 EML 文件转换为 MSG：调用 RDOSession.CreateMessageFroMMsgFIle（返回 RDOMail 对象），调用 RDOMail.IMport(..., olRfc822) 导入 EML 文件，然后调用 RDOMail.Save。

# python - Linux Mint 14 & python PIL gives error

> ID：14156013
> 
> 赞同：1
> 
> 时间：2013-01-04T11:10:28.087
> 
> 标签：python, django, python-imaging-library, virtualenv

I am trying to upload and resize an image using PIL on Django 1.4.1\.

I have tried this: [https://stackoverflow.com/a/10109941/356875](https://stackoverflow.com/a/10109941/356875)

but nothing changed.

I use `virtualenv` and when I do `pip install -I PIL` I get this error:

```
running install_lib

creating /usr/lib/python2.7/site-packages

error: could not create '/usr/lib/python2.7/site-packages': Permission denied 
```

so I have to `sudo pip install -I PIL` which works and gives me this:

```
 PIL 1.1.7 SETUP SUMMARY
    --------------------------------------------------------------------
    version       1.1.7
    platform      linux2 2.7.3 (default, Sep 26 2012, 21:51:14)
                  [GCC 4.7.2]
    --------------------------------------------------------------------
    *** TKINTER support not available
    --- JPEG support available
    --- ZLIB (PNG/ZIP) support available
    *** FREETYPE2 support not available
    *** LITTLECMS support not available
    --------------------------------------------------------------------
    To add a missing option, make sure you have the required
    library, and set the corresponding ROOT variable in the
    setup.py script.

    To check the build, run the selftest.py script.
    changing mode of build/scripts-2.7/pildriver.py from 644 to 755
    changing mode of build/scripts-2.7/pilprint.py from 644 to 755
    changing mode of build/scripts-2.7/pilfile.py from 644 to 755
    changing mode of build/scripts-2.7/pilconvert.py from 644 to 755
    changing mode of build/scripts-2.7/pilfont.py from 644 to 755

    changing mode of /usr/local/bin/pildriver.py to 755
    changing mode of /usr/local/bin/pilprint.py to 755
    changing mode of /usr/local/bin/pilfile.py to 755
    changing mode of /usr/local/bin/pilconvert.py to 755
    changing mode of /usr/local/bin/pilfont.py to 755
Successfully installed PIL
Cleaning up... 
```

However when I try to save a model I get this error:

```
IOError at /admin/main/pagecategory/21/

decoder jpeg not available

Request Method:     POST
Request URL:    http://localhost:8000/admin/main/pagecategory/21/
Django Version:     1.4.1
Exception Type:     IOError
Exception Value:    

decoder jpeg not available

Exception Location:     /home/chris/.virtualenvs/holistic/lib/python2.7/site-packages/PIL/Image.py in _getdecoder, line 385
Python Executable:  /home/chris/.virtualenvs/holistic/bin/python
Python Version:     2.7.3
Python Path:    

['/home/chris/Dropbox/workspace/holistic',
 '/home/chris/.virtualenvs/holistic/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/home/chris/.virtualenvs/holistic/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',
 '/home/chris/.virtualenvs/holistic/lib/python2.7',
 '/home/chris/.virtualenvs/holistic/lib/python2.7/plat-linux2',
 '/home/chris/.virtualenvs/holistic/lib/python2.7/lib-tk',
 '/home/chris/.virtualenvs/holistic/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/home/chris/.virtualenvs/holistic/lib/python2.7/site-packages',
 '/home/chris/.virtualenvs/holistic/lib/python2.7/site-packages/PIL',
 '/usr/local/lib/python2.7/site-packages',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/local/lib/python2.7/dist-packages/PIL']

Server time:    Fri, 4 Jan 2013 12:35:58 +0200 
```

What am I doing wrong?

(PS: exact same configuration works fine on my remote hosting linux server)

EDIT: I dpasted another detailed output Thank you. [http://dpaste.com/867770/](http://dpaste.com/867770/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T22:23:44.350

`activate`您的/`workon`脚本可能有问题。尝试传递您的 virtualenv 的`pip`绝对路径，例如：

```
$ /tmp/myenv/bin/pip install -I PIL 
```

为了检查 PIL 是否安装在您的 virtualenv 中，请执行以下操作：

```
$ /tmp/myenv/bin/python -c 'import PIL' 
```

如果它没有给您任何错误，则它已正确安装。

也许你的问题和这个一样：[默认是 System PIP 而不是 virtualenv PIP？](https://stackoverflow.com/questions/9235212/system-pip-instead-of-virtualenv-pip-by-default/)

# c# - 打开表单之前要执行的全局函数

> ID：14156014
> 
> 赞同：0
> 
> 时间：2013-01-04T11:10:28.130
> 
> 标签：c#, visual-studio-2010, class, function

我有大约 15 个表格，每个表格都包含一些类似的代码。

我想知道的是，有什么方法可以在打开表单时自动调用包含该特定代码的函数？

就像，假设我想在`Hello World`每次加载任何形式的项目时显示消息。

所以我能做的是我可以创建一个模块或类文件，我可以添加一段代码，我可以以各种形式调用它。

但这是我不想要的，我想要的是，有什么方法可以添加这段代码，并在加载表单时自动填充/触发它。

**也许我们可以称它为 - 表单的自动调用函数**

就像，每当表单自动打开时，都会调用一个类或函数，而无需在特定表单中定义它。也许是一种库之类的东西，当加载表单时无论如何都会调用它，我可以在那里添加我的一段代码并执行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:15:06.577

创建您自己的继承自表单的基类：

```
public abstract class FormBase : Form { /*...*/ } 
```

然后您使用的每个表单都可以从这个基类继承：

```
public class MyForm : FormBase { /*...*/ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:14:46.893

您可以在表单中添加一个事件处理程序，并在其中放置需要运行的任何代码。

例如：

```
this.Load += new System.EventHandler(this.FormName_Load); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:18:50.773

```
public class frm_Base : Form
{
  public void frm_Base()
  {
    this.Load += new System.EventHandler(this.frm_Base_Load);
  }
  public void frm_Base_Load(object sender, EventArgs e)
  {
    OnFormLoad();
  }
  public virtual OnFormLoad()
  {
    MessageBox.Show("Hello World");
  }
}
public class frm_Derived : frm_Base
{
  public override OnFormLoad()
  {
    base.OnFormLoad();
    MessageBox.Show("Another Hello From Derived");
  }
} 
```

您现在可以继承所有其他表单中加载时发生的功能，也可以通过将加载方法设为虚拟来执行其他操作。

# ios - IOS：在情节提要中释放视图控制器

> ID：14156016
> 
> 赞同：0
> 
> 时间：2013-01-04T11:10:30.477
> 
> 标签：ios, storyboard

我有这段代码可以打开带有情节提要的视图控制器

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    secondViewController = [storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];
[self.view addSubview:secondViewController.view]; 
```

它工作正常，但是当我删除它时，我想释放 secondViewController

```
[secondViewController.view removeFromSuperview]; 
```

并释放它？？？当我调用 secondViewController 时没有分配...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:15:06.673

`-instantiateViewControllerWithIdentifier:`返回一个`autoreleased`对象。你不必释放它。当您将其`view`从其中删除时`superview`，它将被释放。如果您使用的是`ARC`这个问题，则根本不应该问...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:13:10.700

我假设您正在使用 ARC。就写吧`secondViewController = nil;`。它应该自动释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:16:02.493

首先，区分你的可视化 UIView 实例和 UIViewController 实例是很重要的。该`instantiateViewControllerWithIdentifier`调用返回一个具有 UIView 属性的视图控制器对象（ UIViewController 不需要显式释放，因为它是一个自动释放的实例） - 这个**UIView**是添加到超级视图的内容，它也被它保留，只要因为它确实是某些视图的子视图。从超级视图中删除该视图并提供您使用 ARC 后，应该释放该视图，除非您对它的 UIViewController 持有强引用，在这种情况下，只需为 UIViewController 属性分配一个 nil 值即可处理它。如果不使用ARC，则需要调用“release”**（不是视图）**

# c++ - 可以重用数据库连接吗？

> ID：14156019
> 
> 赞同：1
> 
> 时间：2013-01-04T11:10:39.570
> 
> 标签：c++, sql, postgresql

我正在尝试创建一个可以访问 PostgreSQL 数据库的程序。问题是我不断得到一个

> 警告：已经有一个事务在进行中

消息，程序很快退出。我是否需要在需要时关闭并重新打开连接，或者我可以解决问题并在整个程序中重复使用相同的连接？

```
 int i = 0;
    std::string spassw = "";
    std::string suname = "";

    theconn = NULL;

    // Make a connection to the database
    theconn = PQconnectdb("user=postgres password=changeme dbname=database hostaddr=127.0.0.1    port=5432");

    // Check to see that the backend connection was successfully made
    if ( PQstatus(theconn) != CONNECTION_OK )   {

        std::cout << "Connection to database failed.\nPress any key to continue.\n";
        PQfinish(theconn);
        getchar();
        exit(1);
     }

    PGresult *res  = PQexec(theconn, "BEGIN");

    if (PQresultStatus(res) != PGRES_COMMAND_OK)    {

        printf("BEGIN command failed");
        PQclear(res);
        PQfinish(theconn);
        std::cout << "Goodbye.\n";
        getchar();
        exit(1);
    }

    // Clear result
    PQclear(res);

    res = PQexec(theconn, "DECLARE emprec CURSOR FOR select * from dbtable");

    if (PQresultStatus(res) != PGRES_COMMAND_OK)    {

        printf("DECLARE CURSOR failed\n");
        PQclear(res);
        PQfinish(theconn);
        std::cout << "Goodbye.\n";
        getchar();
        exit(1);
     }

    PQclear(res);
    res = PQexec(theconn, "FETCH ALL in emprec");

    if (PQresultStatus(res) != PGRES_TUPLES_OK) {

        printf("FETCH ALL failed");
        PQclear(res);
        PQfinish(theconn);
        std::cout << "Goodbye.\n";
        getchar();
        exit(1);
    }

    for ( i = 0; i < PQntuples(res); i++ )    {

        std::string suname = PQgetvalue( res, i, 0 );
        std::string spassw = PQgetvalue( res, i, 1 );

        if( pname == suname && pword == spassw )    {

        res = PQexec( theconn, "COMMIT");
        PQclear(res);

        res = PQexec(theconn, "CLOSE emprec" );
        PQclear(res);

        // End the transaction
        res = PQexec(theconn, "END");

        // Clear result
        PQclear(res);
        return true;
        }

    }

    res = PQexec( theconn, "COMMIT");
        PQclear(res);

    res = PQexec(theconn, "CLOSE emprec");
    PQclear(res);

    // End the transaction
    res = PQexec(theconn, "END");

    // Clear result
    PQclear(res);

    return false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T11:23:21.840

这里有一个提示：您可以在应用程序的整个执行过程中使用单个连接，但您需要注意事务。您收到的警告是由于正在进行的交易，因此请确保您正确提交和关闭交易。由于我不是 C++ 程序员，因此我无法为您提供有关您的 C++ 代码的建议，但看起来您的问题不是特定于语言的，而是概念性的。否则，我深表歉意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:29:12.570

由于代码有一个`BEGIN`启动事务的，它应该有一个（并且只有一个）匹配`COMMIT`，或`END`，但不能同时有。

原因是它`END`实际上是 的同义词`COMMIT`。[手册](http://www.postgresql.org/docs/current/static/sql-end.html)是这样说的：

> 该命令是相当于 COMMIT 的 PostgreSQL 扩展。

鉴于您的代码当前是如何在光标关闭时组织的，出现以下情况：

```
 res = PQexec( theconn, "COMMIT");
        PQclear(res); 
```

应该被删除。

# c# - C# Image upload to my server

> ID：14156021
> 
> 赞同：0
> 
> 时间：2013-01-04T11:10:40.290
> 
> 标签：c#, image, upload

I am running a C# server with socket connection to my clients. I want to give them the option to upload images to my server.

But when I start writing the implementation I notice that my socket buffer need to be 1M in order to store all the image data before I even handle it. And this is some thing that scares me a bit...

Is there any good practices for what I am trying to achieve. May be I am doing everything right?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:12:16.707

> 我注意到我的套接字缓冲区需要 1M 才能在我处理之前存储所有图像数据。

它不应该。即使，谁在乎？服务器有千兆字节，您不会同时处理数千个上传。

但是不，它不应该是 1mb “必需的”。为什么你会这样想？只需足够快地清空接收缓冲区即可。

# c++ - 如何使用枚举成员初始化结构？

> ID：14156022
> 
> 赞同：5
> 
> 时间：2013-01-04T11:10:40.803
> 
> 标签：c++, struct

我有一个包含许多成员和不同类型的结构（大约有 20 个成员）：

```
enum TheEnum
{
    FIRST = 0,
    SECOND,
    ...
}

struct TheStruct
{
    TheEnum z; // <--- the point !!! note that this is the first member (edited)
    int a;
    int b;
    char c[32];
    ...
} 
```

由于有一个枚举类型成员，我不能像这样声明：

```
TheStruct Object = {0}; 
```

它会给出编译错误，但我认为这种初始化是最好的方法。

我能想到的其他方法是：
1.`ZeroMemory`它，但我不喜欢这个。
2.写一个构造函数，但这需要做很多工作。
3\. 只是不要初始化它。

那么，有没有办法解决**枚举**问题呢？我应该在这 3 种方式中选择一种方式吗？
谢谢！

编辑：我的大错误，该错误仅在`TheEnum`作为第一个成员出现时发生。
使用 vs2008 和 C++ 代码编译。
错误是 C2440。[http://msdn.microsoft.com/en-us/library/sy5tsf8z%28v=VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/sy5tsf8z%28v=VS.80%29.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:29:39.127

[编辑] 随着问题的改变

如果初始化结构，则必须在初始化程序中提供正确的类型。在您的情况下，正确的初始化如下所示：

```
TheStruct Object = {FIRST}; 
```

您的初始化列表使用您编写的内容初始化给定数量的结构成员，并使用“0”初始化结构的其余部分。由于您的第一个成员是枚举，因此在这种情况下您必须初始化该枚举。

[/编辑]

没有什么必要的。如果您使用 C 而不是 C++ 进行编译，请不要忘记编写 enum 和 struct ，一切都应该工作......

```
enum TheEnum
{
    FIRST = 0,
    SECOND,
    ...
}

struct TheStruct
{
    int a;
    int b;
    char c[32];
    ...
    enum TheEnum z; // <--- the point !!!
}

struct TheStruct Object = {0}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:14:20.483

`enum`您可以像其他任何人一样初始化成员。例如：`TheStruct temp = {0,0,"", FIRST};`

# python - PyQt4 QThread / moveToThread not working depending on context?

> ID：14156025
> 
> 赞同：0
> 
> 时间：2013-01-04T11:10:57.663
> 
> 标签：python, multithreading, pyqt, pyqt4

I'm trying to understand why the following code immediately exits, but works if I create the thread in the main context and not in a second object?

```
from PyQt4 import QtCore
import time
import sys

class SomeObject(QtCore.QObject):

    finished = QtCore.pyqtSignal()

    def longRunning(self):
        count = 0
        while count < 5:
            time.sleep(1)
            print "Increasing"
            count += 1
        self.finished.emit()

class SecondObject(QtCore.QObject):
    def __init__(self, app):
        QtCore.QObject.__init__(self)
        objThread = QtCore.QThread()
        obj = SomeObject()
        obj.moveToThread(objThread)
        obj.finished.connect(objThread.quit)
        objThread.started.connect(obj.longRunning)
        objThread.finished.connect(app.exit)
        objThread.start()

def usingMoveToThread():
    app = QtCore.QCoreApplication([])
    SecondObject(app)
    sys.exit(app.exec_())

if __name__ == "__main__":
    usingMoveToThread() 
```

Thanks in Advance for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:25:53.950

我发现了问题。显然您需要保留新线程的引用，否则应用程序将退出......

# java - Preethams 中的太阳定位“日光的实用分析模型”

> ID：14156026
> 
> 赞同：1
> 
> 时间：2013-01-04T11:10:58.817
> 
> 标签：java, processing

我正在尝试为处理[中的日光实施实用分析模型](http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf)并将其投影到 2d 画布上。到目前为止一切正常，除了太阳方位角的一个令人讨厌的问题。

当我为一天中的时间设置动画时，太阳会在特定时间跳到对面的位置。发生这种情况是因为方位角从 -90 度变为 +90 度，反之亦然。我不确定这是对纸张的限制，还是我在计算太阳位置时出错了。据我了解，方位角应该在 0 到 360 度之间。

任何人已经实施了 Preetham 论文并且可以帮助我吗？

这是我计算太阳位置的代码。您可以在此处下载完整的处理草图： [https ://dl.dropbox.com/u/42247259/PreethamSky.zip](https://dl.dropbox.com/u/42247259/PreethamSky.zip)

谢谢你的帮助。HG

```
private void calculateSolarPosition() {
    float t = solarTime(standardTime, dayOfYear, standardMeridian, longitude);
    float delta = solarDeclination(dayOfYear);
    thetaS = angleFromSunToZenith(t, delta, latitude);
    phiS = sunAzimuth(t, delta, latitude);
}

/// Returns the solar time at a certain geographic place, day of year and standard time.
private float solarTime(float standardTime, int dayOfYear, float standardMeridian, float longitude) {
    return (float)(standardTime + 0.17 * sin(4 * PI * (dayOfYear - 80) / 373) - 0.129 * sin(2 * PI * (dayOfYear - 8) / 355) + 12 * (standardMeridian - longitude) / PI);
}

/// Returns the solar declination. Solar declination is the angle between the rays of the sun and the 
/// plane of the earth's equator.
private float solarDeclination(int dayOfYear) {
    return (float)(0.4093 * sin(2 * PI * (dayOfYear - 81) / 368.0));
}

/// Returns the angle from the sun to the zenith in rad.
private float angleFromSunToZenith(float solarTime, float solarDeclination, float latitude) {
    return (float)(PI / 2 - asin(sin(latitude) * sin(solarDeclination) -  cos(latitude) * cos(solarDeclination) * cos(PI * solarTime / 12)));
}

/// Returns the azimuth of the sun in rad. Azimuth is the angle between a line to south and the sun.
private float sunAzimuth(float solarTime, float solarDeclination, float latitude) {
    return (float)-(atan((-cos(solarDeclination) * sin(PI * solarTime / 12)) /
        (cos(latitude) * sin(solarDeclination) - sin(latitude) * cos(solarDeclination) *
        cos(PI * solarTime / 12.0))));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:22:58.163

我没有尝试过，所以它可能不起作用（取决于我没有详细研究过的公式），但`atan`你可以使用`atan2`给出完整 360 度结果的函数来代替。

```
/// Returns the azimuth of the sun in rad. Azimuth is the angle between a line to south and the sun.
    private float sunAzimuth(float solarTime, float solarDeclination, float latitude) {
    return (float)-(atan2((-cos(solarDeclination) * sin(PI * solarTime / 12)),
        (cos(latitude) * sin(solarDeclination) - sin(latitude) * cos(solarDeclination) *
        cos(PI * solarTime / 12.0))));
} 
```

这个函数考虑了分子和分母的符号来决定角度应该在哪个象限。

# android - Android Broadcast receiver for RJ45 ethernet cable

> ID：14156028
> 
> 赞同：3
> 
> 时间：2013-01-04T11:11:00.590
> 
> 标签：android, broadcastreceiver, ethernet, connectivity

I am creating a sample code, for detecting whether the RJ45 cable is connected or not. I have written a broadcast receiver for the detecting.

```
@Override
public void onReceive(Context context, Intent intent) {

    String action = intent.getAction();

    if(action.equals(ConnectivityManager.CONNECTIVITY_ACTION)){
        Log.i("Calling Connectivity action in broadcast receiver ", "");
        updateConnectivity(intent);
    }
}

private void updateConnectivity(Intent intent) {

    NetworkInfo info = (NetworkInfo)(intent.getParcelableExtra(
            ConnectivityManager.EXTRA_NETWORK_INFO));

    if (info != null && info.getType() == ConnectivityManager.TYPE_ETHERNET) {
        mEthernetConnected = info.isConnected();
    }

    if(mEthernetConnected)
        Log.i("Ethernet connected status is  ", "" +mEthernetConnected);
    else
        Log.i("Ethernet connected status is  ", "" +mEthernetConnected);} 
```

I am registering this an activity class

```
intentFilter = new IntentFilter();
    intentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);

    mBroadcastReceiver = new EthernetReceiver(this);
    this.registerReceiver(mBroadcastReceiver, intentFilter); 
```

Here in this it is returning only false in logs. can any one has idea how to fix this issue. Thanks in advance.

# delphi - 自定义 TControl 在剪切和粘贴之前不会在设计时绘制

> ID：14156030
> 
> 赞同：1
> 
> 时间：2013-01-04T11:11:04.647
> 
> 标签：delphi, controls, custom-controls, delphi-xe2

我对 TChromeTabs 有一个奇怪的问题。我知道它一定很简单，但我不知道需要做什么来修复它。

当我最初将 TChromeTabs 控件放在表单上时，它是完全透明的。如果我剪切控件，然后将其粘贴回表单，则内容将正确显示。如果我关闭，内容也会出现，然后重新打开表单。

因为我不知道为什么会发生这种情况，所以我真的不能给你任何代码示例。但是，您可以在此处下载源代码：[http](http://code.google.com/p/delphi-chrome-tabs/downloads/list) ://code.google.com/p/delphi-chrome-tabs/downloads/list 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:38:44.830

您的控件不会自行绘制，因为您禁用了绘制。[您`BeginUpdate`在构造函数](https://code.google.com/p/delphi-chrome-tabs/source/browse/trunk/Lib/ChromeTabs.pas?r=33#1348)中调用，并且在调用[方法](https://code.google.com/p/delphi-chrome-tabs/source/browse/trunk/Lib/ChromeTabs.pas?r=33#3125)[之前](https://code.google.com/p/delphi-chrome-tabs/source/browse/trunk/Lib/ChromeTabs.pas?r=33#3125)[不会调用`EndUpdate``Loaded`](https://code.google.com/p/delphi-chrome-tabs/source/browse/trunk/Lib/ChromeTabs.pas?r=33#3125)。但`Loaded`仅在从持久状态*加载控件时调用。*通常，我们认为这是从 DFM 文件加载控件时的情况，但 IDE 使用相同的技术来允许将控件放在剪贴板上。

您以前没有注意到这一点，因为显然您只是通过打开一个预制的演示项目来测试您的控件。演示项目的 DFM 文件中有一个控件，因此您使用的唯一代码路径是 DFM 案例。您不会使用直接调用构造函数的路径——当控件第一次放在窗体上时，或者当控件在代码中“动态”创建时。

要解决此问题，首先要摆脱[您的构造函数中](https://code.google.com/p/delphi-chrome-tabs/source/browse/trunk/Lib/ChromeTabs.pas?r=33#1348)[的`BeginUpdate`](https://code.google.com/p/delphi-chrome-tabs/source/browse/trunk/Lib/ChromeTabs.pas?r=33#1348)调用。相反，要检查您的控件是否仍在构建过程中，请检查`csCreating in ControlState`.

你也可以摆脱你的`stsLoading`状态。Delphi 已经为您提供了`csLoading`一些`ComponentState`. 此外，您的使用`stsLoading`是错误的，因为[您在构造函数中设置了它](https://code.google.com/p/delphi-chrome-tabs/source/browse/trunk/Lib/ChromeTabs.pas?r=33#1338)，就像您对`BeginUpdate`.

`Loaded`您可能希望将某些代码移动到方法中，而不是依赖于被调用`AfterConstruction`。将需要在创建组件后运行但与从 DFM（或其他持久性源）加载属性无关的代码放在那里。我不确定我在你的方法中看到*了什么*`Loaded`真正属于那里的东西。几乎所有这些都应该能够在构造函数中发生。

您还应该了解该`CreateWnd`方法。它在您的控件的窗口句柄被分配时调用。这就是你应该开始允许绘制操作发生的地方。当你没有窗把手时，你就没有什么可画的了。

# delphi - 无法为 TMonthCalendar 设置颜色

> ID：14156037
> 
> 赞同：1
> 
> 时间：2013-01-04T11:11:44.223
> 
> 标签：delphi

我尝试通过 CalColors 更改 TMonthCalendar 的设置，但它不起作用。无论是在设计时还是运行时。日历保持不变。

更新：
看起来有人在质量中心报告了完全相同的问题：http: //qc.embarcadero.com/wc/qcmain.aspx?d=
[53494](http://qc.embarcadero.com/wc/qcmain.aspx?d=53494)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T13:39:52.047

正如大卫所说，`TMonthCalendar`内部使用[`MCM_SETCOLOR`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb760997.aspx)消息来设置控件的颜色，但是当视觉样式处于活动状态时，此消息不起作用。作为解决方法，您可以使用该[`SetWindowTheme`](http://msdn.microsoft.com/en-us/library/bb759827%28v=VS.85%29.aspx) 函数仅禁用此控件上的视觉样式。

试试这个样本：

```
uses
  UxTheme;

   SetWindowTheme(MonthCalendar1.Handle, '', '');
   MonthCalendar1.CalColors.MonthBackColor:=clWebKhaki;
   MonthCalendar1.CalColors.TitleBackColor:=clWebDarkOrange; 
```

![在此处输入图像描述](../Images/3842d2af40398b5a6011e41467fe818d.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T11:41:27.763

这种行为是*设计*的。该控件是 Win32 控件的包装器。查看[`MCM_SETCOLOR`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb760997.aspx). 在备注中，您可以找到此声明。

> 如果视觉样式处于活动状态，则此消息无效，除非 wParam 为 MCSC_BACKGROUND。

我认为在 Vista 及更高版本中，即使尝试设置`MCSC_BACKGROUND`对应于 的`CalColors.BackColor`，也没有效果。

如果您在应用程序中禁用视觉样式，您确实可以看到应用了中指定的设置`CalColors`。

# playn - 如何设置 PlayN 大小

> ID：14156040
> 
> 赞同：3
> 
> 时间：2013-01-04T11:11:57.130
> 
> 标签：playn

我试过了 ：

```
graphics().setSize(800, 600); 
```

但它没有任何效果（至少对 java 和 html 而言）。

而且似乎这种方法已被弃用。设置游戏大小的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T21:39:32.813

此方法在 PlayN 1.5 版本中已弃用，Android/iOS 上的游戏视图大小由设备决定。Java 上的大小是通过 JavaPlatform.Config 配置的。HTML 中的大小由您的 playn-root div 的大小配置。

例如在 java 后端：

```
public class GameJava {
  public static void main(String[] args) {
//Setting the size of the Java Backend
      Config config = new Config();
      config.width = 800;
      config.height = 480;
    JavaPlatform platform = JavaPlatform.register(config);
    platform.assets().setPathPrefix("your/package/resources");
    PlayN.run(new Game());
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T22:24:52.480

对于 HTML 做这样的事情：

```
<style>
  #playn-root {
    width: 640px;
    height: 480px;
  }
</style>
....
<div id="playn-root"></div>
<body>
    <script src="game/game.nocache.js"></script>
</body> 
```

# c++ - 带有模板类的模板特化

> ID：14156044
> 
> 赞同：1
> 
> 时间：2013-01-04T11:12:31.923
> 
> 标签：c++, template-specialization

我执行以下操作。

```
template <class C> class B{};

template <class X> 
struct  A{
  int member;
};

template <class Y> 
struct  A<B<Y>>{
    A(int n):member(n){}
};

int main(int, char**){} 
```

即 X 类可能是模板本身，对于这种情况，我希望对 A 类模板进行专门化。
但是编译器说：

```
d:\>g++ -std=gnu++11 -o spec.exe spec.cpp
spec.cpp: In constructor 'A<B<Y> >::A(int)':
spec.cpp:11:14: error: class 'A<B<Y> >' does not have any field named 'member' 
```

如果 class`A<B<Y>>`完全分开，`A`那么一切都是正确的，并且可能没有`A`. 但我想要专业化`A`。及其所有内容。
或者，可能是一些专门的构造函数`A`for case when `X`is `B<Y>`。
如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:21:29.750

模板特化是一种与继承完全不同的机制。它不扩展通用模板的内容：它用专门案例的新内容替换它们。所以编译器是对的：你的类`A<B<Y>>`没有任何名为`member`. 它只有一个构造函数，它接受一个`int`和一些额外的自动生成的函数（复制构造函数、析构函数等）。

如果你想“继承”模板的内容，你有两个选择：

*   将模板中的所有内容复制到专业化中
*   将公共内容放在基类中并从其继承

根据您想要做什么，这些选项中的一个会比另一个更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:41:34.987

这是如何实现它：

```
template <class C> class B{};

template <class X>
struct  A{
  int member;
};

template <class Y>
struct  A<B<Y> >{ // A<
    int member;  // just add member here
    A(int n):member(n){}
}; 
```

当您实现**类**模板专业化时，就好像您正在定义一个全新的类。

我猜你正在寻找的是成员函数特化，但是这个不支持部分特化，如果你试图特化给定模板类的构造函数，那么这个构造函数必须是隐式声明的。

```
template <class C> class B{};

template <class X>
struct  A{
  A(int n); // I implicitly-declared the constructor that I want to specialize. 
            // you can still define it if you want.
  int member;
};
// this is the contructor specialization,
// Note this isn't partial specialization, it's explicit specialization so you
// must provide a type that you want to specialize it with, in this case B<int>
template <>
A<B<int> >::A(int n):member(n){} 
```

# javascript - 大型json请求外部url

> ID：14156051
> 
> 赞同：1
> 
> 时间：2013-01-04T11:13:01.200
> 
> 标签：javascript, web-services

我在 ajax GET 请求（它是跨域的）中传递了一个编码的 json 数组，但我得到了一个 404，因为它正在参数化 url 中的数据并且太长。

使用 javascript 通过跨域向网络服务器发送数据的更好方法是什么？这是相当少量的数据 <1000 个变量，每个变量只有大约 50 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:15:27.610

普通 HTML POST 请求的正文没有限制。

[JavaScript 发布请求，如表单提交](https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:16:01.560

请使用 post 方法而不是 get 方法....在您的 ajax 中尝试 jsonp，因为您正在使用回调函数访问跨域。有关 jsonp 的更多信息，请参见链接：- [http://www.cypressnorth.com/blog/编程/跨域-ajax-request-with-json-response-for-iefirefoxchrome-safari-jquery/](http://www.cypressnorth.com/blog/programming/cross-domain-ajax-request-with-json-response-for-iefirefoxchrome-safari-jquery/)

[http://json-p.org/](http://json-p.org/)

您需要的最重要的事情是您用于执行 curl 的服务器端页面必须设置一些标头以允许 http 到 https 连接。下面是这个......

```
header("Access-Control-Allow-Origin: your https url");
header("Access-Control-Allow-Methods: POST, GET");
header("Access-Control-Max-Age: 1728000");

header("Access-Control-Allow-Headers: Content-Type, Connection, Depth, User-Agent, X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name, Cache-Control");
header("Connection: close"); 
```

# java - 如何使用 Java 泛型来避免覆盖继承的方法（类似模板的行为）？

> ID：14156059
> 
> 赞同：2
> 
> 时间：2013-01-04T11:13:22.590
> 
> 标签：java, templates, generics, inheritance

我想用 Java 制作一个由节点组成的图表。图类将被不同的人和不同的算法使用，因此我们将需要针对每种情况使用不同的 Node 类，比如说`DefaultNode`和`SpecialNode extends DefaultNode`。

现在我想`DefaultNode`包含节点需要工作的所有常规内容，例如直接邻居列表。所以我在`DefaultNode`：

```
List<DefaultNode> neighbours = new ArrayList<DefaultNode>(); 
```

我现在的问题是，我显然在`SpecialNode`类中也需要这个列表，但它应该包含并返回 SpecialNodes。当然，我可以覆盖列表`addNeighbour()`以及`getNeighbours()`继承自的每个类中的方法`DefaultNode`，但这似乎是多余的，而不是 OOP 的工作方式。我认为这将是使用模板的完美案例（就像在 C++ 中一样），但是 afaik 在 Java 中没有这样的构造，留给我们泛型。

到目前为止，我想出的解决方案如下：

```
interface INode {}

class DefaultNode<T extends INode> implements INode {

    List<T> neighbours;

    List<T> getNeighbours(){}

    void addNeighbour(T node){}

} 
```

在这里，`<T extends INode>`括号描述了这个节点的可能邻居。所以`SpecialNode`我会这样做：

```
class SpecialNode extends DefaultNode<SpecialNode> {} 
```

现在，虽然这似乎按预期工作，但感觉有点奇怪......我很惊讶我找不到更简单的解决方案，因为这种情况似乎比较普遍。你会如何解决这个问题？我错过了更好/更简单的方法吗？或者上述是一种可行的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:17:57.790

你的方法没有错。事实上，一些标准的接口，比如就是[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)这样定义的：

```
public class Fruit implements Comparable<Fruit> {
             ^^^^^                       ^^^^^ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T11:38:28.903

如果要强制节点的邻居属于同一类型，可以使用：

```
class DefaultNode<T extends DefaultNode<T>> implements INode 
```

虽然我会让接口通用（并且只称它为节点而不是 INode）。

# java - 如何使用 Java 在 Selenium WebDriver 中生成报告

> ID：14156063
> 
> 赞同：1
> 
> 时间：2013-01-04T11:13:41.947
> 
> 标签：java, selenium-webdriver, test-reporting

我正在使用 java 和 Selenium WebDriver。

如何使用 java 在 Selenium WebDriver 中生成报告？我不想要 JUnit 或 TestNG 报告。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T22:59:22.947

Maven "surefire plugin" , Gradle, Ant, TestNG, SauceLabs 等。它们都有报告功能。您只需要编写生成 JUnit 兼容报告的代码，并且您使用的任何构建工具（上面列出）应该能够将结果解析为 HTML 文件。

更高级：如果您想从 JUnit XML 结果或您自己的自定义 XML 结果生成您自己的报告，您可以使用 XSLT 转换从您的 XML 结果呈现 HTML 文件。此外，如果您将 Jenkins 用于 CI，那么它还可以为您呈现报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T09:40:08.743

您可以设置 ANT 和 ANT 报告为您提供比常规 TestNG 或 Junit 报告更详细的输出报告。您也可以自定义您的报告。

# shell - Shell：非子进程的返回值

> ID：14156064
> 
> 赞同：0
> 
> 时间：2013-01-04T11:13:43.587
> 
> 标签：shell, parallel-processing, return-value, kill

在 shell 脚本中，我试图等待非子进程。我得到了关于如何做到这一点的参考： [等待“任何过程”完成](https://stackoverflow.com/questions/1058047/wait-for-any-process-to-finish)

我的shell脚本结构是：

主文件

```
func1(){
return 1
}

func2(){
# Wait for func1 to finish
while kill -0 "$pid_func1"; do
      sleep 0.5
done
}
# Call function 1 in background
func1 &
pid_func1=$!
func2 & 
```

在这种情况下，我如何在函数 func2 中接收 func1 的返回值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:18:08.633

您通常无法捕获非子进程的退出状态。您可能能够进行一些涉及将退出代码记录到状态文件然后读取值的工作，但否则您将无法捕获这些值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T07:01:54.893

在这种情况下，我使用了另一个 shell 变量来存储返回状态，并在需要时检查了这个 shell 变量的值。在下面找到一个示例 shell 脚本来模拟场景。

```
#!/bin/bash

func1(){
retvalue=23 # return value which needs to be returned
status_func1=$retvalue # store this value in shell variable
echo "func1 executing"
return $retvalue
}

func2(){
# Not possible to use wait command for pid of func1 as it is not a child of func2
#wait $pid_func1
#ret_func1=$?

while kill -0 "$pid_func1"; do
      echo "func1 is still executing"
      sleep 0.5
done

echo "func2 executing"

#echo "func1 ret: $ret_func1"
echo "func1 ret: $status_func1"
}

# Main shell script starts here

func1 &
pid_func1=$!

func2 & 
```

希望它对面临同样问题的其他人有用。

# jakarta-ee - 实体对象未正确转发到视图层

> ID：14156065
> 
> 赞同：0
> 
> 时间：2013-01-04T11:14:00.813
> 
> 标签：jakarta-ee, jpa, persistence

对于我们的项目，我们有一个层架构。DAO 层与数据库通信并获取存储的实体。Service-Layer 与 DAO-Layer 通信以获取实体并实现更复杂的方法。然后 View-Layer 与 Serivce-Layer 通信以获取所需的信息。

实体部分：

```
@Entity
public class Operation implements Serializable {
private Integer id;

@GeneratedValue
@Id
public Integer getId() {
    return id;
}

public void setId(Integer id) {
    this.id = id;
}
private List<Participation> participations;

@OneToMany
public List<Participation> getParticipations() {
    return participations;
}

public void setParticipations(List<Participation> participations) {
    this.participations = participations;
} 
```

DAO 层：

```
@Override
public Operation read(int id) {
    return this.em.find(Operation.class, id);
} 
```

服务层：

```
@Override
public Operation getOperation(Integer operationId)
{
    Operation operation = operationDAO.read(operationId);
    //operation.getParticipations();
    return operation;
} 
```

视图层：

```
Operation o = opService.getOperation(operationId); 
```

`operation.getParticipations();`在没有视图层的情况下使用它，缺少参与列表。如果我添加愚蠢的代码，那么对象将被正确转发并且参与列表可用。

我无法向自己解释为什么对象没有正确转发？你能帮助我吗？提前谢谢。

编辑：对象的所有其他属性/字段都正确转发（可能很重要）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:24:48.800

@OneToMany 默认是延迟加载的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:32:38.400

`@OneToMany`默认`FetchType`为`LAZY`. _

并且该`LAZY`策略是对持久性提供者的提示，即在首次访问数据时应该延迟获取数据。

# java - openNi，openCV，处理：kinect 与 Java

> ID：14156077
> 
> 赞同：1
> 
> 时间：2013-01-04T11:14:31.183
> 
> 标签：java, opencv, kinect, processing, openni

我用 Java 做了一个数字艺术项目，我的老师喜欢它，并希望我在博物馆里展出它，他们借给我一台 Kinect，却没有教我如何在 Java 中使用它。我在互联网上没有任何关于它的全面资助，所以我需要知道使用 kinect 和 Java 捕获位置的步骤是什么。

（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:01:33.280

您是否已经查看了[openKinect](http://openkinect.org/wiki/Main_Page)附带的示例以了解它的基础知识？我建议你对[OpenCV](http://opencv.willowgarage.com/wiki/)做同样的事情。

# linux - jenkins 应该拥有哪些权限才能执行 shell 命令而不会不安全？

> ID：14156078
> 
> 赞同：2
> 
> 时间：2013-01-04T11:14:33.973
> 
> 标签：linux, permissions, jenkins, permission-denied

我在本地服务器上有一个脚本（test.sh），在终端中执行时可以正常工作。该脚本删除一个目录，并在本地重新创建一个目录。然后它使用“ssh -i $private_key ..”连接到远程服务器并在那里复制一个文件。

当我在詹金斯执行这个脚本时

```
sh test.sh 
```

它不起作用。我收到以下错误：

```
rm: .. Permission denied
mkdir: .. Permission denied
Warning: Identity file /.ssh/private_key not accessible: Permission denied. 
```

Jenkins 与脚本在同一台服务器上。

我看到 Jenkins 是另一个用户，不能做我以 root 身份做的所有事情；如何在不失去所有安全性的情况下设置权限。特别是在 private_key 的情况下，将权限设置为 easy 是很愚蠢的——它当前设置为 600（所有者的读写权限）并且所有者是 root。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:12:07.263

将私钥的权限设置为 600 的全部意义在于，其他用户不应该能够访问它。如果您已将密钥放在另一个用户的主目录 (/home/anotheruser/.ssh) 中，那么 Jenkins 用户和其他任何人（除了 root）都无法访问它。**这是设计的**。

~~如果您希望您的 Jenkins 用户能够使用私钥，请将其复制到 jenkins 用户主目录（/home//.ssh）。~~

此外，如果您尝试在不提供权限的情况下以 Jenkins 用户身份在其他用户的目录中删除/创建目录，您将收到权限错误。这是因为安全。允许这样做的唯一方法是允许 Jenkins 用户对这些目录进行更改。

一个安全的选择是将 Jenkins 用户添加到与其他用户相同的组中。完成此操作后，设置要读取和写入的目录的权限，以允许用户组中的任何人进行更改。

```
rwxrwx--- 
```

上述权限将允许文件夹的所有者和同一组中的任何其他用户进行更改，但不允许其他任何人。这是安全的，因为您可以控制谁是其他用户组的一部分。

**编辑**

不过，看起来你的错误已经改变了。您不再获得许可被拒绝。你还能通过终端来做吗？原因（我认为）说主机密钥验证失败是因为您的密钥最初是为其他用户创建的。我意识到我在上面的答案中说过要这样做，但这不是正确的方法。

作为 jenkins 用户，您可以运行以下命令吗？

```
ssh-keygen (say yes or agree if it asks if you want to replace your current keys)
ssh-copy-id -i ~/.ssh/id_rsa.pub remoteuser@remote_server
ssh remoteuser@remote_server 
```

如果可行，请通过终端尝试您的脚本，然后再次通过 jenkins...

# javascript - 使用javascript隐藏具有相同ID的多个DIV中的单个DIV

> ID：14156087
> 
> 赞同：-1
> 
> 时间：2013-01-04T11:15:05.990
> 
> 标签：javascript, jquery

我想在我的页面中隐藏一个 DIV，但该 DIV 没有 id。也只有其他 DIV 共有的 div 类。

请帮助我如何根据标签标签的“for”属性仅隐藏一个 DIV

下面是DIV

```
<div class="field-group aui-field-versionspicker frother-control-renderer">
<label for="versions">Affects Version/s</label>
</div>

<div class="field-group aui-field-versionspicker frother-control-renderer">
<label for="fixVersions">Fix Version/s</label>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:17:35.613

试试这个

```
$('.field-group').eq(0).hide(); //hides first div
$('.field-group').eq(1).hide(); //hides second div 
```

[这](http://jsfiddle.net/ZaA7u/2/)是小提琴

**更新**

```
$('label[for="fixVersions"]').parent().hide();  //hides fixVersions with label selector 
```

更新[的小提琴](http://jsfiddle.net/ZaA7u/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:22:33.427

您不能`id`对元素使用相同的倍数，而是可以对多个元素使用相同的类，并且使用相同的类就可以了：

您可以通过以下方式进行操作：

```
$('.field-group:eq(1)').hide(); 
```

和

```
$('.field-group').eq(1).hide(); 
```

和

```
$('.field-group:nth-child(2)').hide(); 
```

所以上面所有的脚本都会隐藏`second div`.

**笔记：**

`.eq()`或`:eq()`在被`0`索引时`:nth-child()`被`1`索引。

# jquery - JCarrusel 在 Firefox 中不工作

> ID：14156089
> 
> 赞同：0
> 
> 时间：2013-01-04T11:15:09.247
> 
> 标签：jquery, firefox

我的网站上线了 4 个月。我在右侧边栏上使用 jcarrusel 4 个月。但突然它在 Firefox 中不能正常工作，但在 ie 和 chrome 中它很好。我不知道问题？你能帮我吗？我的网站是 dugunce com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:54:06.737

根据上面的评论，将 jQuery 版本从最新版本更改为 v1.8.3 解决了问题。

# c# - SoapException 未在 ComVisible 类中捕获

> ID：14156090
> 
> 赞同：1
> 
> 时间：2013-01-04T11:15:14.753
> 
> 标签：c#, interop, comvisible, soapexception

我正在.NET 中开发一个 ComVisible 库，然后在旧的 VB6 类中调用它。我在课堂上主要做的是调用 Web 服务、解析响应并返回包含必要数据的对象。Web 服务被设计为返回一个`SoapException`if 调用错误的参数。这是我的代码的一部分：

```
 private static WCFPersonClient _client;
    private static ReplyObject _reply;

    public BFRWebServiceconnector()
    {
        _client = new WCFPersonClient("WSHttpBinding_IWCFPerson");
        _reply = new ReplyObject ();            
    }

    [ComVisible(true)]
    public ReplyObject GetFromBFR(string bestallningsID, string personnr, bool reservNummer = false)
    {
        try
        {
            var response = new XmlDocument();

            //the service operation returns XML but the method in the generated service reference returns a string for some reason               
            var responseStr = _client.GetUserData(orderID, personnr, 3); reason.

            response.LoadXml(responseStr);
            //parse the response and fill the reply object
            .......
        }
        catch (Exception ex)
        {
            _reply.Error = "Error: " + ex.Message;
            if (_client.InnerChannel.State == CommunicationState.Faulted) _client = new WCFPersonClient("WSHttpBinding_IWCFPerson"); //recreate the failed channel
        }
        return _reply;
    } 
```

一旦我尝试使用正确的参数从我的 VB6 代码中调用此方法，我就会得到正确的答复。但是，如果我用错误的参数调用它，我会在我的 VB6 程序中收到`-245757`( `Object reference was not set to an instance of an object`) 运行时错误，而且它似乎没有被`catch`我的 C# 代码中的子句捕获（虽然我希望该方法返回一个`ReplyObject`带有填充字段的空字段） `Error`.

我创建了一个测试 C# 项目并复制了相同的方法（即我从 .NET 平台内调用相同的 Web 服务），我可以确认在这种情况下`SoapException`它被正确捕获。

这种行为是故意的吗？有没有办法`SoapException`在 ComVisible 类中捕获 （因为我真的想将错误消息包含到我的回复对象中）？

UPD：我的 VB6 代码如下：

```
Set BFRWSCReply = New ReplyObject
Set BFRWSC = New BFRWebbServiceconnector
Set BFRWSCReply = BFRWSC.GetFromBFR(m_BeställningsID, personnr)

If Not IsNull(BFRWSCReply) Then
    If BFRWSCReply.Error= "" Then
       m_sEfternamn = BFRWSCReply.Efternamn
       //etc i.e. copy fields from the ReplyObject
    Else
       MsgBox BFRWSCReply.Error, vbExclamation
    End If
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:08:09.117

（这只是一个猜测，更适合评论，但它很长）

当类超出范围时，.NET 运行时可能正在处理`ReplyObject`COM 对象，可能是因为它是类的属性而不是在方法中创建的？`BFRWebServiceconnector`

尝试创建`ReplyObject`内部`GetFromBFR`而不是使其成为类的属性。如果从不同线程调用 COM 对象，这也可以防止多线程访问出现奇怪的错误。

此外，如果 VB 程序中有特定行抛出错误（在您调用 之后`GetFromBFR`），您可以查看变量是否`Nothing`在 VB 中以尝试缩小问题范围。

就像我说的，只是一个猜测。随意反驳它。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:02:30.677

我很惭愧，原因很简单......而不是跟随：

```
catch (Exception ex)
    {
        _reply.Error = "Error: " + ex.Message;
        if (_client.InnerChannel.State == CommunicationState.Faulted) _client = new WCFPersonClient("WSHttpBinding_IWCFPerson"); //recreate the failed channel
    } 
```

我实际上有以下代码：

```
catch (Exception ex)
    {
        _reply.Error = "Error: " + ex.Message + "; " + ex.InnerException.Message;
        if (_client.InnerChannel.State == CommunicationState.Faulted) _client = new WCFPersonClient("WSHttpBinding_IWCFPerson"); //recreate the failed channel
    } 
```

事实证明，这`ex.InnerException`是`null`导致`NullPointerException`...

# vb.net - 按钮在 TabControl 的右上角对齐？

> ID：14156091
> 
> 赞同：1
> 
> 时间：2013-01-04T11:15:15.213
> 
> 标签：vb.net, tabcontrol

在 VB.Net 中，有没有办法在 TabControl 中使选项卡出现在顶部，但在右侧而不是左侧？

在线我发现了很多与水平文本右对齐的方法，这些方法有据可查，但我所追求的是顶部对齐，但按钮堆叠在面板的右侧而不是左侧。

'RightToLeft' 似乎没有达到预期的效果。

非常感谢

# javascript - 无法读取 InnerHTML 和 div id 的属性长度

> ID：14156098
> 
> 赞同：0
> 
> 时间：2013-01-04T11:15:28.270
> 
> 标签：javascript, html, innerhtml

这是要检查的文本：

```
<div id="List1" style="display:none">
   VIDEO 1</br>
   VIDEO 2</br>
   VIDEO 3</br>
</div> 
```

这是 Javascript 代码：

```
var div = document.getElementById("List"+id); //id is a random number

if(div.innerHTML != "") // <-- this gives an error.
{
    document.getElementById("List"+id).style.display = "block";
} 
```

当调试器读取：if (div.innerHTML != "") 时，它会给出以下错误：Uncaught TypeError: Cannot read property 'Length' of undefined。

我想检查列表之一是否为空/未设置/不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:26:47.223

@Oned Zair，通过关注，

```
var myElem = document.getElementById('myElementId');
if (myElem == null) alert('does not exist!'); 
```

或者

```
$(id).length > 0 
```

你可以检查是否`div`存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:16:36.830

`i`in innerHTML 需要小写。更改`InnerHTML`为`innerHTML`。检查条件中是否存在 div 也是谨慎的做法。

```
if(div && div.innerHTML != "")
{
    document.getElementById("List"+id).style.display = "block";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:25:54.960

innerHTML 的语法有误，请改成这段代码，....

if(document.getElementById("List"+id).innerHTML != "") { document.getElementById("List"+id).style.display = "block"; }

# c++ - 堆损坏 - “释放堆块 61af0f0 在被释放后修改为 61af194”C++

> ID：14156099
> 
> 赞同：8
> 
> 时间：2013-01-04T11:15:29.377
> 
> 标签：c++, memory, memory-leaks, heap-corruption, visual-leak-detector

在我的应用程序中，我收到此错误：

```
HEAP[App.exe]: HEAP: Free Heap block 61af0f0 modified at 61af194 after it was freed 
```

这是一个调用堆栈：

```
 ntdll.dll!_RtlpBreakPointHeap@4()   Unknown
    ntdll.dll!@RtlpAllocateHeap@24()    Unknown
    ntdll.dll!_RtlAllocateHeap@12() Unknown
    ntdll.dll!_RtlDebugAllocateHeap@12()    Unknown
    ntdll.dll!@RtlpAllocateHeap@24()    Unknown
    ntdll.dll!_RtlAllocateHeap@12() Unknown
>   msvcr110d.dll!_heap_alloc_base(unsigned int size) Line 57   C
    msvcr110d.dll!_heap_alloc_dbg_impl(unsigned int nSize, int nBlockUse, const char * szFileName, int nLine, int * errno_tmp) Line 431 C++
    msvcr110d.dll!_nh_malloc_dbg_impl(unsigned int nSize, int nhFlag, int nBlockUse, const char * szFileName, int nLine, int * errno_tmp) Line 239  C++
    msvcr110d.dll!_nh_malloc_dbg(unsigned int nSize, int nhFlag, int nBlockUse, const char * szFileName, int nLine) Line 302    C++
    msvcr110d.dll!malloc(unsigned int nSize) Line 56    C++
    msvcr110d.dll!operator new(unsigned int size) Line 59   C++
    App.exe!std::_Allocate<char>(unsigned int _Count, char * __formal) Line 28  C++
    App.exe!std::allocator<char>::allocate(unsigned int _Count) Line 591    C++
    App.exe!std::basic_stringbuf<char,std::char_traits<char>,std::allocator<char> >::overflow(int _Meta) Line 152   C++
    msvcp110d.dll!std::basic_streambuf<char,std::char_traits<char> >::sputc(char _Ch) Line 196  C++
    msvcp110d.dll!std::ostreambuf_iterator<char,std::char_traits<char> >::operator=(char _Right) Line 634   C++
    msvcp110d.dll!std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char> > >::_Put(std::ostreambuf_iterator<char,std::char_traits<char> > _Dest, const char * _Ptr, unsigned int _Count) Line 1553  C++
    msvcp110d.dll!std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char> > >::_Iput(std::ostreambuf_iterator<char,std::char_traits<char> > _Dest, std::ios_base & _Iosbase, char _Fill, char * _Buf, unsigned int _Count) Line 1544 C++
    msvcp110d.dll!std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char> > >::do_put(std::ostreambuf_iterator<char,std::char_traits<char> > _Dest, std::ios_base & _Iosbase, char _Fill, long _Val) Line 1216   C++
    msvcp110d.dll!std::num_put<char,std::ostreambuf_iterator<char,std::char_traits<char> > >::put(std::ostreambuf_iterator<char,std::char_traits<char> > _Dest, std::ios_base & _Iosbase, char _Fill, long _Val) Line 1137  C++
    msvcp110d.dll!std::basic_ostream<char,std::char_traits<char> >::operator<<(int _Val) Line 311   C++
    App.exe!TUtil::intToString(int val) Line 43 C++
    App.exe!TFontManager::getFont(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & filename, int size) Line 15  C++
    App.exe!TButton::draw() Line 55 C++
    App.exe!TWindow::draw() Line 203    C++
    App.exe!TGUIManager::drawObjects() Line 49  C++
    App.exe!TGameAppLayer::gameCycle() Line 456 C++
    App.exe!TGameAppLayer::mainLoop() Line 520  C++
    App.exe!wWinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, wchar_t * lpCmdLine, int nCmdShow) Line 36   C++
    App.exe!__tmainCRTStartup() Line 528    C
    App.exe!wWinMainCRTStartup() Line 377   C
    kernel32.dll!@BaseThreadInitThunk@12()  Unknown
    ntdll.dll!___RtlUserThreadStart@8() Unknown
    ntdll.dll!__RtlUserThreadStart@8()  Unknown 
```

所以据我所知，我得到的错误是由访问（再次删除）已经释放的内存块引起的。尝试找出我的代码到底有什么问题已经是第三天了。在此期间，我发现了一些我已经修复的小内存泄漏，现在 Visual Leak Detector 告诉我它没有检测到任何泄漏。

然而，堆损坏的问题仍然存在。

在我的代码的每个地方，在使用“删除”运算符的地方，我首先检查指针是否不是`nullptr`. 如果没有，我将其设置为`nullptr`：

```
if(m_pVar != nullptr)
{
    delete m_pVar;
    m_pVar = nullptr;
} 
```

所以看起来不止一次释放同一个内存块应该没有问题。

我试图从这个调用堆栈中找出一些东西，但这是我想向你寻求帮助的地方。在调用堆栈中，分配似乎存在问题`string`，但这究竟意味着什么？最后一个被调用的 MY 函数是`string TUtil::intToString(int val) Line 43`，所以如果我向您展示该函数的主体可能会更容易：

```
std::string TUtil::intToString(int val)
{
    std::ostringstream s;
    s << val;                 // Here's line 43
    return s.str();
} 
```

有时调用堆栈是不同的，因此`string TUtil::intToString(int val)`其中甚至不存在函数，但它总是与`string`s 分配有关。

我希望我刚才说的很清楚。如果您需要更多信息，请告诉我，我将在此问题的编辑中提供。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T11:22:36.657

> 所以据我所知，我得到的错误是由访问（再次删除）已经释放的内存块引起的。

Unless there's something you know and are not telling us, the above can well be a red herring. The error could *also* mean that you're modifying memory through a dangling pointer, or due to a buffer overrun.

If you ever make copies of pointers (either explicitly, or by failing to define copy constructors/assignment operators), setting `m_pVar = nullptr` upon deletion will provide no gurantees against double deletes, let alone other types of memory errors.

If you can't find the problem by examining the code, your best bet might be a tool like Valgrind or Purify.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T11:23:57.087

Crash during malloc is a sure sign of memory corruption and it may or may not be due to double delete. Corruption happened in some different part of your code and unfortunately the effect ripples out in your failing code which is definitely innocent. If possible, try to port your application in a system where you can run valgrind

# java - 可以在 java 应用程序中使用 flash 吗？

> ID：14156101
> 
> 赞同：0
> 
> 时间：2013-01-04T11:15:37.237
> 
> 标签：java, flash

我正在用java编写一个应用程序并且有一个问题。我是否可以制作按钮等...在 Flash 中，并让它们在我的 java 应用程序中调用函数？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:36:45.173

首先我们需要知道你在说什么类型的java应用程序：一个web应用程序，一个客户端服务器（swing，awt，swt，其他gui框架），一个移动应用程序，其他类型？

Adobe Flex Builder 已经为 web/ajax 应用程序做到了。您的视图层是 flex/flash 特定的，而您的模型、控制器和数据库层仍然是 java。

如果您谈论的是客户端/服务器应用程序，我会说不——你不能——除非您在视图层使用某种闪存容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:18:58.483

我认为可以通过 ActionScript 调用基于 SOA 的 java 解决方案，类似的 Servlet 也可以通过常见的 HTTP POST（Flash 或 Javascript）调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T13:13:52.690

如果您正在开发一个小程序，Flash 可以通过 JavaScript 与小程序通信，该 JavaScript 具有一个用于调用 Java Applet 中的方法的接口。小程序也可以调用 JavaScript 函数，因此它可以作为双向包装器工作。[从 JavaScript 调用 Applet 方法](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)，以及[从 Applet 调用 JavaScript](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html)。

# actionscript-3 - 缓存具有多个参数的方法结果的最佳方法 - 对象作为字典中的键？

> ID：14156102
> 
> 赞同：4
> 
> 时间：2013-01-04T11:15:37.630
> 
> 标签：actionscript-3, caching, optimization

在方法的开头，我想检查之前是否使用这些确切的参数调用了该方法，如果是，则返回当时返回的结果。

起初，我使用一个参数，使用字典，但现在我需要检查 3 个参数（一个字符串、一个对象和一个布尔值）。

我尝试像这样制作自定义对象：

```
var cacheKey:Object = { identifier:identifier, type:type, someBoolean:someBoolean };

//if key already exists, return it (not working)
if (resultCache[cacheKey]) return resultCache[cacheKey];

//else: create result ...

//and save it in the cache
resultCache[cacheKey] = result; 
```

但这不起作用，因为第二次调用该函数，新的 cacheKey与第一次**不是同一个**对象，即使它的属性相同。

所以我的问题是：是否有一种数据类型可以检查用作匹配键的对象的*属性？*

还有什么是我最好的选择？也为键创建缓存？：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:15:05.687

请注意，技术解决方案有两个方面：**相等比较**和**索引**。

悬崖笔记版本：

*   **自定义相等比较**很容易
***   为了执行**索引**，您需要知道的不仅仅是一个对象是否等于另一个对象——您需要知道哪个对象比另一个对象“更大”。*   如果您的所有属性都是原语，您应该将它们压缩成一个字符串并使用 an`Object`来跟踪它们（不是 a `Dictionary`）。*   如果您需要比较某些单个属性的引用相等性，您将编写一个函数来确定哪一组属性大于另一组，然后创建自己的使用比较函数输出的集合类实现自己的基于二叉搜索树的索引。*   如果唯一参数集的数量在数百个或更少，并且您确实需要对`Object`参数进行引用比较，则只需使用 Array 和该`some`方法对所有缓存键进行简单比较。只有您知道您的实际方法有多昂贵，因此由您决定可接受的查找成本（取决于提供给函数的唯一参数的数量）。**

 **### 平等比较

为了解决**相等比较**，很容易编写一些代码来比较对象的属性值，而不是引用相等。以下函数强制执行严格的集合比较，因此两个对象必须包含具有相同值的完全相同的属性（不允许在任何一个对象上添加其他属性）：

```
public static propsEqual(obj1:Object, obj2:Object):Boolean {
    for(key1:* in obj1) {
        if(obj2[key1] === undefined)
            return false;
        if(obj2[key1] != obj2[key1])
            return false;
    }
    for(key2:* in obj2) 
        if(obj1[key2] === undefined)
            return false;
    return true;
} 
```

您可以通过消除第二个 for 循环来加速它，权衡`{A:1, B:2}`将被视为等于`{A:1, B:2, C:'An extra property'}`.

### 索引

在您的情况下，问题在于您丢失了a提供的引用相等或 a提供的字符串键的**索引。**您必须将每组新的函数参数与先前看到的参数的整个列表进行比较，例如使用. 我使用字段和方法来避免每次都生成新的闭包。`Dictionary``Object``Array.some``currentArgs`

```
private var cachedArgs:Array = [];
private var currentArgs:Object;

function yourMethod(stringArg:String, objArg:Object, boolArg:Boolean):* {
    currentArgs = { stringArg:stringArg, objArg:objArg, boolArg:boolArg };
    var iveSeenThisBefore:Boolean = cachedArgs.some(compareToCurrent);
    if(!iveSeenThisBefore)
        cachedArgs.push(currentArgs);
}

function compareToCurrent(obj:Object):Boolean {
    return someUtil.propsEqual(obj, currentArgs);
} 
```

这意味着比较将是 O(n) 时间，其中 n 是不断增加的唯一函数参数集的数量。

如果您的函数的所有参数都是原始的，请参阅非常相似的问题[在 AS3 中，您在哪里画出 Dictionary 和 ArrayCollection 之间的界限？](https://stackoverflow.com/questions/13691771/in-as3-where-do-you-draw-the-line-between-dictionary-and-arraycollection). 标题听起来不太相似，但接受的答案中的解决方案（是的，我写的）解决了完全相同的技术问题——使用多个原始值作为单个复合键。您的情况的基本要点是：

```
private var cachedArgs:Object = {};

function yourMethod(stringArg:String, objArg:Object, boolArg:Boolean):* {
    var argKey:String = stringArg + objArg.toString() + (boolArg ? 'T' : 'F');
    if(cachedArgs[argKey] === undefined)
        cachedArgs[argKey] = _yourMethod(stringArg, objArg, boolArg);
    return cachedArgs[argKey];
}

private function _yourMethod(stringArg:String, objArg:Object, boolArg:Boolean):* {
    // Do stuff 
    return something;
} 
```

如果您确实需要确定哪个引用比另一个引用“更大”（就像`Dictionary`内部那样），您将不得不涉足一些丑陋的东西，因为 Adob​​e 尚未提供任何 API 来检索“值”/“地址” "的参考。到目前为止，我发现的最好的事情是这个有趣的 hack：[如何在 ActionScript 中获取实例的“内存位置”？](https://stackoverflow.com/questions/1343282/how-can-i-get-an-instances-memory-location-in-actionscript). 如果不做一堆性能测试，我不知道使用这个 hack 来比较引用是否会扼杀二叉搜索树 indexnig 获得的优势。当然，这取决于密钥的数量。**

# c# - 如何以及何时翻译和评估 LINQ 查询？

> ID：14156104
> 
> 赞同：7
> 
> 时间：2013-01-04T11:15:41.713
> 
> 标签：c#, asp.net, sql, linq, lambda

我有一个 LINQ to SQL 查询，如下所示：

```
var carIds = from car in _db.Cars
           where car.Color == 'Blue'
           select car.Id; 
```

上面的最后会被翻译成下面的sql：

```
select Id from Cars 
where Color = 'Blue' 
```

我读过这些阶段是：

1.  LINQ to Lambda 表达式
2.  Lambda 表达式到表达式树
3.  表达式树到 SQL 语句
4.  SQL 语句被执行

所以，我的问题是何时以及如何翻译和执行？

我知道第 4 阶段发生在运行时，当我的“carIds”变量在 foreach 循环中被访问时。

```
foreach(var carId in carIds) // here?
{
  Console.Writeline(carId) // or here?
} 
```

其他阶段呢？它们什么时候发生？在编译时还是运行时？在哪一行（在定义上或定义之后，访问时还是在访问之前）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:24:34.420

您所说的是***延迟执行***-本质上，linq to SQL 查询将在您尝试枚举结果时执行（例如迭代它， .ToArray() 它等）。

在您的示例中，该语句在以下行执行：

```
foreach(var carId in carIds) 
```

请参阅有关[LINQ 和延迟执行的 MSDN 文章](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:24:42.133

1.  由您、开发人员或 C# 编译器完成；您可以手动编写 lambda 表达式，或者使用 LINQ 语法，它们可以从 LINQ 中隐含（即被`where x.Foo == 12`视为好像是`.Where(x => x.Foo == 12)`，然后编译器基于此处理步骤 2）
2.  由 C# 编译器完成；它将“lambda 表达式”转换为构造（或在可能的情况下重用）表达式树的 IL。您也可以争辩说运行时是*处理*此步骤的内容
3.  和
4.  通常在**枚举**查询时完成，特别是在`foreach`调用时`GetEnumerator()`（甚至可能推迟到第一个`.MoveNext`）

延迟执行允许*组合*查询；例如：

```
var query = ...something complex...
var items = query.Take(20).ToList(); 
```

这里`Take(20)`是*作为*整体查询的一部分执行的，因此您不会从服务器带回所有内容，*然后*（在调用者处）将其过滤到前 20 个；从服务器只检索到 20 行。

您还可以使用编译查询将查询限制在第 4 步（或在某些情况下查询需要根据参数不同的 TSQL 的第 3 步和第 4 步）。或者，如果您只编写 TSQL，则可以跳过除 4 之外的所有内容。

您还应该添加一个步骤“5”：物化；这是一个相当复杂和重要的步骤。根据我的经验，物化步骤实际上可能是整体性能***最重要***的步骤（因此我们写了“dapper”）。

# jquery - mvc3中的图像上传和裁剪

> ID：14156115
> 
> 赞同：1
> 
> 时间：2013-01-04T11:16:12.553
> 
> 标签：jquery, asp.net-mvc-3, image

从未上传过文件/图片:)

再次，将尝试尽可能多地解释..

有一个 MVC3 应用程序。用户需要选择 Upload a Image ，根据需要对其进行裁剪，然后将其保存为 db 中的 byte[] ..

将不胜感激任何帮助告诉如何上传图像，裁剪它（jQuery），将其作为字节 [] 发送到服务器，然后在用户登录时检索以供查看..

看过 jCrop 但不知道如何上传图像，并将其加载到 HTML 文件中供 jCrop 使用。

如前所述，将 MVC3 与 Razor 视图引擎一起使用。

编辑：

已使用以下 ViewPage 代码：

```
<form action="/home/index" method="post">

    <input type="file" name="file" />
    <input type="submit" value="upload" />

</form> 
```

以及以下控制器动作

```
[HttpPost]
        public ActionResult Index(HttpPostedFileBase file)
        {

            return View();
        } 
```

但参数“文件”为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:24:49.607

谢谢你的支持 ..

已使用 System.Web.Helpers 在控制器处管理图像接收并使用其方法在从 Jcrop 接收坐标后裁剪图像解决了该问题。然后再次使用 webhelper 函数将图像转换为 byte[] 。 .

不过谢谢你的好意..

# visual-studio-2010 - 1 个解决方案中的 3 个 MVC 项目

> ID：14156122
> 
> 赞同：0
> 
> 时间：2013-01-04T11:16:32.217
> 
> 标签：visual-studio-2010, entity-framework, dbcontext, asp.net-mvc-areas

我必须使用实体框架（www.company1.com www.company2.com www.company3.com）构建 3 个 MVC Web 应用程序。这些网站都将访问相同的 sql server 数据库，但它们自己的方式（外观、数据等）会略有不同。很可能所有三个 MVC 应用程序都将托管在同一台服务器上，但绑定到不同的域名。

目前在 Visual Studio 中，我的解决方案具有以下结构

*   领域类
*   数据层
*   服务
*   存储库
*   MVC 应用程序 1
*   MVC 应用程序 2
*   MVC 应用程序 3

我本来希望使用区域的，但我不能，因为必须为每个站点分配它自己不同的域名。我想我只是在寻求保证，以这种方式构建我的解决方案不会在发布应用程序时给我带来任何困难。我对共享 dbContext 或其他东西的网站有点偏执，但是，我知道很多听起来很傻。

如果这一切看起来都不错，如果有人可以建议我，那就太好了，或者也许有更好的方法来做我所要求的。

一如既往的感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:21:49.500

只要您有一种很好的方法来验证和区分数据层中的站点，您就不必担心。你如何验证这一点？

我也总是将模拟代码和页面放在一个主项目中，这样你就不会为不同的站点复制部分甚至整个页面。（我的猜测是你已经这样做了）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:26:19.157

出于同样的原因，我做了同样的事情。我有一个必须位于不同主机名的 CMS。它工作正常。

诀窍是找到跨 MVC 应用程序共享代码的方法。为了避免循环依赖等，我又创建了一个 MVC 应用程序来保存诸如提供图像文件的控制器、可重复使用的 HTML 助手等内容。

# cordova - 电话间隙中的白名单拒绝？

> ID：14156125
> 
> 赞同：0
> 
> 时间：2013-01-04T11:16:41.627
> 
> 标签：cordova

我在 Xcode 日志中收到错误白名单拒绝。我尝试在 Internet 上搜索，我发现添加 ExternalHosts 密钥字符串的解决方案仍然对我不起作用我不知道为什么仍然出错或我的值字符串不正确。我尝试了以下方法：

1) * - 访问所有域

2) *.abc.com - 访问所有子域

3) abc.com - 只访问这个域

我的 ajax 请求网址就像“http://mobile.abc.com”。希望有人可以帮助我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T01:48:46.423

这也让我打败了。对于 phonegap 2+ 以上，外部主机添加到 config.xml 文件中： `<access origin="*" />`或将 * 替换为 google.com 之类的 url，请参阅此处的第二种解决方案：[错误：Phonegap 中的白名单拒绝](https://stackoverflow.com/questions/10795628/error-whitelist-rejection-in-phonegap?rq=1)

# ruby-on-rails - Rails3 无法使用 has_one DSL 创建嵌套模型

> ID：14156131
> 
> 赞同：0
> 
> 时间：2013-01-04T11:17:38.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我用Rails3.2.8做了一些练习，下面是我的模型：

```
class Incident < ActiveRecord::Base
  attr_accessible :category, :user, :status, :reference, :location
  belongs_to :user
  has_one :location
  accepts_nested_attributes_for :location

  validates_presence_of :location, :user, :category

end

class Location < ActiveRecord::Base
  attr_accessible :latitude, :longitude, :street
  belongs_to :incident
end 
```

这是我的测试：

```
require 'spec_helper'

describe Incident do
  before (:each) do
    @user = create(:user, :name => "user1")
    @incident_data = {:category => "House Break in", :user => @user,
                      :location => {:latitude => "-28.1940509", :longitude => "28.0359692",
                                    :street => "abc name"}}
  end
  describe "After create Incident successfully" do
    it "should create location" do
      incident = Incident.create(@incident_data)

      expect(incident.location.latitude).to eq("-28.1940509")
    end
  end
end 
```

我想要做的是在创建事件对象时自动创建位置对象。但是测试失败了，原因如下：

失败/错误：事件 = Incident.new(@incident_data)

ActiveRecord::AssociationType 不匹配：

位置（#70156311891820）预期，得到哈希（#70156307112200）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:33:16.020

它明确表示 location 应该是 的实例`Location`，而不是`Hash`. 你有

```
:location => {:latitude => "-28.1940509", :longitude => "28.0359692",
                                :street => "abc name"} 
```

但是，一旦您使用嵌套属性，它应该是`location_attributes`（请参阅[NestedAttributes 文档](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)）：

```
:location_attributes => {:latitude => "-28.1940509", :longitude => "28.0359692",
                                :street => "abc name"} 
```

或者你可以只创建`Location`对象

```
:location => Location.new(:latitude => "-28.1940509", :longitude => "28.0359692",
                                :street => "abc name") 
```

# c# - 尝试...在释放资源时最终捕获内部？

> ID：14156132
> 
> 赞同：21
> 
> 时间：2013-01-04T11:17:43.980
> 
> 标签：c#, java, programming-languages

我想将 a 写入`String`Unicode 文件。我的代码`Java`是：

```
public static boolean saveStringToFile(String fileName, String text) {
    BufferedWriter out = null;
    boolean result = true;
    try {
        File f = new File(fileName);
        out = new BufferedWriter(new OutputStreamWriter(
                new FileOutputStream(f), "UTF-8"));
        out.write(text);
        out.flush();
    } catch (Exception ex) {
        result = false;
    } finally {
        if (out != null)
            try {
                out.close();
            } catch (IOException e) {
                // nothing to do! couldn't close
            }
    }

    return result;
} 
```

### 更新

现在将其与 C# 进行比较：

```
 private static bool SaveStringToFile(string fileName, string text)
    {
        using (StreamWriter writer = new StreamWriter(fileName))
        {
            writer.Write(text);
        }
    } 
```

甚至`try..catch`形式是：

```
 private static bool SaveStringToFile(string fileName, string text)
    {
        StreamWriter writer = new StreamWriter(fileName);
        try
        {
            writer.Write(text);
        }catch (Exception ex)
        {
            return false;
        }
        finally
        {
            if (writer != null)
                writer.Dispose();
        }
    } 
```

也许是因为我来自 C# 和 .Net 世界。但这是将字符串写入文件的正确方法吗？对于这样简单的任务来说，代码太多了。在 C# 中，我会说只是这样，但在语句内部`out.close();`添加一个似乎有点奇怪。无论发生什么，我都添加了关闭文件（资源）的语句。避免使用过多的资源。这是Java中的正确方法吗？如果是这样，为什么会抛出异常？`try..catch``finally``finally``close`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-04T11:33:01.987

您是正确的，因为您需要在 finally 块中调用 close() 并且您还需要包装这是一个 try/catch

通常，您将在项目中编写实用程序方法或使用库中的实用程序方法，例如[http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#closeQuietly(java.io .Closeable)](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#closeQuietly(java.io.Closeable))以安静地关闭。即忽略来自 close() 的任何抛出异常。

另外一点，Java 7 添加了对资源尝试的支持，从而无需手动关闭资源 - [http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T11:22:28.327

是的，在 java 的 finally() 中 Try catch 并没有什么奇怪的。close() 可能由于各种原因抛出 IoException，这就是为什么它必须被 try catch 块包围。您的这个问题有一个改进的解决方案，在最新的 java SE 7 中[尝试使用资源](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T15:46:05.977

与 using 语句等效的 Java 是 Java 7 中添加的 try-with-resources 语句：

```
public static void saveStringToFile(String fileName, String text) throws IOException {
    try (Writer w = new OutputStreamWriter(new FileOutputStream(fileName), "UTF-8")) {
        w.write(text);
    }
} 
```

try-with-resources 将自动关闭流（隐式刷新它），并抛出这样做时遇到的任何异常。

如果您无论如何都执行一次写入调用，则不需要 BufferedWriter（其目的是将多次写入合并到底层流以减少系统调用的数量，从而提高性能）。

如果你坚持通过返回 false 来处理错误，你可以添加一个 catch 子句：

```
public static boolean saveStringToFile(String fileName, String text) {
    try (Writer w = new OutputStreamWriter(new FileOutputStream(fileName), "UTF-8")) {
        w.write(text);
        return true;
    } catch (IOException e) {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T11:25:11.673

这应该可以解决问题。如果您想管理具有复杂行为的异常 - 然后创建`StreamWriter`

```
public static bool saveStringToFile(String fileName, String text) 
{
    try
    {
        File.WriteAllText(fileName, text, Encoding.UTF8);
    }
    catch (IOException exp)
    {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T11:21:57.237

那么，问题是什么？没有正确或错误的方法。甚至可以关闭抛出 IO Exception 吗？那你怎么办呢？我通常不喜欢任何形式的不重新抛出。

问题是——你只是在关闭时吞下一个 IO 异常——很好。你能忍受那种打击吗？如果不是你有问题，如果是 - 没有错。

我从来没有这样做过，但是 - 再次，这取决于您的业务案例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T11:22:58.830

```
arch = new File("path + name");
arch.createNewFile();
FileOutputStream fos = new FileOutputStream(arch);
fos.write("ur text");
fos.close(); 
```

我的方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T11:26:27.313

避免这种情况的最佳方法是将 out.close() 放在 out.flush() 之后，如果关闭失败，则会自动处理该过程。或者使用这个更好（我正在使用）：

```
File file = ...
   OutputStream out = null;
   try {
     out = new BufferedOutputStream(new FileOutputStream(file));
     ...
    finally {
     if (out != null) {
       out.close();
     }
   }
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-04T11:40:01.373

如果你想要最少的代码，你可以使用[FileUtils.writeStringToFile](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#writeStringToFile%28java.io.File,%20java.lang.String%29)

```
FileUtils.writeStringToFile(new File(fileName), text); 
```

而且我不会使用布尔值，因为忽略发生错误的事实或发生错误的原因（在异常消息中）很少是一个好主意。使用已检查的异常可确保调用者始终正确处理此类错误，并可以记录有意义的错误消息以说明原因。

使用特定的 CharSet 保存文件

```
try {
    FileUtils.writeStringToFile(new File(fileName), text, "UTF-8");
} catch(IOException ioe) {
    Logger.getLogger(getClass()).log(Level.WARNING, "Failed to write to " + fileName, ioe);
} 
```

# css - 将项目设置为具有所有可用空间宽度

> ID：14156134
> 
> 赞同：0
> 
> 时间：2013-01-04T11:17:50.520
> 
> 标签：css

我有以下 HTML 片段：

```
<div id="container">
  <div id="left">Left block</div>

  <input type="text" />

  <div id="right">Some longer than 200px text</div>
</div> 
```

和 CSS：

```
#container {
  width: 100%;
}
#left {
  width: 200px;
  float: left;
  border: 1px solid black;
}
#right {
  min-width: 200px;
  float: right;
  border: 1px solid black;
}
input {
  float: left;
} 
```

是否可以设置`input`为具有所有可用空间宽度？我的意思是它应该`#left`从右边界开始并以`#right`左边界结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:22:18.030

你可以用额外的来做到这一点`div`：

```
<div id="container">
  <div id="left">Left block</div>

  <div id="right">Some longer than 200px text</div>
</div>
<div id="main">    
  <input type="text" />
</div>​

#container {
  width: 100%;
}
#left {
  width: 200px;
  float: left;
  border: 1px solid black;
}
#right {
  min-width: 200px;
  float: right;
  border: 1px solid black;
}
#main {
    margin: 0 210px 0 210px;
}
input {
  width: 100%;
}​ 
```

jsFiddle：http: [//jsfiddle.net/NQevQ/](http://jsfiddle.net/NQevQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:24:58.743

使用[弹性盒](http://www.w3.org/TR/css3-flexbox/)：

```
#container {
    width: 100%;
    display: -webkit-box;
    display: -moz-box;
    display: -ms-box;
    display: -o-box;
    display: box;
    display: -webkit-flex;
    display: -moz-flex;
    display: -ms-flex;
    display: -o-flex;
    display: flex;
}
input {
    -webkit-box-flex: 1;
    -moz-box-flex: 1;
    -ms-box-flex: 1;
    -o-box-flex: 1;
    box-flex: 1;
    -webkit-flex: 1;
    -moz-flex: 1;
    -ms-flex: 1;
    -o-flex: 1;
    flex: 1;
} 
```

[**小提琴**](http://jsfiddle.net/r4zYF/19/)

除 IE[支持表](http://caniuse.com/#search=flex)外，所有主流浏览器均可使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:32:14.547

这是一个jQuery解决方案-

[**演示**](http://jsfiddle.net/XyWre/5/)（*更新*）

jQuery-

```
$(document).ready(function() {
  var w = parseInt($('#container').outerWidth()) - (parseInt($('#right').outerWidth()) + parseInt($('#left').outerWidth()));
  $('#in').css({
    border: '1px solid', //to override chrome's default- 2px inset
    width: w - 2
   });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T11:52:44.070

[http://jsfiddle.net/thirtydot/fbVdp/](http://jsfiddle.net/thirtydot/fbVdp/)

```
<div id="container">
    <div id="left">Left block</div>
    <div id="right">Some longer than 200px text</div>
    <span><input type="text" value="hello" /></span>
</div> 
```

```
​#container span {
    display: block;
    overflow: hidden;
    border: 1px solid red;
}
#container span input {
    width: 100%;
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
}​

#container {
  width: 100%;
}
#left {
  width: 200px;
  float: left;
  border: 1px solid black;
}
#right {
  min-width: 200px;
  float: right;
  border: 1px solid black;
} 
```

# jquery - jquery on（实时功能）

> ID：14156135
> 
> 赞同：0
> 
> 时间：2013-01-04T11:17:55.697
> 
> 标签：jquery

为什么这段代码不起作用？

```
$("div.class ul li").on("click","a",function(){
        alert("A");
}); 
```

但这工作正常...

```
$("body").on("click","div.class ul li a",function(){
    alert("A");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:20:38.110

我想你`div.class ul li`是动态创建的。您需要`on`在某些现有元素（例如最近的父元素）上调用函数。这就是为什么它在被调用时起作用的原因`body`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:26:18.783

大概您的代码`li`在页面加载后动态插入元素。为了使事件委托起作用，您需要绑定到 DOM 为`ready`. `ul`也许？

```
$("div.class ul").on("click","li a",function(){
  alert("A");
}); 
```

# java - 无法包含外部 jar

> ID：14156137
> 
> 赞同：2
> 
> 时间：2013-01-04T11:17:59.207
> 
> 标签：java

在编译我的 java 程序时，我无法在 ubuntu linux 的命令行中包含外部 jar。我的外部 jar 位于 /home/ubuntu/lib 目录中，我正在使用这个：

javac -cp /home/ubuntu/lib c.java

但它无法编译。谁能建议我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:22:46.570

试试这个

```
javac -cp "/home/ubuntu/lib/*" c.java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:20:41.170

[您必须按照此处](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/classpath.html)所述直接指定罐子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:41:31.050

您可以尝试将 jar 文件放在文件夹的 ext 文件`jdk/jre/lib/ext`夹中。

# facebook - 是否可以将自定义小部件/脚本添加到 facebook 状态更新？

> ID：14156138
> 
> 赞同：0
> 
> 时间：2013-01-04T11:17:59.470
> 
> 标签：facebook, flash, iframe, widget

我们希望我们的用户能够在他们的 Facebook 状态上共享一个小部件，而不是常见的普通文本/链接/视频。更高级的东西，比如 Spotify 小部件。

我四处搜索，但没有找到很多答案，所以我想知道这是否可能以及如何做到？

# php - Android 从 (HTTP) POST 到 GET

> ID：14156139
> 
> 赞同：1
> 
> 时间：2013-01-04T11:17:59.690
> 
> 标签：php, android, http-post, http-get

我正在开发 2 个相同的应用程序，它们需要将相同的字符串发送到 php 文件。当我在 PHP 中使用此代码进行检查时，iOs 是一个 GET。

```
file_put_contents('dump.txt', "POST: \n" . print_r($_POST, true) . "\n\n\n GET: \n" . print_r($_GET, true)); 
```

但是 Android 是一个 POST，但它们需要完全相同，因为我已经构建了 PHP 的一个工作部分，我不能再更改了。

这是我的安卓代码：

```
HttpClient httpclient = new DefaultHttpClient();
            HttpPost httpost = new HttpPost("http://Myserver.com/default.php");

            json = new JSONObject(); 
            try { 
                json.put("id", "69403"); 
                json.put("longitude", longi); 
                json.put("latitude", lat); 
                json.put("timestamp", time); 

            } catch (JSONException e) { 
            // TODO Auto-generated catch block 
            e.printStackTrace(); 
            } 

            /// create StringEntity with current json obejct 

            try { 
          //  StringEntity se = new StringEntity(json.toString()); 

                List <NameValuePair> nvps = new ArrayList <NameValuePair>();
                nvps.add(new BasicNameValuePair("data", json.toString()));
                httpost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));

                System.out.println("send about to do post");
                try {
                    response = httpclient.execute(httpost);
                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                System.out.println("send post done");
                HttpEntity entity = response.getEntity();

            } catch (UnsupportedEncodingException e) { 
            // TODO Auto-generated catch block 
            e.printStackTrace(); 
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:36:26.187

如果您收到[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)，那是因为您正在尝试从主线程执行网络操作。如果是这样，请尝试查看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

还要确保您在 android 清单中获得了 Internet 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:24:15.890

改变：

```
HttpPost httpost = new HttpPost("http://Myserver.com/default.php"); 
```

至

```
HttpGet httpget = new HttpGet("http://Myserver.com/default.php"); 
```

# iphone - 无法在 iphone 编程中输入 UITextfield

> ID：14156141
> 
> 赞同：0
> 
> 时间：2013-01-04T11:18:03.663
> 
> 标签：iphone, objective-c

在我的应用程序中，我有登录页面，但有时`textfield`无法输入。

它很少发生；我正在以编程方式创建文本字段，并且已经为`userUnteractionEnabled`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:25:15.457

我不确定是 iOS 5 还是 xcode 4.2 中的问题，我遇到了同样的问题，如果我们在同一个循环中使用 resignFirstResponder 和 becomeFirstResponder 有时我们会遇到这种问题，要解决这个问题，你可以按照下面的代码。这可能会帮助你

**成为第一响应者**

```
[textfield performSelector:@selector(becomeFirstResponder) withObject:nil afterDelay:0.0]; 
```

# mysql - 如何在 Zend\Db\TableGateway 中使用 SQL_CALC_FOUND_ROWS

> ID：14156151
> 
> 赞同：6
> 
> 时间：2013-01-04T11:18:53.763
> 
> 标签：mysql, zend-framework2

如何在`SQL_CALC_FOUND_ROWS`不`Zend\Db\TableGateway`使用原始 SQL 的直接低级查询的情况下使用？

```
class ProductTable {
    protected $tableGateway;

    /**
     * Set database gateway
     *
     * @param TableGateway $tableGateway - database connection
     * @return void
     */
    public function __construct(TableGateway $tableGateway) {
        $this->tableGateway = $tableGateway;
    }

    /**
     * Fetch all products
     *
     * @param integer $page - page of records
     * @param integer $perpage - records per page
     * @return void
     */
    public function fetchAll($page = 1, $perpage = 18) {
        return $this->tableGateway->select(function (Select $select) use ($page, $perpage) {
            $select
                ->limit($perpage)
                ->offset(($page - 1) * $perpage);
        });
    }
} 
```

我希望在`fetchAll`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T21:34:31.877

看起来 Zend Framework 2.1.4 支持指定量词。这使您可以在选择对象中使用 SQL_CALC_FOUND_ROWS。我确实发现难以解决的一件事是，如果您没有指定表，Zend 的 Zend\Db\Sql\Select 类将不会为您生成正确的 SQL。这在执行后续选择以检索 FOUND_ROWS() 时会出现问题。我在下面更新了您的代码以包含我将使用的内容。我已经将我的项目实现合并到您的代码中，所以如果某些东西不起作用，可能是因为我输入了错误的东西，但总的来说它对我有用（不像我想要的那样可取）。

```
use Zend\Db\Sql\Expression;
use Zend\Db\Sql\Select;

class ProductTable {
protected $tableGateway;

/**
 * Set database gateway
 *
 * @param TableGateway $tableGateway - database connection
 * @return void
 */
public function __construct(TableGateway $tableGateway) {
    $this->tableGateway = $tableGateway;
}

/**
 * Fetch all products
 *
 * @param integer $page - page of records
 * @param integer $perpage - records per page
 * @return void
 */
public function fetchAll($page = 1, $perpage = 18) {
    $result = $this->tableGateway->select(function (Select $select) use ($page, $perpage) {
        $select
            ->quantifier(new Expression('SQL_CALC_FOUND_ROWS'))
            ->limit($perpage)
            ->offset(($page - 1) * $perpage);
    });

    /* retrieve the sql object from the table gateway */
    $sql = $this->tableGateway->getSql();

    /* create an empty select statement passing in some random non-empty string as the table.  need this because Zend select statement will
    generate an empty SQL if the table is empty. */
    $select = new Select(' ');

    /* update the select statement specification so that we don't incorporate the FROM clause */
    $select->setSpecification(Select::SELECT, array(
        'SELECT %1$s' => array(
            array(1 => '%1$s', 2 => '%1$s AS %2$s', 'combinedby' => ', '),
            null
        )
    ));

    /* specify the column */
    $select->columns(array(
        'total' => new Expression("FOUND_ROWS()")
    ));

    /* execute the select and extract the total */
    $statement = $sql->prepareStatementForSqlObject($select);
    $result2 = $statement->execute();
    $row = $result2->current();
    $total = $row['total']';

    /* TODO: need to do something with the total? */

    return $result;
} 
```

}

# java - 这段代码背后的逻辑是什么

> ID：14156155
> 
> 赞同：-2
> 
> 时间：2013-01-04T11:19:02.280
> 
> 标签：java

我想了解这个java代码的输出是如何工作的。请帮忙！我从一本名为 Head First Java 的书中获取了这段代码，代码如下：

```
public class EchoTestDrive {

    public static void main(String[] args) {
        Echo e1 = new Echo();
        Echo e2 = new Echo(); // the correct answer
        //or
        Echo e2 = e1; // is the bonus answer!
        int x = 0;
        while (x < 4) {
            e1.hello();
            e1.count = e1.count + 1;
            if (x == 3) {
                e2.count = e2.count + 1;
            }
            if (x > 0) {
                e2.count = e2.count + e1.count;
            }
            x = x + 1;
        }
        System.out.println(e2.count);
    }
}

class Echo {

    int count = 0;

    void hello() {
        System.out.println("helloooo... ");
    }
} 
```

这是输出：

```
 %java EchoTestDrive
   helloooo...
   helloooo...
   helloooo...
   helloooo...
   10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:31:23.463

除了别名，我看不出这个问题可能是关于什么的。如果你有这条线：

```
Echo e2 = new Echo(); 
```

then`e2`是一个独立的对象，`e1`并且有自己的`count`变量。如果你使用这个：

```
Echo e2 = e1; 
```

那么你总共有一个实例，由和`Echo`指向。`e1``e2`

其余的只是关于如何以及何时`count`在循环中更新变量的繁琐细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:31:54.533

好....

`helloooo...`被输出 4 次来自...

```
 while (x < 4) {
        e1.hello();
        x = x + 1;
    } 
```

至于计数到 10，（假设 `Echo e2 = e1;`是 `Echo e3 = e1;`......

迭代后`x = 0`：e1.count == 1, e2.count == 0;

迭代后`x = 1`：e1.count == 2, e2.count == 2;

迭代后`x = 2`：e1.count == 3, e2.count == 5;

迭代后`x = 3`：e1.count == 4, e2.count == 10;

尽管这种解释使 e3 完全未被使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T11:38:38.763

该示例就像从源代码池中填空一样。

您已经很好地完成了它，您可能想知道为什么会出现以下差异

```
Bonus Answer! 
24
correct Answer!
10 
```

在正确的情况下

```
Echo e2 = new Echo(); // the correct answer 
```

您正在创建单独的实例，`Echo`因此它将拥有自己的实例，`count`并且每次您说`e2.count`您正在访问此计数时。

在奖励答案案例中

```
Echo e2 = e1; 
```

你有两个引用指向同一个对象，所以当你这样做时，`e2.count`你正在访问`count`for`e1`和`e2`

# c - 使用 strcmp-crash 比较字符串

> ID：14156157
> 
> 赞同：2
> 
> 时间：2013-01-04T11:19:10.627
> 
> 标签：c, string, generics, pointers

我正在试验指针和字符串。在下面的代码中，所有内容都经过了测试（您可以自己编译和运行），但是当我尝试使用 strcmp 时，我一直在崩溃。代码在代码块中运行而没有警告。你能指出我导致程序崩溃的错误吗？

```
 #include<stdio.h>
    #include<stdlib.h>
    #include<string.h>

    int main() 
    {
        int choice,x=7,k,q,cmp,j=0,i=0,N;
        char v[5],str[80],c[5];
        char *B[11][2]=
        {"-----","0",
         ".----","1",
         "..---","2",
         "...--","3",
         "....-","4",
         ".....","5",
         "-....","6",
         "--...","7",
         "---..","8",
         "----.","9",
         NULL,NULL};

         printf("Give a stream");
         if(gets(str)) printf("%s\n",str);
         fflush(stdin);
         i=0;
         while(str[i])
         {
             q=0;
             j=i+1;
             while(q%5!=0)
             {
                 v[j]=str[j];
                 puts(v);
                 j++;
                 q++;
             }
             printf("Hello");
             for(k=0; k<11; k++)
             {
                 strcpy(c,B[k][0]);
                 printf("%s",c);
                 x=strcmp(v,c);
                 //Problem:
                 printf("%d",c);
                 if(x==0) printf("hi");
             }
             i=i+1;
             j++;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:23:20.660

你正在做：

```
strcpy(c,B[k][0]); 
```

现在`c`声明为：

```
char c[5]; 
```

并且`B[k][0]`有5个字符。由于您想`c`成为 NUL 终止的字符数组，因此您必须有空间来容纳 NUL 字符并使用`strncpy`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:24:43.690

您没有填充`v`数据。条件`while(q%5!=0)`在进入时为假，因为`q == 0`. 这会`v`导致未初始化，即包含垃圾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T11:34:48.443

该程序将在 k=10 时转储，因为 B[10][0] = NULL.strcpy(char *dest, const char *src) 将在 src=null 时转储。

# c++ - Linux 共享库，用于查找磁盘信息，如 LUN Id、存储阵列信息，还可以执行 HBA 和挂载/卸载操作

> ID：14156162
> 
> 赞同：1
> 
> 时间：2013-01-04T11:19:39.020
> 
> 标签：c++, linux, shared-libraries, redhat, opensuse

谁能告诉我**SuSE 和 RedHat Linux**上的**共享库**，其中包含：

 **1.  **用于查找磁盘信息**的 API，例如***磁盘属性***、***LUN Id***、***VG（卷组）ID***和***存储阵列信息。***

2.  执行[***HBA***](http://encyclopedia2.thefreedictionary.com/Host+Bus+Adapter)相关操作的 API（如*发现机器上的[WWN](http://encyclopedia2.thefreedictionary.com/World+Wide+Name)*编号）。

我正在用 C++ 创建一个库，用于在 SuSE 和 RedHat 系统上进行 LUN 发现、LUN 附加和分离操作。

我已经为 IBM AIX 平台制作了这个库。但我不知道 SuSE 和 RedHat 上使用哪些共享库来执行上述操作。

还请告诉我在哪里可以获得这些共享库。**

# asp.net - 基于 ASP .Net 中的条件在 TreeView 中显示链接

> ID：14156164
> 
> 赞同：0
> 
> 时间：2013-01-04T11:19:43.870
> 
> 标签：asp.net, c#-4.0

我需要一些有关 TreeView 数据显示的帮助。我有 Web.sitemap，其中有一些带有角色的 url 信息。这是我的 TreeView 的数据源。现在，我想根据角色在 TreeView 中显示数据。例如：如果角色是“A”，那么我不想显示链接。

这可能吗？如果有人有任何意见，请告诉我。

-谢谢，沙拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:01:38.667

如果您需要根据角色删除链接，您可以这样做

```
protected void treeView_DataBound(object sender, EventArgs e)
{
    if (role == "A")
    {

        RemoveTreeViewLink(treeView.Nodes);
    }
}

private void RemoveTreeViewLink(TreeNodeCollection nodeCollection)
{
    foreach (TreeNode node in nodeCollection)
    {
        node.SelectAction = TreeNodeSelectAction.None;
        if (node.ChildNodes.Count > 0)
        {
            RemoveTreeViewLink(node.ChildNodes);
        }
    }
} 
```

# iphone - 在ios 4中获取用户时间线所有推文

> ID：14156165
> 
> 赞同：2
> 
> 时间：2013-01-04T11:19:43.997
> 
> 标签：iphone, api, twitter

我想在 ios 4 中获取用户时间线的所有推文，包括时间、用户名、用户图像和用户位置纬度和经度，并在特定用户墙上发布用户当前位置纬度和经度的推文。我该如何执行此操作。

请向我提供详细信息/链接/网址，我可以通过它获取所有字段（即用户名、时间等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:22:18.923

你在问两个不同的问题。首先，您要查看 Twitter 开发人员 api 以检索 json 格式的数据。然后，您想了解如何在 iOS 中解析 json 数据并显示它。

您可以在此处阅读 Twitter API：[Twitter 开发人员](https://dev.twitter.com/)。

另外，有什么理由使用 iOS 4 吗？大多数用户现在使用的是 iOS 5 或 6。

# qt - 未加载 Qt 4.8.1 Postgres Psql 驱动程序（Windows7 64 位）

> ID：14156166
> 
> 赞同：1
> 
> 时间：2013-01-04T11:19:45.707
> 
> 标签：qt, windows-7, psql

我无法使用旧的 Qt 4.8.0 psql 驱动程序进行调试。并且无法加载新的 Qt 4.8.1 psql 驱动程序..

```
[ListAvailableSQLDrivers : [0mPluginsPath() C:\QtSDK\Desktop\Qt\4.8.1\msvc2010\plugins
[ListAvailableSQLDrivers : [0mQSqlDatabase::drivers() QSQLITE
[ListAvailableSQLDrivers : [0mQSqlDatabase::drivers() QODBC3
[ListAvailableSQLDrivers : [0mQSqlDatabase::drivers() QODBC 
```

我正在使用 QtSDK 1.2 (Qt 4.8.1)、Win7 64bit 和 PgAdmin 1.14.3

我的 QT c++ 软件可以从 Qt 4.8.0 加载旧的 psql 驱动程序：

*C:\QtSDK\Desktop\Qt\4.8.1\msvc2010\plugins\sqldrivers*， **qsqlpsql4.dll，qsqlpsql4d.dll**

我试图从 Qt Sources 编译 psql 驱动程序。这部分工作。在我的笔记本电脑上，无法加载已编译的驱动程序，但在我朋友的笔记本电脑上，此驱动程序正在运行。我们都有Win7 64位。欢迎任何关于如何追踪这一点的想法。

感谢 QtDeveloper

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T10:37:17.300

我建议不要将一台计算机的 Qt-dll 与另一台计算机上构建/安装的插件混合使用。Qt 将插件的默认路径存储在 Qt-dll 中，并且在不同计算机上编译/安装期间提供的路径可能会有所不同。

尝试使用来自 sysinternals 的 procmon，并在进程开始期间查看应用程序在为插件安装时尝试打开的路径。

尝试将 \plugins\sqldrivers* 复制到 `<YourAppStartPath>\plugins\sqldrivers`

# cuda - 节省 cudaHostAlloc 所需的时间

> ID：14156167
> 
> 赞同：4
> 
> 时间：2013-01-04T11:19:54.123
> 
> 标签：cuda, gpgpu, nvidia

我试图找出在将数据传输到设备之前将数据复制到固定内存是否有意义，因为我对输入数据的分配没有影响（它是一个库）。

```
std::vector<int> idata(WORK_SIZE);
int *idata_aligned = NULL;
int *d1 = NULL;
int *d2 = NULL;

for (int i = 0; i < WORK_SIZE; ++i)
    idata[i] = i;
CUDA_CHECK_RETURN(cudaMalloc((void**) &d1, sizeof(int) * WORK_SIZE));
CUDA_CHECK_RETURN(cudaMalloc((void**) &d2, sizeof(int) * WORK_SIZE));

printf("unpinned:\n");
{
    boost::timer::auto_cpu_timer t;
    CUDA_CHECK_RETURN(cudaMemcpy(d1, &idata[0], sizeof(int) * WORK_SIZE, cudaMemcpyHostToDevice));
}

printf("copy to pinned:\n");
{
    boost::timer::auto_cpu_timer t;
    CUDA_CHECK_RETURN(cudaHostAlloc((void**) &idata_aligned, sizeof(int) * WORK_SIZE,cudaHostAllocDefault));
    memcpy(idata_aligned, &idata[0], sizeof(int) * WORK_SIZE);
    CUDA_CHECK_RETURN(cudaMemcpy(d2, idata_aligned, sizeof(int) * WORK_SIZE, cudaMemcpyHostToDevice));
} 
```

10,000,000 个元素的输出：

```
unpinned:
 0.018919s wall, 0.020000s user + 0.000000s system = 0.020000s CPU (105.7%)
copy to pinned:
 0.045428s wall, 0.020000s user + 0.020000s system = 0.040000s CPU (88.1%) 
```

主要问题似乎是 cudaHostAlloc （即使没有 memcpy，第二种方法也慢得多）。

我做错什么了吗？是否有另一种方法可以将固定内存用于已分配的内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:42:01.193

使用固定内存的速度增益还取决于传输的大小和您的系统。您可以先运行 CudaBandwidthTest 示例，看看它是否真的有意义。

否则，我会测量您程序的特定部分，以查看时间浪费在哪里。（分配、memcpy、pcie 传输）

根据您分配页面锁定的内存大小，您的系统也可能需要将一些其他内存交换到磁盘，从而增加运行时间。

无论如何，你展示的时间很短，所以我猜传输大小也很小。您还应该能够通过将多个小写合并到一个更大的写来提高速度。

# actionscript-3 - 选项的动作脚本布局

> ID：14156168
> 
> 赞同：0
> 
> 时间：2013-01-04T11:19:55.270
> 
> 标签：actionscript-3, flash

我正在使用 AS3 编写多项选择测验。而且，我想在 2 0r 3 列中显示答案选项，例如：

```
 A) Answer A B) Answer B  C) Answer C
 D) Answer D E) Answer E 
```

我用它来完成布局，

```
answerTextField.x=(j%3) * 200 ;
answerTextField.y=  questionName.y + 20 + ((j % 2) * 20) ; 
```

但它产生

```
 A) Answer A E) Answer E  C) Answer C
 D) Answer D B) Answer B 
```

我们如何解决这个问题或者有没有其他方法来完成布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:35:34.810

我解决了：

```
answerTextField.y=  questionName.y + 20 + (int(j / 2) * 20) ; 
```

# ios - 如何刷新uiscrollview？

> ID：14156169
> 
> 赞同：1
> 
> 时间：2013-01-04T11:20:01.483
> 
> 标签：ios, uiscrollview, refresh

> **可能重复：**
> [刷新/重新加载 UIScrollView 的最佳方式](https://stackoverflow.com/questions/9217772/best-way-to-refresh-reload-uiscrollview)

我需要使用页面控件刷新 uiscrollview 我尝试使用 setneeddisplay 没有成功 那么如何刷新 uiscrollview 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:38:05.350

如果您的意思是通过重置返回到第一张图像或顶部，您可以尝试：

```
[_scrollView scrollRectToVisible:CGRectMake(0, 0, _scrollView.frame.size.width, _scrollView.frame.size.height) animated:YES]; 
```

# sql-server-data-tools - 数据层应用程序版本号存储在 Visual Studio 项目中的什么位置？

> ID：14156173
> 
> 赞同：4
> 
> 时间：2013-01-04T11:20:28.610
> 
> 标签：sql-server-data-tools, version-numbering, data-tier-applications, visual-studio-project

我有一个在 AssemblyInfo.cs 文件中填充版本号的实用程序。现在我需要实现一个功能来调整 Visual Studio 数据层应用程序 (DACPAC) 的版本号。

我发现如果我打开项目属性并单击数据层应用程序属性按钮，我可以手动调整数字。但是我找不到这个数字在项目文件中的存储位置，所以我不知道如何从我的实用程序自动更新它。

你知道吗，版本号存储在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-26T14:31:50.210

除非您更改它们的默认值，否则这些属性不会出现在 .sqlproj 文件中。当你这样做时，它们将如下所示：

```
<DacDescription>This is my description</DacDescription>
<DacApplicationName>Database.Application.Name</DacApplicationName>
<DacVersion>1.2.3.4</DacVersion> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:46:18.490

dacpac 版本号直到第一次成功构建项目后才会显示。然而，在那之后，它显示为 .sqlproj 文件，如下所示。

![Dacpac 版本号信息](../Images/f414e682ccff5ccf9eecf65f942d815a.png)

# c# - filterContext.HttpContext.Request.IsAuthenticated 显示无效操作错误

> ID：14156174
> 
> 赞同：1
> 
> 时间：2013-01-04T11:20:29.423
> 
> 标签：c#, asp.net-mvc-3, model-view-controller, request, nunit

我正在编写单元测试。我是单元测试的新手。我不知道如何测试这种方法。我应该对私有方法进行单元测试吗？我正在使用犀牛模拟。

```
 private bool RedirectToAppraiserProfilePage(AuthorizationContext filterContext)
    {
        if (!filterContext.HttpContext.Request.IsAuthenticated) { return false; }
        IPrincipal principal = filterContext.HttpContext.User;
        if (!principal.IsInRole(RoleEnum.Appraiser.ToString())) { return false; }
        if (!this.GetType().IsDefined(typeof(ForbidDisagreedAppraisers), true)) { return false; }
        AppraiserDTO appraiser = this.employeeService.GetLoggedInAppraiser();
        return !appraiser.AcceptTermsOfAgreement;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:13:15.817

关于测试私有方法的问题：

您应该通过调用公共方法来测试在私有方法中实现的功能。

见解释为什么：

当测试**只调用公共方法**时，很容易在类实现中进行任何重构（提取新的私有方法，重命名它们，更改私有方法的参数等）。并且测试将保证一切仍然运行良好。
在这种情况下，测试集是类**的规范**。它说应**该做什么**，但不说应该**怎么**做。

当测试调用**私有方法**时，重构就不能这么简单了。您还需要重写测试。当然，这些测试并不能保证重构后代码仍然有效。
此外，无论如何都必须测试公共方法并检查它们是否正确调用私有方法。因为任何经过良好测试的私有方法如果不被公共方法使用，都是无用的。

关于错误的问题`filterContext.HttpContext.Request.IsAuthenticated`：

我相信这是因为`filterContext.HttpContext`在单元测试范围内无效。[您可以在此处](https://stackoverflow.com/questions/1422347/issues-mocking-the-mvc-controllercontext-request)`HttpContext`找到有关模拟的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:53:53.347

通常我不会测试私有方法，但似乎你需要一些关于单元测试真正是什么以及你应该如何解决问题的一般指导。

在编写单元测试时你需要问自己：

1.  我正在测试的方法是无状态的吗？（即不依赖于其他方法或模块）如果是 - 可以编写单元测试 | 如果否 - 是否可以使用依赖注入或模拟/存根使方法无状态以进行测试？例如，在您的情况下，我将更改方法签名以将 IAuthorizationComponent 接口作为参数，以便您可以使用依赖注入通过发送您自己的实现（filterContext）来测试您的方法

2.  该方法有什么作用？（即算法是什么）指定参数及其变化和预期结果（例如返回值）。

3.  确定基本情况（即一切都按预期进行） 使用这些参数编写单元测试并断言预期的结果。

4.  识别替代情况（例如登录失败、错误输入参数等） 通过断言结果来验证方法的行为是否正确。

# php - PHP 日期数组

> ID：14156177
> 
> 赞同：-5
> 
> 时间：2013-01-04T11:20:31.840
> 
> 标签：php

谁能帮助我：我有一个函数`date_range`可以返回两个给定日期之间的所有日期。这是对该函数的调用：

```
$date_array = date_range($ci,$co);
$dates = "\"" . implode("\",\"",$date_array) . "\""; 
```

函数`setSpecificDate`接收日期并使其无法选择。当我用日期调用函数时，如下所示：

```
$myCalendar->setSpecificDate(array("2013-04-10", "2013-04-12"), 0, 'year'); 
```

它工作正常。但我想在函数 `$dates`中返回它来调用它，就像这样：但它不起作用。我试过不带引号，但也没有用。我不知道问题出在哪里，应该是这样写的或者像“2013-04-10”一样的东西。（看起来像这样：）`date_range``$myCalendar->setSpecificDate(array("$dates"), 0, 'year');``$dates``print $dates``"2013-05-22","2013-05-23","2013-05-24"`

感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:22:11.430

`$date_array`是一个数组，所以：

```
$myCalendar->setSpecificDate($date_array, 0, 'year'); 
```

为了更深入地了解这一点，您需要*的返回值`date_range`*，如下所示：

```
$myCalendar->setSpecificDate(date_range($ci, $co), 0, 'year'); 
```

# .htaccess - htaccess 域和子域重定向

> ID：14156181
> 
> 赞同：0
> 
> 时间：2013-01-04T11:20:55.007
> 
> 标签：.htaccess, redirect, subdomain

我有这个配置，它将任何 URL 定向到“public_html”目录并隐藏“public_html”。

```
# Add trailing slash if path does not contain a period or end with a slash
RewriteCond %{REQUEST_URI} !(\.|/$)
RewriteRule (.*) http://www.kent.gd/$1/ [R=301,L]

#Rewrites http://www.yoursite.com/subdir to http://www.yoursite.com/
RewriteCond %{REQUEST_URI} !^/public_html/
RewriteRule ^(.*)$ public_html/$1 [L] 
```

现在我添加了一些 subdomain ，我不希望我的子域像主域一样重定向。

我试过这个但没有用：

```
RewriteCond %{HTTP_HOST} ^([^.]+)\.kent\.gd$ [NC]
RewriteRule ^(.*?)\.kent.gd /$1 [L] 
```

# c# - 在gridview中使用超链接显示几个链接

> ID：14156182
> 
> 赞同：-2
> 
> 时间：2013-01-04T11:20:59.950
> 
> 标签：c#, asp.net, gridview

我在gridview中使用超链接。

我可以从`NavigateUrl`我的项目目录/pdf/ArchiveCode.pdf 链接我的 PDF 文档。

现在我的目录中有两个 PDF 文档（第一个文档 020001.0001.0001.pdf 和第二个文档 100410.0001.0001.pdf），但是在 gridView 的超链接列中显示了所有带有文本值“PDF”的链接。

```
----------------------------------------
|      PDF         | ArchiveCode       | - Headers from gridView
----------------------------------------
|              PDF | 020001.0001.0001  |
----------------------------------------
|              PDF | 100410.0001.0001  |
----------------------------------------
|              PDF | 020001.0131.0441  |
----------------------------------------
|              PDF | 020001.0005.0007  |
----------------------------------------
|              PDF | 020001.0003.0002  |
----------------------------------------
... 
```

因为我只有两个 PDF 文档，是否可以隐藏网格视图中未使用的其他链接（死链接）并在我的项目目录中创建新文档时激活链接？

这是`HyperLink`and for`ArchiveCode`列的代码：

```
<asp:TemplateField HeaderText="PDF">
    <ItemTemplate>
        <asp:HyperLink ID="PDFHyperLink" Target="_blank" runat="server" Text="PDF"  NavigateUrl   = '<%# "~/pdf/" + Eval("ArchiveCode") + ".pdf" %>'>
        </asp:HyperLink>
    </ItemTemplate>
</asp:TemplateField>        
<asp:TemplateField HeaderText="ArchiveCode">
    <ItemTemplate>
        <asp:Label ID="lblKod" Text='<%# Eval("ArchiveCode") %>' runat="server"/>
    </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:00:21.200

感谢您的评论，我终于解决了我的小问题，我可以使用简单的布尔条件控制 GridView 中的超链接文本。在我的数据库表中，我添加了名为“activePDF”的新布尔列。之后，在我的 GridView 中，我修改了 asp:HyperLink：

```
<asp:HyperLink ID="PDFHyperLink" Target="_blank" runat="server" NavigateUrl = '<%# "~/pdf/" + Eval("ArchiveCode") + ".pdf" %>'  Text ='<%#Convert.ToBoolean(Eval("activePDF"))== true? "PDF":"" %>'>
</asp:HyperLink> 
```

希望这对其他人有帮助。

# eclipse - 什么是 M2M Mihini 框架？

> ID：14156185
> 
> 赞同：0
> 
> 时间：2013-01-04T11:21:09.827
> 
> 标签：eclipse, lua

我正在阅读机器对机器（M2M）技术，其中提到 Mihini 是用于创建 M2M 应用程序的框架。我的疑问是，

1.  如何在 Koneki Lua 开发环境中集成 Mihini 框架。
2.  如何使用该框架。
3.  已发布 Mihini 框架供使用。
4.  是否有可在 Koneki 中使用 Mihini 框架的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:39:22.510

Mihini 代码有望在本周发布在 eclipse.org 上。它一直在进行我们正常的 IP 尽职调查，因此很抱歉耽搁了。

同时，此页面[1] 上有一些关于如何使用 Koneki 和 Mihini 的文档。我在晚上一直在玩这些东西，希望能够很快在那里添加更多内容。

请耐心等待一会儿 :)

[1] [http://wiki.eclipse.org/Mihini/Run_Mihini_on_an_Open_Hardware_platform](http://wiki.eclipse.org/Mihini/Run_Mihini_on_an_Open_Hardware_platform)

# java - 使用 JSTL forEach 迭代 ArrayList 项

> ID：14156190
> 
> 赞同：3
> 
> 时间：2013-01-04T11:21:30.417
> 
> 标签：java, jsp, jstl

我在运行 ArrayList 项目并将它们显示在 JSP 文件中时遇到问题。

这是我的豆：

```
public class UsersList {
    private ArrayList<UserDetails> users = new ArrayList<UserDetails>();

    public ArrayList getUsers(  ){
        return users;
    }

    public void setUsers(ArrayList<UserDetails> users){
        this.users = users;
    }
} 
```

users 包含 UserDetails ，它只是具有 3 个字符串属性的类：电子邮件、用户名、密码

现在我正在尝试在表格中显示详细信息.. 首先在 index.jsp 我有这些命令：

```
 UsersList bean = new UsersList();
            bean.setUsers(db.getUsersList()); // getting all user deatils from database into the list
            session.setAttribute("bean", bean);

            RequestDispatcher dispatcher = getServletContext().getRequestDispatcher("/adminPage.jsp");
            dispatcher.forward(request, response); 
```

现在在 adminPage.jsp 上，当我应该显示包含用户详细信息的表格时，它什么也不显示。这是代码：

```
<c:forEach var="current" items="${bean.users}" >
<tr>
    <td>${current.email}</td>
    <td>${current.username}</td>
    <td><input type="checkbox" name="delete" value="${current.email}"</td>
</tr>
 </c:forEach> 
```

知道这里有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:01:36.910

检查您的前缀“c”是否指向正确的标签库。

它应该是

> “http://java.sun.com/jsp/jstl/core”

如果这不起作用，请检查填充数据的逻辑是否有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:23:31.540

由于您将对象添加到会话中，您需要从 EL 中的 sessionScope 访问它。

```
<c:forEach var="current" items="${sessionScope.bean.users}" >
<tr>
    <td>${current.email}</td>
    <td>${current.username}</td>
    <td><input type="checkbox" name="delete" value="${current.email}"</td>
</tr>
 </c:forEach> 
```

# actionscript-3 - Actionscript 3.0 - 并发

> ID：14156196
> 
> 赞同：0
> 
> 时间：2013-01-04T11:21:50.247
> 
> 标签：actionscript-3

开发环境：Flash builder 4，SDK 4.1

源代码 ：

```
if (ColonyHandler.getInstance() != null)
            {
                try
                {
                    var colonyA:ColonyHandler = ColonyHandler.getInstance();
                    trace(colonyA);
                    ColonyHandler.getInstance().onMouseMove(event); 
                }
                catch(error:*)
                {
                    var colonyB:ColonyHandler = ColonyHandler.getInstance();
                    trace(colonyB);
                }
            } 
```

问题：colonyA 不为空，colonyB 为空。getInstance() 方法返回名为“实例”的静态变量。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:20:36.320

`getInstance`用于单例类以获取类的唯一实例。该实例将存储为类本身的静态变量（在您的情况下`ColonyHandler`），并且可能被称为“实例”。所以我认为你得到的没有任何问题：你要求'ColonyHandler'的唯一实例并得到它......

# ravendb - RavenDb 和保护文档/实体中的集合

> ID：14156197
> 
> 赞同：1
> 
> 时间：2013-01-04T11:21:52.247
> 
> 标签：ravendb

嗨我习惯了以下实体

> ```
> public class Foo
> {
>     private IList<Bar> _bars;
> 
>     public IEnumerable<Bar> Bars { get { return bars; } }
> 
>     public void Add(Bar bar)
>     {
>         /* Validation logic here */
> 
>         _bars.Add(bar);
>     } 
> } 
> ```

我怀疑这不适用于 RavenDb 还是我错了？我可以用 Bars 保护我的收藏免受外部操纵吗（换句话说，不允许 foo.Bars.Add(bar);）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:29:20.897

我找到了使用两个属性的解决方案。

`public IEnumerable Bars { get { return InnerBars; } }`

`private List InnerBars { get; set; }}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:27:07.467

自动属性上的私有 setter 是最简单和最易读的方法，无需做任何特别的事情。

```
public class Foo
{
    public IEnumerable<Bar> Bars { get; private set; }

    public void Add(Bar bar)
    {
        Bars.Add(bar);
    }
} 
```

另一种方法是使用属性：

```
// pick one or the other
using Newtonsoft.Json // on 1.0
using Raven.Imports.Newtonsoft.Json // on 2.0

...

public class Foo
{
    [JsonProperty(PropertyName = "Bars")]
    private IList<Bar> _bars;

    [JsonIgnore]
    public IEnumerable<Bar> Bars { get { return bars; } }

    public void Add(Bar bar)
    {
        _bars.Add(bar);
    }
} 
```

# haskell - 在 Haskell 中表示一条尾巴

> ID：14156211
> 
> 赞同：-2
> 
> 时间：2013-01-04T11:22:45.507
> 
> 标签：haskell

> **可能重复：**
> [模式匹配的名称“xs”从何而来？](https://stackoverflow.com/questions/13701099/where-does-the-name-xs-for-pattern-matching-come-from)

我正在学习 Haskell。这是一个计算总和的函数

```
sum' :: (Num a) => [a] -> a  
sum' [] = 0  
sum' (x:xs) = x + sum' xs 
```

我想不通这是什么`xs`意思。x - 是头部，xs - 是尾部。但它是写成 xs 而不仅仅是 x 或 s 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T11:31:40.597

`x`并且`xs`只是变量名；例如，您可以使用`fred`and`wilma`代替。但是调用列表的头部`x`和尾部`xs`（发音为 exes）是很常见的，因为它给你的提示`x`是单个元素，而`xs`可能包含多个元素。

您给出的示例使用模式匹配，这是一个很好的功能。线

```
 sum' (x:xs) = x + sum' xs 
```

基本上说“将输入参数求和”，并在第一个元素之后将其拆分。调用第一个元素`x`和列表的其余部分`xs`“。它基本上等同于：

```
 sum' list = x + sum' xs
     where x = head list
           xs = tail list 
```

# python - 在 Django/Python 中编写嵌套注释

> ID：14156215
> 
> 赞同：6
> 
> 时间：2013-01-04T11:22:59.517
> 
> 标签：python, django, django-comments

Django 提供了一个优秀的`comments`应用程序。但是，我不想使用 , 等其他字段`user_email`。`user_url`我想开发一个嵌套评论系统（就像[Quora](http://quora.com)所做的那样，不像[Facebook](http://facebook.com)）。但我不明白如何推进 Django 文档中提到的模板，因为它使用`comments`. 是否有任何有用的文章/教程可以有所帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T23:10:40.280

我的一个同事一年前写了一个线程评论系统，你可能会通过查看源代码找到一些有趣的指针（或者你可以简单地使用它，或者 fork 它）。

这是链接[https://github.com/pterk/django-tcc](https://github.com/pterk/django-tcc)

# java - 上下文未在可运行线程内解析

> ID：14156216
> 
> 赞同：0
> 
> 时间：2013-01-04T11:22:59.817
> 
> 标签：java, android

这是主 Activity 类中的代码，它工作正常..

```
public void onStart() {
    super.onStart();

mHandler = new Handler();
    context = this;
    ...
} 
```

下面的代码给出了问题，不知道为什么：

```
public void onStart() {
    super.onStart();

    new Thread(new Runnable(){
            public void run(){
            mHandler = new Handler();
            context = this;
            ...
        }
    }).start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:27:03.947

```
new Thread(new Runnable(){
            public void run(){
            mHandler = new Handler();
            context = this;
            ...
        }
    }).start(); 
```

在上面的代码`.this`中是指`Thread (Runnable)`类对象而不是`Current Activity`. 而且你不能`Thread (Runnable) object`投到`Android Context`。

或类似的东西，

```
context = <MainActivity>.this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:27:06.517

替换为`context = this;`，`context = MainActivity.this`因为它引用的是`Thread`对象而不是`MainActivity`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:25:57.487

`this`指`Runnable`实例。您想要封闭的活动，因此请`MyActivityClass.this`改用。

# c# - 从汇丰英国获得余额？

> ID：14156225
> 
> 赞同：-1
> 
> 时间：2013-01-04T11:23:53.820
> 
> 标签：c#, api, onlinebanking

我正在寻找我自己的个人用途，看看我是否可以获得我汇丰账户的当前余额。我知道这可能是不可能的，但我想我会问是否有人知道什么？一个快速的谷歌没有出现任何体面的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:39:18.580

我相信有一家初创公司正在使用浏览器插件来做这件事——不记得是谁，但这可能会给你一些网络搜索的东西。（编辑：汇丰英国似乎通过 Yodlee.com[为这些人提供整合 - 也许值得调查？）。](http://lessaccounting.com/bank-integration)

一般情况下的问题是，出于明显的安全原因，用户将其凭据提供给第三方进行这些查询是违反标准 T&C 的。但是，如果用户有一个浏览器插件来登录他们的服务并从屏幕上抓取数据，那么从银行的角度来看，与实际登录自己的用户没有功能差异。

我应该认为一个基于模板的系统可以使刮板快速考虑屏幕设计更改，这在这里会有所帮助。如果将想法商业化，它可以从中央服务器下载这些更改。

附录：作为最后的想法，可能值得考虑的是，不提供 API 系统的银行可能自相矛盾地不如根本不提供 API 系统安全。评论中的@StuartLC 链接到一篇关于第三方系统的文章，该系统鼓励客户披露他们的完整安全细节——实际上是他们的银行“root 密码”。如果银行提供一个 API 系统，允许用户使用一组单独的凭据允许“仅读取交易”，那将更加安全。

# matlab - 通过 Matlab 或计算求解耦合微分方程

> ID：14156236
> 
> 赞同：0
> 
> 时间：2013-01-04T11:24:42.940
> 
> 标签：matlab, differential-equations

通过 Mat-lab 或计算求解耦合非线性微分方程

```
equation 1:   x'(t) = -a* x(t) /(x(t) + y(t))
equation 2:   y'(t) = -b* y(t) /(x(t) + y(t)) 
```

[我在mathematica](http://www.wolframalpha.com/input/?i=DSolve%5B%7Bx%27%5Bt%5D%20==%20-a%2ax%5Bt%5D%20/%28x%5Bt%5D%2by%5Bt%5D%29,%20y%27%5Bt%5D%20==%20-b%2ay%5Bt%5D%20/%28x%5Bt%5D%2by%5Bt%5D%29%7D,%20%7Bx,%20y%7D,%20t%5D)中尝试过，但得到了一个非常复杂的解决方案。

```
Solve[{x'[t] == -a* x[t] /(x[t] + y[t]), y'[t] == -b* y[t] /(x[t] + y[t])}, {x, y}, t] 
```

我该如何绘制它？

我的初始条件是

```
 x(0) = xo
 y(0) = yo 
```

此外，a 和 b 是常数。

在插入 a 和 b 的值之后，我必须绘制 x 和 y wrt t 。( a= 2 , b = 5 说)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:00:39.007

在这种情况下需要注意很多事情：

1.  您需要创建一个同时包含 a 和 b 的函数：

    ```
    function dy =soProblem(t,y,a,b)
        dy=[-a*y(1)/(y(1)+y(2)); -b*y(2)/(y(1)+y(2))];
    end 
    ```

2.  调用标准 ode 函数：

    ```
    a = 2;
    b = 5; tend = 10; x0 = 1; y0 = 2;
    [T,Y] = ode45(@(t,y)soProblem(t,y,a,b),[0 tend],[x0 y0]);
    plot (T,Y) 
    ```

3.  意识到你手上可能有一个[僵硬的方程式](http://en.wikipedia.org/wiki/Stiff_equation)。

4.  享受识别理想函数调用的乐趣：

    ```
    [T15,Y15] = ode15s(@(t,y)soProblem(t,y,a,b),[0 tend],[x0 y0]);
    [T23t,Y23t] = ode23t(@(t,y)soProblem(t,y,a,b),[0 tend],[x0 y0]);
    [T23tb,Y23tb] = ode23tb(@(t,y)soProblem(t,y,a,b),[0 tend],[x0 y0]);
    %note ode23s doesn't converge (or at least takes forever)
    plot (T,Y,T15,Y15,T23t,Y23t,T23tb,Y23tb) 
    ```

5.  理解为什么数学变得焦躁不安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:37:09.823

在数学中：尝试 ndsolve

在matlab中：

创建一个函数文件 yourfunction.m：

```
function [Y_prime]=yourfunction(t, Y)
    Y_prime=[-2*Y(1)./(Y(1) + Y(2)) -5*Y(2)./(Y(1) + Y(2))];
end 
```

接着

```
[T,Y] = ode45(yourfunction,[0 t_end],[x0 y0]);
plot(T,Y(:,1));
hold on
plot(T,Y(:,2)); 
```

# javascript - 获取拆分为字符串数组的对象的“类”属性

> ID：14156237
> 
> 赞同：2
> 
> 时间：2013-01-04T11:24:42.400
> 
> 标签：javascript, jquery, arrays, string, class

序言：我是意大利人，对不起我的英语不好。

所以这是一个问题：

考虑这样的 HTML 对象：

```
<div id="myDiv" class="c1 c2 c3 c4 c5"></div> 
```

如何使用 jquery 从“div”元素的“class”属性中获取字符串数组？

例子：

```
var a = $('#myDiv').getClassArray(); //Not working,just an example

return a;  //[c1,c2,c3,c4,c5] 
```

我以为我可以读取“类”属性然后拆分字符串，但它似乎太冗长，我想知道是否有更短更优雅的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T11:26:19.587

您需要`#`id[选择器](http://api.jquery.com/category/selectors/)并使用[split()](http://www.w3schools.com/jsref/jsref_split.asp)从字符串中获取数组。

**[现场演示](http://jsfiddle.net/rajaadil/zqN2G/)**

```
var a = $('#myDiv').attr('class').split(' '); 
```

您可以使用for 循环的jQuery [jQuery.each()](http://api.jquery.com/jQuery.each/)遍历数组。

```
var a = $('#myDiv').attr('class').split(' ');

$.each(a, function(index, item){
    alert(item);
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T11:37:03.163

新的标准[`classList`](http://www.w3.org/html/wg/drafts/html/master/dom.html#dom-classlist)属性将允许对 DOM 元素进行如此轻松的访问（例如，通过`$('#myDiv')[0].classList`jQuery），但它并没有被普遍实现。有关此标准的文档，请参见[此处](https://developer.mozilla.org/en-US/docs/DOM/element.classList)，或有关当前浏览器支持的[信息，请参见此处。](http://caniuse.com/#search=classlist)

[在错误 7378](http://bugs.jquery.com/ticket/7378)中建议为 jQuery 提供诸如 shim 之类的功能，但被拒绝了。

但是，您可以通过 shim 获得此类支持，例如[https://github.com/eligrey/classList.js](https://github.com/eligrey/classList.js)

**更新**：带有垫片的演示位于[http://jsfiddle.net/brettz9/WWs5B/1/](http://jsfiddle.net/brettz9/WWs5B/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T11:32:19.040

你为什么不试试这个：http: [//jsfiddle.net/egZ2z/](http://jsfiddle.net/egZ2z/)

```
var cls = $('#myDiv').attr('class');
var n = cls.split(' ')
alert(n); 
```

# tridion - Tridion UI 编辑多媒体组件

> ID：14156238
> 
> 赞同：7
> 
> 时间：2013-01-04T11:24:46.237
> 
> 标签：tridion, tridion-2011, tridion-ui

我在启用多媒体组件（即通过 Tridion UI 编辑图像组件）时遇到问题。当我使用具有图像字段的通用内容组件时，它可以正常工作，因为我得到下面的 JSON 对象：

```
<!-- Start Component Presentation: { 'ComponentID' : 'tcm:15-5444', 'ComponentModified' : '2012-12-27T12:07:29', 'ComponentTemplateID' : 'tcm:15-5364-32', 'ComponentTemplateModified' : '2012-12-27T11:30:49' } -->
    <div><!-- Start Component Field: {'XPath' : 'tcm:Content/custom:Content/custom:image[1]'} --><img  src="/Preview/_images/15-5366Hero%20Banner.jpg" alt="Banner SE"></div> 
```

但是，当直接将图像架构组件与组件模板一起使用时，会输出以下标签：

```
<!-- Start Component Presentation: { 'ComponentID' : 'tcm:15-5366', 'ComponentModified' : '2012-12-18T13:21:46', 'ComponentTemplateID' : 'tcm:15-5364-32', 'ComponentTemplateModified' : '2012-12-27T11:30:49' } -->
    <div><!-- Start Component Field: {'XPath' : 'tcm:Content/custom:Content/custom:Component.ID[1]'} --><img src="/_images/15-5366Hero%20Banner.jpg"    alt="Banner SE"></div> 
```

我知道我可能不需要使用“custom:Component”，因为它在 XML 中不存在，但你能看到我做错了什么吗？有没有人有任何直接在页面上使用多媒体组件并能够显示左侧图像选择侧边栏的经验？

问候， 比利

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:18:18.367

您粘贴的标记是关于组件字段的内联编辑。你不能将它用于其他任何事情。

您可以在 Tridion UI 中内联编辑图像组件的元数据字段，但不能上传图像的新版本。为此，您需要使用**Open in Form View**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T01:36:41.340

要[`Library Panel`](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/concept_A814053200534B6BBF7E88E88769EDC9)在 Experience Manager (XPM) 中获取，请从`Home`选项卡中选择`Insert Content`>`Insert Content`以访问左侧图像。

您的图像的多媒体模式需要有一个关联的组件模板（这是在组件模板的链接模式中设置的）。尽管您看起来还不错，因为您已经将图像作为组件演示文稿。

至少在我的虚拟机上，缩略图会自动出现。 ![体验管理器截图 -](../Images/317a96cb63bdcaa2a4d2c9585406ca6d.png "插入内容选项")

# android - 如何在android操作栏列表视图控件中不显示图标

> ID：14156239
> 
> 赞同：-1
> 
> 时间：2013-01-04T11:24:46.117
> 
> 标签：android

我在操作栏中使用列表视图控件来导航我的顶级视图。

类似于谷歌地图应用程序。

当我单击列表视图微调器标题（也充当页面标题）时，会显示我的选项 - 每个选项在左侧都有一个图标。

当我从列表视图中选择一个选项时，我需要在标题中显示该选项，但左侧​​没有图标。只有文字。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:30:00.097

您需要一个自定义的`Adapter`地方覆盖`getView()`和`getDropDownView()`. 在`getDropDownView()`你为一个带有图标的布局膨胀和在`getView()`你膨胀一个没有图标的布局时。

# php - 根据玩家id从数组中找到最重要的事件值

> ID：14156242
> 
> 赞同：-3
> 
> 时间：2013-01-04T11:25:00.920
> 
> 标签：php, arrays, multidimensional-array

`event`我想从一组玩家 id 的数组中找出最大值。有两组玩家 id 10125 和 10132。

我有一个数组，如下所示：

```
Array
(
[0] => Array
    (
        [event] => 200
        [playerid] => 10125
        [session] => 23131885ccc560bb6c8ead02eb4919c1
    )

[1] => Array
    (
        [event] => 199
        [playerid] => 10125
        [session] => 23131885ccc560bb6c8ead02eb4919c1
    )

[2] => Array
    (
        [event] => 198
        [playerid] => 10125
        [session] => 23131885ccc560bb6c8ead02eb4919c1
    )

[3] => Array
    (
        [event] => 197
        [playerid] => 10125
        [session] => 23131885ccc560bb6c8ead02eb4919c1
    )

[4] => Array
    (
        [event] => 196
        [playerid] => 10125
        [session] => 23131885ccc560bb6c8ead02eb4919c1
    )

[5] => Array
    (
        [event] => 31
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[6] => Array
    (
        [event] => 30
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[7] => Array
    (
        [event] => 29
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[8] => Array
    (
        [event] => 28
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[9] => Array
    (
        [event] => 29
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[10] => Array
    (
        [event] => 28
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[11] => Array
    (
        [event] => 28
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[12] => Array
    (
        [event] => 27
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[13] => Array
    (
        [event] => 26
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[14] => Array
    (
        [event] => 25
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[15] => Array
    (
        [event] => 24
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[16] => Array
    (
        [event] => 23
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[17] => Array
    (
        [event] => 25
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[18] => Array
    (
        [event] => 24
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[19] => Array
    (
        [event] => 23
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[20] => Array
    (
        [event] => 22
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[21] => Array
    (
        [event] => 21
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[22] => Array
    (
        [event] => 20
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[23] => Array
    (
        [event] => 19
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[24] => Array
    (
        [event] => 18
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

[25] => Array
    (
        [event] => 1
        [playerid] => 10132
        [session] => 5a87375972ab4734e600c2dc1cec2ded
    )

) 
```

所以结果像

```
[0] => Array
 (
    [event] => 200
    [playerid] => 10125
    [session] => 23131885ccc560bb6c8ead02eb4919c1
 )

[5] => Array
(
    [event] => 31
    [playerid] => 10132
    [session] => 5a87375972ab4734e600c2dc1cec2ded
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:30:20.923

您可以将数组从高到低排序，然后抓取第一项......

```
function cmp($a, $b)
{
    if ($a->playerId == $b->playerId) {
        return 0;
    }
    return ($a->playerId > $b->playerId) ? -1 : 1;
}

usort($array, "cmp"); 
```

# liferay - 在自定义 portlet 中使用组织选择

> ID：14156243
> 
> 赞同：1
> 
> 时间：2013-01-04T11:25:02.060
> 
> 标签：liferay, liferay-6

我想使用 Liferay 的组织`select/search`功能，例如通过控制面板（在用户和组织下）添加新用户时。

有谁知道该代码在哪里？试图掌握导航他们的源代码但找不到它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:27:29.507

所有 liferay OOTB portlet 的 JSP 都位于文件夹中[`portal-web/docroot/html/portlet`](https://github.com/liferay/liferay-portal/tree/6.1.x/portal-web/docroot/html/portlet "Portlet 的 JSP 和 Javascript 在 Github 上的源代码")。

并且所有实现类（服务实现）都驻留在[`portal-impl/src/com/liferay/portlet`](https://github.com/liferay/liferay-portal/tree/6.1.x/portal-impl/src/com/liferay/portlet "Portlet 的 Impl 类在 Github 上的源代码")相应的 portlet 中。

所以请记住这个约定，`Users & Organization`因为[`portal-web/docroot/html/portlet/users_admin`](https://github.com/liferay/liferay-portal/tree/6.1.x/portal-web/docroot/html/portlet/users_admin)你看不到任何名为`users`or`organizations`的文件夹`users_organization`，所以你最好的办法是查看`users_admin`文件夹内部，因为这个文件夹有[`user`](https://github.com/liferay/liferay-portal/tree/6.1.x/portal-web/docroot/html/portlet/users_admin/user)&[`organization`](https://github.com/liferay/liferay-portal/tree/6.1.x/portal-web/docroot/html/portlet/users_admin/organization)文件夹，其中包含特定的 JSP对于用户和组织。

在此文件夹中，您会发现不同的`*search.jsp`&`*search_results.jsp`这将是您可能正在寻找的。

我建议始终从[`view.jsp`](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-web/docroot/html/portlet/users_admin/view.jsp)特定 portlet 开始查找，因为这是我们将 portlet 添加到页面或第一次单击任何控制面板 portlet 时的第一个登录页面。很可能这`view.jsp`将包括您可能想要定制或从中获取想法的所有其他 JSP。

大多数时候，JSP 会引导您进入实现类，我们不能使用 liferay 的实现类（因为它们存在`portal-impl.jar`并禁止在 plugin-portlets 中使用此 jar），但我们可以使用`*Util.java`公开的不同类供我们使用像`UserLocalServiceUtil`,等`OrganizationLocalServiceUtil`_`OrganizationServiceUtil`

希望这为找出 Liferay 实现提供了线索。

# android - Android预编译器错误？

> ID：14156248
> 
> 赞同：18
> 
> 时间：2013-01-04T11:25:23.633
> 
> 标签：android, eclipse, adt

我面临一个非常烦人的问题。我想在我的项目中使用[滑动菜单](https://github.com/jfeinstein10/SlidingMenu)，经过漫长而令人沮丧的搜索后，我知道我必须将我的 eclipse + ADT 更新为新的才能正确导入该库，并且我的演示应用程序运行良好。

现在我想将它集成到我的项目中，所以我将我的项目导入到同一个工作区中，并且在导入它后我收到了以下错误。

```
Errors occurred during the build.
Errors running builder 'Android Pre Compiler' on project 'MyProject'.
java.lang.NullPointerException 
```

我浏览了许多网站以及一些类似[这样](https://stackoverflow.com/questions/9617830/eclipse-upgrade-not-working)或[这样](https://stackoverflow.com/questions/11804558/android-build-errors)的问题， 但没有发现任何具体的问题。我也尝试了可能的不同情况，但它们没有用。

所以我处于奇怪的情况，该库无法在旧 eclipse（Galileo + ADT v15）上导入，并且项目无法在新 eclipse（ADT Bundle eclipse + ADT v21）上导入。

有人请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T15:05:49.550

我认为我们遇到了 Giorgos Kylafas 提到的错误。幸运的是，谷歌在他们的预览频道上发布了 ADT 的更新，因为其他提到的解决方案都没有帮助我。

要安装更新，请按照 tnorbye 的评论 #20 中给出的说明进行操作： [http ://code.google.com/p/android/issues/detail?id=42051#c20](http://code.google.com/p/android/issues/detail?id=42051#c20)

这为我解决了问题。这是预览频道的 DirectLink：[http ://tools.android.com/preview-channel](http://tools.android.com/preview-channel)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-07T14:05:42.727

我相信您遇到错误[http://code.google.com/p/android/issues/detail?id=42051](http://code.google.com/p/android/issues/detail?id=42051)

您是否有任何名称中没有扩展名的文件，例如`README`？尝试为文件添加扩展名，例如`README`-> `README.txt`。

你使用颠覆吗？尝试安装软件包：

*   颠覆性 SVN JDT 忽略扩展
*   颠覆性的 SVN 团队提供者

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T08:25:09.943

当您引用了一个库项目并且您“关闭”该项目时，也会出现此问题。

因此，您可以尝试重新打开您可能提到的工作区中的任何已关闭项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T06:58:15.460

顺便一提，

对于那些不想安装包和其他东西的人..有快速修复....

1.  `svn`在您的项目文件夹中搜索并删除所有名为`SVN`（可能被隐藏）的文件夹。

2.  搜索`*.svn`并再次删除所有`.svn`扩展名文件

3.  再次导入您的项目。

**重要提示：**我说如果您赶时间，这是快速解决方案，这不是准确的最佳解决方案。它将清除您项目的“svn”的所有记录。

如果您不知道如何再次重新配置它，请安装上面提到的**Giorgos Kylafas**和**schmidiii**的答案中的软件包，这是完美的解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-21T08:31:56.347

它刚刚发生在我身上。我的项目取决于`android-support-v7-appcompat`哪个已关闭。每次按 时`Ctrl + S`，都会出现一个错误对话框。打开后`android-support-v7-appcompat`，我再也看不到对话框了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-09T19:29:59.910

我尝试从 Eclipse 中删除该项目，然后重新导入失败的项目。在那之后一切都很好。

# mongodb - 对于新的 MongoDB 用户来说，最重要的警告是什么？

> ID：14156250
> 
> 赞同：1
> 
> 时间：2013-01-04T11:25:26.027
> 
> 标签：mongodb, warnings, real-time

我开始开发第一个带有 mongodb 的 node.js 应用程序，该应用程序将在未来发展为实时应用程序。

我被警告过，mongo 很容易走错路，文档混乱等等。

*因此，为了缩小争论范围，我们可以谈谈 GNU/Linux 最新设置和 Node.js。请排除 RDBMS 与 NoSQL 的讨论。请包括使用 Mongo 设置的**真实生活**经验。*

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:40:29.357

这个列表是无穷无尽的，但这里有几点。

### MongoDB 是网络规模

[http://www.mongodb-is-web-scale.com/](http://www.mongodb-is-web-scale.com/)

### 始终嵌入从不关联

文档中实际支持的最大神话之一。

相反，您应该认真考虑嵌入，并且可能应该尽量避免嵌入超过 2 个嵌套级别，因为这会使您的生活变得困难，特别是如果您正在寻找对某些元素进行更新的原子性。

### MongoDB 完全不受 SQL 注入的影响

不正确，您可以使 MongoDB 查询以不应该的方式运行：http: [//docs.mongodb.org/manual/faq/developers/#how-does-mongodb-address-sql-or-query-injection](http://docs.mongodb.org/manual/faq/developers/#how-does-mongodb-address-sql-or-query-injection)

### 存储过程

MongoDB对此一无所知，而是依赖于您以这种方式设计数据库以避免像这样的微优化。

所以每次你：[http](http://dirolf.com/2010/04/05/stored-javascript-in-mongodb-and-pymongo.html) ://dirolf.com/2010/04/05/stored-javascript-in-mongodb-and-pymongo.html你正在杀死一只小猫（尤其是用`eval`），停止杀死小猫。

### 加入

在这里都没有，停止尝试通过 Map Reduce 来完成它，而只是学习 NoSQL。

### 工作集和内存管理

当心你在记忆中的内容以及 LRU 是如何工作的。MongoDB 没有自己的内存管理。请注意 MongoDB 用于`mmap`内存映射您的数据。

### 官方名单

[http://www.mongodb.org/display/DOCS/Gotchas](http://www.mongodb.org/display/DOCS/Gotchas)

这也是一个问题，因为其中一些点实际上是错误的：

> 您不能对超过 256G 的现有集合进行分片。

这仅适用于旧的 MongoDB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:34:11.940

我发现在使用 Mongo 时，我不得不在我正常的数据库模式设计之外思考。您不应该试图将您对数据库的先验知识强加到 Mongo 上。

我知道您提到要排除 RDBMS 与 NoSQL，但无论如何我觉得这是一个有效的观点。

乐于改变:-)，一旦我开始这样做，Mongo 对我来说似乎很自然。我真的很喜欢它的灵活性。

不要为适合 Mongo 做变通方法，按照 Mongo 的方式去做，你会发现它更容易。

# sqlite - sqlite - 年份更改时查询不起作用

> ID：14156252
> 
> 赞同：-1
> 
> 时间：2013-01-04T11:25:36.800
> 
> 标签：sqlite, strftime

我不擅长查询，我的 strftime 函数有问题。

```
SELECT SUM(QUANTITY) quantity, strftime('%m', CREATED_ON) month FROM OrderItemBIT  WHERE (strftime('%m/%Y',CREATED_ON) BETWEEN '08/2012' AND '01/2013') group by month 
```

当我运行上述查询时，我没有得到任何数据，即使这些日期范围内有数据，因为年份不同。

```
SELECT SUM(QUANTITY) quantity, strftime('%m', CREATED_ON) month FROM OrderItemBIT  WHERE (strftime('%m/%Y',CREATED_ON) BETWEEN '06/2012' AND '12/2012') group by month 
```

当我运行上述查询时，我得到了日期范围之间的数据。

```
SELECT SUM(QUANTITY) quantity, strftime('%m', CREATED_ON) month FROM OrderItemBIT  WHERE (strftime('%m/%Y',CREATED_ON) BETWEEN '01/2013' AND '12/2013') group by month 
```

当我运行上述查询时，我得到的数据不在该日期范围内，因为我也得到了 2012 年的数据。该查询只占用月份而不是年份。

谁能帮我解决这个问题！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:31:19.403

尝试这个：

```
SELECT SUM(QUANTITY) quantity, strftime('%m', CREATED_ON) month
FROM OrderItemBIT
WHERE (strftime('%Y%m',CREATED_ON) BETWEEN '201208' AND '201301')
GROUP BY month 
```

# wordpress - 将自定义元添加到帖子

> ID：14156253
> 
> 赞同：0
> 
> 时间：2013-01-04T11:25:40.123
> 
> 标签：wordpress

我的帖子要求用户以以下格式输入他们的身高 0'0"。这是一个自定义元值。

我需要添加一个额外的自定义字段，以英寸为单位添加高度。

如果用户改变了高度，这也需要以英寸为单位更新高度。

需要添加到functions.php 中吗？不太清楚如何做到这一点。

非常感谢刘易斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:51:26.550

可以遵循以下步骤：

1）在 save_post 钩子上，您可以以英寸为单位计算高度并更新帖子元表。（需要在functions.php中编码）

2) 以英寸为单位为高度创建自定义元值。（帖子元表中的条目）

save_post 每当创建或更新帖子或页面时运行，这可能来自导入、帖子/页面编辑表单、xmlrpc 或通过电子邮件发布。动作函数参数：帖子 ID 和帖子对象。

参考： [http ://codex.wordpress.org/Plugin_API/Action_Reference/save_post](http://codex.wordpress.org/Plugin_API/Action_Reference/save_post)

# asp.net - 从 gridview 中的评级控件获取当前速率

> ID：14156254
> 
> 赞同：0
> 
> 时间：2013-01-04T11:25:47.910
> 
> 标签：asp.net, ajax, gridview

我想从每个记录的网格视图中获取我当前的老鼠并将其保存在我的数据库中。但我不能像网格视图中的其他控件一样调用它。如何在网格视图中保存每一行的费率？这是我在数据库表中的记录 ID：

```
 int idx = Convert.ToInt32(e.CommandArgument);

    idx = idx - (GridView2.PageSize * GridView2.PageIndex);

    int ID = (int)GridView2.DataKeys[idx].Value; 
```

我每一行都需要这个：

```
int rating = rating2.CurrentRating; 
```

用于gridview的HTML代码：

```
<asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
                DataKeyNames="ID" DataSourceID="SqlDataSource1" Font-Names="Tahoma" 
                Font-Size="9pt" style="margin-left: 0px" Width="799px" GridLines="None">
                <Columns>
                    <asp:TemplateField>
                        <ItemTemplate>
                            <div style="width: 950px">
                                <table align="center" style="width: 100%;">
                                    <tr>
                                        <td align="center" colspan="3">
                                            <div class="box1">
                                                <div class="box-t">
                                                    <div class="b-l">
                                                    </div>
                                                    <div class="b-bg" dir="rtl">
                                                        <asp:Label ID="Label6" runat="server" Font-Names="Tahoma" 
                                                            Text='<%# Eval("Title") %>'></asp:Label>
                                                    </div>
                                                    <div class="b-r">
                                                    </div>
                                                </div>
                                                <div class="box-bg">
                                                    <div class="content">
                                                        <table style="width: 100%; height: 8px;">
                                                            <tr>
                                                                <td align="right">
                                                                    <div style="padding: 15px">
                                                                        <asp:Label ID="Label10" runat="server" Font-Names="Tahoma" ForeColor="Black" 
                                                                            Text='<%# Eval("Body") %>'></asp:Label>
                                                                    </div>
                                                                    <br />
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right">

                                                                    <br />

                                                                    <asp:Rating ID="Rating2" runat="server" CurrentRating="1" MaxRating="6" StarCssClass="ratingStar"
    WaitingStarCssClass="savedRatingStar" FilledStarCssClass="filledRatingStar" EmptyStarCssClass="emptyRatingStar" style="float: right;" />
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td align="right">
                                                                    <asp:Button ID="btnSubmit" runat="server" 
                                                                        CommandArgument="<%# Container.DataItemIndex %>" Font-Names="Tahoma" 
                                                                        Font-Size="9pt" oncommand="SubmitRating" Text="&#1576;&#1607; &#1575;&#1740;&#1606; &#1605;&#1591;&#1604;&#1576; &#1575;&#1605;&#1578;&#1740;&#1575;&#1586; &#1583;&#1607;&#1740;&#1583;" />
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                    &nbsp;
                                                </div>
                                                <div class="box-b">
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <asp:Label ID="Label8" runat="server" Font-Italic="False" Font-Names="Homa" 
                                                        Text="         &#1578;&#1575;&#1585;&#1740;&#1582; &#1576;&#1575;&#1585;&#1711;&#1584;&#1575;&#1585;&#1740; :"></asp:Label>
                                                    <asp:Label ID="Label11" runat="server" Font-Names="Homa" 
                                                        Text='<%# JulianToPersianDate((DateTime)Eval("Date")) %>'></asp:Label>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="center">
                                            &nbsp;</td>
                                        <td align="center">
                                            &nbsp;</td>
                                        <td align="center">
                                            &nbsp;</td>
                                    </tr>
                                </table>
                            </div>
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView> 
```

任何身体都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:43:38.690

您可以循环浏览您的gridview

```
foreach(GridViewRow row in GridView2.Rows)
{
    // here you'll get all rows with RowType=DataRow
    // others like Header are omitted in a foreach
} 
```

并访问您的所有列

```
foreach(GridViewRow row in GridView2.Rows)
{
    for(int i = 0; i < GridView2.Columns.Count, i++)
    {
        //String header = GridView2.Columns[i].HeaderText;
        String cellText = row.Cells[i].Text;
    }
 } 
```

同样，您可以在网格视图中使用查找控件，如下所示

```
foreach(GridViewRow row in gv.Rows)
{
    TextBox txtTotal = row.cells[0].Controls[0].FindControl("TOTAL") as TextBox;
    string value = txtTotal.Text;

    // Do something with the textBox's value
} 
```

同样，您必须`Rating2`在单元格中找到您并将其投入评级控制并获得其价值。

# objective-c - 放大比谷歌地图最大缩放更远。

> ID：14156260
> 
> 赞同：1
> 
> 时间：2013-01-04T11:26:07.740
> 
> 标签：objective-c, ios, xcode, ios5, mkmapview

我正在制作一个`MKMapView`并且`overlay`我并没有真正将地图用于其他任何事情，`coordinates`所以不需要查看道路或其他什么。

我遇到的问题是我`overlay`的地理区域很小，所以它阻止我放大到足够远才能看到`overlay`正确的地方。

有没有办法超越这个缩放限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:56:07.950

您是否尝试以编程方式增加*区域跨度*属性的**latitudeDelta**和**longitudeDelta ？**

 *```
CLLocationCoordinate2D coord1 = { region_x, region_y };
MKCoordinateSpan span = {.latitudeDelta = 1, .longitudeDelta = 1};
MKCoordinateRegion region = {coord1, span};
[_mapView setRegion:region animated:YES]; 
```

详情：[MKMapView 缩放和区域](https://stackoverflow.com/questions/1166444/mkmapview-zoom-and-region)*

# variables - 如何复制这个写行程序 200 次，而不需要我复制和粘贴它并再次烤箱，每次只改变一个古老的？

> ID：14156262
> 
> 赞同：0
> 
> 时间：2013-01-04T11:26:08.860
> 
> 标签：variables, vb.net-2010, procedure

我怎样才能复制这个代码只改变一个或两个变量？

```
Public Class Form1
    Dim ArrayFS(1, 196, 7) 
    Dim Customer(1, 196) As StreamWriter 
    Dim Profit As Decimal  
    Dim selectedIndex As Integer '
    Dim CustomerLoad(1, 196) As StreamReader

Private Sub BtnSave_Click(sender As System.Object, e As System.EventArgs) Handles BtnSave.Click
Dim Row As Integer = ChkLstRowA.SelectedIndex
        Select Case Row
            Case 0
                Customer(0, 0) = New StreamWriter("G:\theater seats\friday\A1Seat.txt")
                Customer(0, 0).Write(ArrayFS(0, 0, 0) & (" ") & ArrayFS(0, 0, 1) & (", ") & ArrayFS(0, 0, 2) & (", ") & ArrayFS(0, 0, 3) & (", ") & ArrayFS(0, 0, 4) & (", ") & ArrayFS(0, 0, 5) & (", ") & ArrayFS(0, 0, 6) & (", ") & ArrayFS(0, 0, 7))
                MsgBox("Data has been stored.")
                Customer(0, 0).Close()
        End Select
  End Sub
End Class 
```

# ruby-on-rails - 在侧边栏（a la WordPress）上显示某些字段和提交按钮的最简单方法？

> ID：14156263
> 
> 赞同：1
> 
> 时间：2013-01-04T11:26:10.687
> 
> 标签：ruby-on-rails

所以，我想存档这样的东西：

![在此处输入图像描述](../Images/70fa146fe3e8480a5977fcf2af2b23c6.png)

我想在边栏中有标签、图像字段、提交和另存为草稿提交按钮。

现在，结构是这样的：

![在此处输入图像描述](../Images/67ccea0f505f63a8497af561ded6a326.png)

**新的.html.erb：**

```
<% provide(:title, 'Create post') %>

<h1 class="navless-title">Create post</h1>

<%= form_for(@post, remote: true, :html => { :multipart => true }) do |f| %>
  <%= render 'fields', f: f %>
  <div class="form-actions">
    <%= f.submit "Publish", class: "publish btn btn-primary pull-left" %>
    <%= f.submit "Save Draft", class: "save-draft btn btn-default pull-left" %>
    <div class="busy pull-left"></div>
  </div>
<% end %> 
```

**字段.html.erb：**

```
<%= render 'shared/error_messages', object: f.object %>

<%= f.label :title %>
<%= f.text_field :title %>

<%= f.label :content %>
<%= f.text_area :content, id: "wysihtml5-textarea" %>

<%= f.label :tag_list, "Tags" %>
<%= f.text_field :tag_list, "data-pre" => @post.tags.map(&:attributes).to_json %>

<%= f.label :image %>
<%= f.file_field :image %>

<p class="status">
  <% if @post.id? && @post.status == "Draft" %>
    Status: <span class="label"><%= @post.status %></span>
  <% elsif @post.id? && @post.status == "Published" %>
    Status: <span class="label label-primary"><%= @post.status %></span>
  <% end %>
</p>

<%= render 'shared/editor_toolbar' %> 
```

所以，我不知道该怎么做；要么使用绝对定位，jQuery，要么将表单切成两半（不确定这是否可能）。

最简单的方法是什么？

# python - 从文件读取过程中获取总行数

> ID：14156270
> 
> 赞同：-3
> 
> 时间：2013-01-04T11:26:32.527
> 
> 标签：python

```
fileinput = open('tweets.txt', 'r')

for line in fileinput:

   lines = line.lower() 
```

从这里我怎么能采取整条线，而不仅仅是最后一条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:28:39.923

下面会给你一个清单：

```
fileinput = open('tweets.txt', 'r')
lines = [line.lower() for line in fileinput] 
```

如果这不是您想要的，请说明您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:29:37.767

问题是您正在使用赋值运算符`=`。

您需要将其更改为 a`+=`但您将丢失换行符`\n`。

我建议打开这样的列表：

```
fileinput = open('tweets.txt', 'r')

lines = []

for line in fileinput:

   lines.append(line.lower()) 
```

然后，您将在列表中包含所有行。

问候乔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:31:47.957

如果要转换所有行：

```
fileinput = open("tweets.txt", "r")
lowered = [l.lower() for l in fileinput] 
```

# c# - 有没有办法通过 ASP.NET MVC 3 razor 中的 html.actionlink 传递整个模型

> ID：14156272
> 
> 赞同：0
> 
> 时间：2013-01-04T11:26:43.890
> 
> 标签：c#, razor, asp.net-mvc-4

```
@Html.ActionLink("Reply", "BlogReplyCommentAdd", "Blog",
     new { blogPostId = blogPostId, replyblogPostmodel = Model,
     captchaValid = Model.AddNewComment.DisplayCaptcha },null) 
```

我的控制器：

```
public ActionResult BlogReplyCommentAdd(int blogPostId, BlogPostModel model, bool captchaValid)
{} 
```

在我的控制器中，我正在传递整个模型。但是属性的值是 null 直到到达 Action

博客帖子型号：

```
 [Validator(typeof(BlogPostValidator))]
public partial class BlogPostModel : BaseNopEntityModel
{
    public BlogPostModel()
    {
        Tags = new List<string>();
        Comments = new List<BlogCommentModel>();
        AddNewComment = new AddBlogCommentModel();

    }

    public string SeName { get; set; }

    public string Title { get; set; }

    public string Body { get; set; }

    public bool AllowComments { get; set; }

    public int NumberOfComments { get; set; }

    public DateTime CreatedOn { get; set; }

    public IList<string> Tags { get; set; }

    public IList<BlogCommentModel> Comments { get; set; }
    public AddBlogCommentModel AddNewComment { get; set; }

} 
```

无论如何我需要整个模型。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:32:31.807

您根本不会采用这种正确的方式。唯一一次像这样在查询字符串中传递整个模型数据是通过 GET 操作提交 HTML 表单时；即便如此，除非 HTTP 缓存不是问题，否则这并不理想。

在这种情况下，您已经在查询字符串中将博客文章的 ID 传递给了控制器方法——因此在控制器方法中，您可以检索博客文章模型，然后将其传递给视图。

*编辑*添加此答案后-@levelnis 的评论随即出现-他/他们所说的完全一样。

**更新**

想想看——如果你做到了，这就是你的网站的工作方式——那么任何人都可以通过在查询字符串中植入各种可怕的东西来在你的博客网站上“发布”内容，更不用说让你的网站成为 SEO 垃圾邮件发送者的游乐场等等。

# c# - 您可以使用 Selenium WebDriver 和 C# 更改 IE 文档模式吗？

> ID：14156273
> 
> 赞同：4
> 
> 时间：2013-01-04T11:27:02.903
> 
> 标签：c#, testing, selenium, selenium-webdriver

我正在使用 WebDriver 和 Selenium Server 2.28。我在 Windows 7 环境下运行它，IE 的版本是 9.0.8。

我想知道是否有任何方法可以使用 Selenium 2 在 IE 中强制兼容模式。我已经用谷歌搜索了这个，似乎没有很多关于这个的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:37:28.310

没有更多细节很难给出具体细节，但您可以使用特殊`<meta>`标签强制 IE 进入特定兼容模式：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

的值`EmulateIE7`将告诉 IE 评估`<!doctype>`IE7 就好像它是 IE7。其他有效值是`IE7`、`IE8`、`IE9`或`Edge`，它们将使用特定版本的行为。

请记住，这隐含的差异不一定与使用特定浏览器版本时 100% 相同（但它应该非常接近，尤其是在 JavaScript/DOM 和 HTML 方面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:30:16.870

在完成测试之前更改属性并强制 IE 以兼容模式打开怎么样？您需要以管理员身份运行。

# iphone - 如何在单击 UIButton 时扩展动态创建的 UIview

> ID：14156276
> 
> 赞同：0
> 
> 时间：2013-01-04T11:27:07.723
> 
> 标签：iphone, objective-c, ios

我已经创建了 dynamic并且`UIView`正在使用 subview 。我的要求是点击我需要在动态之间再显示一个。我需要知道如何在点击.`scrollview``UIView``UIbutton``UIButton``UIView``UIviews``UIView``UIbutton`

提前致谢。这是样品

```
 NSArray *subViews = [createIssueScroll subviews];
    NSLog(@"%@",subViews);
    NSInteger tag=[sender tag];
    NSLog(@"%d", tag);
    UIView *vw = [createIssueScroll viewWithTag:tag];
    [self createIssueSubView:[vw frame]];

    UIView *sVW = [createIssueScroll viewWithTag:(tag+1)];
     NSLog(@"%@", sVW);

    float y;
    y = sVW.frame.origin.y;
    sVW.frame = CGRectMake(0, y, sVW.frame.size.width, sVW.frame.size.height);
    NSLog(@"%f", y); 
```

代码说明

我已经通过编程方式创建了按钮，我将在上面的代码中详细解释

在第一行中，我已经获取了所有滚动视图子视图（动态创建的 UiViews）我有按钮标记值并添加了 UIsubviews 的方法（此子视图在单击 ui 按钮时显示）假设我单击了动态创建的第一个 Uiview 按钮，需要显示第一个动态 UIview 和第二个动态 UIview 之后的子视图被推向下侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:45:21.613

`subViews`使用查找`foreach`

```
UIView *firstView;
UIView *seconfView;

for(id currentview in scrollView.subviews)
{
    if([currentview isKindOfClass:[UIView class]])
    {
        UIView *view = (UIView *)currentview;

        if(view.tag == 1) //1 is your view tag
        {
            firstView = view;
        }
        if(view.tag == 2) //2 is your view tag
        {
            seconfView = view;
        }
    }
} 
```

现在您可以使用第一个和第二个视图 :)

# spring - 是否可以在不使用 ApplicationContextAware 的情况下检索具有原型范围的 Spring bean

> ID：14156278
> 
> 赞同：5
> 
> 时间：2013-01-04T11:27:08.437
> 
> 标签：spring, dependency-injection

使用 Spring 3.1。如果我想检索一个具有原型范围的 bean（即我每次都想要一个不同的类实例），是否可以在不必使用 ApplicationContextaware 类的情况下检索 bean？

这就是我目前的做法

```
@Component
@Qualifier("MyService")
public class MyServiceImpl implements MyService {

    @Override
    public void doSomething() {
        Blah blah = (Blah)ApplicationContextProvider.getContext().getBean("blah");
        blah.setThing("thing");
        blah.doSomething();
    }
}

@Component("blah")
@Scope("prototype")
public class Blah {
    ....
} 
```

其中 ApplicationContextProvider 实现了 ApplicationContextAware。

是否可以通过注释或简单的 Spring 配置来做到这一点，而不必使用 ApplicationContextAware 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:37:18.360

Spring有一些相当复杂的方法来实现你所追求的……

请参阅弹簧文档：[http ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-scopes-other-injection](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-scopes-other-injection)

在谷歌上搜索 spring 代理范围也抛出了一些结果......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:42:42.653

你真的不需要ApplicationContextAware。您只需要一个 BeanFactory （ApplicationContextAware 只是一种方便的获取方式）。

具有作用域原型的 bean 只是意味着每次调用 ApplicationContext.getBean 时都会创建一个新的 bean 实例。如果您尝试在单例中注入原型 bean，您的原型 bean 将被注入一次（因此不再是原型）。

如果你真的需要它，有一种叫做[方法注入](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-lookup-method-injection)的东西可以帮助你，但它比简单地调用 applicationContext.getBean() 更复杂。

# tree - 如何使特定级别的 SWT 树可编辑

> ID：14156279
> 
> 赞同：0
> 
> 时间：2013-01-04T11:27:18.403
> 
> 标签：tree, swt, rcp

我有 SWT 树，它有孩子。现在我想提供一个右键菜单，点击菜单时想让树的第一级可编辑（树的名称），如图所示。我想通过单击右键菜单或任何按钮使测试可编辑。

![在此处输入图像描述](../Images/e717413bbb6ff5fea6c1bf0974b57807.png)

已经尝试使用 EditingSupport 但无法弄清楚如何使其仅可编辑树的特定级别，甚至单击菜单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:33:09.130

你在用`TreeViewer`吗？如果是这样，您可以使用`TreeViewer#editElement(Object element, int column)`在您选择的任何元素上激活编辑器。

> **编辑1：**
> 
> 要在树查看器上创建菜单，请使用以下代码段：

```
MenuManager menuMgr = new MenuManager("#PopUp");
menuMgr.add(new Action("Rename action") {
    @Override
    public void run() {
        viewer.editElement(myObj, 0);
    }
});
Menu menu = menuMgr.createContextMenu(viewer.getTree());
viewer.getTree().setMenu(menu); 
```

# ios - 操作无法完成。（com.facebook.sdk 错误 5.）尝试使用 ID 获取详细信息时

> ID：14156281
> 
> 赞同：5
> 
> 时间：2013-01-04T11:27:44.027
> 
> 标签：ios, facebook, facebook-ios-sdk

我已经集成了支持 iOS6 的 facebook iOS SDK 3.1，因此我可以毫无问题地使用 facebook 获取所有查询，但有时当我查询以获取事件的详细信息及其 ID 时，会出现以下错误：

HTTP 状态码：400 操作无法完成。（com.facebook.sdk 错误 5。）

当我注销并再次登录时，它工作得很好，但我不希望用户在发生此类错误时因为这样做而感到沮丧。

我一直在验证问题的原因，但没有运气，因为它不会不断复制。

在此先感谢您提供有关此问题的宝贵线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T11:00:57.767

```
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState)state
                      error:(NSError *)error
{    switch (state) {
        case FBSessionStateOpen: {
            [[FBRequest requestForMe] startWithCompletionHandler:
             ^(FBRequestConnection *connection,
               NSDictionary<FBGraphUser> *user,
               NSError *error) {
                 if (error) {
                     //error
                 }else{
                     NSString *email=[user objectForKey:@"email"];
                     NSString *name=[user objectForKey:@"name"];

                     [[NSNotificationCenter defaultCenter]postNotificationName:@"Loginwithfacebook" object: [NSArray arrayWithObjects:email,name, nil]];
                 }
             }];

                   }
            break;
        case FBSessionStateClosed: {
            [FBSession.activeSession closeAndClearTokenInformation];
            }
            break;
        case FBSessionStateClosedLoginFailed: {
            [SVProgressHUD dismiss];
        }
            break;
        default:
            break;
    }
} 
```

# javascript - 嵌套点击事件冒泡问题

> ID：14156287
> 
> 赞同：4
> 
> 时间：2013-01-04T11:28:13.617
> 
> 标签：javascript, jquery

我正在处理一个嵌套的单击事件（有大量图像，有些带有子图像，有些没有）。

Onclick 所有图像（子图像、父图像和非父图像），它们应该显示在一个 diff css div 中，然后如果再次单击，则会无限期地删除它们自己。

到目前为止，此代码适用于父图像和非父图像，但冒泡使子图像显示父图像。

如果我在子函数之前返回 false 以停止冒泡，它将破坏数组中更靠后的父图像和非父图像的功能（子图像在新的弹出 css 中，而不是列表中），但是如果我没有停止冒泡，嵌套的点击事件不会运行。

有人看到解决这个烂摊子的好方法吗？

```
// Click an image, and it will change it in the demo css class panel
$('.item-button').data('status','not_clicked');
$('.item-button').click(function(event) {
    var layerID = $(this).attr('data-layer'); //these do not correspond to actual layers of nesting.
    var itemID = $(this).attr('data-item');
    var itemmulti = $(this).attr('data-multi'); //this value def works to recognize parent from other non-parent items (not children).
    var clayerID = $(this).attr('data-clayer'); 
    var citemID = $(this).attr('data-citem');   //child item 1.

    if(( $(this).data('status') == 'clicked') || itemID == 0) {
        var imageSrc = $(this).parent().find('img').attr('id');
        $(layerID).attr('src', imageSrc);
    } else  {
        $(this).data('status','clicked');
        var imageSrc = $(this).parent().find('img').attr('id');
        $(layerID).attr('src', imageSrc);

        if (itemmulti != 0) {
            //begin headache.
            document.getElementById('child-' + itemID).style.display = "inline-block";

            //this is where a separate click function for children items begins.
            $('.item-sub1').data('status','unclicked');
            $('.item-sub1').click(function(event) {

            if(( $(this).data('status') == 'click') || citemID == 0) {
                var imageSrc = $(this).parent().find('img').attr('id');
                $(selector).attr('src', imageSrc);
            } else {
                $(this).data('status','click');
                var imageSrc = $(this).parent().find('img').attr('id');
                $(clayerID).attr('src', imageSrc);
            }
            return false;
            });
        }
    }
}); 
```

```
<img button title id alt />
<input radio id="layer-{ID}-{item.ID}-radio" name="layer-{ID}" value="{item.ID}" class="item-button" data-multi="{item.PARENT}" data-layer="{ID}" data-item="{item.ID}" />
<!-- IF item.CHILD1 != 0 -->
<div id="child-{item.ID}" style="width: 300px; position: absolute; display: none;">
    <img button here title data-layer="{item.CLAYER1}" data-item="{item.CHILD1}">
    <input radio id="layer-{item.CLAYER1}-{item.CHILD1}-radio" name="layer-{item.CLAYER1}" value="{item.CHILD1}" style="display: none;" class="item-sub1" data-clayer="{item.CLAYER1}" data-citem="{item.CHILD1}" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T11:56:15.690

我认为要防止事件冒泡 DOM 树并防止任何父处理程序收到事件通知，您需要做的是使用`stopPropagation()`方法。

```
$('.item-button').click(function(event) {
     event.stopPropagation();
     // your code... 
```

欲了解更多信息：1\. [jquery](http://api.jquery.com/event.stopPropagation/) 2\. [javascript](http://www.quirksmode.org/js/events_order.html)

# perl - 如何在 xml 树枝中拆分父标签？

> ID：14156289
> 
> 赞同：1
> 
> 时间：2013-01-04T11:28:26.300
> 
> 标签：perl

我是 xml-twig 的新手，如何拆分父标签？

文件：

```
<xml>
   <p class="indent">text text incluce <div>text</div> ateas</p>
   <p class="text">text text incluce <div>text</div> ateas</p>
</xml> 
```

我需要输出为：

```
<xml>
   <p class="indent">text text incluce</p>
   <div>text</div>
   <p class="indent">ateas</p>
   <p class="text">text text incluce</p>
    <div>text</div>
   <p class="text">ateas</p>
</xml> 
```

如何拆分标签？

```
use strict;
use XML::Twig;

open(my $output , '>', "split.xml") || die "can't open the Output $!\n";

my $xml_twig_content = XML::Twig->new(
        'p' => \&split, )

$xml_twig_content->parsefile("sample.xml");
$xml_twig_content->print($output);

sub split{
        my ($xml_twig_content, $p) = @_;

} 
```

如何拆分标签？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:45:33.307

可能有几种方法可以做到这一点。以下代码使用`wrap_in`，它在所有文本节点周围添加一个新`<p>`的，然后`erase`删除原来的`<p>`. `atts`用于将原始属性复制`<p>`到新属性。

```
#!/usr/bin/perl
use warnings;
use strict;

use XML::Twig;

open(my $output , '>', "split.xml") || die "can't open the Output $!\n";

my $xml = XML::Twig->new( twig_handlers => { p => \&split_tag } );

$xml->parsefile("1.xml");
$xml->print($output);

sub split_tag {
    my ($twig, $p) = @_;
    $_->wrap_in('p', $p->atts) for $p->children('#TEXT');
    $p->erase;
} 
```

顺便说一句，请发布可运行的代码。您的示例代码遗漏了重要部分（tg`twig_handlers`或分号）。

对于您的附加约束，您可以按如下方式弯曲脚本：

```
sub split_tag {
    my ($twig, $p) = @_;
  CHILD:
    for my $ch ($p->children(sub {'div' ne shift->name})) {
        my $wrap = $ch->wrap_in('p', $p->atts);
        my $prev = $wrap->prev_sibling or next CHILD;
        $prev->merge($wrap) if 'p' eq $prev->name;
    }
    $p->erase;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:30:59.537

很大程度上取决于完整 XML 数据的性质。例如，如果您期望嵌套`<p>`元素，则解决方案要复杂得多，并且需要更好地定义行为。

但是，该程序似乎可以满足您的需要，并且可以处理您的示例数据。与在您自己的代码中一样，`split`子例程处理遇到的每个`<p>`元素。如果元素只包含文本，则元素保持不变，否则子元素将被分离并用于在 array 中创建替换节点列表`@split`。此列表中的文本节点通过创建父`<p>`元素的克隆并将文本粘贴为其内容进行转换。一旦所有文本节点都被修改，调用将`replace_with`用新的元素列表替换原始`<p>`元素。

请注意，该`print_to_file`方法避免了单独打开输出文件的需要。

```
use strict;
use warnings;

use XML::Twig;

my $twig = XML::Twig->new(
  twig_handlers => { p => \&split },
);

$twig ->parsefile('sample.xml');
$twig->print_to_file('split.xml', pretty_print => 'indented');

sub split{
  my ($twig, $p) = @_;
  return if $p->contains_only_text;

  my @split = $p->cut_children;
  for my $child (grep $_->is_pcdata, @split) {
    my $text = $child;
    $child = $p->copy;
    $text->paste(last_child => $child);
  }

  $p->replace_with(@split);
} 
```

**输出**

```
<xml>
  <p class="indent">text text incluce </p>
  <div>text</div>
  <p class="indent"> ateas</p>
  <p class="text">text text incluce </p>
  <div>text</div>
  <p class="text"> ateas</p>
</xml> 
```

# hibernate - Hibernate - 使用复合 ID 连接表

> ID：14156293
> 
> 赞同：0
> 
> 时间：2013-01-04T11:28:52.287
> 
> 标签：hibernate, many-to-many, composite-id

我有一个人员表 ( `PersonID`) 和一个地址表 ( `AddressID`)。我想创建一个名为`Person_Address`which maps`Person->Adress`使用`ManyToMany`关系的新联接表，并且我必须将主键指定为两个主键 ( `PersonID - AddressID`) 的组合。

如何使用 Hibernate HBM 语法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:47:02.443

在 Hibernate 中使用`@ManyToMany`并忘记连接表。连接表将存在于您的数据库中，但不在您的代码中，Hibernate 知道如何处理它。

例子：

Person 类（作为关系的所有者）：

```
@ManyToMany(targetEntity = Address.class, cascade = { CascadeType.PERSIST, CascadeType.MERGE }, fetch = fetchType.LAZY)
@JoinTable(name = "person_address", joinColumns = @JoinColumn(name = "PersonID"), inverseJoinColumns = @JoinColumn(name = "AddressID"))
List<Address> addresses; 
```

地址类（如果需要）：

```
@ManyToMany(cascade = { CascadeType.PERSIST, CascadeType.MERGE }, mappedBy = "addresses", targetEntity = Person.class, fetch = FetchType.LAZY)
List<Person> persons; 
```

编辑：

此[链接](http://www.mkyong.com/hibernate/hibernate-many-to-many-relationship-example/)将帮助您进行多对多 XML 映射。

# c++ - 基本的 c++ 程序，我做错了什么？

> ID：14156296
> 
> 赞同：-1
> 
> 时间：2013-01-04T11:29:00.080
> 
> 标签：c++

我是编程新手，在网站上找到了这个练习。我试着完成它，这就是我已经走了多远。

有人可以告诉我我是否在正确的方向上，如果不是，有什么问题？还请解释您编写的任何代码。“编写一个打印从 1 到 100 的数字的程序。但是对于三的倍数打印 Fizz”而不是数字，对于五的倍数打印“Buzz”。对于同时是三和五的倍数的数字，请打印“FizzBu​​zz”。

```
 for (int i = 0; i < 100;i++ ){
        while (i * 3 ){
            cout << "Fizz"<<endl;
            while (i * 5){
                cout <<"Buzz"<<endl;
                while ( 1 * 3 && 1*5){
                   cout <<"FizzBuzz"<<endl;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T11:31:15.387

你在处理错误的事情。为什么需要`while (i*3)`? 你知道 a`while`是做什么的吗？那应该检查其余部分吗？

提示 - 使用条件 ( `if`) 和`%`运算符来检查余数。

没有完整的代码给你！学习调试！（这是您现阶段可以做的最好的事情）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:30:59.870

代替

```
while (i * 3 ) { 
```

和

```
if (i % 3 == 0) { 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:45:00.223

1.  用 % 检验余数 0 的可分性检验
2.  whiles 应该是 ifs
3.  For 循环将打印 0 到 99

尝试这样的事情：

```
for (int i=1; i <= 100; i++) {       
    if ((i%3 != 0) && (i%5 != 0)) {
        cout << i;
    }
    else
    {    
        if (i%3 == 0) {
            cout << "Fizz";
        }

        if (i%5 == 0) {
            cout << "Buzz";
        }
    }
    cout << endl;
} 
```

# forms - 如何在提交表单时使用 dodirect payment paypal？

> ID：14156299
> 
> 赞同：2
> 
> 时间：2013-01-04T11:29:11.073
> 
> 标签：forms, payment-gateway, paypal, submission

提交表单后，我必须使用 dodirect 付款方式。该表格将在网站上显示所有卡的详细信息，例如卡类型（visa 或 master）、卡卡号、安全号码、到期日期、卡上的姓名、地址、州、邮政、国家、电话、电子邮件等。

我搜索了如何使用dodirect方法，发现如下

```
<?php

/** DoDirectPayment NVP example; last modified 08MAY23.
 *
 *  Process a credit card payment. 
*/

$environment = 'sandbox';   // or 'beta-sandbox' or 'live'

/**
 * Send HTTP POST Request
 *
 * @param   string  The API method name
 * @param   string  The POST Message fields in &name=value pair format
 * @return  array   Parsed HTTP Response body
 */
function PPHttpPost($methodName_, $nvpStr_) {
    global $environment;

    // Set up your API credentials, PayPal end point, and API version.
    $API_UserName = urlencode('my_api_username');
    $API_Password = urlencode('my_api_password');
    $API_Signature = urlencode('my_api_signature');
    $API_Endpoint = "https://api-3t.paypal.com/nvp";
    if("sandbox" === $environment || "beta-sandbox" === $environment) {
        $API_Endpoint = "https://api-3t.$environment.paypal.com/nvp";
    }
    $version = urlencode('51.0');

    // Set the curl parameters.
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $API_Endpoint);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);

    // Turn off the server and peer verification (TrustManager Concept).
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);

    // Set the API operation, version, and API signature in the request.
    $nvpreq = "METHOD=$methodName_&VERSION=$version&PWD=$API_Password&USER=$API_UserName&SIGNATURE=$API_Signature$nvpStr_";

    // Set the request as a POST FIELD for curl.
    curl_setopt($ch, CURLOPT_POSTFIELDS, $nvpreq);

    // Get response from the server.
    $httpResponse = curl_exec($ch);

    if(!$httpResponse) {
        exit("$methodName_ failed: ".curl_error($ch).'('.curl_errno($ch).')');
    }

    // Extract the response details.
    $httpResponseAr = explode("&", $httpResponse);

    $httpParsedResponseAr = array();
    foreach ($httpResponseAr as $i => $value) {
        $tmpAr = explode("=", $value);
        if(sizeof($tmpAr) > 1) {
            $httpParsedResponseAr[$tmpAr[0]] = $tmpAr[1];
        }
    }

    if((0 == sizeof($httpParsedResponseAr)) || !array_key_exists('ACK', $httpParsedResponseAr)) {
        exit("Invalid HTTP Response for POST request($nvpreq) to $API_Endpoint.");
    }

    return $httpParsedResponseAr;
}

// Set request-specific fields.
$paymentType = urlencode('Authorization');              // or 'Sale'
$firstName = urlencode('customer_first_name');
$lastName = urlencode('customer_last_name');
$creditCardType = urlencode('customer_credit_card_type');
$creditCardNumber = urlencode('customer_credit_card_number');
$expDateMonth = 'cc_expiration_month';
// Month must be padded with leading zero
$padDateMonth = urlencode(str_pad($expDateMonth, 2, '0', STR_PAD_LEFT));

$expDateYear = urlencode('cc_expiration_year');
$cvv2Number = urlencode('cc_cvv2_number');
$address1 = urlencode('customer_address1');
$address2 = urlencode('customer_address2');
$city = urlencode('customer_city');
$state = urlencode('customer_state');
$zip = urlencode('customer_zip');
$country = urlencode('customer_country');               // US or other valid country code
$amount = urlencode('example_payment_amuont');
$currencyID = urlencode('USD');                         // or other currency ('GBP', 'EUR', 'JPY', 'CAD', 'AUD')

// Add request-specific fields to the request string.
$nvpStr =   "&PAYMENTACTION=$paymentType&AMT=$amount&CREDITCARDTYPE=$creditCardType&ACCT=$creditCardNumber".
            "&EXPDATE=$padDateMonth$expDateYear&CVV2=$cvv2Number&FIRSTNAME=$firstName&LASTNAME=$lastName".
            "&STREET=$address1&CITY=$city&STATE=$state&ZIP=$zip&COUNTRYCODE=$country&CURRENCYCODE=$currencyID";

// Execute the API operation; see the PPHttpPost function above.
$httpParsedResponseAr = PPHttpPost('DoDirectPayment', $nvpStr);

if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"])) {
    exit('Direct Payment Completed Successfully: '.print_r($httpParsedResponseAr, true));
} else  {
    exit('DoDirectPayment failed: ' . print_r($httpParsedResponseAr, true));
}

?> 
```

我不知道如何在提交我网站上的表单时使用此代码。任何人都可以在提交表单后帮助我如何使用它。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T08:00:03.810

这真的不是一个很好的构建功能。它基本上是希望您只填写函数中的值而不是传递它们。这是一个非常粗略的示例，您可以根据评论看到它最后一次更新是在 2008 年。

但是，如果您想使用它，您可以简单地填写所有那些显示诸如“my_api_username”之类的内容的占位符，其中包含您要实际包含的数据。

如果您想要更容易使用的东西，我建议使用我开发并维护多年的这个[PHP PayPal 库。](http://www.angelleye.com/download-angell-eye-php-class-library-for-paypal/)它是最新的并且包含用于运行 DoDirectPayment 的直接示例。您可以在几分钟内启动并运行它。

如果您对此感兴趣，我也会通过屏幕共享提供 30 分钟的免费培训。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T04:56:07.067

[实际上，在https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index#expresscheckoutnew](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index#expresscheckoutnew)上，作为官方 SDK 的一部分，有可用于 DoDirectPayment 的示例

建议使用官方 SDK 并查看其中的示例。如有任何问题，请在此处回复或在[https://github.com/paypal/merchant-sdk-php/issues打开问题](https://github.com/paypal/merchant-sdk-php/issues)

# mule - mule-standalone-3.3.1 无法在 Windows 7 上启动

> ID：14156300
> 
> 赞同：3
> 
> 时间：2013-01-04T11:29:14.360
> 
> 标签：mule

在 Windows 7 中启动 mule 服务器时出现以下问题。

我已经设置`JAVA_HOME`并`MULE_HOME`正确。

```
MULE_HOME is set to C:\BAM\Linux\fresh\mule-standalone-3.3.1\mule-standalone-3.3.1 Running in console/foreground mode by default, use Ctrl-C to exit...
--> Wrapper Started as Console Launching a JVM... Unable to execute Java command.  The system cannot find the file specified. (0x2)
    "java" -Dmule.home="C:\BAM\Linux\fresh\mule-standalone-3.3.1\mule-standalone-3.3.1"
-Dmule.base="C:\BAM\Linux\fresh\mule-standalone-3.3.1\mule-standalone-3\. :MaxPermSize=128m "-Djava.endorsed.dirs=C:\BAM\Linux\fresh\mule-standalone-3.3.1\mule-standalone-3.3.1\lib\endorsed"
-Xmx512m -Djava.library.path="%LD_LIBRARY_P
3.3.1\mule-standalone-3.3.1/lib/boot" -classpath "%MULE_LIB%;C:\BAM\Linux\fresh\mule-standalone-3.3.1\mule-standalone-3.3.1/conf;C:\BAM\Linux\fresh\mule-standal /commons-cli-1.2.jar;C:\BAM\Linux\fresh\mule-standalone-3.3.1\mule-standalone-3.3.1/lib/boot/log4j-1.2.16.jar;C:\BAM\Linux\fresh\mule-standalone-3.3.1\mule-stan .3.1.jar;C:\BAM\Linux\fresh\mule-standalone-3.3.1\mule-standalone-3.3.1/lib/boot/mule-module-logging-3.3.1.jar;C:\BAM\Linux\fresh\mule-standalone-3.3.1\mule-sta t-3.3.1.jar;C:\BAM\Linux\fresh\mule-standalone-3.3.1\mule-standalone-3.3.1/lib/boot/wrapper-3.2.3.jar"
-Dwrapper.key="IqO3S6Ox0DeEiEkH" -Dwrapper.port=32000 -Dw port.max=31999 -Dwrapper.pid=3224 -Dwrapper.version="3.2.3"
-Dwrapper.native_library="wrapper" -Dwrapper.cpu.timeout="10" -Dwrapper.jvmid=1 org.mule.module.rebo Critical error: wait for JVM process failed Press any key to continue . . . 
```

环境

操作系统 - Windows 7 64 位

JAVA - 1.7.0_10 64 位

有人可以帮我解决这个问题。

谢谢，卡松。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T11:58:29.060

看起来mule找不到java可执行文件。解决此问题的一种简单方法是编辑**${mule.home}/conf/wrapper.conf**文件并指定属性**wrapper.java.command**的整个路径，即：

```
wrapper.java.command=c:/java7/jre/bin/java 
```

附带说明一下，您不应再设置**MULE_HOME** env var，因为 mule 会在启动时自行设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T16:39:28.390

是你的 %JAVA_HOME%\bin; 设置为`Path`变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T17:42:05.843

我有同样的错误。但就我而言，我将 MULE_HOME 变量设置为错误的路径。一旦我删除了该变量，错误就解决了，服务器启动了。

# php - Magento 在结帐时跳过两个步骤

> ID：14156308
> 
> 赞同：1
> 
> 时间：2013-01-04T11:29:43.787
> 
> 标签：php, magento, magento-1.6

当访客用户已经添加了地址时，我必须从第 1 步（选择结帐方式）转到送货方式步骤。我在方法 saveCheckoutMethod 中的覆盖类 Mage_Checkout_Model_Type_Onepage 中尝试了以下代码。然而，这不起作用，客人转到帐单地址步骤，但消息“设置步骤 shipping_method”。打印到 Magento 日志。有没有办法直接进入运输方法步骤并以编程方式跳过两个地址步骤？

```
public function saveCheckoutMethod($method)
{
    if (empty($method)) {
        return array('error' => -1, 'message' => $this->_helper->__('Invalid data.'));
    }

    $this->getQuote()->setCheckoutMethod($method)->save();

    $quote = $this->getQuote();
    if($quote->getBillingAddress()->validate() && $quote->getShippingAddress()->validate())
    {           
        $this->getCheckout()
            ->setStepData('billing', 'complete', false)
            ->setStepData('shipping', 'complete', false)
            ->setStepData('shipping_method', 'allow', true);
        Mage::log("Setting step shipping_method.");
    }
    else 
    {
        $this->getCheckout()->setStepData('billing', 'allow', true);
    }

    return array();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:18:27.320

您可以看一下`Mage_Checkout_OnepageController::saveBillingAction()`方法，有一个示例如何跳转到另一个步骤（它跳过了送货地址步骤）

```
} elseif (isset($data['use_for_shipping']) && $data['use_for_shipping'] == 1) {
    // Here you can specify step name
    $result['goto_section'] = 'shipping_method';

    $result['update_section'] = array(
        'name' => 'shipping-method',
        'html' => $this->_getShippingMethodsHtml()
    );

    $result['allow_sections'] = array('shipping');
    $result['duplicateBillingInfo'] = 'true'; 
```

# c# - C# 无法将撇号保存到 XML

> ID：14156309
> 
> 赞同：3
> 
> 时间：2013-01-04T11:29:57.600
> 
> 标签：c#, xml

我试图将撇号 ' 保存到 XML，但总是出错。

当我想保存新项目时，首先我试图找到它。我用这个

```
XmlNode letters = root.SelectSingleNode("//letters");
XmlNode oldFileLetter = letters.SelectSingleNode("letter[@name='"+letterName+"']"); 
```

但是当`letterName`包含撇号'我得到一个错误，那个路径没有关闭

我还发现这个[c# parsing xml with and apostrophe throws exception](https://stackoverflow.com/questions/4479066/c-sharp-parsing-xml-with-and-apostrophe-throws-exception)但是当我按照 Steven 所说的进行操作时，撇号是可以的，但是双引号会抛出异常。

我也需要通过 " 和 '。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:35:32.283

您也可以将撇号替换为`&apos;`

```
letterName = letterName.Replace("'", "&apos;");

XmlNode letters = root.SelectSingleNode("//letters");
XmlNode oldFileLetter = letters.SelectSingleNode("letter[@name='"+letterName+"']"); 
```

看看这个关于 xml 文件中特殊字符的[线程。](https://stackoverflow.com/questions/1091945/where-can-i-get-a-list-of-the-xml-document-escape-characters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:32:31.370

您是否尝试过这样逃避它：

```
\' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T11:36:02.257

这里的问题是您的 XPath 已经有一个撇号指示 XPath 中字符串的开头，因此您的 letterName 值中的任何撇号都将被解释为关闭字符串值。

与 Felipe 的建议相反，XPath 本身不是 XML，因此用撇号替换是`&apos;`行不通的。它将避免该错误，但如果 letterName 包含撇号，您将找不到您要查找的节点。`"'"`此外，在 C#和之间没有区别`"\'"`，所以这也无济于事。

我建议遍历字母元素并确定 @name 具有您要查找的值的元素：

```
XmlNode oldFileLetter = null;
foreach(XmlNode letterNameNode in letters.SelectNodes("letter/@name"))
{
    if(letterNameNode.Value.Equals(letterName))
    {
        oldFileLetter = letterNameNode.ParentNode;
        break; 
    }
} 
```

我知道的唯一其他方法涉及装配系统以允许在路径中定义和使用 XPath 变量，但这通常是矫枉过正的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T11:38:12.443

我认为你必须把它写成一个实体......我不确定，但我记得以前遇到过这个问题。

看看这个维基百科线程...... [http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T11:36:53.923

```
const string apo = "\'";
XmlNode letters = root.SelectSingleNode("//letters");
XmlNode oldFileLetter = letters.SelectSingleNode("letter[@name="+apo+letterName+apo+"]") 
```

# sql-server - SQL WHERE NOT EXISTS（跳过重复项）

> ID：14156312
> 
> 赞同：0
> 
> 时间：2013-01-04T11:30:19.717
> 
> 标签：sql-server

您好，我正在努力获取下面的查询。我想要的是返回具有唯一名称和姓氏的行。我得到的是所有重复的行

这是我的 sql

```
DECLARE @tmp AS TABLE (Name VARCHAR(100), Surname VARCHAR(100))

INSERT INTO @tmp

SELECT CustomerName,CustomerSurname FROM Customers
WHERE 
NOT EXISTS 
(SELECT Name,Surname 
 FROM @tmp 
 WHERE Name=CustomerName 
 AND ID Surname=CustomerSurname
GROUP BY Name,Surname ) 
```

请有人在这里指出我正确的方向。//绝望（我也尝试过不使用 GROUP BY 但得到相同的结果）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:31:58.050

`DISTINCT`会成功的。

```
SELECT DISTINCT CustomerName, CustomerSurname
FROM Customers 
```

[演示](http://sqlfiddle.com/#!3/efb268/1/0)

如果您只想要真正没有重复的记录（而不是将重复表示为单个记录），您可以使用`GROUP BY`and `HAVING`：

```
SELECT CustomerName, CustomerSurname
FROM Customers
GROUP BY CustomerName, CustomerSurname
HAVING COUNT(*) = 1 
```

[演示](http://sqlfiddle.com/#!3/efb268/3/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:40:18.650

当您的@Tmp 表仍然为空时，您是否正在这样做？如果是这样：您的整个“选择”在“插入”语句之前被完全评估，它不会执行“运行查询并添加一行、插入该行、运行查询并获取另一行、插入该行等。 "

如果您只想插入唯一的客户，请在不存在子句中使用相同的“客户”表

```
SELECT c.CustomerName,c.CustomerSurname FROM Customers c
WHERE 
NOT EXISTS 
(SELECT 1
 FROM Customers c1
 WHERE c.CustomerName = c1.CustomerName 
 AND c.CustomerSurname = c1.CustomerSurname
 AND c.Id <> c1.Id) 
```

如果要插入一组独特的客户，请使用“distinct”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:38:03.770

首先，我认为@David 的答案是你想要的。但是重新阅读您的评论，也许您想要所有姓名和姓氏的组合：

```
SELECT n.CustomerName, s.CustomerSurname
FROM 
    ( SELECT DISTINCT CustomerName
      FROM Customers
    ) AS n
  CROSS JOIN
    ( SELECT DISTINCT CustomerSurname
      FROM Customers
    ) AS s ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-04T21:49:00.217

通常，如果您正在执行 WHERE NOT EXISTS 或 WHERE EXISTS 或 WHERE NOT IN 子查询，则应使用所谓的“相关子查询”，如上面 ypercube 的答案中所示，其中表别名用于内部和外部表（内表连接到外表）。超立方体举了一个很好的例子。

通常，NOT EXISTS 优于 NOT IN（除非 WHERE NOT IN 是从您无法加入的完全不相关的表中选择的。）

有时，如果您想执行 WHERE EXISTS（从列中没有重复值的小表中选择），您也可以通过在 EXISTS 中所需的列上将主查询与该表连接起来来做同样的事情。并不总是最好或最安全的解决方案，如果该表中有很多行，可能会使查询变慢，并且如果连接表中的该列有 dup 值，则可能导致许多重复行 - 在这种情况下，您必须添加 DISTINCT到主查询，这会导致它对所有列上的数据进行排序。——根本没有效率。

而且，类似地，如果您 LEFT OUTER JOIN 将要进行子查询的表并添加 WHERE ，则可以完成 WHERE NOT IN 或 NOT EXISTS 相关子查询（并给出完全相同的执行计划）。一片空白。你必须小心使用它，但你不需要 DISTINCT。坦率地说，我更喜欢使用 WHERE NOT IN 子查询或 NOT EXISTS 相关子查询，因为语法使意图明确并且很难出错。

并且您不需要在此类子查询（相关或不相关）内的 SELECT 中使用 DISTINCT。这将浪费处理（对于 WHERE EXISTS 或 WHERE IN 子查询，SQL 优化器无论如何都会忽略它，而只使用与外部查询中的每一行匹配的第一个值）。（希望这是有道理的。）

# java - 如何在Java中按位置访问文件中的字符串

> ID：14156314
> 
> 赞同：1
> 
> 时间：2013-01-04T11:30:23.890
> 
> 标签：java, file

我有一个包含以下内容的文本文件：

```
one
two
three
four 
```

我想通过它在Java文本文件中的位置来访问字符串“三”。我在谷歌上找到了子字符串概念但无法使用它。

到目前为止，我能够读取文件内容：

```
import java.io.*;
class FileRead 
{
 public static void main(String args[])
  {
  try{
  // Open the file that is the first 
  // command line parameter
  FileInputStream fstream = new FileInputStream("textfile.txt");
  // Get the object of DataInputStream
  DataInputStream in = new DataInputStream(fstream);
  BufferedReader br = new BufferedReader(new InputStreamReader(in));
  String strLine;
  //Read File Line By Line
  while ((strLine = br.readLine()) != null)   {
  // Print the content on the console
  System.out.println (strLine);
  }
  //Close the input stream
  in.close();
    }catch (Exception e){//Catch exception if any
  System.err.println("Error: " + e.getMessage());
  }
  } 
```

}

我想将子字符串概念应用于文件。它询问位置并显示字符串。

```
 String Str = new String("Welcome to Tutorialspoint.com");
 System.out.println(Str.substring(10, 15) ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:09:53.363

如果您知道您感兴趣的文件中的*字节偏移量，那么这很简单：*

```
RandomAccessFile raFile = new RandomAccessFile("textfile.txt", "r");
raFile.seek(startOffset);
byte[] bytes = new byte[length];
raFile.readFully(bytes);
raFile.close();
String str = new String(bytes, "Windows-1252"); // or whatever encoding 
```

但要使其工作，您必须使用字节偏移量，而不是字符偏移量 - 如果文件以可变宽度编码（如 UTF-8）编码，则无法直接查找第 n 个*字符*，您必须从文件顶部并读取并丢弃前 n-1 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:37:02.353

`\r\n`在您的文本文件中查找（换行符）。这样，您应该能够计算包含您的字符串的行数。

你的文件实际上是这样的

```
one\r\n
two\r\n
three\r\n
four\r\n 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:14:50.607

你似乎在寻找[这个](https://stackoverflow.com/questions/14156325/how-to-get-a-string-from-a-java-file-by-using-only-start-and-end-position)。我在那里发布的代码在字节级别上工作，所以它可能不适合你。另一种选择是使用 BufferedReader 并在这样的循环中读取单个字符：

```
String getString(String fileName, int start, int end) throws IOException {
    int len = end - start;
    if (len <= 0) {
        throw new IllegalArgumentException("Length of string to output is zero or negative.");
    }

    char[] buffer = new char[len];
    BufferedReader reader = new BufferedReader(new FileReader(fileName));
    for (int i = 0; i < start; i++) {
        reader.read(); // Ignore the result
    }

    reader.read(buffer, 0, len);
    return new String(buffer);
} 
```

# .net - 仅用于将文件复制到输出文件夹的空 .net 项目？

> ID：14156319
> 
> 赞同：3
> 
> 时间：2013-01-04T11:30:37.653
> 
> 标签：.net, build, tfs, copying

我有一个大型“产品”，它部署为一组 zip 文件（分为 Web 应用程序、Web 服务、数据库、工具等）。

我目前使用 MSBuild 从 VSS 收集文件、构建、压缩并复制到网络共享。我正在迁移到 TFS，虽然其他所有项目类型都可以正常构建，但我正在尝试找到一种方法使数据库安装脚本脱离源代码控制，并有效地将它们复制到自己文件夹中的放置位置（用于压缩）。

我尝试使用“空 C# 项目”（使用 assemblyInfo 类以避免“无源”警告）创建解决方案文件，其中所有脚本和支持文件都标记为内容和“始终复制”，但文件不是出现在放置文件夹中。这些文件确实按照我想要的方式在本地构建，但是通过 TFS 构建时它不起作用。

我想知道是否有任何其他方法可以做我需要的事情 - 我受限于拥有数据库脚本（即没有转换为 MSI）。我已经搜索了我能想到的所有地方，但都是空白！

TIA，西姆斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:56:40.707

将文件标记为资源并始终设置为副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:05:11.800

您是否考虑过为此编写自己的 msbuild 项目？然后，您可以将所有符合您条件的文件复制到 $(outdir) 文件夹。

这些方面的东西应该会有所帮助：

```
<Project DefaultTargets="CopySqlScripts">
  <Target Name="CopySqlScripts">
    <ItemGroup>
      <SqlScripts Include="$(MSBuildProjectDirectory)\*.sql" />
    </ItemGroup>
    <Copy SourceFiles="@(SqlScripts)" DestinationFolder="$(OutDir)\SqlRelease" />
  </Target>
</Project> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T16:05:42.263

谢谢大家看这个，原来我使用的csproj文件有问题。

我创建了一个全新的项目（C# 库）并向其中添加了几个文件 - 将它们标记为 Content 和 Always Copy，它们位于放置文件夹中。

这有点快速和肮脏，但是一旦我确定一切正常，我将添加一个构建后事件来删除虚假的 dll :)

# castle-windsor - 带有 TypedFactoryFacility 的 Castle.MicroKernel.ComponentNotFoundException

> ID：14156323
> 
> 赞同：2
> 
> 时间：2013-01-04T11:30:48.037
> 
> 标签：castle-windsor, typed-factory-facility, windsor-facilities

使用 TypedFactoryFacility 时，我在解析 ITcpServer 时遇到了一些问题。Windsor 似乎没有找到合适的组件从工厂返回该接口。我的案例的具体情况是接口 ITcpServer 是非通用的，而实现它的类都是通用的。

运行时抛出以下代码：

> 未处理的异常：Castle.MicroKernel.ComponentNotFoundException：在 Castle.Facilities 的 Castle.MicroKernel.DefaultKernel.Castle.MicroKernel.IKernelInternal.Resolve（类型服务、IDictionary 参数、IReleasePolicy 策略）中找不到支持服务 ConsoleApplication1.StandardTcpServer`1 的组件.TypedFactory.TypedFactoryComponentResolver.Resolve(IKernelInternal kernel, IReleasePolicy scope) at Castle.Facilities.TypedFactory.Internal.TypedFactoryInterceptor.Resolve(IInvocation invocation) at Castle.Facilities.TypedFactory.Internal.TypedFactoryInterceptor.Intercept(IInvocation invocation) at Castle.DynamicProxy。
> Castle.Proxies.ITcpServerFactoryProxy.Create[T] 的AbstractInvocation.Proceed() (String serverType, T something)

编码：

```
class Program
{
    static void Main(string[] args)
    {
        IWindsorContainer container = new WindsorContainer();
        container.Install(new MyWindsorInstaller());

        var f = container.Resolve<ITcpServerFactory>();
        var tcpServer = f.Create("standard", "something");
        tcpServer.Start();
    }
}

 public class MyWindsorInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.AddFacility<TypedFactoryFacility>();
        container.Register(
            Component.For<ITcpServer>().ImplementedBy(typeof(LibUvTcpServer<>)),
            Component.For<ITcpServer>().ImplementedBy(typeof(StandardTcpServer<>)),
            Component.For<ITcpServerFactory>().AsFactory(c => c.SelectedWith(new TcpServerComponentSelector()))
            );
    }
}

public class TcpServerComponentSelector : DefaultTypedFactoryComponentSelector
{
    protected override Type GetComponentType(System.Reflection.MethodInfo method, object[] arguments)
    {
        var serverType = (string)arguments.First();
        return serverType == "standard" ? typeof (StandardTcpServer<>) : typeof(LibUvTcpServer<>);
    }
}

public interface ITcpServerFactory
{
    ITcpServer Create<T>(string serverType, T something);
}

public class StandardTcpServer<T> : ITcpServer
{
    public void Start()
    {
        Console.WriteLine("Started...");
    }
}

public class LibUvTcpServer<T> : ITcpServer
{
    private readonly T something;

    public LibUvTcpServer(T something)
    {
        this.something = something;
    }

    public void Start()
    {
        Console.WriteLine("Started...");
    }
}

public interface ITcpServer
{
    void Start();
} 
```

解决问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:49:12.510

更改以下内容：

```
protected override Type GetComponentType(System.Reflection.MethodInfo method, object[] arguments)
{
    var serverType = (string)arguments.First();
    if (serverType == "standard") 
    {
        return typeof(StandardTcpServer<>).MakeGenericType(arguments[1].GetType());
    }
    else
    {
        return typeof(LibUvTcpServer<>).MakeGenericType(arguments[1].GetType());
    }
} 
```

和注册：

```
Component.For<ITcpServer>().Forward(typeof(LibUvTcpServer<>)).ImplementedBy(typeof(LibUvTcpServer<>)),
Component.For<ITcpServer>().Forward(typeof(StandardTcpServer<>)).ImplementedBy(typeof(StandardTcpServer<>)), 
```

或者如果您只需要通过工厂解决：

```
Component.For(typeof(LibUvTcpServer<>)),
Component.For(typeof(StandardTcpServer<>)), 
```

祝你好运，

马尔维恩。

# java - 如何仅使用开始和结束位置从java文件中获取字符串？

> ID：14156325
> 
> 赞同：-1
> 
> 时间：2013-01-04T11:30:56.780
> 
> 标签：java, file, file-access

我的 .java 文件由一系列代码组成，每一行的大小都是可变的。.java 文件如下所示：

```
public class MyC{
    public void MyMethod()
    {
        System.out.println("My method has been accessed");
        System.out.println("hi");
        String l;
        int x=0;
    }
} 
```

简而言之，我想做的是扫描 .java 文件中的错误并在字符串中捕获错误。我使用诊断收集器来捕获错误的开始和结束位置。

假设我在第 7 行出错：in x=0; 诊断收集器将返回我的位置，例如发生 143-145 错误。

我也得到了行号，但返回的位置是相对于整个 .java 文件的。因此，使用行号将毫无意义，因为每一行的长度都是可变的，并且位置是相对于整个文件的。很难计算出一条线上误差的实际位置。

如果上一行的最后一个字符没有错误（例如：第 7 行错误：上一行 = 第 6 行），我无法获取上一行最后一个字符的结束位置。

有没有办法让我通过使用 java 文件中的位置（开始和结束）来获取字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:38:24.923

最简单的方法是使用[RandomAccessFile](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)。

它有一个叫做 seek 的方法，它占据了它应该寻求的位置：

```
String getStringFromFile(String fileName, long position, int length) throws IOException {
    byte[] buffer = new byte[length]; // You may want to take care of multi-byte encodings here
    RandomAccessFile file = new RandomAccessFile(fileName, "r");
    file.seek(position);
    file.readFully(buffer);
    return new String(buffer); // You may want to add encoding handling here
} 
```

编辑：您还可以使用循环并一次读取一个字符，并使用字符数组而不是字节数组。对你来说可能会更简单。使用 readChar 方法而不是读取。

将 read 切换为 readFully 以保证读取所有字节。

# javascript - 如何使用javascript调用代码背后的按钮点击事件

> ID：14156327
> 
> 赞同：10
> 
> 时间：2013-01-04T11:31:03.967
> 
> 标签：javascript, jquery

是否可以使用 javascript 或 jquery 调用服务器端按钮单击事件如果是，那么该怎么做

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T11:33:15.343

假设这是您的 html：

```
<input type="button" id="button" value="btn" /> 
```

在 jquery 中，您调用单击按钮，如下所示：

```
$("#button").click();   //button is id 
```

在javascript中：

```
document.getElementById("button").click(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T11:50:16.267

是的，javascript 可以做到这一点。我假设您使用的是 ASP.Net

```
<asp:Button ID="button" runat="server" Text="Test" />

<script>
    document.getElementById("<%= button.ClientID %>").click();
</script> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-04T12:19:09.257

在jQuery中

```
$("#button_id").click(function(){
// do something when button is clicked
}); 
```

并调用函数

```
$("#button_id").click(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T11:32:54.793

```
document.getElementById("Button1").click(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T11:33:46.337

调用指定按钮的 click() 也会在 Web 表单中触发服务器端事件。

```
$("#idofbutton").click(); // whereever required to trigger the server click  event 
```

谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T11:35:49.433

无论是服务端控件还是客户端控件，在客户端触发点击时，都会根据属性制定服务端事件。考虑 asp.net 页面中的服务器端按钮，当您从 javascript/jquery 触发点击事件时，由于属性 runat=server，通常它会向服务器发出回发事件。下面是在 jQuery 中触发点击事件的语法。

```
$('#buttonID').click(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T11:46:30.087

是的，您可以使用以下代码执行此操作：

```
$('[id$=txtDOB]').live('blur', function (e) {
        $('[id$=btnsubmit]').click();
    }); 
```

按钮的单击触发文本框（txtDOB）的模糊事件。希望这会帮助你。

# oracle - A 列有 3 个相同的值，需要检查同一列 A 的 B 列值

> ID：14156329
> 
> 赞同：0
> 
> 时间：2013-01-04T11:31:10.353
> 
> 标签：oracle

例如，我有 A 列部门和 B 列作为员工类型，我需要检查以下内容。

```
Department    Emp Type  
Dep1            S  
Dep1            H  
Dep1            P  
Dep2            H  
Dep2            H  
Dep2            H 
```

我只需要检索所有 3 行的 H 员工类型的部门。如果 emp 类型不同，我需要忽略该部门。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:37:01.940

```
SELECT DISTINCT Department
FROM tableX  t
WHERE NOT EXISTS
      ( SELECT *
        FROM tableX  s
        WHERE s.Department = t.Department
          AND s.EmpType <> 'H'
      ) ; 
```

如果你有一个索引`(Department, EmpType)`，最快的方法可能是：

```
SELECT Department
FROM tableX  t
GROUP BY Department
HAVING MIN(EmpType) = 'H'
   AND MAX(EmpType) = 'H' ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T12:03:32.453

您可以通过必须过滤掉只有 H 的组来使用组：

```
SQL> create table dept(dep varchar2(5), typ varchar2(1));

Table created.

SQL> insert into dept
  2  select 'Dep1', 'S' from dual union all
  3  select 'Dep1', 'H' from dual union all
  4  select 'Dep1', 'P' from dual union all
  5  select 'Dep2', 'H' from dual union all
  6  select 'Dep2', 'H' from dual union all
  7  select 'Dep2', 'H' from dual;

6 rows created.

SQL> select dep
  2    from dept
  3   group by dep
  4   having count(distinct typ) = 1
  5      and max(typ) = 'H';

DEP
-----
Dep2 
```

# android - Android - 在流中去除额外的\r\n？

> ID：14156330
> 
> 赞同：0
> 
> 时间：2013-01-04T11:31:12.070
> 
> 标签：android, stream, terminal, serial-port, terminal-emulator

更新的问题：我正在尝试使用 android 中的库连接到终端仿真器，这将连接到串行设备，并且应该向我显示发送/接收的数据。在这两种情况下，我应该能够通过终端下方的文本框或通过输入终端本身并在键盘上按 Enter 来通过连接发送数据。

当我通过文本框发送数据`\n`时，当我按下回车键时，我必须附加到数据以进入新行，如下所示：

```
mEntry = (EditText) findViewById(R.id.term_entry);

mEntry.setOnEditorActionListener(new TextView.OnEditorActionListener() {

    @Override
    public boolean onEditorAction(TextView v, int actionId,
            KeyEvent event) {

        /* Ignore enter-key-up events. */
        if (event != null && event.getAction() == KeyEvent.ACTION_UP) {

            return false;
        }

        Editable e = (Editable) v.getText();
        String data = e.toString() + "\n";
        sendOverSerial(data.getBytes());
        TextKeyListener.clear(e);
        return true;
    }
}); 
```

和写方法：

```
public void write(byte[] bytes, int offset, int count) {

super.write(bytes, offset, count);

if (isRunning()) {
    doLocalEcho(bytes);
}
return; 
```

}

当我在终端会话本身键入后按回车键时，根本没有出现新行。所以我不得不测试数据`\r`并将其替换为`\r\n`：

```
 private void doLocalEcho(byte[] data) {
 String str = new String(data);   
    appendToEmulator(data, 0, data.length);
    notifyUpdate();
}

 public void write(byte[] bytes, int offset, int count) {
    // Count the number of CRs
 String str = new String(bytes);
    int numCRs = 0;
    for (int i = offset; i < offset + count; ++i) {
        if (bytes[i] == '\r') {
            ++numCRs;
        }
    }

    if (numCRs == 0) {
        // No CRs -- just send data as-is
        super.write(bytes, offset, count);

        if (isRunning()) {
           doLocalEcho(bytes);
        }
        return;
    }

    // Convert CRs into CRLFs
    byte[] translated = new byte[count + numCRs];
    int j = 0;
    for (int i = offset; i < offset + count; ++i) {
        if (bytes[i] == '\r') {
            translated[j++] = '\r';
            translated[j++] = '\n';
        } else {
            translated[j++] = bytes[i];
        }
    }

   super.write(translated, 0, translated.length);

    // If server echo is off, echo the entered characters locally
    if (isRunning()) {
        doLocalEcho(translated);
    }
} 
```

所以效果很好，现在当我输入终端会话本身并按回车时，我得到了我想要的换行符。但是，现在每次我从文本框中发送数据时，`\n`每个换行符之间都会有一个额外的空格以及获得额外的换行符。

[http://i.imgur.com/gtdIH.png](http://i.imgur.com/gtdIH.png)

所以我认为在计算回车数时，请先查看下一个字节，如果`'\n'`不计算：

```
 for (int i = offset; i < offset + count; ++i) {

        if (bytes[i] == '\r' && 
                  ( 
                    (i+1 < offset + count) && // next byte isn't out of index 
                    (bytes[i+1] != '\n')
                  ) // next byte isn't a new line 
               ) 
        {
            ++numCRs;
        }
    } 
```

这解决了空格的问题......但这很愚蠢，因为我现在回到原来的问题，如果我直接在终端中输入没有新行，因为它看到`\r\n`并看到下一个字节是无效的。让两者一起工作的最佳方式是什么？我要么有这些奇怪的额外空格，所有输入都很好，要么是正常间距，我不能直接从终端输入文本，只能输入文本框。我认为它真的很容易修复，我只是在挠头看着它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:24:12.833

**编辑：不固定，以为我有，但是当我直接从终端输入时，输入不会产生新行。一定是因为 \r 之后的 \n 被忽略了**

我已经修复了大部分。计算回车数时，请先查看下一个字节，如果`'\n'`不计算：

```
 for (int i = offset; i < offset + count; ++i) {

            if (bytes[i] == '\r' && 
                      ( 
                        (i+1 < offset + count) && // next byte isn't out of index 
                        (bytes[i+1] != '\n')
                      ) // next byte isn't a new line 
                   ) 
            {
                ++numCRs;
            }
        } 
```

现在剩下的唯一问题是我仍然像这样得到两次提示：

```
switch#
switch# 
```

# excel-formula - Google Spreadsheet Counta 单独行中的两个字符串条件

> ID：14156339
> 
> 赞同：0
> 
> 时间：2013-01-04T11:31:24.547
> 
> 标签：excel-formula, google-sheets

我正在尝试实现两个字符串条件的计数。

有一个数据库：C2:C 列包含一串语言。列 F2:F 包含 TRUE / FALSE 字符串。

```
 C         F
German     TRUE
German     TRUE
German     FALSE
German     FALSE
French     FALSE
French     TRUE
French     TRUE 
```

等等

我正在寻找的答案：（如果 DASHBOARD!B12 = "German", AND F:F = "TRUE" ，那么答案是 2）

我已经尝试过：

```
=COUNTA(IF(AND(C:C=DASHBOARD!B12,F:F="TRUE"),1,0))
//This gives me the answer of 1?

=COUNTA(IFERROR( FILTER( F2:F , SEARCH( "TRUE" , F2:F ) ) ) )
// This gives me the correct answer of 89

=COUNTA(IFERROR( FILTER( C2:C , SEARCH( DASHBOARD!B12 , C2:C ) ) ) )
//This gives me the correct answer of 37 
```

您如何合并最后两个表达式，以便计数仅计算列 F = TRUE 和列 C = DASHBOARD!B12 的那些？

我已经尝试了 =SUMPRODUCT() 和 =ARRAYFORMULA() 无济于事，这样一个简单的表达式一定有问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:50:28.757

我建议你使用 true() 和 false() 函数而不是字符串“true”、“false”。最好放入函数if()。您可以在 filter() 中使用更多条件，例如：filter(C:F,C:C="French",C:C="TRUE")

我制作了一个示例工作表供您参考。请检查以下。 [https://docs.google.com/spreadsheet/ccc?key=0AhDkbjKh37REdGloc2NFbDlXeGNrSm1TTHhyVFFWelE](https://docs.google.com/spreadsheet/ccc?key=0AhDkbjKh37REdGloc2NFbDlXeGNrSm1TTHhyVFFWelE)

我相信 C:D 中的数据是你想要的。

# c++ - 在 Qt 中使用 c++ 运算符作为插槽

> ID：14156343
> 
> 赞同：2
> 
> 时间：2013-01-04T11:31:38.787
> 
> 标签：c++, qt, compiler-construction, signals-slots

我想知道是否可以（以及如何）使用 c++ 运算符，例如 ()、[] 作为 Qt 插槽。

编译器似乎在抱怨这个简单的代码

```
class MainWindowDecorator : public QObject
{  Q_OBJECT
private:
//some variables

public slots:
    int operator[](int i)
    {
    return i;
    }
} 
```

错误如下：

```
Error: Not a signal or slot declaration 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:53:50.780

您可以创建将调用 dedicated 的插槽包装器`operator`。

问题是`moc`解析器不允许该定义，可能是因为它需要一个标识符而不是关键字。

# objective-c - 自定义 NSCursor 以黑色四边形闪烁

> ID：14156345
> 
> 赞同：6
> 
> 时间：2013-01-04T11:31:44.140
> 
> 标签：objective-c, macos, mouse-cursor

我将 NSTrackingArea 添加到我的视图中以捕获 mouseEntered/mouseExited 事件。有用。然后，当 mouseEntered 事件被捕获时，我会

```
[self.window invalidateCursorRectsForView:self]; 
```

在`- (void)resetCursorRects`我绘制图像的方法中，从中创建 NSCursor 然后：

```
[self addCursorRect:self.bounds cursor:myCursor]; 
```

它看起来工作得很好，但是有时，当在视图光标上拖动鼠标（鼠标向下并拖动）时会闪烁（光标下会出现一些神秘的黑色四边形，它的大小非常适合我的光标大小。只有我的光标是圆形的。顺便说一下如果我的光标很小，则不会出现问题。当它变大时，它开始闪烁。并且在没有其他绘图同时完成时它不会出现。

可能是什么问题呢？

* * *

屏幕：

好时刻： ![在此处输入图像描述](../Images/adf73d40c2c1ab37faf88778bf387057.png)

糟糕的时刻： ![在此处输入图像描述](../Images/d0e570dd41c7d6d8db9e11cbeaa3c0b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:53:02.420

因为我的 NSView 是 NSOpenGLView，所以我不得不删除`glClear(GL_COLOR_BUFFER_BIT)`行，因为这样做`glClear`会与 alpha 值争论。

# asp.net - asp.net 中的网站/url 验证不起作用

> ID：14156348
> 
> 赞同：0
> 
> 时间：2013-01-04T11:31:49.570
> 
> 标签：asp.net, regex, validation

```
<asp:RegularExpressionValidator ID="revWebsite" runat="server" ForeColor="Red"
 ControlToValidate="txtWebsite" ErrorMessage="Invalid Website (General Details)"
 ValidationExpression="(http|https)://([\w-]+\.)+[\w-]+(/[\w- ./?%&=]*)?">*
</asp:RegularExpressionValidator> 
```

为什么不工作？：

www.website.com

www.domain.website.com

[http://website.com](http://website.com)

[https://website.com](https://website.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:13:51.633

**建议：**如果你想验证一个站点，你可以通过 pin 来检查它的存在。

您可以为此使用[自定义验证器](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)。为此，请参见以下示例：

在 .aspx 页面中：

```
 <div>
        <asp:TextBox runat="server" ID="txtURL" ValidationGroup="vlg" />
        <asp:RequiredFieldValidator ID="rqfvURL"  ErrorMessage="Please Enter" ControlToValidate="txtURL" ValidationGroup="vlg"
            runat="server" />
        <asp:CustomValidator ID="cstmValURL" ErrorMessage="Please enter valid site" 
            ControlToValidate="txtURL"   runat="server"  ValidationGroup="vlg"
            onservervalidate="cstmValURL_ServerValidate" />
        <asp:Button Text="submit" ID="btn" runat="server" onclick="btn_Click" ValidationGroup="vlg" />
    </ div> 
```

在 .cs 页面中：

```
 protected void cstmValURL_ServerValidate(object source, ServerValidateEventArgs args)
        {
            if (TestSite())
            {
                args.IsValid = true;
            }
            else
            {
                args.IsValid = false;
            }
        }

        private bool TestSite()
        {         
            Ping objPing = new Ping();
            bool blnResult = false;
            try
            {
                PingReply pngReply = objPing.Send(txtURL.Text.Trim(), 3000);
                if (pngReply.Status == IPStatus.Success)
                   return blnResult= true;
            }
            catch
            {
                return  blnResult=false;
            }
            return blnResult;
        } 
```

**PS**这只是一个建议。

# c# - c# 中的 CRITICAL_SECTION

> ID：14156349
> 
> 赞同：0
> 
> 时间：2013-01-04T11:31:51.493
> 
> 标签：c#, winapi, pinvoke

全部。我需要在 c# 代码中使用 winapi 关键部分。

首先，我导入函数：

```
[StructLayout(LayoutKind.Sequential)]
public struct CRITICAL_SECTION { public int dummy; }

// INIT CRITICAL SECTION
[DllImport("kernel32.dll")]
static extern bool InitializeCriticalSectionAndSpinCount(ref CRITICAL_SECTION
   lpCriticalSection, uint dwSpinCount);

// DELETE CRITICAL SECTION
[DllImport("kernel32.dll")]
static extern void DeleteCriticalSection(ref CRITICAL_SECTION
   lpCriticalSection);

// ENTER CRITICAL SECTION
[DllImport("kernel32.dll")]
static extern void EnterCriticalSection(ref CRITICAL_SECTION
   lpCriticalSection);

// LEAVE CRITICAL SECTION
[DllImport("kernel32.dll")]
static extern void LeaveCriticalSection(ref CRITICAL_SECTION
   lpCriticalSection); 
```

通过这种方式，我尝试使用临界区：

```
static void Main(string[] args)
            {
                GenerateArray();

                InvokeThread invokeThread = () =>
                {
                    WaitForSingleObject(ghSemaphore, 0);
                    EnterCriticalSection(ref CriticalSection);   // critical section

                    int[] array = new int[ARRAY_SIZE_PER_THREAD];
                    int baseI = thread * ARRAY_SIZE_PER_THREAD;
                    for (int i = 0; i < ARRAY_SIZE_PER_THREAD; ++i)
                    {
                        array[i] = gList[baseI + i];
                    }

                    LeaveCriticalSection(ref CriticalSection);       // critical section
                    ReleaseSemaphore(ghSemaphore, 1, IntPtr.Zero);

                    return 0;
                };

                ghSemaphore = CreateSemaphore(ref seqAttr, THREADS_NUMBER, THREADS_NUMBER, "");
                InitializeCriticalSectionAndSpinCount(ref CriticalSection, 0);                           

                IntPtr threadPtr = Marshal.GetFunctionPointerForDelegate(invokeThread);

                IntPtr[] handlers = new IntPtr[THREADS_NUMBER];
                for (int i = 0; i < THREADS_NUMBER; ++i)
                {
                    int handle = CreateThread(IntPtr.Zero, 0, threadPtr, IntPtr.Zero, 0, 0);
                    handlers[i] = new IntPtr(handle);
                }

                WaitForMultipleObjects(THREADS_NUMBER, handlers, true, Infinite);    
                DeleteCriticalSection(ref CriticalSection); // delete critical section
            }
        } 
```

但在下一行 gList 包含错误的值。如果我不使用关键部分，每件事都很好。

```
for (int i = 0; i < ARRAY_SIZE_PER_THREAD; ++i)
{
    array[i] = gList[baseI + i];
} 
```

哪里可能有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:07:24.333

我也同意使用 .net 中的关键部分 API 似乎是一个糟糕的设计选择。如果必须的话，我会考虑编写一个 C++/CLI 混合模式包装器。这样您就可以直接包含 windows 头文件。

但是，您的 p/invoke 代码中有一个相当明显的缺陷。那是`CRITICAL_SECTION`结构的声明。您已将其声明为持有一个整数值。但本机`struct`比这更大。在 x86 上它是 24 字节长，而在 x64 上它是 40 字节长。您不需要声明任何字段，因为从您的角度来看，它只是一个不透明的内存块。

如果我是你，我会摆脱`CRITICAL_SECTION`. 我会将所有`ref CRITICAL_SECTION`参数更改为`IntPtr`. 我会用它`Marshal.AllocHGlobal(40)`来创建足够大的内存块来保存临界区数据。

例如：

```
[DllImport("kernel32.dll")]
static extern bool InitializeCriticalSectionAndSpinCount(
    IntPtr lpCriticalSection, 
    uint dwSpinCount
); 
```

等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:07:38.640

您对`CRITICAL_SECTION`结构的定义是错误的。在 Windows 标头中有 24 个字节左右，但你的只有 4 个。

另外，你什么都不做`new CRITICAL_SECTION`。你需要它，`InitializeCriticalSection`设置数据，但不要分配它。

# nginx - Spotify App Strophe.js 无法连接到 nginx/ejabberd 组合

> ID：14156357
> 
> 赞同：1
> 
> 时间：2013-01-04T11:32:11.697
> 
> 标签：nginx, xmpp, ejabberd, strophe

所以我设置了一个 ejabberd XMPP 服务器并使用 nginx 作为 EC2 实例上的代理。Strophe.js echobot 示例可以从我的 Chrome 浏览器连接。以下是请求标头：

```
Request URL:http://foo.eu-west-1.compute.amazonaws.com/http-bind
Request Method:POST
Status Code:200 OK
Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
Connection:keep-alive
Content-Length:115
Content-Type:application/xml
Host:foo.compute.amazonaws.com
Origin:foo.eu-west-1.compute.amazonaws.com
Referer:foo.eu-west-1.compute.amazonaws.com/examples/echobot.html
User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
Request Payload
<body rid='2692151172' xmlns='http://jabber.org/protocol/httpbind' sid='15f6dc6cbc7a7d69b5db531c2ebf7828e094f043'/>
Response Headers
Access-Control-Allow-Headers:Content-Type
Access-Control-Allow-Origin:*
Connection:keep-alive
Content-Length:286
Content-Type:text/xml; charset=utf-8
Date:Fri, 04 Jan 2013 11:14:14 GMT
Server:nginx/1.2.4 
```

我将 echobot 示例移植到 Spotify 作为应用程序。但是，Strophe 无法连接。这是 Web Inspector 网络日志：

```
Request URL:http://foo.eu-west-1.compute.amazonaws.com/http-bind
Request Headers
POST http://foo.eu-west-1.compute.amazonaws.com/http-bind HTTP/1.1
Origin: sp://chatify
User-Agent: Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.15 Safari/535.11
Content-Type: application/xml
Request Payload
<body rid='790399813' xmlns='http://jabber.org/protocol/httpbind' to='ec2-54-246-45-111.eu-west-1.compute.amazonaws.com' xml:lang='en' wait='60' hold='1' content='text/xml; charset=utf-8' ver='1.6' xmpp:version='1.0' xmlns:xmpp='urn:xmpp:xbosh'/> 
```

现在。manifest.json 中的 RequiredPermissons 如下所示：

```
"RequiredPermissons": [
    "http://foo.eu-west-1.compute.amazonaws.com",
    "foo.eu-west-1.compute.amazonaws.com",
    "http://foo.eu-west-1.compute.amazonaws.com/http-bind",
    "foo.eu-west-1.compute.amazonaws.com/http-bind"
] 
```

我可以从 foo.eu-west-1.compute.amazonaws.com 加载源代码，所以我认为这些许可有效。Spotify 应用程序使用不同的来源，“sp://chatify”。我读到这可能会导致问题。并且`Access-Control-Allow-Origin:*`应该添加到标题中。我在 nginx 配置中这样做只是为了发现它一直被发送。您可以在第一个请求的响应标头中看到它。

如果打开，Strophe.js 本身会在示例的日志中说：

```
error 0 happened 
```

那么有什么建议吗？清单似乎是正确的 Access-Control-Allow-Origin;* 似乎是正确的 它在浏览器中有效，但不适用于 Spotify。

谢谢你的帮助！

**更新：** 如果我在本地打开 echobot.html 它仍然有效。起源是那么`null`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:19:44.433

好的，我得到它的工作。解决方案是经典的。但是，我的调试可能对其他人有所帮助。

1.  起初，我查看了 Web Inspector。它表明所有请求都被取消了。不，检查员并不总是正确的，正如许多地方提到的那样。不过，这一次确实如此。

2.  所以 Strophe.js 无法建立连接。为了查看是否有任何自定义 Spotify 应用程序可以建立连接，我尝试了教程应用程序中的 Google 地图示例。它不适用于原生 Linux 版本和 wine 下的 Windows。然而，它确实在 Windows 下工作。

3.  我的下一步是查看我的应用程序是否可以从网络加载任何资源。所以我只是添加了一个 iframe: 。它没有加载我的页面。

4.  我仔细查看了教程应用程序和我的应用程序的清单。我找不到任何区别。所以我只是复制了“RequiredPermissions”，看看我有错字。一旦修复了 iframe 并最终 strophe.js 工作。

这很有趣。前几天找错字了，没找到。

总结一下：

*   确保您的服务器设置`Access-Control-Allow-Origin;*`
*   设置权限。例如

    “RequiredPermissions”：[“http://ec2-foo.eu-west-1.compute.amazonaws.com”、“ec2-foo.eu-west-1.compute.amazonaws.com”、“http:// ec2-foo.eu-west-1.compute.amazonaws.com/http-bind”、“ec2-foo.eu-west-1.compute.amazonaws.com/http-bind”]

# ios - 日期数后的特定日期

> ID：14156360
> 
> 赞同：1
> 
> 时间：2013-01-04T11:32:18.060
> 
> 标签：ios, nsdate, nsdateformatter

目前我正在研究`NSDate`和`NSDateFormatter`.

我的问题是我需要`find the date after 100 days`用户指定的日期。

目前我正在使用这个硬编码字符串来查找未来的日期。

```
calendar.maximumDate = [self.dateFormatter dateFromString:@"20/08/2015"]; 
```

但这不是正确的方法，并且不适用于用户指定的日期。有没有办法做到这一点？

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T11:42:07.903

像这样：

```
// How much day to add
int addDaysCount = 100;

// Create and initialize date component instance
NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
[dateComponents setDay:addDaysCount];

// Retrieve date with increased days count
NSDate *newDate = [[NSCalendar currentCalendar] 
                          dateByAddingComponents:dateComponents 
                                          toDate:fromdateHere options:0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:41:26.627

*   [(id)dateWithTimeInterval:(NSTimeInterval)seconds sinceDate:(NSDate *)date](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html#//apple_ref/occ/clm/NSDate/dateWithTimeInterval%3asinceDate%3a)满足您的所有需求。

这是一个例子：

```
NSDate *now = [NSDate new];
NSTimeInterval hundredDaysTimeInterval = 3600*24*100;
NSDate *nowAndAHundred = [NSDate dateWithTimeInterval:hundredDaysTimeInterval sinceDate:now]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:41:50.003

使用`dateByAddingTimeInterval`中的函数`NSDate`。喜欢

```
int daysToAdd = 100;
NSDate *maximumDate = [yourDate dateByAddingTimeInterval:60*60*24*daysToAdd]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T11:42:53.413

尝试以下

使用 nsdate 实例方法 "- (id)dateByAddingTimeInterval:(NSTimeInterval)seconds" 并传递 (100 * 86400) 作为参数以获取用户指定日期 100 天后的日期。使用用户指定的日期调用此方法，该日期是 nsdate 的实例。

# css - 最高效的 CSS 选择器：标题标签、类还是 ID？

> ID：14156362
> 
> 赞同：3
> 
> 时间：2013-01-04T11:32:19.710
> 
> 标签：css, html, css-selectors

由于我们在 HTML5 中有新元素（HEADER、FOOTER、SECTION...），我们应该如何构建我们的 CSS 选择器以提高性能？

```
header {}
header nav {}
header nav ul li{} 
```

**或者**

```
#header {}
#header .nav{}
#header .nav .menu{} 
```

或者以其他更有效的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T11:48:45.637

如果“效率”是指它如何影响页面的加载时间，那么您应该坚持使用类和 ID 而不是标签名称。谷歌有一个编写快速 CSS的[最佳实践页面，您可能会觉得有趣。](https://developers.google.com/speed/docs/best-practices/rendering#UseEfficientCSSSelectors)他们建议的要点是减少浏览器必须排序的元素数量。

再次，页面上最相关的一点是*“优先选择类和 ID 选择器而不是标签选择器”。*正如我们稍后将看到的那样，只有当这些类和 ID 选择器减少匹配元素的数量时，这才真正提高了效率。

不过，在我开始之前，让我们从该页面的建议总和得出其合乎逻辑的结论。我们应该发现编写 CSS 最有效的方法是为页面上的所有内容应用 ID，并且只使用 ID 选择器。但是你应该这样做吗？可能不是。

原因是在编写 CSS 时还需要考虑其他因素。这里有几个：

1.  无论您的选择器多么低效，您的页面上可能还有其他事情比处理 CSS 花费的时间要长得多。如果您将时间花在优化上，则最好将其花在其他地方。
2.  你想保留你的网页`semantic`，这绝对不意味着给你页面上的所有东西一个 ID。
3.  维持这样的结构会很痛苦
4.  这将是美学上令人不快的 HTML

我从所有这些中得出的结论是，只要您不牺牲太多上述几点，尤其是第一点和第二点，就可以遵循效率的最佳实践。

对于您的具体示例，最简单的答案是底部选择器如果减少匹配项的数量会更有效。

一个一个地浏览它们：

`header`对比`#header`

如果您的页面上有多个标题元素，ID 将始终更有效。如果只有一个标题，那么它们应该同样快速。

`header nav`对比`#header .nav`

Google 最佳实践页面告诉我们，后代选择器是 CSS 中效率最低的选择器。

这是因为 CSS 从右到左读取。一旦它找到最右边的后代，它需要通过 DOM 树返回以确定其父代是否匹配。它必须在每场比赛中都这样做。

碰巧选择器在匹配失败时会停止解释。因此，如果它正在寻找 nav 并在 ul 上运行，它就不会在 DOM 树上寻找该 ul 的标题父级。这不应该让我们太惊讶，但我只是想为了完整起见我会提到它。

这些点共同使我们得出结论，在使用后代选择器时，您希望选择器的最右边部分尽可能具体。这最大化了不匹配的元素数量，从而最小化了慢速 DOM 树搜索的数量。

所以回到你的例子中的两个选择器：如果你有多个标题，其中有多个导航，但只有少数几个有 class `.nav`，那么正确的效率会更高。如果您只有一个 ID 为 header 的 header 和一个 ID 为 nav 的 nav，那么它们将同样快速。

`header nav ul li`对比`#header .nav .menu`

与之前相同的规则适用于本案。然而，在这种情况下，由于这里有两个后代选择器，而不仅仅是一个，这一事实放大了速度上的差异。

如果您的页面有多个无序列表，那么您可能希望使用这两个选择器中的第二个，以防止`li`页面上的每个选择器匹配这个（更）复杂的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:38:42.660

这取决于它们将如何被使用。如果它们只需要设置一次样式，则使用 header {} 否则添加类和/或 ID。

# clojure - 用于序列理解的 clojure 一次添加两个元素

> ID：14156363
> 
> 赞同：2
> 
> 时间：2013-01-04T11:32:28.000
> 
> 标签：clojure

领悟：

```
(for [i (range 5])] i) 
```

...产量：（0 1 2 3 4）

有没有一种惯用的方法来获得 (0 0 1 1 2 4 3 9 4 16) （即数字及其平方），主要使用**for**理解？

到目前为止，我发现的唯一方法是：

```
(apply concat (for [i (range 5)] (list i (* i i)))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T22:11:10.970

实际上，`for`如果您考虑为每个值应用每个函数（恒等式和平方），则使用 only 非常简单。

```
(for [i (range 5),             ; for every value
      f [identity #(* % %)]]   ; for every function
  (f i))                       ; apply the function to the value

 ; => (0 0 1 1 2 4 3 9 4 16) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T12:09:27.403

由于 for 循环 x 次，它将返回 x 值的集合。多个嵌套循环（除非受`while`or限制`when`）将给出 x * y * z * ... 结果。这就是为什么外部串联总是必要的。

输入和输出之间存在类似的相关性，地图。但是，如果在map中给出了多个集合，则返回集合中的值的数量是最小集合参数的大小。

```
=> (map (juxt identity #(* % %)) (range 5))
([0 0] [1 1] [2 4] [3 9] [4 16]) 
```

连接 map 的结果是如此常见的 mapcat 被创建。正因为如此，有人可能会争辩说 mapcat 是一种比 for 循环更惯用的方式。

```
=> (mapcat (juxt identity #(* % %)) (range 5))
(0 0 1 1 2 4 3 9 4 16) 
```

虽然这只是 的简写`apply concat (map`，`forcat`但也可以轻松创建函数或宏。

但是，如果需要对集合进行累加，reduce 通常被认为是最惯用的。

```
=> (reduce (fn [acc i] (conj acc i (* i i))) [] (range 5))
[0 0 1 1 2 4 3 9 4 16] 
```

`for`和选项都`map`意味着遍历一个集合两次，一次用于范围，一次用于连接结果集合。该`reduce`选项仅遍历范围。

愿意分享为什么“主要使用 for 理解”是一项要求？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T12:04:56.443

我认为你做得对。

使用**flatten可以实现稍微压缩的方式**

```
(flatten (for [i (range 5)] [ i (* i i) ] )) 
```

但我会摆脱**for**理解，只使用**interleave**

```
(let [x (range 5)
      y (map #(* % %) x)]
  (interleave x y)) 
```

免责声明：我只是一个业余的clojurist ;)

# android - 使用上下文菜单动态更改 ListView 行的背景颜色

> ID：14156370
> 
> 赞同：0
> 
> 时间：2013-01-04T11:32:40.333
> 
> 标签：android, listview, colors, row

我想更改列表视图上单行的颜色。

我制作了一个自定义适配器，我想在行的上下文菜单上更改颜色：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    switch(item.getItemId()) {

        case NOTE_BACKGROUND:
            AdapterContextMenuInfo infos = (AdapterContextMenuInfo) item.getMenuInfo();

    getListView().getAdapter().getView(infos.position,           null,null).setBackgroundColor(Color.GREEN);
            notes.notifyDataSetChanged();
            return true;
    }
    return super.onContextItemSelected(item);
} 
```

但它不起作用......我不知道为什么......有什么想法吗？多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:40:02.253

您不应该`getView()`自己调用适配器，`ListView`而是调用它。此外，当您在一个视图上设置颜色，然后滚动列表时，相同颜色的视图将再次出现（由 重新使用`ListView`）用于另一个项目。

使用 a`Map<Integer,Color>`来存储适配器的项目索引和颜色。

覆盖`getView()`适配器，并设置从此地图返回的视图的颜色。

在上下文菜单中选择，将索引和颜色放入地图，然后调用`notifyDataSetChanged()`适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:37:24.113

当您这样做时`notifyDataSetChanged`，所有视图都将被重绘，并且适配器将为行返回新视图。如果它是自定义适配器，您应该在适配器中有一个字段，用于存储要更改背景颜色（或类似内容）的行的索引，然后相应地返回正确的视图。

# javascript - 如何使动态创建的div可编辑

> ID：14156371
> 
> 赞同：4
> 
> 时间：2013-01-04T11:32:40.907
> 
> 标签：javascript, jquery, html, jquery-ui, onclick

我想让**动态创建的****div**可编辑。这也是**可拖动**的div 。

 ****这是我尝试过的

```
1)$("#divid").attr('contentEditable','true');

2)$("#divid").live("click",function(){
     $(this).click('contentEditable',true);
  });

3)$("#divid").click('contentEditable',true); 
```

但以上都不起作用。任何想法如何使它工作！

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T11:39:00.353

由于您有一个动态创建的 div 使用`.on()`处理程序，并且`.prop()`：

```
 $(document).on("click", "#divid", function(){
     $(this).prop('contentEditable',true);
  }); 
```

在小提琴中找出：http: [//jsfiddle.net/SEvDe/](http://jsfiddle.net/SEvDe/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:44:37.453

[小提琴](http://jsfiddle.net/VV7BW/1/)

```
$("#test").get(0).contentEditable = "true";
$("#test1").attr('contentEditable',true); 
```

它是一种魅力。

用**javascript**你可以试试这个

```
document.getElementById("contentDiv").contentEditable = "true"; 
```****

# git - 是否可以仅通过特定提交添加的修改来 git grep ？

> ID：14156375
> 
> 赞同：2
> 
> 时间：2013-01-04T11:32:54.857
> 
> 标签：git, grep

假设我提交了 20 个文件，其中可能包含类似`I18n.t`. 是否可以找到所有这些行，但只能在该提交修改的文件中找到？如果我这样做：

```
git grep I18n.t commit_sha 
```

它也找到了我在其他文件中的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:41:02.347

您可以使用`git show`：

```
git show commit_sha | grep I18n.t 
```

# objective-c - getchar() 不按“输入”按钮

> ID：14156378
> 
> 赞同：1
> 
> 时间：2013-01-04T11:33:06.780
> 
> 标签：objective-c, c, console-application

> **可能重复：**
> [如何避免使用任何 getchar() 按下回车键](https://stackoverflow.com/questions/1798511/how-to-avoid-press-enter-with-any-getchar)

我需要在控制台 Objective-C 应用程序中按下键盘键而不按“Enter”按钮

此代码仅在我按“Enter”后才读取按键代码

```
int key;
key=getchar();
NSLog(@"%i", key); 
```

我需要这样的东西，但不按“Enter”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:46:54.657

默认情况下，控制台处于“规范”模式，它对输入进行大量处理，并且在遇到新行之前不会将其传递给进程的打开文件描述符。您想`stdin`进入“非规范”模式，以获取到达时的字节：

```
#include <termios.h>

struct termios terminal_info;
tcgetattr(STDIN_FILENO, &terminal_info);
terminal_info.c_lflag &= ~ICANON;
tcsetattr(STDIN_FILENO, TCSANOW, terminal_info); 
```

（您也应该检查`tcgetattr()`and返回的错误`tcsetattr()`。）

# casperjs - WaitFor、Ajax 和 Tester API

> ID：14156383
> 
> 赞同：1
> 
> 时间：2013-01-04T11:33:17.200
> 
> 标签：casperjs

如果我想使用 tester API，并使用 say `assertSelectorExists`，我该如何 waitFor 选择器？我知道您可以使用 waitForSelector 的 onTimeout 回调并在其中手动创建一条消息，但这似乎违背了能够断言的目的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T13:27:28.657

像这样的东西？

```
casper.waitForSelector('#my-selector', function() {
    this.test.pass('selector found');
}, function() {
    this.test.fail('selector was not found');
}); 
```

# sublimetext2 - Sublime Text 2 build 命令忽略 shebang

> ID：14156387
> 
> 赞同：3
> 
> 时间：2013-01-04T11:33:34.593
> 
> 标签：sublimetext2, shebang

Sublime text 2.0.1 (Mac OSX) build 命令忽略了我的 python 文件顶部的 shebang 行。shebang 行具有我的 python 3.2 安装的完整路径：

```
#!/usr/local/bin/python3 
```

但是，使用的 python 版本始终是 2.7.2。我正在维护 2.7 和 3.2 的代码，因此必须依赖 shebang 线才能使用。

有没有办法配置 Sublime text 2 构建系统来查看 shebang？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:42:47.913

Sublime 不使用 shebang 来确定执行，它使用您的构建规则。您可以自定义 Python 构建规则以添加python2 和 python3 的**变体**。

*   [添加构建变体的官方说明。](http://docs.sublimetext.info/en/latest/reference/build_systems.html#variants)
*   [来自另一个 SO 问题的构建变体的简化示例。](https://stackoverflow.com/a/13888669/1309332)

请注意，对于构建变体，默认由`Command`+ `B`(Mac) 或`Control`+ `B`(Windows 和 Linux) 运行。第二个变体可以运行`Command`++ （Mac）或++ `Shift`（ Windows和Linux）。`B``Control``Shift``B`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T08:37:18.687

看看[Sublime Text Shebang](https://github.com/samizdatco/sublime-text-shebang)插件。

它基于 shebang 行添加了一些允许运行脚本的命令，但输出将放置在新缓冲区中，而不是在控制台中。

# magento - NGINX 虚拟/别名目录来运行存储

> ID：14156392
> 
> 赞同：1
> 
> 时间：2013-01-04T11:33:55.463
> 
> 标签：magento, nginx

嗨，我在 mysite.com 有一家 magento 商店

现在我想设置一个 url 来运行我的德语网站 mysite.com/german

使用相同的安装。我已经有一半工作配置，但我的问题是主页之外的所有 magento URL 404。这是我当前的配置。

```
server {

    listen 80;

    server_name mysite.com www.mysite.com;

    ####
    #
    #  BELOW THIS LINE IS MY ATTEMPT TO GET mysite.com/german to run from the same directory as mysite.com
    #
    ####

    location ~ /german(.*)\.php($|/) {
        fastcgi_pass 127.0.0.1:9000;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME /usr/share/nginx/www$1.php;
        fastcgi_param MAGE_RUN_CODE german;
        fastcgi_param MAGE_RUN_TYPE website;        
    }

    location ~ /german(.*) {
        index index.htm index.php;
        autoindex off;
        alias /usr/share/nginx/www$1;
    }

    location ~ /deutch/ {
        index index.htm index.php;
        try_files $uri $uri/ @handler;
    } 
```

旧配置：

```
 ###
    #
    # THIS BIT I THINK IS THE PART WHICH IS NOT QUITE WORKING, BUT I DON'T KNOW WHAT THE @handler PART DOES
    # 
    ###
    # This redirect is added so to use Magentos
    # common front handler when handling incoming URLs.
    location @handler {
        rewrite / /index.php;
    }

    ####
    #
    # BELOW THIS LINE IS THE ORIGINAL CONFIG WHICH RUNS mysite.com NO PROBLEMS
    #
    ####

    root /usr/share/nginx/www;

    location / {
        index index.htm index.php;
        try_files $uri $uri/ @handler;
    }

    # Deny access to specific directories no one
    # in particular needs access to anyways.
    location /app/ { deny all; }
    location /includes/ { deny all; }
    location /lib/ { deny all; }
    location /media/downloadable/ { deny all; }
    location /pkginfo/ { deny all; }
    location /report/config.xml { deny all; }
    location /var/ { deny all; }

    # Allow only those who have a login name and password
    # to view the export folder. Refer to /etc/nginx/htpassword.
    location /var/export/ {
        auth_basic "Restricted";
        auth_basic_user_file htpasswd;
        autoindex on;
    }

    # Deny all attempts to access hidden files
    # such as .htaccess, .htpasswd, etc...
    location ~ /\. {
         deny all;
         access_log off;
         log_not_found off;
    }

    # This redirect is added so to use Magentos
    # common front handler when handling incoming URLs.
    location @handler {
        rewrite / /index.php;
    }

    # Forward paths such as /js/index.php/x.js
    # to their relevant handler.
    location ~ .php/ {
        rewrite ^(.*.php)/ $1 last;
    }

    # Handle the exectution of .php files.
    location ~ .php$ {
        if (!-e $request_filename) {
            rewrite / /index.php last;
        }
        expires off;
        fastcgi_pass 127.0.0.1:9000;
        #fastcgi_param HTTPS $fastcgi_https;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param MAGE_RUN_CODE english;
        fastcgi_param MAGE_RUN_TYPE website;
        include fastcgi_params;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:45:34.703

```
location ~* \.php$ {
    if (!-e $request_filename) {
        rewrite / /index.php last;
    }
    expires off;
    set $runcode english;
    set $runtype website;
    if ( $request_uri ~* ^/german ) {
            set $runcode german;
    }
    fastcgi_pass 127.0.0.1:9000;
    #fastcgi_param HTTPS $fastcgi_https;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_param MAGE_RUN_CODE $runcode;
    fastcgi_param MAGE_RUN_TYPE $runtype;
    include fastcgi_params;
} 
```

那是第 1 部分，第 2 部分是确保代码从相同的代码库运行。一种解决方案是将目录符号链接到根目录，在 /usr/share/nginx/www 目录中执行以下命令：

```
ln -s . ./german 
```

这是肮脏的，但它的工作原理;）

我们使用以下内容重定向到正确的索引文件：

```
location /german {
    if ( -e $request_filename ) {
        break;
    }
    rewrite ^/german(.*)$   /german/index.php last;
}
    #
    #       Redirection of subdirectory php's to their respective php files
    #       
    location ~ .php/ {
        rewrite ^(.*.php)/ $1 last;
    }
    #
    #       Redirect everything else to root path
    #
    location / {
            try_files $uri $uri/ /index.php?$args;
    } 
```

# javascript - MongoDB中数据的非规范化

> ID：14156395
> 
> 赞同：4
> 
> 时间：2013-01-04T11:34:13.797
> 
> 标签：javascript, node.js, mongodb, database

我正在学习 MongoDB，我有一个关于数据重复的问题。在 SQL 世界中，您尝试规范化数据。例如，我有一个包含类别的表格和另一个包含产品的表格。每个产品可能属于许多类别，因此这些表之间存在连接。

但是，我认为在 MongoDB 中您不这样认为是对的吗？相反，每个产品是否都有嵌入的类别文档？就是这样吗？您不在乎数据是否重复？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T12:52:36.020

> 在 SQL 世界中，您尝试规范化数据

并非总是如此，标准化到死亡点会导致性能下降，但我个人确实不会像使用 SQL 那样对 MongoDB 应用相同的标准化。

如果您知道规范化的形式（[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)），我喜欢认为 MongoDB 会进入 1NF，然后再返回去规范化。

> 您不在乎数据是否重复？

哦，是的，我们有。如果数据重复错误，更新会很痛苦。

让我给你举个例子：这将是两个独立的实体`category`，`product`这是不可否认的。这两个实体被规范化（的重复数据已从 中`product`分离出来`category`）。另一种思考方式是：*所有产品都只存在于一个类别中吗？*

因此，在顶级实体上，如您所见，相同的规则相对适用，1NF 很容易应用于 MongoDB。

当然，在重复方面，您不希望将每个产品单独存储在每个类别中（我对上面的问题回答否），因此您自然希望将类别和产品分开。

您通常会在此处与中间规范化表建立多对多关系。这就是反规范化可以发挥作用的地方。您可以说一个类别将具有该类别独有的产品列表，因此您可以将多对多关系表反规范化为类别行作为列表（或反过来进入产品行）。这不会产生重复，因为该列表对于该类别是唯一的（很可能）。这当然意味着类别或产品将`_id`包含相关行的列表而不是对象本身。

有时重复是必要的，主要是为了优化或解决没有 JOIN 的问题；如果您曾经做过足够大的站点，则此规则也适用于 SQL。

复制的典型使用场景是统计数据的聚合字段，例如 Facebook 帖子分享和评论，甚至该帖子的 5 条最新评论也可能会复制到帖子行。

因此，这不是忽略模式设计的情况，而是更多地针对 MongoDB 的特性对其进行调整。通常，如果您这样做，您会发现您自然而然地设计了一个好的模式。

作为附加参考，您可以在此处参考：http: [//docs.mongodb.org/manual/core/data-modeling](http://docs.mongodb.org/manual/core/data-modeling)

# jquery - 达到限制时禁用/启用可排序

> ID：14156397
> 
> 赞同：1
> 
> 时间：2013-01-04T11:34:30.427
> 
> 标签：jquery, jquery-ui-sortable

我有两个列表，可排序和可排序连接。当我在可排序的连接列表中达到 5 个项目的限制时，我不希望能够添加另一个项目。但是，如果我选择删除连接列表中的一个项目，我希望该列表再次处于活动状态。我还希望能够继续对第二个列表进行排序。

列出一个

列出两个

我最初想到使用 $(this).sortable("disable");

但这会完全禁用 LIST TWO。然后，我将无法从列表中删除项目以使其低于配额。

我还发现： $(ui.sender).sortable('cancel'); 取消当前拖动的项目。问题是我正在移动克隆，所以我最终得到了 LIST ONE 中的克隆，我只想将其删除。

注意 DELETE 功能是当我想从连接列表中删除一个项目时。正在工作。但是一旦我达到配额并禁用可排序。它也不允许删除项目。

任何想法表示赞赏。

[工作示例](http://niagara.heliohost.org/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:59:33.713

也许您可以在更新回调函数中像这样设置它：

代替：

```
if(($(this).find('li').length) >4) {
                    //alert('Player limit reached!');
                    $(this).sortable("disable");    
                } 
```

经过：

```
if(($(this).find('li').length) >5) {
                    $(ui.item).remove();    
                } 
```

肯定有更优雅的方法可以做到这一点。

# java - sql update 语句不能在 Java 中工作，而是手动工作？

> ID：14156399
> 
> 赞同：2
> 
> 时间：2013-01-04T11:34:32.663
> 
> 标签：java, sql, postgresql, jdbc

编辑：我有一封信，现在正在工作。

我有以下sql语句

```
UPDATE names set sent_count = sent_count + 1  where user_name = 'name' AND category = 'test' AND service = 'test' 
```

这可以通过每次从 PGAdmin3 运行 sql 时增加 sent_count 来工作，但是我在使用 Postgresql JDBC 的 Java 程序中有以下方法，它没有抛出任何异常，但它没有增加 sent_count 这里是下面的方法

```
public void increaseUsernameResponseCount(String userName, String category, String service, String country) throws SQLException
{
    Connection conn = null;
    PreparedStatement pst = null;
    // ResultSet rs = null;

    try
    {
        Class.forName("org.postgresql.Driver");
        conn = DriverManager.getConnection(url, props);
        pst = conn.prepareStatement("UPDATE names set sent_count = sent_count + 1  where user_name = ? AND category = ? AND service = ?");
        pst.setString(1, userName);
        pst.setString(2, category);
        pst.setString(3, service);

        int count = pst.executeUpdate();
        System.out.println(count);

    }
    catch (Exception e)
    {
        System.out.println(e);
    }
    finally
    {
        pst.close();
        conn.close();
    }
} 
```

运行此方法时，计数计数器打印 0。知道为什么它在该方法中不起作用，但在我执行 sql 查询时它起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:41:23.800

检查您是否有两个包含同一个表的数据库。如果您在两个不同的位置工作并在从转储中导入数据库名称时不断更改数据库名称，通常会发生这种情况。

还要检查数据库的“url”和“props”字符串是否正确。

# php - 在 PHP 中匹配 128 个字符的密码哈希 - 使用 Ruby on Rails 加密

> ID：14156400
> 
> 赞同：2
> 
> 时间：2013-01-04T11:34:44.050
> 
> 标签：php, ruby-on-rails, sha1

我们有一个用 Ruby on Rails 构建的网站。用户注册是通过 Ruby 中的站点处理的，密码使用 Ruby 的 SHA1.HexDigest 函数进行哈希处理，每个用户使用不同的盐。我需要做的是 - 在 PHP 中创建一个 web 服务，它将登录已经在网站上注册的用户。为此，我需要从用户输入中生成相同的哈希值。由于我对 Ruby 的了解几乎为零，因此我对如何使用 PHP 重现相同内容进行了大量研究。我浏览了以下链接，但无济于事。 [如何在 PHP 中生成密码，就像 Devise Gem 在 Ruby on Rails 中所做的那样](https://stackoverflow.com/questions/10199877/how-to-generate-the-password-in-php-as-it-did-by-devise-gem-in-ruby-on-rails)

Ruby 还会多次处理/散列输入（即延伸，您可以在 Ruby 中称之为）。

保存在数据库中的散列长度为 128 个字符。盐长度为 20 个字符。

不知道是不是也用了某种辣椒。

例子，

用户输入 = 123456 盐 = g0i3A51x0xa7wrfWCMbG

数据库密码（128 个字符哈希）= 5374f9853f96eaa5b3c1124f9eb1dbbb63fb5c5ce40abb41ec88c745ec3455328685f3046cac8c356a4d81dbd315fd09173c54dc94a4208e5bc091776b02eb7

如果有人可以使用上面给出的用户输入和盐，用 PHP 复制相同的哈希，那么请分享代码。请帮忙。这对我们很有帮助。

谢谢

* * *

```
class Sha1 < Base
      # Gererates a default password digest based on stretches, salt, pepper and the
      # incoming password.
      def self.digest(password, stretches, salt, pepper)
        digest = pepper
        stretches.times { digest = self.secure_digest(salt, digest, password, pepper) }
        digest
      end

    private

      # Generate a SHA1 digest joining args. Generated token is something like
      #   --arg1--arg2--arg3--argN--
      def self.secure_digest(*tokens)
        ::Digest::SHA1.hexdigest('--' << tokens.flatten.join('--') << '--')
      end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:46:30.757

我会从两边的简单散列程序开始，拉伸和加盐很好，但是从没有这些开始，然后在两边做一个简单的散列，看看你是否能让它们对齐。然后你可以稍后再添加盐/拉伸。

在红宝石方面，从以下内容开始：

```
 require 'digest/sha1'
 Digest::SHA1.hexdigest(string) 
```

当您散列无法解密时，您必须在两侧进行散列并比较结果。

如果你真的想加密然后解密，试试这个：

[http://jnylund.typepad.com/joels_blog/2007/11/cross-language-.html](http://jnylund.typepad.com/joels_blog/2007/11/cross-language-.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:16:21.973

上述 Ruby 代码的直接翻译是：

```
function hashPassword($password, $stretches, $salt, $pepper) {
    $digest = $pepper;
    for ($i = 0; $i < $stretches; $i++) {
        $digest = sha1("--$salt--$digest--$password--$pepper--");
    }
    return $digest;
} 
```

要使用 SHA-512（128 十六进制数字输出）而不是 SHA-1（40 十六进制数字输出），请替换`sha1(...)`为`hash('sha512', ...)`.

我无法根据您发布的哈希检查此代码，因为“胡椒”是我不知道的秘密配置设置。如果未配置，请尝试空字符串。

# php - 将字符串从网页传递到 php 再到 Obj-C 命令行工具的正确方法

> ID：14156403
> 
> 赞同：3
> 
> 时间：2013-01-04T11:35:00.207
> 
> 标签：php, javascript, objective-c, encoding, shell-exec

**前言：**

我有一个带有表单和文本字段的网页。

1) 提交时，字段中的文本通过 ajax 发送到 php 脚本（使用 GET 方法）。

2) php 脚本获取文本并将其作为参数传递给 shell 工具。

3）shell C 工具将**argc**解析为一个 unichars 数组（在我当前的实现中实际上是一个 NSString）

（*4.. 5.. 6.. 然后该工具完成了他的工作，将结果返回到标准输出，该 php 脚本作为对网页的响应返回...*）

我正在寻找*正确*/*规范*/“ *unicode* ”的方式来执行每个步骤，以便：内容被正确编码和保存，不会出现安全问题。

**我现在在做什么：**

1）（**JavaScript**）以这种方式从表单中检索文本

```
theText = $('#theField').attr('value'); 
```

并以这种方式发送到服务器

```
httpReq.open('GET','myScript.php?theText=' + encodeURIComponent(theText),true); 
```

2) ( **PHP** ) 我得到文本

```
$theText=(isset($_GET["theText"])?$_GET["theText"]:""); 
```

我调用 C 工具

```
$cmd = "/usr/bin/thetool -theText ".escapeshellarg($theText);
echo shell_exec( $cmd ); 
```

3）（**Objective-C**）我在 MacOS X 上，所以我利用 NSString 和 NSUserDefaults 类（但一个普通的 C 解决方案对我也有好处，假设我最终会得到一个 unichars 数组）

```
int main(int argc, const char * argv[])
{
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSString       *theText =      [userDefaults stringForKey: @"theText"]; 
```

**问题）**

这是好方法吗？

调用 shell_exec 时单独使用**escapeshellarg**是否安全？

如果用户输入一些特殊的东西，我会不会丢失一些字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:15:23.473

等待一个称职的答复，我已经开始做一些**经验**测试......

首先我改变了

```
echo shell_exec( $cmd ); 
```

至

```
echo $cmd; 
```

查看在表单中输入的各种文本的命令行调用结果。似乎PHP 端的**escapeshellarg**做得很好。

传递给工具的文本似乎总是在单引号之间正确密封，“危险”字符很好地转义。我发现无法篡改工具调用。

然后我测试了传递的文本，看看是否有什么地方丢失了。

我以这种方式设置了 C 工具并寻找输出

```
int main(int argc, const char * argv[])
{
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSString       *theText =      [userDefaults stringForKey: @"theText"];

    int i;
    unichar c;

    for(i=0;i<[theText length];i++)
    {
        c = [searchString characterAtIndex:(NSUInteger) i];
        printf("%d\n",c);
    }

    return 0;
} 
```

做了各种尝试。似乎一切正常。作为最后一个测试，我在表格中输入了“MUSICAL SYMBOL G CLEF”

[http://www.fileformat.info/info/unicode/char/1d11e/index.htm](http://www.fileformat.info/info/unicode/char/1d11e/index.htm)

事实证明，它以一对 unichars 的形式**正确地结束了该工具**

55348 56606

（**这是一个非常特殊的字符，其代码超过 65535，它需要用几个代理 unichars 表示。这是我发现的最极端的情况*）。

无论如何，正如我在开始时所说的，这些只是经验测试。我不喜欢仅仅因为通过了十几个测试就认为合理的代码是好的。我很高兴收到意见或建议（或警告！）。

我在 Mac OS X - 客户端的 Firefox - Mac OS X - 服务器端的 Mamp 上进行了测试。

# javascript - 是否有允许动态操作网格布局的开源框架/库？

> ID：14156404
> 
> 赞同：2
> 
> 时间：2013-01-04T11:35:04.097
> 
> 标签：javascript, jquery, html, twitter-bootstrap, grid-layout

通常，当我用 HTML 制作网站时，我使用 Twitter Bootstrap 网格并使用“容器”、“行”和“跨度”指定布局，并将所有内容放在其中。

我正在寻找一种机制来从浏览器窗口中创建这些布局，而无需通过单击、调整大小、拖放来编写代码。

有点像这样 - [http://www.dynamicdashboards.net/](http://www.dynamicdashboards.net/)

# android - 在 Android webview 中通过 iframe 加载 Youtube 视频

> ID：14156411
> 
> 赞同：12
> 
> 时间：2013-01-04T11:35:37.650
> 
> 标签：android, iframe, youtube, android-webview

我想使用 iframe 将 youtube 视频加载到 Android webview

这是我的布局 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/white"
android:id="@+id/mainLayout">

<WebView
    android:background="@android:color/white"
    android:id="@+id/webView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
</RelativeLayout> 
```

我的代码是：

```
public class WebTube extends Activity {

private WebView wv;

String html = "<iframe class=\"youtube-player\" style=\"border: 0; width: 100%; height: 95%; padding:0px; margin:0px\" id=\"ytplayer\" type=\"text/html\" src=\"http://www.youtube.com/embed/WBYnk3zR0os"
            + "?fs=0\" frameborder=\"0\">\n"
            + "</iframe>";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    wv = (WebView)findViewById(R.id.webView); 
    wv.getSettings().setJavaScriptEnabled(true);
        wv.loadDataWithBaseURL("", html , "text/html",  "UTF-8", "");

     }
} 
```

我也提供`<uses-permission android:name="android.permission.INTERNET"/>`

&`android:hardwareAccelerated="true"`

当我运行它时，我没有得到任何结果，它只是显示黑屏

我试过[这个](https://stackoverflow.com/questions/11117720/play-video-file-from-youtube-in-android?answertab=active#tab-top)。但这为我提供了视频`.3gp Quality`。但我需要来自 youtube 的原始质量视频。这就是我使用`iframe`.

我尝试使用`<object></object>`and`<video></video>`而不是`iframe`. 但这并没有解决我的问题。

当我在模拟器上运行此代码时，它显示

在按下播放按钮之前

![模拟器上的 iframe 结果](../Images/a51dd764b0233ed7620e2f662af443bb.png)

在视频上按下播放按钮后

![点击播放按钮时模拟器上的 iframe 结果](../Images/0295f59c3ce343ae509723afbf0e9dcb.png)

我认为我们无法在模拟器上流式传输视频，因为它是虚拟设备

但是当我在手机上运行它时，它甚至没有显示这个结果。

我尝试 iframe 并附加一个文档，它在手机和模拟器上都可以正常工作

```
String customHtml = "<iframe src='http://docs.google.com/viewer?url=http://www.iasted.org/conferences/formatting/presentations-tips.ppt&embedded=true' width='100%' height='100%' style='border: none;'></iframe>"; 
```

所以请帮我把视频加载到这个框架。

（我在手机上运行它）。有什么问题？iframe 也可以在 Android 2.1 上运行吗？

有人试过[Youtube Api](https://developers.google.com/youtube/android/player/downloads/)吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-04-04T07:42:33.127

我有完全定制的 ifra 用于 youtube 视图

```
public class Act_VideoPlayer extends Activity {

    WebView webView;
    ProgressBar progressBar;
    ImageView back_btn;

    String video_url = "KK9bwTlAvgo", html = "";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.full_screen_youtube_video_screen);

        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        back_btn = (ImageView) findViewById(R.id.full_videoview_btn);
            back_btn.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    webView.loadData("", "text/html", "UTF-8");
                    finish();
                }
            });

            webView = (WebView) findViewById(R.id.webView);
               progressBar = (ProgressBar) findViewById(R.id.progressBar);

            if (video_url.equalsIgnoreCase("")) {
                finish();
                return;
            }

            WebSettings ws = webView.getSettings();
            ws.setLayoutAlgorithm(WebSettings.LayoutAlgorithm.SINGLE_COLUMN);
            ws.setPluginState(WebSettings.PluginState.ON);
            ws.setJavaScriptEnabled(true);
            webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
            webView.reload();

            if (networkUtil.isConnectingToInternet(Act_VideoPlayer.this)) {
                html = getHTML(video_url);
            } else {
                html = "" + getResources().getString(R.string.The_internet_connection_appears_to_be_offline);
                CustomToast.animRedTextMethod(Act_VideoPlayer.this, getResources().getString(R.string.The_internet_connection_appears_to_be_offline));
            }

            webView.loadData(html, "text/html", "UTF-8");

            WebClientClass webViewClient = new WebClientClass(progressBar);
            webView.setWebViewClient(webViewClient);
            WebChromeClient webChromeClient = new WebChromeClient();
            webView.setWebChromeClient(webChromeClient);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        try {
            webView.loadData("", "text/html", "UTF-8");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onBackPressed() {
        super.onBackPressed();
        try {
            webView.loadData("", "text/html", "UTF-8");
            finish();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public class WebClientClass extends WebViewClient {
        ProgressBar ProgressBar = null;

        WebClientClass(ProgressBar progressBar) {
            ProgressBar = progressBar;
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            super.onPageStarted(view, url, favicon);
            ProgressBar.setVisibility(View.VISIBLE);
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);
            ProgressBar.setVisibility(View.GONE);
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            LogShowHide.LogShowHideMethod("webview-click :", "" + url.toString());
            view.loadUrl(getHTML(video_url));
            return true;
        }
    }

    public String getHTML(String videoId) {
        String html = "<iframe class=\"youtube-player\" " + "style=\"border: 0; width: 100%; height: 96%;"
                + "padding:0px; margin:0px\" " + "id=\"ytplayer\" type=\"text/html\" "
                + "src=\"http://www.youtube.com/embed/" + videoId
                + "?&theme=dark&autohide=2&modestbranding=1&showinfo=0&autoplay=1\fs=0\" frameborder=\"0\" "
                + "allowfullscreen autobuffer " + "controls onclick=\"this.play()\">\n" + "</iframe>\n";
        LogShowHide.LogShowHideMethod("video-id from html url= ", "" + html);
        return html;
    }

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-15T14:33:56.470

如[android Webview 文档](http://developer.android.com/reference/android/webkit/WebView.html)中所述，

> **HTML5 视频支持**
> 
> 为了在您的应用程序中支持内联 HTML5 视频，您需要**打开硬件加速**，并**设置一个 WebChromeClient**。
> 
> 对于全屏支持，需要实现 onShowCustomView(View, WebChromeClient.CustomViewCallback) 和 onHideCustomView()，getVideoLoadingProgressView() 是可选的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-25T14:05:15.593

这对我有用：

```
WebSettings webSettings = mWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);

        String frameVideo = "<html><body>Youtube video .. <br> <iframe width=\"320\" height=\"315\" src=\"https://www.youtube.com/\" frameborder=\"0\" allowfullscreen></iframe></body></html>";

        mWebView.loadData(frameVideo, "text/html", "utf-8");

        mWebView.loadUrl("http://www.youtube.com/");

        mWebView.setWebViewClient(new WebViewClient()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-12T09:59:32.283

试试这个它工作正常..

```
 mWebView = (WebView) findViewById(R.id.web);
    String  videoURL = "https://www.youtube.com/embed/R52bof3tvZs";

    String vid = "<html><body style=\"margin: 0; padding: 0\"><iframe  width=\"100%\" height=\"100%\" src=\""+videoURL+"\" type=\"text/html\" frameborder=\"0\"></iframe><body><html>";

    WebChromeClient mWebChromeClient = new WebChromeClient(){
        public void onProgressChanged(WebView view, int newProgress) {
        }
    };

    mWebView.getSettings().setPluginState(WebSettings.PluginState.ON);
    mWebView.setWebChromeClient(mWebChromeClient);
    mWebView.setWebViewClient(new WebViewClient() {
        public void onPageFinished(WebView view, String url) {
            mWebView.loadUrl("javascript:(function() { document.getElementsByTagName('video')[0].play(); })()");
        }
    });
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setAppCacheEnabled(true);
    mWebView.setInitialScale(1);
    mWebView.getSettings().setLoadWithOverviewMode(true);
    mWebView.getSettings().setUseWideViewPort(true);
    if (Build.VERSION.SDK_INT < 17) {
        Log.i("GPSNETWORK", "<17");
    } else {
        Log.i("GPSNETWORK", Build.VERSION.SDK_INT+">=17");
        mWebView.getSettings().setMediaPlaybackRequiresUserGesture(false);
    }

    String myUrl = "&lt;html&gt;&lt;body style='margin:0px;padding:0px;'&gt;\n" +
            "        &lt;script type='text/javascript' src='http://www.youtube.com/iframe_api'&gt;&lt;/script&gt;&lt;script type='text/javascript'&gt;\n" +
            "                var player;\n" +
            "        function onYouTubeIframeAPIReady()\n" +
            "        {player=new YT.Player('playerId',{events:{onReady:onPlayerReady}})}\n" +
            "        function onPlayerReady(event){player.mute();player.setVolume(0);player.playVideo();}\n" +
            "        &lt;/script&gt;\n" +
            "        &lt;iframe id='playerId' type='text/html' width='1280' height='720'\n" +
            "        src=\""+videoURL+"\"?enablejsapi=1&amp;rel=0&amp;playsinline=1&amp;autoplay=1&amp;showinfo=0&amp;autohide=1&amp;controls=0&amp;modestbranding=1' frameborder='0'&gt;\n" +
            "        &lt;/body&gt;&lt;/html&gt;";
    mWebView.loadData(""+Html.fromHtml(myUrl), "text/html", "UTF-8"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T11:51:04.777

我不是 Android webview 方面的专家，但我在网页上遇到了类似的问题。

我必须做的是使用标签并确保它在标签中有 onclick="this.play();。onclick 事件专门用于 Android。Chrome、Safari、Firefox 不需要它。

例如：

```
<video id="video" width="320" height="240" autobuffer controls onclick="this.play();"> 
```

如果没有 onclick，Android 浏览器将无法运行。由于 webview 正在调用浏览器，我怀疑它是一样的。

并确保在源标签中您不使用编解码器属性。

希望这对您有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T12:26:09.367

这并不完全是您问题的直接答案，但我相信您可能想要使用新发布的 Android Youtube API。它应该允许将 youtube 视频播放添加到您的应用程序中，因此您不必将它们注入 iFrame 中的 webview 中。这很愚蠢，而且并非所有 Android 设备都会安装 Flash :)

[https://developers.google.com/youtube/android/player/](https://developers.google.com/youtube/android/player/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-19T20:26:37.310

你可以再次访问我的[问题](https://stackoverflow.com/questions/13537202/play-high-quality-youtube-videos-using-videoview/14418448#14418448)。我创建了一个功能，为您提供所有 youtube 视频的直接链接（包括总部链接）。现在您可以使用 mp4 等代替可怜的 3gp。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-01T14:18:39.113

使用 WebChromeClient 允许您处理 Javascript 对话框、网站图标、标题和进度：

```
wv = setWebChromeClient(new WebChromeClient()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-20T12:44:30.817

它工作正常

我的 Java 文件

```
 String path="<iframe src='https://www.youtube.com/embed/94zICkZLQpY' width='100%' height='100%' style='border: none;'></iframe>";
    webView.loadData(path,"text/html","utf-8");
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebChromeClient(new WebChromeClient()); 
```

这里**94zICkZLQpY**是您将在任何 youtube 视频中获得的嵌入式代码 我的正常 youtube 视频链接是可观看的 [https://www.youtube.com/watch?v=94zICkZLQpY&feature=youtu.be](https://www.youtube.com/watch?v=94zICkZLQpY&feature=youtu.be)

# android - 完成和更新特定先前活动的有效方式

> ID：14156412
> 
> 赞同：0
> 
> 时间：2013-01-04T11:35:39.947
> 
> 标签：android, activity-finish

正如我在标题中提到的，我有两个问题。

`1)`我在三个活动中有用户详细信息的表格。

**活动层次结构：**

`ActivityOne ---> ActivityTwo--> ActivityDetails1---> ActivityDetails2---->ActivityDetails3`---> `ResultActivity`。

在此层次结构中，**详细信息表单**从 ActivityDetails1 开始。`Submit button is in ActivityDetails3`. 因此，当我单击提交按钮时，我将在 3 个活动中输入的所有详细信息提交到数据库。如果提交成功，我将按意图转到其他活动（ResultActivity）。

如果失败，它将停留在相同的 ActivityDetails3 上。每当提交成功时，除了去其他活动外，我还需要完成 ActivityDetails 活动中的 3 个。为此，我通过将上下文设置为静态作为此[链接](https://stackoverflow.com/questions/10379134/finish-an-activity-from-another-activity)中的标记答案来完成这 3 个活动。但这似乎效率低下，因为静态上下文可能会导致内存泄漏。有人可以建议我一种有效的方法吗？

`2)`提交成功后，我必须通过使用用户提交的详细信息之一设置操作栏项目标题来更新`ActivityOne`甚至`ActivityTwo`去其他活动（ ）。`ResultActivity`我可以让后面的活动更新标题，但不能更新以前的活动。有人可以指导我如何刷新堆栈中的以前的活动，以便我在操作栏上的操作项的标题也会在以前的活动中更改。

如果有人可以帮助我解决上述两个问题，我将不胜感激。相关的代码片段表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:01:41.573

**不要键入任何大段落。因为没有人有耐心阅读大段落
键入您的问题，问题，您想要的简短，简单，易于理解的内容。**
请参考以下场景活动 A 和活动 B。从 A 转到 B。如果 B 执行某些操作并完成，则结果会在 A 中更新。
在上述场景中，您使用以下技术`protected void onActivityResult(int requestCode, int resultCode, Intent data)` 在 B 退出后在 A 中放置并处理更新并在 B 调用**finish()**之前根据需要设置结果代码

# typescript - 与 TypeScript 中的扩展类交叉引用

> ID：14156414
> 
> 赞同：3
> 
> 时间：2013-01-04T11:35:46.757
> 
> 标签：typescript

我发现了一个奇怪的错误。

如果您在不同的文件中有两个类，例如 class **B**扩展了 class **A**，并且 class **A有一个类型为****B**的变量，TypeScript 会使用 --out main.js 命令以错误的顺序编译（当您将整个项目编译到一个文件中时） . 错误的顺序导致 javascript 抛出错误：*Uncaught TypeError: Cannot read property 'prototype' of undefined* 这是因为代码中的类**B**比**A**早，它想使用它。

这是最简单的例子：

**A.ts**

```
///<reference path='B.ts'/>

class A
{
    public b: B;

    constructor()
    {
    }

    init()
    {
        this.b=new B();
    }
} 
```

**B.ts**

```
///<reference path='A.ts'/>
class B extends A
{
    constructor()
    {
        super();
    }
} 
```

**应用程序.ts**

```
///<reference path='A.ts'/>
var a: A=new A();
a.init(); 
```

**生成的 main.js**

```
var __extends = this.__extends || function (d, b) {
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var B = (function (_super) {
    __extends(B, _super);
    function B() {
        _super.call(this);
    }
    return B;
})(A);
var A = (function () {
    function A() {
    }
    A.prototype.init = function () {
        this.b = new B();
    };
    return A;
})();
var a = new A();
a.init();
//@ sourceMappingURL=main.js.map 
```

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:04:20.267

我不确定你的循环依赖。如果你想替换类，那么依赖关系真的应该是一个方向。这是一个例子：

```
class A {
    constructor(public b: A)
    {
    }
}

class B extends A
{
    constructor()
    {
        super(this);
    }
}

var a = new A(new B());
var b = new B(); 
```

现在您的“b.ts”文件只需要依赖于“a.ts”文件 - 而不是相反。因为 B 扩展了 A，所以您可以在创建新 A 时传入 B 的实例。因为依赖是单向的，所以 TypeScript 现在有机会以正确的顺序编译事物。

![这是显示依赖问题的图片：在此处输入图片描述](../Images/7369d14ff94195089f799f7b2ba8c6c5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:05:38.050

使用`export`声明的打字稿模块或类或接口上的语句，然后您可以`import`使用所需的函数、类或其他任何东西。Typescript 引发错误，因为您尝试引用的变量不存在。

例如：

```
module API {
    export class Main {
        public name: string;
        public interest: string;

        constructor() {
            this.name = "Someone";
            this.interest = "web technology";
        }

        puts() {
            console.log(this.name, " like", this.interest);
        }
    }
} 
```

..然后您可以调用所需的功能。

```
import API;
var c = new API.Main(); 
```

# gtk - 尝试在 Windows 上使用 cairo 和 gtk+-3.6.1 制作一个简单的 rounded_rectangle 但出现问题

> ID：14156418
> 
> 赞同：1
> 
> 时间：2013-01-04T11:36:03.173
> 
> 标签：gtk, cairo

我尝试在 Windows 上使用 cairo 和 gtk+-3.6.1 制作一个简单的 rounded_rectangle，但出现问题。认为这个版本的 gtk+-3.6.1 在取自[http://www.tarnyko.net/en/](http://www.tarnyko.net/en/)的 Windows 上出现问题。以下是我的代码中的一些错误::blocks IDE

main.c（文件）；

```
#include <stdlib.h>
#include <gtk/gtk.h>
#include "roundedrectangle.h"

int main(int argc, char *argv[])
{
   gtk_init(&argc, &argv);
   GtkWidget *win = gtk_window_new(GTK_WINDOW_TOPLEVEL);
   //cairo_surface_t *surface = cairo_image_surface_create(CAIRO_FORMAT_ARGB32, 100, 100);
   //cairo_t *cr = cairo_create(surface);
   GtkWidget *image = gtk_image_new_from_file("C:/Users/Doudieu/Desktop/image.png");
   gtk_widget_set_app_paintable(image, TRUE);
   gtk_container_add(GTK_CONTAINER(win), image);
   struct user_data data = {50,50,100,100,20};
   user_t *dat;
   dat = &data;
   //g_signal_connect(G_OBJECT(win), "expose-event", G_CALLBACK(drawing), (gpointer)dat);
   g_signal_connect(G_OBJECT(image), "expose-event", G_CALLBACK(drawing), (gpointer)dat);
   gtk_widget_show_all(win);
   gtk_main();
   return 0;
} 
```

roundedrectangle.c（文件）：

```
#include "roundedrectangle.h"

 int rounded_rectangle(cairo_t *cr, double x, double y, double width, double height, double radius[4])
   {
       if(((width<2*radius[0])&&(width<2*radius[1])&&(width<2*radius[2])&&(width<2*radius[3]))||((width<2*radius[0])&&(width<2*radius[1])&&(width<2*radius[2])&&(width<2*radius[3])))
       {
           printf("values of radius not good\n");
           return -1;
       }
      double from_degre = PI/180;

      //Corner C
      cairo_arc(cr, x+width-radius[2], y+height-radius[2], radius[2], 0*from_degre, 90*from_degre);

      //Corner D
      cairo_arc(cr, x+radius[3], y+height-radius[3], radius[3], 90*from_degre, 180*from_degre);

      //Corner A
      cairo_arc(cr, x+radius[0], y+radius[0], radius[0], 180*from_degre, 270*from_degre);

      //Corner B
      cairo_arc(cr, x+width-radius[1], y+radius[1], radius[1], 270*from_degre, 360*from_degre);

      cairo_close_path(cr);
      return 0;
   }

int rounded_rectangle_uni(cairo_t *cr, double x, double y, double width, double height, double radius)
{
  double radius_uni[4] = {radius, radius, radius, radius};
  if( rounded_rectangle( cr, x, y, width, height, radius_uni ) == -1)
    {
           printf("values of radius not good\n");
           return -1;
    }
  return 0;
}

gboolean drawing(GtkWidget *win, cairo_t *cr, gpointer data)
{
   GtkAllocation allo;
   if(gtk_widget_get_app_paintable(win) == FALSE)
    {
        printf("background will be erase after\n");
        return FALSE;
    }
   cairo_t *c = gdk_cairo_create(GDK_DRAWABLE(win->window));
   gtk_widget_get_allocation(win, &allo);
   struct user_data dat = *((user_t *)data);
   cairo_set_source_rgba(c, 0.2, 0.1, 0, 1);
   cairo_set_line_width(c, 4);
   rounded_rectangle_uni(c, allo.x, allo.y, dat.width, dat.height, dat.border_radius);
   cairo_stroke(c);
   cairo_set_source_rgba(c, 0.0, 0.1, 0.2, 0.5);
   rounded_rectangle_uni(c, allo.x, allo.y, dat.width, dat.height, dat.border_radius);
   cairo_fill(c);
   cairo_destroy(c);
   return TRUE;
}

gboolean drawing1(GtkWidget *win, cairo_t *cr, gpointer data)
{
    return TRUE;
} 
```

roundedrectangle.h（文件）：

```
#ifndef ROUNDED_RECTANGLE_H_INCLUDED
#define ROUNDED_RECTANGLE_H_INCLUDED

#endif // ROUNDED_RECTANGLE_H_INCLUDED
#include <gtk/gtk.h>
#include <math.h>
#define PI  3.141592653589793238462643383
typedef struct user_data user_t;

int rounded_rectangle(cairo_t *cr, double x, double y, double width, double height, double radius[4]);
int rounded_rectangle_uni(cairo_t *cr, double x, double y, double width, double height, double radius);

struct user_data
   {
      double x;
      double y;
      double width;
      double height;
      int border_radius;
   };

gboolean drawing(GtkWidget *win, cairo_t *cr, gpointer data);
gboolean drawing1(GtkWidget *win, cairo_t *cr, gpointer data); 
```

来自代码块输出的错误：

```
-------------- Build: Debug in cairo (compiler: GNU GCC Compiler)---------------

mingw32-gcc.exe -mms-bitfields -Wall  -g  -mms-bitfields -Ic:/gtk+/include/atk-1.0 -Ic:/gtk+/include/cairo -Ic:/gtk+/include/gdk-pixbuf-2.0 -Ic:/gtk+/include/glib-2.0 -Ic:/gtk+/lib/glib-2.0/include -Ic:/gtk+/include/pango-1.0 -Ic:/gtk+/include -Ic:/gtk+/include/freetype2 -Ic:/gtk+/include/libpng14 -IC:/GTK+-3.6.1/include/gtk-3.0   -IC:\gtk+\include -IC:\gtk+\include\gtk-2.0 -IC:\gtk+\include\cairo -IC:\gtk+\include\gdk -IC:\gtk+\include\glib-2.0 -IC:\gtk+\lib\glib-2.0\include -IC:\gtk+\include\pango-1.0 -IC:\gtk+\lib\gtk-2.0\include -IC:\gtk+\include\atk-1.0 -IC:\gtk+\include\gdk-pixbuf-2.0  -c C:\Users\Doudieu\Desktop\cairo\main.c -o obj\Debug\main.o
In file included from C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdk.h:31:0,
                 from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtk.h:30,
                 from C:\Users\Doudieu\Desktop\cairo\main.c:2:
C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdkversionmacros.h:147:6: error: missing binary operator before token "("
C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdkversionmacros.h:155:5: error: missing binary operator before token "("
C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdkversionmacros.h:158:5: error: missing binary operator before token "("
C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdkversionmacros.h:164:5: error: missing binary operator before token "("
C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdkversionmacros.h:172:5: error: missing binary operator before token "("
C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdkversionmacros.h:178:5: error: missing binary operator before token "("
C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdkversionmacros.h:186:5: error: missing binary operator before token "("
C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdkversionmacros.h:192:5: error: missing binary operator before token "("
C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdkversionmacros.h:200:5: error: missing binary operator before token "("
C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdkversionmacros.h:206:5: error: missing binary operator before token "("
C:/GTK+-3.6.1/include/gtk-3.0/gdk/gdkversionmacros.h:214:5: error: missing binary operator before token "("
In file included from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkwindow.h:33:0,
                 from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkdialog.h:33,
                 from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkaboutdialog.h:30,
                 from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtk.h:31,
                 from C:\Users\Doudieu\Desktop\cairo\main.c:2:
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkapplication.h:77:1: error: unknown type name 'GMenuModel'
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkapplication.h:80:49: error: unknown type name 'GMenuModel'
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkapplication.h:83:1: error: unknown type name 'GMenuModel'
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkapplication.h:86:49: error: unknown type name 'GMenuModel'
In file included from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkmenu.h:34:0,
                 from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtklabel.h:35,
                 from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkaccellabel.h:36,
                 from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtk.h:33,
                 from C:\Users\Doudieu\Desktop\cairo\main.c:2:
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkmenushell.h:117:41: error: unknown type name 'GMenuModel'
In file included from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtklabel.h:35:0,
                 from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkaccellabel.h:36,
                 from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtk.h:33,
                 from C:\Users\Doudieu\Desktop\cairo\main.c:2:
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkmenu.h:119:44: error: unknown type name 'GMenuModel'
In file included from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtk.h:58:0,
                 from C:\Users\Doudieu\Desktop\cairo\main.c:2:
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkbutton.h:84:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'void'
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkbutton.h:86:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'void'
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkbutton.h:88:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'void'
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkbutton.h:90:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'void'
In file included from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtk.h:131:0,
                 from C:\Users\Doudieu\Desktop\cairo\main.c:2:
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkmenubar.h:73:42: error: unknown type name 'GMenuModel'
In file included from C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtk.h:132:0,
                 from C:\Users\Doudieu\Desktop\cairo\main.c:2:
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkmenubutton.h:82:46: error: unknown type name 'GMenuModel'
C:/GTK+-3.6.1/include/gtk-3.0/gtk/gtkmenubutton.h:84:1: error: unknown type name 'GMenuModel'
Process terminated with status 1 (0 minutes, 2 seconds)
24 errors, 0 warnings (0 minutes, 2 seconds) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T18:34:31.163

请在下面找到一些可能有帮助的观察结果。

1.  *构建环境*：
    与您发布的内容相比，构建环境中似乎存在轻微配置错误。编译器命令包含目录`c:/gtk+/include/...`，而错误都指向`C:/GTK+-3.6.1/include/...`. 这可能是项目构建设置中的一些错误配置。
    更好的构建方法是使用`pkg-config`. 如果您检查`bin`软件包安装路径下的文件夹，您将看到`pkg-config.exe`.
    一种使用方法是在 IDE 中添加设置，在项目的“构建选项”下，将“编译器设置”的“其他选项”设置为**`[GTK_3_6_INSTALLED_DIR]\bin\pkg-config.exe --cflags gtk+-3.0`**（请注意命令开头和结尾的反引号）。
    同样在“链接器设置”的“其他选项”下添加**`[GTK_3_6_INSTALLED_DIR]\bin\pkg-config.exe --libs gtk+-3.0`**。通过这些设置，您应该能够编译和链接您的代码。

2.  *代码*：
    由于更改，您正在使用的代码将无法使用 Gtk+3.0 编译。
    有关更改的完整列表，请参阅[此链接](http://developer.gnome.org/gtk3/3.3/ch25s02.html)。与您的代码相关的更改如下：

    *   在 Gtk+ 3.0 中，`expose-event`不可用。[`draw`](http://developer.gnome.org/gtk3/stable/GtkWidget.html#GtkWidget-draw)在`main.c`. _
    *   `GdkDrawable`在 Gtk+ 3.0 中已弃用。此外，您不能`GtkWidget`直接访问成员，您将不得不使用访问器功能。因此在`drawing`函数中`roundedrectangle.c`，`cairo_t *c = gdk_cairo_create(GDK_DRAWABLE(win->window));`应更改为`cairo_t *c = gdk_cairo_create(gtk_widget_get_window(win));`
    *   除非它的错字`#endif // ROUNDED_RECTANGLE_H_INCLUDED`应该在头文件的末尾。
    *   每当您想*绘制*自定义小部件时，选择的小部件是[`GtkDrawingArea`](http://developer.gnome.org/gtk3/stable/GtkDrawingArea.html)而不是`GtkImage`. 也可以将主窗口设置为应用程序可绘制并在其上绘制圆角矩形。

希望这可以帮助！

# javascript - 指定秒的 JW Player 事件

> ID：14156419
> 
> 赞同：1
> 
> 时间：2013-01-04T11:36:09.913
> 
> 标签：javascript, events, jwplayer

JW Player 是否支持仅在指定秒内触发函数的事件？我在文档中找不到任何信息。

它应该像这样工作：

```
jwplayer().atTime(5, functions(){  /* do something */  })
jwplayer().atTime(9, functions(){  /* do something */  }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:50:02.857

事件是 **onTime(callback)** 当播放器正在播放时，随着播放位置的更新，这个事件会被触发。这可能会以每秒 10 次的频率发生。

事件属性：

**duration** : Number：当前项目的持续时间（以秒为单位）。

**offset** : Number：播放流媒体时，该值包含最后一个未缓冲的搜索偏移量。

**position** : Number：以秒为单位的播放位置。

更多活动： [JWPlayer 活动等](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12540/javascript-api-reference#Events)

# php - 如何在 CodeIgniter 中使用准备好的语句

> ID：14156421
> 
> 赞同：28
> 
> 时间：2013-01-04T11:36:22.897
> 
> 标签：php, mysql, codeigniter, prepared-statement

大家好，我需要在我的网站中使用准备好的语句。我试过用这个

```
$sql = "SELECT * FROM tbl_user WHERE uid=:id and activation_key=:key";
$query = $this->db->query( 
    $sql, 
    array( ':id' => $uid ,':key' => $activation_key)
); 
```

但这不起作用。当我改变`:id`并`:key`开始`?`工作时。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-04T11:51:42.417

CodeIgniter 不支持预处理语句。如果您查看 CI 的 Database 类的源代码，您会发现它们只需将问号替换为传递数组中的数据即可解决绑定问题：

*   [https://github.com/EllisLab/CodeIgniter/blob/develop/system/database/DB_driver.php#L874](https://github.com/EllisLab/CodeIgniter/blob/develop/system/database/DB_driver.php#L874)

它们仅支持带有未命名占位符的查询绑定。请参阅[http://ellislab.com/codeigniter/user-guide/database/queries.html](http://ellislab.com/codeigniter/user-guide/database/queries.html)

> 查询绑定
> 
> 绑定使您能够通过让系统为您将查询放在一起来简化查询语法。考虑以下示例：
> 
> ```
> $sql = "SELECT * FROM some_table WHERE id = ? AND status = ? AND author = ?";
> $this->db->query($sql, array(3, 'live', 'Rick')); 
> ```
> 
> 查询中的问号会自动替换为查询函数第二个参数中数组中的值。

和[http://ellislab.com/forums/viewthread/105112/#528915](http://ellislab.com/forums/viewthread/105112/#528915)

> 尽管 CI 不支持预处理语句，但它支持查询绑定。使用准备好的语句，您必须调用某种类型的 prepare() 函数，然后调用某种类型的 execute() 函数。使用查询绑定，您只需调用一个函数，它基本上做同样的事情。正因为如此，我更喜欢查询绑定而不是准备好的语句。

在旁注中，更改`?`为`:foo`只是从未命名的绑定更改为命名的绑定（CI 显然也不支持）。仅仅因为您使用或不意味着您正在准备陈述。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-16T09:23:13.077

当我遇到类似的问题时，我遇到了这个问题。答案是正确的，CI 不支持准备好的语句。但是，这*并不意味着*您不能使用准备好的语句！

在以下示例中，我使用 PDO 作为连接类，但以下代码将起作用：

```
$q = $this->db->conn_id->prepare('SELECT * FROM tbl_user WHERE uid=? and activation_key=?');
$q->execute(array($param1,$param2));
print_r($q->fetchAll()); 
```

**请注意**conn_id 是 PDO 对象，您可以对其运行准备好的语句。

然而，这将不允许您获取本机 CI 函数允许的查询字符串。为此，您将需要诸如[Get Last Executed Query in PHP PDO 之](https://stackoverflow.com/questions/7716785)类的东西。

此外，这不会阻止您使用查询生成器来构建您的语句，然后您可以在 PDO 准备中使用这些语句。例如 -

```
$db->where('uid = ?',null,false);
$db->where('activation_key = ?',null,false);
$q = $this->db->conn_id->prepare($db->get_compiled_select('tbl_user')); 
```

将构建查询并允许您在输出时查看基本查询`$db->get_compiled_select('tbl_user');`

# visual-studio - Visual Studio/SharpDevelop，我们可以创建超链接，指向解决方案中的另一部分代码吗？

> ID：14156423
> 
> 赞同：1
> 
> 时间：2013-01-04T11:36:29.777
> 
> 标签：visual-studio, hyperlink, sharpdevelop

在 Visual Studio 和 SharpDevelop 中，是否可以通过单击一个单词来创建某种超链接或快捷方式，从而导致另一部分代码？在不止一次重复时，我想将一行代码链接到解决方案的另一部分，而不使用搜索功能（这变得很耗时）。

我想这样做的另一个原因是我想编写某种带有解释的目录表，以便直接将其带到解决方案中所需的代码段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:53:33.050

在 XML 注释中，您可以使用该`cref`属性来设置指向其他类/方法的链接。

例如：

```
/// <seealso cref="OtherClass.OtherMethod"/>
void M() {} 
```

不幸的是，Visual Studio 和 SharpDevelop 都不支持这些链接上的“转到定义”功能，因此它们对导航毫无用处。Resharper 可能会做得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:08:38.083

您可以使用“转到定义”功能吗？您可以使用键盘快捷键或使用鼠标或键盘快捷键的 SharpDevelop 在 Visual Studio 中转到类、方法、属性等的定义。

**在 SharpDevelop 中：**

按住 Ctrl 键并用鼠标左键单击项目（类、方法、属性等）。然后应打开相应的文件。执行此操作的键盘快捷键是 Ctrl+Enter。

**在 Visual Studio 中：**

单击该项目并按 F12 进入其定义。

如果您有 Resharper，那么它支持 Ctrl + 左键单击进行定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T19:52:09.647

到目前为止，我发现的问题的最佳替代方法是使用任务列表窗口。还可以添加新的 XML 标记并按主题对引用进行排序。总的来说，即使我希望有更好的解决方案来解决这个问题，它也有很大帮助。

任务列表可以按其描述的字母顺序排序，因此可以通过使用数字创建某种目录，同时使用适当的标记添加 XML 注释。请注意，可以从 IDE 选项添加新令牌。在 Sharp Develop 中，工具 > 选项 > 常规 > 任务列表

例子：

在源代码中：

// MY_TOKEN: 01 - foo 行为的开始

稍后在代码或其他文件中

// MY_TOKEN: 02 - 更多与 foo 行为相关的内容

稍后在代码中（或其他文件

// MY_TOKEN: 03 - 更多与 foo 行为相关的内容

等等。

它在 IDE 中看起来像这样：![在此处输入图像描述](../Images/4fbd4bb5ac6ceb035c344dcb9b6ba6ef.png)

因此，从任务列表窗口可以快速跳转到参考。

有人有更好的解决方案吗？

# java - 将 byte[] 转换为 excel 时 Excel 文件损坏

> ID：14156425
> 
> 赞同：2
> 
> 时间：2013-01-04T11:36:36.913
> 
> 标签：java

在我的应用程序中，我以块的形式获取 excel 文件作为输入。比方说，如果 excel 文件大小为 20 MB，那么我将得到 4 个块，其中每个块（字节 []）为 5MB。我正在将每个块（字节 []）写入临时文件（没有扩展名）。我正在使用这个临时文件来重新生成以多个块发送给我的实际 excel 文件。我的要求是生成的 excel 文件必须与我分块得到的 excel 文件相同。

**示例代码：**

1.  读取excel文件，转换成块并将这些块写入临时文件。

    公共静态无效 readExcelFileBytes(String srcFile) 抛出 IOException {

    ```
    File file = new File(srcFile);

    FileInputStream fis = new FileInputStream(file);

    byte[] buf = new byte[1024 * 5]; // 5KB
    int totalNoOfBytes = 0;
    try {
        for (int readNum; (readNum = fis.read(buf)) != -1;) {               
            appendByteArrayToTempFile(buf);
        }
    } catch (IOException ex) {
        ex.printStackTrace();
    }
    System.out.println("Read: Total Size Bytes" + totalNoOfBytes);

    }

    public static boolean appendByteArrayToTempFile(byte[] byteArray) {

    boolean result = false;
    BufferedWriter writeout = null;
    File bodfile = null;
    FileOutputStream out = null;
    try {
        bodfile = new File("C://tempFile");
        out = new FileOutputStream(bodfile, true);
        out.write(byteArray);           

        result = true;

    } catch (IOException ex) {
        ex.printStackTrace();
    } finally {
        try {
            //writeout.close();
            out.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
    return result;
    } 
    ```

2.  使用 temp byte[] 重新生成 excel 文件。

公共静态 void tempToFile(String srcFilePath) 抛出 IOException{

```
 File file = new File("C://tempFile");

   FileInputStream fis = new FileInputStream(file);

   ByteArrayOutputStream bos = new ByteArrayOutputStream();
   byte[] buf = new byte[1024];
   try {
       for (int readNum; (readNum = fis.read(buf)) != -1;) {
           bos.write(buf, 0, readNum); //no doubt here is 0                

       }
   } catch (IOException ex) {
       ex.printStackTrace();
   }
   byte[] bytes = bos.toByteArray();

   // Create source file from Temp's byte array
   FileOutputStream fileOuputStream =  new FileOutputStream(srcFilePath); 
   fileOuputStream.write(bytes);
   fileOuputStream.flush();
   fileOuputStream.close();
} 
```

**问题：**

公共静态 void main(String s[]) 抛出 IOException {

```
 // XLS POC
    readExcelFileBytes("C://Input.xlsx");
    tempToFile("C://Output.xlsx");

} 
```

但是当使用临时文件 byte[] 生成 excel 文件时，它会被修改。有人可以帮助我是否遵循正确的方法使用临时文件字节 [] 重新生成 excel 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:00:46.873

这段代码肯定是错的：

```
for (int readNum; (readNum = fis.read(buf)) != -1;) {               
    appendByteArrayToTempFile(buf);
} 
```

您忽略了实际读入的字节数，并且每次都`buf`无条件地写出整个字节数。`buf`你需要

```
for (int readNum; (readNum = fis.read(buf)) != -1;) {               
    appendByteArrayToTempFile(buf, readNum);
} 
```

并`appendByteArrayToTempFile`据此实施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:45:45.313

使用自动复制文件的现有库不是更好吗？

其中一个图书馆是 Jakarta Commons

*   [org.apache.commons.io.IOUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html)
*   [org.apache.commons.io.FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)

它已被数百名开发人员使用；它经过了很好的测试，肯定会帮助您完成文件复制任务。

**编辑**

如果您收到损坏的文件，检查您的文件复制机制（您自己的任何库中的一种）是否工作正常的最佳方法是检查输入和输出文件校验和。输入文件校验和应与输出文件校验和相同。

假设您的输入和输出`java.io.File`是您的代码检查文件校验和可能如下所示：`input``File``output`

```
long inputChecksum = FileUtils.checksumCRC32(input);

// if there is an issue with file copy IOException is thrown
FileUtils.copyFile(input, output);

// inputChecksum should be the same as outputChecksum
long outputChecksum = FileUtils.checksumCRC32(output); 
```

# sublimetext2 - sublime2 符号定义方法

> ID：14156428
> 
> 赞同：2
> 
> 时间：2013-01-04T11:36:57.950
> 
> 标签：sublimetext2

几个月前我已经切换到 sublime2，我非常喜欢它！

我只是想知道是否有办法在触发 Ctrl+R 快捷键时添加要识别的符号定义。

我是一名 Groovy/Grails 程序员，我们将闭包作为控制器中的第一级成员（是的，还不能在工作中切换到 Grails 2.X）。触发 Goto Symbol 功能时，我无法选择浏览我的操作定义（闭包）。

似乎它只是在寻找“ **[modifier] returnType name([someArgs]) {}** ”语法，我想添加一些规则来识别“ **def actionName = {}** ”会很容易，但我一直无法找到添加此“功能”的任何文件。

这可能吗？。如果是这样，我必须修改哪个文件？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:24:58.003

我不是 Groovy 程序员。但是，我从 Groovy 官方站点获取了示例代码，并在其中添加了闭包来测试我的解决方案。它似乎工作！

简要地：

*   进入 Sublime 菜单，然后选择“Browse Packages...”
*   打开“Groovy”目录
*   在 Sublime 中编辑“Groovy.tmLanguage”文件

转到第 860 行。它应该是`(?=\() # opening parens`. 将该行替换为以下行：

```
(?=
    (?:\() # opening parens 
    |
    (?:=\s*\{) # or closure
) 
```

然后，保存“Groovy.tmLanguage”文件；Sublime 应该立即重新加载它。你完成了！

我建议在编辑语言定义的同时打开一个 Groovy 源代码文件——你应该会立即看到闭包的语法着色。它们现在也将在触发“转到符号”功能时出现。

如果上面的新正则表达式搞砸了，请告诉我！:-) 干杯

# android - 我想根据android中的标题大小在运行时设置弹出宽度

> ID：14156429
> 
> 赞同：7
> 
> 时间：2013-01-04T11:36:58.203
> 
> 标签：android, android-layout, popup, popupwindow

我尝试了很多东西但没有得到任何解决方案，我在运行时设置文本，我需要根据文本大小 LinearLayout viewGroup = (LinearLayout) ((Activity) context) .findViewById(R.id.popup);

```
 LayoutInflater layoutInflater = (LayoutInflater) context

        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View layout = layoutInflater.inflate(R.layout.popup_layout, viewGroup);
        title_tv = (TextView) layout.findViewById(R.id.popup_txt);

        title_tv.setText(title_P);

         PopupWindow popup = new PopupWindow(context);
final float SCALE = layout.getResources().getDisplayMetrics().density;
int mode = MeasureSpec.getMode(View.MeasureSpec.UNSPECIFIED);
        int measuredWidth = MeasureSpec.getSize(View.MeasureSpec.UNSPECIFIED);
 popup.setWidth(measuredWidth);
         popup.setHeight(60);

        popup.setContentView(layout);
        //popup.setWindowLayoutMode();

        popup.setFocusable(true); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-06T11:47:00.833

采用：

```
popup.setWidth(WindowManager.LayoutParams.WRAP_CONTENT); 
```

另外，如果适用：

```
popup.setHeight(WindowManager.LayoutParams.WRAP_CONTENT); 
```

但是，请确保您没有在 popup_layout 的内容中使用 fill/match_parent，因为这没有意义（即弹出设置为包装其内容，并且内容说让我和我的父母一样大）。发布您的 popup_layout XML 以获得更准确的答案。

# css - 如何创建四个均匀和流畅的 css 列？

> ID：14156439
> 
> 赞同：0
> 
> 时间：2013-01-04T11:37:13.897
> 
> 标签：css, css-float

我目前有 3 列是流动的，但它们不是均匀的。我想创建四个 25% 的列，它们可以全宽工作并且是流动的。在这里查看并尝试了所有可能的解决方案，但遇到了一堵墙。

这是我的 CSS

```
body {
    margin:0;
    padding:0;
    border:0;
    width:100%;
    background:#FFFFFF;
    min-width:890px; 
```

}

```
.threecol .col1 {
    width:46%;
    left:102%;
}
.threecol .col2 {
    width:21%;
    left:31%;
}
.threecol .col3 {
    width:21%;
    left:85%;
} 
```

底部是 3 列，

任何关于制作 3 个偶数列和 4 个偶数列的想法都会很棒！高度赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:11:41.577

[http://jsbin.com/ucasip/2/edit](http://jsbin.com/ucasip/2/edit)给你，用干净的标记完善三和四列。

```
<section class="four">
  <div class="col1"></div>
  <div class="col2"></div>
  <div class="col3"> </div>
  <div class="col4"></div>
</section>

<section class="three">
<div class="col5"></div>
<div class="col6"></div>
<div class="col7"></div>
</section>

body {
        width:100%;
        margin:0;
        padding:0;
        border:0;
        overflow:hidden; }

       .four> div {
        display:block;
        width:25%;
        height:50%;
        float:left; }

       .three > div {
        display:block;
        width:33.33333%;
        height:50%;
        float:left; }

    .col1 {
    background:#000}

        .col2 {
    background:#222 }

        .col3 {
    background:#444 }
        .col4 {
    background:#666}

      .col5 {background:#334455}
      .col6 {background:#556677}
      .col7 {background:#226655} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:45:54.753

```
<div class=col1>1</div>
<div class=col2>2</div>
<div class=col3>3</div>

body {
    margin:0;
    padding:0;
    border:0;
    width:100%;
    background:#FFFFFF;
    min-width:890px;   
}

.col1, .col2, .col3 {
    width:33%;
    float:left;
}

.col1 {
    background-color:#f5f5f5;
}

.col2 {
    background-color:#e5e5e5;
}

.col3 {
    background-color:#d5d5d5;
}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:57:47.907

假设您希望列的高度至少为 100%，那么还有这个解决方案：

[http://jsbin.com/emujeb/1/edit](http://jsbin.com/emujeb/1/edit)

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div class="wrap1">
    <div class="wrap2">
  <div class="col">
   col
  </div>
  <div class="col">
   col
  </div>
  <div class="col">
   col
  </div>
  <div class="col">
   col
  </div>
    </div>
  </div>
</body> 
```

```
.col {
  width:25%;
  float:left;
}
body { 
  margin:0px;
  padding:0px;
    background-image: -webkit-gradient(
        linear,
        left top,
        right top,
        color-stop(0, #eee),
        color-stop(25%, #eee),
        color-stop(25%, #ccc),
        color-stop(50%, #ccc),
        color-stop(50%, #eee),
        color-stop(75%, #eee),
        color-stop(75%, #ccc),
        color-stop(100%, #ccc)
    );      
    background-image: -webkit-linear-gradient(
        left, 
        #eee, 
        #eee 25%,
        #ccc 25%,
        #ccc 50%,
        #eee 50%,
        #eee 75%,
        #ccc 75%,
        #ccc 100%,
        #eee 100%
    );
    background-image: -moz-linear-gradient(
        left, 
        #eee, 
        #eee 25%,
        #ccc 25%,
        #ccc 50%,
        #eee 50%,
        #eee 75%,
        #ccc 75%,
        #ccc 100%,
        #eee 100%
    );
    background-image: -ms-linear-gradient(
        left, 
        #eee, 
        #eee 25%,
        #ccc 25%,
        #ccc 50%,
        #eee 50%,
        #eee 75%,
        #ccc 75%,
        #ccc 100%,
        #eee 100%
    );
    background-image: -o-linear-gradient(
        left, 
        #eee, 
        #eee 25%,
        #ccc 25%,
        #ccc 50%,
        #eee 50%,
        #eee 75%,
        #ccc 75%,
        #ccc 100%,
        #eee 100%
    );
} 
```

这是通过 css 渐变完成的，但如果您不喜欢背景图像并使用仿列技术，则可以将它们替换。

您需要将 html,body,wrap1,wrap2 设置为 4 列，并使用背景位置 % 来实现。请注意，您将需要长 1px 高的图像来表示颜色，html 将使图像显示为 25% bakcground 颜色透明，body 将显示为 50%，依此类推。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:39:31.937

等高列很容易完成：

```
.container {
    display: table;
}

.container .col {
    display: table-cell;
    width: 25%;
} 
```

[http://jsfiddle.net/sqDng/](http://jsfiddle.net/sqDNg/)

# mysql - Mysql存储过程OUT变量返回NULL

> ID：14156451
> 
> 赞同：4
> 
> 时间：2013-01-04T11:38:02.993
> 
> 标签：mysql, stored-procedures

我在我的应用程序中使用以下示例存储过程：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS `test`.`sp_item`$$
CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_item`(
    IN name VARCHAR(255),
    OUT item_id INT(11)
)
BEGIN   
    DECLARE item_id INT DEFAULT 0;
    START TRANSACTION;
    INSERT INTO `item` (`name`) VALUES(name);   
    SET @item_id := LAST_INSERT_ID();
    COMMIT;
END$$
DELIMITER ; 
```

当我使用以下方法执行此过程时：-

```
CALL sp_item("TEST1",@item_id); 
```

并使用以下方法获取最后插入的 id：-

```
SELECT @item_id; 
```

然后我得到 NULL 结果但是记录已成功插入数据库。

谷歌搜索后我找不到任何相关帮助。

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T11:42:08.443

您没有使用 out 参数 ( `item_id`)。相反，您正在输入一个具有相似名称 ( `@item_id`) 的局部变量。试试这个：

```
CREATE PROCEDURE `sp_item`(
    IN name VARCHAR(255),
    OUT item_id INT(11)
)
BEGIN   
    START TRANSACTION;
    INSERT INTO `item` (`name`) VALUES(name);   
    SET item_id := LAST_INSERT_ID();
    COMMIT;
END$$ 
```

# c# - C# 和 Skype 语音识别

> ID：14156471
> 
> 赞同：1
> 
> 时间：2013-01-04T11:39:00.200
> 
> 标签：c#, speech-recognition, voip, skype

我用 C# 开发了一个应用程序，它尝试使用 Skype ActiveX 和 Microsoft 的语音识别引擎识别 pc 到陆地电话呼叫中的短语，并通过 tcp/ip 端口重定向呼叫。

在电话里，一台机器播放一段录音，所以声音很清晰。但既不`System.Speech`也`Microsoft.Speech`不能识别任何有用的东西。

它已经为语法加载了预期的选择，但什么也没有。如果我说话，我必须说一个词，等到它认出这个词，然后再说下一个词，这样就可以了。

问题是，我该如何改进呢？或者您知道可以在实时对话中做得更好的 ASR？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:57:52.143

最直接的方法是使用专门为任务设计的工具，而不是使用skype/activex 的手工解决方案。

有特殊的软件可以将电话连接到可操作的东西。他们中有一些：

[星号](http://www.asterisk.org/)

[自由开关](http://freeswitch.org/)

所有此类系统都通过 MRCP 协议提供语音识别和交互式语音响应功能。设置识别的最简单方法是使用[CMUSphinx 工具包](http://cmusphinx.sourceforge.net)

[您可以在此处](http://wiki.freeswitch.org/wiki/Mod_pocketsphinx)或[此处](https://code.google.com/p/unimrcp/wiki/PocketSphinxPlugin)阅读有关将 CMUSphinx 集成到 IVR 系统的更多信息

如果您喜欢快速开始，有很酷的 SAAS 解决方案，让您只需点击几下即可构建电话应用程序。例如[Voxeo](http://www.voxeo.com/)

# android - 如何最小化按钮中文本和图像之间的空间？

> ID：14156472
> 
> 赞同：6
> 
> 时间：2013-01-04T11:39:11.010
> 
> 标签：android

这是我下面的代码，它显示按钮中的图像工作正常，但我想最小化图像和按钮之间的空间。我怎么做？

请帮助我如何最小化图像和文本之间的空间。这是我的图片网址 [http://imgur.com/Jmvqe](https://imgur.com/Jmvqe)

```
<Button android:id="@+id/MyAccountbutton"
        style="?android:attr/buttonStyleSmall"
        android:layout_height="25dip"
        android:layout_width="fill_parent"
        android:layout_marginRight="55dip"
        android:layout_marginLeft="55dip"
        android:drawableLeft="@drawable/handshake"
        android:paddingLeft="10dip"
        android:background="@drawable/curvedplanebutton"
        android:textColor="@drawable/button_text_color"
        android:layout_marginTop="15dip"
        android:text="Payments"/> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-04T11:43:32.237

玩`android:drawablePadding=" "`。您可能需要设置一个负值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-05T07:29:21.137

您可以添加属性`drawablePadding`并设置您的值，例如：

```
 android:drawablePadding="5dp"; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-04T11:41:40.180

```
android:gravity="left" 
```

这应该将文本更改为左侧，而不是中心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:11:18.243

如果您将其设置`android:layout_width`为`wrap_content`，您`Button`将根据其内容调整其尺寸，并且不会尝试填充其父级。

如果你想让你`Button`填写它的父母，我同意 WarrenFaith。

# python - 你能用 Python 中的字典值写一个 str.replace() 吗？

> ID：14156473
> 
> 赞同：68
> 
> 时间：2013-01-04T11:39:13.367
> 
> 标签：python, dictionary, str-replace

我必须在地址字段中用 NS 替换北、南等。

如果我有

```
list = {'NORTH':'N','SOUTH':'S','EAST':'E','WEST':'W'}
address = "123 north anywhere street" 
```

我可以遍历我的字典值来替换我的地址字段吗？

```
for dir in list[]:
   address.upper().replace(key,value) 
```

我知道我什至没有接近！但是，如果您可以使用这样的字典值，任何输入都将不胜感激。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-04T12:15:19.810

```
address = "123 north anywhere street"

for word, initial in {"NORTH":"N", "SOUTH":"S" }.items():
    address = address.replace(word.lower(), initial)
print address 
```

也很好，简洁易读。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-04T11:44:54.657

你很接近，实际上：

```
dictionary = {"NORTH":"N", "SOUTH":"S" } 
for key in dictionary.iterkeys():
    address = address.upper().replace(key, dictionary[key]) 
```

**注意：**对于 Python 3 用户，您应该使用`.keys()`而不是`.iterkeys()`：

```
dictionary = {"NORTH":"N", "SOUTH":"S" } 
for key in dictionary.keys():
    address = address.upper().replace(key, dictionary[key]) 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-04T13:07:25.120

我认为尚未有人建议的一种选择是构建一个包含所有键的正则表达式，然后简单地对字符串进行一次替换：

```
>>> import re
>>> l = {'NORTH':'N','SOUTH':'S','EAST':'E','WEST':'W'}
>>> pattern = '|'.join(sorted(re.escape(k) for k in l))
>>> address = "123 north anywhere street"
>>> re.sub(pattern, lambda m: l.get(m.group(0).upper()), address, flags=re.IGNORECASE)
'123 N anywhere street'
>>> 
```

这样做的好处是正则表达式可以忽略输入字符串的大小写而不修改它。

如果您只想对完整的单词进行操作，那么您也可以通过简单修改模式来做到这一点：

```
>>> pattern = r'\b({})\b'.format('|'.join(sorted(re.escape(k) for k in l)))
>>> address2 = "123 north anywhere southstreet"
>>> re.sub(pattern, lambda m: l.get(m.group(0).upper()), address2, flags=re.IGNORECASE)
'123 N anywhere southstreet' 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-04T11:44:50.140

您可能正在寻找`iteritems()`：

```
d = {'NORTH':'N','SOUTH':'S','EAST':'E','WEST':'W'}
address = "123 north anywhere street"

for k,v in d.iteritems():
    address = address.upper().replace(k, v) 
```

地址是现在`'123 N ANYWHERE STREET'`

* * *

好吧，如果你想保留大小写、空格和嵌套单词（例如`Southstreet`，不应该转换为`Sstreet`），请考虑使用这个简单的列表推导：

```
import re

l = {'NORTH':'N','SOUTH':'S','EAST':'E','WEST':'W'}

address = "North 123 East Anywhere Southstreet    West"

new_address = ''.join(l[p.upper()] if p.upper() in l else p for p in re.split(r'(\W+)', address)) 
```

new_address 现在是

```
N 123 E Anywhere Southstreet    W 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-02-23T17:32:32.353

用字典“翻译”字符串是非常常见的要求。我提出了一个您可能希望保留在工具包中的功能：

```
def translate(text, conversion_dict, before=None):
    """
    Translate words from a text using a conversion dictionary

    Arguments:
        text: the text to be translated
        conversion_dict: the conversion dictionary
        before: a function to transform the input
        (by default it will to a lowercase)
    """
    # if empty:
    if not text: return text
    # preliminary transformation:
    before = before or str.lower
    t = before(text)
    for key, value in conversion_dict.items():
        t = t.replace(key, value)
    return t 
```

然后你可以写：

```
>>> a = {'hello':'bonjour', 'world':'tout-le-monde'}
>>> translate('hello world', a)
'bonjour tout-le-monde' 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-04-26T12:02:31.563

我建议使用正则表达式而不是简单的替换。使用替换，您有可能替换单词的子部分，这可能不是您想要的。

```
import json
import re

with open('filePath.txt') as f:
   data = f.read()

with open('filePath.json') as f:
   glossar = json.load(f)

for word, initial in glossar.items():
   data = re.sub(r'\b' + word + r'\b', initial, data)

print(data) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-10-17T14:09:20.953

```
def replace_values_in_string(text, args_dict):
    for key in args_dict.keys():
        text = text.replace(key, str(args_dict[key]))
    return text 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-01-04T11:48:59.340

尝试，

```
import re
l = {'NORTH':'N','SOUTH':'S','EAST':'E','WEST':'W'}

address = "123 north anywhere street"

for k, v in l.iteritems():
    t = re.compile(re.escape(k), re.IGNORECASE)
    address = t.sub(v, address)
print(address) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-10-02T15:03:55.370

使用`replace()`和`format()`不那么精确：

```
data =  '{content} {address}'
for k,v in {"{content}":"some {address}", "{address}":"New York" }.items():
    data = data.replace(k,v)
# results: some New York New York

'{ {content} {address}'.format(**{'content':'str1', 'address':'str2'})
# results: ValueError: unexpected '{' in field name 
```

`re.sub()`如果您需要**精确的位置**，最好翻译：

```
import re
def translate(text, kw, ignore_case=False):
    search_keys = map(lambda x:re.escape(x), kw.keys())
    if ignore_case:
        kw = {k.lower():kw[k] for k in kw}
        regex = re.compile('|'.join(search_keys), re.IGNORECASE)
        res = regex.sub( lambda m:kw[m.group().lower()], text)
    else:
        regex = re.compile('|'.join(search_keys))
        res = regex.sub( lambda m:kw[m.group()], text)

    return res

#'score: 99.5% name:%(name)s' %{'name':'foo'}
res = translate( 'score: 99.5% name:{name}', {'{name}':'foo'})
print(res)

res = translate( 'score: 99.5% name:{NAME}', {'{name}':'foo'}, ignore_case=True)
print(res) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-04-06T20:27:22.323

所有这些答案都很好，但是您缺少 python 字符串替换 - 它简单快捷，但需要正确格式化您的字符串。

```
address = "123 %(direction)s anywhere street"
print(address % {"direction": "N"}) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-23T09:42:35.110

如果您正在寻找一种简洁的方法，您可以从 functools 中选择 reduce：

```
from functools import reduce

str_to_replace = "The string for replacement."
replacement_dict = {"The ": "A new ", "for ": "after "}

str_replaced = reduce(lambda x, y: x.replace(*y), [str_to_replace, *list(replacement_dict.items())])
print(str_replaced) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-23T07:53:00.170

邓肯方法的优点是注意不要覆盖以前的答案。例如，如果您有 {"Shirt": "Tank Top", "Top": "Sweater"}，则其他方法将 "Shirt" 替换为 "Tank Sweater"。

以下代码扩展了该方法，但对键进行排序，以便始终首先找到最长的键，并且它使用命名组不区分大小写搜索。

```
import re
root_synonyms = {'NORTH':'N','SOUTH':'S','EAST':'E','WEST':'W'}
# put the longest search term first. This menas the system does not replace "top" before "tank top"
synonym_keys = sorted(root_synonyms.keys(),key=len,reverse=True)
# the groups will be named w1, w2, ... . Determine what each of them should become
number_mapping = {f'w{i}':root_synonyms[key] for i,key in enumerate(synonym_keys) }
# make a regex for each word where "tank top" or "tank  top" are the same
search_terms = [re.sub(r'\s+',r'\s+',re.escape(k)) for k in synonym_keys]
# give each search term a name w1 etc where
search_terms = [f'(?P<w{i}>\\b{key}\\b)' for i,key in enumerate(search_terms)]
# make one huge regex
search_terms = '|'.join(search_terms)
# compile it for speed
search_re = re.compile(search_terms,re.IGNORECASE)

query = "123 north anywhere street"
result = re.sub(search_re,lambda x: number_mapping[x.lastgroup],query)
print(result) 
```

# opengl - 3DS VAO 上的贴图纹理变成镜像

> ID：14156476
> 
> 赞同：1
> 
> 时间：2013-01-04T11:39:27.750
> 
> 标签：opengl, textures, shader, 3ds

[我按照本教程](http://www.spacesimulator.net/wiki/index.php?title=Tutorials:3ds_Loader)实现了一个 3ds 模型加载器。目前我的程序使用 VAO 来显示东西。到目前为止，这适用于简单的立方体和瓷砖。纹理显示正确。

但是，当我将 3DS 模型加载到 VAO 中时，它却是另一番景象。该模型在顶点方面看起来是正确的，但由于某种原因纹理沿 Y 轴镜像。

这就是我阅读紫外线的方式：

```
case 0x4140:

qty = reader.ReadUInt16();        // 2 bytes

UV[] texcoords = new UV[qty];

for (i = 0; i < qty; i++)
{
    texcoords[i] = new UV
    {
        U = reader.ReadSingle(),  // 4 bytes
        V = reader.ReadSingle()   // 4 bytes
    };
}

tb = new TexCoordBuffer(texcoords); 
```

和紫外线：

```
[StructLayout(LayoutKind.Sequential)]
struct UV
{
    public float U { get; set; }
    public float V { get; set; }
} 
```

创建属性：

```
GL.EnableVertexAttribArray(2);
texCoordBuffer.Bind();
GL.VertexAttribPointer(2, 2, VertexAttribPointerType.Float, false, Vector2.SizeInBytes, 0);
GL.BindAttribLocation(shaderHandle, 2, "in_texture"); 
```

纹理是如何“创建”的：

```
GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureWrapS, (int)TextureWrapMode.Repeat);
GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureWrapT, (int)TextureWrapMode.Repeat);

GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMagFilter, (int)TextureMagFilter.Linear);
GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMinFilter, (int)TextureMinFilter.LinearMipmapNearest);

GL.TexEnv(TextureEnvTarget.TextureEnv, TextureEnvParameter.TextureEnvMode, (int)TextureEnvMode.Replace);

GL.TexImage2D(
    TextureTarget.Texture2D,
    0,
    PixelInternalFormat.Rgba,
    bmpData.Width,
    bmpData.Height,
    0,
    PixelFormat.Bgra,
    PixelType.UnsignedByte,
    bmpData.Scan0);

GL.GenerateMipmap(GenerateMipmapTarget.Texture2D); 
```

结果是这样的：左边的例子，右边的我的版本： ![比较](../Images/3f5428639cf9768d333e32d9847e9285.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:07:27.207

是的，在为 OpenGL 导入模型时，您应该翻转 V 纹理坐标。3DS 模型和 OpenGL 中的 UV 贴图是不同的。OpenGL纹理坐标应该是`(U; 1-V)`

这可以在导入模型代码中修复，也可以通过在 3D 建模软件中选择用于翻转 UV 的相应选项来修复。

您可以查看答案和评论以了解此相关问题中的此行为：[https ://stackoverflow.com/a/8621571/405681](https://stackoverflow.com/a/8621571/405681)

# php - 如何定期在 php 页面中显示结果？

> ID：14156480
> 
> 赞同：-3
> 
> 时间：2013-01-04T11:39:51.633
> 
> 标签：php

我正在尝试在 php 中开发一个结果页面，其中`(id, date, time, result)`每 20 分钟后将定期发布一次播放的结果。结果可能来自文件或数据库。我做了一些研发，发现`cronjob`可以使用。但是，由于我使用的是没有`cronjob`支持的主机，所以我试图在没有`cronjob`. `et_time_limit(0)`我在共享主机上也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:43:49.700

[如果您想在客户端显示结果， cronjob](http://en.wikipedia.org/wiki/Cron)是由服务器而不是客户端执行的方法，您需要做的就是使用 ajax 函数并使用 set Interval javascript 函数调用该函数。
示例如下

```
function initialize()
{
    $.ajax({
        url        : YOUR_URL,
        data       : DATAYOUWANNA_SEND,
        dataType   : "json"
        beforeSend : function(){
            //perform code before request made.
        },
        success    : function(response){
            //code after successful ajax response in either json or html according to dataType you set.
        }
    });
    setInterval(function(){initialize()},3000);   
}
```

并在页面加载时调用此函数。

`initialize()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:01:21.503

您可以选择使用 html [Meta](http://www.w3schools.com/tags/tag_meta.asp)标签

```
<meta http-equiv="refresh" content="30"> 
```

它将每 30 秒刷新一次页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:12:25.870

您应该使用 AJAX 获取最新记录并使用一些 javascript 或 jQuery 将它们注入页面。

这是一个例子：

ajax.php

```
<?php
$result = SQL_RESULT;
echo json_encode($result);
?> 
```

结果.html

```
<script src="jquery.js"></script>
<script>
$(function(){
    $.ajax({
        url:'ajax.php',
        dataType:'json',
        success:function(data){
            $.each(data,function(i){
                $('<li/>').text(data[i].result).append('#ul');
            });
        }
     });
});
</script> 
```

# asp.net-mvc - DevExpress MVC 控件绑定到结果数据源

> ID：14156485
> 
> 赞同：1
> 
> 时间：2013-01-04T11:40:10.917
> 
> 标签：asp.net-mvc, devexpress, upshot

我想知道是否可以将 DevExpress MVC 控件与 Upshot 和淘汰赛一起使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:06:22.023

我不相信这很容易做到。DevExpress 开发了他们的 DXtreme 产品，以使用 Knockout 和 Upshot 与服务器交互。产品很好，但是缺少 GridView 控件，所以我们无法使用它。

如果您有一个简单的表单，您可以通过在所有控件上使用 SetValue() 和 GetValue() 属性来实现它。因此，您可以使用普通的 DevExpress 绑定，而不是使用 Knockout 数据绑定行为，然后当您想使用 Ajax 进行保存时，您可以创建一个类，该类从表单中获取值并将它们发送回服务器。但这确实违背了将 Knockout 用于 UI 的目的。

# eclipse - 如何使用 M2E 构建定义变量？（相当于 -Dvar=value）

> ID：14156486
> 
> 赞同：0
> 
> 时间：2013-01-04T11:40:11.403
> 
> 标签：eclipse, variables, build, m2e

我在我的一些`pom.xml`文件中使用变量，如下所示：

```
<project ...>
    ...
    <properties>
        <password>someValue</password> 
```

这稍后与 一起使用`maven-resources-plugin`，以便生成我的一些具有正确密码的文件。

优点是我可以像这样构建我的生产包：`mvn package -Dpassword=someOtherValue`

问题是当我使用[m2e-wtp](http://www.eclipse.org/m2e-wtp/)构建我的项目（这是一场战争）时，我只能定义我想要激活的 maven 配置文件（项目 > 属性 > Maven > 活动 Maven 配置文件）。

我正在使用“导入 > 现有 Maven 项目”时提供的 Maven 构建。

我没有找到定义任何构建变量的方法......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:08:59.667

由于 Maven 的工作方式，只要它们是不可变的（例如，依赖版本），保持在构建配置文件范围内的变量就可以工作。

我的建议是将你的构建依赖变量放在你的`.m2/settings.xml`文件中。m2eclipse 会很高兴地阅读它们并应用到您的构建中，并且该文件非常便携，因此您可以安装到其他机器上。

它也适用于配置文件，因此您可以将环境的所有相关变量组合到一个文件中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T12:44:40.433

您是否尝试在 Maven 构建配置中设置参数？![M2E 构建的参数设置](../Images/69f86f678ec0f5b55fee4e2b4c62ff13.png)

这似乎与您在此处描述的完全一样。

# typescript - 实现所有接口成员

> ID：14156489
> 
> 赞同：5
> 
> 时间：2013-01-04T11:40:31.447
> 
> 标签：typescript

我有一个 TypeScript 界面。问题是它有大约 40 名成员。当我使用它并且只实现选定的成员时，我会收到一个错误，指出有一些缺失。如何忽略它？我必须全部实施吗？这个问题使我无法将一种类型转换为另一种类型。

例如

```
interface A {
   // 40 members
}

class B implements A {
   // only 5 members implemented
}

// somewhere in the code
var myVar1: A = something;
var myVar2: B = <B> myVar1; // here an error (can't convert because B has missing some properties and methods:/) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T11:56:48.010

在打字稿中，您可以将项目标记为可选：

```
interface Person {
    name: string;
    address?: string;
} 
```

名称是必需的，地址是可选的，用于实施

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T11:55:05.737

如果你承诺实现一个接口，你就必须实现它。

如果您只想处理 B 中的 5 个属性，一种解决方案是拥有一个实现 40 个属性的基类。

```
interface A {
   propA: string;
   propB: string;
}

class C implements A {
    public propA = "";
    public propB = "";
}

class B extends C {
   public propB = "Example";
}

var myVar1: A;
var myVar2: B = <B> myVar1; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-02T16:25:48.150

一个界面中有40个项目是相当多的。

此外，如果某个类只需要 5 个，则表明存在设计问题。

另一种设计是具有多个相关接口并将属性划分为更多逻辑组。

```
interface ICar ...
interface IRacingCar : ICar
interface IFlyingCar : ICar
interface IFamilyCar : ICar 
```

然后你可以有一个实际实现多个接口的类。

```
class RaceCar: IRacingCar ...
class FlyingRaceCar: IRaceCar, IFlyingCar ...
class FlyingFamilyCar: IFlyingCar, IFamilyCar ... 
```

此外，除非您确定对象实际上是该类，否则应避免从接口转换为特定类。如果您尝试使用该类的方法，但如果对象不是真正存在的类型，则会出现问题。

# java - 线程“AWT-EventQueue-0”中的 Java 异常 java.lang.ArrayIndexOutOfBoundsException：1

> ID：14156490
> 
> 赞同：1
> 
> 时间：2013-01-04T11:40:45.330
> 
> 标签：java, exception, awt

```
public class ConsoleControl {

private static Viewer mainGUI;

public static Viewer getMainGUI()
{
    return mainGUI;        
}
    public static void main(String[] args){
    // Imports the Java UI Manager, which allows you to change the basic GUI of the Application
    try { 
        UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel"); 
    } 
    catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
}
    MainModel.setPetShop(FileIO.readPetShop("PetShop.csv"));
    MainModel.setPets(FileIO.readPets("Pets.csv"));
    MainModel.setFish(FileIO.readFish("Fish.csv"));

    MainModel.setPetShopHeader(new String[]{"Name","Address","Phone Number","Website","Opening Times"});
    MainModel.setPetsHeader(new String[]{"Shop","Type","Price","Date Acquired","Notes"});
    MainModel.setFishHeader(new String[]{"Shop","Type","Price","Date Acquired","Latin Name","Food Requirements"});
    mainGUI = new Viewer();
    mainGUI.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

  public static void actOnTableClick(int selectedRow)
{
    ArrayList<Integer> attRowsToHighlight = new ArrayList<>();
    if (mainGUI.getSelectedTab() == 0)
    {
        PetShop ourPetShop = MainModel.getPetShop().get(selectedRow);

        for (int i = 0; i < MainModel.getPets().size(); i++)
        {
            Pets ourPets = MainModel.getPets().get(i);

            if (ourPets.getShop().equals(ourPetShop.getName()))
            {
              //  System.out.print(ourPets);
                attRowsToHighlight.add(i);
               // System.out.print(i);
            }
        }
        mainGUI.highlightRows(1, attRowsToHighlight);
    }

   } } 
```

出于某种原因，这段代码给了我标题中给出的错误，然后是大量的异常列表。然后控制台加载，但没有数据加载，您必须将鼠标悬停在控制台的每个部分上才能显示。有什么帮助吗？

**编辑：**以下是例外情况：

> 线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException: 1 at javax.swing.JTable$1.getValueAt(JTable.java:689) at javax.swing.JTable.getValueAt(JTable.java:2720) at javax .swing.JTable.prepareRenderer(JTable.java:5718) 在 javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684) 在 javax.swing.plaf.synth.SynthTableUI.paintCells(SynthTableUI.java:581) ) 在 javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365) 在 javax.swing.plaf.synth.SynthTableUI.update(SynthTableUI.java:276) 在 javax.swing.JComponent.paintComponent(JComponent. java:778) 在 javax.swing.JComponent.paint(JComponent.java:1054) 在 javax.swing.JComponent.paintChildren(JComponent.java:887) 在 javax.swing.JComponent.paint(JComponent.java:1063) 在javax.swing.JViewport.paint(JViewport.java:725) 在 javax.swing.JComponent.paintChildren(JComponent.java:887) 在 javax.swing.JComponent.paint(JComponent.java:1063) 在 javax.swing.JComponent.paintChildren(JComponent.java:887) 在javax.swing.JComponent.paint(JComponent.java:1063) at javax.swing.JComponent.paintChildren(JComponent.java:887) at javax.swing.JComponent.paint(JComponent.java:1063) at javax.swing.JComponent .paintChildren(JComponent.java:887) 在 javax.swing.JComponent.paint(JComponent.java:1063) 在 javax.swing.JComponent.paintChildren(JComponent.java:887) 在 javax.swing.JComponent.paint(JComponent. java:1063) 在 javax.swing.JLayeredPane.paint(JLayeredPane.java:585) 在 javax.swing.JComponent.paintChildren(JComponent.java:887) 在 javax.swing.JComponent.paintToOffscreen(JComponent.java:5228) 在javax.swing。RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482) at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413) at javax.swing.RepaintManager.paint(RepaintManager.java:1206) at javax.swing.JComponent .paint(JComponent.java:1040) 在 java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:39) 在 sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:78) 在 sun.awt.SunGraphicsCallback.runComponents( SunGraphicsCallback.java:115) 在 java.awt.Container.paint(Container.java:1967) 在 java.awt.Window.paint(Window.java:3867) 在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:781 ) 在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728) 在 javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677) 在 javax.swing.RepaintManager.access$700(RepaintManager.java:59) 在 javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621) 在 java.awt.event.InvocationEvent.dispatch(InvocationEvent.java: 251) 在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705) 在 java.awt.EventQueue.access$000(EventQueue.java:101) 在 java.awt.EventQueue$3.run(EventQueue.java:666) 在java.awt.EventQueue$3.run(EventQueue.java:664) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.awt.EventQueue。 dispatchEvent(EventQueue.java:675) 在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105) 在 java. awt.EventDispatchThread.run(EventDispatchThread.java:90) 线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException: javax.swing.JTable$1.getValueAt(JTable.java:689) 处 javax.swing 中的 1。 JTable.getValueAt(JTable.java:2720) 在 javax.swing.JTable.prepareRenderer(JTable.java:5718) 在 javax.swing.plaf.synth.SynthTableUI.paintCell(SynthTableUI.java:684) 在 javax.swing.plaf .synth.SynthTableUI.paintCells(SynthTableUI.java:581) 在 javax.swing.plaf.synth.SynthTableUI.paint(SynthTableUI.java:365) 在 javax.swing.plaf.synth.SynthTableUI。update(SynthTableUI.java:276) at javax.swing.JComponent.paintComponent(JComponent.java:778) at javax.swing.JComponent.paint(JComponent.java:1054) at javax.swing.JComponent.paintChildren(JComponent.java :887) 在 javax.swing.JComponent.paint(JComponent.java:1063) 在 javax.swing.JViewport.paint(JViewport.java:725) 在 javax.swing.JComponent.paintChildren(JComponent.java:887) 在 javax .swing.JComponent.paint(JComponent.java:1063) 在 javax.swing.JComponent.paintChildren(JComponent.java:887) 在 javax.swing.JComponent.paint(JComponent.java:1063) 在 javax.swing.JComponent。 paintChildren(JComponent.java:887) at javax.swing.JComponent.paint(JComponent.java:1063) at javax.swing.JComponent.paintChildren(JComponent.java:887) at javax.swing.JComponent.paint(JComponent.java :1063) 在 javax.swing。JComponent.paintChildren(JComponent.java:887) at javax.swing.JComponent.paint(JComponent.java:1063) at javax.swing.JLayeredPane.paint(JLayeredPane.java:585) at javax.swing.JComponent.paintChildren(JComponent .java:887) 在 javax.swing.JComponent.paintToOffscreen(JComponent.java:5228) 在 javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482) 在 javax.swing.RepaintManager$PaintManager.paint(RepaintManager. java:1413) 在 javax.swing.RepaintManager.paint(RepaintManager.java:1206) 在 javax.swing.JComponent.paint(JComponent.java:1040) 在 java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:39) ）在 sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:78) 在 sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:115) 在 java。awt.Container.paint(Container.java:1967) 在 java.awt.Window.paint(Window.java:3867) 在 javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:781) 在 javax.swing.RepaintManager.paintDirtyRegions (RepaintManager.java:728) 在 javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677) 在 javax.swing.RepaintManager.access$700(RepaintManager.java:59) 在 javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager .java:1621) 在 java.awt.Event.InvocationEvent.dispatch(InvocationEvent.java:251) 在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705) 在 java.awt.EventQueue.access$000(EventQueue.java :101) 在 java.awt.EventQueue$3.run(EventQueue.java:666) 在 java.awt.EventQueue$3.run(EventQueue.java:664) 在 java.security.AccessController。doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.awt.EventQueue.dispatchEvent(EventQueue.java:675) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211) ) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113) 在 java.awt .EventDispatchThread.pumpEvents(EventDispatchThread.java:105) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:90)pumpOneEventForFilters(EventDispatchThread.java:211) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java :113) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:90)pumpOneEventForFilters(EventDispatchThread.java:211) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java :113) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:90)awt.EventDispatchThread.run(EventDispatchThread.java:90)awt.EventDispatchThread.run(EventDispatchThread.java:90)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:45:07.840

这条线

```
PetShop ourPetShop = MainModel.getPetShop().get(selectedRow); 
```

可能是错误的。`selectedRow`将无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:49:27.773

堆栈跟踪应该向您显示错误所在的确切行。这是你最好的线索。

默认情况下应该包含行号，但如果看不到它们，则使用 (javac -g) 上的调试信息重新编译。

# android - 什么是 Android 中的瞬时通知和持久通知？

> ID：14156492
> 
> 赞同：3
> 
> 时间：2013-01-04T11:40:52.923
> 
> 标签：android, notifications

我们正在为我们的项目开发自定义通知，并遇到了 Android 中的瞬态和持久通知。我无法真正了解它是什么。

瞬时通知 - 这种类型的通知是否类似于新短信、新邮件或任何在阅读或清除后消失的通知？

持续通知 - 此通知是否是通知栏中的永久通知？如果是这样，如何创建持久通知？

请澄清一下。尝试谷歌搜索，但没有得到足够的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:51:37.273

持久通知类似于[持续](http://developer.android.com/reference/android/app/Notification.html#FLAG_ONGOING_EVENT)通知，例如 USB 连接和 WiFi 通知。如果您想创建持久通知，请查看以下帖子，

[创建持久通知](https://stackoverflow.com/a/12206585/1626878)

# c# - 根据范围缩放颜色强度

> ID：14156494
> 
> 赞同：2
> 
> 时间：2013-01-04T11:41:01.597
> 
> 标签：c#, colors

我有一个`Button`我想根据从 0 到 4095 的整数将其颜色从黑色更改为红色。

当数字为 0 时它应该是黑色的，当这个数字增加时，比如说达到 4095 它应该是完全红色的！

```
 ChangeColor(int num)
    {
        if(num== 0)
             lightRight.SetBackgroundColor(new Color(0,0,0));
        if(num> 4000)
            lightRight.SetBackgroundColor(new Color(255,0,0));
        //How to make a nice color that scales from 0 to 4095?
    } 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:44:09.447

这取决于您对中间颜色的需求。RGB 颜色定义为 3 位十六进制两位数，其中 #000000 为黑色，#FFFFFF 为白色。

第一个数字是指红色，第二个是绿色，第三个是蓝色。所以每种颜色的最大数量是 255。

因此首先选择所需的红色，假设这个很好：

右：219 克：62 乙：0

然后计算中间颜色如下，其中 x 属于 [0,4095]：

```
int r = 219 * (x / 4095f) 
int g = 62 * (x / 4095f) 
int b = 0  * (x / 4095f) 
```

让这些值将颜色应用于按钮背景。

```
lightRight.SetBackgroundColor(new Color(r,g,b)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:45:05.280

将加 1 的整数值除以 16，您将得到一个介于 1 和 256 之间的值。将此值减 1，并使用它来计算不同的 RGB 分量

使用您的代码片段：

```
ChangeColor(int num)
{
    // num being between 0 and 4095, get a value between 0 and 255
    int red = ((num + 1) / 16 ) - 1;
    lightRight.SetBackgroundColor(new Color(red,0,0));
} 
```

你必须处理四舍五入和可能的`-1`价值，但你明白了......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T11:45:50.763

```
int myInt; //The value that changes from 0 to 4095.
float red = myInt/4095.0;;
float green = 0;
float blue = 0;

Color myColor = new Color(red, green, blue); 
```

# jquery - 如何检查用户在javascript中输入的有效英文单词

> ID：14156497
> 
> 赞同：2
> 
> 时间：2013-01-04T11:41:08.727
> 
> 标签：jquery, javascript

我打算用javascript制作一个游戏，在其中我会给用户一个选项来选择给定的字符并制作一个有效的英文单词，现在的问题是我如何在javascript中检查用户输入的是一个有效的英文单词或不是，假设我给用户以下字母

1.  ○
2.  D
3.  ○
4.  G

现在可能他可以用这些字符组成三个词`God`，`Good`或者`Dog`。

提前致谢

**编辑**

这些家伙呢

[Typo.JS](http://www.chrisfinke.com/2011/03/31/announcing-typo-js-client-side-javascript-spellchecking/)

这是一个好方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T11:45:03.167

可以想象他也可以写`DO`和`GO`。您需要使用允许单词的字典，并检查答案。

```
var allowedWords = ['god','good','dog','do','go'];
var enteredWord = 'GOD';

if(allowedWords.indexOf(enteredWord.toLowerCase()) >= 0) {
   // match
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:47:34.407

这里有英文单词 MySql 数据库。 [http://androidtech.com/html/wordnet-mysql-20.php](http://androidtech.com/html/wordnet-mysql-20.php)

现在您需要实现服务器端功能。当 word 不存在时将返回 true 或 false。您可以使用 Jquery 通过 Ajax 调用服务并检查游戏中的单词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T11:45:00.777

看看这个：[http ://ejohn.org/blog/dictionary-lookups-in-javascript/](http://ejohn.org/blog/dictionary-lookups-in-javascript/)

寻找客户端解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T11:54:16.700

如果您有多个问题，您还可以像这样验证答案：

```
var gameDict = [
    { 'letters':['o','d','o','g'],  'words':['god','good','dog','do','go', 'goo']},
    { 'letters':['a','e','p'],      'words':['ape']},
    { 'letters':['p','n','e','t'],  'words':['pen', 'ten', 'net']}
]

// Returns `true` if the answer is valid, `false` if it's not.
function validateAnswer(questionNumber, answer){
    return gameDict[questionNumber].words.indexOf(answer.toLowerCase()) >= 0;
}

console.log(validateAnswer(0,'Good'));
// true
console.log(validateAnswer(1,'ap'));
// false 
```

但是，是的，您将不得不为您的游戏手动编写字典，因为除了检查该单词是否真的是一个英文单词之外，您还必须检查您的角色是否可以制作该单词。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T11:57:35.583

正如托尔建议的那样，您需要一本字典（一组字符串，这些单词是您认为有效的“英语单词”）。

But if you really want to check the input **against any english word the "English Dictionary"** the array of words would be **realy** huge and, as it would be loaded along the Javascript, the Javascript would become a file too big to download along with your web page.

In that case, you'd need a database (let say MySQL) to store the words and a script that runs on the server (let's say PHP) that you pass the word with an ajax call. The script would make a query on the DB to see if the word exists and give back the result to your javascript as the ajax response (1=english word 0=word not on the dictionary)

# .net - 使用 .Net 去歪斜图像

> ID：14156498
> 
> 赞同：9
> 
> 时间：2013-01-04T11:41:15.390
> 
> 标签：.net, image-processing

我一直在寻找一种可靠的方法来在 .Net 中对图像进行歪斜校正，但运气不佳。

目前我正在使用 Aforge。这是一个痛苦，因为我正在使用 WPF，所以我正在使用的图像是 BitmapImage 对象，而不是 Bitmap 对象，这意味着我需要从 BitmapImage 对象开始，将其保存到内存流中，创建一个新的 Bitmap 对象从内存流中，经过去偏移处理，将去偏移的图像保存到新的内存流，然后从所述内存流创建一个新的 BitmapImage 对象。不仅如此，偏斜也不是很好。

我正在尝试读取扫描到扫描仪中的一张纸的 OMR 数据，因此我需要依赖一个特定的 OMR 框每次都处于相同的坐标，因此纠偏需要可靠。

所以我现在正在使用 Aforge，我在 .Net 中找不到任何其他免费/开源的图像去偏斜库，我发现的所有东西要么相当昂贵，要么在 C/C++ 中。

我的问题是是否存在其他有助于在 .Net 中进行图像校正的免费/开源库？如果是这样，他们叫什么，如果不是，我应该如何解决这个问题？

编辑：例如，假设我有以下页面：

![初始图像](../Images/66b52c1bafb7e819332f9d1c3e2ae786.png)

注意：这仅用于说明目的，但实际图像确实在页面的每个角落都有一个黑色矩形，也许这会有所帮助。

当我把它打印出来，然后扫描回我的扫描仪时，它看起来像这样：

![扫描图像](../Images/14b7090820750956377653311bf09d53.png)

我需要校正这张图片，这样我的盒子每次都在同一个地方。在现实世界中，有很多盒子，它们更小且靠得很近，因此准确性很重要。

我目前的方法是一个巨大的无效痛苦的屁股：

```
using AForge.Imaging;
using AForge.Imaging.Filters;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Windows.Media.Imaging;

public static BitmapImage DeskewBitmap(BitmapImage skewedBitmap)
{
    //Using a memory stream to minimise disk IO
    var memoryStream = BitmapImageToMemoryStream(skewedBitmap);

    var bitmap = MemoryStreamToBitmap(memoryStream);
    var skewAngle = CalculateSkewAngle(bitmap);

    //Aforge needs a Bppp indexed image for the deskewing process
    var bitmapConvertedToBbppIndexed = ConvertBitmapToBbppIndexed(bitmap);

    var rotatedImage = DeskewBitmap(skewAngle, bitmapConvertedToBbppIndexed);

    //I need to convert the image back to a non indexed format to put it back into a BitmapImage object
    var imageConvertedToNonIndexed = ConvertImageToNonIndexed(rotatedImage);

    var imageAsMemoryStream = BitmapToMemoryStream(imageConvertedToNonIndexed);
    var memoryStreamAsBitmapImage = MemoryStreamToBitmapImage(imageAsMemoryStream);

    return memoryStreamAsBitmapImage;
}

private static Bitmap ConvertImageToNonIndexed(Bitmap rotatedImage)
{
    var imageConvertedToNonIndexed = rotatedImage.Clone(
        new Rectangle(0, 0, rotatedImage.Width, rotatedImage.Height), PixelFormat.Format32bppArgb);
    return imageConvertedToNonIndexed;
}

private static Bitmap DeskewBitmap(double skewAngle, Bitmap bitmapConvertedToBbppIndexed)
{
    var rotationFilter = new RotateBilinear(-skewAngle) { FillColor = Color.White };

    var rotatedImage = rotationFilter.Apply(bitmapConvertedToBbppIndexed);
    return rotatedImage;
}

private static double CalculateSkewAngle(Bitmap bitmapConvertedToBbppIndexed)
{
    var documentSkewChecker = new DocumentSkewChecker();

    double skewAngle = documentSkewChecker.GetSkewAngle(bitmapConvertedToBbppIndexed);

    return skewAngle;
}

private static Bitmap ConvertBitmapToBbppIndexed(Bitmap bitmap)
{
    var bitmapConvertedToBbppIndexed = bitmap.Clone(
        new Rectangle(0, 0, bitmap.Width, bitmap.Height), PixelFormat.Format8bppIndexed);
    return bitmapConvertedToBbppIndexed;
}

private static BitmapImage ResizeBitmap(BitmapImage originalBitmap, int desiredWidth, int desiredHeight)
{
    var ms = BitmapImageToMemoryStream(originalBitmap);
    ms.Position = 0;

    var result = new BitmapImage();
    result.BeginInit();
    result.DecodePixelHeight = desiredHeight;
    result.DecodePixelWidth = desiredWidth;

    result.StreamSource = ms;
    result.CacheOption = BitmapCacheOption.OnLoad;

    result.EndInit();
    result.Freeze();

    return result;
}

private static MemoryStream BitmapImageToMemoryStream(BitmapImage image)
{
    var ms = new MemoryStream();

    var encoder = new JpegBitmapEncoder();
    encoder.Frames.Add(BitmapFrame.Create(image));

    encoder.Save(ms);

    return ms;
}

private static BitmapImage MemoryStreamToBitmapImage(MemoryStream ms)
{
    ms.Position = 0;
    var bitmap = new BitmapImage();

    bitmap.BeginInit();

    bitmap.StreamSource = ms;
    bitmap.CacheOption = BitmapCacheOption.OnLoad;

    bitmap.EndInit();
    bitmap.Freeze();

    return bitmap;
}

private static Bitmap MemoryStreamToBitmap(MemoryStream ms)
{
    return new Bitmap(ms);
}

private static MemoryStream BitmapToMemoryStream(Bitmap image)
{
    var memoryStream = new MemoryStream();
    image.Save(memoryStream, ImageFormat.Bmp);

    return memoryStream;
} 
```

回想起来，还有几个问题：

1.  我是否正确使用了 AForge？
2.  AForge 是用于此任务的最佳库吗？
3.  如何改进我目前的方法以获得更准确的结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T01:44:07.447

给定示例输入，很明显您不是在图像校正之后。这种操作不会纠正您的失真，而是需要执行透视变换。这可以在下图中清楚地看到。四个白色矩形代表四个黑框的边缘，黄线是连接黑框的结果。黄色四边形不是倾斜的红色四边形（您想要实现的那个）。

![在此处输入图像描述](../Images/1a290fc64d958f9a8055052f5d13fd0a.png)

所以，如果你真的能得到上图，问题就简单多了。如果您没有四个角框，则需要其他四个参考点，因此它们确实对您有很大帮助。得到上图后，你就知道了四个黄色的角，然后你只需将它们映射到四个红色的角。这是您需要做的透视变换，根据您的库，可能有一个现成的函数（至少有一个，请查看对您问题的评论）。

上图有多种获取方式，我就简单介绍一个比较简单的。首先，对灰度图像进行二值化。为此，我选择了一个简单的全局阈值 100（您的图像在 [0, 255] 范围内），它保留了图像中的框和其他细节（如图像周围的粗线）。大于或等于 100 的强度设置为 255，低于 100 的强度设置为 0。但是，由于这是打印的图像，因此框的显示程度很可能会有所不同。所以你可能需要一个更好的方法，像形态梯度这样简单的方法可能会更好。第二步是消除不相关的细节。为此，请使用 7x7 正方形（大约是输入图像的宽度和高度之间最小值的 1%）执行形态闭合。要获得框的边框，`current_image - erosion(current_image)`使用一个基本的 3x3 正方形。现在你有一张上面有四个白色轮廓的图像（这是假设除了盒子之外的所有东西都被消除了，我相信这是对其他输入的简化）。要获得这些白色轮廓的像素，您可以进行连接组件标记。通过这 4 个组件，确定右上一个、左上一个、右下一个和左下一个。现在您可以轻松找到所需的点来获取黄色矩形的角。所有这些操作在 AForge 中都很容易获得，因此只需将以下代码转换为 C#：

```
import sys
import numpy
from PIL import Image, ImageOps, ImageDraw
from scipy.ndimage import morphology, label

# Read input image and convert to grayscale (if it is not yet).
orig = Image.open(sys.argv[1])
img = ImageOps.grayscale(orig)

# Convert PIL image to numpy array (minor implementation detail).
im = numpy.array(img)

# Binarize.
im[im < 100] = 0
im[im >= 100] = 255

# Eliminate undesidered details.
im = morphology.grey_closing(im, (7, 7))

# Border of boxes.
im = im - morphology.grey_erosion(im, (3, 3))

# Find the boxes by labeling them as connected components.
lbl, amount = label(im)
box = []
for i in range(1, amount + 1):
    py, px = numpy.nonzero(lbl == i) # Points in this connected component.
    # Corners of the boxes.
    box.append((px.min(), px.max(), py.min(), py.max()))
box = sorted(box)
# Now the first two elements in the box list contains the
# two left-most boxes, and the other two are the right-most
# boxes. It remains to stablish which ones are at top,
# and which at bottom.
top = []
bottom = []
for index in [0, 2]:
    if box[index][2] > box[index+1][2]:
        top.append(box[index + 1])
        bottom.append(box[index])
    else:
        top.append(box[index])
        bottom.append(box[index + 1])

# Pick the top left corner, top right corner,
# bottom right corner, and bottom left corner.
reference_corners = [
        (top[0][0], top[0][2]), (top[1][1], top[1][2]),
        (bottom[1][1], bottom[1][3]), (bottom[0][0], bottom[0][3])]

# Convert the image back to PIL (minor implementation detail).
img = Image.fromarray(im)
# Draw lines connecting the reference_corners for visualization purposes.
visual = img.convert('RGB')
draw = ImageDraw.Draw(visual)
draw.line(reference_corners + [reference_corners[0]], fill='yellow')
visual.save(sys.argv[2])

# Map the current quadrilateral to an axis-aligned rectangle.
min_x = min(x for x, y in reference_corners)
max_x = max(x for x, y in reference_corners)
min_y = min(y for x, y in reference_corners)
max_y = max(y for x, y in reference_corners)

# The red rectangle.
perfect_rect = [(min_x, min_y), (max_x, min_y), (max_x, max_y), (min_x, max_y)]

# Use these points to do the perspective transform.
print reference_corners
print perfect_rect 
```

上面代码与您的输入图像的最终输出是：

```
[(55, 30), (734, 26), (747, 1045), (41, 1036)]
[(41, 26), (747, 26), (747, 1045), (41, 1045)] 
```

第一个点列表描述了黄色矩形的四个角，第二个与红色矩形相关。要进行透视变换，可以使用 AForge 和 ready 函数。为了简单起见，我使用了 ImageMagick，如下所示：

```
convert input.png -distort Perspective "55,30,41,26 734,26,747,26 747,1045,747,1045 41,1036,41,1045" result.png 
```

这给出了您所追求的对齐方式（与以前一样找到蓝线以更好地显示结果）：

![在此处输入图像描述](../Images/f6d6a3ef9a48ee5220492e26849a81c4.png)

您可能会注意到左边的垂直蓝线不是完全笔直的，实际上最左边的两个框在 x 轴上未对齐 1 个像素。这可以通过在透视变换期间使用的不同插值来校正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T20:11:34.177

John Leptonica 库旨在非常快速和稳定。
这是有关如何从 c# [http://www.leptonica.com/vs2008doc/csharp-and-leptonlib.html](http://www.leptonica.com/vs2008doc/csharp-and-leptonlib.html)调用它的链接。我不确定这是否是答案，所以我只是添加了评论。

它有一个 LeptonicaCLR.Utils.DeskewBinaryImage() 来实际去歪斜黑白图像。

我不确定您尝试处理的实际表格会有多好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T21:59:28.937

约翰，我也认为模板匹配也可能有助于解决这个问题（如果 Leptonica 库不够好）。

Aforge.net 内置了模板匹配： [http ://www.aforgenet.com/framework/docs/html/17494328-ef0c-dc83-1bc3-907b7b75039f.htm](http://www.aforgenet.com/framework/docs/html/17494328-ef0c-dc83-1bc3-907b7b75039f.htm)

在我对此的有限了解中，您将拥有裁剪/注册标记的源图像，并使用扫描图像中的模板匹配找到它。然后，您可以裁剪图像以获取仅包含注册标记内的部分的子图像。对于您在上面提供的图像，我认为您可以假设一个相当小的初始倾斜，并且仅在图像的裁剪区域上执行模板匹配以减少总时间。

这里有一些讨论： [如何在图像中定位对齐标记](https://stackoverflow.com/questions/9809769/how-to-locate-alignment-marks-in-an-image)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-18T08:21:51.273

对于那些最终从谷歌来到这里的人来说，使用[Magick.NET](https://github.com/dlemstra/Magick.NET)库可以轻松完成纠偏。

安装其中一个 nuget 包，例如[Magick.NET-Q16-AnyCPU](https://www.nuget.org/packages/Magick.NET-Q16-AnyCPU/)。

用法：

```
private byte[] DeskewImage(byte[] imageFileBytes)
{
    var img = new MagickImage(imageFileBytes);
    // ImageMagick docs say 40% should work for most images
    img.Deskew(new Percentage(40d));
    return img.ToByteArray();
} 
```

# java - Java REST 服务 PUT 参数

> ID：14156500
> 
> 赞同：0
> 
> 时间：2013-01-04T11:41:24.037
> 
> 标签：java, rest, jersey

这就是我的 Jersey Rest web 服务的一些方法的样子，我有一些方法来更新用户设置，例如：

```
@PUT
@Path("/langauge")
@Consumes("text/plain")
public void updateLanguage(String lang) {

    ***check validity of the lang by string comparisons**
     and update database with the new language*
}

@PUT
@Path("/threshold")
@Consumes("text/plain")
public void updateThreshold(Long threshold) {

   *//check value and update in server*
} 
```

现在我有几个问题；

1-而不是针对不同的更新选项使用不同的资源路径，创建一个资源并使用查询参数进行更新会更好吗？这看起来更 Restish 但我不确定我是否真的应该将其更改为类似的东西，因为将来如果有更多的参数需要更新，它会非常混乱，而拥有独立的路径看起来更清晰？

```
@PUT
@Path("/settings/{lang}/{threshold}")
@Consumes("text/plain")
public void updateSettings(@PathParam("threshold") String thre,
        @PathParam("lang") String lang,
        @DefaultValue("") @QueryParam) {

} 
```

2-另一个问题是在更新语言时，我现在接受一种语言作为字符串，然后检查服务器中是否有效，所以当客户端使用这种方法时，他们不知道他们究竟应该发送什么作为有效参数。有没有办法让这对用户更加友好，在 WADL 文件上添加一些评论是一种选择，但是还有另一种更多的 REST 方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:48:59.943

我想说，在不了解应用程序的整个范围的情况下，您可以将设置视为资源，并将特定选项视为设置集合的成员。这将允许添加新设置（缺点是，想要更新多个设置的客户端需要知道并调用所有设置）：

```
/settings/language
/settings/threshold
...
# later
/settings/timeout
/settings/temperature 
```

您可以`GET`在每个选项上实现该方法，以向感兴趣的客户端显示信息（以 HTML 或文本或其他格式）。

另一种方法是在一个端点收集所有设置并以某种格式（例如 JSON）接受请求实体作为所有可用设置的表示。这种方法可以在 elasticsearch API 中广泛使用（例如：[http](http://www.elasticsearch.org/guide/reference/api/admin-indices-update-settings.html) ://www.elasticsearch.org/guide/reference/api/admin-indices-update-settings.html ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:10:29.167

答案：

1）由于它们是独立的资源，它们应该具有独立的服务方法。所以早期的方法很棒。这使您的代码灵活。

2）您可以为每个资源（在这种情况下为语言）提供唯一的 ID，并使用它来更新语言，例如：

```
api/language/{languageId} 
```

这个 ID 可以通过数据库自动生成，或者您可以定义一些其他机制。

# .htaccess - 如何开始使用多域 301 重定向？

> ID：14156505
> 
> 赞同：0
> 
> 时间：2013-01-04T11:41:32.217
> 
> 标签：.htaccess, redirect, cross-domain, http-status-code-301

我们在 .htaccess 中按照我们喜欢的方式进行重定向时遇到了一些麻烦。问题是我们有多个网站的 1 个 webroot。现在我们只想为 domain1 设置重定向规则。

```
Redirect 301 http://www.DOMAIN1.nl/aanbiedingen/2289/ http://www.DOMAIN1.nl/nederland/gelderland/ 
```

在浏览器中调用[http://www.DOMAIN1.nl/aanbiedingen/2289/](http://www.DOMAIN1.nl/aanbiedingen/2289/)时，它会忽略该规则。

将 htaccess 规则更改为：

```
Redirect 301 /aanbiedingen/2289/ http://www.DOMAIN1.nl/nederland/gelderland/ 
```

将触发重定向，但也会触发 DOMAIN2 和 DOMAIN3 的规则。

希望您能帮助我让重定向正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:01:06.210

这是通过`HTTP_HOST`在继续重定向之前检查与您的域匹配来完成的。

```
RewriteCond %{HTTP_HOST} ^www.DOMAIN1.nl$ [NC]
RewriteRule ^aanbiedingen/2289/$ http://www.DOMAIN1.nl/nederland/gelderland/ [R=301,L] 
```

# android - 我无法创建果冻豆模拟器

> ID：14156509
> 
> 赞同：0
> 
> 时间：2013-01-04T11:41:45.680
> 
> 标签：android, avd

我正在尝试通过 Eclipse/Android 插件使用 AVD 工具创建一个模拟器。它不会使 17 级 API 的“确定”按钮可单击。这是一个屏幕截图。 ![在此处输入图像描述](../Images/5e73750345c9b932397749cbf7e7c47b.png) 如果我选择一个设备，它将自动转到该设备的 API，并且我没有任何“运行”Jelly Bean 的设备。我已经下载了 Jelly Bean SDK 的所有软件包，但我仍然做错了什么。如果我先选择设备，它仍然不会让我选择 API 级别 17。选择 Galaxy 7 或 Nexus 7 会给我同样的结果。 ![在此处输入图像描述](../Images/001f5252e1aa4185774f819e7f6e298a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:02:56.013

我必须选择一个设备，更改 api，然后选择一个 CPU/ABI。这让我可以创建模拟器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:54:02.367

首先从设备列表中选择 Galaxy Nexus 或 Nexus 7 设备。然后您可以选择 API 级别 17 并相应地创建 AVD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:51:52.227

您没有**选择任何设备。请通过单击**屏幕中称为**“设备”的微调器/列表框来选择设备**

请参考下面给出的图片 ![在此处输入图像描述](../Images/ead3471eab02a8598f8042cc8ac572c8.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T11:49:29.543

如果您选择某个特定设备，则需要下载该设备，然后选择其他设备。例如设备：- `4.0" WVGA(400x800:hdpi).`

如果您下载了所有软件包，那么它应该可以毫无问题地创建 AVD

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T11:49:30.933

**首先选择一个设备，然后您可以选择目标 API 为 17...** *例如*-

![在此处输入图像描述](../Images/41e57c3547f21a83f748c2c64c9d99a5.png)

# ruby-on-rails-3 - 在客户端使用 Rails 本地化 I18n

> ID：14156512
> 
> 赞同：2
> 
> 时间：2013-01-04T11:41:51.780
> 
> 标签：ruby-on-rails-3, rails-i18n

使用客户端视图渲染时，是否有可能获得 Rails 应用程序的所有本地化功能？

关于如何实现这样的事情有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T19:12:28.730

看看[`i18n-js`](https://github.com/fnando/i18n-js)宝石……

# excel - 自动化 FillDown 不起作用

> ID：14156516
> 
> 赞同：0
> 
> 时间：2013-01-04T11:42:08.353
> 
> 标签：excel, vba

代码当前如下所示：

```
Sub PriceChange()
Dim ws As Worksheet
Dim i As Long

For Each ws In ThisWorkbook.Worksheets

  If Not ws.Name = "Cover" Then
  i = Range("G" & Rows.Count).End(xlUp).Row

ws.Range("K13").Formula = "=IF(AND(J13<>0,J14<>0),IFERROR(J14/LOOKUP(2,1/(J$13:J13<>0),J$13:J13)-1,""Bad""),""Bad"")"
'Set sourceRange = ws.Range("K13")
Range("K14").Select
Range("K14").Copy
    Selection.AutoFill Destination:=Range("K14:K" & Range("G65536").End(xlUp).Row)
'Set fillRange = ws.Range("K14:K" & i)
'sourceRange.AutoFill Destination:=fillRange
ws.Range("H13").Formula = "=IF(AND(G13<>0,G14<>0),IFERROR(G14/LOOKUP(2,1/(G$13:G13<>0),G$13:G13)-1,""Bad""),""Bad"")"
'    Set sourceRange = ws.Range("H13")
    Range("H14").Select
    Selection.AutoFill Destination:=Range("H14:H" & Range("G65536").End(xlUp).Row)

'Set fillRange = ws.Range("H14:H" & i)
'sourceRange.AutoFill Destination:=fillRange
    End If
    Next ws

End Sub 
```

我已经离开了注释掉的部分，因为它曾经使用过这些部分。我不得不更改一些公式，而现在填充仅填充顶行（即它不起作用）。我希望它填充整个范围（动态）。我最接近它的是前 2 行，但我开始绕圈子了。

关于我要去哪里错的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:04:05.333

请不要`select`为了性能而列...您可以参考`range object`

请尝试以下方法：

```
'--change the sheet accordingly

Sheets1(1).Range("K15").Formula = Sheets(1).Range("K14").Formula
Sheets(1).Range("K15").AutoFill Destination:=Sheets(1).Range("K15:K" & i) 
```

您可以添加以下内容`Sub routine`来测试您的工作表。可能你的`loop`. `Offset`，`Resize`是改进代码的更好技巧。你甚至可以不使用`With`..

```
Sub fillFormulasDown()
Dim wkSheet As Worksheet
Dim lRow As Long

    Application.ScreenUpdating = False
    '--if you have a password use this line
    Set wkSheet = Sheets(1)
    'wkSheet.Unprotect Password:="urpassword"
    '--otherwise use this line
    wkSheet.Unprotect

    lRow = wkSheet.Range("G" & wkSheet.Rows.Count).End(xlUp).Row
    '--test with a small formula
    wkSheet.Range("K13").Formula = "=IF(J13<>0,1,0)"

      With wkSheet.Range("K14")
        .Formula = Range("K13").Formula
        .AutoFill Destination:=.Offset(0, 0).Resize(lRow)
      End With

    wkSheet.Unprotect
    Application.ScreenUpdating = True
End Sub 
```

# c# - 查询 SharePoint 列表时 Any() 不起作用

> ID：14156517
> 
> 赞同：0
> 
> 时间：2013-01-04T11:42:12.843
> 
> 标签：c#, visual-studio-2010, linq, sharepoint

我正在尝试查询 Sharepoint 列表以查找用户名是否存在于列表中。我在此使用 LINQ。我试过的代码：

```
SPList l = web.Lists["Acknowledgements"];
var listEnumeration = l.Items.OfType<SPListItem>();
bool a = listEnumeration.Any(p => p["User"].ToString().Equals(@"SHAREPOINT\system")); 
```

但是，即使在调试之后，布尔值也会返回 false，XML 模式显示它正在返回用户名。

```
<z:row xmlns:z='#RowsetSchema' 
       ows_ContentTypeId='0x0100115773AE97ADF5418FF3A1AE2F660D3E' 
       ows_User='SHAREPOINT\system' 
       ows_Acknowedgement_x0020_Date='2013-01-01 00:00:00' 
       ows_ID='17' ows_ContentType='Item' 
       ows_Modified='2013-01-01 12:24:01' 
       ows_Created='2012-12-31 14:40:51' 
       ows_Author='1073741823;#System Account' 
       ows_Editor='1073741823;#System Account' /> 
```

知道我在这方面做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:46:01.120

首先，您真的不应该使用 list.Items.linq 来查找目标 ListItems。尝试将 SPQuery 与目标属性一起使用，它更快更可靠。
[http://www.aidangarnish.net/post/Using-SPQuery-and-CAML-to-filter-and-order.aspx](http://www.aidangarnish.net/post/Using-SPQuery-and-CAML-to-filter-and-order.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:46:54.933

`p["User"].ToString()`可能不是逐字返回帐户名称，而是一个“查找”值，作为字符串，看起来`"1;#DOMAIN\logon"`或相似。

典型地，您应该将其解析`p["User"]`为[`SPFieldUserValue`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfielduservalue.aspx)，但您可能只使用 using`Contains`而不是`Equals`在这种情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:16:37.593

尝试

```
SPList l = web.Lists["Acknowledgements"];
var listEnumeration = l.Items.Cast<SPListItem>();
bool a = listEnumeration.Any(p => p["User"].ToString().Equals(@"SHAREPOINT\system")); 
```

# .net - .NET 会话在构建后未保存

> ID：14156521
> 
> 赞同：1
> 
> 时间：2013-01-04T11:42:49.183
> 
> 标签：.net, asp.net-mvc, session

我创建了一个 ASP.NET MVC 应用程序，它在用户登录后将其用户信息保存在会话中。没什么好看的，只是一个简单的应用程序。

最近我注意到这种奇怪的行为，会话只是不会在重建后的第一次运行时保存。而且是一致的。

这是一个例子：

1.  重建解决方案
2.  打开登录页面，输入凭证
3.  登录验证，重定向到仪表板，但仪表板显示未找到会话
4.  返回登录页面，输入相同的凭证
5.  登录验证，重定向到仪表板没有问题

在完美的情况下，第 3 项中不应该有任何错误，因为在验证时，会话被设置为标记用户登录的应用程序。

我想知道我是否错过了这里的某些东西，或者这就是 Session 的工作方式。我希望有人能给我一些启示。

```
[HttpGet]
public ActionResult Index(){
   HttpContext.Session.Remove("UserIn");
   return View();
}
[HttpPost]
public ActionResult Index(string username, string password){
  bool validUser = true;
  if(validUser){
    HttpContext.Session["UserIn"] = username;
  }
  return RedirectToAction("Dashboard");
}

[HttpGet]
public ActionResult Dashboard(){
   if(HttpContext.Session["UserIn"] == null){
     throw new Exception("No session found");
   }
   return View();
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-04T15:35:50.307

我强烈建议您使用表单身份验证并将用户名存储在主体对象中。

检查这篇文章[http://mikehadlow.blogspot.com.ar/2008/03/forms-authentication-with-mvc-framework.html](http://mikehadlow.blogspot.com.ar/2008/03/forms-authentication-with-mvc-framework.html)

# encryption - 在 openjre 中使用需要 Java 策略文件的加密

> ID：14156522
> 
> 赞同：3
> 
> 时间：2013-01-04T11:42:48.003
> 
> 标签：encryption, bouncycastle, openjdk, policyfiles

如果我想使用 java 和密钥长度超过 128 位的加密，我必须使用 Java 策略文件。如何使用 openjre 启动和运行这些应用程序？我得到与使用没有策略文件的 oracle jre 相同的错误，但我不能简单地使用 Oracle 策略文件？或者我可以吗？

或者会用 openjdk 帮助构建项目吗？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:25:35.173

我发现了以下内容。它似乎解决了我曾经遇到的所有政策问题。

```
 try {
    Field field = Class.forName("javax.crypto.JceSecurity").getDeclaredField("isRestricted");
    field.setAccessible(true);
    field.set(null, java.lang.Boolean.FALSE);
  } catch (Exception ex) {

  } 
```

这不是很好，但工作！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-15T21:20:34.220

另一个答案是正确的，但不完整。经过一番折腾，我找到了下面对我有用的代码。不用担心法律方面的问题，自 2011 年以来，Oracle 实际上有权摆脱这种愚蠢的出口管制废话，但只是还没有时间更新 JVM！（如果您不相信我，请查看他们的错误跟踪器）。

希望这可以帮助。它适用于 Java 8。这部分代码不太可能发生太大变化，但显然，我们在这里摆弄了内部私有代码，因此它可能随时因任何 Java 更新而中断。买者自负。

```
Field gate = Class.forName("javax.crypto.JceSecurity").getDeclaredField("isRestricted");
gate.setAccessible(true);
gate.setBoolean(null, false);
Field allPerm = Class.forName("javax.crypto.CryptoAllPermission").getDeclaredField("INSTANCE");
allPerm.setAccessible(true);
Object accessAllAreasCard = allPerm.get(null);
final Constructor<?> constructor = Class.forName("javax.crypto.CryptoPermissions").getDeclaredConstructor();
constructor.setAccessible(true);
Object coll = constructor.newInstance();
Method addPerm = Class.forName("javax.crypto.CryptoPermissions").getDeclaredMethod("add", java.security.Permission.class);
addPerm.setAccessible(true);
addPerm.invoke(coll, accessAllAreasCard);
Field defaultPolicy = Class.forName("javax.crypto.JceSecurity").getDeclaredField("defaultPolicy");
defaultPolicy.setAccessible(true);
defaultPolicy.set(null, coll); 
```

# javascript - Safari 在将“动画播放状态”设置为暂停时刷新页面

> ID：14156523
> 
> 赞同：3
> 
> 时间：2013-01-04T11:42:51.587
> 
> 标签：javascript, css, animation, browser, safari

这真的很奇怪，但每次我设置`$(element).css('animation-play-state', 'paused');`safari 都会刷新整个页面。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:05:27.607

这是由于 Safari 5.1 中的一个错误（也可能更高。）程序正试图访问它不应该访问的受保护内存的一部分，并且 Windows 在它出现任何重大问题之前停止该进程。[已经向 Apple 提交了大量错误报告](https://discussions.apple.com/thread/3194268?start=0&tstart=0)，但还没有修复的消息。

您可以尝试修复 Safari 的安装，但任何人都在猜测它是否可以正常工作，当然，您页面上的其他用户必须完成这些步骤，这对他们来说是很多问题。

```
Windows + R -> appwiz.cpl -> Right click Safari -> Repair. 
```

希望其中一些有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T15:45:57.620

我在 Windows 上使用 Safari 5.1.7 时遇到了同样的问题，但是当使用 Safari 5.0.6 在 Mac 上执行相同的代码时，它可以正常工作。

不幸的是，不能像@Kramp 建议的那样断定它是 Windows 还是 Safari 5.1 以上的任何东西。假设Windows ..

# javascript - 使用 Django 和 Backbone 进行渐进式增强 - 如何将两者结合起来？

> ID：14156525
> 
> 赞同：7
> 
> 时间：2013-01-04T11:42:53.280
> 
> 标签：javascript, python, django, backbone.js, progressive-enhancement

我有一个非常简单的 Django 应用程序，它允许用户提交表单并查看基于国家、持续时间和价格的过滤后的假期列表。

我想在前端使用 Backbone，这样启用了 JS 的用户不需要 GET 来查看结果，而是可以动态加载它们。

我想用[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)，让有JS的用户得到Backbone的体验，没有JS的用户仍然可以使用表单。我也想遵循[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

我的问题是如何最好地做到这一点。是否有将两者结合使用且重复次数最少的示例？我特别想：

1.  **像这样路由**一个 URL `/italy/1-week/from-500-to-1000/`- 我现在是否需要编写两组路由代码，一组在 Django 中`urls.py`，一组在 Backbone 的路由器中，以获取国家/地区/持续时间/价格参数？
2.  **根据参数过滤**数据 - 我是否需要编写两种不同的方法，一种在 Backbone 中`views.py`，一种在 Backbone 中？（我假设我至少可以为这两个调用使用一个 API。）
3.  **在模板中渲染**- 我需要为 Django 编写一个列表模板，为 Backbone 编写另一个列表模板，还是两者都可以使用相同的模板？

到目前为止，我发现的将 Backbone 集成到 Django 中的最好（唯一）示例是 Josh Bohde 的[Django Backbone repo](https://github.com/joshbohde/django-backbone-example)，它没有逐步增强。

我还发现了这篇[关于 Backbone 和 Rails 渐进式增强的博客文章](http://lostechies.com/derickbailey/2011/09/26/seo-and-accessibility-with-html5-pushstate-part-2-progressive-enhancement-with-backbone-js/)，但是看到 Django 的类似内容会非常有用。

更新：刚刚[在一个类似的主题上发现了这个 SO 问题](https://stackoverflow.com/questions/14081035/jinja2-backbone-js-and-progressive-enhancement)——情况真的像答案听起来那样无望吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:39:19.963

> 情况真的像答案听起来那样无望吗？

差不多。但是，由于我在一个曾经基于 Django 但现在基于 Backbone 的网站上工作，我可以提供一些想法：

> 路由像 /italy/1-week/from-500-to-1000/ 这样的 URL - 我现在需要编写两组路由代码，一组在 Django 的 urls.py 中，另一组在 Backbone 的路由器中，以获取国家/持续时间/价格参数？

是的，但有一些方法可以最大限度地减少重复。我们采用的方法是让 Django 将所有 URL 作为 JS 变量输出到我们的主 HTML 页面模板中：

```
<script>
URLS.report_error = "{% url app.log_client_error_view %}";
URLS.access_file = "{% url app.access_file_view 12345 %}";
</script> 
```

现在我们有一个使用 12345 作为我们生成的每个 URL 中的参数的模式；这使得将 URL 转换回 Backbone 路由正则表达式变得很容易，因为我们基本上可以`12345`用`([^/]+)`.

为了全面披露，我们确实有一堆“手工”编写的路由正则表达式，但这并不是因为我们无法自动化它们；只是我们正在远离 Django 方面，所以我们没有理由清理该代码。如果你想获得支持两者的核心，你应该能够想出一个非常简单/简单的翻译方案。

> 根据参数过滤数据 - 我是否需要编写两种不同的方法，一种在 views.py 中，另一种在 Backbone 中？（我假设我至少可以为这两个调用使用一个 API。）

这在任何网站上基本上都是不可避免的问题，不仅仅是 Backbone/Django。您*必须*在服务器端过滤数据，因为您永远无法信任客户端（例如，用户可以禁用 JS）。同时，仅服务器端的过滤是 1990 年代的，因此您还需要在客户端创建（重复）过滤逻辑（这样您就可以告诉用户“您忘记提供字段 X”而无需等待往返服务器）。

但是，有一些方法可以限制这种重复。我自己并没有在这件作品上工作，但我知道一位同事设法以一种奇怪的方式使用 Django 表单（他采用了 Django 提供的表单，然后在将它们用作主干视图的模板之前稍微解析了它们）。这并没有完全消除重复，不幸的是我不记得任何细节，但它确实有帮助。

> 在模板中渲染 - 我需要为 Django 编写一个列表模板，为 Backbone 编写另一个列表模板，还是两者都可以使用相同的模板？

如果您所做的只是变量 ( `{{foo}}`)，Handlebars 模板的语法与 Django 模板相似。如果您想在两者之间共享逻辑，则两者的语法（`{% if foo %}`vs. `{{#if foo}}`）略有不同，但它们足够接近，如果您不介意做一些解析工作，您应该能够轻松地将一个转换为另一个。

所以，是的，你做了大量的工作只是为了支持你的一小部分用户（那些浏览器不支持 Backbone 的用户）。我*强烈*建议您在 Google Analytics 之类的地方查看用户的浏览器统计信息（或者如果您的网站尚未启动，请查看一般网络统计信息），以确定对于您的一小部分用户群而言，所有这些麻烦是否真的值得. 如果没有统计数据，您将无法知道该百分比有多小，并且显然是该决定的关键因素。

对我们来说，选择是显而易见的：要求我们的用户使用本世纪制造的浏览器（这几乎是 Backbone 的所有需求），并且只使用 Backbone。但是如果这个选择对你来说不是那么明显......祝你好运尝试干掉你的 Django 和 Backbone 代码:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:09:43.053

我刚刚读到了一个完全不同的解决方案，我认为我会分享：HTML 快照 (https://developers.google.com/webmasters/ajax-crawling/docs/html-snapshot)。我链接的页面是基于 Java 的，但您当然可以在 Python/Django 中设置类似的内容。

基本思想是，您在服务器上设置一个无头 Javascript 运行程序，当网络爬虫访问您的站点时，您使用该 JS 运行程序生成如果您的 Backbone 代码在客户端正常运行时会生成的 HTML。然后，它将 HTML 发送回网络爬虫，让您拥有一组用于客户端和服务器的代码。

运行无头 JS 运行器可能存在一些潜在的小问题（它们与 Web 浏览器的内置 JS 不是 100% 相同），但是当用于这种“HTML 快照”方法时，它们不应该太相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T16:02:54.660

不确定您是否仍在努力解决此问题，但我一直在努力寻找解决此问题的方法。我写了一篇关于它的初步博客文章：

[JavaScript 框架与 Django 的互操作性](http://sidazad.tumblr.com/post/52201957429/web-2-0-the-switch-to-client-javascript-frameworks)

我将在几周内跟进一个完整的“Notes”应用程序示例，该应用程序使用 Django + Backbone + Marionette + Some Other Plugins 完成。

该代码还将演示如何在客户端使用 Django 模板，因此它可能对您有用。

如果有兴趣，您可以关注我的博客或推特（更好）@sid_azad

# python - 在python中执行bash代码

> ID：14156526
> 
> 赞同：-2
> 
> 时间：2013-01-04T11:42:54.123
> 
> 标签：python

我对 python 很陌生，我有一个 bash 代码，它将文件的结果存储到一个像这样的变量中：

```
variable=(`cat text`) 
```

现在`variable`有`test`. 我在 python 中尝试了类似的`Popen`调用，如下所示：

```
 subprocess.Popen("variable=(`cat text`)") 
```

但我得到这样的错误：

```
Traceback (most recent call last):
  File "./push-jenkins", line 5, in <module>
    subprocess.Popen("variable=(`cat text`)")
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

不知道我在哪里犯了错误。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:49:40.033

您无法从 Python 访问 bash 变量。改为：

```
variable = subprocess.check_output(['cat', 'text']) 
```

我假设这个命令只是一个例子，因为你可以很容易地从 Python 读取文件。

请注意，调用`check_output`将命令接收为参数的拆分列表，而不是单个字符串。如果您有一个字符串并且不想手动拆分，您可以执行以下操作：

```
variable = subprocess.check_output(['sh', '-c', command]) 
```

甚至更好：

```
variable = subprocess.check_output(command, shell=True) 
```

并让外壳完成艰苦的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:57:55.683

如果你想在这里使用管道，你可以这样做：

```
import subprocess as subp

proc = subp.Popen(["python", "Test_Pipe.py"], stdout=subp.PIPE, stdin=subp.PIPE)

while True :
    data = proc.stdout.readline() #block / wait
    print data 
```

# android - 带有自定义适配器的 Coverflow

> ID：14156530
> 
> 赞同：2
> 
> 时间：2013-01-04T11:43:19.890
> 
> 标签：android, coverflow

我想使用自定义适配器创建一个封面流（图像视图作为缩略图，文本视图作为标题，进度条表示一些进度..）。

Cover 流小部件的所有示例或实现均基于 Gallery（witch 仅支持图像集合）。

有什么提示和想法可以帮助我吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T13:44:12.227

这很容易做到；您使用与例如列表视图相同的适配器。扩展 `BaseAdapter`, 使用`ViewHolder`模式并在

```
public View getView(int position, View convertView, ViewGroup parent) { 
```

方法。但是你应该改变

```
 transformImageBitmap(THIS child, Transformation t, int rotationAngle) 
```

至

```
transformImageBitmap(View child, Transformation t, int rotationAngle) 
```

`CoverFlow.java`或者你会得到`ClassCastExceptions`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:00:55.710

如果您想要所有视图的覆盖流，而不是来自蜂窝的可能，您可以使用方法 View.setRotationY(rotationangle) 旋转视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:56:59.013

我使用的解决方法可能不是您需要的。然而，这是我能想到的......我把我想要的任何东西放在 a`LinearLayout`中，然后将其转换为 a `Bitmap`：

```
LayoutInflater inflater = (LayoutInflater) ClassifiedActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);              

LinearLayout layout = (LinearLayout) inflater.inflate(R.layout.my_layout_as_imageview,
                null);
layout.setBackgroundResource(R.drawable.stub);

layout.setDrawingCacheEnabled(true);

layout.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
layout.layout(0, 0, layout.getMeasuredWidth(), layout.getMeasuredHeight());

layout.buildDrawingCache(true);
Bitmap b = Bitmap.createBitmap(layout.getDrawingCache());
layout.setDrawingCacheEnabled(false); // clear drawing cache

ImageView iv= (ImageView) findViewById(R.id.imageView1);
iv.setImageBitmap(b); 
```

我的布局 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Medium Text" />

</LinearLayout> 
```

[这个答案](https://stackoverflow.com/a/4618030/1276636)帮助我将 a 转换`LinearLayout`为 a `Bitmap`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:07:47.687

您可以通过使用惰性适配器来做到这一点。您必须在图像加载器类的解码文件中创建反射图像。接下来，您必须从自定义适配器类的 getview 方法返回一个图像视图。

这是示例代码：

```
In main activity:

CoverFlow coverflow=(CoverFlow)findViewById(R.id.yourcoverflowid);

coverflow.setAdapter(new customadapter(getActivity(),list,imagesize));

In getview method of custom adapter:

    ImageView i=new ImageView(activity);       
    imageLoader.DisplayImage(data.get(position).getimage(),i);

    i.setPadding(0,5,0,0);

    i.setLayoutParams(new CoverFlow.LayoutParams(width,height));

    i.setScaleType(ImageView.ScaleType.MATRIX);

    return i;

In decodefile method of imageloader class 
```

尝试{最终 int 反射间隙 = 4;

```
 Bitmap originalImage;

     BitmapFactory.Options o = new BitmapFactory.Options();
     o.inJustDecodeBounds = true;
     FileInputStream stream1=new FileInputStream(f);
     originalImage=BitmapFactory.decodeStream(stream1);
     stream1.close();

        int width = originalImage.getWidth();
        int height = originalImage.getHeight();

        //This will not scale but will flip on the Y axis
        Matrix matrix = new Matrix();
        matrix.preScale(1, -1);

        //Create a Bitmap with the flip matrix applied to it.
        //We only want the bottom half of the image
        Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0, height/2, width, height/2, matrix, false);

        //Create a new bitmap with same width but taller to fit reflection
        Bitmap bitmapWithReflection = Bitmap.createBitmap(width 
          , (height + height/2), Config.ARGB_8888);

       //Create a new Canvas with the bitmap that's big enough for
       //the image plus gap plus reflection
       Canvas canvas = new Canvas(bitmapWithReflection);
       //Draw in the original image
       canvas.drawBitmap(originalImage, 0, 0, null);
       //Draw in the gap
       Paint deafaultPaint = new Paint();
       canvas.drawRect(0, height, width, height + reflectionGap, deafaultPaint);
       //Draw in the reflection
       canvas.drawBitmap(reflectionImage,0, height + reflectionGap, null);

       //Create a shader that is a linear gradient that covers the reflection
       Paint paint = new Paint(); 
       LinearGradient shader = new LinearGradient(0, originalImage.getHeight(), 0, 
         bitmapWithReflection.getHeight() + reflectionGap, 0x70ffffff, 0x00ffffff, 
         TileMode.CLAMP); 
       //Set the paint to use this shader (linear gradient)
       paint.setShader(shader); 
       //Set the Transfer mode to be porter duff and destination in
       paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN)); 
       //Draw a rectangle using the paint with our linear gradient
       canvas.drawRect(0, height, width, 
         bitmapWithReflection.getHeight() + reflectionGap, paint); 

    return bitmapWithReflection; 
```

# c++ - IntelliSense：期望 C++ 中的声明

> ID：14156532
> 
> 赞同：0
> 
> 时间：2013-01-04T11:43:21.810
> 
> 标签：c++, visual-studio-2010

我正在尝试将 C 和 C++ 代码一起添加，但最终以`IntelliSense:expected a declaration`.

例如 `abc.cpp`

```
#include "abc.h"
#ifdef __cplusplus
extern "C"
{
#endif
#include "C_headerfiles.h"
...
...//Body of C code
#ifdef _cplusplus
}
#endif
...
...//Body of C plus plus code

#ifdef __cplusplus
extern "C"       //`IntelliSense:expected a declaration
{
#endif
...
...//Body of C code
#ifdef _cplusplus
}
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:45:39.110

我已经解决了这个问题：需要添加`extern C` `only once`not `again and again`。

```
#include "abc.h"
#ifdef __cplusplus
extern "C"
{
#endif
#include "C_headerfiles.h"
...
...//Body of C code

...
...//Body of C plus plus code

...
...//Body of C code
#ifdef _cplusplus
}
#endif 
```

# android - 存储在应用程序中的html文件使用存储在应用程序中的drawable？

> ID：14156533
> 
> 赞同：0
> 
> 时间：2013-01-04T11:43:23.663
> 
> 标签：android, html, webview, drawable

我有一个带有 webview 的 android 应用程序。当我尝试将图像设置为背景时，我意识到**webview**会“覆盖”它，所以**我不能使用 xml 的直接背景**。

现在，我有一个想法将图像插入 html 文件而不是 xml。该图像存储在**res**文件夹中，它与我用于 xml 背景的图像相同。

我已经尝试过这样的事情，但它不起作用：D

```
<article align="center" background:url('@drawable/background320x480')> 
```

是否可以为 2 个背景使用相同的图像文件？（xml和webview）还是有更简单的方法来做到这一点？

感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:47:41.290

你应该使用`file:///android_res`：

```
<article align="center" background:url('file:///android_res/drawable/background320x480')> 
```

# analytics - ParAccel 的 FastLoad（在 Teradata 中）等价物是什么？

> ID：14156539
> 
> 赞同：2
> 
> 时间：2013-01-04T11:43:39.267
> 
> 标签：analytics, sas, business-intelligence, teradata, paraccel

我最近从 Teradata 转移到 ParAccel，并在 SAS 环境中使用我的 BI DBMS。Teradata 具有此实用程序`FastLoad`，可用于快速、更高效地加载大型数据集。我经常不得不使用这个实用程序将数据集从 SAS 库传输到 Teradata。我想知道 ParAccel 是否也有类似的实用程序/命令/功能。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:48:46.687

是的，ParAccel 确实具有批量加载实用程序，并且还具有用于 SAS 直接加载数据的 ODBC 模块。我鼓励您联系 ParAccel 支持！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T10:48:25.840

你应该看看复制命令

> psql $DATABASE -c "从'local'复制destination_table()并使用并行分隔符',' truncatecolumns MAXERROR 100000"

# html - HTML 表单不采用文本字段的值

> ID：14156542
> 
> 赞同：0
> 
> 时间：2013-01-04T11:44:00.173
> 
> 标签：html, jquery-ui-datepicker, forms, html-post

您好，这是我的 HTML 表单

```
<table border="0" cellpadding="4" cellspacing="4"><tr></tr>
    <form method="post" action="<?php echo base_url()?>book/room_book_proc/<?php echo $hotel_det[0]['hotel_id']?>" id="booking" name="booking">
    <tr><h3>Please Enter Your Visit Details: </h3></tr>
    <tr><th>Check In Date : </th>
    <td><input type="text" name="cn-date" id="cn-date" value="" class="jdpicker"/></td>
    </tr>

    <tr><th>Check Out Date : </th>
    <td><input type="text" name="co-date" id="co-date" value="" class="jdpicker"/></td>
    </tr>

    <tr><th>No of Person : </th><td></td>
    <tr><th></th><td>Adult: <select name="adult" class="">
    <option value="">Select</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    </select></td></tr>

    <tr><th></th><td>Children: <select name="child" class="">
    <option value="">Select</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    </select></td></tr>

    <tr><th>Room Type :</th>
    <?php $this->db->select("*");
        $this->db->from("b_room_type");
        $this->db->where("hotel_id",$hotel_det[0]['hotel_id']);
        $room_types=$this->db->get()->result_array();
        ?>
    <td><select name="toom_typ" class="">
    <option value="">Select</option>
    <?php foreach($room_types as $rooms)
        {?>
    <option value="<?php echo $rooms['room_type_id']?>"><?php echo $rooms['room_type_name']?></option>
    <?php }?>
    </select></td>
    </tr>

<input type="hidden" name="today" value="<?php echo date("Y-m-d");?>"  />
<tr><th></th><td><input type="submit" name="submit" value="Confirm" /></form></td></tr>
</table> 
```

当我在 php 页面中打印发布的数组时，它只显示字段的值：**成人**、**儿童**和**房间类型**，但不采用**签**入字段和**签出**字段的值。

我正在使用日期字段 [jquery 日期选择器](http://jdpicker.paulds.fr/)

到底出了什么问题？我错过了什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:03:40.003

我认为这是因为您将`<form>`标签放在表内。尝试将`<form>`标签放在表外。还有一个想法是，您`(-)`在导致问题的字段名称中使用连字符将其删除，您可以使用下划线`(_)`符号而不是连字符`(-)`。

# maven - 停止 mvn exec:java -PCamelServer 触发的实例

> ID：14156543
> 
> 赞同：-1
> 
> 时间：2013-01-04T11:44:07.457
> 
> 标签：maven, jetty, apache-camel

我正在尝试这个示例与 Camel 一起出现。

我使用腻子在远程服务器上运行它。

启动服务器后，我关闭了 Putty( 是的 !! :( )

现在，当我重新连接到 putty 时，我得到了一个离开服务器的新实例。

如何在不重新启动机器的情况下停止该实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T08:48:12.530

更新以澄清：

Tomcat 是一个运行守护进程的服务器，可以使用各种脚本进行处理。Camel 没有运行时组件——要在开发之外运行它，通常需要将它与服务器（ServiceMix、Tomcat、Jetty、WebSphere 或其他）捆绑在一起。在这些示例中，camel 只是在 main 方法中运行，阻塞了控制台（使用[此](http://camel.apache.org/running-camel-standalone-and-have-it-keep-running.html)功能）。如果您的 ssh 会话结束时该进程仍在运行，您需要终止机器上的进程。

这更像是一个 unix 问题，而不是一个骆驼（甚至堆栈溢出）问题（我假设您运行一些 unix，因为您使用 putty 连接到它）。

但无论如何，您需要关闭该进程。

1.  查找进程ID（pid）`ps -ef`并找到行`mvn exec:java -PCamelServer`
2.  杀死它`kill -9 <pid>`

# c# - Windows 8 C# GridView e.ClickedItem

> ID：14156544
> 
> 赞同：3
> 
> 时间：2013-01-04T11:44:08.047
> 
> 标签：c#, gridview, windows-8, indexof

我有一个`GridView`with items 和一个数组，其中包含有关我的`GridView`. 我想获取单击项目的索引，我尝试使用我之前使用的相同代码`ListView`：

```
private void GridView1_ItemClick(object sender, ItemClickEventArgs e)
{
    int test = GridView1.Items.IndexOf(e.ClickedItem);
} 
```

当我调试我的代码时， int`test`将始终具有 value `-1`。我不知道为什么这不起作用，我希望你们中的一个人这样做。

**编辑：**感谢所有回复！这里有一些额外的信息：我已经禁用了，`SelectionMode`因为我只想捕获`ClickedItem`. 我想知道索引，因为它链接到我的额外信息数组。

由于我`SelectionMode`的设置为“无”，因此我无法捕获 SelectedItem/SelectedIndex。我尝试启用它们，但再次收到值“-1”。

**编辑#2：**`ItemSource`自从我手动添加项目以来，我没有设置任何内容。这可能是问题吗？我`ListView`使用 no 没有问题`ItemSource`。

**编辑＃3：**

C#代码：

```
TextBlock content_textblock = new TextBlock();

content_textblock.Width = 250;

content_textblock.Text = total;

content_textblock.TextWrapping = TextWrapping.Wrap;

content_textblock.Foreground = (SolidColorBrush)Application.Current.Resources["ListViewItemOverlayForegroundThemeBrush"];
content_textblock.Style = (Style)Application.Current.Resources["CaptionTextStyle"];
content_textblock.LineHeight = 30;
content_textblock.Padding = new Thickness(5, 0, 10, 15);
content_textblock.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
content_textblock.Arrange(new Rect(0, 0, content_textblock.DesiredSize.Width, content_textblock.DesiredSize.Height));

StackPanel content_stackpanel = new StackPanel();
content_stackpanel.Margin = new Thickness(0, 250 - content_textblock.ActualHeight, 0, 0);
content_stackpanel.VerticalAlignment = Windows.UI.Xaml.VerticalAlignment.Top;
content_stackpanel.Height = content_textblock.Height;
content_stackpanel.Width = 250;
content_stackpanel.Background = (SolidColorBrush)Application.Current.Resources["ListViewItemOverlayBackgroundThemeBrush"];
content_stackpanel.Children.Add(content_textblock);

ImageBrush content_brush = new ImageBrush();
content_brush.ImageSource = new Windows.UI.Xaml.Media.Imaging.BitmapImage(new Uri("http://ic.tweakimg.net/ext/i/thumbs_fpa_small/1357208162.jpeg")); //it is a placeholder, haha

GridView1.Items.Add(new GridViewItem { Background = content_brush, Content = content_stackpanel, Width = 250, Height = 250 }); 
```

XAML：

```
<GridView x:Name="GridView1" Margin="0,29,0,0" Grid.Row="2" SelectionMode="None" ItemClick="GridView1_ItemClick" IsItemClickEnabled="True"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:19:09.880

不知道为什么要这样做，在标记中声明控件并将其在标记中绑定到某些对象属性或类似内容要容易得多。

但是，要获取项目的索引，您应该搜索单击的项目父项，如下所示：

```
private void GridView1_ItemClick(object sender, ItemClickEventArgs e)
{
    int test = GridView1.Items.IndexOf((e.ClickedItem as FrameworkElement).Parent);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:53:25.033

-1 是没有选择索引时。如果您需要对单击的项目做某事，您可以这样做：

```
var item=GridView1.SelectedItem; 
```

如果您只需要索引，您可以这样做：

```
var index= GridView1.SelectedIndex; 
```

# python - 使用 BeautifulSoup 读取 html 表格内容感到困惑？

> ID：14156546
> 
> 赞同：0
> 
> 时间：2013-01-04T11:44:09.053
> 
> 标签：python, python-2.7, beautifulsoup

这是`HTML`内容：

```
<table cellspacing="1" cellpadding="0" class="data">
<tr class="colhead">
            <th colspan="3">Expression</th>
        </tr>
        <tr class="colhead">
            <th>Task</th>
            <th>Action</th>
            <th>List</th>
</tr>           
<tr class="rowLight">
    <td width="40%">
            Task1
        </td>
        <td width="20%">
             Assigned to 
        </td>
        <td width="40%">
             Harry
    </td>

</tr>           
<tr class="rowDark">
     <td width="40%">
                    Task2
                </td>
                <td width="20%">
                     Rejected by 
                </td>
                <td width="40%">
                    Lopa 
                </td>
</tr>

<tr class="rowLight">
    <td width="40%">
            Task5
        </td>
        <td width="20%">
             Accepted By 
        </td>
        <td width="40%">
            Mathew
        </td>
</tr> 
```

现在我必须得到如下值：（下表只是一个 Excel 表，一旦达到这些值，我将建立它。）

```
Task    Action        List
Task1   Assigned to   Harry
Task2   Rejected by   Lopa
Task5   Accepted By   Mathew 
```

我所知道的外行解决方案如下：

```
 from bs4 import BeautifulSoup
   soup = BeautifulSoup(source_URL)

alltables = soup.findAll( "table", {"border":"2", "width":"100%"} )

t = [x for x in soup.findAll('td')]

[x.renderContents().strip('\n') for x in t] 
```

但是在我上面的`HTML`内容中没有这样的结构，那么如何处理呢？请在这里指导我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:27:20.167

用于`.stripped_strings`从表格行中获取“有趣”的文本：

```
rows = table.find_all('tr', class_=('rowLight', 'rowDark'))
for row in rows:
    print list(row.stripped_strings) 
```

这输出：

```
[u'Task1', u'Assigned to', u'Harry']
[u'Task2', u'Rejected by', u'Lopa']
[u'Task5', u'Accepted By', u'Mathew'] 
```

或者，将所有内容拉入一个列表列表（根据请求，不包括最后一行）：

```
data = [list(r.stripped_strings) for r in rows[:-1]] 
```

变成：

```
data = [[u'Task1', u'Assigned to', u'Harry'], [u'Task2', u'Rejected by', u'Lopa']] 
```

的结果`.find_all()`a`ResultSet`就像一个 Python 列表，例如，您可以随意对其进行切片以忽略某些行。

# sql - Sql Server 2008 中的行到列

> ID：14156547
> 
> 赞同：0
> 
> 时间：2013-01-04T11:44:09.363
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

```
 Table - T1 (id, Description)
 Table - T2 (id, fk_id,Dates, Amount)

select d.Description,dt.Dates,dt.Amount
 from T2 as dt join T1 d
  on
 d.id = dt.fk_id
group by d.Description,dt.Dates,dt.Amount 
```

在上面运行查询结果显示如下

```
Description       Dates           Amount
nutrition1      2012-01-01      100.00
nutrition1      2013-01-01      100.00
nutrition2      2012-01-01      100.00
nutrition2      2013-01-01      600.00
nutrition3      2012-01-01      300.00
nutrition3      2013-01-01      700.00
nutrition4      2012-01-01      400.00
nutrition4      2013-01-01      800.00
nutrition5      2012-01-01      300.00
nutrition5      2013-01-01      600.00 
```

我想将结果显示为

```
Description    01-01-2012  01-01-2013
nutrition1       100          100
nutrition2       100          600
nutrition3       300          700
nutrition4       400          800
nutrition5       300          600 
```

日期会改变

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:00:39.870

这种类型的转换是`PIVOT`. 如果您提前知道这些值，则可以对它们进行类似于以下的硬编码：

```
select *
from
(
  select d.Description,convert(char(10), dt.dates, 110) dates,dt.Amount
  from T2 as dt 
  join T1 d
    on d.id = dt.fk_id
) src
pivot
(
  sum(amount)
  for dates in ([01-01-2012], [01-01-2013])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0ef9d/3)

如果您有未知的值要转换，那么您将需要使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(convert(char(10), dates, 110)) 
                    from T2
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT Description, ' + @cols + ' from 
             (
                select d.Description,convert(char(10), dt.dates, 110) dates,dt.Amount
                from T2 as dt 
                join T1 d
                  on d.id = dt.fk_id
            ) x
            pivot 
            (
                sum(amount)
                for dates in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0ef9d/4)

两个版本产生相同的结果：

```
| DESCRIPTION | 01-01-2012 | 01-01-2013 |
-----------------------------------------
|  nutrition1 |        100 |        100 |
|  nutrition2 |        100 |        600 |
|  nutrition3 |        300 |        700 |
|  nutrition4 |        400 |        800 |
|  nutrition5 |        300 |        600 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:53:42.440

```
SELECT Description,
  SUM(
  CASE
    WHEN dt.Dates=to_date('01-01-2012','dd-mm-yyyy')
    THEN dt.Amount
    ELSE 0
  END) AS '01-01-2012' ,
  SUM(
  CASE
    WHEN dt.Dates=to_date('01-01-2013','dd-mm-yyyy')
    THEN dt.Amount
    ELSE 0
  END) '01-01-2013'
FROM T2 AS dt
JOIN T1 d
ON d.id = dt.fk_id
GROUP BY d.Description; 
```

# asp.net-mvc-4 - ASP.NET MVC 4 - 服务器资源管理器中的本地数据库

> ID：14156551
> 
> 赞同：2
> 
> 时间：2013-01-04T11:44:39.930
> 
> 标签：asp.net-mvc-4, entity-framework-5, server-explorer, seeding

我在 MVC 4 和 EF5 中创建了一个 Internet 站点。我遵循了一个教程，该教程允许我通过迁移将用户和角色直接播种到数据库。

我可以使用种子用户名登录该站点，因此我可以确定它们已被创建。

但是，我无法访问服务器资源管理器中的数据库。当我像这样使用包管理器控制台更新数据库时：-

```
update-database - Verbose 
```

它会创建新用户（如果有）并告诉我目标数据库是：-

> 目标数据库是：'aspnet-MvcSeed-20130104100623'（数据源：.\SQLEXPRESS，提供者：System.Data.SqlClient，来源：配置）。

但是，这并没有出现在我的解决方案资源管理器中，我也在努力添加连接吗？

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:43:45.940

我自己设法解决了这个问题。

创建和托管这些 mdf 文件的文件夹如下：-

> C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA

在服务器资源管理器中，您需要添加一个新的数据连接并将数据源更改为：-

> Microsoft SQL Server 数据库文件

然后浏览到上面的目录，在那里你会找到你的 database.mdf 文件。

在 Visual Studio 2012 中，这是在服务器资源管理器中自动生成的，但在使用 Visual Studio 2010 时，我必须像上面一样手动连接到数据库文件。

希望这将在未来对其他人有所帮助。

# node.js - Node.js 复用功能

> ID：14156552
> 
> 赞同：1
> 
> 时间：2013-01-04T11:44:44.493
> 
> 标签：node.js

我在 hello.js 文件中编写了一个函数

* * *

```
dep1=require('dependency');
function hello(Args, callback){
    modifiedData= dep1.someFunction(Args);
    console.log(modifiedData);
    callback(modifiedData);
}
module.exports=hello; 
```

* * *

我将如何在其他文件中重新使用此功能？

```
h=require("./hello");
h.hello("Howdy!", function(err,args){
    do something;
} 
```

任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:54:35.257

这看起来可以接受，虽然有点难以阅读。但是当您的回调`err`作为第一个参数时，请确保您发送一个`null`对象作为第一个参数：

```
callback(null, modifiedData); 
```

当您使用`module.exports`时，可以将模块本身作为该函数调用。因此，您将像这样重用该功能：

```
h = require("./hello");
h("Howdy!", function(err, args) {
    //do smth
}); 
```

否则，为了让您的示例正常工作，只需删除`module.`并添加名称（可以是不同的名称）：

```
exports.hello = hello; 
```

# excel-addins - 如何设置一个 excel 插件回归测试框架

> ID：14156554
> 
> 赞同：2
> 
> 时间：2013-01-04T11:44:48.283
> 
> 标签：excel-addins, regression-testing

我正在 XLL 中用 C++ 编写一些 Excel 插件。是否有一种标准和/或简单的方法可以为 excel 插件设置非回归测试，并将它们与 SVN 等源代码控制软件集成以生成自动报告。

正如 BonCodigo 所提到的，如果我可以通过 C# 程序而不是 Excel 调用插件，那么一切都会变得微不足道。

我目前使用 VS2005 和 Office 2012。

干杯托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:04:53.587

如果您不介意纯 C++ 解决方案，您可以使用[http://xll.codeplex.com](http://xll.codeplex.com)并进行自己的测试。下面的示例使用了一个名为 ensure 的宏，它的行为与 assert 非常相似，但会引发运行时错误，而不是调用 abort。您可以将其替换为写入报告的内容（或使用 xll/utility/log.h 的事件日志）。

参见，例如， http: [//xllarray.codeplex.com/SourceControl/changeset/view/16920#136045](http://xllarray.codeplex.com/SourceControl/changeset/view/16920#136045)

# jsf - 如何在 JSF 中选择合适的 PhaseId？

> ID：14156556
> 
> 赞同：0
> 
> 时间：2013-01-04T11:44:49.960
> 
> 标签：jsf

我正在分阶段运行我所有的阶段侦听器`RENDER_RESPONSE`。

我遇到了[这篇](http://java.dzone.com/tips/jsf-application-level-access)关于使用`RESTORE_VIEW`阶段进行应用程序级别访问控制的帖子。所以，这给了我一个想法，阶段监听器可能必须`PhaseId`根据需求运行在不同的平台上。

BalusC 的回答[在这里](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)给出了选择正确 bean 范围的好图。

同样，有选择正确的解释`PhaseId`吗？

# ios - iOS 导航控制器获取弹出的视图控制器

> ID：14156565
> 
> 赞同：0
> 
> 时间：2013-01-04T11:45:12.740
> 
> 标签：ios, uinavigationcontroller

在我的应用程序中，我使用 UINavigationController 在视图控制器之间导航。每当用户导航回主视图控制器时，我都想查看弹出了哪个视图控制器。

有没有办法从主视图控制器确定这一点？

提前致谢！

真挚地，

佐利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:03:51.727

我认为您必须放置自己的自定义按钮，而不是使用导航控制器默认后退按钮。并在该自定义按钮的选择器中尝试以下代码。

NSLog(@"><><><%@", NSStringFromClass([[self.navigationController.viewControllers lastObject] class]));

希望它会帮助你。

# javascript - Javascript对变量数组进行排序并返回一个变量

> ID：14156568
> 
> 赞同：4
> 
> 时间：2013-01-04T11:45:22.103
> 
> 标签：javascript, arrays, variables, sorting, return

所以我使用 JavaScript，我有一个变量数组。

```
var a=5,b=10,c=3,d=11,e=0; //5 Variables with randomly chosen values
var myArray=[a,b,c,d,e]; 
myArray.sort(); //sort them, so the lowest value or variable is on first place
alert("This Variable has the lowest value: " + myArray[0]); 
//tell me the variable with the lowest value 
```

所以基本上，我会得到这个文本：“这个变量的最小值：0”

但我想要的是：“这个变量的值最低：e”

我怎样才能返回变量，而不是变量的值？

最好的问候 qweret

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T12:10:48.263

您需要创建一个**对象数组**：

```
var array = [{key: 'a', value: 5}, {key: 'b', value: 10}, {key: 'c', value: 3}, {key: 'd', value: 10}, {key: 'e', value: 0}]; 
```

然后你应用一个`sort`函数：

```
array.sort(function(obj1, obj2) {
   return obj1.value - obj2.value;
}); 
```

显示警报：

```
alert("This Variable has the lowest value: " + array[0].key); 
```

[在这里](http://jsfiddle.net/asgoth/mKGbg/)查看它的实际应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:02:46.170

如此处所示[，](http://www.javascriptkit.com/javatutors/arraysort.shtml)使用排序函数作为排序方法调用的参数。

例如：

```
myArray.sort(myArraySortFunction);

function myArraySortFunction(a, b) {

} 
```

你应该看看[这里描述的javascript关联数组](http://www.laurencegellert.com/2012/01/associative-arrays-in-javascript/)

# xcode - 如何更改被拒绝应用的捆绑标识符

> ID：14156572
> 
> 赞同：1
> 
> 时间：2013-01-04T11:45:32.917
> 
> 标签：xcode, app-store

由于命名不匹配，我的应用第一次被拒绝。
现在我想更改我的`bundle identifier`并将相同的版本提交到应用商店。当我尝试编辑应用程序信息部分下拉菜单时，显示我的新`bundle identifier`. 但我无法保存新标识符。Apple 文档说**“**如果您的应用程序的第一个版本已获得批准，或者如果您启用了**Game Center 或`iAd Network`**

但我的应用程序尚未获得批准，并且尚未启用游戏中心或`iAd network`. 我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:06:11.633

我有一个解决方案。我已将我的应用程序名称“MyApp”更改为“MyApp1”。这将释放旧名称并回到池中以供重用。然后添加应用名称为“MyApp”的新应用并删除应用“MyApp1”。通过这种方式，我们可以使用新的包标识符并为被拒绝的应用程序重用旧的应用程序名称。

[https://devforums.apple.com/message/771644#771644](https://devforums.apple.com/message/771644#771644)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:50:00.997

要更改应用程序名称，您可以更改`Bundle Name`并`Bundle Display Name`在`info plist`文件中。要更改，`Bundle Identifier`您必须登录您的[developer.apple](https://developer.apple.com/)帐户，然后创建一个新帐户`bundle id`，`Provisioning Profile`然后将其设置到您的应用程序`info plist`文件中。

**编辑：**但是如果您的应用程序已经上线，那么您不能将其更改`Bundle Identifier`为新版本的应用程序。

# php - Mysql Trigger-结果包含多于一行

> ID：14156574
> 
> 赞同：1
> 
> 时间：2013-01-04T11:45:36.357
> 
> 标签：php, mysql, triggers

我想使用触发器。当我更新我的表时，我想将一些数据交换到其他表。

我创建了触发器，但是当我更新时出现此错误：结果由不止一行组成

```
CREATE TRIGGER ilk AFTER UPDATE ON garanti 

FOR EACH ROW BEGIN DECLARE total INT DEFAULT 0; 

SELECT COUNT(*) INTO total FROM garanti group by il; 

INSERT INTO il_stat ( `id` , `il` , `sayi` ) VALUES ( NULL , '3', 'total' ); 

END; 
```

这是我查询的结果，我想将其插入其他表（在主表更新后）：

--city--,--count--

伦敦，56

柏林，65

伊斯坦布尔, 76 ...,.. ...,..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:07:30.317

您的选择返回不止一行。拆下 INTO 部分，自己看看。

```
SELECT COUNT(*) FROM garanti group by il; 
```

# java - 在java中迭代hashmap列表

> ID：14156580
> 
> 赞同：0
> 
> 时间：2013-01-04T11:45:51.533
> 
> 标签：java, list, hashmap

我在哈希图中有一个哈希图，例如

```
List<Map> mapList = new ArrayList<Map>();
    for (int i = 0; i < 2; i++) {
        Map iMap = new HashMap();
        iMap.put("Comment", "");
        iMap.put("Start", "0");
        iMap.put("Max", "0");
        iMap.put("Min", "0");
        iMap.put("Price", "5000.00");
        iMap.put("DetailsID", "51");    
        mapList.add(iMap);
    }

    Map mMap = new HashMap();
    mMap.put("ID", "27");
    mMap.put("ParticipantID", "2");
    mMap.put("ItemDetails", mapList); 
```

我想迭代这张地图并为此放入 JSONObject

```
try {

    JSONObject object = new JSONObject();

    Iterator iterator = mMap.entrySet().iterator();     

    while (iterator.hasNext()) {
        Map.Entry mEntry = (Map.Entry) iterator.next();
        String key = mEntry.getKey().toString();            
        String value = mEntry.getValue().toString();
        object.put(key, value);

    }

    Log.v(TAG, "Object : " + object); 
```

回应就像

```
Object : {"ItemDetails":"[{Price=5000.00, Comment=, DetailsID=51, Min=0, Max=0, StartViolation=0}, {Price=5000.00, Comment=, DetailsID=51, Min=0, Max=0, StartViolation=0}]","ID":"27","ParticipantID":"2"} 
```

hashmap 的内部列表没有迭代

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T11:51:25.697

> hashmap 的内部列表没有迭代

确实。您还没有编写任何代码*来*迭代它。当您获得`ItemDetails`条目时，您将拥有一个键`"ItemDetails"`和一个值，即列表。这就是你对这些所做的事情：

```
String key = mEntry.getKey().toString();            
String value = mEntry.getValue().toString(); 
```

所以你*只是*`toString()`在名单上打电话。你需要弄清楚你真正想做的事情。例如，您可能想要：

```
if (mEntry.getValue() instanceof List) {
    // Handle lists here, possibly recursively
} 
```

请注意，您可能*还*希望递归到每个`Map`. 同样，您需要编写代码来执行此操作。基本上，您不能假设它`toString()`会做您需要的事情，这是您目前所做的假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:48:34.190

尝试这样做：

```
Set<Map.Entry<String, String>> entrySet = JSONObject.entrySet();
for (Entry entry : entrySet) {
    // your code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T11:51:09.593

```
for (Map.Entry<String, String> entry : JSONObject.entrySet()) {
    // ...
} 
```

# jquery - 来自某些页面但不是其他页面的 Jquery 转换

> ID：14156581
> 
> 赞同：0
> 
> 时间：2013-01-04T11:45:53.543
> 
> 标签：jquery, transitions

在我的主页上，我的徽标和菜单居中，在所有其他页面上，它们位于屏幕顶部。我得到了这段代码来淡入淡出并防止背景重新加载。

我想知道的是我怎样才能得到它，以便它从主页淡入到位，但是当移动到其他页面时它不会重新加载，因为它已经到位？

IE。Homepage > About/Contact 页面会淡入淡出，但是从 About > Contact 这两个项目不会重新加载？

```
$(document).ready(function() {

$("body").css("display", "none");

$("body").fadeIn(3000);

$("a.transition").click(function(event){
    event.preventDefault();
    linkLocation = this.href;
    $("body").fadeOut(3000, redirectPage);      
});

function redirectPage() {
    window.location = linkLocation;
}

}); 
```

# java - 如何从jython中的java类获取接口列表？

> ID：14156587
> 
> 赞同：0
> 
> 时间：2013-01-04T11:46:07.313
> 
> 标签：java, python, oop, interface, jython

我在 Gephi 包中使用 Jython。我想要一个特定类（来自java）正在实现的接口列表。这在 Jython 中可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:24:05.963

与您在 Java 中执行此操作的方式相同。

例如，列出 ArrayList 实现的接口名称：

```
from java.util import ArrayList

for interface in ArrayList.getInterfaces():
    print interface.getName() 
```

# tfs - 从电动工具“索引（从零开始）”打开错误时出现 TFS 2010 错误

> ID：14156588
> 
> 赞同：0
> 
> 时间：2013-01-04T11:46:11.973
> 
> 标签：tfs

大家好，我在打开工作项类型时遇到问题`Power tools`

当我打开时`BUG`，它会给出错误“索引（基于零）必须大于或等于零”

如果我打开任务、问题、要求等，它将成功打开。我在工作流程上做了很多`BUG`工作，如果同样的问题退出，那么我将被公司解雇。

因为主要的工作正在进行中的错误......需要紧急回复......我有很多谷歌但从来没有找到一个好的解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:16:39.997

我已经解决了我的问题。我保存的BUG工作流程不正确。并且允许的值具有组开发人员，但在保存此工作流程后，我已将开发人员组的名称更改为开发人员。所以它不能读取组并且字段必须为空。这就是为什么我无法打开工作流程。谢谢你的回复！

# django - Django模板引擎缩进

> ID：14156593
> 
> 赞同：15
> 
> 时间：2013-01-04T11:46:31.563
> 
> 标签：django, django-templates, indentation

在扩展/包含模板时，我很难让 Django 的模板引擎正确缩进

这些文件：

`index.html`

```
<html>
    <body>
        <div id="hello">
            {% block bar %}
            {% endblock %}

            {% include 'baz.html'%}
        </div>
    </body>
</html> 
```

`bar.html`

```
{% extends 'foo.html' %}

{% block bar %}
<p>bar</p>
{% endblock %} 
```

`baz.html`

```
<p>baz</p> 
```

将呈现为

```
<html>
    <body>
        <div id="hello">
<p>bar</p>
<p>baz</p>
        </div>
    </body>
</html> 
```

我该如何修复它，使其呈现为

```
<html>
    <body>
        <div id="hello">
            <p>bar</p>
            <p>baz</p>
        </div>
    </body>
</html> 
```

手动输入选项卡不是一种选择。如果这很重要，我正在使用软制表符（4 个空格）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T11:49:13.907

Django 模板继承不会自动插入缩进。要实现您希望的缩进，您需要将其包含在`bar.html`：

```
{% extends 'foo.html' %}

{% block bar %}
            <p>bar</p>
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T12:26:59.863

你应该解释一下你的缩进需要的目的。

缩进在调试步骤中非常有用，但缩进与优化不兼容，因为它存在[无空间](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#spaceless)过滤器。

您可以编写自己的片段：

```
@register.tag
def myinden(parser, token):
    args = token.contents.split()
    n = args[1]
    nodelist = parser.parse(('endmyinden',))
    parser.delete_first_token()
    return MyIndenNode(nodelist, n)

class MyIndenNode(Node, n):
    def __init__(self, nodelist, n):
        self.nodelist = nodelist
        self.n = n

    def render(self, context):
        import re
        regex = re.compile("^", re.M)
        return re.sub(regex, "\t"*int(self.n),
                      self.nodelist.render(context).strip()) 
```

用法：

```
index.html
{% include 'baz.html' with indentation="8" %}

baz.html
{{ myindent:myindentation }}
... 
```

注意，未经测试。另外，我建议您将代码段修改为仅在调试模式下工作：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-19T09:34:12.490

You can override the NodeList's render method as I've done. See my question with working code:

[Proper indentation in Django templates (without monkey-patching)?](https://stackoverflow.com/questions/18308626/how-to-modify-django-template-system-without-monkey-patching-to-achieve-proper)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-22T21:00:44.053

上面提到的另一个选择是使用 Beautiful Soup 中间件。

这是一个[教程](http://blog.christianperone.com/?p=814)。请注意，人们称此中间件为“非常[慢](http://blog.christianperone.com/?p=814#comment-3429)”并建议缓存输出页面。

# android-ndk - NDK 找不到应用目录

> ID：14156596
> 
> 赞同：67
> 
> 时间：2013-01-04T11:46:46.197
> 
> 标签：android-ndk, makefile

运行 ndk-build 命令时出现以下错误：

```
Android NDK: Could not find application project directory !    
Android NDK: Please define the NDK_PROJECT_PATH variable to point to it. 
```

我的 Android.mk 文件的内容：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := FRE
LOCAL_SRC_FILES := FlashRuntimeExtensions.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE := NativeQCAR
LOCAL_SRC_FILES := main.c
LOCAL_SHARED_LIBRARIES := FRE
include $(BUILD_SHARED_LIBRARY) 
```

添加以下行没有帮助：

```
NDK_PROJECT_PATH = C:/Users/Wessel/Dropbox/workspace/eclipse/NativeQ 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-10-07T07:46:02.727

您可以使用以下命令

```
ndk-build -C your_project_path 
```

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-04T11:55:22.023

`NDK_PROJECT_PATH` is an environment variable so you don't have to include in the `Android.mk` file. Is `nkd-build` launched in the project directory?

For more info read the docs in `docs/HOWTO.html` in the NDK folder where I read

> Starting with NDK r4, you can simply place the file under $PROJECT/jni/ and launch the 'ndk-build' script from your project tree.
> 
> If you want to use 'ndk-build' but place the file to a different location, use a GNU Make variable override as:
> 
> ```
> ndk-build NDK_APPLICATION_MK=/path/to/your/Application.mk 
> ```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-01-03T23:22:06.180

I haven't found a single answer which is satisfactory for me, perhaps it depends whether you're trying to build an existing application, create a new one, or perhaps you are porting some existing native app. These guidelines work with android-ndk-r9b but should work with the last few releases

The makefile build-local.mk used by ndk-build will make some guesses about the location of the application makefile.

By default it seems the NDK is oriented towards having you stow your NDK application `Application.mk` and `Android.mk` files under a sub-directory called `jni`. This works nicely, and you can just use the command line:

```
$ ndk-build 
```

If you don't want to have a `jni` sub-directory, for example, perhaps you're porting a linux command-line tool to Android, the following maybe appropriate for you:

Create an empty `AndroidManifest.xml` file

Now create an `Application.mk` file with the following contents:

```
APP_BUILD_SCRIPT := Android.mk 
```

Then create an `Android.mk` file, for example:

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_SRC_FILES := foo.c
LOCAL_MODULE := foo
include $(BUILD_EXECUTABLE) 
```

To build the application use:

```
$ ndk-build NDK_APPLICATION_MK=`pwd`/Application.mk 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-04-06T12:08:36.273

您需要指定 3 件事。

```
NDK_PROJECT_PATH - the location of your project
NDK_APPLICATION_MK - the path of the Application.mk file
APP_BUILD_SCRIPT - the path to the Android.mk file 
```

需要这些来覆盖构建脚本的默认值，该脚本期望内容位于 jni 文件夹中。

调用 ndk-build 时使用

```
ndk-build NDK_PROJECT_PATH=/path/to/proj NDK_APPLICATION_MK=/path/to/Application.mk 
```

在 Application.mk 添加

```
APP_BUILD_SCRIPT := /path/to/Android.mk 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-08-07T10:10:29.013

```
ndk-build NDK_APPLICATION_MK=path\to\your\src\main\jni\Application.mk NDK_PROJECT_PATH=path\to\your\module\src\main 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-03-15T16:26:03.130

这就是我使用的，`cd`进入项目目录并执行：

```
ndk-build NDK_PROJECT_PATH=. 
```

[![在此处输入图像描述](../Images/bd451315fc826f7d833d53a20235c450.png)](https://i.stack.imgur.com/DrJCZ.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-12-23T20:25:14.160

请按照以下步骤操作：

```
1)Right on your project
2)Go to properties
3)Go to C/C++ Build
4)Go to Builder Settings
5)Go to Build Location
  Add build directory
6)Click on Workspace
7)Select your project folder 
```

你应该看到类似的东西

```
${workspace_loc:/[Your Project_Name]} 
```

完毕！！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-06-26T00:14:16.657

这对我有用。没有环境变量，也没有设置。转到您在命令行上解压缩 ndk 的根目录并运行 ndk-build 命令：

> ndk-build NDK_PROJECT_PATH=你的项目的路径

在我的开发机器中，示例如下所示：

```
 C:\adt-bundle-windows-x86-20140321\android-ndk-r9d>ndk-build NDK_PROJECT_PATH=D: /workspace/naruto  
 Android NDK: WARNING: APP_PLATFORM android-19 is larger than android:minSdkVersi on 9 in D:/workspace/naruto/AndroidManifest.xml
 [armeabi] Compile thumb  : ndkfoo <= ndkfoo.c 
 [armeabi] SharedLibrary  : libndkfoo.so 
 [armeabi] Install        : libndkfoo.so => libs/armeabi/libndkfoo.so 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-04-18T13:27:42.117

`-C`为我工作。

[![在此处输入图像描述](../Images/7caa03e6b3696e825908805a0b290d50.png)](https://i.stack.imgur.com/85xGI.png)

您也可以使用 mac 终端来执行此操作。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-12-25T09:01:52.877

您需要按照以下步骤操作：

1.转到包含Android.mk的文件夹

2.将android-ndk路径分配给$NDK_PROJECT_PATH。例如：导出 NDK_PROJECT_PATH =/home/android-ndk-r8b。

3\. 将 NDK 添加到 $PATH。例如：导出 PATH=$PATH:/home/android-ndk-r8b。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-11-25T04:02:42.667

设置您的 ndk builder 的工作目录可以解决您的问题，因为我遇到了同样的问题并以这种方式解决了它。

路径：项目属性 -> 构建器 -> -> 主目录 -> 工作目录

# python - Python 将 MySQL SELECT 导出为 XML

> ID：14156597
> 
> 赞同：0
> 
> 时间：2013-01-04T11:46:47.837
> 
> 标签：python, mysql, xml

我正在尝试研究如何将 MySQL SELECT 查询的结果导出到 XML 文件。查询如下所示：

```
SELECT id, extension_id, flow, filename, filesize, unread, cr_date, callerid, 
  length, callid, info, party
FROM extension_recording 
```

我可以看到有两种方法可以解决这个问题 - 运行 mysqldump --xml 或使用 Python 的 XML 模块。不确定哪种方法是最好的方法，有兴趣听听一些关于哪种方法可能更好的意见吗？

谢谢

# javascript - 淘汰赛映射选项；将 JSON 属性映射到两个视图模型属性

> ID：14156603
> 
> 赞同：-1
> 
> 时间：2013-01-04T11:47:10.043
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, optimistic-concurrency

为了在将（可能）修改后的视图模型发布/保存回服务器时进行乐观并发检查，我想在一个单独的变量中获取原始值的副本，而不是使用淘汰绑定绑定到的可观察变量。

这可能与淘汰映射插件有关，还是在填充视图模型后我必须遍历映射的可观察对象以获取副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:55:49.107

这个怎么样？

```
function Task(data) {
    var self = this;
    self.title = ko.observable(data.title);
    self.origTitle = data.title;
    self.isDone = ko.observable(data.isDone);
    self.origIsDone = data.isDone;

    self.changes = ko.computed(function() {
        var changed = [];

        if (self.title() != self.origTitle) changed.push({ self.title(), self.origTitle });
        if (self.isDone() != self.origIsDone) changed.push({ self.isDone(), self.origIsDone });
        return changed;
    });
}

function TaskListViewModel() {
    // Data
    var self = this;
    self.tasks = ko.observableArray([]);
    self.newTaskText = ko.observable();
    self.changes = ko.computed(function() {
        var tasksToPost = ko.utils.arrayFilter(self.tasks(), function(task) { return task.changed().length > 0 });            
        $.ajax({
            type: 'POST',
            url: '/SomeUrl',
            data: tasksToPost 
        });
    });

    // Operations
    self.addTask = function() {
        self.tasks.push(new Task({ title: this.newTaskText() }));
        self.newTaskText("");
    };
    self.removeTask = function(task) { self.tasks.remove(task) };

    // Load initial state from server, convert it to Task instances, then populate self.tasks
    $.getJSON("/tasks", function(allData) {
        var mappedTasks = $.map(allData, function(item) { return new Task(item) });
        self.tasks(mappedTasks);
    });    
}

ko.applyBindings(new TaskListViewModel()); 
```

# android - 关于 Android 平台上的 ProtocolBuffers

> ID：14156608
> 
> 赞同：0
> 
> 时间：2013-01-04T11:47:28.397
> 
> 标签：android, protocol-buffers

我只想在 Android 平台上使用 ProtocolBuffers，但似乎 Android jar 包太大了，以至于我的 apk 比以前使用它越来越大。有没有人对此有一些解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:22:22.993

这是一个已知的问题，大多数 java 库由于体积大而不适用于 android（因为服务器应用程序开发中没有大小限制，纯 java 库往往会变得臃肿）。您可以尝试使用 proguard 来剔除项目中未使用的类，或者游说开发人员提供具有更小粒度 jar 的 android-friendly 包装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:53:57.727

您是否查看过[第三方插件](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)，有几个 Java ME 实现可能对您有用。特别是[protobuf-j2me](http://code.google.com/p/protobuf-j2me/)声称是

*   22 KB 罐子
*   安卓 1.5 兼容

有一些限制，但它可能正是您正在寻找的

# asp.net - 在 Asp.Net MVC 3 中生成 RSS 返回纯 XML

> ID：14156621
> 
> 赞同：0
> 
> 时间：2013-01-04T11:48:37.010
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, rss

我正在关注作者从 ActionResult 继承以创建将返回 RSS 的 RssViewResult 类的教程。当我运行代码并转到返回 RssViewResult 的操作方法时，就会出现纯 XML 文件。我是 RSS 新手，在本教程中似乎没有创建任何特殊视图。
我需要创建一个视图还是我的代码出错了？
这是代码：

```
public class RssViewResult : ActionResult
{
    public RssViewResult(SyndicationFeed feed)
    {
        RssFeed = feed;
    }
    public SyndicationFeed RssFeed { get; set; }

    public override void ExecuteResult(ControllerContext context)
    {
        var resp = context.HttpContext.Response;
        resp.ContentType = "application/rss+xml";

        var rss = new Rss20FeedFormatter(RssFeed);
        using (var xml = XmlWriter.Create(resp.Output))
        {
            rss.WriteTo(xml);
        }
    }
} 
```

这是返回 RSS 的操作方法：

```
 public RssViewResult RssFeed()
    {
        var feed = new SyndicationFeed("News", "Store news",
                                       new Uri(Request.Url.AbsoluteUri))
            {
                Items = _itemsRepository
                    .GetItems()
                    .Select(i =>
                            new SyndicationItem(
                                i.Product.Name,
                                i.Product.Description,
                                new Uri(Request.Url.AbsoluteUri)))
            };

        return new RssViewResult(feed);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:39:18.357

XML 就是视图本身！

Firefox 检测 XML 并将其呈现为 RSS 阅读器。我确定 Chrome 需要一个插件（但这是我上次检查时的 6 个月前）。

您可以通过添加为 RSS 阅读器使用 CSS 样式化 RSS

```
<?xml-stylesheet type= "text/css" href="rss.css"?> 
```

**更新**

This question and its related answer [How to Add CSS Reference to .NET SyndicationFeed?](https://stackoverflow.com/questions/13940887/how-to-add-css-reference-to-net-syndicationfeed) gives a good reference about how to add css using `SyndicationFeed`

# python - 使用 Python 从 Twitter 获取带有标签的推文

> ID：14156625
> 
> 赞同：6
> 
> 时间：2013-01-04T11:49:01.123
> 
> 标签：python, twitter, twython

我们如何根据哈希标签查找或获取推文。即我想查找关于某个主题的推文？是否可以在 Python 中使用 Twython？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-05T22:21:57.360

**编辑** 我使用 Twython 的搜索 API 挂钩的原始解决方案似乎不再有效，因为 Twitter 现在希望用户经过身份验证才能使用搜索。要通过 Twython 进行经过身份验证的搜索，只需在初始化 Twython 对象时提供您的 Twitter 身份验证凭据。下面，我将粘贴如何执行此操作的示例，但您需要查阅 Twitter API 文档以了解[GET/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)以了解您可以在搜索中分配的不同可选参数（例如，到页面通过结果，设置日期范围等）

```
from twython import Twython

TWITTER_APP_KEY = 'xxxxxx'  #supply the appropriate value
TWITTER_APP_KEY_SECRET = 'xxxxxx' 
TWITTER_ACCESS_TOKEN = 'xxxxxxx'
TWITTER_ACCESS_TOKEN_SECRET = 'xxxxxx'

t = Twython(app_key=TWITTER_APP_KEY, 
            app_secret=TWITTER_APP_KEY_SECRET, 
            oauth_token=TWITTER_ACCESS_TOKEN, 
            oauth_token_secret=TWITTER_ACCESS_TOKEN_SECRET)

search = t.search(q='#omg',   #**supply whatever query you want here**
                  count=100)

tweets = search['statuses']

for tweet in tweets:
  print tweet['id_str'], '\n', tweet['text'], '\n\n\n' 
```

* * *

**原始答案**

如[Twython 文档中所述](https://github.com/ryanmcgrath/twython/blob/master/core_examples/search_results.py)，您可以使用 Twython 访问 Twitter 搜索 API：

```
from twython import Twython
twitter = Twython()
search_results = twitter.search(q="#somehashtag", rpp="50")

for tweet in search_results["results"]:
    print "Tweet from @%s Date: %s" % (tweet['from_user'].encode('utf-8'),tweet['created_at'])
    print tweet['text'].encode('utf-8'),"\n" 
```

等等...请注意，对于任何给定的搜索，您最多可能最多会收到大约 2000 条推文，最多可能会回到一两周左右。[您可以在此处](https://dev.twitter.com/docs/api/1.1/get/search/tweets)阅读有关 Twitter 搜索 API 的更多信息。

# android - 在使用片段事务时发送包

> ID：14156634
> 
> 赞同：0
> 
> 时间：2013-01-04T11:49:26.123
> 
> 标签：android, fragment

我正在使用它向活动添加片段：

```
FragmentTransaction t = this.getSupportFragmentManager()
        .beginTransaction();
t.add(R.id.frame, new FeedListFragment());
t.commit(); 
```

这个片段是一个 SideMenu。此片段中有一个图像，我想检查它是否已更改并将其替换为新图像。我检查了什么`onPause();`

但是片段的`onPause`or`onResume`没有按预期触发。

[在后台堆栈上不调用片段 onResume() 和 onPause()](https://stackoverflow.com/questions/11326155/fragment-onresume-onpause-is-not-called-on-backstack)

即使我在sof上问了一个关于这个的[问题](https://stackoverflow.com/questions/13758597/what-does-onbackpress-call-in-a-fragment)，但无法得到答案。

但实际的问题是：

我怎样才能`onResume()`在 MainActivity 中向这个片段发送一些数据/捆绑，并在片段添加中跟踪它？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:55:30.927

从fragment，使用`onAttach()`fragment，向fragment注册父activity。一旦 Fragment 有了 Activity 的句柄，它就可以调用它的方法。

从 Activity 中，使用 Fragment 管理器`find`通过它的标签名称访问 Fragment，并调用它的方法。

# c++ - 为什么不 ~ 后跟 :: parse

> ID：14156640
> 
> 赞同：14
> 
> 时间：2013-01-04T11:49:44.043
> 
> 标签：c++, c++11

在 Andrei Alexandrescu 关于错误处理的演讲中：

请参阅[C++ 和超越 2012：Andrei Alexandrescu - C++ 中的系统错误处理](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Andrei-Alexandrescu-Systematic-Error-Handling-in-C)（大约 30 分钟）

Andrei 提供了以下代码：

```
~Expected()
{
    using std::exception_ptr;
    if (gotHam) ham.~T();
    else spam.~exception_ptr();
} 
```

这个析构函数正在清理`union`包含某种类型`T`或 a 的 a `std::exception_ptr`。联合使用 填充`placement new`。

Andrei 然后解释说这`using std::exception_ptr;`是必要的，因为以下代码不会解析：

```
 else spam.~std::exception_ptr(); 
```

这意味着如果您需要显式调用不同命名空间中类的析构函数，则始终需要使用 using 指令。

为什么第二个示例不解析？

以下代码会是一个有效的替代方案吗？

```
 else delete spam; 
```

这是否与显式调用析构函数具有相同的影响`std::exception_ptr`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T12:50:45.730

Andrei 可能会使用`using std::exception_ptr;`，因为他的编译器坏了。

没有必要。`spam.~exception_ptr();`没有它应该编译得很好。

> 3.4.5/3。如果 unqualified-id 是 ~type-name，则在整个后缀表达式的上下文中查找类型名称。如果对象表达式的类型 T 是类类型 C，则类型名称也在类 C 的范围内查找。

它确实可以用 gcc 编译。

如果出于某种原因需要使用限定名，`spam.std::exception_ptr::~exception_ptr();`也可以编译。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-04T12:27:03.833

这里的问题是，这`~std::exception_ptr()`实际上并不是您要调用的函数的名称，而只是`~exception_ptr()`. 而且，由于它属于不同命名空间中的一个类，所以它是不可访问的（编辑：虽然它应该可以根据 C++11 标准中的 §3.4.5/3 访问，正如 nm 在他的回答中指出的那样，但 Microsoft编译器以这种方式运行）。

您可以选择将类引入命名空间：使用限定的类名进行显式调用：

```
else spam.std::exception_ptr::~exception_ptr(); // This is legal 
```

至于你的第二个问题，正如 R. Martinho Fernandes 在评论中正确解释的那样，调用`delete`运算符并不等同于仅调用析构函数：它还调用了命名笨拙的 function `operator delete()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T12:36:47.210

语法`spam.~std::exception_ptr`是不允许的，因为语法要求一个 id 表达式，`~std::exception_ptr`而不是一个，正如 Gorpik 指出的那样，你需要`spam.std::exception_ptr::~exception_ptr()`. 但我不明白为什么需要限定的原因，在描述语法的子句中，提醒说

> 因为一个类的名字被插入到它的类范围内（第 9 条），一个类的名字也被认为是这个类的一个嵌套成员。

所以我认为`spam.~exception_ptr()`即使没有 using 子句也应该是有效的。顺便提一句

```
namespace ns {
struct Foo {};
}

void f()
{
    ns::Foo x;
    x.~Foo();
} 
```

使用我可以访问的所有 g++ 干净地编译（包括非常旧的 2.95）。这似乎证实了我的观点，如果它在 C++11 的更新联合类型的上下文中不起作用，那么它是实现中的一个错误。

使用 g++ 4.7.1 进行编辑，以下内容也使用 -std=c++11 进行编译。

```
namespace ns {
struct Foo {};
}

struct Bar {};

union U {
    ns::Foo f;
    Bar b;
};

struct C {
    bool b;
    U u;
    ~C() {
        if (b)
            u.f.~Foo();
        else
            u.b.~Bar();
    }                
};

void f()
{
    C c;
} 
```

因此，Andrei 一直在试图解决一个不需要解决的问题（要么是他使用的编译器中的错误，要么是忘记了类名是在类的范围内导入的事实）。

# php - wordpress 文章摘录问题

> ID：14156642
> 
> 赞同：1
> 
> 时间：2013-01-04T11:49:46.453
> 
> 标签：php, html, css, wordpress

我在主页上的博客模板中使用摘录来显示 2 个带有阅读更多按钮的页面摘录和 1 个带有阅读更多按钮的最新博客文章。

下面是使用的代码

```
<?php
/*******PAGES SECTION CUSTOM*******/
  $args=array(
  'orderby' =>'parent',
  'order' =>'asc',
  'post_type' =>'page',
  'post__in' => array(34,36),

   );
   $page_query = new WP_Query($args); ?>
<div class="pagesarea left">
<?php while ($page_query->have_posts()) : $page_query->the_post(); ?>
   <div class="section">
    <h2 class="homeh2"><a href="<?php the_permalink();?>"><?php the_title();?></a></h2>
<?php the_excerpt(); ?>
        <p class="readmore"><a href="<?php the_permalink();?>">Read More</a></p>
</div>
 <?php endwhile; ?>

 <?php 
                                /*******LATEST NEWS SECTION*******/

            $news_text = get_theme_option(tk_theme_name.'_home_news_text');
            $news_per_page = get_theme_option(tk_theme_name.'_home_news_number');
            $blog_id =  get_option('id_blog_page');
            $blog_url = get_permalink($blog_id);

                if($hide_news == 'yes') {}else{
        ?>

                     <div class="section last">
<h2 class="homeh2"><a href="<?php the_permalink();?>"><?php _e('Latest News ', tk_theme_name) ?></a></h2>

                <?php
                $post_counter = 1;
                $paged = (get_query_var('paged')) ? get_query_var('paged') : 0;
                $args=array('post_type' => 'post', 'post_status' => 'publish', 'posts_per_page' => $news_per_page, 'ignore_sticky_posts'=> 1);

                //The Query
                query_posts($args);

                //The Loop
                if ( have_posts() ) : while ( have_posts() ) : the_post();
                $post_day =  get_the_time('d M');
                $post_year =  get_the_time('Y');
                $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'home-news');
                $post_cats = get_the_category_list(',', $post->ID);
                $cat_array = explode(',', $post_cats);
                $number_of_cats = count($cat_array);
                $cat_counter = 1;
                $format = get_post_format();
                ?>

                        <p class="title"><?php echo $post_day?>
                        <?php echo $post_year?>

                        <?php the_title()?>
                        </p>

                                 <?php the_excerpt(); ?>
<p class="readmore"><a href="<?php the_permalink();?>">Read More</a></p>
                        </div>

            <?php $post_counter++;endwhile; ?>
            <?php else: ?>
            <?php endif; ?>

        <?php } // if news   ?> 
```

该代码适用于 2 页，但对于帖子，它没有摘录它使用全文并且它溢出了 p 标签。

该网站的链接在这里： http: [//green.romeoothersugar.co.uk](http://green.romeomothersugar.co.uk)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:22:55.093

当我检查它时，它似乎将您的句子视为一个单词。尽管我认为如果您插入一些真实/正确的数据，它会得到解决。

换行的快速解决方案是尝试将以下内容提供`CSS`给您的`p tag`.

`word-wrap: break-word;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:49:18.713

您的问题似乎与您的代码无关，而与数据库中帖子的实际内容有很大关系。

检查源代码，所有单词“test”后面都跟着一个`&nbsp;`，即一个非分隔空格字符。这说明了一切，它是一个 HTML 实体，旨在防止任何换行符，例如，当您格式化表格数据并希望在一行中包含名字和姓氏时。

尝试进入您的 Wordpress 管理区域并编辑有问题的帖子。从 WYSIWYG 更改为 HTML 编辑模式，看看是不是类似于`Test test test test test`或的内容`Test&nbsp;test&nbsp;test&nbsp;`。如果是后者，Wordpress 会将整篇文章解释为一个单词，因此 Wordpress 没有理由不将所有内容都包含在摘录中，默认限制为 55 个单词。

此外，您的文本溢出的原因与`&nbsp;`实体有关。同样，该行不会像往常一样中断，因此该行文本会溢出`div.section list`.

# c# - 如何最有效地搜索对象列表？

> ID：14156645
> 
> 赞同：0
> 
> 时间：2013-01-04T11:49:48.280
> 
> 标签：c#, performance, list, for-loop

我有`List<T>`几个*`objects`*字段。我怎样才能最有效地搜索这个列表来找到某个*`object`*？现在我只做一个`loop`看起来像这样的：

```
for(int i = 0; i < theList.Count; i++)
{
  if (theList[i].certainField == whatImLookingFor)
  {
    doSomething();
    break;//to exit for loop to prevent unnecessary processing
  }
} 
```

有没有更有效的方法可以解决这个问题？它通常也是我比较的同一个领域。我想也许可以使用字典，但不太确定是否应该使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:09:43.860

这取决于您的使用情况。

如果您需要多次执行此操作并希望尽可能快地执行，请创建一个字典：

```
//save a dictionary somewhere
var dictionary = theList.ToDictionary(i => i.certainField);

//execution:
var item = dictionary[whatImLookingFor];
dosomething(); 
```

这以创建字典为代价（更长的初始化时间），但提供了更快的查找 O(1)。

如果您只需要这样做一次，请保持您的代码不变（O(n) 查找）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T11:32:52.893

```
theList.First(x => x.certainField.Equals(whatImLookingFor)); //already optimized 
```

顺便说一句，您真的不知道 .NET Dictionary[index] 运算符是如何在内部实现的（例如，循环遍历数组或在低级使用指针链表）

我建议阅读[使用 C# 对数据结构进行广泛检查，](http://msdn.microsoft.com/en-US/library/ms379570%28v=vs.80%29)深入分析 .NET 数据结构效率（数组、堆栈、字典、列表），尽管几年前它仍然有效且值得一看

# spring - 用于日期格式的 Spring webflow 和类型转换

> ID：14156651
> 
> 赞同：0
> 
> 时间：2013-01-04T11:50:03.647
> 
> 标签：spring, spring-webflow, date-formatting

环境：

Spring 3.1.3.RELEASE

Spring webflow 2.3.0.RELEASE

我最近在 spring 源论坛上发布了这个问题。请参阅： [Spring webflow 格式化问题](http://forum.springsource.org/showthread.php?133812-Issue-with-type-conversion-and-date-formatting)

我也遵循了参考文档中概述的步骤以及 stackoverflow 中的最佳答案：

[回答](https://stackoverflow.com/questions/3306997/how-to-change-default-format-in-stringtodate-spring-webflow)

我希望当我的表单提交并发生绑定时，在输入无效日期值时会引发解析异常。但我没有看到这种情况发生。

此外，如果以及当抛出异常时，我如何处理它以在前端显示错误消息？

我想开始在我的应用程序中使用类型转换。我按照以下步骤为 spring MVC 和 SWF 配置类型转换格式。

我按照这些步骤添加到 servlet 上下文中

```
<!-- Enables controllers mapped with @RequestMapping annotations, formatting annotations @NumberFormat
    @DateTimeFormat, and JSR 303 style validation --> 
   <mvc:annotation-driven conversion-service="applicationConversionService1" />

<webflow:flow-builder-services id="flowBuilderServices" conversion-service="defaultConversionService" view-factory-creator="mvcViewFactoryCreator" development="true"/>

<bean id="defaultConversionService" class="org.springframework.binding.convert.service.DefaultConversionService"> 
        <constructor-arg ref="applicationConversionService1"/> 
   </bean> 
```

我创建了一个新类来注册我自己的格式化程序，以便在 Spring MVC 和 Spring Web Flow 中使用。

```
@Component(value = "applicationConversionService1")
public class ApplicationConversionServiceFactoryBean extends
        FormattingConversionServiceFactoryBean {

    @Override
    protected void installFormatters(FormatterRegistry registry) {
      // Register the default date formatter provided by Spring
      registry.addFormatter(new DateFormatter("dd/MM/yyyy"));
    } 

} 
```

现在，当我部署到服务器时，上下文已正确初始化，并且类路径扫描会注册 bean。

在绑定的表单模型中，我使用新的 dateformat 注释对日期字段进行了注释。

```
@DateTimeFormat(pattern="dd/MM/yyyy")
    private Date revisedTermExpiryDate = new Date(); 
```

更新：我正在调试，因为我的类路径上有 joda-time，我相信 spring 正在注册 joda DateTimeFormatter 并且解析没有失败。

如果我删除注释实际上它会调用 DateFormatter ，它会按预期抛出解析异常，但异常会被框架吞没。

我的目标是使用全局默认日期注册普通的 DateFormatter，严格解析（lenient=false）并优雅地处理任何解析异常。对我来说，这是一个很棒的功能，而不是在验证器中为每个 Web 流处理解析日期。

谢谢，谢恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:03:15.073

**更新 2：**

我发现为什么在我们的应用程序中吞下了异常，我们在验证时从消息上下文中清除了消息。

因此，如果日期格式化程序由于用户输入的无效值而引发异常，spring 会优雅地处理这个问题，并在与该字段相关的消息上下文中创建四个错误消息键。例如，如果字段 revisionTermExpiryDate 失败，将创建四个新键：

1.  recordDecisionFormModel.revisedTermExpiryDate.type 不匹配
2.  修订的TermExpiryDate.typeMismatch
3.  java.util.Date.typeMismatch
4.  类型不匹配

您需要做的就是在您的 messages.properties 中使用您的验证消息指定这些键之一。

例子：

```
revisedTermExpiryDate.typeMismatch=Revised Term Expiry Date: DATE IS INVALID 
```

解决了！！

# unicode - 使用 excapes 显示的 Unicode 变量，而不是 utf-8

> ID：14156653
> 
> 赞同：0
> 
> 时间：2013-01-04T11:50:11.163
> 
> 标签：unicode, python-sphinx

我正在记录 sphinx 中的变量，它们是`{unicode:uncode}`和`{unicode:float}`映射。Sphinx 以一种丑陋的方式呈现值，带有 unicode 转义——像这样：

```
woo._units.unit = {
   u'rad': 1.0, u'MN': 1000000.0, u'\u2030': 0.001, u'g/cm\xb3': 1000.0,
   u'MN\xb7m': 1000000.0, u'mm\xb3': 1e-09, u'mm\xb2': 1e-06, u'Pa': 1.0,
   u'year': 31536000.0, u'%': 0.01, u'kN\xb7m': 1000.0, u'-': 1.0, u't/h': 0.2777777777777778
} 
```

（整个渲染在[http://woodem.eu/doc/woo._units.html](http://woodem.eu/doc/woo._units.html)）

如何强制 Sphinx 使用 UTF-8 编码 unicode 字符串并将它们直接放入 HTML 输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:00:24.123

我不是 100% 确定，但我认为这与`repr()`. 由于您无法更改 repr 在内置类型上的行为，并且由于对[文档](http://sphinx-doc.org)的一些搜索没有任何结果，因此我认为如果可以修复的话，这不容易修复。

如果您还没有尝试过，请添加`# -*- coding: utf-8 -*-`到文件顶部并查看是否有效。我怀疑它会因为这通常用于配置 sphinx 的文件中，但值得一试。

# java - 如何验证 selenium 2 (Selenium WebDriver) 中存在或可见的元素

> ID：14156656
> 
> 赞同：42
> 
> 时间：2013-01-04T11:50:17.170
> 
> 标签：java, selenium-webdriver, webdriver

任何人都可以向我发送如何验证元素的示例代码

1.  存在

2.  是可见的

3.  启用

4.  文本呈现

在 Selenium WebDrvier 中使用 Java

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-18T11:05:14.447

为了便于理解，我使用了 java print 语句。

1.  要检查元素存在：

    ```
    if(driver.findElements(By.xpath("value")).size() != 0){
    System.out.println("Element is Present");
    }else{
    System.out.println("Element is Absent");
    } 
    ```

    或者

    ```
    if(driver.findElement(By.xpath("value"))!= null){
    System.out.println("Element is Present");
    }else{
    System.out.println("Element is Absent");
    } 
    ```

2.  要检查可见：

    ```
    if( driver.findElement(By.cssSelector("a > font")).isDisplayed()){
    System.out.println("Element is Visible");
    }else{
    System.out.println("Element is InVisible");
    } 
    ```

3.  要检查启用：

    ```
    if( driver.findElement(By.cssSelector("a > font")).isEnabled()){
    System.out.println("Element is Enable");
    }else{
    System.out.println("Element is Disabled");
    } 
    ```

4.  检查文本存在

    ```
    if(driver.getPageSource().contains("Text to check")){
    System.out.println("Text is present");
    }else{
    System.out.println("Text is absent");
    } 
    ```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-04T18:40:19.797

您可以尝试以下方法：

```
 WebElement rxBtn = driver.findElement(By.className("icon-rx"));
    WebElement otcBtn = driver.findElement(By.className("icon-otc"));
    WebElement herbBtn = driver.findElement(By.className("icon-herb"));

    Assert.assertEquals(true, rxBtn.isDisplayed());
    Assert.assertEquals(true, otcBtn.isDisplayed());
    Assert.assertEquals(true, herbBtn.isDisplayed()); 
```

这只是一个例子。基本上，您声明和定义您希望使用的 WebElement 变量，然后`Assert`是否显示它们。这是使用 TestNG 断言。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-03-16T07:06:22.510

这是我的 Selenium WebDriver 的 Java 代码。编写以下方法并在断言期间调用它：

```
protected boolean isElementPresent(By by){
        try{
            driver.findElement(by);
            return true;
        }
        catch(NoSuchElementException e){
            return false;
        }
    } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-16T08:56:38.213

尝试使用以下代码：

```
private enum ElementStatus{
        VISIBLE,
        NOTVISIBLE,
        ENABLED,
        NOTENABLED,
        PRESENT,
        NOTPRESENT
    }
    private ElementStatus isElementVisible(WebDriver driver, By by,ElementStatus getStatus){
        try{
            if(getStatus.equals(ElementStatus.ENABLED)){
                if(driver.findElement(by).isEnabled())
                    return ElementStatus.ENABLED;
                return ElementStatus.NOTENABLED; 
            }
            if(getStatus.equals(ElementStatus.VISIBLE)){
                if(driver.findElement(by).isDisplayed())
                    return ElementStatus.VISIBLE;
                return ElementStatus.NOTVISIBLE;
            }
            return ElementStatus.PRESENT;
        }catch(org.openqa.selenium.NoSuchElementException nse){
            return ElementStatus.NOTPRESENT;
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-04T21:25:36.623

```
webDriver.findElement(By.xpath("//*[@id='element']")).isDisplayed(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T11:08:44.583

要确保元素存在，您可以执行以下操作：

```
driver.findElements(By.id("id")); 
```

这将返回一个数组，如果该数组大小 > 0 则元素存在。

此外，您需要提供更多信息，例如语言以及在询问之前您尝试过什么，

祝你好运

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-10-13T08:16:44.597

要检查元素是否**可见**，我们需要使用`element.isDisplayed();` 但是如果我们需要检查Dom 中任何地方的元素**是否存在，我们可以使用以下方法**

```
public boolean isElementPresentCheckUsingJavaScriptExecutor(WebElement element) {
        JavascriptExecutor jse=(JavascriptExecutor) driver;
        try {
            Object obj = jse.execute("return typeof(arguments[0]) != 'undefined' && arguments[0] != null;",
                    element);
            if (obj.toString().contains("true")) {
                System.out.println("isElementPresentCheckUsingJavaScriptExecutor: SUCCESS");
                return true;
            } else {
                System.out.println("isElementPresentCheckUsingJavaScriptExecutor: FAIL");
            }

        } catch (NoSuchElementException e) {
            System.out.println("isElementPresentCheckUsingJavaScriptExecutor: FAIL");
        }
        return false;
    } 
```

# java - mozilla rhino 从 javascript 覆盖对象方法

> ID：14156657
> 
> 赞同：3
> 
> 时间：2013-01-04T11:50:20.637
> 
> 标签：java, javascript, rhino

我正在寻找从 rhino 中的 javascript 覆盖 java 方法。这是我的代码：

```
public class CustomClass {
public String s="some string";
public void doSomething(){}
} 
```

进而：

```
 Object wrappedOut = Context.javaToJS(new CustomClass(), scope);
        ScriptableObject.putProperty(scope, "CustomClass", wrappedOut);
        String s="CustomClass.s='aaa'; \n CustomClass.doSomething=function(args){};";
        Object result = cx.evaluateString(scope, s, "<cmd>", 1, null); 
```

因此可以将值更改为 CustomClass.s 但不能更改为方法 doSomething

我收到以下错误：

> org.mozilla.javascript.EvaluatorException：无法分配 Java 方法“doSomething”。(#2)

**更新** 按照评论中的要求，这里是我的完整源代码：

自定义类.java

```
public class CustomClass {
    public String s="Do something now!";

    public void doSomething(Object ... v){
        System.out.println("do something");
    }
} 
```

脚本.java

```
import org.mozilla.javascript.*;
public class Scripting {
    public static void main(String args[])
    {

        Context cx = Context.enter();
        try {

            Scriptable scope = cx.initStandardObjects();

            Object wrappedOut = Context.javaToJS(new CustomClass(), scope);
            ScriptableObject.putProperty(scope, "CustomClass", wrappedOut);

            String s="CustomClass.doSomething=function(args){};";

            Object result = cx.evaluateString(scope, s, "<cmd>", 1, null);

            System.err.println(Context.toString(result));
        }catch(WrappedException e){
            e.printStackTrace();

        } catch(Exception e){
            e.printStackTrace();
        }finally {
            // Exit from the context.
            Context.exit();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:30:52.083

当这段代码运行时，Rhino 不会调用 Java`doSomething`方法。相反，它会尝试调用其*对应的 javascript*（缺少），然后引发 `sun.org.mozilla.javascript.internal.EvaluatorException: Java class "CustomClass" has no public instance field or method named "doSomething". (#1)`异常。

Your`CustomClass`是一个纯 Java 类，没有对应的 JavaScript。如果您在源代码中替换此行：

```
String s="CustomClass.doSomething=function(args){};"; 
```

用这条线：

```
String s = "CustomClass"; 
```

并将其评估为 javasript 命令，它将输出为`CustomClass@15e0be38`. 这通常意味着它是 class 对象的 some("15e0be38") 实例`CustomClass`。

来自方法的 apidoc [`ScriptableObject.defineClass(Scriptable scope, java.lang.Class clazz)`](http://www-archive.mozilla.org/rhino/apidocs/org/mozilla/javascript/ScriptableObject.html#defineClass%28org.mozilla.javascript.Scriptable,%20java.lang.Class%29)：

* * *

> 从实现 Scriptable 的 Java 类定义 JavaScript 对象。
> (...)
> 接下来，扫描所有方法的特殊前缀，这些前缀表明它们对定义 JavaScript 对象具有特殊意义。这些特殊前缀是
> 
> jsFunction_ 用于 JavaScript 函数
> jsStaticFunction_ 用于作为构造函数属性的JavaScript 函数 jsGet_ 用于 JavaScript 属性
> 的 getter jsSet_ 用于 JavaScript 属性
> 的设置器
> jsConstructor 用于作为构造函数的 JavaScript 函数
> 
> 如果方法的名称以“jsFunction_”开头，则会创建一个 JavaScript 函数，其名称由“jsFunction_”后面的 Java 方法名称的其余部分组成。**因此名为“jsFunction_foo”的 Java 方法将定义一个 JavaScript 方法“foo”。**调用此 JavaScript 函数将导致调用 Java 方法。方法的参数必须是 FunctionObject 类定义的数量和类型。然后将 JavaScript 函数添加为原型的属性。

* * *

JavaScript`print`方法（（在`org.mozilla.javascript.tools.shell.Global`类中定义））与 Java`System.out.println`方法的接口。运行时

```
public class CustomClass {

public static class _CustomClass extends ScriptableObject {

    @Override
    public String getClassName() {
        return "CustomClass";
    }

    public int jsFunction_method() {
        System.out.println("from java method");
        return 2;
    }
}

public static void main(String[] args) {
    Context context = Context.enter();
    Global global = new Global(context);
    try {            
        //ScriptableObject.defineClass(global, CustomClass.class); 
        ScriptableObject.defineClass(global, _CustomClass.class);            
        String script = "myInstance = new CustomClass();myInstance+' ';";
        System.out.println(context.evaluateString(global, script, "", 1, null));
        script = "myInstance.method+' '+myInstance.method()";
        System.out.println(context.evaluateString(global, script, "script", 1, null));
        script = "CustomClass.prototype.method=function(){print('overriden from javascript method');return 3;}";
        context.evaluateString(global, script, "", 1, null);
        script = "myInstance.method+' '+myInstance.method();";
        System.out.println(context.evaluateString(global, script, "script", 1, null));
    } 
    catch (Exception e) {
        e.printStackTrace();
    } 
    finally {
        Context.exit();
    }
  }
  } 
```

它输出：

```
[object CustomClass]
from java method
function method() {
[native code, arity=0]
}
 2

overriden from javascript method
function () {
    print("overriden from javascript method");
    return 3;
}
 3 
```

*   请注意，如果相同的 JS 代码在 Chrome 中运行，它会以不同的方式运行 - 返回 2 两次。
*   如果使用了外部类（如注释中所述），则会出现与通用相关的编译时错误。此代码是使用[Rhino 1.7r2 编写的](http://mvnrepository.com/artifact/rhino/js/1.7R2)。

# jquery - 如何用 jquery 读取 json 值？

> ID：14156658
> 
> 赞同：0
> 
> 时间：2013-01-04T11:50:31.900
> 
> 标签：jquery, asp.net, json, dotnetnuke-6

我的 JSON 响应是这样的`{ "items":[{"s": "2","f": "host","m": "hi..:)"}, ] }`

我编写了以下代码来读取 JSON 数据。但没有得到任何价值。警报框也不起作用。如果有人请告诉我我在哪里做错了......

```
$.ajax({

    url: "ChatHandler.aspx?action=chatheartbeat",
    cache: false,
    dataType: "json",
    success: function (data) {

        $.each(data.items, function (i, item) {

            if (item) { // fix strange ie bug

                chatboxtitle = item.f;

                alert(item.m);

            }
        });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:53:23.957

它应该是

```
alert(data.items[i].m) 
```

在这里[摆弄](http://jsfiddle.net/V8kJE/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:12:13.247

试试这样：

```
$.each(data, function(i, item) {
    alert(item[0].m);
});​ 
```

[小提琴](http://jsfiddle.net/V8kJE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:24:34.423

```
$.each(data.items, function(i, item) {
    if (item) {
        alert(i);//alerts 0 - the index of the first item
        var s = item.s
        var f = item.f
        var m = item.m;
       alert(f);// alerts "host"
    }
}); 
```

“奇怪的错误”是由于您有一个 EMPTY 对象（请参阅数组中的最后一个逗号：）第二项在您的数据集中是“未定义的”

# php - 暂停 PHP 脚本以防止超时

> ID：14156659
> 
> 赞同：-3
> 
> 时间：2013-01-04T11:50:35.083
> 
> 标签：php, time, limit

我有一个 PHP 脚本，它在我的服务器上创建了大量文件，但不幸的是它运行时间过长。我的托管服务提供商有 90 秒的时间限制，脚本可能需要一个小时才能完成！Set_Time_Limit 被托管服务提供商阻止，并且在睡眠功能中构建也不会真正暂停脚本。有没有另一种方法来建立暂停，这样它就不会在我的 90 秒后退出？

谢谢！桑德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:12:30.110

我明白您为什么对您的房东感到沮丧，但他们这样做是为了客户的利益。如果一个进程可以占用所有处理能力，它将减慢服务器上的所有其他站点。

如果您*确实*需要对每条记录进行这种处理，那么共享主机不是正确的解决方案；你需要一个专用的服务器。

但是，我的猜测是，真正解决您的实际问题的方法不是增加处理能力，而是修复程序的性能。你还没有解释你在做什么让一个记录需要 45 秒来处理，但如果需要那么长时间，它最好是令人印象深刻的东西。更有可能的是，这只是意味着还有很大的改进空间。

我建议做一些分析来确定代码运行如此缓慢的原因。通过一些工作，我愿意打赌您可以将速度数据降低至少一个数量级，甚至可能更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:00:37.270

“处理 2 条记录大约需要 90 秒”

让它一次处理一条记录，增加一个计数器，刷新页面，然后点击下一条记录来处理:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T12:08:38.433

Unfortunately no. You would have to break it into smaller pieces or run a background job using [exec](http://nl3.php.net/manual/en/function.exec.php) or [system](http://nl3.php.net/manual/en/function.system.php)

or

There's another approach [here](http://symcbean.blogspot.in/2010/02/php-and-long-running-processes.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T11:57:09.983

如果不了解更多关于您的代码，这有点困难，但我认为您必须编写代码以便多次调用脚本。是否有可能运行 cron 作业？该脚本可以每 x 分钟运行一次，并将嵌套的 y 个文件放入队列中。

你为什么要首先制作所有这些文件？听起来不是个好主意。。

# javascript - Bookmarklet：试图弄清楚如何识别和更改网页上图像的 URL

> ID：14156660
> 
> 赞同：0
> 
> 时间：2013-01-04T11:50:34.677
> 
> 标签：javascript, google-chrome, bookmarklet

我对 javascript 有非常基本的了解，并设法创建了一个小书签来上一个子目录并替换目录名称。

代码：

```
javascript:(function(){var pathArray=window.location.pathname.split('/');var newPathname=pathArray[0]+"/"+pathArray[1]+"/"+pathArray[2]+"/"+pathArray[3]+"/"+pathArray[4]+"/s2450-k/";document.location.href=newPathname;})()
```

基本上，它的作用是分解 Blogspot、Picasaweb 或 Google+ 相册上图像的 URL，并将其替换为最大尺寸（最大 2450x2450）

所以图片网址：

> ```
> http://www.website.com/SubD1/SubD2/SubD3/SubD4/s640/blah.JPG 
> ```

转换为：

> ```
> http://www.website.com/SubD1/SubD2/SubD3/SubD4/s2450-k/ 
> ```

现在，这仅适用于我在使用小书签之前使用“在新选项卡中打开图像”选项，因为我使用的是*document.location*。

我想直接在网页/博客上查看图片，而不必单独打开每张图片。

我正在寻求帮助，以找出如何专门识别标签并通过书签在页面上内联运行上述功能，而不必先单独打开每个图像？

另外，我不确定如何只更改我感兴趣的图像，而不是页面上的*所有*图像，因为如果我盲目地这样做，徽标和背景之类的东西会损坏。我当然不介意，但我在这里的次要目标是学习如何识别哪个是哪个，并使其无缝。

也许一旦我运行小书签，我可以捕获 onclick 并以某种方式仅在鼠标光标下的元素上应用该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:31:08.370

您可以使用 CSS 属性选择器仅选择要更改的图像，然后您可以遍历这些图像并将您的功能仅应用于相关图像。

```
var images = document.querySelectorAll('img[src*="http://common.part.of.image.src"]')

Array.prototype.forEach.call(images, function (img) {
    img.src = yourFunctionThatChangesUrls(img.src)
}) 
```

`document.querySelectorAll`在现代浏览器中可用，并允许您选择页面上与给定选择器匹配的所有元素。

假设您尝试更改的图像具有共同的 url 部分，您可以使用`*=`属性选择器。这意味着`[src*="foo"]`将匹配任何与 src 包含 foo 任何地方的东西，[还有其他](http://css-tricks.com/attribute-selectors/)可能有用的东西。

一旦你有了你的图像，你就可以在每个匹配的元素上使用你的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:17:43.733

存在`document.getElementByTagName('img')`返回`<img>`页面上所有 s 的 ；`src`现在可以使用您在问题中编写的例程修改属性（显然您必须检查`URL`您是否感兴趣，可能在域部分使用正则表达式）。

# java - 字符串到整数解析中的数字格式异常

> ID：14156662
> 
> 赞同：0
> 
> 时间：2013-01-04T11:50:45.943
> 
> 标签：java, android, parsing, type-conversion

我知道这个问题在这里问了很多次。实际上我也参考了其中一些但无法获得解决方案所以决定在这里发布

我只是想在那个时候将字符串值解析为整数，它给出了 Null 指针异常。当我尝试打印字符串的值时，我得到 5，这是正确的，但是当我在解析后打印它们的值时，它是 0。按照我尝试过的代码

```
String xmldata = "";
int sql_proID;
xmldata = os.toString();
sql_proID = Integer.parseInt(xmldata); 
```

我也尝试过声明 sql_proID ，但它给出了同样的错误。以下是异常消息

```
01-04 17:06:14.166: W/System.err(398): java.lang.NumberFormatException: unable to parse  '
01-04 17:06:14.166: W/System.err(398): 5' as integer
01-04 17:06:14.166: W/System.err(398):  atjava.lang.Integer.parse(Integer.java:383)
01-04 17:06:14.176: W/System.err(398):  at java.lang.Integer.parseInt(Integer.java:372)
01-04 17:06:14.176: W/System.err(398):  at java.lang.Integer.parseInt(Integer.java:332)
01-04 17:06:14.176: W/System.err(398):  at com.example.anti_dui_app.Synchronization.onCreate(Synchronization.java:57)
01-04 17:06:14.176: W/System.err(398):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-04 17:06:14.176: W/System.err(398):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-04 17:06:14.176: W/System.err(398):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-04 17:06:14.176: W/System.err(398):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-04 17:06:14.176: W/System.err(398):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-04 17:06:14.176: W/System.err(398):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-04 17:06:14.185: W/System.err(398):  at android.os.Looper.loop(Looper.java:123)
01-04 17:06:14.185: W/System.err(398):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-04 17:06:14.185: W/System.err(398):  at java.lang.reflect.Method.invokeNative(Native Method)
01-04 17:06:14.185: W/System.err(398):  at java.lang.reflect.Method.invoke(Method.java:507)
01-04 17:06:14.185: W/System.err(398):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-04 17:06:14.185: W/System.err(398):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-04 17:06:14.185: W/System.err(398):  at dalvik.system.NativeStart.main(Native Method) 
```

我哪里出错了请告诉我...谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T11:53:08.873

看起来那里可能有一个换行符。

您是否尝试过修剪字符串以删除空格？

例如：

sql_proID=整数.parseInt(xmldata.trim());

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T11:53:32.757

看起来你得到了五个单引号，这就是 NullPointerException 的原因。

另请检查 logcat 中是否存在新行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-04T11:53:32.163

它`NumberFormatException`不是一个`NullPointerException`。这是由格式错误的数字字符串引起的，该字符串似乎`"\n5"`不仅仅是`"5"`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T11:57:30.377

您的代码不明确，不符合以下标准：

```
String **xmldata**="";
int sql_proID;
xmldata = os.toString();
sql_proID=Integer.parseInt(xmldata); 
```

在这里，您正在解析值为“5”的**xmldata 。**解析器无法理解。因此，尝试将值设为 5。

# jquery - JQuery SmoothDivScroll 和箭头键

> ID：14156663
> 
> 赞同：0
> 
> 时间：2013-01-04T11:50:52.287
> 
> 标签：jquery, html, smooth-scrolling

我需要让 JQuery [SmoothDivScroll 插件](http://www.smoothdivscroll.com/)与箭头键盘键一起使用 - 左右键应该滚动内容，就像鼠标滚轮和热点一样。如何使用自定义 JQuery 代码实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:48:19.413

我解决了。解决方案并不漂亮，但有效。此外，代码片段应移动到单独的代码文件中。TODO：重构。

1) "scrollableArea" div 应该有属性*tabindex*。2) 在插件代码文件中，应将以下代码语句添加到*_create*函数中。它应该被重构，因为目前它是从*鼠标滚轮*事件处理程序中大量复制的

```
r.data("scrollableArea").keydown(function (e) {

            var arrow = { left: 37, up: 38, right: 39, down: 40 };
            var i,s,u;

            switch (e.keyCode || e.which) {

                case arrow.left:
                    i = 1;
                    s = 0;
                    u = 1;
                    break;

                case arrow.right:
                    i = -1;
                    s = 0;
                    u = -1;
                    break;
            }

                if (r.data("enabled") && n.mousewheelScrolling.length > 0) {
                    var a;
                    n.mousewheelScrolling === "vertical" && u !== 0 ? (t.stopAutoScrolling(), e.preventDefault(), a = Math.round(n.mousewheelScrollingStep * u * -1), t.move(a)) :
                    n.mousewheelScrolling === "horizontal" && s !== 0 ? (t.stopAutoScrolling(), e.preventDefault(), a = Math.round(n.mousewheelScrollingStep * s * -1), t.move(a)) :
                        n.mousewheelScrolling === "allDirections" && (t.stopAutoScrolling(), e.preventDefault(), a = Math.round(n.mousewheelScrollingStep * i * -1), t.move(a));
                }
            }), 
```

# visual-studio-2010 - 调试时 Visual Studio 不会因未处理的异常而中断

> ID：14156666
> 
> 赞同：10
> 
> 时间：2013-01-04T11:50:56.147
> 
> 标签：visual-studio-2010, visual-studio

突然间 my`visual studio`不会在未处理的异常上中断，有时甚至不会在断点处停止。

我已经阅读了许多其他相关的 SO 帖子，例如：

*   [如何使视觉工作室仅在未处理的异常上中断？](https://stackoverflow.com/questions/11183099/how-to-make-visual-studio-break-only-on-unhandled-exceptions)
*   [为什么在调试单元测试时 Visual Studio 不会因异常而中断？](https://stackoverflow.com/questions/1488282/why-doesnt-visual-studio-break-on-exceptions-when-debugging-unit-tests)

但没有一个答案解决了我的问题。

当 Visual Studio 因某些异常而中断时，它会显示以下窗口： ![在此处输入图像描述](../Images/fc0e3b6b7c35cf33307e779683a7d760.png)

但我想要原来的“方式”： ![在此处输入图像描述](../Images/75f369a6f300b1ab072c8ec034f4673a.png)

这些是我的`Debug\Exceptions`设置： ![在此处输入图像描述](../Images/6e8cff983763550064da752f11d7f92d.png)

谁能帮帮我吗？这件事让我发疯。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T12:46:49.493

它被称为异常助手。Exception 对话框的屏幕截图清楚地表明您一直在控制是否启用 Exception Assistant 的对话框中进行了更改，您禁用了 Just My Code 调试。

重新打开它。工具 > 选项 > 调试 > 常规。勾选“启用异常助手”选项。

# android - Eclipse 中的错误：Android for Dummies

> ID：14156669
> 
> 赞同：0
> 
> 时间：2013-01-04T11:51:11.187
> 
> 标签：android

我遇到错误：“令牌语法错误，删除这些令牌”

以下是相关文件：

ReminderListActivity.java

```
package com.example.taskreminder;

import android.os.Bundle;
import android.app.ListActivity;
import android.view.Menu;
import android.widget.ArrayAdapter;

public class ReminderListActivity extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.reminder_list);
    final String[] items;
    items = new String[] {“Foo”,“Bar”,“Fizz”,“Bin”};
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.reminder_row,   R.id.text1, items);
    setListAdapter(adapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_reminder_list, menu);
    return true;
}
} 
```

错误出现在“items = new String[] {“Foo”,“Bar”,“Fizz”,“Bin”};” “标记的语法错误，删除这些标记”

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:54:38.980

请从该行中删除双引号并重新输入

```
items = new String[] {"Foo","Bar","Fizz","Bin"}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:55:11.753

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T11:55:23.723

It's because you copy/pasted the code from the book. :)
Try manually to add the quotes. it should be double quotes like this: " ", not like this “ “</p>

# css - CSS 属性边框颜色不起作用

> ID：14156674
> 
> 赞同：31
> 
> 时间：2013-01-04T11:51:28.857
> 
> 标签：css, border

我对边框颜色有疑问。它没有用。我是 CSS 新手，这里是小提琴。 [http://jsfiddle.net/zeburrehman/aFzKy/151/](http://jsfiddle.net/zeburrehman/aFzKy/151/)

```
<div id="box">
Hello! The color of box border should be red!!
</div>​

#box {
border-color: red;
}​ 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-04T11:53:31.793

默认情况下`border-width`is`0`和`border-style`is`none`

所以你需要将它们设置为`border-width:1px`and `border-style:solid`。您可以将所有边框属性合并为一个，如下所示：

```
#box {
    border:1px solid red
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-14T14:00:04.940

我遇到了一个问题，似乎`border-color`没有得到尊重，令人困惑的是，它甚至显示在 Chrome 的样式检查器中具有正确的颜色（可能是 Chrome 错误）。对我来说关键是如果指定了速记边框样式，它会设置边框样式的所有三个方面，无论它们是否包含在内：

```
border-left: 1px; 
```

实际上覆盖了`border-left-style`和`border-left-color`属性，即使它们没有被包含在内。例如，这可能会导致继承的样式被覆盖并且看起来不起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-28T08:47:31.807

```
#box{
    border:3px solid #aacfac;
    } 
```

我希望这有帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T11:53:19.090

您需要添加边框样式：

```
#box {
    border: 1px solid red;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T11:54:43.583

试试这个：边框：5px纯红色；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-23T14:37:58.973

您也可以对红色使用十六进制颜色代码，即`#ff0000`(RGB)。如果您想要纯红色，则 100% 红色、0% 绿色和 0% 蓝色。

```
#box {
   border: 2px solid #ff0000;
} 
```

# c# - 如何使用 c# 窗口窗体显示从目录列表视图控件中选择的文件？

> ID：14156682
> 
> 赞同：1
> 
> 时间：2013-01-04T11:52:09.560
> 
> 标签：c#, listview

我下面的代码显示了由`folderBrowser`控件选择的文件夹的列表视图。在列表视图中显示文件夹和文件后，我想打开单击的文件。我已经使用`LISTVIEW_itemactivation`. 问题是我无法打开选定的文件。我究竟做错了什么？

```
private void PopulateListView()
{
    listView1.Clear();
    //headers listview

    listView1.Columns.Add("File Name", 150);
    listView1.Columns.Add("Last Accessed", 110);
    listView1.Columns.Add("Size", 100);
    //listView1.ItemActivate += new System.EventHandler(listView1_ItemActivate);

    if (folderBrowser.ShowDialog() == DialogResult.OK)
    {

        string[] files = Directory.GetFiles(folderBrowser.SelectedPath);
        string[] folders = Directory.GetDirectories(folderBrowser.SelectedPath);
        foreach (string file in files)
        {
            long folderSize = 0;
            string fileName = Path.GetFileNameWithoutExtension(file);

            FileInfo finfo = new FileInfo(file);
            folderSize += finfo.Length;

            ListViewItem item = new ListViewItem(new[] { fileName, File.GetLastAccessTime(file).ToString(), finfo.Length.ToString() });

            images();
            item.ImageIndex = 1;
            listView1.Items.Add(item);

        }

        foreach (string file in folders)
        {
            string fileName = Path.GetFileNameWithoutExtension(file);
            ListViewItem item = new ListViewItem(new[] { fileName, File.GetLastAccessTime(file).ToString(), file.Length.ToString() });
            images();
            item.ImageIndex = 0;
            listView1.Items.Add(item);
        }
    }
}
private void button1_Click(object sender, EventArgs e)
{
    PopulateListView();
    textBox1.Text = folderBrowser.SelectedPath;
}
private void images(){
    try
    {
        imageList1.Images.Add(Bitmap.FromFile("./images/file.gif"));
        imageList1.Images.Add(Bitmap.FromFile("./images/Folder.gif"));
    }
    catch (FileNotFoundException) { }

}

private void listView1_DoubleClick(object sender, EventArgs e)
{

        ListViewItem item_clicked = listView1.SelectedItems[0];

}
private void radioButton1_CheckedChanged(object sender, EventArgs e)
{
    listView1.View = View.LargeIcon;
}

private void radioButton2_CheckedChanged(object sender, EventArgs e)
{
    listView1.View = View.SmallIcon;
}

private void radioButton3_CheckedChanged(object sender, EventArgs e)
{
    listView1.View = View.Details;
}

private void radioButton4_CheckedChanged(object sender, EventArgs e)
{
    listView1.View = View.List;
}

private void radioButton5_CheckedChanged(object sender, EventArgs e)
{
    listView1.View = View.Tile;
}

private void listView1_ItemActivate(object sender, EventArgs e)
{

        try
        {
    string sPath = listView1.SelectedItems.ToString();
    string sFileName = listView1.FocusedItem.Text;

    Process.Start(sPath + "\\" + sFileName);
}
catch(Exception Exc)    {   MessageBox.Show(Exc.ToString());    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:02:46.993

好吧，根据您填充列表的方式，这个修改后的代码应该可以工作。

```
private void listView1_ItemActivate(object sender, EventArgs e)
{
    try
    {
        string sPath = listView1.SelectedItem.SubItems[0].Text;
        Process.Start(sPath);
    }
    catch(Exception Exc)
    {
        MessageBox.Show(Exc.ToString());
    }
} 
```

但是您还需要摆脱这一行，因为您***永远***无法在不知道它的扩展名的情况下加载文件。

```
string fileName = Path.GetFileNameWithoutExtension(file); 
```

看，当您`ListViewItem`像您一样加载时，它正在加载`SubItems`该数组的所有内容。此外，`Directory.GetFiles(folderBrowser.SelectedPath);`返回的数组返回一个包含完整路径的文件数组，因此，如果您选择第一个`SubItem`将成为该文件的完整路径的文件，因此`Process.Start`在该文件路径上发出将导致 shell 打开文件在其默认程序中。

# ios - ios safari 使用电子邮件共享附加 pdf

> ID：14156686
> 
> 赞同：4
> 
> 时间：2013-01-04T11:52:33.103
> 
> 标签：ios, safari

我正在为移动设备（iphone）开发一个 PHP Web 应用程序，该应用程序将生成一个可以在 ios safari 浏览器中查看的 pdf，并且是否可以单击 safari 菜单栏中 pdf 页面的共享按钮底部并通过电子邮件发送pdf文件？

# jquery - 删除动态创建的 单击列表末尾的图标时的列表项

> ID：14156689
> 
> 赞同：1
> 
> 时间：2013-01-04T11:52:50.790
> 
> 标签：jquery, jquery-selectors

我有一个`<li`使用 jquery 动态创建的 > 列表。该列表有一个输入字段和一个减号图标以删除列表项。以下是将新项目插入列表的示例代码：

```
$list = $("#servicesList");
$list.append(""<li data-value='" + uniqueIdentifier + "'>
(same line) <input type='text' class='input-mini' id='price' value='2500'>
(same line) <i id='icon-minus' class='icon-minus-sign'></i></li> 
```

这个列表项被动态添加到 div servicesList 中，它是一个 ul 项。

```
<ul id="servicesList">
</ul> 
```

现在，当有人单击列表项的减号图标时，我需要删除该项目。由于列表项是动态生成的，所以我使用文档方法来添加点击事件监听器。这是不起作用的代码。

```
$(document).on('click','#icon-minus',function() {
    var $list =  $("#servicesList"),
    listValue = $(this).attr("data-value");
    $list.find('li[data-value="' + listValue + '"]').slideUp("fast", function() 
            {
              $(this).remove();
            }); 
```

上面的代码不起作用。如果我将“#servicesList li”传递给单击功能，则代码有效，但即使单击文本输入字段，列表项也会被删除。我希望仅在单击减号图标时删除列表项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:15:48.350

我认为有两个问题：如果你点击减号，`$(this)`指的是`<i>`元素，而不是父`<li>`元素，所以你没有得到正确的值`var listValue`。

其次，我认为您不想使用 id`icon-minus`而是使用类，因为页面上有多个图标减号（id 是唯一的）。

示例：http: [//jsfiddle.net/X9nFX/5/](http://jsfiddle.net/X9nFX/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:14:11.747

我刚刚尝试了这段代码，它正在工作：http: [//jsfiddle.net/Vc3zg/](http://jsfiddle.net/Vc3zg/)

```
$("#servicesList").append('<li><input type="text" value="" /> <span id="icon-minus">X</span></li>');

$(document).on('click', '#icon-minus', function() {
   var $list = $("#servicesList"),
   listValue = $(this).attr("data-value");
   $list.find('li').slideUp("fast", function() {
       $(this).remove();
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:07:08.340

ID 应该始终是唯一的（这就是它被称为 ID 的原因）。因此，请确保将所有 ID 更改为 class 并尝试以下操作：

```
$(document).on('click','#icon-minus',function() {
  var $list =  $("#servicesList"),

  $(this).parent().slideUp("fast", function() 
  {
      $(this).remove();
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:07:18.297

我想你所有的按钮共享相同的 ID
`ID`必须是每页唯一的。使用***类***代替您的按钮

并在您的内部修复您的报价`$list.append(`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T12:09:11.170

第一个问题是您可能添加了多个元素，所有元素都具有相同的`icon-minus` `id`属性。在 HTML 页面中`id`，每个元素的属性必须是唯一的。我会改用该类：

```
$(document).on('click','.icon-minus-sign',function() { 
```

下一个问题是`this`事件处理程序的函数内部引用了`<i>`元素，所以这一行：

```
listValue = $(this).attr("data-value"); 
```

不工作；引用的元素`this`没有*属性*`data-value`。您将需要访问`<li>`包含该`<i>`元素的 ：

```
$(this).closest('li').slideUp("fast", function() {
    $(this).remove();
}); 
```

# javascript - jQuery - 计时器不会延迟

> ID：14156690
> 
> 赞同：1
> 
> 时间：2013-01-04T11:52:53.333
> 
> 标签：javascript, jquery

在我的游戏中，我添加了一个雪花图标来将时间冻结 3 秒。我已将此添加到脚本中

```
$(".character").click(function() {
    if ($(this).hasClass("freeze")) {
    $('#timer').delay(3000);
} 
```

任何想法为什么它不起作用？

这是一个小提琴.. [http://jsfiddle.net/pUwKb/30/](http://jsfiddle.net/pUwKb/30/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:57:21.343

你误解了延迟。您必须清除倒计时间隔，并设置超时，之后将再次激活倒计时间隔

```
$(".character").click(function() {
    if ($(this).hasClass("freeze")) {
    window.clearInterval(countdown);
    window.setTimeout(function(){
      countdown = window.setInterval(...)
    }, 3000);
} 
```

你必须命名函数才能这样做

至于[$.delay](http://api.jquery.com/delay/)它用于延迟 jQuery 动画的执行

# xml - 在 XSLT 中需要帮助以进行 XML 转换

> ID：14156698
> 
> 赞同：0
> 
> 时间：2013-01-04T11:53:27.713
> 
> 标签：xml, xslt

我需要 XSLT 1.0 中的帮助将以下 Source XML 转换为 Result XML。对 XSLT 不是很熟悉，同时也在这个论坛上搜索有用的帖子。谢谢你的帮助。

**源 XML：**

```
<BomCollection>
  <BomAssyV>
    <sender>Oracle</sender>
    <messageid>ABCD1234EFG</messageid>
    <bomid>1234</bomid>
    <partid>4567</partid>
    <loc>DEL</loc>
    <country>IND</country>
    <cost>30</cost>
    <linenumber>1</linenumber>
    <componentpartid>CID1</componentpartid>
    <componenttype>CTYPE</componenttype>
    <quantityperpart>2</quantityperpart>
  </BomAssyV>
  <BomAssyV>
    <sender>Oracle</sender>
    <messageid>ABCD1234EFG</messageid>
    <bomid>1234</bomid>
    <partid>4567</partid>
    <loc>DEL</loc>
    <country>IND</country>
    <cost>30</cost>
    <linenumber>2</linenumber>
    <componentpartid>CID2</componentpartid>
    <componenttype>CTYPE</componenttype>
    <quantityperpart>30</quantityperpart>
  </BomAssyV>
  <BomAssyV>
    <sender>Oracle</sender>
    <messageid>ABCD1236EFG</messageid>
    <bomid>4321</bomid>
    <partid>8901</partid>
    <loc>MUM</loc>
    <country>IND</country>
    <cost>45000</cost>
    <linenumber>1</linenumber>
    <componentpartid>PID3</componentpartid>
    <componenttype>PTYPE</componenttype>
    <quantityperpart28></quantityperpart28>
  </BomAssyV>
</BomCollection> 
```

结果 XML：

```
<request>
  <sender>Oracle</sender>
  <messageId>ABCD1234EFG</messageId>  
  <header>    
    <bomid>1234</bomid>
    <partId>4567</partId>
    <loc>DEL</loc>
    <country>IND</country>
    <cost>30</cost>
    <line>
      <lineNumber>1</lineNumber>
      <componentPartId>CID1</componentPartId>      
      <componentType>CTYPE</componentType>    
      <quantityPerPart>2</quantityPerPart>      
    </line>
    <line>
      <lineNumber>2</lineNumber>
      <componentPartId>CID2</componentPartId>      
      <componentType>CTYPE</componentType>    
      <quantityPerPart>30</quantityPerPart>      
    </line>
  </header>
  <header>    
    <bomid>4321</bomid>
    <partId>8901</partId>
    <loc>MUM</loc>
    <country>IND</country>
    <cost>45000</cost>
    <line>
      <lineNumber>1</lineNumber>
      <componentPartId>PID3</componentPartId>      
      <componentType>PTYPE</componentType>    
      <quantityPerPart></quantityPerPart>      
    </line>   
  </header>
</request> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:33:52.747

您需要进行一些分组 - 请查看此 SO 帖子：[使用 XSLT 对简单 XML 应用 Muenchian 分组](https://stackoverflow.com/questions/12783340/applying-muenchian-grouping-for-a-simple-xml-with-xslt)。具体来说，看看对[Jeni Tennison 的 Muenchain 分组指南的参考](http://www.jenitennison.com/xslt/grouping/muenchian.xml)

我在这里假设只有一个`request`输出元素（否则您将需要第二级分组），并且`bomid`并且`partid`是并列的。

**XSLT**

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />

  <xsl:key name="bomids" match="BomAssyV" use="bomid" />

  <xsl:template match="BomCollection">
    <xsl:element name="request">
      <!-- We just scrape the first BomAssyV/sender and messageid elements -->
      <sender>
        <xsl:value-of select="BomAssyV/sender"/>
      </sender>
      <messageid>
        <xsl:value-of select="BomAssyV/messageid"/>
      </messageid>
      <!--i.e. Only the first bom in every group-->
      <xsl:apply-templates select="BomAssyV[generate-id()=generate-id(key('bomids', bomid)[1])]" mode="group"/>
    </xsl:element>
  </xsl:template>

  <xsl:template match="BomAssyV" mode="group">
    <header>
      <bomid>
        <xsl:value-of select="bomid"/>
      </bomid>
      <bomid>
        <xsl:value-of select="partid"/>
      </bomid>
      <loc>
        <xsl:value-of select="loc"/>
      </loc>
      <country>
        <xsl:value-of select="country"/>
      </country>
      <cost>
        <xsl:value-of select="cost"/>
      </cost>

      <xsl:for-each select="key('bomids', bomid)">
        <line>
          <lineNumber>
            <xsl:value-of select="linenumber"/>
          </lineNumber>
          <componentPartId>
            <xsl:value-of select="componentpartid"/>
          </componentPartId>
          <componentType>
            <xsl:value-of select="componenttype"/>
          </componentType>
          <quantityPerPart>
            <xsl:value-of select="quantityperpart"/>
          </quantityPerPart>
        </line>
      </xsl:for-each>
    </header>
  </xsl:template>

</xsl:stylesheet> 
```

**转换此输入 XML**

```
<BomCollection>
  <BomAssyV>
    <sender>Oracle</sender>
    <messageid>ABCD1234EFG</messageid>
    <bomid>1234</bomid>
    <partid>4567</partid>
    <loc>DEL</loc>
    <country>IND</country>
    <cost>30</cost>
    <linenumber>1</linenumber>
    <componentpartid>CID1</componentpartid>
    <componenttype>CTYPE</componenttype>
    <quantityperpart>2</quantityperpart>
  </BomAssyV>
  <BomAssyV>
    <sender>Oracle</sender>
    <messageid>ABCD1234EFG</messageid>
    <bomid>1234</bomid>
    <partid>4567</partid>
    <loc>DEL</loc>
    <country>IND</country>
    <cost>30</cost>
    <linenumber>2</linenumber>
    <componentpartid>CID2</componentpartid>
    <componenttype>CTYPE</componenttype>
    <quantityperpart>30</quantityperpart>
  </BomAssyV>
  <BomAssyV>
    <sender>Oracle</sender>
    <messageid>ABCD1236EFG</messageid>
    <bomid>4321</bomid>
    <partid>8901</partid>
    <loc>MUM</loc>
    <country>IND</country>
    <cost>45000</cost>
    <linenumber>1</linenumber>
    <componentpartid>PID3</componentpartid>
    <componenttype>PTYPE</componenttype>
    <quantityperpart>28</quantityperpart>
  </BomAssyV>
</BomCollection> 
```

**到这个输出xml**

```
<request>
  <sender>Oracle</sender>
  <messageid>ABCD1234EFG</messageid>
  <header>
    <bomid>1234</bomid>
    <bomid>4567</bomid>
    <loc>DEL</loc>
    <country>IND</country>
    <cost>30</cost>
    <line>
      <lineNumber>1</lineNumber>
      <componentPartId>CID1</componentPartId>
      <componentType>CTYPE</componentType>
      <quantityPerPart>2</quantityPerPart>
    </line>
    <line>
      <lineNumber>2</lineNumber>
      <componentPartId>CID2</componentPartId>
      <componentType>CTYPE</componentType>
      <quantityPerPart>30</quantityPerPart>
    </line>
  </header>
  <header>
    <bomid>4321</bomid>
    <bomid>8901</bomid>
    <loc>MUM</loc>
    <country>IND</country>
    <cost>45000</cost>
    <line>
      <lineNumber>1</lineNumber>
      <componentPartId>PID3</componentPartId>
      <componentType>PTYPE</componentType>
      <quantityPerPart>28</quantityPerPart>
    </line>
  </header>
</request> 
```

# ruby-on-rails - 模块中未定义的方法

> ID：14156700
> 
> 赞同：1
> 
> 时间：2013-01-04T11:53:29.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, methods, module, undefined

我以前从未见过此错误消息

```
undefined method `new' for Book:Module 
```

并且想知道是否有人知道我为什么会得到它，我的第一个想法是命名约定，但不确定

我有一个模块

```
 module Book::BookFinder

  BOOK_URL = 'https://itunes.apple.com/lookup?isbn='

  def book_search(search)
  response = HTTParty.get(BOOK_URL + "#{search}", :headers => { 'Content-Type' => 'application/json', 'Accept' => 'application/json' })
 results = JSON.parse(response.body)["results"]
end

end 
```

然后将其包含在我的控制器中

```
 class BookController < ApplicationController
 before_filter :authenticate_admin_user!
 include Book::BookFinder

 def results
 results = book_search(params[:search])
 @results = results
 @book = Book.new
 @book.author = results[0]["artistName"]

end

def create
@book = Book.new(params[:book])
 if @book.save
redirect_to @book, notice: 'Book was successfully saved'
 else
render action:new
end
end
end 
```

有没有人遇到过这个并知道如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:56:37.217

问题来自您对`Book.new`.

Book 是一个模块 (Book::BookFinder) 并且不能被实例化。

Book::BookFinder 中的方法现在混合到您的控制器中，并且 Book::BookFinder 中的任何方法都可以直接在控制器上调用，而无需实例化 Book::BookFinder。

如果您真的希望这是一个对象，请使用`class`而不是 Module。

*更新*：你显然不能只用类替换模块。但是，如果您想拥有一个可以新建和设置属性的对象 Book，则需要为此编写一个类（并删除`include Book::BookFinder`您现在用于 Module.

示例课程如下所示：

```
class Book
  def initialize
    # put constructor logic here
  end

  def some_method
    # methods that can be called on the instance
    # eg:
    # @book = Book.new
    # @book.some_method
  end

  # defines a get/set property
  attr_accessor :author
  # allows assignment of the author property
end 
```

希望这会有所帮助，但我强烈建议您查看一些关于 Ruby 类的教程以及这些东西是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:55:46.610

您不能在 Ruby 中实例化模块

# asp.net - ASP.net 从数据库中搜索

> ID：14156709
> 
> 赞同：2
> 
> 时间：2013-01-04T11:53:50.383
> 
> 标签：asp.net, sql-server, entity-framework, search

我正在开发一个应用程序，在该应用程序中，我需要为用户提供搜索选项，例如如果用户输入“科学”，搜索功能应该获得具有名称科学的课程，或者如果在他们的描述科学中出现类似单词，我的意思是说如果用户输入一半单词查询应该通过匹配字符序列来获得完整的单词，但我不知道如何实现这一点，我在我的应用程序中使用实体框架。

我还需要从多个表中搜索一件事。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:02:53.120

我认为你想实现自动完成，如果是这样，那么下面的代码将解决你的问题：

代码文件：

```
 [WebMethod(EnableSession = true)]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string[] GetPatientLastName(string prefix)
{
    List<string> customers = new List<string>();
    using (SqlConnection conn = new SqlConnection())
    {
        string connectionstring = CCMMUtility.GetCacheForWholeApplication();
        conn.ConnectionString = connectionstring;
        using (SqlCommand cmd = new SqlCommand())
        {
            cmd.CommandText = "select distinct top(10) PatientLastname from tblMessage where  " +
            "PatientLastname  like '%'+ @SearchText + '%' order by PatientLastname";
            cmd.Parameters.AddWithValue("@SearchText", prefix);
            cmd.Connection = conn;
            conn.Open();
            using (SqlDataReader sdr = cmd.ExecuteReader())
            {
                while (sdr.Read())
                {
                    customers.Add(string.Format("{0}", sdr["PatientLastname"]));
                }
            }
            conn.Close();
        }
        return customers.ToArray();
    }
} 
```

jQuery代码：

```
 $(document).ready(function () {
        $('[ID$=txtPatientLastname]').live('keyup.autocomplete', function () {

            $(this).autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '<%=ResolveUrl("~/Resources/WebService.asmx/GetPatientLastName") %>',
                        data: "{ 'prefix': '" + request.term + "'}",
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        success: function (data) {
                            response($.map(data.d, function (item) {
                                return {
                                    label: item.split('-')[0],
                                    val: item.split('-')[1]
                                }
                            }))
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                },
                select: function (e, i) {
                },
                minLength: 1
            });
        });
}); 
```

希望这将满足您的要求。

# bash - 解压 txt 文件中指定的文件列表

> ID：14156712
> 
> 赞同：2
> 
> 时间：2013-01-04T11:54:00.947
> 
> 标签：bash, zip

我有一个包含文件名列表的 txt 文件。在 bash 中，如何仅从 zip 文件中解压缩列表中指定的那些文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T11:57:14.163

这应该有效：

```
unzip -q /path/to/zipfile $(cat thetxtfile) 
```

当然，该命令需要在一个目录中发出，该目录最好一开始就为空。

请注意，如果您的文件名中有空格，这将不起作用，您需要这样做：

```
while read thefile; do unzip -q /path/to/zipfile "$thefile"; done <thetxtfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:28:19.770

如果您在命令行处理文件列表，`xargs`这几乎总是最好的答案——它干净地处理带有空格的文件名，并且它绕过了参数数量的限制。我建议这样做：

```
tr '\n' '\0' <filelist.txt | xargs -0 unzip -q /path/to/zipfile 
```

使用`tr '\n' '\0' <filelist.txt`获取您的文件列表并将 nul 字符替换为新行。`xargs -0`读取以 nul 分隔的文件列表并将其添加到以下命令的 agument 列表中。

如果您的文件名列表使用 '\r\n' 或 '\r' 样式的行尾，这将中断。

# gcc - 如何在 Qt Creator for CMake 项目中启用 c++11 语法突出显示

> ID：14156716
> 
> 赞同：9
> 
> 时间：2013-01-04T11:54:11.510
> 
> 标签：gcc, c++11, cmake, syntax-highlighting, qt-creator

如何在 Qt Creator for CMake 项目中启用 C++11 语法突出显示？

我在 CMakeLists.txt 中有这段代码：

```
if(CMAKE_COMPILER_IS_GNUCXX)
    add_definitions(-std=c++11)
endif() 
```

一切都没有任何问题。

我知道如何强制 Qt Creator 为基于 qmake 的项目使用 C++ 11 语法突出显示（在 *.pro 文件中将 QMAKE_CXXFLAGS 设置为 -std=c++11）。CMake有没有类似的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T09:19:05.270

在最新版本的 QtCreator [2.7.0+](https://qt.gitorious.org/qt-creator/qt-creator/blobs/2.7/dist/changes-2.7.0)中，默认情况下应为 CMake 项目启用 C++11 语法突出显示。在旧版本中，只需添加`-std=c++0x`到 CMAKE_CXX_FLAGS 也应该可以工作。要启用对 C++11 库功能的自动完成支持，您可能必须手动编辑生成的 cbp 文件并在默认目标的编译器标记下添加以下内容：

```
<Add option="-D__GXX_EXPERIMENTAL_CXX0X__" /> 
```

# java - Selenium JUnit 测试卡在 click()

> ID：14156718
> 
> 赞同：-1
> 
> 时间：2013-01-04T11:54:18.260
> 
> 标签：java, testing, selenium, junit, webdriver

我在 Selenium IDE 中进行了快速测试，并将其导出为 Webdriver 支持的 JUnit 测试。如果页面上存在每个元素，它就可以正常工作。我更改了一些定位器，看看如果 Selenium 找不到它们会发生什么，我发现了一个奇怪的问题：

示例 1：

```
selenium.click("link=Something"); 
```

'Something' 不存在，所以我的测试会在几秒钟内停止，但例外情况是：“com.thoughtworks.selenium.SeleniumException: Element link=Something not found”。

示例 2：

```
selenium.click("//div[2]/inprut"); 
```

显然在页面上找不到定位器（因为错字），但是测试并没有失败，只是卡在了这一行。

可能这是一个愚蠢的问题，但是是否有可能使 click() 函数（与 XPath 定位器一起使用）的行为类似于示例 1 中的函数？我是 Selenium 的初学者，因此不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:10:05.210

在代码中添加一些支持逻辑是一种很好的做法。通常，您可以将`extend`您的课程添加到某个`TestScript`课程或其他内容，但更深入地讲，您可以实现类似的功能

```
public String getElement(String element) {
    try {
        if (isElementPresent(element)) return element;

        Integer timesIterated = 0;
        logInfo("Attempting to find element: [" + element + "]");

        for (timesIterated = 0; timesIterated < maxAttempts; timesIterated++) {
            if (isElementPresent(element)) {
                if (!isVisible(element)) logInfo("WARNING: [" + element + "] is not visible!");

                logStatus("Found");

                selenium.highlight(element);
                break;
            } else {
                Integer t = timesIterated + 1;
                logInfo(t.toString() + "/" + maxAttempts);
                if (timesIterated >= maxAttempts) logTestResult("Could not find [" + element + "]", false);
            }

            sleep(2);
        }

    } catch (Exception x) {
        logError(x.getMessage());
        end();
    }

    return element;
} 
```

*请注意，这是非常随意的，我提到的功能对您来说不存在。你必须自己实现它们。这是我使用的框架中用于查找元素的实际代码片段。如果没有，它将记录一个错误，然后脚本失败。*

**编辑**：这与您的问题有关，因为我的`isElementPresent(String)`函数适用于 xpath 和 css ......所以无论您提供什么选择器，它都会起作用。因此，在您的`isElementPresent(String)`函数中，实现支持这两个选择器的逻辑。

# session - 如何在joomla中从一个模块获取会话值到另一个模块

> ID：14156719
> 
> 赞同：4
> 
> 时间：2013-01-04T11:54:31.990
> 
> 标签：session, module, joomla2.5

嗨，我有两个模块，并使用以下代码将用户 ID 与会话从一个模块传递到第二个模块。

// 使用 joomla 设置会话（第一个模块）

```
$getCompID = JRequest::getVar('compID');        
$session =& JFactory::getSession();
$session->set('comID', $getCompID); 
```

// 获取与 joomla 的会话（第二个模块）

```
$session = JFactory::getSession();
echo $session->get('comID'); 
```

我无法在第二个模块中获得会话值。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:40:36.403

有可能您没有在第一个模块中重新加载页面并尝试在第二个模块中设置会话和访问会话。

所以首先尝试在第一个模块中重新加载同一页面并分配会话，或者您应该在第二个模块中使用以下代码

`$getCompID = JRequest::getVar('compID');`

`$session =& JFactory::getSession();`

`$session->set('comID', $getCompID);`

`echo $session->get('comID');`

将您的变量传递给“compID”到第二个模块，然后尝试在那里设置会话

# javascript - 滚动功能 IE 出错

> ID：14156725
> 
> 赞同：1
> 
> 时间：2013-01-04T11:54:52.843
> 
> 标签：javascript, jquery, html, css

我在 IE 中的滚动功能有问题。

这里的代码[http://jsfiddle.net/VdNQL/](http://jsfiddle.net/VdNQL/)

这里的问题是，当你点击链接（顶部）时，它会去特定的地方，但在它去之后它只是窝棚一次。很高兴在 Firefox 和 chrome 中查看。我认为问题是jQuery。这是我的jQuery。

```
 $(document).ready(function(){            
        $(window).scroll(function(){
            if ($(this).scrollTop() > 50) {
                $('div').addClass("k");
            } else {
                $('div').removeClass("k");
            }
        }); 

   $("a").bind('click', function() {
    var hash = $(this).attr("href");
    $('html, body').animate({ scrollTop: $(hash).position().top - 50 }, 1000);
  });

  }); 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T11:58:27.410

只需停止链接元素的默认操作`.preventDefault()`

```
$("a").bind('click', function(ev) {
    ev.preventDefault();

    var hash = $(this).attr("href");
    $('html, body').animate({ scrollTop: $(hash).position().top - 50 }, 1000);
}); 
```

[http://jsfiddle.net/VdNQL/2/](http://jsfiddle.net/VdNQL/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:59:32.777

那是因为您的 href 点击也在尝试同时工作。防止默认的 a href 行为。这消除了混蛋/摇晃行为。

```
$("a").bind('click', function(event) {
    event.preventDefault();
    var hash = $(this).attr("href");
    $('html, body').animate({ scrollTop: $(hash).position().top - 50 }, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T12:01:45.437

在您的代码中，当窗口滚动顶部大于 50 时，您将**k类添加到 div 中。在 k 类中，您将****顶部**设置为**1px**。因此，您的脚本会将顶部设置为 1px，然后启动动画。我希望这就是在 IE 中使用 shacking 的原因。

# backbone.js - Backbone JS - this.model.models 而不是 this.collection？

> ID：14156726
> 
> 赞同：4
> 
> 时间：2013-01-04T11:54:52.847
> 
> 标签：backbone.js, backbone.js-collections

我是 Backbone JS 的新手，一直在关注[Christopher Coenraets Wine Cellar 教程](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/)。

这一切都很好而且花花公子，但我不明白他是如何使用`this.model.models`来访问集合而不是`this.collection`. 此外，当我尝试将代码更改为后者时，它似乎`this.collection`是未定义的。

```
window.WineListView = Backbone.View.extend({

    tagName:'ul',

    initialize:function () {
        this.model.bind("reset", this.render, this);
    },

    render:function (eventName) {
        _.each(this.model.models, function (wine) {
            $(this.el).append(new WineListItemView({model:wine}).render().el);
        }, this);
        return this;
    }

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T12:17:14.330

有两件事让你感到沮丧：

*   您可以根据需要在视图中注入集合。通常的方法是传递一个集合属性，但这里它是作为路由器中的模型传递的：

    ```
    this.wineList = new WineCollection();
    this.wineListView = new WineListView({model:this.wineList}); 
    ```

*   [collection.models](http://backbonejs.org/#Collection-models)在集合中保存模型的原始数组

    > **models** *collection.models*
    > 对集合内模型的 JavaScript 数组的原始访问。通常您会希望使用 get、at 或 Underscore 方法来访问模型对象，但有时需要直接引用数组。

如果要`this.collection`在视图中使用，则应将路由器修改为

```
this.wineList = new WineCollection();
this.wineListView = new WineListView({collection: this.wineList}); 
```

然后您可以将其用作

```
window.WineListView = Backbone.View.extend({
    tagName: 'ul',

    initialize: function () {
        this.collection.bind("reset", this.render, this);
    },

    render: function (eventName) {
        // Backbone proxies Underscore methods on collections
        // _.each(this.collection.models, function (wine) {

        this.collection.each(function (wine) {
            $(this.el).append(new WineListItemView({model: wine}).render().el);
        }, this);

        return this;
    }
}); 
```

# jboss - Start remote Jboss with Jenkins using JBoss plugin

> ID：14156730
> 
> 赞同：3
> 
> 时间：2013-01-04T11:55:20.587
> 
> 标签：jboss, jenkins

I'm trying to use the [JBoss plugin](https://wiki.jenkins-ci.org/display/JENKINS/JBoss+Management+Plugin) on Jenkins to start and stop a remote Jboss. Because there isn't documentation on the plugin page I'm not able to make it work.
When I set the parameters for the plugin I don't know what I have to put for the parameters:

```
Command to start server
Command to shutdown server 
```

Do you ever used this?

Cheers

# actionscript-3 - Matrix transformation scale with multiple objects

> ID：14156735
> 
> 赞同：1
> 
> 时间：2013-01-04T11:55:26.310
> 
> 标签：actionscript-3, matrix, scale

I have array of tiles and they are drawn on my "canvas".

I know how to transform my canvas to scale from it's center:

```
var m:Matrix = new Matrix();
m.translate(-centerX, -centerY);
m.scale(scaleX, scaleY);
m.translate(centerX, centerY); 
```

This will scale and translate tile to its x,y

```
var m:Matrix = new Matrix();
m.translate(_tile.x,_tile.y);
m.scale(_scale, _scale); 
```

But how do I scale all my bitmap tiles from center while I'm drawing them on "canvas"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:58:35.510

此代码显示如何使用 BitmapData.draw 方法缩放和居中平铺位图数据（tile_1 是“(0,0)”排列的位图）：

```
var tile:BitmapData = new tile_1();
var canvas:BitmapData = new BitmapData(1000, 1000, true, 0x00FFFFFF);
var scale:Number = 2;
canvas.draw(tile, new Matrix(scale, 0, 0, scale, -tile.width*scale/2, -tile.height*scale/2)); 
```

如果您使用其他技术绘制瓷砖，请更详细地描述它。

# iphone - 如何用文本视图中的图像替换图像路径，离线模式下单个文本视图中有很多图像

> ID：14156741
> 
> 赞同：1
> 
> 时间：2013-01-04T11:55:55.090
> 
> 标签：iphone, objective-c, ios

图像首先使用图像 url 以在线模式从 html 页面下载。所有内容也存储在`sqlite`. 当互联网存在时，它工作正常。`webview`正在显示所有文本和图像。但是当互联网不存在时，文本显示但图像不显示。我的图像存储在文件中。我也有图像路径，我可以从中接收图像，但问题是我如何在`UITextview`使用`UImageview`.

当我使用`UIImageview`并设置它的框架时，所有图像都被放置在另一个之上，并且文本在其中滚动。

那么我必须做什么才能在离线模式下运行具有许多图像在适当位置的文本？

# php - 在 MySQL 中存储第二个复选框的值

> ID：14156753
> 
> 赞同：2
> 
> 时间：2013-01-04T11:56:40.713
> 
> 标签：php, mysql, arrays, forms, checkbox

我已经尝试为此找到答案 - 我希望它会很容易解决。

我有一个带有事件列表的 HTML 表单，每个事件都有一个复选框（`name="registrations[]"`以及从数据库中提取的 ID 作为值）。客户可以勾选任意数量的框来表明他们是否想参加。

每个活动旁边都有第二个复选框 ( `name="lunch[]"`)，客户可以使用它来指示他们是否需要在该活动中享用午餐。

现在，我可以使用以下方法将多个事件插入数据库：

```
foreach ($_POST['registrations'] as $registration) {
/// do database work
} 
```

（`$registration`用于存储每个预订的事件 ID）。

我的问题是：我将如何将第二个复选框的值存储在数据库中？一如既往地感谢您的帮助。

编辑 - 数据库架构，根据要求：

```
CREATE TABLE IF NOT EXISTS `bookings2` (
  `booking_id` int(5) unsigned zerofill NOT NULL AUTO_INCREMENT,
  `contact` varchar(150) NOT NULL DEFAULT '',
  `company` varchar(150) NOT NULL DEFAULT '',
  `service` varchar(50) NOT NULL DEFAULT '',
  `telephone` varchar(50) NOT NULL DEFAULT '',
  `email` varchar(150) NOT NULL DEFAULT '',
  `website` varchar(250) NOT NULL DEFAULT '',
  `address` text NOT NULL,
  `cars` char(2) DEFAULT NULL,
  `size` varchar(10) DEFAULT NULL,
  `advertising` varchar(15) NOT NULL DEFAULT '',
  `display` char(3) DEFAULT NULL,
  `bag` char(3) DEFAULT NULL,
  `lunch` char(3) DEFAULT NULL,
  `masterclass` char(3) DEFAULT NULL,
  `other_info` text,
  `promo_code` varchar(50) NOT NULL,
  `electric` char(3) DEFAULT NULL,
  `event_id` varchar(100) NOT NULL DEFAULT '',
  `booking_date` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`booking_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=104 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:16:01.093

将午餐复选框的值设置为事件 ID - 就像您对注册复选框所做的那样。

```
foreach ($_POST['registrations'] as $registration) {

    $lunch = in_array($registration, $_POST['lunch']) ? 'Yes' : 'No';

    // do the insert with $lunch variable which is now Yes or No
    // INSERT INTO bookings2 (...) VALUES (..., '$lunch', ...)
} 
```

这会将您的 lunch 变量存储为`Yes`or `No`- 这将起作用，但存储 boolean 会更有效`1 or 0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:15:43.237

您可以构建您的表格，如下所示：

```
<form name="abc" method="post">
<input type="checkbox" name="registrations[1]" value="1"> aa &nbsp; 
   <input type="checkbox" name="lunch[1]" value="1"> aa &nbsp; <br>
<input type="checkbox" name="registrations[2]" value="2"> BB &nbsp;
   <input type="checkbox" name="lunch[2]" value="2"> aa &nbsp;<br>
<input type="checkbox" name="registrations[3]" value="3"> CC &nbsp; 
```

啊  

提交时，您将获得如下值：

```
Array
(
    [lunch] => Array
        (
            [1] => 1
            [2] => 2
            [3] => 3
        )

    [registrations] => Array
        (
            [2] => 2
            [3] => 3
        )

    [submit] => submit
) 
```

比你可以循环你的 php foreach 喜欢 -

```
foreach ($_POST['registrations'] as $key=>$registration) {
   //you can access lunch value as
   $lunch  = isset($_POST['lunch'][$key]) ? $_POST['lunch'][$key] : 0;
} 
```

# android - 使用意图时如何在android中为布局添加过渡效果

> ID：14156755
> 
> 赞同：2
> 
> 时间：2013-01-04T11:56:55.300
> 
> 标签：android, android-layout, android-intent

使用意图时如何在android中为布局添加过渡效果。

从一种布局到另一种布局。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T11:59:02.433

如果要在从一个 Activity 切换到另一个 Activity 时添加过渡效果，请使用以下代码，

```
Intent i = new Intent(First.this, Second.class);
i.putExtra("data", data);
startActivity(i);

/** Fading Transition Effect */
First.this.overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:03:00.617

因此，对于动画，使用第二个活动的 OnCreate() 中的代码为：

```
overridePendingTransition(R.anim.fadein, R.anim.fadeout); 
```

或者

意向后

```
 First.this.overridePendingTransition(R.anim.fadein, R.anim.fadeout); 
```

这会对你有很大帮助。以下链接将为您提供帮助：[动画](https://stackoverflow.com/questions/3389501/activity-transition-in-android)

[动画2](https://stackoverflow.com/questions/3925355/android-fadeout-animation-for-splash-screen)

# ios - IOS: animation explosion cloud

> ID：14156762
> 
> 赞同：0
> 
> 时间：2013-01-04T11:57:13.827
> 
> 标签：ios, xcode, animation

I want insert into my app a particular animation, It must be as cloud-explosion...do you know when you leave a breakpoint in xcode? in this way...can you tell me how make it? thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:41:17.070

This can be achieved by this piece of code:

```
NSArray * imageArray  = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"1.png"], [UIImage imageNamed:@"2.png"], nil]; //this will be the frames of animation images in sequence.
 ringImage = [[UIImageView alloc]initWithFrame:CGRectMake(100,200,600,600)];
 ringImage.animationImages = imageArray;
 ringImage.animationDuration = 1.5;//this the animating speed which you can modify
 ringImage.contentMode = UIViewContentModeScaleAspectFill;
 [ringImage startAnimating];//this method actually does the work of animating your frames. 
```

This should get you going..:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:59:11.477

You could make an animated `UIImageView`, with a set of images.

# windows - Spy++ 图标的含义是什么

> ID：14156764
> 
> 赞同：0
> 
> 时间：2013-01-04T11:57:16.870
> 
> 标签：windows, icons, spy++

> **可能重复：**
> [为什么某些项目在 Spy++ 的 Windows 视图中显示为灰色？](https://stackoverflow.com/questions/6936283/why-are-some-items-greyed-out-in-spys-windows-view)

有谁知道 Spy++ Window View 中不同的图标是什么意思？有些是灰色的，有些不是。我无法根据 Spy++ 为窗口显示的属性找出差异。

![在此处输入图像描述](../Images/241199f8d995e7131958b46f870f3b63.png)

# java - 如何打印这个数组？

> ID：14156772
> 
> 赞同：-2
> 
> 时间：2013-01-04T11:57:47.400
> 
> 标签：java

> **可能重复：**
> [用 Java 打印数组的最简单方法](https://stackoverflow.com/questions/409784/simplest-way-to-print-an-array-in-java)

```
public char[] createArray() {        
  char[] s;        
  s = new char[26];

  for ( int i=0; i<26; i++ ) {    
    s[i] = (char) (’A’ + i);   
  }            
  return s;

  // how to print s?

  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T11:59:53.213

如果要打印为数组

```
System.out.println(Arrays.toString(s)); 
```

如果要打印为字符串

```
System.out.println(new String(s)); 
```

顺便说一句，你可以写

```
char[] s = new char['Z' - 'A' + 1];
for(char ch = 'A'; ch <= 'Z'; ch++)
   s[ch - 'A'] = ch; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:58:24.817

您可以使用[`Arrays.toString(s)`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28char%5B%5D%29)并打印结果`String`。

# c# - 如何更新列表中的值 列表？

> ID：14156776
> 
> 赞同：0
> 
> 时间：2013-01-04T11:58:03.693
> 
> 标签：c#, visual-studio-2010, windows-phone-7, windows-phone

我刚开始学习 Windows Phone 编程。

我有一个这样定义的列表，

```
 private List<Vector2> _terrain;
    public List<Vector2> Terrain { get { return _terrain; } } 
```

在此之下，我用一些像这样的向量填充列表，

```
 level.Terrain.Add(new Vector2(i, (int)y)); 
```

假设我在这个列表中有 50 个元素。我想要做的是，我想删除这个列表中的第一项，然后将第二项移动到第一位，第三到第二等等等等。我想要做的是我正在生成随机的“事物” . 有了这个，我打算让它们看起来像在移动。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:12:01.820

该类`List<T>`尝试为作为项目列表的结构提供抽象。因此，每当从列表中删除一个项目时，它就消失了，并且列表会自动压缩。例如，如果我有：

```
List<int> numbers = new List<int>();
for (int i = 0; i < 10; i++)
{
   numbers.Add(i+1); //adds the numbers 1 through 10
}

Console.WriteLine(numbers[0]); //writes out 1 - the first item
Console.WriteLine(numbers[3]); //writes out 4 - the fourth item
Console.WriteLine(numbers.Count); //writes out 10 - there are ten elements

numbers.RemoveAt(0); //removes the first element of the list
Console.WriteLine(numbers[0]); //writes out 2 - the new first item
Console.WriteLine(numbers[3]); //writes out 5 - the new fourth item
Console.WriteLine(numbers.Count); //writes out 9 - there are nine elements now

numbers.RemoveAt(3); //removes the fourth element of the list
Console.WriteLine(numbers[0]); //writes out 2 - still the first item
Console.WriteLine(numbers[3]); //writes out 6 - the new fourth item
Console.WriteLine(numbers.Count); //writes out 8 - there are eight elements total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:16:32.147

使用通用队列

```
Queue<Vector2> testQueue= new Queue<Vector2>(); 
```

[另请查看此链接以获取有关通用队列的更多信息](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:08:58.697

sounds like you want a Queue instead of a List.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:09:06.077

Try this:

```
level.Terrain.RemoveAt(0) 
```

# c# - C# 字符串拆分 - 没有结束分隔符

> ID：14156777
> 
> 赞同：3
> 
> 时间：2013-01-04T11:58:12.793
> 
> 标签：c#, regex, string, split

昨天回答了我最初的问题，即如何从字符串中拆分出特定字符，然后删除这两个字符之间的内容。

我谈到从这样的字符串中删除......

```
lg-109-1.ea-091-2.hd-180-1.hr-220-1 
```

我没有意识到有时我想分割我的角色（在这种情况下，它是 hd 和 . 以及 hr 和 . 之间的所有内容）

但是你看到 hr 没有`.`所以它没有被删除

这是我使用的代码...

```
public static string RemoveB(string s) {
    s = Regex.Replace(s, @"hr.*?\.", "");
    s = Regex.Replace(s, @"hd.*?\.", "");
    return s;
} 
```

有谁知道如何检查 hr 之后是否有 .，如果没有，则将其删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:21:04.680

你可以做

```
Regex.Replace(s, @"(hr|hd).*?(\.|$)", ""); 
```

`$`描述字符串的结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:13:09.753

尝试使用`(\.|$)`而不是仅仅`\.`为了匹配`.`行尾。或者，如果您知道 hr 始终是最后一个条目，您可以使用`$`而不是`\.`始终匹配行尾。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-04T12:03:43.387

```
public static string RemoveB(string s) {
    s = s.Replace("hr.","$");
    s = s.Replace("hr","");
    s = s.Replace("$","hr.");
    return s;
} 
```

# android - 从 XML 恢复大量数据

> ID：14156779
> 
> 赞同：0
> 
> 时间：2013-01-04T11:58:12.443
> 
> 标签：android, xml, sqlite

我正在尝试为此选择最佳方法。我拥有的是一个可能包含多达 5000 个节点的 xml 文件。每个拥有 5 个子节点。

我需要的是把它重写到 sqlite 数据库。如果我将这些 xml 转换为对象集合，然后使用该集合将它们插入 sqlite 数据库，那么对于可能具有 128RAM 的较弱设备来说，这不是矫枉过正吗？

或者我不应该在解析 XML 文件时构建集合并插入值？

这对用户来说将是罕见的操作。这一切都是关于将备份从 xml 恢复到设备的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:01:21.600

是的，如果您一次加载所有 xml（从中创建一个 DOM），它将占用大量 RAM。但是您可以使用 SAX、StAX、PullParser 等，它们将*逐个节点*读取文件，让您知道它们何时遇到有趣的节点，您可以通过插入将该节点保存到数据库。

Stream 解析所有 5000 个父节点的伪代码，每 5 个子节点使用 DOM：

```
while(not end node){
   Node n = Parser.readNextNode();
   saveIfInteresting(n);
}

saveIfInteresting(Node n){
   if(interesting){
     values = extractValues(n);
     db.insert(values);
   }
}

extractValues(Node n){
  //--just 5 child nodes, can do with a small DOM--
  Document d = buildDOM(n);
  for(Element e in d){
    Values.add(e.getText());
  }
  return values;

  //OR

  //---stream parse children too--
  while(not parent end node){
    Node n = Parser.readNext();
    if(n is required child){
      values.add(n.getText());
    }
  }
  return values;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:07:20.297

不，不要在内存中构建集合。而是使用`AsyncTask`with `PullParser`（这是目前 Android 库中可用的最佳解析器）。

在`doInBackground()`您的 中`AsyncTask`，解析出一个批次（比如 25 个）对象，然后调用`dbOpenHelper.bulkInsert()`一次将整个批次保存到您的数据库中。

当然，在这里你必须在你的 SQLiteOpenHelper 实现中添加一个批量插入方法来一次插入一堆行。

[您可以在此处](http://notes.theorbis.net/2010/02/batch-insert-to-sqlite-on-android.html)了解如何为您的 SQLiteOpenHelper 编写批量插入方法。为了简洁起见，我添加了所需的核心方法。

```
try{
  db.beginTransaction();
  for each record in the list {
     do_some_processing();
     if (line represent a valid  entry) {
        db.insert(SOME_TABLE, null, SOME_VALUE);
     }
     some_other_processing();
  }
  db.setTransactionSuccessful();
} catch (SQLException e) {
} finally {
  db.endTranscation();
} 
```

# google-drive-api - 在哪里可以找到 Google Drive API 的价目表？

> ID：14156781
> 
> 赞同：16
> 
> 时间：2013-01-04T11:58:22.917
> 
> 标签：google-drive-api

Google API 控制台将 500,000 / 天列为“礼貌限制”，并提供了一种允许请求更多的表单。

我的假设是更高的请求限制会产生成本；类似于[谷歌地图定价](https://developers.google.com/maps/faq#usage_pricing)

在哪里可以找到 Google Drive API 的价目表？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T15:09:46.337

Google Drive API 的更多配额不收取额外费用。只要您提出合理的要求，它就会被批准。

大型应用程序（例如那些发出大量请求的应用程序）对 Google Drive 有好处，Google 鼓励它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-11-19T13:16:44.770

Google Cloud Console 已更新，奇怪的是我花了一段时间才在几层下找到 API Quotas ...
以防万一您需要直接链接，这里是：
[https ://console.cloud.google.com/apis/ api/drive.googleapis.com/quotas](https://console.cloud.google.com/apis/api/drive.googleapis.com/quotas)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-19T11:31:17.443

我也有类似的担忧。[Google Cloud Platform Services](https://cloud.google.com/storage/pricing)确实有价目表，因为[Google Drive REST API](https://developers.google.com/drive/v3/web/about-sdk)没有。更新的配额使用限制为每天 1.000.000.000 个请求，可以通过向 Google 申请更多配额使用表来提高。

无需付款。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-19T03:34:42.957

以防万一有人在寻找截至 2015 年 10 月的配额，

*   登录您的 Google 开发者控制台。
*   转到 API 和身份验证 > API。
*   单击 Drive API，然后单击配额选项卡。

目前，免费配额设置为每天 1,000,000,000 次请求，因此除非您正在做一些非凡的事情，否则我认为这对大多数人来说应该足够了。

# html - 为什么 CSS 行悬停保留在交替行的表中（在 IE 中）？

> ID：14156789
> 
> 赞同：2
> 
> 时间：2013-01-04T11:58:53.290
> 
> 标签：html, internet-explorer, css, internet-explorer-10

我有一个表格，其中的行具有交替的颜色。表格行上也有悬停效果。在 Windows 8 下的 IE10（以及 IE9 模式下）中，即使鼠标离开，悬停也经常保持。

这里是演示（只需将指针从上到下拖到表格上）：http: [//jsfiddle.net/rapik/UF8kZ/](http://jsfiddle.net/rapik/UF8kZ/)

删除使行颜色交替的规则可以解决问题。

这是一个错误还是我做错了什么？

* * *

CSS 源代码：

```
/*
 * Alternating colors for rows.
 */
.table tbody tr:nth-child(odd) {
  background-color: #DDDDDD;
}

.table tbody tr:nth-child(even) {
  background-color: #EEEEEE;
}

/*
 * Hover effect for rows.
 */
.table tbody tr:hover {
  background-color: red;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:34:21.497

这是您遇到的一个相当有趣的问题。一个直接的解决方案是将注意力从`tr`元素转移到其`td`子元素：

```
.table tbody tr:nth-child(odd) {
    background-color: #DDDDDD;
}
.table tbody tr:nth-child(even) {
    background-color: #EEEEEE;
}
.table tbody tr:hover td {
    background-color: blue;
} 
```

这解决了问题，但可能不足以满足所有情况。我将继续对此进行试验，看看是否可以确定更具体的细节。

**更新：**

所以我怀疑这可能与具有`display: table-row`. 我能够创建一个`span`元素，应用适当的`display`规则，并复制相同的问题。

进一步实验：http: [//jsbin.com/asazah/2](http://jsbin.com/asazah/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T02:39:40.920

当动态创建 html 时，我也遇到了类似的问题，即 IE10 无法`tr:hover`正确显示（但 IE10 似乎确实可以与静态定义的 html 一起正常工作）。

```
 div.MenuPanel table tr.MenuOption:hover {
        background-color: rgb(245,245,245); 
    }

 /* work around to get correct display in IE10 */
    div.MenuPanel table tr.MenuOption:hover td {
        background-color: rgb(245,245,245); 
    } 
```

上述解决方法（使用 td 添加第二个声明）解决了问题！！似乎是 IE10 中的一个错误。如果没有第二个声明，有时该行会突出显示，有时则不会（即始终随机间歇）。

# php - ZF1 的 quoteInto() 方法的 ZF2 等价物是什么？

> ID：14156802
> 
> 赞同：7
> 
> 时间：2013-01-04T11:59:40.283
> 
> 标签：php, zend-framework2, quote

在 Zend Framework 1 中有一个用于数据库适配器的 quoteinto 方法，可用于引用 sql 语句。

我想知道它在 Zend Framework 2 中的等价物吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T22:24:38.753

不幸的是，随着ZF 2.0`quoteInto()`中新方法的引入，该方法被删除。`Zend\Db`并且没有具有完全相同行为的等价物。

ZF2中有`quoteValue()`方法。此方法将一个值作为参数，然后将该值引用，以便您可以安全地将其作为值放入 SQL 查询中。

但是，您可以使用`quoteValue()`来复制 ZF1`quoteInto()`方法的行为。您可以简单地`quoteInto()`从[ZF1](http://framework.zend.com/svn/framework/standard/trunk/library/Zend/Db/Adapter/Abstract.php)获取方法的代码，并将`quoteValue()`ZF2 中平台对象的方法应用到它：

```
// modified quoteInto() function for ZF2
function quoteInto($text, $value, $platform, $count = null)
{
    if ($count === null) {
        return str_replace('?', $platform->quoteValue($value), $text);
    } else {
        while ($count > 0) {
            if (strpos($text, '?') !== false) {
                $text = substr_replace($text, $platform->quoteValue($value), strpos($text, '?'), 1);
            }
            --$count;
        }
        return $text;
    }
} 
```

有一些差异。ZF1 有一个`$type`参数，但是由于 ZF2 处理这些东西的方式，类型参数没有多大意义。并且有一个`$platform`参数，因为这个方法对方法的平台有依赖`quoteValue()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:35:29.573

引用 SQL 语句是旧的且可能不安全的方法。您应该使用对 SQL 注入有更好保护的准备好的语句。我将使用[此处列出](http://framework.zend.com/manual/2.0/en/modules/zend.db.adapter.html)的 PDO 驱动程序之一（取决于您的数据库），并按照下面的一些示例使用准备好的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:16:41.143

它还在那里（有点），看看我在[MySql 变体](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/Adapter/Platform/Mysql.php)`zf2 / library / Zend / Db / Adapter / Platform /your DB adapter`中发现了大约 6 种不同`quote()`的方法。然而，我认为这已经取代了我们都习惯的默认设置。`quoteValue()``quoteInto()`

[**编辑**]
[使用平台对象](http://framework.zend.com/manual/2.0/en/modules/zend.db.adapter.html#using-the-platform-object)将提供一些方向，但我认为大多数时候新的[SQL](http://framework.zend.com/manual/2.0/en/modules/zend.db.sql.html)类将只使用平台 api 为我们做引用。我自己仍然对此有所了解，所以我对任何事情都不确定。

# objective-c - 在目标 c 中打印字典

> ID：14156804
> 
> 赞同：1
> 
> 时间：2013-01-04T11:59:58.513
> 
> 标签：objective-c, dictionary, for-in-loop

我无法打印我的数组，我不明白我的问题是什么

在班银行我有

```
@property (nonatomic,strong) NSMutableDictionary *accounts; 
```

和在银行创建帐户的 VOID 功能：

```
-(void)createAccount{
    int x=random()%10;
    NSString *keys=[NSString stringWithFormat:@"%i",x];
    Account *new_account=[[Account alloc]initWithAccountNum:x];
    [self.accounts setObject:new_account forKey:keys];
} 
```

在课堂上我有

```
@property int num;
@property int plus; 
```

和方法：

```
-(id)initWithAccountNum:(int)_num{
    self=[self init];
    if(self!=nil){
        self.num=_num;
        self.plus=0;
    }
    return self;
}

-(NSString*)printer{
    return [NSString stringWithFormat:@"Account num=%i plus=%i",self.num,self.plus];
 } 
```

我尝试将数据打印到 Nslog i 主文件：

```
Bank *bank=[[Bank alloc]init];
[bank createAccount];

for (Account *acc in bank.accounts) {
    Account *printed_account=[bank.accounts objectForKey:acc];
    NSLog(@"%@",printed_account.printer);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:05:23.150

`bank.accounts`应该在尝试使用它之前分配和初始化。

```
self.accounts = [[NSMutableDictionary alloc] init]; 
```

* * *

附录：

要影响对象的打印内容，`NSLog`您可以覆盖`description`

所以你`Account`可能应该阅读：

```
-(NSString*)description{
    return [NSString stringWithFormat:@"Account num=%i plus=%i",self.num,self.plus];
} 
```

* * *

`NSMutableDictionary`已经对格式进行了很好的描述：

```
2013-01-04 12:03:11.405 AppName[19683:c07] {
    key1 = value1;
    key2 = value2;
} 
```

因此您可以将循环简化为：`NSLog(@"%@", bank.accounts);`

# emacs - emacs 24.2.1 中不再有多个 SQLi 缓冲区？

> ID：14156805
> 
> 赞同：2
> 
> 时间：2013-01-04T12:00:12.860
> 
> 标签：emacs, sql-mode

**我最近使用GNU Emacs 24.2.1**（x86_64-suse-linux-gnu，GTK+ 版本 3.4.4）从 openSuSE 11.4 更新到 12.2 。

当我启动第一个 SQLi 缓冲区 ( `sql-mysql`) 时，一切正常，但是当我想启动另一个 SQLi 缓冲区 ( `sql-mysql`) 时，第一个 SQLi 立即打开。我无法插入新的连接参数。这以前奏效。

谢谢，拉斯

更新：来自 sql.el.gz：

```
To set the buffer name directly, use universal-argument before sql-mysql. Once session has started, sql-rename-buffer can be called separately to rename the buffer. 
```

当我用 ( ) 重命名第一个 sql 缓冲区时`sql-rename-buffer`，问题仍然存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T15:39:06.607

我没有解释，它只是在错误消息中：“在 sql-mysql 之前使用通用参数”意味着您应该使用通用参数调用它，以便给它一个缓冲区名称。你可以用 Cu 作为前缀。也许您想在[这里](http://www.gnu.org/software/emacs/manual/html_node/elisp/Prefix-Command-Arguments.html)阅读更多有关它的信息。

# matlab - 在 MATLAB 中用高斯白噪声过滤信号

> ID：14156807
> 
> 赞同：4
> 
> 时间：2013-01-04T12:00:36.950
> 
> 标签：matlab, filter, noise, morse-code

我有一个具有高幅度白高斯噪声的信号/矢量，我正在尝试获得一个二进制信号（0 或 1）。采样频率为 10Hz。

我在 MATLAB 中应用了一个简单的二阶巴特沃斯滤波器，如下所示；

```
 x=sig_bruit_BB1;
   [b,a]=butter(2,0.1,'low');
   y = filter(b,a,x);
   plot(x)
   subplot(3,1,2)
   plot(y)
   for i=1:1:1820
       x=y(1,i);
       if (x<0.5)
           code(1,i)=0;
       else
           code(1,i)=1;
       end
   end
   subplot(3,1,3);
   plot(code) 
```

如您所见，我做了一个*for*循环，假设任何小于 0.5 的信号都等于 0，大于等于 1。

有人可以验证这种方法是否适用于获取二进制信号吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:08:24.470

这种方法确实有效（虽然没有看到信号很难判断它是否是最好的方法）。但是，有一种更简单的阈值方法 - 您可以简单地编写而不是循环

```
code = x > 0.5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T11:07:54.483

我建议再实施一个步骤，使其成为一种更强大的阈值方法：

*   如果信号为 0，则阈值应为 0.5 + noise_amplitude（假设为 0.6 0.7）
*   如果信号为 1，则阈值应为 0.5 - noise_amplitude（比如说 0.4 0.3）

这样，当信号因噪声而在单个阈值（0.5）附近跳跃时，您就不会冒从 0 到 1 到 0 的多次跳跃的风险。

# java - Android NumberPicker 到字符串

> ID：14156814
> 
> 赞同：1
> 
> 时间：2013-01-04T12:01:06.863
> 
> 标签：java, android, nullpointerexception, numberpicker

我正在尝试将 2 个数字选择器变成一个字符串，但它似乎永远不会起作用。

我只是不断收到 NPE，似乎无法找出原因。

请参阅下面的代码和 Logcat，

任何帮助表示赞赏。

以下是在 onCreate 中......

```
 final Context context = this;
    LayoutInflater li = LayoutInflater.from(context);
    View promptsView = li.inflate(R.layout.custominout, null);
    AlertDialog.Builder renamedialog = new AlertDialog.Builder(context);
    renamedialog.setTitle("Custom output change");
    renamedialog.setView(promptsView);

    int minInValue = 1;
    int maxInValue = 16;
    int currentInValue = 1;
    final NumberPicker inCapacity = (NumberPicker) promptsView.findViewById(R.id.inpicker);
    inCapacity.setMinValue(minInValue);
    inCapacity.setMaxValue(maxInValue);
    inCapacity.setValue(currentInValue);

    int minOutValue = 1;
    int maxOutValue = 16;
    int currentOutValue = 1;
    final NumberPicker outCapacity = (NumberPicker) promptsView.findViewById(R.id.outpicker);
    outCapacity.setMinValue(minOutValue);
    outCapacity.setMaxValue(maxOutValue);
    outCapacity.setValue(currentOutValue);

    renamedialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {

            whatin = (NumberPicker) findViewById(R.id.inpicker);
            whatout = (NumberPicker) findViewById(R.id.outpicker);

            String inpicker = String.valueOf(whatin.getValue());
            String outpicker = String.valueOf(whatout.getValue());

            try {
                CustomInOut cus = new CustomInOut();
                cus.setInpicker(inpicker);
                cus.setOutpicker(outpicker);
                cus.execute();

            } catch(IllegalStateException e) {}
        }
    });

    renamedialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            // Write your code here to invoke NO event
            dialog.cancel();
        }
    }); 
```

日志猫

```
01-04 11:58:39.278: E/AndroidRuntime(1432): FATAL EXCEPTION: main
01-04 11:58:39.278: E/AndroidRuntime(1432): java.lang.NullPointerException
01-04 11:58:39.278: E/AndroidRuntime(1432):     at com.smarte.smartipcontrol.IPControl$1.onClick(IPControl.java:98)
01-04 11:58:39.278: E/AndroidRuntime(1432):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
01-04 11:58:39.278: E/AndroidRuntime(1432):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-04 11:58:39.278: E/AndroidRuntime(1432):     at android.os.Looper.loop(Looper.java:137)
01-04 11:58:39.278: E/AndroidRuntime(1432):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-04 11:58:39.278: E/AndroidRuntime(1432):     at java.lang.reflect.Method.invokeNative(Native Method)
01-04 11:58:39.278: E/AndroidRuntime(1432):     at java.lang.reflect.Method.invoke(Method.java:511)
01-04 11:58:39.278: E/AndroidRuntime(1432):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-04 11:58:39.278: E/AndroidRuntime(1432):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-04 11:58:39.278: E/AndroidRuntime(1432):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:07:34.797

您的 NumberPickers 对象为空。
如果它们在 的布局中声明`renameDialog`，则尝试在布局中通过 id 查找视图`promptsView`，如下所示：

```
whatin = (NumberPicker)promptsView.findViewById(R.id.inpicker);
whatout = (NumberPicker)promptsView.findViewById(R.id.outpicker); 
```

# vector - 处理 2 - 找不到名为向量的类或类型

> ID：14156815
> 
> 赞同：2
> 
> 时间：2013-01-04T12:01:15.443
> 
> 标签：vector, kinect, processing, openkinect

我正在尝试与我的 kinect 一起运行一个旧的处理草图，将 kinect 点云数据保存为 OBJ 文件，但我在这一行遇到错误：

矢量记录 = new Vector();

陈述

找不到名为“Vector”的类或类型 - 我正在运行处理 2\. 他们摆脱了这种类型吗？我应该改用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T16:05:57.570

导入`java.util.*;`库..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T12:21:00.817

将[PVector](http://processing.org/reference/PVector.html)与 Processing 2 一起使用，而不是旧的`Vector`.

```
PVector recording = new PVector(40, 20); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-29T13:17:52.433

如果您想在不更改任何内容的情况下运行代码，`bluefeet`如上所述，将`import java.util.*;`t 放在草图的顶部将编译草图。

我使用 Kinect 为 PointCLoud 草图做了同样的事情，我猜猜它是你试图运行的同一个草图？

一旦你添加了`java.util.*;`，草图就可以工作，而不必担心将它转换成`pvector`这会在稍后的草图中导致更多的问题`[frame]`。

# asp.net-mvc-4 - 如何为带有列表的 ViewModel 创建编辑视图

> ID：14156816
> 
> 赞同：0
> 
> 时间：2013-01-04T12:01:15.187
> 
> 标签：asp.net-mvc-4

我对 MVC 相当陌生，所以我确定我做错了什么。我正在尽我最大的努力以 MVC 的方式来完成它，而不是恢复到仅在 HTML 中手工制作它。

这是我的编辑视图

```
@model NotesBoard.Models.RoleViewModel

@{
     ViewBag.Title = "Edit";
}

<h2>Edit</h2>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>RoleViewModel</legend>
    @Html.HiddenFor(model => model.Role.Name)

    <div class="editor-label">
        @Html.LabelFor(model => model.Role.Name)
    </div>
    <div class="editor-field">
        @Html.DisplayFor(model => model.Role.Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Role.Users)
    </div>
    <div class="editor-field">
        <table>
            <tr>
                <td class="remove-td">Tick to Remove</td>
                <td></td>
                <td class="add-td">Tick to Add</td>
            </tr>
            <tr>
                <td style="vertical-align:top; margin: 0px;">
                    <table style="margin: 0px;">
                    @foreach (var item in Model.Role.Users)
                    {
                        <tr>
                            <td class="remove-td">
                                @Html.CheckBoxFor(modelItem => item.State)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.User)
                            </td>
                        </tr>
                    }
                    </table>
                </td>
                <td></td>
                <td style="vertical-align:top; margin:0px;">
                    <table style="margin: 0px;">
                    @foreach (var item in Model.Users)
                    {
                        Boolean RoleUser = Model.Role.Users.Exists(model => model.User == item.User);
                        <tr>
                        @if(RoleUser)
                        {
                            <td class="add-td">
                                @Html.CheckBoxFor(modelItem => item.State, new { disabled=true })
                            </td>
                            <td class="disabled-label">
                                @Html.DisplayFor(modelItem => item.User)
                            </td>
                        }
                        else
                        {
                            <td class="add-td">
                                @Html.CheckBoxFor(modelItem => item.State, new { id=item.User })
                            </td>
                            <td>
                                @Html.DisplayFor(midelItem => item.User)
                            </td>
                        }
                        </tr>
                    }
                    </table>
                </td>
            </tr>
        </table>
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset>
 }

 <div>
     @Html.ActionLink("Back to List", "Index")
 </div>

 @section Scripts {
     @Scripts.Render("~/bundles/jqueryval")
 } 
```

这是我的模型：

```
public class AccountUser
{
    public AccountUser() { }

    public AccountUser(Int32 id, String user)
    {
        Id = id;
        User = user;
    }

    [Key]
    public Int32 Id { get; set; }
    public String User { get; set; }
}

public class AccountUserViewModel : AccountUser
{
    public AccountUserViewModel(Int32 id, String user, Boolean State = false)
    {
        Id = id;
        User = user;
    }

    public Boolean State { get; set; }
}

public class RoleModel
{
    public String Name { get; set; }
    public List<AccountUserViewModel> Users { get; set; }
}

public class RoleViewModel
{
    public RoleModel Role { get; set; }
    public List<AccountUserViewModel> Users { get; set; }
} 
```

当我从编辑视图获得回发时，两个用户列表都是空的。

到目前为止，这是我的控制器中的 Post 方法：

```
 [HttpPost]
    [Authorize(Roles = "Admin")]
    public ActionResult Edit(RoleViewModel model)
    {
        if (ModelState.IsValid)
        {
            var data = Request.Form;
            return RedirectToAction("Index");
        }
        return View(model);
    } 
```

如果我尝试使用 Request.form 集合直接提取数据，则复选框都命名为“item.state”。我应该如何实现此视图以获取下降数据，而无需恢复到基本上只是自己在平面旧 HTML 中制作表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:13:55.070

`foreach`将列表更改为`FOR`循环，以便索引可以在 lamda 中使用并由 Razor 视图正确呈现：

```
 @for (int i = 0; i < Model.Users.Count(); i++) {

                {

                    <tr>
                    @if(RoleUser)
                    {
                        <td class="add-td">
                            @Html.CheckBoxFor(modelItem => Model.Users[i].State, new { disabled = true })
                        </td>
                        <td class="disabled-label">
                            @Html.DisplayFor(modelItem => Model.Users[i].User)
                        </td>
                   ...
                   ... 
```

然后模型绑定器会将数据正确绑定到列表。

看看这个答案：[https ://stackoverflow.com/a/6585642/1099260](https://stackoverflow.com/a/6585642/1099260)

# objective-c - 数据未添加到单元格

> ID：14156820
> 
> 赞同：0
> 
> 时间：2013-01-04T12:01:24.307
> 
> 标签：objective-c

我在

```
Cateogry_Cell * cell = (Cateogry_Cell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

并发现它总是返回 nil，我不知道为什么它会通过

```
if(cell == nil) {
    cell = [[Cateogry_Cell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cateogry_Cell"];
} 
```

要么他们是我看不到的问题，要么我在 nil 部分的代码是错误的，但无论如何我都不是 100% 的。

我正在使用 Storyboard，所以我在其中创建了 Cell 并设置了样式，而不是通过代码。

```
 #import "Category_TableView.h"
            #import "Cateogry_Cell.h"
            #import "JobList_Table.h"
            #import "JobList_Cell.h"
            #import <QuartzCore/QuartzCore.h>

            @interface Category_TableView ()

            @end

            @implementation Category_TableView

            - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
            {
                self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
                if (self) {
                    // Custom initialization

                }
                return self;
            }

            - (void)viewDidLoad
            {
                [super viewDidLoad];
                self.navigationController.navigationBar.hidden = YES;
                // Do any additional setup after loading the view.
                [self.Category_Table registerClass:[Cateogry_Cell class] forCellReuseIdentifier:@"Cateogry_Cell"];

                NSString *requestURL = [NSString stringWithFormat:@"http://URL.4fx.co.uk/forms/AppForms/app_latest.ashx"];
                NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString: requestURL]];
                NSURLConnection *con =[[NSURLConnection alloc] initWithRequest:request delegate:self];

                if(con)
                {
                    self.CatData = [[NSMutableData alloc] init];
                    self.Category_Array = [[NSMutableArray alloc] init];
                }
                else
                {
                    [[[UIAlertView alloc] initWithTitle:@"Error" message:@"Failed to get connection. Please try again later" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];
                }

            }
            - (void)didReceiveMemoryWarning
            {
                [super didReceiveMemoryWarning];
                // Dispose of any resources that can be recreated.
            }
            - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
            {
                [self.CatData setLength:0];
            }

            - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
            {
                [self.CatData appendData:data];
            }
            - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
            {

                [[[UIAlertView alloc] initWithTitle:@"Error" message:@"Failed to get connection. Please try again later"  delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];

            }
            - (void)connectionDidFinishLoading:(NSURLConnection *)connection
            {
                NSString *temp = [[NSString alloc] initWithData:self.CatData encoding:NSUTF8StringEncoding];
                NSArray *jobs = [temp componentsSeparatedByString:@"||||"];
                NSMutableDictionary *temp_dict = [[NSMutableDictionary alloc] init];
                NSArray *jobInfo = [[NSArray alloc] init];
                int count = 0;
                for(int i = 1; i < [jobs count]; i++)
                {
                    jobInfo = [[jobs objectAtIndex:i] componentsSeparatedByString:@"||"];
                    @try {

                        temp_dict = [[NSMutableDictionary alloc]init];
                        [temp_dict setObject:[jobInfo objectAtIndex:0] forKey:@"Category"];
                        [self.Category_Array addObject:temp_dict];

                        //            NSDictionary *tempfile = [self.Category_Array objectAtIndex:i - 1];
                        //            [[[UIAlertView alloc] initWithTitle:@"Added to Cat" message:[tempfile objectForKey:@"Category"] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];

                        count++;
                    }
                    @catch (NSException *exception) {

                        [[[UIAlertView alloc] initWithTitle:@"Exception Thrown" message:exception.reason delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];
                    }
                }
                [_Category_Table reloadData];
            }

            //#pragma mark - Table view data source

            - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
            {

                // Return the number of sections.
                return 1;
            }

            - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
            {
                // Return the number of rows in the section.
                return [self.Category_Array count];
            }

            - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
            {
                static NSString *cellIdentifier = @"Cateogry_Cell";
                Cateogry_Cell * cell = (Cateogry_Cell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

                if(cell == nil) {
                    cell = [[Cateogry_Cell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
                }

                NSDictionary *temp = [self.Category_Array objectAtIndex:[indexPath row]];
                cell.Category_Cell_Label.text = [temp objectForKey:@"Category"];

                //[[[UIAlertView alloc] initWithTitle:@"In Table Function" message:[temp objectForKey:@"Category"] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];

                return cell;
            }

            -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
            {
                if ([[segue identifier] isEqualToString:@"Cat_Cell_Push"])
                {
                    JobList_Table *DetailController = [segue destinationViewController];
                    NSIndexPath *MyIndexPath = [_Category_Table indexPathForSelectedRow];
                    int row = [MyIndexPath row];
                    DetailController.JobList_Array = @[_Category_Array[row]];

                }
            }

            @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:07:04.170

略有改动：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *cellIdentifier = @"Cateogry_Cell";
        Cateogry_Cell * cell = (Cateogry_Cell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        if(cell == nil) {
            cell = [[Cateogry_Cell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        }

        NSDictionary *temp = [self.Category_Array objectAtIndex:[indexPath row]];
        cell.Category_Cell_Label.text = [temp objectForKey:@"Category"];

        //[[[UIAlertView alloc] initWithTitle:@"In Table Function" message:[temp objectForKey:@"Category"] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];

        return cell;
    } 
```

这样做，dequeue... 方法将始终返回 nil，直到实际上有一个单元格可供重用。那是当一个单元格被滚动出屏幕时。如果您希望此方法始终返回一个单元格，则将类与标识符一起注册。您可以调用 init 方法或 viewDidLoad：

```
[self.tableView registerClass:[Category_Cell class] forCellReuseIdentifier:@"Cateogry_Cell"]; 
```

同样，最好为此定义一个常数。

# javascript - 按 T AB 键 自动归档下一个字段

> ID：14156824
> 
> 赞同：1
> 
> 时间：2013-01-04T12:01:38.467
> 
> 标签：javascript, jquery, jsf

我有一个 JSf 文件，其中有多个文本文件。我希望当我按下“TAB”键时，下一次提交之前提交的值。任何帮助或代码材料都可以帮助我提前感谢。

```
<h:column>
<f:facet name="header">             
<h:outputText value="Subno To" />               
</f:facet>
<h:inputText id="mnpSubNoTo_id1" value="#{item.subNoFrom}"/>
</h:column>

<h:column>
<f:facet name="header">             
<h:outputText value="Error Status" />               
</f:facet>
<h:inputText id="mnpErrorStatus_id1" value="#{item.subNoTo}" />
</h:column> 
```

我想在这段代码中输入文本时在字段 id = “subNoFrom” 中按 Tab 下一个字段 id="mnpErrorStatus_id1" 自动填充 id = “subNoFrom” 字段值。任何有关的帮助都将非常有用！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:50:18.413

将`onkeydown`事件添加到您的第一个`textbox`，如下所示。

```
<h:inputText id="mnpSubNoTo_id1" value="#{item.subNoFrom}" onkeydown="func(event)"/> 
```

你的`javascript`代码应该是这样的。

```
<script>
function func(e) {
    var txt1 = e.target || e.srcElement;
    var key = e.keyCode ? e.keyCode : e.charCode
    if(key == 9) {
        var value1 = txt1.value;
        var lastIndex = txt1.id.lastIndexOf(":");
        var txt2Id = txt1.id.substring(0, lastIndex) + ":mnpErrorStatus_id1";
        document.getElementById(txt2Id).value = value1;
    }
}
</script> 
```

# clojure - 在 Clojure 中使用 :let 修饰符

> ID：14156825
> 
> 赞同：7
> 
> 时间：2013-01-04T12:01:39.637
> 
> 标签：clojure

我想知道在 Clojure 中`:let`使用循环时修饰符是什么意思？`for`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T12:53:20.437

`:let`允许您定义命名值，就像 let 特殊形式允许您这样做一样：

```
(for [i (range 10) 
      :let [x (* i 2)]] 
  x) ;;=> (0 2 4 6 8 10 12 14 16 18) 
```

相当于：

```
(for [i (range 10)] 
  (let [x (* i 2)] 
  x)) ;;=> (0 2 4 6 8 10 12 14 16 18) 
```

`:when`与（或）结合使用时除外`:while`：

```
(for [i (range 10) 
          :let [x (* i 2)]
          :when (> i 5)] 
      x) ;;=> (12 14 16 18)

(for [i (range 10)] 
  (let [x (* i 2)] 
    (when (> i 5) x))) ;;=> (nil nil nil nil nil nil 12 14 16 18) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:54:06.750

您可以使用`:let`在列表推导中创建绑定，例如`let`.

[引用clojure 文档](http://clojuredocs.org/clojure_core/clojure.core/for)的示例：

```
user=> (for [x [0 1 2 3 4 5]
             :let [y (* x 3)]
             :when (even? y)]
         y)
(0 6 12) 
```

诀窍是您现在可以`y`在`:while`and`:when`修饰符中使用，而不是编写类似的东西

```
user=> (for [x [0 1 2 3 4 5]
             :when (even? (* x 3))]
         (* x 3)) 
```

# jsf - Primefaces p:tabView 刷新页面后无法正常工作

> ID：14156827
> 
> 赞同：1
> 
> 时间：2013-01-04T12:01:44.777
> 
> 标签：jsf, primefaces

我单击第二个选项卡，然后使用 F5 刷新页面。然后，当我尝试打开第二个选项卡时，它没有打开。如果我先单击第一个选项卡，它就会打开。（PrimeFaces 3.2，Firefox 17.0.1）

我怎么解决这个问题？或刷新页面后如何执行此操作，打开当前选定的选项卡？

```
<p:tabView id="tabView" cache="false" activeIndex="#{tabletIdBean.currentTab}" dynamic="true"  >  
    <p:tab id="tab1" title="Godfather Part I" >  
        <h:panelGrid columns="2" cellpadding="10">  
            <p:graphicImage id="tab1Img" value="/images/godfather/godfather1.jpg" />  
            <h:outputText id="tab1Text"  
                          value="The story begins as Don Vito Corleone, the head of a New York Mafia family, oversees his daughter's wedding.  
                          His beloved son Michael has just come home from the war, but does not intend to become part of his father's business. T  
                          hrough Michael's life the nature of the family business becomes clear. The business of the family is just like the head of the family, kind and benevolent to those who give respect,  
                          but given to ruthless violence whenever anything stands against the good of the family." />  
        </h:panelGrid>  
    </p:tab>  

    <p:tab id="tab2" title="Godfather Part II">  
        <h:panelGrid columns="2" cellpadding="10">  
            <p:graphicImage id="tab2Img" value="/images/godfather/godfather2.jpg" />  
            <h:outputText id="tab2Text" value="Francis Ford Coppola's legendary continuation and sequel to his landmark 1972 film, The_Godfather, parallels the young Vito Corleone's rise with his son Michael's spiritual fall, deepening The_Godfather's depiction of the dark side of the American dream.  
                          In the early 1900s, the child Vito flees his Sicilian village for America after the local Mafia kills his family. Vito struggles to make a living, legally or illegally, for his wife and growing brood in Little Italy,  
                          killing the local Black Hand Fanucci after he demands his customary cut of the tyro's business. With Fanucci gone, Vito's communal stature grows."/>  
        </h:panelGrid>  
    </p:tab> 

</p:tabView> 
```

# ios - 地图搜索特定查询

> ID：14156830
> 
> 赞同：1
> 
> 时间：2013-01-04T12:02:03.960
> 
> 标签：ios, map, geolocation, search-engine

我有一个基于工作地图的 ios 应用程序，它以用户位置为中心并随着用户移动而移动。我希望为其添加功能，以便在打开地图时，它会在最近的“屠宰场”所在的位置放置大头针。我找不到这种“搜索”查询的示例。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:38:15.830

有两种方法 1）查询提供这些结果的 Web API（即 factual.com） 2）将查询转发到本地 Google 地图 SDK（几十兆字节）

# android - 连接时 SQLite 是否将整个 db 文件加载到内存中？

> ID：14156832
> 
> 赞同：14
> 
> 时间：2013-01-04T12:02:10.180
> 
> 标签：android, database, json, sqlite

我想知道在 android 设备中，如果数据库有很多项目，数据库效率更高，或者只是一个普通的 json 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-09-29T06:17:15.623

不，Sqlite 会通过分页读取硬盘数据。Sqlite 文档说：“为了将数据从数据库返回给用户，例如作为 SELECT 查询的结果，SQLite 必须在某些时候从数据库文件中读取数据。通常，数据是从数据库文件中读取的对齐的页大小字节块。"

链接：[https ://www.sqlite.org/fileio.html](https://www.sqlite.org/fileio.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:06:09.303

当“连接”到 SQLite 数据库时，有一个选项是使用`memory`而不是`filesystem`作为存储。

但它仅在创建新数据库时使用，因此内存数据库中的“新”将为空。当您想利用 SQL （如对大量数据进行索引和查询）时，这很有用。

不幸的是，从文件系统复制到内存（反之亦然）不是 SQLite 的功能。这是一种设计选择，因为 SQLite 文件必须由您（或其他人）锁定以进行并发控制。

通常`DSN`连接到 SQLite 数据库的 a 看起来像这样`'sqlite:/path/to/file.sqlite'`。对数据库的访问控制由访问文件系统权限提供。在内存数据库的情况下，`DSN`将如下所示`'sqlite::memory'`。

# asp.net - 如何初始化 SimpleMembershipProvider？

> ID：14156835
> 
> 赞同：1
> 
> 时间：2013-01-04T12:02:14.063
> 
> 标签：asp.net, sql-server, asp.net-mvc, asp.net-membership, database-connection

我想访问[`SimpleMembershipProvider`](http://msdn.microsoft.com/en-us/library/gg569035%28v=vs.111%29.aspx)诸如[`ValidateUser`](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider.validateuser%28v=vs.111%29.aspx)方法之类的全部功能。

因此，根据其[文档](http://msdn.microsoft.com/en-us/library/gg569035%28v=vs.111%29.aspx)，我不应该调用`WebSecurity.InitializeDatabaseConnection()`初始化，而是启用标准成员资格和角色提供者。

**我的问题是：**如何初始化 SimpleMembershipProvider 类

**To finally:**可以访问全部功能`SimpleMembershipProvider`

或者如果有更好的解决方案，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:03:33.863

> 如何初始化 SimpleMembershipProvider 类

如果您查看默认的 ASP.NET MVC 4 Internet 应用程序模板，则 AccountController 使用该`[InitializeSimpleMembership]`属性进行修饰。这就是它在此示例中的初始化方式。这意味着您一旦通过帐户控制器就可以使用它，而不是之前。如果您想在身份验证之前使用您的会员提供商，您可以在您的`Application_Start`方法中执行相同的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T18:54:37.853

如果您要将 合并`InitializeSimpleMembershipAttribute`到 中，`Global.asax.cs` `Application_Start`以便在`SimpleMembershipProvider`不调用任何`AccountController`路由的情况下对其进行初始化...

...它可能看起来像这样：[http ://aaron-hoffman.blogspot.com/2013/02/aspnet-mvc-4-membership-users-passwords.html](http://aaron-hoffman.blogspot.com/2013/02/aspnet-mvc-4-membership-users-passwords.html)

```
// The using below is needed for "UsersContext" - it will be relative to your project namespace
using MvcApplication1.Models;

using System;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Threading;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;
using WebMatrix.WebData;

namespace MvcApplication1
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class MvcApplication : System.Web.HttpApplication
    {
        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
            AuthConfig.RegisterAuth();

            // Ensure ASP.NET Simple Membership is initialized only once per app start
            LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
        }

        private static SimpleMembershipInitializer _initializer;
        private static object _initializerLock = new object();
        private static bool _isInitialized;

        private class SimpleMembershipInitializer
        {
            public SimpleMembershipInitializer()
            {
                Database.SetInitializer<UsersContext>(null);

                try
                {
                    using (var context = new UsersContext())
                    {
                        if (!context.Database.Exists())
                        {
                            // Create the SimpleMembership database without Entity Framework migration schema
                            ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                        }
                    }

                    WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
                }
                catch (Exception ex)
                {
                    throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
                }
            }
        }
    }
} 
```

# android - 动画淡入淡出

> ID：14156837
> 
> 赞同：30
> 
> 时间：2013-01-04T12:02:25.073
> 
> 标签：android, android-animation

使用此代码我只有淡入，我也在寻找如何添加淡出。我添加了另一个名为“fadeout”的 xml，但我无法将它集成到我的代码中。

```
ImageView imageView = (ImageView)findViewById(R.id.imageView);
Animation fadeInAnimation = AnimationUtils.loadAnimation(this, R.anim.fadein);
imageView.startAnimation(fadeInAnimation);

button1.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        imageView.startAnimation(fadeInAnimation);
    }
} 
```

淡入淡出.xml

```
<?xml version="1.0" encoding="UTF-8"?>
  <set xmlns:android="http://schemas.android.com/apk/res/android">
    <alpha android:fromAlpha="0.0" android:toAlpha="1.0" 
     android:interpolator="@android:anim/accelerate_interpolator" 
   android:duration="Your Duration(in milisecond)"
    android:repeatCount="infinite"/>
 </set> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-08-27T20:00:21.700

这是我的解决方案。它使用 AnimatorSet。AnimationSet 库有太多问题，无法正常工作。这提供了淡入和淡出之间的无缝和无限过渡。

```
public static void setAlphaAnimation(View v) {
    ObjectAnimator fadeOut = ObjectAnimator.ofFloat(v, "alpha",  1f, .3f);
    fadeOut.setDuration(2000);
    ObjectAnimator fadeIn = ObjectAnimator.ofFloat(v, "alpha", .3f, 1f);
    fadeIn.setDuration(2000);

    final AnimatorSet mAnimationSet = new AnimatorSet();

    mAnimationSet.play(fadeIn).after(fadeOut);

    mAnimationSet.addListener(new AnimatorListenerAdapter() {
        @Override
        public void onAnimationEnd(Animator animation) {
            super.onAnimationEnd(animation);
            mAnimationSet.start();
        }
    });
    mAnimationSet.start();
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-04T12:29:29.663

这是一个很好的例子**`Fade In and Fade Out Animation with Alpha Effect`**

[动画淡入淡出](http://android-er.blogspot.in/2012/02/animate-fade-infade-out-by-changing.html)

**更新 ：**

检查这个[答案](https://stackoverflow.com/a/6822116/1160282)可能对你有帮助

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-09-28T17:10:59.040

我一直在 Kotlin 工作（推荐给大家），所以语法可能有点不对劲。我所做的只是简单地调用：

```
v.animate().alpha(0f).duration = 200 
```

我认为，在Java中，它将是以下内容：

```
v.animate().alpha(0f).setDuration(200); 
```

尝试：

```
private void hide(View v, int duration) {
    v.animate().alpha(0f).setDuration(duration);
}

private void show(View v, int duration) {
    v.animate().alpha(1f).setDuration(duration);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-21T08:38:12.383

根据文档 [AnimationSet](http://developer.android.com/reference/android/view/animation/AnimationSet.html)

> 表示应该一起播放的一组动画。每个单独动画的变换组合在一起成为一个变换。如果 AnimationSet 设置了其子级也设置的任何属性（例如，duration 或 fillBefore），则 AnimationSet 的值将覆盖子级值

```
AnimationSet mAnimationSet = new AnimationSet(false); //false means don't share interpolators 
```

> 如果此集中的所有动画都应使用与此 AnimationSet 关联的插值器，则传递 true。如果每个动画都应该使用自己的插值器，则传递 false。

```
ImageView imageView= (ImageView)findViewById(R.id.imageView);
Animation fadeInAnimation = AnimationUtils.loadAnimation(this, R.anim.fade_in);
Animation fadeOutAnimation = AnimationUtils.loadAnimation(this, R.anim.fade_out);
mAnimationSet.addAnimation(fadeInAnimation);
mAnimationSet.addAnimation(fadeOutAnimation);
imageView.startAnimation(mAnimationSet); 
```

我希望这能帮到您。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-08T16:41:44.050

我们可以简单地使用：

```
public void animStart(View view) {
    if(count==0){
        Log.d("count", String.valueOf(count));
        i1.animate().alpha(0f).setDuration(2000);
        i2.animate().alpha(1f).setDuration(2000);
        count =1;
    }
    else if(count==1){
        Log.d("count", String.valueOf(count));
        count =0;
        i2.animate().alpha(0f).setDuration(2000);
        i1.animate().alpha(1f).setDuration(2000);
    }
} 
```

其中 i1 和 i2 在 onCreateView() 中定义为：

```
 i1 = (ImageView)findViewById(R.id.firstImage);
    i2 = (ImageView)findViewById(R.id.secondImage); 
```

count 是一个初始化为 0 的类变量。

XML 文件是：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".MainActivity">
        <ImageView
            android:id="@+id/secondImage"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:onClick="animStart"
            android:src="@drawable/second" />
      <ImageView
          android:id="@+id/firstImage"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"

          android:onClick="animStart"
          android:src="@drawable/first" />
    </RelativeLayout> 
```

*@drawable/first*和*@drawable/second*是 res 中 drawable 文件夹中的图像。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-21T09:17:32.863

您也可以像这样在 kotlin 中执行此操作：

```
 contentView.apply {
        // Set the content view to 0% opacity but visible, so that it is visible
        // (but fully transparent) during the animation.
        alpha = 0f
        visibility = View.VISIBLE

        // Animate the content view to 100% opacity, and clear any animation
        // listener set on the view.
        animate()
                .alpha(1f)
                .setDuration(resources.getInteger(android.R.integer.config_mediumAnimTime).toLong())
                .setListener(null)
    } 
```

[在 android 文档中阅读有关此内容的更多信息](https://developer.android.com/training/animation/reveal-or-hide-view)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-20T08:04:25.623

今天，我被这个问题困住了。这对我有用：

```
 @JvmStatic
    fun setFadeInFadeOutAnimation(v: View?) {
        val fadeIn = ObjectAnimator.ofFloat(v, "alpha", 0.0f, 1f)
        fadeIn.duration = 300
        val fadeOut = ObjectAnimator.ofFloat(v, "alpha", 1f, 0.0f)
        fadeOut.duration = 2000

        fadeIn.addListener(object : AnimatorListenerAdapter(){
            override fun onAnimationEnd(animation: Animator?) {
                fadeOut.start()
            }
        })
        fadeIn.start()
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-31T16:11:27.573

请尝试以下代码重复淡出/淡入动画

```
AlphaAnimation anim = new AlphaAnimation(1.0f, 0.3f);
    anim.setRepeatCount(Animation.INFINITE);
    anim.setRepeatMode(Animation.REVERSE);
    anim.setDuration(300);
view.setAnimation(anim); // to start animation
view.setAnimation(null); // to stop animation 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-02T12:03:16.823

FOR FADE 将第一行添加到您的动画对象中。

```
.animate().alpha(1).setDuration(2000); 
```

例如[![我用了 LottieAnimation](../Images/6ff75365f7ee6b3537991b148d73667b.png)](https://i.stack.imgur.com/WxHy2.png)

# javascript - 如何防止 Angular JS 上的属性更改

> ID：14156838
> 
> 赞同：1
> 
> 时间：2013-01-04T12:02:30.080
> 
> 标签：javascript, angularjs

我在我的项目中使用 AngularJs，并且我的 viewModel 上有一个属性，它连接到下拉列表（< select >）

该下拉菜单默认选择一个空值，我想要的是防止用户在选择其他值后选择该空值。

我开始关注 $watch，但我不知道是否有某种方法可以取消“更改该属性的 oof”，如下所示：

```
$scope.$watch('myProp', function (newVal, oldVal, scope) {
    if (newVal) { scope.preventDefault(); }
} 
```

任何想法，这是基本想法，在更高级的开发中，我需要询问用户确认。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:54:23.597

您可以添加`ng-required`到选择。如果模型没有初始值，则将添加一个空选项，并在更改为有效值时删除该空选项

**编辑 jsFiddle** [以](http://jsfiddle.net/KutTY/11/)恢复到以前的值并包含[ng-change](http://docs.angularjs.org/api/ng.directive:ngChange)指令。

从文档：

> 当值更改来自模型时，不会评估表达式。

这对于不干扰更改侦听器并在恢复`$apply`函数中的旧值时创建无限循环很有用

**控制器**

```
$scope.options = [{value: 'abc'},{value: 'def'}];

var confirmDialog = function(newVal, yes, no) {
    // obviously not a good way to ask for the user to confirm
    // replace this with a non blocking dialog

    //the timeout is only for the confirm since it's blocking the angular $digest
    setTimeout(function() {
        c = confirm('Is it ok? [' + newVal.value + ']');
        if(c) {
            yes();
        }
        else {
            no();
         }
    }, 0);
};

//Asking for confirmation example
function Ctrl($scope) {
    $scope.options = [{value: 'abc'},{value: 'def'}];

    $scope.select = undefined;
    var oldSelect = undefined;
    $scope.confirmChange = function(select) {
        if(oldSelect) {
            confirmDialog(select,
                 function() {
                    oldSelect = select;
                 },
                 function() {
                    $scope.$apply(function() {$scope.select = oldSelect;});
                });
        }
        else {
            oldSelect = select;
        }
    }
} 
```

**模板**

```
<div ng-controller="Ctrl">
  <select ng-model="select" ng-options="o.value for o in options"
          ng-required ng-change="confirmChange(select)">
  </select>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:58:19.483

> 我想要的是防止用户在选择其他值后选择该空值

只要您最初没有为 ng-model 属性分配值，这应该会自动为您发生。因此，使用`<select>`如下所示，不要在控制器中初始化 $scope.selected_year：

```
<select ng-model="selected_year" ng-options="year for year in years"></select> 
```

当列表最初显示时，Angular 会在 HTML 中添加这样的选项，因为 $scope.selected_year 当前没有设置为有效的选项/值：

```
<option value="?" selected="selected"></option> 
```

选择有效选项后，该选项将神奇地消失，因此用户将无法再次选择它。试试这个[小提琴](http://jsfiddle.net/mrajcok/EJ5Cf/)。

如果 ng-model 属性在首次显示选择列表时已经分配了一个有效值，那么您可以将控制器函数分配给[未记录](https://stackoverflow.com/questions/14700325/what-are-the-undocumented-features-of-angular)的ng-change 参数：

```
<select ... ng-change="preventUserFromDoingXzy()"> 
```

在函数 preventUserFromDoingXzy() 中，您可以执行您需要执行的操作来控制用户可以选择的内容，或修改模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T20:07:58.740

可能最简单、最干净的做法是添加一个初始选项并`disabled`对其进行设置：

```
<option value="?" selected="selected" disabled></option> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-04T12:38:27.753

实际上，删除空值更容易。假设您有一个**选项列表**：

```
$scope.options = [{value: ''}, {value: 'abc'},{value: 'def'}]; 
```

和一个`select`：

```
<select ng-model="select" ng-options="o.value for o in options"></select> 
```

然后`$watch`是模型：

```
$scope.$watch('select', function(value) {
    if (value && value !== '') {
        if ($scope.options[0].value === '') {
            $scope.options = $scope.options.slice(1);
        }
    }
}, true); 
```

[在这里](http://jsfiddle.net/asgoth/KutTY/)查看它的实际应用。

**PS 不要忘记 $watch 中的 objectEquality 参数，否则它将不起作用！**

# actionbarsherlock - 包含 SurfaceView 的 ViewPager 在从 SurfaceView 滑动时不显示其他片段

> ID：14156842
> 
> 赞同：4
> 
> 时间：2013-01-04T12:02:44.860
> 
> 标签：actionbarsherlock, android-viewpager, surfaceview, android-support-library

我的设置如下。我在 ViewPager 中有一个包含 3 个片段的活动。第一个和最后一个 Fragment 通过 xml 膨胀，而中心 Fragment 是直接从 SurfaceView 派生的 Class。这个类有自己的渲染线程。

该项目使用 ActionBarSherlock 4.0.2 以及 Support Library V4+。

**问题：** 当显示 SurfaceView 并且我滑动到其他片段之一时，这些片段不会在过渡期间呈现。IOW 而不是在其他 Fragments 中滚动，SurcaceView 会留下先前渲染的伪影（涂抹）。转换完成后，将显示目标 Fragment。从外部 Fragments 之一滑动到中心的 SurfaceView 可以按预期工作。

**可能相关的问题：** 当使用 ActionBar 中的选项卡执行转换而不是滑动目标时 Fragments 根本不呈现。尽管没有呈现任何内容，但控件仍处于活动状态。例如，按下（不可见）按钮会导致指定的操作。这会导致刷新使视图可见。

我没有发布源代码，而是将其全部放在[GitHub 上](https://github.com/QbertMF/QTile)

我已经尝试了很多来找到行为的根本原因，但无济于事。

*   在中间使用另一个非 SurfaceView 片段可以正常工作。

*   将 SurfaceView 包装在 LinearLayout 视图中并没有什么不同。

*   关闭 Thread 和 SurfaceView 内的所有自定义绘图均无效。

欢迎任何想法，建议和想法。

# c++ - 为什么这是按值调用？

> ID：14156848
> 
> 赞同：0
> 
> 时间：2013-01-04T12:02:55.107
> 
> 标签：c++, pointers, reference

这是我的问题：

```
/**
* Example of the book:
* C++ Templates page 17/18
*/

#include <iostream>
#include <cstring>
#include <string>

// max of two values of any type (call by reference)
template <typename T>
inline T const& max (T const& a, T const& b) {
    return a < b ? b : a;
}

// max of two C-strings (call by value) 
inline char const* max (char const* a, char const* b) {
    // ??? Creates this a new temporary local value that may be returned?
    // I can't see where the temporary value is created!
    return std::strcmp(a,b) < 0 ? b : a;
}

// max of three values of any type (call by reference)
template <typename T>
inline T const& max (T const& a, T const& b, T const& c) {
    return max (max(a,b),c); // warning "error", if max(a,b) uses call-by-value
                             // warning:  reference of temp value will be returned

int main() {
    // call by reference 
    std::cout << ::max(7, 42, 68) << std::endl;

    const char* s1 = "Tim";
    const char* s2 = "Tom";
    const char* s3 = "Toni";
    // call the function with call by value
    // ??? Is this right?
    std::cout << ::max(s1,s2) << std::endl;

    std::cout << ::max(s1, s2, s3) << std::endl;
} 
```

C 字符串的函数 max 中的临时局部值在哪里？

函数有两个指针，为什么是按值调用呢？

对不起，我认为这是一个非常愚蠢的问题，但我不明白。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:06:05.460

> C 字符串的函数 max 中的临时局部值在哪里？

以下：

```
return std::strcmp(a,b) < 0 ? b : a; 
```

相当于：

```
const char *ret = std::strcmp(a,b) < 0 ? b : a;
return ret; 
```

我希望有问题的“临时本地值”是`ret`.

> 函数有两个指针，为什么是按值调用呢？

每个 C 字符串由 表示`const char*`，并按`const char*`值传递。这意味着如果函数要修改`a`或`b`（即指针本身），则调用者将看不到修改。

# ember.js - 将 Ember.Map 绑定到 Ember.TextField 值

> ID：14156851
> 
> 赞同：1
> 
> 时间：2013-01-04T12:03:13.480
> 
> 标签：ember.js

如何将 Ember Map 值绑定到`TextField`值。假设我有这个配置：

```
App.AppsController = Em.Controller.extend({
    selections: null
});

App.AppsRoute = Ember.Route.extend({
    setupControllers: function(controller, model) {
        controller.set('selections', Ember.Map.create());

    }
}); 
```

在我的模板中：

```
{{view Ember.TextField valueBinding="bindingToMap"}} 
```

我试图从我的地图中找到钥匙在`valueBinding="controller.selections.somekey"`哪里。`somekey`但是，该值永远不会受到约束。请注意，最初地图是空的。这可能是问题的根源吗？

编辑：我还尝试在控制器中使用带有整数值的绑定并且它可以工作。因此，当我绑定更复杂的数据结构（例如 Map）时，问题就来了。我在解释如何绑定地图的文档中找不到任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:06:44.300

警告：我自己对 Ember 还很陌生。

查看 Ember.Map 的实现，我认为您目前（在 1.0.0-pre2 中）不能这样做。Ember.Map 实现`create`,`get`和`set`, 但*不是*普通的 Ember 对象。因此，除其他外，地图中的“属性”并不是真正的属性，并且没有可观察的支持。车把的实现很大程度上依赖于可观察的支持，所以我认为你正在做的事情是行不通的。

如果我错了，有人纠正我，但这是我在 1.0.0-pre2 代码中看到的内容：

```
var Map = Ember.Map = function() {
  this.keys = Ember.OrderedSet.create();
  this.values = {};
};

/**
  @method create
  @static
*/
Map.create = function() {
  return new Map();
};

Map.prototype = {
  /**
    Retrieve the value associated with a given key.

    @method get
    @param {anything} key
    @return {anything} the value associated with the key, or undefined
  */
  get: function(key) {
    var values = this.values,
        guid = guidFor(key);

    return values[guid];
  },
... 
```

重点是，它实现了自己的`get`（和`create`）而不是扩展 Ember.Object ......所以没有可观察的支持。虽然如果`reopen`晚点什么的，我可能会错过它。

编辑：

此外，并不是您真正要求的，但是如果您正在构建一个依赖于某个键存在的接口，那么您真的应该定义您自己的模型类，该模型类具有这些键作为属性。如果它们“未设置”，您仍然可以将它们设置为 null。如果您还需要设置任意键的能力，请将您的属性之一设为 Ember.Map 并调用它`otherProperties`或其他东西，然后将它们放在那里。但是如果你的视图依赖于一个已知的键，它应该是一个定义的属性。

# operator-overloading - 添加新的赋值运算符

> ID：14156853
> 
> 赞同：2
> 
> 时间：2013-01-04T12:03:20.123
> 
> 标签：operator-overloading, variable-assignment, smalltalk, pharo, squeak

我开始使用 smalltalk，我正在尝试添加一个新的赋值运算符`:>`。

pharo 中使用的当前运算符不是选择器，因此我开始研究`_`可以为分配启用下划线的类 Scanner。我试图以类似的方式做到这一点，但没有奏效。

您对我如何实现这一目标有任何想法或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:31:39.670

首先，看一下 Method `Scanner>>#xColon`。只要在输入中遇到冒号，就会调用此方法。通过将以下代码段添加到方法的顶部，您可以使其检测到您的新分配令牌`:>`：

```
aheadChar = $> ifTrue: [
  self step.
  tokenType := #leftArrow.
  self step.
  ^ token := #':=' ] 
```

这样`:>`的行为与正常分配完全相同。通过自定义`tokenType`，`token`您可以将新的赋值运算符传递给解析器（参见`Parser>>#expression`和`Parser>>#assignment:`）并构建不同的 AST（即实现不同的执行行为）。

如果您对更大的灵活性感兴趣，您可能想看看[Helvetia](http://scg.unibe.ch/research/helvetia)。Helvetia 是 Pharo 的语言工作台，允许您修改宿主语言并以更加模块化的方式调整工具。分布 ( ) 中包含的[示例](http://scg.unibe.ch/research/helvetia/examples#45069628)`CUSwapExample`之一是向 Smalltalk 添加了两个新的赋值运算符。

# mdx - 在 MDX 中组合 TOPCOUNT 和 BOTTOMCOUNT 结果集

> ID：14156860
> 
> 赞同：1
> 
> 时间：2013-01-04T12:04:04.417
> 
> 标签：mdx, olap, bids

我是 MDX 的新手，并且有一个简单的要求，用 SQL 很容易做到，但我想用 MDX 来完成。

我想组合 2 个查询的结果，所以在查询多维数据集时，我只发送 1 个查询。

```

在列上选择 topcount( [Fact].[Year].children, 1,[Measures].[MoneyIn])
来自 [立方体]  

```

还有这个 MDX 查询，在几年内获得最少的钱。

```

在列上选择 bottomcount( [Fact].[Year].children, 1,[Measures].[MoneyIn])
来自 [立方体]  

```

有没有一种简单的方法可以使用 MDX 完成此任务？理想情况下，我会有一些东西：

```
最大值最小值
10k -10k

```

谢谢！所有帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:18:27.977

您可以用几种不同的方式编写查询。这将计数放在一列中：

```
SELECT [Measures].[MoneyIn] ON COLUMNS,
{TOPCOUNT([Fact].[Year].children,1, [Measures].[MoneyIn]),
BOTTOMCOUNT([Fact].[Year].children,1, [Measures].[MoneyIn])} ON ROWS
FROM [Cube] 
```

这更接近您的输出，但没有命名列

```
SELECT [Measures].[MoneyIn] *
       {TOPCOUNT([Fact].[Year].children,1, [Measures].[MoneyIn]),
        BOTTOMCOUNT([Fact].[Year].children,1, [Measures].[MoneyIn])
       } ON COLUMNS
FROM [Cube] 
```

# php - 使用带有 PHPUnit 模拟对象的 get_class 测试代码

> ID：14156868
> 
> 赞同：7
> 
> 时间：2013-01-04T12:04:27.293
> 
> 标签：php, phpunit

使用 PHPUnit 和模拟对象，我正在尝试测试一些`get_class`用于确定对象是否包含在过滤器中的代码。

这是要测试的类：

```
class BlockFilter implements FilterInterface
{
    private $classes;

    public function __construct(array $classes = array())
    {
        $this->classes = $classes;
    }

    public function isIncluded(NodeTraversableInterface $node)
    {
        if (Type::BLOCK != $node->getDocumentType()) {
            return false;
        }

        if (! empty($this->classes)) {
            /*** HERE IS THE PROBLEM: ***/
            return in_array(get_class($node), $this->classes);
        }

        return true;
    }
} 
```

这是我的单元测试中的方法：

```
public function testIfContainerBlockIsIncluded()
{
    $containerBlock = $this->getMock('Pwn\ContentBundle\Document\ContainerBlock');
    $containerBlock->expects($this->any())->method('getDocumentType')->will($this->returnValue(Type::BLOCK));

    $filter = new BlockFilter(array('Pwn\ContentBundle\Document\ContainerBlock'));
    $this->assertTrue($filter->isIncluded($containerBlock));
} 
```

模拟对象`$containerBlock`的行为类似于真实对象`Pwn\ContentBundle\Document\ContainerBlock`；甚至使用代码的代码`instanceof`（因为 PHPUnit 使它成为真正类的子类，我相信）。

正在测试的代码`get_class`用于获取类的字符串值并将其与预期的类名数组进行比较。不幸的是，对于模拟对象，get_class 返回如下内容：

```
Mock_ContainerBlock_ac231064 
```

（每次调用都会更改 _ac231064 后缀）。

这会导致我的测试失败，那么我的选择是什么？

*   重新编写代码以避免使用 get_class？这意味着在尝试编写可测试代码时不应使用 get_class。
*   使用 ContainerBlock 类的真实实例而不是模拟？这意味着我们同时有效地测试了这两个类。
*   你们都会建议的其他一些非常聪明的技巧？？？;)

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:11:47.097

在测试中传递 Mock 的类名：

```
new BlockFilter(array(get_class($this->containerBlock))); 
```

# c++ - 字符串类 c++ 堆错误

> ID：14156869
> 
> 赞同：-3
> 
> 时间：2013-01-04T12:04:32.193
> 
> 标签：c++, string, heap-memory

我创建了自己的类字符串，当我编译我的代码时它有两个属性 buff 来存储字符串和长度，但如果我使用它作为对象，我会得到很多错误错误的原因是什么，我该怎么做防止他们谢谢

```
 #include <iostream>
using namespace std;
class String
{
private:
    int length;
    char *buff;
public:

    String operator=(String &);
    String();
    String(String &);
    String(char *);
    int size(char *);
    void copy(char *);
    char getvalue(int);
    char *getbuff(){return buff;}
    void setindex(char,int);
    int getlength();
    void display();
    ~String();
};

String :: String()
{
    length = 1;
    buff = 0;
}

String :: String(String &temp)
{

    length = size(temp.buff);
    buff = new char[temp.length + 1];
    copy(temp.buff);
}

String :: String(char *a)
{
    length = size(a);
    buff = new char [length + 1];
    copy(a);
}

int String :: size(char *a)
{
    int i;
    for(i = 0;a[i] != '\0';i++)
    {
    }
    return i;
}
void String :: copy(char *a)
{
    delete []buff;
    int i;
    length = size(a);
    buff = new char[length + 1];
    for (i=0;i<length;i++)
    {
        buff[i] = a[i];
    }
    buff[i] = '\0';
}

char String :: getvalue(int index)
{
    return buff[index];
}

void String :: setindex(char value,int index)
{
    buff[index] = value;
}

int String :: getlength()
{
    return length;

}
void  String :: display()
        {
            for (int i = 0;i<length;i++)
                cout << buff[i];
        }

String :: ~String()
{
    delete []buff;
}

String String :: operator=(String &temp)
{
    copy(temp.buff);
    return *this;
}

void main()
{
    String a("r");
    String b("ee");
    b = a;
    b.display();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:15:44.377

您没有遵循[三的规则，](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)下面的函数中有一个副本，这会导致崩溃。

```
void copy(String a) 
```

但是，您只打算复制数据：

```
b.copy(a.getbuff()); 
```

您还可以将 a 的引用传递给复制函数：

```
void copy(String& a);
b.copy(a); // it should be safe now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:12:00.197

您的主要错误是您没有重载复制构造函数。

您的课程还有其他问题，但那是您可能遇到的问题。

当您调用`b.copy(a)`时，该函数正在接受一个字符串`by value`。这意味着它会复制。

默认的复制构造函数逐个复制成员。并且您的两个成员都将具有与 相同的指针`buff`。两者都会尝试删除它，从而导致双重删除。

有关您的错误的更多信息，请参阅[三规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

# ruby-on-rails - 常青树+茉莉花-jquery

> ID：14156871
> 
> 赞同：1
> 
> 时间：2013-01-04T12:04:53.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, jasmine, jasmine-jquery

我想利用 jasmine-jquery 的新 json 固定装置能力，但无法让它工作。我有一个用于 JS 测试的常青树 Rails 3.2 应用程序。正如[https://github.com/velesin/jasmine-jquery](https://github.com/velesin/jasmine-jquery)的自述文件所说，将目录放在`jasmine-jquery.js`里面`spec/javascripts/helpers`会自动加载`jasmine-jquery`。

> 我将 jasmine-jquery（以及 jasmine-ajax 等其他库）放入 spec/javascripts/helpers 目录（因此它们会自动加载），并将夹具放入 spec/javascripts/fixtures 目录。

但事实并非如此。我试图将文件加载到内部`spec_helper.js`，但`require`唯一指向公共目录。

我还找到了这个答案：[https](https://groups.google.com/forum/?fromgroups=#!topic/ruby-evergreen/0Tma5RKqZB8) ://groups.google.com/forum/?fromgroups=#!topic/ruby-evergreen/0Tma5RKqZB8 但解决方案不适用于我的情况。

那么，我在哪里可以告诉 evergreen / jasmine 加载`jasmine-jquery.js`文件，以便我可以使用 loadFixtures 方法......？

# php - ios中的推送通知

> ID：14156873
> 
> 赞同：4
> 
> 时间：2013-01-04T12:05:05.660
> 
> 标签：php, ios, push-notification

我是 php 新手，在 codeigniter 中编写了推送通知的代码，但我得到了这些错误。

这是我的模型..

```
function sendmessage($appid, $deviceid, $status, $message)
{

    $deviceToken = '0f744707bebcf74f9b7c25d48e3358945f6aa01da5ddb387462c7eaf61bbad78';

    $message = 'My first push notification!';

    $ctx = stream_context_create();
    stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
    //stream_context_set_option($ctx, 'ssl', 'passphrase', 'essar@123');

    $fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT, $ctx);

    if (!$fp){
        exit("Failed to connect: $err $errstr" . PHP_EOL);
              }
          else {
          print "Connection OK/n";
               }
    echo 'Connected to APNS' . PHP_EOL;

    $body['aps'] = array(
        'alert' => $message,
        'sound' => 'default'
        );
    $payload = json_encode($body);
    $msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;
    $result = fwrite($fp, $msg, strlen($msg));

    if (!$result)
        echo 'Message not delivered' . PHP_EOL;
    else
        echo 'Message successfully delivered' . PHP_EOL;
    fclose($fp);

    $data = array(
    'message' => $this->message . 'add',
    'appid' => $this->appid,
    'deviceid' => $this->deviceid,
    'status' => $status
            );
    $this->sendmessage($data); 
```

错误信息：

> 消息：stream_socket_client()：SSL 操作失败，代码为 1。OpenSSL 错误消息：错误：14094410：SSL 例程：SSL3_READ_BYTES:sslv3 警报握手失败消息：stream_socket_client()：无法启用加密消息：stream_socket_client()：无法连接到ssl://gateway.sandbox.push.apple.com:2195（未知错误）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-07T11:31:12.877

一旦您为开发和分发创建了临时证书和推送通知。按照生成**推送通知的步骤**

为了使用您生成的证书，您需要创建一个**PEM 文件**来存储您的 Apple 推送通知服务 SSL 证书和您的私钥。您可以从终端创建 PEM 文件。

导航到包含您之前生成的证书和密钥的目录并执行以下步骤。此处的文件名反映了作为本课一部分生成的证书的名称。您必须根据您提供的证书名称更新语法。

首先创建应用程序证书 PEM 文件。您可以通过双击 aps_developer_identity.cer 证书文件，然后打开 Keychain Assistant 并将证书导出为 ap12 文件，然后将其转换为 PEM 文件，方法与将 PushNotificationApp.p12 转换为 PEM 的方式相同文件。或者，您可以使用单个命令行将 aps_developer_identity.cer 证书文件直接转换为 PEM 文件。这里我们选择单命令行选项，如下：

```
openssl x509 -inform der -outform pem -in aps_developer_identity.cer -out PushNotificationAppCertificate.pem 
```

现在创建应用程序密钥 PEM 文件，如下所示。您需要输入导入密码和 PEM 密码：

```
openssl pkcs12 -in PushNotificationApp.p12 -out PushNotificationAppKey.pem -nocerts 
```

输入导入密码：MAC 验证 OK 输入 PEM 密码：验证 - 输入 PEM 密码：

现在连接两个文件：

```
cat PushNotificationAppCertificate.pem PushNotificationAppKey.pem > PushNotificationAppCertificateKey.pem 
```

打开 Mac 终端并从包含您生成的证书的目录中执行以下行：

```
openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert PushNotificationAppCertificate.pem -key PushNotificationAppKey.pem 
```

然后，系统会要求您输入您提交的密钥的密码：

```
Enter pass phrase for PushNotificationAppKey.pem: 
```

如果一切正常，那么服务器应该会向您发送大量信息，这些信息可能类似于以下内容：

```
CONNECTED(00000003)

depth=1 /C=US/O=Entrust, Inc./OU=www.entrust.net/rpa is incorporated by reference/OU=(c) 2009 Entrust, Inc./CN=Entrust Certification Authority - L1C
verify error:num=20:unable to get local issuer certificate verify return:0
...
Key-Arg : None

Start Time: 1326899631 Timeout : 300 (sec) Verify return code: 0 (ok)
At the end of this, you can enter some text and then select the return key. We entered the text "**Hello World**".

**Hello World

closed** 
```

这完成了与服务器的通信并验证我们的证书是否有效。

[![在此处输入图像描述](../Images/e938aea667e5c3a43895dce64fc051e8.png)](https://i.stack.imgur.com/n33tf.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-21T00:23:48.037

我遇到了和你在这里提到的同样的问题。这花了一些时间和挠头才找到......

我发现纠正握手错误的解决方案是下载[委托](https://www.entrust.net/downloads/binary/entrust_2048_ca.cer)证书，并使用以下代码将其包含在流上下文中：

```
$entrustCert =  '<full path to cert>/entrust_2048_ca.cer';
stream_context_set_option($ctx, 'ssl', 'cafile', entrustCert); 
```

沙盒 APN 服务似乎确实存在间歇性连接问题。我偶尔会收到错误返回，例如：

```
Warning: stream_socket_client(): SSL: Connection reset by peer 
Warning: stream_socket_client(): Failed to enable crypto 
```

我希望这可以为某人节省时间！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-28T04:57:38.813

```
function send_iOS_notifications($device_tokens, $notification_content)
    {
        $this->load->library('apn');
        $this->apn->payloadMethod = 'enhance'; // you can turn on this method for debuggin purpose
        $this->apn->connectToPush();

                //$badge_count = $this->set_and_get_ios_active_notifications('',$device_token);

        // adding custom variables to the notification
        $this->apn->setData($notification_content);

                $message = $notification_content['message'];
                if ((strpos($message, 'http://') !== false) || (strpos($message, 'https://') !== false)) {
                    $message = "Image";
                }

        //$send_result = $this->apn->sendMessage($device_token, 'Test notif #1 (TIME:'.date('H:i:s').')', /*badge*/ 2, /*sound*/ 'default'  );
        $send_result = $this->apn->sendMessage($device_tokens, $message, /*badge*/ '', /*sound*/ 'default'  );

        if($send_result){
            log_message('debug','Sending successful');
            $result['status'] = true;
            $result['message'] = 'Sending successful';
        }
        else{
            log_message('error',$this->apn->error);
            $result['status'] = true;
            $result['message'] = $this->apn->error;
        }
        $this->apn->disconnectPush();

    } 
```

# php - PHP包含不显示图片

> ID：14156882
> 
> 赞同：0
> 
> 时间：2013-01-04T12:05:39.197
> 
> 标签：php, include

我有一个小问题。我不擅长 php，所以这可能很简单。基本上，我有几个网站，我想在它们上实现一个特定的图片。我希望通过一个脚本来控制它（连同一个超链接）。所以我所做的是：

```
 <?php include 'http://content.captive-portal.com/pd/sponsored/sponsored.php' ?> 
```

我已将此代码放在几个网站上，但它没有显示图片。为什么？可以这样做吗？我放置此脚本的页面是： [amc 链接](http://amc.captive-portal.com/manchester/menu.html)- 图像应出现在徽标下方。上面脚本中的 gif 图像。谁能帮我解决这个问题？我做错了什么？做不到吗？感谢您的帮助。

代码在这里：

```
<div id="wrapper">
        <img id="logo" src="images/logotop_m.jpg"/>
        <?php include 'http://content.captive-portal.com/pd/sponsored/sponsored.php' ?>
</div> <!--eo wrapper -->

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:08:20.757

Is the relative path causing the issue? Does the sponsored.php file make reference to the image using a complete path? (e.g.... [http://content.captive-portal.com/images/](http://content.captive-portal.com/images/).... or just images/...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:09:16.033

The reason for that is that some images are being used via relative links. Here's the logo:

```
<img id="logo" src="images/logotop_m.jpg"/> 
```

As it isn't an absolute path with a domain, it'll resolve as the following:

```
http://yourdomain.com/images/logotop_m.jpg 
```

Instead of what you're expecting:

```
http://amc.captive-portal.com/images/logotop_m.jpg 
```

Edit: Oops

I didn't notice the redirect as I opened it in a new tab - my bad. The php file itself contains this:

```
<p><a href="http://bit.ly/VzF7ds"><img src="http://content.captive-portal.com/pd/sponsored/sponsored.gif" width="480" height="80"></a></p> 
```

As it's an absolute path, it *should* be alright.

# sql - SQL：如何比较日期时间和空格

> ID：14156890
> 
> 赞同：0
> 
> 时间：2013-01-04T12:06:22.777
> 
> 标签：sql, sql-server, datetime

我有一个专栏`date`，它的类型是`datetime`带格式的`YYYY-MM-DD HH:MM:SS.000`

我的问题是某些日期有一个空格，而其他日期和时间之间有两个空格

例如。

```
2009-08-20 13:44:12.753
2009-08-20  13:44:12.753 
```

即使当我尝试比较它们时时间相同，但由于空格，它们不匹配。我尝试使用该`replace(date, ' ', '')`功能，但这不能正确保持日期时间格式`Aug2020091:44PM`

我将如何比较这些日期以忽略空格但不影响日期时间本身？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:08:44.473

why would'nt you use

```
replace(date, '  ', ' ') 
```

I mean - replace just 2 white spaces into one

( it is not clear from my code but here it on pseudo )

```
 replace(date, '[ ][ ]', '[ ]')  //where [ ] is whitespace. 
```

solution #2:

use this :

```
SELECT CAST('2009-08-20 13:44:12.753' AS DATETIME) --nevermind the spaces
SELECT CAST('2009-08-20       13:44:12.753' AS DATETIME)  --nevermind the spaces 
```

# xcode - 删除行时 tableView 显示“无结果”问题

> ID：14156892
> 
> 赞同：1
> 
> 时间：2013-01-04T12:06:41.373
> 
> 标签：xcode, tableview

当我的表格视图为空时，我输入消息“无结果”。问题是，当我有 1 行并且我想删除此行时，行数不会改变，因为我有 if 条件显示“无结果”使用行，我可以创建 bool 属性来检查是否已删除，然后如果用户删除不会向他显示“无结果”消息的这一行，但也许有人有更好的方法？

我的方法：

节数：

```
if([[[self fetchResultsController] fetchedObjects] count] == 0)
        return 1; 
```

部分中的行：

```
if([[[self fetchResultsController] fetchedObjects] count] == 0)
        return 1; 
```

细胞：

```
if([[[self fetchResultsController] fetchedObjects] count] == 0){

        [[cell textLabel] setText:@"no results"];

    }else{ //create regular or from search cell. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T22:09:56.787

我找到的最佳解决方案是制作标题而不是单元格，以避免删除和更新（核心数据）出现问题。但是如果没有行或部分，我知道的标题就不会出现。所以我用这两种方法解决它：

```
-(void) hideTitle{
    self.tableView.tableHeaderView = nil;
}

-(void) showTitle{

    self.contener = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 300, 40)];
    self.label = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 320, 40)];

    self.label.text = NSLocalizedString(@"Header for the table", @"");
    self.label.shadowOffset = CGSizeMake(0, 1);
    self.label.font = [UIFont boldSystemFontOfSize:22];
    self.label.backgroundColor = [UIColor redColor];
    [self.contener addSubview:[self label]];
    self.tableView.tableHeaderView = self.contener; 
} 
```

我把这个名为 show 的东西放在了**num_of_sections..**：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if([[[self fetchResultsController] fetchedObjects] count] == 0)
        [self showTitle];  .....} 
```

此方法在删除行时效果很好。创建新行时使用的第二种名为 hide 的方法（我将该方法放在“保存方法”中）此方法删除标题。

编辑： **另一种方式：**

当我在行数之前尝试...

```
if([[bla bla] count] == 0 && is_deleted == 0)
        return 1; 
```

也改变细胞：

```
if([[bla bla] count] == 0){

    [[cell textLabel]setText:@"no results"];
    [[cell detailTextLabel] setText:nil];

    cell.accessoryType = UITableViewCellSelectionStyleNone;
    cell.userInteractionEnabled = NO;

}else{ 

  cell.userInteractionEnabled = YES;
  cell.accessoryType = UITableViewCellSelectionStyleBlue;

 ... } 
```

问题 id 是一个删除行，所以我使用 bool 来避免在`didLoad method bool = 0;` 我`delete I insert 1 to the bool`不忘记取消此单元格的删除选项时被迷住！

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
    {
        if (editingStyle == UITableViewCellEditingStyleDelete && [[bla bla] count] != 0)
        { ... } 
```

这个解决方案的问题是它并不完美，当我删除最后一行时，只有当我再次加载表时，我的 tableView 才为空，标题似乎不是我想要的。

***如果有人有更优雅的解决方案，请告诉我，我保证将您的答案作为正确答案。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:40:30.787

**为numberOfSectionsInTableView**编写以下内容

 **```
if([[[self fetchResultsController] fetchedObjects] count] == 0)
        return 1;
else
        return [[[self fetchResultsController] fetchedObjects] count]; 
```

当您删除值时，从数组中删除对象并重新加载表。如果您遇到任何问题，请告诉我。**

# javascript - 什么可以阻止javascript计时器事件？

> ID：14156896
> 
> 赞同：0
> 
> 时间：2013-01-04T12:07:06.903
> 
> 标签：javascript, extjs

我有一个简单的 JS 计时器，它每 10 秒运行一次，应该发送一个 AJAX 请求。问题是在某些 Windows XP 机器上这个任务停止运行 - 没有 AJAX 请求被发送。它似乎成功运行了 45 分钟，然后随机停止了一段时间，然后启动并成功运行了 45 分钟......我的问题是什么可能导致这种情况发生？PC 上运行的某些服务/计划任务会阻止 JavaScript 计时器工作吗？

```
Ext.onReady(function(){

    var task = {
        run: function(){
            Ext.Ajax.request({
                url: 'test.php'
            });
        },
        interval: 10000
    };
    Ext.TaskManager.start(task);    

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:39:48.957

几个建议：

1.  尝试从`Ext.TaskManager`正常切换`setInterval`。如果这样可以解决问题，则任务管理器中可能存在错误。

2.  如果它不起作用，请尝试以下操作：

    *   继续使用间隔。记录`id`时间间隔。还要记录上次执行的时间。

    *   `setInterval`以更大的间隔启动另一个计时器，例如 1 分钟。在回调内部检查最后一次执行时间。

    *   如果是很久以前（> 30 秒），请`clearInterval`使用`id`您存储的调用并重新启动任务间隔。

3.  如果这不起作用，请尝试在单独的`<iframe>`. 如果浏览器忙于其他任务，它可以跳过调用 Interval 和 Timeout 回调。通过将它们放在一个单独的位置`<iframe>`，您可以为它们提供一个专用的事件循环，这样其他任务就不会干扰它们。

# javascript - 使用asp.net中的javascript在谷歌地图上显示机场附近

> ID：14156898
> 
> 赞同：0
> 
> 时间：2013-01-04T12:07:08.873
> 
> 标签：javascript, asp.net, google-maps

如何使用 Google Map API 按区域访问或显示感兴趣的机场。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:14:16.007

试试[地方图书馆](https://developers.google.com/maps/documentation/javascript/places)

[支持的地点类型](https://developers.google.com/places/documentation/supported_types)之一是“机场”。

改变：

```
 var request = {
    location: pyrmont,
    radius: '500',
    types: ['store']
  }; 
```

至：

```
 var request = {
    location: pyrmont,
    radius: '500',
    types: ['airport']
  }; 
```

在[这个例子中](https://developers.google.com/maps/documentation/javascript/examples/place-search)

[该更改的示例](http://www.geocodezip.com/v3_GoogleEx_place-search_airport.html)

# java - 二维机器人JAVA中的AI实现

> ID：14156899
> 
> 赞同：-5
> 
> 时间：2013-01-04T12:07:14.570
> 
> 标签：java, 2d, artificial-intelligence

我有一个学校项目，如下所示，我在地图中有一个机器人的 API 结构，地图上有墙壁和能量站，这些都是给我的。

我要做的是实现机器人的人工智能，这样他就可以在地图上覆盖尽可能远的距离，使用能量站来充电。这里的问题是机器人在地图上着陆时对地图一无所知，所以我遵循二维数组：

```
?????????????????????
?????????????????????
?????????????????????
?????????r???????????
?????????????????????
????????????????????? 
```

我可以得到初始位置，以及数组的高度和宽度，但我什么都不知道。该项目的目标是发送有关地图的最多信息。

您能否就开始提出一些建议，因为我一直在努力寻找解决方案。

![在此处输入图像描述](../Images/7d8b1c3e28ab904605ccfbb9113671ad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:12:35.453

1.  在地图上移动机器人以发现新的瓷砖
2.  实施寻路以计算到最近的能源站的距离
3.  移回最近的能源站，如果`fuel = distance to nearest energy station`
4.  探索每一块瓷砖

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:26:51.497

由于您没有可以开始的信息，因此似乎可以进行简单的深度优先搜索。我建议检查谷歌以获取有关递归深度优先搜索的一些信息。

# sharepoint - 使用下拉列表 i webpart（编辑模式）

> ID：14156900
> 
> 赞同：0
> 
> 时间：2013-01-04T12:07:16.077
> 
> 标签：sharepoint, sharepoint-2007

我正在尝试将复选框列表添加到 web 部件。在编辑模式下，将出现一个下拉列表，其中包含列表中的字段名称，所选字段将用作 web 部件中复选框列表条目的显示。

我无法找到任何有关如何使其正常工作的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:36:15.613

使用自定义`ToolPart`创建下拉属性，如下所示：

```
public class DropdownToolPart : ToolPart
{
  protected override void CreateChildControls()
  {
    DropDownList dropdownList = new DropDownList();

    // Code to add field names from SharePoint List to dropdownlist

    this.Controls.Add(dropdownList);

    base.CreateChildControls();
  }

  public override void ApplyChanges()
  {
    CheckBoxListWebPart myWebPart = 
      (CheckBoxListWebPart)this.ParentToolPane.SelectedWebPart;

    //You will need to get the selected value of the dropdown by finding it 
    //in the Controls collection.
    string selectedValue = ...    

    myWebPart.CheckBoxListDisplayField = selectedValue;
  }
} 
```

您的 WebPart 应执行以下操作以包括`ToolPart`：

```
public class CheckBoxListWebPart: WebPart
{
  public string CheckBoxListDisplayField { get; set; }      

  public override ToolPart[] GetToolParts()
  {
    ToolPart[] toolParts = new ToolPart[1];

    DropdownToolPart myToolPart = new ToolPart();
    toolParts[0] = myToolPart;

    return toolParts;
  }
} 
```

从那里你应该能够`CreateChildControls`在`CheckBoxListWebPart`. 在那里，您需要从 SharePoint 列表中加载项目，然后使用该`CheckBoxListDisplayField`值从每个项目中选择确切的字段值。

# xcode - 程序中未经处理的@

> ID：14156905
> 
> 赞同：0
> 
> 时间：2013-01-04T12:07:26.937
> 
> 标签：xcode

我创建了一个附加了 XIB 的 UIViewController 类。在不添加任何内容的情况下，编译器在@interface 行的.h 文件上告诉我“UNEXEPTED @ IN PROGRAM”，并在@end 行重复相同的错误

```
#import <UIKit/UIKit.h>

@interface iPegasoDatiCorpoCli : UIViewController

-(id)initWithStrings:(NSString *)lblcorpo1 :(NSString *)lblcorpo2 :(NSString *)lblcorpo3 :(NSString *)<nibNameOrNil :(NSBundle *)nibBundleOrNil;

@end 
```

实现这个类是为了创建一个托管单元格视图，它一直工作到现在。我还创建了一个像这个一样的新类，但从未使用过它，仍然给我同样的错误 3 Builds every 5\. 这让我头疼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:11:04.757

有错字，额外的**>**符号请检查：

```
-(id)initWithStrings:(NSString *)lblcorpo1 :(NSString *)lblcorpo2 :(NSString *)lblcorpo3 :(NSString *)<nibNameOrNil :(NSBundle *)nibBundleOrNil;
-----                                                                                                 ^ 
```

编辑：

为什么要将 6-7 个参数传递给方法。将它们包装在一个类中或传递一个字符串数组。

# marionette - 在 CompositeView 触发的构造函数中渲染集合视图？

> ID：14156906
> 
> 赞同：0
> 
> 时间：2013-01-04T12:07:28.780
> 
> 标签：marionette

我有一个复合视图，它有一个任务，它是评论。我把它放到一个 contentRegion 上来显示。单独渲染模型时，它工作正常。然而，在收集时，它的行为真的很奇怪。console.log 显示初始化函数已被触发两次。第一次是定义视图的时候

```
taskView = new MyProject.Views.Task
  model : task
  collection : comments 
```

然后我做一个`MyProject.contentRegion.show(taskView)`以渲染模型视图。之后，我只是打电话`comments.fetch()`来获取所有评论。然后问题来了，它重新初始化了我`taskView`的模板，一直抱怨 xxx 是未定义的。

有什么想法吗？我知道这很奇怪，因为我项目中的另一个 CompositeView 效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T00:32:12.657

NathanInMac，我根据您使用 itemView 的建议做了一些测试，发现了一些有趣的东西。

您的问题是否涉及嵌套复合视图？就像我的一样，但我不确定这是否会影响任何事情。

解决问题的方法是最初尝试了一个找不到 itemView 的 collectionView，因此我将 collectionView/compositeView 的 itemView 的定义移到了 collectionView（或扩展）的定义之前。

这似乎是一个有效的修复，只是复合视图的双重初始化而不是显示一些异常或错误的误导性错误。

# javascript - 如何在 JavaScript 中按类获取元素并将 aria-checked="false" 更改为 "true"？

> ID：14156908
> 
> 赞同：3
> 
> 时间：2013-01-04T12:07:30.293
> 
> 标签：javascript, getelementbyid, getattribute

我正在尝试在页面上选择多个类并将其更改`aria-checked="false"`为`aria-checked="true"`. 这是我现在使用的脚本：

```
elms=document.getElementsByClassName("d-va-p a-f-e");
for (i=0;i<elms.length;i++){
    if(elms[i].getAttribute("aria-checked")="false")
        elms[i].getAttribute("aria-checked")="true"
}; 
```

源代码如下。课程是“d-va-p afe”。

```
<div class="d-va-p a-f-e" style="-webkit-user-select: none;" role="option" tabindex="-1" aria-checked="false" id=":89">
    <div class="a-f-e" style="-webkit-user-select: none;">
        <div class="d-va-p-Fe a-f-e" style="-webkit-user-select: none;">
            <img src="https://lh4.googleusercontent.com/-FxDBvNDkbj4/AAAAAAAAAAI/AAAAAAAAAAA/q4f7Fc7OF6A/s48-c/photo.jpg" class="d-va-p-Z a-f-e">
        </div>
        <div class="a-f-e d-va-p-yda" style="-webkit-user-select: none;">
            <div class="d-va-p-Ec a-f-e" style="-webkit-user-select: none;">Herb Smith</div>
        </div>
    </div>
    <div class="d-va-p-iI-oc" style="-webkit-user-select: none;">
        <span class="a-f-e d-J-Eb-v-YA-Me" style="-webkit-user-select: none;"></span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T12:09:19.447

I see two problems. First, you're using assignment instead of comparison. So

```
if(elms[i].getAttribute("aria-checked")="false") 
```

should be:

```
if(elms[i].getAttribute("aria-checked")=="false") 
```

Second, your attempt to set the attribute's value won't work. Try this:

```
elms[i].setAttribute("aria-checked", true); 
```

# xpath - 获取给定类名的 href 描述的 Xpath 表达式

> ID：14156913
> 
> 赞同：-5
> 
> 时间：2013-01-04T12:07:43.180
> 
> 标签：xpath, href

在这个 div 类中：

```
<div class="black">
<a href="/event.aspx?425627">Vitamin</a>
<a href="/club-detail.aspx?id=3213" title="Club profile of Watergate">Watergate</a>
</div> 
```

我需要一个 Xpath 表达式来仅获取 a href 标记描述文本，在本例中为“维生素”和“水门事件”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:23:20.463

```
/div[@class='black']/a[0]/text() 
```

将返回维生素和

```
/div[@class='black']/a[1]/text() 
```

将返回水门事件。

问候

你最好先google一下。

# jquery - stopPropagation 不起作用

> ID：14156918
> 
> 赞同：0
> 
> 时间：2013-01-04T12:08:03.243
> 
> 标签：jquery

它不起作用，我需要 onclick 基础而不是基于 id 的代码，请帮助我

```
<div onclick="favTheater(id)">
<img  src="#"/> 
</div>

<script type="text/javascript">
    function favTheater(id){
        alert("dsfdsf"+id);
        var e = window.event;
        e.stopPropagation();
        e.preventDefault();
        window.location.href="http://www.google.co.in/";
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:10:45.047

您的代码存在一些问题：

*   你正在`favTheater(id)`点击点击，但你没有定义一个ID，
*   你正在使用`window.event`，它只存在于 IE 上。另请注意，那些旧的 IE 浏览器没有`stopPropagation`（IE9 附带），
*   没有理由停止传播或防止默认，因为您立即将页面替换为`http://www.google.co.in/`,
*   正如 jerome.s 所注意到的那样，因为您的 div 不在可点击元素中，所以无论如何都不会传播任何内容，
*   没有任何需要阻止的默认行为（在没有特定处理程序的情况下单击 div 不会执行任何操作），因此`preventDefault`没有用。

因此，您的代码“不起作用”，但很难定罪`stopPropagation`

# google-maps-api-3 - 单击infoBubble 内容中的函数时如何调用函数？

> ID：14156919
> 
> 赞同：-1
> 
> 时间：2013-01-04T12:08:07.497
> 
> 标签：google-maps-api-3, click, infobubble

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:35:24.280

您的问题是在 infobubble 创建和呈现之前，infobubble 中的 HTML“字符串”不是 DOM 的一部分。

这应该有效：

```
function testClick() {
  alert("clicked!");
} 
```

并在您的信息窗口/信息气泡中：

```
 var content = '<a id="test" href="javascript:testClick();">Deatils Information</a>'; 
```

# list - 在 sencha touch 中使用容器或面板中的列表

> ID：14156921
> 
> 赞同：1
> 
> 时间：2013-01-04T12:08:21.477
> 
> 标签：list, extjs, touch, containers

我正在学习煎茶触摸。我在容器中使用 xtype:'list' 时遇到问题。即它没有向我显示任何内容。我的代码是：

```
{
    xtype:'container',
    items:[
        {
            xtype: 'list',
            id: 'lists',
            fields: [{name:'name'}],
            store: {
                data: [
                    {name: 'Cowper'},
                    {name: 'Everett'},
                    {name: 'University'},
                    {name: 'Forest'}
                ]
            },
            itemTpl: '<div>{name}</div>'
        }
    ],
} 
```

请指出我错在哪里？？任何帮助都会很棒:)在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:50:11.283

我认为添加时可以解决：

```
layout: 'fit' 
```

到你的容器。此配置调整其**子**组件的大小。

[ST2 布局指南](http://docs.sencha.com/touch/2-1/#!/guide/layouts)

请注意，列表实际上是一个容器。尽量减少嵌套。
也看看[全屏](http://docs.sencha.com/touch/2-1/#!/api/Ext.Component-cfg-fullscreen)配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:19:11.673

问题出在您的代码中。试试这个 -

```
Ext.create('Ext.List', {
    fullscreen: true,
    id:'lists',
    itemTpl: '<div>{name}</div>',
    data: [
        {name: 'Cowper'},
        {name: 'Everett'},
        {name: 'University'},
        {name: 'Forest'}
    ]
}); 
```

**或者**

```
Ext.define('TestModel', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['name']
    }
});

var store = Ext.create('Ext.data.Store', {
   model: 'TestModel',
   data: [
        {name: 'Cowper'},
        {name: 'Everett'},
        {name: 'University'},
        {name: 'Forest'}
   ]
});

Ext.create('Ext.List', {
   fullscreen: true,
   id:'lists',
   itemTpl: '<div>{name}</div>',
   store: store   
}); 
```

# sql - oracle : 动态列名

> ID：14156928
> 
> 赞同：4
> 
> 时间：2013-01-04T12:09:03.660
> 
> 标签：sql, oracle, oracle10g, pivot

> **可能重复：**
> [Oracle 行到列的转换](https://stackoverflow.com/questions/9582218/oracle-rows-to-column-transformation)

我真正的问题就是这样，但有许多相互关联的表。所以，我只是创建了一个例子，所以假设如果这个问题得到解决，我真正的问题就会得到解决。这是我的桌子：

**tbl_products**

```
 tp_id | tp_name 

     1      apple

     2      mango

     3      pineapple 
```

**tbl_sales**

```
 ts_id | ts_location | ts_tp_id | ts_sales

       1        NY              2           5
       2        LN              2           10  
       3        QL              1           25          
       4        QL              3           20
       5        LN              3           35
       6        NY              3           50
       7        NY              1           100 
```

如果我有这两个表，tbl_products 和 tbl_sales，如何创建一个具有如下动态列的查询：

```
 sales_location | apple | mango | pineapple 
      NY           100       5        50 
```

其中苹果、芒果和菠萝应该有按位置销售的总数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:22:51.190

由于您使用的是 Oracle10g，因此没有`PIVOT`函数，因此您必须使用带有`CASE`语句的聚合函数来执行这种类型的转换。

如果这些值是提前知道的，那么您可以在静态版本中对它们进行硬编码：

```
select s.ts_location,
  sum(case when p.tp_name = 'apple' then s.ts_sales else 0 end) Apple,
  sum(case when p.tp_name = 'mango' then s.ts_sales else 0 end) Mango,
  sum(case when p.tp_name = 'pineapple' then s.ts_sales else 0 end) Pineapple
from tbl_sales s
inner join tbl_products p
  on s.ts_tp_id = p.tp_id
group by s.ts_location 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/81296/2)

但是，如果您的值事先不知道，那么您必须实现动态 sql，并且在 Oracle 中您将需要为此使用一个过程：

```
CREATE OR REPLACE procedure dynamic_pivot(p_cursor in out sys_refcursor)
as
    sql_query varchar2(1000) := 'select s.ts_location ';

    begin
        for x in (select distinct tp_name from tbl_products order by 1)
        loop
            sql_query := sql_query ||
                ' , sum(case when p.tp_name = '''||x.tp_name||''' then s.ts_sales end) as '||x.tp_name;

                dbms_output.put_line(sql_query);
        end loop;

        sql_query := sql_query || ' from tbl_sales s 
                                                inner join tbl_products p
                                                  on s.ts_tp_id = p.tp_id
                                                group by s.ts_location';
        dbms_output.put_line(sql_query);

        open p_cursor for sql_query;
    end;
/ 
```

然后返回您可以使用的结果（*注意：*这是我在 Toad 中的操作方式）：

```
variable x refcursor
exec dynamic_pivot(:x)
print x 
```

两者都将返回结果：

```
| TS_LOCATION | APPLE | MANGO | PINEAPPLE |
-------------------------------------------
|          LN |     0 |    10 |        35 |
|          QL |    25 |     0 |        20 |
|          NY |   100 |     5 |        50 | 
```

# symfony - 如何映射三个表之间的连接

> ID：14156929
> 
> 赞同：0
> 
> 时间：2013-01-04T12:09:04.627
> 
> 标签：symfony, doctrine

我有三张桌子：

*   游戏`columns: id | name`（例如 1 | Halo）
*   拥有`columns: id | type_id | type_name`（例如 1 | 1 | 在愿望清单上）
*   用户`columns: id | name`（例如 1 | Tomek）

现在我拥有的是`ManyToMany`这些表之间的连接：

**用户**（表`user_own`）

```
/**
 * @ORM\ManyToMany(targetEntity="Own")
 * @ORM\JoinTable(
 *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="type_id", referencedColumnName="id")}
 * )
 */ 
```

**自己的**（表`own_game`）

```
/**
 * @ORM\ManyToMany(targetEntity="Game")
 * @ORM\JoinTable(
 *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="game_id", referencedColumnName="id")}
 * )
 */ 
```

我的查询：

```
public function getOwned() {
        return $this->getEntityManager()
            ->createQuery('
                SELECT u, o, g FROM AcmeGoBundle:User u
                JOIN u.owners o
                JOIN u.games g
            ')
            ->getResult();
    } 
```

我可以检索特定**用户拥有的****游戏**，但我无法连接所有权**类型**。我怎样才能做到这一点？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:45:58.727

要`ManyToMany`使用包含一些数据的附加列，您需要手动创建它。

Doctrine`ManyToMany`关系用连接实体的 id 创建一个连接表。因此，您需要由您自己的名为 ex 的实体创建。`UserOwns`与`OneToMany`关系`User`和 另一个`OneToMany`关系`Own`. 然后，您可以在其中添加包含数据的附加字段。

检查那个问题：[Doctrine2: Best way to handle many-to-many with extra columns in reference table](https://stackoverflow.com/questions/3542243/doctrine2-best-way-to-handle-many-to-many-with-extra-columns-in-reference-table)****

# ms-access-2007 - MS Access Query: define a field displays "query is too complex" using * is Ok, though

> ID：14156931
> 
> 赞同：0
> 
> 时间：2013-01-04T12:09:10.370
> 
> 标签：ms-access-2007

I'm trying to fix an MS Access Query that has begun failing. It's a system built by someone else who left a couple years ago, so I'm working backwards to understand it. The part that's failing is a query that joins two other sub queries.

If I run a 'SELECT *' on the query joins, it returns data without any problems. However, as soon as I try to define a specific field, it fails with the unhelpful message "Query is too complex".

So, this returns data no problem:

```
SELECT * FROM 530a_WIPIncomeShareByResource 
INNER JOIN 510_AllInvoicesCreditsInvWIP 
ON [530a_WIPIncomeShareByResource].WIPDocApplicable 
     = [510_AllInvoicesCreditsInvWIP].No_
WITH OWNERACCESS OPTION; 
```

However, if I define any field from either of the two queries in the join, then it errors, giving me the "Query is too complex" error. So, this fails, for example:

```
SELECT [510_AllInvoicesCreditsInvWIP].Status 
FROM 530a_WIPIncomeShareByResource 
INNER JOIN 510_AllInvoicesCreditsInvWIP 
ON [530a_WIPIncomeShareByResource].WIPDocApplicable 
     = [510_AllInvoicesCreditsInvWIP].No_ 
WITH OWNERACCESS OPTION; 
```

I've checked the two subqueries referenced in the join (530a_WIPIncomeShareByResource and 510_AllInvoicesCreditsInvWIP) respectively, and these both execute fine and return data. Joining the two doesn't, however.

I'm anything but experienced with Access so would appreciate any pointers whatsoever!

* * *

Hi this is the code for the sub queries:

530a_WIPIncomeShareByResource:

```
SELECT [502_WIP_DocApplicable].No_ AS [Resource No_], 
[502_WIP_DocApplicable].[Posting Date], 
[502_WIP_DocApplicable].WIPDocApplicable, 
[502_WIP_DocApplicable].WIPOpen, 
Sum(IIf([Work Type code]<>"WRITEOFF" 
        And [Type]<>3 
        And [Work Type code]<>"DISBURSE" 
        And [Work Type code]<>"DIRRESP" 
        And [Work Type code]<>"TAXJ"
        And [Work Type code]<>"INVMON" 
        And [Work Type code]<>"CUST"
        And [NAVTCIWORKTYPE-FEETYPE.Disbursement]<>1,[WIPValue],0)) AS QualWIP, 
Sum(IIf([Work Type code]="WRITEOFF",[WIPValue],0)) AS NonQualWOWIP, 
Sum(IIf([Work Type code]="DISBURSE" 
        Or [Work Type code]="XTNLPERCEN"
        Or [Type]=3 
        Or [NAVTCIWORKTYPE-FEETYPE.Disbursement]=1,[WIPValue],0)) AS DISBURSE, 
Sum(IIf([Work Type code]="DIRRESP" 
        Or [Work Type code]="TAXJ" 
        Or [Work Type code]="INVMON"
        Or [Work Type code]="CUST",[WIPValue],0)) AS FIXEDFEE,
Sum([502_WIP_DocApplicable].WIPValue) AS TotalWIP
FROM [NAVTCIWORKTYPE-FEETYPE] 
INNER JOIN 502_WIP_DocApplicable 
ON [NAVTCIWORKTYPE-FEETYPE].Code = [502_WIP_DocApplicable].[Work Type Code]
GROUP BY [502_WIP_DocApplicable].No_, 
         [502_WIP_DocApplicable].[Posting Date],
         [502_WIP_DocApplicable].WIPDocApplicable, 
         [502_WIP_DocApplicable].WIPOpen
WITH OWNERACCESS OPTION; 
```

and the second:

510_AllInvoicesCreditsInvWIP

```
SELECT [510_AllInvoicesCredits].[Job No_], 
[510_AllInvoicesCredits].No_, 
[510_AllInvoicesCredits].[Invoice Date1] AS [Invoice Date],  
[510_AllInvoicesCredits].Status, 
[510_AllInvoicesCredits].[Invoice No_], 
[510_AllInvoicesCredits].REVERSED, 
[510_AllInvoicesCredits].[Reversal Document No_], 
[510_AllInvoicesCredits].[Reversal Document Date], 
[510_AllInvoicesCredits].Reference, 
IIf([DocType]="Credit",[TotalBill],([TotalBill]-[FTRaised]+(-
    (IIf(IsNull([FTWO]),0,
     IIf([TotalBill]<=-0.01,-[FTWO],[FTWO]))))-
    (IIf([TotalBill]<0,-[DISBURSE],[DISBURSE]))-
    (IIf([TotalBill]<0,-[FIXEDFEE],[FIXEDFEE]))-
    (IIf([TotalBill]<0,-[XTNLPERCENSHARE],[XTNLPERCENSHARE]))-
    (IIf([TotalBill]<0,-[FIXEDFEESHARE],[FIXEDFEESHARE])))) AS IncomeToAlloc, 
[510_AllInvoicesCredits].TotalBill, 
[510_AllInvoicesCredits].XTNLPERCENSHARE, 
[510_AllInvoicesCredits].FIXEDFEESHARE, 
[520a_WIPAnalysis1_WIP].QualWIP, 
[520a_WIPAnalysis1_WIP].NonQualWOWIP, 
[520a_WIPAnalysis1_WIP].DISBURSE, 
[520a_WIPAnalysis1_WIP].TotalWIP, 
[510_AllInvoicesCredits].FTRaised AS FTR, 
IIf(IsNull([FTWO]),0,IIf([TotalBill]<0,-[FTWO],[FTWO])) AS FTWO1, 
[520a_WIPAnalysis1_WIP].GenCFWIPUsed, 
[510_AllInvoicesCredits].GenCF AS GenCFRaised, 
[510_AllInvoicesCredits].WOPROVRaised AS WOPROVR, 
[520b_WIPAnalysis2_FT].WOPROVWO AS WOPROVUsed, 
[520a_WIPAnalysis1_WIP].FIXEDFEE, 
[510_AllInvoicesCredits].DocType, 
[510_AllInvoicesCredits].Doc
FROM (510_AllInvoicesCredits LEFT JOIN 520a_WIPAnalysis1_WIP 
ON [510_AllInvoicesCredits].No_ = [520a_WIPAnalysis1_WIP].WIPDocApplicable) 
LEFT JOIN 520b_WIPAnalysis2_FT 
ON [510_AllInvoicesCredits].No_ = [520b_WIPAnalysis2_FT].FTDocApplicable
WHERE ((([510_AllInvoicesCredits].REVERSED)<>1))
ORDER BY [510_AllInvoicesCredits].[Invoice Date1]
WITH OWNERACCESS OPTION; 
```

This whole Access system is layer upon layer upon layer of queries. A real headache to decipher! the above do run just fine, however.

# javascript - how to trigger previous tab(ctrl+pageup) key code in a browser

> ID：14156936
> 
> 赞同：0
> 
> 时间：2013-01-04T12:09:24.253
> 
> 标签：javascript, jquery, browser

I want to focus on my browser's previous tabs, so i want to trigger browser tab by triggering key-code. How to do this thing using key code.(and i don't find any keycode for "ctrl+pageup")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:12:24.073

那是不可能的。

您无法触发操作系统/浏览器功能，例如来自 JavaScript 的按键。

如果这是可能的，想象一下它会导致的问题：

*   让你保存东西的网站。( `Ctrl`+ `S`-> `Enter`)
*   网站让你关闭的东西。( `Alt`+ `F4`)
*   网站让您打开新标签。( `Ctrl`+ `T`)
*   等等

您只能在页面的 JS 中[模拟这些按键。](https://stackoverflow.com/questions/961532/firing-a-keyboard-event-in-javascript)

# matlab - MATLAB 系统错误：MATLAB 遇到内部错误，需要关闭

> ID：14156937
> 
> 赞同：0
> 
> 时间：2013-01-04T12:09:25.023
> 
> 标签：matlab

[截屏](http://i.stack.imgur.com/YYvMB.jpg)

当我打开 Matlab 时，我遇到了这个问题。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:13:57.233

转到您的`matlab`首选目录（在 Linux`~/.matlab/R2010b/`中为`R2010b`版本）备份此文件夹并删除`matlabpref.mat`

# asp.net-mvc - MVC DI/IoC 依赖太多？

> ID：14156941
> 
> 赞同：3
> 
> 时间：2013-01-04T12:09:31.840
> 
> 标签：asp.net-mvc, dependency-injection

给定这个 MVC 控制器的例子；伪代码...

```
PostController
{
    private IGetPost _getPost;
    private ICreatePost _createPost;
    private IDeletePost _deletePost;
    private IUpdatePost _updatePost;

    public ActionResult Get()
    {
        return _getPost();
    }

    public ActionResult Create(post)
    {
        return _createPost(post);
    }

    public ActionResult Update(posts)
    {
        return _updatePost(post);
    }

    public ActionResult Delete(post)
    {
        return  _deletePost(post);
    }
} 
```

我的问题是，如果调用控制器上的任何一个操作，控制器的所有依赖项都会为它们创建实例，这似乎是一种性能问题。有一个更好的方法吗？我唯一的想法是创建 4 个不同的控制器，每个控制器只有一个动作，但这似乎有点矫枉过正。我还想过在每个操作中直接调用 DependencyResolver，但我不确定如果我这样做会对单元可测试性产生什么影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:20:00.017

为什么它是性能嗡嗡声？你有*测量*过这种情况吗？虽然在确定哪些实现映射到哪些接口时存在开销，但大多数值得称道的[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)(DI) 容器将执行*一次*此映射（并且通常动态创建编译代码，以便尽可能快地查找）以创建映射.

这只是创建对象的问题，这与使用[`new`关键字](http://msdn.microsoft.com/en-us/library/51y09td4.aspx)没有什么不同。

对于一般情况，这不会对性能造成影响。考虑到这是一个 Web 应用程序，如果您获得 Stack Overflow 级别的流量，那么它很*可能*会成为扩展的障碍；这些操作中的每一个都很便宜，但是当乘以数百万倍时，总的来说，它*非常*昂贵，而且通常这些都是可能导致资源争用等的类型。

假设情况并非如此（堆栈溢出流量级别），您很*可能*在构造函数 的*实现*中面临性能问题。

如果这四个接口（或任意数量的接口）的实现成本很高，那不是 DI 的功能，而是*您的代码*的功能，您将从优化中获得更多好处。

*调整依赖注入可能*有益的唯一地方是，如果构建这些实现中的一个或多个具有高开销，并且您让 DI 容器为*所有*接口实现创建*一个*实例，而不是为*每个*接口实现创建一个实例。但是，只有当您确定该选项可供您使用时，您*才*应该通过 DI 层查看生命周期管理（这意味着，拥有该类的一个实例来服务所有请求是可行的；它是线程安全的吗？它是否坚持很长一段时间的任何资源？等）

 ***如果您真的对此感到担忧并且上述内容不适用或不是一个选项，那么是的，您可以创建一些较小的控制器，这可能出于其他原因而有意义；如果您正在执行的操作在逻辑上彼此不相关，则它们可能*应该*位于单独的控制器中。

然而，看看你所采取的行动，你所拥有的逻辑划分似乎是正确的。

长话短说，不要试图在你没有衡量它的地方优化性能。

也就是说，无论您做什么，都*不要*解决类内部的依赖关系。如果这样做，您将失去 DI 的所有好处，并且将您的类与 DI 容器紧密绑定（并且可能会在使用时破坏可测试性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:20:33.327

我不确定性能是否真的会成为问题，除非您有非常荒谬的依赖项。无论哪种方式，看看你的架构都是一个很好的练习。

我们这样做的方法是将服务级别调用抽象到一个外部类，称为*处理程序*。这是来自[Project Silk](https://silk.codeplex.com/)的灵感。这样，您不仅可以精简控制器并使它们更易于管理，而且可以避免这种依赖关系的建立。

在这种情况下，您将拥有一个控制器，对于每个操作，它只需解析处理程序及其依赖项并执行它。处理程序被定义为具有很少（一个很常见）方法的小类。

```
class MyController : BaseController
{
    public ActionResult Get(int id)
    {
        return Using<GetItemHandler>().Execute(id);
    }
}

class GetItemHandler
{
    private IDependency _myDep;

    public GetItemHandler(IDependency dep)
    {
        _myDep = dep;
    }

    public Execute(int id)
    {
        return _myDep.Get(id);
    }
} 
```

请注意，它的工作方式是该`Using<T>()`方法（在 中定义`BaseController`）使用 IoC 容器来解析处理程序，从而获取它的所有依赖项。然后我们就可以正常使用了。我认为这种模式确实有助于分离职责并使您的类和控制器保持良好和精简。***

# android - 获取主页按钮的事件

> ID：14156942
> 
> 赞同：0
> 
> 时间：2013-01-04T12:09:37.450
> 
> 标签：android

我的要求是，当用户在应用程序的任何屏幕上单击主页按钮时，他将被重定向到设备主屏幕，当他返回应用程序时，他将重定向到应用程序主屏幕，而不是在他按下主页按钮的屏幕上。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:23:55.543

下面是一些代码，您可以使用它来检测主页按钮的按下并调用适当的函数。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if (event.getAction() == KeyEvent.ACTION_DOWN) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_HOME:
            finish();
            return true;
        }
    }

    return super.onKeyDown(keyCode, event);
} 
```

或者

在 android manifest 中`android:noHistory="true"`对 Activity 进行设置，只要它不在前台，就会从堆栈中删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:31:08.043

正如您所说，当您从任何屏幕按下主屏幕按钮时，您想进入主屏幕。因此，您最好采用如下所示的`BaseActivity`扩展`Activity`和内部覆盖`onKeyDown()`。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if (event.getAction() == KeyEvent.ACTION_DOWN) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_HOME:
            // Implement starting Home Activity with Clear Top
            return true;
        }
    }

    return super.onKeyDown(keyCode, event);
} 
```

然后使用而不是 Activity 扩展您的所有`BaseActivity`活动。这样每个 Activity 都可以获得 onKeyDown() 功能，以便在您按下 Home 按钮的任何地方，它都会导航回 HomeScreen 并删除所有 Activity。

# jquery - 拖动和调整 div 与其他 div 重叠

> ID：14156947
> 
> 赞同：0
> 
> 时间：2013-01-04T12:09:58.823
> 
> 标签：jquery, css, jquery-ui

我是堆栈溢出的新手。我需要你的帮助。我从网上获得了 jquery resize 小部件并尝试实现我的源代码。它只有一个小部件可以正常工作。如果我将相同的调整大小功能放在同一页面中的多个小部件上，则在小部件调整大小时它会重叠。当我调整最后一个小部件的大小时，还有一个信息，它不会影响（重叠）到其他小部件。

我的代码 CSS

```
<style>
.widget1
{
    width:150px; min-height:120px; border:1px solid green;
}
.widget2
{
    width:150px; min-height:120px; border:1px solid blue;
}
.widget3
{
    width:150px; min-height:120px; border:1px solid black;
}
</style> 
```

使用的 Js

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script>
    $(function() {
        $(".drag_resize").draggable().resizable();
    });
</script> 
```

html

```
<div class="widget1 drag_resize">
 Dummy contents 1
</div>
<div class="widget2 drag_resize">
 Dummy contents 2
</div>
<div class="widget3 drag_resize">
 Dummy contents 3
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:17:30.847

您好，欢迎来到stackoverflow！您遇到了可拖动容器的 z-index 问题。在 stackoverflow 上查看有关相同问题的此解决方案：[Setting z-index on draggable elements](https://stackoverflow.com/questions/5217311/setting-z-index-on-draggable-elements#5217462)

尤其是“点击”功能-在您的情况下，这应该可以解决问题（未经测试）：

```
$('.drag_resize').click(function() {
        $(this).addClass('top').removeClass('bottom');
        $(this).siblings().removeClass('top').addClass('bottom');
        $(this).css("z-index", a++);
    }); 
```

CSS：

```
.top {z-index: 2; position: relative}
.bottom {z-index: 1; position: relative} 
```

您可以修改您的解决方案并使用 jquery 可拖动自己的事件处理程序（拖动）而不是“单击”处理程序：http: [//jqueryui.com/draggable/#events](http://jqueryui.com/draggable/#events)

干杯

**- - - - - - -编辑： - - - - - - -**

更简洁的解决方案： [在可拖动元素上设置 z-index](https://stackoverflow.com/questions/5217311/setting-z-index-on-draggable-elements#5217511)

看看这个工作示例：http: [//jsfiddle.net/RhF7t/](http://jsfiddle.net/RhF7t/)

# android - 特定工作日的 Android 通知直接关闭

> ID：14156950
> 
> 赞同：0
> 
> 时间：2013-01-04T12:10:04.857
> 
> 标签：android, eclipse

我正在尝试使用以下代码在星期四和星期五发出通知：此代码适用于星期四

```
Calendar updateTime = Calendar.getInstance();
updateTime.set(Calendar.HOUR_OF_DAY, 14);
updateTime.set(Calendar.MINUTE, 44);
updateTime.set(Calendar.SECOND, 0);
updateTime.set(Calendar.DAY_OF_WEEK, 5);
if(updateTime.before(new GregorianCalendar())){
    updateTime.add(GregorianCalendar.DAY_OF_MONTH, 7);
}
Intent intent = new Intent(context, Alarm4.class);
intent.putExtra(ONE_TIME, Boolean.TRUE);
PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.set(AlarmManager.RTC_WAKEUP, updateTime.getTimeInMillis(), pi); 
```

但是，如果时间已经超过通知时间，则此代码无法直接弹出通知。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-14T10:54:19.387

这样做。

```
 if (updateTime.getTimeInMillis() < System.currentTimeMillis()

                || updateTime.before(new GregorianCalendar())) {
            updateTime.set(Calendar.HOUR_OF_DAY, hourOfDay + 24);
            updateTime.add(GregorianCalendar.DAY_OF_MONTH, 7);
        } 
```

并创建一个类来设置警报。

```
 public class setAlarm {

Context context;

public setAlarm(Context c) {
    // TODO Auto-generated constructor stub
    this.context = c;
}

public void settingAlarm(Calendar calendar, int counter) {
    Intent intent = new Intent(context, AlarmReceiver.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
            counter, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    AlarmManager alarmManager = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
            calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY,
            pendingIntent);
} 
```

}

和报警广播接收器是公共类报警接收器扩展广播接收器{

```
private NotificationManager manager;
private int NOTIFICATION_ID;

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Toast.makeText(context, "Alarm Received", Toast.LENGTH_LONG).show();
    manager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.ic_launcher,
            "Food Time", System.currentTimeMillis());
    Intent intent2 = new Intent(context, MainActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
            intent2, PendingIntent.FLAG_UPDATE_CURRENT);
    notification.setLatestEventInfo(context, "FoodTime",
            "Click to View your food", pendingIntent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    notification.sound = Uri
            .parse("android.resource://"
                    + "com.technogalax.sixsmallmealaday.alarm" + "/"
                    + R.raw.nsound);

    manager.notify(NOTIFICATION_ID, notification);

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:41:43.857

显然，您的代码还可以，但只完成了一半。现在，您必须创建一个 BroadcastReceiver，您必须在其中设置通知。你可以浏览这篇[文章](http://justcallmebrian.com/?p=129)，这篇文章会对你有所帮助。我想在这里提一下，它将为用户设置单个警报，而不是重复。对于重复，您必须使用`public void setRepeating (int type, long triggerAtMillis, long intervalMillis, PendingIntent operation)`而不是`public void set (int type, long triggerAtMillis, PendingIntent operation)`. 它仍然会定期重复。

在我对您的特定重复类型的想法中，您可以以不同的方式安排它。最初使用`public void set (int type, long triggerAtMillis, PendingIntent operation)`. 这将非常简单。当警报将被系统广播并且您`BroadcastReceiver`将被呼叫时。在`onRecieve()`您的`BroadcastReceiver`中，设置通知并设置第二天的闹钟（在检查第二天的闹钟后）。通过这种方式，整个重复过程将在您的控制之下，您可以轻松地为其设置任何逻辑。

# jquery - jquery使用onclick函数将项目动态添加到li

> ID：14156955
> 
> 赞同：1
> 
> 时间：2013-01-04T12:10:14.280
> 
> 标签：jquery

如果这是一个愚蠢的问题或者没有任何意义，请原谅这里的超级菜鸟。

我有一个从 mySQL 数据库动态创建的 li 列表。代码如下所示：

```
var resultCount = 0;
var mxKey = $.now();

$.get("\\php\\phpGenre.php?mxKey"+mxKey, function(genreData){

    jsonResults = JSON.parse(genreData);

    while (resultCount<jsonResults.length){
        var genreName = jsonResults[resultCount]['genre_name'];
            $('#genreList').append('<li><a href="#" onclick="searchGenres(' + genreName + ');return false"><span>' + genreName + '</span></a></li>');
                resultCount++;
    }

}); 
```

当我创建我的列表时，我还需要能够添加一个调用函数的 onClick 事件......此函数使用列表名称作为值，并通过变量genreName 生成。我的列表创建正常，但 onClick 事件不起作用并不断返回：

```
SCRIPT5009: 'Documentary' is undefined 
```

或者另一个例子是：

```
SCRIPT5009: 'Fantasy' is undefined 
```

其中“纪录片”和“奇幻”是流派名称。

所以我的问题是如何在每个列表项中包含一个 onClick 事件，它将使用genreName 作为值？

如果我对列表进行硬编码，它可以正常工作：

```
<ul><li><a href="#" onclick="searchGenres('action');return false"><span>Still To Do...</span></a></li></ul> 
```

谢谢....再次为我糟糕的编码知识感到抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:12:33.097

您需要转义`'`您的流派名称，因为您想将其作为字符串发送。试试这个

```
$('#genreList').append('<li><a href="#" onclick="searchGenres(\'' + genreName + '\');return false"><span>' + genreName + '</span></a></li>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:14:47.560

试试这个：

```
$('#genreList').append('<li><a href="#" onclick="searchGenres(\'' + genreName + '\');return false"><span>' + genreName + '</span></a></li>'); 
```

这将生成输出：

```
<li><a href="#" onclick="searchGenres('action');return false"><span>action</span></a></li> 
```

而您的代码生成：

```
<li><a href="#" onclick="searchGenres(action);return false"><span>action</span></a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:16:13.737

您的 html 正在创建为

searchGenres（奇幻）或 searchGenres（纪录片）

等等。您想要的是那些以字符串形式发送的参数。你可以改变你的代码看起来像

... 搜索流派（\'' + 流派名称 + '\'） ....

请注意 ' 之一之前的转义。这将产生

searchGenres('Fantasy') 或 searchGenres('Documentary') 等等

IMO，更好的选择是在创建 html 后使用 jQuery 函数向字段添加事件。见[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

# java - 如何通过构造函数中的依赖注入应用记录器并且没有框架

> ID：14156957
> 
> 赞同：2
> 
> 时间：2013-01-04T12:10:34.553
> 
> 标签：java, oop

我正在做没有框架（没有spring/guice）的依赖注入，只是普通的java（我需要）。我的问题是关于记录器的记录器呢？我通常将它实例化

```
private static logger = Logger.getLogger(myclass); 
```

但这不是依赖注入，我应该将记录器传递给每个 ctor 吗？这看起来很奇怪......那么如何处理记录器和依赖注入？

PS我更喜欢带有ctor的DI而不是setter，这样我就知道我的课程需要什么。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T12:13:24.713

一种解决方案是使用外观框架，例如[slf4j](http://www.slf4j.org/)。`Logger.getLogger(...)`然后实际上是获取日志库并使用它。更改日志库是一个简单的配置问题。

> Java 或 (SLF4J) 的简单日志外观作为各种日志框架的简单外观或抽象，例如 java.util.logging、log4j 和 logback，允许最终用户在部署时插入所需的日志框架。

所以它与使用 DI 非常相似，但在这种情况下可能更合适。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T12:13:22.370

记录器是大多数人不使用 DI 的一个例子，即使他们有 DI 框架。

没有什么可以阻止您通过 DI 使用它们，例如用于单元测试。

```
class MyClass {
    final Logger logger;

    public MyClass() {
        this(Logger.getLogger(getClass().getName());
    }

    public MyClass(Logger logger) {
        this.logger = logger;
    }
} 
```

顺便说一句：我在没有框架的情况下使用 DI，并且我尝试将可以记录的组件数量保持在最低限度。例如，我有可以接收错误和警告的侦听器接口。对于那些做记录的人，我让他们拥有自己的记录器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T12:21:48.067

任何极端的好主意都会变得荒谬......所以不要试图注入所有东西 - 类通常可以并且应该控制自己的一些东西，记录器就是其中之一。顺便说一句：除非您想在初始化后更改记录器，否则最好添加`final`到`private static`，这是一种很好的做法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T12:54:29.840

注入静态属性是没有意义的。首先，您应该决定是要使用每个类（静态）还是每个实例记录器。看看[When Static References to Log objects can be used](http://wiki.apache.org/commons/Logging/StaticLog) , or at [this question](https://stackoverflow.com/questions/3842823/should-logger-be-private-static-or-not)。这些帖子还展示了一些配置记录器的方法。

# java - 在 jython 中使用 Gephi 的 GraphDistance 插件：我有正确的类型，但“执行”方法不同意

> ID：14156958
> 
> 赞同：0
> 
> 时间：2013-01-04T12:10:37.550
> 
> 标签：java, python, graph, jython, gephi

我正在尝试在 gephi/jython 中运行图形度量算法。不幸的是，我不能在 GraphDistance 对象中调用方法“执行”。

这是我需要使用的统计对象类：

```
>>> type(gd)
<type 'org.gephi.statistics.plugin.GraphDistance'> 
```

图类的类型是这样的：

```
>>> type(gu)
<type 'org.gephi.graph.dhns.graph.HierarchicalUndirectedGraphImpl'> 
```

这实际上是 HierarchicalGraph 的子类：

```
>>> gu.class.__bases__[0].__bases__[0]
<type 'org.gephi.graph.api.HierarchicalGraph'> 
```

我也有要求的“属性”对象：

```
>>> type(ga)
<type 'org.gephi.data.attributes.AttributeRowImpl'> 
```

但是执行指出所需的类型不正确：

```
>>> gd.execute(gu,ga)
Traceback (most recent call last):
  File "<input>", line 1, in <module>
TypeError: execute(): 1st arg can't be coerced to org.gephi.graph.api.HierarchicalGraph, org.gephi.graph.api.GraphModel 
```

这对我来说没有多大意义，因为我正在使用的图形对象的类是从所需的类派生的。

有任何想法吗？

编辑：我正在使用 Gephi 脚本插件（[http://wiki.gephi.org/index.php/Scr](http://wiki.gephi.org/index.php/Scripting_Plugin) ​​ipting_Plugin）和 Gephi 0.8.2-beta。这是系统版本：

```
>>> sys.version
'2.5.2 (Release_2_5_2:Unversioned directory, Jan 5 2012, 12:11:16) \n[Java HotSpot(TM) 64-Bit Server VM (Oracle Corporation)]' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T23:23:11.207

[该类](https://github.com/gephi/gephi/blob/master/modules/StatisticsPlugin/src/main/java/org/gephi/statistics/plugin/GraphDistance.java)中有两个执行方法

```
public void execute(GraphModel graphModel, AttributeModel attributeModel);

public void execute(HierarchicalGraph hgraph, AttributeModel attributeModel); 
```

听起来第二个参数应该是**AttributeModel**，而不是**AttributeRowImpl**。

# javascript - getElementsByTagName 等效？

> ID：14156965
> 
> 赞同：3
> 
> 时间：2013-01-04T12:11:12.023
> 
> 标签：javascript, requirejs

我曾经在 Android`cocoonjs`上制作`HTML5`游戏，但我不能使用`requirejs`该方法`getElementsByTagName`不起作用的原因，任何人都知道如何替换它：

```
document.getElementsByTagName('script'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:44:14.663

所以我的问题实际上与`getElementsByTagName`函数没有联系，但对于那些想要一个等价物的人来说，我有这个：

```
var scriptArray = [];
for (var s in document.head.childNodes)
{
  if (document.head.childNodes[s].nodeName == "SCRIPT")
  {
    scriptArray.push(document.head.childNodes[i]);
  }
} 
```

# sql - 一对多关系的教义查询子集

> ID：14156968
> 
> 赞同：0
> 
> 时间：2013-01-04T12:11:19.830
> 
> 标签：sql, doctrine, one-to-many, dql

我有以下表格：

```
mysql> show columns from Person;
+------------+--------------+------+-----+---------+-------+
| Field      | Type         | Null | Key | Default | Extra |
+------------+--------------+------+-----+---------+-------+
|guid | varchar(255) | NO   | PRI | NULL    |       |
+------------+--------------+------+-----+---------+-------+
mysql> show columns from Person_Func;
+-----------+--------------+------+-----+---------+-------+
| Field     | Type         | Null | Key | Default | Extra |
+-----------+--------------+------+-----+---------+-------+
| Person_id | varchar(255) | NO   | PRI | NULL    |       |
| Func_id   | varchar(255) | NO   | PRI | NULL    |       |
+-----------+--------------+------+-----+---------+-------+
mysql> show columns from Func;
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| entry       | varchar(255) | NO   |     | NULL    |       |
| description | varchar(255) | NO   |     | NULL    |       |
| Guid    | varchar(255) | NO   | PRI | NULL    |       |
+-------------+--------------+------+-----+---------+-------+ 
```

Symfony 类 Person 使用连接表 Person_Func 包含与 Func 的一对多关系（一个人 - 几个 Func）。我想查询拥有多个 Funcs 的 Person - steve (a, b , c); 约翰 (a, b, d); ele (b, d) - 我查询 (a, b) 函数，应该返回 steve 和 john。

现在我只是遍历所有的人并查询函数——这非常非常慢。请你帮助我好吗？

**UPD** 我已经成功了

```
SELECT DISTINCT d1.guid from (select p.guid, f.entry from Person p, Person_Func jt, Func f where p.Guid = jt.person_id and jt.func_id = f.guid and f.entry in ('A', 'B')) as d1,
(select p.guid, f.entry from Person p, Person_Func jt, Func f where p.Guid = jt.person_id and jt.func_id = f.guid and f.entry in ('A', 'B')) as d2 
where d1.guid=d2.guid and d1.entry != d2.entry 
```

但我认为这不是一个好主意，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:23:56.457

链接 Person 和 Person_Func`JOIN`是一种更简洁的方法：

```
SELECT p.id
FROM Person p INNER JOIN Person_Func pf ON p.id = pf.person_id
              INNER JOIN Person_Func pf2 ON p.id = pf2.person_id
WHERE
    pf.func_id = 'a' 
    AND pf2.func_id = 'b' 
```

这里有[SQLFiddle 代码](http://sqlfiddle.com/#!2/3bf11/4)

# sql-server - 如何使用 Loop IN Sp 或 UDF Sql Server

> ID：14156969
> 
> 赞同：0
> 
> 时间：2013-01-04T12:11:20.920
> 
> 标签：sql-server, database

我正在尝试将 id 传递给 Sp 然后它将首先获取 id 反对它，然后使用 SP 或使用 UDF 获取数据反对那些 id ，因为我尝试它

```
select RequestFrom from UserReqest where RequestTo=10 and IsApprove=0

select * from user where user_ID= (i have to use all five id's here ?) 
```

希望您的建议

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:13:43.430

SQL 中有一个[IN 运算符](http://msdn.microsoft.com/en-us/library/ms177682.aspx)可以执行您想要的操作：

```
select * 
from user 
where user_ID in (select RequestFrom 
                    from UserReqest 
                    where RequestTo=10 
                      and IsApprove=0) 
```

# php - 将 cUrl comnad 行转换为 PHP 行

> ID：14156970
> 
> 赞同：0
> 
> 时间：2013-01-04T12:11:21.440
> 
> 标签：php, apache, ubuntu, curl

我有一个`curl`可以从 Linux (ubuntu) 命令行成功运行的命令。

我需要将此`curl`命令合并到 PHP 脚本中。

如何翻译以下 curl 命令以使其在 PHP 脚本中工作？

```
curl -X POST -H "Accept: application/rdf+xml" -F recipe=http://demo/recipe_alta -F input=@prova_rdf.rdf http://site.cs.unibo.it/stanbol/refactor 
```

我一直在尝试使用我在互联网上找到的很多 PHP 调用，但我总是收到*http 409 和 415 消息*。

我也尝试过`exec`，`shell_exec`但我得到了同样的错误。

这是另一个电话，只是为了在 url 上发布 rdf 文件，我得到了同样的错误。

```
$url = "http://bernina.cs.unibo.it/stanbol/triplestore/grafotest_cavo";
$post_data['file'] = "@prova_rdf.rdf";
$ch = curl_init();
$headers = array('Accept: application/rdf+xml');
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_VERBOSE, 1);
$response = curl_exec($ch);
echo $response; 
```

# c# - WPF 应用程序在其他计算机上不起作用

> ID：14156971
> 
> 赞同：0
> 
> 时间：2013-01-04T12:11:27.307
> 
> 标签：c#, .net, wpf, entity-framework

我构建了一个简单的 WPF 应用程序只是为了获得一些经验。它所做的只是在用户单击按钮时从数据库中获取信息。
该应用程序在我的 PC 上运行良好（使用发布选项），但是当我尝试在我的笔记本电脑和我朋友的 PC 上运行它时，该应用程序崩溃的速度与按下按钮一样快。
我 99% 确定它与实体框架有关，我用它来联系数据库（单击按钮时触发的所有功能都是联系并从数据库中检索信息）。

在谷歌中寻找答案后，我发现它可能与 PC 中的 .net 安装或项目引用有关。

但是，我的 PC 和笔记本电脑中的 .net FW 版本是相同的，并且引用都标记为本地复制（仅用于测试！）。

还有什么可能导致这样的问题？我真的已经不知道了...

**更新**

使用异常，我发现我得到的错误是：
`The specified store provider cannot be found in the configuration, or is not valid.`

我还通过在 Google 中进行更深入的搜索解决了这个问题。
解决方案可以在下面找到...

快乐编码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:14:33.320

> 它所做的只是在用户单击按钮时从数据库中获取信息。

在您的应用程序中，您正在通过实体框架访问数据库。我只能猜测您与数据库的连接失败，因此您的应用程序正在崩溃。确保为应用程序准备好数据库。

记录您的异常也是一个好主意，以便您可以在应用程序崩溃时查看详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:23:13.833

尝试在按钮事件处理程序内围绕您的代码使用 Try Catch 块，例如：

```
 try
        {
            //here your database logic

        }
        catch (Exception ex )
        {
            MessageBox.Show(ex.Message);
            //todo do something usefull
        } 
```

这将为您提供有关应用程序失败原因的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T13:02:11.917

我终于解决了！

操作方法如下：
1) 确保您的项目引用了 MySql.Data.dll、MySql.Web.dll、MySql.Data.Entity.dll 和 System.Data.Entity.dll。

2) 将以上所有设置为 Copy-Local。

3）将以下行添加到您的`App.config`文件中：

```
 <system.data>
  <DbProviderFactories>
    <clear />
    <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient"
    description=".Net Framework Data Provider for MySQL"
    type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, 
    Version=6.4.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
  </DbProviderFactories>
</system.data> 
```

4) 单击 MySQL.Data 参考，并检查它的版本。选择它后，可以在解决方案资源管理器下方的“属性”窗口中找到它。

5) 将`Version=6.4.4.0`部分更改为您的 MySql.Data.dll 的版本。我的是 6.5.4.0，这是最新的，但旧版本应该也能正常工作。

另外，我要感谢**Ralf de Kleine**和所有回答提出/建议异常代码的人。
在异常方便的时候不考虑使用异常，这让我很愚蠢！

# c - 将 UDP 包发送到 NTP 服务器并接收时间（lwip、Cortex M3、Stellaris LM3S6965 评估板）

> ID：14156972
> 
> 赞同：0
> 
> 时间：2013-01-04T12:11:32.167
> 
> 标签：c, sockets, udp, cortex-m3, lwip

我正在使用 Cortex M3、Stellaris® LM3S6965 评估板。我想在我的 oled 屏幕上显示 NTP 服务器的时间。首先，我想得到 NTP 服务器的回复。我搜索了服务器与 UDP 一起使用。它给了我一个时间戳。我正在使用 LWIP 库。

我正在尝试向服务器发送一个 UDP 数据包，我想在显示器上显示收到的数据包数据（时间戳）..

所以我想我必须向 TNP 服务器发送一个 udp 包并接收时间戳。

但不知何故它不起作用。我希望你们能帮我找到解决办法。

编辑：

[我还在这里](http://www.endruntechnologies.com/pdf/NTP-Intro.pdf)找到了有关 NTP 的更多信息

更新程序：

```
// Function gets called when we recieve data
err_t RecvUTPCallBack(void *arg, struct udp_pcb *upcb, struct pbuf *p, struct ip_addr *addr, u16_t port){
    RIT128x96x4Enable(1000000);
    RIT128x96x4StringDraw("ENTERING CALLBACK", 40, 40, 11);

    volatile int totaal_lengte=0;
    totaal_lengte = p->tot_len;
    volatile int line=40;

    while(1){

        RIT128x96x4Enable(1000000);
        RIT128x96x4StringDraw(p->payload+1, 0, line, 15);
        line+=8;
        if(p->len != p->tot_len){
            p=p->next;
        }
        else break;
    }
    pbuf_free(p);
}

int main(void){
                //UDP
                struct udp_pcb * udp_con_new;
                struct ip_addr ntp_server;
                udp_con_new = udp_new();
                IP4_ADDR(&ntp_server,65,55,21,13); // time.windows.com
                udp_connect(udp_con_new,&ntp_server,123);

                struct pbuf * p;
                p = 0;

                udp_send(udp_con_new, p);

                //udp_recv(upcb,RecvUTPCallBack, recv_arg);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:25:34.417

你没有发送任何数据。UDP 是无连接的，这些函数的[随机文档](http://www.ecoscentric.com/ecospro/doc/html/ref/lwip-api-raw-udp-connect.html)`udp_connect()`（看起来确实与您正在使用的内容相匹配）说：

> 此函数不会产生任何网络流量，而只会设置 pcb 的远程地址。

您必须为 NTP 构造一个有效的请求数据包，然后使用`[udp_send()](http://www.ecoscentric.com/ecospro/doc/html/ref/lwip-api-raw-udp-send.html)`. 有关如何执行此操作的详细信息，以及您似乎需要的有关 NTP 的大量信息，请阅读[当前的 IEEE 规范](https://www.rfc-editor.org/rfc/rfc5905)。享受。

# asp.net - 尝试在 Windows Azure 表中保存时出错

> ID：14156980
> 
> 赞同：-1
> 
> 时间：2013-01-04T12:12:09.240
> 
> 标签：asp.net, .net, azure, azure-storage

我做了一个在存储中添加用户的方法。下面是我得到的代码和错误。

```
 public string addusr(string nome, string cidade, string cpf, string email, string telefone)
    {
        try
        {
            if (nome.Length == 0)
                return "f:Preencha o campo nome.";

            if (cidade.Length == 0)
                return "f:Preencha o campo cidade.";

            if (cpf.Length == 0)
                return "f:Preencha o campo cpf.";

            if (!Valida(cpf))
                return "f:CPF Invalido.";

            if (email.Length == 0)
                return "f:Preencha o campo email.";

            Regex rg = new Regex(@"^[A-Za-z0-9](([_\.\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-]?[a-zA-Z0-9]+)*)\.([A-Za-z]{2,})$");
            if (!rg.IsMatch(email))
            {
                return "f:Email Invalido";
            }

            List<UserEntity> lst = new List<UserEntity>();
            var _account = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("Conn"));
            var _context = new CRUDUserEntities(_account.TableEndpoint.ToString(), _account.Credentials);
            if (_context.Select(cpf).Count() > 0)
                return "dup";

            var account = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("Conn"));
            var context = new CRUDUserEntities(account.TableEndpoint.ToString(), account.Credentials);
            UserClientEntity entity = new UserClientEntity() { nome = nome, cidade = cidade, cpf = cpf, email = email, telefone = telefone };
            context.ADDUSociate(entity);
            return "k";
        }
        catch (Exception exc)
        {
            string error =  "f:" + exc.Message + "|" + exc.StackTrace;
           // Trace.WriteLine("Erro no login: " + error , "Information");
            return error;
        }
    } 
```

**当我尝试添加用户时...我收到此错误：**

```
 <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
      f:An error occurred while processing this request.| at            Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
         at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
        at Microsoft.WindowsAzure.StorageClient.CommonUtils.      <LazyEnumerateSegmented>d__0`1.MoveNext()
        at System.Linq.Enumerable.Count[TSource](IEnumerable`1 source)
        at mobile.Service1.addusr(String nome, String cidade, String cpf, String email, String telefone)
    </string> 
```

不知道怎么回事。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:30:54.020

Not sure whats causing the error but you do miss a `context.SaveChanges();` after

```
context.ADDUSociate(entity); 
```

"I suggest you start with getting the emulator working for azure storage and debug this in visual studio." I think you dont have the correct Azure sdk installed. Try to reinstall it and the emulator should work. You can follow this guide: [http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)

# csv - 是否可以导出为 CSV 并让标题包含空格？

> ID：14156985
> 
> 赞同：8
> 
> 时间：2013-01-04T12:12:15.877
> 
> 标签：csv, reporting-services, reportingservices-2005

我需要将 SSRS 2005 报告导出为 CSV，其中列标题包含空格。

目前，CSV 标题列标题源自 textBox 属性名称，并使用下划线而不是空格。还有另一种更好的方法吗？

例如，目前我有：

*   SSRS 报告标题：生效日期
*   文本框名称：Effective_Date
*   CSV 标题：Effective_Date

我想拥有：

*   SSRS 报告标题：生效日期
*   文本框名称：Effective_Date
*   CSV 标题：生效日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:16:52.510

看起来不可能，经过更多挖掘，我发现了以下 Stack Overflow 帖子：

*   [SSRS csv 导出在列标题名称中使用逗号](https://stackoverflow.com/questions/2631800/ssrs-csv-export?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T16:35:56.053

我自己解决了这个问题，方法是自定义内置的 CSV 渲染扩展，使其使用文本框的 ToolTip 属性作为列标题。ToolTip 属性将允许使用空格和其他标点符号，因此您可以根据需要灵活地命名列。这还具有很好的副作用，即为您提供相关的工具提示，提醒您正在查看的长报告中的哪一列的标题可能不可见！

注意：在设计器中，您设置数据行文本框的工具提示，而不是标题文本框。

这并不容易实现，因为所有渲染扩展都被标记为密封类。因此，为了实现这一点，我使用了一个反编译器，并将所有与 CSV 渲染相关的代码提取到我自己的项目中。然后将写入标题文本的行更改为从文本框的 ToolTip 属性中读取。

在名为 CsvColumnHeaderHandler 的类中，您正在寻找 OnTextBoxBegin 方法，尤其是以下行：

```
this.m_visitor.WriteValue(textBox.DataElementName, this.m_excelMode); 
```

只需将其更改为：

```
this.m_visitor.WriteValue(textBox.ToolTip, this.m_excelMode); 
```

然后可以将此自定义呈现扩展插件部署到报表服务器并完美运行。

您不需要知道如何为此编写渲染扩展，因为正如我所说，我只是复制（反编译）了代码。但是，您需要知道如何部署自定义呈现扩展程序集。可以在此处找到有关部署的更多信息：[https ://msdn.microsoft.com/en-us/library/ms154516.aspx](https://msdn.microsoft.com/en-us/library/ms154516.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T13:32:18.657

有一个解决方案。您需要在 SSRS 属性中选择按`F4`，选择*Properties*，在该选择要重命名的特定文本框中。例如，让 Textbox12 作为 Effective_Date。解决方案：使用 EffectiveDate 重命名文本框。

# php - 从 csv 文件上传时设置条件

> ID：14156992
> 
> 赞同：0
> 
> 时间：2013-01-04T12:12:36.607
> 
> 标签：php, mysql

所以，我有这个用户列表，我从 csv 文件中获取它。

我需要做的是：我获取要上传的文件，如果用户存在，我检查每一行，如果他存在，那么我所做的就是更新他，如果他不存在，我应该为他创建一个新帐户。

我确实知道如何将其作为逻辑...但是在使用 csv 导入时我变得困惑...

所以，这就是我使用的：

```
$handle = fopen($_FILES['filename']['tmp_name'], "r");

while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $import="INSERT into users (Username,Password,Email,first_name,last_name,phone,user_id,age,sex) values('$data[0]','".md5($data[1])."','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]','$data[7]','$data[8]')";
    mysql_query($import) or die(mysql_error());
}

fclose($handle); 
```

我需要的是这样的：

```
foreach (user as $data[7]) {
    if user exists in user table then $query1 
    else $query2    
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:59:32.220

如果`user_id`是表的主键，您可以使用该`ON DUPLICATE KEY UPDATE`子句在一个语句中插入新行或更新现有行：

```
INSERT INTO users (Username,Password,Email,first_name,last_name,phone,user_id,age,sex)  
VALUES('$data[0]','".md5($data[1])."','$data[2]','$data[3]',
       '$data[4]','$data[5]','$data[6]','$data[7]','$data[8]')
ON DUPLICATE KEY UPDATE
        Username = '$data[0]', 
        Password = '".md5($data[1])."', 
        Email = '$data[2]', 
        first_name = '$data[3]', 
        last_name = '$data[4]', 
        phone = '$data[5]', 
        age = '$data[7]', 
        sex = '$data[8]'; 
```

查看 MySQL 文档中的详细信息：http: [//dev.mysql.com/doc/refman/5.6/en/insert.html](http://dev.mysql.com/doc/refman/5.6/en/insert.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:03:21.863

MySQL 有一个方便的小函数叫做`LOAD DATA INFILE`，它允许它直接加载 CSV 文件，而不需要在 PHP 中执行插入循环。

你的整个代码可以像这样简单：

```
$import="LOAD DATA INFILE '{$_FILES['filename']['tmp_name']}' INTO users (Username,Password,Email,first_name,last_name,phone,user_id,age,sex)";
mysqli_query($connection, $import) or die(mysqli_error($connection)); 
```

请参阅此处的 MySQL 手册页：http: [//dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

注意：我没有测试过上述内容。如果 MySQL 没有对临时文件的直接读取访问权限，您可能需要将其移动到 MySQL 可以首先读取的位置，或者`LOAD DATA LOCAL INFILE`改为使用。

注意2：我使用`mysqli_xxx()`函数而不是`mysql_xx()`因为`mysql_xx()`函数已被弃用。如果需要，请随意将其改回，但请注意`mysql_xx()`不建议使用。我建议您尽快将所有`mysql_xx()`呼叫更改为。`mysqli_xxx()`

# cookies - Formsauthentication.SetAuthCookie 和 Session 的区别用法

> ID：14156995
> 
> 赞同：8
> 
> 时间：2013-01-04T12:12:58.723
> 
> 标签：cookies, forms-authentication, session-state

对于这个看似简单的问题，我似乎找不到答案。

使用第一个或后一个有什么区别？为什么我要使用第一个？

在 MSDNAA 上，我发现有关 Formsauthentication.setCookie() 的以下内容：

> 为提供的用户名创建一个身份验证票证，并将其添加到响应的 cookie 集合中，如果您使用的是无 cookie 身份验证，则将其添加到 URL。

关于会话：

> ASP.NET 会话状态使您能够在用户浏览构成 Web 应用程序的不同 ASP.NET 页面时为用户存储和检索值。HTTP 是一种无状态协议，这意味着您的 Web 服务器将对页面的每个 HTTP 请求视为一个独立的请求；默认情况下，服务器不保留先前请求期间使用的变量值的知识。因此，构建需要维护一些跨请求状态信息的 Web 应用程序（实现购物车、数据滚动等的应用程序）可能是一个挑战。ASP.NET 会话状态将在有限时间段内从同一浏览器收到的请求标识为会话，并提供在该会话期间保持变量值的能力。

当我使用会话 cookie 检查用户是否正确登录时，我对为什么要使用 formsauthentication.SetAuthCookie 特别感兴趣。例如：

```
if(Session["LoggedIn"] != null) {
    ...Do something here that only logged in users are allowed to do...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:56:44.613

看来我已经在 asp.net 网站上找到了答案：

[http://forums.asp.net/t/1587046.aspx/1#4012585](http://forums.asp.net/t/1587046.aspx/1#4012585)

# android - 带有图像的滚动列表上的 Android 应用程序内存不足

> ID：14156996
> 
> 赞同：1
> 
> 时间：2013-01-04T12:13:00.637
> 
> 标签：android, android-layout

我正在开发一个 Android 应用程序。活动为每一行加载两个位图。**由于内存不足，**应用程序在上下滚动几次后崩溃

 **例外是

```
 01-04 12:58:45.328: E/dalvikvm-heap(30264): Out of memory on a 307216-byte allocation.
   01-04 12:58:45.328: I/dalvikvm(30264): "main" prio=5 tid=1 RUNNABLE
   01-04 12:58:45.328: I/dalvikvm(30264):   | group="main" sCount=0 dsCount=0 obj=0x40c40460 self=0xb3ca38
   01-04 12:58:45.328: I/dalvikvm(30264):   | sysTid=30264 nice=0 sched=0/0 cgrp=default handle=1074541800
   01-04 12:58:45.328: I/dalvikvm(30264):   | schedstat=( 14267042000 1117190000 14168 )    utm=1325 stm=101 core=1
   01-04 12:58:45.328: I/dalvikvm(30264):   at android.graphics.Bitmap.nativeCreate(Native Method) 
```

这是我的主要活动

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingBottom="@dimen/DefaultMargin" 
    android:paddingTop="@dimen/DefaultMargin" >

    <TextView
        android:id="@+id/textViewCourseEmpty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/empty_course_list_label"
        android:visibility="gone" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    </ListView>

</LinearLayout> 
```

ListView 项目如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/row"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="horizontal"
    android:padding="5dp" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="@dimen/DefaultMargin"
        android:layout_weight="0.65" >

        <ImageView
            android:id="@+id/coursestatelogo"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_marginRight="@dimen/DefaultMargin"
        android:layout_weight="0.2"
        android:gravity="right" >
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1.2"
            android:gravity="right" >

            <TextView
                android:id="@+id/courselabel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingLeft="@dimen/HalfMargin"
                android:paddingRight="@dimen/HalfMargin"
                android:singleLine="false"
                android:textSize="@dimen/textSize" />

        </LinearLayout>

        <ImageView
            android:id="@+id/courselogo"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

</LinearLayout> 
```

阵列适配器代码：

```
public class CourseArrayAdapter extends ArrayAdapter<CourseData>{

    private final Context context;
    private final CourseData[] values;

    public CourseArrayAdapter(Context context, CourseData[] values) {
        super(context, R.layout.list_course_item, values);
        this.context = context;
        this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.list_course_item, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.courselabel);
        textView.setText(Farsi.Convert(values[position].Name));

        ImageView imageView = (ImageView) rowView.findViewById(R.id.courselogo);

        ImageView imageViewstate = (ImageView) rowView.findViewById(R.id.coursestatelogo);

        switch (values[position].State){
            case NotStarted :
                if (values[position].Downloaded)
                    imageViewstate.setImageResource(R.drawable.downloaded);
                else
                    imageViewstate.setImageResource(R.drawable.download);
                break;
            case InProgress :
                imageViewstate.setImageResource(R.drawable.lesson);
                break;
            case Certified :
                imageViewstate.setImageResource(R.drawable.certificate);
                break;
        }

        return rowView;
    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:32:50.943

您应该检查 convertView 是否为空。

```
View rowView;
if (convertView== null) {
LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

       rowView = inflater.inflate(R.layout.list_course_item, parent, false);
}else
 rowView = convertView; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:29:16.860

在扩充新视图之前，您应该检查是否可以重用传入的视图。

```
View rowView;

if (convertView == null) {
    LayoutInflater inflater = ...;
    rowView = inflater.inflate(...);
} else
    rowView = convertView; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:30:58.063

我建议你的几件事：

1.  使用行视图回收
2.  阅读这篇文章： http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)，它将向您展示如何有效地显示图像。**

# jquery - 遍历 JSON

> ID：14156997
> 
> 赞同：1
> 
> 时间：2013-01-04T12:13:02.543
> 
> 标签：jquery, json

我想知道如何循环遍历这个 json 数据以使用 jquery 获取其中的值？我所拥有的是`undefined`。我`$.ajax.get()`用来获取文件然后我试图遍历它以获取其中的数据。JSON看起来像这样......

get 的结果是一个字符串！

```
 [
    {
        "category": "anti-social-behaviour", 
        "persistent_id": "", 
        "location_subtype": "STATION", 
        "month": "2012-11", 
        "location": {
            "latitude": "52.6313999", 
            "street": {
                "id": 1447707, 
                "name": "Leicester"
            }, 
            "longitude": "-1.1252999"
        }, 
        "context": "", 
        "id": 18782816, 
        "location_type": "BTP", 
        "outcome_status": {
            "category": "Under investigation", 
            "date": "2012-11"
        }
    }
] 
```

问候/哈里斯！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:16:16.247

假设您正在通过 ajax 调用并且您返回的 json 在一些 var 数据上，您可以使用 $.each 解析

```
$.each(data, function(i, obj) {
  //use obj.id and obj.name here, for example:
  alert(obj.name);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:27:53.943

您可以像这样简单地遍历项目：

```
$.each(obj, function(i, val) {
    alert(val.category);
    alert(val.location.latitude);
    alert(val.location.street.id);
});​ 
```

[**在这里演示**](http://jsfiddle.net/Yc5VH/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T12:16:56.887

你需要确保你有一个 json 对象而不是一个字符串。后：

```
for(var i in JSONObject){ // code goes here } 
```

请记住，您还可以使用直接键值调用对象中的元素。

经验。ObjName.keyname

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:25:11.770

似乎问题在于它当然不是一个对象，这就是为什么我无法通过 json 交互...所以我使用了： var obj = jQuery.parseJSON();

一切正常！

# objective-c - 删除行后如何对表格视图编号字符串进行数字排序

> ID：14156999
> 
> 赞同：0
> 
> 时间：2013-01-04T12:13:10.377
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我有一个表格视图，可以在按下按钮时添加行。行从字符串`itmeNo` 中按每行的升序编号。我的问题是当用户删除一行时，数字不再按顺序排列。

即 1,2,3,4,5,

如果用户删除第 3 行和第 4 行，它们将被编号

1,2,5

我有点坚持如何进行数字排序？我在哪里`[self.observations count] + 1];`可以改变这个也许`itemNo`总是按数字升序排序

总之，我总是希望我的表格视图行编号字符串始终按顺序编号

有点影响，但到目前为止，我尝试`[self.tableView reloadData];`了删除方法并使用了允许重新排序表视图的方法。

```
 - (void)addObservationButtonPressed:(id)sender
{
LogCmd();
Observation *observation = [[ICObservationManager manager] newObservation];
observation.createdAt = [NSDate date];
observation.modifiedAt = [NSDate date];
observation.certificate = self.certificate;
observation.itemNo = [NSString stringWithFormat:@"%d", [self.observations count] + 1];
[self.certificate addObservationsObject:observation];
[self loadData];
[self.tableView reloadData];
[self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:self.observations.count-1 inSection:0] atScrollPosition:UITableViewScrollPositionBottom animated:YES];
}

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
return [self.certificate.observations count];
}

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *cellIdentifier = @"ObservationsCellIdentifier";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
}
Observation *observation = [self.observations objectAtIndex:indexPath.row];
NSString *itemLabel = [NSString stringWithFormat:@"%@. %@",
                       observation.itemNo,
                       (observation.item.length ? observation.item : @"No description")];
cell.textLabel.text = itemLabel;

return cell;
}

 //Delete observations

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
 {

if (editingStyle == UITableViewCellEditingStyleDelete) {
    [self.managedObjectContext deleteObject:[self.observations objectAtIndex:indexPath.row]];
    [self.appDelegate saveContext];
    [self.observations removeObjectAtIndex:indexPath.row];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

 }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T11:59:10.217

当您删除行时，只需像**@rohit**`UITableView`那样再次将其排序为您想要的顺序，然后删除该行并根据顺序重新加载您的表。希望这可以帮助。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:25:20.600

这是代码：-

```
Observation *observation = [self.observations objectAtIndex:[self.observations count]-1];
int lastValue = [observation.itemNo intValue];
lastValue++; 
```

`lastValue`是您可以使用的最大值

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T11:52:26.340

试试这个代码

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
 {

if (editingStyle == UITableViewCellEditingStyleDelete) {
    [self.managedObjectContext deleteObject:[self.observations objectAtIndex:indexPath.row]];
    [self.appDelegate saveContext];
    [self.observations removeObjectAtIndex:indexPath.row];

//need to add these lines
 NSSortDescriptor *sortByUploaded =[NSSortDescriptor sortDescriptorWithKey:@"itmeNo"ascending:YES];

  NSArray *sortDescriptorArr = [NSArray arrayWithObjects:sortByUploaded,nil];

 self.observations = [NSMutableArray arrayWithArray:[self.observations sortedArrayUsingDescriptors:sortDescriptorArr]];

    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

 } 
```

}

让我知道它是否不起作用**