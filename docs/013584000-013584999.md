# StackOverflow 问答 13584000-13584999

# c# - 尝试使用非托管 C++ DLL 时出现 SafeArrayTypeMismatchException

> ID：13584003
> 
> 赞同：0
> 
> 时间：2012-11-27T12:12:44.787
> 
> 标签：c#, c++

首先，我要说我已经到处寻找答案，当我找到一些东西时，这对我来说都是胡言乱语，而不是 C++ 程序员。编程对我来说只是一种爱好。

我在 C# winforms 项目中使用 Visual Studio 2010 Ultimate，以防万一！

问题是我正在尝试使用来自非托管 DLL 的函数（Bo Haglund's Double Dummy Solver）。他的自述文件没有多大帮助，关于如何使用他的 DLL 的文章令人惊讶地少（即没有）。

我有我希望使用的 DLL 中函数的原型。

```
extern "C" __declspec(dllimport) int __stdcall CalcDDtablePBN(struct ddTableDealPBN tableDealPBN, struct ddTableResults * tablep); 
```

我对指针不太了解，但我猜我会在 C# 中使用“ref”。

这是他关于该功能的自述文件：

> 计算表
> 
> CalcDDtable 计算所有 20 个王牌花色/庄家牌组合的初始 52 张牌的双倍虚拟值。
> 
> 在调用 CalcDDtable 之前，必须声明“ddTableResults”类型的结构。CalcDDtable 返回一个状态整数，“无故障”表示 DLL 在“ddTableResults”类型结构中提供双重虚拟分数。状态码：
> 1=无故障，其他状态码为错误，代码与 SolveBoard 状态码相同。
> 
> 结构“ddTableDeal”定义了要分析的发牌。结构 ddTableDeal { 无符号整数卡[4][4]; /* 第一个索引是手，第二个索引是花色，与 SolveBoard 的 deal.remainCards 的编码相同。*/ };

```
struct ddTableResults { /* For each combination trump suit / declarer hand, the DLL provides the double dummy score. */
  int resTable[5][4];   /* 1st index is trump (0=Spades, 1=Hearts, 2=Diamonds, 3=Clubs, 4=No Trump 2nd index is declarer hand, 0=North, 1=East, 2=South, 3=West */
}; 
```

> CalcDDtablePBN
> 
> 在 CalcDDtablePBN 中，交易信息中的剩余卡片以 PBN 文本格式给出，请参阅上述 SolveBoardPBN 的描述。否则，CalcDDtablePBN 与 CalcDDtable 相同。

```
struct ddTableDealPBN {
  char cards[80];
}; 
```

我导入的函数如下：

```
[DllImport("dds.dll")]
public static extern int CalcDDtablePBN(DDTableDealPBNStruct tableDealPBN, ref DDTableResultsStruct tablep); 
```

这是我的结构：

```
public struct DDTableDealPBNStruct
{
    public char[] cards;

    public DDTableDealPBNStruct(char[] pbnCards)
    {
        cards = pbnCards;
    }
}

public struct DDTableResultsStruct
{
    public short[,] resTable; /* 1st index is trump (0=Spades, 1=Hearts, 2=Diamonds, 3=Clubs, 4=No Trump 2nd index is declarer hand, 0=North, 1=East, 2=South, 3=West */
} 
```

这就是我调用函数的方式：

```
const string _dealPBN = "N:QJT..AJ76.AKJ765 AK64.AKJ7654..98 32.T932.KQ32.T43 9875.Q8.T9854.Q2";
DDTableDealPBNStruct tdPBN = new DDTableDealPBNStruct(_dealPBN.ToCharArray());
DDTableResultsStruct results = new DDTableResultsStruct();
results.resTable = new short[5, 4];
CalcDDtablePBN(tdPBN, ref results); 
```

当我运行程序时，这是我收到的错误消息：

> SafeArrayTypeMismatchException 未处理。指定的数组不是预期的类型。

它没有提到哪个数组不好，但我猜它是 short[5,4] 数组。我尝试了不同的 [MarshalAs(UnmanagedType.blah)] 选项无济于事。谁能告诉我我做错了什么？老实说，我很难过。

我还尝试了几种不同的数组类型，int、uint、short、Int16 等，但同样无济于事。除非我错了，这是它抱怨的 char[] 数组？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:56:28.653

您需要描述结构的布局。

```
[StructLayout(LayoutKind.Sequential)]
public struct DDTableResultsStruct
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 20)]
    public int[] resTable;
} 
```

似乎没有办法说数组是二维的，所以我刚刚给出了数组的完整大小，就好像它是一维的一样。（在 C 中，多维数组在内存中连续布局。）请注意，元素类型是`int`，而不是`short`- 它是 32 位的。您也应该对其他结构执行相同的操作。

（未经测试的代码。）

# html - 使用ajax填充div？

> ID：13584004
> 
> 赞同：2
> 
> 时间：2012-11-27T12:12:51.583
> 
> 标签：html, ajax

我最近创建了一个左侧有菜单栏的网站。我的下一步是根据您在菜单中选择的选项更新页面右侧的内容。我知道你可以使用 iframe，但我想知道是否有替代它的方法，比如更动态的！

大多数菜单选项都是输入表单，我读过关于 ajax-calls 来填充 div 但找不到关于如何实现它的好教程。

编辑：

这是一个草图[http://imageshack.us/photo/my-images/16/smlithis.png/](http://imageshack.us/photo/my-images/16/smlithis.png/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T12:18:33.420

考虑使用 JQuery。处理 Ajax 请求比使用普通 JS 容易得多。ajax 函数的文档：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

使用成功回调（成功时执行的函数），您可以填写您的 div：

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```

而不是`.result`，将选择器指向您的主 div。.html() 函数用 填充您的 div `data`，这是从 ajax 请求返回的数据。

**编辑**：现在是 2018 年。使用[Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T12:20:56.007

您可以使用 jQuery 您的菜单按钮如下所示：

```
<a href='#' onclick='return fillDiv(1)'>GoTo1</a>  
<script>  
function fillDiv(pageNum){
  $("#id_of_div_to_load_to").load("some_page.php",{ 'pahe_num': pageNum } );  
return false;  
}
</script> 
```

这只是众多方法中的一种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:18:02.780

你的意思是这样的： [How to update div when on select change in jquery](https://stackoverflow.com/questions/628508/how-to-update-div-when-on-select-change-in-jquery)

如果您真的想从另一个来源动态获取数据，那将是完全不同的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:14:50.493

Ajax 可以从服务器获取数据，但它不能填充任何内容。Ajax 只是用于与服务器通信的 javascript。Javascript 可以获取该数据并插入数据并创建元素来填充该 div。

# asp.net - 是否可以有多个 Wcf 服务类？如果是，那怎么办？

> ID：13584005
> 
> 赞同：2
> 
> 时间：2012-11-27T12:12:57.033
> 
> 标签：asp.net, wcf, web-services

是否可以有多个 Wcf 服务类。因为我有两个合约接口并且想在两个不同的服务类中实现。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:13:12.547

如果您有 2 个合同说 IService1 和 IService2，您有两个选择：

*   两个服务合同都由一个服务实现，该服务实现了 IService1 和 IServe2 的所有方法。然后您的配置文件将如下所示：

    ```
    <services>
        <service name="MyNamespace.Service">
            <host>
                <baseAddresses>
                    <add baseAddress="http:localhost:8080" />
                </baseAddresses>
            </host>
            <endpoint address="Service1" binding="basicHttpBinding" contract="MyNameSpace.IService1" />
            <endpoint address="Service2" binding="basicHttpBinding" contract="MyNameSpace.IService2" />
        </service>
    </services>
    ```

*   每个合同都由单独的服务实现，比如说 Service1 和 Service2，那么您的配置将如下所示：

    ```
    <services>
        <service name="MyNamespace.Service1">
            <host>
                <baseAddresses>
                    <add baseAddress="http:localhost:8081" />
                </baseAddresses>
            </host>
            <endpoint address="Service1" binding="basicHttpBinding" contract="MyNameSpace.IService1" />
        </service>
        <service name="MyNamespace.Service2">
            <host>
                <baseAddresses>
                    <add baseAddress="http:localhost:8082" />
                </baseAddresses>
            </host>
            <endpoint address="Service2" binding="basicHttpBinding" contract="MyNameSpace.IService2" />
        </service>
    </services>
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:46:37.663

是的，但是公开这些服务是另一回事，你不能在一个地址上公开两个合约（除非你将它们包装在一个接口中，不推荐）。您需要为 web.config 中的两个服务合同提供不同的端点。例如，

```
 <services>
  <service name="TwoContracts.Service1">
    <endpoint address="" binding="basicHttpBinding" contract="TwoContracts.IService1">
    </endpoint>
    <host>
      <baseAddresses>
        <add baseAddress="http://yoururl.com/TwoContracts/Service1" />
      </baseAddresses>
    </host>
  </service>
  <service name="TwoContracts.Service2">
    <host>
      <baseAddresses>
        <add baseAddress="http://yoururl.com/TwoContracts/Service2" />
      </baseAddresses>
    </host>
    <endpoint address="" binding="basicHttpBinding"
      contract="TwoContracts.IService2" />
  </service>
</services> 
```

# git - 如何让 git 维护一个包含选择信息的 git.properties 文件

> ID：13584006
> 
> 赞同：4
> 
> 时间：2012-11-27T12:13:07.013
> 
> 标签：git, maven

我们需要在我们的 Maven 构建中使用 git 分支和提交哈希。

有没有一种简单的方法让 git 自动维护一个包含我们需要的信息的“git.properties”文件，以便它始终反映 git 的当前状态？

如果可能的话，我们希望这是一个与平台无关的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-29T11:50:23.053

注意（2016 年，但实际上创建于 2011 年 9 月），有一个 maven 插件专门用于在属性文件中捕获 Git 信息。
它是[**ktoso/maven-git-commit-id-plugin**](https://github.com/ktoso/maven-git-commit-id-plugin)之一。

```
 <dependency>
        <groupId>pl.project13.maven</groupId>
        <artifactId>git-commit-id-plugin</artifactId>
        <version>2.2.1</version>
    </dependency> 
```

然后：

```
 <plugins>
        <plugin>
            <groupId>pl.project13.maven</groupId>
            <artifactId>git-commit-id-plugin</artifactId>
            <version>2.2.1</version>
            <executions>
                <phase>initialize</phase>
                <execution>
                    <id>get-the-git-infos</id>
                    <goals>
                        <goal>revision</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <generateGitPropertiesFile>true</generateGitPropertiesFile>
            </configuration>
        </plugin>
    </plugins> 
```

就您而言，由于您“在 Maven 构建过程的早期就需要此信息”，因此我添加了`<phase>initialize</phase>`以便在默认的 jar maven 生命周期中尽早触发它。

然后我在执行我的插件期间使用它，以打印与 Git 相关的调试数据，这有助于了解该插件的确切版本。

```
 Properties prop = new Properties();
            ClassLoader loader = Thread.currentThread().getContextClassLoader();
            InputStream stream = loader.getResourceAsStream("git.properties");
            if (stream != null) {
                prop.load(stream);
                String dirty = prop.getProperty("git.dirty");
                if (dirty.equals("false")) {
                    dirty = "";
                } else {
                    dirty = "(dirty)";
                }
                ver = ver + prop.getProperty("git.build.version")+dirty;
                ver = ver + " - " + prop.getProperty("git.commit.id.describe");
                ver = ver + " - " + prop.getProperty("git.build.time");
            } else {
                throw new MojoFailureException("Unable to find MyProject git.properties");
            } 
```

# android - 谷歌电视应用的按钮大小

> ID：13584018
> 
> 赞同：1
> 
> 时间：2012-11-27T12:13:51.193
> 
> 标签：android, button, resolution, google-tv

谁能告诉我谷歌电视应用程序的按钮分辨率应该是什么，在谷歌电视屏幕上看起来应该不会太小。我需要精确的分辨率吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:40:04.080

如果您想要一个大按钮，请使用 300dp x 150dp

您的问题非常模棱两可且难以回答，因为您没有提供任何真实的上下文。考虑更详细地重新措辞。

Google TV 的分辨率为 960x540 DP。

如果您询问像素分辨率，那么您需要考虑两种模式。720p 产生 1280x720 像素，但您需要考虑过扫描（通常为 5%） 1080p 产生 1920x1080 像素（同样您需要考虑过扫描）

你可能想看看这篇文章：[http ://code.neenbedankt.com/dpi-hell](http://code.neenbedankt.com/dpi-hell)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T08:28:03.273

Google TV 在 XHDPI 模式下运行。（密度为 2.0）。标准按钮为 48dp。所以 96 像素是正确的。按钮在 48dp/96px 时看起来非常合理。

这涵盖了 1080p。一切都以 720p 重新缩放。Google 似乎不建议生成 TVDPI 位图。您只需将其设置为 1080p，如果运行 720p，则让 Google TV 缩小比例。布局看起来相同。位图受到一些损害，但并不可怕。我还没有做过任何 720p 位图。

# php - 如何使用 $_GET 从 URL 获取 javascript 数组

> ID：13584021
> 
> 赞同：0
> 
> 时间：2012-11-27T12:13:53.817
> 
> 标签：php, javascript, url, post, get

我有作为数组传递给 URL 的复选框，在页面重新加载时我应该将它们取回，以便记住检查的内容。

这是我的javascript，有问题的数组是'entry_reason'：

```
<script language="JavaScript">
<!--
function reload(nname, surname, birth_date, birth_country, birth_place, postal_code, address, residence, oib, license_number, license_iplace, passport_number, passport_iplace, entry_reason, myself, myselfeng)

{
// Setting the variable with the value of selected country's ID
var nname=document.getElementById('nname').value;
var surname=document.getElementById('surname').value;
var birth_date=document.getElementById('birth_date').value;
var c=document.getElementById('birth_country').value;
var city=document.getElementById('birth_place').value;
var postal_code=document.getElementById('postal_code').value;
var address=document.getElementById('address').value;
var residence=document.getElementById('residence').value;
var oib=document.getElementById('oib').value;
var license_number=document.getElementById('license_number').value;
var license_iplace=document.getElementById('license_iplace').value;
var passport_number=document.getElementById('passport_number').value;
var passport_iplace=document.getElementById('passport_iplace').value;
var entry_reason=[document.getElementById('entry_reason1').value, document.getElementById('entry_reason2').value, document.getElementById('entry_reason3').value, document.getElementById('entry_reason4').value, document.getElementById('entry_reason5').value, document.getElementById('entry_reason6').value, document.getElementById('entry_reason7').value];
var myself=document.getElementById('myself').value;
var myselfeng=document.getElementById('myselfeng').value;
// Sending the country id in the query string to retrieve the city list
self.location='blacklistprivateregister.php?nname=' + nname + '&surname=' + surname + '&birth_date=' + birth_date + '&birth_country=' + c + '&birth_place=' + city + '&postal_code=' + postal_code + '&address=' + address + '&residence=' + residence + '&oib=' + oib + '&license_number=' + license_number + '&license_iplace=' + license_iplace + '&passport_number=' + passport_number + '&passport_iplace=' + passport_iplace + '&entry_reason[]=' + entry_reason + '&myself=' + myself + '&myselfeng=' + myselfeng;
}
-->
</script> 
```

我得到的 URL 看起来像这样：

```
http://xxxxxxxx.php?nname=ivo&surname=&birth_date=2012-11-08&birth_country=Algeria&birth_place=Benguela&postal_code=10000&address=%C4%8Ci%C4%8Dkovina%20222&residence=Zagorne&oib=1231231232131&license_number=21312323213&license_iplace=Zagreb&passport_number=000493243244&passport_iplace=Vara%C5%BEdin&entry_reason[]=1,2,3,4,5,6,7&myself=aasddsad&myselfeng=asdadasd 
```

带有我的输入复选框的地方是这样的：

```
<legend><?php echo REASONFORENTRY_R; ?></legend>
        <?php 
            $e=array();
            if(isset($_POST['entry_reason'])){ $e=$_POST['entry_reason'];} 
            if($_GET['entry_reason']) {$e=$_GET['entry_reason'];} 
        ?>
        <p><input type="checkbox" name="entry_reason[]" id="entry_reason1" class="check" value="1"  <?php if(in_array('1', $e)) echo 'checked="checked" '; ?>/><?php echo ER1_R; ?></p>
         <p><input type="checkbox" name="entry_reason[]" id="entry_reason2" class="check"  value="2"  <?php if(in_array('2', $e)) echo 'checked="checked" '; ?>/><?php echo ER2_R; ?></p>
         <p><input type="checkbox" name="entry_reason[]" id="entry_reason3" class="check"  value="3"  <?php if(in_array('3', $e)) echo 'checked="checked" '; ?>/><?php echo ER3_R; ?></p>
         <p><input type="checkbox" name="entry_reason[]" id="entry_reason4" class="check"  value="4"   <?php if(in_array('4', $e)) echo 'checked="checked" '; ?>/><?php echo ER4_R; ?></p>
         <p><input type="checkbox" name="entry_reason[]" id="entry_reason5" class="check"  value="5"   <?php if(in_array('5', $e)) echo 'checked="checked" '; ?>/><?php echo ER5_R; ?></p>
         <p><input type="checkbox" name="entry_reason[]" id="entry_reason6" class="check"  value="6"  <?php if(in_array('6', $e)) echo 'checked="checked" '; ?>/><?php echo ER6_R; ?></p>
         <p><input type="checkbox" name="entry_reason[]" id="entry_reason7"  class="check" value="7"  <?php if(in_array('7', $e)) echo 'checked="checked" '; ?>/><?php echo ER7_R; ?></p> 
```

我在网站上有 3 个操作，其中 2 个我希望记住复选框：1）在 javascript 函数重新加载时页面重新加载 2）在提交时页面重新加载错误 - 这个现在可以与 $_POST 一起使用

我认为对于第一次重新加载，我应该将所有变量项从 URL 获取到 $_GET 并将它们传递给 $e 变量，但它似乎不起作用。

感谢所有帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T12:18:16.010

在 PHP 中使用`json_encode($array);`

[http://php.net/json_encode](http://php.net/json_encode)

在 Javascript 中，你有很多方法可以给那只猫换皮。我的解决方案是序列化这个数组并将其发送回 PHP。

[http://api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/)

# ruby-on-rails - 在 Rails 3 中返回空 JSON 响应的首选方式是什么？

> ID：13584025
> 
> 赞同：20
> 
> 时间：2012-11-27T12:14:11.887
> 
> 标签：ruby-on-rails, json, http, rest

当用户将 JSON POST 到 Rails 3 应用程序中的 /update/ 操作时，最好的响应方式是什么？

我只想发送一个带有 200 代码的空 JSON 响应，例如

```
head :no_content 
```

或者

```
render :nothing => true, :status => 204 
```

[（来自如何在 Rails 控制器中返回 HTTP 204 的](https://stackoverflow.com/questions/8592921/how-to-return-http-204-in-a-rails-controller)示例）。

通常我一直在这样做：

```
render :json => {} 
```

或者

```
render :json => 'ok' 
```

是否有首选或更多*Rails-y*方式？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-28T18:39:33.533

我的 Rails 3 应用程序使用这样的代码进行更新。html 和 xml 的代码是由 Rails 自动生成的，所以我只是使用相同的格式添加到 JSON 渲染器中。

```
respond_to do |format|
  if @product.update_attributes(params[:product])
    format.html { redirect_to(@product, :notice => 'Product was successfully updated.') }
    format.xml  { head :ok }
    format.json { head :ok }
  else
    format.html { render :action => "edit" }
    format.xml  { render :xml => @product.errors, :status => :unprocessable_entity }
    format.json { render :json => @product.errors, :status => :unprocessable_entity }
  end
end 
```

完美运行，这才是最重要的。

# java - 在 ANTLR 中分离多个规则时出错

> ID：13584027
> 
> 赞同：2
> 
> 时间：2012-11-27T12:14:18.283
> 
> 标签：java, antlr

我几乎完成了我与 ANTLR 的第一次冒险，这是一次相当愉快的旅行。不幸的是，总是只计算马蹄铁、手榴弹和核武器，对吧？

无论如何，我正在尝试解析如下所示的输入：

```
; IF AGE IS LESS THAN 21, STILL RETURN TRUE FOR OVERSEAS LOCATION \r\n
SHOW "AGE REQUIREMENTS FAILED" FOR \r\n
IF AGE < 21 THEN \r\n
LOCATION = "OVERSEAS" \r\n
ENDIF \r\n
\r\n
; NEED  SOMEONE WHO HAS WORKED FOR US FOR > 1 YEAR EXCEPT FOR CEO \r\n
SHOW "MINIMUM TIME REQUIREMENT NOT MET" FOR \r\n
IF STARTDATE > TODAY - 1 YEAR THEN \r\n
EMPLID=001 \r\n
ENDIF \r\n 
```

通常，如果测试失败，则会显示该消息。

无论如何，一个集合可以包含 1 个或多个 SHOW 规则。处理单个 SHOW 规则有效，但当输入流包含 > 1 个 SHOW 规则时，它不会“拆分”。

以下是语法中的相关规则：

```
showGroup returns [List<PolicyEvaluation> value]
  @init {List<PolicyEvaluation> peList = new ArrayList<PolicyEvaluation>();}
  : (expr1=show)* {peList.add($expr1.value);}
  {
    System.out.println("Entered policyGroup rule");
    $value = peList;
  }
  ;

// evaluate a single SHOW statement
show returns [PolicyEvaluation value]
  : ('SHOW' expr1=STRING 'FOR')? expr2=ifStatement EOL*
  {
    System.out.println("Entered show rule");
    Boolean expr2Value = (Boolean) $expr2.value;
    PolicyEvaluation pe = new PolicyEvaluation();
    if (expr1 == null) {
      pe.setValue(expr2Value);
      pe.setMessage(null);
    } else {
        if (expr2Value == false) {
          pe.setValue(false);
          pe.setMessage(expr1.getText());
        } else {
          pe.setValue(true);
          pe.setMessage(null);
        }   
    }
    $value = pe;
  }
  ;
// rules leading up to the show rule
// domain-specific grammar rules
STRING: '"' ID  (' ' ID)* '"'
  {
    System.out.println("Entered STRING lexer rule");
    // strip the quotes once we match this token
    setText(getText().substring(1, getText().length()-1));
  }
  ;
COMMENT: ';' (ID|' ')* EOL {$channel = HIDDEN;};
EOL: ('\r'|'\n'|'\r\n') {$channel = HIDDEN;};
SPACE: ' ' {$channel = HIDDEN;}; 
```

也许这很简单。任何帮助表示赞赏。

杰森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:26:48.157

尝试改变这个：`(expr1=show)* {peList.add($expr1.value);}`

对此：`(expr1=show {peList.add($expr1.value);})*`

该动作仅在所有匹配完成后才会触发`show`，让您在最后一个操作`expr1`。

# linux - 在 Linux 上为 tophat 安装 PThread

> ID：13584028
> 
> 赞同：1
> 
> 时间：2012-11-27T12:14:19.683
> 
> 标签：linux, pthreads, installation

[Bowtie](http://bowtie-bio.sourceforge.net/index.shtml)是 tophat 所需的程序。我需要这个程序来根据参考基因组映射几亿次读取。Bowtie 做映射部分，这需要很多 CPU。在 bowtie 的手册中有一个选项可以执行此多线程操作，但需要安装库 PThread。

[我从这个网站](http://staff.science.uva.nl/~bterwijn/Projects/PThread/)下载了 PThread 。将其提取到我的程序文件夹中，打开一个 shell 并站在这个目录中。输入命令“make”时，出现此错误，我不知道如何解决。

* * *

> 如果 /bin/sh ./libtool --tag=CXX --mode=compile g++ -DHAVE_CONFIG_H -I. -我。-我。-Wall -g -O2 -MT PThreadRun.lo -MD -MP -MF ".deps/PThreadRun.Tpo" -c -o PThreadRun.lo PThreadRun.cpp; \
> 
> 然后 mv -f ".deps/PThreadRun.Tpo" ".deps/PThreadRun.Plo"; 否则 rm -f ".deps/PThreadRun.Tpo"; 1号出口；菲
> 
> g++ -DHAVE_CONFIG_H -I。-我。-我。-Wall -g -O2 -MT PThreadRun.lo -MD -MP -MF .deps/PThreadRun.Tpo -c PThreadRun.cpp -fPIC -DPIC -o .libs/PThreadRun.o PThreadRun.cpp：在成员函数'pthread_t PThreadRun ：：开始（）'：
> 
> PThreadRun.cpp:28:38：错误：未在此范围内声明“redirectPthreadRun”
> 
> make: *** [PThreadRun.lo] 错误 1
> 
> make: 离开目录`/install_dir'
> 
> make: *** [all-recursive] 错误 1
> 
> make: 离开目录`/install_dir'
> 
> 制作：*** [全部] 错误 2

* * *

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:16:48.433

您需要先运行配置。根据安装说明：

> 这些是通用安装说明。
> 
> 包的每个目录中的`configure' shell script attempts to guess correct values for various system-dependent variables used during compilation. It uses those values to create a`Makefile'。它还可以创建一个或多个`.h' files containing system-dependent definitions. Finally, it creates a shell script`config.status'，您可以在将来运行以重新创建当前配置，以及一个文件`config.log' containing compiler output (useful mainly for debugging`configure')。
> 
> 它还可以使用一个可选文件（通常称为`config.cache' and enabled with`--cache-file=config.cache' 或简称为 `-C'）来保存其测试结果以加快重新配置。（默认情况下禁用缓存，以防止意外使用过时的缓存文件出现问题。）
> 
> 如果您需要做一些不寻常的事情来编译包，请尝试弄清楚`configure' could check whether to do them, and mail diffs or instructions to the address given in the`README' 的方式，以便在下一个版本中考虑它们。如果您正在使用缓存，并且在某些时候 `config.cache' 包含您不想保留的结果，您可以删除或编辑它。
> 
> 文件`configure.ac' (or`configure.in') 用于创建 `configure' by a program called`autoconf'。您只需要 `configure.ac' if you want to change it or regenerate`使用较新版本的 `autoconf' 进行配置。
> 
> 编译这个包的最简单方法是：
> 
> 1.  `cd' to the directory containing the package's source code and type` ./configure' 为您的系统配置软件包。如果您使用`csh' on an old version of System V, you might need to type` sh ./configure' 来阻止`csh' from trying to execute` configure' 本身。
>     
>     
>     
>     运行“配置”需要一段时间。在运行时，它会打印一些消息，告诉它正在检查哪些功能。
>     
>     
> 2.  输入“make”编译包。
>     
>     
> 3.  或者，键入“make check”以运行软件包附带的任何自检。
>     
>     
> 4.  键入“make install”来安装程序和任何数据文件和文档。
>     
>     
> 5.  `make clean'. To also remove the files that`您可以通过键入configure' created（以便您可以为不同类型的计算机编译包）从源代码目录中删除程序二进制文件和目标文件，键入`make distclean'. There is also a`make maintainer-clean' 目标，但这主要用于包的开发商。如果您使用它，您可能必须获得各种其他程序才能重新生成分发附带的文件。

# javascript - 等效于 Chrome 的 JS 打印设置

> ID：13584029
> 
> 赞同：6
> 
> 时间：2012-11-27T12:14:20.290
> 
> 标签：javascript, google-chrome, printing

有人知道 Google Chrome 插件或任何没有标题和自定义边距的打印解决方案吗？

[https://addons.mozilla.org/pt-BR/firefox/addon/js-print-setup/](https://addons.mozilla.org/pt-BR/firefox/addon/js-print-setup/)

JS Print Setup 是 FF 的完美解决方案

提前致谢

# phpexcel - 保存时条件格式丢失

> ID：13584033
> 
> 赞同：10
> 
> 时间：2012-11-27T12:14:34.587
> 
> 标签：phpexcel

我正在尝试创建一个简单的设置来加载模板、插入一些数据并保存为新文件。但是，我需要对某些单元格进行一些条件格式设置，当我获取新创建的文件时，条件格式设置丢失。它没有被其他格式覆盖，条件格式菜单中缺少规则。我正在使用 PHP 5.2、PHPExcel 1.7.8 和 Excel 2010。

```
<?php
class template {
    static $objPHPExcel;
    function __construct() {
        define('EOL',(PHP_SAPI == 'cli') ? PHP_EOL : '<br />');
        require_once '../Classes/PHPExcel/IOFactory.php';
        if (!file_exists("template.xlsx")) {
            exit("template missing." . EOL);
        }
        echo date('H:i:s') , " Load from Excel2007 file" , EOL;
        $objReader = PHPExcel_IOFactory::createReader('Excel2007');
        $objReader->setReadDataOnly(false);
        self::$objPHPExcel = $objReader->load("template.xlsx");
    }
    function insertdata($dataArray){ /* unused */ }
    function save($name){
        define('EOL',(PHP_SAPI == 'cli') ? PHP_EOL : '<br />');
        require_once '../Classes/PHPExcel/IOFactory.php';
        echo date('H:i:s') , " Write to Excel2007 format" , EOL;
        $objWriter = PHPExcel_IOFactory::createWriter(self::$objPHPExcel, 'Excel2007');
        $objWriter->save($name);
        echo date('H:i:s') , " File written to: ".$name , EOL;
    }
$temp=new template();
$temp->save("savethis.xlsx"); 
```

我正在尝试保留分级 2 色标（基于单元格值的格式，最小值是 Number=1 类型，Maximum 是 Number=10 类型）。有问题的单元格附加了一个引用另一个工作表的公式（所有数据都已正确保存）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-08T08:10:14.237

我发现从原始文件中获取“自动过滤器”、“数据验证”和“条件格式”是无法读取、修改和保存 XLS/XLSX 文件的，我找到的最终解决方案是使用PHPExcel 库。

可悲的是，正如另一个答案中所述（[https://stackoverflow.com/a/13172890/218418](https://stackoverflow.com/a/13172890/218418)）：

> PHPExcel 不是用于“编辑”工作簿文件的库：您不是在使用 PHPExcel 来更改文件，而是在更改可以从文件加载并随后可以写入文件的 PHPExcel 对象。

我很高兴使用仅具有数据验证、条件格式和自动过滤器的模板“编辑” Excel 文件是不可能的，但我理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T22:58:44.557

这是一个旧线程，但我最近遇到了同样的问题。似乎 PHPSpreadsheet（PHPExcel 的新化身）支持[创建具有条件格式的电子表格](https://phpspreadsheet.readthedocs.io/en/latest/topics/recipes/#conditional-formatting-a-cell)，但是当我尝试读取现有电子表格然后将其写入新文件时，条件格式被破坏。

我打算改用[xlsx-populate](https://www.npmjs.com/package/xlsx-populate#how-xlsx-populate-works) - 它是 nodeJS 而不是 PHP，但它似乎更擅长编写 Excel 文件，同时保持它不理解的电子表格功能（如条件格式）。

就我而言，我需要填充一张大型复杂电子表格。该工作表中的值用于其他工作表的计算和条件格式，我不需要直接修改。

使用 xlsx-populate，我能够打开电子表格、填充并保存它而不会破坏格式。

# magento - Magento 以编程方式创建捆绑产品

> ID：13584034
> 
> 赞同：3
> 
> 时间：2012-11-27T12:14:35.313
> 
> 标签：magento, import, bundle

在哪里可以找到在 PHP 中创建 BundleProducts 的完整且有效的示例？我正在使用 Magento 1.7

谷歌只给我片段

编辑：

直到现在我在这段代码中，但保存抛出

> 致命错误：在第 73 行的 \app\code\core\Mage\Bundle\Model\Selection.php 中的非对象上调用成员函数 getStoreId()

-

---删除了旧代码--

编辑 2 好的，注册产品后异常已经消失，我的捆绑包出现在后端，但捆绑包项目没有出现在管理面板中

```
$items = array();
    $selections = array ();

    $items[] = array(
                'title' => '',
                'option_id' => '',
                'delete' => '',
                'type' => 'radio',
                'required' => 'true',
                'position' => 0,
            );

    $items[] = array(
                'title' => '',
                'option_id' => '',
                'delete' => '',
                'type' => 'radio',
                'required' => 'true',
                'position' => 0,
            );

    $selection = array();
    $selection[] = array(
                'selection_id' => '',
                'option_id' => '',
                'product_id' => '2',
                'delete' => '',
                'selection_price_value' => '',
                'selection_price_type' => '0',
                'selection_qty' => '1',
                'selection_can_change_qty' => '0',
                'position' => '0',
                'is_default' => '1',
            );
    $selections[] = $selection;

    $selection = array();
    $selection[] = array(
                'selection_id' => '',
                'option_id' => '',
                'product_id' => '3',
                'delete' => '',
                'selection_price_value' => '',
                'selection_price_type' => '0',
                'selection_qty' => '1',
                'selection_can_change_qty' => '0',
                'position' => '0',
                'is_default' => '1',
            );
    $selections[] = $selection;

    $storeID = 1;
    $websiteIDs = array(1);
    $product = Mage::getModel('catalog/product');

    $p = array(
            'sku_type' => 0,
            'sku' => '123321',
            'name' => "BarProduct",
            'description' => 'Foo',
            'short_description' => 'Bar',
            'type_id' => 'bundle',
            'attribute_set_id' => 4,
            'weight_type' => 0,
            'visibility' => 4,
            'price_type' => 0,
            'price_view' => 0,
            'status' => 1,
            'created_at' => strtotime('now'),
            'category_ids' => $cats,
            'store_id' => $storeID,
            'website_ids' => $websiteIDs
    );
    $product->setData($p);

    Mage::register('product', $product);
    Mage::register('current_product', $product);

    $product->setBundleOptionsData($items);
    $product->setBundleSelectionsData($selections);
    $product->setCanSaveBundleSelections(true);
    $product->setCanSaveConfigurableAttributes(false);
    $product->setAffectBundleProductSelections(true);
    $product->setCanSaveCustomOptions(true);

    $product->save(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:37:37.790

好的，这段代码现在对我有用：

```
$processes = Mage::getSingleton('index/indexer')->getProcessesCollection();
    $processes->walk('setMode', array(Mage_Index_Model_Process::MODE_MANUAL));
    $processes->walk('save');

    $items = array();
    $selections = array ();

    $items[] = array(
            'title' => 'o1',
            'option_id' => '',
            'delete' => '',
            'type' => 'radio',
            'required' => '1',
            'position' => '0',
    );

    $items[] = array(
            'title' => 'o2',
            'option_id' => '',
            'delete' => '',
            'type' => 'radio',
            'required' => '1',
            'position' => '0',
    );

    $selection = array();
    $selection[] = array(
            'selection_id' => '',
            'option_id' => '',
            'product_id' => '2',
            'delete' => '',
            'selection_price_value' => '',
            'selection_price_type' => '0',
            'selection_qty' => '1',
            'selection_can_change_qty' => '0',
            'position' => '0',
            'is_default' => '1',
    );
    $selections[] = $selection;

    $selection = array();
    $selection[] = array(
            'selection_id' => '',
            'option_id' => '',
            'product_id' => '3',
            'delete' => '',
            'selection_price_value' => '',
            'selection_price_type' => '0',
            'selection_qty' => '1',
            'selection_can_change_qty' => '0',
            'position' => '0',
            'is_default' => '1',
    );
    $selections[] = $selection;

    $storeID = 1;
    $websiteIDs = array(1);
    Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

    $product = Mage::getModel('catalog/product');

    $cats = array(3);

    $p = array(
            'sku_type' => 1,
            'sku' => '123321',
            'name' => "BarProduct",
            'description' => 'Foo',
            'short_description' => 'Bar',
            'type_id' => 'bundle',
            'attribute_set_id' => 4,
            'weight_type' => 0,
            'visibility' => 4,
            'price_type' => 1,
            'price_view' => 0,
            'price' => 1.99,
            'has_options' => 1,
            'required_options' => 1,
            'status' => 1,
            'created_at' => strtotime('now'),
            'category_ids' => $cats,
            'store_id' => 0,
            'website_ids' => $websiteIDs,
            'weight' => 0,
            'weight_type' => 1,
            'delivery_time' => '',
            'generate_meta' => 1,
            'tax_class_id' => 1, //19%
    );
    $product->setData($p);

    Mage::register('product', $product);
    Mage::register('current_product', $product);
    $product->setCanSaveConfigurableAttributes(false);
    $product->setCanSaveCustomOptions(true);

    // Set the Bundle Options & Selection Data
    $product->setBundleOptionsData($items);
    $product->setBundleSelectionsData($selections);
    $product->setCanSaveBundleSelections(true);
    $product->setAffectBundleProductSelections(true);

    $product->save();

    $processes->walk('setMode', array(Mage_Index_Model_Process::MODE_REAL_TIME));
    $processes->walk('save');
    $processes->walk('reindexEverything'); 
```

# css - CSS居中文本，左边距

> ID：13584041
> 
> 赞同：0
> 
> 时间：2012-11-27T12:15:00.620
> 
> 标签：css

检查这个[jsfiddle](http://jsfiddle.net/j8CYE/8/)

是否可以在只有左侧边距的 div 中放置居中文本？基本上根据黑框将文本居中，但不会超出红框。

一种解决方案是放置`text-indent: -25%`，但是当我们调整窗口大小并使其更小时，文本的某些部分将被隐藏。

有任何想法吗？

更新：我希望文本以黑框为中心，但不要超出红框。而且我不希望右边有任何边距/填充

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:20:37.603

用于 **伪元素**

```
:after 
```

**写这个 CSS**

```
h1 {
    display:block;
    position:relative;
    background: red;
    height: 100px;
    line-height: 100px;
    margin: 0 0 0 0;
    font-size: 2em;
}

h1:after{
content:'';
    left:0;
    top:0;
    bottom:0;
    width:25%;
    position:absolute;
    background:#000;
} 
```

***[现场演示](http://jsfiddle.net/rohitazad/j8CYE/11/)***

***[有关此](http://www.quirksmode.org/css/beforeafter.html)***的更多信息

***[关于伪元素](http://reference.sitepoint.com/css/pseudoelements)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:35:30.110

check out this [FIDDLE](http://jsfiddle.net/j8CYE/16/)

first set you `div` width and then set your `h2` as `width: inherit`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:20:48.143

我不完全了解您要做什么，但`margin-left: auto; margin-right: auto;`可以解决问题。

[http://jsfiddle.net/j8CYE/14/](http://jsfiddle.net/j8CYE/14/)

# iphone - 在 Objective-C 中寻找性能小猪

> ID：13584043
> 
> 赞同：0
> 
> 时间：2012-11-27T12:15:02.867
> 
> 标签：iphone, objective-c, ios, macos, debugging

为了以特定的方法发现性能猪，我经常做这样的事情：

```
// Some line of code
LogTimeInterval();
// Some other line of code
LogTimeInterval();
// Some other line of code
LogTimeInterval(); 
```

其中`LogTimeInterval`定义为：

```
void LogTimeInterval()
{
    static NSDate *_previousDate;
    static NSInteger _counter = 0;
    NSDate *date = [NSDate date];
    if (!_previousDate) {
        _previousDate = date;
    }
    NSLog(@"LINE %d: %f", _counter++, [_previousDate timeIntervalSinceDate:date]);
    _previousDate = date;
} 
```

这使我能够发现哪些代码行花费了不必要的时间。但是，它需要修改代码，并且在有分支逻辑时会很麻烦。

是否有一种最有效的方法可以针对特定方法进行这种微观层面的分析？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:17:07.590

试试 XCode 的内置 Profiler。在它拥有的工具中，有一个时间分析器。检查此[链接以获取有关如何使用它的不错的教程](http://blancer.com/tutorials/flex/78335/apple-profiling-tools-shark-is-out-instruments-is-in/)

![在此处输入图像描述](../Images/fe25533e90219dface7546c406e09815.png)

# php - 如何从地址栏的 URL 中提取 .php

> ID：13584045
> 
> 赞同：1
> 
> 时间：2012-11-27T12:15:12.833
> 
> 标签：php, apache, url-rewriting

我尝试了以下对我来说很好的代码。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

使用它，我可以只通过键入来访问 index.php `localhost/myProject/index`。

我的问题是，如果我写，如何从 URL 中取出 .php`localhost/myProject/index.php`

我这样做是因为我在我的网站中创建了 100 个网页并且它们链接在一起，现在我不想在浏览器中显示 .php 并且没有时间更改代码（由于截止日期短:(）。

我正在使用 LAMP 堆栈并启用了 Apache 的 mod_rewrite。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:02:21.797

```
RewriteCond %{THE_REQUEST} \.php
RewriteRule ^(.*)\.php$ /$1 [R=301,L] 
```

# sharepoint - 更新 sharepoint 2010 列表中的 [创建者] 列

> ID：13584049
> 
> 赞同：1
> 
> 时间：2012-11-27T12:15:23.337
> 
> 标签：sharepoint, powershell, sharepoint-2010, metadata, restore

我昨天在 sharepoint 2010 中不小心删除了一个时间跟踪站点，不幸的是它没有进入回收站。我无法通过回收站的网站集管理员视图、我自己的视图或通过 powershell get-spdeletedsite cmd 找到它。

最后我恢复了数据库备份，使用了未附加的备份资源管理器，将站点作为 cmp，创建了一个空白站点，然后使用 PS 将 cmp 导入其中。

不幸的是，这些数据是时间跟踪数据，而创建该项目的人是重要的信息。当我恢复列表时，管理员用户名被用来创建所有条目，丢失了一个月的个人数据。

有谁知道如何：
a）恢复一个 cmp 并保留 created by 和其他元数据，
b）恢复一个 cmp（或等效）的列表，并保留 createdby 和其他元数据
c）更新现有列表的元数据列基于共享点数据库
d) 更新“创建者”列的任何其他方式

在此先感谢， 斯特夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:18:08.657

Export-SPWeb 和 Import-SPWeb 都有一个参数“IncludeUserSecurity”，正如它所说，它将包括导出站点的用户安全性。不幸的是，执行“CreatedBy”时仍然是导入用户，但最后一次更新用户将显示正确的用户。

不知道这些信息够不够？在最坏的情况下，您可以编写一些脚本，将 createdby 用户设置为与更新用户相同，因为在导入的站点中，默认情况下这将是错误的用户。

希望这可以帮助。

# magento - Magento 为访客/未经确认的用户放弃了购物车

> ID：13584054
> 
> 赞同：2
> 
> 时间：2012-11-27T12:15:36.860
> 
> 标签：magento, shopping-cart, magento-1.5

在 Magento 中，废弃的购物车仅适用于经过验证的注册用户。**有没有办法以编程**方式为来宾和未经确认的用户捕获它？

还有一种方法可以通过电子邮件发送警报吗？

请告诉我至少应该从哪里开始。我在一个论坛上发现，使用下面的 SQL 可以获取所有废弃的购物车，但我发现其中一些也从那里丢失了。

```
SELECT entity_id, customer_firstname, customer_email, items_count, grand_total, created_at
FROM sales_flat_quote
WHERE entity_id NOT IN (SELECT quote_item_id AS quote_id FROM sales_flat_order_item) 
AND items_count >0
AND customer_email IS NOT NULL
ORDER BY `sales_flat_quote`.`created_at` DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:33:49.160

我使用第三方系统来做这样的事情。它们成本高，但可能是一种有价值的工具，特别是如果您有冲动购买物品。由于用户没有在网站上登录，Magento 只能使用他们的会话将他们的购物篮存储为报价，因此除了内容之外，您无法获得有关客户或废弃购物车的任何详细信息。

如果您只对添加到人们废弃的篮子中的项目感兴趣，您可以创建自定义 SQL，查看您在示例中确定的两个表。Magento 为每个购物车创建一个报价，当客户购买时，该报价将转换为订单，因此 sales_quotes 表是您需要开始的地方。

关于第三方服务，它们通常涉及在站点上的文本框（例如电子邮件文本框、姓名等）上设置侦听器，这些侦听器在修改字段时使用 ajax 发布数据。如果您启用了它并且客户未能完成购买，则非常适合在客人结帐期间捕获数据。他们对添加到购物车按钮执行相同的操作，并在使用网站时开始建立客户和购物车中物品的自定义配置文件。

当有人向您订购时，您会调用另一个 ajax 请求，该请求会告诉第三方客户已购买，而那些没有收到此最终请求的第三方将其归类为废弃的购物车。这些系统中的大多数将在您可以定义的设定时间和日期后向客户发送电子邮件，并且您通常可以在不同的时间段发送许多电子邮件。您通常还可以查看所有已收集的废弃购物车和客户数据。

Magento 内置的废弃推车可以用于基本用途，但我不会依赖它。AFAIK 它无法触发废弃购物车的电子邮件。如上所述的电子邮件重定向可以非常有效地重新捕获放弃的销售。

看看像exacttarget这样的人或搜索magento email废弃的购物车模块，因为我相信周围有一些可以即插即用的magento。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-28T20:34:46.737

我遇到了同样的问题，并且能够通过以下方法将其解决到 magento 1.9.2 中：

**步骤1：**

**从app/code/core/Mage/Reports/Model/Resource/Quote/**复制**Collection.php**文件

 **至

**应用程序/代码/本地/法师/报告/模型/资源/报价/**

**第2步：**

从第 194 行替换以下代码

```
$customerName = $adapter->getConcatSql(array('cust_fname.value', 'cust_mname.value', 'cust_lname.value',), ' ');
    $this->getSelect()
        ->joinInner(
            array('cust_email' => $attrEmailTableName),
            'cust_email.entity_id = main_table.customer_id',
            array('email' => 'cust_email.email')
        )
        ->joinInner(
            array('cust_fname' => $attrFirstnameTableName),
            implode(' AND ', array(
                'cust_fname.entity_id = main_table.customer_id',
                $adapter->quoteInto('cust_fname.attribute_id = ?', (int) $attrFirstnameId),
            )),
            array('firstname' => 'cust_fname.value')
        )
        ->joinInner(
            array('cust_mname' => $attrMiddlenameTableName),
            implode(' AND ', array(
                'cust_mname.entity_id = main_table.customer_id',
                $adapter->quoteInto('cust_mname.attribute_id = ?', (int) $attrMiddlenameId),
            )),
            array('middlename' => 'cust_mname.value')
        )
        ->joinInner(
            array('cust_lname' => $attrLastnameTableName),
            implode(' AND ', array(
                'cust_lname.entity_id = main_table.customer_id',
                 $adapter->quoteInto('cust_lname.attribute_id = ?', (int) $attrLastnameId)
            )),
            array(
                'lastname'      => 'cust_lname.value',
                'customer_name' => $customerName
            )
        );

    $this->_joinedFields['customer_name'] = $customerName;
    $this->_joinedFields['email']         = 'cust_email.email'; 
```

和

```
 $customerName = $adapter->getConcatSql(array('main_table.customer_firstname', 'main_table.customer_middlename', 'main_table.customer_lastname',), ' ');
    $this->getSelect()
            ->columns(
                     array(
                         'email' => new Zend_Db_Expr('main_table.customer_email'), 
                         'firstname'  => new Zend_Db_Expr('main_table.customer_firstname'),
                         'middlename' => new Zend_Db_Expr('main_table.customer_middlename'),
                         'lastname'   => new Zend_Db_Expr('main_table.customer_lastname'),
                         'customer_name' => $customerName
                        )
            )
            ->where('main_table.customer_email IS NOT NULL');

    $this->_joinedFields['customer_name'] = $customerName;
    $this->_joinedFields['email']         = 'main_table.customer_email'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T07:43:08.353

如果您知道报价 ID，您可以为客人加载购物车。试试下面的代码：

```
$quote = Mage::getModel('sales/quote')->loadByIdWithoutStore($quoteId);
if ($quote) {
                      Mage::getSingleton('checkout/session')->setQuoteId($quoteId);
                    Mage::getSingleton('checkout/cart')->setQuote($quote);                      
} 
```**

# javascript - 表单不完整时提交jQuery验证表单

> ID：13584059
> 
> 赞同：0
> 
> 时间：2012-11-27T12:15:41.573
> 
> 标签：javascript, jquery, unobtrusive-validation

我正在使用 MVC3 和不显眼的验证。在某些情况下，如果选择了两个字段，即使表单不完整，我也想提交表单。我使用的 JavaScript 如下：

```
$('#form_section11').submit(function () {
        //event.preventDefault(); //stops form from submitting immediately 

        var validatorSection11 = $('#form_section11').validate();

        if (!$(this).valid()) {
            // or family name and date of birth
            var FamilyNameExists = true;
            var DateOfBirthExists = true;                

            if (validatorSection11.errorMap["FamilyName"]) { FamilyNameExists = false; }
            if (validatorSection11.errorMap["DateOfBirth"]) { DateOfBirthExists = false; }                

            // show the partial save rules
            $('#ParitalSaveIntructions').show();
            // show the partial save checkbox
            if (FamilyNameExists && DateOfBirthExists) {

                $("#AgreePartialSave").show();

                if ($("#PartialSave").is(':checked')) {
                    //  partial save has been requested
                    return true;    //// <- save not happening, INCORRECT action
                }
                // clear perinatalWomanView_PartialSave
                $("#PartialSave").removeAttr('checked');
            }
            return false;   // <- save not happening, correct action
        } 
        return true;    // <- save happens, correct action
    }); 
```

用户会看到一个复选框以确认不完整的提交。我已经指出了 JavaScript 工作的地方和失败的地方。

我也加了

```
var validatorSection11 = $('#form_section11').validate(
            {
                onsubmit: false
            }
        ); 
```

这没有效果。我的问题是：

为什么原版`return true`不能用？我使用`onsubmit: false`正确吗？有没有更好的方法来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:32:23.990

尝试使用变量 ( `save`) 而不是多个 return 语句：

```
$('#form_section11').submit(function (e) {
    'use strict';
    var self = $(this),
        save = false,
        FamilyNameExists = true,
        DateOfBirthExists = true,
        validatorSection11 = self.validate();
    if (!self.valid()) {
        // or family name and date of birth
        FamilyNameExists = true;
        DateOfBirthExists = true;
        if (validatorSection11.errorMap["FamilyName"]) {
            FamilyNameExists = false;
        }
        if (validatorSection11.errorMap["DateOfBirth"]) {
            DateOfBirthExists = false;
        }
        // show the partial save rules
        $('#ParitalSaveIntructions').show(); // should this be "Parital" or "Partial"
        // show the partial save checkbox
        if (FamilyNameExists && DateOfBirthExists) {
            $("#AgreePartialSave").show();
            //if ($("#PartialSave").is(':checked')) { // Comment in answer
            //    // partial save has been requested
            //    save = true;
            //}
            save = $("#PartialSave").is(':checked');
            // clear perinatalWomanView_PartialSave
            $("#PartialSave").removeAttr('checked');
        }
        //save = false; //This was overriding the `save = true` above.
    }
    if (!save) {
        e.preventDefault(); // stops form from submitting immediately 
    }
    return save;
}); 
```

此外，在“回答中的评论”部分，此部分可能仅在重新提交表单后执行，因为必须发生以下情况：

1.  `$("#AgreePartialSave").show();`必须执行并显示该部分。
2.  用户必须签入`$("#PartialSave")`才能`$("#PartialSave").is(':checked')`返回`true`。
3.  `$('#form_section11').submit()`必须再次触发处理程序的该部分以进行评估。

如果用户必须单击另一个按钮来进行部分保存，您可能希望将整个部分移动到该按钮处理程序中。

# c# - 如何使用鼠标滚轮启用缩放 Microsoft 图表控件

> ID：13584061
> 
> 赞同：25
> 
> 时间：2012-11-27T12:15:44.520
> 
> 标签：c#, microsoft-chart-controls

我在我的项目中使用 Microsoft Chart 控件，我想通过使用鼠标滚轮在 Chart Control 中启用缩放功能，我该如何实现？

但用户不必点击图表，它应该就像鼠标位置在我的图表上，而不是从那时起通过鼠标滚轮滚动它可以放大/缩小

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-26T23:52:38.870

你会想要使用这个`MouseWheel`事件。

首先使图表的两个轴都可缩放：

```
chart1.ChartAreas[0].AxisX.ScaleView.Zoomable = true;
chart1.ChartAreas[0].AxisY.ScaleView.Zoomable = true; 
```

并分配事件：

```
chart1.MouseWheel += chart1_MouseWheel; 
```

然后在事件处理程序中：

```
private void chart1_MouseWheel(object sender, MouseEventArgs e)
{
    var chart = (Chart)sender;
    var xAxis = chart.ChartAreas[0].AxisX;
    var yAxis = chart.ChartAreas[0].AxisY;

    try
    {
        if (e.Delta < 0) // Scrolled down.
        {
            xAxis.ScaleView.ZoomReset();
            yAxis.ScaleView.ZoomReset();
        }
        else if (e.Delta > 0) // Scrolled up.
        {
            var xMin = xAxis.ScaleView.ViewMinimum;
            var xMax = xAxis.ScaleView.ViewMaximum;
            var yMin = yAxis.ScaleView.ViewMinimum;
            var yMax = yAxis.ScaleView.ViewMaximum;

            var posXStart = xAxis.PixelPositionToValue(e.Location.X) - (xMax - xMin) / 4;
            var posXFinish = xAxis.PixelPositionToValue(e.Location.X) + (xMax - xMin) / 4;
            var posYStart = yAxis.PixelPositionToValue(e.Location.Y) - (yMax - yMin) / 4;
            var posYFinish = yAxis.PixelPositionToValue(e.Location.Y) + (yMax - yMin) / 4;

            xAxis.ScaleView.Zoom(posXStart, posXFinish);
            yAxis.ScaleView.Zoom(posYStart, posYFinish);
        }
    }
    catch { }            
} 
```

该`e.Delta`属性会告诉您已经完成了多少轮“滚动”，并且可能很有用。
完全向外滚动将缩小整个过程。

可能有一种更清洁的方法可以做到这一点，但它确实存在。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-29T15:44:39.267

我从上面修改了代码并添加了反向缩放。因此，当您向后旋转鼠标滚轮时，图表会缩小。另外我不建议使用 2^n 作为间隔的分隔符，因为它会导致滞后。

```
numberOfZoom - counter of Zooming
private void Chart1_MouseWheel(object sender, MouseEventArgs e)
    {
        var chart = (Chart)sender;
        var xAxis = chart.ChartAreas[0].AxisX;
        var yAxis = chart.ChartAreas[0].AxisY;

        var xMin = xAxis.ScaleView.ViewMinimum;
        var xMax = xAxis.ScaleView.ViewMaximum;
        var yMin = yAxis.ScaleView.ViewMinimum;
        var yMax = yAxis.ScaleView.ViewMaximum;

        int IntervalX = 3;
        int IntervalY = 3;
        try
        {
            if (e.Delta < 0 && numberOfZoom > 0) // Scrolled down.
            {
                var posXStart = xAxis.PixelPositionToValue(e.Location.X) - IntervalX *2/ Math.Pow(2, numberOfZoom);
                var posXFinish = xAxis.PixelPositionToValue(e.Location.X) + IntervalX *2/ Math.Pow(2, numberOfZoom);
                var posYStart = yAxis.PixelPositionToValue(e.Location.Y) - IntervalY*2 / Math.Pow(2, numberOfZoom);
                var posYFinish = yAxis.PixelPositionToValue(e.Location.Y) + IntervalY*2 / Math.Pow(2, numberOfZoom);

                if (posXStart < 0) posXStart = 0;
                if (posYStart < 0) posYStart = 0;
                if (posYFinish > yAxis.Maximum) posYFinish = yAxis.Maximum;
                if (posXFinish > xAxis.Maximum) posYFinish = xAxis.Maximum;
                xAxis.ScaleView.Zoom(posXStart, posXFinish);
                yAxis.ScaleView.Zoom(posYStart, posYFinish);
                numberOfZoom--;
            }else if (e.Delta < 0 && numberOfZoom == 0) //Last scrolled dowm
            {
                yAxis.ScaleView.ZoomReset();
                xAxis.ScaleView.ZoomReset();
            }
            else if (e.Delta > 0) // Scrolled up.
            {

                var posXStart = xAxis.PixelPositionToValue(e.Location.X) - IntervalX  / Math.Pow(2, numberOfZoom);
                var posXFinish = xAxis.PixelPositionToValue(e.Location.X) + IntervalX / Math.Pow(2, numberOfZoom);
                var posYStart = yAxis.PixelPositionToValue(e.Location.Y) - IntervalY  / Math.Pow(2, numberOfZoom);
                var posYFinish = yAxis.PixelPositionToValue(e.Location.Y) + IntervalY  / Math.Pow(2, numberOfZoom);

                xAxis.ScaleView.Zoom(posXStart, posXFinish);
                yAxis.ScaleView.Zoom(posYStart, posYFinish);
                numberOfZoom++;
            }

            if (numberOfZoom < 0) numberOfZoom = 0;
        }
        catch { }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-31T07:52:40.183

我从上面修改了代码并使用 Stack 添加了反向缩放。

```
private class ZoomFrame
{
    public double XStart { get; set; }
    public double XFinish { get; set; }
    public double YStart { get; set; }
    public double YFinish { get; set; }
}

private readonly Stack<ZoomFrame> _zoomFrames = new Stack<ZoomFrame>();
private void chart1_MouseWheel(object sender, MouseEventArgs e)
{
    var chart = (Chart)sender;
    var xAxis = chart.ChartAreas[0].AxisX;
    var yAxis = chart.ChartAreas[0].AxisY;

    try
    {
        if (e.Delta < 0)
        {
            if (0 < _zoomFrames.Count)
            {
                var frame = _zoomFrames.Pop();
                if (_zoomFrames.Count == 0)
                {
                    xAxis.ScaleView.ZoomReset();
                    yAxis.ScaleView.ZoomReset();
                }
                else
                {
                    xAxis.ScaleView.Zoom(frame.XStart, frame.XFinish);
                    yAxis.ScaleView.Zoom(frame.YStart, frame.YFinish);
                }
            }
        }
        else if (e.Delta > 0)
        {
            var xMin = xAxis.ScaleView.ViewMinimum;
            var xMax = xAxis.ScaleView.ViewMaximum;
            var yMin = yAxis.ScaleView.ViewMinimum;
            var yMax = yAxis.ScaleView.ViewMaximum;

            _zoomFrames.Push(new ZoomFrame { XStart = xMin, XFinish = xMax, YStart = yMin, YFinish = yMax });

            var posXStart = xAxis.PixelPositionToValue(e.Location.X) - (xMax - xMin) / 4;
            var posXFinish = xAxis.PixelPositionToValue(e.Location.X) + (xMax - xMin) / 4;
            var posYStart = yAxis.PixelPositionToValue(e.Location.Y) - (yMax - yMin) / 4;
            var posYFinish = yAxis.PixelPositionToValue(e.Location.Y) + (yMax - yMin) / 4;

            xAxis.ScaleView.Zoom(posXStart, posXFinish);
            yAxis.ScaleView.Zoom(posYStart, posYFinish);
        }
    }
    catch { }         
} 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-19T15:57:24.283

派对迟到了，但我今天自己也遇到了这个挑战。我确信以下可以改进，但这是我想出的。我用 .net 4.5.2 和 4.6 对此进行了测试，所以我不确定它是否适用于较旧的框架。

我结合了过去的几个答案，并做出了以下几点：

```
using System;
using System.Windows.Forms;
using System.Windows.Forms.DataVisualization.Charting;

namespace ExampleApp
{
    public partial class Form1 : Form
    {
        private const float CZoomScale = 4f;
        private int FZoomLevel = 0;

        public Form1()
        {
            InitializeComponent();
            chart1.MouseWheel += Chart1_MouseWheel;
        }

        private void Chart1_MouseEnter(object sender, EventArgs e)
        {
            if (!chart1.Focused)
                chart1.Focus();
        }

        private void Chart1_MouseLeave(object sender, EventArgs e)
        {
            if (chart1.Focused)
                chart1.Parent.Focus();
        }

        private void Chart1_MouseWheel(object sender, MouseEventArgs e)
        {
            try {
                Axis xAxis = chart1.ChartAreas[0].AxisX;
                double xMin = xAxis.ScaleView.ViewMinimum;
                double xMax = xAxis.ScaleView.ViewMaximum;
                double xPixelPos = xAxis.PixelPositionToValue(e.Location.X);

                if (e.Delta < 0 && FZoomLevel > 0) {
                    // Scrolled down, meaning zoom out
                    if (--FZoomLevel <= 0) {
                        FZoomLevel = 0;
                        xAxis.ScaleView.ZoomReset();
                    } else {
                        double xStartPos = Math.Max(xPixelPos - (xPixelPos - xMin) * CZoomScale, 0);
                        double xEndPos = Math.Min(xStartPos + (xMax - xMin) * CZoomScale, xAxis.Maximum);
                        xAxis.ScaleView.Zoom(xStartPos, xEndPos);
                    }
                } else if (e.Delta > 0) {
                    // Scrolled up, meaning zoom in
                    double xStartPos = Math.Max(xPixelPos - (xPixelPos - xMin) / CZoomScale, 0);
                    double xEndPos = Math.Min(xStartPos + (xMax - xMin) / CZoomScale, xAxis.Maximum);
                    xAxis.ScaleView.Zoom(xStartPos, xEndPos);
                    FZoomLevel++;
                }
            } catch { }
        }
    }
} 
```

# android - 将 EditText 添加到警报对话框。

> ID：13584063
> 
> 赞同：9
> 
> 时间：2012-11-27T12:15:53.697
> 
> 标签：android, android-alertdialog

我有以下创建警报对话框的代码，并向其中添加了两个编辑文本，但是一旦我运行应用程序，EditText 中的值将不会被检索，并且我的应用程序因 NullPointerException 而崩溃：

代码是：

```
AlertDialog.Builder alert = new AlertDialog.Builder(this);
        LayoutInflater inflater=this.getLayoutInflater();
        final EditText usernameInput=(EditText)findViewById(R.id.dialogusername);
        final EditText passwordInput=(EditText)findViewById(R.id.dialogpassword);   
        alert.setView(inflater.inflate(R.layout.dialog,null));
        alert.setTitle("Enter Password");
        alert.setMessage("Enter password to remove the app:");
        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            //provide user with caution before uninstalling
            //also here should be added a AsyncTask that going to read the password and once its checked the password is correct the app will be removed
            value1=usernameInput.getText().toString();
            value2=passwordInput.getText().toString();
            if(value1.equals(null)&&value2.equals(null))
            {Toast.makeText(context, "Enter username and password", Toast.LENGTH_SHORT).show();}
         }
        });
        });
        alert.show(); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-28T15:11:22.703

感谢大家为回答我的问题所做的贡献，我想我已经找到了我上面发布的问题的解决方案：

```
AlertDialog.Builder alert = new AlertDialog.Builder(MyFeedActivity.this);
        LayoutInflater inflater=MyFeedActivity.this.getLayoutInflater();
        //this is what I did to added the layout to the alert dialog
        View layout=inflater.inflate(R.layout.dialog,null);       
        alert.setView(layout);
        final EditText usernameInput=(EditText)layout.findViewById(R.id.dialogusername);
        final EditText passwordInput=(EditText)layout.findViewById(R.id.dialogpassword); 
```

而且我认为问题在于我无法在警报对话框中获取 EidtText，但是通过上面的代码执行此操作，一切对我来说都很好。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-27T12:20:22.280

用这个：

```
final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
    final EditText input = new EditText(this);
    input.setHint("hint");
    alertDialog.setTitle("title");
    alertDialog.setMessage(message);
    alertDialog.setView(input); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T12:18:32.980

尝试像这样编辑

```
final EditText usernameInput=(EditText)this.findViewById(R.id.dialogusername);
final EditText passwordInput=(EditText)this.findViewById(R.id.dialogpassword); 
```

或者

```
final EditText usernameInput=(EditText)alert.findViewById(R.id.dialogusername);
final EditText passwordInput=(EditText)alert.findViewById(R.id.dialogpassword); 
```

# java - 在windows屏幕上实时显示数据库表

> ID：13584067
> 
> 赞同：-3
> 
> 时间：2012-11-27T12:16:19.237
> 
> 标签：java, sql-server, real-time

我有一个在远程主机上运行的数据库表。我需要编写一个程序以在 Windows 窗体或桌面屏幕上的 html 页面上显示此表。该程序需要以相等的时间间隔运行（比如 30 分钟）。

每 30 分钟后，程序将运行一次，并且需要覆盖该表单或页面上的数据。可以有任何方法来解决这个问题。更喜欢Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:27:45.973

两种不同的方法（实际上是三种，第三种是运行 java-applet）

最粗略的方法是在您的 html 中放置一个刷新标头，例如

```
<meta http-equiv="REFRESH" content="600;URL=page.php"> 
```

您必须将 page.php 与您要重新加载的页面的地址进行交换（这基本上是在 600 秒后，加载页面“page.php”您将无法将其同步到 dbupdates，因为刷新在页面加载后的固定时间发生。因此，您重新加载的频率将取决于您的服务器负载和您接受的延迟时间之间的折衷。此外，如果有一些信息，您可能希望将其作为一个单独的框架（哎呀！）是在页面上输入的。

更现代一点，使用 javascript ajax 和定时事件。您想为此使用 jquery 或prototype.js 或其他库。鉴于工作站和服务器上的实时时钟是同步的，您可以在此处将重新加载同步到数据库更新。

# postgresql - 将来自不同表的查询结果添加到 PostgreSQL 中的新表

> ID：13584073
> 
> 赞同：2
> 
> 时间：2012-11-27T12:16:44.450
> 
> 标签：postgresql, output

我有 20 个表，我想对所有表执行相同的查询。随后，我想将所有查询的结果添加到一个新表中。表格包括温度、坐标和时间日期列。查询是关于创建每个表的子集。生成的新表应包含每个查询的结果。换句话说，它应该包括上述 3 列，这些列由来自不同表的查询结果填充。

上述代码应适用于所有表格。是：

```
select *
FROM s3
WHERE dt::timestamptz BETWEEN DATE '2007-09-14' AND DATE '2007-10-03' 
  AND extract(hour FROM dt::timestamptz) BETWEEN 8 AND 20
ORDER BY dt 
```

因此，应该有一个新表，其中包括相对于所有表的查询输出的温度、坐标和 time_date 列。注意：填充顺序在新表中并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:24:41.940

你总是可以使用`union all`：

```
create table T as
select * from ...
union all
select * from ...
union all
... 
```

# java - 强制 eclipse 忽略“COUNTRY_ISO 无法解析或不是字段”错误并编译

> ID：13584081
> 
> 赞同：2
> 
> 时间：2012-11-27T12:17:02.377
> 
> 标签：java, android, eclipse

我正在做一些 android/CM9 学习，并试图将一些功能从一个股票应用程序中分离出来，以便：

1.  了解它是如何工作的
2.  做一个小改变。

在这种情况下，我正在学习使用联系人的最近通话列表。我正在尝试使用该字段`Calls.COUNTRY_ISO`，与股票应用程序相同，但 Eclipse 坚持“无法解析 COUNTRY_ISO 或不是字段”。我知道这一点，因为它通过 @hide 属性隐藏在 SDK 中，因此也知道该字段确实存在。

我的字符串数组的声明：

```
import android.provider.CallLog.Calls

public static final String[] _PROJECTION = new String[] {
            Calls._ID,                       // 0
            Calls.NUMBER,                    // 1
            Calls.DATE,                      // 2
            Calls.DURATION,                  // 3
            Calls.TYPE,                      // 4
            Calls.COUNTRY_ISO,               // 5
            Calls.VOICEMAIL_URI,             // 6
            Calls.GEOCODED_LOCATION,         // 7
            Calls.CACHED_NAME,               // 8
            Calls.CACHED_NUMBER_TYPE,        // 9
            Calls.CACHED_NUMBER_LABEL,       // 10
            Calls.CACHED_LOOKUP_URI,         // 11
            Calls.CACHED_MATCHED_NUMBER,     // 12
            Calls.CACHED_NORMALIZED_NUMBER,  // 13
            Calls.CACHED_PHOTO_ID,           // 14
            Calls.CACHED_FORMATTED_NUMBER,   // 15
            Calls.IS_READ,                   // 16
    }; 
```

是否可以强制 Eclipse 忽略此错误（仅适用于此数组）并编译？

Full Class是文件CallLog.java中的android.provider.calllog.Calls

```
/*
 * Copyright (C) 2006 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package android.provider;

import com.android.internal.telephony.CallerInfo;
import com.android.internal.telephony.Connection;

import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.net.Uri;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.provider.ContactsContract.DataUsageFeedback;
import android.text.TextUtils;

/**
 * The CallLog provider contains information about placed and received calls.
 */
public class CallLog {
    public static final String AUTHORITY = "call_log";

    /**
     * The content:// style URL for this provider
     */
    public static final Uri CONTENT_URI =
        Uri.parse("content://" + AUTHORITY);

    /**
     * Contains the recent calls.
     */
    public static class Calls implements BaseColumns {
        /**
         * The content:// style URL for this table
         */
        public static final Uri CONTENT_URI =
                Uri.parse("content://call_log/calls");

        /**
         * The content:// style URL for filtering this table on phone numbers
         */
        public static final Uri CONTENT_FILTER_URI =
                Uri.parse("content://call_log/calls/filter");

        /**
         * An optional URI parameter which instructs the provider to allow the operation to be
         * applied to voicemail records as well.
         * <p>
         * TYPE: Boolean
         * <p>
         * Using this parameter with a value of {@code true} will result in a security error if the
         * calling package does not have appropriate permissions to access voicemails.
         *
         * @hide
         */
        public static final String ALLOW_VOICEMAILS_PARAM_KEY = "allow_voicemails";

        /**
         * Content uri with {@link #ALLOW_VOICEMAILS_PARAM_KEY} set. This can directly be used to
         * access call log entries that includes voicemail records.
         *
         * @hide
         */
        public static final Uri CONTENT_URI_WITH_VOICEMAIL = CONTENT_URI.buildUpon()
                .appendQueryParameter(ALLOW_VOICEMAILS_PARAM_KEY, "true")
                .build();

        /**
         * The default sort order for this table
         */
        public static final String DEFAULT_SORT_ORDER = "date DESC";

        /**
         * The MIME type of {@link #CONTENT_URI} and {@link #CONTENT_FILTER_URI}
         * providing a directory of calls.
         */
        public static final String CONTENT_TYPE = "vnd.android.cursor.dir/calls";

        /**
         * The MIME type of a {@link #CONTENT_URI} sub-directory of a single
         * call.
         */
        public static final String CONTENT_ITEM_TYPE = "vnd.android.cursor.item/calls";

        /**
         * The type of the call (incoming, outgoing or missed).
         * <P>Type: INTEGER (int)</P>
         */
        public static final String TYPE = "type";

        /** Call log type for incoming calls. */
        public static final int INCOMING_TYPE = 1;
        /** Call log type for outgoing calls. */
        public static final int OUTGOING_TYPE = 2;
        /** Call log type for missed calls. */
        public static final int MISSED_TYPE = 3;
        /**
         * Call log type for voicemails.
         * @hide
         */
        public static final int VOICEMAIL_TYPE = 4;

        /**
         * The phone number as the user entered it.
         * <P>Type: TEXT</P>
         */
        public static final String NUMBER = "number";

        /**
         * The ISO 3166-1 two letters country code of the country where the
         * user received or made the call. (HIDDEN)
         * <P>
         * Type: TEXT
         * </P>
         *
         * @hide
         */
        public static final String COUNTRY_ISO = "countryiso";

        /**
         * The date the call occured, in milliseconds since the epoch
         * <P>Type: INTEGER (long)</P>
         */
        public static final String DATE = "date";

        /**
         * The duration of the call in seconds
         * <P>Type: INTEGER (long)</P>
         */
        public static final String DURATION = "duration";

        /**
         * Whether or not the call has been acknowledged
         * <P>Type: INTEGER (boolean)</P>
         */
        public static final String NEW = "new";

        /**
         * The cached name associated with the phone number, if it exists.
         * This value is not guaranteed to be current, if the contact information
         * associated with this number has changed.
         * <P>Type: TEXT</P>
         */
        public static final String CACHED_NAME = "name";

        /**
         * The cached number type (Home, Work, etc) associated with the
         * phone number, if it exists.
         * This value is not guaranteed to be current, if the contact information
         * associated with this number has changed.
         * <P>Type: INTEGER</P>
         */
        public static final String CACHED_NUMBER_TYPE = "numbertype";

        /**
         * The cached number label, for a custom number type, associated with the
         * phone number, if it exists.
         * This value is not guaranteed to be current, if the contact information
         * associated with this number has changed.
         * <P>Type: TEXT</P>
         */
        public static final String CACHED_NUMBER_LABEL = "numberlabel";

        /**
         * URI of the voicemail entry. Populated only for {@link #VOICEMAIL_TYPE} (HIDDEN).
         * <P>Type: TEXT</P>
         * @hide
         */
        public static final String VOICEMAIL_URI = "voicemail_uri";

        /**
         * Whether this item has been read or otherwise consumed by the user.
         * <p>
         * Unlike the {@link #NEW} field, which requires the user to have acknowledged the
         * existence of the entry, this implies the user has interacted with the entry. 
         * <P>Type: INTEGER (boolean)</P>
         */
        public static final String IS_READ = "is_read";

        /**
         * A geocoded location for the number associated with this call.
         * <p>
         * The string represents a city, state, or country associated with the number. (HIDDEN)
         * <P>Type: TEXT</P>
         * @hide
         */
        public static final String GEOCODED_LOCATION = "geocoded_location";

        /**
         * The cached URI to look up the contact associated with the phone number, if it exists.
         * This value is not guaranteed to be current, if the contact information
         * associated with this number has changed. (HIDDEN)
         * <P>Type: TEXT</P>
         * @hide
         */
        public static final String CACHED_LOOKUP_URI = "lookup_uri";

        /**
         * The cached phone number of the contact which matches this entry, if it exists.
         * This value is not guaranteed to be current, if the contact information
         * associated with this number has changed. (HIDDEN)
         * <P>Type: TEXT</P>
         * @hide
         */
        public static final String CACHED_MATCHED_NUMBER = "matched_number";

        /**
         * The cached normalized version of the phone number, if it exists.
         * This value is not guaranteed to be current, if the contact information
         * associated with this number has changed. (HIDDEN)
         * <P>Type: TEXT</P>
         * @hide
         */
        public static final String CACHED_NORMALIZED_NUMBER = "normalized_number";

        /**
         * The cached photo id of the picture associated with the phone number, if it exists.
         * This value is not guaranteed to be current, if the contact information
         * associated with this number has changed. (HIDDEN)
         * <P>Type: INTEGER (long)</P>
         * @hide
         */
        public static final String CACHED_PHOTO_ID = "photo_id";

        /**
         * The cached formatted phone number.
         * This value is not guaranteed to be present. (HIDDEN)
         * <P>Type: TEXT</P>
         * @hide
         */
        public static final String CACHED_FORMATTED_NUMBER = "formatted_number";

        /**
         * Adds a call to the call log.
         *
         * @param ci the CallerInfo object to get the target contact from.  Can be null
         * if the contact is unknown.
         * @param context the context used to get the ContentResolver
         * @param number the phone number to be added to the calls db
         * @param presentation the number presenting rules set by the network for
         *        "allowed", "payphone", "restricted" or "unknown"
         * @param callType enumerated values for "incoming", "outgoing", or "missed"
         * @param start time stamp for the call in milliseconds
         * @param duration call duration in seconds
         *
         * {@hide}
         */
        public static Uri addCall(CallerInfo ci, Context context, String number,
                int presentation, int callType, long start, int duration) {
            final ContentResolver resolver = context.getContentResolver();

            // If this is a private number then set the number to Private, otherwise check
            // if the number field is empty and set the number to Unavailable
            if (presentation == Connection.PRESENTATION_RESTRICTED) {
                number = CallerInfo.PRIVATE_NUMBER;
                if (ci != null) ci.name = "";
            } else if (presentation == Connection.PRESENTATION_PAYPHONE) {
                number = CallerInfo.PAYPHONE_NUMBER;
                if (ci != null) ci.name = "";
            } else if (TextUtils.isEmpty(number)
                    || presentation == Connection.PRESENTATION_UNKNOWN) {
                number = CallerInfo.UNKNOWN_NUMBER;
                if (ci != null) ci.name = "";
            }

            ContentValues values = new ContentValues(5);

            values.put(NUMBER, number);
            values.put(TYPE, Integer.valueOf(callType));
            values.put(DATE, Long.valueOf(start));
            values.put(DURATION, Long.valueOf(duration));
            values.put(NEW, Integer.valueOf(1));
            if (callType == MISSED_TYPE) {
                values.put(IS_READ, Integer.valueOf(0));
            }
            if (ci != null) {
                values.put(CACHED_NAME, ci.name);
                values.put(CACHED_NUMBER_TYPE, ci.numberType);
                values.put(CACHED_NUMBER_LABEL, ci.numberLabel);
            }

            if ((ci != null) && (ci.person_id > 0)) {
                // Update usage information for the number associated with the contact ID.
                // We need to use both the number and the ID for obtaining a data ID since other
                // contacts may have the same number.

                final Cursor cursor;

                // We should prefer normalized one (probably coming from
                // Phone.NORMALIZED_NUMBER column) first. If it isn't available try others.
                if (ci.normalizedNumber != null) {
                    final String normalizedPhoneNumber = ci.normalizedNumber;
                    cursor = resolver.query(Phone.CONTENT_URI,
                            new String[] { Phone._ID },
                            Phone.CONTACT_ID + " =? AND " + Phone.NORMALIZED_NUMBER + " =?",
                            new String[] { String.valueOf(ci.person_id), normalizedPhoneNumber},
                            null);
                } else {
                    final String phoneNumber = ci.phoneNumber != null ? ci.phoneNumber : number;
                    cursor = resolver.query(Phone.CONTENT_URI,
                            new String[] { Phone._ID },
                            Phone.CONTACT_ID + " =? AND " + Phone.NUMBER + " =?",
                            new String[] { String.valueOf(ci.person_id), phoneNumber},
                            null);
                }

                if (cursor != null) {
                    try {
                        if (cursor.getCount() > 0 && cursor.moveToFirst()) {
                            final Uri feedbackUri = DataUsageFeedback.FEEDBACK_URI.buildUpon()
                                    .appendPath(cursor.getString(0))
                                    .appendQueryParameter(DataUsageFeedback.USAGE_TYPE,
                                                DataUsageFeedback.USAGE_TYPE_CALL)
                                    .build();
                            resolver.update(feedbackUri, new ContentValues(), null, null);
                        }
                    } finally {
                        cursor.close();
                    }
                }
            }

            Uri result = resolver.insert(CONTENT_URI, values);

            removeExpiredEntries(context);

            return result;
        }

        /**
         * Query the call log database for the last dialed number.
         * @param context Used to get the content resolver.
         * @return The last phone number dialed (outgoing) or an empty
         * string if none exist yet.
         */
        public static String getLastOutgoingCall(Context context) {
            final ContentResolver resolver = context.getContentResolver();
            Cursor c = null;
            try {
                c = resolver.query(
                    CONTENT_URI,
                    new String[] {NUMBER},
                    TYPE + " = " + OUTGOING_TYPE,
                    null,
                    DEFAULT_SORT_ORDER + " LIMIT 1");
                if (c == null || !c.moveToFirst()) {
                    return "";
                }
                return c.getString(0);
            } finally {
                if (c != null) c.close();
            }
        }

        private static void removeExpiredEntries(Context context) {
            final ContentResolver resolver = context.getContentResolver();
            resolver.delete(CONTENT_URI, "_id IN " +
                    "(SELECT _id FROM calls ORDER BY " + DEFAULT_SORT_ORDER
                    + " LIMIT -1 OFFSET 500)", null);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:20:53.940

标有 @hide 注释的字段似乎受到限制，类似于`sun.*`普通 Java 运行时中的包。尝试访问这些值通常被认为是一个坏主意。为什么需要访问它们？

# c# - 尝试使用字符串名称创建实例，即类名 bt GetType 方法返回 null

> ID：13584083
> 
> 赞同：-3
> 
> 时间：2012-11-27T12:17:19.723
> 
> 标签：c#, .net

我尝试使用字符串名称创建实例，即类名 bt GetType 方法返回 null

```
namespace DocSys
{
  public class Documents
  {
   Control ctlControl = new Control();
    //strProgID= DocCtl.Button
   Type type = Type.GetType(strProgID);  // null Value in Type type
   ctlControl  = (Control)Activator.CreateInstance(t);
  }
} 
```

目前 strProgID 包含 DocCtl.Button（Button 是一个用户控件，它的命名空间是 DocCtl）

我可以创建一个 strProgID 的对象吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:31:29.950

为了从字符串中获取该类型，您需要使用该类型的完全限定名称，应该类似于`DocCtl.Button,AssemblyThatContainsThisNamespace`

# c# - 如何访问整个 AutoFac 容器以在 Orchard 中注册依赖项？

> ID：13584085
> 
> 赞同：5
> 
> 时间：2012-11-27T12:17:33.620
> 
> 标签：c#, asp.net-mvc, orchardcms

这个问题很简单。我想访问整个`AutoFac`容器，以便我可以在其中注册我的依赖项。

**评论：**

我不同意`IDependency`在我的项目中从原因继承它会导致循环引用（两个程序集）。我想做的是使用密钥注册一个组件并在其他程序集中使用相同的密钥访问它。提前致谢。

**编辑：**

我`DefaultOrchardHostContainer`在核心中找到了一个类，但它只公开`Resolve<>`方法而不公开`Register()`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T14:21:56.437

您可以将 Autofac 模块直接添加到您的 Orchard 模块中，Orchard 会选择它。前任...

```
public class MyModule : Module {
   protected override void Load(ContainerBuilder builder){
      builder.RegisterType<MyDependency>().As<IMyDependency>().InstancePerDependency();
   }
} 
```

# git - TortoiseGit：添加以忽略已提交的 gen 和 bin 文件夹

> ID：13584086
> 
> 赞同：4
> 
> 时间：2012-11-27T12:17:47.847
> 
> 标签：git, gitignore, tortoisegit

如何使用 TortoiseGit 添加到忽略列表已提交的 gen 和 bin 文件夹？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T14:21:22.123

对于取消跟踪 + 忽略文件，您可以：

```
$ git rm -r --cached gen/ bin/
$ echo "gen/" >> .gitignore
$ echo "bin/" >> .gitignore 
```

`git rm --cached`从索引中删除文件，而不更改工作副本中的文件。所以现在 git 不会跟踪它，但你的本地文件夹中仍然有它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T14:20:57.863

自己解决了：

1.  将文件夹添加到**.gitignore**

2.  删除这些文件夹

3.  提交,推送

它有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-17T19:50:34.023

使用 TortoiseGit 对每个项目执行以下操作：

```
1\. Right click on item -> TortoiseGit -> Delete and Add to ignore list
2\. Select "Ignore item resursively" for Ignore Type. Select ".gitignore in the repository root" for Ignore File or just make it your choice.
3\. Commit item. Commit .gitignore file 
```

# php - 确认日期格式

> ID：13584089
> 
> 赞同：-4
> 
> 时间：2012-11-27T12:17:53.323
> 
> 标签：php

我如何比较插入的日期是否采用这种格式 ( `yyyy-mm-ddThh-mm-ss`)？
我收到这个：

```
$start_date= $_GET['start_date']; 
```

我想检查格式。
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T12:21:16.413

你可以使用`DateTime::createFromFormat`它是好的。如果这个方法返回false，你的格式不好，如果不是，你得到一个正确的日期来处理

```
$date = dateTime::createFromFormat('Y-m-d\Th-i-s',$date);
if($date === false)//incorrect 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-27T12:20:17.240

我认为这对你有用>

```
<?php   
 function testDate( $value )   
 {   
  return preg_match( ''^\d{1,2}/\d{1,2}/\d{4}$'', $value ) )   
 }   

 testDate( '21/11/1999' ); // -> true   
 testDate( '3/9/2008' ); // -> true   

 testDate( 'a/04/2003' ); // -> false   
 testDate( '28-01-2000' ); // -> false   

 testDate( '99/13/1978' ); // -> true   
?> 
```

# android - ARM 警告：此架构不推荐使用 swp{b}

> ID：13584091
> 
> 赞同：4
> 
> 时间：2012-11-27T12:17:57.983
> 
> 标签：android, gcc, android-ndk, arm

为我的项目编译某些 cpp 文件时，我收到这样的警告

```
Compile++ arm    : MYAPP <= myfile.cpp
/tmp/cc53K5MQ.s: Assembler messages:
/tmp/cc53K5MQ.s:887: Warning: swp{b} use is deprecated for this architecture 
```

但是，此警告中没有给出任何行号，所以我不知道在哪里看。

你知道我为什么会收到这个警告吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T11:04:00.177

该`swp{b}`指令在 ARMv6 及更高版本中已弃用。更糟糕的是，它在 ARMv7 中根本不受支持*，*并且在 Linux 内核中的非法指令陷阱中被修复 - 需要一些运行时成本。您的编译器绝对不应该生成它。

我在 CodeSourcery 编译器中也看到过这个问题。代码生成器阶段发出`swp{b}`指令，但汇编器非常清楚您的目标体系结构不支持它们。这反而意味着您在命令行上指定了正确的目标体系结构。

我通过升级到新版本的 GCC 解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:36:00.410

Use `--save-temps` to have GCC not delete the generated files.

# c# - 索引文件大小限制

> ID：13584097
> 
> 赞同：3
> 
> 时间：2012-11-27T12:18:24.307
> 
> 标签：c#, .net, lucene, lucene.net

我有一个索引应用程序，它使用 lucene 索引来索引文档，索引可以增长到 10 GB。

lucene 索引有大小限制吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:48:46.527

索引没有文件大小限制。但是，术语的数量和可以索引的文档数量是有限制的。有关这些限制，请参阅[本页](http://lucene.apache.org/core/4_0_0-ALPHA/core/org/apache/lucene/codecs/lucene40/package-summary.html#Limitations)底部。

# iphone - 两倍大小的drawRect

> ID：13584104
> 
> 赞同：0
> 
> 时间：2012-11-27T12:18:49.530
> 
> 标签：iphone, ios, ipad, cocoa-touch

如果我重写`drawRect`以显示图像并在其上放置动态生成的叠加层（请参阅代码），则每当我放大图像时，由于缩放的结果，它会以非常模糊的方式绘制。

该图像由两部分组成，一个从 png 绘制的图像（其原始大小是想要的图像的 2 倍，因此在缩放时应该不会出现问题，但确实会出现问题），另一个是根据 rect 大小动态生成的，所以它也应该适应当前的矩形大小，但事实并非如此。

有什么帮助吗？

```
- (void) drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    CGContextDrawImage(ctx, CGRectMake(0, 0, rect.size.width, rect.size.height), [UIImage imageNamed:@"actionBg.png"].CGImage);

    // generate the overlay
    if ([self isActive] == NO && self.fullDelay != 0) { // TODO: remove fullDelay check!
        UIGraphicsBeginImageContextWithOptions(rect.size, NO, 0.0);
        CGContextRef overlayCtx = UIGraphicsGetCurrentContext();

        int segmentSize = (rect.size.height / [self fullDelay]);

        for (int i=0; i<[self fullDelay]; i++) {
            float alpha = 0.9 - (([self fullDelay] * 0.1) - (i * 0.1));
            [[UIColor colorWithRed:120.0/255.0 green:14.0/255.0 blue:14.0/255.0 alpha:alpha] setFill];

            if (currentDelay > i) {
                CGRect r = CGRectMake(0, i * segmentSize, rect.size.width, segmentSize);
                CGContextFillRect(overlayCtx, r);
            }
            [[UIColor colorWithRed:1 green:1 blue:1 alpha:0.3] setFill];
            CGRect line = CGRectMake(0, (i * segmentSize) + segmentSize - 1 , rect.size.width, 1);
            CGContextFillRect(overlayCtx, line);
        }

        UIImage *overlay = UIGraphicsGetImageFromCurrentImageContext();
        UIImage *overlayMasked = [TDUtilities maskImage:overlay withMask:[UIImage imageNamed:@"actionMask.png"]];

        // prevent the drawings to be flipped
        CGContextTranslateCTM(overlayCtx, 0, rect.size.height);
        CGContextScaleCTM(overlayCtx, 1.0, -1.0);

        CGContextSetBlendMode(ctx, kCGBlendModeMultiply);
        CGContextDrawImage(ctx, rect, overlayMasked.CGImage);
        CGContextSetBlendMode(ctx, kCGBlendModeNormal);

        UIGraphicsEndImageContext();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:39:04.573

问题是您正在绘制`overlayMasked`为 CGImage `CGContextDrawImage`，它对比例一无所知。如果您处于双倍比例的情况下，您必须自己手动将大小加倍，或者您应该使用知道比例的 UIImage。

# .net - 带有 FontStretch 的文本块继承了 FontStyle 和 Weight

> ID：13584108
> 
> 赞同：2
> 
> 时间：2012-11-27T12:18:58.970
> 
> 标签：.net, wpf, xaml

我有一个 WPF 控件，其中包含许多用于设置字体粗细、样式、装饰和拉伸的切换按钮。在每个切换按钮中都有显示样式的 TextBlock。

出于某种原因，我为 Condensed FontStretch 创建的切换按钮**在运行时**出现在 ExtraBold、Oblique 和 condensed 中。同样，任何设置为 Condensed 的文本也会以这种方式出现。在设计器中，按钮显示正确。

我认为这可能是因为我将具有相同字体系列的其他按钮设置为 ExtraBold 和 Oblique 并且字体被保存在缓存中。

```
<ToggleButton Height="24" HorizontalAlignment="Left" Margin="110,232,0,0" Name="boldButton" VerticalAlignment="Top" Width="36">
        <TextBlock Text="Abc" FontFamily="Arial" FontWeight="Bold"/>
    </ToggleButton>
    <ToggleButton Height="24" HorizontalAlignment="Left" Margin="152,232,0,0" Name="extraBoldButton" VerticalAlignment="Top" Width="36">
        <TextBlock Text="Abc" FontFamily="Arial" FontWeight="ExtraBold"/>
    </ToggleButton>
    <ToggleButton  Content="Abc"  FontFamily="Arial" FontStyle="Italic" Height="24" HorizontalAlignment="Left" Margin="110,261,0,0" Name="italicButton" VerticalAlignment="Top" Width="36" />
    <ToggleButton  Content="Abc"  FontFamily="Arial" FontStyle="Oblique" Height="24" HorizontalAlignment="Right" Margin="0,261,91,0" Name="obliqueButton" VerticalAlignment="Top" Width="36" /> 
```

# java - 如何使用触摸和双击图像..？

> ID：13584110
> 
> 赞同：0
> 
> 时间：2012-11-27T12:19:06.767
> 
> 标签：java, android

我有一个图像视图，如果我触摸该图像视图，它会执行一些操作，否则如果我双击该图像视图需要执行一些操作。怎么可能。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:24:24.523

首先创建一个 GestureDetector 和一个监听器。然后将其绑定到扩展 GestureDetector.SimpleOnGestureListener 的类。

```
private GestureDetector detector;  
private ImageView mImageView;

@Override  
public void onCreate(Bundle savedInstanceState) {  
  super.onCreate(savedInstanceState);  
  detector = new GestureDetector(this, new MyGesturesListener());  
  // TODO find your image view
  mImageView.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            detector.onTouchEvent(event);
            return true;
        }
    });
} 
```

然后可以实现不同手势的方法：

```
class MyGesturesListener extends GestureDetector.SimpleOnGestureListener{  
  @Override  
  public boolean onSingleTapUp(MotionEvent ev) { 
    // TODO handle single tap 
    return true;  
  }  
  @Override  
  public boolean onDoubleTap(MotionEvent ev) {  
    // TODO handle double tap
    return true;  
  }
} 
```

# c# - 如果查询未返回任何内容，则 linq 选择项的默认值

> ID：13584112
> 
> 赞同：10
> 
> 时间：2012-11-27T12:19:13.347
> 
> 标签：c#, linq

如果条件没有返回结果，如何向返回的集合插入默认值`where`？

```
from i in data.collection
where i.Type == type
select i.Count 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-27T12:23:33.813

使用[`Enumerable.DefaultIfEmpty`](http://msdn.microsoft.com/en-us/library/bb355419.aspx)方法来做到这一点。

示例（在方法语法中，因为恕我直言不那么尴尬）：

```
data.collection.Where(i => i.Type == type)
               .DefaultIfEmpty(defaultObject)
               .Select(i => i.Count); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-27T12:24:54.827

有**[DefaultIfEmpty()](http://msdn.microsoft.com/en-us/library/bb355419.aspx)**方法。

在方法语法中，您可以像这样使用它：

```
data.Collection
    .Where(i => i.Type == type)
    .DefaultIfEmpty(yourDefaultValue)
    .Select(i => i.Count); 
```

如果`Where`过滤器没有返回任何项目，`yourDefaultValue`则使用一个可枚举的项目作为`Select`投影的输入。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-27T12:24:04.890

你正在寻找[`DefaultIfEmpty`](http://msdn.microsoft.com/en-us/library/bb355419.aspx).

```
var itemCounts = from i in data.collection
                 where i.Type == type
                 select i.Count;

var itemCountsOrMinusOne = itemCounts.DefaultIfEmpty(-1); 
```

第一个将为您提供项目计数，或者不`IEnumerable`返回任何元素。

然后第二个将为您提供项目计数，或者`IEnuemrable`只是返回的`-1`。

# ios - 设置图层的 zPosition 与通过 CATransform3DTranslate 更改它有什么区别

> ID：13584115
> 
> 赞同：3
> 
> 时间：2012-11-27T12:19:32.543
> 
> 标签：ios, core-animation, calayer

我有一个图层，我正在修改它的 m34 变换属性以获得透视。我原以为通过更改 zPosition，大小会改变（因为它看起来更远）但是当我设置 zPosition 属性时，大小不会改变，但是当我使用 CATransform3DTranslate 时会改变。

为什么是这样？以下内容有什么区别：

```
CATransform3D transform = CATransform3DIdentity;
transform.m34 = 1.0 / -4000;
myLayer.transform = transform;
myLayer.zPosition = -500; 
```

和

```
CATransform3D transform = CATransform3DIdentity;
transform.m34 = 1.0 / -4000;
transform = CATransform3DTranslate(transform, 0, 0, -500);
myLayer.transform = transform; 
```

后者按我的预期工作，但我想了解为什么第一个没有。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T12:45:24.943

zPosition 仅用于兄弟图层的绘制顺序，而不用于透视绘制：您可以使用它来获得“放在前面”/“放在后面”的效果，而无需添加/删除图层。

# javascript - 正确整理 jQuery 对话框

> ID：13584117
> 
> 赞同：0
> 
> 时间：2012-11-27T12:19:36.987
> 
> 标签：javascript, jquery, jquery-dialog

[使用 jQuery 的Dialog](http://api.jqueryui.com/dialog/)小部件时遇到问题...

我有*一个*解决方案，但想知道是否有更标准的方法（或者我误解了一些东西）：

### 背景

我有一个大量使用 AJAX 的网站，因为大多数时候只更新页面的一部分。页面的一部分包含一些打开对话框的 JS。在该部分和另一个部分之间切换时，第二次打开对话框时事情变得一团糟。

### 原因

`$el.dialog()`从文档层次结构中的原始位置删除要成为弹出窗口 ( `$el[0]`) 的 DOM 元素，并将其附加到文档正文中。然后当我删除弹出元素的原始父元素时，弹出元素不会被删除。

这意味着这样做（更改/删除页面的该部分，然后将其更改回来）再次导致重复的元素 ID 毫不奇怪地混淆了对话框小部件。

### 解决方案

我想出了一个解决方案，它覆盖该`$.fn.dialog`函数并利用 jQuery[特殊事件](http://benalman.com/news/2010/03/jquery-special-events/)。它将一个监听器附加到原始父元素上的自定义事件“destroyed”，当jQuery删除任何元素时触发“destroyed”事件，监听器通过删除弹出元素来响应此事件，无论它现在可能在文档层次结构中的任何位置.

这里是：

```
(function($) {

   $.event.special.destroyed = {
        remove: function(o) {
            if (o.handler) {
                o.handler.apply(this, arguments);
            }
        }
    };

    var originalDialogFn = $.fn.dialog;

    $.fn.dialog = function(firstArg) {
        if (!this.data('dialog') && firstArg != 'destroy' && !this.data('dialogCleaner')) {
            this.data('dialogCleaner', true);

            var $parent = this.parent();
            var $dialogEl = this;

            $parent.bind('destroyed', function(e) {
                if (this == $parent.get(0)) {
                    $dialogEl.remove();
                }
            });
        }

        return originalDialogFn.apply(this, arguments);
    };

})(jQuery); 
```

有没有更好的方法来做到这一点？这似乎是 jQuery 对话框工作方式的一个小缺陷，因为它不是那么容易整理好和**通用**的。

当然，我知道该`dialog('destroy')`方法，但似乎并不容易将其挂钩到我的页面片段/部分处理中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:37:55.027

You could do what I do in these situations. Capture the parent element prior to making the dialog and then, after the dialog is created, detach it from the DOM and re-append it back to the parent element.

```
var dlg = $('selector.dialog'),
    dlgParent = dlg.parent();

dlgParent.append(dlg.dialog().detach()); 
```

This works especially well when dealing with ASPX forms (because any server-side tags that I need to get a postback value from must remain within the form).

# windows - 如何用 LaTeX 编写路径？

> ID：13584118
> 
> 赞同：5
> 
> 时间：2012-11-27T12:19:37.083
> 
> 标签：windows, latex

如何用 LaTeX 编写路径？我想要这样的东西：

```
C:\\Program Files\\My Program\\my file.txt 
```

我**必须**使用双斜杠，而不是单斜杠。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T12:32:53.600

发现这个：

[如何在 Latex 中插入反斜杠或波浪号](https://tex.stackexchange.com/questions/9363/how-does-one-insert-a-backslash-or-a-tilde-)

> 综合 LaTeX 符号列表是您的朋友。\textbackslash 和 \textasciitilde 在列表的表 2 中找到

所以你应该试试

```
C:\textbackslash\textbackslash Program Files\textbackslash\textbackslash My Program\textbackslash\textbackslash my file.txt 
```

# android - Android：如何在具有缩放、平移、缩放功能的布局上添加多个图像

> ID：13584122
> 
> 赞同：2
> 
> 时间：2012-11-27T12:19:44.737
> 
> 标签：android, bitmap, imageview, zooming, pan

我正在制作一个应用程序，它将像这样工作：

*   我会有一个浏览器
*   每个寻呼机元素将是一个图像作为背景
*   我需要能够在此背景上添加自定义对象（其他小图像）并移动和缩放
*   我需要缩放整个页面的功能，它上面的所有对象以及背景都可以缩放

你能帮我解决这个问题吗？

谢谢你

# ruby - 如果行不以 KEYWORD 开头，则删除换行符

> ID：13584123
> 
> 赞同：1
> 
> 时间：2012-11-27T12:19:46.967
> 
> 标签：ruby, regex, powershell, sed, awk

我有一个平面文件，其中的线条看起来像

```
KEYWORD|DATA STRING HERE|32|50135|ANOTHER DATA STRING
KEYWORD|STRING OF DATA|1333|552555666|ANOTHER STRING
KEYWORD|STRING OF MORE DATA|4522452|5345245245|REALLY REALLY REALLY REALLY
LONGSTRING THAT INSERTED A LINE BREAK WHEN I WAS EXTRACTING FROM SQLPLUS/ORACLE
KEYWORD|..... 
```

我该如何去删除换行符，以便

```
KEYWORD|STRING OF MORE DATA|4522452|5345245245|REALLY REALLY REALLY REALLY
LONGSTRING THAT INSERTED A LINE BREAK WHEN I WAS EXTRACTING FROM SQLPLUS/ORACLE 
```

变成

```
KEYWORD|STRING OF MORE DATA|4522452|5345245245|REALLY REALLY REALLY REALLY LONGSTRING THAT INSERTED A LINE BREAK WHEN I WAS EXTRACTING FROM SQLPLUS/ORACLE 
```

这是在 HP-UNIX 环境中，我可以将文件移动到另一个系统（安装了 powershell 和 ruby​​ 的 windows 框）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:30:08.073

I don't know what tools are you using, but you can use this regex to match every `\n` (or maybe `\r`) that isn't followed by `KEYWORD` so you can replace it for `SPACE` and you would have it.

[DEMO](http://regexr.com?32ure)

Regex: `\r(?!KEYWORD)` (With global modifier)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T14:30:44.530

Ruby 的 Array 有一个很好的方法，称为[`slice_before`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-slice_before)它继承自 Enumerable，在这里可以起到帮助作用：

```
require 'pp'

text = 'KEYWORD|DATA STRING HERE|32|50135|ANOTHER DATA STRING
KEYWORD|STRING OF DATA|1333|552555666|ANOTHER STRING
KEYWORD|STRING OF MORE DATA|4522452|5345245245|REALLY REALLY REALLY REALLY
LONGSTRING THAT INSERTED A LINE BREAK WHEN I WAS EXTRACTING FROM SQLPLUS/ORACLE
KEYWORD|.....'

pp text.split("\n").slice_before(/^KEYWORD/).map{ |a| a.join(' ') }

=> ["KEYWORD|DATA STRING HERE|32|50135|ANOTHER DATA STRING",
 "KEYWORD|STRING OF DATA|1333|552555666|ANOTHER STRING",
 "KEYWORD|STRING OF MORE DATA|4522452|5345245245|REALLY REALLY REALLY REALLY LONGSTRING THAT INSERTED A LINE BREAK WHEN I WAS EXTRACTING FROM SQLPLUS/ORACLE",
 "KEYWORD|....."] 
```

此代码只是在换行符处拆分您的文本，然后用于`slice_before`将结果数组分成子数组，每个子数组一个以 . 开头的文本块`/^KEYWORD/`。然后它遍历生成的子数组，用一个空格将它们连接起来。任何未预先拆分的行都将被单独保留。那些被打破的被重新加入。

对于实际使用，您可能希望`pp`用常规替换`puts`.

至于使用 Ruby 将代码移至 Windows，为什么？在 HP-Unix 上安装 Ruby 并在那里运行它。这是更自然的合身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T15:01:16.753

Powershell方式：

```
[System.IO.File]::ReadAllText( "c:\myfile.txt" ) -replace "`r`n(?!KEYWORD)", ' ' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T14:54:17.940

这可能对您有用（GNU sed）：

```
sed ':a;$!{N;/\n.*|/!{s/\n/ /;ba}};P;D' file 
```

在模式空间中保留两行，如果第二行不包含空格，则`|`用空格替换换行符并重复，直到它包含或到达文件末尾。

这假设最后一个字段是溢出的字段，否则使用`KEYWORD`这样的：

```
sed ':a;$!{N;/\nKEYWORD/!{s/\n/ /;ba}};P;D' file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T13:34:35.907

这个简短的 awk oneliner 应该可以完成这项工作：

```
awk '/^KEYWORD/{print ""}{printf $0}' file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T12:56:42.763

您可以为此使用`sed`或`awk`（首选） »

*   `sed -n 's|\r||g;$!{1{x;d};H};${H;x;s|\n\(KEYWORD\)|\r\1|g;`
    `s|\n||g;s|\r|\n|g;p}' file.txt`

*   `awk 'BEGIN{ORS="";}NR==1{print;next;}/^KEYWORD/`
    `{print"\n";print;next;}{print;}' file.txt`

* * *

***注意：*** *将每个命令 ( `sed`, `awk`) 写在一行中*

# sql-server - 是否有所有 SQL Server 2012 错误代码的概述？

> ID：13584124
> 
> 赞同：18
> 
> 时间：2012-11-27T12:19:47.350
> 
> 标签：sql-server, sql-server-2012, odbc, c++-cli

[SQLGetDiagRec](http://msdn.microsoft.com/en-us/library/windows/desktop/ms716256%28v=vs.85%29.aspx)返回本机错误代码。是否有 SQL Server 2012 错误代码的概述？我在 MSDN 上找不到任何东西。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-27T12:25:09.623

```
use master
select * from sysmessages 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-27T14:59:01.343

我无法在互联网上找到各个代码的列表。[但是，我确实在](http://msdn.microsoft.com/en-us/library/ms164086.aspx)MSDN 上找到了*严重级别列表。* 它们如下：

严重性级别/描述

*   0-9：返回状态信息或报告不严重错误的信息性消息。数据库引擎不会引发严重性为 0 到 9 的系统错误。
*   10：返回状态信息或报告不严重错误的信息性消息。出于兼容性原因，数据库引擎在将错误信息返回给调用应用程序之前将严重性 10 转换为严重性 0。
*   11-16：表示用户可以纠正的错误。
*   11：表示给定的对象或实体不存在。
*   12：由于特殊查询提示而不使用锁定的查询的特殊严重性。在某些情况下，这些语句执行的读取操作可能会导致数据不一致，因为没有使用锁来保证一致性。
*   13：表示事务死锁错误。
*   14：表示与安全相关的错误，例如权限被拒绝。
*   15：表示 Transact-SQL 命令中的语法错误。
*   16：表示用户可以更正的一般错误。
*   17-19：表示用户无法纠正的软件错误。将问题通知您的系统管理员。
*   17：表示该语句导致 SQL Server 耗尽资源（例如数据库的内存、锁或磁盘空间）或超出系统管理员设置的某些限制。
*   18：表示数据库引擎软件出现问题，但语句完成执行，并保持与数据库引擎实例的连接。每次出现严重级别为 18 的消息时都应通知系统管理员。
*   19：表示已超出不可配置的数据库引擎限制，并且当前批处理已终止。严重级别为 19 或更高的错误消息会停止当前批处理的执行。严重级别为 19 的错误很少见，必须由系统管理员或您的主​​要支持提供商纠正。当出现严重级别为 19 的消息时，请联系您的系统管理员。严重级别为 19 到 25 的错误消息将写入错误日志。
*   20-24：表示系统问题并且是致命错误，这意味着正在执行语句或批处理的数据库引擎任务不再运行。该任务记录有关发生的事情的信息，然后终止。在大多数情况下，与数据库引擎实例的应用程序连接也可能终止。如果发生这种情况，根据问题，应用程序可能无法重新连接。此范围内的错误消息会影响访问同一数据库中数据的所有进程，并可能表明数据库或对象已损坏。严重级别为 19 到 24 的错误消息将写入错误日志。
*   20：表示语句遇到问题。由于该问题仅影响当前任务，因此数据库本身不太可能已损坏。
*   21：表示遇到了影响当前数据库中所有任务的问题，但不太可能是数据库本身已经损坏。
*   22：表示消息中指定的表或索引已被软件或硬件问题损坏。很少发生严重级别 22 的错误。如果出现这种情况，请运行 DBCC CHECKDB 以确定数据库中的其他对象是否也损坏。问题可能仅存在于缓冲区缓存中，而不是磁盘本身。如果是这样，重新启动数据库引擎实例可以解决问题。要继续工作，您必须重新连接到数据库引擎的实例；否则，请使用 DBCC 修复问题。在某些情况下，您可能必须恢复数据库。如果重新启动数据库引擎实例不能解决问题，则问题出在磁盘上。有时销毁错误消息中指定的对象可以解决问题。例如，
*   23：表示由于硬件或软件问题，整个数据库的完整性存在问题。很少发生严重级别 23 的错误。如果发生这种情况，请运行 DBCC CHECKDB 以确定损坏的程度。问题可能仅存在于缓存中，而不是磁盘本身。如果是这样，重新启动数据库引擎实例可以解决问题。要继续工作，您必须重新连接到数据库引擎的实例；否则，请使用 DBCC 修复问题。在某些情况下，您可能必须恢复数据库。
*   24：表示介质故障。系统管理员可能必须恢复数据库。您可能还需要致电您的硬件供应商。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-14T15:56:51.330

我找到了 MS SQL Server 2008 R2 的代码，但其中大部分适用于更高版本： [http ://technet.microsoft.com/en-us/library/cc645603(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/cc645603(v=sql.105).aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-04T15:16:50.300

我自己也在寻找一个列表，发现您可以通过运行以下语句从主数据库中查看它们：

```
SELECT * FROM sysmessages 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-18T17:24:04.557

在 SQL Server 2005 及更高版本中，您可以使用：

```
SELECT * FROM sys.messages 
```

正如其他人所提到的，您还可以使用（在 SQL Server 2000 中可用）：

```
SELECT * FROM sysmessages 
```

# json - 无法让浏览器下载 json 文件而不是将其写入响应

> ID：13584125
> 
> 赞同：0
> 
> 时间：2012-11-27T12:19:56.310
> 
> 标签：json, asp.net-mvc-3, header

我正在生成一个我不想让用户下载的小 Json 文件。所以我希望浏览器提示用户下载文件。

我已经尝试了许多相关问题中建议的答案，但这些对我不起作用。

该请求是通过单击操作链接发出的：

```
@Ajax.ActionLink("Generate JSON", "GenerateOcJson", new AjaxOptions { HttpMethod = "POST" }) 
```

我试过了：

```
var cd = new System.Net.Mime.ContentDisposition { FileName = fileName, Inline = false };
Response.AppendHeader("Content-Disposition", cd.ToString());

return File(Encoding.UTF8.GetBytes(jsonString),
            "application/json",
            string.Format(fileName)); 
```

和：

```
Response.Clear();
Response.ContentType = "application/json";
Response.AppendHeader("Content-Disposition", "attachment; filename=foo.json");
Response.Write(jsonString);
Response.End(); 
```

但是浏览器不会下载文件。我正在使用 MVC3，此方法由 actionlink 调用。我已经尝试过 POST 和 GET 请求。

如果我使用 Chrome 检查请求，我会看到正确的 json 已写入浏览器响应。

有什么线索吗？提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:44:44.390

尝试这样的事情（将 mime 类型设置为纯文本）和正常的`@Html.ActionLink`：

```
public ActionResult GenerateOcJson()
{
var document = new { Data = jsonString, ContentType = "text/plain", FileName = String.Format("JSONResults_{0}.json", DateTime.Now.ToString("yyyy-MM-dd-HH-mm-ss")) };//... get from service layer
    var cd = new System.Net.Mime.ContentDisposition
    {
        FileName = document.FileName,
        // Inline = false means always prompt the user for downloading.
        // Set it to true if you want the browser to try to show the file inline (fallback is download prompt)
        Inline = false,
    };
    Response.AppendHeader("Content-Disposition", cd.ToString());
    return File(document.Data, document.ContentType);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:29:47.433

只需返回带有 Application/Octet 媒体类型的文件结果。无需编写 content-disposition 标头。

```
return File(Encoding.UTF8.GetBytes(jsonString),
            System.Net.Mime.MediaTypeNames.Application.Octet, 
            fileName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:29:47.940

使用`application/octet-stream`. 然后浏览器会将数据视为要在本地下载的文件。

# eclipse - 如何在eclipse中关闭网络连接？

> ID：13584126
> 
> 赞同：0
> 
> 时间：2012-11-27T12:20:00.873
> 
> 标签：eclipse, networking

我怀疑网络连接会导致eclipse中的特定程序（它试图从特定域下载一些xml东西，但是这个域在这里被阻止），谷歌搜索后，我没有找到办法，那么如何关闭它？

# wordpress - 使用 htaccess 将通配符子域映射到其他主机

> ID：13584132
> 
> 赞同：0
> 
> 时间：2012-11-27T12:20:16.140
> 
> 标签：wordpress, .htaccess, heroku, appfog

我在 appfog 上托管我的 wordpress，但 appfog 还不允许通配符子域。我决定在 heroku 上创建一个应用程序并将 htaccess 放在那里，因此任何通配符子域都将**重写**为 appfog。

如何使用放置在 heroku cedar 上的 htaccess 制作 URL sample-post.apps1.herokuapp.com/subtitle/... --> apps1.appfog.com/sample-post/subtitle/...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:30:15.230

尝试：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^([^.]+)\.apps1\.herokuapp\.com$ [NC]
RewriteRule ^(.*)$ http://apps1.appfog.com/%1/$1 [L,R] 
```

如果您不希望浏览器地址栏中的 URL 更改（通过重定向，`R`方括号中的标志），请尝试更改`R`为`P`（代理）。Apache 需要加载 mod_proxy。

# kendo-ui - 清除选择更改事件的自动完成值

> ID：13584133
> 
> 赞同：11
> 
> 时间：2012-11-27T12:20:19.220
> 
> 标签：kendo-ui

我有以下[http://jsfiddle.net/TgBzB/3/](http://jsfiddle.net/TgBzB/3/)并希望在用户选择项目时清除自动完成字段。以下代码不这样做： -

```
$("#input").data("kendoAutoComplete").value(""); 
```

这可能吗？

```
//create AutoComplete UI component
$("#input").kendoAutoComplete({
    dataSource: data,
    filter: "startswith",
    placeholder: "Select country...",
    select: function(e) {
        var dataItem = this.dataItem(e.item.index());
        $('#list').append("<li>" + dataItem + "</li>");
        //How do I clear the #input here?
        $("#input").data("kendoAutoComplete").value(""); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T13:50:50.697

您的代码会清除输入，但选择事件会提前触发并在之后添加值。您要做的是清除`change`event 的输入：

```
$("#input").kendoAutoComplete({
    dataSource: data,
    filter: "startswith",
    placeholder: "Select country...",
    select: function(e) {
        var dataItem = this.dataItem(e.item.index());
        $('#list').append("<li>" + dataItem + "</li>");
    },
    change: function(e) {
        $("#input").data("kendoAutoComplete").value(""); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T12:06:22.480

这也是另一种同样有效的替代方法，而不是在更改事件后清除它，只需通过使用来阻止它首先显示`e.preventDefault();`

```
...
select: function(e) {
        var dataItem = this.dataItem(e.item.index());
        $('#list').append("<li>" + dataItem + "</li>");
        $("#input").data("kendoAutoComplete").value("");
        e.preventDefault();
}
... 
```

已更新 jsFiddle [http://jsfiddle.net/rippo/TgBzB/8/](http://jsfiddle.net/rippo/TgBzB/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-10T11:51:39.880

```
select: function(e) { 
```

.... e.preventDefault();

}

不允许您搜索相同的关键字（立即输入）。如果您逐个字符地键入相同的关键字并给出几毫秒的时间，它将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-22T12:54:16.180

即使您使用 MVVM 绑定到多选值，这也可以正常工作。

```
select: function(e) {
    var widget = $('#widgetId').data('kendoMultiSelect');
    widget.input.val('');
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-10-07T09:44:08.137

只需使用它，您就可以清除自动完成

```
 $("#autoCompleteName").val(""); 
```

# sql - 将两个 sql 选择查询（在 postgres 中）与 LIMIT 语句结合起来

> ID：13584135
> 
> 赞同：39
> 
> 时间：2012-11-27T12:20:22.980
> 
> 标签：sql, postgresql, select, limit, union

我有一个表，我想要一个返回最近创建的 10 条记录以及 ID 为 x 的记录的查询。

我正在尝试做-

```
SELECT * FROM catalog_productimage
ORDER BY date_modified
LIMIT 10
UNION
SELECT * FROM catalog_productimage
WHERE id=5; 
```

但是以前好像放不`LIMIT`进去`UNION`。我尝试添加另一列并将其用于排序 -

```
SELECT id, date_modified, IF(false, 1, 0) as priority FROM catalog_productimage
UNION
SELECT, id, date_modified, IF(true, 1, 0) as priority FROM catalog_productimage
WHERE id=5
ORDER BY priority, date_modified
LIMIT 10; 
```

但我没有取得太大进展..

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-27T12:28:39.637

刚刚检查这是否可行：

```
(SELECT * FROM catalog_productimage
ORDER BY date_modified
LIMIT 10)
UNION
SELECT * FROM catalog_productimage
WHERE id=5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:26:40.813

这将为您提供从 10 日到 20 日的记录，应该可以帮助您入门。我会用 SQLfiddle 回复

```
SELECT *  
  FROM (SELECT ROW_NUMBER () OVER (ORDER BY cat_id) cat_row_no, a.* FROM catalog_productimage a where x=5)  
 WHERE cat_row_no > 10 and cat_row_no <20 
```

# rest - zf2中不同模块中的相同控制器名称

> ID：13584136
> 
> 赞同：2
> 
> 时间：2012-11-27T12:20:23.853
> 
> 标签：rest, zend-framework2

我今天刚刚发现 zf2 并不喜欢两个控制器具有相同的名称，即使它们不在同一个模块中。但是，我需要能够调用 localhost/users/types 和 localhost/messages/types

目前，我的两个控制器具有相同的名称。我还发现无论模块的名称是什么，我总是得到消息/类型的结果，即使使用 localhost/nonexistingmodule/types oO

这是我的 module.config.php 的样子：

```
return array(
    'controllers' => array(
        'invokales' => array(
            'messages' => 'Messages\Controller\MessagesController,
            'messages' => 'Messages\Controller\TypesController,
        ),
    ),
    'di' => array(
        'instance' => array(
            'alias' = array(),
        ),
    ),
    'router' => array(
        'routes => array(
            'restful' => array(
                'type' => 'Zend\Mvc\Router\Http\Segment'
                'options' => array(
                    'route' => '/Messages/:controller[.:formatter][/:id],
                    'constraints' => array(
                        'module' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'formater' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'id' => '[a-zA-Z0-9_-]*',
                    ),
                    'defaults' => array(
                        'module' => 'Messages',
                    ),
                ),
            ),
        ),
    ),
    'view_manager' => array( ... ),
); 
```

我试图在约束中设置 'module' => 'Messages'（我们永远不知道：p）但我遇到了 404 错误。Tasks 模块的 module.config.php 是相同的，但用于任务。我最初有别名，但是在我在某个地方读到这不是很推荐之后我删除了它们。

还有一件事，这是一个 REST API，我所有的控制器都扩展了 AbstractRestfulController（如果这很重要）

任何人都知道如何使我的 2 url 工作？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:25:08.920

可调用或服务的别名以及其他任何东西都应该是唯一的。如果它们不是唯一的，则它们可能会按照模块本身的加载顺序被另一个模块覆盖。这意味着：在设置可调用对象或任何类型的别名时，请确保别名是**唯一**且**有意义的**。我个人这样命名我的控制器：

```
'invokables' => array(
    'mymodule-controller-controllername' => 'Mymodule\Controller\ControllernameController'
) 
```

与服务或任何其他类型的别名相同

```
'services' => array(
    'mymodule-service-servicename' => 'Mymodule\Service\Classname'
) 
```

文档遵循命名空间样式的语法，例如...

```
'invokables' => array(
    'Mymodule\Controller\Controllername' => 'Mymodule\Controller\ControllernameController'
) 
```

...我个人觉得完全令人困惑，因为它过于类似于命名空间，并且并没有真正自动暗示它只是一个别名/键

现在你的评论问题我不明白。您想将**一条路由**匹配到**两个不同的控制器**吗？那将是不可能的和毫无意义的。

**使用路由配置回答更新**

至于路由配置，您有几种可能的方法。就我个人而言，我花了很多精力来建立文字路线，因为它们是最快的，但也需要大量的人工关注。或者，有一些分段路线对他们来说会抑制更多的魔力。我将为您介绍文字方法：

**模块消息**

```
'controllers' => array(
    'invokables' => array(
        'messages-controller-index' => 'Messages\Controller\IndexController',
    )
),
'router' => array(
    'routes' => array(
        'messages' => array(
            'type' => 'literal',
            'options' => array(
                'route' => '/messages',
                'defaults' => array(
                    'controller' => 'messages-controller-index',
                    'action'     => 'index'
                )
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'types' => array(
                    'type' => 'literal',
                    'options' => array(
                        'route' => '/types',
                        'defaults' => array(
                            'action' => 'types'
                        )
                    )
                )
            )
        )
    )
) 
```

**模块任务**

```
'controllers' => array(
    'invokables' => array(
        'tasks-controller-index' => 'Tasks\Controller\IndexController',
    )
),
'router' => array(
    'routes' => array(
        'tasks' => array(
            'type' => 'literal',
            'options' => array(
                'route' => '/tasks',
                'defaults' => array(
                    'controller' => 'tasks-controller-index',
                    'action'     => 'index'
                )
            ),
            'may_terminate' => true,
            'child_routes' => array(
                'types' => array(
                    'type' => 'literal',
                    'options' => array(
                        'route' => '/types',
                        'defaults' => array(
                            'action' => 'types'
                        )
                    )
                )
            )
        )
    )
) 
```

所以那里发生的事情是：

*   如果路由是如果路由到`/messages`控制器别名`messages-controller-index``indexAction()`
*   如果路由是`/messages/types`它保持在控制器别名`messages-controller-index`但去`typesAction()`
*   如果路由是如果路由到`/tasks`控制器别名`tasks-controller-index``indexAction()`
*   如果路由是`/tasks/types`它保持在控制器别名`tasks-controller-index`但去`typesAction()`

您显然可以更改其背后的控制器别名和含义。如果你想为一个路由添加一个 ID，就像`/messages/types/1`你要为类型路由构建一个子路由`segment`并检查一个 [:id] 参数，其约束应该是数字:) 检查官方 ZF2手册了解更多信息，我现在很懒：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:27:36.947

tl;dr：确保您`__NAMESPACE__`的路由定义中有一个默认值，然后确保您的所有服务名称都以它为前缀。通常，该值将匹配您的模块命名空间。

对于更长的解释：

我会直言不讳：在您的路由中拥有一个映射到控制器的动态段（`:controller`在您的示例中）是一种非常糟糕的做法。原因是如果有人发现了这一点，他们可以进行控制器注入，并请求一个不应通过该特定路由路由的控制器。

此外，这种做法很容易导致冲突，特别是如果您`__NAMESPACE__`在路由配置中省略了默认值 - 根据问题，您已经发现了默认值。

# mysql - MySQL 高效且正确地链接 GROUP BY 结果

> ID：13584137
> 
> 赞同：1
> 
> 时间：2012-11-27T12:20:23.537
> 
> 标签：mysql

有没有一些有效的方法来编写查询，将 GROUP BY 的各种结果连接到一个公共表上？MySQL如何处理子GROUP上聚合函数的合并结果与原始表中的完整字段？

我正在使用它并且它很慢（而且我还需要除 CONDITION=1 之外的其他条件）

```
SELECT a.CID,a.AS_ALL,b.AS_ACTIVE FROM 
            (SELECT CID,COUNT(DISTINCT RAID) AS AS_ALL FROM MYTABLE GROUP BY CID) a
            LEFT JOIN
            (SELECT CID,COUNT(DISTINCT RAID) AS AS_ACTIVE FROM MYTABLE WHERE CONDITION=1 GROUP BY CID ) b ON a.CID=b.CID; 
```

也可以节省使用类似的东西吗？MySQL 将始终正确地将 COLUMN_A 与聚合结果合并吗？

```
SELECT  COLUMN_A COUNT(DISTINCT COLUMN_A), SUM(COLUMN_A),SUM(COLUMN_B) FROM ATABLE WHERE CONDITION=1 GROUP BY COLUMN_C 
```

谢谢你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:28:30.913

试试这个：

```
SELECT CID,COUNT(DISTINCT RAID) AS AS_ALL,SUM(IF(CONDITION=1, 1, 0)) AS AS_ACTIVE 
FROM MYTABLE GROUP BY CID 
```

# java - Freemarker 模板在刷新后缓存共享变量

> ID：13584146
> 
> 赞同：1
> 
> 时间：2012-11-27T12:20:58.410
> 
> 标签：java, spring, templates, caching, freemarker

我有一个 Spring MVC Web 应用程序，它使用 FreeMarker 来呈现视图并提出了以下问题。

在我的 FreeMarker 配置中，我将 Singleton Spring bean 声明为 FreeMarker 变量，并且在我的应用程序中，我为 Singleton Bean 提供了动态刷新的机制（bean 包含从 DB 检索的应用程序配置）。

现在的问题是，当刷新之前呈现的 FreeMarker 模板使用旧版本中的值时，如果我导航到自容器启动后未呈现的页面，它会使用新值。

以下是我的 FreeMarker 配置的片段：

```
<!-- FreeMarker config -->

<bean id="freemarkerViewConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">
    <property name="templateLoaderPaths">
        <array>
            <value>/WEB-INF/freemarker</value>
            <value>classpath:/WEB-INF/freemarker</value>
        </array>
    </property>
    <property name="freemarkerSettings">
        <props>
            <prop key="datetime_format">dd/MM/yyyy</prop>
            <prop key="number_format">#</prop>
            <prop key="whitespace_stripping">true</prop>
            <prop key="auto_import">
                spring.ftl as spring,
                custom-macros.ftl as custom,
            </prop>
        </props>
    </property>
    <property name="freemarkerVariables">
        <map>
            <entry key="xml_escape" value-ref="fmXmlEscape"/>
            <entry key="html_escape" value-ref="fmHtmlEscape"/>
            <entry key="config" value-ref="config"/>
        </map>
    </property>
</bean> 
```

要刷新配置模型，我在 Controller 类中执行以下操作：

```
((XmlWebApplicationContext)applicationContext).refresh(); 
```

当访问尚未呈现但无法识别已访问页面上的更改的页面时，具有此配置会获取刷新的配置模型。

我尝试了以下方法来强制执行变量的“刷新”，但没有成功：

1.  在上下文刷新后的控制器中，我清除了已自动装配的 FreeMarker 配置中的 templateCache：

    freeMarkerConfig.getConfiguration().clearTemplateCache();

2.  我还尝试使用 freeMarkerSettings 中的以下属性禁用 FreeMarker 配置中的模板缓存：

    freemarker.cache.NullCacheStorage

最后，值得指出的是，在调试和查看缓存和配置时，共享变量确实引用了最新的配置模型，但页面使用旧版本呈现。

有关如何解决此问题的任何建议/指导？

ps 我正在使用 Spring v3.1.1.RELEASE 和 FreeMarker v2.3.19

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:05:41.600

不是一个完全解决方案，但我已经解决了我的问题，但老实说，它更像是一种黑客攻击。

我使用以下命令更改了代码以刷新我的配置，因此只重新创建了配置 bean：

```
((DefaultListableBeanFactory) beanFactory).destroySingleton("config"); 
```

然后通过删除对配置模型的引用来修改 freemarker 配置，因为无论我尝试了什么，我都无法刷新它。因此，我的问题的解决方案是修改 BaseController，应用程序中的每个控制器都扩展了 BaseController，将可用的配置模型作为 @ModelAttribute 公开，因此它可用于所有视图。

正如我所说，并没有真正解决根本问题，但我已经解决了我的问题，尽管是以一种非正统的方式。

# testing - nginx proxy_cache_key

> ID：13584147
> 
> 赞同：0
> 
> 时间：2012-11-27T12:21:01.717
> 
> 标签：testing, nginx

这个密钥是如何工作的？无法从 [这里][1] 获取它：

```
 syntax:    proxy_cache_key string; default:     proxy_cache_key
 $scheme$proxy_host$request_uri; context:   http, server, location
 Defines a key for caching, for example
 proxy_cache_key "$host$request_uri $cookie_user"; 
```

例如，如果我将其设置为 $`host$filename` 是什么意思？我如何测试是否应用了此更改`nginx`？

笔记：

*   不要让我显示完整的配置，因为我没有。
*   问题是 - 我有`api`一个服务器接口，想检查它是否有效。
*   黄瓜（或其他）场景将不胜感激。

# javascript - 在将元素属性设置为空字符串之前，如何存储元素属性以供以后使用？

> ID：13584148
> 
> 赞同：0
> 
> 时间：2012-11-27T12:21:01.577
> 
> 标签：javascript, jquery

我有以下 JQuery 代码：

```
 $(targetSelector)
    .attr('data-disabled', 'yes')
    .attr('title', '')
    .addClass('disabled')
    .prop('disabled', true); 
```

如何更改此代码，以便在将 title 属性设置为 '' 之前获取标题的当前值并将其存储在 'data-title' 属性中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:22:09.583

我建议：

```
$(targetSelector).attr({
    'data-disabled': 'yes',
    'data-title': function() {
        return this.title;
    }
}).attr('title', '').addClass('disabled').prop('disabled', true);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/sh92r/1/)。

参考：

*   [`attr()`](http://api.jquery.com/attr/).
*   [`data()`](http://api.jquery.com//).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:23:40.217

尝试这个

```
$(targetSelector)
.attr({'data-disabled' : 'yes', 'data-title' : function() {return this.title;}})  // set the title before it is removed
.attr('title', '')
.addClass('disabled')
.prop('disabled', true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:26:40.277

你可以这样做：

```
$(targetSelector).attr({
    'data-disabled': 'yes',
    'data-title': function() { return this.title }
    'title': ''
  }).addClass('disabled').prop('disabled', true); 
```

其他答案是相似的，但是`this.title`只有`this`在元素是元素时才能访问，这取决于上下文。上面的方法使用 function 属性来返回标题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:24:25.873

尝试这个

```
$(targetSelector)
    .attr('data-disabled' : 'yes')
    .attr('data-title', $(this).attr('title'))
    .attr('title', '')
    .addClass('disabled')
    .prop('disabled', true); 
```

# python - 在 pandas 中添加 DataFrame

> ID：13584149
> 
> 赞同：3
> 
> 时间：2012-11-27T12:21:06.337
> 
> 标签：python, pandas, time-series

我有名称不同但都按相同时间序列索引的 DataFrame。现在我想在其中添加值。到目前为止，我为此使用了一个 for 循环。
如果我使用`df1 + df2`，我会得到一个具有相同索引的 DataFrame，但每个名称都有一个列，其中包含所有 NaN 值。
如果我使用`df1.add(df2)`（带有可选的`fill_value=0`），我会得到一个带有第一个 DataFrame 值的 DataFrame，这与我使用`df1.combineAdd(df2)`.

除了遍历所有索引并添加值之外，关于如何添加值的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:15:51.323

如果您知道两者之间的索引相同并且您不关心列名，只需执行以下操作：

```
DataFrame(df1.values + df2.values, df1.index, df1.columns) 
```

# iphone - 显示阿拉伯字符串

> ID：13584150
> 
> 赞同：-1
> 
> 时间：2012-11-27T12:21:06.803
> 
> 标签：iphone, objective-c, ipad, uitextview

如何将以下动态字体显示到 UITextView。

**\U0648\U0632\U0646\U0627\U0644\U0645\U0646\U062a\U062c**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:33:29.547

`\U`转义需要 8 位数字。`\u`预计 4。

改为使用`\u`。

```
NSString *string = @"\u0648\u0632\u0646 \u0627\u0644\u0645\u0646\u062a\u062c";
NSLog(@"%@", string);

//Produces:
//2012-11-27 12:35:02.199 AppName[4370:707] وزن المنتج 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:27:58.173

[从NSString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)类中引用 cStringUsingEncoding

# java - 优先级队列行为不端

> ID：13584153
> 
> 赞同：2
> 
> 时间：2012-11-27T12:21:20.843
> 
> 标签：java

```
PriorityQueue<Integer> queue = new PriorityQueue<Integer>(4);
queue.add(8);
queue.add(5);
queue.add(23);
queue.add(6);
System.out.println(queue); 
```

朋友们， Ubuntu 12.10 和 Oracle Java 1.6 和 Java 1.7 上的上述代码，打印输出为

```
[5, 6, 23, 8] 
```

我相信这是错误的。这应该改为打印为`[5, 6, 8, 23]` 这是一个缺陷吗？还是我对优先队列的理解是错误的？

除此之外，如果我在之前或之后更改将 23 添加到 PriorityQueue 的位置，这将按预期工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T12:25:27.480

[该类](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractCollection.html#toString%28%29)的[`toString()`方法`AbstractCollection`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/AbstractCollection.html#toString%28%29)（这是`PriorityQueue`使用的）声明它：

> 返回此集合的字符串表示形式。字符串表示由集合元素的列表组成，按其迭代器返回的顺序排列，用方括号 ("[]") 括起来。

如果您查看[PriorityQueue iterator 的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/PriorityQueue.html#iterator%28%29)，它会指出：

> 返回此队列中元素的迭代器。迭代器不会以任何特定顺序返回元素。

只有当您从队列中提取项目时，优先级才会发挥作用，而不是当您获得它们的字符串表示时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T12:24:26.403

这只是字符串表示。尝试`remove()`多次调用。

```
System.out.println(queue.remove());
System.out.println(queue.remove());
System.out.println(queue.remove());
System.out.println(queue.remove()); 
```

这将导致

```
5
6
8
23 
```

# mysql - 在moodle中查询学生的分数和成绩

> ID：13584160
> 
> 赞同：1
> 
> 时间：2012-11-27T12:21:47.317
> 
> 标签：mysql, moodle

我正在尝试通过查询获取学生的分数和成绩，但我无法计算出联接。这是一个非常复杂的数据库。以前有人做过吗？

下面的查询（我自己修改的表格）适用于某些学生，但不适用于其他学生，所以我需要一个具有原始表结构的合适的查询。

谢谢

**我的错误查询**

```
SELECT mdl_grade_items.id AS ItemID,
       mdl_course.shortname AS CourseShortname,
       mdl_grade_items.itemname AS ItemName,
       mdl_grade_items.grademax AS ItemGradeMax,
       mdl_grade_items.aggregationcoef AS ItemAggregation,
       mdl_grade_grades.finalgrade AS FinalGrade,
       mdl_user.username AS StudentID,
       mdl_user.id
FROM mdl_grade_items
  INNER JOIN mdl_grade_grades 
    ON mdl_grade_items.id = mdl_grade_grades.itemid
  INNER JOIN mdl_role_assignments 
    ON mdl_grade_grades.userid = mdl_role_assignments.userid 
    AND mdl_grade_items.courseid = mdl_role_assignments.mdlcourseid
  INNER JOIN mdl_course 
    ON mdl_course.id = mdl_grade_items.courseid
  INNER JOIN mdl_user 
    ON mdl_user.id = mdl_role_assignments.userid
WHERE mdl_grade_items.courseid = '2864' 
  AND mdl_user.username = '123456789' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T05:59:22.953

如果您忽略学生的注册状态，您可以简化查询（如果需要，可以稍后过滤学生）。

这是一个示例，它将为您提供课程中用户的所有成绩：

```
 SELECT 
  u.id AS userid,
  u.username AS studentid,
  gi.id AS itemid,
  c.shortname AS courseshortname,
  gi.itemname AS itemname,
  gi.grademax AS itemgrademax,
  gi.aggregationcoef AS itemaggregation,
  g.finalgrade AS finalgrade
  FROM mdl_user u
  JOIN mdl_grade_grades g ON g.userid = u.id
  JOIN mdl_grade_items gi ON g.itemid =  gi.id
  JOIN mdl_course c ON c.id = gi.courseid
  WHERE gi.courseid  = :courseid AND u.username = :username; 
```

如果这不适合，也许您可​​以从非技术角度解释您要达到的目标。

# android - 使用 android:protectionLevel="signature" 的问题

> ID：13584164
> 
> 赞同：5
> 
> 时间：2012-11-27T12:22:02.017
> 
> 标签：android, android-service

如果应用程序未使用与包含应用程序相同的证书进行签名，我试图阻止应用程序绑定到服务。为此，我通过使用一个元素在清单（包含服务的应用程序）中声明了一个新权限，并将新权限的 protectionLevel 设置为签名，如图所示。

```
<permission android:name="jp.co.abc.android.OMRSSettings.permission.Access"
android:protectionLevel="signature"></permission>

<uses-permission android:name="jp.co.abc.android.OMRSSettings.permission.Access"/> 
```

然后，在服务的清单声明中，我使用了一个 android:permission 属性，因此需要这个新权限才能绑定到服务。

```
<service android:name="jp.co.xyz.bluetooth.profile.TIPServer"
 android:permission="jp.co.abc.android.OMRSSettings.permission.Access" >
<intent-filter>
<action android:name="jp.co.xyz.bluetooth.api.ICommonResultCallback" />
<action android:name="jp.co.xyz.bluetooth.api.ITimeServer" />
</intent-filter> 
```

我尝试从另一个应用程序访问此服务。在第二个应用程序的清单中，我添加`<uses-permission android:name="jp.co.abc.android.OMRSSettings.permission.Access"/>` 并尝试绑定到第一个应用程序的服务。

但我得到以下异常。

```
01-02 00:06:54.531: INFO/PowerManagerService(425): Start Light.setBrightness(), [20],  [3]
01-02 00:06:56.473: INFO/PowerManagerService(425): Start Light.setBrightness(), [130], [3]
01-02 00:06:58.055: WARN/dalvikvm(4956): threadid=1: thread exiting with uncaught exception (group=0x40b70390)
01-02 00:06:58.055: WARN/ActivityManager(425): Permission Denial: Accessing service ComponentInfo{jp.co.abc.android.omrsettings/jp.co.xyz.bluetooth.profile.TIPServer} from   pid=4956, uid=10158 requires jp.co.abc.android.OMRSSettings.permission.Access
01-02 00:06:58.065: ERROR/AndroidRuntime(4956): FATAL EXCEPTION: main
java.lang.SecurityException: Not allowed to bind to service Intent {     act=jp.co.xyz.bluetooth.api.ITimeServer }
at android.app.ContextImpl.bindService(ContextImpl.java:1187)
at android.content.ContextWrapper.bindService(ContextWrapper.java:370)
at jp.co.abc.middleware.tip.LeTimeServerProfile.startTimeServer(LeTimeServerProfile.java:45)
at jp.co.abc.tip.TimeActivity.onClick(TimeActivity.java:49)
at android.view.View.performClick(View.java:3511)
at android.view.View$PerformClick.run(View.java:14133)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4507)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
at dalvik.system.NativeStart.main(Native Method)
01-02 00:06:58.095: WARN/ActivityManager(425): Force finishing activity      jp.co.abc.tip/.TimeActivity 
```

`<uses-permission android:name="jp.co.abc.android.OMRSSettings.permission.Access"/>`尽管我在第二个应用程序的清单中正确声明，但有人可以告诉我为什么我有权限问题。

任何帮助深表感谢。

**编辑**

修改为包括列尼克在他的回答中建议的更正。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T13:54:15.263

除了 lenik 不弄乱您的权限名称的解决方案之外，对于您当前的实施，安装顺序很重要。在安装客户端之前，您必须先安装服务（`<permission>`定义的地方）。否则，客户端将不会收到该权限，因为 Android 将忽略`<uses-permission>`它无法识别的权限。如果您将`<permission>`元素放在*两个*应用程序中（具有相同的值），安装顺序将不再重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T12:47:21.440

您请求的许可是：

```
<permission android:name="jp.co.abc.android.OMRSSettings.permission.Access" 
```

你的日志说：

```
requires jp.co.abc.android.OMRSettings.permission.Access 
```

您应该决定在这两种情况下都使用“OMRS”或“OMR”，一个“S”是额外的。

# java - 如何将 EJB 注入 ResourceFilterFactory (Jersey)

> ID：13584168
> 
> 赞同：0
> 
> 时间：2012-11-27T12:22:19.530
> 
> 标签：java, ejb, jersey

我似乎无法通过泽西岛`@EJB`或`@Inject`向泽西岛注射任何东西。当我在 FilterFactory 中使用 @EJB/@Inject 时，该字段仍然为空，但注入其他 bean 工作正常。

我*可以*使用@Context 为 FIlterFacory 成功注入。

我在这里想念什么？

```
public class FilterFactory implements ResourceFilterFactory{

    @EJB
    private MyFilter myFilter ;

    @Override 
    public List<ResourceFilter> create(AbstractMethod am) {
        List<ResourceFilter> filters = new ArrayList<ResourceFilter>();
        filters.add(myFilter);
        return filters;
    } 
```

我的 web.xml 的一部分：

```
<init-param>
     <param-name>com.sun.jersey.spi.container.ResourceFilters</param-name>
     <param-value>com.jea.openxchange.rest.filter.FilterFactory</param-value>
</init-param> 
```

我的过滤器

```
@Stateless
public class MyFilter implements ResourceFilter,ContainerResponseFilter  {

    @Override
    public ContainerResponse filter(ContainerRequest request, ContainerResponse response) {
        //todo
        return response;
    }

    @Override
    public ContainerRequestFilter getRequestFilter() {
        return null;
    }

    @Override
    public ContainerResponseFilter getResponseFilter() {
        return this;
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:30:34.850

这可能是 Jersey 如何创建`FilterFactory`. 如果它不是由容器创建的，CDI 将不起作用，`@EJB`也不会。根据 Java EE6 CDI 规范，由 new 或反射创建的对象不受管理，因此不会发生注入。新的 CDI 规范将解决这个问题。

# jquery - Chrome 扩展：通过内容脚本将 JQuery Dialog 注入页面

> ID：13584169
> 
> 赞同：-3
> 
> 时间：2012-11-27T12:22:28.940
> 
> 标签：jquery, jquery-ui, google-chrome-extension

我已经尝试过[这种](https://stackoverflow.com/questions/12616607/chrome-extension-opening-jquery-ui-dialog/13583586#13583586)注入 jquery 对话框的解决方案，但没有成功。我在页面上有一个对话框，但它显示为透明的。似乎 jquery-ui.css 没有正确加载。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:08:46.073

解决方案是下载**jquery-ui.css**文件并将其放入插件目录并在**manifest.json**中链接到它，如下所示：

```
"content_scripts": [{
"matches": ["http://*/*", "http://jquery.com/*"],
    "css": ["jquery-ui.css"],
    "js": ["jquery.js", "jquery-ui.js", "popup.js"]
}] 
```

我不知道为什么以下注入不起作用：

```
chrome.browserAction.onClicked.addListener(function (tab) {
    chrome.tabs.executeScript(null, {
        file: "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.3/themes/ui-lightness/jquery-ui.css",
        runAt: "document_start"
    },

    chrome.tabs.executeScript(null, {
        file: "http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js",
        runAt: "document_start"
    },

    function () {
        chrome.tabs.executeScript(null, {
            file: "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"
        },

        function () {
            chrome.tabs.executeScript(null, {
                file: "popup.js"
            });
        });
    });
 }); 
```

所以我下载了**jquery.js**，**jquery-ui.js**，将它们放到插件目录并链接到**manifest.json**中，如上所述。然后删除所有注射：

```
chrome.browserAction.onClicked.addListener(function(tab) {
    chrome.tabs.executeScript(null, 
        {
            file:"popup.js", 
            runAt:"document_start"}
        });); 
```

结果我在任何页面上都得到了格式化的 jQuery 对话框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:07:04.313

上次我需要通过 Ajax 请求请求整个 CSS 并将其放入标题中，我必须将 CSS 直接写入文档。我不记得我为什么这样做了，但是当我找到更好的解决方案时，我很确定我不会这样做。另请注意，如果它只是对话框，你真的不需要整个 CSS。对于我的“解决方案”，最好只使用你真正需要的东西。

# ios - EWS：如何在 iOS 中下载附件之前获取文件附件大小

> ID：13584170
> 
> 赞同：0
> 
> 时间：2012-11-27T12:22:38.793
> 
> 标签：ios, soap, exchange-server, exchangewebservices

我正在编写作为邮件客户端的 iOS 应用程序。由于某些限制，我必须使用 EWS（Exchange Web 服务）来处理邮箱。我所能做的就是向服务器发送 SOAP 请求以获取必要的信息。到目前为止，我已经设法使用[SyncFolderItems Operation](http://msdn.microsoft.com/en-us/library/exchange/aa563967%28v=exchg.140%29.aspx)获取每个文件夹中的消息列表。之后，我使用[GetItem (E-mail Message) Operation](http://msdn.microsoft.com/en-us/library/exchange/aa566013%28v=exchg.140%29.aspx)获取每个项目的详细信息。最后一个请求仅返回电子邮件附件 ID 和名称，但不返回它们的大小。但我需要了解它们才能让用户决定是否下载它们。我怎样才能得到这些信息？

这是代码，我在其中创建对服务器的 SOAP 请求。

```
+(NSString*) syncFolderItems:(NSString*)folderID :(NSString*) syncState 
{
    NSString * syncStateStr=@"<SyncState>%@</SyncState>";
    if(syncState!=nil && ![syncState isEqualToString:@""])
    {
        syncStateStr=[NSString stringWithFormat:syncStateStr,syncState];
    }
    else
        syncStateStr=@"";

    NSString * request= @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
    "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\">"
    "<soap:Body>"
    "<SyncFolderItems xmlns=\"http://schemas.microsoft.com/exchange/services/2006/messages\">"
    "<ItemShape>"
    "<t:BaseShape>IdOnly</t:BaseShape>"
    "</ItemShape>"
    "<SyncFolderId>"
    "<t:FolderId Id=\"%@\"/>"
    "</SyncFolderId>"
    "%@"
    "<MaxChangesReturned>10</MaxChangesReturned>"
    "</SyncFolderItems>"
    "</soap:Body>"
    "</soap:Envelope>";
    return [NSString stringWithFormat:request, folderID,syncStateStr];
}

+(NSString*)getMailItemsDetails:(NSMutableArray*)items
{
    NSString *request = 
    @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
    "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\">"
    "<soap:Body>"
    "<GetItem xmlns=\"http://schemas.microsoft.com/exchange/services/2006/messages\">"
    "<ItemShape>"
    "<t:BaseShape>Default</t:BaseShape>"
    "<t:IncludeMimeContent>false</t:IncludeMimeContent>"
        "<t:AdditionalProperties>"
            "<t:FieldURI FieldURI=\"item:Attachments\"/>"
        "</t:AdditionalProperties>"
    "</ItemShape>"
    "<ItemIds>"
    "%@"
    "</ItemIds>"
    "</GetItem>"
    "</soap:Body>"
    "</soap:Envelope>";

    NSString *itemIdTemplate = @"<t:ItemId Id=\"%@\" />";
    NSString *itemsIds = @"";

    for(NSString *msgID in items)
    {
        NSString *itemId = [NSString stringWithFormat:itemIdTemplate, msgID];
        itemsIds = [itemsIds stringByAppendingString:itemId];
    }

    return [NSString stringWithFormat:request, itemsIds];
} 
```

我错过了什么吗？（可能是一些额外的属性？）我必须使用不同的请求吗？EWS 请求有可能吗？如果没有，是否有一些解决方法可以解决问题？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:40:13.763

Yarlik，根据我的说法，大小应该由服务器发送。

不管怎样，让我看看有没有发现，一定要转发给你。

但是，您可以在代表中做一件事，即；

```
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

}
-(NSURLRequest *)connection:(NSURLConnection *)connection
        willSendRequest:(NSURLRequest *)request
       redirectResponse:(NSURLResponse *)response {
}

long long fileSize = [response expectedContentLength]; 
```

它会给你文件大小。

# java - 是否可以在 weblogic-application.xml 中定义应用程序版本？

> ID：13584171
> 
> 赞同：5
> 
> 时间：2012-11-27T12:22:41.393
> 
> 标签：java, xml, weblogic

需要在 weblogic-application.xml 中定义我们产品的一个版本。可能吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T22:20:10.633

对于 WebLogic，应用程序版本位于`Weblogic-Application-Version`清单文件的属性中。

```
 <manifest file="${dist.dir}/MANIFEST.MF">
        <attribute name="Created-By" value="${user.name}" />
        <attribute name="Created-On" value="${build.timestamp}" />
        <attribute name="Ant-Version" value="${ant.version}" />
        <attribute name="Java-Version" value="${ant.java.version}" />
        <attribute name="Weblogic-Application-Version" value="${project.version}" />
    </manifest> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-23T15:53:52.830

我确实增加了清单文件并放置

```
Manifest-Version: 1.0
Class-Path:
Created-By: Ronald
Weblogic-Application-Version: v1 
```

在src/META-INF/MANIFEST.MF中创建manifest文件并放置在文件内容中。您可以通过更改 pro v1、v2 等来更改版本。

您可以查看以下链接以查看更多详细信息。

[http://andrejusb.blogspot.com/2011/12/how-to-set-ear-version-for-adf.html](http://andrejusb.blogspot.com/2011/12/how-to-set-ear-version-for-adf.html)

# git - 从本地项目文件夹推送到远程 Git 存储库

> ID：13584172
> 
> 赞同：1
> 
> 时间：2012-11-27T12:22:45.433
> 
> 标签：git, github, bitbucket

这是我需要做的。

我的本地驱动器中有一个项目文件夹。我的本地 Git 存储库位于本地驱动器上的其他位置。我需要将项目文件夹推送到远程 Git 存储库。无需在我的项目文件夹中创建新存储库或将项目文件夹移动到本地 Git 存储库。

我有 TortoiseGit。以及带有 Git 插件的 Eclipse。

我主要使用 Subversion (SVN)。我知道以上在 SVN 中是可能的，但在 Git 中是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:27:14.460

从您的项目文件夹中，您可以使用`GIT_DIR`指定 Git 存储库的位置：

```
 cd /project/folder
 GIT_DIR=/path/to/repo/.git git add .
 GIT_DIR=/path/to/repo/.git git commit -m "my commit message" 
```

这意味着您将项目文件夹视为位于其他地方的 Git 存储库的工作目录。

# sql-server - 如何使用sql查询从currentdate获取2年前的日期

> ID：13584174
> 
> 赞同：3
> 
> 时间：2012-11-27T12:22:48.417
> 
> 标签：sql-server

> **可能重复：**
> [如何查找 2 年前的日期](https://stackoverflow.com/questions/4366143/how-to-find-2-years-back-date)

我需要使用 SQL Server 2008 中的查询得出当前日期的 2 年前日期。

例如：今天的日期是`2012-11-27`. `YYYY-MM-DD`我需要以上述格式（ ）获取此日期前 2 年的日期。

请让我知道是否有多种方法，哪一种更好。

谢谢和问候， 亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:25:55.250

尝试;

```
SELECT CONVERT(VARCHAR(10), DATEADD(Year,-2,GETDATE()), 120) AS OldDate 
```

**编辑：**今天日期（27/11/2012）的输出是；

```
2010-11-27 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:46:16.590

```
SELECT * FROM YourTable WHERE Datediff(Year, Yourdate, GetDate()) = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:25:41.953

我认为这可行 `dateadd(year,-2,getdate())`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T13:22:24.980

试试看

```
SELECT CONVERT(VARCHAR(10), DATEADD(Year,-2,GETDATE()), 120) AS [2YearsBeforeDate] 
```

你得到了像

## 2 年前日期

2010-11-27

它会给你所需的输出

# jsf - 我预计 ui:repeat 会创建带有列的表行，但它会在行内创建跨度

> ID：13584181
> 
> 赞同：0
> 
> 时间：2012-11-27T12:23:33.267
> 
> 标签：jsf

我正在使用 Primefaces p:datatable 和 p:rowExpansion。我的目标是使用以下 xhtml 显示行详细信息。

```
<p:dataTable
        value="#{bilisimArizaBean.kullaniciBilisimArizalariListesi}"
        var="ariza">
        <p:column style="width:4%">
            <p:rowToggler />
        </p:column>
        <p:column headerText="Arıza no">
#{ariza.bilisimArizaId}
</p:column>
        <p:column headerText="">
#{ariza.bilisimArizaTuru.bilisimArizaTuru}
</p:column>
        <p:column>
#{ariza.cihazMarkasi} #{ariza.cihazModeli} #{ariza.cihazSeriNo}
</p:column>
        <p:column>
#{ariza.arizaAciklama}
</p:column>
        <p:rowExpansion>
            <div>
                <p:panelGrid id="display" columns="4" cellpadding="4"
                    style="border:1px;border-color:red;"
                    styleClass=" ui-widget-content grid">
                    <ui:repeat var="ticket" value="#{ariza.bilisimArizaTicket}">
                        <h:outputText value="Gelişme No" />
                        <h:outputText id="gelisme" value="#{ticket.ticketAciklama}" />
                        <h:outputText value="Durum:" />
                        <h:outputText id="durum" value="#{ticket.arizaDurum.durumAdi}" />
                        <br></br>
                    </ui:repeat>
                </p:panelGrid>
            </div>
        </p:rowExpansion>
    </p:dataTable> 
```

我预计它将在 p:rowExpansion 内创建包含列的表行。但是，ui:repeat 会生成一个表，其中的行只有一列。并跨越此列。那是

```
<table>
<tr>
<td><span>data</span><span>data</span><span>data</span></td>
</tr>
<tr>
<td><span>data</span><span>data</span><span>data</span></td>
</tr>
.
.
.
</table> 
```

我期望并想要以下

```
<table>
<tr>
<td>data</td>    <td>data</td>    <td>data</td>
</tr>
<tr>
<td>data</td>    <td>data</td>    <td>data</td>
</tr>
.
.
.
</table> 
```

为什么在这种情况下跨越而不是列？以及如何在一列中获取列而不是跨度？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:30:20.840

在您的特定构造中，`<ui:repeat>`内部`<p:panelGrid>`不会生成多个 JSF 组件，每个组件只生成一次 HTML。相反，它重用相同的 JSF 组件以在每次迭代中多次生成其 HTML 输出。

这个不对。您需要 a`<h:dataTable>`或`<p:dataTable>`此处而不是`<p:panelGrid><ui:repeat>`.

例如

```
<h:dataTable var="ticket" value="#{ariza.bilisimArizaTicket}">
    <h:column><h:outputText value="Gelişme No" /></h:column>
    <h:column><h:outputText id="gelisme" value="#{ticket.ticketAciklama}" /></h:column>
    <h:column><h:outputText value="Durum:" /></h:column>
    <h:column><h:outputText id="durum" value="#{ticket.arizaDurum.durumAdi}" /></h:column>
</h:dataTable> 
```

这些跨度是不相关的，它们只是来自`<h:outputText>`.

# java - 无法将我的 ms 访问权限与 java 连接

> ID：13584189
> 
> 赞同：1
> 
> 时间：2012-11-27T12:23:57.617
> 
> 标签：java, ms-access, odbc

我尝试了多种方法将我的数据库从 ms access 2010 与 java 连接，但它不起作用。

1.  我通过将属性中的路径更改为`%windir%\SysWOW64\odbcad32.exe`.

2.  我在这个网站上下载了 AccessDatabaseEngine_x64.exe 的 Microsoft Access Database Engine 2010 Redistributable。[http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=13255](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=13255)

我研究了大部分网站，他们告诉我们下载数据库引擎 2010。但是，我仍然收到此错误：

> [Microsoft] [ODBC 驱动程序管理器] 指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配。

有人可以发布分步指南来解决我的问题吗？任何帮助将不胜感激。

**当前源代码**

```
private Connection con; 
public void setUp(String dsn) {
    try { 
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    } catch (Exception e) { 
        System.out.println("Load driver error"); 
    } try { 
        String s = "jdbc:odbc:" + dsn; 
        con = DriverManager.getConnection(s, "", ""); 
    } catch (Exception e) {
        e.printStackTrace(); 
    } 
} 

public ResultSet readRequest(String dbQuery) { 
    ResultSet rs = null; 
    try { 
        Statement stmt = con.createStatement(); 
        rs = stmt.executeQuery(dbQuery); 
    } catch (Exception e) { 
        e.printStackTrace(); 
    } 
    return rs; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:53:05.923

连接 64 位 JVM 和 64 位 MS-Access 与 64 位略有不同。有人和你经历了同样的痛苦，[写了一篇](http://www.selikoff.net/2011/07/26/connecting-to-ms-access-file-via-jdbc-in-64-bit-java/)关于如何解决问题的文章。

基本上，如果您使用 64 位库，则需要稍微更改连接字符串。用这个：

```
String url = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ="+fileName;
con = DriverManager.getConnection(url,"",""); 
```

其中 filename 是访问文件的完整路径的字符串，而不是：

```
String s = "jdbc:odbc:" + dsn; 
con = DriverManager.getConnection(s, "", ""); 
```

# xml - 层次结构 XML 到 SQL

> ID：13584190
> 
> 赞同：1
> 
> 时间：2012-11-27T12:24:01.627
> 
> 标签：xml, sql-server-2008, parsing, xml-parsing

我有一个包含多个元素和属性的 xml（您可以在下面看到一个示例），我想从中创建一个 SQL 表/表。

XML 示例：

```
<prgs>
 <prg Id="1" >
   <name>Xulescu</name>
   <type>Human</type>
   <attribs>
     <attrib>doesn't matter</attrib>
   </attribs>
   <timeZone>doesn't matter</timeZone>
   <URL>doesn't matter/</URL>

 .....
</prgs> 
```

我需要做一张这样的桌子

```
ID       |      Name
-------------------------
1        |      Xulescu
...... 
```

谢谢

**另一种情况**

那这个呢 ？

```
<schedules type="tip1">
  <schedule prgsId="15361" >
     <event Id="1234" date="2012-10-05">
       <times>
         <time>01:00</time>
       </times>
     </event>
     <event Id="2345" date="2012-10-05">
       <times>
         <time>01:30</time>
       </times>
     </event> 
```

结果应该是一个表格

```
 ID     ScheduleID      PrgsID        showId     Date     Time
  .................................................................
   1        xxx            xxxx          1234     2012-10-05   01:00
   2        xxx            xxxx          2345     2012-10-05   01:30 
```

ID 是一个自增字段

`ScheduleID, PrgsID`是 FK 键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:27:09.667

像这样的东西：

```
DECLARE @XmlFile XML

SELECT @XmlFile = CAST(BulkColumn AS XML)
FROM OPENROWSET (BULK 'C:\temp\sample.xml' , SINGLE_BLOB) AS XMLDATA

SELECT
    ID = Prgs.value('@Id', 'int'),
    Name = Prgs.value('(name)[1]', 'varchar(50)')
FROM 
    @XmlFile.nodes('/prgs/prg') AS XTbl(Prgs) 
```

如果您的文件包含此 XML：

```
<prgs>
 <prg Id="1" >
   <name>Xulescu</name>
   <type>Human</type>
</prg>
 <prg Id="2" >
   <name>Xulescu2</name>
   <type>Human</type>
</prg>
</prgs> 
```

你会得到这个输出：

```
ID  Name
------------
1   Xulescu
2   Xulescu2 
```

**更新：**对于您的其他情况 - 这个怎么样？（*假设您已经在`@XML`变量*中拥有 XML 结构）：

```
INSERT INTO dbo.YourTable(ScheduleID, PrgsID, ShowId, [Date], [Time])
   SELECT
       Sched.value('@prgsId', 'int'),
       Sched.value('@prgsId', 'int'),
       Events.value('@Id', 'int'),
       Events.value('@date', 'date'),
       Events.value('(times/time)[1]', 'varchar(50)')
   FROM
       @XML.nodes('/schedules/schedule') AS XTbl(Sched)
   CROSS APPLY
       Sched.nodes('event') AS XTbl2(Events) 
```

不确定您想要如何/使用哪个属性- 我只在...`ScheduleId`上`PrgsId`看到一个`PrgsId`属性`<schedule>`

# blackberry - 在 BlackBerry 中设备启动后自动启动应用程序

> ID：13584199
> 
> 赞同：1
> 
> 时间：2012-11-27T12:24:28.260
> 
> 标签：blackberry, boot, autorun

我想在 BlackBerry 物理设备启动后立即自动运行我的 BlackBerry 应用程序。我已经检查了BlackBerry Application Descriptor 中的***Auto-run on startup***选项。设备启动完成后仍然无法启动。

这是正确的做法还是我必须`implements SystemListener`在我的主要课程中这样做。

# java - How do you set an ArrayList of integers[] equal to an ArrayList of doubles[]

> ID：13584207
> 
> 赞同：-3
> 
> 时间：2012-11-27T12:25:01.847
> 
> 标签：java

How do you set an ArrayList of integers[] equal to an ArrayList of doubles[]?

I tried a lot of different things but none of them worked. I'm sure there is a really simple answer to this problem but I could not find it on google thanks.

Im coding in Java

I tried this

```
drawablerect =  (ArrayList int[]) rect; 
```

And setting each array in drawables to each array in rect.

drawablerect is an ArrayList of int[] and rect is a ArrayList of double[]

This is what I did

```
for(int i = 0; i < rect.size(); i++)
       for(int index = 0; index < 7; index++)
                 drawablerect.get(i)[index] = (int) rect.get(i)[index]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:27:33.567

1.  Create an integer of the appropriate size
2.  Iterate over the ArrayList
3.  Assign each value to the array

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:44:30.963

One possible solution:

```
// Beware of precision loss (0.99999 --> 0)
public static List<int[]> toListIntArray(List<double[]> input) {
    List<int[]> output = new ArrayList<>(input.size());
    for (double[] in : input) {
        int[] ints = new int[in.length];
        for (int i = 0; i < in.length; i++) {
            ints[i] = (int) in[i];
        }
        output.add(ints);
    }
    return output;
} 
```

You can use it like this:

```
drawablerect = toListIntArray(rect); 
```

# xslt - 读取第三个 xml 文件后使用 xslt 合并两个 xml 文件

> ID：13584210
> 
> 赞同：2
> 
> 时间：2012-11-27T12:25:13.113
> 
> 标签：xslt, xslt-1.0

我有一个如下的 xml 文件 **propNode.xml**

```
<NODES>
  <NODE>
<NODELINE CLASS="Item" TYPE="Item" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName" />
    <ATTR_NODE NAME="myDesc />
  </ATTR_NODES>
</NODELINE>
<NODELINE CLASS="Item1" TYPE="Item1" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName1" />
    <ATTR_NODE NAME="myDesc1" />
  </ATTR_NODES>
</NODELINE>
<NODELINE CLASS="Item2" TYPE="Item2" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName2" />
    <ATTR_NODE NAME="myDesc2" />
  </ATTR_NODES>
</NODELINE>
</NODE>
</NODES> 
```

我想读取这个xml并使用它，我需要合并以下两个xml文件 **source.xml**

```
<NODES>
  <NODE>
<NODELINE CLASS="Item" TYPE="Item" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName" VALUE="myNameValue" />
    <ATTR_NODE NAME="myDesc" VALUE="test-myDescValue" />
<ATTR_NODE NAME="myId" VALUE="test-myIdValue" />
  </ATTR_NODES>
</NODELINE>
<NODELINE CLASS="Item1" TYPE="Item1" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName1" VALUE="myNameValue1" />
    <ATTR_NODE NAME="myDesc1" VALUE="myDescValue1"/>
<ATTR_NODE NAME="myId1" VALUE="myIdValue1" />
  </ATTR_NODES>
</NODELINE>
<NODELINE CLASS="Item2" TYPE="Item2" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName2" VALUE="test-myNameValue2" />
    <ATTR_NODE NAME="myDesc2" VALUE="myDescValue2"/>
<ATTR_NODE NAME="myId2" VALUE="test-myIdValue2" />
  </ATTR_NODES>
</NODELINE>
  </NODE>
</NODES> 
```

和**target.xml**

```
<NODES>
  <NODE>
<NODELINE CLASS="Item" TYPE="Item" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName" VALUE="myNameValue" />
    <ATTR_NODE NAME="myDesc" VALUE="myDescValue" />
<ATTR_NODE NAME="myId" VALUE="myIdValue" />
  </ATTR_NODES>
</NODELINE>
<NODELINE CLASS="Item1" TYPE="Item1" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName1" VALUE="myNameValue1" />
    <ATTR_NODE NAME="myDesc1" VALUE="myDescValue1"/>
<ATTR_NODE NAME="myId1" VALUE="myIdValue1" />
  </ATTR_NODES>
</NODELINE>
<NODELINE CLASS="Item2" TYPE="Item2" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName2" VALUE="myNameValue2" />
    <ATTR_NODE NAME="myDesc2" VALUE="myDescValue2"/>
<ATTR_NODE NAME="myId2" VALUE="myIdValue2" />
  </ATTR_NODES>
</NODELINE>
  </NODE>
</NODES> 
```

条件是读取propNode.xml，如果@NAME的值在source.xml和target.xml中匹配，那么需要比较source.xml和target.xml中@VALUE的值，并输出一个xml创建如下：

**期望输出.xml**

```
<NODES>
  <NODE>
<NODELINE CLASS="Item" TYPE="Item" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName" SRCVALUE="myNameValue" TGTVALUE="myNameValue" ISDIFF="false" />
    <ATTR_NODE NAME="myDesc" SRCVALUE="test-myDescValue" TGTVALUE="myDescValue" ISDIFF="true" />
  </ATTR_NODES>
</NODELINE>
<NODELINE CLASS="Item1" TYPE="Item1" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName1" SRCVALUE="myNameValue1" TGTVALUE="myNameValue1" ISDIFF="false" />
    <ATTR_NODE NAME="myDesc1" SRCVALUE="myDescValue1" TGTVALUE="myDescValue1" ISDIFF="false" />
  </ATTR_NODES>
</NODELINE>
<NODELINE CLASS="Item2" TYPE="Item2" >
  <ATTR_NODES>
    <ATTR_NODE NAME="myName2" SRCVALUE="test-myNameValue2" TGTVALUE="myNameValue2" ISDIFF="true" /> />
    <ATTR_NODE NAME="myDesc2" SRCVALUE="myDescValue2" TGTVALUE="myDescValue2" ISDIFF="false" />
  </ATTR_NODES>
</NODELINE>
  </NODE>
</NODES> 
```

如果在propNode.xml 中选择了@NAME 的值，则desiredOutput.xml 应该包含来自源和目标的@VALUE 的值。如果@VALUE 的值不同，则@ISDIFF 的值应为“true”，否则为“false”。

这整个操作可以使用 xslt 吗？类似于使用 propNode.xml 生成 xsl，然后将其应用于 source.xml 和 target.xml 以生成所需的输出？这个 xsl 会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:55:32.323

假设只有`ATTR_NODE`存在的节点 ( )`propNode.xml`需要测试，下面的 XSLT 应该可以完成这项工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:my="some.uri" version="1.0">

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="ATTR_NODE">
        <xsl:variable name="NodeLine" select="../../@CLASS" />
        <xsl:variable name="AttrName" select="@NAME" />
        <xsl:variable name="SrcValue" select="document('source.xml')//NODELINE[@CLASS=$NodeLine]//ATTR_NODE[@NAME=$AttrName]/@VALUE" />
        <xsl:variable name="TgtValue" select="document('target.xml')//NODELINE[@CLASS=$NodeLine]//ATTR_NODE[@NAME=$AttrName]/@VALUE" />
        <xsl:element name="ATTR_NODE">
            <xsl:attribute name="NAME">
                <xsl:value-of select="$AttrName"/>
            </xsl:attribute>
            <xsl:attribute name="SRCVALUE">
                <xsl:value-of select="$SrcValue" />
            </xsl:attribute>
            <xsl:attribute name="TGTVALUE">
                <xsl:value-of select="$TgtValue" />
            </xsl:attribute>
            <xsl:attribute name="ISDIFF">
                <xsl:value-of select="$SrcValue!=$TgtValue" />
            </xsl:attribute>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

标识模板用于遍历和复制，对源和目标中的每个检查`propNode`进行特殊处理，然后进行相等性评估。我假设这足以确定- 如果不是，那么您还需要添加额外的检查，例如。`ATTR_NODE``VALUE``NODE_LINE/@CLASS``NODE_LINE``@TYPE`

xslt 针对 运行`propnode.xml`，`source.xml`并且`target.xml`必须存在于同一文件夹中。

**输出**

```
<?xml version="1.0" encoding="utf-8"?>
<NODES>
    <NODE>
        <NODELINE CLASS="Item" TYPE="Item">
            <ATTR_NODES>
                <ATTR_NODE NAME="myName" SRCVALUE="myNameValue" TGTVALUE="myNameValue" ISDIFF="false" />
                <ATTR_NODE NAME="myDesc" SRCVALUE="test-myDescValue" TGTVALUE="myDescValue" ISDIFF="true" />"
            </ATTR_NODES>
        </NODELINE>
        <NODELINE CLASS="Item1" TYPE="Item1">
            <ATTR_NODES>
                <ATTR_NODE NAME="myName1" SRCVALUE="myNameValue1" TGTVALUE="myNameValue1" ISDIFF="false" />
                <ATTR_NODE NAME="myDesc1" SRCVALUE="myDescValue1" TGTVALUE="myDescValue1" ISDIFF="false" />
            </ATTR_NODES>
        </NODELINE>
        <NODELINE CLASS="Item2" TYPE="Item2">
            <ATTR_NODES>
                <ATTR_NODE NAME="myName2" SRCVALUE="test-myNameValue2" TGTVALUE="myNameValue2" ISDIFF="true" />
                <ATTR_NODE NAME="myDesc2" SRCVALUE="myDescValue2" TGTVALUE="myDescValue2" ISDIFF="false" />
            </ATTR_NODES>
        </NODELINE>
    </NODE>
</NODES> 
```

# c# - 多个作业合二为一

> ID：13584213
> 
> 赞同：0
> 
> 时间：2012-11-27T12:25:37.303
> 
> 标签：c#, string, linq, entity-framework

在`Users`模型中，我有`DateTime dtContractStart`和`DateTime dtContractEnd`。

在`UserModel`模型中，我有`String dtContractStart`和`String dtContractEnd`。

为了可以使用 Linq 查询执行字符串转换，我想尝试这样的事情：

```
DateTime start;
DateTime end;

var users = DB.Users
    .Select(user => new UserModel
    {
        id = user.id,
        firstname = user.firstname,
        lastname = user.lastname,
        dtContractStart = "",
        dtContractEnd = "",
    }
        && start = user.dtContractStart
        && end = user.dtContractEnd
    )
    .ToList();

users.ForEach(user =>
    user.dtContractStart = start.toString() &&
    user.dtContractEnd = end.toString()
); 
```

是否可以？我找不到好的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:42:47.720

如果您使用的 Linq 提供程序不接受对 的调用`ToString`，您可以分两步执行查询，`AsEnumerable`用于强制执行查询：

```
var users = DB.Users
    .Where(...) // Whatever filtering clause inside your query
    .AsEnumerable() // Force the query execution, switching to Linq to Objects
    .Select(user => new UserModel
    {
        id = user.id,
        firstname = user.firstname,
        lastname = user.lastname,
        dtContractStart = user.dtContractStart.ToString(),
        dtContractEnd = user.dtContractEnd.ToString(),
    })
    .ToList(); 
```

# android - Android中的几个录音

> ID：13584217
> 
> 赞同：2
> 
> 时间：2012-11-27T12:26:03.407
> 
> 标签：android, android-service, audio-recording

我有一个应该录制几个音频的 android 代码。

第一次录音表现不错，我点击录音，而不是停止，一切正常！但是，如果我在记录中单击另一个时间，我会崩溃！我究竟做错了什么？

```
btnEnregistrement = (ImageButton) findViewById(R.id.button_lancer_enregistrement);
        btnEnregistrement.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                if(btnEnregistrement.getTag().equals("false")){
                        btnEnregistrement.setBackgroundDrawable(getResources().getDrawable(R.drawable.rec_actionaudio_xml));
                        btnEnregistrement.setTag("true");

                        try {
                            recorder.start();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }

                }else{
                        btnValider.setBackgroundDrawable(getResources().getDrawable(R.drawable.valider_cliquable_xml));

                        btnEnregistrement.setBackgroundDrawable(getResources().getDrawable(R.drawable.rec_nonaction_xml));
                        btnEnregistrement.setTag("false");

                        try {
                            recorder.stop();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }       

}               
        } 
```

录音机类

```
import java.io.File;
import java.io.IOException;

import android.media.MediaRecorder;
import android.os.Environment;

public class AudioRecorder {

    final MediaRecorder recorder = new MediaRecorder();
    final String path;

    /**
    * Creates a new audio recording at the given path (relative to root of SD card).
    */
    public AudioRecorder(String path) {
        this.path = sanitizePath(path);
    }

    private String sanitizePath(String path) {
        if (!path.startsWith("/")) {
            path = "/" + path;
        }
        if (!path.contains(".")) {
            path += ".3gp";
        }   
        return Environment.getExternalStorageDirectory().getAbsolutePath() + path;
    }

    /**
     * Starts a new recording.
     */
    public void start() throws IOException {
        String state = android.os.Environment.getExternalStorageState();
        if(!state.equals(android.os.Environment.MEDIA_MOUNTED))  {
            throw new IOException("SD Card is not mounted.  It is " + state + ".");
        }

        // make sure the directory we plan to store the recording in exists
        File directory = new File(path).getParentFile();
        if (!directory.exists() && !directory.mkdirs()) {
            throw new IOException("Path to file could not be created.");
        }

        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile(path);
        recorder.prepare();
        recorder.start();
    }

    /**
    * Stops a recording that has been previously started.
    */
    public void stop() throws IOException {
        recorder.stop();
        recorder.release();
    }

} 
```

# string - 扩展 indexOf 以使用 AS3 中的字符代码

> ID：13584218
> 
> 赞同：1
> 
> 时间：2012-11-27T12:26:08.183
> 
> 标签：string, actionscript-3, class, indexof

我的一个课程需要这个简单的功能才能工作：

```
private function indexOfCode(txt:String, charcode:int, ini:int=0):int {
        for(var i:int=ini; i<txt.length; i++){
            if(txt.charCodeAt(i)==charcode) return i;
        }
        return -1;
    } 
```

就像 String.indexOf 一样，但要搜索代码（我正在搜索换行之类的控制代码）。

在 JavaScript 中，我会使用原型扩展 String 类。在 AS3 中，它接缝这是一种“旧时尚”的做法，但是为自定义类接缝创建另一个自定义类非常多。有没有一种简单的方法来扩展字符串？还有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:41:36.380

你可以通过一些带有静态方法的类来做到这一点，`StringUtils.indexOfCode();`或者你可以像这样制作全局函数：

```
package
{
    public function indexOfCode(txt:String, charcode:int, ini:int=0):int
    {
        for(var i:int=ini; i<txt.length; i++)
        {
            if(txt.charCodeAt(i)==charcode) return i;
        }
        return -1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:26:59.497

请确保您的原型代码编译器在调用原型函数之前至少需要交叉/执行一次。

```
String.prototype.indexOfCode = function(txt:String, charcode:int, ini:int=0):int
{
    for(var i:int=ini; i<txt.length; i++)
    {
      if(txt.charCodeAt(i)== charcode) return i;
    }

    return -1;
}

var letters:String = "ABCDEFG";
trace("indexOfCode :: " + letters.indexOfCode(letters,67,0)); //Complier error if strict mode
trace("indexOfCode :: " + letters["indexOfCode"](letters,67,0)); //No error 
```

问题：

1.  直到运行时才添加动态实例变量；
2.  编译器不知道它的存在，如果在严格模式下使用它会产生错误，更好的是你可以避免原型函数。

基本上我们不能扩展 String 类，因为它是 actionscript 中的密封类。

# sql - 当某些用户编辑数据时如何刷新其他用户界面上的数据

> ID：13584220
> 
> 赞同：3
> 
> 时间：2012-11-27T12:26:11.553
> 
> 标签：sql, wpf, vb.net, winforms, sql-server-2008-r2

在一个 VB.net 应用程序中，我有一个 SQL 接口，我`users`在 SQL 数据库中有一个表供该应用程序的用户使用，当用户单击按钮时，他们现在都看到相同的数据，更改保存在 sql 中并刷新数据对于该用户，但是我希望在某些用户单击该按钮后立即为所有用户刷新数据。

我的想法

1.  每秒刷新数据，不好
2.  我需要更多说明的 vb.net 的 SQL 触发器！

什么是最有效的方法？

我想要一个没有计时器的工作！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:41:47.957

 ~~~~## SQL Server 通知服务~~ 

SQL 提供对通知的订阅，这些通知提供与您的要求相关的机制。

~~[http://msdn.microsoft.com/en-us/library/ms172483(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms172483(v=sql.90).aspx)~~

> ***注意**：删除，因为您后来提供了您使用 SQL Server 2008 R2 的信息*

## 老把戏`System.IO.FileSystemWatcher`

另一种方法是在您的表上创建一个 SQL 触发器，该触发器执行简单的文件时间戳更改。文件本身的大小为 0 字节，因此我们不会向其写入任何内容，从而使其成为快速操作。

然后，所有客户端都会监视此文件以进行修改，并且当它发生时，观察者会触发一个更改事件，您的客户端将简单地重新加载他们的数据。

```
CREATE TRIGGER DataChanged
ON YourTable
FOR INSERT, UPDATE, DELETE
AS
    EXEC master..xsp_UpdateSignalFile 'YourTable.DataChanged' 
```

这个 CLR 存储过程的想法是尽可能快地保持它的可伸缩性。在重负载数据服务器的情况下，这甚至可以通过使用外部进程更新文件来优化......

[您可以在此 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc188758.aspx)中找到 CLR 存储过程的代码，该文章实际上与 Web 表单相关，但您不需要除此 CLR 过程之外的其他内容。也许是对整个系统如何工作的解释。

然后，您的客户端将`System.IO.FileSystemWatcher`用于监视某些网络位置（该过程将更新文件）上的文件更改，并在更改发生时更新其数据。

**不使用轮询或对数据服务器的不必要请求的**简单而优雅的技巧。**当然，您可以在多个表上设置触发器，每个表更改不同的文件，并根据您在客户端上显示的表单，然后在表单的整个生命周期内查看该特定文件。当用户将上下文更改为不同的数据时，您的客户端应用程序会释放文件观察器（并为不同的文件创建一个新的所需的观察器）。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:30:18.890

我猜这是一个 Windows 窗体应用程序，而不是一个 aspx Web 应用程序？我建议在某种用户提出的事件上重新加载表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:36:12.560

简单的，

你不能那样做。你的浏览器只提取一次数据，除了一些像 cookie 这样的东西，你的浏览器不会记住任何东西。

您唯一的选择是每 5 或 10 秒左右刷新一次页面。这只能使用 javascript 来完成。幸运的是，Visual Studio 为您提供了某种 javascript。这将阻止浏览器刷新。因此，您不会每 5 秒听到一次咔哒声。

在要刷新的控件周围添加一个更新面板。然后添加一个 postbacktrigger 并将其设置为 5000 毫秒。

添加到“页面加载”->重新调整您的控件。

更好的方法是添加一个只会向您发送数据但以上工作正常且易于实现的网络方法。

祝你好运。**~~

# visual-c++ - 在宏中使用 __FUNCTION__

> ID：13584230
> 
> 赞同：0
> 
> 时间：2012-11-27T12:26:55.053
> 
> 标签：visual-c++

我需要有函数名。我已经完成了两个程序来打印它的名称： 使用宏：

```
define LogFnc(info) do {cout<<"=FUNCTION= "<info ; } while(0) 
```

并使用功能：

```
void LogFnc(string info)
{
    cout<<"=FUNCTION= "<<info;
} 
```

调用其中一种可能性的过程：

```
int main() {
    LogFnc(__FUNCTION__);
} 
```

为什么如果我使用宏（第一个）没有打印函数名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:29:14.583

**您在 cout<<"=FUNCTION=" <<** info中忘记了一个括号

```
#define LogFnc(info) cout<<"=FUNCTION= " << info ; 
```

此外，让我说你的错误循环`do{...}while(0)`是丑陋的，不直观的，并且适得其反。

# c#-4.0 - 横向生成word文档

> ID：13584232
> 
> 赞同：2
> 
> 时间：2012-11-27T12:26:57.443
> 
> 标签：c#-4.0, ms-word

```
using (MemoryStream generatedDocument = new MemoryStream())
{
   using (WordprocessingDocument package = WordprocessingDocument.Create(generatedDocument, WordprocessingDocumentType.Document))
   {
      MainDocumentPart mainPart = package.MainDocumentPart;

      if (mainPart == null)
      {
         mainPart = package.AddMainDocumentPart();
         new DocumentFormat.OpenXml.Wordprocessing.Document(new DocumentFormat.OpenXml.Wordprocessing.Body()).Save(mainPart);
      }

      HtmlConverter converter = new HtmlConverter(mainPart);
      DocumentFormat.OpenXml.Wordprocessing.Body body = mainPart.Document.Body;

      var paragraphs = converter.Parse(docbody);

      for (int y = 0; y < paragraphs.Count; y++)
                        {
                            body.Append(paragraphs[y]);
                        }

      mainPart.Document.Save();
   } 
```

这在用于生成我的 word 文档的代码片段中，文档以纵向模式生成，我希望页面处于横向模式。那么您能否建议我在哪里使用您提供的上述代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T12:24:49.160

您必须将 SectionProperties 添加到 Body。在部分属性中，您需要设置 PageSize 并将其方向属性设置为 Landscape。

```
SectionProperties sectionProperties = new SectionProperties();

PageSize pageSize = new PageSize()

{

Width = (UInt32Value)15840U,

Height = (UInt32Value)12240U,

Orient = PageOrientationValues.Landscape

};

PageMargin pageMargin = new PageMargin()

{

Top = 1440,

Right = (UInt32Value)1440U,

Bottom = 1440,

Left = (UInt32Value)1440U,

Header = (UInt32Value)720U,

Footer = (UInt32Value)720U,

Gutter = (UInt32Value)0U

};

Columns columns = new Columns() { Space = "720" };

DocGrid docGrid = new DocGrid() { LinePitch = 360 };

sectionProperties.Append(pageSize, pageMargin, columns, docGrid);

body.Append(sectionProperties); 
```

# awk - awk：仅在特定行不存在时过滤块

> ID：13584235
> 
> 赞同：1
> 
> 时间：2012-11-27T12:27:00.387
> 
> 标签：awk, filtering

我得到了一个看起来像这样的文本流：

```
whatever => foo,
arg => 'some text
   over multiple lines
   sometimes',
bytes => 123,
... 
```

我感兴趣的是 和 之间的`arg =>`文本`bytes =>`。所以我过滤掉了这个块

```
cat mystream | awk '/arg =>/,/bytes =>/' 
```

效果很好。但是现在如果文本中某处有一个单词，我想跳过整个块。类似的东西，`grep -v`但对于整个街区，而不仅仅是这条线。有任何想法吗？谢谢。

请注意，这不仅限于 awk，这正是我想到的。任何其他工具也可以。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T13:57:58.687

使用 /pat1/,/pat2/ 范围通常看起来是个好主意，但是一旦您需要添加条件或做其他事情，它就会变得平淡。恕我直言，你最好只使用这样的标志：

```
awk '/arg =>/{f=1} f; /bytes =>/{f=0}' file 
```

因为可以在不完全重写的情况下进行扩展。在这种情况下，只需在您处于范围内时（即设置“f”时）建立一个记录，并在合适的情况下在范围末尾打印它。这将始终打印它：

```
awk '/arg =>/{rec=""; f=1} f{rec = rec $0 ORS} /bytes =>/{ if (f) printf "%s",rec; f=0}' file 
```

并且只有当文本“whatever”出现在记录中时才会打印它：

```
awk '/arg =>/{rec=""; f=1} f{rec = rec $0 ORS} /bytes =>/{ if (f && (rec ~ "whatever")) printf "%s",rec; f=0}' file 
```

并且只有当文本“whatever”没有出现在记录中时才会打印它：

```
awk '/arg =>/{rec=""; f=1} f{rec = rec $0 ORS} /bytes =>/{ if (f && (rec !~ "whatever")) printf "%s",rec; f=0}' file 
```

这是您在下面评论中的脚本（稍微重新格式化）

```
<tcpdump> |
awk '
   /arg =>/ {rec=""; f=1}
   f {rec = rec $0 ORS}
   /bytes =>/ {
      if (rec !~ /menuStructure|session/)
         printf "%s",rec
      f=0
   }
' | sed "s/.*bytes =>.*/\n----------\n/g" | sed "s/arg => //g" 
```

基于此，我认为这个脚本会做你想做的事情：

```
<tcpdump> |
awk '
   /bytes =>/ {
      if (f && (rec !~ /menuStructure|session/))
         print rec "----------"
      f=0
   }
   f {rec = rec $0 ORS}
   sub(/arg =>/,"") {rec=$0; f=1}
' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:27:55.143

```
awk '/arg =>/,/bytes =>/ {s=s?s:NR;if($0~/some/)exit; a[NR]=$0;e=NR;}END{for(i=s;i<=e;i++)print a[i]}' file 
```

如果您的块包含“某些”，则上述 oneliner 将不打印任何内容（根据您的示例）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T13:57:56.700

这是使用 GNU awk 的一种方法：

```
m1='arg =>'
m2='bytes =>'
pattern='some'
awk -v RS="$m1|$m2" -v start="$m1" -v end="$m2" -v pattern="$pattern" \
  'RT == end && $0 !~ pattern { print start $0 end }' < mystream 
```

也就是说，在开始和结束标记处拆分流，然后，当找到结束标记*并且*块不包含`$pattern`时，打印它。

请注意`m1`，`m2`和`pattern`都是正则表达式，因此可以根据您的需要进行调整。`m1`另请注意，如果您的输入块包含或，这将不起作用`m2`。另请参阅下面的 Ed 说明。

# google-visualization - GeoChart Google Chart Tools API 中的颜色城市

> ID：13584236
> 
> 赞同：0
> 
> 时间：2012-11-27T12:27:01.353
> 
> 标签：google-visualization

我可以给城市一种颜色并显示城市的边界，而不是在上面放置标记吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:06:25.507

不，据我所知，这是不可能的。

使用 google geochart，您只能为州、省、国家或大陆等区域着色。无法为特定城市着色。

你问的将是一个很棒的功能，但不幸的是不可用。

# jquery - Rails - 带日期的 best_In_place gem

> ID：13584241
> 
> 赞同：3
> 
> 时间：2012-11-27T12:27:18.390
> 
> 标签：jquery, ruby-on-rails, best-in-place

我正在尝试将 best_in_place gem 与 type => date 一起使用，但我在格式上遇到了一些问题。我的 Rails 日期格式如下：

```
Time::DATE_FORMATS.merge!({:default => '%d %b (%a)'})
Date::DATE_FORMATS.merge!({:default => '%d %b (%a)'}) 
```

在我看来，我有：

```
<%= best_in_place @group, :appearance_time ,:type => :date %> 
```

现在，当页面第一次加载时，日期是 rails 格式，但是当我用 jquery 更改它时，它会回到格式“dd/mm/yy”.. 我尝试像这样更改格式：

```
jQuery ->
   $.extend($.fn.datepicker.defaults, { format: 'dd M D' }); 
```

但它不会改变任何东西..如何设置 jquery 日期格式？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:53:08.987

好的，我想出了以防其他人有同样的问题。

查询：

```
jQuery ->
  $.datepicker.setDefaults({ dateFormat: 'dd M (D)' }); 
```

它需要在您的代码之前调用。

# ruby-on-rails - 急切地加载嵌套的关联、belongs_to 和 has_one 通过

> ID：13584243
> 
> 赞同：2
> 
> 时间：2012-11-27T12:27:28.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的应用程序中，学生在问题集或测验中做题。例如，当学生在问题集上做一个问题时，该问题/用户的两个统计信息会更新 - 一个问题集统计数据和一个问题统计数据。因此我的关系如下

```
class ProblemSetInstance
    has_one :user
    has_many :problem_set_stats
end

class ProblemSetStat
    belongs_to :problem_set
    belongs_to :problem_stat
    has_one    :problem_type, :through => :problem_stat
end

class ProblemStat
    belongs_to :problem_type
    # no has_many problem_set_stats, because I never need to access them from here currently
end 
```

在尝试优化一些数据库查询时，我遇到了一件奇怪的事情。当我显示问题集时，我使用以下查询

```
ps = problem_set_stats.includes(:problem_stat => [:problem_type]) 
```

`ps.first.problem_stat`现在，我可以`ps.first.problem_stat.problem_type`不用执行额外的查询。但是，当我这样做时，`ps.first.problem_type`会进行另一个查询。`.problem_type`有什么方法可以在不将我的所有s更改为 s 的情况下解决此问题`.problem_stat.problem_type`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:19:12.503

在这种情况下，它不急切加载 has_one 关系的原因是因为它被定义为模型上的单独关系。每个关系都是独立的，因此即使它“通过”另一个关系，您仍然需要明确包含它。

```
problem_set_stats.includes({:problem_stat => :problem_type}, :problem_type) 
```

# sql - SQL 使用 listagg() 并按非重复值分组

> ID：13584250
> 
> 赞同：1
> 
> 时间：2012-11-27T12:27:49.317
> 
> 标签：sql, oracle, oracle11g

```
 ID TELNO
---------- --------------------
         1 0123456789
         1 0207983498
         2 0124339848
         2 09348374834
         2 02387694364 
```

我如何查询上表以获得如下输出：

```
 ID TEL_LIST
---------- --------------------
         1 0123456789,0207983498
         2 0124339848,09348374834,09348374834 
```

我知道我可以使用 listagg() 通过对列进行分组来连接 id。例如，

组内的 listagg(id',')（按 id 排序）作为 idList

将返回 1,2。

但是，TELNO 列不能分组，并且值通常是唯一的。如何在无法分组的第二列上进行连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:39:31.390

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!4/aa277/2)**

```
SELECT 
ID, LISTAGG(TELNO, ', ') 
WITHIN GROUP (ORDER BY TELNO) 
AS TEL_LIST
FROM   tbl
GROUP BY ID; 
```

结果：

```
| ID |                             TEL_LIST |
---------------------------------------------
|  1 |               0123456789, 0207983498 |
|  2 | 0124339848, 02387694364, 09348374834 | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T12:55:15.403

我不知道你是否设置了唯一约束`ID,TELNO`。如果没有，我们需要先从表中过滤唯一值，然后应用`LISTAGG`如下所示：

```
 SELECT ID,
       LISTAGG(TELNO, ',') WITHIN GROUP (ORDER BY ID) AS TELNO
  FROM (
       SELECT UNIQUE
              ID,
              TELNO
         FROM tbl
       )
  GROUP BY ID; 
```

**SQLFIDDLE：**[链接](http://sqlfiddle.com/#!4/5a018/3)

如果您查看，`execution place or the trace file`在同一组数据上的成本将相同，`JUSTIN`在上述解决方案中建议查询

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T12:41:41.623

您可以使用 wm_concat() 函数来执行相同的操作。

```
 select id,wm_concat(telno) from my_table group by id; 
```

# javascript - 如何在点击链接时创建 iframe？

> ID：13584252
> 
> 赞同：0
> 
> 时间：2012-11-27T12:27:56.313
> 
> 标签：javascript, jsp

我有一个网页，表格中有几个链接。其中一个链接位于 td 标签内。我想要一种调用 iframe 的方法，一旦用户点击链接就会打开它。当 iframe 弹出时，页面的其余部分将变得无响应，一旦用户离开 iframe，外部页面就会变得响应。表 td 是这样的：

```
<td >
<a href="configuration.xml related jsp action">Set the Iframe up</a>
</td> 
```

iframe 将由另一个 jsp 的内容填充。

**编辑：**我很着急，所以忘了粘贴我尝试过的代码：所以这里是：

```
<td >
<a href="#">Set the Iframe up</a>
<div id="modalMan" style="display:none;">
<div class="modalsub" >
<p class="close"><a href="#"><img src="cbutton.gif" alt="Close"/></a></p>
<iframe id="myFrame" style="display:none;" height="430" width="675" 
src="myJSP.jsp" >
</iframe>
</div>
</div>
</td> 
```

然而，这会产生一个问题，因为关闭图标没有出现并且 div 的一部分

```
 <div id ="modalman">
   <p class>
   <iframe src> 
```

一切都保持隐藏，一个 iframe 以类似的外观打开，但功能都被打乱了，myjsp 的 javascript 内容保持隐藏。

**再次编辑：**非常抱歉，我忘了提及我已经尝试过 onclick 功能，但是由于我的 href 是这样的，所以它会直接在新的浏览器选项卡中打开 jsp，而不是在 iframe 中打开它。

```
 <a href="configuration.xml related jsp action">Set the Iframe up</a> 
```

我怎样才能做到这一点？请提出一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:32:08.920

这是一个非常基本的 JavaScript 函数，可以做到这一点。函数参数是您希望 iFrame 附加到的元素以及您希望它指向的位置。

**HTML**

```
<a href="#" onclick="setIframe(this,'http://www.stackoverflow.co.uk')" >Set the Iframe up</a> 
```

**JavaScript**

```
function setIframe(element,location){
    var theIframe = document.createElement("iframe");
    theIframe.src = location;
   element.appendChild(theIframe);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:31:44.490

您听说过带有属性的[彩盒](http://www.jacklmoore.com/colorbox)`iframe:true`吗？

```
 <p><a class='iframe' href="http://google.com">Outside Webpage (Iframe)</a></p> 
```

示例代码[来自](http://www.jacklmoore.com/colorbox/example1/)

```
 $(document).ready(function(){
            //Examples of how to assign the ColorBox event to elements
            $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:32:11.977

如果您使用[jquery](http://jquery.com/)（并且应该），您可以在`onlick`链接中运行以下内容：

```
$('#foobar').append('<iframe></iframe>') 
```

其中**foobar**是 iframe 的父元素的 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:34:55.813

您也可以尝试使用带有[`fancybox`](http://fancybox.net/)插件的 jQuery

试试这里的示例代码，[http://jsfiddle.net/muthkum/ssWMc/1/](http://jsfiddle.net/muthkum/ssWMc/1/)

这是完整的代码，

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
<script type='text/javascript' src="http://fancybox.net/js/fancybox-1.3.4/jquery.fancybox-1.3.4.js"></script>
<link rel="stylesheet" type="text/css" href="http://fancybox.net/js/fancybox-1.3.4/jquery.fancybox-1.3.4.css">

<script>
$(function(){
    $("a").fancybox();
})
</script>

<a class="various iframe" href="http://www.youtube.com/embed/L9szn1QQfas?autoplay=1">Youtube (iframe)</a>​ 
```

# php - NGINX 导致 index.php 在应用访问列表时被下载

> ID：13584258
> 
> 赞同：2
> 
> 时间：2012-11-27T12:28:06.207
> 
> 标签：php, apache, nginx

我正在尝试限制对某个管理页面的访问。但是，我的 nginx.conf 中有以下配置：

```
server {
    listen   80; ## listen for ipv4; this line is default and implied

    root /var/www;
    server_name asdf;

    location / {
            proxy_pass http://192.168.1.1:88/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
    }
    #location /server/administrator/ {
    #       allow 127.0.0.0/24;
    #       allow my.ip/32;
    #}
} 
```

一切都与这个配置一起工作，请求被传递给我在端口 88 上监听的 apache2。但是，当我从我的访问限制中删除评论时，我的 index.php 正在被下载而不是被处理。也许有人以前见过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:18:59.730

如果您的管理页面位于 192.168.1.1 后端，那么您的位置块需要如下所示

```
location /server/administrator/ {
    proxy_pass http://192.168.1.1:88;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    allow 127.0.0.0/24;
    allow my.ip/32;
    deny all;
} 
```

您想拒绝除允许的两个之外的所有内容，您需要告诉 nginx，将您的请求代理到特定位置的位置

编辑：

如果管理页面在您的 nginx 机器上并且您希望它被执行，您需要运行 fastcgi 或 php-fpm。与 Apache 不同，nginx 自身不提供 php 或其他服务器端脚本，但它可以使用 fastcgi_pass 而不是 proxy_pass 与类似 fastcgi 的后端通信。

查看此内容以了解如何使用 php-fpm 运行 nginx

[http://www.lifelinux.com/how-to-install-nginx-and-php-fpm-on-centos-6-via-yum/](http://www.lifelinux.com/how-to-install-nginx-and-php-fpm-on-centos-6-via-yum/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:41:16.997

您的第一个位置正在传递给 Apache，但第二个位置由不知道 PHP 是什么的 NginX 处理，因此允许您将其作为二进制文件下载。

`server/administrator/index.php`您可以通过检查`X-REAL-IP`NginX 提供的标头来简单地设置访问控制。

```
if ($_SERVER["HTTP_X_REAL_IP"] != 'my IP')
{
    if (false === strpos($_SERVER["HTTP_X_REAL_IP"], '127.0.0.'))
    {
        // 302 redirect to home
        Header("Location: http://yoursite/");
        die("Access denied");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:20:00.293

```
server {
    listen   80;

    location / {
        proxy_pass http://192.168.1.1:88;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;

        location /server/administrator/ {
            allow 127.0.0.0/24;
            allow my.ip/32;
            proxy_pass http://192.168.1.1:88;
        }
    }
} 
```

你忘了`proxy_pass`在你的新位置。

看：

*   [http://nginx.org/r/location](http://nginx.org/r/location)
*   [http://nginx.org/r/proxy_pass](http://nginx.org/r/proxy_pass)

# c# - windows应用程序中如何维护不同形式的用户信息

> ID：13584260
> 
> 赞同：0
> 
> 时间：2012-11-27T12:28:34.397
> 
> 标签：c#, windows

> **可能重复：**
> [如何在 Winforms 应用程序中维护用户登录详细信息？](https://stackoverflow.com/questions/1186450/how-do-i-maintain-user-login-details-in-a-winforms-application)

我的项目服务于多个用户。当用户登录时，我想检索`userid`该用户。该应用程序在几个表单上显示了一些用户详细信息，因此我希望能够将 传递`userid`给该表单而不是检索用户详细信息。

在 ASP.NET 应用程序中，我们可以使用`Session`来存储用户 ID。但是如何使用 Windows.Forms 应用程序实现相同的功能？

# php - 使用 FuelPHP 多次上传到不同的目录

> ID：13584265
> 
> 赞同：0
> 
> 时间：2012-11-27T12:28:45.347
> 
> 标签：php, upload, fuelphp

我试图弄清楚如何处理 FuelPHP 中的多次上传。基本上，关于文档，这是一项简单的任务。

我的问题是：每个 POST 有两个文件，一个 pdf 和一个 jpg。

现在我希望将 jpg 存储在 pdf 之外的另一个目录中。

有没有可能这样做我可能会错过？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:54:33.763

对不起，我很愚蠢：D 我确实错过了文档中的重要说明。所以这就是我解决问题的方法：

```
Upload::process();
if(Upload::is_valid())
{
    $arr = Upload::get_files();
    //var_dump($arr);
    for ($i=0; $i < count($arr); $i++) 
    {
        if($arr[$i]['extension'] == 'pdf')
        {
            Upload::save($i, $catDir);
            $oldModel->catalogueFile = $arr[$i]['name'];
        }
        else if($arr[$i]['extension'] == 'jpg')
        {
            Upload::save($i, $thumbDir);
            $oldModel->catalogueImage = $arr[$i]['name'];
        }
    }
} 
```

# ios - wifi关闭然后再次启用时如何重新连接socket.io iOS客户端？

> ID：13584267
> 
> 赞同：0
> 
> 时间：2012-11-27T12:28:56.317
> 
> 标签：ios, websocket, socket.io

我正在编写一个 iOS 应用程序，它使用 socket.io 向服务器发送消息并从 clent 接收消息，一切正常。但是我有一个问题：当我进入我的应用程序并连接并发送消息时一切正常，然后我按Home键进入系统设置应用程序，选择飞行模式关闭wifi，然后关闭飞行模式并连接wifi ，我回到我的应用程序，但套接字无法重新连接。如果我将其他互联网请求作为下载图片，则始终显示进度对话框。

我不知道我的错误，我要疯了。

我使用[https://github.com/pkyeck/socket.IO-objc](https://github.com/pkyeck/socket.IO-objc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:37:11.420

您是否检测到 wifi 何时打开/关闭？你应该。在这里查看：[Apple 可达性示例](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)。

当您收到断开连接通知时，您可以断开您的套接字。wifi恢复后再次连接。当应用程序进入后台时，您也应该断开连接。

我不会指望套接字会神奇地重新连接。实现所有 socket-io 委托以了解它何时断开连接或出现错误。在这些情况下，更改您的 socket-io 对象、断开连接等。任何有意义的事情。您可能需要一个标志来了解当前的套接字状态（连接、断开连接等）。当您在重新连接 wifi 后重新激活应用程序时，您应该知道该做什么，具体取决于您的状态标志和实际的 socket-io 对象。

# hibernate - java.lang.ClassNotFoundException: javax.persistence.spi.PersistenceProvider

> ID：13584269
> 
> 赞同：4
> 
> 时间：2012-11-27T12:29:10.777
> 
> 标签：hibernate, tomcat

我有一个使用 JPA 和 Hibernate 的应用程序试图将它部署在 Tomcat 7 上。似乎我没有正确包含所有库，因为我收到以下堆栈错误：

```
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/amazontestapplcation] threw exception [java.lang.NoClassDefFoundError: javax/persistence/spi/PersistenceProvider] with root cause
java.lang.ClassNotFoundException: javax.persistence.spi.PersistenceProvider
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1698)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at javax.persistence.spi.PersistenceProviderResolverHolder$PersistenceProviderResolverPerClassLoader$CachingPersistenceProviderResolver.loadResolverClasses(PersistenceProviderResolverHolder.java:150)
    at javax.persistence.spi.PersistenceProviderResolverHolder$PersistenceProviderResolverPerClassLoader$CachingPersistenceProviderResolver.<init>(PersistenceProviderResolverHolder.java:130)
    at javax.persistence.spi.PersistenceProviderResolverHolder$PersistenceProviderResolverPerClassLoader.getPersistenceProviders(PersistenceProviderResolverHolder.java:88)
    at javax.persistence.Persistence.getProviders(Persistence.java:75)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:61)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)
    at com.example.service.EMFService.<clinit>(EMFService.java:8)
    at com.example.service.UserHandler.getAllUsers(UserHandler.java:30)
    at com.example.managedbeans.LoginBean.authenticate(LoginBean.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

你可以看到我的 WEB-INF/lib 文件夹：

![在此处输入图像描述](../Images/2241f3502a1d2ac4875c9ca71709526b.png)

我还将这些 jars 包含在我的构建路径中。谁能告诉我为什么 javax.persistence.spi.PersistenceProvider 没有加载？

编辑：我还包括我的 pom.xml 文件：

```
<dependencies>
        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>1.0.1.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.0.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.0.Final</version>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.18</version>
        </dependency>
    </dependencies> 
```

当我在 Tomcat lib 文件夹中包含所需的 jar 时，我才设法让它工作。但这对我来说不是一个很好的解决方案。我更喜欢仅在当前项目中包含休眠库。

更新：我还包括项目的整个结构

![在此处输入图像描述](../Images/814e22a9d7307f6ad825d86204be5898.png)

更新：嗯，我仍然得到同样的错误。我从 WEB-IN/lib 中删除了所有 jar，并将它们作为依赖项添加到 pom 文件中。我发布了更新的 pom.xml 文件：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>4.1.4.Final</version>
</dependency>
<dependency>
    <groupId>org.hibernate.javax.persistence</groupId>
    <artifactId>hibernate-jpa-2.0-api</artifactId>
    <version>1.0.1.Final</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>4.1.4.Final</version>
</dependency>
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.21</version>
</dependency>
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-jdk14</artifactId>
    <version>1.5.8</version>
</dependency> 
```

我还上传了我的类路径内容的图片： ![在此处输入图像描述](../Images/5510e68aab17c94784a3c6d4e184b0db.png)

谁能告诉我为什么我的应用程序仍然无法加载持久性类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:06:55.100

> 当我在 Tomcat lib 文件夹中包含*所需的 jar*时，我才设法让它工作。但这对我来说不是一个很好的解决方案。我更喜欢仅在当前项目中包含休眠库。

所需的 jar 必须包含在 lib 文件夹中，没有办法（除非您想更改 Tomcat 配置，否则您不应该这样做）。

关于我们对您的问题的评论：您应该考虑设置一个自动构建过程（使用构建的 war 文件），这样您就不必手动复制文件（这肯定会让您的问题变得不必要）。

# java - 为什么我的订阅者无法在 jms 上阅读来自发布者的消息

> ID：13584273
> 
> 赞同：0
> 
> 时间：2012-11-27T12:29:19.330
> 
> 标签：java, jms, message, publish-subscribe

我刚开始使用 JMS 所以我举了一个 [例子](http://oreilly.com/catalog/javmesser/chapter/ch02.html) ，它就像一个魅力！当我在控制台中输入消息时，订阅者收到了消息，但该示例仅基于一个文件，因此我决定将其拆分为发布者文件和订阅者文件，但它不起作用，订阅者不阅读消息！[我从另一个示例](http://docs.oracle.com/javaee/1.4/tutorial/doc/JMS5.html)中插入了一些代码，但仍然没有，我不明白为什么当我的程序编译完美而没有错误时，有人知道为什么它不读取消息吗？

我的 Subscriver.java 文件是：

```
package main;
import java.util.Properties;

import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.MessageConsumer;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.jms.Topic;
import javax.jms.TopicConnection;
import javax.jms.TopicConnectionFactory;
import javax.jms.TopicSession;
import javax.jms.TopicSubscriber;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import com.sun.messaging.Destination;
public class Subscriver1 {
private TopicSession subSession;
private TopicSubscriber subscriver;
private TopicConnection connection;
private String username;
Destination dest;

public Subscriver1(String topicName, String username, String password)
        throws NamingException, JMSException {
    Properties env = new Properties();
    InitialContext jndi = new InitialContext(env);
    TopicConnectionFactory conFactory = (TopicConnectionFactory) jndi
            .lookup("topicConn");
    TopicConnection connection = conFactory.createTopicConnection(username,
            password);
    TopicSession subSession = connection.createTopicSession(false,
            Session.AUTO_ACKNOWLEDGE);
    Topic chatTopic = (Topic) jndi.lookup(topicName);
    TopicSubscriber subscriver = subSession.createSubscriber(chatTopic,
            null, true);
    Destination dest = (Destination) jndi.lookup(topicName);

    set(connection, subSession, subscriver, username, dest);
    connection.start();
}

private void set(TopicConnection connection2, TopicSession subSession2,
        TopicSubscriber subscriver2, String username2, Destination dest2) {
    this.connection = connection2;
    this.subSession = subSession2;
    this.subscriver = subscriver2;
    this.username = username2;
    this.dest = dest2;
}

public void close() throws JMSException {
    connection.close();
}

public void read() throws JMSException {

    while (true) {
        MessageConsumer consumer = subSession.createConsumer(dest);
        ;
        Message m = consumer.receive(1);

        if (m != null) {
            if (m instanceof TextMessage) {
                TextMessage message = (TextMessage) m;
                System.out.println("Reading message: " + message.getText());
            } else {
                break;
            }
        }
    }
}

public void onMessage(Message message) {
    try {
        TextMessage textMessage = (TextMessage) message;
        String text = textMessage.getText();
        System.out.println(text);
    } catch (JMSException jmse) {
        jmse.printStackTrace();
    }
}

public static void main(String[] args) throws NamingException, JMSException {
    Subscriver1 lexoMesazhin = new Subscriver1("kanaliTopic", "user",
            "user");
    lexoMesazhin.read();
    lexoMesazhin.close();
}

} 
```

我的文件 Publisher.java 文件是

```
package main;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Properties;
import javax.jms.JMSException;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.jms.Topic;
import javax.jms.TopicConnection;
import javax.jms.TopicConnectionFactory;
import javax.jms.TopicPublisher;
import javax.jms.TopicSession;
import javax.naming.InitialContext;
 import javax.naming.NamingException;

public class Publisher {
private TopicSession pubSession;
private TopicPublisher publisher;
private TopicConnection connection;
private String username;

public Publisher(String topicName, String username, String password)
        throws NamingException, JMSException {
    Properties env = new Properties();
    InitialContext jndi = new InitialContext(env);
    TopicConnectionFactory conFactory = (TopicConnectionFactory) jndi
            .lookup("topicConn");
    TopicConnection connection = conFactory.createTopicConnection(username,
            password);
    TopicSession pubSession = connection.createTopicSession(false,
            Session.AUTO_ACKNOWLEDGE);
    Topic chatTopic = (Topic) jndi.lookup(topicName);
    TopicPublisher publisher = pubSession.createPublisher(chatTopic);
    set(connection, pubSession, publisher, username);
    connection.start();

}

private void set(TopicConnection connection2, TopicSession pubSession2,
        TopicPublisher publisher2, String username2) {
    this.connection = connection2;
    this.pubSession = pubSession2;
    this.publisher = publisher2;
    this.username = username2;
}

protected void createMesage(String text) throws JMSException {
    TextMessage mesazhi = pubSession.createTextMessage(text);
    mesazhi.setText(username + " >> " + text);
}

public void close() throws JMSException {
    connection.close();
}

public static void main(String[] args) throws NamingException,
        JMSException, IOException {
    Publisher dergonMesazhin = new Publisher("kanaliTopic", "andi", "andi");
    BufferedReader commandLine = new java.io.BufferedReader(
            new InputStreamReader(System.in));
    try {
        while (true) {
            String s = commandLine.readLine();
            if (s.equalsIgnoreCase("exit")) {
                dergonMesazhin.close();
                System.exit(0);
            } else
                dergonMesazhin.createMesage(s);
        }
    } catch (IOException e) {

    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:56:20.550

您忘记发布消息，即您应该添加一个调用方法`publisher.publish(message)`。`createMesage`目前，您只是创建一个 TextMessage 对象而不将其发送到任何地方，所以从技术上讲，这在您的订阅者中不是问题，而是在您的生产者中:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:53:30.307

您的 JNDI 服务器位于何处？您将一个空的 Properties 对象传递给 InitialContext。

```
Properties env = new Properties();
InitialContext jndi = new InitialContext(env); 
```

您应该在属性对象中放置一些合理的值，例如服务器 url 等，具体取决于托管 JNDI 服务的服务器。

也可以尝试省略传递 env 并简单地调用 new InitialContext (); 这将从类路径上的文件中读取正确的属性（应该在 glassfish 中）。

# jquery - 目的 ＃ has no method '_renderItemData' I'm trying to implement an advanced example of jquery.ui.autocomplete widget with categories ( http://jqueryui.com/autocomplete/#categor 问问题 问问题 2012-11-27T12:29:19.607 866 次 This question shows research effort; it is useful and clear 5 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm trying to implement an advanced example of jquery.ui.autocomplete widget with categories ( http://jqueryui.com/autocomplete/#categories ). My code basically looks just like in this example's source code but for some reason, when i'll type something in input field, autosuggest don't work and i'm getting this error in object inspector javascript console: Object # has no method '_renderItemData' Have you any idea what am i possibily doing wrong? The basic example works fine on my website. Thanks in advance. Propel filterBy not work? Im trying test if an username already exists. But always return "username exists": if (!isset($_POST['usuario'])) { /* Parameters not pass */ exit("{'success': false, 'msg': 'No hay parametros.'}"); } /* Search a user with username == $_POST['usuario'] */ $usuarioCohincidente = UsuariosQuery::create() ->filterByNombreusuario($_POST['usuario']) ->find(); if($usuarioCohincidente->isEmpty()){ /* Username is available */ exit("{'success': false, 'msg':'Usuario inexistente.'}"); }else{ /* Username is not available */ exit("{'success': true, 'msg': 'Usuario existente, por favor, seleccione otro nombre para el usuario.'}"); } Any idea ?. jqueryjquery-ui 4 1 回答 1 This answer is useful 9 使用方法_renderItem而不是_renderItemData. 这个例子是错误的。 于 2012-12-04T09:42:38.450 回答 Related 1 android - 构建 android 源代码后加载模拟器 (froyo) 2 monodevelop - 从 Google 服务器下载时出错 3 java - Android 设置启动画面（活动），如 Iphone 第 1 部分 0 pmd - 生成报告时出现 PMD 错误 3 java - 如何为集合的所有字段分配一个公共值？ 1 ios - iOS 在后台任务中生成视频 1 javascript - WebGL 给出一些错误 2 highcharts - highcharts 在 x 轴上为每个点使用用户定义的标签分散 1 秒更新 1 ios - exc_bad_access code=2 address=0x1000003c for sqlite compiledStatement 8 java - 简单的继承但令人困惑 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13584274
> 
> 赞同：5
> 
> 时间：
> 
> 标签：jquery, jquery-ui

I'm trying to implement an advanced example of jquery.ui.autocomplete widget with categories ( [http://jqueryui.com/autocomplete/#categories](http://jqueryui.com/autocomplete/#categories) ). My code basically looks just like in this example's source code but for some reason, when i'll type something in input field, autosuggest don't work and i'm getting this error in object inspector javascript console:

```
Object #<Object> has no method '_renderItemData' 
```

Have you any idea what am i possibily doing wrong? The basic example works fine on my website. Thanks in advance.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T09:42:38.450

使用方法`_renderItem`而不是`_renderItemData`. 这个例子是错误的。

# c# - C# .Net 中的线程安全网格视图更新

> ID：13584276
> 
> 赞同：0
> 
> 时间：2012-11-27T12:29:38.193
> 
> 标签：c#, .net, multithreading, timer

我正在详细解释我的问题。我有一个`dataGridView`Windows 主窗体。我有一个计时器，它在单击 button1 时启动。并在单击 button2 时停止。

现在与此同时，我正在计算一些东西并将其放入`dataGridView`. 这是动态计算。在这个计算中，我使用了一个线程。（我在线程中绝对是新手）。我习惯于`Thread.Sleep(100)` 计算数据。现在我在一个循环中使用 Thread.Sleep 来计算连续事物的数据。我希望保持各自的计算顺序。在循环的每次迭代之后，我使用`dataGridView.Rows.AddRange(DataGridViewRow)`计算的新数据添加新行。

但是我没有按顺序获取 dataGridView 中的数据，而且它也没有正确出现。它有时会被消隐并随机出现。

PS - 每次定时器间隔结束时，我都会清除数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:32:19.370

您只能从 UI 线程访问 UI 控件。

如果您尝试从其他线程访问它们，您会发现未定义的行为。

我建议您从阅读这本免费电子书开始：[Albahari](http://www.albahari.com/threading/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:52:35.280

在尝试更新 datagridview 之前，您需要调用 datagridview.InvokeRequired。如果这是真的，那么调用 Invoke 传入您希望执行的委托以及您想要传递的任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:27:08.180

已解决。实际上，您必须设置`Thread.Sleep`计时器，使其在您`Windows.Forms.Timer`的间隔结束之前完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-15T08:20:00.947

这是设置 Gridview 的线程安全方法。

```
class Program
{
public static List<string> ChoiceExtension = new List<string>();
static void Main()
{
    ChoiceExtension.Add("One");
    ChoiceExtension.Add("Two");
    ChoiceExtension.Add("Three");
    //Set list as gridsource
    InserttoGrid(ChoiceExtension);

}

public static void SetDataSource(object value)
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("Path of Extension");
        foreach (var item in value as List<string>)
        {
            dt.Rows.Add(new object[] { item });

        }
        ExtensionList.DataSource = dt;
    }
public static void InserttoGrid(List<string> List)
    {
        if (ChoiceExtension.Count >0)
        {

            if (this.ExtensionList.InvokeRequired)
            {
               ExtensionList.Invoke(new SetDataSourceDelegate(SetDataSource), new Object[] { List });

            }
            else
            {
                SetDataSource(List);

            }

        }
    }

} 
```

# propel - 推进过滤器不起作用？

> ID：13584277
> 
> 赞同：0
> 
> 时间：2012-11-27T12:29:40.340
> 
> 标签：propel

我正在尝试测试用户名是否已经存在。但总是返回“用户名存在”：

```
 if (!isset($_POST['usuario'])) {
    /* Parameters not pass */
    exit("{'success': false, 'msg': 'No hay parametros.'}");
   }

   /* Search a user with username == $_POST['usuario'] */
   $usuarioCohincidente = UsuariosQuery::create()
                          ->filterByNombreusuario($_POST['usuario'])
                          ->find();

   if($usuarioCohincidente->isEmpty()){
       /* Username is available */
       exit("{'success': false, 'msg':'Usuario inexistente.'}");
   }else{
      /* Username is not available */
      exit("{'success': true, 'msg': 'Usuario existente, por favor, seleccione otro      nombre para el usuario.'}");
   } 
```

任何想法 ？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T11:00:44.290

首先你应该尝试

`$usuarioCohincidente = UsuariosQuery::create() ->filterByNombreusuario($_POST['usuario']) ->findOne();`

不是`find()`因为它不会返回对象而是包含对象的数组。

不要检查我的方法`isEmpty()`，使用`if($usuarioCohincidente == null)`.

总而言之，请包括`var_dump`您的对象，以确保您做的是正确的事情。

# repository-pattern - 存储库模式和数据一致性

> ID：13584285
> 
> 赞同：2
> 
> 时间：2012-11-27T12:30:07.207
> 
> 标签：repository-pattern, ddd-repositories, data-consistency

在我的项目中，我将存储库模式用于业务层。阅读了很多关于存储库模式的信息我还没有找到任何关于如何保持业务对象与数据同步的信息。

假设我已经加载了一些数据，通过映射创建了我的业务对象并将它们保存到存储库。我的存储库实现维护更改跟踪，因此我可以轻松更新底层数据层。

该应用程序是具有多个客户端的 n 层应用程序，并且（可能）在不同的独立服务器上具有多个业务层实例。

**问题：**
如何保持存储库中业务对象与数据库中相应数据之间的数据一致性？

关于何时以及如何更新在存储库中缓存数据在数据库中更改的业务对象是否有任何模式或最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:41:18.810

一次处理一个聚合根 (AR) 时，事情很简单，因为存储库应该在事务（或提交）中包装与该 AR 相关的任何内容。问题是在持久性不支持事务时处理多个 AR 和/ore。

对于这种情况，解决方案有点棘手，因为它涉及对*最终一致性*（也就是事情将是一致的……最终）、消息驱动架构、saga 和幂等性的概念感到满意。

简而言之，更新一个 Ar 会生成一个或多个事件。另一个 AR 订阅这些事件并更新它们的状态以及生成其他事件。基础设施，在这种情况下是消息总线，将确保每个事件**至少发布一次**。事情可能会出错，但消息总线*最终会*传递消息（但不是在同一毫秒内）。

事件处理程序幂等性确保可以重复操作而不改变初始结果，而 saga 管理事件流和可能的命令（作为事件的结果）。

因此，所有涉及的业务对象最终都会同步，但要实现这一点需要一些时间（从 1 毫秒到几分钟和几小时）。

这并不容易和直接，但它并不难，并且在本地和分布式场景中都非常有用。

对于分布式应用程序，您可以使用[NServiceBus](http://nservicebus.com/)

# c# - 在 ASP.NET MVC Web 应用程序中包含预编译的视图

> ID：13584288
> 
> 赞同：4
> 
> 时间：2012-11-27T12:30:17.823
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

在 ASP.NET MVC Web 应用程序中包含预编译的视图

[参考](http://ofps.oreilly.com/titles/9781449320317/ch_ReusableUI.html)

请参阅上面的博客。我正在尝试在 MVC 3 中创建用户控件的类库。参考上面的博客，我已经在其中创建了类库写入视图。但问题是如何在我的消费者应用程序中将该视图注册为部分视图。在 nuget 中找不到 PrecompiledMvc​​Engine。它将在 asp.net MVC 应用程序中注册预编译视图。

给我一个例子怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:43:13.083

基本上你需要注册一个虚拟路径提供者

1.  您必须在 Global.asax Application_Start 处理程序中注册一个 VirtualPathProvider。
2.  您必须使用特殊路径调用 DLL 中的视图，如下所示： `return View("~/foldernameofdlllocation/nameofdll.dll/nameofview.cshtml");`

为了帮助追踪您的视图在 dll 中的位置，请使用反射器或 Telerik 的 JustDecopile（免费）之类的东西。

**这篇博文可能对您有用：**

[http://www.wynia.org/wordpress/2008/12/aspnet-mvc-plugins/](http://www.wynia.org/wordpress/2008/12/aspnet-mvc-plugins/)

**这个问题也可能有用：**

[使用 VirtualPathProvider 从 DLL 加载 ASP.NET MVC 视图](https://stackoverflow.com/questions/236972/using-virtualpathprovider-to-load-asp-net-mvc-views-from-dlls)

**博客文章中的代码示例：**

[http://www.wynia.org/download/aspnetmvc-plugin-poc/POC.MVCPluginDemo.zip](http://www.wynia.org/download/aspnetmvc-plugin-poc/POC.MVCPluginDemo.zip)

# android - JSON Parser 在同一页面中显示来自服务器的所有内容 将其分为两页

> ID：13584291
> 
> 赞同：1
> 
> 时间：2012-11-27T12:30:23.143
> 
> 标签：android

我正在使用 JSON Parser 来解析来自服务器的响应，我只需要在一个 Activity 中显示几页，在下一个 Activity 中显示更多页面。在我使用的代码中，它只在一个页面中显示所有内容，当我点击它时，它在下一个活动中显示相同的内容。我如何划分以使其出现在下一个活动中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:14:39.023

有两种方法可以解决这个问题..

1）您可以从内容字符串中获取多个字符并将其显示在您的列表中（并在下一个活动中传递整个字符串）。2）更好的是，在 R.layout.list_item 中指定内容 textview 应具有的行数（如 android:lines=2 或其他内容）。其余内容将被剪切。您还可以使用 android:ellipsize 在它被截断的地方添加一个省略号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:57:32.913

1）使用Intents传递字符串的服务器信息实习生

2）创建一个类来存储信息，使用get set获取字符串形式的信息

# mysql - 根据单元格值更新 MySql 表格

> ID：13584293
> 
> 赞同：0
> 
> 时间：2012-11-27T12:30:26.080
> 
> 标签：mysql

我在下面有一个包含各种列的表格。我想根据其他字段的值更新某些字段中的值。

我的桌子在这里

```
DROP TABLE IF EXISTS my_table; 
CREATE TABLE my_table
(id INT NOT NULL AUTO_INCREMENT UNIQUE,
Shot VARCHAR(4),
lay VARCHAR(15) NOT NULL,
lay_avaibility VARCHAR(15) NOT NULL,
blk VARCHAR(10) NOT NULL,
blk_avaibility VARCHAR(15) NOT NULL,
pri VARCHAR(10) NOT NULL,
pri_avaibility VARCHAR(15) NOT NULL,
ani VARCHAR(10) NOT NULL,
ani_avaibility VARCHAR(15) NOT NULL,
status VARCHAR(5)
);

INSERT INTO my_table VALUES
(1,'SH01','1863','Offline','1863','Offline','P4645','Offline','P4557','Offline','Over'),
(2,'SH02','1863','Offline','P4645','Offline','P4557','Offline','1863','Offline','Over')
(3,'SH03','P4645','Offline','P4557','Offline','1863','Offline','1863','Offline','WIP'),
(4,'SH04','1863','Offline','P4645','Offline','P4557','Offline','1863','Offline','RTK'),
(5,'SH05','1863','Offline','1863','Offline','P4645','Offline','P4557','Offline','WIP'),
(6,'SH06','P4557','Offline','P4645','Offline','P4645','Offline','P4557','Offline','WIP');

SELECT * FROM my_table;

+----+------+-------+----------------+-------+----------------+-------+----------------+-------+----------------+--------+
| id | Shot | lay   | lay_avaibility | blk   | blk_avaibility | pri   | pri_avaibility | ani   | ani_avaibility | status |
+----+------+-------+----------------+-------+----------------+-------+----------------+-------+----------------+--------+
|  1 | SH01 | 1863  | Offline        | 1863  | Offline        | P4645 | Offline        | P4557 | Offline        | Over   |
|  2 | SH02 | 1863  | Offline        | P4645 | Offline        | P4557 | Offline        | 1863  | Offline        | Over   |
|  3 | SH03 | P4645 | Offline        | P4557 | Offline        | 1863  | Offline        | 1863  | Offline        | WIP    |
|  4 | SH04 | 1863  | Offline        | P4645 | Offline        | P4557 | Offline        | 1863  | Offline        | RTK    |
|  5 | SH05 | 1863  | Offline        | 1863  | Offline        | P4645 | Offline        | P4557 | Offline        | WIP    |
|  6 | SH06 | P4557 | Offline        | P4645 | Offline        | P4645 | Offline        | P4557 | Offline        | WIP    |
+----+------+-------+----------------+-------+----------------+-------+----------------+-------+----------------+--------+
6 rows in set (0.00 sec)

SELECT VERSION();

+-----------+
| VERSION() |
+-----------+
| 5.5.23    |
+-----------+
1 row in set (0.02 sec) 
```

我想将所有lay_avaibility、blk_avaibility、pri_avaibility、ani_avaibility 列更新为“在线”，其中lay、pri、blk、ani 列具有“1863”，即最终表应如下所示

```
+----+------+-------+----------------+-------+----------------+-------+----------------+-------+----------------+--------+
| id | Shot | lay   | lay_avaibility | blk   | blk_avaibility | pri   | pri_avaibility | ani   | ani_avaibility | status |
+----+------+-------+----------------+-------+----------------+-------+----------------+-------+----------------+--------+
|  1 | SH01 | 1863  | Online         | 1863  | Online         | P4645 | Offline        | P4557 | Offline        | Over   |
|  2 | SH02 | 1863  | Online         | P4645 | Offline        | P4557 | Offline        | 1863  | Online         | Over   |
|  3 | SH03 | P4645 | Offline        | P4557 | Offline        | 1863  | Online         | 1863  | Online         | WIP    |
|  4 | SH04 | 1863  | Online         | P4645 | Offline        | P4557 | Offline        | 1863  | Online         | RTK    |
|  5 | SH05 | 1863  | Online         | 1863  | Online         | P4645 | Offline        | P4557 | Offline        | WIP    |
|  6 | SH06 | P4557 | Offline        | P4645 | Offline        | P4645 | Offline        | P4557 | Offline        | WIP    |
+----+------+-------+----------------+-------+----------------+-------+----------------+-------+----------------+--------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:35:29.817

您应该能够将这样的 CASE 语句与 Update 命令一起使用：

```
UPDATE my_table 
    SET lay_availability = CASE WHEN lay = '1863' THEN 'Online' ELSE lay_availability END,
    blk_availability = CASE WHEN blk = '1863' THEN 'Online' ELSE blk_availability END,
    pri_availability = CASE WHEN pri = '1863' THEN 'Online' ELSE pri_availability END,
    ani_avaibility   = CASE WHEN ani = '1863' THEN 'Online' ELSE ani_avaibility END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:38:49.250

```
update my_table
set lay_avaibility = 'online',
blk_avaibility = 'online',
pri_avaibility = 'online',
ani_avaibility = 'online'
where (lay = 1863 or
blk = 1863 or 
ani =1863); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:43:26.877

试试这个

```
 UPDATE my_table 
SET lay_availability = CASE WHEN lay = '1863' THEN 'Online' ELSE 'Offline' END,
blk_availability = CASE WHEN blk = '1863' THEN 'Online' ELSE 'Offline' END,
pri_availability = CASE WHEN pri = '1863' THEN 'Online' ELSE 'Offline' END,
ani_avaibility   = CASE WHEN ani = '1863' THEN 'Online' ELSE 'Offline' END; 
```

# git - git downloading the live to the local

> ID：13584296
> 
> 赞同：0
> 
> 时间：2012-11-27T12:30:40.280
> 
> 标签：git, github

Having a bit of bother with the following

I am working in a directory such like

> cd ~/RepoPlugin

I have edited a file and when I try push it to github it comes back

> rejected master -> master (non-fast-forward)

So I tried the following inside my RepoPlugin directory

> git pull

This did not update my local files

So I resorted to editing my file on the github website. But I can't seem to sync things up anymore.

I don't want to fork anything, I just want to download what changes has been made on the website to the local directory.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:32:50.447

更准确地指定你想要拉的东西，我已经发生过几次这种情况，并且每次都简单地说明起源和主作品，当`git pull`失败时。

`git pull origin master`

# regex - ANT remove blank spaces regexp

> ID：13584298
> 
> 赞同：3
> 
> 时间：2012-11-27T12:30:47.063
> 
> 标签：regex, ant, spaces, ant-contrib

I want to get the .doc file name and save it in the next property (`pdf.name`). Using regexp I want to remove all the blank spaces in the .doc file name and transform it from this:

```
NAME FILE.doc 
```

To this:

```
NAMEFILE.pdf 
```

This is my code:

```
<propertyregex override="yes" property="pdf.name" input="@{remoteDocToPdf}" 
     regexp="\.*([[^/]+$^\.]*)\.doc" select="\1.pdf" casesensitive="true" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:46:10.687

您可以考虑使用 Ant[资源](http://ant.apache.org/manual/Types/resources.html)来执行此操作。这可能接近您的需要：

```
<loadresource property="pdf.name">
    <string value="${remoteDocToPdf}" />
    <filterchain>
        <deletecharacters chars=" " />
        <replaceregex pattern=".doc$" replace=".pdf" />
    </filterchain>
</loadresource> 
```

这项工作由包含两个过滤器的过滤器[链](http://ant.apache.org/manual/Types/filterchain.html)完成：一个用于删除空格，另一个用于更改文件扩展名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:36:20.013

如果`@{remoteDocToPdf}`仅带有文件名而不是绝对路径，则可以通过在您发布的指令之后添加此指令来删除文件名中的空格：

```
<propertyregex override="yes" property="pdf.name" input="${pdf.name}"
    regexp=" " replace="" global="true" /> 
```

不可能一次性删除空格并进行`.doc`->`.pdf`转换，因为您只能指定`select`或`replace`per `<propertyregex...`。

**编辑 1：**我错过了添加`global="true"`到上面的内容，所以只有第一个空格会被替换（至少根据[文档）。](http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html)

**编辑 2：**关于`<propertyregex...`您发布的注释 - 我很确定正则表达式`\.*([[^/]+$^\.]*)\.doc`并不是您真正想要的，即使它似乎按预期工作。从您的评论中，我猜您想要做的就是替换`.doc`为`.pdf`. 在这种情况下，请改用这个：

```
<propertyregex override="yes" property="pdf.name" input="@{remoteDocToPdf}" 
    regexp="\.doc$" replace=".pdf" /> 
```

如果您想阅读正则表达式，我可以推荐阅读[本教程](http://www.regular-expressions.info/)。

# python - Generate nested dictionary with list and dict comprehensions

> ID：13584299
> 
> 赞同：0
> 
> 时间：2012-11-27T12:31:06.117
> 
> 标签：python, dictionary, python-twitter

I'm trying to create a nested dictionary with the following format:

```
{person1:
         {tweet1 that person1 wrote: times that tweet was retweeted},
         {tweet2 that person1 wrote: times that tweet was retweeted},
 person2:
         {tweet1 that person2 wrote: times that tweet was retweeted},...
 } 
```

I'm trying to create it from the following data structures. The following are truncated versions of the real ones.

```
 rt_sources =[u'SaleskyKATU', u'johnfaye', u'@anisabartes']
 retweets = [[], 
  [u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT',u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT', u'Stay safe #nyc #sandy http://t.co/TisObxxT'], []]
 annotated_retweets = {u'Stay safe #nyc #sandy http://t.co/TisObxxT':26}
 ''' 
     Key is a tweet from set(retweets) 
     Value is how frequency of each key in retweets
 '''

 for_Nick = {person:dict(tweet_record,[annotated_tweets[tr] for tr in tweet_record]) 
                                    for person,tweet_record in zip(rt_sources,retweets)} 
```

Neither [this SO question](https://stackoverflow.com/questions/8929424/combined-list-and-dict-comprehension) nor [this one](https://stackoverflow.com/questions/9239130/creating-a-nested-dictionary-comprehension-in-python-2-7?rq=1) seem to apply.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:12:46.527

似乎“人”和“推文”将成为具有自己的*数据*和*功能的**对象*。您可以通过将事物包装在一个类中来逻辑地关联这个想法。例如：

 **```
class tweet(object):
    def __init__(self, text):
        self.text = text
        self.retweets = 0
    def retweet(self):
        self.retweets += 1
    def __repr__(self):
        return "(%i)" % (self.retweets)
    def __hash__(self):
        return hash(self.text)

class person(object):
    def __init__(self, name):
        self.name = name
        self.tweets = dict()

    def __repr__(self):
        return "%s : %s" % (self.name, self.tweets)

    def new_tweet(self, text):
        self.tweets[text] = tweet(text)

    def retweet(self, text):
        self.tweets[text].retweet()

M = person("mac389")
M.new_tweet('foo')
M.new_tweet('bar')
M.retweet('foo')
M.retweet('foo')

print M 
```

会给：

```
mac389 : {'foo': (2), 'bar': (0)} 
```

这里的优势是双重的。一是与人或推文相关的新数据以明显且*合乎逻辑*的方式添加。第二个是您创建了一个不错的用户界面（即使您是唯一使用它的人！），从长远来看，这将使生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:58:31.727

**Guido 说，**显式优于隐式****

 **```
for_Nick = {}
for person,tweets in zip(rt_sources,retweets):
     if person not in for_Nick:
          for_Nick[person] = {}
          for tweet in list(set(tweets)):
               frequency = annotated_retweets[tweet]
               for_Nick[person][tweet] = frequency
     else: #Somehow person already in dictionary <-- Shouldn't happen
         for tweet in tweets:
             if tweet in for_Nick[person]:
                  current_frequency = for_Nick[person][tweet]
                  incoming_frequency = annotated_retweets[tweet]
                  for_Nick[person][tweet] = current_frequency + incoming_frequency
             else: #Person is already there but he said something new
                frequency = annotated_retweets[tweet]
                for_Nick[person][tweet] = frequency 
```

也许还有更优雅的形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T21:02:59.077

这可能是您试图构建的 dict 理解：

```
for_Nick = {person: 
               {tr: annotated_retweets[tr]
                for tr in set(tweet_record)} 
            for person, tweet_record in zip(rt_sources,retweets)} 
```

您尝试将键列表和值列表传递给`dict`构造函数，而构造函数需要键值对列表（或其他可迭代）。****

# vhdl - VHDL上的反转位顺序

> ID：13584307
> 
> 赞同：19
> 
> 时间：2012-11-27T12:31:34.253
> 
> 标签：vhdl

我在做类似的事情时遇到了麻烦

```
b(0 to 7) <= a(7 downto 0) 
```

当我用 ghdl 编译它时，我有一个顺序错误。我发现让我的电路工作的唯一方法是：

```
library ieee;
use ieee.std_logic_1164.all;
entity reverser is
    port(
        a: in std_logic_vector(7 downto 0);
        y: out std_logic_vector(7 downto 0);
        rev: in std_logic
        );
end reverser;

architecture rtl of reverser is
    signal b: std_logic_vector (7 downto 0);

begin

    b(7) <= a(0);
    b(6) <= a(1);
    b(5) <= a(2);
    b(4) <= a(3);
    b(3) <= a(4);
    b(2) <= a(5);
    b(1) <= a(6);
    b(0) <= a(7);

    y <= b when rev = '1' else a;

end rtl; 
```

建议？提前致谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-27T13:05:21.013

这是不允许的——VHDL 的类型非常强，如果你想反转位顺序，你必须明确地这样做。

标准解决方案是使用一个函数（我没有写这个 -[乔纳森布罗姆利做了](https://groups.google.com/d/msg/comp.lang.vhdl/eBZQXrw2Ngk/4H7oL8hdHMcJ)）：

```
function reverse_any_vector (a: in std_logic_vector)
return std_logic_vector is
  variable result: std_logic_vector(a'RANGE);
  alias aa: std_logic_vector(a'REVERSE_RANGE) is a;
begin
  for i in aa'RANGE loop
    result(i) := aa(i);
  end loop;
  return result;
end; -- function reverse_any_vector 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-05T20:42:50.443

这个问题有几种解决方案。一种可能性如下：

```
gen: for i in 0 to 7 generate
  y(i) <= a(i) when rev='0' else a(7-i);
end generate; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-04T01:32:06.610

问题问具体如何处理`b(0 to 7) <= a(7 down 0)`。我不知道原因，但有时这个赋值对我有用（不管切片如何，从左到右赋值），有时这个赋值会引发编译器错误（切片不匹配或其他东西）。

幸运的是，您不需要使用函数来处理不匹配的切片。如果您遇到此特定问题的编译器错误，您可以使用`generate`循环将 a 分配给 b。

```
for i in a'range generate
   b(i) <= a(i)  
   --when i is 0, you assign a's right-most bit to b's left-most bit
end generate; 
```

它基本上与您的示例中的展开分配相同，只是紧凑且可扩展。

当我在作业右侧的切片不匹配时，我也使用了这种模式。例如：

```
signal a : std_logic_vector(0 to 7);
signal b : std_logic_vector(7 downto 0);
signal c : std_logic_vector(0 to 7);

...

for i in a'range generate
   c(i) <= a(i) xor b(i);
end generate; 
```

这相当于：

```
c(0) <= a(0) xor b(0);
c(1) <= a(1) xor b(1);
c(2) <= a(2) xor b(2);
c(3) <= a(3) xor b(3);
c(4) <= a(4) xor b(4);
c(5) <= a(5) xor b(5);
c(6) <= a(6) xor b(6);
c(7) <= a(7) xor b(7); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-18T11:07:07.183

真正反转：

```
for i in 0 to intermediate_data'left loop

  inverted_vector(i) <= intermediate_data(intermediate_data'left - i);

end loop; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-15T09:39:50.997

> 建议？

因为您的示例指定了固定长度：

```
architecture rtl of reverser is 
    -- signal b: std_logic_vector (7 downto 0);

begin

    -- b(7) <= a(0);
    -- b(6) <= a(1);
    -- b(5) <= a(2);
    -- b(4) <= a(3);
    -- b(3) <= a(4);
    -- b(2) <= a(5);
    -- b(1) <= a(6);
    -- b(0) <= a(7);

    -- y <= b when rev = '1' else a;

    y <= a(0)&a(1)&a(2)&a(3)&a(4)&a(5)&a(6)&a(7) when rev = '1' else a;

end rtl; 
```

理论上，这应该比函数调用或循环语句的开销更少。

* * *

## 回答 #6

> 赞同：-8
> 
> 时间：2014-06-14T05:18:53.663

OUT_PUT(7 DOWNTO 0) <= IN_PUT(0 DOWNTO 7)

# c++ - 为什么 c++ 中没有针对重复的 protobuf 字段的 Set 方法？

> ID：13584308
> 
> 赞同：2
> 
> 时间：2012-11-27T12:31:35.790
> 
> 标签：c++, protocol-buffers

我正在使用以下`.proto`文件：

```
message Header
{
    enum MessageType
    {
        UNKNOWN = 0;
        CONNECT = 1;
        DISCONNECT = 2;
        UPDATE = 3;
        REQUEST = 4;
        SUBSCRIBE = 5;
        UNSUBSCRIBE = 6;
    }
    required MessageType msgType = 1;
}

message DataSet
{
    optional string id = 1;
    optional string value = 2;
}

message StdMessage
{
    required Header header = 1;
    repeated DataSet dataSet = 2;
} 
```

这是编译后的 StdMessage 类：

```
class StdMessage : public ::google::protobuf::Message {
 public:
  StdMessage();
  virtual ~StdMessage();

  StdMessage(const StdMessage& from);

  inline StdMessage& operator=(const StdMessage& from) {
    CopyFrom(from);
    return *this;
  }

  inline const ::google::protobuf::UnknownFieldSet& unknown_fields() const {
    return _unknown_fields_;
  }

  inline ::google::protobuf::UnknownFieldSet* mutable_unknown_fields() {
    return &_unknown_fields_;
  }

  static const ::google::protobuf::Descriptor* descriptor();
  static const StdMessage& default_instance();

  void Swap(StdMessage* other);

  // implements Message ----------------------------------------------

  StdMessage* New() const;
  void CopyFrom(const ::google::protobuf::Message& from);
  void MergeFrom(const ::google::protobuf::Message& from);
  void CopyFrom(const StdMessage& from);
  void MergeFrom(const StdMessage& from);
  void Clear();
  bool IsInitialized() const;

  int ByteSize() const;
  bool MergePartialFromCodedStream(
      ::google::protobuf::io::CodedInputStream* input);
  void SerializeWithCachedSizes(
      ::google::protobuf::io::CodedOutputStream* output) const;
  ::google::protobuf::uint8* SerializeWithCachedSizesToArray(::google::protobuf::uint8* output) const;
  int GetCachedSize() const { return _cached_size_; }
  private:
  void SharedCtor();
  void SharedDtor();
  void SetCachedSize(int size) const;
  public:

  ::google::protobuf::Metadata GetMetadata() const;

  // nested types ----------------------------------------------------

  // accessors -------------------------------------------------------

  // required .Header header = 1;
  inline bool has_header() const;
  inline void clear_header();
  static const int kHeaderFieldNumber = 1;
  inline const ::Header& header() const;
  inline ::Header* mutable_header();
  inline ::Header* release_header();

  // repeated .DataSet dataSet = 2;
  inline int dataset_size() const;
  inline void clear_dataset();
  static const int kDataSetFieldNumber = 2;
  inline const ::DataSet& dataset(int index) const;
  inline ::DataSet* mutable_dataset(int index);
  inline ::DataSet* add_dataset();
  inline const ::google::protobuf::RepeatedPtrField< ::DataSet >&
      dataset() const;
  inline ::google::protobuf::RepeatedPtrField< ::DataSet >*
      mutable_dataset();

  // @@protoc_insertion_point(class_scope:StdMessage)
 private:
  inline void set_has_header();
  inline void clear_has_header();

  ::google::protobuf::UnknownFieldSet _unknown_fields_;

  ::Header* header_;
  ::google::protobuf::RepeatedPtrField< ::DataSet > dataset_;

  mutable int _cached_size_;
  ::google::protobuf::uint32 _has_bits_[(2 + 31) / 32];

  friend void  protobuf_AddDesc_xplane_2eproto();
  friend void protobuf_AssignDesc_xplane_2eproto();
  friend void protobuf_ShutdownFile_xplane_2eproto();

  void InitAsDefaultInstance();
  static StdMessage* default_instance_;
};
// ------------------------------------------------------------------- 
```

在编译/生成的cpp文件中，类中没有`set_header`或类似的功能`StdMessage`。我的问题是，如何设置标题`StdMessage`？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T12:55:55.410

使用 mutable_header() 方法获取指向已创建的 Header 实例的指针。

# objective-c - animation working in iOS6, buggy in iOS5

> ID：13584313
> 
> 赞同：3
> 
> 时间：2012-11-27T12:31:58.643
> 
> 标签：objective-c, ios, ios5, animation, ios6

I have been trying to get to the bottom of this, and it escapes me. I have some buttons I want to ide when the user presses them. But instead of just hiding them, I want an animation. I am making them grow in size, before shrinking to a pinhead whilst also fading out.

I actually have this working as I desire in iOS6, but thought I would run it in a simulator for iOS5.1 and on my iPad1\. Both of which make the button animation buggy. It grows, but then seems to explode into another dimension on the screen.

```
#pragma mark - animations
-(void)grow:(UIButton *)button {

    void (^makeItGrow)(void)= ^{
        button.transform = CGAffineTransformScale(button.transform,1.6, 1.6);
    };

    void (^whenFinished)(BOOL) =
    ^(BOOL finished) {
        if (finished) {
            [self shrink:button];
        }
    };

    [UIView animateWithDuration:1 animations:makeItGrow completion:whenFinished];

}

-(void)shrink:(UIButton *)button {
    void (^makeItShrink)(void)= ^{

        button.transform = CGAffineTransformScale(button.transform, 0.0, 0.0);
        button.alpha = 0.0;
    };

    void (^whenFinished)(BOOL) =
    ^(BOOL finished) {
        if (finished) {
            //NSLog(@"shrink finished");
            [button setHidden:YES];
            [self resetButton:button];
        }
    };

    [UIView animateWithDuration:3 animations:makeItShrink completion:whenFinished];
} 
```

I have slowed the animation down just so I could see it clearer. The first section does as it should, but the second section (the shrink) either splinters into the screen (you have to see it, it's does look kinda cool), or it simply continues to grow OUT of the screen! Certainly not what's desired.

And yes, I am still very much learning, I could probably take some pointers on my coding style :-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T14:40:28.400

尝试设置非常低但不等于零比例因子。

```
button.transform = CGAffineTransformScale(button.transform, 0.0001, 0.0001); 
```

# python - 在翻译文本中自动同步降价（ProGit 书籍，可用资源）

> ID：13584317
> 
> 赞同：3
> 
> 时间：2012-11-27T12:32:10.933
> 
> 标签：python, python-3.x

**摘要：**将已翻译内容中列出的子字符串包装为反引号的有效方法是什么？

**动机：**我正在将翻译文本中的*降价*标记与原文同步。我确实将 Scott Chacon 的 ProGit 书很好地翻译成捷克语。不幸的是，它是使用与原始工具链完全不同的工具链进行排版的，并且原始标记已丢失。到目前为止，我已经成功地将大部分内容转换回*markdown*，并将文档结构与原始结构同步。下一步是修复`code`在翻译中使用反引号的问题。

**情况**

说，我从原文中有以下段落。实际上，如果重要的话，这是一条没有换行符的长线：

```
 On Windows systems, Git looks for the `.gitconfig` file in the 
    `$HOME` directory (`C:\Documents and Settings\$USER` for most 
    people). It also still looks for /etc/gitconfig, although it’s 
    relative to the MSys root, which is wherever you decide to 
    install Git on your Windows system when you run the installer. 
```

我也有翻译的段落：

```
 Ve Windows používá Git soubor .gitconfig, který je umístěný v 
    domovském adresáři (u většiny uživatelů C:\Documents and 
    Settings\$USER). Dále se pokusí vyhledat ještě soubor 
    /etc/gitconfig, který je relativní vůči kořenovému adresáři. 
    Ten je umístěn tam, kam jste se rozhodli nainstalovat Git po 
    spuštění instalačního programu. 
```

使用正则表达式，我确实从原始列表中提取了以下列表（这里是`repr()`-- 因此是双反斜杠）：

```
 ['.gitconfig', '$HOME', 'C:\\Documents and Settings\\$USER'] 
```

将翻译内容中列出的子字符串包装为反引号的有效方法是什么？问题还在于某些段落可能重复多次相同的子字符串。我也不能告诉你还会发生什么其他并发症。（[“我的脑袋也很痛！”](http://www.youtube.com/watch?v=M68GeL8PafE)）

**附注：**对于那些对这个问题更感兴趣的人，一切都可以在[https://github.com/pepr/progitCZ](https://github.com/pepr/progitCZ)上找到（刚刚提交 04d1354656276bf1e6ba7305d06c12faca267a19；警告，评论是捷克语）。问题与`util/cz.py`脚本有关。这是第四遍——在`pass4.py`. 目前，我将列表转换为集合，然后调用`str.replace()`每个子字符串。

该`info_aux_cs\pass4backticks.txt`文件显示了自动化过程的比较。显示`info_aux_cs\pass4.txt`“固定”结果，`txtCorrected\RucneUpravovanyVysledekPass2.txt`显示最后手动修改的阶段。

另一个问题是……文档的结构已经同步了。另一方面，还没有检查段落的内容（翻译）是否有新的原文。

**更新——观察到新问题**

自动替换可能不明确。我确实观察到了这种情况`['git clone', 'clone', ...]`。由于`set`是首先创建的，因此`clone`实际上可以更早地包装。这边走

```
some text git `clone` other text 
```

出现在

```
some text `git clone` other text 
```

应该是正确的替换。

我知道这种方法非常具有启发性，实际上不需要非常精确地完成。一旦自动替换的文本将成为手动编辑的来源。这样，部分解决方案可以可视化应该由人眼检查并由人手修复的可疑差异:)

您对如何找到解决该问题的最可靠方法有任何想法吗？以下是我想到的一些启发式方法——即何时可视化潜在问题：

*   原文中的所有子串都应在翻译中找到。否则，翻译在某种程度上是特定的或不是最新的，或者只是被削弱了。翻译可能会更改她的子字符串，但这应该被识别并且以后应该明确禁止检查。
*   子字符串的顺序可能不会保留在目标语言中。无论如何，相同顺序的相同数量的子字符串是替换成功的好兆头。
*   是否应该首先替换最长的子字符串？
*   ...但是较短的替换将在下一步中被替换？
*   是否可以从子字符串构造正则表达式模式，并且使用正则表达式的贪婪性来一次替换所有模式的反引号？

*任何*好主意都非常受欢迎；）

感谢您的时间和经验，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:19:49.140

到目前为止，我发现使用正则表达式的解决方案是最有希望的。如果您找到更好的解决方案，我将很高兴接受您的解决方案:)

首先，这是查找反引号子字符串的正则表达式：

```
rexBackticked = re.compile(r'`(\S.*?\S?)`') 
```

有了原始`enpara`和翻译的`cspara`段落，我可以像这样提取反引号子字符串的列表：

```
enlst = rexBackticked.findall(enpara)
cslst = rexBackticked.findall(cspara) 
```

然后我测试一下捷克段是否应该修改：

```
if set(enlst) != set(cslst) or len(enlst) != len(cslst): 
```

如果是，那么我创建一个子字符串的差异列表，这些子字符串不是但应该在`cspara`（可能写得更好）中反引号：

```
 dlst = enlst[:]   # copy
    for s in cslst:
        if s in dlst:
            dlst.remove(s) 
```

现在我需要构建一个正则表达式对象来识别`dlst`子字符串。我已经定义了以下功能：

```
def buildRex(self, lst):
    '''Build a regular expression mathing substrings from the lst.'''

    # Build a list of escaped unique substrings from the input list.
    # The order is not important now as it must be corrected later.
    lst2 = [re.escape(s) for s in set(lst)]

    # Join the escaped substrings to form the regular expression
    # pattern, build the regular expression, and return it. There could
    # be longer paterns that contain shorter patterns. The longer patterns
    # should be matched first. This way, the lst2 must be reverse sorted
    # by the length of the patterns.
    pat = '|'.join(sorted(lst2, key=len, reverse=True))
    rex = re.compile(pat)
    return rex 
```

现在我可以用它来替换所有不重叠的子字符串`cspara`：

```
 rex = self.buildRex(dlst)
    cspara, n = rex.subn(r'`\g<0>`', cspara) 
```

`n`对未来检查可能很重要的替换数量在哪里。

欢迎任何意见！

# c - 如何打印单个链表中的字符？

> ID：13584321
> 
> 赞同：2
> 
> 时间：2012-11-27T12:32:18.113
> 
> 标签：c

当用户在链接列表中输入单个字符时，程序应该打印出列表，但是当输入字符时我遇到了问题，它不会打印出字符并导致无限循环，但在输入数字时可以完美运行。有任何想法吗？

```
 #include <stdio.h>  
        #include "stdafx.h"
        #include <stdlib.h>
        #include <malloc.h>

        /*Structure containing a Data part & a Link part to the next node in the List  */

        struct Node  
        {  
            int Data;  
            struct Node *Next;  
        }*Head;  

        int count()  
        {  
        /* Counting number of elements in the List*/
          struct Node *cur_ptr;  
          int count=0;  

          cur_ptr=Head;  

          while(cur_ptr != NULL)  
          {  
             cur_ptr=cur_ptr->Next;  
             count++;  
          }  
          return(count);  
        }  

        void addEnd(char input)  
         {  
            struct Node *temp1, *temp2;  

            temp1=(struct Node *)malloc(sizeof(struct Node));  
            temp1->Data=input;  

            // Copying the Head location into another node.  
            temp2=Head;  

            if(Head == NULL)  
            {  
               // If List is empty we create First Node.  
               Head=temp1;  
               Head->Next=NULL;  
            }  
            else  
            {  
               // Traverse down to end of the list.  
               while(temp2->Next != NULL)  
               temp2=temp2->Next;  

               // Append at the end of the list.  
               temp1->Next=NULL;  
               temp2->Next=temp1;  
            }  
         }    

        // Displaying list contents  

        void display()  
        {  
          struct Node *cur_ptr;  

          cur_ptr=Head;  

          if(cur_ptr==NULL)  
          {  
             printf("\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
             printf("\nList is Empty "); 
             printf("\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n\n\n");
          }  
          else  
          {  
              printf("\nElements in the List:\n\n ");  
              //traverse the entire linked list  
              while(cur_ptr!=NULL)  
              {  
                  printf(" \n-> %d ",cur_ptr->Data);  
                  cur_ptr=cur_ptr->Next;  
              }  
              printf("\n");
            }
        }

        int main(int argc, char *argv[])  
        {  
         int i=0;  

         //Set HEAD as NULL  
         Head=NULL;  

         while(1)  
         {  

            printf("\n\n\n\n\n MENU\n");  
            printf("---------------------------------\n");  
            printf(" \n1\. Insert one part of DNA sequence");   
            printf(" \n2\. Print the Elements in the List");   
            printf(" \n\n3\. Exit\n");  
            printf(" \nChoose Option: ");  
            scanf("%d",&i);  

            switch(i)  
            {  
              case 1:  
              {  
                  char dnaChar;  
                  printf(" \nEnter char to be inserted into the List i.e A, T, G, C: ");  
                  scanf("%d",&dnaChar);  
                  addEnd(dnaChar);  
                  display();  
                  break;  
              }     

              case 2:  
              {  
                  display();  
                  break;  
              }  

              case 3:  
              {  
                  struct Node *temp;  

                  while(Head!=NULL)  
                  {  
                      temp = Head->Next;  
                      free(Head);  
                      Head=temp;  
                  }  
                  exit(0); 
                }  

              default:  
              {  
                  printf("\nWrong Option \n\n\n\n");  
              }  
            } 
         } 
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:38:13.877

change `scanf("%d",&dnaChar)` to `scanf("%c",&dnaChar)` since `dnaChar` is a `char` type.

And it will start working for characters

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T12:50:07.467

您的数据类型非常不一致：

```
 struct Node  
    {  
        int Data;  // a "Node's Data is an int
        ... 
```

然后在`main()`：

```
 char dnaChar;   // You say you want a char
              printf(" \nEnter char to be inserted into the List i.e A, T, G, C: ");  
              scanf("%d",&dnaChar);  // then scanf using the int type %d 
```

当您打印列表时：

```
 printf(" \n-> %d ",cur_ptr->Data);  // You're printing int type 
```

所以你有一个问题，不一致。您需要为您的数据类型选择一个字符或一个 int。改变：

```
scanf("%d",&dnaChar); 
```

至

```
scanf("%c",&dnaChar); 
```

将修复无限循环，现在您的数据将显示为 ASCII 值：

```
A => 65
T => 84
G => 71
C => 67 
```

或者您可以将所有内容更改为`char`/ `%c`，您的数据将显示为`A`/ `T`/ `G`/ `C`IMO 更易于阅读。

最后一点：

当您切换到`scanf("%c",&dnaChar);`您的代码时，将以不同的方式中断。`scanf`输入菜单选项时不会使用换行符。所以你需要这样做，否则你会直接跳过 ATGC 条目：

```
printf("\n\n\n\n\n MENU\n");  
printf("---------------------------------\n");  
printf(" \n1\. Insert one part of DNA sequence");   
printf(" \n2\. Print the Elements in the List");   
printf(" \n\n3\. Exit\n");  
printf(" \nChoose Option: ");  
scanf("%d",&i);  
getchar();  // <-- Add this to get rid of newline 
```

# smtp - 通过其他域连接到 Google SMTP

> ID：13584322
> 
> 赞同：0
> 
> 时间：2012-11-27T12:32:21.697
> 
> 标签：smtp, google-apps

我有一个使用 X 域托管的项目，MX 记录指向 Google MX。

该项目将在几周后托管在专用服务器上，但现在我需要从另一个具有不同域的主机连接到 google smpt。我已将 google 应用与域 X 相关联。

我已经测试了从 Y 到 Google 的 smpt 连接，我可以发送电子邮件了。我的问题是，我应该这样做吗？这是我将运行的一个小型通讯模块，每隔 8 分钟发送 3 封电子邮件，在 3、4 周内每周最多发送 400 封电子邮件。

这是否违反了 Google 政策，从不同的域连接到 smpt 域？我已经在 Google Apps 论坛上提出了一个问题，但没有得到答案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:31:41.077

[http://www.google.com/intl/en/policies/terms/](http://www.google.com/intl/en/policies/terms/) 它没有说明最大电子邮件发送量 事实上，其他电子邮件提供商会将邮件从他们的域（例如 hotmail.com）发送到谷歌，反之亦然。您不仅可以每周发送 400 条消息，而且它一直在发生。

# matlab - 无法保存和加载 mat 文件

> ID：13584325
> 
> 赞同：0
> 
> 时间：2012-11-27T12:32:33.420
> 
> 标签：matlab, octave

我正在尝试将大量图像组合成一个 .mat 文件。图像为 512x512，灰度。有 31 个这样的图像。

我做了以下创建matfile并保存它：

```
 fid1 = fopen('C:\Users\...\MATLAB\fileList_IMG.txt','r');
    PATH_IMG = 'C:\Users\...\IMAGES\';
    PATH_MAT = 'C:\Users\...\IMAGES\MATfiles\';
    IMG_DATA = zeros(512, 512, 31);
    while ~feof(fid1)
        folderName = fgetl(fid1);

        for i=1:31
            fileName = sprintf('%s%s\\%s\\%s_%02d.png',PATH_IMG, folderName, folderName, folderName, i);
            tempImg = imread(fileName);
            IMG_DATA(:,:,i) = tempImg(:,:,1);
        end

        save_fileName = sprintf('%s%s', PATH_MAT, folderName);
        save(save_fileName, 'IMG_DATA');
    end 
```

我做了以下加载 matfile 回来：

```
 fileName = 'C:\Users\...\IMAGES\MATfiles\balloon.mat';
     NEWIMG_DATA = load(fileName); 
```

为了便于阅读，可以说这是 new_IMG_DATA。

我注意到价值观不同！它不像值被放大，因为 IMG_DATA 中的 170 和 172 的值对应于 new_IMG_DATA 中的 3709 和 3666。IMG_DATA 和 new_IMG_DATA 都是双精度数据类型。如果我在创建 .mat 文件之前将 IMG_DATA 强制为 uint8，则 new_IMG_DATA 的大多数值都是 255。

以下是 IMG_DATA 保存为 matfile 之前的一些示例：IMG_DATA(400,400,4:10)

答案（:,:,1）= 133

答案（:,:,2）= 141

答案（:,:,3）= 142

答案（:,:,4）= 145

答案（：，：，5）= 156

答案（:,:,6）= 157

答案（:,:,7）= 158

这是加载回来后的 new_IMG_DATA 示例： NEWIMG_DATA.IMG_DATA(400,400,4:10)

答案（:,:,1）= 16366

答案（:,:,2）= 18216

答案（:,:,3）= 19648

答案（:,:,4）= 19578

答案（:,:,5）= 19203

答案（:,:,6）= 18682

答案（:,:,7）= 17123

我希望能够正确保存和加载 .mat 文件。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:32:18.867

答案在上面的评论中。ypnos 指出数据是 16 bpp 而不是我假设的 8 bpp。

# sql-server - 从 1 个 SQL 语句返回丢失的记录与另一个比较

> ID：13584327
> 
> 赞同：0
> 
> 时间：2012-11-27T12:32:35.900
> 
> 标签：sql-server, tsql

*   当我添加一个额外的 JOIN 时，我的 T-SQL 语句 A 返回 1100 行。
*   当我没有额外的 JOIN 时，我的 T-SQL 语句 B 返回 990 行。

除了语句 A 上的额外 JOIN 之外，这两个语句是相同的。

如何只返回两条 T-SQL 语句中不在语句 B 的结果集中的 110 条记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:35:42.067

Do you mean [EXCEPT or INTERSECT](http://msdn.microsoft.com/en-us/library/ms188055.aspx)?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T12:36:34.433

Can't be more specific without seeing your query, but this is the general idea:

```
SELECT 
  a.*
FROM 
( 
    --statement A
) a
LEFT OUTER JOIN 
(
    --statement B
) b 
  ON a.pk = b.pk
WHERE b.pk IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:30:37.123

尝试根据您的要求发布相同的查询或类似的查询，然后您将得到正确的答案尝试以下

```
select TBL1.c1.........TBL2.c1 ........... from TBL1 left join TBL2 on TBL1.pkcolumn=TB2.PKcolumn where TBL2.COLUMN is null 
```

# matlab - CUDA 和 MATLAB：MEX 文件在清除时使 MATLAB 崩溃

> ID：13584331
> 
> 赞同：2
> 
> 时间：2012-11-27T12:33:00.183
> 
> 标签：matlab, cuda, mex

我尝试在 MATLAB 中运行一些 CUDA MEX 文件。（CUDA 5.0、Linux x86、MATLAB R2012a）

问题是：当我从 MATLAB 内部卸载函数时，每个使用某种 cudaMalloc/cudaFree 的 MEX 文件都会崩溃。

这是一个非常简单的示例（但这也适用于 NVidia 官方示例）：

```
#include <stdint.h>
#include "mex.h"

static float* d_test = NULL;

void clearMemory(void)
{
    cudaFree(d_test);
}

void cudaTest()
{
    if (d_test == NULL)
    {
        cudaMalloc((void**) &d_test, 10000 * sizeof(float));
    }

    // Do some CUDA computations here...
}

void mexFunction(int nlhs, mxArray *plhs[],
                int nrhs, const mxArray *prhs[])
{
    mexAtExit(clearMemory);
    cudaTest();
} 
```

这就是我编译代码的方式：

```
function CUDA_COMPILE( func_name )

  eval(sprintf('!nvcc -I"%s/extern/include" --cuda "%s.cu" --output-file "%s.cpp"', matlabroot, func_name, func_name));
  mex('-I/usr/local/cuda/include', '-L/usr/local/cuda/lib', '-lcudart', [func_name '.cpp']);

end 
```

代码编译并运行良好，但是一旦我从内存中清除 MEX 函数，MATLAB 就会崩溃，即：

```
clear freeCudaMemory 
```

你知道什么可能导致这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:33:23.590

变更声明：

```
void clearMemory(void) 
```

到：

```
void *clearMemory(void) 
```

# php - 在 CGridView 中启用滚动

> ID：13584332
> 
> 赞同：-1
> 
> 时间：2012-11-27T12:33:04.693
> 
> 标签：php, gridview, yii

是否有任何解决方案可以在 CGridView 中启用滚动？我不想使用 yii 扩展。我只想使用标准 CGridView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:43:42.367

要在 CGridView 中启用滚动，您只需在其周围放置一个 div，然后使用 CSS 设置溢出。您将需要设置高度。

[CSS div 元素 - 如何仅显示水平滚动条？](https://stackoverflow.com/questions/258372/css-div-element-how-to-show-horizontal-scroll-bars-only)

# javascript - jQuery动画令人困惑的行为

> ID：13584333
> 
> 赞同：1
> 
> 时间：2012-11-27T12:33:05.643
> 
> 标签：javascript, jquery, jquery-ui, jquery-animate

诚然，我是 jQuery 的新手，但我知道一点 javascript，我正在尝试用几个动画来为 div 设置动画。

我希望 div 首先移动到页面的中心然后我希望它在到达中心后翻转然后展开。

我遇到的麻烦是使用该`.animate()`方法更改 div 的`top`和`left`属性以使其居中。

* * *

问题是 moveToCenter 函数中的 .animate 方法实际上并没有动画到中心的移动，它只是跳过动画部分（属性更改，但更改不是动画）并继续进行翻转和其余部分。

有人能告诉我为什么会这样/我哪里出错了吗？

以及如何（如果有的话）修复？

* * *

**的HTML**

```
<div id="flip" style="background-color:#ff0000;
               width:200px;
               height:200px;
               position:absolute">

  <h4> printf("Hello World"); </h4>
</div> 
```

**JS**

```
function moveToCenter()
{
    $('#flip').animate({'top':'300','left':'300'});
}

$(document).ready(function() {
    $('#flip').click( function() {

            moveToCenter(); //function that is supposed to moves the div to the center

            $(this).flip({
                    content: 'Scanf()',
                    color: '#00FF00',
                    direction: 'lr',
                    onEnd:  function(){ $('#flip').animate({ 
                    'height' : '400', 'width': '300'
                    }       
                    ,'500','swing');

                    lol(); //Another function that does some other animations
                    }
                });
            });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:36:33.580

如果要在动画完成后翻转，请添加如下回调：

```
function moveToCenter(done){
    $('#flip').animate({'top':'300','left':'300'}, done);
} 
```

该函数将`done`在动画完成时调用该方法。所以现在你只需要传递它：

```
moveToCenter(function() {
    // now the animation is done, move on
    $(this).flip({ //... etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:03:50.213

尝试：

```
function flipElem() {
    $('#flip').flip({
        content: 'Scanf()',
        color: '#00FF00',
        direction: 'lr',
        onEnd: function() {
            $('#flip').animate({
                'height': '400',
                'width': '300'
            }, '500', 'swing');

        }
    });
}

function moveToCenter(elem) {
    $(elem).animate({
        'top': '300',
        'left': '300'
    }, flipElem);
}

$(document).ready(function() {
    $('#flip').click(function() {
        moveToCenter(this);
    });
});​ 
```

移动到中心动画完成后立即注册回调。如果你在它完成之前这样做，它可能会产生奇怪的效果，但仍然很有可能。

小优化：将元素传递给 flipElem 而不是再次使用 $('#flip')，类似于 moveToCenter(this)

# financial - 我在哪里可以找到 Sage 中的费用数据？

> ID：13584334
> 
> 赞同：0
> 
> 时间：2012-11-27T12:33:06.470
> 
> 标签：financial, sage-line-50

我正在通过 v16 ODBC 驱动程序访问 sage 50，我正在努力寻找费用数据。

即我看到了一个出口，其中显示了水费、电话费、工资等，所有这些都从公司/主要银行账户中流出

但是我没有在 audit_journal 表中看到这些数据，据我所知，这是我希望找到的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:54:47.750

您需要使用 AUDIT_HEADER 或 AUDIT_SPLIT 表，例如 SELECT * FROM AUDIT_SPLIT

如果您只想要费用，那么您可能应该为 TYPE ="BP" OR TYPE="PI" 添加 where 子句

审计头是组事务头，审计拆分是名义代码分析。

亚当

# android - 如何在android中使用默认邮件发送html邮件？

> ID：13584335
> 
> 赞同：0
> 
> 时间：2012-11-27T12:33:07.170
> 
> 标签：android

我正在尝试使用 Intent 发送 html 邮件。在作曲家中，它以 html 格式显示，但在收件人端，它显示为普通文本。我必须发送带有超链接的图像和文本。作曲家的屏幕截图是这样的

![在此处输入图像描述](../Images/e014f526df993ce81a32061519532d88.png)

以下是我迄今为止尝试过的，

```
public class Sendingamail extends Activity {
    /** Called when the activity is first created. */
    Button send;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    send=(Button) findViewById(R.id.emailsendbutton);
    send.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                            // TODO Auto-generated method stub

                                  final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
                                  emailIntent.setType("text/html");
                             String html = "<!DOCTYPE html><html><body><a href=\"http://www.google.com\">Visit W3Schools.com!</a>" + "<p>If you set the target attribute to \"_blank\", the link will open in a new browser window/tab.</p></body></html>";
                                  emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Hhhhhhhh");

emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(html));

 Sendingamail.this.startActivity(emailIntent);

                                  });
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:45:04.573

这对我有用：

```
 final Intent shareIntent = new Intent(Intent.ACTION_SENDTO, Uri.parse("mailto:"));
    shareIntent.putExtra(Intent.EXTRA_SUBJECT, "The Subject");
    shareIntent.putExtra(
    Intent.EXTRA_TEXT,
    Html.fromHtml(new StringBuilder()
        .append("<p><b>Some Content</b></p>")
        .append("<small><p>More content</p></small>")
        .toString())
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:06:12.707

几天前我遇到了同样的问题。您在代码中无能为力，因为只有当您使用的邮件客户端能够处理默认电子邮件和 gmail 客户端无法处理的所有 html 和 css 内容时，才会显示 html 内容。因此，您可以使用 java mail api 发送 html 邮件，否则您将不得不寻找支持完整 html 的邮件客户端。请看[这里](http://www.dialogue1.de/en/android_email-clients_overview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:58:15.577

```
String text = "<body><b>" +heading +
                "<br>..............................</b><br><br>" +
                "<b><font color='green'>Posted Date :</font></b><br>"+ postedDate + "<br><br>"
                + "<b><font color='green'>Posted By :</font></b><br>" + postedBy+ "<br><br>"
                + "<b><font color='green'>Description :</font></b><br>"+ desc + "<br><br>" 
                + "<b><font color='green'>Post type :</font></b><br>"
                + postType + "</body>";

                    sendIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
                    sendIntent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(text));
                    startActivity(sendIntent); 
```

# android - 我怎样才能改进我的安卓应用程序？很多延迟绘制到图像视图

> ID：13584336
> 
> 赞同：0
> 
> 时间：2012-11-27T12:33:10.107
> 
> 标签：android, imageview, android-canvas, bitmapimage

我正在开发一个应用程序，当用户触摸屏幕时，它会在图像中绘制一个圆圈，并且用户也可以在屏幕上移动这个圆圈。但是在移动的动作中，我可以看到很多滞后...

用户打开这个画廊的图像，之后，我要做的是：

1）用户触摸屏幕

2）计算屏幕点和图像点之间的对应关系（+100ms）

3）绘图：（+200ms）

```
-create a bitmap with the size of the original image

-create a canvas based on the previous bitmap

-canvas.drawimage, draw the original image

-canvas.drawcircle, draw the circle 
```

4）将结果位图设置为imageview（+100ms）

每次用户移动他的手指，我都会浪费 400 毫秒来完成所有的过程……很多时间

我知道图像的分辨率非常重要，但我使用的是 640x480 的图像......所以它不是一个非常大的图像......我正在三星 Galaxy s2 中测试我的应用程序，所以我在期待更好的结果...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:03:27.373

现在您在每一帧中分配图像，这可能会非常昂贵并且导致 GC 每 5 到 10 次绘制运行一次。对我来说，在 ImageView 中派生和覆盖绘图方法会更好。这样你就可以在调用 super.draw() 之后通过画圆来节省大量的 CPU 工作。像这样的东西：

```
new ImageView(null){
    Paint paint = new Paint();
    int cx,cy,radius = 10;
    public void setPoint(int x,int y){
        cx = x;cy = y;
    }
    public void draw(android.graphics.Canvas canvas) {
        super.draw(canvas);
        canvas.drawCircle(cx, cy, radius, paint);
    };
} 
```

设置图像（一次）和手指位置（触摸事件后）后，只需调用 invalidate()。

# android - 将图像插入 SQL

> ID：13584338
> 
> 赞同：0
> 
> 时间：2012-11-27T12:33:22.423
> 
> 标签：android, sql, database, image

我在 Google 上搜索了一些关于 SQL 数据库的教程。我在将图像插入数据库时​​遇到了一些问题。我尝试了很多方法（例如`setImageBitmap`, `setImageDrawable`, `setImageResource`），但没有一个有效。我已经将一些图像插入到我的`drawable-hdpi`.

这是我的一些插入代码：

```
public void insertIntoTable(){
    try{
        mydb = openOrCreateDatabase(DBNAME, Context.MODE_PRIVATE,null);

        mydb.execSQL("INSERT INTO " + TABLE + "(DNAME, DTAG, DSUMMARY, DINGRE, DSTEP) VALUES('Chicken Cabonara','Chicken','aaa', '3', '5')");
        mydb.execSQL("INSERT INTO " + TABLE + "(DNAME, DTAG, DSUMMARY, DINGRE, DSTEP) VALUES('Seafood Spagetti','Fish','bbb', '5', '3')");
        mydb.execSQL("INSERT INTO " + TABLE + "(DNAME, DTAG, DSUMMARY, DINGRE, DSTEP) VALUES('Tomyam Soup','Soup','ccc', '3', '1')");

       mydb.close();
    }
} 
```

我的数据显示代码：

```
public void showTableValues(){
    try{
        mydb = openOrCreateDatabase(DBNAME, Context.MODE_PRIVATE,null);
        Cursor allrows  = mydb.rawQuery("SELECT * FROM "+  TABLE, null);
        System.out.println("COUNT : " + allrows.getCount());
        Integer cindex = allrows.getColumnIndex("DNAME");
        Integer cindex1 = allrows.getColumnIndex("DTAG");
        Integer cindex2 = allrows.getColumnIndex("DSUMMARY");
        Integer cindex3 = allrows.getColumnIndex("DINGRE");
        Integer cindex4 = allrows.getColumnIndex("DSTEP");

        TextView t = new TextView(this);
        t.setText("========================================");
        Linear.addView(t);

        if(allrows.moveToFirst()){
            do{
                LinearLayout did_row   = new LinearLayout(this);
                LinearLayout dname_row = new LinearLayout(this);
                LinearLayout dtag_row= new LinearLayout(this);          
                LinearLayout dsummary_row= new LinearLayout(this);
                LinearLayout dingre_row= new LinearLayout(this); 
                LinearLayout dstep_row= new LinearLayout(this);

                final TextView did_  = new TextView(this);
                final TextView dname_ = new TextView(this);
                final TextView dtag_ = new TextView(this);
                final TextView dsummary_ = new TextView(this);
                final TextView dingre_ = new TextView(this);
                final TextView dstep_ = new TextView(this);
                final TextView   sep  = new TextView(this);

                String DID = allrows.getString(0);
                String DNAME= allrows.getString(1);
                String DTAG= allrows.getString(2);
                String DSUMMARY= allrows.getString(3);
                String DINGRE= allrows.getString(4);
                String DSTEP= allrows.getString(5);

                System.out.println("DNAME " + allrows.getString(cindex) + " DTAG : "+ allrows.getString(cindex1) + " DSUMMARY : "+ allrows.getString(cindex2) + " DINGRE : "+ allrows.getString(cindex3) + " DSTEP : "+ allrows.getString(cindex4));
                System.out.println("DID : "+ DID  + " || DNAME " + DNAME + "|| DTAG : "+ DTAG + "|| DSUMMARY : "+ DSUMMARY + "|| DINGRE : "+ DINGRE + "|| DSTEP : "+ DSTEP);

                did_.setText("ID : " + DID);
                did_row.addView(did_);
                Linear.addView(did_row);

                dname_.setText("NAME : "+ DNAME);
                dname_row.addView(dname_);
                Linear.addView(dname_row);

                dtag_.setText("TAG : " + DTAG);
                dtag_row.addView(dtag_);
                Linear.addView(dtag_row);

                dsummary_.setText("SUMMARY : "+ DSUMMARY);
                dsummary_row.addView(dsummary_);
                Linear.addView(dsummary_row);

                dingre_.setText("INGREDIENT : " + DINGRE);
                dingre_row.addView(dingre_);
                Linear.addView(dingre_row);

                dstep_.setText("STEP : "+ DSTEP);
                dstep_row.addView(dstep_);
                Linear.addView(dstep_row);

                sep.setText("---------------------------------------------------------------");
                Linear.addView(sep);
            }
            while(allrows.moveToNext());
        }
        mydb.close();
     }
} 
```

有人可以告诉我将图像（png）插入数据库并显示图像的方式吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:58:05.193

您必须将图像作为 blob 数据插入。您可以查看[此](https://stackoverflow.com/questions/4215505/sqlite3-insert-and-read-blob-data-in-database)链接。

也可以参考[Link1](https://stackoverflow.com/questions/9395755/error-while-inserting-blob-data-into-sqlite-on-android)

# google-apps-script - #group 成员中的差异

> ID：13584342
> 
> 赞同：1
> 
> 时间：2012-11-27T12:33:30.967
> 
> 标签：google-apps-script

我已经在 Apps Script 页面中执行了用于列出组成员的代码片段（https://developers.google.com/apps-script/class_group#getUsers）；我只对计算在网页上显示此号码的成员感兴趣。

我有 192 个成员，而同一组的 Google Groups 的网络界面告诉我有 222 个成员。

我是该组的所有者；有几个被禁止的成员，不足以解释差异。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:00:26.920

GroupsApp 服务为与实际 Google 帐户对应的组中的每个成员返回用户对象。不返回没有相应 Google 帐户的电子邮件地址。[您可以在Issue 1157](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1157#c7)中看到对此行为的进一步讨论。

# php - 从任何给定日期计算明天的日期

> ID：13584343
> 
> 赞同：0
> 
> 时间：2012-11-27T12:33:41.590
> 
> 标签：php, date

我想弄清楚如何计算给定日期之后的日期，例如这个日期：

```
$json->date = date("12/24/2012"); 
```

这不起作用：

```
date('tomorrow', strtotime($json->date)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:34:31.733

使用[日期时间](http://us3.php.net/manual/en/book.datetime.php)

```
$datetime = new DateTime('tomorrow');
echo $datetime->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:35:15.903

这应该工作得很好

`$date = strtotime(date("Y-m-d", strtotime("2012-10-25")) . " +1 day");`

# html - 等效于在 struts 中选择多个选项的 select 标签

> ID：13584345
> 
> 赞同：0
> 
> 时间：2012-11-27T12:33:52.990
> 
> 标签：html, select, tags, struts, option

嗨我想知道struts中的等效代码。

```
 <-select->
       <-option value="a"-> a <-/option->
       <-option value="b"-> b <-/option->
       <-option value="c"-> c <-/option->
       <-option value="d"-> d <-/option->
    <-/select-> 
```

我们可以将以上内容在struts中表示为

```
 <-sj:select-><-/sj:select-> 
```

像这样如何表示允许选择“多个”值的以下代码。

```
 <-select multiple="multiple"->
       <-option value="a"-> a <-/option->
       <-option value="b"-> b <-/option->
       <-option value="c"-> c <-/option->
       <-option value="d"-> d <-/option->
    <-/select-> 
```

我试过这个。但是没有用。

```
 <-sj:select multiple="multiple"-><-/sj:select-> 
```

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:39:21.613

标签[记录在案](http://struts.apache.org/2.0.12/docs/select.html)：

> 多个 - 必需：假 - 默认：假 - 评估：假 - 类型：布尔
> 
> 创建多选。如果值通过 value 属性作为 Array 或 Collection（适当类型）传递，则标签将预先选择多个值。如果其中一个键等于 Collection 或 Array 中的值之一，它将被选中

# python - 从 BOM 中发现编码的函数

> ID：13584348
> 
> 赞同：1
> 
> 时间：2012-11-27T12:33:57.253
> 
> 标签：python, character-encoding, byte-order-mark

我想知道 python 库是否具有通过查找 BOM 的存在来返回文件字符编码的函数。

我已经实现了一些东西，但我只是担心我可能会重新发明轮子

**更新：（**基于 John Machin 的更正）：

```
import codecs

def _get_encoding_from_bom(fd):
    first_bytes = fd.read(4)
    fd.seek(0)
    bom_to_encoding = (
        (codecs.BOM_UTF32_LE, 'utf-32'),
        (codecs.BOM_UTF32_BE, 'utf-32'),
        (codecs.BOM_UTF8, 'utf-8-sig'),
        (codecs.BOM_UTF16_LE, 'utf-16'),
        (codecs.BOM_UTF16_BE, 'utf-16'),
        )
    for bom, encoding in bom_to_encoding:
        if first_bytes.startswith(bom):
             return encoding
    return None 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:22:59.503

你的代码有一个你可能永远不会被咬的微妙错误，但最好避免它。

您正在遍历字典的键。Python 不保证迭代的顺序。在这种情况下，顺序确实很重要。

```
codecs.BOM_UTF32_LE is '\xff\xfe\x00\x00'
codecs.BOM_UTF16_LE is '\xff\xfe' 
```

如果您的文件是用 UTF-32LE 编码的，但恰好首先测试了 UTF-16LE，那么您会错误地指出文件是用 UTF-16LE 编码的。

为避免这种情况，您可以遍历按 BOM 长度降序排序的元组。[请参阅我对此问题](https://stackoverflow.com/questions/2456380/utf-8-html-and-css-files-with-bom-and-how-to-remove-the-bom-with-python)的回答中的示例代码。

# perl - 如何跳转迭代器以指向 foreach 循环中列表的任何其他元素？

> ID：13584350
> 
> 赞同：2
> 
> 时间：2012-11-27T12:34:03.493
> 
> 标签：perl

我有一个`foreach`类似的循环

```
foreach my $ref_array (@$array1) 
```

`$array`读取整个 Excel 工作表的结果在哪里。

在我的循环内部`$ref_array`获取工作表中每一行的值。现在我想推进`$ref_array`它以获得电子表格下一行的值。我该如何在循环中间做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T13:29:10.763

`0`从到最后一个数组索引循环`$#$array1`将允许您轻松访问下一行/元素：

```
for my $index ( 0 .. $#$array1 ) {
    my ( $current, $next ) = @$array1[ $index, $index + 1 ];
    # Process the rows
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T13:32:24.537

Perl 5.12.0+ 替代方案：

```
for ( my ( $idx, $row ) = each @$array1 ) {

    last if $idx == $#array1;         # Skip last iteration

    my $next_row = $array1->[$idx+1];
    # ...
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-27T13:03:11.553

两个想法：

首先，如果您总是需要一对连续的行，那么您可以记住前一行，例如

```
my $prev_row;
foreach my $row (@rows) {
  # Skip first row; we don't have a previous one yet
  if (!$prev_row) {
    $prev_row = $row;
    next;
  }

  # Do stuff with $prev_row and $row

  $prev_row = $row;
} 
```

其次，使用正常的 C 风格`for`循环。在这种情况下，你有索引并且可以一直访问任何需要的元素：

```
# don't iterate over the last line so not to access beyond the array
for (my $idx = 0; $idx < (scalar(@rows) - 1); $idx++) {
  my $row      = $rows[$idx];
  my $next_row = $rows[$idx + 1];
} 
```

您不能`foreach`仅通过仅使用当前元素来“简单”地做到这一点。它不是一个交互器，它是对该列表中当前元素的引用。

# javafx-2 - Eclipse Helios 中的 JavaFX：IllegalArgumentException (Css2Bin.java:44)

> ID：13584356
> 
> 赞同：2
> 
> 时间：2012-11-27T12:34:45.227
> 
> 标签：javafx-2

尝试在 eclipse helios 中启动和制作 javafx 2.0 时出现此错误

```
Exception in thread "main" java.lang.IllegalArgumentException: expected file name as argument
at com.sun.javafx.css.parser.Css2Bin.main(Css2Bin.java:44) 
```

最近我正在一步一步地从这个[网站](http://zoranpavlovic.blogspot.com/2012/05/getting-started-with-javafx-in-eclipse.html)
开始在 Eclipse IDE 中使用 JavaFX 2.0 - 我不知道如何修复它，有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-15T01:26:33.803

**好吧，这些答案似乎说明了您需要做什么，但它们并不是很直截了当。**

1.  您右键单击该项目，然后单击属性。
2.  选择运行/调试设置。
3.  单击 Css2Bin。
4.  删除它。

*相信我，我试过了，它奏效了。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:52:43.150

*   将 jfxrt.jar 添加到构建路径
*   转到引用库中的属性 jfxrt.jar
*   转到运行/调试设置>Css2Bin
*   标记复选框：
    *   搜索主类时包含系统库
    *   搜索主类时包括继承的主干

现在要快乐！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-12T13:31:37.600

这个问题来自 Css2Bin 被设置为要运行的应用程序。这意味着 eclipse 尝试将 Css2Bin 作为您的主应用程序运行，并且 Css2Bin 在没有收到任何命令行参数时崩溃。

解决此问题的最简单方法是从运行/调试设置（项目设置）中删除 Css2Bin，并在菜单中选择自己的应用程序的位置添加一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T18:16:53.420

我遇到了同样的问题（在 e(fx)clipse 中）。我尝试了上面提到的解决方案，但仍然遇到同样的问题。我添加了一个新的运行配置并将其直接指向具有 Main 的类，这对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T23:09:28.610

您很容易需要一个扩展应用程序类的主类来启动 Args，如下所示：

```
public class Test extends Application {

    public static void main(String[] args) {

        // Launch the Application 
        launch(args);   

    }

    @Override
    public void start(Stage primaryStage) throws Exception {

        //JavaFx load the GUI from FXML file ... super 
        Parent root = FXMLLoader.load(getClass().getResource("yourGUI.fxml"));
        primaryStage.setTitle("App Name");
        primaryStage.setScene(new Scene(root));
        primaryStage.show();

    } 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T12:10:28.553

如果您不依赖于在 helios 中运行，我建议您尝试一下 e(fx)clipse。您可以在[http://www.efxclipse.org/找到它](http://www.efxclipse.org/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-18T15:41:03.370

假设您已将 jfxrt.jar 添加到参考库中...

现在

右键单击您的项目 -> 属性 -> 运行/调试设置 -> 单击 Css2Bin ->

主类：

点击搜索按钮

**将 com.sun.javafx.css.parser.Css2Bin 更改为您的项目主类**

和

标记复选框

*   搜索主类时包含系统库
*   搜索主类时包括继承的主干

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-05-03T05:26:48.207

我们可以作为 Appllcation 运行来解决问题

# 3d - MediaWiki 中的 3D 对象查看器？

> ID：13584358
> 
> 赞同：6
> 
> 时间：2012-11-27T12:34:46.413
> 
> 标签：3d, webgl, mediawiki, three.js, add-on

我最近发现了 WebGL，尤其是 Three.js，这是迄今为止我找到的最好的 API。现在我只是编写简单的演示来显示我的主要项目中的星际飞船的 3D 模型，这是一个科幻宇宙。

我的中期目标是增强 MediaWiki wiki，使用轨道摄像机对页面中描述的对象进行 3D 显示。我将其视为展示我们正在开发的宇宙内容的工具。

我本身不想做任何花哨或困难的事情，我知道如何使用标准 Wavefront .OBJ 和 .MTL 文件来做到这一点，这对我来说已经足够了。但让我担心的是 wiki 集成。

基本想法是首先将各种文件（模型、材料、纹理）上传为由其扩展程序键入的 wiki 文件，然后让扩展程序添加一个 wikicode 项目或模板以从其 wiki URL 随意使用它们。

如果我们继续使用 .OBJ/.MTL 示例：
- .MTL 将显示为应用在球体上的材质，其中一些对象会四处弹跳以查看镜面效果，并具有可调节的环境/背景以进行对比度，
- .OBJ 将显示为空白应用其材料，还具有可调节的环境/背景。

是否已经有这样的扩展，或者至少有一个可以使用和扩展的框架，还是由我来开发，知道我可能既没有技能也没有时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:59:52.883

你应该看看[Sketchfab](http://sketchfab.com/faq#embed)。这是一个 Web 应用程序，您可以在其中上传模型，它会直接将其显示到 WebGL。在上面的链接中，您将看到它们的嵌入功能。没有 MediaWiki 特殊代码，但如果您愿意，也有一个 API。

NB ：他们作为“免费增值”工作，前 500Mo 是免费的，之后你必须每个月支付一些美元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:28:11.660

如果您只想显示模型，您可能想[看看 x3dom](http://www.x3dom.org/)。不过，我不知道您需要哪些步骤才能将其集成到 mediawiki 中。

另一方面，在 Khronos WebGL Wiki 上，我们使用一些[iframe 插件](http://www.mediawikiwidgets.org/Iframe)让我们将随机的 WebGL 样本放到 wiki 上。

# php - 带有链接变量的php回显字符串

> ID：13584359
> 
> 赞同：0
> 
> 时间：2012-11-27T12:34:48.480
> 
> 标签：php

我知道我会为此受到很多反对，但是，我似乎真的无法让它发挥作用：

我试图使链接简单地转到（说变量是 blahblah） /listen?v=blahblah 但是，我最终得到 /listen?v="blahblah" 或错误。

这是我尝试过的 php 行的片段：

```
echo "<a href='/listen?v=$escapedString'>";

echo "<a href='/listen?v=" . $escapedString . "'>"; 
```

而且我已经尝试将零件分离到单独的行等上，老实说，我不明白为什么要这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:38:04.680

Your both lines are correct, so the quotes must be inside the content of the variable, you can trim them like this:

```
$escapedString = trim($escapedString, '"'); 
```

or just do it for the link:

```
echo "<a href='/listen?v=" . trim($escapedString, '"') . "'>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:36:23.630

You need your file extension. For example, if it's a PHP file...

```
echo "<a href='/listen.php?v=$escapedString'>"; 
```

# php - 使用 MySQL 的 PHP 很慢

> ID：13584360
> 
> 赞同：12
> 
> 时间：2012-11-27T12:34:49.430
> 
> 标签：php, mysql, sql, performance, xampp

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T04:40:59.220

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-28T04:46:08.263

它可能发生在几个地方：1）查询本身，或 2）mysqli 实例的创建（以及生成的数据库连接）。如果我不得不猜测，我怀疑你的问题是（2）。

一种快速而简单的调试方法是使用`microtime()`.

[http://www.php.net/manual/en/function.microtime.php](http://www.php.net/manual/en/function.microtime.php)

例子：

```
$start = microtime(TRUE); // Start counting

$mysqli = new mysqli('localhost', 'root', '', 'testdb');

$temp = microtime(TRUE) - $start;
echo "Time to connect: {$temp}";  // Check elapsed time

$mysqli->set_charset("utf8");
if(mysqli_connect_errno()) {
    echo "Connection Failed: " . mysqli_connect_errno();
    exit();
}

$temp = microtime(TRUE) - $start;
echo "Time to setup: {$temp}";  // Check elapsed time

$testreceive = $_POST['test_id'];
$query = "SELECT First_Name from tblperson";
$result = $mysqli->query($query);

$temp = microtime(TRUE) - $start;
echo "Time to query: {$temp}";  // Check elapsed time

$row = $result->fetch_all(MYSQLI_ASSOC);

$temp = microtime(TRUE) - $start;
echo "Time to fetch {$temp}";  // Check elapsed time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T17:15:24.540

问题是从 localhost 到 127.0.0.1 的 localhost 查找。

解决方案是在@Wap 已回答的情况下将该行添加`127.0.0.1 localhost`到您的 Windows 主机文件中（感谢您的回答！）

或者，如果您无权访问主机文件，您只需在 php mysqli 调用中将 localhost 更改为 127.0.0.1： `$mysqli = new mysqli('127.0.0.1'), 'root', '', 'testdb');`

# mysql - MySQL compare emails and match even if one upper the other lowercase

> ID：13584363
> 
> 赞同：0
> 
> 时间：2012-11-27T12:34:58.950
> 
> 标签：mysql, sql

I try to compare MySQL strings and want to make sure they match even if the one entered is upper case and the one inside my database is lower case. How can I do this "comparison" inside an SQL statement?

Cheers, -lony

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:36:38.257

```
SELECT * FROM yourtable WHERE LOWER(col1)=LOWER(col2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:38:53.500

将机器人字符串更改为`LOWER()`or`UPPER()`然后比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:00:04.733

不要做任何`LOWER()`or `UPPER()`，只需使用不区分大小写的排序规则，您可能已经这样做了。如果你不这样做，我会使用`utf8_unicode_ci`- 排序规则名称中的 ci 代表“不区分大小写”。

# objective-c - Locked up (dealock) in @syncrhonized

> ID：13584365
> 
> 赞同：0
> 
> 时间：2012-11-27T12:35:07.527
> 
> 标签：objective-c, cocoa-touch, core-data, mutex, deadlock

I have this piece of code which is executed from different threads. I cant find wheres the deadlock. Maybe Im not undestanding how @syncronized works

```
@synchronized(self) {
    NSLog(@"%@", self);
    NSLog(@"(%d) Aloha hermano blocked?" ,pthread_mach_thread_np(pthread_self()) );
    genres = [aContext executeFetchRequest:request error:&error];
    if (error != nil) {
        NSLog(@"Obj list fetch error: %@", error);
        exit(-1);
    }
    NSLog(@"(%d) Aloha hermano NO" ,pthread_mach_thread_np(pthread_self()) );
} 
```

Heres the traces when the app gets locked:

```
2012-11-27 13:28:05.141 (15143) Aloha hermano blocked?
2012-11-27 13:28:05.146 (15143) Aloha hermano NO
2012-11-27 13:28:05.152 <STBConnection_0_9: 0xc676000>
2012-11-27 13:28:05.155 (15143) Aloha hermano blocked?
2012-11-27 13:28:05.161 (15143) Aloha hermano NO
2012-11-27 13:28:05.168 <STBConnection_0_9: 0xc676000>
2012-11-27 13:28:05.171 (15143) Aloha hermano blocked?
2012-11-27 13:28:05.178 (15143) Aloha hermano NO
2012-11-27 13:28:05.185 <STBConnection_0_9: 0xc676000>
2012-11-27 13:28:05.191 (1799) Aloha hermano blocked? 
```

As you can see Im syncronizing always on the same object.

Any ideas? Thanks a lot

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:16:19.197

好的，我修复了它，问题是我使用来自不同线程的相同 ManagebObjectContext。在这种情况下，Apple 文档说：

> 如果您在线程之间共享托管对象上下文或持久存储协调器，则必须确保任何方法调用都是从线程安全范围进行的。对于锁定，您应该在托管对象上下文和持久存储协调器上使用 NSLocking 方法，而不是实现自己的互斥锁。这些方法有助于向框架提供有关应用程序意图的上下文信息——也就是说，除了提供互斥体之外，它们还有助于确定操作集群的范围。

因此，固定的代码如下所示：

```
[aContext lock];
genres = [aContext executeFetchRequest:request error:&error];
if (error != nil) {
   NSLog(@"Obj list fetch error: %@", error);
   exit(-1);
}
[aContext unlock]; 
```

# bluetooth - Bluetooth Low energy best energy consumation strategy

> ID：13584367
> 
> 赞同：3
> 
> 时间：2012-11-27T12:35:11.173
> 
> 标签：bluetooth, core-bluetooth, bluetooth-lowenergy

I am going to develop a small device with TI CC2540 inside. It will communicate with iPhone4s. The device is designed to receive commands from iPhone and make specific actions on it. Most of time the device is idle (99% of time). But at any time (in case of iPhone request), it can be able to receive commands from iPhone: 1 command per 20 second with 40bytes max size.

The device should be standalone and work as long as possible.

I see here 2 decisions:

1.  Device - Central, iPhone - Peripheral. The device implements Central GAP role and always scans for advertising packets from iPhone. Then device initializes connection and then iPhone begins to send commands.

2.Device - Peripheral, iPhone - Central. The device always sends advertising packets.

What is the best low energy consumption strategy? How long will it work? What is the best idle strategy for BLE? Can I implement the 1 way with new iOS6 BLE features?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:21:22.890

使您的设备成为外围设备。功耗将在很大程度上取决于您的延迟要求。用户在手机上的操作和设备反应之间的延迟多少是可以接受的？该要求推动了您需要的广告工作周期。

# scala - Scala concatenate for loop results

> ID：13584370
> 
> 赞同：3
> 
> 时间：2012-11-27T12:35:15.680
> 
> 标签：scala, for-loop, concatenation, yield

I'm trying to concatenate 3 sequences as results of individual for loops with yield. I can't get it to work without temporary variables. Does anybody know a better option? The notWorking version gives me a compiler error at the fourth line of the method "illegal start of a simple expression" just after the first ++.

```
def working() : Seq[Seq[Elem]] = {
    val result = for(index <- 0 until COMPLETE_INPUT_CHANNELS) yield {
        getModesOfCompleteInputChannel(index)
    }
    val result2 = for(index <- 0 until INCOMPLETE_INPUT_CHANNELS) yield {
        getModesOfIncompleteInputChannel(index)
    }
    val result3 = for(index <- 0 until OUTPUT_CHANNELS) yield {
        getModesOfOutputChannel(index)
    }
    return result ++ result2 ++ result3
}

def notWorking() : Seq[Seq[Elem]] = {
    for(index <- 0 until COMPLETE_INPUT_CHANNELS) yield {
        getModesOfCompleteInputChannel(index)
    } ++ for(index <- 0 until INCOMPLETE_INPUT_CHANNELS) yield {
        getModesOfIncompleteInputChannel(index)
    } ++ for(index <- 0 until OUTPUT_CHANNELS) yield {
        getModesOfOutputChannel(index)
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T12:45:07.263

这个解决方案怎么样？

```
val tasks = Seq(
    (COMPLETE_INPUT_CHANNELS, getModesOfOutputChannel),
    (INCOMPLETE_INPUT_CHANNELS, getModesOfIncompleteInputChannel),
    (OUTPUT_CHANNELS, getModesOfOutputChannel))

tasks flatMap {
    case (limit, processing) => 0 until limit map processing
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T12:47:16.497

为什么不是这个？

```
(0 until COMPLETE_INPUT_CHANNELS).map(getModesOfCompleteInputChannel) ++
(0 until COMPLETE_INPUT_CHANNELS).map(getModesOfIncompleteInputChannel) ++
(0 until OUTPUT_CHANNELS).map(getModesOfOutputChannel) 
```

虽然我确实喜欢 MAD 的解决方案。十分优雅。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T12:44:04.910

我相信，`++`这里被视为`yield`表达式的一部分。为了使它起作用，只需将您的`for`理解用括号括起来。

# javascript - How to catch errors without try/catch OR wrap code with try/catch in runtime?

> ID：13584373
> 
> 赞同：3
> 
> 时间：2012-11-27T12:35:22.003
> 
> 标签：javascript, jquery, exception, exception-handling, try-catch

This question divides to 2 really :

*   Can i catch an exception **with js** without using try catch? doesn't have to "catch" it as in to continue executing the code but to be notified that an exception as happend.

Meaning i just want to be notified about exception no matter how thw browser reacts afterwards.

*   Can i wrap code with try/catch during run time?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:02:53.757

在你的 JS 中的某个地方：

```
window.someDefinedFunction = function() {
  //Old risky function
} 
```

可以调用该函数的其他任何地方：

```
window.someDefinedFunctionUnsafe = window.someDefinedFunction;
widnow.someDefinedFunction = function() {
  try {
    window.someDefinedFunctionUnsafe();
  }
  catch {
    //React to error
  }
} 
```

[Javascript 全局错误处理](https://stackoverflow.com/questions/951791/javascript-global-error-handling)是一个蛮力方法的链接。根据您要执行的操作，您可能只想`onerror`在有风险的通话期间交换唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:25:12.293

您可以在 javascript 中覆盖 onerror 方法。尝试执行一些代码，这可能是为了通知您已发生错误，其余行将继续执行。

在您的 js 函数中添加以下行以覆盖 onerror 方法。

window.onerror = function() {
alert("你有一个错误");
};

希望能帮助到你。

# loops - Increment value in cycles

> ID：13584378
> 
> 赞同：2
> 
> 时间：2012-11-27T12:35:34.393
> 
> 标签：loops, actionscript, increment

I'm incrementing a given value in cycle limit of say 6\. I'm curious how we can make this code shorter.

```
function Cycle_Value(inc_value:Number = 5, times:Number = 3):Number
{
    var return_value:Number = inc_value;        

    while(times >= 1)
    {
       if(inc_value < 6)
       {
          inc_value++;
          return_value = inc_value;
       }
       else if(inc_value == 6)
       {
          return_value = 1;
          inc_value = 1;
       }
       else
          trace(inc_value+" is out of bounds");

        times--;
    }
    return return_value;
}

Sample Output: Cycle_Value(5,2) = 1, Cycle_Value(6,10) = 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:41:26.980

尝试这个：

```
function Cycle_Value(inc_value:Number = 5, times:Number = 3):Number
{
   return (inc_value -1 + times) % 6 + 1; 
} 
```

您可以在以下位置找到有关模运算符的更多信息：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#modulo](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#modulo)

注意 1：如果您愿意使用 0 .. 5 而不是 1 .. 6 范围内的数字，您可以简单地使用以下表达式

```
(inc_value + times) % 6 
```

注 2：就我个人而言，我会使用不同的名称，例如 value 代替 inc_value 和 inc 代替 times。

# android - Android how to start activities/access class between two libraries

> ID：13584379
> 
> 赞同：0
> 
> 时间：2012-11-27T12:35:36.600
> 
> 标签：android, android-activity

In my application using one main application x, two library projects like y and z.

I can able to access library like calling x to y, x to z and y to z also using adding library as a project. In this sutation i can't able to call z to y.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:44:40.700

如果您想修改 y 和 z 库中的 UI - 将所有库包复制到您的项目并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:49:49.497

这更像是您那里的错误架构。您不能同时拥有两个库，这取决于每个库。如果你真的需要一个库，只需将 y 和 z 合并到一个项目中，并让 x 将其用作库。

# c# - Plugin to translate web app news feeds etc

> ID：13584381
> 
> 赞同：0
> 
> 时间：2012-11-27T12:35:51.147
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2008

Our web application makes it possible for registered users to subscribe to news feeds and forums. They can then post there, but the problem comes in users are from different cultures thus post in different languages. What plugins if any are there available that i can implement to allow users to be able to translate to their language so they can read all of the news posts and forum posts?

# ios - 未调用 cellforRowAtIndexPath 但调用 numberOfRows 和 numberOfsection

> ID：13584396
> 
> 赞同：-2
> 
> 时间：2012-11-27T12:36:39.960
> 
> 标签：ios, uitableview

我已经尝试了将近一天，我有一个表格视图，我调用重新加载数据来重新加载表格的条目。CellForRowAtIndexPath 仅第一次调用，但之后调用其他 2 个函数行数和节数，但不调用 cellforRow。我已经检查了行和部分是非零的，并且链接是好的......这是代码。代码有点长，跟 UItableview 的 reloadData 和 delegate 函数一样。提前谢谢

```
@interface HMPeopleController ()

@property(nonatomic, retain)  UIPopoverController *popOverHMPeople;

@end

@implementation HMPeopleController
@synthesize peopleCell,hmpeopleController,storedArrayForContacts;
@synthesize btnPeople;
@synthesize addingContactToPeopleList;
@synthesize popOverHMPeople,popOverEmail;
@synthesize attendees, btnIsHidden;
@synthesize peopleTableView,attendeeToBeAdded, meetingSummary, atendeeList, sortedArray,btnAddEmail,attendeeCount;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    appdelegate = (AppDelegate*)[[UIApplication sharedApplication]delegate];

    if (self) {
        // Custom initialization
    }
    return self;
}
- (void)dealloc
{

    [hmpeopleController release];
    [popOverEmail release];
    [self.peopleTableView release];
    [addingContactToPeopleList release];

    [attendees release];

    [attendeeCount release];
    [sortedArray release];
    [self setAttendeeToBeAdded:nil];
    [super dealloc];
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
          AppDelegate *    appDelegate = (AppDelegate*)[[UIApplication sharedApplication]delegate];
    if (appDelegate.joinOnlyMode) {
        btnAddEmail.hidden=YES;
    }

    content = [AttendeesHeaderGenerator wordsFromLetters];
    indices = [[content valueForKey:@"headerTitle"] retain];
    self.sortedArray = [[NSMutableArray alloc]init];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadData:) name:@"reload-data" object:nil];

       int totalOnline=0;

    for (HMAttendee *ha in [HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers) {
        if (ha.userStatus) {
            totalOnline++;
        }
    }

    attendeeCount = [[UILabel alloc]initWithFrame:CGRectMake(125, 5, 22, 21)];    
    attendeeCount.text=[[NSString alloc]initWithFormat:@"%i",totalOnline];
    [ attendeeCount setTextColor:[UIColor whiteColor] ];
    [attendeeCount setBackgroundColor:[UIColor clearColor]];

    [self.navigationController.view addSubview:attendeeCount];

    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(doneFromHmpeople:) name:@"doneFromHmpeople" object:nil];
    AppDelegate* app = (AppDelegate*)[[UIApplication sharedApplication] delegate];

    if(!app.joinOnlyMode)
    {
        UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Contacts" style:UIBarButtonItemStyleDone target:self action:@selector(addContactBtnPressed:)];
        self.navigationItem.rightBarButtonItem = rightButton;

        [rightButton release];

        UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithTitle:@"Email" style:UIBarButtonItemStyleDone target:self action:@selector(addEmailHandler:)];
        self.navigationItem.leftBarButtonItem = leftButton;
        [leftButton release];
    }
    UILabel *lb=[[UILabel alloc]initWithFrame:CGRectMake(150,5,55, 21)];

    [lb setText:@"Online"];
    [lb setBackgroundColor:[UIColor clearColor]];
    [lb setTextColor:[UIColor whiteColor]];
    [self.navigationController.view addSubview:lb];
    [lb release];

    UIImageView *onlineIcon=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"button-onn.png"] ];
    onlineIcon.frame=CGRectMake(98, 0, 32, 32);
    [self.navigationController.view addSubview:onlineIcon]; 

    [self.view setBackgroundColor:[UIColor clearColor]];
    //  self.title=@"Addtendees";
}

-(IBAction)DonePressed:(id)sender{

    [[NSNotificationCenter defaultCenter] postNotificationName:@"hideatendeelist" object:nil];
}

-(void) reloadData:(id) sender
{

    if (self.view.tag == 555) {
        int users  = [[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers count];
        numberOfRecords = users == 0 ? 1:users;
    }
    else
    {
        int users  = [[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers count];
        if (users == numberOfRecords || (users-numberOfRecords) < 0) {
            [btnPeople setTitle:[NSString stringWithFormat:@"%@",NSLocalizedString(@"People", nil)] forState:UIControlStateNormal];
        }
        else
        {
            //relalocate resources.

            [btnPeople setTitle:[NSString stringWithFormat:@"%@(%d)",NSLocalizedString(@"People",nil),users-numberOfRecords] forState:UIControlStateNormal];
        }
    }
            int totalOnline=0;
    for (HMAttendee *ha in [HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers) {
        if (ha.userStatus) {
            totalOnline++;
        }
    }

    attendeeCount.text=[[NSString alloc]initWithFormat:@"%i",totalOnline];
    [sortedArray removeAllObjects];
    NSLog(@"%i",[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsersForTb.count);
    int total=[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsersForTb.count;

    for (int i=0; i<total; i++) {
        //        HMAttendee *at = [[HMAttendee alloc] init];
        HMAttendee *at = [[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsersForTb objectAtIndex:i ];
        [sortedArray addObject:at];
    }

    [self.peopleTableView reloadData];
}
- (void)viewDidUnload
{

    attendeeCount = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [[NSNotificationCenter defaultCenter] removeObserver:self];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(contactsSelected:)
                                                 name:@"contactsSelected"
                                               object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(hideAttendePopOver)
                                                 name:@"hideatendeePopOver"
                                               object:nil];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    if ([[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsersForTb count] > 0) {
        NSArray *attendeeSecArray = [NSArray arrayWithArray:[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsersForTb];
        self.sortedArray = [NSMutableArray arrayWithArray:[attendeeSecArray sectionedArrayUsingProperty:@"strName"]];
        return [sortedArray count];  
    }else {
        return 0;
    }
    return 0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.

    //    int count = [[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers count];
    //    int rowsInSec = 0;
    //    for (int i=0; i<count; i++) {
    //        HMAttendee* attdee = [[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers objectAtIndex:i];    
    //        if ([[[content objectAtIndex:i] objectForKey:@"headerTitle"] isEqualToString:[attdee.strName substringToIndex:1]]){
    //            rowsInSec++;
    //            NSLog(@"Number of rows in section are %d", rowsInSec);
    //            
    //        }
    //    }

    NSArray *sectionArray = [sortedArray objectAtIndex:section];
    return [sectionArray count];

    // return count == 0?1:count;
    //return rowsInSec;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        static NSString *CellIdentifier = @"Cell";
    int count = [[sortedArray objectAtIndex:indexPath.section] count];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:CellIdentifier] autorelease];
    }
    if (indexPath.row == 0) {
        cell.textLabel.text = NSLocalizedString(@"[Presenter]", nil);
    }

    if (count == 0) {
        cell.textLabel.text = [HMMainManager getSharedInstance].currentUser.strName;
    }
    else 
    { 

        HMAttendee* attdee = [[sortedArray objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];
        cell.textLabel.text = attdee.strName;
        if(attdee.userStatus)
        {

            UIImageView *img=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"1.png"]];
            img.frame=CGRectMake(280, (cell.frame.size.height/2)/2, 16,16);

            [cell addSubview:img];
            [img release];
            //       cell.imageView.image=[UIImage imageNamed:@"1.png"];
            //      cell.imageView.frame=CGRectMake(280, cell.imageView.frame.origin.y, cell.imageView.image.size.width, cell.imageView.image.size.height);

        }
        else
        {

            UIImageView *img=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"0.png"]];
            img.frame=CGRectMake(280,(cell.frame.size.height/2)/2, 16,16);

            [cell addSubview:img];
            [img release];
            //         cell.imageView.frame=CGRectMake(280, cell.imageView.frame.origin.y, cell.imageView.image.size.width, cell.imageView.image.size.height);
        }
    }
    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     [detailViewController release];
     */
}

-(IBAction)addContactBtnPressed:(id)sender{

    if ([self.popOverHMPeople isPopoverVisible]) {

        [self.popOverHMPeople dismissPopoverAnimated:YES];

    } 
    else
    {

        AddPeopleViewController *addPeopleController = nil;
        addPeopleController =[[AddPeopleViewController alloc] initWithNibName:@"AddPeopleViewController" bundle:nil];
        addPeopleController.delegate=self;

        myContactsViewController *addressbookController=[[myContactsViewController alloc]initWithNibName:@"myContactsViewController" bundle:nil];
        UINavigationController *nav = [[UINavigationController alloc]
                                       initWithRootViewController:addressbookController];

        [self setPopOverHMPeople:[[[UIPopoverController alloc] initWithContentViewController:nav]autorelease]];

        self.popOverHMPeople.popoverContentSize = CGSizeMake( 300,500);

        //    if ([self.popOverHMPeople isPopoverVisible]) {
        //        
        //        [self.popOverHMPeople dismissPopoverAnimated:YES];
        //        
        //    } 
        //    else
        //    {

        CGRect bound;
        //bound=showAddressBookBtn.bounds;
        // bound.origin.x = 720;
        // bound.origin.y = 25;
        [self.popOverHMPeople presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
        //            }

    }
}

-(void) refresh
{
    [btnPeople setTitle:NSLocalizedString(@"People" , nil)forState:UIControlStateNormal];
    int count = [[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers count];
    numberOfRecords =  ( count== 0) ? 1:count;

    //add new added attendee

    for (HMAttendee* attendee in attendeeToBeAdded){

        NSMutableArray *storeArray =  [[HMMainManager getSharedInstance].currentMeeting arrMeetingUsers];
        BOOL found=NO;
        for (HMAttendee *storeAtted in storeArray) {

            if ([attendee.strName isEqualToString:storeAtted.strName]) {
                found=YES;
            }
        }

        if(!found)
            [[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers addObject:attendee];
    }

    [peopleTableView reloadData];

}

-(void) customDataInitialization
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadData:) name:@"reload-data" object:nil];
    numberOfRecords = 1;

}

- (void)ContactsSelected:(NSMutableArray *)contacts {

    NSLog(@"%d@",[[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers count]);
    [[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers addObjectsFromArray:attendees];
    NSLog(@"%d@",[[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers count]);

    [peopleTableView reloadData];    

}

- (void)doneFromHmpeople:(NSNotification *)notification{

    if(popOverEmail.popoverVisible )
        [popOverEmail dismissPopoverAnimated:YES];

    //    [self refresh];

}

- (IBAction)addEmailHandler:(UIBarButtonItem *)sender{

    if ([popOverEmail isPopoverVisible]) {
        [popOverEmail dismissPopoverAnimated:YES];
    }
    else {

        hmpeopleController = [[HMPeopleControllerAddEmail alloc]initWithNibName:@"HMPeopleControllerAddEmail" bundle:nil];
        UINavigationController  *     navEmail=[[UINavigationController alloc]initWithRootViewController:hmpeopleController];
        popOverEmail=[[UIPopoverController alloc]initWithContentViewController:navEmail];

        [popOverEmail setPopoverContentSize:CGSizeMake(hmpeopleController.view.frame.size.width, hmpeopleController.view.frame.size.height)];

        [popOverEmail presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

    }

}

- (BOOL)emailChecker:(NSString *)testStr{

    NSError *error=nil;
    NSRegularExpression *regex = [[NSRegularExpression alloc]initWithPattern:@"[a-zA-Z_.0-9]+(@){1}[a-zA-Z0-9]+(\\.){1}[a-zA-Z]{2,4}" options:NSRegularExpressionDotMatchesLineSeparators error:&error];    
    //      NSRegularExpression *regex = [[NSRegularExpression alloc]initWithPattern:@"[a-zA-Z]+" options:NSRegularExpressionDotMatchesLineSeparators error:&error];

    int matche=[regex numberOfMatchesInString:testStr options:0 range:NSMakeRange(0,testStr.length)];

    NSArray* matches = [regex matchesInString:testStr options:0 range:NSMakeRange(0, [testStr length])];

    if (matche<=0) {
        return NO;
    }

    for ( NSTextCheckingResult* match in matches )
    {
        NSString* matchText = [testStr substringWithRange:[match range]];
        if(![matchText isEqualToString:testStr])
        {
            NSLog(@"%@ =In valid",matchText);
            return NO;
        }
        else if([matchText isEqualToString:testStr])  {
            NSLog(@"%@",matchText);
            return YES;
        }

    }

    return nil;

}

- (void)contactsSelected:(NSNotification *)notification
{
    attendees =[[NSMutableArray alloc]init];
    //    [self dismissModalViewControllerAnimated:YES];
    NSDictionary *dict = [notification userInfo];
    storedArrayForContacts=[dict objectForKey:@"key"];

    NSMutableString *attendeesCanntBeAdded=[[NSMutableString alloc]init]; 

    int count=[[dict objectForKey:@"key"] count];
    if (count==0) {
        [self.popOverHMPeople dismissPopoverAnimated:YES];
        return;
    }
    NSMutableString* xmlDataString = [[NSMutableString alloc] init];

    [self setAttendeeToBeAdded:nil];

    attendeeToBeAdded = [[NSMutableArray alloc]init];
    for (int i=0; i<count; i++) {

        HMAttendee *atn= [[HMAttendee alloc]init];

        atn.strName= [[[dict objectForKey:@"key"] objectAtIndex:i] objectForKey:@"Email"];

        if (![self emailChecker:atn.strName]) {
            [attendeesCanntBeAdded appendFormat:@"%@ ",atn.strName];
            continue;
        }

        if([atn.strName length] > 0)
        {

            if ([attendeeToBeAdded count] == 0) {
                NSMutableString* attendeeEmails = [[NSMutableString alloc] init];
                [attendeeEmails appendString:@"<EmailID>"];
                [attendeeEmails appendString:atn.strName];
                [attendeeEmails appendString:@"</EmailID>"];

                // [attendeeEmails appendString:atn.strName];
                NSString *data = [NSString stringWithFormat:ADD_ATTENDEES_LIST_FORMAT,attendeeEmails];
                [xmlDataString appendString:data];
                // [attendeeEmails appendFormat:@"%@</EmailID><EmailID>",atn.strName];
                [attendeeEmails release];
            }else{
                NSMutableString* attendeeEmails = [[NSMutableString alloc] init];
                [attendeeEmails appendString:@"<EmailID>"];
                [attendeeEmails appendString:atn.strName];
                [attendeeEmails appendString:@"</EmailID>"];

                NSString *email = [NSString stringWithFormat:ADD_ATTENDEES_LIST_FORMAT,attendeeEmails];

                [xmlDataString appendString:(NSMutableString*)email];
            }
            [attendeeToBeAdded addObject:atn];
        }
        [atn release];
    }   
    //[attendeeEmails appendString:@"</EmailID>"];
    if (attendeesCanntBeAdded.length>0) {
        NSString *st=[[NSString alloc]initWithFormat:@"Following Emails are invalid:%@",attendeesCanntBeAdded];
        UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Skribbee" message:st delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [popOverEmail dismissPopoverAnimated:YES];
        [alert show];
        [alert release];
        [attendeesCanntBeAdded release];
        [st release];

    }

    if ([HMMainManager getSharedInstance].currentMeeting.isAttendeePopOver == true && [attendeeToBeAdded count] > 0) {

        // NSString* aList = [NSString stringWithFormat:ADD_ATTENDEES_LIST_FORMAT,attendeeEmails];
        [[HMMainManager getSharedInstance].currentMeeting addAttendee:@"" list:xmlDataString andDelegate:self];

    }

}
- (void)requestFinished:(ASIHTTPRequest *)request
{
    [self.popOverHMPeople dismissPopoverAnimated:YES];

    if(request.tag == ADD_ATTENDEE_REQUEST) {
        NSLog(@"%d",request.responseStatusCode);
        NSLog(@"%@",request.responseStatusMessage);
        NSLog(@"%@",[request responseString]);

        [[NSNotificationCenter defaultCenter] postNotificationName:@"disableButton" object:nil];

        [(AppDelegate *)[[UIApplication sharedApplication]delegate] hideActivityView];

        if(request.responseStatusCode == 200)
            //            [self hideAttendePopOver];
        {

            NSDictionary *dic=[request.responseString JSONValue ];
            NSString *rejectedEmails=[dic objectForKey:@"Description"];
            int startPtr,endPtr,offset;
            NSString *subStr;
            if(![rejectedEmails isEqualToString:@"OK"])
            {

                for (int i=0; i<rejectedEmails.length; i++) {
                    unichar c=[rejectedEmails characterAtIndex:i];
                    NSString *tmpStr=[[NSString alloc]initWithCharacters:&c length:1];

                    if([tmpStr isEqualToString:@"("])
                    {
                        startPtr=i;
                        startPtr++;
                    }
                    if([tmpStr isEqualToString:@")"])
                    {
                        endPtr=i;
                        offset=endPtr-startPtr;
                        subStr=[rejectedEmails substringWithRange:NSMakeRange(startPtr, offset)];
                        break;
                    }

                }//end for
                startPtr=0,endPtr=0,offset=0;
                NSMutableArray *tempMarray=[[NSMutableArray alloc]init];
                //            NSData *data=[subStr dataUsingEncoding:NSWindowsCP1251StringEncoding];
                //            NSString *textRev=[[NSString alloc]initWithData:data encoding:NSWindowsCP1251StringEncoding];
                //            
                //            NSLog(@" Actual String.. %@",textRev);
                //            subStr=textRev;
                for (int i=0;i<subStr.length; i++) {
                    unichar c=[subStr characterAtIndex:i];
                    NSString *tmpStr=[[NSString alloc]initWithCharacters:&c length:1];
                    if(i == (subStr.length-1) )
                    {

                        int offset=i-startPtr+1;
                        NSString *subStr2=[subStr substringWithRange:NSMakeRange(startPtr, offset)];

                        if([subStr2 isEqualToString:@" "])
                            break;

                        NSMutableDictionary *tempDict=[[NSMutableDictionary alloc]init];

                        [tempDict setObject:@"" forKey:@"Name"];
                        [tempDict setObject:subStr2 forKey:@"Email"];
                        [tempMarray addObject:tempDict];
                        startPtr=i+1;

                    }

                    if([tmpStr isEqualToString:@","])
                    {
                        int offset=i-startPtr;
                        NSString *subStr2=[subStr substringWithRange:NSMakeRange(startPtr, offset)];
                        NSMutableDictionary *tempDict=[[NSMutableDictionary alloc]init];

                        [tempDict setObject:@"" forKey:@"Name"];
                        [tempDict setObject:subStr2 forKey:@"Email"];
                        [tempMarray addObject:tempDict];
                        startPtr=i+1;
                    }
                }
                NSMutableArray *tempArr=[[NSMutableArray alloc]initWithArray:attendeeToBeAdded];

                for (NSDictionary *d2 in tempMarray) {
                    NSString *drstr=[d2 objectForKey:@"Email"];
                    drstr=[drstr stringByReplacingOccurrencesOfString:@" " withString:@""];
                    for (HMAttendee *d3 in tempArr) {
                        NSString *d3str=[d3.strName stringByReplacingOccurrencesOfString:@" " withString:@""];
                        if([d3str isEqualToString:drstr])
                        {
                            [attendeeToBeAdded removeObject:d3];

                        }
                    }
                }

            }//end OK if
            NSString *code=[dic objectForKey:@"Code"];

            NSLog(@"%@",[request responseString]);
            [self refresh];

            if([code isEqualToString:@"200.1"])
            {
                //                UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Skribbee" message:[dic objectForKey:@"Description"] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
                //                [alert show];
                //                [alert release];

            }
            else if([code isEqualToString:@"200"])
            {
                //            UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Skribbee" message:@"Attendee Added Successfully!." delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
                //            [alert show];
                //            [alert release];
            }
        }
        else {

            UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Skribbee" message:@"Your request was not completed successfully, please try again later!." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alert show];
            [alert release];
        }

    }
}
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"hideatendeelist" object:nil];
}

-(void)hideAttendePopOver{

    [self.popOverHMPeople dismissPopoverAnimated:YES];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:40:17.383

在你的`numberOfSectionsInTableView`你返回0。这就是它不起作用的原因。

另外可能的问题是如果`[sortedArray count]`是零，那么 numberOfSection 也将返回 0。因此不会调用 cellForRowAtIndexPath。使用 NSLog 检查数组的计数。

```
NSlog(@"Array count %d", [sortedArray count]); 
```

改变方法，如：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    if ([[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsersForTb count] > 0)
    {
        NSArray *attendeeSecArray = [NSArray arrayWithArray:[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsersForTb];
        self.sortedArray = [NSMutableArray arrayWithArray:[attendeeSecArray sectionedArrayUsingProperty:@"strName"]];
        return [sortedArray count];  
    }
    else
    {
        return 1;
    }
    return 1;
} 
```

# ruby-on-rails - Rails 嵌套 N+1 查询问题

> ID：13584397
> 
> 赞同：5
> 
> 时间：2012-11-27T12:36:43.607
> 
> 标签：ruby-on-rails

我的协会是这样的：

```
vendor has shipments  
shipment has order
order has products 
```

在我的控制器中，我写成

```
@shipments = @vendor.shipments.includes(:order) 
```

但在我看来，我使用的是

```
shipment.order.products.collect(&:name) 
```

所以它返回了 Rails 'bullet' gem 的 N+1 Query 问题

有人帮我解决嵌套 N+1 查询问题吗？我需要如何在控制器中写入？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T12:43:33.743

```
@shipments = @vendor.shipments.includes(:order => :products) 
```

应该管用。在此处阅读更多信息[http://guides.rubyonrails.org/active_record_querying.html#nested-associations-hash](http://guides.rubyonrails.org/active_record_querying.html#nested-associations-hash)

# javascript - 如何从元素的属性设置元素的标题？

> ID：13584398
> 
> 赞同：0
> 
> 时间：2012-11-27T12:36:43.073
> 
> 标签：javascript, jquery

我正在使用以下代码：

```
 $(targetSelector)
        .attr({
            'data-disabled': 'yes',
            'data-title': function() { return this.title },
            'title': ''
        })
        .addClass('disabled')
        .prop('disabled', true); 
```

这会将元素的标题设置为 '' 在第一次将其存储在 data-title 中之后。

如果标题当前等于空字符串，如何通过从 data-title 属性取回元素标题来恢复元素标题？我假设我需要在上面这样的函数中执行此操作，但是如何在函数中进行代码检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:38:47.693

您在`data-*`属性中获取的所有内容都可以通过 jQuerys`data(name)`方法访问，其中名称如下`data-`，因此您可以使用以下代码

```
$(targetSelector)
    .attr('title',function() { return this.title || $(this).data("title"); }) 
```

`title`如果该属性不存在或 this.title 返回任何其他虚假值（例如） ，这也会设置标题，`false`但是我假设您希望在 this.title === "" 的两种情况下都设置该值并且 this.title === undefined 并且后者不是预期的（这将要求在某些时候将 title 属性显式设置为布尔值`false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:40:55.823

你可以试试这个：

```
$(targetSelector).attr('title', function() {
    return this.title || $(this).data('title');
}); 
```

如果它是*falsy*将返回标题，否则它将获取 data-title 属性。

# extjs4.1 - 校验列验证

> ID：13584400
> 
> 赞同：0
> 
> 时间：2012-11-27T12:37:05.977
> 
> 标签：extjs4.1

我有一个检查列（称为“Leader”），当用户单击“创建项目”按钮时，如果检查列中没有复选框被选中（即如果用户没有选择复选框），我希望显示一条警报消息. 现在我有以下代码，它创建每个记录的所有“Leader”校验列值的数组（称为“数据”）。但是，如果所有值（在“数据”中）都是错误的（即没有选中复选框），我不知道如何显示警报。这是我的代码：

```
buttons: [{
    text: 'Create Project',
    id: 'createprojectbutton',
    handler: function (){
     var form = this.up('form').getForm();
     var data = [];
     teststore.each(function(rec){
      data.push(rec.get('Leader'));
     });  
  }
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:46:43.723

你的意思是这样的：

```
buttons: [{
    text: 'Create Project',
    id: 'createprojectbutton',
    handler: function (){

        var iHasLeader = false;
        teststore.each(function(rec){
            // Assuming the leader field is boolean, any leader that is true
            // will render iHasLeader as true.
            iHasLeader = iHasLeader || rec.get('Leader');
        });  
        if ( !iHasLeader )
            alert( 'No leader');
    }
}] 
```

# namespaces - How can I tell which namespace the compiler thinks a function is in?

> ID：13584401
> 
> 赞同：1
> 
> 时间：2012-11-27T12:37:09.593
> 
> 标签：namespaces, g++

I'm attempting to deal with an error message produced by g++, regarding the specialization of a template member function in a particular class. I get the error message

```
error: specialization of ‘template<class T> std::vector<T>& push::GrammarEnv::stack_accessor()’ in different namespace [-fpermissive] 
```

However, the specialization appears to be in the same namespace. Indeed, changing the namespace produces an error stating that the template function was not declared.

What could be causing this issue, and how can I tell what namespace the compiler believes the specialization is taking place in? The error message simply gives the original, unspecialized function declaration's namespace.

# html - QML Text element with rich text: How to adjust vertical position of an

> ID：13584408
> 
> 赞同：4
> 
> 时间：2012-11-27T12:37:38.193
> 
> 标签：html, css, qt, qml

I have a Text element with some HTML content which contains an `<img>` tag. I want to adjust the baseline of this image since it displays a rasterized latex math formula. Detecting the baseline within the image is another task. This question is how to adjust the vertical position of the image when I know how many pixels I have to move the image.

In HTML, I can use relative positioning. Since Qt only supports [a subset of CSS](http://doc.qt.digia.com/qt/richtext-html-subset.html#css-properties), I have to use different CSS properties. However, *none* of them seem to be working when displaying HTML using a QML Text element! What's wrong?

```
Text {
    text: 'test <img style="padding: 100px" src="latex/182.png"/>'
} 
```

This displays exactly the same compared to leaving out the style attribute. It's like QML ignores style attributes. Does QML use another (even tinier) HTML engine?

I already found out that images are only supported in the "rich text" mode (there also is the "styled text" mode which doesn't support images but other HTML tags like `<b>` and `<i>`).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:08:13.353

我已经通过使用 HTML 解决了类似`<table>`的问题。它们在 Qt 中得到更好的支持。

# python - 如何使用 SQLAlchemy 实现内连接？

> ID：13584416
> 
> 赞同：7
> 
> 时间：2012-11-27T12:38:05.047
> 
> 标签：python, python-2.7, sqlalchemy

如何使用 SQLAlchemy 实现内连接？我正在尝试进行简单的聊天

```
class Base(object):
    def __tablename__(self):
        return self.__name__.lower()

    id = Column(Integer, primary_key=True)

Base = declarative_base(cls=Base)

class PlayerModel(Base):
    __tablename__ = 'players'
    username = Column(String(30), nullable=False)
    email = Column(String(75), nullable=False)
    password = Column(String(128), nullable=False)

class MessageModel(Base):
    __tablename__ = 'messages'
    player_id = Column(Integer,ForeignKey('chats.id'), nullable=False)
    message = Column(String(2000), nullable=False)
    time = Column(TIMESTAMP, server_default=func.now())

    def __repr__(self):
        return "<Message('%s')>" % (self.type) 
```

我想阅读比某个日期更年轻的所有消息，结果得到字典列表，例如

```
[{'username':'x','message':'y','time':'number0'},{'username':'y','message':'z','time':'number1'},
{'username':'x','message':'zz','time':'number'}] 
```

为此，我需要内部加入。如何使它工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T15:18:20.803

为此，您首先需要有 a`session`来制作`Query`. `relationship`此外，在您的 MessageModel 上添加一个会很方便。

```
class MessageModel(Base):
    __tablename__ = 'messages'
    player_id = Column(Integer,ForeignKey('chats.id'), nullable=False)
    message = Column(String(2000), nullable=False)
    time = Column(TIMESTAMP, server_default=func.now())
    player = relationship(PlayerModel, backref="messages") 
```

这将在两个模型上创建关系。

```
results = (session.query(PlayerModel)
                  .join(PlayerModel.messages)
                  .values(PlayerModel.username,
                          MessageModel.message,
                          MessageModel.time))
# results will be a generator object

# This seems a bit convoluted, but here you go.
resultlist = []
for username, message, time in results:
    resultlist.append({'message': message,
                       'username': username,
                       'time': time}) 
```

可能有更优雅的方法来处理您的数据结构，但这个应该可以工作。

# visual-studio-2010 - 如何在“获取特定版本”后获取待处理更改列表

> ID：13584418
> 
> 赞同：0
> 
> 时间：2012-11-27T12:38:05.947
> 
> 标签：visual-studio-2010, tfs

我的问题是这样的：我错误地签入了一些文件，包括一些编辑和添加。假设变更集编号为 0。我快速回滚了变更集，并签入了新的挂起更改（主要是删除），然后我再次签入以回滚 TFS 上的内容。变更集编号为 1。

现在我想取回我的文件。我已经完成了版本 0 的“获取特定版本”。我已经找回了我的文件，但现在我的待处理更改列表丢失了。现在，如果我有一个新的“获取”，我所有的文件都会再次丢失。如何取回待处理的更改列表？我必须手动修改和添加文件吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:04:54.683

没有答案...

同事的回答：没办法。您必须手动重做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:54:33.267

回滚变更集 #1。这将“挂起”您的所有添加/编辑。修复导致您首先将其回滚的任何问题，然后将其签入。

这是一种常见的情况，虽然看起来很奇怪，但回滚回滚是正确的方法。

# php - PHP 变量范围：将外部对象传递给类

> ID：13584419
> 
> 赞同：0
> 
> 时间：2012-11-27T12:38:08.397
> 
> 标签：php, class, pdo, scope

我正在定义共享公共数据库的模型。但是，我无法通过`require_once()`. 我收到以下错误：

```
Fatal error: Call to a member function prepare() on a non-object... 
```

我猜这只是一个范围问题。我尝试在两个文件中都声明`$database`为 a `global`，但这似乎不起作用。有任何想法吗？

**常见的.php**

```
$host = 'localhost';
$dbname = 'database';
$username = 'user';
$password = 'pass';

$database = new PDO("mysql:host=$host;dbname=$dbname", $username, $password, array(PDO::ATTR_PERSISTENT => true)); 
```

**产品.php**

```
require_once('common.php');

class Product {

  function fetch_from_category($category) {
    $query = $database->prepare('SELECT * FROM product WHERE product.category = ?');
    $query->execute($category);
    return $query->fetchAll(PDO::FETCH_ASSOC);
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:41:29.437

传递`$database`给类，然后将其存储为属性并使用`$this->database`：

```
class Product {

  protected $database;

  public function setDb($db)
  {
      $this->database = $db;
  }

  function fetch_from_category($category) {
    $query = $this->database->prepare('SELECT * FROM product WHERE product.category = ?');
    $query->execute($category);
    return $query->fetchAll(PDO::FETCH_ASSOC);
  }

}

$p = new Product();
$p->setDb($database); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:42:03.853

确实是范围问题，`$database`里面没有定义`Product::fetch_from_category`。您应该在实例化它时将其传递给对象：

```
class Product {

  protected $database;

  public function __construct(PDO $database) {
      $this->database = $database;
  }

  public function fetch_from_category($category) {
      $query = $this->database->prepare('SELECT * FROM product WHERE product.category = ?');
      $query->execute($category);
      return $query->fetchAll(PDO::FETCH_ASSOC);
  }

} 
```

...

```
require_once 'common.php';
require_once 'product.php';

$product = new Product($database); 
```

# list - 运算符和列表 f#

> ID：13584423
> 
> 赞同：0
> 
> 时间：2012-11-27T12:38:31.677
> 
> 标签：list, f#

我做了这个代码：

```
let rec foo1 z = function
  | [] -> []
  | x::xs when x = z -> x::(foo1 x xs)
  | x::xs -> foo1 z xs 
```

但我想要这个函数的更复杂版本，其中包含一个类型`int -> int -> bool`为第一个参数的新函数。此函数将针对列表的所有元素测试整数参数，应用运算符时产生 true 的元素应放置在返回列表中

例子：

```
let eq x y = x = y
let lt x y = x < y
let gt x y = x > y

foo2 eq 2 [1;2;4;2;5] => [2;2]
foo2 lt 2 [1;2;4;2;5] => [4;5]
foo2 gt 2 [1;2;4;2;5] => [1] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:57:51.463

```
/// Pass a function as an argument 
let rec filterByVal fn z = function 
    | [] -> [] 
    | x::xs when fn z x -> x::(filterByVal fn z xs) 
    | _::xs -> filterByVal fn z xs

/// Use anonymous functions
filterByVal (fun z x -> z = x) 2 [1;2;4;2;5] // [2; 2]
filterByVal (fun z x -> z < x) 2 [1;2;4;2;5] // [4; 5]
filterByVal (fun z x -> z > x) 2 [1;2;4;2;5] // [1]

/// Or use symbolic infix functions
filterByVal (=) 2 [1;2;4;2;5]
filterByVal (<) 2 [1;2;4;2;5]
filterByVal (>) 2 [1;2;4;2;5] 
```

# asp.net - 带有 QueryStringField 的 DataPager 导致 UpdatePanel 内的完整 PostBack

> ID：13584424
> 
> 赞同：0
> 
> 时间：2012-11-27T12:38:32.910
> 
> 标签：asp.net, listview, updatepanel, datapager

我有一个 ListView 与三个与之关联的 DataPager，都在一个 UpdatePanel 内。

第一个 DataPager 仅显示上一页的链接：

```
<asp:DataPager ID="dpPrev" runat="server" PagedControlID="lvExperiences" QueryStringField="page" PageSize="4">
  <Fields>
    <asp:NextPreviousPagerField ShowNextPageButton="false" ButtonCssClass="PagePrev" />
  </Fields>
</asp:DataPager> 
```

第二个是用于页面的常规顺序：

```
<asp:DataPager ID="dpList" runat="server" PagedControlID="lvExperiences" QueryStringField="page" PageSize="4">
  <Fields>
    <asp:NumericPagerField ButtonType="Link" CurrentPageLabelCssClass="PageCurrent" />
  </Fields>
</asp:DataPager> 
```

最后一个是指向下一页的链接：

```
<asp:DataPager ID="dpNext" runat="server" PagedControlID="lvExperiences" QueryStringField="page" PageSize="4">
  <Fields>
    <asp:NextPreviousPagerField ShowPrevPageButton="false" ButtonCssClass="PagePrev" />
  </Fields>
</asp:DataPager> 
```

我将这些控件分开放置，因此我可以禁用代码后面的上一个/下一个链接，具体取决于我们是否在第一页/最后一页：

```
Protected Sub lvExperiences_DataBound(ByVal sender As Object, ByVal e As System.EventArgs) Handles lvExperiences.DataBound
    Dim page As Integer = 1
    If Not Request("page") Is Nothing Then
        page = Integer.Parse(Request("page"))
    End If
    dpPrev.Visible = ((dpPrev.PageSize * page) > dpPrev.TotalRowCount And (page > 1))
    dpNext.Visible = ((dpNext.PageSize * page) < dpNext.TotalRowCount)
End Sub 
```

`?page=X`它工作得很好，但是，这样的DataPager 正在更改 URL 以添加`PostBack`. 如果我从s 中删除`DataBound`方法和`QueryStringField`属性，则执行其工作并仅刷新.`DataPager``UpdatePanel``ListView`

有谁知道不使用`QueryStringField`属性就可以知道当前页面的方法？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:16:21.493

试试这个：

```
Protected Sub lvExperiences_DataBound(ByVal sender As Object, ByVal e As System.EventArgs) Handles lvExperiences.DataBound
   dpPrev.Visible = dpPrev.StartRowIndex > 0
   dpNext.Visible = (dpNext.StartRowIndex + dpNext.PageSize) < dpNext.TotalRowCount
End Sub 
```

# xcode - Xcode 线程 1：Main.m 中的信号 SIGBART 错误

> ID：13584431
> 
> 赞同：1
> 
> 时间：2012-11-27T12:38:48.127
> 
> 标签：xcode

我正在尝试创建一个简单的 iPhone 应用程序，但其中出现错误。

这是 main.m 类中的代码

```
//
//  main.m
//  Calculator
//
//  Created by Author on 27/11/2012.
//  Copyright (c) 2012 Ben Allinson. All rights reserved.
//

#import <UIKit/UIKit.h>

#import "CalculatorAppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([CalculatorAppDelegate class]));
    }
} 
```

但是，我在以下行中收到错误消息“线程 1：信号 SIGBART”

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([CalculatorAppDelegate class])); 
```

任何帮助将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T16:40:36.407

在 CalculatorAppDelegate 上使用 Xcode 调试器。

Mac（或iDevice）通常崩溃的地方并不是实际发生错误的地方，而只是检测到问题的地方。

如果您还没有使用调试器的经验，请使用 NSLog 在所有方法的入口点打印“Got here”消息：

```
 - (int) foo: (long) bar
 {
       @NSLog( @"foo:" );
       ...
 } 
```

您可能需要在 Xcode 中启用调试控制台。

我推荐 Robert Ward 的书“调试 C”。第二版的标题稍有不同，我还没有读过，但期望是好的。他谈到了调试器是如何工作的，也谈到了在跟踪错误时有条不紊。

# c++ - 我的程序在翻转位时崩溃

> ID：13584433
> 
> 赞同：1
> 
> 时间：2012-11-27T12:38:52.843
> 
> 标签：c++, bits, bitmask

我有这个功能，显然它会导致我的程序崩溃：

```
long long todos(long long x,long long i) {
  x ^= (1 << i);
  long long aux = i - 1;
  if(aux >= 0) x ^= (1 << aux);
  aux = i - 4;
  if(aux >= 0) x ^= (1 << aux);
  aux = i + 1;
  if(aux < 16) x ^= (1 << aux);
  aux = i + 4;
  if(aux < 16) x ^= (1 << aux);
  return x;
} 
```

我不明白为什么当我更改所有`^= (`for`&= ~(`时它运行得非常好（尽管我得到的输出不同）。这种行为有什么合乎逻辑的解释吗？

如果您需要整个代码：http: [//ideone.com/Z7qoof](http://ideone.com/Z7qoof)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:57:37.183

看起来你的`dp()`函数递归得很深。考虑到调用`dp(3)`可以用你的顺序评估所有 65536 个可能的位板`^`，而你`&~`的调用`dp(k)`只会在数字上评估之前的位板`k`。请注意，您是`mat`按顺序填写的`main()`；如果您之前仅在数字上依赖位板`k`，您将不会非常深入地递归。

**编辑**：至于解决这个问题，您可能认为动态规划是有向无环图中的最短路径。问题是你这里没有无环图。您正在执行深度优先搜索以在此处找到最短路径，这不起作用。尝试用广度优先搜索或 Dijkstra 算法替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:56:44.700

我的猜测是这条线崩溃了：

cout << mat[bs.to_ulong()] << endl;

由于 bs 大于 1<<16 的预留空间

ps 为什么对所有内容都使用 long long 数据类型？long long 是 64 位的。你做的大多数事情都可以用一个短整数来完成

# php - 使用 EXEC-PHP 在 wordpress 中显示有序

> ID：13584435
> 
> 赞同：5
> 
> 时间：2012-11-27T12:38:53.777
> 
> 标签：php, function, wordpress

我正在开发一个 WordPress 博客。以前的开发人员使用“Exec-PHP”在某个页面中执行 PHP 脚本。

以下一个显示在`http://url-of-the-page/`“/homez.406/xxx/www/wp-content/xxx/xxx/”中包含的文件列表中。

我想按日期订购文件，但我不知道该怎么做！有人已经用过这个了吗？

```
<!--?php showContent('/homez.406/xxx/www/wp-content/xxx/xxx/','http://url-of-the-page/',false,false); ?--> 
```

这是我在functions.php中找到的

```
function showContent($path,$webpath,$adminclear,$adminup){

if ($handle = opendir($path))
{
   if ($adminclear==true)

   {
    global $user_ID; if( $user_ID ) :
    if( current_user_can('level_10') ) :
    $auth=true;
    else : 
    $auth=false;
    endif; 
    endif; 
   }

   if ($adminup==true)

   {
    global $user_ID; if( $user_ID ) :
    if( current_user_can('level_10') ) :
    $authup=true;
    else : 
    $authup=false;
    endif; 
    endif; 
   }

   else{$auth=true;$authup=true;}

   if ((isset($_POST['dlfile']))&&($auth==true))
   {
   $removefile=$_POST['dlfile'];
    unlink ($removefile);

   }

   while (false !== ($file = readdir($handle)))
   {
       if ($file != "." && $file != "..")
       {
           $fName  = $file;
           $goodpath=$webpath.$fName;
           $file   = $path.$file;
           $abpath=$path.$fName;

           if(is_file($file)) {
               echo "<p><a href='http://www.otrmd.com/wp-content/themes/FactoryWP/dl.php?p=".$goodpath."&f=".$fName."'>".$fName."</a><br/> Uploaded on ".date ('d-m-Y H:i:s', filemtime($file))."<br/>Size: ".filesize($file)." bytes</p>";

               if($auth==true)
               {
               echo "<form method='post' action=".$_SERVER['REQUEST_URI'].">
               <input type='hidden' name='dlfile' value='".$abpath."'>
               <input type='submit' value='Clear File'>
               </form><br/>";
               }
           } elseif (is_dir($file)) {
               print "<p><a href='".$_SERVER['PHP_SELF']."?path=$file'>$fName</a></p><br/><br/>";
           }
       }
   }

   closedir($handle);
}    
if ($authup==true)
   {

   echo ("[uploadify folder='".$path."' multi=true]");

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:38:48.417

这里的问题是使用了该功能`readdir`，并且文档说：

`The entries are returned in the order in which they are stored by the filesystem.`

所以我建议`scandir`结合使用`uasort`, 对文件进行排序`filemtime`

代替

```
while (false !== ($file = readdir($handle))) 
```

经过

```
$files = scandir($path);
uasort($files, 'sort_by_filemtime');
foreach ($files as $file) {
    ... 
```

并在脚本开头声明如下回调函数

```
function sort_by_filemtime($file1, $file2) {
    global $path;
    $file1mtime = filemtime($path.$file1);
    $file2mtime = filemtime($path.$file2);
    if ($file1mtime == $file2mtime) {
        return 0;
    }
    return $file1mtime > $file2mtime ? 1 : -1;
} 
```

# yii-cactiverecord - 如何检查数据库中是否存在记录

> ID：13584443
> 
> 赞同：3
> 
> 时间：2012-11-27T12:39:29.210
> 
> 标签：yii-cactiverecord

在 yii 中，我使用安全问题创建密码重置功能。首先，用户需要输入他的电子邮件 ID。我创建了 emailform.php`views->User1`作为

```
<?php
$form=$this->beginWidget('CActiveForm', array(
    'id'=>'email-form',
    'enableClientValidation'=>true,
    ));
echo CHtml::textField('email');
echo CHtml::submitButton('Send');
$this->endWidget(); 
```

在控制器中，我创建了方法

```
public function actionPassword() {
    if (isset($_POST['email'])) {
       $email = $_POST['email'];
       //process email....
       //....
    }
    $this->render('_emailForm');
} 
```

现在我想检查这个电子邮件 ID 是否存在于用户表中。如果是这样，那么我想向他显示一个安全问题。我该如何实施？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T13:13:04.593

这将帮助您入门，您可以在控制器中放置一个类似的方法并创建一个带有密码字段的视图。

```
public function actionPassword() {
  if(isset($_POST['email'])) {
    $record=User::model()->find(array(
      'select'=>'email',
      'condition'=>'email=:email',
      'params'=>array(':email'=>$_POST['email']))
    );

    if($record===null) {
      $error = 'Email invalid';
    } else {
      $newpassword = 'newrandomgeneratedpassword';
      $record->password = $this->hash_password_secure($newpassword);
      $record->save(); //you might have some issues with the user model when the password is protected for security
      //Email new password to user
    }
  } else {
    $this->render('forgetPassword'); //show the view with the password field
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-27T10:12:00.743

如果您使用 CActiveRecords，检查记录是否存在的正确方法是使用[exists()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#exists-detail)函数，而不是 find() 函数。

```
$condition = 'email_d=:emailId';
$params = array(':emailId' => $emailId);
$emailExists = User::model()->exists($condition,$params);
if( $emailExists) )
{
  //email exists
}
else
{
  // email doesn't exist
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-06T16:07:05.923

要检查数据库中的记录，您可以使用两个选项

```
$exists = ModelName::find()->where([ 'column_name' => $value])->andWhere(['column_name' => $value])->exists();
//returns true or false 
```

和

```
$exists = ModelName::findOne(["column_name" => $value,"column_name"=>$value]); 
```

查看

```
if ($exists)
{
// exit
}
else
{
// not exist
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T14:34:26.497

```
$model = YourModel::model()->find('email = :email', array(':email' => $_POST['email'])); 
```

这像 PDO 一样使用：

```
$query = 'SELECT * etc.. WHERE email = :email';

$stmt = DB::prepare($query);
$stmt->bindParam(':email', $_POST['email'], PDO::PARAM_STR);
$stmt->execute();

etc... 
```

不安全？！

进而..

```
if( empty($model) )
{
  // exit code
}
else
{
  // success block
} 
```

# django - 如何按相关字段对对象进行排序？

> ID：13584446
> 
> 赞同：1
> 
> 时间：2012-11-27T12:39:31.703
> 
> 标签：django, django-models

我有三个模型：

```
class Category(models.Model):
    name = models.CharField(max_length=255, verbose_name=u'Name', blank=True, null=True)
    parent = models.ForeignKey('self', null=True, blank=True)
    [...]

class Item(models.Model):
    name = models.CharField(max_length=255, verbose_name=u'Name', blank=True, null=True)
    categories = models.ManyToManyField(Category, null=True, blank=True, related_name='cats',verbose_name=u'Categories')
    [...]

class Positions(models.Model):
    category = models.ForeignKey(Category)
    item = models.ForeignKey(Item)
    position = models.IntegerField(verbose_name=u'Position in category', default = 0)
    [...] 
```

我想从指定的类别中获取项目，但按位置排序（来自位置）。是否可以在查询中完成，例如：

```
items = Items.objects.filter([...]).order_by(??) 
```

还是我需要添加一个循环：

```
items = Items.objects.filter([...])
for item in items:
    ??? 
```

如何做好？

（我还没有弄清楚如果表位置中的项目没有位置条目）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:45:30.370

这[在文档中](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#order-by)得到了充分解释：

```
Item.objects.filter(...).order_by('positions__position') 
```

# json - 谷歌地图 - 每个类别不同的 标记图标

> ID：13584455
> 
> 赞同：1
> 
> 时间：2012-11-27T12:39:54.843
> 
> 标签：json, google-maps-api-3

我正在尝试为每个具有不同类别的标记提供不同的标记图像。在 json 中，我有 3 个示例，它们都具有不同的类别（一、二和三）。

目前我有一个标记图像用于所有人，但我想使用类别值来控制所使用的图像 URL。

我可能正在考虑使用一个 url 变量来插入类别颜色（var url = "http://domain.com/images/marker_" + [category] ​​+ ".png"）。然后我可以将它与 switch 语句混合，但这是我所得到的。

我处理这个问题的最佳方法是什么？

这是我为谷歌地图准备的 JS。我正在使用 API 的 v3。

```
(function() {

    window.onload = function() {

    // Creating a new map
    var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(30.033591,-36.035156),
        zoom: 3,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    // Creating the JSON data
    var json = [
        {
            "title": "USA",
            "lat": 37.616552,
            "lng": -92.988281,
            "description": "<strong>USA</strong> ...",
            "category": "one"
        },
        {
            "title": "France",
            "lat": 48.372793,
            "lng": 1.230469,
            "description": "<strong>France</strong> ...",
            "category": "two"
        },
        {
            "title": "UK",
            "lat": 51.517403,
            "lng": -0.098877,
            "description": "<strong>UK</strong> ...",
            "category": "three"
        }
    ]

    // Custom marker - Need one for each category
    var image = new google.maps.MarkerImage(
        'http://i.imgur.com/3YJ8z.png',
        new google.maps.Size(19,25),    // size of the image
        new google.maps.Point(0,0) // origin, in this case top-left corner

    );

    // Creating a global infoWindow object that will be reused by all markers
    var infoWindow = new google.maps.InfoWindow();

    // Marker Clusterer setup
    var mcOptions = {
        gridSize: 50,
        maxZoom: 15
    };
    var markers = [];

    // Looping through the JSON data
    for (var i = 0, length = json.length; i < length; i++) {
        var data = json[i],
            latLng = new google.maps.LatLng(data.lat, data.lng);

        // Creating a marker and putting it on the map
        var marker = new google.maps.Marker({
            position: latLng,
            map: map,
            title: data.title,
            icon: image
        });
        markers.push(marker);

        // Creating a closure to retain the correct data, notice how I pass the current data in the loop into the closure (marker, data)
        (function(marker, data) {

            // Attaching a click event to the current marker
            google.maps.event.addListener(marker, "click", function(e) {
                infoWindow.setContent(data.description);
                infoWindow.open(map, marker);
            });

        })(marker, data);

    }// END for loop

    // Cluster the markers
    var markerCluster = new MarkerClusterer(map, markers, mcOptions);

}// END window.onload

})(); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:05:42.033

@zizther您想用MarkerClusterer对标记进行分类，不是吗？如果是这样，您可以尝试以下代码：

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      html, body, #map {
        width: 100%;
        height: 100%;
        padding : 0;
        margin : 0;
      }
      #category_panel {
        background-color : white;
        padding : 1px;
        font-size : 13px;
        margin-top : 5px;
        border : 1px solid #aaa;
      }
    </style>
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js"></script>
    <script type="text/javascript">
      (function() {

        var clusterer;

        window.onload = function() {

          // Creating a new map
          var map = new google.maps.Map(document.getElementById("map"), {
            center : new google.maps.LatLng(30.033591, -36.035156),
            zoom : 3,
            mapTypeId : google.maps.MapTypeId.ROADMAP,
            noClear : true
          });

          var selectDiv = $("#category_panel")[0];
          map.controls[google.maps.ControlPosition.TOP_LEFT].push(selectDiv);

          // Creating the JSON data
          var json = [{
            "title" : "USA",
            "lat" : 37.616552,
            "lng" : -92.988281,
            "description" : "<strong>USA</strong> ...",
            "category" : "one"
          }, {
            "title" : "France",
            "lat" : 48.372793,
            "lng" : 1.230469,
            "description" : "<strong>France</strong> ...",
            "category" : "two"
          }, {
            "title" : "UK",
            "lat" : 51.517403,
            "lng" : -0.098877,
            "description" : "<strong>UK</strong> ...",
            "category" : "three"
          }];

          /*******
           * for test (start)
           ********/

          var sw = new google.maps.LatLng(37.616552, -92.988281);
          var ne = new google.maps.LatLng(51.517403, -0.098877);
          var bounds = new google.maps.LatLngBounds(sw, ne);
          map.fitBounds(bounds);
          var lat,lng,category;
          var categories = ["one", "two", "three"];
          for(var i = 0; i < 300; i++) {
            lat = Math.random() * (ne.lat() - sw.lat()) + sw.lat();
            lng = Math.random() * (ne.lng() - sw.lng()) + sw.lng();
            category = categories[Math.floor(Math.random() * 3)];
            json.push({
              "title" : "random #" + i,
              "lat" : lat,
              "lng" : lng,
              "description" : "<strong>" + category + "</strong><br>random #" + i,
              "category" : category
            });
          }
          /*******
           * for test (end)
           ********/

          // Custom marker - Need one for each category
          var image = new google.maps.MarkerImage(
            'http://i.imgur.com/3YJ8z.png',
            new google.maps.Size(19, 25), // size of the image
            new google.maps.Point(0, 0) // origin, in this case top-left corner
          );

          // Creating a global infoWindow object that will be reused by all markers
          var infoWindow = new google.maps.InfoWindow();

          // Marker Clusterer setup
          var mcOptions = {
            gridSize : 50,
            maxZoom : 15
          };
          clusterer = new MarkerClusterer(map, [], mcOptions);

          var markers = {};
          var categoryIcons = {
            "one" : "https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=1%7CFF0000%7C000000",
            "two" : "https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=2%7C00FFFF%7C000000",
            "three" : "https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=3%7CFF00FF%7C000000"
          }

          // Looping through the JSON data
          for (var i = 0, length = json.length; i < length; i++) {
            var data = json[i],
                latLng = new google.maps.LatLng(data.lat, data.lng),
                category = data.category;

            if (category in markers == false) {
              markers[category] = [];
            }

            // Creating a marker and putting it on the map
            var marker = new google.maps.Marker({
              position : latLng,
              title : data.title,
              icon : categoryIcons[data.category]
            });
            markers[category].push(marker);

            // Creating a closure to retain the correct data, notice how I pass the current data in the loop into the closure (marker, data)
            (function(marker, data) {

              // Attaching a click event to the current marker
              google.maps.event.addListener(marker, "click", function(e) {
                infoWindow.setContent(data.description);
                infoWindow.open(map, marker);
              });
            })(marker, data);

          }// END for loop

          $("#category").change(function(){
            var selected = $(this).val();
            clusterer.clearMarkers();
            clusterer.addMarkers(markers[selected]);
          });
          $("#category").change();
        }// END window.onload
      })();
    </script>
  </head>
  <body>
    <div id="map">
      <div id="category_panel">
        category:<select id="category">
          <option value="one">one</option>
          <option value="two">two</option>
          <option value="three">three</option>
        </select>
      </div>
    </div>
  </body>
</html> 
```

![在此处输入图像描述](../Images/ca38e61e3b622d08e41f8eb6f8400bbc.png) ![在此处输入图像描述](../Images/4624e325524bdc939bae623bcb337e75.png) ![在此处输入图像描述](../Images/939589bc7bf5a24df5d4991a3d901276.png)

# jquery - 如何为 Ipad 创建一个始终浮动在顶部的 div 而没有问题？

> ID：13584456
> 
> 赞同：0
> 
> 时间：2012-11-27T12:39:54.607
> 
> 标签：jquery, html, css, ipad

我尝试使用**position fixed**，并在 Ipad 4 上进行了测试，非常错误。

1.  在页面上触摸拖动时，位置固定的 div 有时**可以向下拖动**。
2.  在放大/缩小时，div**位置疯狂**了一秒钟。
3.  当页面快速向下滚动时，div**闪烁并可怕地摇晃**
4.  jquery 滚动动画性能极差，造成口吃

我的第二次尝试是在#container div 中制作内容并将固定对象（实际上是一个菜单）放在容器外，让#container overflow-y:scroll 并隐藏正文溢出。在 Ipad 4 上测试，问题是：

1.  势头停止了。这意味着当触摸滚动时，页面移动会在用户手指离开时立即停止，通常在用户手指离开后它应该能够滑动一点。
2.  我试图把 webkit-overflow-scrolling:touch; 对于#container，现在在ipad上它可以正常滑动，但在macbook firefox浏览器上，滚动被锁定，页面根本无法移动。
3.  如果我同时放置overflow-y 和webkit-overflow-scrolling:touch，ipad 将无法工作，但firefox 会再次工作。

关于为 Ipad 创建一个始终浮动在顶部的 div 没有问题的任何建议？我认为这应该是一个常见的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:43:47.593

我已成功将容器置于`-webkit-overflow-scrolling:touch`您声称无法正常工作的模式。

再试一次：

```
#container {
  overflow:scroll;
  -webkit-overflow-scrolling:touch;
  -webkit-backface-visibility:hidden;
  -webkit-transform:translateZ(0px);
} 
```

# drupal - Drupal 新主题创建

> ID：13584458
> 
> 赞同：-2
> 
> 时间：2012-11-27T12:40:06.137
> 
> 标签：drupal, drupal-7, drupal-theming

我是drupal的新手。我创建了一个新的 drupal 主题。我的主题影响了 drupal 页面。如果我单击添加内容页面，内容页面未格式化。我无法在我的新主题中添加内容。在这里我粘贴了页面--front.tpl.php 文件。

```
 <div id="wrapper">
              <header id="header">
                <div class="section clearfix">
                <div class="logo_left">
                    <?php if ($logo): ?>
                        <a href="<?php print $front_page; ?>" title="<?php print t('Home'); ?>" rel="home" id="logo">
                            <img src="<?php print $logo; ?>" alt="<?php print t('Home'); ?>" />
                         </a>
                    <?php endif; ?>
               </div>
               <nav class="logo_right"><?php print render($page['header']);?></nav>

              </div></header> <!-- /.section, /#header -->  

                <div id="menu">
                    <!--ul>
                         <li><a href="#">About</a></li>
                         <li><a href="#">Service</a></li>
                         <li><a href="#">Client</a></li>
                         <li><a href="#">Contact</a></li>
                    </ul-->

                    <?php print render($page['header_menus']); ?>

                </div>

                    <div id="content">
                            <div id="leftcontent">
                                     <div id="flash">

                                  </div>
                    <div id="leftcontent1" >
                           <div class="rightcontentheader"> <h2>CLIENT REPORTING</h2></div>
                        <?php print render($page['block_one']); ?>      
                    </div>
                    <div id="leftcontent2">
                     <div class="rightcontentheader">  <h2>AUTOMATED MARKETING</h2></div>
                        <?php print render($page['block_two']); ?>      
                    </div>  

                            </div>

                            <div id="rightcontent">
                                        <div id="rightconent1">
                                          <div class="rightcontentheader"> <h2>REAL ROI IMPACT</h2></div>
                                                <?php print render($page['galery_right']); ?>       
                                         </div>
                                     <div id="rightconent2">
                                          <div class="rightcontentheader"><h2>LATEST NEWS</h2></div>
                                                <?php print render($page['block_three']); ?>        

                                     </div>
                            </div>
                    </div>
     <div id="footer">
     </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:38:01.300

您将需要一个名为`page.tpl.php`. 在那里你可以定义你的布局。如果没有找到该文件，drupal 将回退到它的默认主题。（未格式化但包括所有内容）。

在[drupal 站点上](http://api.drupal.org/api/drupal/modules!block!tests!themes!block_test_theme!page.tpl.php/7)，您可以找到此默认`page.tpl.php`文件。我建议您从那里开始编辑，保留所有 php 变量。删除变量会导致部分页面未加载。

**更新** 抱歉，该链接适用于 Drupal 5，也许您可​​以更好地使用随附模板之一的文件。

**更新 2** 更新了 Drupal 7 的链接。您必须单击评论正上方的“查看源代码”按钮

# c# - 在 C# 中验证数据网格

> ID：13584459
> 
> 赞同：2
> 
> 时间：2012-11-27T12:40:08.257
> 
> 标签：c#, validation, datagridview

我正在寻找验证数据网格单元格，以便它检查以确保用户输入的值是 <> 到 100

```
private void InsertCostSpilt () 
    {
        {
            try 
            {
                string AssetNumberV = txtNumber.Text;
                string DeptV = dgvAssetCost.Rows[dgvAssetCost.CurrentRow.Index].Cells["DEPT"].Value.ToString(); // Gets values of the department cell
                string CCV = dgvAssetCost.Rows[dgvAssetCost.CurrentRow.Index].Cells["CC"].Value.ToString();     // Gets values of the Cost centre cell 
                string PerCentV = dgvAssetCost.Rows[dgvAssetCost.CurrentRow.Index].Cells["PER_CENT"].Value.ToString(); // Gets Values of the Precentage cell 

                SQLMETHODS.InsertCostSpilt(AssetNumberV, DeptV, CCV, PerCentV); // SQL insert methods, for insering new cost spilts 

                MessageBox.Show("Cost Spilt details have been successfully entered.", "Success!"); // Success Messagebox 
            }

            catch (Exception ex)
            {
                MessageBox.Show(" Error submitting Cost Spilt details into entry table. processed with error:" + ex.Message); // Error Messagebox 
            }
        }       
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:09:13.893

你可以试试这个技巧

```
private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
        {
            if (dataGridView1.IsCurrentCellDirty)
                if (e.ColumnIndex == 0)
                {
                    if (int.Parse(dataGridView1[e.ColumnIndex, e.RowIndex].EditedFormattedValue.ToString()) != 100)
                    {
                        e.Cancel = true;
                        MessageBox.Show("The inputed is not 100%. Please check. Press Esc to cancel change.");
                    }
                    else
                    {
                        //Successcully entered
                    }
                }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:54:51.333

您可以尝试对 CellValueChanged 事件进行验证。

```
private void dgvAssetCost_CellValueChanged(object sender, DataGridViewCellEventArgs e)
        {
            int percentColumnIndex = 2; //This will represent the column index of the column you want to check.
            int comparisonValue = 100;

                try
                {
                    if (e.ColumnIndex == PercentColumnIndex)
                    {
                        //Perform your check in here.
                        if (Convert.ToInt32(dgvAssetCost.Rows[e.RowIndex].Cells[e.ColumnIndex].Value) != comparisonValue)
                        {
                            //Do nothing or perform an acrtion when their value is correct.
                            SQLMETHODS.InsertCostSpilt(AssetNumberV, DeptV, CCV, PerCentV); // SQL insert methods, for insering new cost spilts 

                            MessageBox.Show("Cost Spilt details have been successfully entered.", "Success!"); // Success Messagebox 
                        }
                        else
                        {
                            //Do something to alert user that their input is incorrect.
                            MessageBox.Show("Cost Spilt details have not been successfully entered!", "Unsuccessful!"); // Success Messagebox 
                        }
                    }
                }
                catch(Exception ex)
                {
                     MessageBox.Show(" Error submitting Cost Spilt details into entry table. processed with error:" + ex.Message); // Error Messagebox 
                }
            }
        } 
```

# redis - Redis排序集，获取所有分数小于x的成员

> ID：13584466
> 
> 赞同：4
> 
> 时间：2012-11-27T12:40:30.000
> 
> 标签：redis

在 Redis 中，如何获取分数小于 x 的所有成员？执行该任务的时间复杂度是多少？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T13:49:02.880

您可以使用[ZRANGEBYSCORE](http://redis.io/commands/zrangebyscore) redis 命令。

例如分数小于4的成员

```
zadd myset 1 "one"
zadd myset 2 "two"
zadd myset 3 "three"
zadd myset 5 "five"
zadd myset 6 "six"

ZRANGEBYSCORE myset -inf 4 
```

结果：

```
1) "one"
2) "two"
3) "three" 
```

也适用于分数大于 4

```
ZRANGEBYSCORE myset 4 +inf 
```

结果：

```
1) "five"
2) "six" 
```

关于复杂性，由于 redis 文档，它是 O(log(N)+M)

编辑：第二个例子

假设我们有一个在线游戏的记分牌，我们将它存储在 redis 中的一个排序集中。以下命令创建此测试

```
zadd scoreboard 101 "John" 333 "Mary" 323 "Nick" 900 "Steve" 901 "Sam" 333 "Mike" 
```

有资格进入下一轮的玩家是得分低于 330 的玩家。要找到这些玩家，我们运行以下命令。

```
ZRANGEBYSCORE scoreboard -inf 330 
```

这将导致 2 名玩家（约翰和尼克）

```
1) "John"
2) "Nick" 
```

为了进一步解释这个命令： ZRANGEBYSCORE：redis 命令，检查文档记分牌：我创建的排序集 -inf：是我的命令的最低价格 330：我的命令的最高价格

它的作用是找到从-infinite到330这个范围内的所有成员，我理解为330及以下的所有成员。

我希望我有所帮助:)

# jquery-mobile - jQuery 代码仅适用于 jQuery Mobile 中的第一页加载

> ID：13584468
> 
> 赞同：0
> 
> 时间：2012-11-27T12:40:42.950
> 
> 标签：jquery-mobile

我在 jQuery Mobile 中有以下代码。此代码在页面首次加载时工作正常，但是如果您导航到此页面，它什么也不做。

```
$('#dontKnowReg').click(function(){
    if($(this).is(':checked')) { 
            $('#dontKnowRegDetails').slideDown();
    } else {
           $('#dontKnowRegDetails').slideUp();
    }
}); 
```

我通过将 .click 更改为 .live 解决了类似的问题，但在这种情况下，这意味着代码根本不起作用（即使我刷新页面）。谢谢

```
$('#dontKnowReg').live('click', function () {
    if($(this).is(':checked')) { 
            $('#dontKnowRegDetails').slideDown();
    } else {
           $('#dontKnowRegDetails').slideUp();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:43:18.607

看来您不能在 jQuery 中使用 dom 就绪。现在它起作用了：

```
//$(document).ready(function() {
$("#mypage").live('pageinit', function() { 
```

[http://forum.jquery.com/topic/how-to-use-pageinit](http://forum.jquery.com/topic/how-to-use-pageinit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:00:34.760

这应该有效：

```
$('#page').live('pagebeforeshow',function(e,data){
    $('#dontKnowReg').unbind();
    $('#dontKnowReg').bind('click', function(e) {
       if($(this).is(':checked')) { 
         $('#dontKnowRegDetails').slideDown();
       } else {
         $('#dontKnowRegDetails').slideUp();
       }
    });
}); 
```

假设#page 是一个可以找到复选框的页面（如果您有更多带有该复选框的页面，请使用： $('#page, #page2, #page3').live('pagebeforeshow'...... ). 每次页面#page 即将显示时，我们将在复选框上绑定一个事件（取消绑定是为了在事件已绑定的情况下取消绑定，这也可以通过事件过滤器来防止，但我这里没有示例）。希望这可以帮助。

[这](http://www.codenothing.com/archives/2009/event-filter/)是有关事件过滤器的一些内容，[这是](https://stackoverflow.com/questions/1515069/jquery-check-if-event-exists-on-element)一个示例，为什么在 jQm 环境中需要它。

您的第二个示例应该在 jQM 环境中更好地工作，您唯一的问题是何时应用它。如果您使用较新的版本，请考虑使用 .on( 而不是 .live(、.bind(、.delegate(

# c++ - 在不同线程的回调中在状态栏上显示消息

> ID：13584476
> 
> 赞同：3
> 
> 时间：2012-11-27T12:41:01.640
> 
> 标签：c++, qt, qthread

我正在尝试在我的应用程序的状态栏上显示一些已连接/已断开连接的消息。它是一个用 C++ 编写的控制台应用程序，带有 Qt GUI。当连接状态发生变化时，连接处理程序会调用一个回调（在一些与 gui 相关的对象中），它会更新 GUI。我可以在我的 QGraphicsScene 上绘图，但是当我尝试使用 QStatusBar 的 showMessage 方法时，有时它会立即崩溃，有时它会一直工作到几次调用（但超时后消息不会消失）。我收到此错误消息：

```
QObject: Cannot create children for a parent that is in a different thread.
(Parent is QStatusBar(0xae55feb0), parent's thread is QThread(0xb3e006f0), current thread is QThread(0xb0c00478)
QObject::startTimer: QTimer can only be used with threads started with QThread
QPixmap: It is not safe to use pixmaps outside the GUI thread 
```

我认为这意味着未从 GUI 线程调用 showMessage。那么如何在状态栏上显示连接状态的变化呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T13:21:54.170

不允许从非 GUI 线程进行直接 GUI 调用。您需要做的是设置信号/插槽连接。在实现连接处理程序的类中创建一个信号，并将其连接到`showMessage()`状态栏的插槽。当您想在状态栏上显示某些内容时，发出信号并传递适当的消息。

# javascript - 使用 javascript 在 html5 画布上拖放图像

> ID：13584479
> 
> 赞同：2
> 
> 时间：2012-11-27T12:41:07.450
> 
> 标签：javascript, drag-and-drop, html5-canvas

[我尝试按照在 HTML5 中拖放画布中](https://stackoverflow.com/questions/4468940/drag-and-drop-canvas-in-html5)回答问题时建议的教程进行操作，但是当我在 Firefox 中加载我的页面时，Firebug 控制台会显示一条错误消息，指出“画布为空”。

它抱怨的文件是我放置用户交互代码的 JS 文件：

```
var canvas;
var ctx;
var x = 75;
var y = 50;
var WIDTH = 400;
var HEIGHT = 300;
var dragok = false;

function rect(x,y,w,h) {
 ctx.beginPath();
 ctx.rect(x,y,w,h);
 ctx.closePath();
 ctx.fill();
}

function clear() {
 ctx.clearRect(0, 0, WIDTH, HEIGHT);
}

function init() {
 canvas = document.getElementById("gameCanvas");
 ctx = canvas.getContext("2d");
 return setInterval(draw, 10);
}

function draw() {
 clear();
 ctx.fillStyle = "#FAF7F8";
 rect(0,0,WIDTH,HEIGHT);
 ctx.fillStyle = "#444444";
 rect(x - 15, y - 15, 30, 30);
}

function myMove(e){
 if (dragok){
  x = e.pageX - canvas.offsetLeft;
  y = e.pageY - canvas.offsetTop;
 }
}

function myDown(e){
 if (e.pageX < x + 15 + canvas.offsetLeft && e.pageX > x - 15 +
 canvas.offsetLeft && e.pageY < y + 15 + canvas.offsetTop &&
 e.pageY > y -15 + canvas.offsetTop){
  x = e.pageX - canvas.offsetLeft;
  y = e.pageY - canvas.offsetTop;
  dragok = true;
  canvas.onmousemove = myMove;
 }
}

function myUp(){
 dragok = false;
 canvas.onmousemove = null; 
}

init();
canvas.onmousedown = myDown;
canvas.onmouseup = myUp; 
```

`init()`主要错误是“canvas is null”，当我展开它时，它在第 22行第 57 行抱怨。第 22`interaction.js()`行是以下行：

```
 ctx = canvas.getContext("2d"); 
```

第 57 行是以下行：

```
init(); 
```

有人可以指出我哪里出错了吗？

干杯。

我的画布所在的 HTML 是这样的：

```
<canvas id="gameCanvas" width="1000" height="500" style="border:1px solid">
    Your browser does not support the canvas element.
    </canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:56:22.633

似乎在`init()`调用您的方法时`canvas`未呈现。
采用

```
window.onload = function() {
  init();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:57:08.893

我在这里测试了您的代码：http: [//jsfiddle.net/agryson/wfxeH/](http://jsfiddle.net/agryson/wfxeH/) 我很确定您可能在画布的 id 中出错了。确保您的 HTML 具有：

```
<canvas id="gameCanvas"></canvas> 
```

# android - Android WebView 禁用自动缩放

> ID：13584480
> 
> 赞同：0
> 
> 时间：2012-11-27T12:41:10.880
> 
> 标签：android, webview

当我单击 Webview 中的输入字段时，是否有可能禁用自动缩放？

我尝试了一些元标记： 但这确实有效。如果我在其中放置元标记，则缩放功能将被禁用。但是没有这个元标记有可能吗？只用 Java 代码？我试过了：（ 更好，但不正确） ``user-scalable=no;initial-scale=1, maximum-scale=1`` ``width`` ``webview.getSettings().setDefaultZoom(ZoomDensity.FAR);`` ``webview.getSettings().setBuiltInZoomControls(false);
webview.getSettings().setSupportZoom(false);``

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:45:01.073

你可以试试这个代码：

```
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' />

<meta name="viewport" content="width=device-width" /> 
```

# android - 空指针异常

> ID：13584482
> 
> 赞同：3
> 
> 时间：2012-11-27T12:41:13.680
> 
> 标签：android

我发布了一个免费的应用程序图像滑块，其中包含针对小孩子的口语。几周前，我收到了第一份崩溃报告。这似乎很少发生（每周一次）。

报告指出：Splash.onCreate() 中的 NullPointerException

Stack tace 显示此消息：

```
java.lang.RuntimeException: Unable to start activity 
java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
    at android.app.ActivityThread.access$600(ActivityThread.java:130)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
    at co.uk.musenuovo.michal.Splash.onCreate(Splash.java:18)
    at android.app.Activity.performCreate(Activity.java:5008)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

我在 spash 活动中的代码（初始屏幕显示图像并播放 5 秒）：

```
import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;

public class Splash extends Activity {

    MediaPlayer ourSong;

    @Override
    protected void onCreate(Bundle ShowSplashPage) {
        // TODO Auto-generated method stub
        super.onCreate(ShowSplashPage);
        setContentView(R.layout.splash);
        ourSong = MediaPlayer.create(Splash.this, R.raw.xylophone_open);
        ourSong.start();
        Thread timer = new Thread() {

            public void run() {
                try{
                    sleep(5000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } finally {
                    Intent openStartingPoint = new Intent("co.uk.musenuovo.michal.STARTINGPOINT");
                    startActivity(openStartingPoint);

                }
            }

        };
        timer.start();

    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        ourSong.release();
        finish();
    }

} 
```

该错误清楚地指出了spash活动中的onstart。这是因为我忘了导入一些库吗？还是我忘了分配什么？我对java很陌生，不知道如何调试并找出问题所在。我读了很多，`NullPointerException`但这似乎是一个模糊的错误。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:49:29.383

可能是 ourSong 变量为空..您需要在使用前检查它

```
ourSong  = MediaPlayer.create(Splash.this, R.raw.xylophone_open);

    if(ourSong  == null) {
        Log.v("LOG", "Create() on MediaPlayer failed.");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T14:27:24.250

您应该始终对来自包的数据进行 nullcheck，包括包本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T12:19:51.093

一个值显然为空，它可能是未启动的变量“ourSong”或您运行该方法的包。为包添加一行如 System.out.println(ourSong) 和/或另一行，并找出哪个变量为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-06T19:10:34.950

看起来`ourSong`是空的。

使用简单检查：

```
if(ourSong != null) {
   ourSong.start();
} 
```

下一次，它不会`ourSong`让你的应用程序崩溃。`null``start()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-22T04:10:51.060

由于这是一个运行时错误，因此您在调试系统时可能不会遇到错误。在导致错误的代码行上查找每个句点 (.) 或左括号 ([)。这些句点/括号之一的左侧必须是空值。该错误将由

```
ourSong = MediaPlayer.create(Splash.this, R.raw.xylophone_open);
ourSong.start(); 
```

我建议您在开始服务之前打印 ourSong 的值。

# objective-c - NSString 大小问题

> ID：13584490
> 
> 赞同：1
> 
> 时间：2012-11-27T12:41:32.293
> 
> 标签：objective-c, ios, memory, nsstring, ios6

我想将文件中的大量字符分配给 NSString。我这样做了。它在 iOS 模拟器中对我来说工作正常。但是在iOS设备中崩溃了。我认为，长度超过了 NSString 内存。我可以意识到 NSString 限制会随着不同的设备和可用内存而改变。我的问题，是否有任何替代方法可以从文件中获取字符串并将其存储在运行时而不会出现内存问题？或如何检查 NSString 的可用长度？

这是我的代码。我在 NSString 中附加解析的字符串

```
 Str=[Str stringByAppendingString:TmpStr]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:09:25.550

您可能想确认它实际上是内存问题并处理内存不足的情况。有关如何做到这一点，请参阅此 SO 帖子： [iPhone - 如何处理内存不足的情况](https://stackoverflow.com/questions/8961527/iphone-how-to-deal-with-low-memory-conditions)

如果您尝试一次将书籍内容加载到 NSString 中，则可能会在内存受限的设备上遇到内存不足的情况。流允许您一次读取文件的一部分，并且仅将文件的当前部分保存在内存中。即使您可以成功地完全加载一些书籍，它也会比应用程序需要的速度更慢并且仍然消耗更多的内存 - 这将使您的应用程序成为第一个在低内存条件下被标记的应用程序。

查看[Apple 的 Stream Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Articles/CocoaStreamsOverview.html)

从该指南：

> Cocoa 包含三个与流相关的类：NSStream、NSInputStream 和 NSOutputStream。NSStream 是一个抽象类，它定义了所有流对象的基本接口和属性。NSInputStream 和 NSOutputStream 是 NSStream 的子类，实现默认的输入流和输出流行为。您可以为位于内存中或写入文件或 C 缓冲区的流数据创建 NSOutputStream 实例；您可以**为从 NSData 对象或文件读取的流数据创建 NSInputStream 实例**。

编辑：在您澄清您正在从 XML 加载的评论中。你仍然有同样的基本问题，你试图一次将某种“书”的大量内容加载到内存中。您在解析 xml 时附加了 tmp 字符串，因此效果是相同的。因此，您必须找到一种方法来逐步加载所需的书籍部分。幸运的是，您可以告诉 NSXMLParser 使用流。

这可能会有所帮助： [使用 NSXMLParser initWithStream: no parser delegate methods received](https://stackoverflow.com/questions/10777604/using-nsxmlparser-initwithstream-no-parser-delegate-methods-received)

我也刚刚发现这个可能有帮助的主题的帖子：[Objective-C: Reading a file line by line](https://stackoverflow.com/questions/1044334/objective-c-reading-a-file-line-by-line)

不确定您的应用程序中的详细信息，但您可以流式传输到您需要的当前数据（以及两侧的几页），或者您甚至可以将内容流式传输并分解为磁盘上某些临时文件中的“页面”作为排序的“页面缓存”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:52:48.223

当您的应用程序崩溃时，您会分享控制台日志吗？尽管我认为这不是真正的问题，但问题有所不同。同时，您可以尝试使用数据库进行存储。并且，如果可能，请显示您尝试分配字符串的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:27:01.007

使用 NSMutableString 代替 NSString。这可能会帮助你！

# javascript - 绑定ember生成的elementId，Ember+Bootstrap

> ID：13584492
> 
> 赞同：0
> 
> 时间：2012-11-27T12:41:37.370
> 
> 标签：javascript, twitter-bootstrap, ember.js

我正在尝试使用 我找不到绑定视图 ID、**collapse.handlebars的方法来实现**[Bootstrap Collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)（本节末尾的**简单可折叠）**`Ember.View`

 **```
<button type="button" class="btn btn-danger" data-toggle="collapse" {{bindAttr data-target="view.contentId"}}>
  simple collapsible
</button>

{{view view.collapseContentView class="collapse in"}} 
```

**我的观点：**

```
App.CollapseView = Ember.View.extend({

  templateName: 'collapse',

  collapseContentView: Ember.View.extend({
    template: Ember.Handlebars.compile("Collapse body text")
  }),

  contentId: function(){
    return "#"+this.get('collapseContentView.elementId')
  }.property()

}) 
```

我不想手动设置 id 而是想使用 ember 生成的，有什么原因这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:39:13.970

`collapseContentView`是一个视图类 ( ) 并且在实例化它之前`extend`不会有( )。`elementId``create`

在您的模板中，当您这样做时`{{view view.collapseContentView}}`，将创建视图的一个新实例，但它不会更改 的值`view.collapseContentView`，它仍然是一个类，因此`view.collapseContentView.elementId`没有意义。

我建议使用[Ember.ContainerView](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/views/container_view.js)，这是一种以编程方式控制视图的好方法。这是使用容器视图处理两个视图之间的事件的示例[http://www.emberplay.com#/workspace/1140286638](http://www.emberplay.com#/workspace/1140286638)。**

# php - jQuery 复选框表行突出显示不适用于 AJAX

> ID：13584495
> 
> 赞同：0
> 
> 时间：2012-11-27T12:41:49.983
> 
> 标签：php, jquery, ajax

我有一个功能使用网站（不供公众使用，只是一个提供达到目的的方法的网站），其中我有一个表，通过对我的数据库的 AJAX 调用每 5 秒填充/更新一次。

我想要发生的是，当我单击一个复选框（位于我表的一个单元格中）时，它会向该行添加一个类。除了它只是不喜欢数据来自 AJAX 的事实，我尝试在其中放入一个示例静态表，并且效果很好，但是与 AJAX 表相同的信息什么也没做。

我检查了[这个链接](https://stackoverflow.com/questions/9344306/jquery-click-doesnt-work-on-ajax-generated-content)，它也没有响应我的操作，我在下面提供的 JS 代码是我一直在使用的在静态表上工作的代码

JS/AJAX

```
<script>
function getMessage(){
    var xmlhttp;
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function(){
       if(xmlhttp.readyState==4 && xmlhttp.status==200){
       var res = xmlhttp.responseText;
         $('#message tr:first').after(res);
       }
    }
    xmlhttp.open("GET","ajax/message.php",true);
    xmlhttp.send();
};
</script> 
```

我一直用来突出显示的 JS 代码

```
$(document).ready(function() {
  $('#lectern_message tr')
    .filter(':has(:checkbox:checked)')
    .addClass('selected')
    .end()
  .click(function(event) {
    $(this).toggleClass('viewing');
    if (event.target.type !== 'checkbox') {
      $(':checkbox', this).attr('checked', function() {
        return !this.checked;
      });
    }
  });
}); 
```

通过 AJAX 的示例表

```
<table id="message" cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <th>Speaker</th>
      <th>Question</th>
      <th>Time</th>
      <th>View</th>
    </tr>
      <td class="name">Mr A</td>
      <td class="message">Hi</td>
      <td class="date">11:14:12</td>
      <td class="view"><input type="checkbox" value="no"></td>
    </tr>
    <tr>
      <td class="name">Mr B</td>
      <td class="message">Hello</td>
      <td class="date">10:32:36</td>
      <td class="view"><input type="checkbox" value="no"></td>
    </tr>
    <tr>
      <td class="name">Mr C</td>
      <td class="message">Question</td>
      <td class="date">10:32:18</td>
      <td class="view"><input type="checkbox" value="no"></td>
    </tr>
    <tr>
      <td class="name">Mr D</td>
      <td class="message">Hi</td>
      <td class="date">10:30:53</td>
      <td class="view"><input type="checkbox" value="no"></td>
    </tr>
  </tbody>
</table> 
```

很抱歉有大量代码，以为我会提供关键部分，提到的 message.php 文件只是从我的数据库中检索所有记录的调用，但这部分工作正常。如果有人可以帮我一把，这将是一个巨大的帮助，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:47:31.383

`click()`将绑定到加载时所有存在的元素。请注意，如果您想使用 click() 动态添加元素，则必须使用 jQuery 的 live() 或 on() 方法...所以您必须将您的代码更改为

```
$(document).ready(function() {
  $('#lectern_message tr')
    .filter(':has(:checkbox:checked)')
    .addClass('selected')
    .end()
  .live('click', function(event) {
    $(this).toggleClass('viewing');
    if (event.target.type !== 'checkbox') {
      $(':checkbox', this).attr('checked', function() {
        return !this.checked;
      });
    }
  });
}); 
```

有关更多示例，请参见[此处](http://api.jquery.com/live/)

# c# - 会话还是 Cookie？最常用

> ID：13584497
> 
> 赞同：0
> 
> 时间：2012-11-27T12:42:05.320
> 
> 标签：c#, session, cookies

我想存储一些数据以在下一页使用它然后我将它插入到数据库中

```
Trip.TripID
Trip.BookingDate
Trip.Adult
Trip.Chile 
```

并计算出多少次用于此的对象是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:45:19.400

如果它是一个小尺寸的对象，那么您可以将它存储在会话中。您唯一应该关心的是会话是在服务器端维护的。

您可以将对象存储在视图中。

```
Session["TripObject"] = TripObject; 
```

并将其取回。

```
Trip sessionTripObject = (Trip) Session["TripObject"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:46:45.163

会话不止一次地咬我。

IMO 客户端状态不属于服务器，而不属于数据库（特别是如果您需要扩展到多个服务器，在这种情况下会话将失败，您需要使用数据库/会话将其关闭无论如何服务器）。

鉴于您几乎肯定已经在使用 cookie 来让您的用户保持登录状态，您可以轻松地存储另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:11:51.467

在会话中存储短时间值是对服务器内存的浪费。您可以在第二页检索时释放它，但¿如果用户关闭浏览器会发生什么？这些值一直在浪费内存，直到会话超时，在常见情况下大约需要 30 分钟。

正如 activwerx 所说，Cookie 可能会被禁用，如果数据是危险的，则必须对其进行加密。

将第一个页面中的公共属性与行程列表一起使用，使用 Page.PreviousPage 重定向和检索行程列表。

基本代码：

从源页面获取公共属性值 在源页面上，创建一个或多个公共属性并保存页面。

```
Public ReadOnly Property CurrentCity() As String
    Get
        Return textCity.Text
    End Get
End Property
public String CurrentCity
{
    get
    {
        return textCity.Text;
    }
} 
```

注意 主要为公开跨页发布值而创建的源页面上的属性通常是只读属性。虽然源页面可以包含公共读/写属性，但从目标页面属性设置源页面属性通常没有任何意义，因为该值不会被持久化。

在目标页面上，添加`@ PreviousPageType`指向源页面的页面指令。

以下代码示例显示了引用名为 SourcePage.aspx 的源页面的 PreviousPageType 指令

```
<%@ PreviousPageType VirtualPath="~/SourcePage.aspx" %> 
```

PreviousPageType 指令使页面的 PreviousPage 属性键入到源页面类。

在目标页面代码中，使用 PreviousPage 属性的强类型成员来读取源代码属性。

```
Label1.Text = PreviousPage.CurrentCity; 
```

适用于 TargetPage 的帖子

源页面.aspx

```
<asp:Button 
  ID="Button1" 
  PostBackUrl="~/TargetPage.aspx"
  runat="server"
  Text="Submit" /> 
```

和`Server.Transfer(targetPage)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:45:55.850

您在会话和 cookie 之间的决定涉及很多事情，但是对于仅在“单个会话”中的页面之间需要的小块数据，最好使用会话。

如果您想要持久的一般数据，如果您使用 cookie，则更好，但请注意，您应该始终考虑在 cookie 中丢失数据的可能性

# java - Why am I getting a NullPointerException when fetching values from Futures?

> ID：13584499
> 
> 赞同：3
> 
> 时间：2012-11-27T12:42:21.763
> 
> 标签：java, nullpointerexception, executorservice, callable

I'm using and `ExecutorService` to concurrently run some `Callables`. Here's a simplified version of my code:

```
ArrayList<Book> objResults = new ArrayList<Book>();
ExecutorService esrExecutor = Executors.newFixedThreadPool(2);
Set<Callable<ArrayList<Book>>> setCallables = new HashSet<Callable<ArrayList<Book>>>();

setCallables.add(new Callable<ArrayList<Book>>() {

    public ArrayList<Book> call() throws Exception {    
        ArrayList<Book> objAmazonResults = new ArrayList<Book>();

        try {    
            Amazon objAmazon = new Amazon();
            objAmazonResults = objAmazon.doSearch(strQuery);    
        } catch (Exception e) {
            e.printStackTrace();
        }    
        return objAmazonResults;    
    }

});

List<Future<ArrayList<Book>>> lstFutures;
try {
    lstFutures = esrExecutor.invokeAll(setCallables);

    for(Future<ArrayList<Book>> futFuture : lstFutures){
        if (futFuture.get().isEmpty() == false) //NullPointerException occurs here
            objResults.addAll(futFuture.get());
    }
} catch (InterruptedException e) {
    e.printStackTrace();
} catch (ExecutionException e) {
    e.printStackTrace();
}

esrExecutor.shutdown(); 
```

I get a `NullPointerException` on this bit of code `if (futFuture.get().isEmpty() == false)`. I can't seem to figure out why or how this bit of code can possibly be null.

If you look at my `Callable` you'll see that I'm trapping all exceptions and simply printing the stacktrace and I always return `new ArrayList<Book>()`.

I'm not much for helping other debug my code soup on SO but sometimes everyone hits a roadblock but this kind of exceptions has taught me one thing — when chaining methods together, it's always harder to debug.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:50:14.963

May be `objAmazon.doSearch(strQuery)` returns null? Insert a check for this into the `Callable`.

The `Future` itself should never be null, and `Future.get()` will not return null, if the computation terminated with an exception (so catching all exceptions inside the `Callable` is not necessary).

# asp.net - 如何在 ASP.NET 中将 Visual Studio 图表控件 3.5 与 SQL Server 一起使用？

> ID：13584500
> 
> 赞同：2
> 
> 时间：2012-11-27T12:42:21.330
> 
> 标签：asp.net, microsoft-chart-controls

我正在使用 Visual Studio 3.5 图表控件：

```
<asp:Chart ID="Chart1" runat="server">
   <Series>
      <asp:Series Name="Series1" ChartArea="ChartArea1" ChartType="Bar">
      </asp:Series>
   </Series>
   <ChartAreas>
      <asp:ChartArea Name="ChartArea1">
      </asp:ChartArea>
   </ChartAreas>
</asp:Chart> 
```

我需要在此图表中显示数据，我将从 SQL Server 中检索到我想要检索和显示的内容：

```
select PONumber, CompletionTimeMonths, CreatedOn 
from PurchaseOrder; 
```

现在这是我第一次使用图表控件；我怎样才能显示这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:19:27.610

回答我自己的问题......我这样做了，至少在开始时我得到了一个简单的看起来不错的图表：

这是 .aspx 设计部分：

```
<asp:Chart ID="Chart1" runat="server" Width="920px" Height="130px" >
        <Series>
            <asp:Series Name="Series1" ChartType="Bar">
            </asp:Series>
        </Series>
        <ChartAreas>
            <asp:ChartArea Name="ChartArea1" BackColor="Yellow">
                <AxisY Title="Duration" Interval="Auto">
                </AxisY>
                <AxisX Title="PO Number">
                </AxisX>
                <%--<Area3DStyle Enable3D="true" />--%>
            </asp:ChartArea>
        </ChartAreas> 
```

这是 .cs 文件中的代码部分：

```
 public void fill()
{
    con.Open();
    SqlCommand cmd = new SqlCommand("select PONumber,CompletionTimeDays,CreatedOn from PurchaseOrder");
    cmd.Connection = con;
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    DataTable dt = new DataTable();
    da.Fill(dt);
    Chart1.DataSource = dt;
    Chart1.Series["Series1"].XValueMember = "PONumber";
    Chart1.Series["Series1"].YValueMembers = "CompletionTimeDays";
    //Chart1.Series["Series1"]["DrawingStyle"] = "Emboss";
    Chart1.DataBind();
    con.Close();
} 
```

希望这会帮助谁像我一样开始这样做

# javascript - 从对象中删除行

> ID：13584501
> 
> 赞同：0
> 
> 时间：2012-11-27T12:42:22.737
> 
> 标签：javascript, jquery

我有一个包含数组的对象：

```
<script type="text/javascript">
    var statusData = {
        Status: []
    };

    var uniqueCounter = 1

    function createJsonFmtData() {      

        // Used as unique id at client side 
        var uniqueCounter =uniqueCounter + 1;

        statusData.Status.push({
            "Name": Name,
            "Time": Time,
            "Email": Mail,
            "Name": Type,
            "Value": Value,
            "uniqueId": uniqueCounter
        });
    }

    function DelNewlyCreStatusRow(rowId) {
        // First pop elment from json data
        var val;
        for (val = 0; val < statusData.Status.length; ++val) {
            if (statusData.Status[val].uniqueId == rowId) {
                delete statusData.Status[val];
                break;
            }
        }
</script> 
```

当尝试调用`DelNewlyCreStatusRow`它时会出现错误：

> 类型错误：statusData.Status[val] 未定义

我无法在这里弄清楚，因为我已将其声明为全球性的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:00:03.887

这是因为您试图从数组中错误地删除。`delete`运算符在数组上很有趣。它将元素替换为`undefined`. 看一下这个：

```
>>> var A = [1, 2, 3];
>>> delete a[1];
>>> A;
[1, undefined, 3]; 
```

`DelNewlyCreStatusRow`因此多次调用将引发异常，因为`statusData.Status[val].uniqueId`无法评估（`statusData.Status[val]`is `undefined`）。

要解决此问题，请使用此代码而不是`delete`：

```
var val;
for (val = 0; val < statusData.Status.length; ++val) {
    if (statusData.Status[val].uniqueId == rowId) {
        statusData.Status.splice( val, 1 );
        break;
    }
} 
```

请注意，它`splice`修改了一个数组，因此如果您想一次进行多次删除，那么您必须将`for`循环替换为`while`( 并稍微重构代码 )。`break`由于声明，这里不需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:59:56.687

你应该更换

```
delete statusData.Status[val]; 
```

和

```
statusData.Status.splice(val,1);
val -= 1; 
```

删除数组中的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:12:33.747

您在函数内的第二个 var 声明中在代码中犯了错误。var uniqueCounter = uniqueCounter + 1 => NAN + 1。第二次不需要 var，所以它只是 uniqueCounter = uniqueCounter + 1 => 2。

然后在我的案例中删除工作正常。

```
<script type="text/javascript">

        var statusData = {
            Status : []
        };

        var uniqueCounter = 1

        function createJsonFmtData() {

            var statusName = $('#<%= ddlStatus.ClientID %> option:selected').text();
            var dateTime = $("#body_ctl04_ctl02").val();
            var forceMail = ($("#chkForceMail").is(':checked')) ? 1 : 0;
            var noteType = $('#divTrackId').text();
            var dataValue = $("#<%=txtTrackId.ClientID %>").val();
            var curLogedUserName = $("#<%=curLoginUserName.ClientID %>").val();

            // Used as unique id at client side
            uniqueCounter = uniqueCounter + 1;

            statusData.Status.push({

                "statusName" : statusName,
                "dateTime" : dateTime,
                "forceEmail" : forceMail,
                "typeName" : noteType,
                "dataValue" : dataValue,
                "uniqueId" : uniqueCounter
            });
        }

        function DelNewlyCreStatusRow(rowId) {

            // First pop elment from json data
            var val;
            for ( val = 0; val < statusData.Status.length; ++val) {
                if (statusData.Status[val].uniqueId == rowId) {
                    console.log(typeof(statusData.Status[val]));
                    delete statusData.Status[val];
                    break;
                }
            }
        }
        createJsonFmtData();
        console.log(statusData);
        DelNewlyCreStatusRow(2);
        console.log(statusData);
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T13:04:53.280

函数 DelNewlyCreStatusRow 缺少结束 '}'

```
function DelNewlyCreStatusRow(rowId) {
    // First pop elment from json data
    var val;
    for (val = 0; val < statusData.Status.length; ++val) {
        if (statusData.Status[val].uniqueId == rowId) {
            delete statusData.Status[val];
            break;
        }
    }
} 
```

# php - 尝试仅替换 Php 中字符串的第一个实例，而是全部替换

> ID：13584502
> 
> 赞同：1
> 
> 时间：2012-11-27T12:42:24.147
> 
> 标签：php, yii

所以我有以下字符串。

```
 John Hotmail(johnhotmail@hotmail.com) , John Hotmail(johnhotmail@hotmail.com) , 
```

我正在尝试仅替换上述 John Hotmail 的第一个实例，但是无论我尝试什么，它都会替换两者。我已经在论坛中寻找答案，并且我已经尝试了所有解决方案。我尝试了以下方法。

```
 $string= "/John Hotmail(johnhotmail@hotmail.com) ,/";
   //$string= "John Hotmail(johnhotmail@hotmail.com) ,";
    $count = 1;
    $descriptionMessage = $name . ' said hello' . $model->Name . ' to the following people:' . $listParticipants;
    $descriptionMessage = preg_replace($string, "", $descriptionMessage,$count); 
```

我用 str_replace 尝试过类似的事情。我已将字符串消息更改为包含 / 以及其中没有 /。我已将 count 设置为 0，在这种情况下它不会删除任何内容，并且我已将其设置为 1，如上所述，这会删除两个 John Hotmail 字符串。我输入的所有设置都没有删除第一次出现，但是我不知道为什么。如果有帮助，我目前正在 Yii 框架的控制器类中使用此代码。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:52:40.250

这将替换第一次出现：

```
$string = 'John Hotmail(johnhotmail@hotmail.com) ,';
$descriptionMessage = 'John Hotmail(johnhotmail@hotmail.com) , John Hotmail(johnhotmail@hotmail.com) ,';

$position = strpos($descriptionMessage, $string);
if ($position !== false) {
    $descriptionMessage = substr_replace($descriptionMessage, '', $position , strlen($string));
} 
```

# reporting-services - 显示数据集名称

> ID：13584503
> 
> 赞同：1
> 
> 时间：2012-11-27T12:42:30.780
> 
> 标签：reporting-services

我编写了一个复杂的存储过程，它根据它收到的参数创建表。

我的 SSRS 报告有 7 个表需要从此存储过程中填充，因此我有 7 个数据集，每个数据集执行相同的存储过程但具有不同的参数，以便它可以填充报告中的每个表。

我的问题是，即使对我来说，我也不知道这听起来很愚蠢，我需要在由 SP 填充的 7 个表中的每一个上，显示用于该特定表的 DataSet 名称。

有谁知道如何显示我的报告中每个 tablix 正在使用的数据集的数据集名称？

# prototype - OpenLayers 自定义单位度量

> ID：13584505
> 
> 赞同：0
> 
> 时间：2012-11-27T12:42:33.173
> 
> 标签：prototype, openlayers

我正在尝试在 OpenLayers 2.12 中添加自定义测量单位。OpenLayers 中默认可用的只有：

```
displaySystemUnits: {
  geographic: ['dd'],
  english: ['mi', 'ft', 'in'],
  metric: ['km', 'm'],
} 
```

我希望能够扩展它并添加一个自定义的，仅以英里为单位。例如，如果测量值小于 1 英里，比如半英里，则将其显示为 0.5。

我不想通过添加以下内容来编辑实际的 OpenLayers Measurement.js，因为它对于未来的升级是不可扩展的：

```
myCustomUnits: ['mi', 'mi'] 
```

有什么想法可以扩展 OpenLayers 来执行上述操作吗？

谢谢迪米特里奥斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:51:02.823

实际上已经找到了使用以下代码覆盖 displaySystemUnits 的方法：

```
OpenLayers.Control.Measure.prototype.displaySystemUnits = {
 geographic: ['dd'],
 english: ['mi', 'ft', 'in'],
 metric: ['km', 'm'],
 myCustomUnits: ['mi', 'mi']
}; 
```

# asp.net-web-api - 我如何返回 Json Result + Web api + 验证模型 + actionfilters +OnActionExecuting 方法

> ID：13584508
> 
> 赞同：0
> 
> 时间：2012-11-27T12:42:38.767
> 
> 标签：asp.net-web-api, action-filter, jsonresult

```
string message = string.Empty;

public override void OnActionExecuting(HttpActionContext actionContext)
{
    var modelState = actionContext.ModelState;

    if (!modelState.IsValid)
        actionContext.Response = actionContext.Request.CreateErrorResponse(HttpStatusCode.BadRequest, modelState);

    foreach (var key in modelState.Keys)
    {
        var state = modelState[key];

        if (state.Errors.Any())
        {
            message = message + state.Errors.First().ErrorMessage;
        }
    }
} 
```

在这里我想用 Jsonresult 返回消息变量，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:22:35.667

试试这个

```
 public override void OnActionExecuting(HttpActionContext context)
    {
        var modelState = context.ModelState;
        if (!modelState.IsValid)
        {
            var errors = new JObject();
            foreach (var key in modelState.Keys)
            {
                var state = modelState[key];
                if (state.Errors.Any())
                {
                    errors[key] = state.Errors.First().ErrorMessage;
                }
            }

            context.Response = context.Request.CreateResponse<JObject>(HttpStatusCode.BadRequest, errors);
        }
    } 
```

从客户端 ajax 请求中，如果出错，获取 responseText 以处理验证错误消息。

您可能希望根据您要执行的操作来选择 HttpStatusCode，因为

# reporting-services - 从子报表中获取数据到主报表中

> ID：13584509
> 
> 赞同：1
> 
> 时间：2012-11-27T12:42:39.187
> 
> 标签：reporting-services, subreport

我制作了一份主要报告，其中包含一些子报告。最后，我想比较报告不同部分的一些数据，并对从不同部分收到的数字进行一些计算。

有人知道将子报告中的值获取到主报告中的方法吗？最后进行的所有计算（例如聚合）仅参考主要部分的数据集，而其他子报告有自己的数据集，从其他表中获取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:45:59.050

我必须支持@JoaoLeal 的评论，我认为您提出的方法（从主报告中的子报告中检索数据）在技术上是**不可能的**。

但是，还有另一种方法可以实现您想要的（显示子报表中显示的数据的汇总信息）。您可以**封装您的数据集查询**，以便它们可以被主报表重用。有两个主要/基本选项：

*   使用**存储过程**查询数据
*   对数据使用**数据库视图**

您的数据集将非常简单：子报表将选择所有数据。然后，主报告可以有一个数据集查询，从视图/过程中适当地聚合数据，或者也可以检索所有结果并在 SSRS 中进行聚合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T09:45:01.140

我认为在 RDLC 报告中，主报告和子报告之间没有办法共享变量。所以唯一的方法是使用另一个数据集或传递新的变量。希望这会有所帮助...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T08:22:13.290

通过在主窗体上使用不同的数据集，我自己设法实现了我的预期，主窗体还包含子报表的数据。

但我也发现了这种方式（未经测试）：

```
[Reports]![YourReportName]![YourSubReportName]![TheValueFromTheSubReportYouWantToReference] 
```

[在 SQL Server Central 上](http://www.sqlservercentral.com/Forums/Topic834917-1063-1.aspx)对此也有很长的讨论。

# java - 多个包中的log4j访问

> ID：13584511
> 
> 赞同：0
> 
> 时间：2012-11-27T12:42:49.500
> 
> 标签：java, log4j

我有许多包，每个包包含 m 个类。在像 com.logger 这样的包之一中，我实现了一个名为 log.java 的记录器类我们知道该类文件将在不同的文件夹中以包名创建。我在哪里可以包含 log4j.Properties/log4j.xml 文件。请为 Maven 项目指定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:53:36.520

Log4j 在启动时会扫描一些位置来初始化组件。

您应该`src/main/resources`按照如果使用 maven 中的说明放置 log4j 配置文件[，通常您将 log4j.properties 放在 java 或资源下？](https://stackoverflow.com/questions/5132389/if-using-maven-usually-you-put-log4j-properties-under-java-or-resources)

# iphone - Kobold2d - 当我重新启动 xcode 时出现 ARC 问题

> ID：13584512
> 
> 赞同：0
> 
> 时间：2012-11-27T12:42:51.200
> 
> 标签：iphone, xcode, static-libraries, kobold2d

我将 kobold2d libcocosdenshion-ios.a 静态库与我的项目一起添加到我的工作区。一切正常，但我重新启动了 xcode，我得到了很多 ARC 错误！一切正常之前的 30 秒？我不删除代码行。有人有这样的问题吗？发生了什么？

![在此处输入图像描述](../Images/83fd4ebd43c8b2638d34d71bedadf64e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:55:17.997

如果您要链接到包含所需类的二进制文件的 .a 文件，则不需要匹配的 .m 文件。该库加上任何标题应该是您构建自己的应用程序所需的全部。

# c++ - 指针作为成员变量

> ID：13584514
> 
> 赞同：0
> 
> 时间：2012-11-27T12:42:59.413
> 
> 标签：c++, pointers, vector

我想创建一个类，它有几个指向这个类的其他实例的指针。我想创建可以设置相邻单元格的生活游戏。

我遇到的问题是我无法为我的 const 指针成员变量分配引用。

```
class Cell {

            ...
        const Cell* left;
            ...

        void setLeft(const Cell & left) {
        this->left = left;
    }
} 
```

我有想法将所有单元格保存在这样的向量中

```
std::vector<Cell::Cell> cells; 
```

然后像这样访问和设置它们`cells[pos].setLeft(cells[left]);`（pos和left是整数）

我收到以下错误消息。`Can't convert const cell to const cell* in assignment`. 也找不到方法`setLeft`

我来自 java/net 背景，所以也许我犯了一个巨大的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:53:31.240

您正在混淆指针和引用（当您来自 java/net 时，这是可以理解的）。在 C++ 中，有明显的区别：

1.  `Cell x;`, 类的对象（实例）`Cell`
2.  `Cell *x;`, 指向一个实例的指针`Cell`
3.  `Cell &x;`, 对一个实例的引用（“另一个名字”）`Cell`

Java“引用”等同于 C++ 指针。

在你的情况下，有几个问题。首先，`setLeft()`需要获取其参数的地址，如下所示：

```
void setLeft(const Cell & left) {
  this->left = &left;
} 
```

其次，除非类`Cell`是在命名空间中定义的，否则`Cell`向量只能是`std::vector<Cell> cells;`.

然而，更危险的是你的向量包含*静态*分配`Cell`的对象（它的模板参数是类类型，而不是指针）。`std::vector`允许在添加对象时在内存中移动对象，因此一旦发生这种情况，所有指向存储在其中的对象的现有指针都`cells`将变得悬空。您应该做的是将指针存储在向量中：

```
std::vector<Cell*> cells;
cells[pos]->setLeft(*cells[left]); //assuming setLeft() still takes a reference 
```

`std::shared_ptr`实际上，使用智能指针 ( and ) 而不是原始指针可能会更好`std::weak_ptr`，但这是一个单独的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:46:09.753

您的`setLeft`函数正在使用`Cell`by const 引用，并且您正试图将其分配给指向`const Cell`. 您需要将指针分配给指针：

```
void setLeft(const Cell* left) {
    this->left = left;
} 
```

然后你必须给它一个指向 a 的指针`Cell`。例如：

```
Cell a;
Cell b;
a.sefLeft(&b); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T12:46:28.757

在单元格前添加 & 符号[左]。您所做的是将实例分配给指针值。

```
cells[pos].setLeft(&cells[left]); 
```

一般来说，变量之前的 & 给出了这个变量的地址。

编辑：

编辑示例后，应将 & 替换为 *。变量之前的星号运算符为您提供指针中的实例（或引用）。简单地说... :-)

# mysql - 在codeigniter中使用$this->db->e scape时如何防止单引号

> ID：13584516
> 
> 赞同：4
> 
> 时间：2012-11-27T12:43:01.557
> 
> 标签：mysql, codeigniter

我有插入单引号的列。因为`$this->db->query`已经处理了所有特殊字符。但我的问题是我在插入时插入像**ganesh 这样的**数据，只插入 ganesh；缺少单引号后的数据。所以我开始使用`$this->db->escape`，但这会在我的数据中添加单引号，这不是如何防止这种情况所必需的

我的代码

```
$sql="insert into tablename (list_name,list_address) values(?,?)" 
$res=this->db-query($sql,array($name,$add)); 
```

我的错误是在前端。不是后端。我将删除问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T23:26:30.753

在复杂查询的情况下，我发现像这样发送原始查询更容易：

```
$query = "your query";
$result = $this->db->query($query); 
```

在将变量插入查询之前不要忘记转义变量，如下所示：

```
$var = $this->db->escape($var); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T08:54:19.807

如果要使用单引号保存数据，则需要在将数据保存到数据库之前添加斜杠，如下所示：

```
$sql="insert into tablename (list_name,list_address) values(?,?)";
$res=this->db-query($sql,array(addslashes($name), $add)); 
```

然后将其保存到您的数据库中，在执行此操作后，您很可能需要使用`stripslashes()`从数据中删除斜杠，然后再将其输出到浏览器。

# c# - 在 c# 中使用 string.Format 格式化 MAC 地址

> ID：13584519
> 
> 赞同：14
> 
> 时间：2012-11-27T12:43:19.983
> 
> 标签：c#, string

我有一个格式如下的 mac 地址，`0018103AB839`我想将其显示为：`00:18:10:3A:B8:39`

我正在尝试这样做，`string.Format`但我真的找不到确切的语法。

现在我正在尝试这样的事情：

```
 string macaddress = 0018103AB839;
    string newformat = string.Format("{0:00:00:00:00:00:00}", macaddress); 
```

这甚至可能吗？还是我应该使用`string.Insert`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T13:03:25.300

重新格式化字符串以将其显示为 MAC 地址：

```
var macadres = "0018103AB839";

var regex = "(.{2})(.{2})(.{2})(.{2})(.{2})(.{2})";
var replace = "$1:$2:$3:$4:$5:$6";
var newformat = Regex.Replace(macadres, regex, replace);    

// newformat = "00:18:10:3A:B8:39" 
```

如果要验证输入字符串，请使用此正则表达式（感谢 J0HN）：

```
var regex = String.Concat(Enumerable.Repeat("([a-fA-F0-9]{2})", 6)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T13:16:59.280

```
string input = "0018103AB839";

var output = string.Join(":", Enumerable.Range(0, 6)
    .Select(i => input.Substring(i * 2, 2))); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-27T13:05:01.297

假设我们将 Mac 地址存储在一个 long 中。这是如何将它放在格式化的字符串中：

```
ulong lMacAddr = 0x0018103AB839L;
string strMacAddr = String.Format("{0:X2}:{1:X2}:{2:X2}:{3:X2}:{4:X2}:{5:X2}",
    (lMacAddr >> (8 * 5)) & 0xff, 
    (lMacAddr >> (8 * 4)) & 0xff,
    (lMacAddr >> (8 * 3)) & 0xff,
    (lMacAddr >> (8 * 2)) & 0xff,
    (lMacAddr >> (8 * 1)) & 0xff,
    (lMacAddr >> (8 * 0)) & 0xff); 
```

# restlet - 是否可以将 Restlet 配置为使用 BufferedHttpEntity？

> ID：13584523
> 
> 赞同：0
> 
> 时间：2012-11-27T12:43:29.357
> 
> 标签：restlet, apache-httpclient-4.x

`org.apache.commons.httpclient.ProtocolException: Unbuffered entity enclosing request can not be repeated.`将 Apache HTTP 客户端库 4.x 与 Restlet 1.1 一起使用时出现间歇性异常。请求实体的类型为 ，与已知大小相关联，大小在实例化时指定`InputRepresentation`。`ByteArrayInputStream`

`writeRequestBody`异常在类中的方法中引发`org.apache.commons.httpclient.methods.EntityEnclosingMethod`

```
 if ((this.repeatCount > 0) && !requestEntity.isRepeatable()) {
            throw new ProtocolException(
                "Unbuffered entity enclosing request can not be repeated.");
  } 
```

老实说，这个异常的原因尚不清楚（尤其是由于它的间歇性）。但是，一些研究表明，使用 Apache BufferedHttpEntity 来包装请求实体应该会有所帮助。

有没有办法通知 Restlet 在将其请求传递给 Apache 库进行处理时使用 BufferedHttpEntity？问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:06:22.380

如果实体内容流可以重现（重复），ByteArrayInputStream肯定是这样，那么就不需要BufferedHttpEntity。只需确保原始请求实体从 HttpEntity#getContent() 方法返回 InputStream 的新实例，并且 HttpEntity#isRepeatable() 返回 true。

请注意，这`org.apache.commons.httpclient.ProtocolException`是来自较旧的（EOL-ed）版本 3.x。请确保您的应用程序中没有某种版本混淆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:16:35.917

这是与 Apache HTTP 客户端集成的 Restlet 框架连接器的限制。

在 RF 2.0 版中，有一个新的 ClientResource 类，它具有“retryAttempts”和“retryDelay”属性，提供相同的行为，但基于 Restlet 抽象。

# python - 网页设计师的 Django 最省力设置

> ID：13584524
> 
> 赞同：2
> 
> 时间：2012-11-27T12:43:32.430
> 
> 标签：python, django, heroku

在旧世界中，我有一个非常理想的开发设置，可以与网页设计师一起工作。请记住，我们主要做小型/快速项目，所以它是这样工作的：

*   我在服务器上有一个临时站点（Webfaction 或其他）
*   设计师访问该站点并编辑模板和资产以使其满意
*   我定期通过 SSH 将所有内容签入源代码控制，从上游更新文件，解决冲突

它工作得很好，因为设计者不需要学习 git、python、包工具、syncdb、迁移等。而且只有一个，所以我们在 staging 上也没有任何冲突。

现在问题出在 Heroku 下的新世界，这是不可能的。或者是吗？无论如何，我希望您能就适合非技术人员的开发设置提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:05:37.897

使用虚拟内容显示所有可能的 UI 元素、模板等的静态“展示”站点怎么样。设计师可以连接，编辑东西，最后你合并变化。另一种选择是运行完整应用程序的测试服务器（有点像您之前所做的），但可以选择通过 FTP 或设计人员喜欢的任何方式进行连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:37:31.630

为什么不将所有资产存储在 S3 上？

在我看来，它们根本不需要成为应用程序的一部分，而是应用程序引用的外部资源。

# design-patterns - 私有数据类设计模式

> ID：13584526
> 
> 赞同：1
> 
> 时间：2012-11-27T12:43:35.410
> 
> 标签：design-patterns

我有一个与“私有数据类设计模式”相关的问题。

是否可以在“私有数据类设计模式”中同时拥有对数据类的获取和设置访问器。像下面的那个

```
public class CircleData {
    public double Radius { get; set; }
    public Color Color { get; set; }
    public Point Point { get; set; }
}

public class Circle {
    public void Draw(CircleData circleData)
    {
        // Perform the draw operation
    }
} 
```

这里我试图消除方法之间的耦合属性（properties） 这难道是“Private Data”设计模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:27:01.283

正如我在聊天中提到的，我不确定您尝试使用此私有类数据模式所做的事情是否对您有益。

虽然您没有为您的属性明确实现私有后备存储，但从技术上暗示您确实拥有访问私有数据的公共属性，但我相信整个模式的重点是隐藏类的内部信息。

一个更好的例子可能是以下字段/属性：

```
private int _x = 5;
private int _y = 15;

public Point Point { 
    get {
        return new Point(_x, _y);
    }
    set {
        _x = value.X;
        _y = value.Y;
    }
} 
```

但同样，只有在您使用独立于`Point`.

# ssl - 在heroku上使用piggyback ssl时浏览器发出警告是否正常

> ID：13584528
> 
> 赞同：0
> 
> 时间：2012-11-27T12:43:39.577
> 
> 标签：ssl, heroku

这只是一个快速的问题，真正让我自己安心比什么都重要。

通过[https://myapp.herokuapp.com](https://myapp.herokuapp.com)访问 Heroku 上托管的应用程序时，我在 Google Chrome 和 Firefox（但不是 Safari）中收到如下警告：

您请求了一个包含一些未加密信息的加密页面。您在此页面上看到或输入的信息很容易被第三方读取。

我真的不想为 SSL-Endpoint 插件每月支付 20 美元，只是想知道为什么会出现这些警告以及是否有解决方法/如何找到未加密的内容。

我已经尝试过使用和不使用 config.force_ssl = true

有什么建议么？任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:22:12.960

抱歉耽搁了。原来这是来自谷歌地图的请求的问题。据我所知，在我们开始开发后，他们更改了 api 以允许通过 https:// 访问。这只是遵循 google api 页面上记录的新流程的一个案例

# html - 文本放置自动并与其他文本相关

> ID：13584529
> 
> 赞同：0
> 
> 时间：2012-11-27T12:43:41.770
> 
> 标签：html, css, text, positioning

我有一堆里面有内容的 div，我希望文本自动调整！例如，在第一个 div 中，文本的长度和大小可能与其他 div 相比有所不同，我想设置一个 css 规则以确保无论这些属性如何，文本看起来都是结构化的。

**HTML**

```
<div id="#info-1">
<h4>Subtitle</h4>
<h1>Title</h1>
<h3>Subtitle</h3>

</div>

<div id="#info-2">
<h4>Subtitle</h4>
<h1>Title</h1>
<h3>Subtitle</h3>
</div>

<div id="#info-3">
<h4>Subtitle</h4>
<h1>Title</h1>
<h3>Subtitle</h3>
</div> 
```

**CSS**

```
#info-1, #info-2, #info-3{
                           position:absolute;
                           top:0px;
                           margin-top: 75px;
                           margin-left:350px;     
                           float: left
                         }

#info-1 h3, #info-2 h3, #info-3 h3
                                  {
                                   position:absolute; 
                                   top: 105px;
                                   left: 130px;
                                  }

#info-1 h4, #info-2 h4, #info-3 h4
                                  {
                                   position:absolute; 
                                   top:40px; 
                                   left:75px; 
                                  }

#info-1, #info-2, #info-3, #info-4{
                   background-color: lightgrey;     
                   width:300px; height:175px;
                                  }

#info-1 h1, #info-2 h1,#info-3 h1
        {
        position:absolute;top: 55px; left:60px;
        color: white;
        text-transform: uppercase;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:55:48.603

不确定您要在这里实现什么-也许您可以尝试再次解释一下？“结构化”是什么意思？

同时，我会从您的示例的 id 属性中删除哈希值，否则您将根本看不到任何样式。

# javascript - 更新 JavaScript 对象中的数组时，原型会更新。为什么？

> ID：13584531
> 
> 赞同：0
> 
> 时间：2012-11-27T12:43:40.450
> 
> 标签：javascript, prototype

我的代码发生了一些奇怪的事情。我观察到的是这样的：

```
var prototype = {
    property : "",
    array : []
}

var objectArray = [];

function myFunction {
    objectArray[0] = Object.create(prototype);
    objectArray[1] = Object.create(prototype);

    objectArray[0].property = "Hello 1";
    objectArray[0].array.push("Hello 1");
    objectArray[1].property = "Hello 2";
    objectArray[1].array.push("Hello 2");

    // At this point when running the program I get:
    // objectArray[0].property == "Hello 1"
    // objectArray[1].property == "Hello 2";
    // objectArray[1].array == objectArray[1].array == prototype.array
    // == ["Hello 1", "Hello 2"]
} 
```

我想要并且期望的是两个对象的两个单独的数组。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:47:59.433

在 JavaScript 中，对象是通过引用复制的，所以两个`objectArray`对象只是对同一个对象的引用（`prototype`）。您需要使用`new`关键字和构造函数来克隆对象或创建实例以创建单独的对象。

有关如何使用`new`关键字执行此操作的示例：

```
var prototype = function() {
    this.property = "";
    this.array = [];
};

objectArray[0] = new prototype();
objectArray[1] = new prototype(); 
```

你也可以这样做：

```
var prototypeFactory = function() {
    return {
        property: "",
        array: []
    };
};

objectArray[0] = prototypeFactory();
objectArray[1] = prototypeFactory(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:48:00.957

该`prototype`对象与每个对象的存在相同`[[Prototype]]`。当您使用`Object.create()`.

您需要使用赋值，它永远不会遍历原型链。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T16:55:31.577

我想知道您是否没有问自己“为什么它适用于`property`，但不适用于`array`？”。事实是，这两者都不起作用`property`，JavaScript 正在愚弄你。

当对象共享相同的原型时，必须考虑：

*   原型的所有属性都由从该原型继承的对象共享。
*   **您不能分配给原型的属性，只能读取它们**（除非它是访问器属性，但让我们把它放在一边）。

那么这里实际发生了什么：

```
objectArray[0].property = "Hello 1";
objectArray[1].property = "Hello 2"; 
```

是在每个对象上创建一个名为“property”的新属性，而**保持**不变`prototype.property`。该`array`属性的行为不同，因为您没有分配给它，而是访问`prototype.array`并调用`push`它的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T17:11:28.453

不要忘记`Object.create()`它还没有标准化，并且在 IE8 或 FF3.6 中不起作用。克隆对象的一个​​简单解决方法是使用 JSON 对象：

```
function clone(obj) {
  return JSON.parse(JSON.stringify(obj));
} 
```

# php - 有序生成数字

> ID：13584532
> 
> 赞同：-2
> 
> 时间：2012-11-27T12:43:44.770
> 
> 标签：php

我想有序地生成一系列数字。我的意思是与**php中的****rand**函数相反。我用**范围**进行测试，但它只生成数字**数组**，例如 min 1 和 max 3

 ******```
rand(1,3);// 2,1,3 
```

但我想要 1,2,3

php 中的任何内置函数（如**rand**）无需使用任何循环即可获得此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:46:45.690

用于[`range()`](http://php.net/manual/en/function.range.php)生成数字

```
// array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)
foreach (range(0, 12) as $number) {
    echo $number;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:47:00.243

`for`您可以使用循环来实现这一点

```
for ($i = 1; $i <= 3; $i++) {
        echo $i;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:59:32.923

如果我理解你稍微误导性的问题..这可能会做到：

```
$string = implode(', ', range(1,3));
echo $string; 
```

而且看不到循环:)

或作为一个班轮：

```
echo implode(', ', range(1,3)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:49:45.797

`// array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)
foreach (range(0, 12) as $number) {
echo $number;
}` 

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T12:50:21.523

如果您使用的是 php，请查看[range](http://php.net/manual/en/function.range.php)函数******

# c# - 删除 GridView 中的选定项目

> ID：13584541
> 
> 赞同：1
> 
> 时间：2012-11-27T12:44:06.693
> 
> 标签：c#, windows-8

```
IList<object> itemsSelected = MyGrid.SelectedItems;

foreach (object itemSelected in itemsSelected)
{
   MyGrid.SelectedItems.Remove(itemSelected);
} 
```

我尝试从 GridView 中删除选定的项目，但并非所有选定的项目都被删除。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:53:55.270

```
object[] itemsSelected = MyGrid.SelectedItems.ToArray<object>();
        foreach (object item in itemsSelected)
        {
            MyGrid.Items.Remove(item);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:51:40.723

我也有确切的问题。我写了这样的东西，但它并没有删除所有项目，只是其中一些：

```
foreach(var item in MyGridView.SelectedItems)
{
     MyGridView.Items.Remove(item);
} 
```

但是写这个肯定会删除所有你选择的项目：

```
while (YourGridView.SelectedItems.Count != 0)
{
    YourGridView.Items.Remove(YouGridView.SelectedItem);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:20:33.097

当您将 foreach 与 SelectedItems 一起使用时也不例外？当您删除项目时，SelectedItems 数组会被修改，并且 foreach 会引发异常。（虽然我已经尝试过 ListBox 控件）。尝试使用 for-operator 并按索引从最后一个到第一个删除项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T16:22:07.693

根据您在评论中的回答，我假设您正在开发 C# winforms 应用程序。

您实际使用的可能是 a`ListBox`而**不是**a`GridView`吗？

如果是这样，您应该使用[`ClearSelected()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.clearselected.aspx)取消选择`ListBox`.

# c# - 来自转发器控件的 Web 控件失去了它们的价值

> ID：13584543
> 
> 赞同：0
> 
> 时间：2012-11-27T12:44:17.490
> 
> 标签：c#, asp.net, repeater, asprepeater

似乎这个问题的解决方案就是这篇文章中所说的： http: [//codinglifestyle.wordpress.com/2009/10/08/repeaters-and-lost-data-after-postback-viewstate/](http://codinglifestyle.wordpress.com/2009/10/08/repeaters-and-lost-data-after-postback-viewstate/)但是它对我来说不起作用的接缝：|

所以我有一个页面，在该页面中有一个具有 3 个 web 控件的转发器。

```
 <asp:Repeater ID="repFissaggio" runat="server" OnItemCreated="repFissaggio_ItemCreated" EnableViewState="true" >
    <ItemTemplate>
        <table width="100%">
            <tr>
                <td style="width:30%;border: gray 1px solid;">
                    <div style="text-align: center; width:100%; border-right: gray 1px solid; border-top: gray 1px solid; border-left: gray 1px solid;border-bottom: gray 1px solid; FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif;    FONT-WEIGHT: bold; FONT-SIZE: 12px; background-color:gainsboro;">Disegno Articolo</div>
                    <asp:Image runat="server" ImageUrl='<%# GetFileAddress(Container.DataItem) %>' Width='220px' ID="imgDisegnoArt"  EnableViewState="false"></asp:Image>
                </td>
                <td style="width:65%">
                    <div style="text-align: center; width:100%; border-right: gray 1px solid; border-top: gray 1px solid; border-left: gray 1px solid;border-bottom: gray 1px solid; FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif;    FONT-WEIGHT: bold; FONT-SIZE: 12px; background-color:gainsboro;">Informazioni Articolo</div>
                    <gsc:SchSolettoFinissaggioArticoloUC ID="ucSchSolettoFinissaggioArticolo" runat="server"></gsc:SchSolettoFinissaggioArticoloUC>
                </td>
            </tr>
            <tr>
                <td style="border: gray 1px solid;">
                    <div style="text-align: center; width:100%; border-right: gray 1px solid; border-top: gray 1px solid; border-left: gray 1px solid;border-bottom: gray 1px solid; FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif;    FONT-WEIGHT: bold; FONT-SIZE: 12px; background-color:gainsboro;">Schema Finissaggio</div>
                    <asp:Image runat="server" ImageUrl='<%# GetFileAddress(Container.DataItem) %>' Width='220px' ID="imgSchedaFissaggio" EnableViewState="false"></asp:Image>
                    <asp:Label ID="divfileName" runat="server" Text='<%# GetFileName(Container.DataItem) %>' style="text-align: center; width:100%"></asp:Label>
                </td>
                <td>
                    <fieldset  style="padding: 10px,10px,10px,10px; border-bottom-width: 5px">
                        <legend>Sistema di Industrializzazione</legend>
                        <gsc:SchSolettoSistemaProdIndusUC ID="ucSchSolettoSistemaIndus" runat="server"></gsc:SchSolettoSistemaProdIndusUC>
                    </fieldset>
                    <br />
                    <fieldset  style="padding: 10px,10px,10px,10px; border-bottom-width: 5px">
                    <legend>Sistema di Produzione</legend>
                        <gsc:SchSolettoSistemaProdIndusUC ID="ucSchSolettoSistemaProd" runat="server"></gsc:SchSolettoSistemaProdIndusUC>
                    </fieldset>
                </td>
            </tr>
        </table>
    </ItemTemplate>
</asp:Repeater> 
```

在初始化时我调用这个方法

```
 protected override void InitEditor()
        {
            if (!IsPostBack)
            {
                ...
                repFissaggio.DataSource = SolettoDS.SoleXSchTec;
                repFissaggio.DataBind();
            }

        } 
```

在这个中继器之上，我还有其他 web 控件。当我更改下拉列表的值时，表单被提交。当这种情况发生时，来自转发器的 webcontrol 的值就会失去它们的价值。你建议怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:23:16.990

我找到了答案：我应该将绑定放在 protected void repFissaggio_ItemDataBound(object sender, RepeaterItemEventArgs e) 而不是 repFissaggio_ItemCreated

# jsf - Rich:calender 支持的日期格式列表

> ID：13584548
> 
> 赞同：0
> 
> 时间：2012-11-27T12:44:52.857
> 
> 标签：jsf, richfaces

我在谷歌中搜索了 Rich:Calender 支持的日期格式列表。FMDAY、DD MONTH YYYY 和 DD MON YYYY 日期格式在选择时无法在 Rich:Calender 中按预期工作。有人可以帮助找到 FMDAY、DD MONTH YYYY 和 DD MON YYYY 日期格式的等效日期格式 Rich:Calender 或任何我可以从中获取支持的日期格式列表的来源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:53:00.293

它只是标准的 Java[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)模式。[您可以在其javadoc](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)中找到一个表：

```
Letter  Date or Time Component  Presentation        Examples
------  ----------------------  ------------------  -----------------------------
G       Era designator          Text                AD
y       Year                    Year                1996; 96
M       Month in year           Month               July; Jul; 07
w       Week in year            Number              27
W       Week in month           Number              2
D       Day in year             Number              189
d       Day in month            Number              10
F       Day of week in month    Number              2
E       Day in week             Text                Tuesday; Tue
a       Am/pm marker            Text                PM
H       Hour in day (0-23)      Number              0
k       Hour in day (1-24)      Number              24
K       Hour in am/pm (0-11)    Number              0
h       Hour in am/pm (1-12)    Number              12
m       Minute in hour          Number              30
s       Second in minute        Number              55
S       Millisecond             Number              978
z       Time zone               General time zone   Pacific Standard Time; PST; GMT-08:00
Z       Time zone               RFC 822 time zone   -0800 
```

“FMDAY”并不完全是您的意思，但我假设您的意思是一周中一天的文本表示，例如“Tuesday”。

在这种情况下，所需的`FMDAY, DD MONTH YYYY`格式应设置为

```
<rich:calendar ... pattern="EEEE, dd MMMM yyyy" /> 
```

并且`DD MON YYYY`作为

```
<rich:calendar ... pattern="dd MMM yyyy" /> 
```

今天的日期应分别导致“2012 年 11 月 27 日星期二”和“2012 年 11 月 27 日”。

# c# - 列表列表上的自定义 OrderBy

> ID：13584550
> 
> 赞同：0
> 
> 时间：2012-11-27T12:44:56.713
> 
> 标签：c#, linq

我想在 List 上进行排序，例如：

```
public List<Person> personList { get; set; };    

class Person
{
    public string Name{ get; set; };
    public List<Car> carList{ get; set; };
}

class Car
{
    public string Name { get; set; };
    public int PriceInMillions { get; set; };
} 
```

我想对列表顶部的`CarList`每一个`PersonList`进行`CarList`排序？`BMW object(can be one or more)`

输入：

```
Person: Name: 'ABC'
List<Car>:{{"x",25},{"y",25},{"BMW",26},{"x",25},{"BMW",25}}

Person: Name: 'DEF'
List<Car>:{{"BMW",21},{"y",25},{"BMW",26},{"x",25},{"BMW",20}} 
```

所需输出：

```
Person: Name: 'ABC'
List<Car>:{{"BMW",25},{"BMW",26},{"x",25},{"y",25},{"x",25}}

Person: Name: 'DEF'
List<Car>:{{"BMW",20},{"BMW",21},{"BMW",26},{"y",25},{"x",25}} 
```

我试图找到“BMW”的索引并将其与第一个索引交换，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:55:06.653

```
List<Car> orderedCarList = person.carList.OrderBy(s => (s.Name == "BMW") ? 0 : 1).ToList();
person.carList = orderedCarList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T06:27:18.877

这是工作解决方案：

```
public List<Person> GetSortedList(List<Person> personList)
{
   foreach (var person in personList)
   {
       person.CarList=person.CarList.OrderByDescending(x => x.Name== "BMW").ToList();
   }
 return personList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T15:45:10.937

如果您想就地排序，而不为每个人创建新列表或汽车，您可以这样做

```
foreach(Person p in personList)
{
    p.carList.Sort((car1, car2) =>
        -(car1.Name == "BMW").CompareTo(car2.name == "BMW"));
} 
```

# android - 来自在线数据库的 android 可扩展列表

> ID：13584565
> 
> 赞同：5
> 
> 时间：2012-11-27T12:45:45.783
> 
> 标签：android, database, expandablelistview

我正在设计一个从在线数据库中检索大学的 android 应用程序，我必须使用 ExpandableListView 来表示它们。我有 700 所大学，所以我需要按类别代表它们。我的类别是字母 A、B、C、D 等。

```
>L
London Metropolitan University
Lea Valley College

>M
Manchester College
Manchester University 
```

我在填充每个类别中的子元素时遇到问题。因为我有很多数据，所以我认为最好的方法是按下每个类别来创建 sql 查询以让所有大学以“A”开头，例如，但我发现所有 ExpandableListView 示例都使用带有一些元素的数组列表或哈希图。

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:13:17.600

您可能可以使用[CursorTreeAdapter](http://developer.android.com/reference/android/widget/CursorTreeAdapter.html)。

见[`getChildrendCursor`](http://developer.android.com/reference/android/widget/CursorTreeAdapter.html#getChildrenCursor%28android.database.Cursor%29)方法：

> 如果要异步查询提供程序以防止阻塞 UI，可以返回 null 并在稍后调用 setChildrenCursor(int, Cursor)。

# php - Cakephp 需要控制器

> ID：13584570
> 
> 赞同：2
> 
> 时间：2012-11-27T12:46:06.160
> 
> 标签：php, cakephp

谁能帮我，

我用 Cakephp 2.1 开发了我的应用程序，它在我运行 Centos 5.7 的开发服务器上运行良好。当我将应用程序转移到 lice 服务器以供 LAN 访问时，我的挑战就来了。它指出缺少一个在我的整个应用程序中不可用的控制器，例如，我命名了包含我的应用程序的文件夹并上传到 Centos 中的正确文件夹，例如 /var/www/html/students 并且每次我需要访问应用程序状态学生控制器丢失。我试图将我的文件夹重命名为“mysite”，但 mysite 控制器仍然存在错误。

因此，每次我更改文件夹的名称时，它都会声明该命名文件夹的缺少控制器。我试图在 core.php 中找出答案，但找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:43:33.117

要将基本目录更改为 /mysite，您必须修改 cakephp 的 3 .htaccess，即一个在 installlation 文件夹中，第二个在 app 文件夹中，第三个在 webroot 文件夹中

尝试添加：-

```
RewriteBase    /mysite/ 
```

希望这可以帮助！

# javascript - 旋转一组对象

> ID：13584572
> 
> 赞同：0
> 
> 时间：2012-11-27T12:37:19.190
> 
> 标签：javascript, kineticjs

我正在使用 KineticJS 并尝试旋转组。当我第一次旋转时，偏移量是正确的，并且它以我想要的方式旋转。当我更改组内矩形的大小然后尝试旋转它回到以前中心点或偏移。任何人都可以帮忙！？代码：

**//selectedShape 在这种情况下是组内的矩形，当我

//调整这个矩形的大小然后尝试旋转组它会改变一点**

```
 selectedShape.setPosition(0, 0);               
            var offsetX = selectedShape.getWidth() / 2;
            var offsetY = selectedShape.getHeight() / 2;

            group.setOffset(offsetX, offsetY);

            if (isForRotate)
            {
                 group.rotate(Math.PI / 4);
            } 
```

//旋转后重置锚点位置

```
 topLeft.setPosition(selectedShape.attrs.x, selectedShape.attrs.y);
            topRight.setPosition(Number(selectedShape.attrs.x) + Number(selectedShape.getWidth()), selectedShape.attrs.y);
            bottomLeft.setPosition(selectedShape.attrs.x, Number(selectedShape.attrs.y) + Number(selectedShape.getHeight()));
            bottomRight.setPosition(Number(selectedShape.attrs.x) + Number(selectedShape.getWidth()), Number(selectedShape.attrs.y) + Number(selectedShape.getHeight()));
           ![enter image description here][1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:22:18.440

我并不完全清楚你想要什么，但旋转是一个绝对值，所以你应该适当地使用类似的东西：

```
var rotation=selectedShape.getRotation();
selectedShape.setRotation(-rotation); 
```

恢复为0；

# javascript - 从 javascript 验证文本框在任何浏览器中都不起作用，但在 IE 中起作用

> ID：13584579
> 
> 赞同：3
> 
> 时间：2012-11-27T12:46:30.243
> 
> 标签：javascript, asp.net, html

我有一个***文本框***类型的控件，我已经向它添加了***属性******InputType***

并制作了***javascript***文件来***验证***来自文本框的输入***文本***

***这里是文本的代码***

```
<tc1:AppTextBox ID="txtAccNo" runat="server" InputType="Integer" IsPrimary="true"
IsDatabaseField="true" AllowNull="true">
</tc1:AppTextBox> 
```

***这里是我的 javascript 代码***

```
function DoControlBlure(obj) {
var numVal = obj.value * 1;   //To Convert String Value of obj.value to numeric Value
var bRes = true;
if (obj) {
if (obj.type == "text") {
if (obj.InputType.toUpperCase() == "INTEGER" || obj.InputType.toUpperCase() ==DOUBLE") {
alert('obj.InputType');}}}} 
```

在 IE 中返回我所做的实际输入类型，但在任​​何其他浏览器中它会提醒 undefind 它在 IE 中工作正常，但在 google chrome 或 firefox 中它根本不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:21:03.843

您应该使用`getAttribute`跨浏览器安全的方式获取 DOM 元素的非标准属性：

```
<input id="test" InputType="test" />

<script>
  window.onload = function(){
    var input = document.getElementById('test');
    alert(input.InputType); /// will work in IE, fail in others
    alert(input.inputtype); /// will fail in all I think?
    alert(input.getAttribute('InputType')); /// will work in all
    alert(input.getAttribute('inputtype')); /// should work in all
  }
</script> 
```

# c++ - apache服务器没有正确重定向

> ID：13584580
> 
> 赞同：0
> 
> 时间：2012-11-27T12:46:33.223
> 
> 标签：c++, apache, redirect

我在 apache 中编写了一个模块，它在调用时记录信息让我们说它指向的 url 是 localhost:12345/imp，我想随后在执行此模块中的代码后将每个请求重定向到不同的 URL，例如 www。 cnn.com。

```
apr_table_add(r->headers_out, "Location","www.cnn.com" );
return HTTP_TEMPORARY_REDIRECT; 
```

我已经在我的模块中尝试了上述方法，但它似乎只是调用我的模块两次，它似乎正在尝试访问 localhost:12345/www/cnn/com。肯定有人做过类似我正在尝试的事情，有人可以建议吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:02:05.500

互联网标准要求绝对 URI 跟在 Location 标头后面，这意味着它必须包含一个方案（例如，http:、https:、telnet:、mailto:）。

你应该使用：

```
apr_table_add(r->headers_out, "Location","http://www.cnn.com" ); 
```

# java - 如何找到我点击的日历按钮？

> ID：13584581
> 
> 赞同：2
> 
> 时间：2012-11-27T12:46:33.773
> 
> 标签：java, swing, calendar, jbutton

我试图显示日历，如果我单击右键，我想更改该按钮的颜色。实际上我要去一个弹出菜单，但是我怎么知道哪个按钮首先被点击了呢？

```
panel1date.setLayout(new GridLayout(6,7));
for(int i=0; i<btnArr.length;i++){
    btnArr[i] = new Button("");
    btnArr[i].addMouseListener(new MemoHandler());

    panel1date.add(btnArr[i]);
}

btnPrevMon.addActionListener(new BtnEventHandler());
btnNextMon.addActionListener(new BtnEventHandler());

void setDays(Calendar date){
    int year = date.get(Calendar.YEAR);
    int month = date.get(Calendar.MONTH);
    lblYearMon.setText(year+"year+"+(month+1)+"month");
    Calendar sDay = Calendar.getInstance();
    sDay.set(year, month, 1);
    sDay.add(Calendar.DATE, -sDay.get(Calendar.DAY_OF_WEEK)+1);
    for(int i=0; i<btnArr.length; i++, sDay.add(Calendar.DATE, 1)){
        int day = sDay.get(Calendar.DATE);
        btnArr[i].setLabel(day+"");
        if(sDay.get(Calendar.MONTH)!=month) {
            btnArr[i].setBackground(Color.lightGray);
        } 
        else {
            btnArr[i].setBackground(Color.white);
        }
    }
}

class BtnEventHandler implements ActionListener{

    public void actionPerformed(ActionEvent ae) {
        String msg = tf1.getText();
        Button src = (Button)ae.getSource();
        if(src==btnPrevMon) {
            curMon.add(Calendar.MONTH, -1);
        }
        else
            if(src==btnNextMon) {
                curMon.add(Calendar.MONTH, 1);
                setDays(curMon);
                repaint();
            }
    }

    class EventHandler extends FocusAdapter implements ActionListener {
        public void actionPerformed(ActionEvent ae) {
            String msg = tf1.getText();
            if("".equals(msg))
                return;
            if(dataOut!=null) {
                try {
                    dataOut.writeUTF(nickname+">"+msg);
                }
                catch(IOException e) {
                }
            }
            ta1.append("\r\n" + nickname +">"+ msg);
            tf1.setText("");
        }
    }

    class MemoHandler extends MouseAdapter implements MouseListener{

        public void mouseClicked(MouseEvent e){
            if (e.getButton() == MouseEvent.BUTTON1)
                diarymemo = new DiaryButtonMemo(Client.server_ip, Client.server_port);
            if (e.getButton() == MouseEvent.BUTTON3)
                btnArr[].setBackground(Color.RED);
        }

    }

    public static void main(String[] args) {
        DiaryClient di = new DiaryClient();
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:29:10.103

要更改按钮颜色，请使用：

```
Color background;
button.setBackground(background); 
```

要显示弹出菜单：

```
public class PopupMenu extends JPanel {
  JPopupMenu popup;

  public PopupMenu() {
    popup = new JPopupMenu();
    JMenuItem item;
    popup.add(item = new JMenuItem("Popup"));
    item.addActionListener(new new ActionListener() {
      public void actionPerformed(ActionEvent event) {
        // Action performed
        System.out.println("I know which popup menu item ["
          + event.getActionCommand() +
          "] was pressed.");
      });
    });

    addMouseListener(new MouseListener() {
      public void mousePressed(MouseEvent e) {
        doPopup(e);
      }

      public void mouseClicked(MouseEvent e) {
        doPopup(e);
      }

      public void mouseReleased(MouseEvent e) {
        doPopup(e);
      }

      private void doPopup(MouseEvent e) {
        if (e.isPopupTrigger()) {
          popup.show(PopupMenu.this, e.getX(), e.getY());
        }
      }
    });
  }
} 
```

# image - Sprite Sheet 自动检测单个 Sprite 边界

> ID：13584586
> 
> 赞同：8
> 
> 时间：2012-11-27T12:46:46.293
> 
> 标签：image, algorithm, image-processing

给定一个像这样的精灵表：

![精灵表示例](../Images/e97753b27c5adb7c0914ac3aa259e90b.png)

我想编写一个算法，可以循环遍历像素数据并确定每个谨慎精灵的边界矩形。

如果我们假设对于每个像素 X、Y，我可以拉出真（像素不完全透明）或假（像素完全透明），我将如何为每个精灵自动生成边界矩形？

结果数据应该是具有 {x, y, width, height} 的矩形对象数组。

这是相同的图像，但前四个精灵的边界用浅蓝色标记：

![带边界的精灵表](../Images/f5f2b59ed09f76cd7c01e548ffcde5cb.png)

任何人都可以逐步说明如何检测上述界限吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-09-10T21:44:28.313

这是一种方法

*   将图像转换为灰度
*   大津阈值获取二值图像
*   执行形态变换以平滑图像
*   寻找轮廓
*   遍历轮廓以绘制边界矩形并提取 ROI

* * *

转换为灰度后，我们用Otsu的阈值得到二值图像

[![在此处输入图像描述](../Images/b460502a4ff6e10b7564977e2f9d972a.png)](https://i.stack.imgur.com/XyJLT.png)

接下来我们执行形态变换，将每个精灵合并成一个轮廓

[![在此处输入图像描述](../Images/b5b113a2507007e8bc82ff1998ebfcbe.png)](https://i.stack.imgur.com/XmHoS.png)

从这里我们找到轮廓，遍历每个轮廓，绘制边界矩形，并提取每个 ROI。这是结果

[![在此处输入图像描述](../Images/72f2b7fff99267edb135f52585a873e2.png)](https://i.stack.imgur.com/rK733.png)

这是每个保存的精灵 ROI

[![在此处输入图像描述](../Images/af326da7e4d1ca37397741e756b738a4.png)](https://i.stack.imgur.com/39OyV.png)

我已经使用 OpenCV 和 Python 实现了这个方法，但是您可以将该策略调整到任何语言

```
import cv2

image = cv2.imread('1.jpg')
original = image.copy()
gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
thresh = cv2.threshold(gray, 0, 255, cv2.THRESH_BINARY_INV + cv2.THRESH_OTSU)[1]

kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (3,3))
close = cv2.morphologyEx(thresh, cv2.MORPH_CLOSE, kernel, iterations=2)
dilate = cv2.dilate(close, kernel, iterations=1)

cnts = cv2.findContours(dilate, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
cnts = cnts[0] if len(cnts) == 2 else cnts[1]

sprite_number = 0
for c in cnts:
    x,y,w,h = cv2.boundingRect(c)
    ROI = image[y:y+h, x:x+w]
    cv2.imwrite('sprite_{}.png'.format(sprite_number), ROI)
    cv2.rectangle(image, (x, y), (x + w, y + h), (36,255,12), 2)
    sprite_number += 1

cv2.imshow('thresh', thresh)
cv2.imshow('dilate', dilate)
cv2.imshow('image', image)
cv2.waitKey() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T13:13:49.473

这个怎么样？唯一的缺点是您需要图像的可写版本来标记访问过的像素，否则填充将永远不会终止。

```
Process each* scan line in turn
  For each scanline, walk from left to right, until you find a non-transparent pixel P.
    If the location of P is already inside a known bounded box
      Continue to the right of the bounded box
    Else
      BBox = ExploreBoundedBox(P)
      Add BBox to the collection of known bounded boxes

Function ExploreBoundedBox(pStart)
  Q = new Queue(pStart)
  B = new BoundingBox(pStart)

  While Q is not empty
    Dequeue the front element as P
    Expand B to include P

    For each of the four neighbouring pixels N
      If N is not transparent and N is not marked
        Mark N
        Enqueue N at the back of Q

  return B 
```

您不需要处理每条扫描线，您可以每 10 条或每 30 条扫描线处理一次。只要它不超过最小精灵高度。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-02-28T18:27:29.007

使用 Pillow 在 Python 上附加实现：

网址：[https ://gist.github.com/tuaplicacionpropia/f5bd6b0f69a11141767387eb789f5093](https://gist.github.com/tuaplicacionpropia/f5bd6b0f69a11141767387eb789f5093)

[网址](https://gist.github.com/tuaplicacionpropia/f5bd6b0f69a11141767387eb789f5093)

 `````
#!/usr/bin/env python
#coding:utf-8

from __future__ import print_function
from PIL import Image

class Sprite:
  def __init__(self):
    self.start_x = -1
    self.start_y = -1
    self.end_x = -1
    self.end_y = -1

  def expand (self, point):
    if (self.start_x < 0 and self.start_y < 0 and self.end_x < 0 and self.end_y < 0):
      self.start_x = point[0]
      self.start_y = point[1]
      self.end_x = point[0]
      self.end_y = point[1]
    else:
      if (point[0] < self.start_x):
        self.start_x = point[0]
      if (point[0] > self.end_x):
        self.end_x = point[0]
      if (point[1] < self.start_y):
        self.start_y = point[1]
      if (point[1] > self.end_y):
        self.end_y = point[1]

  def belongs (self, point):
    result = False
    result = True
    result = result and point[0] >= self.start_x and point[0] <= self.end_x
    result = result and point[1] >= self.start_y and point[1] <= self.end_y
    return result

  def __str__(self):
    result = ""
    result = result + "("
    result = result + str(self.start_x)
    result = result + ", "
    result = result + str(self.start_y)
    result = result + ", "
    result = result + str(self.end_x)
    result = result + ", "
    result = result + str(self.end_y)
    result = result + ")"
    return result

def loadSprite (pos, sprites):
  result = None
  for sprite in sprites:
    if sprite.belongs(pos):
      result = sprite
      break
  return result

def exploreBoundedBox (pStart, img):
  result = None
  q = []
  q.append(pStart)
  result = Sprite()
  result.expand(pStart)
  marks = []
  while (len(q) > 0):
    p = q.pop(0)
    result.expand(p)
    neighbouring = loadEightNeighbouringPixels(p, img)
    for n in neighbouring:
      if img.getpixel(n)[3] > 0 and not n in marks:
        marks.append(n)
        q.append(n)
  return result

def loadFourNeighbouringPixels (point, img):
  result = None
  result = []

  newPoint = (point[0], point[1] - 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] - 1, point[1])
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] + 1, point[1])
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0], point[1] + 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  return result

def loadEightNeighbouringPixels (point, img):
  result = None
  result = []

  newPoint = (point[0], point[1] - 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] - 1, point[1])
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] + 1, point[1])
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0], point[1] + 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] - 1, point[1] - 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] + 1, point[1] - 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] - 1, point[1] + 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] + 1, point[1] + 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  return result

im = Image.open("test2.png")
print(im.format, im.size, im.mode)
#PNG (640, 252) RGBA
#im.show()
print("width = " + str(im.width))
print("height = " + str(im.height))

sprites = []
for y in range(im.height):
  for x in range(im.width):
    pixel = im.getpixel((x, y))
    haycolor = True if pixel[3] > 0 else False
    if (haycolor):
      pos = (x, y)
      #print("(" + str(x) + ", " + str(y) + ") -> " + str(pixel))
      pixelP = pixel
      sprite = loadSprite(pos, sprites)
      if (sprite != None):
        x = sprite.end_x
      else:
        sprite = exploreBoundedBox(pos, im)
        sprites.append(sprite)

print("sprites")
print(str(sprites))
idx = 1
for sprite in sprites:
  print("sprite " + str(idx) + ". -> " + str(sprite))
  imSprite = im.crop((sprite.start_x, sprite.start_y, sprite.end_x + 1, sprite.end_y + 1))
  #imSprite.show()
  imSprite.save("sprite" + str(idx) + ".png")
  idx += 1 
````  `为了避免留下小部分精灵，我们必须添加以下改进：

 `````
MINIMUM_SPRITE = 8

def firstNonSprites (sprites):
  result = None
  for sprite in sprites:
    if (sprite.end_x - sprite.start_x + 1) < MINIMUM_SPRITE or (sprite.end_y - sprite.start_y + 1) < MINIMUM_SPRITE:
      result = sprite
      break
  return result

def mergeSprites (sprite1, sprite2):
  result = None
  if (sprite1 != None and sprite2 != None):
    result = Sprite()
    result.start_x = min(sprite1.start_x, sprite2.start_x)
    result.start_y = min(sprite1.start_y, sprite2.start_y)
    result.end_x = max(sprite1.end_x, sprite2.end_x)
    result.end_y = max(sprite1.end_y, sprite2.end_y)
  return result

def findNextSprite (pivot, sprites):
  result = None
  distance = 99999999
  for sprite in sprites:
    if sprite != pivot:
      itemDistance = distanceSprites(pivot, sprite)
      if (itemDistance < distance):
        distance = itemDistance
        result = sprite
  return result

#Pitagoras
def distancePoints (point1, point2):
  result = 99999999
  if (point1 != None and point2 != None):
    a = abs(point2[0] - point1[0])
    b = abs(point2[1] - point1[1])
    result = math.sqrt(math.pow(a, 2) + math.pow(b, 2))
  return result

def distancePointSprite (point, sprite):
  result = 99999999
  if (point != None and sprite != None):
    distance = distancePoints(point, (sprite.start_x, sprite.start_y))
    if (distance < result):
      result = distance
    distance = distancePoints(point, (sprite.end_x, sprite.start_y))
    if (distance < result):
      result = distance
    distance = distancePoints(point, (sprite.start_x, sprite.end_y))
    if (distance < result):
      result = distance
    distance = distancePoints(point, (sprite.end_x, sprite.end_y))
    if (distance < result):
      result = distance
  return result

def distanceSprites (sprite1, sprite2):
  result = 99999999
  if (sprite1 != None and sprite2 != None):
    distance = distancePointSprite((sprite1.start_x, sprite1.start_y), sprite2)
    if (distance < result):
      result = distance
    distance = distancePointSprite((sprite1.end_x, sprite1.start_y), sprite2)
    if (distance < result):
      result = distance
    distance = distancePointSprite((sprite1.start_x, sprite1.end_y), sprite2)
    if (distance < result):
      result = distance
    distance = distancePointSprite((sprite1.end_x, sprite1.end_y), sprite2)
    if (distance < result):
      result = distance
  return result

def fixMergeSprites (sprites):
  result = []
  pivotNonSprite = firstNonSprites(sprites)
  while (pivotNonSprite != None):
    nextSprite = findNextSprite(pivotNonSprite, sprites)
    if nextSprite == None:
      break
    mergeSprite = mergeSprites(pivotNonSprite, nextSprite)
    sprites.remove(nextSprite)
    sprites.remove(pivotNonSprite)
    sprites.append(mergeSprite)
    pivotNonSprite = firstNonSprites(sprites)
  result = sprites
  return result

#BEFORE CROP
sprites = fixMergeSprites(sprites) 
````  `完整代码：

 `````
#!/usr/bin/env python
#coding:utf-8

from __future__ import print_function
from PIL import Image
import math

#https://stackoverflow.com/questions/13584586/sprite-sheet-detect-individual-sprite-bounds-automatically?rq=1
'''
Process each* scan line in turn
  For each scanline, walk from left to right, until you find a non-transparent pixel P.
    If the location of P is already inside a known bounded box
      Continue to the right of the bounded box
    Else
      BBox = ExploreBoundedBox(P)
      Add BBox to the collection of known bounded boxes

Function ExploreBoundedBox(pStart)
  Q = new Queue(pStart)
  B = new BoundingBox(pStart)

  While Q is not empty
    Dequeue the front element as P
    Expand B to include P

    For each of the four neighbouring pixels N
      If N is not transparent and N is not marked
        Mark N
        Enqueue N at the back of Q

  return B
'''

class Sprite:
  def __init__(self):
    self.start_x = -1
    self.start_y = -1
    self.end_x = -1
    self.end_y = -1

  def expand (self, point):
    if (self.start_x < 0 and self.start_y < 0 and self.end_x < 0 and self.end_y < 0):
      self.start_x = point[0]
      self.start_y = point[1]
      self.end_x = point[0]
      self.end_y = point[1]
    else:
      if (point[0] < self.start_x):
        self.start_x = point[0]
      if (point[0] > self.end_x):
        self.end_x = point[0]
      if (point[1] < self.start_y):
        self.start_y = point[1]
      if (point[1] > self.end_y):
        self.end_y = point[1]

  def belongs (self, point):
    result = False
    result = True
    result = result and point[0] >= self.start_x and point[0] <= self.end_x
    result = result and point[1] >= self.start_y and point[1] <= self.end_y
    return result

  def __str__(self):
    result = ""
    result = result + "("
    result = result + str(self.start_x)
    result = result + ", "
    result = result + str(self.start_y)
    result = result + ", "
    result = result + str(self.end_x)
    result = result + ", "
    result = result + str(self.end_y)
    result = result + ")"
    return result

def loadSprite (pos, sprites):
  result = None
  for sprite in sprites:
    if sprite.belongs(pos):
      result = sprite
      break
  return result

'''
Function ExploreBoundedBox(pStart)
  Q = new Queue(pStart)
  B = new BoundingBox(pStart)

  While Q is not empty
    Dequeue the front element as P
    Expand B to include P

    For each of the four neighbouring pixels N
      If N is not transparent and N is not marked
        Mark N
        Enqueue N at the back of Q

  return B
'''
def exploreBoundedBox (pStart, img):
  result = None
  q = []
  q.append(pStart)
  result = Sprite()
  result.expand(pStart)
  marks = []
  while (len(q) > 0):
    p = q.pop(0)
    result.expand(p)
    neighbouring = loadEightNeighbouringPixels(p, img)
    for n in neighbouring:
      if img.getpixel(n)[3] > 0 and not n in marks:
        marks.append(n)
        q.append(n)
  return result

def loadFourNeighbouringPixels (point, img):
  result = None
  result = []

  newPoint = (point[0], point[1] - 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] - 1, point[1])
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] + 1, point[1])
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0], point[1] + 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  return result

def loadEightNeighbouringPixels (point, img):
  result = None
  result = []

  newPoint = (point[0], point[1] - 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] - 1, point[1])
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] + 1, point[1])
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0], point[1] + 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] - 1, point[1] - 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] + 1, point[1] - 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] - 1, point[1] + 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  newPoint = (point[0] + 1, point[1] + 1)
  if (newPoint[0] >= 0 and newPoint[1] >= 0 and newPoint[0] < img.width and newPoint[1] < img.height):
    result.append(newPoint)

  return result

MINIMUM_SPRITE = 8

def firstNonSprites (sprites):
  result = None
  for sprite in sprites:
    if (sprite.end_x - sprite.start_x + 1) < MINIMUM_SPRITE or (sprite.end_y - sprite.start_y + 1) < MINIMUM_SPRITE:
      result = sprite
      break
  return result

def mergeSprites (sprite1, sprite2):
  result = None
  if (sprite1 != None and sprite2 != None):
    result = Sprite()
    result.start_x = min(sprite1.start_x, sprite2.start_x)
    result.start_y = min(sprite1.start_y, sprite2.start_y)
    result.end_x = max(sprite1.end_x, sprite2.end_x)
    result.end_y = max(sprite1.end_y, sprite2.end_y)
  return result

def findNextSprite (pivot, sprites):
  result = None
  distance = 99999999
  for sprite in sprites:
    if sprite != pivot:
      itemDistance = distanceSprites(pivot, sprite)
      if (itemDistance < distance):
        distance = itemDistance
        result = sprite
  return result

#Pitagoras
def distancePoints (point1, point2):
  result = 99999999
  if (point1 != None and point2 != None):
    a = abs(point2[0] - point1[0])
    b = abs(point2[1] - point1[1])
    result = math.sqrt(math.pow(a, 2) + math.pow(b, 2))
  return result

def distancePointSprite (point, sprite):
  result = 99999999
  if (point != None and sprite != None):
    distance = distancePoints(point, (sprite.start_x, sprite.start_y))
    if (distance < result):
      result = distance
    distance = distancePoints(point, (sprite.end_x, sprite.start_y))
    if (distance < result):
      result = distance
    distance = distancePoints(point, (sprite.start_x, sprite.end_y))
    if (distance < result):
      result = distance
    distance = distancePoints(point, (sprite.end_x, sprite.end_y))
    if (distance < result):
      result = distance
  return result

def distanceSprites (sprite1, sprite2):
  result = 99999999
  if (sprite1 != None and sprite2 != None):
    distance = distancePointSprite((sprite1.start_x, sprite1.start_y), sprite2)
    if (distance < result):
      result = distance
    distance = distancePointSprite((sprite1.end_x, sprite1.start_y), sprite2)
    if (distance < result):
      result = distance
    distance = distancePointSprite((sprite1.start_x, sprite1.end_y), sprite2)
    if (distance < result):
      result = distance
    distance = distancePointSprite((sprite1.end_x, sprite1.end_y), sprite2)
    if (distance < result):
      result = distance
  return result

def fixMergeSprites (sprites):
  result = []
  pivotNonSprite = firstNonSprites(sprites)
  while (pivotNonSprite != None):
    nextSprite = findNextSprite(pivotNonSprite, sprites)
    if nextSprite == None:
      break
    mergeSprite = mergeSprites(pivotNonSprite, nextSprite)
    sprites.remove(nextSprite)
    sprites.remove(pivotNonSprite)
    sprites.append(mergeSprite)
    pivotNonSprite = firstNonSprites(sprites)
  result = sprites
  return result

im = Image.open("test.png")
print(im.format, im.size, im.mode)
#PNG (640, 252) RGBA
#im.show()
print("width = " + str(im.width))
print("height = " + str(im.height))

sprites = []
for y in range(im.height):
  for x in range(im.width):
    pixel = im.getpixel((x, y))
    haycolor = True if pixel[3] > 0 else False
    if (haycolor):
      pos = (x, y)
      #print("(" + str(x) + ", " + str(y) + ") -> " + str(pixel))
      pixelP = pixel
      sprite = loadSprite(pos, sprites)
      if (sprite != None):
        x = sprite.end_x
      else:
        sprite = exploreBoundedBox(pos, im)
        sprites.append(sprite)

sprites = fixMergeSprites(sprites)

print("sprites")
print(str(sprites))
idx = 1
for sprite in sprites:
  print("sprite " + str(idx) + ". -> " + str(sprite))
  imSprite = im.crop((sprite.start_x, sprite.start_y, sprite.end_x + 1, sprite.end_y + 1))
  #imSprite.show()
  imSprite.save("sprite" + str(idx) + ".png")
  idx += 1 
`````````

# c# - 嵌套中继器未触发

> ID：13584589
> 
> 赞同：0
> 
> 时间：2012-11-27T12:46:57.893
> 
> 标签：c#, .net

我有三个具有父子关系的中继器（所以我们有一个父中继器、一个子中继器和一个子子中继器），最里面的中继器没有被触发。这是我的布局的aspx页面：

```
<asp:Repeater ID="rptMission" runat="server">
<HeaderTemplate>
<ul id="acc1" class="ui-accordion-container">
</HeaderTemplate>
    <ItemTemplate>
<li>
    <div class="ui-accordion-left"></div>
    <a class="ui-accordion-link acc1"><%# Eval("Name") %><span class="ui-accordion-right"></span></a>
    <div>
        <ul class="ui-accordion-container" id="acc2">
        <asp:Repeater ID="rptActivity" runat="server">
        <ItemTemplate>
            <li>
                <div class="ui-accordion-left"></div>
                <a class="ui-accordion-link acc2"><%# Eval("Name") %>
                <span class="ui-accordion-right"></span></a>
                <div>
                <asp:Repeater ID="rptProject" runat="server">
                <ItemTemplate>
                    <%# Eval("Name") %><br/>
                </ItemTemplate>
                </asp:Repeater>
                </div>
            </li>
        </ItemTemplate>
        </asp:Repeater>
        </ul>
    </div>
</li>
</ItemTemplate>
<FooterTemplate>
</ul>
</FooterTemplate>
</asp:Repeater> 
```

前两个中继器工作得很好，但“rptProject”中继器没有被触发。这是我背后的代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        _presenter = new TierTypesPresenter(this);
        rptMission.ItemDataBound += new RepeaterItemEventHandler(rptMission_ItemDataBound);

        RaiseStartUp();
    }

    void rptMission_ItemDataBound(Object sender, RepeaterItemEventArgs e)
    {
        RepeaterItem item = e.Item;
        Mission row = (Mission)item.DataItem;
        if (item.ItemType == ListItemType.Item || item.ItemType == ListItemType.AlternatingItem)
        {
            var rptActivity = (Repeater)item.FindControl("rptActivity");
            var activity = _presenter.GetActivitiesByMission(row.Id);
            rptActivity.DataSource = activity;
            rptActivity.DataBind();
        }
    }

    void rptActivity_ItemDataBound(Object sender, RepeaterItemEventArgs e)
    {
        RepeaterItem item = e.Item;
        Activity row = (Activity)item.DataItem;
        if (item.ItemType == ListItemType.Item || item.ItemType == ListItemType.AlternatingItem)
        {
            var rptProject = (Repeater)item.FindControl("rptProject");
            var project = _presenter.GetProjectsByActivities(row.Id);
            rptProject.DataSource = project;
            rptProject.DataBind();
        }
    }

    public void SetMissions(IEnumerable<Mission> missionList)
    {
        rptMission.DataSource = missionList;
        rptMission.DataBind();
    } 
```

如果我可以触发第二个 ItemDataBound 事件“rptActivity_ItemDataBound”，我认为它会正常工作，但它会被跳过。感谢您的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:54:33.217

我猜你错过了这行代码：

```
rptActivity .ItemDataBound += new RepeaterItemEventHandler(rptActivity_ItemDataBound); 
```

顺便在asp文件中设置事件比较容易...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:40:28.697

我通过将第三个转发器绑定放入第二个转发器 ItemBoundEvent 解决了我的问题。以下是任何感兴趣的更新代码：

```
void rptMission_ItemDataBound(Object sender, RepeaterItemEventArgs e)
    {
        RepeaterItem item = e.Item;
        Mission row = (Mission)item.DataItem;
        if (item.ItemType == ListItemType.Item || item.ItemType == ListItemType.AlternatingItem)
        {
            var rptActivity = (Repeater)item.FindControl("rptActivity");
            var activity = _presenter.GetActivitiesByMission(row.Id);
            var i = 0;
            foreach (Activity data in activity)
            {
                RepeaterItem activityItem = rptActivity.Items[i];
                var rptProject = (Repeater)activityItem.FindControl("rptProject");
                var project = _presenter.GetProjectsByActivities(data.Id);
                rptProject.DataSource = project;
                rptProject.DataBind();
                i++;
            }
            rptActivity.DataSource = activity;
            rptActivity.DataBind();
        }
    } 
```

# ajax - 如何将 Ajax 与 Symfony2 集成

> ID：13584591
> 
> 赞同：25
> 
> 时间：2012-11-27T12:47:00.477
> 
> 标签：ajax, symfony

我正在寻找关于 symfony2 中 ajax 的简单教程/示例，适合初学者？

我有这些例子：

*   city.php：[http ://pastebin.com/Qm8LS5kh](http://pastebin.com/Qm8LS5kh)

*   ajax_req.js：[http ://pastebin.com/UqJMad24](http://pastebin.com/UqJMad24)

*   index.html： http: [//pastebin.com/H1err4Yh](http://pastebin.com/H1err4Yh)

如何将这些放入 Symfony2 应用程序中？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-11-27T13:53:08.807

这很容易。我将通过 3 个步骤说明如何在 Symfony2 中进行 AJAX 调用。对于以下示例，假设使用 jQuery 库。

*   为必须处理 AJAX 调用的操作定义路由。例如

    ```
    AcmeHomeBundle_ajax_update_mydata:
      pattern:  /update/data/from/ajax/call
      defaults: { _controller: AcmeHomeBundle:MyAjax:updateData } 
    ```

*   从bundle定义`MyAjax`控制器中的动作。`Home`例如

    ```
    public function updateDataAction(){
      $request = $this->container->get('request');        
      $data1 = $request->query->get('data1');
      $data2 = $request->query->get('data2');
      ...
      //handle data
      ...
      //prepare the response, e.g.
      $response = array("code" => 100, "success" => true);
      //you can return result as JSON
      return new Response(json_encode($response)); 
    } 
    ```

*   在您的模板中准备您的`AJAX`电话，例如：`Twig`

    ```
    function aButtonPressed(){
        $.post('{{path('AcmeHomeBundle_ajax_update_mydata')}}',               
                    {data1: 'mydata1', data2:'mydata2'}, 
                function(response){
                        if(response.code == 100 && response.success){//dummy check
                          //do something
                        }

        }, "json");    
    }

    $(document).ready(function() {     
      $('button').on('click', function(){aButtonPressed();});
    }); 
    ```

    您可以通过使用其他 AJAX 调用来更改示例。

# video - 在视频 C# 上绘制形状

> ID：13584594
> 
> 赞同：1
> 
> 时间：2012-11-27T12:47:08.150
> 
> 标签：video, draw, shapes

即使在播放视频时也需要在视频上绘制基本形状的应用程序的帮助。我正在使用 AXWindowsMediaPlayer 控件来播放视频，并且还放置了一个自定义面板来在播放器控件上绘制形状。自定义面板是透明的。视频不播放时可以流畅绘制。但是当它播放时，一切都会出错。视频上的绘图被删除。我怎样才能克服这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:26:14.547

我已经找到了如何做到这一点。这是在 WPF 中使用 Canvas 的一种方式

```
private void buttonPlayVideo_Click(object sender, RoutedEventArgs e)
{
    Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
    dlg.Filter = "All Files|*.*";
    Nullable<bool> result = dlg.ShowDialog();
    if (result == true) {
        MediaPlayer mp = new MediaPlayer();
        mp.Open(new Uri(filename));
        VideoDrawing vd = new VideoDrawing();
        vd.Player = mp;
        vd.Rect = new Rect(0, 0, 960, 540);
        DrawingBrush db = new DrawingBrush(vd);
        canvas.Background = db;
        mp.Play();
    }
} 
```

然后为 Canvas 创建鼠标事件并用它绘制

```
 Point startPoint, endPoint;
    private void canvas_MouseDown(object sender, MouseButtonEventArgs e)
    {
        startPoint = e.GetPosition(canvas);
    }
    private void canvas_MouseUp(object sender, MouseButtonEventArgs e)
    {
        endPoint = e.GetPosition(canvas);

        Line myLine = new Line();
        myLine.Stroke = System.Windows.Media.Brushes.LightSteelBlue;
        myLine.X1 = startPoint.X;
        myLine.Y1 = startPoint.Y;
        myLine.X2 = endPoint.X;
        myLine.Y2 = endPoint.Y;
        myLine.HorizontalAlignment = HorizontalAlignment.Left;
        myLine.VerticalAlignment = VerticalAlignment.Center;
        myLine.StrokeThickness = 2;
        canvas.Children.Add(myLine);
    } 
```

# objective-c - Objective-C - 将一个数字数组转换为按顺序排列的数字数组

> ID：13584596
> 
> 赞同：0
> 
> 时间：2012-11-27T12:47:15.780
> 
> 标签：objective-c, cocoa, numbers, sequence

有没有一种简单的方法可以将数字数组转换为按顺序排列数字的数组？

```
NSArray *numbers = @[@1,@2,@5,@3];

// Transformed arrays
//NSArray *numbersInSequence = @[@1,@2,@3];
//NSArray *numbersInSequence2 = @[@5]; 
```

**编辑：**

我修改了[理查德答案](https://stackoverflow.com/a/13584733/294661)中的代码以使其正常工作。

```
NSArray *arraysBySplittingNumbersInOrder(NSArray *input) {

// sort 'input'
input = [input sortedArrayUsingSelector:@selector(compare:)];

NSMutableArray *results = [NSMutableArray array];

if (input.count) {

    int start = 0;
    int last = INT_MIN;

    for (int i = 0; i < input.count; i++) {

        BOOL lastItem = i == input.count - 1;

        // The first item of the array
        if (i == 0) {

            if (lastItem) {
                [results addObject:input];
                break;
            }

            last = [input[i] intValue];
            continue;
        }

        int cur = [input[i] intValue];

        if (cur != last + 1) {

            // pull out the next array
            [results addObject:[input subarrayWithRange:NSMakeRange(start, i - start)]];

            start = i;
        }

        // The last item of the array
        if (lastItem) {

            [results addObject:[input subarrayWithRange:NSMakeRange(start, i - start + 1)]];            
        }

        last = cur;
    }
}

return results;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:54:48.983

我认为没有*简单*的方法可以做到这一点。您可能至少需要自己完成部分工作。

我的建议是对数组进行排序，然后对其进行迭代，边做边构建部分。每当您点击“跳跃”，即不连续的数字时，这会结束您当前的部分并开始新的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:56:31.963

这是一个相当简单的解决方案：

```
NSArray *arraysBySplittingNumbersInOrder(NSArray *input)
{
    // sort 'input'
    input = [input sortedArrayUsingSelector:@selector(compare:)];

    NSMutableArray *results = [NSMutableArray array];

    if (input.count)
    {
        int start = 0;
        int last = INT_MIN;

        for (int i = 0; i <= input.count; i++)
        {
            if (i == 0)
            {
                last = [input[i] intValue];
                continue;
            }
            if (i == input.count)
            {
                if (i != start + 1)
                {
                    [results addObject:[input subarrayWithRange:NSMakeRange(start, i - start)]];
                    continue;
                }
            }

            int cur = [input[i] intValue];

            if (cur != last + 1)
            {
                // pull out the next array
                [results addObject:[input subarrayWithRange:NSMakeRange(start, i - start)]];
                start = i;
            }

            last = cur;
        }
    }

    return results;
}

int main()
{
    NSArray *input = @[ @1, @3, @4, @7, @8, @12, @13, @14 ];

    NSLog(@"%@", input);
    NSLog(@"%@", arraysBySplittingNumbersInOrder(input));
} 
```

输出：

```
2012-11-27 07:55:04.609 TestProj[35890:303] (
    1、
    3、
    4、
    7、
    8、
    12,
    13,
    14
)
2012-11-27 07:55:04.611 TestProj[35890:303] (
        (
        1
    ),
        (
        3、
        4
    ),
        (
        7、
        8
    ),
        (
        12,
        13,
        14
    )
)

```

# html - phonegap - 黑莓启动画面后显示黑屏

> ID：13584599
> 
> 赞同：6
> 
> 时间：2012-11-27T12:47:24.513
> 
> 标签：html, cordova, blackberry

我已经使用 phonegap 在线构建器构建了我的应用程序，它在 android 上正常工作，但在黑莓设备（9800）上，在启动屏幕之后，它显示一个空白黑屏，顶部有一个白色水平条（约 5 px）屏幕，仅此而已。任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:06:58.150

我遇到了这个问题，我发现一旦我确定这是在头脑中，它就起作用了：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" /> 
```

# javascript - 在 Blogger 中使用时未显示某些 Google 地图功能

> ID：13584603
> 
> 赞同：2
> 
> 时间：2012-11-27T12:47:36.077
> 
> 标签：javascript, html, google-maps-api-3, blogger

我正在尝试在博客上添加谷歌地图（使用 Blogger）。该脚本使用 Blogger API 检索博客中的每个帖子并获取其位置 (Lat/Lng)。它创建了一个地图，显示连接所有这些地方的折线。它还在最后访问的地方显示了一个标记，并将地图也居中（这里应该是布宜诺斯艾利斯）。

我写了一段 html/javascript 代码来做到这一点，它在浏览器中运行良好（下面的第一张图片）。但是，当我尝试在博客页面/帖子中包含 html 代码时，地图的某些功能不再存在（下图第二张）。

![比较地图在 Firefox 和 Blogger 中的外观](../Images/4adaf4b1db315c4a07f8eddb3e8cef6d.png)

这很奇怪，因为正确显示了路径（折线）但没有显示标记。此外，不考虑地图的属性（即：中心位置、卫星视图）。但是，当我四处移动地图时，正确的地图有时会出现几分之一秒！

这是我正在测试的博客的链接：http: [//testblogapinico.blogspot.ch/p/map.html](http://testblogapinico.blogspot.ch/p/map.html)

以及生成第一张地图的实际代码（我只是在博客文章中复制/粘贴了它以获得第二张地图）：

```
<!DOCTYPE html>
<html>
<body>

<div id="content"></div>
<div id="googleMap" style="width:600px;height:900px;"></div>

<script
src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false">
</script>

<script>
var Lat = new Array();
var Lng = new Array();
var Place = new Array();

// Get latitude/longitude from Blogger
function handleResponse(response) {
    for(i=0; i< response.items.length; i++){
        Lat.push(response.items[i].location.lat);
        Lng.push(response.items[i].location.lng);
        Place.push(response.items[i].location.name);
    }
}

// Create the map based on locations retrieved from Blogger
function initialize(){
    // Get all latitude and longitude
    var pos = new Array();

    // Get the path
    for(var i=0; i<Lat.length; i++){
        pos[i]=new google.maps.LatLng(Lat[i],Lng[i]);
    }

    // Get the last position
    var lastpos=new google.maps.LatLng(Lat[0],Lng[0]);

    // Create the map
    var mapProp = {
        center:lastpos,
        zoom:4,
        mapTypeId:google.maps.MapTypeId.SATELLITE
        };

    var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

    // Create the marker of last position
    var marker=new google.maps.Marker({
            position:lastpos,
    });

    marker.setMap(map);

    // Create the path
    var flightPath = new google.maps.Polyline({
        path:pos,
        strokeColor:"#EE0000",
        strokeOpacity:0.6,
        strokeWeight:7
    });

    flightPath.setMap(map);
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>

<script
src="https://www.googleapis.com/blogger/v3/blogs/884353949349844556/posts?callback=handleResponse&key=AIzaSyAJO5J-pRCaGOIeRLIJfvAPwxpMLKvwebU">
</script>

</body>
</html> 
```

任何人都知道问题可能是什么？

预先感谢您的帮助！！！

干杯，

尼古拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:50:12.737

我看了你的页面，看起来你有两张地图，一张在另一张上面。

查看源代码，您确实有两个初始化地图的 javascript。有趣的是，它们都被命名为“初始化”——不知道为什么你不只是得到一个错误。

我猜如果你删除额外的 javascript，它会正常工作。

# javascript - D3 js函数返回未定义

> ID：13584606
> 
> 赞同：1
> 
> 时间：2012-11-27T12:47:49.477
> 
> 标签：javascript, function, d3.js, undefined

我想把它变成一个函数：

```
var meanPoints = d3.mean(data, function(d) {return d['total points'] });
console.log(meanPoints); 
```

这有效，并为我提供了 json 文件总点的平均值。但是，如果我尝试制作这样的功能：

```
function meanVak(vak) {
d3.mean(data, function(d) {return d [vak] });
}

var meanPoints = meanVak('total points');
console.info(meanPoints); 
```

它以未定义的形式返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:48:45.860

因为你没有`return`声明：

```
function meanVak(vak) {
    return d3.mean(data, function(d) {return d [vak] });
} 
```

旁注：默认情况下没有`return`语句 return的函数`undefined`。

# breeze - 是否有计划公开 Breeze.WebApi.EntityInfo 类的所有成员？

> ID：13584610
> 
> 赞同：2
> 
> 时间：2012-11-27T12:48:12.893
> 
> 标签：breeze

我需要继承 Breeze.WebApi.ContextProvider，但它使用具有内部构造函数的 EntityInfo :( 是否有计划公开 EntityInfo 类的所有成员？

```
 public class EntityInfo {
    internal EntityInfo() {
    }

    public Object Entity { get; internal set; }
    public EntityState EntityState { get; internal set; }
    public Dictionary<String, Object> OriginalValuesMap { get; internal set; }
    internal AutoGeneratedKey AutoGeneratedKey;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:18:31.000

我们已经讨论过使它们受到保护，以便子类可以在内部设置它们。（例如，参见 EFEntityInfo），但我们没有一个很好的用例来公开它们。

“受保护”是否足以满足您的用例？还是您真的需要“公开”？

# linux - 如果已经有同名文件，如何将文件复制到文件夹（Linux BASH）

> ID：13584612
> 
> 赞同：0
> 
> 时间：2012-11-27T12:48:16.423
> 
> 标签：linux, bash

例如，如果我创建了一个垃圾箱文件夹并且它`~/dustbin/File01`已经在其中，我如何将一个新文件复制到同名文件夹中？

例如：

```
cp ~/test/File01 ~/dustbin/File01 
```

但是可能会在它的末尾添加（复制）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:51:30.663

Unix 文件系统不允许在同一个文件夹中有两个同名的文件（作为参考，VMS 确实允许这样做）。

您可以使用`cat`附加：

```
cat ~/test/File01 >> ~/dustbin/File01 
```

这会在文件不存在或附加到现有文件时创建文件。

该`cp`命令还提供了进行备份的选项，因此它不会覆盖现有文件。请参阅该`--backup`选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:55:00.833

我想你在问如何检测一个文件是否已经存在，然后重命名新文件，这样它就不会被覆盖。在这种情况下：

```
if [[ -f "$HOME/dustbin/File01" ]]; then
    cp "$HOME/test/File01" "$HOME/dustbin/File01 (Copy)"
else
    cp "$HOME/test/File01" "$HOME/dustbin/File01"
fi 
```

就是你所要求的。您可以更一般地执行此操作：

```
if [[ -f "$dest" ]]; then
    cp "$source" "${dest%/*}/${dest##*/} (Copy)"
else
    cp "$source" "$dest"
fi 
```

但是，如果您不小心使用它，您的文件名中有“（复制）（复制）（复制）（复制）......”的风险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:50:39.807

`dd if=~/test/File01 >> ~/dustbin/File01`

# vb.net - 插值颜色

> ID：13584615
> 
> 赞同：2
> 
> 时间：2012-11-27T12:48:45.187
> 
> 标签：vb.net, colors, interpolation

嗨，我在 java 中有以下代码段，我需要转换为 vb.net

```
float position =(value - startValue) / (middleValue - startValue);
Color4f result = new Color4f();
result.interpolate(startColor, middleColor, position);
return result; 
```

有谁知道我如何在 vb.net 中执行 color4f.interpolate ？在这里找到了一篇使用 lambda 运算符的 c# 文章，但我不知道它们的含义以及如何在 vb.net 中实现它们

Stackoverflow 链接到 c# 文章（[.NET 中 3 种颜色之间的颜色插值](https://stackoverflow.com/questions/1236683/color-interpolation-between-3-colors-in-net?rq=1)）

vb.net 中 color4f 的最佳替代品是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:39:47.827

此功能似乎或多或少起作用：

```
Public Function interPolateColor(ByVal firstcolor As Color, ByVal secondcolor As Color, ByVal alpha As Double) As Color
    Dim R As Double = ((1 - alpha) * Convert.ToInt32(firstcolor.R)) + (alpha * Convert.ToInt32(secondcolor.R))
    Dim B As Double = ((1 - alpha) * Convert.ToInt32(firstcolor.B)) + (alpha * Convert.ToInt32(secondcolor.B))
    Dim G As Double = ((1 - alpha) * Convert.ToInt32(firstcolor.G)) + (alpha * Convert.ToInt32(secondcolor.G))
    Dim A As Byte = 255
    Return Color.FromArgb(A, Convert.ToByte(R), Convert.ToByte(G), Convert.ToByte(B))
End Function 
```

# workflow-foundation-4 - 完整的WF4动态规则引擎示例

> ID：13584617
> 
> 赞同：5
> 
> 时间：2012-11-27T12:48:49.443
> 
> 标签：workflow-foundation-4

我花了相当长的时间尝试学习 WF4（在 WF 方面我完全是 n00b），但我似乎找不到任何我正在尝试做的例子：

我需要在运行时制定 WF4 (C#) 规则，将其保存到数据库（当前是 SQL，但这对我来说并不重要），加载规则并在运行时执行它。

下面的两个示例表明这（加载和执行在运行时制定的规则）应该是可能的：

[http://www.nilzorblog.com/2011/11/using-wf4-as-rule-engine.html](http://www.nilzorblog.com/2011/11/using-wf4-as-rule-engine.html)

[http://msdn.microsoft.com/en-us/library/vstudio/ee960221(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ee960221(v=vs.100).aspx)

我有两个例子独立工作没有问题。

但是，当我尝试组合示例时（这应该很简单？）我不断收到大量的转换错误，如下所示：

*参数 2：无法从 'System.Collections.Generic.List < SharedLibrary.AssignmentRule > ' 转换为 'System.Collections.Generic.List < ExternalRuleSetLibrary.RuleSetData > '*

我已经搜索了很多天来寻找正确的例子，但没有找到任何东西。这就是为什么我在这里问大师:) 提前谢谢你！

**您能否提供一个示例或配方，说明如何在运行时制定 WF4 规则、将其保存到数据库、加载规则并在运行时执行它？**

# macos - MAC：缺少：ZLIB_INCLUDE_DIR && OPENGL_INCLUDE_DIR

> ID：13584619
> 
> 赞同：2
> 
> 时间：2012-11-27T12:49:17.717
> 
> 标签：macos, opengl, cmake, zlib

默认情况下，Zlib 应该安装在所有 mac 上，我很确定.. 但是当我为 SFML 运行 cmake 时，我收到以下错误：

```
The C compiler identification is Clang 4.1.0
The CXX compiler identification is Clang 4.1.0
Check for working C compiler using: Xcode
Check for working C compiler using: Xcode -- works
Detecting C compiler ABI info
Detecting C compiler ABI info - done
Check for working CXX compiler using: Xcode
Check for working CXX compiler using: Xcode -- works
Detecting CXX compiler ABI info
Detecting CXX compiler ABI info - done
Found OpenGL: /System/Library/Frameworks/OpenGL.framework
Found Freetype: /usr/X11R6/lib/libfreetype.dylib (found version "2.4.4")
Found GLEW: /Users/falconmick/Documents/SFML2 src/extlibs/libs-osx/lib/libGLEW.a
Found JPEG: /Users/falconmick/Documents/SFML2 src/extlibs/libs-osx/lib/libjpeg.a
CMake Error at /Applications/CMake 2.8-10.app/Contents/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:97 (message):
Could NOT find ZLIB (missing: ZLIB_INCLUDE_DIR)
Call Stack (most recent call first):
/Applications/CMake 2.8-10.app/Contents/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:291 (_FPHSA_FAILURE_MESSAGE)
/Applications/CMake 2.8-10.app/Contents/share/cmake-2.8/Modules/FindZLIB.cmake:85 (FIND_PACKAGE_HANDLE_STANDARD_ARGS)
src/SFML/Graphics/CMakeLists.txt:85 (find_package)

CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
Please set them or make sure they are set and tested correctly in the CMake files:
OPENGL_INCLUDE_DIR (ADVANCED)
used as include directory in directory /Users/falconmick/Documents/SFML2 src/src/SFML/Window

Configuring incomplete, errors occurred! 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T16:24:36.277

`ZLIB_INCLUDE_DIR`通过设置变量帮助 CMake 找到它。要么运行这个：

```
cmake -D ZLIB_INCLUDE_DIR=/path/to/zlib/include . 
```

在您的构建目录中，或通过 GUI 设置它。

# asp.net-mvc - 使用 foreach (mvc) 对通用列表进行排序以显示

> ID：13584625
> 
> 赞同：1
> 
> 时间：2012-11-27T12:49:46.847
> 
> 标签：asp.net-mvc, list, sorting

我有一个 List<> 包含在 ViewData 中。

```
reloadCollectionModel.ReloadCollection = new List<ReloadModels>();
foreach (DatoPaquete dato in result) 
{
reloadModel = new ReloadModels();  
reloadModel.IdPaquete = dato.id;     
reloadModel.Value = dato.monto;      
reloadCollectionModel.ReloadCollection.Add(reloadModel); 
}

//disordered (it's works)
ViewData["ReloadModelsCollection"] = reloadCollectionModel.ReloadCollection.AsEnumerable(); 
```

然后在剃须刀中，我使用 foreach 显示此列表。这行得通。

```
@foreach (var item in ViewData["ReloadModelsCollection3"] as List<ReloadModels>)
{
   <a href="@Url.Action("Confirm", "Reload", new { item.Value, item.IdPaquete, item.DaysToExpired })"></a>
} 
```

我的问题...当我对列表进行排序时，我不能使用 foreach 来显示它们（启动异常）。

```
ViewData["ReloadModelsCollection3"] = reloadCollectionModel.ReloadCollection.OrderBy(item => item.Value).AsEnumerable(); 
```

我需要更改我的 ViewData？或者改变我的foreach？

在此先感谢，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:51:52.933

因为你正在投射到一个列表。订购后将它们列成如下列表：

```
ViewData["ReloadModelsCollection3"] =
    reloadCollectionModel.ReloadCollection.OrderBy(item => item.Value).ToList(); 
```

那不是 AsEnumerable

# php - session_start() 在 Mac 上不起作用

> ID：13584628
> 
> 赞同：3
> 
> 时间：2012-11-27T12:49:53.380
> 
> 标签：php, macos, session

> **可能重复：**
> [当我调用 session_start() 时，如何修复权限错误？](https://stackoverflow.com/questions/4585086/how-can-i-fix-the-permission-error-when-i-call-session-start)
> [session_start() 上的 PHP 警告权限被拒绝 (13)](https://stackoverflow.com/questions/6821532/php-warning-permission-denied-13-on-session-start)

我正在尝试制作一个管理面板。不幸的是，会话在 macbook 上不起作用。我已经安装并运行了所有东西，此时还有最新的 php。

我只是无法让它在我的 Mac 上运行。它确实适用于我的付费托管，但我无法解决这个问题。

请帮我解决这个问题。我相信这与许可写作有关。

![ACP 预览](../Images/cacf7b9aa3cb7700ab3ca33ada60f238.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:55:16.433

session_start() 上的 PHP 警告权限重复[被拒绝 (13)](https://stackoverflow.com/questions/6821532/php-warning-permission-denied-13-on-session-start)

它基本上是写权限，您也可以右键单击文件夹并授予所有人访问权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T12:56:42.337

您需要更改以下权限：

```
/var/folders 
```

我建议更改文件夹的所有权：

```
sudo chown -R nobody /var/lib/php/session
sudo chgrp -R nobody /var/lib/php/session 
```

'nobody' 选项是您的网络服务器在其下运行的用户，对于第二个命令，它是组。

注意：文件夹需要更改为您设置 session.save_path 的位置。在上面的问题中，文件夹是`/var/folders`这样的代码`chown -R nobody /var/folders`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T12:53:16.060

为您的会话文件夹设置更多权限：

```
/var/folders/ 
```

[将会话保存路径](http://php.net/manual/de/function.session-save-path.php)设置为临时目录可能会更好。

# linux - OCaml 编译错误：/usr/bin/ld: 找不到 -lstr

> ID：13584629
> 
> 赞同：11
> 
> 时间：2012-11-27T12:49:54.803
> 
> 标签：linux, ubuntu, ocaml, nltk

我正在尝试在 Ubuntu 64 机器上编译[MEGAM Ocaml 库的源代码。](http://www.cs.utah.edu/~hal/megam/)

我安装了 OCaml (v 3.12.1)，使用`sudo apt-get install ocaml`.

在终端中对解压缩的源代码运行“make”命令时遇到问题，OCaml 返回错误：

```
/user/bin/ld: cannot find -lstr
collect2: error: ld returned 1 exit status 
```

makefile 正在生成以下两个命令：

```
 ocamldep *.ml > .depend 
```

运行时没有错误

> ocamlc -g -custom -o megam str.cma -cclib -lstr bigarray.cma -cclib -lbigarray unix.cma -cclib -lunix -I /usr/lib/ocaml/caml fastdot_c.c fastdot.cmo intHashtbl.cmo arry。 cmo util.cmo data.cmo bitvec.cmo cg.cmo wsemlm.cmo bfgs.cmo pa.cmo perceptron.cmo radapt.cmo kernelmap.cmo abffs.cmo main.cmo

运行时抛出上述错误。

我尝试从编译命令中删除 -lstr，它停止抛出该特定错误，但开始抛出另一个错误`Reference to undefined global 'Bigarray'`（我需要设置。

任何帮助都非常感谢，即使它只是在黑暗中拍摄，因为我真的很难想出任何东西！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-27T13:23:07.773

[这里给出的说明](http://church.cs.virginia.edu/genprog/index.php/FAQ#I_get_the_error:_cil_file_.22is_not_a_compiled_interface.22._What_do_I_do.3F)允许我编译没有错误。它归结为：

```
locate libcamlstr 
```

这告诉我 libcamlstr 可以在`/usr/lib/ocaml`（YMMV）中找到，所以我这样做：

```
cd /usr/lib/ocaml
sudo ln -s libcamlstr.a libstr.a 
```

然后我就可以编译项目了：

```
cd /usr/local/src/cil
make clean && ./configure && make 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-20T14:13:52.557

你可以从

```
-lstr 
```

至

```
-lcamlstr 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T15:33:05.177

请参阅 OCaml 错误跟踪器中此错误的最后一条评论：

[错误 5247](http://caml.inria.fr/mantis/view.php?id=5247)

# magento - Magento：在布局文件中使用自定义变量

> ID：13584630
> 
> 赞同：1
> 
> 时间：2012-11-27T12:50:02.097
> 
> 标签：magento

是否可以`Custom Variables`在布局文件中使用？我可以在这样的模板文件中使用它们：

```
Mage::getModel('core/variable')->loadByCode('variableCode')->getData('store_plain_value') 
```

但不确定xml文件。

我知道我可以改用上面的方法，但这对于将来的使用也很有用。

> **更新：**恐怕最不清楚。我特别希望访问管理面板的“自定义变量”部分，而不仅仅是将我自己的变量传递给一个块。我为缺乏明确性表示歉意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:17:53.460

`Mage_Core_Block_Abstract`扩展`Varien_Object`并继承其`__call()`重载。尽管布局 XML 中的块操作调用块方法，但以下是可能的：

传递一个字符串（它可以被翻译！）：

```
<action method="setSomeVal" translate="arg" module="some/helper">
    <arg>Some String</arg>
</action> 
```

传递一个数组：

```
<action method="setSomeVal">
    <arg>
        <key1>Some String</key1>
        <key2>Some String</key2>
        <key3>
            <multikey1>Some String</multikey1>
        </key3>
    </arg>
</action> 
```

传递你想要的任何东西：

```
<action method="setSomeVal">
    <arg helper="some/helper/method">
        <param_for_the_helper_method>
            <getting_crazy>Oh Boy.</getting_crazy>
        </param_for_the_helper_method>
</action> 
```

使用 检索块/模板中的值`$this->getSomeVal();`。

好玩吧？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T15:08:48.403

您是否尝试过以下操作：

```
<!-- in layout xml file -->
<action method="setData"><name>color_id</name><value>5</value></action> 
```

然后，您可以在块文件中使用，如下所示：

```
 $colors = $this->getColorId();
# or
  $colors = $this->getData('color_id'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T16:33:30.920

基于更新的问题：

创建一个包装功能的辅助类`core/variable`，例如：

```
class Some_Module_Helper_Variable
{
    public function getVariableData($code,$param)
    {
        return Mage::getModel('core/variable')->loadByCode($code)->getData($param);
    }
} 
```

然后，在您的块的布局 XML 中，您可以这样做（我相信）：

```
<action method="setSomeVal">
    <arg helper="class_group/variable/getVariableData">
        <arg1>variableCode</arg1>
        <arg2>store_plain_value</arg2>
    </arg>
</action> 
```

# python-3.2 - 如何在使用海龟时摆脱 python3 中的空格？

> ID：13584637
> 
> 赞同：1
> 
> 时间：2012-11-27T12:50:27.030
> 
> 标签：python-3.2

你如何删除python3中的空格？

我正在编写一个需要完成各种测试的程序。该程序使用turtle，基本上用户输入各种命令，程序需要运行turtle来完成它们。其中一项测试如下所示：

```
forward 200
right 90
forward 400
right 90
forward 100
right 90
forward 400
right 90
forward 100 
```

最后两行是空白，到目前为止我的程序可以运行它们，但是当它到达空白时它会崩溃。如何让 python 去掉这个空格，我应该把它放在我的代码中的什么地方？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:40:15.913

我不确定你的指令是如何存储的，所以我会给你一个我最可能的假设的答案。

**这是一个清单**

这是最简单的...使用列表推导来摆脱任何完全由空格组成的指令

```
instruction_list = [instruction.strip() for instruction in instruction_list if instruction.strip()] 
```

**这是一个带有换行符的大长字符串**

```
instruction_list = instruction_string.split('\n') #make a list
instruction_list = [instruction.strip() for instruction in instruction_list if instruction.strip()] #process list as before
instruction_string = '\n'.join(instruction_list) #reconstruct string 
```

**这是一个文件**

```
for line in instruction_file:
    if not line.strip(): #if the line is made up entirely of whitespace
        continue         #skip to the next loop iteration
    process_instruction(line) 
```

# css - chrome中的打印命令不应用css样式

> ID：13584642
> 
> 赞同：2
> 
> 时间：2012-11-27T12:50:55.097
> 
> 标签：css, google-chrome, printing, styles, media

我需要在打印文档中画一条小的垂直分隔线。当我通过 CSS 类应用它时，它在 firefox 和 IE8 上运行得很好，但样式不适用于 chrome。样式在我的 css 文件的@media print 中。

```
.verticalLine1 
{border:0.5px #B1B1B1;
border-style:solid;
border-top-width:15px;
width:1px;
} 
```

任何解决这个问题的指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:38:22.707

在你的 CSS 文件中试试这个：

```
.verticalLine1 {
    visibility: hidden;
    border: 0.5px #B1B1B1;
    border-style: solid;
    border-top-width: 15px;
    width: 1px;
}
@media print {
    .verticalLine1 {
        visibility: visible;
    }
} 
```

**并包含没有** `media="screen"`属性且**没有**任何 JavaScript 点击事件的 CSS 文件

```
<link href="styles/print.css" rel="stylesheet" type="text/css"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:46:06.000

经过 2 天的悲惨经历，我无法找到适当的解决方案。但几乎没有其他选择

与代码内联编写样式非常完美。代码如下

```
<div style="border:0.5px #B1B1B1;border-style:solid;border-top-width:15px;width:1px;"></div> 
```

由于以前的方法不是很好的编码实践，我被迫创建具有上述尺寸的图像，并将其添加为代码的一部分。

感谢 chrome.Atleast 它添加了图像，如果不是 css 的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T07:12:12.607

为边框添加图像绝不是一个好主意。此外，您需要记住，chrome 会将十进制值截断为最接近的较低数字。由于这个 0.5px 将被解释为 0px 。我会建议使用 1px 而不是 0.5px。这将消除很多问题。

# c# - listview mvvm中的WPF删除按钮

> ID：13584643
> 
> 赞同：7
> 
> 时间：2012-11-27T12:50:57.480
> 
> 标签：c#, wpf, mvvm

我在列表视图中有一个按钮来删除选定的项目。当我单击按钮时，RemoveSubjectCommand 没有触发。如果我将按钮放在列表视图之外，它工作正常。hopw 这只是因为嵌套项目。我怎么解决这个问题？

```
<ListView HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
        HorizontalContentAlignment="Stretch" Grid.ColumnSpan="3" Grid.Row="2"
        ItemsSource="{Binding AssignedSubjects}">
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <Setter Property="HorizontalContentAlignment" Value="Center" />
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.View>
        <GridView>
            <GridViewColumn Width="140" Header="Subjects" DisplayMemberBinding="{Binding Name}" />
            <GridViewColumn Width="auto">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="X" Command="{Binding RemoveSubjectCommand}"  />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

查看模型，

```
private ICommand removeSubjectCommand;
**
public ICommand RemoveSubjectCommand
{
    get { return removeSubjectCommand ?? (removeSubjectCommand = new RelayCommand(param => this.RemoveSubject(), null)); }
}
**
private void RemoveSubject()
{ ***
} 
```

如果我输入以下代码，它将正常工作。

```
<ListView.InputBindings>
    <KeyBinding Key="Delete" Command="{Binding RemoveSubjectCommand}" />
</ListView.InputBindings> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T12:57:43.657

那是因为按钮的DataContext是ListBoxItem DataContext。所以你需要去父ListView DataContext。

一种方法是给 ListView 一个名称，并与元素名称绑定

```
<ListView Name="lv" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
        HorizontalContentAlignment="Stretch" Grid.ColumnSpan="3" Grid.Row="2"
        ItemsSource="{Binding AssignedSubjects}">
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <Setter Property="HorizontalContentAlignment" Value="Center" />
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.View>
        <GridView>
            <GridViewColumn Width="140" Header="Subjects" DisplayMemberBinding="{Binding Name}" />
            <GridViewColumn Width="auto">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Button Content="X" Command="{Binding ElementName=lv,Path=DataContext.RemoveSubjectCommand}"  />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-27T12:54:17.457

您需要将 Command 绑定到使用**[FindAncestor](http://msdn.microsoft.com/en-us/library/ms743599.aspx)**。否则，它将尝试`RemoveSubjectCommand`使用*ListViewItem*的数据上下文绑定到 a，而不是 ViewModel 的。

试试这个：

```
<Button Content="X" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ListView}, Path=DataContext.RemoveSubjectCommand}"  /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T12:56:53.407

> 如果我将按钮放在列表视图之外，它工作正常

因为`RemoveSubjectCommand`属性是在 的数据上下文中定义的`ListView`，而不是在*item*的数据上下文中。

# c - 检测正弦波的频率/周期

> ID：13584644
> 
> 赞同：0
> 
> 时间：2012-11-27T12:51:01.787
> 
> 标签：c, microcontroller, avr, trigonometry, atmega

我只需要一些关于如何从正弦波中检测频率的指导。我通过 DtoA 转换器生成了正弦波。现在，我通过 AtoD 将该信号放回以监控和验证输出。

我不知道如何检测正弦波的频率。显然，我应该从正弦波中获取周期并应用滞后来补偿噪声。任何提示都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:56:10.990

如果这只是关于正弦波，我会检查零交叉，并计算几百个周期的零交叉之间的平均时间，这将给出一个准确的半周期长度，然后你可以计算频率。

（“零”可能不是微不足道的，因为大多数 uC 只有 0-Vdd 范围的 ADC 输入，所以在这种情况下，零可能恰好是 Vdd/2...）

（非常简单）伪代码可能是

```
const zero = 0; //or vdd/2 if that's the case
while(cyclesSoFar<enoughCycles) {
    currentSample=adcRead();
    //detect zero crossing (needs hysteresis added)
    if((lastSample>zero&&currentSample<=zero) || (lastSample<zero&&currentSample>=zero) ) {
        period = getTicks()-ticksAtLastCrossing; //might have to check for over/underflow to get correct value
        avgPeriod = avgPeriod * (cyclesSoFar)/(cyclesSoFar+1) + period/(cyclesSoFar+1);
        cyclesSoFar++;
    }
    lastSample = currentSample;
}
freq = ticksFreq/(avgPeriod*2); 
```

其中： enoughCycles 是要测量的周期数，零是正弦波的 DC 偏移量，ticksFreq 是 CPU 的频率，可用的最精确时间。当然，这是非常非常简单的，需要添加大量的绒毛和检查。

# java - 通过序列化在应用程序之间传输 Java 类

> ID：13584646
> 
> 赞同：0
> 
> 时间：2012-11-27T12:51:22.940
> 
> 标签：java, serialization

我已经成功序列化了Ghost*类：*

```
class Ghost {}

File file = new File("serialized.class.bin");
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(file));
oos.writeObject(Ghost.class); 
```

然后我试图在*不同*的应用程序中恢复它：

```
InputStream is = new FileInputStream(new File("serialized.class.bin"));
ObjectInputStream ois = new ObjectInputStream(is);
Object o = ois.readObject(); 
```

我收到错误，在（尝试）加载它时错过了类：

```
java.lang.ClassNotFoundException: Ghost 
```

反序列化类时我可能无法访问`Ghost.class`文件。是否可以以这种方式传输 Java 类？

**升级版**。我假设在序列化类时正在转储类定义（字节码）。我错了。不过，通过[getResourceAsStream()](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getSystemResourceAsStream%28java.lang.String%29)可以达到目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T12:56:42.450

序列化`Class`对象只是存储对类名的引用，它实际上并不存储类字节码（嗯，它比实际操作稍微复杂一些，但效果是一样的）。在反序列化时，`ObjectInputStream`将尝试从其自己的类加载器中按名称加载类，因此该类需要已经可以通过该类加载器访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T12:53:30.957

反序列化类时，您需要在类路径中包含类文件，因为反序列化格式仅包含类非瞬态非静态字段的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:55:14.927

当你反序列化一个序列化对象时，对象的类必须在类路径上。

在这种情况下，a`ClassNotFoundException`很可能意味着所需的类不在类路径上。您必须解决这个问题才能使反序列化工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T12:56:49.610

您正在尝试序列化一个不包含任何数据的类，因为它是一个类。如果要发送类，请发送 .class 文件的字节并使用类加载器加载它。
序列化的目的是将对象转换为字节并将其转换回来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T12:58:08.403

如果要加载类文件不在类路径上的类，则需要使用[ClassLoader.defineClass](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#defineClass%28java.lang.String,%20byte%5B%5D,%20int,%20int%29)。作为参数传递给该方法的字节数组应该包含类文件的内容（**而不是**序列化的类对象）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T13:57:55.553

如果您想将一个类从流的一端传输到另一端，您可以将`.class`文件本身推送到流上，将其保存到文件中，然后使用该`ClassLoader`设备将其加载到 JVM 中。我不知道这在 JVM 版本等方面的可移植性如何。

# jquery - 试图将 post 的结果加载到 div 中

> ID：13584649
> 
> 赞同：1
> 
> 时间：2012-11-27T12:51:39.767
> 
> 标签：jquery, cordova

我得到了这个功能：http: [//jsfiddle.net/Cy4AZ/](http://jsfiddle.net/Cy4AZ/)

该函数正在执行它应该在后端执行的操作。

但我不能让它“循环”通过该行中的结果说：

```
$("#businesscardOffline")
    .empty()
    .html("Synchronized data for:<br>Name: "+name+"<br>Title: "+title)
    .fadeIn(1500)
    .delay(1000)
    .fadeOut(1500); 
```

但在紧随其后的那一行：

```
console.log("We are here!!! Name: " + name); 
```

它正在打印出我所期望的控制台。

该函数是从另一个加载在 deviceready 上的 JS 函数调用的。

（这是在带有 Phonegap 的 Android 设备上运行的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:54:02.320

您需要`.fadeOut()`在 的完整回调上调用您的`.fadeIn()`，如下所示：

在循环进入**之前**清空 div ：

```
$("#businesscardOffline").empty(); 
```

然后在循环内只需将新内容附加到 div：

```
$("#businesscardOffline").append("Synchronized data for:<br>Name: "+name+"<br>Title: "+title).fadeIn(1500, function() { $(this).delay(1000).fadeOut(1500); }); 
```

# javascript - 用js构建正则表达式字符串

> ID：13584655
> 
> 赞同：4
> 
> 时间：2012-11-27T12:52:13.080
> 
> 标签：javascript, regex, replace

```
<script>
var String = "1 Apple and 13 Oranges";
var regex = /[^\d]/g;
var regObj = new RegExp(regex);
document.write(String.replace(regObj,'')); 
</script> 
```

它工作正常 - 返回字符串中的所有数字。

但是，当我像这样在正则表达式周围加上引号时：

`var regex = "/[^\d]/g";` **这行不通**。

在这种情况下，如何将字符串转换为有效的正则表达式？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T12:56:46.963

您可以通过两种方式创建正则表达式，使用正则表达式文字符号或 RegExp 构造函数。看来你把两者混为一谈了。:)

这是字面意思：

```
var regex = /[^\d]/g; 
```

在这种情况下，您没有使用引号。末尾的 / 字符用作分隔符，您在末尾指定标志。

以下是如何使用 RegExp 构造函数，在其中将模式和标志（可选）作为字符串传递。当您使用字符串时，您必须使用“\”转义其中的任何特殊字符。

由于'\'（反斜杠）是一个特殊字符，如果使用双引号，则必须使用另一个反斜杠来转义反斜杠。

```
var regex = new RegExp("[^\\d]", "g"); 
```

希望这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:58:19.337

由于 slash( `\`) 对字符串有特殊的含义（例如“\n”、“\t”等...），当您传递给正则表达式时，您需要转义该符号：

```
var regex = "[^\\d]"; 
```

表达式标志（例如`g`，`i`等...）也必须作为单独的参数传递给`RegExp`. 所以总的来说：

```
var regex = "[^\\d]";
var flags = "g";
var regObj = new RegExp(regex, flags); 
```

# wpf - Wpf椭圆切掉顶部和底部

> ID：13584658
> 
> 赞同：0
> 
> 时间：2012-11-27T12:52:20.027
> 
> 标签：wpf, xaml, ellipse

我需要绘制一个看起来像我的示例的椭圆（或其他任何东西？）（我的意思是粗略地用油漆绘制）

![椭圆](../Images/95eeea290f78df8827fceed1c7911b4b.png)

任何建议如何开发这个？

我试过剪辑，但我只能切断顶部或底部（或者我做错了什么？）

```
<Canvas Width="16" Height="16">
    <Ellipse Fill="Red" MinHeight="16"  Name="ellipse1" Stroke="White" StrokeThickness="1" MinWidth="16" >
        <Ellipse.Clip>
            <RectangleGeometry Rect="0,0,16,10"/>
        </Ellipse.Clip>
    </Ellipse>
</Canvas> 
```

最好的情况是，如果它是一个圆圈，可以动态地将大小更改为内容

谢谢马库斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T13:34:59.340

使用[路径](http://msdn.microsoft.com/en-us/library/ms752293.aspx)

```
<Canvas>
    <Path Data="M 30, 0 A 10,10 90 0 1 30,20 H 10 A 10,10 90 0 1 10,0 Z" 
          Fill="Red" Stroke="Black"/>
</Canvas> 
```

![在此处输入图像描述](../Images/ef14162e4896e45811836a6b26171070.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T13:26:33.170

我喜欢你提供的那个屏幕截图！Clip 应该能够提供我认为您所追求的顶部和底部剪辑，见下文。

![在此处输入图像描述](../Images/aeeffc9ae4c260077be904cbf9c220d3.png)

```
<Canvas Width="16" Height="16" Margin="80,50,421,254">
   <Ellipse Fill="Red" MinHeight="16"  Name="ellipse1" Stroke="White" StrokeThickness="1" MinWidth="16" Height="100" Width="100" >
       <Ellipse.Clip>
            <RectangleGeometry Rect="0,25,100,50"/>
       </Ellipse.Clip>
   </Ellipse>
</Canvas> 
```

RectangleGeometry 的属性是（按顺序）Left offset、Top offset、width、height。因此，从您想要截断顶部的剪辑区域开始，并在您想要截断底部的位置停止它。

# json - 杰克逊：过滤空值或空白值，同时使用杰克逊将 json 字符串响应转换为 pojo 转换

> ID：13584661
> 
> 赞同：3
> 
> 时间：2012-11-27T12:52:40.350
> 
> 标签：json, liferay, jackson, liferay-6, pojo

我正在使用杰克逊将杰森响应转换为 pojo 列表。以下是我得到的回应。

```
[

    {
        "code": "",
        "total": 24,
        "name": null
    },
    {
        "code": "",
        "total": 1,
        "name": "Test"
    }
] 
```

我正在将其转换为 Pojo 列表。下面是我的pojo。

```
public class ItemCategory {

private String code;
private String name;
private String total;

public ItemCategory() {
}

public ItemCategory(final String code, final String name, final String total) {
    super();
    this.code = code;
    this.name = name;
    this.total = total;
}

/**
 * @return the code
 */
public String getCode() {
    return code;
}

/**
 * @param code
 *            the code to set
 */
public void setCode(final String code) {
    this.code = code;
}

/**
 * @return the name
 */
public String getName() {
    return name;
}

/**
 * @param name
 *            the name to set
 */
public void setName(final String name) {
    this.name = name;
}

/**
 * @return the count
 */
public String getTotal() {
    return total;
}

/**
 * @param count
 *            the count to set
 */
public void setTotal(final String total) {
    this.total = total;
}
} 
```

一切正常。但我想删除要转换为 pojo 的值，它的代码为空白/空值。即“代码”：“”，或“代码”：空

我正在使用下面的杰克逊代码将 json 转换为 pojo。

```
Object pojo = null;
try {
    pojo = mapper.readValue(jsonString, typeReference);
} catch (JsonParseException e) {
    throw new InvalidPojoException(e.toString(), e);
} catch (JsonMappingException e) {
    throw new InvalidPojoException(e.toString(), e);
} catch (IOException e) {
    throw new InvalidPojoException(e.toString(), e);
} catch (Exception e) {
    throw new InvalidPojoException(e.toString(), e);
}
return pojo; 
```

使用下面的 json 代码来反对。

```
(List<ItemCategory>) JsonParserUtil.toPojo(serviceResponse.getStringResponse(),new TypeReference<List<ItemCategory>>(){}); 
```

任何指针将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T23:00:07.413

您可能希望像这样注释您的 bean 类：

```
@JsonSerialize(
include=JsonSerialize.Inclusion.NON_NULL,
) 
```

来源：[JsonSerialize 注解 javadoc](http://jackson.codehaus.org/1.6.3/javadoc/org/codehaus/jackson/map/annotate/JsonSerialize.html#include%28%29)

# sharepoint-2010 - 更新-SPSolution 后出现 SharePoint 404 错误

> ID：13584663
> 
> 赞同：0
> 
> 时间：2012-11-27T12:52:50.680
> 
> 标签：sharepoint-2010

更新 SharePoint 2010 解决方案后出现 404 错误，我不知道原因。我分析了日志文件，更新过程成功，所有更改的文件都已被替换、添加或删除。日志告诉更新也成功了。通过浏览器打开站点集合后，显示 404 错误，站点集合不可访问。

我在解决方案中做了什么改变：

添加了两个元素文件

*   删除了一个未使用的空功能
*   删除了一个过时的自定义 MasterPage
*   添加了自定义用户控件

WebConfig 已成功更新，它在 SafeControls 中包含程序集，并具有正确的值。

这个部署的解决方案的内容数据库似乎也很好。

SiteCollection 设置可通过 PowerShell 访问。该集合确实存在于配置中，并且所有值似乎也很好。

我也检查过 Fiddler。它说没有文件。我也确实多次进行了 IIS 重置。

使用更新的解决方案创建新网站集没有问题。最后要添加的内容：ListDefinitions、ContentTypes 没有变化。仅对 ONET.xml 进行了一些更改（从站点定义中删除自定义母版页）。

希望有人遇到过这个问题并且知道如何处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:06:28.747

我得到了解决方案，我想与你分享。我认为它是 SharePoint 2010 中的一个错误，没有很好的记录..甚至没有记录。

以下场景：我们已经部署了一个带有自定义母版页的包。我们现在处于需要从包中重命名或删除母版页的情况。我们正在执行 Update-SPSolution，结果是该特定站点集合的 404 错误。当我们分析日志或任何其他部分时，我们不会得到任何错误，没有关于这个错误的信息，日志中的一切似乎都工作正常。

但那是谎言。在我们执行更新的那一刻，分配给该特定网站集的母版页消失了，并在初始化期间发生空异常，该异常不会被记录。结果是 404 错误。

我现在花了一天时间来开发修复程序。在我们继续更新之前，我们必须删除并使用不同的母版页引用解决方案。这可以通过 PowerShell 完成。例如，它可能看起来像这样：

```
# Delte old custom masterpage
$web = get-spweb http://development/mysite
$lib =$web.GetFolder("_catalogs/masterpage")
$file = $lib.Files["MyMaster.master"];
$file.Delete();
$web.Dispose();
# Revert Branding to SP Default
$site = Get-SPSite http://development/mysite
$site | Get-SPWeb -limit all | ForEach-Object { $_.MasterUrl = $_.ServerRelativeUrl + "/_catalogs/masterpage/v4.master";$_.Update() }
$site.Dispose() 
```

在我们手动删除母版页后，我们可以继续进行解决方案更新，一切都会正常工作。希望这会帮助任何处于相同情况的人。

更新：我认识到有时 powershell 无法删除母版页。这是因为母版页仍在内存中。因此，我们需要清理 GC。因此这里更新的脚本：

# 删除旧的自定义母版页

```
[System.GC]::Collect()
[System.GC]::WaitForPendingFinalizers()
$web = get-spweb http://development/mysite
$lib =$web.GetFolder("_catalogs/masterpage")
$file = $lib.Files["MyMaster.master"];
$file.Delete();
$web.Dispose();
# Revert Branding to SP Default
$site = Get-SPSite http://development/mysite
$site | Get-SPWeb -limit all | ForEach-Object { $_.MasterUrl = $_.ServerRelativeUrl + "/_catalogs/masterpage/v4.master";$_.Update() }
$site.Dispose() 
```

# c++ - 执行完成后杀死子进程（在 fork 之后）

> ID：13584672
> 
> 赞同：2
> 
> 时间：2012-11-27T12:53:36.650
> 
> 标签：c++

我正在编写一个简单的 Web 服务器。简化形式的程序如下

```
while(1)
{
     // accepting the connection.
     accept();

     pid = fork();

     if(pid == 0)
     { 
          // performing some operations
          _exit(EXIT_SUCCESS);

     } else {

          sleep(1);
     }
} 
```

所以一旦子进程执行它应该终止，并且父进程应该继续接受连接。但是，对我来说，子进程并没有被终止，甚至它（子）也在接受连接。我在这里做错了吗。

我能够看到进程（子）没有被使用。

```
top -U <username> 
```

我需要这方面的帮助。提前致谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:57:09.863

父进程必须调用[`wait`](http://pubs.opengroup.org/onlinepubs/009695399/functions/wait.html)才能“收割”子进程。

您需要为子进程“等待”的原因是因为在进程退出后仍有资源剩余，用于子进程的退出代码。（及其兄弟系统调用）正在做`wait`的不仅是等待子进程结束，而且还要获取退出代码，以便操作系统可以正确清理子进程。如果父进程在自己退出之前没有等待所有子进程退出，那么所有子进程都将成为孤立进程，并且将具有进程 id 的进程`1`设置为它们的父进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T12:38:37.343

首先感谢大家帮助我。我的代码中有错误。:)

问题是在接受连接和分叉后，在子进程中我`close()`使用接受方法中使用的文件描述符到达套接字连接，例如

```
accept(sockfd, (struct sockaddr *) &cli_addr, &clilen); 
```

then`close(sockfd)`应该在子进程中调用。由于它没有在子进程中关闭，因此套接字对于`accept()`连接是活动的。因此，尽管如此`_exit()`，在关联的套接字文件描述符关闭之前，子进程不会被终止。

在我们必须调用的父进程中，`wait()`或者`waitpid()`根据您需要从进程表中删除子进程并避免其僵尸状态。

# wpf - MultiBinding ConvertBack 问题

> ID：13584673
> 
> 赞同：2
> 
> 时间：2012-11-27T12:53:36.760
> 
> 标签：wpf, multibinding, imultivalueconverter

在尝试解决我在另一个项目中遇到的问题时 - 我创建了以下示例来复制该问题。

这个想法是，当用户通过滑块或文本框输入新值时，这些值应该通过转换器“ConvertedBack”，并更新源。不过，我似乎没有看到这一点，我相信是因为正在写入 InternalRep 的属性，但没有通知 InternalRepProperty 的绑定表达式。

解决这个问题的最佳方法是什么？

我尝试的一种方法是处理滑块 ValueChanged 事件，但这导致转换器... ConvertBack*然后*Convert*然后*ConvertBack*然后*Convert，不知道为什么。

当用户更改一个值时，我需要转换器仅 ConvertBack 来更新源，没有别的，..这可能吗？

TextSplitter XAML

```
<ContentControl x:Class="WpfApplication23.TextSplitter"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:local="clr-namespace:WpfApplication23"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <UniformGrid Columns="3" Rows="2">
        <TextBox Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:TextSplitter}}, 
                 Path=InternalRep.First, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />

        <TextBox Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:TextSplitter}}, 
                 Path=InternalRep.Second, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />

        <TextBox Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:TextSplitter}}, 
                 Path=InternalRep.Third, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />

        <Slider  Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:TextSplitter}}, 
                 Path=InternalRep.First, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Maximum="255" />

        <Slider  Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:TextSplitter}}, 
                 Path=InternalRep.Second, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Maximum="255" />

        <Slider  Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:TextSplitter}}, 
                 Path=InternalRep.Third, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" Maximum="255" ValueChanged="OnSliderChnaged" />
    </UniformGrid>

</ContentControl> 
```

文本分割器 C#

```
public class InternalRep
    {
        public int First { get; set; }
        public int Second { get; set; }
        public int Third { get; set; }
    };

    public class LettersToInternalRepMultiConvertor : IMultiValueConverter
    {
        public object Convert(object[] values, Type targetType,
               object parameter, System.Globalization.CultureInfo culture)
        {
            InternalRep ir = new InternalRep()
            {
                First = (int)(char)values[0],
                Second = (int)(char)values[1],
                Third = (int)(char)values[2],
            };

            return ir;
        }

        public object[] ConvertBack(object value, Type[] targetTypes,
               object parameter, System.Globalization.CultureInfo culture)
        {
            InternalRep ir = (InternalRep)value;
            if (ir != null)
            {
                return new object[] 
                { 
                    (char)ir.First, 
                    (char)ir.Second, 
                    (char)ir.Third 
                };
            }
            else
            {
                throw new Exception();
            }
        }
    }

    public partial class TextSplitter : ContentControl
    {
        public static readonly DependencyProperty FirstProperty = DependencyProperty.Register(
        "First", typeof(char), typeof(TextSplitter));

        public static readonly DependencyProperty SecondProperty = DependencyProperty.Register(
        "Second", typeof(char), typeof(TextSplitter));

        public static readonly DependencyProperty ThirdProperty = DependencyProperty.Register(
        "Third", typeof(char), typeof(TextSplitter));

        public static readonly DependencyProperty InternalRepProperty = DependencyProperty.Register(
        "InternalRep", typeof(InternalRep), typeof(TextSplitter));

        BindingExpressionBase beb = null;

        public TextSplitter()
        {
            InitializeComponent();

            MultiBinding mb = new MultiBinding();
            mb.Mode = BindingMode.TwoWay;
            mb.Bindings.Add(SetBinding("First"));
            mb.Bindings.Add(SetBinding("Second"));
            mb.Bindings.Add(SetBinding("Third"));
            mb.Converter = new LettersToInternalRepMultiConvertor();

            beb = SetBinding(InternalRepProperty, mb);
        }

        Binding SetBinding(string _property)
        {
            Binding b = new Binding(_property);
            b.Mode = BindingMode.TwoWay;
            b.Source = this;
            return b;
        }

        public char First
        {
            get { return (char)GetValue(FirstProperty); }
            set { SetValue(FirstProperty, value); }
        }

        public char Second
        {
            get { return (char)GetValue(SecondProperty); }
            set { SetValue(SecondProperty, value); }
        }

        public char Third
        {
            get { return (char)GetValue(ThirdProperty); }
            set { SetValue(ThirdProperty, value); }
        }
    } 
```

主窗口 XAML

```
<Window x:Class="WpfApplication23.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication23"
        Title="MainWindow" Height="640" Width="800" WindowStartupLocation="CenterScreen">
    <StackPanel>
        <local:TextSplitter First="{Binding A, Mode=TwoWay}"
                            Second="{Binding B, Mode=TwoWay}"
                            Third="{Binding C, Mode=TwoWay}"/>
    </StackPanel>
</Window> 
```

主窗口代码

```
namespace WpfApplication23
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
        }

        char m_a = 'a';
        public char A
        {
            get { return m_a; }
            set { m_a = value; }
        }

        char m_B = 'b';
        public char B
        {
            get { return m_B; }
            set{ m_B = value; }
        }

        char m_c = 'c';
        public char C
        {
            get { return m_c; }
            set { m_c = value; }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:59:08.397

您需要在 ViewModel 中实现 INotifyPropertyChanged。
在这里， ViewModel 是 Window ，所以你必须这样做：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        this.DataContext = this;
        InitializeComponent();
    }

    char m_a = 'a';
    public char A
    {
        get { return m_a; }
        set
        {
            if (value != m_a)
            {
                m_c = value;
                RaisePropertyChanged("A");
            }
        }
    }

    char m_B = 'b';
    public char B
    {
        get { return m_B; }
        set
        {
            if (value != m_B)
            {
                m_c = value;
                RaisePropertyChanged("B");
            }
        }
    }

    char m_c = 'c';
    public char C
    {
        get { return m_c; }
        set
        {
            if (value != m_c)
            {
                m_c = value;
                RaisePropertyChanged("C");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void RaisePropertyChanged(string _Prop)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(_Prop));
        }
    }

    DelegateCommand _RecomputeCommand;
    public DelegateCommand RecomputeCommand
    {
        get { return _RecomputeCommand ?? (_RecomputeCommand = new DelegateCommand(Recompute)); }
    }

    public void Recompute()
    {
        //Do something with A, B and C.
    }
} 
```

**编辑：**您应该简单地将 3 个滑块绑定到 A、B、C（您需要上述实现），然后像这样对 RecomputeCommand 采取行动：

```
<StackPanel>
    <Slider Value="{Binding A}" Maximum="255">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="ValueChanged">
                <i:InvokeCommandAction Command="{Binding RecomputeCommand}" />
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </Slider>
    <Slider Value="{Binding B}" Maximum="255">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="ValueChanged">
                <i:InvokeCommandAction Command="{Binding RecomputeCommand}" />
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </Slider>
    <Slider Value="{Binding C}" Maximum="255">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="ValueChanged">
                <i:InvokeCommandAction Command="{Binding RecomputeCommand}" />
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </Slider>
</StackPanel> 
```

当然这可以`ContentControl`根据需要进行。

# linux - egrep 多个 AND 与范围查询

> ID：13584674
> 
> 赞同：0
> 
> 时间：2012-11-27T12:53:37.267
> 
> 标签：linux, grep

我正在尝试获取已被定义范围内的 php 服务占用的端口列表。

这似乎工作正常..

```
lsof | grep -E 'php.+55000.+LISTEN'
php       6446  user   11u     IPv4             694089      0t0        TCP *:55000 (LISTEN) 
```

但是当我将其设为范围查询时，它似乎没有给出正确的结果

```
lsof | grep -E 'php.+[55000-55001].+LISTEN'
php       6446  user   11u     IPv4             694089      0t0        TCP *:55000 (LISTEN)
php       6446  user   12u     IPv4             694090      0t0        TCP *:51000 (LISTEN) 
```

请帮忙，我的正则表达式技能是业余的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:40:40.717

您正在寻找的是 `lsof -i`选项。在手册页上它说：

```
To list all files using any protocol on ports 513, 514, or 515 of host wonderland.cc.purdue.edu, use:

       lsof -i @wonderland.cc.purdue.edu:513-515 
```

因此，对于您的情况，您可以从以下内容开始：

```
lsof -i :55000-55001 
```

而不是使用所有你需要的 grep 来得到你的答案。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:40:06.853

这对你有用吗？（端口范围 55000-60000）

```
lsof|awk '$2>55000 && $2<60000 && /php/ && /LISTEN/' 
```

# asp.net - ASP.NET 使用路由处理子域

> ID：13584678
> 
> 赞同：0
> 
> 时间：2012-11-27T12:53:55.543
> 
> 标签：asp.net, routing, subdomain

如何将子域路由到 asp.net 应用程序页面？

[http://test1.domain.com](http://test1.domain.com) ===> [http://www.domain.com/id=test1](http://www.domain.com/id=test1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:56:16.497

我认为您所做的是在 IIS 中重写 URL： [http ://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

# c# - 跳过 wp7 导航堆栈中的页面

> ID：13584683
> 
> 赞同：2
> 
> 时间：2012-11-27T12:54:13.063
> 
> 标签：c#, windows-phone-7, navigation

假设我有一个代码

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    var userInfo = SettingsManager.Read<User>(SettingsManager.UserInfoSetting);

    if (e.NavigationMode == NavigationMode.Back && userInfo == null)
    {
        _mainViewModel.NavigationService.GoBack();
    }

    if (e.NavigationMode == NavigationMode.New && userInfo == null)
    {
        _mainViewModel.NavigationService.NavigateTo(new Uri(ViewModelLocator.SettingPageUrl, UriKind.Relative));
    }

    base.OnNavigatedTo(e);
} 
```

当用户第一次运行应用程序时，他将被重定向到设置页面，现在它工作得很好。如果用户不想提供他的信息，他可以按后退按钮，在这种情况下我想跳过应用程序的主页并退出应用程序。如果我运行收到的代码`InvalidOperationException` `Cannot go back when CanGoBack is false.`

该`GoBack()`方法调用`PhoneApplicationFrame.GoBack()`方法返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T06:17:57.703

***警告 - Windows 开发人员指南不建议删除 backstack 条目。因为你必须坚持返回按钮的自然行为。***

链接 - [https://docs.microsoft.com/en-us/windows/uwp/layout/navigation-history-and-backwards-navigation](https://docs.microsoft.com/en-us/windows/uwp/layout/navigation-history-and-backwards-navigation)

当用户第一次进入设置页面时，尝试删除返回堆栈条目（在您的情况下为主页）。

您可以通过以下代码删除任何剩余的 backstack 条目：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);

    while (this.NavigationService.BackStack.Any())
    {
        this.NavigationService.RemoveBackEntry();
    }
} 
```

因此，当用户按下后退按钮时，应用程序应该退出，因为没有剩余的 backstack 条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T12:56:45.140

**您不能以这种方式强制退出。**
你可以做的是处理设置页面上的后退按钮按下并清除堆栈（这是允许的），然后让后退按钮被处理 - 因此用户将因为后退按钮而退出，而不是因为你的电话.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T19:28:06.347

```
protected override void OnBackKeyPress(CancelEventArgs e)
    {
        while (NavigationService.CanGoBack)
        {
            NavigationService.RemoveBackEntry();
        }
        base.OnBackKeyPress(e);
    } 
```

# xslt - 使用 XSL 检查多个节点中的多个属性值

> ID：13584685
> 
> 赞同：2
> 
> 时间：2012-11-27T12:54:16.813
> 
> 标签：xslt, xml-parsing

xml如下。

```
<MyXml>
<Machine1>
    <SupportedOS>
        <OS1 MajorVersion=1 MinorVersion=2/>
        <OS2 MajorVersion=2 MinorVersion=0/>
        <OS3 MajorVersion=1 MinorVersion=1/>
        <OS4 MajorVersion=2 MinorVersion=1/>
        <OS5 MajorVersion=3 MinorVersion=0/>
     </SupportedOS>
 </Machine1>
 </MyXml> 
```

我从这个 XML 中的某个来源（比如 MajorVersion=x1 和 MinorVersion=x2）获取操作系统版本，并以编程方式添加这两个 xml。任务是比较 OS 和 olny 的次要和主要版本，如果它们都与源相同，然后将机器节点复制到转换后的 xml。让我知道如何做到这一点。我会尝试自己编码。

**编辑**

当任何一个 OS 节点具有 MajorVersion=x1 和 MinorVersion=x2 时，我想复制机器节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:51:15.937

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pMajor" select="1"/>
 <xsl:param name="pMinor" select="2"/>

 <xsl:template match="/*/*">
  <xsl:copy-of select=
   "self::*[*/*[@MajorVersion = $pMajor and @MinorVersion = $pMinor]]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（提供的格式严重错误且无用！）：

```
<MyXml>
    <Machine1>
        <SupportedOS>
            <OS1 MajorVersion="1" MinorVersion="2"/>
            <OS2 MajorVersion="2" MinorVersion="0"/>
            <OS3 MajorVersion="1" MinorVersion="1"/>
            <OS4 MajorVersion="2" MinorVersion="1"/>
            <OS5 MajorVersion="3" MinorVersion="0"/>
        </SupportedOS>
    </Machine1>
    <Machine2>
        <SupportedOS>
            <OS1 MajorVersion="1" MinorVersion="3"/>
            <OS2 MajorVersion="2" MinorVersion="0"/>
            <OS3 MajorVersion="1" MinorVersion="1"/>
            <OS4 MajorVersion="2" MinorVersion="1"/>
            <OS5 MajorVersion="3" MinorVersion="0"/>
        </SupportedOS>
    </Machine2>
</MyXml> 
```

**产生了想要的正确结果：**

```
<Machine1>
   <SupportedOS>
      <OS1 MajorVersion="1" MinorVersion="2"/>
      <OS2 MajorVersion="2" MinorVersion="0"/>
      <OS3 MajorVersion="1" MinorVersion="1"/>
      <OS4 MajorVersion="2" MinorVersion="1"/>
      <OS5 MajorVersion="3" MinorVersion="0"/>
   </SupportedOS>
</Machine1> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:58:23.180

如果属性不满足条件，则比较属性..如果是，则删除它们..

或者复制它们

在下面的代码中，第一个模板复制所有节点，
第二个模板删除正在拥有的操作系​​统`MajorVersion not equal to 'x1' and MinorVersion not equal to 'x2'`

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
  <xsl:template match="/MyXml/Machine1/SupportedOS/OS1[@MajorVersion != 'x1' and @MajorVersion!='x2']"/>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T14:25:56.780

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml"/>
    <xsl:template match="/MyXml">
        <xsl:apply-templates select="//SupportedOS"/>
    </xsl:template>
    <xsl:template match="SupportedOS">
        <xsl:for-each select="child::*">
            <xsl:if test="@MajorVersion='1' and @MinorVersion='2'">
                <xsl:copy-of select="//Machine1"/>
            </xsl:if>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

# php - 创建 iPhone——mySQL 数据库通信

> ID：13584690
> 
> 赞同：0
> 
> 时间：2012-11-27T12:54:35.187
> 
> 标签：php, iphone, mysql, objective-c, ios

我的 iPhone 应用程序必须定期与 mySQL 数据库通信；它既发送请求以接收数据，又向数据库添加数据。

目前，我的 iPhone 应用程序所做的只是向 PHP 脚本发送 POST 请求，该脚本检查 POST 请求并根据请求类型执行查询。现在，我读到这很“糟糕”，而且我是一名初级程序员（尤其是服务器端脚本），所以我想知道“最佳方法”或“最佳实践”来做到这一点。

它是否只是将散列密码发送到 PHP 脚本，以便它在运行请求之前检查并使用 SSL？或者还有更多？

如果可能，请提供相关文档和/或代码以帮助我入门。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:12:54.840

你有两个问题要解决，而不是一个（堆栈溢出问题中经常出现这种情况:-)）。

问题 1：创建一个允许与您的 MySql 数据库进行适当交互的 PHP Web 服务。

问题 2：从您的 iPhone 应用程序中与所述网络服务交互。

正如@wzs 所提到的，您仍然需要保护流量，但您现在已经分离了对数据库的访问和对服务的访问。现在只有服务可以访问数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:05:03.740

您需要解决 3 个基本问题。一点谷歌搜索将为您提供每个信息。1) 身份验证 - 控制谁可以访问您的 Web 服务（取决于您的设置，有很多开箱即用的选项和您自己的选项），2) 加密 - 防止有人截取未加密的消息到/来自您的网络服务（SSL 应该处理这个），3）SQL 注入——这可以在服务器端处理

这些是您应该关注的基本问题，同样，对于每个问题，网络上都有大量的好信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:04:51.250

从移动应用程序对远程数据库运行查询不是一个好主意（无论您是否使用花哨的加密）——在大多数情况下，这是一种错误的架构模式。

相反，您应该通过 REST API（即 JSON 格式）公开数据。有几个 PHP 框架/库可以简化这个过程，看看：[http ://blog.programmableweb.com/2011/09/23/short-list-of-restful-api-frameworks-for- php/](http://blog.programmableweb.com/2011/09/23/short-list-of-restful-api-frameworks-for-php/)

在移动应用程序上，连接到 API，将检索到的 JSON 解析为您的业务模型...... [RESTKit](http://restkit.org/)、[AFIncrementalStore](https://github.com/AFNetworking/AFIncrementalStore)、[Mantle](https://github.com/github/Mantle)等库可能会有所帮助。

# c# - 从与应用程序二进制目录不同的位置加载 WPF app.config / MyApp.exe.config

> ID：13584692
> 
> 赞同：1
> 
> 时间：2012-11-27T12:54:44.240
> 
> 标签：c#, configuration, settings, app-config, config

1.  我想从 app bin 文件夹的子文件夹而不是 app bin 文件夹本身（例如 ./Configs/MyApp.exe.config）加载 MyApp.exe.config。
2.  我不想使用 System.Configuration 对象（由 ConfigurationManager.OpenExeConfiguration(configPath) 返回，因为这只是一个字符串映射。我想继续使用现有的生成设置：Settings.Designer 中的 ApplicationSettingsBase 对象。 cs 因为将设置值转换为适当的对象。

即我只想重定向设置加载自身的位置。我环顾四周，我能找到的只是涉及直接使用 System.Configuration 对象的解决方案 - 但如何将其重新连接到设置？

想做的事情似乎是一件合理的事情——不明白为什么它看起来如此困难？欢迎任何解决方案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:08:34.620

当 app.config 中有一个 configSection 时，Jims 解决方案是干净的。在我们的例子中，我们有几个 configSection（用于应用程序、库、nlog 等），我们只想从新位置加载整个文件。从原始问题来看，这并不是很清楚。

最简单的方法似乎是使用带有 AppDomainSetup 对象的新 AppDomain，在该对象上我们将 ConfigurationFile 属性设置为新配置文件的路径。
那么问题是何时以及如何创建新的应用程序域。 [这篇文章](https://stackoverflow.com/questions/2648411/how-do-i-create-an-appdomain-and-run-my-application-in-it)提供了一个优雅的解决方案，似乎只需稍作修改即可工作。

1：添加启动事件处理程序：

```
Application x:Class="InstallTool.App"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
StartupUri="Window1.xaml"
Startup="AppStartup" 
```

2：在该处理程序中（在默认应用程序域中）创建一个新的应用程序域 - 其创建只是递归调用 Startup 事件处理程序。当新的应用程序域以（应用程序关闭）结束时，它会在“外部”应用程序域中中止启动。这避免了必须进行跨应用程序域调用或使用引导程序应用程序来创建新的应用程序域。

```
 public void AppStartup(object sender, StartupEventArgs e) {
        if (AppDomain.CurrentDomain.IsDefaultAppDomain()) {
            string appName = AppDomain.CurrentDomain.FriendlyName;
            var currentAssembly = Assembly.GetExecutingAssembly();

            // Setup path to application config file in ./Config dir:
            AppDomainSetup setup = new AppDomainSetup();
            setup.ApplicationBase = System.Environment.CurrentDirectory;
            setup.ConfigurationFile = setup.ApplicationBase + 
                                string.Format("\\Config\\{0}.config", appName);

            // Create a new app domain using setup with new config file path:
            AppDomain newDomain = AppDomain.CreateDomain("NewAppDomain", null, setup);
            int ret = newDomain.ExecuteAssemblyByName(currentAssembly.FullName, e.Args);
            // Above causes recusive call to this method.

            //--------------------------------------------------------------------------//

            AppDomain.Unload(newDomain);
            Environment.ExitCode = ret;
            // We get here when the new app domain we created is shutdown.  Shutdown the 
            // original default app domain (to avoid running app again there):
            // We could use Shutdown(0) but we have to remove the main window uri from xaml
            // and then set it for new app domain (above execute command) using:
            // StartupUri = new Uri("Window1.xaml", UriKind.Relative);
            Environment.Exit(0);
            return;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:16:21.883

您需要的是自定义[SettingsProvider](http://msdn.microsoft.com/en-us/library/system.configuration.settingsprovider.aspx)。您的本地应用程序的默认设置是[LocalFileSettingsProvider](http://msdn.microsoft.com/en-us/library/system.configuration.localfilesettingsprovider.aspx)，它从与 appname.exe 位于同一目录中的 appname.exe.config 文件获取设置。您也许可以创建一个派生自 的类`LocalFileSettingsProvider`，该类在不同的目录中查找。如果做不到这一点，你将不得不从`SettingsProvider`.

另请参阅[ApplicationSettingsBase.Providers 属性](http://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.providers.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-15T21:39:56.170

如果您的应用程序中没有线程/后台任务，Ricibob 的解决方案可以正常工作。如果您确实拥有它们，则会导致问题。此外，您可以在一行中实现上述解决方案：

```
 AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", YOUR_CONFIG_LOCATION); 
```

# c# - 跨越国际日期变更线的 NetTopologySuite 多边形算法

> ID：13584693
> 
> 赞同：1
> 
> 时间：2012-11-27T12:54:46.370
> 
> 标签：c#, datetime, timezone

我正在使用移植到 C# 的[NetTopolgySuite](http://code.google.com/p/nettopologysuite/)，并且需要确定某些坐标纬度/经度是否落在定义为坐标纬度/经度值数组的指定区域内。

所以我正在尝试使用[CGAlgorithms.IsPointInRing](http://nts.sourceforge.net/docs/v1.2/GisSharpBlog.NetTopologySuite.Algorithm.CGAlgorithms.IsPointInRing.html)方法，它在大多数情况下都非常有效。当我有一个跨越国际日期变更线的区域时，问题就出现了，例如从东 170 向东到西 170 的第一条线。当我调用 IsPointInRing 时，即使被测坐标在该区域内，它也会返回 FALSE。

IsPointInRing 的文档说

> 该环可以朝向任一方向。

我假设是顺时针或逆时针。我只能假设该环被错误地确定为从 170 East 向 WEST 到 170 West 的第一条线并且没有穿过 IDL。我的线应该是小弧线，而不是大弧线。

谁能建议我如何测试可能会或可能不会越过国际日期变更线的坐标数组中的坐标包含，或者我是否错误地使用了该函数。我宁愿继续使用 NetTopologySuite。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:13:10.650

经过测试，如果“MINOR”弧线穿过 180W/180E 子午线，我可以确认 NetTopologySuite IsPointInRing 程序被认为是作为“MAJOR”弧线运行的。作为一种解决方法，在测试环上的点时，我只是在调用函数之前将所有经度值从 180W..0W 范围转移到运行 180E..360E，即 170W = 190E 移位，170E = 170E 未移位。虽然技术上不正确，但它允许我调用 IsPointInRing 程序并获得正确答案。

# javascript - 如何不从 JavaScript 刷新页面？

> ID：13584695
> 
> 赞同：0
> 
> 时间：2012-11-27T12:54:45.357
> 
> 标签：javascript, jquery, asp.net

我正在使用 的网站上工作`asp.Net`，它包括一个从`iframe`. 这个名为 Districting 的页面在 aspx 页面中有一个 javascript 代码。我创建了一个函数，在单击“完成”按钮时执行。该函数测试用户提出的条件是否为真。如果是，则加载另一个页面，如果不是，则会出现警报，但什么也没有发生。但实际上，发生了一些事情：页面正在刷新，这不是我想要的。这是按钮：

```
<button id="Button1" onclick="testing()">Done</button> 
```

这是功能测试：

```
function testing() {
    if (conditions are true)
        //Go to another page
    else{
        alert("Wrong decision");
        //Stay in the current page without refreshing it
    }
 } 
```

所以我只需要在单击“完成”按钮时防止页面刷新。

提前致谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:08:29.227

将您的代码更改为

```
function testing() {
    if (conditions are true)
        return true;
    else{
        alert("Wrong decision");
        return false;
    }
 } 
```

和你的标签

```
<button id="Button1" onclick="return testing()">Done</button> 
```

另外，请参阅[如何确认 href 标记中链接的导航？](https://stackoverflow.com/questions/13583415/how-to-confirm-navigation-for-a-link-in-a-href-tag/13583448#13583448)，因为它非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:04:48.357

触发 onclick 的 javascript 函数需要返回 false。以下应该有效：

```
<button id="Button1" onclick="testing(); return false;">Done</button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:01:25.607

按钮是标准的提交按钮，那么表单中的按钮也是如此吗？

如果这是真的，您可以在定义按钮的类型时解决该问题：

```
<button type="button" id="Button1" onclick="testing()">Done</button> 
```

# jquery - JQuery 标签单击并选择所有复选框问题

> ID：13584698
> 
> 赞同：2
> 
> 时间：2012-11-27T12:54:51.427
> 
> 标签：jquery, html, xml, hyperlink, anchor

我正在尝试在 CLICK of LABEL 上创建一个简单的 SELECT ALL 复选框。

但是在点击标签时只处理警报语句......在资产类型下的右侧，我在点击时放置了一个复选框，所有复选框都被选中。但是是否可以通过单击标签来完成它并且根本没有复选框......

清除按钮也存在问题，它是一个 JQuery 元素，单击该按钮对复选框没有影响（理想情况下必须提交）...

这是代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="css/checkbox.css"/>
        <link rel="stylesheet" href="css/jquery.mobile-1.1.1.css" />

    <title>Subscribe</title>
    <script src="scripts/jquery-1.8.2.min.js"></script>
    <script src="scripts/jquery.mobile-1.2.0.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
                $('#selectAllTechAreas').click(function(){
                  alert('aaa');
                  $('.techAreasCheckBox').attr('checked', this.checked);
                }); // Tech Areas Select All click function

                $('#selectAllAssetTypes').tap(function(event){
                  /*$('.assetTypeCheckBox').attr('checked', this.checked);*/
                        /*alert("Select All Asset Types clicked");*/
                        $('.assetTypeCheckBox').attr('checked', this.checked);
                }); // Asset Types Select All click function
                $('#clearAllSelections').click(function(){
                    /*$('.techAreasCheckBox').attr('checked', this.checked);
                    $('.assetTypeCheckBox').attr('checked', this.checked);*/

                    // Problem with deselecting the HTML Checkbox with jQM element click
                });
        }); // document
    </script>

    <style>
        .divClassStyle {
                color: black;
                border: hidden;
                width: 100%;
                background-color: gray;
                margin: 0px;
                padding: 2px;
                font-family: "Agfa Rotis Semisans";
                font-size: 14px;
            }
            .listStyle {
                color: white;
                border: hidden;
                width: 100%;
                background: orange;
            }
            .headerPadding{
                padding-left: 15px;
            }   
            .footerPadding{
                padding-left: 15px;
            }
            .contentGrayBg{
                background: #e9e9e9;
            }   
            .floatLeft{
                width: 50%;
                float: left;
            }
            .floatRight{
                width: 50%;
                float: right;
            }
            .container{
                overflow: hidden;
            }

            .case{

            }
            .contentGrayBg{
                background: #e9e9e9;
            }
    </style>

</head>

<body>
    <!-- ******** Header **********-->
    <div data-role="header" style="padding-top: 0px">
        <table style="width: 100%; border: none;">
            <tr>
                <td style="padding-left: 15px; width: 90%">

                </td>
                <td style="border: 0px">

                </td>
            </tr>
            <tr>
                <td style="padding-left: 15px;">

                </td>
                <td>

                </td>
            </tr>
        </table> 
    </div><!-- /header -->

    <!-- ******** Content **********-->
    <div data-role="content" class="contentGrayBg">
        <div id="categoriesTable">

            <div class="container">
                    <div class="floatLeft">
                            <table id="technologyAreas">
                                <tr>
                                    <td>
                                        <fieldset id="techAreasCB" data-role="controlgroup">
                                        <legend style="font-style: bold; font-size:16px">Technology Areas:</legend>
                                            <table>
                                                <tr>
                                                    <td><input type="checkbox" data-mini="true" name="checkbox1" id="checkbox1" class="case techAreasCheckBox" /></td>
                                                    <td style="padding-left: 40px">SAP</td>
                                                </tr>
                                                <tr>
                                                    <td><input type="checkbox" data-mini="true" name="checkbox2" id="checkbox2" class="case techAreasCheckBox" /></td>
                                                    <td style="padding-left: 40px">Oracle</td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label id="selectAllTechAreas" style="color: orange; padding-left: 10px"><b>Select All</b></label></td>
                                                </tr>
                                            </table>        
                                        </fieldset>
                                    </td>
                                </tr>
                            </table>
                    </div>  <!-- Div Class Float Left -->

                    <div class="floatRight">
                            <table id="assetTypes">
                                <tr>
                                    <td>
                                        <fieldset id="assetTypesCB" data-role="controlgroup">
                                            <legend style="font-style: bold; font-size:16px">Asset Types:</legend>
                                                <table>
                                                    <tr>
                                                        <td><input type="checkbox" data-mini="true" name="checkbox16" id="checkbox16" class="case assetTypeCheckBox" /></td>
                                                        <td style="padding-left: 40px">Audio/Videos</td>
                                                    </tr>
                                                    <tr>
                                                        <td><input type="checkbox" data-mini="true" name="checkbox17" id="checkbox17" class="case assetTypeCheckBox" /></td>
                                                        <td style="padding-left: 40px">Documents</td>
                                                    </tr>
                                                    <tr>
                                                            <td><input type="checkbox" id="selectAllAssetTypes"/></td>
                                                            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label style="color: orange; padding-left: 10px"><b>Select All</b></label></td>
                                                        </tr>
                                                </table>        
                                        </fieldset>
                                    </td>
                                </tr>
                            </table>
                    </div>  <!-- Div Class Float Right -->

            </div>  <!-- Div Class Container -->
                    <div style="padding-left: 10px; padding-right: 15px">
                        <a href="#" id="clearAllSelections" data-role="button" data-mini="true" data-inline="true" style="background: orange; color: white; font-style: normal; text-shadow: none; width: 45%;">Clear</a>
                        <a href="#" data-role="button" data-mini="true" data-inline="true" style="background: orange; color: white; font-style: normal; text-shadow: none; width: 45%;">Submit</a>      <!-- Should'nt it be "Subscribe Now" as per given in the text desc above -->
                    </div>
            </div>
    </div>  <!-- Content End -->

    <!-- ******** Footer **********-->
    <div data-role="footer">
        <div class="footerPadding">
            <label style="color: red; font-style: normal; font-size: 12px">Go to Accenture.com</label> <br/>
            <label style="font-size: 12px;">&copy; 2012 Accenture. All Rights Reserved.</label>
        </div>
    </div>  <!-- Content Footer -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:15:19.413

看来你的代码应该有一个非常小的变化......只是尝试更改`$('.techAreasCheckBox').attr('checked', this.checked);`为`$('.techAreasCheckBox').attr('checked', 'checked');`......它适用于我:)并且也改变

```
$('#selectAllAssetTypes').tap(function(event){
   $('.assetTypeCheckBox').attr('checked', this.checked); 
   .....
} 
```

至

```
$('#selectAllAssetTypes').click(function(event){
   $('.assetTypeCheckBox').attr('checked', 'checked');
   .....
} 
```

[检查这里](http://jsfiddle.net/HdT6r/)的演示，请注意我还没有完成 unselectAll 复选框的代码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:17:32.363

您的主要问题在于：

```
$('.techAreasCheckBox').attr('checked', this.checked); 
```

它应该是

```
$('.techAreasCheckBox').attr('checked', true); 
```

换句话说，您设置检查属性的方式。

# cron - 运行 cron 作业 3 次（例如下午 1 点、下午 2 点和下午 3 点）？

> ID：13584699
> 
> 赞同：68
> 
> 时间：2012-11-27T12:54:53.680
> 
> 标签：cron

我不确定如何在每天 3 个特定时间运行 cron 作业。我想在下午 1 点、下午 2 点和下午 3 点运行它。

是否有可能，使用单个表达式？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-11-27T13:00:01.977

你可以使用这个：

```
# m   h   dom mon dow   command
0 13,14,15 *   *   *     /home/user/command 
```

您`/home/user/command`将在 13:00、14:00 和 15:00 运行

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-27T13:02:41.817

正如列尼克所说，它可以用单一表达式来完成。

```
0 13,14,15 * * * <your-script-to-run> 
```

查看[此 geedkstuff 链接](http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/)以获取更多示例

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-01-25T04:24:46.467

虽然给出的答案是正确的，但没有经验的用户可能不知道在哪里放置这个表达式。您必须编辑`crontab`文件，例如：

```
crontab -e 
```

你在那里添加

```
0 13,14,15 *   *   *     /home/user/command 
```

在 13:00、14:00 和 15:00 执行您的命令。另请注意，`user`必须用执行命令的用户帐户替换。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-12-09T13:35:29.410

您也可以尝试以下方法：

```
0 13-15 * * * /home/apps/sample.sh 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-18T09:10:16.863

对于任何登陆这里的人->有用的工具：

> [https://crontab.guru/](https://crontab.guru/)

请更喜欢范围+步进而不是逗号：

```
Example: Run every 2h from 9h to 16h
m    h     dom mon dow   command
0  9-16/2   *   *   *     /home/user/command 
```

也适用于分钟：

```
 m        h     dom mon dow   command
10-30/10  9-16/2   *   *   *     /home/user/command 
```

**Crontab guru**显示了它的含义，以及下一个计划的作业。

例如，我在 10h05 输入了这个 cron：

[![在此处输入图像描述](../Images/da51a5a1390c121b0d7cc9a54b9e82b0.png)](https://i.stack.imgur.com/mZZmd.jpg)

# javascript - 使用 jquery 创建动态 div

> ID：13584705
> 
> 赞同：0
> 
> 时间：2012-11-27T12:55:09.507
> 
> 标签：javascript, jquery

我试图创建一个按钮，每次按下它时都会生成已经格式化的 div。

div 由表单组成，它们的字段应该已经填充了存储在 javascript 变量中的数据。

例如。

```
<div id="myDiv_#">
<form id="myForm">
<input type="text" id="start_date" name="start_date" value="someJavascriptVariable" />
<input type="text" id="end_date" name="end_date" value="someJavascriptVariable" />
<select name="type" id="type">
<option value="1">"someJavascriptVariable"</option>
<option value="2">"someJavascriptVariable"</option>              
</select>
<input type="button" id="new_button" value="Show">
</form>
</div>

<script>
$('#button_push').click(function() 
{
//creating myDiv_#
}
</script> 
```

我正在搜索 arround web，但从未找到好的结果：s 我请你帮忙，也许是指导方针或起点。关键是，每次用户按下按钮时，都会使用上面的参数创建一个新的 div。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:03:06.903

标记如此复杂，如果有一个可以克隆的隐藏版本可能会更容易，修改属性然后根据需要附加到页面。

像这样的东西：

```
<div id="container"></div>

<div style="display: none;">
    <div id="myDiv_#">
        <form id="myForm">
            <input type="text" id="start_date" name="start_date" value="someJavascriptVariable" />
            <input type="text" id="end_date" name="end_date" value="someJavascriptVariable" />
            <select name="type" id="type">
                <option value="1">"someJavascriptVariable"</option>
                <option value="2">"someJavascriptVariable"</option>                
            </select>
            <input type="button" id="new_button" value="Show">
        </form>
    </div>
</div> 
```

```
$('#button_push').click(function() {
    var $div = $("#myDiv_\\#").clone(true); // keep events'
    $div.attr('id', '').addClass('clone'); // example of amending attributes
    $("#container").append($div); // append
}); 
```

[**示例小提琴**](http://jsfiddle.net/Mte5R/)

您也可以轻松地将`someJavascriptVariable`字符串替换为与该克隆实例相关的特定变量。

# c - 使用链表 C 实现堆栈

> ID：13584707
> 
> 赞同：1
> 
> 时间：2012-11-27T12:55:11.823
> 
> 标签：c, sorting, linked-list, stack

我被要求使用链表实现堆栈。该程序声明了两个“堆栈”并使用它们来对存储在文件中的一些整数进行排序。我有以下程序一开始就崩溃了。我认为它在其他的第一时间崩溃了。（对于文件，用户输入其名称）

```
 /************************************************************************************************************************

    Input File: A text file named: "Numbers.txt" that contains integers in random order. These integers are seperated
                by either a space or a new line. This file is very essencial for the program to work, because from it the
                program gets the integers. below is an example of the file format: (Note that there is a new line after 
                the last integer in order for the file to be read correctly). 

                2  1  3  5  4  
                7  6  8  9

    Output File: None
    Description: This program reads integers in random order. These integers are sorted by the end of the program's execution. 
                 The sorting operations, using Push and Pop functions are managed by two structures of type stack_t. 
                 The first structure is the main one that will be shown to the user, the second one is the one that holds the
                 unsorted integers while sorting. By the end stack2 will be empty and stack 1 will be sorted. 
    *************************************************************************************************************************/
    #include <stdio.h>
    #define MAXSTACK 10 // Defining the size of the stack as being 10 elements

    typedef struct node s_Node;
    struct node {
        int element;
        s_Node*next;
    }; // Define the node_t structure with the element of the node and the pointer to the next node

    typedef struct{
        s_Node *top_stack;
    }stack_t; // Define the stack_t structure with a pointer to s_Node (the first element of the linked list)

    /*-------------------------- NEEDED PROTOTYPES --------------------------*/ 
    // Initializes a new stack and returns it
    stack_t NewStack();
    // Returns 1 if the stack is empty, 0 otherwise
    int Empty(stack_t q);
    // Returns 1 if the stack is full, 0 otherwise
    int Full(stack_t q);
    // Pushes the element e in the stack. Returns 1 if it could Push.
    int Push(int e, stack_t *q);
    // Pops an element, placing it in e. Returns 1 if it could Pop.
    int Pop(int *e, stack_t *q);
    // Search for the top element in the stack and returns it.
    int Peek (stack_t s);
    // Displays the content of the stack.
    void Printstack(const stack_t );

    /*============================ MAIN PROGRAM ============================*/
    main () {

        char filename [20];
        int newint, val1, val2;
        FILE *file;

        stack_t stack1;
        stack_t stack2; 
        stack1=NewStack(); //Initializing the stack
        stack2=NewStack();

        printf ("\n\tPlease Enter the name of the file that contains your integers: ");
        scanf ("%s", &filename);
        file = fopen (filename, "r");

    if (file!=NULL) {
    fscanf (file, "%d", &newint);   
     while (!feof (file)&&!Full (stack1))
     {

        if ( Empty (stack1)) // Putting the first integer read from the file into the first stack.
        {
            Push (newint, &stack1);     
        }   
        else if (newint <= Peek(stack1)) //If the integer read from the file is less or equal to the integer in the top of the stack
        { 
                Push(newint, &stack1); // Push the integer into stack1\. 

        }
        else 
        {
            while ( newint > Peek (stack1) )
            {    //Repeat poping from stack1 and pushing into stack2
                // until it the integer read from the file is bigger than the top element of stack1
                printf ("gOT into THE WHILE LOOP\n");   
                Pop (&val1,&stack1);
                Push (val1, &stack2); 
                Printstack (stack2);            
            } 
            printf ("gOT OUT OF THE WHILE LOOP\n"); 
             Push (newint, &stack1); //Pushing the integer read from the file into the first stack.
             Printstack (stack1);
             while (!Empty(stack2))
             { // Keep poping elements from stack2 and pushing them into stack1 until stack2 is empty
                Pop (&val2,&stack2);
                Push (val2, &stack1);

             } 

        }
        fscanf (file, "%d", &newint); 
       } // End while

        if (feof(file)) printf ("\n\tYou have reached the end of the file: %s.\n\tThere are no more elements to read.",filename);
        else    printf ("\n\n\tYour stack is full.\n\tYou can not enstack more elemeents"); 
         fclose (file);
        printf ("\nThe final result");
        Printstack (stack1);
    }else printf ("Error!!! Your file did not open successefully!\n"); // Error checking in reading the file
    } // End main
    /*-------------------------- FUNCTION DEFINITIONS --------------------------*/
        // Initializes a new stack and returns it
        stack_t NewStack()
        {
            stack_t *n_stack;
            n_stack=(stack_t*)malloc(sizeof(stack_t));
            n_stack->top_stack=NULL;
            return (*n_stack);  
        }

        // Returns 1 if the stack is empty, 0 otherwise
        int Empty(stack_t q)
        {
        if(q.top_stack==NULL)
            return 1;
        else 
            return 0;   
        }

        // Returns 1 if the stack is full, 0 otherwise
        int Full(stack_t q)
        {
            return 0;
        }

        // Pushes the element e in the stack. Returns 1 if it could Push.
        int Push(int e, stack_t *q)
        {       
            s_Node *nn;
            nn= (s_Node*)malloc(sizeof(s_Node));

            if(Full(*q))
            {
                printf("\n\t Stack is Full !! \n\n");
                return 0;   // return 0 if enstack NOT successful
            }
            else 
            { 
                nn->element=e;
                nn->next=q->top_stack;
                q->top_stack=nn;
                return 1;
            }
        }

        // Pops an element, placing it in e. Returns 1 if it could Pop.
        int Pop(int *e, stack_t *q)
        {   
            s_Node *temp;

            if(Empty(*q))  // Check if the stack is empty
            {
                    return 0;   // popping Failed
            }
            else
            {
            temp=q->top_stack;  // store the top in a temp ptr Node to free it after
            *e=q->top_stack->element; // Store the popped element in e
            q->top_stack=q->top_stack->next; // Point the top to the next element
            free(temp); // Free the popped Node
            return 1;
            }
        }

        void Printstack(const stack_t q)  
    {
            if(Empty(q))
                printf("\n\tStack is empty!!\n");
            else{
                s_Node *walker;
                walker = q.top_stack;   
                printf("\n\t This is the content of the stack:\n");
                  while(walker!=NULL)
                  {
                    printf("\t%d ",walker->element);
                    walker=walker->next;
                  }
          printf("\n");
        }
    }
    int  Peek (stack_t s)
    {   printf ("%d\n",s.top_stack->element);
        return s.top_stack->element; // Returning the top element of the stack
    } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:16:41.817

你在`NULL`这里尊重 a ：

```
int  Peek (stack_t s)
{   printf ("%d\n",s.top_stack->element); 
```

在此序列中：

```
else 
{
    while ( newint > Peek (stack1) )
    {    //Repeat poping from stack1 and pushing into stack2
        // until it the integer read from the file is bigger than the top element of stack1
        printf ("gOT into THE WHILE LOOP\n");   
        Pop (&val1,&stack1);
        Push (val1, &stack2); 
        Printstack (stack2);            
    } 
```

由于您的输入列表：

```
2  1  3 
```

3 比堆栈中的所有内容都大，因此您`pop`在寻找大于 3 的元素时将所有内容都关闭，从而留下您的`stack1.top_stack`as `NULL`。你的支票应该是：

```
while (!Empty(stack1) && (newint > Peek (stack1))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:19:45.983

改变

```
while ( newint > Peek (stack1) ) 
```

至

```
 while ( !Empty(stack1) && newint > Peek (stack1) ) 
```

由于您的 peek 函数不处理空堆栈，因此您必须明确检查它。

# php - SQL Join 和 Json 编码 joomla 2.5

> ID：13584713
> 
> 赞同：0
> 
> 时间：2012-11-27T12:55:25.557
> 
> 标签：php, mysql, left-join, joomla2.5, json

好吧，老实说，我在这里有点迷失了，我为 joomla 2.5 创建了一个组件，并在数据库中有两个表，“managers”和另一个名为“Branches”。我正在尝试将经理与分支机构一起加入。

我希望我的问题能更精确，但老实说我不明白，这是我调用数据库的模型文件：

```
<?php
defined( '_JEXEC' ) or die;

 jimport('joomla.application.component.model');

class LocateModelBranches extends JModel
{
public function getItem()
{
    $branch_id = JRequest::getInt('id');

    $row = JTable::getInstance('branches', 'LocateTable');
    $row->load($branch_id);

    return $row;
}

public function getBranches()
{
    $branch_id = JRequest::getInt('id');

    $db = $this->getDbo();
    $query = $db->getQuery(true);

    $query->select('*');
    $query->from('#__branches');
    $query->join('LEFT', '#__managers AS a USING(manager_id)');
    $query->where("published = 1");

    $db->setQuery($query);

    $rows = $db->loadObjectList();

    return $rows;
}
} 
```

然后是我的 view.json.php 文件：

```
<?php
defined( '_JEXEC' ) or die;

jimport( 'joomla.application.component.view');

class LocateViewBranches extends JView
{
public function display($tpl = null)
{
    $branch = $this->get('Branches');
    $response = array();

    foreach ($branch as $row) {
            $response[] = array(
                    'lat' => $row->branch_latitude,
                    'lng' => $row->branch_longitude,
                    'data' => array(
                        'name' => $row->branch_name,
                        'address' => $row->branch_address,
                        'fax' => $row->branch_fax,
                        'email' => $row->branch_email,
                        'city' => $row->branch_city,
                        'telephone' => $row->branch_telephone,
                        'id' => $row->branch_id,
                        'lati' => $row->branch_latitude,
                        'lngi' => $row->branch_longitude,
                        'manager_id' => $row->manager_id,
                    ),
                );
        }
    echo json_encode($response);
}
} 
```

然后我得到回应：

```
[] 
```

如果我删除“$query->join('LEFT', '#__managers AS a USING(manager_id)');” 然后我的回应是（这是我想要的以及经理的详细信息：

```
[{"lat":"-33.9249","lng":"18.4241","data":{"name":"test 2","address":"greenpoint, Cape Town","fax":"044 382 0605","email":"test","city":"blah","telephone":"044 382 0605","id":"2","lati":"-33.9249","lngi":"18.4241"}},{"lat":"-34.0438","lng":"23.0759","data":{"name":"jam factory","address":"15 meeu street knysna","fax":"00000000","email":"00000000","city":"am factory","telephone":"0000000","id":"14","lati":"-34.0438","lngi":"23.0759"}}] 
```

我确定这只是我的 view.json.php 的问题

另外，如果我从 json_encode 更改为 print_r 并保留“$query->join('LEFT', '#__managers AS a USING(manager_id)');” 我得到以下回复：

```
Array
 (
 )
 1 
```

所以肯定这就是我输出数据的方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:40:16.187

简单如：

```
 public function getBranches()
{
    $branch_id = JRequest::getInt('id');

    $db = $this->getDbo();
    $query = $db->getQuery(true);

    $query->select('*, a.manager_name,manager_mobile');
    $query->from('#__branches AS t')
            ->join('LEFT', '#__managers AS a USING(manager_id)')
            ->where('t.published = 1');

    $db->setQuery($query);

    $rows = $db->loadObjectList();

    return $rows;
} 
```

感谢大家的意见。:)

# iphone - iOS Link Binary 与库仅用于调试

> ID：13584719
> 
> 赞同：13
> 
> 时间：2012-11-27T12:55:44.313
> 
> 标签：iphone, objective-c, ios, xcode

我在为我的项目设置不同的配置时遇到了一些问题。我有同一个静态库的两个版本。一个启用了日志记录，另一个没有。

我使用两个不同的 xcconfig 文件进行调试与发布。在这些文件中，我为静态库的两个变体指定库和标头搜索路径。到目前为止，一切都很好。

但是，在我的构建设置中，我看不到有条件地链接实际库的方法。即对Debug 使用debug 变体，对Release 使用release。

有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-27T13:22:59.287

您需要使用“Other Linker Flags”构建设置来链接库，而不是标准的“Link Binary With Libraries”UI。可以根据配置更改构建设置：

![在此处输入图像描述](../Images/062228eebcf0a016f8164a9b231c07c0.png)

单击三角形，您可以为 Debug/Release 提供不同的值。您将需要使用该`-l`标志。例如，对于`libMyLib.a`使用标志的文件名`-lMyLib`。您可能需要编辑“库搜索路径”以搜索适当的位置。

如果 debug 和 release 版本的文件名相同，并且您不想更改它们，请将它们分别放入它们自己的目录`lib/Debug`和`lib/Release`目录中。然后编辑“库搜索路径”构建设置，添加`"$SRCROOT/lib/Debug"`或添加`"$SRCROOT/lib/Release"`适当的配置。

# perl - 将行上的成对集转换为列

> ID：13584724
> 
> 赞同：2
> 
> 时间：2012-11-27T12:56:03.053
> 
> 标签：perl, rows

是否有针对以下问题的 Perl 解决方案：我有一个格式如下的文件

```
abcdef
abcdef
abcdef
abcdef 
```

这只是一个文件的例子，它扩展了几千列和几百行，由 1 和 0 组成

我希望我的输出如下

```
abababab
cdcdcdcd
efefefef 
```

我已经在其他地方寻找答案，并且只找到了将行直接转置到列的解决方案。在这种情况下，我想将每一对放在一行中并将它们转置为一列。

非常感谢您的帮助，因为我几天来一直在解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:34:33.103

我认为我的解决方案将使用该[`Tie::File`](https://metacpan.org/module/Tie%3a%3aFile)模块来自动执行多次读取文件所需的缓冲。

```
use strict;
use warnings;

use Fcntl 'O_RDONLY';
use Tie::File;
use List::Util 'max';

tie my @data, 'Tie::File', 'test.dat', mode => O_RDONLY or die $!;

my $max = max map length, @data;

for (my $index = 0; $index < $max; $index += 2) {
  print substr $_, $index, 2 for @data;
  print "\n";
} 
```

**输出**

```
abababab
cdcdcdcd
efefefef 
```

# .net - 电影数据库使用 SQL 或 NoSQL .net

> ID：13584725
> 
> 赞同：1
> 
> 时间：2012-11-27T12:56:07.373
> 
> 标签：.net, database, nosql

我需要编写一个媒体应用程序来存储每个用户的电影/电视节目偏好/收藏。我需要帮助来决定何时使用 NoSql。

该应用程序将拥有一个巨大的电影/电视节目元数据数据库，类似于 imdb.com、rottentomattoes 等。这些数据对用户来说是只读的，只有管理员才能编辑电影内容。我还计划通过 odata 公开这些数据。

我的直觉告诉我，我至少应该使用 NoSql 来存储媒体数据，但我担心我会失去很多开发生产力工具（实体框架、设计器等）。

我也担心 NoSql 和数据重复（例如，每部电影都有一个类型列表，将在每个 k/v 或文档中重复（取决于我选择的 nosql db））

我的下一个功能是提供电影标题的自动完成功能，所以我也需要记住这一点。

有没有人做过类似的事情？我的担心正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:34:08.880

在开发需要丰富的个性化体验（如上所述）的 Web 应用程序时，您需要考虑您将为客户提供什么样的数据，以及如何为他们提供他们期望从您的应用程序中获得的体验（例如基于他们的品味、观看历史、行为等的电影推荐）。

您将要处理的大部分数据（用户资料、观看的电影、时间、星期几、暂停前多长时间）将是非常简单（半结构化）的数据，并且您需要从数据库中进行非常快速的索引查找和捕获能力，该能力是可靠的、高度可扩展的、易于使用的（从开发/管理的角度来看）。

NoSQL 数据库非常适合上述要求列表，因为它们旨在以非常低的延迟（低于 10 毫秒）为您提供非常高的吞吐量，可以横向扩展，从而为您提供最佳的“每秒操作数”/$。

事实上，我们已经为完全相同的用例（电影应用程序）构建了一个工作原型，并在 2012 年甲骨文开放世界大会期间展示了一个动手实验室。我们用于解决方案的一些技术是：

*   Oracle NoSQL 数据库 (http://www.oracle.com/technetwork/products/nosqldb/overview/index.html)

*   Oracle 高级分析（供推荐）

*   Hadoop

如果您想了解更多关于我们的解决方案的信息，请告诉我，我很乐意与您分享。

谢谢阿努杰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:35:05.733

我们有一个将 mongodb 导出到 odata 的解决方案 [http://jaydata.org/blog/install-your-own-odata-server-with-nodejs-and-mongodb](http://jaydata.org/blog/install-your-own-odata-server-with-nodejs-and-mongodb) （我在这家公司工作，它是免费和开源的）

# magento - 在 sales_flat_quote_item 中保存状态

> ID：13584734
> 
> 赞同：0
> 
> 时间：2012-11-27T12:56:38.050
> 
> 标签：magento, magento-1.7

我在`sale_flat_quote_item`表中添加了状态字段并尝试通过更改我的自定义模块的`Controller.php(EntitycodesaarnaController.php)`文件来保存更新的状态，但它不保存更新的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:06:15.560

您可以通过它的 id 加载 sales_flat_quote_item objetc

```
$quote_item  = Mage::getModel('sales/quote_item')->load($quoteitem_id);

$quote_item->setStatus('status');

$quote_item->save(); 
```

希望这可以帮助！

# json - 从 cxf jax-rs 调用返回对象的名称

> ID：13584740
> 
> 赞同：0
> 
> 时间：2012-11-27T12:56:43.920
> 
> 标签：json, cxf, jax-rs

我有

```
Config {
  int a;
  ....
} 
```

和我的服务

```
MySvc {

@Produces(JSON)
    public Config getConfigData() {
      return config;
    }
} 
```

我想要用对象名称包装的 json

```
var MyConfig = {"a":"value" } 
```

这可能吗 ？

目前它返回

```
{"a":"value"} 
```

# asp.net - 如何控制打印条码的坐标（位置）

> ID：13584743
> 
> 赞同：0
> 
> 时间：2012-11-27T12:56:48.143
> 
> 标签：asp.net, vb.net

我正在尝试打印条形码标签，但是当标签从打印机出来时，条形码打印在顶部（需要在底部），我如何控制条形码的坐标？

```
my code is

Private Sub printdc128_PrintPage(ByVal sender As System.Object, ByVal e As System.Drawing.Printing.PrintPageEventArgs)
    Dim bc128 As New BarcodeLib.Barcode.Linear()
    bc128.Data = TextBox2.Text
    bc128.BarHeight = 60.0
    bc128.BarWidth = 3.0
    bc128.Resolution = 124
    bc128.drawBarcode(e.Graphics)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:33:10.120

```
Private Sub printdc128_PrintPage(ByVal sender As System.Object, ByVal e As 
System.Drawing.Printing.PrintPageEventArgs)

    Dim img As System.Drawing.Image
    Dim bc128 As New BarcodeLib.Barcode.Linear()
    ' Insert text
    e.Graphics.DrawString(TextBox1.Text, New System.Drawing.Font("Arial", 16.0F), System.Drawing.Brushes.Black, New System.Drawing.PointF(10.0F, 10.0F))

    ' Select Code Type
    bc128.Type = BarcodeLib.Barcode.BarcodeType.CODE128
    ' Select data source
    bc128.Data = TextBox2.Text
    ' Choose Unit of Measures
    bc128.UOM = BarcodeLib.Barcode.UnitOfMeasure.PIXEL
    ' Barcode Height and Width
    bc128.BarHeight = 40.0
    bc128.BarWidth = 2.0
    ' Convert text to stream
    Dim bc128stream As New MemoryStream()

    bc128.drawBarcode(bc128stream)
    ' Convert Stream to image
    img = Drawing.Image.FromStream(bc128stream)
    ' Draw the image and Choose the coordinates(X,Y)
    e.Graphics.DrawImage(img, New Drawing.PointF(10, 90))

End Sub 
```

# ms-project - MSProject AddIn 中的资源：将服务器相关资源添加到项目的本地版本

> ID：13584745
> 
> 赞同：0
> 
> 时间：2012-11-27T12:56:51.503
> 
> 标签：ms-project, ms-project-server-2010, psi

目前我正在为 MS Project 2010 开发一个插件。

在此插件中，用户通过几个标准过滤存储为 Project Server 上 MS 项目资源的所有员工。在找到匹配的人力资源后，用户应该能够将此资源添加到选定的任务中。

不幸的是，我没有找到在本地添加资源之间的链接

```
 _activeProject.Resources.Add("ResourceName") 
```

以及存储在服务器上的资源。Project 中显示的“ResourceName”与服务器上的“ResourceName”没有连接。

我尝试`Microsoft.Office.Interop.MSProject.Resource`通过 PSI 从服务器以某种方式加载，并通过以下方式将其添加到项目团队：

```
 Dim projectTeamRow As SvcProject.ProjectTeamDataSet.ProjectTeamRow = projectTeamDs.ProjectTeam.NewProjectTeamRow()
    projectTeamRow.PROJ_UID = projectGuid
    projectTeamRow.RES_UID = resGuid
    projectTeamRow.NEW_RES_UID = resGuid
    projectTeamDs.ProjectTeam.AddProjectTeamRow(projectTeamRow) 
```

但这并不是我真正想要的。我只需要在项目的本地版本中添加一个与服务器相关的资源。换句话说：我正在寻找一种将 a 转换为 a 的`SvcProject.ProjectTeamDataSet.ProjectTeamRow`方法`Microsoft.Office.Interop.MSProject.Resource`。

我真的希望有人可以帮助我，因为我所有的研究都失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:44:19.327

要将资源从项目服务器添加到您的项目，您需要知道资源的 ID（不是 GUID）。此信息存储在**RES_ID**列中。只需从服务器请求资源并获取 ID。

如果您计划添加多个资源 - 我建议在本地缓存资源列表。我正在使用这个查询来组织我的附加组件中的几个字典：

```
ResourceDataSet resourceDs = new ResourceDataSet();

PSLibrary.Filter resourceFilter = new Microsoft.Office.Project.Server.Library.Filter();
resourceFilter.FilterTableName = resourceDs.Resources.TableName;

resourceFilter.Fields.Add(new PSLibrary.Filter.Field(resourceDs.Resources.TableName, resourceDs.Resources.RES_IDColumn.ColumnName, PSLibrary.Filter.SortOrderTypeEnum.None));
resourceFilter.Fields.Add(new PSLibrary.Filter.Field(resourceDs.Resources.TableName, resourceDs.Resources.RES_UIDColumn.ColumnName, PSLibrary.Filter.SortOrderTypeEnum.None));
resourceFilter.Fields.Add(new PSLibrary.Filter.Field(resourceDs.Resources.TableName, resourceDs.Resources.RES_NAMEColumn.ColumnName, PSLibrary.Filter.SortOrderTypeEnum.None));
resourceFilter.Fields.Add(new PSLibrary.Filter.Field(resourceDs.Resources.TableName, resourceDs.Resources.RES_TYPEColumn.ColumnName, PSLibrary.Filter.SortOrderTypeEnum.None));
resourceFilter.Fields.Add(new PSLibrary.Filter.Field(resourceDs.Resources.TableName, resourceDs.Resources.RES_INITIALSColumn.ColumnName, PSLibrary.Filter.SortOrderTypeEnum.None));
resourceFilter.Fields.Add(new PSLibrary.Filter.Field(resourceDs.Resources.TableName, resourceDs.Resources.RES_EXTERNAL_IDColumn.ColumnName, PSLibrary.Filter.SortOrderTypeEnum.None));
resourceFilter.Fields.Add(new PSLibrary.Filter.Field(resourceDs.Resources.TableName, resourceDs.Resources.RES_IS_WINDOWS_USERColumn.ColumnName, PSLibrary.Filter.SortOrderTypeEnum.None));
resourceFilter.Fields.Add(new PSLibrary.Filter.Field(resourceDs.Resources.TableName, resourceDs.Resources.WRES_ACCOUNTColumn.ColumnName, PSLibrary.Filter.SortOrderTypeEnum.None));
resourceFilter.Fields.Add(new PSLibrary.Filter.Field(resourceDs.Resources.TableName, resourceDs.Resources.WRES_EMAILColumn.ColumnName, PSLibrary.Filter.SortOrderTypeEnum.None));
resourceFilter.Fields.Add(new PSLibrary.Filter.Field(resourceDs.Resources.TableName, resourceDs.Resources.RES_TIMESHEET_MGR_UIDColumn.ColumnName, PSLibrary.Filter.SortOrderTypeEnum.None));

resourceDs = ReadResources(resourceFilter.GetXml(), false); 
```

该查询被定义为PSI的**ResourceClient类的扩展。**

只要您知道资源的 ID，就执行：`Application.EnterpriseResourceGet(resId, omissing);`

申请来自`Microsoft.Office.Interop.MSProject`.

此命令会将资源从 Project Server 加载到 Active Project 中。哦，是的，请不要忘记在调用命令时检查您的项目是否处于活动状态。

# jsp - 如何在同一个jsp页面的下拉列表中保留选定的值？

> ID：13584747
> 
> 赞同：0
> 
> 时间：2012-11-27T12:56:55.287
> 
> 标签：jsp, servlets, drop-down-menu

我希望在提交表单然后由于某种原因再次转发到同一页面后，下拉列表中的选定选项应保留我第一次输入的选定值。

```
<form action="CitySelection" method="POST">

     <select name="cityname" id="myselect" onchange="this.form.submit()">
         <option value="england">england</option>
         <option value="france">france</option>
         <option value="spain">spain</option>
     </select>

</form> 
```

如何使用此功能增强我的上述表单代码，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:47:44.483

为什么要将硬编码的城市列表放在选择菜单中？为此，您的 jsp 页面应如下所示`c taglib`：

```
<%@ taglib prefix="c" uri="java.sun.com/jsp/jstl/core" %>

<form action="<SUBMITTING_URL>" method="post">
      <select name="cityname" id="myselect" onchange="this.form.submit()">
         <c:foreach var="cityname" items="${cityList}">
            <c:choose>
               <c:when test="${not empty selectedCity && selectedCity eq cityname}">
                   <option value="${cityname}" selected = "true">${cityname}</option>
               </c:when>
               <c:otherwise>
                   <option value="${cityname}">${cityname}</option>
               </c:otherwise>
            </c:choose>
         </c:foreach>
      </select>
</form> 
```

在与您映射的 servlet 中，`<SUBMITTING_URL>`应该有`doPost`如下方法：

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

   String cityName = request.getParameter("cityname"); //retrieving value from post request.
   //do your necessary coding.
   if(validation error or as your wish){
      List<String> cityList = new ArrayList<String>();
      cityList.add("england");
      cityList.add("france");
      cityList.add("spain");
      request.setAttribute("cityList",cityList);
      request.setAttribute("selectedCity",cityName);

      RequestDispatcher dispatcher = request.getRequestDispatcher("cityform.jsp");  
      dispatcher.forward(request, response);
   } else {
      //do other things
   }
} 
```

您的 doGet 方法应如下所示：

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

      List<String> cityList = new ArrayList<String>();
      cityList.add("england");
      cityList.add("france");
      cityList.add("spain");
      request.setAttribute("cityList",cityList);
      request.setAttribute("selectedCity",null);

      RequestDispatcher dispatcher = request.getRequestDispatcher("cityform.jsp");  
      dispatcher.forward(request, response);
} 
```

现在，当您想第二次进入该页面时，您将看到已选择的值，您已选择。

# javascript - 多个异步回调 javascript 我该如何解决这个问题？

> ID：13584758
> 
> 赞同：1
> 
> 时间：2012-11-27T12:57:48.500
> 
> 标签：javascript, asynchronous, callback

我让自己陷入了一个可能涉及多个异步回调情况的纠结中。

我有一个名为 populatePageArea() 的 javascript 函数

在 populatePageArea 内部，它在其他代码中遍历这个称为 pages 的类似数组的变量。

```
function populatePagesArea() {
  // there was some code before the for loop

  for (var i=0, l=pages.length; i<l; i++) {    
    addToPagesArea(pages[i], "");   
  }

  // some code after...
} 
```

在 addToPagesArea 函数中，我使用 HTML 5 中的 FileAPI 在其他代码中预览拖放文件。

```
function addToPages(file, front) {
  // there was some code before..
  reader = new FileReader();
  reader.onload = (function (theDiv) {
    return function (evt) {
      var backgroundimage = "url(" + evt.target.result + ")";
  theDiv.css("background-image", backgroundimage);
      var sizeSettings = getSizeSettingsFromPage(file, calculateRatio);

};

  }(imageDiv));

  // step#3 execute file reader
  reader.readAsDataURL(file);
  // there was some code after..
} 
```

所以每次预览文件时，我也尝试对文件的尺寸进行一些计算。

```
function getSizeSettingsFromPage(file, whenReady) {
    reader = new FileReader();
    reader.onload = function(evt) {
        var image = new Image();
        image.onload = function(evt) {
            var width = this.width;
            var height = this.height;
            var filename = file.name;
            if (whenReady) {
                whenReady(width, height, filename);
            }
        };
        image.src = evt.target.result; 
    };
    reader.readAsDataURL(file);

}
 function calculateRatio(width, height, filename) {

    var ratio = width/height;

    var object = new Object();
    object['height']    = width;
    object['width']     = height;
    object['ratio']     = ratio;
    object['size']      = 'Original';

    for (var size in SIZES) {
        var min = SIZES[size].ratio - 0.01;
        var max = SIZES[size].ratio + 0.01;

        if (ratio <= max && ratio >= min) {
            object['size'] = size;
        }
    }

    pageSizes.add(filename, object);

} 
```

**在 calculateRatio 中看到的pageSizes**是一个全局变量，它是一种类似数组的变量类型。

在调用 populatePagesArea 之前它绝对是空的。

情况如下：

我的代码是：

```
populatePagesArea();
getMajorityPageSize(); // this acts on the supposedly non-empty pageSizes global variable 
```

但是因为我认为在所有预览图像上都没有调用 calculateRatio，所以当调用 getMajorityPageSize 时 pageSizes 总是空的。

**我如何确保在调用 populatePagesArea 后，getMajorityPageSize 仅在所有`pages`都经历了 calculateRatio 函数后才被触发？**

我相信这是异步回调。但是我不确定如何为需要经历像calculateRatio这样的异步回调函数的对象数组执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:16:59.700

简单的解决方案（我已将更改标记为`// ***`：

```
// ***
var totalPages;

function populatePagesArea() {
  // there was some code before the for loop

  // ***
  totalPages = pages.length;
  for (var i=0, l=pages.length; i<l; i++) {    
    addToPagesArea(pages[i], "");   
  }

  // some code after...
}

function addToPages(file, front) {
    // there was some code before..
    reader = new FileReader();
    reader.onload = (function (theDiv) {
      return function (evt) {
        var backgroundimage = "url(" + evt.target.result + ")";
        theDiv.css("background-image", backgroundimage);
        var sizeSettings = getSizeSettingsFromPage(file, calculateRatio);
        // *** Check to see if we're done after every load
        checkPagesReady();
      };

    }(imageDiv));

    // step#3 execute file reader
    reader.readAsDataURL(file);
    // there was some code after..
}

// *** Call getMajorityPageSize() here, only after all pages have loaded.
function checkPagesReady() {
    if (pageSizes.length >= totalPages)
        getMajorityPageSize();
} 
```

* * *

如果您稍后要处理更多异步事情，更好的解决方案是使用[promises](https://www.google.com/#q=promises+javascript)重构您的代码。Promises 是一种 API，旨在以系统和有组织的方式处理异步编程。如果你要做更多的异步工作，它会让你的生活更轻松。有很多支持 Promise 的免费库，主要参与者之一是[Q.js。](https://github.com/kriskowal/q)

# sql - 实现 SQL 索引

> ID：13584760
> 
> 赞同：-1
> 
> 时间：2012-11-27T12:57:52.130
> 
> 标签：sql, sql-server

我正在开发移动应用程序的后端。我已经为应用程序创建了表结构。

如何为创建的表实现索引？我知道 SQL 中有两种类型的索引。集群和非集群。

我担心的是

1.  我应该为我的表提供什么类型的索引？
2.  应该索引哪些列？
3.  我是否需要为“唯一标识符”类型的列应用索引？
4.  我需要为主键列应用​​索引吗？
5.  如何评估索引性能？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T13:02:17.530

我**总是**建议在你的表上放置一个聚集索引——它只会让一切变得更快（[参见 Kimberly Tripp 的博客文章](http://sqlskills.com/BLOGS/KIMBERLY/post/The-Clustered-Index-Debate-Continues.aspx)）。

一个**好的**聚集索引是：

*   狭窄
*   独特的
*   稳定的
*   不断增加

所以像这样的列`ID INT IDENTITY`是完美的（再次：[请参阅 Kimberly Tripp 的博客文章，了解为什么这些属性对集群索引至关重要](http://sqlskills.com/blogs/kimberly/post/The-Clustered-Index-Debate-again!.aspx)）。

接下来，我将在任何外键列上放置一个非聚集索引。这加快了 JOIN 和其他与参照完整性相关的操作。

然后**停止**- 让您的应用程序运行、观察、测量性能。它的行为如何？获取配置文件日志以查看执行了哪些查询以及哪些查询在 I/O 和/或 CPU 时间上过于繁重。

然后继续优化这些查询——也许在这里和那里添加一个索引来加速一两个查询。然后再次观察和测量 - 无限重复。

要了解**更多信息**-[请阅读 Kimberly Tripp 的博客](http://www.sqlskills.com/BLOGS/KIMBERLY/)并观看她在会议上的演示视频 - 她是SQL Server***索引女王，***她的知识和见解是无价的。阅读她的东西，反思 - 使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:15:22.587

对于一个表，您可以从 sql 2008 开始创建 1 个聚集索引和 999 个非聚集索引。

请记住，如果表在任何列上包含主键，则将创建自动聚集索引。如果表不包含任何主键，则在整数数据类型列上创建聚集索引。请记住，如果表包含唯一约束，则会在这些唯一约束列上自动创建非聚集索引。

最后，如果您的表不包含任何主键，则在任何整数数据类型列上创建聚集索引。

然后进入非聚集索引，如果您的表包含唯一约束，那么将自动创建非聚集索引，否则将保留它，即不要创建非聚集索引。因为太多的非聚集索引会导致将来出现性能问题，即每天的数据都会增加。

创建表后，您将在查询中使用此表。在这些查询中，您可以编写 where 条件，对于 where 条件列，您只需创建非聚集索引。

永远记住，如果表不包含聚集索引，则不能期望使用非聚集索引来提高性能。

还有一点是始终尝试使用 1 个聚集索引，每个表最多使用 5 到 7 个非聚集索引。

不要为表中的所有列创建非聚集索引。

# android - Android：有没有人有适合webview屏幕的好方法？

> ID：13584764
> 
> 赞同：2
> 
> 时间：2012-11-27T12:58:01.167
> 
> 标签：android, html, webview, resolution

现在，我使用了一种 android webview screen fit mothed 的模式： 1\. 像这样设置 html 文件的元

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"> 
```

没有缩放并且使宽度适合设备宽度而不是目标宽度 2\. 在 android 活动中，我只是像这样设置 WebView 的 WebSetting

```
 webView.setInitialScale(100);

                webView.setScrollBarStyle(1);

        webView.setVerticalScrollBarEnabled(false);
        webView.setHorizontalScrollBarEnabled(false);
        webView.setFocusable(true);

        WebSettings webSettings = webView.getSettings();

                webSettings.setJavaScriptEnabled(true);
        webSettings.setUseWideViewPort(true);

                webSettings.setJavaScriptCanOpenWindowsAutomatically(false);
        webSettings.setDatabaseEnabled(true);

                webSettings.setPluginsEnabled(true);
            webSettings.setAllowFileAccess(true);
            webSettings.setDomStorageEnabled(false);
            webSettings.setSupportZoom(false);

            webSettings.setRenderPriority(RenderPriority.HIGH); 
```

没有为 webview 启用缩放，因为我在某个地方使用了 jquerymoblie 框架；我发现 jquerymoblie 中的列表、表单等任何内容都可能显示正常

但是如果你想为背景设置一些不规则的图片和一些文字或其他，你很难以不同的分辨率将它放在正确的位置。

这会在不同的分辨率下做出一些不同的位置

我试图在css中使用百分比宽度高度来适应它，但是它的工作似乎还不错。然后我尝试使用一种适合一个 css 的分辨率，这对我来说非常有用。因为安卓设备有很多分辨率。而且不同版本的安卓操作系统也不同。

有人有解决这个问题的好方法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:35:52.310

尝试这个。在你的 webView 中使用 HTML

```
webView.loadDataWithBaseURL(null,
                "<!DOCTYPE html><html><body style = \"text-align:center\"><img src= "
                        + \"http://www.koenvangorp.be/photos/2005_09_16-moon_2000.jpg\"
                        + " alt=\"pageNo\" width=\"100%\"></body></html>",
                "text/html", "UTF-8", null); 
```

另请参阅此处的[文档](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)

# c - C：接收指向指针的指针以便分配外部指针的函数

> ID：13584766
> 
> 赞同：0
> 
> 时间：2012-11-27T12:58:02.470
> 
> 标签：c, pointers

我怎样才能使以下工作？这个想法是让函数分配一个外部指针，这样我就可以在另一个程序中使用这个概念，但我不能这样做，因为 gcc 一直告诉我参数来自不兼容的指针类型......应该很简单，但我没有看到它。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int allocMyPtr(char *textToCopy, char **returnPtr) {
    char *ptr=NULL;
    int size=strlen(textToCopy)+1;
    int count;

    ptr=malloc(sizeof(char)*(size));
    if(NULL!=ptr) {
        for(count=0;count<size;count++) {
            ptr[count]=textToCopy[count];
        }
        *returnPtr = ptr;
        return 1;
    } else {
        return 0;
    }
}

int main(void) {
    char text[]="Hello World\n";
    char *string;

    if(allocMyPtr(text,string)) {
        strcpy(string,text);
        printf(string);
    } else {
        printf("out of memory\n");
        return EXIT_FAILURE;
   }
   free(string);
   return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:00:51.867

这几乎是正确的，但是由于您的函数需要指向指针的指针，因此您必须使用 address-of 运算符将指针的地址传递给函数：

```
allocMyPtr(text, &string) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:01:34.707

改用`&string`与此输入参数相关的类型来解决您的问题，`char **`而不是`char *`

```
if(allocMyPtr(text,&string)) { 
```

只是关于您的源代码的评论：

该`allocMyPtr()`函数已经从文本复制到字符串。

所以为什么你用 strcpy 复制 agian。没用的

```
strcpy(string,text); // this useless 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T13:03:21.740

你正在传递你应该使用 的`string`using以便指针应该匹配，否则编译器会不断告诉你，`pass by value``allocMyPtr()``pass by adress`

`char *`不兼容的类型`char **`

做这个 ：

```
if(allocMyPtr(text,&string)) { } 
```

# silverlight - Windows 手机中的 SmoothStreamingMediaElement (.m3u8)

> ID：13584770
> 
> 赞同：0
> 
> 时间：2012-11-27T12:58:12.393
> 
> 标签：silverlight, windows-phone-7, live-streaming

我希望我的应用程序播放**(.m3u8)** Live Streaming，我找到了这个例子 [http://archive.msdn.microsoft.com/SmoothStreaming/Release/ProjectReleases.aspx?ReleaseId=3867](http://archive.msdn.microsoft.com/SmoothStreaming/Release/ProjectReleases.aspx?ReleaseId=3867)

它适用于其他链接，但如果我尝试我的 .m3u8 链接它不起作用。有没有一种特定的方法可以在 Windows Phone 中播放这种类型的流媒体？

```
 public MainPage()
{

        InitializeComponent();
        SupportedOrientations = SupportedPageOrientation.Landscape;
        Loaded += new RoutedEventHandler(MainPage_Loaded);
        phoneApplicationPage.ManipulationStarted += new EventHandler<ManipulationStartedEventArgs>(phoneApplicationPage_ManipulationStarted);
        phoneApplicationPage.ManipulationCompleted += new EventHandler<ManipulationCompletedEventArgs>(phoneApplicationPage_ManipulationCompleted);
        seekbar.MouseLeftButtonUp += new MouseButtonEventHandler(seekbar_MouseLeftButtonUp);

        List<Content> Contents = new List<Content>();
        Contents.Add(new Content("Media One", new Uri("http://fl1.viastreaming.net/iqraatv2/livestream/playlist.m3u8")));
        Contents.Add(new Content("Media Two", new Uri("http://Media_Two.ism/manifest")));
    Contents.Add(new Content("Media Three", new Uri("http://Media_Three.ism/manifest")));
        Contents.Add(new Content("Media Four", new Uri("http://Media_Four.ism/manifest")));

        comboBoxUrls.ItemsSource = Contents;
        comboBoxUrls.SelectedIndex = 0;
        comboBoxUrls.SelectionChanged += new SelectionChangedEventHandler(comboBoxUrls_SelectionChanged);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:05:54.850

可以从 CodePlex 看一下这个项目，它正在与 Windows Phone 7 和 Windows Phone 8 的 HLS (m3u8) 一起使用！

[Windows Phone 流媒体](http://phonesm.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T11:25:27.590

这非常有效。[在 Windows Phone 8.1 上播放 HLS（m3u8 播放列表）](https://stackoverflow.com/questions/27005883/playing-hls-m3u8-playlist-on-windows-phone-8-1/27026663#27026663) 下载播放器框架，使用以下 DLL：

![要消耗的 DLL](../Images/5cfd8a2dcf9a96b50f7feba6b8f5abc2.png)

将播放器添加到您的 xaml：

```
xmlns:mmppf="using:Microsoft.PlayerFramework"
xmlns:smmedia="using:SM.Media.MediaPlayer"

<mmppf:MediaPlayer IsFullScreenVisible="True" IsFullScreenEnabled="True" IsFullScreen="False"  CurrentStateChanged="mPlayer_CurrentStateChanged" x:Name="mPlayer" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" IsFastForwardEnabled="False" IsInfoEnabled="False" IsLive="True" IsMoreEnabled="False" IsRewindEnabled="False" IsRightTapEnabled="False" IsScrubbingEnabled="False" IsSeekEnabled="False" IsSkipBackEnabled="False" IsSkipAheadEnabled="False" IsReplayEnabled="False" IsTimelineVisible="False" IsTimeElapsedVisible="False" IsTimeRemainingVisible="False" RequestedTheme="Dark">
        <mmppf:MediaPlayer.Plugins>
            <smmedia:StreamingMediaPlugin />
        </mmppf:MediaPlayer.Plugins>

    </mmppf:MediaPlayer> 
```

然后设置您的流 VIA 代码 - 如果 URL 永远不会更改，则设置 XAML。

# c - 带有结构的 2D Int 数组 - C

> ID：13584773
> 
> 赞同：1
> 
> 时间：2012-11-27T12:58:17.763
> 
> 标签：c, arrays, gcc, struct

我在 main 之前声明了结构：

```
struct roomData
{
  float widthFeet, widthInch;
  float lengthFeet, lengthInch;
  char roomName[100];
  int roomNumberOfType;
  char roomType[6]; //char of room type
  int roomStock[101][6]; //for storing each room stock types
  int roomHasStock; //if the room has a stock avaliable
  int roomStockCount; //how many stocks the room has
  float area;  // sq ft
  float rentalRate;
  float profitsPerRoom;
  float netProfit;
  float grossProfit;
}; 
```

在 main 里面，我用这个声明结构：

```
int main(void)
{
struct roomData rooms[MAXROOMS+1] = {0}; //struct for rooms(+1 for temp swapping in sorts)
} 
```

稍后我将结构和其他一些变量传递给一个函数，并在 main 中使用以下代码：

```
 fillRoomData(n, x, array, rooms, 1); 
```

fillRoomData 函数是这样的：

```
 void fillRoomData(int n, int x, struct fileInput array[300], struct roomData rooms[MAXROOMS], int check)//NEED TO ERROR CHECK
{
    if(check == 1) //for stock values in room
    {
        char * word4; //for strTok
        word4 = strtok(array[n].input," "); //stockType
        rooms[x].roomStock[a][0] = atoi(word4); //sores stock number
        word4 = strtok(NULL, " "); //stockCount
        rooms[x].roomStock[a][1] = atoi(word4); //sores stock inventory
....

} 
```

这是我在 rdb 之后从 GCC 得到的错误

```
 Program received signal SIGSEGV, Segmentation fault.
0x000000338f23473a in ____strtoll_l_internal () from /lib64/libc.so.6
(gdb) backtrace
#0  0x000000338f23473a in ____strtoll_l_internal () from /lib64/libc.so.6
#1  0x000000338f231bf2 in atoi () from /lib64/libc.so.6
#2  0x0000000000406ed9 in fillRoomData (n=29, x=0, array=0x7ffffffefcc0, 
    rooms=0x7ffffffd2fe0, check=1) at amp6572Lab4.c:1420
#3  0x0000000000400fde in main () at amp6572Lab4.c:279
(gdb) frame 2
#2  0x0000000000406ed9 in fillRoomData (n=29, x=0, array=0x7ffffffefcc0, 
    rooms=0x7ffffffd2fe0, check=1) at amp6572Lab4.c:1420
    1420                rooms[x].roomStock[a][b] = atoi(word4); //stores 
```

非常感谢所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:29:06.977

尝试将您的主要更改为：

```
struct roomData rooms[MAXROOMS+1]; 
```

# stored-procedures - plpgsql 存储函数，它使用参数列名创建表

> ID：13584776
> 
> 赞同：1
> 
> 时间：2012-11-27T12:58:23.950
> 
> 标签：stored-procedures, input, parameters, plpgsql, create-table

我想在 plpgsql 中创建一个 Postgres 存储函数，该函数创建一个具有根据输入参数而变化的指定列名的表。

基本上是这样的：

```
CREATE OR REPLACE FUNCTION document_insert_new_document(_name text, _table_name text)
  RETURNS bigint AS
$BODY$
declare
  _documentid bigint;
  _user_history_table_name text;
  _history_table_name_column text;

begin
    _documentid = 0;
    _user_history_table_name = 'merge_user_history_' || _table_name;
    _history_table_name_column = _table_name || '_id';
    CREATE TABLE _user_history_table_name
    (
      user_history_id bigint NOT NULL,
      _history_table_name_column bigint NOT NULL,
      ...
    )

end;
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

这可能吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:18:03.940

```
CREATE OR REPLACE FUNCTION document_insert_new_document(_name text, _table_name text)
  RETURNS void AS
$BODY$
declare
  _documentid bigint;
  _user_history_table_name text;
  _history_table_name_column text;
  query_create text;

begin
    _documentid = 0;
    _user_history_table_name = 'merge_user_history_' || _table_name;
    _history_table_name_column = _table_name || '_id';
    query_create := 'CREATE TABLE ' || _user_history_table_name ||
                    ' (user_history_id bigint NOT NULL,' ||
                    _history_table_name_column ||
                    ' bigint NOT NULL,
                     ... ) 
                    WITH (
                    OIDS=FALSE
                    )';
    EXECUTE query_create;

end;
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

或者，如果你想使用 'USING' 子句：

```
[...]
    query_create := 'CREATE TABLE ($1) (
                     user_history_id bigint NOT NULL,
                     ($2) bigint NOT NULL,
                     ... ) 
                     WITH (
                     OIDS=FALSE
                     )';
    EXECUTE query_create USING _user_history_table_name, _history_table_name_column;
[...] 
```

# php - 验证用户计算机以进行网站登录

> ID：13584777
> 
> 赞同：1
> 
> 时间：2012-11-27T12:58:28.900
> 
> 标签：php, .net, security, validation, plugins

这是我们的场景...

我们正在开发一个付费会员网站。我们的客户不希望我们的用户获得一个付费会员资格并与他们的朋友分享此详细信息，以便其他人也可以使用该网站。所以他想限制登录到注册人的计算机。

我们的客户准备好让所有用户在注册后安装一些插件或应用程序。类似于 gmail 视频的视频插件。

理想情况下，我们希望 webiste 登录来启动此应用程序，以便它可以交叉检查 MAC 地址或其他一些唯一信息，以确保用户正在从注册的计算机登录。请让我知道这是否可行

此外，如果您对实现此目标有任何其他建议，也请告诉我们

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:04:18.567

忘了它。如果不为每个浏览器编写自定义插件，就没有明智的方法来做到这一点。这将是一项疯狂的工作，也是一场隐私噩梦。

*我从来没有*听说过有偿服务可以做到这一点，他们有充分的理由不这样做。

也就是说，专有媒体服务一直在这样做：例如，iTunes 允许其内容最多在 (IIRC) 5 台机器上播放。没有人会将他们的 iTunes 凭据泄露给朋友，因为您可以用他们购买东西。也许您的服务可以搭载在 iTunes 或其他类似服务上。他们已经投入了大量资金和时间来构建适当的 DRM。

但最有可能的是，您的客户需要被告知这是一个不切实际的要求，并且他们应该像其他人一样以正常方式提供服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T13:04:52.713

主动要求您的用户提供类似的东西是失去所有这些用户的好方法（并且几乎可以保证）。

你能做的最好的就是被动检查，随着时间的推移记录IP。也许在 24 小时内将他们的登录限制为 5 个 IP，但是您还必须为移动 IP 提供例外。

基本上，这是一场噩梦。不要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:10:24.410

对于手机用户可以开发手机APP，然后就可以很方便的控制基于EMEI之类的设备登录的用户数。对于非移动用户，比插件更简单的方法是为用户提供浏览器扩展，并基于该扩展，限制与帐户的连接数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T13:08:25.900

你有办法让用户从他们的多台电脑/平板电脑/手机登录吗？用户需要能够注册多个设备。

看看 Apple 帐户如何在 iTunes 中工作。它们允许用户一次最多授权 5 台计算机，这意味着虽然用户可以与朋友共享他们的帐户，但至少限制为 5 人。从好的方面来说，一个用户可以在他们的家用电脑、工作笔记本电脑、台式机等上授权他们的帐户。

另一个想法是一次只允许一次同时登录。这样，如果用户与朋友共享他们的帐户，他们就无法在他们的朋友也登录时登录。这对人们不共享他们的帐户是一个很好的威慑。但是，对于那些合法地想要在多个设备上登录的人来说，不断地重新登录会很烦人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T17:54:07.323

我建议使用浏览器 cookie，当用户登录并跟踪后端服务器上的会话时，该 cookie 会保存一个唯一的会话 ID。例如

```
User[joe@foo.com] =  {
    Session[1] = 1234;
} 
```

当用户 joe@foo.com 从另一台设备登录时，您将拥有

```
User[joe@foo.com] =  { 
    Session[1] = 1234;
    Session[2] = 4567;
} 
```

此时您终止 Session[1] 或向 Session[2] 发送消息以注销 Session[1]。

跟踪 IP 或 MAC 地址不是一个好的解决方案。由于它是基于 Web 的应用程序，因此如果浏览器在智能手机上或用户具有动态 IP，IP 地址将发生变化。IP 地址是面向公众的地址，并且设备通常位于执行 NAT 的路由器/防火墙后面。此外，平板电脑和其他设备也有可能访问 Web 应用程序。

我认为一旦用户意识到登录会话被跟踪，他们很快就会学会不这样做。

您可以将此作为一项功能，以便如果用户想要一个多用户帐户，例如五个用户帐户，您可以以略微折扣的价格提供它，这对所有人来说都是双赢的。

# python - 如何制作跨越多个文件的直方图？

> ID：13584782
> 
> 赞同：0
> 
> 时间：2012-11-27T12:58:42.283
> 
> 标签：python, numpy, histogram

我想制作一个跨越文件夹中多个文件的直方图。例子：

文件 1：

```
Alpha
Beta 
Ceta  
Delta 
```

文件 2：

```
Delta 
Ceta 
Alpha 
```

文件 3：

```
Beta 
Delta 
```

我知道我可以使用 Numpy 创建直方图： `axHistx = plt.axes(range)`

我如何使用它在多个文件上创建直方图，这给了我字符串出现的绝对数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:50:22.793

如果您只是想计算所有文件中的实例数，您可以这样做：

```
counts = {}
for f in filenames:
    for val in [s.strip() for s in open(f).readlines()]:
        counts[val] = counts.get(val, 0) + 1 
```

# php - 如何为此添加分页

> ID：13584783
> 
> 赞同：1
> 
> 时间：2012-11-27T12:58:42.017
> 
> 标签：php, codeigniter, pagination

我正在尝试将分页添加到我在查看页面上获得的搜索结果中。我对获取像这样的网址感到非常困惑。

```
localhost:81/profile/index.php/main/search?query=vi 
```

我想要得到的是：

```
localhost:81/profile/index.php/main/search?query=vi&off=5 
```

当点击 1,2,3 分页链接时，带有偏移值。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Main extends CI_Controller{

function index()
{     

    $this->load->view('main_view');

}

function search()
{

    $off = $_GET['off'];

    $query = $_GET['query'];

    $min_length = 1;

    if(strlen($query) >= $min_length)
    {
        $query_str = "SELECT * FROM customers WHERE customerName LIKE '%$query%' LIMIT 10 OFFSET '$off'";
        echo $query_str;
        $result = $this->db->query("SELECT * FROM customers WHERE customerName LIKE '%$query%' LIMIT 10 OFFSET $off")->result_array();

        echo "<table border='1' cellpadding='10'>";
        echo "<tr><th>Number</th><th>Name</th><th>address</th><th>phone</th></tr>";

        foreach($result as $data)
            {
                echo "<tr></tr>";       
                echo "<td>".$data['customerNumber']."</td>"."<td>".$data['customerName']."</td>"."<td>".$data['addressLine1']."</td>".
                "<td>".$data["phone"]."</td>";

            }

    }
    else
    { 
        echo "Minimum length is ".$min_length;
    }

    $this->load->view('main_view');
}}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:01:36.557

[如果 CodeIgniter 有一个很棒的用户指南和一个分页库就好了。](http://ellislab.com/codeigniter/user-guide/libraries/pagination.html)

看看上面的页面。然后，您希望在根据 URL 中的参数选择记录时过滤记录。

# android - 应用程序 A 访问存储在应用程序 B 的内存中的文本文件

> ID：13584788
> 
> 赞同：0
> 
> 时间：2012-11-27T12:59:11.507
> 
> 标签：android

我的应用程序（应用程序 A）需要编写一个文本文件，该文件将存储在另一个应用程序（应用程序 B）的内部存储器下。知道如何实现吗？

我尝试了以下方法：

在这两个 AndroidManifest.xml 文件下，我都指定了相同的 android:sharedUserId。

在 App A 中，我使用了：

filePath = getPackageManager().getPackageInfo("App B 的包名", 0).applicationInfo.dataDir;

获取路径，我已经确认路径对于 App B 的内部存储器是正确的。

但我收到“java.io.IOException：权限被拒绝”。

知道我在哪里犯了错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:06:32.770

根据官方文档[here](http://developer.android.com/training/basics/data-storage/files.html)，

> 从技术上讲，如果您将文件模式设置为可读，另一个应用程序可以读取您的内部文件。但是，其他应用程序也需要知道您的应用程序包名称和文件名。

是可以做的事情。

因此，使用您的文件路径创建一个 File 对象并在其上调用[setReadable](http://developer.android.com/reference/java/io/File.html#setReadable%28boolean%29)。

另外，请检查您**没有**使用 MODE_PRIVATE 创建文件。

# qml - qml：参考错误：找不到变量

> ID：13584789
> 
> 赞同：0
> 
> 时间：2012-11-27T12:59:19.043
> 
> 标签：qml

我的 ListModel 有 15 个角色。我没有为每个 ListElement 指定所有这些，因为它们并不总是必需的。

我有基于角色显示值的通用代码。因此，如果我当前的 ListElement 没有`a`定义角色，并且我正在尝试检查该值，则会引发参考错误。

我尝试使用捕获此错误，`(a==undefined || a== null)`但它仍然在`a`.

是否有任何其他选项可以捕获此错误？（除了为所有 ListElements 编写所有角色）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:03:48.303

为方便起见，模型角色可用作委托的属性（就像您目前所做的那样）。您可以改为使用限定的模型名称来访问它们。例如`model.a`，而不仅仅是`a`. 如果角色不可用，则表达式的值将是未定义的，但这不是错误。典型的解决方法是使用布尔运算符，例如`model.a || "default value"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:29:22.343

试试这个：

```
if (a) {
  // Your stuff here
} 
```

# bluetooth - 如何在android中检测BT耳机

> ID：13584790
> 
> 赞同：0
> 
> 时间：2012-11-27T09:39:18.830
> 
> 标签：bluetooth

我参考了这个[Link](http://developer.android.com/guide/topics/connectivity/bluetooth.html)的代码。

他们提到只有 Android 3.0 及更高版本支持`BluetoothHeadset`和`BluetoothProfile`类。

那么我们如何才能检测使用或不使用该类的 BT 耳机呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:58:13.873

您可以使用类来检测耳机[`android.bluetooth.BluetoothDevice`](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html)，具体来说`getBluetoothClass()`，它返回一个[`BluetoothClass`](http://developer.android.com/reference/android/bluetooth/BluetoothClass.html)对象。然后，您可以调用`getDeviceClass()`它并将其与 中定义的常量进行比较[`BluetoothClass.Device`](http://developer.android.com/reference/android/bluetooth/BluetoothClass.Device.html)。

这些从 API 级别 5 (Android 2.0) 开始可用。

# jquery - Jquery Next() div 按 ID

> ID：13584794
> 
> 赞同：0
> 
> 时间：2012-11-27T12:59:26.257
> 
> 标签：jquery, html

目前下面的 jQuery 只会从 跳转`Sport`到`Entertainment`. `div`有没有办法通过使用一段代码从任何到下一个？

```
<div id="topBar">
    <span>
        <a id='slink' class='trigger' href='#Sports'>Sport</a>
        <a id='elink' class='trigger'  href='#Entertainment'>Entertainment</a >
        <a id='mlink' class='trigger' href='#Military'>Military</a>
        <a id='mocklink' class='trigger' href='#MockUp'>MockUps</a>
        <button>Next</button>
    </span>
</div> 
```

```
$("button").on('click', function() {
    $('.triggered:First').next('.triggered').show()
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:20:34.703

假设你的`.trigger`元素默认都是隐藏的，这应该可以工作：

```
$(".trigger:first").show();

$("button").click(function() {
    var $next = $(".trigger:visible").hide().next(".trigger");
    if (!$next.length)
        $next = $(".trigger:first");

    $next.show();
}); 
```

[**示例小提琴**](http://jsfiddle.net/huH7p/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:02:04.253

你可以试试这个：

```
$("button").click(function() {
    $(this).sibling('.trigger').show();
} 
```

# php - ini_set 不在同一个脚本中工作

> ID：13584795
> 
> 赞同：1
> 
> 时间：2012-11-27T12:59:28.487
> 
> 标签：php, prestashop

我正在使用 prestashop，我需要更改 max_input_vars，以便从 Translation 部分应用翻译更改。

由于我的托管服务提供商政策，我无法在 .htaccess 中使用 php_value，因此我需要使用 php.ini 文件。我已将其创建到 prestashop 管理文件夹中，内容如下：

最大输入变量 = 3000

但是当我更新翻译时，我得到了 max_input_vars 的错误，所以它没有被 php.ini 更改。我也试过没有空格，尾随“;” 并且没有效果。

为了检查它，我创建了一个只有 phpinfo() 的文件，它告诉我它设置为 1000（默认值）。我认为在 phpinfo 调用上方使用 ini_set 会更改其值（仅针对该脚本），但实际上，它不会更改任何内容。所以，我提出：

```
ini_set("max_input_vars","3000");
phpinfo(); 
```

我为 max_input_vars 得到的值为 1000。

关于如何更改值或为什么它不起作用的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T13:01:52.663

此配置设置不能在运行时从代码中设置。如果您查看[配置设置列表，](http://www.php.net/manual/en/ini.list.php)您将看到其“可更改”值为`PHP_INI_PERDIR`. [本页](http://www.php.net/manual/en/configuration.changes.modes.php)解释了这意味着什么。

`ini_set`只能影响标记为可更改的设置`PHP_INI_USER`。

对此的合理解释是，该设置会在您的代码有机会运行*之前影响 PHP 的行为。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T13:02:45.707

当 PHP 尝试解析发送到脚本的数据时，该设置适用。这发生*在*您的脚本甚至执行之前。因此，您根本无法在运行时设置它，因为该设置会影响运行前的某些内容。

# position - javafx 更改标签的锚点

> ID：13584796
> 
> 赞同：0
> 
> 时间：2012-11-27T12:59:32.000
> 
> 标签：position, positioning, anchor, javafx, bounding-box

我需要更改 JavaFX 中标签的锚点。我将锚描述为被选中以转换底层节点的点。默认情况下，锚点似乎是左上边缘。

我尝试通过如下所述的附加翻译来解决问题：

```
double x_relocate = label.getBoundsInParent().getWidth();
label.setTranslateX(label.getTranslateX() - x_relocate);

double y_relocate = label.getBoundsInParent().getHeight();
label.setTranslateY(des.getTranslateY() + y_relocate); 
```

代码应该翻译标签，使它的行为就像锚点在右下角一样。这不起作用，因为在我执行代码时，标签的边界框是 [minX:0.0, minY:0.0, minZ:0.0, width:-1.0, height:-1.0, depth:0.0, maxX: -1.0，最大值：-1.0，最大值Z：0.0]。

有谁知道这个的解决方案？

编辑：添加图片以便更好地理解

[![画报](../Images/b1cff9af75a665625c07ffb53fe35278.png)](http://www.pic-upload.de/view-17161781/anchorage.jpg.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:23:24.943

好的，我自己解决了这个问题。这是我所做的：

1.  给标签一个宽度和高度，为最长的文本留出足够的空间
2.  重新定位每个象限中的标签。
3.  设置每个象限中的文本对齐方式

示例（宽度：100，高度：15）：

*   东到南：这里不做任何事情，因为默认使用左上边缘从南到西
*   从南到东：将标签向右移动 100 点以使右上边缘贴在圆圈上 + 将文本对齐设置为 UPPER_RIGHT

我希望对某人有所帮助。

# jquery - 为什么我会得到一个非法令牌？

> ID：13584801
> 
> 赞同：0
> 
> 时间：2012-11-27T12:59:44.123
> 
> 标签：jquery

以下是给我一个非法令牌错误消息：

```
$('.navigation3').click(function(event) {
    var $nav3 = $(this),
        $dd = $nav3.next('.dropdown');

    $nav3.toggleClass('active');

    var leftoffset = $dd.width() - $nav3.width();

    var offset = 20,
        offsettop = $nav3.offset().top + $nav3.height() + offset,
        offsetleft = $nav3.offset().left-leftoffset ;

    $dd.css({
        top: offsettop,
        left: offsetleft
    });

    $nav3.hasClass('active') ? $dd.show() : $dd.hide();
});​ 
```

它发生在最后`});`。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:04:54.583

你的代码看起来不错。在复制和粘贴代码时，有时可能会出现在代码中的一些不可见字符。尝试删除该区域周围的所有不可见字符（包括空格），然后重试。

**更新**

剧本末尾有一个不受欢迎的角色。我清理了代码并立即尝试，它应该可以工作

```
$('.navigation3').click(function(event) {
    var $nav3 = $(this),
        $dd = $nav3.next('.dropdown');

    $nav3.toggleClass('active');

    var leftoffset = $dd.width() - $nav3.width();

    var offset = 20,
        offsettop = $nav3.offset().top + $nav3.height() + offset,
        offsetleft = $nav3.offset().left-leftoffset ;

    $dd.css({
        top: offsettop,
        left: offsetleft
    });

    $nav3.hasClass('active') ? $dd.show() : $dd.hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:08:57.853

三元运算符计算表达式并返回预期分配的值。

一个简单的 if/else 语句而不是三元运算符就可以了

# asp.net - 在 ASP.NET 应用程序中将数据导出为 PDF

> ID：13584802
> 
> 赞同：0
> 
> 时间：2012-11-27T12:59:45.953
> 
> 标签：asp.net, export, pdf-generation

在我的 ASP.NET 网站中，我接受数据输入并将其存储在数据库中。现在，我需要添加一个功能，可以在导出到 PDF 工具中获取存储的数据，我可以在其中保存 pdf，并以特定格式保存数据。任何人都可以在这方面指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:06:18.690

您将需要使用 3rd 方框架来执行此操作。大多数报告工具都有将报告导出为 PDF 的选项。我相信 SSRS 有这个选项，我知道 Crystal Reports 有这个功能。我确信其他报告工具也具有此功能。

还有一些工具可以直接生成 PDF 而不是通过报告。快速的谷歌搜索`of .net pdf generator`将是一个很好的起点。还有 iText，它是一个用于从 xml 生成 PDF 的开源项目。关于 iText sharp 的文档并不多，而且根据我的理解也没有积极开发，所以期待这个库有一个巨大的学习曲线。

除非 .net 框架（报告服务）中内置的报告功能可以生成满足您需求的 PDF，否则希望购买第三方工具来帮助您创建 PDF。

# php - 加入实体关系时如何防止冗余查找？

> ID：13584804
> 
> 赞同：0
> 
> 时间：2012-11-27T12:59:56.887
> 
> 标签：php, symfony, doctrine

我正在加快使用 Symfony 2 和 Doctrine 的速度，并且在执行不必要的数据库查找以与连接实体进行水合时遇到困难。

在使用子对象执行连接查询后，子对象会自动从数据库中提取其其他映射。尽管我没有尝试访问它的任何属性，但它正在这样做。就好像它们在`find`查询中被访问。

我的示例如下所示 - 有一些实体被调用`Person`并且`Building`它们都加入了一个名为`Place`：

```
class Person {
    /**
     * Where this person lives
     * @var Place $Home
     * 
     * @ORM\OneToOne(targetEntity="Place", cascade={"persist"}, inversedBy="Resident" )
     * @ORM\JoinColumn(name="place_id", referencedColumnName="id")
     */
    private $Home;
}

class Building {

    /**
     * Where this building stands
     * @var Place $Site
     * 
     * @ORM\OneToOne(targetEntity="Place", cascade={"persist"}, inversedBy="Landmark" )
     * @ORM\JoinColumn(name="place_id", referencedColumnName="id")
     */
    private $Site;
}

class Place {
    /**
     * Reverse mapping
     * @var Person $Resident
     * 
     * @ORM\OneToOne(targetEntity="Person", mappedBy="Home")
     */   
    private $Resident;

    /**
     * Reverse mapping
     * @var Building $Landmark
     * 
     * @ORM\OneToOne(targetEntity="Building", mappedBy="Site")
     */   
    private $Landmark;
} 
```

我的人存储库加入如下所示：

```
/**
 * @override
 * @return Person
 */
public function find( $id ){
    $query = $this->getEntityManager()
        ->createQuery('
            SELECT p, h
            FROM MyBundle:Person p
            JOIN p.Home h
            WHERE p.id = :id'
        )->setParameter('id', $id);
    return $query->getSingleResult();
} 
```

如何防止 Place 在`find`操作过程中单独获取其 Building 关系？有什么我可以传递给 Query 实例来阻止这种情况的吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T13:31:26.867

`fetch`为您的映射添加选项。

像这样：

> 班级地点{
> 
> ```
> /**
>  * Reverse mapping
>  * @var Person
>  * 
>  * @ORM\OneToOne(targetEntity="Person", mappedBy="Home", fetch="EXTRA_LAZY")
>  */   
> private $Resident; 
> ```
> 
> }

# java - toCharArray 并替换在索引中检测到

> ID：13584826
> 
> 赞同：-2
> 
> 时间：2012-11-27T13:01:05.983
> 
> 标签：java

我这里有两个问题需要解决。首先：我有我的程序，其中我希望将用户输入的任何内容保存在字符串中，并放置在数组中。

我的代码：

```
String words;
    String replaced_words;

    Scanner s = new Scanner (System.in);

        System.out.println("Enter a line of words basing on an event, verse, place or a name of a person.");
        words = s.nextLine();
        System.out.println("Word accepted!");
        //using char array method
        char [] c = words.toCharArray(); 
```

现在，我对字符串使用了 replace 方法，如下所示：

```
String replace = words.replace(' ', '-'); 
```

但问题是，这是作为错误发生的。通过将 ' ' 字符替换为以下单词：

```
String replace = words.replace(words, '-') 
```

尽管我想根据单词上的字符数来限制连字符的长度。

该程序的输出应如下所示： · 将此字符串的副本创建到一个数组中，其中每个字母都替换为连字符 (-)，每个空格都替换为下划线 (_)。符号和数字将保持显示。

我遇到的问题是它不会用连字符和下划线替换它们。它只显示我刚刚通过扫描仪键入的输入文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:10:37.047

为了实现您的目标，您可以使用：

```
 String word = "AB CD EF";
    String replace = word.replace(' ' , '-').replaceAll("[^\\-]", "_");
    System.out.println(replace); // prints "__-__-__" 
```

如果您想要下划线之间的空格（以区分它们），您可以使用

```
 for (int i = 0; i < replace.length(); i++) {
        System.out.print(replace.charAt(i) + " ");
    }
    // prints "_ _ - _ _ - _ _ " 
```

# jquery - ajax回调后jquery函数不起作用

> ID：13584842
> 
> 赞同：2
> 
> 时间：2012-11-27T13:01:44.443
> 
> 标签：jquery, asp.net, ajax, updatepanel

我正在使用 asp.net 3.5

我有一个在“悬停”事件上运行良好的 jquery 函数。

浏览器使用 ajax 调用刷新某些 div 后会出现问题。

从那时起，浏览器将忽略悬停事件并且不调用 jquery 函数。只有在页面刷新后它才能恢复正常。

*** 进行 ajax 调用，我正在使用**

> ```
> <asp:UpdatePanel ID="UpdatePanel4"  runat="server" UpdateMode="Always">
>          <ContentTemplate runat="server">
>             <div id='map' runat="server"></div>                        
>           </ContentTemplate>
>  </asp:UpdatePanel> 
> ```

**-- 这是jquery函数 --**

```
$(function() {
  $('a.trigger').hover(function() {

    var index = $(".trigger").index(this);

  var pop=document.getElementById("pop_up");

  var place=document.getElementsByClassName('place')[index ];

  var car_id=document.getElementsByClassName('car_id')[index];
  var enter_time=document.getElementsByClassName('time')[index ];
  pop.innerHTML="Park At: "+place.innerHTML+"</br>Car Id:"+car_id.innerHTML+"</br>Enter At:"+enter_time.innerHTML;

    $('div#pop_up').show();
  }, function() {
    $('div#pop_up').hide();
  });
}); 
```

-- 这是 ajax 回调后没有响应的 div --

> ```
> <div id="pop_up" runat="server">
>     <p  id='who_parks_here' runat="server"></p>
> </div> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:03:23.843

`.on()`当在 AJAX 面板中收到新的 HTML 时，您必须使用ASP.NET AJAX 调用删除已附加的事件处理程序。

```
$(function() {
    $(document).on('hover', 'a.trigger', function() {

        var index = $(".trigger").index(this);

        var pop = document.getElementById("pop_up");

        var place = document.getElementsByClassName('place')[index];

        var car_id = document.getElementsByClassName('car_id')[index];
        var enter_time = document.getElementsByClassName('time')[index];
        pop.innerHTML = "Park At: " + place.innerHTML + "</br>Car Id:" + car_id.innerHTML + "</br>Enter At:" + enter_time.innerHTML;

        $('div#pop_up').show();
    }, function() {
        $('div#pop_up').hide();
    });
}); 
```

# variables - 在 Nginx 重写规则中使用变量

> ID：13584848
> 
> 赞同：0
> 
> 时间：2012-11-27T13:01:53.117
> 
> 标签：variables, nginx, rewrite

我正在尝试将干净的 URL 映射到同名的控制器。我只想使用一个变量，这样我的配置文件就不会变得混乱。我试过这个：

```
location ^~ /$1 {
  rewrite ^ /controllers/$1.php last;
} 
```

但这似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:07:50.690

它应该是

```
location / {
  rewrite ^(.*)$ /controllers/$1.php last;
} 
```

如[文档](http://wiki.nginx.org/HttpRewriteModule#rewrite)所示

# node.js - Node.js 0.8.15 npm 错误：找不到模块 'proto-list'

> ID：13584852
> 
> 赞同：9
> 
> 时间：2012-11-27T13:02:02.167
> 
> 标签：node.js, npm

我通过从源代码编译在 Ubuntu 11.10 x64 上安装了最新的 Node.js (0.8.15)。

```
./configure --dest-cpu=x64
 制作
 须藤使安装

```

一切正常，Node.js 运行良好，但 npm 不想正常运行。对于任何 npm 命令，它都会出现以下错误

```
错误：找不到模块“原型列表”
    在 Function.Module._resolveFilename (module.js:338:15)
    在 Function.Module._load (module.js:280:25)
    在 Module.require (module.js:362:17)
    在需要（module.js:378:17）
    在对象。（/usr/local/lib/node_modules/npm/node_modules/npmconf/node_modules/config-chain/index.js:2:17）
    在 Module._compile (module.js:449:26)
    在 Object.Module._extensions..js (module.js:467:10)
    在 Module.load (module.js:356:32)
    在 Function.Module._load (module.js:312:12)
    在 Module.require (module.js:362:17)

```

顺便说一句，我定期更新我的 Node.js，我以前的版本是 Node.js 0.8.12，npm 可以正常工作。有谁知道如何解决这种情况？还是我做错了什么？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:28:48.393

看起来您想要一个未安装的模块！？？

尝试

```
npm install proto-list 
```

# windows-phone-7 - 在 WP7 中更改复制和粘贴图标并在 Windows 手机中添加自定义菜单，如复制和粘贴

> ID：13584858
> 
> 赞同：1
> 
> 时间：2012-11-27T13:02:08.000
> 
> 标签：windows-phone-7, windows-phone-7.1

我想在 Windows Phone 7 中更改复制和粘贴图标，还想在 Windows Phone 中添加自定义菜单，例如复制和粘贴，例如在 Webbrowser 控件中的突出显示和书签等。

Q1：我可以在选择文本时生成类似控件的副本吗？Q2：我可以在选择文本时添加圆形图标吗？

我已经尝试过 List 和 windows phone 7 工具栏的上下文菜单，但我想对 windows phone 使用相同的方案。

如果有人有相关信息，请帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:23:23.523

使用列表框添加弹出窗口

```
<Popup Name="textSelectionMenuPopup">

            <ListBox Name="textSelectionMenu" Margin="0,0,0,100" ItemContainerStyle="{StaticResource myLBStyle}" SelectionChanged="OnTextSelectionMenuSelectionChanged">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel/>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBoxItem Content="Copy">
                    <ListBoxItem.Background>
                        <ImageBrush ImageSource="/Images/Copy.png"/>
                    </ListBoxItem.Background>
                </ListBoxItem>
                <ListBoxItem Content="Highlights">
                    <ListBoxItem.Background>
                        <ImageBrush ImageSource="/Images/Highlights.png"/>
                    </ListBoxItem.Background>
                </ListBoxItem>
                <ListBoxItem Content="Tag">
                    <ListBoxItem.Background>
                        <ImageBrush ImageSource="/Images/Tag.png"/>
                    </ListBoxItem.Background>
                </ListBoxItem>
                <ListBoxItem Content="Note">
                    <ListBoxItem.Background>
                        <ImageBrush ImageSource="/Images/Note.png"/>
                    </ListBoxItem.Background>
                </ListBoxItem>

            </ListBox>
        </Popup> 
```

并处理 OnTextSelectionMenuSelectionChanged

```
 void OnTextSelectionMenuSelectionChanged(object sender, SelectionChangedEventArgs args)
    {
        ListBox lstbox = sender as ListBox;

        if (lstbox.SelectedItem != null)
        {
            textSelectionMenuPopup.IsOpen = false;

            string command = (lstbox.SelectedItem as ListBoxItem).Content as string;

            switch (command)
            {
                case "Copy":

                    break;

                case "Highlights":

                    break;

                case "Tag":

                    break;

                case "Note":
                    break;

                case "cancel":
                    break;
            }
        } 
```

# c# - 查询 Linq 返回列表 从对象

> ID：13584860
> 
> 赞同：2
> 
> 时间：2012-11-27T13:02:29.237
> 
> 标签：c#, .net, linq

我有这门课：

```
public class MyClass
{
    public int Id { get; set; }
    public int MyId1 { get; set; }
    public int MyId2 { get; set; }
    public int MyId3 { get; set; }
    public string MyName { get; set; }
} 
```

我有一个`List<MyClass>`

我做一个查询：

```
var result = (from my in MyClass
             where Id == 5
             select my).First(); 
```

我想要一个包含 MyId1、MyId2 和 MyId3 的列表

任何的想法 ？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T13:04:19.410

```
var result = (from my in list
             where my.Id == 5
             select new List<int>() { my.MyId1, my.MyId2, my.MyId3 }).First(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:17:43.057

我认为您的代码中有两个步骤：（1）获取所需的对象和（2）将该对象转换为列表。所以实际上我认为更合适的是这样的：

```
var firstResult = list.First(my => my.Id == 5);
var result = new List<int>{firstResult.MyId1, my.MyId2, my.MyId3}; 
```

这种方法稍微好一点，因为它更简单，并且更清楚地表明你的意图。

考虑[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)：你的代码应该只有一个改变的理由。您的代码（以及 Arsen 的代码）缺乏这种能力。当需求发生变化并且您需要更改您的类或向列表中添加其他属性时，您需要更改您的过滤逻辑。但很明显，这两个方面是正交的，在这种情况下不应该改变。

顺便说一句，您可以向 MyClass 类添加扩展方法或简单方法，将其转换为 List。在这种情况下，您的代码将更具可读性：

```
var result = list.First(my => my.Id == 5).ToListOfInt(); 
```

# mysql - 如何查询提要表中的最新项目

> ID：13584863
> 
> 赞同：1
> 
> 时间：2012-11-27T13:02:41.317
> 
> 标签：mysql, sql, group-by

有一个表`client_application`用类似这样的数据调用；

```
Id   user_id   name      creationDate
---------------------------------------
1    5         name1     date
2    4         name2     date
3    98        name3     date 
```

还有一个名为的表`application_status`，其中包含应用程序的状态提要（`application_id`是外键）；

```
Id   aplication_id   status            other_columns      creationDate
----------------------------------------------------------------------
1    1       APPLICATION_SUMITTED      data               date
2    2       APPLICATION_SUMITTED      data               date
3    1       APPLICATION_RECEVIED      data               date
4    1       BANK_APPROVED             data               date
5    3       APPLICATION_SUMITTED      data               date
6    2       APPLICATION_RECEVIED      data               date 
```

我想通过他们的状态查询应用程序。例如获取最新提交的申请？或获得银行批准的申请。

如何实现这样的 SQL 查询？

我试过了；

```
SELECT *
FROM (SELECT * FROM application_status ORDER BY creationDate DESC) t1
LEFT JOIN client_application on client_application.id = t1.application_id
GROUP BY t1.application_id; 
```

这很好，我可以获取具有最新状态的应用程序，但是当我尝试在其中添加 where 子句时；

```
SELECT *
FROM (SELECT * FROM application_status ORDER BY creationDate DESC) t1
LEFT JOIN client_application on client_application.id = t1.application_id
where t1.status = 'APPLICATION_SUBMITTED'
GROUP BY t1.application_id; 
```

它返回所有`application_status`具有`APPLICATION_SUBMITTED`状态列。它返回`application_id`1 项（检查上表），但如您所见，ID 号为 1 的应用程序的`APPLICATION_RECEIVED`状态为最新状态项。所以我不希望结果集中有这个。

也许我的方法是完全错误的。我愿意接受任何解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:11:19.570

我不知道你为什么要在那里组，但也许你只是想

```
select apps.*, ca.*
from application_status apps
 left join client_application ca on ca.id = apps.application_id
WHERE apps.status = 'APPLICATION_SUBMITTED'
  AND not exists ( select 1 
                   from application_status 
                   where application_id = apps.application_id 
                     and creationdate > apps.creationdate 
                  )
ORDER BY apps.creation_date DESC, apps.application_id 
```

编辑[sql 小提琴](http://www.sqlfiddle.com/#!2/b3f95/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:18:03.367

我的建议是通过创建一个新表“状态”来改进数据库的设计，例如：

```
Id   Label
1    APPLICATION_SUBMITTED
2    APPLICATION_RECEIVED
3    BANK_APPROVED 
```

您必须给标签一个逻辑顺序，并在您的状态或主表中引用此表。

检索应用程序的状态会更容易（其中 Status.Id < 3 选择所有未批准的应用程序，或者 Status.Id > 1 选择至少收到的所有应用程序）。

它也更好地用于维护目的。这种逻辑在很多情况下都适用，你应该考虑花更多的时间来设计你的数据模型，这样你就不会花更多的时间来解决你现在面临的这类问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T13:21:58.410

试试这个：

```
SELECT *
FROM (SELECT * FROM (SELECT * FROM application_status ORDER BY creationDate DESC) AS A GROUP BY application_id) AS t1
LEFT JOIN client_application ON client_application.id = t1.application_id
WHERE t1.status = 'APPLICATION_SUBMITTED' 
```

# c# - 如何在设计视图中显示自定义属性

> ID：13584869
> 
> 赞同：1
> 
> 时间：2012-11-27T13:03:03.900
> 
> 标签：c#, entity-framework, entity-framework-4.1

如何让我的自定义属性出现在最新版本的实体框架的 edmx 设计视图中？

我向部分类添加了一个自定义属性，如下所示：

```
public partial class Survey
{
public IEnumerable<Data.Users> answers
  {
   get;
   set;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:09:28.063

你不能这样做。实体`edmx`由 EntityModelCodeGenerator（T4 生成）从文件生成，反之亦然。原始生成的类或您创建的部分实体中的任何更改都不会影响`edmx`文件。

因此，如果您想在`edmx`设计视图中查看属性，请改为修改`edmx`文件。在图表中选择您的`Survey`实体，然后从上下文菜单中选择。您可以在此处添加标量、导航或复杂属性。属性将出现在您生成的实体上。`edmx``Add New...`

# java - 如何在替换之前对 replaceAll 中的正则表达式部分进行计算？

> ID：13584874
> 
> 赞同：0
> 
> 时间：2012-11-27T13:03:21.750
> 
> 标签：java, regex, format

我有一个字符串，例如：`"2E6 3.34e-5 3 4.6"`并且我想使用 replaceAll 替换标记，例如：

`"((\\-)?[0-9]+(\\.([0-9])+)?)(E|e)((\\-)?[0-9]+(\\.([0-9])+)?)"`

（即两个数字之间有 e 或 E）转换成等效的正常数字格式（即`"2E6"`用`"2000000"`和`"3.34e-5"`替换`"0.0000334"`）

我写：

```
value.replaceAll("((\\-)?[0-9]+(\\.([0-9])+)?)(E|e)((\\-)?[0-9]+(\\.([0-9])+)?)", "($1)*10^($6)"); 
```

但我想实际上将第一个参数乘以 10 到第二个参数的幂，而不仅仅是这样写.. 有什么想法吗？

**更新**

根据您的建议，我做了以下操作：

```
Pattern p = Pattern.compile("((\\-)?[0-9]+(\\.([0-9])+)?)(E|e)((\\-)?[0-9]+(\\.([0-9])+)?)");
Matcher m = p.matcher("2E6 3.34e-5 3 4.6");
StringBuffer sb = new StringBuffer();
while (m.find()) {
    m.appendReplacement(sb, "WHAT HERE??"); // What HERE ??
}
m.appendTail(sb);
System.out.println(sb.toString()); 
```

**更新**

最后，这就是我所达到的：

```
// 32 #'s because this is the highest precision I need in my application
private static NumberFormat formatter = new DecimalFormat("#.################################");

private static String fix(String values) {
    String[] values_array = values.split(" ");
    StringBuilder result = new StringBuilder();
    for(String value:values_array){
        try{
            result.append(formatter.format(new Double(value))).append(" ");
        }catch(NumberFormatException e){ //If not a valid double, copy it as is
            result.append(value).append(" ");
        }
    }
    return result.toString().substring(0, result.toString().length()-1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:41:16.087

```
 StringBuffer buffer = new StringBuffer();

    Pattern regex = Pattern.compile("((\\-)?[0-9]+(\\.([0-9])+)?)(E|e)((\\-)?[0-9]+(\\.([0-9])+)?)");
    Matcher matcher = regex.matcher( "2E6 3.34e-5 3 4.6");
    while (matcher.find()) {

      String a = matcher.group(1); //The $1
      String b = matcher.group(6); //The $6
      String repl = null;
      if( a != null && b != null ) { //Check if both exist for this match
                      //Parse, do calculations and convert to string again
          repl = BigDecimal.valueOf( Double.parseDouble( a ) * Math.pow( 10, Double.parseDouble( b ) )).toString();
      }
      else {
          repl = matcher.group(0); //Else return unaffected
      }
      matcher.appendReplacement(buffer, repl);
    }
    matcher.appendTail(buffer);

    System.out.println( buffer.toString());
     //"2000000.0 0.0000334 3 4.6" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:37:42.360

如果您需要将科学数字符号转换为普通形式，您可以使用[DecimalFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)

```
public static void main(String[] args) {
    NumberFormat formatter = new DecimalFormat();

    double num1 = 2E6;
    formatter = new DecimalFormat("##########");
    System.out.println(formatter.format(num1)); 

    double num2 = 3.3e-5;
    formatter = new DecimalFormat("#.##########");
    System.out.println(formatter.format(num2));
} 
```

只需添加逻辑来拆分初始字符串`spaces`并应用上述逻辑。

[您可以在DecimalFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)的 javadoc中查看有关符号的更多信息，例如`#`（在这种情况下）。

```
Symbol Location     Localized?  Meaning   
------------------------------------------------------------
#      Number       Yes         Digit, zero shows as absent 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:11:52.887

我认为您无法使用 replaceAll 方法做到这一点。您似乎知道正则表达式，所以我只会为您指出正确的方向。试试[Pattern](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html "Java 文档")和[Matcher](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html "Javadoc 匹配器")类。有了这个，您可以编译一个正则表达式模式并找到组，例如将第一个组乘以 10 到 e 之后的组的幂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T13:17:04.210

`find()`如果您想做比从匹配项逐字复制组到替换组更复杂的事情，那么您必须`appendReplacement/appendTail`使用`Matcher`. [javadoc 中`appendReplacement`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuffer,%20java.lang.String%29)有一个很好的例子。

在循环内部，您可以使用它`m.group()`来访问匹配的字符串，并`m.group(n)`访问第 n 个括号组，这样您就可以创建一个适合`NumberFormat`您需要的输出格式，然后执行类似的操作

```
double val = Double.parseDouble(m.group());
m.appendReplacement(nf.format(val)); 
```

或使用`String.format`

```
m.appendReplacement(String.format("%f", val)); 
```

（或者`BigDecimal`如果您不能确定您的值都可以表示为 ，则使用`double`）。

# android - 有没有办法从 GreenDao 查询对象中获取光标？

> ID：13584876
> 
> 赞同：3
> 
> 时间：2012-11-27T13:03:24.110
> 
> 标签：android, android-cursor, greendao

我正在尝试实现一个`AlphabtIndexer`并且构造函数需要一个游标到数据库中的表。

有没有办法从 GreenDao 中的查询对象中获取光标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:42:15.260

假设您有 Query 对象`query`和 dao 会话`daoSession` ，您可以运行：

```
Cursor cursor = daoSession.getDatabase().rawQuery(query.getSql(), query.getParameters()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-13T10:44:40.217

GreenDao 2.1，queryBuilder 提供了一个 buildCursor() 函数

```
session.getMyObjectDao().queryBuilder()
        .where(MyObjectDao.Properties.Locale.eq("en")))
        .buildCursor().forCurrentThread().query() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-19T08:23:12.537

使用 GreenDao 2.1，您可以创建一个 QueryBuilder 对象，然后只需在该对象上调用 buildCursor().query() 即可返回一个游标。

```
DBUserDao userDao = daoSession.getDBUserDao();
QueryBuilder<DBUser> queryBuilder = userDao.queryBuilder().where(DBUserDao.Properties.Phone_number.eq("XYZ"));
Cursor cursor = queryBuilder.buildCursor().query(); 
```

# python - 使用 NcbiblastxCommandline 自定义爆炸数据库

> ID：13584878
> 
> 赞同：3
> 
> 时间：2012-11-27T13:03:26.990
> 
> 标签：python, biopython, blast

这是我第一次在 biopython 中使用 blast，我遇到了问题。

我从一个包含 20 个序列的 fasta 文件创建了一个自定义爆炸数据库，使用：

> os.system('makeblastdb -in newtest.fasta -dbtype nucl -out newtest.db')

这确实在我当前工作的当前目录中生成了几个文件（newtest.db.nhr、newtest.db.nin、newtest.db.nsq）：（`/home/User/Documents/python/fasta-files`）

现在我正在尝试使用以下命令在 biopython 中查询这个数据库：

```
blastx_cline = NcbiblastxCommandline(query="queryfile.fas", db="newtest.db", evalue=0.00000001, outfmt=5, out="opuntia.xml") 
```

但我收到了这个错误：

```
> Bio.Application.ApplicationError: Command 'blastx -out opuntia.xml
> -outfmt 5 -query queryfile.fas -db newtest.db -evalue 1e-08' returned non-zero exit status 2, 'BLAST Database error: No alias or
> index file found for protein database [newtest.db] in search path
> [/home/User/Documents/python/fasta-files:/usr/share/ncbi/blastdb:]' 
```

所以我尝试复制从`/home/User/Documents/python/fasta-files`to生成的文件，`/usr/share/ncbi/blastdb`但它说我没有权限。

*****编辑*****

 *****当我使用时：`os.system("blastn -db newtest.db -query "fastafile.fas" + " -out test.txt")` 它可以正常工作，生成输出文件。但不是相反*********

所以我被困在这里，我不知道如何解决这个问题。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T23:24:12.740

注意错误信息中的短语**protein database ，而 newtest.db 是一个 nucl 数据库。**

在搜索路径中找到**蛋白质数据库[newtest.db] 的索引文件**

所以blastx 期待一个蛋白质数据库。这不是很明显吗？:-)

如果您不是故意这样做的，您应该通过添加“cmd='blastn'”来指定要使用的 BLAST 程序。所以，这更好：

```
blastx_cline = NcbiblastxCommandline(cmd='blastn', query="queryfile.fas", db="newtest.db", evalue=0.00000001, outfmt=5, out="opuntia.xml") 
```**

# json - 保存文件 Json 从 Windows Phone 后面的代码创建

> ID：13584882
> 
> 赞同：1
> 
> 时间：2012-11-27T13:03:38.980
> 
> 标签：json, windows-phone-7, isolatedstorage, json.net

我使用名为 Newtonsoft.Json 的 dll 在后面的代码中编写了一个 Json

这是我的代码：

```
StringBuilder stringBuilder = new StringBuilder();
        StringWriter stringWriter = new StringWriter(stringBuilder);
        JsonWriter jsonWriter = new JsonTextWriter(stringWriter);

        jsonWriter.Formatting = Formatting.Indented;
        jsonWriter.WriteStartObject();
        jsonWriter.WritePropertyName("name");
        jsonWriter.WriteRawValue(textboxNomeCompleto.Text);
        jsonWriter.WritePropertyName("user");
        jsonWriter.WriteValue(textboxEmail.Text);
        jsonWriter.WritePropertyName("password");
        jsonWriter.WriteValue(textboxSenha.Text);
        jsonWriter.WriteEndObject(); 
```

我怎样才能使用IsolatedStoreFile 保存在SandBox 中创建的文件？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:55:01.557

为了您的帮助，我写了一个简短的代码。我希望这有帮助

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using Newtonsoft.Json;
using System.Text;
using System.IO;
using System.IO.IsolatedStorage;

using System.Threading;
using System.Xml;
using System.Xml.Serialization;
namespace jsontest
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            StringBuilder stringBuilder = new StringBuilder();
            StringWriter stringWriter = new StringWriter(stringBuilder);
            JsonWriter jsonWriter = new JsonTextWriter(stringWriter);

            jsonWriter.Formatting = Formatting.Indented;
            jsonWriter.WriteStartObject();
            jsonWriter.WritePropertyName("name");
            jsonWriter.WriteRawValue("Test");
            jsonWriter.WritePropertyName("user");
            jsonWriter.WriteValue("T123");
            jsonWriter.WritePropertyName("password");
            jsonWriter.WriteValue("StackOverFlow123");
            jsonWriter.WriteEndObject();
            stringWriter.Close();

            saveOnFile(stringWriter.ToString());
            readFromFile();
        }

        public void saveOnFile(string data)
        {
            IsolatedStorageFile myFile = IsolatedStorageFile.GetUserStoreForApplication();
             StreamWriter sw = new StreamWriter(new IsolatedStorageFileStream("Test.txt", FileMode.Create, myFile));
        sw.WriteLine(data); //Wrting to the file
        sw.Close();

        }
        public void readFromFile()
        {
            IsolatedStorageFile myFile = IsolatedStorageFile.GetUserStoreForApplication();
            try
            {

                StreamReader reader = new StreamReader(new IsolatedStorageFileStream("Test.txt", FileMode.Open, myFile));
                string rawData = reader.ReadToEnd();
                reader.Close();
                textBlock1.Text = rawData;//use raw data as string of JSON data
            }
            catch { }
        }
    }
} 
```

这是一个工作代码，rawData 需要先被解析然后用作 JSON 对象

# javascript - javascript中的ICMP

> ID：13584885
> 
> 赞同：0
> 
> 时间：2012-11-27T13:03:46.823
> 
> 标签：javascript, html, browser, udp, icmp

可以在javascript中使用icmp吗？是否有另一种准确的方法来确定 ping？如果在 javascript 中不可能的话，还有什么替代方案，我不相信 java 或 flash 是好的替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:20:11.757

这是一个操作系统/本机套接字级别的功能，超出了大多数 Javascript 引擎的范围。您需要编写类似浏览器插件的东西（每个客户端都需要并且可能有一个本地组件）。

Java 小程序可能是可能的，但我对此知之甚少，无法评论，它有自己的沙盒规则。

# jquery - jquery 在 $(document).on 上触发多次相同的时间

> ID：13584889
> 
> 赞同：1
> 
> 时间：2012-11-27T13:04:03.393
> 
> 标签：jquery

Jquery - 这个事件：

```
 $(document).on("click", ".removeLink", function () {
        var id = $(this).attr("data-link-id");
        $.post(
            "/Customization/DeleteCustomLink/" + id,
            function (resultData) {
                $("#frontEndPortalContainer").html(resultData);
            });
        return false;
    }); 
```

在这个 html 上（简化 - 它实际上是一个带有这个删除链接的表输入字段列表）

```
<table>
<tr>
  ... <a href="javascript:;" class="removeLink" data-link-id="0">Remove</a>
</tr>
<tr>
  ... <a href="javascript:;" class="removeLink" data-link-id="1">Remove</a>
</tr> 
```

单击一个链接时，我会发生 2 个事件。它是同一链接上的 2 个事件。我只想要一个事件。通过 4 个链接，我收到了 4 次事件调用等

我需要 $(document).on() 或类似的东西，因为它必须“重新绑定”到新的 ajax 检索到的整个表 html 由于这个删除（或我的添加表行按钮）

我怎样才能将事件限制为一个？

答案见下面的评论 - 实际上整个 javascript 在 MVC 视图中被重复

# objective-c - 另一个 UIScrollView 中的 ScrollView - 委托

> ID：13584893
> 
> 赞同：0
> 
> 时间：2012-11-27T13:04:12.777
> 
> 标签：objective-c, ios, uiscrollview

我有一个`UIScrollView`里面另一个`UIScrollView`。例如： ![在此处输入图像描述](../Images/4dfc2a9f9c147a84dd5cf7f4b230fcd3.png)

这个灰色区域是我的设备。红色滚动视图在背景中黄色滚动视图是红色滚动视图中的子视图。

我想要做的是向上和向下滚动，并且仍然可以选择向右/向左滚动。但是当我将委托设置为黄色滚动视图时，我无法向右/向左移动。如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:42:53.583

这很简单，您只需**检查**您使用哪个滚动视图来调用委托方法。

在您的委托方法中：（您的委托方法接收一个参数 UIScrollView *）scrollView

```
if(scrollView == scrollView1) {

//do stuff for scrollView1 like setContentSize

} else {

//do other stuff

} 
```

这就是您使用一种委托方法控制 2 个滚动视图的方式。

关于你想做什么：

只制作 1 个滚动视图并设置它的属性更有用，这样您就可以左右滚动和上下滚动，两个滚动视图是无用的，事实上，它们重叠是一个问题，因为下面的滚动视图无法访问。

# inheritance - 重复的继承属性

> ID：13584894
> 
> 赞同：2
> 
> 时间：2012-11-27T13:04:16.790
> 
> 标签：inheritance, interface, attributes, mef

```
[InheritedExport]
[LoginMetadata]
public interface ILogon
{
    bool Authenticate ( string UserName, string Password );
}

public interface ILoginMetadata
{
    string Name
    {
        get;
    }

    string Description
    {
        get;
    }
}

[MetadataAttribute]
[AttributeUsage( AttributeTargets.Class | AttributeTargets.Interface, AllowMultiple = false, Inherited = true )]
public class LoginMetadataAttribute : ExportAttribute, ILoginMetadata
{
    public LoginMetadataAttribute ( )
        : base( typeof( ILogon ) )
    {
    }

    #region ILoginMetadata Members

    public string Name
    {
        get;
        set;
    }

    public string Description
    {
        get;
        set;
    }

    #endregion
}

public class LogonPlugins
{
    [ImportMany( typeof( ILogon ) )]
    public List<Lazy<ILogon, ILoginMetadata>> Plugins
    {
        get;
        set;
    }
}

public static class Logon
{
    private static LogonPlugins _Plugins = null;
    private static AggregateCatalog _Catalog = null;
    private static CompositionContainer _Container = null;

    public static LogonPlugins Plugins
    {
        get
        {
            if ( _Plugins == null )
            {
                _Plugins = new LogonPlugins( );

                _Catalog = new AggregateCatalog( );
                _Catalog.Catalogs.Add( new AssemblyCatalog( Assembly.GetExecutingAssembly( ) ) );

                _Container = new CompositionContainer( _Catalog );
                _Container.ComposeParts( _Plugins );
            }

            return ( _Plugins );
        }
    }
} 
```

此代码旨在使用 Lazy 模型加载 ILogon 类型的扩展对象。因为 Lazy 的方式，对象必须继承 ILogon 并且**必须**还声明了 LoginMetadata 属性。我真的不想强制使用 LoginMetadata，所以我声明它是可继承的，并将其添加到没有参数的接口中。我的问题是，当我**在**插件类上声明属性时，最终列表将包含两个相同插件类型的条目。一个用于在接口上声明的空属性 - 并继承；一个用于插件类上声明的属性。

有办法克服吗？

谢谢彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T16:24:32.080

其中一个导出来自应用于 ILogin 接口的 InheritedExport，第二个来自 LoginMetadataAttribute 属性，该属性也是一个 ExportAttribute。您需要删除 InheritedExport 或从 LoginMetadataAttribute 中删除 ExportAttribute 基类型。

一般来说，如果您使用元数据，它应该特定于给定的导出，因此我希望您应该从界面中删除 InheritedExport 并期望导出 ILogin 的人应用 LoginMetadataAttribute 并提供必要的元数据。如果这是您要走的路线，我建议将其重命名为 LoginExportAttribute。

# visual-studio - 错误 MSB6006 "icl.exe" exited with code 4\. while build a project

> ID：13584899
> 
> 赞同：0
> 
> 时间：2012-11-27T13:04:43.057
> 
> 标签：visual-studio, visual-studio-2012

我目前正在向 MSVS2012 移植一个巨大的（至少对我而言！;-)）解决方案。大约一半的项目使用英特尔 C++ 编译器 13 (icl.exe)。

有时，当我恢复构建（由于错误而停止之后）时，我收到以下错误：

**错误 MSB6006：“icl.exe”以代码 4 退出。**

这是什么意思？通常，我需要清理有故障的项目，然后重建它以使此错误消失。

知道如何解决吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-21T16:51:34.137

在我的情况下，我去了VS中的“输出”选项卡，真正的错误指示在那里（在我的情况下：“灾难性错误：无法打开源文件“path\file.c”）。 **“icl.exe”退出代码4**指向一些编译器配置文件的链接，但真正的问题并不存在

# python - PyOpenGL 的“上下文特定数据”是什么？

> ID：13584900
> 
> 赞同：1
> 
> 时间：2012-11-27T13:04:44.623
> 
> 标签：python, opengl, ctypes, pyopengl

PyOpenGL 文档说：

> 由于 OpenGL 和 ctypes 处理数组数据（例如指针）的方式，通常需要确保保留 Python 数据结构（即不被垃圾收集）。这是通过将数据存储在由特定于上下文的键索引的数据值数组中来完成的。提供此功能的函数由 OpenGL.contextdata 模块提供。

究竟是什么时候？

我想到的一种情况是从 OpenGL 1 返回的客户端顶点数组，但多年来它们已被缓冲区对象取代。填充缓冲区对象后不再需要客户端数组（=`glBufferData`返回后，我想）。

有没有我错过的场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:32:49.060

> 有没有我错过的场景？

通过 glMapBuffer 获得的缓冲区映射

# c# - 更改 Windows 窗体中的内容

> ID：13584902
> 
> 赞同：11
> 
> 时间：2012-11-27T13:04:47.983
> 
> 标签：c#

我正在使用 Windows 窗体在 C# 中制作应用程序，我想完全换掉 Windows 窗体中的所有内容并将其替换为其他内容。有没有方便的方法来做到这一点？

示例：我有一个菜单，当我单击“开始”时，我希望菜单消失并开始游戏。我没有使用 XNA 或类似的东西，这是整个项目的重点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T13:08:32.740

`Panel`为您要切换的每个独特内容集使用一个。隐藏所有面板，除了最初的面板。创建一个变量`activePanel`。设置`activePanel`为当前显示的面板（即初始面板）。

当您需要切换时，请执行以下操作：

```
activePanel.Visible = false;
activePanel = <Panel you want to open now>; //I mean the Control, not an ID or something.
activePanel.Visible = true; 
```

另一种方法是动态删除和添加控件到表单，但是这样你将不得不编写更多的代码，但是，你的应用程序内存占用应该更少。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-30T14:43:17.067

这对我有用：添加所有控件，例如：

```
form.Controls.AddRange(Pages.ToArray()); 
```

然后激活需要的一个

```
form.Controls[i].BringToFront(); 
```

# iphone - BlocksKit 1.8.1 / Xcode 4.5 / iOS 的编译器警告

> ID：13584906
> 
> 赞同：0
> 
> 时间：2012-11-27T13:04:58.423
> 
> 标签：iphone, objective-c, ios, xcode, objective-c-blocks

在 Xcode 4.5 中将 BlocksKit 1.8.1 与 iOS 项目一起使用时，我收到警告。

警告是：

![在此处输入图像描述](../Images/ece38306f60a63cb2fd8cd25614eed83.png)

详情如下：

> GenerateDSYMFile /Users/john/Library/Developer/Xcode/DerivedData/AppName-epvlodroaifdsbacdbbxnlhuptrh/Build/Products/Debug-iphoneos/AppName.app.dSYM /Users/john/Library/Developer/Xcode/DerivedData/AppName-epvlodroaifdsbacdbbxnlhuptrh/Build/ Products/Debug-iphoneos/AppName.app/AppName cd /Users/john/Documents/AppName_iphone setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode .app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/dsymutil /用户/john/库/开发人员/Xcode/DerivedData/AppName-epvlodroaifdsbacdbbxnlhuptrh/Build/Products/Debug-iphoneos/AppName。app/AppName -o /Users/john/Library/Developer/Xcode/DerivedData/AppName-epvlodroaifdsbacdbbxnlhuptrh/Build/Products/Debug-iphoneos/AppName.app.dSYM

使用设备目标编译时。

以模拟器为目标进行编译时，警告有点不同：

![在此处输入图像描述](../Images/6d7922e48a24848c90597e77d2f84d7f.png)

我已按照 Git 页面上的说明进行操作：

*   下载 BlocksKit 版本。
*   将 libBlocksKit.a 和 Headers 移动到项目的文件夹中，最好是像“Vendor”这样的子文件夹。
*   在“Build Phases”中，将 libBlocksKit.a 拖入目标的“Link Binary With Libraries”构建阶段。
*   在目标或项目的构建设置中，将“Other Linker Flags”更改为 -ObjC -all_load。确保您的应用程序与 CoreGraphics、Foundation、MessageUI 和 UIKit 链接。
*   将 BlocksKit 头文件的相对路径更改（或添加）到“头文件搜索路径”，例如 $(SRCROOT)/Vendor/Headers。
*   在项目的前缀标头中插入 #import `。

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:01:38.377

我有同样的警告，找不到原因，但找到了临时解决方案。

**也许相关：**

BlocksKit 1.8.1 中的链接似乎存在更多问题：我的应用程序编译并在开发版本中正常工作（尽管显示了这些警告）。但是，当我为 Ad Hoc 部署构建存档时，libBlocksKit 显然*没有*链接，因为当使用以下崩溃日志调用 BlocksKit 方法之一时应用程序崩溃：

```
Last Exception Backtrace:
0   CoreFoundation                  0x3b2783e2 __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x3a2d195e objc_exception_throw + 26
2   CoreFoundation                  0x3b27bdbc +[NSObject(NSObject) doesNotRecognizeSelector:] + 180
3   CoreFoundation                  0x3b27a648 ___forwarding___ + 388
4   CoreFoundation                  0x3b1d2204 _CF_forwarding_prep_0 + 20 
```

对于所有构建配置，我的其他链接器标志设置为`-ObjC`. （我放弃了`-all_load`，因为这会导致我正在使用的 AdMob 库出现“重复符号”。）

**临时解决方案：**

我切换回 BlocksKit 的旧分支： [https](https://github.com/zwaldowski/BlocksKit) ://github.com/zwaldowski/BlocksKit 并使用链接器标志`-ObjC`。该分支已被弃用，但对我有用，而所有构建配置都没有上述任何警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:01:41.707

似乎这是一个将在 BlocksKit 的下一个版本中修复的错误：

[https://github.com/pandamonia/BlocksKit/issues/108](https://github.com/pandamonia/BlocksKit/issues/108)

# c# - WinForms中如何处理不可见控件的绘制？

> ID：13584912
> 
> 赞同：2
> 
> 时间：2012-11-27T13:05:12.717
> 
> 标签：c#, .net, windows, embedded, compact-framework

我正在尝试覆盖**.NET Compact Framework中 windows 窗体的****OnPaint**事件。

 **到目前为止，我能够绘制带有渐变、圆角矩形等的控件，而这些控件通常无法使用常规控件。

但是，当我想让控件不可见时，我遇到了问题。现在，我所做的是重新绘制除那些不可见的控件之外的所有控件。由于需要一些时间，因此会导致一些闪烁。

有谁知道windows如何处理绘制“不可见”控件？或者你能建议任何关于如何实现这一目标的算法或方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:58:36.520

你应该做几件事。

1.  不要直接对交给你的 Graphics 对象进行绘制`OnPaint`。绘制到后台缓冲区，并在最后将其绘制到 Graphics。
2.  覆盖`OnPaintBackground`并让它什么都不做。
3.  尽可能只使变化的区域无效，而不是整个屏幕，以保持剪切区域较小

如果您将单个控件更改为“不可见”，那么您将更改它并使它的边界矩形无效。在`OnPaint`您进行绘图的过程中，省略了基于 Visibility 属性的“不可见”控件。只有剪辑区域会得到更新。您甚至可以通过检查传入的剪辑区域`OnPaint`并只费心绘制该区域的绘制逻辑来更进一步。不过，这有点复杂，而且通常不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:46:40.723

作为替代方案，是否可以在适当的控件上调用[Invalidate()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invalidate%28v=vs.80%29.aspx)方法的任何重载以减少需要重新绘制的控件总数？**

# java - 在 java jsoup 中的 html 页面中搜索和查找变量值

> ID：13584914
> 
> 赞同：2
> 
> 时间：2012-11-27T13:05:17.207
> 
> 标签：java, javascript, parsing, extract, jsoup

在 html 页面中有一个类似下面的 javascript，我想提取 var 编号的值。

```
<script type="text/javascript">
 var number= 4443;
</script> 
```

我正在使用 jsoup 使用此命令解析 html 页面。

```
org.jsoup.nodes.Document doc3 = Jsoup.connect("http://htmlpage.com").get(); 
```

我该怎么做 ？谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:36:01.970

Jsoup 是一个 HTML 解析器，而不是一个 JS 解析器。使用 Jsoup 可以获得的最好的东西是获取 HTML`<script>`元素。

```
Elements scripts = doc3.select("script"); 
```

然后，它的内容必须被提取为文本并由[`Element#text()`](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#text%28%29)能够解析 JS 代码的不同库（例如 Mozilla Rhino）进一步解析。当然，您也可以使用 , 等方法执行简单的解析，[`String`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)甚至可以使用一些好的正则表达式。`indexOf()``substring()`

# java - Thread Pool Implementation in java or java open sources for Quartz handling?

> ID：13584920
> 
> 赞同：0
> 
> 时间：2012-11-27T13:05:37.707
> 
> 标签：java, quartz-scheduler

The thread pool can be configured in Quartz via the quartz property - org.quartz.threadPool.class

please help and let me know what are the best implementation available in Java (or) list of Java open sources which have the ThreadPool implementations where we can

a) Kill a Quartz Job (i.e) the current executing Thread and create a new Thread since the thread count should be not reduced in the Quartz scheduler due to this job removal b) Option to just kill the Quartz Job (i.e) current executing thread and manually create a new thread for the same since we have killed the same to terminate the process.

Thanks in advance, Kathir

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:33:15.660

If you can use Spring in your project, then it comes with a [TaskScheduler](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/scheduling.html#scheduling-task-scheduler-implementations) (thread pool) for Quartz. Or you can use the inbuilt thread pool. Look at this post [sample on quartz scheduler thread pool](https://stackoverflow.com/questions/1518558/sample-on-quartz-scheduler-thread-pool)

You can start from here [How to cancel a scheduled job in Quartz](https://stackoverflow.com/questions/4269754/how-to-cancel-a-scheduled-job-in-quartz)

# grails - 在 Mac OSX Mountain Lion 上使用 JDK 1.7 在 STS 中编译 grails 应用程序时无法启用 javac -source=1.6 选项？

> ID：13584921
> 
> 赞同：0
> 
> 时间：2012-11-27T13:05:39.600
> 
> 标签：grails, osx-mountain-lion, javac

您好我正在尝试使用最新版本的 STS（Spring Tool Suite）和最新的 Grails 插件创建一个基本应用程序。然后编译生成的应用程序我收到来自 javac 的错误：

```
Invalid commandline usage for javac.
javac: invalid source release: 1.6
Usage: javac <options> <source files> 
```

当我尝试从命令行使用 javac 时（我已确保我使用的是 Oracle 提供的最新 JVM 1.7.0_09），然后我发现 java 不接受高于 1.5 的 -source 或 -target 选项的值。

其他人如何解决这个问题？当我尝试通过在 BuildConfig.groovy 中设置以下内容将 grails 项目更改为 1.5

```
grails.project.target.level = 1.5
grails.project.source.level = 1.5 
```

我收到以下错误，我将其归因于为 1.7 编译的库：

```
class file has wrong version 51.0, should be 49.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:33:37.357

问题解决了。问题是我的机器上的 /Library/Java/Extensions 文件夹中安装了许多 jar，包括来自 JDK 1.5 的 tools.jar，这是在我的 jdk 1.7 javac 之前被拾取的。

我不确定哪个过去的安装对此负责，但通过从该目录中删除所有 jar，我能够在我的应用程序上执行“grails compile”。

# text - 按钮和链接上的 Kendo UI 文本绑定

> ID：13584925
> 
> 赞同：0
> 
> 时间：2012-11-27T13:06:13.560
> 
> 标签：text, mvvm, binding, kendo-ui

我实际上认为这将是一项简单的任务，但我无法让它发挥作用。这是场景：

我有一个视图模型，它有一个包含各种字符串的标签对象。

```
label: {
    'title': app.options.localize('products'),
    'leftTabButton': app.options.localize('menu'),
    'rightTabButton': app.options.localize('scan'),
    'leftDetailButton': app.options.localize('back'),
    'rightDetailButton': app.options.localize('save')
} 
```

现在我有一个对应的视图绑定到该模型并尝试将这些标签绑定到一些按钮。

```
<div id="navbar" data-role="navbar">
    <a data-align="left" data-bind="Text: label.leftDetailButton"></a>
    <span data-role="view-title" data-bind="text: label.title"></span>
    <a data-role="button" data-align="right" data-bind="Text: label.rightDetailButton"></a>
</div> 
```

但是绑定到`<a>`或绑定到`data-role="button"`（这是一个小部件）都不会成功。我总是得到：“未捕获的错误：a 元素不支持文本绑定”我还尝试进行自定义绑定......也不起作用。

```
kendo.data.binders.widget.buttonText = kendo.data.Binder.extend({
    init: function(widget, bindings, options) {
    widget.element[0].innerText = bindings.buttonText.path;
}
}); 
```

虽然`bindings.buttonText.path`是视图模型中字符串的路径，但我不知道如何告诉它使用哪个模型或在哪里提供对模型的引用。

有什么建议怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:51:02.890

您是否意识到您已经输入`Text`了而不是`text`for both `<a>`？尝试改变它！另外，我认为您还错过了在后退按钮中指定角色`data-role="backbutton"`

# cmd - 如何在不删除联结内容的情况下安全删除文件夹？

> ID：13584939
> 
> 赞同：2
> 
> 时间：2012-11-27T13:07:14.657
> 
> 标签：cmd, ntfs, junction

我已经为此搜索了一段时间的 shell (cmd) 解决方案，但没有找到任何解决方案。所以我想创建一个 Junction 但首先我需要删除该文件夹（如果它存在）（[来自 sysinterals 的 Junction](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)不会让我覆盖它）。

我的第一个解决方案是运行`rmdir /S/Q folder\to\be\overwritten`. 但是，如果我重新运行脚本并且`folder\to\be\overwritten`已经是一个指向 eg 的链接，那么`common\folder`的内容`common\folder`就会被删除。不好 ;-）。

那么如何在 Windows 命令行中安全地删除文件夹但仅删除该文件夹？另请注意，我需要它才能在 Windows XP 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:07:14.657

我找到的答案很好......有效。

```
rem ad-l means directories but not links (symlinks or hardlinks)
for /f %%d in ('dir /ad-l /b .\folder\to\be') do @if [%%d]==[overwritten] rmdir /S /Q .\folder\to\be\overwritten
rem adl means directories which are links (symlinks or hardlinks)
for /f %%d in ('dir /adl /b .\folder\to\be') do @if [%%d]==[overwritten] rmdir .\folder\to\be\overwritten 
```

请注意，在此示例中包含要删除的`folder\to\be`命名文件夹（或链接） 。`overwritten`

# php - XML：将几个子节点的值保存到 php 数组中

> ID：13584943
> 
> 赞同：0
> 
> 时间：2012-11-27T13:07:21.887
> 
> 标签：php, xml, xpath, xml-parsing

如何检索`<ASIN>..</ASIN>`此 xml 的所有值并将它们保存到 php 变量/数组？

我试过`$result=$xml->xpath('//ASIN');`了，但这给了我`array(0) { }`一个浏览器输出。谢谢您的帮助！我非常感激！

这是我的 xml 文件：

```
 <?xml version="1.0" ?>
      <ItemLookupResponse xmlns="http://webservices.amazon.com/AWSECommerceService/2011-08-01">
      <OperationRequest>
        <RequestId>...</RequestId>
      <Arguments>
       <Argument Name="region" Value="de"></Argument>
       <Argument Name="ItemId" Value="B007ZXLRVQ"></Argument>
       <Argument Name="Operation" Value="ItemLookup"></Argument>
       <Argument Name="Service" Value="AWSECommerceService"></Argument>
       <Argument Name="AWSAccessKeyId" Value="...."></Argument>
       <Argument Name="Timestamp" Value="2012-11-27T12:52:41Z"></Argument>
       <Argument Name="Signature" Value="...."></Argument>
       <Argument Name="ResponseGroup" Value="Similarities"></Argument>
       <Argument Name="AssociateTag" Value="..."></Argument>
       <Argument Name="Version" Value="2009-10-01"></Argument>
     </Arguments>
    <RequestProcessingTime>0.0216670000000000</RequestProcessingTime>
    </OperationRequest>
    <Items>
       <Request>
         <IsValid>True</IsValid>
         <ItemLookupRequest>
           <IdType>ASIN</IdType>
           <ItemId>B007ZXLRVQ</ItemId>
           <ResponseGroup>Similarities</ResponseGroup>
           <VariationPage>All</VariationPage>
         </ItemLookupRequest>
      </Request>
     <Item>
      <ASIN>B007ZXLRVQ</ASIN>
      <SimilarProducts><SimilarProduct><ASIN>B007Y6DS84</ASIN>
       <Title>Brita 040 147 Starterpaket Marella Cool, weiß</Title>
      </SimilarProduct>
      <SimilarProduct>
       <ASIN>B0018K7EMI</ASIN>
       <Title>Trinkflasche 1,0 Liter für gefiltertes Wasser</Title>
      </SimilarProduct>
      <SimilarProduct>
       <ASIN>B000QG7AJM</ASIN>
       <Title>Brita Filterkartuschen Maxtra Pack 4 (lim. Edition)</Title>
      </SimilarProduct>
      <SimilarProduct>
       <ASIN>B001T9N51M</ASIN>
       <Title>Brita Filterkartuschen Maxtra Pack 12 (lim. Edition)</Title>
      </SimilarProduct>
      <SimilarProduct>
       <ASIN>B001ET6CNU</ASIN>
       <Title>wuta kamille 82158 Herbacin Handcreme + Glyzerin Dose 75 ml, Fünferpack</Title>
     </SimilarProduct>
    </SimilarProducts>
   </Item>
  </Items>
 </ItemLookupResponse> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:01:08.843

由于命名空间，您无法直接执行 XPath 查询。[在此处](https://stackoverflow.com/questions/3719616/xpath-finds-nothing-but)阅读完整的详细信息解决方案

我仍然在这里提供一些可以帮助你的代码。

```
$asins = simplexml_load_file('asin.xml');
if(count($asins)):
    //alternate way other than registring NameSpace
    //$asin = $asins->xpath("//*[local-name() = 'ASIN']");

    $asins->registerXPathNamespace('prefix', 'http://webservices.amazon.com/AWSECommerceService/2011-08-01');
    $asin = $asins->xpath("//prefix:ASIN");
    echo "<pre>";print_r($asin);
endif; 
```

现在您将看到数组关闭`ASIN`元素，如下所示

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [0] => B007ZXLRVQ
        )

    [1] => SimpleXMLElement Object
        (
            [0] => B007Y6DS84
        )

    [2] => SimpleXMLElement Object
        (
            [0] => B0018K7EMI
        )

    [3] => SimpleXMLElement Object
        (
            [0] => B000QG7AJM
        )

    [4] => SimpleXMLElement Object
        (
            [0] => B001T9N51M
        )

    [5] => SimpleXMLElement Object
        (
            [0] => B001ET6CNU
        )

) 
```

# perl - Perl 的菱形运算符（空文件句柄）当前从哪个文件读取？

> ID：13584944
> 
> 赞同：18
> 
> 时间：2012-11-27T13:07:24.220
> 
> 标签：perl, diamond-operator

我正在使用 Perl 的*菱形* `<>`运算符来读取命令行上指定的文件。

我希望能够报告类似 的消息`"Trouble on line $. of file $FILENAME"`，但我如何才能知道钻石当前使用的是哪个文件？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-27T13:12:14.500

见[perlvar](http://perldoc.perl.org/perlvar.html)：

```
 $ARGV

Contains the name of the current file when reading from <> . 
```

但也考虑`$.`在 perlvar 中。如果你这样做，`perl -n`它可能不会变成你想要的方式，因为**计数器**在`perl -n`用例中没有被重置。

> ```
> $. 
> ```
> 
> 最后访问的文件句柄的当前行号。
> 
> Perl 中的每个文件句柄都会计算从中读取的行数。（根据 的值`$/`，Perl 对什么构成行的想法可能与您的不匹配。）当从文件句柄（通过`readline()`或`<>`）读取一行时，或`tell()`在`seek()`其上调用 or 时，`$.`将成为该行计数器的别名文件句柄。
> 
> 您可以通过分配来调整计数器`$.`，但这实际上不会移动搜索指针。本地化`$.`不会本地化文件句柄的行数。相反，它将本地化​​ perl 的关于`$.`当前别名为哪个文件句柄的概念。
> 
> `$.`在文件句柄关闭时重置，但在打开的文件句柄在没有干预的情况下重新打开时不会重置`close()`。有关更多详细信息，请参阅 perlop 中的 I/O 运算符。因为`<>`从不显式关闭，所以 ARGV 文件中的行号会增加（但请参阅 eof 中的示例）。
> 
> 您还可以使用`HANDLE->input_line_number(EXPR)`来访问给定文件句柄的行计数器，而不必担心您上次访问的是哪个句柄。
> 
> 助记符：很多程序都使用“.” 表示当前行号。

这是一个例子：

```
$ perl -nE 'say "$., $ARGV";' foo.pl bar.pl
1, foo.pl
2, foo.pl
3, foo.pl
4, foo.pl
5, foo.pl
6, foo.pl
7, foo.pl
8, foo.pl
9, foo.pl
10, foo.pl
11, foo.pl
12, foo.pl
13, bar.pl
14, bar.pl
15, bar.pl 
```

如果您希望它重置，您需要`eof`在读取循环结束时检查（*感谢@Borodin*）。另请参阅[perldoc`eof`](http://perldoc.perl.org/functions/eof.html)：

```
$ perl -nE 'say "$., $ARGV"; close ARGV if eof' foo.pl bar.pl 
```

# iphone - 带有图像 iphone 的可滚动消息框

> ID：13584945
> 
> 赞同：-1
> 
> 时间：2012-11-27T13:07:33.617
> 
> 标签：iphone

我正在著名领导者的 iphone 中制作应用程序，因此我需要一个带有该领导者图像和他/她的简要描述的消息框。如果描述很大，也应该滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:08:50.277

仅`UITextView`用于您的此要求并设置此控件`UIImageView`的后面。`UITextView`

例如看下面的代码..

```
UITextView *textView = [[UITextView alloc]initWithFrame:CGRectMake(10, 100, 300, 300)];
textView.delegate = self;
textView.text = @"Your Description";
textView.editable = NO;
[textView setBackgroundColor:[UIColor clearColor]];

UIImageView *imgeBack = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"Your Image Name"]];
imgeBack.frame = textView.frame;
[self.view addSubview:imgeBack];
[self.view addSubview:textView]; 
```

# php - 删除所有内容，除了 PHP 中的字母数字和欧洲字符

> ID：13584949
> 
> 赞同：4
> 
> 时间：2012-11-27T13:08:05.980
> 
> 标签：php, regex, alphanumeric, latin1

我正在验证我的评论脚本，我需要删除所有非字母数字字符，除了在西欧使用的字符。

我的计划是用正则表达式输出所有非字母数字字符：

```
preg_replace("/[^A-Za-z0-9 ]/", '', $string); 
```

但到目前为止，所有欧洲字符和一个£符号都被去掉了，所以“Café Rouge”变成了“Caf Rouge”。

如何将一组欧元字符添加到上述正则表达式中。

数组是：

```
£, €, 
á, à, â, ä, æ, ã, å,
è, é, ê, ë,
î, ï, í, ì,
ô, ö, ò, ó, ø, õ,
û, ü, ù, ú,
ÿ,
ñ,
ß 
```

我使用 UTF-8

**解决方案：**

```
$comment = preg_replace('/[^\p{Latin}\d\s\p{P}]/u', '', $comment); 
```

和

```
$name = preg_replace('/[^\p{Latin}]/u', '', $name); 
```

$name aslo 删除标点符号和空格

感谢您的快速回复

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T13:37:21.887

```
preg_replace('/[^\p{Latin}\d ]/u', '', $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:24:23.610

```
echo preg_replace('/[^A-Z0-9 £€áàâä...]/ui', '', $string); 
```

重要的部分是`/u`旗帜。确保您的源代码`$string`是 UTF-8 编码的。

我仍然认为这是错误的方法，因为它严重限制了您的用户可以输入的内容，并且*会*惹恼一些人，但是无论您的船是什么...顺便说一句，您的列表不包含标点符号。

# c# - 如何确保流读取器仅从文本文件中读取

> ID：13584950
> 
> 赞同：0
> 
> 时间：2012-11-27T13:08:08.553
> 
> 标签：c#, exception, text, stream

我正在`filestream`从文本文件中读取，我想确保用户指定的目的地确实是文本文件而不是图片或其他东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:18:56.937

您无法确保该文件是文本文件。正如 Kiyura 所指出的，除非您对文件有严格的假设，例如使用的语言和编码，否则不可能 100% 确定文件是文本还是二进制文件。

了解这两个方面，您可以对内容进行一些统计分析，以确保文件中包含的单词总体上是否有意义。

# android - 在 Android 媒体播放器中循环播放

> ID：13584951
> 
> 赞同：2
> 
> 时间：2012-11-27T13:08:15.517
> 
> 标签：android, audio, android-mediaplayer

我正在尝试在媒体播放器中播放音频文件，一旦文件完全播放，然后从该特定文件的某个位置循环并继续重复循环。

我见过一种从特定点播放的方法 seekTo() 但我对如何首先完全播放文件然后使用 seekTo 函数感到困惑。

任何帮助，将不胜感激。须藤代码将帮助一个很好的。

**添加代码：**

**这是我尝试过的代码，但在再次播放声音之前*它会留下大约一秒钟的间隙。***

```
public void playBackgroundMusic() {
    AssetFileDescriptor descriptor = null;
    try {
        descriptor = context.getAssets().openFd("music/" + FILE_NAME);
        try {
            this.mediaPlayer.setDataSource(descriptor.getFileDescriptor(),
                    descriptor.getStartOffset(), descriptor.getLength());
        } catch (IllegalStateException e) {
            this.mediaPlayer.reset();
            this.mediaPlayer.setDataSource(descriptor.getFileDescriptor(),
                    descriptor.getStartOffset(), descriptor.getLength());
        }
        if (listener != null) {
            this.mediaPlayer.setOnCompletionListener(listener);
        }
        this.mediaPlayer.setOnErrorListener(new OnErrorListener() {

            @Override
            public boolean onError(MediaPlayer arg0, int arg1, int arg2) {
                // TODO Auto-generated method stub
                return false;
            }
        });
        this.mediaPlayer.setLooping(false);
        this.mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        this.mediaPlayer.prepare();
        this.mediaPlayer.start();

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (descriptor != null) {
                descriptor.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

private OnCompletionListener listener = new OnCompletionListener() {

    @Override
    public void onCompletion(MediaPlayer mp) {
        // TODO Auto-generated method stub
        mp.seekTo(DEFAULT_LOOPING_TIME);
        mp.start();
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:18:40.297

*   从头开始播放媒体。
*   使用 onPlaybackFinished 事件或类似的事件再次启动媒体，这次使用 seekTo() 方法

# salesforce - 尝试在 Salesforce 中创建公式字段来计算平均天数

> ID：13584952
> 
> 赞同：1
> 
> 时间：2012-11-27T13:08:23.010
> 
> 标签：salesforce

尝试在 Salesforce 中创建一个公式字段来计算从关闭日期到（其他两个日期中的任何一个）的平均天数。例如

结束日期
电子邮件开始日期 生效日期

我要写的公式是结束日期-（电子邮件开始日期或生效日期中最早的日期）。

帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:34:09.533

有一个`MAX()`可用的函数，但它只接受数字，而不接受日期。所以看看这些，然后选择你觉得更舒服的一个；）

（公式类型必须是数字类型，叫它“寿命（天）”什么的）

```
IF(Email_Start_Date__c > Live_Date__c, Email_Start_Date__c, Live_Date__c) - Close_Date__c 
```

或者

```
MAX(Email_Start_Date__c - Close_Date__c, Live_Date__c - Close_Date__c) 
```

* * *

编辑以合并来自评论的 Priyanka 的问题：如果您有多个日期要依靠（如果一个为空，请尝试另一个），最好使用`BLANKVALUE`函数来避免长链 IF 语句：

```
BLANKVALUE(Over_ride_Date__c, 
    BLANKVALUE(Email_Start_Date__c, 
        BLANKVALUE(Live_Date__c, 
            BLANKVALUE(Estimated_Email_Start_Date__c, Estimated_Go_Live_Date__c)
        )
    )
) 
```

您还可以将其与 IF 的技巧结合使用以选择最低的一个，例如：

```
BLANKVALUE(Over_ride_Date__c, 
    IF(NOT(ISBLANK(Email_Start_Date__c)) && NOT(ISBLANK(Go_Live_Date__c)), 
        IF(Email_Start_Date__c < Go_Live_Date__c, Email_Start_Date__c , Go_Live_Date__c ),
        BLANKVALUE(Estimated_Email_Start_Date__c, Estimated_Go_Live_Date__c)
    )
) 
```

这将首先检查覆盖日期。如果它为空，但**电子邮件**开始和上线日期均已设置 - 将选择 2 个中较小的一个。如果其中任何一个为空白 - 将继续检查估计日期，如果所有内容为空，则最终将放弃如果为空。

但我不得不说，如果你真的需要写这么复杂的东西——你做错了什么。强迫您的用户提前开始填写某些日期，这表明数据质量非常差......

# asp.net-mvc-3 - 如何在另一个属性的验证错误消息中包含一个属性的值？

> ID：13584956
> 
> 赞同：3
> 
> 时间：2012-11-27T13:08:28.803
> 
> 标签：asp.net-mvc-3, validation, data-annotations

我有一份问卷，由多页 12 条语句组成，用户必须为每一个语句指定语句与它们匹配的程度。看起来像这样：

![问卷](../Images/e5a0b03ac74dbe8a9f25b613a8a75956.png)

我的视图模型如下所示：

```
public class PageViewModel
{
    public List<ItemViewModel> Items { get; set; }
}

public class ItemViewModel
{
    public Guid Id { get; set; }
    public int Number { get; set; }
    public string Text { get; set; }

    [Required]
    public int Response { get; set; }
} 
```

而我的观点：

```
@model PageViewModel

@using(Html.BeginForm()){
<table>
    <tr>
        <td></td>
        <td></td>
        <th>1</th>
        <th>2</th>
        <th>3</th>
        <th>4</th>
        <th>5</th>
    </tr>

    @Html.EditorFor(model => model.Items)

    @Html.ValidationSummary(false)

</table>

<input type="submit"/>
} 
```

并且为每个项目重复编辑器模板：

```
@model ItemViewModel

<tr>
    <td>@Model.Number:</td>
    <td>@Model.Text</td>

    @for(int i = 1; i <= 5; i++){
        <td>@Html.RadioButtonFor(model => model.Response, i)</td>
    }
<tr> 
```

我希望验证摘要能列出需要回复的语句，例如。“声明 6 需要答复”。目前它只是重复“需要响应字段”

我应该想象一个自定义验证器是必需的，但目前从头开始编写我自己的验证器有点超出我的能力，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T11:21:22.317

您需要编写自己的[自定义验证摘要模板](https://stackoverflow.com/questions/5857851/custom-validationsummary-template-asp-net-mvc-3)。

```
namespace System.Web.Mvc
{
    public static class ViewExtensions
    {
        public static string MyValidationSummary(this HtmlHelper html, string validationMessage)
        {
            if (!html.ViewData.ModelState.IsValid)
            {
                return "customized message from here";
            }

            return "";
        }
    }
} 
```

另请参阅 -[如何在 ASP.NET MVC 中扩展 ValidationSummary HTML Helper？](https://stackoverflow.com/questions/918969/how-to-extend-the-validationsummary-html-helper-in-asp-net-mvc)

# visual-c++ - 错误：标识符“列表”未定义（Visual C++ 的新功能）

> ID：13584957
> 
> 赞同：1
> 
> 时间：2012-11-27T13:08:31.683
> 
> 标签：visual-c++, visual-c++-2010

我只想在 Visual C++ 上初始化一个列表，但出现以下错误：

*   错误：标识符“列表”未定义
*   错误 C2065：“列表”：未声明的标识符

为什么会这样？

我的包括：

```
#include "stdlib.h"
#include "malloc.h"
#include "stdio.h"
#include <set>
#include <vector>
#include <string>
#include <list>
#include "stdafx.h"
#include <iostream>
#include <io.h>
#include <fcntl.h>
#include <fstream>
#include <WebServices.h>
#include "./WCF_managed_app.xsd.h"
#include "./WCF_managed_app_Client.wsdl.h"
#include "./WCF_managed_app_Client.xsd.h"
#include "./schemas.microsoft.com.2003.10.Serialization.xsd.h" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T13:27:45.930

您可能已经忘记了`using namespace std;`cpp 文件中的 ，以便可以访问`list`位于`std`命名空间中的定义。

我个人不喜欢使用`using namespace std;`

我在我的 cpp 文件中使用`std::list`而不是`list`

```
std::list<Element> myList;
myList.push_back(anElement); 
```

# c# - 有没有办法从根过滤数据？

> ID：13584959
> 
> 赞同：-1
> 
> 时间：2012-11-27T13:08:33.073
> 
> 标签：c#, regex, ms-access-2000

我可以从 Web 应用程序本身过滤数据，但没有办法从根目录处理这个问题吗？

例如，过滤电话号码：`+(12)345 678 91 /011`

通过 Web 应用程序使用正则表达式，我目前正在这样做：

```
bool validPhoneNumber = Common.IsValidTelephoneNumber(this.PhoneNumber);

//Insert Regular Expression
Regex regex = new Regex(@"^((\((\+|00){3}\)|(\()?\d{3}()?|)\d{10})$")

string number = this.PhoneNumber;

// Replace unwanted Characters
number.Replace(" ", "");
number.Replace("-", "");
number.Replace("(", "");
number.Replace(")", "");
number.Replace(":", "");

Match match  = regex.Match(number);

PhoneNumber (Contact)
char[] phonenumber = this.phoneNumber.ToCharArray();
StringBuilder builder = new StringBuilder(10);
for (int i = 0; i < phonenumber.Length; i++)
{
    if (phonenumber[i] >= '0' && phonenumber[i] <= '9')
    {
        builder.Append(phonenumber[i]);
    }
}
phoneNumber = builder.ToString().Substring(0, Math.Min(10, builder.Length));

//OUTPUT: +1234567891 
```

我想做的是收集数据然后更新它；

```
using (test.Database.OleDB db = new OleDB(OleDBConn)) { 
    db.Sql = 
        "UPDATE [Contact] SET ([MobileNumber]) VALUES " + "(@mobileNumber)" +
        "WHERE [Contact_ID] = @contactId";

    db.SetSqlParam("mobileNumber", MobileNumber);

    db.Handle.ExecuteNonQuery(); // Update the Record 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:52:15.223

我得出的结论是，没有办法更早地编辑数据：

```
bool validPhoneNumber = Common.IsValidTelephoneNumber(this.PhoneNumber);

//Insert Regular Expression
Regex regex = new Regex(@"^((\((\+|00){3}\)|(\()?\d{3}()?|)\d{10})$")

string number = this.PhoneNumber;

// Replace unwanted Characters
number.Replace(" ", "");
number.Replace("-", "");
number.Replace("(", "");
number.Replace(")", "");
number.Replace(":", "");

Match match  = regex.Match(number);

PhoneNumber (Contact)
char[] phonenumber = this.phoneNumber.ToCharArray();
StringBuilder builder = new StringBuilder(10);
for (int i = 0; i < phonenumber.Length; i++)
{
    if (phonenumber[i] >= '0' && phonenumber[i] <= '9')
    {
        builder.Append(phonenumber[i]);
    }
}
phoneNumber = builder.ToString().Substring(0, Math.Min(10, builder.Length)); 
```

所以我决定手动更改数据。

# ruby - 使用 Ruby 的网络隧道

> ID：13584963
> 
> 赞同：0
> 
> 时间：2012-11-27T13:08:47.877
> 
> 标签：ruby

如何`ssh username@myserver.com -L 3000:171.17.258.16:1500`在使用 Ruby 的 Windows 机器上进行操作？

在我的 Windows 机器上，我正在使用 rye gem 进行简单的连接，例如：

```
@rbox = Rye::Box.new(@hostname, :user => @username, :password => @password) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T00:37:27.673

也许尝试检查一下 Net-SSH gem？

[http://rubygems.org/gems/net-ssh/](http://rubygems.org/gems/net-ssh/)

[http://net-ssh.github.com/net-ssh/](http://net-ssh.github.com/net-ssh/)

似乎该`forward`方法可以执行您想做的事情：

```
Net::SSH.start("host", "user", :password => "password") do |ssh|
  ssh.forward.local(1234, "www.google.com", 80)
  ssh.loop { true }
end 
```

# javascript - TextArea - 禁用为放置区域

> ID：13584968
> 
> 赞同：0
> 
> 时间：2012-11-27T13:08:57.840
> 
> 标签：javascript, html, css, spotify

我正在寻找一种方法来禁用将文本放入文本区域的可能性。我需要它，因为在 Spotify 中，用户可以拖动曲目、播放列表等。文本表示只是一个链接。

目前我们正在使用这段代码：

```
 $(target).find('textarea').each(function(index, elem) {
        elem.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    return false;
            }, false);

        elem.addEventListener('drop', function(e) {
                a(_('messages', 'msgNoDragArea'));

                e.preventDefault();
                e.stopPropagation();
                return false;
            }, false);          
    }); 
```

当用户尝试放置元素时，有没有办法删除光标的放置图标？通过 HTML 属性、CSS 还是 Javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:18:02.817

尝试在元素的 CSS 上设置以下属性：

```
cursor : default; 
```

它会将您的光标设置为普通指针。

# jquery - 加载ajax内容后单击不起作用

> ID：13584971
> 
> 赞同：8
> 
> 时间：2012-11-27T13:09:18.157
> 
> 标签：jquery, ajax

我怎样才能让 live('click',function()" 在 ajax 调用后工作并返回带有 html(data) 的内容？经过 4 小时的搜索后，我想我最好问一下，因为我无处可去。

这部分工作：

```
$.ajax({
    type: "POST",
    url: "loadAlbum.php",
    data: dataString,
    success: function(data){
        $(".loader").html(data, {}, function(){ 
        //content is loaded now
        //need to get the function below working in this part of the content
        }); 
    },
    error : function(data) { } 
    });
}); 
```

我需要这个在上面的ajax中工作：

```
$('.divName as inside loader').live('click',function(){  

alert('gotClicked');

    var vidItem = $(this).attr('data');
    vidItem = vidItem.split('-'); var bookID = vidItem[0]; var state = vidItem[1];
    var dataString = 'bookID='+ bookID + '&state=' + state;

alert(dataString); 

}); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-27T13:13:57.400

`.live()`已弃用。改为使用`.on()`。

```
$("body").on("click", "divClass", function(event){
    alert('gotClicked');
}); 
```

此外，为了确保您正确调用 div，它不应该是 div 名称，而应该是 div 类，以这种方式调用它。

此外，使用`live()`and`on()`需要在文档加载时存在的父级别应用。如果您使用的这个 divName 在页面加载时不存在，则无法绑定。但是，如果你绑定到 body 元素，那么当点击发生时它总是会寻找 div。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-04T08:54:01.443

```
 $(document).delegate(".classname","click",function(){
        alert("ok");
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T14:02:09.737

很简单，因为数据是在加载 js 后附加的，所以您需要使用...

```
$(selector).live('click', function(e){
    alert('this is a click');
}); 
```

请注意，如果您经常这样做会影响性能，在某些情况下手动取消绑定和重新绑定可能会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T13:23:00.943

由于您正在附加通过 ajax 调用返回给您的 HTML 数据，因此您需要在将新 HTML 添加到 DOM 后绑定该函数。如果调用代码：

```
$('.divName as inside loader').live('click',function(){  ... 
```

在 DOM 更新之前，jQuery 将无法正确绑定事件。我不知道您何时解析/设置代码 .live 代码块。在将返回的 HTML 附加到 DOM 后，您必须应用 .live 代码，无论是在成功回调中还是在成功回调之后立即调用的函数中（如果有的话）。

希望这可以帮助。

# sql - 从单表计数查询

> ID：13584972
> 
> 赞同：0
> 
> 时间：2012-11-27T13:09:23.973
> 
> 标签：sql, oracle, count, group-by

我有表测试有值

```
Status  |      DATE
  X     |   25-11-2012
  X     |   25-11-2012
  Y     |   25-11-2012
  Z     |   25-11-2012
  X     |   26-11-2012
  Y     |   26-11-2012
  Y     |   26-11-2012
  Z     |   26-11-2012 
```

我想显示

```
 DATE      | X | Y | Z |
25-11-2012   | 2 | 1 | 1 |
26-11-2012   | 1 | 2 | 1 | 
```

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:15:03.100

```
select 
  date_col, 
  count(case when status='X' then 1 end) as X,
  count(case when status='Y' then 1 end) as Y,
  count(case when status='Z' then 1 end) as Z
from your_table
group by date_col; 
```

# java - java DB和jar文件

> ID：13584974
> 
> 赞同：-1
> 
> 时间：2012-11-27T13:09:25.657
> 
> 标签：java, user-interface, javadb

我们有一个独立的项目。我们正在使用 Java DB，我们正在 netbeans 上编写代码。我们可以使用 IDE 连接到数据库，我们可以做我们想做的事情，但是当我们将其制作为 jar 文件时，它无法连接到数据库。我们如何解决这个问题谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:14:47.527

当您将应用程序作为 JAR 运行时，数据库驱动程序必须位于类路径中。当您在 Eclipse 中启动应用程序时，会在构建路径中找到驱动程序。这就是您的应用程序在这里工作的原因。

另一种解决方案是将驱动程序的 JAR 嵌入到您的 JAR 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:24:59.973

首先检查你的 jar 在哪里，很可能它在项目之外，这就是发生错误的原因。将它们放入您的项目并在类路径文件中正确设置路径，例如：

```
<classpathentry exported="true" kind="lib" path="WEB-INF/lib/castor-1.1.2-commons.jar"/> 
```

现在，如果您看到您的路径如下所示：

```
<classpathentry exported="true" kind="lib" path="D:/apache-tomcat-6.0.14/apache-tomcat-6.0.14/lib/servlet-api.jar"/> 
```

这是错误的。

如果仍然出现错误，请提供您的类路径文件和错误日志。

# php - linux：解压缩存档时将文件名中的空格转换为下划线

> ID：13584975
> 
> 赞同：0
> 
> 时间：2012-11-27T13:09:29.140
> 
> 标签：php, linux, unzip

我在 PHP 中为 linux 命令使用 exec“包装器”：

```
exec("unzip -oj tmp.zip -d tmp && rm tmp.zip"); 
```

请告诉我如何将文件名中的空格转换为下划线？肿瘤坏死因子，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:13:06.603

如果您不介意使用外部实用程序（就像您目前正在做的那样），您可以使用`rename`例如。

```
unzip -oj tmp.zip -d tmp && rename 's/\s/_/g' tmp/* && rm tmp.zip 
```

# string - 用有符号数分割字符串算术表达式的算法

> ID：13584979
> 
> 赞同：1
> 
> 时间：2012-11-27T13:09:52.243
> 
> 标签：string, algorithm

美好的一天，我只是想知道是否有办法分割一串算术表达式，例如：

```
-2+-3+(4+5) 
```

进入**预期结果**

```
-2 + -3 + ( 4 + 5 ) 
```

这个给定的字符串是使用空格分割的，我打算以这种方式格式化这个表达式，因为我必须用空格分隔它做其他事情。这不是我现在关心的，我的目标是当我遇到像上面的例子这样的有符号数字时`-2 + -3 + ( 4 + 5 )`，它会看起来像这样`- 2 + - 3 + ( 4 + 5 )`。

已经知道是什么原因造成的，因为我将所有标志替换为

```
<whitespace> <operator> <whitespace> 
```

但是如何排除带符号的数字以免像预期的结果那样碎片化？

**注意：** 计划独立于语言，因为到目前为止，我不知道该使用哪一种，算法更重要，但为了更好地理解，Java 可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:33:52.030

通常这个任务是用基于所谓的[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)的词法解析器来解决的。

```
string s = "-2+-3+(4+5)";
List<string> tokens = new List<string>();
const int ST_NONE = 0, ST_MINUS = 1, ST_DIGITS = 2, ST_PUNCT = 3;
int j = 0; // token start
int st = ST_NONE; // state
for(int i = 0; i < s.Length(); ++i) {
    switch(s[i]) {
        case '0' .. '9':
            if (st != ST_NONE && st != ST_DIGITS) { // any prev token
                tokens.Add(s.SubStr(j, i - j)); // yield prev token
                j = i; // start of new token
            }
            st = ST_DIGITS; // note transition from ST_MINUS
            break;
        case '-': // special case since number can start with it
            if (st == ST_DIGITS) { // "4-" is definitely means "4 - .."
                tokens.Add(s.SubStr(j, i - j)); // yield prev number
                j = i, st = ST_PUNCT;
            }
            else if (st != ST_NONE) {
                tokens.Add(s.SubStr(j, i - j)); // yield prev token
                j = i, st = ST_MINUS;
            }
            else {
                j = i, st = ST_MINUS;
            }
            break;
        case '+': case '*': case '/': case '(': case ')':
            if (st != ST_NONE) { // any prev token
                tokens.Add(s.SubStr(j, i - j)); // yield prev token
                j = i;
            }
            st = ST_PUNCT;
            break;
        default:
            throw new UnexpectedCharacter();
    }
}
if (st != ST_NONE) { // any prev token
    tokens.Add(s.SubStr(j, i - j)); // yield prev token
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:44:02.827

简单的解决方案是注意 a`-`仅当它遵循看起来像值的东西时才是二元运算符，在您的情况下是数字或 a `)`。因此，如果您遍历标记（其中标记是操作符字符或一系列数字），并且只需记住最后一个标记是否是值（数字或`)`），您始终可以决定是否在之后放置空格当前令牌。（您还可以发现一些语法错误。）

# iphone - 以编程方式在 iPhone 中使用移动运营商识别国家代码？

> ID：13584981
> 
> 赞同：5
> 
> 时间：2012-11-27T13:10:01.227
> 
> 标签：iphone, objective-c, ios, ipa

有没有办法从移动网络获取国家代码。我们可以通过代码获取设备中存在的 SIM 的国家名称吗？

请用一些工作代码帮助我。我检查了 CoreTelephony 框架，但 ddnt 获得了成功。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-27T13:24:03.157

**编辑：**使用 Xcode 6，只需添加这一行，甚至将框架链接到项目都是自动完成的：

```
@import CoreTelephony; 
```

**原文：**将 CoreTelephony.framework 添加到您的项目中。在您的班级中添加以下两行：

```
#import <CoreTelephony/CTCarrier.h>
#import <CoreTelephony/CTTelephonyNetworkInfo.h> 
```

这是代码：

```
CTTelephonyNetworkInfo *networkInfo = [[CTTelephonyNetworkInfo alloc] init];
CTCarrier *carrier = [networkInfo subscriberCellularProvider];

// Get carrier name
NSString *carrierName = [carrier carrierName];
if (carrierName != nil)
    NSLog(@"Carrier: %@", carrierName);

// Get mobile country code
NSString *mcc = [carrier mobileCountryCode];
if (mcc != nil)
    NSLog(@"Mobile Country Code (MCC): %@", mcc);

// Get mobile network code
NSString *mnc = [carrier mobileNetworkCode];

if (mnc != nil)
    NSLog(@"Mobile Network Code (MNC): %@", mnc); 
```

请注意，国家代码是数字代码，您可以在[此处找到列表](http://en.wikipedia.org/wiki/Mobile_Country_Code_%28MCC%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T15:28:26.893

它在 CoreTelephony 里面

```
CTTelephonyNetworkInfo *networkInfo = [[CTTelephonyNetworkInfo alloc] init];
CTCarrier *carrier = [networkInfo subscriberCellularProvider]; 
```

# ruby-on-rails - 如何使用 Nokogiri 在 HTML 代码中找到电子邮件地址？

> ID：13584983
> 
> 赞同：3
> 
> 时间：2012-11-27T13:10:08.810
> 
> 标签：ruby-on-rails, ruby, regex, nokogiri

如何使用 Nokogiri 在 HTML 代码中找到电子邮件地址？我想我需要使用正则表达式，但不知道如何。

示例代码

```
 <html>
    <title>Example</title>
    <body>
    This is an example text.
    example@example.com
    </body>
    </html> 
```

当mail_to有href时，有一个答案涵盖了这种情况，但这不是我的情况。电子邮件地址有时位于链接内，但并非总是如此。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T14:30:20.640

如果您只是试图从恰好是 HTML 的字符串中解析电子邮件地址，则不需要 Nokogiri。

```
html_string   = "Your HTML here..."
email_address = html_string.match(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i)[0] 
```

不过，这不是一个完美的解决方案，因为 RFC 对构成“有效”电子邮件地址的内容*非常*宽松。这意味着您遇到的大多数正则表达式（包括上述一个）不考虑边缘情况**有效**地址。例如，根据 RFC

```
$A12345@example.com 
```

是一个有效的电子邮件地址，但不会被上述正则表达式匹配。

*   推荐阅读：[http ://haacked.com/archive/2007/08/21/i-knew-how-to-validate-an-email-address-until-i.aspx](http://haacked.com/archive/2007/08/21/i-knew-how-to-validate-an-email-address-until-i.aspx)
*   正则表达式来源：[http ://www.dzone.com/snippets/ruby-method-extract-emails](http://www.dzone.com/snippets/ruby-method-extract-emails)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:45:50.800

只需在 HTML 字符串上使用正则表达式，不需要 Nokogiri（如@deefour 建议的那样）。对于正则表达式本身，我建议使用[rails autolink gem](https://github.com/tenderlove/rails_autolink/blob/master/lib/rails_autolink/helpers.rb#L81)`AUTO_EMAIL_RE`使用的那个（称为）：

```
/[\w.!#\$%+-]+@[\w-]+(?:\.[\w-]+)+/ 
```

这应该可以捕捉到更严格的正则表达式过滤器遗漏的那些边缘情况：

```
RE = /[\w.!#\$%+-]+@[\w-]+(?:\.[\w-]+)+/

RE.match('abc@example.com')
#=> #<MatchData "abc@example.com">

RE.match('$A12345@example.com')
#=> #<MatchData "$A12345@example.com"> 
```

请注意，如果您真的想匹配*所有*有效的电子邮件地址，您将需要一个[强大的大正则表达式](https://stackoverflow.com/questions/703060/valid-email-address-regular-expression#703068)。

# jquery - “background-size” CSS 属性的替代方案

> ID：13584986
> 
> 赞同：0
> 
> 时间：2012-11-27T13:10:30.807
> 
> 标签：jquery, plugins, slider, carousel, css

我已经为一个问题苦苦挣扎了好几天，但都没有成功。所以，我在这里再次请求您的帮助。

问题：在**[这个](http://www.petrebogdan.com/vital/)**网站上，我有一个由[jQuery Infinite Carousel Plugin](http://www.catchmyfame.com/catchmyfame-jquery-plugins/jquery-infinite-carousel-plugin/)提供支持的幻灯片。我已经添加`background-size: auto 100%;` 到缩略图 div 中（出于显而易见的原因），但是 IE8 不理解这个 CSS 片段，并且如下所示。

我的问题：是否有旧的浏览器兼容的替代方案`background-size`？有黑客吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:14:28.807

你在找这个吗？

[http://jsfiddle.net/VMzFB/](http://jsfiddle.net/VMzFB/)

CSS：

```
#stretch {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: -10;

    /* only ie7 needs this */
    height: 100%;
}
#stretch img {
    width: 100%;
    height: 100%;
    display: block
} 
```

HTML：

```
<div id="stretch">
    <img src="http://dummyimage.com/256x256/f0f/fff" />
</div> 
```

如果这不完全正确，请查看此处的想法：

[http://css-tricks.com/3458-perfect-full-page-background-image/](http://css-tricks.com/3458-perfect-full-page-background-image/)

# function - 如何无延迟地执行“t”时间的函数+使用外部中断+ Arduino

> ID：13584987
> 
> 赞同：0
> 
> 时间：2012-11-27T13:10:30.577
> 
> 标签：function, time, arduino, interrupt

在对 Stack Overflow 和 Google 进行了一些研究之后，我对 Arduino 的时间管理有很多疑问，所以我决定向你寻求帮助。

目标是在“void loop()”内创建一个 switch case 循环，该循环执行某个子例程一段时间（例如，三分钟）。我想到的伪代码是：

```
void setup() {
    Serial.begin(9600);
    Serial.println("Waiting for command");
}

void loop() {
    // This is where the "polling" occurs
    if(Serial.available()){
        char ch=Serial.read();
        switch(ch)
        {
            case '1':
            // do something
            break;

            case '2':
            //do something
            break;

            case '3':
            void Tempfunct();
            break;

            default:
            Serial.print(ch);
            Serial.println(" : unknown command!");
        }
    }
}

// Function to be called
void Tempfunct() {
    //Do something for  3*60*60*1000 s and return to switch case selection
} 
```

我认为这个解决方案是一个起点，因为我认为涉及中断的解决方案会是一个更好的解决方案。具体来说，我期望这样的伪代码：

```
void setup() {
    Serial.begin(9600);
    Serial.println("Waiting for command");
}

void loop() {
    // This is where the "polling" occurs
    if(Serial.available()){
        char ch=Serial.read();
        switch(ch)
        {
            case '1':
                // Do something
                break;

            case '2':
               // Do something
               break;

            case '3':
                void Tempfunct();
                break;

            default:
                Serial.print(ch);
                Serial.println(" : unknown command!");
        }
    }
}

// Function to be called
void Tempfunct() {
   //Do something until an interrupt condition is received 
   //from Serial (such a key pressed by user) and then 
   //return to switch case selection.
} 
```

我该怎么做？

对我来说，这种情况就像在一个“案例”内部有一种“测量回路”。当 Arduino 收到预设的“开始键”（开始字符）时，它开始测量。当用户按下串行监视器（或超级终端）中的另一个按钮时，它会向 Arduino 发送一个预设的“停止键”（停止字符）：Arduino 感觉就像有一个外部中断，停止测量并返回 void loop(){...} 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:57:03.130

也许我不明白你想要做什么，但我会建议一个非常简单的[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)，对于这样的事情，基本上是一个基于你的应用程序“状态”的 switch 语句。

至于在特定时间段内做某事，您可以将当前毫秒捕获到一个变量中，然后在程序运行时进行测试，如果当前毫秒 - 存储毫秒 >= 您的延迟时间。

这是一些代码：

```
#define IDLE  0; //better to use enum; oh well
#define RED   1;
#define BLUE  2;

int programState;
long delayPeriod;
long startTime;

void setup() {
  Serial.begin(9600);
  Serial.println("Waiting for command");

  programState = IDLE;
  delayPeriod = (1000 * 60) * 3; // 3 minutes
}

void loop() {

  switch(programState){
  case IDLE:
    checkSerial();
    break;

  case RED:
    // need to handle millis rollover eventually, depending on
    //what the program is doing
    if (millis() - startTime >= delayPeriod){
      programState = IDLE;
    } 
    else {
      //do your thing 

      // to make this interruptable move the 'checkSerial()' call
      // out of the switch - so that it gets called every loop
    }
    break;

  case BLUE:

    break;
  }
}

void checkSerial(){
  // this is where the "polling" occurs
  if(Serial.available()){
    char ch=Serial.read();
    switch(ch){
    case '1':
      programState = RED; //set state
      startTime = millis(); //store current milisecond
      break;

    default:

    }    
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T23:15:47.700

我猜你想要一组命令（可从串行端口获得）来执行不同部分的代码，具体取决于键。因此，如果您开始做一些工作（即执行函数“Tempfunct”），您的问题是如何中断您正在做的事情以返回到开关部分（负责用户输入）。

我想重新写下你的问题。您想知道的是如何执行代码并同时处理用户输入。典型的解决方案是使用中断。您需要指定一个中断向量（处理中断的函数，使用 AVR-Compiler 可以使用保留字 SIGNAL），当有新字符出现时应触发该中断向量。

您的问题很容易回答：Arduino 的串行库已经在串行端口中使用了中断。如果您查看[此库的实现](http://code.google.com/p/arduino/source/browse/trunk/hardware/arduino/cores/arduino/HardwareSerial.cpp?r=972)，您可以了解它是如何工作的。有一个环形缓冲区存储尚未读取的字符。每当有新字符出现时，就会触发中断，并通过中断向量将字符保存到此环形缓冲区中，以便稍后使用 Serial.read() 函数读取它。根据微控制器（您使用的是哪个 Arduino 板？），您可能会有更多中断。例如，Arduino Mega（4 个串行端口）需要四个串行中断向量：SIG_USART0_RECV、SIG_USART1_RECV、SIG_USART2_RECV 和 SIG_USART3_RECV。

您需要在您的项目（您当前的草图）中再次重写此中断向量，并在其中添加一些自定义代码。中断向量与任何其他函数一样。注意不要添加太多代码，只需要定期检查。

我不是 100% 确定，但是如果您在同一个项目中包含两个中断向量，我猜第二个（您的主代码）将覆盖第一个（库）。但我建议你先试试，以防万一。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T02:57:42.317

如果我正确理解您的要求，您希望这样当您在串行监视器中输入“开始键”时，您的 Arduino 将进入测量状态或循环。为此，只需编写一个 if 语句。使用 Serial.read() 命令从串行监视器获取输入，然后将其保存到变量中。然后使用 if 语句检查变量的内容，如果它是您想成为开始键的变量，那么它将进入 if 语句，您可以在 if 语句中有一个循环，该循环将循环并进行测量. 当您准备好结束测量时，您可以执行类似的过程。有一个 Serial.read() 函数，它保存到一个变量中，并有另一个 if 语句，这样当你决定按下“结束键”时，它会从测量循环中中断。IE：

```
 input = Serial.read();
    if(input == '1')
    {
      while(true)
      {
      measurment();
      input_2 = Serial.read();
      if(input_2 == '2')
        break;
      }
    } 
```

# c++ - c ++使用内存中的ifstream

> ID：13584989
> 
> 赞同：11
> 
> 时间：2012-11-27T13:10:38.113
> 
> 标签：c++, ifstream, memcpy

我有一些代码用于`ifstream`从文件中读取一些数据并且一切正常。

现在我希望，不修改一些代码，从内存中读取这些数据，实际上我有一个`char *`包含数据的......

如何在不有效读取文件的情况下将`char *`数据放入 a中？`ifstream`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T14:26:31.120

尽管使用`std::istringstream`（有时错误地在没有前导的情况下引用`i`；这样的类确实存在，但构建起来更昂贵，因为它还设置了一个输出流）非常流行，但我认为值得指出的是，这使得最小值——实际字符串的一个副本（我怀疑大多数实现甚至会创建两个副本）。使用普通的流缓冲区可以避免创建任何副本：

```
struct membuf: std::streambuf {
    membuf(char* base, std::ptrdiff_t n) {
        this->setg(base, base, base + n);
    }
};
membuf sbuf(base, n);
std::istream in(&sbuf); 
```

对于一小块内存，差异可能无关紧要，尽管节省的分配在那里也很明显。对于大块内存，它有很大的不同。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-27T13:13:38.163

标准库提供了一个`istream`可写的内存：[`std::stringstream`](http://www.cplusplus.com/reference/sstream/stringstream/).

您需要正确抽象您的代码，以便它接受泛型`istream`而不是`ifstream`a ，构造 a `stringstream`，用您的数据填充它并将其传递给函数。

例如：

```
const char* data = "Hello world";
std::stringstream str((std::string(data))); // all the parens are needed,
                                            // google "most vexing parse"

do_something_with_istream(str); // pass stream to your code 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-27T13:14:36.870

如果`ifstream&`可以稍微更改使用的代码以使用 an那么您可以轻松地在and`istream&`之间切换（用于从内存中读取数据）：`ifstream`[`istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)

```
void read_data(std::istream& in)
{
} 
```

来电者：

```
std::istringstream in_stream(std::string("hello"));
read_data(in_stream);

std::ifstream in_file("file.txt");
read_data(in_file); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T13:14:58.633

您可能正在搜索字符串流。[http://www.cplusplus.com/reference/sstream/stringstream/](http://www.cplusplus.com/reference/sstream/stringstream/)。我以前只用过一次，已经很久了，但基本上你可以从内存中的某个位置流式传输。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-03T10:50:53.197

在我的项目中，我使用 iostream 的 write() 和 read() 方法，因为我将二进制数据写入字符串流。抱歉，以下代码未经测试，可能存在语法错误（从办公室打字... ;-)，但类似这样的内容允许您写入内存、文件和其他地方（例如网络套接字）：

```
void foo(std::iostream *mystream)
{
    mystream.write("Hello", 5);
    uint32_t i=5302523;
    mystream.write((char*) &i, sizeof i);
}

int main()
{
    // Write to memory. stringstream's write() and read() work binary
    std::stringstream memstream;
    foo(&memstream);

    // Write to file
    std::fstream f;
    try
    {
        f.open("file.dat");
        foo(&f);
    }
    catch (...)
    {
        // ...
    }

    if (f.is_open())
        f.close();

    return EXIT_SUCCESS;
} 
```

# python - 在 Windows 上配置文件位置/在 %APPDATA% 中创建目录

> ID：13584992
> 
> 赞同：2
> 
> 时间：2012-11-27T13:10:50.950
> 
> 标签：python, windows, configuration-files

我正在编写一个带有与`ConfigParser`模块一起使用的配置文件的应用程序。这个配置文件实际上存储在`%APPDATA%/PressLogReader/PressLogReader.conf`.

但问题是`%APPDATA%/PressLogReader`（和配置文件）在应用程序第一次启动时不存在，因此应用程序崩溃。

也许我可以`%APPDATA%/PressLogReader`在安装应用程序时创建文件夹，但我认为这是一个糟糕的解决方案。

你有更好的解决方案吗？

有我的 Conf 课：

```
APP_DIRNAME = 'PressLogReader'

if 'APPDATA' in os.environ:
        APP_CONFIG_PATH = os.path.join(os.environ['APPDATA'], APP_DIRNAME)
elif 'XDG_CONFIG_HOME' in os.environ:
    APP_CONFIG_PATH = os.path.join(os.environ['XDG_CONFIG_HOME'], APP_DIRNAME)
else:
    APP_CONFIG_PATH = os.path.join(os.environ['HOME'], '.config', APP_DIRNAME)

APP_CONF_FILE = os.path.join(APP_CONFIG_PATH, 'PressLogReader.conf')

class Config :

    def __init__(self) :
        self.parser = ConfigParser.ConfigParser()

        params = {
            'logFile': 'C:\Program Files\syslog\log\messages',
            'filterByIP': False,
            'IpFilter': ''
        }

        if not os.access(APP_CONF_FILE, os.F_OK | os.W_OK) :
            self.parser.add_section('general')
            for arg in params:
                self.parser.set('general', arg, params[arg])
            self.write()

        self.parser.read(APP_CONF_FILE)
        self.getLogFile()
        self.getFilterByIp()
        self.getIpFilter()

    def write(self) :
        with open(APP_CONF_FILE, 'wb') as conf_file:
            self.parser.write(conf_file)

    def getLogFile(self) :
        try :
            self.log_file = self.parser.get('general', 'logFile')
        except ConfigParser.NoSectionError :
            self.parser.add_section('general')
            self.parser.set('general', 'logFile', params['logFile'])
        except ConfigParser.NoOptionError :
            self.parser.set('general', 'logFile', params['logFile'])
        finally :
            self.log_file = params['logFile']

    def getFilterByIp(self) :
        try :
            self.filter_by_ip = self.parser.getboolean('general', 'filterByIP')
        except ConfigParser.NoSectionError :
            self.parser.add_section('general')
            self.parser.set('general', 'filterByIP', params['filterByIP'])
        except ConfigParser.NoOptionError :
            self.parser.set('general', 'filterByIP', params['filterByIP'])
        finally :
            self.filter_by_ip = params['filterByIP']

    def getIpFilter(self) :
        try :
            self.ip_filter = self.parser.get('general', 'IpFilter')
        except ConfigParser.NoSectionError :
            self.parser.add_section('general')
            self.parser.set('general', 'IpFilter', params['IpFilter'])
        except ConfigParser.NoOptionError :
            self.parser.set('general', 'IpFilter', params['IpFilter'])
        finally :
            self.ip_filter = params['IpFilter'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:30:21.727

此代码段将检查`PressLogReader`文件是否存在于 os.environ 中与密钥关联的文件夹中`APPDATA`：

```
APP_DIRNAME = 'PressLogReader'

if not os.path.exists(os.path.join(os.environ['APPDATA'],APP_DIRNAME)):
    os.mkdir(os.path.join(os.environ['APPDATA'],APP_DIRNAME)) 
```

您可以通过重做它来扩展它，以便在创建新文件夹之前检查您的配置文件可能已放置的每个位置（如果您愿意）。解决方案的内容是相同的，因此留给读者作为练习。

顺便说一句，这是我们的配置文件 - 为什么你需要担心它在多个地方？您是否有需要将其放置在其他地方的遗留代码，或者这可能是为了跨平台？

编辑：

您还可以使用`os.path.exists(file_path)`来检查系统上是否存在文件。因此，也许不是检查，而是检查`os.path.exists(os.path.join(os.environ['APPDATA'], APP_DIRNAME))`您需要检查`os.path.exists(os.path.join(os.environ['APPDATA'], APP_DIRNAME, 'PressLogReader.conf'))`的每个目录。

# f# - 插入节点二叉树

> ID：13584993
> 
> 赞同：-2
> 
> 时间：2012-11-27T13:10:59.033
> 
> 标签：f#, tree

我有这个树节点：

```
type Tree<'T when 'T: comparison> = 
| Empty 
| Node of 'T * Tree<'T> * Tree<'T> 
```

但我找不到一个好的插入功能。

我不想做一个交互式程序，输入应该是一个插入树的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:32:55.860

如果您不需要平衡树，那么您可以使用：

```
let rec insert value = function
| Empty -> Node(value, Empty, Empty)
| Node(v, left, right) when value < v -> Node(v, insert value left, right)
| Node(v, left, right) when value > v -> Node(v, left, insert value right)
| Node(_, _, _) as n -> n 
```

您可以将值列表插入到树中：

```
let insertAll list tree = List.fold (fun t e -> insert e t) tree list 
```

# android - Android：将数据添加到表中

> ID：13584995
> 
> 赞同：1
> 
> 时间：2012-11-27T13:11:15.977
> 
> 标签：android, scrollview

我在 arraylist 中有数据，我想将它添加到 Android 表中，以便以编程方式获得这样的视图。

我目前正在向 textview 添加数据并且无法实现滚动视图。

我有温度、地点和湿度，我想有一张包含所有这些数据的表格。数据多于一个屏幕，因此它应该是可滚动的。

像那样：

![图像](../Images/65a268b5649d8538d8be751487452cdb.png)

表看：

```
City     Temperature Humidity

Sydney        5        100

NY            8        120

...          ...       ... 
```

和 100 多个插入（可滚动）。

textview 的当前代码：

```
package com.aplikacija;

import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.ScrollView;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Scanner;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.jsoup.*;

public class Temperature extends Activity implements OnTouchListener {

    public boolean isNetworkAvailable() {
        ConnectivityManager connectivityManager 
              = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
        return activeNetworkInfo != null;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if(isNetworkAvailable()){

        //////////////////////////////////////////////////
            try{

            Document doc = Jsoup.connect("http://www.arso.gov.si/vreme/napovedi%20in%20podatki/vreme_avt.html").timeout(10000).get();
            String title = doc.title();
            Elements kraji = doc.getElementsByClass("onlineimena");
            Elements temperature = doc.getElementsByClass("onlinedesno");

            int c = 0;
            int st_vrstic = 0;
            ArrayList<String> list = new ArrayList<String>();
            ArrayList<String> list2 = new ArrayList<String>();
            String vrstica[] = new String[10];
            String niz="";
            for(Element temperatura: temperature){
               //System.out.print(temperatura.text()+" ");
                niz += temperatura.text() + " ";
               if(++c == 10){
                   vrstica = niz.split(" ");
                   list.add(vrstica[0]);
                   list2.add(vrstica[1]);
                   niz ="";
                   c = 0;
               }

              }

            int stevc = 0;

            String temp_izpis[] = new String[44];
            String kraji_izpis []= new String[44];
            String vlaznost_izpis[] = new String[44];

            for(String tempp : list){
                temp_izpis[stevc] = tempp;
                stevc++;
            }
            stevc = 0;

            for(String vlaz : list2){
                vlaznost_izpis[stevc] = vlaz;
                stevc++;
            }
            stevc = 0;

            for(Element krajj : kraji){
                kraji_izpis[stevc] = krajj.text();
                stevc++;
            }   
       //////////////////////////////////////////////////       

        LinearLayout layout = new LinearLayout(this);
        setContentView(layout);

        layout.setOrientation(LinearLayout.VERTICAL); 
        TextView glava=new TextView(getApplicationContext());
        String stopinja = new Character((char)'\u00B0').toString();
        glava.setText("Postaja              Temperatura"+stopinja+"C"+"     Vlaûnost %");
        glava.setTextColor(Color.BLACK);

        layout.addView(glava);
        for(int i=0;i<temp_izpis.length;i++)
        {
            TextView tv=new TextView(getApplicationContext());
            tv.setText(kraji_izpis[i] + "   "+ temp_izpis[i]+ "     "+vlaznost_izpis[i]);
           tv.setTextColor(Color.BLACK);

           layout.addView(tv);
        }
            }catch(IOException e){

                e.printStackTrace();
            }
        }else{
            setContentView(R.layout.temperature);
            TextView tv = (TextView)findViewById(R.id.textView1);
            tv.setText("Ni dostopa do interneta!");
        }

    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        return false;
    }

}

    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollview1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textStyle="bold" />

</LinearLayout>
</ScrollView> 
```

# wpf - 如何添加垂直分隔符？

> ID：13584998
> 
> 赞同：133
> 
> 时间：2012-11-27T13:11:18.167
> 
> 标签：wpf, xaml, visual-studio-2012, separator

我想在网格中添加一个垂直分隔符，但我只能找到水平分隔符。是不是有一个Property，如果分隔符的线应该是水平的还是垂直的，您可以在其中输入？

我搜索了很多，但没有找到一个简短而简单的解决方案。

我使用 .Net Framework 4.0 和 Visual Studio Ultimate 2012。

如果我尝试将水平分隔符旋转 90 度，它将失去“停靠”到其他组件的能力。

旋转的分隔符如下所示：

```
<Separator HorizontalAlignment="Left" Height="100" Margin="264,26,0,0" VerticalAlignment="Top" Width="100" RenderTransformOrigin="0.5,0.5">
    <Separator.RenderTransform>
        <TransformGroup>
            <ScaleTransform/>
            <SkewTransform/>
            <RotateTransform Angle="90"/>
            <TranslateTransform/>
        </TransformGroup>
    </Separator.RenderTransform>
</Separator> 
```

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2014-04-24T22:25:49.833

这应该完全符合作者的要求：

```
<StackPanel Orientation="Horizontal">
    <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" />            
</StackPanel> 
```

如果您想要水平分隔符，请将`Orientation`的更改`StackPanel`为`Vertical`。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-03-20T10:56:57.433

这并不是作者所要求的，但它仍然非常简单并且完全按照预期工作。

矩形完成这项工作：

```
<StackPanel Grid.Column="2" Orientation="Horizontal">
    <Button >Next</Button>
    <Button >Prev</Button>
    <Rectangle VerticalAlignment="Stretch" Width="1" Margin="2" Stroke="Black" />
    <Button>Filter all</Button>
</StackPanel> 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-11-27T15:11:22.747

过去我使用过[这里的风格](https://stackoverflow.com/a/4012346/302677)

```
<Style x:Key="VerticalSeparatorStyle" 
       TargetType="{x:Type Separator}"
       BasedOn="{StaticResource {x:Type Separator}}">
    <Setter Property="Margin" Value="6,0,6,0"/>
    <Setter Property="LayoutTransform">
        <Setter.Value>
            <TransformGroup>
                <TransformGroup.Children>
                    <TransformCollection>
                        <RotateTransform Angle="90"/>
                    </TransformCollection>
                </TransformGroup.Children>
            </TransformGroup>
        </Setter.Value>
    </Setter>
</Style>

<Separator Style="{DynamicResource VerticalSeparatorStyle}" /> 
```

您需要设置转换，`LayoutTransform`而不是`RenderTransform`在布局过程中进行转换，而不是在渲染过程中。布局过程发生在 WPF 尝试布局控件并计算每个控件占用多少空间时，而渲染过程发生在 WPF 尝试呈现控件时布局过程之后。

[您可以在此处](http://patconroy.wordpress.com/2009/03/24/layouttransform-vs-rendertransform-in-wpf/)或[此处](http://www.scottlogic.co.uk/blog/colin/2008/12/layouttransform-vs-rendertransform-whats-the-difference/)阅读有关与之间的区别的更多`LayoutTransform`信息`RenderTransform`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-06-19T04:50:47.813

我喜欢使用“线”控件。它使您可以精确控制分隔符的开始和结束位置。虽然它不完全是分隔符，但它的功能是相同的，尤其是在 StackPanel 中。

线控制也在网格内工作。我更喜欢使用 StackPanel，因为您不必担心不同的控件重叠。

```
<StackPanel Orientation="Horizontal">
    <Button Content="Button 1" Height="20" Width="70"/>
    <Line X1="0" X2="0" Y1="0" Y2="20" Stroke="Black" StrokeThickness="0.5" Margin="5,0,10,0"/>
    <Button Content="Button 2" Height="20" Width="70"/>
</StackPanel> 
```

X1 = x 起始位置（垂直线应为 0）

X2 = x 结束位置（X1 = X2 表示垂直线）

Y1 = y 起始位置（垂直线应为 0）

Y2 = y 结束位置（Y2 = 所需的行高）

我使用“边距”在垂直线的任何一侧添加填充。在本例中，垂直线左侧有 5 个像素，右侧有 10 个像素。

由于线条控件允许您选择线条起点和终点的 x 和 y 坐标，因此您也可以将它用于水平线和中间任意角度的线。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-09-13T14:09:23.900

垂直分隔符

```
<Rectangle VerticalAlignment="Stretch" Fill="Blue" Width="1"/> 
```

水平分隔符

```
<Rectangle HorizontalAlignment="Stretch" Fill="Blue" Height="4"/> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-27T14:58:25.113

这是一种非常简单的方法，没有任何功能和所有视觉效果，

使用网格并简单地自定义它。

```
<Grid Background="DodgerBlue" Height="250" Width="1" VerticalAlignment="Center" Margin="5,0,5,0"/> 
```

只是另一种方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-08T09:54:54.063

现在每个人都应该清楚，让 WPF 分隔符看起来垂直是非常困难的。

分隔符默认是水平的，没有`Orientation`属性，放在水平方向的`StackPanel`.

事实上，让分隔符看起来垂直是非常困难的，以至于许多答案建议使用 a`Rectangle`或 a`Line`而不是 a `Separator`，这很不酷，而且承认失败。

[一个答案](https://stackoverflow.com/a/23280983/773113)建议使用`ToolBar.SeparatorStyleKey`，它已经存在并且可以完成这项工作。但是，我并不特别喜欢这个解决方案，因为我想在与工具栏无关的地方使用我的分隔符，所以在这些上下文中提到工具栏是一个红鲱鱼。

[另一个答案](https://stackoverflow.com/a/13587175/773113)建议使用`RotateTransform`90 度角，这也可以，但是您必须设置`Width`属性才能指定分隔符的高度，我不喜欢这样。

因此，我所做的是获取 ToolBar 分隔符样式的来源，并将其剥离到可以完成这项工作的最低限度。我完全不清楚为什么以下魔法咒语会达到预期的效果，但确实如此：

```
<Style x:Key="VerticalSeparatorStyle" TargetType="Separator">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Separator">
                <Border Background="{TemplateBinding Panel.Background}" />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

使用如下：

```
<Separator Width="1" Margin="10 3 10 3" Background="Black" Style="
    {StaticResource VerticalSeparatorStyle}" /> 
```

（这就是 WPF 的故事：它是通过魔法咒语进行编程的。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-06T19:58:10.170

来自[http://social.msdn.microsoft.com/Forums/vstudio/en-US/12ead5d4-1d57-4dbb-ba81-bc13084ba370/how-can-i-add-a-line-as-a-visual-separator -to-the-content-control-like-grid?forum=wpf](http://social.msdn.microsoft.com/Forums/vstudio/en-US/12ead5d4-1d57-4dbb-ba81-bc13084ba370/how-can-i-add-a-line-as-a-visual-separator-to-the-content-control-like-grid?forum=wpf)：

试试这个例子，看看它是否符合您的需求，它有三个主要方面。

1.  Line.Stretch 设置为填充。

2.  对于水平线，线的 VerticalAlignment 设置为 Bottom，对于 VerticalLines，Horizo​​ntalAlignment 设置为 Right。

3.  然后我们需要告诉行要跨越多少行或列，这是通过绑定到 RowDefinitions 或 ColumnDefinitions 计数属性来完成的。

    ```
     <Style x:Key="horizontalLineStyle" TargetType="Line" BasedOn="{StaticResource lineStyle}">  
            <Setter Property="X2" Value="1" /> 
            <Setter Property="VerticalAlignment" Value="Bottom" /> 
            <Setter Property="Grid.ColumnSpan" 
                    Value="{Binding   
                                Path=ColumnDefinitions.Count,  
                                RelativeSource={RelativeSource AncestorType=Grid}}"/> 
        </Style> 

        <Style x:Key="verticalLineStyle" TargetType="Line" BasedOn="{StaticResource lineStyle}">  
            <Setter Property="Y2" Value="1" /> 
            <Setter Property="HorizontalAlignment" Value="Right" /> 
            <Setter Property="Grid.RowSpan"   
                    Value="{Binding   
                                Path=RowDefinitions.Count,  
                                RelativeSource={RelativeSource AncestorType=Grid}}"/> 
        </Style> 
    </Grid.Resources>        

    <Grid.RowDefinitions> 
        <RowDefinition Height="20"/>  
        <RowDefinition Height="20"/>  
        <RowDefinition Height="20"/>  
        <RowDefinition Height="20"/>  
    </Grid.RowDefinitions> 

    <Grid.ColumnDefinitions> 
        <ColumnDefinition Width="20"/>  
        <ColumnDefinition Width="20"/>  
        <ColumnDefinition Width="20"/>  
        <ColumnDefinition Width="20"/>  
    </Grid.ColumnDefinitions> 

    <Line Grid.Column="0" Style="{StaticResource verticalLineStyle}"/>  
    <Line Grid.Column="1" Style="{StaticResource verticalLineStyle}"/>  
    <Line Grid.Column="2" Style="{StaticResource verticalLineStyle}"/>  
    <Line Grid.Column="3" Style="{StaticResource verticalLineStyle}"/>  

    <Line Grid.Row="0" Style="{StaticResource horizontalLineStyle}"/>  
    <Line Grid.Row="1" Style="{StaticResource horizontalLineStyle}"/>  
    <Line Grid.Row="2" Style="{StaticResource horizontalLineStyle}"/>  
    <Line Grid.Row="3" Style="{StaticResource horizontalLineStyle}"/> 
    ```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-01T08:03:54.173

```
<Style x:Key="MySeparatorStyle" TargetType="{x:Type Separator}">
                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}"/>
                <Setter Property="Margin" Value="10,0,10,0"/>
                <Setter Property="Focusable" Value="false"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Separator}">
                            <Border 
                                  BorderBrush="{TemplateBinding BorderBrush}" 
                                  BorderThickness="{TemplateBinding BorderThickness}" 
                                  Background="{TemplateBinding Background}" 
                                  Height="20" 
                                  Width="3" 
                                  SnapsToDevicePixels="true"/>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style> 
```

利用

```
<StackPanel  Orientation="Horizontal"  >
       <TextBlock>name</TextBlock>
           <Separator Style="{StaticResource MySeparatorStyle}" ></Separator>
       <Button>preview</Button>
 </StackPanel> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-03T09:09:55.290

做垂直分隔符的另一种方法。

```
<GridSplitter Width="3" ResizeBehavior="PreviousAndNext" ResizeDirection="Columns" /> 
```

它还提供调整列和行的大小。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2019-07-02T14:34:40.017

这是我的做法：

```
<TextBlock Margin="0,-2,0,0">|</TextBlock> 
```