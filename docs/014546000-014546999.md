# StackOverflow 问答 14546000-14546999

# javascript - jQuery ScrollTo 在 Chrome 中不起作用

> ID：14546002
> 
> 赞同：3
> 
> 时间：2013-01-27T09:14:23.253
> 
> 标签：javascript, jquery, html, jquery-plugins, scrollto

我正在创建一个水平滚动的网站。我正在使用[这个](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)jQuery 插件进行自动滚动。下面是代码。

**HTML**

```
<head>
<link type="text/css" rel="stylesheet" href="stylesheets/styles.css" />

<script type="text/javascript" src="js/jquery-1.8.2.js"></script>
<script type="text/javascript" src="js/jquery.scrollTo-min.js"></script>
<script type="text/javascript" src="js/script.js"></script>
</head>
<body>

<div id="container">

<div id="navigation">
    <ul>
        <li>
            <div class="menubutton" id="homeLink"><a class="menuitem" href="#"></a></div>
        </li>
        <li>
            <div class="menubutton" id="aboutLink"><a class="menuitem" href="#"></a></div>
        </li>
        <li>
            <div class="menubutton" id="musicLink"><a class="menuitem" href="#"></a></div>
        </li>
    </ul>
</div><!-- end of navigation -->

<div id="firstMark"></div>

<div id="secondMark"></div>

<div id="thirdMark"></div>

</div>

</body>
</html> 
```

**CSS**

```
@charset "utf-8";

ul li { list-style-type:none; }

/* navigation */
#navigation { position:fixed; z-index:5; bottom:80px; left:-26px; background-color:#FFF; width:70px; height:190px; border-top-right-radius:10px; border-bottom-right-radius:10px; }

.menubutton { float:left; width:20px; height:20px; border-radius: 50%; background-color:#F00; margin-bottom:15px; }

.menubutton:hover { cursor:pointer; }

#homeLink { background-color:#007FD2; }
#aboutLink { background-color:#C7007A; }
#musicLink { background-color:#FFDB1A; }
#brandsLink { background-color:#000; }
#contactLink { background-color:#F90; }

#homeLink:hover { background-color:#006DB4; }
#aboutLink:hover { background-color:#99005E; }
#musicLink:hover { background-color:#FFC61A; }
#brandsLink:hover { background-color:#333; }
#contactLink:hover { background-color:#F60; }

#container {
    position:absolute;
    width:10000px;
    height:100%;
    background-color:#FFC;  
    top:0;
    left:0;
}

#firstMark {
    position:absolute;
    width:1px;
    height:1px;
    left:3000px;    
}

#secondMark {
    position:absolute;
    width:1px;
    height:1px;
    left:6000px;    
}

#thirdMark {
    position:absolute;
    width:1px;
    height:1px;
    left:9000px;    
} 
```

**JavaScript**

```
$(document).ready(function(e) {

    $('#homeLink').click(function(e) {
        e.preventDefault();
        $.scrollTo(0,0, {duration: 2000});
    });

    $('#aboutLink').click(function(e) {
        e.preventDefault();
        $.scrollTo('#firstMark', {duration: 2000});
    });

    $('#musicLink').click(function(e) {
        e.preventDefault();
        $.scrollTo('#secondMark', {duration: 2000});
    });

}); 
```

这是演示页面的[链接。](http://kode.co.nf/scrolldemo/)这适用于 Firefox(v18)、Opera(v12)、Safari(v5.1.2) 甚至 Internet Explorer 9，但不适用于 Chrome(v24)。

谁能告诉我这里缺少什么？是我的代码有问题还是插件中的错误？

如果做不到这一点，请告诉我是否还有其他支持水平滚动的自动滚动替代方案。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T08:02:20.700

老问题，但我会写下我的经验。[我从http://flesler.blogspot.com/2007/10/jqueryscrollto.html](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)下载的插件也有同样的问题

文章中的那个插件已经过时了，你可以在这里下载最新版本：[https ://github.com/flesler](https://github.com/flesler)

你也必须改变

`$.scrollTo(0,0, {duration: 2000});`

至

`$.scrollTo("0px","0px", {duration: 2000});`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T09:17:13.947

您的主播可能正在接收`click`事件而不是 div。

快速尝试一下：

```
$('#homeLink a').click(function(e) {
    e.preventDefault();
    alert('click');
    $.scrollTo(0,0, {duration: 2000});
}); 
```

我也添加了一个`alert('click')`，这样你就可以判断它是否被检测到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T09:17:12.217

尝试使用 px 将滚动值

改变

```
 $.scrollTo(0,0, {duration: 2000}); 
```

至

```
 $.scrollTo(0px,0px, {duration: 2000}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-26T16:49:22.563

错误在于 webkit 能够为身体设置动画。相反，在 body 内部创建一个 div 并将动画应用于此...

```
<body>
    <div class="wrapper">
        <nav>
            <a class="scroll-to-id" href="#" data-target="section1">Section 1</a>
            <a class="scroll-to-id" href="#" data-target="section2">Section 2</a>
        </nav>
        <section>
            <a id="section1">&nbsp;</a>
            <p>Some content<p>
        </section>
        <section>
            <a id="section2">&nbsp;</a>
            <p>Some more content<p>
        </section>
    </div>
</body> 
```

**注意：**根据我的个人经验，ID 可以同样有效地应用于标签而不是冗余，这仍然有效......我在这个示例中只这样做了，因为一些用户注意到定位 ID 更高的问题DOM 树比这...我不能亲自重现这个问题，所以嘿，无论哪种方式都有效！

然后设置包装元素和主体的样式以正确运行

```
body { position:relative; }

.wrapper { overflow:auto; position:absolute; top:0; height:100%; width:100%; } 
```

然后是 jQuery

```
$('.scroll-to-id').on('click', function(event) {
    event.preventDefault();
    var target = "#" + $(this).data('target');
    $('.wrapper').animate({
        scrollTop: $(target).offset().top
    }, 1500);
}); 
```

# android - 角色从不停止行走

> ID：14546004
> 
> 赞同：6
> 
> 时间：2013-01-27T09:14:38.830
> 
> 标签：android, andengine

我正在创建一个使用 andendgine 的游戏，这是我的代码：

```
Player stanley = new Player();
...

scene.registerUpdateHandler(new IUpdateHandler() {
  public void onUpdate(float pSecondsElapsed) {

  stanX = stanley.getX();
  destX = x.getX();

  if(destX < stanX){ 
    if(hasMovedRight == 1){
      stanley.stop();
      hasMovedRight = 0;
    }
    else{
      stanley.moveLeft();
      hasMovedRight = 0
      hasMovedLeft = 1;
    }
  }

  if(destX > stanX){   
    if(hasMovedLeft == 1){
       stanley.stop();
       hasMovedLeft == 0;
    }   
    else{
      stanley.moveRight();
      hasMovedLeft = 0;
      hasMovedRight = 1;
    }
  }
}
} 
```

我想要的是在玩家的位置 X 等于触摸区域 X 时阻止玩家行走。问题是它永远不会停止行走。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T09:53:01.977

您的 if 语句缺少 destX == stanX 的元素。你真的应该使用 else if。请参阅下面的修改代码。

```
 if(destX + 8 < stanX){ 
    if(hasMovedRight == 1){
      stanley.stop();
      hasMovedRight = 0;
    }
    else{
      stanley.moveLeft();
      hasMovedRight = 0
      hasMovedLeft = 1;
    }
  }
  else if(destX - 8 > stanX){   
    if(hasMovedLeft == 1){
       stanley.stop();
       hasMovedLeft == 0;
    }   
    else{
      stanley.moveRight();
      hasMovedLeft = 0;
      hasMovedRight = 1;
    }
  }
  else //makes stanley stop. (calls stop method), if at touched x.
  {
      stanley.stop();
      hasMovedRight = 0;
      hasMovedLeft = 0;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T02:41:10.673

试试这个

```
setOnSceneTouchListener(new IOnSceneTouchListener() {
@Override
    public boolean onSceneTouchEvent(Scene scene, TouchEvent event) {
    int touchX = (int) (event.getX() - (sCHARStanley.getWidth() / 2)); 

    //so that your sprite will go to the touched part of the screen
} 
```

# d3.js - nvd3.js 堆叠区域图表图表转换。就像在 nvd3.org 上一样

> ID：14546005
> 
> 赞同：4
> 
> 时间：2013-01-27T09:14:43.247
> 
> 标签：d3.js, nvd3.js

所以我的问题很简单。如何获得与[nvd3.org](http://nvd3.org)上相同的平滑度`stackedAreaChart`。当您单击它时，它会缓慢而平稳地更改其状态。[在我的项目中，如果我使用来自https://github.com/novus/nvd3](https://github.com/novus/nvd3)的最新 nv.d3.js，我没有平滑度。如果我用 nvd3.org 中的 nv.d3.js 替换它，一切正常。

有什么建议么？也许可以通过 d3.js API 以某种方式实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:09:02.403

似乎最近`stackedAreaCharts`在存储库中禁用了转换，如本期所述：[https ://github.com/novus/nvd3/issues/45](https://github.com/novus/nvd3/issues/45)

此更改尚未应用于 nvd3.org 上托管的版本。这解释了为什么转换在使用托管在此处的版本时有效，而在 Github 的最新版本中无效。

# lwjgl - 64 位 Linux 上的 lwjgl + slick2d + jinput 错误

> ID：14546009
> 
> 赞同：0
> 
> 时间：2013-01-27T09:16:28.317
> 
> 标签：lwjgl, slick2d, jinput

我正在使用带有 64 位 java 7 和 Eclipse (Indigo) 的 Linux (Ubuntu 12.04)。在游戏项目中，我们使用 slick2d 和 lwjgl。我被以下错误阻止了。（答案中解释了修复）

1.  java.lang.UnsatisfiedLinkError：java.library.path 中没有 lwjgl

2.  java.lang.UnsatisfiedLinkError：java.library.path 中没有 jinput-linux64

3.  无法打开设备（/dev/input/event8）：无法打开设备/dev/input/event8

版本：

Slick2D

2012 年 10 月 1 日星期一 09:54:11 +0100 5 月 11 日星期日 20:17:03 BST 2008 build=264

LWJGL（可能已经是 2.8.5，但现在是这个）：

2.8.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:16:28.317

1.  要解决此问题，请按照“slick2d”文档中提供的说明进行操作

    # [http://www.slick2d.org/wiki/index.php/Main_Page](http://www.slick2d.org/wiki/index.php/Main_Page)

2.  在我们当前使用的版本上，这似乎是 slick2D/lwjgl 的一个真正错误。要解决此问题，您不能使用 64 位 java（至少使用 linux）。从 Oracle 网站下载 32 位 java 并将其配置为您的 IDE 运行时环境（您可能需要搜索更多帮助如何在您的特定 IDE 中执行此操作）

3.  这纯粹与linux上的权限有关。转到“/dev/input”并更改文件夹权限“sudo chmod 644 *”，以便该过程可以简单地读取其中的内容。

似乎没有关于如何一起解决这个问题的信息。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T18:40:20.270

下载[slick](http://slick.ninjacave.com/)并将所需的库（jinput-linux64、lwjgl、**.dll**和**.so**文件）复制到您的**java.library.path**

要获取**java.library.path**，您可以这样做：`System.out.println(System.getProperty("java.library.path"));`

# sql - 查询产品名称的sql问题

> ID：14546017
> 
> 赞同：0
> 
> 时间：2013-01-27T09:17:22.620
> 
> 标签：sql, join, oracle10g

我是新手`SQL`，我一直在寻找在线资源，但还没有找到任何东西可以解决我的问题。基本上我有下面三个表：

```
 ORDERTBL(ORDERID,ORDERDATE,ORDERSTATUS),
 PRODUCT(PRODUCTID,PRODUCT_NAME),
 ORDERLINKPRODUCTS(ORDERID,PRODUCTID,QUANTITY,ORDERLINKPRODUCTID) 
```

我想`product name`从产品表中获取我应该查询的特定订单的所有信息，`ORDERLINKPRODUCTS`因为它包含所有订单。

例如，请在 3 个表格中找到可用的测试数据：

表 ORDERTBL：

```
ORDERID=1,ORDERDATE= 24May, ORDERSTATUS=Process 
```

表产品：

```
 PRODUCID =1  PRODUCT_NAME = spoon    PRODUCID =2  PRODUCT_NAME = soap 
```

表：ORDERLINK产品：

```
ORDERID=1 PRODUCTID = 1 QUANTITY=3  ORDERLINKPRODUCTID=1    ORDERID=1 PRODUCTID = 2 QUANTITY=1  ORDERLINKPRODUCTID=2 
```

我正在尝试制作一个显示订单所有产品名称的选择语句。例如显示所有`orderid=1`将返回勺子、肥皂的产品名称。

有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:25:07.160

您应该使用`JOIN`关键字 in`SQL`来连接三个表，以便能够访问`PRODUCTNAME`和显示该表数据。更多关于[Join 子句](http://www.w3schools.com/sql/sql_join_inner.asp)

```
SELECT prod.PRODUCT_NAME 
            FROM ORDERTBL ord 
            INNER JOIN ORDERLINKPRODUCTS link ON ord.ORDERID = link.ORDERID
            INNER JOIN PRODUCT prod ON link.PRODUCTID = prod.PRODUCTID  
            WHERE ord.ORDERID = 1 
```

[SQLfiddle 演示](http://sqlfiddle.com/#!2/5451a/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:12:48.723

您可以使用此功能查找产品 ilsted 的订单

```
SELECT O.ORDERID, RTRIM(
            XMLAGG(XMLELEMENT(e, P.PRODUCT_NAME ||',') ORDER BY O.ORDERID).EXTRACT('//text()'), ',') as Products
FROM ORDERTBL O 
  INNER JOIN ORDERLINKPRODUCTS L
    ON O.ORDERID = L.ORDERID
  INNER JOIN PRODUCT P
    ON L.PRODUCTID = P.PRODUCTID  
GROUP BY O.ORDERID 
```

和使用它的数量列出的产品：

```
SELECT O.ORDERID, RTRIM(
            XMLAGG(XMLELEMENT(e, P.PRODUCT_NAME || '(' || L.QUANTITY || '),') ORDER BY O.ORDERID).EXTRACT('//text()'), ',') as Products
FROM ORDERTBL O 
  INNER JOIN ORDERLINKPRODUCTS L
    ON O.ORDERID = L.ORDERID
  INNER JOIN PRODUCT P
    ON L.PRODUCTID = P.PRODUCTID  
GROUP BY O.ORDERID 
```

您可以根据需要将`WHERE clause`子句添加到已过滤的订单中。

**[SQL 小提琴演示](http://sqlfiddle.com/#!4/5451a/11)**

# c - 使用带有指向字符的指针的 scanf 函数

> ID：14546018
> 
> 赞同：14
> 
> 时间：2013-01-27T09:17:26.770
> 
> 标签：c, scanf

我编写了以下代码。

```
int main(){
   char arrays[12];
   char *pointers;
   scanf("%s",arrays);
   scanf("%s",pointers);
   printf("%s",arrays);
   printf("%s",pointers);
   return 0;
} 
```

为什么我写 `scanf("%s",pointers) 时会报错？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-27T09:35:48.467

```
char *pointers; 
```

必须初始化。在将字符串`pointers`指向某个地址之前，您无法扫描字符串。计算机需要知道从键盘读取的值存储在哪里。

```
int main(){
   char arrays[12];
   char *pointers= arrays;
   scanf("%s",pointers);
   printf("%s",pointers);
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-27T09:19:13.953

因为您正在写入内存中尚未初始化的地址。通过未初始化的指针写入内存指针会调用未定义的行为。要么分配足够的内存：

```
pointers = malloc(256);
if(!pointers)
  perror("malloc");
else
  scanf("%255s", pointers); 
```

或者将其声明为静态数组：

```
char pointers[256]; 
```

您还应该考虑使用[fgets()](http://pubs.opengroup.org/onlinepubs/007904875/functions/fgets.html)而不是 scanf()。

您可能想阅读您对 fgets() 感兴趣的内容：

[scanf() 和 fgets() 的区别](https://stackoverflow.com/questions/1252132/difference-between-scanf-and-fgets)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-27T09:23:42.350

*   `char *pointers;`创建一个指针变量。
*   `pointers`是 所`address`指向的`pointers`，默认情况下是不确定的。
*   `*pointers`是 指向的地址中的数据，在`pointers`分配地址之前您无法执行此操作。

就这样做吧。

```
char arrays[12];
char *pointers;
pointers = arrays;
scanf("%s",pointers); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-27T09:19:14.897

`pointers`是一个未初始化的指针。你无法写入它。你应该分配足够的内存来存储一个字符串，就像你对`arrays`. 通过指针，可以使用动态分配（参见`malloc`）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-27T09:20:05.720

`pointers`在没有初始化的情况下使用，例如`int x; printf("%d\n", x);`. 在使用它之前，你需要让你的指针指向某个东西。你在看哪本书？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-27T09:29:43.740

您能否详细说明错误，我现在不在编译器周围。

但是要使 scanf 和 printf 工作，您必须在程序的顶部有这个：

```
#include <stdio.h>
#include <stdlib.h> 
```

两者都是 C 的标准库。 IO 包含 scanf，我很确定 printf 是相同的。但是，除非您知道哪些函数需要哪些库，否则为每个程序都包含两个标准库并没有什么坏处。尝试使用自定义头文件，这样您就不需要为每个文件添加大量#includes。

不要忘记`malloc`内存分配的语句。

但我不确定你试图用你的代码做什么，请详细说明？

# c# - 如何获取 SQL JobStep 连接字符串

> ID：14546019
> 
> 赞同：1
> 
> 时间：2013-01-27T09:17:39.190
> 
> 标签：c#, sql, sql-server, ssis

在获得服务器作业并获得每个作业步骤后，我想获取与每个步骤相关的连接字符串，因为您可以在像这样的作业中打开 SQL 管理工作室时找到它：

![在此处输入图像描述](../Images/d46fde04b8c0713465aad1029a663e01.png)

是否有合适的方法通过 C# 代码获取每个包的连接字符串？

```
ServerConnection conn = new ServerConnection("localhost");
//new SqlConnection("data source=localhost;initial catalog=CPEInventory_20101122;integrated security=True;"));
Server server = new Server(conn);
JobCollection jobs = server.JobServer.Jobs;
var stepInformationsDetailsList = new List<StepInformationsDetails>();

foreach (Job job in jobs)
{
    foreach (JobStep jobstep in job.JobSteps)
    {
        stepInformationsDetailsList.Add(new StepInformationsDetails() {
           ServerName = job.Parent.MsxServerName,
           ReportName = job.Name,
           StepName = jobstep.Name,
           Command = jobstep.Command,
           Schedual = jobstep.DatabaseName,
           StepID = jobstep.ID
        });
    }
}
dataGridView1.DataSource = stepInformationsDetailsList; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:00:47.120

这些数据都将在您的 Command 变量中。当您在作业步骤选项卡上覆盖/添加任何内容时，最终结果是传递给 dtexec 的命令行具有这些值。UI 只是从`msdb.dbo.sysjobsteps`表中的命令列中切出参数以将它们链接到各种选项卡。

在您的本地主机上，此查询应该返回完整的命令行。

```
SELECT
    JS.command
FROM
    dbo.sysjobs AS SJ
    INNER JOIN dbo.sysjobsteps AS JS
    ON JS.job_id = SJ.job_id
WHERE
    sj.name = 'Concessions made by Simba Auto-Report'; 
```

由于您*没有*覆盖连接管理器“Simba Replica...”的值，因此它**不会**显示在命令的输出中。如果是这样，您将有一个类似于`/SQL "\"\MyFolder\MyPackage\"" /SERVER "\"localhost\sql2008r2\"" /CONNECTION SYSDB;"\"Data Source=SQLDEV01\INT;Initial Catalog=SYSDB;Provider=SQLNCLI10.1;Integrated Security=SSPI;Auto Translate=False;\"" /CHECKPOINTING OFF /REPORTING E` /CONNECTION 部分的字符串与您的“Simba Replica...”值相关。

我怀疑但不知道 UI 正在通过 API [Microsoft.SqlServer.Dts.Runtime检查 SSIS 包并通过](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.aspx)[Connections](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.package.connections.aspx)属性识别所有连接管理器以构建该对话框。

# java - 查找 2 个数组中是否存在公共元素

> ID：14546025
> 
> 赞同：1
> 
> 时间：2013-01-27T09:18:58.430
> 
> 标签：java

给定两个整数数组，如何有效地找出这两个数组是否有共同的元素？

有人能想出比这更好的空间复杂度吗（我也希望在程序中指出错误，谢谢！！）。

是否可以使用 XOR 来解决这个问题？

```
public boolean findcommon(int[] arr1, int[] arr2) {
  Set<int> s = new Hashset<int>();
  for(int i=0;i<arr1.length;i++) {
    if(!s.contains(arr1[i]))
      s.add(arr1[i]);
  }
  for(int i=0;i<arr2.length;i++) {
    if(s.contains(arr2[i]))
        return true;
  }
  return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:37:02.397

由于您要求更节省空间的解决方案：

当您接受 O(n log n) 的运行时间并允许更改数组时，您可以对它们进行排序，然后进行线性传递以查找公共元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T09:32:40.777

鉴于您的解决方案仅尝试查找两个数组中是否存在一个元素，以下是将为您执行此操作的代码：

```
 public boolean findCommon(int[] arr1, int[] arr2) {
      HashTable hash = new HashTable();
      for (item : arr1){
         if !(hash.containsKey(item)){
            hash.put(item, "foo");
         }
      }
      for (item : arr2){
         if (hash.containsKey(item)){
           return(true);
         }
      }
      return(false);
 } 
```

对于两个不共享单个元素的数组，这仍然具有 O(n) 的最坏情况复杂度。如果正如您最初的问题所建议的那样，您担心的是空间复杂性（例如，如果您不必存储 HashTable，您会很乐意接受性能下降），您可以按照这些思路去做：

```
 public boolean findCommon(int[] arr1, int[] arr2){
        for (item : arr1){
           for(item2 : arr2){
               if(item ==item2){
                   return(true);
               }
           }
        }
        return(false);
    } 
```

这将解决您的空间复杂性问题，但会具有 O(n^2) 的（客观上可怕的）时间复杂性。

如果您要在其周围放置更多参数，这可以简化（假设您碰巧知道至少有一个数组已排序，或者更好的是，两者都已排序）。

但是在您问的通配符示例中，我相信它确实会归结为 O(n) 与空间复杂度的哈希表，或者空间复杂度较低的 O(n^2)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T09:28:43.770

如果你只需要做一次，那么你不能做得比时间复杂度 O(n+m) 更好，其中 n 和 m 是数组的各自长度。您必须遍历两个数组中的输入，别无选择（否则您将如何查看所有输入？），因此仅输入处理就会具有这种复杂性，没有必要做一些更有效的事情。如果您需要随着数组的增长继续搜索，那就另当别论了。

因此，您建议的实施方式的问题归结为“包含”需要多长时间？由于您使用的是 Hashset，因此 contains 是常数时间 O(1)，因此您需要 O(n) 来创建哈希集和 O(m) 来验证第二个数组中的元素。放在一起，O（n + m）。够好了 ;）

如果您正在寻找改进的空间复杂度，您首先需要能够对原始数组进行更改。但我认为没有任何方法可以使用比 O(n) 更少的额外空间并且仍然在 O(n+m) 时间内执行。

注意：我不确定你在想什么异或。如果您正在考虑按位或逻辑 XOR，那么这里没有用。如果您正在考虑 Set XOR，那么它在逻辑上是否有用并不重要，因为它不在 Java Sets 的实现中，所以您仍然必须自己动手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T09:38:34.067

您可以使用 O(n*m) 阶算法来改善空间占用（这是问题对吗？）。只需获取每一对元素并比较它们......这在时间上很糟糕，但不使用任何额外的内存。否则，您可以就地对两个数组进行排序（如果您被允许修改它们）并在 O(max(n,m)) 中找到公共元素。

# ruby-on-rails-3 - Heroku rake db：迁移因 'PG::Error:' 而中止

> ID：14546037
> 
> 赞同：2
> 
> 时间：2013-01-27T09:20:54.767
> 
> 标签：ruby-on-rails-3, postgresql, heroku, rails-postgresql

我正在尝试在 Heroku 上运行我的应用程序，但无法通过“rake db:migrate”命令。我不断收到此错误：rake aborted！发生错误，此迁移和所有后续迁移均已取消：

PG::Error: ERROR: must be owner of extension plpgsql

任何的想法？

ps 这是完整的错误日志： http: [//pastebin.com/iYeiMD2y](http://pastebin.com/iYeiMD2y)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:57:29.043

它正在尝试从您的架构中填充数据库。问题是它试图向您的数据库用户不拥有的 postgresql 扩展添加评论。这 3 行会导致问题：

```
COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';
COMMENT ON EXTENSION pg_trgm IS 'text similarity measurement and index searching based on trigrams';
COMMENT ON EXTENSION unaccent IS 'text search dictionary that removes accents'; 
```

为了评论任何数据库对象，您需要成为该对象的所有者。有关更多信息，请参阅[PostgreSQL 文档](http://www.postgresql.org/docs/9.2/static/sql-comment.html)。

Heroku 也不允许您创建或修改扩展。它们提供了[可用扩展列表和可供使用的文本搜索字典](https://devcenter.heroku.com/articles/heroku-postgres-extensions-postgis-full-text-search)，并且列出了架构转储中的所有扩展。

删除或注释掉架构转储中创建扩展和在扩展上创建注释的行代码，这应该可以帮助您克服该错误。

# javascript - AngularJS 中是否有用于在标记中创建子范围的简写？

> ID：14546039
> 
> 赞同：2
> 
> 时间：2013-01-27T09:21:01.777
> 
> 标签：javascript, angularjs

使用[ng-repeat](http://docs.angularjs.org/api/ng.directive%3angRepeat)可以动态创建新的子作用域；我正在寻找一种方法来做同样的事情，但只有一个对象。

换句话说，而不是这个......

```
<div ng-controller="SomeController">
    <ul>
        <li>{{foo.bar}}</li>
        <li>{{foo.baz}}</li>
    </ul>
</div> 
```

我想做这样的事情：

```
<div ng-controller="SomeController">
    <ul ng-scope="foo">
        <li>{{bar}}</li>
        <li>{{baz}}</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:01:33.833

我从来不需要这种类型的东西，但这是一个创建子范围的指令。

```
function RestrictScopeDirective() {
    return {
        scope: {src: "=restrictScope"}
    };
} 
```

现在在这个范围内，`$scope.src`将引用您设置的内容。

```
<div ng-controller="SomeController">
    <ul restrict-scope="foo">
        <li>{{src.bar}}</li>
        <li>{{src.baz}}</li>
    </ul>
</div> 
```

这将使您限制您的范围，但是，您可能需要重新考虑您的需求，这通常是针对特定需求完成的，例如小部件或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:08:20.820

这是一种解决方法：http://plnkr.co/edit/Vd4YtCYcZKs9mMQLPK8v? [p =preview](http://plnkr.co/edit/Vd4YtCYcZKs9mMQLPK8v?p=preview)

第一个想法是将属性中指定的对象克隆到指令的范围内：

```
scope.$parent.$watch(attrs.scope, function(nv) {
           angular.extend(scope, nv);
        },true); 
```

它效率不高（每次对象更改时，Angular 都应将其属性复制到范围内），但它是实现您想要的简单方法。

这个想法的问题是你只有单向绑定（从外部范围到内部）。

如果您有双向绑定，则需要对指令范围的更改做出反应以反映父级。有点儿：

```
 link: function(scope, element, attrs) {
    var watches = [];
    var unregister = scope.$parent.$watch(attrs.scope, function(nv) {
       watches.forEach(function(w) { w(); });
       watches.length = 0;
       for (var key in nv) {
         if (key) {
            scope[key] = nv[key];
            watches.push(scope.$watch(key, function(key)  { 
              return function(knv) {
              nv[key] = knv;
            };}(key)));
         }
       }
    },true);
    scope.$on('$destroy', function(){
       unregister();
    });
 } 
```

我仍然认为最好将代码拆分为不同的部分/指令/等......

# c# - 保存图片框图片

> ID：14546040
> 
> 赞同：1
> 
> 时间：2013-01-27T09:21:14.877
> 
> 标签：c#, save, picturebox

我已经编写了这段代码，但它会引发一般错误

> “你调用的对象是空的。”

我相信这是因为我试图在`pictureBox.Image`没有实际设置图像的情况下保存。如何保存 中的图像`pictureBox`？

```
 // Left Arm Rear
            bmp = new Bitmap(4, 12);
            g3 = Graphics.FromImage(bmp);
            g3.DrawImageUnscaled(pictureBoxSkin.Image, -52, -20, bmp.Width, bmp.Height);
            g2 = pictureBoxLabel.CreateGraphics();
            bmp.RotateFlip(RotateFlipType.RotateNoneFlipX);
            g2.DrawImageUnscaled(bmp, 28, 20, bmp.Width, bmp.Height);

            // Back
            bmp = new Bitmap(8, 12);
            g3 = Graphics.FromImage(bmp);
            g3.DrawImageUnscaled(pictureBoxSkin.Image, -32, -20, bmp.Width, bmp.Height);
            g2 = pictureBoxLabel.CreateGraphics();
            bmp.RotateFlip(RotateFlipType.RotateNoneFlipX);
            g2.DrawImageUnscaled(bmp, 32, 20, bmp.Width, bmp.Height);

            pictureBoxLabel.Image.Save(openFileDialog1.InitialDirectory + Path.GetFileNameWithoutExtension(openFileDialog1.FileName) + "_label.Png"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:37:07.793

如果`NullReferanceException`在最后一行抛出，则有一些可能性；

```
pictureBoxLabel.Image.Save(openFileDialog1.InitialDirectory + Path.GetFileNameWithoutExtension(openFileDialog1.FileName) + "_label.Png"); 
```

*   `pictureBoxLabel`可能是`null`。
*   `openFileDialog1`可能是`null`。

在调试时检查这些对象。

但是如果`pictureBoxLabel`为null，也可以`NullReferanceException`在这条线上抛出；

```
g2 = pictureBoxLabel.CreateGraphics(); 
```

所以，我的钱是`openFileDialog1`为了`null`。

# listview - ListView如何连接ViewPager、FragmentPagerAdapter

> ID：14546046
> 
> 赞同：0
> 
> 时间：2013-01-27T09:23:07.400
> 
> 标签：listview, android-fragments, android-viewpager

我已经研究并尝试学习，但我不清楚并希望得到帮助。我玩过几种不同的策略，但尽管这确实是基本的东西，但无法弄清楚。

我有一个 FragmentPagerAdapter，它从字符串返回选项卡名称和内容文本。那些观点或片段——我太新了，我不清楚术语——是可滑动的，太棒了！（我遵循了许多教程和示例。）

现在我想添加一个 ListView 来滚动浏览在用户滑动时显示的大约 30 个固定内容文本。

我认为，这是迄今为止的相关代码：

```
public MyFragmentPagerAdapter(FragmentManager fm) {
    super(fm);
}
@Override
public CharSequence getPageTitle(int position) {
    Log.v(TAG, "getPageTitle");

    String tabTitle = null;
    switch(position) {
        case 0:
            tabTitle = "FAQs";
            break;
        case 1:
            tabTitle = "Content";
            break;  return tabTitle;
}

/** This method will be invoked when a page is requested to create */
@Override
public Fragment getItem(int arg0) {

    MyFragment myFragment = new MyFragment();
    Bundle data = new Bundle();
    data.putInt("current_page", arg0+1);
    myFragment.setArguments(data);
    return myFragment;
}

/** Returns the number of pages */
@Override
public int getCount() {     
    return PAGE_COUNT;
} 
```

}

和 ViewPager：

```
public class Content extends FragmentActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contentpage);

    /** Getting a reference to the ViewPager defined the layout file */        
    ViewPager pager = (ViewPager) findViewById(R.id.pager);

    /** Getting fragment manager */
    FragmentManager fm = getSupportFragmentManager();

    /** Instantiating FragmentPagerAdapter */
    MyFragmentPagerAdapter pagerAdapter = new MyFragmentPagerAdapter(fm);

    /** Setting the pagerAdapter to the pager object */
    pager.setAdapter(pagerAdapter);

} 
```

}

和

```
public class MyFragment extends Fragment{

int mCurrentPage;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /** Getting the arguments to the Bundle object */
    Bundle data = getArguments();

    /** Getting integer data of the key current_page from the bundle */
    mCurrentPage = data.getInt("current_page", 0);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {     
    View v = inflater.inflate(R.layout.myfragment_layout, container,false);
    TextView tv = (TextView ) v.findViewById(R.id.tv);
    tv.setMovementMethod(new ScrollingMovementMethod());
    switch(mCurrentPage){
    case 0:
       tv.setText("  ");
    break;
    case 1:
        tv.setText(R.string.faqs);
    break;
    case 2:

        }
        return tv;

} 
```

我想要做的是创建一个 ListView，它是内容片段中返回的项目的快捷方式。ListView 应该显示 tabTitles，当它们被点击时，用户应该被带到可滑动的内容页面。

我在 ListView.java 中放了什么？

```
public class ListView   { 
```

}

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:57:35.003

从您的问题来看，尚不清楚您是希望`ListView`与您同时出现在屏幕上`ViewPager`，还是在单独的页面上。以下是我看到的选项：

1.  `ListView`使用整个屏幕，显示项目->单击项目`ListView`->将您带到新屏幕并将 设置为`ViewPager`您选择的项目
2.  `ViewPager`占据屏幕的上半部分，`ListView`占据下半部分 -> 点击项目`ListView`-> 将 设置`ViewPager`为您选择的项目

至于您的问题，您不需要创建 custom `ListView`，就像您不需要创建 custom 一样`ViewPager`。与将数据（在您的情况下为内容页面）绑定到它们的适配器一起`ListViews`工作（例如）。`ViewPagers`

我建议您创建一个包含所有内容页面的数组（例如创建一个`ContentPage`对象），并通过它们的适配器让您的`ListView`和`ViewPager`绑定到该数组。`ContentPage`这将需要修改您`MyFragmentPagerAdapter`的其他内容。

但是，由于您对这些概念比较陌生，我建议您首先使用 a 做一个示例应用程序，`ListView`并学习如何创建自己的适配器或使用内置适配器。这些示例应该有助于涵盖这些内容：

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# java - 在 Android 设备上使用新密码存储后，“流不代表 PKCS12 密钥库”

> ID：14546056
> 
> 赞同：8
> 
> 时间：2013-01-27T09:25:47.140
> 
> 标签：java, android, security, ssl, keystore

我编写了一个使用[KeyStore](http://docs.oracle.com/javase/1.5.0/docs/api/java/security/KeyStore.html)来验证 SSL 连接的 Android 应用程序。但是当我用正确的密钥加载 p12 文件并用新的密钥存储它时，下次我尝试用新密钥加载它时，我得到了这个异常：

> java.io.IOException：流不代表 java.security.KeyStore.load(KeyStore.java
> :
> 589)

出了什么问题？

非常感谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T09:33:18.347

问题是（我很遗憾承认）`KeyStore`错误地存储了一个不同的。确保我在相同的工作上`KeyStore`解决了这个问题，现在它工作得很好。

# css - 在菜单的“a”标签中使用“float:left”

> ID：14546062
> 
> 赞同：1
> 
> 时间：2013-01-27T09:26:43.790
> 
> 标签：css, css-float

包括标有“这里！！！”的地方的“浮动：左” 使“a”元素的填充独立于祖先“ul”元素的填充。“a”元素之间的空间也消失了，如图A（包括“float：left”之前）和图片B（之后）所示。

![在此处输入图像描述](../Images/1a52c17586587d567f4d37a05663b7b0.png)

![在此处输入图像描述](../Images/1b7e7960fad085c7de9b76bf47f15b23.png)

有人可以解释为什么这会发生在我身上吗？

```
#top-menu {
    width: 470px;
    height: 200px;
    position: absolute;
    right: 0;
    border: solid;
}

#top-menu ul {
    width: 400px;
    float: left;
    padding: 20px;
    position: absolute;
    right: 0;
    bottom: 0;
    border: solid;
}

#top-menu li {
    display: inline;
    position: relative;
}

#top-menu li a {
    border: 1px solid transparent;
    border-radius: 4px 4px 4px 4px;
    color: #5A6770;
    float: left; /* <----- HERE!!! -----*/
    padding: 15px 20px;
    position: relative;
    text-decoration: none;
}

#top-menu li a:hover {
    background-color: #ECEFF2;
    border-color: #D1D6D9;
}

#top-menu li a:active {
    background-color: #E4E7EB;
    border-color: #BAC1C6;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.18) inset;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:35:26.170

那是因为`<a>`元素是**内联**元素。当你添加它时，`float:left`它开始像**块**元素一样。

您只能在仅影响“行”的内联元素上设置边距和填充......即左右。但是你不能上下颠倒，因为例如。假设你有很长的段落，大约 10 行。在某个地方你有 span 或 a - 内联元素。没有给它们顶部和底部边距和填充的逻辑，导致所有段落都会刹车，但您可以添加左右。

[你可以在这里](http://www.maxdesign.com.au/articles/inline/)找到很好的解释。

# c++ - 如何更改用户输入字符，例如。“abcDEF”并返回输出“222333”

> ID：14546067
> 
> 赞同：-4
> 
> 时间：2013-01-27T09:27:42.500
> 
> 标签：c++

如何更改用户输入字符，例如。"abcDEF" 并在不使用 atoi 或 stringstream 的情况下返回输出 "222333"

使用传统的 SMS 思想，其中 2 等于 abc 3 等于 def 4 等于 ghi 等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:46:20.290

您可以使用查找键映射然后转换您的字符串。带有 C++11 lambda 和 C++03 的示例：

```
static std::map<char, char> keyMap;

struct GetKey
{
  char operator()(char c)
  {
      return keyMap[c];
  } 
};

void InitKeyMap(std::map<char, char>& keys)
{
  keys['a'] = '2';
  keys['b'] = '2';
  keys['c'] = '2';
  keys['D'] = '3';
  keys['E'] = '3';
  keys['F'] = '3';
}

int main ()
{ 
  InitKeyMap(keyMap);
  std::string s1 = "abcDEF";

  // C++11 with lambda
  std::transform(s1.begin(), s1.end(), s1.begin(),
  [](const char c)->char{  return keyMap[c];});

  // C++03 
  std::transform(s1.begin(), s1.end(), s1.begin(), GetKey());

  cout << s1 << std::endl;

  return 0 ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:36:28.150

您可以保存一个表格，将每个字母映射到一个数字，例如：

```
#include <iostream>
#include <string>

std::string convert(const std::string& map, const std::string& input)
{
    std::string output(input.size(), '0');

    for (int i=0; i < input.size(); i++)
    {
        output[i] = map[input[i]];
    }
    return output;
}

int main(int argc, char* argv[])
{
    std::string charMap(128, '0');
    // init table
    charMap['a']='2';
    charMap['A']='2';
    charMap['b']='2';
    // init all values ...

    std::string input("aAb");
    std::string result(convert(mapping, input));
    std::cout << result << std::endl;

    return 0;
} 
```

**编辑**

我对这个答案的最初意图是为操作员提供使用 LUT 的基本概念，并为他提供一个直接（技术上正确）的解决方案来解决他的问题。我没想到所有严厉的评论。我将解决方案更改为多一点 C++ 而少一点 C。C++ 中显然有更多的方法和其他机制来解决这个问题。

# android - Android 强制关闭 JSON，NullPointerException

> ID：14546073
> 
> 赞同：-1
> 
> 时间：2013-01-27T09:28:17.783
> 
> 标签：android, json, nullpointerexception, forceclose

当我尝试执行此代码时出现此错误。当我尝试访问此活动时，它会强制关闭。我正在使用这个类来解析我的数据库中的数据以显示它。仅供参考，它只在我的数据库中显示关于个人数据的 1 行。

这是我的java文件

```
package com.bucheuw.gollege.portal;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import com.bucheuw.gollege.R;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.Window;
import android.view.WindowManager;
import android.widget.TextView;

public class DataPribadiActivity extends Activity {

    public String nim;
    JSONArray str_login = null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.panel_datapribadi);

        Bundle b = getIntent().getExtras();
        nim = b.getString("par_kode");

        String link_url = "http://10.0.2.2/gollege/datapribadi.php?kode="+nim;
        //String link_url = "http://10.0.2.2/siakad-andro/detail-kal.php?kode=1";
        JSONParser jParser = new JSONParser();
        JSONObject json = jParser.AmbilJson(link_url);

        try {
            str_login = json.getJSONArray("dtpr");
            String datp = "";
            TextView isi = (TextView) findViewById(R.id.tdatapribadi);
            for(int i = 0; i < str_login.length(); i=0){
                JSONObject ar = str_login.getJSONObject(i);
                datp += ar.getString("nim")+"\n"+
                "Nama : "+ar.getString("nama")+"\n"+
                "Email : "+ar.getString("email")+"\n"+      
                "Kelas : "+ar.getString("kelas")+"\n"+
                "Prodi : "+ar.getString("prodi")+"\n"+
                "Alamat : "+ar.getString("alamat")+"\n"+
                "Telepon : "+ar.getString("telp")+"\n"+
                "Tempat Tanggal Lahir : "+ar.getString("ttl")+"\n\n";
            }
            isi.setText(datp);

        } catch (JSONException e) {
            e.printStackTrace();
        }

    } 
```

}

这是logcat

```
01-27 15:48:24.803: E/AndroidRuntime(881): FATAL EXCEPTION: main
01-27 15:48:24.803: E/AndroidRuntime(881): java.lang.RuntimeException: Unable to start           activity ComponentInfo{com.bucheuw.gollege/com.bucheuw.gollege.portal.DataPribadiActivity}:    java.lang.NullPointerException
01-27 15:48:24.803: E/AndroidRuntime(881):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-27 15:48:24.803: E/AndroidRuntime(881):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-27 15:48:24.803: E/AndroidRuntime(881):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-27 15:48:24.803: E/AndroidRuntime(881):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-27 15:48:24.803: E/AndroidRuntime(881):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-27 15:48:24.803: E/AndroidRuntime(881):  at android.os.Looper.loop(Looper.java:123) 
01-27 15:48:24.803: E/AndroidRuntime(881):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-27 15:48:24.803: E/AndroidRuntime(881):  at java.lang.reflect.Method.invokeNative(Native Method)
01-27 15:48:24.803: E/AndroidRuntime(881):  at java.lang.reflect.Method.invoke(Method.java:507)
01-27 15:48:24.803: E/AndroidRuntime(881):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-27 15:48:24.803: E/AndroidRuntime(881):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-27 15:48:24.803: E/AndroidRuntime(881):  at dalvik.system.NativeStart.main(Native Method)
01-27 15:48:24.803: E/AndroidRuntime(881): Caused by: java.lang.NullPointerException
01-27 15:48:24.803: E/AndroidRuntime(881):  at com.bucheuw.gollege.portal.DataPribadiActivity.onCreate(DataPribadiActivity.java:34) 
01-27 15:48:24.803: E/AndroidRuntime(881):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-27 15:48:24.803: E/AndroidRuntime(881):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-27 15:48:24.803: E/AndroidRuntime(881):  ... 11 more 
```

谁能解决我的错误？先谢谢了。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:16:01.130

我认为这行有问题

```
Bundle b = getIntent().getExtras();
 nim = b.getString("par_kode"); 
```

你不检查`b`价值`null`，所以如果你不向这个活动发送任何东西，你会得到`NullPointerException`。

# android - Android VideoView 在 setRotation() 后不播放

> ID：14546075
> 
> 赞同：2
> 
> 时间：2013-01-27T09:28:27.403
> 
> 标签：android, android-layout, android-videoview

我发现调用`setRotation()`VideoView 后，VideoView 不再播放。Android 运行时不会引发任何错误，并且 VideoView 正确确定其裁剪尺寸，但仅显示为纯黑框。

这是一个已知的限制吗？如果是这样，还有另一种旋转 VideoViews 的方法吗？我正在使用 API 级别 16。

**编辑：**视频播放音频，但没有视频。也许底层的 SurfaceView 没有被重新定位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:35:44.337

回答我自己以防以后对某人有所帮助，这是 VideoView 的一个已知限制。引用[此 Android 图形博客文章](http://android-developers.blogspot.com/2011/11/android-40-graphics-and-animations.html)：

> 因为 SurfaceView 的内容不在应用程序的窗口中，所以不能有效地转换（移动、缩放、旋转）。这使得在 ListView 或 ScrollView 中使用 SurfaceView 变得困难。SurfaceView 也无法与 UI 工具包的某些功能正确交互，例如褪色边缘或 View.setAlpha()。

我能找到的唯一解决方案是将 VideoView 替换为新引入的[TextureView](http://developer.android.com/reference/android/view/TextureView.html)，它仅适用于 API 级别 14 及更高级别。根据我的阅读，兼容性库中当前不可用。[这个问题](https://stackoverflow.com/questions/10736517/playing-video-on-textureview)有一个如何使用 TextureView 播放视频的示例，它非常简单，您所失去的只是 VideoView 为您包装 MediaPlayer 的便利性。

# android - Android：扩展用户的通讯录。性能 ContentProvider vs Sqlite vs 内存中的列表

> ID：14546077
> 
> 赞同：13
> 
> 时间：2013-01-27T09:29:34.743
> 
> 标签：android, performance, sqlite, android-contentprovider, android-cursoradapter

我和我的 Android 团队遇到了问题。我们有一个应用程序可以显示用户的通讯录，以及扩展信息。

**当前设置**

我们的应用程序读取 Android 操作系统的联系人提供程序。将此信息发送到我们的服务器，该服务器为我们计算几个必要的字段。我们的应用程序稍后会获取此信息，并将此信息保存在 SQLite 数据库中。我们最终在数据库中得到的是两个表。一个包含所有数字和服务器为我们计算的所有额外信息。另一张表包含所有联系人（一个联系人可以有多个号码）。此联系人表仅为性能而创建；当为用户显示通讯录时，我们可以在 CursorAdapter 中使用 Cursor 选择此 Contacts 表中的所有行。因此，当向用户展示通讯录时，我们只需要从我们自己的 SQLite 数据库中读取，并且只需要一个表（例如没有 JOIN）。

**主要问题**

有很多同步正在进行。由于数据是重复的，我们需要检查添加/更改/删除，并且需要同步所有的时间。此外，当我们现在要更改表示层中的特定内容时，我们需要更改联系人表以包含此特定信息。

**我们的优先事项**

第一个：向用户展示通讯录时的表现。

第二：代码可维护性。

因此，不要评论“不要重复数据——这是所有问题的根源”。对我们来说，用户没有性能问题比我们作为开发人员必须花费一些额外的时间编写好的同步算法更重要。

**解决方案？**

我不知道为什么，但我一直认为 CursorAdapter（从一个表中读取所有行）的性能比带有对象列表（保存在内存中）的 ArrayAdapter 好得多。有谁知道这是不是真的？因为一个至少可以帮助我们一半的解决方案是，在启动时，加入 Contacts Provider（本机通讯录）和我们的扩展信息，将其保存在内存中的 List 中，并使用 ArrayAdapter 呈现。

创建自己的内容提供者？我对创建自己的内容提供商知之甚少。任何人都试图创建一个内容提供者来扩展本地通讯录的信息并加入这些信息。也许通过这个接口的实现：ContactsContract.DataColumnsWithJoins？有人尝试过类似的东西吗？在 CursorAdapter 中显示此信息时的性能如何？

请询问我可能忘记的更多信息，我会更新问题！

非常感谢您提供所有有用的提示和解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:09:42.933

我已经得出结论（在我的应用程序 JReader 上工作，它非常依赖于快速 DB 操作）Android 中的 SQLite 与其他平台一样快，但存在一些 Android 特定问题。关于数据库性能和您提出的问题的一些建议：

*   如果您不打算通过它们共享数据，则内容提供者大多是无用的。但它们至少提供 2 个优势。首先，您会收到数据更改通知，并且光标会自动更新，第二个也是重要的：CursorLoaders 需要一个内容提供程序，如果性能对您很重要，我强烈建议使用它们来加载您的光标；
*   访问集合比访问数据库要快得多，但这是一项双重工作，因为无论如何您都必须持久化数据，并且即使对于超快速滚动列表，特别是从单个表中获取数据，数据库访问也非常快，它应该不是问题；
*   正确设计您的数据库（使用 JOINS、索引等）:) 但不要在 CURSOR QUERIES 中使用 JOIN QUERIES！我在多个 Android 平台（包括 4.0+）上遇到了很多性能问题，但并非总是如此。我访问联合表的方式是先获取外键，然后查询子表。

根据我的经验，我遇到过数据库性能非常差的情况，但最终我总是设法调整代码，结果将获得 10-100 倍的性能提升。所以继续分析你的数据库代码，你肯定会达到预期的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T22:11:46.543

Dan 的第二条评论是真的 .. Android 使用屏幕下方的光标窗口来缓存来自光标的数据（大约 1M）。请参阅[光标窗口上的 Android 文档](http://developer.android.com/reference/android/database/CursorWindow.html)，这就是光标适配器更快的方式。

If you do not prefer joining two tables seperately you could consider a CursorJoiner which is faster, This can go to your custom contentProvider where one of the provider is pointing to the Contacts and returns a Cursor , similarly the second one points to your own table and returns a cursor . The cursorjoiner can join both these cursors .

(Though it is a complicated process )

# php - 如何在不同的表上选择相应的数据？

> ID：14546085
> 
> 赞同：0
> 
> 时间：2013-01-27T09:30:41.810
> 
> 标签：php, jquery, mysql, sql, database

我正在尝试为我的大学项目创建一个小消息系统。因为所有消息都存储在一个表中，而与用户相关的数据则存储在一个单独的表中。现在我想先选择一个消息范围，然后找到与所选范围相关的相应用户名。最后将这些数据放在一个数组中。

消息表

```
Message_id | Sender_id | Receiver_id | Title    | Message
1          | 45        | 20          | Testing  | Hello
2          | 10        | 20          | Testing2 | Hi 
```

用户表

```
User_id    | First_name  | Last_name | Email | Password
10         | David       | Chang     |dd@bb  | asddsf
.
.
20         | Denis       | Peter     |ff@dd  | sdfsd
.
45         | Night       | Hero      |gg@ll  | asdsa 
```

现在我想将所有数据放入这样的数组中。

```
Message_id=>1
Sender=>David
Receiver=>Denis
Title=>Testing
Message=>Hello 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:36:49.447

对于您的数据，查询将是

```
 $qry = 'SELECT Message_id, a.First_name as Sender, b.First_Name as Receiver, Title, Message
         FROM Message m
         JOIN User a on a.user_id = m.sender_id
         JOIN User b on b.user_id = m.received_id
         WHERE m.Message_id = 1';

$result = mysql_query($qry) 
```

结果数据将是一个符合您要求的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T09:36:52.753

这是问题的 SQL 部分供您尝试：

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/f42bf/2)

询问：

```
select m.message_id, u.First_Name as Receiver, 
s.First_Name as Sender, m.Title, m.Message
from User u
inner join Message m
on m.receiver_id = u.user_id
inner join User s
on m.sender_id = s.user_id
where m.message_id = 1 //-- your condition
group by m.message_id
; 
```

结果基于您在问题中的样本数据：

```
| MESSAGE_ID | RECEIVER | SENDER |   TITLE | MESSAGE |
------------------------------------------------------
|          1 |    Denis |  Night | Testing |   Hello | 
```

在MYSQL中`JOIN`和`INNER JOIN`指的是一样的。您需要使用用户表两次的原因是您的接收器和感应器都是用户表中的用户。也就是说，您也需要为对应的名字添加正确的列别名:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T09:36:41.397

```
SELECT 
  m.message_id, m.title, m.message, 
  u.first_name AS sender, u2.first_name AS receiver
FROM message AS m 
INNER JOIN user AS u ON u.user_id = m.sender_id 
INNER JOIN user AS u2 on u2.user_id = m.receiver_id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T09:36:59.540

您必须在 SQL 查询中使用 JOIN，如下所示：

```
SELECT msg.Message_id, sender.First_name, receiver.First_name, msg.Title, msg.Message
FROM table_one as msg
JOIN table_two AS sender ON msg.Sender_id = sender.User_id
JOIN table_two AS receiver ON msg.Receiver_id = receiver.User_id 
```

以上陈述未经测试，如果有任何问题，请发表评论。

# c# - WPF Datagrid - 隐藏行详细信息

> ID：14546087
> 
> 赞同：5
> 
> 时间：2013-01-27T09:31:43.100
> 
> 标签：c#, wpf, datagrid

有没有办法隐藏WPF **DataGrid的****行详细信息**？我只想显示数据网格中的行。

 **![在此处输入图像描述](../Images/361c8d12bda8ea51b9c2641ce5e8db3c.png) 谢谢

```
<DataGrid ItemsSource="{Binding Path=oExtrationMasterList}" RowHeaderWidth="0" x:Name="DataGridMaster" AreRowDetailsFrozen="True"  HorizontalAlignment="Left" Margin="15,128,0,0" VerticalAlignment="Top" Height="199" Width="614" AutoGenerateColumns="False" SelectionChanged="DataGridMaster_SelectionChanged" RowDetailsVisibilityMode="Collapsed">
        <DataGrid.Columns>
            <DataGridTextColumn Header="ID" Width="30"  Binding="{Binding TransactionDate}" Visibility="Hidden" />
            <DataGridTextColumn Header="Transaction Date" Width="*" Binding="{Binding TransactionDate}" />
            <DataGridTextColumn Header="Transaction Count" Width="*" Binding="{Binding TransactionCount}" />
        </DataGrid.Columns>
    </DataGrid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T09:38:24.153

您必须将`RowDetailsVisibilityMode`属性设置为`Collapsed`.

```
RowDetailsVisibilityMode="Collapsed" 
```

根据[这个](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.rowdetailsvisibilitymode%28v=vs.95%29.aspx)“获取或**设置**一个值，该值指示何时显示行的详细信息部分”。

在 XAML 中，您可以设置如下：

```
<sdk:DataGrid RowDetailsVisibilityMode="Collapsed"/> 
```

在 C# 中，您可以使用它：

```
myDataGrid.RowDetailsVisibilityMode = DataGridRowDetailsVisibilityMode.Collapsed; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T09:35:55.530

`RowDetailsVisibilityMode="Collapsed"`在您的数据网格上设置。

编辑-

```
 <DataGrid.RowDetailsTemplate>
        <DataTemplate>                    
        </DataTemplate>
    </DataGrid.RowDetailsTemplate> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T09:39:10.153

[`DataGrid.RowDetailsVisibilityMode`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.rowdetailsvisibilitymode%28v=vs.95%29.aspx)用属性试试。

> 获取或设置一个值，该值指示何时显示行的详细信息部分。

[`DataGridRowDetailsVisibilityMode`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridrowdetailsvisibilitymode%28v=vs.95%29.aspx)枚举有；

```
Member name           Description
Collapsed             The row details section is not displayed for any rows.
Visible               The row details section is displayed for all rows.
VisibleWhenSelected   The row details section is displayed only for selected rows. 
```**

# ajax - jQuery BBQ、Address 或任何其他 hashchange 插件 - 推荐

> ID：14546088
> 
> 赞同：2
> 
> 时间：2013-01-27T09:32:04.950
> 
> 标签：ajax, jquery, hashchange

我正在寻找一个插件或功能，它可以为您提供 SEO 友好的方式来动态加载页面，通过 Ajax 进行书签。我知道这已经被问了很多。

激怒我的事情：我曾经使用 jquery.address 插件，但老实说，这个插件似乎总是很复杂。我还查看了其他插件，例如 jQuery BBQ。我知道它被推荐了很多。但是：该插件已经 2 年没有更新了（[链接](https://github.com/cowboy/jquery-bbq)）。现在我想知道是否有任何我遗漏的东西，或者即使它包含在 jQuery 1.9 中。尽管如此，我检查了 jQuery 文档，但似乎找不到任何东西。

因为我最近经常使用 ajax，我很想知道其他人在使用什么，我很高兴有任何建议。

非常感谢和最好的，

麦克风

# .htaccess - 配置 .htaccess 条目

> ID：14546090
> 
> 赞同：1
> 
> 时间：2013-01-27T09:32:31.280
> 
> 标签：.htaccess

谁能帮我解决这个 .htaccess 条目

**301 将非 WWW 重定向到 WWW URL 的 htaccess 条目**

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^!acethehimalaya.com$ [NC]

RewriteRule ^(.*)$ http://www.acethehimalaya.com/$1 [R=301,L] 
```

**将 www.acethehimalaya.com/index.html 重定向到 www.acethehimalaya.com**

```
RewriteEngine on 
RewriteCond %{REQUEST_URI} ^/index.html$ 

RewriteRule .* http://www.acethehimalaya.com/ [R=302,L] 
```

所有这些条目是否有效，因为它给我带来了问题并且我无法登录到我的后端

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:11:10.527

允许所有 RewriteEngine On RewriteCond %{THE_REQUEST} ^[AZ]{3,9}\ /index.php\ HTTP/ RewriteRule ^index.php$ [http://kursayin.am/](http://kursayin.am/) [R=301,L] AddDefaultCharset utf -8

[http://kursayin.am/index.php](http://kursayin.am/index.php)

它适用于这个网站

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:38:43.980

重写引擎开启

RewriteCond %{THE_REQUEST} ^[AZ]{3,9}\ /index.html\ HTTP/

RewriteRule ^index.html$ [http://acethehimalaya.com/](http://acethehimalaya.com/) [R=301,L]

:) 试试这个我在我的网站上使用这样的代码

# java - 带有自定义按下按钮的 ImageAdapter

> ID：14546091
> 
> 赞同：1
> 
> 时间：2013-01-27T09:32:37.637
> 
> 标签：java, android, gridview, uibutton

我希望带有 ImageAdapter 的 GridView 具有自定义按下的按钮。我已经有自定义按钮，但是 onClick 它会在按钮周围创建一个大的橙色 onClick 东西。我只想要 onClick 它显示我的自定义按下按钮。我应该如何轻松做到这一点？

图像适配器：

```
public class ImageAdapter extends BaseAdapter {
private Context context;
private final String[] buttonValues;

public ImageAdapter(Context context, String[] buttonValues) {
    this.context = context;
    this.buttonValues = buttonValues;
}

public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

    if (convertView == null) {

        gridView = new View(context);

        // get layout from mobile.xml
        gridView = inflater.inflate(R.layout.mobile, null);

        // set image based on selected text
        ImageView imageView = (ImageView) gridView
                .findViewById(R.id.grid_item_image);

        String button = buttonValues[position];

        if (button.equals("homework")) {
            imageView.setImageResource(R.drawable.homework);
        } else if (button.equals("schedule")) {
            imageView.setImageResource(R.drawable.button_schedule);
        } else if (button.equals("planner")) {
            imageView.setImageResource(R.drawable.plannerbut);
        } else {
            imageView.setImageResource(R.drawable.settingsbut);
        }

    } else {
        gridView = (View) convertView;
    }

    return gridView;
}

@Override
public int getCount() {
    return buttonValues.length;
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return 0;
}

} 
```

还有我的活动（GridView 方法）：

```
private void setGridView() {
    gridView = (GridView) findViewById(R.id.gridView1);

    gridView.setAdapter(new ImageAdapter(this, MOBILE_OS));

    gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
            switch (position) {
            case 0:
                Toast.makeText(getApplicationContext(), "homework", Toast.LENGTH_SHORT).show();
                break;
            case 1:
                Toast.makeText(getApplicationContext(), "schedule", Toast.LENGTH_SHORT).show();
                break;

            case 2:
                Toast.makeText(getApplicationContext(), "planner",
                        Toast.LENGTH_SHORT).show();
                break;

            case 3:
                Toast.makeText(getApplicationContext(), "settings",
                        Toast.LENGTH_SHORT).show();
                break;
            }

        }
    });

} 
```

提前致谢！

沃特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:13:42.517

您可以让您的按钮使用自定义可绘制对象，您可以在其中自己定义不同的状态。

```
<Button
    android:id="@+id/mybutton"
    android:background="@drawable/custom_button_selector" /> 
```

custom_button_selector.xml：

```
<?xml version="1.0" encoding="utf-8"?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
    <item android:state_focused="true" android:state_pressed="true" 
        android:drawable="@drawable/bg_pressed" /> 
    <item android:state_focused="false" android:state_pressed="true" android:drawable="@drawable/bgalt" /> 
    <item android:drawable="@drawable/bg_normal" /> 
</selector> 
```

然后在 bg_pressed/normal 中定义不同的按钮。

看看[http://www.mkyong.com/android/android-imagebutton-selector-example/](http://www.mkyong.com/android/android-imagebutton-selector-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:28:04.183

我通过向我的 gridview 添加一个 ListSelector 并在 ImageAdapter 中添加一个选择器来修复它。

# node.js - 从客户端创建 Socket IO 通道

> ID：14546095
> 
> 赞同：3
> 
> 时间：2013-01-27T09:33:08.550
> 
> 标签：node.js, websocket, socket.io

我是 Nodejs 和 Socketio 的新手。我想做如下的事情。

-> 创建一个 socket.io/node.js 服务器来监听由 Web 浏览器指定的频道。-> 服务器端脚本将消息推送到特定频道。

（我已经创建了一个服务器，这里是代码。这只是向所有连接的客户端发送两个消息。动作和消息）

```
//start code    
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , url = require('url')

app.listen(8080);

function handler (req, res) {
    // parse URL
    var requestURL = url.parse(req.url, true);

    // if there is a message, send it
    if(requestURL.query.message)
            sendMessage(decodeURI(requestURL.query.action), decodeURI(requestURL.query.message));

    // end the response
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end("");
}

function sendMessage(action, message) {
    io.sockets.emit('notification', {'action': action, 'message' : message});
} 
```

所以基本上 Socket.io 服务器内部没有定义任何通道。但是它们是由客户端（浏览器中的 js）定义的，并且消息由服务器端脚本（如使用 cURL 的 php）发送到特定通道

抱歉，如果以前有人问过这个问题，我确实搜索过，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:31:56.580

我对你的问题有点困惑。通过渠道，您是指 socket.io 房间吗？ [https://github.com/LearnBoost/socket.io/wiki/Rooms](https://github.com/LearnBoost/socket.io/wiki/Rooms)
房间是一组客户端，可以使用以下命令向房间内的所有客户端发送消息：

```
io.sockets.in('room').emit('event_name', data) 
```

重要的是要意识到房间是服务器端的东西。因此，如果您想从客户端向房间发送消息，您必须向服务器发送消息（或请求）并传递房间名称。

此外，您的处理程序函数公开为 HTTP 端点也有点不寻常。如果您的客户端已经有 socket.io 连接，那么将其作为 socket.io 消息发送会更容易。

如果这不能回答您的问题，您可以发布您的客户端代码吗？也许这将有助于理解我你想要达到的目标。

# android - 图实现 Android

> ID：14546111
> 
> 赞同：3
> 
> 时间：2013-01-27T09:36:40.057
> 
> 标签：android, performance, graph

我需要在内存中有一个图形（或一些等效的数据结构），它应该保存一组 IDS（数字），并且要求图形（或一些数据结构）可能有大约 10000 个节点。下面解释了场景。我应该选择任何 API 还是我自己的自定义实现。请考虑内存和速度（请随时告诉我任何建议。）

例如：

我会在每个实例中获取所有叶节点。即在下图中，我只需要 6、7、8。

如果程序从图中删除 6，则输出将为 4,5,7,8

抱歉再次强调。请考虑内存和速度，因为它应该在 android 上运行。

谢谢

![图形图像](../Images/4a7bdf929ced96e56a904d8db71265b0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:23:26.500

您可能还想看看以下帖子：[Java 中是否存在有向无环图 (DAG) 数据类型，我应该使用它吗？](https://stackoverflow.com/questions/6254537/is-there-a-directed-acyclic-graph-dag-data-type-in-java-and-should-i-use-it)

你想要的是一个 DAG（有向 Acyclig Graph）库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:00:38.187

你在考虑什么 API 实现？我想不出任何适合您需要的 Java 集合。

如果您只是实现自己的，则可以在构建和修改树时跟踪叶子，因此每当您需要获取叶子时，您已经有了它们的列表。如果您使用 aa HashSet 来跟踪叶子，我认为您应该能够执行所有树操作而不会因为 HashSet 而导致额外的时间复杂度损失。

当然，您将使用额外的内存，但由您决定这是否会成为问题。我会说即使有 10k 可能的叶子并在 android 上运行，也不应该有任何问题。

# java - 不能从静态上下文引用非静态变量 data_in

> ID：14546114
> 
> 赞同：0
> 
> 时间：2013-01-27T09:36:46.080
> 
> 标签：java

> **可能重复：**
> [不能从静态上下文（java）引用非静态变量](https://stackoverflow.com/questions/2559527/non-static-variable-cannot-be-referenced-from-a-static-context-java)

编译以下java代码时出现上述错误。我是这种语言的新手，我对代码不太确定。我可以清除正常错误，但这个我不明白它是什么。请帮助我

```
public class Kari_Server
{

    ServerSocket server_socket=new ServerSocket(666);       
    Socket soc=server_socket.accept();
    DataInputStream data_in=new DataInputStream(soc.getInputStream());
    DataOutputStreamdata_out=newDataOutputStream(soc.getOutputStream());
    int a=1;
    int i;

    public void screen()throws Exception
    {

        Robot robo=new Robot();
        BufferedImage screen_shot=robo.createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
        ImageIO.write(screen_shot,"JPG",new File("C:\\windows\\temp\\screen_shot"+a+".jpg"));
        FileInputStream file_in=new FileInputStream("C:\\windows\\temp\\screen_shot"+a+".jpg");
        byte[] mybyte=new byte[1024];
        try
        {
            while((i=file_in.read(mybyte))>-1)
                data_out.writeUTF(mybyte,0,i);
        }
        catch(Exception e)  {}  
    }           

    public static void main(String args[])throws Exception  
    {
        Kari_Server kari=new Kari_Server();
        while(true)
        {
            String s1=" ";
            s1=data_in.readUTF();
            if(s1=="attack")
                kari.screen();
            else
                System.exit(0);
        }   
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:40:01.007

主要方法是静态方法。它只能从类中访问静态变量。为了访问 data_in，您需要使用已经存在的`kari`变量来处理它。所以，而不是

`s1=data_in.readUTF();`

利用

`s1=kari.data_in.readUTF()`;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T09:44:33.230

data_in 属于 Kari_Server 的一个实例，但 main 函数不属于。将对 data_in 的引用移动到非静态函数：

```
...
protected readUTF() throws Exception
{
    return data_in.readUTF();
}
public static void main(String args[]) throws Exception
{
    {
        Kari_Server kari=new Kari_Server();
        while(true)
        {
            String s1=" ";
            s1=kari.readUTF();
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T09:41:36.463

我认为您的问题在于 data_in

```
 DataInputStream data_in=new DataInputStream(soc.getInputStream()); 
```

您在静态 void main 方法中使用该字段

```
 s1=data_in.readUTF(); 
```

静态方法不能访问非静态字段。

解决方案是：

1.  将您的 data_in 更改为静态字段

    ```
    static DataInputStream data_in=new DataInputStream(soc.getInputStream()); 
    ```

2.  或者，使用 kari 对象访问 data_in ：

    ```
    kari.data_in 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T09:42:13.303

data_in 是 Kari_Server 类的成员字段。所以你需要通过 Kari_Server 的实例来引用它。您可以使用 kari.data_in 或为此字段创建一个 getter 并使用 kari.gatDataIn()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T09:44:33.240

您正在从静态的主方法调用方法和变量，因此您的方法和该方法中使用的类中的所有变量都应声明为静态。

# c# - 在服务器端以编程方式更改报表的 SSRS 数据源

> ID：14546125
> 
> 赞同：12
> 
> 时间：2013-01-27T09:38:24.830
> 
> 标签：c#, asp.net, sql-server, reporting-services, reportviewer

今天，我们为每个客户部署相同的 SSRS 报告文件夹和数据源文件夹。这些文件夹之间的区别在于每个文件夹的名称和数据源的连接字符串。

我们正在使用报表服务器 2008 R2。

是否可以只维护一个报表和数据源文件夹，并**在呈现报表之前以**编程方式在服务器端更改其连接字符串？

如果不是，是否可以通过改变报告中的一些逻辑来实现？今天我们使用“共享数据源”选项。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T12:20:25.030

这是我们在我们的环境中所做的事情——我们维护一组报告，这些报告可以部署在具有自己配置的任何客户端上。

你在这里有几个选择。由于您使用的是共享数据源，这使事情变得更容易，因为您不需要为每个报告定义数据源。

**1\. 使用 rs.exe 实用程序和脚本文件**

[rs.exe 在线图书](http://msdn.microsoft.com/en-us/library/ms162839%28v=sql.100%29.aspx)

该程序允许您创建可以与报表服务器 Web 服务交互的脚本文件（在 VB.NET 中）。您创建一个脚本文件（例如 Deploy.rss）并使用各种参数调用 rs.exe 程序，包括您定义的任何自定义参数：

```
rs.exe -i DeployReports.rss -s http://server/ReportServer -v DatabaseInstance="SQL" -v DatabaseName="ReportDB" -v ReportFolder="ClientReports" 
```

因此，这将调用脚本 DeployReports.rss、connect to `http://server/ReportServer`，其中包含三个用户定义的参数，可用于创建数据源和报告文件夹。

在 scipt 文件中，你可以有这样的东西：

```
Public Sub Main()

    rs.Credentials = System.Net.CredentialCache.DefaultCredentials

    CreateFolder(reportFolder, "Report folder")
    CreateFolder(datasourceFolder, "Data source folder")
    CreateDataSource()

End Sub 
```

然后可以进行 Web 服务调用，例如：

```
rs.CreateFolder(folderName, "/", Nothing)

'Define the data source definition.
Dim definition As New DataSourceDefinition()
definition.CredentialRetrieval = CredentialRetrievalEnum.Integrated
definition.ConnectString = "data source=" + DatabaseInstance + ";initial catalog=" + DatabaseName
definition.Enabled = True
definition.EnabledSpecified = True
definition.Extension = "SQL"
definition.ImpersonateUser = False
definition.ImpersonateUserSpecified = True
'Use the default prompt string.
definition.Prompt = Nothing
definition.WindowsCredentials = False

Try

    rs.CreateDataSource(datasource, datasourcePath, False, definition, Nothing)
    Console.WriteLine("Data source {0} created successfully", datasource)

Catch e As Exception

    Console.WriteLine(e.Message)

End Try 
```

您尚未指定您使用的 Reporting Services 版本，所以我假设是 2008 年。请注意，可以使用多个端点，具体取决于 SQL Server 版本。2005/2008 端点在 2008R2 及更高版本中已弃用，但仍然可用。只是在编写脚本时要记住的事情。

**2.通过应用调用SSRS Web Service**

[报表服务器 Web 服务概述](http://msdn.microsoft.com/en-us/library/ms152787%28v=sql.100%29.aspx)

从上面的脚本进行的相同调用也可以在任何其他应用程序中进行。因此，您只需要通过 WSDL 添加对报表服务器 Web 服务的引用，就可以连接到远程服务并调用其方法来部署报表、数据源等。

因此，最终您将连接到报表服务器 Web 服务，它只是您需要考虑使用的媒介。

使用脚本更容易运行，因为它只是从命令行运行程序，但编写自己的部署应用程序肯定会提供更大的灵活性。我建议启动脚本，以便您了解该过程，然后在需要时将其迁移到定制应用程序。祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T14:41:57.640

您可以使用基于[表达式的连接字符串](http://msdn.microsoft.com/en-us/library/ms156450.aspx#Expressions)来选择正确的数据库。您可以基于应用程序传入的参数或[UserId 全局变量](http://msdn.microsoft.com/en-us/library/dd255216.aspx)。我相信您需要[配置无人参与的执行帐户](http://msdn.microsoft.com/en-us/library/ms156302.aspx)才能使其正常工作。

注意：*小心安全隐患*。意识到如果您将敏感数据（例如密码）传递给参数，那么 (a) 它将通过网络传输，并且 (b) 将存储在报告服务的执行日志表中。

# java - 我想存储一对值的列表 并根据 val2 对这对进行排序？

> ID：14546129
> 
> 赞同：-3
> 
> 时间：2013-01-27T09:38:45.650
> 
> 标签：java

我有一对价值观`<integer1, integer2>`。我应该使用哪种数据结构来存储它们，以便我可以根据 integer2 对列表进行排序，然后通过索引访问它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:51:06.463

好的，我会摇摆：

为您的两个值创建一个包含字段的类，然后使用 a `List`（如果元素数量不同）或数组（如果没有），其中该类是元素类型。列表和数组都可以通过索引访问，并且可以根据元素的属性进行排序。

看：

*   [`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)
*   [`Collections.sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)用于排序列表
*   [`Arrays`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)用于排序数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:42:53.513

您没有提供足够的信息，但是如果您想将一个值与另一个值匹配，您应该使用`MAP` 例如，如果您的第一个值是国家，第二个值是首都。您可以加载`MAP`（国家，首都）的所有值，如果您给一个国家，`MAP`将返回首都。你可以在这里阅读更多：[链接](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html)

# php - php 可以在我的电脑中需要任何 php 文件吗？

> ID：14546133
> 
> 赞同：1
> 
> 时间：2013-01-27T09:39:20.517
> 
> 标签：php

php 可以在我的电脑中需要任何 php 文件吗？

我把apache www根文件夹设置为d:\phpnow\htdocs，之前我以为php只能要求这个文件夹下的php文件，比如require('laji/hello/a.php');
今天我发现php可以在我的PC上加载任何php文件，只需要完整路径。
如何预防？它对 Web 服务器不应该是安全的。

![在此处输入图像描述](../Images/59e24526576f397e044511028d2888fe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:42:57.280

PHP 可以**将服务器上的任何文件**包含在其被监禁的限制内（如果有的话）。在这种情况下，您的计算机就是服务器。这不是安全问题，因为远程服务器无法访问您的文件系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T09:49:59.450

> php 可以在我的电脑中需要任何 php 文件吗？

运行 PHP 程序的用户有权访问的任何文件。（也就是说，文件系统权限）。

> 如何预防？

限制文件系统的权限或 chroot 服务器，使其在沙盒环境中运行。（我不知道在 Windows 上是否可以进行 chrooting）

> 它对 Web 服务器不应该是安全的。

这是完全安全的，除非：

*   您允许不受信任的用户在您的 PC 上安装他们自己的 PHP 程序（另请参阅[What do you recommend for setting up a shared server with php](https://stackoverflow.com/questions/176013/what-do-you-recommend-for-setting-up-a-shared-server-with-php)）
*   您允许通过未过滤的用户输入选择文件系统上的文件路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T10:06:13.043

您可以使用文件拒绝访问目录，`.htaccess`因为您使用 Apache 运行 php。

如果你想阻止直接访问整个包含文件夹，你可以放一个`.htaccess`文件（文件只有扩展名，没有文件名。你可以使用记事本输入代码并将其保存为带有引号的“.htaccess”，称为绝对命名) 在包含的文件夹中；

```
deny from all 
```

如果你想禁用目录列表，这里有一个教程：

**[htaccess 中的目录列表。允许、拒绝、禁用、启用 .htaccess 中的目录列表](http://viralpatel.net/blogs/htaccess-directory-listing-enable-disable-allow-deny-prevent-htaccess-directory-listing/)**

你可以参考这个 Stack Overflow 问题**[.htaccess 拒绝访问文件夹](https://stackoverflow.com/questions/4201927/htaccess-deny-access-to-folder)**

只是谷歌文件夹访问拒绝使用`htaccess`，你可以找到很多东西。

# cryptography - 使用 Tossim 安装 TinyECC

> ID：14546134
> 
> 赞同：3
> 
> 时间：2013-01-27T09:39:20.240
> 
> 标签：cryptography, tinyos

我首先在 Windows7 上使用 VMWARE 安装 Ubuntu 10.04。我安装了 TinyOS 2.1.2，一切正常。Blink 和其他示例工作正常。Tossim 也在为这些示例工作。命令 make micaz sim 已成功构建。我必须模拟signtaure算法所以我想安装TinyECC-2.0但得到以下错误：

```
sumi@ubuntu:/opt/tinyos-2.1.2/apps/TinyECC-2.0$ make micaz sim
mkdir -p simbuild/micaz
  placing object files in simbuild/micaz
  writing XML schema to app.xml
  compiling testECDSA to object file sim.o
ncc -c -shared -fPIC -o simbuild/micaz/sim.o -g -O0 -tossim -fnesc-nido-tosnodes=1000 -fnesc-simulate -fnesc-nido-motenumber=sim_node\(\) -fnesc-gcc=gcc -Wall -Wshadow -Wnesc-all -target=micaz -fnesc-cfile=simbuild/micaz/app.c -board=micasb -DTOSH_DATA_LENGTH=102 -DDEFINED_TOS_AM_GROUP=0x22 --param max-inline-insns-single=100000 -DSECP160R1 -DBARRETT_REDUCTION   -DHYBRID_MULT   -DHYBRID_SQR   -DCURVE_OPT   -DPROJECTIVE   -DSLIDING_WIN   -DSHAMIR_TRICK   -DIDENT_APPNAME=\"testECDSA\" -DIDENT_USERNAME=\"sumi\" -DIDENT_HOSTNAME=\"ubuntu\" -DIDENT_USERHASH=0x4f41f2b4L -DIDENT_TIMESTAMP=0x5104ea17L -DIDENT_UIDHASH=0x81f6a833L -I/usr/include/python2.6 -Wno-nesc-data-race testECDSA.nc   -fnesc-dump=components -fnesc-dump=variables -fnesc-dump=constants -fnesc-dump=typedefs -fnesc-dump=interfacedefs -fnesc-dump=tags -fnesc-dumpfile=app.xml
NNM.nc: In function ‘NNM$NN_SubDigitMult’:
NNM.nc:3278: error: can't find a register in class ‘CLOBBERED_REGS’ while reloading ‘asm’
NNM.nc:3278: error: ‘asm’ operand has impossible constraints
NNM.nc: In function ‘NNM$NN_Sub’:
NNM.nc:367: error: unknown register name ‘r2’ in ‘asm’
NNM.nc:367: error: unknown register name ‘r0’ in ‘asm’
NNM.nc: In function ‘NNM$NN_Sqr’:
NNM.nc:1775: error: unknown register name ‘r29’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r28’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r27’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r26’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r25’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r24’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r19’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r17’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r16’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r15’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r14’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r13’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r12’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r11’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r10’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r9’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r8’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r7’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r6’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r5’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r4’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r3’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r2’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r1’ in ‘asm’
NNM.nc:1775: error: unknown register name ‘r0’ in ‘asm’
secp160r1.nc: In function ‘secp160r1$CurveParam$omega_mul’:
secp160r1.nc:357: error: unknown register name ‘r29’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r28’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r27’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r26’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r25’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r19’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r17’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r16’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r15’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r14’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r13’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r12’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r11’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r10’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r9’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r8’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r7’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r6’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r5’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r4’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r3’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r2’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r1’ in ‘asm’
secp160r1.nc:357: error: unknown register name ‘r0’ in ‘asm’
NNM.nc: In function ‘NNM$NN_Add’:
NNM.nc:273: error: unknown register name ‘r2’ in ‘asm’
NNM.nc:273: error: unknown register name ‘r0’ in ‘asm’
NNM.nc: In function ‘NNM$NN_Mult’:
NNM.nc:875: error: unknown register name ‘r25’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r24’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r22’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r21’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r20’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r19’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r18’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r17’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r16’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r15’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r14’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r13’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r12’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r11’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r10’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r9’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r8’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r6’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r5’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r4’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r3’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r2’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r1’ in ‘asm’
NNM.nc:875: error: unknown register name ‘r0’ in ‘asm’
make: *** [sim-exe] Error 1
sumi@ubuntu:/opt/tinyos-2.1.2/apps/TinyECC-2.0$ 
```

有没有人在做这个？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-12T22:34:08.603

根据文档（[http://discovery.csc.ncsu.edu/software/TinyECC/README.txt](http://discovery.csc.ncsu.edu/software/TinyECC/README.txt)）：

> NNM.nc 中有一些内联汇编代码来加速自然数运算。内联汇编代码是为 Atmega128l(MICAz)、MSP430(TelosB/Tmote Sky) 和 XScale(Imote2) 编写的。如果您想在其他平台上使用 TinyECC，您必须在 NN.h 中注释“#define INLINE_ASM”或实现您自己的内联汇编代码。

除非您准备编写自己的内联汇编，否则我会考虑更改 INLINE_ASM 的定义。

# c++ - 何时在 C++ Qt 中使用 QMutex？

> ID：14546137
> 
> 赞同：0
> 
> 时间：2013-01-27T09:40:08.673
> 
> 标签：c++, multithreading

我有两种情况，我不知道是否应该使用`QMutex`。我已经多次运行该程序`QMutex`并且它没有向我显示任何异常行为。为简单起见，我在这里略读了代码。但为了安全起见，我想知道我是否应该使用`QMutex`？

**场景#1：**

```
 class A : QObject
 {
    Q_OBJECT

    private double **array;//it is initialised in the constructor & is 100x100

    slots:
          slot1(); //2 Qthreads are created in my main GUI thread along with 2 objects of class A, & by A aobj.movetothread();
          slot2(); //& connecting these 2 slots to started() SIGNAL of respective QThread's
                   //I have multi-threaded my application.
 }

 A::slot1()
 {
    double temp = array[i][j];
    //some operations on temp
 }

 A::slot2()
 {
    double temp = array[i][j];
    //some operations on temp
 } 
```

注意：`array[][]`初始化后内容不变。我只在 2 个*线程中**访问*它的信息。然而，有时两个线程可能同时访问相同的*元素！***`array`**

 ****情景#2**

```
 A::slot1()
 {
    double temp = somefunc();
    array[0][j] = temp;
 }

 A::slot2()
 {
    double temp = somefunc();
    array[50][j] = temp;
 } 
```

注意：在这种情况下，两个*线程*修改来自同一个数组的元素，但是它们不修改/访问公共元素，即*thread1*处理前*50 行*，而*thread2*处理*接下来的 50 行*，但它们甚至不访问行彼此的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:51:34.773

如果这些场景不能一起运行，则不需要互斥锁。从两个线程访问数据以读取是可以的，在两个（甚至更多线程）中修改来自同一数组的不同元素也可以。您需要互斥锁的情况是两个线程修改数组中的*相同*元素，或者如果您从一个线程修改*相同*元素同时从另一个线程读取它们**

# android - 从 XML 添加视图

> ID：14546138
> 
> 赞同：0
> 
> 时间：2013-01-27T09:40:20.663
> 
> 标签：android, view

我正在从 XML 创建一个视图，我在 xml 中定义了一行，在我的主布局中，我通过布局充气器添加它并设置组件的 ID（TextView、EditText、Button）运行时间。我有三个要求

1.  用户可以添加新行（完成）
2.  用户可以删除行（完成
3.  我需要从创建的行中获取数据。（也完成了）

我正在关注本教程 [https://github.com/laoyang/android-dynamic-views#readme](https://github.com/laoyang/android-dynamic-views#readme)它也是很棒的教程。

我在运行时创建每个组件的 ID 并将其添加到 arraylist，以便我可以通过循环从中获取数据。IE

for (EditText editText : 数量) { }

1.  问题是当用户按下每一行上的删除按钮时，它也会通过以下代码从布局及其组件中删除该行：

Main.removeView((View) v.getParent());

但其对应的组件 ID 已添加到数组列表中。我希望当用户按下行的删除按钮时，我应该得到它的位置，以便我也可以通过 arraylist 删除它。

1.  每行都有一个文本视图，它是微调器样式。我想在单击 textview 时打开微调器，并且应该为该 Textview 设置值，而不是所有行。

在这种情况下请帮助我。我真的被困住了，截止日期是今天。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:28:42.407

`ViewGroup`您可以在with中获取孩子的索引`indexOfChild(View)`。您可能需要从该索引中减去偏移量，具体取决于您要添加的行之前有多少子视图（如果有）。

[http://developer.android.com/reference/android/view/ViewGroup.html#indexOfChild(android.view.View)](http://developer.android.com/reference/android/view/ViewGroup.html#indexOfChild%28android.view.View%29)

```
public void onDeleteClicked(View v) {
    // get index
    int index = mContainerView.indexOfChild((View) v.getParent()) - offset;
    // remove from ArrayList
    myArrayList.remove(index);
    // remove the row by calling the getParent on button
    mContainerView.removeView((View) v.getParent());
} 
```

`ViewGroup`您可以通过在添加任何视图（行）之前存储要添加视图（行）的初始索引来获取偏移量。在提供的链接的情况下（尽管因为它等于 0 而不是不必要的），它将是这样的：

```
private int offset = 0; 

@Override
public void onCreate(Bundle savedInstanceState) {
    ...
    // this should be equal to the index where the first row will be inserted
    // offset = 0 with the code in your link
    offset = mContainerView.getChildCount() - 1;

    // Add some examples
    inflateEditRow("Xiaochao");
    inflateEditRow("Yang");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:27:34.083

实现这一点的第一件事是获取您选择的视图的 ID，然后在 arraylist 中搜索该 ID，如果找到则删除它。这应该类似于以下内容：

```
int myEditTextID = myEditText.getId(); // ids of your selected editext
ids.remove(ids.indexOf(myEditTextID)); // ArrayList<Integer> where you are storing your ids. 
```

上面的代码首先获取您选择的编辑文本的 id，然后在您的数组列表中搜索它的索引并将其删除。

就这样！:)

# security - JSF 安全库

> ID：14546141
> 
> 赞同：-2
> 
> 时间：2013-01-27T09:41:02.613
> 
> 标签：security, jsf

哪些技术和库可用于 JSF 安全性？我想保护我的 JSF 应用程序的管理页面不被公众访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:49:50.360

这是一个相当困难的问题，但这些天我会选择[Spring Security](http://static.springsource.org/spring-security/site/)或[Apache Shiro](https://shiro.apache.org/)。如果您不使用 Spring，我会看看 Shiro。设置和使用都非常容易。也有一些教程，比如来自 BalusC 的[这个。](http://balusc.blogspot.cz/2013/01/apache-shiro-is-it-ready-for-java-ee-6.html)

另一个选项是[Realms](http://docs.oracle.com/javaee/6/tutorial/doc/bnbxj.html)，它可以具有容器特定（Tomcat、Glassfish、...）的设置，这会使它们无法移植。您还可以使用[Phase Listener](http://devgrok.blogspot.cz/2009/07/access-control-using-phaselistener.html)，它可以非常巧妙地保护小型项目（如果您的应用程序很小，我会选择此选项）。还有其他框架和解决方法，尝试在 Google 上搜索更多关于 Java EE 安全性的信息，您就会看到。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-03-14T11:33:14.980

您可以简单地使用弹簧：

在你的 中添加 spring 安全依赖`pom.xml`项，然后更改 springSecurity-taglibs.xml（添加函数名称，如 areAnyGranted）

然后，在您的 中`web.xml`，添加上下文参数：

```
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/springSecurity-taglibs.xml</param-value>
  </context-param> 
```

之后在您的 applicationContext-security.xml 中添加角色

```
<security:intercept-url pattern="/pages/admin.xhtml" access="ROLE_ADMIN" /> 
```

# c# - 动态更改对象的命名空间

> ID：14546142
> 
> 赞同：0
> 
> 时间：2013-01-27T09:41:11.017
> 
> 标签：c#, class, object, paypal

我在服务参考上使用 PayPal 的服务。众所周知，有一个 PayPal SandBox 环境。

我知道一个站点是否在本地运行。

我的问题是我想通过环境动态改变类的命名空间（因为这两个类的功能相同）。最终我希望我不必更改任何代码，但是当站点由本地运行时，沙箱会自动运行，而当他在服务器上运行时，它会是真正的产品。

我想在这之间切换：

```
using DynoPayPal.PayPal; 
```

还有这个：

```
using DynoPayPal.SandBoxPayPal; 
```

这样对象：`PaymentDetailsItemType`例如，`DynoPayPal.PayPal`在第一种情况下将“是”，而`DynoPayPal.SandBoxPayPal`在第二种情况下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:11:58.553

您不能更改类的命名空间。这不是他们的目的，这样做毫无意义。但是，正如您对问题的评论所指出的那样，您正在寻找的是依赖注入。考虑一下：

```
public interface IPayPal
{
    void aMethod();
}

public class PayPal : IPayPal { /* ... */ }
public class SandboxPayPal : IPayPal { /* ... */ } 
```

然后我们也许可以设想一个类，它将根据环境为我们提供正确的类：

```
public sealed class PayPalFactory
{
    public IPayPal Create()
    {
        if(EnvironmentIsLive) // replace this with a proper check!
            return new PayPal();
        else
            return new SandboxPayPal();
    }
} 
```

# ruby-on-rails - 如果我在 url 中使用分页和其他参数，如何设置片段缓存？

> ID：14546146
> 
> 赞同：1
> 
> 时间：2013-01-27T09:41:42.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching

我正在使用`devise`,`kaminari`和`dalli(memcached)`.
我刚刚尝试在加载时实现缓存`http://example.com/communities?sort=popular`

我试着像下面这样编码。但是，似乎缓存存储不起作用。
看起来它每次重新加载页面时仍在发送 SQL ......

怎么了？

然后，如果可能的话，我想在用户创建或编辑“社区”记录后清除所有包含字符串“community_index_sort_by_”的存储缓存。

**配置/环境/development.rb**

```
...
config.consider_all_requests_local       = true
config.action_controller.perform_caching = true
config.cache_store = :dalli_store
... 
```

**community_controller.rb**

```
def index

    @key = "community_index_sort_by_" + params[:sort].to_s + "_page_" + params[:page].to_s

    if params[:sort] == 'popular'
        unless Rails.cache.fetch(:controller => "communities", :action => "index",  :action_suffix => @key)
            @communities = Community.scoped.page(params[:page]).order("cached_votes_up DESC")
        end
    elsif params[:sort] == 'latest'
        @communities = Community.scoped.page(params[:page]).order("created_at DESC")
    end

end 
```

我没有触及任何视图文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:02:55.960

缓存片段不是通过缓存调用在视图中创建的吗？

在视图中，不要忘记在键中包含参数，例如页面偏移量：

```
<% cache 'the_cache_fragment_key' do %>
...the view...
<% end %> 
```

在控制器中：

```
unless fragment_exist?('cache_fragment_key')
 ...cache fragment doesn't exist, make a call for it...
end 
```

这个rails cast可能会有所帮助。 [http://railscasts.com/episodes/90-fragment-caching](http://railscasts.com/episodes/90-fragment-caching)

为了在更新时清除缓存，rails sweepers 非常有用。您可以为模型方法或控制器操作定义方法。[http://guides.rubyonrails.org/caching_with_rails.html#sweepers](http://guides.rubyonrails.org/caching_with_rails.html#sweepers)

# php - 为什么要关心 mysqli_stmt::bind_param 中的类型？

> ID：14546156
> 
> 赞同：2
> 
> 时间：2013-01-27T09:42:57.033
> 
> 标签：php, prepared-statement

我`mysqli_stmt::bind_param`在我的 PHP 脚本中使用函数。

不方便关心您是否传递参数类型“d”或类型“s”或其他任何类型。为什么总是对字符串、整数和双精度类型使用“s”类型是不好的？

据我了解，mysql 将在需要时自行处理类型转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:10:42.393

怎么说呢，其实也无所谓。唯一的问题是 mysql 在[严格模式下](http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html#sqlmode_strict_trans_tables)运行。

然而，事实上，开发人员通常应该始终了解查询部分的类型。
因为它不仅可以是字符串或数字，还可以是标识符或其他东西。
因此，最好使占位符*type-hinted*，让驱动程序根据查询部分类型应用适当的格式，使查询看起来像这样：

```
SELECT * FROM table WHERE field=?s AND id IN(?a) ORDER BY ?n LIMIT ?i 
```

# javascript - 在 ajax 调用中为全局变量赋值并在单独的 .js 文件中使用它

> ID：14546169
> 
> 赞同：0
> 
> 时间：2013-01-27T09:46:21.853
> 
> 标签：javascript, jquery

我有两个单独的 .js 文件，我想在我的第一个 .js 文件中分配一个`citId`在 ajax 调用中调用的全局变量的值，然后在我的第二个 .js 文件中使用该变量。

代码太长，无法发布，所以我举了一个我正在尝试做的例子。

我的第一个 .js 文件是`main.js`：

```
var citId = "";
$(document).ready(function($) {
var url = some url;

$.ajax({
    type: 'GET',
    url: url,
    jsonpCallback: 'getSBJSON',
    contentType: "application/json",
    dataType: 'jsonp',
    success: function(json) {
                  //Does some stuff

                   urlId = product of some stuff;

        $.ajax({
            type: 'GET',
            url: url + urlId,
            jsonpCallback: 'getSBJSON',
            contentType: "application/json",
            dataType: 'jsonp',
            success: function(json) {

                if (json.length > 0) {
                    citId = urlId;
                    window.open('Citations.html', '_self');
                } else {
                var page = linkBase + urlId;
                window.open(page);
                }  
            },
            error: function(e) {
                console.log(e.message);
            }   
         });  

    });   
    },
    error: function(e) {
        console.log(e.message);
    }
});
}); 
```

我的第二个 .js 文件是`citations.js`：

```
$(document).ready(function($) {

    var itemLnkId = citId;
    $.ajax({
        type: 'GET',
        url: url + citId,
        jsonpCallback: 'getSBJSON',
        contentType: "application/json",
        dataType: 'jsonp',
        success: function(json)
        // more stuff

    });
}); 
```

我已经阅读了很多答案，这些答案要么显示了如何在 ajax 调用中分配全局变量，要么如何在 .js 文件中使用全局变量，但没有显示如何将两者结合起来。

当我简单地使用全局变量时，它适用于原始值，但不显示在 ajax 调用中更改的值。有没有办法既分配一个值，然后在不同的 .js 文件中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:58:35.767

为什么不使用全局变量而不是使用 ajax 调用的 invokedata 传递所需的变量？

在成功调用中使用它。

示例[http://weboutofthebox.com/en-GB/28/Article/Ajaxinvokedataparameter](http://weboutofthebox.com/en-GB/28/Article/Ajaxinvokedataparameter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:52:05.863

执行 AJAX 调用时，Javascript 不会“保持”，它是异步的，对于第二个 ajax 调用，尚未设置变量。所以......试试这个：

引文.js：

```
$(document).ready(function($) {
var url = some url;
$.ajax({
    type: 'GET',
    url: url,
    jsonpCallback: 'getSBJSON',
    contentType: "application/json",
    dataType: 'jsonp',
    success: function(json) {
                  //Does some stuff

                   urlId = product of some stuff;

        $.ajax({
            type: 'GET',
            url: url + urlId,
            jsonpCallback: 'getSBJSON',
            contentType: "application/json",
            dataType: 'jsonp',
            success: function(json) {

                if (json.length > 0) {
                    readyToGo(citId);
                    window.open('Citations.html', '_self');
                } else {
                var page = linkBase + urlId;
                window.open(page);
                }  
            },
            error: function(e) {
                console.log(e.message);
            }   
         });  

    });   
    },
    error: function(e) {
        console.log(e.message);
    }
});
}); 
```

主.js：

```
var readyToGo = function() {

    var itemLnkId = arguments[0];
    $.ajax({
        type: 'GET',
        url: url + citId,
        jsonpCallback: 'getSBJSON',
        contentType: "application/json",
        dataType: 'jsonp',
        success: function(json)
        // more stuff

    });
} 
```

这样的事情会做:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T13:50:59.843

```
$('.actived').click(function(){         
            var status = "Actived";
            var register_id=1;
            (function(status){              
                $.ajax({                
                    //url: "<?php echo base_url();?>index.php?admin/home/toggleActive",
                    type: "POST",
                    data: {                     
                        "register_id" : register_id,
                        "status":status
                    },
                    //datatype: 'json',
                    success: function(data){

                    },
                    error:function(){
                        alert("failure");
                    }
                });         
            })(status);

        });

I hope that it will help you... 
```

# wordpress - 以字符串形式给出名称的访问函数

> ID：14546170
> 
> 赞同：0
> 
> 时间：2013-01-27T09:46:25.187
> 
> 标签：wordpress, function

在 WordPress 中，这是完成的：

```
add_action( 'after_setup_theme', 'theme_setup' );
function theme_setup() {
  ...
} 
```

WordPress 如何访问`theme_setup()`给定字符串的函数`theme_setup`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:02:00.230

首先，使用所有参数调用函数 add_action。该函数的代码如下所示。这个函数没什么意思，它只是 add_filter 函数的一个包装器，更有趣。

```
function add_action($tag, $function_to_add, $priority = 10, $accepted_args = 1) {
    return add_filter($tag, $function_to_add, $priority, $accepted_args);
} 
```

函数 add_filter 将提供给函数的数据保存到全局变量中。代码如下：

```
function add_filter($tag, $function_to_add, $priority = 10, $accepted_args = 1) {
    global $wp_filter, $merged_filters;

    $idx = _wp_filter_build_unique_id($tag, $function_to_add, $priority);
    $wp_filter[$tag][$priority][$idx] = array('function' => $function_to_add, 'accepted_args' => $accepted_args);
    unset( $merged_filters[ $tag ] );
    return true;
} 
```

现在您已将所需的所有内容保存在全局变量中，您可以开始从[函数 do_action 调用函数名，这很长。](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/plugin.php#L360)但最有趣的部分是它的结尾：

```
call_user_func_array($the_['function'], array_slice($args, 0, (int) $the_['accepted_args'])); 
```

函数 call_user_func_array 是魔法。您可以在[PHP 手册中了解更多信息](http://php.net/call-user-func-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:54:41.027

您可以开始查看源代码...

你可以从这里开始...... [https://developer.wordpress.org/reference/functions/add_action/](https://developer.wordpress.org/reference/functions/add_action/)

# java - JAVA中的贪心算法。实施问题

> ID：14546173
> 
> 赞同：1
> 
> 时间：2013-01-27T09:47:08.623
> 
> 标签：java, sockets, tcp, io, greedy

我必须开发一个必须使用贪心算法的项目。使用贪心来选择最佳节点的目的。

我的项目细节。我在 GUI 中有一个服务器，我必须在其中向 8 个客户端发送一些数据。所以使用贪婪我必须发送到最好的 2 个节点。这个最好的 2 个节点是根据与其他节点的连接性及其路径权重选择的。我知道什么是贪婪算法，但不知道如何根据我的项目在 java 中实现它。如何选择最佳节点。我的想法是存储节点信息，如连接性、在数据库中发送的字节总数，并使用贪心来选择最好的。你能指导我哪个是最好的贪婪算法吗？

谢谢阿米尔

# java - Java：如何从任何 JComponent 中删除默认按键？

> ID：14546174
> 
> 赞同：8
> 
> 时间：2013-01-27T09:47:15.870
> 
> 标签：java, swing, jcombobox, key-bindings, keystroke

我想控制哪个击键属于哪个`Jcomponent`. 我什至想知道如何删除与 a 关联的默认击键`Jcomponent`并将它们替换为其他喜欢的击键。

我遵循了这个 oracle[教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html#howto)，它给出了一个使用 JButton 的示例，我尝试了它并且效果很好，但是当我使用[JComboBox](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html)尝试它时它不起作用！

我到底尝试的是删除`SPACE`密钥，即防止 JComponent 响应`SPACE`按下

我使用此代码删除了`SPACE`密钥：

```
firstButton.getInputMap().put(KeyStroke.getKeyStroke("SPACE"), "none"); 
```

JComboBox 也是一样

```
sizesComboBox.getInputMap().put(KeyStroke.getKeyStroke("SPACE"), "none"); 
```

但是不起作用，它是（JComboBox）仍然响应`SPACE`键

因为`firstButton`我删除了`SPACE`印刷机的效果；我添加了 key `F`，所以现在`firstButton`当你按下`F`键盘上的键时，ant 没有响应`SPACE`（有意）。请注意，`F`即使`firstButton`没有焦点，也会发生按下 ( `JComponent.WHEN_IN_FOCUSED_WINDOW`)

这是显示我的示例的 SSCCE 代码：
*注意*：我故意没有将上面的代码行添加到第二个按钮“secondButton”，因此`SPACE`默认情况下它仍然响应。

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import javax.swing.*;

public class KeyStrokeTest extends JPanel
{

    JPanel widgetPanel;
    JPanel textAreaPanel;
    JButton firstButton;
    JButton secondButton;
    JTextArea textArea;
    JComboBox<Integer> sizesComboBox;

    public KeyStrokeTest()
    {
        firstButton = new JButton("First");
        firstButton.addActionListener(eventWatcher);
        firstButton.getInputMap().put(KeyStroke.getKeyStroke("SPACE"), "none");
        firstButton.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("F"), "F Key");
        firstButton.getActionMap().put("F Key", eventWatcher);

        secondButton = new JButton("Second");
        secondButton.addActionListener(eventWatcher);

        sizesComboBox = new JComboBox<>();
        sizesComboBox.addItemListener(new itemListenerClass());
        for (int i = 1; i <= 8; i++)
        {
            sizesComboBox.addItem(i);
        }
        sizesComboBox.setSelectedIndex(0);
        sizesComboBox.getInputMap().put(KeyStroke.getKeyStroke("SPACE"), "none");

        textArea = new JTextArea(0, 0);
        JScrollPane scrollTextArea = new JScrollPane(textArea);
        scrollTextArea.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        textArea.setEditable(false);

        widgetPanel = new JPanel();
        textAreaPanel = new JPanel(new BorderLayout());

        widgetPanel.add(firstButton);
        widgetPanel.add(secondButton);
        widgetPanel.add(sizesComboBox);

        textAreaPanel.add(scrollTextArea, BorderLayout.CENTER);

        JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT, textAreaPanel, widgetPanel);
        splitPane.setDividerLocation(280);
        splitPane.setResizeWeight(.5d);
        this.setLayout(new BorderLayout());
        this.add(splitPane);
    }
    AbstractAction eventWatcher = new AbstractAction()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            Object source = ae.getSource();
            if (source == firstButton)
            {
                textArea.append("First button clicked\n");
            }
            if (source == secondButton)
            {
                textArea.append("Second button clicked\n");
            }
        }
    };

    private class itemListenerClass implements ItemListener
    {

        @Override
        public void itemStateChanged(ItemEvent e)
        {
            if (e.getSource() == sizesComboBox)
            {
                if (textArea != null)
                {
                    textArea.append("Item " + sizesComboBox.getSelectedItem() + "\n");
                }
            }
        }
    }

    private static void createAndShowGUI()
    {
        JFrame frame = new JFrame("KeyStroke Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(500, 300);
        frame.add(new KeyStrokeTest(), BorderLayout.CENTER);
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                UIManager.put("swing.boldMetal", Boolean.FALSE);
                createAndShowGUI();
            }
        });
    }
} 
```

**我想控制 JComponent 的默认击键的原因**是因为我想删除`SPACE`所有 JComponent 上的默认效果，除了一个按钮会响应`SPACE`按下，无论焦点在哪里，使用`JComponent.WHEN_IN_FOCUSED_WINDOW`, 以便单击另一个组件（并将焦点从例外按钮上移开）不会阻止该`SPACE`按钮上的效果。

* * *

**另一点**：如果您测试了上面的代码，您会注意到从 JComboBox 中选择一个项目需要两行，如果您选择项目“4”，则 JTextArea 中的输出为

> ```
> Item 4
> Item 4 
> ```

为什么是两个？？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T12:53:04.170

> 但是不起作用，它是（JComboBox）仍然响应SPACE键

你应该`JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT` `InputMap`这样使用（你可能注意到我使用`KeyEvent`and`KeyStroke.getKeyStroke(int key,int modifier,boolean onRelease)`因为它更易读，更不容易出错，即输入错误的字符串参数等）：

```
sizesComboBox.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT)
        .put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE,0,false), "none"); 
```

据我所知，原因在[这里](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html#maps)得到了很好的解释：

> 组件包含（或是）具有焦点的组件。此输入映射通常用于复合组件——其实现依赖于子组件的组件。例如，`JTable`s 进行所有绑定，`WHEN_ANCESTOR_OF_FOCUSED_COMPONENT`这样如果用户正在编辑，*向上箭头*键（例如）仍然会更改选定的单元格。

所以我推断`JCombobox`是一个复合组件，因此我们需要正确的`InputMap`-`WHEN_ANCESTOR_OF_FOCUSED_COMPONENT`来删除其所有内部组件的 KeyBinding 特定键的功能，即`SPACE`。

> 还有一点：如果您测试了上面的代码，您会注意到从`JComboBox`poduces 中选择一个项目需要两行，如果您选择项目“4”，则输出`JTextArea`为
> 
> ```
> Item 4
> Item 4 
> ```
> 
> 为什么是两个？？

正如@mKorbel（他的评论+1）所说，可能会发生2个事件：

*   一个项目被取消选择
*   选择了一个项目

这些事件成对发生，因为当我们选择一个新值时，旧值被取消选择。因此，我们必须对此进行检查并采取适当的行动：

```
@Override
public void itemStateChanged(ItemEvent e)
{
   if(e.getStateChange()==ItemEvent.SELECTED) { 
       //am item was selected do something
   }
} 
```

**其他建议：**

*   不要打电话`setSize`。`JFrame`

*   使用适当的`LayoutManager`和/或覆盖`getPreferredSize`来返回`Dimension`适合内容的 s，并`pack()`在`JFrame`设置可见之前和添加组件之后调用。

# django - Django 1.4.2 / South 0.7.6 数据库错误 - DEFAULT_DB_ALIAS

> ID：14546176
> 
> 赞同：1
> 
> 时间：2013-01-27T09:47:24.070
> 
> 标签：django, django-south

当我运行时，`python manage.py runserver`我收到以下错误：

```
Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x1cc9cd0>>
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 158, in get_app_errors
    self._populate()
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 64, in _populate
    self.load_app(app_name, True)
  File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 88, in load_app
    models = import_module('.models', app_name)
  File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/usr/local/lib/python2.7/dist-packages/South-0.7.6-py2.7.egg/south/models.py", line 2, in <module>
    from south.db import DEFAULT_DB_ALIAS
  File "/usr/local/lib/python2.7/dist-packages/South-0.7.6-py2.7.egg/south/db/__init__.py", line 81, in <module>
    db = dbs[DEFAULT_DB_ALIAS]
KeyError: 'default' 
```

这是我的**settings.py**：

```
 DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'foureggs',
        'USER': 'myuser',
        'PASSWORD': 'mypass',
        'HOST': '',
        'PORT': '',
    }
} 
```

这是一个具有相同问题的问题[。](https://stackoverflow.com/questions/10058035/south-django-1-4-database-error)答案说“您的设置中应该有一个名为'default'的数据库”。我并没有真正遵循这一点。我的数据库名称是“foureggs”，所以显然我想使用它。

**更新：**当我这样做时，`python manage.py diffsettings`我得到以下输出，**看起来不正确**（仅粘贴相关的 DATABASE 行，其余设置看起来不错）：

```
DATABASES = {'default': {'ENGINE': 'django.db.backends.dummy', 'TEST_MIRROR': None, 'NAME': '', 'TEST_CHARSET': None, 'TIME_ZONE': 'UTC', 'TEST_COLLATION': None, 'PORT': '', 'HOST': '', 'USER': '', 'TEST_NAME': None, 'PASSWORD': '', 'OPTIONS': {}}} 
```

我的项目中只有一个设置文件，它位于 app 目录中，这是正确的。上面的 DATABASE 行从何而来？

**更新2：我想出了问题所在**。[这是我按照Heroku 部署指南](https://devcenter.heroku.com/articles/django#database-settings)`settings.py`的指示添加的这两行。当我将它们注释掉时，一切正常。现在我需要弄清楚为什么它会导致问题。

```
# Parse database configuration from $DATABASE_URL
import dj_database_url
DATABASES['default'] =  dj_database_url.config() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:23:16.687

我通过像这样设置 Heroku 配置解决了这个问题：

```
# Parse database configuration from $DATABASE_URL
import dj_database_url

dbconfig = dj_database_url.config()
if dbconfig:
    DATABASES['default'] =  dbconfig

# Honor the 'X-Forwarded-Proto' header for request.is_secure()
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T19:41:10.290

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'foureggs',
        'USER': 'myuser',
        'PASSWORD': 'mypass',
        'HOST': '',
        'PORT': '',
    }
} 
```

你需要填写，`HOST`否则`PORT`django不知道你的数据库服务器在哪里。只有当您使用 sqlite 时，它​​们才能为空。

对于 postgreql，默认端口是`5432`. 如果您在同一台机器上运行服务器，请使用`'localhost'`密钥`'HOST'`，否则输入您的数据库服务器的 IP 地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T13:42:26.170

就我而言，我正在开发环境（我的笔记本电脑），当我收到错误时，这些是我的开发设置

```
import dj_database_url
DATABASES['default'] =  dj_database_url.config()

if not os.environ.has_key('DATABASE_URL'):
     os.environ['DATABASE_URL'] = 'postgres://my_db:my_db@localhost/my_db' 
```

后来我把它改成了这个，事情开始正常了

```
if not os.environ.has_key('DATABASE_URL'):
         os.environ['DATABASE_URL'] = 'postgres://my_db:my_db@localhost/my_db'

import dj_database_url
    DATABASES['default'] =  dj_database_url.config() 
```

dj_database_url.config() 函数调用需要初始化 DATABASE_URL

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T10:46:30.993

该问题显然与 South 无关，而是与 DB 后端有关。

1.  你可以从这里开始：[“settings.DATABASES is proper configured”error execution syncdb with django 1.4](https://stackoverflow.com/questions/10228618/settings-databases-is-improperly-configured-error-performing-syncdb-with-djang) and related questions

2.  如果上述答案不起作用，首先检查是否安装了 psycopg2 库并在您的 sys.path 中：如果没有，请在此处安装[Psycopg2 库安装说明](http://initd.org/psycopg/install/)。

3.  那么您最终可以将您的 ENGINE 设置更改为：'postgresql_psycopg2'; 通过这种方式，如果由于某种原因它无法工作，您可以绕过内置引擎。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-07T01:41:17.140

遵循 Heroku 说明后，我遇到了这个问题。您是正确的，这些行是罪魁祸首：

```
# Parse database configuration from $DATABASE_URL
import dj_database_url
DATABASES['default'] =  dj_database_url.config() 
```

这会将 DATABASES 值切换回 dj_database_url 包使用的默认值，该包具有引擎“django.db.backends.dummy”等。如果将其换成这些行，它应该可以工作：

```
# Parse database configuration from $DATABASE_URL
import dj_database_url
DATABASES['default'] = dj_database_url.config(default='postgres://localhost/foureggs') 
```

但是，您不想将其部署到 Heroku，因为它不会在那里工作。我找到的修复假设您使用的是虚拟环境。如果是这样，导航到您的虚拟环境的文件夹并进入 bin 目录（cd $VIRTUAL_ENV/bin），添加一个名为“postactivate”的文件并将此行保存在其中：

`export DATABASE_URL='postgres://localhost/foureggs'`

现在每次激活虚拟环境时，它都会以该值开始。

# java - 对象的易失性和安全发布

> ID：14546177
> 
> 赞同：0
> 
> 时间：2013-01-27T09:47:27.547
> 
> 标签：java, multithreading

在几篇文章中，它说使用 volatile 修复了双重检查锁定问题。

```
class Foo {
        private volatile Helper helper = null;
        public Helper getHelper() {
            if (helper == null) {
                synchronized(this) {
                    if (helper == null)
                        helper = new Helper(); //Important
                }
            }
            return helper;
        }
    } 
```

但是在这里，即使我们使用 volatile 作为辅助字段，这怎么可能是一个安全的发布呢？我的意思是这怎么能保证我们不会得到一个不一致的 Helper 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:27:45.467

没有 volatile，因为初始`if (helper == null)`值在同步块之外，所以没有可见性/一致性保证。特别是，它可能`helper`不为空，而是引用了仅部分创建的对象。

那是因为`helper = new Helper()`不是原子操作：

1.  它分配一些内存
2.  它构造对象
3.  它将对对象的引用分配给`helper`

如果没有同步，观察线程可以以任何顺序看到这些操作，特别是它可以在 2 之前看到 3。

通过`helper`设置 volatile，您在写入和读取之间引入了*先发生*关系（由[Java 内存模型](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)定义），这确保了如果您从观察线程中看到 3，您也会看到 1 和 2。

特别是，**在 volatile 写入之前执行的任何操作都将从 volatile 读取中可见（当然，如果它是后续的）。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T09:52:36.657

我认为这是因为 JVM 保留了`helper=new Helper()`. 我的意思是只有在创建对象之后才会发生分配。如果我错了，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T10:12:51.020

**从高级的角度来看**，`volatile`保证在 volatile 写入之前发生的任何操作（即内部操作）的结果在后续 volatile 读取之后（即当另一个线程在外部检查中`new Helper()`看到时）对任何其他线程都是可见的。`helper != null`

**从低级的角度来看**，它依赖于实现。但总的来说：

*   应该禁止编译器优化可能导致使用先前操作重新排序 volatile 写入
*   JIT 应该在生成的代码中插入[内存屏障，以防止在 CPU 级别进行类似的重新排序（如果特定的 CPU 架构允许这样的重新排序）](http://en.wikipedia.org/wiki/Memory_barrier)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-27T09:59:33.587

好的，同步部分之外的检查是为了避免不必要的进入监控部分。如果您尝试优化性能，则可以省略它。它也仅在创建对象后无法将助手重置为 null 时才有效。同步部分内的检查是为了避免不一致（因为我们可能在等待进入监视器时创建了对象）。

synchronized 内部只能相互独占执行，这就是一致性的来源。但同样：`if (helper == null)`只有在为 Helper 分配了对 Helper 实例的新引用后，helper 不能再变为 null 时，才允许使用外部。

# python - Python 是否有堆栈/堆以及如何管理内存？

> ID：14546178
> 
> 赞同：114
> 
> 时间：2013-01-27T09:47:36.697
> 
> 标签：python, memory, memory-management

Python中的变量和内存是如何管理的？它是否有堆栈和堆以及用于管理内存的算法？鉴于这些知识，对于大量/数据处理的内存管理是否有任何建议？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-01-27T09:55:17.797

> Python 中如何管理变量和内存。

自动！不，实际上，您只需创建一个对象，Python 虚拟机就会处理所需的内存以及它应该放置在内存布局中的什么位置。

> 它是否有堆栈和堆以及用于管理内存的算法？

当我们谈论`CPython`它时，它使用*私有堆*来存储对象。[从 CPython C API 文档](http://docs.python.org/2/c-api/memory.html)：

> Python 中的内存管理涉及一个包含所有 Python 对象和数据结构的私有堆。这个私有堆的管理由 Python 内存管理器在内部确保。Python 内存管理器具有处理各种动态存储管理方面的不同组件，例如共享、分段、预分配或缓存。

内存回收主要通过**引用计数**来处理。也就是说，Python VM 会在内部记录有多少引用引用了一个对象，并在没有更多引用引用它时自动对它进行垃圾收集。此外，还有[一种机制可以通过检测无法到达的对象“孤岛”来中断循环引用](https://github.com/python/cpython/blob/master/Modules/gcmodule.c)（引用计数无法处理），这与试图找到所有可到达对象[的传统 GC 算法有些相反。](http://www.arctrix.com/nas/python/gc/)

***注意：***请记住，此信息是**`CPython`**特定的。其他 python 实现，例如`pypy`、和其他实现细节可能彼此不同，并且与 CPython 不同`iron python`。`jython`为了更好地理解这一点，**理解 Python 语义（语言）和底层实现之间存在差异可能会有所帮助**

> 鉴于这些知识，对于大量/数据处理的内存管理是否有任何建议？

现在我不能谈论这个，但我确信[NumPy](http://www.numpy.org/)（用于数字运算的最流行的 python 库）具有优雅地处理内存消耗的机制。

如果您想了解更多有关 Python 内部的信息，请查看以下资源：

*   [单步执行 CPython](http://www.youtube.com/watch?v=XGF3Qu4dUqk)（视频）
*   [关于 Python 虚拟机内部结构的演示文稿](http://www.troeger.eu/files/teaching/pythonvm08.pdf)
*   本着真正的黑客精神，[CPython 对象分配器源代码](https://github.com/python/cpython/blob/master/Objects/obmalloc.c)

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-01-27T11:06:03.213

Python 没有***这样***的东西。

Python 是*语言*，并没有指定*实现*必须如何准确地实现 Python 语言定义的语义。

每个实现（CPython、PyPy、IronPython、*Stackless*、Jython...）都可以自由地做自己的事情！

在**C** Python 中，*所有*对象都存在于堆上：

> Python 中的内存管理涉及一个包含所有 Python 对象和数据结构的私有堆。¹

CPython 虚拟机是基于堆栈的：

```
>>> def g():
    x = 1
    y = 2
    return f(x, y)

>>> import dis
>>> dis.dis(g)
  2           0 LOAD_CONST           1 (1) # Push 1 onto the stack
              3 STORE_FAST           0 (x) # Stores top of stack into local var x

  3           6 LOAD_CONST           2 (2) # Push 2 onto stack
              9 STORE_FAST           1 (y) # Store TOS into local var y

  4          12 LOAD_GLOBAL          0 (f) # Push f onto stack
             15 LOAD_FAST            0 (x) # Push x onto stack
             18 LOAD_FAST            1 (y) # Push y onto stack
             21 CALL_FUNCTION        2     # Execute function with 2 
                                           # f's return value is pushed on stack
             24 RETURN_VALUE               # Return TOS to caller (result of f) 
```

请记住，这是特定于 CPython 的。堆栈不包含*实际*值，但它保留对这些对象的引用。

¹：[**来源**](http://docs.python.org/2/c-api/memory.html)

# java - 创建访问单个特定类型的通用数组

> ID：14546180
> 
> 赞同：1
> 
> 时间：2013-01-27T09:47:54.917
> 
> 标签：java, arrays, generics, casting, arraylist

我想将泛型类型转换`ArrayList`为泛型类型数组（相同的泛型类型）。例如，我有`ArrayList<MyGeneric<TheType>>`并且我想获得`MyGeneric<TheType>[]`.

我尝试使用该`toArray`方法和铸造：

```
(MyGeneric<TheType>[]) theArrayList.toArray() 
```

但这不起作用。我的另一个选择是创建一个数组`MyGeneric<TheType>`并一个接一个地插入数组列表的元素，将它们转换为正确的类型。但是我试图创建这个数组的一切都失败了。

我知道我必须使用`Array.newInstance(theClass, theSize)`，但我如何获得的类`MyGeneric<TheType>`？使用这个：

```
Class<MyGeneric<TheType>> test = (new MyGeneric<TheType>()).getClass(); 
```

不工作。IDE 声明`Class<MyGeneric<TheType>>`并且`Class<? extends MyGeneric>`是不兼容的类型。

这样做：

```
 Class<? extends MyGeneric> test = (new MyGeneric<TheType>()).getClass();

    MyGeneric[] data = (MyGeneric[]) Array.newInstance(test, theSize);

    for (int i=0; i < theSize; i++) {
        data[i] = theArrayList.get(i);
    }
    return data; 
```

`ClassCastException`在线提出 a `data[i] = ...`。

我该怎么办？

笔记：

我需要该数组，因为我必须将它与第三方库一起使用，因此“在此处使用 insert-the-name-of-the-collection-here”*不是*一个选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T09:53:14.817

首先创建一个您的类型的数组，然后您应该调用：

> ```
> <T> T[]   toArray(T[] a) 
> ```
> 
> 以正确的顺序（从第一个元素到最后一个元素）返回一个包含此列表中所有元素的数组；返回数组的运行时类型是指定数组的运行时类型。

阅读规范： [http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#toArray(T[])](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#toArray%28T%5B%5D%29)

如果您的数组比列表短，则该方法将分配并返回一个新数组；如果您的数组比列表长，则数组中的其余项目将设置为空。

- - - - - - 例子 - - - - -

```
ArrayList<MyGeneric<TheType>> list;
//......
MyGeneric<TheType>[] returnedArray = new MyGeneric[list.size()]; // You can't create a generic array. A warning for an error. Don't mind, you can suppress it or just ignore it.
returnedArray = list.toArray(returnedArray); // Cong! You got the MyGeneric<TheType>[] array with all the elements in the list. 
```

# android - Via和Contact标头中的不同IP地址由android中的pjsip发送

> ID：14546181
> 
> 赞同：0
> 
> 时间：2013-01-27T09:48:00.887
> 
> 标签：android, android-ndk, sip, pjsip

在我的 android 应用程序中，我使用了 pjsip。有时 pjsip 在注册消息的 Via 和 contact 头中发送不同的 IP 地址。它在 Via 报头（由 wi-fi 路由器分配给电话的 IP）中发送其 IP 地址，但在 REGISTER 消息的联系报头中发送本地主机 IP 地址（127.0.0.1）。为什么 pjsip 没有在 via 和 contact 标头中发送相同的 IP 地址（由 wi-fi 路由器分配给电话的 IP）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:29:54.900

有时 pjsip 无法获取 ip 地址并使用本地主机 ip 地址。为了解决这个问题，我从 java 代码中读取了 IP 地址并将其传递给库。

# oracle - 使用 dbms_metadata 创建具有附加列的表副本

> ID：14546183
> 
> 赞同：0
> 
> 时间：2013-01-27T09:48:22.903
> 
> 标签：oracle, plsql, dbms-metadata

您可以通过执行获取表的 DDL `DBMS_METADATA.get_DDL('Table','TABLENAME')`。我正在寻找一种方法来更改 DDL 中表的名称，然后执行 DDL 以创建具有新名称和附加列的等效表。

```
DECLARE
stmt clob;
BEGIN
    SELECT dbms_metadata.get_ddl('TABLE', 'TABLE_NAME') into stmt FROM DUAL;
    /*change the name*/
    EXECUTE IMMEDIATE(stmt);
END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T09:54:49.387

尝试这个 ：

```
CREATE TABLE XXX as SELECT * FROM YYY WHERE 1 = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T16:40:13.627

尝试这个：

```
DECLARE

 v_seq NUMBER;
 v_orig_ddl CLOB;

 BEGIN

 v_seq := 13;

 v_orig_ddl := dbms_metadata.get_ddl('TABLE','TEST', 'BI');

 -- Rename Production tables with extension
 EXECUTE IMMEDIATE 'ALTER TABLE BI.TEST RENAME TO TEST_' || TO_CHAR(v_seq);

 EXECUTE IMMEDIATE v_orig_ddl; 

 END; 
```

/

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T10:07:03.047

我会建议一些类似的东西：

```
DECLARE
stmt clob;
BEGIN

SELECT REPLACE (dbms_metadata.get_ddl('TABLE', 'TABLE_NAME'), 'CREATE TABLE ' || 'TABLE_NAME' , 'CREATE TABLE ' || 'NEW_TABLE_NAME') INTO stmt FROM DUAL;
 EXECUTE IMMEDIATE(stmt);
END; 
```

# compilation - 当一个程序只需要在它要运行的每个平台上编译时，为什么它不能是多平台的？

> ID：14546184
> 
> 赞同：0
> 
> 时间：2013-01-27T09:48:38.987
> 
> 标签：compilation, cross-platform

您可能会发现答案有点明显，其中一部分对我来说也是如此。

但我想知道项目代码的哪些部分通常需要专门为特定平台设计，是用高级编程语言还是低级编程语言编写的？

如果问题听起来有点模糊，请随时编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:58:06.393

示例可能是操作系统内核方法，例如从文件/网络/内存中读取。例如，在 I/O 和内存访问方面，Windows 提供了与 Linux 不同的功能/特权。

此外，代码转换成的机器/汇编代码取决于底层处理器。因此，有时必须重新编译 C 代码才能在英特尔处理器（如 MEC）上的较新版本上运行。

另一个原因可能是商业版本。Windows 可以通过为 MAC 创建一个 .NET 框架和一个 Visual Studio 来让 C# 代码在 MAC 上运行，但他们选择不这样做，因此你不得不在 Windows 上编写 C#。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:47:03.823

这个问题很笼统，所以我会比较笼统地回答。

1) 就像前面提到的帖子一样，任何与操作系统本质挂钩的东西都需要是适用于该操作系统的代码。

2）最低级别的代码将是机器语言/或汇编。这种代码不是非常跨平台的，因为它是只能在为其编写的机器上正确运行的代码。这是 C 的一个优势，它被认为是一种低级语言。当然，如果您为特定硬件编写 C 代码，例如七段 LED 面板，则该代码只有在目标系统中有相应的七段 LED 面板时才能在另一个系统上运行。

高级编程语言的优点之一是您通常可以编写跨平台代码，实际上只需要重新编译目标系统即可运行。

然后我们可以讨论解释语言如 Python、Ruby 或虚拟机如 Java、Smalltalk 等。如果目标平台有解释器，如“Python”，只要源代码有效，它应该运行不变在类似的 Python 解释器上（我的意思是类似的，因为您可能有版本问题，或者您可能有图形插件库或其他库）。

当我打字时，我意识到要公正地回答这个问题，一个人可以写作和写作。嗯，也许这个问题太笼统了？？？

干杯（当然我遗漏了很多故事）

# javascript - jQuery中的表格排序器和多文本提取？

> ID：14546186
> 
> 赞同：3
> 
> 时间：2013-01-27T09:48:49.677
> 
> 标签：javascript, jquery, tablesorter

我有这张表，它有 TableSorter 插件。

[Jsbin #1](http://jsbin.com/azijap/2/edit)

![在此处输入图像描述](../Images/3c3c7bd59267f7a1aeabc3f4f7d8d558.png)

但是 - 我希望第 1 列（基于第二个零）按第~~*一个字符*~~ *和第二个字符*排序 为数字！）

例子 ：

```
4134 (I dont care about the other digits order - just the first one which is here=1)
22230 //2
242   //4
67    //7
28    //8
992222 //9 
```

所以我创建了**另一个**textExtraction 函数：（仅在第一列应用）

```
 var myExtraction = function(node) {
  return parseInt($(node).substring(1))
} 
```

并向ctor**添加了另一个**对象，该对象仅适用于#1列。（基于0'）。

```
...,{
    textExtraction: myExtraction,
    headers: {
        1: {
            sorter: 'digit'
        } 
    }
} 
```

但是它不起作用（~~[jsbin#2 在这里是](http://jsbin.com/azijap/5/edit)~~ [新的 jsbin](http://jsbin.com/azijap/15/edit)），我很确定这不是方法。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T20:39:31.980

我不确定您是否需要自定义`myExtraction`。只需将该列的排序器更改为`'text'`而不是，`'digit'`当您使用其余标题指定它时，它应该可以工作。

**编辑**

如果您希望*第二个*数字用于排序：

```
var myExtraction = function(node) {
  return $(node).text().substring(1);
}

jQuery('#bullsTable').tablesorter(
{
    headers: {
        0: {
            sorter: false
        },
        1: {
            sorter: 'text'
        },
        13: {
            sorter: 'digit'
        }, 
        14: {
            sorter: 'digit'
        }
    },
      textExtraction: jgExtraction,
      textExtraction: {
         1: myExtraction
      }
} 
```

我在这里更新了你的[jsbin](http://jsbin.com/azijap/17/edit)。

注意：您使用的是旧版本的 tablesorter，它似乎不支持`textExtraction`. 我更新了`<script>`标签并且它有效。

# ruby-on-rails - Rails 验证 - 密码 :on => :create 不起作用？

> ID：14546188
> 
> 赞同：0
> 
> 时间：2013-01-27T09:48:59.857
> 
> 标签：ruby-on-rails, ruby, validation, passwords

我有这个密码验证规则 - 我想在用户创建帐户然后在设置中验证密码 - 如果他不更改密码，我不想更改它（仅当相应用户更改它时= 他通过密码确认设置了新密码）。

这是我所拥有的：

```
 validates :password, 
            :length => {:within => 6..40}, 
            :on => :create 
```

但是该规则`:on => :create`对我不起作用 - 如果我在设置中发送空白密码，我仍然会收到有关密码错误的错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:20:07.710

看起来应该这样做：

```
validates :password, length: { within: (6..40) }, if: -> user { not user.persisted? or user.password.present? } 
```

如果用户尚未持久化（`create`操作）或稍后已提供密码（通过设置） ，它将仅验证密码

# javascript - Javascript 中的晚上 11 点到早上 7 点之间

> ID：14546193
> 
> 赞同：1
> 
> 时间：2013-01-27T09:50:09.487
> 
> 标签：javascript

做一个简单的返回函数来检查它是否在晚上 11 点到早上 7 点之间的最佳方法是什么？

有这样的想法，但问题是凌晨 1 点将是 1，并且不会大于 23，但 23（晚上 11 点）会。

```
return (((new Date()).getHours() >= 23) && ((new Date()).getHours() <=7)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T10:00:03.690

非常接近，但你应该使用 || 不是 ＆＆

```
var currentHour = (new Date()).getHours();
return (currentHour >= 23) || (currentHour <= 7); 
```

如果时间大于或等于 23（晚上 11 点）或者如果时间小于或等于 7（早上 7 点），那么它是在晚上 11 点到早上 7 点之间。

中午，getHours() == 12，所以 12 >= 23 = false || 12 <= 7 = false，因此返回 false；

# c# - 元数据连接字符串

> ID：14546194
> 
> 赞同：0
> 
> 时间：2013-01-27T09:50:12.183
> 
> 标签：c#, asp.net, exception-handling, connection-string, entity-framework-5

我正在使用 Visual Studio 2012 使用 ASP.NET 和 C# 构建 Web 应用程序。我想将 DropDownList Web 控件中的数据库与实体框架连接起来。我创建了一个与我的数据库连接的 ADO.NET 实体数据模型。然后我切换到设计视图并在 DropDownList 中添加了一个实体数据源，但是当我单击“选择数据源”并为命名连接选择实体名称时，出现以下错误：

> 无法加载连接字符串中指定的元数据。考虑重新构建 Web 项目以构建可能包含元数据的程序集。发生以下错误：
> 
> 无法加载指定的元数据资源

我的连接字符串：

```
<connectionStrings>
    <add name="TelerikAcademyEntities"
         connectionString="metadata=res://*/TelerikAcademy.csdl|res://*/TelerikAcademy.ss‌​dl|res://*/TelerikAcademy.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=(LocalDB)\v11.0;attachdbfilename=|DataDirectory|\TelerikAcademy.mdf;integ‌​rated security=True;connect timeout=30;MultipleActiveResultSets=True;App=EntityFramework&quot;" 
         providerName="System.Data.EntityClient" />
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:48:29.060

解决，重建项目后。

# ruby-on-rails - 如何反序列化 JSON 对象

> ID：14546199
> 
> 赞同：6
> 
> 时间：2013-01-27T09:50:51.010
> 
> 标签：ruby-on-rails, json, deserialization

我正在尝试通过以下方式使用获取请求：

```
 req = Net::HTTP::Get.new("/api/v1/users/external/1/features/DOWNLOAD7ab8d82b40/alloc?paymentPlanId=PRO_SUBSCRD725FCCCC6");
  req.add_field('ISV_API_KEY', '548f3d4b34ffdb2f294a870a9728af6940a75b66ba944d8ab6eef5a7543ca3db'); 
  req.add_field('ISV_API_SECRET', '69dafa8923f2b0da8153e6bcca3841de0fa88f1a031a5eb1946e54eb982cef48');                           

  res = Net::HTTP.start("localhost", 3000) {|http|
      res = http.request(req)
  } 
```

**“邮递员”是一个向我显示此请求结果的应用程序**

根据`postman`，这个请求返回给我：

```
{
"total":"1200.0",
"used":"35.0",
"available":1165.0
} 
```

如何反序列化这个 Json 对象？假设我想要“使用”参数。

我试过：

```
json_string = req2.to_json
puts json_string 
```

但我得到了：

```
{"accept":["*/*"],"user-agent":["Ruby"],"isv_api_key":["548f3d4b34ffdb2f294a870a9728af6940a75b66ba944d8ab6eef5a7543ca3db"],"isv_api_secret":["69dafa8923f2b0da8153e6bcca3841de0fa88f1a031a5eb1946e54eb982cef48"]} 
```

我也试过：

```
puts JSON.parse(res) 
```

但我得到了：

```
can't convert Net::HTTPOK into String 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T10:25:00.733

使用 Ruby 的 JSON 库。

```
res = '{"total":"1200.0","used":"35.0","available":1165.0}'
JSON.parse(res) # => {"total"=>"1200.0", "used"=>"35.0", "available"=>1165.0} 
```

注意：如果您使用的是 Ruby 1.8.X，您可能需要 json 类。如果您在 Rails 应用程序中工作，Rails 需要它。

# asp.net - 使用 DateTimePicker 时出错：Microsoft JScript 运行时错误：需要对象

> ID：14546200
> 
> 赞同：2
> 
> 时间：2013-01-27T09:50:54.940
> 
> 标签：asp.net, html

我正在尝试使用 DateTimePicker（asp.net 4.0，c#）。

加载页面时，它会在屏幕上显示请求的日期，但是当我尝试更改日期或执行其他任何操作时，会抛出“需要对象”异常/错误，我想知道如何处理它。

在我的页面顶部我放了

```
<%@ Register TagPrefix="cc1" 
         Namespace="mycompany.WebServerControls.DateTimePicker" 
         Assembly="DateTimePicker" %> 
```

DateTimePicker 声明如下：

```
<cc1:datetimepicker id="dtpStart" runat="server" 
          Width="129px" Height="36px"></cc1:datetimepicker> 
```

我究竟做错了什么？

# java - 使用 Proguard 进行混淆使我的应用程序无法运行

> ID：14546203
> 
> 赞同：0
> 
> 时间：2013-01-27T09:51:34.273
> 
> 标签：java, obfuscation, proguard

我使用 Proguard 来混淆源代码。混淆后，应用程序无法正常工作。有什么具体原因吗？有没有人遇到过这种问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:44:38.973

您可以从混淆中排除特定代码/包，直到找到确切的攻击性代码。可以在源代码中找到喜欢`Class.forName`和使用的明显罪魁祸首。`java.reflect`

可能在proguard网站上提供了更多提示。

# java - 使用 FIT 检查代码

> ID：14546208
> 
> 赞同：1
> 
> 时间：2013-01-27T09:52:12.123
> 
> 标签：java, eclipse, static-analysis, fit-framework

我已经为我的代码编写了适合检查，但由于某种原因它无法正常工作`class not found exception`。

这是一个例外： ![在此处输入图像描述](../Images/1cd96ac1af4bc985fa88e77944c704b4.png)

这些是文件夹： ![在此处输入图像描述](../Images/f51bd2d066b16d859ef5c256e74f087d.png)

这是合适的代码： ![在此处输入图像描述](../Images/1c8ac2660ddca3e53aaa17c04319140f.png)

这是检查的 HTML 文件...

![在此处输入图像描述](../Images/b06cde37d413035b08a447842410eef0.png)

根据异常，我的代码不是问题，而是类文件所在位置的问题。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:20:19.037

Eclipse 不会将您的类识别为 Java 类，因为 fixtures 文件夹不是**Source Folder**。因此，运行项目时不会编译 CheckSubscribers。

尝试[使用 Wizard](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-wizard-source-folder.htm)创建 Fixture 作为源文件夹。

如果创建 CheckSubscriber 的目的是测试良好的做法是以下标准[Maven 布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)。所以只需创建源文件夹：**src/java**包含项目类和**src/test**包含测试类。

# php - 如何在同一页面中回显输入值？

> ID：14546219
> 
> 赞同：-1
> 
> 时间：2013-01-27T09:53:54.717
> 
> 标签：php, javascript, html

有一个编码：

```
if(!$fgmembersite->CheckLogin())
{ $loggedin="0";} else { $loggedin="1"; }
if ($loggedin=="1") { echo "<form method=\"post\">
<input type=text id=\"nameField\" name=\"nameField\" value=\"". $fgmembersite->UserFullName() ." \"/></form>"; } 
```

想再次回显 nameField likeE：

```
<?php echo $nameField ?> 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:58:40.837

```
<form action="the-same-page.php">

    ... your code...

    <input type="submit">
</form>

<?php echo $_POST['nameField'] ?> 
```

如果您需要它而不提交，那么它是客户端唯一的操作。

```
<input type="text" id="foo" 
   onchange="document.getElementById('output').innerHTML = this.value"/>

<div id="output">output will be here</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:59:12.207

```
<? echo $_POST['nameField']; ?> 
```

这是回声发布值...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T09:59:49.957

无需重新刷新页面/提交您需要使用 javascript 的表单。

包括 jquery 然后你可以做这样的事情

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script>
$(document).ready(function(){
    jQuery("#nameField").keyup(function () {
        var value = $(this).val();
        $("#xx").text(value);
    });
});
</script>

<?php

echo '<form action="" method="post">
    <input type="text" id="nameField" name="nameField" value="'.$fgmembersite->UserFullName().'" />
</form>';

?>

<span id="xx"></span> 
```

# jquery - jQuery“Matt Stow 的响应式图像地图插件”不起作用

> ID：14546220
> 
> 赞同：0
> 
> 时间：2013-01-27T09:53:55.863
> 
> 标签：jquery, html, css, responsive-design, imagemap

因此，在我为自己开发的新作品集网站上，我使用了以下插件。[https://github.com/stowball/jQuery-rwdImageMaps](https://github.com/stowball/jQuery-rwdImageMaps)虽然它在我的网站上似乎无法正常工作。我不明白为什么一切都设置成它应该是这样并且似乎正在工作。如果有人可以快速查看并帮助我，那将不胜感激。

> 不工作的图像映射的 URL 在这里 [http://kmgp.us/skillcloud.php](http://kmgp.us/skillcloud.php)。

应该发生的事情很简单......当您单击词云中的词时，它会下降到*#element*。（这是完美的工作），但由于这个网站是响应式的......当你重新调整页面大小时，图像地图就会混乱。

该插件应该会自动调整图像映射的大小，但事实并非如此，所以我认为我的代码中存在严重或愚蠢的错误。

我使用 jQuery 插件的具体代码在这里...

```
<script>
$(document).ready(function(e) {
    $('img[usemap]').rwdImageMaps();

    $('area').on('click', function() {
        alert($(this).attr('alt') + ' clicked');
    });
});
</script> 
```

还导入了一些 CSS 代码，如果您进入 firebug，似乎正在应用这些代码......

```
img[usemap] {
    border: none;
    height: auto;
    max-width: 100%;
    width: auto;
} 
```

**再次非常感谢您！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T11:30:22.277

您正在加载我的 rwdImageMaps 插件并在 jQuery 加载之前调用该插件。如果您检查控制台，您会看到 2 个错误：jQuery 未定义和 $ 未定义。将脚本向下移动到页面底部，在 jQuery 之后，以及其余部分。

那应该解决它:)

# drools - Drools 使用无状态知识会话在 LHS 中更改状态

> ID：14546222
> 
> 赞同：0
> 
> 时间：2013-01-27T09:54:21.113
> 
> 标签：drools

我在这里列出我的问题。

1.  人们可以进出房间。
2.  人可以是学生、老师或 HOD。
3.  学生有一个称为状态的属性，可以手动更新也可以自动更新。

这些是我的事件：

1.  进入房间的人。
2.  为每个学生更新了属性状态。

这些是我的规则。

1.  如果进入房间的人是教师，则打印教师进入。
2.  如果进入房间的人数超过 30 人，请提醒我。
3.  如果学生参加了超过 20 小时的课程，则更新状态以完成。

现在我想将 1 和 3 结合在一起。
like: 4\. 如果有属性状态完整的学生进入房间，则提醒老师。

现在，正如我之前所说，这两个事件是分开发生的。因此，以 2 个不同的规则处理它更容易。但是，当我想创建一个规则 4 中的 1 和 3 组合的规则时，我必须验证进入房间的人是否是学生，以及他是否具有“完整”属性。

但是，在验证他是否是学生之前加载状态属性对我来说听起来很糟糕。所以，我只想调用一个加载属性的方法

> “一个人是学生，并且有一条规则试图加载属性状态”。

我打算通过 LHS 中的方法调用来做到这一点，这并不简单。

有没有其他办法，我可以处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T09:42:00.983

在大多数情况下，使用小规则来识别特定情况比使用复杂的规则来识别混合情况要好。我不清楚的是您是否想用规则 4 替换规则 3。我将离开规则 3 并创建规则 4，如下所示：

```
when
    PersonEnteringRoom($p: person, $r: room, person.type == "Student", person.status == "Complete") // status was set by rule 3.
    Room(this == $r, $t: currentTeacher != null) //the relation could be stablished by rule 1
then
    Notifier.notify($t, "The student has completed the course", $p);
end 
```

当然，这条规则是否适合你取决于其他因素，比如你的执行周期。

希望能帮助到你，

# wikipedia - 获取给定标题的维基百科页面的文本内容

> ID：14546223
> 
> 赞同：1
> 
> 时间：2013-01-27T09:54:28.337
> 
> 标签：wikipedia, wikipedia-api

当我给出维基百科页面的标题时，我想要纯文本格式的页面内容。没有图像，没有标记等。

我一直在浏览 Wikipedia API，但找不到任何相关结果。

鉴于任务的简单性，我确信 Wikipedia API 支持这一点。

那么，我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:27:41.967

像这样 ：

```
<script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
<script>
function wiktext() {
    var title = prompt("Enter the title:","Title of Wikipedia Page to get");
    var address = "http://en.wikipedia.org/w/api.php?format=txt&action=query&prop=revisions&rvprop=content&titles=" + encodeURIComponent(title);
    $.get(address, function(result) {
        console.log(result);
    });
}
wiktext();
</script> 
```

但是请注意，这是维基标记文本。并且您需要去掉描述嵌套数据结构的标题的前几行。

然后，您可以使用[remy sharp 的这个 Wiki 到 HTML 解析器](http://remysharp.com/2008/04/01/wiki-to-html-using-javascript/)来删除大多数 wiki 内容并为您提供一些 HTML。然后只需在将 HTML 放入的元素上使用 jquery 的 .text() 方法即可。

有关更多信息，请参阅[此处的 API 文档](http://en.wikipedia.org/w/api.php?help)

# html - 用于组织文档的简单所见即所得 HTML 编辑器

> ID：14546226
> 
> 赞同：0
> 
> 时间：2013-01-27T09:54:37.523
> 
> 标签：html, wysiwyg, document, text-editor, codehighlighter

嗨，我只需要一个简单的 HTML 编辑器，用于学校项目。我需要的是有一个文件夹，其中的文件可以相互链接，必须可以在浏览器中查看，所以我要使用 HTML（不知道是否存在更好的解决方案）。

word 文件不是我需要的，因为它专注于“单个文件”，而我需要关注多个文件。一个 power point 文件也不适合，因为我需要单独的文件。

现在，花时间编写 HTML 标签又不是一个好的选择。太多时间浪费在“方面”而不是“内容”上。

内容管理系统？它们太复杂并且学习曲线很长，Drupal 不是很好的选择，面向网站设计师。

我需要的是一个非常简单的 HTML 编辑器，它具有快速的学习曲线和最基本的格式选项：

1.  博尔德
2.  斜体
3.  段落
4.  超链接到另一个文件
5.  字符大小
6.  文本对齐

并且可能我需要一些真正有用的高级功能：

1.  放置图像
2.  数学公式语法（即使公式是可以的图像，重要的是无论它们保存什么格式都可以轻松编辑它们。如果它易于使用并且至少在 Chrome 或 Firefox 中正确显示，那么任何东西都可以）
3.  代码片段（我必须发布代码片段，所以我至少需要能够以不同的字体显示代码，并且可能具有语法高亮显示）
4.  表

该文件夹不必发布在网站上，因此我将跳过任何“服务器配置”。我只需要链接文件，而不是网站。没有任何好的和简单的所见即所得编辑器有这样的功能吗？

一个想法是使用文档软件（如 doxygen）问题是我必须编写特殊标签并且没有 WYSIWIG 功能，唯一的好处是它会自动提供代码高亮但是这样我就失去了所有其他需要的功能.

请不要在线编辑，我需要文件夹中的文档以及将它们压缩到 USB 设备上的能力（如果没有网络，我如何访问在线内容？我可以选择将它们上传到某个地方，但我需要主要在我的机器上工作）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:07:07.237

如果你不能依赖文字处理器，这里有两个 HTML+JS WYSIWYG 库。但是，将已编辑文件保存到文件夹的代码取决于您（即您不能完全跳过问题的“服务器端”部分）。

*   [ckeditor](http://ckeditor.com/)
*   [微小的](http://www.tinymce.com/)

# jquery - 我要为此 Web 应用程序查询多少 JSON 帖子？

> ID：14546230
> 
> 赞同：0
> 
> 时间：2013-01-27T09:55:11.247
> 
> 标签：jquery, json, wordpress

今天我一直在玩弄 Wordpress JSON API，并且我制作了一个 JQuery Mobile 应用程序来显示我的 Wordpress 博客中的帖子。我做的查询是这个`?json=1&callback=cb`，它给我 10 个帖子。唯一的问题是：如果有人想看第 11 个帖子怎么办？我还没有找到任何获得它的方法。

*   我可以`20`在我的查询中设置一个计数，但它只会将问题转移到第 21 个帖子。
*   每次用户达到限制时增加计数将意味着所有已经看到的帖子（第一个 10 个）都会再次下载，而没有任何效果。

我对这些解决方案中的任何一个都感觉不好。我看到你可以通过以下方式搜索帖子：

*   它的蛞蝓：我不知道。
*   日期：我知道它比我当前显示的帖子的旧，但查询需要真实日期而我没有。
*   类别，作者：没有帮助找到第 11 个帖子。

这是我的代码给你一个想法。

HTML：

```
 <div data-role="header">
        <a href="#" data-role="button" data-theme="a" onclick="loadPictureFromId(currentPictureId+1)">Previous</a>
        <h1 id="title"></h1>
        <a href="#" data-role="button" data-theme="a" onclick="loadPictureFromId(currentPictureId-1)">Next</a>          
    </div> 
```

JS：

```
 var currentPictureId;
    var myData;

    function cb(data) {
        myData = data;
        loadPicture(0);
    }

    function loadPictureFromId(id) {
        if (id<0) {
            alert("There are no more pictures!");
        }
        else
        {

            if (id>9) {
                alert("Feature not supported yet.");
            }

            else
            {
                currentPictureId = id;
                var temp = $("<div/>").html(myData['posts'][id].title).text(); // HTML entities
                $("#title").text(temp);
                document.title = temp;
                $("#img").attr({'src': myData['posts'][id].attachments[0].url, 'alt': temp, 'title': temp});    
                $("#facebook").attr({'data-href': myData['posts'][id].url});    

            }
        }
    }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:49:13.013

如果这是您正在使用的插件： [http ://wordpress.org/extend/plugins/json-api/](http://wordpress.org/extend/plugins/json-api/)

那么您要查找的参数是`page`. 如果您在请求中将 page 设置为 2，它将获得第 11 到 20 个帖子。例如`?json=1&page=2&callback=cb`

[自述文件](http://plugins.svn.wordpress.org/json-api/trunk/readme.txt)详细说明了这一点。

# javascript - 我已经编写了自己的 javascript bencode 库，但仍然无法生成 torrent 信息哈希？

> ID：14546233
> 
> 赞同：1
> 
> 时间：2013-01-27T09:55:35.473
> 
> 标签：javascript, encode, bittorrent, sha1, info-hash

我到处寻找一个可以工作的 JavaScript Bencode 模块，但找不到，所以我决定自己写一个来生成种子信息哈希。

当我将功能写入规范时，该模块尽我所知。

字典 => 对象 => 键/值对

列表 => 数组对象 => 数字/值对

整数 => 数字对象

字符串...

无论如何，我对 torrent 文件的数据进行解码，然后对解码后的 info key 的值进行编码，接下来我使用 Google API 的 SHA-1 模块，并且 info hash 永远不会与原始文件匹配。我傻了。

我已经彻底测试了我的模块。我可以将数据解码并传递给我的编码函数，并且它与原始数据完全匹配，但是当我尝试从编码的信息部分值生成散列时，我得到一个不匹配的结果。

我相信这是由于 JavaScript 糟糕的二进制字符串处理，我不知道如何诊断或解决这个问题。

当我根据内容类型标头从获取请求中输出数据时，字符串的二进制部分显示不同，这就是我得出这个结论的原因。

我知道种子文件是 UTF-8 字符编码的，但在那之后我很无助......

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T03:50:48.170

torrent 文件是 UTF-8 字符编码的，但它的一部分不是。info 字典中的“pieces”键是严格 ASCII 编码的，将其检索为 UTF-8 会导致我使用 [C] 时出错，并且可能会使用 JavaScript 对你做同样的事情。

# objective-c - UIManagedDocument 和其他内容

> ID：14546236
> 
> 赞同：4
> 
> 时间：2013-01-27T09:55:55.150
> 
> 标签：objective-c, core-data, uimanageddocument

我有一个基于文档的应用程序（多个文档，每个文档都有自己的核心数据持久存储）。我正在使用`UIManagedDocument`它来开发它。

每个文档都是一个绘图，我希望能够保存`UIImage`每个绘图的预览 ( )。

因为我想显示一个带有所有预览的滚动视图，我想我不应该将预览放在数据库中，所以我正在使用[此处](https://stackoverflow.com/questions/8351948/how-do-i-save-additional-content-into-my-uimanageddocument-file-packages)`UIManagedDocument`描述的附加内容功能。

我有一些问题：

*   参数“absoluteURL”有什么用 `additionalContentForURL:error:`？在我链接的示例中没有使用它。

*   如何在不打开文档的情况下检索预览？目前我正在这样做：

.

```
NSString* docName = [[[DocumentStore sharedStore] documentsList] 
                                    objectAtIndex:indexPath.row];

NSString* dataDirectory = [FileUtils privateDataDirectory];
NSString *dataPath = [dataDirectory stringByAppendingPathComponent:docName];
NSString *imagePath = [dataPath 
             stringByAppendingPathComponent:@"AdditionalContent/thumb.png"];

UIImage * preview = [UIImage imageWithContentsOfFile:imagePath]; 
```

...但我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T06:11:49.360

1.  `absoluteURL`in 参数为您提供将`additionalContentForURL:error:`写入附加内容的绝对 URL。

    对于大多数用例来说，这不是一个特别必要的参数，因为您实际上并不需要知道这些数据将被写入到哪里，但在某些晦涩难懂的用例中，它可能作为标识符有用，因为它具有独立于全球内容管理系统的全局内容管理系统。文件（虽然这可能不是很结构）

2.  您当前用于检索文档预览的方法应该没问题，只要您实施保护措施，以便您的应用程序不会在您期望的路径中不存在预览资源时崩溃或表现出未定义的行为，例如不管什么原因。

    获取预览的另一种方法是加载每个文档，对其进行初始化，`readAdditionalContentFromURL:error:`在文档类中实现以读取预览并将其放入属性中，然后检索该属性的值并将其用作预览。但是，这需要将每个文档加载到内存中才能检索预览，因此我不建议这样做，因为它会严重影响性能。

有关如何处理附加内容的一般指南`UIManagedDocument`，请参阅此[问题](https://stackoverflow.com/q/8351948/834998)的[答案](https://stackoverflow.com/a/8901963/834998)。

# fancybox - jquery fancybox 与 jquery 选项卡冲突

> ID：14546238
> 
> 赞同：1
> 
> 时间：2013-01-27T09:56:26.170
> 
> 标签：fancybox

我在实现 jquery 花式框时遇到了很大的问题。在我想要包含它的页面中，我使用的是 jquery 选项卡，我认为它与fancybox 冲突。我收到此错误：$("#various1").fancybox 不是我检查过几次的函数，它不包括路径问题，只是冲突问题。我在`<head>`标签中包含以下脚本：

```
<script type="text/javascript" src="./js/jquery.min.js"></script>   
<script type="text/javascript" src="./js/jquery.tools.min.js"></script>    
<script type="text/javascript" src="./js/jquery-1.7.1.min.js"></script>    
<script type="text/javascript" src="./js/primary.js"></script>    

<link href="js/fancybox/jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css" media="screen" />    
<script>!window.jQuery && document.write('<script src="js/jquery-1.4.3.min.js"><\/script>');</script>    
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>    
<script type="text/javascript" src="js/fancybox/jquery.fancybox-1.3.4.pack.js"></script>    
<script type="text/javascript">
$(document).ready(function() {
$("#various1").fancybox({
        'titlePosition'     : 'inside',
        'transitionIn'      : 'none',
        'transitionOut'     : 'none'
    });
});
</script> 
```

我尝试添加 jQuery.noConflict(); 像这样

```
<script type="text/javascript">
jQuery.noConflict();    
$(document).ready(function() {
$("#various1").fancybox({
        'titlePosition'     : 'inside',
        'transitionIn'      : 'none',
        'transitionOut'     : 'none'
    });
});
</script> 
```

但这并没有解决问题。之后我添加了 jQuery.noConflict(); 在主页中包含的所有文件中仍然存在相同的错误： $("#various1").fancybox 不是函数，展开后我可以看到： f(b=Document testfancybox.php, f=[function( )]) f(a=undefined) 在第 2 行文件[http://...js/jquery-1.7.1.min.js](http://...js/jquery-1.7.1.min.js) 如果我排除主页中包含的文件之一，错误就会消失。在那个文件中，我有 jquery 选项卡，正如我所说，添加 noconflict 函数没有帮助。
如何调试此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:27:31.387

答案：只需重命名

```
$(document).ready(function() {    
$("#various1").fancybox({ 
```

至

```
jquery(document).ready(function() {    
jquery("#various1").fancybox({ 
```

而不是添加无冲突函数 jQuery.noConflict(); 到它使用 $ 函数的所有地方，问题将得到解决..

# mysql - 如何在文本框中获取复选框值是文本数量约为 40 以及如何使用 mysqul 数据库将它们存储在数据库中；

> ID：14546239
> 
> 赞同：0
> 
> 时间：2013-01-27T09:56:48.020
> 
> 标签：mysql, input

我正在制作一个订票网站，我想在只读的文本框中显示选定的座位，大约有 40 个复选框作为座位` 1U 7U 13U 19U 25U

```
 <tr>
  <td id='s'><input name='2U' type='checkbox' class='seat' value='2U' />2U</td>
  <td id='s'><input name='8U' type='checkbox' class='seat' value='8U' />8U</td>
  <td id='s'><input name='14U' type='checkbox' class='seat' value='14U' />14U</td>
  <td id='s'><input name='20U' type='checkbox' class='seat' value='20U' />20U</td>
  <td id='s'><input name='26U' type='checkbox' class='seat' value='26U' />26U</td></tr>

  <tr><td id='s'><input name='3L' type='checkbox' class='seat' value='3L' />3L</td>
  <td id='s'><input name='9L' type='checkbox' class='seat' value='9L' />9L</td>
  <td id='s'><input name='15L' type='checkbox' class='seat' value='15L' />15L</td>
  <td id='s'><input name='21L' type='checkbox' class='seat' value='21L' />21L</td>
  <td id='s'><input name='27L' type='checkbox' class='seat' value='27L' />27L</td></tr>

  <tr><td id='s'><input name='4L' type='checkbox' class='seat' value='4L' />4L</td>
  <td id='s'><input name='10L' type='checkbox' class='seat' value='10L' />10L</td>
  <td id='s'><input name='16L' type='checkbox' class='seat' value='16L' />16L</td>
  <td id='s'><input name='22L' type='checkbox' class='seat' value='22L' />22L</td>
  <td id='s'><input name='28L' type='checkbox' class='seat' value='28L' />28L</td></tr>

  <tr><td>Passage</td></tr>

  <tr><td id='s'><input name='5L' type='checkbox' class='seat' value='5L' />5L</td>
  <td id='s'><input name='11L' type='checkbox' value='11L' />11L</td>
  <td id='s'><input name='17L' type='checkbox' value='17L' />17L</td>
  <td id='s'><input name='23L' type='checkbox' value='23L' />23L</td>
  <td id='s'><input name='29L' type='checkbox' value='29L' />29L</td></tr>

  <tr><td id='s'><input name='6U' type='checkbox' value='6U' />6U</td>
  <td id='s'><input name='12U' type='checkbox' value='12U' />12U</td>
  <td id='s'><input name='18U' type='checkbox' value='18U' />18U</td>
  <td id='s'><input name='24U' type='checkbox' value='24U' />24U</td>
  <td id='s'><input name='30U' type='checkbox' value='30U' />30U</td></tr>
  </table></div>` 
```

这是复选框，我想将选中或选中的复选框的值存储`Seats : <input id='seats' type='text' maxlength='10' size='10' readonly/>` 到此文本框，这是用于预订巴士票

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:06:54.323

最好的方法（恕我直言）是为选定的座位使用不同的桌子，它引用了主桌子（无论你使用哪个 - 也许是预订订单的桌子？）

喜欢

```
create table orders( -- that's your actual table
  id integer primary key;
-- skip...
);

create table seats(
   seat_name   varchar(16), -- 12U, 30U etc etc
   order_id integer references orders(id)
); 
```

语法可能有点不同（我现在使用 postgres，但不记得与 mysql 的区别），但你应该明白。然后代码可以请求所有座位的订单，例如

```
select order.*, concat(seats.seat_name) 
from orders join seats on seats.order_id = orders.id
where ... -- etc etc
group by seats.order_id 
```

（也许 concat() 不是正确的，顺便说一句，应该还有其他 func，选择更好的一个）

或者只是请求所有当前订单，例如

```
select seat_name from seats where order_id = ? 
```

# c# - IE8 上没有访问令牌？

> ID：14546240
> 
> 赞同：0
> 
> 时间：2013-01-27T09:56:53.790
> 
> 标签：c#, facebook, internet-explorer, facebook-c#-sdk

我使用的是 C# 并且授权表单包含一个浏览器控件，它是系统的 IE。我的请求 URI 是

```
https://www.facebook.com/dialog/oauth?client_id=[CLIENT_ID]&redirect_uri=https://www.facebook.com/connect/login_success.html&response_type=token&display=popup&scope=publish_actions 
```

在带有 IE 9 的 Windows 7 上，浏览器重定向到以下位置后，我可以成功获取访问令牌：

```
https://www.facebook.com/connect/login_success.html#access_token=[ACCESS_TOKEN] 
```

但是，当程序在带有 IE 8 的 XP 上运行时，浏览器会被重定向到：

```
https://www.facebook.com/connect/login_success.html 
```

，没有访问令牌。

谁能告诉我为什么有区别？

# php - AWS Elasticache + set()

> ID：14546242
> 
> 赞同：0
> 
> 时间：2013-01-27T09:57:13.727
> 
> 标签：php, amazon-web-services, memcached, amazon-elasticache

如果我使用压缩和时间设置（第三和第四设置），我可以在与 Elasticache 交互时让 .set() 工作

```
 $memcached = new Memcached();
 $memcached->setOption(Memcached::OPT_CLIENT_MODE, Memcached::DYNAMIC_CLIENT_MODE);
 $memcached->addServer('goneglobalcache-1a.expalp.cfg.apse1.cache.amazonaws.com', 11211);
 $memcached->set('key', 'value', 60);

 $memcached->set('tester', 'set tester...', 0, 600);
 echo $memcached->get('tester'); 
```

如果我删除 set() 的最后 2 个元素，它确实有效，例如：

```
 $memcached->set('tester', 'set tester...');
 echo $memcached->get('tester'); 
```

这是我第一次使用 memcached/elasticache - 有什么原因会失败吗？注意：只要我只使用键/值部分而不是压缩/时间部分，add() 也可以工作。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:59:02.407

```
public bool Memcached::set ( string $key , mixed $value [, int $expiration ] ) 
```

set 方法中没有压缩标志，它在 Memcache 中而不是 Memcached 中。

```
$memcached->set('tester', 'set tester...', 600); 
```

# xml - 使用 Powershell 从位于不同文件夹中的 xml 文件创建逗号分隔的文本文件

> ID：14546245
> 
> 赞同：1
> 
> 时间：2013-01-27T09:57:37.193
> 
> 标签：xml, powershell

在 Windows 7 PC 上，我试图从数百个 xml 文件中包含的数据生成一个以逗号分隔的文本文件。每个 xml 文件都包含在其自己的唯一命名文件夹中，但 xml 文件的每个实例都具有相同的文件名“report.xml”

更清楚地说，文件夹/文件结构是这样的：

```
H:\Main_Folder\Folder_1\report.xml
H:\Main_Folder\Folder_2\report.xml
H:\Main_Folder\Folder_3\report.xml
... 
```

xml 文件包含大量数据，但我只对几个数据项感兴趣，它们恰好是测量值。最终，我想要的输出是一个文本文件，它将为每个文件夹列出文件夹名称和 xml 文件中的两个测量值：

```
folder_1 , measurement_1 , measurement_2
folder_2 , measurement_1 , measurement_2
folder_3 , measurement_1 , measurement_2
... 
```

在任何文件夹中，我都可以使用以下 PowerShell 代码从单个 xml 文件中获取我想要的值：

```
$xml = [xml](get-content report.xml)
$xml.Measurement[0].Value.'#text' + " , " + $xml.Measurement[1].Value.'#text' 
```

上面的代码返回：

```
measurement_1 , measurement_2 
```

此外，我可以在每个文件夹中移动并使用以下 PowerShell 代码输出文件夹名称：

```
PS H:\Main_Folder> Get-ChildItem Report.xml -Recurse | Split-Path -parent 
```

执行时，这给了我：

```
folder_1
folder_2
folder_3
... 
```

我需要一些帮助来弄清楚如何让所有这些一起工作以生成我想要的文本文件。非常感谢你的协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:42:32.090

像这样的东西

```
ls h:\main_folder -filter "report.xml" -recurse|%{
    [xml]$xml=gc $_.FullName
    $_.DirectoryName+","+$xml.Measurement[0].Value.'#text' + " , " + $xml.Measurement[1].Value.'#text' |out-file c:\temp\output.csv -Append
} 
```

# facebook - 在facebook oauth响应不起作用后从对话框发布到facebook

> ID：14546246
> 
> 赞同：1
> 
> 时间：2013-01-27T09:57:39.017
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试使用 facebook.ui 方法在用户 Facebook 时间轴中发布链接，以将帖子提供给 Facebook。对于这个用户，首先需要使用 oauth 登录到 Facebook，这样我才能获取他们的电子邮件。但是 Facebook ui`FB.ui(obj,callback);`没有响应`FB.login(response,scope);` 我的示例代码是：

```
 FB.init({appid, . . });
    FB.login(function(response){
 if(response.authResponse){ ..(get email code here) 
FB.ui(obj, function callback(response) { 
// this is not creating any dialog and not showing any error in the console
                // am i missing something here? 
            });
 },scope:'scope i need'}); 
```

# html - CSS在浮动时保持高度

> ID：14546248
> 
> 赞同：0
> 
> 时间：2013-01-27T09:57:52.670
> 
> 标签：html, css

我有一个 div，其中有一张具有`float: left`属性的照片，并且文本就在它旁边，如下所示：

```
<div id='1'>
 <img src='img.jpg' width='50%' style='float:left;' />
  This is text next to it<br/><br/>More text
</div> 
```

我不知道图片的尺寸，或者文字的高度，但是文字往往比图片短，导致 div 比图片短（看起来很糟糕）。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:00:45.890

只需添加`overflow: hidden;`到您的第一个`div`.

另外`ids`，`classes`in`CSS`不能从数字开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:07:26.267

我认为最佳解决方案是在最后添加新的 div 并用它清除所有内容。像这样：

第一种情况下的 CSS：

```
#1:after{
    content: "";
    height: 0;
    clear: both;
    display: block; 
} 
```

第二种情况：HTML：

```
<div id='1'>
 <img src='img.jpg' width='50%' style='float:left;'>
  This is text next to it<br><br>More text
  <div class="cl"></div>
</div> 
```

CSS：

```
.cl {
clear: both;
} 
```

或者，如果您想在最旧版本的 IE 中运行，您可以添加：

```
.cl { 
font-size: 0; 
line-height: 0; 
text-indent: -4000px; 
clear: both;
} 
```

# django - Google App Engine：Django 加载装置

> ID：14546249
> 
> 赞同：0
> 
> 时间：2013-01-27T09:58:06.033
> 
> 标签：django, google-app-engine, django-fixtures

通常我们会加载fixtures，比如：
`python manage.py loaddata fixture.yaml`

但是要上传到谷歌数据库，以前在这里建议过：
`python manage.py loaddata remote fixture.yaml`，但是当我尝试时，它说`Unknown command: 'remote'`

我使用 Djangoo 1.4，`- remote_api: on`我的 app.yaml 中有内置插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T10:59:11.787

你快到了。而不是使用

```
python manage.py loaddata remote fixture.yaml 
```

你应该输入

```
python manage.py remote loaddata fixture.yaml 
```

# javascript - 如何加载 Jquery Tiny 滚动条

> ID：14546252
> 
> 赞同：4
> 
> 时间：2013-01-27T09:58:26.640
> 
> 标签：javascript, jquery, html, tinyscrollbar

所以我想自定义一个滚动条，我发现了一个很小的滚动条，它是一个 jquery 插件：

[http://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)

问题是，无论如何我都无法让它工作。我将 Jquery 和 jquery.tinyscrollbar.js 文件包含在与我的 html 和 css 相同的文件夹中，并将它们包含在标题部分中，但我无法让它工作......

当我通过客户端打开文件时，我得到的只是常规外观的滚动条，如下所示：

![在此处输入图像描述](../Images/468750f2254f03ccdecc27d402f44563.png) 这是我的代码：

HTML

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="scrolltest.css" />
    <script src="jquery.js"></script>
    <script src="jquery.tinyscrollbar.js"></script>
    <script>
        $(document).ready(function() 
            {
                $("#chatlist").tinyscrollbar();
            });
    </script>
</head>
<body>
    <div id="chatlist" >
        <ul>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
        </ul>
    </div>
</body>
</html> 
```

CSS

```
 div#chatlist {
        width: 50px;
        height: 140px;
        border: 1px solid black;
        overflow:scroll;
     } 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T10:34:59.627

如[官方网站](http://baijs.nl/tinyscrollbar/)所述，您需要在代码中定义 a`scrollbar` 和 a`viewport`类元素。试试下面的 HTML 代码：

```
 <div id="chatlist">
   <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
   <div class="viewport">
        <div class="overview">
        <ul>
            <li>item</li>
            <li>item</li>
            <li>item</li>
        </ul>
        </div>
    </div>
    </div> 
```

并且不要忘记按照站点中的说明修改您的 CSS。

```
#chatlist { width: 520px; clear: both; margin: 20px 0 10px; }
#chatlist .viewport { width: 500px; height: 200px; overflow: hidden; position: relative; }
#chatlist .overview { list-style: none; position: absolute; left: 0; top: 0; }
#chatlist .thumb .end,
#chatlist .thumb { background-color: #003D5D; }
#chatlist .scrollbar { position: relative; float: right; width: 15px; }
#chatlist .track { background-color: #D8EEFD; height: 100%; width:13px; position: relative; padding: 0 1px; }
#chatlist .thumb { height: 20px; width: 13px; cursor: pointer; overflow: hidden; position: absolute; top: 0; }
#chatlist .thumb .end { overflow: hidden; height: 5px; width: 13px; }
#chatlist .disable{ display: none; }
.noSelect { user-select: none; -o-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T10:43:17.197

使用 tinyscrollbar 实际上需要一些工作。您需要做的事情是： 1\. 您需要定义一个滚动条和一个视口 div 2\. 您需要设置它们的样式 3\. 您应该摆脱 overflow:scroll，因为 tinyscrollbar 不会覆盖溢出功能，并且您' 将在小滚动条旁边获得默认滚动条。

这是您应该使用的代码：

```
 <html>
<head>
    <link rel="stylesheet" type="text/css" href="scrolltest.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js" ></script>
    <script src="jquery.tinyscrollbar.js"></script>
    <script>
        $(document).ready(function () {
            $("#chatlist").tinyscrollbar();
        });
    </script>
    <style>

         #chatlist { width: 50px; height:140px; border:1px solid black;  }
        #chatlist .viewport { width: 50px; height: 140px; overflow: hidden; position: relative; }
        #chatlist .overview { list-style: none; position: absolute; left: 0; top: 0; }
        #chatlist .thumb .end,
        #chatlist .thumb { background-color: #003D5D; }
        #chatlist .scrollbar { position: relative; float: right; width: 15px; }
        #chatlist .track { background-color: #D8EEFD; height: 100%; width:13px; position: relative; padding: 0 1px; }
        #chatlist .thumb { height: 20px; width: 13px; cursor: pointer; overflow: hidden; position: absolute; top: 0; }
        #chatlist .thumb .end { overflow: hidden; height: 5px; width: 13px; }
        #chatlist .disable{ display: none; }
        .noSelect { user-select: none; -o-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; }
    </style>
</head>
<body>
    <div id="chatlist" >
        <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
    <div class="viewport">
        <div class="overview">
            <ul>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
            <li>item</li>
        </ul>
        </div>
    </div>

    </div>

</body>
</html> 
```

# c++ - 在 h 文件中声明的 c++ 静态数组给出警告“已定义但未使用”

> ID：14546253
> 
> 赞同：8
> 
> 时间：2013-01-27T09:58:32.767
> 
> 标签：c++, static, constants, header-files

我很好奇以下内容。我在头文件中声明了一个简单的 C 数组，如下所示：

```
static int userCardsIndexes[INITIAL_CARDS_NUMBER] = {0, 1, 8, 9, 16, 17}; 
```

它给了我一堆警告：

```
: 'userCardsIndexes' defined but not used 
```

尽管我将此文件包含在我的 cpp 文件中并使用此变量。我不明白的第二件事是当我添加`const`这样的说明符时：

```
static const int userCardsIndexes[INITIAL_CARDS_NUMBER] = {0, 1, 8, 9, 16, 17}; 
```

警告消失！谁能给我解释为什么我收到这些警告以及为什么要`const`删除它们？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-27T10:12:05.320

简短的回答是：您在标头中定义一个数组，而不仅仅是声明它。情况不妙。如果您需要在包含标题时访问该数组，则标题中应该有这样的声明：

```
extern int userCardsIndexes[INITIAL_CARDS_NUMBER]; 
```

然后，仅在一个源文件中，将数组定义为：

```
int userCardsIndexes[INITIAL_CARDS_NUMBER] = {0, 1, 8, 9, 16, 17}; 
```

* * *

至于长答案：头文件没有什么“神奇”的。该`#include`指令基本上只是将头文件的全部内容复制到源文件中。所以本质上，你得到的是`userCardsIndexes`在每个源文件中定义的一个新的静态数组；如果未使用此数组，则会收到“未使用的变量”警告。预先设置`const`可能会抑制警告，因为编译器未配置为对`const`未使用的变量发出警告。例如：使用 GCC，查看“-Wunused-variable”的文档：

[http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T10:10:22.600

静态变量对于定义它们的翻译单元是本地的。当您在标题中执行此操作时，您会在包含它的每个 cpp 文件中获得一个单独的副本。可能不是您想要的。编译器显然注意到其中一些副本根本没有使用。

当您添加时，`const`您会遇到不同的情况。在 C++ 中，文件范围内的 const 对象默认也是静态的。所以`const`和`static const`意思是一样的。

常量数组在每个 cpp 文件中也会有一个副本，但这并不重要，因为它总是具有相同的值。

# hibernate - JPA @Embedded 注释在 netbeans 中标记为错误

> ID：14546260
> 
> 赞同：0
> 
> 时间：2013-01-27T09:59:21.157
> 
> 标签：hibernate, jpa, hibernate-annotations

## 在 NETBEANS 中

错误显示在第**2**行：

```
 @Embedded    
    public SchoolDetails getSchoolDetails() {
    return schoolDetails;
     } 
```

> 基本属性只能是以下类型：Java 原始类型、原始类型的包装器、String、java.math.BigInteger、java.math.BigDecimal、java.util.Date、java.util.Calendar、java.sql.Date 、java.sql.Time、java.sql.TimeStamp、byte[]、Byte[]、char[]、Character[]、枚举或任何可序列化类型。嵌入

请注意，类如下

```
package com.chapter3;

import java.io.Serializable;
import javax.persistence.Embedded;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

@Entity
public class School  {

    private int schoolId;
    private String schooleName;
    private SchoolDetails schoolDetails;

    @Embedded    
    public SchoolDetails getSchoolDetails() {
        return schoolDetails;
    }

    public void setSchoolDetails(SchoolDetails schoolDetails) {
        this.schoolDetails = schoolDetails;
    }

    @Id
    @GeneratedValue
    public int getSchoolId() {
        return schoolId;
    }

    public void setSchoolId(int schoolId) {
        this.schoolId = schoolId;
    }

    public String getSchooleName() {
        return schooleName;
    }

    public void setSchooleName(String schooleName) {
        this.schooleName = schooleName;
    }
} 
```

```
package com.chapter3;

import javax.persistence.Embeddable;

@Embeddable
public class SchoolDetails {

    private String schoolAddress;
    private boolean isPublicSchool;
    private int studentCount;

    public boolean isIsPublicSchool() {
        return isPublicSchool;
    }

    public void setIsPublicSchool(boolean isPublicSchool) {
        this.isPublicSchool = isPublicSchool;
    }

    public String getSchoolAddress() {
        return schoolAddress;
    }

    public void setSchoolAddress(String schoolAddress) {
        this.schoolAddress = schoolAddress;
    }

    public int getStudentCount() {
        return studentCount;
    }

    public void setStudentCount(int studentCount) {
        this.studentCount = studentCount;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:59:21.157

问题是netbeans中的一个错误

[网豆问题](http://netbeans.org/bugzilla/show_bug.cgi?id=167419)

并且我必须实现可序列化接口的解决方案并且错误消失了。

# c - C缓冲区溢出预防，多维数组中的安全上限检查

> ID：14546264
> 
> 赞同：1
> 
> 时间：2013-01-27T09:59:46.103
> 
> 标签：c, nullreferenceexception, buffer-overflow, isnull

考虑这段 C 代码：

```
int main(int argc, char *argv[])
{
        char ***map = malloc(sizeof(char *) * 4);
        char *a[] = { "hello", "world" };
        char *b[] = { "foo", "bar" };
        char *c[] = { "test", "last" };
        map[0] = a;
        map[1] = b;
        map[2] = c;

        char *p = NULL;
        int offset = 30; // buffer exploited!

        p = **map + offset;
        if (!p)
                puts("err"); // not detected?
        else
                printf("%p %s\n", p, p);

        return 0;
} 
```

如何（高效安全）获取map的上界地址，避免bufferoverflow错误，因为如果我`char **p = map[random_offset];`直接访问最终会导致运行时错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:04:22.307

默认情况下，不检测越界访问。你必须自己处理。

您认为越界指针具有空值的假设是错误的，并且以下条件不正确。

```
 if (!p)
            puts("err"); // not detected? 
```

*在 C 中允许*使用指针算术访问随机内存位置，但无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:04:13.193

您必须跟踪自己访问的地址。这可以通过使用通过数组索引访问而不是使用指针算法来缓解。（例如`map[entryID][0]`键或`map[entryID][1]`值）。这使得检查 entryID 是否超过最大索引变得容易。0-1 根据合同始终有效。

**更新：** 如果您想跟踪数组统计信息（例如最大长度、有效条目数等），您必须自己处理。您可以通过将映射指针与所需的统计字段一起嵌入到结构中来实现此目的：

```
typedef struct MyMap {
    char ***map;
    unsigned int capacity;
    unsigned int last_index;
}tMyMap;

//...

void useTheMap(tMyMap *map);

// ...

    tMyMap mapInstance;

    mapInstance.map = malloc(...);
    mapInstance.capacity = ...;
    mapInstance.last_index = ...;

    useTheMap(&mapInstance);

    // ...

    for (int i = 0;i < mapInstance.last_index;i++) {
        //...
    } 
```

当然，您必须自己更新统计字段。但这将使您有机会在运行时以更新统计字段的开销为代价找出地图的容量......（这实际上是其他 - 更方便 - 其他语言中的字符串实现的工作方式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T22:03:12.140

您已为地图中的哨兵分配空间，但未为其分配值。要么，使用类似`memset(...)`或`map [3] = (char **) 0;`强制终止符。

然后，您可以跟踪地图的长度，或者从头开始线性扫描，直到到达匹配或终止符才停止。Junix 响应提供了第一种选择。如果列表没有排序，那么无论如何都需要线性搜索，并且长度不会真正有帮助。

对 in 类型错误的观察`malloc(...)`是正确的 - 但是，该语言无法根据 C 中的 LHS 值验证类型。幸运的是`char *`，`char **`它们都是指针类型，并且具有相同的大小。

# c# - 如何写入多个跟踪源

> ID：14546274
> 
> 赞同：0
> 
> 时间：2013-01-27T10:01:00.853
> 
> 标签：c#, trace

您如何写入多个跟踪源，而不是：

```
tss.ForEach(x => x.WriteLine()); 
```

（假设`ForEach`扩展方法）

即有没有办法组成痕迹？还是我应该只写一个辅助方法/使用foreach？

# php - 多页的 TCPDF 和 FPDI

> ID：14546275
> 
> 赞同：4
> 
> 时间：2013-01-27T10:01:04.007
> 
> 标签：php, tcpdf, fpdi

这看起来是最简单的事情，但我无法让它工作。

我需要将文本添加到多页 pdf 的第一页（可以是任意页数）

在两页 pdf 上使用此代码（没有 for 循环，只使用 $pdf->importPage(2)）我最终得到两页，但第二页是第一页的重复。文本只写在第一页上，这很好，但我需要输出 pdf 中包含的所有页面。这是我的代码

```
// Original file with multiple pages 
$fullPathToFile = 'full/path/to/file.pdf';

class PDF extends FPDI {

    var $_tplIdx;

    function Header() {

        global $fullPathToFile;

        if (is_null($this->_tplIdx)) {

            $this->setSourceFile($fullPathToFile);
            $this->_tplIdx = $this->importPage(1);

        }
        $this->useTemplate($this->_tplIdx);

    }

    function Footer() {}

}

// initiate PDF
$pdf = new PDF();
$pdf->setFontSubsetting(true);

// add a page
$pdf->AddPage();

// The new content
$pdf->SetFont("helvetica", "B", 14);
$pdf->Text(10,10,'Some text here');

// How to get the number of pages of original pdf???
// $numPages = $pdf->getNumPages(???);

// Carry on adding all remaining pages starting from page 2
for($i=2;$i<=$numPages;$i++) {
    // Add another page
    $pdf->AddPage();
    // Do I need to declare the source file here?
    // $pdf->setSourceFile($fullPathToWD);
    $pdf->importPage($i);
}

// Output the file as forced download
$pdf->Output('theNewFile.pdf', 'D'); 
```

**文档链接**

TCPDF 类 [http://www.tcpdf.org/doc/code/classTCPDF.html#a5171e20b366b74523709d84c349c1ced](http://www.tcpdf.org/doc/code/classTCPDF.html#a5171e20b366b74523709d84c349c1ced)

FPDI 课程 [http://www.setasign.de/support/manuals/fpdi/](http://www.setasign.de/support/manuals/fpdi/)

FPDF_TPL 类 [http://www.setasign.de/support/manuals/fpdf-tpl/](http://www.setasign.de/support/manuals/fpdf-tpl/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T14:56:45.627

解决了我的问题...

```
// Original file with multiple pages 
$fullPathToFile = 'full/path/to/file.pdf';

class PDF extends FPDI {

    var $_tplIdx;

    function Header() {

        global $fullPathToFile;

        if (is_null($this->_tplIdx)) {

            // THIS IS WHERE YOU GET THE NUMBER OF PAGES
            $this->numPages = $this->setSourceFile($fullPathToFile);
            $this->_tplIdx = $this->importPage(1);

        }
        $this->useTemplate($this->_tplIdx);

    }

    function Footer() {}

}

// initiate PDF
$pdf = new PDF();
$pdf->setFontSubsetting(true);

// add a page
$pdf->AddPage();

// The new content
$pdf->SetFont("helvetica", "B", 14);
$pdf->Text(10,10,'Some text here');

// THIS PUTS THE REMAINDER OF THE PAGES IN
if($pdf->numPages>1) {
    for($i=2;$i<=$pdf->numPages;$i++) {
        $pdf->endPage();
        $pdf->_tplIdx = $pdf->importPage($i);
        $pdf->AddPage();
    }
}

// Output the file as forced download
$pdf->Output('theNewFile.pdf', 'D'); 
```

您可以通过添加此行的第一部分来获得页数

```
$this->numPages = $this->setSourceFile($fullPathToFile); 
```

并查看倒数第二个代码块 - for 循环添加了剩余的页面。

不知道是不是应该这样处理？我在几个地方读到它甚至不可能实现这一点，文档中也没有提供代码。但是，这有效，希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-16T14:15:23.333

我对此有点挣扎，并试图想出最简单的方法来将一些文本添加到多页文档的最后一页。这是对我有用的非常简单的代码：

```
require_once('fpdf/fpdf.php');
require_once('fpdf/fpdi.php');
$pdf = new FPDI();
$fullPathToPDF = '/usr/local/common/my.pdf';
$pageCount = $pdf->setSourceFile($fullPathToPDF);
for ($i = 1; $i <= $pageCount; $i++) {
    $pdf->importPage($i);
    $pdf->AddPage();
    $pdf->useTemplate($i);
}
$pdf->SetFont('Helvetica');
$pdf->SetXY(110, 225);
$pdf->Write(8, 'A complete document imported with FPDI');
$pdf->Output($fullPathToPDF); 
```

只需将文件的完整路径更改为您拥有多页 PDF 的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-10T09:26:12.740

```
$pdf = new TCPDF('P', 'mm', 'A4', true, 'UTF-8', false);
...
$pdf->SetMargins(10, 10, 10);
$pdf->SetAutoPageBreak(true, 10);
foreach($array as $item)
{
  $pdf->AddPage(); //add new page for new item
  $txt = some_long_long_text;
  $pdf->Write(0, $txt, '', 0, 'C', true);
  $pdf->endPage(); //do end of page
  $pdf->lastPage(); //set cursor at last page, because autopagebreak not do it
} 
```

例如，您有 10 个学生，您需要为每个学生创建简历。在考试中，一份简历有 3 页。因此，您将获得 30 页的 pdf，并带有正确的文本。SetAutoPageBreak(true, 10)，不在最后一页设置光标，所以需要用函数手动设置`$pdf->lastPage();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T13:18:13.803

该代码不起作用，试试这个：

```
$pdf = new PDI();
$pdf->AddPage();
$pdf->setSourceFile('zzz.pdf');
$pdf->numPages = $pdf->setSourceFile('zzz.pdf');
$tplIdx = $pdf->importPage(1);
$pdf->useTemplate($tplIdx, 10, 20, 200);
    if($pdf->numPages>1) {
for($i=2;$i<=$pdf->numPages;$i++) {
    $pdf->AddPage();
    $tplIdx = $pdf->importPage($i);
    $pdf->useTemplate($tplIdx, 10, 20, 200);
}
} 
```

# sql - 获取记录关系 1---N 可以为空并在子表上过滤

> ID：14546276
> 
> 赞同：0
> 
> 时间：2013-01-27T10:01:10.320
> 
> 标签：sql, oracle

我想从与 fk 链接的两个表中获取记录。此 fk 可以为 null，并且子表必须具有过滤器。我用简单的例子来解释它。

```
Table Poet
IdPoet Number(5) 
NameVarchar2(250)

Table Poem 
IdPoem Number(5) 
IdPoet Number(5) FK 
Language Number(1) 
Text Varchar2(2000) 
```

> FK 是 Poet 和 Poem
> Poet-1-------------N0---Poem的关系
> 
> Poem.IdPoet 可以为空。

我需要从 Poet 那里得到所有没有诗歌的记录，以及有语言 = 1 或语言 = 2 的诗歌的诗人。语言 1 比 2 更具限制性。这意味着如果有一个诗人有 2 首诗（一个写在语言 1 上，另一个写在语言 2 上）必须只显示语言 1 的记录。

```
 SELECT *
    FROM POET, POEM
    WHERE POET.IDPOET = POEM.IDPOET(+)
    AND
    (
    (POEM.LANGUAGE IS NOT NULL AND POE.LANGUAGE = 1) OR
    (POEM.LANGUAGE IS NOT NULL AND POE.LANGUAGE = 2) OR
    (POEM.LANGUAGE IS = 1) OR
    (POEM.LANGUAGE IS = 2)
    ) 
```

此选择显示没有诗歌的诗人，有 1 首语言 1 的诗歌或有 1 首语言 2 的诗歌。问题是当诗歌有 2 首诗歌，1 首语言 1 和其他语言 2 时，则显示 2 条记录，并且我只想在语言 1 上显示带有诗歌的记录，因为它比 2 更具限制性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:12:13.667

不确定这是否有效，但想法是创建一个所有诗人的列表，如果他们写了一些东西，那就是他们所有的诗。

Poets-table 与诗歌相连以包括所有诗人

```
select distinct poets.Name,
       coalesce (l1.Text, l2.Text,'NONE') as Poem
  from Poets 
       left join (
         Poems l1
         full join Poems l2 
           on l1.IdPoet = l2.IdPoet
         )
         on Poets.IdPoet = l1.IdPoet

where 1l.Language = 1 and l2.Language=2 
```

（未经测试）

但是，如果诗人用一种语言写过不止一首诗，则两者都会显示。我不知道这是否是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:33:34.330

您可以使用 Oracle 的[ROW_NUMBER()](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions154.htm)分析函数轻松完成此操作：

```
SELECT Name, Text FROM (
  SELECT PT.Name, PM.Text, ROW_NUMBER() OVER (PARTITION BY PT.IdPoet ORDER BY PM.Language) RN
  FROM POET PT
  LEFT JOIN POEM PM ON (PT.IdPoet = PM.IdPoet)
  WHERE PM.Language IS NULL OR PM.Language IN (1, 2)
) WHERE RN = 1 
```

请注意，如果一个诗人有多首语言 1 的诗歌，它只会选择从数据库中首先返回的任何一首。如果需要，您可以先在分区子句中添加另一个字段以`ORDER BY`按诗名等排序。

[SQL小提琴](http://sqlfiddle.com/#!4/a1ecd/7)

* * *

**编辑：**此外，如果您想要 alzaimar 提出的相同行为（即显示语言 1 中的所有诗歌），您可以使用该`DENSE_RANK()`功能而不是`ROW_NUMBER()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T12:23:31.777

如果您想为每个诗人选择*每*首具有*最低*语言价值的诗歌的信息，以及没有诗歌的诗人，则此查询应该执行以下操作：

```
SELECT * FROM Poet P
LEFT JOIN Poem ON Poem.IdPoet = P.IdPoet
where Poem.Language IS NULL
OR Poem.Language =
    (SELECT MIN(Language) As L1
     FROM Poem
     WHERE Poem.IdPoet = P.IdPoet
     GROUP BY Poem.IdPoet) 
```

这里假定语言的最小值为 1，并且查询也将使用高于 2 的语言值。

# webview - Android WebView 中的“tel:”功能不适用于 HTC Desire S (Android 4.0.4)

> ID：14546280
> 
> 赞同：1
> 
> 时间：2013-01-27T10:01:37.610
> 
> 标签：webview, android, tel

我在 Android WebView 中有这个链接：

```
<a href="tel:XXXXXXX" onClick="_gaq.push(['_trackEvent', 'event_category', 'event_action', 'event_label']);"><img src="call.png" width="65px" height="35px"></a> 
```

当我使用 Samsung S2 ( `Android 4.0.4`)、HTC Wildfire ( `Android 2.2.1`) 或 Sony Xperia Go ( `Android 2.3.7`) 单击它时，电话号码会按预期出现在拨号器中。

当我使用 HTC Desire S ( `Android 4.0.4`) 单击它时，没有任何反应。我已经用两部 HTC Desire S 智能手机进行了尝试。当 HTC Desire S 有`Android 2.3.5`.

有什么想法可以让它发挥作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:42:27.543

我以前遇到过，但我不记得在哪个手机上。我相信这是三星。我们对此无能为力。这可能是因为手机制造商在其 Android 版本上搞砸了。所以不要太担心。如果它适用于纯 Android 4.0（模拟器或库存设备），那不是你的错。怪那些想在 Android 上加个皮肤的白痴。

# windows - 是否可以添加带有递归标志的 git 子模块？

> ID：14546282
> 
> 赞同：1
> 
> 时间：2013-01-27T10:02:06.207
> 
> 标签：windows, git, git-submodules

我正在向我的项目添加一个包含另一个 git 存储库的子模块。

要获取我运行的模块：

```
git submodule add git://github.com/biakaveron/debug-toolbar.git modules/debug-toolbar 
```

然后跑：

```
git submodule update --init --recursive 
```

这产生了这个错误：

```
fatal: Not a git repository: ../../../../../../..//d/websites/project/.git/modules/modules/debug-toolbar/modules/vendor/firephp
Failed to recurse into submodule path 'modules/debug-toolbar' 
```

我以前也遇到过类似的问题。以前我只是添加了子模块，然后使用递归标志 ( ) 重新克隆了项目`git clone --recursive project.git`。但是，如果我可以让子模块首先递归地拉入会更容易。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:15:21.423

一个可能的原因可能是[github.com/cadorn/firephp-libs](https://github.com/cadorn/firephp-libs)提到：

> 该项目已移至以下存储库：

```
https://github.com/firephp/firephp
https://github.com/firephp/firephp-core 
```

所以你可能想先更新`.gitmodules`文件`debug-toolbar`（在 a 之后`git submodule update --init`，没有`--recursive`部分），*然后*，再试一次`git submodule update --init --recursive`）

OP做了：

> 提交，然后是递归克隆 - 有效。

* * *

原答案：

似乎其中一个子模块（在[`.gitmodules`文件](http://git-scm.com/docs/gitmodules.html)中）的路径定义不正确：
作为*相对*`git submodule --recursive`路径，当通过从父存储库完成的命令克隆/更新时，它不会成功解析，所述相对路径是无效的.

# c++ - 子类访问彼此的成员函数

> ID：14546289
> 
> 赞同：1
> 
> 时间：2013-01-27T10:03:56.807
> 
> 标签：c++, inheritance

我正在做一个经过深思熟虑的项目，相当糟糕。我有访问彼此成员函数的子类。情况如下：

```
class A {
public:
    class B;
    class C;
};

class A::B {
public:
    void f() {
        C:g();
    }
}
class A::C {
public:
    void g() {
        B:f();
    }
} 
```

显然，这段代码会遇到各种错误，这里列出的太多了。我的问题是，这种情况的解决方案是什么？是继承吗？如果是这样，怎么做？我还有其他方法可以保留 B 类和 C 类的“相互作用”性质吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:14:18.283

如果你的意思是`C:g()`--> `C::g()`，`B:f()`-->`B::f()`

除非这些成员函数是静态的，否则您不能在没有对象的情况下调用成员函数。可能彼此的指针可以解决您的问题？ *我引入指针是因为否则我需要写一些东西来帮助解决循环包含问题。* :)

```
#include <memory>

class A::B {
public:
    void f() {
        c_->g();
    }
  std::unique_ptr<C> c_;
}
class A::C {
public:
    void g() {
        b_->f();
    }
  std::unique_ptr<B> b_;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T10:06:47.303

将方法定义移出类声明，因此两个类都将被声明并且它们的方法彼此可见

# c# - 如何从服务层返回多个模型？

> ID：14546290
> 
> 赞同：0
> 
> 时间：2013-01-27T10:04:00.103
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

假设我有 2 张桌子，`Page`并且`Application`.

页面总是属于一个应用程序，所以`Application.ID = P.ApplicationID.`

我有 2 个域模型类`Page`和`Application`. 现在在我的服务层中，我需要获取一个页面及其`Application`属性。那么，如何处理这种情况呢？是否需要创建复合模型？我搜索了很多，但找不到任何东西，我被困在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:34:19.957

由于页面始终与应用程序相关联，因此您的应用程序对象可能具有`List<Page> Pages`属性。如果是这样，那么您可以返回您的 Application 对象，并在该列表中填充适当的 Page。

如果您的 Application 不包含 List Pages 属性，那么从您的（简短）解释来看，它可能应该是合乎逻辑的。如果您可以修改对象以包含一个列表，那么您就处于与上述相同的位置并且您很好。

如果由于某种原因，它没有 List Pages 属性，并且您不能修改它以包含一个（也许从大局来看它没有意义，也许您没有控制该对象），那么您是正确的创建一个简单的复合类，它有两个属性 Page 和 Application。

# python - HtmlUnit硒python Errno 111

> ID：14546291
> 
> 赞同：0
> 
> 时间：2013-01-27T10:04:02.317
> 
> 标签：python, django, selenium, htmlunit

我正在尝试`HtmlUnit`在我的`Django`应用程序中使用 selenium。这是我的程序：

我从后台开始：java -jar `selenium-server-standalone-2.27.0.jar`bg

我使用这段代码：

```
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
from selenium.webdriver.remote.webdriver import WebDriver

url = "www.google.com"
driver = WebDriver("http://127.0.0.1:4444/wd/hub", DesiredCapabilities.HTMLUNITWITHJS)
driver.get(url)
text = driver.page_source
... 
```

我的问题是我总是收到`urlopen`错误 [Errno 111] Connection denied"。你知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:10:29.083

我可以使用独立服务器的最新版本和 selenium python 绑定（目前为 2.31）运行您的代码而不会出错。

我通常在后台启动服务器：

```
java -jar selenium-server-standalone-2.31.0.jar & 
```

然后从 python 绑定的第 2 版开始，您可以使用更简单的：

```
import selenium.webdriver as webdriver
driver = webdriver.Remote(desired_capabilities=webdriver.DesiredCapabilities.HTMLUNITWITHJS)
driver.get("http://www.google.com") 
```

只需确保后台服务器实际上正在运行，通过打开浏览器并输入 url 来测试它

```
http://127.0.0.1:4444/wd/hub/static/resource/hub.html 
```

# active-directory - AD ERROR 喜欢：错误代码[80070005] MSG[访问被拒绝。]

> ID：14546295
> 
> 赞同：1
> 
> 时间：2013-01-27T10:05:17.290
> 
> 标签：active-directory, locked

最近，我尝试测试用户是否在AD服务器中被锁定，但是得到这个错误信息`ERROR CODE[80070005] MSG[Access is denied. ]`，我已经登录到AD服务器并发现用户没有被锁定......

我很抱歉知道发生这种情况的原因，任何想法都非常感谢！

非常感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:10:43.123

什么操作导致了这个错误？该操作是否适用于其他用户？管理员用户？如果您在 AD 中更改组成员身份，请记住重新登录机器。

# xaml - 转换器无法将“Windows.Foundation.String”类型的值转换为“ImageSource”类型

> ID：14546296
> 
> 赞同：2
> 
> 时间：2013-01-27T10:05:21.180
> 
> 标签：xaml, windows-8

**这适用于我的 Windows 8 应用程序：**

在我的对象中，我有一个字符串属性，其中包含我要使用的图像的路径。

```
public String ImagePath 
```

在我的 XAML 中，我设置了一个带有以下绑定的图像标记：

```
<Image Source="{Binding ImagePath}" Margin="50"/> 
```

当我引用包含在我的项目中（在 Asset 文件夹中）的图像时，图像会正确显示。路径是：`Assets/car2.png`

但是，当我引用用户选择的图像（使用 FilePicker）时，我得到一个错误（**并且没有图像**）。路径是：`C:\Users\Jeff\Pictures\myImage.PNG`

> 转换器无法将“Windows.Foundation.String”类型的值转换为“ImageSource”类型

只是为了添加更多信息。当我使用文件选择器时，我将文件位置转换为 URI：

```
 Uri uriAddress =  new Uri(file.Path.ToString());
        _VM.vehicleSingle.ImagePath = uriAddress.LocalPath; 
```

**更新：**

我还将此图像路径保存到独立存储中。我认为这就是问题所在。我能够保存所选文件的路径，但是当我在重新加载独立存储时尝试绑定它时，它不起作用。

因此，如果我不能在应用程序目录之外使用图像。有没有办法可以保存该图像并将其添加到目录中？

我尝试为我的模型创建一个 BitmapImage 属性，但现在我收到错误消息，指出它无法序列化 BitmapImage。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T05:45:32.160

你应该使用转换器

```
public class ImageConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            MemoryStream memStream = new MemoryStream((byte[])value,false);
            BitmapImage empImage = new BitmapImage();
            empImage.SetSource(memStream);
            return empImage;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:15:10.157

您不能使用指向应用程序目录之外的文件路径。您将需要读取从文件选择器获得的 StorageFile 流，并将该流分配给图像源 - 因此，除非您更改模型，否则绑定非常困难，改为具有 imagesource 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T20:09:41.930

我最近做了一些绑定到 ImageSource 的工作。

```
public System.Windows.Media.ImageSource PhotoImageSource
{
    get
    {
         if (Photo != null)
         {
              System.Windows.Media.Imaging.BitmapImage image = new System.Windows.Media.Imaging.BitmapImage();
              image.BeginInit();                    
              image.StreamSource = new MemoryStream(Photo);
              image.EndInit();

              return image as System.Windows.Media.ImageSource;
          }
          else
          {
               return null;
          }
     }
} 
```

我的“照片”是存储在字节 [] 中的图像。您可以将图像转换为 byte[] 或者尝试使用 FileStream 代替（我没有使用 FileStream 进行测试，所以我不能说它是否会工作）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T18:33:30.053

如前所述，您不能使用绑定直接访问文件系统，即使您通过文件选择器授予访问权限。查看[开发中心的](http://dev.windows.com)[XAML 图像示例](http://code.msdn.microsoft.com/windowsapps/0f5d56ae-5e57-48e1-9cd9-993115b027b9)，了解您可以使用的技术。

简而言之，您将使用[SetSourceAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.bitmapsource.setsourceasync)将文件放入[BitmapImage](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.bitmapimage)，然后您可以将其用作绑定源。

# ios - monotouch 库和我使用的一些 3rd 方库中的重复符号

> ID：14546297
> 
> 赞同：2
> 
> 时间：2013-01-27T10:05:25.917
> 
> 标签：ios, objective-c, xamarin.ios, static-libraries

我正在使用 Monotouch 开发 iPhone 应用程序。在我的应用程序中，我必须使用第 3 方提供的静态库。这个库是为 Xcode 编写的，是用 Objective-C 编写的。我使用绑定项目模板将它与 Monotouch 绑定。当我将结果添加`dll`到我的项目时，它编译得很好，但是当我使用库中的一个类时，它无法编译并出现以下错误：

```
Duplicate symbol _DeleteCriticalSection 
```

那么我能做什么呢？有什么办法可以消除冲突吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:10:35.953

我在 FAT 库中看到过类似的事情，其中​​一些文件被重复，导致对象重复。您可以尝试查看这是否是同一个问题，例如，如果您的库被命名`mystaticlibrary.a`

```
$ nm mystaticlibrary.a | grep DeleteCriticalSection 
```

现在，如果您有一个 FAT 库（多个体系结构），则多次使用该符号是正常的。要查看是否是这种情况，请执行以下操作：

```
$ file mystaticlibrary.a 
```

你应该有每个架构的符号。如果您看到更多符号（例如 3x`DeleteCriticalSection`但只有 2 个拱形），那么您会遇到类似的问题。

修复（如果是同样的问题）是拆分 FAT 库（`lipo`工具），然后是每个体系结构特定的库，然后重新合并所有内容（arch 然后是 FAT）。

您最好的选择可能是联系您的库供应商并要求他提供一个固定的库（构建过程中可能有问题）。给他们上面的命令输出，他们很可能会找出问题所在。

# jsp - 设置 c:set [JSTL] 的值时如何设置整数会话

> ID：14546299
> 
> 赞同：0
> 
> 时间：2013-01-27T10:05:51.673
> 
> 标签：jsp, jstl, el

我有这个代码

```
<c:set var="salary" scope="session" value='<%= session.getAttribute( "theName" ) %>' />
                    <c:if test="${salary == 121}">
                        <a href="create-news-item">Create News Item</a>
                        <br />
                    </c:if> 
```

当我将薪水的值更改为 121 时，它可以工作。但是当我调用该值然后将其设置为工资值时，链接不显示...如何正确地将会话称为整数值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:42:48.200

您不应该混合*使用 scriptlet*和 EL。这是没有意义的。您的*scriptlet*方法只会将其隐式转换为`String`via `Object#toString()`call ，就像在`out.print(Object)`由`<%= %>`.

在这种特殊情况下，您可以使用

```
<c:if test="${theName == 121}">
    <a href="create-news-item">Create News Item</a>
    <br />
</c:if> 
```

默认情况下，EL 已经在页面、请求、会话和应用程序范围内搜索属性。

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

# android - Android 跨活动图像缓存

> ID：14546309
> 
> 赞同：0
> 
> 时间：2013-01-27T10:07:04.190
> 
> 标签：android

假设有几个活动具有相同的可绘制对象，例如 drawable-mdpi 资源。我想知道这些资源是否会被缓存并在后续活动中重用。它是否优化了一种方式，以便不会为每个活动在堆中加载相同的可绘制对象。

PS 我正在编写一个具有 2 级深度导航的应用程序，并且我正在使用单个活动来处理带有片段的两个级别。我只是想知道这种方法在堆负载冗余方面是否有任何好处。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:35:27.357

如果你将一个drawable加载到一个Activity内部的ImageView上，加载的drawable将链接到Activity视图层次结构中新绑定的视图。因为每个 Activity 的 View 层次结构都与相应的 Activity 密切相关，这意味着它的内容在内存中具有不同的位置。我不明白你怎么能改变这一点。

# windows-phone-8 - 用于 Windows Phone 8 应用程序开发的 F# 模板

> ID：14546314
> 
> 赞同：5
> 
> 时间：2013-01-27T10:08:02.857
> 
> 标签：windows-phone-8, windows-phone

是否有任何用于 Windows Phone 8 开发的 F# 模板？我知道 Windows Phone 7/7.1 有一个 F# 模板，可以从 Visual Studio Gallery 下载。是否有适用于 Windows Phone 8 的 F# 模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:52:35.407

您必须创建一个 F# 可移植库，然后从 C# Windows Phone 项目中引用它

# php - 如何让我的 preg_replace 只查找不在标签内的单词？

> ID：14546316
> 
> 赞同：2
> 
> 时间：2013-01-27T10:08:17.713
> 
> 标签：php, regex, preg-replace, acronym

在 PHP 中，我有一个字符串 $string 和一个数组 $acronyms（格式为“UK”=>“United Kingdom”）。

现在我想用一些 HTML 标签替换 $string 中的所有首字母缩写词。例如`Hello UK`应该变成`Hello <acronym title="United Kingdom">UK</acronym></pre>`

我这样做：

```
foreach($acronyms as $acronym => $tooltip){
     $string = preg_replace('/'.$acronym.'/i', ''.$acronym.'', $string);
}
```

问题是：假设我有一个文本`Hello UK`和一个数组，用“United Kingdom”替换“UK”，用“RandomWord”替换“Kingdom”。然后文本将替换为`Hello <acronym title="United <acronym title="RandomWord">Kingdom</acronym>">UK</acronym>`显然是混乱的。

所以问题是：**如何让我的 preg_replace 只查找不在`<acronym>`标签内的单词？**（既不在标题属性中，也不在标签本身内）

编辑：根据响应进行第二次尝试（因为我无法回复代码）。仍然是同样的问题，首字母缩略词中的文本被第二次替换......

```
`foreach($acronyms as $acronym => $tooltip){
        $acronyms[$acronym] = '<acronym title="'.$tooltip.'">'.$acronym.'</acronym>';
}
$string = str_ireplace(array_keys($acronyms), array_values($acronyms), $string);`
```

* * *

 `## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:56:54.717

您可以使用`strtr()`. 执行替换后它不会重新扫描字符串：

```
foreach ($acronyms as $acronym => $tooltip) {
    $acronyms[$acronym] = sprintf('<acronym title="%s">%s</acronym>',
        htmlspecialchars($tooltip),
        htmlspecialchars($acronym)
    );
}

echo strtr($str, $acronyms); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:13:55.290

不要试图用正则表达式做所有事情：

1.  使用 HTML/XML 解析库解析您的 HTML。
2.  遍历您的 HTML 标签，替换您必须替换的内容。
3.  要求您的“html 解析库”将其转换回“HTML 字符串”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T11:46:10.473

这是正则表达式版本的尝试：

```
foreach($acronyms as $acronym => $tooltip){
    $rexp = '/' . $acronym . '(?!((?!<acronym).)*<\/acronym>)/i';
    $string = preg_replace($rexp, ''.$acronym.'', $string);
} 
```

似乎对我有用。它执行以下操作：

1.  将 $acronym 变量与否定前瞻匹配...
2.  可以找到结束首字母缩略词标记的位置
3.  但是当一个首字母缩写词标签在它之前时停止前瞻。

最终，这只匹配不在首字母缩略词标签内的地方（包括标题等所有属性）。

这是它的一个例子：[gSkinner regex example](http://gskinner.com/RegExr/?33i4g)`

# c++ - 模板的前向声明

> ID：14546321
> 
> 赞同：0
> 
> 时间：2013-01-27T10:10:19.317
> 
> 标签：c++, templates

我不喜欢使用前向声明：

```
struct A;

struct B
{
   A* a;
}

// Implementation 
```

我习惯做类似的事情：

```
struct B
{
   struct A* a;
} 
```

但是，当我尝试使用模板类时遇到问题：

```
template<typename T>
struct A
{
    struct B<T>* _t;
};

template<typename T>
struct B
{
    T _t;
}; 
```

编译器告诉我：

```
test.cpp:4:12: error: 'B' is not a template
test.cpp:8:8: error: 'B' is not a template type 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:46:44.397

两步。

第 1 步：在结构 A 之前定义结构 B

第 2 步：像前向声明一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:43:35.120

带有代码的双 Vigneshwaren 注释：模板结构 B { T _t; };

```
template<typename T>
struct A
{
    struct B<T>* _t;
}; 
```

# c# - 最奇怪的组合框异常：GeneratorPosition '-1,1'“传递给 Remove 的偏移量不等于 0”。参数名称：位置

> ID：14546325
> 
> 赞同：7
> 
> 时间：2013-01-27T10:10:40.913
> 
> 标签：c#, silverlight

老实说，我不知道这里发生了什么，我只能在整个互联网的几个特定地方找到这个错误。我正在使用 Silverlight4。我有一个绑定到可观察集合的组合框。可观察的集合中有两个东西。如果我尝试将组合框的 selectedindex 设置为 0，它可以正常工作，但如果我尝试将其设置为 1，则会出现异常：

"GeneratorPosition '-1,1' "传递给 Remove 的偏移量不等于 0"。参数名称：位置"

..有什么想法吗？我发现的唯一真正有用的参考是[http://qa.social.msdn.microsoft.com/Forums/en-US/silverlightgen/thread/e6e07c42-4d64-4973-965d-c4b6dd32cfd9](http://qa.social.msdn.microsoft.com/Forums/en-US/silverlightgen/thread/e6e07c42-4d64-4973-965d-c4b6dd32cfd9)它似乎表明它是Silverlight 原生的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T20:23:23.537

对于那些偶尔遇到这个问题的谷歌用户，我不记得我是如何解决这个问题的，但它最终变得很愚蠢，比如将组合框设置`ItemsSource`为`null`，将新的设置为`ObservableCollection`等于旧的，然后将新的分配给组合框的`ItemsSource`.

真的，我认为这归结为 Silverlight 有点错误。我很好奇如果有人想去使用反射器，为什么会发生这种情况，但以上内容应该有所帮助。

# jsf-2 - 将组件添加到 UITab

> ID：14546328
> 
> 赞同：0
> 
> 时间：2013-01-27T10:10:49.620
> 
> 标签：jsf-2, richfaces

我要疯了，因为我有这个问题

我有这个菜单组件

```
<rich:panelMenuItem label="Users" name="Users"  action="#{tabsBean.createTabs('tab Users')}" render="tabs" />       

   <rich:panel>
      <h:panelGrid id="tabs" binding="#{tabsBean.panelGrid}"/>
   </rich:panel> 
```

当单击用户项目菜单时添加一个新选项卡

```
@ManagedBean
@SessionScoped
public class TabsBean {

private HtmlPanelGrid panelGrid;
private UITabPanel tabPanel;
private List<UITab> tabsList;
private Application application;

public TabsBean() {

    tabsList = new LinkedList<UITab>();
    FacesContext context = FacesContext.getCurrentInstance();
    application = context.getApplication();
    tabPanel = (UITabPanel)application.createComponent(UITabPanel.COMPONENT_TYPE);
    tabPanel.setSwitchType(SwitchType.ajax);

}

public void createTabs (String name){       

    UITab tab = new UITab();
    tab = (UITab)application.createComponent(UITab.COMPONENT_TYPE);
    tab.setName(name);
    tabPanel.getChildren().add(tab);

    //I would add here a component to my new tab

    panelGrid.getChildren().add(tabPanel);

} 
```

所以一切正常，但现在我想将组件添加到新选项卡，例如下表

```
 <rich:extendedDataTable id="UsersTable" value="#{userController.allUsers}" var="user" />
        <rich:column>
            <f:facet name="header">Id</f:facet>
            <h:outputText value="#{user.id}" />
        </rich:column>
        <rich:column>
            <f:facet name="header">Name</f:facet>
            <h:outputText value="#{users.name}" />

        </rich:column>
    </rich:extendedDataTable> 
```

我能怎么做？

# java - 在用 Java 渲染之前更新对象位置？

> ID：14546330
> 
> 赞同：0
> 
> 时间：2013-01-27T10:11:00.727
> 
> 标签：java, image, loops, rendering, flicker

我遇到的问题是我的渲染循环。我的应用程序是一系列“平铺”对象，每个对象都有一个 x 和 y 坐标和图像。当程序启动时，它会在屏幕上创建一个 10x10 的这些图块网格。但是，并非所有的方块都可以同时看到，因此您可以使用箭头键在它们周围平移。当按下该键时，它使用 for 循环循环遍历所有当前渲染的图块（存储在 ArrayList 中）并将它们全部移动 16 个以适当的方向。问题是一些瓷砖闪烁。我可以看到，当滚动时，屏幕的一半没有及时移动以在正确的位置进行渲染，从而在与另一半图块之间形成黑色间隙。如何确保在渲染之前移动所有图块？

我的核心课程中的渲染功能

```
public static void render()
{
    while(true)
    {
        Graphics g = buffer.getDrawGraphics();
        try
        {
            g.setColor(Color.black);
            g.fillRect(0, 0, 1280, 720);
            if(renderQueue != null)
            {
                for(int i = 0; i<renderQueue.size(); i++)
                {
                    Tile t = renderQueue.get(i);
                    g.drawImage(t.getImage(), t.getX(), t.getY(), null);
                }
            }
            if(!buffer.contentsLost())
            {
                buffer.show();
            }
        }
        finally
        {
            if(g != null)
            {
                g.dispose();
            }
        }
    }
} 
```

这是来自 Input 类的移动更新函数

```
public void keyPressed(KeyEvent ke)
{
    int e = ke.getKeyCode();
    switch(e)
    {
        case 38://up
            if(scrollY > 0)
            {
                scrollY -= 16;
                for(int i = 0; i<Core.renderQueue.size(); i++)
                {
                    Core.renderQueue.get(i).incrementY(16);
                }
            }
            break;
        case 40://down
            if(scrollY < 560)
            {
                scrollY += 16;
                for(int i = 0; i<Core.renderQueue.size(); i++)
                {
                    Core.renderQueue.get(i).incrementY(-16);
                }
            }
            break;
        case 37://right
            if(scrollX < 0)
            {
                scrollX += 16;
                for(int i = 0; i<Core.renderQueue.size(); i++)
                {
                    Core.renderQueue.get(i).incrementX(16);
                }
            }
            break;
        case 39://left
            if(scrollX > 0)
            {
                scrollX -= 16;
                for(int i = 0; i<Core.renderQueue.size(); i++)
                {
                    Core.renderQueue.get(i).incrementX(-16);
                }
            }
            break;
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:10:14.943

听起来瓷砖正在被渲染，而一些瓷砖的坐标仍然需要更改`Input.keyPressed`. 您可以通过直接使用`scrollX`和`scrollY`在 中绘制平铺图像来解决此问题`Core.render`，而不是更改每个平铺的坐标。如果在 while 循环开始时将滚动值复制到两个局部变量中`render`，则每个图块将使用相同的值。

另一种选择是创建一个新列表，其中包含已修改坐标的图块（您可以使用当前列表中的图像）。新列表完成后，您可以设置一个标志，例如`newRenderQueue`将在`render`. 当 while 循环的新迭代`render`开始时，您可以用新列表替换渲染队列并重置标志。

PS 欢迎来到堆栈溢出！正如 Andrew Thompson 已经提到的，提供一个完整的问题示例非常有帮助。通过这种方式，人们可以快速调查问题并提供（希望是有用的）建议...... ;-)

# xhtml - （如何）XHTML 有所作为？

> ID：14546332
> 
> 赞同：1
> 
> 时间：2013-01-27T10:11:09.273
> 
> 标签：xhtml

为什么需要 XHTML？它如何独立于 HTML？当 HTML 有版本 3、4 和预期的 5 时，为什么一方面 xhtml 停止使用版本 2 并突然显示为 HTML5 本身的一部分[http://www.whatwg.org/specs/web-apps/current-work/ multipage/the-xhtml-syntax.html#the-xhtml-syntax](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-xhtml-syntax.html#the-xhtml-syntax)比单独推荐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:13:30.660

XHTML 很有用，因为它可以使用标准 XML 库生成和解析。如果你不需要这个属性，你可以使用 HTML。在 HTML 5 中，它只是同一语言的另一种语法......

XHTML 并未停止使用。XHTML 1.0（和 1.1）直接对应于 HTML 4.01。HTML5对应的XHTML版本就叫XHTML5来同步版本号。XHTML 2.0 是在制作一种全新的文档语言方面的一项已停止的努力。

# mysql - 将数据插入到其主键从 2 列组合的表中

> ID：14546333
> 
> 赞同：4
> 
> 时间：2013-01-27T10:11:10.330
> 
> 标签：mysql, sql

我将这些列组合为主键。

```
room_no, type 
```

例如，当我插入新数据时，`0001 01`.

然后我插入`0001 02`.

这是不可能的。它说重复的主键。尽管我将 2 列定义为主键，但为什么会重复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T10:15:40.450

只是一个想法：

*   您是否在它们上单独定义了索引？
*   您是否将每个键单独定义为唯一的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:17:52.887

这与复合主键的工作方式相同。

您可以阅读这篇文章：- [http://www.techrepublic.com/article/the-great-primary-key-debate/1045050](http://www.techrepublic.com/article/the-great-primary-key-debate/1045050)

# c++ - 为特定数据搜索动态分配的向量？C++

> ID：14546346
> 
> 赞同：-2
> 
> 时间：2013-01-27T10:12:54.273
> 
> 标签：c++, search, vector, dynamic-allocation

我必须从 Resistor 类创建一个动态分配的对象向量，它只有两个私有变量：电阻和容差。之后，必须创建一个函数，以便在向量中搜索那些阻力和容差等于函数参数中传递的值的对象。

搜索了一段时间后，我不知道如何实现这一点。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:21:15.640

1.  实现电阻类的比较运算符`operator==(const Resistor&)`。
2.  通过`std::find`提供从函数参数创建的新 Resistor 实例，用于在向量中搜索数据。

见[http://www.cplusplus.com/reference/algorithm/find/](http://www.cplusplus.com/reference/algorithm/find/)

# c# - 如何在 WPF XAML 中使用嵌套类？

> ID：14546347
> 
> 赞同：24
> 
> 时间：2013-01-27T10:13:00.397
> 
> 标签：c#, wpf, xaml, data-binding, nested-class

我正在重构示例中的代码：

*   [24.129.21。](http://www.java2s.com/Tutorial/CSharp/0470__Windows-Presentation-Foundation/MasterDetailBinding.htm)[C# / CSharp Tutorial](http://www.java2s.com/Tutorial/CSharp/CatalogCSharp.htm) » Windows Presentation Foundation » Binding
    中的[Master Detail Binding)](http://www.java2s.com/Tutorial/CSharp/0470__Windows-Presentation-Foundation/MasterDetailBinding.htm)

并且[在排除 Skills 类之后](https://stackoverflow.com/a/14536818/200449)
， 在**MainWindow.xaml**中进行了相应的更改

 **```
<local:Team>
  <local:Employee Name="Larry" Age="21">
    <local:Employee.Skills>
      <!--  local:Skills -->
       <local:Skills> 
```

在**MainWindow1.xaml.cs**中：

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Windows;
namespace WpfApplication
{
  public class Skill
  {//I'd like to exclude class Skill having moved it into class Employee as nested one
    public string Description { get; set; }
  }

   public class Employee 
   {
    public string Name { get  ; set; }
    public int Age  { get; set; }
    public List<Skill> Skills { get; set; }

     public Employee()
     {
       Skills=new List<Skill>();
     }

     /*class Skill  
     {
          public string Description { get; set; }
     }   */
  }

  public class Team : ObservableCollection<Employee> { }

  public class Company
  {
    public string CompanyName { get  ; set; }
    public Team Members { get  ; set; }
  }

  public class Companies : ObservableCollection<Company> { }

  public partial class Window1 : Window
    {
      public Window1()
    {
        InitializeComponent();
    }
  }
} 
```

如果要移动，我应该如何更改 Window1.XAML：

*   `Skill`上课`Employee`上课

在 Window1.xaml.cs 中？

## 相关问题

基于相同的代码：

*   [如何在 WPF XAML 中将自定义类型更改为系统类型（字符串）？](https://stackoverflow.com/questions/14548012/how-to-change-a-custom-type-to-system-type-string-in-wpf-xaml)

**更新（回答 1st RV1987 的评论）**：

回答 tp[在 XAML 中创建嵌套类的实例](https://stackoverflow.com/questions/4269896/creating-an-instance-of-a-nested-class-in-xaml)告诉它是可能的，但不清楚如何使用：

*   [Ludovic 的回答](https://stackoverflow.com/a/13371083)告诉它是可能的，但包含不清楚如何使用的评论。
    这很符合我的经验和这个问题
*   [townsean](https://stackoverflow.com/a/4270348)的另一个答案是基于[msdn](http://msdn.microsoft.com/en-us/library/ms753379.aspx)的引用：
    “您的自定义类不能是嵌套类。嵌套类和其**一般CLR 使用语法中的****“点”**会干扰其他 WPF 和/或 XAML 功能，例如附加属性。”

     **但是，**一般来说**，对于“你的自定义类”，但是在我附加到这个问题的**具体**代码中，有几十个**“点”**（比如`Employee.Skills`），它不是我的自定义类是嵌套的，但我的自定义类有嵌套类里面。** 

 ****Update2（回答 2nd RV1987 的评论问题）**：
是的，我刚刚尝试过[+ 方法](https://stackoverflow.com/a/13371083)，但它不起作用，但是：

*   即使在完美工作的元素上，XAML 也会给我错误
*   我没有尝试自己使用反射器，也没有找到任何其他可行的方法或来自微软的不那么模棱两可的参考

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-27T11:33:51.933

不幸的是，您想要做的事情在 XAML 中是不可能的（来自[MSDN](http://msdn.microsoft.com/en-us/library/ms753379.aspx)）：

> 您的自定义类不能是嵌套类。嵌套类及其常规 CLR 使用语法中的“点”会干扰其他 WPF 和/或 XAML 功能，例如附加属性。****

# css - 相同的 CSS3 渐变效果不同

> ID：14546348
> 
> 赞同：0
> 
> 时间：2013-01-27T10:13:15.930
> 
> 标签：css, background, gradient

我使用了一个[css3 生成器](http://www.colorzilla.com/gradient-editor/)来创建渐变背景。

它适用于我构建的静态 html 页面。

当我运行我的 aspx 时，没有背景，尽管 firebug 显示规则，没有冲突，甚至当我将鼠标悬停在 firebug 的规则上时显示渐变。

我[摆弄了它](http://jsfiddle.net/jnfsmile/VgxJz/1/)-在那里也不起作用。

这是代码：

```
body {
  background: #a0d3ff; /* Old browsers */
  background: -moz-linear-gradient(top,  #a0d3ff 0%, #ffffff 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#a0d3ff), color-stop(100%,#ffffff)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top,  #a0d3ff 0%,#ffffff 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top,  #a0d3ff 0%,#ffffff 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top,  #a0d3ff 0%,#ffffff 100%); /* IE10+ */
  background: linear-gradient(to bottom,  #a0d3ff 0%,#ffffff 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a0d3ff', endColorstr='#ffffff',GradientType=0 ); /* IE6-9 */
} 
```

我该如何解决？

# asp.net - 为什么我动态添加的控件在回发后会丢失它们的值？

> ID：14546351
> 
> 赞同：4
> 
> 时间：2013-01-27T10:13:37.690
> 
> 标签：asp.net, event-handling, postback, viewstate, servercontrols

要问我的问题，我创建了一个`aspx`包含 a`Button`和 a`DataList`和**SqlDataSource**的文件：

```
 <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />

    <asp:DataList ID="DataList1" runat="server" DataKeyField="a" 
    DataSourceID="SqlDataSource1" >
        <ItemTemplate>
            a:
            <asp:Label ID="aLabel" runat="server" Text='<%# Eval("a") %>' />
            <br />
            b:
            <asp:Label ID="bLabel" runat="server" Text='<%# Eval("b") %>' />
            <br />
        </ItemTemplate>
    </asp:DataList>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:probaConnectionString %>" 
    SelectCommand="SELECT [a], [b] FROM [PROBA_TABLE]"></asp:SqlDataSource> 
```

在我后面的代码中，我添加`TextBoxes`了 DataList 的 Items。我在 Page_Load 中为每个 Item 添加一个 TextBox，并在 Button Click`eventhandler`中添加另一个 TextBox。

```
 public partial class _Default : System.Web.UI.Page
    {   
        protected void Page_Load(object sender, EventArgs e)
        {
            if (IsPostBack)
            {
                foreach (DataListItem item in DataList1.Items)
                {
                    item.Controls.Add(new TextBox());
                }
            }
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            foreach (DataListItem item in DataList1.Items)
            {
                item.Controls.Add(new TextBox());
            }
        }

    }
} 
```

除了一件事，这很好用。当我单击 Button 时，在 Page_Load 中创建的 TextBoxes 保留它们的 Text 值，但在它们中创建的 TextBoxes`Button1_Click`会丢失它们的 Text 值。我真正的问题比这更复杂，但我认为解决这个问题会对我有很大帮助。

![回发后我的网站](../Images/4861bb30a1df921e47ff1e3b838c4e2e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:20:31.547

每个应该从页面 ViewState 接收数据的控件都应该在**Init**或**Load**事件处理程序中实例化，因为 ViewState 被持久化到控件**BEFORE Click、Change**和其余控件事件（当检测到 ViewState 更改时触发这些事件，因此必须读取 ViewState在触发*Click事件之前）。*

所以这个过程应该是这样的：

1.  **OnInit**（创建静态控件）
2.  静态控件内容从 ViewState 反序列化
3.  **OnLoad**（创建动态控件，在您的情况下是您在上次回发中创建的文本框）
4.  动态控件内容从 ViewState 反序列化
5.  **根据比较 POST 数据和 ViewState 数据检测到的更改触发Click、Change**和其他事件

**建议：**

您可以使用隐藏字段来保存其他状态信息，然后在 OnLoad 中您可以读取该信息以重新创建动态创建的控件。

此外，您应该明确设置文本框的 ID 属性，以便可以正确保留值，不要依赖 ASP.Net。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:31:58.313

默认情况下，http 是无状态的，这意味着在处理您的请求后，服务器不保留请求的数据或信息，
但是在出现错误的特殊情况下，表单中的值需要保留，

*假设您填写了一个长表单，然后将其发布回服务器只是为了得到一条错误消息并且所有填充的值都消失了。这不会很烦人*

，所以 asp.net 在幕后做了什么，它在页面中隐藏了一个字符串，其中包含有关所有服务器控件及其 id 的信息，
因此当您发回表单时，`Page class`创建的值和值是回发并绑定在特定控件中
，因为`Page class`在每个请求中都会创建`pageLoad`事件运行，然后在 PageLoad 中创建的控件呈现与它们的 id 对应的值被放入其中，这
与在按钮单击时创建的控件不同，
直到`button_click`事件运行，视图状态已经被反序列化并且值被填充到其中

# java - 休眠@OneToMany ConstraintViolationException

> ID：14546355
> 
> 赞同：0
> 
> 时间：2013-01-27T10:14:12.993
> 
> 标签：java, mysql, hibernate, constraints

问题是我希望有可能为不同的预订使用相同的 parachute_id，但是当我保存具有相同 parachute_id 的预订时，我得到： `org.hibernate.exception.ConstraintViolationException: Duplicate entry '78' for key 'parachute_id'`

那是我的代码：

```
@OneToMany  
@JoinTable(name="reservation_parachute")  
Collection<Parachute> parachute = new ArrayList<Parachute>(); 
```

和数据库示例：
`Reservation_id parachute_id
130 76
129 75
127 51
127 63
126 10
126 2
126 1
131 77
133 78` 

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:02:21.230

我认为您正在`@OneToMany`与`@ManyToMany`.

像这样阅读它：

`One`预订“拥有”`Many`降落伞

但是你想要这样的东西：

`Many`预订“分享”`Many`降落伞

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:11:50.103

在您描述的情况下，您不需要多对多连接表。

对于降落伞有不同的保留，我会这样做：

在 Resrvation.java

```
@ManyToOne
@JoinColumn(name = "parachuteID")
private Parachute parachute; 
```

在降落伞.java

```
@OneToMany(mappedBy = "parachute")
private List<Reservation> reservations; 
```

这样一个降落伞就会有一个预订清单。

# c++ - 如何解决 WSAEWOULDBLOCK 错误

> ID：14546362
> 
> 赞同：2
> 
> 时间：2013-01-27T10:15:07.873
> 
> 标签：c++, windows, sockets

我有一个 win7 应用程序，我在其中通过 TCP 连接发送数据 b\w 2 个客户端。在测试时，我发现`WSAEWOULDBLOCK`我的套接字经常出错。为了解决这个错误，我在它周围放了一个while循环。

```
do  
{  
size_t value = ::send();  /*with proper arguments*/
}while(GetLastError() == 10035); 
```

所以如果我得到`error 10035`我会重新发送数据。

但是现在我看到这个 while 循环有时会无限运行，并且我的应用程序会进入某种死锁状态。我尝试增加套接字的大小，但仍然没有用。

如果有人知道如何解决`WSAEWOULDBLOCK`错误，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T16:39:18.783

WSAEWOULDBLOCK 并不是真正的错误，它只是告诉您发送缓冲区已满。如果您使网络饱和或对方根本不确认接收到的数据，则可能会发生这种情况。看一下 select() 函数，它允许您等到缓冲区空间可用或发生超时。还有一种方法可以将 win32 事件绑定到流，然后允许它与 WaitForMultipleObjects 一起使用，以防您想提前中止等待。

顺便说一句：我最初想反对您使用“死锁”一词，但这也是可能发生的事情：如果您在收到下一个请求之前等待发送一些响应，而另一方想要发送下一个请求而不是收到您的响应，您的应用程序实际上陷入僵局。使用 select()，您可以确定是否可以发送数据、接收数据或连接失败，这使您可以正确处理这些情况以及何时发生。

注意：我还假设您的代码实际上不是对 socket() 的调用，而是对发送/接收的调用。

# python - 随机森林分类器概率只有值 0, 0.1, 0.2... 1

> ID：14546366
> 
> 赞同：4
> 
> 时间：2013-01-26T16:32:34.823
> 
> 标签：python, random-forest, scikit-learn, scipy

我正在尝试使用随机森林对我的数据进行分类，但是当我生成分类器概率时，它的值总是在 5 位以内，例如 0、0.1、0.2、... 1。这是统计问题还是软件问题？我在 Mac 10.7.5 上的 Python 2.7.3 的 scikit-learn 合奏中使用 RandomForestClassifier。我的数据看起来像这样：

```
y   x1   x2   x3   x4...
0   23   4    0
1   102  2    0
1   12   17   1 
```

响应变量 y 是二进制的。有 15 个特征，都是实数或整数值，其中一些是二进制的。我有大约 2000 个训练点和 500 个测试。我将树的数量设置为 500，将每棵树尝试的功能数量设置为 8，并为其他所有内容使用默认值。训练模型后，我使用“predict_proba”函数生成概率并得到类似 0.90000000000000002 或 0.10000000000000001 的结果

我认为这个问题可能是由特定变量引起的，所以我一次只使用一个变量训练模型，重复五个变量。仅每个变量的概率都具有正常值，例如 0.5532。当我同时使用两个变量时，开始出现一些 0.70000 等值。当我使用更多变量时，我会得到更大的 0.700000 个类型值。

这是统计问题还是软件问题？Numpy 通过了测试：numpy.test()，但是 scipy.test() 和 sklearn.test() 都失败了。我过去使用过 sci-kit 学习包，在没有这个问题的情况下测试失败了。另外，我知道我应该修复这些软件包，但是我花了 20 个小时从源代码安装，然后是二进制软件包，然后阅读了 30 多个网页，了解其他人如何安装它或他们有什么错误。当他们说安装很容易时，我没有看到他们测试软件包。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T14:18:32.013

sklearn 的决策森林构建的默认树数为 10。您似乎没有正确更改它，因为森林中恰好有 10 棵树，这就是输出的样子（概率是给出的树的比例1 类，因此值将是 0、.1、.2、...、1)。

你能检查分配的参数，看看它是否真的在建造 500 棵树吗？

```
>>> import sklearn.ensemble
>>> rf = sklearn.ensemble.RandomForestRegressor()
>>> rf.n_estimators
10
>>> rf = sklearn.ensemble.RandomForestRegressor(n_estimators=500)
>>> rf.n_estimators
500 
```

# javascript - 查找出现在单独的特定元素之后的元素

> ID：14546369
> 
> 赞同：0
> 
> 时间：2013-01-27T10:15:55.127
> 
> 标签：javascript, jquery, selenium-rc

我首先使用此代码查找具有特定文本内容的元素：

```
$('someElement').filter(function() {
  return $(this).text() == 'Some text';
}); 
```

然后，我想找到下一个标签`<input>`内的元素。`<td>`

下面是 HTML 代码：

```
<tr>
    <td>
        <label for="SH_Request_First_Name">
            First name <span class="required">*</span>
        </label>
    </td>
    <td colspan="2">
        <input type="text" name="SH_Request_First_Name" id="SH_Request_First_Name"
        value="" size="38" maxlength="50" onchange="validatePresent(this, 'SH_Request_First_Name_Note');"
        /> <span id="SH_Request_First_Name_Note">&nbsp;</span>

    </td>
</tr> 
```

我首先找到了带有文本“名字”的标签。然后我想`<input>`在下一个`<td>`标签中找到那个。

是否可以用 JavaScript 而不是 jQuery 来完成上述任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:19:51.247

当你找到第一个 td 标签后，你可以在 JS 中访问下一个标签

```
yourTd.nextSibling 
```

这将返回文档中的下一个标签。

如果你想从标签到达那里，你首先必须得到父级，然后是兄弟级：

```
yourLabel.parentElement.nextSibling 
```

但如果您多次更改 HTML 构造，则此构造很容易出错。我建议使用 jQuery 并通过特定的 css 类或类似的东西进行选择，因此它不必完全是下一个元素，只需具有该 css 类的下一个元素之一。

# php - 如何删除嵌入的文档

> ID：14546370
> 
> 赞同：0
> 
> 时间：2013-01-27T10:15:58.833
> 
> 标签：php, mongodb, doctrine

我正试图从这个结构中移除一个玩家。

```
{ "_id" : ObjectId( "51043d468ead0e0757000006" ),
  "active" : true,
  "created" : 1359232326,
  "difficulty" : 0,
  "map" : { "$ref" : "Map",
    "$id" : ObjectId( "5103c0228ead0e3764000000" ),
    "$db" : "fantasytd" },
  "mode" : "coop",
  "players" : [ 
    { "$ref" : "User",
      "$id" : ObjectId( "50d83abf038054b560000000" ),
      "$db" : "fantasytd" }, 
    { "$ref" : "User",
      "$id" : ObjectId( "50d83abf038054b560000000" ),
      "$db" : "fantasytd" }, 
    { "$ref" : "User",
      "$id" : ObjectId( "50d83abf038054b560000000" ),
      "$db" : "fantasytd" }, 
    { "$ref" : "User",
      "$id" : ObjectId( "50d83abf038054b560000000" ),
      "$db" : "fantasytd" } ],
 "title" : "testgame" } 
```

我试过了

```
$db->createQueryBuilder()
        ->update()
        ->field('id')->equals($gameId)
        ->field('players.$id')->equals($userId)
        ->pull('players.$.assets')
        ->getQuery()
        ->execute(); 
```

但它不会成功，遗憾的是 Doctrine MongoDB 的文档非常精简：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:48:31.933

我最终在我的游戏文档中创建了一个删除方法。

```
 public function removePlayer($playerId)
  {
    foreach($this->players as $index => $player) {
      if($player->getId() == $playerId) {
        unset($this->players[$index]);
      }
    }
    return $this;
  } 
```

调用此方法后，我只需执行一次 flush()，然后变魔术！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:01:01.160

从技术上讲，由于数组中的所有玩家都是相同的，因此应该这样做：

要删除列表中的最后一个玩家：

```
db.coll.update({_id: ObjectId("51043d468ead0e0757000006")}, {$pop: {players: 1}}) 
```

要删除列表中的第一个玩家：

```
db.coll.update({_id: ObjectId("51043d468ead0e0757000006")}, {$pop: {players: -1}}) 
```

（将“coll”替换为您的收藏名称）。

我假设这不是你想要的，所以我会添加更多玩家，以便更容易看到事情何时消失：

```
db.coll.update({_id: ObjectId("51043d468ead0e0757000006")}, {$push: {players: {$ref: "User", $id: ObjectId("50d83abf038054b560000001")}}})
db.coll.update({_id: ObjectId("51043d468ead0e0757000006")}, {$push: {players: {$ref: "User", $id: ObjectId("50d83abf038054b560000002")}}})
db.coll.update({_id: ObjectId("51043d468ead0e0757000006")}, {$push: {players: {$ref: "User", $id: ObjectId("50d83abf038054b560000003")}}}) 
```

您可以使用以下命令查看更改：

```
db.coll.find({_id: ObjectId("51043d468ead0e0757000006")}).pretty() 
```

例如，要删除数组中的第 3 个播放器，您可以先将播放器子文档设置为 null，然后删除该 null：

```
db.coll.update({_id: ObjectId("51043d468ead0e0757000006")}, {$unset: {"players.3": 1}})
db.coll.update({_id: ObjectId("51043d468ead0e0757000006")}, {$pull: {players: null}}) 
```

或者删除具有特定 $ref 和 $id 的所有玩家：

```
db.coll.update({_id: ObjectId("51043d468ead0e0757000006")}, {$pull: {players: {$ref: "User", $id: ObjectId("50d83abf038054b560000000")}}}) 
```

# java - 为什么人们写--i？

> ID：14546372
> 
> 赞同：4
> 
> 时间：2013-01-27T10:16:37.707
> 
> 标签：java, javascript, c++, language-agnostic, operators

> **可能重复：**
> [在 C++ 中递增 - 何时使用 x++ 或 ++x？](https://stackoverflow.com/questions/1812990/incrementing-in-c-when-to-use-x-or-x)

我见过像循环`i++`中常用的东西。`for`但是当人们使用`--`代替时`++`，出于某种原因，有些人倾向于写`--i`为反对`i--`。

上次我检查时，它们都可以工作（至少在 JavaScript 中）。有人可以告诉我在其他 C 系列语言中是否如此，如果是，为什么有些人更`--i`喜欢`i--`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-27T10:19:27.180

`++i`比 快`i++`。为什么？看简单的解释。

## 我++

`i++`将增加 i 的值，但返回预先增加的值。

*   `temp = i`
*   `i`递增
*   `temp`被退回

例子：

```
i = 1;
j = i++;
(i is 2, j is 1) 
```

## ++i

`++i`将增加 i 的值，然后返回增加的值。

例子：

```
i = 1;
j = ++i;
(i is 2, j is 2) 
```

这`--i`与 和类似`i--`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T10:19:33.457

我不相信前缀 ( `++i`) 与后缀 ( `i++`) 的偏好会根据它是递增还是递减而有所不同。

至于*为什么*，我尽可能选择前缀，因为我的母语是英语，它主要是动词前宾语结构（“吃晚餐”，“开车”），所以“增量`i`”或“减量`i`”更自然我比“`i`减量”。当然，如果我使用结果并且我需要表达式中增量*之前的值（而不是增量值），我会很乐意使用后缀。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-27T10:24:06.130

从历史上看，递增/递减运算符是由堆栈管理驱动的。当您将元素压入堆栈时：

```
*(stackptr++) = value 
```

当你弹出：

```
value = *(--stackptr) 
```

（这些被转换为单个 ASM 指令）

因此，人们习惯于先递增后递减。

您可以看到另一个直接和反向填充的惯用示例：

```
for (p=begin;p!=end;) 
    *(p++) = 42;

for (p=end;p!=begin;) 
    *(--p) = 42; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-27T10:22:45.487

这几乎是一种偏好，只有在您对比原语更复杂的类型进行预增量或后增量时才会发挥作用。

前增量（“ `++i`”）返回增量后的值，`i` *后*增量（“ ”）返回增量*前*`i++`的值。因此，如果是重载了前自增和后自增运算符的复杂类型，则前自增运算符可以只返回对象，而后自增必须返回对象的副本，这很可能如果对象是实质性的，则效率会降低。在大多数情况下（for循环增量等），无论如何都会忽略该值。*`i`*

 *就像我说的，大多数时候，这不是问题，只是偏好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-27T10:34:38.843

在 C 和 C++ 中，`++`和`--`运算符都有前缀形式：`++i`and`--i`和后缀形式：`i++`and `i--`。前者意味着评估然后使用，后者意味着使用然后评估。仅当任一形式用作表达式的一部分时，差异才有意义。否则，这是偏好或风格（或缺乏）的问题。

F.ex., in `int i = 0; int n = ++i;`,`i`首先递增，然后将其值（现在为 1）分配给`n`。在`n = i++`的值中`i`，仍然是 1，被分配给`n`然后递增，`i == 2`现在。

当用作语句时，即：`i++; ++i;`两种形式是等价的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-27T10:18:23.280

区别在于预递增或后递增（同样还有递减）。

引用关于“c 减量”的第二个谷歌结果的主题的[维基百科文章：](http://en.wikipedia.org/wiki/Increment_and_decrement_operators)

```
int  x;
int  y;

// Increment operators
x = 1;
y = ++x;    // x is now 2, y is also 2
y = x++;    // x is now 3, y is 2

// Decrement operators
x = 3;
y = x--;    // x is now 2, y is 3
y = --x;    // x is now 1, y is also 1 
```

因此，与其说是偏好问题，不如说是结果差异的问题。*

# php - 替换字符串php中的最后一个斜杠

> ID：14546373
> 
> 赞同：2
> 
> 时间：2013-01-27T10:16:48.533
> 
> 标签：php, preg-replace

我很难绕过正则表达式，我正在尝试删除字符串中的最后一个正斜杠：

```
$public_url = "https://api.mongohq.com/"; 
```

我打算删除最后一个正斜杠并将其替换为其他内容。我想我可以使用`preg_replace`，但我找不到正确的模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T10:22:13.633

`$`在字符串末尾锚定正则表达式模式：

```
$public_url = preg_replace('#/$#', 'replace it!', $public_url); 
```

也可以：

```
$public_url = rtrim($public_url, '/').'replace it!'; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T10:22:46.663

您可以使用否定的后备表达式：

```
<?php
$public_url = "https://api.mongohq.com/";
$replace = "foobar";

echo preg_replace("~\/(?!.*\/)~", $replace, $public_url);
?> 
```

输出：
[https://api.mongohq.comfoobar](https://api.mongohq.comfoobar)

**更新：**
使用以下正则表达式来避免最后一个斜杠后面的字符出现问题：

```
echo preg_replace("~\/(?!.*\/)(.*)~", $replace, $public_url); 
```

最后一个斜线后面的所有字符也被替换。感谢针织！

# node.js - 使用 Node.js 复制和转换文件

> ID：14546374
> 
> 赞同：3
> 
> 时间：2013-01-27T10:16:54.323
> 
> 标签：node.js, file-io, template-engine

我想使用 Node.js 复制一些文件。基本上，这很容易，但我需要满足两个特殊要求：

1.  我需要解析文件的内容并用实际值替换一些占位符。
2.  文件名也可能包含占位符，我也需要将其替换为实际值。

所以，虽然这基本上不是一项复杂的任务，但我想有多种方法可以解决这个问题。例如，如果我可以使用模板引擎进行替换，那就太好了，但另一方面，我需要将完整的文件作为字符串。我更喜欢基于流的方法，但是 - 我应该如何进行替换？

你看，很多问题，我无法决定走哪条路。

任何提示、想法、最佳实践……？

或者 - 是否有一个模块可以完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:46:05.280

您可以编写自己的解决方案而无需阅读整个文件。`fs.readFile()`仅当您 100% 确定文件不超过缓冲区块（通常为 8KB 或 16KB）时才应使用。

最简单的解决方案是创建一个可读流，附加一个`data`事件监听器并逐个字符地迭代缓冲区读取。如果您有这样的占位符：`${label}`，然后检查是否找到`${`，然后将标志设置为 true。开始存储标签名称。如果你找到`}`并且标记为真，那么你已经完成了。将 flag 设置为 false 并将时间标签字符串设置为`""`.

您不需要任何模板引擎或额外的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-25T10:54:19.793

如果整个文件可以安全地加载到内存中（不是很大），那么库[fs-jetpack](https://github.com/szwacz/fs-jetpack)可能是这个用例的非常好的工具。

```
const jetpack = require("fs-jetpack");

const src = jetpack.cwd("path/to/source/folder");
const dst = jetpack.cwd("path/to/destination");

src.find({ matching: "*" }).forEach((path) => {
  const content = src.read(path);
  const transformedContent = transformTheFileHoweverYouWant(content);
  const transformedPath = transformThePath(path);
  dst.write(transformedPath, transformedContent);
}); 
```

在示例代码中是同步的，但您可以轻松地使异步等效。

# c# - 如果整个单词在字符串中的任何位置，RegEx 将忽略匹配

> ID：14546382
> 
> 赞同：0
> 
> 时间：2013-01-27T10:17:40.510
> 
> 标签：c#, .net, regex, regex-negation

嗨，我试图让 RegEx 工作。我有这段文字：

```
/Ffont2 45.83 Tf  252 980 Td (XX7445 DDA PURCHASE 05/28 04:48
MCDONALD'S F561 CHICAGO IL 105/29          10.25) Tj ET
0.000000 0.000000 0.000000 rg 0.000000 0.000000 0.000000 RG BT /Ffont2 45.83 Tf  252 937 Td (   12333378 214904443) Tj ET
0.000000 0.000000 0.000000 rg 0.000000 0.000000 0.000000 RG BT /Ffont2 45.83 Tf  252 894 Td (CITI CARD ONLINE PAYMENT 12345678                    05/29          87.99) Tj ET
0.000000 0.000000 0.000000 rg 0.000000 0.000000 0.000000 RG BT /Ffont2 45.83 Tf  252 851 Td (XX7445 DDA PURCHASE 0528 14:11 #03632 JEWEL CHICAGO IL     0529          97.60) Tj ET 
```

我试图让一切 从`Td`喜欢`Tj`

```
Td (CITI CARD ONLINE PAYMENT 12345678                    05/29                87.99) Tj 
```

但是如果它们没有日期，我想跳过它们（必须有正斜杠），它们必须有金额（必须有期限），如果里面有“购买”这个词，我不想要它。所以

```
Td (XX7445 DDA PURCHASE 0528 14:11 #03632 JEWEL CHICAGO IL     0529         97.60) Tj 
```

不会被退回。现在我有

```
(Td \()([^\)]*)([^\)]*)([/][^\)]*[.][^\)]*\) Tj) 
```

对于我的正则表达式，它得到了一切，但即使它有“购买”，它也会得到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:34:03.507

你所拥有的很好。正则表达式*可用*于此.. 但是为什么~~将一级方程式赛车放在卡丁车赛道上~~（<--- 不好的类比..）浪费 CPU 周期？

```
var matchesWithoutPurchase = Regex.Matches(yourInput, @"(Td \()([^\)]*)([^\)]*)([/][^\)]*[.][^\)]*\) Tj)")
    .Cast<Match>().Where(x => !x.Value.ToLower().Contains("purchase"));

foreach (var match in matchesWithoutPurchase) {
    Console.WriteLine(match);
} 
```

正则表达式负面环顾四周是矫枉过正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:06:41.827

如果您想使用正则表达式来确保您的匹配项不包含单词“PURCHASE”，则可以使用否定的前瞻性，如下所示：

```
@"(?![^\)]*PURCHASE)(Td \()([^\)]*)([^\)]*)([/][^\)]*[.][^\)]*\) Tj)" 
```

如果单词 'PURCHASE' 出现在 next 之前，则前瞻会阻止匹配`)`。

如果您还想防止“购买”，您可以添加`(?i)`到正则表达式的开头，或将`RegexOptions.IgnoreCase`标志添加为`Regex`方法调用的最后一个参数。

仔细查看您的正则表达式，我注意到第二个`([^\)]*)`是多余的，因为它匹配的所有内容都将被`([^\)]*)`紧接在它前面的内容捕获。

您正在捕获似乎也很奇怪`(Td \()`-捕获将永远是`Td (`，那何必呢？第二次捕获将开始`/`和结束`Tj)`- 这是你想要的吗？

我假设你知道你可以`[/]`用`\/`和`[.]`替换`\.`。

无论如何，要捕获括号内的内容，您可以使用：

```
@"(?![^\)]*PURCHASE)Td \(([^\)]*\/[^\)]*\.[^\)]*)\) Tj"; 
```

# c# - 如何在详细信息视图内的下拉列表中使用 try catch 处理错误

> ID：14546383
> 
> 赞同：1
> 
> 时间：2013-01-27T10:17:40.927
> 
> 标签：c#, asp.net, entity-framework, edit, detailsview

我在详细信息视图中有一个下拉列表，我将在详细信息视图中编辑记录。我的问题是详细信息视图中的下拉列表绑定到一个字段并给出错误

> “DropDownList1”有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值

这是由于 selectedvalue 值不在下拉列表中。

有人可以告诉我如何处理这个错误。我想使用 try catch 并且什么都不做，只是忽略错误，或者在下拉列表中将空白值作为 selectedvalue 传递。

我遇到的主要问题是我不确定在哪里放置 try catch 语句。

完整代码如下。

```
 <asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" 
        DataKeyNames="RecordRef" DataSourceID="EntityDataSource1" Height="50px" 
        Width="125px">
        <Fields>
            <asp:BoundField DataField="RecordRef" HeaderText="RecordRef" ReadOnly="True" 
                SortExpression="RecordRef" />
            <asp:BoundField DataField="CustomerID" HeaderText="CustomerID" 
                SortExpression="CustomerID" />
            <asp:TemplateField HeaderText="JobCategory" SortExpression="JobCategory">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList1" runat="server" 
                        DataSourceID="EntityDataSource2" DataTextField="ItemValue" 
                        DataValueField="ItemValue" SelectedValue='<%# Bind("JobCategory") %>'>
                    </asp:DropDownList>
                    <asp:EntityDataSource ID="EntityDataSource2" runat="server" 
                        ConnectionString="name=CRMSEntities" DefaultContainerName="CRMSEntities2" 
                        EnableFlattening="False" EntitySetName="KeyValues">
                    </asp:EntityDataSource>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("JobCategory") %>'></asp:TextBox>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("JobCategory") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="JobDescription" HeaderText="JobDescription" 
                SortExpression="JobDescription" />
            <asp:BoundField DataField="JobDate" HeaderText="JobDate" 
                SortExpression="JobDate" />
            <asp:BoundField DataField="JobStatus" HeaderText="JobStatus" 
                SortExpression="JobStatus" />
            <asp:BoundField DataField="Referral" HeaderText="Referral" 
                SortExpression="Referral" />
            <asp:CommandField ShowEditButton="True" ShowInsertButton="True" />
        </Fields>
    </asp:DetailsView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:33:20.900

您可以通过在 base.Render 周围使用 try catch 来处理用户控件的覆盖 OnRender 方法的异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-27T11:00:14.347

而不是使用 Try ... Catch，您可以在后面的代码中使用以下代码（在本例中为 VB）：

```
Dim ddlItem As ListItem
ddlItem = myDDL.Items.FindByValue(UserInput.ToString())
If Not ddlItem Is Nothing Then
    ddlItem.Selected = True
Else
    myDDL.Text = "Some text to indicate failure"
End If 
```

# java - 为一组 JButton 中的特定 JButton 禁用 mouseEvent

> ID：14546384
> 
> 赞同：0
> 
> 时间：2013-01-27T10:17:41.510
> 
> 标签：java, swing, mouseevent, jbutton, event-listener

程序的流程是这样的：将第一组按钮 ( `leftButtonArea`) 中的图像拖动到第二组按钮 ( `rightButtonArea`)。

每个图像都有一个唯一的名称，通过`setName()`. 被拖动的图像的名称将与它被拖动到的按钮的名称进行比较。

如果名称匹配，我希望禁用该特定按钮对任何悬停事件作出反应。

`.setHoverEnabled(false)`不工作=/

关于禁用事件侦听器的类似 SO 线程，但似乎使用 a 的解决方案`glass pane`适用于整个组件？ [关联](https://stackoverflow.com/questions/4722835/how-to-temporarily-disable-event-listeners-in-swing)

**编辑：** 不知何故这可行，但我不确定这种方法有什么副作用 `source.removeMouseListener(source.getMouseListeners()[1]);`

**Edit2：** 发现了一些有趣的东西。这可能是禁用按钮仍然对 mouseEvents 做出反应的原因。

“低级：组件、容器、焦点、键、鼠标、画图、窗口

语义：动作、调整、项目、文本

禁用任何组件只会影响语义事件。那是因为它们直接由组件本身处理，组件本身知道它是否启用。低级别事件不会受到禁用的影响。如果您在禁用标签时停下来考虑这一点，它是否仍然可见。如果是这样，那么油漆事件一定已经发生了。低级事件总是会发生，如果组件启用与否，则由您的处理程序查询。”

```
// 1st set of 4 buttons
for(int a=0; a<4; a++){

 leftButtonArea[a] = new JleftButtonArea(new ImageIcon(image)); 

 TransferHandler transfer = new TransferHandler("icon");
 leftButtonArea[a].setTransferHandler(transfer);

 leftButtonArea[a].addMouseListener(new MouseAdapter(){
    public void mousePressed(MouseEvent e){
    JleftButtonArea leftButtonArea = (JleftButtonArea)e.getSource();
    TransferHandler handle = leftButtonArea.getTransferHandler();
    handle.exportAsDrag(leftButtonArea, e, TransferHandler.COPY);
    // get unique name for the image that is dragged
    // to rightButtonArea
    name1 = e.getComponent().getName();
    }

});

}

// creates 2nd set of 4 buttons
 for(int b=0; b<4; b++){     
     rightleftButtonAreaArea[b] = new JleftButtonArea();

     // <---- creates unique name for each leftButtonArea ----->
     cc2 += 1;
     id2+="a"+cc2;
     rightleftButtonAreaArea[b].setName(id2); 
     // <---- creates unique name for each leftButtonArea ----->

     TransferHandler transfer1 = new TransferHandler("icon");
     rightleftButtonAreaArea[b].setTransferHandler(transfer1);

    rightleftButtonAreaArea[b].addMouseListener(new MouseAdapter(){
    @Override
    public void mouseExited(MouseEvent me){
    JleftButtonArea source = (JleftButtonArea)me.getSource();

    try{
    // compare unique name of image and the button in rightButtonArea
    // if they are the same, disable hover for the button
        if( name1.equals(source.getName())){
            // this doesn't work
            source.getName().setHoverEnabled(false); 
            // Somehow this works, but I am not sure of any side effects from this 
            source.removeMouseListener(source.getMouseListeners()[1]);
        }
        else{   
            source.setIcon(null);
        }
    }
    catch (NullPointerException e) 
    {

    }

    }       

    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T11:02:31.000

*   对于[Buttons JComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)是[MouseEvent](http://docs.oracle.com/javase/tutorial/uiswing/events/mousemotionlistener.html)在[ButtonModel中实现](http://docs.oracle.com/javase/7/docs/api/javax/swing/ButtonModel.html)

*   [在 JButton API 中为 Icon](http://docs.oracle.com/javase/7/docs/api/javax/swing/JButton.html)使用实现的方法

*   示例[JButton & Icon](https://stackoverflow.com/a/7919280/714968) , [JButton & ButtonModel](https://stackoverflow.com/a/5755124/714968)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T09:00:53.693

尝试

button.setRolloverEnabled(false);

# svn - 使用 Subversion (SVN) 进行 ERP 定制的代码管理

> ID：14546391
> 
> 赞同：2
> 
> 时间：2013-01-27T10:18:25.417
> 
> 标签：svn, repository, customization, erp

我确实开始创建一个存储库来管理我们的 EBS 定制。虽然我不太确定我目前的设计是否好，因为我有一些问题。

例如，我确实启动了基于 Unix 树的 SVN 存储库结构。每个模块1个文件夹，然后分成一些文件夹，如bin，admin，sql ...

XXXPO_TOP - 管理员 - bin - 数据 - 文档 - 表单 - 媒体 - 报告 - sql XXXQA_TOP ...

但是，如何创建一些跨不同模块的新定制？我们是否应该使用来自 trunc 的整个模块集并仅使用标签来为任何自定义创建一个分支？这样，可能不容易快速找到您的更改。

如何存储所有 java 文件，例如来自某些框架模块的 java 文件，我想到 iStore，以及您没有“常用”文件结构的地方？

你们中的一些人是否已经实施了一些好的和可靠的存储库以正确开发您的定制？

# javascript - JavaScript - 在重定向之前记录

> ID：14546394
> 
> 赞同：1
> 
> 时间：2013-01-27T10:18:28.733
> 
> 标签：javascript, jquery, ajax

我正在尝试在重定向之前发送一个 ajax 调用（用于记录目的）。实际上，重定向是一个正确设置了 octet-stream 和 disposition 的下载。所以ajax调用不会在所有浏览器（尤其是chrome）上被调用。在其他像 IE 中它确实如此。我如何确保调用 SURE 被执行？

这是代码：

```
$(function() {
    $('#download-link-a').click(function() {
        remoteLog ('Clicked on download', '<?php echo $username; ?>' );
        location.href = "<?php echo $secure_link; ?>";
        return false;
    });
});
function remoteLog (arg, key) {
    var file = '/files/remoteLog.php';
    $.post(file, {text: arg, key: key});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:24:56.787

*只有*在成功后，您才需要使用回调函数来调用重定向`POST`。我建议您使用`$.ajax()`，而不是`$.post()`因为它更可定制。

以下是如何使用适当的回调函数将您的`$.post()`转换为`$.ajax()`等价物：

```
$(function() {
    $('#download-link-a').click(function() {
        remoteLog ('Clicked on download', '<?php echo $username; ?>' );
        return false;
    });
});

function remoteLog (arg, key) {

    var fnSuccess = function() {
        location.href = "<?php echo $secure_link; ?>";
    };

    var fnFail = function() {
        alert('POST failed. Do not redirect!');
    };

    $.ajax({
      type: 'POST',
      url: '/files/remoteLog.php',
      success: fnSuccess,
      error: fnFail,
      data: {text: arg, key: key},
      dataType: 'json',
      async:true
    });
} 
```

更多阅读：[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:23:24.573

将重定向移动到回调函数：

```
function remoteLog (arg, key) {
    var file = '/files/remoteLog.php';
    $.post(file, {text: arg, key: key})
      .always(function(){location.href = "<?php echo $secure_link; ?>";});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T10:20:39.377

```
$(function() {
    $('#download-link-a').click(function(e) {
        e.preventDefault();
        remoteLog ('Clicked on download', '<?php echo $username; ?>' );

    });
});
function remoteLog (arg, key) {
    var file = '/files/remoteLog.php';
    var jqPost = $.post(file, {text: arg, key: key})
    .always( function() { //or .done() can also be used
       location.href = "<?php echo $secure_link; ?>";
        return false;
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T10:30:01.280

我会使用`onbeforeunload`一个同步 ajax 调用。

```
$("#some-link").click(function(evt){
     this.outlink = $(this).attr("href");
     this.outtext = "Some text";
});

window.onbeforeunload = function(){
  data = {text:this.outtext,outlink:this.outlink};
  $.ajax({
    url:url,
    type:"POST",
    data:data,
    async:false
  });
}; 
```

事实上，您唯一的问题是`async`ajax 调用的一部分。

# php - 通过单击 html 按钮访问 PHP 函数

> ID：14546412
> 
> 赞同：0
> 
> 时间：2013-01-27T10:20:49.900
> 
> 标签：php, html, function, button

```
<html>
<body>
<button type="button" onclick="myFunc()">Click</button>
</body>
</html>
<?php
    function myFunc() {
        echo "Hello world";
    }
?> 
```

我编写了这样的代码并对其进行了测试，但什么也没发生。那么是否有可能这样做，或者我应该只使用 JavaScript 来代替？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T10:22:23.357

改用javascript。PHP 并不打算这样做。

PHP 在服务器端运行，而 javascript 在客户端运行。

```
<html>
<head>
    <script>
        function myFunc(){
            document.getElementById('content').innerHTML = "Hello world";
        }
    </script>
</head>
<body>
<button type="button" onclick="myFunc()">Click</button><div id="content"></div>
</body>
</html> 
```

[jsFiddle](http://jsfiddle.net/jS5xw/)

为了简单地理解它，PHP 解释器首先预处理你的 PHP 文件（因此它的名字 - **P** HP：**H** ypertext **P** reprocessor），并解释其中的任何内容`<?php`并`?>`标记并将其转换为 HTML、响应头等等......

在您的情况下，您定义了一个 PHP 函数，仅此而已。该函数未使用 - 但解释器不在乎。

之后，服务器将预处理后的 HTML 发送到客户端，PHP 标记内的所有内容都会被剥离。

客户端（主要是 Web 浏览器）将按原样解析 HTML。客户端根本不会收到*任何*PHP，因为它们在发送之前就已经消失了，当然，浏览器也不会看到您的 PHP 函数。

是的，如果 PHP 依赖于客户端输入，您必须使用表单提交、Ajax 或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:23:25.563

您必须为此执行 JavaScript，所有 PHP 代码仅在服务器端执行。

如果您需要来自 PHP 文件的一些动态信息，则必须通过 Ajax 调用它（同样是 JavaScript）

# video - MKV 能否持有 VP8 Opus 组合，以及如何

> ID：14546413
> 
> 赞同：3
> 
> 时间：2013-01-27T10:21:03.763
> 
> 标签：video, ffmpeg, codec, mkv, vp8

我想用视频编解码器`VP8`和音频编解码器创建一个 MKV 文件`opus`

我在ffmpeg中尝试了以下命令：

```
ffmpeg -y -i ./INPUT.flv -threads 8  -aspect 16:9 -vcodec libvpx  -vb 2M -acodec libopus   -ac 2 OUTPUT.mkv 
```

我已经在我的 Ubuntu 中安装了 libopus0，但是我收到了这个错误：

```
Duration: 00:07:53.30, start: 0.000000, bitrate: 541 kb/s
    Stream #0.0: Video: h264 (Main), yuv420p, 640x360, 410 kb/s, 29.97 tbr, 1k tbn, 59.94 tbc
    Stream #0.1: Audio: aac, 44100 Hz, stereo, s16, 131 kb/s
Unknown encoder 'libopus0' 
```

有什么问题，我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:46:14.057

```
ffmpeg -codecs | grep opus 
```

产量

```
DEA.L. opus  Opus (Opus Interactive Audio Codec) (decoders: libopus )
             (encoders: libopus ) 
```

所以也许你可以这样跑

```
ffmpeg -i a.mp4 -c:v libvpx -c:a opus a.mkv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T19:49:13.753

`ffmpeg`允许在 Matroska (MKV/MKA) 中使用 VP9/VP8 和 Opus。例子：

```
ffmpeg -i input -c:v libvpx-vp9 -c:a libopus output.mkv 
```

*   旧版本的用户必须`-strict experimental`为 Opus 添加。
*   古代版本的用户将无法将 Opus 混入 Matroska。

# php - MySQL 显示尚未选择的成员

> ID：14546419
> 
> 赞同：1
> 
> 时间：2013-01-27T10:22:32.013
> 
> 标签：php, mysql

我们提供一些奖金供会员选择，我想显示一个他们尚未选择的奖金的弹出窗口。**bonus**包含有关不同赠金的信息，并且**selected_bonuses**包含赠金 id 和会员 id。

```
SELECT bonus.* FROM bonus 
LEFT JOIN selected_bonuses 
ON bonus.id = selected_bonuses.bonus_id 
WHERE selected_bonuses.member_id = 'xxxx' 
```

这将显示为会员“xxxx”选择的奖金。

```
SELECT bonus.* FROM bonus 
LEFT JOIN selected_bonuses 
ON bonus.id = selected_bonuses.bonus_id 
WHERE selected_bonuses.member_id IS NULL 
```

这显示未被任何成员选择的奖金。我想显示会员 'xxxx' 没有选择的奖金。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:29:26.087

随着您的查询

```
SELECT bonus.* FROM bonus 
LEFT JOIN selected_bonuses 
ON bonus.id = selected_bonuses.bonus_id 
WHERE selected_bonuses.member_id = 'xxxx' 
```

您将有关每个奖金的信息加入每个选择了该奖金的成员，然后只选择一个成员。

如果您将每个奖金仅加入您感兴趣的成员，然后选择不存在此类成员的奖金，您应该得到您想要的：

```
SELECT bonus.* FROM bonus 
LEFT JOIN selected_bonuses 
ON bonus.id = selected_bonuses.bonus_id 
AND selected_bonuses.member_id = 'xxxx'
WHERE selected_bonuses.member_id IS NULL 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T10:29:48.190

你可以像下面这样...

```
 SELECT bonus.* FROM bonus 
 LEFT JOIN selected_bonuses 
 ON bonus.id = selected_bonuses.member_id 
 WHERE (selected_bonuses.member_id = 'xxx' AND selected_bonuses.bonus_id IS NULL); 
```

我认为它会正常工作..

# javascript - 用 Javascript 添加一个类

> ID：14546424
> 
> 赞同：0
> 
> 时间：2013-01-27T10:23:04.643
> 
> 标签：javascript, html, css

当特定页面加载时，这些是`<li>`元素的状态：

```
<li class="li1 frame3" style="display: list-item; opacity: 0.3; left: 0px; top: 20px; z-index: 2;"></li>
<li class="li2 frame4" style="display: list-item; opacity: 0.3; left: 151px; top: 0px; z-index: 2;"></li>
<li class="li3 frame5" style="display: list-item; opacity: 0.3; left: 0px; top: 0px; z-index: 2;"></li> 
```

在任何时候，只有**一个** `<li>`拥有`left: 0px; top: 0px`. 我想使用javascript向具有此属性`.dummy`的元素添加一个类（例如，） 。`<li>`

我是 Javascript 的新手。我尝试添加 ign 这个：

```
$("li").addClass("dummy"); 
```

但我无法弄清楚所需的`if`陈述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:26:34.737

如果您询问如何将类名添加到 DOM 元素，它是这样的：

```
var liElements = document.getElementsByTagName("li");
for (var i = 0; i < liElements.length; i++) {
  var liElement = liElements[i];
  if (liElement.style.top == "0px" && liElement.style.left == "0px") {
    liElement.className += " dummy"; //Add the class name. Notice that the property is not called 'class'
  }
} 
```

编辑：添加了循环`li`元素的代码...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:31:52.007

```
div.classList.add("anotherclass"); 
```

详情：[https ://developer.mozilla.org/en-US/docs/DOM/element.classList](https://developer.mozilla.org/en-US/docs/DOM/element.classList)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-27T10:29:00.610

我不确定你想做什么。

但是要使用 jquery 添加一个类，您可以使用它：

```
$(selector).addClass(classname,function(index,oldclass)) 
```

你可以在这里阅读：http: [//www.w3schools.com/jquery/html_addclass.asp](http://www.w3schools.com/jquery/html_addclass.asp)

# oracle - 为什么在Oracle中建立了外部表概念？

> ID：14546429
> 
> 赞同：0
> 
> 时间：2013-01-27T10:23:27.607
> 
> 标签：oracle, oracle11g, external-tables

**SQL*Loader：** Oracle 使用此功能，通过 ORACLE_LOADER 访问驱动程序将数据从平面文件移动到数据库中；

**数据泵：**它使用数据泵访问驱动程序将数据从数据库中移出到专有 Oracle 格式的文件中，然后从该格式的文件中移回数据库中。

当数据加载可由 SQL*Loader 或 Data Pump 实用程序完成，而数据卸载也可由 Data Pump 实用程序完成时：

1.  是否有任何额外的好处可以通过使用外部表来实现，而前面提到的实用程序本身都无法做到？

2.  下面的 Oracle 表创建命令创建了一个看起来像 Oracle 表的表。为什么*Oracle*告诉我们将其称为外部表？

    ```
    create table export_empl_info organization external
      ( type oracle_datapump
        default directory xtern_data_dir
        location ('empl_info_rpt.dmp')
         ) as select * from empl_info; 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T22:26:15.590

> “是否有任何额外的好处可以通过使用外部表来实现，而前面提到的实用程序本身都无法做到？”

SQL*loader 和 Datapump 都要求我们先将数据加载到表中，然后才能使用数据库访问它。而我们只通过 SELECT 语句访问外部表。这是一种更加灵活的机制。

> “那么为什么 Oracle 告诉我们将其称为外部表？”

嗯，因为它是外部的。数据驻留在由操作系统控制的一个文件（或多个文件）中。我们可以通过运行 OS 命令来更改外部表中的数据，例如

```
$>  cp wnatever.csv external_table_data.csv 
```

没有重做、回滚、闪回查询或内部数据库表的任何其他附件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:41:12.157

我认为外部表对我的主要好处是：

i) 无需执行主机命令即可导入数据，这支持 Oracle 的趋势，即从数据库内部控制整个代码。11g中的预处理允许通过ftp访问远程文件、使用压缩文件、将多个文件合二为一等

ii) 更有效的加载，通过在加载过程中应用复杂的数据转换。聚合、合并、多表插入...等

我已将它用于数据仓库加载，但任何需要加载或访问标准数据文件的场景都可以使用外部表。SQL*Loader 作为从客户端或其他主机系统加载到 Oracle 数据库的工具仍然占有一席之地。数据泵是用于Oracle数据库之间的数据传输，所以它是相当不同的。

外部表的一个限制是它们不会处理流数据——必须对记录进行分隔。这在 10.2 中是正确的，不确定从那时起是否允许这样做。

使用系统目录视图 ALL/DBA/USER_EXTERNAL_TABLES 获取有关它们的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T02:54:03.937

RE：为什么外部表与 sqlldr 用于加载数据？主要是让服务器管理的并行性与客户端管理的并行性。

# c# - 通过人脉应用分享

> ID：14546434
> 
> 赞同：0
> 
> 时间：2013-01-27T10:24:17.190
> 
> 标签：c#, windows-8, windows-store-apps

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:11:22.883

From MSDN: “If your app can support multiple formats, and all those formats are present in the content being shared, we recommend that you process only the format that is the most relevant to your app. For example, if your app shares links, and it receives shared content that has both a link and some text, your app should process only the link.”</p>

[http://msdn.microsoft.com/en-us/library/windows/apps/hh771179.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh771179.aspx)

Basically, the data in all formats is expected to be equivalent, with richer formats containing more details, and the others being fallback options in case a target app doesn’t support the richer option (for example, you might share HTML that is nicely formatted, but include a text version with just the plain text content).

In Rowi's case, they inspect the data formats they accept (text, html, uri) and concatenate all of them in to the presented message. Whereas People app seems to prioritize and present only one based on that prioritization.

# javascript - javascript中的字符转义序列

> ID：14546436
> 
> 赞同：0
> 
> 时间：2013-01-27T10:24:24.587
> 
> 标签：javascript, escaping

刚刚注意到一些字符串（取自从 m3u 播放列表文件创建的数组）由于格式错误的十六进制字符转义序列而无法工作。

```
var strArray =  [
"#EXTM3U",
"C:\music\X Marks the Pedwalk - Desolation.mp3", //fine
"#EXTINF:287,Xandria - Ginger Sunset Expire", //fine
"C:\music\andria - Ginger Sunset Expire.mp3", //fine
"C:\music\xandria - Ginger Sunset Expire.mp3", // FAILS
"C:\\music\\xandria - Ginger Sunset Expire.mp3" //fine
]

alert (strArray); 
```

我可以用转义斜线绕过它。但我的问题是实际上是什么导致了错误。我认为这可能与 \x 有关，但这意味着第一首曲目也会失败。所以我有点困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:25:43.740

> 我认为这可能与 \x 有关，但这意味着第一首曲目也会失败。

不，因为`x`和`X`不是同一个字符。`\x`:-) （小写的）`x`在[字符串文字中是特殊的](http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.4)，`\X`（`X`大写的）不是。

最佳实践是*始终*转义反斜杠，这些反斜杠实际上是反斜杠，而不是转义序列的开头。否则，你*会*绊倒自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T23:59:41.900

您可以使用函数 str_replace. 替换反斜杠。

```
<?php

$bodytag = str_replace("%body%", "black", "<body text='%body%'>");

// Produce: <body text='black'> 
```

[http://php.net/manual/es/function.str-replace.php](http://php.net/manual/es/function.str-replace.php)

# java - 带有 HTML 的 JTextPane，为什么某些内联样式属性会被选择性地删除？

> ID：14546437
> 
> 赞同：2
> 
> 时间：2013-01-27T10:24:35.173
> 
> 标签：java, html, styles, jtextpane

我目前正在使用其中包含 html 的 JTextPane。我将它的内容类型设置为 html 并且一切正常……至少我是这么想的。

JTextPane 的功能是输出段落（与

标签），每个都有不同的颜色。每套

标签配备了内联样式属性。

现在我正在打印

像这样的标签：

```
String myLine = "<P style=\"color:blue;" +
        "padding-left:25px;" +
        "text-indent:-25px;" +
        "font-family:Courier New;" +
        "font-size:11;"  +
        "\">" ;
doc.insertBeforeEnd(body, myLine); 
```

其中 doc 是 JTextPane 的 JTextPane HTMLDocument，body 是我的 HTMLDocument 中的 body 元素。

它在 JTextPane 中输出一切都很好，文本是蓝色的，快递，11 号，带有悬挂缩进。完美的！

您可能会认为，如果您再次恢复文本，您将看到 P 标记，就像您构建它的方式一样。所以我使用 getText() 方法恢复其中的 html： **Reality**

```
<p style="text-indent: -25px; padding-left: 25px"> 
```

当我真正期待看到这个时： **期望**

```
<p style="color:blue; text-indent: -25px; padding-left: 25px; font-family:Courier New; font-size:11;"> 
```

为什么这样做？有没有办法避免这种情况？如果我不得不猜测，Java 似乎提取了文本属性，以便它可以通过自己的方式更有效地处理这些属性。

然而，我问这个的原因是因为一旦我开始更深入地自定义我的 JTextPane，颜色就开始变得不可靠。我宁愿将属性直接放在内联样式上。

在此先感谢，非常感谢您的帮助。

* * *

编辑：有人要求在之前和之后查看完整的 html 输出

添加了标签。

前：

```
<html>
  <head>

  </head>
  <body>

  </body>
</html> 
```

现在我在java中执行这段代码：

```
String htmlLine = "<p style=\"color:blue; " +
                             "text-indent: -25px; " +
                             "padding-left: 25px; " +
                             "font-family:Courier New; " +
                             "font-size:11;\" >" ;
try {
    doc.insertBeforeEnd(body, htmlLine);
} catch (Exception e) {
    System.err.println(e);
} 
```

后：

```
<html>
  <head>

  </head>
  <body>
    <p style="text-indent: -23px; padding-left: 25px">
      First Text
    </p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:10:27.563

根据 Java 文档`insertBeforeEnd()`

> 与 insertAfterEnd 方法不同，新元素成为指定元素的子元素，而不是兄弟元素。

这意味着插入的元素正在成为子元素并继承其父元素的样式。在插入时，HTMLDocument 在内部从已存在于父级的子级中删除重复的样式信息。所以这就是你得到的原因

```
<p style="text-indent: -25px; padding-left: 25px"> 
```

代替

```
<p style="color:blue;
          text-indent: -25px;
          padding-left: 25px;
          font-family: Courier New;
          font-size:11;" > 
```

最后，在你的情况下的原因是

*   您为父级设置了相同的样式。

# javascript - 与命名空间内部中的定义“id”和“r”存在冲突

> ID：14546442
> 
> 赞同：0
> 
> 时间：2013-01-27T10:25:08.217
> 
> 标签：javascript, actionscript-3, flash

我在我的 SWF 女巫开头有这个代码是横幅广告。

```
var id:String = root.loaderInfo.parameters.id;
var r:URLRequest = new URLRequest("javascript:expandEaFloating(" + id + ")");
navigateToURL(r,'_self'); 
```

所以这段代码调用了一个java脚本函数，女巫打开了浮动横幅，这样它就可以看到了。

然后当动画结束时，必须使用以下代码关闭它：

```
var id:String = root.loaderInfo.parameters.id;
var r:URLRequest = new URLRequest("javascript:collapseEaFloating(" + id + ")");
navigateToURL(r,'_self'); 
```

我已将此代码放在动画停止的第 500 帧中，并向我显示：“内部命名空间中的定义“id”和“r”存在冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:42:02.257

给`id`和`r`不同的名字。

```
var targetID:String = root.loaderInfo.parameters.id;
var jsRequest:URLRequest = new URLRequest("javascript:expandEaFloating(" + targetID + ")");
navigateToURL(jsRequest,'_self'); 
```

# c# - 线程间共享 Socket 实例

> ID：14546444
> 
> 赞同：0
> 
> 时间：2013-01-27T10:25:19.903
> 
> 标签：c#, sockets

我有一个多线程应用程序，其中不同的组件（在不同的线程中运行）需要发送 UDP 消息。现在它们都共享同一个 Socket 实例。

套接字创建为线程`Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp)`并`socket.Send(byte[] message)`从线程中调用。Socket.Send 是唯一被调用的方法。

这是一个不好的方法吗？我还没有看到任何问题，但我担心这不是套接字的使用方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T11:11:45.920

最“正确”的解决方案是创建一个调用 socket.send 方法的方法，并通过使用锁或互斥锁来保护该调用。这样，wikl 保证套接字对象在给定时间用于一次线程。您也可以使用队列来归档它。

# php - 如何从 Memcache 切换到 Memcached？

> ID：14546446
> 
> 赞同：1
> 
> 时间：2013-01-27T10:25:45.073
> 
> 标签：php, amazon-web-services, memcached

> **可能重复：**
> [使用 Memcache 与 Memcached 和 PHP](https://stackoverflow.com/questions/1442411/using-memcache-vs-memcached-with-php)

我正在使用 AWS Elasticache，并且我已经安装了 php 模块，我认为它是 spymemcached 的扩展。问题是我相信我正在运行 memcache 而不是 memcached。这是创建对象的代码：

```
$memcached = new Memcached();
$memcached->setOption(Memcached::OPT_CLIENT_MODE, Memcached::DYNAMIC_CLIENT_MODE);
$memcached->addServer('goneglobalcache-1a.expalp.cfg.apse1.cache.amazonaws.com', 11211);
$memcached->set('key', 'value', 60); 
```

当我去写入缓存时，我无法使用压缩设置，并被告知问题是我使用的是 memcache 客户端。

有没有办法告诉我正在使用哪种类型的客户端以及切换的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:44:43.300

世界上只有一台 Memcached 服务器。但是有两个 PHP 客户端库，一个名为“Memcache”，另一个名为“Memcached”。

有区别：[什么时候应该使用 Memcache 而不是 Memcached？](https://stackoverflow.com/questions/1442411/using-memcache-vs-memcached-with-php)

您需要哪一个应该记录在软件要求中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T10:41:37.660

如果你想使用 Memcache，你需要安装（编译）那个 PHP 扩展。

```
$memcache = new Memcache;
$memcache->set('key', 'value', MEMCACHE::COMPRESSED, 60); 
```

但请注意，Memcache 压缩使用`zlib`需要安装。

# c# - C# 网站中的错误日志记录

> ID：14546447
> 
> 赞同：0
> 
> 时间：2013-01-27T10:25:45.747
> 
> 标签：c#, asp.net, .net, logging, error-handling

我计划实现错误日志记录，编写类似于[此](http://www.dotnetcurry.com/ShowArticle.aspx?ID=94)的内容：

```
public static void WriteError(string errorMessage)
    {
        try
        {
            string path = "~/Error/" + DateTime.Today.ToString("dd-mm-yy") + ".txt";
            if (!File.Exists(System.Web.HttpContext.Current.Server.MapPath(path)))
            {
                File.Create(System.Web.HttpContext.Current.Server.MapPath(path)).Close();
            }
            using (StreamWriter w = File.AppendText(System.Web.HttpContext.Current.Server.MapPath(path)))
            {
                w.WriteLine("\r\nLog Entry : ");
                w.WriteLine("{0}", DateTime.Now.ToString(CultureInfo.InvariantCulture));
                string err = "Error in: " + System.Web.HttpContext.Current.Request.Url.ToString() +
                              ". Error Message:" + errorMessage;
                w.WriteLine(err);
                w.WriteLine("__________________________");
                w.Flush();
                w.Close();
            }
        }
        catch (Exception ex)
        {
            WriteError(ex.Message);
        }

    } 
```

我的问题是：由于它是一个网站，我将同时拥有多个用户。在那种情况下，如果多个用户同时遇到异常并尝试写入同一个文件，它会再次给我一个异常对吗？在这种情况下，如何为同时用户正确实现错误日志记录？或者这会奏效吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:28:07.450

我建议您使用已建立的日志记录框架，例如[NLog](http://nlog-project.org/)或[log4net](http://logging.apache.org/log4net/)。我过去在许多项目中都使用过 log4net，它完美地处理了这种情况。

编辑：

正如进一步的评论，以及处理来自多个线程的日志消息，log4net 还允许您管理日志文件的增长量，并通过[RollingFileAppender](http://logging.apache.org/log4net/release/sdk/log4net.Appender.RollingFileAppender.html)提供内置的滚动日志机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:43:23.610

除了使用 NLog 或其他日志库之外，您锁定这种情况的方式是使用互斥锁。我建议`mutex`，而不是`lock()`因为可以捕获所有可能引发错误的池/线程。

在 MSDN 上有详细信息`mutex`和示例：

[http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)

一个简单的例子

```
public static void WriteError(string errorMessage)
{
    var mut = new Mutex(true, "LogMutexName");

    try
    {   
        // Wait until it is safe to enter.
        mut.WaitOne();

        // here you open write close your file
    }
    finally
    {
        // Release the Mutex.
        mut.ReleaseMutex();
    }   
} 
```

# codeigniter - 如何设置 Dreamweaver 以使用 CodeIgniter？

> ID：14546449
> 
> 赞同：0
> 
> 时间：2013-01-27T10:25:49.620
> 
> 标签：codeigniter, dreamweaver

我正在使用dreamweaver cs5 和xampp。我在 htdoc 中创建了一个文件夹名称 CI，我所有的 codeigniter 文件和文件夹都在其中，即 application、system、user_guide、license.txt、index.php 和 .htaccess（空白）。

我的dreamweaver设置是：

```
Site
Site Name: codeIgniter   Local Site Folder: C:\xampp\htdocs\CI

Servers
ServerName: codeIgniter   Connect using: Local/Network
Server Folder: c:\xampp\htdocs\CI\   Web URL: http://localhost/site/

and i unticked remote server and ticked testing server. 
```

我的codeigniter设置是：

```
$config['base_url'] = 'http://localhost/site/';
$autoload['libraries'] = array('database');
and created site.php in the controller. 
```

我在 Dreamweaver 中遇到的错误是：无法解析动态相关文件，因为此服务器的站点定义不正确。重试|设置。

此外，当我尝试将其视为实时视图或在浏览器中查看时，它会将我带到 localhost/site/application/controllers/site.php ，其中说找不到对象

但是使用notepad ++一切都很好，我看不出设置codeigniter有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:38:50.907

您的 weburl 必须与您的站点根目录匹配，更改您的 weburl 并`$config['base_url']`检查`http://localhost/CI/`您的服务器模型是否设置为 php/mysql。

# css - 需要帮助将表单与 CSS 对齐

> ID：14546450
> 
> 赞同：0
> 
> 时间：2013-01-27T10:26:04.213
> 
> 标签：css, forms, alignment

嘿，我有一个非常简单的问题，但我不太确定如何在不使用 HTML 表格的情况下实现这一目标。基本上我想要的是标签在左边，右边有 3 个单选按钮。问题是，我希望每个单独的单选按钮垂直对齐。

例如：

标签 - 选择 1
..........- 选择 2
..........- 选择 3

我使用的 HTML 结构如下：

```
<label for="radio1">Label</label>
<input type="radio" name="radio1"> <span class="form-span">Option 1</span>
<input type="radio" name="radio1"> <span class="form-span">Option 2</span>
<input type="radio" name="radio1"> <span class="form-span">Option 3</span> 
```

谁能帮我正确对齐表格？

谢谢 ：）

**编辑**

我找到了一个非常简单的解决方案，想知道它是否可以接受：请告诉我它是否可以根据 HTML 标准接受？

```
<label for="radio1">Label</label>
<span class="form-span"><input type="radio" name="radio1"> <span class="form-label">Option 1</span></span>
<span class="form-span"><input type="radio" name="radio1"> <span class="form-label">Option 2</span></span> 
```

和 CSS：

```
.form-span {display:block} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:59:22.340

**HTML**

```
<label for="radio1">Label</label>
<div id="parentDiv">
<input type="radio" name="radio1"> <span class="form-span">Option 1</span>
<input type="radio" name="radio1"> <span class="form-span">Option 2</span>
<input type="radio" name="radio1"> <span class="form-span">Option 3</span>
</div> 
```

**CSS**

```
#parentDiv, label, input, span {
   float:left;
}

input {
   clear:both;
   margin-left:5px;
}

span {
   margin-left:5px;
} 
```

看看：http: [//jsfiddle.net/gNHB7/](http://jsfiddle.net/gNHB7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:28:46.413

最简单的方法是将所有内容包装在一个 div 中：

```
<div class="container">
   <label for="radio1">Label</label>
   <input type="radio" name="radio1"> <span class="form-span">Option 1</span>
   <input type="radio" name="radio1"> <span class="form-span">Option 2</span>
   <input type="radio" name="radio1"> <span class="form-span">Option 3</span>
</div> 
```

然后添加以下CSS：

```
 .container{height:200px;}
   label{float:left; height:100%;}
   input{float:left;}
   .form-span{display:block;} 
```

看看这个**[jsFiddle](http://jsfiddle.net/yUsyQ/)**来看看一个活生生的例子。

# html - 在 HTML 中指定 Etag 或到期日期

> ID：14546452
> 
> 赞同：0
> 
> 时间：2013-01-27T10:26:06.337
> 
> 标签：html, http-headers

我有一个纯 HTML 网站，并且无法访问 IIS 服务器，它是一个基本网站，现在每当我在性能测试工具（如 Pingdom 工具、GTMetrix、Google Insights 等）中检查网站性能时。

它总是说“利用浏览器缓存”，这会对我的网站性能产生不利影响

我为设置（css、js、图像、html 等）的到期日期做了很多研究，但都显示了 IIS 的选项。我正在使用没有 Apache、没有 IIS 的纯 HTML，它是一个基本的 Windows 托管服务提供商。

谁能告诉我可以用来从 HTML 本身设置上述源的到期标头的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:49:13.997

如果页面（来自任何类型/扩展名）是静态的（不像 PHP、ASP 等那样是动态的），那么缓存机制应该是非常自动的。Web 服务器应该为您添加[Last-Modified 或 ETag 标头](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)，并且浏览器（或“用户代理”）应该理解这些。

[您可以使用诸如Fiddler2](http://www.fiddler2.com/fiddler2/)（在 Windows 上）之类的工具检查这些标头是否存在。

如果它们不存在，那么您将不得不使用[HTTP 等效的 META 标记](http://www.w3schools.com/tags/att_meta_http_equiv.asp)，如下所示：

```
<meta http-equiv="last-modified" content="Sun, 27 Jan 2012 11:52:12 GMT" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:34:23.330

使用`meta`-Tags 在 HTML 中设置 HTTP 标头：

`<meta http-equiv="foo" content="bar" />`

[http://en.wikipedia.org/wiki/Meta_element#HTTP_message_headers](http://en.wikipedia.org/wiki/Meta_element#HTTP_message_headers)

# google-app-engine - 谷歌应用引擎：如何处理并发（竞速条件）

> ID：14546456
> 
> 赞同：0
> 
> 时间：2013-01-27T10:26:49.323
> 
> 标签：google-app-engine

我正在尝试基于[此](https://groups.google.com/forum/#!msg/google-appengine/PCETXA1pAQw/hY8-uK9cnGIJ)解决赛车问题，以防止重复用户注册。因此，如果帐户存在或电子邮件已被使用，则不会创建任何实体。

```
@ndb.transactional
def get_or_insert2(account, email):
    accountExists, emailExists = False, False
    entity = Member.get_by_id(account)
    if entity is not None:
        accountExists = True
    if Member.query(Member.email==email).fetch(1):
        emailExists = True
    if not accountExists and not emailExists:
        entity = Member(id=account)
        entity.put()
    return (entity, accountExists, emailExists) 
```

我的问题：

1.  我收到一条错误消息：BadRequestError：事务中只允许祖先查询。问题是什么？

2.  代码是否正确？我的意思是，它真的能解决赛车问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T22:10:03.087

[事务](https://developers.google.com/appengine/docs/python/datastore/transactions)适用于实体组，您可以在跨组事务中包含最多 5 个实体组。实体组由单个服务器（或组，已复制）处理，这意味着在检查数据或在实体组内进行祖先查询时，它能够具有一致的内部状态。

常规查询是全局的，索引具有最终一致性。您不知道何时将所有节点的所有更改都包含在索引中。您无法锁定整个数据存储来为您的事务获取一致的快照状态。如果您习惯于为查询使用一致的索引，这是与常规 RDBMS 的关键区别。

对于 1)，问题在于您正在事务中执行常规查询，这不像上面解释的那样工作。2) 的答案变成否，查询不能解决赛车问题，你需要显式获取。

您将需要会员、电子邮件和 SSN 的模型。这是一个未经测试的快速示例，希望能帮助您：

```
class Member(ndb.Model):
    email = ndb.KeyProperty()
    ssn = ndb.KeyProperty()
    # More user properties goes here...

class Email(ndb.Model):
    member = ndb.KeyProperty()

class SSN(ndb.Model):
    member = ndb.KeyProperty()

@ndb.tasklet
def get_or_insert2(account, email, ssn):
    created = False
    member_key = ndb.Key(Member, account)
    email_key = ndb.Key(Email, email)
    ssn_key = ndb.Key(SSN, ssn)
    member_obj, email_obj, ssn_obj = yield ndb.get_multi_async([member_key, email_key, ssn_key])

    if member_obj is None and email_obj is None and ssn_obj is None:
        member_obj = Member(key=member_key, email=email_key, ssn=ssn_key))
        email_obj = Email(key=email_key, member=member_key)
        ssn_obj = SSN(key=ssn_key, member=member_key)
        yield ndb.put_multi_async([member_obj, email_obj])
        created = True

    raise ndb.Return([created, member_obj, email_obj, ssn_obj])

outcome = ndb.transaction(lambda: get_or_insert2(account, email, ssn), xg=True) 
```

我不确定将 @ndb.tasklet 和 @ndb.transactional(xg=True) 装饰器结合起来是否有效，如果可以，请尝试使用哪种顺序。

如果您需要根据电子邮件或 ssn 查询用户，例如，您可以将 KeyProperties 重命名为 *_ref 并进行类似的操作

```
@ndb.ComputedProperty
def email(self):
    return self.email_ref.id() 
```

虽然这最终是比您预期的更多的代码行，但它在概念上是简单和直接的，当您稍后再看它时，您可以很容易地弄清楚发生了什么。

# facebook-graph-api - 我是否需要 Facebook 批准我的网站才能拥有“使用 Facebook 登录”功能？

> ID：14546457
> 
> 赞同：0
> 
> 时间：2013-01-27T10:26:59.130
> 
> 标签：facebook-graph-api, facebook-login

我正在寻找建立一个网站，并正在考虑“使用 facebook 登录”功能，这样用户就不会是匿名的。我不需要自动发布到 facebook 或类似的东西，但想使用 facebook 个人资料图片和名称。有谁知道这是否属于“Facebook Open Graph”类别，因此需要 Facebook 对我自己的网站的批准？或者任何网站都可以使用“用facebook登录”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:57:46.853

每个网站都可以使用“用 Facebook 登录”——这就是所谓的“Facebook Connect”。Open Graph 是另一回事，尽管您可以在使用 Facebook Connect 时使用 Open Graph 功能。

请查看[https://developers.facebook.com/blog/post/2013/01/25/clarifying-our-platform-policies/](https://developers.facebook.com/blog/post/2013/01/25/clarifying-our-platform-policies/)，其中 Facebook 澄清了 Facebook connect 的使用。

# php - 谷歌联系人通过 OAuth 在 PHP 中导入 Mysql

> ID：14546459
> 
> 赞同：3
> 
> 时间：2013-01-27T10:27:07.570
> 
> 标签：php, api, contacts

我正在使用 jquery mobile 创建一个小型应用程序，服务器端语言为 php，所以我想使用 OAuth 将我所有的谷歌联系人（姓名、号码和电子邮件）导入 mysql 数据库。目前我正在使用以下脚本，它只能获取电子邮件地址，但有没有办法导入姓名和号码？

```
 <html>
    <head>
        <meta name="robots" content="noindex" />
        <title>Email address list - Import Gmail or Google contacts</title>
    <style type="text/css">
        a:link {color:Chocolate;text-decoration: none;}
        a:hover {color:CornflowerBlue;}
        .logo{width:100%;height:110px;border:2px solid black;background-color:#666666;}
    </style>
    </head>
    <body>
        <div class="logo" >
            <a href="http://25labs.com/" >
                <img style="padding-top: 10px;" src="http://25labs.com/wp-content/themes/TheStyle/images/logo.png"></img>
            </a>
        </div>
<br/>
        <div><b>Visit Tutorial: </b><a style="font-size:17px;" href="http://25labs.com/import-gmail-or-google-contacts-using-google-contacts-data-api-3-0-and-oauth-2-0-in-php/" >Import Gmail or Google contacts using Google Contacts Data API 3.0 and OAuth 2.0 in PHP</a></div>
            <br/>
        <div style="padding-left: 50px;">
<?php
$client_id = '';
$client_secret = '';
$redirect_uri = '';
$max_results = 1000;

$auth_code = $_GET["code"];

function curl_file_get_contents($url)
{
 $curl = curl_init();
 $userAgent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322)';

 curl_setopt($curl,CURLOPT_URL,$url);   //The URL to fetch. This can also be set when initializing a session with curl_init().
 curl_setopt($curl,CURLOPT_RETURNTRANSFER,TRUE);    //TRUE to return the transfer as a string of the return value of curl_exec() instead of outputting it out directly.
 curl_setopt($curl,CURLOPT_CONNECTTIMEOUT,5);   //The number of seconds to wait while trying to connect.    

 curl_setopt($curl, CURLOPT_USERAGENT, $userAgent); //The contents of the "User-Agent: " header to be used in a HTTP request.
 curl_setopt($curl, CURLOPT_FOLLOWLOCATION, TRUE);  //To follow any "Location: " header that the server sends as part of the HTTP header.
 curl_setopt($curl, CURLOPT_AUTOREFERER, TRUE); //To automatically set the Referer: field in requests where it follows a Location: redirect.
 curl_setopt($curl, CURLOPT_TIMEOUT, 10);   //The maximum number of seconds to allow cURL functions to execute.
 curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0); //To stop cURL from verifying the peer's certificate.
 curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0);

 $contents = curl_exec($curl);
 curl_close($curl);
 return $contents;
}

$fields=array(
    'code'=>  urlencode($auth_code),
    'client_id'=>  urlencode($client_id),
    'client_secret'=>  urlencode($client_secret),
    'redirect_uri'=>  urlencode($redirect_uri),
    'grant_type'=>  urlencode('authorization_code')
);
$post = '';
foreach($fields as $key=>$value) { $post .= $key.'='.$value.'&'; }
$post = rtrim($post,'&');

$curl = curl_init();
curl_setopt($curl,CURLOPT_URL,'https://accounts.google.com/o/oauth2/token');
curl_setopt($curl,CURLOPT_POST,5);
curl_setopt($curl,CURLOPT_POSTFIELDS,$post);
curl_setopt($curl, CURLOPT_RETURNTRANSFER,TRUE);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER,0);
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST,0);
$result = curl_exec($curl);
curl_close($curl);

$response =  json_decode($result);
$accesstoken = $response->access_token;

$url = 'https://www.google.com/m8/feeds/contacts/default/full?max-results='.$max_results.'&oauth_token='.$accesstoken;
$xmlresponse =  curl_file_get_contents($url);
if((strlen(stristr($xmlresponse,'Authorization required'))>0) && (strlen(stristr($xmlresponse,'Error '))>0))
{
    echo "<h2>OOPS !! Something went wrong. Please try reloading the page.</h2>";
    exit();
}
echo "<h3>Email Addresses:</h3>";
$xml =  new SimpleXMLElement($xmlresponse);
$xml->registerXPathNamespace('gd', 'http://schemas.google.com/g/2005');
$result = $xml->xpath('//gd:email');

foreach ($result as $title) {
  echo $title->attributes()->address . "<br>";
}
?>
</div>
</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-13T23:07:45.887

此代码使用 ZF2 客户端，但您可以理解：

```
 $client = new \Zend\Http\Client('https://www.google.com/m8/feeds/contacts/default/full?max-results=100000&alt=json', array(
            'adapter' => 'Zend\Http\Client\Adapter\Curl'
        ));
        $client->setHeaders(array(
            array('Authorization' => 'Bearer ' . $ACCESS_TOKEN)
        ));

        $client->send();
        if ($client->getResponse()->getStatusCode() != 200) {
            return false;
        } else {
            $output = json_decode($client->getResponse()->getBody());
            if ($output) {
                $entries = $output->feed->entry;

                foreach ($entries as $e) {
                    print_r($e); // here you can see all the available information
                }
            }
        } 
```

# ruby-on-rails - Rails 3.2 + 邮件程序 + image_tag

> ID：14546464
> 
> 赞同：2
> 
> 时间：2013-01-27T10:27:48.483
> 
> 标签：ruby-on-rails, asset-pipeline

我有：

```
/public/images/fb.png 
```

在 /config/environment/development.rb 中：

```
config.action_mailer.asset_host = "http://192.155.90.155:3000" 
```

在我的邮件视图中：

```
image_tag 'fb.png' 
```

邮件正文包含：

```
<img src="http://192.155.90.155:3000/assets/fb.png"> 
```

**但我想得到：**

```
<img src="http://192.155.90.155:3000/images/fb.png"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:17:21.923

资产管道是为了简化资产管理。如果您打算使用这个不错的功能，您应该考虑遵守资产管道的约定。[在这里](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)您可以找到建议的资产组织，它建议将图像放入`assets/images`目录（您可以在`application.rb`文件中修改），通常是`app/assets/images`,`lib/assets/immages`和`vendor/assets/immages`. 摘要：将您的图像放在资产管道托管目录之一中。

# php - 用于电子邮件表单的 php 复选框数组

> ID：14546465
> 
> 赞同：0
> 
> 时间：2013-01-27T10:27:55.007
> 
> 标签：php, email

我是 stackoverflow 的新手，但在尝试了多种方法后，我无法理解这个电子邮件表单。表单工作正常，但我尝试添加 4 个可选复选框，以便客户可以勾选，以便我们知道他们感兴趣的包。我想我已经正确设置了前端：

 `````
 <p><label for="author">Full Name:</label><br />
    <input type="text" name="cf_name" class="details" tabindex="1" /></p>

<p><label for="telephone">Telephone:</label><br />
    <input type="text" name="cf_telephone" class="details" tabindex="2" /></p>

<p><label for="email">E-mail:</label><br />
         <input type="text" name="cf_email" class="details" tabindex="3" /></p>

<p><label for="package">Package Type:</label><br />
   <input type="checkbox" name="cf_package[]" class="package" value="Business English Classes" tabindex="4" /> Business English Classes<br />

        <input type="checkbox" name="cf_package[]" class="package" value="English Conversation Classes" tabindex="4" /> English Conversation Classes<br />

        <input type="checkbox" name="cf_package[]" class="package" value="Exam Preparation Classes" tabindex="4" /> Exam Preparation Classes<br />

        <input type="checkbox" name="cf_package[]" class="package" value="Writing Skills Classes" tabindex="4" /> Writing Skills Classes
</p>

        <p><label for="message">Questions/Comments:</label><br />
<textarea type="text" name="cf_message" class="questions" tabindex="8"></textarea></p>

<p style="padding-top:10px;"><input type="submit" name="submit" value="Submit" class="button" tabindex="9" /> <input type="reset" name="submit" value="Clear" class="button" tabindex="10" /></p> 
````  `我的后端脚本如下：

```
<code><?php
// get all values from form and remove spaces before/after values
$field_name = trim($_POST['cf_name']);
$field_telephone = trim($_POST['cf_telephone']);
$field_email = trim($_POST['cf_email']);
$field_package = trim($_POST['cf_package']);
$field_message = trim($_POST['cf_message']);

  $mail_to = 'theenglishbeehive@gmail.com';

 $subject = 'Enquiry from '.$field_name;

// check if user input own e-mail -> generate headers and send mail
if ($field_email && $field_message)
 {
 // generate body of message
   $body_message  = "From: ".$field_name."\n";
   $body_message .= "Telephone: ".$field_telephone."\n";
   $body_message .= "E-mail: ".$field_email."\n";
   $body_message .= "Package Type: ".$field_package."\n";
   $body_message .= "Questions/Comments: ".$field_message;

   $headers  = "From: ".$field_email."\n";
   $headers .= "Reply-To: ".$field_email."\n";
   $headers .= "Return-Path: ".$field_email."\n";
   $headers .= "X-Priority: 3 (Normal)\n";
   // send email
$mail_status =  mail($mail_to, $subject, $body_message, $headers);

         }

         // success ?
        if ($mail_status)
        {
        ?>
<script language="javascript" type="text/javascript">
    window.location = 'enquiry-sent.php';
</script>
       <?php
      }
    else
     {
    ?>
<script language="javascript" type="text/javascript">
    alert('Message failed. Please, send an email to    theenglishbeehive@gmail.com');
    window.location = 'index.php';
</script>
   <?php
   }
   ?>
   </code> 
```

希望我也能在网站上正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:34:32.533

选定的“包”将作为数组而不是字符串发送到服务器，因为您使用数组表示法 ([]) 并使用复选框，人们可以选择多个包。

您可能希望将数组转换为逗号分隔的字符串并显示用户选择的包：

```
$field_package = implode(', ', $_POST['cf_package']); 
```

进而：

```
$body_message .= "Package Type(s): ".$field_package."\n"; 
```

如果只允许选择一个选项，您可以考虑使用单选按钮而不是复选框。``

# ios - iOS 位置管理器和顺序处理

> ID：14546467
> 
> 赞同：1
> 
> 时间：2013-01-27T10:28:02.487
> 
> 标签：ios, asynchronous, cllocationmanager, synchronous, sequential

我在 viewController 中有一个 LocationManager，我想从中监听用户位置的重大变化。然后，当*locationManager:didUpdateToLocation:fromLocation:*触发时，我通过调用一个自定义对象来执行一些数据处理，该对象是同一个 viewController 的私有属性并且始终是同一个对象：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation
{
   if (dataProcessor == nil) {
    dataProcessor = [[DataProcessor alloc] initWithDefaultValues];
   }

   [dataProcessor processData:someData];
} 
```

反过来，由*dataProcessor*调用的方法稍后会调用另一个 self 方法，并且此*dataProcessor执行的整个处理可能在**locationManager:didUpdateToLocation:fromLocation:*再次到达之前尚未完成，然后另一个*[dataProcessor processData:someData]*调用制作。

我的问题是，在这种情况下应该是什么行为？作为被调用的同一个对象，第二个调用是否排队等待第一个调用完成？*或者是否可以在从第一个processData*调用调用的不同方法的调用之间执行第二个调用？我不知道如何在 Xcode 中查看和调试它。我需要确保按照位置管理器通知新位置的顺序执行和完成数据处理。我目前没有使用我创建的任何线程，也没有使用 GCD 队列，也没有使用信号量，因为我不确定那里到底发生了什么，我不知道我是否需要这些功能中的任何一个。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:14:19.077

`processData`方法将作为串行队列执行，因为它是在主线程上执行的。

[http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)

# ios - Cocos2D - 调用另一个类中的方法时出现奇怪的警告

> ID：14546469
> 
> 赞同：0
> 
> 时间：2013-01-27T10:28:07.603
> 
> 标签：ios, methods, cocos2d-iphone, warnings

我必须上课，生存和HUDLayer。在我的 HUDLayer 中，我有一个 SneakyButton，使用该按钮我在 Survival.m 中调用了一个名为 -(void)fire 的方法，但是当我调用该方法时，我收到错误消息`CCSpriteBatchNode: resizing TextureAtlas capacity from` ，并且我知道该方法正在被调用，因为我检查了一个 NSLog()

```
-(void)fire {
NSLog(@"Fire");
} 
```

在我的日志中，它返回 Fire 以及那个奇怪的警告。当我收到警告时，fps 下降到 30 左右。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:55:46.713

这是你可以在 cocos2d 源代码中找到的关于调整纹理图集大小的内容：

```
// if we're going beyond the current CCTextureAtlas's capacity,
// all the previously initialized sprites will need to redo their texture coords
// this is likely computationally expensive 
```

[这是对](http://www.cocos2d-iphone.org/forum/topic/20821)正在发生的事情的解释：

> 精灵的内部数组正在增加，因为您正在向批处理添加更多精灵（日志在那里只是为了让您知道调试版本）。

子节点也计入达到精灵的容量限制。

您可以尝试为批处理节点设置更高的限制：

```
[CCSpriteBatchNode batchNodeWithFile:@"myAtlas.png" capacity:100]; // capacity for 100 objects 
```

以减少这种情况发生的频率。

# android - AutoCompleteTextView 加载结果缓慢

> ID：14546470
> 
> 赞同：0
> 
> 时间：2013-01-27T10:28:09.853
> 
> 标签：android, android-sqlite, autocompletetextview

我的 sqlite 数据库中有大约 82,000 个条目，我希望能够使用 android 的 AutoCompleteTextView 快速动态加载建议。我尝试增加阈值，但在输入文本和 AutoCompleteTextView 动态更新建议列表之间仍然存在明显的延迟。我可以采取哪些步骤来优化此过程？

# mysql - 删除数据库中的所有外键（MySql）

> ID：14546477
> 
> 赞同：22
> 
> 时间：2013-01-27T10:29:06.720
> 
> 标签：mysql, foreign-keys

我想重命名表中的列，该列是许多表的外键。显然，这只有在您删除约束时才有可能，正如我在此[链接](https://stackoverflow.com/questions/2014498/renaming-foreign-key-columns-in-mysql/2014519#2014519)中发现的那样。

我不想手动删除所有约束有没有办法删除数据库中的所有外键约束？

我也尝试过`SET FOREIGN_KEY_CHECKS=0;`，但我仍然无法重命名该列。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-09-24T13:01:46.233

您可以使用此 SQL 生成 ALTER TABLES（`!!YOUR_SCHEMA_HERE!!`需要由您的架构替换）：

```
SELECT concat('alter table `',table_schema,'`.`',table_name,'` DROP FOREIGN KEY ',constraint_name,';')
FROM information_schema.table_constraints
WHERE constraint_type='FOREIGN KEY'
AND table_schema='!!YOUR_SCHEMA_HERE!!'; 
```

它将生成如下 SQL：

```
alter table `viewpoint_test`.`answer_code` DROP FOREIGN KEY fk_answer_code_codebook_item1;
alter table `viewpoint_test`.`answer_code` DROP FOREIGN KEY fk_answer_code_questionary_answer1;
alter table `viewpoint_test`.`codebook` DROP FOREIGN KEY codebook_ibfk_1;
... 
```

“模式名称”是指您的数据库名称。这是同一件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:06:20.747

您可以尝试使用 As Like of following ..

```
ALTER TABLE tableName
DROP FOREIGN KEY fieldName;
ADD FOREIGN KEY (newForignKeyFieldName); 
```

您也可以尝试使用参考键。就像.....

```
ALTER TABLE tableName
DROP FOREIGN KEY fieldName;
ADD FOREIGN KEY (newForignKeyFieldName)
REFERENCES anotherTableName(reference_id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-12T14:39:34.560

以下查询将自动构建正确的语法。确保将您的真实数据库模式名称放在`WHERE`条件中。只需执行返回的每一行，你的一切`FOREIGN KEYS`都会消失。

我把反面（把它们加回来）留给你作为练习。

```
SELECT CONCAT("alter table ", TABLE_NAME," drop foreign key ", CONSTRAINT_NAME,"; ") AS runMe
FROM information_schema.key_column_usage 
WHERE TABLE_SCHEMA='MY_SCHEMA_NAME' AND CONSTRAINT_NAME <> 'PRIMARY'; 
```

如果您需要它独立于模式，您可以编写： `TABLE_SCHEMA=DATABASE()`获取当前活动的数据库名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-05T20:42:22.070

找到这个帖子后我仍然遇到一些问题，但我似乎找到了适合我的工作流程。

# 数据库删除

如果您使用的是 MySQL Workbench，则需要通过执行以下 3 个步骤来关闭 SAFE UPDATE：

1.  MySql Workbench > Preferences > SQL EDITOR >（设置底部）
2.  关闭安全更新
3.  然后注销您的连接并重新连接

## 开始清除数据库并开始新的步骤

1.  删除表中的所有数据

（这个 MySQL 脚本将为数据库中的每个表创建一个 DELETE FROM 脚本。）

`SELECT concat('DELETE FROM ',table_schema,'.',table_name,';') FROM information_schema.table_constraints WHERE table_schema='!!TABLE_SCHEMA!!';`

复制它的输出并运行它。您可能需要逐行进行此操作。

2.  从表中删除所有外键

（这个 MySql 脚本将为数据库中的每个表创建一个 ALTER TABLE _ DROP FOREIGN KEY 脚本。）

`SELECT concat('alter table ',table_schema,'.',table_name,' DROP FOREIGN KEY ',constraint_name,';') FROM information_schema.table_constraints WHERE constraint_type='FOREIGN KEY' AND table_schema='!!TABLE_SCHEMA!!';`

复制它的输出并运行它。您可能需要逐行进行此操作。

完成此操作后，您应该能够运行 DROP DATABASE 脚本。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-01-27T11:07:06.430

执行以下查询

```
select * from information_schema.key_column_usage 
```

将向您显示数据库中存在的所有约束（包括列名、约束类型、表和架构）。您会注意到这些列：

```
CONSTRAINT_CATALOG
CONSTRAINT_SCHEMA
CONSTRAINT_NAME
TABLE_CATALOG
TABLE_SCHEMA
TABLE_NAME
COLUMN_NAME
ORDINAL_POSITION
POSITION_IN_UNIQUE_CONSTRAINT
REFERENCED_TABLE_SCHEMA
REFERENCED_TABLE_NAME
REFERENCED_COLUMN_NAME 
```

然后，如果您打算删除引用列的每个约束，则应考虑**REFERENCED_***列并运行如下内容：

```
DELETE FROM information_schema.key_column_usage 
WHERE 
    REFERENCED_TABLE_SCHEMA='myschema'
    AND
    REFERENCED_TABLE_NAME='mytable'
    AND
    REFERENCED_COLUMN_NAME='mycolumn' 
```

[http://dev.mysql.com/doc/refman/5.1/en/key-column-usage-table.html](http://dev.mysql.com/doc/refman/5.1/en/key-column-usage-table.html)

# performance - ViewModel 嵌套参考：性能问题？

> ID：14546478
> 
> 赞同：0
> 
> 时间：2013-01-27T10:29:21.120
> 
> 标签：performance, asp.net-mvc-4, asp.net-mvc-viewmodel

我有一个疑问，我承认我是 C# 和软件架构的初学者。我正在研究 ASP.NET MVC4 + EF5，我正在尝试使用三层架构来构建我的应用程序。

在我的 BL 中，我创建了这两个视图模型：

**单词**

```
namespace BL
{
  public class WordViewModel : IWord
  {
    [Required, ReadOnly(true)]
    public int WordId { get; set; }
    public string LanguageId { get; set; }
    public int VocabularyId { get; set; }

    public LanguageViewModel Language { get; set; }    
    public VocabularyViewModel Vocabulary { get; set; }    
  }
} 
```

**词汇**

```
namespace BL
{
  public class VocabularyViewModel : IVocabulary
  {
    [Required, ReadOnly(true)]
    public int VocabularyId { get; set; }
    public string Name { get; set; }
    public List<WordViewModel> Words { get; set; }
  }
} 
```

调试时我注意到（很明显）有一种“嵌套循环”，我的意思是一个单词包含一个词汇表，其中包含一个单词列表，每个单词都包含一个词汇表，包含一个单词列表......和很快。

按照教程，在我看来我写的是正确的..但**我在考虑性能和内存消耗..这是一个问题吗？**（但应该是我的设计也是错误的，我希望不会）

此外，但这不是一个大问题，我正在使用**AutoMapper**将我的 DAL 层（实际上是 WordRepository 和 VocabularyRepository）提供的对象映射到我的视图模型。创建嵌套映射很容易，但同样，**它会消耗内存**吗？

谢谢..我知道我是新手，我正在努力做到最好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:51:43.823

您应该尽量避免模型中的双向关系。通常没有必要，他们需要维护很多额外的代码。例如，我没有看到任何代码确保在将单词添加到词汇表时，在单词模型上设置对词汇表的引用。这样模型很容易进入无效状态。

在这种情况下，我认为您不需要参考单词模型中的词汇表。存储库可以检索词汇表，然后您可以通过 List 属性访问这些单词（EF 将为您加载它们）。

此外，您似乎混淆了视图模型和模型。模型是问题域的表示，这些模型通常保存到数据库中。Viewmodels 是专门定制的类，包含特定视图的所有信息，它们通常存在于 Web 层本身，因为它们与视图紧密耦合。Viewmodels 可以包含从多个模型对象检索到的信息。Automapper 通常用于从模型对象创建视图模型。

存储库是检索和存储模型的类。它们看起来像这样：

```
public class VocabularyRepository
{
  public Vocabulary Get(int id)
  {
    ... 
  }

  public void Save(Vocabulary vocabulary)
  {
    ...
  }
} 
```

这里有很多东西要学，希望这会让你朝着正确的方向前进。检查此问题以获取有关 asp.net mvc 架构的更多信息：[https ://softwareengineering.stackexchange.com/questions/30348/best-practices-for-mvc-architecture](https://softwareengineering.stackexchange.com/questions/30348/best-practices-for-mvc-architecture)

# .net - MSIL 虚拟地址

> ID：14546485
> 
> 赞同：4
> 
> 时间：2013-01-27T10:30:14.103
> 
> 标签：.net, vb.net, cil

请看下面的 MSIL 代码：

```
IL_00:  ldstr      "Hello World"
IL_05:  call       void [mscorlib]System.Console::WriteLine(string)
IL_10:  ret 
```

IL_00、IL_05 和 IL_10 是什么意思？我在大学读过操作系统概念，所以当时我了解 Windows 操作系统如何为进程分配虚拟内存。我也不明白为什么在上述情况下；地址以 5 递增。

托管代码是从 VB.NET 应用程序生成的。

我花了一些时间在谷歌上搜索这个，我已经阅读了 MSDN 上的一些文章。我仍然不清楚，因此问题的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T11:24:19.247

它们只是您的 IL 反汇编程序生成的虚假“地址”。LDSTR 操作码需要 1 个字节作为操作码、0x72 和 4 个字节作为操作数。这是一个标记值，它从存储字符串文字的元数据表中选择字符串。所以下一个 IL 操作码从偏移量 5 开始。同样的配方，CALL 需要一个字节用于操作码，0x28，以及 4 个字节用于操作数，方法令牌。所以下一个 IL 操作码从偏移量 10 开始。RET 需要 1 个字节，0x2A，并且没有操作数。IL 代码总大小为 11 个字节。

您的反汇编程序生成这些“地址”以向您显示分支指令的目标。您没有，请尝试反汇编使用 if() 语句的代码来查看。它们在其他方面无关紧要，因为抖动将此代码转换为看起来非常不同的机器代码。

# windows - 如何在 Windows 7 下强制使用特定网络接口在 Python 中进行传出连接？

> ID：14546486
> 
> 赞同：7
> 
> 时间：2013-01-27T10:30:25.053
> 
> 标签：windows, pycurl, network-interface

我在 Windows 7 环境中有两个网络适配器，它们都连接到 Internet：

1.  以太网适配器（本地地址 10.9.187.251，外部地址 32.181.63.52）
2.  无线网卡（本地地址 192.168.1.178，外部地址 5.7.68.81）

默认使用以太网适配器。

我想通过 Python 脚本中的无线 LAN 与传出的外部地址 5.7.68.81 建立连接。

我执行以下操作：

```
import pycurl, StringIO, re
c = pycurl.Curl()
c.setopt(pycurl.URL, 'http://myproxylists.com/my-http-headers')
c.setopt(pycurl.INTERFACE, "192.168.1.178")
b = StringIO.StringIO()
c.setopt(pycurl.WRITEFUNCTION, b.write)
c.setopt(pycurl.SSL_VERIFYPEER, False)
c.setopt(pycurl.SSL_VERIFYHOST, False)
c.perform()
rsp = b.getvalue()
mtch = re.search(r'REMOTE_ADDR == (\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})', rsp)
print mtch.group(1) 
```

我得到打印输出：

```
32.181.63.52 
```

所以使用了默认适配器。似乎`c.setopt(pycurl.INTERFACE, "192.168.1.178")`不起作用，或者我使用错误的方式。

我也尝试了[这个问题](https://stackoverflow.com/questions/1150332/source-interface-with-python-and-urllib2)的所有答案`urllib2`和`socket.bind(('192.168.1.178', 0)`- 相同的结果。

如何在**Windows 7**中使用 Python 2.7 为传出连接指定网络接口？

# php - 从后台进程启动后台进程

> ID：14546487
> 
> 赞同：1
> 
> 时间：2013-01-27T10:30:37.300
> 
> 标签：php, linux, process, background-process

我`test.php`在 linux Ubuntu 中有一个 PHP 脚本，在这个 PHP 脚本中我`shell_exec()`用来启动几个后台进程。

当我执行`php test.php`时，后台进程按预期启动，但是当我运行时`php test.php &`，这几个后台进程没有启动。

从后台进程启动后台进程不是受支持的方式，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:58:18.673

尝试`php test.php < /dev/null &`- 一些 Unix 发行版似乎期望一些输入并将进程空闲发送到后台。在 Fedora Linux (bash) 上测试，您可以启动`php test.php &`但它没有执行。检查`jobs`正在运行的后台进程 - 从后台捕获并使用`fg`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:03:45.013

可以使用[proc_open](http://www.php.net/proc_open)。我编写了一个[微型框架](https://github.com/airbone42/Houston)作为 POC，它正在使用这种技术。

# wordpress - wp_add_dashboard_widget - wordpress 3.5.1 上的错误

> ID：14546489
> 
> 赞同：3
> 
> 时间：2013-01-27T10:31:02.790
> 
> 标签：wordpress

我写那个代码

```
<?php
/**
* @package ppa
* @version 0.1
*/
/*
Plugin Name: PPAPlugin
Description: PPAPlugin desct
Author: Sekhmet
Version: 0.1
*/

    register_activation_hook( plugin_basename( __FILE__ ), array( 'PPA', 'activate' ) );
    register_deactivation_hook( plugin_basename( __FILE__ ), array( 'PPA', 'deactivate' ) );
    register_uninstall_hook( plugin_basename( __FILE__ ), array( 'PPA', 'uninstall' ) );

    class PPA
    {
        const NAME = "PPA";

        public static function activate() {
        self :: ppa_add_dashboard();
        }

        public static function deactivate() {
        }

        public static function uinstall() {
        }

        function ppa_add_dashboard() {
            wp_add_dashboard_widget( 'ppa_widget', self :: NAME , array($this, 'ppa_dashboard_widget') );
        }

        function ppa_dashboard_widget() {
        }
    }

?> 
```

但是当我尝试在 ACP 上启用它时，我得到了这样的消息：

> 致命错误：在第 35 行的 /home/muffinki/domains/muffinki.org/public_html/wp-content/plugins/ppa/ppa.php 中调用未定义函数 wp_add_dashboard_widget()

Wordpress 版本 3.5.1（最新）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T10:48:18.173

将您的函数挂钩`ppa_add_dashboard()`到`wp_dashboard_setup`操作中，以便在正确的时间调用它。

```
public static function activate() {
    add_action( 'wp_dashboard_setup', array( __CLASS__, 'ppa_add_dashboard' ) );
} 
```

参考：

[http://codex.wordpress.org/Function_Reference/wp_add_dashboard_widget](http://codex.wordpress.org/Function_Reference/wp_add_dashboard_widget)

[http://codex.wordpress.org/Dashboard_Widgets_API](http://codex.wordpress.org/Dashboard_Widgets_API)

# ios - 更改精灵的图像

> ID：14546490
> 
> 赞同：0
> 
> 时间：2013-01-27T10:31:21.090
> 
> 标签：ios, cocos2d-iphone

我的游戏中有一个暂停按钮，实际上它只是一个 CCSprite：

```
_pauseButton = [[CCSprite spriteWithFile:@"pauseButton.png"] retain];
_pauseButton.position = ccp(_winSize.width * 0.92, _winSize.height * 0.1);
[self addChild:_pauseButton]; 
```

按下时我想暂停游戏并将暂停按钮的图像切换为@“playButton.png”。

我知道这样做的两种方法：

1.  制作一个批处理节点并将这两个图像（pauseButton.png 和 playbutton.png）添加到 sprite cash，所以我可以通过动画切换它。
2.  重新创建精灵

代码：

```
[_pauseButton removeFromParentAndCleanup:YES];
[_pauseButton release];
_pauseButton = [[CCSprite spriteWithFile:@"playButton.png"] retain];
_pauseButton.position = ccp(_winSize.width * 0.92, _winSize.height * 0.1);
[self addChild:_pauseButton]; 
```

是否有任何“正确”和更简单的方法来做到这一点，或者我应该使用我上面提到的其中一种？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:30:28.560

如果您使用纹理图集，您可以使用 setDisplayFrame: 来更改精灵显示的内容。这是最有效的方法。

否则你将不得不使用 setTexture: 来改变精灵使用的纹理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T10:41:43.847

在 cocos2d 中处理按钮的正确方法是使用 CCMenuItem。可以在[此处](http://www.raywenderlich.com/414/how-to-create-buttons-in-cocos2d-simple-radio-and-toggle)找到有关执行此操作的教程。

# mysql - 重查询MySQL解释

> ID：14546492
> 
> 赞同：0
> 
> 时间：2013-01-27T10:31:26.133
> 
> 标签：mysql

我想了解这个查询的作用。

谁能用语言向我解释以下查询的含义？

```
http://www.kachakil.com/pista.aspx?id_pista=1 

and exists (select * from contrasena) and 100 > 

(select count(*) from information_schema.columns, information_schema.columns T1, 
information_schema T2) 
```

上述查询在本文中提到：Time-Based Blind SQL Injection using Heavy Queries（作者：Chema Alonso...）

我正在尝试弄清楚每段代码的含义，我希望有人能帮助我。

1）这是网址：

[http://www.kachakil.com/pista.aspx?id_pista=1](http://www.kachakil.com/pista.aspx?id_pista=1)

2）此时我被卡住了（当然我知道 select * from contrasena 的含义（可能 contrasena 是一个表，所以它的意思是：从表 contrasena 中选择所有记录）..但是剩下的呢？这是一个子查询但是我想不通是什么意思

```
and exists (select * from contrasena) and 100 > 
```

`columns` 3）这里是一个选择，其目的是计算属于数据库的表有多少条记录`information_schema`。该表`columns`也被重命名为`T1`，这是什么意思？：`information_schema T2`

我为我的问题道歉......我希望有人能帮助我......非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:24:46.373

您不能使用 开始查询`and`，因此这可能是查询的一部分。该语法可能意味着在链接中添加 SQL 查询。

`exists (select * from contrasena)`如果表`contrasena`有任何记录，则为真。

`select count(*) from information_schema.columns, information_schema.columns T1, information_schema T2`据我所知，它不是有效的语法，因为`information_schema`它不是表格。

我假设上面应该是`select count(*) from information_schema.columns, information_schema.columns T1`。`tableA, tableB`表示，因此为来自和`tableA CROSS JOIN tableB`的每个记录组合生成一条记录。是一个表，其中包含数据库中每一列（每个表中）的记录，描述该列。所以子查询本质上是返回数据库中列数的平方。所以：`tableA``tableB``information_schema.columns`

```
100 > (select count(*) from ...)
=> 100 > DB_COL_COUNT^2 (not valid SQL)
=> 10^2 > DB_COL_COUNT^2 (not valid SQL)
=> 10 > DB_COL_COUNT (not valid SQL)
=> 10 > (select count(*) from information_schema.columns) 
```

第一行在含义上等同于最后一行，但不是执行时间。

因此`100 > ...`，如果数据库中的行数少于 10，则返回 true。

中间的`and`s 仅表示所有条件都必须为真。

# c# - 如何避免自动生成在 MVC 中的模态文件中的影响？

> ID：14546493
> 
> 赞同：1
> 
> 时间：2013-01-27T10:31:33.583
> 
> 标签：c#, asp.net-mvc

如果我从数据库更新 .dbmx 文件，如何以更好的方式编写模型文件，以便保留模式文件中的最新更改。例如我添加了验证属性

`[Required(ErrorMessage="Username is mandatory")]`

```
public string Username
    {
        get { return _username; }
        set
        {
            if (_username != value)
            {
                _username = value;
                OnPropertyChanged("Username");
            }
        }
    } 
```

在我的一个模态文件中，如果我执行“从数据库更新模态”，它会被覆盖并丢失我最近在该文件上更改的所有内容。请给我一个解决方案或更好的设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:44:05.447

您可以通过为您的表示层实现**视图模型**并在那里应用验证逻辑来​​做到这一点，正如我在这里所描述的：

[https://stackoverflow.com/a/14531849/1043198](https://stackoverflow.com/a/14531849/1043198)

这样，您将永远不会对实体映射类进行手动更改。这些自动生成的类不应由您修改 - 它们仅用于将数据传入和传出数据库。如果您在这里添加验证或其他功能，那么您做错了地方。这应该通过其他类来完成，例如视图模型或服务层。

# servlets - 如何克服在 apache tomcat7x 中找不到请求的资源

> ID：14546494
> 
> 赞同：0
> 
> 时间：2013-01-27T10:31:42.733
> 
> 标签：servlets

我在 servlet 执行期间收到此错误：

> ## HTTP 状态 404 - /Hello/
> 
> **类型**状态报告
> 
> **消息**/你好/
> 
> **描述**请求的资源不可用。
> 
> Apache Tomcat/7.0.35

我的部署文件夹结构如下所示：

```
Hello-->
  WEB-INF-->
    classes-->
      Hello.class
    lib
    web.xml 
```

我`web.xml`的如下：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app metadata-complete="true" version="3.0" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns="http://java.sun.com/xml/ns/javaee"> 
    <servlet>
        <servlet-name>hello</servlet-name>
        <servlet-class> Hello</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>hello</servlet-name>
        <url-pattern>/Hello</url-pattern>
    </servlet-mapping>
</web-app> 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:30:21.147

默认包中的类对于包中的类（在这种特殊情况下为 Tomcat 本身）是不可见/不可导入的。作为练习，尝试自己创建 2 个类。一个有包装，一个没有包装。尝试在打包的一个中导入无包的。你会看到它不会编译。Tomcat 在幕后面临着完全相同的问题。它找不到 servlet 类。应该注意的是，它仅适用于某些 Tomcat/JRE 版本组合，但您当然不应该依赖它。

将您的公共课程放在一个包中。总是。

```
package com.example; // <-- Look, a package.

public class Hello extends HttpServlet {
    // ...
} 
```

使用包重新编译后，`.class`文件应在此处结束：

```
Hello
 `-- WEB-INF
      |-- classes
      |    `-- com
      |         `-- example
      |              `-- Hello.class
      |-- lib
      `-- web.xml 
```

相应地更改 servlet 类声明。

```
<servlet-class>com.example.Hello</servlet-class> 
```

* * *

**与具体问题**无关**`web.xml`，配置是注册 servlet 的一种相当古老的方式。从 Servlet 3.0 版开始，您可以只使用`@WebServlet`注释。**

 **```
package com.example;

@WebServlet("/Hello")
public class Hello extends HttpServlet {
    // ...
} 
```

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含 Hello World 示例和体面资源的链接。**

# c# - WPF 在保持固定高度的同时调整大小？

> ID：14546500
> 
> 赞同：1
> 
> 时间：2013-01-27T10:32:26.150
> 
> 标签：c#, wpf, image, forms, resize

我有一个正在处理的 WPF 应用程序，并且正在使用图像构建表单......我在调整表单大小时遇到​​了问题。

问题是，对于顶部的各个行背景，我需要将高度保持在固定大小，同时允许调整宽度以适应窗口......但是任何时候我尝试放置高度或最大高度值或像这样的图像控件完全停止适合窗口。

现在我可能会以完全错误的方式解决这个问题，因为我对 WPF 很陌生，所以如果有人有更好的方法，请告诉我。

这是我目前使用的 XAML，问题在于 TitleBarImage：

```
<Window x:Class="App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Application" Height="{Binding SystemParameters.PrimaryScreenHeight}" Width="{Binding SystemParameters.PrimaryScreenWidth}" AllowsTransparency="True" WindowStyle="None" MinWidth="1024" MinHeight="749" WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Image x:Name="TitleBarImage" Grid.Row="0" Grid.ColumnSpan="3" HorizontalAlignment="Stretch" VerticalAlignment="Top" Source="skin/title-bar.png" MouseLeftButtonDown="TitleBarImage_MouseLeftButtonDown" MouseDown="TitleBarImage_MouseDoubleClick"/>
        <Image HorizontalAlignment="Right" Grid.Row="0" Grid.Column="2" Height="23" Margin="0,17,74,0" VerticalAlignment="Top" Width="34" Source="skin/min-button.png" MouseLeftButtonUp="MinImage_MouseLeftButtonUp"/>
        <Image HorizontalAlignment="Right" Grid.Row="0" Grid.Column="2" Height="23" Margin="0,17,40,0" VerticalAlignment="Top" Width="34" Source="skin/max-button.png" MouseLeftButtonUp="MaxImage_MouseLeftButtonUp"/>
        <Image HorizontalAlignment="Right" Grid.Row="0" Grid.Column="2" Height="23" Margin="0,17,7,0" VerticalAlignment="Top" Width="33" Source="skin/close-button.png" MouseLeftButtonUp="Image_MouseLeftButtonUp_1" RenderTransformOrigin="21.121,-4.522"/>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:03:14.157

您需要将图像上的 Stretch 属性设置为 Fill，否则它将保持其原始纵横比并且无法正确适合该区域。

```
<Image ... Stretch="Fill"/> 
```

# jquery - 将 jQuery 变量传递给字符串

> ID：14546504
> 
> 赞同：0
> 
> 时间：2013-01-27T10:32:44.560
> 
> 标签：jquery

我有一个名为`window.offset`.

该对象有另一个名为 的对象`search`。

它有两个值，`top`& `left`。

例如：

```
window.offset.search = {top:200, left:150} 
```

我想将此“搜索”对象作为名为“id”的变量传递。

如何将此变量传递给`window.offset`对象并获取`top`&`left`值。

我试过这样。但它不起作用。

```
var offset = 'window.offset.'+id

console.log(offset.left); //undefined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T10:39:13.323

这是您可以执行的操作：

```
var id = "search";
var offset = window.offset[id]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:37:03.513

您需要评估字符串：

```
var myOffset = eval(offset);
console.log(myOffset.left); 
```

# php - Opencart：客户可以访问另一个客户的数据

> ID：14546514
> 
> 赞同：0
> 
> 时间：2013-01-27T10:34:45.540
> 
> 标签：php, e-commerce, opencart

我的 OpenCart 管理员中有 3 个组，如下所示：

1.  **所有者**
2.  **卖方**
3.  **客人**

我的问题是：如何从 group id 1 客户帐户访问 group id 2 和 3 客户的**订单信息？**

我的意思是**所有者**（管理员）应该能够检查卖家和客人的订单历史记录。如何允许所有者访问其他客户的数据？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:23:06.740

您不能在 OpenCart 中执行此操作。您是说您想让用户将它们与所有者组相关联，然后通过编辑您希望能够调用其他客户数据的 URL .. 不能这样工作。OpenCart 已经有一个很棒的管理员，您可以访问客户订单和客户数据。只需访问以下内容：`Admin -> Customers -> Customers`这将使您也可以选择以该客户身份登录商店

# javascript - 如何从 KML 文件中获取所有要素/多边形的列表？

> ID：14546515
> 
> 赞同：1
> 
> 时间：2013-01-27T10:34:46.930
> 
> 标签：javascript, openlayers, kml

我使用此代码将 KML 文件加载到 OpenLayers：

```
var kmlLayer =  new OpenLayers.Layer.Vector("KML", {
    projection: map.displayProjection,
    isBaseLayer: false,
    strategies: [new OpenLayers.Strategy.Fixed()],
    protocol: new OpenLayers.Protocol.HTTP({
        url: "mykml.kml",
        format: new OpenLayers.Format.KML({
            extractStyles: true,
            extractAttributes: true,
            maxDepth: 2
        })
    })
}); 
```

现在我必须列出这个文件中包含的多边形的所有名称。

尝试`console.log(kmlLayer.features)`我可以看到这些功能，但我不知道如何访问它们。请参阅[http://s14.directupload.net/file/d/3148/2et4d7wf_png.htm](http://s14.directupload.net/file/d/3148/2et4d7wf_png.htm)因为我还不允许上传图片。

如何获取这些功能的名称和描述？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:07:44.387

我认为您的问题是 HTTP 调用与您的调用异步发生

```
kmlLayer.features[0] 
```

所以显得空荡荡的。解决方案是仅在 KML 完全加载后访问要素数组，如下所示：

```
kmlLayer.events.register("loadend", kmlLayer, function (e) {
    console.log(kmlLayer.features[0].attributes.name)
    }); 
```

无论您使用 Firefox 还是 Chrome，只需在加载地图后输入您的开发者 Web 控制台 kmlLayer.features[0]，它就会告诉您它实际上不是未定义的。

让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T19:34:17.423

[http://openlayers.org/en/v3.9.0/doc/faq.html#why-aren-t-there-any-features-in-my-source-](http://openlayers.org/en/v3.9.0/doc/faq.html#why-aren-t-there-any-features-in-my-source-)

他们似乎已经为 API v3 发布了解决此问题的方法，使用“更改”事件并监听“就绪”。

# javascript - 使用 jQuery each() 访问单个数组元素

> ID：14546527
> 
> 赞同：0
> 
> 时间：2013-01-27T10:37:20.970
> 
> 标签：javascript, jquery

我似乎找不到答案，但是如何通过 jQuery 的 each 方法中的索引号访问单个数组元素？

直接 JS 会这样做：

```
for(i=0; i<myArray.length; i++)
{
    if(i === 1)
    {    
        // do something
    }
} 
```

但我似乎无法弄清楚如何在每个方法中使用查找索引号......？

```
myArray.each(function()
{
    if(this[1])
    {
        // doesn't work?
    }
} 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T10:39:03.347

做：

```
$.each(myArray, function(index, value) {
    alert(index + ': ' + value);
}); 
```

更重要的是，请参阅：[jQuery.each()](http://api.jquery.com/jQuery.each/)

# wcf - 使用 WCF 和 ArcGIS Silverlight API 从服务器返回 feature.shape

> ID：14546528
> 
> 赞同：1
> 
> 时间：2013-01-27T10:37:25.357
> 
> 标签：wcf, silverlight, arcobjects, arcgis-server

我正在使用 arcgis silverlight api

我需要做的就是通过objectid从特征中获取几何以缩放到它

```
getFeature(objectid); 
```

所以我使用 WCF 服务来获取几何，但我发现错误说

> 类型“System.__ComObject”无法序列化

你能帮我吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:37:28.613

您没有使用 ArcGIS 服务器服务的任何原因？无论如何，您不能在 wcf 服务中返回 arcobjects，因为它不知道如何将其转换为 XML 或 json。您将需要定义一个数据合同类，其中包含一些您在每一端之间转换的简单属性。我还写了以下博客文章，这可能会有所帮助：http: [//blogs.esri.com/esri/arcgis/2010/03/11/sending-geometry-between-silverlight-and-the-server-using- wcf/](http://blogs.esri.com/esri/arcgis/2010/03/11/sending-geometry-between-silverlight-and-the-server-using-wcf/)这使用 arcgis wpf 和 SL 几何进行传输，因为它们具有数据协定并共享同一个。

# android - 如何在eclipse中过滤消息到Logcat？

> ID：14546529
> 
> 赞同：3
> 
> 时间：2013-01-27T10:37:26.967
> 
> 标签：android, eclipse, filtering, logcat

我只想从我当前运行的应用程序中向 logcat 显示 system.out.println 消息。我已经检查了堆栈溢出和其他人的许多建议。但我得到的只是“添加 adb -d logcat com.example.example:I *:S”等建议。但我不知道在哪里添加这个。我知道如何打开 logcat 过滤器设置窗口。它显示名为“过滤器名称”、“按日志标记”、“按日志消息”、“按 PID”、“按应用程序名称”和“按日志级别”的项目。
还有一件事。我添加了一个带有“^(?!.*(nativeGetEnabledTags)).*$" 在'by log message'项中，并设法避免logcat窗口被“来自nativegetenabledtags的意外值”之类的消息淹没。但问题是，我必须一直添加这个我在eclipse中运行一个应用程序（即使它是同一个程序）有没有办法永久添加过滤器？

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:54:05.587

我认为最简单的方法是使用 TAG。

例如，当您从您的 android 应用程序登录时`Log.d`，第一个参数是一个 TAG 字符串。因此，如果您将其设置为一个唯一的字符串（例如您的应用程序名称），那么您稍后可以在 Eclipse 中通过它进行过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:08:31.057

据我所知，Logcat 是来自 Eclipse 的一个视图，您可以在其中独家看到由于该`Log.d`方法而显示的消息。要检查应用程序中的日志消息，您只需在 Logcat 视图的左侧进行选择（因为右侧部分是您看到 Log.d 消息的位置。

如果您愿意，可以从您的应用程序中过滤 Log.d 消息，以仅查看您需要的消息。例如，要查看具有具体内容的所有消息，您需要在上面的文本框（消息列表上方）写下要包含在消息中的单词。不要忘记在左侧选择您的应用程序，否则您将收到来自所有包含您过滤的文本的应用程序的所有消息。

在 Android 设备上无法直接看到“System.out.println”，您需要使用“Log.d”方法。例如：

```
Log.d("IOException", "IOException error"); 
```

编辑：这里有一张图片显示我对你说的话（Logcat 的应用程序选择器） ![在此处输入图像描述](../Images/6bce16c1d2b5b74ed4edb5f3ee99ecbd.png)

EDIT2：要显示您在工作区中拥有的应用程序，您必须在 Eclipse 上进行：

*   窗口 -> 首选项 -> Android -> Logcat
*   监控 Logcat 以获取来自工作区中的应用程序的消息

![在此处输入图像描述](../Images/6fdfe2833eaf7621bcb41eb318914125.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T11:19:44.227

Log.I (TAG,message) 类似于 system.out.println()。

# c# - C#“发现”返回类型功能

> ID：14546530
> 
> 赞同：2
> 
> 时间：2013-01-27T10:37:29.267
> 
> 标签：c#, .net, var

在c#中，返回值时，不需要指定变量类型。例如：

```
foreach(var variable in variables) {
} 
```

我正在构建一个企业软件，今天它是一个小型解决方案，但它会变得很大。当我们在应用程序上反复使用此语言功能时，它会降低性能吗？

我还没有找到这个功能是如何调用的，我想了解更多关于它的信息，它是如何调用的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-27T10:38:54.863

`var`用于`implicitly typing`变量。

它发生在编译时。没有性能问题。

*   请参阅[此 MSDN 文章`var`](http://msdn.microsoft.com/en-us/library/bb383973.aspx)
*   或者[这个关于隐式类型变量](http://msdn.microsoft.com/en-us/library/bb384061.aspx)

例子：

```
var i = 12; // This will be compiled as an integer
var s = "Implicitly typed!"; // This will be compiled as a string
var l = new List<string>(); // This will be compiled as a List of strings 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T10:40:46.553

`Var`是一个`implicit type`。它为 C# 编程语言中的任何类型起别名。别名类型由 C# 编译器确定。这没有性能损失。`var`关键字具有同等效果。它不会影响*运行时*行为。

```
var i = 5; // i is compiled as an int
var i = "5" ; // i is compiled as a string 
var i = new[] { 0, 1, 2 }; // i is compiled as an int[] 
var i = new[] { "0", "1", "2" }; // i is compiled as an string[] 
var i = new { Name = "Soner", Age = 24 }; // i is compiled as an anonymous type 
var i = new List<int>(); // i is compiled as List<int> 
```

`var`关键字也有一些限制。您不能将 a 分配`var`给`null`。您也不能`var`用作*参数类型*或方法的*返回值*。

从 签出[`MSDN`](http://msdn.microsoft.com/en-us/library/bb383973.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T10:52:29.050

如前所述`var`is an `implicit type`，编译器会计算出应该是`compile-time`什么类型。`var`没有性能问题。你可以编写一些测试代码，编译，并使用`ildasm.exe`来检查生成的`CIL`

[MSDN - 查看程序集内容](http://msdn.microsoft.com/en-us/library/ceats605.aspx)

* * *

**[例子](http://www.dotnetperls.com/var)**

> 注意：int 声明与 IL 中的 var 声明相同。所以执行引擎不知道你使用了var。
> 
> 并且：它们被编译为相同的 IL。*var 关键字与 int 或 string 等显式类型一样快。*
> 
> **使用 var [C#] 的中间语言方法**

```
> public int ReturnValue() {
>     var a = 5;
>     int b = 5;
> 
>     return a + b; } 
```

> ****方法的 IL****

 **```
.method public hidebysig instance int32  ReturnValue() cil managed
{
  // Code size       9 (0x9)
  .maxstack  1
  .locals init ([0] int32 result,
       [1] int32 CS$1$0000)
  IL_0000:  nop
  IL_0001:  ldc.i4.5
  IL_0002:  stloc.0
  IL_0003:  ldloc.0
  IL_0004:  stloc.1
  IL_0005:  br.s       IL_0007
  IL_0007:  ldloc.1
  IL_0008:  ret
} // end of method VarKW::ReturnValue 
```**

# python - Hachoir - 从组中检索数据

> ID：14546533
> 
> 赞同：4
> 
> 时间：2013-01-27T10:38:09.533
> 
> 标签：python, metadata, video-processing, hachoir-parser

尝试使用 Hachoir 从视频文件中检索元数据。工作得相当好，除非使用 'get' 或类似方法返回宽度和高度值。

我以为会是：

```
metadata.get('width') 
```

但这会引发错误（对象没有“宽度”属性）。

当我运行以下命令时：

```
for data in sorted(metadata):
    if len(data.values ) > 0:
        print data.key, data.values[0].value 
```

返回的只是来自“公共”组的信息。

当我使用：

```
metadata.exportPlaintext 
```

...返回“普通”、“视频流”和“音频流”的信息。我*可以*简单地解析生成的“文本”项并去掉高度和宽度值，但我宁愿尝试使用 metadata.get('width') 或类似方法正确地完成它。

查看源代码，我想我可以使用以下内容：

```
for key, metadata in metadata.__groups.iteritems(): 
```

遍历*元数据中的 ._ 组，但随后会抛出“'AsfMetadata'对象没有属性'* _groups' - 我确信不应该是这种情况，因为我认为 'AsfMetadata' 是 MultipleMetadata 的子类() 其中确实有这样一个变量。

可能遗漏了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-13T22:51:27.270

要从`width x height`在媒体文件中具有大小信息的第一个顶级元数据组获取，而不访问私有属性并且不解析文本输出，您可以使用`file_metadata.iterGroups()`：

```
#!/usr/bin/env python
import sys
from itertools import chain

# $ pip install hachoir-{core,parser,metadata}
from hachoir_core.cmd_line import unicodeFilename
from hachoir_metadata import extractMetadata
from hachoir_parser import createParser

file_metadata = extractMetadata(createParser(unicodeFilename(sys.argv[1])))
it = chain([file_metadata], file_metadata.iterGroups())
print("%sx%s" % next((metadata.get('width'), metadata.get('height'))
                     for metadata in it
                     if metadata.has('width') and metadata.get('height'))) 
```

转换`metadata`成字典（非递归，即，如果需要，手动迭代组）：

```
def metadata_as_dict(metadata):
    return {item.key: (len(item.values) > 1 and 
                       [v.value for v in item.values] or
                       item.values[0].value)
            for item in metadata if item.values} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T13:00:14.707

对于 WMV 文件，这似乎不那么简单。我已将此类视频的元数据转换为`defaultdict`，现在获取图像宽度更直接：

```
from collections import defaultdict
from pprint import pprint

from hachoir_metadata import metadata
from hachoir_core.cmd_line import unicodeFilename
from hachoir_parser import createParser

# using this example http://archive.org/details/WorkToFishtestwmv
filename = './test_wmv.wmv' 
filename, realname = unicodeFilename(filename), filename
parser = createParser(filename)

# See what keys you can extract
for k,v in metadata.extractMetadata(parser)._Metadata__data.iteritems():
    if v.values:
        print v.key, v.values[0].value

# Turn the tags into a defaultdict
metalist = metadata.extractMetadata(parser).exportPlaintext()
meta = defaultdict(defaultdict)
for item in metalist:
    if item.endswith(':'):
        k = item[:-1]
    else:
        tag, value = item.split(': ')
        tag = tag[2:]
        meta[k][tag] = value

print meta['Video stream #1']['Image width'] # 320 pixels 
```

# mysql - 定价概览的数据库设计

> ID：14546539
> 
> 赞同：1
> 
> 时间：2013-01-27T10:39:28.600
> 
> 标签：mysql, database

我正在尝试为高尔夫球场定价概览网站找出最佳设计。

保存最终价格的表格如下所示：

clubid,courseid,seasonid,holesid,timeid,personid,rate

字段为：

*   clubid：高尔夫球俱乐部的ID courseid：一个俱乐部可以有多个球场
*   seasonid：俱乐部/球场有多个赛季（高、平、低、...）
*   holeid：玩家可以打的洞（18,9,allday,...）
*   timeid：根据一天中的时间可以有多种费率（早期，黄金，黄昏，...）
*   personid：根据人的类型，可以有折扣（学生、高级）或加价

所有这些都将在列出各种选项的相应表格中进一步定义。

现在至于我的问题：

1.  这个概念是否存在重大设计错误，我想看看？
2.  这种设计的查询速度有什么问题吗？我觉得这种多维设计最令人不安的是关于数据输入的问题。
3.  在这种结构中输入数据的最佳方式到底是什么？

我有一个勉强可行的选择，但目前还不想影响其他人的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:43:24.283

[在这里检查](http://www.databaseanswers.org/data_models/)。这会帮助你。这有多种数据模型。它还包含用于高尔夫管理。

[http://www.databaseanswers.org/data_models/golf_club_management/index.htm](http://www.databaseanswers.org/data_models/golf_club_management/index.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T13:37:08.310

*您提出的星型模式*设计有两个可能的问题。

**问题 1：灵活性**

通过将价格确定标准设置为查找表的一组固定外键，您创建了一种情况，即您要跟踪价格的每门课程都必须以某种方式适应该方案。一旦您与创意营销经理一起参加课程，您就会发现自己不得不修改您的架构以适应该课程。

**问题 2：数据输入工作**

正如您已经注意到的那样，拥有一组固定价格决定因素意味着所有这些决定因素的交叉产品是需要维护的大量数据。令人沮丧的是，对于许多课程来说，一些决定因素并不重要。

另一个可能令人沮丧的事情可能是每门课程对每个决定因素都有自己的解释。例如，*旺季*对每门课程意味着什么？如果你不关心这些细节，那么你就可以了，但如果你真的必须用具体的术语来解释自己（即我们所说的课程*X*的“高峰”是什么日期？），那么你也会有很多价格维度表中的数据。

**解决问题：**

如果您愿意使用更复杂的数据模型，则可以显着减少数据管理*量*。您可以表驱动决定因素，而不是具有一组固定价格点决定因素的星型模式。架构将是这样的：

```
COURSE              -- The list of courses you are tracking
  courseid (PK)
, name

COURSE_PRICE_POINT  -- An individual price point for a course
  cppid (PK)
, courseid          -- FK to COURSE
, price             -- The amount, if your system is multi-currency, include a code 
                    -- for the currency, e.g. GBP, EUR, USD, etc.

COURSE_PRICE_FACTOR -- The list of factors that make a specific price point applicable
  cppid (PK)        -- PK, also FK to COURSE_PRICE_POINT
, pfid (PK)         -- PK, also part of FK to FACTOR_VALUE
, fvid              --     the other part of the FK to FACTOR_VALUE

FACTOR_VALUE        -- A lookup table of price factors, e.g. "Peak Season", "18 Holes"
  pfid (PK)         -- PK, also FK to PRICE_FACTOR
, fvid (PK)
, value             -- Description of the price factor value

PRICE_FACTOR        -- A list of the dimensions that impact price, 
                    -- e.g. Season, Holes, Person, Time
  pfid (PK)
, description       -- A caption/name for the price factor. 
```

该模型的工作方式是，对于课程可能收取的每个特定价格，您在`COURSE_PRICE_POINT`. *如果您的星型模式表可能具有尽可能少的行数*，则此表中将有一条记录，即您在星型模式定价表中可能拥有的每条记录。

星型模式定价表中的价格决定因素列变为`PRICE_FACTOR`. 可能出现在行列式查找表中的值成为`FACTOR_VALUE`. 这部分的工作量是相同的，除了如果您发现需要添加新的价格因素，您需要做的就是输入一些新数据而不是更改您的表定义，这是您将面临的问题星型模式方法。

要将价格点实际固定到其决定因素，您需要填充`COURSE_PRICE_FACTOR`以将价格点连接到定义价格点所需的**最小因素值集。**请注意，`FACTOR_VALUE`由其 FK 标识为`PRICE_FACTOR`。这意味着 的 PK作为 FK 的一部分存在`PRICE_FACTOR`于. 这很重要，因为它允许您在价格点 ID 和价格因素 ID 的组合上定义唯一索引（我已将该组合作为表的 PK）。这意味着模式将施加限制，即您不能对相同的价格因素有矛盾的值，这是一个很好的小数据一致性约束。`COURSE_PRICE_FACTOR``FACTOR_VALUE`

所有这些似乎都需要做很多工作，那么为什么它比星型模式更好呢？看一个例子，假设您的星型模式中有季节、洞、时间和人物的四个变体。这可能是一个低估，但让我们继续吧。这意味着您需要每门课程 4 x 4 x 4 x 4 = 256 条记录来跟踪所有定价变化。如果一门课程有一个非常简单的价格卡，比如：“淡季是你每天 100 美元可以玩的全部”。这将是我建议的模型中的一个价格点，但星型模式仍需要 1 x 4 x 4 x 4 = 64 条记录。

更糟糕的是：对于星型模式，根据您打算如何使用它，您可能有一条规则，即每个查找表值需要在每门课程的定价表中表示。这意味着添加一个新记录，比如*赛季*将需要在每门课程中创建一堆新记录，即使其他课程不识别您的新维度值。

我建议的模型的主要优点是（i）您可以在特定条件下对特定课程的定价非常具体和准确，以及（ii）您的数据维护最小化。

这个模型的缺点是什么？此模型对于为一门课程与另一门课程设置价格比较图表不会很有帮助。如果您要比较的两个课程的定价结构非常不同，那么很难找到一种方法在并排的价格比较表中显示价格表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T10:48:26.573

概念看起来不错，查询的速度将取决于每个变量的数量，但是使用良好的索引应该很容易优化，`courseid`并且`seasonid`看起来像快速候选者。这也很好地提供了一个树形结构，您可以将其加载到内存中，这将具有惊人的快速查找时间。

您正在做的事情很常见 - 它被称为[Star schema](http://en.wikipedia.org/wiki/Star_schema)，我知道许多金融机构都以这种方式处理他们的定价。

# ruby - 通过 ruby -pe 命令行使用全局变量迭代

> ID：14546541
> 
> 赞同：0
> 
> 时间：2013-01-27T10:40:05.893
> 
> 标签：ruby

我正在尝试使用 ruby​​ 在 gsub() 中生成迭代值。我写的那一行是：

```
ruby -pe '$i=0; gsub(/⎦\d+?⎡/, "⎦#{$i+=1}⎡")' < test.txt 
```

但这实际上并没有进行迭代；相反，它会将 的值设置`$i`为零并在每次替换发生时将其加 1。

我也用过：

```
ruby -pe 'BEGIN{$i=0}; gsub(/\d+?/, "#{$i+=1}")' < test.txt 
```

那个输出行号而不是变量迭代值。不应该只在 REGEX 匹配时才调用 gsub() 吗？

该命令的目的是将迭代值 + 1 替换为文件中找到的下一个数字。例如：

> Lorem ipsum dolor **2** sat amet，consectetuer adipiscing elit，sed **7** diam nonummy nibh euismod **1** tincidunt ut laoreet dolore magna **10** aliquam erat volutpat。Ut wisi enim ad minim veniam, quis nostrud exerci **15** tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat。

输出：

> Lorem ipsum dolor **1** sat amet，consectetuer adipiscing elit，sed **2** diam nonummy nibh euismod **3** tincidunt ut laoreet dolore magna **4** aliquam erat volutpat。Ut wisi enim ad minim veniam, quis nostrud exerci **5** tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat。

Update1：​​我在进一步阅读后尝试了这一行：

```
ruby -pe 'BEGIN{$i=0}; gsub /\d+?/, "#{$i+=1}" if ~/\d+?/' < aa01.xhtml 
```

但是，我使用的命令行中的过程似乎一开始就不正确。它应该首先找到有数字的行。然后增加变量并将其替换为找到的数字，如果同一行中存在任何数字，则移动到下一个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:34:55.660

我认为表达式`"⎦#{$i+=1}⎡"`只计算一次。在每次替换时计算一个块。

```
$i=0
File.open('test.txt') do |f|
    f.each_line do |line|
        modif = line.gsub(/\d+/) {|num| "#{$i+=1}"}
        puts modif
    end
end 
```

输出：

```
Lorem ipsum dolor 1 sit amet, consectetuer adipiscing elit, sed 2 diam nonummy nibh euismod 3 tincidunt ut laoreet dolore magna 4 aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci 5 tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. 
```

新输入：

```
Lorem ipsum dolor 2 sit amet, consectetuer adipiscing elit, 
sed 7 diam nonummy nibh 
euismod 1 tincidunt ut 44

laoreet dolore magna 10 aliquam erat volutpat.
Ut wisi enim 0 ad minim veniam, 4 quis nostrud 
exerci 15 tation ullamcorper 66 suscipit 88 
lobortis 6 nisl ut aliquip ex 1 ea1 co1mmodo consequat. 
```

输出 ：

```
Lorem ipsum dolor 1 sit amet, consectetuer adipiscing elit, 
sed 2 diam nonummy nibh 
euismod 3 tincidunt ut 4

laoreet dolore magna 5 aliquam erat volutpat.
Ut wisi enim 6 ad minim veniam, 7 quis nostrud 
exerci 8 tation ullamcorper 9 suscipit 10 
lobortis 11 nisl ut aliquip ex 12 ea13 co14mmodo consequat. 
```

# .net - winforms 应用程序中的查询设计器

> ID：14546544
> 
> 赞同：10
> 
> 时间：2013-01-27T10:40:20.007
> 
> 标签：.net, sql, winforms, user-interface

我正在为一个客户端开发一个 Winforms C# 应用程序，它取代了他们旧的基于 MS Access 的解决方案。这是一个完整的重写，现在使用 SQL Server 作为其数据库。该软件现在处于开发的最后阶段。

他们刚刚要求的一件事是能够执行软件的 UI 当前可能不允许他们在需要时执行的自定义查询。

使用旧的 Access 解决方案，他们可以使用查询设计器创建自己的自定义查询。使用 winforms/Sql Server 解决方案，他们无法做到这一点。他们也不想自己编写 SQL。

谁能想到一个很好的解决这个问题的方法？也许是一个 Winforms 库，它允许用户创建业务对象图和“和|或”逻辑。或者其他一些允许他们自定义查询的 UI 类型，几乎就像他们在 Access 中可以做的一样（但可能更特定于域）。

## 更新

我已将 Yaqub 的答案标记为答案，因为这是最接近我当时正在寻找的答案。我最终为他们编写了一个自定义表单来生成他们的查询：

![在此处输入图像描述](../Images/6f4976b9f252b82a957c17c4d0d044a6.png)

第二组中的“选择表...”组合框仅显示已添加到顶部列表框中的表。

因为数据库布局现在几乎是一成不变的，所以我编写了代码来智能地计算所需的任何连接。例如，如果他们在顶层组中添加两个间接相关的表，那么当它生成 SQL 时，它将添加任何必需的连接来关联这些表。如果数据库布局确实发生了变化，我可以很容易地在查询编辑器的代码中更改 FK 引用。

对于条件组，值控件（该组中的第 4 个控件）根据字段类型（文本框、数字上/下控件、日期选择器、复选框）而变化。

当他们单击“运行查询”时，他们会得到另一个带有显示结果的网格视图的表单。在该结果表单中，它们可以导出到制表符分隔的文件。

我已经给了他们第一个版本，到目前为止，他们似乎对此非常满意。

我不想走 Access 路线，因为这个新版本的软件的重点是将它们从 Access 中移开（嗯，不是重点，因为那里也有更多的功能）。保持对 Access 的依赖似乎是一个巨大的退步。这也意味着如果他们在 Access 中保存大量自定义查询，并且我曾经更改数据库架构，我很可能会破坏他们的查询。我不希望他们像那样访问数据库。在我看来，这是自找麻烦。唯一应该触及数据库的是新软件，以及我们所做的任何自动数据库备份——没有别的，尤其是用户！

在软件中执行此操作的另一个优点是我可以对查询结果进行后处理。例如，有相当多的数据分析算法在软件中运行，这些算法是用 .NET 代码编写的。所以我可以向这个界面添加字段，允许他们选择这些算法的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T16:12:32.423

您可能会发现[Visual SQL 查询设计器](http://www.codeproject.com/Articles/43171/A-Visual-SQL-Query-Designer)很有帮助。它将让您了解如何实现此功能。

此工具可用于设计 SQL 查询。与 SQL Server Management Studio 相比，它的 UI 非常基本。它的限制是它使用`OLEDB`连接字符串。[您可以从这里](http://www.codeproject.com/KB/database/QueryDesigner/QueryDesignerSource.zip)下载源代码。

**编辑：**

[EasyQuery.NET WinForms](http://devtools.korzh.com/query-builder-winforms/)可以是一个选项，但它不是免费的。

[这篇文章](http://www.c-sharpcorner.com/UploadFile/neelamiyer/QueryBuilder12012005042244AM/QueryBuilder.aspx)也可能对你有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T18:26:03.963

一个传统的“微软”对此的回答是让他们继续使用 Access……只将它指向 SQL 服务器，然后让他们在那里构建他们的自定义查询。

如果您想变得花哨，可以构建查询用户角色和帐户，仅授予对其的读取访问权限，甚至在必要时使用资源管理器将内置角色用户帐户限制为系统总负载的某个百分比.

在将 Access 中的新东西卷入实际代码之前，对它进行原型设计并不可耻。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T17:04:04.563

您是否考虑过使用 SQL 的 SSRS 部分，并让他们访问 ReportBuilder 工具？它为高级用户提供了一个不错的界面。如果您在数据库中设置了主键和外键，它将识别这些关系并帮助用户构建多表查询。该工具可以直接从 SSRS 门户网站下载，您可以使用 ReportViewer 控件将报告直接集成到您的 .Net 应用程序中，或者您可以使用简单的 HTTP 请求将它们以 Excel、PDF 等格式拉回。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-05T09:59:50.120

我使用过类似的工具，基本上这个工具为业务用户提供了通过拖放业务视图在数据网格中创建报告。我们在表之上创建视图并维护元数据信息，如字段关系等元数据表。如果表具有参照完整性，则工具正在从 sql server 主数据库获取信息。

我们从 codeproject 上提供的这个实用程序中获得了帮助。您可以浏览这个通过拖放创建 sql 查询的基本应用程序，您可以根据需要进行更改。

[http://www.codeproject.com/Articles/43171/A-Visual-SQL-Query-Designer](http://www.codeproject.com/Articles/43171/A-Visual-SQL-Query-Designer)

# html - 小型平板电脑和手机上的 Bootstrap 响应式修复

> ID：14546546
> 
> 赞同：1
> 
> 时间：2013-01-27T10:40:51.340
> 
> 标签：html, css, twitter-bootstrap

我使用引导程序 2.2.2 并具有以下 html 标记。

```
<div class="container">
      <h1>Responsive boxes</h1>
      <div class="row-fluid">
        <div class="span3">
          <h3>M. 1</h3>
        </div>
        <div class="span3">
          <h3>M. 2</h3>
        </div>
        <div class="span3">
          <h3>M. 3</h3>
        </div>
        <div class="span3">
          <h3>M. 4</h3>
        </div>
      </div>
    </div> <!-- /container --> 
```

和 css 标记如下：

```
body {
  background-color: #fff;
  font-family: 'Cabin', Helvetica, Arial, sans-serif;
  width: 100%;
  text-align: center;
}

h1, h2, h3, h4, h5, h6 {
    font-family: 'Lobster', Georgia, Times, serif;
}

h3{
  color: #fff;
  font-size: 139px;
  line-height: 171px;
}

.span3 {
  background: rgb(255, 81, 10);
  height: 200px;
  overflow: hidden;
  margin-bottom: 30px;
} 
```

此标记在桌面上运行良好，当我调整视口（例如 iphone）的大小时，框按预期变小了，但右边距被删除。只有左边距。我希望左右边距对齐。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:37:01.560

这就是你所追求的吗？
[http://jsfiddle.net/panchroma/BkNSL/](http://jsfiddle.net/panchroma/BkNSL/)

我在你的身体 css 中注释掉了宽度

```
body {
background-color: #fff;
font-family: 'Cabin', Helvetica, Arial, sans-serif;
/* width: 100%;*/
text-align: center;
} 
```

# openerp - OpernERP 删除具有依赖订单的合作伙伴

> ID：14546553
> 
> 赞同：3
> 
> 时间：2013-01-27T10:42:06.530
> 
> 标签：openerp, psql, orders

我想知道如何删除合作伙伴`OpenERP`并删除所有依赖项。例如, `orders`, `sales`,`invoice`等。

我试图打开合作伙伴视图并单击删除按钮。合作伙伴被删除，但相关订单没有被删除。它还会引发错误，因为该合作伙伴现在在数据库中不存在。如何删除合作伙伴并影响所有依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:33:12.063

我可以告诉你如何*找到*他的所有依赖项，但我会让你决定如何删除它们。我编写了这个 SQL 脚本来查找任何表中任何记录集的依赖关系。您将表名放在最后一行，然后替换`(1234)`为您要查找其子项的记录 ID 集。

当您运行查询时，它将生成一个大 SQL 语句，然后您可以运行该语句以查看所有子记录。您只需要`UNION ALL`在运行它之前删除最后一个。这仅向您显示直接子记录，而不是间接相关的记录。它也不会告诉您像工作流表`ir_values`、 或`ir_model_data`.

```
 SELECT  'SELECT ''' || tc.table_name || 
            ''' as tabname, ''' || kcu.column_name || 
            ''' as colname, ' || kcu.column_name || 
            ' as id, count(*) FROM ' || tc.table_name || 
            ' as cnt WHERE ' || kcu.column_name || ' IN (1234) ' ||
            ' GROUP BY ' || kcu.column_name || ' UNION ALL '
    FROM    information_schema.table_constraints AS tc 
    JOIN    information_schema.key_column_usage AS kcu 
    ON      tc.constraint_name = kcu.constraint_name
    JOIN    information_schema.constraint_column_usage AS ccu 
    ON      ccu.constraint_name = tc.constraint_name
    WHERE   constraint_type = 'FOREIGN KEY' 
    AND     ccu.table_name = 'res_partner'; 
```

# azure - Azure VM 负载平衡与流量管理器

> ID：14546554
> 
> 赞同：37
> 
> 时间：2013-01-27T10:42:19.153
> 
> 标签：azure, load-balancing

谁能解释 VM 负载平衡（在新的 Azure 门户中）和 Azure 流量管理器（目前仅从旧门户管理）之间的区别，以及它们如何交互？

例如，我创建了两个相互连接的 VM，共享一个负载平衡端点。据我了解，这将在两个虚拟机之间循环。

*   如果我没有设置负载平衡端点（在新的 Azure 门户中），而是设置 Azure 流量管理器以在它们之间进行负载平衡，会发生什么情况？这是同一件事吗？
*   我可以同时使用这两种负载平衡吗？（流量管理器设置为跨区域故障转移，并使用 VM 负载平衡跨可用性区域进行循环？）

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-01T10:15:05.543

詹姆士，

我想你已经弄清楚了大部分。

虚拟机负载均衡：

1.  仅适用于同一区域中的虚拟机
2.  ~~只有 Round Robin~~使用基于哈希的算法分配入站流量
3.  在 TCP/UDP 级别工作，在位于公共端点后面的一个或多个私有端点之间路由流量

[https://www.windowsazure.com/en-us/manage/windows/common-tasks/how-to-load-balance-virtual-machines/](https://www.windowsazure.com/en-us/manage/windows/common-tasks/how-to-load-balance-virtual-machines/)

流量管理器的不同之处在于：

1.  它可以跨区域工作
2.  它提供循环以外的流量管理策略（例如故障转移、性能）
3.  它在 DNS 级别工作，在一个或多个位于通用 DNS 名称后面的公共端点之间“路由”** 流量

[https://azure.microsoft.com/en-us/documentation/articles/traffic-manager-manage-profiles/](https://azure.microsoft.com/en-us/documentation/articles/traffic-manager-manage-profiles/)

您确实可以串联使用负载平衡器和流量管理器，您在那里一针见血。

--

弗拉德

** 流量管理器实际上并不路由流量，它只是向调用者提供公共端点的 DNS 名称，根据有效的策略，他们的流量应该去往何处。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-03-02T09:27:02.580

**Azure 流量管理器。**

Azure 流量管理器的工作是根据灵活的策略在全球范围内路由流量，从而实现与您在全球范围内构建应用程序的方式相一致的出色用户体验。流量管理器有几个不同的策略：

**潜伏。** 直达“最近的服务”

**循环赛。** 分布在所有服务中

**故障转移。** 如果主要失败，直接备份

**嵌套。** 灵活的多级策略 [![在此处输入图像描述](../Images/6cb71c38bf9af05b7d7b8016c758a10e.png)](https://i.stack.imgur.com/3f7AP.png)

**Azure 负载均衡器**

Azure 负载均衡器的工作是引导区域内的流量。这与 Azure 流量管理器相结合，其中流量管理器将内部路由到虚拟机之间的区域。如果将两者结合起来，您将获得与本地故障转移相结合的全局流量管理。 [![在此处输入图像描述](../Images/793ac94c4df058a54501b0296b89cef5.png)](https://i.stack.imgur.com/VCw8S.png)

负载均衡器差异 使用 Microsoft Azure 分配网络流量有不同的选项。这些选项的工作方式彼此不同，具有不同的功能集并支持不同的场景。它们可以单独使用，也可以组合使用。

**负载均衡器差异**

使用 Microsoft Azure 分配网络流量有多种选择。这些选项的工作方式彼此不同，具有不同的功能集并支持不同的场景。它们可以单独使用，也可以组合使用。

**Azure 负载均衡器**在传输层（OSI 网络参考堆栈中的第 4 层）工作。它提供跨在同一 Azure 数据中心中运行的应用程序实例的网络级流量分布。

**应用程序网关**工作在应用程序层（OSI 网络参考堆栈中的第 7 层）。它充当反向代理服务，终止客户端连接并将请求转发到后端端点。

**流量管理器**在 DNS 级别工作。它使用 DNS 响应将最终用户流量引导到全球分布的端点。然后客户端直接连接到这些端点。

[![在此处输入图像描述](../Images/43007384e3dfa972ac0b9a2f865f38e2.png)](https://i.stack.imgur.com/7tm2a.png)

链接：

[https://docs.microsoft.com/en-us/azure/traffic-manager/traffic-manager-overview](https://docs.microsoft.com/en-us/azure/traffic-manager/traffic-manager-overview)

[https://docs.microsoft.com/en-us/azure/load-balancer/load-balancer-overview](https://docs.microsoft.com/en-us/azure/load-balancer/load-balancer-overview)

[https://www.concurrency.com/blog/w/azure-traffic-manager-vs-azure-load-balancer](https://www.concurrency.com/blog/w/azure-traffic-manager-vs-azure-load-balancer)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-23T18:53:18.247

我认为有两个重要的项目需要提及。流量管理器不进行负载平衡，它是智能 DNS 解析器。Azure 负载均衡器不提供任何关联性。第二个区别是流量管理器只能解析 Azure 端点，如果您的服务端点在 Azure 和您的数据中心或其他公共/私有云位置之间拆分，则它不能很好地工作。

对于这两个缺点，您需要依赖合作伙伴的产品。

# winapi - d 无法初始化 WNDCLASSW、WNDCLASSEX、WNDCLASSEXW 窗口结构

> ID：14546562
> 
> 赞同：1
> 
> 时间：2013-01-27T10:43:02.007
> 
> 标签：winapi, window, d

```
WNDCLASS wc; - ok
WNDCLASSA wc; - ok
WNDCLASSW wc; - Error: undefined identifier WNDCLASSW, did you mean alias WNDCLASS?
WNDCLASSEX wc; - Error: undefined identifier WNDCLASSEX, did you mean struct WNDCLASSEXA?
WNDCLASSEXA wc; - ok
WNDCLASSEXW wc; Error: undefined identifier WNDCLASSEXW, did you mean struct WNDCLASSEXA? 
```

代码：

```
import core.runtime;
import core.sys.windows.windows;
extern(Windows)
int WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int iCmdShow) {
  WNDCLASSEXA wc;
  return 0;
} 
```

我最关心的是WNDCLASSEXW，也就是我打算用的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:05:34.847

答案很简单，我可以自己定义结构：

```
struct WNDCLASSEXW {
  UINT      cbSize;
  UINT      style;
  WNDPROC   lpfnWndProc;
  int       cbClsExtra;
  int       cbWndExtra;
  HINSTANCE hInstance;
  HICON     hIcon;
  HCURSOR   hCursor;
  HBRUSH    hbrBackground;
  LPCWSTR   lpszMenuName;
  LPCWSTR   lpszClassName;
  HICON     hIconSm;
} 
```

# javascript - 在 iframe 设计模式下获取插入符号的父元素

> ID：14546568
> 
> 赞同：0
> 
> 时间：2013-01-27T10:43:50.053
> 
> 标签：javascript, html, iframe, rich-text-editor, designmode

我想知道`iframe`with中插入符号的父元素是什么`designMode = 'on'`。原因是想知道当前用户是否正在输入`p`标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:54:50.187

这是一个执行此操作的函数，改编自[对类似问题的回答](https://stackoverflow.com/a/1336922/96100)：

```
function getSelectionBoundaryElement(win, isStart) {
    var range, sel, container = null;
    var doc = win.document;

    if (doc.selection) {
        // IE branch
        range = doc.selection.createRange();
        range.collapse(isStart);
        return range.parentElement();
    } else if (win.getSelection) {
        // Other browsers
        sel = win.getSelection();

        if (sel.rangeCount > 0) {
            range = sel.getRangeAt(0);
            container = range[isStart ? "startContainer" : "endContainer"];

            // Check if the container is a text node and return its parent if so
            if (container.nodeType === 3) {
                container = container.parentNode;
            }
        }
    }
    return container;
} 
```

示例使用：

```
var iframe = document.getElementById("your_iframe_id");
var caretElement = getSelectionBoundaryElement(iframe.contentWindow, true); 
```

# mysql - 如何使用一两条 SQL 语句检索多个用户的最新帖子？

> ID：14546574
> 
> 赞同：0
> 
> 时间：2013-01-27T10:44:26.933
> 
> 标签：mysql, sql

我在这样的mysql数据库中有一个表：

```
Postings (id, content, user_id, create_date) 
```

现在，对于十个用户（user_id），我想检索他的五个最新帖子（id）。一种简单的方法是在一个查询中计算出 10 个具有最新帖子的用户，然后触发 10 个单独的查询以获取每个用户的最新 5 个帖子。有没有更简单的方法把它放在一个或两个查询中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:56:08.217

用这个

```
SELECT * FROM (SELECT * FROM TABLE ORDER BY ID DESC LIMIT 5) AS ttbl ORDER BY ID ASC; 
```

这里括号内的代码以相反的顺序显示最新的 5 个帖子。这样数据首先存储在 ttbl 中，然后以适当的顺序再次排序以获得所需的结果。

希望它可以解决你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:58:16.100

这是我想到的一种可能的解决方案（未经测试）。这会在单个列中返回每个用户的 ID。这不会是最快的查询。

这只是返回 id，而不是帖子本身。老实说，我认为您应该按照最初的想法进行多个查询。

```
Select 
(Select group_concat(id order by id desc)
From postings g
Where g.user_id=s.user_id
Limit 5) ids
From  (
Select user_id
From postings p
Group by user_id
Order by id desc
Limit 10) s 
```

另外，请查看类似问题的答案： [如何选择每个类别的最新四个项目？](https://stackoverflow.com/questions/1442527/how-to-select-the-newest-four-items-per-category/1442867#1442867)

# mvvm - AvalonDock 2 与 Caliburn Micro

> ID：14546583
> 
> 赞同：7
> 
> 时间：2013-01-27T10:45:32.700
> 
> 标签：mvvm, caliburn.micro, avalondock

是否有任何关于将 AvalonDock 与 Caliburn Micro MVVM 结合使用的博客或文章？谷歌搜索时没有找到太多

[http://avalondock.codeplex.com/](http://avalondock.codeplex.com/)

编辑：得到了赞成票，所以为什么不更新最终解决方案。完整代码可以在这里找到

[https://github.com/AndersMalmgren/FreePIE](https://github.com/AndersMalmgren/FreePIE)

大部分 avalon 相关代码都可以在这里找到

[https://github.com/AndersMalmgren/FreePIE/blob/master/FreePIE.GUI/Shells/MainShellView.xaml](https://github.com/AndersMalmgren/FreePIE/blob/master/FreePIE.GUI/Shells/MainShellView.xaml)

**山姆回答后更新**

启用 Caliburn 需要做的事情非常非常少。首先实现一个 LayoutItemTemplateSelector

```
public class AutobinderTemplateSelector : DataTemplateSelector
{
    public DataTemplate Template { get; set; }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        return Template;
    }
} 
```

并将其与内容控件和 Caliburns View.Model 附加机制一起使用，例如

```
<xcad:DockingManager.LayoutItemTemplateSelector>
    <avalonDock1:AutobinderTemplateSelector>
        <avalonDock1:AutobinderTemplateSelector.Template>
            <DataTemplate>
                <ContentControl cal:View.Model="{Binding . }" IsTabStop="False" />
            </DataTemplate>
        </avalonDock1:AutobinderTemplateSelector.Template>
    </avalonDock1:AutobinderTemplateSelector>
</xcad:DockingManager.LayoutItemTemplateSelector> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-03T12:09:19.083

在研究同样的事情时，我遇到了 Tim Jones 正在开发的 Gemini 框架：

Github - [https://github.com/tgjones/gemini](https://github.com/tgjones/gemini)

网站 - [http://documentup.com/tgjones/gemini](http://documentup.com/tgjones/gemini)

这是将 AvalonDock 与 Caliburn.Micro 集成的尝试，以提供用于构建类似 IDE 的应用程序的单一框架。它仍处于早期阶段，但他正在实现一些基于 Caliburn 整体设计的有趣抽象。

它还有一些很好的演示应用程序，展示了如何使用该框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T08:12:00.117

[http://caliburnmicro.codeplex.com/discussions/231809](http://caliburnmicro.codeplex.com/discussions/231809) 和 [http://caliburnmicro.codeplex.com/discussions/430994](http://caliburnmicro.codeplex.com/discussions/430994)（解决方案）

我相信那是我用来为 Telerik 的`RadDockingManager`. 那篇文章和[这段](https://gist.github.com/1345512)代码可能会有所帮助。

# .net - 当 Var 改变时执行 IF

> ID：14546585
> 
> 赞同：0
> 
> 时间：2013-01-27T10:46:05.493
> 
> 标签：.net, vb.net

当 var 更改时，我想在 VB.NET 中执行 If。例子：

```
If var testvar change do this if Then
            Me.RichTextBox1.Text = "Hello World"
        End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:53:49.120

您要做的是创建一个类来包装您的变量，并在变量更改时引发一个事件。例如，您的侦听器（表单）然后订阅事件并响应它。

```
Imports System
Class MyClass
  Private x As Integer
  Public Sub SetX(ByVal i As Integer)
    x = i
  End Sub

  Public Function GetX() As Integer
    Return x
  End Function

  Public Event Changed(ByVal sender As Object, ByVal e As EventArgs)

  Protected Overridable Sub OnChanged(ByVal e As EventArgs)
    RaiseEvent Changed(Me, e)
  End Sub
End Class 
```

有关更多信息，请参见此处。

[http://www.codeproject.com/Articles/5041/Step-by-Step-Event-handling-in-VB-NET](http://www.codeproject.com/Articles/5041/Step-by-Step-Event-handling-in-VB-NET) [http://msdn.microsoft.com/en-us/library/ms172877(v=vs .80).aspx](http://msdn.microsoft.com/en-us/library/ms172877(v=vs.80).aspx)

# java - 我需要关闭“PreparedStatement”吗？

> ID：14546592
> 
> 赞同：29
> 
> 时间：2013-01-27T10:46:48.483
> 
> 标签：java, jdbc

我有一个获得大量点击的网站。我遇到了问题，包括 JDBC 连接错误。

我对关闭有点困惑`PreparedStatement`。我需要关闭`PreparedStatement`还是仅关闭就足够了`Statement`？

还有，怎么`ResultSet`办？我也需要关闭它吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-27T10:51:01.940

是的，您必须关闭准备好的语句（`PreparedStatement`对象）和结果集，因为它们可能会导致内存泄漏。

有关详细信息，请参阅*[使用准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)*。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-27T10:50:41.453

是的，您必须关闭它。如果连接来自池，则关闭它实际上会将其发送回池以供重用。

在`finally{}`块中关闭，这样如果抛出异常，您仍然有机会关闭它。

# mvvm - Kendo MVVM 和绑定或扩展自定义事件

> ID：14546606
> 
> 赞同：6
> 
> 时间：2013-01-27T10:49:36.023
> 
> 标签：mvvm, kendo-ui, custom-events

我的页面中有一个 ComboBox，当客户写下任何字母时，我想将按键事件绑定到我的 Kendo ComboBox。

据我了解，剑道在 ComboBox 上没有任何按键事件。

我发现剑道有这样的东西来绑定值和函数：

```
kendo.data.binders.slide = kendo.data.Binder.extend({
        refresh: function () {
            var value = this.bindings["slide"].get();

            if (value) {
                $(this.element).slideDown();
            } else {
                $(this.element).slideUp();
            }
        }
    }); 
```

## 来源：[点击这里](http://demos.kendoui.com/web/mvvm/custom.html)

但问题是我无法解决这个问题并使其触发 KendoComboBox 控件中 InputBox 上的按键事件。

请记住，我正在使用 MVVM，我不想使用像 $('k-input').keypress(...); 这样的东西。我想通过操作 kendo 为我们提供的 extend 方法在我的 kendo 框架中添加一些东西。

先感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-27T17:14:50.260

这个比我想象的要复杂，但是您可以通过制作自定义 MVVM 绑定器来附加到元素的`keyPress`事件来处理这个问题，如下所示：`input`

```
kendo.data.binders.widget.keyPress = kendo.data.Binder.extend({
    init: function (element, bindings, options) {
        kendo.data.Binder.fn.init.call(this, element, bindings, options);
        var binding = this.bindings.keyPress;
        $(element.input).bind("keypress", function(){binding.get();});
    },
    refresh: function () {}
}); 
```

您可以将其绑定到视图模型上的函数。

```
<input data-role="combobox"
    data-text-field="text"
    data-value-field="value"
    data-bind="keyPress: onKeyPress, source: data"></input>

var viewModel = kendo.observable({
    data: [
        {text: "One", value: 1},
        {text: "Two", value: 2}
    ],
    onKeyPress: function () {
        $("#output").append("<div>keyPress</div>");
    }
}); 
```

这是一个[工作 jsFiddle](http://jsfiddle.net/rally25rs/jpKNr/3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T16:15:30.783

您可以使用以下代码捕获所有 ComboBox 控件的 keydown 事件：

```
kendo.ui.ComboBox.fn._keydown = function(e) {
    if (e.which == 13) {
        alert("key pressed!");
    }
}; 
```

这也适用于通常不支持按键事件的 DropDownList 小部件。

# php - 在javascript中重复调用php函数

> ID：14546607
> 
> 赞同：0
> 
> 时间：2013-01-27T10:49:37.327
> 
> 标签：php, javascript

```
function getTime()
    {

         var date = new Array(
        <?php
            $date1 = date("Y-m-d, H:i");
            echo "new Array(\"".$date1."\")";
        ?>);

        //document.write(date[0]);

        return date[0]; 

    }   
function showmychart() {

            max_time = getTime();
            min_time = getMintime(max_time);

            //document.write(max_time);
            //delete myChart;
            var c_channel = channel;
            myChart = new Drawchart(max_time, min_time,c_channel);
            myChart.showChart();

    }

    function changeSBS(){
        channel = 'sbs';
        showmychart();
    }
    function changeKBS2(){
        channel = 'kbs2';
        showmychart();
    }

    </script>
    </head>

    <body>

    <center>    
    <div id = "header">
    </div>

    <div id="middle">
                <input type = "button" id ="before" onclick="showBeforeChart();" value = "Before">
                <object id="chart"></object>
                <script class="code" id="Drawchart" type="text/javascript">showmychart();</script>
                <input type = "button" id ="after" onclick="showAfterChart();" value = "After">
    </div>
    <div id = "channel_position">
    <input type = "button" id ="before" onclick="changeSBS();" value = "aaa">
    <input type = "button" id ="before" onclick="changeKBS2();" value = "bbb"> 
```

在这段代码中，当我单击 aaa 按钮或 bbb 按钮时，我想使用函数 getTime() 更新函数 shomychart() 中的 max_time。现在，当我单击按钮 aaa 并且 bbb 它没有更新时，我认为它没有调用 getTime() 函数或在 getTime() 函数中不起作用......我该如何解决这个问题？ ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:00:16.923

PHP 是一种服务器端语言。这意味着您服务器上的 PHP 代码将被执行并将生成的纯 HTML 发送到您客户端的浏览器。当浏览器收到您的页面时，它会看到如下内容：

```
function getTime() {
    var date = new Array(
        new Array("2013-01-01 13:37")
    );

    //document.write(date[0]);

    return date[0]; 
} 
```

请注意，日期已*包含*在 JavaScript 代码中。

更好的解决方案是使用*客户端的时间*而不是（尝试使用）*服务器的时间*。您可以使用 JavaScript（它是一种*客户端*语言）使用[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)对象来执行此操作：

```
function getTime() {
    // Get current date
    var date = new Date();
    // Build a date string
    var dateString = date.getFullYear()
        + "-" + (date.getMonth()+1)
        + "-" + date.getDate()
        + " " + date.getHours()
        + ":" + date.getMinutes();
    // Return the constructed date string
    // wrapped inside an array (since apparently you need it in that format)
    // (Note that this is a short-hand notation for "new Array(dateString)")
    return [dateString];
} 
```

根据您使用的图表库，您可以简单地传递一个`Date`对象，`max_time`因此您不需要先构建日期字符串。然后，只需摆脱自己的`getTime()`并简单地使用`new Date()`.

# javascript - jQuery 检查和更改 Radio (html)

> ID：14546609
> 
> 赞同：1
> 
> 时间：2013-01-27T10:49:51.443
> 
> 标签：javascript, jquery, radio-button

我的 HTML

```
<html>    
    <head>
        <link href="../../fuctions/style.css" rel="stylesheet" media="screen"
        type="text/css" />
        <script type="text/javascript" charset="utf-8" src="../../fuctions/cordova-2.3.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="../../fuctions/functions.js"></script>
        <script type="text/javascript" charset="utf-8" src="../../fuctions/jq.js"></script>
    </head>

    <body>
        <div id="topbar">
            <div id="title">
                <!--Title-->After Landing</div>
            <div id="leftnav"> <a href="../../index_aerosoft.html">Home</a>
 <a href="katana_checklist_all.html">Overview</a>
                <!--AllChecklist-->
            </div>
            <div id="rightnav"> <a href="katan_checklist_engineshut-downl.html" id="a_next">Next</a>
            </div>
            <!--NextPage-->
        </div>
        <div id="content">
            <ul class="pageitem">
                <li class="radiobutton" onClick="checkChanges()"> <span class="name">Wing Flaps -<font color="red"> UP
                            </font></span>

                    <input name="1" type="radio"
                    value="other" />
                </li>
                <!--CheckpunktEnd-->
                <li class="radiobutton" onClick="checkChanges()"> <span class="name">Carburetor Heat -<font color="red"> OFF
                            </font></span>

                    <input name="2" type="radio"
                    value="other" />
                </li>
                <!--CheckpunktEnd-->
                <li class="radiobutton" onClick="checkChanges()"> <span class="name">Exterior Lights -<font color="red"> as required
                            </font></span>

                    <input name="3" type="radio"
                    value="other" />
                </li>
                <!--CheckpunktEnd-->
                <li class="radiobutton" onClick="checkChanges()"> <span class="name">Electric Fuel Pump -<font color="red"> OFF
                            </font></span>

                    <input name="4" type="radio"
                    value="other" />
                </li>
                <!--CheckpunktEnd-->
            </ul>
        </div>
        <div id="footer"> <a class="noeffect" href="#" onClick="resetChecklist();">Reset Checklist</a>
            <!--ResetChecklist-->
            <br />
            <br /> <a class="noeffect" href="#" onClick="openxyzDE();">xyz</a>

        </div>
    </body>
</html> 
```

Javascript

```
function checkChanges() {
    $('.radiobutton font').attr('color', 'red');

    font = $('.radiobutton :checked').closest('.radiobutton').find('font')

    if (this.flag) {
        this.checked = false;
    } else {
        font.attr('color', 'green');
    }

    this.flag = !this.flag;
}

$(function () {
    checkChanges();
    $('.radiobutton :radio').on('click', checkChanges);
}); 
```

[**JSFiddle 链接**](http://jsfiddle.net/syTQD/3/)

如果有人单击单选按钮，它会被取消选中并且颜色变回红色，但颜色或全部，它应该只更改未选中的那个人的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:20:33.440

这是有效的：http: [//jsfiddle.net/syTQD/12/](http://jsfiddle.net/syTQD/12/)

单选按钮应具有正确的名称，例如：name="test[]"

html:

```
<div id="topbar">
    <div id="title"><!--Title-->
        After Landing
    </div>  
    <div id="leftnav">
        <a href="../../index_aerosoft.html">Home</a>
        <a href="katana_checklist_all.html">Overview</a><!--AllChecklist-->
    </div>
    <div id="rightnav">
        <a href="katan_checklist_engineshut-downl.html"id="a_next">Next</a></div><!--NextPage-->
    </div>
    <div id="content">
        <ul class="pageitem">
            <li class="radiobutton" >
                <span class="name">Wing Flaps -<font color="red"> UP
                </font></span>
                <input name="test[]" type="radio" value="other" />
            </li><!--CheckpunktEnd-->
            <li class="radiobutton">
                <span class="name">Carburetor Heat -<font color="red"> OFF
                </font></span>
                <input name="test[]" type="radio" value="other" />
            </li><!--CheckpunktEnd-->
            <li class="radiobutton" >
                <span class="name">Exterior Lights -<font color="red"> as required
                </font></span>
                <input name="test[]" type="radio" value="other" />
            </li><!--CheckpunktEnd-->
            <li class="radiobutton" >
                <span class="name">Electric Fuel Pump -<font color="red"> OFF
                </font></span>
                <input name="test[]" type="radio" value="other" />
            </li><!--CheckpunktEnd-->
        </ul>
    </div>
    <div id="footer">
        <a class="noeffect" href="#" onClick="resetChecklist();">Reset Checklist</a><!--ResetChecklist-->
        <br /><br />
        <a class="noeffect" href="#" onClick="openxyzDE();">xyz</a>
    </div> 
```

js：

```
function checkChanges(e) {
    if (!$(e.target).is('input'))
        $(this).find('input').click();

    $('input:radio').each(function() {
        var color = ($(this).is(':checked')) ? 'green' : 'red';
        $(this).parentsUntil('li').parent().find('font').attr('color',color);
    });
}

$('.pageitem .radiobutton').on('click',checkChanges); 
```

# python - 如何在纯 asm 中编写 python 扩展，它会高效吗？

> ID：14546610
> 
> 赞同：1
> 
> 时间：2013-01-27T10:50:31.897
> 
> 标签：python, assembly, python-extensions

我有中等的业余技能，`Python`我是初学者，`asm`对语言一无所知`C`。

我知道 python `C`-extensions 必须遵循特定的接口才能正常工作。

这是否可以`Assembly`用正确的接口和完整的功能编写纯 python 扩展？第二个问题是，如果做得对，它是否足够有效？

在谷歌搜索时，我没有找到任何关于这个问题的代码示例或一些文章或解决方案。

这**不是**关于`asm`从内部运行代码的问题，`Python`因此它与 SO 上的主题不重复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T10:57:45.673

理论上——**这是可能的**。

在实践中——**这样做是非常不切实际的**。

在极少数情况下可以合理地使用汇编而不是 C，即使您遇到这种情况，在这种情况下您也不太可能使用 Python。

另请注意，**编译器可以将 C 代码优化为极其高效的汇编**。**事实上，你几乎不可能手写汇编，编译器输出的效率会更高**，*除非你有非常强大的汇编技能*，或者你一生都在写汇编。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T10:58:10.177

你可以将你的 asm 写为你的 c 扩展内的内联 asm，至于效率......

> 茶壶。

效率不是通过语言的选择来衡量的，而是通过实现的好坏和设计的好坏来衡量的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-26T14:30:24.790

**怎么做：**

我不知道你是否可以“纯粹”在汇编中做到这一点，但是：如果你在**C 中创建一个调用汇编函数**的“代理类”（让我们这样称呼它） ，然后你**用 C 编写汇编器然后**，通过简单地编译汇编代码：

```
nasm -felf64 -g -F dwarf assembly_function.asm 
```

然后，使用包含以下内容的 setup.py 文件：

```
from distutils.core import setup, Extension
setup(name='assembly_include_name', version='1.0', ext_modules=[Extension('assembly_include_name', ['c_assembly_proxy.c'],extra_objects=["assembly_function.o"])]) 
```

你将能够做你想做的事。请注意，您必须**在 Extension 构造函数中添加参数“extra_objects”**，以便告诉 python 链接汇编代码，否则它会崩溃，说它找不到函数的名称。

**你为什么要这样做：**

如果您想使用 SSE 指令（SSE2、SSE3...），而不管编译器可以进行哪些优化。

扩展api： [https ://docs.python.org/2/extending/extending.html](https://docs.python.org/2/extending/extending.html)

disutils.core 参考： [https ://docs.python.org/2/distutils/apiref.html?highlight=distutils.core#module-distutils.core](https://docs.python.org/2/distutils/apiref.html?highlight=distutils.core#module-distutils.core)

# android - Android 动态壁纸和应用列表中的主要活动

> ID：14546615
> 
> 赞同：0
> 
> 时间：2013-01-27T10:51:14.137
> 
> 标签：android, android-activity, live-wallpaper

我刚刚创建了一个动态壁纸，但我无法在程序列表中显示它。壁纸只出现在壁纸列表中，长按主屏幕。

有没有办法在两个屏幕上显示壁纸：壁纸列表和程序列表？

我尝试通过在清单中设置意图过滤器**操作 android:name="android.intent.action.MAIN" />**但墙纸无法比较。

```
 <activity
        android:name="Preferences"
        android:label="@string/description"
        android:theme="@android:style/Theme.WallpaperSettings"
        android:exported="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.PREFERENCE" />
         </intent-filter>
    </activity> 
```

我应该在 Manifest 文件中使用什么来在两个屏幕上显示壁纸？

# sql - 理解自然连接的困难

> ID：14546617
> 
> 赞同：3
> 
> 时间：2013-01-27T10:51:21.420
> 
> 标签：sql, database, natural-join

我在理解数据库系统中自然连接的要点时遇到问题。根据定义，自然连接选择具有相同名称的列值相同的2个表的组合。

我的问题是：如果同名列有两个不同的值怎么办？它们将被删除，但是如果我需要从删除的元组中获取一些信息怎么办？

有人可以用例子向我解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:54:38.187

这些值不需要是唯一的，并且您不应该“丢弃”元组。

自然连接适用于懒惰、信任和糟糕的程序员：

*   懒惰：不打扰输入连接条件
*   信任：希望当将同名列添加到两个表时，它们的查询不会突然中断
*   坏：好的编程的本质是清晰。使用自然连接会掩盖连接是如何进行的，因此查询的读者必须检查表定义以了解发生了什么

恕我直言，使用自然连接是一个糟糕的主意，永远不应该使用它们。您几乎一无所获（您节省了输入可能十几个字符）并且损失了*很多*。

### 编辑：

自然联接在内部/外部方面与任何其他联接一样：默认为内部联接，但您也可以指定左联接或右联接，例如在 mysql 中：

```
select ...
from t1
natural left join t2 
```

# c# - 实时从吉他输入中获取频率

> ID：14546619
> 
> 赞同：2
> 
> 时间：2013-01-27T10:51:46.613
> 
> 标签：c#, signal-processing, naudio

我正在尝试从插件吉他获取输入，从中获取频率并检查用户是否弹奏了正确的音符。像吉他调音器之类的东西（我也需要做一个吉他调音器）。

我的第一个问题是，如何实时获取吉他输入的频率？

是否可以做类似的事情：

```
if (frequency == noteCFrequency)
{
//print This is a C note!!
} 
```

我现在可以从声卡获取输入，录制和播放输入的声音了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:01:46.763

对于 C# 中的 FFT 实现，您可以查看[此](https://stackoverflow.com/questions/170394/fast-fourier-transform-in-c-sharp). 虽然我认为您不需要完全了解 FFT 即可使用它，但您应该了解一些基本限制：

1.  您总是需要一个示例窗口。您可能有一个滑动窗口，但这里快速的本质是获取大量信号并接受一些错误。
2.  你有频率的“桶”而不是确切的频率。结果类似于“在 420Hz - 440Hz 范围内，您有 30% 的信号”。（桶的“宽度”应该是可调的）
3.  窗口大小必须包含多个 2 的幂的样本。
4.  窗口大小必须至少是您要检测的最长波长的两个波长。
5.  最高频率由采样率给出。（你不必担心这么多）
6.  你希望你的频率分离得越精确，你的窗口就越长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:52:49.500

其他答案并没有真正解释如何做到这一点，他们只是有点放弃了他们的手臂。例如，从阅读这些答案中您不会知道 FFT 的输出是一组复数，并且您不知道如何解释它们。

此外，FFT 甚至不是最好的可用方法，尽管对于您的目的来说它工作得很好，而且大多数人认为它是最直观的。无论如何，这个问题已经被问死了，所以我只会向您推荐关于 SO 的其他问题。并非所有都适用于 C#，但您需要先了解（重要的）概念。您可以通过阅读这些问题的答案并点击链接来找到您的问题的答案。

[假人的频率/音高检测](https://stackoverflow.com/questions/11553047/frequency-pitch-detection-for-dummies/11569383#11569383)

[在android中每1/4秒获取一个音频文件的频率](https://stackoverflow.com/questions/11844914/get-the-frequency-of-an-audio-file-in-every-1-4-seconds-in-android/11855208#11855208)

[如何检测 iPhone 上的声音频率/音高？](https://stackoverflow.com/questions/1696773/how-to-detect-sound-frequency-pitch-on-an-iphone/11620063#11620063)

[如何在android中计算声音频率？](https://stackoverflow.com/questions/12721254/how-to-calculate-sound-frequency-in-android/12749323#12749323)

[如何在每个FFT计算中检索不同的原始频率并且在java中没有任何频率泄漏](https://stackoverflow.com/questions/12329880/how-to-retrieve-the-different-original-frequency-in-each-fft-caculating-and-with/12353877#12353877)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T11:06:18.747

您必须计算一个信号的 FFT - 快速傅里叶变换 - 并寻找一个峰值。对于 FFT 的种类、窗口类型、窗口大小......您必须阅读一些有关信号处理的文档。无论如何，一个 25 毫秒的窗口是可以的，例如，使用一个汉明窗口。网上有很多计算 FFT 的代码。祝你好运！

# scala - 将“项目”映射到其类型参数化“容器”的宏——大的编译器错误

> ID：14546620
> 
> 赞同：1
> 
> 时间：2013-01-27T10:52:03.413
> 
> 标签：scala, scala-macros

假设我有“项目”的特征和这些项目的“容器”的另一个特征：

```
sealed trait Item
case class Marble() extends Item
case class Book() extends Item

sealed trait Container[Item]
case object Pouch extends Container[Marble]
case object Shelf extends Container[Book] 
```

使用上面的类型信息，我想通过宏和一些运行时反射来构造一个这样的映射：

```
// Map(classOf[Marble] -> Pouch, classOf[Book] -> Shelf)
val itemToContainer = typeParamMap[Container[_], Item](Pouch, Shelf) 
```

这是我的尝试，它编译得很好，并且以只返回 TypeTags 列表的中间形式工作：

```
object Macros {
  def getTag[T](implicit ttag: ru.TypeTag[T]) = ttag

  def getBaseParam(child: ru.Type, base: ru.Symbol, paramBase: ru.Symbol) =
    child.baseType(base)
      .find(_.baseClasses.contains(paramBase))
      .get
      .typeSymbol
      .asClass // TODO how to get java.lang.Class from here?

  def typeParamMapImpl[B, P](c: Context)(children: c.Expr[B]*)(baseTag: c.Expr[ru.WeakTypeTag[B]], paramTag: c.Expr[ru.WeakTypeTag[P]]) = {
    import c.universe._

    val getTagTree = Select(Ident(newTermName("Macros")), "getTag")
    val typeTags = c.Expr[List[ru.TypeTag[_]]](Apply(reify(List).tree, children.map( t =>
      c.Expr(TypeApply(getTagTree, List(t.tree))).tree
    ).toList))

    reify {
      typeTags.splice.map { child =>
        getBaseParam(child.tpe, baseTag.splice.tpe.typeSymbol, paramTag.splice.tpe.typeSymbol) -> child.tpe
      }.toMap
    }
  }

  def typeParamMap[B, P](children: B*)(implicit baseTag: ru.WeakTypeTag[B], paramTag: ru.WeakTypeTag[P]) = macro Macros.typeParamMapImpl[B, P]
} 
```

但是，当我尝试通过调用它进行编译时，我得到一个巨大的编译器错误：[https ://gist.github.com/4647812](https://gist.github.com/4647812)

任何人都可以发现问题，或提出更好的解决方法吗？

谢谢！

# ruby-on-rails - 使用 rspec 测试 Rails STI 子类

> ID：14546621
> 
> 赞同：3
> 
> 时间：2013-01-27T10:52:04.870
> 
> 标签：ruby-on-rails, unit-testing, testing, rspec, tdd

给定一个从 ActiveRecord::Base 继承的类，我们称它为 Task，我有两个子类，它们使用标准 Rails 单表继承来专门处理任务的某些方面，Activity 和 Training。

在查看其他可用数据后，我对这个选择充满信心，因为模型的实际数据是相同的，只是行为不同。非常适合 STI。

可以创建、启动、推进和完成任务。这是这些转换中涉及的一些逻辑，尤其`start()`是要求对基类进行专门化的逻辑。

由于我正在执行此 TDD 并开始使用具有完整测试覆盖率的工作任务调用，我现在想知道如何继续。我有几个我想过的情景：

1.  复制 Task 的测试并端到端测试 Activity 和 Training 并进行一些小的修改以测试它们的专业化。优点：快速简单。缺点：它会重复代码，虽然这在这里可能不是什么大问题，但当专业化数量增加时就会出现问题。

2.  拆分测试并保留大部分测试代码，`task_spec.rb`同时将专业化测试转移到各个子类的新规范中。优点：保持测试干燥。缺点：我在基础测试中实例化什么类？

最后一个问题是什么在困扰我。现在我已经设置了基类测试，可以从一个 Concert 子类中随机创建一个类，但这是一种好的形式吗？它几乎让我想使用方法 1 只是为了保持测试运行的一致性，否则我必须找到一种方法来确定我的类选择的随机性，以便我至少有一个可重复的测试套件的随机种子随机选择。

我猜这一定是人们遇到的一个常见问题，但我找不到关于这个主题的任何好的信息。您对此事有任何资源或想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-09T16:46:19.057

使用 rspec 共享示例（由 Renato Zannon 提到）将如下所示：

在`spec/support/`. 我会打电话`shared_examples_for_sti.rb`的。

```
require 'spec_helper'

shared_examples "an STI class" do

  it "should have attribute type" do
    expect(subject).to have_attribute :type
  end

  it "should initialize successfully as an instance of the described class" do
    expect(subject).to be_a_kind_of described_class
  end

end 
```

在`_spec.rb`每个 STI 类及其子类的文件中，添加以下行：

```
it_behaves_like "an STI class" 
```

如果您有任何其他要在 STI 类和子类之间共享的测试，只需将它们添加到`shared_examples`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T15:10:39.910

您可以使用[rspec 共享示例](https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples)来测试它们之间共享的行为（基本上是继承的行为，或者您想要防范[LSP](http://c2.com/cgi/wiki?LiskovSubstitutionPrinciple)违规的地方）。

# iphone - 我们如何在 XCode 4.5 中找到“文件类型”选项卡？

> ID：14546623
> 
> 赞同：0
> 
> 时间：2013-01-27T10:52:17.397
> 
> 标签：iphone, xcode4.5, preferences

我正在从 XCode 4.5 的首选项中寻找“文件类型”选项卡，但我找不到它。

我怎样才能得到这个标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:14:35.480

如果您正在寻找您的 Xcode 项目文档类型（即您的应用程序将打开哪些类型的文档），可以在您的项目的信息窗格中找到它们。它看起来像这样：

![为您的项目设置文档类型](../Images/5eee37c5195376220ba7be2243408da2.png)

现在，如果您想在 Xcode 中打开具有非标准（对于 Macintosh）扩展名的文件（例如以名称“ `.zinnuree`”结尾的文件），或者让 Xcode 之外的另一个 IDE 打开您的源文件，您可以执行“获取信息” " 在这些文件上，然后指定要用于打开这些文件的应用程序。更多信息可以在[这个密切相关的问题](https://stackoverflow.com/questions/8223132/how-to-set-an-external-editor-in-x-code-4-2)中找到。

![更改助手应用程序](../Images/8757d0726117c3de1fdad5786a9de7dd.png)

# php - 更新重复记录保持1条记录不变的SQL语句

> ID：14546624
> 
> 赞同：1
> 
> 时间：2013-01-27T10:52:19.147
> 
> 标签：php, mysql, sql

我需要帮助来解决这种情况。我有一个包含记录的表，有一个字段 sku，在这个记录中我有 sku 多次出现。表结构是这样的 rid|id|sku|name

如果任何 sku 在表上多次可用，则记录如下所示

```
rid  id  sku     name
---  --  ------  --------------

1    3   rs-123  test product

2    3   rs-123  test product

3    4   rs-125  test product 2

4    4   rs-125  test product 2

5    4   rs-125  test product 2

6    6   rs-126  test product 3 
```

我需要的是使用重复记录更新表，保持第一条记录不变（N-1）。因此，例如，我需要运行仅更新重复记录的 SQL 语句，因此如果更新第一条记录，它将如下所示

```
rid  id  sku     name
---  --  ------  --------------
1    3   rs-123  test product
2    3   updated  updated 
```

我试图用这个 SQL 语句实现一些目标，但它不起作用

```
WITH duplicates AS (
  SELECT
ROW_NUMBER() OVER (PARTITION BY id ORDER BY rid) AS duplicate_id,
*
FROM
test
)

UPDATE
  duplicates
SET
  sku = updated
WHERE
  duplicate_id > 1 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:02:04.507

也许您可以尝试使用变量：

[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/fac10/2)

```
set @sku:='';

select a.rid, a.id, 
@sku:= (case when @sku<>a.sku
        then a.sku else 'updated'
        end) as skus, @sku:=a.sku, a.name
from skus a
;

| RID | ID |    SKUS | @SKU:=A.SKU |           NAME |
-----------------------------------------------------
|   1 |  3 |  rs-123 |      rs-123 |   test product |
|   2 |  3 | updated |      rs-123 |   test product |
|   3 |  4 |  rs-125 |      rs-125 | test product 2 |
|   4 |  4 | updated |      rs-125 | test product 2 |
|   5 |  4 | updated |      rs-125 | test product 2 |
|   6 |  6 |  rs-126 |      rs-126 | test product 3 | 
```

对于更新：

[用于更新的 SQLFIDDLE 演示](http://sqlfiddle.com/#!2/ecb91/1)

```
set @sku:='';

UPDATE
  skus a
  join 
  (select a.rid, a.id, 
@sku:= (case when @sku<>a.sku
        then a.sku else 'updated'
        end) as skus, @sku:=a.sku, a.name
from skus a) b
  on a.rid = b.rid
SET
  a.sku = 'up_again'
WHERE
  b.skus = 'updated'
;

| RID | ID |      SKU |           NAME |
----------------------------------------
|   1 |  3 |   rs-123 |   test product |
|   2 |  3 | up_again |   test product |
|   3 |  4 |   rs-125 | test product 2 |
|   4 |  4 | up_again | test product 2 |
|   5 |  4 | up_again | test product 2 |
|   6 |  6 |   rs-126 | test product 3 | 
```

这是另一个使用`Joins`：

[http://sqlfiddle.com/#!2/ddf47/2](http://sqlfiddle.com/#!2/ddf47/2)

```
update skus a
join skus b
on a.rid = b.rid +1
set a.sku = 'updated'
where a.sku = b.sku
;

| RID | ID |     SKU |           NAME |
---------------------------------------
|   1 |  3 |  rs-123 |   test product |
|   2 |  3 | updated |   test product |
|   3 |  4 |  rs-125 | test product 2 |
|   4 |  4 | updated | test product 2 |
|   5 |  4 | updated | test product 2 |
|   6 |  6 |  rs-126 | test product 3 | 
```

**要同时更新 sku 和名称：**

[http://sqlfiddle.com/#!2/97f4f/1](http://sqlfiddle.com/#!2/97f4f/1)

```
update skus a
join skus b
on a.rid = b.rid +1
set a.sku = 'updated', a.name = 'new_name'
where a.sku = b.sku
;

| RID | ID |     SKU |           NAME |
---------------------------------------
|   1 |  3 |  rs-123 |   test product |
|   2 |  3 | updated |       new_name |
|   3 |  4 |  rs-125 | test product 2 |
|   4 |  4 | updated |       new_name |
|   5 |  4 | updated |       new_name |
|   6 |  6 |  rs-126 | test product 3 | 
```

* * *

## 在 SQL SERVER 中使用 ROW_NUMBER() 查看 OP 的问题

[http://sqlfiddle.com/#!3/355c4/2](http://sqlfiddle.com/#!3/355c4/2)

```
update a 
set a.sku = 'updated', a.name = 'new_name'
from skus a
join (Select rid, id, row_number() over (
  partition by id order by rid asc) rank
from skus) b
on a.rid = b.rid
where b.rank > 1
;

| RID | ID |     SKU |           NAME |
---------------------------------------
|   1 |  3 |  rs-123 |   test product |
|   2 |  3 | updated |       new_name |
|   3 |  4 |  rs-125 | test product 2 |
|   4 |  4 | updated |       new_name |
|   5 |  4 | updated |       new_name |
|   6 |  6 |  rs-126 | test product 3 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:17:20.327

试试这个：

```
UPDATE
  test
SET
  sku = 'updatedSKU'
WHERE rid IN
(
  SELECT
    rid
  FROM
  (
    SELECT rid,
        @rn := IF(@sku != sku, 1, @rn + 1) rn,
        @sku:=sku
     FROM test,
        (SELECT @rn:=0, @sku := NULL) r
  ) s
  WHERE rn > 1
); 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!2/647f6/1)**

或这个：

```
UPDATE
   test t
   JOIN
     (
       SELECT rid,
           CASE WHEN @sku != sku THEN @rn := 1 ELSE @rn := @rn + 1 END rn,
           @sku:=sku
        FROM test,
          (SELECT @rn:=0, @sku := NULL) r
     ) s
  ON t.rid = s.rid
  SET  sku = 'updatedSKU'
  WHERE s.rn > 1; 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!2/ef615/1)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T11:37:28.670

假设 rid 是唯一的，这个版本可以在不依赖数据顺序的情况下工作。

```
update skus, (
       select id, min(rid) rid from skus group by id 
) minimum_rid
set skus.sku = 'updated'
, skus.name = 'updated'
where skus.id = minimum_rid.id
and skus.rid > minimum_rid.rid ; 
```

# php - PHP if/else 简写符号 - 多个条件

> ID：14546627
> 
> 赞同：3
> 
> 时间：2013-01-27T10:53:16.790
> 
> 标签：php, conditional-operator

请考虑以下代码构造：

```
condition  ? code_if_true  : 
condition2 ? code_if_true2 : 
             code_if_false; 
```

这不适用于 PHP，而它适用于 JavaScript。

有没有办法让它为 PHP 工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T11:09:33.317

在 PHP 中，条件运算符是[***左***关联的 [ PHP.net ^]](http://php.net/manual/en/language.operators.precedence.php#language.operators.precedence)，与几乎所有其他右关联的语言相比。

这就是为什么您需要使用括号来控制评估顺序的原因¹：

```
 condition  ? code_if_true  : 
(condition2 ? code_if_true2 : 
              code_if_false ); 
```

^(¹解析运算符的顺序，而***不是***计算操作数的顺序。后者基本上是[***未定义***^(的[PHP.net])](https://bugs.php.net/bug.php?id=61188#1330283084))

# c - 共享内存程序不同步 - 给出分段错误

> ID：14546638
> 
> 赞同：0
> 
> 时间：2013-01-27T10:55:39.640
> 
> 标签：c, pointers, segmentation-fault, shared-memory

我正在尝试将共享内存与我在这里展示的 2 个程序一起使用。a 和 b 是整数数组，array1 和 array2 是字符串数组。这是将数据加载到内存中的第一个代码片段程序

```
int size = (NUMBER_OF_DATA*(sizeof(int)+sizeof(float)));
key_t key1, key2, key3;
key1 = ftok("/home/an/Desktop/newww.c", 4);
key2 = ftok("/home/an/Desktop/part1.c", 5);
key3 = ftok("/home/an/Desktop/part2.c", 6);
int shmid = shmget(key1, size, 0777|IPC_CREAT);
int shmid1 = shmget(key2, 20*NUMBER_OF_DATA, 0777|IPC_CREAT);
int shmid2 = shmget(key3, 20*NUMBER_OF_DATA, 0777|IPC_CREAT);
int *a = (int *)shmat(shmid, 0, 0);
float *b = (float *)(a + NUMBER_OF_DATA);
char **array1 = (char **)shmat(shmid1, 0, 0);
printf("array1 %p\n", &array1);
char *mempos = (char *)(array1 + NUMBER_OF_DATA); 
printf("MEMPOS %p\n", &mempos);
char **array2 = (char **)shmat(shmid2, 0, 0);
char *mempos1 = (char *)(array2 + (NUMBER_OF_DATA)); 

for(i=0; i<NUMBER_OF_DATA; i++)
{
    a[i] = a[i];
    b[i] = b[i];
    array1[i] = mempos; 
    strcpy(array1[i], array1[i]);
    mempos += 20;
    array2[i] = mempos1;
    strcpy(array2[i], array2[i]);
    mempos1 += 20;
    printf("%p  %p  %p  %p\n", &a[i], &b[i], array1[i], array2[i]);
}

j = 0;
while (j<5)
{
    j++;
    for (i=0; i<NUMBER_OF_DATA; i++)
    {
        printf("%s  %s  %d  %f\n", array1[i], array2[i], a[i], b[i]);
    }
    printf("\n");
    sleep(2);
} 
```

我正在尝试通过上述文件在共享内存中加载一些数据，并通过下面的文件更改共享内存中的元素。但是，一旦我在下面的文件中更新了一个字符串，我就会从上面的程序中得到垃圾值，而不是改变的值。我完全糊涂了。已尝试使用 gdb 进行调试，但那里一切正常。

```
int size = (NUMBER_OF_DATA*(sizeof(int)+sizeof(float))) + (2*(20*NUMBER_OF_DATA));
key_t key1, key2, key3;
key1 = ftok("/home/an/Desktop/newww.c", 4);
key2 = ftok("/home/an/Desktop/part1.c", 5);
key3 = ftok("/home/an/Desktop/part2.c", 6);
int shmid = shmget(key1, size, 0777|IPC_CREAT);
int shmid1 = shmget(key2, 20*NUMBER_OF_DATA, 0777|IPC_CREAT);
int shmid2 = shmget(key3, 20*NUMBER_OF_DATA, 0777|IPC_CREAT);

int *a = (int *)shmat(shmid, 0, 0);
float *b = (float *)(a + NUMBER_OF_DATA);
char **array1 = (char **)shmat(shmid1, 0, 0);
printf("array1 %p\n", &array1);
char *mempos = (char *)(array1 + NUMBER_OF_DATA); 
printf("MEMPOS %p\n", &mempos);
char **array2 = (char **)shmat(shmid2, 0, 0);
char *mempos1 = (char *)(array2 + (NUMBER_OF_DATA)); 
int i;
for(i=0; i<5; i++)
{
    printf("enter\n");

    array1[i] = mempos; 
    scanf("%s", array1[i]);
    mempos += 20;
} 
```

解决办法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:00:13.573

问题很可能*不是*您认为的问题，而是您的数组。数组数组*与*指向指针的指针不同。

数组是内存的连续区域，数组数组是连续区域的连续区域，即所有数组都相互跟随。指向指针的指针可以看成是一个指针数组，内存布局完全不同。

此外，只有指针数组是共享的，而不是指针实际指向的内容。

# ios - Admob 在 iOS 中仍然被禁止吗

> ID：14546639
> 
> 赞同：-2
> 
> 时间：2013-01-27T10:55:41.057
> 
> 标签：ios, admob

我正在开发我的 iOS 和 android 应用程序，并且 iAd 网络出现问题仅在某些国家/地区有效，因此我将使用 admob，但我发现有关 admob 在 2010 年在 iOS 中被禁止的消息。并且最近没有关于此的消息了。

但我在互联网上发现有人在 iOS 应用程序中使用 admob。并且有人仍然建议使用 admob 的 iAd 插入。

任何人都可以确认 Admob 现在是否允许 iOS？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:58:32.720

如果它被禁止，Google 将不会在[AdMob 注册和下载页面](https://developers.google.com/mobile-ads-sdk/)上提供它。

（加上苹果公司需要向美国联邦贸易委员会解释很多事情）

我猜您的查询[来自这个 TechRadar 故事](http://www.techradar.com/us/news/computing/apple/admob-hits-back-at-apple-ban-695483)，但是当您转到 AdMob 下载页面时，它指定 UDID 用于 iOS 5，而更新的“广告标识符”（IDFA）用于 iOS 6 和更新版本.

# mongodb - mongodb按多个标签搜索

> ID：14546642
> 
> 赞同：1
> 
> 时间：2013-01-27T10:56:05.893
> 
> 标签：mongodb

我正在阅读按标签（数组中的元素）搜索的 mongoDB 手册；这是页面：[http ://docs.mongodb.org/manual/tutorial/model-data-for-keyword-search/](http://docs.mongodb.org/manual/tutorial/model-data-for-keyword-search/)

但是，如何在使用多个 keyworks 时进行搜索？可以这样使用数组吗？

单个关键字：

```
db.volumes.findOne( { topics : "voyage" }, { title: 1 } ) 
```

很多关键词：

db.volumes.findOne（{主题：['航程'，'航海']}，{标题：1}）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:56:01.600

您可以在此处使用 $in ( [http://docs.mongodb.org/manual/reference/operator/in/](http://docs.mongodb.org/manual/reference/operator/in/) ) 运算符列出用于搜索标签数组的单词范围：

```
db.volumes.findOne( { topics : {$in: ['voyage', 'nautical']} }, { title: 1 } ) 
```

# python - 正则表达式，python：最后一次出现的索引。有消极的后视

> ID：14546646
> 
> 赞同：0
> 
> 时间：2013-01-27T10:56:56.270
> 
> 标签：python, regex

我需要获取最后一次出现正则表达式的索引。

在下面的句子中，我需要获取最后一个句点或感叹号的索引，但如果它是简短缩写（空格字符句点）的一部分，则不需要

```
Great buy w. all amenities! Use on all cars. come on in 
```

我可以像这样获得第一次出现的索引

```
t = u"Great buy w. all amenities! Use on all cars. come on in "
p = "(?<! .)([.] |! )"
i = len(re.compile(p).split(t)[0])
print i 
```

那是“设施”后面的感叹号。但我需要“汽车”之后的时期。

我的缩写 regexp 可能需要一些调整，但关键是 regexp 有负面的后视。

我尝试使用负前瞻，但它变得复杂并且没有按照我的方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:04:08.243

使用 遍历所有匹配项[`finditer()`](http://docs.python.org/2/library/re.html#re.RegexObject.finditer)，然后选择最后一个匹配项（使用结果[`MatchObject`](http://docs.python.org/2/library/re.html#re.MatchObject)的[`.start()`方法](http://docs.python.org/2/library/re.html#re.MatchObject.start)：

```
import re

p = re.compile("(?<! .)([.] |! )")
t = u"Great buy w. all amenities! Use on all cars. come on in "

last = None
for m in p.finditer(t):
    last = m

if last is not None:
    print m.start() 
```

打印`43`。

请注意，就目前而言，您的正则表达式不适用于输入中*最后一个*字符的任何标点符号；如果`t`更改为：

```
t = u"Great buy w. all amenities! Use on all cars. come on in!" 
```

结果仍然是`43`，而不是`55`。您需要匹配标点符号，后跟空格*或*字符串的结尾：

```
p = re.compile("(?<! .)([.!](?:\s|$))") 
```

然后给出：

```
>>> import re
>>> t = u"Great buy w. all amenities! Use on all cars. come on in!"
>>> p = re.compile("(?<! .)([.!](?:\s|$))")
>>> last = None
>>> for m in p.finditer(t):
...     last = m
... 
>>> if last is not None:
...     print m.start()
... 
55 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:10:47.860

您可以使用以下内容查找最后一次出现的索引`.`or `!`。

```
t = u"Great buy w. all amenities! Use on all cars. come on in "
i = re.search(r"((?<!\s\S)\.|!)[^.!]*$", t)
if i is not None:
    print i.start() 
```

# objective-c - 无法在 Objective-C 中验证空字符串

> ID：14546655
> 
> 赞同：1
> 
> 时间：2013-01-27T10:58:06.140
> 
> 标签：objective-c, nsstring

我有以下代码：

```
NSString *content = [[NSUserDefaults standardUserDefaults] stringForKey:@"mykey"];
NSLog(@"string is %@",content);
if ([content stringIsEmpty]){
   NSLog(@"empty string");
}else{
  NSLog(@"string is not empty");
} 
```

stringIsEmpty 是类类别`NSString`：

```
- (BOOL ) stringIsEmpty {
    if ((NSNull *) self == [NSNull null]) {
        return YES;
    }
    if (self == nil) {
        return YES;
    } else if ([self length] == 0) {
        return YES;
    }
    return NO;
} 
```

输出是：

```
string is (null)
string is not empty 
```

它怎么可能同时为空而不为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T11:00:06.347

会发生什么：

`[content stringIsEmpty:YES]`

将返回 false ( `NO`)，当`content`是`nil`. 所以你的代码将采用

```
 NSLog(@"string is not empty"); 
```

分支。这会更好：

```
if (content && [content stringIsEmpty:YES]){
    ... 
```

更好的方法是反转方法的语义：

```
if ([content stringIsNotEmpty]) { 
```

这会很好地工作，因为`content`它`nil`什么时候会返回`NO`，当它不是时`nil`，它会执行你的方法。

编辑：

在 Objective-C 中，向 发送消息`nil`是合法的，并且根据定义将评估为`nil`. 谷歌“目标 c 向零发送消息”。

在另一种语言 (C++) 中，您的代码会崩溃（实际上是未定义的行为，但为了简单起见）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:06:49.603

我使用一个小函数来测试空虚。它不仅仅适用于字符串：

```
static inline BOOL isEmpty(id thing) {
    return thing == nil
        || ([thing respondsToSelector:@selector(length)]
        && [(NSData *)thing length] == 0)
        || ([thing respondsToSelector:@selector(count)]
        && [(NSArray *)thing count] == 0);
} 
```

我通常将它导入到我的 pch 文件中 - 你可以看到它以及归属：[https ://gist.github.com/325926](https://gist.github.com/325926)

正如@sergio 已经指出的那样——当你的字符串是`nil`你不能向它发送消息来测试它是否为 nil 时——因为向 nil 发送消息对 void 方法没有任何作用，并在方法返回某些东西的地方返回 nil 。

**还**

您正在使用参数调用您的方法

```
if ([content stringIsEmpty:YES]) 
```

但是您的方法声明不需要一个：

```
- (BOOL ) stringIsEmpty { 
```

那是怎么回事？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T11:50:11.147

您必须在方法之外检查 'content == nil' 情况。

如果您希望能够只调用一个方法，请将方法更改为测试肯定的方法，例如“stringHasContent”，返回`YES`if `self.length > 0`。

# object - MP3 无法在移动浏览器中播放

> ID：14546663
> 
> 赞同：0
> 
> 时间：2013-01-27T10:58:58.390
> 
> 标签：object, mp3, embed, mpmusicplayercontroller

我有一个页面，我允许我的用户在线收听音乐在电脑上一切正常，但是当我尝试签入诺基亚 symbian 时，黑莓 Android 没有任何播放

我正在使用 Flash MP3 播放器，我的简单代码在这里。

我有兴趣在所有手机上玩，因为我的主要目标是移动用户，所以任何想法即使在旧的诺基亚 symbian 手机上也能玩所有这些都将是一个很大的帮助

所有手机都支持 JavaScript，因为我可以使用诺基亚黑莓和 Android 浏览复杂的网站，但唯一的问题是 MP3。欢迎任何建议在所有手机上玩。

我的直播网站[http://way2enjoy.com/rstadmin/listenmusicmobile/1528](http://way2enjoy.com/rstadmin/listenmusicmobile/1528) \

我的代码

```
 <object type="application/x-shockwave-flash" name="audioplayer_1" style="outline: none" data="http://way2enjoy.com/js/player/player.swf" width="500" height="24" id="audioplayer_1"><param name="wmode" value="opaque"><param name="menu" value="false"><param name="flashvars" value="soundFile=uploads/userfiles/201206/1120_56_584iq.preview.mp3&amp;titles=Hanuman Chalisa by Gulshan Kumar&amp;artists=claim_your_money&amp;autostart=yes&amp;loop=yes&amp;playerID=audioplayer_1"></object><script type="text/javascript" src="http://way2enjoy.com/js/player/audio-player.js"></script><script type="text/javascript"> 
$(document).ready(function(){
    AudioPlayer.setup("http://way2enjoy.com/js/player/player.swf", {  
        width: 500  
    });  
    AudioPlayer.embed("audioplayer_1", {  
    soundFile: "http://way2enjoy.com/uploads/userfiles/201206/1120_56_584iq.preview.mp3",  
    titles: "Hanuman Chalisa by Gulshan Kumar",  
    artists: "claim_your_money",  
    autostart: "yes",
    loop: "yes"
    }); 
        });
        </script> 
```

我只对玩手机感兴趣，但我想要所有手机，包括旧的诺基亚 symbian 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:04:37.533

最新的 Android 手机不再支持 Flash……Flash 播放器也需要支持 mp3（我不知道这是否是默认的）

您应该为不同的手机尝试不同的解决方案。您可以通过检查对象是否支持来做到这一点（作为最后的手段，用户代理字符串）。

# php - 如何让PHP异步编写？

> ID：14546664
> 
> 赞同：0
> 
> 时间：2013-01-27T10:59:02.970
> 
> 标签：php, io

是否有一个异步写入的 PHP 命令（因为我不在乎何时写入数据，这具有非常低的优先级。）

我在服务器上托管 1,300 个域。我知道很多。但是每个都占用很少的内存，很少的 CPU，很少的带宽。瓶颈是随机写入。太多随机写入（和随机读取）。服务器是Linux。

[我在这里](http://thecodeartist.blogspot.com/2012/06/improving-hdd-performance-linux.html)读到：

> 因此，SYNC-reads 和 ASYNC-writes 通常是一个很好的方法，因为它们允许内核优化底层 I/O 请求的顺序和时间。
> 
> 你去吧。我敢打赌，您现在在演讲中关于改进磁盘 IO 有很多话要说。;-)

大多数写入只是缓存文件。如果偶尔出错，我什么也不会丢失。基本上我想设置我的系统，以便大多数读写都进入内存，然后当我希望我的服务器以顺序块将数据写入我的磁盘时。

我有大量的内存可以用作缓存。在 Windows 中，我使用超级缓存来执行此操作，并且一切加载速度更快。那里的人说 Linux 已经有了块缓存。好吧，块缓存不起作用，我仍在研究如何使大多数写入首先进入内存，以便仅偶尔刷新数据。

现在，我只想修改我的 PHP 程序，这样当它写入数据时，它会告诉内核“以后再写几次，我可以等待，我不介意”。

有选择吗？我可以使用 SSD，但它们很小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:33:09.860

如果大部分写入活动是由于缓存造成的，那么我将使用 apc 或 memcached 作为缓存的后端，而不仅仅是文件系统。任何必须持久化到文件系统的写入都可以单独处理，而不会发生竞争缓存 io 撞击磁盘。唯一需要考虑的是您的缓存现在在内存中，它将在重新启动后清空，如果这会导致性能问题，您可能需要实施缓存预热过程。

大多数主要的 PHP 框架都将 memcached 和 apc（即[Zend 框架](http://framework.zend.com/manual/1.12/en/zend.cache.backends.html)）作为其缓存模块的可用存储适配器，因此这将是我的首选。如果你不能直接使用[memcached](http://php.net/manual/en/book.memcached.php)和[apc](http://php.net/manual/en/book.apc.php)扩展。

另一种选择是考虑实现一个队列，您可以将待处理的写入发送到该队列。然后，该队列可以由以可接受的速率执行写入的计划任务定期处理。我过去曾出于类似目的使用[Zend_Queue](https://github.com/zendframework/ZendQueue)。

# android - android NotificationCompat.Builder getNotification 自动发送通知

> ID：14546665
> 
> 赞同：1
> 
> 时间：2013-01-27T10:59:15.583
> 
> 标签：android, notifications, parse-platform

嗨，我正在尝试在接收广播消息时在 BroadcastReceiver 中发送通知。来自 Parse.com。但是当从 NotificationCompat.Builder 的一个实例调用 getNotification 方法时，通知会自动发送并显示一个预设的 contextText。因此，当调用 mNotificationManager.notify 时，会显示两个通知，一个带有指定的内容文本，另一个没有。我在 API 级别 16。

以下是我在 BroadcastReceiver 中的代码，请帮助我。非常感谢！

```
 @Override
public void onReceive(Context context, Intent intent) {
    try {
        String action = intent.getAction();
        if (intent.getExtras() != null) {

            JSONObject json = new JSONObject(intent.getExtras().getString(
                    "com.parse.Data"));

            String text = json.getString("text");
            String title = json.getString("title");
            Long timestamp = json.getLong("timestamp");
            String qid = json.getString("qid");

            NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
                    context).setSmallIcon(R.drawable.ic_launcher)
                    .setContentTitle(title)
                    .setContentText(text)
                    .setTicker("New Reply");

            Intent resultIntent = new Intent(context,
                    QuestionViewActivity.class);
            resultIntent.putExtra(QuestionViewActivity.EXTRA_QUESTION_ID,
                    qid);

            TaskStackBuilder stackBuilder = TaskStackBuilder.from(context);
            stackBuilder.addParentStack(MainActivity.class);
            stackBuilder.addNextIntent(resultIntent);
            PendingIntent resultPendingIntent = stackBuilder
                    .getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);
            mBuilder.setContentIntent(resultPendingIntent);

            NotificationManager mNotificationManager = (NotificationManager) context
                    .getSystemService(Context.NOTIFICATION_SERVICE);

            Notification n = mBuilder.getNotification();
            mNotificationManager.notify(qid.hashCode(),
                    mBuilder.getNotification());
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:17:26.007

我终于明白了：

1.  对于没有 build() 方法：它是由 ActionBarSherlock 使用旧版本的 android-support-v4.jar 引起的。只需用 /SDK/extras/android/support/v4/android-support-v4.jar 中的更新后的 jar 替换该 jar

2.  对于重复通知：它是由 Parse(parse.com) 服务引起的。当接收到任何在 JSON 数据中使用带有“标题”的解析通知库发送的推送时，服务会自动显示带有罐装 contentText 的通知，例如“您收到了通知”。这里我用来禁用自动通知的一个技巧是不要在解析推送的 JSON 数据中使用“标题”和“文本”，而是使用其他名称然后在自定义广播接收器中解析它。它现在工作正常。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:10:05.867

[http://developer.android.com/reference/android/app/Notification.Builder.html#build()](http://developer.android.com/reference/android/app/Notification.Builder.html#build())

getNotification() 已弃用。为什么不使用 build() ？

# android - 媒体播放器静音不起作用

> ID：14546666
> 
> 赞同：0
> 
> 时间：2013-01-27T10:59:19.080
> 
> 标签：android, android-mediaplayer

我想在我的应用程序中使用静音按钮，如下所示：

```
ImageView muteMusic = (ImageView) findViewById(R.id.muteMusic);
    mAudioManager = (AudioManager) getSystemService(AUDIO_SERVICE);

public void mute(View v) {

    switch (mAudioManager.getRingerMode()) {
    case AudioManager.RINGER_MODE_NORMAL:
        mAudioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
        break;
    case AudioManager.RINGER_MODE_SILENT:
        mAudioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
        break;

    }
} 
```

XML

```
<ImageView
            android:id="@+id/muteMusic"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="200dp"
            android:layout_marginTop="120dp"
            android:layout_toRightOf="@id/info"
            android:onClick="mute"
            android:src="@drawable/volbutton" /> 
```

但它不起作用，我不知道为什么！没有错误，没有崩溃！但是当我点击它时它没有任何动作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:19:25.663

问题是您正在静音***铃声***而不是音乐流。

而不是使用

```
mAudioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT); 
```

采用

```
mAudioManager.setStreamMute(AudioManager.STREAM_MUSIC, true); 
```

请参阅[API 文档](http://developer.android.com/reference/android/media/AudioManager.html#setStreamMute%28int,%20boolean%29)以获取有关如何在应用程序中管理静音/取消静音以释放资源的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:37:23.037

你可以使用 mediaPlayer.setVolume(0,0)

# asp.net - 条件 ASP.NET 中继器

> ID：14546668
> 
> 赞同：2
> 
> 时间：2013-01-27T10:59:35.513
> 
> 标签：asp.net, .net

这是我的中继器：

```
<asp:Repeater ID="RepeaterWeb" runat="server">
    <ItemTemplate>
    <div class="productWrapper">
    <div class="productWrapperImage"><img src="prdimg/<%# Trim(Eval("ProductImage")).ToString()%>" /></div>
    <div class="fontTrebuchet"><%# Trim(Eval("ProductShortInfo")).ToString()%></div>
    <h3 class="fontUbuntu productBoxName"><%# Trim(Eval("ProductName")).ToString()%></h3>
    </div>
    <!--This div my problem--><div class="verticalProductsSpacer"></div>
</ItemTemplate>
</asp:Repeater> 
```

我用数据库中的 4 行数据为**中继器**提供了数据，前三行`<div class="verticalProductsSpacer"></div>`是必需的，但最后一行不应该存在。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:04:18.367

使用 SeparatorTemplate：

```
<asp:Repeater ID="RepeaterWeb" runat="server">
    <ItemTemplate>
        <div class="productWrapper">
        <div class="productWrapperImage"><img src="prdimg/<%# Trim(Eval("ProductImage")).ToString()%>" /></div>
        <div class="fontTrebuchet"><%# Trim(Eval("ProductShortInfo")).ToString()%></div>
        <h3 class="fontUbuntu productBoxName"><%# Trim(Eval("ProductName")).ToString()%></h3>
    </ItemTemplate>
    <SeparatorTemplate>
        <div class="verticalProductsSpacer"></div>
    </SeparatorTemplate>
</asp:Repeater> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:04:37.773

您可以使用 Jquery 来隐藏它。

```
$('.verticalProductsSpacer').last().css('display', 'none'); 
```

# mysql - 预订系统的mysql查询

> ID：14546669
> 
> 赞同：0
> 
> 时间：2013-01-27T10:59:39.943
> 
> 标签：mysql

我花了超过 14 个小时试图找到一种方法来实现这一点，但没有运气！

我正在开发一个预订系统，我有 2 张桌子：

```
Rooms
---------
ID - ROOM_TYPE - NAME - ROOM_COUNT
1       1   single room      6
2       2   double room      4
3       3   studio           2

Booking
---------
ID - ROOM_TYPE - Customer_NAME  - CHECK_IN  - CHECK_OUT
1       3         John   A           1-1-2013      4-1-2013
2       3         John   B           2-1-2013      5-1-2013             
3       2         John   C           8-1-2013      9-1-2013 
```

在用户输入 2 个日期来搜索可用房间后，我进行查询以显示我拥有的所有类型房间，我有 3 种类型（单人/双人/工作室），每种类型都有酒店可用的房间数量（例如：酒店默认有6间单人房）

我最终得到这个查询以获取所有可用的类型房间

```
 SELECT * 
            FROM rooms              
             where id NOT IN 
                 ( SELECT room_type FROM  booking 
                    WHERE "'.$check_in.'"  <= check_out
                    AND "'.$check_out.'"  >= check_in                                             
                  ) 
```

我需要制定另一个条件，即预订中的 WHERE count(room_type) 少于 ROOMS 表中 ROOM_COUNT 字段中保存的值..

取决于上面的表格结构，酒店只有两个工作室，并且在 2013 年 4 月 1 日都不可用 .. 因此，当有人在该日期搜索时，查询不应该显示工作室类型房间 ..

我需要计算每种房型的预订数量，然后显示结果..

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:02:24.907

这是想法。您需要知道在此期间入住的最大房间数。您可以通过查看当天之前的入住人数减去退房人数来获得在任何一天入住的房间数量。

接下来，要获得最大值，我们只需要查看签入日（因为签出会降低最大值）。以下是在任何一天签到的最大值：

```
select r.room_type, r.room_count, r.room_count - RoomsTaken
from Rooms r join
     (select room_type, max(Num_CheckOuts - num_CheckIns) as RoomsTaken
      from (select b.*,
                   (select count(*) from booking b2 where b2.room_type = b.room_type and b2.check_in <= b.check_out
                   ) as num_CheckIns,
                   (select count(*) from booking b2 where b2.room_type = b.room_type and b2.check_out <= b.check_in
                   ) as Num_CheckOuts
            from booking b
           ) b
      where $check_in <= check_out and $check_out >= check_in
      group by room_type
     ) b
     on r.room_type = b.room_type 
```

（注意：此查询未经测试，因此可能存在语法错误。）

它使用相关子查询来获取累积计数。在其他数据库中，窗口函数可能用于此目的。

# ocaml - 警告是什么意思？

> ID：14546671
> 
> 赞同：3
> 
> 时间：2013-01-27T10:59:47.783
> 
> 标签：ocaml

```
# let [x;y;z] = [1;2;3];;
Warning P: this pattern-matching is not exhaustive.
Here is an example of a value that is not matched:
[]
val x : int = 1
val y : int = 2
val z : int = 3
# x;;
- : int = 1
# y;;
- : int = 2
# z;;
- : int = 3 
```

似乎值声明工作得很好，警告实际上是想告诉什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T14:53:56.500

该模式`[x; y; z]`与其类型的所有可能值都不匹配。一般来说，您希望避免这样的模式——这意味着在某些情况下您的代码会失败。在这种特殊情况下（如果您从不更改代码）没有问题，因为模式与常量值匹配。但是编译器无论如何都会警告你，以防万一。也许它认为您以后可能会更改常量列表。

我不得不说，如果有一种方法可以在这种情况下禁用警告，那就太好了。

写这个的惯用方式（没有警告）是：

```
let x, y, z = 1, 2, 3 
```

在这种情况下，模式 ( `x, y, z`)*确实*匹配其类型的所有可能值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T01:34:32.617

基本上，任何表达式绑定都会在编译时转换为模式匹配，因为可以在绑定符号的左侧写入模式`=`。所以这就像你写的一样：

```
let x,y,z = 
    let v =  [1;2;3] in
    match v with
      | [x;y;z] -> x,y,z 
```

这有点令人费解，但是经过类型检查的代码可能与上面的^([1])有点相似。在此设置中，您可能会更好地看到，无论您使用简单的绑定表达式还是完整的`match ... with`表达式，模式匹配机制都是相同的。在这两种情况下，如果存在模式匹配遗漏的情况，类型检查器将从表达式的类型推断，并警告您。对于`list`模式匹配，该值确实`[]`是一种可能性。

* * *

[[1]：我说“可以”，因为我相信实际上`match ... with` 句法形式也被转换为另一种形式，这可能更接近于`function`形式（即`function [x;y;z] -> ...`在你的情况下）。]

# ruby-on-rails - 如何制作条件复杂的计数器缓存？

> ID：14546676
> 
> 赞同：1
> 
> 时间：2013-01-27T11:00:19.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, counter-cache

**我迁移了这个以启用计数器缓存**

```
class AddUniquecodesCountToUser < ActiveRecord::Migration
  def up
    add_column :users, :uniquecodes_count, :integer, :default => 0

    User.reset_column_information
    User.all.each do |p|
      User.reset_counters(p.id, :uniquecodes)
    end
  end

  def down
    remove_column :users, :uniquecodes_count
  end

end 
```

我通常通过此代码获取用户拥有的唯一代码数量

```
current_user.uniquecodes.joins(:community).merge(Community.not_deleted).order("uniquecodes.updated_at DESC").count.to_s 
```

**模型/社区.rb**

```
....
def self.not_deleted
    where deleted_at: nil
end
.... 
```

我这样做的原因是，社区记录可能会被删除。因此，一旦相关社区被删除，我就不想显示唯一代码。

正如您看到的我的迁移文件，它只是在用户创建/删除唯一代码时向上或向下计数`user_id`与特定用户的 id 相关的唯一代码的总数。

如何添加我上面写的条件以排除`community_id`被删除的唯一代码（如果删除，deleted_at 列将填充时间戳）

# c# - Umbraco 显示使用剃刀从图像裁剪器创建的图像

> ID：14546688
> 
> 赞同：4
> 
> 时间：2013-01-27T11:02:30.660
> 
> 标签：c#, asp.net, razor, umbraco

如何显示使用图像裁剪器数据类型创建的图像？

例如，我上传了一个 image1.jpg，其中包含 3 个名为 thumb、featured 和 main 的图像裁剪。

如何显示使用 Razor 创建为拇指的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T11:39:00.873

我已经完成了这项工作，不确定这是最佳实践，但现在可以完成这项工作。

```
<img src="@Library.Concatenate(mFile.umbracoFile.Split('.')[0], "_thumb.jpg")" /> 
```

上面获取媒体项目的文件名，去掉文件扩展名，并使用 Library Helper 将其连接到裁剪的图像名称。在这种情况下，裁剪后的名称是 thumb，因此添加下划线和裁剪后的名称会解析生成的图像。

裁剪后的图像在服务器上的 Umbraco 中生成，格式如下：

文件名 - 文件扩展名 + 下划线 + 裁剪后的名称 + 文件扩展名

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T07:55:31.730

以下内容应为您指明正确的方向。Image Cropper 是标准的 Umbraco 数据类型，因此它支持访问作物，您可以通过作物名称找到它们：

```
var mediaItem = Library.MediaById(Model.Thumbnail);
var img = mediaItem.crop.Find("@name", "thumbnail");

if (img != null)
{
    <img src="@img.url" />
} 
```

我希望这会有所帮助。

# php - 验证 startdate 和 enddate codeigniter

> ID：14546690
> 
> 赞同：0
> 
> 时间：2013-01-27T11:02:34.380
> 
> 标签：php, codeigniter, date

我想验证codeigniter中的2个日期输入，条件是，如果结束日期大于开始日期，将出现警告[javascript警告或其他内容]或无法输入数据

我这样的形式，

```
<h1><?php echo $title; ?></h1>
<form action="<?= base_url(); ?>index.php/admin/kalender/buat" method="post" enctype="multipart/form-data" name="form" id="form">
<?php
echo "<p><label for='IDKategori'>Tingkatan Pimpinan :</label><br/>";
echo form_dropdown('IDKategori', $kategori) . "</p>";

echo "<label for='ptitle'>Kegiatan / Lokasi :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'judul', 'id' => 'ptitle', 'size' => 80);
echo form_input($data);

echo "<p><label for='long'>Uraian Kegiatan / Keterangan / Catatan :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'konten', 'rows' => '13', 'cols' => '60', 'style' => 'width: 60%');
echo form_textarea($data) . "</p>";

echo "<p><label for='ptitle'>Waktu Mulai :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'TanggalMulai', 'id' => 'basic_example_1');
echo form_input($data) . "</p>";

echo "<p><label for='ptitle'>Waktu Akhir :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'TanggalAkhir', 'id' => 'basic_example_2');
echo form_input($data) . "</p>";

echo form_submit('submit', 'Tambah Even');
?>
&nbsp;&nbsp;<input type="button" value="Kembali" onClick="javascript: history.go(-1)" /> 
```

和我这样的javascript，

```
<script language="javascript" type="text/javascript">$(document).ready(function() {
    $.validator.addMethod("TanggalAkhir", function(value, element) {
        var startDate = $('.TanggalMulai').val();
        return Date.parse(startDate) <= Date.parse(value) || value == "";
    }, "* End date must be after start date");
    $('#form').validate();
}); 
```

为什么不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:06:45.850

您将输入作为类引用，但尚未定义类。既然您已经定义了一个 id，为什么不这样引用它：

```
var startDate = $('#basic_example_2').val(); 
```

# java - 使用 android 进行对象跟踪

> ID：14546692
> 
> 赞同：1
> 
> 时间：2013-01-27T11:02:40.733
> 
> 标签：java, android, image-processing, opencv

我想创建一个 android 应用程序，其中实时摄像头流捕获地面上的障碍物并向用户发出警告。这旨在作为视障人士的应用程序。

我不知道什么技术最适合这个，因为我以前没有图像处理方面的经验。我浏览了一些 OpenCV 示例，但它们并没有为我提供关于从哪里开始项目的太多见解。

我需要知道的是；

*   任何可能帮助我开始项目的教程（我应该从基本的图像处理开始吗？）
*   我应该学习 C++，因为我只知道 java 和 C#？
*   可以在项目中使用哪些技术。（是否有可能通过增强现实等实现这样的目标。）
*   任何以前尝试实现 android 图像处理的项目/教程/示例

如果您能为我提供以上任何一点的答案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:55:58.973

您的想法/要求相当“特殊”，所以我认为没有任何教程可以准确存档。我将首先阅读使用图像处理的其他应用程序的源代码，例如[zxing](http://code.google.com/p/zxing/)。

增强现实可用于显示这些“警告”，但无法帮助您处理图像处理部分。这是一本[关于 Android 增强现实的书。](https://rads.stackoverflow.com/amzn/click/com/143023945X)

[对于 C++ 部分，我将在此处](https://stackoverflow.com/a/8118718/717341)参考我之前的答案。

# mysql - SQL 查询项目名称来自和 ID

> ID：14546694
> 
> 赞同：0
> 
> 时间：2013-01-27T11:02:44.263
> 
> 标签：mysql, sql

我有一个具有以下结构的数据库，需要一些帮助来运行查询。

表 1 是：

订单编号：订单日期

表 2 是：

订单 ID： 项目 ID： 项目名称

我需要一个查询，该查询将返回按特定订单日期中的项目名称分组的订单计数。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-27T11:07:53.203

select count(*) from table2 inner join table1 on table2.orderid = table1.orderid where table1.orderdate="some date" and itemname="sepcific name"

# asp.net - 如何创建 web 服务只返回 json 字符串？

> ID：14546697
> 
> 赞同：1
> 
> 时间：2013-01-27T11:03:31.783
> 
> 标签：asp.net, json, web-services

我已经设置 web.config 让它支持“获取”请求。

```
<webServices>
  <protocols>
    <add name="HttpPost"/>
    <add name="HttpGet"/>
    <add name="HttpSoap"/>
    <add name="Documentation" />
  </protocols>
</webServices> 
```

然后，我希望网络服务只返回 json 字符串，而不是 xml！但我已经设置

[ScriptMethod(ResponseFormat = ResponseFormat.Json, XmlSerializeString = false)]

它不起作用，仍然返回带有 jsonstrings 的字符串....

我不想在页面文件中设置 contentType，就使用默认值！

# javascript - 如何在 HTML 中嵌入 XML 文件？

> ID：14546698
> 
> 赞同：5
> 
> 时间：2013-01-27T11:03:43.180
> 
> 标签：javascript, html, xml

我正在使用 HTML 和 JavaScript 为漫画创建一个简单的 Web 应用程序。因为技术不高的人应该可以添加新漫画，所以我想到了使用 XML 文件作为配置文件。

我考虑过使用 JSON 并决定反对它，主要是因为使用逗号的方式（两个项目之间没有逗号会破坏它，但列表末尾的逗号也会破坏它。）。

但是，我现在的问题是：如何嵌入这个 XML 文件？我是使用`<link rel= />`标签还是其他类似`<embed src= />`标签的东西？然后我怎样才能从 JavaScript 中的 XML 节点读取信息？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T20:37:25.413

我建议加载一个 JavaScript 库来简化此操作。jQuery 就是其中之一。如果您在页面中包含 jQuery，那么您可以使用它来加载文档并相当容易地访问浏览器的 XML 解析功能。

[http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)显示了一个在 xml 文档加载后查找值的简单示例。

该站点[http://think2loud.com/224-reading-xml-with-jquery/](http://think2loud.com/224-reading-xml-with-jquery/)提供了如何从远程站点加载 XML 的一个很好的示例。基本思想是使用 AJAX：这里有一个小片段供后人使用，它将在 html 文档加载后加载 foo.xml（依赖于 jQuery）：

```
$( function() {
    $.ajax({
        type: "GET",
    url: "foo.xml",
    dataType: "xml",
    success: myHandler(xml) {
    }
    });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T11:17:02.640

使用[xml](http://conta.uom.gr/conta/ekpaideysh/seminaria/xml/chap3.htm)标签。例子 ：

```
<html>
  <xml Id = msg>
      <message>
        <to> Visitors </to>
        <from> Author </from>
        <Subject> XML Code Islands </Subject>            
      </message>
  </xml>
</html> 
```

# html - 我应该怎么做才能制作这个 960 网格布局？

> ID：14546700
> 
> 赞同：1
> 
> 时间：2013-01-27T11:04:03.510
> 
> 标签：html, css, 960.gs

我对发现 960 Grid 系统还比较陌生，而且它与我以前的工作有点不同。我今天的主要问题是，我正在尝试制作一个看起来像这张图片的布局。我将如何编写代码来制作这个简单的布局，例如 960 网格格式？

![在此处输入图像描述](../Images/ce4456113400aa62de6c69bc8b671279.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:39:17.603

首先，您可以找到一些 960 网格模板或框架。

例如，

*   [Twitter Bootstrap](http://twitter.github.com/bootstrap/)：Twitter Bootstrap 提供了几乎所有构建网站的基本元素。
*   [Skeleton](http://www.getskeleton.com/)：如果您只想要一个具有自己风格的 960 网格布局，这是一个很好的解决方案。

互联网上有更多选择。google一下不难。

然后看看他们提供的示例代码。试一试，你就知道如何使用 960 网格：[Skelton Grid](http://www.getskeleton.com/#grid)

# python - 如何使用 python 脚本将文件从移动 SD 卡移动到 PC？

> ID：14546703
> 
> 赞同：0
> 
> 时间：2013-01-27T11:04:31.580
> 
> 标签：python, http

我正在做一个项目，其中图像由我的 android 手机拍摄并存储在我的 SD 卡中的文件夹中。我正在编写一个 python 脚本，该脚本需要定期将文件夹从 SD 移动到我 PC 中的特定文件夹。手机和PC通过移动热点连接，我将在移动端运行一个http服务器。以前我曾经有脚本以电子邮件附件的形式将图像发送到我的 gmail 地址，但现在我想将整个文件夹发送到我不想使用互联网的 PC。我可以这样做吗？我将不胜感激任何形式的帮助。

让我更清楚自己。我已经在手机上运行了自己创建的 httpServer python 代码，该代码正在处理由 android 应用程序运行的 html 页面。我需要从我的 PC 连接到该移动服务器，我需要转到 SD 卡中名为“sb”的文件夹，路径在`/mnt/sdcard/sb`那里我需要找到所有包含字母“d”的文件夹并将这些文件夹完全从移动到我电脑中的一个目录。

浏览各种页面，我发现所有内容都是连接到服务器并从那里获取 HTML 页面或简单文件，但我找不到任何告诉我如何获取文件夹并将其存储在特定位置的信息。我真的需要在 29 日之前完成这项工作。我需要在 1 月 31 日交付产品。请给我一些好的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:37:27.657

为什么要为此使用python？你有没有尝试过

```
wget --mirror http://your_android_device/folder_to_sync/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:47:57.323

你可以使用httplib。类似的东西：

```
import httplib

conn = httplib.HTTPConnection("http://device")
conn.request("GET", "/myfile.data")
resp = conn.getresponse()
data = resp.read() 
```

另请参阅[httplib 的 Python 文档](http://docs.python.org/2/library/httplib.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:26:52.890

使用套接字编程。这是您可以使用它轻松发送文件的代码。

服务器.py

```
import os   
import sys,time 
import socket

server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_socket.bind(("", port))
server_socket.listen(5)

client_socket, address = server_socket.accept()
print "Conencted to - ",address,"\n"

while (files):
    print '\nMaybe, pending work'
    for au in files:
        if (au.find('d')>-1):
            os.chdir(au)
            imgFiles = os.listdir(au)
            if (imgFiles[i].endswith('.jpg')):
                imgs=imgFiles[i]
                file_name = open(imgs,'rb')
                print file_name
                while True:
                    strng = file_name.read()
                    client_socket.sendall(strng)
                    if not strng:  break        
                file_name.close()
                #client_socket.send("done")
        else:
            time.sleep(2) 
time.sleep(5)
exit() 
```

客户端.py

```
import socket,os
import time

client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client_socket.connect(("address", port))

#folder name
fp = open(filename,'wb')
# image
while True:
strng = client_socket.recv(1024)
print "4"
if not strng: break
fp.write(strng)
print "5"
fp.close()
print "Data Received successfully"
exit() 
```

# data-binding - 使用 jQuery 扩展和 jquery.on 将 Keyup 绑定到元素

> ID：14546706
> 
> 赞同：0
> 
> 时间：2013-01-27T11:04:44.660
> 
> 标签：data-binding, jquery-plugins, keypress, jquery

这看起来很简单，但由于某种原因，它没有按预期工作。

我正在尝试制作一个非常简单的 jQuery 扩展/插件，它允许我在需要一个`enter`键上的触发器时简单地减少我的代码行（以及类似的`escape`）

这是我的代码：

```
$.fn.enterListen = function (callBack) {
    $(this).on('keyup', function (e) {
        if (e.keyCode == 13) {
            callBack;
            // $(this).enterListen(callBack); // trying to rebind...
        };
    })
}; 
```

然后，当使用 jquery 动态创建元素时，我们可能会执行以下操作：

```
var input = $('<input'>).enterListen(function (){ alert("Enter was pressed"); });
$(input).appendTo('body'); 
```

现在我们已经在页面中添加了一个输入元素，我们可以在其中输入，当`enter`按下它会触发警报。

这有效，除了，只有一次。

您可以在上面的代码中看到一条注释掉的行，在该行中我试图在`enter`触发器被激活后重新绑定元素的函数，即使这样也不能让它第二次工作。

您可以在按 之前按任意数量的其他键`Enter`，但是一旦您这样做，它似乎会取消绑定`keyup`事件。

如果...但是，我这样运行它：

```
function isEnter(e, ele) {
    if ((e * 1) == 13) {
        $(ele).click();
    };
}; 
```

调用者：

```
var input = $('<input'>).on('keyup', function (e) { isEnter(e.keyCode, $(ok)) });
$(input).appendTo('body'); 
```

它工作得很好，但对我来说它在代码中比较笨拙，我正在尝试创建一个扩展库以使这个项目的内部编码更短......也许我只是在我需要的事情上投入了太多时间'你...

无论如何，如果有人能解释为什么事件变得不受约束，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:11:29.980

jQuery 插件内部`this`是 jQuery 对象，无需重新包装。`e.which`在 jQuery 中被标准化。要执行一个函数，你需要括号`()`。最重要的是，您需要返回，`this`否则`input`变量将未定义，并且如果您打算在插件内部使用包含多个元素的选择器进行操作，则需要返回`this.each(function() { ... })`等，如jQuery的[插件创作文档中所述。](http://docs.jquery.com/Plugins/Authoring)

```
$.fn.enterListen = function (callBack) {
    return this.each(function() {
        $(this).on('keyup', function (e) {
            if (e.which == 13) {
                e.preventDefault();
                callBack();
            }
        });
    });
};

var input = $('<input />').enterListen(function (){ 
    alert("Enter was pressed"); 
});

input.appendTo('body'); 
```

[**小提琴**](http://jsfiddle.net/YEvxg/4/)

# html - 什么是引导程序？

> ID：14546709
> 
> 赞同：523
> 
> 时间：2013-01-27T11:04:58.590
> 
> 标签：html, css, twitter-bootstrap, frontend

这里有很多与 Bootstrap 相关的问题。我看到很多人都在使用它。于是我试着研究了一下，找到了[官方的 Bootstrap 站点](http://getbootstrap.com/)，但是后面只有一个下载部分和几句话。没有什么可以解释它的用途......我只是明白它是一个前端助手。我试图通过谷歌搜索找到一些东西，但没有找到任何具体的东西。我发现的一切都与计算机科学定义有关。

所以，我的问题是：

*   什么是引导程序？
*   它是做什么用的，它如何帮助前端开发？
*   我还想要一些更多的细节来解释它。

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2013-01-27T11:08:36.217

它是一个 HTML、CSS 和 JavaScript 开源框架（最初由 Twitter 创建），您可以将其用作创建网站或 Web 应用程序的基础。

*   [更多信息和下载链接](https://stackoverflow.com/tags/twitter-bootstrap/info)

*   [入门](http://getbootstrap.com/getting-started/)

*   [例子](http://bootsnipp.com/)

*   [主题](http://bootswatch.com/)

*   [Bootply - 引导编辑器和生成器](http://www.bootply.com/)

**更新**

**官方[引导网站](http://getbootstrap.com/)**已更新并包含明确的定义。

“Bootstrap 是最流行的 HTML、CSS 和 JS 框架，用于在 Web 上开发响应式、移动优先的项目。”

[“由@mdo](https://twitter.com/mdo)和[@fat](https://twitter.com/fat)用全世界的爱设计和建造。”

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2014-07-16T14:20:55.683

> Bootstrap 是由 Twitter 团队开发的开源 Javascript 框架。它是 HTML、CSS 和 Javascript 代码的组合，旨在帮助构建用户界面组件。Bootstrap 也被编程为支持 HTML5 和 CSS3。
> 
> 它也被称为前端框架。
> 
> Bootstrap 是用于创建网站和 Web 应用程序的免费工具集合。
> 
> 它包含用于排版、表单、按钮、导航和其他界面组件的基于 HTML 和 CSS 的设计模板，以及可选的 JavaScript 扩展。
> 
> 程序员偏爱 Bootstrap 框架的一些原因
> 
> 1.  易于上手
>     
>     
> 2.  大网格系统
>     
>     
> 3.  大多数 HTML 元素的基本样式（排版、代码、表格、表单、按钮、图像、图标）
>     
>     
> 4.  广泛的组件列表
>     
>     
> 5.  捆绑的 Javascript 插件

取自[关于 Bootstrap 框架](http://www.queryhome.com/51419/about-bootstrap-framework)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-06-27T09:30:02.760

据我所知，Bootstrap 是一个定义良好的 CSS。虽然使用 Bootstrap 你也可以使用 JavaScript、jQuery 等。但主要区别在于，使用 Bootstrap 你可以只调用类名，然后在 HTML 表单上获得输出。例如。按钮着色 文本形状，使用布局。对于所有这些，您不必编写 CSS 文件，而只需使用正确的类名来塑造您的 HTML 表单。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-03-25T20:33:15.467

简单来说，您可以将 Bootstrap 理解为由 Twitter 创建的前端 Web 框架，用于更快地创建设备响应式 Web 应用程序。Bootstrap 也可以主要理解为其中定义的 CSS 类的集合，可以简单地直接使用。它在后台使用 CSS、javascript、jQuery 等来为 Bootstrap 元素创建样式、效果和动作。

您可能知道我们使用 CSS 来设置网页元素的样式，并创建类并将类分配给网页元素以将样式应用于它们。此处的 Bootstrap 使设计更简单，因为我们只需要包含 Bootstrap 文件并为我们的网页元素提及 Bootstrap 的预定义类名，它们将通过 Bootstrap 自动设置样式。通过这个，我们摆脱了编写自己的 CSS 类来设置网页元素的样式。最重要的是，Bootstrap 的设计方式使您的网站设备能够响应，这就是它的主要目的。Bootstrap 的其他替代品可能是 - [Foundation](https://foundation.zurb.com/)、[Materialize](http://materializecss.com/)等框架。

Bootstrap 让您无需编写大量 CSS 代码，还可以节省您在设计网页上所花费的时间。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2014-12-19T17:58:10.810

Bootstrap 是一个开源的 CSS、JavaScript 框架，最初由 twitter 的设计人员和开发人员团队为 twitter 应用程序开发。然后他们将其发布为开源。作为 twitter bootstrap 的长期用户，我发现它是设计移动响应式网站的最佳选择之一。许多 CSS 和 Javascript 插件可用于立即设计您的网站。这是一种快速的模板设计框架。有些人抱怨引导 CSS 文件很重并且需要时间来加载，但这些说法是由懒惰的人提出的。您不必在您的网站中保留完整的 bootstrap.css。您始终可以选择删除网站不需要的组件样式。例如，如果您只使用表单和按钮等基本组件，那么您可以从主 CSS 文件中删除其他组件，例如手风琴等。要开始涉足引导程序，您可以从以下位置下载基本模板和组件[getbootstrap](http://getbootstrap.com/getting-started/)网站，让奇迹发生。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-11-20T04:58:27.250

**免责声明：**我过去使用过 bootstrap，但我从来没有真正理解过它的实际含义，这个描述来自我今天的定义。而且我知道 bootstrap v4 已经过时了，但是我发现 bootstrap v3 文档更加清晰，所以我使用了它。该库不会从根本上改变它所提供的内容。

# 简要地

Bootstrap 是 CSS 和 javascript 文件的集合，它为标准 html 元素提供了一些漂亮的默认样式，以及一些不是标准 html 元素的常见 Web 内容对象。

打个比方，这有点像在 powerpoint 中应用主题，但对于您的网站：它使事情看起来很漂亮，而无需太多的初始努力。

## 它由什么组成？

官方 v3 文档将其分为三个部分：

*   [CSS](https://getbootstrap.com/docs/3.3/css/)
*   [组件](https://getbootstrap.com/docs/3.3/components/)
*   [Javascript](https://getbootstrap.com/docs/3.3/javascript)

这些大致对应于 Bootstrap 提供的三个主要内容：

*   样式标准 html 元素的纯 CSS 文件。因此，Bootstrap 使您的标准元素看起来很漂亮。例如html：`<input class="btn btn-default" type="button" value="Input">Click me</button>`
*   CSS 文件在标准 html 元素上使用样式，以使它们成为不是标准 html 元素而是*标准*Bootstrap 元素的东西（例如[https://getbootstrap.com/docs/3.3/components/#progress](https://getbootstrap.com/docs/3.3/components/#progress)）。通过这种方式，Bootstrap 以视觉上一致的方式扩展了“标准”Web 元素列表。例如html：`<span class="glyphicon glyphicon-align-left"></span>`
*   CSS 类的设计考虑到了 jQuery。在内部，Bootstrap 使用 jQuery 选择器来动态修改样式并与 DOM 交互，从而为用户提供相同的功能。我相信这需要更多解释，所以...

# 使用 Javascript/jQuery

Bootstrap[扩展了 jQuery](http://researchhubs.com/post/computing/javascript/what-does-fn-mean-in-jquery.html)。如果我们查看源代码，我们可以看到它使用 jQuery 来执行以下操作：[设置 keydown 事件的侦听器以与 dropdowns 交互](https://github.com/twbs/bootstrap/blob/9201a805101943f9ec088639d520d7d2874bbed1/js/src/dropdown.js#L512)。当您在`<script>`标签中导入它时，它会执行所有这些 jQuery 设置，因此您需要确保在 Bootstrap 之前加载 jQuery。

此外，它比普通的 jQuery 更紧密地将 javascript 与 DOM 联系起来，提供了一个*javascript*类接口。例如[，以编程方式切换按钮](https://getbootstrap.com/docs/3.3/javascript/#button-toggle)。请记住，CSS 只是定义了事物的外观，因此这些操作的主要工作往往是及时修改哪些 CSS 类应用于元素。这种基于用户输入的更改不能用纯 CSS 完成。

还有其他标准的用户交互，我们互联网的居民已经习惯了 CSS 没有涵盖的内容。比如，单击一个链接可以向下滚动页面而不是更改页面。Bootstrap 为您提供的其中一件事是在您自己的网站上实现此行为的简单方法。

# 标准

我在这里多次提到“标准”这个词，这是有充分理由的。我认为 Bootstrap 提供的最好的东西是一套好看的标准。您可以随意修改默认主题，但它比原始 html、css 和 js 更好。这就是为什么它被称为“框架”。

不同的 Web 浏览器有不同的默认样式并且可以有不同的行为，并且需要不同的 CSS 前缀和类似的东西。Bootstrap 的一个主要好处是它比自己编写所有跨浏览器的东西更可靠（我敢肯定，你仍然会遇到问题，但它更容易）。

我认为当 gulp 和 babel 不那么流行时，Bootstrap 更受欢迎。看看 Bootstrap，它似乎来自每个人都编译他们的 javascript 之前的时间。它仍然具有相关性，但您现在可以从其他来源获得一些好处。

[最新版本的 CSS 允许您在这些静态列表更改时定义它们之间的转换。Bootstrap 的原始版本实际上早于该功能在浏览器中的广泛采用，因此它们仍然有自己的动画类。有一些 Bootstrap 是这样的：周围出现了其他东西，使它看起来有点多余。]

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-17T22:51:38.470

Bootstrap 是一个包含许多组件的 HTML、CSS、JS 框架，可让您非常快速地创建漂亮而现代的网站或 Web 应用程序。

以下网站包含示例、元素和可重用组件，您可以使用引导框架将它们集成到您的项目中

[bootsnipp.com](https://bootsnipp.com)

[startbootstrap.com](https://startbootstrap.com/snippets/)

[bootdey.com](https://www.bootdey.com/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-12-05T01:11:31.893

按照今天的标准和网络术语，我会说 Bootstrap 实际上***不是**一个框架*，尽管这是他们的网站所声称的。大多数开发人员考虑 Angular、Vue 和 React 框架，而 Bootstrap 通常被称为“*库*”。

但是，准确地说，Bootstrap 是一个开源的、移动优先的CSS、JavaScript 和 HTML***设计实用程序******集合，***旨在提供比从头开始编码更快（更智能）开发常用 Web 元素的方法.

 **一些促成 Bootstrap 成功的核心原则：

*   它是可重复使用的
*   它很灵活（即：允许自定义网格系统、轻松更改响应断点、列间距大小或状态颜色；根据经验，大多数设置都由全局变量控制）
*   很直观
*   它是模块化的（JavaScript 和 (S)CSS 都使用模块化方法；人们可以轻松找到有关制作自定义 Bootstrap 构建的教程，仅包含他们需要的部分）
*   具有高于平均水平的跨浏览器兼容性
*   开箱即用的网络可访问性（屏幕阅读器就绪）
*   有据可查

它包含以下设计模板和功能：布局、排版、表单、导航、菜单（包括下拉菜单）、按钮、面板、徽章、模式、警报、选项卡、可折叠、手风琴、轮播、列表、表格、分页、媒体实用程序（包括嵌入、图像和图像替换）、响应实用程序、基于颜色的实用程序（主要、次要、危险、警告、信息、浅色、深色、静音、白色）、其他实用程序（位置、边距、填充、大小调整、间距、对齐、可见性），scrollspy，词缀，工具提示，弹出框。

* * *

默认情况下，它依赖于 jQuery，但您会发现由每个现代流行的渐进式 JavaScript 框架提供支持的 jQuery 免费变体：

*   [React-Bootstrap](https://react-bootstrap.github.io/) - React 驱动的 Bootstrap
*   [BootstrapVue](https://bootstrap-vue.js.org/) - Vue 驱动的 Bootstrap
*   [ng-bootstrap](https://ng-bootstrap.github.io/#/home) - Angular 驱动的 Bootstrap

使用 Bootstrap 很大程度上依赖于应用某些类（或者，取决于 JS 框架：指令、方法或属性/道具）以及使用特定的标记结构。

文档通常包含通用示例，可​​以轻松复制粘贴并用作入门模板。

* * *

使用 Bootstrap 开发的另一个优势是其充满活力的社区，可转化为大量可用的主题、模板和插件，其中大部分是开源的（即：日历、日期/时间选择器、用于表格内容管理的插件，如以及建立在 Bootstrap 之上的库/组件集合，例如 MDB、投资组合模板、管理模板等...）

最后但同样重要的是，Bootstrap 多年来一直得到很好的维护，这使其成为生产就绪应用程序/网站的可靠选择。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-24T04:22:24.110

引导最流行的 HTML、CSS 和 JS 框架，用于在 Web 上开发响应式、移动优先的项目。它是非常流行的开源工具包。使用它很容易进行样式设置。最新版本是 bootstrap 4.bootstrap，具有 Sass 变量和 mixin、响应式网格系统、广泛的预构建组件和强大的 JavaScript 插件。现在他们为 React Js、Angular 和 Vue 指定了他们的工具包

*   [引导主页](https://getbootstrap.com/)
*   [Vue 引导程序](https://bootstrap-vue.org/)
*   [角引导](https://ng-bootstrap.github.io/#/home)
*   [反应引导](https://react-bootstrap.github.io/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-05T10:59:24.537

Bootstrap 是世界上最流行和使用最广泛的开源框架，用于使用 HTML、CSS 和 JS 进行开发。它是 HTML 的前端框架。Bootstrap 有助于构建响应式网站或 Web 应用程序和 12 列网格系统，有助于将网站动态调整到合适的屏幕分辨率。当前的 bootstrap 版本是 4.3.1，并且 bootstrap 团队也正式宣布了[Bootstrap 5](https://themeselection.com/bootstrap-5-release-date-major-updates/)版本以及从 bootstrap 中移除 jquery 等变化。引导框架最可取的一些关键原因是

*   它很容易使用

*   Bootstrap 有很大的社区支持

*   定制可以轻松完成

*   它提高了开发速度

*   响应能力

    更多详情可以查看官网：[https ://getbootstrap.com/](https://getbootstrap.com/)

来源：[https ://vmokshagroup.com/blog/bootstrap-advantages/](https://vmokshagroup.com/blog/bootstrap-advantages/)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-02-03T05:01:15.753

Bootstrap 是开源的 HTML 框架。几乎在每个浏览器上都兼容。基本上大屏幕浏览器宽度是 >992px 和超大 1200px。因此，通过使用 Bootstrap 定义的类，我们可以调整屏幕分辨率，以便在从小手机到大屏幕的每个屏幕上显示内容。我试图解释得很简短。例如 ：

```
<div class="col-sm-3">....</div>
<div class="col-sm-9">....</div> 
```**

# php - 如何使用 .htaccess 获得漂亮的链接

> ID：14546712
> 
> 赞同：-2
> 
> 时间：2013-01-27T11:05:45.140
> 
> 标签：php, mysql, apache, .htaccess

> **可能重复：**
> [.htacces 创建友好的 URL。需要帮助](https://stackoverflow.com/questions/3033407/htacces-to-create-friendly-urls-help-needed)

我正在使用 ids 来显示成员的记录（个人资料）。

因此`/profile.php?id=1`显示 id 为 1 的成员的数据。

但这些网址很丑陋，也不适合 SEO。

我想将网址更改为格式`profiles/membername`（成员名是已存储在数据库中的每个成员的唯一别名）。

如何通过.htaccess 实现这种链接结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:14:40.337

这需要安装 apache 的 mod_rewrite 模块。您想要的可以通过以下代码实现：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule ^profiles/(.*)?$ profile.php?id=$1
</IfModule> 
```

示例：www.yourwebsite.com/profiles/1234 -> www.yourwebsitename.com/profile.php?id=1234 如果您想要更多变量，只需修改上面的行，如下所示：

```
RewriteRule ^profiles/(.*)/(.*)?$ profile.php?id=$1&var2=$2 
```

只需编辑您的 .htaccess 文件并添加以上行，确保在进行任何修改之前创建 .htaccess 的备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:10:33.417

首先看一些关于问题的文章 [http://httpd.apache.org/docs/2.2/howto/htaccess.html](http://httpd.apache.org/docs/2.2/howto/htaccess.html)

```
RewriteEngine On

RewriteRule ^profiles/(a-z0-9]+)$ /profile.php?username=$1 [L,QSA] 
```

所以例如`/profiles/membername`--->`/profile.php?username=membername`

# objective-c - Restkit 在同一个类中加载多个 url

> ID：14546719
> 
> 赞同：1
> 
> 时间：2013-01-27T11:06:29.000
> 
> 标签：objective-c, restkit

我从 RestKit 开始，我设法进行查询并将其加载到 TableViewController 中。

查询返回：idTask、nameTask 和assignedUserId。

直到这里一切正常，完美运行。当我想从其assignedUserID（这是其他请求）加载用户名时，问题就来了。

我执行以下操作：

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
    [self.refreshControl endRefreshing];
    NSLog(@"%d Tasks received", objects.count);
    self.resultsArray = objects;

    Task *task;
    for (int i=0; i<self.resultsArray.count; i++){
        task=(Task*) [self.resultsArray objectAtIndex:i];
        task.user= [[User alloc]init];
        [task.user getUserDetails:task.idUser];
    }
    [self.resultsTable reloadData];
} 
```

对于收费用户调用我的班级的每项任务，我在其上加载数据，但该用户无法在我的班级工作中使用它。他的属性总是NULL。

如何加载多个对象？

Mi 类用户是这样的：#import "User.h"

```
@implementation User

-(User *) getUserDetails:(NSNumber *)idUsuario{
    [self loadUsersAssigned:idUsuario];
    return self;
}

-(void) loadUsersAssigned:(NSNumber *)idUsuario
{
    NSString *urlGetUser;
    urlGetUser = [NSString stringWithFormat:@"MY URL", idUsuario,[[NSUserDefaults standardUserDefaults] objectForKey:@"userAccessToken"]];
    //Load objects from url
    RKObjectMapping *objectMapping = [RKObjectMapping mappingForClass:[User class]];

    //Set relations (keys)
    [objectMapping mapKeyPath:@"id" toAttribute:@"idUser"];
    [objectMapping mapKeyPath:@"first_name" toAttribute:@"name"];
    [objectMapping mapKeyPath:@"last_name" toAttribute:@"lastName"];

    RKObjectManager* manager = [RKObjectManager sharedManager];

    [manager loadObjectsAtResourcePath:urlGetUser delegate:self block:^(RKObjectLoader* loader){
        loader.objectMapping = objectMapping;
        [loader setCachePolicy:RKRequestCachePolicyNone];
    }];
}

- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
    NSLog(@"Users recived: %d",objects.count);
    NSArray *result = objects;
    User *u = [result objectAtIndex:0];
    self.idUser=u.idUser;
    self.name=u.name;
    self.lastName=u.lastName;
}

- (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error
{
    //    [self.refreshControl endRefreshing];
    //    NSLog(@"Error: %@", error.description);
}

@end 
```

**更新：**

你怎么说，我认为我应该使用积木，但我不知道怎么做，因为我从不使用它。

我的对象正在返回正确的数据，但它来得太晚了。我给你看我的日志和我的代码。

我已经修改了你解释的循环。是这样的：

```
int i=1;
for (Task *task in [self resultsArray]){
    NSLog(@"--- begin iteration %d ---",i);
    task.user= [[User alloc]init];
    task.user =[task.user getUserDetails:[task idUser]];
    NSLog(@"task inside objectLoader of Task id:%@ - name:%@ - lastname:%@",task.user.idUser,task.user.name,task.user.lastName);
    NSLog(@"--- end iteration %d ---",i);
    i++;
} 
```

然后日志显示：

```
2013-01-29 10:38:32.075 --- begin iteration 1 ---
2013-01-29 10:38:32.075 task inside objectLoader of Task id:(null) - name:(null) - lastname:(null)
2013-01-29 10:38:32.076 --- end iteration 1 ---
2013-01-29 10:38:32.076 --- begin iteration 2 ---
2013-01-29 10:38:32.077 task inside objectLoader of Task id:(null) - name:(null) - lastname:(null)
2013-01-29 10:38:32.078 --- end iteration 2 ---
2013-01-29 10:38:33.570 Users recived: 1
2013-01-29 10:38:33.570 Object loader of user: 522327,Xavi,Sanchez
2013-01-29 10:38:33.640 Users recived: 1
2013-01-29 10:38:33.640 Object loader of user: 522327,Xavi,Sanchez 
```

当循环完成时，用户对象被加载。在它之前，用户的对象是空的。我需要使用块或类似的东西来等到用户对象正在加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:33:52.137

**异步请求**

您正在发出异步请求并且您希望以同步方式运行，您在这里缺少很多概念。保持解释简单，这意味着您不能期望与您的代码同时获得请求的对象。正如你所注意到的，它总是会追上它。在您发出请求几**秒钟后，您将在****objectLoader didLoadObjects**方法上收到对象。这些秒是您的机器向 Internet 询问某些内容并获得响应的时间。

 **天真的解决方案是将您希望使用从请求中获得的对象执行的逻辑移动到用户的**objectLoader didLoadObjects**中。但这是一个非常糟糕的主意，因为你正在混合一些东西。

阅读有关如何在objective-c 上使用块并更改获取对象的方式以避免对象耦合的信息。你真的应该学习如何在 RestKit 上使用块。检查[这个问题](https://stackoverflow.com/questions/14473823/restkit-request-load-handler/)，它可以帮助你。

**未获取用户信息**

好吧，首先，我认为您应该检查服务器是否正在返回某些内容，因此如果由于 URL 错误而发出错误请求，则可以丢弃。

添加以下代码以检查网络发生了什么，它将启用网络日志。

```
RKLogConfigureByName("RestKit/Network", RKLogLevelTrace); 
```

如果您得到了很好的响应，请检查映射过程后数据是如何转换为对象的：

```
RKLogConfigureByName("RestKit/ObjectMapping", RKLogLevelTrace); 
```

这应该指出什么是错的。

如果您在日志中没有得到任何内容，则问题是您的请求没有完成。告诉我你有什么可以进一步帮助你。

**加载多个对象**

每个请求都是昂贵的。现在，您正在执行一项请求以获取任务，并且针对这些任务的每个用户执行一项请求。如果您有 N 个任务，则您正在发出 N+1 个请求。那是没有效率的。如果所有任务都链接相同的用户，情况会变得更糟。

您应该做的是修改服务（如果可以的话），在界面上添加您需要的用户信息，在您的情况下，添加用户名，并在一个请求中获取所有内容。如果您需要一位用户的更多详细信息，您将需要包含完整用户信息的服务，并且您提出请求以防万一，但并非总是如此。

**建议**

我的建议是您使用**块**来处理请求，而不是委托/协议方式。根据我的经验，在这种情况下与代表合作总是令人头疼，而且代码会更容易阅读。

**forin 而不是 for，它更干净**

而不是您拥有的 for 循环，请尝试以下操作：

```
for (Task *task in [self resultArray]) {
    task.user = [[User alloc] init];
    [[task user] getUserDetails:[task idUser]];
} 
```**

# php - PHP readfile 文件的大小正在增加

> ID：14546723
> 
> 赞同：6
> 
> 时间：2013-01-27T11:06:46.613
> 
> 标签：php, download, ffmpeg, wget, readfile

是否可以在大小未知且大小不断增加的远程文件上使用 PHP readfile 函数？这是场景：

我正在开发一个从第三方网站下载视频并同时将视频转码为 MP3 格式的脚本。然后通过 readfile 将此 MP3 传输给用户。

用于上述过程的查询是这样的：

```
wget -q -O- "VideoURLHere" | ffmpeg -i - "Output.mp3" > /dev/null 2>&1 & 
```

因此文件被同时获取和编码。现在，当上述过程正在进行时，我开始通过 readfile 将输出 mp3 发送给用户。问题是编码过程需要一些时间，因此根据用户的下载速度，readfile 在整个文件被编码之前达到假定的 EoF，导致用户接收部分内容/不完整的文件。

我第一次尝试解决这个问题是对用户下载应用速度限制，但这并不是万无一失的，因为编码时间和速度会随着负载而变化，这仍然会导致部分下载。

那么有没有办法以这样一种方式来实现这个系统，即我可以同时提供下载和编码，并保证将完整的文件发送给最终用户？

任何帮助表示赞赏。

编辑：作为对彼得的回应，我实际上正在使用 fread(read readfile_chunked)：

```
 <?php
 function readfile_chunked($filename,$retbytes=true) {
            $chunksize = 1*(1024*1024); // how many bytes per chunk
            $totChunk = 0;
            $buffer = '';
            $cnt =0;
            $handle = fopen($filename, 'rb');
            if ($handle === false) {
                return false;
            }
            while (!feof($handle)) {
                //usleep(120000); //Used to impose an artificial speed limit
                $buffer = fread($handle, $chunksize);
                echo $buffer;
                ob_flush();
                flush();
                if ($retbytes) {
                    $cnt += strlen($buffer);
                }
            }
                $status = fclose($handle);
            if ($retbytes && $status) {
                return $cnt;        // return num. bytes delivered like readfile() does.
            }
            return $status;
        }
        readfile_chunked($linkToMp3);
    ?> 
```

这仍然不能保证完全下载，因为根据用户下载速度和编码速度，EOF() 可能会过早到达。

同样为了回应 theJeztah 的评论，我正在尝试实现这一目标，而不必让用户等待......所以这不是一个选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:09:26.753

由于您正在处理流，因此您可能应该使用流处理函数:)。想到了[passthru](http://php.net/manual/en/function.passthru.php)`download | transcode` ，尽管这只有在您的脚本中启动该命令时才有效。

如果它是从外部启动的，请查看[stream_get_contents](http://php.net/manual/en/function.stream-get-contents.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:27:54.717

*Evert*提到的Libevent似乎是您*必须*使用文件作为缓冲区的通用解决方案。但是，在您的情况下，您可以在脚本中内联完成所有操作，而无需使用文件作为缓冲区：

```
<?php
header("Content-Type: audio/mpeg");
passthru("wget -q -O- http://localhost/test.avi | ffmpeg -i - -f mp3 -");
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T22:04:18.380

我认为没有任何关于有新数据的通知，除了 inotify 之类的东西。

我建议如果你点击 EOF，你开始`clearstatcache()`每 200 毫秒左右轮询文件的修改时间（在调用之间使用）。当您发现文件大小增加时，您可以重新打开文件，寻找到最后一个位置并继续。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-27T19:49:53.113

我强烈建议将 libevent 用于此类应用程序。

它非常适合这样的情况。

[PHP 文档](http://php.net/manual/en/book.libevent.php)对此有点稀疏，但您应该能够在网络上找到更多可靠的示例。

# animation - 如何使 ProgressIndicator 淡出？

> ID：14546729
> 
> 赞同：0
> 
> 时间：2013-01-27T11:07:08.403
> 
> 标签：animation, windows-phone-8, fadeout, progress-indicator

在我的 WP8 应用程序中，我使用 a`ProgressIndicator`并且我希望它在使其不可见之前淡出。我找不到任何描述我如何做到这一点的文档，唯一暴露的属性`ProgressIndicator`是`IsVisible`不提供任何动画。

然而在某些应用程序中，我可以清楚地看到进度条逐渐消失。
那么我怎样才能让它淡出呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:12:48.133

不幸的是，您无法为 WP7/WP8 的 Shell 组件设置超出默认动画的动画。由于 ProgressIndicator 和 SystemTray 是 Shell UI 的一部分（与 ApplicationBar、MessageBox 等一起），您必须适应内置的转换。

如果这真的让您感到困扰，您可以随时使用托管 ProgressBar 作为应用`<Frame />`模板的一部分重新创建 ProgressIndicator 体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T18:01:14.780

看看[msdn上的DoubleAnimation类](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.media.animation.doubleanimation%28v=vs.105%29.aspx)

```
<StackPanel>
    <StackPanel.Resources>
        <Storyboard x:Name="myStoryboard">
            <DoubleAnimation
          Storyboard.TargetName="MyProgressBar"
          Storyboard.TargetProperty="Opacity"
          From="1.0" To="0.0" Duration="0:0:5" 
          Completed="DisableMyProgressBar"/>
        </Storyboard>
    </StackPanel.Resources>

    <ProgressBar x:Name="MyProgressBar"  />

</StackPanel> 
```

在您的处理完成时触发动画背后的代码。

```
private void StopProgressBar()
{
     myStoryboard.Begin();
} 
```

您将希望禁用进度条并在它淡出后重置其不透明度，因此使用情节提要的 Completed 事件来重置这些属性。

[时间线。在 msdn 上完成](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.media.animation.timeline.completed%28v=vs.105%29.aspx)

```
private void DisableMyProgressBar(object sender, EventArgs e)
{
    MyProgressBar.IsEnabled = false;
    MyProgressBar.Opacity = 1;
} 
```

# python - 将带索引的行添加到 sqlite 的正确方法是什么？

> ID：14546731
> 
> 赞同：1
> 
> 时间：2013-01-27T11:07:21.293
> 
> 标签：python, sqlite

我通过以下查询创建了一个表：

```
with sqlite3.connect('example.db', detect_types=sqlite3.PARSE_DECLTYPES) as conn:
    cur = conn.cursor()
    cur.execute("CREATE TABLE Surveys(Id INTEGER PRIMARY KEY, Name TEXT, Desc TEXT, DictObject BLOB, Hash TEXT)")
    conn.commit() 
```

现在我必须为每个请求添加一些`Survey`数据到表中。表具有作为主要整数值。这必须在每次插入时增加 - 正确的方法是什么？我是否必须获取每一行并检查每个请求的最后一行是什么？`Surveys``Surveys``Id``Id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:08:31.410

`sqlite`如果您自己不提供值，将[自动为表上 INSERT 上的 INTEGER PRIMARY KEY 列提供 id 。](http://sqlite.org/autoinc.html)只需为除该列*之外*的每一列插入数据`id`。

```
with sqlite3.connect('example.db', detect_types=sqlite3.PARSE_DECLTYPES) as conn:
    cur = conn.cursor()
    cur.execute("INSERT INTO Surveys(Name, Desc, DictObject, Hash) VALUES (?, ?, ?, ?",
        ('somename', 'some description\nof sorts\n',
         "{'dump': 'of a dictionary'}", '0xhash')) 
```

不过，您可能希望将关键字添加`AUTOINCREMENT`到您的`id`列中；默认是选择现有的最高行 id 加 1，如果您定期从表中删除可能导致重复使用 id 的数据（删除当前最高 id，它将在下一轮重复使用） . `AUTOINCREMENT`保证每个生成的数字只会用于表一次，与删除无关。

请注意，当您将[连接`sqlite3`用作上下文管理器](http://docs.python.org/2/library/sqlite3.html#using-the-connection-as-a-context-manager)（使用`with`语句）时，`commit()`会自动为您应用。引用文档：

> 连接对象可以用作自动提交或回滚事务的上下文管理器。如果发生异常，事务回滚；否则，事务被提交。

换句话说，您可以安全地*删除*代码中的`conn.commit()`行，它完全是多余的。

# c# - 使用工作流业务逻辑层

> ID：14546733
> 
> 赞同：0
> 
> 时间：2013-01-27T11:07:55.477
> 
> 标签：c#, mvvm, visual-studio-2012, workflow, business-logic

我使用 Visual Studio 2012 并想`MVVM`在我的应用程序中使用设计模式。

我正在寻找文档、书籍和示例来帮助我在应用程序的业务逻辑层中使用工作流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:13:13.757

不确定您使用的是什么 ui 技术。我们已将 caliburn micro 用于多个银光应用程序，并取得了巨大成功。

[http://www.mindscapehq.com/blog/index.php/2012/01/12/caliburn-micro-part-1-getting-started/](http://www.mindscapehq.com/blog/index.php/2012/01/12/caliburn-micro-part-1-getting-started/)

# gwt - 如何确定在 GWT-RPC 中触发 onFailure 的原因？

> ID：14546734
> 
> 赞同：2
> 
> 时间：2013-01-27T11:07:58.053
> 
> 标签：gwt, gwt-rpc

我有一个项目执行 2 次 RPC 调用，然后将用户提供的数据保存在数据存储区中。第一个 RPC 调用工作正常，但从第二个开始我总是收到`onFailure()`消息。如何确定`onFailure()`触发的原因？我试过`caught.getCause()`了，但它没有返回任何东西。

```
feedbackService.saveFeedback(email,studentName,usedTemplates,
    new AsyncCallback<String>() {

    public void onFailure(Throwable caught) {
        // Show the RPC error message to the user
        caught.getCause();
        Window.alert("Failure!");
    }

    public void onSuccess(String result) {
        Window.alert("Saved!");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:12:44.090

Throwable 实例是异常的实例。您可以检查它是否是这样的自定义异常：

```
if (caught instanceOf CustomException){ 
```

或者如果您想显示异常消息，您可以使用 getMessage()：

```
Window.alert("Failure: " + caught.getMessage()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:32:29.073

如果发生错误，GWT-rpc 不容易调试。

最简单的部分是检查异常是否属于`StatusCodeException`.

*   状态码 404 表示您指向错误的端点
*   0 表示，
    *   搜索器无法访问
    *   您无权检查服务器是否可用（X-domain-request）

你可以使用 Chrome-Web-Inspector 来测试 GWT-RPC

您应该能够看到从浏览器到后端的所有调用。

最常见的失败是由于对象的序列化。您必须确保所有 dtransferred 对象都实现`java.io.Serializable`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:48:15.193

大多数情况下，它只是引发了一个服务器端异常，它会触发该`onFailure()`方法。

尝试在服务器端设置断点。这应该可以帮助您查明出了什么问题。

# java - java解析字符串到日期

> ID：14546742
> 
> 赞同：1
> 
> 时间：2013-01-27T11:08:58.013
> 
> 标签：java, parsing, date, format

我正在尝试将 2011 年 3 月 14 日解析为 Java 中的日期以用于时间转换器应用程序...我得到 2010 年 12 月 26 日...请帮助。

```
import java.util.*;
import java.text.*;

class date {
    public static void main(String[] args) {
      try {
        String timestampOrig = "11/03/14,15:00:00";
        SimpleDateFormat inFormat = new SimpleDateFormat("YY/MM/dd','HH:mm:ss");
        Date parseDate = inFormat.parse(timestampOrig);
        System.out.println("parsed date: " + parseDate.toString());
      }
      catch(ParseException pe){
      }
    }
} 
```

输出：

> 解析日期：2010 年 12 月 26 日星期日 15:00:00 EST

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T11:11:14.847

`YY`应该是`yy`（小写）。[您可以在文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)中找到可用字符列表及其含义。

出于好奇，关于 的更多信息`YY`，这是*一周年*的，[在这里](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html#week_year)（不是 100% 确定它是诚实的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-07T12:04:30.100

## java.time

我正在使用现代 Java 日期和时间 API（自 2014 年 3 月起）java.time 提供现代答案。

```
 DateTimeFormatter inFormat = DateTimeFormatter.ofPattern("uu/MM/dd,HH:mm:ss");
    String timestampOrig = "11/03/14,15:00:00";
    LocalDateTime parsedDateTime = LocalDateTime.parse(timestampOrig, inFormat);
    System.out.println("parsed date: " + parsedDateTime.toString()); 
```

输出是：

> 解析日期：2011-03-14T15:00

我建议你不要使用`SimpleDateFormat`and `Date`。这些类设计不佳且早已过时，尤其是前者，尤其是出了名的麻烦。而是使用来自 java.time 的现代 Java 日期和时间 API 的 and `LocalDateTime`。`DateTimeFormatter`现代 API 使用起来要好得多。如果您尝试使用`YY`一年，顺便说一句，它会抛出异常，我发现这对捕获您的错误更有帮助。

格式模式字符串中逗号周围的引号是可选的。我知道文档推荐了它们，但我发现没有它们的格式模式字符串更具可读性，因此将它们排除在外。

## 你的代码出了什么问题？

格式模式字符串中的大写字母`Y`表示基于周的年份，仅对周数有用。显然`SimpleDateFormat`无法将您指定的月份和月份中的某天与 2011 年的基于周的年份结合起来，而是仅采用基于周的年份的第一天（这是 的典型行为`SimpleDateFormat`，给您一个不可能但错误的结果并假装一切都很好）。假设您的语言环境是美国或类似的，第 1 周是包含 1 月 1 日并从同一周的星期日开始的那一周，因此在这种情况下是上一年的最后一个星期日，即 2010 年 12 月 26 日。

使用 java.time 您可以使用小写字母`y`或`u`年份。在底部链接的问题中解释了细微的差异。在任何情况下，两位数的年份都被解释为从 2000 年到 2099 年的范围（如果需要，有一些方法可以控制解释）。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [问题：`uuuu`与`yyyy`在`DateTimeFormatter`Java 中格式化模式代码相比？](https://stackoverflow.com/questions/41177442/uuuu-versus-yyyy-in-datetimeformatter-formatting-pattern-codes-in-java)

# file - 如何从文件中逐行删除所有行？

> ID：14546745
> 
> 赞同：0
> 
> 时间：2013-01-27T11:09:56.373
> 
> 标签：file, python-2.7

我正在运行一个从文件中获取名称的循环。

我想要做的是当名字被取走时，它会从文件中删除它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:17:17.713

试试[fileinput](http://docs.python.org/2/library/fileinput.html)。

它类似于：

```
import fileinput
for line in fileinput.input(someFileName, inplace=True):
    doSomething() 
```

任何迭代的行都被消耗，因此从文件中删除。
如果您需要保留它`print`，它将被重写到同一位置的文件中。
即，如果您不打印该行，它将消失:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:21:56.620

本机文件不能那样工作。每次循环时，您都必须重写剩余文件的整个列表。性能会很差（除非文件列表总是很短）。如果您在尝试更新文件时由于无法进行更新而导致进程崩溃，则故障模式非常糟糕。您可以做的最好的事情是：写入临时文件，删除原始文件，然后重命名（或移动）临时文件。

相反，您应该考虑使用[SQLite](http://docs.python.org/2/library/sqlite3.html)。您可以从`File`表中删除记录，或者有一个状态字段来跟踪哪些文件已被处理。

# javascript - jQuery在ajax成功时删除元素

> ID：14546749
> 
> 赞同：6
> 
> 时间：2013-01-27T11:10:20.983
> 
> 标签：javascript, jquery

我有`<button>`ajax ，并希望在成功请求后将其删除。

```
<script type="text/javascript">
    $(".approve").click(function(){
        var el, image_id =  $(this).data('image-id');
        $.ajax({
            type: "PATCH",
            dataType: "json",
            data: { "approved": "True"},
            url: "/ml/api/image/" + image_id + "/?format=json",
            success: function(data){
                $(this).remove();
            }
        });
    });
</script> 
```

但这不起作用……</p>

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-27T11:12:35.423

成功回调中的上下文与单击事件的上下文不同，这意味着`this`不再引用按钮 DOM 元素。只需再次选择该按钮，它就会将其删除：

```
$(".approve").click(function(){
    var el = $(this), image_id =  $(this).data('image-id');
    $.ajax({
        type: "PATCH",
        dataType: "json",
        data: { "approved": "True"},
        url: "/ml/api/image/" + image_id + "/?format=json",
        success: function(data){
            el.remove();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T11:19:38.087

另一种方法是将`context`属性传递给ajax：

```
$(".approve").click(function(){
    var image_id =  $(this).data('image-id');
    $.ajax({
        context: this,
        type: "PATCH",
        dataType: "json",
        data: { "approved": "True"},
        url: "/ml/api/image/" + image_id + "/?format=json",
        success: function(data){
            $(this).remove();
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-09T15:18:53.483

这是我的方法。简单的。

```
var element = $(this);

 $.ajax({
     success: function(){          
          element.remove();     
     }
}); 
```

# php - 带有查询参数的 Laravel REST API

> ID：14546752
> 
> 赞同：1
> 
> 时间：2013-01-27T11:10:36.333
> 
> 标签：php, mysql, laravel

所以我有一部分 API 启动并运行，但我被困在一些事情上。我正在使用 Laravel 的 REST 控制器，并且喜欢使用诸如`Response::eloquent($query);`但是这样的方法的能力，在使用这个时：

1.  如果我得到的资源正在加入多个表，我应该如何处理查询参数（例如 id=27&order_by=timestamp）？
2.  我是否应该从数据库中获取值，然后构造一个数组，其中只包含我想为 API 访问显示的某些字段？那么这将如何与查询参数一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T12:26:17.043

首先，我建议您观看[Teach a Dog to REST](http://blog.apigee.com/detail/restful_api_design) [Link broken] 以获取有关格式化 REST 路由的更多信息。

至于你的问题：

1.  您可以通过[laravel input & cookies docs](http://laravel.com/docs/input)``Input::get() and Input::all()``中提到的方法处理输入字段。您可能还必须使用 laravel 的 Validator 类来验证传入数据。
2.  假设您从示例中提到的输入中获取了 id 和 order_by 字段：

    `$id = Input::get('id'); $order_criteria = Input::get('order_by');`

使用流畅的查询生成器

```
DB::table('dbtable')->where('id', '=', $id)->order_by($order_criteria, 'desc')->first(); 
```

// 使用 first() 因为我们很确定我们只得到一个结果，对于不同的标准，可能返回多个结果，您可能希望使用 ->get() 代替。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-18T17:54:59.990

我为此发布了一个包。

你可以看看这个[https://github.com/selahattinunlu/laravel-api-query-builder](https://github.com/selahattinunlu/laravel-api-query-builder)

对于维基页面：[https ://github.com/selahattinunlu/laravel-api-query-builder/wiki](https://github.com/selahattinunlu/laravel-api-query-builder/wiki)

这个包使用 url 参数创建查询。

例子：

/api/users?name=se*&age!=18&order_by=age,asc&limit=2&columns=name,age,city_id&includes=city

和结果查询

```
Users::with(['city'])->select(['name', 'age', 'city_id'])
                     ->where('age', '!=', 18)
                     ->where('name', 'like', 'se%')
                     ->orderBy('age', 'asc')
                     ->take(2) 
```

用法：

```
$queryBuilder = new QueryBuilder(new User, $request);

return response->json([
  'data' => $queryBuilder->build()->paginate(),
  .
  .
]); 
```

就这样。

# mysql - 可以将大量二进制数据存储在数据库中吗？

> ID：14546765
> 
> 赞同：2
> 
> 时间：2013-01-27T11:12:25.900
> 
> 标签：mysql, linux, nosql

> **可能重复：**
> [音频和视频等大文件的数据库](https://stackoverflow.com/questions/3860979/database-for-huge-files-like-audio-and-video)

我正在寻找存储大量二进制数据（图像、视频、文档等）的最佳（或至少足够好）的方法。该解决方案必须具有可扩展性，并且不能在 X 量数据后卡住。

我想有一个地方，例如保存所有数据的 MySQL 数据库。当其中一个 Web 前端需要它时（根据请求），它可以从数据库中获取它并永久缓存以供以后使用。

从这里我可以看到[http://dev.mysql.com/doc/refman/5.0/en/table-size-limit.html](http://dev.mysql.com/doc/refman/5.0/en/table-size-limit.html) MySQL 表不能存储超过 4TB 每个表。有没有更合适的东西，比如 nosql 数据库，或者最好将所有内容存储在一台服务器上的文件中并将其传播到所有 Web 前端？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T11:34:00.137

您通常不想将大文件存储在关系数据库中——这不是它们的设计目的。我还建议不要使用 NoSQL 解决方案，因为它们通常也不是为此而设计的，尽管有一些例外（见下文）。

您的最后一个想法是将文件存储在文件系统上（请注意，这是文件系统*的*设计目的；）很可能是正确的方法。根据您的可扩展性要求，这可能会有些困难，但您可能希望使用以下方法之一：

*   **圣。**SAN 在网络中提供冗余、高可用性的存储解决方案。多台服务器可以连接到 SAN 提供的存储并在彼此之间共享文件。请注意，此解决方案通常是面向企业的，并且可靠地实施起来相当昂贵（您至少需要物理硬件以及 RAID 控制器和大量磁盘）。

*   **CDN。**内容交付网络是一个远程、全球分布式系统，用于通过 Internet 向最终用户提供文件。您通常将文件放在服务器上的某个位置，然后将其复制到 CDN 以进行实际分发。CDN 的工作方式是，如果它没有用户请求的文件，它会自动尝试从您的服务器获取它；一旦它拥有文件的副本一次，它就会将该文件缓存一段时间。如果您通常受到带宽成本或同时提供大量文件的处理开销的限制，这将非常有用。

*   **云产品（Amazon S3、Rackspace 云文件）。**这些类似于 CDN，但可以与您现有的云基础架构一起使用，如果您正在使用的话。您向云 API 发出请求以存储您的文件，然后它就可以通过 Internet 访问，就像使用 CDN 一样。主要区别在于您必须手动发出任何存储请求（创建、删除或更新）。

如果您提供的文件数量很少，您也可以使用内部解决方案。将文件存储在两台或三台服务器上（可能有更大的服务器集，如果空间成为问题，则使用散列计算进行分片）。为您的前端服务器构建一个小型 API，以从您的存储服务器请求文件，如果其中一个不可用，则回退到备用服务器。

我几乎忘记的一个解决方案（尽管我从未在研究之外使用过）是 Riak 的[Luwak](https://github.com/basho/luwak)项目。Luwak 是 Riak 的扩展，它是一种高效的分布式键/值存储，它通过将大文件分成大小一致的段然后将这些段存储在树结构中以便快速访问来提供大文件支持。这可能是值得研究的，因为它免费为您提供了我在上一段中提到的冗余、分片和 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T12:54:31.097

我在一个相当大的网站上作为（志愿者）开发人员工作——我们在 14000 张图像中有大约 2GB 的图像[这显然远不及“世界纪录”]，以及一个 150MB 的数据库。图像文件存储为单独的文件而不是数据库对象，部分原因是我们为不同的用途调整图像的大小 - 缩略图、中型和大型图像是从存储的图像以编程方式创建的（这可能大于我们用于地点）。

虽然可以在 SQL 数据库中存储“blob”（二进制大对象），但我不认为这是最好的解决方案。在数据库中存储引用，以便您可以为实际存储的文件创建路径/文件名组合 [并可能将实际图像隐藏在某种脚本后面 - php、jsp、ruby 或任何您喜欢的] 将是一个更好的解决方案.

# django - 得到了一个意外的关键字参数 url

> ID：14546772
> 
> 赞同：0
> 
> 时间：2013-01-27T11:12:49.587
> 
> 标签：django, django-urls

自 2 天以来我有这个错误

```
TypeError at /manager/produit/detail/s/

produit_detail() got an unexpected keyword argument 'letter' 
```

我没有看到错误，你能帮我吗？

这是我的`urls.py`：

```
url(r'^manager/produit/detail/(?P<letter>\w{1})/$',
    'appli.views.produit_detail', name="produit_detail"), 
```

这是views.py

> def produit_detail（请求，信件）：
> 
> ```
>  from appli.models import Produit
>     
>     produits = Produit.objetcs.filter(nom__startswith=letter)
> 
>     return render(request,'produit_detail.html') 
> ```

我从这个模板中调用了 url

```
<p>{% for i in l %}
                <a href="{% url 'produit_detail' i %}">{{ i }}</a>
             {% endfor %}</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:59:50.197

如果您输入 int 值，您只能输入 i。如果你想调用一个字符串，你必须把变量和这个值放在一起。

```
<p>{% for i in l %}
       Sample 1: <a href="{% url produit_detail letter=i %}">{{ i }}</a>
       Sample 2: <a href="{% url appli:produit_detail letter=i %}">{{ i }}</a>
       Sample 3: <a href="/manager/produit/detail/{{i}}">{{ i }}</a>
   {% endfor %}
</p>You did not put value for letter 
```

# ios - 如果在上下文的线程上运行，[NSManagedObjectContext performBlock] 是否同步？

> ID：14546776
> 
> 赞同：2
> 
> 时间：2013-01-27T11:13:27.030
> 
> 标签：ios, objective-c, nsmanagedobject, nsmanagedobjectcontext

假设我有一个绑定到主线程的托管对象上下文，并且我调用`[mainContext performBlock:block]`了主线程。会同步运行还是仍然计划并在以后运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T11:22:28.103

假设您的意思是`NSMainQueueConcurrencyType`（而不是`NSConfinementConcurrencyType`），调用的`performBlock:`行为类似于`dispatch_async`，即您的块将被*排入队列*并且不会立即执行。

您可以轻松地验证这一点：

```
NSLog(@"before block");
[self.managedObjectContext performBlock:^{
    NSLog(@"in block");
}];
NSLog(@"after block"); 
```

这将打印（按该顺序）：

```
before block
after block
in block 
```

如果需要同步执行块，则必须同时使用`performBlockAndWait:`这两种基于队列的并发类型。

# jquery - 我的 jQuery $.post 函数返回一个值但无法比较它

> ID：14546778
> 
> 赞同：0
> 
> 时间：2013-01-27T11:14:08.077
> 
> 标签：jquery

我不确定为什么 if/else 语句在比较对成功的响应时不成立。第一个警报，提醒“成功”，但是当我尝试比较它时......它发现它不是真的。我究竟做错了什么？提前致谢。

```
 $("#suggestion_button_box").click(function(){     
    var suggestion = $("#suggest_input_id").serialize();

    if(suggestion != "") {
        $.post('suggest_tag.php',suggestion, function(response) {

            alert(response);    

            if(response == "success") {
                alert('yes');       
            }else {
                alert('no');
            }

    });

    }
}); 
```

PHP部分

```
echo "success"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:21:19.007

正如我上面提到的 - jQuery 可能会将结果字符串解释为不仅仅是纯文本。默认情况下，[jQuery.post()](http://api.jquery.com/jQuery.post/)尝试智能地猜测返回的数据类型。API 提供了 4 个参数选项，尝试将第四个参数 (dataType) 设置为 'text' 并查看它是否开始表现。

**编辑**

我注意到您在上面的评论，这改变了一些事情，所以“数据”现在可能是一个 XML/HTML 元素。

您必须查看返回的对象是否是 XML 元素，如果是，您可以进行 DOM 遍历，并可能通过 $(response).text() 进行检索。

**编辑 2** 您是返回响应 <code>"success"</code> 还是试图表明它是 <?php echo "success";?>？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T09:21:23.263

根据我的经验，您的一个 PHP 脚本中可能有一些白色字符（即之前

如果这不能解决您的问题，您可以随时使用 JS trim() 函数，如下所示：

```
if(response.trim() == "success") { 
```

甚至是跨浏览器的 jQuery.trim()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T09:36:54.693

尝试这个：

```
$("#suggestion_button_box").click(function(){
    var suggestion = $("#suggest_input_id").val();
    if(suggestion != "")
    {
        $.post('suggest_tag.php', { suggestion : suggestion },
        function(response) {
            alert(response);    
            if(response == "success") {
                alert('yes');       
            }else {
                alert('no');
            }
        });
    }
}); 
```

# android - 在 android 应用程序中向 FriendPickerFragment 添加更多详细信息

> ID：14546784
> 
> 赞同：0
> 
> 时间：2013-01-27T11:15:17.713
> 
> 标签：android, facebook-graph-api

我想使用 FriendPickerFragment，但不是只显示图片和名称，而是想添加更多细节，比如他在哪里工作？他住在哪里？

你知道我该怎么做吗？并解释？或指出我的例子。我在网上寻找解决方案，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:40:29.167

不幸的是，Facebook`FriendPickerFragment`没有提供任何方法来定制它呈现的信息。最合理的解决方案是使用`ListView`. 您还应该创建列表的适配器，其中`GraphUser`包含代表用户朋友的对象。好友列表可以通过使用`Request.executeMyFriendsRequestAsync(Session, com.facebook.Request.GraphUserListCallback)`方法从服务器获取。

# xml - 删除 XML (WSDL) 文件中的元素属性值？

> ID：14546785
> 
> 赞同：0
> 
> 时间：2013-01-27T11:15:20.753
> 
> 标签：xml, xslt, wsdl, mule

我想在我的 XML (WSDL) 文件中，删除一些元素。

这是我的 WSDL 文件：

```
 <wsdl:types>
        ...
      </wsdl:types>

      <wsdl:message>
        ...
      </wsdl:message>

      <wsdl:portType name="countrySoap">
         <wsdl:operation name="GetCountryByCountryCode">
             <wsdl:documentation>Get country name by country code</wsdl:documentation>
             <wsdl:input message="tns:GetCountryByCountryCodeSoapIn" />
             <wsdl:output message="tns:GetCountryByCountryCodeSoapOut" />
         </wsdl:operation>
        <wsdl:operation name="GetISD">
            <wsdl:documentation>Get International Dialing Code </wsdl:documentation>
            <wsdl:input message="tns:GetISDSoapIn" />
            <wsdl:output message="tns:GetISDSoapOut" />
        </wsdl:operation>
        ...
      </wsdl:portType>

  .... 
```

现在我想删除 `<wsdl:operation name="GetISD">`它拥有的所有元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:39:22.503

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

  <xsl:template match="wsdl:operation[@name = 'GetISD']" />
</xsl:stylesheet> 
```

在这里使用：

*   [身份模板](http://en.wikipedia.org/wiki/Identity_transform)
*   选择性空模板从输出中省略一个节点。

# ruby-on-rails - 现有工作应用程序上的“rails server”未启动

> ID：14546792
> 
> 赞同：1
> 
> 时间：2013-01-27T11:16:57.907
> 
> 标签：ruby-on-rails

我很高兴配置我的新笔记本电脑来处理我已经存在的项目。我复制了一个应用程序的文件夹及其所有子文件夹，现在将它放在新的笔记本电脑中。看来我无法通过`rails server`在项目的根目录下键入命令来启动服务器。我试图创建一个新项目并启动它，它工作得很好，所以我真的不知道该怎么做。Rails 版本是相同的和相同的`Gemfile`。这是`rails server`命令的结果：

```
Usage:
  rails new APP_PATH [options]

Options:
  -r, [--ruby=PATH]              # Path to the Ruby binary of your choice
                             # Default: /home/toni/.rvm/rubies/ruby-1.9.3-p374/bin/ruby
  -b, [--builder=BUILDER]        # Path to a application builder (can be a filesystem   path or URL)
  -m, [--template=TEMPLATE]      # Path to an application template (can be a filesystem path or URL)
  [--skip-gemfile]           # Don't create a Gemfile
  [--skip-bundle]            # Don't run bundle install
  -G, [--skip-git]               # Skip Git ignores and keeps
  -O, [--skip-active-record]     # Skip Active Record files
ETC... 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T15:24:14.190

在 Rails 3.x 中，这将在`script/rails`缺少时发生。如果您刚刚将项目克隆到另一台机器，该文件可能已被意外删除，或者可能从未提交到源代码管理。您需要找到或重新生成它。

`script/rails`Rails 通过检查是否存在来确定它是否真的“在”Rails 项目中。如果找不到该文件，则假定它不是 Rails 项目： [https ://github.com/rails/rails/blob/v3.2.21/railties/lib/rails/script_rails_loader.rb#L21-L23](https://github.com/rails/rails/blob/v3.2.21/railties/lib/rails/script_rails_loader.rb#L21-L23)

有一个选项可以传递“rails new”来忽略已经存在的文件：

```
rails new APPNAME -s 
```

您可以尝试在现有项目上运行它以替换任何丢失的文件。

另见： http: [//guides.rubyonrails.org/v3.2.13/initialization.html](http://guides.rubyonrails.org/v3.2.13/initialization.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T13:16:28.470

从 rails 命令的输出来看，您似乎没有在 rails 项目的根目录中执行命令“rails server”。

您应该检查您是否在正确的目录中以及是否已复制所有文件。

# objective-c - 在 searchdisplaycontroller 中打开详细视图

> ID：14546798
> 
> 赞同：1
> 
> 时间：2013-01-27T11:17:36.523
> 
> 标签：objective-c

```
- (void)viewDidLoad {
    [super viewDidLoad];

    searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 160, 44)];
    searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self];

    searchDisplayController.delegate = self;
    searchDisplayController.searchResultsDataSource = self;

    self.tableView.tableHeaderView = searchBar;

    [searchDisplayController setSearchResultsDataSource: self];
    [searchDisplayController setSearchResultsDelegate: self];![enter image description here][2]

    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)] autorelease];
    self.navigationItem.rightBarButtonItem = addButton;

    // inizializziamo l'oggetto Data
    _objects = [[Data alloc] init];

    filteredlist=[[NSMutableArray alloc]initWithArray:_objects.lista ];
} 
```

在这个方法中，我添加了打开详细视图

```
 [searchDisplayController setSearchResultsDataSource: self];
 [searchDisplayController setSearchResultsDelegate: self]; 
```

唯一的问题是它打开了该单元格的视图，我需要在最初加载的列表中打开与该名称关联的详细视图。

问题是我搜索的时候打开对应的detail view

当我进行搜索时，我必须在单击名称时打开详细视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:31:12.260

我不是 100% 确定您在这里有什么问题，但请确保在您的委托选择器中检查`tableView`参数以区分您的搜索结果表视图和初始表视图。例如：

```
[...]
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (tableView == self.tableView) {
        // ...do your tableView stuff
    } else if (tableView == searchDisplayController.searchResultsTableView) {
        id someSearchResultObject = [_filteredlist objectAtIndex:indexPath.row];
        SomeDetailViewController *vc = [[SomeDetailViewController alloc] initWithSearchResult:someSearchResultObject];
        [self.navigationController pushViewController:vc animated:YES];
        [vc release];
    }
}
[...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:09:23.393

我将更新汤姆的答案：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
        if (tableView == self.tableView) {
            // ...do your tableView stuff
        } else if (tableView == searchDisplayController.searchResultsTableView) {
            DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"detailViewController" bundle:nil];
[self.navigationController pushViewController:detailViewController animated:YES];
        }
    } 
```

# powershell - 如何将值放入 txt 文件（文件包含空格）？电源外壳

> ID：14546801
> 
> 赞同：0
> 
> 时间：2013-01-27T11:18:35.653
> 
> 标签：powershell

我对文件中的数据有疑问。文本文件中的数据如下所示：

```
ADSE64E...Mobile phone.....................                           
EDW8......Unknown item.....................                           
CAR12.....Peugeot 206 with red colour......            
GJ........Parker model 2...................                         
Por887W8..Black coffe from Peru............ 
```

点代表空格。第一列是 Product_Code（长 1-10），第二列（长 1-255）是描述。我需要的是：

```
ADSE64E;Mobile phone                           
EDW8;Unknown item                          
CAR12;Peugeot 206 with red colour           
GJ;Parker model 2\.                         
Por887W8;Black coffe from Peru 
```

我的解决方案是：

1.  第一列到达变量（与第二列相同的过程）并将两个变量合并为一个..但我不知道如何..

    $variabletxt = 获取内容 C:\Product.txt

    $firstcolumn = $variablestxt.substring(1,10)

    $secondcolumn = $variablestxt.substring(10)

    $最终 = ???

2.  替换空格，但问题是 product_code 可能长 1-10。

你有什么建议我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:31:10.637

拆分你的刺，然后用任何内容替换“多个空格”：

```
gc file.txt |%{
($_.substring(0,9)  -replace "[ ]{2,}","")+";"+($_.substring(10,254)  -replace "[ ]{2,}","")+";"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:08:52.387

使用 TrimEnd 方法删除尾随点并替换剩下的点。

```
Get-Content C:\Product.txt | 
Foreach-Object { $_.TrimEnd() -replace '^([^\s]+)(\s+)(.+)$','$1;$3'}

ADSE64E;Mobile phone
EDW8;Unknown item
CAR12;Peugeot 206 with red colour
GJ;Parker model 2
Por887W8;Black coffe from Peru 
```

根据@Kayasax 评论（谢谢！），如果代码长度为 10 个字符，则第一列和第二列之间将没有空格，因此使用它可能更安全：

```
Get-Content C:\Product.txt | 
Foreach-Object { '{0};{1}' -f $_.Substring(0,10).Trim(), $_.Substring(10).Trim() } 
```

# java - 暴露方法的更好方法

> ID：14546804
> 
> 赞同：1
> 
> 时间：2013-01-27T11:19:19.250
> 
> 标签：java, web-services, architecture, database-management

我正在编写 Web 服务的数据库管理器层。我必须决定如何实现我的库：情况就是这样。我有一堂课，PersistenceUnit：

```
private static RazoooCore rc;
private static DBInstance db;
protected ODatabaseDocumentTx getDb(){return db;}
protected RazoooCooore getRc(){return rc;}

public static void startPersistence (){
    //here I get an instance of rc and db
} 
```

启动我的数据库服务并允许我连接到它。我想要的是编写实现持久化方法的类，如 addUser(...) 或 deleteFile(...) 等。我的疑问是如何实现这些方法。因为我有两大类操作（一个在用户上，另一个在文件上）我想创建类（用户和文件）并在它们上实现公共静态方法，或者，同样，创建两个单例。然后应用层将不得不调用方法，而不必每次都创建和销毁对象。这是实现我的层的好方法吗？以这种方式，并发处理得当，还是有更好的方法（也许是一种模式）来最大化性能和多线程？当然这不是内存绑定层，因为上层不必不断地创建对象。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T19:03:15.033

有很多关于对象是否应该（或不）负责持久化自身的讨论，也就是说，User 类是否应该具有 Save 方法？这得看情况。然而，目前我们几乎看不到这种模式。

我认为持久性逻辑必须在数据访问层中，可能在存储库（UserRepository 和 FileRepository）中。这与性能和多线程无关，因为这两个问题（性能和并发性）都在数据库中。

这是我的看法。

# git - gitignore'd 文件一直被列为未跟踪

> ID：14546810
> 
> 赞同：1
> 
> 时间：2013-01-27T11:20:09.867
> 
> 标签：git

我有一个看起来像这样的目录列表（这是我的仓库的根目录）：

```
.git
.gitignore
MORE FILES / FOLDERS
_viminfo 
```

我的 .gitignore 看起来像这样：

```
/_viminfo 
```

包括 .gitignore 在内的所有内容都已被长期承诺。但是，当我输入时，`git status`我仍然得到这个输出：

```
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       _viminfo 
```

这可能是什么罪魁祸首？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:22:53.117

尝试...

```
./_viminfo 
```

或从整个项目中删除...

```
_viminfo 
```

并确保文件名后没有尾随空格；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T12:29:57.147

之后有一个尾随空格`/_viminfo`，`.gitignore`删除它可以解决问题。

# android - AChartEngine：在轴本身的右侧对齐 Y 轴标签

> ID：14546816
> 
> 赞同：3
> 
> 时间：2013-01-27T11:21:06.967
> 
> 标签：android, charts, achartengine

我正在为 android 使用 aChartEngine。我的 y 轴有问题，当值达到 10000 或更多时，左边的数字消失（检查照片）照片中的值是 7000-11500，但出现在 10000 以上的值是 0000,0500，。. . ETC

我想在轴的右侧设置 y 轴标签或类似的东西

谁能帮忙？

知道我用过

```
renderer.setYLabelsAlign(Align.RIGHT); 
```

![Y 轴标签](../Images/c98a77624e590386bb3749e9fcfe36c9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T09:50:59.760

```
renderer.setYLabelsAngle(angle) 
```

在固定边距的情况下查看 Y 轴日期，以便数据以倾斜的格式显示，其中可以看到更多的字符。
否则，必须设置边距间距才能查看 y 轴标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:14:55.053

您可以调整图表的边距：

```
renderer.setMargins(margins); 
```

其中边距是一个数组`[top, left, bottom, right]`

如果要在网格的右侧设置对齐方式，只需 set `Align.LEFT`，这意味着它们在左侧对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-04T07:27:22.557

```
 multiRenderer.setYLabelsAlign(Paint.Align.RIGHT);
    multiRenderer.setMargins(new int[]{0, 100, 0, 0});
    multiRenderer.setYLabelsPadding(20); 
```

使用上面的代码将 Y 轴与填充对齐。

# android - 我的应用在 ics 上运行良好，但在 froyo 上运行良好

> ID：14546819
> 
> 赞同：1
> 
> 时间：2013-01-27T11:21:36.007
> 
> 标签：android, android-layout, android-manifest, android-compatibility

**我有这个应用程序，其中我有下面显示的布局作为起始活动。它在 ICS 中运行良好，但在 froyo 中运行良好。**

![在此处输入图像描述](../Images/5056351471fb708e1a2ada75b18d5cd3.png)

**在 froyo 中，它只显示“关于”按钮，没有其他任何内容。我还在下面更新了我的清单文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.iolcalci"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <supports-screens
        android:anyDensity="true"
        android:resizeable="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.iolcalci.MainActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.iolcalci.Selection"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:windowSoftInputMode="adjustResize|adjustPan|stateVisible" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.iolcalci.Srkt"
            android:label="@string/title_activity_srkt"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.example.iolcalci.Srk2"
            android:label="@string/title_activity_srk2"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.example.iolcalci.Holladay"
            android:label="@string/title_activity_holladay"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.example.iolcalci.Binkhorst"
            android:label="@string/title_activity_binkhorst"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.example.iolcalci.Srkt_x"
            android:label="@string/title_activity_srkt_x" >
        </activity>
        <activity
            android:name="com.example.iolcalci.Srk2_x"
            android:label="@string/title_activity_srk2_x" >
        </activity>
        <activity
            android:name="com.example.iolcalci.Binkhorst_x"
            android:label="@string/title_activity_binkhorst_x" >
        </activity>
        <activity
            android:name="com.example.iolcalci.Holladay_x"
            android:label="@string/title_activity_holladay_x" >
        </activity>
        <activity
            android:name="com.example.iolcalci.Help"
            android:label="@string/title_activity_help" >
        </activity>
    </application>

</manifest> 
```

* * *

**XML文件在这里**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/black"
tools:context=".FullscreenActivity" 
android:id="@+id/frame_layout">

    <LinearLayout
        android:id="@+id/fullscreen_content_controls"
        style="@style/ButtonBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center_horizontal"
        android:background="@color/black_overlay"
        android:orientation="horizontal"
        tools:ignore="UselessParent" >
    </LinearLayout>

    <Button
        style="@style/ButtonBarButton"
        android:layout_width="222dp"
        android:layout_height="62dp"
        android:layout_marginLeft="45dp"
        android:layout_marginTop="75dp"
        android:background="@color/black"
        android:paddingLeft="20dp"
        android:id="@+id/iolCalculation"
        android:text="@string/Button"
        android:textColor="@color/WhiteSmoke"
        android:textStyle="bold" />

    <Button
        style="@style/ButtonBarButton"
        android:layout_width="222dp"
        android:layout_height="62dp"
        android:layout_marginLeft="45dp"
        android:id="@+id/sHelp"
        android:layout_marginTop="139dp"
        android:background="@color/Black"
        android:gravity="center"
        android:paddingLeft="10dp"
        android:text="@string/Button1"
        android:textColor="@color/WhiteSmoke"
        android:textStyle="bold" />

    <Button
        style="@style/ButtonBarButton"
        android:layout_width="222dp"
        android:layout_height="62dp"
        android:id="@+id/sAbout"
        android:layout_marginLeft="45dp"
        android:layout_marginTop="203dp"
        android:background="@color/Black"
        android:paddingLeft="10dp"
        android:text="@string/Button2"
        android:textColor="@color/WhiteSmoke"
        android:textStyle="bold" >

    </Button> 
```

* * *

**弗罗约屏幕**

![在此处输入图像描述](../Images/4d32a6afe1a06abde401d0f8c5b18438.png)

* * *

**请帮助我，有什么方法可以在 pc 上测试我的应用程序的 froyo 吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:50:01.240

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".FullscreenActivity" 
android:id="@+id/frame_layout">

<LinearLayout
    android:id="@+id/fullscreen_content_controls"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top|center_horizontal"
    android:orientation="vertical" >

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="6dp"
     android:layout_gravity="center_horizontal"
    android:paddingLeft="20dp"
    android:id="@+id/iolCalculation"
    android:textStyle="bold" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/sHelp"
    android:layout_marginTop="6dp"
    android:gravity="center"
     android:layout_gravity="center_horizontal"
    android:paddingLeft="10dp"
    android:textStyle="bold" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/sAbout"
     android:layout_gravity="center_horizontal"
    android:layout_marginTop="6dp"
    android:paddingLeft="10dp"
    android:textStyle="bold" >

</Button>
    </LinearLayout>
</FrameLayout> 
```

此代码适用于所有操作系统。不要使用固定的宽度和高度！

# mysql - 没有 WHERE 子句的 UPDATE 查询不起作用；不起作用

> ID：14546820
> 
> 赞同：0
> 
> 时间：2013-01-27T11:21:45.667
> 
> 标签：mysql, sql

我遇到了这种奇怪的情况..我正在尝试在没有 where 子句的情况下执行和更新查询..这是查询

```
UPDATE `siteconfig` 
SET `homepagereview` = 'Justine Pope, London', 
`homepagetitle1` = 'Lorem ipsum dolor sit amet', 
`homepagecontent1` = 'Lorem ipsum dolor sit amet' 
```

当我执行查询时，它根本不做任何事情..我还插入了一个带有 NULL 值的行并执行了这个更新查询，但仍然没有任何反应..！

这是表结构...

```
CREATE TABLE `siteconfig` (
    `homepagereview` VARCHAR(255) NULL DEFAULT NULL,
    `googleadsensecode` VARCHAR(255) NULL DEFAULT NULL,
    `analyticscode` VARCHAR(255) NULL DEFAULT NULL,
    `sliderimage1` VARCHAR(255) NULL DEFAULT NULL,
    `sliderimage2` VARCHAR(255) NULL DEFAULT NULL,
    `sliderimage3` VARCHAR(255) NULL DEFAULT NULL,
    `homepagetitle1` VARCHAR(255) NULL DEFAULT NULL,
    `homepagecontent1` VARCHAR(1000) NULL DEFAULT NULL,
    `homepagetitle2` VARCHAR(255) NULL DEFAULT NULL,
    `homepagecontent2` VARCHAR(1000) NULL DEFAULT NULL,
)
COMMENT='misc settings for website'
COLLATE='latin1_swedish_ci'
ENGINE=MyISAM; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-26T13:43:05.293

您可以在代码前添加：

```
SET SQL_SAFE_UPDATES=0; 
```

当为 1 时，如果未指定键列，`SQL_SAFE_UPDATES`则不允许对表执行`UPDATE`或命令。这样做基本上是为了避免用户在忘记添加子句`DELETE`时意外清除表数据。`WHERE`

# javascript - 回调此上下文

> ID：14546821
> 
> 赞同：1
> 
> 时间：2013-01-27T11:21:53.173
> 
> 标签：javascript, callback, this

在应用程序中：

```
var bootstrap = new Bootstrap();
bootstrap.init( this, this.onBootstrapComplete ); 
```

在引导程序中：

```
this.init = function( app, completeHandler ){
    _app = app;
    _completeHandler = completeHandler;
        ...
}

...

var _allReady = function(){
        _completeHandler( _app );
} 
```

回到应用程序：

```
this.onBootstrapComplete = function( app )
{
        app.something();
        app.someValue = ...
} 
```

我想在 onBootstrapComplete中获取**这个上下文。**它有效，但看起来不正确:)

如果假设我想直接从 App 调用 onBootstrapComplete，我必须将其**命名**为.onBootstrapComplete( **this** )。

 **我该怎么做才能使我的 onBootstrapComplete 看起来像这样：

```
this.onBootstrapComplete = function()
{
        this.something();
        this.someValue = ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T11:25:05.037

我建议使用 underscore.js。有关详细信息，请参阅[http://underscorejs.org/#bind](http://underscorejs.org/#bind)。

```
this.onBootstrapComplete = _.bind( function() {
   ...
   this.someFunction(); // this context is available now
   ... 
}, this ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:49:51.427

`this`在调用函数时进行评估。假设您`this`在函数内部使用`f`。

基本上有两种调用方式`f`：

**`(expr).f()`**如果 f 被称为某个对象的属性，`this`则将评估为该对象`expr`。
**`f()`**在这种情况下，`this`将评估为`window`。

由于您将函数传递给`bootstrap`，因此它只能将函数调用为`f()`。

您可以使用闭包：

```
var self = this;
this.onBootstrapComplete = function()
{
        self.something();
        self.someValue = ...
} 
```

或者，您可以`f.apply()`适当地对函数使用函数：

```
function bind(context, f){
    return function() {
        return f.apply(context, arguments);
    }
}

this.onBootstrapComplete = bind(this, function()
{
        this.something();
        this.someValue = ...
}); 
```

或者使用 ECMAScript 5，[**已经有一个绑定函数**^([MDN])](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)：

```
this.onBootstrapComplete = function()
{
        this.something();
        this.someValue = ...
}.bind(this); 
```**

# jquery - jQuery 循环动画不起作用

> ID：14546824
> 
> 赞同：1
> 
> 时间：2013-01-27T11:21:56.263
> 
> 标签：jquery, cycle

我想使用 jQuery Cycle 插件在[本网站的侧边栏中为赞助商的徽标制作动画](http://www.sc-hoersching.at)

我尝试了不同的 html 标记和 js 代码变体来调用循环函数，但我无法让它工作。

.js 文件是否加载到错误的位置？标记有什么问题吗？

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:52:18.960

我认为该页面上使用的某些脚本之间存在冲突。我通过重新创建问题找到了解决方案：首先，您使用`$(".sponsoren")`了错误，因为`sponsoren`它是一个 id。所以它应该是`$("#sponsoren")`。

其次，您应该将脚本位置和脚本本身放在页面底部。这样做之后，它仍然对我不起作用，所以我去掉了这`$(document).ready(function(){});`部分，因为它不再需要了。我最终得到以下代码：

```
<script src="http://malsup.github.com/jquery.cycle.all.js" type="text/javascript"></script>
<script type="text/javascript">
    jQuery('#sponsoren').cycle({
        fx: 'scrollDown'
    });
</script> 
```

请记住，我将它放在页面底部，这似乎有效。这可能不是最好的解决方案，但它是这样工作的。

# javascript - 内联 Javascript 块未初始化

> ID：14546825
> 
> 赞同：0
> 
> 时间：2013-01-27T11:22:06.917
> 
> 标签：javascript, ajax, jquery-mobile

在 jQuery 页面上，我有一个登录表单。代码很简单：

```
<form method="post">
    <div data-role="fieldcontain">
        .... Form here
    </div>
</form> 
```

但是提交了以下表单，JQM 通过 Ajax POST 加载下一页。

问题是该新页面上的任何内联 Javasctipt 都未初始化。我不是在谈论 $(document) 元素等。整个内联 Javascript 块都没有初始化。

但是，如果我添加

```
data-ajax="false" 
```

到表单标签，一切都很好。页面已正确加载和初始化。

为什么会发生这种情况，有没有办法用 ajax 加载的内容触发页面初始化？

我在 Firefox 和 Android Webview 客户端上都观察到了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:47:43.993

如果您使用默认的 jQuery Mobile 实现（使用 ajax）加载页面，则`<div data-role="page">`只会加载第一页 ( ) 上的脚本块。

您可以通过 mobileinit 关闭 ajax 加载，这将全局禁用 ajax 加载，或者您可以通过源链接禁用它。

```
$(document).on("mobileinit", function(){
    $.mobile.ajaxEnabled = false;
}); 
```

或者

```
<a data-role="button" data-ajax="false"
    href="myPageWithItsOwnScriptBlock.html">Link</a> 
```

如果您想继续使用 ajax 加载，您可以将脚本块放在“页面”内`<div>`

```
<div data-role="page">
    <script src="myscript.js"></script>
    <div data-role="header">
    .... 
```

详情在这里：http: [//jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T19:27:17.593

在您的情况下起作用的原因**`data-ajax="false"`**是因为它会强制重新加载整个页面，这会偶然触发页面标记增强。

这是 jQuery Mobile 文档的一部分：

> 请务必注意，如果您从通过 Ajax 加载的移动页面链接到包含多个内部页面的页面，则需要在链接中添加 rel="external" 或 data-ajax="false"。这告诉框架重新加载整个页面以清除 URL 中的 Ajax 哈希。

现在，如果您想增强新页面内容，请使用以下命令：

```
$('#pageID').trigger('create'); 
```

或者如果您还对页眉和页脚进行了更改，请使用：

```
$('#pageID').trigger('pagecreate'); 
```

如果您想要更好地轻描淡写，请查看我的博客**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**，我是否正在详细讨论页面内容标记增强。在那里你会找到上面提到的函数的例子。它也可以在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T11:26:16.037

尝试将您的内联 JS 代码封装成如下内容：

```
$(document).bind('pageinit', function(event) {
    // your inline code goes here
}); 
```

# php - MongoDB，学说 2 和参考一对多

> ID：14546826
> 
> 赞同：0
> 
> 时间：2013-01-27T11:22:14.997
> 
> 标签：php, mongodb, reference, doctrine, one-to-many

是关于同一个表中的一对多关联，但在 MongoDB 中。

```
class Component
{
    ...
     /**
     * @MongoDB\ReferenceMany(
     *   discriminatorMap={
     *     "component"="Component"
     *   },
     *   inversedBy="components.id",
     *   cascade={"persist", "remove", "refresh", "merge"}
     * )
     * 
     */
    protected $components;

    public function __construct()
    {
        $this->components = new ArrayCollection();
    }

    /**
     * Add components
     *
     * @param $component
     */
    public function addComponents(Component $component)
    {
        if(!$this->components->contains($component)){
            $this->components->add($component);
        }   
    }
    ...
} 
```

这关联组件我没问题，我看集合其实关联我，但是当我尝试重新获取组件时，$ this->components 不是一个ArrayCollection，而是一个Object Component

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:53:09.700

解决了...

```
/**
 * @MongoDB\ReferenceOne(targetDocument="Component", inversedBy="children", cascade={"all"})
 */
public $parent;

/**
 * @MongoDB\ReferenceMany(targetDocument="Component", mappedBy="parent", cascade={"all"})
 */
public $children;

public function __construct()
{
    $this->children = new \Doctrine\Common\Collections\ArrayCollection();
}

public function addChild(component $child)
{
    if(!$this->children->contains($child)){
        $child->parent = $this;
        $this->children->add($child);
    }
}

/**
 * Get children
 *
 * @return Doctrine\Common\Collections\ArrayCollection $children
 */
public function getComponents()
{
    return $this->children;
} 
```

# c# - 使用 SQL server 2012 部署实体框架应用程序

> ID：14546828
> 
> 赞同：0
> 
> 时间：2013-01-27T11:22:24.683
> 
> 标签：c#, sql-server, wpf, entity-framework, deployment

我在 .Net Framework 4.0 上做了一个 wpf 应用程序。它使用实体框架和 SQL Server 2012 作为数据库。

现在我想在另一台计算机上部署这台机器。那台机器上需要安装什么。我假设目标机器上已经安装了新的操作系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T09:15:33.493

我已经使用 install shield 部署了相同的应用程序，这是从**WinXP SP2 到 Win8**的所有需要​​的 deps 列表（可从微软网站免费下载），并且适用于 x84 | x64

**.netFX 4.0 中已经不需要实体框架了**

您还可以使用指定 sqlserver 配置参数

`SQLEXPR_x86_ENU /ACTION=Install /FEATURES=SQLENGINE /INSTANCENAME=SQLEXPRESS /SQLSVCACCOUNT="NT AUTHORITY\SYSTEM" /AGTSVCACCOUNT="NT AUTHORITY\LOCAL Service" /SQLSVCSTARTUPTYPE=Automatic /BROWSERSVCSTARTUPTYPE=Automatic /TCPENABLED=1 /NPENABLED=1 /ADDCURRENTUSERASSQLADMIN`

![在此处输入图像描述](../Images/876993f4212a2e88a392701ed3bd9785.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:41:08.933

这取决于您计划如何真正部署。通常，您需要一份 SQL Server（完整版或快速版，具体取决于预算/快速版的限制是否对您的情况有问题）。

您还需要安装 .NET 框架和任何其他依赖项（取决于您的应用程序）。您可以使用 Visual Studio 创建一个安装程序，然后它将捆绑所有依赖项并使在其他机器上的安装变得简单而轻松。

# iphone - UITableViewCell sizeToFit 中的 UITextView 无法按预期工作

> ID：14546834
> 
> 赞同：8
> 
> 时间：2013-01-27T11:23:13.857
> 
> 标签：iphone, ios, objective-c, ipad, uitextview

我有一个`UITextView`我需要调整的大小，以便它的宽度可以伸展以填充屏幕，但高度可变，以便它足够大以显示所有文本。当调整大小时，它应该使`UITextView`最小可能的高度，以便它适合。

为了做到这一点，我一直在使用以下代码：

```
textView.text            = textMessage;
[textView sizeToFit];
CGRect rect              = textView.frame;
rect.size.height         = textView.contentSize.height;
textView.frame           = rect; 
```

当我这样做时，它似乎并没有使 UITextView 成为可能的最小高度。下面似乎还有一些多余的空间。这是一个示例（我将背景颜色设置为红色以说明我的观点）：

![在此处输入图像描述](../Images/9749051e089693989963acc21139ca72.png)

请有人告诉我为什么会发生这种情况以及我该如何解决这个问题？请注意，UITextView 位于自定义 UITableView 单元格中。此单元格使用自动调整大小蒙版水平拉伸以根据方向填充屏幕。

我花了很长时间试图让它工作，但我不明白为什么底部有多余的空间，当我旋转设备时，UITextViews 的高度似乎都保持不变（即使我调用的`[UITableView reloadData]`方法我还定义了行高方法）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T22:39:10.270

我曾经遇到过同样的问题并发现了这个。

```
CGSize maximumLabelSize = CGSizeMake(300,80);//Or whatever size you need to be the max

CGSize expectedLabelSize = [textMessage sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:maximumLabelSize lineBreakMode:UILineBreakModeWordWrap];
rect.size.height = expectedLabelSize.height;
textView.frame = rect; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:17:04.680

这是您的问题的解决方案。

```
//
//  CustomCell.m
//  Custom
//
//  Created by Syed Arsalan Pervez on 2/8/13.
//  Copyright (c) 2013 SAPLogix. All rights reserved.
//

#import "CustomCell.h"

@implementation CustomCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        _textView = [[UITextView alloc] initWithFrame:CGRectZero];
        [_textView setBackgroundColor:[UIColor clearColor]];
        [_textView setContentInset:UIEdgeInsetsMake(0, 0, 0, 0)];
        [[self contentView] addSubview:_textView];
    }
    return self;
}

- (void)layoutSubviews
{
    [super layoutSubviews];
    [_textView setFrame:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}

- (void)dealloc
{
    [_textView release];
    [super dealloc];
}

@end 
```

使用细胞。

```
//
//  TestViewController.m
//  Custom
//
//  Created by Syed Arsalan Pervez on 2/8/13.
//  Copyright (c) 2013 SAPLogix. All rights reserved.
//

#import "TestViewController.h"
#import "CustomCell.h"

@interface TestViewController ()

@end

@implementation TestViewController

- (void)viewDidLoad
{
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 2;
}

#define DEFAULT_TEXT @"This is an example block of text which seems to run over the edge of the UITableView so it no longer shows up the way I want."

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *_identifier = @"CustomCell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:_identifier];
    if (!cell)
    {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:_identifier];
        [[cell contentView] setBackgroundColor:[UIColor redColor]];
    }

    cell.textView.text = DEFAULT_TEXT;

    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CGRect frame = [[UIApplication sharedApplication] statusBarFrame];
    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
// You can replace DEFAULT_TEXT with text you want to be displayed in the cell.
    CGSize size = [DEFAULT_TEXT sizeWithFont:[UIFont systemFontOfSize:13] constrainedToSize:CGSizeMake( UIInterfaceOrientationIsPortrait(orientation) ? frame.size.width : frame.size.height, 9999)];

    return size.height;
}

- (UIInterfaceOrientation)interfaceOrientation
{
    return (UIInterfaceOrientation)UIInterfaceOrientationMaskAll;
}

- (void)dealloc
{
    [super dealloc];
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T00:29:12.330

UITextView的`superview`（或兄弟视图是您的 UITextView 的底部边缘固定到）是保持 UITextView 的高度不降低的原因。在不知道视图的视图层次结构的情况下，我建议调用`setNeedsLayout`UITextView 的父视图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T07:08:20.053

在我过去的两个项目中，我也遇到了同样的问题。我做的是这个。

```
- (float)getHeightFortheDynamicLabel:(NSString *)stringForTheLabel
{
    CGSize maxSize = CGSizeMake(215, 2000.0);
    CGSize newSize = [stringForTheLabel sizeWithFont:[UIFont systemFontOfSize:14.0]
                                   constrainedToSize:maxSize];
    return newSize.height;
} 
```

只需传递您需要确定其高度的字符串，此方法将返回您的大小。为您的标签设置此高度。

另请注意，使用行数设置为 0 的 UILabel 而不是 UITextView。此方法与 Label 完美搭配。一开始我也使用了导致偏移问题的 UITextView。后来有了标签，这很完美。尝试使用 UILabel。希望这对您有所帮助。还要仔细检查您用于标签的字体大小。使它们相同（对于方法内给出的标签和值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T02:24:27.330

我同意 mpwhitt 的观点，但会增加一点差异来影响表格单元格的拉伸特性。

```
 CGSize expectedLabelSize = [textView.text sizeWithFont:textView.font 
           constrainedToSize:CGSizeMake(textView.frame.size.width,9999)
           lineBreakMode:UILineBreakModeWordWrap];

    rect.size.height = expectedLabelSize.height;
    textView.frame = rect; 
```

这样您就不必担心字体是否更改或标签宽度是否更改。我不确定这是否会消除那条多余的高度，但我从来不需要它来完全按照你的要求工作。

是否可以从您找到的高度中减去 3-5 个像素？

# c++ - 在 C++ 中调用函数是不明确的。候选函数是原型和函数本身

> ID：14546835
> 
> 赞同：5
> 
> 时间：2013-01-27T11:23:20.597
> 
> 标签：c++, prototype, ambiguous

我正在完成斯坦福 CS106B C++ 作业，并且我的作业存在“语义问题”。

似乎编译器无法推断出调用是对函数还是对函数原型的调用。我不明白为什么要调用原型。我怎样才能做到这一点，以便调用函数而不是原型？我收到的错误消息“调用 'humansTurn' 不明确”。

错误消息与页面底部 humanTurn(Lexicon,Lexicon) 函数中的 humanTurn(Lexicon,Lexicon) 函数的调用有关。这个函数的原型在主函数之上。

任何帮助将不胜感激。

亲切的问候，

梅胡尔

```
 /*
     * File: Boggle.cpp
     * ----------------
     */

    #include <iostream>
    #include "gboggle.h"
    #include "graphics.h"
    #include "grid.h"
    #include "vector.h"
    #include "lexicon.h"
    #include "random.h"
    #include "simpio.h"
    using namespace std;

    /* Constants */

    const int BOGGLE_WINDOW_WIDTH = 650;
    const int BOGGLE_WINDOW_HEIGHT = 350;

    const string STANDARD_CUBES[16]  = {
       "AAEEGN", "ABBJOO", "ACHOPS", "AFFKPS",
       "AOOTTW", "CIMOTU", "DEILRX", "DELRVY",
       "DISTTY", "EEGHNW", "EEINSU", "EHRTVW",
       "EIOSST", "ELRTTY", "HIMNQU", "HLNNRZ"
    };

    const string BIG_BOGGLE_CUBES[25]  = {
       "AAAFRS", "AAEEEE", "AAFIRS", "ADENNN", "AEEEEM",
       "AEEGMU", "AEGMNN", "AFIRSY", "BJKQXZ", "CCNSTW",
       "CEIILT", "CEILPT", "CEIPST", "DDLNOR", "DDHNOT",
       "DHHLOR", "DHLNOR", "EIIITT", "EMOTTT", "ENSSSU",
       "FIPRSY", "GORRVW", "HIPRRY", "NOOTUW", "OOOTTU"
    };

    /* Function prototypes */

    void welcome();
    void giveInstructions();
    // Create random board
    static Grid <char> randomBoard();
    // Create custom board
    static Grid<char> customBoard();
    static void drawAndFillBoard(Grid<char>);
    static void humansTurn(Lexicon,Lexicon);

    int main() {
        initGraphics(BOGGLE_WINDOW_WIDTH, BOGGLE_WINDOW_HEIGHT);
        welcome();
        giveInstructions();
        string custom = getLine("Type y to create custom board:" );
        Grid<char> gridData;
        if (custom=="y"){
            gridData = customBoard();
        } else {
            gridData = randomBoard();
            }
        drawAndFillBoard(gridData);
        Lexicon english("EnglishWords.dat");
        // Lexicon holds words previously encountered
        Lexicon previousWords;
        humansTurn(english, previousWords);
        return 0;
    }

    /*
     * Function: welcome
     * Usage: welcome();
     * -----------------
     * Print out a cheery welcome message.
     */

    void welcome() {
       cout << "Welcome!  You're about to play an intense game " << endl;
    }

    /*
     * Function: giveInstructions
     * Usage: giveInstructions();
     * --------------------------
     * Print out the instructions for the user.
     */

    void giveInstructions() {
       cout << endl;
       cout << "The boggle board is a grid onto which I ";
       cout << "or triple your paltry score." << endl << endl;
       cout << "Hit return when you're ready...";
       getLine();
    }

    static Grid<char> randomBoard(){
        Vector<string> standardCubes;
        for(int i = 0; i<16;i++){
            standardCubes.add(STANDARD_CUBES[i]);
        }
        // Shuffle cubes
        for (int i = 0; i < standardCubes.size(); i++) {
            int r = randomInteger(i, standardCubes.size()-1);
            if (i!=r){
                string stringToMove1 = standardCubes.get(i);
                string stringToMove2 = standardCubes.get(r);
                standardCubes.set(r, stringToMove1);
                standardCubes.set(i, stringToMove2);
            }
        }
        // Update grid with random side of cube
        Grid<char> gridData(4, 4);
        int counter = 0;
        for (int columnNo = 0; columnNo <4; columnNo++){
            for (int rowNo = 0; rowNo<4; rowNo++) {
                string s = standardCubes.get(counter);
                int r = randomInteger(0, 5);
                gridData[columnNo][rowNo] = s[r];
                counter++;
            }
        }
        return gridData;
    }

    static Grid<char> customBoard(){
        Grid<char> gridData(4,4);
        string s = getLine("Please enter 16 characters to make up the custom board. Characters will fill the board left to right, top to bottom: ");
        for (int i = 0; i < s.length(); i++) {
            s[i] = toupper(s[i]);
        }
        if (s.length()<16){
            cout << "String has to be 16 characters long, try again" << endl;
            customBoard();
        }
        int i =0;
        for (int columnNo = 0; columnNo <4; columnNo++){
            for (int rowNo = 0; rowNo<4; rowNo++) {
                gridData[columnNo][rowNo] = s[i];
                i++;
            }
        }

        return gridData;
    }

    static void drawAndFillBoard(Grid<char> gridData){
        drawBoard(4, 4);
        for (int columnNo = 0; columnNo <4; columnNo++){
            for (int rowNo = 0; rowNo<4; rowNo++) {
                labelCube(rowNo, columnNo, gridData[rowNo][columnNo]);
            }
        }
    }

    static void humansTurn(Lexicon englishWords, Lexicon &previousWords){
        /*
         Human’s turn (except for finding words on the board). Write the loop that allows the user to enter words. Reject words that have already been entered or that don’t meet the minimum word length or that aren’t in the lexicon. Use the gboggle functions to add words to the graphical display and keep score.
         */

        string humanGuess = getLine("Please enter your guess: ");
        for (int i = 0; i < humanGuess.length(); i++) {
            humanGuess[i] = tolower(humanGuess[i]);
        }
        if (humanGuess.length()<4){
            cout << "Min guess length is four characters" << endl;
            humansTurn(englishWords, previousWords);
        }
        if (!englishWords.contains(humanGuess)) {
            cout << "That word is not English, please try another word" << endl;
            humansTurn(englishWords, previousWords);
        }
        if (previousWords.contains(humanGuess)){
            cout << "That word has already been guessed, please try another word" << endl;
            humansTurn(englishWords, previousWords);
        }
        // check if word can be made using data on board

    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T11:24:52.143

您的函数 humanTurn 定义与声明具有不同的签名

函数声明：

```
static void humansTurn(Lexicon,Lexicon); 
```

函数定义：

```
static void humansTurn(Lexicon englishWords, Lexicon &previousWords) 
                                                     ^^
                                                     //Here 
```

# qt - qt如何存储mdi子窗口（在哪里调用析构函数）

> ID：14546836
> 
> 赞同：1
> 
> 时间：2013-01-27T11:23:29.333
> 
> 标签：qt, window, mdichild

我根据网上找到的教程创建了一个简单的 MDI 父子应用程序。QMainWindow 有一个指向子窗口的指针。以下代码与适当的连接功能捆绑在一起。

main_window.h 文件

```
公共插槽：
    无效 openChildWindow();
私人的：
    ui::主窗口 *ui;
    子窗口 *子窗口；

```

main_window.cpp 文件

```
无效的 MainWindow::openChildWindow()
{
   childWindow = new ChildWindow(ui->mdiArea); // 一定要在某个地方销毁你的窗口
   childWindow->resize(400, 320);
   childWindow->show();
}

```

我的问题是**将 mdi 子窗口存储在 mdi 父级中的最佳方法是什么**？它应该是指向子窗口的指针列表吗？

使用当前的实现，我可以同时创建和关闭许多 mdi 子窗口，但有时它们在关闭后会留下阴影（例如，当我最小化和最大化子窗口时）。难道是我忘记在某个地方调用 mdi 子析构函数了吗？目前只有：

```
ChildWindow::~ChildWindow()
{
    删除用户界面；
    std::cout << "我死了！" << std::endl;
}

```

但我不会在任何地方手动调用它。当整个 Qt 程序终止时，我可以在 Qt Creator 控制台中看到“我死了”（但它应该在我关闭子窗口时出现）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:21:33.143

无需存储指向 MDI 子窗口的指针列表；此功能已由[`QMdiArea::subWindowList`](http://doc.qt.digia.com/qt/qmdiarea.html#subWindowList).

关于另一个问题，我建议`WA_DeleteOnClose`为子窗口 ( `subWindow->setAttribute(WA_DeleteOnClose);`) 设置属性，这将确保子窗口的析构函数在关闭时被调用。如果这不能解决问题，我建议为此创建一个单独的问题。

# c++ - 填充用于 SendInput 的 HARDWAREINPUT 结构的正确方法是什么？

> ID：14546839
> 
> 赞同：-1
> 
> 时间：2013-01-27T11:23:56.557
> 
> 标签：c++, winapi, keyboard, hardware, sendinput

我正在尝试将 WM_KEYDOWN/WM_KEYUP 对发送到通常不响应 KEYBDINPUT 结构的使用的应用程序。我需要发送转义键以及字母数字字符。由于 MSDN 仅提供有关使用硬件结构的模糊信息，我只能假设 uMsg 字段用于保存 WM_KEYDOWN/WM_KEYUP 消息，接下来的两个字段用于 lParam 的 LOWORD 和 HIWORD（由几个位组成定义扫描码，密钥是否“重复”，等等）。

但是在围绕这些值进行了几个小时的调整之后，我完全不知道如何正确模拟硬件击键。我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:22:10.013

您根本不应该使用 HARDWAREINPUT。要模拟键盘输入，您*必须*使用 INPUT.type = INPUT_KEYBOARD 并设置 INPUT.ki 成员。INPUT_HARDWARE 选项是为鼠标或键盘以外的*输入*设备保留的。

如果应用程序没有响应此输入，那么下一个可能的问题是您有焦点问题。SendInput() 只能在应用程序的窗口位于前台并且应用程序中需要输入的子窗口具有焦点时起作用。这可能很难实现。键入键的另一种方法是使用 SendMessage 将 WM_CHAR 消息直接发送到应该接收它们的窗口。这也避免了处理活动键盘布局和修改键（Alt、Shift、Ctrl）状态的相当大的困难。您现在遇到的一个新问题是检索正确的窗口句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:38:15.337

原来我没有正确实现 KEYBDINPUT，并且在一次调用 SendInput 时也将每个击键发送出去。以下似乎适用于我的目标应用程序中的标准和扩展虚拟键：

```
VOID SimulateKeystroke(USHORT vk, BOOL bExtended)
{
    INPUT input = {0};

    if(bExtended) input.ki.dwFlags = KEYEVENTF_EXTENDEDKEY;
    input.ki.wVk  = vk;  
    input.type = INPUT_KEYBOARD;
    SendInput(1, &input, sizeof(input));

    ZeroMemory(&input, sizeof(INPUT));
    input.ki.dwFlags  =  KEYEVENTF_KEYUP;
    if( bExtended ) input.ki.dwFlags |= KEYEVENTF_EXTENDEDKEY;

    input.ki.wVk = vk;
    input.type = INPUT_KEYBOARD;
    SendInput(1, &input, sizeof(input));
} 
```

# linux - linux上的进程，fork值除以零

> ID：14546840
> 
> 赞同：2
> 
> 时间：2013-01-27T11:24:04.567
> 
> 标签：linux, fork

```
main()
{
    printf( "%d\n" , 1/fork() );
} 
```

通过运行这个应用程序，我的输出是：0。

我知道父 fork 的值为 number ，而 Son 的值为 0。

那么，为什么除以 1/0 没有任何问题呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T11:35:07.373

实际上，确实会发生 1/0 算术异常，但它只是不会在控制台中打印出来。

将核心文件大小设置为无限制，您将看到核心文件

```
$ ulimit -c unlimited 
```

并使用 gdb 你可以看到算术异常

```
$ gdb a.out core 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:47:23.420

编译器正在将您的代码转换为更基本的步骤

（您可以将`-fdump-tree-all`选项传递给 GCC，或使用[MELT](http://gcc-melt.org/)图形[探针](http://gcc-melt.org/index.html#probe_id)查看一些中间 GCC 表示）

所以基本上编译器正在将你的代码转换成类似的东西

```
 int main()
 {
   int t1 = fork();
   int t2 = 1 / t1;
   printf("%d\n", t2);
 } 
```

因此，如果`t1`gets `0`（在子进程中），分配给`t2`是一个未定义的行为，通常会因除以零而崩溃（即`SIGFPE`异步信号），并且`printf`不会达到。

可能，在[PowerPC](http://en.wikipedia.org/wiki/Powerpc)处理器上，您可以除以零而不会崩溃，行为（仍然未定义）会有所不同。

顺便说一句，您应该运行您的程序`strace -f`以了解涉及哪些系统调用和信号。

# spring - Spring InitializingBean 接口

> ID：14546843
> 
> 赞同：0
> 
> 时间：2013-01-27T11:24:33.327
> 
> 标签：spring, spring-ioc

在 spring 的 XML 文件中，我们有两个 id 不同但类相同的 bean。它们具有相同的属性。现在我有 InitializingBean 接口，并且在[afterPropertySet()](http://srcrr.com/java/spring/3.1.0/reference/org/springframework/beans/factory/InitializingBean.html#afterPropertiesSet%28%29)中我只是打印属性的值。

它为我打印两次值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:02:52.340

根据[Spring 文档](http://srcrr.com/java/spring/3.1.0/reference/org/springframework/beans/factory/InitializingBean.html)：

> [后属性集（）](http://srcrr.com/java/spring/3.1.0/reference/org/springframework/beans/factory/InitializingBean.html#afterPropertiesSet%28%29)
> 
> 在设置所有提供的 bean 属性（并满足 BeanFactoryAware 和 ApplicationContextAware）后由 BeanFactory 调用。

所以你的问题的简短回答是：**是的**

Spring 不操作类或对象。Spring 操作[Bean Entity](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-definition)。它是 Spring IOC 操作的最简单的对象。Bean 有 Spring 引入的额外行为规则。

例如，如果您使用 Singleton 范围创建两个 bean 而不是 Lazy 初始化，则 Spring 会创建您的类的两个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-18T15:34:13.517

可能您正在调用这个类，同时调用一个测试或像这样启动一个集成测试。检查断点，如果您使用的是 SpringRunner，请尝试模拟组件

# c++ - 指向实现模式的指针

> ID：14546845
> 
> 赞同：0
> 
> 时间：2013-01-27T11:25:04.143
> 
> 标签：c++, templates, c++11

我正在尝试使用模板类实现指向实现模式的指针，并且为了制作独立的类及其实现，我使用了下一种方法：

```
template<typename T>
struct __A_impl;

template<typename T>
struct A
{
    using __impl_t = __A_impl<T>;

    A(__impl_t* t);

    __impl_t* _t;
};

template<typename T>
struct B
{
    T _t;
};

template<typename T>
using __A_impl = B<T>; 
```

使用这种形式，如果我想更改“B”的名称，这不会以任何方式影响 A 的定义。但是，我收到 gcc 的下一个错误：

```
test.cpp:21:22: error: declaration of template 'template<class T> using __A_impl =    B<T>'
test.cpp:2:7: error: conflicts with previous declaration 'template<class T> class __A_impl'
test.cpp:21:22: error: redeclaration of 'template<class T> using __A_impl = B<T>'
test.cpp:2:7: note: previous declaration 'template<class T> class __A_impl' 
```

我怎样才能做到这一点？因为使用`typedef`声明符是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:30:31.017

您不能转发声明 typedef。您只能转发声明类/结构/枚举。

此外，PIMPL 通常用于防止编译器看到实现，但在你的情况下，这永远不会发生，因为它是一个模板，所以我不明白这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:28:15.853

好吧，这编译，虽然它可能不是你想要的：

```
template<typename T>
struct B
{
    T _t;
};

template<typename T>
using __A_impl = B<T>;

template<typename T>
struct A
{
    using __impl_t = __A_impl<T>;

    A(__impl_t* t);

    __impl_t* _t;
}; 
```

总之，有两点：

1.  为什么不直接使用`std::unique_ptr`？
2.  双下划线保留用于实现。不要使用它们。

# php - 文件和文件夹属性 - 编程 API

> ID：14546850
> 
> 赞同：2
> 
> 时间：2013-01-27T11:25:25.550
> 
> 标签：php, file, operating-system, directory, file-recovery

我知道 PHP 能够通过不同的方式读取文件内容，例如：fread、file_get_contents、file、readfile 等。

目前，我正在寻找一个可以读取特定分区或文件夹中文件和文件夹的真实索引的API，例如：windows中的驱动器d：\包含三个文件夹（文件夹1，文件夹2，文件夹3），每个文件夹都包含一些文件，我们可以使用 PHP（opendir、scandir、readdir 等）获取这些目录结构并根据需要列出它们，但是，Windows 在硬盘中保存文件和文件夹名称及其属性（大小、上次修改时间、创建时间等） .

如何使用 PHP 读取硬盘并检索特定路径的所有文件和文件夹属性？例如，如果我们考虑上次修改时间，我们可以使用 (filemtime()) 函数，但是这个属性没有保存在文件中，它保存在硬盘驱动器内的其他位置，其他属性也保存在文件内的其他位置。

当 windows 用户将文件从闪存驱动器复制到本地硬盘时，windows 将复制所有文件和文件夹属性并将它们保存在本地硬盘驱动器中。当使用 PHP 复制文件时，它依赖于操作系统来处理这项工作，它不是对文件和文件夹操作的原生支持（我认为）。

你有什么主意吗？有许多恢复程序使用这种技术来读取硬盘索引，但是，对于 PHP：我找不到这个问题的任何来源。

如果我得到正确答案的应用程序：我可以检查此类文件是否已从我的硬盘驱动器中安全删除？我可以使用 PHP 创建安全删除应用程序，或清除给定文件的硬盘索引。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:25:02.343

# 提案的问题

文件的属性，例如时间戳、权限标志等，存储在文件系统（FAT、NTFS、Ext3 等）中。正如您所说，其中一些可以使用 PHP 的不同文件和目录方法读取，但它们都通过 OS 文件系统抽象起作用，并且无法访问磁盘上的块级信息，例如磁盘上存储存档标志的精确字节对于文件 X。操作系统和 FS 的重点是从用户/客户端程序中抽象出这些信息。

正如所建议的那样，有一些用 c 或类似语言编写的外部工具确实具有此访问权限，并且您可以从 PHP 内部调用。如果您想要一种“本机”PHP 方式来执行此操作，则必须为 PHP 编译 ac 扩展，以向您公开这些低级函数。

如果您想坚持使用 PHP，我会说外部工具是可行的方法，但对于手头的任务，就我们从您的描述中可以看出，我会选择另一种具有更低级别访问权限的语言。像 C 或 C++。PHP 是用于 HTML 预处理的高级语言，因此对于低级系统编程来说是一个糟糕的选择。

# 实用建议

查看 PHP 文档和各种第三方库后：

PHP 不存在用于在文件分配表级别读取文件系统信息的现成解决方案。您获得的最低级别是[fstat()](http://us.php.net/manual/en/function.fstat.php)函数，这对于您想要的不是很远。

## 外部工具

无论您到底想做什么，都可能有一个小的二进制文件可以做到。正如其他地方所建议的，PHP 可以通过 exec() 函数与这些程序集成。这对您来说可能是最简单的方法，除非您有大量的时间和/或开发资源来解决这个问题。

## 包装一个库

有一些[库](http://elm-chan.org/fsw/ff/00index_e.html)可以为您解决这个问题，它们是用低级语言编写的。[可以使用 SWIG 包装](http://www.swig.org/Doc1.3/Php.html)一个开源库，以将其公开给 PHP。这将使您可以访问所需的低级方法，但这是一项非常重要的任务。这类库通常还需要在设备上工作时单独访问设备，这在大多数正常操作环境中很难实现。

另请注意，您可能需要每个文件系统都有一个库。Microsoft 对 FAT12/16/32 的 VFAT 扩展需要许可证才能使用。因此，如果您想使用 FAT 并拥有长名称（不是 8.3 格式）的文件，您将不得不花一些钱才能合法。

## 低级实现

最后一个中间立场是编写您自己的 CLI 工具，该工具使用外部库来访问低级 FS 函数。然后，您可以使用 PHP 内部的 exec() 与您自己的实现进行交互。

如果您找不到解决问题的现有工具并且您不愿意花时间包装库，这可能是一条合理的路径。

# 结束时

你给出了一个非常狭窄的问题描述，几乎没有关于应用程序的内容。更广泛的讨论（在另一个论坛中）可能会产生更好的结果，因为问题可能会以另一种方式更好地解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:04:21.310

我在 PHP.net 上发现了一些似乎可以满足您要求的东西：

[http://php.net/manual/en/function.readdir.php#103418](http://php.net/manual/en/function.readdir.php#103418)

**编辑：**我误解了这个问题。最后修改时间、最后访问日期等属性存储在文件系统主文件表中。据我所知，这不能通过 PHP 访问，如果您要编写自己的方法来执行此操作，那么您还必须考虑不同的文件系统，因为它们都处理这些属性的存储在它们的自己独特的方式。

如果不为 PHP 本身编写某种形式的扩展，那么使用 PHP 可能无法获得您正在寻找的所有信息。

**编辑2：**在研究更多...

[http://php.net/manual/en/function.fileinode.php](http://php.net/manual/en/function.fileinode.php)

这个函数可能是一个有趣的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T21:29:03.713

好吧，如果我理解正确，您只想安全地删除文件。你可以调用 [shred][1]

[1]： http: [//linux.die.net/man/1/shred](http://linux.die.net/man/1/shred)通过系统或 exec，如果你在 linux 上，你很高兴

# java - Spring MVC @ModelAttribute 不包含提交的表单结果

> ID：14546851
> 
> 赞同：4
> 
> 时间：2013-01-27T11:25:27.767
> 
> 标签：java, spring-mvc, thymeleaf

我在使用 Thymeleaf 和 Spring-MVC 处理表单时遇到问题。这是我的看法：

```
<html xmlns:th="http://www.thymeleaf.org">
    <head>
    </head>
    <body>
        <div class="container" id="containerFragment" th:fragment="containerFragment">
            <form
                action="#"
                th:action="@{/search}"
                th:object="${searchInfo}"
                method="post" >
                <fieldset id="search-query">
                    <input
                        type="text"
                        name="search"
                        value=""
                        id="search"
                        placeholder="Search for user"
                        required="required"
                        th:value="*{searchQuery}" />
                    <input
                        type="submit"
                        value="Search"
                        name="submit"
                        class="submit"/>
                </fieldset>
            </form>
        </div>
    </body>
</html> 
```

这是我的控制器：

```
/** Search form */
@RequestMapping(value = "/search", method = RequestMethod.GET)
public String search(Model model) {
    model.addAttribute("searchInfo", new SearchForm());
    return "search";
}

/** Search form */
@RequestMapping(value = "/search", method = RequestMethod.POST)
public ModelAndView search(BindingResult result,
        @Valid @ModelAttribute("searchInfo") SearchForm searchForm) {

    String login = searchForm.getSearchQuery();
    User user = userService.findUserByLogin(login);

    ModelAndView modelAndView = new ModelAndView();
    modelAndView.setViewName("search-results");
    modelAndView.addObject("user", user);

    return modelAndView;
} 
```

搜索表格是：

```
public class SearchForm {

    String searchQuery;

    public String getSearchQuery() {
        return searchQuery;
    }

    public void setSearchQuery(String searchQuery) {
        this.searchQuery = searchQuery;
    }

    @Override
    public String toString() {
        return "SearchForm [searchQuery=" + searchQuery + "]";
    }
} 
```

问题是在控制器的这一点登录为空：

```
String login = searchForm.getSearchQuery(); 
```

它看起来像是为 POST 方法创建的一个新 SearchForm 对象，但已经有一个，它是在 GET 步骤创建的，应该包含搜索查询。我无法理解这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:19:28.850

Spring 应该将 HTML 表单属性映射到您的模型：**SearchForm**。

Spring MVC 使用请求参数和模型对象属性构建手风琴，并在将对象传递到控制器方法之前将匹配属性设置到模型对象中。

您将 HTML 属性（并自动请求参数名称）命名为 id="search"。但是 SearchForm 没有这样的属性。相反，它具有 searchQuery[属性](http://docs.oracle.com/javase/tutorial/javabeans/writing/properties.html)。因此，在 Spring MVC 无法将 searchQuery 值设置到您的 SearchForm 之后，它会传递具有*null*属性的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T07:29:28.307

请将 th:value=" *{searchQuery}" 更改为 th:field="* {searchQuery}"。

我希望它会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-20T04:36:38.820

它对我有用：

FormTestController.java

```
@Controller
public class FormTestController {

    @RequestMapping(value = "/form-test-1.jhtml", method = RequestMethod.GET)
    public String formTest1(@ModelAttribute("form1") Form1TestVO form1TestVO, Model model){
        System.out.println("You've submited: " + form1TestVO.getName())
        model.addAttribute("form1", new Form1TestVO("Form 1 test"));
        return "form-test-1";
    }

} 
```

form-test-1.html

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.thymeleaf.org" >
<head>
    <title>Form test 1</title>
</head>
<body >

    <form th:object="${form1}" th:action="@{/form-test-1.jhtml}" >
        <input  th:field="*{name}" />
        <button>Send</button>
    </form>

</body>
</html> 
```

Form1TestVO

```
public class Form1TestVO {
    private String name;

    public Form1TestVO() {
    }

    public Form1TestVO(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

[参考](https://spring.io/guides/gs/handling-form-submission/)

# asp.net - 为什么 ItemCommand 没有在 My Repeater 上触发

> ID：14546853
> 
> 赞同：0
> 
> 时间：2013-01-27T11:26:08.803
> 
> 标签：asp.net, repeater, asprepeater

请任何人都可以查看我的代码并告诉我 itemCommand 在按钮单击时没有被触发的原因是什么。

```
<div class="">
        <asp:Repeater ID="Repeater" runat="server" OnItemDataBound="Repeater_ItemDataBound" OnItemCommand="Repeater_ItemCommand">
            <HeaderTemplate>
              <div id="header" style="background-color:red">

              </div>
            </HeaderTemplate>

            <ItemTemplate>
             <div class="bms-car-item">
              <div >
                 <image style="width:80px;height:60px" src="http://img2.netcarshow.com/Volkswagen-Golf_R32_2005_800x600_wallpaper_01.jpg"></image>
              </div>
              <div>
                  Car Type : <b>  <%# DataBinder.Eval(Container.DataItem, "VehicleGroup") %> class or Similar </b>
              </div>
              <div>
                  Car Group: <b> <%# DataBinder.Eval(Container.DataItem, "SupplierGroup") %></b>
              </div>
              <div>
                  Properties: 
                  <cp:CarProperties ID="CarPropertiesControl" runat="server" />
              </div>
              <div>
                  Price Before Voucher: <%# DataBinder.Eval(Container.DataItem, "PriceCust.Price") %> <%# DataBinder.Eval(Container.DataItem, "PriceCust.Currency") %>
              </div>
              <div>
                  Price per Rent:<b class="PricePlaceHolder"> <%# DataBinder.Eval(Container.DataItem, "PriceCust.Price") %> <%# DataBinder.Eval(Container.DataItem, "PriceCust.Currency") %></b>
              </div>

                 <div>
                     <a href="#" onclick="return ShowTerms()" >Additional Info</a>
                     <a href="#">Options Included in Price</a>
                 </div>
                 <asp:HiddenField ID="Selected" runat="server" value='<%# DataBinder.Eval(Container.DataItem, "VehicleModelCode") %>'></asp:HiddenField>
            </div>
            <div> <asp:Button Text="Select" ID="SelectButtonNext" CommandName="Get" runat="server" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "VehicleModelCode") %>' /></div>
            </ItemTemplate>
        </asp:Repeater>
    </div> 
```

以及类后面的相关代码

```
 protected void Page_Load(object sender, EventArgs e)
    {

            var state = SessionManager.GetReservationState();
            //Load All Car Groups    
            if (!Page.IsPostBack)
            {
                LoadCurrencies();

                LoadModels(state);

            }
            else
            {
                Repeater.DataBind();
            }

    }

    private void LoadModels(BmsReservationHelper state)
    {
        if (state != null)
        {

            var carModels = BmsFascade.BmsFascade.GetCarsAndPrices(state.PickUpLocationCode.Trim(), state.PickUpTime.ToString(), state.ReturnTime.ToString(), "", "", "", "");
            // TODO: Check what to do if BMS returning 0 cars avaliable ...

            this.Repeater.DataSource = carModels.VehicleModels;

            this.Repeater.DataBind();

            var groups = carModels.VehicleModels.GroupBy(m => m.SupplierGroup).Select(m => m.FirstOrDefault());
            foreach (var g in groups)
            {
                this.CarGroupsFilter.Items.Add(new ListItem(g.SupplierGroup, g.SupplierGroup));
            }

        }
    }

    private void LoadCurrencies()
    {
        this.CurrencyList.Items.Clear();

        // Load All Currencies 
        var list = BmsFascade.BmsFascade.GetCurrencies();
        foreach (var currencyPipe in list.ReturnValues)
        {
            string[] values = currencyPipe.Split('|');
            this.CurrencyList.Items.Add(new ListItem(values[1], values[0]));
        }
    }

    protected void Repeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        // Bind Car properties strip to the repeater control
        if (e.Item.DataItem != null)
        {
            var model = e.Item.DataItem as BMSEntities.VehicleModelsBatchVehicleModel;

            if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
            {
                // Trying to rebing command properties here ... no luck :-(
                Button myButton = (Button)e.Item.FindControl("SelectButton");

                myButton.CommandName = "Get";
                myButton.CommandArgument = model.VehicleGroup;
            }      

            BMS_BmsCarProperties_BmsCarProperties carProps = e.Item.FindControl("CarPropertiesControl") as BMS_BmsCarProperties_BmsCarProperties;
            if (carProps != null)
            {

               // model.VehicleModelInfo.
                carProps.LoadDataInfo(model);
            }     
        }

    }
    protected void Repeater_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        var x = e.CommandArgument;
        Response.Write("fdsljknalsjndflkjasndflkjansdlkfjnasldkjnf");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:13:06.390

问题出在基本页面中...整个页面的 DataBind() 被调用而没有！ISPosback。

# ios - 如何创建滚动视图分页，每页包含来自 plist/nsdictionary 的 4 个图像

> ID：14546854
> 
> 赞同：0
> 
> 时间：2013-01-27T11:26:13.353
> 
> 标签：ios, pagination, imageview, scrollview

我需要制作一个使用带有 pagecontrol 的滚动视图来查看图片库的应用程序，每个页面包含大约 4 张图片，并且图片是从 plist 或 nsdictionary 加载的，例如它在 appstore 中看起来像“WallpapersHD”。

这个例子：

```
 ________      ________                  ________      ________ 
|        |    |        |                |        |    |        |  
|        |    |        |                |        |    |        |
|        |    |        |                |        |    |        |
|        |    |        |                |        |    |        |
|________|    |________|                |________|    |________|
 ________      ________    ==SWIPE==>    ________
|        |    |        |                |        |
|        |    |        |                |        |
|        |    |        |                |        |
|        |    |        |                |        |
|________|    |________|                |________|

        First Pge                             Second Page 
```

我真的不知道如何开始，如何使 imageview 依赖于 plist 文件上的 imageurl 数据。

正如您在第一页中看到的那样，有四个图像视图，但在第二页中只有三个图像视图，因为 plist 中的数据只有七个 imageurl .. 所以我需要您的帮助才能在 ios 中进行分页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:17:44.060

[MGGridView](https://github.com/gmoledina/GMGridView)是您所需要的。还有一个带有代码的示例应用程序

祝你好运

# r - 在条形图中组合 scale_fill_manual 和 scale_x_discrete 时缺少图例

> ID：14546858
> 
> 赞同：2
> 
> 时间：2013-01-27T11:26:23.610
> 
> 标签：r, ggplot2

以下使用 ggplot 不产生图例。我想要一个标识条形图颜色的图例：

```
df1 <- data.frame(Response = factor(c(1,1,2,2,3,3,4,4)),
                  treatment = factor(c("Active",  "Placebo", "Active",
                  "Placebo", "Active","Placebo","Active","Placebo"),
                                       levels=c("Active","Placebo")),
              percent = c(16.81, 13.53, 17.42, 16.24, 25.33, 19.27,
                          100-16.81-17.42-25.33,100-13.53-16.24-19.25))

# Bar graph, with side-by-side bars
ggplot(data=df1, aes(x=Response, y=percent, fill=treatment, order=treatment)) + 
  geom_bar(stat="identity", position=position_dodge()) + 
  ylab("Percent") + xlab("Outcome") +
  scale_x_discrete(breaks=factor(1:4), labels=c("CR","PR","SD","PD"))+
  scale_fill_manual(values=c("black","red", name="Response", 
                breaks=1:2, labels=c("Active","Placebo")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T11:47:54.480

`scale_fill_manual`除了最后一部分，你已经得到了一切。出问题的部分是`breaks=1:2`。但这不是真的，因为您已经设置`fill=treatment`了这意味着中断设置为`levels of treatment`. 所以，如果你要设置`breaks`，它应该是例如，`breaks=levels(factor(df1$treatment))`（这是多余的）。当然，您可以将标签更改为任何值。例如：

为了不删除图例，您可以做的是：

```
# No issues changing values of labels for every breaks set
scale_fill_manual(values=c("black","red"), name = "Response",
      breaks = levels(factor(df1$treatment)), 
      labels = c("bla1", "bla2")) 
```

但是，如果您想使用`labels`设置为 的相同值，这就足够了`breaks`：

```
scale_fill_manual(values=c("black","red"), name = "Response") 
```

这是整个代码：

```
p <- ggplot(data = df1, aes(x = Response, y = percent, fill = treatment, 
            order = treatment))
p <- p + geom_bar(stat = "identity", position = position_dodge()) 
p <- p + ylab("Percent") + xlab("Outcome")
p <- p + scale_x_discrete(breaks=factor(1:4), labels=c("CR","PR","SD","PD"))
p <- p + scale_fill_manual(values=c("black","red"), name = "Response", 
         labels = c("Active", "Placebo")) 
# although labels is redundant if you aren't changing its value
p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:51:36.883

```
ggplot(data=df1, aes(x=Response, y=percent, fill=treatment, order=treatment)) + 
  geom_bar(stat="identity", position=position_dodge()) + 
  ylab("Percent") + xlab("Outcome") +
  scale_x_discrete(breaks=factor(1:4), labels=c("CR","PR","SD","PD")) +
  scale_fill_manual(values=c("black","red")) 
```

![在此处输入图像描述](../Images/00c35bdfef2056ff0077207c3e092e56.png)

# php - MongoDB远程连接php

> ID：14546860
> 
> 赞同：0
> 
> 时间：2013-01-27T11:26:26.760
> 
> 标签：php, mongodb

出于好奇，部署了一个快速的云服务器只是为了托管一个 MongoDB 来修补它。它已安装并且可以工作。像这样制作了一个测试数据库/表：

```
 db.items.insert({ name: 'eggs', quantity: 10, price: 1.50 })
 db.items.insert({ name: 'bacon', quantity: 3, price: 3.50 })
 db.items.insert({ name: 'tomatoes', quantity: 30, price: 0.50 }) 
```

当我运行`db.items.find({})`所有项目时，一切都很好。

现在在 PHP 中，当我从另一台服务器连接到该数据库时，我会这样做：

```
 // open connection to MongoDB server
  $conn = new Mongo('mongodb://theAdmin:Gold1234@165.225.130.252:27017');

  // access database
  $db = $conn->test;

  // access collection
  $collection = $db->items;

  // execute query
  // retrieve all documents
  $cursor = $collection->find();

  // iterate through the result set
  // print each document
  echo $cursor->count() . ' document(s) found. <br/>';  
  foreach ($cursor as $obj) {
    echo 'Name: ' . $obj['name'] . '<br/>';
    echo 'Quantity: ' . $obj['quantity'] . '<br/>';
    echo 'Price: ' . $obj['price'] . '<br/>';
    echo '<br/>';
  } 
```

我得到这个错误：

> 致命错误：/home/moosex/public_html/info.php:4 中的未捕获异常“MongoConnectionException”和消息“无法连接到：165.225.130.252:27017：传输端点未连接”堆栈跟踪：#0 /home/moosex /public_html/info.php(4): Mongo->__construct('mongodb://[theA...') #1 {main} 在第 4 行的 /home/moosex/public_html/info.php 中抛出

我已经查找并尝试了几种不同的连接方式，但仍然无法获得它。我应该如何远程连接？

顺便说一句，那是该服务器的实际用户名密码和地址（那里除了鸡蛋培根和西红柿外什么都没有），如果你能连接到它，上帝保佑你哈哈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:59:30.673

为了能够像这样调试“随机怪异”，打开内部驱动程序日志记录非常有用。驱动程序在幕后做了很多事情，并且可以吐出各种重要的调试信息。

在脚本顶部添加以下内容：

```
<?php
MongoLog::setLevel(MongoLog::ALL);
MongoLog::setModule(MongoLog::ALL);
?> 
```

默认情况下，记录器会输出“php 错误消息”（E_NOTICE/E_WARNING），如果您启用了 error_log，请确保检查该文件以获取结果。

对于您的（稍作修改的）连接字符串，我得到以下结果

```
Notice: PARSE   INFO: Parsing mongodb://theAdmin:Gold1234@localhost:27027 in Command line code on line 1
Notice: PARSE   INFO: - Found user 'theAdmin' and a password in Command line code on line 1
Notice: PARSE   INFO: - Found node: localhost:27027 in Command line code on line 1
Notice: PARSE   INFO: - Connection type: STANDALONE in Command line code on line 1
Notice: PARSE   INFO: - No database name found for an authenticated connection. Using 'admin' as default database in Command line code on line 1
Notice: CON     INFO: mongo_get_read_write_connection: finding a STANDALONE connection in Command line code on line 1
Notice: CON     INFO: connection_create: creating new connection for localhost:27027 in Command line code on line 1
Notice: CON     WARN: connection_create: error while creating connection for localhost:27027: Invalid argument in Command line code on line 1
Notice: CON     WARN: Couldn't connect to 'localhost:27027': Invalid argument in Command line code on line 1 
```

我怀疑两端都有防火墙问题。你可以使用 mongo shell 连接到服务器吗？

# python - Python找到最接近的匹配句子

> ID：14546862
> 
> 赞同：3
> 
> 时间：2013-01-27T11:26:32.293
> 
> 标签：python

我正在尝试从专辑中获取曲目（歌曲）列表，对于给定的曲目，我想获得所有匹配的曲目。我已经提到了下面的示例，关于如何在 python 中进行此操作的任何想法？似乎 difflib.get_close_matches 只适用于单个单词而不是一个句子。

示例：（查找包含字符串“环游世界”的任何内容

```
tracks = ['Around The World (La La La La La) (Radio Version)', 'Around The World (La La La La La) (Alternative Radio Version)', 'Around The World (La La La La La) (Acoustic Mix)', 'Around The World (La La La La La) (Rucegsegger#Wittwer Club Mix)', 'World In Motion','My Heart Beats Like A Drum (Dam Dam Dam)','Thinking Of You','Why Oh Why','Mistake No. 2','With You','Love Is Blind','Lonesome Suite','Let Me Come & Let Me Go'] 
```

输出：

```
 Around The World (La La La La La) (Radio Version)
 Around The World (La La La La La) (Alternative Radio Version)
 Around The World (La La La La La) (Acoustic Mix)
 Around The World (La La La La La) (Rüegsegger#Wittwer Club Mix) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T11:37:44.647

`difflib.get_close_matches`可以使用字符串（除了单个单词）。在这种情况下，您需要降低截止值（默认值为 0.6），并提高`n`最大匹配数：

```
In [19]: import difflib

In [20]: tracks = ['Around The World (La La La La La) (Radio Version)', 'Around The World (La La La La La) (Alternative Radio Version)', 'Around The World (La La La La La) (Acoustic Mix)', 'Around The World (La La La La La) (Rucegsegger#Wittwer Club Mix)', 'World In Motion','My Heart Beats Like A Drum (Dam Dam Dam)','Thinking Of You','Why Oh Why','Mistake No. 2','With You','Love Is Blind','Lonesome Suite','Let Me Come & Let Me Go']

In [21]: difflib.get_close_matches('Around the world', tracks, n = 4,cutoff = 0.3)
Out[21]: 
['Around The World (La La La La La) (Acoustic Mix)',
 'Around The World (La La La La La) (Radio Version)',
 'Around The World (La La La La La) (Alternative Radio Version)',
 'Around The World (La La La La La) (Rucegsegger#Wittwer Club Mix)'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T11:33:39.720

```
filter(lambda x: 'Around The World' in x, tracks) 
```

这将为您提供名称中包含的歌曲列表`'Around The World'`。如果您使用的是 Python 3，请将其转换为列表 ( `list(filter(...))`)，因为它返回一个`filter`对象。

如果有错别字，那我帮不了你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T11:40:46.440

为此，您可以利用[SequenceMatcher](http://docs.python.org/2/library/difflib.html#difflib.SequenceMatcher)的[get_matching_blocks](http://docs.python.org/2/library/difflib.html#difflib.SequenceMatcher.get_matching_blocks)

```
>>> from pprint import PrettyPrinter
>>> from difflib import SequenceMatcher
>>> pp = PrettyPrinter(indent = 4)
>>> pp.pprint(tracks)
[   'World In Motion',
    'With You',
    'Why Oh Why',
    'Thinking Of You',
    'My Heart Beats Like A Drum (Dam Dam Dam)',
    'Mistake No. 2',
    'Love Is Blind',
    'Lonesome Suite',
    'Let Me Come & Let Me Go',
    'Around The World (La La La La La) (Rucegsegger#Wittwer Club Mix)',
    'Around The World (La La La La La) (Radio Version)',
    'Around The World (La La La La La) (Alternative Radio Version)',
    'Around The World (La La La La La) (Acoustic Mix)']
>>> seq = ((e, SequenceMatcher(None, 'Around the world', e).get_matching_blocks()[0]) for e in tracks)
>>> seq = [k for k, _ in sorted(seq, key = lambda e:e[-1].size, reverse = True)]
>>> pp.pprint(seq)
[   'Around The World (La La La La La) (Rucegsegger#Wittwer Club Mix)',
    'Around The World (La La La La La) (Radio Version)',
    'Around The World (La La La La La) (Alternative Radio Version)',
    'Around The World (La La La La La) (Acoustic Mix)',
    'World In Motion',
    'With You',
    'Thinking Of You',
    'Why Oh Why',
    'My Heart Beats Like A Drum (Dam Dam Dam)',
    'Mistake No. 2',
    'Love Is Blind',
    'Lonesome Suite',
    'Let Me Come & Let Me Go']
>>> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-27T11:36:52.607

你可以这样做。

```
temp = "Around The World (La La La La La)"

for string in fh.readlines():
    if temp in string:
       print temp 
```

如果它与您正在阅读的任何文件中的温度相匹配，它将打印出来。

或者您可以使用正则表达式进行匹配。

# ruby - Mongoid DateTime：什么是正确的日期？

> ID：14546863
> 
> 赞同：0
> 
> 时间：2013-01-27T11:26:42.013
> 
> 标签：ruby, mongodb, mongoid

我正在使用 Mongoid 来存储 DateTime。但现在我对真正的日期感到困惑。在 mongodb 中，日期存储为：

```
{"2013-01-14T12:50:00.000Z"} 
```

但是当我打印该值时，它会说：

```
2013-01-14T19:50:00+07:00 
```

我真的不明白这些日期格式是否相同，在我当前的时区中哪一个是“正确的”？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:31:58.457

日期存储在 GMT 中，当“打印”时，它显示在您当地的时区（GMT+7？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:52:52.593

默认的 Ruby 日期对象应该能够及时处理偏移量：

[http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html)

在页面下方的某个地方，它甚至谈到了如何开始操纵它，我相信：

> 可选参数 offset 表示本地时间和 UTC 之间的差异。

我确实相信 mongoid 已经在为您转换时间，`T`从 iso 日期内的值提前 7 小时可以看出：

```
2013-01-14T19:50:00+07:00 
```

仅当您要打印日期和/或时间而不是包含偏移量的完整输出时，我毫不怀疑您将获得真实日期。

我相信即使应用了偏移量，mongoid 也很可能会打印偏移量，因为该偏移量存在（因为时间从 UTC 偏移了 7 小时），它只是没有进一步应用。

# mvvm - 带有淘汰赛的 Mvvm：数组绑定和更改内部对象状态

> ID：14546864
> 
> 赞同：0
> 
> 时间：2013-01-27T11:26:49.080
> 
> 标签：mvvm, knockout.js

我的视图模型中有一个数组。该数组的项是具有两个属性的 Person 对象。当我将它绑定到模板时，没关系。但是当我更改其中一个属性的状态时，它不会反映在 UI 中。

我做错什么了 ？

```
<script type="text/html" id="person-template">
    <p>Name: <span data-bind="text: name"></span></p>
    <p>
        Is On Facebook ?
        <input type="checkbox" data-bind="checked: IsOnFacebook" />
    </p>
</script>

<script type="text/javascript">
    var ppl = [
            { name: 'Pouyan', IsOnFacebook: ko.observable(true) },
            { name: 'Reza', IsOnFacebook: ko.observable(false) }
    ];
    function MyViewModel() {
        this.people = ko.observableArray(ppl),
        this.toggle = function () {
            for (var i = 0; i < ppl.length; i++) {
                ppl[i].IsOnFacebook = false;
            }
        }
    }
    ko.applyBindings(new MyViewModel());
</script> 
```

当我按下按钮时，我想在 People.IsOnFacebook 属性中进行更改。更改将成功进行，但 UI 不显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T11:29:54.193

你应该像函数一样调用它。像：

```
ppl[i].IsOnFacebook(false); 
```

这是因为`ko.observable()`返回一个函数。它不再是您调用的属性，而是函数调用。因此，他们会在后台更新您的 UI。检索可观察的属性。您还应该使用函数调用。

请参阅本教程：[http ://learn.knockoutjs.com/#/?tutorial=intro](http://learn.knockoutjs.com/#/?tutorial=intro)

# c# - 相当于 C# 中的 Ruby“重做”

> ID：14546867
> 
> 赞同：4
> 
> 时间：2013-01-27T11:27:04.683
> 
> 标签：c#, .net, ruby, loops, for-loop

是否有`redo`在 C# 中执行工作的等效方法？即回到循环顶部并重新执行而不检查条件或增加循环计数器。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T12:16:33.807

```
for (int i = 0; i < 100; i++)
{
    do
    {
        DoYourStuff();
    } while (ShouldWeDoThatAgain());
} 
```

`Do...while`就像一个标准`while`循环，除了不是在每次迭代之前检查它的条件，而是在之后检查。这样，循环内的代码将始终至少执行一次。把它放在一个`for`or`foreach`循环中，这应该会让你得到你想要的行为。这比西蒙的回答简单一点，因为它不需要额外的变量，不使用`continue`，并且根本不会弄乱循环计数器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-16T09:40:42.727

为什么不简单：

虽然`goto`并不是每个人都喜欢它，但在这种情况下它的可读性很强......

```
for(...)
{
redo:

   //...

   if (...)
      goto redo;

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T11:31:11.000

不，你会得到最接近的是这样的：

```
bool redoCalled = false:

for (int i = 0; i < 10; i++) {
    if (redoCalled) {
        i--;
        redoCalled = false;
    }

    // other stuff here

    if (redoWanted) {
        redoCalled = true;
        continue;
    }
} 
```

# c# - 表单最小化到托盘时右键单击

> ID：14546870
> 
> 赞同：0
> 
> 时间：2013-01-27T11:27:20.183
> 
> 标签：c#, winforms, system-tray, minimize

我覆盖了 FormClosing 事件以在单击时最小化到系统托盘。这是我的代码：

```
 private void OnFormClosing(object sender, FormClosingEventArgs e)
    {
        if (e.CloseReason == CloseReason.UserClosing)
        {
            e.Cancel = true;
            this.Hide();

            notifyIcon.BalloonTipText = "Server minimized.";
            notifyIcon.ShowBalloonTip(3000);
        }
        else
        {
            this.Close();
        }
    } 
```

我还设置了 notifyIcon 的 DoubleClick 事件，代码如下：

```
 private void showWindow(object sender, EventArgs e)
    {
        Show();
        WindowState = FormWindowState.Normal;
    } 
```

我对此有两个问题：

1）现在，当点击右上角的“X”按钮时，应用程序被最小化到托盘，但我无法关闭它（有道理......）。我希望右键单击系统托盘中的图标，它会打开一个菜单，比如说，这些选项：恢复、最大化和退出。

2) （这可能与我使用 shift+f5 退出程序有关，因为我现在无法关闭我的应用程序，因为我提到了这些更改）。当应用程序退出时，在我将其最小化到托盘后，图标会留在托盘中，直到我用鼠标越过它。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:05:56.723

只需添加一个变量，指示上下文菜单请求关闭。说：

```
 private bool CloseRequested;

    private void exitToolStripMenuItem_Click(object sender, EventArgs e) {
        CloseRequested = true;
        this.Close();
    }

    protected override void OnFormClosing(FormClosingEventArgs e) {
        base.OnFormClosing(e);
        if (e.CloseReason == CloseReason.UserClosing && !CloseRequested) {
            e.Cancel = true;
            this.Hide();
        }
    } 
```

确保**不要**在 FormClosing 事件处理程序中调用 Close()，这会在 Application 类迭代 OpenForms 集合时引起问题。您留下幽灵图标的可能原因。没必要帮忙。

# visual-studio-2012 - 如何在 Visual Studio Express 2012 for Web 中创建物理文件夹？

> ID：14546875
> 
> 赞同：1
> 
> 时间：2013-01-27T11:28:31.663
> 
> 标签：visual-studio-2012, directory

是否可以通过 Visual Studio 2012 创建一个实际的物理文件夹？

当右键单击解决方案时，我只能选择创建解决方案文件夹，这实际上是“虚拟文件夹”。

![在此处输入图像描述](../Images/31e3c3e06f905605ce9569f0d875886c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:29:38.697

您首先需要在该解决方案中创建一个项目。然后，您可以添加任意数量的文件夹。

解决方案是将一组可以/需要一起构建的项目组合在一起的方法。

# c++ - 在 C++ 中查找文本中的单词

> ID：14546881
> 
> 赞同：-1
> 
> 时间：2013-01-27T11:29:30.590
> 
> 标签：c++, string, file, parsing

假设有一个文本文件包含这些休闲风格：

```
 name: natalie, sarah
      surname: parker
      age: 24
      contry: dubai 
```

我想得到`natalie`和`sarah`作为名字，`parker`作为姓氏等等。在此之后，在我的代码中的某处，我需要变量名称、姓氏、年龄（如 natalie、sarah、parker、24 等）。

我认为，首先我需要读取文件并将其存储在一个数组中，然后使用分隔符解析它：“”（空格）或“：”以解析`<surname: parker>`这个文件，并使用“，”逗号作为分隔符以解析`<natalie, sarah>`.

我可以将文本存储在数组中或使用 getline(textfile, size) 来获取行，因为我每次都需要一行。你觉得哪个最合适？以及我们如何进行解析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:39:17.097

你非常接近目标。我只是有一点建议：

*   使用[std::map](http://en.cppreference.com/w/cpp/container/map)存储文件中的数据
*   使用 while 循环从文件中获取每一行，使用[split](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)或[boost::split](http://www.boost.org/doc/libs/1_52_0/doc/html/string_algo/usage.html) the string by`:`获取键和值并将它们存储在 map 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T11:57:39.987

使用正则表达式来求解它更容易。像这样的模式：“name:([\w,]+)surname(\w+)”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T11:38:43.587

我可以想到这样的事情（简化；没有错误检查或优化等；这是未经测试的，但应该可以工作）：

```
std::ifstream file(myfile);
std::string line;

std::map<const std::string, std::string> dataset;

while (file >> line) {
    size_t var_start = line.find_first_not_of(" \t"); // get beginning of the variable name
    size_t var_end = line.find_first_of(":"); // get the end of the variable name
    if (var_start == std::string::npos || var_end == std::string::npos) // any not found?
        continue; // skip this line
    std::string var_name = line.substr(var_start, var_end - var_start); // get the variable name
    std::string var_value = line.substr(var_end + 1); // get the variable content

    // now do something, e.g. safe it
    dataset[var_name] = var_value;
} 
```

# .net - 使用 EF 5、.NET 4.5 和 Linq 急切地加载多个级别

> ID：14546885
> 
> 赞同：1
> 
> 时间：2013-01-27T11:29:45.877
> 
> 标签：.net, linq, entity-framework, eager-loading

我有一个包含国家/地区的数据结构，每个国家/地区可以包含多个锦标赛，每个锦标赛可以包含多场比赛，每场比赛有 2 支球队（主队和客队）。数据设置在具有主键和外键的正常层次结构中。我想获得一个国家列表，其中所有子数据都急切地加载到它们下面，用于在特定日期进行的所有比赛。这是我需要的东西，尽管系统税全错了。谁能指出我正确的方向？谢谢你。

```
 var countries = Context.sbsCountries
            .Include(c => c.Tournaments
               .Select(t => t.Matches)
                   .Select(m => m.TeamHome)
                   .Select(m => m.TeamAway)
                        )
                    )
            .Where(m => m.date == providedDate) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:03:25.220

（已编辑）

一种方法是首先加载所需的匹配项并包含指定的数据，然后获取国家/地区

```
var matches = from m in context.Matches
                       .Include(m => m.Tournament)
                       .Include(m => m.TeamHome)
                       .Include(m => m.TeamAway)
              where m.Date == providedDate
              select m;
matches.Load();
var countries = context.sbsCountries.ToList(); 
```

`Matches`实体框架将自动修复正确的关联，因此每个国家/地区在提供的日期都有自己的关联。

要完成这项工作，您应该关闭延迟加载，否则当您处理一个县的 Matches 集合时，它将在那个时刻完全加载（如果上下文仍然存在）。

另一种方法是开始查询匹配项（同样禁用延迟加载）并通过以下方式选择不同的国家/地区`Tournaments`：

```
var matches = (from m in context.Matches
                        .Include(m => m.Tournament)
                        .Include(m => m.TeamHome)
                        .Include(m => m.TeamAway)
               where m.Date == providedDate
               select m.Tournament.Country).Distinct(); 
```

# android - 安卓添加视图

> ID：14546887
> 
> 赞同：0
> 
> 时间：2013-01-27T11:30:14.047
> 
> 标签：android, android-layout, parent-child

我有以下问题：

下面的代码成功地将我的 TextView 添加到我的自定义 RelativeLayout：

```
 RectF rectRecord = getItemRect(trCurrent);
    TextView tv = new TextView(this.getContext());
                 tv.setLeft((int)rectRecord.left);
                tv.setRight((int)rectRecord.right);
                tv.setTop((int)rectRecord.top);
                tv.setBottom((int)rect.bottom);

                addView(tv); 
```

不幸的是，这些方法（“setLeft,setRight,setTop,setBottom”）在 3.0 之前的 Android 上不可用。所以我尝试以另一种方式添加我的 TextView：

```
 RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
                params.setMargins((int)rectRecord.left, (int)rectRecord.top, (int)rectRecord.right, (int)rectRecord.bottom);
                //tv.setLayoutParams(tv);
                addView(tv, params); 
```

这样做不会显示儿童控制......

我已经尝试将我的主机控件派生自 ViewGroup 的类更改为 LinearLayout、RelativeLayout 和已弃用的 AbsoluteLayout，但始终相同。还删除了我的自定义 onDraw 和 onMeasure 以及“setWillNotDraw(false);” 但这并没有解决我的问题。

片段 1 正在显示我的子视图。
片段 2 没有显示孩子。
谁能指出这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:37:04.113

您的边距设置为 1234 - 这是 1234 下降（与密度无关的像素），这是巨大的。您的控件没有显示在屏幕上，因为边距太大，并且您的控件没有地方显示在屏幕上。

# javascript - javascript拼接不能正常工作

> ID：14546893
> 
> 赞同：0
> 
> 时间：2013-01-27T11:30:27.953
> 
> 标签：javascript

我想从数组中删除一个元素，但是拼接方法从星索引中删除所有元素直到数组末尾。

我有这个代码：

```
function basketItemRemove(obj, id) {
...

    if (id == 0)
        tempBasketList.splice(id, id + 1);
    else
        tempBasketList.splice(id, id);
...
} 
```

我检查 id 0，因为 splice 不使用索引 0 删除。然后`splice(id, id);`仅适用于数组的第二个元素，但如果元素是第三个或更高，则它会删除所有元素，直到数组末尾。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T11:32:10.033

第二个参数[`splice`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.12)是要删除**多少**元素，而不是停止删除它们的点。如果要删除一个元素，请使用`1`：

```
tempBasketList.splice(id, 1); 
```

> 我检查 id 0，因为 splice 不使用索引 0 删除

确实如此，但如果这是您为第二个参数提供的内容，则不是，因为这意味着删除零项。

（来自上面的链接）的签名`splice`解释说：

```
splice(start, deleteCount [ , item1 [ , item2 [ , … ] ] ] ) 
```

*   `start`：从哪里开始做事（索引）
*   `deleteCount`: 在那个位置删除多少
*   `item1`, `item2`, `item3`: 在该位置添加的可选项目（删除后，如果`deleteCount > 0`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T11:33:17.393

的语法[`splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)是：

> `array.splice(index , howMany[, element1[, ...[, elementN]]])`

这意味着如果您只需要删除一个元素，第二个参数应该是`1`：

```
tempBasketList.splice(id, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T11:37:56.907

我将创建一个原型以使事情变得更容易，

```
Array.prototype.delete = function (obj) {
    var index = this.indexOf(obj);// Get the index of object
    this.splice(index, 1);// delete it
}; 
```

接着，

```
tempBasketList.remove(obj) 
```

# python - 为什么 ctypes sizeof 以不同的方式对待结构中的 c_ubyte*1 和 c_char*1？

> ID：14546896
> 
> 赞同：2
> 
> 时间：2013-01-27T11:30:37.283
> 
> 标签：python, ctypes

当我用数组作为字段定义 ctypes 结构时，`c_char`我无法获得该字段的大小，但如果我切换到`c_ubyte`数组，我可以。我的理解是，在以下示例中，Python 将`bar2`其视为指针 (char*)，而不是`bar1`. 如果有人能解释其背后的逻辑，我将不胜感激。

```
import ctypes
class Foo(ctypes.Structure):
    _fields_ = [ ('bar1', ctypes.c_ubyte*1),
                 ('bar2', ctypes.c_char*1) ]
foo = Foo()
for f,t in foo._fields_:
    print t

print ctypes.sizeof(foo.bar1)
print ctypes.sizeof(foo.bar2) 
```

这是输出：

```
<class '__main__.c_ubyte_Array_1'>
<class '__main__.c_char_Array_1'>
1
Traceback (most recent call last):
  File "test.py", line 12, in <module>
    print ctypes.sizeof(foo.bar2)
TypeError: this type has no size 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T18:32:44.493

`foo.bar1`确实是一个 1 ubyte 的 ctypes 数组，但`foo.bar2`它是一个由数组中的内容组成的字符串，被视为以 null 结尾的 C 字符串。如果您制作更长的数组（例如长度为 5）会更清楚：如果它们包含例如重复的字符“A”，那么`foo.bar1`将读取为

```
<__main__.c_ubyte_Array_5 object at 0xf7551df4> 
```

而`foo.bar2`将读为

```
"AAAAA" 
```

这是一个普通的 Python 字符串。这是该类型的一个特例`c_char`。确实，这很烦人，因为一开始就没有干净的方法来写入这个`"AAAAA"`值`bar2`......

# php - PHP & MYSQL - 100,000+ 行 140+ 列 - If 循环 50+ 查询 - 找到更好的方法

> ID：14546897
> 
> 赞同：0
> 
> 时间：2013-01-27T11:30:43.383
> 
> 标签：php, mysql, optimization, for-loop

我有一个包含 ~100000 行和 ~150 列数据的数据库，格式如下：

```
data_id               data_name  monthly_data1  monthly_data2  monthly_data3    ""    ""
      0     product1_data-item1             20             30             10    ""    ""
      1     product1 data-item2             10             30             20    ""    ""
      2     product1 data-item3              9             10             23    ""    ""
      3     product2 data-item1             40             13             12    ""    ""
      4     product2 data-item2             31             12             32    ""    ""
      5     product2 data-item3             23             49             23    ""    "" 
```

上面的数据集是数据的基本样本，实际上有超过 2000 个产品，每个产品有 50+ 个数据项（约 100,000 行）和约 140 列数据，即年度数据。

我需要在数据库中搜索每个数据项 - 每个产品（即每一行），并确定每个数据项的 month_data1 到 month_data140 列中的值是否在该特定数据项的预定最小/最大范围内.

这是我的代码格式，它正在运行，只是非常缓慢，大约需要 20 秒才能完成每年对每种产品的所有 50 次检查。

```
$numberProducts = 2000;
$numberLineItems = 50;
$numberMonths = 140;

for($m=0;$m<$numberMonths;$m++){
    for($p=0;$p$numberProducts;$p++){
      $dataMonth = 'data_month'.$m+1;
          $q="SELECT $dataMonth FROM product_table WHERE data_id='".($p*$numberLineItems)."'";
          $q=mysql_query($q);
          while($row=mysql_fetch_assoc($q)){
              $dataVal = $row[$dataMonth];
          }
          mysql_free_result($q);
          if(($dataVal>=$dataMin1)&&($dataVal<=$dataMax1)){
              $q="SELECT $dataMonth FROM product_table WHERE data_id='".($p*$numberLineItems+1)."'";
              $q=mysql_query($q);
              while($row=mysql_fetch_assoc($q)){
                  $dataVal = $row[$dataMonth];
              }
              mysql_free_result($q);
              if(($dataVal>=$dataMin2)&&($dataVal<=$dataMax2)){
                  $q="SELECT $dataMonth FROM product_table WHERE data_id='".($p*$numberLineItems+2)."'";
                  $q=mysql_query($q);
                  while($row=mysql_fetch_assoc($q)){
                      $dataVal = $row[$dataMonth];
                  }
                  mysql_free_result($q);
                  if(($dataVal>=$dataMin3)&&($dataVal<=$dataMax3)){
.
.
. 
```

等等。一直到每个产品每个月的第 50 个数据项，检查该产品的该数据项的月值是否在预定范围内 --- 预定范围（dataMin/dataMax）不同每个产品的每个单独的数据项，但产品之间的每个特定数据项相同。

我正在寻找一种方法来加速代码、不同的查询组合、服务器设置、循环样式等，这可能有助于优化事情并缩短输出所需的几秒钟。任何想法，将不胜感激。

我的第一个想法是更改 select 语句以选择整个数据库 $q = "SELECT * FROM product_table"; 并将数据放入多维数组中以进行最小/最大检查并避免 14,000,000 次查询，但我遇到了“内存不足”限制。

必须有更好的方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:27:31.813

您可以尝试，如下所示...我未经测试就发送，如果您发现任何语法错误，请尝试更正这些语法错误...

```
 $numberMonths = 140;
 $minRange = 20;
 $maxRange = 35;
 $dataItemArray = array();

 $q=mysql_query("SELECT * FROM product_table");
 while($row=mysql_fetch_assoc($q)){
         for($i = 1 ; $i <= numberMonths; $i++){
            $nowColumn = monthly_data$i;
            if(($row[$nowColumn] >= $minRange) AND ($row[$nowColumn] <= $maxRange))
                $dataItemArray = $row['data_name']
         }  

      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:52:33.357

这是一种方法：

```
for ($i = 1; $i <= 50; $i++) {

    $$min = 'dataMin' . $i;
    $$max = 'dataMax' . $i;

    $dataMonth = 'data_month' . $i;

    //Query to get all the data_id's that fall in the given range
    //If you know that many of your data_month values will be in the min max range, 
    //you can use the opposite of this query.
    //i.e select those data_ids that are not in the range -- this result set 
    //will be significantly smaller and will consume much less time and memory
    /*
     * eg: 
     * $res = mysql_query('SELECT data_id 
                            FROM product_table 
                            WHERE ' . $dataMonth . ' > ' . $$max . ' OR ' . $dataMonth . ' < ' . $$min);
     */
    $res = mysql_query('SELECT data_id 
                            FROM product_table 
                            WHERE ' . $dataMonth . ' <= ' . $$max . ' AND ' . $dataMonth . ' >= ' . $$min);
    if (mysql_num_rows($res) > 0) {
        while ($row = mysql_fetch_assoc($res)) {
            //this arr will contain the data_ids who are in the given range for the moth $dataMonth
            $finalArr[$dataMonth][] = $row['data_id'];
        }
    }
    mysql_free_result($res);
    //$finalArr will have months as keys and data_ids who have the value in the specified range
} 
```

# php - 使用带有 URL 的 substr

> ID：14546899
> 
> 赞同：0
> 
> 时间：2013-01-27T11:31:08.017
> 
> 标签：php, hyperlink, substr

我正在使用 substr 函数输出一个字符串并将输出限制为 100 个字符。问题有时是字符串包含超过 100 个字符的 URL。

有没有人对我如何通过将文本链接替换为 [Link] 之类的通用内容来输出 100 个字符限制内的 URL 有任何建议

我的代码：

```
 <?php
            $reg_exUrl = "/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/";
            if(preg_match($reg_exUrl, $content, $url)) {
                $content = preg_replace($reg_exUrl, "<a href=\"{$url[0]}\" target=\"_blank\">Link</a>", $content);
                if (strlen($content) > 100) {
                    echo substr($content, 0, 100).'...';
                }
            } else {
                if (strlen($content) > 100) { echo substr(stripslashes($content), 0, 100).'...'; } else { echo stripslashes($content); }
            }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:41:32.460

```
if(strlen($url[0]) > 100) {
   $content = preg_replace($reg_exUrl, "<a href=\"{$url[0]}\" target=\"_blank\">Link</a>", $content);
}else{
   $content = preg_replace($reg_exUrl, "<a href=\"{$url[0]}\" target=\"_blank\">{$url[0]}</a>", $content);
} 
```

# asp.net - 如何通过网络服务将图像作为附件发送？

> ID：14546903
> 
> 赞同：0
> 
> 时间：2013-01-27T11:31:18.177
> 
> 标签：asp.net, wcf, web-services, sharpziplib

我想将新员工添加到 Web 服务。员工照片应作为 Web 服务的附件发送。并作为受密码保护的 ZIP 文件发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:47:15.953

为您的图像创建一个类并作为流发送，如下所示，

您必须为每个图像添加流转换并将详细信息添加到列表中。

在客户端。

```
Stream stream = (Stream)openDialog.File.OpenRead();
                    byte[] bytes = new byte[stream.Length];
                    stream.Read(bytes, 0, (int)stream.Length);
                    BitmapImage bmi = new BitmapImage();
                    using (MemoryStream ms = new MemoryStream(bytes))
                    {
                        bmi.SetSource(ms);
                        newRow.Thumbnail = bmi;
                } 
```

在您的服务方面

```
string filePath = ConfigurationManager.AppSettings.Get("ImageUploadPath");

                          if (!Directory.Exists(filePath))
                          {
                              Directory.CreateDirectory(filePath);
                          }

                          filePath = filePath + "\\" + picture.FileName + "." + picture.FileType;

                          if (picture.FileName != string.Empty)
                          {
                              fileStream = File.Open(filePath, FileMode.Create);
                              writer = new BinaryWriter(fileStream);
                              writer.Write(picture.FileStream);
                          } 
```

# prestashop - 主题 Prestashop 1.5.3

> ID：14546904
> 
> 赞同：0
> 
> 时间：2013-01-27T11:31:25.333
> 
> 标签：prestashop, theming

已经大约两周了，我正在寻找关于 Prestashop 1.5.3 主题的正常且足够的自学教程。在官方 presta 网站上，我找到了一些关于主题的材料的小介绍，但它的信息非常少。

**谁知道我在哪里可以找到有关 prestashop 1.5.3 主题的更多详细信息？**

真诚的，约翰！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:33:41.407

PrestaShop 是一个法语项目，您会在法语中找到一些资源。但是在英文中，除了官方文档： [http ://doc.prestashop.com/display/PS14/Designer+Guide](http://doc.prestashop.com/display/PS14/Designer+Guide)

最好的开始方法是复制默认主题并破解它。之后，您很好地理解了结构和分配的 smarty 变量，您将能够从头开始一个主题。

# ruby - RSpec - 模拟（或存根）覆盖混合方法

> ID：14546905
> 
> 赞同：3
> 
> 时间：2013-01-27T11:31:30.963
> 
> 标签：ruby, rspec, mocking, mixins, stubbing

我有这样的情况：

```
module Something
  def my_method
    return :some_symbol
  end
end

class MyClass
  include Something

  def my_method
    if xxx?
      :other_symbol
    else
      super
    end
  end
end 
```

现在问题出在测试上——我想确保从覆盖的方法调用超级方法并将其存根，以便我可以测试方法的其他部分。如何使用 RSpec 模拟来实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T12:23:16.170

确保`super`被调用听起来很像测试实现，而不是行为，并且嘲笑被测对象无论如何都不是一个好主意。我建议只明确指定不同的代码路径

```
describe "#my_method" do
  it "returns :other_symbol when xxx" do
    ...
  end

  it "returns :some_symbol when not xxx" do
    ...
  end
end 
```

如果您有很多包含该模块的类，则可以使用共享示例来减少测试中的重复。

```
shared_examples_for "Something#my_method" do
  it "returns :some_symbol" do
    expect(subject.my_method).to eq :some_symbol
  end
end

describe MyClass do
  describe "#my_method" do
    context "when xxx" do
      subject { ... }

      it "returns :other_symbol" do
        expect(subject.my_method).to eq :other_symbol
      end
    end

    context "when not xxx" do
      subject { ... }

      it_behaves_like "Something#my_method"
    end
  end
end 
```

**更新**：如果你*真的*无法预测 mixin 的行为，你可以`super`通过包含另一个定义它的模块来切换调用的方法。

如果您有一个`C`包含模块的类`M`并且`N`都定义了一个方法，`f`那么 in将引用最后包含的模块。`C#f``super`

```
class C
  include M
  include N

  def f
    super # calls N.f because it was included last
  end
end 
```

如果你将它包含在你的被测对象的单例类中，那么它不会影响任何其他测试：

```
describe MyClass do
  describe "#my_method" do
    it "calls super when not xxx" do
      fake_library = Module.new do
        def my_method
          :returned_from_super
        end
      end

      subject.singleton_class.send :include, fake_library

      expect(subject.my_method).to be :returned_from_super
    end
  end
end 
```

*免责声明*：这实际上并没有测试 mixin 是否*有效*，只是`super`被调用了。我仍然建议实际测试行为。

# c# - IronRuby，如何使 ruby 文件从常规 C# 项目目录而不是 bin\debug 文件夹执行？

> ID：14546912
> 
> 赞同：0
> 
> 时间：2013-01-27T11:32:40.230
> 
> 标签：c#, ruby, ironruby

为我的问题找到合适的标题并不容易，如果需要，请随时重新编辑。现在：

在下面的代码中，程序一运行就会崩溃。

```
using System;
using IronRuby;
using IronRuby.Runtime;

namespace IronRuby_Test_03
{
    class Program
    {
        public static void Main(string[] args)
        {
            var engine = Ruby.CreateEngine();
            engine.ExecuteFile("Ruby_Test.rb");
            dynamic ruby = engine.Runtime.Globals;
        }
    }
} 
```

根据调试器，原因很明显，

> “找不到文件 'C:\Documents and Settings\DEVELOPER\Desktop\IronRuby_Test_03\lkhhytu\bin\Debug\Ruby_Test.rb”

. 该程序希望该文件位于 bin\debug 目录中，当然，当我将文件移到那里时，程序会正常运行。

但是，将项目文件放在 bin\debug 文件夹中并不好玩，这会使管理有点尴尬。所以我现在的问题是，有没有办法让程序正常运行并在所有其他常规项目文件中的主项目目录中包含“Ruby_Test.rb”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:53:24.390

这是预期的行为。转到“调试”下的项目属性并将“工作目录”设置为您的项目目录。

![CS 项目的项目属性 (Visual Studio 2012 Express)](../Images/dd63ee31ef63f5863f323c980fc11fbe.png)

您必须为每个配置执行一次（通常是“调试”和“发布”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T14:26:48.040

在 VS 中，您可以设置 Ruby 文件的属性并将它们与您的程序集一起复制到 bin 目录中。这样，您就可以自动将所需的文件复制到任何配置调试或发布中。

# python - 如何从 PyQt 中的 QListView 中选择项目

> ID：14546913
> 
> 赞同：6
> 
> 时间：2013-01-27T11:33:05.007
> 
> 标签：python, listview, pyqt

我是 PyQt 的新手。所以我试图从 QListView 中获取选定的项目，我能够获取选定项目的索引，但我无法获取索引的值，请有人帮助我。

这是代码：

```
import sys
import os

from PyQt4 import QtCore, QtGui
from PyQt4.QtCore import * 
from PyQt4.QtGui import * 

class asset(QtGui.QDialog):

    def __init__(self,parent=None):
        super(asset, self).__init__(parent)
        self.assetList = QtGui.QListView(self)
        self.assetList.clicked.connect(self.on_treeView_clicked)

        ######################################################################
        # ----------------- ADD ITEMS----------------------------------------
        ######################################################################

        list_data = listDirs('D:\\')
        dir = listModel(list_data)
        self.assetList.setModel(dir)

        self.setStyleSheet('''

                            *{
                            background-color : rgb(65,65,65);
                            color : rgb(210,210,210);
                            alternate-background-color:rgb(55,55,55);
                            }

                            QTreeView,QListView,QLineEdit{
                            background-color : rgb(50,50,50);
                            color : rgb(210,210,210);
                            }

                            '''
                           )
        self.setFocus()

    @QtCore.pyqtSlot(QtCore.QModelIndex)
    def on_treeView_clicked(self, index):
        itms = self.assetList.selectedIndexes()
        for it in itms:
            print 'selected item index found at %s' % it.row()

class listModel(QAbstractListModel): 
    def __init__(self, datain, parent=None, *args): 
        """ datain: a list where each item is a row
        """
        QAbstractListModel.__init__(self, parent, *args) 
        self.listdata = datain

    def rowCount(self, parent=QModelIndex()): 
        return len(self.listdata) 

    def data(self, index, role): 
        if index.isValid() and role == Qt.DisplayRole:
            return QVariant(self.listdata[index.row()])
        else: 
            return QVariant()

def listDirs(*path):
    completePath = os.path.join(*path)
    dirs = os.listdir(os.path.abspath(completePath))
    outputDir = []
    for dir in dirs:
        if os.path.isdir(os.path.join(completePath,dir)):
            outputDir.append(dir)
    return outputDir

if __name__ == "__main__":

    app = QtGui.QApplication(sys.argv)
    app.setStyle('plastique')
    main = asset()
    main.resize(200,200)
    main.show()
    sys.exit(app.exec_()) 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-27T12:22:54.497

您可以使用[`data`](http://qt-project.org/doc/qt-4.8/qmodelindex.html#data). `QModelIndex`它返回一个`QVariant`. 只需将其转换为您要使用的东西，例如`QString`with `.toString`：

```
print 'selected item index found at %s with data: %s' % (it.row(), it.data().toString()) 
```

对了，`QListView.clicked`会给你索引。除非您有多项选择，或覆盖默认选择行为，否则它将是唯一选定的项目。你不需要循环`selectedIndexes()`：

```
@QtCore.pyqtSlot(QtCore.QModelIndex)
def on_treeView_clicked(self, index):
    print 'selected item index found at %s with data: %s' % (index.row(), index.data().toString()) 
```

# monodevelop - 带有突出显示的 Monodevelop 自定义语法

> ID：14546920
> 
> 赞同：0
> 
> 时间：2013-01-27T11:34:04.103
> 
> 标签：monodevelop, syntax-highlighting

如何在 Monodevelop (v3.0.6) 中为日志文件或 JSON 文件定义带有突出显示的自定义语法。我只能找到[Syntax_Mode_Definition](http://monodevelop.com/Developers/Articles/Syntax_Mode_Definition)但它只显示很难理解的非常短的片段。

有人可以显示/链接一个简短的示例，这样一个文件应该是什么样子以及应该放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:49:48.823

[您可以在此处](https://github.com/mono/monodevelop/tree/master/main/src/core/Mono.Texteditor/SyntaxModes)找到大多数内置语法高亮定义。

要添加一个，您必须[编写一个](http://monodevelop.com/Developers/Articles/Creating_a_Simple_Add-in)注册[定义](https://github.com/mono/monodevelop/blob/bfb4abf723eafca175fc1145433defeb76afc9b4/main/src/addins/TextTemplating/MonoDevelop.TextTemplating/MonoDevelop.TextTemplating.addin.xml#L21)和[注册 mimetype](https://github.com/mono/monodevelop/blob/bfb4abf723eafca175fc1145433defeb76afc9b4/main/src/addins/TextTemplating/MonoDevelop.TextTemplating/MonoDevelop.TextTemplating.addin.xml#L25)的插件。

# android - android客户端无法POST json

> ID：14546921
> 
> 赞同：0
> 
> 时间：2013-01-27T11:34:42.017
> 
> 标签：android, json, http, parsing, post

我正在制作简单的用户注册表单。我有 3 个用于名称、密码和电子邮件的编辑视图字段。我的服务器是一个安静的服务器。

我的问题是我无法以 JSON 的形式发送 POST 变量（用户输入。editview）。我现在已经为此工作了 3 天，我已经尝试了几乎所有来自 stackoverflow 和谷歌的东西。请帮忙

我的服务器接受这种形式的数据

```
 "{\"fname\":\"xyz\",\"email\":\"xyz@yahoo.com\",\"password\":\"asd\"}" 
```

我的服务器以这种形式获取它，这给了我数据库错误，因此出现 JSON 异常错误。

```
 email=xyz@yahoo.com&password=asd&fname=xyz 
```

注册活动.java

```
package com.login.recscores;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class RegisterActivity extends Activity {

    // Progress Dialog
    private ProgressDialog pDialog;

    EditText mUsername;
    EditText mPassword;
    EditText mEmail;
    Button mSignUp ;
    TextView temp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);

        // Edit Text

        mUsername = (EditText)findViewById(R.id.name);
        mEmail = (EditText)findViewById(R.id.email);
        mPassword = (EditText)findViewById(R.id.password);
        temp=(TextView)findViewById(R.id.temp);;

        // Create button
        Button mSignUp = (Button) findViewById(R.id.sign_up_button);

        // button click event
        mSignUp.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // creating new product in background thread
                new CreateNewUser().execute();
            }
        });
    }

    /**
     * Background Async Task to Create new user
     * */

    class CreateNewUser extends AsyncTask<String, String, String> {

    //   Before starting background thread Show Progress Dialog

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(RegisterActivity.this);
            pDialog.setMessage("Signing Up..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

         // Creating User

        protected String doInBackground(String... args) {
            String fname = mUsername.getText().toString();
            String email = mEmail.getText().toString();
            String password = mPassword.getText().toString();
            try {
                String urlParameters = "fname="
                            + URLEncoder.encode(fname, "UTF-8") + "&email="
                            + URLEncoder.encode(email, "UTF-8")+ "&password="
                            + URLEncoder.encode(password, "UTF-8");
                } catch (UnsupportedEncodingException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            sendPostData("http://10.0.2.2/api/register", urlParameters);
        }

        public static String sendPostData(String targetURL, String urlParameters) {
                URL url;
                HttpURLConnection connection = null;
                try {
                    // Create connection
                    url = new URL(targetURL);
                    connection = (HttpURLConnection) url.openConnection();
                    connection.setRequestMethod("POST");
                    connection.setRequestProperty("Content-Type",
                            "application/x-www-form-urlencoded");

                    connection.setRequestProperty("Content-Length",
                            "" + Integer.toString(urlParameters.getBytes().length));
                    connection.setRequestProperty("Content-Language", "en-US");

                    connection.setUseCaches(false);
                    connection.setDoInput(true);
                    connection.setDoOutput(true);

                    // Send request
                    DataOutputStream wr = new DataOutputStream(
                            connection.getOutputStream());
                    wr.writeBytes(urlParameters);
                    wr.flush();
                    wr.close();

                    // Get Response
                    InputStream is = connection.getInputStream();
                    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
                    String line;
                    StringBuffer response = new StringBuffer();
                    while ((line = rd.readLine()) != null) {
                        response.append(line);
                        response.append('\r');
                    }
                    rd.close();
                    return response.toString();
                } catch (Exception e) {

                    e.printStackTrace();
                    return null;

                } finally {

                    if (connection != null) {
                        connection.disconnect();
                    }
                }
            }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }

    }
} 
```

JSON解析器是

```
 public JSONObject makeHttpRequest(String url, String method,
    List<NameValuePair> params) {

// Making HTTP request
try {

    // check for request method
    if(method == "POST"){
        // request method is POST
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    }else if(method == "GET"){
        // request method is GET
        DefaultHttpClient httpClient = new DefaultHttpClient();
        String paramString = URLEncodedUtils.format(params, "utf-8");
        url += "?" + paramString;
        HttpGet httpGet = new HttpGet(url);

        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();
    }           

} catch (UnsupportedEncodingException e) {
    e.printStackTrace();
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}

try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(
            is, "iso-8859-1"), 8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();
    json = sb.toString();
} catch (Exception e) {
    Log.e("Buffer Error", "Error converting result " + e.toString());
}

// try parse the string to a JSON object
try {
    jObj = new JSONObject(json);
} catch (JSONException e) {
    Log.e("JSON Parser", "Error parsing data " + e.toString());
}

// return JSON String
return jObj; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:46:31.897

下面的代码对我有用。

```
 protected String doInBackground(String... args) {
    try {
        String urlParameters = "fname="
                    + URLEncoder.encode("firstnamestring", "UTF-8") + "&email="
                    + URLEncoder.encode("emailaddressstring", "UTF-8")+ "&password="
                    + URLEncoder.encode("passwordstring", "UTF-8");
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    sendPostData("http://webserviceurl.com", urlParameters);
}

public static String sendPostData(String targetURL, String urlParameters) {
        URL url;
        HttpURLConnection connection = null;
        try {
            // Create connection
            url = new URL(targetURL);
            connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("POST");
            connection.setRequestProperty("Content-Type",
                    "application/x-www-form-urlencoded");

            connection.setRequestProperty("Content-Length",
                    "" + Integer.toString(urlParameters.getBytes().length));
            connection.setRequestProperty("Content-Language", "en-US");

            connection.setUseCaches(false);
            connection.setDoInput(true);
            connection.setDoOutput(true);

            // Send request
            DataOutputStream wr = new DataOutputStream(
                    connection.getOutputStream());
            wr.writeBytes(urlParameters);
            wr.flush();
            wr.close();

            // Get Response
            InputStream is = connection.getInputStream();
            BufferedReader rd = new BufferedReader(new InputStreamReader(is));
            String line;
            StringBuffer response = new StringBuffer();
            while ((line = rd.readLine()) != null) {
                response.append(line);
                response.append('\r');
            }
            rd.close();
            return response.toString();
        } catch (Exception e) {

            e.printStackTrace();
            return null;

        } finally {

            if (connection != null) {
                connection.disconnect();
            }
        }
    } 
```

请注意，sendPostData 方法从服务器返回（字符串）回调响应，您可以将其用于进一步操作。
快乐编码！

# java - Android 位图调整大小

> ID：14546922
> 
> 赞同：6
> 
> 时间：2013-01-27T11:34:46.957
> 
> 标签：java, android, android-layout

调整位图大小的最佳方法是什么？

使用

```
options.inSampleSize = 2;
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.mandy_moore, options); 
```

或者

```
Bitmap resizedbitmap = Bitmap.createScaledBitmap(bitmap, 200, 200, true); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-27T11:40:39.513

使用它来创建与原始图像保持相同纵横比的采样图像。这是调整大小的最佳方式。

```
options.inSampleSize = 2;
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.mandy_moore, options);
Bitmap resizedbitmap = Bitmap.createScaledBitmap(bitmap, 200, 200, true); 
```

这将在提供的 w 和 h 中缩放位图。这可能会扭曲位图。

根据您的需要使用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-27T11:46:52.803

> 调整位图大小的最佳方法是什么？

这取决于您需要的灵活性：

`options.inSampleSize = N;`意味着您将获得比原始图像小 N 倍的图像。基本上，解码器将每 N 个像素读取 1 个像素。

如果您不需要特定大小的位图，但需要将其变小以使用更少的内存，请使用该选项。这对于阅读大图像特别有用。

`Bitmap.createScaledBitmap`另一方面为您提供更多控制：您可以精确地指示位图的最终尺寸，...

最好的方法是结合使用这两种方法：

1.  确定可用于有效解码源图像的最大值`inSampleSize`（使得解码后的图像仍然大于您需要的最终尺寸）
2.  用于`Bitmap.createScaledBitmap`精确控制生成的大小

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T11:45:08.027

createScaledBitmap 方法产生低质量图像

从这篇文章中获取建议[位图图像质量](https://stackoverflow.com/questions/4821488/bad-image-quality-after-resizing-scaling-bitmap)

# c - C-本地声明的字符串可以在函数调用之外访问吗？

> ID：14546923
> 
> 赞同：1
> 
> 时间：2013-01-27T11:34:52.630
> 
> 标签：c

> **可能重复：**
> [从函数返回字符串时](https://stackoverflow.com/questions/5655853/trouble-with-returning-a-string-from-function)
> [遇到问题 可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

我正在尝试使用函数来修改字符串指针的值。我声明了一个名为 someStruct 的结构，其中一个字段是指向名为“value”的字符串的指针。这是我所做的：

```
void func(char* nvalue,someStruct* container){
    char temp[strlen(nvalue+1);
    temp=strcpy(temp,nvalue);
    container->valu=temp;
    return; 
```

这个函数会把容器的值修改为nvalue吗？如果没有，我该怎么做？我真的不擅长C，所以任何帮助都会很好！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:39:17.913

由于`tmp`是局部变量，因此访问`container->value`函数外部是未定义的行为。但是，可以使用动态分配来控制变量的生命周期。

```
#include <stdlib.h>
#include <string.h>

char **p = &container->value;

*p = malloc(strlen(nvalue) + 1);

if (*p != NULL)
{
  strcpy(*p, nvalue);
} 
```

# c# - 打印 - 通过创建 .tex 文件或直接从代码更容易？

> ID：14546929
> 
> 赞同：1
> 
> 时间：2013-01-27T11:35:14.707
> 
> 标签：c#, printing, latex, tex

我自己从未编写过任何打印方法，在阅读并尝试了一些 C# 示例后，我真的很气馁。要么我使用完全过时的方法，而不是正确的库，要么打印（至少在 C# 中）是一个真正的痛苦。

首先，打印一个简单文档的代码是完整的而且非常丑陋。我已经阅读了一些示例，并且仅在多页上打印一个字符串太复杂了恕我直言。即使我成功地编写了代码，它看起来也很丑陋 - 与我在 LaTeX 中使用的相比没有什么。

所以我的问题是：生成 .tex 文档、编译它并打印生成的 .pdf 不是更容易吗？创建 .tex 文件很容易，但是我不知道在 windows 下编译它并打印 .pdf。还是我错过了 C# 中一些有用的库/提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:53:22.873

我从未尝试直接从 C# 打印文件，但如果您真的选择 LaTeX 路径，则需要先安装 LaTeX 编译器。但是，您可能会发现[texlive.js](https://github.com/manuels/texlive.js)项目很有用：如果您设法创建 .tex 文件，您可以显示一个将该文件呈现为 PDF 的网页并将打印委托给浏览器。

# mysql - 为什么此查询仅返回 1 行？

> ID：14546933
> 
> 赞同：2
> 
> 时间：2013-01-27T11:36:10.417
> 
> 标签：mysql, sql, sql-server, database

请查看表结构、查询和结果。

会议室

```
 ID | Area | RoomNo    Capacity   distances 
   --- ----- --------- ---------- ----------
   1   1     R1         10        10        
   2   1     R3         24        4         
   3   8     R4         24        4         
   4   1     R5         10        10 
```

预订表

```
ReservationID RoomID      DateTimeStart           DateTimeEnd             
------------- ----------- ----------------------- ----------------------- 
1             1           2013-10-10 17:00:00.000 2013-10-10 19:00:00.000 
```

询问

```
 Declare @Start Datetime
 Declare @End Datetime

 set @Start='2013-10-10 13:00:00.000'
 set @End='2013-10-10 14:00:00.000'

 select 
     MeetingRoom.ID 
 from 
    MeetingRoom 
    left Join ResReservationTable Res on Res.RoomID = MeetingRoom.ID
 Where 
   Res.DateTimeStart != @Start and Res.DateTimeEnd != @End
   and (Res.DateTimeStart Not Between @Start and @End) 
   and (Res.DateTimeEnd Not Between @Start and @End) 
```

此查询仅返回一条记录，因为它应该返回 4 条记录

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T11:44:13.427

如果您在右侧表格`LEFT OUTER JOIN` 中使用 and设置条件而不是在结果中使用.`WHERE clause``IS NULL``INNER JOIN`

我想这就是你想要的。

```
Declare @Start Datetime
Declare @End Datetime

set @Start='2013-10-10 13:00:00.000'
set @End='2013-10-10 14:00:00.000'

select 
     MeetingRoom.ID 
from 
    MeetingRoom 
    left Join ResReservationTable Res on Res.RoomID = MeetingRoom.ID
Where
  (
   Res.DateTimeStart != @Start and Res.DateTimeEnd != @End
   and (Res.DateTimeStart Not Between @Start and @End) 
   and (Res.DateTimeEnd Not Between @Start and @End)
  )
  OR Res.ReservationID IS NULL 
```

我认为你必须重新表述你的`WHERE`情况。如果你想要完全空闲的空间（即间隔不相交），你可以使用这个：

```
WHERE
   Res.DateTimeStart > @End
   OR Res.DateTimeEnd < @Start
   OR Res.ReservationID IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T11:53:27.087

最好的方法是将 WHERE 子句中的内容移到 ON 子句中：

```
select 
    MeetingRoom.ID 
from MeetingRoom 
left Join ResReservationTable Res on Res.RoomID = MeetingRoom.ID
and Res.DateTimeStart != @Start and Res.DateTimeEnd != @End
and Res.DateTimeStart Not Between @Start and @End
and Res.DateTimeEnd Not Between @Start and @End 
```

嘿 presto，您保留了外部联接，但仍过滤结果，而且您​​现在拥有性能最佳的查询版本。

这是一个非常常见且不正确的假设，即连接条件可能只有“键相关”表达式，但实际上您可以有任何条件，甚至是连接表中未涉及的列上的条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T11:59:52.343

你能试试这个吗？它使用“Outer”并检查为没有预订的房间返回的 NULL 值并返回这些行。

```
Declare @Start Datetime
 Declare @End Datetime

 set @Start='2013-10-10 13:00:00.000'
 set @End='2013-10-10 14:00:00.000'

 select 
     MeetingRoom.ID 
 from 
    MeetingRoom 
    left Outer Join ResReservationTable Res on Res.RoomID = MeetingRoom.ID
 Where 
   (Res.DateTimeStart is NULL OR Res.DateTimeEnd is NULL)
   and Res.DateTimeStart != @Start and Res.DateTimeEnd != @End
   and (Res.DateTimeStart Not Between @Start and @End) 
   and (Res.DateTimeEnd Not Between @Start and @End) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-27T11:39:57.437

您应该使用内部联接... **编辑** 您必须照常使用外部联接，但要考虑空值与非空值的比较...

一种方法是使用 OR 子句显式接受空日期值

# c# - 在 Silverlight 中获取网页源代码

> ID：14546934
> 
> 赞同：0
> 
> 时间：2013-01-27T11:36:15.253
> 
> 标签：c#, silverlight

我正在尝试从 Silverlight 中的网页获取源代码。

这是我的代码

```
 WebClient wc = new WebClient();
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(WebClient_DownloadStringCompleted);
        wc.DownloadStringAsync(new Uri("http://ip-whois-lookup.com/lookup.php?ip=19.118.245.124"));

    void WebClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            Mytext.Text = e.Result.ToString();
        }
        else
            Mytext.Text = e.Error.ToString();
    } 
```

这是我的错误。

```
System.Security.SecurityException ---> System.Security.SecurityException: Security error.
   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)
   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClassa.<EndGetResponse>b__9(Object sendState)
   at System.Net.Browser.AsyncHelper.<>c__DisplayClass4.<BeginOnUI>b__0(Object sendState)
   --- End of inner exception stack trace ---
   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.Net.WebClient.GetWebResponse(WebRequest request, IAsyncResult result)
   at System.Net.WebClient.DownloadBitsResponseCallback(IAsyncResult result) 
```

相同 url 的相同原理适用于 ac# 控制台应用程序

```
 string htmlContent = new System.Net.WebClient().DownloadString("http://ip-whois-lookup.com/lookup.php?ip=19.118.245.124"); 
```

我正在寻找的是能够使用我选择的任何 ip 更改该 url 中的 ip 并获取该页面的源代码。

在 silverlight 中给出错误的相同代码适用于其他网站：例如：[http ://tcpiputils.com/browse/ip-address/79.118.20.240、http:](http://tcpiputils.com/browse/ip-address/79.118.20.240) [//livescore.com](http://livescore.com)，但也不适用于 google。 com，也许还有其他人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:32:30.077

您的代码有效，因为该站点（tcputils.com、livescore.com）在根目录中有 crossdomain.xml 文件（例如[http://livescore.com/crossdomain.xml](http://livescore.com/crossdomain.xml)）。该文件基本上是一个允许从外部站点 Web 域访问站点数据的选项。

如果文件丢失（例如，在网站[http://ip-whois-lookup.com/](http://ip-whois-lookup.com/)上），来自 silverlight 应用程序的请求将不起作用。这是silverlight 安全限制。

# c# - 由于构造函数，在结构内创建变量会导致错误

> ID：14546935
> 
> 赞同：0
> 
> 时间：2013-01-27T11:36:20.823
> 
> 标签：c#, constructor, struct

我正在编写以下代码，并且我创建的任何变量都拖了一个错误：

```
struct ParagraphInfo
    {
        public ParagraphInfo(string text)
        { 

        }

        int i;
    } 
```

错误是：

> 字段'ConsoleApplication15.Program.ParagraphInfo.i'

必须在控制权返回给调用者之前完全分配

构造函数被强调为错误的来源，一旦我删除它，错误就消失了。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:43:10.323

当编译器为你生成一个构造函数时`struct`，结构中的所有内容都被初始化：

```
struct ParagraphInfo {
    int i;
}

ParagraphInfo pi = new ParagraphInfo();
// pi.i == 0 here. 
```

如果您创建自己的构造函数，这也是您需要确保的保证。这将编译：

```
struct ParagraphInfo {
    int i;
    public ParagraphInfo(string text) {
        i = 0; // you've guaranteed i is initialized.
    }
} 
```

或者..

```
struct ParagraphInfo {
    int i;
    public ParagraphInfo(string text) : this() {

    }
} 
```

您可以使用`this()`，因为默认构造函数会为您进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:48:34.330

在`Struct`类型的构造函数中，必须分配所有字段值。因此，在您的构造函数中初始化`i`或更改`ParagraphInfo`为`class`.

```
public ParagraphInfo(string text)
{     
    this.i = 0;
}

int i; 
```

# c - 阁楼编程功能 - 似乎冻结

> ID：14546947
> 
> 赞同：3
> 
> 时间：2013-01-27T11:37:44.053
> 
> 标签：c, avr-gcc, avrdude

我是编程 ATtiny 芯片的新手。我在 Arduino 上运行了与此等效的程序并且它可以工作，但是在 ATtiny2313 上运行它时，虽然没有出现错误消息，但程序似乎冻结了。所有 PORTB 都连接到 LED，当程序运行时，备用 LED 亮起，但随后它们保持亮着而不是交换。

我正在使用 makeFile、AVRdude 和 USBtinyISP 程序员对 ATtiny 进行编程。

我认为程序一定有一些问题，我将非常感谢任何帮助。

谢谢

斯蒂芬

```
#include <avr/io.h>
#include <util/delay.h>

void myFunction(int status){
  if(status==1){
    PORTB = 0b10101010;
  }else{
    PORTB = 0b1010101;
  }
  int i;
  for(i=0; i<100; i++){
    _delay_ms(10);
  }
  return;
}

int main(void){
    DDRB = 0xFF;
    while(1){
        myFunction(1);
        myFunction(0);
    }
    return 0;
} 
```

我的 Makefile 是：

```
DEVICE     = atmega8
CLOCK      = 8000000
PROGRAMMER = #-c stk500v2 -P avrdoper
OBJECTS    = main.o
FUSES      = -U lfuse:w:0xe4:m -U hfuse:w:0xdf:m -U efuse:w:0xff:m

# ATMega8 fuse bits used above (fuse bits for other devices are different!):
# Example for 8 MHz internal oscillator
# Fuse high byte:
# 0xd9 = 1 1 0 1   1 0 0 1 <-- BOOTRST (boot reset vector at 0x0000)
#        ^ ^ ^ ^   ^ ^ ^------ BOOTSZ0
#        | | | |   | +-------- BOOTSZ1
#        | | | |   +---------- EESAVE (set to 0 to preserve EEPROM over chip erase)
#        | | | +-------------- CKOPT (clock option, depends on oscillator type)
#        | | +---------------- SPIEN (if set to 1, serial programming is disabled)
#        | +------------------ WDTON (if set to 0, watchdog is always on)
#        +-------------------- RSTDISBL (if set to 0, RESET pin is disabled)
# Fuse low byte:
# 0x24 = 0 0 1 0   0 1 0 0
#        ^ ^ \ /   \--+--/
#        | |  |       +------- CKSEL 3..0 (8M internal RC)
#        | |  +--------------- SUT 1..0 (slowly rising power)
#        | +------------------ BODEN (if 0, brown-out detector is enabled)
#        +-------------------- BODLEVEL (if 0: 4V, if 1: 2.7V)
#
# For computing fuse byte values for other devices and options see
# the fuse bit calculator at http://www.engbedded.com/fusecalc/

# Tune the lines below only if you know what you are doing:

AVRDUDE = avrdude $(PROGRAMMER) -p $(DEVICE)
COMPILE = avr-gcc -Wall -Os -DF_CPU=$(CLOCK) -mmcu=$(DEVICE)

# symbolic targets:
all:    main.hex

.c.o:
    $(COMPILE) -c $< -o $@

.S.o:
    $(COMPILE) -x assembler-with-cpp -c $< -o $@
# "-x assembler-with-cpp" should not be necessary since this is the default
# file type for the .S (with capital S) extension. However, upper case
# characters are not always preserved on Windows. To ensure WinAVR
# compatibility define the file type manually.

.c.s:
    $(COMPILE) -S $< -o $@

flash:  all
    $(AVRDUDE) -U flash:w:main.hex:i

fuse:
    $(AVRDUDE) $(FUSES)

# Xcode uses the Makefile targets "", "clean" and "install"
install: flash fuse

# if you use a bootloader, change the command below appropriately:
load: all
    bootloadHID main.hex

clean:
    rm -f main.hex main.elf $(OBJECTS)

# file targets:
main.elf: $(OBJECTS)
    $(COMPILE) -o main.elf $(OBJECTS)

main.hex: main.elf
    rm -f main.hex
    avr-objcopy -j .text -j .data -O ihex main.elf main.hex
    avr-size --format=avr --mcu=$(DEVICE) main.elf
# If you have an EEPROM section, you must also create a hex file for the
# EEPROM and add it to the "flash" target.

# Targets for code debugging and analysis:
disasm: main.elf
    avr-objdump -d main.elf

cpp:
    $(COMPILE) -E main.c 
```

这是默认文件，我没有更改任何原始设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:19:19.667

您的代码看起来正确。最可能的问题是它的构建不正确，但要解决这个问题，我们需要查看您的 Makefile。

在下面的链接（不允许我发布链接，因此您必须自己复制/粘贴）是与您的问题非常相似的人的帖子。事实证明，他没有通过链接器运行他编译的目标文件，结果是缺少一些基本库，导致 PIC 无休止地循环，试图执行无效的操作码（指令）。

efreedom dot com/Question/E-27081/Using-Avr-Gcc-Delay-Ms-Causes-Chip-Freeze

如果这不能解决问题，请尝试发布您的 Makefile。

此外，没有理由调用 _delay_ms(10) 100 次，您可以直接调用 _delay_ms(1000)。它将使用较低的分辨率。

**编辑：**在看到您的 Makefile 之后，您的时钟速度可能设置不正确。CLOCK 设置指定了您运行 AVR 的速度，如果它设置为偏离的速度（例如 8MHz 并且您的 PIC 以 1MHz 运行），延迟循环将需要 8 秒，而您预计它需要一个 - 如果那是问题你的 LED 会出现冻结，但如果你等待的时间足够长，它们实际上会改变。尝试删除 -DF_CPU=$(CLOCK) 语句，看看它是否有所作为。

除此之外，您的 Makefile 有很多未使用/不必要的东西，并且由于我目前没有可用的 avr-gcc 设置，因此很难遵循，因此如果您尝试像以下那样简化 Makefile 会有所帮助，看看它是否有效 - 它将关闭，如果您遇到任何问题，请在下方评论！

```
DEVICE     = attiny2313
CLOCK      = 8000000
OBJECTS    = main.o

# Tune the lines below only if you know what you are doing:

AVRDUDE = avrdude $(PROGRAMMER) -p $(DEVICE)
COMPILE = avr-gcc -Wall -Os -DF_CPU=$(CLOCK) -mmcu=$(DEVICE)

# symbolic targets:
all:    main.hex

flash:  all
    $(AVRDUDE) -U flash:w:main.hex:i

clean:
    rm -f main.hex main.elf $(OBJECTS)

main.elf: $(OBJECTS)
    $(COMPILE) -o main.elf $(OBJECTS)

main.hex: main.elf
    rm -f main.hex
    avr-objcopy -j .text -j .data -O ihex main.elf main.hex
    avr-size --format=avr --mcu=$(DEVICE) main.elf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T16:14:27.610

Makefile 的第一行指定了错误的芯片。

# regex - 如何使用 sed 将一个文件中的模式替换为另一个文件的内容？

> ID：14546949
> 
> 赞同：3
> 
> 时间：2013-01-27T11:37:56.127
> 
> 标签：regex, unix, text, replace, sed

可以说我有`fileA`，内容

```
Hello, this is some
random text REPLACEHERE and some more
random text 
```

和`fileB`内容

```
stuff that goes into
fileA, at that specific place 
```

如何正确替换`REPLACEHERE`里面`fileA`的内容`fileB`？就在那个地方，就好像我在做一个简单的正则表达式操作一样？

我最接近的是

```
sed -i '/REPLACEHERE/r fileB' fileA 
```

最终只会在`REPLACEHERE`找到后的行中附加 fileB，这不好。我需要将它完全替换到位（我认为这`i`实际上是标志的用途）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:42:16.203

仅使用它可能不会那么容易`sed`，我会使用 shell 变量/命令扩展：

```
sed -i "s/REPLACEHERE/$(cat fileB)/g" fileA 
```

`-i`意味着更改将保存到`fileA`，而不是打印到`stdout`。

顺便说一句，请注意 中的斜线`fileB`。如果有的话，他们将不得不逃脱。

# db2 - 测试还原成功完成后我找不到备份映像

> ID：14546951
> 
> 赞同：0
> 
> 时间：2013-01-27T11:38:17.130
> 
> 标签：db2, backup, restore, db2-luw

请帮助我理解下面提到的问题。

我备份了一个`SAMPLE`数据库，`P:\BAK`备份成功。

```
Backup successful. The timestamp for this backup image is : 20130127162614

----------------------------------------------------------------------------
Comment: DB2 BACKUP SAMPLE OFFLINE
Start Time: 20130127162614
End Time: 20130127162619
Status: A
----------------------------------------------------------------------------
EID: 7 Location: P:\BAK 
```

然后我想对目标文件夹进行测试还原`P:\REST`，我使用了命令

```
C:\Users\Aritra>db2 restore db SAMPLE from P:\BAK taken at 20130127162614 to P:\
REST 
```

并且恢复成功：

```
DB20000I  The RESTORE DATABASE command completed successfully.

----------------------------------------------------------------------------
Comment: RESTORE SAMPLE NO RF
Start Time: 20130127165456
End Time: 20130127165512Status: A
----------------------------------------------------------------------------
EID: 8 Location: 
```

`P:\REST`但是还原后我无法在目标文件夹中找到备份映像。

请帮助我了解我的理解有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:58:36.373

如[命令](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0001976.html)[文档中所述`RESTORE DATABASE`](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0001976.html)，使用该`TO target-directory`选项可以更改目标数据库目录，但*前提*是您要恢复不存在的数据库。如果数据库已经存在（正如您在上面给出的命令中所做的那样），则指定此选项无效。

还要记住，数据库目录只保存数据库元数据。其余数据（表空间容器、事务日志文件等）可能存储在系统的其他位置。如果您需要在执行还原时重新定位这些文件，则需要使用**重定向还原**，或者，如果您的数据库使用自动存储，请指定新的存储路径。

您可以阅读有关[如何执行重定向还原的](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.ha.doc/doc/c0006249.html)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:28:15.527

您需要执行重定向还原，因为您要将其还原到新的 FS。

# asp.net-mvc-4 - 更新后需要 AutoMapper.Reset()

> ID：14546952
> 
> 赞同：1
> 
> 时间：2013-01-27T11:38:38.293
> 
> 标签：asp.net-mvc-4, automapper

我在 MVC 应用程序中使用 AutoMapper。在 GET 我需要显示一个对象列表并像这样映射它们：

```
Mapper.CreateMap<Word, WordViewModel>();
Mapper.Map<IList<Word>, IList<WordViewModel>>(list); 
```

然后，用户可以编辑和保存，在 POST 中我执行以下操作

```
Mapper.CreateMap<WordViewModel, Word>(); 
```

一切都好。但是当我再次尝试获取列表时，AutoMapper 说它无法正确执行映射。

一旦我不再需要它，我就解决了调用 AutoMapper.Reset() 的问题。但我不确定这是正确的工作流程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:02:30.517

You should only create the maps once during `Application_Start` and not use `Reset`. For example:

**Global.axac.cs**

```
protected void Application_Start()
{
    Mapper.Initialize(x => x.AddProfile<ViewProfile>());
} 
```

**AutoMapper Configuration**

```
public class ViewProfile : Profile
{
    protected override void Configure()
    {
        Mapper.CreateMap<Word, WordViewModel>();
        Mapper.CreateMap<WordViewModel, Word>();
    }
} 
```

Make sure you include a unit test to validate your mappings:

```
[TestFixture]
public class MappingTests
{
    [Test]
    public void AutoMapper_Configuration_IsValid()
    {
        Mapper.Initialize(m => m.AddProfile<ViewProfile>());
        Mapper.AssertConfigurationIsValid();
    }
} 
```

Then just call the `Mapper.Map` as required in your application.

# c++ - libuv 是否会导致 uv_listen() 中的内存泄漏？

> ID：14546954
> 
> 赞同：0
> 
> 时间：2013-01-27T11:38:45.427
> 
> 标签：c++, memory-leaks, libuv

我测试了我使用 libuv 的小程序。

程序的调试输出显示内存泄漏。

## （健康）状况

libuv 版本

```
#define UV_VERSION_MAJOR 0
#define UV_VERSION_MINOR 9 
```

*   操作系统：Windows 7.0
*   编译器：vs2010

我的测试代码

```
#include "stdafx.h"

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <crtdbg.h>
#include <conio.h>
#include <uv.h>

void on_new_connection(uv_stream_t *server, int status) {
}

int main() 
{
    _CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);

    uv_tcp_t server;
    uv_tcp_init(uv_default_loop(), &server);

    struct sockaddr_in bind_addr = uv_ip4_addr("0.0.0.0", 9123);
    uv_tcp_bind(&server, bind_addr);

    // leak occurred here  
    uv_listen((uv_stream_t*)&server, 128, on_new_connection);   

    //uv_close((uv_handle_t*)&server, NULL);
    return 0;
} 
```

## 结果

```
Detected memory leaks!
Dumping objects ->
{56} normal block at 0x002A3258, 11136 bytes long.
Data: <T B             > 54 F8 42 00 09 00 00 00 CD CD CD CD CD CD CD CD 
Object dump complete. 
```

## 内部泄漏位置

调用栈

```
uv_tcp_listen(...) 
uv_listen(...)
main(...) 
```

代码

```
uv_tcp_listen(...)
{
  ....
  if(!handle->accept_reqs) {
    handle->accept_reqs = (uv_tcp_accept_t*)
      malloc(uv_simultaneous_server_accepts * sizeof(uv_tcp_accept_t));  << 
  ....
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:15:04.187

uv_listen() 确实调用了 malloc() 但它不是泄漏。但是，如果您关闭服务器句柄（并等待关闭回调），内存将再次被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:15:28.380

通过适当的清理，`uv_listen`不应泄漏内存。在这种情况下，`uv_close`需要调用，并且默认循环需要运行完成。

调用`uv_close`将使服务器进入关闭状态。一旦不再有待处理的操作，`endgame`就会将 an 添加到循环中以进行延迟调用。将`endgame`在 内处理`uv_run`，最终将`accept_reqs`在内释放[`uv_tcp_endgame`](https://github.com/joyent/libuv/blob/cc1c1912ca119c56ecdc0e4564720a01bd53d47e/src/win/tcp.c#L210)。

# iphone - 使用 AFIncrementalStore 时返回的部分关系数据如何处理？

> ID：14546957
> 
> 赞同：0
> 
> 时间：2013-01-27T11:39:01.710
> 
> 标签：iphone, ios, afnetworking, afincrementalstore

使用 AFIncrementalStore 进行试验，它非常甜蜜。但是，我遇到了一个我不完全确定如何处理的情况。

我有一个模型返回子关系的 id，但不返回内容本身。例如：获取/组

```
{"id":3,"description":"My Group","category_id":2} 
```

我可以使用常规的 GET /categories 获取所有类别。但我没有调用 GET /group/3/categories

所以我不知道如何初始化group.category的子关系。我确定我遗漏了一些明显的东西，但任何帮助将不胜感激。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T13:16:55.487

使用 AFIS 时，您存储的每个对象都有资源标识符。在大多数情况下，您希望对象的 id 为其 RI。所以在这种情况下 category_id 是您的类别对象的 RI。因此，您只能使用其 category_id 创建类别对象。然后，当您获得所有类别时，您将填充类别对象的其他字段。这很简单，因为 AFIS 足够聪明。

还有另一种方法。由于您可以使用常规 GET /categories 获取所有类别，因此每个类别都应该有带有组 ID 的字段。因此，您可以设置从类别到它们的组的关系。它会自动建立反向关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T18:31:49.757

为了建立@nataliq 的答案，这必须在您的 AFRESTClient 的`representationsForRelationshipsFromRepresentation:ofEntity:fromResponse:`. 它应该以关系名称（“类别”）作为键，另一个以类别的 id 作为值的 NSDictionary。如果您的 Group 对象的 Category 关系被命名为“category”，并且您将其他对象的 id 属性命名为 _id 后缀，则可以执行以下操作：

```
- (NSDictionary *)representationsForRelationshipsFromRepresentation:(NSDictionary *)representation
                                                           ofEntity:(NSEntityDescription *)entity
                                                       fromResponse:(NSHTTPURLResponse *)response
{
  NSMutableDictionary *mutableRelationshipRepresentations = [NSMutableDictionary dictionaryWithCapacity:[entity.relationshipsByName count]];
  [entity.relationshipsByName enumerateKeysAndObjectsUsingBlock:^(id name, id relationship, BOOL *stop) {
    id value = [representation valueForKey:[(NSString *)name stringByAppendingString:@"_id"]];
    if (value && ![value isKindOfClass:[NSNull class]] &&  ![relationship isToMany]) {
      NSDictionary *valueDict = @{@"id" : value};
      [mutableRelationshipRepresentations setValue:valueDict forKey:name];
    }
  }];

  return mutableRelationshipRepresentations;
} 
```

# javascript - 在加载系统期间显示进度

> ID：14546961
> 
> 赞同：0
> 
> 时间：2013-01-27T11:39:18.080
> 
> 标签：javascript, jquery, html, asp.net-mvc-3

我有一个网络应用程序。

我的应用程序加载了大量数据，并进行了大量操作。因此，我尝试在客户端查看程序的处理进度。我喜欢这样：

```
<--Here I want to display the process:-->
<h3 id="progressStatus"></h3> 
```

当用户单击按钮时，程序启动。

```
<input id="openSystem" type="button" onclick="openSystem();"/> 
```

例如我调用两个主要函数：

```
<script type="text/javascript">

  function openSystem(){
    loadSettings();
    loadParameters();
  } 
```

在每个功能开始之前，我想更改“progressStatus”以显示当前进程。

```
 function loadSettings(){
    document.getElementById('progressStatus').innerHTML = 'Please wait. Loading settings...';
    $.ajax...//do something
  }

  function loadParameters(){
    document.getElementById('progressStatus').innerHTML = 'Please wait. Loading parameters...';
    $.ajax...//do something
  }
</script> 
```

但问题是它只显示最近函数的字符串，并且在工作时没有更新。

所以我在这里的例子，它只显示属于最近函数的“加载参数”，但它忽略了第一个字符串。

有趣的是，如果我之前写过 'alert()' 命令，那么它会立即写入.. 例如这里：

```
 function loadSettings(){
    alert();
    document.getElementById('progressStatus').innerHTML = 'Please wait. Loading settings...';
    $.ajax...//do something
  } 
```

有人知道我如何在工作时写入 HTML，以便可以一遍又一遍地写入同一个地方吗？

谢谢，

雷菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:45:12.147

**进度显示（伪代码）：**

```
var done = 0;
var jobs_total = 10; // for ex. 10 functions

function DrawProcessBar(text) {
  var process_percent = done * 100 / jobs_total;
  // output like "Finished loading ajax_job2 20%"
  document.getElementById('progressStatus').innerHTML = text + ' ' + Math.floor(process_percent) + '%';
}

function ajax_job1() {
  $.ajax(onSuccess:function(){ done++; DrawProcessBar('Finished loading ajax_job1') });
}
function ajax_job2() {
  $.ajax(onSuccess:function(){ done++; DrawProcessBar('Finished loading ajax_job2') });
}
etc. 
```

**有人知道我如何在工作时写入 HTML，以便可以一遍又一遍地写入同一个地方吗？**

如果您在同一时刻执行所有功能，那么这样做是没有意义的。

无论如何，您总是可以延迟每次 HTML 写入`setTimeout`以产生良好的效果（仍然毫无意义:)）

# postgresql - 每个客户数据库设计的架构注意事项是什么

> ID：14546963
> 
> 赞同：1
> 
> 时间：2013-01-27T11:39:41.763
> 
> 标签：postgresql, database-design, database-schema, multi-tenant

我正在为多个客户使用设计应用程序。我最终使用每个客户布局的架构创建了单个数据库设置，如下所示：

```
CREATE TABLE public.companies
(
  id serial NOT NULL,
  name long_name NOT NULL,
  registration_number character(11),
  address character varying(256),
  CONSTRAINT "CompaniesPrimaryKey" PRIMARY KEY (id )
);

CREATE TABLE public.banks(.. );
CREATE TABLE public.calendars(.. );

-- Schema definition - none of the tables have company_id key
-- company_1 schema
CREATE TABLE company_1.employees
(
  id serial NOT NULL,
  first_name character varying(30),
  middle_name character varying(30),
  last_name character varying(50),
  bank_id integer,
  CONSTRAINT employees_pkey PRIMARY KEY (id )
);

CREATE TABLE company_1.contracts
(
  id serial NOT NULL,
  employee_id integer,
  calendar_id integer,
  CONSTRAINT contracts_pkey PRIMARY KEY (id )
)

-- company_2 schema same as schema company_1
-- and so on ... 
```

在每次讨论中，我都有一些关于数据库设计的争论，有人说它有问题，但没有人能说什么，只是直觉。

它真的有什么问题吗？这种设计的真正警告是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:46:06.203

问题是，如果模式发生变化，您必须升级所有这些，以便应用程序找到一致的结构。您的升级脚本对于所有这些都必须是原子的。

如果表在同一个数据库中，那应该不会太糟糕，因为您可以将升级脚本包装在事务中。

另一方面，如果您使用每个客户的数据库，并且 RDBMS 不支持每个事务有多个数据库，您可能会升级一些客户，同时“崩溃”其他客户。

此外，如果您愿意，您不能让一个客户轻松地从其他客户那里读取（例如，您可能希望为所有客户提供一个由所有客户的数据填充的自动完成列表）。

# vb.net - 如何在 vb.net 中检测 vlc 视频播放中的当前位置？

> ID：14546964
> 
> 赞同：0
> 
> 时间：2013-01-27T11:39:46.017
> 
> 标签：vb.net, visual-studio-2010, media-player, vlc, libvlc

如何在 vb.net 中检测 vlc 视频播放中的当前位置？

基本上在播放剪辑时，我希望在标签中显示与当前正在播放的剪辑相关的“02:58/21:35”。

所以我需要以某种方式弄清楚如何检测当前位置和结束位置。有谁知道如何做到这一点？

到目前为止的代码：

```
Public Class Form1
    Dim Paused As Boolean = False
    Dim Started As Boolean = False
    Dim PlayedSecond As Boolean = True
    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        PlayedSecond = False
        AxVLCPlugin21.playlist.items.clear()
        AxVLCPlugin21.playlist.add("https://vula.uct.ac.za/access/content/group/fe879ca4-927a-4fca-9cc9-33b12c348b37/vids/Lessig-ItIsAboutTimeGettingOurValuesAroundCopyright522.flv")
        AxVLCPlugin21.playlist.play()
        Started = True
    End Sub

    Sub playsecond()
            AxVLCPlugin21.playlist.items.clear()
            AxVLCPlugin21.playlist.add("http://lsta2011.wikispaces.com/file/view/Rogue%20Waves.mp4")
            AxVLCPlugin21.playlist.play()
            PlayedSecond = True
            Started = False
    End Sub

    Private Sub AxVLCPlugin21_pause(sender As Object, e As EventArgs) Handles AxVLCPlugin21.pause
            Paused = True
    End Sub

    Private Sub IsFinished_Tick(sender As Object, e As EventArgs) Handles IsFinished.Tick
        If Not AxVLCPlugin21.playlist.isPlaying And Paused = False And Started = True And PlayedSecond = False Then
            playsecond()
            Started = True
        End If
    End Sub

    Private Sub AxVLCPlugin21_play(sender As Object, e As EventArgs) Handles AxVLCPlugin21.play
        Paused = False
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:47:54.947

根据[文档](http://wiki.videolan.org/Documentation:WebPlugin)，您可以通过读取以下属性来获取视频的当前位置和长度：

*   `AxVLCPlugin21.input.time`获取当前位置。
*   `AxVLCPlugin21.input.length`其中包含视频的长度。

这两个属性都以毫秒为单位；您必须自己在小时、分钟和秒内转换它们。

# c# - 将标签的位置与滑块的值绑定

> ID：14546965
> 
> 赞同：0
> 
> 时间：2013-01-27T11:39:47.737
> 
> 标签：c#, wpf, binding, slider

我在画布中有一个滑块控件，如下所示： ![在此处输入图像描述](../Images/5b21fdfe7470943abe374e6d06f0c9a3.png)

**我在画布**上添加了一个**标签**（放置在**边框**中）。如何**绑定**此边框的位置，以便当**滑块**值沿其路径移动时，**边框**正确移动并显示带有**标签**的值。

 ******任何人都可以帮忙吗？任何工作想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:54:58.623

您必须管理包含标签的边框的左边距，并将其绑定到滑块的值。要将滑块值转换为适当的边距，您需要创建一个自定义转换器。请记住，没有“LeftMargin”属性，您必须从滑块的值创建一个新边距并将其传递给边框：

在您的情况下，我建议您创建一个转换器并传递一些参数：顶部边框边距（固定，使其沿直线移动，也可以绑定到滑块的位置），最小和最大滑块值以及滑块的宽度以缩放到边距坐标。这不是微不足道的...

另一种方法是创建一个从滑块继承并包含标签的新组件，但您不会以这种方式避免转换器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:02:52.587

我是使用 C# 编码完成的。然而，它可能是更好的解决方案，但它对我有用。如果`ValueChanged`出现滑块，我会编写这些代码。

```
private void year_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
    if (this.yearInfo == null)
    {
        return;
    }

    Point position = Mouse.GetPosition(this.mapView); //mapView is the name of my canvas
    this.yearInfo.Margin = 
         new Thickness(0, 0, position.X - this.yearInfo.ActualWidth / 2.0, 45);
} 
```******

# android - Activity启动时复制文件没有完成，如何解决？

> ID：14546966
> 
> 赞同：0
> 
> 时间：2013-01-27T11:39:48.300
> 
> 标签：android, sqlite

我有一个大型 SQLiteDatabase，我在打开该数据库之前从 Assets 复制到 SDCard。但我似乎遗漏了一些东西，因为使用该数据库的 Activity 可以在复制完成之前查询数据库，这会导致 SQLiteException。

在我的构造函数中，我这样做：

```
private DataBaseHelper(Context context) {
    super(context, DB_NAME, null, 1);
    mContext = context;
    DB_FILE_PATH = context.getExternalFilesDir(null);
    try {

        createDataBase();
        openDataBase();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

createDatabase 方法正在做：

```
public void createDataBase() throws IOException {

        dbExist = checkDataBase();

        if (dbExist) {

        } else {
            this.getReadableDatabase();

            try {
                copyDataBase();

            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }
    } 
```

我想你明白了。但是，我的问题是如何在打开数据库之前检查数据库是否已完成复制？显然我现在做得不对。

问候，乔纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:52:06.337

如果某些操作很长，您应该在 asn 异步任务中执行此操作，并通过临时变量管理所有其他操作。[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

我的建议是从异步任务中的资产复制数据库并警告用户（toast 或弹出窗口）或阻止用户交互（例如，使用进度对话框），直到复制完成。

private boolean isCopyingDb = true 在 onCreate()

```
 private class Copy Db extends AsyncTask<Void, Integer, Long> {
     protected Long doInBackground(Void... ) {
      isCopyingDb = true;
        //copy db
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         isCopyingDb = false;
         pdia.dismiss();
     }
            @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pdia = new ProgressDialog(this);
            pdia.setMessage("Doing background..");
            pdia.show();
        }
 } 
```

在您的活动中检查 isCopyingDb 的状态。如果为 false，则使用 db.

**编辑：** 用一个简单的progressDialog阻止用户..或实现一个进度条，这样用户就知道他应该等待多长时间。

# java - Swing - 是否可以在 JTable 单元格中设置“特定”文本的字体颜色？

> ID：14546968
> 
> 赞同：5
> 
> 时间：2013-01-27T11:40:04.460
> 
> 标签：java, swing, user-interface, fonts, awt

我有一个 JTable，其中一列以以下格式显示值：

```
423545(50),[7568787(50)],53654656,2021947(50),[021947],2021947(50),[8021947(50)] 
```

我想知道是否可以在 RED 中显示方括号内的值？

在过去的几天里，我一直在谷歌上搜索，发现了几个例子，展示了如何设置单元格的“背景”，但没有真正改变单元格的字体，尤其是文本的特定部分。

```
public class myTableCellRenderer
       extends DefaultTableCellRenderer {
  public Component getTableCellRendererComponent(JTable table,
                                                 Object value,
                                                 boolean isSelected,
                                                 boolean hasFocus,
                                                 int row,
                                                 int column) {
    Component c = 
      super.getTableCellRendererComponent(table, value,
                                          isSelected, hasFocus,
                                          row, column);

    if (column == 3) {
       c.setForeground(Color.YELLOW);
       c.setBackground(Color.RED);
    }
    return c;
  } 
```

是否真的可以将部分文本更改为不同的颜色（即方括号内的文本）。

## 编辑

我作为示例显示的文本是表格单元格中显示的实际文本（逗号分隔符不代表列）。单元格中显示的文本是一个逗号分隔的字符串，我显示在第 3 列的表格中。

例如，表格可能如下所示

```
product_id |product_name| invoice_numbers
12         |    Books   | 423545(50),[7568787(50)],53654656,2021947(50),[021947],2021947(50),[8021947(50)]
323        |    Videos  | 423545(50),[7568787(50)],53654656,2021947(50),[021947],2021947(50),[8021947(50)]
4434       |    Music   | 423545(50),[7568787(50)],53654656,2021947(50),[021947],2021947(50),[8021947(50)] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T12:04:44.680

您必须使用结合 HTML 的单元格渲染器。

这是一个小演示示例：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;

public class TestTable2 {

    class MyCellRenderer extends DefaultTableCellRenderer {
        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            Component tableCellRendererComponent = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            if (value instanceof String) {
                String string = (String) value;
                if (string.indexOf('[') > -1) {
                    setText(getHTML(string));
                }
            }
            return tableCellRendererComponent;
        }

        private String getHTML(String string) {
            StringBuilder sb = new StringBuilder();
            sb.append("<html>");
            int index = 0;
            while (index < string.length()) {
                int next = string.indexOf('[', index);
                if (next > -1) {
                    int end = string.indexOf(']', next);
                    if (end > -1) {
                        next++;
                        sb.append(string.substring(index, next));
                        sb.append("<span style=\"color: red;\">");
                        sb.append(string.substring(next, end));
                        sb.append("</span>");
                        index = end;
                    } else {
                        break;
                    }
                } else {
                    break;
                }
            }
            sb.append(string.substring(index, string.length()));
            sb.append("</html>");
            return sb.toString();
        }
    }

    protected void initUI() {
        DefaultTableModel model = new DefaultTableModel();
        for (int i = 0; i < 2; i++) {
            model.addColumn("Col-" + (i + 1));
        }
        for (int i = 0; i < 200; i++) {
            Vector<Object> row = new Vector<Object>();
            for (int j = 0; j < 5; j++) {
                row.add("423545(50),[7568787(50)],53654656,2021947(50),[021947],2021947(50),[8021947(50)]");
            }
            model.addRow(row);
        }
        JTable table = new JTable(model);
        table.setDefaultRenderer(Object.class, new MyCellRenderer());
        JFrame frame = new JFrame(TestTable2.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JScrollPane scrollpane = new JScrollPane(table);
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable2().initUI();
            }
        });
    }

} 
```

结果：

![结果](../Images/40bf29a8e84550aae60773bb4d1669a6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T11:57:19.700

这就是您要寻找的[单元格渲染](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableCellRenderer.html)

如何进行：

1.  `getTableCellRendererComponent()`使用具有适当参数的函数获取默认单元格渲染组件 。

2.  解析单元格的文本并使用`setForeground()`函数应用您的格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T12:00:33.987

```
Is it really possible to change part of the text to be a different color 
```

是的，因为

*   简单的荧光笔可以使用`JTextField/JTextArea` as`Renderers component`

*   多个必须`Highlighter`寻找`JTextPane``Renderers component`

*   （更简单的方法）您可以使用`Html`(todays `Java up to Html3.2`)来格式化单元格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T11:57:36.053

对的，这是可能的。
**编辑**
首先，您需要创建一个`DefaultTableCellRenderer`覆盖`getTableCellRendererComponent`方法的子类，以根据您的需要呈现所需的列。然后通过`DefaultTableCellRenderer`.
这是实现此任务的示例：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;
import java.util.*;
public class TableExample extends JFrame
{
    JTable myTable ;
    Object[][] data= {
                    {"34","[56],987,[(56)]"},
                    {"5098","345,([{78}])"},
                    {"567","4312"}
                };
    Object[] col = {"First","Second"};
    public TableExample()
    {
        super("CellRendererExample");
    }
    public void prepareAndShowGUI()
    {
        myTable = new JTable(data,col);
        myTable.getColumnModel().getColumn(1).setCellRenderer(new MyTableCellRenderer());
        JScrollPane jsp = new JScrollPane(myTable);
        getContentPane().add(jsp);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }
    public class MyTableCellRenderer extends DefaultTableCellRenderer 
    {
        public Component getTableCellRendererComponent(JTable table,Object oValue, boolean isSelected, boolean hasFocus, int row, int column) 
        {
            Component c = super.getTableCellRendererComponent(table, oValue,isSelected, hasFocus,row, column);
            String value = (String)oValue;
            StringBuilder sBuilder = new StringBuilder();
            sBuilder.append("<HTML><BODY>");
            StringTokenizer tokenizer = new StringTokenizer(value,",");
            while (tokenizer.hasMoreTokens())
            {
                String token = tokenizer.nextToken();
                int index = token.indexOf("[");
                if (index != -1)
                {
                    sBuilder.append(token.substring(0,index));
                    int lastIndex = token.lastIndexOf(']');
                    String subValue = token.substring(index + 1,lastIndex);
                    sBuilder.append("[<FONT color = red>"+subValue+"</FONT>]");
                    if (lastIndex < token.length() -1)
                    {
                        sBuilder.append(token.substring(lastIndex+1,token.length()));
                    }
                    sBuilder.append(",");
                }
                else
                {
                    sBuilder.append(token+",");
                }
            }
            if (sBuilder.lastIndexOf(",") == sBuilder.length() - 1)
            {
                sBuilder.deleteCharAt(sBuilder.length() - 1 );
            }
            sBuilder.append("</BODY></HTML>");
            value = sBuilder.toString(); ;
            JLabel label =(JLabel)c;
            label.setText(value);
            return label;
        }
    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                TableExample tae = new TableExample();
                tae.prepareAndShowGUI();
            }
        });
    }

} 
```

# c - C：字符交换

> ID：14546969
> 
> 赞同：4
> 
> 时间：2013-01-27T11:40:10.467
> 
> 标签：c, pointers, char

我需要通过指针交换两个字符，但是当我运行这段代码时，程序崩溃了。

```
int main(){
    char *s1 = "string1";
    swap(st,(st+1));

    /* BUT THIS CODE WORKS - Whats the problem?
     * char s1[] = "string1";
     * swap(s1,&s1[1]);
     */

    return 0;
}

void swap(char * const ptr1, char * const ptr2){

    char temp = *ptr1;
    *ptr1 = *ptr2;
    *ptr2 = temp;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T11:42:06.827

```
char *s1 = "string1"; 
```

因为`s1`指向字符串文字并且修改会调用C 中[**未定义的行为**](http://en.wikipedia.org/wiki/Undefined_behavior)。这就是为什么这不起作用。

而在这 `char s1[] = "string1";`

`s1`是一个数组，因此可以修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T11:42:46.987

不能修改字符串文字。您尝试`"string1"`在不允许的代码中进行修改。实际上，许多编译器将字符串文字放在可能不会写入的特殊部分中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T11:43:19.060

这行代码创建了一个无法更改的字符串文字。它只是可读的。

```
char *s1 = "string1"; 
```

任何改变它的尝试都会给你一个错误。

虽然您评论的示例：

```
 char s1[] = "string1"; 
```

创建一个实际的数组。这可以正常编辑和使用。

# localization - Meteor accounts.ui 本地化

> ID：14546972
> 
> 赞同：13
> 
> 时间：2013-01-27T11:40:36.640
> 
> 标签：localization, meteor

我正在学习使用流星。

是否可以轻松本地化 accounts.ui 组件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T18:27:34.640

这是一个有点 hacky 的解决方案，您可以删除`accounts-ui`您拥有的包并手动添加它。`accounts-ui`在流星的[github repo](https://github.com/meteor/meteor/tree/avital-accounts-ui/packages/accounts-ui-unstyled)上找到分支，找到包中的所有内容，`accounts-ui`例如：login_buttons_dialogs.html、login_buttons.html 等。

然后，您可以使用您想要的语言的自定义文本直接编辑这些文件并将其复制到您的流星项目中。

Meteor 尚未实施国际化，但已在路线图上。您可以做的是使用[陨石](https://github.com/oortcloud/meteorite)并安装本地化包，例如`simple-i18n`结合手动编辑的`accounts-ui`文件为您的用户提供多语言体验或简单地提供不同语言的帐户 UI。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-15T21:12:30.500

这是我用过的一个技巧。简单，但有效：

```
Template.header.rendered = function() {
  $('#login-sign-in-link').text('Přihlásit se ▾');
  $('.login-close-text').text('Zavřít nabídku');
  $('.sign-in-text-google').text('Přihlásit se přes Google');
  $('.sign-in-text-facebook').text('Přihlásit se přes FB');
  //etc...
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-19T19:16:35.500

**法语：**  

```
 /**
  * Accounts-ui ugly translation
  * TODO : use i18n solution
  */
   Template.header.rendered = function() {
     $('#login-sign-in-link').text('Connexion ▾');
     $('.login-close-text').text('Fermer');
     $('#login-username-or-email-label').text('Pseudo ou email');
     $('#login-password-label').text('Mot de passe (mdp)');
     $('#signup-link').text('Créer un compte');
     $('#forgot-password-link').text('Mdp oublié');
     $('#login-buttons-forgot-password').text('Récupération');
     $('#back-to-login-link').text('Connexion');
     $('#login-username-label').text('Pseudo');
     $('#login-buttons-open-change-password').text('Changer de mdp');
     $('#login-buttons-logout').text('Deconnexion');
     if ($('#login-buttons-password').text().indexOf('Sign in') != -1) {
       $('#login-buttons-password').text('Connexion');
     } else {
       $('#login-buttons-password').text('Créer le compte');
     }
     $('.login-button').addClass('btn btn-warning');
     $('.login-button').removeClass('login-button login-button-form-submit');
     if ($('.message.error-message').text().indexOf('Username must be at least 3 characters long') != -1) {
       $('.message.error-message').text('Le login doit faire plus de 3 caractères');
     } else if ($('.message.error-message').text().indexOf('Incorrect password') != -1 || $('.message.error-message').text().indexOf('User not found') != -1) {
       $('.message.error-message').text('login ou mot de passe incorrect');
     }
     $('#login-old-password-label').text('Mot de passe actuel');
     $('#login-buttons-do-change-password').text('Changer le mot de passe');
     $('#reset-password-new-password-label').text('Nouveau mot de passe');
     $('#login-buttons-reset-password-button').text('Changer');
     if ($('.message.info-message').text().indexOf('Email sent') != -1) $('.message.info-message').text('Email envoyé');
     $('#just-verified-dismiss-button').parent().html('Email vérifié <div class="btn btn-warning" id="just-verified-dismiss-button">Masquer</div>');
   }; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-15T12:04:03.220

**葡萄牙语 (PT-BR)**

```
Template.layout.rendered = function() {
  $('#login-sign-in-link').text('Login ▾');
  $('.login-close-text').text('Fechar');
  $('#login-username-or-email-label').text('Nome de usuário ou e-mail');
  $('#login-password-label').text('Senha');
  $('#signup-link').text('Criar uma conta');
  $('#forgot-password-link').text('Esqueceu a senha?');
  $('#login-buttons-forgot-password').text('Recuperar');
  $('#back-to-login-link').text('Login');
  $('#login-username-label').text('Usuário para login');
  $('#login-buttons-open-change-password').text('Alterar senha');
  $('#login-buttons-logout').text('Logout');
  if ($('#login-buttons-password').text().indexOf('Sign in') != -1) {
    $('#login-buttons-password').text('Login');
  } else {
    $('#login-buttons-password').text('Criar conta');
  }
  $('.login-button').addClass('btn btn-warning');
  $('.login-button').removeClass('login-button login-button-form-submit');
  if ($('.message.error-message').text().indexOf('Username must be at least 3 characters long') != -1) {
    $('.message.error-message').text('Usuário deve ter pelo menos 3 caracteres');
  } else if ($('.message.error-message').text().indexOf('Incorrect password') != -1 || $('.message.error-message').text().indexOf('User not found') != -1) {
    $('.message.error-message').text('Usuário/senha errado(s)');
  }
  $('#login-old-password-label').text('Senha atual');
  $('#login-buttons-do-change-password').text('Alterar a senha');
  $('#reset-password-new-password-label').text('Nova senha');
  $('#login-buttons-reset-password-button').text('Alterar');
  if ($('.message.info-message').text().indexOf('Email sent') != -1) $('.message.info-message').text('E-mail enviado');
  $('#just-verified-dismiss-button').parent().html('Email verificado <div class="btn btn-warning" id="just-verified-dismiss-button">Ocultar</div>');
}; 
```

 **当心男孩们！** **$('.login-close-text')**中 的CLOSE 是动词... TO CLOSE
它并不意味着“NEAR”，因为我可能在上面的一些答案中读到过。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-27T12:57:14.600

i18n 仍在 Meteor 的待办事项列表中。同时，您可以制作自己的系统。看看他们是如何在这里实现国际化的，例如：[https ://github.com/bolora/multi-page-config](https://github.com/bolora/multi-page-config)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-20T20:06:48.717

**对于德语，包括所有标签。** 这主要改编自 Pascoual 的帖子，但是，按钮仍然被格式化并且一些附加标签被翻译......
如果你发现一个仍然没有被翻译的标签，请在评论中报告这个。

```
 /**
   * Accounts-ui ugly translation
   * TODO : use i18n solution
   */
Template.login.rendered = function() {
  $('#login-sign-in-link').text('Einloggen');
  $('.login-close-text').text('Schliessen');
  $('#login-username-or-email-label').text('Benutzername oder Email');
  $('#login-password-label').text('Passwort');
  $('#signup-link').text('Konto erstellen');
  $('#forgot-password-link').text('Passwort vergessen');
  $('#login-buttons-forgot-password').text('Wiederherstellen');
  $('#back-to-login-link').text('Zurück');
  $('#login-username-label').text('Benutzername');
  $('#login-buttons-open-change-password').text('Passwort ändern');
  $('#login-buttons-logout').text('Logout');
  $('#reset-password-new-password-label').text('Neues Passwort');
  $('#login-old-password-label').text('Aktuelles Passwort');
  $('#login-password-label').text('Neues Passwort');
  $('#login-buttons-do-change-password').text('Passwort ändern');
  if ($('#login-buttons-password').text().indexOf('Sign in') != -1) {
    $('#login-buttons-password').text('Einloggen');
  } else {
    $('#login-buttons-password').text('Konto erstellen');
  }

  if ($('.message.error-message').text().indexOf('Username must be at least 3 characters long') != -1) {
    $('.message.error-message').text('Benutzername muss mindestens 3 Zeichen lang sein');
  } else if ($('.message.error-message').text().indexOf('Incorrect password') != -1 || $('.message.error-message').text().indexOf('User not found') != -1) {
    $('.message.error-message').text('Benutzername oder Passwort falsch');
  }
}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-09T07:58:24.423

您可以考虑使用[meteor-accounts-ui-bootstrap-3](https://github.com/ianmartorell/meteor-accounts-ui-bootstrap-3)

它支持[本地化](https://github.com/ianmartorell/meteor-accounts-ui-bootstrap-3/blob/master/README.md#localization)：

> accountUIBootstrap3.setLanguage('ru');

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-11T16:57:01.530

最简单的方法是用户accounts-tap包： [https ://atmospherejs.com/softwarerero/accounts-t9n](https://atmospherejs.com/softwarerero/accounts-t9n)

它基于tapi18n，您只需在客户端添加以下配置：

```
T9n.setLanguage('<yourLanguage>') 
```

# php - 致命错误：在非对象第 52 行调用成员函数 bind_param()

> ID：14546974
> 
> 赞同：1
> 
> 时间：2013-01-27T11:40:45.360
> 
> 标签：php, mysqli, prepared-statement

我已经看到了许多类似的问题，但是我似乎仍然无法解决问题，如果这可能是重复的，很抱歉。

无论如何这里是代码：

```
$email = $_POST['emailAddress'];
$username = $_POST['userName'];
$dob = $_POST['dobYear'] . "-" . $_POST['dobMonth'] . "-" . $_POST['dobDay'];
$fname = $_POST['firstName'];
$sname = $_POST['lastName'];
$country = $_POST['country'];
$squestion = $_POST['secretQuestion'];
$sanswer = $_POST['secretAnswer'];

require('db_connect.php');
$insert_stmt = $mysqli->prepare("INSERT INTO users (username, email, password, salt, fname, sname, country, dob, squestion, sanswer) VALUES (:username, :email, :password, :salt, :fname, :sname, :country, :dob, :squestion, :sanswer)");
var_dump($mysqli->error);
$insert_stmt->bind_param(':username', $username); // error is here 
$insert_stmt->bind_param(':email', $email);
$insert_stmt->bind_param(':password', $password);
$insert_stmt->bind_param(':salt', $random_salt);
$insert_stmt->bind_param(':fname', $fname);
$insert_stmt->bind_param(':sname', $sname);
$insert_stmt->bind_param(':country', $country);
$insert_stmt->bind_param(':dob', $dob);
$insert_stmt->bind_param(':squestion', $squestion);     
$insert_stmt->bind_param(':sanswer', $sanswer);     
$insert_stmt->execute(); 
```

这是 var_dump 的输出：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ':username, :email, :password, :salt, :fname, :sname, :country, :dob, :squestion,' 附近使用正确的语法”

我知道准备线上一定有问题，但是我真的没有看到。

这是 db_connect.php 以防万一有人想查看，但该文件工作正常：

```
define("HOST", "localhost"); // The host you want to connect to.
define("USER", "sec_user"); // The database username.
define("PASSWORD", "eKcGZr59zAa2BEWU"); // The database password. 
define("DATABASE", "secure_login"); // The database name.

$mysqli = new mysqli(HOST, USER, PASSWORD, DATABASE); 
```

再次抱歉，如果这是重复的，或者我遗漏了一些明显而明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:48:31.643

该类[`mysqli_stmt`](http://php.net/manual/en/class.mysqli-stmt.php)不支持命名的 SQL 参数。此外，第一个参数 to[`mysql_stmt::bind_param()`](http://php.net/manual/en/mysqli-stmt.bind-param.php)不是 SQL 参数的名称（因为该类[`mysqli_stmt`](http://php.net/manual/en/class.mysqli-stmt.php)不支持命名 SQL 参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:50:28.133

```
$insert_stmt = $mysqli->prepare("INSERT INTO users (username, email, password, salt, fname, sname, country, dob, squestion, sanswer) VALUES (?, ?,?, ?, ?, ?, ?, ?, ?, ?)"); 
```

相应地改变你的绑定

# scroll - 像框滚动条

> ID：14546977
> 
> 赞同：2
> 
> 时间：2013-01-27T11:41:03.243
> 
> 标签：scroll, facebook-likebox

我已经实现了一个 Iframe `Like box`，但没​​有显示垂直滚动条。（生成的代码设置滚动为否，但我现在已将其更改为是，但仍然无法正常工作）。

代码如下：

```
<iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Fpages%2FChristopher-Carter-Veterinary-Surgery%2F332086710515idth=300&height=590&colorscheme=light&show_faces=true&border_color&stream=true&header=true" scrolling="Yes" frameborder="0" style="border:none; overflow:hidden; width:300px; height:590px;" allowtransparency="true"></iframe> 
```

I/E 会出现此问题，但 Safari、Firefox、Netscape 或 Chrome 不会出现此问题。似乎这是一个 Windows XP / IE8 问题，但如果有人知道不同，我很高兴收到他们的来信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:43:27.387

有样式溢出：隐藏；在我看来，这与滚动=是的矛盾。

冒着说明显而易见的风险：您是否尝试过：

```
overflow:scroll 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:06:16.733

您已经覆盖了**样式**子句中的滚动条；

```
overflow: hidden; 
```

但是，它具有相反的效果，IE 将按原样正确呈现，但 firefox 等*不会*呈现滚动条。修复它；

```
overflow-y: scroll; 
```

# jsp - Request.getAttribute 在 jsp 中不起作用

> ID：14546982
> 
> 赞同：2
> 
> 时间：2013-01-27T11:41:34.953
> 
> 标签：jsp

我像这样在jsp中的表单标签内设置属性。

```
 request.setAttribute("iTDay", 5); 
```

我正在尝试将值检索为

```
 System.out.println( request.getAttribute("iTDay")); 
```

在另一个jsp页面中。简单但它不起作用。请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T11:50:21.767

除非您将属性存储在会话中或将属性与属性一起重定向到另一个页面，否则您无法将设置的属性从一个页面检索到另一个页面。

尝试

```
request.getSession().setAttribute("iTDay", 5);

System.out.println( request.getSession().getAttribute("iTDay")); 
```

反而 ！

# ruby-on-rails-3 - 使用 Rails 创建表单以将多封电子邮件发送到现有电子邮件

> ID：14546983
> 
> 赞同：0
> 
> 时间：2013-01-27T11:41:40.233
> 
> 标签：ruby-on-rails-3, actionmailer, simple-form

我正在为客户建立一个订单管理系统。我需要对其进行设置，以便我可以构建一个表单，将订单状态的简要信息通过电子邮件发送给客户。诀窍是客户可以拥有多封电子邮件，即对此没有限制，我需要设置的表格将显示在文本框中生成的简报（那里没什么难的）以及带有要发送的电子邮件地址的复选框列表至。

单击打开/关闭复选框可确定简报将发送到哪些地址。除了一件主要的事情，即表格外，我已经解决了所有问题 - 我不确定如何实际设置这部分，即我在`simple_form`这里使用，我不确定我将针对哪个模型制作表格？我需要在这里建立另一个模型吗？我很困。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:48:27.623

可能您可以在没有数据库的情况下创建像电子邮件这样的模型并使用所有 ActiveRecord 辅助方法。这些文章可能会有所帮助。

[http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/](http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/)

[http://railscasts.com/episodes/193-tableless-model?view=asciicast](http://railscasts.com/episodes/193-tableless-model?view=asciicast)

# python - 具有自动完成机制解析文档字符串的 Python IDE

> ID：14546986
> 
> 赞同：3
> 
> 时间：2013-01-27T11:41:50.947
> 
> 标签：python, autocomplete, pydev, docstring

到目前为止，我只发现 PyCharm 能够解析文档字符串以确定变量的类型并为该变量启用自动完成功能，例如：

```
def func(arg):
    """
    epydoc style docstring

    @type arg: str
    @rtype: str
    """
    arg.#<-autocomplete enabled, because we know it is a string#
    ...

func('test').#<-autocomplete enabled here too# 
```

是否有其他（最好是免费的）Python IDE 具有此功能？我尝试了 Pydev 和 Spyder，但似乎没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T09:22:45.263

这是在 PyDev 上添加的。最新版本 (3.3.3) 有一个小修复，但它应该从 2.8.0 开始工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T00:10:02.520

确实有一个免费的解决方案：

试试[绝地](https://github.com/davidhalter/jedi)！它应该理解 epydoc 类型注释。

目前有 VIM、Emacs 和 Sublime 的插件。Spyder[正在考虑](https://github.com/davidhalter/jedi/issues/102)从绳索转向绝地。但这需要一段时间。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T18:05:28.657

我现在正在评估 PyCharm，我真的很喜欢它的这个特性。另外，它可以在linux和windows下运行，这是另一个优势。我不知道任何其他具有这种自动完成机制的 Python IDE。

不幸的是 PyCharm 不是开源的。

# android - 使用 Facebook 登录如何适用于具有自己的用户数据库的应用程序？

> ID：14546989
> 
> 赞同：2
> 
> 时间：2013-01-27T11:42:17.657
> 
> 标签：android, database, facebook-login

我对某些应用程序具有的使用 Facebook 登录功能有疑问。这是我的场景：

我目前有一个 Android 社​​交网络应用程序，它有自己的用户数据库和登录系统，用户有自己的用户名、简历等，我想包括 Facebook 登录选项。目前，当用户希望注册使用该应用程序时，他们必须输入一个新的唯一用户名/密码/电子邮件，然后该用户名将用于应用程序对数据库的进一步请求，并且是必需的。所以基本上我有几个问题：

1.  我知道我可以获取用户的 FB 电子邮件并在注册过程中使用它，但是用户名/密码组合呢？我应该单独要求它们吗？

2.  假设使用 FB 注册已完成，当用户使用 facebook 登录时，我如何知道用户名？（我猜我可以使用电子邮件地址来验证这一点，对吧？）

所以我想我的主要问题是如何在从 facebook 注册/登录时获取用户名/密码组合。非常感谢任何帮助/建议:) 谢谢

（我知道这可能已经被问过一百万次了，但我找不到一个很好的解释/解决问题的方法，因为我有一个用户名，而不是电子邮件地址，作为用户标识符，我认为这会使事情复杂化一点点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:23:50.360

回答问题 1，我会说 Facebook 密码就是您所说的密码。只是 Facebook 将存储它，因此您必须允许 Facebook 用户在您的数据库中没有密码。

关于用户名的问题，回答起来比较复杂，我想应该是你必须回答它。但我会使用他/她的 Facebook 名称，正如我在许多使用 Facebook 登录的应用程序中看到的那样。

所以，作为简历：

*   电子邮件将是与 Facebook 帐户相关的电子邮件
*   用户名，将是与 Facebook 帐户相关的名称
*   密码，将是与 Facebook 帐户相关的密码

所以，你的数据库现在有问题，因为你想要一个唯一的用户名、密码和电子邮件。现在，您可能有重复，因为用户可能使用他的电子邮件和他的 Facebook 帐户（使用相同的电子邮件）。因此，我将使用 2 个表，“FacebookUsers”和“Users”，或者使用具有新字段的唯一表，以区分 Facebook 用户和普通用户。

# git - git-subtree 稳定用于具有大量和深度嵌套子树的存储库？

> ID：14546990
> 
> 赞同：2
> 
> 时间：2013-01-27T11:42:37.967
> 
> 标签：git, git-subtree

我正在维护一个 CMS/框架的仓库，它目前使用了很多 (25) 个子模块。由于子模块的所有缺点，我宁愿切换到 Avery Pennarun 的 git-subtree （注意：*不是*git subtree 合并策略），但我在这一点上犹豫不决，因为我想知道 git-subtree 是否真的稳定像我这样的“*大型回购/大量子树/深度嵌套/大量通量*”场景。

由于我必须以艰苦的方式学习，这`git subtree merge strategy`完全*无法*处理我的 repo/szenario，我想事先评估我的 git-subtree 几率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:28:18.563

Git-subtree 只是基本 git 功能的脚本包装器（顺便说一句，它使用子树合并策略）。由于 git 在*“大型 repo/大量子树/深度嵌套/大量通量”场景中*是稳定的，因此 git-subtree 也可以处理得很好。

如果您想了解详细信息并想知道 git-subtree 是如何工作的，以及它的方法是否会针对您的 repo 进行扩展，请查看它的源代码。

不过，通常建议坚持使用子模块——它的大部分问题都可以通过编写一些脚本来避免。

# jquery - 使用 jquery 解析 JSON 并将其添加到文本框自动完成列表中

> ID：14546992
> 
> 赞同：3
> 
> 时间：2013-01-27T11:42:46.140
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-4, jquery-autocomplete

我正在尝试构建一个自动完成文本框。我的脚本在 Razor View 页面中如下所示：

```
@model AutoComplete.Models.Country
@{
    ViewBag.Title = "Index";
}
@Scripts.Render("~/bundles/jquery")

<h2>Index</h2>
@Html.TextBoxFor(m => m.CountryName, new { Class = "field" })
<div class="keys"></div>

<script>
    $(function () {
        $('.field').keyup(function () {
            $.ajax({
                url: "./js/" + $('.field').val(),
                success: function (result) {
                }
            });
        });

    });
</script> 
```

我的控制器方法是：

```
public ActionResult SearchByKey(string keyword)
        {
            CountryContext db = new CountryContext();
            var result= db.Countries.Where(x => x.CountryName.Contains(keyword));
            return Json(result , JsonRequestBehavior.AllowGet);

        } 
```

我的控制器返回 Json 数据如下：

```
[{"CountryId":"1","CountryName":"India"},
 {"CountryId":"2","CountryName":"Indonesia"}
] 
```

我想 1]**解析这些数据**，然后 2]**将其附加到**上述视图页面的文本框中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:07:53.663

可能是一个更简单的解决方案：

```
$(function () {
    $('.field').keyup(function () {
        $.getJson("./js/" + $('.field').val(), function (result) {
            // result should contain the parsed JSON
        });
    });

}); 
```

示例可以在这里找到：http: [//api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

注意：'.field' 的第二个选择器可能应该替换为 $(this)，.val() 将为*每个*带有 'field' 类的标签检索

甚至是这样的：

```
 $.on('keyup', '.field', function () {
        $.getJson("./js/" + $(this).val(), function (result) {
            // result should contain the parsed JSON
        });
    }); 
```

虽然还没有测试过代码，只是在我的脑海中:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:16:20.293

解析返回的字符串以使其成为一个对象，然后以某种方式迭代该对象并将值插入到您想要插入它们的位置：

```
$(function() {
    $('.field').on('keyup', function() {
        $.ajax({
            url: "./js/" + this.value
        }).done(function(data) {
            var json = $.parseJSON(data);
            $.each(json, function(key, value) {
                 $(element).append(value);
            });
        });
    });
}); 
```

# c# - 从 framework 3.5 转换为 4 app.config 位置

> ID：14546997
> 
> 赞同：0
> 
> 时间：2013-01-27T11:43:26.440
> 
> 标签：c#, visual-studio-2010

我有一个框架为 3.5 的项目，当我遇到混合模式问题时，我将其转换为 4。我从此[答案更改了 useLegacyV2RuntimeActivationPolicy](https://stackoverflow.com/questions/2455654/what-additional-configuration-is-necessary-to-reference-a-net-2-0-mixed-mode)

现在，当我将应用程序安装到程序文件并尝试运行它时，它会崩溃，但是当我将配置文件放在我的 exe 旁边时，它会运行。谁能告诉我那次崩溃的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:55:58.267

> 但是当它是 3.5 时，我不需要将 app.config 文件放在 exe 旁边

这在 3.5 中也是必需的。这是 CLR 找到 .config 文件的唯一方法。我不得不猜测你以前以某种方式逃脱了它，但这并不重要。但是现在让 CLR 找到 .config 文件*至关重要*，因为您确实需要该属性来允许加载混合模式程序集。

一个明显的方法是重建 C++/CLI 程序集并使其也以 v4 为目标。因此，您将不再需要 .config 文件。如果不是您的，请向该程序集的供应商或作者索取更新。

# python - Django：子目录中的静态文件

> ID：14546999
> 
> 赞同：1
> 
> 时间：2013-01-27T11:43:41.510
> 
> 标签：python, css, django

我有这样的静态文件

```
/static
  base.css
  /core
     /css
       style.css
     /js
       stuff.js 
```

例如，在本地主机上，当我将 href 设置为 /static/core/css/style.css 时，这工作正常但是当我实时部署时，当我尝试访问该 URL 时出现错误，因为 Django 似乎试图将其与 url 匹配图案。

我真的很想保留子目录，我如何确保它将所有子目录都视为静态目录？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:22:01.113

您的问题很可能是您需要配置生产服务器来为您提供静态内容。只要 DEBUG = True，开发服务器默认提供静态文件，但在实时服务器上，您不希望 Django 提供静态内容。相反，您希望前端服务器（Apache 或 Nginx）为您提供文件。

Django 文档是有关如何在生产中提供静态内容的良好信息来源： [https ://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)