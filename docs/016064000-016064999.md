# StackOverflow 问答 16064000-16064999

# java - 列表值的 TreeMap 构造函数

> ID：16064003
> 
> 赞同：0
> 
> 时间：2013-04-17T15:22:39.280
> 
> 标签：java, list, constructor, treemap

我有一个`Class1`私有属性`TreeMap<Long, List<Class2>> tree;`和其他属性，我想写一个构造函数`Class1(Class1 copyOfClass1)`。我应该显式地创建`List`值`TreeMap`（例如，在循环中），还是使用`this.tree=new TreeMap(copyOfClass1.tree)`它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:27:48.970

如果你使用`this.tree=new TreeMap(copyOfClass1.tree)`它将等同于

```
this.tree=new TreeMap();
this.tree.putAll(copyOfClass1.tree) 
```

但是，它不会复制存储在地图中的列表。键将指向相同的列表。

如果您不希望这种行为，我建议您遍历条目并制作列表的副本。

```
 this.tree = new TreeMap<Long, List<Class2>>();
    for (Entry<Long, List<Class2>> entry : copyOfClass1.tree.entrySet()) {
        this.tree.put(entry.getKey(), new ArrayList<Class2>(entry.getValue()));
    } 
```

# bugzilla - 使用强制性（匿名不可见）产品时，是否可以将 Bugzilla 的日历与 Thunderbird 集成

> ID：16064007
> 
> 赞同：2
> 
> 时间：2013-04-17T15:22:47.523
> 
> 标签：bugzilla, thunderbird

使用强制性（匿名不可见）产品时，是否可以将 Bugzilla 的 callendar 与 Thunderbird Lightning 插件集成？因此，用户体验与 Google 日历相同。

问题是 Lightning 需要知道 Bugzilla 服务器的密码（我很乐意提供）。

* * *

顺便说一句，使用“bugzilla 闪电集成”之类的 Google 查询进行搜索真的很困难，因为人们会收到很多关于流浪产品的无关 Bugzilla 错误报告......

# c# - 在两个表之间使用 LINQ 连接，仅从其中一个返回记录

> ID：16064012
> 
> 赞同：1
> 
> 时间：2013-04-17T15:23:01.237
> 
> 标签：c#, sql, linq, join

这是我的代码：

```
public IEnumerable<IUIUPCItemShort> GetActiveWithDefaultCost()
    {
        var query = from upc in DataManagerFactory.Get().Manage<IUPCItem>().GetAll()
                    join inv in DataManagerFactory.Get().Manage<IInventory>().GetAll() on upc.UPCID equals inv.UPCID
                    where inv.ExitDate == null
                         && upc.UnitCost == null
                    select upc;
        return
            query.Cast<IUIUPCItemShort>().ToList(); 
```

基本上，我正在尝试在两个表之间进行连接，`UPC`并且`Inventory`希望有一个仅`UPC`满足`WHERE`条件的列表，因为我只想向用户显示`UPC`. 我显然做错了什么，因为我收到了这条消息：

> 无法将“System.Linq.Expressions.MethodCallExpressionN”类型的对象转换为“SubSonic.Linq.Structure.ProjectionExpression”类型。

我认为问题出在我的 Linq 代码中，特别是在`select upc;` 我该如何做我想要完成的事情？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:33:09.573

您的查询是对`IUPCItem`项目的查询，而不是对`IUIUPCItemShort`项目的查询。看起来他们查询提供者不知道如何翻译该`Cast`转换的操作。

如果您知道`IUPCItem`在您的 C# 代码中可以转换为 a，`IUIUPCItemShort`那么您可能只是想避免让查询提供程序尝试处理`Cast`. 确保在 Linq to Objects 中完成，如下所示：

```
return query.AsEnumerable().
    Cast<IUIUPCItemShort>()
    .ToList(); 
```

如果这不起作用，则意味着该类型确实不是隐式可转换的；您需要确定如何正确地`IUIUPCItemShort`从 a获取一个实例`IUPCItem`，可能创建一个方法来处理您调用使用的转换`Select`。

# xcode - NavigationBar 后面的 UITabBarController 的视图

> ID：16064013
> 
> 赞同：0
> 
> 时间：2013-04-17T15:23:04.780
> 
> 标签：xcode, uiview, uitabbarcontroller, storyboard, uinavigationbar

通过使用情节提要设计我的应用程序，我实际上遇到了问题。我的起始视图是一个 UITabBarController。它有不同类型的控制器：UIViewControllers 和 UITableViewControllers。

我的 TabBarController 有一个属性： UINavigationBar *navBar; 事实上，我想在我的应用程序中显示一个导航栏。

我的问题是每个子控制器的视图都显示在导航栏下方。

我已经通过 ViewController 解决了这个问题，方法是添加第一个视图，然后考虑导航栏的高度添加其他视图。

但是问题仍然存在，我不能对 TableViewController 使用相同的技巧。

那么他们的东西是要在情节提要中设置，还是在我的 TabBarController 的 .m 文件中设置，以便其他控制器知道显示了导航栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:05:47.233

您应该始终根据视图的动态大小计算视图大小。例如

```
CGRect newFrame = CGRectMake(10, 10, self.view.bounds.size.width - 20,
                                     self.view.bounds.size.height- 20); 
```

如果有导航栏或标签栏，会自动调整视图，上面会有预期的结果。

此外，通常最好使用 AutoLayout 以避免任何硬编码的大小调整。

# php - 忽略的 if 语句

> ID：16064014
> 
> 赞同：1
> 
> 时间：2013-04-17T15:23:07.437
> 
> 标签：php, html, mysql, internet-explorer, if-statement

这只是我的第二个问题，所以请温柔，我是 PHP 新手。

我写了一个查询数据库的语句，然后检查一个文件以查看是否存在相关文件，然后再创建一个将图像放入的 div。问题是输出为没有图像的行创建了 div。

```
$query = "SELECT vehicle_make_logo FROM vehicle_makes";

$result = mysql_query($query);
if(!$result) die ("Database access failed: " . mysql_error());

$rows = mysql_num_rows($result);

for  ($j = 0; $j < $rows; ++$j)
{       
   $row = mysql_fetch_row($result);
   $image = 'images/vehicleBrands/'.$row[0];
   if(file_exists($image)){
       echo '<div class="component"><a href=""><img class="icons" src="images/vehicleBrands/'.$row[0].'"></a></div>';   
       }    
} 
```

我尝试添加一个空的 else 语句，但这并没有做任何事情。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:40:07.770

发生的另一种可能性是您的数据库表中有行，其中有一个空字段 for `verhicle_make_logo`，此时您的 if 语句正在检查该文件夹是否存在，这显然是存在的。如果您确定不是这种情况，请忽略以下内容，如果是，那么这可能是一个解决方案。

```
<?php

$query = "SELECT vehicle_make_logo FROM vehicle_makes";

$result = mysql_query($query);
if(!$result) die ("Database access failed: " . mysql_error());

$rows = mysql_num_rows($result);

for  ($j = 0; $j < $rows; ++$j)
{       
   $row = mysql_fetch_row($result);
   $image = 'images/vehicleBrands/'.$row[0];
   if(!empty($row[0]) && file_exists($image)){
       echo '<div class="component"><a href=""><img class="icons" src="images/vehicleBrands/'.$row[0].'"></a></div>';   
   }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:27:19.060

浏览器永远不会覆盖 PHP 代码，因为它永远不会看到 PHP 代码。浏览器只会准确呈现 PHP 代码传递给它的内容。在 IE 创建额外`div`标签的情况下，可能是您的 HTML 格式错误，IE 尝试对其进行规范化并在此过程中创建额外的 div 以关闭您可能忽略的一些打开标签。

尝试复制`view-source`页面的代码并通过 HTML 验证器运行它以查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:29:48.970

千万不要以为，无论您使用哪种**浏览器**，都会影响 PHP 的行为方式。因为，它不能！对您来说似乎是这样，因为有时，您的 PHP 脚本输出/回显的**HTML 标记/代码**...可能会根据您使用的浏览器类型（*特别*是 IE）以不同的方式呈现，因为糟透了。现在，要回到你的代码，试试这个

```
<?php

$query = "SELECT vehicle_make_logo FROM vehicle_makes";

$result = mysql_query($query) or die(mysql_error());
if(mysql_num_rows($rows) > 0) {

    for($j=0; $j < count($rows); ++$j){

        $row = mysql_fetch_row($result);
        $image = 'images/vehicleBrands/'.$row[0];
        if(file_exists($image)){
       echo '<div class="component">
            <a href=""><img class="icons" src="images/vehicleBrands/'.$row[0].'"></a></div>';   
       }    
    }
}else {echo 'No record found';} 
```

# web - 如何从网页进行 RDP

> ID：16064015
> 
> 赞同：8
> 
> 时间：2013-04-17T15:23:10.093
> 
> 标签：web, rdp

我正在尝试从我的网页打开到服务器的 rdp 会话。

```
<td><a href="file:///c:/Users/stegar06/Desktop/wtf.bat">testrdp</a></td> 
```

.bat 文件只写了以下行：mstsc /v:emea-cirrus

发生的情况是该文件只是作为文本文件显示在我的 chrome 浏览器中。所以网页只是加载并在顶部字面上说“mstsc /v:emea-cirrus”。我怎样才能让它启动远程桌面客户端并转到该地址？

我也尝试过制作一个 .rdp 文件并引用 href，它也只是显示为纯文本。RDP 文件是使用以下代码创建的：

```
screen mode id:i:2
desktopwidth:i:1436
desktopheight:i:925
session bpp:i:16
auto connect:i:1
full address:s:emea-orion
compression:i:1
keyboardhook:i:2
audiomode:i:2
redirectdrives:i:0
redirectprinters:i:0
redirectcomports:i:0
redirectsmartcards:i:0
displayconnectionbar:i:1
alternate shell:s:
shell working directory:s:
disable wallpaper:i:1
disable full window drag:i:1
disable menu anims:i:1
disable themes:i:1
bitmapcachepersistenable:i:1
winposstr:s:0,3,0,0,800,600
redirectclipboard:i:1
redirectposdevices:i:0
drivestoredirect:s:
autoreconnection enabled:i:1
authentication level:i:0
prompt for credentials:i:0
negotiate security layer:i:1
remoteapplicationmode:i:0
allow desktop composition:i:0
allow font smoothing:i:0
disable cursor setting:i:0
gatewayhostname:s:
gatewayusagemethod:i:0
gatewaycredentialssource:i:4
gatewayprofileusagemethod:i:0 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T15:48:53.967

您可以在服务器端创建 .RDP 文件，Windows 应将其与远程桌面关联，并强制浏览器下载它（而不是显示它）。在 PHP 中，你会这样做：

```
$file = 'screen mode id:i:2
desktopwidth:i:1436
desktopheight:i:925
session bpp:i:16
auto connect:i:1
full address:s:emea-orion
compression:i:1
keyboardhook:i:2
audiomode:i:2
redirectdrives:i:0
redirectprinters:i:0
redirectcomports:i:0
redirectsmartcards:i:0
displayconnectionbar:i:1
alternate shell:s:
shell working directory:s:
disable wallpaper:i:1
disable full window drag:i:1
disable menu anims:i:1
disable themes:i:1
bitmapcachepersistenable:i:1
winposstr:s:0,3,0,0,800,600
redirectclipboard:i:1
redirectposdevices:i:0
drivestoredirect:s:
autoreconnection enabled:i:1
authentication level:i:0
prompt for credentials:i:0
negotiate security layer:i:1
remoteapplicationmode:i:0
allow desktop composition:i:0
allow font smoothing:i:0
disable cursor setting:i:0
gatewayhostname:s:
gatewayusagemethod:i:0
gatewaycredentialssource:i:4
gatewayprofileusagemethod:i:0';

header("Content-Disposition: attachment; filename=filename.rdp");
header("Content-Type: application/rdp");
print $file;
exit(); 
```

我以前使用过这种技术并且效果很好。用户将单击该链接，系统会提示保存或打开，如果他们单击打开，远程桌面将使用指定的设置启动。

* * *

.NET 的示例，特别是 ASP.MVC

```
public FileResult RDP() {
    MemoryStream memoryStream = new MemoryStream();
    TextWriter tw = new StreamWriter(memoryStream);
    tw.WriteLine("screen mode id:i:2");
    tw.WriteLine("use multimon:i:0");
    ///The rest of the file
    memoryStream.Position = 0;
    return File(memoryStream, "application/rdp", "conenction.rdp");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-11T15:15:20.840

我可以建议使用基于浏览器的 RDP 客户端吗？现在你有开源选择，如果你有 Linux 服务器，可以从[Guacamole](https://github.com/glyptodon/guacamole-client) FreeRDP-WebConnect 或Windows 的[Myrtille](https://github.com/cedrozor/myrtille)中选择。还有商业软件，具有更多功能（取决于您的需要），例如 2X RDP 客户端或 LogMeIn。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:40:45.487

出于安全原因，您不能简单地通过任何现代浏览器的链接运行批处理文件。

如果您将对批处理文件的调用包装在 VBScript 中并通过 shell 运行它，则可以使其正常工作。但是，您需要打开 ActiveX 权限才能让 IE 允许这样做。

有关如何执行此操作的示例，请参见[此处](https://stackoverflow.com/questions/2138002/how-to-config-ie-to-make-wscript-shell-work)。

# matlab - Mesh 函数似乎交换了 x 和 y 值

> ID：16064019
> 
> 赞同：1
> 
> 时间：2013-04-17T15:23:30.297
> 
> 标签：matlab, mesh

我试图在 3d 平面上绘制一个非常简单的函数。

```
f=zeros(101,101);
xs=0:0.1:10;
ys=0:0.1:10;

for j=1:101
    f(1,j)=ys(j);
end 
```

这里有3个地块：

![在此处输入图像描述](https://i.stack.imgur.com/OQEpp.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/ntlx9.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/QpCSH.jpg)

第一个是 ymin 处 f 与 x 的关系图：

```
figure; plot(xs,f(:,1),'*r')
xlabel('x')
ylabel('f') 
```

第二个是 xmin 处 f 与 y 的关系图：

```
figure; plot(ys,f(1,:),'*r')
xlabel('y')
ylabel('f') 
```

最后第三个是 3d 网格：

```
figure; mesh(xs,ys,f)
xlabel('x')
ylabel('y') 
```

然而，网格图似乎与 2 个 2d 图相矛盾，如果你得到我，它似乎有 x 和 y 切换。任何人都可以帮忙吗？出于某种原因，它应该是 mesh(ys,xs,f) 吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:32:31.893

`mesh`没有切换你的`x`and `y`，这是一个定义问题。不要忘记矩阵没有`x`轴或`y`轴，而是有行维度和列维度。行维度通常首先在一对中声明，就像`x`维度一样，但是如果您将它等同于图像，那么您通常会让`x`轴穿过，实际上沿着列轴！

试试这样吧

```
for j=1:101
    f(j,1)=ys(j);
end

figure; plot(xs,f(1,:),'*r')
xlabel('x')
ylabel('f')

figure; plot(ys,f(:,1),'*r')
xlabel('y')
ylabel('f')

figure; mesh(xs,ys,f)
xlabel('x')
ylabel('y') 
```

# ruby-on-rails - 如何在“/admin”以外的地方安装 Active Admin？

> ID：16064021
> 
> 赞同：2
> 
> 时间：2013-04-17T15:23:33.597
> 
> 标签：ruby-on-rails, activeadmin

我正在尝试将 Active Admin 添加到 Rails 应用程序中，该应用程序已经有一个定制的 CMS 和 Admin 模型`/admin`，并且已经使用了设计 gem，但是当我尝试运行时`rails g active_admin:install`，`rake db:migrate`我收到了这个错误：

```
/usr/local/rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/activeadmin-0.6.0/lib/active_admin/namespace.rb:227:in `eval': Admin is not a module (TypeError)
from /usr/local/rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/activeadmin-0.6.0/lib/active_admin/namespace.rb:227:in `eval'
from /usr/local/rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/activeadmin-0.6.0/lib/active_admin/namespace.rb:227:in `register_module'
from /usr/local/rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/activeadmin-0.6.0/lib/active_admin/namespace.rb:41:in `initialize'
from /usr/local/rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/activeadmin-0.6.0/lib/active_admin/application.rb:142:in `new'
from /usr/local/rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/activeadmin-0.6.0/lib/active_admin/application.rb:142:in `namespace'
from /usr/local/rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/activeadmin-0.6.0/lib/active_admin/application.rb:128:in `register'
from /usr/local/rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/activeadmin-0.6.0/lib/active_admin.rb:79:in `register' 
```

我知道可以在安装创建的初始化程序中设置默认命名空间，但我想知道是否有办法将我选择的默认命名空间作为安装命令的选项传递？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:32:38.817

好的 - 终于想通了：

我保留了第一次运行 Active Admin 安装命令时创建的 active_admin.rb 初始化程序，并删除了它创建的所有其他文件。然后我将此行添加到初始化程序：

```
config.default_namespace = :my_custom_admin_namespace 
```

并再次运行安装，跳过设计用户类（如此[处](http://activeadmin.info/docs/0-installation.html#running_the_generator)建议），如下所示：

```
rails g active_admin:install --skip-users 
```

我运行了我的迁移，然后我能够访问 myapp.co.uk/my_custom_admin_namespace。起初，我确实看到了一个关于身份验证用户的未知方法的错误（考虑到我跳过了创建用户类，这是有道理的），所以我在初始化程序中注释掉了以下两行：

```
config.authentication_method = :authenticate_admin_user!
config.current_user_method = :current_admin_user 
```

现在我可以看到仪表板了。这还不是一个理想的设置，因为它缺少用户类和任何身份验证，但它是一个开始。

# php - php preg_match 为

> ID：16064023
> 
> 赞同：1
> 
> 时间：2013-04-17T15:23:35.750
> 
> 标签：php, html, html-parsing, preg-match

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:40:59.410

最好使用这样的 DOM 解析器：

```
$input = 'html input';
$html = new DOMDocument();
$html->loadHTML($input);

foreach($html->getElementsByTagName('div') as $div)
{
    if($div->getAttribute('class') == 'T-date')
    {
        foreach($div->getElementsByTagName('a') as $link)
            echo ($link->getAttribute('href') . "\t" . $link->nodeValue . "\n");
    }
} 
```

但如果你仍然想使用`preg_match`你可以使用这个：

```
$str = '<div class="T-date"> <a href=" different link ">123</a> </div>';
preg_match('/<div class="T-time"><a.*?>(.*?)<\/a></div>/', $str, $matches);
print_r($matches); 
```

# java - 简单的 XML 框架：基于属性值的 XPath 匹配

> ID：16064030
> 
> 赞同：4
> 
> 时间：2013-04-17T15:23:48.693
> 
> 标签：java, xml, xpath, simple-framework

给定这样的 XML：

```
...
<Sport SportId="1">
    <Name language="en">Soccer</Name>
    <Name language="fi">Jalkapallo</Name>       
     ...    
</Sport>
... 
```

如何使用[Simple XML Framework 将这](http://simple.sourceforge.net/)两个值读入 Java 类的字段中？（该`<Sport>`元素已正确映射到相应的类。）

```
public class Sport {    
    ...
    String nameEn;
    String nameFi;
    ...
} 
```

我试过这样的方法：

```
@Element(name = "Name")
@Path("Name[@language='en']")
String nameEn; 
```

但解析失败：

```
Exception in thread "main" org.simpleframework.xml.core.PathException: 
  Invalid index for path '[@language='en']' in field 'nameEn' 
```

此外，省略`@Element`这样的：

```
@Path("Name[@language='en']")
String nameEn; 
```

...解析不会崩溃，但`nameEn`值保持为空。

我希望匹配基于**语言属性**（而不是排序），但我想知道这是否可能（可能简单框架中的 XPath 支持有限？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T02:04:53.517

您是否尝试过明确获取元素的文本？IE`Name[@language='en']/text()`

您的 Xpath 正在选择*元素*，而不是元素的*文本*，这可能会导致某些 XML 引擎阻塞。

# codeigniter - 如何在没有控制器的情况下加载索引页面

> ID：16064035
> 
> 赞同：0
> 
> 时间：2013-04-17T15:24:10.387
> 
> 标签：codeigniter, codeigniter-2

如果它太简单，我有一个问题并道歉，但我真的无法弄清楚。例如，如果我有我的域：www.shop.com。我更改了 .htaccess 以省略对 index.php 的需要。现在我想知道如何在 url 地址中没有任何控制器的情况下加载例如页面（主页）。例如：

www.shop.com =========> 应该让我进入我网站的主页。

目前我能做到的唯一方法是定义一个控制器并这样做：

www.shop.com/controller/

谢谢，非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:26:46.667

转到 /application/config/routes.php

像这样添加 default_controller 规则

`$route['default_controller'] = 'home';`

所以现在 /application/controllers/home.php 方法 index() 将在索引页面上运行。

# parsing - Logparser 计数组件

> ID：16064036
> 
> 赞同：2
> 
> 时间：2013-04-17T15:24:15.467
> 
> 标签：parsing, logparser

我有一个从 PLC 转储的每日日志文件，示例文本是（它没有标题，只有原始数据）：

```
5/29/2009 3:05:33 PM: PLC Requested Hand Scan
5/29/2009 3:05:40 PM: HH Label Data Retrieved: 078797312
5/29/2009 3:05:40 PM: PLC Requested Scale Weight
5/29/2009 3:05:40 PM: Scale Data Retrieved:    56.0
5/29/2009 3:05:40 PM: ProcessMOSData Loop: 1
5/29/2009 3:05:40 PM: About to read
5/29/2009 3:05:40 PM: Read: False
5/29/2009 3:05:40 PM: ProcessMOSData Loop: 2
5/29/2009 3:05:40 PM: About to read
5/29/2009 3:05:40 PM: Read: True
5/29/2009 3:05:40 PM: Found Bin02
5/29/2009 3:05:40 PM: ProcessMOSData Loop: 3
5/29/2009 3:05:40 PM: About to read
5/29/2009 3:05:40 PM: Read: False
5/29/2009 3:05:40 PM: ProcessMOSData Loop: 4
5/29/2009 3:05:40 PM: About to read
5/29/2009 3:05:40 PM: Read: False
5/29/2009 3:05:40 PM: ProcessMOSData Loop: 5
5/29/2009 3:05:40 PM: About to read
5/29/2009 3:05:41 PM: Read: False
5/29/2009 3:05:41 PM: ProcessMOSData Loop: 6
5/29/2009 3:05:41 PM: About to read
5/29/2009 3:05:41 PM: Read: False
5/29/2009 3:05:41 PM: ProcessMOSData Loop: 7
5/29/2009 3:05:41 PM: About to read
5/29/2009 3:05:41 PM: Read: False
5/29/2009 3:05:41 PM: ProcessMOSData Loop: 8
5/29/2009 3:05:41 PM: About to read
5/29/2009 3:05:41 PM: Read: False
5/29/2009 3:05:41 PM: ProcessMOSData Loop: 9
5/29/2009 3:05:41 PM: About to read
5/29/2009 3:05:41 PM: Read: False
5/29/2009 3:05:41 PM: Got all data
5/29/2009 3:05:41 PM: Wrote good label ack 
```

我有 15 个“关键短语”要数一数。我有 1150 个文本文件，我可能会将它们组合成一个大文本文件，然后在初始读取后将其读取并转储到新表中。它可以输出到 csv 或 sql，并不重要。最后一部分将只是监控流程变更的改进如何提高该领域的效率。

例如，其中一个关键短语是“PLC 请求手部扫描”，因此在示例中它将有 2009 年 5 月 29 日 1 次。我在想顶部的标题将是关键短语，而左侧将是不同的日子。这似乎是 logparser 可以做的事情，但是如果没有标题并且每一行只是一个长字符串，我不知道如何开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T03:45:36.577

YES, you can solve this using LogParser. To get the right query easyly install LogParser Lizard, its a simple and free tool for you to test your queries at Logparser, before coding.

Set Logparser input to TEXTLINE input format.

At the FROM clause you can contatenate as many files as you want, like this FROM 'filename', 'filename2', 'filename3' and so on (all must have same structure)

Here is a logparser query that will help you to start

```
SELECT extract_token(Text,0,' ') AS Date,
       strcat(extract_token(extract_token(Text,1,' '),0,'PM: '),' PM') AS Time,
       extract_token(Text,1,'PM: ') AS MSG
FROM 'F:\test.txt' 
```

Also you can group by msg doing this

```
SELECT extract_token(Text,1,'PM: ') AS MSG
FROM 'F:\test.txt'
GROUP BY MSG 
```

# php - CakePHP：如何设置具有多级依赖关系的变量

> ID：16064042
> 
> 赞同：0
> 
> 时间：2013-04-17T15:24:20.003
> 
> 标签：php, cakephp, cakephp-2.0

在我的控制器中，我想设置一个变量（A），该变量与另一个模型（B）具有一对多关系，而另一个模型（B）与另一个模型（C）具有 HABTM（具有并属于多个）关系。

目前，当我在控制器中设置变量时，我可以访问视图中的模型（B），但不能访问 ITS 依赖项（模型 C）：

```
//A's controller...
public function admin_view($id = NULL) {
    $A = $this->A->findById($id);       
    $this->set('A', $A);
} 
```

这是我在视图中转储变量时看到的内容：

```
//A's admin_view.ctp...
//debug($A);

array(
'A' => array(
    'id' => '1',
    'name' => 'Name',
    'created' => '2013-04-04 15:25:54',
    'modified' => '2013-04-04 15:25:54'
),
'B' => array(
    (int) 0 => array(
        'id' => '1',
        'created' => '0000-00-00 00:00:00',
        'modified' => '2013-04-05 10:31:42'
    ),
    (int) 1 => array(
        'id' => '13',
        'created' => '0000-00-00 00:00:00',
        'modified' => '2013-04-05 10:31:42' 
```

有没有办法设置变量，这样每个“B”都会包含它各自的Cs？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:30:57.043

[http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

```
// In your model
var $actsAs = array('Containable'); 
```

* * *

```
// In your controller
public function admin_view($id = NULL) {
    $this->A->contain(array('B' => array('C')));
    $A = $this->A->findById($id);       
    $this->set('A', $A);
} 
```

这应该可以满足您的需要，将 recursive 设置为 2 是一种简单的方法，但如果您有其他关联，您将获得冗余数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:37:48.910

那么，解释 $recursive 和 Containable 行为：
[Recursive](http://book.cakephp.org/2.0/en/models/model-attributes.html)是介于 -1 到 2 之间的值，基本上它告诉模型“我想获取此记录以及与其关联的所有记录”，如果它设置为 2。如果它是 -1 ，然后用 find 或 read 你只能得到*那个模型数据*。 [Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)让您指定要获取的模型/其他模型的字段（尽管它们必须具有关联）。

我已经重复了很多次我不喜欢，`$recursive != -1`因为我觉得它不能让你控制你检索什么数据以及何时检索。我建议你使用

```
class AppModel extends Model {
public $actsAs = array('Containable');
public $recursive = -1;

     //etc 
} 
```

在 AppMdel 中，因此默认情况下所有内容都不是递归和可包含的（尽管查询不需要工作）。然后，关于您的问题，查找查询应该是

```
$A = $this->A->find('first', array('conditions'=>array('id'=>$id),
                                   'contain'=>array('B-model'=>array('C-model')))); 
```

# xpath - 编写匹配前缀的 XPath 表达式

> ID：16064044
> 
> 赞同：4
> 
> 时间：2013-04-17T15:24:26.760
> 
> 标签：xpath

我对 XPath 相当陌生。

要求是创建一个返回元素列表而不是单个元素的 XPath 表达式。之后，我们应用自定义逻辑在列表中定位所需的元素。

可以使用以下 XPath 访问单个元素：

```
.//*[@id='reportListItemID0']/td[12]/a
.//*[@id='reportListItemID1']/td[12]/a
.//*[@id='reportListItemID2']/td[12]/a
.
.
.
.//*[@id='reportListItemID20']/td[12]/a
.//*[@id='reportListItemID21']/td[12]/a 
```

请告诉我，如何编写返回所有上述元素的 XPath 表达式。

我尝试了以下方法，但它们没有用：

```
.//*[@id='reportListItemID.']/td[12]/a
.//*[@id='reportListItemID..']/td[12]/a
.//*[@id='reportListItemID*']/td[12]/a
.//*[@id='reportListItemID**']/td[12]/a 
```

请让我知道我错过了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:28:11.390

您应该使用以下[`starts-with()`](http://msdn.microsoft.com/en-us/library/ms256174.aspx)功能：

```
.//*[starts-with(@id,'reportListItemID')]/td[12]/a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T19:50:02.723

您还可以使用包含：

```
//*[contains(@id, 'reportListItemID')]/td[12]/a 
```

# ios - NSFetchedResultsController 并正确分组

> ID：16064051
> 
> 赞同：0
> 
> 时间：2013-04-17T15:24:48.150
> 
> 标签：ios, core-data, nspredicate, nsfetchedresultscontroller, magicalrecord

我有以下问题。我有一个由 NSFetchedResultsController 提供支持的 UITableview。它应该显示一个项目、文件夹和文件。没有比这更大的等级制度了。所以一个项目有几个文件夹，那些有几个文件。现在我的表格视图应该显示这些文件，按文件夹分组。

所以我认为我的获取请求的谓词只是：

```
[NSPredicate predicateWithFormat:@"folder.project = %@", self.project]; 
```

然后我会使用 MagicalRecord 来制作一个 NSFetchedResultsController ，方法如下：

```
[File fetchAllGroupedBy:@"folder.name"
          withPredicate:sectionPredicate
               sortedBy:@"folder.name"
              ascending:YES]; 
```

这基本上适用于一个大问题......如果文件夹中没有文件，我不会得到该文件夹​​的部分（我需要它！！！！）

所以我需要的是 tableview 来显示空文件夹的部分标题：

```
Folder A
  File 1
  File 2
Folder B
Folder C
  File 3 
```

我可以在没有 NSFetchedResultsController 的情况下做到这一点，但我喜欢它很好地处理行和部分的插入/删除，并且它可以观察变化......

感谢帮助，干杯，乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:27:18.283

解决方案确实有点复杂。我将尝试解释部分解决方案（没有嵌套文件夹，不支持部分排序​​顺序）

模型更改：
1）将父实体设置`Folder`为`File`（如果您使用虚拟项目则不需要）。
2）将BOOL字段添加`isFinal`到`File`实体。
3) 为实体生成类文件。
4）像这样`Folder.h`实现`-awakeFromInsert`：

```
- (void) awakeFromInsert
{
    self.isFinal = YES;
    self.folder = self;//You could also fabricate a dummy item
} 
```

FetchedResultsController:
1) 像这样设置你的获取请求：

```
NSFetchRequest* request = [[NSFetchRequest alloc] initWithEntityName:@"File"];
NSSortDescriptor* terminalSort = [NSSortDescriptor sortDescriptorWithKey:@"isFinal" ascending:YES];
NSSortDescriptor* nameSort = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES];
[request setSortDescriptors:@[terminalSort,nameSort]];
[request setPredicate:[NSPredicate predicateWithFormat:@"folder.project == %@",project]]
//Any additional settings 
```

2）像这样初始化你的FRC：

```
self.fetchedResultsController =
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:self.managedObjectContext
                                      sectionNameKeyPath:@"folder"//or @"folder.<some unique property>"
                                               cacheName:nil]; 
```

请注意，`sectionNameKeyPath`设置为`folder`，并且不`folder.name`支持具有相同名称的文件夹（如果不需要，并且文件夹名称是唯一的，请使用`folder.name`）

3）在您`-controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`添加方法的开头：

```
File* file = (File*)anObject;
if (file.isFinal) {
    return;
} 
```

表视图：
1) 实现：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];
    return [sectionInfo numberOfObjects] - 1;
} 
```

2) 实施：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    id<NSFetchedResultsSectionInfo> sec = [self.fetchedResultsController sections][section];

    return [[[[sec objects] objectAtIndex:0] folder] name];
} 
```

这应该为您提供所需的基本功能。为了支持更复杂的行为，需要进行额外的更改。

# html - Chrome 日期字段 min/max 默默地“更正”年份

> ID：16064054
> 
> 赞同：4
> 
> 时间：2013-04-17T15:24:56.773
> 
> 标签：html, validation, google-chrome, date

我有一个包含 type=date 字段的 HTML 表单。每个日期字段都有一个最小值/最大值设置为基本的完整性检查，因为我的用户喜欢在表单中输入（而不是使用日期选择器）并且他们经常输入像“4/17/0213”这样的日期。

表单由表单提交触发的 jquery ajax 调用提交。

所有用户都使用 Chrome 作为浏览器。

当他们输入完全超出范围的日期时，日期范围验证会正常工作。当他们仅在现有日期中更改*year*或 year 和日期的其他部分（月或日，但不能同时更改两者）以使其超出有效范围时，Chrome 不会给他们一个验证错误。相反，它会**默默地**将年份“更正”回以前的状态，使其保持在有效的日期范围内。这会导致垃圾值以静默方式提交到数据库。

我已经尝试在 javascript 中编写自己的验证例程，但似乎问题在于基础数据值不会更改为无效年份，因此尝试获取它并检查它是浪费时间。就 Chrome 而言，只是没有输入无效的年份。

有谁知道这个的解决方法？

编辑：我已经包含了一些代码来演示部分问题。

```
<!DOCTYPE HTML>
<html>
<head>
  <title>Date bug test</title>
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script>
    $(document).ready(function(){
      $(document).on("submit", "FORM", function(){
        $("#dateshow").html("Date entered was: " +  $("input[name=foo]").val());
        return true;
       });
     });
  </script>
</head>
<body>
<form action="javascript:void(0)">
  <input type=date name="foo" min='1980-01-01' max='2080-01-01' />
  <input type=text name="bar">
  <input type=submit>
</form>
<div id=dateshow></div>
</body> 
```

展示：

*   将其保存为 html 文件并在 Chrome 中打开
*   在日期字段中输入 1980 到 2080 之间的日期并提交
*   日期将显示为提交。
*   在日期字段中选择**ONLY THE YEAR**并将其更改为有效范围之外的值
*   再次点击提交。
*   请注意，提交的日期*不会更改*，即使您的无效日期仍显示在表单控件中。

# android - 为什么 Nexus 7 和 Nexus 10 在相同的操作系统下会有不同的音频延迟？

> ID：16064055
> 
> 赞同：-2
> 
> 时间：2013-04-17T15:24:58.130
> 
> 标签：android, audio, low-latency, nexus-7

我读过 Android 4.2 Jelly Bean OS 上的音频延迟已降至 12 毫秒。但是，我还了解到，Nexus 10 上提供了这种改进，但 Nexus 7 上没有。

这两个设备如何使用相同的操作系统，却有不同的音频延迟？这些信息准确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:28:33.260

的具体实施`AudioHardwareInterface`是电话供应商的实施决策——在许多情况下，它是基于 的`alsa`，但并非必须如此。

在此级别之下，有大量使用的 SoC 平台可供选择（Nexus 7 中的 nVidia Tegra3 和 Nexus 10 中的三星 Exynos）。操作系统在此级别以下 绝对*不一样。*

可能影响延迟的因素包括：

*   用于音频的 DMA 缓冲区的硬件限制 - 最小大小或要求它是 2 的幂大小。
*   设备驱动程序强制执行的最小缓冲区大小 - 合理与否。
*   低延迟意味着音频需要更频繁地服务 - 一直到应用程序堆栈。`mlock`理想情况下，您需要能够为任何线程生成音频以及程序代码和内存堆栈的能力获得实时调度。如果你不能得到这个（我怀疑你仍然不能在 Android 上），选择延迟的值，以便音频在大多数时间可靠地运行。

# .net - 为什么我的任务在 ASP.NET 中运行时包装了对 CloudBlockBlob.BeginDownloadToStream 的调用会永远阻塞？

> ID：16064056
> 
> 赞同：0
> 
> 时间：2013-04-17T15:25:00.633
> 
> 标签：.net, asp.net-mvc, task-parallel-library, azure-blob-storage

我有一个问题，即创建的任务`Task.Factory.FromAsync`永远不会完成。`System.Threading.Tasks.TaskStatus.WaitingForActivation`当我通过路由到 ASP.NET MVC 控制器操作的 Web 请求（使用 IIS Express）运行代码时，它的状态保持不变。

当我从单元测试中执行相同的操作方法时，任务按预期完成。

我正在使用下面的扩展方法从开始/结束`CloudBlockBlob.DownloadToStream`方法（来自`WindowsAzure.Storage 2.0.5.1`Nuget 包）创建一个任务。

```
public static Task DownloadToStreamAsync(
        this CloudBlockBlob blob,
        Stream target)
    {
        if (blob == null) throw new ArgumentNullException("blob");

        var IAsyncResult = blob.BeginDownloadToStream(target, null, null);

        return Task.Factory.FromAsync(IAsyncResult, blob.EndDownloadToStream);
    } 
```

# performance - jquery mobile中的.get（）方法在更改页面时不加载

> ID：16064059
> 
> 赞同：0
> 
> 时间：2013-04-17T15:25:24.237
> 
> 标签：performance, jquery, cordova, jquery-mobile, jquery-get

我有一个使用phonegap 构建的移动应用程序，并且我正在使用jquery mobile。在第一页我有另一个链接，href="page2.html"。

当第二个页面加载时，我使用 .get() 来检索 xml 数据并使用 xml2json.js 将其转换为 json。如果我将此页面设置为索引并在打开应用程序时加载它，则该页面可以正常工作，因此我知道脚本正在运行。但是，当通过另一个页面的链接加载它时， .get() 方法似乎没有加载任何数据。

```
<script type="text/javascript" src="cordova-2.4.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script type="text/javascript" src="js/jquery.xml2json.js"></script>
        <script type="text/javascript">
            $.get('http://domain.com/app/getfacilities/?org=mysite', function(xml){
                  var facilities = $.xml2json(xml);
                  for (i=0; i<=facilities.facility.length; i++){
                    var locName = facilities.facility[i].name;
                    var id = facilities.facility[i].id;
                    $("#fieldList").append("<li><a href='#'>" + locName + "</a></li>").listview('refresh');
                  }
                  });
            </script>
        <script type="text/javascript">
            app.initialize();
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:03:09.847

您需要将`<script>`标签放在标签内`<div data-role="page">`。`<script>`位于标签之外的`<div data-role="page">`标签只会在您的第一个/初始页面加载时加载，这似乎与您的体验一致。

```
<div data-role="page">
    <script>
        // js script here
    </script>
</div> 
```

# c# - Visual Web Developer html 按钮 onclick 事件未触发

> ID：16064061
> 
> 赞同：1
> 
> 时间：2013-04-17T15:25:29.133
> 
> 标签：c#, visual-web-developer, vwdexpress

下面是我的代码：

默认.aspx：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" 
    AutoEventWireup="true" CodeBehind="Default.aspx.cs" 
    Inherits="TestAjax._Default" %>    

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>

<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

    //I set an onClick event on this button:

    < input type = "button" id="btnCl" onclick = "doJob" />

</asp:Content> 
```

默认.aspx.cs：

```
protected void Page_Load(object sender, EventArgs e)
{
    //fires on page load;
}

void doJob()
{
    //code here;
} 
```

问题是：

为什么没有触发 onclick 事件？（在 default.aspx btnCL 上）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:30:24.230

您需要使用这样的`asp:Button`控件：

```
<asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Button" /> 
```

然后有这样的事件方法：

```
protected void Button1_Click(object sender, EventArgs e)
{
    // your code here
} 
```

当使用常规`input`标记时，`onclick`对于 javascript，您必须改为使用 ASP.NET 控件`asp:Button`才能连接 C# 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:32:27.570

正如我在 OP 中的评论中所述，您当前的方法是进行客户端调用（因此寻找一个名为 的 JavaScript 函数`doJob`。您需要进行服务器端调用，因此需要使用`<asp:Button>`控件。一些示例说明如何实现：

**网页 (.aspx)**

```
<asp:Button ID="btnDoJob" Runat="server" Text="Do Job" OnClick="btnDoJob_Click" /> 
```

**代码隐藏 (.CS)**

```
protected void btnDoJob_Click(object sender, EventArgs e)
{
    // Do your action here...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:28:21.090

因为`dojob()`是服务器端函数，但`onclick`在该`input`元素上是客户端事件。您可能会在 JavaScript 控制台中收到错误消息，指出这`dojob()`是一个未定义的函数。

使用 an`asp:Button`而不是 an`input`来利用服务器端点击事件。另外，`dojob()`应该是`protected`。通过不声明保护级别，我认为默认设置是`private`页面控件甚至可能看不到它。它应该与按钮单击的事件处理程序匹配：

```
protected void dojob(Object sender, EventArgs e)
{

} 
```

# java - 如何从 Java 应用程序在 Android 设备上运行 strace 命令

> ID：16064062
> 
> 赞同：0
> 
> 时间：2013-04-17T15:25:30.247
> 
> 标签：java, android, strace

我无法从我的 java 应用程序运行 strace 命令。

我试过上面的代码

```
try {
    // Executes the command.
    java.lang.Process process = Runtime.getRuntime().exec("strace -p 2545 -o /mnt/sdcard/Result.txt");

    BufferedReader reader = new BufferedReader(
            new InputStreamReader(process.getInputStream()));
    int read;
    char[] buffer = new char[4096];
    StringBuffer output = new StringBuffer();
    while ((read = reader.read(buffer)) > 0) {
        output.append(buffer, 0, read);
    }
    reader.close();

    // Waits for the command to finish.
    process.waitFor();

    output.toString() ;
} catch (IOException e) {
    throw new RuntimeException(e);
} catch (InterruptedException e) {
    throw new RuntimeException(e);
} 
```

我可以请你帮忙吗？我的 android 版本是 2.2，我的内核版本是 2.6.32.9

# python - 如何在输出中设置两位小数

> ID：16064071
> 
> 赞同：0
> 
> 时间：2013-04-17T15:26:03.983
> 
> 标签：python, python-3.x, decimal, currency

我试图让 Python 将一个简单的提示计算器程序的输出四舍五入到小数点后两位，但到目前为止我还没有很高兴弄清楚它。下面是相关的代码部分。我希望以传统的美元和美分格式打印输出（例如，$XX.XX）

```
bill = float(input("\n\nWhat is the bill for your meal?: $"))

low_tip = bill * .15
print("\nIf you would like to tip the waiter 15%, the amount of the \ntip is: $", low_tip)

low_total = bill + low_tip
print("\nSo, your total bill including a 15% tip would be: $", low_total)

high_tip = bill * .20
print("\nIf you would like to tip the waiter 20%, the amount of the \ntip is: $", high_tip)

high_total = bill + high_tip
print("\nSo, your total bill including a 20% tip would be: $", high_total) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:30:44.530

您可以在打印之前将浮点数格式化为字符串：

```
>>> '${0:.2f}'.format(15.5)
'$15.50' 
```

或使用`%`运算符：

```
>>>'$%.2f' % 15.5
'$15.50' 
```

整个`print`s 看起来像：

```
print("\nSo, your total bill including a 20% tip would be: ${0:.2f}".format(high_total)) 
```

# php - 显示图像缩略图和带有摘要的段落

> ID：16064075
> 
> 赞同：0
> 
> 时间：2013-04-17T15:26:13.553
> 
> 标签：php, wordpress, function

我正在使用 WordPress，但似乎无法获得我正在寻找的功能。我想做的是类似于 Smashing Magazine 的东西，在主页上的帖子中显示第一段和图像。SM 显示第二段，但我不需要这个。

我正在寻找一些东西，最好是在`functions.php`，我可以限制这一点。到目前为止，我只`CSS`在我展示的地方看到过这样的方法：none mo

显然，这不是理想的解决方案，尤其是考虑到像这样的旧浏览器`IE8`（这是我所知道的）。

我已经尝试过诸如爆炸字符串之类的技术，但这不是我想要的。

任何想法，任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:47:02.400

如果`can`编辑wordpress函数系统，那么函数

*   最新的帖子是：`wp_get_recent_posts( $args, $output )`
*   对于缩略图： `get_the_post_thumbnail( $post_id, $size, $attr )`
*   总结：`$excerpt = get_the_excerpt( $deprecated )`

如果您认为您`cannot`编辑了代码，则选择一个插件，例如：`special recent posts`，（还有一个给定的短代码），编辑您的偏好并将其输入到您需要的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:42:02.773

要显示第一段，您可以使用`Except`

**参考：[http ://codex.wordpress.org/Excerpt](http://codex.wordpress.org/Excerpt)**

```
 function excerpt_read_more_link($output) {
     global $post;
     return $output . '<a href="'. get_permalink($post->ID) . '"> Read More...</a>';
    }
    add_filter('the_excerpt', 'excerpt_read_more_link'); 
```

**参考：[http ://codex.wordpress.org/Template_Tags/the_excerpt](http://codex.wordpress.org/Template_Tags/the_excerpt)**

并且还可以看到 **`the_excerpt();`**

使用过滤器控制摘录长度

默认情况下，摘录长度设置为 55 个单词。要使用 excerpt_length 过滤器更改摘录长度，请将以下代码添加到主题中的 functions.php 文件中：

```
function custom_excerpt_length( $length ) {
    return 20;
}
add_filter( 'excerpt_length', 'custom_excerpt_length', 999 ); 
```

# android - 多滚动视图android

> ID：16064082
> 
> 赞同：0
> 
> 时间：2013-04-17T15:26:38.190
> 
> 标签：android, scroll, expandablelistview

我有一个可扩展列表视图，上面有一个包含图像的相对布局。我想同时滚动列表视图和上面的布局？是否可以 ？

```
<RelativeLayout
    android:id="@+id/thumbnail"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="15dip"
    android:layout_marginTop="38dip"
    android:padding="3dip" >

        <ImageView
            android:id="@+id/list_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/sss" />
    </RelativeLayout>

<RelativeLayout
    android:id="@+id/topbarsecond"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

 <ExpandableListView
    android:id="@+id/expandableListView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dip"
    android:layout_marginRight="5dip"
    android:layout_marginBottom="25dip"
    android:layout_marginTop="5dip"
    android:layout_alignParentLeft="true"
    android:cacheColorHint="#00000000"
    android:divider="#d6d7da"
    android:dividerHeight="5dp"
    android:groupIndicator="@null"
    android:layout_alignParentTop="true" >
</ExpandableListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:56:41.883

只需将所有视图（包括 ListView）放入布局中，然后将其放入 ScrollView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:03:35.320

由于默认情况下列表已经有一个滚动视图，添加另一个滚动视图可能无法正常工作，因此尝试在没有列表视图的封闭布局中放置一个单独的滚动视图，这可能会解决您的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:11:59.257

您可以将RelativeLayout 添加为ExpandableListView 的HeaderView。

```
ListView#addHeaderView(View v) 
```

请参考[这个](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)。

# c++ - '{' 标记之前的预期 unqualified-id 模板错误

> ID：16064083
> 
> 赞同：0
> 
> 时间：2013-04-17T15:26:39.247
> 
> 标签：c++, templates, avr, atmel

我目前正在尝试将一个库（IsoAgLib）集成到我的 CPP 项目中。我对 CPP 没有很深的经验。我得到的错误是：“'{'令牌之前的预期不合格ID”。我相信这与模板有关，因为我遇到了其他类似的问题。它也可能与 abs 函数调用有关。任何帮助将非常感激！

编辑：我在模板之后省略了代码，文件很大

错误 45 在“{”令牌之前预期不合格 ID
错误 47 在“）”令牌之前预期不合格 ID
错误 46 在“{”令牌之前预期“）”

所有这些错误都发生在第 31 行，即“模板内联 T abs(const T& val)”（我在开头留下了注释）

```
#ifndef UTIL_FUNCS_H
#define UTIL_FUNCS_H

#include <IsoAgLib/isoaglib_config.h>
#ifdef USE_DATASTREAMS_IO
class StreamInput_c;
#endif
#include <cstdlib>  // Include before vector or else CNAMESPACE stuff is screwed up for Tasking
#include <cstring>
#include <vector>
#ifdef USE_VT_UNICODE_SUPPORT
#include <string>
#endif

// Begin Namespace __IsoAgLib
namespace __IsoAgLib
{
  template <class T> inline T abs(const T& val)
  {
    return (val < 0) ? (-val) : val;
  }

} // end of namespace __IsoAgLib
#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:31:48.677

在某些系统上 abs() 和其他系统，例如 min() 和 max() 被实现为预处理器宏。要查看您是否属于这种情况，请添加以下行

```
#undef abs 
```

在这一行之后：

```
#include <cstdlib> 
```

预处理器不尊重命名空间，并且会在将其提供给编译器之前盲目地将其 abs 定义替换到您的源代码中，即使结果是语法混乱。

# extjs - 将 JSON 数据加载到 ExtJs 网格中

> ID：16064084
> 
> 赞同：0
> 
> 时间：2013-04-17T15:26:39.607
> 
> 标签：extjs, extjs3

我是 ExtJs 的新手，我无法以任何形式将 JSON 数据加载到网格中——无论是内联还是从静态 JSON 数据文件。非常感谢任何帮助。

只显示空网格 - 没有任何数据。

> ```
>  var Grid1Store = new Ext.data.JsonStore({
>       root: 'users',
>       fields: [ 'id', 'name', 'email' ],
>       autoLoad: true,
>       data: { users: [ 
>         { "id": 1, "name":"John Smith", "email":"jsmith@example.com"},
>         { "id": 2, "name":"Anna Smith", "email":"asmith@example.com"},
>         { "id": 3, "name":"Peter Smith", "email":"psmith@example.com"},
>         { "id": 4, "name":"Tom Smith", "email":"tsmith@example.com"},
>         { "id": 5, "name":"Andy Smith", "email":"asmith@example.com"},
>         { "id": 6, "name":"Nick Smith", "email":"nsmith@example.com"}
>       ]}
>     });   
>           var onReadyFunction = function(){
> 
>               var grid = new Ext.grid.GridPanel({
>           renderTo: Ext.getBody(),
>           frame: true,
>           title: 'Database',
>           width:300,              
>           store: Grid1Store,
>               columns: [
>                   {text: "Id", dataIndex: 'id'},
>                   {text: "Name", dataIndex: 'name'},
>                   {text: "Email", dataIndex: 'email'}
>               ]
>                       });
> 
>       }
>       Ext.onReady(onReadyFunction); 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:29:24.830

JsonStore 不将 root 作为配置参数。所以在 JsonStore 实例中设置根参数是没有用的。

此外，您的数据应该是这样才能使其正常工作。

```
var Grid1Store = new Ext.data.JsonStore({
  fields: [ 'id', 'name', 'email' ],
  autoLoad: true,
  data:  [ 
    { "id": 1, "name":"John Smith", "email":"jsmith@example.com"},
    { "id": 2, "name":"Anna Smith", "email":"asmith@example.com"},
    { "id": 3, "name":"Peter Smith", "email":"psmith@example.com"},
    { "id": 4, "name":"Tom Smith", "email":"tsmith@example.com"},
    { "id": 5, "name":"Andy Smith", "email":"asmith@example.com"},
    { "id": 6, "name":"Nick Smith", "email":"nsmith@example.com"}
  ]
}); 
```

如果您希望 json 结构与您提到的相同，以下是一个解决方案。将其保存为不同的文件 - 比如说“data.json”。通过以下方式重新定义您的商店。

```
var Grid1Store = new Ext.data.JsonStore({
  fields: [ 'id', 'name', 'email' ],
  autoLoad: true,
  proxy:{
    type:'ajax',
    url:'something.json',
    reader:{
         root:'users'
        }
    }

}); 
```

这就是您使用“root”的方式 - 作为代理对象的读取器配置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:42:25.387

首先，您不需要将 autoLoad 设置为 true，因为您已经指定了数据。AutoLoad 用于当您使用加载方法时。

在声明 json 对象之前，您可能也不需要“用户：”。您需要的另一件事是 json 阅读器配置。

请参考 extjs 文档[http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.data.JsonStore](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.data.JsonStore)

extjs 文档很棒，我一直在使用它们！！

希望这可以帮助

巴兹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:39:23.013

你的代码工作正常。您上面提到的代码工作正常。我希望你使用的是 ExtJS3.4 版本。我在我的设置中执行你的代码，它工作正常。

您可能会发现的唯一问题是标题部分不会出现。这是因为您使用的是“文本”配置而不是“标题”配置。此外，您没有指定高度并使用较少的宽度。

如果这个答案让你满意，请点击^符号给我打分。

请参考下面的代码进行修改。

```
<html>
<head>
<title>Hello World Window</title>
<link rel="stylesheet" type="text/css" href="C:\Documents and Settings\test\Desktop\ext-3.4.0\resources\css\ext-all.css" />
<script type="text/javascript" src="C:\Documents and Settings\test\Desktop\ext-3.4.0\adapter\ext\ext-base.js"></script>
<script type="text/javascript" src="C:\Documents and Settings\test\Desktop\ext-3.4.0\ext-all.js"></script>
</head>

<body>
<script type="text/javascript">
var Grid1Store = new Ext.data.JsonStore({
      root: 'users',
      fields: [ 'id', 'name', 'email' ],
      //autoLoad: true,
      data: { users: [ 
        { "id": 1, "name":"John Smith", "email":"jsmith@example.com"},
        { "id": 2, "name":"Anna Smith", "email":"asmith@example.com"},
        { "id": 3, "name":"Peter Smith", "email":"psmith@example.com"},
        { "id": 4, "name":"Tom Smith", "email":"tsmith@example.com"},
        { "id": 5, "name":"Andy Smith", "email":"asmith@example.com"},
        { "id": 6, "name":"Nick Smith", "email":"nsmith@example.com"}
      ]}
    });   

           var onReadyFunction = function(){

              var grid = new Ext.grid.GridPanel({
          renderTo: Ext.getBody(),
          frame: true,
          title: 'Database',
          width:500,
          height:600,              
          store: Grid1Store,
              columns: [
                  {header: "Id", dataIndex: 'id'},
                  {header: "Name", dataIndex: 'name'},
                  {header: "Email", dataIndex: 'email'}
              ]
                      });

      }
      Ext.onReady(onReadyFunction);
</script> 
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T23:07:03.580

看起来你的问题是你定义商店的地方，把它放在你的 onReady 函数中

# c# - 提供动态重载时出现 StackOverflowException

> ID：16064085
> 
> 赞同：1
> 
> 时间：2013-04-17T15:26:39.720
> 
> 标签：c#, dynamic, overloading, stack-overflow

我有一长串方法重载`M(...)`，我想提供一个通用方法`M(object)`，它可以根据对象的类型调用正确的重载。就在我编写一个大的 if 语句来调用正确的重载之前，我意识到 C# 4 有这个`dynamic`关键字。所以我写了这个：

```
class X
{
    public void M(int x)
    { Console.WriteLine("M(int)"); }

    public void M(long x)
    { Console.WriteLine("M(long)"); }

    // ...20 more overloads of M() here...

    // For if you have an object of an unknown type:
    public void M(dynamic x)
    { M(x); }
} 
```

当我正确使用它时，一切都很好。但是，当我提供*错误*类型的值时，动态重载解析（显然）会递归到`M(dynamic)`，然后再次尝试，导致无限递归，最终导致`StackOverflowException`.

```
X x = new X();
x.M((int)10);               // "M(int)"
x.M((long)10);              // "M(long)"
x.M((object)10);            // "M(int)"
x.M((object)String.Empty);  // StackOverflowException 
```

当然，`M(dynamic)`重载在技术上与 相同`M(object)`，因此重载解析会一次又一次地选择动态重载......

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:30:24.447

为了使调用者不需要做任何事情，最简单的方法*是*将“要调用的公共方法”与“实现”分开：

```
public void M(dynamic x)
{
    MImpl(x);
}

private void MImpl(int x)
{
    Console.WriteLine("M(int)");
}

// etc

private void MImpl(object x)
{
    // No more specific overloads matched. Throw some appropriate exception,
    // or take a default action.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:26:39.720

我意识到*不*`M(dynamic)`应该提供过载。为了获得相同的行为，让调用者动态调用该方法。像这样：

 *```
X x = new X();
x.M((int)10);               // "M(int)"
x.M((long)10);              // "M(long)"
x.M((dynamic)10);           // "M(int)"
x.M((dynamic)String.Empty); // RuntimeBinderException 
```*

# optimization - 每秒 flop 是衡量处理器速度的指标，还是衡量算法速度的指标？

> ID：16064090
> 
> 赞同：0
> 
> 时间：2013-04-17T15:26:43.277
> 
> 标签：optimization, floating-point, code-analysis

1）我可以很清楚地看到：一台计算机在一秒钟内可以进行的浮点运算的数量是量化其性能的好方法。这是正确的，对吧？

2) 我的老师一直让我计算我编写的算法的失败率。我通过计算算法做了多少次失败并计时运行需要多长时间来做到这一点。在这种情况下，翻牌率总是低于我所使用的计算机所期望的翻牌率。所以对于算法来说，失败率更像是对“其他东西”需要多长时间的评估（即开销，不涉及失败的东西）。也就是说，当触发器计数低时，大部分程序时间都花在调用函数等而不执行触发器上，对吗？

我知道这是一个非常广泛的问题，但我希望工业界或学术界的人能提供一些想法，让他们直观地感受到算法的失败率实际上是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:23:07.680

正确地说，“触发器”是衡量处理器或系统性能的指标。许多人滥用它作为实现或算法速度的衡量标准。

假设您要执行一个计算，该计算的操作次数是固定的。例如，您想将维度为 a•b 的矩阵与维度为 b•c 的矩阵相乘。如果您以通常的方式执行此乘法，则在 a 行之一和 c 列之一的每个组合中，您执行 b 乘法和 b-1 加法。所以整个矩阵乘法需要 a•c•(2b-1) 浮点运算。如果它在一秒钟内完成，有人说它提供了 a•c•(2b-1) 翻牌。

如果您有两个程序都以相同的方式进行乘法运算，则可以使用此图对它们进行比较。其中有更多“翻牌”的人更好。尽管它们使用相同的算法，但其中一个可能有更好的实现，这可能是因为它更有效地组织了内存缓存的工作。

当有人想出一种用更少操作完成相同工作的新算法时，这种情况就会中断。然后有些人使用原始方法的名义操作数来比较程序（或例程），即使程序实际上执行的操作更少。

在某种程度上，这是有道理的。如果您有两个程序执行相同的工作，并且其中一个程序以这种方式计算的“失败”数量较多，那么该程序会更快地为您提供答案。

但是，它没有任何意义，因为它引入了不准确性。我们通常对单个问题的大小不感兴趣，而是对各种大小感兴趣，并且一旦使用新算法，程序的“失败”将不会随着标称操作数线性扩展。

以此类推，假设从A镇到B镇，经过大家都用的山路80公里。如果您的汽车需要一个小时才能完成行程，那么您的汽车每小时行驶 80 公里。一天外出探索时，您会发现一条穿越山脉的通道，可将行程缩短至 70 公里。现在您可以在 52.5 分钟内完成行程。有些人用“人字拖”做同样的计算会说你的车每小时行驶 91.4 公里，因为它在 52.5 分钟内完成了 80 公里的行程。

这显然是错误的。但是，它对于决定采取哪条路线很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:22:07.833

FLOPS 是指处理器每秒执行的浮点运算量。这可以是从某些硬件/架构规范得出的纯理论数字，也可以是运行某些经过调整以提供高数字的算法的经验结果。

FLOPS 计算的主要问题来自一个系统，其中有多个并行执行块。AFAIK，仅在这种情况下，将实用算法（例如 FFT 或 RGB->YUV 转换）拆分为使用 CPU 中所有计算单元的最有用的指令集变得非常困难。（例如，在没有自动矢量化的情况下，x64 系统通常只在 Xmm0[0] 寄存器中计算浮点运算，浪费了全部潜力的 50-75%。）

这部分回答了问题 2。除了高速缓存/内存对寄存器带宽造成的明显停顿之外，实现最大 FLOPS 数字的下一个关键障碍是数据位于错误的寄存器中。这在复杂性分析中经常被完全忽略，就像 FLOPS 计算只计算基本算术运算一样。在并行编程的情况下，经常会发生这样的情况，错误的寄存器中不仅有一个，而且有 4、8 或 16 个值，而没有任何方法可以轻松地将它们一次全部置换。将其添加到算法中的开销、“热身”和“冷却”阶段，该算法试图用有意义的数据占据所有计算单元，并且您有主要原因从 1GFLOPS 系统中获得 100 MFlops。

# android - Android 2.3.X 上的 ViewPager 相关异常

> ID：16064092
> 
> 赞同：1
> 
> 时间：2013-04-17T15:26:45.203
> 
> 标签：android, android-viewpager, classcastexception

所以，基本上我有一个按钮，当按下它时，它会从它的布局中删除它自己并添加一个带有 ~20 个片段的 ViewPager。

它可以在运行 4.0.4 的三星 Galaxy S II 和运行 4.2.2 的 LG Nexus 4 上正常工作。但是，在运行 2.3.5 的 HTC Desire 或运行 2.3.3 的三星 Galaxy Ace 上尝试时，它会因此异常而崩溃。

```
FATAL EXCEPTION: main
java.lang.ClassCastException: android.widget.ImageView
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:901)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
    at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
    at android.support.v4.view.ViewPager.populate(ViewPager.java:1011)
    at android.support.v4.view.ViewPager.populate(ViewPager.java:880)
    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1374)
    at android.view.View.measure(View.java:8553)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3261)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:701)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:311)
    at android.view.View.measure(View.java:8553)
    at com.cidaut.blueparking.ui.SlidingDrawer.onMeasure(SlidingDrawer.java:210)
    at android.view.View.measure(View.java:8553)
    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:581)
    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:365)
at android.view.View.measure(View.java:8553)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3261)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
    at android.view.View.measure(View.java:8553)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
    at android.view.View.measure(View.java:8553)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3261)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
    at android.view.View.measure(View.java:8553)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3261)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
at android.view.View.measure(View.java:8553)
    at android.view.ViewRoot.performTraversals(ViewRoot.java:915)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1991)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:150)
    at android.app.ActivityThread.main(ActivityThread.java:4385)
at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
    at dalvik.system.NativeStart.main(Native Method) 
```

这不是最具说明性的例外，因为它没有说明问题所在。我什至在整个项目中都没有任何 ImageViews。我不知道怎么了。

这是初始化视图的代码：

```
private void initCajon() {
        firstLayout = View.inflate(this, R.layout.drawer_item_first, null);
        secondLayout = new ViewPager(this);
        // Stupid hack. Bug de Android, sin esta línea no funciona.
        secondLayout.setId(R.id.abs__home);
        thirdLayout = View.inflate(this, R.layout.drawer_item_third, null);

        bFinalizar = thirdLayout.findViewById(R.id.button1);
        bSaldo = thirdLayout.findViewById(R.id.button2);

        textViewSegundos = (TextView) thirdLayout
                .findViewById(R.id.textViewSegundos);
        textViewMinutos = (TextView) thirdLayout
                .findViewById(R.id.textViewMinutos);
        textViewHoras = (TextView) thirdLayout.findViewById(R.id.textViewHoras);

        textViewSaldo = (TextView) thirdLayout.findViewById(R.id.textViewSaldo);

        firstLayout.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(final View v) {
                if (LoginScreen.isLogged()) {
                    l = map.getMap().getMyLocation();
                    if (l != null) {
                        initDataPrimerClick();
                    } else {
                        showToast("La localización aun se está estableciendo. Intentalo dentro de unos segundos.");
                    }
                } else {
                    new LoginScreen_.IntentBuilder_(MapScreen.this).start();
                }
            }
        });

        bFinalizar.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(final View v) {
                showDialog("Finalizando aparcamiento...");
                stop();
            }
        });

        bSaldo.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(final View v) {
                SaldoScreen_.intent(MapScreen.this).start();
            }
        });

        slidingDrawer.setOnDrawerOpenListener(new OnDrawerOpenListener() {

            @Override
            public void onDrawerOpened() {
                textViewTime.setVisibility(View.GONE);
            }
        });

        slidingDrawer.setOnDrawerCloseListener(new OnDrawerCloseListener() {

            @Override
            public void onDrawerClosed() {
                if (thirdShown) {
                    textViewTime.setVisibility(View.VISIBLE);
                } else {
                    textViewTime.setVisibility(View.GONE);
                }

            }
        });

        content.removeAllViews();
        content.addView(firstLayout);
        firstLayout.getLayoutParams().width = LayoutParams.MATCH_PARENT;
        textViewTime.setVisibility(View.GONE);
    } 
```

这是执行布局切换的代码：

```
protected void initViewsPrimerClick(final LatLng posicionReal,
            final int index, final FragmentAdapter startParkingAdapter) {
        final OnPageChangeListener listener = new OnPageChangeListener() {

            @Override
            public void onPageSelected(final int arg0) {
                final StartParkingFragment fragment = (StartParkingFragment) startParkingAdapter
                        .getItem(arg0);
                final Tramo tr = fragment.getTramo();
                final LatLng pos = MapMatch.getPuntoProyectadoEnTramo(
                        posicionReal, tr);
                getSupportActionBar().setTitle(calleTramo.get(tr.getId()));
                pintaMarkerProyectado(pos);
            }

        @Override
        public void onPageScrolled(final int arg0, final float arg1,
                final int arg2) {

        }

        @Override
        public void onPageScrollStateChanged(final int arg0) {

        }
    };

    secondLayout.setOnPageChangeListener(listener);
    secondLayout.setAdapter(startParkingAdapter);
    secondLayout.setCurrentItem(index);
    listener.onPageSelected(index);
    thirdShown = false;
    content.removeAllViews();
    content.addView(secondLayout);
} 
```

我不知道我的代码有什么问题，所以任何见解都会非常好。

以防万一：这些`IntentBuilder_`对象是由 AndroidAnnotations 自动创建的，并且可以正常工作。

# email - WebMatrix SendMail 附加标题

> ID：16064094
> 
> 赞同：0
> 
> 时间：2013-04-17T15:26:49.563
> 
> 标签：email, razor, header, tags, webmatrix

我需要在外发电子邮件中添加以下标签：

{"X-MC-模板", "testheader"}

我目前用来发送电子邮件的代码是：

```
var header = new[]{"X-MC-Tags:test"};
try {
    // Send email
    WebMail.Send(to: customerEmail,
        subject: "Test Subject",
        body: customerRequest,
        additionalHeaders: header
    );
} 
```

谢谢，加文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:05:06.820

Send 方法接受一个`IEnumerable<string>`表示附加的标头。

[http://msdn.microsoft.com/en-us/library/hh414138(v=vs.111).aspx](http://msdn.microsoft.com/en-us/library/hh414138(v=vs.111).aspx)

每个字符串的格式必须为“header:value”，例如

```
var customHeader = new[]{"X-MC-Tags:gavin"}; 
```

将标头编织到 MailMessage 中的代码查找冒号作为分隔符。这是 WebMail 帮助程序使用的内部 TryParseHeader 方法：

```
internal static bool TryParseHeader(string header, out string key, out string value)
{
    int pos = header.IndexOf(':');
    if (pos > 0)
    {
        key = header.Substring(0, pos).TrimEnd();
        value = header.Substring(pos + 1).TrimStart();
        return key.Length > 0 && value.Length > 0;
    }
    key = null;
    value = null;
    return false;
} 
```

# c - 为什么c脚本只在最后一次执行循环时重命名

> ID：16064095
> 
> 赞同：1
> 
> 时间：2013-04-17T15:26:56.313
> 
> 标签：c, file-rename

我在 Siemens WinCC 7.0 中使用 C 脚本来读取包含源和目标逗号分隔的文本文件，例如

```
C:\Users\Administrator\Desktop\C File Transfer Test\Source\Cat.txt,P:\Cat.txt
C:\Users\Administrator\Desktop\C File Transfer Test\Source\Cat1.txt,P:\Cat1.txt
C:\Users\Administrator\Desktop\C File Transfer Test\Source\Cat2.txt,P:\Cat2.txt
C:\Users\Administrator\Desktop\C File Transfer Test\Source\Cat3.txt,P:\Cat3.txt
C:\Users\Administrator\Desktop\C File Transfer Test\Source\Cat4.txt,P:\Cat4.txt 
```

我正在使用以下代码打开此文件并循环将文件从源移动到目标

```
#include "apdefap.h"

void File_Transfer()
{
    #define MODUL   "CopyProjekt "
    char pathIn[100];
    char pathOut[100];
    char szProjektname[255];
    FILE * fpInFile ;
    FILE * fpOutFile ;
    FILE *TempSource;
    FILE *TempDestination;  
    #pragma code ("kernel32.dll")
    BOOL CopyFileA(LPCTSTR,LPCTSTR,BOOL);
    #pragma code ()
    DM_DIRECTORY_INFO dmDirInfo;
    DM_PROJECT_INFO dmProjectInfo;
    CMN_ERROR dmError;
    char *source;
    char *destination; 
    char line[1000];
    char * tokens;
    char *tempTokens;
    int i;
    char tempString[1000];
    if (DMGetProjectDirectory("PDLRT", szProjektname, &dmDirInfo, &dmError )!= NULL)
    {   
        strcat(pathIn , dmDirInfo.szProjectDir) ;
        strcat(pathOut, dmDirInfo.szProjectDir) ;
        strcat(pathIn ,"FilesForTransfer\\FileData.txt");
        strcat(pathOut ,"FilesForTransfer\\FileDataTemp.txt");
        //(NULL,pathIn ,"2", MB_YESNO|MB_ICONQUESTION|MB_SYSTEMMODAL);      
    }
    //Open the file containing the folder names and paths
    fpInFile = fopen(pathIn,"r" );
    fpOutFile = fopen(pathOut,"w" );
        while (fgets(line,sizeof line,fpInFile) != NULL)
        {
            MessageBox(NULL,line,"Read Line",MB_YESNO|MB_ICONQUESTION|MB_SYSTEMMODAL);
            tempTokens = line;
            tokens = strtok(tempTokens ,",");
            while (tokens != NULL)
            {
                if (i == 0)
                {
                    source = tokens ;   
                }
                else 
                {
                    destination = tokens ;
                }
                i = i + 1;              
                //read the tokens again
                tokens = strtok(NULL ,",");
            }           
    //MessageBox(NULL,source ,destination, MB_YESNO|MB_ICONQUESTION|MB_SYSTEMMODAL);
            //Move the file from source to destination
            //if (CopyFileA(source,destination,FALSE) != 0)             
            if (rename(source ,destination )!=0)
            {
    MessageBox(NULL,"FAILED" ,"Transfer", MB_YESNO|MB_ICONQUESTION|MB_SYSTEMMODAL);
            }
            else
            {
         MessageBox(NULL,"PASSED","Transfer",MB_YESNO|MB_ICONQUESTION|MB_SYSTEMMODAL);
            }
        }       
    //rename(source,destination)
    //fputs(tempstring,fpOutFile );

    fclose(fpInFile );
    fclose(fpOutFile );
    remove(pathIn);
    rename(pathOut ,pathIn );

    //MessageBox(NULL,"done"  ,"Done" , MB_YESNO|MB_ICONQUESTION|MB_SYSTEMMODAL);
} 
```

消息框每次都正确执行，源和目标将正确显示。但是，只有最后一个文件重命名有效。如果 source,destination 的参考文件中只有一行，那么它将正常工作。如果有多个，它只会在最后一个起作用。

据我所知，代码正在正确地通过循环并从查找文件中获取正确的数据，但重命名无法正常工作。任何想法，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:34:22.587

[`fgets()`](http://en.cppreference.com/w/c/io/fgets)如果找到，则将换行符存储在它正在填充的缓冲区中：

> 从给定的文件流中最多读取 count - 1 个字符并将它们存储在 str 中。生成的字符串始终以 NULL 结尾。如果出现文件结尾或找到换行符，则解析停止**，在这种情况下 str 将包含该换行符。**

所以`destination`文件名将包含换行符，这是非法的。在尝试之前将其删除`rename()`：

```
char* nl_ptr = strrchr(destination, '\n');
if (nl_ptr) *nl_ptr = 0; 
```

最后一行有效，因为没有换行符。

# perl - perl 用超时替换“或死”，然后重试

> ID：16064099
> 
> 赞同：-2
> 
> 时间：2013-04-17T15:27:04.790
> 
> 标签：perl, sockets, networking

有人可以帮我修改这条线吗？

```
$MySocket=new IO::Socket::INET->new(PeerPort=>$port,Proto=>'tcp',PeerAddr=>$IP) or die $E; 
```

我需要更改它，如果它失败，则超时 10 秒，然后再试 3 次，否则就死了。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:37:44.647

单程：

```
my $fails = 0;
while (!($MySocket=new IO::Socket::INET->new(
        PeerPort=>$port,Proto=>'tcp',PeerAddr=>$IP))) {
    die ($E) if ++$fails ==  3;  
    sleep(10);
} 
```

# jquery - 隐藏兄弟姐妹jQuery后缓慢居中div

> ID：16064111
> 
> 赞同：4
> 
> 时间：2013-04-17T15:27:33.223
> 
> 标签：jquery, jquery-animate

我有很长的 div 包含我网站上一些用户的图像。在隐藏其兄弟姐妹后，我似乎无法弄清楚如何缓慢地将 div 居中。

[http://jsfiddle.net/sXpT3/](http://jsfiddle.net/sXpT3/)

我的问题是添加我的 jQuery 脚本，以便在隐藏其他 div 后缓慢居中单击的 div。

我尝试使用动画，但如果我不将每个 div 定位在绝对模式下，这似乎不起作用。

css

```
.users {
    width:100%;
    text-align:center;
    height: 100px;
    top:50%;
    margin-top:-100px;
    position:absolute;
}

.user {
    display:inline-block;
    *display:inline;
    width:90px;
    height:90px;
    margin:0 10px;
    border-radius:50px;
    border:5px solid rgba(255,255,255,0.9);
} 
```

jQuery

```
$(function() {
    $('.user').click(function() {

        if ($(this).hasClass('active')) {
            $('.user').not(this).fadeIn(200);

            $(this).removeClass('active');
        } else {

            $('.user').not(this).fadeOut(200);

            $(this).addClass('active');
        }

    });
}); 
```

HTML

```
<div class="users">
    <div style="background:#0F9" class="user">
    </div>
    <div style="background:#0CF" class="user">
    </div>
    <div style="background:#F66" class="user">
    </div>
    <div style="background:#F09" class="user">
    </div>
    <div style="background:#FCF" class="user">
    </div>
    <div style="background:#996" class="user">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:42:18.737

通过仅将其淡出而不隐藏它然后对隐藏进行动画处理，我可以完成您正在寻找的效果。
小提琴： http: [//jsfiddle.net/sXpT3/1/](http://jsfiddle.net/sXpT3/1/)
JS：

```
$(function() {
    $('.user').click(function() {

        if ($(this).hasClass('active')) {
            $(this).removeClass('active');
            $('.user').not(this).show(200).fadeTo(200,1);
        } else {

            $(this).addClass('active');
            $('.user').not(this).fadeTo(200,0).hide(200);
        }

    });
}); 
```

# angularjs - 具有渐进增强功能的基于混合页面/单页网络应用程序（Angularjs、Ember.js）？

> ID：16064113
> 
> 赞同：23
> 
> 时间：2013-04-17T15:27:34.967
> 
> 标签：angularjs, seo, ember.js, progressive-enhancement, graceful-degradation

我想知道是否有人找到了解决此问题的方法。有没有办法两全其美：

*   建立一个基于页面的站点，具有永久链接、可访问性、SEO 和优雅的后备/渐进增强（基本上[是 Web 开发的所有最佳实践](https://softwareengineering.stackexchange.com/questions/46716/what-should-every-programmer-know-about-web-development)）
*   并且，对于那些使用 javascript 的人来说，通过 ajax 加载内容的响应式前端体验，在导航底层站点页面时不会刷新页面，脚本/内容/css/等的冗余下载最少。（AngularJs 或 Ember.js 等客户端框架的所有好处）

我看到一些主要站点能够管理这个（gmail、stackoverflow），并且我看到[Jeff 的新站点](http://try.discourse.org/t/this-site-is-a-sandbox-it-is-reset-every-day/57/14)在 noscript 标记中构建了该站点的基本版本。

1.  混合页面/单页面应用程序的解决方案是构建站点的两个版本，发送两个版本，然后让客户决定它可以显示哪个版本？（这就是gmail的作用吗？）
2.  或者是 AngularJS 等人的问题。根本就没有设计为允许优雅降级？

认为＃1是答案，这让我的大脑感到[很](http://en.wikipedia.org/wiki/Don%27t_Repeat_Yourself)痛苦。

（我专注于 AngularJs 的原因是我喜欢它对 html 模板、声明式样式的支持以及它尝试修复 js 范围的尝试。Ember 和其他框架也非常出色；也许其中一个更适合混合站点?)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-14T17:50:48.560

这个问题有点微妙，因为答案是“视情况而定”。例如，您提到了 Gmail，没有任何理由需要为 SEO 编制像 Gmail 这样的应用程序的索引，但根据您想要或需要支持的内容，您*可能*希望确保您可以不支持 Javascript。

然而，即使是“无 JavaScript”的论点，这些天也越来越乏力，至少对于“Web 应用程序”类来说是这样。如果我想使用 Windows 应用程序，我需要 Windows，如果我想使用 javascript 驱动的 Web 应用程序，那么假设我将需要一个不会瘫痪的浏览器来使用它并不是不合理的。

但是回到您的问题，我只能与 AngularJS 交谈，因为我最熟悉它。在大多数情况下，它确实允许您支持渐进式增强方法，但如果您想要支持，不要期望使用 URL 路由之类的东西。您可以做的是使用 AngularJS 控制器、绑定和指令，类似于您可能使用 jQuery 作为增强页面交互和行为的一种方式。

请记住，这种方法将严重限制您可以使用 Angular（或 Ember）做的事情，并且您从这种方法中获得的东西可能会开始引起争议，而您无法单独使用 jQuery 轻松做到这一点。

如今，另一种选择是做 Twitter 等网站正在做的事情。这基本上是从服务器为初始加载的任何视图提供完全呈现的 HTML，然后使用 Javascript 进行后续加载和增强的 UI 行为。如果您确实需要支持使用和不使用 Javascript 进行浏览，并且具有改善第一个请求的呈现/加载时间的额外好处，这将非常有效（尽管实现起来可能相当困难）。再次“取决于”，因为它在很大程度上取决于您的网站是否可以使用它。你必须为它设计，它不会是微不足道的或容易的。

更新：

值得一提的是，我们采用[Moo 年](http://www.yearofmoo.com/2012/11/angularjs-and-seo.html)方法并使用 PhantomJS 渲染需要 SEO 的页面，并将它们缓存的初始状态粘贴在某个地方以提供服务。我们有一个在部署上运行的 rake 任务来更新它。同样，这只是初始状态，但它有助于暂时解决此问题。

事情总是在变化，我相信我会在一年左右的时间里改变我对这种方法的看法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T23:38:34.120

您是否阅读过 Google 的[使 AJAX 应用程序可抓取](https://developers.google.com/webmasters/ajax-crawling/)。您可以拥有 JavaScript 单页应用程序和可抓取的内容。

如果你坚持使用 Angular，有一篇有趣的文章：[原来可以让你的 AngularJS 应用程序被索引](http://www.yearofmoo.com/2012/11/angularjs-and-seo.html)

# java - 如何删除重复值然后显示唯一值？

> ID：16064114
> 
> 赞同：0
> 
> 时间：2013-04-17T15:27:35.887
> 
> 标签：java, arrays, count, duplicates, output

```
public class nrlSports {
    public static void main(String[] args){
        String[] direction = {"north", "north", "east", "south", "south", "south", "north", "north"};

        for(int i=0; i<direction.length; i++) {
            int count = 0;
            for(int j = 0; j < direction.length; j++)
                if(direction[i].equals(direction[j])) {
                    count++;
                }
            System.out.println(direction[i] + " (" + count + ")");
        }
    }
} 
```

输出为：北（4）北（4）东（1）南（3）南（3）南（3）北（4）北（4）

如何删除这些重复值，使输出应如下所示：北 (4) 东 (1) 南 (3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:37:12.300

这可以帮助：

```
public static void main(String[] args){
    String[] direction = {"north", "north", "east", "south", 
                          "south", "south", "north", "north"};
    Map<String, Integer> countMap = new HashMap<String, Integer>();

    for(int i=0; i<direction.length; i++) {
        String key = direction[i];
        if(!countMap.containsKey(key)){
            countMap.put(key, 1);
        }
        else 
        {
            countMap.put(key, countMap.get(key)+1);
        }
    }
    System.out.println(countMap);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:43:34.073

认为解决方案不是优化的，但可以工作（通过运行确认:)）

```
 String[] direction = {"north", "north", "east", "south", "south", "south", "north", "north"};
    HashMap<String,Integer> myHash = new HashMap<String, Integer>();

    for(int i=0; i<direction.length; i++) {
        int count = 0;
        for(int j = 0; j < direction.length ; j++)
            if(direction[i].equals(direction[j])) {
                count++;
                myHash.put(direction[i], new Integer(count));                    
            }
    }

       Iterator T = (Iterator) myHash.entrySet().iterator();
       while( T.hasNext() ) 
       {
            Map.Entry newEntery = (Map.Entry) T.next();                
            System.out.print(newEntery.getKey() +"("+ newEntery.getValue()+")");
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:29:19.757

使用一套。将它们全部添加到一个集合中，您将获得唯一的值。

编辑：我错过了计数部分。现在添加

```
String[] direction = {"north", "north", "east", "south", 
                          "south", "south", "north", "north"};

    Map<String,int> m = new HashMap<String,int>();

 for(String str:direction){
    if(m.contains(str))
       m.put(key,m.get(str)+1);
    else
       m.put(key,1);
}

//key is all values you want to add and count in no. of times values is repeated. 
```

因此，如果您想要所有唯一值，您可以遍历键集并从 Map 中获取相应的计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:30:31.540

我可能的简单方法是

```
Set<String> directionS= new HashSet<String>(Arrays.asList(direction)); 
```

然后玩 `directionS`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T15:45:03.030

这个方法怎么样

```
String[] direction = { "north", "north", "east", "south", "south",
        "south", "north", "north" };

Map<String, Integer> map = new LinkedHashMap<>();//to preserve order or elements
for (String key : direction) {
    if (map.containsKey(key))
        map.put(key, map.get(key) + 1);
    else
        map.put(key, 1);
}
for (Map.Entry<String, Integer> entry : map.entrySet())
        System.out.println(entry.getKey() + "(" + entry.getValue() + ")"+
                String.format("%"+entry.getValue()+"s", "").replace(' ', '*')); 
```

输出

```
north(4)****
east(1)*
south(3)*** 
```

# hadoop - 如何处理上传到 HDFS 的 cvs 文件的特定部分？

> ID：16064121
> 
> 赞同：0
> 
> 时间：2013-04-17T15:27:49.710
> 
> 标签：hadoop, hadoop-streaming, hadoop-partitioning

如何处理上传到 HDFS 的 cvs 文件的特定部分？我是 Hadoop 的新手，我有一个问题是如果我将关系数据库导出到 cvs 文件然后将其上传到 HDFS 。那么如何使用 MapReduce 处理文件中的特定部分（表）。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:02:55.563

我假设 RDBMS 表被导出到每个表的单独 csv 文件并存储在 HDFS 中。我认为，当您提到“特定部分（表）”时，您指的是表中的列数据。如果是这样，请将单个 csv 文件放入单独的文件路径中，例如 /user/userName/dbName/tables/table1.csv

现在，您可以为输入路径和字段出现配置作业。您可以考虑使用默认输入格式，以便您的映射器一次获得一行作为输入。根据配置/属性，您可以读取特定字段并处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:20:22.850

[`Cascading`](http://www.cascading.org/2012/07/02/cascading-for-the-impatient-part-1/)允许您快速开始使用 MapReduce。它具有允许您设置`Taps`访问源（您的 CSV 文件）并在管道中处理它的框架，例如（例如）将**A**列添加到**B**列并将总和放入**C**列，方法是将它们选择为`Fields`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:35:54.700

使用 BigTable 意味着将您的数据库转换为一张大表

# web-services - URL 样式：为什么我应该只使用 ids+slug 名称（“/products/[id]-[product-name]”）而不是 slug 名称（“/products/[product-name]”）？

> ID：16064124
> 
> 赞同：0
> 
> 时间：2013-04-17T15:27:54.907
> 
> 标签：web-services, rest, url

首先是关于我的产品列表的一些详细信息：

1.  静态的，包含大约 400 个项目。
2.  它不会进一步增长。相信我这个。
3.  没有重复的项目名称。
4.  产品的属性不会改变。

基本上将我的产品列表视为元素周期表。我没有看到将 id 添加到带有“slug name”（或任何名称）的 URL 的任何意义。我宁愿有一个干净的 SEO 友好的 URL。有什么我在这里忽略的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T15:39:06.057

这是关于 ID 和 slug 名称的事情：

## 使用“产品 ID”：

通常，URL 是使用 ID 设计的：

```
"/products/[product-id]"
example: /products/213 
```

但是它们对于该 URL 中的确切内容的描述太少（我的意思是，不同的 URL 将具有不同的 ID，但仅此一项 - 仅通过查看它 - 不会为您提供有关该特定 URL 的任何信息。）

底线：仅 ID 不好，因为它几乎没有描述性。

## 使用“产品名称”：

使用：

```
"/products/[product-name]"
example: /products/three-legged-walking-oven 
```

其实还不错，需要注意的是：

*   您将如何将 a 映射`[product-name]`到 a `[product-id]`？
*   标题（或`[product-name]`）变化很大，如果有人为旧标题添加书签怎么办？

## 使用“[产品 ID]/[产品名称]”：

使用：

```
"/products/[product-id]/[product-name]"
example: /products/213/three-legged-walking-oven
or
"/products/[product-id]-[product-name]"
example: /products/213-three-legged-walking-oven 
```

在这种方法中，您通过`id`URL 的一部分获取产品。

为您提供两全其美的优势：描述性网址和易于映射的网址和标题（名称）可以在不使旧网址无用的情况下进行更改。

## 你的场景：

因此，如果您 100% 确定永远不会更改产品名称，则可以继续使用“产品名称”。只需找到一种方法以有效的方式将该“产品名称”映射到“产品 ID”。

**奖励：**请务必查看[这篇](http://seo-hacker.com/url-seo-tutorial/)关于使用 slug 名称和搜索引擎重要性的精彩文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:36:27.503

由于 url 末尾的内容是您的应用程序将用于在数据库中查找产品的内容，因此这变成了一个数据库问题。将 id 保留在 url 中可以让您的应用程序通过 id 查找内容。

如果您的产品名称永远不会改变，并且您实际上可以将产品名称用作数据库中的主键（或至少在列上有一个唯一索引），那么您可能会在您的数据库中只使用产品名称网址也是。

通常，最好将一个唯一的、*无意义*的字段作为主键，因为在大多数情况下，产品名称之类的内容往往会发生变化，即使只是为了修复拼写错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:36:59.720

我能想到的唯一原因是，要使用 /products/[id]-[name]，您需要同时知道 id 和 [name]，要使用第二个选项，您只需要知道名称即可。

这里更常见的选择是使用：/products/[id]

我只会考虑 /products/[name] 如果您确信名称是：短、唯一、不包含任何特殊字符（&、？#、/、...）

# android - 从安卓手机中提取选定的联系人

> ID：16064125
> 
> 赞同：0
> 
> 时间：2013-04-17T15:27:56.237
> 
> 标签：android, android-contacts

我正在开发一个应用程序，我需要在其中向用户显示所有联系人。应该为用户提供选择多个联系人的选项，当他按下完成时，所有联系人都必须存储在数据库中。

任何人都可以帮助我显示和提取所选联系人的代码吗？？{即使同名有多个 no，也必须选择一个 no }

如果您可以让所选联系人的姓名显示在敬酒中{我将自己做数据库部分}，我将不胜感激......

请帮助.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:33:42.083

您需要创建自己的联系人列表视图，`CHOICE_MODE_MULTIPLE`并将 a`CheckTextView`用于单个项目布局。下面是一个完整的例子。它在操作栏上有“*完成”按钮。*

```
public class PickContactsActivity extends ListActivity {
    private SimpleCursorAdapter mAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getListView().setItemsCanFocus(false);
        getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,
                new String[] { ContactsContract.Contacts._ID, 
                ContactsContract.Contacts.DISPLAY_NAME},
                null, null, "UPPER(" + ContactsContract.Contacts.DISPLAY_NAME + ") ASC");
        mAdapter = new SimpleCursorAdapter(this, 
                android.R.layout.simple_list_item_multiple_choice,
                cursor,
                new String[] { ContactsContract.Contacts.DISPLAY_NAME }, 
                new int[] { android.R.id.text1 }, 0);
        setListAdapter(mAdapter);
    }

    private List<Uri> pickContacts() {
        SparseBooleanArray a = getListView().getCheckedItemPositions();
        List<Uri> contacts = new ArrayList<Uri>();
        for (int i=0; i<a.size(); i++) {
            if (a.valueAt(i)) {
                Cursor c = (Cursor)mAdapter.getItem(a.keyAt(i));
                Long id = c.getLong(c.getColumnIndex(ContactsContract.Contacts._ID));
                contacts.add(ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, id));
            }
        }
        return contacts;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId()) {
        case R.id.action_pick:
            List<Uri> contacts = pickContacts();
            StringBuilder sb = new StringBuilder("Selected Contacts\n");
            for(Uri c : contacts)
                sb.append(c).append("\n");
            Toast.makeText(this, sb.toString(), Toast.LENGTH_SHORT).show();
            return true;
        }
        return false;
    }
} 
```

*完成*动作在res */menu/main.xml中定义*

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/action_pick" android:showAsAction="ifRoom" android:title="Done"/>
</menu> 
```

最后，确保您有读取联系人的权限。将此添加到*AndroidManifest.xml*

```
 <uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

只需删除显示 Toast 消息的代码并使用 Uri 列表执行您的数据库操作。

# javascript - 在 JavaScript 创建的元素上触发鼠标悬停

> ID：16064127
> 
> 赞同：0
> 
> 时间：2013-04-17T15:27:58.500
> 
> 标签：javascript, jquery, html

当我按下按钮并监听这些链接的鼠标悬停事件时，我需要创建链接。

我使用这个函数来创建链接：

```
function newlink(){  
  var a = document.createElement('a');
  var linkText = document.createTextNode("Test");   
  a.appendChild(linkText);
  a.href ="Page.html";   
  a.setAttribute("class","trigger");
  document.getElementById('divID').appendChild(a);
}; 
```

在正文中，我有这个按钮：

```
<input type="button" value="Show Link" onClick="newlink()"> 
```

在头部我有这个功能来拦截鼠标悬停：

```
$(function(){
  $('a.trigger').hover(  
    function(e) {       
       alert ('Mouse over intercepted');
       ...  
  });
}); 
```

当我单击按钮时，链接会正确创建，但不会生成 mouseover 事件。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:54:25.977

[.hover()](http://api.jquery.com/hover/)是 mouseenter 和 mouseleave 事件的快捷方式[，](http://api.jquery.com/mouseenter/)因此[您](http://api.jquery.com/mouseleave/)可以使用使用[.on()](http://api.jquery.com/on/)的事件委托来为动态添加的内容注册 mouseenter 和 mouseleave 事件的事件处理程序。

```
function newlink(){  
    $('<a href="Page.html" class="trigger">Test</a>').appendTo('#divID');
};

$(function(){
    $('#divID').on('mouseenter', 'a.trigger', function(){
        console.log('entered')
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:31:10.857

要将事件附加到动态创建的 HTML 元素，请使用[JQuery 的`.on()`](http://api.jquery.com/on/)方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:33:00.177

使用[`.on()`](http://api.jquery.com/on/)，像这样：

```
$(document).on('mouseover','a.trigger',function(){
    alert('Mouse over intercepted');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:37:34.553

如果在您创建链接时我是您，我会添加逻辑，而不是稍后通过 JQuery。

你的代码会变成这样：

```
function newlink(){  
  var a = document.createElement('a');
  var linkText = document.createTextNode("Test");   
  a.appendChild(linkText);
  a.href ="Page.html";   
  a.setAttribute("class","trigger"); // <-- you probably don't need this anymore
  a.onmouseover = function() {
     // ... here is your logic !!!
  }
  document.getElementById('divID').appendChild(a);
}; 
```

# c# - 使用 C# (Windows-Store App) 获取文件列表。函数出现问题

> ID：16064128
> 
> 赞同：1
> 
> 时间：2013-04-17T15:28:03.247
> 
> 标签：c#, windows-8

我正在尝试编写一个返回文件列表的函数。所以这里有一个源代码：

```
public async IReadOnlyList<StorageFile> GetFiles()
    {
        StorageFolder folder = await KnownFolders.PicturesLibrary.GetFolderAsync("folder N1");
        if (folder != null)
        {
            IReadOnlyList<StorageFile> fList = await folder.GetFilesAsync();
            return fList;
        }
    } 
```

但为什么它不起作用？错误消息是“无法将 IReadOnlyList 转换为 StorageFile”。怎么了？我的 fList 变量的类型与函数头中的类型相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:24:14.110

异步方法返回`Task<T>`，所以像这样改变你的函数。

```
public async Task<IReadOnlyList<StorageFile>> GetFiles()
{
    StorageFolder folder = await KnownFolders.PicturesLibrary.GetFolderAsync("folder N1");
    if (folder != null)
         return await folder.GetFilesAsync();
    else
         return null;
} 
```

[GetFilesAsync 停止工作](https://stackoverflow.com/questions/13930113/getfilesasync-stops-working)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T02:37:18.173

正如@Xyroid 所说，您需要使用Task> 作为返回类型，因为异步方法的返回类型必须是void、Task 或Task。随着代码@Xyroid 发布。你可以得到这样的文件：

```
IReadOnlyList<StorageFile> fileList = await GetFiles();
int count = fileList.Count; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:48:03.423

您的列表“fList”使用 StorageFile 作为其类型 - 它应该使用 IReadOnlyList 类型。尝试以下操作：

```
List<IReadOnlyList> fList = await folder.GetFilesAsync(); 
```

更改方法的返回类型：

```
public async List<IReadOnlyList> GetFiles()
{
    ...
} 
```

# php - 使用 jQuery 发送很长的字符串 PHP

> ID：16064130
> 
> 赞同：1
> 
> 时间：2013-04-17T15:28:04.267
> 
> 标签：php, javascript, jquery

我想从我的 jQuery 脚本向 PHP 服务器发送很长的字符串（大约 1 200 000 个字符）。我创建了代码：

```
$.ajax({
    url : 'con.php',
    async : false,
    type : 'POST',
    data : 'require='+parameters
}).done(function(result) {
    console.log(result);
}); 
```

在哪里`parameters`描述字符串和 PHP：

```
if ($_POST['require']){
echo 'ok';
} 
```

当我发送正常大小的字符串时，一切都很好，但是当我发送我的大字符串时，我收到了错误消息：

```
Notice: Undefined index: require 
```

我`memory_limit`将我的 php.ini 设置为 500M，但仍然一无所获。

我尝试使用`[suhosin][1]`设置`suhosin.memory_limit`大于 0 的结果与上述相同。

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:29:59.400

尝试像这样发送您的数据：

```
data: {
    require: parameters
} 
```

并设置您的 php 最大帖子大小：

```
post_max_size=20M
upload_max_filesize=20M 
```

# javascript - 创建任何对象的只读/不可变副本（包括深层属性）

> ID：16064136
> 
> 赞同：3
> 
> 时间：2013-04-17T15:28:34.207
> 
> 标签：javascript, object, constants, immutability, readonly

如何在 JavaScript 中创建对象的只读/不可变版本，其属性无法更改？这也应该适用于任何子对象的属性等等。

我遇到的所有执行此操作的方法（`Object.defineProperty`、`Object.freeze`等）仅适用于对象的顶级属性，但不适用于子对象。

（一个可能的用例：在特定模块中创建/修改对象`settings`或类型对象后，您需要以不可变的形式将其公开给程序的其余模块。）`configuration`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:28:34.207

这是我经过一番思考后提出的解决方案。非常适合我的需求，所以我想我会分享它 QnA 风格。如果您发现它们，请提出任何改进/问题。

```
/**
 * Make the the specified object (deeply) immutable or "read-only", so that none of its
 * properties (or sub-properties) can be modified. The converted object is returned.
 * @param {object} obj Input object
 */
makeImmutable: function makeImmutable (obj) {
    if ((typeof obj === "object" && obj !== null) ||
        (Array.isArray? Array.isArray(obj): obj instanceof Array) ||
        (typeof obj === "function")) {

        Object.freeze(obj);

        for (var key in obj) {
            if (obj.hasOwnProperty(key)) {
                makeImmutable(obj[key]);
            }
        }
    }
    return obj;
} 
```

编辑：简化代码。现在也可以正确处理数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T16:48:21.773

对这个解决方案很感兴趣。

## 这是带有示例的代码片段：

```
/**
 * Make the the specified object (deeply) immutable or "read-only", so that none of its
 * properties (or sub-properties) can be modified. The converted object is returned.
 * @param {object} obj Input object
 */
makeImmutable: function makeImmutable(obj) {
  if ((typeof obj === "object" && obj !== null) ||
    (Array.isArray ? Array.isArray(obj) : obj instanceof Array) ||
    (typeof obj === "function")) {

    Object.freeze(obj);

    for (var key in obj) {
      if (obj.hasOwnProperty(key)) {
        makeImmutable(obj[key]);
      }
    }
  }
  return obj;
}

var newObj = {
  thisArrayOfObjects: [{
    propertyOne: 'value1',
    propertyTwo: 'value2'
  }]
};
newObj.thisArrayOfObjects.push({
  propertyBefore: 'before3'
});

console.log('newObj', newObj);
$('#viewer').append('newObj: ' + JSON.stringify(newObj));

makeImmutable(newObj);

console.log('imutable', newObj);
$('#viewer').append('<br/><br/>imutable: ' + JSON.stringify(newObj));
try {
  newObj.thisArrayOfObjects.push({
    propertyThree: 'value3'
  });
} catch (e) {
  $('#viewer').append('<br/><br/>immutable error: ' + e.message);
  console.log('immutable error:', e.message);
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div id="viewer" />
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T09:05:36.393

已经有了很好的答案。这个正在使用[`lodash`](https://lodash.com/)：

```
var _ = require('lodash'); 
```

使对象不可变：

```
/**
 * Makes an Object immutable by (deep) freezing all own peoperties.
 * @param {*} obj - Object to make immutable.
 * @returns {*} The input Object.
 */
function deepFreeze(obj) {
    if (_.isObject(obj) || _.isArray(obj) || _.isFunction(obj)) {
        Object.freeze(obj);
        _.forOwn(obj, deepFreeze);
    }
    return obj;
} 
```

要制作不可变的克隆：

```
var frozenClone = deepFreeze(_.cloneDeep(obj)); 
```

# android - Phonegap - 从外部网站访问 api

> ID：16064142
> 
> 赞同：2
> 
> 时间：2013-04-17T15:28:52.880
> 
> 标签：android, cordova, webview, phonegap-build

我在配置文件中设置：

```
<access origin="*" subdomains="true" />
<access origin=".*" subdomains="true" />
<content src="http://mydomain.pl/aps_mobile/" /> 
```

但是在[http://mydomain.pl/aps_mobile/](http://mydomain.pl/aps_mobile/)上不要执行事件“deviceready”并且 navigator.camera 是未定义的。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T00:05:05.173

如果您从外部主机执行cordova 脚本，您将无法访问硬件资源，因为该脚本未映射到Phonegap 应用程序的libs/cordova.xxxjar。但是你可以这样解决：

在 res/xml/config.xml

```
<access origin="*" />
<content src="index.html" /> 
```

在资产/www/index.html

```
<body>
    <script type="text/javascript" src="cordova-x.x.x.js"></script>
    <iframe name="framewrap" id="framewrap"
        style="border:0;position: absolute; top: 0; left: 0;width: 100%;"
        src="http://yourwebsite.pl">
    </iframe>
    <script type="text/javascript"> 
        document.getElementById("framewrap").contentWindow.navigator = navigator;
    </script>
 </body> 
```

最后，在相机配置中，如果你想要 DATA_URL，你必须将 destinationType 设置为 0，如果你想要 FILE_URI，你必须设置为 1，如果你想要 NATIVE_URI，你必须设置 2。

我希望能帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:07:54.450

索引文件不应该在服务器上。您需要在应用程序的资产文件夹中有一个 index.html，并通过 jquery ajax 调用连接到服务器。还要确保在 index.html 中导入了 cordova 和 phonegap javascript 文件

# haskell - 也许是一堆变压器里面的单子

> ID：16064143
> 
> 赞同：6
> 
> 时间：2013-04-17T15:28:54.347
> 
> 标签：haskell, monads

我有以下代码：

```
import Control.Monad
import Control.Monad.Trans
import Control.Monad.Trans.State

type T = StateT Int IO Int

someMaybe = Just 3

f :: T
f = do
    x <- get
    val <- lift $ do
        val <- someMaybe
        -- more code in Maybe monad
        -- return 4
    return 3 
```

当我在内部使用`do`符号在`Maybe`monad 中工作时，它失败了。从它给出的错误来看，它的类型签名`do`似乎不匹配。但是我不知道如何解决它。我尝试了一些`lift`组合，但没有一个有效，我不想再猜测了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T15:35:52.827

问题是它`Maybe`不是您的变压器堆栈的一部分。如果你的变压器只知道`StateT Int`和`IO`，它不知道如何抬起`Maybe`。

您可以通过将类型更改`T`为以下内容来解决此问题：

```
type T = StateT Int (MaybeT IO) Int 
```

（您需要导入`Control.Monad.Trans.Maybe`。）

你还需要改变你的内在`do`来工作`MaybeT`而不是`Maybe`。这意味着用 包装原始`Maybe a`值`MaybeT . return`：

```
f :: T
f = do
    x <- get
    val <- lift $ do
        val <- MaybeT $ return someMaybe
        -- more code in Maybe monad
        return 4
    return 3 
```

这有点尴尬，所以你可能想写一个像这样的函数`liftMaybe`：

```
liftMaybe = MaybeT . return 
```

如果您曾经在代码的其他部分`lift`提升`IO a`值，现在这将中断，因为您的转换器堆栈中现在有三个级别。您将收到如下所示的错误：

```
Couldn't match expected type `MaybeT IO t0'
            with actual type `IO String' 
```

要解决此问题，您应该使用`liftIO`所有原始`IO a`值。这使用一个类型类来`IO`通过任意数量的转换器层来执行操作。

回应您的评论：如果您只有一些代码取决于`Maybe`，那么将`do`符号的结果放入变量并与之匹配会更容易：

```
let maybeVal = do val <- someMaybe
                  -- more Maybe code
                  return 4
case maybeVal of
  Just res -> ...
  Nothing  -> ... 
```

这意味着`Maybe`代码将无法进行 IO。您也可以自然地使用类似的函数`fromMaybe`来代替`case`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T15:55:46.137

如果您想`do`纯粹在`Maybe`monad 中运行内部代码，您将无法访问`StateT Int`or `IO`monad（这可能是一件好事）。这样做会返回一个`Maybe`值，您必须仔细检查：

```
import Control.Monad
import Control.Monad.Trans
import Control.Monad.Trans.State

type T = StateT Int IO Int

someMaybe = Just 3

f :: T
f = do
    x <- get
    -- no need to use bind
    let mval = do
        -- this code is purely in the Maybe monad
        val <- someMaybe
        -- more code in Maybe monad
        return 4
    -- scrutinize the resulting Maybe value now we are back in the StateT monad
    case mval of
        Just val -> liftIO . putStrLn $ "I got " ++ show val
        Nothing -> liftIO . putStrLn $ "I got a rock"
    return 3 
```

# c# - 如何在没有紧密耦合的情况下在多个 ORM(EF,NHibernate) 上使用 POCO？

> ID：16064145
> 
> 赞同：0
> 
> 时间：2013-04-17T15:29:00.463
> 
> 标签：c#, entity-framework

我为我的域创建了 2 个（POCO）类，问题和答案（一个问题可以有很多答案）。我创建了代码生成策略设置为无的 EF 模型。我从我的数据库中检索一个问题，我更改了一个字符串属性，并且（在我保存之后）我的更改出现在我的数据库中。

如何更改答案的属性（针对特定问题）以在我的数据库中可见？

而且我需要轻松地将代码更改为另一个 ORM（仅更改上下文和存储库类）。

# ios - 如何使用 CDSoundEngine 和 Cocos2d 2.0 从 /Documents/ 目录播放声音

> ID：16064147
> 
> 赞同：1
> 
> 时间：2013-04-17T15:29:07.223
> 
> 标签：ios, objective-c, cocos2d-iphone, nsdocumentdirectory

我正在使用 CDSoundEngine 录制声音并将它们保存在用户 /Documents/ 目录中。它工作正常......如果我去 iPad 模拟器的图书馆，声音就在那里......

我的问题是他们不玩。如果我将声音文件复制到项目中，它就会播放。

我错过了什么？

```
 -(void) playRecording {

 //alternative approach
 //NSString *filePath = [NSURL fileURLWithPath: recorderFilePath];

 NSURL *url = [NSURL fileURLWithPath: recorderFilePath];
 NSString *filePath = [url absoluteString];

 CCLOG(@"Playing the recorded audio ... %@",filePath); //correctly displays the path (with %20 for spaces) to /Documents/recording.caf

 CDSoundEngine *sse = [[CDAudioManager sharedManager] soundEngine];

 //[sse loadBuffer:1 filePath:@"recording.caf"]; //this works if the file is added to the main project

 [sse loadBuffer:1 filePath:filePath]; //this does not work

 //[sse loadBuffer:1 filePath:@"filePath"]; //this does not work

 [sse playSound:1 sourceGroupId: 0 pitch: 2.0f pan: 0.0f gain: 1.0f loop: NO];

 } 
```

# mysql - 分组数据，稍后获得额外的字段

> ID：16064149
> 
> 赞同：1
> 
> 时间：2013-04-17T15:29:11.847
> 
> 标签：mysql, sql, greatest-n-per-group

我有以下数据结构：

```
Pizza
------------------
id| name
--+---------------
1 | The Best Pizza
2 | Other Pizza

Toppings
-----------------------------------------
id| pizza | order | type | requests| name        
--+-------+------------------------------
1 | 1     | 0     | A    | 10      | something
1 | 1     | 0     | A    | 14      | some
2 | 1     | 0     | B    | 12      | other
3 | 2     | 1     | A    | 40      | another
4 | 2     | 0     | A    | 20      | nononnon 
```

所以，我的目标是获得类似

```
Pizza          | Important Topping | Type    
---------------+--------------------------------------------------------     
The Best Pizza |  some             | A
The Best Pizza |  other            | B
Other Pizza    |  nononnon         | A 
```

意思是：

对于每一组 Pizza 和 Topping.Type 给出最重要的 topping，其中最重要的 topping 的顺序是：Topping.order ASC，例如请求 DESC，在上面的结果中，“The Best Pizza”最重要的 topping类型 A 是 some，因为 some 和 something 浇头具有相同的顺序，但 some 有更多请求。对于“Other Pizza”，我们只有一种类型，“nononnon”是最重要的配料，因为它的订单低于“another”，甚至另一个有更多要求

我面临的问题是如何在一个查询中或至少以一种有效的方式实现这一目标。

现在我必须预先选择和订购配料，创建临时表和丑陋的连接来实现这一点。

关于如何做到这一点的任何启示？

注意：这是我面临的一个问题的示例，我知道对于披萨/浇头模型的真正实现不会更接近这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:51:50.230

这是一个方法：

```
select pizzaName, type,
       (select name from toppings t2 where t2.type = t.type and t2.pizza = t.pizza
        order by order, requests desc
        limit 1
       ) as importantTopping
from (select distinct p.name as pizzaName, type
      from toppings t join
           pizza p
           on t.pizza = p.id
     ) pt 
```

它使用相关子查询来获取您正在寻找的顶部。

# android - 是否可以在 Android 编程中从 index.html 读取嵌入式 Flash 文件

> ID：16064151
> 
> 赞同：1
> 
> 时间：2013-04-17T15:29:17.490
> 
> 标签：android, flash, cordova, jquery-mobile, phonegap-plugins

目前使用PhoneGap 和jQuery Mobile 来创建一个应用程序，除flash 文件外，所有内容都显示在应用程序中。

```
package com.helloapp.namespace.myhelloworld;
import org.apache.cordova.DroidGap;

import android.os.Bundle;

public class MyPhoneGapActivity extends DroidGap {
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
super.setIntegerProperty("splashscreen", R.drawable.splash);
super.loadUrl("file:///android_asset/www/index.html"); 
```

}

}

我在清单 xml 中放置了以下内容

```
 android:hardwareAccelerated="true" 
```

我遇到过网络设置，每次我编写代码时它都不起作用，一行划掉了 setPluginsEnabled(true) 我相信它已被弃用。

```
WebSettings settings = webview.getSettings();
settings.setPluginsEnabled(true); 
```

我的 Flash 文件嵌入在我的 index.html 中

```
 <!--Embedded flash movie-->
  <p>
   <object width="710" height="493">
  <param name="movie" value="welcome.swf">
  <embed src="yaa/welcome.swf"
         width="710" height="493"> </embed>
</object>
  </p> 
```

是否可以从 index.html 调用嵌入式 Flash 文件？请考虑到我已经尝试过 webview 它一直被弃用，并且我已经有了必要的 xml 代码。

# ruby-on-rails - Rails 使用 :only 嵌套路由。如何还添加额外的路线？

> ID：16064156
> 
> 赞同：0
> 
> 时间：2013-04-17T15:29:28.127
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

目前我有以下路线。

路线

```
resources :applications do 
  resources :jobseeker, :only=> [:index, :new, :create]
end

get 'jobseeker/load' => 'jobseeker#load'
post 'jobseeker/retrieve' => 'jobseeker#retrieve' 
```

他们产生这样的网址：

```
/applications/1/jobseeker/index
/applications/1/jobseeker/new
/applications/1/jobseeker/create
/jobseeker/load
/jobseeker/retrieve 
```

但我想要的是有这样的网址：

```
/applications/1/jobseeker/index
/applications/1/jobseeker/new
/applications/1/jobseeker/create
/applications/1/jobseeker/load
/applications/1/jobseeker/retrieve 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:33:56.790

```
resources :applications do 
  resources :jobseeker, :only=> [:index, :new, :create] do
    collection do
      get  :load
      post :retrieve
    end
  end
end 
```

# java - 如何解决 Stanford Charniak Parser 依赖

> ID：16064157
> 
> 赞同：3
> 
> 时间：2013-04-17T15:29:31.193
> 
> 标签：java, stanford-nlp, charniak-parser

我正在尝试运行提供的 Charniak 解析器`stanford-corenlp-1.3.5.jar`。记录的包是`edu.stanford.nlp.parser.charniak`和类`CharniakParser`。

因此，我将给出一个代码示例，说明我如何为了完整性而尝试使用它：

```
CharniakParser cp = new CharniakParser();
PTBTokenizer<HasWord> ptbt = new PTBTokenizer(new FileReader("sample1.txt"), new WordTokenFactory(), "");
List<Word> tokens = new ArrayList<Word>();
for (Word token; ptbt.hasNext(); ) {
    token = (Word) ptbt.next();
    tokens.add(token);
}
Tree t = cp.getBarseParse(tokens); 
```

在运行此代码时的最后一行，我得到

`cannot run program "/u/nlp/packages/bllip-parser/reranking-parser.sh" ... The system cannot find the specified file`

问题是人类也找不到指定的文件。我没有看到发行版中包含它，也找不到我可能需要使用该名称下载的依赖项。谷歌搜索显示，“reranking-parser.sh”唯一存在的地方是斯坦福版本的 Charniak 解析器的实际源代码中（我正在努力澄清，因为我知道斯坦福最初并没有创建 Charniak 解析器，它来自布朗）。

那么，有人对这个解析器有经验吗？什么不见​​了？我更喜欢我在 SO 上的机会，所以我在这里问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:38:59.397

好的，好的，@DMoses 等人。我订阅了邮件列表，我得到了关于需要做什么的答案。所以让我把它作为未来访客的答案传递给未来的访客，因为它没有记录（直到现在）：

该文件`reranking-parser.sh`属于 Charniak 解析器的*特定*版本。因此，您需要获取github 上名为“bllip-parser”的解析器*版本。*CoreNLP 中没有对 Charniak 解析器的官方支持，提供的功能也不是独立的，而是一个学生扩展，旨在与来自 github 的外部解析器一起工作。

一个相当简单的过程确实指向 C++ 可执行文件，但这对我不起作用，因为此时我将使用 Python 调用 Java 来调用 C++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T19:59:10.640

不幸的是，[CoreNLP 的 CharniakParser.java 代码中](https://github.com/stanfordnlp/CoreNLP/blob/master/src/edu/stanford/nlp/parser/charniak/CharniakParser.java)有一个硬编码路径。要使用解析器，您可能需要编辑源代码以将其指向[Charniak 解析器发行版中的 parse-50best.sh](https://github.com/BLLIP/bllip-parser/blob/master/parse-50best.sh)（需要从斯坦福 CoreNLP 单独下载——请参阅第二部分中的 BLLIP Parser GitHub 项目关联）。

# jquery - 如何选择落后2步的元素的子元素？

> ID：16064158
> 
> 赞同：0
> 
> 时间：2013-04-17T15:29:34.050
> 
> 标签：jquery

在以下情况下，我如何从按钮中获取“onclick”属性的值？

```
<li>...<br><button onclick="x()">X</button></li>
<li>
<li onclick="monkey(this)"></li> 
```

我尝试了以下脚本，但这感觉不对：

```
function monkey(src){
    console.log($(src).prevAll()[0].children('button')[0].attr('onclick'));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T15:32:00.270

您必须使用`attr()`with `jQuery`object 并且您正在使用它与`DOM`object 所以不要使用*indexer*，并且调用 prev()*两次*可以给你你想要的元素

**[现场演示](http://jsfiddle.net/rajaadil/j57MP/)**

*改变*

```
console.log($(src).prevAll()[0].children('button')[0].attr('onclick')); 
```

*至*

```
console.log($(src).prev().prev().children('button').attr('onclick')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:34:17.650

```
console.log($(src).parents('button')[0].prop('onclick')); 
```

但是，我会查看您的代码，看看您是否可以让自己更轻松，例如将单击事件处理程序附加到您的列表元素并使用适当的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:32:56.963

好吧，如果您的 HTML 与您的示例完全一样，您可以这样做：

```
$(src).prevAll()[0].find("button").attr('onclick') 
```

* * *

或者，如果您的`li`元素属于父元素（我想他们确实如此！），那么您可以这样做：

```
$(src).parent().find("button").attr('onclick') 
```

这两个例子都假设只有一个`button`元素存在。如果您有多个，那么您需要更具体

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:36:32.407

给按钮一个类说'btn'

### HTML

```
<ul>
  <li>...<br><button class="btn" onclick="x()">X</button></li>
  <li>text</li>
  <li onclick="monkey(this)"></li>
</ul> 
```

### 脚本

```
function monkey(src){
    console.log($('.btn', $(src).siblings()).attr('onclick'));
} 
```

# highcharts - 光标：指针只使点可点击而不是线条

> ID：16064159
> 
> 赞同：0
> 
> 时间：2013-04-17T15:29:37.440
> 
> 标签：highcharts

我正在使用一个包含多条线的折线图。

该文档指定：

> cursor: String 如果您将单击事件附加到系列，您可以将光标设置为“指针”，以向用户发出可以单击点和线的信号。

我只希望这些点是可点击的，而不是线条。我面临的问题是我有其他线（在该 x 轴值处没有点）与我的点重叠。选择该点会选择该重叠线和该重叠线的点。因此，在 onclick 回调中，我得到了错误点的值。

有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:37:27.147

如果您只想点击一个系列，请为该系列设置最高 z-index（系列将在顶部），请参阅：[http ://api.highcharts.com/highcharts#plotOptions.series.zIndex](http://api.highcharts.com/highcharts#plotOptions.series.zIndex)

# javascript - 即使 javascript 表单验证失败，表单也会提交

> ID：16064166
> 
> 赞同：0
> 
> 时间：2013-04-17T15:29:57.127
> 
> 标签：javascript, forms, validation, submit

我制作了一个 javascript 代码来验证注册表单，但即使我尝试提交所有字段留空的表单，它仍然会提交表单。

这是我的 JavaScript：

```
<script type = "text/javascript">
        function hideError(){
            document.getElementById("firstnameerror").style.display="none";
            document.getElementById("lastnameerror").style.display="none";
            document.getElementById("addresserror").style.display="none";
            document.getElementById("emailerror").style.display="none";
            document.getElementById("sexerror").style.display="none";
            document.getElementById("ageerror").style.display="none";
            document.getElementById("pwderror").style.display="none";
            document.getElementById("disclosureerror").style.display="none";
        }
        function checkForm(){
            var firstname=document.getElementById("firstname").value;
            var lastname=document.getElementById("lastname").value;
            var address=document.getElementById("address").value;
            var email=document.getElementById("email").value;
            var sex=document.getElementById("sex").value;
            var age=document.getElementById("age").value;
            var pwd=document.getElementById("pwd").value;
            var disclosure=document.getElementById("disclosure").value;
            if(firstname==null || firstname==""){
                hideError();
                document.getElementById("firstnameerror").style.display="inline";
                document.getElementById("firstnamereq").style.display="none";
                document.getElementById("firstname").select();
                document.getElementById("firstname").focus();
                alert('form error'); return false;
            }
            else if(lastname==null || lastname==""){
                hideError();
                document.getElementById("lastnameerror").style.display="inline";
                document.getElementById("lastnamereq").style.display="none";
                document.getElementById("lastname").select();
                document.getElementById("lastname").focus();
                alert('form error'); return false;
            }
            else if(address==null || address==""){
                hideError();
                document.getElementById("addresserror").style.display="inline";
                document.getElementById("addressreq").style.display="none";
                document.getElementById("address").select();
                document.getElementById("address").focus();
                alert('form error'); return false;
            }
            else if(email==null || email==""){
                hideError();
                document.getElementById("emailError1").style.display="inline";
                document.getElementById("emailreq").style.display="none";
                document.getElementById("email").select();
                document.getElementById("email").focus();
            }
            var atpos=email.indexOf("@");
            var dotpos=email.lastIndexOf(".");
            else if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.length){
                hideError();
                document.getElementById("emailError2").style.display="inline";
                document.getElementById("emailreq").style.display="none";
                document.getElementById("email").select();
                document.getElementById("email").focus();
                alert('form error'); return false;
            }
            else if(sex==null || sex==""){
                hideError();
                document.getElementById("sexerror").style.display="inline";
                document.getElementById("sexreq").style.display="none";
                document.getElementById("sex").select();
                document.getElementById("sex").focus();
                alert('form error'); return false;
            }
            else if(age==null || age==""){
                hideError();
                document.getElementById("ageerror").style.display="inline";
                document.getElementById("agereq").style.display="none";
                document.getElementById("age").select();
                document.getElementById("age").focus();
                alert('form error'); return false;
            }
            else if(pwd==null || pwd==""){
                hideError();
                document.getElementById("pwderror").style.display="inline";
                document.getElementById("pwdreq").style.display="none";
                document.getElementById("pwd").select();
                document.getElementById("pwd").focus();
                alert('form error'); return false;
            }
            else if(pwd.length<4){
                hideError();
                document.getElementById("pwderror").style.display="inline";
                document.getElementById("pwdreq").style.display="none";
                document.getElementById("pwd").select();
                document.getElementById("pwd").focus();
                alert('form error'); return false;
            }
            else if (!(/[0-9]/).test(pwd)){
                hideError();
                document.getElementById("pwderror").style.display="inline";
                document.getElementById("pwdreq").style.display="none";
                document.getElementById("pwd").select();
                document.getElementById("pwd").focus();
                alert('form error'); return false;
            }
            else if (!(/[a-zA-Z]/).test(pwd)){
                hideError();
                document.getElementById("pwderror").style.display="inline";
                document.getElementById("pwdreq").style.display="none";
                document.getElementById("pwd").select();
                document.getElementById("pwd").focus();
                alert('form error'); return false;
            }
            else if(disclosure==null || disclosure==""){
                hideError();
                document.getElementById("disclosureerror").style.display="inline";
                document.getElementById("disclosurereq").style.display="none";
                document.getElementById("disclosure").select();
                document.getElementById("disclosure").focus();
                alert('form error'); return false;
            }
            return true;
        }
    </script> 
```

这是表格：

```
<form onsubmit="return checkForm();" method="post" action="formtest.php">
                        First Name:<br/>
                        <input type="text" value="" id="firstname" name="firstname" size="25"/><br/>
                        <div id="firstnamereq"><em>Must be filled in</em><br/></div>
                        <div class=error id="firstnameerror">Required: Please enter your first name<br/></div><br/>

                        Last Name:<br/>
                        <input type="text" value="" id="lastname" name="lastname" size="25"/><br/>
                        <div id="lastnamereq"><em>Must be filled in</em><br/></div>
                        <div class=error id="lastnameerror">Required: Please enter your last name<br/></div><br/>

                        Address:<br/>
                        <input type="text" value="" id="address" name="address" size="50"/><br/>
                        <div id="addressreq"><em>Must be filled in</em><br/></div>
                        <div class=error id="addresserror">Required: Please enter your address<br/></div><br/>

                        Email:<br/>
                        <input type="text" value="" id="email" name="email" size="50"/><br/>
                        <div id="emailreq"><em>Must be a valid email address</em><br/></div>
                        <div class=error id="emailerror1">Required: Please enter your email address<br/></div>
                        <div class=error id="emailerror2">Not a valid email address!<br/></div><br/>

                        Sex:<br/>
                        <input type="radio" value="male" id="sex" name="sex"/>Male<br/>
                        <input type="radio" value="female" id="sex" name="sex"/>Female<br/>
                        <div id="sexreq"><em>Must select either one</em><br/></div>
                        <div class=error id="sexerror">Required: Please enter your sex<br/></div><br/>

                        Age:<br/>
                        <select name="age" id="age">
                        <option value=""/></option>
                        <option value="underage"/>16 - 17</option>
                        <option value="youth"/>18 - 25</option>
                        <option value="adult"/>26 - 40</option>
                        <option value="mature"/>41 - 65</option>
                        <option value="senior"/>66+</option>
                        </select><br/>
                        <div id="agereq"><em>Must select an age group</em><br/></div>
                        <div class=error id="ageerror">Required: Please enter your age group<br/></div><br/>

                        Password:<br/>
                        <input type="password" value="" id="pwd" name="pwd"/><br/>
                        <div id="pwdreq"><ul>
                            <li><em>Must be at least 4 characters long</em></li>
                            <li><em>Must have at least 1 character and 1 number</em></li>
                        </ul><br/></div>
                        <div class=error id="pwderror">Please make sure your password meets the following requirements:<br/>
                        <ul>
                            <li>Must be at least 4 characters long</li>
                            <li>Must have at least 1 character and 1 number</li>
                        </ul><br/></div><br/>

                        Disclosure: <input type="checkbox" value="accept" id="disclosure" name="disclosure"/>
                        I have read, understood and consent to the privacy policy.<br/>
                        <div id="disclosurereq"><em>Must be checked</em><br/></div>
                        <div class=error id="disclosureerror">Box must be checked<br/></div>
                        <p><input type="submit" name="submit" value="Register"><br/></p>            
                    </form> 
```

如果问题在代码块中的某个地方很明显，我很抱歉，但我未经训练的眼睛完全看不到它......我希望这里有人可以帮助我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:32:54.307

传递给 checkForm 的第一个参数是事件对象。尝试：

```
function checkForm(evt) {
    // ... do validation and when it fails:
    evt.preventDefault();
    return false;
    // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:29:18.053

您不需要`else`声明，因为您在声明中**返回**`if`。**Try/catch**也有帮助，因为如果您有任何错误`checkForm()`，就会抛出异常并且您看不到错误，浏览器会立即发送表单数据。

```
function checkForm(){
try {
    var firstname=document.getElementById("firstname").value;
    var lastname=document.getElementById("lastname").value;
    var address=document.getElementById("address").value;
    var email=document.getElementById("email").value;
    var sex=document.getElementById("sex").value;
    var age=document.getElementById("age").value;
    var pwd=document.getElementById("pwd").value;
    var disclosure=document.getElementById("disclosure").value;
    if(!firstname){
        hideError();
        document.getElementById("firstnameerror").style.display="inline";
        document.getElementById("firstnamereq").style.display="none";
        document.getElementById("firstname").select();
        document.getElementById("firstname").focus();
        alert('form error'); return false;
    }
    if(!lastname){
        hideError();
        document.getElementById("lastnameerror").style.display="inline";
        document.getElementById("lastnamereq").style.display="none";
        document.getElementById("lastname").select();
        document.getElementById("lastname").focus();
        alert('form error'); return false;
    }
    if(!address){
        hideError();
        document.getElementById("addresserror").style.display="inline";
        document.getElementById("addressreq").style.display="none";
        document.getElementById("address").select();
        document.getElementById("address").focus();
        alert('form error'); return false;
    }
    if(!email){
        hideError();
        document.getElementById("emailError1").style.display="inline";
        document.getElementById("emailreq").style.display="none";
        document.getElementById("email").select();
        document.getElementById("email").focus();
        alert('form error'); return false;
    }
    var atpos=email.indexOf("@");
    var dotpos=email.lastIndexOf(".");
    if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.length){
        hideError();
        document.getElementById("emailError2").style.display="inline";
        document.getElementById("emailreq").style.display="none";
        document.getElementById("email").select();
        document.getElementById("email").focus();
        alert('form error'); return false;
    }
    if(!sex){
        hideError();
        document.getElementById("sexerror").style.display="inline";
        document.getElementById("sexreq").style.display="none";
        document.getElementById("sex").select();
        document.getElementById("sex").focus();
        alert('form error'); return false;
    }
    if(!age){
        hideError();
        document.getElementById("ageerror").style.display="inline";
        document.getElementById("agereq").style.display="none";
        document.getElementById("age").select();
        document.getElementById("age").focus();
        alert('form error'); return false;
    }
    if(!pwd){
        hideError();
        document.getElementById("pwderror").style.display="inline";
        document.getElementById("pwdreq").style.display="none";
        document.getElementById("pwd").select();
        document.getElementById("pwd").focus();
        alert('form error'); return false;
    }
    if(pwd.length<4){
        hideError();
        document.getElementById("pwderror").style.display="inline";
        document.getElementById("pwdreq").style.display="none";
        document.getElementById("pwd").select();
        document.getElementById("pwd").focus();
        alert('form error'); return false;
    }
    if (!(/[0-9]/).test(pwd)){
        hideError();
        document.getElementById("pwderror").style.display="inline";
        document.getElementById("pwdreq").style.display="none";
        document.getElementById("pwd").select();
        document.getElementById("pwd").focus();
        alert('form error'); return false;
    }
    if (!(/[a-zA-Z]/).test(pwd)){
        hideError();
        document.getElementById("pwderror").style.display="inline";
        document.getElementById("pwdreq").style.display="none";
        document.getElementById("pwd").select();
        document.getElementById("pwd").focus();
        alert('form error'); return false;
    }
    if(!disclosure){
        hideError();
        document.getElementById("disclosureerror").style.display="inline";
        document.getElementById("disclosurereq").style.display="none";
        document.getElementById("disclosure").select();
        document.getElementById("disclosure").focus();
        alert('form error'); return false;
    }
    return true;
} catch(error) {
    alert(error)
}
} 
```

# git - 在 OSX 上，使用 tr 压缩 git diff 结果将空格 转换为制表符

> ID：16064169
> 
> 赞同：1
> 
> 时间：2013-04-17T15:30:02.463
> 
> 标签：git, bash, tr

我的问题很容易复制，我只在 OSX 上使用与 10.8.3 捆绑在一起的默认版本“tr”对其进行了测试。

每当我做一个：

```
git diff --numstat <sha1> <sha2> 
```

结果如下：

```
1       1       test.php 
```

注意这些字符之间的分隔字符都是空格。现在，当我将该命令直接通过管道传递到 tr 以按如下方式挤出这些空间时：

```
git diff --numstat <sha1> <sha2> | tr -s ' ' 
```

它会导致所有空格都转换为一个制表符（我试图将其粘贴到此处，但实际上并没有用）。

问题是，如果我正确地记得我的 bash，这根本不是预期的行为。此外，当我尝试通过将其放入文本文件中来复制它时，对文本文件进行 cat-ing 并通过相同的管道对其进行 tr-ing，它*确实*按预期工作。

有谁知道这是为什么，你将如何优雅地解决它？

我的最终目标是在 python 中解析这些结果，如果两个数字和文件名之间只有一个空格，这会容易得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:28:09.207

我很确定这些不是输出行中的空格。当我发出包含制表符的行时，我可以复制您的问题。试试这个修改：

```
git diff --numstat <sha1> <sha2> | tr -s ' \t' '  ' 
```

第一组是空格和制表符，第二组是两个空格。

# android - Android蓝牙配对和重新连接失败

> ID：16064170
> 
> 赞同：0
> 
> 时间：2013-04-17T15:30:09.143
> 
> 标签：android, bluetooth

在三星 nexus S OS (4.0.1) 上，当我与另一个蓝牙设备配对时，它正在配对和连接。一旦蓝牙配对，然后尝试再次重新连接，它就会抛出 IOException 异常并且手机会崩溃。

我的蓝牙代码：

```
try{
mBluetoothAdapter.cancelDiscovery();        
mmSocket = device.createInsecureRfcommSocketToServiceRecord(uuid);
mmSocket.connect();
}
catch(IOException e){
e.printStackTrace(); 
}

java.io.IOException: Service discovery failed
android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:431)
android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:224) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T17:47:43.177

我有这个问题；我的解决方案是在套接字上的最后一次通信和对 socket.close() 的调用之间让线程休眠 1000 毫秒。

# serialization - 在 HBase 中存储和检索字符串数组

> ID：16064171
> 
> 赞同：3
> 
> 时间：2013-04-17T15:30:12.767
> 
> 标签：serialization, hbase

我已阅读有关使用 HBase 存储字符串数组的答案（[如何将复杂对象存储到 hadoop Hbase？ ）。](https://stackoverflow.com/questions/4086684/how-to-store-complex-objects-into-hadoop-hbase?answertab=votes#tab-top)

据说使用`ArrayWritable`Class 来序列化数组。我`WritableUtils.toByteArray(Writable ... writable)`会得到一个`byte[]`可以存储在 HBase 中的文件。

当我现在尝试再次检索行时，我得到了一个`byte[]`我必须以某种方式再次转换回`ArrayWritable`. 但我找不到办法做到这一点。也许您知道答案，或者我在序列化我的`String[]`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T18:48:28.220

您可以应用以下方法取回`ArrayWritable`（取自我之前的回答，请参见[此处](https://stackoverflow.com/a/13288750/1050422)）。

```
public static <T extends Writable> T asWritable(byte[] bytes, Class<T> clazz)
            throws IOException {
        T result = null;
        DataInputStream dataIn = null;
        try {
            result = clazz.newInstance();
            ByteArrayInputStream in = new ByteArrayInputStream(bytes);
            dataIn = new DataInputStream(in);
            result.readFields(dataIn);
        }
        catch (InstantiationException e) {
            // should not happen
            assert false;
        }
        catch (IllegalAccessException e) {
            // should not happen
            assert false;
        }
        finally {
            IOUtils.closeQuietly(dataIn);
        }
        return result;
    } 
```

此方法只是根据提供的类类型标记将字节数组反序列化为正确的对象类型。
例如：假设您有一个自定义的 ArrayWritable：

```
public class TextArrayWritable extends ArrayWritable {
    public TextArrayWritable() {
      super(Text.class);
    }
} 
```

现在您发出一个 HBase get：

```
...
Get get = new Get(row);
Result result = htable.get(get);
byte[] value = result.getValue(family, qualifier);
TextArrayWritable tawReturned = asWritable(value, TextArrayWritable.class);
Text[] texts = (Text[]) tawReturned.toArray();
for (Text t : texts) {
  System.out.print(t + " ");
}
... 
```

注意：
您可能已经在 WritableUtils 中找到了[readCompressedStringArray()](http://hadoop.apache.org/docs/r0.23.6/api/org/apache/hadoop/io/WritableUtils.html#readCompressedStringArray%28java.io.DataInput%29)和[writeCompressedStringArray()](http://hadoop.apache.org/docs/r0.23.6/api/org/apache/hadoop/io/WritableUtils.html#writeCompressedByteArray%28java.io.DataOutput,%20byte%5B%5D%29)方法，如果您有自己的 String 数组支持的 Writable 类，它们似乎是合适的。在使用它们之前，我会警告您，由于 gzip 压缩/解压缩导致的开销，这些可能会导致严重的性能损失。

# gruntjs - 如何将 grunt 插件任务中的路径解析为自己的资源？

> ID：16064172
> 
> 赞同：4
> 
> 时间：2013-04-17T15:30:15.307
> 
> 标签：gruntjs

我有一个示例 grunt 插件

```
/tasks
   sample.js
   config.file
Gruntfile.js
package.json 
```

我想获取sample.js 中config.file 的路径。一开始我是这样做的

```
path.resolve('tasks/config.file') 
```

在安装插件之前没问题。config.file 的路径更改为“~/some_project/node_modules/sample_plugin/tasks/config.file”，但`path.resolve`返回了“~/some_project/tasks/config.file”。

如何获得 config.file 的正确路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-28T15:00:25.613

原来我问错了方向。我的问题属于 nodejs 而不是 gruntjs。答案是[__dirname](http://nodejs.org/api/globals.html#globals_dirname)指令。您可以像这样获取 config.file 的完整路径：`__dirname + path.sep + 'config.file'`

# java - 设计基于计数的访问控制

> ID：16064179
> 
> 赞同：0
> 
> 时间：2013-04-17T15:30:38.190
> 
> 标签：java, algorithm, architecture

我想就设计基于计数的访问控制获得一些建议。例如，我想根据客户的帐户限制客户可以在我的系统中创建的用户数量。因此，默认情况下，客户可以创建 2 个用户，但如果升级他们的帐户，他们可以创建 5 个用户，依此类推。在类似的基础上，我还需要限制更多功能。

该应用程序遵循通用模型，因此公开的每个功能都有一个后备表，并且我们有一个处理该表上的 CRUD 操作的类。此外，该应用程序在多个节点上运行并具有分布式缓存。

我为实现这一点而采取的方法如下 - 我有一个新表，它捕获要控制的功能和允许的限制（每个客户存储）。- 我截取所有表的创建方法并检查相关表是否需要应用访问控制。如果是这样，我会获取已创建实体的数量并与限制进行比较以决定是否应该允许创建。- 在并发请求的情况下，我正在使用数据库来处理同步。因此，在调用 create 方法后，我使用以下 where 子句更新表

> 其中 (count_column + 1) = #countInMemory#

. 即仅当存储在 DB 中的值 + 1 = 内存中的值时，更新才会成功。这将确保即使两个线程同时尝试创建，也只有其中一个能够成功更新。成功更新的线程获胜，另一个回滚。这样我就不需要同步应用程序中的任何代码。

我想知道是否有任何其他/更好的方法来做到这一点。我的应用程序在 Oracle 和 MySQL 数据库上运行。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:04:34.550

当你回滚时，你是重试（在获取新的用户数之后）还是失败？我推荐前者，假设新获取的用户数将允许另一个用户。

我最近处理了一个类似的系统，需要考虑一些事项：您是否希望 CustomerA 能够将其用户转移到 CustomerB？（假设客户不是独立的，例如在我们的系统中，客户 A 可能是 IT 经理，而客户 B 可能是为同一家公司工作的会计经理，当客户 A 的一名员工转到会计部门时，他希望客户 B 的员工能够反映这一点帐户。）当客户被删除时，客户的用户会发生什么？（在我们的例子中，另一个客户/经理需要采用它们，否则它们将被删除。）您如何将客户的用户限制存储在单独的表中（例如，客户的类型为“Level2”，客户类型为表中说“Level2”客户可以创建 5 个用户），或者在客户'`type`说他们可以拥有 5 个用户的`override`列，以及说他们可以拥有额外 3 个用户的列）？

但这无关紧要。您的数据库同步很好。

# jquery - jqGrid寻呼机中的双行按钮

> ID：16064180
> 
> 赞同：0
> 
> 时间：2013-04-17T15:30:39.460
> 
> 标签：jquery, button, jqgrid, pager

我的页面布局有问题。我已经填写了页面上的所有可用空间，并且按钮与导航栏合并。我需要至少有两行才能添加更多按钮。

我正在寻找这样的东西：

![照片](https://i.stack.imgur.com/cSZvd.jpg)

寻呼机（导航栏）

按钮 1 按钮 2 按钮 3 .......... 第 1 至 4 页 ...... 记录 10 条，共 35 条
按钮 4 按钮 5 按钮 6

这是我添加按钮的代码：

```
.navGrid('#pager_list') {..}
.navButtonAdd('#pager_list', {
    id:"btnResumen",
    caption:"Resumen",
    title: "Resumen de errores",
    buttonicon:"ui-icon-mail-closed",
    onClickButton: function(e) {
        bajarResumen();
    },
    position:"last"
})
.navButtonAdd('#pager_list', {
    caption:"A texto",
    title: "Bajar y enviar x mail",
    buttonicon:"ui-icon-mail-closed",
    onClickButton: function(e) {
        bajarATexto("Enviando...");
    },
    position:"last"
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T14:09:16.017

我可以使用 css 来做到这一点：

```
<style type="text/css">
     .ui-jqgrid .ui-jqgrid-pager .ui-pg-button{
        display: inline;
        float:left;
    }
    .ui-jqgrid .ui-jqgrid-pager{
        height: auto;
    }
</style> 
```

或者，如果您想在特定的 grig 中执行此操作，您可以执行以下操作：

```
 <style type="text/css">
     .ui-jqgrid #yourGridID.ui-jqgrid-pager .ui-pg-button{
        display: inline;
        float:left;
    }
    .ui-jqgrid #yourGridID.ui-jqgrid-pager{
        height: auto;
    }
</style> 
```

希望有帮助！

# python - QLineEdit 撤消/重做功能会干扰全局撤消/重做

> ID：16064183
> 
> 赞同：3
> 
> 时间：2013-04-17T15:30:45.953
> 
> 标签：python, qt, pyside, qlineedit

在我正在构建的应用程序中，我实现了一个全局撤消/重做系统，可以通过普通快捷键 Ctrl-Z 和 Ctrl-Shift-Z 访问该系统。

我还使用了具有自己的撤消/重做功能的 QLineEdit 字段。每当触发editingFinished 事件（按下回车或失去焦点）时，都会创建一个全局撤消事件。但是，如果您只是键入几个字母，然后按 Ctrl-Z，则该字段会捕获按键，使用其自己的撤消系统撤消您的最后一次编辑，然后不会传递按键。

我想实现的是：

1.  当 QLineEdit 具有焦点并按下 Ctrl-Z 但 QLineEdit 中没有要撤消的编辑时（当 undoAvailable() 为 False 时），我希望小部件忽略按键并将其传递给其父级。

2.  当撤消可用并且用户在小部件具有焦点时调用*全局*撤消/重做操作（IE 按下工具栏上的按钮），我希望将它们传递给这个小部件。

有任何想法吗？

# android - GCM：重试后标头

> ID：16064185
> 
> 赞同：2
> 
> 时间：2013-04-17T15:30:49.990
> 
> 标签：android, push-notification, google-cloud-messaging

根据[GCM 文档](http://developer.android.com/google/gcm/gcm.html)，我们可以得到这种类型的结果消息：

```
{ "multicast_id": 216,
  "success": 3,
  "failure": 3,
  "canonical_ids": 1,
  "results": [
    { "message_id": "1:0408" },
    { "error": "Unavailable" },
    { "error": "InvalidRegistration" },
    { "message_id": "1:1516" },
    { "message_id": "1:2342", "registration_id": "32" },
    { "error": "NotRegistered"}
  ]
} 
```

第二条消息有错误类型`Unavailable`，应该重新发送。根据文档，`Retry-After`如果标头包含在 GCM 服务器的响应中，我们应该尊重标头。

我有两个问题：

1.  `Retry-After`标题是否始终可用？也在响应状态`200`？
2.  在这种情况下，实际上是否有可能只重发一条消息？我应该只重新发送这条消息还是全部重新发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:51:27.993

1)

很难说。一方面，他们说，`Retry-After`当您遇到 500-599 范围内的错误时，这是​​可以预料的：

> 5xx
> 
> 500-599 范围内的错误（例如 500 或 503）表示 GCM 服务器在尝试处理请求时出现内部错误，或者服务器暂时不可用（例如，由于超时）。发件人必须稍后重试，遵守响应中包含的任何 Retry-After 标头。应用程序服务器必须实现指数退避。

我检查了纯文本请求和 JSON 请求的响应标头，但没有得到`Retry-After`for`200`响应。但是，我不知道如何模拟`Unavailable`错误，所以如果响应中出现此错误，他们可能会发送该标头。

2)

如果只有一条消息出现“不可用”错误（如您的示例响应中所示），则只应重新发送该消息。其余消息要么成功，要么失败，出现不需要重试的错误。因此他们不应该被怨恨。

# android - 从安卓手机获取jar文件

> ID：16064187
> 
> 赞同：-6
> 
> 时间：2013-04-17T15:30:55.427
> 
> 标签：android, eclipse, jar

我在 Eclipse 中的项目遇到了一些问题。

项目中有一些错误，解决它们的最佳方法是重新导入项目。完成后，我在项目中的所有文件都是空的。

有什么方法可以从我测试我最后一个版本的程序的电话中导入我的源代码吗？（带有 Java 中的 .jar 文件）

有谁之前经历过这个吗？

如何导入项目`File->Import->Existing...`并选择项目和目录的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:06:54.800

`.jar`文件通常不包含源代码，但它们包含带有字节码的类文件（`.class`文件，而不是`.java`文件）。曾经查看过类文件吗？那不是可读的代码，它是一些虚拟机指令，不可能从这些文件中取回源代码。你可以反编译它们，你会得到*一些源代码*，但这不是你的原始源代码，没有注释，有时人类几乎不可读，因为局部变量名之类的东西是不可恢复的。所以我想答案是否定的。

# php - 通过 API 更新 Eventbrite Google Analytics 跟踪代码

> ID：16064192
> 
> 赞同：0
> 
> 时间：2013-04-17T15:31:07.830
> 
> 标签：php, eventbrite

是否可以通过 Eventbrite API 更新 Eventbrite 事件的[Google Analytics 跟踪 ID ？](http://help.eventbrite.com/customer/portal/articles/428835-google-analytics-integration)

[我在Eventbrite API](http://developer.eventbrite.com/doc/)中没有看到任何文档，也许[event_update](http://developer.eventbrite.com/doc/events/event_update/)方法有一些未记录的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:32:47.150

目前无法通过 api 更新事件的 Google Analytics ID。

# c# - smartirc4net 永远监听，无法退出线程

> ID：16064196
> 
> 赞同：0
> 
> 时间：2013-04-17T15:31:18.160
> 
> 标签：c#, .net, multithreading, irc

我有一个使用 smartirc4net 库的 IRC 机器人。我遇到了机器人正在侦听命令的问题，我希望它正在运行的线程退出。该`Listen()`命令永远阻塞。如果我使用`ListenOnce()`，我可以将调用放入`While(!ShouldExit)`循环中，但我必须等待机器人触发`ListenOnce()`.

```
 protected void irc_OnConnected(object sender, EventArgs e)
    {
        irc.Login(configuration.IRCNick, configuration.IRCNick);

        while (!_shouldDisconnect)
        {
            irc.ListenOnce();
        }

        irc.Disconnect();
    } 
```

作为一种解决方法，当机器人从父线程发出断开连接命令时，它会向自己发送一条消息：

```
 /// <summary>
    /// Used by the parent thread to disconnect the bot
    /// </summary>
    /// <returns></returns>
    public void Disconnect()
    {
        _shouldDisconnect = true;

        irc.SendMessage(SendType.Message, irc.Nickname, "EXIT YOU STUPID BOT");
    } 
```

这会触发`ListenOnce()`事件通过 while 循环循环，然后成功断开连接。我是在错误地接近这个吗？有没有更简洁的方法让机器人立即断开连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:54:20.457

发现这是最新代码中的一个错误，在[https://github.com/meebey/SmartIrc4net/issues/4与 meebey 确认](https://github.com/meebey/SmartIrc4net/issues/4)

# c# - “‘ObjectContent`1’类型无法序列化内容类型‘application/json’的响应正文

> ID：16064197
> 
> 赞同：3
> 
> 时间：2013-04-17T15:31:23.747
> 
> 标签：c#, entity-framework, linq, odata

我有 2 个 POCO 课程 - Contact 和 TrainingSeminar - 使用 EF5 加入了多对多关系

在联系人 odata 控制器中，我希望能够返回联系人注册的 TrainingSeminars ......所以我有以下控制器方法

```
public IQueryable<TrainingSeminar> GetTrainingSeminars([FromODataUri] int key)
{
    var contact = _context.Contacts.Find(key);
    var seminars = contact.TrainingSeminars.ToList();
    return seminars as IQueryable<TrainingSeminar>;
} 
```

当我在 Visual Studio 中调试时，返回对象“研讨会”有 2 个项目，但在 Fiddler 中出现以下错误：

> “'ObjectContent`1' 类型无法序列化内容类型 'application/json....”的响应正文....“消息”：“无法序列化 null 'feed'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:21:12.737

从您的代码中，`seminars`是 a `List<T>`，因此是最后一行

```
return seminars as IQueryable<TrainingSeminar>; 
```

将始终为 null，因为`List<T>`未实现`IQueryable<T>`. 你应该使用，

```
return seminars.AsQueryable(); 
```

反而。

# php - Jamie Rumbelow 的 MY_Model

> ID：16064199
> 
> 赞同：0
> 
> 时间：2013-04-17T15:31:32.093
> 
> 标签：php, codeigniter

我有一个问题，我正在使用 Jamie Rumbelow`MY_Model`作为我的模型，我试图弄清楚如何从单独的表中添加一个字段。

网站页面`id`- , `page_name`, `page_slug`, `date_created`, `author_id`,`sort_order`

我运行了一个获取所有功能以获取站点页面的所有记录。它正确返回数组，但是当它返回时，它返回`author_id`我需要它从用户表中获取实际用户名的值。

用户 - `id`, `username`, `first_name`,`last_name`

所以用户表的`author_id`equals `id`，它需要选择名字和姓氏。我不知道如何用这个来解决这个问题`MY_Model`。

有没有其他人尝试过这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:43:30.973

Jamie Rumbelow 的基本模型支持非常基本的关系。

您的页面模型应该定义关系：

```
class Page_model extends MY_Model
{
    public $belongs_to = array('author');
} 
```

您的作者模型也应该如此：

```
class Author_model extends MY_Model
{
    public $has_many = array('posts');
} 
```

现在，您应该能够检索具有相关作者的帖子：

```
$pages = $this->page->with('author')->get_all(); 
```

这都在[文档](https://github.com/jamierumbelow/codeigniter-base-model "文件")中。

# syntax - 相关产品 Shopify 液体

> ID：16064200
> 
> 赞同：2
> 
> 时间：2013-04-17T15:31:33.577
> 
> 标签：syntax, shopify, liquid

我正在尝试确定正确的[Shopify Liquid](http://wiki.shopify.com/Liquid)语法，以输出与当前产品具有相同标签的产品列表。

这将出现在产品页面的“相关产品”框中，我希望它仅列出与当前产品页面的相同标签匹配的其他产品。

不幸的是，[相关产品 wiki 页面](http://wiki.shopify.com/Related_Products)对此没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T06:32:25.743

我不确定您是否可以获得一组带有通用标签的所有产品（尽管我可能错了），但这是一种可能的替代方法 - 创建包含该标签的产品的智能集合，然后从相关项目区域中的该集合。

要将产品标签连接到产品页面上的正确集合，请确保您的集合句柄与您正在使用的标签相同，然后执行类似操作以根据标签获取正确的集合。

```
{% for c in collections %}
  {% assign t = {{product.tags[0] | handleize}} %}
  {% if c.handle == t %}
    {% assign collection = c %}
  {% endif %} 
{% endfor %} 
```

然后使用您链接的 wiki 文章中概述的方法输出集合中的产品。

像这样的东西（假设您使用“产品循环”包含方法）应该可以解决问题：

```
{% assign current_product = product %}
{% assign current_product_found = false %}
{% for product in collection.products %}
  {% if product.handle == current_product.handle %}
    {% assign current_product_found = true %}
  {% else %}
    {% unless current_product_found == false and forloop.last %}
      {% include 'product-loop' with collection.handle %}
    {% endunless %}
  {% endif %}
{% endfor %} 
```

# php - 获取 PHP 数组中的索引位置值

> ID：16064201
> 
> 赞同：0
> 
> 时间：2013-04-17T15:31:36.513
> 
> 标签：php, arrays

我很困惑为什么在以下两个代码块中，打印`$arr`给出相同的输出但`$arr['type'][0]`没有。注意`r`第二个代码块输出中的：

```
$arr=array('type'=>' review');   
print_r($arr);
echo '<br>';
print_r($arr['type'][0]); 
```

* * *

```
$arr['type']='review';   
print_r($arr);
echo '<br>';
print_r($arr['type'][0]); 
```

**输出**

```
Array ( [type] => review ) 
```

* * *

```
Array ( [type] => review ) 
r 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:33:23.287

有一个额外的空间：

```
$arr=array('type'=>' review');   
                    ^-- right there 
```

我认为它正在打印空间，因为 HTML 对空格不敏感，所以您看不到。

PHP 也有可能引发警告。像数组一样索引字符串通常是一个错误。确保您已打开错误和通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:38:22.730

在您的第一个代码块中，`$arr=array('type'=>' review');`第一个单引号和审查中的 r 之间有一个空格。这就是为什么您的第一个代码块似乎什么也不打印的原因，因为它正在打印一个空格字符。

将该代码更改为`$arr=array('type'=>'review');`以解决该问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:37:25.317

实际上它做同样的事情。注意你在第一个块中的空间：

```
$arr = array('type' => ' review');
// ---------------------^
print_r($arr);
echo '<br>';
print_r($arr['type'][0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:42:40.260

print_r 打印数组上的信息。您传递的数组 print_r 是一个字符数组，它就是一个字符串。[0] 显示“r”，[1] 显示“e”，依此类推。这就是 print_r($arr['type']) 显示完整字符串并添加第二个索引在您提供的任何索引处显示适当字符的原因。

# php - 如何在 php 中执行 $this->model->getList()

> ID：16064205
> 
> 赞同：0
> 
> 时间：2013-04-17T15:31:39.880
> 
> 标签：php, undefined

我正在研究我的 MVC，并且我已经完成了一些项目以了解其工作原理，但是，当我执行诸如`$this->model->getList()`从控制器中的数据库中获取项目列表之类的操作时，我收到了此错误消息

```
Notice: Undefined property: Managemenu::$model in C:\wamp\www\mymvc\Admin\controllers\managemenu.php on line 10

Fatal error: Call to a member function getList() on a non-object in C:\wamp\www\mymvc\Admin\controllers\managemenu.php on line 10 
```

实际上这是我`managemenu`模型上的代码

```
<?php class Managemenu_Model extends Model{
function __construct(){
    parent::__construct();
}
public function getList(){
    $menus = Menu::find_all();
    return $menus;
}
public function edit(){
}
public function update(){
}
public function save(){
}
public function delete(){
}
}?> 
```

这就是我的控制器的样子

```
<?php class Managemenu extends Controller{
public $mymenus = null;
function __construct(){
    parent::__construct();
    $this->index();
}
public function index(){
    @$this->loadModel("managemenu");
    $this->mymenus = $this->model->getList();
    $this->view->render("managemenu/index");
}
public function doList(){
}}?> 
```

另外，我想通过循环进入表格来获取前端的菜单列表，`$mymenus`如果我这样做的话`foreach($this->mymenus as....)`，我的视图模板中也继续出现相同的错误

谁能帮帮我。我不知道为什么会出现这个错误

# android - Android检索服务崩溃时间

> ID：16064209
> 
> 赞同：0
> 
> 时间：2013-04-17T15:31:49.047
> 
> 标签：android, service

我正在开发三种不同的服务，并且在设备启动时，一项服务启动另外两项服务。现在它工作正常，但有时我的服务崩溃并重新启动。我知道这种行为在服务中很常见，如果内存不足，那么回收内存服务会自行重新启动。

我需要跟踪服务信息，例如获取服务崩溃时间。现在，我通过在中编写代码`onstartCommand()`和停止时间来检索服务开始时间`onDestroy()`。

我观察到的是`onDestroy()`服务崩溃时代码中的停止时间不会执行。那么有没有办法获得服务崩溃时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:02:57.680

一些想法：

*   如果它崩溃了，它会在日志文件中留下痕迹，这里有一些关于阅读它的评论：[Android 从手机读取错误日志](https://stackoverflow.com/questions/2147610/android-read-error-log-from-handset)

*   如果它被系统以正常方式关闭，它应该通过onDestroy。

*   如果是通过别处报道过的略显神秘的“关闭，重启”效果，那么它似乎并没有命中日志，但是这两个事件在时间上*似乎*很接近，而且这种效果似乎被阻止了使服务在单独处理中运行。（[Android 服务 onCreate 被多次调用，而没有调用 onDestroy](https://stackoverflow.com/questions/7211066/android-service-oncreate-is-called-multiple-times-without-calling-ondestroy)并且可能[Service 被 AlarmManager 重新创建](https://stackoverflow.com/questions/15435117/service-being-re-created-by-alarmmanager)）。

*   从状态管理的角度来看，如果您存储服务最后一次做某事的时间（即保存它做某事的时间，并在每次做某事时更新它），那么您将有一个很好的估计。

# iphone - 在 iOS 上的视图之间传递值与情节提要的问题

> ID：16064210
> 
> 赞同：0
> 
> 时间：2013-04-17T15:31:50.983
> 
> 标签：iphone, ios

我有 2 个 UIViewController，我可以毫无问题地在它们之间传递值。当我尝试将值传递给第三个视图（UITableViewController）时，问题就来了。这是我的代码

所有的连接都设置正确，tableview 在这里被调用：

```
- (IBAction)goToTableView:(id)sender {
    TableMovieViewController *vc=[self.storyboard instantiateViewControllerWithIdentifier:@"TableMovieViewController"];
    vc.finalResult.text=stringFromFirstView;
    [self presentViewController:vc animated:YES completion:nil];
} 
```

有`vc.finalResult.text`例子`"Test Call"`，我验证了，价值就在那里。

现在在表视图文件上：

.h 文件：

```
@property(strong, nonatomic)UITextField *finalResult; 
```

.m 文件：

```
@synthesize finalResult;

- (void)viewDidLoad
{
    [super viewDidLoad];
    UINavigationBar *nav = [[UINavigationBar alloc]initWithFrame:CGRectMake(0, 0, 320, 40)];
    UINavigationItem *navItem = [[UINavigationItem alloc] initWithTitle:finalResult];
    [nav pushNavigationItem:navItem animated:FALSE];
    [self.view addSubview:nav];
} 
```

永远不会使用`finalResult`从前一个视图传递的值进行设置。

有任何想法吗

谢谢罗德里戈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:36:06.887

改变：

```
UINavigationItem *navItem = [[UINavigationItem alloc] initWithTitle:finalResult]; 
```

和：

```
UINavigationItem *navItem = [[UINavigationItem alloc] initWithTitle:finalResult.text]; 
```

`finalResult`是类型`UITextField`而不是`NSString`。 `initWithTitle:`要求 a`NSString`而不是`UITextField`你现在设置的 a 。

编辑：当我阅读作为对我的回答的评论的编辑时，你说这`UITextField *finalResult`是一个零值。这可能是因为您没有按应有的方式分配和初始化 UITextField。

您`finalResult = [[UITextField alloc] init];`至少需要在设置文本的位置之前执行此操作。我建议你在`UITableViewController`.

# image - 如果可能，wordpress 显示图像标题，但仅在帖子页面上

> ID：16064211
> 
> 赞同：0
> 
> 时间：2013-04-17T15:31:51.533
> 
> 标签：image, wordpress, caption

我正在尝试制作一个可以放入我的functions.php 的函数来控制放置在每个帖子页面上的图像。我希望任何具有标题的图像都能在带有段落标签的图像下显示该标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:21:08.503

尝试这个：

```
function img_caption_only_in_posts( $current_html, $attr, $content ) {
global $post;
    extract(shortcode_atts(array(
        'id'    => '',
        'align' => 'alignnone',
        'width' => '',
        'caption' => ''
    ), $attr));
    if ( 1 > (int) $width || empty($caption) )
        return $content;

    if ($post->post_type=='page')
     $caption="";

    if ( $id ) $id = 'id="' . esc_attr($id) . '" ';

    return '<div ' . $id . 'class="wp-caption ' . esc_attr($align) . '" style="width: ' . (10 + (int) $width) . 'px">'
. do_shortcode( $content ) . '<p class="wp-caption-text">' . $caption . '</p></div>';
}
add_filter( 'img_caption_shortcode', 'img_caption_only_in_posts',10,3 ); 
```

[我从这个答案](https://wordpress.stackexchange.com/a/4287/28218)中借用了代码，并添加了用于检查帖子是否为页面的代码。

# javascript - 使用 Jquery/Javascript 访问嵌入在 XML 中的 JSON

> ID：16064214
> 
> 赞同：1
> 
> 时间：2013-04-17T15:31:53.143
> 
> 标签：javascript, jquery, xml, ajax, json

我有一个 jquery 函数，它与一个看起来像这样的 ASP.NET Web 服务通信

```
$(document).ready(function() {
                         $.support.cors = true;
             $.ajax({
                 type: "GET",
                 url: "http://www.webservice.com/blahblah.asmx/blahb123",
                 data: "tnWsGuid=TEST1",
                 dataType: "text",
                 success: function(data, status, jqxhr) {
                     xmlString = data;
                     alert(xmlString);
                 },
                 error: function (request, status, error) {
                     alert(status);
                 }

                });
        }); 
```

警报显示是这样的：

```
<?xml version="1.0" encoding = "utf-8"?>
<string xmlns = "http://Walkthrough/XmlWebServices/">
{"approverName":"","emailAddress":"","companyName":"ABC","address":{"streetAddress1":"12 BlahBlah","streetAddress2":"","state":"ON","zipCode":"","country":"SO","phoneNumber":""},"tabledata:"[{"vendorPart":"AAAAA","partDescription":"N/A","price":"0.00","quantity":"28"},{"vendorPart":"BBBBBBB","partDescription":"N/A","price":"0.00","quantity":"3"},{"vendorPart":"CCCCCC","partDescription":"N/A","price":"0.00","quantity":"25"}]}
</string> 
```

我的数据类型现在是文本。但是我知道如何解析 JSON，现在我需要做的是以某种方式访问​​嵌入在 XML 信封中的 JSON 并将其转换为 JSON 对象，以便我可以使用 JQuery 来解析它。

这是我在 $.ajax 函数中尝试过的：

```
success: function(data, status, jqxhr) {
                     xmlString = data;
                     var jsondata = jQuery.parseJSON(xmlString.substr(xmlString.indexOf('{')));
                     alert(jsondata);
                 } 
```

但是返回了一个无效字符的错误，在 IE 调试器中[看起来像这样](http://i.stack.imgur.com/xNa3T.png)

知道如何访问 xml 信封内的数据并将其转换为 JSON 对象，以便将其解析为 JSON 吗？我没有能力更改网络服务，所以这一切都必须在网页内完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:49:54.690

由于您的呼叫返回 xml，您可以使用`dataType:"xml"`而不是“文本”。

然后您可以处理 xml 响应：

```
var jsonData=$.parseJSON(data.find("string").text()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:37:08.473

我认为您的子字符串正在为 JSON 数据添加结束标记。怎么样：

```
xmlString = $.parseXML(xmlString);
var jsondata = $.parseJSON($(xmlString).children('string').text()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:37:41.830

你可以这样做：

```
success: function(data, status, jqxhr) {
    var xml = $($.parseXML(data)), // Parse the XML String to a Document, and Wrap jQuery
        json = xml.find("string").text(), // Get the text of the XML
        jsonObj = $.parseJSON(json); // Parse the JSON String
} 
```

或者简写

```
var jsonObj = $.parseJSON($($.parseXML(data)).find("string").text()); 
```

现场小提琴：http: [//jsfiddle.net/59rQA/](http://jsfiddle.net/59rQA/)

# c# - 如何显示来自服务器端存储在内存中的图像？

> ID：16064219
> 
> 赞同：2
> 
> 时间：2013-04-17T15:32:04.117
> 
> 标签：c#, image-processing, asp.net-mvc-4

我将图像保存在服务器端文件夹中。服务器有图像的路径。客户端无法访问该文件夹，但服务器可以。我无法在 img 标签的 src 属性中附加 URL，因为浏览器将无法显示，因为客户端没有权限。

在这种情况下如何显示这些图像？我被告知服务器可以将图像保存在内存中，然后在客户端渲染这些图像 - 我该怎么做？我正在使用 MVC 4、c# 和 sql server 2008 r2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:34:37.673

您可以使用`File`采用路径和 mime 类型的重载。在您的控制器操作中：

```
// Sub the appropriate mime type for the image
return File(thePathFromTheDb, "image/jpg"); 
```

[http://msdn.microsoft.com/en-us/library/dd492492(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/dd492492(v=vs.108).aspx)

或者，如果您的图像数据来自数据库，则在您的控制器操作中：

```
byte[] bytes = GetImageBytesFromDatabase();  // Sub your code to get bytes
return File(bytes, "image/jpg"); // Sub the appropriate mime type for the image 
```

[http://msdn.microsoft.com/en-us/library/dd460208(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/dd460208(v=vs.108).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:35:49.783

如果将图像存储在文件夹中，则可以`File()`直接使用物理文件路径的方法：

```
public ActionResult Image(string id)
{
    var dir = Server.MapPath("/Images");
    var path = Path.Combine(dir, id + ".jpg");
    return base.File(path, "image/jpeg");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:35:46.523

您需要链接图像以指向控制器。然后，控制器需要将`FileResult`具有正确 mimetype 的 a 返回给浏览器。

顺序如下：

1.  浏览器请求页面
2.  带有反向链接的服务器返回页面（例如`<img src='/files/get/123.png'/>`）
3.  浏览器在反向链接中请求图像
4.  服务器从中读取图像~~磁盘~~DB 以返回类型响应控制器 ( `FilesController`) 操作调用 ( `Get`) 。请记住根据您的图像格式`FileResult`将 mime 类型设置为`image\png`or`gif`或。`jpeg`
5.  服务器将图像返回给浏览器

# asp.net - 每次图像调用的优化和最佳实践

> ID：16064220
> 
> 赞同：0
> 
> 时间：2013-04-17T15:32:06.643
> 
> 标签：asp.net, asp.net-mvc

我有大型项目的客户代码，他们的徽标在母版页上，他每周更新。

我必须在所有服务器上更新标题、图像路径等，并在所有服务器上上传新图像，现在他想自动化这个过程。

实现这一目标的最佳方法是什么？我曾考虑使用单条记录将信息（包括图像）存储在数据库中，并且每次客户端在需要时更新这条单条记录。但在每一页上，标志图像都来自数据库。可以吗，还是我们应该缓存或其他一些选项来减少每次的负载？我们可以像更新文本文件一样使用文件流更新页面（.aspx）文件吗？因为如果我从代码中更新 aspx，那么我们就没有调用任何 SQL，只需上传一张图片，更新 aspx 页面中的标题和其他信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:04:11.253

很简单。如果客户端想要自行更新某些内容而不需要开发人员干预，则需要进入数据库。您当然可以添加任何缓存或任何您喜欢的内容，这样就不必在每个请求中查询数据库。

唯一可行的替代方案是让客户端访问具有徽标的目录并坚持徽标文件名的约定。然后，客户可以简单地上传具有相同文件名的新徽标，并且无需在网站上进行任何更改。

自动更改页面本身是一个非常糟糕的主意。避免像瘟疫一样。

我想最后一个虽然不太可能的选择是让客户意识到一个标志不应该每周甚至每年更换一次。这是一个可怕的*标志*；这是您对公众的识别标记。

# vb.net - 获取十进制完整值

> ID：16064224
> 
> 赞同：0
> 
> 时间：2013-04-17T15:32:25.793
> 
> 标签：vb.net, decimal

我有这个数字：`79,228,162,514,264,337,593,543,950,335`
如果我将它转换为十进制并输出它，我会得到这个：`76.4200`

如何从小数中取回整数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:00:52.310

我不确定您是如何设法输出该数字的。你试过用双打吗？你能告诉我你把它转换成十进制的代码吗？

# css - CKeditor ContentsCSS 不总是加载

> ID：16064231
> 
> 赞同：2
> 
> 时间：2013-04-17T15:32:40.673
> 
> 标签：css, ckeditor

如果一直在互联网上寻找解决此问题的方法。对接错误也不总是发生。

我需要做的：我需要在 Ckeditor 视图中从另一个网站加载外部 css。我正在使用替换时的 ContentsCSS 配置功能来执行此操作。

有时我的 4 个样式表之一无法加载。作为记录，我没有看到任何错误..它只是不会加载。

这是我找到的唯一参考：http: [//ckeditor.com/forums/CKEditor-3.x/config.contentsCss-not-work-Firefox](http://ckeditor.com/forums/CKEditor-3.x/config.contentsCss-not-work-Firefox)

有谁知道这个的解决方案？

顺便说一句，据我所知，它只发生在 Firefox 中。

# multithreading - 正确协调两个进程之间的状态

> ID：16064240
> 
> 赞同：0
> 
> 时间：2013-04-17T15:32:54.957
> 
> 标签：multithreading, synchronization, mutex, interprocess

我有 2 个要同步的进程：

第一个进程（客户端）启动另一个进程（启动某些 WCF 服务的服务器应用程序），并等待它达到某个状态。

我希望客户端进程启动服务器，并阻塞直到所有服务启动。

为此，服务器初始化一个 Mutex 对象，并使用它向客户端发出它已完成的信号。

这种方法的问题是客户端不知道互斥锁**何时**真正完成设置互斥锁以及何时开始等待它。

是否有任何正式的算法/协议（暂时将编程语言放在一边）来协调此类任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:55:04.547

解决方案是在启动服务器之前直接在客户端设置*一个信号量*，并使用与最初计划相同的机制让其他进程知道它必须使用哪个同步对象。

在伪代码中，基本轮廓是这样的：

客户：

```
create semaphore with initial count at 0;
spawn server;
wait on semaphore; 
```

服务器：

```
process jobs;
release semaphore; 
```

对于任何一个进程，问题都解决了：因为信号量设置为0，`wait`所以客户端的done会阻塞，直到服务器`release`s它。

微软文档：

*   [信号量对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685129%28v=vs.85%29.aspx)
*   [创建信号量](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682438%28v=vs.85%29.aspx)
*   [释放信号量](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685071%28v=vs.85%29.aspx)

# ios - 从 NSObject 推送多个视图控制器

> ID：16064245
> 
> 赞同：0
> 
> 时间：2013-04-17T15:33:01.817
> 
> 标签：ios, uistoryboardsegue, navigationcontroller

我正在为一个问题而烦恼，我无法解决它！

场景是下一个： - 我有 4 个视图控制器（主视图控制器是 UITableView、settingsVC、messageDetailController 和 moreInfoVC）。- 我还有一个监听器（NSObject），它正在监听一个端口以接收不同的事件。

然后，功能是下一个： - 我启动侦听器来接收这些事件。当侦听器接收到新事件时，此侦听器与 mainViewController 通信，并从该 mainVC 创建 messageDetailController 的新实例。*我使用下面的代码（mainVC）：

```
[self performSegueWithIdentifier:@"MessageDetail" sender:self]; 
```

我得到了所有这些功能，但是当我的侦听器接收到多个事件时，我的问题就开始了，因此，我创建了多个 messageDetailController 引用。这个问题直接影响到我的 NavigationController，它会弹出下一条消息： - 嵌套推送动画可能导致导航栏损坏 - 对 . - 在意外状态下完成导航转换。导航栏子视图树可能会损坏。

我希望我能正确解释自己，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:17:20.983

你可能不想使用 segue 来做你想做的事情，因为 segue 总是会创建一个新的视图控制器。在代码中推送到 messageDetailController 会更好，这样您就可以在其中放置一个 if 子句，仅在控制器不存在时创建和推送控制器。当第二个事件出现时，您只想更改所显示内容的值。代码可能是这样的（我猜在主视图控制器中，如果这是从侦听器获取信息的原因）。

```
if (! messageDetailController) {
    MessageDetailController *messageDetailController = self.storyboard instantiateViewControllerWithIdentifier:@"MessageController"];
    messageDetailController.detailItem = infoFromListener;
    [self.navigationController pushViewController:messageDetailController animated:YES];
}else{
    messageDetailController.detailItem = infoFromListener;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:53:30.847

解决方案：

```
NSMutableArray *array = [NSMutableArray arrayWithArray::self.navigationController.viewControllers];

for(NSInteger i = ([array count] - 1); i > 0; i--)
    if(i != 0)
        [array removeObjectAtIndex:i];

self.navigationController.viewControllers = array;

[self performSegueWithIdentifier:@"MessageDetail" sender:[settingsReference actualView]]; 
```

# dns - 非静态 IP：警报更改的脚本

> ID：16064253
> 
> 赞同：0
> 
> 时间：2013-04-17T15:33:19.117
> 
> 标签：dns, ip

我家里有一台带有基本 DSL 的服务器。我注册了一个域名（在 GoDaddy）并且可以远程登录就好了。但是，这需要输入 IP 地址，而静态 IP 的成本会高得令人望而却步。我还没有找到好的动态服务。相反，我的 IP 地址似乎不会经常更改（可能每月一次），因此更新 GoDaddy 域信息对我来说同样容易。但是，我希望在发生此更改时收到来自我的服务器的警报。这是我为此编写的脚本：

```
#!/bin/bash

oldipinfo=""

while [ 1 ]
do
  sleep 3600
  ipinfo=`lynx -dump checkip.dyndns.org`
  if [ ipinfo != oldipinfo ]
  then
    echo "New IP for server $(ipinfo)" | mail -s "NEW IP!" myaddress@gmail.com
    echo $ipinfo >> ipinfo.out
    oldipinfo=ipinfo
  fi
done 
```

这实际上每小时给我发电子邮件（并更新文件），所以我做错了什么？

谢谢你的帮助！

合资企业

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:35:20.037

您永远不会从缓存它的文件中读取 oldipinfo，因此您的脚本始终`oldipinfo`设置为空字符串，这意味着`"" != x.x.x.x`它将始终为真。

你应该有

```
oldipinfo=`cat ipinfo.txt` 
```

# spring - 如何使用spring @requestparam/@requestbody注解以json格式发布多个参数

> ID：16064254
> 
> 赞同：0
> 
> 时间：2013-04-17T15:33:21.457
> 
> 标签：spring, mongodb, spring-data

我想上传一个带有它的图像的项目对象是否有可能我从我的控制器传递我的项目的完整对象以及它的图像如果是，那么我该怎么做？我还需要一个来自客户端的 Json 模式。

我的以下项目对象的 Json 模式是什么。

```
Class Item{

String ItemID;
String ItemName;
String CategoryID;
List<Image> imagesList;

}

Class Image{

String imageId;
String imageTitle;
byte[] image;
} 
```

还有一件事情。请告诉我如何在我的控制器中传递两个参数。例如，如果我想在请求正文中传递 Item 对象以及一个额外的参数，比如 String UserID。我该如何编写以下代码。

```
@RequestMapping(method = RequestMethod.POST)
@ResponseStatus(HttpStatus.CREATED)
public void add(@RequestBody Item myItem, String UserID) 

{ ...... } 
```

如果我以 Json 格式传递请求，请告诉我怎么办。它会是什么样子？

```
{ "Item" : { "ItemID": "1", ......}, "UserID" : "hello"} 
```

会是这样还是什么？因为我试过了，所以我将对象和字符串设为 Null。我也用@RequestParam 尝试过，但在调试时同样得到了 NULL。

目前我正在处理这个。

```
Class ItemUserPost{
    Item item;
    String UserID;
} 
```

我将此对象存储在 MongoDB 中。我的整个项目集合会与图像一起存储吗？或者我必须为此使用 MultiPart 和 GridFS API。如果相关问题已经发布，请参考。

请帮助紧急。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T19:00:56.270

请求正文只是一个正文。您不能在同一个正文中传递多个对象或参数。

有 2 次失误：

1.  如果您使用的是 REST，则可以设置 UserID`@RequestMapping(value = "{userId}")`并从 URL 中获取。或者，您可以简单地将 UserId 作为查询参数放在您的 url 上。

2.  继续使用你的`ItemUserPost`对象。

--

对于第二个问题：

是的，它将与图像一起存储您的收藏。

# java - 打印出多个数组项的单个计数值

> ID：16064258
> 
> 赞同：0
> 
> 时间：2013-04-17T15:33:26.507
> 
> 标签：java, arrays, for-loop, counter

我有一个非常快速的问题，我猜只是盯着我看，但我看不到它。我必须计算某个名称在数组中出现的次数。我使用循环来做到这一点，因为我不允许使用类、hashmap 等。所以我有 93 个名称，例如 Jake 出现 5 次，我希望输出为：

```
 Jack - 5 
```

相反，我的程序显示

```
 Jack - 5
       Jack - 5
       Jack - 5
       Jack - 5
       Jack - 5 
```

我只希望它打印一次，这是我的循环：

```
for (int counter = 0; counter < name.length; counter++)
    {
        String n = (name[counter]);
        int count = 0;
        for (int i = 0; i < name.length; i++){
            if (name[i].equals(n))
                count++;
        }

        System.out.println(n + " - " + count);
    } 
```

理想的输出应该是：

```
 Jack - 5 
```

我需要打印星号作为输出，所以我想说

```
 Jack (5) ***** 
```

每个星号代表一个事件，我知道如何打印它们，我已经把它放在我的代码中，但它显示

```
 ***** Jack(5) 
```

我想知道我该如何解决这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:45:31.430

您正在循环浏览列表中的每个名称并每次都检查它。因此，您检查名称 Jack 5 次，因此您得到 5 个输出。

至于由于某种原因您不允许使用 HashMaps，这应该可以解决它：

```
String name[] = new String[]{"jack", "jack", "jack", "james", "jack", "jack", "james"};
ArrayList<String> checkedNames = new ArrayList<String>();

for (int counter = 0; counter < name.length; counter++)
{
    String n = (name[counter]);
    if(!checkedNames.contains(n))
    {
        int count = 0;
        for (int i = 0; i < name.length; i++){
            if (name[i].equals(n))
                count++;
        }
        checkedNames.add(n);
        System.out.println(n + " - " + count);
    }

} 
```

**编辑**：因为您不能使用 ArrayLists 但可以对数组进行排序：

```
 String name[] = new String[]{"jack", "jack", "jack", "jack", "jack", "james"};
    String lastName = "";

    Arrays.sort(name);

    for (int counter = 0; counter < name.length; counter++)
    {
        String n = (name[counter]);

        if(!lastName.equals(n))
        {
            int count = 0;
            for (int i = 0; i < name.length; i++){
                if (name[i].equals(n))
                    count++;
            }

            System.out.println(n + " - " + count);
        }
        lastName = n;
    } 
```

**第二次编辑**：

首先，Arrays 是 Java 内置的一个类，就像 String 一样：

[http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html) [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String .html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)

其次，如果您希望它打印星号，则将 System.out.println 行更改为：

```
System.out.println(n + " (" + count + ")" + new String(new char[count]).replace("\0", "*")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:48:45.717

你会尝试有一个不同的数组（比如说`encouteredNames`）来存储那些你已经计算过出现次数的名字吗？然后仅当您确定要搜索的名称以前没有搜索过（或者它仍然没有存储在`encounteredNames`数组中）时才执行“计数”循环。

我确信有比这更好的实现，但与此同时：

```
String[] names = {"Jack", "James", "Charles", "Jack", "Jack", "James"};
String[] encounteredNames = new String[names.length];
int encounteredNamesCount = 0;
for (int counter = 0; counter < names.length; counter++) {
  String name = (names[counter]);
  boolean nameAlreadyEncountered = false;
  for (int i = 0; i < encounteredNames.length && encounteredNames[i] != null; i++) {
    if (encounteredNames[i] == name) {
      nameAlreadyEncountered = true;
      break;
    }
  }
  if (!nameAlreadyEncountered) {
    encounteredNames[encounteredNamesCount++] = name;
    int count = 0;
    for (int i = 0; i < names.length; i++){
      if (names[i].equals(name)) {
        count++;
      }
    }
    System.out.println(name + " - " + count);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:08:09.730

请检查下一个代码：

```
for (int counter = 0; counter < name.length; counter++)
    {
        String n = (name[counter]);
        int count = 0;
        boolean flag = true;
        for (int i = 0; i < counter; i++){
            if (name[i].equals(n)) {
               flag = false;
            }
        }
        if (flag) {
           for (int i = 0; i < name.length; i++){
               if (name[i].equals(n))
                   count++;
           }

           System.out.println(n + " - " + count);
        }
    } 
```

在这里，您检查了所选名称是否尚未在数组中（从 0 到计数器），而不是您计算它在数组中保留的次数并显示信息。

# c# - DataTemplate 通过转换器绑定网格背景

> ID：16064259
> 
> 赞同：2
> 
> 时间：2013-04-17T15:33:32.703
> 
> 标签：c#, wpf, xaml, data-binding, converter

一段时间以来，我遇到了一个数据绑定问题，该数据绑定会改变网格的颜色，但不知何故它不起作用。我在转换器中设置了一个断点，应用程序点击了它，但网格的背景颜色仍然没有改变，并且它保持不变，因为没有定义背景颜色......

这是我的代码：

```
<ListView ItemsSource="{Binding ResultsUserControls}"
          Background="{x:Null}"
          BorderBrush="{x:Null}">
  <ListView.ItemTemplate>
    <DataTemplate>
      <Grid Width="200"
            Height="70"
            Background="{Binding CurrentResult,Converter={StaticResource crawlerTypeToResultColorConverter}}">
        <Label Content="{Binding .CurrentResult.SourceUrl}" />
      </Grid>
    </DataTemplate>
  </ListView.ItemTemplate>
</ListView> 
```

和转换器：

```
 public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return Brushes.Red;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return Binding.DoNothing;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:20:45.227

我认为这应该是

```
public object Convert(object value, Type targetType, object parameter, 
                      System.Globalization.CultureInfo culture)
{
    return new SolidColorBrush(Colors.Red);
}

public object ConvertBack(object value, Type targetType, object parameter, 
                          System.Globalization.CultureInfo culture)
{
    return Binding.DoNothing;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:45:51.293

我已经修改了你的代码，你所拥有的应该可以工作。作为一个实验，从背景绑定中删除 CurrentResult：

```
<Grid Width="200" Height="70" Background="{Binding Converter={StaticResource crawlerTypeToResultColorConverter}}"> 
```

我怀疑你现在会看到你的红色背景。我注意到，如果 XAML 解析器找不到您要绑定的属性（因为它拼写错误或根本不存在），它将不会进行转换。我猜想 XAML 解析器无法在您的项目上找到 CurrentResult。

# c++ - 如何在其他类中创建一个模板类？

> ID：16064261
> 
> 赞同：0
> 
> 时间：2013-04-17T15:33:56.383
> 
> 标签：c++, templates

我有一些模板：

```
template <Class T>
class CsHashCase{

   CsHashCase();
   ~CsHashCase();
   ...
};

template <class T> CsHashCase<T>::CsHashCase()
{
   ...
}

template <class T> CsHashCase<T>::~CsHashCase()
{
   ...
} 
```

在某些类中，我需要创建此模板的类：

```
#include "TmHashCase.h"

class CsSomeClass{

   CsHashCase<int> * GbHashCase;

   CsSomeClass();  // Constructor

};

// Constructor
CsSomeClass::CsSomeClass()
{
   GbHashCase = new CsHashCase<int>; 
} 
```

但是编译器向我显示了一个错误：

```
undefined reference to `CsHashCase<int>::CsHashCase()
undefined reference to `CsHashCase<int>::CsHashCase() 
```

怎么做才对？

# java - 如何摆脱 /tmp/.java_pid Linux中的文件？

> ID：16064265
> 
> 赞同：4
> 
> 时间：2013-04-17T15:34:04.503
> 
> 标签：java, linux

我注意到我的 Linux 机器中有很多文件`/tmp/.java_pid<...>`。该`file`命令说它们是套接字。假设它们是由 Java 创建的，我想知道为什么 Java 不清理它们。如何让 Java 清理它们或不创建它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T15:48:13.343

这些文件由 JVM 创建以支持调试。它是[`attach`](http://www.docjar.com/html/api/sun/tools/attach/LinuxVirtualMachine.java.html)api 的一部分。

如果您不希望 java 创建它们，请在不启用调试的情况下启动 java 应用程序。

如果没有具有相应 pid 的 jvm，您可以安全地删除它们……这是一个非常适合 cron 作业的任务。

一点点bash：

```
for file in /tmp/.java-[0-9]*; do
  [ -d /proc/${file#*.java-} ] || rm -f $file
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:40:34.720

pid 文件通常是应用程序存储其进程 ID 的位置，因此用户可以在之后轻松地终止进程。这些应用程序应在关闭时删除这些文件。

我不会太担心这些文件，除非您看到越来越多的文件并且它们没有被删除，那么这可能是一个迹象表明您的应用程序没有正确关闭，

# powershell - Powershell从文件名中删除时间戳

> ID：16064268
> 
> 赞同：0
> 
> 时间：2013-04-17T15:34:10.817
> 
> 标签：powershell

如果我有一些名为 pippo_yyyymmdd.txt、pluto_yyyymmdd.txt 等的文件，如何删除时间戳并将文件重命名为 pippo.txt、pluto.txt？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:41:29.327

试一试，它将删除任何下划线后跟 8 位数字。这是 tha basicmidea，它不会处理最终具有相同名称的文件：

```
Get-ChildItem *.txt | 
Where {$_.Name -match '_\d{8}\.txt' } | 
Rename-Item -NewName {$_.Name -replace '_\d{8}'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-04T16:34:31.477

我遇到了同样的问题，但不幸的是，PowerShell 没有帮助我解决它。所以我然后求助于使用 Python 来解决这个问题，它就像炸弹一样工作。您只需要将 python 脚本复制到受影响的文件夹中并运行脚本即可从文件夹和子文件夹中的所有文件中删除时间戳。

```
import os, sys, re

fileNameList =[]
patho = os.path.dirname(os.path.realpath(sys.argv[0])) 

def renamer(fpath):
    for path, subdirs, files in os.walk(fpath):
        for name in files:
            if re.findall(r"(?ix)(\.ini)", name, re.I) == None:
                if re.search(r"(?ix)(\(\d{4}\_\d{2}_\d{2}\s\d{2}\_\d{2}\_\d{2}\sutc\))", name, re.I) != None:
                    old_name = os.path.join(path,name)
                    print(old_name)
                    new_name = re.sub(r"(?ix)(\s\(\d{4}\_\d{2}_\d{2}\s\d{2}\_\d{2}\_\d{2}\sutc\))", "", old_name, re.I)
                    print(new_name)
                    try:
                        os.replace(old_name,new_name)
                    except:
                        print(old_name)
                        fileNameList.append(old_name)

def log_errors_directories(fileNameList):
    filename = "Log of error filenames.txt"
    if len(fileNameList) != 0:
        log = open(filename, "a")
        log.write("###########################################################\n")
        i = 1
        for line in fileNameList:
            nr_line = str(i) + "  " + str(line)
            log.write(str(nr_line))
            log.write("\n")
            i += 1
        log.write("###########################################################\n\n")
        log.close()

renamer(patho)
log_errors_directories(fileNameList) 
```

这是我第一次在网上发布代码。我希望它对你有用，就像对我一样。:)

# android - Android 懒惰图像 ViewFlipper

> ID：16064269
> 
> 赞同：0
> 
> 时间：2013-04-17T15:34:14.367
> 
> 标签：android, imageview, lazy-loading, viewflipper

我有个问题。

我有 ViewFlipper 的片段和一些字符串数据数组（图像 url）。

如何对这些图像进行延迟加载并显示进度条，直到图像被加载（并尽可能缓存它们）？我可以使用不同的视图（不是 ViewFlipper）吗？

第二个问题。如何使视图显示当前图像位置？比如当前图片下的一系列白点带一个黑色。如果当前图像的第一个- 第一个黑点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:55:07.290

谷歌有一个培训班[在这里](https://developer.android.com/training/displaying-bitmaps/index.html)回答你的第一个问题。它向您展示了如何使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)在后台加载位图，并使用 LruCache将其缓存在内存中和使用[DiskLruCache](http://developer.android.com/reference/android/util/LruCache.html)（包含在链接中的 BitmapFun.zip 下载中）同时显示[ProgressBar](https://developer.android.com/reference/android/widget/ProgressBar.html)直到图像已下载

> 我可以使用不同的视图（不是 ViewFlipper）吗？

上述示例使用 ViewPager。

> 当前图片下方带有黑色的一系列白点。

我不知道 Android SDK 是否有这样的视图，但是[这个](https://github.com/JakeWharton/Android-ViewPagerIndicator)第三方小部件（Apache 2.0 许可证）似乎可以满足您的需求。

> 我如何在 ImageView 和 ProgressBar 上保持链接？

我不确定我是否理解这个问题，但如果您问如何从 ProgressBar（图像正在加载时）转到 ImageView，那么答案是使用 FrameLayout，其中包含 ProgressBar 和 ImageView：

```
<FrameLayout ...>
  <ProgressBar ... />
  <ImageView 
    android:id="@+id/imageView"
    ... />

</FrameLayout> 
```

（有关更多详细信息，请参阅练习中的 image_detail_fragment.xml）

ImageView 将被绘制在 ProgressBar 的前面，但由于它最初没有背景，也没有图像，因此它将是透明的，并且 ProgressBar 将显示。

然后，您使用它的 id 从您的代码中检索 ImageView，当您将图像加载到您使用的位图中时：

```
imageView.setImageDrawable(loadedImage); 
```

现在 ImageView 有一个图像，它将不再是透明的，ProgressBar 也不会显示（如果您想将其设置为 View.GONE 以优化您的布局，您也可以在进度条中添加一个 id）。

# ios - 为什么此方法中没有设置属性？

> ID：16064273
> 
> 赞同：0
> 
> 时间：2013-04-17T15:34:26.590
> 
> 标签：ios

这是我的方法

```
- (void)populateLocationsToSort {

    //1\. Get UserLocation based on mapview
    self.userLocation = [[CLLocation alloc] initWithLatitude:self._mapView.userLocation.coordinate.latitude longitude:self._mapView.userLocation.coordinate.longitude];

    //Set self.annotationsToSort so any new values get written onto a clean array
    self.myLocationsToSort = nil;

    // Loop thru dictionary-->Create allocations --> But dont plot
    for (Holiday * holidayObject in self.farSiman) {
        // 3\. Unload objects values into locals
        NSString * latitude = holidayObject.latitude;
        NSString * longitude = holidayObject.longitude;
        NSString * storeDescription = holidayObject.name;
        NSString * address = holidayObject.address;

        // 4\. Create MyLocation object based on locals gotten from Custom Object
        CLLocationCoordinate2D coordinate;
        coordinate.latitude = latitude.doubleValue;
        coordinate.longitude = longitude.doubleValue;
        MyLocation *annotation = [[MyLocation alloc] initWithName:storeDescription address:address coordinate:coordinate distance:0];

        // 5\. Calculate distance between locations & uL
        CLLocation *pinLocation = [[CLLocation alloc] initWithLatitude:annotation.coordinate.latitude longitude:annotation.coordinate.longitude];
        CLLocationDistance calculatedDistance = [pinLocation distanceFromLocation:self.userLocation];
        annotation.distance = calculatedDistance/1000;

        //Add annotation to local NSMArray
        [self.myLocationsToSort addObject:annotation];
        **NSLog(@"self.myLocationsToSort in someEarlyMethod is %@",self.myLocationsToSort);**
    }

    //2\. Set appDelegate userLocation
    AppDelegate *myDelegate = [[UIApplication sharedApplication] delegate];
    myDelegate.userLocation = self.userLocation;

    //3\. Set appDelegate mylocations
    myDelegate.annotationsToSort = self.myLocationsToSort;    
} 
```

在粗线中，self.myLocationsToSort 已经为空。我认为将值设置为 nil 基本上是清除它，准备好重新使用了吗？我需要这样做，因为此方法在启动时调用一次，在从网络获取数据时收到 NSNotification 后第二次调用。如果我再次从 NSNotification 选择器调用此方法，新的 Web 数据将被写入旧数据之上，并吐出不一致的值:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:39:12.403

将其设置为`nil`删除对该对象的引用。如果您正在使用 ARC 并且它是对该`strong`对象的最后引用，则系统会自动释放该对象并释放其内存。无论哪种情况，它都不会“将其清除并准备好重新使用”，您需要重新分配和初始化您的对象。如果您只想删除所有对象，并假设`myLocationsToSort`是一个，`NSMutableArray`您可以调用

```
[self.myLocationsToSort removeAllObjects]; 
```

否则你需要做

```
self.myLocationsToSort = nil;
self.myLocationsToSort = [[NSMutableArray alloc] init]; 
```

# c# - 允许跨应用程序复制/粘贴 XamDataGrid

> ID：16064276
> 
> 赞同：2
> 
> 时间：2013-04-17T15:34:34.387
> 
> 标签：c#, wpf, styles, xamdatagrid

我正在开发一个具有许多 infrgistics XamDataGrids 的应用程序。我想至少为它们提供复制到剪贴板的功能。这可以在每个网格的 XAML 中轻松实现，其中：

```
<igDP:XamDataGrid DataSource="{Binding}" >
    <igDP:XamDataGrid.FieldLayoutSettings>
        <igDP:FieldLayoutSettings AllowClipboardOperations="Copy"/>
    </igDP:XamDataGrid.FieldLayoutSettings>
</igDP:XamDataGrid> 
```

但是，我希望应用程序中的所有 XamDataGrids 都允许此复制到剪贴板功能。我认为样式将是答案，但由于某种原因，这不起作用：

```
<Style TargetType="{x:Type igDP:FieldLayoutSettings}">            
    <Setter Property="AllowClipboardOperations" Value="Copy" />
</Style> 
```

我在上面尝试了很多变体，但似乎没有任何效果，也没有错误消息。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-22T12:49:08.793

这是未经测试的，但也许您需要以下完全限定名称：（包括**XamDataGrid。**）

```
<Style TargetType="{x:Type igDP:XamDataGrid.FieldLayoutSettings}"> 
    <Setter Property="AllowClipboardOperations" Value="Copy" />
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-11T14:53:49.567

这个问题很老，但我刚刚遇到它。

无论如何，您的样式的 TargetType 将是 XamDataGrid。您正在设置的属性是 FieldLayoutSettings。

```
<Style TargetType="{x:Type igDp:XamDataGrid}">
    <Setter Property="FieldLayoutSettings">
        <Setter.Value>
            <igDp:FieldLayoutSettings AllowClipboardOperations="Copy"/>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:18:43.720

此样式是否定义在每个 XamDataGrid 都可以继承的位置（如 App.xaml）中？

您是否尝试在与可能使用它的 XamDataGrid 相同的 XAML 文件中定义此样式？我会首先看看你是否可以在一个特定的地方将这项工作作为一种本地风格。

# git - 在 Windows 上签出 HEAD（和变体）时出现奇怪的 Git 行为

> ID：16064279
> 
> 赞同：4
> 
> 时间：2013-04-17T15:34:42.573
> 
> 标签：git, git-checkout, git-reflog

## 设置

让我们想象一个简单的存储库，如下所示。可以看到`HEAD`指向`master`

```
$ git log --decorate --graph
* commit 99d20608088ba9c74b57e36a1b0b79ff2be42d68 (HEAD, master)
| Author: Saaman <user@domain.com>
| Date:   Wed Apr 17 16:53:50 2013 +0200
|
|     My third commit
|
* commit a4a040c8b5c3923a2ba0f652caae0540f84c4c98
| Author: Saaman <user@domain.com>
| Date:   Wed Apr 17 16:53:27 2013 +0200
|
|     My second commit
|
* commit c5d20f203c11acbb9238ab77581e27a15ccde25e
  Author: Saaman <user@domain.com>
  Date:   Wed Apr 17 16:52:58 2013 +0200

      My first commit

$ git reflog
99d2060 HEAD@{0}: commit: My third commit
a4a040c HEAD@{1}: commit: My second commit
c5d20f2 HEAD@{2}: commit (initial): My first commit 
```

## 行为

现在，让我们执行一些结帐操作

```
$ git checkout master
Already on 'master'

$ git reflog
99d2060 HEAD@{0}: checkout: moving from master to master
99d2060 HEAD@{1}: commit: My third commit
a4a040c HEAD@{2}: commit: My second commit
c5d20f2 HEAD@{3}: commit (initial): My first commit

$ git checkout HEAD

$ git reflog
99d2060 HEAD@{0}: checkout: moving from master to master
99d2060 HEAD@{1}: commit: My third commit
a4a040c HEAD@{2}: commit: My second commit
c5d20f2 HEAD@{3}: commit (initial): My first commit 
```

reflog 表明

*   签出`HEAD`不会在 reflog 中产生任何条目
*   签出`master`会在 reflog 中插入一个新条目（说明`HEAD`从 移动`master`到`master`）

让我们试试别的

```
$ git checkout head
Note: checking out 'head'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b new_branch_name

HEAD is now at 99d2060... My third commit

$ git reflog
99d2060 HEAD@{0}: checkout: moving from master to head
99d2060 HEAD@{1}: checkout: moving from master to master
99d2060 HEAD@{2}: commit: My third commit
a4a040c HEAD@{3}: commit: My second commit
c5d20f2 HEAD@{4}: commit (initial): My first commit 
```

reflog 现在显示

*   `head`已解析为相同的 SHA 99d2060
*   `HEAD`现在已分离
*   一个新条目已插入到 reflog 中（说明`HEAD`从 移动`master`到`head`）

## 问题

我很难理解这些行为。

*   为什么签出`HEAD`不会在 reflog 中产生任何内容，而签出`master`（指向 by 的分支`HEAD`）会产生？
*   为什么签出`head`（小写）会分离，`HEAD`而 git 可以成功地将其剥离到同一个提交？

**注意：**这些测试是在 Windows/msysgit 上进行的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:18:55.383

分析代码后，这里有一些答案：

*   `git checkout HEAD`无论 HEAD 是否分离，都不会记录任何内容。
*   从“master”移动到“master”并不是一个真正有用的信息，因为分支和它的目标都没有改变。填写日志的一些无用信息，但非常无害。
*   `git checkout head`在 Linux 上不起作用。它仅适用于 Windows，因为文件系统不区分大小写。

# xamarin.ios - 使用 TeeChart Mobile iOS 显示工具提示

> ID：16064281
> 
> 赞同：0
> 
> 时间：2013-04-17T15:34:52.010
> 
> 标签：xamarin.ios, teechart

当有人触摸我的图表中的一个点时，我想显示一个工具提示。我尝试了 SeriesHotspot、Annotations 和 Marks，但没有成功。

有没有办法在 TeeChart Mobile 上实现这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:53:06.403

MarksTip Tool 仍然不适用于可用版本，但我们将考虑将其添加到下一个版本或维护版本中。与此同时，我能想到的唯一方法是利用 Click_Series 事件，并在那里工作。由于您拥有所有必要的信息，一旦用户点击系列点，您应该能够将信息显示到屏幕上。代码应如下所示：

为系列添加事件：

```
 _controller.chart.ClickSeries += new Steema.TeeChart.TChart.SeriesEventHandler(series_clicked); 
```

这里调用的方法：

```
 private void series_clicked(object sender, Steema.TeeChart.Styles.Series s, int valueIndex, UIGestureRecognizer e) 
    {
        //Console.WriteLine("Series clicked");
        _controller.chart.Tools.Clear();
        _controller.chart.Tools.Add(new Steema.TeeChart.Tools.Annotation());
        int i = _controller.chart.Tools.Count-1;
        (_controller.chart.Tools[i] as Steema.TeeChart.Tools.Annotation).Text = _controller.chart.Series[0].YValues[valueIndex].ToString();
        (_controller.chart.Tools[i] as Steema.TeeChart.Tools.Annotation).Top = 50;
        (_controller.chart.Tools[i] as Steema.TeeChart.Tools.Annotation).Left = 50;
        (_controller.chart.Tools[i] as Steema.TeeChart.Tools.Annotation).Shape.Font.Size = 20;  
        (_controller.chart.Tools[i] as Steema.TeeChart.Tools.Annotation).Shape.Font.Color = UIColor.Red.CGColor;    
        (_controller.chart.Tools[i] as Steema.TeeChart.Tools.Annotation).Shape.Transparent = true;  
    } 
```

希望它有所帮助。

问候 ！佩普

# nginx - Nginx：fastcgi-proxy 什么时候触发？在请求标头或请求正文加载之后？

> ID：16064282
> 
> 赞同：1
> 
> 时间：2013-04-17T15:34:54.440
> 
> 标签：nginx, timeout, request, php

当前面有 nginx 作为网络服务器时，PHP 设置 max_input_time 是否相关？

**整个故事：**

以访问者正在上传文件为例。nginx 网络服务器，监听 80 端口，将首先获取请求。

Nginx 本身有一个 client_header_timeout 设置，这不应该是相关的，因为文件上传是在请求正文中处理的。client_body_timeout 是最大时间量，客户端可以发送这个请求体，包含文件和其他一些 POST 数据。这个数据的大小可以通过client_max_body_size来限制，对吧？

PHP 现在等待数据。此时间受 max_input_time 限制。当它拥有所有数据时，它会检查请求主体是否超过其 post_max_size 限制，对其进行解析并检查文件是否超过 upload_max_filesize 限制。现在将执行 php 脚本，其时间不应超过 max_execution_time。

但是我的 fastcgi-proxy 什么时候加载？是在加载请求标头之后，在加载请求主体之后还是何时触发？

或者......换一种方式提出这个问题：当我使用 PHP-FPM 运行 PHP 并由 nginx 网络服务器支持时，PHP 配置 max_input_time 是否相关？当访问者带宽不好但想上传大文件时，我是否必须增加这个值，或者增加client_body_timeout的nginx设置是否足够？

如果假设不正确，请纠正我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:32:55.453

只是给出一个答案，这对我来说很方便：

我尝试上传一个 18MB 的文件，我在 50 秒内得到了它。fastcgi-proxy 被限制为 10 秒。所以，对我来说，似乎 nginx 在将整个请求发送到 fastcgi-proxy 之前缓存了整个请求。

所以，简而言之：不。在我的情况下，我不需要超过 max_input_time。

这可能因配置而异。最好有人知道代码并知道这取决于哪些选项。

在 IRC 上，没有人能真正告诉我，当 nginx 将数据发送到 fastcgi-proxy 时......

**编辑：**

只是想添加另一个资源，这证实了我的建议：

> 不幸的是，PHP 仅在上传完成后才获取数据，并且 [...]

请参阅[会话上传进度是否适用于 nginx 和 php-fpm？](https://stackoverflow.com/questions/12502775/does-session-upload-progress-work-with-nginx-and-php-fpm)

# c# - 线程执行顺序

> ID：16064286
> 
> 赞同：2
> 
> 时间：2013-04-17T15:35:15.277
> 
> 标签：c#, .net, multithreading

我有[以下 C# 代码](http://msdn.microsoft.com/it-it/library/system.threading.thread.aspx)：

```
using System;
using System.Threading;

// Simple threading scenario:  Start a static method running
// on a second thread.
public class ThreadExample {
    // The ThreadProc method is called when the thread starts.
    // It loops ten times, writing to the console and yielding 
    // the rest of its time slice each time, and then ends.
    public static void ThreadProc() {
        for (int i = 0; i < 10; i++) {
            Console.WriteLine("ThreadProc: {0}", i);
            // Yield the rest of the time slice.
            Thread.Sleep(0);
        }
    }

    public static void Main() {
        Console.WriteLine("Main thread: Start a second thread.");
        // The constructor for the Thread class requires a ThreadStart 
        // delegate that represents the method to be executed on the 
        // thread.  C# simplifies the creation of this delegate.
        Thread t = new Thread(new ThreadStart(ThreadProc));

        // Start ThreadProc.  Note that on a uniprocessor, the new 
        // thread does not get any processor time until the main thread 
        // is preempted or yields.  Uncomment the Thread.Sleep that 
        // follows t.Start() to see the difference.
        t.Start();
        //Thread.Sleep(0);

        for (int i = 0; i < 4; i++) {
            Console.WriteLine("Main thread: Do some work.");
            Thread.Sleep(0);
        }

        Console.WriteLine("Main thread: Call Join(), to wait until ThreadProc ends.");
        t.Join();
        Console.WriteLine("Main thread: ThreadProc.Join has returned.  Press Enter to end program.");
        Console.ReadLine();
    }
} 
```

读大学已经很久了，我唯一记得的就是：

> 线程执行是非常不可预测的，并且可能会因底层操作系统而异。

**所以真正的问题是：为什么我连第一次**执行 ThreadProc都不能确定？当我执行时会发生什么`t.Start()`？为什么每次执行`ThreadProc: 0`后不立即打印？`Main thread: Start a second thread`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T15:41:24.960

> 为什么我什至不能确定第一次执行 ThreadProc？

因为这不是 .NET 和`Windows`操作系统文档都不确定的（我想您使用的是 Windows）

> 当我执行 t.Start() 时会发生什么？

线程将由操作系统调度执行。[MSDN](http://msdn.microsoft.com/en-gb/library/system.threading.thread.start.aspx)：“导致线程被安排执行。”

> 为什么 ThreadProc: 0 在 Main thread: 每次执行时启动第二个线程后没有立即打印？

`Thread.Start()`因为调用和实际线程启动之间有一些延迟

# optimization - 用于矩阵/向量运算的 GCC 优化标志

> ID：16064288
> 
> 赞同：6
> 
> 时间：2013-04-17T15:35:18.773
> 
> 标签：optimization, gcc, matrix, linear-algebra, compiler-flags

我正在使用 C 执行矩阵运算。我想知道各种编译器优化标志是什么，以提高双精度和 int64 数据的这些矩阵运算的执行速度 - 例如乘法、逆运算等。我不是在寻找手动优化的代码，我只是想使用编译器标志使本机代码更快，并了解有关这些标志的更多信息。

到目前为止我发现的改进矩阵代码的标志。

```
-O3/O4
-funroll-loops
-ffast-math 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-17T20:41:03.097

首先，我不推荐使用`-ffast-math`，原因如下：

1.  事实证明，在大多数（如果不是全部）情况下使用此选项时性能实际上**会降低。**所以*“快速数学”*实际上并没有那么快。

2.  此选项违反了对浮点运算的严格 IEEE 合规性，最终导致不可预测性质的计算错误的累积。

3.  在不同的环境中，您很可能会得到不同的结果，并且差异可能很大。术语环境（在这种情况下）意味着以下组合：硬件、操作系统、编译器。这意味着当您获得意想不到的结果时，情况的多样性呈指数级增长。

4.  另一个可悲的结果是，链接到使用此选项构建的库的程序可能期望正确的（符合 IEEE 的）浮点数学，这就是他们的期望中断的地方，但很难弄清楚原因。

5.  最后，看看[这篇文章](http://programerror.com/2009/09/when-gccs-ffast-math-isnt/)。

出于同样的原因，您应该避免`-Ofast`（因为它包括 evil `-ffast-math`）。提炼：

> `-Ofast`
> 
> 无视严格的标准合规性。`-Ofast`启用所有`-O3`优化。它还支持并非对所有符合标准的程序都有效的优化。它打开`-ffast-math`和特定于 Fortran 的`-fno-protect-parens`和`-fstack-arrays`.

没有这样的标志`-O4`。至少我不知道那个，在官方的 GCC 文档中也没有它的踪迹。所以这方面的最大值是`-O3`，你绝对应该使用它，不仅是为了优化数学，而且是在一般的发布版本中。

`-funroll-loops`对于数学例程来说是一个非常好的选择，尤其是涉及到向量/矩阵运算，其中循环的大小可以在编译时推断（并因此由编译器展开）。

我可以再推荐 2 个标志：`-march=native`和`-mfpmath=sse`. 与 类似`-O3`，`-march=native`通常适用于任何软件的发布版本，而不仅仅是数学密集型。`-mfpmath=sse`允许在浮点指令中使用 XMM 寄存器（而不是[x87 模式](http://en.wikipedia.org/wiki/X87)中的堆栈）。

此外，我想说的是，很遗憾您不想修改代码以获得更好的性能，因为这是向量/矩阵例程加速的主要来源。由于[SIMD](http://en.wikipedia.org/wiki/SIMD)、[SSE Intrinsics](http://sci.tuomastonteri.fi/programming/sse)和[Vectorization](http://en.wikipedia.org/wiki/Vectorization_%28parallel_computing%29)，重线性代数代码可以比没有它们快几个数量级。然而，正确应用这些技术需要深入了解它们的内部结构，并且需要相当多的时间/精力来修改（实际上是重写）代码。

不过，有一个选项可能适合您的情况。GCC 提供了可以通过 启用的[自动矢量化](http://gcc.gnu.org/projects/tree-ssa/vectorization.html)，但由于您正在使用它（因为它已经包含） `-ftree-vectorize`，所以它是不必要的。关键是您仍然应该帮助 GCC 了解哪些代码可以自动矢量化。修改通常很小（如果需要的话），但你必须让自己熟悉它们。因此，请参阅上面链接中的**Vectorizable Loops**部分。`-O3``-ftree-vectorize`

 **最后，我建议您研究[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)，这是一个基于 C++ 模板的库，它可以高效地实现大多数常见的线性代数例程。它以一种非常聪明的方式利用了到目前为止这里提到的所有技术。该界面纯粹是面向对象的，整洁且易于使用。面向对象的方法看起来与线性代数非常相关，因为它通常处理诸如矩阵、向量、四元数、旋转、过滤器等纯对象。因此，在使用 Eigen 编程时，您不必自己处理这些低级概念（如 SSE、矢量化等），而只需享受解决您的特定问题的乐趣。**

# android - 如何以编程方式将 TextView 添加到具有 LinearLayout 和现有 TextViews 的 ScrollView

> ID：16064289
> 
> 赞同：1
> 
> 时间：2013-04-17T15:35:19.700
> 
> 标签：android, scrollview

我有以下内容： - 带有类似字符串的地图：["Color: blue","Size: big"] 称为 detailsArray

具有 LinearLayout 和现有 TextView 的现有 ScrollView：

```
<ScrollView>
    <LinearLayout>
        <TextView
            android:text="something: else"
        />
    </LinearLayout>
</ScrollView> 
```

我故意省略了宽度、高度、xml 模式等常见字段。

现在我想以编程方式添加 textViews。我不知道他们有多少：

```
 TextView detail;
    LinearLayout llay = (LinearLayout)fragmentView.findViewById(R.id.container);    
    for (int i = 0; i < detailsArray.length; i++) {
                    detail = new TextView(fragmentView.getContext());
                    detail.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
                    detail.setText(detailsArray[i]);
                    llay.addView(detail);
                }
        ScrollView sv = (ScrollView) fragmentView.findViewById(R.id.scroll_view);
        sv.addView(llay); 
```

但我遇到了一个例外：

```
04-17 12:38:09.975: E/AndroidRuntime(3361): Caused by: java.lang.IllegalStateException: ScrollView can host only one direct child 
```

我应该怎么办？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:49:56.043

你应该删除`sv.addView(llay);`，因为你基本上将线性布局两次添加到同一个**ScrollView** - 你得到的异常以及为什么当你在开始时 removeAllViews 它解决了这个问题。完成 for 循环调用后

```
sv.invalidate(); 
sv.requestLayout(); 
```

应该让它刷新它的内容。

# java - MapDB 准备好投入生产了吗？

> ID：16064294
> 
> 赞同：-2
> 
> 时间：2013-04-17T15:35:25.067
> 
> 标签：java, mapdb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:42:01.150

鉴于第一个版本是 17 天前，而最新版本是 0.9.1，我认为它尚未投入生产，并且有任何经验的主要人是开发人员。

# c# - 第一次实验调用异步方法 - 我需要所有这些代码吗？

> ID：16064296
> 
> 赞同：1
> 
> 时间：2013-04-17T15:35:30.810
> 
> 标签：c#, winforms, asynchronous, delegates

从未尝试过使用 Windows 窗体进行异步调用。我不能使用新的`aynch/await`，因为我没有最近的 Visual Studio/.NET。我需要的是“执行请求长时间的操作（填充 IList）”，当它完成后，在 TextBox 上写入该列表的结果。

在 Internet 上搜索，我发现这个示例似乎可行，但在我看来也符合要求（也许有些东西既快速又简单）：

```
private void button1_Click(object sender, EventArgs e)
{
    MyTaskAsync();
}

private void MyTaskWorker()
{
    // here I populate the list. I emulate this with a sleep of 3 seconds
    Thread.Sleep(3000);
}

private delegate void MyTaskWorkerDelegate();

public void MyTaskAsync()
{
    MyTaskWorkerDelegate worker = new MyTaskWorkerDelegate(MyTaskWorker);
    AsyncCallback completedCallback = new AsyncCallback(MyTaskCompletedCallback);

    AsyncOperation async = AsyncOperationManager.CreateOperation(null);
    worker.BeginInvoke(completedCallback, async);
}

private void MyTaskCompletedCallback(IAsyncResult ar)
{
    MyTaskWorkerDelegate worker = (MyTaskWorkerDelegate)((AsyncResult)ar).AsyncDelegate;
    AsyncOperation async = (AsyncOperation)ar.AsyncState;

    worker.EndInvoke(ar);

    AsyncCompletedEventArgs completedArgs = new AsyncCompletedEventArgs(null, false, null);
    async.PostOperationCompleted(delegate(object e) { OnMyTaskCompleted((AsyncCompletedEventArgs)e); }, completedArgs);
}

public event AsyncCompletedEventHandler MyTaskCompleted;

protected virtual void OnMyTaskCompleted(AsyncCompletedEventArgs e)
{
    if (MyTaskCompleted != null)
        MyTaskCompleted(this, e);

    // here I'll populate the textbox
    textBox1.Text = "... content of the Iteration on the List...";
} 
```

对于这个简单的操作，我真的需要 50 行代码吗？或者我可以删除一些东西？我只需要一个简单的异步调用->完成后的回调。

没有锁，根本没有并发......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:41:12.637

您可以将 TPL 与 C# 4.0 一起使用，如下所示：

```
private void button1_Click(object sender, EventArgs e)
{
    Task.Factory.StartNew(() => DoWork())
        .ContinueWith(t => UpdateUIWithResults(t.Result)
        , CancellationToken.None
        , TaskContinuationOptions.None
        , TaskScheduler.FromCurrentSynchronizationContext());
} 
```

这从`DoWork`线程池线程开始，允许它在 UI 线程之外进行处理，然后`UpdateUIWithResults`在 UI 线程中运行，将`DoWork`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:40:31.687

您可以使用`Task.Factory.StartNew`将工作推送到线程池。`Task.ContinueWith`会给你一个“完成的回调”。

```
private void button1_Click(object sender, EventArgs e)
{
    var ui = TaskScheduler.FromCurrentSynchronizationContext();
    Task<List<T>> task = Task.Factory.StartNew(() => MyTaskWorker());
    task.ContinueWith(t => OnMyTaskCompleted(t), ui);
}

private List<T> MyTaskWorker()
{
    // here I populate the list. I emulate this with a sleep of 3 seconds
    Thread.Sleep(3000);
    return ...;
}

protected virtual void OnMyTaskCompleted(Task t)
{
    // here I'll populate the textbox with t.Result
    textBox1.Text = "... content of the Iteration on the List...";
} 
```

# c++ - 用`wofstream`写入文件时使用什么编码？

> ID：16064306
> 
> 赞同：0
> 
> 时间：2013-04-17T15:35:53.157
> 
> 标签：c++, file, encoding, wofstream

我`wstring`在我的应用程序中使用了大部分和宽字符。我正在使用`ofstream`代码中的大量转换将数据保存到文件中。

我需要我的保存文件可以轻松手动编辑，因此我想保留当前文件编码。现在我正试图让我的代码更干净并摆脱这些转换，所以我正在考虑转移到`wofstream`和`wifstream`.

如果我使用`wofstream`文件是否具有相同的（当前）编码，或者文件是否以 UTF-32（Windows 为 UTF-16）编码？

# java - 对 ArrayList 中 ArrayList 的第一个条目进行排序

> ID：16064307
> 
> 赞同：1
> 
> 时间：2013-04-17T15:35:54.373
> 
> 标签：java, sorting, arraylist

我有一个 ArrayList ，它由一个由 Strings: 组成的 ArrayList 组成`ArrayList<ArrayList<String>>`。如何对内部 ArrayList 的第一个条目进行排序？例如我想要这样：

```
a = [['1','apple'],['3','pear'],['2','banana'],['1',orange']] 
```

成为：

```
a_sorted = [['1','apple'],['1','orange'],['2','banana'],['3','pear']] 
```

重复的第一个条目（如`apple`和`orange`）的顺序无关紧要。我试过使用`Collections.sort(a,new ColumnComparator())`，但它不会接受 ArrayLists。这是我使用的类：

```
public class ColumnComparator implements Comparator<ArrayList<String>>{
    public int compare(ArrayList<String> ar1, ArrayList<String> ar2){
        return ar1.get(0).compareTo(ar2.get(0));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:42:51.927

您可以使用 ArrayLists 的**`Map <String, ArrayList<String>>`**第一个条目作为键，将 ArrayList 本身作为值来创建一个。然后在键上对 Map 进行排序（使用[Sorted Map](http://docs.oracle.com/javase/6/docs/api/java/util/SortedMap.html)或[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)对 Map 键进行排序），您将得到您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:47:24.370

您为什么不创建一个实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)的自定义类，而不是存储一个数组的数组。例如。

```
class Fruit implements Comparable<Fruit> {
protected int number;
protected String name;

public Fruits(int number, String name) {
    this.number = number;
    this.name = name;
}

@Override
public int compareTo(Fruit f) {
    return number < f.number;
    // or depending on if ascending or descending order wanted
    // return number > f.number 
}
} 
```

然后排序只是运行`Collections.sort(a)`。这种方式灵活且易于扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:44:09.203

为什么不能使用 this`ArrayList<Map<String,String>>`而不是`ArrayList<ArrayList<String>>`. 您可以使用 TreeMap 轻松地对键上的 Map 进行排序。注意：这仅在您的内部数组列表中只有两个条目时才有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T16:06:56.533

如果你*真的*想这样做，你可以试试这个：

```
import java.util.Comparator;

public class ColumnComparable implements Comparator<ArrayList<String>>{

    @Override
    public int compare(ArrayList<String> o1, ArrayList<String> o2) {
        return (Integer.parseInt(o1.get(0)) > Integer.parseInt(o2.get(0)) ? -1 : (Integer.parseInt(o1.get(0)) == Integer.parseInt(o2.get(0)) ? 0 : 1));
    }
} 
```

代码在[这里](http://www.vogella.com/blog/2009/08/04/collections-sort-java/)找到。

# python - 在 pandas 绘图中包含每个数据点的标签

> ID：16064308
> 
> 赞同：2
> 
> 时间：2013-04-17T15:36:00.560
> 
> 标签：python, pandas

假设我们有一个包含价格和数量的 DataFrame（想想金融）。

用该价格点的数量标记每个价格点的最佳方式是什么？

```
 Price   Volume
2013-04-10 04:46  1300      19
2013-04-10 04:47  1305      20
2013-04-10 04:48  1302       6
2013-04-10 04:49  1301      10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:12:46.520

这是一种可能的实现

我已导入以下内容：

```
import pandas as pd
import datetime as dt
import matplotlib.pyplot as plt 
```

现在我们可以重新创建数据

```
ind = pd.date_range(start=dt.datetime(2013, 4, 10, 4, 46),
                      periods=4, freq='Min')

data = pd.DataFrame([[1200, 19], [1302, 20], [1302, 6], [1301, 10]],
                    index=ind, columns=['Price', 'Volume']) 
```

现在我将定义 annotate_plot 函数。文档字符串应该有足够的信息来弄清楚它在做什么。

```
def annotate_plot(frame, plot_col, label_col, **kwargs):
    """
    Annotate the plot of a given DataFrame using one of its columns

    Should be called right after a DataFrame or series plot method,
    before telling matplotlib to show the plot.

    Parameters
    ----------
    frame : pandas.DataFrame

    plot_col : str
        The string identifying the column of frame that was plotted

    label_col : str
        The string identifying the column of frame to be used as label

    kwargs:
        Other key-word args that should be passed to plt.annotate

    Returns
    -------
    None

    Notes
    -----
    After calling this function you should call plt.show() to get the
    results. This function only adds the annotations, it doesn't show
    them.
    """
    import matplotlib.pyplot as plt  # Make sure we have pyplot as plt

    for label, x, y in zip(frame[label_col], frame.index, frame[plot_col]):
        plt.annotate(label, xy=(x, y), **kwargs) 
```

这个函数现在可以用来做一个带有标签的基本图

```
data.Price.plot(marker='*')
annotate_plot(data, 'Price', 'Volume')
plt.show() 
```

您还可以通过 annotate_plot 函数直接传递给 plt.annotate() 的任意参数。请注意，这些论点中的大多数都取自[这个答案](https://stackoverflow.com/questions/5147112/matplotlib-how-to-put-individual-tags-for-a-scatter-plot)。

```
bbox = dict(boxstyle='round,pad=0.5', fc='green', alpha=0.3)
ha = 'right'
va = 'bottom'
arrowprops = dict(arrowstyle='->', connectionstyle='arc3,rad=0')
xytext = (-20, 20)
textcoords = 'offset points'

data.Price.plot(marker='*')
annotate_plot(data, 'Price', 'Volume', bbox=bbox, ha=ha, va=va, 
              xytext=xytext, textcoords=textcoords)

plt.show() 
```

# mysql - mysql 客户端的 MySQL 连接池

> ID：16064311
> 
> 赞同：1
> 
> 时间：2013-04-17T15:36:08.907
> 
> 标签：mysql, client, pool

有没有办法在客户端建立一个连接池（作为守护进程运行），所以它可以被 linux 上的 mysql 客户端使用？

mysql ==（命名管道/unix 域套接字？）==> mysql 连接池（守护进程）==> mysql 服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:22:02.403

阅读您的回复后，我可以提出以下解决方案：

*   拥有一个守护程序应用程序（驻留在内存中），它将接受来自客户端的连接（通过套接字或 http）
*   客户端将发送一个安全令牌（以便他们可以被授权）和需要执行的查询
*   守护程序应用程序可以有一个 mysql 连接池（固定数量），它将选择一个连接（取决于负载）来执行查询并返回结果（如果需要）

这样，您将完全控制 mysql 连接的数量，并且您将拥有与 db 层进行通信的单点。

# javascript - 函数是对象吗？为什么 console.log 不显示可检查对象？

> ID：16064312
> 
> 赞同：2
> 
> 时间：2013-04-17T15:36:13.507
> 
> 标签：javascript

```
var foo = function () {};
foo.a = "an attribute";  // set attribute to prove foo is an object
console.log(foo)  // log shows: function () {}; 
```

我认为函数 foo 是一个对象，但为什么 Chrome 中的 console.log 显示`"function () {}"`而不是一个可检查的对象？无论如何在记录函数时显示可检查的对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T15:37:31.490

当您调用`console.log(foo)`时，控制台会构建一个非标准化显示（它不是 EcmaScript 的一部分）。在大多数情况下（但不是针对基本对象），它会调用参数的`toString`函数（但会做更多的工作，例如为字符串添加引号、设置颜色、提供对象浏览等）。

函数的`toString`函数只是打印代码。

如果你想查看所有属性，你可以这样做

```
console.dir(foo); 
```

或（[至少在 Chrome 上](https://developers.google.com/chrome-developer-tools/docs/console-api#consolelogobject_object)）

```
console.log("%O", foo); 
```

对于具有专用`toString`功能的其他对象，您会看到相同的现象。

例如 ：

```
var a = new Number(3);
a.b = 4;
console.log(a); // logs just 3
console.dir(a); // lets you see b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:38:51.090

用于`console.dir()`查看`a`

```
>>>>console.log(foo);
function()
>>>>console.dir(foo);
a            "an attribute"
prototype    Object { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:39:38.437

营养不良是对的。function 是一个 toString 打印代码的对象。

```
console.log(foo.a); 
```

会成功的

# oracle - 分层查询中树中的比较

> ID：16064314
> 
> 赞同：0
> 
> 时间：2013-04-17T15:36:14.873
> 
> 标签：oracle

我需要以以下方式提取数据

```
 Compare_Result          Association_Type_name     Association_Role 

Type in Dev,but not Prod      ProcessingSite           Null
Role in Dev,but not Prod      ProcessingSite           MoodedActivity
Role in Dev,but not Prod      Specimen                 ProductRelationship 
```

**要求：**我需要比较开发和生产。如果生产中不存在任何关联类型或关联角色，那么我需要返回一条消息，例如“在开发中找到的类型对象，但不是生产”

任何人都可以给我一个想法。

样本数据

```
 create table nodes
 (
 node_id number(5),
 parent_node_id number(5),
 object_id number(5)
 );

 begin
 insert into nodes values(4001,7001,2001);
 insert into nodes values(4002,4001,2005);
 insert into nodes values(4003,4002,2002);
 insert into nodes values(4004,4003,2004);
 insert into nodes values(4005,4004,2003);
 insert into nodes values(4006,4004,2006);
 insert into nodes values(4007,4004,2007);
 insert into nodes values(4008,4003,2008);
 insert into nodes values(4009,4008,2011);
 insert into nodes values(4010,4008,2013);
 insert into nodes values(4011,4008,2014);
 insert into nodes values(4012,4003,2009);
 insert into nodes values(4013,4012,2015);
 insert into nodes values(4014,4012,2017);
 insert into nodes values(4015,4001,2020);
 insert into nodes values(4016,4015,2012);
 insert into nodes values(4017,4016,2016);
 insert into nodes values(4018,4017,2024);
 insert into nodes values(4019,4017,2023);
 insert into nodes values(4020,4016,2029);
 insert into nodes values(4021,4020,2022);
 insert into nodes values(4022,4020,2021);
 insert into nodes values(4023,4020,2019);
 insert into nodes values(4024,4016,2010);
 insert into nodes values(4025,4024,2018);
 end;
 /

 create table objects
 (
 object_id number(5),
 object_type_id number(5),
 name varchar2(40)
 );

 begin
 insert into objects values ( 2001,5001,'iad_Dictionary_area');
 insert into objects values ( 2002,5003,'iad_Association_Dictionary');
 insert into objects values ( 2003,5005,'TreatingSite');
 insert into objects values ( 2004,5004,'ProcessingSite');
 insert into objects values ( 2005,5002,'Development');
 insert into objects values ( 2006,5005,'MoodedActivity');
 insert into objects values ( 2007,5005,'MaterialName');
 insert into objects values ( 2008,5004,'PerformedClass');
 insert into objects values ( 2009,5004,'Specimen');
 insert into objects values ( 2010,5004,'Specimen');
 insert into objects values ( 2011,5005,'RegulatoryAssessment');
 insert into objects values ( 2012,5003,'iad_Association_Dictionary');
 insert into objects values ( 2013,5005,'Submission');
 insert into objects values ( 2014,5005,'Mooded');
 insert into objects values ( 2015,5005,'class13th');
 insert into objects values ( 2016,5004,'ProcessingSite');
 insert into objects values ( 2017,5005,'ProductRelationship');
 insert into objects values ( 2018,5005,'class13th');
 insert into objects values ( 2019,5005,'Distributor');
 insert into objects values ( 2020,5006,'Production');
 insert into objects values ( 2021,5005,'Assessor');
 insert into objects values ( 2022,5005,'StudyInvestigator');
 insert into objects values ( 2023,5005,'MaterialName');
 insert into objects values ( 2024,5005,'TreatingSite');
 insert into objects values ( 2029,5004,'BiologicEntityGroup');
 end;
 /

 create table object_types
 (
 object_type_id number(5),
 name varchar2(35)
 );

 begin
 insert into object_types values (5001,'Dictionary_area');
 insert into object_types values (5002,'Development');
 insert into object_types values (5003,'Association_Dictionary');
 insert into object_types values (5004,'Association_Type');
 insert into object_types values (5005,'Association_Role');
 insert into object_types values (5006,'Production');
 end;
 / 
```

# 例子

让我们假设我有以下结构

```
 Dictionary_area
      development
          Association_Dictionary 
                ProcessingSite(type1) 
                    TreatingSite(role1)
                    MoodedActivity(role2)
                    MaterialName(role3)

                PerformedClass(type2)
                    RegulatoryAssessment(role1)
                    Submission(role2)
                    Mooded(role3)

                Specimen(type3)
                    class13th(role1)
                    ProductRelationship(role2)      

       production
          Association_Dictionary
                ProcessingSite(type1)
                    TreatingSite(role1)
                    MaterialName(role2)

                BiologicEntityGroup(type2)
                    StudyInvestigator(role1)
                    Assessor(role2)
                    Distributor(role3) 

                Specimen (type3)      
                    class13th(role1) 
```

ProcessingSite 是一个关联类型，它有 3 个关联角色。我们可以在生产中观察到相同的关联类型，但 MoodedActivity(association_role) 不可用。在这种情况下，我们需要返回“在开发中找到类型对象，但不是在生产中找到”。

# 表信息

节点：此表将包含节点和父节点信息。例如，如果开发对象有一些像 100 这样的节点，它的父节点是 99。

对象：对象信息。

object_types：object_type 信息。例如 ProcessingSite object_type 是“Association_Type”。

我尝试了以下方式

```
 WITH childs AS
 (SELECT n.object_id, n.node_id, n.parent_node_id, ot.NAME, "path",
         rootnode
    FROM (SELECT     object_id, node_id, parent_node_id,
                     SYS_CONNECT_BY_PATH (object_id, '/') "path",
                     CONNECT_BY_ROOT (object_id) rootnode
                FROM nodes

          START WITH object_id = 2001
          CONNECT BY PRIOR node_id = parent_node_id) n
         JOIN
         objects o ON n.object_id = o.object_id
         JOIN object_types ot ON o.object_type_id = ot.object_type_id
         ),
 devobj AS
 (SELECT n.object_id, n.NAME
    FROM (SELECT *
            FROM childs) n
   WHERE n.NAME = 'Development'),
 prodobj AS
 (SELECT n.object_id, n.NAME
    FROM (SELECT *
            FROM childs) n
   WHERE n.NAME = 'Production'),
 dev_associ_type_obj AS
 (SELECT *
    FROM (SELECT     object_id, NAME
                FROM (SELECT *
                        FROM childs)
          START WITH object_id = (SELECT object_id
                                    FROM devobj)
          CONNECT BY PRIOR node_id = parent_node_id) t
   WHERE t.NAME = 'Association_Type'),
 dev_associ_roles_obj AS
 (SELECT     object_id, NAME, CONNECT_BY_ROOT (object_id) rootnode
        FROM (SELECT *
                FROM childs)
  START WITH object_id IN (SELECT object_id
                             FROM dev_associ_type_obj)
  CONNECT BY PRIOR node_id = parent_node_id),
 prod_associ_type_obj AS
 (SELECT *
    FROM (SELECT     object_id, NAME
                FROM (SELECT *
                        FROM childs)
          START WITH object_id = (SELECT object_id
                                    FROM devobj)
          CONNECT BY PRIOR node_id = parent_node_id) t
   WHERE t.NAME = 'Association_Type'),
 prod_associ_roles_obj AS
 (SELECT     object_id, NAME, CONNECT_BY_ROOT (object_id) rootnode
        FROM (SELECT *
                FROM childs)
  START WITH object_id IN (SELECT object_id
                             FROM prod_associ_type_obj)
  CONNECT BY PRIOR node_id = parent_node_id)
  SELECT *
  FROM prod_associ_roles_obj
  MINUS
  SELECT *
  FROM dev_associ_roles_obj 
```

# php - 使用 for 循环遍历 excel 范围

> ID：16064322
> 
> 赞同：1
> 
> 时间：2013-04-17T15:36:38.330
> 
> 标签：php, for-loop

我正在`*.xlsx`使用 PHPExcel 创建一个文档，并且我正在尝试遍历一个范围内的大量单元格。我可以拆分单元格以获取范围内的第一个和最后一个单元格，但是是否可以使用 PHP`for`循环遍历它们？谢谢。

```
$first_cell = 'A4';
$last_cell = 'M4';

for(...) :

endfor; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:42:46.293

怎么样：

```
foreach (range('A','M') as $letter) {

    $current=$letter.'4'
    // where $current is the cell you are doing stuff to in the loop iteration
} 
```

# google-app-engine - GAE javapns 推送队列

> ID：16064325
> 
> 赞同：0
> 
> 时间：2013-04-17T15:36:48.593
> 
> 标签：google-app-engine

所以在 GAE 1.7.7 中支持出站套接字并且 javapns 应该可以工作......好吧，我可以进行简单的 Push.payload 调用，但问题是它不能保持与 APNS 的连接打开，因此很慢。Push.queue 保持打开连接，但它无法在 GAE 上工作，因为它会产生线程并且不允许这样做......所以问题是......我怎样才能在 GAE 上保持与 APNS 的打开连接？还有其他方法吗？是否有另一个开源库可以做到这一点，而无需像 javapns 那样旋转线程？

谢谢！杰夫

# php - 如何使用道具。仅应用于单击的元素？

> ID：16064326
> 
> 赞同：0
> 
> 时间：2013-04-17T15:36:57.690
> 
> 标签：php, javascript, jquery, select, prop

我正在创建一个付款表格，其中一部分用户可以选择信用卡或贝宝。我的显示功能有问题。我应该为每个元素创建一个新函数吗？这就是我所拥有的：

```
 <p>Billing Infomation</p>
    First Name: <input name="Billing_F_name" type="text" size="15" 
    value="Enter First Name"/> &nbsp;Last Name: <input name="Billing_L_name" 
    type="text" size="20" value="Enter Last Name"/><br />

    Method of Payment:<br /> 
    Credit Card <input name="payment" id="p1" type="radio" onclick="javascript: 
     payment()"/><br />

    Paypal <input name="payment" id="p4" type="radio" 
    onclick="javascript:payment()"/><br />
<script language="javascript" >
    function payment(click)
{
    if(document.getElementById("p1"){
  $('input:radio[name="payment1"][value="P_1"]').prop('checked=checked', true);

  document.write('<? $P_Method = 'P_1'; ?>');
   }

  else if(document.getElementsById("p4")){
  $('input:radio[name="payment4"][value="P_4"]').prop('checked=checked', true);}
  document.write('<? $P_Method = 'P_4'; ?>');
}
    </script> 
```

BTW，仅供参考。正在设置的 PHP 设置变量转到 php switch 方法，显示它们各自的元素，这些元素目前正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:47:48.343

将单击的元素传递给处理程序并使用它。

```
javascript:payment(this) 
```

..

```
function payment(el) {
    $(el).doSomething()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:53:04.620

要在 php 中执行，您需要使用 AJAX

```
<script language="javascript">
 function payment(dd)
{

if(dd.id=="p1") 
  document.write("<? $P_Method = 'P_1'; ?>");

else if(dd.id=="p4")
 document.write("<? $P_Method = 'P_4'; ?>");

}
</script>
<p>Billing Infomation</p>
First Name: <input name="Billing_F_name" size="15" value="Enter First Name" type="text"> 
&nbsp;Last Name: 
<input name="Billing_L_name" size="20" value="Enter Last Name" type="text"><br>

Method of Payment:<br> 
Credit Card <input name="payment" id="p1" onclick="payment(this)" type="radio"><br>

Paypal <input name="payment" id="p4" onclick="payment(this)" type="radio"><br> 
```

# c# - 无法使用动态 linq 两次检查相同的属性

> ID：16064327
> 
> 赞同：2
> 
> 时间：2013-04-17T15:36:58.777
> 
> 标签：c#, asp.net-mvc, linq, dynamic-linq

我正在构建一个 MVC 应用程序，它必须构建对服务器的动态 linq 查询，而我正面临着令我困惑的事情。

到目前为止，我可以进行这样的查询：

```
var objQry = from o in m_DB.OBJECTS.Where(whereConditions)
             select c;

if(!objQry.Any())
{
    return null;
} 
```

这很好用。“whereConditions”变量是之前构建的字符串。下面是一个有效查询字符串的示例：

```
OBJ_NAME == \"Sword\" and OBJ_OWNER == \"Stan\" 
```

这将返回“Stan”拥有的名称为“Sword”的任何对象。但是，奇怪的是，如果我确实使用两次相同的参数创建查询字符串，如下所示：

```
OBJ_COLOR == \"Blue\" and OBJ_COLOR == \"Red\" 
```

即使我可以证明我的数据库确实有单个“蓝色”项目和单个“红色”项目，这个字符串将返回 null。谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:41:05.263

如果我理解正确，您希望退回所有颜色为红色或蓝色的物品。您当前的查询返回项目`OBJ_COLOR`同时为“红色”*和*“蓝色”的项目。这不会返回任何东西，因为它是一个矛盾 - 它不能两者兼而有之。

我相信您想改用`OR`运算符：

```
"OBJ_COLOR == \"Blue\" OR OBJ_COLOR == \"Red\"" 
```

# javascript - 在 JavaScript 中使用 toFixed(2) 会产生不希望的结果

> ID：16064330
> 
> 赞同：2
> 
> 时间：2013-04-17T15:36:59.923
> 
> 标签：javascript, parsefloat, tofixed

我正在这样做：

```
var refundAmount = parseFloat($('#refundAmount2').val().replace('$',''));
var refundReceived = $('#refundReceived');
var remainderAmount = refundAmount-parseFloat(refundReceived.val().replace('$',''));

alert(parseInt(remainderAmount).toFixed(2)); 
```

无论我做什么，结果总是以小数点后 2 位为 '.00' 结尾。所以如果第一个数字是 200.12，第二个是 100.08，它应该用 100.04 提醒我，但我得到的是 100.00。

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:38:49.137

您曾经`parseInt`将该数字转换为整数，然后`toFixed(2)`将其转换为具有 2 个小数位的数字。将 2 位小数添加到整数将始终导致`.00`.

尝试

```
alert(remainderAmount.toFixed(2)); 
```

见[演示](http://jsfiddle.net/laucheukhim/hBTnS/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:39:36.403

你用 parseInt() 将它作为一个 int 得到，然后执行 toFixed()。所以你把小数位放在一个int上。

# ios - Core Data轻量级迁移，无法映射新的数据模型

> ID：16064332
> 
> 赞同：1
> 
> 时间：2013-04-17T15:37:03.897
> 
> 标签：ios, ipad, core-data, core-data-migration

我在我的 iOS 项目中使用核心数据。我正在使用轻量级迁移在数据模型版本之间迁移模式。我将 3.5 版设置为在现场发布的应用程序的当前模式版本。在对数据模型模式进行新更改之前，我创建了一个新的数据模型版本 3.6，并在新数据模型上添加了一个新实体和几个属性更新。完成所有更改后，我为 3.5 到 3.6 创建了一个新的映射模型，并且我正在使用以下代码进行轻量级迁移，

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
if (_persistentStoreCoordinator != nil)
{
    return _persistentStoreCoordinator;
}

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:PERSISTENT_STORE_FILENAME];
NSDictionary *storeOptions = nil; 

NSError *error = nil;
_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:storeOptions error:&error])
{

    BOOL shouldPerformLightWeightMigration;

    if (self.optionalCoreDataMigrationHandler) {
        shouldPerformLightWeightMigration = optionalCoreDataMigrationHandler();
    }

    if (shouldPerformLightWeightMigration) {
        [self performLightweightMigrationInBackgroundWithStoreURL:storeURL];
    }        
}    

return _persistentStoreCoordinator; 
```

}

```
- (void)performLightweightMigrationInBackgroundWithStoreURL:(NSURL *)storeURL {
[self.initializerDelegate willStartMigration];
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^(void){
    NSDictionary *storeOptions = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

    NSError *error = nil;
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:storeOptions error:&error]) {
        dispatch_async(dispatch_get_main_queue(), ^(void){
            [self.initializerDelegate didFinishMigrationSuccessfully:NO];
        });
    } else {
        dispatch_async(dispatch_get_main_queue(), ^(void){
            [self.initializerDelegate didFinishMigrationSuccessfully:YES];
        });
    }
}); 
```

}

当我在现有应用程序之上安装新应用程序时，应用程序变为空白并且没有检索任何数据，并且在调用 NSManagedObjectContextDidSaveNotification 时遇到以下错误，

NSManagedObjectContextDidSaveNotification 的观察者非法抛出异常。保存的对象 = {....} 和异常 = 使用 userInfo = (null) 从这个 NSManagedObjectContext 的协调器无法访问对象的持久存储

在另一个应用程序中，相同的过程通常适用于我。但由于某种原因，它在这里不起作用。过去，我在另一个应用程序中遇到过类似的问题。从 v1 到 v2 的数据模型迁移失败，所以我创建了一个新的模型版本 v3，以 v1 为源，在 v3 上重新进行了所有数据模型更新，并创建了一个从 v1 到 v3 的新映射模型。然后轻量级迁移起作用了。

在当前情况下，我无法遵循上述方法。请帮助解决当前的迁移问题和任何其他最佳实践，以避免将来出现此类问题，因为我经常更新数据模型。

# jquery - 数据属性选择器和 jQuery

> ID：16064341
> 
> 赞同：0
> 
> 时间：2013-04-17T15:37:21.880
> 
> 标签：jquery, custom-data-attribute

我有一组具有数据属性的项目，其中包含一组类别：

```
<div class="result" data-categories="category-1, category-2, category-3" data-type="logo" data-preview="images/previews/preview.jpg"> 
```

我无法从数据类别组中选择没有我传入的值的元素。

```
$(".media-results .result:not([data-categories*=" + val + "])"); 
```

这似乎工作正常，但是当我更改使用此选择器的选择元素时，我会得到奇怪的、不受欢迎的结果（选择器似乎无限运行，页面不断隐藏和随机显示元素）。

任何人的帮助？

* * *

编辑：这是选择将值传递给的函数：

```
allResults.animate({
        opacity: 0
    }, 500, function(){
        console.log("Change triggered. All results hidden.");
        notSelected.hide(50, function(){
            console.log("Unwanted items hidden");
            selected.show().animate({ opacity: "1" }, 500);
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:47:45.400

您可以使用`filter()`

```
elements = $(".media-results .result").filter(function(){
    return $(this).data("categories").indexOf(val) == -1
}); 
```

# c++ - 使用 memcpy 从字节数组初始化虚拟类

> ID：16064348
> 
> 赞同：3
> 
> 时间：2013-04-17T15:37:38.193
> 
> 标签：c++

我的应用程序`byte[]`通过网络接收到一个包含我无法控制的固定大小结构的成员表示的网络。让我们称之为`Data`：

```
struct Data {
  int id;
  int count;
} 
```

这很好用：

```
char buffer[]; // filled with bytes from the network...

Data data;
memcpy(&data, data, sizeof(Data)); 
```

现在，我想让`Data`类型从具有（纯）虚函数的类继承：

```
struct Data : public SomethingVirtual {
  int id;
  int count;
} 
```

上面的代码不再有效。对于虚拟类，实例的前 N ​​个字节似乎包含指向 vtable 的指针，因此数据是偏移的。

我可以增加调用 to 的指针`memcpy`，但我现在想知道这种方法是否被误导了。如果可能的话，我想避免有太多的间接层或内存复制。此外，该方法理想情况下应该适用于体系结构和编译器，尽管我主要针对使用 g++ 的 i686。

这个问题有什么好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:43:24.860

一旦您从某物派生并且它具有虚拟成员，它就不再是 POD。您最好的解决方案是序列化到您的数据结构中，然后在琐碎的数据之上构建您的虚拟类。

```
struct  Data
{...}

struct AddedValue : public SomethingVirtual 
{
   AddedValue(Data)
private:
   Data MyData;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:41:45.993

您不能在非 POD 类型上使用 memcpy。可能的解决方案是使用聚合而不是继承。并且将 Data 作为成员值，它仍然是 POD 类型，因此可以在 memcpy 中使用。

# vba - 在 VBA 中声明变量

> ID：16064354
> 
> 赞同：1
> 
> 时间：2013-04-17T15:37:51.113
> 
> 标签：vba, variables

我是 vba 的初学者，即使我搜索了很多关于它但没有找到任何东西，我也无法理解下面的代码。put (x) 的含义是什么，并用不同的类型声明它？

```
 Const x = 25 
    Dim y(x) As Double
    Dim z(x) As Boolean 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:39:09.810

`y`并且`z`是数组，每个都有 25 个元素。

`y`是一个 25 `Double`s`z`的数组，是一个 25 s 的数组`Boolean`。

有许多 VBA 教程可以教您有关数组的知识；这是一个示例：[Excel VBA 中的数组](http://www.vbtutor.net/VBA/vba_chp21.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:40:47.113

这是声明一个与 x 具有相同数量值的数组作为指定类型

```
Const x = 25 
    Dim y(x) As Double = array of 25 double
    Dim z(x) As Boolean = array of 25 booleans 
```

# c++ - 如何在 Windows 平台上获取堆大小

> ID：16064359
> 
> 赞同：5
> 
> 时间：2013-04-17T15:38:11.273
> 
> 标签：c++, windows

正如问题标题所示，我想知道是否有办法获取当前进程的堆大小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:58:31.603

你可以这样做——但我认为这将是缓慢而痛苦的。

1.  使用[GetProcessHeaps](http://msdn.microsoft.com/en-us/library/windows/desktop/ee175820%28v=vs.85%29.aspx)枚举进程堆。
2.  使用[HeapWalk](http://msdn.microsoft.com/en-us/library/windows/desktop/ee175819%28v=vs.85%29.aspx)枚举每个堆中的块。
3.  使用[HeapSize](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366706%28v=vs.85%29.aspx)获取不同块的大小和类型

# ios - 当表格在可见矩形中时，UITableView 部分标题不可见

> ID：16064360
> 
> 赞同：1
> 
> 时间：2013-04-17T15:38:13.033
> 
> 标签：ios, objective-c, uitableview, uiscrollview, drawrect

我有一个水平堆叠的`UIScrollView`3 个。`UITableViews`我使用顶部的选项卡控制器在这些表格视图之间切换。但是，当我切换到第二个或第三个选项卡并快速切换回第一个选项卡时，`section headers`不会显示。当我滚动`tableView`. 这些是`custom headers`（jfyi）。我尝试`setNeedsDisplay`在 tableView 可见时调用，但这无济于事，因为根据 Apple Docs：

> 如果您只是更改视图的几何形状，通常不会重绘视图。相反，它的现有内容会根据视图的 contentMode 属性中的值进行调整。重新显示现有内容可避免重绘未更改的内容，从而提高性能。

因为，这里只有视图的几何形状发生了变化，所以没有帮助。这也发生在所有版本`iOS 5~6.1`以及模拟器和设备上。值得庆幸的是，这不会使应用程序崩溃，但它仍然是一个问题。有人可以帮忙吗？我附上图片供参考。首先显示问题，其次：滚动“head(er)less”tableview后

![无头 TableView 部分](https://i.stack.imgur.com/FYPxs.png)![我们有一个头。 达达！！](https://i.stack.imgur.com/J0Mss.png)

**编辑**：我使用简单`scrollRectToVisible:animated:`的表视图之间切换。这可以解决问题，但我只是观察到，当我设置`...animated:NO`所有内容时，一切正常。问题发生时`...animated:YES`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:44:15.510

似乎各个表格视图同时发生显示和滚动的问题。所以你可以在这里做的是：

1.  删除滚动动画或
2.  只需将表格视图滚动到选项卡按下事件的顶部或
3.  只需重新加载可见的 tableView

# networking - IP 上的 UART - 如何？

> ID：16064364
> 
> 赞同：2
> 
> 时间：2013-04-17T15:38:23.540
> 
> 标签：networking, serial-port

对于一个学生项目，我们有一个带有串行端口（UART）的设备，可以通过有线方式与计算机通信。由于我们想让这个系统无线化（设备可以远离计算机），我们有了让设备通过 IP 通信的想法；：设备串口==> UART/RJ45转换器？====> 路由器 ===> 调制解调器

我们的问题主要是关于 UART RJ45 转换器。这种设备存在吗？我们看到了一些这样的：http: [//www.ecnmag.com/product-releases/2008/12/embedded-lan-module-connects-10/100baset-lans](http://www.ecnmag.com/product-releases/2008/12/embedded-lan-module-connects-10/100baset-lans)

但是那么如何寻址远程计算机呢？我们想从设备复制所有流量并将其发送回我们计算机上的指定端口。我们也想过把路由器的固件改成OpenWRT来实现这个

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:44:08.207

...你*可以*得到一个树莓派，它运行 Linux 并为你提供对一组 IO 引脚的低级别访问。或者使用带有以太网模块的 Arduino。所有这些都很容易获得且易于采购。如今，几乎每个 Radio Shack 都出售 Arduino 和以太网模块。

除非您需要以大于 100kbps 左右的速度进行通信，否则上述解决方案应该可以正常工作。

编辑：

请注意，有可用于 Pi 的串行库：

[https://projects.drogon.net/raspberry-pi/wiringpi/serial-library/](https://projects.drogon.net/raspberry-pi/wiringpi/serial-library/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T13:09:32.713

多亏了你们，我终于找到了一个很好的解决方案。我订购了一个 Rasperry Pi，它具有 Wing Tang Wong 所说的 IO 引脚，包括一组在 3.3v 下工作的 Rx Tx 引脚。

我们的设备工作电压为 5v，因此我们将使用逻辑转换器。

在 RPi 上，我们将使用 ser2net 包，它将串行输入转换为 TCP/IP 网络信号；）

任务完成 ！

再次感谢

# groovy - 需要帮助 - SoapUi testRunner.getStatus() 将状态无限期地返回为“RUNNING”

> ID：16064365
> 
> 赞同：2
> 
> 时间：2013-04-17T15:38:26.433
> 
> 标签：groovy, soapui

**[在 SoapUI 中，通过testRunner.runTestStepByName](http://www.soapui.org/apidocs/com/eviware/soapui/model/testsuite/TestCaseRunner.html#runTestStepByName%28java.lang.String%29)** (" *Soap Request Name* ")执行一个肥皂请求测试步骤（在测试套件 -> 测试用例下）

[并在肥皂请求执行testRunner.getStatus()](http://www.soapui.org/apidocs/com/eviware/soapui/model/testsuite/TestRunner.html#getStatus%28%29)返回**RUNNING** status后等待 10 秒。下面是 groovy 脚本（在同一个测试套件 -> 测试用例下）

```
import groovy.sql.Sql;
import com.eviware.soapui.model.testsuite.TestRunner.Status

testRunner.runTestStepByName("GetCitiesByCountry - Request 1")
sleep(10000)
log.info( "...${testRunner.getStatus()}...")

while ( testRunner.getStatus() == Status.RUNNING ) {
    log.info(testRunner.getStatus())
} 
```

输出如下

```
Wed Apr 17 21:06:22 IST 2013:INFO:RUNNING
Wed Apr 17 21:06:22 IST 2013:INFO:RUNNING
Wed Apr 17 21:06:22 IST 2013:INFO:RUNNING
Wed Apr 17 21:06:22 IST 2013:INFO:RUNNING
Wed Apr 17 21:06:22 IST 2013:INFO:RUNNING
Wed Apr 17 21:06:22 IST 2013:INFO:RUNNING
.
.
continuing for infinite time... 
```

**理想情况下，由于执行了上述测试步骤，**它应该返回***FINISHED** ，*

 **高级感谢您对此的任何帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T12:00:41.643

这听起来合乎逻辑，只要你在循环中，测试就是“运行”。您可以通过以下方式获取状态：

```
import com.eviware.soapui.model.testsuite.TestStepResult.TestStepStatus
myTestStepResult = testRunner.runTestStepByName("GetCitiesByCountry - Request 1")
myStatus = myTestStepResult.getStatus()
if (myStatus == TestStepStatus.OK)
log.info "The step status is: " + myStatus.toString()
else
log.error "The step status is: " + myStatus.toString() 
```

此外，由于对 runTestStepByName 的调用是同步的，因此没有“正在运行”状态，只有“CANCELED”、“FAILED”、“OK”或“UNKNOWN”。

[请参阅此处的文档](http://www.soapui.org/apidocs/com/eviware/soapui/model/testsuite/TestStepResult.TestStepStatus.html)**

# c# - 在 c# 中失去生命（一次失去 3 条生命）

> ID：16064370
> 
> 赞同：-4
> 
> 时间：2013-04-17T15:38:37.510
> 
> 标签：c#, debugging, xna

基本上，我有一个简单的破砖游戏，里面有桨、球和砖块。

我用这段代码设置了生活：

```
protected override void Update(GameTime gameTime)
    {

        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        paddle.Update();
        ball.Update();

        foreach (Brick brick in bricks)
        {
            score += brick.CheckCollision(ball);
        }

        ball.PaddleCollision(paddle.GetBounds());

        if (ball.OffBottom())
        {
            --lives;
            if (lives == 0)

                StartGame();
            base.Update(gameTime);
        }
    } 
```

我遇到的问题是我一次失去了 3 条生命，对这部分进行了很多调整，但仍然无法使其正常工作。

我确信这是一个简单的解决方法，但我刚刚开始编程。我已经在 Google 上尝试过 C# 生活等，但是有一个名为 game of lives 的游戏不断出现，我无法以这种方式获得我想要的东西。任何帮助将不胜感激！

这是整个方法。

```
protected override void Update(GameTime gameTime) 
{ 

    if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
        this.Exit(); 

    paddle.Update(); 
    ball.Update(); 

    foreach (Brick brick in bricks) 
    { 
        score += brick.CheckCollision(ball); 
    } 

    ball.PaddleCollision(paddle.GetBounds()); 

    if (ball.OffBottom()) 
    { 
        --lives; 

        if (lives == 0) 
            StartGame(); 

        base.Update(gameTime); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:44:18.357

我以前遇到过这个问题，一般的解决方案是： -

*   当球与砖碰撞 > 从生命中减去 1，然后...
*   ...启动一个计时器，并设置一个阈值，比如 10 毫秒
*   然后是类似的东西`if ball intersects brick and timer <= threshold, dont subtract from lives`
*   然后当计时器达到阈值>重置计时器并允许再次减少生命值

不幸的是，我没有代码解决方案，但是这个伪代码足以解决问题

# php - JQuery 返回一个元素的空白文本

> ID：16064373
> 
> 赞同：1
> 
> 时间：2013-04-17T15:38:42.930
> 
> 标签：php, ajax

所以我试图接收特定 ID 的元素文本。在我的 Javascript 文件中，我有以下代码：

```
var amount = 2;
for (var i = 0; i < amount; i++)
{
    $("#b"+i).click(function() {
        var xmlhttp;
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        var name = ($("#name"+i).text());
        alert(name); 
```

它一直提醒空白。这是我的 php 文件：

```
echo "<td id= \"name".$counter."\">".$values[$counter]."</td>
<td><button id=    \"b".$counter."\">Show Table</button></tr>";
$counter++; 
```

计数器基本上是 0 和 1。但是，每当我尝试在 name+i 处获取文本时，它都会返回一个空白。有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:58:01.460

`i`您有一个关闭问题，当您单击处理程序被触发时，值为2。您可以通过将计数器作为参数传递给单击事件来防止这种情况。

```
var amount = 2;
for (var i = 0; i < amount; i++)
{
    $("#b"+i).click(i, function(e) {
        var xmlhttp;
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        var name = ($("#name"+e.data).text());
        alert(name); 
```

# hibernate - Grails 加载属性文件并同时使用 dbCreate="create-drop"

> ID：16064375
> 
> 赞同：1
> 
> 时间：2013-04-17T15:38:44.840
> 
> 标签：hibernate, grails, properties

我在环境配置方面遇到了一些问题。对于某些测试，我们需要一个真实的数据库来进行集成测试。为了在每次开始测试时都有一个干净的数据库，我们认为我们只需更改已加载的配置文件中的 dbCreate 属性：

配置-integration.properties：

```
# connection
db.name=integration_test
db.host=127.0.0.1
db.port=3306
dataSource.driverClassName=com.mysql.jdbc.Driver
dataSource.url=jdbc:mysql://${db.host}:${db.port}/${db.name}?useUnicode=yes&characterEncoding=UTF-8&autoReconnect=true
dataSource.dialect=org.hibernate.dialect.MySQL5InnoDBDialect

# configuration
dataSource.username=foo
dataSource.password=bar
dataSource.dbCreate=create-drop
dataSource.pooled=true
dataSource.properties.maxActive=50
dataSource.properties.maxIdle=25
dataSource.properties.minIdle=5
dataSource.properties.initialSize=5
dataSource.properties.minEvictableIdleTimeMillis=60000
dataSource.properties.timeBetweenEvictionRunsMillis=60000
dataSource.properties.maxWait=10000
dataSource.properties.validationQuery=/* ping */ 
```

配置.groovy：

```
environment {
....
integration {
    log4j = {
        root { debug 'stdout' }
        warn 'org.apache'
        warn 'grails.spring'
        info 'org.codehaus.groovy.grails'
        warn 'net.sf.ehcache'
        warn 'org.hibernate'
    }

    grails.serverURL = "http://www.foobar.com"

    if (!grails.config.locations || !(grails.config.locations instanceof List)) {
        grails.config.locations = []
    }
    // loading default configuration
    grails.config.locations << "classpath:app/config-integration.properties"

    grails.gorm.failOnError = true
}
....
} 
```

现在的问题是，这根本行不通。未创建表，因此测试因 SQL 异常而终止。如果我将其更改为不正确的用户名/密码，甚至没有关于错误用户名/密码的消息。因此，当 grails/hibernate 应该在数据库中创建表时，配置似乎没有加载。

编辑：我忘记了什么：如果我在 Config.groovy 本身中定义数据源，它就可以工作。

有谁知道我在这里做错了什么？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:30:55.480

所以，我不知道为什么，但看起来在 grails 应用程序实际启动并加载配置之前，Hibernate 完成了表格删除和创建工作。因此，我现在使用不同的方法并“手动”加载配置并设置属性。现在看起来像这样并且工作正常：

```
integration {
    log4j = {
        root { debug 'stdout' }
        warn 'org.apache'
        warn 'grails.spring'
        info 'org.codehaus.groovy.grails'
        warn 'net.sf.ehcache'
        warn 'org.hibernate'
    }

    def props = new Properties()

    new File("grails-app/conf/app/appconfig-integration-tests.properties").withInputStream {
        stream -> props.load(stream)
    }

    def user_file = new File("grails-app/conf/app/appconfig-${System.getProperty("user.name")}.properties")
    if(user_file.exists()) {
        user_file.withInputStream {
            stream -> props.load(stream)
        }
    }

    dataSource {
        username = props.get("dataSource.username")
        password = props.get("dataSource.password")
        dbCreate = props.get("dataSource.dbCreate")
        driverClassName = props.get("dataSource.driverClassName")
        dialect = props.get("dataSource.dialect")
        url = props.get("dataSource.url")
    }

    grails.serverURL = "http://www.foobar.com"

    grails.gorm.failOnError = true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:19:34.157

这可能是我正在寻找的一个蹩脚的澄清，但你在使用

```
environment{
  test{
   ....
  }
} 
```

或者

```
environment{
  integration{
   ....
  }
} 
```

配置文件中的DSL？

如果我没记错的话，我们只有`development`,`test`和`production`environment DSLs 可用。

# jquery - 我可以 :nth-child(10-infinity) 吗？

> ID：16064383
> 
> 赞同：2
> 
> 时间：2013-04-17T15:39:01.793
> 
> 标签：jquery, css, css-selectors

我希望`<li>`从 10 号开始选择所有的 s。我宁愿有 css，但如果需要的话 javascript/jquery 是可以的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T15:40:47.783

```
li:nth-child(n + 10) {
    background: cornflowerblue;
} 
```

[http://jsfiddle.net/YhVNN/9/](http://jsfiddle.net/YhVNN/9/)

* * *

*“如果我想选择让我们说只有 10 到 25 怎么办？”* ：

```
li:nth-child(n + 10):nth-child(-n + 25) {
    background: cornflowerblue;
} 
```

[http://jsfiddle.net/YhVNN/8/](http://jsfiddle.net/YhVNN/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:41:17.757

使用`gt:`选择器 - [http://api.jquery.com/gt-selector/](http://api.jquery.com/gt-selector/)

```
$(document).ready(function () {
    $('ul li:gt(9)').css('color', 'red'); // indexing starts from 0
}); 
```

[http://jsfiddle.net/udNrS/2/](http://jsfiddle.net/udNrS/2/)

# scala - Scala 布尔值：代码片段

> ID：16064384
> 
> 赞同：5
> 
> 时间：2013-04-17T15:39:02.683
> 
> 标签：scala

我正在使用从 coursera 上的 Scala courers 获取的一些 scala 代码：

```
package src.functional.week4

abstract class Boolean {

  def ifThenElse[T](t: => T, e: => T): T

  def && (x: => Boolean): Boolean = ifThenElse(x, false)

} 
```

该行 `def && (x: => Boolean): Boolean = ifThenElse(x, false)`给出了这个编译时错误：

> 类型不匹配; 发现：scala.Boolean(false) 需要：src.functional.week4.Boolean

以下是视频中的代码片段：

![在此处输入图像描述](https://i.stack.imgur.com/gvEfn.png)

我是否需要更改代码才能编译？

当我使用创建新的“假”对象时

```
 object false extends Boolean {
      def ifThenElse[T](t: => T, e: => t) = e
  } 
```

我收到错误：

> 此行有多个标记 - 应为标识符，但发现“错误”。

我在与“抽象类布尔”相同的类中定义对象。我无法创建“false”类型的新对象，因为 Eclipse IDE 不允许这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:51:14.957

您的代码（和 Martin 的）定义了一个新的`Boolean`，即使它是在 Scala 中预定义/内置的。

您遇到的问题是您没有定义一个 new`false`来取代内置的，`false`并且内置`false`与您重新定义的`Boolean`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T16:29:39.360

讲座中的代码无法编译，因为`true`和`false`是保留字，不能重新定义。尝试使用`True`and`False`代替。

# objective-c - UIControls如何相对排列

> ID：16064387
> 
> 赞同：0
> 
> 时间：2013-04-17T15:39:08.697
> 
> 标签：objective-c, uiview

我在视图中有按钮、标签等。有些元素没有高度，所以如果单击按钮，我想设置所需的高度。到目前为止没有问题。
我希望以下元素向下滑动并重新排列。我试过了`FlowLayoutController`，`Auto Layout Constraints`但都没有满足我的要求。

我看到的唯一方法是计算所有元素并在添加或调整一个项目时以编程方式排列它们。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:47:34.647

如果您想调整 UIView 的框架并使其具有动画效果，就好像它们正在滑出/向下/您喜欢的任何东西一样。您可以使用一些简单的动画机制。

```
[UIView beginAnimations:nil context:NULL];
//[UIView setAnimationDuration:2];
//change your view's frame (height) here
[UIView commitAnimations]; 
```

这应该为您解决问题！祝你好运 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:27:53.327

查看[视图自动布局的可能性](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853)，这将启用视图的自动布局。或者，您可以在“layoutSubviews”方法中自己完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:07:59.853

我在这里找到了解决方案：

[更改 UIView 框架时移动元素](https://stackoverflow.com/questions/16025034/moving-elements-when-changing-uiview-frame/16037646#16037646)

重要的一句话是：不要将框架与自动布局结合起来，这会给你带来不可预知的结果。

所以我用 IBOutlet 和`self.textViewHeightConstraint.constant`.

现在它工作得很好。

# javascript - 多个 AngularJS 将请求放入一个模型

> ID：16064392
> 
> 赞同：7
> 
> 时间：2013-04-17T15:39:22.763
> 
> 标签：javascript, jquery, ajax, angularjs

有没有办法通过 AngularJS 中的函数调用未知数量的 API 调用到 URL `get()`，并将它们全部添加到模型（`$scope`变量）中。到目前为止，我所做的如下：

```
if(theUIDS != "") {
    var myDropbox = [];

    for(i = 0; i < theUIDS.length; i++) {
        var temp = {};

        temp.uid = theUIDS[i];

        $http({ url: '/dropbox/accounts/get', method: 'GET', params: { uid: theUIDS[i] }}).success(function(acctData) {
            temp.accountInfo = acctData;
        });

        $http({ url: '/dropbox/files/get', method: 'GET', params: { uid: theUIDS[i] }}).success(function(fileData) {
            temp.files = fileData;
        });

        myDropbox.push(temp);
    }

    $scope.dropboxAccounts = myDropbox;
} 
```

我检查是否有任何 UID，并为每个 UID 创建一个`temp`对象，该对象填充一个`uid`，然后是一个`accountInfo`对象，然后是一个`files`对象。设置`temp`对象后，我将其推送到`myDropbox`阵列上。循环完成后，我将 dropboxAccounts 模型设置`myDropbox`为`$scope`. 我是 Angular 的新手，但我很确定这至少是正确的想法。幸运的是，我以正确的顺序获得了以下数据：

```
{"uid":"332879"}
{"uid":"155478421",
    "accountInfo":{
        "country":"US",
        "display_name":"Patrick Cason",
        "name":"Second Dropbox",
        "quota_normal":1174504,
        "quota_shared":0,
        "quota_total":2147483648,
        "referral_link":"https://www.dropbox.com/referrals/NTE1NTQ3ODQyMTk?src=app9-203957",
        "uid":155478421},
    "files":[{
        "created_at":"2013-04-17T15:13:46Z",
        "directory":true,
        "dropbox_user_id":26,
        "fileType":"Folder",
        "id":198,
        "name":"Photos",
        "path":"/Photos",
        "rev":"10edb44f9",
        "size":"-",
        "updated_at":"2013-04-17T15:13:46Z"}]
} 
```

奇怪的是，只有我的一个 UID 得到更新。我知道循环正在正确通过，因为我有两个 UID，如果我在循环开始时发出警报，我会得到两个循环。我认为第二个没有被填充的原因是因为 push 语句没有等待两个承诺都通过。如何确保在分配`myDropbox`给`$scope`变量之前等待每个 AJAX 调用完成？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T21:08:15.940

## 介绍

我对 AngularJS 还很陌生，所以这个解决方案非常适合进行*中的工作*。我认为，由于我一直在努力学习更多有关它的知识，因此其他人也可能处于相同的位置。话虽如此，我不仅要发布我的答案，还要解释我在代码背后的想法。如果有人觉得答案可以改进，我很乐意得到任何反馈。

## 最终代码

这是我用来让一切正常工作的代码：

```
var app = angular.module('myApp', []);

app.controller('DropboxCtrl', function($scope, dropbox) {
    $scope.dropboxAccounts = dropbox.getAccounts();
    $scope.dropboxFiles = dropbox.getFiles();
});

app.factory('dropbox', function($http, $q) {
    var theUIDS = [12345,67890];

    return {
        getAccounts: function() {
            var promises = [];

            for(i = 0; i < theUIDS.length; i++) {
                promises.push($http({
                    url: '/dropbox/accounts/get', 
                    method: "GET",
                    params: { uid: theUIDS[i] }
                }));
            }

            return $q.all(promises);
        },
        getFiles: function() {
            var promises = [];

            for(i = 0; i < theUIDS.length; i++) {
                promises.push($http({
                    url: '/dropbox/files/get', 
                    method: "GET",
                    params: { uid: theUIDS[i] }
                }));
            }

            return $q.all(promises);
        }
    }
}); 
```

## 基本算法

我们首先声明一个模块`myApp`并将其保存在一个变量`app`中......注意我们传递的空数组通常是任何可能或可能不会从其他模块继承的任何进一步要求的参数。

声明我们的模块后，我们需要创建一个相应的控制器，它将作为所有交互发生的网关。在这种情况下，我们需要访问与`$scope`我们的控制器相关的变量（与应用程序本身无关）。我们还声明了这个控制器与哪个工厂相关，在我的例子中它是`dropbox`（我们稍后会到达工厂）。在这个控制器内部，我们将两个模型分配给`$scope`：`dropboxAccounts`和`dropboxFiles`. 请注意，我最初的愿望是在我的 AngularJS 应用程序中拥有一个模型。虽然这是可能的......我选择反对它，因为我发现很难区分我的两种类型的 JSON 返回。一个返回帐户元数据，另一个返回该帐户的文件数组。我本来希望将所有这些都放在一个模型下并按`uid`参数排序，但发现如果不更改我的 RESTful 端点输出的 JSON，这是不可能做到的。最后，我选择了两个独立的模型，这样我可以更轻松地使用它们（直到我找到一种根据一个通用参数组合它们的方法）。

最后，我们创建一个工厂来存储我的 AJAX 函数（`$http`用于实际的 AJAX 调用和`$q`处理承诺）。我有两个函数：（记得是从我的控制器调用的）`getAccounts`和`getFiles`. 他们每个人都有一个名为 promises 的数组，它将存储我`$http`调用的 promises。我在 for 循环中运行这些调用，该循环将查看我`theUIDS`在 AJAX 调用中使用的每个项目，然后将其推送到`promises`数组中。最后，我们`$q`将等待`promises`数组中的所有 AJAX 调用成功完成，然后将一个大承诺中的所有数据返回给我们的控制器并将其分配给`$scope`.

## 我学到的是

AngularJS is really tough. This particular issue has taken me two days of debugging and trying again and again. I have been told that while the learning curve to this front-end MVC framework is pretty steep, the payoff is well worth it. I suppose we shall see...

## Resources

*   [AngularJS API](http://docs.angularjs.org/api/)
*   [Factories and Services comparison](https://groups.google.com/forum/#!msg/angular/56sdORWEoqg/VxECXKbn3gsJ)
*   [Good use of AngularJS's `all` method](https://stackoverflow.com/a/15117739/591776)
*   [Beautiful explanation of AJAX promises both in jQuery and AngularJS](http://nurkiewicz.blogspot.com/2013/03/promises-and-deferred-objects-in-jquery.html)

# java - Int[] 的平均值；方法不返回

> ID：16064394
> 
> 赞同：0
> 
> 时间：2013-04-17T15:39:27.763
> 
> 标签：java, arrays, class, methods, average

我的任务是计算用户在数组中定义的整数的平均值，并使用我的类文件中的方法打印回 main。

目前我有两个文件要编译，但似乎无法弄清楚为什么什么都没有打印。请帮忙，不胜感激！

测试程序中要检查的代码片段：

```
// Print average of integers in array.
     System.out.println("\nAverage of values in array =");
     myArray.avgArray(); 
```

类程序中要检查的代码片段：

```
// Method to calculate average of integers in array.
  public double avgArray()
  { 
     int sum = 0;

     for(int ctr = 0; ctr < limit; ctr++)
     {
       sum = sum + nrs[ctr];
     }

     double avg = sum /(double)limit;

     return avg;
  } 
```

这段代码是我用于测试目的的程序：

```
import java.util.Scanner;

public class P5test
{
  public static void main(String[] args)
  {
    // Set up Scanner object for keyboard input.
     Scanner keyboard = new Scanner(System.in);

     // Input size of array desired.
     System.out.print("Size of array:   ");
     int size = keyboard.nextInt();

     // Set up object.
     P5class myArray = new P5class(size);

     // Allow user to fill array.
     System.out.println("\nEnter data for array:");
     myArray.fillArray();

     // Print contents of array.
     System.out.println("\nContents of array:");
     myArray.printArray();

     // Print average of integers in array.
     System.out.println("\nAverage of values in array =");
     myArray.avgArray();

     // Print postive values in array.
     System.out.println("\nPositive values in array:");
     myArray.pvaluesArray();

     // Sort contents of array in ascending order.
     System.out.println("\nSorted Array:");
     myArray.sortArray();
     myArray.printArray();
  }
} 
```

这段代码包含我的类以及我将在 main 中实现的各种方法：

```
import java.util.Scanner;

public class P5class
{
  // Constructor setting up empty array of size specified by user.
  public P5class(int size)
  {
    limit = size;
     nrs = new int[limit];
  }

  // Method to fill array.
  public void fillArray()
  {
    // Set up Scanner object for keyboard input.
     Scanner keyboard = new Scanner(System.in);

     for(int ctr = 0; ctr < limit; ctr++)
     {
       System.out.print("Integer #" + (ctr+1) + ":  ");
        nrs[ctr] = keyboard.nextInt();
     }
  }

  // Method to display contents of array.
  public void printArray()
  {
    for(int ctr = 0; ctr < limit; ctr++)
     {
       System.out.println("Nrs[" + ctr + "] = " + nrs[ctr]);
     }
  }

  // Method to calculate average of integers in array.
  public double avgArray()
  { 
     int sum = 0;

     for(int ctr = 0; ctr < limit; ctr++)
     {
       sum = sum + nrs[ctr];
     }

     double avg = sum /(double)limit;

     return avg;
  }

  // Method to examine if any positive values are present in array.
  public void pvaluesArray()
  {
    int largest = nrs[0];

    // Check to see if any other number in array is larger than first.
    for(int ctr = 1; ctr < limit; ctr++)
    {
      if(nrs[ctr] > largest)
         largest = nrs[ctr];
    }

    int sum = 0;

    for(int ctr = 0; ctr < limit; ctr++)
    {
      sum = sum + nrs[ctr];
    }

    double average = (double)sum/limit;

    for(int ctr = 0; ctr < limit; ctr++)
    {
      if(largest <= 0)
      {
        System.out.println("\nArray contains no positive integers.");
          break;
      }
      else if (nrs[ctr] > 0)
      {
        System.out.println("Nrs[" + ctr + "] = " + nrs[ctr]);
      }
    }
  }

  // Method to sort array into ascending order.
  public void sortArray()
  {
    for(int ctr0 = 0; ctr0 < limit-1; ctr0++)
     {
       // Make one pass of Bubble Sort.
       for(int ctr = 0; ctr < limit-1; ctr++)
       {
         if(nrs[ctr] > nrs[ctr+1])
          {
            int temp = nrs[ctr];
            nrs[ctr] = nrs[ctr+1];
            nrs[ctr+1] = temp;
          } 
       }
     }
  }

  // Instance variables.
  private int limit;
  private int[] nrs;
} 
```

这是运行时程序的示例输出：

```
 ----jGRASP exec: java P5test

Size of array:   5

Enter data for array:
Integer #1:  0
Integer #2:  -9
Integer #3:  4
Integer #4:  7
Integer #5:  2

Contents of array:
Nrs[0] = 0
Nrs[1] = -9
Nrs[2] = 4
Nrs[3] = 7
Nrs[4] = 2

Average of values in array =

Positive values in array:
Nrs[2] = 4
Nrs[3] = 7
Nrs[4] = 2

Sorted Array:
Nrs[0] = -9
Nrs[1] = 0
Nrs[2] = 2
Nrs[3] = 4
Nrs[4] = 7

 ----jGRASP: operation complete. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:40:55.083

它返回一个值，但你没有用它做任何事情，试试：

```
System.out.println("\nAverage of values in array = " + myArray.avgArray()); 
```

或者：

```
double avg = myArray.avgArray();
System.out.println("\nAverage of values in array = " + avg); 
```

或许多其他方式之一。

或者，`return avg;`您可以简单地在方法中将其打印出来，而不是 ，`System.out.println(avg);`并将返回类型更改为`void`。

# opengl - 顶点到片段着色器：传递 vec3 还是重新计算每个片段？

> ID：16064401
> 
> 赞同：0
> 
> 时间：2013-04-17T15:39:46.247
> 
> 标签：opengl, glsl, shader

在我的顶点着色器中，我通过每个顶点在世界空间中的位置。我使用制服将相机在世界坐标中的位置传递给片段着色器。我需要那里的两个值，而与问题的答案无关。

现在有什么更好的做法：在顶点着色器中计算一个 vec3 cameraToSurface（世界空间）并将其传递给片段着色器并让它在该过程中进行插值？还是我应该为片段着色器中的每个片段重新计算该向量？这将是一个简单的（ vec3 a - vec3 b ）操作。

基本上：如果它是一个简单的差异操作，我应该将 vec3 从顶点传递到片段着色器还是在那里重新计算？在顶点和片段着色器之间插入 vec3 的成本是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:16:39.467

在顶点着色器中计算，让插值硬件完成它的工作。

但是，由于相机位置是固定的并且对于所有顶点都是相同的，所以我根本看不出为什么要在着色器中进行计算。在 CPU 上计算并使用制服。世界空间中的相机和顶点之间的关系只是顶点视图空间的位置，所以无论你现在正在计算什么，它可能都可以简化。

# c++ - C++ 找出需要的代码部分

> ID：16064403
> 
> 赞同：12
> 
> 时间：2013-04-17T15:39:50.233
> 
> 标签：c++

我在 VS2010 C++ 中有一个非常庞大的解决方案，有几个项目，我只想保留那些实际需要的部分。

这很困难，因为一个项目的某些部分需要其他项目的其他部分。

有谁知道我如何自动删除运行应用程序时未调用的那些代码部分，也许使用 VS2010 左右的附加组件？

我想这是一个相当不寻常的愿望，但也许有人知道解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:44:37.640

不是自动解决方案，但我使用 doxygen Graph 功能为项目类构建依赖关系树：[doxygen doc on the subject](http://www.doxygen.nl/manual/diagrams.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T16:19:41.027

值得尝试一下链接选项，看看它们是否可以帮助您：链接器会丢弃它不使用的静态链接库中的代码。它必须准确地完成您想要的工作，即关闭所有使用过的东西并丢弃其余部分。我在 Visual Studio 2008 中进行了这项工作，以便从我正在维护的库中删除一些未使用的代码。

我在链接器命令行上使用了 /OPT:REF /VERBOSE，然后使用正则表达式在输出中搜索“Discarded .* from MYLIB.lib”。我刚刚在visual studio 2010中试过（我没有2012），和2008有点不同。我需要/OPT:REF /VERBOSE:REF，它似乎只能在调试下工作，因为大概是链接时优化正在阻碍（在发布时它说它正在丢弃使用的函数！）。无论如何，它值得更详细地研究，因为它确实在 2008 年下工作。我很想听听你是否有任何进展（你可能想先尝试一个简单的测试项目）。

编辑：我家​​里有visual studio 2012，所以试了一下。

使用 test.h 创建了一个静态库 testlib

```
void used();
void unused(); 
```

和 test.cpp

```
#include "test.h"
#include <stdio.h>

void used_by_used()
{
    printf("used_by_used");
}

void used()
{
    used_by_used();
    printf("used");
}

void used_by_unused()
{

    printf("used_by_unused!!!!");
}

void unused()
{
    used_by_unused();
    printf("unused!!!!");
} 
```

和一个带有 cpp 文件的控制台应用程序

```
#include "../Win32Project1/test.h"

int _tmain(int argc, _TCHAR* argv[])
{
    used();
    return 0;
} 
```

然后对于调试版本，在控制台应用程序的链接选项中将 References 设置为 Yes (/OPT:REF)。然后将“VERBOSE:REF”添加到命令行选项。在链接器输出中，您会得到很多垃圾

```
1>      Discarded "void __cdecl unused(void)" (?unused@@YAXXZ) from testlib.lib(test.obj)
1>      Discarded "void __cdecl used_by_unused(void)" (?used_by_unused@@YAXXZ) from testlib.lib(test.obj) 
```

并且基于我对 Visual Studio 2008 所做的工作，希望这应该可以完成这项工作。（我现在看到你的问题实际上指定了 Visual Studio 2010。我猜这种技术将在 2008 年、2010 年和 2012 年工作，并进行了如上所述的修改。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T16:40:21.880

对于我的情况，我有一个很好的解决方案。我的解决方案包含大约 20 个项目，我可以卸载每个项目（使其显示为灰色）。如果我的代码仍然有效，我知道我可以将其删除。

# php - 从 mysql 输出 blob

> ID：16064407
> 
> 赞同：0
> 
> 时间：2013-04-17T15:40:02.157
> 
> 标签：php, mysql, blobs, sqlyog

我对 PHP/MySQL 有一个奇怪的问题。

我已将 word 文档上传到 BLOB 中。它成功了，如果（比如使用 SQLYog）我打开 BLOB 并将其保存为文件，它将在 Open Writer 中完美打开。

然而，当我尝试通过 PHP 输出数据时，我得到了一个损坏的文档。

我正在使用以下内容进行输出：

```
header('Content-length: '.$file['FileSize']);
header('Content-Type: '.$file['FileSize']);
header('Content-Disposition:attachment; filename="'.$file['FileName'].'"');
echo $file['Content']; 
```

任何帮助都会很棒。

谢谢

安东尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:43:06.343

你想在这里做什么？：

```
header('Content-Type: '.$file['FileSize']); 
```

内容类型应该指定文件的类型（或者，在严格的 HTTP 术语中，响应正文），而不是文件的大小。对于 Word 文档，我相信内容类型是：

```
"application/ms-word" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T15:11:59.430

```
// define results into variables
$name=$row['task_name'];
$size=$row['task_size'];
$type=$row['task_type'];
$content=$row['task_content'];

// give our picture the proper headers...otherwise our page will be confused
header("Content-Disposition: attachment; filename=$name");
header("Content-Disposition: filename=$name");  
header("Content-length: $size");
header("Content-type: $type");
echo $content; 
```

# python - 如何在python中创建代码对象？

> ID：16064409
> 
> 赞同：21
> 
> 时间：2013-04-17T15:40:07.173
> 
> 标签：python, python-3.x, bytecode

我想用函数 types.CodeType() 创建一个新的代码对象。
几乎没有关于此的文档，现有的文档说“不适合胆小的人”
告诉我我需要什么，并给我一些关于传递给 types.CodeType 的每个参数的信息，
可能会发布一个示例。

**注意**：
在正常用例中，您只需要内置函数 compile(
) 只有当您想创建无法通过编写普通源代码获得的新指令并且需要直接访问字节码时，您才应该使用 types.CodeType()。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-20T17:26:21.850

–––––––––––<br> ***免责声明***：
此答案中的文档不是官方的，可能不正确。

此答案仅对 python 版本 3.x 有效

–––––––––––</p>

为了创建代码对象，您必须将以下参数传递给函数 CodeType()：

```
CodeType(
        argcount,             #   integer
        kwonlyargcount,       #   integer
        nlocals,              #   integer
        stacksize,            #   integer
        flags,                #   integer
        codestring,           #   bytes
        consts,               #   tuple
        names,                #   tuple
        varnames,             #   tuple
        filename,             #   string
        name,                 #   string
        firstlineno,          #   integer
        lnotab,               #   bytes
        freevars,             #   tuple
        cellvars              #   tuple
        ) 
```

现在我将尝试解释每个参数的含义。

**argcount**
要传递给函数的参数数量（不包括 *args 和 **kwargs）。

**kwonlyargcount**[仅关键字参数的](https://www.python.org/dev/peps/pep-3102/)
数量。

**nlocals**
局部变量的数量，
即除全局名称外的所有变量和参数（包括 *args 和 **kwargs）。

**stacksize** 代码所需的栈（虚拟机栈）的数量，
如果想了解它是如何工作的，请看官方[文档](http://docs.python.org/3.3/library/dis.html#python-bytecode-instructions)。

**flags**
说明代码对象的位图：
1 –> 代码已优化
2 –> newlocals：有一个新的本地命名空间（例如函数）
4 –> 代码接受任意数量的位置参数（*args 是used)
8 –> 代码接受任意数量的关键字参数（使用 *kwargs）
32 –> 代码是生成器

其他标志用于较旧的 python 版本或被激活以说明从 __**未来**__ 导入的内容

**codestring**
表示字节码指令的字节序列，
如果您想更好地理解，请参阅[文档](http://docs.python.org/3.3/library/dis.html#python-bytecode-instructions)（同上）

**consts**
包含字节码使用的文字的元组（例如预先计算的数字、元组和字符串）

**names**
包含字节码使用的名称的元组，
这些名称是全局变量、函数和类，或者也是从对象加载的属性

**varnames**
包含字节码使用的本地名称的元组（首先是参数，然后是局部变量）

**文件名**
它是编译代码的文件名。
它可以是你想要的任何东西，你可以自由地对此撒谎。;)

**name**
它给出函数的名称。这也可以是任何你想要的，但要小心：
这是回溯中显示的名称，如果名称不清楚，回溯可能不清楚，
想想 lambdas 是多么烦人。

**firstlineno**
函数的第一行（如果您编译了源代码，则用于调试目的）

**lnotab**
将字节码偏移量与行号相关联的字节映射。
（我认为这也是出于调试目的，关于此的文档很少）

**freevars**
包含自由变量名称的元组。
自由变量是在定义代码对象的命名空间中声明的变量，它们在声明嵌套函数时使用；
这不会发生在模块级别，因为在这种情况下，自由变量也是全局变量。

**cellvars**
包含嵌套函数引用的局部变量名称的元组。

––––––––––––<br> ***示例***：
以下示例应阐明上述内容的含义。

*注意*：在上述完成的代码对象中，属性具有**co_**前缀，
并且函数将其可执行体存储在**__code__**属性中

––––––––––––<br> *第一个例子*

```
def F(a,b):
    global c
    k=a*c
    w=10
    p=(1,"two",3)

print(F.__code__.co_argcount)
print(F.__code__.co_nlocals , F.__code__.co_varnames)
print(F.__code__.co_stacksize)
print(F.__code__.co_flags)
print(F.__code__.co_names)
print(F.__code__.co_consts) 
```

输出：

```
2
5 ('a', 'b', 'k', 'w', 'p')
3
67
('c' ,)
(None, 10, 1, 'two'. 3, (1, 'two', 3)) 
```

1.  有两个参数传递给这个函数（“a”，“b”）

2.  这个函数有两个参数（“a”，“b”）和三个局部变量（“k”，“w”，“p”）

3.  反汇编我们得到的函数字节码：

    ```
    3         0 LOAD_FAST                0 (a)             #stack:  ["a"] 
              3 LOAD_GLOBAL              0 (c)             #stack:  ["a","c"]
              6 BINARY_MULTIPLY                            #stack:  [result of a*c]
              7 STORE_FAST               2 (k)             #stack:  []

    4        10 LOAD_CONST               1 (10)            #stack:  [10]
             13 STORE_FAST               3 (w)             #stack:  []

    5        16 LOAD_CONST               5 ((1, 'two', 3)) #stack:  [(1,"two",3)]
             19 STORE_FAST               4 (p)             #stack:  []
             22 LOAD_CONST               0 (None)          #stack:  [None]
             25 RETURN_VALUE                               #stack:  [] 
    ```

    正如你可以注意到智利执行的函数我们在堆栈中永远不会有超过三个元素（在这种情况下，元组算作它的长度）

4.  flag 的值是*dec* 67 = *bin* 1000011 = *bin* 1000000 +10 +1 = *dec* 64 +2 +1 ，所以我们明白

    *   代码经过优化（因为大多数自动生成的代码都是）
    *   在执行函数字节码本地命名空间更改时
    *   64？其实我不知道它是什么意思
5.  函数中使用的唯一全局名称是 "c" ，它存储在 co_names

6.  我们使用的每个显式文字都存储在 co_consts 中：

    *   None 是函数的返回值
    *   我们明确地将数字 10 分配给 w
    *   我们明确地将 (1, 'two', 3) 分配给 p
    *   如果元组是一个常数，该元组的每个元素都是一个常数，所以 1,"two",3 是常数

––––––––––––<br> *第二个例子*

```
ModuleVar="hi"

def F():
    FunctionVar=106
    UnusedVar=ModuleVar

    def G():
        return (FunctionVar,ModuleVar)

    print(G.__code__.co_freevars)
    print(G.__code__.co_names)

F()
print(F.__code__.co_cellvars)
print(F.__code__.co_freevars)
print(F.__code__.co_names) 
```

输出：

```
('FunctionVar',)
('ModuleVar',)
('FunctionVar',)
()
('print', '__code__', 'co_freevars', 'co_names', 'ModuleVar') 
```

输出的含义是这样的：

执行 F 时打印第一行和第二行，因此它们显示 G 代码的 co_freevars 和 co_names：
“FunctionVar”在 F 函数的命名空间中，G 是在其中创建的，
“ModuleVar”是一个模块变量，所以它被认为是作为全球。

以下三行是关于 F 代码的 co_cellvars、co_freevars 和 co_names 属性：
“FunctionVar”在 G 嵌套函数中被引用，因此标记为 cellvar，
“ModuleVar”在创建 F 的命名空间中，但它是一个模块变量，
所以它没有被标记为freevar，但它可以在全局名称中找到。
内置函数 print 也被标记在 names 中，以及 F 中使用的所有属性的名称。

––––––––––––<br> *第三个例子*

这是一个有效的代码对象初始化，
这是无用的，但你可以用这个函数做任何你想做的事情。

```
MyCode= CodeType(
        0,
        0,
        0,
        3,
        64,
        bytes([101, 0, 0,    #Load print function
               101, 1, 0,    #Load name 'a'
               101, 2, 0,    #Load name 'b'
               23,           #Take first two stack elements and store their sum
               131, 1, 0,    #Call first element in the stack with one positional argument
               1,            #Pop top of stack
               101, 0, 0,    #Load print function
               101, 1, 0,    #Load name 'a'
               101, 2, 0,    #Load name 'b'
               20,           #Take first two stack elements and store their product
               131, 1, 0,    #Call first element in the stack with one positional argument
               1,            #Pop top of stack
               100, 0, 0,    #Load constant None
               83]),         #Return top of stack
        (None,),
        ('print', 'a', 'b'),
        (),
        'PersonalCodeObject',
        'MyCode',
        1,
        bytes([14,1]),
        (),
        () )

a=2
b=3
exec(MyCode) # code prints the sum and the product of "a" and "b" 
```

输出：

```
5
6 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-16T00:31:31.443

CodeType 构造函数的示例用法可以在标准库中找到，特别是 Lib/modulefinder.py。如果你看那里，你会看到它被用来重新定义文件中所有代码对象的只读`co_filename`属性。

我最近遇到了一个类似的用例，我有一个函数工厂，但是生成的函数在回溯中总是有“通用”名称，所以我不得不重新生成代码对象以包含所需的名称。

```
>>> def x(): raise NotImplementedError
...
>>> x.__name__
'x'
>>> x.__name__ = 'y'
>>> x.__name__
'y'
>>> x()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 1, in x
NotImplementedError

>>> x.__code__.co_name
'x'
>>> x.__code__.__name__ = 'y'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: readonly attribute

>>> 'Gah!'
'Gah!' 
```

但是，等等，函数的`__code__`成员不是只读的，所以我们可以做模块查找器所做的事情：

```
>>> from types import CodeType
>>> co = x.__code__
>>> x.__code__ = CodeType(co.co_argcount, co.co_kwonlyargcount,
             co.co_nlocals, co.co_stacksize, co.co_flags,
             co.co_code, co.co_consts, co.co_names,
             co.co_varnames, co.co_filename,
             'MyNewCodeName',
             co.co_firstlineno, co.co_lnotab, co.co_freevars,
             co.co_cellvars)
>>> x.__code__.co_name
'MyNewCodeName'
>>> x()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 1, in MyNewCodeName
NotImplementedError 
```

此示例中要注意的是，在堆栈跟踪中生成值时，回溯使用的是`co_name`属性，而不是属性。`func.__name__`

还要注意：以上是 Python 3，为了使其与 Python 2 兼容，只需省略构造函数的第二个参数 ( `co_kwonlyargcount`)。

更新：Victor Stinner 在 Python 3.8 的 CodeType 类中添加了一个新方法“replace”，这大大简化了这种情况。这样做是为了消除未来的兼容性问题，因为 3.8 还在 'co_argcount' 之后的调用列表中添加了一个新的 'co_posonlyargcount' 参数，因此如果参数列表再次更改，至少您的 3.8 和更高版本的代码将在一定程度上得到未来的证明。

```
>>> x.__code__ = x.__code__.replace(co_name='MyNewCodeName') 
```

# ios - 将 xml 解析为 UITableView

> ID：16064410
> 
> 赞同：0
> 
> 时间：2013-04-17T15:40:20.423
> 
> 标签：ios, xml, parsing, uitableview

我的服务器上有一个 XML 文件，我需要将它解析到我的 iOS 应用程序中，然后我需要将它放入`UITableView`. 我的 XML 如下所示：

```
<plan>
    <action>
        <id>1</id>
        <name>item 1</name>
    </action>
    <action>
        <id>2</id>
        <name>item 2</name>
    </action>
    <action>
        <id>3</id>
        <name>item 3</name>
    </action>
</plan> 
```

我需要将该`<item>`标记的每个实例提取到表视图中。

谁能告诉我该怎么做？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:50:22.740

Apple 提供了一个示例，其中可能包含您需要的内容，该项目名为 LazyTableImages，您可以在[此处找到它](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009394)

此示例将执行以下步骤：

1.  通过调用其委托方法使用 NSXMLParser 解析内容
2.  将解析后的数据加载到 ViewController
3.  重新加载 UITableView 数据以显示从 XML 中提取的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:54:25.240

你必须使用 NSXMLParser 来解析你的 XML 文件，看[这个](http://www.edumobile.org/iphone/iphone-programming-tutorials/parsing-an-xml-file/)。或者试试[这个](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEUQFjAC&url=http%3A%2F%2Fiphonedevsdk.com%2Fforum%2Fiphone-sdk-development%2F40819-parsing-an-xml-using-nsxmlparser.html&ei=EsRuUYqPF47krAeHr4CgCw&usg=AFQjCNG6RSzC8fVvv8IOzLVzSQYTp8Spcg&sig2=4v1H-K0F8xagZMhMflC4qQ&bvm=bv.45368065,d.bmk)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:35:51.933

例子：

```
#import <Foundation/
Foundation.h>

@interface Parser : NSObject <NSXMLParserDelegate>
{
    NSXMLParser *parser;
    NSMutableString *element;
    NSString *tag;
}

@end
//initalization of parser
-init {
   if(self == [super init]) {
          //pass in your xml file/code here here.
          parser = [[NSXMLParser alloc]
initWithContentsOfURL:[NSURL fileURLWithPath:[[NSBundle mainBundle]
pathForResource:@"Sample" ofType: @"xml"]]];
          [parser setDelegate:self];
          [parser parse];
   }      
   return self;
}
//start parsing
- (void)parser:(NSXMLParser *)parser
didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI
qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary
*)attributeDict {

NSLog(@"Started
Element %@", elementName);
      element = [NSMutableString
string];

}

// end parsing
- (void)parser:(NSXMLParser *)parser
didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI
qualifiedName:(NSString *)qName {

      if([elementName isEqualToString:@"name"]
        tag = element;

}

save the string
- (void)parser:(NSXMLParser *)parser
foundCharacters:(NSString *)string 

 if(element == nil)
   element = [[NSMutableString
alloc] init];
   [element appendString:string];
} 
```

希望这可以帮助...

# width - PHPExcel 可以基于单个单元格值自动调整吗？

> ID：16064415
> 
> 赞同：0
> 
> 时间：2013-04-17T15:40:34.483
> 
> 标签：width, phpexcel

在 PHPExcel 中，是否可以仅根据单个单元格的值自动调整列？

假设您在单元格 A1 中有一个标题，您通常不希望自动调整大小，因为它太大了。因此，您可能只想根据 A2、B2、C2 等进行自动调整。不幸的是`getColumnDimension('A1')->setAutoSize(true)`，无法完成这项工作。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:22:42.780

不，自动调整大小基于列中的所有单元格工作，因为它适用于列。

如果您想以任何其他方式设置列宽，您需要编写自己的函数来计算该列中您想要的所有单元格的最大宽度，然后将列宽设置为该值。

# mysql - SQL 错误：'您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法'

> ID：16064417
> 
> 赞同：-1
> 
> 时间：2013-04-17T15:40:41.283
> 
> 标签：mysql, sql

我有这个 sql 查询

```
SELECT sites.id, sites.url, GROUP_CONCAT(categories.name,"|",
    categories.color SEPARATOR ",") AS categories
FROM sites
LEFT JOIN categories_data ON sites.id = categories_data.sites_id
LEFT JOIN categories ON categories_data.categories_id = categories.id
WHERE sites.deleted=0 
AND WHERE categories.deleted=0 
AND WHERE categories_data.deleted=0 
GROUP BY sites.id 
```

我收到此错误：

```
Database_Exception [ 1064 ]: You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for 
the right syntax to use near 'WHERE categories.deleted=0 AND WHERE 
categories_data.deleted=0 GROUP BY sites.id' at line 5 [ SELECT sites.id, 
sites.url, GROUP_CONCAT(categories.name,"|",categories.color SEPARATOR ",") 
AS categories FROM sites LEFT JOIN categories_data ON sites.id = 
categories_data.sites_id LEFT JOIN categories ON 
categories_data.categories_id = categories.id WHERE sites.deleted=0 
AND WHERE categories.deleted=0 AND WHERE categories_data.deleted=0 GROUP BY 
sites.id ] 
```

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:41:41.400

因为你有三个`WHERE`子句。如果您有多个条件，则需要使用条件运算符将它们分开，

```
SELECT ...
FROM   ... JOIN ...
WHERE  sites.deleted = 0 AND 
       categories.deleted = 0 AND 
       categories_data.deleted = 0 
GROUP  BY sites.id 
```

# c# - 我应该如何实现 IEqualityComparer 。等于

> ID：16064419
> 
> 赞同：1
> 
> 时间：2013-04-17T15:40:41.860
> 
> 标签：c#, equals, gethashcode, iequalitycomparer

`Equals(T x, T y)`关于 IEqualityComparer，除了我下面的内容之外，是否有任何理由说明实现应该是什么？

```
public class MyEquality : IEqualityComparer<MyType>
{
    //My Equals(T x, T y) always looks like this
    public bool Equals(MyType x, MyType y)
    {
        return this.GetHashCode(x).Equals(this.GetHashCode(y));
    }

    public int GetHashCode(MyType obj)
    {
        //assume MyType has a non-nullable member called ID
        return obj.ID.GetHashCode();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:42:33.853

是的。哈希码可能会发生冲突，事实上，它们会与多种类型发生冲突。它们的存在只是为了确保哈希表中值的均匀分布，它们对于确定值的相等性没有用。[Eric Lippert](http://blogs.msdn.com/b/ericlippert/archive/2010/03/22/socks-birthdays-and-hash-collisions.aspx)对此也有看法（还有[另一个](http://blogs.msdn.com/b/ericlippert/archive/2011/07/12/what-curious-property-does-this-string-have.aspx)）：

> 使用 32 位哈希码作为“唯一”标识符是一个非常糟糕的主意。哈希值本身不是随机的，但如果它们分布良好，那么它们也可能是我们的目的。你可能会想“嗯，当然，显然它们并不是真正唯一的，因为有超过 40 亿个可能的值，但只有 40 亿个哈希码可用。但是有这么多可能的哈希值，很有可能我会得到我的哈希值的唯一值”。但机会真的那么好吗？9300 个对象并不多，1% 是相当高的碰撞概率。

话虽如此，如果您的 ID 是您在确定相等性时唯一关心的事情，那么比较该 ID 就足够了。但不是它的哈希码，因为哈希码只说

> *a* .GetHashCode() ≠ *b* .GetHashCode() → *a* ≠ *b*

请注意，没有提及哈希码相同的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:43:02.913

是的，有：如果`ID`的哈希码不适合`int`，现在或将来的某个时间，当具有相同哈希码的不相等对象开始评估为相等时，您会感到非常惊讶。如果以后有人决定`ID`应该是`long`or `Guid`，`MyEquality`将继续愉快地编译，但它的行为将是完全不正确的。

在一个不相关的注释中，如果`MyType`是一个类，您可能想要在`x`或是`y`时做一些防止崩溃的事情`null`：尽管合同`IEqualityComparer<T>`没有明确要求它（不像那样），但在情况下`object.Equals`处理`null`s是个好主意`IEqualityComparer<T>.Equals`当您搜索可能包含`null`对象的容器时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:44:46.367

当然。您可能有一个对象，您只关心一个或多个属性是否相同，以便出于您的目的将它们视为相等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:45:36.450

如果您要比较 List list1 和 List list2，如果它们有一些“共同”元素，例如 list1={"apparent", "obvious"} 和 list2={"aPPARENT", "oBVIOUS"}

如果您对股权的定义如下：

*   第一个字符必须相等，区分大小写
*   余数字符不能相等（区分大小写）

您必须在 IEqualityComparer 中定义自己的逻辑。

此外，在 LINQ 中，所有**Where、Any、Except、Intersect**等子句可能需要额外的 IEqualityComparer 对象来挂钩您的自定义逻辑。

# asp.net-mvc-4 - 如何在 SPA HotTowel 模板中设置登录视图（用户认证）？

> ID：16064430
> 
> 赞同：7
> 
> 时间：2013-04-17T15:41:12.737
> 
> 标签：asp.net-mvc-4, breeze, single-page-application, durandal, hottowel

VS2012 MVC4 中的一些单页应用程序 (SPA) 模板具有内置身份验证。HotTowel SPA 模板没有。

在 SPA HotTowel 中实现用户身份验证（登录屏幕）的正确方法是什么？HotTowel 使用了 Durandal JS，所以我想问题是如何使用 Durandal JS 实现用户身份验证

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-23T07:44:32.610

我创建了一个包含身份验证和授权的入门模板

也许可以帮助...

Github => [https://github.com/yagopv/durandalauth](https://github.com/yagopv/durandalauth)

示例站点 => [https://durandalauth.azurewebsites.net/](https://durandalauth.azurewebsites.net/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T13:47:31.220

看起来 Durandal JS Google 小组有一些答案，但没有具体的示例代码。

[使用 Durandal 进行身份验证](https://groups.google.com/forum/#!searchin/durandaljs/user%2420authentication/durandaljs/mtzMnEXzfvg/JPHWz2ZQHRYJ)

[希望向 SPA 示例添加身份验证，但将其保留为 SPA](https://groups.google.com/forum/#!searchin/durandaljs/user%2420authentication/durandaljs/0RkoNHMKjJA/6DKDqcdEgY0J)

Mauro Servienti 的想法：

我的后端公开了一个服务（在我的例子中是 WebAPI），其中有一个操作 getCurrentUser。

因此，在我的 main.js 中，在 app.Start() 中，然后在调用 app.setRoot 之前回调shell 否则我将 root 设置为登录 shell。

问题是什么？从客户端的角度来看，身份验证只是一个“标志”，上面写着：好的，我知道你是谁。您可以利用 FormsAuthentication 的强大功能并接受它，然后公开一个 WebAPI GET 操作，让您检索有关当前登录用户的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:19:41.660

正如 John Papa 所说，HotTowel 只是一个模板 :)。事实上，在他在 Pluralsight 中关于 SPA 的第二门课程中，他从头开始创建应用程序。

从 SPA 模板启动您的应用程序然后添加 HotTowel 的其余库（Durandal、Breeze 等）还不够吗？

您可以在此处查看比较[asp.net spa 模板](http://www.johnpapa.net/asp-net-spa-templates/)

# json - ASP.NET Web API Put 请求无法在控制器中找到方法

> ID：16064438
> 
> 赞同：0
> 
> 时间：2013-04-17T15:41:32.750
> 
> 标签：json, asp.net-mvc, asp.net-web-api

我正在尝试使用 Web api 服务更新专辑的值，但是当我使用 put 请求时，它会到达控制器（有时），创建上下文，但是然后找不到/运行我拥有的 PUT 方法.

我正在向 Web API 发送格式为 JSON 的类专辑（如下）。

```
public class Album
{
    [ScaffoldColumn(false)]
    public int Id { get; set; }

    [Required]
    public string Title { get; set; }

    public string Description { get; set; }

    [Required]
    public string Artist { get; set; }

    public string Genre { get; set; }

    [Required]
    public int Year { get; set; }

    [Display(Name="No. Tracks")]
    public int NumberOfTracks { get; set; }
} 
```

这是应该接收所有内容的 WebAPI 控制器

```
public class AlbumsController : ApiController
{
    private AlbumsContext db = new AlbumsContext();

    // GET api/Albums

    public IQueryable<Album> Get()
    {
        return (from a in db.Albums select a);
    }

    public IQueryable<Album> Get(int skip, int page)
    {
        var ret = (from a in db.Albums select a);
        ret = ret.OrderBy(a => a.Title);
        ret = ret.Skip(skip);
        ret = ret.Take(page);
        return ret;
    }

    // GET api/Albums/5
    public Album Get(int id)
    {
        return db.Albums.FirstOrDefault(a => a.Id == id);
    }

    // PUT api/Albums
    [HttpPut]
    public HttpResponseMessage Put([FromBody]Album album)
    {
        if (!ModelState.IsValid)
        {
            return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
        }

        db.Entry(album).State = EntityState.Modified;

        try
        {
            db.SaveChanges();
        }
        catch (DbUpdateConcurrencyException ex)
        {
            return Request.CreateErrorResponse(HttpStatusCode.NotFound, ex);
        }

        return Request.CreateResponse(HttpStatusCode.OK);
    }

    // POST api/Albums
    public HttpResponseMessage Post(Album album)
    {
        if (ModelState.IsValid)
        {
            db.Albums.Add(album);
            db.SaveChanges();

            HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, album);
            response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = album.Id }));
            return response;
        }
        else
        {
            return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
        }
    }

    // DELETE api/Albums/5
    public HttpResponseMessage Delete(int id)
    {
        Album album = db.Albums.Find(id);
        if (album == null)
        {
            return Request.CreateResponse(HttpStatusCode.NotFound);
        }

        db.Albums.Remove(album);

        try
        {
            db.SaveChanges();
        }
        catch (DbUpdateConcurrencyException ex)
        {
            return Request.CreateErrorResponse(HttpStatusCode.NotFound, ex);
        }

        return Request.CreateResponse(HttpStatusCode.OK, album);
    }

    protected override void Dispose(bool disposing)
    {
        db.Dispose();
        base.Dispose(disposing);
    }
} 
```

这是发出 PUT 请求的服务器控制器方法

```
[HttpPut]
public ActionResult Edit(Album album, HttpPostedFileBase Image1, HttpPostedFileBase Image2, HttpPostedFileBase Image3, int AlbumID, int RemoveID = 0)
{
    string AlbumApiUri = "http://localhost:58431/api/Albums";

    HttpRequestMessage request = new HttpRequestMessage();

    request.RequestUri = new Uri(AlbumApiUri);

    request.Method = HttpMethod.Put;

    MediaTypeFormatter jsonFormatter = new JsonMediaTypeFormatter();

    request.Content = new ObjectContent<Album>(album, jsonFormatter);

    request.Content.Headers.ContentType = System.Net.Http.Headers.MediaTypeHeaderValue.Parse("application/json");

    album.Id = AlbumID;

    HttpClient client = new HttpClient();

    var response = client.SendAsync(request).Result;

    if (response.IsSuccessStatusCode)
    {
        bool a = true;
    }
    else
    {
        bool b = true;
    }

    return RedirectToAction("Details", new { ID = AlbumID });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:29:50.597

事实证明我几乎是个白痴，这引发问题的主要原因是我没有将 Album 标记为 DataContract 并包含 DataMember 字段。希望这会教任何犯同样错误的人！

# c# - 如何处理 Web API 中的可选查询字符串参数

> ID：16064439
> 
> 赞同：3
> 
> 时间：2013-04-17T15:41:35.077
> 
> 标签：c#, c#-4.0, asp.net-mvc-4, asp.net-web-api

我正在编写一个 Web API，我希望了解处理可选查询字符串参数的最佳方法是什么。

我有一个定义如下的方法：

```
 [HttpPost]
    public HttpResponseMessage ResetPassword(User user)
    {
        var queryVars = Request.RequestUri.ParseQueryString();
        int createdBy = Convert.ToInt32(queryVars["createdby"]);
        var appId = Convert.ToInt32(queryVars["appid"]);
        var timeoutInMinutes = Convert.ToInt32(queryVars["timeout"]);

        _userService.ResetPassword(user, createdBy, appId, timeoutInMinutes);
        return new HttpResponseMessage(HttpStatusCode.OK);
    } 
```

我可以通过在帖子正文中提供用户对象并可选地提供任何其他查询字符串值来调用它，但是当我有一个随机参数的一次性案例时，这是解析最好的方法吗?
如果我有同样的场景，但有 15 个可选参数（可能是极端情况）怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:44:12.410

您应该使用包含所有可能参数的视图模型。然后让您的 API 方法将此视图模型作为参数。并且永远不要在您的操作中触及原始查询字符串：

```
public class UserViewModel
{
    public string CreatedBy { get; set; }
    public string AppId { get; set; }
    public int? TimeoutInMinutes { get; set; }

    ... other possible parameters
} 
```

然后在您的操作中，您可以将视图模型映射到域模型：

```
[HttpPost]
public HttpResponseMessage ResetPassword(UserViewModel userModel)
{
    User user = Mapper.Map<UserViewModel, User>(userViewModel);
    _userService.ResetPassword(user, userModel.CreatedBy, userModel.AppId, userModel.TimeoutInMinutes);
    return new HttpResponseMessage(HttpStatusCode.OK);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:44:52.180

您将使用 ViewModel，它基本上是封装在单个对象中的客户端和服务器之间传递的所有参数的集合。（这是 MVVM 中的虚拟机）

# php - 在 symfony 1.4 中按排序顺序检索相对表数据

> ID：16064448
> 
> 赞同：0
> 
> 时间：2013-04-17T15:41:54.493
> 
> 标签：php, doctrine, foreign-keys, symfony-1.4

我有一个名为 sort_order 的列的相对表。当我从关联表中检索值时，我希望它们按此列而不是 id 排序。

**索引成功：**

```
<?php foreach ($videos as $video): ?>
    <?php $videoAssets = $video->getVideoHubAssets(); ?>
... 
```

我想做类似的事情

```
<?php $videoAssets = $video->getVideoHubAssets()->orderBy("sort_order ASC"); ?> 
```

但这不正确。我必须先在行动中解决这个问题吗？

**行动**

```
$this->videos = Doctrine::getTable('videosHub')->getAllVideos(); 
```

**表类**

```
public function getAllVideos(){
  return $this->createQuery()->setPublishStatus()->orderBy('featured DESC, title')->execute();
  } 
```

操作查询是从与资产表有关系的单独表中提取的。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:57:50.613

您可以为您的视频类创建一个新方法。

例如 ：

**索引成功：**

```
<?php foreach ($videos as $video): ?>
    <?php $videoAssets = $video->getOrderedVideoHubAssets(); ?>
... 
```

**班级**

```
public function getOrderedVideoHubAssets(){
    return Doctrine_Core::getTable('VideoHubAsset')->createQuery('a')
           ->leftJoin('a.Video v')
           ->where('a.video_id = ?', $this->getId())
           ->orderBy('a.sort_order ASC')
           ->execute();
} 
```

# java - 动态插入数组的大小并将旧值保留在数组中

> ID：16064449
> 
> 赞同：0
> 
> 时间：2013-04-17T15:41:56.697
> 
> 标签：java, arrays, swing

是否有可能我可以动态增加数组的大小并将旧值保留在数组中。我们不知道数组的大小，因为用户一直在插入值，我们必须在每次输入后更改数组长度。因此，如果有人有比我想要实现的更好的选择，我将不胜感激。

```
private static String[] hotelName;
private static int lent=1;

public FiletoArray() 
{
     hotelName=new String[lent];
     initComponents();
}

private void jButton6ActionPerformed(java.awt.event.ActionEvent evt) {                                         
      // TODO add your handling code here:
      insertHotel(this.jTextField1.getText());
      this.jLabel3.setText("" + lent);
      lent=lent+1;
      for(int a=0;a<lent;a++)
      {
          this.jTextArea1.setText(hotelName[a] + "\n");
      }
}                                        

public static void insertHotel(String hotelValue)
{ 
       hotelName[lent-1]=hotelValue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:43:49.340

如果可能，请使用[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)，它会动态增长以适应其数据。如果需要使用数组，则需要分配一个新的（更大的）数组，然后使用[System.arraycopy](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html)复制旧数组的内容。

# matlab - 重新定位颜色条或子图

> ID：16064451
> 
> 赞同：4
> 
> 时间：2013-04-17T15:41:57.397
> 
> 标签：matlab, matlab-figure

我试图让一个颜色条驻留在一系列四个子图的右侧。我正在使用此代码，但该条与最后一张图像相交，如图所示![问题](https://i.stack.imgur.com/dC1iX.png)

```
ax(1)=subplot(1,3,1);imagesc(stats.mean,[0 1]);colormap(jet(256)); title('mean');
ax(2)=subplot(1,3,2);imagesc(stats.median,[0 1]);colormap(jet(256)); title('median');
ax(3)=subplot(1,3,3);imagesc(stats.std,[0 1]);colormap(jet(256)); title('std');
h=colorbar;
set(h, 'Position', [.8314 .11 .0581 .8150]);
for i=1:3
pos=get(ax(i), 'Position');
set(ax(i), 'Position', [pos(1) pos(2) 0.85*pos(3) pos(4)]);
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T16:44:39.703

我建议采用不同的方法。

假设您正在绘制以下内容：

```
ax(1) = subplot(1,3,1);imagesc(rand(100,1),[0 1]);
ax(2) = subplot(1,3,2);imagesc(rand(100,1),[0 1]);
ax(3) = subplot(1,3,3);imagesc(rand(100,1),[0 1]); 
```

我建议简单地重置第三个子图的尺寸，它会受到影响`colorbar`并拉伸图形以包含添加的颜色条。

```
% Get positions of all the subplot
posa = get(ax,'position');
h    = colorbar;

% Reset ax(3) position to before colorbar
set(ax(3),'position',posa{3})

% Set everything to units pixels (avoids dynamic reposition)
set([ax h],'units','pix')

% Widen figure by a factor of 1.1 (tweak it for needs)
posf = get(gcf,'position');
set(gcf,'position',[posf(1:2) posf(3)*1.1 posf(4)]) 
```

**结果**

![在此处输入图像描述](https://i.stack.imgur.com/DWU0s.png)

# css - 我可以用LESS与两个父母中的一个嵌套吗

> ID：16064452
> 
> 赞同：0
> 
> 时间：2013-04-17T15:41:57.493
> 
> 标签：css, input, nested, textarea, less

我有这个 LESS 设置。我想知道，有没有选择为两个父母之一筑巢？

```
 input[type="text"].text_field,
 textarea.text_field {
    // style for both

    textarea + & {
      // style for only text area
    }
  } 
```

我需要添加一些其他样式`textarea`，我不想让它超出主要规则。那么，这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T15:49:23.587

如果您想让它们保持相同的规则，您可以尝试这样的事情：

```
.text_field {
  color: black;

  input& {
    padding: 5px;
  }

  textarea& {
    padding: 5px;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:48:28.093

```
 input[type="text"].text_field, textarea.text_field {
    // style for both
    font-size: 15px;
    padding: 2px 5px;
 }
 textarea.text_field {
    // style for only text area, you can use !important if you want to use different style, and you used it in input[type="text"].text_field, textarea.text_field
    font-size: 13px !impotrant;
 } 
```

嵌套示例：

```
 ul {
   // style
   li {
     // style
     a:link, a:hover, a:visited {
       // style: color, font-size, etc.
     }
     a:hover {
       text-decoration: underline;
     }
   }
 } 
```

# java - Android ksoap2 http请求失败

> ID：16064453
> 
> 赞同：2
> 
> 时间：2013-04-17T15:41:59.037
> 
> 标签：java, android, web-services, soap, ksoap

我今天写了我自己的网络服务，我想用我的安卓智能手机访问这个服务器。我按照本教程做到了这一点：http: [//javatutorialspoint.blogspot.nl/2012/02/simple-java-web-service-client-using.html](http://javatutorialspoint.blogspot.nl/2012/02/simple-java-web-service-client-using.html)

它似乎有效，因为当我调用此页面时我得到了正确的结果：localhost:8080/WebServiceV2/services/Calculator?wsdl

但是当我尝试与我的智能手机连接时，应用程序会抛出异常（HTTP 请求失败，HTTP 状态：500）

```
private static String SOAP_ACTION = "http://apptomap.de/add";
private static String NAMESPACE = "http://apptomap.de";
private static String METHOD_NAME = "add";
private static String URL = "http://192.168.1.34:8080/WebServiceV2/services/Calculator?wsdl";

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);          
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.setOutputSoapObject(request);

HttpTransportSE ht = new HttpTransportSE(URL);
ht.call(SOAP_ACTION, envelope);
final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
final String str = response.toString(); 
```

这是我连接 Web 服务的代码，我在这一行得到异常 -> ht.call(SOAP_ACTION, envelope);

这是完全相同的问题： [Soap Throws java.io.IOException: HTTP request failed, HTTP status: 500](https://stackoverflow.com/questions/15809391/soap-throws-java-io-ioexception-http-request-failed-http-status-500)

有没有人有解决这个问题的想法？

编辑：我添加了连接互联网的权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T16:24:50.600

从 www.wireshark.org/download.html 在您的 Web 服务器上下载并安装协议分析器 wireshark。

启动 wireshark，过滤 http 或你的 web 服务器响应的 tcp 端口。

现在将您的 android 应用程序运行到 Web 服务。

由于在wireshark 上正在进行探听，您将能够看到ksoap 的故障字符串并进行相应的调试。

我遇到了日期问题。没有报告故障代码，但从故障字符串中我可以看到“服务器无法读取请求；XML 文档中有错误。字符串 12-10-2013' 不是有效的 Allxsd 值”

以这种方式进行调试，您将知道您的应用程序正在发送哪些错误并据此进行调试。

对于那些使用 linux web 服务器的人，请学习如何使用 tcpdump。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T17:37:56.100

我收到这个错误的 web 方法接受来自运行 CallSoap java 代码的 Android 应用程序的两个参数，目标是写入本地计算机上托管的 SQL Server 2008 数据库。

这可能不适用于您正在测试的教程；但是，向数据库添加新用户登录（即安全权限 - NT AUTHORITY\Network Service）会有所帮助。

此外，将包含太多字符的字符串作为参数发送到 Web 方法时发生错误。例如：“01010101010110101010101010101010101010”会抛出 java 异常错误，但“0101010”不会。

我猜对能够作为参数或数据类型不匹配发送的字节数的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-23T09:58:21.703

用 SoapFault try/catch 包围通话

```
try {
    ht.call(SOAP_ACTION, envelope);
} catch (SoapFault soapFault) { 
```

soapFault 将包含从服务器返回的错误消息，应该可以帮助您找出问题所在。

# python - Readlines 在 for 循环中输出所有句子

> ID：16064458
> 
> 赞同：0
> 
> 时间：2013-04-17T15:42:15.447
> 
> 标签：python, counter, readline

我正在尝试以以下格式在文件中输出句子：

第 1 行：第一句，
第 2 行：第二句，
第 3 行：第三句，

等等

然而我输入的代码是这样回馈的：

第 1 行：所有句子，
第 2 行：所有句子，

等等

我不知道 readline 是否有问题，或者是否在 for 循环中，有人可以帮忙吗？我已经包含了下面的脚本

```
import re, sys

f = open('findallEX.txt', 'r')

lines = f.readlines()

for l in lines:
    sys.stdout.write('line %s: %s' %(ii, lines))

    ii = ii + 1

print l 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:47:12.560

对于它的价值，你的代码可以写得更简单：

```
with open('findallEX.txt') as f:
     for ii,line in enumerate(f):
         sys.stdout.write('line %s: %s' %(ii,line)) 
```

该`with`语句是执行以下操作的一种奇特方式¹：

```
f = open(...)
#stuff inside with block
f.close() 
```

另外，请注意，您可以直接迭代文件对象。 `readlines()`已弃用（并在 python3.x 中删除）。最后，python 提供了`enumerate`在迭代时保持计数器的功能。如果您在实际定义它之前复制/粘贴它，这也将删除`NameError`您的代码所具有的。`ii`

* * *

^(¹其实，`with`做的远不止这些。即使在代码块引发异常的情况下，它也可以确保您的文件正确关闭。有关更正确的翻译，请参阅 Martijn 的评论。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:47:57.233

将您的代码更改为此。

```
with open('findallEX.txt') as f:
    for line_num, line_text in enumerate(f):
        sys.stdout.write('line %d: %s' % (line_num, line_text)) 
```

* * *

如果您不确定上面使用的方法：

*   `with`：[http ://effbot.org/zone/python-with-statement.htm](http://effbot.org/zone/python-with-statement.htm)
*   `enumerate`：[http ://docs.python.org/2/library/functions.html#enumerate](http://docs.python.org/2/library/functions.html#enumerate)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:44:52.697

将循环更改为：

```
for l in lines:
    sys.stdout.write('line %s: %s' %(ii, l))
    ii = ii + 1 
```

变量“lines”是一个行列表，您可以使用“for l in lines”来遍历其中的每一行。变量“l”表示单行。

# java - java indexOf 查找 aaa 并替换为 b

> ID：16064463
> 
> 赞同：1
> 
> 时间：2013-04-17T15:42:26.193
> 
> 标签：java, indexof

我正在尝试找到“aaa”的模式并将其替换为“b”，例如使用 indexOf 但它无法正常工作：

```
private boolean matchCase;
private boolean wholeWords;

private void containsSearchValue(String currentValue, List<MnvrFindContainer> foundList, String textToFind, int i, int j)
{

    if .....

    else if (matchCase && wholeWords && currentValue.contains(textToFind))
    {

        String s = currentValue;
        String pattern = textToFind;
        int index = 0;
        int lengthOfPattern = 0;
        do
        {
            index = s.indexOf(pattern, index + lengthOfPattern);
            lengthOfPattern = pattern.length();

            MnvrFindContainer fContainer = new MnvrFindContainer();
            fContainer.row = i;
            fContainer.column = j;
            foundList.add(fContainer);

        }
        while (index > -1);

    }          
} 
```

# c# - 是否可以在 Windows Phone 7/8 上使用 protobuf-net 序列化/反序列化不可变类型？

> ID：16064466
> 
> 赞同：3
> 
> 时间：2013-04-17T15:42:35.840
> 
> 标签：c#, windows-phone-7, windows-phone, immutability, protobuf-net

是否可以在 Windows Phone 7/8 上使用 protobuf-net 序列化/反序列化类型？
我试过下面的代码，似乎不支持构造函数跳过（即 UseConstructor = false）所以我创建了一个无参数构造函数，但反序列化失败，“尝试访问该方法失败：Wp7Tests.ImmutablePoint.set_X(System.Double )"

```
public class ImmutablePoint
{
    public double X { get; private set; }
    public double Y { get; private set; }
    public ImmutablePoint() {}

    public ImmutablePoint(double x, double y)
    {
        X = x;
        Y = y;
    }
}
public sub Test()
{
        ImmutablePoint pt = new ImmutablePoint(1, 2);
        var model = TypeModel.Create();
        var ptType = model.Add(typeof(ImmutablePoint), false);
        ptType.AddField(1, "X");
        ptType.AddField(2, "Y");
        IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication();

        using (var stream1 = new IsolatedStorageFileStream("test.bin", FileMode.Create, store))
        {
            try
            {
                model.Serialize(stream1, pt);
            }
            catch (Exception e)
            {                    
                Debugger.Break();
            }
        }
        const double EPSILON = 0.001;
        using (var stream1 = new IsolatedStorageFileStream("test.bin", FileMode.Open, store))
        {
            try
            {
                ImmutablePoint ptDeSer = (ImmutablePoint) model.Deserialize(stream1,null, typeof(ImmutablePoint));
                Debug.Assert(Math.Abs(pt.X - ptDeSer.X) < EPSILON);
                Debug.Assert(Math.Abs(pt.Y - ptDeSer.Y) < EPSILON);
            }
            catch (Exception e)
            {
                Debugger.Break();
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T06:34:36.057

您可以使用*代理*；这里我用属性装饰它，但也可以手动配置：

```
[ProtoContract]
public class MutablePoint {
    [ProtoMember(1)] public double X { get; set; }
    [ProtoMember(2)] public double Y { get; set; }

    public static implicit operator MutablePoint(ImmutablePoint value) {
        return value == null ? null : new MutablePoint {X=value.X, Y=value.Y};
    }
    public static implicit operator ImmutablePoint(MutablePoint value) {
        return value == null ? null : new ImmutablePoint(value.X, value.Y);
    }
} 
```

然后告诉模型在看到时使用它`ImmutablePoint`：

```
var model = TypeModel.Create();
model.Add(typeof(MutablePoint), true);
model.Add(typeof(ImmutablePoint), false).SetSurrogate(typeof(MutablePoint)); 
```

序列化程序将根据需要使用运算符在它们之间切换。序列化程序将使用任一`implicit`或`explicit`自定义转换运算符。

编辑：像这样反序列化

```
ImmutablePoint ptDeSer = (ImmutablePoint)model.Deserialize(stream1, null, typeof(ImmutablePoint)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T21:13:54.837

这在 Windows Phone 上是不可能的。反序列化程序无法访问设置器，并且使用反射访问私有成员会导致 Windows Phone 上的 MemberAccessException。我能想到让这样的事情起作用的唯一方法是创建一个用于序列化的包装器，然后它可以调用 ImmutablePoint 的构造函数。这有点混乱，因为包装类需要 X 和 Y 的公共读写属性。

您还可以查看使用 InternalsVisibleTo 属性来允许序列化程序访问属性（假设您将设置器从私有更改为内部）。不过还是乱七八糟...

# c# - 如何选择使用哪个版本的特定系统类？

> ID：16064474
> 
> 赞同：4
> 
> 时间：2013-04-17T15:42:53.607
> 
> 标签：c#, .net

最近我了解到，虽然 NET 2.0 版本`StringBuilder`针对`ToString()`NET 4.0 版本进行了优化，但针对`Append()`. 这让我想知道——我可以选择在每种情况下使用哪个版本的系统类吗？

（这个问题不是关于`StringBuilder`，而是关于任何系统类。`StringBuilder`只是一个例子。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:04:38.753

你不能。

通常系统类（或任何第三方库）可以在幕后合作，使用私有数据进行通信（即那些标记为私有或内部的项目）。

如果您尝试将错误的版本一起使用，他们可能无法找到他们期望的私有数据，并且会发生意外行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:11:51.637

你可以试试这样的

```
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
       <dependentAssembly>
         <assemblyIdentity name="myAssembly"
                           publicKeyToken="32ab4ba45e0a69a1"
                           culture="en-us" />
         <!-- Assembly versions can be redirected in application, publisher policy, or machine configuration files. -->
         <bindingRedirect oldVersion="1.0.0.0"
                          newVersion="2.0.0.0"/>
       </dependentAssembly>
       <dependentAssembly>
         <assemblyIdentity name="mySecondAssembly"
                           publicKeyToken="32ab4ba45e0a69a1"
                           culture="en-us" />
          <!-- Publisher policy can be set only in the application configuration file. -->
          <publisherPolicy apply="no">
       </dependentAssembly>
      </assemblyBinding>
   </runtime>
</configuration> 
```

# c# - 使用 C# 在 asp.net 中将动态数据插入到 sql server 中

> ID：16064479
> 
> 赞同：0
> 
> 时间：2013-04-17T15:43:10.953
> 
> 标签：c#, asp.net, loops, sql-insert

这可能是格式问题。如何将动态数据插入 SQL 服务器？

**插入物：**

```
 //Orders
int howMan = DropDownList1.SelectedIndex;
int i = 0;
while (i < howMan)
{
    string insertNewOrder = "InSERT INTO tblOrders(orderName, orderQuabt, orderPricePer, orderTotal, orderInput, orderCustName)";
    insertNewOrder += "VALUES(@ordernumber, @orderQuant, @orderPrice,@orderTotal, @orderCust, )";

    SqlCommand sql0rder = new SqlCommand(insertNewOrder, hookup);
    sql0rder.Parameters.Add("@ordernumber", Item.Text); 
    sql0rder.Parameters.Add("@orderQuant", Item.Text);
    sql0rder.Parameters.Add("@orderPrice", Item.Text);
    sql0rder.Parameters.Add("@orderTotal", Item.Text);
    sql0rder.Parameters.Add("@orderInput", Item.Text);
    sql0rder.Parameters.Add("@orderCust", Item.Text);
    hookup.Open();
    sql0rder.ExecuteNonQuery();
    hookup.Close();
    i++;
} 
```

以下是动态文本框：

```
 int howMan = DropDownList1.SelectedIndex;
    int i;
    Control c;

    for (i = 0; i < howMan; i++ )
    {
        c = this.ParseControl("<table><tr><th>OrderNumber</th><td><asp:TextBox id='orderNumber" + i + "' runat='server' CssClass='input'/></td></tr><tr><th>What did they order?</th><td><asp:TextBox id='product" + i + "' runat='server' CssClass='input'/> </td> </tr>   <tr><th>Quantity</th><td><asp:TextBox id='Quant" + i + "' runat='server' CssClass='input'/> </td></tr> <tr><th>Price</th><td><asp:TextBox id='price" + i + "' runat='server' CssClass='input'/></td>  </tr><tr><th>Total Cost Javascript</th><td><asp:Label ID='cost"+i+"' runat='server' Text=''></asp:Label></td> </tr> </table><br><br>");
        TextBoxesHere.Controls.Add(c);  
    } 
```

在插入中，我尝试了类似 Item+i.Text 或 Item[i].Text 的东西。我的心态是你在 PHP 或 Javascript 中看到的。那么我该怎么做呢？

**编辑：** 我不得不从这个问题上继续前进，并使用一种不涉及循环的方式。然而，我改变的主要内容是动态文本框。我决定只使用可见性，而不是被创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:11:45.847

您确定不想使用实体框架吗？

添加 -> 新元素 -> 数据 -> ADO.NET 实体数据模型

打开edmx，右键，从数据库刷新

我不是数据库专家，但 EntityFramework 对我来说似乎比传统的 SqlCommand/SqlAdaptor 方式更好（如果我错了，请随时纠正我/告诉我最好的方式）

# asp.net-mvc - asp.net mvc 4 通过按钮从控制器调用方法

> ID：16064481
> 
> 赞同：6
> 
> 时间：2013-04-17T15:43:16.107
> 
> 标签：asp.net-mvc, button, asp.net-mvc-4, controllers

在我的控制器中我有类 AccountController 并且在我有这个方法

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult LogOff()
{
    WebSecurity.Logout();
    return RedirectToAction("Index", "Home");
} 
```

在我的视图中，我有带有正文的 cshtml 页面和这部分代码

```
<form class="float_left" action="Controllers/AccountController" method="post">
    <button class="btn btn-inverse" title="Log out" type="submit">Log   Off</button>
</form> 
```

这不起作用，有人知道什么是问题或其他一些简单的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T15:48:09.180

该`action`属性指向错误的控制器操作。您的控制器操作被调用`LogOff`而不是`AccountController`. 您永远不应该手动构建`<form>`这样的元素，而始终使用为此目的设计的 html 助手：

```
@using (Html.BeginForm("LogOff", "Account"))
{
    <button class="btn btn-inverse" title="Log out" type="submit">Log Off</button>
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T15:51:30.830

您在这里没有引用操作方法：

```
action="Controllers/AccountController" 
```

对于初学者，您无需指定`Controllers/`，因为框架会为您找到控制器。实际上，客户端/URL/等不知道控制器“文件夹”的概念。你需要给它的是一条通往具体行动方法的“路线”。

由于 MVC 框架知道控制器在哪里，因此您只需告诉它哪个控制器以及该控制器上的哪个操作方法：

```
action="Account/LogOff" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:48:49.867

表单动作可能应该是`/Account/LogOff`

```
< form class="float_left" action="/Account/Logoff" method="post">
    <button class="btn btn-inverse" title="Log out" type="submit">Log Off</button>
</form> 
```

尝试将其放入`.cshtml`文件中：

```
@using (Html.BeginForm("LogOff", "Account"))
{
    <button class="btn btn-inverse" title="Log out" type="submit">Log Off</button>
} 
```

# c# - 使用 HierarchicalDataTemplate 将 ContextMenu 添加到 TreeView

> ID：16064482
> 
> 赞同：0
> 
> 时间：2013-04-17T15:43:18.590
> 
> 标签：c#, wpf, mvvm, treeview, contextmenu

我想将上下文菜单添加到 TreeView。我可以通过以下代码做到这一点：

```
<TreeView x:Name="treeView" Grid.Row="1" Grid.Column="0" ItemsSource="{Binding Classes}"
              commandBehaviors:MouseDoubleClick.Command="{Binding TreeMouseDoubleClick}"
              commandBehaviors:MouseDoubleClick.CommandParameter="{Binding ElementName=treeView, Path=SelectedItem}"
              Margin="3,3,3,3" ContextMenu="{Binding ContextMenu, Mode=OneWay}">
... 
```

我的 TreeView 只有两个级别。班级和学生。

我现在的问题是，我的 TreeView 有一个 HierarchicalDataTemplate，如果右键单击在类节点上，我只想显示 contextMenu

这看起来像

```
<HierarchicalDataTemplate DataType="{x:Type Entity:Class}" ItemsSource="{Binding Pupils}">
                <Label Content="{Binding Name}"/>
            </HierarchicalDataTemplate>
            <DataTemplate DataType="{x:Type Entity:Pupil}">
                <Label Margin="0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Label Grid.Column="0" Content="{Binding Lastname}" Margin="0"/>
                        <Label Grid.Column="1" Content="{Binding Firstname}" Margin="0"/>
                    </Grid>
                </Label>
            </DataTemplate> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:59:57.520

我建议添加一个视图模型来包装您的 Class 类型，并在其上为 ContextMenu 创建一个属性。实例化这些视图模型以包装每个 Class 类型，并将 HierarchicalDataTemplate 中的 DataType 更改为新视图模型的类型。然后，您的 HierarchicalDataTemplate 中的标签可以绑定到 ContextMenu 属性，并且您可以从 TreeView 中删除 ContextMenu 绑定。它将显示在 Class 对象上，但不会显示在 Pupil 对象上。

# android - ListView 项目定位

> ID：16064484
> 
> 赞同：0
> 
> 时间：2013-04-17T15:43:24.797
> 
> 标签：android, android-layout, listview, listviewitem

我有一个列表`GraphItems`，我想使用 a 在屏幕上显示`ListView`（我不确定这是否是最好的方法）但是行本身应该根据`GraphItem.posX`和定位`GraphItem.posY`

我制作了一个自定义适配器来处理数据并设置视图的位置，使用行`row.setX`和`row.setY`行在哪里，`convertView`但问题是：

![在此处输入图像描述](https://i.stack.imgur.com/UOIrQ.png)![在此处输入图像描述](https://i.stack.imgur.com/2EmNo.png)

点击区域仍保持在“旧”位置。

我已经尝试使用`setLayoutParams`来设置边距，但我得到了一个像`android.widget.AbsListView$LayoutParams cannot be cast to android.widget.RelativeLayout$LayoutParams`

我愿意接受有关如何以更好的方式做到这一点的建议，也许与`ListView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:53:51.663

设置`LayoutParams`应该是正确的技术。您的强制转换异常可以通过使用来解决，`RelativeLayout.LayoutParams`而不是使用 just `LayoutParams`。

另外，你用什么来处理点击，`onItemClickListener()`？

# php - $query = sprintf 不更新 MySQL 数据库

> ID：16064485
> 
> 赞同：0
> 
> 时间：2013-04-17T15:43:32.547
> 
> 标签：php, mysql

我正在尝试创建一个忘记密码的脚本，但是我有点赶上了。

问题是，`$query = sprintf("UPDATE`用户`SET`密码`= '%s' WHERE`电子邮件`= '$forgotpassword'", mysql_real_escape_string($newpassword));`没有更新“密码”字段中的数据。

'forgot' 值会根据需要进行更新。再一次，我知道脚本正在连接到数据库，因为忘记字段正在根据需要更新为“1”。

继承人的代码：

```
//Generate a RANDOM MD5 Hash for a password
$random_password=md5(uniqid(rand()));

//Take the first 8 digits and use them as the password we intend to email the user
$emailpassword=substr($random_password, 0, 8);

//Encrypt MD5 format for the database
$newpassword = md5($emailpassword);

    // Make a safe query
    $query = sprintf("UPDATE `users` SET `password` = '%s' 
                      WHERE `email` = '$forgotpassword'",
                mysql_real_escape_string($newpassword));

    $query = sprintf("UPDATE `users` SET `forgot` = '1' 
                      WHERE `email` = '$forgotpassword'");

                mysql_query($query)or die('Could not update members: ' . mysql_error()); 
```

我知道这个版本的 MYSQL 已经过时了，但它是这个项目必须使用的。只得和我一起去那个。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:46:41.943

您不是`mysql_query($query)`在第一次更新时打电话，而是在第二次更新。

```
// Make a safe query
$query = sprintf("UPDATE `users` SET `password` = '%s' 
                  WHERE `email` = '$forgotpassword'",
            mysql_real_escape_string($newpassword));

// NEED TO CALL mysql_query($query); HERE

$query = sprintf("UPDATE `users` SET `forgot` = '1' 
                  WHERE `email` = '$forgotpassword'");

mysql_query($query)or die('Could not update members: ' . mysql_error()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:46:42.830

您正在编写两个查询，但只执行一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:48:18.417

也许密码没有更新，因为 WHERE 子句不匹配任何行......你确定你已经在 email 中设置了`WHERE`电子邮件`= '$forgotpassword'`吗？

# objective-c - Objective-C 的新手。获得“可能无法响应‘新’警告。”构造函数导致段错误

> ID：16064486
> 
> 赞同：6
> 
> 时间：2013-04-17T15:43:33.923
> 
> 标签：objective-c, gcc, constructor

所以我是 Objective-C 的新手，我正在关注[本教程](http://en.wikibooks.org/wiki/Objective-C_Programming/syntax)。我正在运行 Linux Mint 14。我已经通过运行安装了 gobjc，`sudo apt-get install gobjc`并且我也已经安装了 gcc。我正在尝试他们的`Point`示例，但遇到了一些奇怪的错误。

这是我的代码（几乎从网站复制和粘贴）：

```
#import <objc/Object.h>
#import <math.h>
#import <stdio.h>

@interface Point : Object
{
@private
   double x;
   double y;
}

- (id) x: (double) x_value;
- (double) x;
- (id) y: (double) y_value;
- (double) y;
- (double) magnitude;
@end

@implementation Point

- (id) x: (double) x_value
{
   x = x_value;
   return self;
}

- (double) x
{
   return x;
}

- (id) y: (double) y_value
{
   y = y_value;
   return self;
}

- (double) y
{
   return y;
}

- (double) magnitude
{
   return sqrt(x*x+y*y);
}

@end

int main(void)
{
   Point *point = [Point new];
   [point x:10.0];
   [point y:12.0];
   printf("The distance from the point (%g, %g) to the origin is %g.\n",
      [point x], [point y], [point magnitude]);

   return 0;
} 
```

我正在使用`gcc Point.m -lobjc -lm`.

这是我得到的错误：

```
Point.m: In function ‘main’:
Point.m:52:4: warning: ‘Point’ may not respond to ‘+new’ [enabled by default]
Point.m:52:4: warning: (Messages without a matching method signature [enabled by default]
Point.m:52:4: warning: will be assumed to return ‘id’ and accept [enabled by default]
Point.m:52:4: warning: ‘...’ as arguments.) [enabled by default] 
```

它似乎无法找到“新”方法（或者可能是 alloc/init？）。

我已经查找了很多关于这个问题的信息，但我找不到太多。一切都建议切换到较新的 GNUStep 和`NSObject`，但我正在为我的一个 CS 课程编写程序，我认为我必须坚持使用`objc/Object.h`.

今年年初，我们获得了一个预配置的 Ubuntu 映像，可以在 VirtualBox 中使用，我们可以在该映像上进行编程，并且该程序可以正常工作。我不确定那里有什么使它起作用。会不会是 Linux Mint 14 不支持这个旧版本的 Objective-C？

任何帮助/反馈表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T15:50:56.803

在 Objective-C 中使用`Object`是相当古老的（可以追溯到 Next 接管语言的开发之前）。

现代 Objective-C 通过编译器支持与 Foundation 框架（Cocoa 的非 UI 部分）纠缠在一起：

*   字符串和数字文字
*   集合（数组和字典），
*   快速枚举（for-in 循环）
*   内存管理（ARC 和自动释放池）

因此，在我个人看来，在没有 Foundation 的情况下学习 Objective-C 没有多大意义。

您可以包含 Foundation（也可以在 Linux 上以某种方式获得）并使 Point 成为`NSObject`. 那应该让你继续前进。

# html - VBscript HTML 应用程序中的等待函数

> ID：16064488
> 
> 赞同：3
> 
> 时间：2013-04-17T15:43:36.030
> 
> 标签：html, excel, vbscript, wait

我正在开发一个 html 页面，其中我使用 vbscript 作为脚本语言，即 html 页面头部的 VBScript。我想在某些函数的执行中插入显式等待。

在 Excel 宏`Application.wait waitTime`中效果很好，但在 html 页面中我无法实现我想要的。

有人可以建议任何可以帮助我插入等待 10 秒的代码片段吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T15:50:36.110

您可以使用`setTimeout()`来延迟代码的执行。将您所有的 vbscript 代码放入一个子程序中，假设您调用它`mySub`，然后调用`setTimeout`：

```
<script type="text/vbscript">
    Sub mySub
        'Your code goes here
        MsgBox "Executed after delay"
    End Sub

    window.setTimeout "mySub()", 10000, "VBScript"
</script> 
```

注意第二个参数是以毫秒为单位的延迟持续时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T22:19:23.517

另一种解决方案，可以更“自然”地使用，但只有秒粒度：

```
<script type="text/vbscript">
Set sh = CreateObject("WScript.Shell")

Sub Sleep(seconds)
  sh.Run "%COMSPEC% /c ping -n " & seconds+1 & " 127.0.0.1", 0, True
End Sub

...
Sleep 10
...
</script> 
```

# php - 如何尝试两种可能的网络服务方向

> ID：16064489
> 
> 赞同：0
> 
> 时间：2013-04-17T15:43:38.733
> 
> 标签：php, web-services, soap

我一直在调用 Web 服务，但该服务有时在一个方向上工作，有时在另一个方向上工作。我想调用服务，如果服务在这个方向上失败，我想尝试另一个方向。我一直在使用 php 函数 is_soap_fault() 但是当第一个方向失败时，我使用 is_soap_fault() 而另一个方向（工作方向）永远不会给出结果。

```
$service="http://xxx.xx.x.xxx/blabla/webservices.nsf/getDetails?WSDL"; 
try{
    $client = new SoapClient($service);
    $result = $client->getDetailPoints();
}catch (SoapFault $e){
    var_dump($e);
} 
```

# c# - 如何在 C# WinForm Custom UserControls 中设置文本对齐指示器？

> ID：16064491
> 
> 赞同：3
> 
> 时间：2013-04-17T15:43:48.260
> 
> 标签：c#, .net, winforms, user-controls, alignment

使用：C# .NET 4.0 Winforms - Visual C# Express 2008

.NET 默认控件在设计器模式下有一条粉线，允许您在控件中对齐文本。例如，标签和文本框可以在放置时通过对齐粉红色线垂直对齐文本，即使它们具有不同的高度。

但是，当我制作自定义控件时，它只允许我与边框对齐。如何设置文本行位置以允许它们像上面一样对齐？

我在这方面找不到任何网络资源，可能是因为我不知道这些对齐指南的技术术语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-07T15:27:35.067

它们被称为*对齐线*。它需要创建自己的设计师。示例控件 + 设计[器在这里](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/29e9baf9-3724-4e6c-931d-7cfb00d50c71/)。

# ruby-on-rails - Unicorn 找不到使用 capistrano 的捆绑程序

> ID：16064503
> 
> 赞同：4
> 
> 时间：2013-04-17T15:44:11.303
> 
> 标签：ruby-on-rails, deployment, capistrano, bundler, unicorn

我似乎无法让捆绑器在部署时与独角兽一起工作。我正在使用 capistrano 进行部署。

在部署时查看独角兽日志，我收到以下错误：

```
/home/deployer/apps/my-app/releases/20130417145122)
I, [2013-04-17T14:53:04.982369 #6565]  INFO -- : forked child re-executing...
/home/deployer/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.5/lib/bundler/definition.rb:16:in `build': /home/deployer/apps/my-app/releases/20130417020329/Gemfile not found (Bundler::GemfileNotFound)
  from /home/deployer/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.5/lib/bundler.rb:148:in `definition'
  from /home/deployer/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.5/lib/bundler.rb:116:in `setup'
  from /home/deployer/.rvm/gems/ruby-1.9.3-p392@global/gems/bundler-1.3.5/lib/bundler/setup.rb:17:in `<top (required)>'
  from /home/deployer/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
  from /home/deployer/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
E, [2013-04-17T14:53:05.054942 #18166] ERROR -- : reaped #<Process::Status: pid 6565 exit 1> exec()-ed 
```

Capistrano 正在清理该应用程序的最后 5 个版本，我看到捆绑程序正在尝试访问一个不存在的（最后删除的）版本。

我找到了我放入 unicorn.rb.erb 的代码，但它没有帮助（我也尝试对其进行硬编码）： [http ://davidvollbracht.com/blog/headachenewunicorn-capistrano-bundler-usr2](http://davidvollbracht.com/blog/headachenewunicorn-capistrano-bundler-usr2)

```
before_exec do |server|
  ENV['BUNDLE_GEMFILE'] = "<%= current_path %>/Gemfile"
end 
```

部署我的代码后，我启动和停止了 NGINX，启动和停止了 unicorn，但我遇到了同样的问题。

我关于堆栈溢出的原始帖子在这里，但我认为它与资产管道有关：[资产管道不在 Rails 生产环境中工作](https://stackoverflow.com/questions/16052084/asset-pipeline-not-working-in-rails-production-environment)

想法？

这是我的 unicorn.rb.erb 文件：

```
working_directory "<%= current_path %>"
pid "<%= unicorn_pid %>"
stderr_path "<%= unicorn_log %>"
stdout_path "<%= unicorn_log %>"

listen "/tmp/unicorn.<%= application %>.sock"
worker_processes <%= unicorn_workers %>
timeout 30

preload_app true

before_exec do |server|
  ENV['BUNDLE_GEMFILE'] = "<%= current_path %>/Gemfile"
end

before_fork do |server, worker|
  # Disconnect since the database connection will not carry over
  if defined? ActiveRecord::Base
    ActiveRecord::Base.connection.disconnect!
  end

  # Quit the old unicorn process
  old_pid = "#{server.config[:pid]}.oldbin"
  if File.exists?(old_pid) && server.pid != old_pid
    begin
      Process.kill("QUIT", File.read(old_pid).to_i)
    rescue Errno::ENOENT, Errno::ESRCH
      # someone else did our job for us
    end
  end
end

after_fork do |server, worker|
  # Start up the database connection again in the worker
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
  end
end 
```

这是我的 unicorn_init.sh 文件：

```
#!/bin/sh
### BEGIN INIT INFO
# Provides:          unicorn
# Required-Start:    $remote_fs $syslog
# Required-Stop:     $remote_fs $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Manage unicorn server
# Description:       Start, stop, restart unicorn server for a specific application.
### END INIT INFO
set -e

# Feel free to change any of the following variables for your app:
TIMEOUT=${TIMEOUT-60}
APP_ROOT=/home/deployer/apps/my-app/current
PID=$APP_ROOT/tmp/pids/unicorn.pid
CMD="cd $APP_ROOT; bundle exec unicorn -D -c $APP_ROOT/config/unicorn.rb -E production"
AS_USER=deployer
set -u

OLD_PIN="$PID.oldbin"

sig () {
  test -s "$PID" && kill -$1 `cat $PID`
}

oldsig () {
  test -s $OLD_PIN && kill -$1 `cat $OLD_PIN`
}

run () {
  if [ "$(id -un)" = "$AS_USER" ]; then
    eval $1
  else
    su -c "$1" - $AS_USER
  fi
}

case "$1" in
start)
  sig 0 && echo >&2 "Already running" && exit 0
  run "$CMD"
  ;;
stop)
  sig QUIT && exit 0
  echo >&2 "Not running"
  ;;
force-stop)
  sig TERM && exit 0
  echo >&2 "Not running"
  ;;
restart|reload)
  sig USR2 && echo reloaded OK && exit 0
  echo >&2 "Couldn't reload, starting '$CMD' instead"
  run "$CMD"
  ;;
upgrade)
  if sig USR2 && sleep 2 && sig 0 && oldsig QUIT
  then
    n=$TIMEOUT
    while test -s $OLD_PIN && test $n -ge 0
    do
      printf '.' && sleep 1 && n=$(( $n - 1 ))
    done
    echo

    if test $n -lt 0 && test -s $OLD_PIN
    then
      echo >&2 "$OLD_PIN still exists after $TIMEOUT seconds"
      exit 1
    fi
    exit 0
  fi
  echo >&2 "Couldn't upgrade, starting '$CMD' instead"
  run "$CMD"
  ;;
reopen-logs)
  sig USR1
  ;;
*)
  echo >&2 "Usage: $0 <start|stop|restart|upgrade|force-stop|reopen-logs>"
  exit 1
  ;;
esac 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T19:55:16.413

我遇到了一个类似的问题，尽管 Rails 应用程序认为 ENV['BUNDLE_GEMFILE'] 通过当前/符号链接指向 Gemfile，但使用“before_fork”块设置 BUNDLE_GEMFILE 并没有真正解决问题。

我仍然不完全理解它，但我们也在生产中使用 RVM。我设法通过添加：

```
export BUNDLE_GEMFILE="${APP_ROOT}/Gemfile" 
```

到初始化脚本。这能解决你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:39:12.517

如果您还没有，您应该使用 Capistrano 的捆绑器安装任务：[https ://github.com/carlhuda/bundler/blob/master/lib/bundler/capistrano.rb](https://github.com/carlhuda/bundler/blob/master/lib/bundler/capistrano.rb)

gem 依赖项将在部署时自动安装在 /home/deployer/apps/my-app/shared/bundle 目录中，并在不同版本中持续存在。

# javascript - 中断电流转换时的平滑内容转换

> ID：16064505
> 
> 赞同：0
> 
> 时间：2013-04-17T15:44:13.030
> 
> 标签：javascript, jquery

我有一个菜单，我可以在其中单击导航链接。我使用 jquery 更改了一些内容`fadeOut`，`fadeIn`

**主要：OnClick**

```
Link1 | Link2 | Link3

Content 1 | Content 2 | Content 3 
```

每个链接隐藏所有内容元素并淡入指定的内容元素。

问题出在这里：
**用户在链接 1、链接 2 上的点击速度比在链接 3 上的点击速度非常快。
内容元素未完全淡出或其他内容元素淡入。**

我可以使用停止，但这些都不会顺利。它应该在淡出被中断时继续淡出，淡入应该淡出，所以一切看起来都很顺利。有没有优雅的方法。

这是我现在如何解决褪色的功能。

```
function showContent(contentId) {
   $(".content-elements").stop(true, true);
   return $when($(".content-elements").fadeOut(800)).then($(contentId).fadeIn(800));
} 
```

**更新：这是一个小沙盒[jsFiddle](http://jsfiddle.net/RLDQF/2/)**

* * *

**可选：鼠标悬停**

```
|BOX1|BOX2|BOX3|
Content 1 | Content 2 | Content 3 
```

另外，如果用户不小心输入了一个框，我喜欢在导航之前有一个小的超时，以防止转换。所以当前元素的fadeOut应该等到2秒过去后才能淡入鼠标当前所在的元素。

# mqtt - 每当更新提要或数据流时，COSM MQTT 订阅都不会收到更新状态

> ID：16064507
> 
> 赞同：0
> 
> 时间：2013-04-17T15:44:14.313
> 
> 标签：mqtt, mosquitto, cosm

我正在用 COSM 测试 MQTT。

要发布数据，我使用以下命令：

```
$ mosquitto_pub -h api.cosm.com -u <COSM_API_KEY> -t /v2/feeds/96951.csv -m "temp_sensor,21" 
```

要订阅，我使用以下命令：

```
$ mosquitto_sub -h api.cosm.com -u <COSM_API_KEY> -t /v2/feeds/96951/datastreams/temp_sensor.csv 
```

我希望在订阅方面，只要更新提要或数据流，它就应该获得更新状态。但我只在订阅后立即获得设备的当前状态。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:30:59.793

I think this was fixed on the Cosm end, so the mosquitto_sub example you gave above is working for me now.

# inline-assembly - `asm("" : "+r" (myVar));` 在 AVR-GCC 中是什么意思？

> ID：16064509
> 
> 赞同：2
> 
> 时间：2013-04-17T15:44:18.297
> 
> 标签：inline-assembly, avr-gcc, atmega

我在别人的代码中发现了以下几行：

```
uint16_t someConstantFactorVariable = ...;
asm("" : "+r" (someConstantFactorVariable)); 
```

它`someConstantFactorVariable`位于一个常用函数中，我猜代码的作者希望它能够将变量永久加载到寄存器中。我对吗？使用这种方法代替`register`变量定义中的关键字有什么好处？

# android - 将行动态添加到设计布局的表中

> ID：16064512
> 
> 赞同：0
> 
> 时间：2013-04-17T15:44:23.677
> 
> 标签：android, dynamic, tablelayout

我想知道是否可以将数据行动态添加到已经定义布局的表中......例如：

```
<TableLayout 
        android:id="@+id/myTableOrders"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10sp">

            <TableRow
                android:id="@+id/ordersRow"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">

                <TextView android:id="@+id/name"
                    android:textSize="14sp"
                    android:textStyle="bold"
                    android:layout_marginLeft="10sp"
                    android:layout_marginTop="5sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.6"             
                />                                      

                <TextView android:id="@+id/quantity"
                    android:textSize="14sp"
                    android:textStyle="bold"
                    android:layout_marginTop="5sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.2"
                />

                <TextView android:id="@+id/total_price"
                    android:textSize="14sp"
                    android:textStyle="bold"
                    android:layout_marginTop="5sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_weight="0.2"
                />
            </TableRow>
</TableLayout> 
```

考虑这张表，其中每一行都有这 3 个文本视图，具有该样式...我现在可以为每个文本视图提供数据吗？...或者我是否也应该在处理人口的 Java 代码中编写样式？

如果是的话..也许你可以给我一个提示:)

编辑：使用下面的代码以编程方式解决了这个问题

```
TableLayout ordersTable = (TableLayout)findViewById(R.id.myTableOrders);
    for (int i=0;i<products.size();i++){

        //Create a new row to be added.
        TableRow tr = new TableRow(this);
        tr.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));

        //Create text views to be added to the row.
        TextView name = new TextView(this);
        name.setText(products.get(i).getName());
        name.setTextSize(16);
        name.setTypeface(Typeface.DEFAULT_BOLD);
        TableRow.LayoutParams nameParams = new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, TableRow.LayoutParams.WRAP_CONTENT, 0.6f);
        nameParams.setMargins(7, 5, 0, 0);

        TextView quantity = new TextView(this);
        quantity.setText(products.get(i).getQuantityString());
        quantity.setTextSize(16);
        quantity.setTypeface(Typeface.DEFAULT_BOLD);
        TableRow.LayoutParams quantityParams = new TableRow.LayoutParams( TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT, 0.2f);
        quantityParams.setMargins(0, 5, 0, 0);

        TextView totalPrice = new TextView(this);
        totalPrice.setTextSize(16);
        totalPrice.setTypeface(Typeface.DEFAULT_BOLD);
        TableRow.LayoutParams totalPriceParams = new TableRow.LayoutParams( TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT, 0.2f);
        totalPriceParams.setMargins(0, 5, 0, 0);

        tr.addView(name,nameParams);
        tr.addView(quantity,quantityParams);
        tr.addView(totalPrice,totalPriceParams);

        ordersTable.addView(tr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:23:05.930

在您的活动中，使用类似的东西

```
 TextView tv = (TextView) findViewById(R.id.name); //do this for all text views : retrieve them using Ids.
  tv.setText("someText") //someText = text that you want to set 
```

# git - Git'致命：无法写入新的索引文件'

> ID：16064513
> 
> 赞同：170
> 
> 时间：2013-04-17T15:44:27.907
> 
> 标签：git, locking

我已经看到了许多关于此的其他线程，但它们没有帮助。

我有一个非常简单的 repo - 两个 JavaScript 文件。我在 Macbook 上有 100+ GB。当我尝试将文件移动到子目录并在本地暂存时，我得到的更改...

> 致命：无法写入新的索引文件

无论我在终端中执行所有操作还是使用像 SourceTree 这样的 GUI，都会发生这种情况。此外，其中一个文件被锁定，我无法删除工作目录，直到我注销并重新登录。

为什么会这样？锁是否阻止了某些东西的暂存？如果是这样，什么/如何解锁 OS X 上的问题文件？远程仓库是谷歌代码，如果这有区别的话，虽然我还没有推送到远程。一切都是本地的。

* * *

## 回答 #1

> 赞同：300
> 
> 时间：2015-01-16T14:23:10.440

就我而言，磁盘空间不足，因此我不得不从硬盘驱动器中删除文件以腾出空间。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2014-03-12T04:09:26.477

在过去的几天里，我一直遇到同样的问题。基本上，在我不知情的情况下，整个 repo 已被移动到一个新的文件系统，当我尝试运行 git status 时，它突然报告 repo 中的每个文件都已更新。

## 可能的解决方案

因此，经过大量谷歌搜索，我尝试了以下方法：

*   更改 .git 权限（同样的问题）
*   更改 .git/index 权限（同样的问题）
*   git 添加所有更改以提交（同样的问题）
*   git rm-ing 删除文件，因为它们报告文件名太长错误（同样的问题）
*   git reset (soft|Head|Hard) (同样的问题)
*   git clean （同样的问题）
*   关闭 Windows Defender（同样的问题）
*   更新 git（同样的问题）
*   不同的 git 客户端（我使用 gitbash）（同样的问题）
*   喝 2 杯咖啡而不是 1 杯（同样的问题）

## tl:dr - 肮脏的解决方案

唯一能解决这个问题的是复制索引文件，删除原始文件并重命名副本。

我知道它不是真正的“解决方案”，但现在它神奇地工作><，所有文件/分支都完好无损。如果有人知道为什么这可能会起作用，请告诉。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2017-03-04T02:47:41.833

就我而言，暂停 Dropbox 同步解决了这个问题

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-09-19T02:31:59.590

我在 Mac 上遇到了同样的问题。这似乎是由文件系统 ACL 引起的。尝试`chmod -RN /path/to/repo`清除 ACL。完成此操作后，我能够提交更改。使用复制索引文件的技巧，删除原始文件并将副本移回获得相同的结果。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2017-04-30T12:58:11.140

如果您在某种在线同步服务（例如 google drive 或 dropbox）中设置了 github，请尝试禁用同步，因为同步服务会尝试读取/写入文件，因为 github 会尝试执行相同操作，从而导致 github 无法正常工作正确。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-12-18T15:31:21.047

关闭 Visual Studio Code（在我的情况下，有一个在文件保存时运行的自动上传后台作业）为我解决了这个问题。

解决方案的功劳：我的朋友和同事 Arnel。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2019-03-26T13:27:13.040

就我而言，解决方案只是向新用户添加权限。

当我安装新操作系统时，移动了我的存储库并显示了这个确切的错误，我选择了根文件夹，然后添加了经过身份验证的用户以检查所有 [![在此处输入图像描述](https://i.stack.imgur.com/fHesY.png)](https://i.stack.imgur.com/fHesY.png)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2015-03-27T15:36:05.027

我碰巧文件 .git/index 正在被另一个进程（我的本地开发 Web 服务器）使用。我关闭了该过程，然后它起作用了。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-02-11T14:45:51.220

这对我有用：

```
rm -f ./.git/index.lock 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-06-13T18:37:48.057

错误消息`fatal: Unable to write new index file`意味着我们无法将新内容写入 git index 文件`.git\index`（有关 git index 的更多信息，请参见[此处](https://stackoverflow.com/questions/4084921/what-does-the-git-index-contain-exactly)）。在回顾了这个问题的所有答案后，我总结了以下根本原因：

*   新内容的大小超过了磁盘可用容量。（**解决方法**：清理磁盘空间）
*   用户无权访问此文件。（**解决方案**：授予权限）
*   用户有权限，但`.git\index`被其他用户或进程锁定。（**解决方案**：解锁文件）

[查找在 Windows 中锁定文件或文件夹的进程](https://superuser.com/questions/117902/find-out-which-process-is-locking-a-file-or-folder-in-windows)链接指定了以下方法来找出锁定特定文件的进程：

> SysInternals Process Explorer - 转到查找 > 查找句柄或 DLL。在“Handle or DLL substring:”文本框中，输入文件的路径（例如“C:\path\to\file.txt”）并点击“Search”。应列出具有该文件的打开句柄的所有进程。

使用上述方法查找锁定`.git\index`的进程，然后停止锁定可执行文件。这解锁`.git\index`。

例如，[Process Explorer Search](https://i.stack.imgur.com/Z3fwO.jpg)显示`.git\index`被 锁定`vmware-vmx.exe`。暂停 VMWare Player 虚拟机（通过共享文件夹访问 git repo）解决了这个问题。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-02-02T13:50:48.363

我将 ACL（不知何故）附加到 .git 文件夹中的所有文件。

`ls -le`在 .git 文件夹中检查它。

`chmod -N`您可以使用（对于文件夹/文件）或`chmod -RN`（递归）删除 ACL

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-07-05T13:25:47.850

我认为某些后台备份解决方案（例如 Google Backup and Sync）会阻止对索引文件的访问。我关闭了应用程序，Sourcetree 完全没有问题。似乎 Dropbox 也是如此（@tonymayoral）。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-02-25T14:27:15.437

在我的情况下，它是一个并发运行的 EGit。重新启动eclipse后，它照常工作。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-07-28T21:22:02.700

如果您使用的是 Windows 机器，请确保您正在使用的程序，无论是源代码树还是 git 终端，都以管理员身份运行。我得到了同样的错误信息。您可以右键单击该程序以管理员身份运行，也可以将其属性更改为始终以管理员身份运行。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-11-16T01:43:34.323

**如果你在 rebase 期间得到这个：**

这很可能是由于某些软件锁定了您的 repo 的索引文件造成的，例如备份软件、杀毒软件、IDE 或其他 git 客户端。

在大多数情况下，锁定只是短暂的一瞬间，因此它只是由于时机不佳和运气不佳而发生的。

但是，`git rebase --continue`会抱怨下一个命令是空提交：

```
The previous cherry-pick is now empty, possibly due to conflict resolution.
If you wish to commit it anyway, use:

    git commit --allow-empty 
```

要解决此问题，只需运行`git reset`并重试`git rebase --continue`。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-06-02T04:24:03.273

没有足够的空间是个问题。清理并重试

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2019-08-21T19:48:27.933

我有同样的问题。我重新启动了计算机，问题得到了解决。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-01-16T05:29:38.557

你试过'git add'吗？. 会不会全部改变？（您可以通过 git reset HEAD 删除不必要的添加文件）

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-12-04T15:13:43.317

就我而言，它是一个`nodemon`监视文件系统以进行更改的实例。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-08-30T08:38:13.487

出于某种原因，`git add`从 wsl 终端做的工作正常。但是崇高的合并总是会给我这个错误。原来VS代码以某种方式阻止了它。关闭 VS 代码使其工作。有人也以同样的方式解决了这个问题 - [https://stackoverflow.com/a/47871586/6236710](https://stackoverflow.com/a/47871586/6236710)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-01-08T05:58:33.480

问题：当我在 git 中检查一些修改过的文件时，收到此错误。我有两个用户 ABC 和 XYZ。文件具有 uid:gid 的 ABC 但它没有 git 访问权限并尝试使用相同的文件签出。

我尝试过的解决方案：XYZ 拥有 git 访问权限，尝试使用 sudo 签出文件，它成功了..！！

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-01-18T10:30:48.713

这对我有用：

**语境：**

1.  在服务器上构建项目

2.  `git status`返回一个`HEAD detached at <commit-SHA>`

3.  我在本地做过什么操作，我都有这个错误。进一步来说：

    *   git结帐
    *   git reset HEAD --hard

**解决方案**

1.  只需删除文件`<work-dir>/.git/index`.
2.  A`git status`表示项目中的所有文件都没有被跟踪（这里不足为奇）。
3.  `git reset HEAD --hard`
4.  回到`HEAD detached at <commit-SHA>`做 a 的时候`git status`，但是你应该能够
5.  `git checkout <some-branch>`

你又回到了正轨！

**！！重要的 ！！**

这只是因为我正在“愉快地”建设。没有对代码进行任何有价值的修改。如果您实际上处于“开发时间”，那么我建议您先保存您的工作或采用另一种方法。

希望它会有所帮助:)。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-03-15T10:38:54.510

我在 Windows 上使用 GitExtensions 时遇到了这个问题。通过授予当前用户（我）对包含 repo 的文件夹的完全权限来修复。

还有一次，即使我从 Git Extensions 收到错误，我也能够从 Visual Studio 2015 提交相同的文件。

另一次我不得不从 .git 文件夹中删除“索引”文件

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-06-27T05:19:31.270

我的案例有点意思：

我运行 git log 来检查某个提交，然后我没有正确退出它，我按 ctrl+c 退出它。

然后索引似乎被锁定了。所以我再次运行 git log，然后按 Q 退出它。

问题已解决。:)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-09-08T08:17:37.120

我也有/有这个问题。就我而言，没有任何解释适用：

*   足够的磁盘空间
*   我有足够的权限，我可以写索引文件，我可以重命名它，我可以创建它，解决方法什么也没做
*   重新启动 Windows 不起作用
*   索引未被进程锁定

直到我发现一旦我通过另一台（linux）计算机访问 windows 文件夹，git 就可以毫无怨言地工作。它一定与我在普通 debian buster 计算机上使用的 git 版本有关：git 1.2.20 给了我“无法写入新索引”错误，而从 ubuntu 模糊虚拟机（git 1.2.2）添加文件没有问题。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-10-24T08:37:45.013

安装 Anaconda 后我遇到了同样的问题。我尝试了所有解决方案，例如**permission**和**disk-free**。所以，我只是删除了 repo 并从遥控器再次克隆它。它解决了这个问题。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-12-21T17:37:54.200

我再次运行了提交，它工作了....

```
 sbe:/var/xxxxx/rmm/sprcg2/app3536847/sas % git commit -m "My summary"
[master a2257ec] My summary
 9 files changed, 2747 insertions(+), 7047 deletions(-)
 rename ish_extracts/prog/{t.sas => query.sas} (55%)
 rewrite ish_extracts/prog/t.sas (98%) 
```

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2021-07-14T06:10:50.503

与 sudo 一起运行对我有用。

例如：sudo git add -r

# wcf - 使用 WSO2 ESB 将 POST RESTful 消息传递给 WCF 代理

> ID：16064516
> 
> 赞同：0
> 
> 时间：2013-04-17T15:44:33.693
> 
> 标签：wcf, rest, wso2, wso2esb

我对 WS02 ESB 相当陌生——我的公司在几个月前实施了它。

目前，我正在尝试在 WCF 服务的顶部放置一个 REST 层。我试图实现的用例是一个位置 api，其中移动应用程序（iphone、android）通过 RESTful xml 向 WCF 服务提供位置数据。

我当前的数据流结构类似于移动应用程序 -> REST API -> ESB 代理 -> WCF 服务。

在负载中提供给 REST 端点的 xml 是这样的：

```
<Location Partner='{API Parnert Name}' Code='{API Partner Code}' Password='{API Partner Password}' Generated='2013-04-16T16:30:15Z'>
  <Latitude>44.5881</Latitude>
  <Longitude>-89.581248</Longitude>
  <Accuracy>75.334</Accuracy>
  <MobileDeviceUID>A1000017B8B437</MobileDeviceUID>
</Location> 
```

为了通过 WSO2 ESB 路由这个 xml，我创建了一个 API 和一个服务代理。（一切都在我的机器上本地运行）

API 配置如下：

```
<api xmlns="http://ws.apache.org/ns/synapse" name="API_LOC" context="/WS1/Location">
   <resource methods="POST">
      <inSequence>
         <log level="full" category="DEBUG"/>
         <send>
            <endpoint>
               <address uri="http://localhost:8280/services/WS1LocationProxy/AddLocation" format="soap11"/>
            </endpoint>
         </send>
      </inSequence>
      <outSequence>
         <send/>
         <log level="full"/>
      </outSequence>
   </resource>
</api> 
```

我的代理配置如下：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="WS1LocationProxy" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <log level="full" category="TRACE"/>
         <property name="FORCE_HTTP_1.0" value="true" scope="axis2"/>
         <send>
            <endpoint>
               <address uri="http://localhost:54270/WS1LocationService.svc"/>
            </endpoint>
         </send>
      </inSequence>
      <outSequence>
         <send/>
      </outSequence>
   </target>
   <publishWSDL uri="http://localhost:54270/WS1LocationService.svc?wsdl"/>
   <parameter name="useOriginalwsdl">true</parameter>
   <parameter name="interface">WS1LocationService</parameter>
   <parameter name="serviceType">proxy</parameter>
   <description></description>
</proxy> 
```

我的主要问题是：如何将传入 REST 请求的 POST 有效负载转换为代理中 WCF 服务所需的 SOAP 信封。我还没有找到这样一个过程的好例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:05:49.723

您不需要手动转换它..传入的 POST 请求将被转换为 SOAP 消息以便在 ESB 中处理..您可以使用代理中的日志中介进行检查..在顺序中..只需使用日志中介并查看输出..

```
<log level="full" >
   <property name ="incoming message" value="*****"/>
</log> 
```

# ruby-on-rails - notify_url 在我的沙箱中不再在 PayPal 中工作

> ID：16064517
> 
> 赞同：0
> 
> 时间：2013-04-17T15:44:34.760
> 
> 标签：ruby-on-rails, paypal

我在 Rails 控制台上没有看到任何关于此的日志。我假设这个 notify_url 在付款交易时被调用。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:32:17.543

我需要更多信息，但是：

*   检查您的 notify_url 是否是绝对的
*   检查您的 notify_url 是名称而不是 IP 地址

请注意：

*   我经历了短暂的沙盒不活动
*   在我的国家，请求和响应之间的时间或多或少是 30 秒

# java - 带有 Java 的正则表达式中的 Pattern.UNIX_LINES

> ID：16064527
> 
> 赞同：2
> 
> 时间：2013-04-17T15:44:54.647
> 
> 标签：java, regex

您好，来自 java doc 的内容如下：

> **UNIX_LINES**
> 
> `public static final int UNIX_LINES`
> 
> 启用 Unix 行模式。
> 
> 在这种模式下，在 、 和 的行为中只识别行`'\n'`终止符。`.``^``$`
> 
> Unix 行模式也可以通过嵌入式标志表达式启用 `(?d)`。

有没有人有其他词来定义它的服务？我知道“\n”转义序列仅在`.`,`^`和. 之后被识别`$`。显然我被误解了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:28:03.757

[I will try to explain it on `.` since same rule apply for `^` and `$`.]

Normally dot `.` matches every character except new line. In Unix only `\n` is new line mark, so other characters like carriage return `\r` are threated as normal characters.

Take a look at this String `"A\r\nB\rC\nD"`. If you will try to find match for regex like`.+` using

```
String data = "A\r\nB\rC\nD";
System.out.println(data);
Matcher m = Pattern.compile(".+").matcher(data);
while (m.find()) {
    System.out.println("["+m.group()+"]");
} 
```

you will get

```
[A]
[B]
[C]
[D] 
```

but if add flag `Pattern.UNIX_LINES` characters like `\r` will also be possible match for `.` and output will change into

```
[A
]
[B
C]
[D] 
```

So first match is `[A\r]`, second `[B\rC]` and third `[C]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:32:35.327

至于它们如何专门应用于正则表达式行为；`.`, `^`, 并`$`取决于换行符的定义才能起作用。

*   `.`匹配除换行符以外的任何内容
*   `^`可以匹配一行的开头
*   `$`可以匹配一行的结尾。

这些中的每一个都取决于对行终止位置的正确定义。该`UNIX_LINES`设置指示它根据标准 Unix 定义严格定义行终止符。默认情况下，它的定义更广泛，[如 Pattern 文档中所示](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#lt)

至于匹配“abc\n”，我假设您正在使用`Pattern.matches`或类似的东西，它必须匹配整个输入？ `^`并且`$`是零宽度。它们可以匹配换行符的任一侧，但不会消耗换行符。您可以`\n`通过简单地将其放入您的模式中来使用 ，例如`abc\n`，或者您也可以`$`按照您的指示使用该字符，例如`abc\n$`，或者如果您感觉活泼`(?m)abc$$$$\n$$`。

[DOTALL](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#DOTALL)和[MULTILINE](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#MULTILINE)模式也可能对您有用，具体取决于您要完成的工作。

# knockout.js - 将淘汰赛 observable 推入淘汰赛 observable 数组

> ID：16064528
> 
> 赞同：2
> 
> 时间：2013-04-17T15:44:56.103
> 
> 标签：knockout.js, knockout-2.0, ko.observablearray

如果该元素本身是可观察的，那么淘汰的可观察数组只会在更改数组中的元素时更新，因此我试图将一个元素“推入”可观察数组但使其可观察。我尝试了以下语句，但都导致在我的可观察数组中有一个未定义的值：

```
viewModel.myObservableArray.push(ko.observable()); 
```

和

```
viewModel.myObservableArray.push(new ko.observable()); 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:12:14.487

使您尝试放入模型中的对象成为这样的对象

```
function MyObject(initValuye){
var self = this;
    var value = ko.observable(initValuye);
} 
```

在你的模型中

```
viewModel.myObservableArray.push(new MyObject(someValue)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:33:58.137

你也可以这样试试

```
viewModel.myObservableArray.push(ko.observable("Test"));

viewModel.myObservableArray.push(new ko.observable("Test")); 
```

# python - Python 代码覆盖率

> ID：16064529
> 
> 赞同：4
> 
> 时间：2013-04-17T15:45:01.570
> 
> 标签：python, nose, coverage.py, python-coverage

```
coverage 3.4
Nose 1.1.2
Python 2.7.1 
```

我有一个如下的python项目结构

```
root
   src #source directory
      company
          division
              pkg1
                  module1
                  module2
              pkg2
                  module1
                  module2
   test #All test files
       company
           division
              pkg1
                  test_module1
                  test_module2 
```

当我运行 python nose 时，我使用以下代码段

```
#Run tests
#Add dependencies like cheetah, yaml, etc to the sys.path
if __name__ == "__main__":
    os.environ["NOSE_INCLUDE_EXE"] = "1"
    os.environ["NOSE_WITH_XUNIT"] = "1"
    os.environ["NOSE_WITH_COVERAGE"] = "1"
    os.environ["NOSE_COVER_PACKAGE"] = "company.division"
    nose.main() 
```

我的期望是我得到“company.division”下所有包的清晰简洁的输出，但是我从 cheetah、yaml 及其覆盖范围中获取文件，而我根本不感兴趣。设置 NOSE_COVER_PACKAGE 似乎根本没有任何区别。有人能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:53:12.280

OP报告升级到nose 1.3和coverage 3.6可以解决这个问题。

请参阅此错误修复以供参考： [https ://github.com/Bahus/nose/commit/ddb14f0228ca94ae33d9e67785dc06bf412603f2](https://github.com/Bahus/nose/commit/ddb14f0228ca94ae33d9e67785dc06bf412603f2)

# facebook - 为什么 Facebook 在注销时显示画布 url 的限制消息？

> ID：16064530
> 
> 赞同：0
> 
> 时间：2013-04-17T15:45:02.557
> 
> 标签：facebook, canvas, facebook-apps

如果我在退出 Facebook 后转到应用程序的画布 url，它会显示一条可怕的消息“应用程序“应用程序标题”的使用已受到限制”。

示例：[https ://apps.facebook.com/postergifts/](https://apps.facebook.com/postergifts/)

我对应用程序没有任何限制，并且在开发者控制台中没有警告。登录 Facebook 后，一切正常。

这不会发生在显示登录表单的[https://apps.facebook.com/farmville-two/上。](https://apps.facebook.com/farmville-two/)

我的应用程序可能导致显示限制消息的原因是什么？

在高级设置中，它有：

```
Country Restrictions: Blank
Let users without a location see my app: Checked
Age Restrictions: Anyone 13+ 
Content Restrictions: alcohol not checked
Social Discovery: Enabled 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:10:06.787

发现“允许没有国家/地区的用户”需要取消选中。

提交的错误： [https ://developers.facebook.com/bugs/467722223296519?browse=search_517692e7066001974683076](https://developers.facebook.com/bugs/467722223296519?browse=search_517692e7066001974683076)

# matlab - 在 MATLAB 中使用 parfor 时出错

> ID：16064535
> 
> 赞同：0
> 
> 时间：2013-04-17T15:45:08.277
> 
> 标签：matlab, parfor

我一直在运行一个程序数百次，但最近发现一个输入参数集会导致以下错误：

```
In DElambda at 116
  In parallel_function>make_general_channel/channel_general at 879
  In remoteParallelFunction at 31
??? Error using ==> parallel_function at 598
The session that parfor is using has shut down

Error in ==> CreateCurve at 86
parfor j=1:10

??? The client lost connection to an unknown lab.
This  might be due to network problems, or the interactive matlabpool job might have errored. This is
causing: java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

当我将参数搜索空间的最小值和最大值设置为 min[0;0] 和 max[1.5;1.5] 并将 Population size 设置为 10k（这是差分进化）时，就会发生这种情况。我在任何时候都没有触及其他参数。每当我尝试使用上述参数运行它时，都会出现上述错误。

但是，当我将人口规模降至 1k 时，它会收敛（由于搜索不足而导致答案不正确）。或者，当我使用 10k 的人口规模和我尝试过的任何其他参数集时，它是否可以完美运行并收敛到正确的解决方案？

看起来很奇怪？

我目前正在使用 for 循环而不是 parfor 循环（并且 matlabpool 已关闭）重新运行问题参数集，以查看它是否运行得更好。不幸的是，这非常耗时，所以我暂时不知道结果。

同时，任何人都可以解释导致此错误的原因吗？和/或告诉我如何调试并行代码？

只是为了添加代码在我使用 for 而不是 parfor 时使用流氓参数集运行良好！所以我真的需要在并行环境中找到某种调试方法，以便我可以隔离和修复这个错误。使用 for 而不是 parfor 太慢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:13:08.677

正如@Oleg 所指出的，旧版本的 Parallel Computing Toolbox 对进出 PARFOR 的传输有严格的数据大小限制。这个限制在 R2013a 中得到了修复，但不幸的是，链接到的文档页面 @Oleg 没有得到更新。如果可以，请使用 R2013a 重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:53:32.360

为避免内存不足，您需要一个计算器并了解其局限性。

在客户端和工作人员之间的每次数据传输上，64 位操作系统的大小限制为 2GB，32 位操作系统的大小限制为 600MB。[对象数据大小限制](http://www.mathworks.co.uk/help/distcomp/troubleshooting-and-debugging.html#f5-15586)中的更多详细信息以及[`parfor()`](http://www.mathworks.co.uk/help/distcomp/parfor.html).

然后，您需要（使用计算器）计算您在每个循环中传输的数据量，即代码创建的数组的大小。

# jquery - Flexslider Carousel：内部选择框在 iPad 1 和 iPhone 4 上打破了一切

> ID：16064536
> 
> 赞同：2
> 
> 时间：2013-04-17T15:45:20.370
> 
> 标签：jquery, ios, flexslider, select-menu

我遇到了以下问题：当将Selectbox放置在Flexslider Carousel中时，我**在iPad 1（iOS 4.3.3）或iPhone 4（iOS 4.3.5）上打开Select-Dialog时，所有来自滑块的内容均位于left...**在第一个选择菜单上，当我没有移动滑块时，没有问题。在所有其他情况下，都会出现这个奇怪的问题。：/

在这里看到它，这是 flexslider carousel 原始演示，只有选择菜单放在里面： **[http ://allcontrasts.com/flexslider-problem/demo/](http://allcontrasts.com/flexslider-problem/demo/)**

有谁知道为什么会这样？甚至如何解决这个问题？

提前致谢！乔纳斯

# java - Java 线程在处理结束时变慢

> ID：16064544
> 
> 赞同：4
> 
> 时间：2013-04-17T15:45:44.390
> 
> 标签：java, multithreading, lucene, java.util.concurrent

我有一个 Java 程序，它接收一个包含文本文件列表的文本文件，并分别处理每一行。为了加快处理速度，我使用带有 24 个线程的 FixedThreadPool 的 ExecutorService 线程。该机器有 24 个内核和 48GB 的​​ RAM。

我正在处理的文本文件有 250 万行。我发现对于前 230 万行左右的内容，在 CPU 利用率很高的情况下运行得非常好。然而，超过某个点（大约 2.3 行），性能下降，只使用一个 CPU，我的程序几乎停止运行。

我调查了许多原因，确保我的所有文件句柄都已关闭，并增加了提供给 JVM 的内存量。但是，无论我改变什么，性能总是会在最后下降。我什至尝试过包含更少行的文本文件，并且在处理文件结束时性能再次下降。

除了标准的 Java 并发库之外，代码还使用 Lucene 库进行文本处理和分析。

当我不线程化这段代码时，性能是恒定的，并且不会在最后退化。我知道这是在黑暗中拍摄，很难描述发生了什么，但我想我想看看是否有人对最终导致性能退化的原因有任何想法。

**编辑**

在收到评论后，我在[此处](http://paste.kde.org/727556/)粘贴了堆栈跟踪。如您所见，似乎没有任何线程正在阻塞。此外，在进行分析时，当事情变慢时，GC 并没有达到 100%。事实上，大部分时间 CPU 和 GC 利用率都为 0%，CPU 偶尔会飙升以处理一些文件，然后再次停止。

**执行线程的代码**

```
 BufferedReader read = new BufferedReader(new FileReader(inputFile));
 ExecutorService executor = Executors.newFixedThreadPool(NTHREADS);
 String line;
 while ((line = read.readLine()) != null) { //index each line
     Runnable worker = new CharikarHashThreader(line, bits, minTokens);
     executor.execute(worker);
 }
 read.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:48:02.450

这听起来很像垃圾收集/内存问题。

当垃圾收集运行时，它会暂停所有线程，以便 GC 线程可以进行“这是可收集的垃圾”分析，而不会对其进行任何更改。当 GC 运行时，您会看到 1 个线程恰好处于 100%，而其他线程将卡在 0%。

我会考虑添加一些 Runtime.freeMemory() 调用（或使用分析器）来查看在 GC 期间是否发生“停止”。

我还尝试在文件的前 10k 行上运行你的程序，看看它是否有效。

我还想看看你的程序在应该使用 StringBuilders 时是否构建了太多的中间字符串。

在我看来，您需要分析您的内存使用情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:16:40.487

我最初认为这也是 GC 问题，但我不太确定是否提供以下信息。

> 我什至尝试过包含更少行的文本文件，并且在处理文件结束时性能再次下降。

我的猜测是线程没有退出，而是以某种方式卡住了。我建议进行线程转储（`kill -QUIT pid`在 *nix 下或通过 using `jstack`）并查看线程在哪里。这将帮助您确定它们是否被卡在某个地方。

我怀疑您的程序开始时运行了 24 个线程，但随着时间的推移，您会丢失一个，然后再丢失另一个。尽管最后似乎性能急剧下降，但我想知道程序是否从一开始就变得越来越慢。

*   注意没有正确连接或 IO 超时的套接字。
*   也许某种阻塞线程的锁争用？
*   也许 Lucene 正在做的事情要么引起争用，要么阻塞你的线程。正如@GPI 所提到的，我会尝试注释掉 Lucene 调用，看看问题是否消失。同样，堆栈跟踪也会向您显示这一点。

一旦确定了线程阻塞的位置，您将需要解决锁定问题、为网络调用添加超时或以其他方式解决问题。

希望这可以帮助。

# emacs - Emacs 24.3.1 和 ECB 2.40 错误：ECB 只能与 cedet [1.0pre6, 1.1.9] 一起使用

> ID：16064553
> 
> 赞同：8
> 
> 时间：2013-04-17T15:46:17.663
> 
> 标签：emacs, cedet, emacs-ecb

使用 Emacs 24.3.1 和 ECB 2.40 运行 Ubuntu 12.10。除了我几天前运行的 apt-get update && upgrade 之外，不确定是什么原因造成的。

它在我重新启动计算机并运行 Emacs 并执行 MX ecb-activate 时开始，我会收到以下错误：

> ECB 2.40 - 错误：ECB 只能与 cedet [1.0pre6, 1.1.9] 一起使用！请安装它并重新启动 Emacs！

我尝试了几件事，但还没有弄清楚究竟是什么导致了这个问题。几天前我做了一个 apt-get update && upgrade IIRC，它确实更新了一堆包，所以这是可能的。我运行 MX cedet-version 并得到：

```
 CEDET Version: 2.0
            Requested   File        Loaded
 Package        Version     Version     Version
  ----------------------------------------------------------
  cedet:        2.0     nil     ok
  eieio:        1.4     nil     ok
  semantic:     2.2     nil     ok
  srecode:      1.2     nil     Not Loaded
  ede:          1.2     nil     Not Loaded
  speedbar:     1.0.4       nil     1.0
  cogre:        1.2     nil     Not Loaded
  cedet-contrib:    1.2     nil     Not Loaded 
```

对这里发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T09:06:00.487

ECB有一个[分支](https://github.com/alexott/ecb)，可以与新的 Emacs 和 CEDET 版本一起使用。您可以手动安装，也可以通过[MELPA](http://melpa.milkbox.net/)安装（请参阅页面末尾关于如何激活 MELPA 的说明）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T14:08:41.003

What worked for me (after some more googling) was to edit ecb/ecb-cedet-wrapper.el - find the following line in that file:

```
(defconst ecb-cedet-required-version-max '(1 1 4 9) 
```

And replace the first '1' to a '2':

```
(defconst ecb-cedet-required-version-max '(2 1 4 9) 
```

Restarted emacs and everything is working fine.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-02T21:26:21.833

[经过大量的谷歌搜索，在这里](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=729865)找到了为我做的唯一技巧：添加

(setq ecb-version-check nil)

到我的 emacs 初始化文件。

# scala - Scala 中的匿名类型

> ID：16064554
> 
> 赞同：6
> 
> 时间：2013-04-17T15:46:35.443
> 
> 标签：scala

试图将我的几个 C# 项目转换为 Scala，但仍在试图弄清楚如何进行一些转换。我遇到了这段代码，如果有人可以帮助我在 Scala 中编写以下代码，我将不胜感激，我对 Select 语句中的匿名代码块特别感兴趣。

```
static void Main(string[] args)
{
  Stock stk = new Stock();
  Select(stk, a => new { a.Prices, a.Symbol });
}
public static U Select<T, U>(T data,Func<T,U> item)
{
  return item(data);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T15:57:21.510

这是一个实现。

```
class Stock(val prices: List[Double], val symbol: String) 

object CSharp {
  def select[T, U](data: T)(f: T => U): U = {
    f(data);
  }  
  def main(args: Array[String]): Unit = {
    val stk = new Stock(List(1.1, 2.2, 3.3, 4.4), "msft")
    select(stk)(a => (a.prices, a.symbol) );
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T15:56:51.640

它会有点冗长且性能较差（因为 scala 将[使用反射](https://stackoverflow.com/questions/13337976/what-does-reflective-access-of-structural-type-member-method-should-be-enabled)来做这些讨厌的事情）：

```
def select[T, U](data: T, item: T => U) = item(data)
case class Stock(price: Int, symbol: String)

val x = select(
  Stock(100, "AAPL"), 
  { stock: Stock => new { val price = stock.price; val symbol = stock.symbol }}
)

x.symbol
res2: String = AAPL 
```

一般来说，您应该更喜欢元组（[本的](https://stackoverflow.com/a/16064787/298389)回答）或案例类。

# php - Magento 自定义产品属性可见性

> ID：16064558
> 
> 赞同：7
> 
> 时间：2013-04-17T15:46:51.817
> 
> 标签：php, magento, attributes, visibility, entity-attribute-value

我一直在用大量具有大量自定义属性的产品加载我的 Magento 网上商店，但是，它们在后端的“可见”值设置为“否”。

除了这是我（以及帮助我​​填写此产品数据库的人）的错误之外，我似乎找不到将属性可见性设置为“是”的方法。

我尝试在`attribute_id`(102) 中`eav_attribute`查找`attribute_code`“可见性”，并想将其设置为 中的另一个值`catalog_product_entity_int`，但后来我突然意识到“我必须至少有 1 个属性设置为可见，所以我必须在至少一条记录，该值不是 4"。在编写了一个排除 4 的小查询后，我发现我根本没有任何记录。

我究竟做错了什么？我在这里看错表了吗？

是否有另一种方法可以将属性本身的所有“可见”属性设置为“是”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T16:01:50.597

您要查找的表是`catalog_eav_attribute`，它有一个列`is_visible`和另一个`is_visible_on_front`：将 1 （一个）用于您要使其可见的属性。

# android - 适用于 Android 的 Google AppEngine 后端未找到已注册的设备

> ID：16064570
> 
> 赞同：1
> 
> 时间：2013-04-17T15:47:37.773
> 
> 标签：android, google-app-engine

我正在关注教程[https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)

一切似乎都工作正常，但浏览器中的后端。导航到

```
localhost:8888 
```

打开后端 UI，但找不到任何已注册的设备。我可以看到 2 个注册的模拟器

```
http://localhost:8888/_ah/admin 
```

示例 webapp 应该开箱即用，无需进行任何更改？我对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:49:48.497

发生在我身上也看到设备已注册。但不是来自本地主机：8888 没有找到任何设备。

有没有官方论坛google apps？

# opencv - 延迟在轮廓周围绘制矩形

> ID：16064578
> 
> 赞同：0
> 
> 时间：2013-04-17T15:47:50.623
> 
> 标签：opencv

我正在写废弃的物体检测器，但我有一个问题。对于找到的每个对象，我想在它周围绘制一个矩形，但延迟 10 秒（查找轮廓 -> 等待 10 秒 -> 在轮廓周围绘制矩形）但我不知道如何实现该延迟。我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:04:36.443

> C++: void drawContours(InputOutputArray image, InputArrayOfArrays contours, int contourIdx, const Scalar& color, int thickness=1, int lineType=8, InputArray hierarchy=noArray(), int maxLevel=INT_MAX, Point offset=Point() )
> 
> contourIdx – 指示要绘制的轮廓的参数。如果为负数，则绘制所有轮廓。

所以你基本上可以这样做：

```
Find contours here (not shown)

for (int i=0; i < contours.size(); ++i)
{
    drawContours(image,contours, i,...); //the "i" here shows we are drawing just the i-th contour at an iteration.
    cvWaitKey(10000);
} 
```

我很确定 opencv 只能一次识别所有轮廓，您仍然会在一次遍历中找到它们，但是只有在一张一张地绘制它们时才会实现延迟。

# android - 使用 Phonegap 或 Cordova 2.6.0 为 Android 打包 Sencha Touch 2.1.1

> ID：16064579
> 
> 赞同：0
> 
> 时间：2013-04-17T15:47:55.790
> 
> 标签：android, cordova, sencha-touch-2.1

我一直在努力让这件事发生，直到现在。我能找到的所有教程似乎都与旧版本有关或不完整。我已经按照说明找到了我能找到的东西，但无论如何我都无法让包工作。我的最新问题是，当我使用 cordova 创建一个项目时，它会生成一个空白的 AndroidManifest.xml 文件以及空白的 config.xml、strings.xml 和另一个我忘记的文件。我不想一开始就使用Phonegap，但是如果您在Sencha 中有使用本机打包程序的外部链接，它将不会在浏览器中打开这些链接。这些链接在应用程序中打开，您无法返回之前的视图。

如何克服 sencha 中的这一限制，或者如何将 Sencha 2.1.1 和 Cordova/Phonegap 2.6.0（或任何版本）与 Android 集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:23:32.283

在 ST2.1.1 的当前版本中，不使用 PhoneGap 就无法在设备浏览器中打开外部链接。我遇到了完全相同的问题，不得不使用 PhoneGap + InAppBrowser 插件（它现在是 2.3.0 以来核心的一部分）。

# java - 获取某些 Android 设备的性能指标？

> ID：16064581
> 
> 赞同：0
> 
> 时间：2013-04-17T15:47:57.633
> 
> 标签：java, android

我正在开发一个具有一些性能密集型部件的应用程序。我可以轻松地对其进行缩放以提供更流畅的体验，同时显示不太精确的信息。我想知道是否有确定给定设备功能的好方法？目标是提供最高水平的精度，同时保持用户体验流畅。这只会成为较旧或低功率设备的问题。

# java - 将 ArrayList 写入 Web 服务中的文件

> ID：16064583
> 
> 赞同：0
> 
> 时间：2013-04-17T15:48:02.603
> 
> 标签：java, web-services, web-applications, file-io, jersey

我想写一个 ArrayList 文件`data.txt`我的代码：

```
try{
    File destination = new File("data.txt");
    ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream(destination));  
    os.writeObject(userList);
    os.close();
} catch.... 
```

这不会引发任何异常，只是什么都没有。代码运行正常。此代码是否不适用于 Web 服务？*（REST @ Jersey，很确定与它无关）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:46:54.447

这里更新的代码：

```
FileOutputStream userfile = new FileOutputStream("C:\\user.dat");
ObjectOutputStream userstream = new ObjectOutputStream(userfile);
userstream.writeObject(userList);
userstream.close(); 
```

请注意“C:\data.dat”代码无法仅使用 data.dat 运行（在源文件夹上没有创建可见的文件。

输入代码如下：

```
ArrayList<User> dataList; // ** User is a custom Class
....
FileInputStream userfile = new FileInputStream("C:\\user.dat");
ObjectInputStream usersteam = new ObjectInputStream(userfile);
dataList = (ArrayList<User>)usersteam.readObject();
usersteam.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:26:39.717

使用文件上传 servlet 而不是 JAX-RS 端点。从长远来看，它更容易。关于从数组列表写入文件，此代码会将其写入文件并检查文件是否已上传。

```
private List<File> files=new ArrayList<File>();
  private String filename="yourfilename.dat"

     private boolean fileHasAlreadyBeenUploaded() throws IOException, ClassNotFoundException {

    boolean hasFileAlreadyBeenUploaded=false;
    File currentfile=new File(fileName);
    if(!currentfile.exists()){
        currentfile.createNewFile();
        ObjectOutputStream output 
        = new ObjectOutputStream(
              new FileOutputStream(currentfile));
        files.add(currentFile);
        output.writeObject(currentFile);
        output.close();
        hasFileAlreadyBeenUploaded=false;
    }
    else{
         ObjectInputStream input 
            = new ObjectInputStream(
                  new FileInputStream(currentfile));

         files = (List<File>) (input.readObject());
         input.close();
        for(int i=0;i<files.size();i++){
            if(FileUtils.contentEquals(files.get(i), currentfile)){
                hasFileAlreadyBeenUploaded=true;
            }   
        }
        if(!hasFileAlreadyBeenUploaded){
            ObjectOutputStream output 
            = new ObjectOutputStream(
                  new FileOutputStream(fileName));
            files.add(currentfile);
            output.writeObject(currentfile);
            output.close();
        }
    }
    return hasFileAlreadyBeenUploaded;

} 
```

然后你可以用它做任何你想做的事情。对于您的 Web 服务，您最好使用 JAX-RS 端点的 Fileupload servlet。注释 @Webservlet 将为您提供该端点

请查看以下链接以获取该示例 [文件上传 servlet java](http://docs.oracle.com/javaee/6/tutorial/doc/glraq.html)

# c - 简单的 OpenCL 随机发生器

> ID：16064591
> 
> 赞同：1
> 
> 时间：2013-04-17T15:48:18.443
> 
> 标签：c, opencl

我一直在网上寻找一个简单的在线 OpenCL 数字生成器。我找不到任何易于使用的东西。

我想要以下内容：

```
int generateRandomNumber(int fromNumber, int toNumber)
{
    int num = functionOfRandomness();
    return num;
} 
```

如果有人知道我如何获得两个值之间的随机数的示例，将不胜感激。它不必是一个复杂的随机系统，只需简单快速地工作

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:24:03.527

我从 geeks3d 的 Real-Time OpenCL Path Tracer 中提取了以下代码。内核是纯文本的。这是我第一次学习如何使用 OpenCL 的方式。

[http://www.geeks3d.com/20120502/laguna-real-time-opencl-path-tracer/](http://www.geeks3d.com/20120502/laguna-real-time-opencl-path-tracer/)

```
float4 rand(uint2 *state)
{
    const float4 invMaxInt = (float4) (1.0f/4294967296.0f, 1.0f/4294967296.0f, 1.0f/4294967296.0f, 0);
    uint x = (*state).x * 17 + (*state).y * 13123;
    (*state).x = (x<<13) ^ x;
    (*state).y ^= (x<<7);

    uint4 tmp = (uint4)
    ( (x * (x * x * 15731 + 74323) + 871483),
      (x * (x * x * 13734 + 37828) + 234234),
      (x * (x * x * 11687 + 26461) + 137589), 0 );

    return convert_float4(tmp) * invMaxInt;
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-17T16:38:40.950

C 中的标准 rand() 函数将产生随机浮点数。

您只需要在您自己的函数中调用它并通过内部 RAND_MAX 变量调整输出。以下示例应在所需范围内生成一个随机浮点数。如果这是您需要的，您可以轻松地将结果转换为**int 。**

```
#include<stdlib.h>

float myrand( float setmin, float setmax )
{

    float range = setmax - setmin ; 

    if(RAND_MAX>=range) 
       return ( setmin + rand()/(RAND_MAX/range) ) 

    else
        return ( setmin + rand()/(range/RAND_MAX) ) 

} 
```

# testng - TestNG 测试用例没有被执行

> ID：16064592
> 
> 赞同：0
> 
> 时间：2013-04-17T15:48:25.347
> 
> 标签：testng

我有一个带有@Test 注释的测试市场。但是当我运行测试用例时，它显示测试运行：0，失败：0，跳过：0 我正在从 Eclipse 中运行测试用例。我在 Eclipse 中安装了 testng 插件。

测试类代码：

```
 public class ModelledEventBus  {

        ModelledEventBusOperator dummyOperator = new ModelledEventBusOperator();

        /**
         * Dummy Test Case to show the interworkings of TAF classes
         */
        @VUsers(vusers = { 1, 10, 100 })
        @Test(dataProvider = "dummyTestData", dataProviderClass = ModelledEventBusTestDataProvider.class)
        public void dummyTestCase(String stringToPrint) {
            setTestcase("TC-DUMMY", "Dummy Test Case");
            setTestInfo("Testing " + stringToPrint);
            assertEquals(dummyOperator.operate(stringToPrint),
                    dummyOperator.expected());
        }
} 
```

@Test 中的属性是自定义的。

```
public class ModelledEventBusTestDataProvider {

    // Dummy Test Data Provider Code generated to show interworkings of TAF Classes
    @DataProvider(name="dymmyTestData")
    public static String[][] dummyTestData(){
            String[][] result = {{"First String"},{"Second String"}};
            return result;
    }

} 
```

测试NG版本：6.8.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:15:01.043

您的数据提供者名称有错字。

```
@Test(dataProvider = "dummyTestData", dataProviderClass = ModelledEventBusTestDataProvider.class)
        public void dummyTestCase(String stringToPrint) {

 @DataProvider(name="dymmyTestData")
    public static String[][] dummyTestData(){ 
```

一个是 d* *u* *mmyTestData 和其他 d* *y* *mmyTestData。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:23:15.103

我创建了 suite.xml 文件，它现在正在运行。我不太确定问题到底是什么，但我现在有一个正在运行的测试用例。

# iphone - 如何设置 UITableView 部分以每 5 行单元格开始新部分

> ID：16064594
> 
> 赞同：2
> 
> 时间：2013-04-17T15:48:28.080
> 
> 标签：iphone, xcode, uitableview

我想知道当表格中有超过 5 行单元格时 UITableViewController 是否可以自动打开现在部分？具体来说，我希望将项目 1 到项目 5 放在第 1 节中，当用户添加更多项目时，新项目将自动放置在第 2 节中。如何才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:03:37.663

使用`numberOfRowsInSection`：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
     return 5;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    int sections = self.YOUR_DATASOURCE_ARRAY.count / 5;
    return sections;
} 
```

有关更多信息，请参阅`UITableViewDataSourceProtocol`参考：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)

# java - 如何使用特定基数将任何有效字符串解析为整数？

> ID：16064596
> 
> 赞同：0
> 
> 时间：2013-04-17T15:48:39.080
> 
> 标签：java, android, parsing, integer, radix

## 背景

使用[Integer.parseInt(someIntString, radix)](http://developer.android.com/reference/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)并不总是有效，在某些情况下可能会返回 NumberFormatException。

我检查了 API，它说会返回这样的异常：

> 如果字符串不能被解析为整数值，或者 radix < Character.MIN_RADIX || 基数 > Character.MAX_RADIX。

导致异常的示例代码：

```
System.out.println(Integer.parseInt("ff00ff00",16)); 
```

在java上我得到同样的例外。

由于一个整数包含 4 个字节，这应该仍然有效，但它没有。

这是一个证明这样的事情是可能的：

```
final String input="ff00ff00";
int output=0;
for(int i=0;i<input.length();++i)
  {
  output<<=4;
  final char c=input.charAt(i);
  if(c>='a')
    output+=c-'a'+10;
  else output+=c-'0';
  }
System.out.println(output);
System.out.println(Integer.toHexString(output)); 
```

请注意，我知道使用[Color.parseColor()](http://developer.android.com/reference/android/graphics/Color.html#parseColor%28java.lang.String%29)函数（它可能与我编写的代码非常相似），但我想处理任何基数而不仅仅是十六进制。

我也知道使用 parseInt 支持负值解析，所以这就是它可能导致异常的原因。

## 问题

是否有用于使用任何基数将字符串解析为整数的内置函数或已知算法？

我当然假设整数变量可以保存该值（最多使用 4 个字节）并且数字的符号是无关紧要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:01:08.023

好的，我认为这个问题没有内置的解决方案，但是使用我在问题中编写的代码很容易解决它：

```
public static int parseInt(final String input,final int radix)
  {
  int output=0;
  for(int i=0;i<input.length();++i)
    {
    output*=radix;
    final char c=input.charAt(i);
    if(c>='a')
      output+=c-'a'+10;
    else output+=c-'0';
    }
  return output;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T01:27:07.587

问题是 java 不支持无符号整数，因为“ff00ff00”大于正整数，java 将其视为超出范围。一个简单的解决方案是使用 Long.parseLong(string, radix)，理想情况下，您可以将受影响变量的类型更改为 long，但您也可以通过一些棘手的转换使其工作。

# javascript - IE 条件检查

> ID：16064600
> 
> 赞同：0
> 
> 时间：2013-04-17T15:48:47.450
> 
> 标签：javascript, internet-explorer, if-statement, cross-browser

在 javascript 中，我有一个对象的属性，只有当它可用时才尝试访问它，因此在使用该对象之前我会进行有条件的 null/undefined 检查。

```
if( object !== undefined && object != null ) // Occurs in IE8
{
    // Use object
    // Object.someProperty
} 
```

在 FF 和 Chrome 上，定义的行为符合预期。当他们看到 object 为 null 时，它不会进入 if 语句。但是，在 IE 中，它抱怨不应访问“someProperty”，因为 Object 为空，并且无论如何都会进入。但这就是我有条件检查的原因，FF & Chrome 意识到了这一点。

**我的问题是，当有条件检查停止它时，为什么即使在*if 语句中*尝试使用该对象执行行？**

此外，该问题**的解决方案**如下：

```
if( object !== undefined && object != null && true )
{
    // Use object
    // Object.someProperty
} 
```

注意未定义和空检查后的“&& true”。这似乎迫使 IE 意识到条件应该真正评估为假，并且它按预期工作。

因此，尽管似乎有一种方法可以“让它发挥作用”，但我的上述问题仍然存在。

提前谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:58:49.407

`object`仅当您未定义或声明它时才应为 undefined，并且`object`仅`null`当您将其显式设置为时才应为`null`.

`object`一个例子`undefined`：

```
var object; 
```

`object`一个例子`null`：

```
var object = null; 
```

我检查它的方式是：

```
if (object) {

} 
```

这将确保这`object`不是虚假的。假的，它是以下值之一：

```
false
0
-0
""
null
undefined
NaN 
```

如果你不确定它`object`是否被声明过，你需要检查它的类型：

```
if (typeof object !== "undefined") {

} 
```

但是，如果您还需要查看它是否不为空，请使用：

```
if (typeof object !== "undefined" && object !== null) {

} 
```

当然，您可以将`typeof`支票与真实情况结合起来：

```
if (typeof object !== "undefined" && object) {

} 
```

如果您需要稍后检查它是否具有属性，请使用：

```
if ("someProperty" in object) {

} 
```

# jquery - Jquery 选择一个 img 并提交它。（形式构造）

> ID：16064607
> 
> 赞同：0
> 
> 时间：2013-04-17T15:48:58.160
> 
> 标签：jquery, image, jquery-selectors, this, form-submit

这是我的问题，我想选择一张图片并使用 jquery 提交，所以我有不同的图片，我选择一个并提交。

所以我的想法是，当我单击 LabBox 中的某个图像时，例如“images/dontlike_OFF.png”，我创建一个选择属性（`$(this).attr('select', 'true');`稍后，当我单击时，`sendLabForm`我想获取我拥有的图像的名称使用选择器点击`$(#LabBox img[attribute=Value])`。

我相信这个创建属性的想法很奇怪，但我真的可以看到，在萤火虫上，该属性确实被创建了，问题只是当我想用所选属性获取该 img 的名称时。

所以，我的问题是：为什么这是不可能的？当我单击提交按钮而不使用通常的 html 表单时，有什么方法可以获取我选择的 img 的名称？

```
<div id='LabBox'>
    <img alt="dontlike" name="dlike" src="images/dontlike_OFF.png"/>
    <img alt="check" name="check" src="images/check_OFF.png"/>
    <img alt="funny" name="funny" src="images/funny_OFF.png"/>
    <img alt="idea" name="gidea" src="images/idea_OFF.png"/>
    <img alt="imp" name="imptt" src="images/imp_OFF.png"/>
 </div>   
    <script type="text/javascript">

        $("#LabBox img").click(function () {
                $(this).attr('select', 'true');     
            });

        $("#sendLabForm").click(function(){
            console.log($("#LabBox img[select='true']").name);     
        });

    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:11:10.470

您应该使用 data()，如下所示：

[演示](http://jsfiddle.net/DJ42v/)

```
$("#LabBox img").click(function () {
     $(this).data('select', true);
 });

 $("#sendLabForm").click(function () {
     var selectedImgs = [];
     $("#LabBox img").each(function () {
         $(this).data('select') ? selectedImgs.push(this.name) : false;
     });
     alert(selectedImgs.join(','));
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:53:27.067

您应该做的是创建与图像关联的复选框列表（或使用 data 属性，如下所述）。如果您希望用户单击图像，您可以隐藏复选框，只需在图像和复选框之间创建关联。当您提交表单时，复选框值中的图像 url 字符串被提交。

你不应该**做**的是发明属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:51:42.183

这是我的问题的解决方案。实际上，您可以创建属性，您只需指定`.attr()`获取它们的方法。

这真的有效。

```
$("#LabBox img").click(function () {

        $(this).attr('select', true);
});

$("#sendLabForm").click(function(){

    console.log( $('#LabBox img[select="true"]').attr('name'));

    }); 
```

目前我认为这种方法没有任何缺点，但如果您发现这种方法有任何问题，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T17:05:06.210

为什么不简单地给选定的图像一个类别？

```
$('#LabBox img').click(function(e){
    $(this).toggleClass('active');
});

$('form').submit(function(){
    console.log( $('#LabBox img.active') );
}); 
```

# shell - 在 Shell 脚本中显示不带根的文件名

> ID：16064613
> 
> 赞同：0
> 
> 时间：2013-04-17T15:49:20.653
> 
> 标签：shell, unix

我有两个关于 Shell 脚本的问题。我正在做一个简单的脚本来显示大于作为参数传递的数字的文件列表。

```
find $1 -size +$2c -exec ls -lh {} \;| awk '{print $9 -> $5}' 
```

其中`$1`是根，`$2`是大小，`$9`分别`$5`是文件名和大小。

第一个问题：有没有办法在没有根的情况下显示文件名？我只想要文件的名称。第二个问题：有没有办法，如果我不指定根，shell 脚本会采用实际的根？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:58:58.237

您不能告诉`ls`只打印文件的基本名称。但是，您可以使用打印大小和基本名称的`-printf`操作：`find`

```
find $1 -size +$2c -printf "%f -> %s\n" 
```

如果您想要人类可读格式的大小，一种方法是仅用于`find`定位您想要的文件，然后打印每个结果的基本名称和大小：

```
find $1 -size +$2c | while read file; do echo $(basename "$file") "->" $(ls -lh "$file" | awk '{print $5}') ; done 
```

编辑：

最后打印总计意味着在循环中建立总计：

```
#! /bin/bash
total=0
while read file; do
    total=$(($total+$(ls -l "$file" | awk '{print $5}')))
    echo $(basename "$file") "->" $(ls -lh "$file" | awk '{print $5}')
done < <(find $1 -size +$2c)
echo $total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:52:21.860

听起来你想要这个`basename`命令。

```
$ basename /foo/bar/bat/baz/whatever.txt
whatever.txt 
```

# syntax - 使 sqlcmd 与批处理分隔符一起工作

> ID：16064616
> 
> 赞同：0
> 
> 时间：2013-04-17T15:49:29.827
> 
> 标签：syntax, batch-processing, sqlcmd

背景资料：

我正在尝试设置批处理作业以在不同的 sql 服务器之间同步存储过程。我确实将所有存储过程导出到单独的 .sql 文件到我的文件夹中。每当我想为这些多台服务器创建一个新的存储过程或更改它时，我都会在一台服务器上对其进行测试，直到我得到它想要的方式。之后，我将其导出到我的文件夹中。然后将其部署到其他服务器，我只需执行一个批处理 - 就是这样。

* * *

我几乎已经按照我想要的方式弄清楚了我的批次。唯一有问题的是，sqlcmd 似乎不喜欢标准的批处理分隔符 'GO' ( `'Incorrect syntax near 'GO'.'`)。因此，我已将默认批处理分隔符更改为“RUN”，在我的 .sql 文件中将每个“GO”命令替换为“RUN”并添加`-c RUN`到我的`sqlcmd`命令中。

但是它告诉我`'Incorrect syntax near 'RUN'.'`。

出于测试目的，我只是用 1 个缩小的 sql 文件试了一下，如下所示：

```
USE [MyDatabase]
GO 
```

即使这样也没有用。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T01:28:16.267

尝试省略`GO`或`RUN`从这些脚本中删除。您可以在没有它们的情况下更改数据库上下文。

你应该可以做这样的事情：

```
USE MyDatabase;
--First query

USE MyOtherDatabase;
--Second query 
```

# python - 使用具有属性的自定义属性装饰方法

> ID：16064618
> 
> 赞同：0
> 
> 时间：2013-04-17T15:49:31.947
> 
> 标签：python, django, attributes, decorator, python-decorators

我有一些具有属性的方法（使用 .Net 术语）。就像是。

```
#Example Usage
@RequireLoggedIn
def SomeAuthorisedFunction():
    # ... 
```

该属性定义为

```
def RequireLoggedIn(func):
    func.AuthenticationRequired = True
    return func 
```

然后我可以检查是否已使用`hasattr(view_func, 'AuthenticationRequired')`. 我想做的是这样的......

```
@RequireRole('Administrator')
def SomeAuthorisedFunction():
    # ... 
```

我试过定义这样的属性：

```
def RequireRole(func, Role):
    func.RequiresRole = Role
    return func 
```

但`@RequireRole('Administrator')`结果`missing positional argument "Role"`和`@RequireRole(Role='Administrator')`结果`missing positional argument "func"`。

如何指定属性的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:54:54.960

您需要创建一个*嵌套*函数；该`RequireRole`函数应返回实际的装饰器函数：

```
def RequireRole(Role):
    def decorator(func):
        func.RequiresRole = Role
        return func
    return decorator 
```

`@expression`语法无非就是语法糖，如下设置：

```
@decorator
def foo(): pass 
```

被翻译成：

```
def foo(): pass
foo = decorator(foo) 
```

反而。但是这个`decorator`部分*本身也*可以是一个表达；这就是您尝试使用它的方式。所以当你`@RequireRole('Administrator')`用作装饰器时，你真的是这样做的：

```
def SomeAuthorisedFunction():
    # ...
SomeAuthorisedFunction = RequireRole('Administrator')(SomeAuthorisedFunction) 
```

注意那里的*双重*函数调用！这就是我的版本`RequireRole()`返回嵌套函数的原因。应用它时会发生以下情况：

1.  `def SomeAuthorizedFunction(): functionbody`被执行。
2.  `RequireRole('Administrator') is executed. It returns a scoped`装饰器（）`函数。
3.  这个返回的函数被调用并传入`SomeAuthorizedFunction`步骤 1 中的函数。
4.  作用域`decorator()`函数将`.RequiresRole`属性添加到函数中，并在步骤 2 中`Role`传入作用域值`RequireRole`。函数被返回。
5.  Python 将第 4 步的返回值赋给 name `SomeAuthorizedFunction`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:53:41.500

您的`RequireRole`函数必须返回一个装饰器函数。这可以通过嵌套函数轻松完成，如下所示：

```
>>> def RequireRole(role):
...   def RequireRole(func):
...     func.RequiresRole = role
...     return func
...   return RequireRole
... 
>>> @RequireRole('Administrator')
... def SomeAuthorisedFunction():
...   pass
... 
>>> print SomeAuthorisedFunction.RequiresRole
Administrator
>>> 
```

# ruby - 如何在 Ruby 1.9 中调试需求

> ID：16064619
> 
> 赞同：3
> 
> 时间：2013-04-17T15:49:36.583
> 
> 标签：ruby, rubygems

根据`the Tin Man`的意见，我提出了一个新问题。

原始问题在这里：[Rubygem 如何需要所有宝石？](https://stackoverflow.com/q/16063144/342366)

我用来调试的原始代码：

```
require 'debugger'
debugger
require 'thor' 
```

这是困境：

1.  使用默认调试`-rdebug`，我不能去 Rubygem 的源代码
2.  使用`debugger`gem 进行调试，我必须`require`在调试之前进行（我在上一个问题中尝试过的方式，这是不可接受的，因为在我到达那里之前发生了一些重要的事情）

希望能找到调试IT的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T20:04:39.083

`rubygems`需要时，它会用自己的方法[替换 Ruby 的`Kernel.require`方法，在已安装的 gems 中搜索所需的文件](https://github.com/ruby/ruby/blob/v1_9_3_392/lib/rubygems/custom_require.rb#L21-34)。与 Ruby 1.9 及更高版本的集成基本上是[在启动期间](https://github.com/ruby/ruby/blob/v1_9_3_392/ruby.c#L1374)[调用`require 'rubygems'`](https://github.com/ruby/ruby/blob/v1_9_3_392/ruby.c#L1374)。这可以通过可执行文件的（记录不`--disable-gems`充分的）选项来禁用。`ruby`在显式调用`require 'rubygems'`.

```
# start with ruby --disable-gems
require 'debug' #standard library debug - doesn't load rubygems

require 'rubygems' #now you can debug this 
```

如果您想使用[`debugger`gem](http://rubygems.org/gems/debugger)进行调试，它仍然是可能的，但有点棘手，因为您必须在`debugger`不加载 Rubygems 的情况下加载。为此，您需要手动设置加载路径以包含 Debugger 的 lib 目录，以及 Debugger 所依赖的任何 gem 的 lib 目录。`require 'debugger'`这基本上是 Rubygems 在加载Rubygems 的情况下为您所做的事情。

要确定调试器需要什么库，可以使用以下命令：

```
 ruby -e "lp = $:.dup; gem 'debugger'; puts $: - lp" 
```

这是一个小 Ruby 脚本，它首先获取加载路径的副本（`$:`是加载路径，您也可以使用`$LOAD_PATH`），然后激活 Debugger gem，然后打印出新加载路径与原始加载路径之间的差异。这将为您提供激活`debugger`添加到加载路径的目录。

在我的机器上看起来像这样：

```
$ ruby -e "lp = $:.dup; gem 'debugger'; puts $: - lp"
/Users/matt/.rvm/gems/ruby-1.9.3-p385/gems/columnize-0.3.6/lib
/Users/matt/.rvm/gems/ruby-1.9.3-p385/gems/debugger-ruby_core_source-1.2.0/lib
/Users/matt/.rvm/gems/ruby-1.9.3-p385/gems/debugger-linecache-1.2.0/lib
/Users/matt/.rvm/gems/ruby-1.9.3-p385/gems/debugger-1.5.0/lib 
```

您现在可以使用它来创建脚本以使用 Debugger 进行调试`require 'rubygems'`：

```
# start with ruby --disable-gems

# set up the load path without loading rubygems
$:.unshift '/Users/matt/.rvm/gems/ruby-1.9.3-p385/gems/columnize-0.3.6/lib'
$:.unshift '/Users/matt/.rvm/gems/ruby-1.9.3-p385/gems/debugger-ruby_core_source-1.2.0/lib'
$:.unshift '/Users/matt/.rvm/gems/ruby-1.9.3-p385/gems/debugger-linecache-1.2.0/lib'
$:.unshift '/Users/matt/.rvm/gems/ruby-1.9.3-p385/gems/debugger-1.5.0/lib'

# require debugger and start it
require 'debugger'
debugger

require "rubygems" #now you can debug this with debugger 
```

# asp.net - 我有一个 ViewState 问题

> ID：16064621
> 
> 赞同：2
> 
> 时间：2013-04-17T15:49:37.783
> 
> 标签：asp.net, viewstate

`EnableViewState="false"`和的含义是`EnableViewState="true"`什么？

我知道`EnableViewState="false"`= 关闭 ViewState 也 `EnableViewState="true"`= 打开 ViewState

`EnableViewState="false"`但是和有什么区别`EnableViewState="true"`？

我试过这段代码：

```
<form runat="server">
<asp:TextBox ID="TextBox1" EnableViewState="true" runat="server">
</asp:TextBox><asp:Button ID="Button1" runat="server" Text="Button" />
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</form> 
```

我真的很困惑。当我使用时`EnableViewState="true"`，我输入了一些值`textbox`并单击我的按钮。现在该值在`textbox`. 我设置时的过程相同`EnableViewState="false"`。

那么**当`EnableViewState="true"`和时会发生什么`EnableViewState="false"`？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:54:16.763

Texbox 不使用 Viewstate 这里是解释所有[链接解释的链接](http://aspadvice.com/blogs/joteke/archive/2004/03/15/2273.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T06:30:23.137

ViewState 用于保存在服务器端设置的控件的属性。

因此，举一个人为的例子，如果您在 Page_Load 中执行以下操作：

```
if (!IsPostBack)
{
    TextBox1.ForeColor = ...;
} 
```

那么您设置的颜色将在 ViewState 中的回发中保留（如果已启用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:43:25.297

通常，您应该在 asp.net 页面上的所有控件上使用 EnableViewState="false"。当您想要保留控件本身的某些视觉外观时，通常需要控件的视图状态。例如，如果您更改控件的背景颜色并且希望在回发中保持该颜色，请使用 EnableViewState="true"。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T06:07:34.113

并非所有控件都受视图状态的影响。如果视图状态被禁用，实现 IEventHandler 或 IDataHandler 的控件在页面回发时不会受到影响。文本框就是这样一种控件。如果你想在你的代码中看到效果。尝试在运行时在回发时设置标签值，例如单击按钮并检查结果

# java - 无法弄清楚我的数组列表的输出

> ID：16064622
> 
> 赞同：0
> 
> 时间：2013-04-17T15:49:52.483
> 
> 标签：java, loops, arraylist

这可能是一个愚蠢的问题，但它让我感到沮丧。我在循环期间将一个对象添加到我的数组列表中，但在循环之外，所有数组列表都被数组中的最后一个元素覆盖。它是这样的。

```
while(fin.hasNextLine())
{
    String line = fin.nextLine();
    String[] user = line.split(",");
    r.add(new User(user[0], user[1]));
    System.out.println(r.get(count).getName());
    count++;
} 
```

这给了我在循环期间类似这样的输出（USER1、USER2、USER3 等）。然而，在循环之后，我现在有这样的输出（USER500、USER500、USER500）。

```
while(fin.hasNextLine())
{
    String line = fin.nextLine();
    String[] user = line.split(",");
    r.add(new User(user[0], user[1]));
    System.out.println(r.get(count).getName());
    count++;
}

for (int i  =0; i < r.size(); i++)
{
    System.out.println(r.get(i).getName());
} 
```

我设法验证这是我遇到问题的类，并且只有一种其他方法使用我注释掉的此类中的数组列表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T15:53:15.360

我将不得不戴上我的通灵调试护目镜，但我预测你的`User`课看起来像这样：

```
public class User {
    private static String name;

    public User(String x, String somethingElse) {
        name = x;
    }

    public String getName() {
        return name;
    }
} 
```

注意`name`是静态的。因此，这是*一个*变量 -而*不是*每个. `User`您希望它是一个*实例*字段，以便每个`User`对象都有不同的名称变量。

# unix - 使用轮询的 TCP 超时

> ID：16064625
> 
> 赞同：0
> 
> 时间：2013-04-17T15:49:54.830
> 
> 标签：unix, network-programming

我目前正在尝试向打开 tcp 连接的方法添加超时。我大致使用的是[此处](http://developerweb.net/viewtopic.php?pid=13486)找到的指南，只是我尝试使用`poll()`而不是选择。然而，我的调用`poll()`立即返回通知 fd 已准备好写入，尽管连接未打开。这是我制作的简化代码示例：

```
#include <cstring>
#include <poll.h>
#include <unistd.h>
#include <fcntl.h>
#include <netdb.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <cerrno>
#include <iostream>
#include <cstdlib>

int main() {
   struct addrinfo hints;

   ::memset( &hints, 0, sizeof( hints ) );
   hints.ai_socktype = 0;
   hints.ai_family = AF_UNSPEC;
   hints.ai_protocol = 0;
   hints.ai_flags = AI_CANONNAME;

   struct addrinfo * info;

   if( ::getaddrinfo( "127.0.0.1", "49999", &hints, &info ) != 0 ) {
      std::cerr << "Error: getaddrinfo" << std::endl;
      exit( 1 );
   }

   int soc;

   if( (soc = ::socket( info->ai_family, info->ai_socktype, info->ai_protocol ) ) < 0 ) {
      std::cerr << "Erorr: socket" << std::endl;
   }

   // Set mode to non-blocking for timeout handling
   int arg;
   if( (arg = ::fcntl( soc, F_GETFL, 0 )) < 0 ) {
      std::cerr << "Error: fcntl" << std::endl;
      exit( 1 );
   }

   arg |= O_NONBLOCK;
   if( ::fcntl(soc, F_SETFL, arg) < 0) {
      std::cerr << "Error: fcntl" << std::endl;
      exit( 1 );
   }

   int res = ::connect(soc,info->ai_addr,info->ai_addrlen);

   if( (res != 0) && (errno != EINPROGRESS) ) {
      std::cerr << "Error: connect" << std::endl;
      exit( 1 );
   }

   pollfd pfd;
   pfd.fd = soc;
   pfd.events = POLLOUT;

   res = ::poll( &pfd, 1, 50000 );

   if( res < 0 ) {
      std::cerr << "Error: poll" << std::endl;
      exit( 1 );
   }
   else if( res == 0 ) {
      std::cerr << "Error: poll" << std::endl;
      exit( 1 );
   }

   // Set blocking mode again
   if( (arg = ::fcntl(soc, F_GETFL, NULL)) < 0) {
      std::cerr << "Error: fcntl" << std::endl;
      exit( 1 );
   }
   arg &= (~O_NONBLOCK);
   if( ::fcntl(soc, F_SETFL, arg) < 0) {
      std::cerr << "Error: fcntl" << std::endl;
      exit( 1 );
   }

   return 0;
} 
```

由于我的机器上的端口`49999`已关闭，我预计会出现错误。相反，程序以返回值结束`0`。

我还尝试使用上面链接中的选择示例。如果我将调用替换为`poll()`完整示例，则会收到以下错误消息：

`Operation now in progress: Operation now in progres`

我尝试使用 select 减少代码，但是当我减少它时，我得到一个正确的`connection refused message`.

**编辑**：

注意：“操作正在进行中”消息是由于我这边的错误处理代码中的错误造成的。更正此问题后，我从“getsockopt()”收到了正确的错误消息。这也解释了为什么我不能减少这个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:56:18.070

如果连接不成功，您只需要进行轮询。连接到“localhost”时，它通常会立即成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:57:51.143

问题在于丢失的`getsockopt()`电话。我假设`poll()`如果不成功会返回一个错误`connect()`，但只要状态可以确定，它就会通过。一旦我添加了`getsockopt()`示例中的调用，它就可以正常工作了。

下面是一些使用 poll 的（不是那么干净的）示例代码：

```
#include <cstring>
#include <poll.h>
#include <unistd.h>
#include <fcntl.h>
#include <netdb.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <cerrno>
#include <iostream>
#include <cstdlib>
#include <cstdio>

int main() {
   struct addrinfo hints;

   ::memset( &hints, 0, sizeof( hints ) );
   hints.ai_socktype = 0;
   hints.ai_family = AF_UNSPEC;
   hints.ai_protocol = 0;
   hints.ai_flags = AI_CANONNAME;

   struct addrinfo * info;

   if( ::getaddrinfo( "127.0.0.1", "49999", &hints, &info ) != 0 ) {
      std::cerr << "Error: getaddrinfo" << std::endl;
      exit( 1 );
   }

   int soc;

   if( (soc = ::socket( info->ai_family, info->ai_socktype, info->ai_protocol ) ) < 0 ) {
      std::cerr << "Erorr: socket" << std::endl;
   }

   // Set mode to non-blocking for timeout handling
   int arg;
   if( (arg = ::fcntl( soc, F_GETFL, 0 )) < 0 ) {
      std::cerr << "Error: fcntl" << std::endl;
      exit( 1 );
   }

   arg |= O_NONBLOCK;
   if( ::fcntl(soc, F_SETFL, arg) < 0) {
      std::cerr << "Error: fcntl" << std::endl;
      exit( 1 );
   }

   int res = ::connect(soc,info->ai_addr,info->ai_addrlen);

   if( res < 0 ) {
      if( errno == EINPROGRESS ) {
         pollfd pfd;
         pfd.fd = soc;
         pfd.events = POLLOUT;

         std::cout << "Polling" << std::endl;
         res = ::poll( &pfd, 1, 50000 );

         if( res < 0 ) {
            std::cerr << "Error: poll" << std::endl;
            exit( 1 );
         }
         else if( res == 0 ) {
            std::cerr << "Error: poll" << std::endl;
            exit( 1 );
         } else {
            socklen_t lon = sizeof(int);
            int valopt;
            if (getsockopt(soc, SOL_SOCKET, SO_ERROR, (void*)(&valopt), &lon) < 0) {
               fprintf(stderr, "Error in getsockopt() %d - %s\n", errno, strerror(errno));
               exit(0);
            }
            // Check the value returned...
            if (valopt) {
               fprintf(stderr, "Error in delayed connection() %d - %s\n", valopt, strerror(valopt));
               exit(0);
            }
         }
      }
      else {
         std::cerr << "Error: connect" << std::endl;
         exit( 1 );
      }
   }

   // Set blocking mode again
   if( (arg = ::fcntl(soc, F_GETFL, NULL)) < 0) {
      std::cerr << "Error: fcntl" << std::endl;
      exit( 1 );
   }
   arg &= (~O_NONBLOCK);
   if( ::fcntl(soc, F_SETFL, arg) < 0) {
      std::cerr << "Error: fcntl" << std::endl;
      exit( 1 );
   }

   return 0;
} 
```

# jquery - 如何在gridview中读取/获取行的CSS背景颜色

> ID：16064627
> 
> 赞同：3
> 
> 时间：2013-04-17T15:49:56.173
> 
> 标签：jquery, css, colors, find, rows

我已经通过 CSS 设置了一行的背景颜色

```
$("#gv tr:has(td)").each(function () {
                $(this).css({ "background-color": "green" });
}) 
```

在此之后，添加了某些行

如何遍历行并再次找到“绿色”行？

```
$("#gv tr:has(td)").each(function () {
             ? (if row == green){
               }
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:51:50.307

使用 css() 获取值`background-color`

```
$("#gv tr:has(td)").each(function () {
     if($(this).css("background-color") == "green")
     {
     }
}); 
```

您还可以使用 DOM 对象来获取颜色

**[现场演示](http://jsfiddle.net/rajaadil/883b6/)**

```
$("#gv tr:has(td)").each(function () {
     if(this.style.backgroundColor == "green")
     {
     }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T15:55:40.920

如果您决定将背景颜色从绿色更改怎么办？

**作为替代解决方案**，如果您的应用程序允许，我建议您只需将一个类添加到您希望稍后选择的每个行元素。这将比通过背景颜色识别元素更易于维护和自我记录。例如

```
<td class="main-class green></td> 
```

如果您向适当的元素添加了一个类，那么您可以通过它们的选择器轻松选择所有*绿色*元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:52:09.053

尝试：

```
if ($(this).css("background-color") === "green") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T15:53:26.257

if($(this).css("background-color") == "green") { ... }

# ios - 边框半径在 ios4 中不起作用？

> ID：16064628
> 
> 赞同：1
> 
> 时间：2013-04-17T15:50:05.867
> 
> 标签：ios, css, ios4

我正在使用边界半径：50%；

这在IOS4中不起作用？

但[http://caniuse.com/#search=border-radius](http://caniuse.com/#search=border-radius)说有吗？

嗯？这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:55:21.513

在IOS4中，

好像不支持border-radius:50%？

因此不得不想出一些 JS 来计算像素的百分比。

就像是：

```
var radius = circleWidth / 2;
$jq('.circle').css('border-radius', radius + "px") 
```

似乎也没有在任何地方记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:01:07.707

根据[css3.info](http://www.css3.info/preview/rounded-border/)：百分比是指边框的相应尺寸。
你的盒子有定义的高度/宽度吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:32:54.347

它是否适用于其他移动浏览器？

也许您需要在其中添加 -webkit- 前缀。

# c# - 在 WCF 服务中使用 ASMX Web 服务实体

> ID：16064629
> 
> 赞同：1
> 
> 时间：2013-04-17T15:50:08.517
> 
> 标签：c#, wcf, asmx

我们有一个很好的旧 .asmx Web 服务（我们称之为“消息”Web 服务），我们必须保留它以实现向后兼容性。.asmx 服务公开了这个方法：

```
[WebMethod(Description = "Do Something")]
public int DoSomething(Entity1 e)
{
    ... 
} 
```

此 Web 服务使用一些从 DLL 引用的实体，例如：

```
namespace Software.Project.Entities
{
    [DataContract]
    public class Entity1
    {
        [DataMember]
        public string property1{ get; set; }
        // Lots of other properties...
    }
} 
```

全新的 WCF 服务也使用此 DLL。现在，我必须从 WCF 调用旧的 .asmx 方法。为此，在 WCF 项目中，我使用“添加服务引用”向导（高级 - 添加 Web 引用）添加了对 .asmx 项目的引用。

现在，太好了！我可以通过这种方式从 WCF 调用 DoSomething 方法：

```
Entity1 e1 = new Entity1();
Software.Project.WCFService.ServiceReferenceName.Message m = new Software.Project.WCFService.ServiceReferenceName.Message();
m.Url = ConfigurationManager.AppSettings["MessageWebServiceURL"];
int r = m.DoSomething(e1); 
```

不幸的是，这样做是行不通的：我得到一个编译器错误，比如 WCF 中的 Entity1 不能作为方法 DoSomething 的参数。我要做的是：

```
Entity1 e2 = new Software.Project.WCFService.ServiceReferenceName.Entity1();
Software.Project.WCFService.ServiceReferenceName.Message m = new Software.Project.WCFService.ServiceReferenceName.Message();
m.Url = ConfigurationManager.AppSettings["MessageWebServiceURL"];
int r = m.DoSomething(e2); 
```

通过这样做，编译器接受调用；问题是我的 WCF 服务中的 Entity1 充满了字段和数据，我必须将所有数据复制到新实体。

我还尝试将 .asmx 的引用添加为服务引用，并标记“在引用程序集中重用类型”，但结果完全相同。

我不敢相信没有办法让它理解 Entity1 是完全相同的实体！这真的不可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:57:35.100

对不起，但我想我有坏消息。您可以尝试使用 xml 序列化而不是数据协定序列化，因为 asmx 不知道它。

此外，这篇文章说这可能但并不那么容易：[.NET 3.5 ASMX Web Service - Invoked via .NET 3.5 Service Reference - Common Class Reuse](https://stackoverflow.com/questions/12222606/net-3-5-asmx-web-service-invoked-via-net-3-5-service-reference-common-clas)

可能您会发现添加翻译类更容易。

# architecture - N 层架构中的事务边界

> ID：16064631
> 
> 赞同：7
> 
> 时间：2013-04-17T15:50:21.437
> 
> 标签：architecture, transactions

我有一个 3 层架构，大致如下所示：

客户 -> 业务 -> 数据

理想的交易应该从哪里开始？

一种观点认为事务应该只从数据层的顶部开始。业务层只用业务逻辑操作业务对象，从不知道事务。业务完成所有工作来操作对象，然后将它们交给数据层进行持久化。这是一种适用于较低层的有点 RESTful 的哲学。

另一个学派认为事务应该从业务层的顶部开始。业务层定义逻辑工作单元，而不是数据层，因为逻辑工作单元有时包含业务逻辑，而不仅仅是数据逻辑。

我确实喜欢将交易问题尽可能降低的想法。但我也发现它可能需要额外的努力和设计挑战来尝试将业务逻辑排除在数据层之外，除非它只是 CRUD 操作。如果您使用大锤应用 RESTful 设计模式，您可以使您的应用程序具有非常少的非 CRUD 操作。

甚至还有第 3 流派认为，客户可以开始交易，以便在需要时结合多个业务操作。但是现在客户正在定义工作单元？这不是商业问题吗？

第四流派认为我的客户可能只是 SOA 组件，可以参与甚至在客户之外启动的 XA 事务！

我们的开发人员想要一些更具体的标准，而不仅仅是“随心所欲地开始交易”

有人对这个问题有任何意见或建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:30:38.163

事务是一个业务概念，应在业务层内进行协调。

孤立地操作对象通常没有什么好处，并且跨越多种类型的对象之间的操作已经是一个事务。因此，第一流派是处理非常基本的案例。

当您的业务层处理交易时，谁开始交易并不重要：客户或其他服务。此外，只有在业务层知道它们时才能支持长期运行（分布式）事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:00:56.033

在里面

> 客户 -> 业务 -> 数据

架构，最好在业务层定义事务。我建议将事务定义为业务服务要么启动新事务，要么参与现有事务（如果已经启动）。这会处理业务服务被另一个业务服务调用的情况。

如果业务层将多个数据层调用作为同一请求的一部分，则在数据层设置事务边界会失败，因为

> 客户 1-> 业务 1 => 数据 1 ，业务 1 => 数据 2

# c++ - C++ 不匹配运算符<< 错误

> ID：16064633
> 
> 赞同：0
> 
> 时间：2013-04-17T15:50:27.613
> 
> 标签：c++

我的介绍课快结束了，我一生都无法弄清楚这里发生了什么。首先，代码：

```
#include <iostream>
#include <fstream>

using namespace std;

int main( )
{
    double id = 0.0;
    double rate = 0.0;
    double hours = 0.0;
    double gross = 0.0;

    ifstream wData;
    wData.open("workers.txt", ios::in);

    if (wData.is_open())
    {

    for (int count = 0; count < 8; count = count + 1)
    {

        wData << id << rate << hours;
        gross = rate * hours;
        cout << "Employee ID: " << id << "Gross Pay: " << gross << endl;
     }
     wData.close();
     }
     else
     {
         cout << "The file could not be opened." << endl;
         }

    system("pause"); 
    return 0;
} 
```

接下来，错误：

```
41 no match for 'operator<<' in 'wData << id' 
```

那将在位`wData << id << rate << hours;`

我已经做了一些探索（我真的很喜欢尝试自己解决这些问题），但我无法准确指出发生了什么。我觉得这可能是一件很明显的事情，我在胡思乱想。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:52:55.127

用于`>>`不`<<`从输入流中读取。将这些运算符视为指向数据移动方向的箭头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T15:52:39.810

```
wData << id << rate << hours; 
```

`wData`是`ifstream`对象，您正在使用与`<<`某物。没有为. 用于从文件中读取带有操作符的内容。因此，您会收到该错误消息。`wData``output``<<``ifstream``ifstream``>>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T15:52:49.103

您正在尝试输出到输入流。改为使用`>>`。

编辑：很明显，您已经得到了答案：) 无论如何，您应该考虑分别检查`wData.fail()`并`wData.eof()`确定是否存在一些错误数据或文件过早结束。此外，为了将来参考，您可以插入和提取流（任何继承自 的内容`iostream`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T15:52:47.893

`wData`是一个`ifstream`，它用于输入（>>）而不是输出（<<）。

请参阅[http://en.cppreference.com/w/cpp/io/basic_ifstream](http://en.cppreference.com/w/cpp/io/basic_ifstream)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T15:53:19.287

方向错误，请执行以下操作：

```
 wData >> id >> rate >> hours; 
```

代替：

```
 wData << id << rate << hours; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T15:54:19.960

ifstream 只`>>`定义了运算符。
`>>`用于输入。
您需要该`ofstream`对象才能输出某些内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T15:54:30.600

这不应该：

```
wData << id << rate << hours; 
```

是

```
 wData >> id >> rate >> hours; 
```

??

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-17T15:54:36.290

```
ifstream wData; 
```

这是一个`input`文件流。你不能`<<`在上面使用运算符。就像你做不到一样`cin<<`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-17T15:56:48.127

您需要将其视为输入到程序中的输入（来自文件）。并且输出被输出到文件（来自程序）。所以你想使用输出流，而不是输入流。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-17T15:53:16.340

您不能在 ifstream 中输出。您需要能够执行读取的是 ofstream。但似乎您的意思是阅读，`wData`所以您可能需要做的就是使用双“大于”（`>>`）而不是双小于（`<<`）。

# vb.net - 使用VB 2010 express将数据从文本文件粘贴到excel

> ID：16064635
> 
> 赞同：0
> 
> 时间：2013-04-17T15:50:31.157
> 
> 标签：vb.net, excel

这听起来很容易，但我是 vb 编程的新手。我有一个包含 11 行、2 列的文本文件，它们之间用 39 个空格分隔。现在我正在尝试读取此文件，将其复制并粘贴到 Excel 工作表中。这是我到目前为止的代码：

```
Imports System.IO

Public Class Form1

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim oExcel As Object
        Dim oBook As Object
        Dim oRow As Int16 = 0

        oExcel = CreateObject("Excel.Application")
        oBook = oExcel.Workbooks.Add

        'Read input .txt file line-by-line, Copy to Clipboard & Paste to Excel

        Using rdr As New System.IO.StreamReader("C:\Temp\ONI.txt")
            Do While rdr.Peek() >= 0
                Dim InputLine As String = rdr.ReadLine
                oRow = oRow + 1
                System.Windows.Forms.Clipboard.SetDataObject (InputLine)
                oBook.Worksheets(1).Range("A" + oRow.ToString).Select()
                oBook.Worksheets(1).Paste()
            Loop
            rdr.Close()
        End Using

        oExcel.Visible = True
        'oExcel.SaveAs("C\Temp\test.xls")
        oBook = Nothing
        oExcel.Quit()
        oExcel = Nothing
    End Sub

End Class 
```

这在打开 excel 工作簿并将数据粘贴到 A1 到 A11 的情况下起作用，即行是 11（没关系）但列只有 1（它应该在列 A 和 B 中）。我知道这很容易，请指导我。

代码也停在“另存为”行（我已经评论过）。运行时显示错误`Public member 'SaveAs' on type 'ApplicationClass' not found.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:03:51.827

你应该这样做`oBook.SaveAs(...)`，你没有保存`Excel.Application`，只是工作簿。

对于导入文本，为什么不直接使用该`Workbooks.OpenText`方法呢？通过一些调整，这应该允许您以所需格式打开分隔文件。这为您节省了在导入后尝试将文本转换为列的麻烦，以及必须使用剪贴板的麻烦。

例如，这会在 Excel 工作簿中打开一个文本文件，将空格视为分隔符，将连续分隔符视为一个，因此它应该正确拆分列。

```
Sub OpenTextFile()
Dim wbText As Workbook
Dim sFName As String ' file name & path'

sFName = Application.GetOpenFilename()
Workbooks.OpenText Filename:=sFName _
    , Origin:=437, StartRow:=1, DataType:=xlDelimited, TextQualifier:= _
    xlDoubleQuote, ConsecutiveDelimiter:=True, Tab:=False, Semicolon:=False _
    , Comma:=False, Space:=True, Other:=False, FieldInfo _
    :=Array(1, 1), TrailingMinusNumbers:=True

Exit Sub
End Sub 
```

这是我使用的测试文件：

![带有连续分隔符的文本文件](https://i.stack.imgur.com/6tYYo.jpg)

这是输出，正确地分为两列：

![Excel可以打开文本分隔文件](https://i.stack.imgur.com/lJGSd.jpg)

# r - 两片正态（或分裂正态）分布的密度

> ID：16064639
> 
> 赞同：4
> 
> 时间：2013-04-17T15:50:49.057
> 
> 标签：r, statistics, distribution, cran

两件式正态分布是否有密度函数：

![在此处输入图像描述](https://i.stack.imgur.com/zx83d.gif)

在 CRAN 上？以为我会在编写代码之前检查一下。我已经检查了分发任务视图。它没有在那里列出。我查看了几个可能的包，但无济于事。

更新：我在[fanplot](http://cran.r-project.org/web/packages/fanplot/index.html)包中添加了`dsplitnorm`、`psplitnorm`和函数。`qsplitnorm``rsplitnorm`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:45:05.133

如果您选择构建自己的发行版版本，您可能会对**distr**感兴趣。它（以及相关的软件包**distrEx**、**distrSim**、**distrTEst**、**distrTeach**和**distrDoc**）被编写为提供一个统一的接口来从现有的发行版中构建新的发行版。**（我在distrDoc**包附带的精彩小插图的帮助下构建了这个示例，可以通过键入来获得`vignette("distr")`。）

这实现了[分裂正态分布](http://en.wikipedia.org/wiki/Split_normal_distribution)，这可能不是你所追求的。但是，使用**distr**工具集，调整它以适应您的确切需求应该不会太难。

```
library(distr)

## Construct the distribution object.
## Here, it's a split normal distribution with mode=0, and lower- and
## upper-half standard deviations of 1 and 2, respectively.
splitNorm <- UnivarMixingDistribution(Truncate(Norm(0,2), upper=0), 
                                      Truncate(Norm(0,1), lower=0), 
                                      mixCoeff=c(0.5, 0.5))
## Construct its density function ...
dsplitNorm <- d(splitNorm)
## ... and a function for sampling random variates from it
rsplitNorm <- r(splitNorm)

## Compare the density it returns to that from rnorm()
dsplitNorm(-1)
# [1] 0.1760327    
dnorm(-1, sd=2)
# [1] 0.1760327    

## Sample and plot a million random variates from the distribution
x <- rsplitNorm(1e6)         
hist(x, breaks=100, col="grey")

## Plot the distribution's continuous density
plot(splitNorm, to.draw.arg="d") 
```

![在此处输入图像描述](https://i.stack.imgur.com/GWYWb.png)

![在此处输入图像描述](https://i.stack.imgur.com/e3cLi.png)

# c - C：对可变长度位串的位操作

> ID：16064644
> 
> 赞同：1
> 
> 时间：2013-04-17T15:51:00.750
> 
> 标签：c, bit-manipulation, bit

我正在对可变长度位字符串进行一些位操作。

我定义了一个函数，该函数应该对变量`setBits(char *res, int x, int y)`传递的位字符串起作用，给定 a和（顺便提一下，我正在尝试使用每 x 8 位来实现类似于 Bloom 过滤器的东西）：`*res``x``y`

```
void setBits(char *res, int x, int y)
{
  *res |= x << (y * 8)
} 
```

例如，给定以下 xy-vectors `{0,0} ; {0,1} ; {1,2} ; {2,3}`，我希望有这样的位字符串（反之亦然，具体取决于小端或大端，但这现在并不重要）：

```
0000 0010 0000 0001 0000 0000 0000 0000 
```

所以最低8位应该来自`{0,0}`，第二个8位来自`{0,1}`，接下来的8位来自`{1,2}`，最后一个来自`{2,3}`。

不幸的是，我似乎不明白为什么，`setBits`总是只返回最后一个结果（在这种情况下，即来自 的位串`{2,3}`）。我调试了代码并意识到它`*res`总是 0 - 但是为什么呢？我究竟做错了什么？是我选择`char*`它不起作用还是我完全错过了一些非常愚蠢的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:54:48.793

假设 8 位字符，您可以存储的最大值`*res`是`0xff`ie `(1<<8)-1`。

考虑一下当你调用时会发生`setBits`什么`x=1`，`y=1`

```
x << (y * 8) == 1 << (1 * 8)
             == 1 << 8
             == 0x100 
```

`*res`是一个 8 位值，因此只能存储此计算的低 8 位。对于 的任何非零值`y`，可以存储的位`*res`都保证为 0。

# ruby-on-rails - RSpec 未定义的方法“应该”

> ID：16064647
> 
> 赞同：4
> 
> 时间：2013-04-17T15:51:08.153
> 
> 标签：ruby-on-rails, rspec, tdd, integration-testing

我在控制器测试中得到了一个未定义的“应该”方法，但无法弄清楚原因。我花了一些时间在谷歌和堆栈溢出上，但被卡住了。有什么帮助吗？

规范助手：

```
require 'simplecov'
SimpleCov.start 'rails'

# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.expect_with :rspec do |c|
    c.syntax = :expect
  end

  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  #config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = false

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"
end

Capybara.javascript_driver = :webkit 
```

控制器测试：

```
require 'spec_helper'
include Devise::TestHelpers

describe PagesController do
  # This should return the minimal set of attributes required to create a valid
  # Page. As you add validations to Page, be sure to
  # update the return value of this method accordingly.
  def valid_attributes
    {  }
  end

  # This should return the minimal set of values that should be in the session
  # in order to pass any filters (e.g. authentication) defined in
  # PagesController. Be sure to keep this updated too.
  def valid_session
    {}
  end

  describe "GET index" do
    it "assigns all pages as @pages" do
      page = Page.create! valid_attributes
      get :index, {}, valid_session
      assigns(:pages).should eq([page])
    end
  end

  describe "GET show" do
    it "assigns the requested page as @page" do
      page = Page.create! valid_attributes
      get :show, {:id => page.to_param}, valid_session
      assigns(:page).should eq(page)
    end
  end

  describe "GET new" do
    it "assigns a new page as @page" do
      get :new, {}, valid_session
      assigns(:page).should be_a_new(Page)
    end
  end

  describe "GET edit" do
    it "assigns the requested page as @page" do
      page = Page.create! valid_attributes
      get :edit, {:id => page.to_param}, valid_session
      assigns(:page).should eq(page)
    end
  end

  describe "POST create" do
    describe "with valid params" do
      it "creates a new Page" do
        expect {
          post :create, {:page => valid_attributes}, valid_session
        }.to change(Page, :count).by(1)
      end

      it "assigns a newly created page as @page" do
        post :create, {:page => valid_attributes}, valid_session
        assigns(:page).should be_a(Page)
        assigns(:page).should be_persisted
      end

      it "redirects to the created page" do
        post :create, {:page => valid_attributes}, valid_session
        response.should redirect_to(Page.last)
      end
    end

    describe "with invalid params" do
      it "assigns a newly created but unsaved page as @page" do
        # Trigger the behavior that occurs when invalid params are submitted
        Page.any_instance.stub(:save).and_return(false)
        post :create, {:page => {  }}, valid_session
        assigns(:page).should be_a_new(Page)
      end

      it "re-renders the 'new' template" do
        # Trigger the behavior that occurs when invalid params are submitted
        Page.any_instance.stub(:save).and_return(false)
        post :create, {:page => {  }}, valid_session
        response.should render_template("new")
      end
    end
  end

  describe "PUT update" do
    describe "with valid params" do
      it "updates the requested page" do
        page = Page.create! valid_attributes
        # Assuming there are no other pages in the database, this
        # specifies that the Page created on the previous line
        # receives the :update_attributes message with whatever params are
        # submitted in the request.
        Page.any_instance.should_receive(:update_attributes).with({ "these" => "params" })
        put :update, {:id => page.to_param, :page => { "these" => "params" }}, valid_session
      end

      it "assigns the requested page as @page" do
        page = Page.create! valid_attributes
        put :update, {:id => page.to_param, :page => valid_attributes}, valid_session
        assigns(:page).should eq(page)
      end

      it "redirects to the page" do
        page = Page.create! valid_attributes
        put :update, {:id => page.to_param, :page => valid_attributes}, valid_session
        response.should redirect_to(page)
      end
    end

    describe "with invalid params" do
      it "assigns the page as @page" do
        page = Page.create! valid_attributes
        # Trigger the behavior that occurs when invalid params are submitted
        Page.any_instance.stub(:save).and_return(false)
        put :update, {:id => page.to_param, :page => {  }}, valid_session
        assigns(:page).should eq(page)
      end

      it "re-renders the 'edit' template" do
        page = Page.create! valid_attributes
        # Trigger the behavior that occurs when invalid params are submitted
        Page.any_instance.stub(:save).and_return(false)
        put :update, {:id => page.to_param, :page => {  }}, valid_session
        response.should render_template("edit")
      end
    end
  end

  describe "DELETE destroy" do
    it "destroys the requested page" do
      page = Page.create! valid_attributes
      expect {
        delete :destroy, {:id => page.to_param}, valid_session
      }.to change(Page, :count).by(-1)
    end

    it "redirects to the pages list" do
      page = Page.create! valid_attributes
      delete :destroy, {:id => page.to_param}, valid_session
      response.should redirect_to(pages_url)
    end
  end

end 
```

错误：

失败：

```
 1) PagesController GET index assigns all pages as @pages
     Failure/Error: assigns(:pages).should eq([page])
     NoMethodError:
       undefined method `should' for #<Array:0x007fb986c42948>
     # ./spec/controllers/pages_controller_spec.rb:23:in `block (3 levels) in <top (required)>'

  2) PagesController POST create with valid params creates a new Page
     Failure/Error: expect {
       count should have been changed by 1, but was changed by 0
     # ./spec/controllers/pages_controller_spec.rb:53:in `block (4 levels) in <top (required)>'

  3) PagesController POST create with valid params assigns a newly created page as @page
     Failure/Error: assigns(:page).should be_a(Page)
     NoMethodError:
       undefined method `should' for nil:NilClass
     # ./spec/controllers/pages_controller_spec.rb:60:in `block (4 levels) in <top (required)>'

  4) PagesController POST create with valid params redirects to the created page
     Failure/Error: response.should redirect_to(Page.last)
     NoMethodError:
       undefined method `should' for #<ActionController::TestResponse:0x007fb987232c68>
     # ./spec/controllers/pages_controller_spec.rb:66:in `block (4 levels) in <top (required)>'

  5) PagesController POST create with invalid params assigns a newly created but unsaved page as @page
     Failure/Error: assigns(:page).should be_a_new(Page)
     NoMethodError:
       undefined method `should' for nil:NilClass
     # ./spec/controllers/pages_controller_spec.rb:75:in `block (4 levels) in <top (required)>'

  6) PagesController POST create with invalid params re-renders the 'new' template
     Failure/Error: response.should render_template("new")
     NoMethodError:
       undefined method `should' for #<ActionController::TestResponse:0x007fb986e1d1f0>
     # ./spec/controllers/pages_controller_spec.rb:82:in `block (4 levels) in <top (required)>'

  7) PagesController GET new assigns a new page as @page
     Failure/Error: assigns(:page).should be_a_new(Page)
     NoMethodError:
       undefined method `should' for #<Page:0x007fb982404708>
     # ./spec/controllers/pages_controller_spec.rb:38:in `block (3 levels) in <top (required)>'

  8) PagesController PUT update with valid params updates the requested page
     Failure/Error: put :update, {:id => page.to_param, :page => { "these" => "params" }}, valid_session
       #<Page:0x007fb9872517f8> received :update_attributes with unexpected arguments
         expected: ({"these"=>"params"})
              got: ({})
     # ./app/controllers/pages_controller.rb:61:in `block in update'
     # ./app/controllers/pages_controller.rb:60:in `update'
     # ./spec/controllers/pages_controller_spec.rb:96:in `block (4 levels) in <top (required)>'

  9) PagesController PUT update with valid params assigns the requested page as @page
     Failure/Error: assigns(:page).should eq(page)
     NoMethodError:
       undefined method `should' for #<Page:0x007fb981579a30>
     # ./spec/controllers/pages_controller_spec.rb:102:in `block (4 levels) in <top (required)>'

  10) PagesController PUT update with valid params redirects to the page
     Failure/Error: response.should redirect_to(page)
     NoMethodError:
       undefined method `should' for #<ActionController::TestResponse:0x007fb9827b7350>
     # ./spec/controllers/pages_controller_spec.rb:108:in `block (4 levels) in <top (required)>'

  11) PagesController PUT update with invalid params assigns the page as @page
     Failure/Error: assigns(:page).should eq(page)
     NoMethodError:
       undefined method `should' for #<Page:0x007fb987444a88>
     # ./spec/controllers/pages_controller_spec.rb:118:in `block (4 levels) in <top (required)>'

  12) PagesController PUT update with invalid params re-renders the 'edit' template
     Failure/Error: response.should render_template("edit")
     NoMethodError:
       undefined method `should' for #<ActionController::TestResponse:0x007fb982e75750>
     # ./spec/controllers/pages_controller_spec.rb:126:in `block (4 levels) in <top (required)>'

  13) PagesController GET show assigns the requested page as @page
     Failure/Error: assigns(:page).should eq(page)
     NoMethodError:
       undefined method `should' for #<Page:0x007fb9830f3a68>
     # ./spec/controllers/pages_controller_spec.rb:31:in `block (3 levels) in <top (required)>'

  14) PagesController DELETE destroy redirects to the pages list
     Failure/Error: response.should redirect_to(pages_url)
     NoMethodError:
       undefined method `should' for #<ActionController::TestResponse:0x007fb988100e98>
     # ./spec/controllers/pages_controller_spec.rb:142:in `block (3 levels) in <top (required)>'

  15) PagesController GET edit assigns the requested page as @page
     Failure/Error: assigns(:page).should eq(page)
     NoMethodError:
       undefined method `should' for #<Page:0x007fb9872585f8>
     # ./spec/controllers/pages_controller_spec.rb:46:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-17T16:53:32.073

RSpec 提供了两种编写期望的方式：

1.  应该风格`1.should == 1`
2.  期待风格`expect(1).to eq(1)`

您的 spec_helper 配置为使用后者。将语法配置更改为：`c.syntax = :should`

参考：[https ://www.relishapp.com/rspec/rspec-expectations/docs/syntax-configuration](https://www.relishapp.com/rspec/rspec-expectations/docs/syntax-configuration)

# linux - Xampp 无法在 Linux 上运行

> ID：16064648
> 
> 赞同：0
> 
> 时间：2013-04-17T15:51:08.677
> 
> 标签：linux, xampp, zend-framework2

我最近安装了 Linux 和 Xampp 服务器。我昨晚和今天早上一直在努力，没有任何问题。今天早上我开始使用 zend 框架。一切都很顺利，直到我不得不重新启动我的电脑。

重新启动后，当我尝试访问 localhost 时，我在浏览器中收到此消息：

**有用！**

**这是此服务器的默认网页。**

**Web 服务器软件正在运行，但尚未添加任何内容。**

我已经重新启动了 xampp 和 apache。在 httpd.conf 文件中，我将端口从 80 更改为 8080。我正在运行 php 5.4.6。为了确定，我还重新安装了 xampp。

据我所知，我在 zend 项目目录之外所做的唯一更改是 httpd.conf 文件。我将“allowOverride None”更改为“allowOverride AllowAll”。我还安装了 Composer 和 phpUnit，但我无法想象它们是如何导致问题的。

您可以提供的任何帮助都会很棒。我非常坚持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-06T08:25:04.767

这是 index.php 或 index.html 文件的默认内容。尝试重命名这些文件。

# javascript - GA - 电子商务不跟踪项目

> ID：16064649
> 
> 赞同：1
> 
> 时间：2013-04-17T15:51:13.143
> 
> 标签：javascript, google-analytics

我很难在以下 javascript 代码中找到问题。

Google Analytics 可以很好地跟踪我的交易，但它没有显示任何产品。

此代码取自收据页面的“查看源代码”。

```
<script type="text/javascript"> 

var _gaq = _gaq || []; 
_gaq.push(['_setAccount', 'xxxxxxx-x']); // I replaced my account no.
_gaq.push(['_trackPageview']); 
_gaq.push(['_set', 'currencyCode', 'DKK']); 

_gaq.push(['_addTrans', 
'28996', 
'xxxxx.xx', // I replaced the domainname with xxxxx.xx
'104.00', 
'20.80', 
'0.00', 
'fredercia', 
'Denmark' 
]); 

_gaq.push(['_addItem', 
'28996', 
'150649', 
'BRAUN ORAL-B ELTANDB&#216;RSTE', 
'99.00', 
'1' 
]); 

_gaq.push(['_addItem', 
'28996', 
'150000', 
'5 dages LOP-salg', 
'5.00', 
'1' 
]); 

_gaq.push(['_trackTrans']); 

(function () { 
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; 
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; 

var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); 
})(); 

</script> 
```

任何人都可以在这里看到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:45:52.833

看起来您缺少`category`参数`_addItem`- 请参阅[_addItem 的 Google 文档](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiEcommerce#_gat.GA_Tracker_._addItem)。

虽然该`category`参数是可选的，但将其省略会导致`quantity`缺少必需的参数。

如果没有，则可以传递一个空字符串`category`：

```
_gaq.push(['_addItem', 
'28996', 
'150649', 
'BRAUN ORAL-B ELTANDB&#216;RSTE', 
'',
'99.00', 
'1' 
]); 
```

# signalr - 未调用 SignalR 客户端集线器上的 On 事件

> ID：16064651
> 
> 赞同：17
> 
> 时间：2013-04-17T15:51:17.067
> 
> 标签：signalr, signalr-hub

我似乎对 SignalR 的 JS 客户端中心有疑问。

问题是“on”处理程序似乎不起作用——它不会产生错误，但不会接收到服务器发送的任何信号。下面的代码显示了我调用服务器（使用调用）的一个提取，它工作正常 - 然后在服务器上我回调到 acceptHubData 应该在客户端上拾取但不是。

我的目标是当导航到每个页面将打开到特定集线器的连接并在用户移动到另一个页面时释放此连接的页面时！

**编辑**：使用以下代码片段有效，但我想知道为什么下面使用“on”事件的代码不起作用！

```
 var superHub = $.connection.mySuperHub;

    superHub.client.acceptHubData = function (data) {
        $('<li>hello there' + data + '</li>').prependTo($('#ul1'))
    }

    $.connection.hub.start().done(function () {
        $('<li>done phase 1</li>').prependTo($('#ul1'))
    }); 
```

任何帮助将非常感激！

这是客户端代码（在 js 中）

```
$(document).ready(function () {

    var myHub;

    try {

        var connection = $.hubConnection();

        connection.start().done(function () {

            myHub = connection.createHubProxy("mySuperHub");

            myHub.on('acceptHubData', function (data) {
                alert(data);   // THIS IS NOT CALLED!
            });

            myHub.invoke('AcceptSignal', "hello from the client2");

        });

    }
    catch (e) {
        alert(e.message);
    }
}); 
```

这是服务器代码：

```
[HubName("mySuperHub")]
public class MyHub : Hub
{

    private readonly HubEngine _hubEngine;

    public MyHub() : this(HubEngine.Instance) { }

    public MyHub(HubEngine hubEngine)
    {
        _hubEngine = hubEngine;
    }

    public void AcceptSignal(string msg)
    {
        Clients.Caller.acceptHubData("hi");
        Clients.All.acceptHubData("hi");
    }

} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-17T19:14:44.550

在最新版本的 SignalR 中，您仍然可以使用该方法为 JS 客户端 hub 方法调用添加事件，但如果在调用之前`on`不添加任何事件侦听器，您将不会订阅 hub。SignalR 在启动时订阅您拥有事件处理程序的集线器。如果您没有订阅您的集线器，那么在 start() 之后向该集线器添加任何事件都将不起作用。`hubProxy``hubConnection.start()``hubConnection`

如果您在 start() 之前将至少一个事件侦听器添加到集线器，即使它不执行任何操作，您也可以`on`在 start() 之后使用您想要的任何其他事件处理程序添加到集线器，并且您的处理程序将被调用。

`hubProxy.on('eventName', function (...`使用或`autogeneratedHubProxy.client.eventName = function (...`在调用之前添加事件并不重要`start()`，但只会在调用`on`之后成功添加事件侦听`start()`器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:58:55.480

不确定您使用的是哪个版本的 SignalR，但我在服务器上使用以下语法取得了更大的成功：

```
var context = GlobalHost.ConnectionManager.GetHubContext<MyHub>();
context.Clients.All.acceptHubData("hello"); 
```

在我的客户身上：

```
myHub.client.acceptHubData = function (data) {
    console.log(data);
} 
```

# php - jquery ajax 到 mysql 到 php 到 javascript 的转换

> ID：16064653
> 
> 赞同：0
> 
> 时间：2013-04-17T15:51:26.960
> 
> 标签：php, javascript, jquery, mysql, ajax

我在一个页面上有一个文本区域，它的内容使用 ajax/jquery $.post 推送到一个 mysql 数据库中。然后使用 php 调用 mysql 数据，然后使用 javascript 将其推送到新的动态文本区域中。

在将所有 html 推送到数据库之前，我将其转换为 htmlentities()。

然后我运行一个 mysql_query 来拖出数据。此时，如果我回显数据，它会很好地回显。

然后，当我将其推送到 js 函数中以创建新的 textarea 并添加数据时，这就是我得到错误的地方。如果我尝试提醒我通过 mysql_query 获得的数据，我什么也得不到。

我只是在使用一些 Lorem Ipsum 文本进行测试。我已经运行了 firebug，我得到的错误是

```
[17:44:20.948] SyntaxError: unterminated string literal @ http://**************.com/********.php:427 
```

除非有人需要，否则我不会发布所有代码，因为代码很多，老实说，我认为这是某种转义/html 编码类型问题。

根据 CTRL 'U'，最后一个 js 函数会出现上述错误

```
 <script>NewTextArea('1','draggable','176','672','300','300','&lt;strong&gt;Lorem Ipsum&lt;/strong&gt; es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno est&Atilde;&iexcl;ndar de las industrias desde el a&Atilde;&plusmn;o 1500, cuando un impresor (N. del
 T. persona que se dedica a la imprenta) desconocido us&Atilde;&sup3; una galer&Atilde;&shy;a de textos y los mezcl&Atilde;&sup3; de tal manera que logr&Atilde;&sup3; hacer un libro de textos especimen. No s&Atilde;&sup3;lo sobrevivi&Atilde;&sup3; 500 a&Atilde;&plusmn;os, sino que tambien ingres&Atilde;&sup3; como texto de relleno en documentos electr&Atilde;&sup3;nicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creaci&Atilde;&sup3;n de las hojas &quot;Letraset&quot;, las cuales contenian pasajes de Lorem Ipsum, y m&Atilde;&iexcl;s recientemente con software de autoedici&Atilde;&sup3;n, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.');</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:55:23.340

当您将 php 变量注入 javascript 时，将它们包装在对`json_encode()`. Javascript 具有隐式行尾，这意味着字符串中的换行符需要转义。如果您在 javascript 块中回显带有换行符的 php 字符串，它将破坏脚本。

# python - Python 多处理和 wxPython 协同工作

> ID：16064662
> 
> 赞同：2
> 
> 时间：2013-04-17T15:52:13.390
> 
> 标签：python, multithreading, user-interface, wxpython, multiprocessing

我有以下问题：

我编写了一个脚本，它同时运行多达四个进程。通过命令行使用它时就像一个魅力。然后我决定用 wxPython 编写一个 GUI，我很快就发现 GUI 和脚本需要在不同的进程中运行，这样当另一个在做某事时两者都保持可用。（即能够在脚本运行时按下停止按钮）这也很完美。

现在的问题是：脚本运行时我无法与 GUI 通信，或者至少我不知道如何。我正在尝试通过将“self”（gui）传递给脚本来在文本窗口中写入输出，并且在脚本中我尝试执行诸如“self.outputWindow.WriteText（'脚本正在执行 bla 1 of bla 10 ')"

我什至想出了为什么这不起作用：self（gui对象）不可选择，这对于多处理是强制性的，但我不知道我应该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:22:23.757

您可以使用我关于 wxPython 和线程的[教程](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)，尽管我不确定 Python 是否将这些线程均匀地分布到所有内核。我怀疑它没有。

幸运的是，有使用 wxPython 的多处理模块的示例。请参阅以下链接：

*   [http://wiki.wxpython.org/MultiProcessing](http://wiki.wxpython.org/MultiProcessing)
*   [wxPython 非阻塞 GUI 线程和多处理？](https://stackoverflow.com/questions/10935515/wxpython-non-blocking-gui-threading-and-multiprocessing)
*   [wxpython GUI和多处理 - 如何从长时间运行的进程中发回数据](https://stackoverflow.com/questions/2855363/wxpython-gui-and-multiprocessing-how-to-send-data-back-from-the-long-running-p)
*   [http://www.blog.pythonlibrary.org/2012/08/03/python-concurrency-porting-from-a-queue-to-multiprocessing/](http://www.blog.pythonlibrary.org/2012/08/03/python-concurrency-porting-from-a-queue-to-multiprocessing/)

我希望这些是有帮助的！

# sql - 我的 WHERE 子句出现问题：多条件问题

> ID：16064663
> 
> 赞同：-3
> 
> 时间：2013-04-17T15:52:13.727
> 
> 标签：sql

大家好，我在 WHERE 语句中遇到了一点问题。下面我需要确保用户有 c.Options = 'TA' 但还要确保它忽略（不包括）c.Options = 'PT'... 以下是我目前正在使用的...

*c代表覆盖*

```
 WHERE
  c.Options = 'TA' AND c.Options NOT LIKE '%PT%' 
```

感谢你的帮助！我很感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T15:56:12.780

您需要汇总此逻辑：

```
select c.user
from c
group by c.user
having sum(case when c.options = 'TA' then 1 else 0 end) > 0 and
       sum(case when c.options = 'PT' then 1 else 0 end) = 0 
```

第一部分说有一个“TA”选项。第二个说没有“PT”选项。

# sql - SQL 查询帮助 - LIKE 语句

> ID：16064664
> 
> 赞同：0
> 
> 时间：2013-04-17T15:52:14.873
> 
> 标签：sql, string, where, exists, sql-like

```
SELECT  Name
FROM    Names n
WHERE   EXISTS (SELECT NameIDs FROM NameList nl WHERE n.nameID LIKE '%'+nl.nameIDs); 
```

我正在尝试查询此表，它似乎只返回第一个值。名称列表是一个逗号分隔值单元格，可以多次出现。

我想知道是否有人可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:55:29.160

如果它的逗号分隔，那么您也需要在 nl.nameIDs 之后使用通配符 %，因为该值可以出现在逗号分隔字符串中间的任何位置。

```
SELECT  Name
FROM    Names n
WHERE   EXISTS (SELECT NameIDs FROM NameList nl WHERE n.nameID LIKE '%'+nl.nameIDs+'%'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:54:18.537

我认为你有倒过来的比较。尝试这个：

```
SELECT  Name
FROM    Names n
WHERE   EXISTS (SELECT NameIDs FROM NameList nl WHERE ','+nl.nameIDS+',' like '%,'+n.nameID+',%' 
```

# java - Java.ImageIO 中没有阅读器匹配 PNG-Stream

> ID：16064673
> 
> 赞同：3
> 
> 时间：2013-04-17T15:52:39.327
> 
> 标签：java, image, png, javax.imageio

我正在尝试按照[此处](https://stackoverflow.com/a/1560052/1141038)提出的解决方案使用 java 读取 PNG 文件的元数据。

但是该方法`ImageIO.getImageReaders(inputStream)`返回一个空的读者列表。`ImageIO.read`我通过读取流并将生成的图像渲染到屏幕来确保流是正确的。

这就是我感到困惑的原因：因为`ImageIO.read`返回一个有效的图像，我假设有一些`ImageReader`声称能够解释这个流。解释图像数据和图像元数据之间有区别吗？

这个问题的任何提示甚至解决方案？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T20:48:39.977

我相信[ImageIO.getImageReaders()](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#getImageReaders%28java.lang.Object%29)需要一个`ImageInputStream`，您可以尝试`InputStream`使用[createImageInputStream](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#createImageInputStream%28java.lang.Object%29)创建一个。我想这就是`ImageIO.read(InputStream)`引擎盖下的作用。

无论如何，如果你已经知道你有一个 PNG，为什么不使用`getImageReadersByFormatName("png")`呢？

顺便说一句：高度和宽度（以及颜色模型等）可以被视为“图像**元数据**”，因为它们不是像素值的一部分（这将是真实数据），但通常来说，它们被视为而不是作为图像（基本）**属性**。图像元数据通常（特别是在[IIOMetadata](http://docs.oracle.com/javase/6/docs/api/javax/imageio/metadata/IIOMetadata.html)中）被理解为通常不需要访问图像数据的附加“杂项”数据（如物理分辨率、时间戳）。

# c++ - 在哪里放置以及如何在 c++ 项目中包含 dll 文件？

> ID：16064677
> 
> 赞同：3
> 
> 时间：2013-04-17T15:52:46.400
> 
> 标签：c++, c, dll, cairo

我阅读了本[指南](http://nil-techno.blogspot.co.il/2009/10/creating-visual-studio-2008-application.html)，该指南将引导您完成使用 Cairo 和 Visual C++ 创建“可视”应用程序所需的步骤。该指南建议您下载某些 dll 文件并将它们存储在创建可执行文件的目录中（调试）。以下是 Nil 在他的教程中引用的文件列表：

*   cairo 二进制文件（是的，你也需要二进制包，因为开发版不包含 DLL）-> libcairo-2.dll
*   zlib 二进制文件 -> zlib1.dll
*   libpng 二进制文件-> libpng12-0.dll
*   Freetype 二进制文件-> freetype6.dll
*   FontConfig 二进制文件 -> libfontconfig-1.dll
*   外籍二进制文件-> libexpat-1.dll

正如你所看到的，它有很多文件。我一直想知道这是否是“正确”的做法？在这种情况下，是否有另一种被认为是“最佳实践”的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T16:04:52.023

这种方法没有任何问题，它可能是启动和运行应用程序的最快方法。您的应用程序需要这些库，因此将它们放在同一个文件夹中可以找到它们。

当然总有替代品！

**静态链接**

为避免您的应用程序必须存在一堆 dll，您可以使用静态链接。您在链接时链接 .lib 文件，而不是在运行时链接到 .dll 文件。使您的 .exe 更大，但意味着您可以分发单个文件。

**将 Dll 放在不同的文件夹中**

dll 不必与 .exe 位于同一文件夹中，尽管这通常是最有意义的。Windows 在运行时查找 .dll 时会搜索多个文件夹，因此您可以将 dll 放在当前目录、系统目录（绝对不推荐）或`PATH`环境变量中的其他目录中。其实这些地方都不推荐！将它们与 .exe 放在同一个文件夹中是最安全的，因为通常您可以控制该文件夹。

此处概述了 Windows 如何搜索 .dll 的具体规则：http: [//msdn.microsoft.com/en-ca/library/windows/desktop/ms682586 (v=vs.85).aspx](http://msdn.microsoft.com/en-ca/library/windows/desktop/ms682586(v=vs.85).aspx)

**自定义构建步骤**

我不喜欢手动将文件放入我的调试或发布文件夹中。我喜欢将调试文件夹视为我可以随时删除和重建的东西，并且我喜欢有一个一步构建过程，将所有内容放在需要的位置，以便我可以轻松地在任何机器上构建。因此，我通常会创建一个自定义构建步骤，将所需的 .dll 从“源”文件夹（在源代码管理中）复制到我的输出文件夹中。

# internet-explorer - Internet Explorer 加速器 - 打开默认浏览器

> ID：16064679
> 
> 赞同：3
> 
> 时间：2013-04-17T15:52:47.140
> 
> 标签：internet-explorer, cross-browser, accelerator

我们构建了一个加速器，允许用户右键单击旧 ERP 系统（仅限 IE）中的 clientID，并在具有该 Old_ClientID 的客户端上的新选项卡中打开我们的新系统

我想知道很难，是否可以配置加速器（在加速器 XML 或浏览器设置中）以便加速链接在 chrome/firefox/... 或任何默认浏览器中打开？

新系统包含很多谷歌地图的东西，在 chrome 中运行得更快，用户抱怨他们再次绑定到 IE(8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-11T18:56:00.613

**问题：** Internet [Explorer 加速器功能](http://msdn.microsoft.com/en-us/library/cc289775(v=vs.85).aspx)获取一些用户选择的内容，并使用加速器 XML 定义，构造 Internet Explorer 将导航到的 URI，或选择性地显示在预览窗口中。就像在浏览器中跟踪普通链接一样，无法在其他浏览器中打开该链接。

**解决方法**：[创建一个 Internet Explorer 插件](https://stackoverflow.com/questions/1237078/how-to-develop-internet-explorer-add-on?rq=1)以在用户的​​默认浏览器中打开当前页面。您的用户可以使用此插件在默认浏览器中打开他们喜欢的任何页面。

# c# - 锚标记的 onClick 不起作用

> ID：16064682
> 
> 赞同：1
> 
> 时间：2013-04-17T15:52:51.530
> 
> 标签：c#, asp.net

我正在动态创建一个锚标记。它被创建，但由于某种原因`onClick`无法正常工作。

**这是我的生成代码：**

```
HtmlGenericControl emailsubject = new HtmlGenericControl("div");
emailsubject.ID = count++ + "emailSubject";
emailsubject.InnerHtml = "Subject: " 
    + "<a id=\"summa\" href=\"#\" onClick=\"subject_Click();\">" 
    + results2["EmailSubject"].ToString() 
    + "</a>"; 
```

**这是我的`onClick`功能：**

```
public void subject_Click()
{
    Response.Write("Clicked");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:00:20.663

您现在设置它的方式是尝试从 html 元素调用 javascript 函数。尝试初始化您正在创建的控件的 onclick 函数或使用另一个 asp.net 控件 (ASP:Hyperlink) 以调用后面代码中的函数。

# module - 如何从特定模块订购资源？

> ID：16064686
> 
> 赞同：2
> 
> 时间：2013-04-17T15:53:05.707
> 
> 标签：module, redmine, puppet

我在从模块中订购资源时遇到了一些麻烦。

```
class { 'postgres' :
    charset => 'UTF8',
    locale => 'fr_FR',
    require => Service['postgresqld'],
}->
class { 'postgresql::server':
}

postgresql::role { 'role1' :
    namevar => 'redmine',
    password_hash => 'random_md5',
    createdb => true,
    require => Class['postgres'],
}

postgresql::database_user {'charly':
    password => 'random',
    role => 'redmine',
    require => postgresql::role['role1'],
} 
```

我想订购这个，但它的最后一行似乎有语法错误`role`。我很确定它来自大写的第一个字母。`Postgresql::role['role1]`但是，如果我输入大写字母或.Puppet 不想运行清单`postgresql::Role['role1]`。没有大写字母，我“只是”收到警告：

> 警告：弃用通知：资源引用现在应在文件 /home/charly/testManifests/part1.pp 的第 61 行大写

我做错了什么，但我不知道是什么。我在互联网上搜索了答案，但在教程和论坛中都找不到我想要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T10:39:52.563

尝试使用链接箭头到您的资源组引用，例如

```
Class['postgres'] -> Class['postgresql::server']

class { 'postgres' :
   charset => 'UTF8',
   locale  => 'fr_FR',
   require => Service['postgresqld']
}        

class { 'postgresql::server': } 
```

可以在木偶参考[链接箭头中找到更多详细信息](http://docs.puppetlabs.com/puppet/2.7/reference/lang_relationships.html#chaining-arrows)

# maven - Maven SCR 插件 - 不生成 OSGI-INF 文件夹

> ID：16064687
> 
> 赞同：5
> 
> 时间：2013-04-17T15:53:07.113
> 
> 标签：maven, osgi, apache-felix

我一直无法让我的 SCR 插件正常工作。我已经尽可能多地搜索，只找到与我需要使用的结构不相似的示例。下面是 POM 的片段。这些几乎是 CQ 项目原型生成的默认值。所有依赖项都在那里，所以可能不是这样。这是构建的输出：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building project Bundle 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ project-bundle ---
[INFO] Deleting C:\project-path\target
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ bundle ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory C:\project-path\src\main\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ project-bundle ---
[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!
[INFO] Compiling 4 source files to C:\project-path\target\classes
[INFO] 
[INFO] --- maven-scr-plugin:1.7.4:scr (generate-scr-descriptor) @ project-bundle ---
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ project-bundle ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory C:\project-path\src\test\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ project-bundle ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:9c6abc2:test (default-test) @ project-bundle ---
[INFO] No tests to run.
[INFO] 
[INFO] --- maven-bundle-plugin:2.3.6:bundle (default-bundle) @ project-bundle ---
[INFO] 
[INFO] --- maven-install-plugin:2.4:install (default-install) @ project-bundle ---
[INFO] Installing C:\project-path\target\project-bundle-1.0-SNAPSHOT.jar to C:\user-path\.m2\repository\com\project\cq\project-bundle\1.0-SNAPSHOT\project-bundle-1.0-SNAPSHOT.jar
[INFO] Installing C:\project-path\pom.xml to C:\user-path\.m2\repository\com\project\cq\project-bundle\1.0-SNAPSHOT\project-bundle-1.0-SNAPSHOT.pom
[INFO] 
[INFO] --- maven-bundle-plugin:2.3.6:install (default-install) @ project-bundle ---
[INFO] Installing com/project/cq/project-bundle/1.0-SNAPSHOT/project-bundle-1.0-SNAPSHOT.jar
[INFO] Writing OBR metadata
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.189s
[INFO] Finished at: Wed Apr 17 10:29:17 CDT 2013
[INFO] Final Memory: 15M/221M
[INFO] ------------------------------------------------------------------------ 
```

输出的关键部分是`[INFO] --- maven-scr-plugin:1.7.4:scr (generate-scr-descriptor) @ project-bundle ---`. 即使类上存在注释，它似乎也没有生成任何东西。

**父 POM 片段：**

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-scr-plugin</artifactId>
                <version>1.7.4</version>
            </plugin>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>2.3.6</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <!-- use version 2.3.2 to have java 1.5 as the default -->
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
                <version>2.3.2</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.5</version>
            </plugin>
            <plugin>
                <groupId>org.apache.sling</groupId>
                <artifactId>maven-sling-plugin</artifactId>
                <version>2.0.6</version>
            </plugin>
            <plugin>
                <groupId>com.day.jcr.vault</groupId>
                <artifactId>content-package-maven-plugin</artifactId>
                <version>0.0.13</version>
            </plugin>
            <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the 
                Maven build itself. -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.apache.felix</groupId>
                                    <artifactId>maven-scr-plugin</artifactId>
                                    <versionRange>[1.7.4,)</versionRange>
                                    <goals>
                                        <goal>scr</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore />
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

**子 POM 片段：**

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-scr-plugin</artifactId>
            <extensions>true</extensions>
            <executions>
                <execution>
                    <id>generate-scr-descriptor</id>
                    <goals>
                        <goal>scr</goal>
                    </goals>
                </execution>
            </executions>
       </plugin>
       <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Bundle-SymbolicName>project.project-bundle</Bundle-SymbolicName>
                </instructions>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.sling</groupId>
            <artifactId>maven-sling-plugin</artifactId>
            <configuration>
                <slingUrl>http://${crx.host}:${crx.port}/apps/project/install</slingUrl>
                <usePut>true</usePut>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

**正在构建的代码：**

```
package com.project.cq.examples.dictionaryservice.impl;

import org.apache.felix.scr.annotations.Component;
import org.apache.felix.scr.annotations.Properties;
import org.apache.felix.scr.annotations.Property;
import org.apache.felix.scr.annotations.Service;
import org.osgi.service.component.ComponentContext;

import com.project.cq.examples.dictionaryservice.DictionaryService;

@Component(immediate = true, metatype = true, label = "Service Implementation", description = "The implementation for the Service")
@Service
public class DictionaryServiceServletImpl implements DictionaryService {

    @Property(label = "Words", description = "The list of words.")
    private static final String PROP_WORDS = "words";

    // The set of words
    private String[] words;
    private boolean active;
    private boolean modified;

    @Override
    public boolean checkWord(String word) {
        word = word.toLowerCase();

        // This is very inefficient
        for (int i = 0; i < words.length; i++) {
            if (words[i].equals(word)) {
                return false;
            }
        }
        return true;
    }

    protected void activate(ComponentContext context) {
        active = true;
        dictionary = (String[]) context.getProperties().get(
                PROP_WORDS);
    }

    protected void deactivate(ComponentContext context) {
        dictionary = null;
        active = false;
    }

    protected void modified(ComponentContext context) {
        modified = true;
        dictionary = (String[]) context.getProperties().get(
                PROP_WORDS);
    }
} 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T17:30:20.613

我猜你正在使用`<packaging>bundle</packaging>`，如果是这样，我通过将 maven-scr-plugin 升级到 1.9.0 和 org.apache.felix.scr.annotations @ 1.7.0 来完成这项工作

我在这里放了一个工作版本的压缩包：[https ://dl.dropboxusercontent.com/u/2465717/com.stackoverflow.osgi.scr.tgz](https://dl.dropboxusercontent.com/u/2465717/com.stackoverflow.osgi.scr.tgz)

注意：您可以启用 Eclipse m2e 生命周期映射 - 它运行良好（Juno SR2），在正常的问题控制台中生成 SCR 组件错误。更改`action <ignore/>`为：

```
<action>
        <execute>
                <runOnIncremental>true</runOnIncremental>
                <runOnConfiguration>true</runOnConfiguration>
        </execute>
</action> 
```

此外，虽然规范表明 SCR 运行时将搜索重载的 de/activate 方法 - 作为个人偏好，我会在各自的方法上使用 @Activate、@Deactive 和 @Modified 以明确意图（在代码和生成的 XML 中）。但各有各的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:08:11.717

我建议你

*   升级到最新版本的`maven-scr-plugin`
*   生成调试`-X`，例如`mvn -X compile`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-09T11:37:52.210

升级到 1.9.0 对我有用。我们是说插件 v1.7.4 不生成描述符吗？为什么会这样，这不就是maven-scr-plugin的核心任务吗。

# workflow-foundation-4 - 为什么在跟踪我的工作流程时会出现奇怪的计时？

> ID：16064693
> 
> 赞同：1
> 
> 时间：2013-04-17T15:53:17.143
> 
> 标签：workflow-foundation-4, workflow-activity

我有一个跟踪参与者，当被调用时，它会启动一个新线程来完成跟踪工作。跟踪工作最终会这样做：

```
private static readonly ConcurrentDictionary<string, DateTime> TimingsDictionary = new ConcurrentDictionary<string, DateTime>();
private static readonly ConcurrentDictionary<Guid, DateTime> WorkflowTimingsDictionary = new ConcurrentDictionary<Guid, DateTime>();

private void TimeActivityRecord(TrackingRecord record)
{
    var activityStateRecord = record as ActivityStateRecord;
    if (activityStateRecord != null)
    {
        if (activityStateRecord.State == ActivityStates.Executing)
        {
            if (!TimingsDictionary.TryAdd(GetActivityId(activityStateRecord), activityStateRecord.EventTime))
            {}
        }

        if (activityStateRecord.State == ActivityStates.Closed
            || activityStateRecord.State == ActivityStates.Faulted
            || activityStateRecord.State == ActivityStates.Canceled)
        {
            DateTime startTime;
            if (TimingsDictionary.TryRemove(GetActivityId(activityStateRecord), out startTime))
            {
                timer.TimeAction("Executing workflow step " + activityStateRecord.Activity.Name, activityStateRecord.InstanceId, activityStateRecord.EventTime.Subtract(startTime));
            }
        }
    }
}

private void TimeWorkflowRecords(TrackingRecord record)
{
    var workflowInstanceRecord = record as WorkflowInstanceRecord;
    if (workflowInstanceRecord != null)
    {
        if (workflowInstanceRecord.State == WorkflowInstanceStates.Started)
        {                    
            if (!WorkflowTimingsDictionary.TryAdd(workflowInstanceRecord.InstanceId, workflowInstanceRecord.EventTime))
            {}
        }

        if (workflowInstanceRecord.State == WorkflowInstanceStates.Completed
            || workflowInstanceRecord.State == WorkflowInstanceStates.Aborted
            || workflowInstanceRecord.State == WorkflowInstanceStates.UnhandledException
            || workflowInstanceRecord.State == WorkflowInstanceStates.Terminated
            || workflowInstanceRecord.State == WorkflowInstanceStates.Canceled)
        {
            DateTime startTime;
            if (WorkflowTimingsDictionary.TryRemove(workflowInstanceRecord.InstanceId, out startTime))
            {
                timer.TimeAction("Executing workflow", workflowInstanceRecord.InstanceId, workflowInstanceRecord.EventTime.Subtract(startTime));
            }
        }
    }
} 
```

跟踪整个工作流程时间和已配置活动的时间。但是，我得到了奇怪的结果，工作流实例本身似乎总是比最长的活动花费更少的时间。有时我的工作流程需要 16 毫秒，其中的 6 个活动需要 625 毫秒、150 毫秒、125 毫秒、93 毫秒、17 毫秒、78 毫秒。

我做错了什么吗？我觉得我一定错过了一些非常明显的东西，但我一生都看不到它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:50:30.857

当然，我在做一些愚蠢的事情。当我记录我使用的时间跨度所花费的时间时

```
timespan.Milliseconds 
```

而不是

```
timespan.TotalMilliseconds 
```

为我回学校。或者也许只是睡一觉。

# mysql - 如何使用 MySQL 进行不同查询的总和

> ID：16064694
> 
> 赞同：0
> 
> 时间：2013-04-17T15:53:18.293
> 
> 标签：mysql, sql, select

我想知道怎么做！！！。

现在：我有卖家按组划分，提供宠物

宠物位于名为*PetTable*（PETCode 和 PETName）的表中

```
CREATE TABLE PetTable ( 
PETCode VARCHAR(16) UNIQUE NOT NULL, 
PETName VARCHAR(32) NOT NULL 
);
INSERT INTO PetTable (PETCode, PETName) VALUES 
('Pet1','Black Cat'), 
('Pet2','Big Dog'), 
('Pet3','Gold Fish'), 
('Pet4','Parlot'), 
('Pet5','Bird'), 
('Pet6','Small Dog'); 
```

卖家存储在*SellerTable*（CodeSeller 和 NameSeller）中

```
CREATE TABLE SellerTable  ( 
CodeSeller VARCHAR(16) UNIQUE NOT NULL, 
NameSeller VARCHAR(32) NOT NULL 
); 
INSERT INTO SellerTable  (CodeSeller, NameSeller) VALUES 
('Seller0','John '), 
('Seller1','Paul '), 
('Seller2','David '),   
('Seller3','James '); 
```

*卖家使用具有 3 个字段（ PETCode* 、CodeSeller、Quantity）的 SalesTable与宠物相关联

```
CREATE TABLE SalesTable ( 
PETCode VARCHAR(16) NOT NULL, 
CodeSeller VARCHAR(16) NOT NULL, 
Quantity INT NOT NULL 
);
INSERT INTO SalesTable (PETCode, CodeSeller, Quantity) VALUES 
('Pet1', 'Seller0', '9'), 
('Pet2', 'Seller0', '81'), 
('Pet3', 'Seller0', '7'), 
('Pet4', 'Seller1', '63'), 
('Pet5', 'Seller1', '4'), 
('Pet6', 'Seller1', '50'), 
('Pet2', 'Seller2', '61'), 
('Pet5', 'Seller2', '72'), 
('Pet4', 'Seller3', '83'), 
('Pet2', 'Seller3', '94'), 
('Pet1', 'Seller3', '8'); 
```

我的查询很简单，如何知道每个 PET 的销售额！PET1，PET2，PET3的所有销售额的总和是多少......继续......

感谢您的宝贵帮助...

安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:57:09.133

您需要加入`PetTable`with `SalesTable`， with `PetTable.PetCode = SalesTable.PetCode`，并且由于它们共同的列具有相同的名称，您可以使用 a `NATURAL JOIN`：

```
SELECT PETName, SUM(Quantity)
FROM PetTable NATURAL JOIN SalesTable
GROUP BY PETName 
```

请[在此处](http://sqlfiddle.com/#!2/97d04/3)查看小提琴。

或者，如果您只需要 SUM by `PETCode`，并且您对宠物名称不感兴趣，则可以在不连接的情况下使用它：

```
SELECT PETCode, SUM(Quantity)
FROM SalesTable
GROUP BY PETCode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:57:51.167

您需要先加入表格。由于您对 不感兴趣，因此使用表`SellerName`连接表就可以满足您的需求。`PetTable``SalesTable``LEFT JOIN`

在我的查询中使用`LEFT JOIN`over的原因是它仍然会包含尚未售出的内容。`INNER JOIN``Pets`

```
SELECT  a.PETCode,
        a.PETName,
        SUM(b.Quantity) TotalSold
FROM    PetTable a
        LEFT JOIN SalesTable b
            ON a.PETCode = b.PETCode
GROUP   BY  a.PETCode, a.PETName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/97d04/4)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

输出

```
╔═════════╦═══════════╦═══════════╗
║ PETCODE ║  PETNAME  ║ TOTALSOLD ║
╠═════════╬═══════════╬═══════════╣
║ Pet1    ║ Black Cat ║        17 ║
║ Pet2    ║ Big Dog   ║       236 ║
║ Pet3    ║ Gold Fish ║         7 ║
║ Pet4    ║ Parlot    ║       146 ║
║ Pet5    ║ Bird      ║        76 ║
║ Pet6    ║ Small Dog ║        50 ║
╚═════════╩═══════════╩═══════════╝ 
```

# symfony - Symfony 如何生成会话 ID？

> ID：16064696
> 
> 赞同：2
> 
> 时间：2013-04-17T15:53:20.737
> 
> 标签：symfony

我想知道 Symfony 如何生成会话 ID？我试图找到一个对其负责的片段，但我做不到。它是在返回 ID 之前检查冲突还是有可能（可能几乎不可能但可能）为两个用户生成相同的会话 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:31:21.863

您可以搜索实现`SessionStorageInterface`.

默认使用原生 PHP 会话存储，因此 PHP 的[session_id()](http://php.net/manual/en/function.session-id.php)负责生成 ID。

[编辑：这里](https://stackoverflow.com/questions/138670/how-unique-is-the-php-session-id)有另一个讨论，关于这个本机会话 ID 的独特性。

# java - equals() 应该是递归/深度的吗？

> ID：16064697
> 
> 赞同：4
> 
> 时间：2013-04-17T15:53:22.490
> 
> 标签：java, equals

没有人真正谈论*equals()*和*hasCode()*的这一方面，但对*equals()*和*hashCode()*行为可能产生巨大影响。在处理引用其他对象的更复杂的对象时非常重要。

Joshua Bloch 在他的 Effective Java 中甚至没有在他的“覆盖 equals() 方法”一章中提到它。他所有的例子都是像 Point 和 ColorPoint 这样的琐事，都只有原始或接近原始的类型。

可以避免递归吗？有时几乎没有。认为：

```
Person {
    String name;
    Address address;
} 
```

这两个字段都必须转到**业务键**（正如 Hibernate 的人所说的那样），它们都是**值组件**（正如 Joshua Bloch 所拥有的那样）。Address 本身就是一个复杂的对象。递归。

请注意，Eclipse 和 IntelliJ 等 IDE 确实会生成递归 equals() 和 hashCode()。默认情况下，它们使用所有字段。如果你大量使用生成器工具，你就会自找麻烦。

一个麻烦是你会得到一个**StackOverflowError**。这是我的[简单测试证明它](https://bitbucket.org/espinosa/a-java-core-playground/src/7ae6bfb937a2a5270331dad7db617bc6be57888d/src/my/code/a001/equality/B1EqualsWithHiddenInfiniteLoopTest.java?at=master)。
所需要的只是将另一个对象作为“值组件”的类，形成一个对象图和推荐的 equals() 实现。是的，您需要在那个循环中绘制图表，但这并非不切实际（想象分子、地图上的路径、相互关联的交易......）。

另一个麻烦是**性能**。equals() 推荐的实际上是比较两个对象图，可能是巨大的图，最终可能会在不知情的情况下比较数千个节点。并不是所有的都在内存中是必需的！考虑到某些对象可能是可延迟加载的。一个 equals() 或 hashCode() 调用最终可能会加载一半的数据库。

悖论是，你越严格地重写 equals() 和 hashCode() 就像你被鼓励做的那样，你就越有可能遇到麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:54:19.533

理想情况下，equals() 方法应该测试逻辑相等。在某些情况下，它可能比物理对象下降得更深，而在其他情况下，它可能不会。

如果测试逻辑相等不可行，由于性能或其他问题，那么您可以保留 Object 提供的默认实现，而不依赖 equals()。例如，您不必将对象图用作集合中的键。

布洛赫确实这样说：

> 避免问题的最简单方法是不要重写 equals 方法，在这种情况下，类的每个实例都只与自身相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T17:14:49.650

至少有两个逻辑问题，这对于任何类型的任何两个引用都是有意义的，并且在不同时间`equals`对测试很有用：

1.  该类型能否保证这两个引用将永远标识等价对象？

2.  只要保存引用的代码既不修改对象，也不将它们暴露给可以这样做的代码，该类型是否可以保证这两个引用将标识等效对象？

如果一个引用标识了一个可能随时更改而不另行通知的对象，则唯一应该被视为等效的引用是那些标识相同对象的引用。如果一个引用标识了一个深度不可变类型的对象，并且从不用于测试其身份的方式（例如锁定`IdentityHashSet`，等等），那么所有对拥有相同内容的对象的引用都应该被认为是等效的。在上述两种情况下，正确的行为`equals`是明确和明确的，因为在前一种情况下，两个问题的正确答案将通过测试参考身份获得，而在后一种情况下，正确答案将通过测试深度相等性获得.

不幸的是，有一个非常常见的场景，这两个问题的答案存在分歧：当对可变类型对象的唯一现存引用由代码持有时，该代码知道对这些对象的引用永远不会被可能改变它们或测试的代码持有他们作为参考身份。在那种情况下，如果两个这样的对象目前封装了相同的状态，它们将永远这样做，因此等价应该基于成分的等价而不是引用身份。换句话说，`equals`应该基于嵌套对象如何回答第二个问题。

因为相等的含义取决于仅由引用的持有者知道的信息，而不是由引用标识的对象，所以`equals`方法实际上不可能知道哪种风格的相等是合适的。知道它们所引用的事物可能会自发改变的类型应该测试这些组成部分的引用相等性，而知道它们不会改变的类型通常应该测试深度相等性。集合之类的东西应该允许所有者指定存储在集合中的东西是否可以自发改变，并在此基础上测试相等性；不幸的是，相对较少的内置集合包含任何此类工具（代码可以在例如`HashTable`和`IdentityHashTable`区分什么样的测试适合keys，但大多数集合没有等价的选择）。最好的办法可能是让每个新的集合类型在其构造函数中提供封装模式的选择：将集合本身​​视为可能在没有通知的情况下更改的东西（报告集合上的引用相等），假设集合将保持不变对可能在没有通知的情况下更改的事物的引用集（测试内容上的引用相等性），假设集合和组成对象都不会改变（测试`equals`每个组成对象），或者 - 对于数组集合或嵌套集合不支持深度相等测试——执行超深度相等测试到指定深度。

# c# - 在字符串中查找无界文件路径

> ID：16064698
> 
> 赞同：1
> 
> 时间：2013-04-17T15:53:25.260
> 
> 标签：c#, parsing

我有这些由封闭源代码第三方软件生成的错误消息，我需要从中提取文件路径。

所述文件路径是：

*   无界（即不被引号、括号、方括号等包围）
*   扎根（即以`<letter>:\`例如开头`C:\`）
*   不保证有文件扩展名
*   表示保证存在于运行提取代码的计算机上的文件（仅文件，而不是目录）。
*   由任何有效字符组成，包括空格，使它们难以被发现（例如`C:\This\is a\path \but what is an existing file path here`）

需要注意的是，每条消息可以有 0 个或多个文件路径。

如何在错误消息中找到这些文件路径？

我在下面提出了一个答案，但我觉得有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:45:17.130

对于每场比赛，期待下一个“\”字符。所以你可能会得到“c:\mydir\”。检查该目录是否存在。然后找到下一个`\`，给出“c:\mydir\subdir`。检查那个路径。最终你会找到一个不存在的路径，或者你会进入下一个匹配的开始。

那时，您知道要查找的目录。然后只需调用`Directory.GetFiles`并匹配与从您找到的最后一个路径开始的子字符串匹配的最长文件名。

这应该最大限度地减少回溯。

这是如何做到的：

```
static void FindFilenamesInMessage(string message) {
    // Find all the "letter colon backslash", indicating filenames.
    var matches = Regex.Matches(message, @"\w:\\", RegexOptions.Compiled);

    // Go backwards. Useful if you need to replace stuff in the message
    foreach (var idx in matches.Cast<Match>().Select(m => m.idx).Reverse()) {
        int length = 3;
        var potentialPath = message.Substring(idx, length);
        var lastGoodPath = potentialPath;

        // Eat "\" until we get an invalid path
        while (Directory.Exists(potentialPath)) {
            lastGoodPath = potentialPath;
            while (idx+length < message.Length && message[idx+length] != '\\')
                length++;

            length++; // Include the trailing backslash

            if (idx + length >= message.Length)
                length = (message.Length - idx) - 1;

            potentialPath = message.Substring(idx, length);
        }

        potentialPath = message.Substring(idx);

        // Iterate over the files in directory we found until we get a match
        foreach (var file in Directory.EnumerateFiles(lastGoodPath)
                                      .OrderByDescending(s => s.Length)) {
            if (!potentialPath.StartsWith(file))
                continue;

            // 'file' contains a valid file name
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:53:25.260

我就是这样做的。

但是，我认为一遍又一遍地对消息进行子串化并不是一个好主意。

```
static void FindFilenamesInMessage(string message)
{
    // Find all the "letter colon backslash", indicating filenames.
    var matches = Regex.Matches(message, @"\w:\\", RegexOptions.Compiled);

    int length = message.Length;
    foreach (var index in matches.Cast<Match>().Select(m => m.Index).Reverse())
    {
        length = length - index;
        while (length > 0)
        {
            var subString = message.Substring(index, length);
            if (File.Exists(subString))
            {
                // subString contains a valid file name

                ///////////////////////
                // Payload goes here
                //////////////////////

                length = index;
                break;
            }
            length--;
        }
    }
} 
```

# wsdl - 调用安全的 Web 服务

> ID：16064703
> 
> 赞同：0
> 
> 时间：2013-04-17T15:53:34.700
> 
> 标签：wsdl, cxf

我很难连接到安全的 Web 服务。我的服务提供商给了我一个 WSDL URL（它使用 SSL 连接）和一个 PFX 文件。服务提供商告诉我们，WSDL 只能由属于我们网络的用户访问。

到目前为止，我已经尝试过：

(i) 将给定 pfx 文件中的密钥导出到单独的密钥库

(ii) 将证书导出到 (a) java 的默认信任库 (b) 独立存储

我已经设置了系统属性：

```
 System.setProperty("javax.net.ssl.keyStore", "C:/Test/keystore.jks");
    System.setProperty("javax.net.ssl.keyStorePassword", "test123");
    System.setProperty("javax.net.ssl.keyStoreType", "jks");
    System.setProperty("javax.net.ssl.trustStore", "C:/Program Files/Java/jdk1.7.0_17/jre/lib/security/cacerts");
    System.setProperty("javax.net.ssl.trustStorePassword", "changeit"); 
```

我正在使用最新版本的 CXF 和 Java。我遇到了几个可以通过谷歌搜索解决的异常，但我最终对“无法发送消息异常”感到震惊。我该如何处理这个异常？

# java - Java HTTPS 客户端

> ID：16064704
> 
> 赞同：0
> 
> 时间：2013-04-17T15:53:40.653
> 
> 标签：java, ssl, https

我的问题是如何向服务器请求 HTTPS 请求，并获取响应内容？不使用任何第三方 API？

笔记！！这是 HTTPS，不是 HTTP！

例如，我给一个 URL: " `www.google.com`" 和 port `443`，它可以从服务器获取 index.html。

如何实现这样的客户端？有人可以给出一些示例代码吗？

我已经写了这个，但它不起作用。

```
import java.io.*;
import java.net.*;
import javax.net.ssl.*;
public class HttpsClient {
public static void main(String[] args) {
  PrintStream out = System.out;

  // Getting the default SSL socket factory
  SSLSocketFactory f = 
     (SSLSocketFactory) SSLSocketFactory.getDefault();
  out.println("The default SSL socket factory class: "
     +f.getClass());
  try {
  // Getting the default SSL socket factory
     SSLSocket c =
       (SSLSocket) f.createSocket("www.google.com", 443);
     printSocketInfo(c);
     c.startHandshake();
     BufferedWriter w = new BufferedWriter(new OutputStreamWriter(
        c.getOutputStream()));
     BufferedReader r = new BufferedReader(new InputStreamReader(
        c.getInputStream()));
     w.write("GET / HTTP/1.0");
     w.newLine();
     w.newLine(); // end of HTTP request
     w.flush();
     String m = null;
     while ((m=r.readLine())!= null) {
        out.println(m);
     }
     w.close();
     r.close();
     c.close();
  } catch (IOException e) {
     System.err.println(e.toString());
  } 
```

}

# java - Hibernate, Spring, Dao getSession() NullPointerException

> ID：16064707
> 
> 赞同：0
> 
> 时间：2013-04-17T15:53:52.333
> 
> 标签：java, spring, hibernate

我得到了错误。

```
java.lang.NullPointerException
at org.springframework.orm.hibernate3.support.HibernateDaoSupport.getSession(HibernateDaoSupport.java:143)
at com.walladverts.model.dao.UserDao.findByUsername(UserDao.java:25) 
```

在 findByUsername 中访问 getSession() 时

```
package com.walladverts.model.dao;
import java.util.List;
import org.hibernate.Criteria;
import org.hibernate.Session;
import org.hibernate.criterion.Restrictions;
import org.springframework.stereotype.Repository;
import com.walladverts.exceptions.DataNotFoundException;
import com.walladverts.model.entities.User;
import com.walladverts.util.CustomHibernateDaoSupport;@
Repository("userDao")
public class UserDao extends CustomHibernateDaoSupport {
    public void save(User user) {
        getHibernateTemplate().save(user);
    }
    public void delete(User user) {
        getHibernateTemplate().delete(user);
    }
    public User findByUsername(String username) throws DataNotFoundException {
        Session session = getSession();
        Criteria crit = session.createCriteria(User.class);
        System.out.println(username);
        crit.add(Restrictions.eq("username", username));
        crit.setMaxResults(1);
        List < User > users = crit.list();
        System.out.println(users);
        if (users.size() < 1) {
            throw new DataNotFoundException();
        }
        return users.get(0);
    }
} 
```

父类：

```
package com.walladverts.util;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;
public abstract class CustomHibernateDaoSupport extends HibernateDaoSupport {@
    Autowired
    public void init(SessionFactory factory) {
        setSessionFactory(factory);
    }
} 
```

**有人知道为什么会这样吗？它冻结了我的发展。**

编辑：

当 Spring Secure 尝试登录用户时会发生这种情况。从 Controller 调用此方法时，我的 SessionFactory 也可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:15:32.030

```
public abstract class CustomHibernateDaoSupport extends HibernateDaoSupport {
    @Autowired
    @Qualifier("sessionFactory")
    private SessionFactory sessionFactory；

    public Session getSession() {
        return sessionFactory.getCurrentSession();
    }
} 
```

* * *

```
public User findByUsername(String username) throws DataNotFoundException {
     Session session = getSession();
     // do sth
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T15:13:18.650

`HibernateDaoSupport`很长一段时间都有最终的[getSessionFactory](http://grepcode.com/file/repo1.maven.org/maven2/springframework/spring/1.2.4/org/springframework/orm/hibernate3/support/HibernateDaoSupport.java#89)和[setSessionFactory](http://grepcode.com/file/repo1.maven.org/maven2/springframework/spring/1.2.4/org/springframework/orm/hibernate3/support/HibernateDaoSupport.java#69)方法无法覆盖。

最初应该通过它来减轻 xml 配置，但[也可以](https://stackoverflow.com/questions/3230608/spring-3-annotations-hibernatedaosupport-repository-requires-session-factory/3230867#3230867)`<property name="sessionFactory" ref="sessionFactory" />`混合使用`@Autowired`注释。

您只需在需要时调用[getSession()](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/orm/hibernate3/support/HibernateDaoSupport.html#getSession--)方法。

# objective-c - 收集 NSXMLDocument 警告输出

> ID：16064718
> 
> 赞同：2
> 
> 时间：2013-04-17T15:54:20.757
> 
> 标签：objective-c, cocoa, nserror, nsxml, nsxmldocument

我有以下用于通过 XSLT 转换 XML 的辅助函数：

```
- (NSXMLDocument *)transform:(NSString *)xml :(NSString *)xslt
{
    NSError *xmlDocErr = nil;
    NSXMLDocument *transformedXmlDoc = nil;

    NSXMLDocument *xmlDoc = [[NSXMLDocument alloc]
                              initWithXMLString:xml
                              options:NSXMLDocumentValidate
                              error:&xmlDocErr];

    if (xmlDocErr) {
        NSLog(@"Error: %@", [xmlDocErr localizedDescription]);
    }
    else {
        transformedXmlDoc = [xmlDoc objectByApplyingXSLTString:xslt 
                                    arguments:nil
                                    error:&xmlDocErr];
        if (xmlDocErr) {
            NSLog(@"Error: %@", [xmlDocErr localizedDescription]);
        }
    }

    return transformedXmlDoc;
} 
```

它按预期工作，但是我可以使用帮助来解决一个小问题。

当我尝试使用 NSXMLDocument 未知的 XSLT 函数（例如[EXSLT](http://www.exslt.org/)的[`node-set()`](http://www.exslt.org/exsl/functions/node-set/index.html)）时，我在 Xcode 中得到类似于以下内容的输出 - 特别是第一行是有趣的：

> xmlXPathCompOpEval：未找到函数节点集
> 
> XPath 错误：未注册的函数运行时
> 
> 错误：每个元素
> 
> 无法评估“选择”表达式。

这很酷; 这正是我所期望的。

然而，对我来说有趣的是输出不包含`"Error: "`任何地方（如果该输出已被我的`[xmlDocErr localizedDescription]`调用捕获，则应该是这种情况）。

**那么，问题来了：**我怎样才能获取上面的输出（以便我可以用它来向我的用户显示相关消息）？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:43:32.063

`libxml`错误发生在 的第 13479 行的深处[`xpath.c`](http://www.opensource.apple.com/source/libxml2/libxml2-22.3/libxml2/xpath.c?txt)，最终调用`xmlGenericErrorDefaultFunc()`的第 71 行[`error.c`](http://www.opensource.apple.com/source/libxml2/libxml2-22.3/libxml2/error.c?txt)，打印到`stderr`. `stderr`因此，最简单的方法是在 XSLT 处理进行时进行捕获：

```
- (NSXMLDocument *)transform:(NSString *)xml :(NSString *)xslt
{
    NSError *xmlDocErr = nil;
    NSXMLDocument *transformedXmlDoc = nil;

    NSXMLDocument *xmlDoc = [[NSXMLDocument alloc]
                             initWithXMLString:xml
                             options:NSXMLDocumentValidate
                             error:&xmlDocErr];

    if (xmlDocErr) {
        NSLog(@"Error: %@", [xmlDocErr localizedDescription]);
    }
    else {
        // Pipe for stderr
        NSPipe *pipe = [NSPipe pipe];
        // Duplicate of stderr (will use later)
        int cntl = fcntl(STDERR_FILENO,F_DUPFD);
        // Redirect stderr through our pipe
        dup2([[pipe fileHandleForWriting] fileDescriptor], STDERR_FILENO);

        transformedXmlDoc = [xmlDoc objectByApplyingXSLTString:xslt
                                                     arguments:nil
                                                         error:&xmlDocErr];
        // Get the data
        NSData *dat = [[pipe fileHandleForReading] availableData];
        // Redirect stderr through our duplicate, to restore default output behavior
        dup2(cntl, STDERR_FILENO);
        // Did anything get logged?
        if ([dat length]>0) {
            NSLog(@"Error: %@", [[NSString alloc] initWithData:dat encoding:NSASCIIStringEncoding]);
        }
        if (xmlDocErr) {
            NSLog(@"Error: %@", [xmlDocErr localizedDescription]);
        }
    }

    return transformedXmlDoc;
} 
```

但这有点像黑客，所以要小心......

如果您对该解决方案不满意，应该可以使用您自己的自定义错误处理函数覆盖变量（默认`xmlGenericError`情况下为引用），使用. 这会更安全，但也更复杂（如果可能的话）。`xmlGenericErrorDefaultFunc``initGenericErrorDefaultFunc`[`xmlerror.h`](http://www.opensource.apple.com/source/libxml2/libxml2-22.3/libxml2/include/libxml/xmlerror.h?txt)

# knockout.js - 使用 ko.mapping 将我的 observableArray 填充到现有方法中

> ID：16064719
> 
> 赞同：0
> 
> 时间：2013-04-17T15:54:22.853
> 
> 标签：knockout.js, knockout-mapping-plugin

我有一个 viewModel 有这个 observableArray

```
(function () {
    function myItems() {
        var self = this;
        self.itemArray = ko.observableArray();
        somefunction() {...
}
var myViewModel = new myItems(); 
```

这个 observableArray 将包含这样的实例：

```
(function () {
    function item() {
        var self = this;
        self.name = ko.observable("some data");
        self.doStuff = function () {
            return "doing whatever";
        };
    }
    window.item = item
}()); 
```

我将我的 json 映射到 viewModel

```
var json = '{"name":"my main property", "itemArray": [ { "name": "Bob" }, { "name" : "Fred" } ] }';

var myViewModel = new myItems();
ko.mapping.fromJSON(state, {}, myViewModel); 
```

如何告诉映射它必须使用 item 对象映射 itemArray？如何在 item() 和 myItems() 之间创建链接？

这是一个显示问题的小提琴 [http://jsfiddle.net/dexster/hLEMz/7/](http://jsfiddle.net/dexster/hLEMz/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:29:39.043

解决方案是使用映射选项的创建回调

```
var mapping = {
    'itemArray': {
        create: function (options) {
            //add items to the items object here
            ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:01:14.813

Well, once you've serialised it into JSON to store the state, you're back to the position you were in before you processed the JSON data to populate your view models in the first place.

Actually, that's the first issue you have, you are serialising the new viewmodel, if you serialise itemArray on the viewmodel, then you will have the data that you started with:

```
var unmapped = ko.mapping.toJSON(myViewModel1.itemArray); 
```

Then, you can just pass that in to your addItems method:

```
myViewModel2.addItems(unmapped); 
```

instead of mapping them.

Here's an updated [jsFiddle](http://jsfiddle.net/hLEMz/6/)

# jquery - 动态 jQuery 选择器

> ID：16064724
> 
> 赞同：1
> 
> 时间：2013-04-17T15:54:34.067
> 
> 标签：jquery, forms

我决定改变我的问题，让它更容易理解。

我使用 php 从 db 生成表单。它是测验，它有n（数量）组单选按钮，每组代表我的测验中1个问题的答案，每组的名称是name1，name2，name3 ...取决于数据库中的问题和答案的数量。

我只需要选择一组单选按钮（测验中的一个问题和答案）并获取它的值，然后通过 ajax 将其发送以与数据库中的正确答案进行比较。

所以我需要选择器来让我做到这一点，一个又一个问题到测验结束。

这是我从 DB 生成的 HTML 代码：

```
<form>
<fieldset>
<label for = "otazka1">Kolik je 1+1 ?</label>
<div id="radio">
<input type="radio" id="radio1" name="0" value="0" /><label for="radio1">4</label>
<input type="radio" id="radio2" name="0" value="1" /><label for="radio2">2</label>
<input type="radio" id="radio3" name="0" value="2" /><label for="radio3">3</label>
</div>
<label for = "otazka2">Kolik je 2+2 ?</label>
<div id="radio">
<input type="radio" id="radio1" name="1" value="0" /><label for="radio1">2</label>
<input type="radio" id="radio2" name="1" value="1" /><label for="radio2">3</label>
<input type="radio" id="radio3" name="1" value="2" /><label for="radio3">5</label>
</div>
<label for = "otazka3">Kolik je 3+3 ?</label>
<div id="radio">
<input type="radio" id="radio1" name="2" value="0" /><label for="radio1">5</label>
<input type="radio" id="radio2" name="2" value="1" /><label for="radio2">10</label>
<input type="radio" id="radio3" name="2" value="2" /><label for="radio3">9</label>
</div>
</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:56:09.303

我想我明白你在问什么。用于[`each()`](http://api.jquery.com/jQuery.each/)迭代输入。

您当前的代码：*`$("input.i")`*正在寻找`inputs`具有类`i`.

```
$('input').each(function(){
    $(this).val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:02:14.773

您可以将索引连接到选择器以获取具有正确索引的输入

```
for(i=0;i<numberOfInputs;i++){
    $("form input:eq(" + i + ")").getVal()
} 
```

在您的示例中，将数字用作类实际上没有意义，因此您的问题有点不清楚。

# c++ - p周围的堆栈已损坏c ++

> ID：16064725
> 
> 赞同：1
> 
> 时间：2013-04-17T15:54:34.823
> 
> 标签：c++, string, char

这一定很简单，但我现在已经麻木地想清楚了。所以这是我代码的一小部分，除此之外一切正常。我真正想做的是 infile1.open(temp2->path); 但这是不可能的，因为 temp2 是一个字符串。所以我想把这个字符串放入一个像 char p[100] 这样的 char 数组中以使用 infile1.open(p)。它编译但几秒钟后繁荣：p周围的堆栈已损坏

```
 char p[100];
   while( temp2 != 0)
   {
        stringToCharArray(temp2->path, p); 
        infile1.open(p);
        checkingWords(infile1, stopWords, invertedIndex);
        infile1.close();
        temp2 = temp2->next;
   }

void stringToCharArray(string s, char *c)
{
    int i;
    int size = s.size();
    for( i=0; i<=size ; i++)
    {
        c[i] = s[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:56:01.013

相信你想要[`std::string::c_str`](http://en.cppreference.com/w/cpp/string/basic_string/c_str)。

```
infile1.open(temp2->path.c_str()); 
```

（请注意，这`const char *`仅在您下次更改`std::string`从中获取内容时才有效，在这种情况下`temp2->path`）。

看起来您现有代码的主要错误`for( i=0; i<=size ; i++)`应该是`i<size`. 但是我们不要太详细地讨论它，因为无论如何你都不应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:57:04.050

你可以用简单的方法做到这一点

```
infile1.open(temp2->path.c_str()); 
```

但是你的艰难方式应该是这样的

```
void stringToCharArray(string s, char *c)
{
    int i;
    int size = s.size();
    for( i=0; i<size ; i++) // < not <=
    {
        c[i] = s[i];
    }
    c[size] = '\0';
} 
```

当然，如果您的字符串恰好是 100 个字符或更多字符，那么困难的方法将会失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T15:57:44.897

你可以简单地做：

```
 infile1.open(temp2->path.c_str()); 
```

堆栈损坏发生在您的`stringToCharArray`函数内部。

```
for( i=0; i<=size ; i++)
            //^^^should not reach size-1, equal redundant 
```

# mysql - MYSQL - 如何根据多个条件对数据进行分类或分组

> ID：16064728
> 
> 赞同：0
> 
> 时间：2013-04-17T15:54:42.010
> 
> 标签：mysql

我有一个数据库表，其中包含简单格式的商品贸易信息：From_Country、To_Country、Year、Commodity、Trade_Volume。

我想根据他们的贸易历史创建一个排名贸易伙伴的表格：条件需要是：

*   如果所有年份 From_Country 1 和 To_Country 1 之间的商品 Trade_Volume = 0，则排名 = 0

*   如果商品 From_Country 1 的 Trade_Volume >0 和 To_Country 1 的年份、3、4 和 5，则排名 = 1

有没有人有可以帮助我的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:58:39.907

```
SELECT CASE WHEN Trade_Volume = 0 AND From_Country = 1 AND To_Country = 1 THEN 0 
            WHEN Trade_Volume > 0 AND From_Country = 1 AND To_Country = 1 AND Year IN (3,4,5) THEN 1
END AS Ranking
FROM <yourtable> 
```

# sql - SQL select Count with where 非常慢

> ID：16064730
> 
> 赞同：1
> 
> 时间：2013-04-17T15:54:46.317
> 
> 标签：sql, performance, linq, count

`count()`我在我的程序中多次使用一个函数：

```
var housewith2floor = from qry in houses
where qry.floor == 2
select qry;

var counthousewith2floor = housewith2floor.count();

var housecolorwhite = from qry in house
where qry.color == "white"
select qry;

var countwhotehouse = housecolorwhite.count(); 
```

每种`count`方法都需要很长时间才能执行。该数据库有 200 万行数据。我已经为 floor 列和 color 列放置了一个非聚集索引，但是计数仍然需要太长时间。有没有其他方法可以让我的计数运行得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:18:32.850

这不是需要时间的计数。初始语句直到需要时才会真正执行（称为[延迟执行](http://www.codeguru.com/csharp/csharp/cs_linq/article.php/c16935/Understanding-LINQs-Deferred-Execution.htm)）。所以它是由生成的查询

```
var housewith2floor = from qry in houses
where qry.floor == 2
select qry; 
```

这需要时间。

编辑以删除有关索引的声明，因为我看到您已经创建了它们。

是否有任何引用或被“房屋”引用的表格，它们是否使用延迟加载？

# c# - 没有管理员权限无法启动 nancy 自我主机

> ID：16064732
> 
> 赞同：18
> 
> 时间：2013-04-17T15:54:49.590
> 
> 标签：c#, nancy

我的应用程序使用 Nancy Selfhosting。当我在没有管理员权限的情况下启动它时，我得到一个 System.Net.HttpListenerException“拒绝访问”。

这是代码：

```
static void Main(string[] args)
    {   
        var nancyHost = new Nancy.Hosting.Self.NancyHost(new Uri("http://localhost:80/"));
        nancyHost.Start();
        Application.Run();
    } 
```

我也尝试了不同的端口但没有成功。奇怪的是，在启动监听相同 URL 的 HttpListener 时，我没有收到任何异常。什么可能导致此异常？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-08-26T06:44:14.957

您需要将自主机配置设置为不通过[`RewriteLocalhost`property](https://github.com/NancyFx/Nancy/wiki/Self-Hosting-Nancy)重写 localhost 路由。

```
namespace NancyApplication1
{
    using System;
    using Nancy.Hosting.Self;

    class Program
    {
        static void Main(string[] args)
        {
            var uri = new Uri("http://localhost:3579");
            var config = new HostConfiguration();

            // (Change the default RewriteLocalhost value)
            config.RewriteLocalhost = false;

            using (var host = new NancyHost(config, uri))
            {
                host.Start();

                Console.WriteLine("Your application is running on " + uri);
                Console.WriteLine("Press any [Enter] to close the host.");
                Console.ReadLine();
            }
        }
    }
} 
```

我通过尝试和失败发现了这一点，但[这个页面解释了背后的原因。](http://blog.differentpla.net/blog/2013/05/29/using-iis-express-in-vs-welcome-page)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-23T15:09:24.277

或者 - 从[文档](https://github.com/NancyFx/Nancy/wiki/Hosting-nancy-with-owin)中：

> 请注意，在 Windows 主机上，可能会抛出 HttpListenerException 并带有拒绝访问消息。要解决此问题，必须将 URL 添加到 ACL。此外，可能需要在机器或公司防火墙上打开该端口以允许访问该服务。

通过运行以下命令添加到 ACL：

```
netsh http add urlacl url=http://+:8080/ user=DOMAIN\username 
```

如果您需要从 ACL 中删除：

```
netsh http delete urlacl url=http://+:8080/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T04:23:40.460

您可以使用 Kestrel 托管 Nancy。这真的很简单：

```
public void Main(string[] args)
{
    var owinHost = new WebHostBuilder()
        .UseStartup<Startup>()
        .UseUrls("http://+:12345/")
        .Build();

    owinHost.Run();
}

public class Startup
{
    public void Configure(IApplicationBuilder app)
    {
        app.UseOwin(x => x.UseNancy());
    }
} 
```

唯一的困难是准备所需的所有 dll（30+）。我们绝对应该使用 NuGet 来解决所有依赖关系。

# python - 列出二进制组合并映射到数据

> ID：16064734
> 
> 赞同：-2
> 
> 时间：2013-04-17T15:54:56.070
> 
> 标签：python, list

刚开始尝试python，需要一些指示。

我正在寻找基于某些参数的组合。

基本上，

```
parm1 = ['X1','X2']
parm2 = ['Y1','Y2'] 
```

我想从中得到的是

```
['X1','Y1','X1','Y1']
['X1','Y1','X1','Y2']
['X1','Y1','X2','Y1']
['X1','Y1','X2','Y2'] 
```

我认为可以使用二进制列表 (itertools.product("01", repeat=4)) 并替换每个元素，即。

```
0 0 0 0
0 0 0 1 
```

将代表

```
X1 Y1 X1 Y1
X1 Y1 X1 Y2 
```

这样做的最佳方法是什么？

编辑：让我尝试添加更多信息。

```
Colour = ['Black','White']
Type = ['Car','Bike'] 
```

所以，我正在尝试将其格式化为以下

```
 ('Colour','Type','Colour','Type')
('0', '0', '0', '0')-->('Black','Car','Black','Car')
('0', '0', '0', '1')-->('Black','Car','Black','Bike')
('0', '0', '1', '0')-->('Black','Car','White','Car')
('0', '0', '1', '1')-->('Black','Car','White','Bike')
('0', '1', '0', '0')
('0', '1', '0', '1')
('0', '1', '1', '0')
('0', '1', '1', '1')
('1', '0', '0', '0')
('1', '0', '0', '1')
('1', '0', '1', '0')
('1', '0', '1', '1')
('1', '1', '0', '0')
('1', '1', '0', '1')
('1', '1', '1', '0')
('1', '1', '1', '1')-->('White','Bike','White','Bike') 
```

我知道这可以通过列表的每个索引的 if 语句来完成，但是有替代方法吗？

再次编辑：

我写了这个，但认为有更优雅的解决方案吗？

```
import itertools
q=[]
x=["","","",""]
q=list(itertools.product("01", repeat=4))
for p in q:
    if float(p[0]) == 0:
        x[0]= "Black"
    else:
        x[0] = "White"
    if float(p[1]) == 0:
        x[1]= "Car"
    else:
        x[1] = "Bike"
    if float(p[2]) == 0:
        x[2]= "Black"
    else:
        x[2] = "White"
    if float (p[3]) == 0:
        x[3] = "Car"
    else:
        x[3] = "Bike"
    print p
    print x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:57:13.093

基本上你想要的是这个的平面版本：

```
from itertools import product
nested = product(product(Colour, Type), repeat=2)
print list(nested)
# [(('Black', 'Car'), ('Black', 'Car')), 
#  (('Black', 'Car'), ('Black', 'Bike')),
#  ...
# ] 
```

所以你去：

```
from itertools import product
nested = product(product(Colour, Type), repeat=2)

# flatten it by unpacking each element
print [(a,b,c,d) for ((a,b),(c,d)) in nested]

# alternative way to flatten the product
from itertools import chain
print [tuple(chain.from_iterable(x)) for x in nested] 
```

要转换`(0,1)`列表，您可以使用数字作为索引：

```
from itertools import product

Colour = ['Black','White'] # so Color[0] == 'Black' 
Type = ['Car','Bike']

#make that list
nested = product((0,1), repeat=4) # use numbers not strings
print [(Colour[a], Type[b], Colour[c], Type[d]) for (a,b,c,d) in nested] 
```

# php - 从 PHP 获取返回的数据到 ajax

> ID：16064736
> 
> 赞同：0
> 
> 时间：2013-04-17T15:55:01.090
> 
> 标签：php, ajax, return

我有这个代码

```
$.ajax({
        type: 'POST',
        url: 'ajaxfunctions.php',
        data: {email: email},
        success: function(data)
        {
            if(data == "true" || data == "false")
            {
                alert("Response")
            }           
            else
            alert("Data: " + data);
        }
    }); 
```

使用这个 PHP 脚本

```
if(isset($_POST['email']))
{
$email = $_POST['email'];
$countEmail = $db->getCountEmail($email);
if($countEmail == 1)
    echo "true";
else {
    echo "false";
}
} 
```

问题是，它永远不会出现在 alert("Response") 的情况下。总是在另一个。然后在警报窗口中，我得到了完整的 index.html 内容。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:00:57.510

@devShuba 在 Chrome 中监控您的 Ajax 请求，这是之前的相关帖子 [在 Chrome 中的请求监控](https://stackoverflow.com/questions/1820927/request-monitoring-in-chrome)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:27:55.297

也许`isset($_POST['email'])`返回的是假的，这就是原因。

你能做一个`var_dump(isset($_POST['email']));`并检查它是否评估为真吗？如果不是，那么您必须检查电子邮件是否使用您的 javascript 正确发布。

# android - 在 ScrollView 中替代 ListView

> ID：16064738
> 
> 赞同：-1
> 
> 时间：2013-04-17T15:55:06.383
> 
> 标签：android, listview, scrollview

我一直在尝试将 ListView 破解为 ScrollView。正如许多线程所指出的那样，这是一种非常糟糕的做法（请参阅[如何将 ListView 放入 ScrollView 而不会崩溃？](https://stackoverflow.com/questions/3495890/how-can-i-put-a-listview-into-a-scrollview-without-it-collapsing?lq=1)）。我目前正在测量我的 ListView 的高度并使用此处提出的解决方案（[https://stackoverflow.com/a/3495908/924217](https://stackoverflow.com/a/3495908/924217)）来修复它的大小，该解决方案非常适用于等高行，但对于可变高度测量不正确（报告所有行的最小高度）。为了快速而肮脏的修复，有谁知道如何正确测量可变高度行的高度？

更恰当地说，谁能指出我使用 LinearLayouts 的一个很好的解决方法。我正在尝试使用 ListView，因为我有需要动态添加和删除到列表中的项目。如果没有适配器和 ListView 所占用的其他细节，我想不出任何方便的方法来做到这一点。有人可以帮我找到一个正确处理的例子吗？此外，是否有任何涵盖此的开源项目？我见过很多人问类似的问题，但很少有非骇客的决心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:39:53.683

我建议您应该使用 listfragment 以便您可以动态添加/删除项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T11:32:18.527

这里 parentScroll = 你的主滚动视图和 childScroll = 你的列表视图

```
parentScroll.setOnTouchListener(new View.OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {
                    Log.v("PARENT", "PARENT TOUCH");
                    findViewById(R.id.child_scroll).getParent()
                            .requestDisallowInterceptTouchEvent(false);
                    return false;
                }
            });
            childScroll.setOnTouchListener(new View.OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {
                    Log.v("CHILD", "CHILD TOUCH");
                    // Disallow the touch request for parent scroll on touch of
                    // child view
                    v.getParent().requestDisallowInterceptTouchEvent(true);
                    return false;
                }
            }); 
```

# jsf - JSF Validation no wok in template

> ID：16064747
> 
> 赞同：-1
> 
> 时间：2013-04-17T15:55:34.867
> 
> 标签：jsf, jsf-2, facelets

JSF验证不起作用当我提交时，我在myfaces（2.1.10）和mojarra（2.1.21）下尝试过，结果相同。这是我的代码。理论上不执行onSubmit（）并在m_name中显示错误消息。但实际上是执行 onSubmit() 并没有显示错误信息。

模板.xhtml

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:rich="http://richfaces.org/rich">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <title>Title</title>
</h:head>
<h:body>
        <ui:insert name="body"></ui:insert>
</h:body>
</html> 
```

模板客户端文件 templatevalidation.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    template="/template.xhtml">
    <ui:define name="body">
        <h:form>
            <div>
                <h:inputText id="name" value="#{templateBean.name}">
                    <f:validateRequired />
                    <f:validateLength minimum="5" />
                </h:inputText>
                <h:message id="m_name" for="name" />
            </div>
            <div>
                <h:commandButton action="#{templateBean.onSubmit}" value="submit">
                    <f:ajax execute="name" render="m_name" />
                </h:commandButton>
            </div>
        </h:form>
    </ui:define>
</ui:composition> 
```

这是我的 bean TemplateBean.class

```
import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class TemplateBean implements Serializable{

    private static final long serialVersionUID = 9009393522101806766L;

    private String name;

    public void onSubmit(){
        System.out.println("Name: " + name);
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:59:23.960

您需要`<h:message>`在 AJAX 调用之后更新您的组件，以使用标签中的`render`属性显示错误消息：`<f:ajax>`

```
<h:message id="nameMsg" for="name" />

<h:commandButton action="#{templateBean.onSubmit}" value="submit">
    <f:ajax execute="name" render="nameMsg" />
</h:commandButton> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T10:19:32.387

必须使用休眠验证

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>5.0.0.Final</version>
</dependency> 
```

# javascript - 滑块导航 - 下一个

> ID：16064753
> 
> 赞同：2
> 
> 时间：2013-04-17T15:55:49.263
> 
> 标签：javascript, jquery, html

我创建了一个 JavaScript 滑块，它只能自动更改图像。如何添加与自动循环一起使用的上一个和下一个按钮，例如正常的滑块导航？

**这是脚本：**

```
 function slider(sel, intr , i){
        var _slider = this;
        this.ind = i;
        this.selector = sel;
        this.slide = [];
        this.slide_active = 0;
        this.amount;
        this.intr = intr;
        this.selector.children().each(function(i){
            _slider.slide[i] = $(this);
            $(this).hide();
        })
        this.run();
    }
    slider.prototype.run = function(){
        var _s = this;
        this.slide[this.slide_active].fadeIn();
        setTimeout(function(){
            _s.slide[_s.slide_active].fadeOut()
            _s.slide_active = (_s.slide_active + 1) % _s.slide.length;
            _s.run();
        }, this.intr);
        var count = this.slide.length;
    }   

    var slides = [];

    $('.slider').each(function(i){
        slides[i] = new slider($(this) , 5000, i);
    }); 
```

**这是标记：**

```
 <div class="slider">
        <img src="img/modal_slider.jpg" alt="modal_slider" width="782" height="529">
        <img src="img/modal_slider1.jpg" alt="modal_slider" width="782" height="529">
        <a class="slider_btn left" href="javascript:void(0)"></a>
        <a class="slider_btn right" href="javascript:void(0)"></a>
    </div> 
```

**CSS：**

```
.slider img{position:absolute}; 
```

这是它现在如何工作的小提琴：http: [//jsfiddle.net/barney/vbRLU/ （](http://jsfiddle.net/barney/vbRLU/) [Barney](https://stackoverflow.com/users/356541/barney)的学分）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:16:28.103

我用一些新功能调整了你的小提琴，以允许使用两个按钮进行导航。我希望这是你所期待的。

**更新了嵌入式导航按钮**

`[**WORKING EXAMPLE**](http://jsfiddle.net/vbRLU/25/)`

```
<div class="small_box top_right slider">
    <img class="fittobox" src="http://www.lorempixel.com/854/592" alt="home10" />
    <img class="fittobox" src="http://www.lorempixel.com/435/392/sports" alt="home3" />
    <img class="fittobox" src="http://www.lorempixel.com/435/392/food" alt="home4" />
</div>

<style>
.slider img{
    display:none;
}
.fittobox {
    width:400px;
}
.next-arrow {
    right:10px;
}
.previous-arrow {
    left:10px;
}
.arrow {
    position:absolute;
    top:50%;
    right:10px;
    height:50px;
    width:50px;
    background-color:black;
    border-radius:10px;
    opacity:0.8;
    color:white;
    line-height:50px;
    text-align:center;
    font-size:10px;
    cursor:pointer;
}
</style>

function slider(sel, intr, i) {
    var _slider = this;
    this.ind = i;
    this.selector = sel;
    this.slide = [];
    this.slide_active = 0;
    this.amount;
    this.timer = null;
    this.selector.children('img').each(function (i) {
        _slider.slide[i] = $(this);
        $(this).hide();
    });

    //Display buttons and register events
    $(this.selector).hover(
    function () {
        $(this).append('<div id="previous-slider-' + i + '" class="previous-arrow arrow">Previous</div>');
        $(this).append('<div id="next-slider-' + i + '" class="next-arrow arrow">Next</div>');
        $('#next-slider-' + i).click(function () {
            _slider.next();
        });
        $('#previous-slider-' + i).click(function () {
            _slider.previous();
        });
    },
    function () {
        //Remove buttons and events
        $('.arrow').remove();
    });

    this.run();
}
slider.prototype.run = function () {
    this.next();
}
slider.prototype.next = function () {
    var _s = this;
    clearInterval(this.timer);
    _s.show(1);
    this.timer = setInterval(function () {
        _s.show(1);
    }, interval);
}
slider.prototype.previous = function () {
    var _s = this;
    clearInterval(this.timer);
    _s.show(-1);
    this.timer = setInterval(function () {
        _s.show(1);
    }, interval);
}
slider.prototype.show = function (shift) {
    var _s = this;
    _s.slide[_s.slide_active].fadeOut(300, function () {
        _s.slide_active = (_s.slide_active + shift < 0) ? _s.slide.length - 1 : (_s.slide_active + shift) % _s.slide.length;
        _s.slide[_s.slide_active].fadeIn(300);
    });
}

var slides = [];
var interval = 3000
$('.slider').each(function (i) {
    slides[i] = new slider($(this), interval, i);
}); 
```

# wordpress - 具有自定义帖子类型和子页面的永久链接

> ID：16064754
> 
> 赞同：0
> 
> 时间：2013-04-17T15:55:50.297
> 
> 标签：wordpress, custom-post-type, permalinks

我对 Wordpress 有疑问。我有一个名为“que-visitar”的自定义帖子类型，另一种名为“zonas”的自定义帖子类型，以及两个页面，称为“La casa”和“Que visitar”。还有一个叫做“文化”的页面，它是“阙访客”的孩子。如果我去[http://mypage.com/que-visitar/culture/](http://mypage.com/que-visitar/cultural/)，它必须向我展示“文化”页面。如果我去[http://mypage.com/zonas/](http://mypage.com/zonas/) {zone-1}/ 它必须向我展示 zone-1，这是在自定义帖子类型“zonas”中创建的帖子。

问题是，当我转到“zonas”网址时，它会显示错误（404），但如果我转到“文化”网址，效果很好。然后，我转到管理员，在永久链接选项中，我保存并且“zonas”网址有效，但“文化”无效。我输入了functions.php flush_rewrite_rules(false); 并且“文化”链接有效，但“zonas”无效。而且总是一样。

会出现什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:24:17.923

我修好了它。自定义帖子类型“que-visitar”的 slug 是“que-visitar”，而页面“Que visitar”的 slug 也是“que-visitar”。我更改了自定义帖子类型的 slug 并刷新，它可以工作。

# haskell - 某个类的数据成员

> ID：16064757
> 
> 赞同：2
> 
> 时间：2013-04-17T15:56:03.380
> 
> 标签：haskell, polymorphism

## 简化问题

给定

```
class Foo f where
    frobnicate :: f -> Float 
```

我怎么能允许任何`instance`人`Foo`进入

```
 data Bar = Bar { <here> } 
```

?

## 实际问题

给定

```
-- Typically lightweight geometric objects, e.g. spheres
class Shape s where
    intersect :: (RealFrac t, Floating t, Ord t, Shape s)
              => Ray t -> s t -> Maybe (DifferentialGeometry t) 
```

和

```
-- Primitives contain higher level informations, like material properties
class Primitive p where
    intersect :: (RealFrac t, Floating t, Ord t, Primitive p)
              => Ray t -> p t -> Maybe (Intersection t) 
```

`Primitive.intersect`注意和的签名的唯一区别`Shape.intersect`在于返回类型。

现在我想添加一个包装器，它基本上将任何`Shape`转换为`Primitive`​​ .

我认为它的工作原理大致是这样的：

```
data ShapeWrapperPrimitive t = ShapeWrapperPrimitive {
                                  shape :: (Shape s) => s t
                               } 
```

或者换句话说，我想添加一个任意`shape`成员，该成员属于`Shape`该类。

但是，这给了我`Illegal polymorphic or qualified type`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:15:30.610

我不确定您的简化问题是否真的是实际问题的简化。**简化问题**的答案是：

如果您对作为类实例的未知类型唯一能做的`Foo`就是将其转换为`Float`，那么您也可以存储`Float`.

所以你会使用

```
data Bar = Bar Float 
```

但是，如果我正确理解了您的**实际问题**，那么您想要包装一个作为 class 实例的类型`Shape`，从而将其转换为 class 的实例`Primitive`。为此，我会定义

```
newtype ShapeWrapperPrimitive s t = ShapeWrapperPrimitive (s t) 
```

然后说

```
instance Shape s => Primitive (ShapeWrapperPrimitive s) where
  intersect = ... -- fill in definition here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:30:05.843

这不是您提出的问题的答案，但它可能会有所帮助。如果您要创建一个同时包含`Shape`s 和`Primitive`s 的列表，那么您需要一个包装器类型，如 thoferon 所述。但如果你不是，那么也许你真的不需要包装器类型。

`Primitive.intersect`您说“请注意和签名的唯一区别`Shape.intersect`在于返回类型。” 您可以使用类型族来表示该关系，如下所示。这为您提供了一个名为`Thing`. 作为 的实例的每种类型的结果类型`intersect`可能不同`Thing`。

```
{-# LANGUAGE TypeFamilies, TypeSynonymInstances #-}

class Thing t where
  type Result t
  intersect :: Ray t -> s t -> Maybe (Result t)

-- Made-up type definitions just to get things to compile
data Shape s t = Shape s t
data Primitive p t = Primitive p t
type Ray t = (Double, t)
type DifferentialGeometry t = [t]
type Intersection t = [t]

-- Typically lightweight geometric objects, e.g. spheres
instance Thing (Shape s t) where
  type Result (Shape s t) = DifferentialGeometry t
  intersect a b = undefined

-- Primitives contain higher level informations, like material properties
instance Thing (Primitive p t) where
  type Result (Primitive p t) = Intersection t
  intersect a b = undefined 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T16:15:38.927

我可以看到解决此类问题的两种方法：

1) 使用语言扩展`ExistentialQuantification`。所以你可以写：

```
data Blah = forall a. Num a => Blah a 
```

2）将约束移至您的功能，例如

```
data Blah a = Blah a

f :: (Num a) => Blah a -> a
f = undefined 
```

或您的实例：

```
instance (Num a) => Foo (Blah a) where
  -- ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T19:44:01.477

[即使我接受了另一个答案，我也会将其发布给未来的访客。]

* * *

我的问题或多或少是一个错字。在某个时候，我有

```
23:  data ShapeWrapperPrimitive s t = ShapeWrapperPrimitive s t
24:  
25:  instance (Shape s) => Primitive (ShapeWrapperPrimitive s) where
26:     intersect _ _ = Nothing

--- >> line 25: Expecting one more argument to `s' 
```

这让我走上了迷茫和痛苦的道路。请注意它如何将我指向第 25 行。接受的答案揭示了我的错误：而不是

```
data ShapeWrapperPrimitive s t = ShapeWrapperPrimitive s t 
```

我需要

```
data ShapeWrapperPrimitive s t = ShapeWrapperPrimitive (s t) 
```

第一个会添加 an`s`和 a`t`作为成员，而我真的想要一个`s t`; 添加括号解决了我的问题。

# php - 正则表达式 - preg_match 拉丁和希腊字符

> ID：16064764
> 
> 赞同：3
> 
> 时间：2013-04-17T15:56:15.140
> 
> 标签：php, regex, preg-replace, preg-match

我正在尝试为任何给定的字符串创建一个正则表达式。

**目标**：删除所有不是“**拉丁**”或“**小写希腊**”或“**数字**”的字符。

到目前为止我所做的： `[^a-z0-9]`
这非常适合拉丁字符。

当我尝试这个时：`[^a-z0-9α-ω]`没有运气。有效，但省略了任何其他符号，如 !!#$%@%#$@,`

当涉及到正则表达式时，我的知识是有限的。任何帮助将非常感激！

**编辑：**
下面发布的是匹配指定字符并从中创建一个 slug 的函数，用破折号作为分隔字符：

```
 $q_separator = preg_quote('-');
        $trans = array(
            '&.+?;'                 => '',
            '[^a-z0-9 -]'           => '',
            '\s+'                   => $separator,
            '('.$q_separator.')+'   => $separator
        );

        $str = strip_tags($str);

        foreach ($trans as $key => $val){
            $str = preg_replace("#".$key."#i", $val, $str);
        }

        if ($lowercase === TRUE){
            $str = strtolower($str);
        }

        return trim($str, '-'); 
```

因此，如果字符串是：**OnCE on a tIME !#% @$$ in MEXico**
使用该函数，输出将是：**onCE on a tIME !#% @$$ in MEXico**

这工作正常，但我希望 preg_match 也排除**希腊**字符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T20:04:23.037

好的，这可以代替您的功能吗？

```
$subject = 'OnCEΨΩ é-+@àupon</span> aαθ tIME !#%@$ in MEXIco in the year 1874 <or 1875';

function format($str, $excludeRE = '/[^a-z0-9]+/u', $separator = '-') {
    $str = strip_tags($str);
    $str = strtolower($str);
    $str = preg_replace($excludeRE, $separator, $str);
    $str = trim($str, $separator);
    return $str;
}
echo format($subject); 
```

请注意，您将丢失 a 之后的所有字符`<`（由于 strip_tags），直到遇到`>`

* * *

// 当我认为你想保留希腊字符时的旧答案

可以构建一个字符范围，例如 α-ω 或任何您想要的奇怪字符！您的模式不起作用的原因是您没有通知正则表达式引擎您正在处理一个 unicode 字符串。为此，您必须`u`在模式的末尾添加修饰符。像那样：

```
/[^a-z0-9α-ω]+/u 
```

您也可以使用 chars 十六进制代码：

```
/[^a-z0-9\x{3B1}-\x{3C9}]+/u 
```

请注意，如果您确定没有或不想在字符串中保留大写希腊字符，则可以使用如下字符类`\p{Greek}`：

```
/[^a-z0-9\p{Greek}]+/u 
```

（它有点长但更明确）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:00:10.827

已经有一个关于此的已回答问题：

[删除非英文字符 PHP](https://stackoverflow.com/questions/3654879/remove-non-english-characters-php)

您不能指定范围，例如 α-ω，但您需要使用它们的代码，例如 \00-\255

# clojure - 将 clojure 持久向量转换为映射

> ID：16064777
> 
> 赞同：2
> 
> 时间：2013-04-17T15:56:52.407
> 
> 标签：clojure

我正在尝试学习clojure。

我正在调用一个函数，该函数返回给我一个字符串数组..

如果我做：

```
(let [items (get-all-items)]
    (println (type items))
    (items)) 
```

`type`of`items`显示为值如下`class clojure.lang.PersistentVector`所示：`items`

```
[["Dogs"] ["Cats"] ["Capybaras"] ["Pygmy Hedgehogs"]] 
```

我想将其转换为如下格式的地图：

```
{ "Dogs" "Cats" "Capybaras" "Pygmy Hedgehogs" } 
```

那有意义吗？Clojure 映射可以包含字符串列表，对吗？

我这样做只是因为如果我将它作为地图，我可以检查列表中是否有宠物，如下所示：

```
(contains? pets "Dogs")
; assuming the map is stored in pets variable 
```

如果`pets`是向量，则失败。

那么，如果我可以将其转换为地图，我该如何转换呢？如果没有，我如何在向量中搜索东西？

（我喜欢使用地图，所以我宁愿拥有地图 - 除非有充分的理由不这样做）

[ps：我试过用[into](http://clojuredocs.org/clojure_core/clojure.core/into)转换， 但这也不起作用。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:17:22.047

我怀疑你真正想要的是*一套*，而不是一张*地图*。映射存储与特定键关联的值。集合存储一个唯一的值列表。

如果您唯一的用例是测试成员资格，那么您肯定需要一个*set*。如果您还将某些数据与该键相关联，则需要地图。

从任何序列生成一个集合非常容易。在你的情况下：

```
(set (flatten items))
;;=> #{"Pygmy Hedgehogs" "Dogs" "Cats" "Capybaras"} 
```

[`flatten`](http://clojuredocs.org/clojure_core/clojure.core/flatten)删除列表中的嵌套，为您提供一系列字符串。[`set`](http://clojuredocs.org/clojure_core/clojure.core/set)使用该序列并返回该序列中的一组唯一值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:10:35.927

```
(apply assoc {} (flatten [["Dogs"] ["Cats"] ["Capybaras"] ["Pygmy Hedgehogs"]]))
;;=> {"Capybaras" "Pygmy Hedgehogs", "Dogs" "Cats"} 
```

# java - Adapter.getItem(position) 使应用程序崩溃

> ID：16064778
> 
> 赞同：0
> 
> 时间：2013-04-17T15:56:58.493
> 
> 标签：java, android, crash, android-adapter

我正在为列表视图编写一个带有自定义适配器的 Android 应用程序。

适配器是 mainActivity 类中的一个变量，包含自定义类的列表。我需要从其他活动访问此列表中的一个类，但是当应用程序到达适配器中的 getItem(position) 时，它似乎崩溃了。

基本上这就是应用程序的样子：

在 MainActivity 类中有一个基本的自定义适配器：

```
public class MainActivity extends Activity {
    public static MyAdapter myAdapter;
    ...
} 
```

适配器仅具有 getItem 等基本功能，并具有自定义（基本）类的列表

```
public class MyAdapter extends BaseAdapter {
    private ArrayList<MyClass> tours = new ArrayList<MyClass>();

    @Override
    public Object getItem(int arg0) {
        return getItem(arg0);
    }
    ...
} 
```

当另一个活动被打开时，一个索引被传递给它以访问列表中的某个对象。

唯一的问题是，当我尝试从此列表中访问一个类时，应用程序崩溃了……我使用以下代码从适配器中的列表中访问该类：

```
MyClass myClass = (MyClass)MainActivity.myAdapter.getItem(index); 
```

有人可以告诉我我做错了什么或为什么应用程序崩溃了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T15:58:09.553

这是递归逻辑：

```
@Override
public Object getItem(int arg0) {
    return getItem(arg0);
} 
```

此方法无法完成，它只是一次又一次地调用自身，直到应用程序抛出某种类型的溢出异常。它应该是：

```
@Override
public MyClass getItem(int arg0) {
    return tours.get(arg0);
} 
```

请注意此方法如何从您的列表中返回数据。

# asp.net-mvc - 在 ASP.NET MVC 4 中使用 OAuthWebSecurity 时获取 Google 用户名？

> ID：16064784
> 
> 赞同：3
> 
> 时间：2013-04-17T15:57:16.923
> 
> 标签：asp.net-mvc, asp.net-mvc-4, oauth, dotnetopenauth, google-oauth

我创建了一个标准样板 ASP.NET MVC 4 Internet 项目。当使用 OAuthWebSecurity 使我的网站能够使用 Facebook 进行社交登录时，我看到了如何通过访问 AuthenticationResult 的 ExtraData 在 AccountController 的 ExternalLoginCallback() 操作中访问 Facebook 用户名：

```
 AuthenticationResult result = OAuthWebSecurity.VerifyAuthentication( Url.Action( "ExternalLoginCallback", new { ReturnUrl = returnUrl } ) );

    var facebookName = result.ExtraData["name"]; 
```

但是，当使用 Google 登录时，ExtraData 仅包含“电子邮件”。是否可以获取 Google 用户名？我在某处错过了配置调整吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:48:40.183

在这里找到我的答案：[插入自定义 OAuth/OpenID 提供程序](http://blogs.msdn.com/b/pranav_rastogi/archive/2012/08/23/plugging-custom-oauth-openid-providers.aspx)。自 2012 年 8 月以来，这一直是一个已知问题，至今（DotNetOpenAuth.AspNet 4.2.2.13055，2013 年 4 月）尚未修复。

解决方法是编写自己的 Google 提供程序，上面的博客文章包含一个完整的工作示例。那么获取谷歌用户名就很简单了：

```
var googleName = result.ExtraData["firstName"] + " " + result.ExtraData["lastName"]; 
```

# c++ - std::thread::id 默认构造函数不应该创建一个“NULL”id吗？

> ID：16064785
> 
> 赞同：7
> 
> 时间：2013-04-17T15:57:17.650
> 
> 标签：c++, linux, gcc, c++11

以下代码在我的 gcc 版本 4.8.0 中失败：

```
#include <thread>
#include <cassert>

int main() {
    std::thread::id nobody;

    assert( nobody != std::this_thread::get_id() );
}; 
```

这种行为正确吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T16:25:22.353

**更新：**乔纳森·韦克利 (Jonathan Wakely) 好心地查看了[他所说的问题（在评论下方）](https://stackoverflow.com/questions/16064785/should-not-stdthreadid-default-constructor-create-a-null-id/16065305#comment23167697_16065305)，该`-pthread`问题必须传递给编译器和链接器。如果我这样做，代码也不会因 gcc 4.7.2 而失败。所以答案显然与引用的电子邮件无关。谢谢乔纳森！

* * *

~~[以下是 gcc 开发人员Jonathan Wakely](http://gcc.gnu.org/ml/libstdc++/2011-03/msg00068.html)在 2011 年写 的邮件中的一些引述：~~

> 我们的 std::thread::id 上的所有比较运算符都依赖于未定义的行为，因为我们的 thread::id 只是一个 pthread_t。
> 
> [...]
> 
> 2) operator== 使用 pthread_equal，对于无效的线程 ID，这是未定义的，POSIX 说：
> 
> ```
>  If either t1 or t2 are not valid thread IDs, the behavior is undefined. 
> ```

~~虽然它是两年前写的，但它可能仍然适用。目前我无法检查 gcc 代码库以说明更多信息。~~

* * *

**诡异的。**以下代码：

```
#include <iostream>
#include <thread>

int main() {

    std::cout << "Started" << std::endl;

    std::thread::id nobody;

    if ( nobody != std::this_thread::get_id() )  {

      std::cout << "OK" << std::endl;
    }

    std::cout << "Finished" << std::endl;
} 
```

产生：

```
Started 
OK 
Finished 
```

[在这里](http://coliru.stacked-crooked.com/view?id=8c7d29212213300d87e7326c3f8a4769-50d9cfc8a1d350e7409e81e87c2653ba)检查。但是，您的代码在 4.7.2 中确实失败了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T16:15:32.327

我无权访问 C++11 标准，但来自最新的标准草案[n3485](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3485.pdf) [thread.thread.id]

> thread::id 类型的对象为每个执行线程提供唯一标识符，并为不代表执行线程的所有线程对象提供单个不同值 (30.3.1)

其次是

> id() 没有例外；效果：构造一个 id 类型的对象。后置条件：构造的对象不代表执行线程。

这似乎暗示您所观察到的是 gcc 中的一个错误

# java - 我将如何在 java 中循环这个 Scanner？

> ID：16064786
> 
> 赞同：-4
> 
> 时间：2013-04-17T15:57:17.550
> 
> 标签：java, loops, while-loop

```
package javaapplication97;

import java.util.Scanner;    

public class JavaApplication97 {    

    public static void main(String[] args) {

        System.out.println("Enter a number: ");
        Scanner s1 = new Scanner(System.in);    

        if (s1.hasNextInt())
           System.out.println("This is an int");    

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:10:15.297

我想你的意思是这个

```
import java.util.*;

public class test{

    public static void main(String[] args) {

        while(true){
            System.out.println("Enter a number: ");
            Scanner s1 = new Scanner(System.in);    

            if (s1.hasNextInt()){
                System.out.println("This is an int");
            }
            else if(s1.nextLine().compareTo("stop")==0){
                break;
            }
            else{
                System.err.println("this is not an int");
            }
            System.out.println("---------");
    }
} 
```

# java - 如何销毁活动

> ID：16064790
> 
> 赞同：-2
> 
> 时间：2013-04-17T15:57:27.063
> 
> 标签：java, android, android-activity, destroy

事实上，我是 Android 应用程序开发的新手。在我的应用程序中，我有几个活动，并且我为我的用户提供了一个退出选项菜单，以便能够离开应用程序。但有一个问题。当他们点击退出按钮时，他们可以离开应用程序，但当他们第二次进入应用程序时，他们上次离开的页面将被启动。这是我的代码：

```
@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
    switch (item.getItemId()) {
        case 0 :
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
            finish();
            Toast.makeText(this, "Goodbye Dear", Toast.LENGTH_LONG).show();
            break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:01:08.410

Android Activity 有两种方法`onPause`，`onDestroy`您可以在其中进行必要的清理。

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T15:33:30.717

而不是使用`finish()`，使用`System.exit(0);`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:25:13.630

您必须在活动中覆盖 onPause 和/或 onDestroy 方法，并在这些方法中删除您的视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-03T20:28:50.793

您的代码中的问题是`Intent.FLAG_ACTIVITY_NEW_TASK`不会删除您当前的任务。在此处阅读有关它的更多信息：[任务和返回堆栈 | 安卓开发者](http://developer.android.com/guide/components/tasks-and-back-stack.html)。

尝试使用`Intent.FLAG_ACTIVITY_CLEAR_TOP`. 从文档中我们可以看到，这给出了所需的行为。

> 如果设置，并且正在启动的活动已经在当前任务中运行，那么不会启动该活动的新实例，而是关闭它上面的所有其他活动，并且此 Intent 将被传递到（现在顶部）作为新意图的旧活动。

# usb - 数百次成功尝试后，usbManager openDevice 调用失败

> ID：16064798
> 
> 赞同：3
> 
> 时间：2013-04-17T15:58:04.880
> 
> 标签：usb, hid

我正在使用 usbmanager 类来管理我的 android 4.1.1 机器上的 USB 主机。对于数百个事务，一切似乎都运行良好，直到（大约 900 个事务之后）打开设备失败，无一例外地返回 null。使用分析器似乎不是内存泄漏的问题。

这就是我从我的主要活动初始化通信的方式（这样做一次）：

```
public class MainTestActivity extends Activity {

private BroadcastReceiver m_UsbReceiver = null;
private PendingIntent mPermissionIntent = null;
UsbManager m_manager=null;
DeviceFactory m_factory = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mPermissionIntent = PendingIntent.getBroadcast(this, 0, new Intent(ACTION_USB_PERMISSION), 0);
    IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);

    filter.addAction(UsbManager.ACTION_USB_DEVICE_DETACHED);
    m_UsbReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction(); 

          if (UsbManager.ACTION_USB_DEVICE_DETACHED.equals(action)) {
                UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
                if (device != null) {
                    // call your method that cleans up and closes communication with the device
                    Log.v("BroadcastReceiver", "Device Detached");
                }
            }

        }
    };
    registerReceiver(m_UsbReceiver, filter);

   m_manager = (UsbManager) getSystemService(Context.USB_SERVICE);

   m_factory = new DeviceFactory(this,mPermissionIntent);

} 
```

这是我的测试代码：

```
ArrayList<DeviceInterface> devList = m_factory.getDevicesList();
if ( devList.size() > 0){
      DeviceInterface devIf = devList.get(0);
      UsbDeviceConnection connection; 
          try 
    {
        connection = m_manager.openDevice(m_device);
    }
    catch (Exception e)
    {
        return null;
    } 
```

对于 900 到 1000 次调用，该测试将正常工作，之后以下调用将返回 null（无异常）：

```
UsbDeviceConnection connection; 
try 
{
  connection = m_manager.openDevice(m_device);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T17:45:46.920

您可能只是用完了文件句柄，典型的限制是每个进程打开 1024 个文件。尝试调用`close()`，`UsbDeviceConnection`请[参阅 doc](http://developer.android.com/reference/android/hardware/usb/UsbDeviceConnection.html#close%28%29)。

该`UsbDeviceConnection`对象已分配系统资源 - 例如文件描述符 - 将仅在代码中的垃圾收集时释放。但是在这种情况下，您会在内存不足之前耗尽资源 - 这意味着尚未调用垃圾收集器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T07:37:32.483

尽管我在代码中只打开一次，但我在 android 4.0 上重复运行时 opendevice 失败。我有一些退出路径没有关闭资源，我假设操作系统会在进程终止时释放它。

但是，在进程终止时释放资源似乎存在一些问题-即使我终止并启动了新进程，我也曾经遇到过问题。
我终于确保在退出时释放资源并使问题消失。

# javascript - three.js 将纹理应用于 stl 网格

> ID：16064802
> 
> 赞同：2
> 
> 时间：2013-04-17T15:58:11.007
> 
> 标签：javascript, three.js

我正在加载从 Rhino 导出的 STL。一切正常，但是，当我尝试将简单的纹理应用到网格时，根本不会渲染 STL 对象。

我错过了什么

代码如下：

```
var diamondTexture = THREE.ImageUtils.loadTexture('images/diamond.jpg');
...
var loader = new THREE.STLLoader();
loader.addEventListener( 'load', function ( event ) {

    var geometry = event.content;
    stones = new THREE.Mesh( geometry, new THREE.MeshPhongMaterial({color:0x99CC3B, ambient:0x99CC3B, map:diamondTexture}) );

    scene.add( stones );

} );
loader.load( 'models/jwl0020-stones.stl' ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:40:17.213

你可以试试geometry.computeTangents()。一旦我添加了我的 stl 文件能够具有纹理...由于没有 UV，纹理不能正确“适合”模型。

# android - Pagoda Box 网站在 Android Galaxy S3 浏览器上显示白屏

> ID：16064803
> 
> 赞同：0
> 
> 时间：2013-04-17T15:58:12.863
> 
> 标签：android, cakephp

今天发生了重大的头部抓挠。我开发了一个 Cake 应用程序，托管在 Pagoda Box 上，它可以在 Galaxy S3 上的 Android 原生浏览器之外的所有浏览器上正常运行。它显示一个白屏： [http ://broomage.pagodabox.com/sweepstakes/MetsMoments2013](http://broomage.pagodabox.com/sweepstakes/MetsMoments2013)

但是，我将这个应用程序上传到了标准的 LAMP 服务器，这样我就可以更快地调试它，而且它显示得很好！见这里： [http ://epi.qa/broomage/sweepstakes/MetsMoments2013](http://epi.qa/broomage/sweepstakes/MetsMoments2013)

在这一点上我真的很困惑，因为它现在似乎特定于 Pagoda Box。我检查了 apache/php/cake 日志，没有出现任何奇怪的现象。我还可以“查看源代码”并看到一切似乎都在正确加载——只有浏览器只显示一个白屏。在某些使用 Bootstrap 库的站点上也会出现此问题，但有时会在您转到另一个 URL 然后单击返回按钮时出现。但是无论我做什么，这个特定的站点都只会在 S3 上显示白屏。有任何想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:02:01.450

Grrr，我想我把它缩小到一个 gzip 问题：如果您通过 php 脚本提供某些资产，则大小可能会报告为与压缩大小不匹配，这会破坏像 android 这样的乏味浏览器上的渲染。

# sorting - vaadin 表必须按时间顺序对条目进行降序排序，即最晚在顶部，然后向下到最早的音符

> ID：16064806
> 
> 赞同：0
> 
> 时间：2013-04-17T15:58:25.770
> 
> 标签：sorting, jakarta-ee, vaadin

我有一个显示 Notes 的 vaadin 表，其中包含创建的日期时间。默认情况下，我想按时间顺序降序（即最晚在顶部，然后到最早的音符）对条目进行排序。当我添加一个新值时，它应该在顶部。这是一个使用 Vaadin 的 Java EE Web 应用程序。

我试过了 ...

```
setSortContainerPropertyId(NoteContainer.DATE_CREATED);
setSortAscending(false);
sort(); 
```

在我的 NoteTable 构造函数中。但它只将排序功能添加到 DATE_CREATED 列。当我单击该列标题时，它才开始排序。请给我一个适当的解决方案...？

注意表类构造函数..

```
public NoteTable()
{
    dataSource = new NoteContainer();
    setContainerDataSource(dataSource);

    NoteTableColumnGenerator columnGenerator = new NoteTableColumnGenerator();
    addGeneratedColumn(ACTION, columnGenerator);
    addGeneratedColumn(CREATED_BY, columnGenerator);
    addGeneratedColumn(TEXT, columnGenerator);

    setVisibleColumns(NoteContainer.NATURAL_COL_ORDER);
    setSizeFull();

    Object[] columns = getVisibleColumns();
    for (int i = 0; i < columns.length; i++)
    {
        if (((String) columns[i]).equals(NoteContainer.DATE_CREATED))
            setColumnWidth(columns[i], 150);
        else if (((String) columns[i]).equals(NoteContainer.CREATED_BY))
            setColumnWidth(columns[i], 150);
        else if (((String) columns[i]).equals(NoteContainer.ACTION))
            setColumnWidth(columns[i], 150);
        else
            setColumnWidth(columns[i], 550);
    }
    setColumnHeaders(NoteContainer.COL_HEADERS_ENGLISH);

    setSelectable(true);
    setImmediate(true);
    setSortContainerPropertyId(NoteContainer.DATE_CREATED);
    setSortAscending(false);
    sort();
} 
```

说明 容器类

```
public class NoteContainer extends BeanItemContainer<CaseNote> implements Serializable
{
    private static final long serialVersionUID = -5926608449530066014L;

    public static final String DATE_CREATED = "dateCreated";
    public static final String CREATED_BY = "createdBy";
    public static final String TEXT = "text";
    public static final String ACTION = "Action";

    public static final Object[] NATURAL_COL_ORDER = new Object[] {
        ACTION, DATE_CREATED, CREATED_BY, TEXT

    };

    public static final String[] COL_HEADERS_ENGLISH = new String[] {
        "ACTION", "Date Created/Updated", "Created/Updated By", "Note"
    };

    /**
     * Default Constructor.
     * 
     */
    public NoteContainer()
    {
        super(CaseNote.class);
    }
 } 
```

注意：CaseNote 是一个实体类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:42:19.063

我自己解决了它。我`sort();`在 table`refresh()`方法中添加了而不是 NoteTable 构造函数。

现在它工作正常。谢谢大家，谁试图帮助我.. :)

# build - 为要使用的任何构建分配全局变量/参数

> ID：16064807
> 
> 赞同：6
> 
> 时间：2013-04-17T15:58:27.103
> 
> 标签：build, tfs, build-process, tfsbuild

我有几个（15 个左右）构建，它们都在各自的构建过程模板中引用相同的文本字符串。该文本每 90 天过期一次，需要在每个模板中进行更新。有没有办法创建一个中心变量或参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:45:53.880

一种解决方案是在您的构建机器上创建一个环境变量。然后在所有构建中引用该变量。当您需要更新值时，您只需将其设置在一个地方。

[如何：在构建中使用环境变量](http://msdn.microsoft.com/en-US/library/ms171459%28v=vs.110%29.aspx)

如果您有不止一台构建机器，那么它可能会成为一个过多的维护问题。

另一种解决方案将涉及使用[MSBuild 响应文件](http://msdn.microsoft.com/en-us/library/tfs/ms404301.aspx)。您创建一个包含属性值的 .rsp 文件，该值将通过命令行从 MSBuild 中获取和设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:12:22.327

您需要将它放在所有构建都可以访问它的地方，然后自定义构建过程模板以从那里读取（构建定义 - 如您所知 - 没有在定义之间共享数据的机制）。

一些示例是签入 TFS 的文件、已知位置（文件共享）中的文件、网页、Web 服务等。

您甚至可以创建一个知道如何读取它的自定义活动并将结果作为 OutArgument 输出（例如，从硬编码 URL 读取字符串的自定义活动）。

# jquery - Twitter Bootstrap 手风琴全高窗格

> ID：16064809
> 
> 赞同：13
> 
> 时间：2013-04-17T15:58:35.600
> 
> 标签：jquery, html, css, twitter-bootstrap

我一直在努力用[twitter bootstrap 手风琴](http://twitter.github.io/bootstrap/javascript.html#collapse)实现这一目标： ![期望的行为](https://i.stack.imgur.com/M7kqn.png)

一般来说，使用手风琴（引导折叠插件）不是必须的。

**我想要实现**的是：

*   使用引导程序作为基础框架，
*   有固定顶部的导航栏，
*   没有滚动条的全宽/高内容，
*   有 3 个独立的、可折叠的*内容窗格*（始终只有一个被展开），
*   单击标题部分展开*内容窗格*（并折叠先前展开的窗格），
*   *仅在一个展开的内容窗格*中发生滚动（图片中的 DIV 1|2|3），
*   当*内容窗格*折叠时，隐藏它们的溢出，
*   让每个*内容窗格*都有其可配置的最小高度（对于它的“标题”），
*   让它在响应式布局中正常工作。

真的很想在这方面得到一些帮助，因为我想我正在失去理智:(

“允许”使用额外的 jQuery 插件（如 jQuery UI）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T13:58:32.593

我能够用一些 JS 来实现这一点：

```
var tabsHeight = $('.accordion-heading').outerHeight() * $('.accordion-heading').length;
var height = $('#your_accordion_container').innerHeight() - tabsHeight;

$('.accordion-inner').height(height - 1); 
```

我还没弄清楚为什么我需要这样做`- 1`，但没有它就`.accordion-inner`太大了。

确保将其包装在一个函数中，并在每次调整浏览器窗口大小时调用它。还要确保您`.accordion-inner`没有任何垂直填充或从设置的高度中删除该填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T13:50:08.493

HTML：

```
 <div class="ui-accordion" id="accordion">        
    <h4 class="ui-accordion-header">DIV1</h4>
    <div class="ui-accordion-content" id="accordion-div1"></div>
    <h4 class="ui-accordion-header">DIV2</h4>
    <div class="ui-accordion-content" id="accordion-div2"></div>
    <h4 class="ui-accordion-header">DIV3</h4>
    <div class="ui-accordion-content" id="accordion-div3"></div>
 </div> 
```

CSS：（没什么特别的）

JS：

```
$("#accordion").accordion( {
  heightStyle : "fill"
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T11:37:42.737

有人对此有 Bootstrap 3 解决方案吗？

编辑（这似乎工作）：[https ://github.com/twbs/bootstrap/issues/2462](https://github.com/twbs/bootstrap/issues/2462)

```
$('#accordion').collapse().height('auto'); 
```

# android - 使用 android 时 RSMB MQTT 代理上客户端标识符的套接字错误

> ID：16064811
> 
> 赞同：6
> 
> 时间：2013-04-17T15:58:43.793
> 
> 标签：android, mqtt

我正在为 android 构建一个简单的 MQTT 客户端，并且在 RMBS 控制台上出现“客户端标识符的套接字错误”错误。这只发生在客户端的 android 实现中（我还创建了一个 Java 桌面客户端并且运行没有问题）。对于 Android 客户端，我正在起诉 Paho Java 客户端库。这是我的代码：

这是安卓客户端：

```
package com.example.mqttdroid;

import org.eclipse.paho.client.mqttv3.MqttCallback;
import org.eclipse.paho.client.mqttv3.MqttClient;
import org.eclipse.paho.client.mqttv3.MqttDeliveryToken;
import org.eclipse.paho.client.mqttv3.MqttException;
import org.eclipse.paho.client.mqttv3.MqttMessage;
import org.eclipse.paho.client.mqttv3.MqttTopic;
import org.eclipse.paho.client.mqttv3.internal.MemoryPersistence;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.Toast;

public class MQTTClient extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_mqttclient);
//  new BackTask().execute(); not used because (seems to be the problem)
  MqttConnectOptions conOpts = new MqttConnectOptions();
            conOpts.setKeepAliveInterval(30);
            conOpts.setWill(client.getTopic("Error"), "something bad happened".getBytes(), 1, true);
            client.connect(conOpts);

            client.subscribe("/House/Kitchen/Bulb");
            client.setCallback( new MqttCallback() {

                @Override
                public void connectionLost(Throwable arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void deliveryComplete(IMqttDeliveryToken arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void messageArrived(String arg0, MqttMessage arg1)
                        throws Exception {
                    // TODO Auto-generated method stub
                    Toast.makeText(Main.this, arg0.toString(), Toast.LENGTH_SHORT).show();
                }
            });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.mqttclient, menu);
    return true;
}

/*public class BackTask extends AsyncTask<Void, Void, Void>{

    private MqttClient client;
    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        try {

            client = new MqttClient("tcp://"Ip of machine running RSMB":1883", "ANDROID1", new MemoryPersistence());

            client.connect();
            client.subscribe("House/Kitchen/Bulb");

        } catch (MqttException e) {
            // TODO Auto-generated catch block
            Log.e("ERROR", "NOT CONNECTED");
            e.printStackTrace();
        }
        return null;
    }
    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        try {
            client.setCallback( new MqttCallback() {

                @Override
                public void messageArrived(MqttTopic arg0, MqttMessage arg1)
                        throws Exception {
                    // TODO Auto-generated method stub
                    Toast.makeText(MQTTClient.this, arg0.toString(), Toast.LENGTH_SHORT).show();
                }

                @Override
                public void deliveryComplete(MqttDeliveryToken arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void connectionLost(Throwable arg0) {
                    // TODO Auto-generated method stub

                }
            });
        } catch (MqttException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

 }*/ 
```

这是桌面 Java 客户端：

```
 import org.eclipse.paho.client.mqttv3.MqttCallback;
 import org.eclipse.paho.client.mqttv3.MqttClient;
 import org.eclipse.paho.client.mqttv3.MqttClientPersistence;
 import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
 import org.eclipse.paho.client.mqttv3.MqttDeliveryToken;
 import org.eclipse.paho.client.mqttv3.MqttException;
 import org.eclipse.paho.client.mqttv3.MqttMessage;
 import org.eclipse.paho.client.mqttv3.MqttPersistenceException;
 import org.eclipse.paho.client.mqttv3.MqttTopic;
 import org.eclipse.paho.client.mqttv3.internal.MemoryPersistence;

 public class MQTTBaseClass {

/**
 * @param args
 */

public static void main(String[] args) {
    // TODO Auto-generated method stub
    MqttClientPersistence persistence;
    try {

        MqttClient client = new MqttClient("tcp://localhost:1883", "PC",new      MemoryPersistence());
        MqttConnectOptions conOpts = new MqttConnectOptions();
        conOpts.setKeepAliveInterval(30);
        conOpts.setWill(client.getTopic("Error"), "something bad happened".getBytes(), 1, true);
        client.connect(conOpts);
        MqttMessage msg = new MqttMessage("hello".getBytes());
        msg.setQos(0);
        msg.setRetained(true);
        MqttTopic topic = client.getTopic("House/Kitchen/Bulb");
        client.subscribe("House/Kitchen/Bulb");

        try {
            client.setCallback( new MqttCallback() {

                @Override
                public void messageArrived(MqttTopic arg0, MqttMessage arg1)
                        throws Exception {
                    // TODO Auto-generated method stub
                    System.out.println(arg1.toString());
                }

                @Override
                public void deliveryComplete(MqttDeliveryToken arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void connectionLost(Throwable arg0) {
                    // TODO Auto-generated method stub

                }
            });
        } catch (MqttException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        topic.publish(msg);

    } catch (MqttPersistenceException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MqttException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

 } 
```

只是一些注意事项：

我通过 WiFi 连接到我的 android 设备，当我运行 Java Dekstop 客户端时，我的桌面也是如此。

Java Destop 客户端与 RSMB 在同一台机器上运行

Java 桌面客户端创建并订阅主题“House/Kitchen/Bulb”并发送带有字符串“Hello”的消息

Android 客户端还订阅“House/Kitchen/Bulb”并尝试显示带有接收到的消息的 Toast。

我在 android manifest 上添加了 Internet 权限

android 设备似乎可以很好地连接到代理，但是一旦我初始化 Java 桌面服务客户端（或 Eclipse 中的 Paho 客户端插件并发布消息），我就会收到提到的错误。

我在 RSMB 运行的同一台机器上使用模拟器运行了应用程序，我得到了同样的错误。

可能是什么问题？

更新：

最初，我遇到了“主线程上的网络”异常，因此我将连接操作移至 AsyncTask。现在，当我使用 Java 客户端发布消息时，Android 客户端似乎仍处于连接状态（Asynctask 可能一直在创建问题），但似乎没有调用 MqttCallback() 的 messageArrived()。

更新 2：

我设法使它工作。这是我现在使用的代码：

```
package com.example.mqttphone;

*import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
import org.eclipse.paho.client.mqttv3.MqttCallback;
import org.eclipse.paho.client.mqttv3.MqttClient;
import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
import org.eclipse.paho.client.mqttv3.MqttException;
import org.eclipse.paho.client.mqttv3.MqttMessage;
import org.eclipse.paho.client.mqttv3.persist.MemoryPersistence;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.Toast;*

public class Main extends Activity {
protected static String msg;
public MqttClient client;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    try {

        client = new MqttClient("tcp://10.1.201.27:1883", "ANDROID1", new MemoryPersistence());

        MqttConnectOptions conOpts = new MqttConnectOptions();
        conOpts.setKeepAliveInterval(30);
        conOpts.setWill(client.getTopic("Error"), "something bad happened".getBytes(), 1, true);
        client.setCallback( new MqttCallback() {

            @Override
            public void connectionLost(Throwable arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void deliveryComplete(IMqttDeliveryToken arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void messageArrived(String arg0, MqttMessage arg1)
                    throws Exception {
                // TODO Auto-generated method stub
            Main.msg = arg1.toString();
            Main.this.runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    Toast.makeText(Main.this, msg, Toast.LENGTH_LONG).show();
                }
            });
                Log.e("MESSAGE RECEIVED", arg1.toString());

            }
        });
        client.connect(conOpts);
        //MqttMessage msg = new MqttMessage("ANDROID MESSAGE".getBytes());
        //client.getTopic("world").publish(msg);

        if(client.isConnected()){

        client.subscribe("/House/Kitchen/Bulb");

            Toast.makeText(this, "CONNECTED", Toast.LENGTH_SHORT).show();

        }

    } catch (MqttException e) {
        // TODO Auto-generated catch block
        Log.e("ERROR", "NOT CONNECTED");
        e.printStackTrace();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T17:23:54.337

您好
，我已经使用了您的代码，但我无法将我的 paho 客户端连接到我的阿波罗服务器，我遇到了以下错误。

```
 I/global(677): Default buffer size used in BufferedOutputStream constructor. It would be better to be explicit if an 8k buffer is required.
 E/ERROR(677): NOT CONNECTED
 W/System.err(677):  (32109) - java.io.EOFException
 W/System.err(677):     at org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run(CommsReceiver.java:127)
 W/System.err(677):     at java.lang.Thread.run(Thread.java:1096)
 W/System.err(677): Caused by: java.io.EOFException
 W/System.err(677):     at java.io.DataInputStream.readFully(DataInputStream.java:266)
 W/System.err(677):     at org.eclipse.paho.client.mqttv3.internal.wire.MqttInputStream.readMqttWireMessage(MqttInputStream.java:63)
 W/System.err(677):     at org.eclipse.paho.client.mqttv3.internal.CommsReceiver.run(CommsReceiver.java:94)
 W/System.err(677):     ... 1 more 
```

谢谢吉里什
_

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T15:00:56.407

我让它工作了。这是 github 存储库的[链接](https://github.com/emmano/voicerecog4pi)，每个人都可以在其中找到实现此代码的项目。它允许用户通过语音识别使用他们的 Android 设备远程打开 LED 灯。

# c# - OnPropertyChanged 事件处理程序

> ID：16064814
> 
> 赞同：0
> 
> 时间：2013-04-17T15:58:48.527
> 
> 标签：c#, events, httpwebrequest, httpwebresponse

我正在为 Windows Phone 编写应用程序。我有一个变量结果，它存储服务器在 Windows Phone 应用程序发出请求后发送的响应。

我有一个名为**request**的类，它生成请求并接收响应。我想检查**结果**变量何时更改为我可以对我的应用程序进行进一步处理。

这是请求类：

```
namespace PhoneApp1
{
    public class Request: INotifyPropertyChanged
    {
        public string data;
        public string result = "test";

        public Request()
        {

        }

        public string Result
        {
            get
            {
                return result;
            }
            set
            {
                if (this.result == value)
                {
                    return;
                }
                this.result = value;
                OnPropertyChanged("Result");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        public void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;

            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        public void doRequest(string parameters, string URL)
        {
            data = parameters;

            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(URL);
            request.Method = "POST";
            request.ContentType = "application/x-www-form-urlencoded";
            request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);
        }

        public void GetRequestStreamCallback(IAsyncResult callbackResult)
        {
            HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
            Stream postStream = myRequest.EndGetRequestStream(callbackResult);
            byte[] byteArray = Encoding.UTF8.GetBytes(data);

            postStream.Write(byteArray, 0, byteArray.Length);
            postStream.Close();

            myRequest.BeginGetResponse(new AsyncCallback(GetResponsetStreamCallback), myRequest);
        }

        public void GetResponsetStreamCallback(IAsyncResult callbackResult)
        {
            HttpWebRequest request = (HttpWebRequest)callbackResult.AsyncState;
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(callbackResult);

            StreamReader httpWebStreamReader = new StreamReader(response.GetResponseStream());
            result = httpWebStreamReader.ReadToEnd();
        }
    }
} 
```

如您所见，我在**结果变量**上实现了 OnPropertyChanged 事件处理程序。

这是我创建类实例以执行请求的代码：

```
 **//Log-in Button Event Handler**
                    Request req = new Request();
                    req.PropertyChanged += new PropertyChangedEventHandler(req_PropertyChanged);
                    req.doRequest("function=LogIn&username=" + username + "&password=" + password, "http://localhost:4000/Handler.ashx");
                }
            }
        }**//End of Log-in Button Event Handler**

        public void req_PropertyChanged(object sender, PropertyChangedEventArgs e)
        {
            string result = ((Request)sender).Result;

            if (result.Equals("True") || result.Equals("true"))
            {
                PhoneApplicationService.Current.State["Username"] = username;
                NavigationService.Navigate(new Uri("/Authenticated.xaml", UriKind.Relative));
            }

            else
            {
                MessageBox.Show("The log-in details are invalid!");
            }
        } 
```

出于某种原因，当我单击登录按钮时没有任何反应。没有消息框，没有重定向，甚至没有异常。我无法弄清楚我做错了什么。请帮我。我浪费了过去两个小时试图解决这个问题。

为什么 req_PropertyChanged 代码没有执行，即使我知道**结果**变量正在改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:00:30.930

`PropertyChanged`不是魔法。
它只会在您明确引发事件时触发。

你确实在你的`Result`setter 中引发了事件，但你没有调用它。
编写`result = httpWebStreamReader.ReadToEnd();`时，直接设置字段，无需运行属性设置器。
因此，该事件永远不会触发。

# ibm-midrange - 如何以编程方式确定 IFS 中文件的 CCSID？

> ID：16064817
> 
> 赞同：2
> 
> 时间：2013-04-17T15:58:56.853
> 
> 标签：ibm-midrange, rpgle, ibm-ifs

我在 IFS 中有许多具有多种 CCSID（0、37、819、1200、1252 等）的文件，我的任务是编写一个简单的 RPGLE [1] 程序，该程序将允许用户查看任何这些文件的内容。

我们的系统 (V6R1) CCSID (DSPSYSVAL QCCSID) 是 65535 [2]，我们的作业的默认 CCSID 是 37，这意味着当我尝试显示 CCSID 819 (ASCII) 时，我看到了垃圾——符号、随机颜色等。

我熟悉通过[QtqIconvOpen](http://pic.dhe.ibm.com/infocenter/iseries/v6r1m0/index.jsp?topic=/apis/QTQICONV.htm) API 将数据从一个 CCSID 转换为另一个，所以如果我知道一个文件的 CCSID 与我们的默认 CCSID 不同，我可以转换它。我几年前编写了代码来做到这一点，它工作得很好。

我的问题是以编程方式找出 IFS 文件的 CCSID。谷歌搜索后，我发现的唯一相关信息是来自 JamesA 的 Stackoverflow（[如何确定 CPYFRMIMPF 命令中使用的 CCSID？](https://stackoverflow.com/questions/10982810/how-to-determine-the-ccsid-used-in-cpyfrmimpf-command)），他指出您可以在 QSHELL 中执行“ls -S”以获取显示其 CCSID 的文件列表和文件名。

所以理论上我可以执行`ls -S filename`，解析输出以获取 CCSID，然后在必要时使用该 CCSID 执行数据转换。虽然这是一个丑陋的黑客，但如果可能的话，我更喜欢使用 IBM API。

有谁知道这样的 API 或更优雅的 hack，而不是从 解析列表`ls -S filename`？

[1] 我使用 C API's `open()`，`read()`并`close()`进行数据的实际读取。

[2] 我知道 65535 是一个糟糕的选择，但我对此无能为力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T16:18:27.137

看起来[`Qp0lGetAttr()`“获取属性”API](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=/apis/qgetattr.htm)将允许您指定一组属性以检索特定文件，包括一个名为`QP0L_ATTR_CCSID`.

[这是 RPG 中使用此 API 的示例。](http://www.think400.dk/apier_7.htm#eks0006) 包含 GetAttr 调用的示例位于[从该页面链接的 ZIP 文件中](http://www.think400.dk/files/CBX1270.zip)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T13:09:10.093

您可以使用集成文件系统 API 中的[stat()](http://pic.dhe.ibm.com/infocenter/iseries/v6r1m0/index.jsp?topic=/apis/stat.htm)函数。

原型定义如下所示：

```
D stat            PR            10I 0 ExtProc('stat')                   
D   path                          *   Value Options(*string)            
D   buf                               Likeds(statDS) 
```

然后你还需要stat数据结构：

```
 D statDS          DS                  Qualified Template
 D  st_mode                      10U 0
 D  st_ino                       10U 0
 D  st_nlink                      5U 0
 D  st_reserved2                  5U 0
 D  st_uid                       10U 0
 D  st_gid                       10U 0
 D  st_size                      10I 0
 D  st_atime                     10I 0
 D  st_mtime                     10I 0
 D  st_ctime                     10I 0
 D  st_dev                       10U 0
 D  st_blksize                   10U 0
 D  st_allocsize                 10U 0
 D  st_objtype                   11A
 D  st_reserved3                  1A
 D  st_codepage                   5U 0
 D  st_ccsid                      5U 0
 D  st_rdev                      10U 0
 D  st_nlink32                   10U 0
 D  st_rdev64                    20U 0
 D  st_dev64                     20U 0
 D  st_reserved1                 36A
 D  st_ino_gen_id                10U 0 
```

使用它很容易

```
 D fileStats       DS                  Likeds(statDS)

  /free
     if stat('/path/to/file': fileStats) < 0;
        // error handling
     endif;

     // ccsid now in fileStats.st_ccsid
  /end-free 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:12:44.357

有理由不为此使用DSPF吗？IBM 的实用程序做得很好；不知道你可能需要什么 eles。

# c++ - 数组初始化的时间复杂度是多少？

> ID：16064820
> 
> 赞同：15
> 
> 时间：2013-04-17T15:59:00.837
> 
> 标签：c++, c, arrays, initialization

考虑以下两种 C 或 C++ 中的数组初始化情况：

情况1：

```
int array[10000] = {0}; // All values = 0 
```

案例二：

```
int array[10000];
for (int i = 0; i < 10000; i++) {
    array[i] = 0;
} 
```

他们都需要同样的时间吗？案例 1 的复杂性是多少？并且，哪个更好？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T16:02:01.977

理论上，两者具有相同的时间复杂度：`O(N)`，`N`数组的大小在哪里。

但是，第一种方法应该更好，因为由编译器选择如何尽可能快地初始化（例如，可以通过 来完成`memset`）。对于优化，编译器通常比程序员更好。

顺便说一句，如果您的数组具有静态存储持续时间（例如，如果您将其声明为全局变量），它将自动初始化为 0。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-17T16:08:56.397

在数组具有静态持续时间（全局变量）的情况下，我会说第一个更可取，因为它不需要任何代码 - 它由运行时环境初始化。

如果变量是自动持续时间的（局部变量），则哪个更好，如果哪个更好，则取决于编译器。最有可能的是，两者都非常相似。

对于所有情况，自动存储持续时间变量的复杂性都是 O(n)。对于静态存储持续时间变量，第一种情况是 O(1)。

当然，如果你想用值 5 填充数组，第二个选项要好得多，因为它不需要`5`在源文件中写入 10000。

您可能还会发现 using`memset(array, 0, sizeof(array));`比两者都好 - 再次取决于编译器。这仍然是 O(n)，但是填充数组所需的实际时间可能会更短，因为`memset`可能比编译器为您的循环案例生成的优化更好[以及它对初始化变量的作用]。`memset`也不适用于填充数组`5`。

您还可以使用`std::fill(array, &array[10000], 5);`在所有数组中设置值 5，编译器应该可以很好地优化它。

最后，我应该指出，这些事情只有在它们在执行大量代码的情况下才真正重要。自从填充 40KB 的数据需要足够长的时间来真正担心自己已​​经过去了很长时间。像20多年。

# c++ - 预处理器 C++ 的工作

> ID：16064821
> 
> 赞同：2
> 
> 时间：2013-04-17T15:59:02.283
> 
> 标签：c++, c-preprocessor

```
#define NAME VALUE 
```

我知道无论何时编译器看到这个，它都会用 VALUE 替换 NAME。但是我对预处理指令的工作感到困惑，例如：

```
#define CONFIG_VAR(name, type, value) 
```

这不会告诉编译器替换任何东西，但我可以看到类似的语句

```
CONFIG_VAR(rank, int, 100) 
```

这将成功编译。这是如何运作的 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:04:43.253

在您的示例中，这根本不会做任何事情。任何参数，即使是那些看起来应该给出编译错误的参数，都被接受，并且整个宏调用被替换为空字符串。

但是，如果您稍后将定义替换为以下内容：

```
#define CONFIG_VAR(name, type, value) add_config_var<type>(name, value) 
```

它会突然做一些有用的事情。所以，我猜这个宏是一个占位符，用于表示在程序的那一部分中尚未（尚未）实现或不可用的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T16:16:57.597

当你说：

```
#define FOO BAR 
```

预处理器所做的是每次在此之后用文本替换它看到的文本*，* 一个*宏定义*。该过程称为*宏扩展*。这主要用于定义常量，例如：`FOO``BAR`

 **```
#define N 128
#define MASK (~(1 << 4)) 
```

它*可以*（ab）用来做一些非常时髦的事情，因为它对表达式、语句或任何东西一无所知。所以：

```
#define CONST (1 + 3 << (x)) 
```

实际上是可以的，并且会使用 each time 的当前值扩展到*每次**看到*`(1 + 3 << (x))`它。也像：*`x`*

```
#define START 5 * (1 +
#define END   + 5) 
```

其次是`START 2 + 3 + 4 END`可以预见地给出`5 * (1 + 2 + 3 + 4 +`5)`

还可以选择*使用参数定义宏*，例如：

```
#define BAD_SQUARE(x)  x * x 
```

其中，如果调用 as`BAD_SQUARE(a)`将扩展为`a * a`. 但`BAD_SQUARE(a + b)`扩展为`a + b * a + b`，这不是预期的（大概......）。

这来自 C 的黑暗时代，今天的 C/C++ 具有更安全/更清洁的机制来获得相同的结果（`const`在 C++ 中使用，在 C 中它遗憾地定义了一个变量，而不是一个真正的常量；在 C/C++ 或模板中使用内联函数在 C++ 中）。有太多的代码使用这种预处理器（以及太多的手指使用这种方式），所以实际上不可能摆脱它。根据经验，学习使用宏*阅读*代码，同时学习不使用宏*编写*代码（在合理的情况下，有时它们会派上用场......）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T16:10:54.553

这是一个宏（在 C 中比在 C++ 中更常见）。根据您提供的定义，预处理器将删除该“功能”的出现。一个常见的用例通常用于日志记录：

```
#ifdef DEBUG
#define dprintf(...) printf(...)
#else
#define dprintf(...)    // This will remove dprintf lines
#endif 
```

在 C++ 中，我相信一般惯例是使用内联函数，因为它们在性能方面提供相同的值，但也经过类型检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T16:04:58.957

在这种情况下，预处理器只是删除这些字符串（替换为空）。广泛使用的技术。

这是重要的示例（实际上只是一种可能的用法）：

```
#if DEBUG_ON
#define LOG(level, string) SomeLogger(level, string)
#else
#define LOG(level, string)
#endif 
```

可能您应该更熟悉[C 预处理器](http://en.wikipedia.org/wiki/C_preprocessor)。

有一种比较[接近的技术（X 宏）](http://en.wikipedia.org/wiki/X_Macro)可以构建代码来处理基于定义的操作的重复列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T16:05:14.520

如果这确实是整个宏定义，那么它只是将这个类似函数的宏定义为扩展为**空**（一个空字符串）。例如，在源代码中，

```
CONFIG_VAR(rank, int, 100); 
```

将转化为

```
; 
```**

# highcharts - 如何获取显示的最后一个值 yAxis highcharts

> ID：16064823
> 
> 赞同：1
> 
> 时间：2013-04-17T15:59:11.093
> 
> 标签：highcharts

我很想知道是否可以在高图中将最后一个值串联到 yAxis。

它应该是一个简单的标签，最后一个点值显示在图表的右侧，当我们向图表添加点时，它会动态地改变。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T17:15:30.897

大概有几种方法。在此示例中可以看到我将使用的一个：

[http://jsfiddle.net/jlbriggs/zXLZA/](http://jsfiddle.net/jlbriggs/zXLZA/)

```
data: [7,12,16,32,{y:64,dataLabels:{enabled:true}}] 
```

这利用了仅对最后一个数据点启用的数据标签。

这样做的缺点是您需要在数据中指定它。不难做到，但可能不符合您的需求。

另一种方法是使用第二个 y 轴和 tickPositions 属性：

[http://jsfiddle.net/jlbriggs/zXLZA/4/](http://jsfiddle.net/jlbriggs/zXLZA/4/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T10:39:37.200

另一种可能的解决方案是使用`tickPositioner`第二个 yAxis。在这种动态数据的情况下，一切都将自行计算，请参阅：http: [//jsfiddle.net/3c4tU/](http://jsfiddle.net/3c4tU/)

```
tickPositioner: function(min,max){
    var data = this.chart.yAxis[0].series[0].processedYData;
    //last point
    return [data[data.length-1]];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-29T18:11:28.093

要获得任何轴和系列中的最大值，请使用函数[getExtreme()](http://api.highcharts.com/highcharts#Axis.getExtremes%28%29 "总是阅读 api :)")。它会为您找到极值（最高或最低取决于您提出的论点）。选择之前的图表、轴和系列。

这是一个示例：（您的图表与变量“yourChart”相关联）

```
var highestValue = yourChart.yAxis[0].getExtremes().dataMax; 
```

它将返回第一个 Y 轴关联系列的最大值。

虽然下面将返回第二个 X 轴相关系列中的最低值：

```
var lowestValue = yourChart.xAxis[1].getExtremes().dataMin; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-30T21:20:43.007

我推荐的解决方案：

```
 plotOptions: {
        areaspline: {
            fillOpacity: 0.2,
            dataLabels: {
                enabled: true,
                borderRadius: 5,
              backgroundColor: 'rgba(252, 255, 197, 0.7)',
              borderWidth: 1,
              borderColor: '#AAA',
              y: -6,
                formatter: function() {
                    if (this.x == this.series.data[this.series.data.length-1].x) {
                        return this.series.name + ': '+this.y;
                    } else {
                        return null;
                    }
                }
            }
        }
     } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T06:49:34.527

我们可以为此使用格式化程序

这是显示最后一个值的示例 [http://jsfiddle.net/kgNy4/1/](http://jsfiddle.net/kgNy4/1/)

这是一个显示最大值的示例 [http://jsfiddle.net/kgNy4/](http://jsfiddle.net/kgNy4/)

在我放的例子中

`dataLabels: { enabled: true }`

以便执行格式化程序功能

我希望这对你有用

# eclipse - 如何启用具有条件 context1 或 context2 或 context3 的处理程序？

> ID：16064824
> 
> 赞同：0
> 
> 时间：2013-04-17T15:59:14.650
> 
> 标签：eclipse

我的 plugin.xml 中有一个处理程序标记，如下所示：

```
<handler
    class="fooHandler"
    commandId="fooCommand">
    <enabledWhen>
        <with variable="activeContexts">
           <or>
              <equals value="fooCtxt1"/>
              <equals value="fooCtxt2"/>
              <equals value="fooCtxt3"/>
           </or>
        </with>
    </enabledWhen>
</handler> 
```

但它不起作用！我也试过

```
<iterate operator="or"> 
         <ctxt1/> 
         <ctxt2/> 
         <ctxt3/>
</iterate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:10:04.987

我这样修复它：

```
<iterate operator="or">
    <or>
         <ctxt1/> 
         <ctxt2/> 
         <ctxt3/>
    </or>
</iterate> 
```

但奇怪的是为什么 operator="or" 没有做它的工作！有趣的是，如果我删除它 (operator="or") 它拒绝工作。非常坚定:)

# python - GAE - 按属性获取（）实体？

> ID：16064826
> 
> 赞同：2
> 
> 时间：2013-04-17T15:59:16.450
> 
> 标签：python, google-app-engine, google-cloud-datastore

我将如何根据属性的实体获取数据存储实体？我是否必须经历一个多步骤的 filter() get() 过程？或者我可以通过 1 件 get() 完成此操作吗？

例如，假设我有 Datastore 模型 Channel：

```
class Channel(db.Model):
    name = db.StringProperty(required = True) 
```

现在，如果我想根据它的名称删除一个频道，我该怎么做：

```
name = "ch1"
channel = Channel.get("name = " name)
channel.delete() 
```

这个 get 语句不起作用。实现这一目标的实际方法是什么？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:28:28.337

If you're doing this, you're better off changing your design slightly. If you're fetching channels by name, then it would be far easier (and faster and cheaper) to use the name of the channel as the key name instead.

Just pass the `key_name` parameter when creating the entity (examples borrowed from the [docs](https://developers.google.com/appengine/docs/python/datastore/keyclass#Key)):

```
employee = Employee(key_name='asalieri',
                first_name='Antonio',
                last_name='Salieri') 
```

And fetch it by with

```
k = Key.from_path('Employee', 'asalieri') 
```

Once you have the key, all other operations can proceed as usual.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:08:22.137

这是根据属性检索实体的方法

```
q = db.Query(Channel)
q.filter("name =", name)
entities = q.fetch(100) # The number of entities you want to be returned
if entries:    
    db.delete(entries) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:45:19.077

如果名称字段是唯一标识一个实体，最好将其用作 Sudhir 提到的键。但是，如果有多个实体具有相同的名称，您需要先获取它们

```
all = Channel.all(keys_only=True).fetch(1000) # only need key to delete
db.delete(all) 
```

一行版本

```
db.delete(Channel.all(keys_only=True).fetch(1000)) 
```

# javascript - 使用具有不同 AJAX 源的 DataTables，即 UWA.Data.getJson

> ID：16064828
> 
> 赞同：1
> 
> 时间：2013-04-17T15:59:25.587
> 
> 标签：javascript, php, jquery, jquery-datatables

我正在尝试将 DataTables 与我工作的虚拟学习环境一起使用。

## 介绍

正如我在之前的问题中提到的，我们的 VLE 使用[Netvibes 通用小部件 API](http://dev.netvibes.com/)，它允许我编写 JavaScript 文件，这些文件既可以与 VLE 通信（用于从 VLE 的用户帐户中检索信息，例如姓名和时间表），也可以通过代理，一个托管 PHP 文件和数据库的内部网络网络服务器。

## Netvibes UWA AJAX 调用

因此，例如，我可以使用此代码来访问我的 PHP 脚本：

```
UWA.Data.getJson(List.URL + '?cmd=getObservations&filters=' + JSONdata, List.init); 
```

两个简单的参数**——url**、**callback**。

或者，我可以使用完整的`Data.request`调用：

```
UWA.Data.request(
    BookReviewInput.URL, 
    {
        method: 'post', 
        proxy: 'ajax', 
        type: 'json', 
        cache: 3600,
        parameters: obj,
        onComplete: BookReviewInput.process
    } 
```

这些脚本是在我们的 VLE 上编写的，它有一个内部网络 URL，`http://vle.curriculum.local`然后是一个外部 URL `http://vle.ourschoolwebsite.com`。

它们与只能从本地访问的脚本进行通信，URL 为`http://php.curriculum.local`.

## 数据表 AJAX 调用

我现在正试图让 DataTables 从我的内部定位脚本中加载信息，我希望它能够完全完成这一切（即分页和所有事情），因为我们有很多数据需要很长时间才能加载满的。

首先，我通过手动从他们的网站上复制一些示例表来确保 DataTables 以 UWA 格式工作。**具有最少`.dataTable()`功能的手动 HTML 表格可以正常工作。**

然后我尝试编写以下代码，但不起作用：

```
<head>
    <script type="text/javascript">
    //<![CDATA[

    widget.onLoad = function(){
        $('#example').dataTable( {
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": "http://php.curriculum.local/cmd.php"
        } );
    }

    //]]>
    </script>
</head>
<body>
    <div id="wrapper">
        <table cellpadding="0" cellspacing="0" border="0" class="display" id="example"> </table>
    </div>
</body> 
```

我从运行这个脚本中得到的控制台错误信息非常少，可能是因为 UWA 包装器：

![控制台错误 1](https://i.stack.imgur.com/ok5Vh.png) 当我点击 186642.js..

![控制台错误 2](https://i.stack.imgur.com/xXSqL.png)

## 服务器端输出

我知道问题不在于服务器端输出，因为我已经在[http://pro.jsonlint.com](http://pro.jsonlint.com)上相应地验证了它：

```
{
    "sEcho": 0,
    "iTotalRecords": "5",
    "iTotalDisplayRecords": "5",
    "aaData": [
        [
            "2012-10-24",
            "35010",
            "34966",
            "10",
            "43",
            "2",
            "2",
            "2"
        ],
        [
            "2012-11-14",
            "34956",
            "35010",
            "10",
            "38",
            "2",
            "2",
            "2"
        ],
        [
            "2012-11-09",
            "90335",
            "34972",
            "11",
            "28",
            "2",
            "1",
            "1"
        ],
        [
            "2012-10-18",
            "34961",
            "34972",
            "11",
            "28",
            "2",
            "1",
            "2"
        ],
        [
            "2012-10-19",
            "34996",
            "34972",
            "11",
            "28",
            "2",
            "2",
            "2"
        ]
    ]
} 
```

## 可能的原因

我相对不知情的猜测是 DataTables 无法访问我的脚本，因为它是跨域的。

问题是，我无法将这些脚本放在同一个域中——我无法访问我们 VLE 上的 PHP 或 MySQL，该组织中的任何人也没有。

## 潜在的解决方案

我*认为*答案是尝试使用DataTables 函数中*的*`UWA.Data`调用。

 *这是我用来访问我的脚本的 UWA 调用：`UWA.Data.getJson('http://php.curriculum.local/cmd.php' + '?cmd=getObservations', fnCallback);`虽然我认为我还需要某种方式来发送 dataTables 的分页变量等，所以我可能需要使用完整的`UWA.Data.request`调用，并发送一个`params`对象。

## 可悲...

我完全不知道这是否可能，更不用说如何做到了。

任何人都可以提供指导吗？

提前致谢，*

# java - 带有try catch java的while循环

> ID：16064829
> 
> 赞同：0
> 
> 时间：2013-04-17T15:59:27.230
> 
> 标签：java, while-loop, try-catch, continue

因此，由于某种原因，在我的 while 循环中有一个 try catch，当 catch 触发时，由于某种原因，catch 块之后的代码仍在执行，并在 catch 块内使用 continue 语句。所以我不知道发生了什么。

```
 ArrayList<File> mapFileList = new ArrayList<File>();
    HashMap<String,Map> mapHash = new HashMap<String,Map>();

    // Player Variables
    ArrayList<Player> playerList = new ArrayList<Player>();
    Iterator<Player> playerIter;
    HashMap<String,Stats> statsMap = new HashMap<String,Stats>();
    File playerStatsFile;
    File newPlayerStatsFile;

    /*
     * Choose a map or make a new one
     */
    // Make a list of all existing files
    File mapFolder = new File("bin/maps/");
    // If the maps folder does not already exist, make it
    if(mapFolder.mkdir()){
        System.out.println("Maps folder does not exist. Creating.");
    }
    // For ever map file in the directory, save it to the map file list
    for(File fMap : mapFolder.listFiles()){
        if(fMap.getName().endsWith(".map")){
            mapFileList.add(fMap);
        }
    }
    // Load those maps into the mapHash HashMap
    Iterator<File> itMap = mapFileList.iterator();

        while(itMap.hasNext()){
        Map map = null;
        File fMap;
        // Get each map
        fMap = itMap.next();
        // Load them into memory and deserialize the map
        try{
            MapReader.openFile(fMap);
        }catch(IOException e){
            System.out.println("Error: Cannot open file.");
            continue;
        }

        try{
            map = MapReader.readRecords();
        }catch(Exception e){
            System.out.println("Error: Problem with reading the map.");
            //System.exit(1);
            continue;
        }
        // Let the user know the map loaded successfully
        System.out.println("Map "+map.getName()+" loaded.");
        // Then store the map into the mapHash
        mapHash.put(map.getName().toLowerCase(), map);
    } 
```

# macos - 如何使用 Applescript 在 PS CS6 中获取组（层集）名称？

> ID：16064830
> 
> 赞同：1
> 
> 时间：2013-04-17T15:59:29.380
> 
> 标签：macos, applescript, photoshop

我不知道如何通过 applescript 获取图层集名称并将其添加到列表中。我想我已经得到了问题的列表部分，但是获取图层集的实际名称仍然是一个谜。

```
set layerList to name of every layer set in current document where name contains ".png" 
```

代码应该遍历文件中设置的每个图层，并将每个包含“.png”的集合名称添加到列表中。

这是我目前得到的错误：

```
error "Adobe Photoshop CS6 got an error: Can’t get name of every layer set of current document whose name contains \".png\"." number -1728 
```

我希望这能以适当的方式解释我的问题。

提前致谢。

# javascript - 在开发控制台中输入多属性对象会引发错误

> ID：16064834
> 
> 赞同：1
> 
> 时间：2013-04-17T15:59:35.150
> 
> 标签：javascript, firebug, google-chrome-devtools

我在 Chrome 开发控制台（和 Firebug）中遇到了一些我不太理解的行为......

如果我直接在控制台中输入*多属性*JSON 对象，则会收到以下错误：

![在此处输入图像描述](https://i.stack.imgur.com/DDdeY.png)

我期望的结果是对象将完全按照我输入的方式返回，就像我直接输入字符串或数字值一样。

请注意，这是一个不同的结果，如果我要输入一个*单一的属性*对象：

![在此处输入图像描述](https://i.stack.imgur.com/QLMrd.png)

这里发生了什么？为什么会抛出 SyntaxError？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:25:48.330

控制台会评估您输入的任何内容。如果您`eval()`直接使用 JSON 对象，则会得到相同的结果。

```
eval("{foo1: 1, foo2: 2}")
// SyntaxError: Unexpected token : 
```

如果将对象分配给变量，则不会出现语法错误。

```
// in console
> var foo = {foo1: 1, foo2: 2};
undefined
> foo
Object {foo1: 1, foo2: 2} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-31T19:28:37.033

从 Chrome 66 开始，直接在控制台中评估对象有效。

[![控制台中的对象](https://i.stack.imgur.com/Wgsq3.png)](https://i.stack.imgur.com/Wgsq3.png)

# css - 如何绕过覆盖的 CSS 声明

> ID：16064835
> 
> 赞同：-2
> 
> 时间：2013-04-17T15:59:36.433
> 
> 标签：css

***更新：请在下面查看我的答案***

我试图在 a 上使用第一个`.alert`CSS 声明中的属性，`div` *即使第一个声明被后续声明覆盖*。

**CSS**

```
.alert{ margin:10px; } // one.css
.alert{ margin:0; } // two.css 
```

**HTML**

```
<div class="alert">Hello!</div> 
```

您知道是否有任何方法可以处理这种情况*而无需创建另一个声明来覆盖 two.css 中的声明*？

我搜索了谷歌和 SO，但我无法找到解决方案。

**编辑：**如果我做出第一个声明`!important`或增加其特异性，那么我将停止使用第二个 .alert 声明。所以不幸的是，这不是一个选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:03:13.060

使用`!important`.

```
.alert{ margin:10px !important; } // one.css
.alert{ margin:0; } // two.css 
```

或者使声明比`two.css`. `one.css`或之后加载`two.css`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:33:11.907

在您的类名之前引用父 id 选择器，以使该类属性占据主导值。如果您没有父 ID，则创建一个。您不必继续使用 !important，因为它在每种情况下都无法正常工作。

像这样的东西...

```
#parent .alert { margin:10px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:44:09.010

按照普遍的共识，绕过 CSS 继承是不可能的。我需要做两件事之一来获得最初由第一个声明应用的样式：

1.  使第一个声明更具体或 !important
2.  用第三个声明覆盖第二个声明

这似乎是 CSS 实践不佳的一个案例，所以如果您遇到类似的问题，请花点时间考虑一下您设置样式表的方式。

我将尝试以另一种方式解决我自己的情况，如果我有任何有价值的东西可以分享，也许我会回来提供更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-30T23:30:45.493

您将第一个 CSS 规则应用于元素并将其存储，然后获取计算值并进行比较。如果值不同，您可以将元素设置为原始值。

这是一个循环遍历css规则并获取您指定样式的值的函数。您必须修改它以包含类（它当前通过 ID 检查）并保存原始声明。

您还可以创建一个仅包含您想要包含的值的新规则，并将其应用于特定元素。

```
function getCSSPropertyValueForElement(id, property) {
    var styleSheets = document.styleSheets;
    var numOfStylesheets = styleSheets.length;
    var values = [];
    var selectorText = "#" + id;
    var value;

    for(var i=0;i<numOfStylesheets;i++) {
        var styleSheet = styleSheets[i];
        var cssRules = styleSheet.cssRules;
        var numOfCSSRules = cssRules.length;
        var cssRule;

        for (var j=0;j<numOfCSSRules;j++) {
            cssRule = cssRules[j];

            if (cssRule.media) {
                var mediaRules = cssRule.cssRules;
                var numOfMediaRules = mediaRules ? mediaRules.length : 0;

                for(var k=0;k<numOfMediaRules;k++) {
                    var mediaRule = mediaRules[k];

                    if (mediaRule.selectorText==selectorText) {

                        if (mediaRule.style && property in mediaRule.style) {
                            value = mediaRule.style.getPropertyValue(property);
                            console.log(property+":" + value);
                            values.push(value);
                        }
                    }
                }
            }
            else {

                if (cssRule.selectorText==selectorText) {
                    if (cssRule.style && property in cssRule.style) {
                        value = cssRule.style.getPropertyValue(property);
                        console.log(property+":" + value);
                        values.push(value);
                    }
                }
            }
        }
    }

    return values.pop();
}

var property = "outline";
// getting the computed value / current value
var value = window.getComputedValue(element, "stylenamedoesntwork").style[property]; 
```

# c++ - 带有 STL 容器的 c++ 函数模板特化

> ID：16064838
> 
> 赞同：3
> 
> 时间：2013-04-17T15:59:38.927
> 
> 标签：c++, templates, stl

我正在学习 STL 和模板。这是我的问题。我写了这个函数来计算两个迭代器“之间”的元素总和：

```
template <typename Iter> double PartialSum(Iter itBegin, Iter itEnd){
    if (itBegin == itEnd) return 0.;
    double dSum = 0;
    while(itBegin != itEnd){
        dSum += (*itBegin);
        ++itBegin;
    }
    return dSum;
} 
```

这很好用（我知道我可以使用`std::accumulate`，但这是出于学习目的）。现在，我希望具有相同的功能，`std:map`但迭代器的工作方式与`std::vector`and的情况不同`std::list`。因此，我想写重载/专业`PartialSum`。我尝试过但失败的是这个（最小的例子）：

```
template <typename T1, typename T2> double PartialSum(std::map<T1,T2>::iterator itBegin{
    return 0.;
} 
```

这是错误日志：

```
Main.cpp(42): error: nontype "std::map<_Key, _Tp, _Compare, _Alloc>::iterator [with _Key=T1, _Tp=T2, _Compare=std::less<T1>, _Alloc=std::allocator<std::pair<const T1, T2>>]" is not a type name template <typename T1, typename T2> double PartialSum(std::map<T1,T2>::iterator itBegin){ Main.cpp(83): error: no instance of overloaded function "PartialSum" matches the argument list argument types are: (std::_Rb_tree_iterator<std::pair<const std::string, int>>) std::cout<<"Map partial sum: "<<PartialSum(myMap.begin())<<std::endl; 
```

由于它是如此简单，我可能不会低估一些非常基本的东西。很高兴听到你的意见:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:38:27.597

试图以另一种方式制定。

考虑你有功能

```
template<typename T>
T f(){
    return T();
} 
```

这里不可能自动得到 T，所以你需要把它称为`f<T>()`. 也一样

```
template <typename T>
int f(typename type<T>::inner){
     //
} 
```

例如，如果您有

```
struct type{
    typedef int inner;
} 
```

在这里很容易看出，如果你调用`f(0)`它是不可能得到 T 的。
你可能会说在特定情况下用 得到它是可能的`map`，但你将如何定义它？

您应该阅读 c++ 标准以阅读应该可推导出的类型。

* * *

在您的情况下，您可以通过以下方式致电

```
PartialSum<std::string, int>(m.begin()); 
```

* * *

顺便说一句，该地图似乎只是不常见的情况，您可以尝试做一些更通用的事情，这将适用于任何迭代器类型。您可能会看到`std::accumulate`来源以获得一些想法。

```
template<typename _InputIterator, typename _Tp, typename _BinaryOperation>
inline _Tp
accumulate(_InputIterator __first, _InputIterator __last, _Tp __init,
       _BinaryOperation __binary_op)
{
  // concept requirements
  __glibcxx_function_requires(_InputIteratorConcept<_InputIterator>)
  __glibcxx_requires_valid_range(__first, __last);

  for (; __first != __last; ++__first)
__init = __binary_op(__init, *__first);
  return __init;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:42:20.157

除了 T1 和 T2 不可推导出的问题之外，还有另一个问题是您缺少`typename`从属名称上的关键字

```
template<typename T1, typename T2>
void MyFunction(typename std::map<T1, T2>::iterator it /*, ...*/)
//              ^^^^^^^^^ 
```

您会看到，依赖名称是依赖于模板参数的名称。实际上，理论上可能存在这样的类型 T1 和 T2，其名称 map::iterator 不是类型，而是静态数据成员。除非您明确指定它是一个类型，否则编译器将始终假定一个数据成员。

你应该简单地做这样的事情

```
template<class ValueType, class IteratorType, class Func>
ValueType partialSum(IteratorType first, IteratorType last, ValueType startingValue = ValueType(), Func func = std::plus<ValueType>()) 
```

这将涵盖所有情况。要对地图求和，您需要提供添加两对的 func。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-17T16:07:00.817

当您取消引用 a`std::map<T1, T2>::iterator`时，您会得到 a `std::pair<const T1, T2>`，其中`.first`元素是键，`.second`元素是值。

像这样的一般结构：（代码未经测试，甚至未经编译）

```
template <typename T1, typename T2> double PartialSum(std::map<T1,T2>::iterator itBegin, std::map<T1,T2>::iterator itEnd)
{
double dSum = 0;
while(itBegin != itEnd){
    dSum += (itBegin->second);
    ++itBegin;
}
return dSum;
} 
```

# ffmpeg - 对用于 HTML5 播放的 PowerPoint 演示文稿的视频进行编码

> ID：16064844
> 
> 赞同：1
> 
> 时间：2013-04-17T16:00:03.180
> 
> 标签：ffmpeg, html5-video, powerpoint, mediaelement, transcode

我们有许多已转换为 16:9 纵横比的 powerpoint 演示文稿，然后转换为具有“apple TV”720p 配置文件的 mp4“主视频”。这些PowerPoint演示文稿带有语音注释。所以本质上，我们展示一张幻灯片，然后让注释声音播放一会儿，然后转到下一张幻灯片，以此类推。生成的 mp4 主视频平均约为 900MB。

这是主视频的示例

```
输入#0，mov，mp4，m4a，3gp，3g2，mj2，来自“input.mp4”：
元数据：
    主要品牌：isom
    次要版本：512
    compatible_brands：isomiso2avc1mp41
    创建时间：1970-01-01 00:00:00
    编码器：Lavf52.104.0
  时长：02:00:57.65，开始：0.000000，比特率：970 kb/s
    流 #0:0（und）：视频：h264（主）（avc1 / 0x31637661）、yuv420p、1280x720 [SAR 1:1 DAR 16:9]、836 kb/s、29.97 fps、29.97 tbr、30k tbn、59.94待定
    元数据：
      创建时间：1970-01-01 00:00:00
      handler_name : 视频处理程序
    流 #0:1(und)：音频：aac (mp4a / 0x6134706D)，44100 Hz，立体声，fltp，127 kb/s
    元数据：
      创建时间：1970-01-01 00:00:00
      handler_name : SoundHandler

```

我们正试图让这些演示文稿在尽可能多的设备/浏览器上在网络上播放，包括一些不支持 HTML5 (IE7/IE8) 的设备/浏览器。我们缩小了我们选择的播放器 mediaElement 的范围，并从 powerpoint 演示文稿中提取了一些“提示点”，这些“提示点”标记了幻灯片的变化位置。我们还捕获了这些提示点的缩略图，这样我们现在就有了每张幻灯片的缩略图列表以及视频中特定幻灯片开始的相关提示点。

问题来了……由于主视频的尺寸很大，我们无法将主视频与我们的 mediaElement 播放器一起使用。我们确实需要将主视频转码为 mp4 和 ogv 以获得良好的设备/浏览器覆盖率。

我们似乎无法找到合适的转码策略来减小视频的大小。我们使用了许多 ffmpeg 设置并且能够减小大小，但是当我们这样做时，我们会损害跳转到特定提示点的能力。

它适用于原生执行 HTML5 视频的浏览器（Chrome 和 Firefox），但不适用于使用 mp4 文件且似乎与视频中关键帧的数量和频率密切相关的 mediaElement (IE7/IE8) 的 Flash 回退为了允许使用提示点进行干净的搜索和跳过。

看到我们谈论的视频只有幻灯片（实际上每个演示文稿大约 90 张静态图像）和一些声音，我们认为必须可以进行转码，使关键帧落在提示点或提示点附近，并且视频的大小可以大大减小，同时仍然允许平滑搜索和跳过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:55:17.153

> 看到我们正在谈论一个只有幻灯片的视频（实际上每个演示文稿大约 90 个静态图像）

如果您的“视频”基本上是幻灯片，是的，您可以通过降低 [帧速率来大幅减小文件大小](http://ffmpeg.org/trac/ffmpeg/wiki/Create%20a%20video%20slideshow%20from%20images)

```
# each image will have a duration of 5 seconds
ffmpeg -f image2 -r 1/5 -i img%03d.png -i audio.m4a -c:v libx264 -r 30 master.mp4 
```

# android - 将 SQLite 填充列表视图中的选择存储为字符串

> ID：16064845
> 
> 赞同：0
> 
> 时间：2013-04-17T16:00:03.030
> 
> 标签：android, sqlite, listview

在我的 android 应用程序中，我使用了一些普通的列表视图，`String []`但我有一个来自**SQLite**数据库的列表视图。它显示它很好，这不是问题。问题是记录我按下了哪个选项，因为它似乎只是记录`android.database.sqlite.sqlitecursor@????`以及当我使用 toast 来显示字符串时

我必须编写代码才能使用选项名称做我想做的事情

因此，如果有人可以帮助我将选项名称存储在字符串中并在 toast 中使用它，那将是非常有帮助的……因为这是我测试代码的方式。谢谢

如果有帮助，我会发布填充下面列表视图的代码

FavouritesScreen.java... 使用列表视图中的 SQLite 值

```
final ListView list = (ListView) findViewById(R.id.listView1);
@SuppressWarnings("deprecation")
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, //context
    android.R.layout.simple_list_item_1, db.getValues(), //Cursor
    new String[] {"SocietyName"}, new int[] {
        android.R.id.text1
    });
list.setAdapter(adapter);
list.setOnItemClickListener(new OnItemClickListener() {
  public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
    String favname = (String)((Cursor) list).getString(position);
    Toast.makeText(getApplicationContext(), favname, Toast.LENGTH_SHORT).show();
  }
}); 
```

MyDBAdapter.java... 从 SQLite 数据库中获取值

```
public Cursor getValues() {
  if (!isOpen()) {
    open();
  }
  System.out.println("3a");
  Cursor mCursor = db.query(true, "Favourites", // table name
  new String[] {
    "_id", "SocietyName"
  }, // select clause
  null, // where clause
  null, // where clause parameters
  null, // group by
  null, // having
  null, // order by
  null); // limit
  System.out.println("4a");
  return mCursor;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:10:19.643

`list`是 ListView 而不是 Cursor（我本以为这会引发异常。）

 ~~~~```
String favname = (String) ((Cursor) list).getString(position); 
```~~ 

~~首先获取光标，然后调用`getString()`您感兴趣的列：~~

 ~~```
String favname = ((Cursor) list.getItemAtPosition(position)).getString(columnIndex);
/* I assume the column you want is 1 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:11:01.293

android.database.sqlite.sqlitecursor@????'

```
String favname = (String) ((Cursor) list).getString(position); 
```

是定义。没有给你一个字符串，而是一个 SQLLite 游标。而是使用游标对象来获取您需要的字符串。

您可能应该获得与列表关联的 Adapter 对象，然后询问光标，然后询问该位置上的内容。

或者更好的是，使用这个人：

```
public void onItemClick(AdapterView<?> arg0 
```

适配器视图对象。询问那个“arg0”对象你在位置上需要什么。

```
Toast.makeText(getApplicationContext(), arg0.getItemAtPosition(position), Toast.LENGTH_SHORT).show(); 
```~~~~

> ID：16064848
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# vb.net - VB.net -ArrayLists issues with searching

> ID：16064850
> 
> 赞同：0
> 
> 时间：2013-04-17T16:00:15.553
> 
> 标签：vb.net, string

I'm probably just overcomplicating things...

Both of the arrays I'm using are arrayLists, what I'm trying to do is, most/all of array1 will be in array2, array1 however holds 5 digits strings and array2 (also strings) has a longer string which possibly starts with the first 5 digits of array1\.

So if that makes sense, what I'm trying to do is using array1's each string, searching array2 for it and when found, I want the whole string, and I'm going to create a new arraylist for those.

I'm not sure what's slipping me up! .Contains seems to not find anything in array2, even though array1 has say "00111" and array2 has "00111, FIND for 8043890132", I'm guessing that's because it's looking for exactly "00111"?

```
 For Each unfoundLo In arrUnfoundInLo           

                 If arrCorList.IndexOf(unfoundLo) Then      ' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:07:31.657

我不确定我所看到的，但我假设你只做一个循环。

你必须在两个数组中循环

```
For Each item1 In array1
    For Each item2 In array2
        If item2.Contains(item1) Then 
```

或者循环数组二，得到数字部分

```
For Each item2 In array2
    numberPart = item2.SubString(0, 5)

    If array1.Contains(numberPart) Then 
```

* 这些是示例，不是实际使用的代码

# emacs - 在上一行下缩进

> ID：16064853
> 
> 赞同：0
> 
> 时间：2013-04-17T16:00:25.307
> 
> 标签：emacs, yasnippet

这是我的片段：

```
foo ($1)
$0 
```

我用缩进激活它并触摸 'arg<Tab>bar' 我想要这样：

```
 foo (x)
  bar 
```

但我得到了这个：

```
 foo (x)
bar 
```

我的 yas-indent-line 是固定的。Emacs 24.2.1 Yasnippet 0.8.0 (20130218)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:11:53.950

这是功能片段：

```
# key: snip
# name: foo
# expand-env: ((yas/indent-line t))
# --
foo ($1)
$0`()`$> 
```

# git - Why Git ignores ~/.ssh/id_rsa, wants ~/.ssh/id_dsa or ~/.ssh/id_ecdsa?

> ID：16064856
> 
> 赞同：7
> 
> 时间：2013-04-17T16:00:32.607
> 
> 标签：git, ssh

This is the error I'm receiving:

```
no such identity: /home/eduan/.ssh/id_dsa: No such file or directory
no such identity: /home/eduan/.ssh/id_ecdsa: No such file or directory
Permission denied (publickey). 
```

That's what happens when I try to push, or in this case when I do `ssh -T git@github.com`.

I have correctly generated the id_rsa and id_rsa.pub files.

How may I go about solving this? I'm using Arch Linux with E17 BTW.

**EDIT**:
@kortix would the following work for this?:

```
Host github.com
    IdentityFile ~/.ssh/id_rsa 
```

It doesn't seem to work for me yet... I get the following when I push with Git:

```
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

I made sure the repo exists, and I also updated the remote URL with `git remote set-url origin git@github.com:Greduan/dotfiles.git`.

I also added the SSH key to the list of accepted SSH keys in GitHub. What else should I do?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T16:16:13.510

SSH 客户端会在您生成时告诉您`id_dsa`（注意“d”——它代表 DSA）`id_rsa`（注意“r”代表 RSA）。

您应该生成一个 DSA 密钥或告诉 SSH 使用哪个“身份”（私钥）。这可以使用远程文件中自定义条目`IdentityFile`下的指令来完成（请参阅手册页）。`Host``~/.ssh/config``github``ssh_config(5)`

**更新**（2013-04-29，让下一位读者更清楚）。问题的本质是 OP 在他的`~/.ssh/id_rsa`密钥上有错误的所有者（root），所以 OpenSSH 客户端首先尝试读取该密钥，失败，然后继续尝试读取`~/.ssh/id_dsa`，`~/.ssh/id_ecdsa`反过来，这也失败了——这次因为它们根本不存在。由于没有更多密钥可用于 pubkey 身份验证，也没有可用的身份验证机制，SSH 客户端失败。那些“没有这样的身份……”的信息实际上是警告。

# mysql - 使用子查询、IF 和联接优化 MySQL 查询

> ID：16064857
> 
> 赞同：-1
> 
> 时间：2013-04-17T16:00:42.860
> 
> 标签：mysql

我有一个复杂的 SQL 语句，每次调用都需要（它用于日历视图）**0.35sec**。有 50 个用户和 2 周的日历项目，需要 245 秒，这太长了。我试图优化查询，但目前我不知道。

我对所有相关列都有索引。

```
SELECT 
      DISTINCT tax.ta_id, tax.a_id, ax.status, ax.kunden_id, 
      IF(ax.todo_from != '0000-00-00', DATE_FORMAT(ax.todo_from, '%d.%m'), 'k. day_date') todo_from, 
      IF(ax.todo_until != '0000-00-00', DATE_FORMAT(ax.todo_until, '%d.%m'), 'k. day_date') todo_until, 
      IF((SELECT taj.city FROM suborders taj WHERE taj.a_id = tax.a_id AND taj.order_type = 'BRING' ORDER BY pos_id ASC LIMIT 1) != '', CONCAT(IF((SELECT short_name FROM locations WHERE company_id = '100' AND h_id = tax.h_id) != '', (SELECT short_name FROM locations WHERE company_id = '100' AND h_id = tax.h_id),tax.city),'>', CONCAT((SELECT IF((SELECT short_name FROM locations WHERE company_id = '100' AND h_id = taj.h_id) != '', (SELECT short_name FROM locations WHERE company_id = '100' AND h_id = taj.h_id), taj.city) FROM suborders taj WHERE taj.a_id = tax.a_id AND taj.order_type = 'BRING' AND taj.pos_id >= tax.pos_id ORDER BY pos_id ASC LIMIT 1))), IF((SELECT short_name FROM locations WHERE company_id = '100' AND h_id = tax.h_id) != '', (SELECT short_name FROM locations WHERE company_id = '100' AND h_id = tax.h_id),tax.city)) as city, 
  tax.user_id, tax.day_date, tax.pos_gesamt_id, '4' as class_type 
    FROM 
      suborders tax INNER JOIN orders ax ON (ax.a_id = tax.a_id) 
    WHERE 
      tax.order_type = 'TAKE' AND tax.user_id = '140' AND (tax.day_date = '2013-04-16' AND '2013-04-16' = (SELECT taj.day_date FROM suborders taj WHERE taj.a_id = tax.a_id AND taj.user_id = '140' AND taj.day_date = '2013-04-16' AND taj.user_id = '140' AND taj.order_type = 'BRING' ORDER BY pos_gesamt_id ASC)) AND tax.company_id = '100' GROUP BY tax.ta_id 
```

也许你给我一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:53:41.997

第一次尝试重写（未经测试，因为我不知道你的表格布局）： -

```
SELECT DISTINCT tax.ta_id, tax.a_id, ax.status, ax.kunden_id, 
      IF(ax.todo_from != '0000-00-00', DATE_FORMAT(ax.todo_from, '%d.%m'), 'k. day_date') todo_from, 
      IF(ax.todo_until != '0000-00-00', DATE_FORMAT(ax.todo_until, '%d.%m'), 'k. day_date') todo_until, 
      IF((SELECT taj.city FROM suborders taj WHERE taj.a_id = tax.a_id AND taj.order_type = 'BRING' ORDER BY pos_id ASC LIMIT 1) != '', 
        CONCAT(
            IF(Sub2.short_name != '', Sub2.short_name,tax.city),
            '>', 
            CONCAT((
                SELECT IF(  Sub3.short_name != '', 
                            Sub3.short_name, 
                            taj.city) 
                FROM suborders taj 
                LEFT OUTER JOIN (SELECT h_id, short_name FROM locations WHERE company_id = '100') Sub3 ON Sub3.h_id = taj.h_id
                WHERE taj.a_id = tax.a_id 
                AND taj.order_type = 'BRING' 
                AND taj.pos_id >= tax.pos_id 
                ORDER BY pos_id 
                ASC LIMIT 1))), 
            IF(Sub2.short_name != '', Sub2.short_name, tax.city)) as city, 
  tax.user_id, tax.day_date, tax.pos_gesamt_id, '4' as class_type 
FROM suborders tax 
INNER JOIN orders ax ON (ax.a_id = tax.a_id) 
INNER JOIN (
    SELECT DISTINCT a_id 
    FROM suborders taj 
    WHERE taj.user_id = '140' 
    AND taj.day_date = '2013-04-16' 
    AND taj.user_id = '140' 
    AND taj.order_type = 'BRING' 
) Sub4 ON Sub4.a_id = tax.a_id 
LEFT OUTER JOIN (SELECT h_id, short_name FROM locations WHERE company_id = '100') Sub2 ON Sub2.h_id = tax.h_id
 WHERE tax.order_type = 'TAKE' 
 AND tax.user_id = '140' 
 AND tax.day_date = '2013-04-16' 
 AND tax.company_id = '100' 
 GROUP BY tax.ta_id 
```

在这个阶段，我不确定我是否可以更进一步，因为这真的让我很困惑，事情是如何组合在一起的。

问题是你有很多相关的子查询，而且速度很慢（即，一个依赖于查询外部字段的子查询——因此 MySQL 必须为每一行执行该子查询）。我已经删除了一些我可以解决的问题，并将它们替换为子查询的连接（使用这些 MySQL 可以执行一次子查询，然后将结果连接到主查询）

但是，当您在查询中关联了子查询，并且在不同的表和子查询之间重用了别名时，这是非常令人困惑的。

如果我能弄清楚它的用途，那么查询的性能可以大大提高！

此外，您还在主查询上使用了 GROUP BY，而没有任何聚合列。这有时会代替 DISTINCT，但您也有 DISTINCT。

# ant - Max function in Ant

> ID：16064859
> 
> 赞同：1
> 
> 时间：2013-04-17T16:00:49.673
> 
> 标签：ant, max

I have directories that creating by following pattern `build_yyyyMMdd_HHmmssSSS`
i.e
`build_20130304_112343142`
`build_20130402_102141121`

I need to determinate latest created directory in ant build

Does ant has some kind of max function?

Or perhaps you can propose me some another idea?

Thansk

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:04:55.053

使用[资源](http://ant.apache.org/manual/Types/resources.html)，即回显最新创建的目录：

按名称分类 ：

```
<resources id="foobar">
 <!-- default last count="1" -->
 <last>
  <sort>
   <name/>
    <dirset dir="path/to/rootdir">
     <include name="build*" />
    </dirset>
  </sort>
 </last>
</resources>

<echo>${toString:foobar}</echo> 
```

按日期排序：

```
<resources id="foobar">
 <!-- default last count="1" -->
 <last>
  <sort>
   <date/>
    <dirset dir="path/to/rootdir">
     <include name="build*" />
    </dirset>
  </sort>
 </last>
</resources>

<echo>${toString:foobar}</echo> 
```

[资源集合](http://ant.apache.org/manual/Types/resources.html#collection)随 Ant 1.7 一起提供，可以与`<copy>`, `<move>`.. 等结合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:06:03.530

由于您的构建（以及目录名称）实际上也按字母顺序排序

`ls -rd | tail -n 1`

应该给你最新的。

# ruby-on-rails-3 - Rails 3 Factory_Girl Factory 未注册

> ID：16064872
> 
> 赞同：0
> 
> 时间：2013-04-17T16:01:57.037
> 
> 标签：ruby-on-rails-3, rspec2, factory-bot

我不得不承认我是测试新手，所以我正在尝试我的前几个 Rspec 和 Factory Girl 测试。一切都很顺利，直到我尝试使用工厂女孩。

我的配置如下

规范/spec_helper.rb

```
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'database_cleaner'
require 'factory_girl_rails'

Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.fixture_path = "#{::Rails.root}/spec/fixtures"
  config.use_transactional_fixtures = true
  config.infer_base_class_for_anonymous_controllers = false
  config.order = "random"

  config.include FactoryGirl::Syntax::Methods

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end

end 
```

规格/模型/role_spec.rb

```
require 'spec_helper'

describe Role do
  it "is valid" do
    role = FactoryGirl.build(:role)
    expect(role).to be_valid
  end
end 
```

规格/工厂.rb

```
FactoryGirl.define do   
  factory :role do
    rolesymbol "tst-admin"
    name "test admin"
  end
end 
```

但是，当我运行 bundle exec rspec 或 rake spec 时，出现以下错误

```
Failures:

  1) Role is valid
     Failure/Error: role = FactoryGirl.build(:role)
     ArgumentError:
       Factory not registered: role
     # ./spec/models/role_spec.rb:12:in `block (2 levels) in <top (required)>' 
```

对我来说，FactoryGirl 似乎工作正常，角色定义正确，规范正常工作，所以我不知道发生了什么。有任何想法吗？

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T15:35:10.580

我参加这个聚会有点晚了，但是当我尝试在 Rails 引擎中使用带有 RSpec 的 FactoryGirl 时遇到了同样的问题。我通过在我的 spec/spec_helper.rb 文件中明确设置工厂女孩定义路径解决了这个问题

```
FactoryGirl.definition_file_paths = [File.expand_path('../factories', __FILE__)]
FactoryGirl.find_definitions 
```

目录结构如您所料：

```
root/
  spec/
    spec_helper.rb
    a_spec_file.rb
    factories/
      my_factory.rb 
```

根据 FactoryGirl 文档，这种结构应该开箱即用（[https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#defining-factories](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#defining-factories)）。我还没有调查为什么对我来说不是这种情况。（第一次回复SO，如果这里有什么问题，请见谅！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:13:25.843

尝试将 require 'factory_girl' 添加到您的 factory.rb 中？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-28T00:00:49.773

我什至迟到了聚会，但我通过将`factories`目录移动到（现在）更标准的路径来解决这个问题`spec/support/factories`- rspec 现在可以将其拾取，而无需进一步告诉它在哪里查找。

# c# - 尝试在动态创建的程序集上绑定动态方法会导致 RuntimeBinderException

> ID：16064874
> 
> 赞同：9
> 
> 时间：2013-04-17T16:02:06.190
> 
> 标签：c#, .net, dynamic, reflection, dynamic-language-runtime

我有一个方便的实用程序方法，它获取代码并吐出一个内存中的程序集。（它使用`CSharpCodeProvider`，尽管我认为这无关紧要。）这个程序集的工作方式与其他任何带有反射的程序集一样，但是当与`dynamic`关键字一起使用时，它似乎失败了`RuntimeBinderException`：

> “对象”不包含“声音”的定义

例子：

```
var assembly = createAssembly("class Dog { public string Sound() { return \"woof\"; } }");
var type = assembly.GetType("Dog");
Object dog = Activator.CreateInstance(type);

var method = type.GetMethod("Sound");
var test1Result = method.Invoke(dog, null); //This returns "woof", as you'd expect

dynamic dog2 = dog;
String test2Result = dog2.Sound(); //This throws a RuntimeBinderException 
```

有谁知道 DLR 无法处理此问题的原因？有什么办法可以解决这种情况吗？

编辑：

createAssembly 方法：

免责声明：其中一些内容包含扩展方法、自定义类型等。不过，它应该是不言自明的。

```
private Assembly createAssembly(String source, IEnumerable<String> assembliesToReference = null)
{
    //Create compiler
    var codeProvider = new CSharpCodeProvider();

    //Set compiler parameters
    var compilerParameters = new CompilerParameters
    {
        GenerateInMemory = true,
        GenerateExecutable = false,
        CompilerOptions = "/optimize",
    };

    //Get the name of the current assembly and everything it references
    if (assembliesToReference == null)
    {
        var executingAssembly = Assembly.GetExecutingAssembly();
        assembliesToReference = executingAssembly
            .AsEnumerable()
            .Concat(
                executingAssembly
                    .GetReferencedAssemblies()
                    .Select(a => Assembly.Load(a))
            )
            .Select(a => a.Location);
     }//End if

    compilerParameters.ReferencedAssemblies.AddRange(assembliesToReference.ToArray());

    //Compile code
    var compilerResults = codeProvider.CompileAssemblyFromSource(compilerParameters, source);

    //Throw errors
    if (compilerResults.Errors.Count != 0)
    {                
        throw new CompilationException(compilerResults.Errors);                
    }

    return compilerResults.CompiledAssembly;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T17:31:23.143

做你的课`public`。

```
var assembly = createAssembly("public class Dog { public string Sound() ...
                               ^ 
```

这解决了我机器上的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:28:53.117

这可能是一种解决方法。

```
//instead of this
//dynamic dog2 = dog;    

//try this
dynamic dog2 = DynWrapper(dog);    
String test2Result = dog2.Sound();//Now this works.

public class DynWrapper : DynamicObject {
        private readonly object _target;

        public DynWrapper(object target) {
            _target = target;                
        }

        public override bool TryInvokeMember(InvokeMemberBinder binder, object[] args, out object result) {   
            //for the sake of simplicity I'm not taking arguments into account,
            //of course you should in a real app.
            var mi = _target.GetType().GetMethod(binder.Name);
            if (mi != null) {
                result = mi.Invoke(_target, null);                                        
                return true;
            }
            return base.TryInvokeMember(binder, args, out result);
        }
    } 
```

PS：我尝试将此作为评论发布（因为它是一种解决方法而不是答案）但不能这样做，因为它太长了......

# java - java.lang.ClassCastException：java.util.ArrayList 无法转换为 ....CrExcessMaster

> ID：16064875
> 
> 赞同：0
> 
> 时间：2013-04-17T16:02:06.643
> 
> 标签：java, hibernate, classcastexception

我的代码是

```
private List find(String queryString) {
    final Query query = getSession().createQuery(queryString.intern());
    List resultSet = query.list();
    return resultSet;
}
@SuppressWarnings("rawtypes")
public List < CrExcessMaster > getExcessesWidget(String primaryCO) {
    List cifList = find("select cem.id.cifNumber from CrEntitymaster cem where cem.primaryCo='" + primaryCO + "'");
    List < CrExcessMaster > temp = null;
    for (int i = 0; i < cifList.size(); i++) {
        log.info("cifList in dao " + cifList);
        if (i == 0) {
            temp = find("from CrExcessMaster where cif='" + cifList.get(i) + "'");
        } else temp.add((CrExcessMaster) find("from CrExcessMaster where cif='" + cifList.get(i) + "'"));
    }
    return temp;
} 
```

其中 crExcessMaster 是一个表，我需要显示变量临时值...但是当我尝试调用上面的返回值时，如下所示

```
public static FilteredUIExcessList formatCustomerExcessUiBean(List < CrExcessMaster > crExcessMasterList) {
if (crExcessMasterList != null) {
    FilteredUIExcessList filteredUIExcessList = new FilteredUIExcessList(); 
    < font color = red >
    for (CrExcessMaster crExcessMaster: crExcessMasterList) < /font>{
         ExcessUIBean excessUIBean = new ExcessUIBean();
         excessUIBean.setCurrency(crExcessMaster.getCurrency());
} 
```

在以红色突出显示的代码处，它正在抛出 classcast 异常

```
java.lang.ClassCastException: java.util.ArrayList cannot be cast to cib.ecm.creditRisk.excessManagement.db.orm.CrExcessMaster 
```

全栈跟踪是

java.lang.ClassCastException：java.util.ArrayList 无法在 cib.ecm.creditRisk.excessManagement.web.uiFormatters.UIBeanFormatter.formatCustomerExcessUiBean(UIBeanFormatter.java:65) 处转换​​为 cib.ecm.creditRisk.excessManagement.db.orm.CrExcessMaster ) 在 cib.ecm.creditRisk.excessManagement.web.action.ExcessListActionBean.getExcessesWidget(ExcessListActionBean.java:105) 的 cib.ecm.creditRisk.excessManagement.web.services.ExcessManagementUiService.getExcessesWidget(ExcessManagementUiService.java:52)。 reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at net。 sourceforge.stripes.controller.DispatcherHelper 6 美元。在 net.sourceforge.stripes.controller.BeforeAfterMethodInterceptor.intercept(BeforeAfterMethodInterceptor.java:113) 在 net.sourceforge .stripes.controller.ExecutionContext.proceed(ExecutionContext.java:155) 在 net.sourceforge.stripes.controller.ExecutionContext.wrap(ExecutionContext.java:74) 在 net.sourceforge.stripes.controller.DispatcherHelper.invokeEventHandler(DispatcherHelper.java :440) 在 net.sourceforge.stripes.controller.DispatcherServlet.doPost(DispatcherServlet.java:167) 在 net.sourceforge.stripes.controller 的 net.sourceforge.stripes.controller.DispatcherServlet.invokeEventHandler(DispatcherServlet.java:285)。 javax.servlet 中的 DispatcherServlet.doGet(DispatcherServlet.java:67)。http.HttpServlet.service(HttpServlet.java:707) at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) at org .mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221) at net.sourceforge.stripes.controller.StripesFilter.doFilter(StripesFilter.java:246) at org.mortbay.jetty.servlet.ServletHandler$CachedChain .doFilter(ServletHandler.java:1212) 在 cib.ecm.creditRisk.excessManagement.web.filter.HibernateSessionRequestFilter.doFilter(HibernateSessionRequestFilter.java:35) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java :1212) 在 org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399) 在 org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) 在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182) 在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766) 在 org.mortbay.jetty.webapp.WebAppContext .handle(WebAppContext.java:450) 在 org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230) 在 org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114) 在 org. mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty.Server.handle(Server.java:326) 在 org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)在 org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549) 在 org.mortbay.jetty.HttpParser。在 org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410) 在 org.mortbay.handle(HttpConnection.java:404) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 的 parseAvailable(HttpParser.java:212) 在 org.mortbay.thread .QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:33:50.023

问题是这一行：

```
} else temp.add((CrExcessMaster) find("from CrExcessMaster where cif='" + cifList.get(i) + "'")); 
```

有了这个，你正在添加一个`List`to `temp`，这导致了`ClassCastException`后者。而不是`temp.add()`，调用`temp.addAll()`。

# java - 如何在 jtextarea 中显示 for 循环的结果？爪哇

> ID：16064878
> 
> 赞同：0
> 
> 时间：2013-04-17T16:02:14.960
> 
> 标签：java, swing, jtextarea

我想将我的推文的所有结果从 for 循环显示到 jtextarea 中。并连续显示每个。

请检查我的代码仅供参考：

```
try {

        ResponseList<Status> a = twitter.getUserTimeline(new Paging(1,20));

        for(Status b: a) {
            System.out.println(b.getText());
            textArea.setText(b.getText());

        }

    }catch(Exception e ){

    } 
```

我知道这有关系

```
 textArea.setText(b.getText()); 
```

抱歉，我是 Java 新手，所以我仍然需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:03:34.963

`setText`替换组件文本内容。[append](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html#append%28java.lang.String%29)将给定的文本附加到文档的末尾：

```
textArea.append(b.getText()); 
```

或使用

```
textArea.append(b.getText() + "\n"); 
```

如果没有从 . 返回终止换行符`b.getText()`。

# apache - 单个 EC2 实例上的多个网站（或 VPC 分步指南！）

> ID：16064880
> 
> 赞同：3
> 
> 时间：2013-04-17T16:02:31.380
> 
> 标签：apache, amazon-web-services, amazon-ec2, ip-address, amazon-vpc

我知道如何使用[apache VirtualHost](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)[从单个 EC2 实例运行多个域](http://calebogden.com/multiple-websites-amazon-ec2-linux-virtual-hosts/)，但我有兴趣为每个实例分配多个 IP 地址。

亚马逊最近添加了此功能。看来，为此，我必须定义一个 VPC 实例而不是经典的 EC2 实例。首先，我想知道是否可以将现有的 EC2 实例迁移到 VPC 类型以利用这一点。

此外，该文档非常令人困惑，并且有许多我不习惯的神秘术语（网络接口、VPC、路由表、DHCP 选项等），我*完全*迷失了！

**我的问题是：是否有一个易于遵循的分步教程可以帮助我设置/配置 VPC 实例并为其分配多个 IP 地址？**

我搜索了很多但没有找到任何东西，我对 EC2 / S3 / RDS 相当熟悉，但 VPC 是一个完全不同的野兽！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T03:57:05.303

这个不错，我刚用过，效果很好。

[https://github.com/niftylettuce/amazon-vpc-ec2-multiple-ip-addresses/blob/master/Readme.md](https://github.com/niftylettuce/amazon-vpc-ec2-multiple-ip-addresses/blob/master/Readme.md)

# c# - 如何测试 MongoDB 文档中的字符串字段不为空？

> ID：16064881
> 
> 赞同：7
> 
> 时间：2013-04-17T16:02:39.900
> 
> 标签：c#, mongodb, mongodb-query, mongodb-.net-driver

我正在尝试获取具有空字符串字段的文档数量。这个字段，我们称它为“Field_One”，存在于所有文档中（所以，要清楚，我不是试图查找该字段是否存在，我想在字段“Field_One”中查找哪些文档没有任何内容（空字符串） ”。

我尝试使用（使用 C# 驱动程序）：

```
collection.Find(Query.NE("Field_One", BsonNull.Value)).Count()
collection.Find(Query.NE("Field_One", BsonString.Null)).Count() 
```

甚至（有人在某处建议）：

```
collection.Find(Query.GT("Field_One", BsonString.Empty)).Count() 
```

但它不起作用（他们返回所有文件）。

另外，作为一个相关问题：这是获取集合中匹配文档数量的最佳方法吗？据我了解，它实际上不会将数据库中的文档检索到我的程序中，因此计数计算是在 MongoDB 服务器中完成的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-22T11:32:40.153

`BsonNull.Value`翻译成 null
`BsonString.Empty`翻译成 ""
`BsonObject.Create("")`也翻译成 ""

```
 collection.Find(Query.NE("Field_One", BsonString.Empty)).Count() 
```

如果该字段实际上填充有“”，则转换为`"Field_One": { "$ne": "" }`您正在寻找的内容

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-18T17:19:50.610

为了测试字符串不为空，在 Javascript 中它很简单：

```
collection.find({Field_One:{ $ne: "" }}) 
```

见[$ne](http://docs.mongodb.org/manual/reference/operator/query/ne/)。我无法帮助您将其翻译成 C# 驱动程序语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-17T07:20:37.523

假设您正在查询一个类的文档，如下所示：

```
public class MyClass {
        public string Field_One { get; set; }
        //... other attributes, constructors, methods etc...
} 
```

您还可以使用像这样的表达式 lambda 来编写查询，例如：

```
var res = collection.Find(Query<MyClass>.NE(m => m.Field_One, BsonString.Empty)).Count(); 
```

# java - 1.4 级别的源文件和 1.5 POM 更新的 j 测试类

> ID：16064884
> 
> 赞同：1
> 
> 时间：2013-04-17T16:02:41.847
> 
> 标签：java, maven

我正在为遗留代码编写一些单元测试，它在 java 1.4 编译器设置中。

但是我正在使用 powermock/easymock/junit4 等编写单元测试......这需要 1.5

该项目使用了一个父 pom，它声明源和目标是 1.4 我试图覆盖项目中的以下父 pom 设置，如下所示：

```
<build> 
    <plugins>   
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
                <testSource>1.5</testSource>
                <testTarget>1.5</testTarget>
            </configuration>
         </plugin>
    </plugins>
</build> 
```

但是，它仍然在我的测试文件中显示编译错误，因为注释只能与 JRE 1.5 一起使用

以下是父 pom 设置：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <optimize>true</optimize>
                <showDeprecation>true</showDeprecation>
                <source>1.4</source>
                <target>1.4</target>
            </configuration>
        </plugin> 
```

是否有任何其他设置可以覆盖？

# python - 多元线性回归中的归一化

> ID：16064887
> 
> 赞同：3
> 
> 时间：2013-04-17T16:02:48.757
> 
> 标签：python, statistics, regression, scikit-learn, linear-regression

我有一个数据集，我想为它建立一个多元线性回归模型。为了比较不同的自变量，我用它们的标准偏差对它们进行归一化。我用`sklearn.linear_model`这个。我认为这种标准化不会影响决定系数，即`R2`预测值；只有估计器的参数会不同。我在使用时得到了这个预期的结果`LinearRegression`，但是当我使用时结果不同`ElasticNet`。

我想知道我关于`R2`标准化期间值不变的假设是否有效。如果它无效，是否有另一种方法可以通过能够相对比较变量的重要性来实现我想要的？

```
import numpy as np
from sklearn.linear_model import ElasticNet, LinearRegression
from sklearn import datasets

# Load the data
diabetes = datasets.load_diabetes()
X = diabetes.data
y = diabetes.target
# Standardize data
X1 = X/X.std(0)

regrLinear = LinearRegression(normalize=False)
regrLinear.fit(X,y)

regrLinear.score(X,y)
0.51774942541329372

regrLinear.fit(X1,y)
regrLinear.score(X1,y)
0.51774942541329372

regrLinear = LinearRegression(normalize=True)
regrLinear.fit(X,y)
regrLinear.score(X,y)
0.51774942541329372

regrEN=ElasticNet(normalize=False)    
regrEN.fit(X,y)
regrEN.score(X,y)
0.00883477003833

regrEN.fit(X1,y)
regrEN.score(X1,y)
0.48426155538537963

regrEN=ElasticNet(normalize=True)
regrEN.fit(X,y)
regrEN.score(X,y)
0.008834770038326667 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T23:30:44.457

```
regrEN = ElasticNet(normalize=True)
regrEN.fit(X,y)
print regrEN.score(X,y)
0.00883477003833

regrEN.fit(X1,y)
print regrEN.score(X1,y)
0.00883477003833 
```

我让他们是一样的。我想知道您的脚本是如何使用 regr.score 运行的；可能是从您的示例中未包含的代码中打印其他内容？

# php - 如何使用 PHP 更新 MySQL 表中一行中的现有单元格

> ID：16064889
> 
> 赞同：0
> 
> 时间：2013-04-17T16:02:53.183
> 
> 标签：php, html

我有 MySQL 表，它有两列（名称和描述），我已经使用 HTML 表单在其中插入了一些数据。

但是，我试图弄清楚是否有办法让用户输入现有名称和不同的描述，以便更新该现有名称的描述，而不是使用现有名称和新描述添加新行。

这是我的PHP代码：

```
<html>
<head>
  <meta charset = "utf-8">
  <title>Search Results</title>
<style type = "text/css">
     body  { font-family: sans-serif; } 
     table { background-color: lightblue; 
             border-collapse: collapse; 
             border: 1px solid gray; }
     td    { padding: 5px; }
     tr:nth-child(odd) {
             background-color: white; }
  </style>
</head>
<body>
    <?php

        $db_connect = mysql_connect("hostname", "name", "password");
        $db_query = "SELECT * FROM urltable";

        // connect to MySQL
        if (!$db_connect)
        {
            die("Could not connect to database");
        }
        // open Products database
        if ( !mysql_select_db( "urls", $db_connect ) )
            die( "Could not open products database </body></html>" );

        $db_insert = "INSERT INTO urltable(URL, description) VALUES ('$URL', '$Description')";

        $db_insert_data = mysql_query($db_insert);

        if ($db_insert_data)
        {
            echo("<br>Input data is Added</br>");
        }
        else
        {
            echo("<br>Input data not Added</br>");
        }   

        // query Products database
        if ( !( $result = mysql_query( $db_query, $db_connect ) ) ) 
        {
            print( "<p>Could not execute query!</p>" );
            die( mysql_error() . "</body></html>" );
        } // end if

        mysql_close( $db_connect );

    ?><!-- end PHP script -->

     <table border="1">
        </br>
        <caption>URL TABLE</caption>
        </br>
        <?php

            // build table headings
            print( "<tr>" );
            print("<th>URL</th>");
            print("<th>Description</th>");
            print( "</tr>" );

            // fetch each record in result set
            while ( $row = mysql_fetch_row( $result ) )
            {
                // build table to display results
                print( "<tr>" );
                foreach ( $row as $value ) 
                    print( "<td>$value</td>" );
                print( "</tr>" );
            } // end while
        ?><!-- end PHP script -->
    </table>

    </br>
    <a href="insert.html">Home</a></br>

</body>
</html> 
```

现在它只会插入输入的任何数据，但我不知道如何仅在输入现有名称的情况下更新描述。我可以使用条件语句来检查现有名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:15:57.277

您应该查看 MySQL 中的 UPDATE 命令。

Erdem 的回答***是***无效查询。

它应该看起来像这样：

```
$db_update = "UPDATE urltable SET description = \"New description\" WHERE url = \"http://urlyouwanttoupdate.com\"";

mysql_query($db_update); 
```

补充乔所说的话。出于安全目的，您不能允许用户直接在查询中输入。这使您的数据库容易受到称为“SQL 注入”的攻击。网上已经有很多关于此的内容。

这是您正在使用的更新和插入功能的安全示例。

```
$safe_description = mysql_real_escape_string($Description);
$safe_url = mysql_real_escape_string($URL);

$db_update = "UPDATE urltable SET description=\"".$safe_description."\" WHERE url =\"".$safe_url."\"";
mysql_query($db_update); 
```

对于安全插入：

```
$db_insert = "INSERT INTO urltable(URL, description) VALUES (\"".$safe_url."\", \"".$safe_description."\")";

$db_insert_data = mysql_query($db_insert); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:08:45.130

我们使用更新。

```
"UPDATE tablename SET cloumnname = 'newname' WHERE ID = 'idoftheperson'" 
```

也不要使用`mysql_query()`请使用 PDO 库或 mysqli。

这是一个如何在 php 中使用 UPDATE 命令的教程。

[http://www.w3schools.com/php/php_mysql_update.asp](http://www.w3schools.com/php/php_mysql_update.asp)

如果要检查数据库的现有名称或 ID，则需要计算 mysql 中的数据。为此请这样做

```
 <?php
            /* Open a connection */
            $link = mysqli_connect("localhost", "my_user", "my_password", "world");

            /* check connection */
            if (mysqli_connect_errno()) {
                printf("Connect failed: %s\n", mysqli_connect_error());
                exit();
            }

            $query = "SELECT Name, CountryCode FROM City ORDER BY Name LIMIT 20";
            if ($stmt = mysqli_prepare($link, $query)) {

                /* execute query */
                mysqli_stmt_execute($stmt);

                /* store result */
                mysqli_stmt_store_result($stmt);

                 if(mysqli_stmt_num_rows($stmt) >0){
                    /* do the mysql update here */
                 }

                /* close statement */
                mysqli_stmt_close($stmt);
            }

            /* close connection */
            mysqli_close($link);
            ?> 
```

谢谢

# mysql - 我如何在“JOIN”上使用“WHERE”？

> ID：16064893
> 
> 赞同：0
> 
> 时间：2013-04-17T16:03:02.553
> 
> 标签：mysql, sql

我有这个 sql 代码

```
SELECT sites.id, sites.url, GROUP_CONCAT(categories.name,"|",categories.color SEPARATOR ",") AS categories
        FROM sites
        LEFT JOIN categories_data ON sites.id = categories_data.sites_id WHERE categories_data.deleted=0
        LEFT JOIN categories ON categories_data.categories_id = categories.id WHERE categories.deleted=0
        WHERE sites.deleted=0 GROUP BY sites.id' 
```

在哪里返回此错误

```
Database_Exception [ 1064 ]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LEFT JOIN categories ON categories_data.categories_id = categories.id WHERE cate' at line 4 [ SELECT sites.id, sites.url, GROUP_CONCAT(categories.name,"|",categories.color SEPARATOR ",") AS categories FROM sites LEFT JOIN categories_data ON sites.id = categories_data.sites_id WHERE categories_data.deleted=0 LEFT JOIN categories ON categories_data.categories_id = categories.id WHERE categories.deleted=0 WHERE sites.deleted=0 GROUP BY sites.id ] 
```

那么，我该如何使用`WHERE`呢`JOIN`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:04:36.920

您不能在联合表`WHERE`的子句上添加子句。*用条件运算符（ AND/OR*）`ON`分隔它们，

 *```
SELECT sites.id, 
       sites.url, 
       Group_concat(categories.name, '|', categories.color SEPARATOR ',') AS 
       categories 
FROM   sites 
       LEFT JOIN categories_data 
              ON sites.id = categories_data.sites_id 
                 AND categories_data.deleted = 0                  -- <<== HERE
       LEFT JOIN categories 
              ON categories_data.categories_id = categories.id 
                 AND categories.deleted = 0                       -- <<== HERE
WHERE  sites.deleted = 0 
GROUP  BY sites.id 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:04:44.117

只需使用`AND`

```
SELECT sites.id, sites.url, GROUP_CONCAT(categories.name,"|",categories.color SEPARATOR ",") AS categories
        FROM sites
        LEFT JOIN categories_data ON sites.id = categories_data.sites_id AND categories_data.deleted=0
        LEFT JOIN categories ON categories_data.categories_id = categories.id AND categories.deleted=0
        WHERE sites.deleted=0 GROUP BY sites.id' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:49:23.133

我认为上面已经提到过，但是您也可以在 WHERE 语句中指定所有这些过滤器。这可能是它的样子。

```
 SELECT sites.id, sites.url, 
    GROUP_CONCAT(categories.name,"|",categories.color SEPARATOR ",") AS categories

    FROM sites
     LEFT JOIN categories_data ON sites.id = categories_data.sites_id 
     LEFT JOIN categories ON categories_data.categories_id = categories.id

    WHERE 
     sites.deleted=0 
     and categories_data.deleted=0
     and categories.deleted=0

    GROUP BY sites.id' 
```

当您遇到错误时，在优化速度和负载之前以非常标准的格式尝试查询可能会有所帮助。SELECT...FROM...WHERE...GROUP BY 等*

# javascript - JavaScript 触摸启动

> ID：16064894
> 
> 赞同：0
> 
> 时间：2013-04-17T16:03:05.387
> 
> 标签：javascript, canvas

我对“touchstart”事件有疑问。我有一个按钮，我想触摸它。所以我做了这样的'touschstart'：

```
var button = document.getElementById('btn');   
button.addEventListener('touchstart', function(){something}); 
```

问题是“touchstart”使按钮只被点击一次。当用户仍然触摸它时，我希望按钮一直被“按下”。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:07:38.290

我相信你必须使用两个事件。和。`tocuhstart`_`touchend`

```
var button = document.getElementById('btn');   
button.addEventListener('touchstart', function(){// make the button pressed});
button.addEventListener('touchend', function(){// make the button unpressed}); 
```

# python - 如何在 HDF5 文件中保存 Python dtype('object')？

> ID：16064896
> 
> 赞同：2
> 
> 时间：2013-04-17T16:03:08.203
> 
> 标签：python, numpy, hdf5

我正在尝试将 .mat 文件中的数据加载到 python 中，以便可以将其保存在 HDF5 文件中。

问题是`scipy.io.loadmat`返回一个包含 dtype=[('counts', '|O4')]) 数组的字典

每当我尝试使用返回的数组之一创建数据集时，都会收到以下错误：

```
>> mat = scipy.io.loadmat('state-10.mat')
>> h = h5py.File('test.hdf5','w')
>> h.create_dataset('set', data=mat['ProteinComplex'])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/h5py/_hl/group.py", line 69, in create_dataset
    dsid = dataset.make_new_dset(self, shape, dtype, data, **kwds)
  File "/usr/lib/python2.7/dist-packages/h5py/_hl/dataset.py", line 88, in make_new_dset
    tid = h5t.py_create(dtype, logical=1)
  File "h5t.pyx", line 1332, in h5py.h5t.py_create (h5py/h5t.c:11600)
  File "h5t.pyx", line 1373, in h5py.h5t.py_create (h5py/h5t.c:11209)
  File "h5t.pyx", line 1311, in h5py.h5t._c_compound (h5py/h5t.c:10695)
  File "h5t.pyx", line 1332, in h5py.h5t.py_create (h5py/h5t.c:11600)
  File "h5t.pyx", line 1402, in h5py.h5t.py_create (h5py/h5t.c:11465)
TypeError: Object dtype dtype('object') has no native HDF5 equivalent 
```

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T16:32:56.870

原来的类型`mat['ProteinComplex']`是一个 scipy 多维数组（ndarray）。可以使用该方法将这些转换为列表`ndarray.tolist()`。如果我们将 nd 数组更改为列表，它将在使用 H5Py 创建数据集时起作用

```
>> mat = scipy.io.loadmat('state-10.mat')
>> h = h5py.File('test.hdf5','w')
>> protein_complex = mat['ProteinComplex'].tolist()
>> h.create_dataset('ProteinComplex', data=protein_complex) 
```

# c++ - 使用 STL 迭代器的模板构造函数

> ID：16064898
> 
> 赞同：0
> 
> 时间：2013-04-17T16:03:12.027
> 
> 标签：c++, templates, constructor

我正在写一个哈希表，但我遇到了一个困难。我想用标准容器（向量、列表等）的内容来初始化它，比如地图：
`map <string,int> m(a.begin(),a.end())`
我有以下类定义：`template <class key,class val,class hashik=std_hash> class hash_table`.
我定义了一个构造函数：

```
template <template <class> class C> hash_table(typename C<pair <key,val> >::iterator first,typename C<pair <key,val> >::iterator last)
{
    init();
    for(pair <key,val>* it=first;it!=last;++it)
        this->operator[](it->first)=it->second;
} 
```

但它不编译。*呼叫没有匹配的功能。*例如：

```
vector <pair <string,int> > a;
...
hash_table <string,int> m(a.begin(),a.end()); //compilation error 
```

我究竟做错了什么？您可以建议我阅读哪些有关模板的书籍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:15:28.320

您试图对您将接受的类型过于具体。要记住的关键是模板将匹配几乎任何东西，只要它编译。如果我正确地破译了你的代码，你有一个这样的类：

```
template <typename K, typename V> hash_table { /* ... */ }; 
```

这声明了一个带有 type 键和 type`K`值的哈希表`V`。要编写一个接受地图元素的构造函数，请声明构造函数，使其也是一个模板：

```
template <typename Iter>
hash_table(Iter first, Iter last)
{
    init();
    for (Iter it = first; it != last; ++it)
        this->operator[](it->first)=it->second;
} 
```

这将自动匹配任何可以取消引用以获取`first`和`second`成员的迭代器。`map`在标准容器中，包括`multimap`及其`unordered_`表亲。这应该足以让你开始。

另请注意，当您需要一种您不知道如何拼写的类型时，这是一个有用的技巧，例如复杂的函数指针或 lambda（您根本无法拼写）。

# jquery - jQuery 没有出现在第三个选项卡下

> ID：16064901
> 
> 赞同：1
> 
> 时间：2013-04-17T16:03:16.867
> 
> 标签：jquery

在第三个选项卡“联系”中，我无法显示任何内容，我试图添加“你好”但它没有添加，我错过了 div 还是什么？我看不出问题出在哪里。将来我会做备份！

在线示例： [http ://www.taffatech.com/Demo.html](http://www.taffatech.com/Demo.html)

正文代码：

```
<body background="images/back.jpg">

<div id="dialog-modal" title="Register new player!">
<form action="#" method="post">
<p>Username: <input id="Username" type="text">  &nbsp;&nbsp;&nbsp; Male: <input     type="radio" name="sex" value="Male"> &nbsp;&nbsp; Female: <input type="radio" name="sex" value="Female"> <br><br>
Password: <input id="Password" type="password">  <br><br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;D/O/B: <input id="datepicker" type="text"><br><br>
     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Email: <input id="Email" type="text">  
     <br></p> 
    <div style="float:left"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="submit" id="submit" value="  Submit  " /></div>
      </form>
    <div style="float:right"><img id="logo" src="images/logo.png" /> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<Font SIZE ="4"> Copyright 2013</font></div>
</div>

 <div id="tabs">
<ul>
<li><a href="#tabs-1">Main</a></li>
<li><a href="#tabs-2">Play</a></li>
<li><a href="#tabs-3">Contact</a></li>
</ul>
<div id="tabs-1">

<div id="accordion">
<h3>Welcome</h3>
<div>
<p>
Hello and welcome we are currently in development, check back soon!
</p>
</div>
<h3>Games</h3>
<div>
<p>
As of yet we are just testing and getting used to jQuery and jQuery UI!!
</p>
</div>
<h3>About</h3>
<div>
<p>
My name is Wayne Daly and I study Computer Science in CIT.
I'm interested in:
</p>
<ul>
  <li>Making games</li>
  <li>Designing visual programs</li>
  <li>Coding!</li>
</ul>
</div>
<h3>Coming soon!</h3>
<div>
<p>
Soon I hope to have made my first 'proper' game in Canvas and have it online.
</p>
<p>
- Currently learning the in's and out's of jQuery and Canvas.
- Designing websites for clients
- Doing exams in college 
</p>
</div>
</div>
</div>

<div id="tabs-2">

 <div id="accordion2">

<h3>Play Game 1</h3>
<div>
<p>
Game 1 is in development
<div align="center">
<canvas id="myCanvas" width="600" height="400" align="center" style="border:1px solid #ffffff;">
 </canvas>
 </div>
 </p>
 </div>
 <h3>Play Game 2</h3>
 <div>
 <p>
 Game 2 is in development
 </p>
 </div>
 <h3>Play Game 3</h3>
 <div>
 <p>
 Game 3 is in development
 </p>

 </div>

 </div>
 <div id="tabs-3">
 hello

 </div>

  </div>

  </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:09:03.170

标记缺少关闭`</div>`，因此第 3 个^(选项)卡的内容实际上在第 2^个选项卡内（但隐藏）！

在将解决问题`</div>`之前添加另一个。`<div id="tabs-3">`

此页面上还有其他验证错误，因此我建议通过[W3C Validator](http://validator.w3.org/)运行您的页面以更正*所有*错误。

# c# - 使用存储库的工作单元模式中的依赖注入

> ID：16064902
> 
> 赞同：46
> 
> 时间：2013-04-17T16:03:16.697
> 
> 标签：c#, entity-framework, dependency-injection, unit-of-work

[我想创建一个工作单元类，它以与此类](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)似的方式环绕存储库。

我遇到的问题是尝试通过用 IRepository 接口替换示例中的通用存储库来实现依赖注入。在链接文章的 uow 中，他们使用 getter 来检查存储库是否已实例化，如果没有，则实例化它。

```
public GenericRepository<Department> DepartmentRepository
{
    get
    {
        if (this.departmentRepository == null)
        {
            this.departmentRepository = new GenericRepository<Department>(context);
        }
        return departmentRepository;
    }
} 
```

这是强耦合的。

我可以看到两种解决方法。

1.  使用构造函数注入。
2.  使用二传手注入。

1 的问题是，如果我注入所有存储库，我必须实例化每个存储库，即使我不在那个特定的工作单元实例中使用它们。因此会产生这样做的开销。我想象使用一个数据库范围的工作单元类，因此这将导致大量不必要的实例化和巨大的构造函数。

2 的问题是很容易忘记设置并以空引用异常结束。

在这种情况下是否有任何最佳实践？还有其他我错过的选择吗？

我刚刚开始依赖注入，并且已经完成了我能找到的关于该主题的所有研究，但我可能遗漏了一些关键的东西。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-18T14:36:09.877

解决这个问题的一种方法是不让通过容器注入`UnitOfWork`创建每个负责`Repository`，而是让每个负责`Repository`确保`UnitOfWork`在实例化时知道它的存在。

这将确保

*   你`UnitOfWork`不需要为每个新的`Repository`
*   您没有使用服务定位器（许多人认为是[反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern/)）

最好用一些代码来演示 - 我使用[SimpleInjector](http://simpleinjector.codeplex.com/)，所以示例基于此：

从`Repository`抽象开始：

```
public interface IRepository 
{
    void Submit();
}
public interface IRepository<T> :IRepository where T : class { }
public abstract class GenericRepository<T> : IRepository<T> where T : class { } 
```

和`UnitOfWork`

```
public interface IUnitOfWork
{
    void Register(IRepository repository);
    void Commit();
} 
```

每个都`Repository` *必须*向 注册自己，`UnitOfWork`这可以通过更改抽象父类`GenericRepository`来确保完成：

```
public abstract class GenericRepository<T> : IRepository<T> where T : class
{
    public GenericRepository(IUnitOfWork unitOfWork)
    {
        unitOfWork.Register(this);
    }
} 
```

每个实数都`Repository`继承自`GenericRepository`：

```
public class Department { }
public class Student { }

public class DepartmentRepository : GenericRepository<Department> 
{
    public DepartmentRepository(IUnitOfWork unitOfWork): base(unitOfWork) { }
}

public class StudentRepository : GenericRepository<Student>
{
    public StudentRepository(IUnitOfWork unitOfWork) : base(unitOfWork) { }
} 
```

添加物理实现，`UnitOfWork`一切就绪：

```
public class UnitOfWork : IUnitOfWork
{
    private readonly Dictionary<string, IRepository> _repositories;
    public UnitOfWork()
    {
        _repositories = new Dictionary<string, IRepository>();
    }

    public void Register(IRepository repository)
    {
        _repositories.Add(repository.GetType().Name, repository);
    }

    public void Commit()
    {
        _repositories.ToList().ForEach(x => x.Value.Submit());
    }
} 
```

可以将容器注册设置为自动获取所有定义的实例`IRepository`并在生命周期范围内注册它们，以确保它们在事务的生命周期内都存在：

```
public static class BootStrapper
{
    public static void Configure(Container container)
    {
        var lifetimeScope = new LifetimeScopeLifestyle();

        container.Register<IUnitOfWork, UnitOfWork>(lifetimeScope);

        container.RegisterManyForOpenGeneric(
            typeof(IRepository<>),
            lifetimeScope,
            typeof(IRepository<>).Assembly);
    }
} 
```

通过这些抽象和围绕 DI 构建的体系结构，您可以`UnitOfWork`了解`Repository`在任何服务调用中已实例化的所有 '，并且您可以在编译时验证所有存储库都已定义。您的代码[对扩展开放但对修改关闭](http://en.wikipedia.org/wiki/Open/closed_principle)。

要测试所有这些 - 添加这些类

```
public class SomeActivity
{
    public SomeActivity(IRepository<Department> departments) { }
}

public class MainActivity
{
    private readonly IUnitOfWork _unitOfWork;
    public MainActivity(IUnitOfWork unitOfWork, SomeActivity activity) 
    {
        _unitOfWork = unitOfWork;
    }

    public void test()
    {
        _unitOfWork.Commit();
    }
} 
```

将这些行添加到`BootStrapper.Configure()`

```
//register the test classes
container.Register<SomeActivity>();
container.Register<MainActivity>(); 
```

对代码行设置一个断点：

```
_repositories.ToList().ForEach(x => x.Value.Submit()); 
```

最后，运行这个控制台测试代码：

```
class Program
{
    static void Main(string[] args)
    {
        Container container = new Container();
        BootStrapper.Configure(container);
        container.Verify();
        using (container.BeginLifetimeScope())
        {
            MainActivity entryPoint = container.GetInstance<MainActivity>();
            entryPoint.test();
        }
    }
} 
```

您会发现代码在断点处停止，并且您有一个`IRepository`准备就绪并等待对`Submit()`数据库进行任何更改的活动实例。

您可以装饰您的 UnitOfWork 来处理事务等。此时我将遵从强大的 .NetJunkie 并建议您[在此处](http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=91)和[此处](http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=92)阅读这两篇文章。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T08:30:48.827

而不是注入存储库实例，而是注入将负责创建这些实例的单个工厂对象。然后，您的吸气剂将使用该工厂。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-24T03:29:32.087

我的解决方案是 UnitOfWork 仍然负责创建存储库，但我在 UnitOfWork 中创建了一个**GetRepository()**工厂方法来做到这一点。

```
public interface IUnitOfWork : IDisposable
{
    T GetRepository<T>() where T : class;
    void Save();
}

public class UnitOfWork : IUnitOfWork
{
    private Model1 db;

    public UnitOfWork() :  this(new Model1()) { }

    public UnitOfWork(TSRModel1 dbContext)
    {
        db = dbContext;
    }

    public T GetRepository<T>() where T : class
    {          
        var result = (T)Activator.CreateInstance(typeof(T), db);
        if (result != null)
        {
            return result;
        }
        return null;
    }

    public void Save()
    {
        db.SaveChanges();
    }

    private bool disposed = false;

    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                db.Dispose();
            }
        }
        this.disposed = true;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }
}

public class TestRepository : GenericRepository<Test>, ITestRepository
{
    public TestRepository(Model1 db)
       : base(db)
    {
    }
}

public class TestManager: ITestManager
{
    private IUnitOfWork unitOfWork;
    private ITestRepository testRepository;
    public TestManager(IUnitOfWork unitOfWork)
    {
        this.unitOfWork = unitOfWork;
        testRepository = unitOfWork.GetRepository<TestRepository>();
    }

} 
```

# function - 向两个用户发送确认电子邮件

> ID：16064913
> 
> 赞同：2
> 
> 时间：2013-04-17T16:03:38.050
> 
> 标签：function, parameters, php

我正在尝试向两名成员发送确认电子邮件，但我不知道该怎么做。以下仅是相关代码。我以前在我的网站中使用 PHP 邮件作为联系页面，这很好，但我不知道如何将它发送给多个人。你能告诉我我做错了什么吗？

功能交换：

```
 //full code for exchange not included

// Redirect to index page if exchange is successful  
if ($success){
        sendMail($coinsAvail['Email'],$valueResultAdd['Email'],$valueResultAdd['OddJobName']);
        header("location: index.php?success=yes&email={$valueResultAdd['Email']}");
    }
        else{
            if($success)
             header("location: index.php?success=no&email={$valueResultAdd['Email']}");
        }
        exit();

function to send email
    }
    //Send a confirmation email to both members
    function sendMail($purchaseEmail, $oddjobEmail, $oddJobName)
    {
        $to = "$purchaseEmail, $oddjobEmail";
        $subject = "$oddJobName";
        $message = "Hello! $oddJobName has been requested by $purchaseEmail.";
        $from = "someonelse@example.com";
        $headers = "From:" . $from;
        mail($to,$subject,$message,$headers);
        echo "Mail Sent.";  
    } 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:10:35.973

根据[邮件 PHP 文档](http://php.net/manual/en/function.mail.php)

> 此字符串的格式必须符合 » RFC 2822。一些示例如下：
> 
> user@example.com user@example.com, anotheruser@example.com 用户用户, 另一个用户

因此，在您的情况下，您可以这样做：

```
<?php
// multiple recipients
$to  = 'aidan@example.com' . ', '; // note the comma
$to .= 'wez@example.com';

mail($to, 'the subject', 'the message', null,
   '-fwebmaster@example.com');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:10:17.783

这应该可行，假设 $coinsAvail['Email'] 和 $valueResultAdd['Email'] 都是电子邮件地址。我会使用 echo($to); 在函数中确保 $to 字符串看起来像你想要的那样。

# c# - 属性或方法或两者兼而有之？

> ID：16064916
> 
> 赞同：0
> 
> 时间：2013-04-17T16:03:45.673
> 
> 标签：c#, .net, coding-style

在 .NET 库和许多第三方库中，我可以看到如何更改内部（私有）成员值有一些约定，它们支持属性（.NET 属性）或方法（这些在 java 中常用作为 Setter 和 Getter）或两者都适用于程序员。

我想知道何时（以及为什么）使用属性、方法或两者兼而有之。例如，可以使用**Visible**属性（在 Windows 窗体中）或调用方法**Show()**或**Hide()来更改控件的可见性**. 有一些值（我知道有一些内部/私有值）只能通过调用方法（如 setter）来更改。在设计自己的控件、类时，我有点犹豫是选择属性还是方法（或者两者都支持？），事实上，选择其中一个也可以（Java 是一个仅使用方法的示例）。我知道属性相对于方法（作为 getter 和 setter）的优势，但如果是这样，为什么我们必须在某些情况下使用方法，它们会呈现给程序员甚至替换属性。我对此有点困惑，对我来说（正如我所说），仅使用方法时我感觉还可以（就像我在 java 中所做的那样，这还不错:)。

我想知道您的经验以及您对此的约定。我喜欢遵循编程中的标准约定（针对每种编程环境和每种语言）来区分它们。不像一些发明自己的风格的人，这些风格对其他程序员来说有点难以辨认，例如在 C# 中使用 C++ 命名约定（甚至是 PHP 命名约定？）？对我来说有点奇怪，对不起。

请分享，谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T16:06:23.270

> 我知道属性相对于方法（作为 getter 和 setter）的优势，但如果是这样，为什么我们必须在某些情况下使用方法，它们会呈现给程序员甚至替换属性。

通常，使用类时期望属性将“快速”且没有副作用。另一方面，一种方法表明“某事”将会发生。

在选择是否基于属性或方法公开 API 时，我会尝试查看值/方法/等代表什么。如果它是一个*值*，并且可以直接返回（或非常快速地获取而几乎没有副作用），那么属性更有意义。如果是操作，那么方法更有意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T16:15:31.477

举个例子：将 Visible 属性设置为 false 不会立即隐藏控件——该属性不包含任何代码或调用任何隐藏控件的代码；相反，它会更改控件的状态，以便稍后将其隐藏（通过其他代码）。相反，Hide 方法会立即隐藏控件；Hide 方法包含实际隐藏控件的代码或调用代码。

将 Visible 设置为 false 可能会隐藏控件（几乎立即），但这是因为正在运行的其他代码检测到对象的状态已更改（Visible 属性已更改）并通过实际使控件不可见来立即响应。

我在这里笼统地说，没有参考任何实际的代码库；完全可以对 Visible 属性进行编码，因此它实际上确实隐藏了控件，但这违反了属性没有副作用的通常约定。

因此，属性改变了对象的状态，而方法实际上做了一些事情（这可能会也可能不会改变对象的状态）。

# javascript - Google Apps 脚本为用户添加文件夹

> ID：16064917
> 
> 赞同：0
> 
> 时间：2013-04-17T16:03:47.963
> 
> 标签：javascript, google-apps-script

我们有一组所有员工都需要访问的共享文件夹。他们已被邀请，但云端硬盘不会自动将文件夹添加到他们的“我的云端硬盘”，因为他们是作为一个群组（100 多人）被邀请的。

我正在尝试创建一个脚本，该脚本会自动将这些文件夹添加到他们的云端硬盘中。目前，当脚本作为个人执行时，我已经开始工作了。

```
 var root = DocsList.getRootFolder();
  var folderIds = ["folderID", "folderID2"];
  folderIds.map( function(id) { DocsList.getFolderById(id).addToFolder(root) } ); 
```

这可行，但是有大约 100 个用户，他们都对计算机知之甚少，并且通过 iPad 访问，理想的情况是我作为管理员为每个用户执行此操作。

有没有办法可以使用`UserManager`API 来做到这一点？这样我就可以根据他们的组快速将文件夹添加到正确的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:53:11.070

除非您让每个用户都运行该脚本，否则您无法从应用程序脚本执行此操作。为此，您可以发布它并从站点运行它，但用户需要批准该脚本。

如果您想模拟用户（请参阅驱动器 api 中的模拟），您可以使用 appengine 中的驱动器 api 来实现，这需要 2legged oauth 等。从那里你可以在没有用户干预的情况下运行它。

# python - Tweepy API 调用不起作用

> ID：16064919
> 
> 赞同：3
> 
> 时间：2013-04-17T16:04:04.403
> 
> 标签：python, tweepy

我开始在一个项目中使用 Tweepy。到目前为止，我已经完成了以下工作。

*   验证
*   获取流
*   过滤流
*   更新状态

但是，我无法使某些 API 调用正常工作，它们中的大多数都返回`API object has no attribute ______`

例如：

```
api = tweepy.API(auth)
api.trends() 
```

返回`API object has no attribute trends`

有谁知道文档是否已过时或者我做错了什么？

[我正在使用的文档](http://pythonhosted.org/tweepy/html/api.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T16:16:38.770

您参考的文档是 1.4 版，但当前发布的版本是 1.13 和 2.0；我希望后者尤其不再与该文档匹配。

但是，[Tweepy API](http://tweepy.github.io/)直接反映了[Twitter API](https://dev.twitter.com/docs)。

例如，对于趋势，有几种*不同*的方法：

*   [`/trends/place`](https://dev.twitter.com/docs/api/1.1/get/trends/place)
*   [`/trends/available`](https://dev.twitter.com/docs/api/1.1/get/trends/available)
*   [`/trends/closest`](https://dev.twitter.com/docs/api/1.1/get/trends/closest)

因此，`api.trends_available()`应该可以正常工作；用下划线替换路径分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T20:04:20.323

对于 woeid 代码，我猜 api.trends_place(woeid) 工作正常。例如，如果您想获取世界上的热门话题，只需替换 woeid = 1 或印度 = 23424848。同样，您也可以为其他地理位置这样做。同样 api.trends_closest(woeid) 和 api.trends_available() 适用于 tweepy 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:09:10.943

看起来它确实可能是不正确的文档。我建议看看：

[https://github.com/tweepy/tweepy/blob/master/tweepy/api.py](https://github.com/tweepy/tweepy/blob/master/tweepy/api.py) 可以搜索趋势，就能看到api有哪些属性。

```
 api.trends_available 
```

应该做的伎俩。

Tweepy 反映了 twitter api，因此检查那里可以让您了解可用的内容。

# .htaccess - 将一些 url 重定向到 .htaccess 中的 https

> ID：16064921
> 
> 赞同：1
> 
> 时间：2013-04-17T16:04:08.790
> 
> 标签：.htaccess, redirect, apache2

我希望将此网址重定向到 https：

```
www.example.com/iscrizioni
www.example.com/inscripciones
www.example.com/inscripcions 
```

和所有其他人到 http

我怎么能在htaccess中做到这一点？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:43:44.487

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$ [NC]
RewriteCond %{HTTPS} off
RewriteRule ^/?(iscrizioni|inscripciones|inscripcions) https://www.example.com%{REQUEST_URI} [L,R]

RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$ [NC]
RewriteCond %{HTTPS} on
RewriteRule !^/?(iscrizioni|inscripciones|inscripcions) http://www.example.com%{REQUEST_URI} [L,R] 
```

# c++ - 用于快速文件散列的散列算法是什么？

> ID：16064923
> 
> 赞同：1
> 
> 时间：2013-04-17T16:04:13.487
> 
> 标签：c++, hash

正如标题所说，我正在寻找的是最好的通用散列算法。散列一个 10mb 左右的文件应该相对较快，并且应该尽可能安全以避免冲突。

此外，将不胜感激提供到 C++ 实现的链接，最好是具有允许其在免费但闭源应用程序中使用的许可证的链接，如果可能，还可以在付费的闭源应用程序中使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T16:16:55.060

我会说，在散列文件时，您的瓶颈很可能是文件 I/O，而不是散列算法本身。显然，除非您选择一个*非常*慢的哈希算法（我知道主流使用中没有这么慢的），或者您的硬件非常不寻常和奇特，否则这种观察结果是成立的。

给你一些（非常不准确的）数字，加密哈希算法的大多数好的实现（可能比你需要的要强大得多）运行速度为每秒数百兆字节或几千兆字节，但大多数常见的磁盘系统运行速度为数十兆字节或每秒几百兆字节。

请注意，在这些（非常粗略的）数字中，我忽略了文件系统和操作系统的开销，并且我假设您将使用加密哈希算法（通常比简单的算法慢。）

总而言之，我的建议是您只需选择像 MD5 或 SHA-1 或 SHA-256 （这些都是加密哈希）这样的东西，它们有很多好的、快速和免费的实现，并且实际上消除了任何冲突的机会。与其选择快速但劣质的哈希算法，不如优化您的 I/O（通过对文件进行异步/非阻塞读取），因为这就是瓶颈所在。

以下是一些用于 C/C++ 的加密库，它们实现了各种散列函数，并拥有适合您的用例的许可证：

1.  [加密++](http://cryptopp.com/)
2.  [牡丹](http://botan.randombit.net/)
3.  [OpenSSL](http://www.openssl.org/)

# webkit - 带有 LiTE 工具包的 WebkitDFB - Web 视图中未捕获 Tab 键

> ID：16064935
> 
> 赞同：0
> 
> 时间：2013-04-17T16:04:47.943
> 
> 标签：webkit, directfb

我正在尝试使用 WebkitDFB r124228 树。

WebView 无法接收 Tab 键事件。我不确定为什么？我尝试在 LiTE 程序中处理键事件，它似乎捕获了 TAB 键。但是 WebView 中的 Javascript 代码无法捕获 TAB 键。所有其他键，甚至 shift、ctrl 和 alt 修饰符都被捕获。

我正在使用内置程序 Tools/lite_web/main.c

任何帮助都非常感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:41:00.637

我发现了问题。在 LiTE 工具包中，他们试图处理 DIKI_TAB 键以将 Lite_Box 元素的焦点更改为窗口的下一个兄弟。所以那里的事件被消耗掉了。

但实际上该`focus_traverse`操作还没有做任何事情。因此，我没有使用事件，而是让它通过`focus_traverse`然后继续到 webview 事件处理程序。

我正在使用 LiTE-0.8.10。

源文件：*lite/window.c +2423*

调整`return focus_traverse(window);`

至`focus_traverse(window);`

在以后的 LiTE Toolkit 版本中也没有修复它。

# c++ - 如何改进存储许多结果的结构？

> ID：16064937
> 
> 赞同：3
> 
> 时间：2013-04-17T16:04:57.197
> 
> 标签：c++, c++11, polygons

我有一个`Polygon`具有以下签名的结构和函数

```
Polygon myfunction(Polygon &pol1, Polygon &pol2, int rot1, int rot2); 
```

其中 pol1 和 pol2 是`Polygon`s，rot1 和 rot2 是应用于 pol1 和 pol2 的旋转。

我需要存储`myfunction`应用于一组多边形和一组允许旋转的所有结果。

因此，例如，如果我有 100 个多边形和 4 个允许旋转，我需要存储 100*100*4*4 = 160000 个多边形。我知道我需要很多内存，但我可以接受。

目前我将它们存储在这样的容器中：

```
vector<vector<vector<vector<Polygon>> results; 
```

这样`results[pol1][pol2][rot1][rot2];`我就得到了正确的多边形。

我知道访问单个结果可能效率很低，那么我该如何改进呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:12:38.450

这取决于很多事情，我的解决方案是混合[`std::tuple`](http://en.cppreference.com/w/cpp/utility/tuple)和[`std::map`](http://en.cppreference.com/w/cpp/container/map)

```
typedef std::tuple<Polygon , Polygon , int, int> Params;

std::map<Params, Polygon> results; 
```

它将参数映射到结果。在这种情况下，您可以有效地找到特定输入的结果。

要使用，您必须重载`operator<`for`Polygon`因为`std::map`：

```
struct Polygon
{
// ...
};

inline bool operator<(const Polygon &p1, const Polygon &p2)
{
    return ...;
}

Polygon p1, p2, p3;

// ...

results.insert(std::make_pair(std::make_tuple(p1, p2, 1, 2), p3)); 
```

# ios - 获取对当前堆栈上的视图控制器的引用

> ID：16064945
> 
> 赞同：2
> 
> 时间：2013-04-17T16:05:18.977
> 
> 标签：ios, uiview, uiviewcontroller, uistoryboard

如何创建从一个控制器到另一个控制器的指针，该控制器已经在堆栈上并由 StoryBoard 创建。

例如，我使用该方法`instantiateViewControllerWithIdentifier`将视图控制器加载到堆栈/屏幕上。

我知道这背后还有另一个控制器，仍然加载称为 InitialViewController（类）。如何获得我知道的控制器的引用/指针。

如果我尝试从 self/navigationController 注销presentingViewController 或presentingViewController，它们会返回null。NSLog(@"presented: %@",self.navigationController.presentedViewController);

编辑 - 有关应用程序中视图控制器的更多信息

1.  [加载的初始视图控制器（ ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)的子类）
2.  取决于用户是否登录

    已加载欢迎视图控制器（这是一个导航堆栈，包括欢迎/登录/注册） 已加载主视图控制器（以家庭 VC 为根的导航堆栈）

基本上，初始视图控制器具有 topViewController 的属性，该属性设置为 Home（导航堆栈）或 Welcome（导航堆栈）。

初始视图控制器始终在当前显示器上（只是从未见过）。

我如何引用它，或创建指向它的指针。例如，如果我在 Login VC 的 imp 文件中，我如何控制/链接到初始视图控制器上的视图而不用 alloc/init 重新创建它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T16:28:53.453

If you are using UITabBarController, you can get references to its child UIViewControllers via:

```
[myTabBarController objectAtIndex:index];
NSLog(@"Selected view controller class type: %@, selected index: %d", [myTabBarController selectedViewController], [myTabBarController selectedIndex]); 
```

The zero-based indexing scheme follows the order of the tabs as you've set them up, whether programmatically or through IB (leftmost tab = index 0).

Because the UIViewController reference you appear to be searching for seems to be the rootViewController (because of the way you named it; 'InitialViewController'), you can also try this in your appDelegate. This will take 5 seconds:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary     *)launchOptions
{

    NSLog(@"self.window.rootViewController = %@", NSStringFromClass([self.window.rootViewController class]));

    UIViewController *myRootViewController = self.window.rootViewController;

} 
```

Let me know if that does the trick :)

Whether you're using a UITabBarController or UINavigationController, I'm certain one of those is your rootViewController. Once you grab the reference to it, the rest is pretty easy:

```
InitialViewController* myInitialViewController;

for (UIViewController *vc in [myRootViewController childViewControllers]) {
    if([vc isKindOfClass:[InitialViewController class]]){
        //Store this reference in a local/global variable or a property, 
        //or simply perform some logic on the vc pointer if you don't need to store it.
        myInitialViewController = (InitialViewController *)vc; //Example & reminder to cast your reference
    }
} 
```

EDIT BASED ON NEW DETAILS FOUND IN COMMENTS:

Ok, run this code in your topViewController's viewDidLoad or viewWillAppear:

```
//You have to import this class in order to reference it
#import "MESHomeViewController.h"

//Global variable for storing the reference (you can make this a property if you'd like)
MESHomeViewController *myHomeVC;

int i = 0;
for (UIViewController *vc in [self.slidingViewController childViewControllers]) {
    NSLog(@"Current vc at index %d = %@", i, [vc class]);

    if ([vc isKindOfClass:[MESHomeViewController class]]) {

        NSLog(@"Found MESHomeViewController instance - [[self.slidingViewController childViewControllers] objectAtIndex:%d]", i);
        myHomeVC = vc;
        break;

    }
    i++;
} 
```

See if the reference is available to you there. If it is, your console will print out the class name of your HomeViewController.

# javascript - 函数的变量范围

> ID：16064947
> 
> 赞同：3
> 
> 时间：2013-04-17T16:05:22.840
> 
> 标签：javascript, function, scope

我执行这样的功能：

```
var a = 123;
function f() { 
  alert(a);
  var a = 9;
} 
f(); 
```

结果是`undefined`，为什么会这样？为什么不是`123`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T16:07:39.350

您的函数实际上编译为：

```
function f() {
  var a; 
  alert(a);
  a = 9;
} 
```

因为变量提升：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var#var_hoisting](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var#var_hoisting)

因此，您的函数重新声明`a`为局部变量，其值为`undefined`, `alert`s 它，然后将其值重新设置为`9`。

在 的时候`alert`，它的价值是`undefined`因为吊装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:12:26.273

如果您`a`再次在函数语法中声明，它将成为一个新变量。如果您想使用之前的值 123，那么您不应该包含该`var a = 9`语句，因为它会创建一个新变量。这个可以详细解释一下： [JavaScript中变量的作用域是什么？](https://stackoverflow.com/questions/500431/javascript-variable-scope)

# ios - 从 Preference Bundle 中读取 BOOL 值

> ID：16064949
> 
> 赞同：0
> 
> 时间：2013-04-17T16:05:30.460
> 
> 标签：ios, jailbreak, tweak

我正在尝试从 PSSwitchCell 读取 BOOL 值，但 BOOL 一直都是正确的。这是我的代码（徽标调整（iOSopendev））

这是 .xm 文件，我使用 iosopendev 徽标调整模板和简单的首选项加载器。

另外，我知道这只是一个简单的调整，但我正在学习这一切是如何运作的。我看过网上的教程，但我似乎不明白为什么这不起作用。

```
#import <UIKit/UIKit.h>
#define plist_path @"/Library/PreferenceLoader/Preferences/MyTweak.plist" 

#define listenToNotification$withCallBack(notification, callback);CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), NULL, (CFNotificationCallback)&callback, CFSTR(notification), NULL, CFNotificationSuspensionBehaviorHold);
%hook SBApplicationIcon

+ (id)sharedInstance
{
%log;

return %orig;
}

static NSMutableDictionary *plistDict = nil;
static void loadSettings(void) {
if (plistDict) {
    [plistDict release];
    plistDict = nil;
}
plistDict = [[NSMutableDictionary alloc] initWithContentsOfFile:plist_path];

}
-(void)launch
{
    NSString *number = [[[plistDict objectForKey:@"enabled"] intValue];

    if ([number isEqualto:@"1"]) {
    NSString *appName = [self displayName];
    NSString *message = [NSString stringWithFormat:@"The app %@ has been launched", appName, nil];
    UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:appName message:message delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
      alert1.delegate = self;
    [alert1 show];
    [alert1 release]; }
else {
    //Do nothing!
}
%orig;
}

- (void)messageWithNoReturnAndOneArgument:(id)originalArgument
{
%log;

%orig(originalArgument);

// or, for exmaple, you could use a custom value instead of the original argument: %orig(customValue);
}

- (id)messageWithReturnAndNoArguments
{
    %log;
    id originalReturnOfMessage = %orig;

// for example, you could modify the original return value before returning it:   [SomeOtherClass doSomethingToThisObject:originalReturnOfMessage];

return originalReturnOfMessage;
}

%end
%ctor {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    %init;
    listenToNotification$withCallBack("dylankelly.MyDev.MyTweak-preferencesChanged", loadSettings);
    loadSettings();
    [pool drain];
} 
```

这是我的 plist（它的一部分）文件，它显示在设置中。

```
<dict>
    <key>cell</key>
        <string>PSSwitchCell</string>
        <key>default</key>
        <integer>0</integer>
        <key>defaults</key>
        <string>dylankelly.MyDev.MyTweak</string>
        <key>TrueValue</key>
        <integer>1</integer>
        <key>FalseValue</key>
        <integer>0</integer>
        <key>key</key>
        <string>enabled</string>
        <key>label</key>
        <string>Show</string>
        <key>PostNotification</key>
        <string>dylankelly.MyDev.MyTweak-preferencesChanged</string>

</dict> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:24:21.813

您不能将 BOOL 存储在 plist 或字典中，因为它不是对象。将您的值保存为 NSNumbers；@(0) 为假，@(1) 为真。

您可以将以下数据类型作为值存储在 .plist 文件中：

```
-NSArray 
-NSMutableArray 
-NSDictionary 
-NSMutableDictionary 
-NSData
-NSMutableData 
-NSString 
-NSMutableString 
-NSNumber 
-NSDate 
```

# php - 尽管隐私设置设置为启用所有 cookie，但 IE 未读取 cookie

> ID：16064953
> 
> 赞同：0
> 
> 时间：2013-04-17T16:05:39.187
> 
> 标签：php, cookies

我有一个打印所有 cookie 的小测试页面，如果 $_COOKIE['TEST'] 未设置，则它会创建 cookie 记录。

```
<?php

if (!isset($_COOKIE['TEST']) ) {
    $now = time();
    setcookie("TEST", $now, $now+2592000);
}
else { 
    print_r($_COOKIE);
}
?> 
```

这在 Chrome 和 IE 8 上适用于我测试过的其他 3 台 PC。第一次查看页面时，浏览器会创建一个 cookie。在第二次访问时，它会打印记录。输出是这样的：

> 数组（[测试] => 1366214517）

但是，在一台装有 IE8 的 PC 上，这不起作用。我担心这个问题可能会发生在其他人身上。在有问题的机器上：

*   隐私设置设置为低

*   我还按照以下步骤在“隐私”>“站点”下明确允许该站点的 cookie：http: [//windows.microsoft.com/en-GB/windows-vista/block-or-allow-cookies](http://windows.microsoft.com/en-GB/windows-vista/block-or-allow-cookies)

*   在查看 > 网页隐私政策下，隐私报告显示“根据您的隐私设置，没有 cookie 被限制或阻止”。它说接受 Cookie

*   我已经用 JavaScript 和 PHP 检查了服务器时间的 PC 时间，并且两者都是内联的（当使用带有 cookie 过期的较大页面进行测试时）

我将不胜感激对这个问题的任何见解。

非常感谢。

**更新**我在 cookie 中添加了过期时间

**更新 2**如果我从第一个 if 语句中删除 set cookie（当 cookie 应该已经保存在以前的页面视图中时），则 IE 开发人员工具显示没有 cookie 记录。重新设置 cookie 后，它会打印以下消息：

> 名称测试
> 值 1366271544
> 域 www.myexamplewebsite.com
> 路径/
> 到期 18/05/2013 08:52:24

# ruby-on-rails - 在 ruby on rails 中自动生成 PDF

> ID：16064954
> 
> 赞同：0
> 
> 时间：2013-04-17T16:05:40.110
> 
> 标签：ruby-on-rails, ruby, pdf

我目前正在开发一个 ruby​​ on rails 项目。我需要系统根据数据库中的信息每 12 小时自动生成一个 PDF。

目前我正在查看 prawn gem 来生成 PDF，但我想知道是否有办法让这个 gem（或任何其他）每隔这么多小时生成一次 PDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:22:55.773

如果您知道如何通过 Ruby（使用`prawn`或`wicked_pdf`）生成 PDF，则只需执行 2 个步骤：

1.  创建一个 rake 任务，调用它，如下所示：

    ```
    # lib/tasks/my_pdf_task.rake

    desc "Generate pdf"
    task :generate_pdf => :environment do
      MyPdfGenerator.new.generate
    end 
    ```

2.  通过 cron 运行它，[无论何时](https://github.com/javan/whenever)使用gem。安装和初始化 gem 后，编辑`config/schedule.rb`：

    ```
    # config/schedule.rb

    every 3.hours do
      rake "generate_pdf"
    end 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:14:07.827

这样的事情可以通过使用[Wicked PDF](https://github.com/mileszs/wicked_pdf)来实现。根据我过去的理解和您的问题，您似乎想要生成某种包含pdf附件的电子邮件。如果我的立场正确，你的邮件中就会有这样的东西。

```
 def overtime_pdf(user, booking)
    @bookings = booking
    @user = user
    mail(:subject => 'Overtime', :to => user.email) do |format|
      format.text # renders overtime_pdf.text.erb for body of email
      format.pdf do
        attachments['bookings.pdf'] = WickedPdf.new.pdf_from_string(
            render_to_string(:pdf => 'overtime', :template =>
                'bookings/index.pdf.erb', :layouts => 'pdf.html')
        )
      end
    end
  end 
```

如果您使用的是 heroku，则执行此操作后，您可以使用`heroku-scheduler`. 您要做的是创建一个接受用户参数的类方法，然后您可以在控制器操作中传递用户并在 rake 任务中使用它。所以你可以有这样的东西。

**班级**

```
 def self.send_overtime_mail(user, bookings)
    BookingMailer.booking_pdf(user, bookings).deliver
  end 
```

**耙任务**

```
task :overtime_report => :environment do
  every 3.hours do
    user = User.where(:role => :administrator).first
    bookings = Bookings.where(:day => Date.today.beginning_of_month..Date.today.end_of_month)
    Booking.send_overtime_mail(user, bookings)
  end
end 
```

# hadoop - PIG (Hadoop) - 具有可变列的行

> ID：16064955
> 
> 赞同：0
> 
> 时间：2013-04-17T16:05:41.940
> 
> 标签：hadoop, apache-pig

和 Pig 一起玩，我的输入文件是：

1、4、6

1、2、7、9

2, 5, 1

1、3、5、1

2、6、2、8

每行的第一个值是 ID；该行的其余部分只是唯一值（每行可以有不同的列数）。

我想将以上内容转换为：

1、2、4、6、7、9、3、5、1

2、5、1、6、2、8

所以基本上按 ID 分组，然后展平其余列并将其作为每一行输出。

PIG 甚至是正确的方法吗？我有办法在 M/R 中做到这一点，但我认为 Pig 可能是这类事情的理想选择。

非常感谢您提供的任何提示

邓肯

PS我不关心值的顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:37:47.123

未经测试，但这是我将采用的一般方法：获取一个包含 ID 和一袋值的变量，将其展平，以便您获得只有 id 和单个值的行，获取不同的行，然后按 ID 分组。这将为您提供每个 ID 的一袋值，如果您想输出，您可以将其转换为字符串。

```
A = LOAD 'input' USING TextLoader() as line:chararray; 
B = FOREACH A GENERATE STRSPLIT(line,',',2) as (id:chararray,values:chararray)
C = FOREACH B GENERATE id, FLATTEN(TOBAG(STRSPLIT(values,','))) as value:chararray;
D = DISTINCT C; -- I'm assuming you actually want distinct values, wasn't clear.
E = GROUP D by id;
F = FOREACH E GENERATE group as id, BagToString(D.value) as valueString:chararray; 
```

# macos - 如果应用程序正在运行，如何在不启动它的情况下签入 AppleScript - 通过 osascript 实用程序

> ID：16064957
> 
> 赞同：51
> 
> 时间：2013-04-17T16:05:47.943
> 
> 标签：macos, safari, applescript, osascript

考虑以下 AppleScript：

```
on is_running(appName)
    tell application "System Events" to (name of processes) contains appName
end is_running

set safRunning to is_running("Safari")
if safRunning then
    tell application "Safari"
      -- Stuff I only want executed if Safari is running goes here.
    end tell
    return "Running"
else
    return "Not running"
end if 
```

问题：当我通过`osascript`命令行实用程序运行它时，如果 Safari 没有运行，它会启动并且脚本报告“正在运行”。这不是我想要或期望的行为。请注意，在 AppleScript 编辑器中运行时，它可以按预期/预期工作。

这是一个`osascript`错误/已知问题吗？还是出于我失踪的原因，它是某种有意的行为？任何人都可以让它按要求工作吗？（顺便说一句，我正在运行 OSX 10.7.5；我看不到如何`osascript`报告版本号）。

如果您注释掉`tell`/`end tell`行，它的行为与我预期的一样：如果 Safari 没有运行，它不会启动它，并打印“未运行”。所以在我看来，这*似乎*`tell`是导致 Safari 启动的原因，但它不需要实际执行，只需存在于脚本中......？有一段时间我想知道这`tell`是否应该是这样工作的，但由于它在 AppleScript 编辑器*中不能*这样工作，我猜不是......

事实上，这是另一个具有类似行为的更疯狂的版本：

```
on is_running(appName)
    tell application "System Events" to (name of processes) contains appName
end is_running

set safRunning to is_running("Safari")
return safRunning
if false then
    tell application "Safari"
    end tell
end if 
```

这仍然总是启动 Safari，即使在 return 语句之后的块内`tell`！`if false`（但同样，这在 AppleScript 编辑器中很好。）

顺便说一句，这种行为不仅限于 Safari，而且也不是通用的：

*   受影响的应用程序包括：Safari、TextEdit、iPhoto、AppleScript Editor、iTerm、...
*   不受影响的应用程序包括：谷歌浏览器、iTunes、预览、邮件、终端、地址簿、Echofon、...

那么，有人对我如何解决或绕过这个有任何想法吗？这是一个`osascript`错误吗？还是我错过了有关 AppleScript 语义的内容？

对于上下文：我正在尝试编写一个脚本（要嵌入/从某些 python 调用），它会在打开的浏览器中查询它们打开的任何选项卡的 URL；我一切正常，*除了*它总是启动 Safari，无论它是否打开。我已经将这种不良行为归结为上面显示的简单测试用例。我不知道有任何方法可以在不使用的情况下从 python 运行此脚本`osascript`，除了[appscript 之外](http://appscript.sourceforge.net/)，我不想使用它，因为[它不再是开发/支持/推荐](http://appscript.sourceforge.net/status.html)的。

非常感谢所有输入/见解！

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-17T23:14:33.093

我怀疑你得到这个的原因是因为每次你从命令行使用 osascript 调用脚本时，脚本正在被编译。

**在tell应用程序**上编译的行为将使应用程序启动。

使用预编译文件中的 osascript 从命令行调用脚本，即 . **scpt**不会导致此行为，因为无需进行编译。

但是从纯文本 (.txt,.sh ) 文件中调用它会启动应用程序。

如果您不想使用 .scpt 文件并想使用纯文本文件，那么您可以尝试将**运行脚本**命令放入 applescript 的技巧。

```
on is_running(appName)
    tell application "System Events" to (name of processes) contains appName
end is_running

set safRunning to is_running("Safari")
if safRunning then
    run script "tell application \"Safari\" 

open location \"http://google.com\"

    end tell"
    return "Running"
else
    return "Not running"
end if 
```

**运行脚本**中的脚本仅在需要时编译。您将需要转义任何字符，如我的示例中的引号。

如果您先在普通的 applescript 文档中编写脚本并对其进行编译以检查错误，则会更容易。

然后将其复制到纯文本文件中。

* * *

**更新****

我上面使用的方法来自一个旧脚本，在我在这里回答之前我曾经用来解决这个问题。

答案有效，而不是试图优雅。;-)

我实际上喜欢下面的[**user1804762**方法](https://stackoverflow.com/a/16069999/1107226)。因为它确实有效，但感觉答案不够清楚，所以我将举一个使用它的例子。

```
set appName to "Safari"

if application appName is running then

    tell application id (id of application appName)

        open location "http://google.com"
    end tell
    return "Running"
else
    return "Not running"
end if 
```

可以使用 **osascript从命令行运行此脚本**

例子：

`osascript /Users/USERNAME/Desktop/foo.scpt`

请注意，该脚本被保存为已编译的脚本。这可以正常工作，您也可以将其保存并用作纯文本脚本。

IE

`osascript /Users/USERNAME/Desktop/foo.applescript`

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-04-17T20:48:47.333

一些信息：

“增强的应用程序对象模型”：

```
tell application "iTunes"
    if it is running then
      pause
    end if
end tell 
```

你也可以这样做：

```
if application "iTunes" is running then
    tell application "iTunes" to quit
end if 
```

你也可以这样做：

```
get name of application "iTunes"
get version of application "iTunes" 
```

并完成旅程：

```
get id of application "TextEdit" --> "com.apple.TextEdit"
tell application id "com.apple.TextEdit"
    make new document
end tell 
```

那就是“增强的应用程序对象模型”。如果一个应用程序仍然启动（例如，您第一次编译和执行脚本），我认为这是因为 AS 必须从应用程序中获取一些它在字典中找不到的信息（或类似的东西......？ ）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-23T07:17:12.137

好的，我知道这个问题真的很老了，但我偶然发现它正在寻找一个不同的问题，并且不得不考虑其中一些响应有多复杂。

实现你想要的简单代码是：

```
tell application "System Events"
  if application process "Safari" exists then
    -- do stuff you want to do only if Safari exists
  end if
end tell 
```

在旧系统上，语法*曾经*是：

```
tell application "System Events"
  if exists of application process "Safari" is true then
    -- do stuff you want to do only if Safari exists
  end if
end tell 
```

其中之一绝对适合您，Applescript 解决方案的勇敢搜索者，仅在应用程序运行时才采取行动。

* * *

***哦！*额外提示：**如果您不确定应用程序进程名称到底是什么（*通常*但不*总是*应用程序名称），在编写最终脚本运行之前……</p>

```
tell application "System Events"
   get every application process
end tell 
```

并在结果中找到您的应用进程名称。

这是运行该命令的屏幕截图。（注意数以万计的*Google Chrome Helper*实例。感谢 Google！）

![在此处输入图像描述](https://i.stack.imgur.com/UC66V.jpg)

！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-12T18:31:46.370

但是，所有先前做出的答案都存在相同的问题：

**他们通过名称查找应用程序。但是，用户可能会重命名应用程序，然后脚本会认为应用程序没有运行，而实际上它确实运行了。**

要正确检查正在运行的应用程序，应通过其捆绑 ID 找到它，用户无法更改该 ID。

可以使用此命令查询捆绑 ID，例如，当应用程序已经运行时：

```
tell application "System Events"
    get bundle identifier of application process "Safari"
end tell 
```

或者对于任何已安装的应用程序都是这样：

```
get id of application "Safari" 
```

要检查具有特定捆绑 ID 的应用程序是否正在运行，请使用以下代码：

```
tell application "System Events"
    set ids to bundle identifier of every application process
    if ids contains "com.apple.safari" then
        return "Running"
    else
        return "Not running"
    end if
end tell 
```

此外，这是一个检查应用程序是否正在运行的示例，然后退出它，然后重新启动它，确保重新启动之前运行的同一个应用程序，而不是其他可能存在的副本：

```
set bundleID to "com.apple.safari"
set apps to runningApps(bundleID)
set appCount to length of apps
if appCount is not 0 then
    quit application id bundleID
    repeat while length of runningApps(bundleID) = appCount
        -- wait for the app to quit
    end repeat
    open first item of apps
end if

on runningApps(bundleID)
    -- The try block is to catch the rare case of having more than one
    -- copy of an app running at the same time. Unfortunately, in that
    -- case this code will not run as expected, because we don't get the
    -- correct list of multiple items back then. But at least the script
    -- will not crash from it but handle it gracefully.
    tell application "System Events"
        try
            return application file of (every application process whose bundle identifier = bundleID)
        end try
    end tell
    return {}
end runningApps 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-21T13:19:43.563

```
tell application "Finder"
    set applicationsnames to get the name of every process whose visible is true
end tell

set appName to "Safari"

if applicationsnames does not contain appName then
    say (appName & " is not running")
    --add here what you want to happen

end if
return applicationsnames 
```

这是`{"Finder", "JavaAppLauncher", "firefox", "Microsoft Word", "iTunes", "AppleScript Editor"}`为我返回

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-24T17:42:53.307

我遇到了与此处描述的相同的问题，尝试设置播放/暂停 VLC 或 iTunes 的 AppleScript（由 BetterTouchTool 手势触发），但如果 VLC 未运行（由于我的工作流程），则只有 iTunes，当然，只有 VLC 而它正在运行。（我在 VLC 的设置中使用 iTunes 的自动暂停/播放触发器来启动和退出应用程序。）

VLC 总是在每次重新启动 BTT 后首次使用 BetterTouchTool 触发器时启动，因为此时字典缓存被删除，并且 AppleScript 处理程序必须启动每个脚本应用程序，如果一个指令针对它以便调用它字典。

我没有找到任何可以避免这种情况的东西。有一些尝试，但没有一个对我有用，因为脚本处理程序的字典调用是我们无法影响的。我想出了这个肮脏的解决方法：

*   创建一个单独的 AppleScript 文件，仅包含包含 VLC 的告诉的行
*   把它保存在不会惹恼你的地方
*   将原始 AppleScript 中包含 tell 的行替换为运行该脚本的行

这将导致脚本的第一次编译不直接调用应用程序（在我的例子中是 VLC），只调用脚本，这意味着应用程序不需要启动。

一旦调用了该单独的文件，VLC 将需要启动，但是，如果您调用该文件以告诉 VLC 某些内容，那么无论如何您都已经打开了 VLC（或希望它打开）。

我通过 BetterTouchTool 触发器（在我的例子中是触控板上的特定点击）调用的 AppleScript 如下所示：

```
if application "iTunes" is running and not application "VLC" is running then
tell application "iTunes" to playpause 
```

如果应用程序“VLC”正在运行则结束然后运行脚本“/Users/jannis/bin/PlayVLC.scpt”结束如果

单独的 AppleScript 文件（“PLayVLC.scpt，保存在我多年前为此目的手动创建的用户文件夹中名为“bin”的文件夹中）就是这样的：

```
tell application "VLC" to play 
```

如果您手动打开该脚本，它当然也会启动 VLC。但这希望不会经常或永远不需要。

我实际上不知道这是否会产生任何我不知道的更深层次的问题，因为我不是专业编码器；如果是这样，请通知我。我希望这对任何人都有帮助！

# azure - Azure 上的全球化和文化设置

> ID：16064960
> 
> 赞同：3
> 
> 时间：2013-04-17T16:05:51.633
> 
> 标签：azure, time, localization, culture

我们位于英国，并在 Azure 上部署了一系列 Web 服务。其中之一每 5 分钟自动刷新一次，并显示“上次刷新时间为 hh:mm:ss”消息。这似乎没有考虑夏令时，因为显示的时间比当地时间晚一小时。我们怀疑它使用的是 UTC。我们已经尝试设置

```
<globalization uiCulture="en" culture="en-GB"/> 
```

在 web.config 中并以编程方式没有成功。有没有比确定 DST 偏移量并在“DateTime.Now()”的每个实例中应用它更简单的解决方案来显示正确的本地时间？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-04T14:03:41.777

在应用程序设置下的 Azure 门户中，添加一个环境变量，其名称`WEBSITE_TIME_ZONE`为`W. Europe Standard Time`。

[![在此处输入图像描述](https://i.stack.imgur.com/hqu1f.png)](https://i.stack.imgur.com/hqu1f.png)

有关其他值，请参阅：[https ://msdn.microsoft.com/en-us/library/ms912391(v=winembedded.11).aspx](https://msdn.microsoft.com/en-us/library/ms912391(v=winembedded.11).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T20:14:46.587

@viperguynaz 是正确的，所有 Azure 都在 UTC 上运行。如果你在 Azure 中运行，那么你应该让它在 UTC 中运行，而不是试图规避它，因为那时有些东西表现得不是很好。相反，作为一名软件开发人员，您应该在应用程序中添加遵守时区和处理保存为 UTC 的数据和运行在 UTC 上的服务的能力。永远不要使用`DateTime.Now`，而是始终使用`DateTime.UtcNow`.

有关这方面的更多信息，请参阅[此问题](https://stackoverflow.com/questions/12813123/how-to-change-default-time-zone-in-azure-website-service)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T16:10:36.713

是 - Azure 在 UTC 时间运行。阅读[DateTime.ToLocalTime 方法](http://msdn.microsoft.com/en-us/library/system.datetime.tolocaltime.aspx)和[TimeZoneInfo.ConvertTime 方法](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.converttime.aspx)，了解如何获取已知时区的本地时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T10:34:39.623

我们有类似的英国特定情况，我们只需在单行“提升简单”启动任务中使用时区实用程序[tzutil设置时区：](http://technet.microsoft.com/en-gb/library/hh825053.aspx)

```
tzutil /s "GMT Standard Time" 
```

我们还没有看到任何问题，时间戳总是符合我们的预期。这似乎比确保代码中的每个 DateTime 交互都了解本地时间/时区要简单。

我相信此实用程序仅包含在 Windows Server 2008 R2 及更高版本的映像中。

# ruby-on-rails - 如何在 ruby 中通过关联获取值？

> ID：16064961
> 
> 赞同：0
> 
> 时间：2013-04-17T16:05:51.763
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有三张桌子，

```
Alpha - :set_code, :field_code 

Beta - :set_code, :field_code # both fields are primary key in BETA table

Gamma - :field_code, :field_name 
```

我的模型中有三个类：

```
Class Alpha
  belongs_to :alpha_beta, foreign_key: 'set_code', class_name: 'Beta'
end

Class Beta
  belongs_to :beta_gamma, foreign_key: 'field_code', class_name: 'Gamma'
end

Class Gamma
end 
```

在我的 Alpha 视图中，我想在所选内容中显示 ，`field_name`并`drop down box`提供`params`更改和更新`field_name`.

我尝试了以下`Beta`表格，但我不知道如何`Gamma`通过使用`Beta`Class 来获取价值。

```
<%= f.select :field_code, Beta.all.map{|b| [b.field_Code, b.set_code]} %> 
```

注意：`field_name`应该在 where `alpha`table `:set_code`= `beta`table之下`:set_code`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:09:18.867

这是你想要的？

```
<%= f.select :set_code, Beta.all.map {|b| [b.beta_gamma.field_name, b.set_code] } %> 
```

您可以通过`belongs_to`关系访问关联的记录。

```
alpha = Alpha.first
alpha.alpha_beta #=> instance of Beta
alpha.alpah_beta.beta_gamma #=> instance of Gamma 
```

# c# - 带有 JSON 数组中特定数据的服务堆栈响应 DTO

> ID：16064964
> 
> 赞同：2
> 
> 时间：2013-04-17T16:05:57.697
> 
> 标签：c#, servicestack, dto

我正在为返回 JSON 数据的服务建模我的响应 DTO，如下所示：

```
{
    "response":
    {
        "metadataA" : "useless info a",
        "metadataB" : "useless info b",
        "metadataC" : "useless info c",
        ...
        "metadataZ" : "useless info z",
        "results" :
        [
            {
                "resultmetadataA" : "useless info a",
                "resultmetadataB" : "useless info b",
                "resultId": "a",
                "resultName": "A"
            },
            {
                "resultmetadataA" : "useless info a",
                "resultmetadataB" : "useless info b",
                "resultId": "b",
                "resultName": "B"
            }

        ]
    }
} 
```

显然，我只希望我的 DTO 有一个带有 id 和名称的结果列表，如下所示：

```
class Response
{
    public List<Result> Results { get; set; }
}

class Result
{
    public string Id  { get; set; }
    public string Name  { get; set; }
} 
```

是否有一些属性属性可以告诉服务堆栈 id 和 name 值的“路径”？

* * *

**编辑 1**

我正在尝试使用 ServiceStack.DataAnnotations 中的一些属性，但没有成功。尝试在属性中使用**[CompositeIndex](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/DataAnnotations/CompositeIndexAttribute.cs)** (false, "response", "results")`Results`和**[Alias](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/DataAnnotations/AliasAttribute.cs)**`Results`，但结果一直为空。

请帮忙！

**编辑 2**

还尝试`[DataContract]`在响应和属性上**直接**`[DataMember(Name = Id/Name)]`解析这些数据，但它似乎不起作用。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:20:32.863

您可以使用字典：

```
public class ResponseDTO
{
    public List<Dictionary<string, string>> Results { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:44:33.537

首先，您的 JSON 无效`"response": [`不能是数组文字，而是包含对象属性。

### 如何调试序列化问题

目标是让您的架构匹配 JSON 的形状。不要试图猜测形状应该是什么，养成推断形状的习惯，尝试看看哪些属性会被序列化。如果没有属性被序列化，则执行相反的操作并填充和序列化您的 POCO 以查看它们预期的形状，然后将这些形状与原始 JSON 进行比较以查看它们的不同之处。[有关调试序列化问题的其他提示，](https://stackoverflow.com/a/13444423/85785)请参阅此答案。

```
var json = @"{
    ""response"":
    {
        ""metadataA"" : ""useless info a"",
        ""metadataB"" : ""useless info b"",
        ""metadataC"" : ""useless info c"",
        ""metadataZ"" : ""useless info z"",
        ""results"" :
        [
            {
                ""resultmetadataA"" : ""useless info a"",
                ""resultmetadataB"" : ""useless info b"",
                ""resultId"": ""a"",
                ""resultName"": ""A""
            },
            {
                ""resultmetadataA"" : ""useless info a"",
                ""resultmetadataB"" : ""useless info b"",
                ""resultId"": ""b"",
                ""resultName"": ""B""
            }

        ]
    }
}"; 
```

从上述 JSON 中推断出的类型：

```
public class MetadataResponse
{
    public Response Response { get; set; }
}

public class Response
{
    public string MetadataA { get; set; }
    public string MetadataB { get; set; }
    public string MetadataC { get; set; }
    public string MetadataZ { get; set; }
    public List<Result> Results { get; set; }
}

public class Result
{
    public string ResultmetadataA { get; set; }
    public string ResultmetadataB { get; set; }
    public string ResultId { get; set; }
    public string ResultName { get; set; }
} 
```

使用上述类型测试 JSON 序列化：

```
var dto = json.FromJson<MetadataResponse>();
dto.PrintDump(); 
```

输出：

```
{
    Response: 
    {
        MetadataA: useless info a,
        MetadataB: useless info b,
        MetadataC: useless info c,
        MetadataZ: useless info z,
        Results: 
        [
            {
                ResultmetadataA: useless info a,
                ResultmetadataB: useless info b,
                ResultId: a,
                ResultName: A
            },
            {
                ResultmetadataA: useless info a,
                ResultmetadataB: useless info b,
                ResultId: b,
                ResultName: B
            }
        ]
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:03:39.880

毕竟我发现没有办法为复杂的响应建模简单的 DTO，无论如何感谢所有的答案。

嗯，很遗憾我的 POCO 的结构依赖于 JSON 响应结构。但是，我可以抽象出响应结构并让我的所有 DTO 立即处理它。

从我的问题中考虑类似的 JSON 结构：

```
{
    "response":
    {
        ...,
        "results":
        [
            {
                "resourceType": "letter" ,
                "resources": ["a", "b", "c", ...]
            },
            {
                "resourceType": "number" ,
                "resources": ["1", "2", "3", ...]
            },
            ...
        ]    
    }
} 
```

* * *

我抽象了常见的响应结构：

```
enum ResourceKind
{
    Letter,
    Number
}

public class BaseResponse
{
    public ResponseContent Response
    {
        get;
        set;
    }
}

public class ResponseContent
{
    public List<ResultContent> Results
    {
        get;
        set;
    }
}

public class ResultContent
{
    public ResourceKind Kind
    {
        get;
        set;
    }

    public List<string> Resources
    {
        get;
        set;
    }
} 
```

* * *

最后得到了一个（几十个）特定服务器响应的简化实现：

```
public class SpecificResponse : BaseResponse
{
    public IEnumerable<SpecificResult> Results
    {
        get
        {
            foreach(ResultContent result in Response.Results)
            {
                SpecificResult newSpecificResult = new SpecificResult();
                newSpecificResult.Kind = result.Kind;
                newSpecificResult.Resources = result.Resources;
                yield return newCategory;
            }

            yield break;
        }
    }
} 
```

我仍在寻找更好的东西，但现在这是我的解决方案。**

# php - OOP 中的非对象错误

> ID：16064967
> 
> 赞同：-1
> 
> 时间：2013-04-17T16:06:03.820
> 
> 标签：php

这是我的引导文件：

```
class Bootstrap {

function __construct() 
{
    $url = $_GET['url'];
    //удаляем слеш с конца, чтобы избежать ошибки метода
    $url = rtrim($url,'/');
    //делим по слешу
    $url = explode('/',$url);
    //print_r($url);
    $file = 'controllers/' . $url[0] . '.php';
        if(file_exists($file)) 
    {
    require 'controllers/' . $url[0] . '.php';
        $controller = new $url[0];
    }
    else 
    {
    require '/../controllers/error.php';
    $error = new error();
    $error->classError();
    return false;
    }

    if
    (isset($url[2])){
        $controller->{$url[1]}($url[2]);
    }
    else
    {
    if(isset($url[1])){
    if(method_exists($url[0],$url[1])) {
        $controller->{$url[1]}();
        }
        else {
        $error->methodError();

        }
    }
    }
}

} 
```

如您所见，我在这里创建了一个对象，并调用了 classError 函数：

```
else 
    {
    require '/../controllers/error.php';
    $error = new error();
    $error->classError();
    return false;
    } 
```

然后我想在另一个地方调用另一个方法：

```
else {
    $error->methodError();  
    } 
```

它说：致命错误：在第 39 行的 Z:\home\localhost\www\oop\mvc\mvc\libs\bootstrap.php 中的非对象上调用成员函数 methodError()。

当我为 methodError 方法创建另一个对象时，它可以工作。问题是，如果我已经在其下创建了一个对象，为什么还要创建另一个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:15:50.663

您的对象不是为 else 条件创建的。

```
class Test {
    private $error;

    function __construct() {
      $this->error = new error();
    }

   public function test() {
      if( 1 == 1) {
        $this->error->methodError();
      }
      else {
            //
        $this->error->methodError();
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:13:37.657

您的实例化在 else 部分...如果代码从未进入 else 部分怎么办？然后`$error`将是未定义的。

顺便提一句。您不会创建两个对象，只需编写两次实例化对象的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:16:05.960

你可以通过移动这条线来解决这个问题：`$error = new error();`在 if 语句之上。然后，无论您的第一个 if 语句中发生什么，都将创建您的对象，从而使该对象可用于您的下一个 if 语句。

```
class Bootstrap {

    function __construct() {
        $url = $_GET['url'];
        //??????? ???? ? ?????, ????? ???????? ?????? ??????
        $url = rtrim($url,'/');
        //????? ?? ?????
        $url = explode('/',$url);
        //print_r($url);
        $file = 'controllers/' . $url[0] . '.php';

        $error = new error();

        if ( file_exists($file)) {
            require 'controllers/' . $url[0] . '.php';
            $controller = new $url[0];
        } else {
            require '/../controllers/error.php';
            $error->classError();
            return false;
        }

        if (isset($url[2])) {
            $controller->{$url[1]}($url[2]);
        } else {
            if(isset($url[1])) {
                if(method_exists($url[0],$url[1])) {
                    $controller->{$url[1]}();
                } else {
                    $error->methodError();

                }
            }
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T16:16:35.963

您在 PHP 代码不总是执行的地方创建了第一个 $error。
作为快速解决方案，您可以再次定义 $error。

```
else {
    require '/../controllers/error.php';
    $error = new error();
    $error->methodError();  
} 
```

# git - 用 git hash-object 构建 git commit 对象？

> ID：16064968
> 
> 赞同：5
> 
> 时间：2013-04-17T16:06:10.670
> 
> 标签：git

如何使用 git hash-object 手动构建 git commit 对象？我现在它适用于 blob，它的文档说它可以使用 -t 构建不同的对象，但是你如何构建一个提交呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-17T10:07:27.303

这是一个完整且有效的脚本示例，该脚本无需运行即可创建`commit`对象`git commit`：

```
mkdir project
cd project
git init

hash=`echo -n "" | git hash-object -w --stdin`

tree=`echo -e "100644 blob ${hash}\temptyfile" | git mktree`

commit=`echo -e "yourname\nyour@email.com\n2013 12:20:15 +0200\ncommittername\ncommitter@email.com\n2013 10:13:15 +0200" | git commit-tree ${tree}`

git update-ref refs/heads/master ${commit} 
```

要验证脚本是否创建了包含空文件的提交，请运行：

```
git checkout --
git log --oneline
#2abbdc2 yourname your@email.com 2013 12:20:15 +0200 committername committer@email.com 
```

编辑：修复和改进

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-16T14:13:55.740

为了读者的利益：

Arialdo [Martini 接受的答案](https://stackoverflow.com/a/19423775)是完全正确的，并解释了如何`git`使用适当的管道命令创建一个空的 repo。请注意，他的变体`bare`也适用于存储库（您可以`emptyfile`在`git`-dir 中创建而不会产生不良副作用）。

这里的答案将其总结为一个稍作调整的脚本：文件的内容取自“stdin”，并且可以将文件放入工作树的子目录中。

脚本`git-init-with-file-from-stdin.sh new-git-workdir filename 'commit message'`：

```
#!/bin/bash

mkdir "$1" &&
cd "$1" &&
git init &&

dir="$(dirname "$2")" &&
name="$(basename "${2:-dummyfile}")" &&

obid="$(git hash-object -w --stdin)" &&
treeid="$(git mktree < <(printf '100644 blob %q\t%q\n' "$obid" "$name"))" &&

if [ . = "$dir" ]; then git read-tree -i "$treeid";
else git read-tree --prefix="$dir/" -i "$treeid"; fi &&

git commit -m "${3:-automatic commit}" &&
git reset --hard 
```

电话解释

```
 ./git-init-with-file-from-stdin.sh newgitdir path/to/file <<< "hellOw W0rld" 
```

*   `mkdir "$1"`, `cd "$1"`,`git init`创建新的`git`工作树并对其进行初始化。它以第一个参数（此处为`newgitdir`）命名，假定它在现有路径中命名一个不存在的目录。

*   `dir="$(dirname "$2")"`,`name="$(basename "${2:-dummyfile}")"`提取第二个参数的路径和名称部分，它定义了想要的文件名。该路径相对于创建的`git`-workdir。请注意，此参数不能以 a 开头`/`，否则命令将失败。这里`dir=path/to`和`name=file`。如果离开，新文件在 -workdir 的顶部称为“dummyfile” `git`。

*   `obid="$(git hash-object -w --stdin)"`然后将带有从 repo 读取的信息的对象存储`stdin`到`git`repo 中，并将新对象的 SHA（对象 id）存储在变量中`obid`。在示例中，内容`hellOw W0rld`后跟一个`NL`.

*   `git mktree < <(printf '100644 blob %q\t%q\n' "$obid" "$name")`几乎`printf '100644 blob %q\t%q\n' "$obid" "$name" | git mktree`与创建一个适当的 git-tree 相同。 `100644`是通常的文件模式。如果你想创建可执行文件，你需要`100755`在这里。

*   `treeid="$(`...`)"`然后将其分配给给定的变量`treeid`

*   `if [ . = "$dir" ]; then git read-tree -i "$treeid";`这会将这个新创建的树读入`git`暂存区以供以后提交。但是，这是针对这种情况，文件应直接位于`git`-workdir 中。

*   `else git read-tree --prefix="$dir/" -i "$treeid"; fi`当您想将其放入`git`-workdir 的子目录时，情况也是如此。好消息是，它`git`会自动为您创建所有中间目录节点。（可悲的是`--prefix="./"`产生了一个错误。）

*   `git commit -m "${3:-automatic commit}"`然后使用众所周知的提交来创建提交

*   `git reset --hard`然后将`git`-worktree 与最新的提交同步。

变体的`bare`变化：

*   `git commit`除了（这需要一个工作目录）和`git reset`（你不需要它）之外，一切都类似。

*   代替

    ```
    git init && 
    ```

    和

    ```
    git init --bare && 
    ```

    也更换

    ```
    git commit -m "${3:-automatic commit}" &&
    git reset --hard 
    ```

    具有与已接受答案中相似的顺序：

    ```
    commitid="$(git commit-tree "$(git write-tree)" <<< "${3:-automatic commit}")" &&
    git update-ref "refs/heads/master" "$commitid" 
    ```

评论：

*   另请参阅[https://stackoverflow.com/a/25556917](https://stackoverflow.com/a/25556917)

*   这里需要`bash`，这意味着它也[适用于 Windows 10](https://msdn.microsoft.com/de-de/commandline/wsl/install_guide)

# database - 我如何设置 Heroku 的 django 环境（特别是 DATABASE_URL）以保持本地和远程数据库开发？

> ID：16064972
> 
> 赞同：0
> 
> 时间：2013-04-17T16:06:20.423
> 
> 标签：database, django, heroku

我想知道如何设置我的 setting.py seccion

```
**DATABASES['default'] =  dj_database_url.config(default)
# Honor the 'X-Forwarded-Proto' header for request.is_secure()
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')** 
```

为了使用heroku的postgres进行本地和远程开发。

如果我什么都不做……我会准备好本地和云环境吗？还是我应该创建一个与我当地 postgres 的价值观不同的新环境？我应该修改setting.py 部分吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:15:28.683

你需要：

```
DATABASES['default'] =  dj_database_url.config() 
```

你不需要传递`default`给`config()`

# php - Eloquent 中与分类学的多对多关系

> ID：16064976
> 
> 赞同：5
> 
> 时间：2013-04-17T16:06:34.747
> 
> 标签：php, laravel, relationship, laravel-4, eloquent

我正在使用 Laravel 4。我的系统中有很多关系。我选择使用 Wordpress 分类表方案。

但是我怎样才能与 Laravel 4 Eloquent ORM 建立模型关系呢？这是我的数据库表；

### 表`terms`：

```
+------------+---------------------+------+-----+---------+----------------+
| Field      | Type                | Null | Key | Default | Extra          |
+------------+---------------------+------+-----+---------+----------------+
| term_id    | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
| name       | varchar(200)        | NO   | MUL |         |                |
| slug       | varchar(200)        | NO   | UNI |         |                |
+------------+---------------------+------+-----+---------+----------------+ 
```

### 表`term_taxonomy`：

```
+------------------+---------------------+------+-----+---------+----------------+
| Field            | Type                | Null | Key | Default | Extra          |
+------------------+---------------------+------+-----+---------+----------------+
| term_taxonomy_id | bigint(20) unsigned | NO   | PRI | NULL    | auto_increment |
| term_id          | bigint(20) unsigned | NO   | MUL | 0       |                |
| taxonomy         | varchar(32)         | NO   | MUL |         |                |
| description      | longtext            | NO   |     | NULL    |                |
| parent           | bigint(20) unsigned | NO   |     | 0       |                |
| count            | bigint(20)          | NO   |     | 0       |                |
+------------------+---------------------+------+-----+---------+----------------+ 
```

### 表`term_relationships`：

```
+------------------+---------------------+------+-----+---------+-------+
| Field            | Type                | Null | Key | Default | Extra |
+------------------+---------------------+------+-----+---------+-------+
| object_id        | bigint(20) unsigned | NO   | PRI | 0       |       |
| term_taxonomy_id | bigint(20) unsigned | NO   | PRI | 0       |       |
| term_order       | int(11)             | NO   |     | 0       |       |
+------------------+---------------------+------+-----+---------+-------+ 
```

通常我们可以做`return $this->belongsToMany('Term');`，但我们怎么能做 2 关系？我们需要 2 个关系，首先从“term_taxonomy”表中找到术语分类，然后找到与“taxonomy_id”的术语关系。

还有一个我想如何使用的例子；

```
$categories = Post::find(1)->categories; // get terms with taxonomy="post_category" 
$tags = Post::find(1)->tags; // get terms with taxonomy="post_tag" 
```

我不想用基本的数据库类“ `DB::table('table')->join('...')...`”来做这件事，我想使用 Eloquent 关系方法和模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T23:28:27.127

您可以创建 getter 方法来处理这些：

在您的 Post 模型中，按照以下方式创建新方法：

```
public function getCategories()
{
    return $this->hasMany()->where('taxonomy', 'post_category');
}

public function getTags()
{
    return $this->hasMany()->where('taxonomy', 'post_tag');
} 
```

# linux - 在 Sublime Text 中，如何查找和替换文件名

> ID：16064977
> 
> 赞同：4
> 
> 时间：2013-04-17T16:06:36.617
> 
> 标签：linux, unix, sublimetext2

有没有办法在崇高的文本中找到一种模式并将其替换为文件名。

例如，我有一堆包含人的文件名。

我想用人来代替它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-21T14:46:51.217

在`SideBarEnhancements`有一个选项可以批量重命名多个文件`Mass Rename Selection...`。`Find Advanced`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:24:20.833

菜单：`Find -> Find in Files...`

Sublime 将在底部打开一个新面板，您只需要填写字段即可。例如，在 Where 字段中，您可以仅查找 .txt 文件：

```
Find: People
Where: C:\Temp, *.txt
Replace: Person 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T14:57:28.267

不，您不能对文件名进行查找和替换。虽然有一个很棒的包叫做 SideBarEnhancements 可以从这个特性中受益。我一定会提交功能请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-20T06:16:04.477

*   安装`SideBarEnhancements`插件
*   从侧栏中选择文件夹
*   右键单击并打开上下文菜单
*   从`Find Advanced`->`Mass Rename Selection...`你可以做到这一点。

[![在此处输入图像描述](https://i.stack.imgur.com/ULYKU.png)](https://i.stack.imgur.com/ULYKU.png)

# sql-server - 避免 SSRS 2008-r2 中的复杂连接

> ID：16064979
> 
> 赞同：1
> 
> 时间：2013-04-17T16:06:40.463
> 
> 标签：sql-server, reporting-services, reportbuilder3.0, ssrs-2008-r2

我有一个需要创建的报告存在严重的性能问题。我需要在我们的数据库中创建所有课程的目录。这是简化的数据模型：

组织单元 --> 包含多个课程 --> 其中包含多个活动；每个活动包含以下内容：

*   附加链接列表
*   先决条件活动列表
*   附加属性-值对列表（编目信息）
*   每种资源类型所需资源类型和数量的列表
*   培训目标清单

我希望创建一个报告，将所有内容分组，看起来像这样：![在此处输入图像描述](https://i.stack.imgur.com/HEFRR.png)

在创建将所有表连接在一起的简单查询后，我得到了近 600 万行，因为由于将活动表与所有 1 多关系表连接以获取附加的链接资源等而发生了不同的笛卡尔积......

我想通过几种方式避免这种情况：

1.  子报告将列出每个活动的不同项目列表。
2.  为上述列表中的每一个创建一个 XML 字段，并在我的报告中使用 VB 对其进行解析
3.  在报表中使用多个数据集，并以某种方式使用查找函数来列出不同的值。

到目前为止的结果：

1.  子报告在性能方面被证明是非常低效的，它比原来的 600 万行查询多 50%。
2.  xml 字段在 DB 方面非常有效，但使用 VB 格式化数据会很麻烦，如果可能的话，我非常希望避免这种情况，
3.  我似乎找不到正确的方法来使用 lookupSet 来获取附件名称列表及其旁边的链接。

**所以我的问题是：**

1.  在处理大量数据和 SSRS 2008-r2 时显示具有大量一对多关系的实体时，最佳实践是什么？
2.  有没有一种方法可以使用查找功能连接数据并以某种方式创建“嵌套表”来列出一对多关系
3.  任何其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:29:05.047

你能创建一个向下钻取报告吗？这看起来是一个不错的选择，可以列出活动并总结课程，然后可钻取详细信息或类似内容。

或者，如果数据更改不重要，您可以缓存您的报告？

600 万条记录对于 ssrs 报告来说已经很多了！

# c# - RemoveRange() 方法如何在 List<> 中工作？

> ID：16064983
> 
> 赞同：8
> 
> 时间：2013-04-17T16:06:59.660
> 
> 标签：c#, .net, list, ienumerable

如标题。我知道它可能会在删除项目之前和之后合并 2 个子列表，但是在删除 LAST 元素时该方法的行为如何？换句话说：它是否会以某种方式复制位于删除索引之前的所有元素？我只是对在一个巨大的列表（比如说 5000 个元素）上使用 RemoveRange 的性能感到好奇，只是为了删除 fe 中的最后两个。

如果它制作了一个副本，有没有办法改变一些设置列表大小的内部变量（并将其余分配的元素视为垃圾）？

我只设法找到一个信息，它是一个 O(n) 复杂度算法，但我不确定这种情况下的“n”是一个列表大小，还是要删除的项目数。

任何提示都会很高兴。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-17T16:11:28.200

它将做的是将项目范围结束后的每个项目删除，并将其在列表中按已删除项目的数量向上移动。就性能影响而言，在移动的项目范围结束后，每个项目都会有一个副本。这意味着它在从末端移除时表现最好（它将是 O(1)），而在从头移除时表现最差（O(n)）。

例如，考虑以下列表：

```
指数 - 价值

0 - 一个
1 - 乙
2 - C
3-D
4 - E
5 - F
6 - 克
```

如果我们调用`RemoveRange(2, 2)` Then，我们将删除从索引 2 开始的两个项目，因此我们将删除 C 和 D。

这意味着需要将 E 复制到索引 2，然后需要将 F 复制到索引 3，然后将 G 复制到索引 4。在删除最后一项后，每个项都有一次复制操作。

请注意，由于您可以将整个内存块“向上”移动两个，因此在实践中最终会比单独复制每个项目更有效。计算机内存将整个内存块向上移动某个固定数量的字节比将大量内存的小部分移动到不同的任意位置要容易得多。不过，它将具有相同的渐近复杂性。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-17T16:13:10.173

`List<T>`只是一个数组的包装器，`_items`在下面的代码中调用。数组中的插槽可能比列表中的项目多，因此`_size`用于跟踪实际有效的插槽数。当你做`RemoveRange(index, count)`...

```
_size -= count;
if (index < _size)
    Array.Copy(_items, index + count, _items, index, _size - index);
Array.Clear(_items, _size, count); 
```

...它将超出范围的项目复制到现在空的空间中，并清除旧项目。

如果您要删除接近大列表开头的范围，则成本与列表的大小成正比，因为必须向下移动很多东西。

如果要删除接近大列表末尾的大范围，则复制成本低，但清除成本高，因此成本将与删除范围的大小成正比。

# vim - 扩展 vim 命令

> ID：16064986
> 
> 赞同：2
> 
> 时间：2013-04-17T16:07:08.720
> 
> 标签：vim

如何在 vim 中扩展命令？

我想在两种情况下这样做，

1.  在一个`:diffget`或`:diffput`我总是想运行一个之后`:diffupdate`
2.  之后`:NERDTreeToggle`我想运行一个`<C-w>=`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:31:16.337

我不知道会为您的场景触发的任何 autocmd 事件。但是，一些自定义映射可能会有所帮助。

您可以更改默认值`dp`和`do`映射以执行`:diffupdate`

```
nnoremap dp dp:diffupdate<cr>
nnoremap do do:diffupdate<cr> 
```

请注意，有时您不能使用`dp`和/或`do`必须使用`:diffput`/ `:diffget`。在这些情况下，我建议您创建如下命令：

```
command! -nargs=? -range=1 -bar Diffput <line1>,<line2>diffput <args>|diffupdate
command! -nargs=? -range=1 -bar Diffget <line1>,<line2>diffget <args>|diffupdate 
```

或者你可以只映射`:diffupdate`

```
nnoremap <f8> :diffupdate<cr> 
```

书呆子树

```
nnoremap <leader>N :NERDTreeToggle<cr><c-w>= 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:09:42.413

也许你可以看看[vim 宏](http://vim.wikia.com/wiki/Macros)。它可能适合您想做的事情:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:12:21.560

`.vimrc`在包装多个命令的 VimScript 中创建您自己的自定义函数。

这是我使用几个插件在缓冲区中启动 Clojure Repl 的一个：

```
fun! LeinCMD()
    execute 'ConqueTerm lein repl'
    execute 'set syntax=clojure'
    execute 'normal! i'
endf
command! Repl call LeinCMD() 
```

然后我调用这个命令`:Repl`（请注意，您的自定义命令必须始终以大写字母开头）。

来源：[自动运行几个 vim 命令和击键](https://stackoverflow.com/questions/15734470/automate-running-several-vim-commands-and-keystrokes)

# c++ - Qt：enterEvent 和 leaveEvent 不起作用

> ID：16064988
> 
> 赞同：3
> 
> 时间：2013-04-17T16:07:16.170
> 
> 标签：c++, qt, events, qt-creator, qwidget

我对 Qt 中的鼠标事件有奇怪的问题。我有以下代码：

```
#ifndef QSTONEFIELD_HPP_
#define QSTONEFIELD_HPP_

#include <QtGui>
#include <QWidget>

class QStoneField : public QWidget
{
    Q_OBJECT

private:
    // some stuff

public:
    // some methods

protected:
    void paintEvent(QPaintEvent *event);   
    virtual void mousePressEvent(QMouseEvent * event);
    virtual void enterEvent(QMouseEvent * event);
    virtual void leaveEvent(QMouseEvent * event);

signals:

public slots:

};

#endif 
```

在第二个文件中我有：

```
#include "qstonefield.hpp"
// FIXME temporary include
#include <iostream>
using namespace std;

// some other methods ..

void QStoneField::mousePressEvent(QMouseEvent * event)
{
    cout << "CLICK!" << endl << flush;
}

void QStoneField::enterEvent(QMouseEvent * event)
{
    cout << "ENTER!" << endl << flush;
}

void QStoneField::leaveEvent(QMouseEvent * event)
{
    cout << "LEAVE!" << endl << flush;
} 
```

现在，当我编译并运行它时，我可以调用 mousePressEvent，因为程序会打印“CLICK！”，但是当我用鼠标穿过小部件时，它什么也没打印。当然在 main.cpp 中我没有忘记 Stone.setMouseTracking(true)。

为什么 enterEvent 和 leaveEvent 不起作用？它应该根据文档工作。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T16:22:47.420

您的函数的签名应该是：

```
virtual void QStoneField::enterEvent(QEvent * event);
virtual void QStoneField::leaveEvent(QEvent * event); 
```

您只是为函数使用了错误的参数，这意味着来自 Qwidget 的参数不会被覆盖。

我建议您考虑默认实现的功能，例如：

```
virtual void QStoneField::leaveEvent(QEvent * event){
       //do my own things
       QWidget::leaveEvent(event);
} 
```

# iphone - 供应配置文件中的 IOS 应用程序 ID 类型

> ID：16064989
> 
> 赞同：0
> 
> 时间：2013-04-17T16:07:25.290
> 
> 标签：iphone, ios, provisioning

我对IOS很陌生，所以请原谅我的“新手”。我的问题是：有没有办法在苹果配置文件页面中判断 App_Id 是通配符还是显式？我看到 ID 在那里，但我不知道它是什么类型的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:57:30.503

最简单的判断方法是通过证书、标识符和配置文件工具中的“应用程序 ID”部分。当您查看出现在“ID”列中的字符串时，如果它以星号 ('*') 结尾，则它是通配符 AppId：

![证书、标识符和配置文件 AppID ScreenClip](https://i.stack.imgur.com/UrX9D.png)

在 Provisioning Profiles 区域中，您还可以找到此信息，但只需单击一下即可。导航到“Provisioning Profiles”部分，然后单击您想要了解更多信息的配置文件。在显示的详细信息中，“App ID”部分包含 AppID 名称和 AppID 本身。与上面的“应用程序 ID”部分一样，如果 ID 以星号 ('*') 结尾，则它是通配符 AppID： ![证书、标识符和配置文件 供应配置文件 ScreenClip](https://i.stack.imgur.com/ZDsD8.png)

# javascript - jQuery选择带有图像的表单字段

> ID：16064991
> 
> 赞同：0
> 
> 时间：2013-04-17T16:07:32.023
> 
> 标签：javascript, jquery, html, wordpress

我正在尝试创建包含图像的 jquery 选择字段。( [http://designwithpc.com/Plugins/ddSlick](http://designwithpc.com/Plugins/ddSlick) )

我的代码似乎有问题，因为控制台显示错误： Uncaught TypeError: Object [object Object] has no method 'ddslick'

HTML

```
<form id="quote" action="" method="get"><script type="text/javascript">// <![CDATA[
$('#quote').keyup(function (){   doTotal(this);   calcMenu(this); ddslick(this); });
// ]]></script>

<table id="table1" border="0" cellspacing="3" cellpadding="3">
<tbody>
<tr>
<td>Enquiry Date</td>
<td>
<div align="center"><input type="text" name="dateToday" size="25" /></div></td>
</tr>
<tr>
<td>Conference Name</td>
<td>
<div align="center"><input type="text" name="conferenceName" size="25" /></div></td>
</tr>
<tr>
<td>Company Name</td>
<td>
<div align="center"><input type="text" name="companyName" size="25" /></div></td>
</tr>
<tr>
<td>Special Requests</td>
<td><textarea name="comment" rows="5" cols="26"></textarea></td>
</tr>
</tbody>
</table>
<table id="table2" border="0" cellspacing="3" cellpadding="3">
<tbody>
<tr>
<td>First Name</td>
<td>
<div align="center"><input type="text" name="firstName" size="25" /></div></td>
</tr>
<tr>
<td>Last Name</td>
<td>
<div align="center"><input type="text" name="lastName" size="25" /></div></td>
</tr>
<tr>
<td>Tel No</td>
<td>
<div align="center"><input type="text" name="telNo" size="25" /></div></td>
</tr>
<tr>
<td>Cell</td>
<td>
<div align="center"><input type="text" name="cellNo" size="25" /></div></td>
</tr>
<tr>
<td>Email</td>
<td>
<div align="center"><input type="text" name="email" size="25" /></div></td>
</tr>
<tr>
<td><input onclick="formReset()" type="button" value="Reset form" /></td>
</tr>
</tbody>
</table>
<table id="tablex" border="1" cellspacing="3" cellpadding="3">
<tbody>
<tr>
<th scope="col" width="30">
<div align="center">Date</div></th>
<th scope="col" width="128">
<div align="center">Amount of Delegates ½ Day Conference @ R 240 pp</div></th>
<th width="112">
<div align="center">Amount of Delegates Full Day Conference @ R 260 pp</div></th>
<th width="112">
<div align="center">Menu No</div></th>
<th width="112">
<div align="center">Price pp for Menu (1-7: R70, 8-10 R85, 11: R105, 12: R85)</div></th>
<th width="112">
<div align="center">Total Persons for meals</div></th>
<th width="112">
<div align="center">Amount of Single Rooms @ R 480 pp</div></th>
<th width="112">
<div align="center">Amount of Double Rooms @ R 720 pp</div></th>
<th width="134">
<div align="center">Total for the day</div></th>
</tr>
<tr>
<td>
<div align="center"><input type="text" name="date1" size="10" /></div></td>
<td>
<div align="center"><input type="text" name="halfday1" size="5" maxlength="10" /></div></td>
<td>
<div align="center"><input type="text" name="fullday1" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="MenuNo1" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="MenuPrice1" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="MealPersons1" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="SingleRooms1" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="DoubleRooms1" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="total1" size="5" /></div></td>
</tr>
<tr>
<td>
<div align="center"><input type="text" name="date2" size="10" /></div></td>
<td>
<div align="center"><input type="text" name="halfday2" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="fullday2" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="MenuNo2" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="MenuPrice2" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="MealPersons2" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="SingleRooms2" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="DoubleRooms2" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="total2" size="5" /></div></td>
</tr>
<tr>
<td>
<div align="center"><input type="text" name="date3" size="10" /></div></td>
<td>
<div align="center"><input type="text" name="halfday3" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="fullday3" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="MenuNo3" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="MenuPrice3" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="MealPersons3" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="SingleRooms3" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="DoubleRooms3" size="5" /></div></td>
<td>
<div align="center"><input type="text" name="total3" size="5" /></div></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<div id="myDropdown">
<select id="myDropdown">
        <option value="0" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/facebook-icon-32.png"
            data-description="Description with Facebook">Facebook</option>
        <option value="1" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/twitter-icon-32.png"
            data-description="Description with Twitter">Twitter</option>
        <option value="2" selected="selected" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/linkedin-icon-32.png"
            data-description="Description with LinkedIn">LinkedIn</option>
        <option value="3" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/foursquare-icon-32.png"
            data-description="Description with Foursquare">Foursquare</option>
    </select>
</div>
</form>

$('#myDropdown').ddslick({
    onSelected: function(selectedData){
        //callback function: do something with selectedData;
    }   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:55:07.037

如果您使用的是 wordpress，请尝试按照以下步骤操作：

1 - 将 jquery.ddslick.js 文件复制到主题的 /js 文件夹中。

2 - 确保在 header.php 中写入文件的正确路径。在`<head>`标签内你应该有这样的东西：

```
<script src='<?php echo get_template_directory_uri(); ?>/js/jquery.ddslick.js'></script> 
```

3 - 正如@Arnelle Balane 所指出的，您可能应该编写这段代码：

```
$('#myDropdown').ddslick({
    onSelected: function(selectedData){
        //callback function: do something with selectedData;
    }   
}); 
```

在一些脚本标签内：

```
<script type="text/javascript">
$('#myDropdown').ddslick({
    onSelected: function(selectedData){
        //callback function: do something with selectedData;
    }   
});
</script> 
```

或者，您可以将该代码放入您的自定义 .js 文件中。这样您就不必将所有代码都放在 html 中：

a - 在您的 /js 文件夹中，创建另一个 .js 文件，如下所示：script.js

b - 在 script.js 文件中，在 jQuery on ready 函数中复制上面不带脚本标签的代码，如下所示：

```
jQuery(document).ready(function($) {
    $('#myDropdown').ddslick({
        onSelected: function(selectedData){
            //callback function: do something with selectedData;
        }   
    });
}); 
```

4 - 检查您的主题是否已激活 jquery，如果没有，您可以从[此处](http://jquery.com/download/)下载 jquery并为 jQuery 文件重复步骤 2，或者您可以使用[wordpress 中的 jQuery](http://css-tricks.com/snippets/wordpress/include-jquery-in-wordpress-theme/)。

5 - 仔细检查拼写错误并测试是否有效；如果不是，可能是别的东西；随时通知我们。

更新：我在第三步中添加了更多信息，以防使用外部 .js 文件。

# java - Apache Jena：删除模型中的所有数据

> ID：16064992
> 
> 赞同：2
> 
> 时间：2013-04-17T16:07:33.227
> 
> 标签：java, jena

我正在尝试使用以下类中的 ClearModel() 方法删除我输入到模型中的所有数据。

```
 public class JenaDatabaseHelper {

private Model model;
private Dataset dataset;

public Model getJenaModel(){
    if(model!=null){
        return model;
    }
    else{
        String directory = "JenaDatabase" ;
        try{
            dataset = TDBFactory.createDataset(directory);
            model = dataset.getNamedModel("DB");
            return model;
        }catch(Exception e){
            System.out.println("Error when retrieving model: "+e.getMessage());
        }              
    }
    return null;
}

public void SaveAndCloseModel(){
    if(model!=null && dataset!=null){
        model.commit();
        model.close();
        dataset.close();
    }
}

public void ClearModel(){
    if(model!=null && dataset!=null){
        model.removeAll();
        SaveAndCloseModel();
    }
} 
```

但是当我重新启动应用程序并遍历语句时，没有任何内容被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:11:03.240

我注意到如果为空，`ClearModel`它将默默地什么都不做。`model`在这种情况下，您可能希望在该条件上放置一个 else 分支以打印警告。例如，如果您创建一个新`JenaDatabaseHelper`实例并且不调用`getJenaModel()`初始化实例变量，则可能会发生这种情况。

事实上，考虑到未初始化变量的风险，我个人会将 的功能`getJenaModel`放入构造函数中。或者，您可以通过访问`model`getter 方法来懒惰地评估它们，该方法将首先检查`model`是否已初始化。

# c - 使用 openssl api 以编程方式将 x509 证书转换为人类可读的格式

> ID：16064998
> 
> 赞同：3
> 
> 时间：2013-04-17T16:07:56.993
> 
> 标签：c, openssl, x509

在我的基于 C 的 openssl 客户端中，我能够与 ssl 服务器建立 ssl 连接，并使用检索服务器提供的 ssl 证书

```
X509* cert = SSL_get_peer_certificate( SSL *ssl); 
```

现在我想将这个 X509 证书的内容转换为人类可读的形式。是的，我可以简单地使用以下命令在控制台上显示：

```
X509_print(stdout,cert); 
```

但我不想像那样打印它。我想将证书内容捕获到某个字符缓冲区中，以便在以我选择的方式显示它之前进一步处理它。

尽我所能用谷歌搜索，仍然一无所知。

有谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:26:21.550

获得 X.509 证书后，您可以使用各种 X509 函数，例如 X509_get_version、X509_get_notBefore、X509_get_notAfter、X509_get_subject_name 等。您可以在[此处查看 x509.h。](http://www.opensource.apple.com/source/OpenSSL098/OpenSSL098-32/src/crypto/x509/x509.h)

在某些情况下，例如 X509_get_subject_name，您将使用 X509_NAME。在 X509_NAME 上，您可以使用 X509_NAME_get_text_by_NID 来提取通用名称（通过使用 NID_commonName）、组织等字段。

这取决于您要显示的所有信息。没有黑客。这只是编程。如果您需要更多信息，我也可以发布代码示例。但我相信这必须足以开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:08:51.230

没有“X.509 证书的人类可读格式”之类的东西，这就是为什么你什么都找不到的原因。每个软件提取不同的信息并以不同的方式显示。正如另一个答案中所指出的，您可以通过调用各种函数来提取数据，然后打印出来。或者您可以直接输出 X509_print 以处理 stdout 以外的内容，以获取 OpenSSL 生成的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-12T21:56:30.200

`X509_print`应该采取`BIO`第一个论点。`X509_print_fp`接受一个`FILE*`赞`stdout`。

使用（生物风味）将其打印到内存生物`X509_print`，然后使用`BIO_get_mem_data`.