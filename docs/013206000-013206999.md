# StackOverflow 问答 13206000-13206999

# jquery - 从 jquery ajax 数据中获取逗号分隔的值

> ID：13206000
> 
> 赞同：1
> 
> 时间：2012-11-03T04:37:42.883
> 
> 标签：jquery

我需要从服务器返回的 jQuery ajax 数据中获取逗号分隔值的列表。我得到的数据如下

```
<div id="1" class="clicked">A</div>
<div></div>
<div id="2" class="clicked">B</div>
<div></div>
<div id="3" class="clicked">dsf</div>
<div></div>
<div id="4" class="clicked">fd</div>
<div class=users>pp@gmail.com,pp1@gmail.com</div> 
```

这是我发出警报时得到的数据。我需要使用 class = users 提取 div 并将其更新为另一个 div 作为列表。怎么可能..请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T04:44:37.577

像这样的东西有效。我们使用`$`将字符串转换为 jQuery 对象。然后，您可以使用普通的 jQuery 调用（如[filter](http://api.jquery.com/filter/)）来获取电子邮件列表。

然后创建一个列表。然后将每封电子邮件附加到它。

[http://jsfiddle.net/BCmqL/3](http://jsfiddle.net/BCmqL/3)

```
//just hardcode in an example of your data
var ajaxData = '<div id="1" class="clicked">A</div><div></div><div id="2" class="clicked">B</div><div></div><div id="3" class="clicked">dsf</div><div></div><div id="4" class="clicked">fd</div><div class=users>pp@gmail.com,pp1@gmail.com</div>';

//turn it into a jQuery object, now you can just use jQuery to do stuff
$jObject = $(ajaxData);
$emails = $($jObject).filter('div.users').text();

//split the list to get all the emails
var emails = $emails.split(',');

//create a list to add list items to
var $ul = $('<ul />');

//iterate through list and append them to a ul
$(emails).each( function(index, value) {
    var $li = $('<li>'+value+'</li>');
    $ul.append($li);
});

//append new list to body
$('body').append($ul);
​ 
```

# node.js - Passport 中的自定义重定向

> ID：13206004
> 
> 赞同：6
> 
> 时间：2012-11-03T04:38:26.267
> 
> 标签：node.js, authentication, express, passport.js

我正在尝试为我的第一个面向公众的节点应用程序设置基本身份验证。我有两种护照策略：1）Facebook 和 2）Twitter。在我了解安全隐患之前，我至少暂时不打算包含电子邮件/密码系统。我已经能够让他们以开箱即用的方式工作，并与 Mongoose 一起创建新用户。

我现在想对社交帐户用户进行重复数据删除。因此，每当有新用户通过 twitter auth 进入时，我想将他们重定向到收集电子邮件的页面。我将返回的令牌和配置文件对象保存为会话变量，并在将表单提交为隐藏字段时在该页面上重用它们。

但是我无法理解如何使用 Passport 来实现这个方面。这是到目前为止我所拥有的代码，其中包含对我尝试对每个部分执行的操作的评论。本质上，我正在检查 twitter 用户是否是老用户，如果不是，我正在设置我将在 /addemail 页面上重用的会话变量，初始化用户对象（以便序列化、反序列化函数可以执行某些操作（不确定我是否理解序列化/反序列化实际上做了什么）。现在，如果用户是新用户，则会话变量 NewTwitterUser 为真，我在 auth/callback url 中检查它以将用户重定向到适当的页面。但这不起作用。

```
//basic modules and setup
var express = require('express')
    , passport = require('passport')
    , mongoose = require('mongoose')
    , http = require('http')
    , util = require('util')
    , TwitterStrategy = require('passport-twitter').Strategy
    , FacebookStrategy = require('passport-facebook').Strategy
    , path = require('path');

var app = express();

//Mongodb setup
var Schema = mongoose.Schema;
var ObjectId = Schema.ObjectId;

var UserSchema = new Schema({
  provider: String,
  uid: String,
  fb_uid: String,
  twitter_uid: String,
  name: String,
  first_name: String,
  gender: String,
  fb_username: String,
  twitter_username: String,
  profile_pic: String,
  email: String,
  location: String,
  birthday: String,
  created: {type: Date, default: Date.now}
});

var User = mongoose.model('User', UserSchema);
mongoose.connect('MongoHQ db connection here')'

//User Authentication - Twitter
passport.use(new TwitterStrategy({
    consumerKey: 'KEY',
    consumerSecret : 'SECRET',
    callbackURL: "CALLBACKURL",
    passReqToCallback: true
},
    function(req, token, tokenSecret, profile, done){
        User.findOne({twitter_uid: profile.id}, function(err, user){
            if (err) {
            console.log('this is an error 1' + err);
            return done(err);}
            if(user){
                console.log('this user' + user);
                done(null, user);
            } else {
                console.log('this is a new user');
                req.session.token = token;
                req.session.tokenSecret = tokenSecret;
                req.session.profile = profile;
                req.session.newtwitteruser = true;
                var user = new User();
                user.uid = profile.id;
                done(null, user);

                /* This part is commented and is the default code I had if I needed to simply create a Twitter User right here.
                var user = new User();
                user.provider = profile.provider;
                user.uid = profile.id;
                user.twitter_uid = profile.id;
                user.name = profile.displayName;
                user.first_name = profile.displayName[0];
                user.twitter_username = profile._json.screen_name;
                user.profile_pic = profile._json.profile_image_url;
                user.location = profile._json.location;
                user.save(function(err){
                    if(err) {throw err;}
                    else {done(null, user);}
                });*/
            }
        }); 
    }   
));

//User Authentication - Facebook
passport.use(new FacebookStrategy({
    clientID: 'ID',
    clientSecret: 'SECRET',
    callbackURL: "URL"
},
    function(accessToken, refreshToken, profile, done){
        User.findOne({fb_uid: profile.id}, function(err, user){
            if (err) {return done(err);}
            if(user){
                done(null, user);
            } else {
                var user = new User();
                user.provider = profile.provider;
                user.uid = profile.id;
                user.fb_uid = profile.id;
                user.name = profile.displayName;
                user.first_name = profile._json.first_name;
                user.gender = profile._json.gender;
                user.fb_username = profile._json.username;
                user.profile_pic = 'https://graph.facebook.com/' + profile.id + '/picture';
                user.email = profile._json.email;
                user.location = profile._json.location.name;
                user.birthday = profile._json.birthday;
                user.save(function(err){
                    if(err) {throw err;}
                    else {done(null, user);}
                });
            }
        })  
    }   
));

passport.serializeUser(function(user, done) {
  done(null, user.uid);
});

passport.deserializeUser(function(uid, done) {
  User.findOne({uid: uid}, function (err, user) {
    done(err, user);
  });
});  

//app configurations
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser("freecookie"));
  app.use(express.session({secret:"freecookie"}));
  app.use(express.static(path.join(__dirname, 'public')));
  app.use(express.errorHandler());
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
});

//Basic Routing
app.get('/', function(req, res){
    res.render('home', {title: 'App Title', user: req.user});
});

app.get('/auth/twitter', passport.authenticate('twitter'));

app.get('/auth/twitter/callback', 
    passport.authenticate('twitter', {failureRedirect: '/login' }), 
    function(req, res) {
        if (req.session.newtwitteruser){
        res.redirect('/addemail');}
        else {res.redirect('/');}
    });

app.get('/addemail', function(req, res){
    if (req.session.newtwitteruser){
    res.render('email', {title: 'Add your Email'});}
    else {res.redirect('/');}
});

app.get('/auth/facebook', passport.authenticate('facebook', {scope: ['email', 'user_location', 'user_birthday'] }));

app.get('/auth/facebook/callback', 
  passport.authenticate('facebook', { successRedirect: '/', failureRedirect: '/login' }));  

app.get('/logout', function(req, res){
  req.logout();
  res.redirect('/');
});

//create the server
var server = http.createServer(app);
server.listen(app.get('port'));

//Checks if a request is authenticated
function ensureAuthenticated(req, res, next) {
  if (req.isAuthenticated()) { return next(); }
  res.redirect('/login')
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T18:38:29.523

我会首先将成功的登录重定向到你的 twitter 路由中的 addemail 函数：

```
 app.get('/auth/twitter', passport.authenticate('twitter'));
  app.get('/auth/twitter/callback',
    passport.authenticate('twitter', { successRedirect: '/addemail',
                                       failureRedirect: '/' })); 
```

然后，在您的 addemail 功能中，我会检查他们是否已经有电子邮件，之后您可以将他们重定向到适当的位置。

```
 app.get('/addemail', function(req, res){
      if (req.user.email){
           res.render('email', {title: 'Add your Email'});}
      else {res.redirect('/');}
  }); 
```

# css - Centering a Text Link for Responsive Layout

> ID：13206013
> 
> 赞同：2
> 
> 时间：2012-11-03T04:39:58.097
> 
> 标签：css, wordpress, text, responsive-design, centering

I'm going nuts trying to figure out how to center the purple text link "buttons" on this page:

[http://bit.ly/TrfmXk](http://bit.ly/TrfmXk)

I've tried all the usual tricks: margin: 0 auto, etc. but with the design being responsive and it only being contained in a

, I'm at a loss. Any tips would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:50:38.840

首先，将此 CSS 应用于这些链接。

```
display: block;
width: 50%;
margin: 0 auto !important; 
```

必须把 !important 放在边缘，可能会在其他地方覆盖另一条规则。您也可以将该宽度更改为您想要的任何宽度。

# php - 显示链接表中的数据并使用 HTML/PHP/MySQL 将其显示为列表

> ID：13206014
> 
> 赞同：0
> 
> 时间：2012-11-03T04:39:57.757
> 
> 标签：php, html, mysql

我有三张桌子。

```
students
studentID | FirstName | LastName | Email | Form  

course
CCode | Title  

courseenrolement
courseenrolementid | studentID | ccode | complete | scode 
```

通过该网站，我有一个页面，我可以在其中查看所有当前内容`enrolements`，并且我希望能够查看显示`first name, surname and course title`. 我知道我可以使用以下 SQL（对于名称）来做到这一点：

```
SELECT FirstName, LastName FROM student, courseenrolement 
WHERE courseenrolement.studentID = student.studentID 
```

但我不确定如何使用 HTML/PHP 让它工作。目前我只知道如何使用以下代码`studentID and CCode`从表格中显示：`courseenrolement`

```
<ul>
  <?php foreach ($courseenrolements as $ce): ?>
    <li>
      <form action="" method="post">
        <div>
          <?php htmlout($ce['studentID']); ?>
          <?php htmlout($ce['CCode']); ?>
          <input type="hidden" name="courseenrolementid" value="<?php
              echo $ce['courseenrolementid']; ?>">
          <input type="submit" name="action" value="Edit">
          <input type="submit" name="action" value="Delete">
        </div>
      </form>
    </li>
  <?php endforeach; ?>
</ul> 
```

显示：

![输出](../Images/823ac5fe795b94485b7ca7ca0bc28831.png)

但我想要`names and course title`. 我设法让它`names`在“添加新”表单的下拉列表中显示等，所以我认为它会相似，但不确定如何准确。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:11:07.707

看来您没有使用 Web 开发框架。既然如此，请查看 PHP 的`PDO`库，它可以让您以结构化的方式进行可移植的数据库查询。

无论您是否查看 PDO 库，您都需要在这里使用 扩展您的查询`JOIN`，然后选择您想要的列。谷歌查询的简单示例`JOIN`，因为您的用例看起来很简单。然后，您可以使用循环遍历结果集资源`for`，并根据需要将数据输出到 HTML。

# mongodb - Meteor upsert 等效

> ID：13206015
> 
> 赞同：5
> 
> 时间：2012-11-03T04:40:33.350
> 
> 标签：mongodb, meteor, upsert

upsert 命令多久会在 Meteor 中实施？

而且，同时做同样事情的最佳方法是什么？

我现在正在做这样的事情：

```
if typeof ( item = Items.findOne({title:'Foo'}) ) == 'undefined'
    item = Items.insert({title:'Foo'})
else
    Items.update(item._id, {$set: {title:'Foo'}})
# do something with item 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T01:27:56.977

> upsert 命令多久会在 Meteor 中实施？

更新：[@Thomas4019](https://stackoverflow.com/users/360051/thomas4019)指出`upsert`现在支持：

v0.6.6

“添加 upsert 支持。Collection.update 现在支持 {upsert: true} 选项。此外，添加一个 Collection.upsert 方法，该方法返回新插入的对象 ID（如果适用）。”

资料来源：[History.md](https://github.com/meteor/meteor/blob/devel/History.md#mongodb)

使用文档：[http ://docs.meteor.com/#upsert](http://docs.meteor.com/#upsert)

-- 原始答案如下 --

Trello Meteor 路线图上有一张卡片，您可以投票以表明它对您的重要性：[https ://trello.com/c/C91INHmj](https://trello.com/c/C91INHmj)

它目前在“稍后”列表中，这意味着它需要一段时间才能实施，除非它获得大量选票。

另一个需要注意的重要事情是，由于流星是开源的，您可以自己实施必要的更改并提交回来。

* * *

> 同时做同样事情的最好方法是什么？

有几种解决方案，但如果不了解您的设计，就不可能说出最适合您的用例的解决方案。

1.  按原样使用代码，向集合添加唯一索引，并在出现重复键错误时处理它

2.  更改设计以实现显式乐观并发。

这两种解决方案的核心是相同的，优雅地处理错误情况。#1 更容易实现。#2 在如何处理乐观并发方面提供了更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T21:49:03.450

如果你真的想这样做，你可以直接使用 mongodb 连接：`MongoInternals.defaultRemoteCollectionDriver().mongo.db.collection('myCollection').update(query, update, {upsert: true})`. 当然，这种联系没有记录在案，因此将来有可能对其进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-26T19:33:30.770

使用这个技巧，Upsert 真的很容易。您只需检查它是否具有`_id`属性：

```
if(item._id){
  //update
}else{
  //insert
} 
```

# php - How to configure Azure to use domain name instead of *.azurewebsites.com?

> ID：13206017
> 
> 赞同：0
> 
> 时间：2012-11-03T04:41:46.267
> 
> 标签：php, azure, web-config, asp.net-routing, azure-web-app-service

When I go to my domain, it redirects to my Azure subdomain (x.azurewebsites.com). How can I fix this so that my domain doesn't redirect?
My config file:

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="MyRule">
                    <match url="^(.*)$" /> 
                    <conditions> 
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" /> 
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" /> 
                    </conditions> 
                    <action type="Rewrite" url="index.php/{R:1}" appendQueryString="false" />
                </rule> 
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:58:32.540

转到 Azure 管理器 (manage.windowsazure.com) 选择您的站点，然后选择配置。

确保您已在此处设置域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:59:06.800

[您是否尝试过查看文档？](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)如果您在任何步骤中遇到特定问题，请告诉我们，但至少尝试投入一些精力。

# java - Unknown data type declaration

> ID：13206018
> 
> 赞同：1
> 
> 时间：2012-11-03T04:41:48.200
> 
> 标签：java, string, integer, declaration

I have a class which holds a list inside a list, and its declared as type String, but i no longer know that its a string.

```
private ArrayList<List<String>> table;
table = new ArrayList<List<String>>();
table.add(new ArrayList<String>()); //is possible
table.add(new ArrayList<Integer>()); //not possible 
```

But now the nested list could either be string or integer. How can i fix that? I also can't declare Object must either be string or integer

Also can a single Arraylist hold both ints and strings without declaring as objects?

Edit: It seems you guys are debating the right answer. I will insight why i chose Vikdor answer.

My job is to load a csv, and then user types in command to define each column as string or int. My table class has a private instance variable, and has methods which adds the values. Doing it in Vikdor way makes performing operations on table very easy where i want to merge two table or sort. It will also prevent user from inputting non string or int through an exception.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T04:48:42.620

你可能正在寻找这个：

```
List<List<? extends Object>> table;
table = new ArrayList<List<? extends Object>>();
table.add(new ArrayList<String>()); 
table.add(new ArrayList<Integer>()); 
```

当您检索内部列表时，这将导致未经检查的代码，如下所示（在生产代码中显然不建议这样做）：

```
List<String> stringList = (List<String>) table.get(0); // Unchecked cast. 
```

从OP的评论：

> 因为我要求将它作为 int 或 string。否则，您可以在列表中放置更多类型。嵌套列表以列的形式保存表的值，每列保存 int 或 string。您还有其他读取 csv 文件并存储在表中的动态方式吗？

最好使用适当的 CSV 处理器（如[SuperCSV](http://supercsv.sourceforge.net/)），该处理器将直接解析为 POJO，并具有与每列关联的适当数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T05:08:12.453

单个 Arraylist 可以同时保存 int 和字符串

请按照以下步骤操作

**第一步：创建一个类**

```
import java.io.*;
public class TempClassArray 
{
    int numValue;
    String strValue;
    public TempClassArray(int numValue,String strValue)
     {
        this.numValue=numValue;
        this.strValue=strValue;
     }
} 
```

**第 2 步：在同一目录中创建另一个类，该类用于将整数和字符串存储在同一数组列表中**

```
import java.util.*;
public class mainClass 
{
    public static void main(String args[])
    {
        List<TempClassArray> sample=new ArrayList<TempClassArray>();
        sample.add(new TempClassArray(1,"One"));  //adding both integer and string values
        sample.add(new TempClassArray(2,"Two"));
        sample.add(new TempClassArray(3,"Three"));
        sample.add(new TempClassArray(4,"Four"));
        sample.add(new TempClassArray(5,"Five"));
        sample.add(new TempClassArray(6,"Six"));

        System.out.println("Integer \t\t String");
        System.out.println("********\t\t********");
        for(TempClassArray s:sample)
        {
            System.out.println(s.numValue+"\t\t\t"+s.strValue);
        }
    }
} 
```

**输出**

```
Integer          String
********        ********
1           One
2           Two
3           Three
4           Four
5           Five
6           Six 
```

像这样，您可以在单个数组列表中添加许多数据类型和值

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T05:17:54.003

您不能将泛型指定为整数或字符串。如果必须同时存储两者，则必须使用共同的父对象，即 Object。

hack 可能是将所有整数转换为字符串。然后，当您从集合中取出对象而不是检查 instanceof 时（就像您使用 Object 时一样），您可以尝试将字符串转换为整数并在对象是细绳。这有点难看，并且如果字符串包含数字，则具有将字符串误解为整数的副作用。

```
package testapp;

import java.util.ArrayList;
import java.util.List;

/**
 *
 * @author joefitz
 */
public class IntsAndStrings
{
    List<String> intsAndStrings = new ArrayList<String>();

    public void put(String val)
    {
        intsAndStrings.add(val);
    }

    public void put(Integer val)
    {
        intsAndStrings.add(String.valueOf(val));
    }

    public String getString(int index)
    {
        return intsAndStrings.get(index);
    }

    public int getInt(int index)
    {
        return Integer.parseInt(intsAndStrings.get(index));
    }

    public boolean isInteger(int index)
    {
        boolean retVal = false;

        try
        {
            Integer.parseInt(intsAndStrings.get(index));
            retVal = true;
        }
        catch(NumberFormatException e)
        {
        }
        return retVal;
    }    

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args)
    {
        IntsAndStrings testApp = new IntsAndStrings();
        testApp.put(1);
        testApp.put(2);
        testApp.put("hello");
        testApp.put("world");

        for (int i = 0; i < testApp.intsAndStrings.size(); i++)
        {
            if (testApp.isInteger(i))
            {
                int intVal = testApp.getInt(i);
                System.out.println("int:" + intVal);
            }
            else
            {
                System.out.println("String: " + testApp.getString(i));
            }
        }
    }    
} 
```

运行结果：

```
int:1
int:2
String: hello
String: world 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T04:43:08.517

You have to use Object instead of String. Check wethere instance is String or Integer.

Either you can do so if you are wiling to do

```
 ArrayList<List<String>> tableStr;
     ArrayList<List<Integer>> tableInt;

    tableStr = new ArrayList<List<String>>();
    tableInt = new ArrayList<List<Integer>>();

    tableStr.add(new ArrayList<String>()); 
    tableInt.add(new ArrayList<Integer>()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T04:49:12.033

你可以使用：

```
1) private ArrayList<List<Object>> table;

2) private ArrayList<List<Data>> table; 
```

//其中Data是您使用整数/字符串实现的类

```
3) private ArrayList<List<String>> table; 
```

//每当您需要读取转换的值时，字符串也将保存 int 值。

# c# - Error while setting UserAcces permission for WebForms?

> ID：13206029
> 
> 赞同：0
> 
> 时间：2012-11-03T04:44:05.693
> 
> 标签：c#, asp.net, webforms

I've created a class named `BaseClass.cs` and I've written a function in its constructor.
Here's how it looks

```
public class BasePage:Page
{
    public BasePage()
    {
        setUserPermission();
    }
    private void setUserPermission()
    {
        String strPathAndQuery = HttpContext.Current.Request.Url.PathAndQuery;
        string strulr = strPathAndQuery.Replace("/SGERP/", "../");
        Session["Url"] = strulr;
        GEN_FORMS clsForm = new GEN_FORMS();
        clsForm.Form_Logical_Name = Session["Url"].ToString();
        clsForm.User_ID = Convert.ToInt32(Session["User_ID"]);
        DataSet dsPermission = clsForm.RETREIVE_BUTTON_PERMISSIONS();
        if (dsPermission.Tables.Count > 0)
        {
            if (dsPermission.Tables[1].Rows.Count > 0)
            {
                Can_Add = Convert.ToBoolean(dsPermission.Tables[1].Rows[0]["Can_Add"].ToString());
                Can_Delete = Convert.ToBoolean(dsPermission.Tables[1].Rows[0]["Can_Delete"].ToString());
                Can_Edit = Convert.ToBoolean(dsPermission.Tables[1].Rows[0]["Can_Edit"].ToString());
                Can_Print = Convert.ToBoolean(dsPermission.Tables[1].Rows[0]["Can_Print"].ToString());
                Can_View = Convert.ToBoolean(dsPermission.Tables[1].Rows[0]["Can_Print"].ToString());
           }
        }       
    }
} 
```

I've inherited this class on my webform so that when the page loads, the `setUserPermission` function is executed. My webpage looks like this

```
public partial class Setting_CompanyDetails : BasePage 
```

My problem is that I cannot access `Session["Url"]` in my `BasePage`. I'm getting the following error

```
Session state can only be used when enableSessionState is set to true, either in a 
configuration file or in the Page directive. Please also make sure that                 
System.Web.SessionStateModule or a custom session state module is included in the                            
<configuration>\<system.web>\<httpModules> section in the application configuration. 
```

How can I solve this issue? Is this the right way to set `UserPermission` access?

# ios - UITableView 拒绝去 detailViewController

> ID：13206030
> 
> 赞同：0
> 
> 时间：2012-11-03T04:44:10.587
> 
> 标签：ios, xcode, arrays, uitableview, segue

*编辑：此问题已移至[从 Xcode 获取与索引路径无关的错误，](https://stackoverflow.com/questions/13212906/getting-an-error-from-xcode-that-is-not-on-the-internet-related-to-index-path)因为此问题已修复但出现新错误。*

我已经在这里待了4天！我在日志中没有收到任何错误，但是每当我单击填充有从 mysql 下载的动态数组的单元格时，它都不会转换。有趣的是，我没有从 prepareForSegue 中的自我放置的 nslog 中得到任何回应......

视图控制器.h

```
 #import <UIKit/UIKit.h>
    #import <CoreLocation/CoreLocation.h>

@interface ViewController : UIViewController<UITableViewDataSource,
 CLLocationManagerDelegate,NSXMLParserDelegate, UISearchBarDelegate> {
    IBOutlet UISearchBar *searchBar;
    IBOutlet UITableView *tableView;
     IBOutlet UILabel *Label;

    CLLocationManager *locationManager;

    NSMutableArray *coolarray;

    float latitude;
    float longitude;
}

@property (nonatomic, retain) CLLocationManager *locationManager;

@end 
```

我已经排除了已解析的 xml 下载数据，但将 nsarray 的值留在了我的实现文件中

```
 #import "ViewController.h"
    #import "DetailViewController.h"
    #import "Player.h"

    @interface ViewController ()

    @end

    @implementation ViewController

    - (void)didReceiveMemoryWarning
    {
        [super didReceiveMemoryWarning];
        // Dispose of any resources that can be recreated.
    }
    - (void)dealloc
    {
        [super dealloc];
        [self.locationManager release];
        if ( coolarray )
            [coolarray release];
    }

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        coolarray = NULL;

        self.locationManager = [[[CLLocationManager alloc] init] autorelease];
        self.locationManager.delegate = self;
        [self.locationManager startUpdatingLocation];
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        return YES;
    }

    // Table data delegate
    - (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section {
        if ( coolarray != NULL ) {
            return [coolarray count];
        }
        return 0;
    }

    - (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {
            Player *cell = [tableView dequeueReusableCellWithIdentifier:@"Player"];

        if (cell == nil)
        {
            cell = [[[Player alloc] initWithFrame:CGRectZero reuseIdentifier:@"Player"] autorelease];
        }

        NSDictionary *itemAtIndex = (NSDictionary *)[coolarray objectAtIndex:indexPath.row];
        UILabel *nameLabel =[cell textLabel];
        [nameLabel setText:[itemAtIndex objectForKey:@"name"]];
        return cell;
    }
                - (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {
                        Player *cell = [tableView dequeueReusableCellWithIdentifier:@"Player"];

                    if (cell == nil)
                    {
                        cell = [[[Player alloc] initWithFrame:CGRectZero reuseIdentifier:@"Player"] autorelease];
                    }

                    NSDictionary *itemAtIndex = (NSDictionary *)[coolarray objectAtIndex:indexPath.row];
                    UILabel *nameLabel =[cell textLabel];
                    [nameLabel setText:[itemAtIndex objectForKey:@"name"]];
                    return cell;
                }

        -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

            NSString *selectedLang = [coolarray objectAtIndex:indexPath.row];

            DetailViewController *myDetViewCont = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]]; 

            myDetViewCont.myDogLang = selectedLang; 
            [self  performSegueWithIdentifier:@"showDogDetail" sender:nil];

            [myDetViewCont release]; 
            myDetViewCont = nil;

        }

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{ 
    if ([[segue identifier] isEqualToString:@"showDogDetail"])
    {
        DetailViewController *detailViewController =
        [segue destinationViewController];

        NSIndexPath *indexPath = [self.tableView
                                    indexPathForSelectedRow];
        NSString *dogLang = [self.coolarray objectAtIndex:indexPath.row];
        detailViewController.myDogLang = dogLang;
                    }

            }
@end 
```

DetailViewController.h

```
#import <UIKit/UIKit.h>

@interface DetailViewController : UIViewController
 {

    IBOutlet UILabel *myLabel;

    NSString *myDogLang;

}

@property (nonatomic, retain) IBOutlet UILabel *myLabel;
@property (nonatomic, retain) NSString *myDogLang;

@end 
```

细节视图控制器.m

```
#import "DetailViewController.h"

@interface DetailViewController ()

@end

@implementation DetailViewController
@synthesize myLabel;
@synthesize myDogLang;

- (void)viewDidLoad {
    [super viewDidLoad];
    myLabel.text = myDogLang;
        self.myLabel.text = [self.myLabel objectAtIndex:0];
}

- (void)dealloc {
    [myLabel release];
    [myDogLang release];
    [super dealloc];
} 
```

我还添加了一张图片来显示我的连接： ![在此处输入图像描述](../Images/1e56442b68b799eede9f748018a1c7f3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:02:44.450

看起来您在这里混合和匹配了几种不同的样式...我建议简化您的代码：

1）删除表和详细视图之间的当前segue。通过按住控制键并从原型单元格（我假设这是一个原型表）拖动到目标视图来创建一个新的。不要忘记将标识符命名为与您在 prepareForSegue 代码中使用的名称相同的名称）。此外，如果您将表视图控制器嵌入到导航控制器中（这是通常在可导航表视图上所期望的），则 segue 的样式应该是“推送”。否则样式应该是“模态”（不过，根据您的应用程序的可用性，您可能需要重新考虑这种方法）。

![在此处输入图像描述](../Images/96fa82d28cfa9a7d5f8357fc186ede9c.png)

2) Player 类发生了什么？这是一个扩展 UITableViewCell 的类吗？当您单击情节提要中的原型单元格时，身份检查器中列出了什么类？是 Player 还是 UITableViewCell？属性检查器中单元格的标识符是什么？它是 Player 还是空白（给定您的代码，它需要是“Player”）？尝试至少暂时将 Player 课程排除在外。将单元格的标识符保持为`Player`，但在身份检查器中，将原型单元格的自定义类设置为`UITableViewCell`。将您的方法更改`tableView:cellForRowAtIndexPath:`为：

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Player"];

    NSDictionary *itemAtIndex = (NSDictionary *)[self.coolarray objectAtIndex:indexPath.row];
    cell.textLabel.text = [itemAtIndex objectForKey:@"name"];
    return cell;
} 
```

另外作为旁注，您在此方法中表明coolarray 的成员是 NSDictionary 类型。在prepareForSegue 中，您将coolarray 的成员视为NSStrings。他们不可能两者兼有。

3）摆脱`tableView:didSelectRowAtIndexPath:`方法。这个很重要。这里发生了两种相互竞争的 segues 方法。在情节提要和此方法中设置的一个。现在编写代码的方式，单击单元格将调用 prepareForSegue -> didSelect -> prepareForSegue。您在此处尝试执行的所有操作都可以在该`prepareForSegue:`方法中完成（请参阅下一步）。

4）改变你的 prepareForSegue: 方法看起来像这样（你甚至可以摆脱“if”语句，因为你现在只有一个 segue）：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{ 
    if ([[segue identifier] isEqualToString:@"showDogDetail"])
    {
        DetailViewController *detailViewController =
        [segue destinationViewController];

        NSIndexPath *indexPath = [self.tableView
                                    indexPathForSelectedRow];
        NSString *dogLang = [self.coolarray objectAtIndex:indexPath.row];
        // or if the array contains NSDictionaries, change the previous line to:
        // NSString *dogLang = [[self.coolarray objectAtIndex:indexPath.row] objectForKey:@"name"];
        detailViewController.myDogLang = dogLang;
    }
} 
```

5）您的 DetailViewController 的 viewDidLoad 方法正在用一些错误代码覆盖标签文本（UILabel 不是数组）。将代码更改为：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.myLabel.text = self.myDogLang;
} 
```

鉴于我上面提到的一些概念性问题，我强烈建议阅读[Apple 的 Table View Programming Guide](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)。它将帮助您阐明生命周期和流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:53:02.373

1-您应该选择要使用的方法：在情节提要内使用连接或以编程方式加载的详细信息控制器（使用 didSelectRowAtIndexPath）。现在你正在做两件事：不好。尝试评论您所有的 didSelectRowAtIndexPath 代码并仅使用情节提要。此外，在您的 didSelectRowAtIndexPath 中，您正在从笔尖加载详细信息 vc ？？？哪个笔尖？你没有笔尖，你有一个故事板！（您可以以编程方式从情节提要中加载内容，但代码不同）

2-如果您使用 Push 进行转场，您的故事板中必须有一个 UINavigationController。放置导航控制器，当您将其放置在情节提要中时，它附带了一个 UITableViewController。删除此 UITV 并附加您的。将单元重新连接到详细控制器并记住为连接提供标识符名称，确保连接从单元开始。我不确定您是否需要 UINavigationController 即使是模态转场。

试着让我知道

# multithreading - The control flow of my main method (which basically tells a bunch of threads to run) is not working the way it should

> ID：13206033
> 
> 赞同：-2
> 
> 时间：2012-11-03T04:44:34.697
> 
> 标签：multithreading

My main method is trying to start and terminate each and every thread in sequential order before it goes onto the next one on the line below. This means that the object guest0 is stuck waiting for one of the DeskEmployee objects to release a semaphore it has acquired, and the rest of the program simply fails to execute. How do I get it not to do this?

```
public static void main(String[] args) {
        Project2 proj = new Project2();
        Project2.Guest guest0 = proj.new Guest();
        Project2.Guest guest1 = proj.new Guest();
        Project2.Guest guest2 = proj.new Guest();
        Project2.Guest guest3 = proj.new Guest();
        Project2.Guest guest4 = proj.new Guest();
        Project2.Guest guest5 = proj.new Guest();
        Project2.Guest guest6 = proj.new Guest();
        Project2.Guest guest7 = proj.new Guest();
        Project2.Guest guest8=proj.new Guest();
        Project2.Guest guest9 = proj.new Guest();
        Project2.Guest guest10 = proj.new Guest();
        Project2.Guest guest11 = proj.new Guest();
        Project2.Guest guest12 = proj.new Guest();
        Project2.Guest guest13 = proj.new Guest();
        Project2.Guest guest14 = proj.new Guest();
        Project2.Guest guest15 = proj.new Guest();
        Project2.Guest guest16 = proj.new Guest();
        Project2.Guest guest17 = proj.new Guest();
        Project2.Guest guest18 = proj.new Guest();
        Project2.Guest guest19 = proj.new Guest();
        Project2.Guest guest20 = proj.new Guest();
        Project2.Guest guest21 = proj.new Guest();
        Project2.Guest guest22 = proj.new Guest();
        Project2.Guest guest23 = proj.new Guest();
        Project2.Guest guest24 = proj.new Guest();
        Project2.DeskEmployee employee0=proj.new DeskEmployee(0);
        Project2.DeskEmployee employee1=proj.new DeskEmployee(1);
        Project2.Bellhop bellhop0=proj.new Bellhop(0);
        Project2.Bellhop bellhop1=proj.new Bellhop(1);
        guest1.run();
        guest2.run();
        guest3.run();
        guest4.run();
        guest5.run();
        guest6.run();
        guest7.run();
        guest8.run();
        guest9.run();
        guest10.run();
        guest11.run();
        guest12.run();
        guest13.run();
        guest14.run();
        guest15.run();
        guest16.run();
        guest17.run();
        guest18.run();
        guest19.run();
        guest20.run();
        guest21.run();
        guest22.run();
        guest23.run();
        guest24.run();
        employee0.run();
        employee1.run();
        bellhop0.run();
        bellhop1.run();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:00:55.177

你说这些是线程？你通过`run()`?

那是行不通的。基本上，直接调用`run()`（而不是通过 a`Thread`的`start()`方法）将*在当前线程上按顺序运行任务，*而不是产生一个新线程。如果第一个任务恰好被阻止等待其他人做某事，那么你就陷入了僵局。由于其他任务在第一个任务完成后才会开始运行，因此无法解除对主线程的阻塞。

而不是`whatever.run()`，尝试`new Thread(whatever).start()`。（或者，如果您的类`Thread`出于某种原因扩展，只需`whatever.start()`. 但最好将它们修复为实现；除非您更改线程的工作方式，否则`Runnable`不要扩展。）`Thread`

# c# - ServiceStack razor 默认页面

> ID：13206038
> 
> 赞同：16
> 
> 时间：2012-11-03T04:45:12.380
> 
> 标签：c#, servicestack

假设我有 2 页

1.  `/NotADefault.cshtml`

2.  `/Views/Default.cshtml`

**问题 1。**

现在我运行它，`A`无论我如何命名，页面总是被隐式调用为启动默认页面。 只有当我明确调用 localhost/View/Default 时才会调用
页面。`B`如何将页面`B`（视图文件夹中的那个）设为我的默认页面？

**问题2。**

我也有`NotADefaultService.cs`和`DefaultService.cs`。我在每个页面的后面都给了一个服务类。但是，当页面`A`被调用时，`NotADefaultService.cs`永远不会被调用。只有`DefaultService.cs`在页面`B`被调用时才会被调用......

我的观察是，只有`View`文件夹中的页面才能使其后端服务类正常工作。在文件夹之外`View`它不起作用。

**结合 Q1 和 Q2。**

我如何：

**选项 1.**让后端服务类在`/ root`“查看”文件夹之外工作？

或者

**选项 2.**`/View/Default.schtml`在启动时指定我的默认服务类可以被击中？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-03T05:20:52.363

在[ServiceStack](http://www.servicestack.net/)中：

*   文件夹中存在的 Razor 页面`/Views/`称为**查看页面**
*   存在于其他任何地方的 Razor 页面称为**内容页面**

它们之间的区别在于，**视图页面**是用于为**服务**提供 HTML 表示（也称为视图）的 Razor 视图，其方式与视图页面用于 MVC 控制器的方式大致相同。

View Pages**不能**直接调用，这就是**Content Pages**的作用，**只能**直接调用，即在服务的上下文之外（或从服务重定向到）。

在[Razor Rockstars](http://razor.servicestack.net/)中，内容页面的示例包括：

*   [/stars/dead/cobain/](http://razor.servicestack.net/stars/dead/cobain/)调用[/stars/dead/Cobain/default.cshtml](https://github.com/ServiceStack/RazorRockstars/blob/master/src/RazorRockstars.WebHost/stars/dead/Cobain/default.cshtml)内容页面
*   [/TypedModelNoController](http://razor.servicestack.net/TypedModelNoController)调用[/TypedModelNoController.cshtml](https://github.com/ServiceStack/RazorRockstars/blob/master/src/RazorRockstars.WebHost/TypedModelNoController.cshtml)内容页面

而**查看页面**的示例包括：

*   [/](http://razor.servicestack.net/rockstars) rockstars匹配[/RockstarsService.cs](https://github.com/ServiceStack/RazorRockstars/blob/master/src/RazorRockstars.WebHost/RockstarsService.cs)`/rockstars`上的路线，并且由于该属性，使用[/Rockstars.cshtml](https://github.com/ServiceStack/RazorRockstars/blob/master/src/RazorRockstars.WebHost/Views/Rockstars.cshtml)**查看页面**`[DefaultView("Rockstars")]`

 **## 默认页面

对于**内容页面**，`default.cshtml`它是文件夹的索引页面。因此，要为根`/`路径设置默认页面，请创建一个`/default.cshtml`页面。[可重用性](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/Reusability)演示中使用的[/default.cshtml](https://github.com/ServiceStack/ServiceStack.UseCases/blob/master/Reusability/default.cshtml)主页就是一个例子。

如果要将视图页面用作主页，可以通过添加 AppHost 配置来设置默认重定向：

```
SetConfig(new HostConfig { 
   DefaultRedirectPath = "/home"
}); 
```

[根据Razor Rockstars](http://razor.servicestack.net/)页面中列出的规则，这将调用匹配路线的**服务**，该路线将使用最合适的查看页面。`/home`**

# javascript - 在没有 JQuery 的情况下检测鼠标移动

> ID：13206042
> 
> 赞同：14
> 
> 时间：2012-11-03T04:46:27.247
> 
> 标签：javascript, mouse

我正在寻找一小段 javascript 来检查鼠标移动，如果它确实执行一个函数。我希望在**没有 jquery**的情况下执行此操作，并且最好与大多数现代浏览器兼容。我有这个小脚本可以检测鼠标何时不移动：

```
<script>
document.onmousemove = (function() {
  var onmousestop = function() {
    /* do stuff */
  }, thread;

  return function() {
    clearTimeout(thread);
    thread = setTimeout(onmousestop, 500);
  };
})();
</script> 
```

我希望在加载脚本后第一次移动鼠标时可以将事情编辑为触发执行操作？有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-03T09:53:21.173

[Amit 解决方案](https://stackoverflow.com/a/13206146/27862)的问题在于它删除了任何现有的 mousemove 侦听器。此外，第一次移动鼠标时它不会清理，因此会产生不必要的开销。

这是这样做的干净方式：

```
var myListener = function () {
    document.removeEventListener('mousemove', myListener, false);
    // do stuff
};

document.addEventListener('mousemove', myListener, false); 
```

在行动中看到它：http: [//jsfiddle.net/JQBmA/](http://jsfiddle.net/JQBmA/)

如果您需要支持较旧的 IE，可以使用以下命令：

```
var addListener, removeListener;
if (document.addEventListener) {
    addListener = function (el, evt, f) { return el.addEventListener(evt, f, false); };
    removeListener = function (el, evt, f) { return el.removeEventListener(evt, f, false); };
} else {
    addListener = function (el, evt, f) { return el.attachEvent('on' + evt, f); };
    removeListener = function (el, evt, f) { return el.detachEvent('on' + evt, f); };
}

var myListener = function () {
    removeListener(document, 'mousemove', myListener);
    // do stuff
};

addListener(document, 'mousemove', myListener); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T05:08:44.820

```
(function(){
   var moved = false
   window.onmousemove = function(e){
      if(!moved){
          moved = true;
          // do what you want after mousemove, here
      }
   }
})() 
```

# php - 从不同方面获取字符串的子字符串

> ID：13206044
> 
> 赞同：1
> 
> 时间：2012-11-03T04:46:58.350
> 
> 标签：php

我需要从一个字符串中获取子字符串，它将从不同方面输出前 25 个字符。这里的子字符串应该只考虑逗号 (,) 而不是空格。

*场景一：*

```
$str = "the, quick, brown, fox";

$res = "the, quick, brown, fox"; 
```

*场景二：*

```
$str = "the, quick, brown, fox, jumps, over, the, lazy, dog!";

$res = "the, quick, brown, fox, more"; 
```

*场景 3：*

```
$str = "the quick, brown fox, jumps over, the lazy dog!";

$res = "the quick, brown fox, more"; 
```

*场景四：*

```
$str = "the quick brown fox, jumps over, the lazy dog!";

$res = "the quick brown fox, more"; 
```

请帮忙！谢谢。

*非常对不起我的英语！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:38:32.453

全部 4 个场景测试

（假设逗号在前 25 个字符内）

```
function stringm($string, $length = 25){

   if(strlen($string) >= $length){
       $string = substr($string, 0, $length-1);
        $str_array = explode(",", $string);
        // add logics here to check array len if comma may not be within the first 25 characters 
        array_pop($str_array);
        $string = implode(",", $str_array)  . ', more';
   }

   return $string;
}

echo stringm('the, quick, brown, fox')  . '<br>';
echo stringm('the, quick, brown, fox, jumps, over, the, lazy, dog!')  . '<br>';
echo stringm('the quick, brown fox, jumps over, the lazy dog!')  . '<br>';
echo stringm('the quick brown fox, jumps over, the lazy dog!')  . '<br>'; 
```

的, 快速的, 棕色的, 狐狸

的, 快速的, 棕色的, 狐狸, 更多

敏捷的棕色狐狸，更多

敏捷的棕色狐狸，更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:19:41.200

好吧，我只是想出了一个解决方案。我不确定可行性，但它对我很有用。

*方法：*

```
function excerpt($string, $length = 25) {
$new_string = $string;

if(strlen($string) >= $length) {
    $new_string = "";
    $array = explode(',', $string);
    $current = 0;
    for($i = 0; $i < count($array); $i++) {
        $current+= strlen($array[$i])+1;
        if($current <= $length)
            $new_string.= $array[$i].",";
        else {
            $new_string.= " more";
            $i = count($array);
        }
    }       
}
return $new_string; 
```

}

*输入：*

```
echo excerpt('the, quick, brown, fox').'<br>';
echo excerpt('the, quick, brown, fox, jumps, over, the, lazy, dog!').'<br>';
echo excerpt('the quick, brown fox, jumps over, the lazy dog!').'<br>';
echo excerpt('the quick brown, fox jumps over, the lazy dog!').'<br>';
echo excerpt('the quick brown fox, jum, ps, over, the lazy dog!').'<br>'; 
```

*输出：*

```
the, quick, brown, fox
the, quick, brown, fox, more
the quick, brown fox, more
the quick brown, more
the quick brown fox, jum, more 
```

此代码仅由我测试过。如有错误或异常，请反馈。谢谢。

# html - 页面加载时 IFrame 和 Adsense 闪烁/重新加载 - 原因和解决方案？

> ID：13206060
> 
> 赞同：0
> 
> 时间：2012-11-03T04:49:46.827
> 
> 标签：html, iframe, ads, adsense, flicker

这里的问题是当我在页面上有一些 iframe 和广告时 - 我看到它们闪烁（就像它们正在重新加载）几次，直到全部加载。除了看起来很糟糕之外，它们还会导致我的广告在一两次闪烁后消失。

消失的广告在不同的计算机和浏览器之间随机发生。通常一个广告会消失，而另一个广告会留下。

我尝试将它们中的每一个嵌套在 div 中，但没有奏效。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T06:53:00.777

事实证明，我有一个脚本可以更改 innerHTML，从而导致 iframe 和脚本重新加载。

# .net - 使用 SMO 附加数据库时，数据库是只读的

> ID：13206062
> 
> 赞同：0
> 
> 时间：2012-11-03T04:50:22.393
> 
> 标签：.net, smo

我只是想分离一个数据库，然后使用一对不同的 mdf/ldf 文件重新附加它，使用如下代码：

```
Server server = GetMyServer();
server.AttachDatabase(myDatabaseName, new StringCollection { mdfFile, ldfFile }, AttachOptions.None); 
```

但是，当我在 Management Studio 中查看上述代码的结果时，我附加的数据库是只读的。关于为什么以及如何解决这个问题的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T00:24:15.313

没关系，愚蠢的疏忽：我意识到这是文件夹权限的问题。包含要附加的数据库文件的目录的设置不正确。

# android - Galaxy Nexus Android 开发，如何在可移植到 PC 的文件中写入日期

> ID：13206066
> 
> 赞同：1
> 
> 时间：2012-11-03T04:51:01.910
> 
> 标签：android, nexus-s

嗨，我是 Android 上的新手开发人员。目前我正在开发一个需要处理大数据的应用程序，由于计算成本，理想情况下我计划从手机收集数据并将它们发送到电脑。

这种情况的特殊情况是nexus没有SD卡访问权限，而且目前我的访问网络有限，这意味着我无法通过网络发送数据。

我在网上搜索了几个例子，似乎他们都使用一些文件 iostream 来操作手机上的数据。在我看来，如果文件在手机中，我会以某种方式得到它，但我不能！并且没有在线教程清楚地指出创建数据文件的位置。

有人可以帮助我如何将数据传输到电脑吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:12:02.200

如果您能够创建文件，那么路径将是

如果 AndroidManifest.xml 中提到的根包是例如：abc

然后你会在 /data/data/abc/ 的某个地方获取文件，尝试使用 adb mount, pull 命令来获取文件。

# php - 使用 JSON 插入数据库

> ID：13206067
> 
> 赞同：0
> 
> 时间：2012-11-03T04:51:37.407
> 
> 标签：php, jquery, database, json

尝试使用表单和 JSON 将内容添加到我的数据库。我的查询通过 phpmyadmin 运行良好，但由于某种原因，我的 PHP 文件无法从我的表单中接收信息。

（请给我保存典型的“不要使用 mysql 函数”。）

Chrome 的网络预览向我展示了这一点：

```
 data: null
      debug: "SQL query was: INSERT INTO linktb (catName, title, desc, URL) VALUES ('1', '', '', '');<br>SQL query failed <br>Other output: "
      retval: 2 
```

调试我的 update.php：

```
 {"retval":2,"data":null,"debug":"SQL query was: INSERT INTO linktb (catName, title, desc, URL) VALUES ('', '', '', '');
      SQL query failed 
      Other output: "} 
```

HTML & JS：

```
 <form method="post" id="addURL" name="addURL" method="post">
            <select id="catList" name="catList">
            <option value="1">Milk</option>
            <option value="2">Coffee</option>
            <option value="3">Tea</option>
            </select><br />
            <input id="title" name="title" type="text" placeholder="Title"><br />
            <input id="desc" name="desc" type="text" placeholder="Description"><br />                
            <input id="URL" name="URL" type="text" placeholder="URL"><br />
            <input id="key" name="key" type="text" placeholder="Key"><br />
            <input type="submit" value="Submit">
      </form>

<script type="text/javascript">
$(document).ready(function(){   
    $("#addURL").submit(function(e) {
        e.preventDefault();
        var action = $("#addURL").attr('action');
        var form_data = {
            catList: $("#catList").val(),
            title: $("#title").val(),
            desc: $("#desc").val(),
            URL: $("#URL").val(),
            key: $("#key").val(),
        };
    $.getJSON("update.php",form_data,function(data){
        switch(data.retval){
            case 0: $("#status").html("Unable to update!");
                    $("#status").css("background-color","red");
            break;
            case 1: $("#status").html("Update successful!");
                    $("#status").css("background-color","green");
            break;
            default: $("#status").html("Database error, please try again.");
                    $("#status").css("background-color","red");
            break;
        }
    });
});         
}); 
```

PHP：

```
$json = array("retval" => 2, "data" => NULL, "debug" => "");

$catList = mysql_real_escape_string($_REQUEST['catList']);
$title = mysql_real_escape_string($_REQUEST['title']);
$desc = mysql_real_escape_string($_REQUEST['desc']);
$URL = mysql_real_escape_string($_REQUEST['URL']);
$key = mysql_real_escape_string($_REQUEST['key']);

$sql = "INSERT INTO linktb (catName, title, desc, URL) VALUES ('".$catList."', '".$title."', '".$desc."', '".$URL."');";

$json['debug'] .= "SQL query was: ".$sql."<br>";
$result=mysql_query($sql);
if (!$result) {
    $json['debug'] .= "SQL query failed <br>";
    $json['debug'] .= "Other output: ". ob_get_contents();
    ob_end_clean();
    die(json_encode($json));
}
$count=mysql_num_rows($result);

if($count==1){
    $json['retval'] = 0;
    $json['data'] = mysql_fetch_assoc($result);
} else {
    $json['retval'] = 1;
}
$json['debug'] .= "Other output: ". ob_get_contents();
ob_end_clean();
echo json_encode($json); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:08:25.357

好吧，在这里试一试。您似乎从未提交过表单。我假设你想通过 ajax 来做到这一点。

```
 $("#addURL").submit(function(e) {
    e.preventDefault();
    //now what? try serializing your form and sending it via json
    $formData = $(this).serialize()
    $.ajax(url, {
        data : JSON.stringify($formData),
        dataType: 'json',
        contentType : 'application/json',
        type : 'POST'}
    );
 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:36:55.917

我使用的 Javascript 和 HTML 很好，结果我在 MYSQL 中使用了“desc”这个词，它代表降序而不是我想要使用的 var。

# silverlight - 应用程序的隐式样式

> ID：13206069
> 
> 赞同：1
> 
> 时间：2012-11-03T04:52:02.460
> 
> 标签：silverlight, xaml

隐式样式在 App.xaml 中不起作用，但正在使用本地页面资源。如何为控件制作全局样式？

```
<navigation:Page.Resources>
 <Style TargetType="Button">
  <Setter Property="Background" Value="Red" />
  <Setter Property="Foreground" Value="Navy" />
 </Style>
</navigation:Page.Resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:55:30.760

在 App.xaml 中

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="StilDict.xaml" />
        </ResourceDictionary.MergedDictionaries>
 </ResourceDictionary> 
```

在 StilDict.xaml 中

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
  ,,,, and what you use else>
<Style x:Key="ButtonStyleNavyOnRed" TargetType="Button">
<Setter Property="Background" Value="Red" />
<Setter Property="Foreground" Value="Navy" />
</Style> 
```

在项目的任何地方使用样式

```
 <UserControl>
    <Button Style={StaticResource ButtonStyleNavyOnRed} Content="Yahoo! :)"/>
 </UserControl> 
```

重要说明，如果您删除 x:Key="ButtonStyleNavyOnRed" 部分，则所有 Target 类型都将获得此样式，但不是 Button 派生对象。[http://msdn.microsoft.com/en-us/library/system.windows.style(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.style(v=vs.95).aspx)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:52:58.383

这适用于按钮！

```
<Style TargetType="ButtonBase">
 <Setter Property="Background" Value="Red" />
 <Setter Property="Foreground" Value="Navy" />
</Style> 
```

# ios - 如何使用分页显示表格的更改内容

> ID：13206077
> 
> 赞同：-1
> 
> 时间：2012-11-03T04:53:25.160
> 
> 标签：ios, objective-c, algorithm

我正在使用带有 uitableview 的分页。我有 40 个对象的数组。在 numberofrowsinasection 方法中，我返回 10 行。它的平均总页数是四。在 pagecontrol 方法中，我正在实现分页。当我喜欢

```
-(ibaction) pagecontrol:
{
    if (pagecontrol.currentpage == 0)
    {
        for (int i=0; i<10; i++  )
        {
            cell.textlabel.text = [objectarray objectatindex:i];
        }
    }

    if (pagecontrol.currentpage == 1)
    {
        for (int i=10; i<19; i++  )
        {
            cell.textlabel.text = [objectarray objectatindex:i];
        }
    }

    if (pagecontrol.currentpage == 2)
    {
        for (int i=20; i<29; i++  )
        {
            cell.textlabel.text = [objectarray objectatindex:i];
        }
    }

    if (pagecontrol.currentpage == 3)
    {
        for (int i=30; i<39; i++  )
        {
            cell.textlabel.text = [objectarray objectatindex:i];
        }
    }
} 
```

但是我在uiableview中发现了一个奇怪的结果。这是对的吗？我在哪里做这个pagecontrol方法的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:09:45.223

你总是正好有 40 行，还是可以更少？

您发布的代码以缺少方法参数开头。冒号后面应该没有冒号或参数（带有数据类型）。

您发布的代码存在几个问题。最大的问题是您将同一单元格的文本设置了 10 次。您需要设置 10 个单元格的文本，每个单元格一次。

不管怎样，你做的都是错的。用这个替换你发布的方法：

```
-(IBAction)pagecontrol:(UIPageControl *)pageControl {
    [self.tableView reloadData];
} 
```

然后，在您的`tableView:cellForRowAtIndexPath:`方法中，您应该执行以下操作：

```
- (void)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableView *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }

    int base = pagecontrol.currentPage * 10;
    int index = base + indexPath.row;
    NSString *text = objectArray[index];

    cell.textLabel.text = text;

    return cell;
} 
```

这是您的`numberOfSectionsInTableView:`and`tableView:numberOfRowsInSection:`方法的补充。

这就是你所需要的。

顺便说一句 - 情况很重要。不要用小写字母输入所有内容。用正确的大小写正确输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:22:51.073

您在分页中使用常量行来使用 tableview 中的部分。它区分页面中的行，如下所示：

![在此处输入图像描述](../Images/bde1c7f9f7bf677192b1ee88a35c5c36.png)

设置tableview中的section数量：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 4;
}

// Set rows in section
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    switch(section){
       case 0:
       return 10;
       break;
       case 1:
       return 10;
       break;
       .....
       .....
    }
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *FirstLevelCell= @"FirstLevelCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:FirstLevelCell];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:FirstLevelCell] autorelease];
    }

    switch([indexPath section]){
        case 0:
        {
            //Add your code
        }
        break;
        case 1:
        {
            //Add your code
        }
        break;
        .........
        .........
        .........
        .........
        .........
    }
}

//Reload table view
[self.tableView reloadData]; 
```

# c - Mastermind游戏的字符串比较

> ID：13206078
> 
> 赞同：0
> 
> 时间：2012-11-03T04:53:42.647
> 
> 标签：c, string, compare, pattern-matching

我正在编写一个模拟游戏 Mastermind 的程序，但我正在努力将猜测的模式与关键模式进行比较。游戏条件略有变化：

*   图案由字母组成。
*   如果猜测模式的元素等于关键模式的元素，并且索引也相等，则打印b。
*   如果猜测模式的元素等于关键模式的元素，但索引不等于，则打印 w。
*   如果猜测模式的元素不等于关键模式的元素，则打印点。
*   在关于猜测模式的反馈中，'b's first, 'w's second, '.'s last.

### 原始密钥与猜测模式匹配代码

```
 for (i=0; i<patternlength; i++)
    {
        for (x=0; x<patternlength; x++)
        {
           if (guess[i]==key[x] && i==x)
                printf("b");
            if (guess[i]==key[x] && i!=x)
                printf("w");
            if (guess[i]!=key[x])
                printf(".");
        }   
    } 
```

### 修改后的代码

这是使用[Jonathan Leffler](https://stackoverflow.com/users/15168/jonathan-leffler)提供的一些答案。不幸的是，它还不能正常工作。你能帮助我吗？

函数length() 和guessnum() 已经定义好了。

```
#include<stdio.h>
#include<string.h>
int length()
{
  int length;
  printf("Enter the pattern length: ");
  scanf("%d", &length);
  return length;
}
int guessnum()
{
  int guessnum;
  printf("Enter the number of guesses: ");
  scanf("%d", &guessnum);
  return guessnum;
}
int main(void)
{
  int patternlength = length();
  char key[patternlength+1];      
  char keyc[patternlength+1];    
  int numguess = guessnum();
  char guess[patternlength+1];    
  printf("Input the key pattern with no spaces: ");
  scanf("%s", key);
  int i,j,count = 1;
  int bcount = 0, wcount = 0;
  char guessc[patternlength+1];
  guessc[0] = '\0';            
  int ind;
  char output[patternlength];
  for (ind=0; ind<(patternlength+1); ind++)
    output[ind]='\0';
  char outputc[patternlength+1];
  char guessold[patternlength+1];
  for (ind=0; ind<(patternlength+1); ind++)
  guessold[ind]='\0';
  while (strcmp(key, guess) !=0 && count<=numguess)
    {
      if(count>1)
    strcpy(guessold, guess);
      strcpy(keyc, key);          
      printf("Input a guess pattern with no spaces: ");
      scanf("%s", guess);
      if (count>1)
    printf("%d: %s %s\n", count-1, output, guessold);
      strcpy(guessc, guess);
      wcount = 0;    
      bcount = 0;     
      printf("%d: ", count);
      for (i = 0; i < patternlength; i++)
    {
      if (keyc[i] == guessc[i])
        {
          putchar('b');
          keyc[i] = guessc[i] = '.';
          bcount++;
          for (ind=0; ind<patternlength; ind++)
        output[ind]='b';
        }
    }
      if (bcount != patternlength)
    {
      for (i = 0; i < patternlength; i++)
        {
          if (guessc[i] != '.')
        {

          for (j = 0; j < patternlength; j++)
            {

              if (guessc[i] == keyc[j])
            {
              wcount++;
              putchar('w');
              for (ind=0; ind<patternlength; ind++)
                if (output[ind]!='b')
                  output[ind]='w';

              keyc[j] = guessc[i] = '.';
              break;
            }
            }
        }
        }
      for (i = bcount  +  wcount; i < patternlength; i++)
        putchar('.');
      for (ind=bcount+wcount; ind<patternlength; ind++)
        output[ind]='.';
    }
      count++;
      printf(" %s\n", guess);
      strcpy(outputc, output);
    }
  if (strcmp(key, guess) != 0)
    {
      printf("You did not guess the pattern!\n");
    }
  else 
    {
      printf("You guessed the pattern!\n");
    }
  return 0;
} 
```

上面代码的输出：

```
Enter the pattern length: 3
Enter the number of guesses: 3
Input the key pattern with no spaces: abc
Input a guess pattern with no spaces: acb
1: bww acb
Input a guess pattern with no spaces: abb
1: bbb acb
2: bb. abb
Input a guess pattern with no spaces: abc
2: bb. abb
3: bbb abc
You guessed the pattern! 
```

***所需输出：***

```
 Enter the pattern length: 3
    Enter the number of guesses: 3
    Input the key pattern with no spaces: abc
    Input a guess pattern with no spaces: acb
    1: bww acb
    Input a guess pattern with no spaces: abb
    1: bww acb
    2: bb. abb
    Input a guess pattern with no spaces: abc
    1: bww acb
    2: bb. abb
    3: bbb abc
    You guessed the pattern! 
```

我尝试使用另外一个字符串，它将在其中存储猜测的反馈，但是当有多个猜测时，我认为我应该使用某种循环来打印每次新猜测时所有先前猜测的反馈。但我很难弄清楚我应该如何使用[Jonathan Leffler](https://stackoverflow.com/users/15168/jonathan-leffler)建议的结构编写这个循环。

我在代码中添加了最后一次更正，所以我几乎达到了所需的输出。有谁知道在这里可以做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:12:01.050

我假设有一个结构（便于复制其中包含的数组），并且输入验证确保密钥和猜测的长度相同，并且密钥和猜测只包含字母字符。

```
typedef struct pattern
{
    char pattern[8];
} pattern;

size_t print_scoring(pattern key, pattern guess)
{
    size_t n = strlen(key.pattern);
    assert(n == strlen(guess.pattern));
    size_t bcount = 0;
    for (size_t i = 0; i < n; i++)
    {
        if (key.pattern[i] == guess.pattern[i])
        {
            putchar('b');
            key.pattern[i] = guess.pattern[i] = '.';
            bcount++;
        }
    }
    if (bcount != n)
    {
        size_t wcount = 0;
        for (size_t i = 0; i < n; i++)
        {
            if (guess.pattern[i] != '.')
            {
                for (size_t j = 0; j < n; j++)
                {
                    if (guess.pattern[i] == key.pattern[j])
                    {
                        wcount++;
                        putchar('w');
                        guess.pattern[i] = key.pattern[j] = '.';
                        break;
                    }
                }
            }
        }
        for (size_t i = bcount + wcount; i < n; i++)
            putchar('.');
    }
    return bcount;
} 
```

该函数适用于键和模式的副本（结构通过值传递，而不是通过指针传递）。它返回正确位置的正确猜测次数；它假定调用代码知道模式有多长，因此调用代码可以判断模式何时正确。它通过将猜测和关键字符替换为“.”来将它们标记为“已使用”。这对于防止 的键`"aba"`和猜测`"aaa"`被错误地标记为`bbw`而不是正确地标记为 很重要`bb.`。这在长度为 4 或更多的键/猜测中更为重要。

### 测试线束

```
#include <assert.h>
#include <string.h>
#include <stdio.h>

int main(void)
{
    enum { NUM_KEYS = 3, NUM_GUESSES = 5 };
    pattern k[] = { { "abc" }, { "aba" }, { "aaa" } };
    pattern g[] = { { "aaa" }, { "aab" }, { "abc" }, { "cba" }, { "bab" } };
    for (int i = 0; i < NUM_KEYS; i++)
    {
        for (int j = 0; j < NUM_GUESSES; j++)
        {
            printf("Key: %s; Guess %s; Score: ", k[i].pattern, g[j].pattern);
            size_t n = print_scoring(k[i], g[j]);
            if (n == 3)
                printf(" -- Correct!");
            putchar('\n');
        }
    }
    return(0);
} 
```

### 测试输出

```
Key: abc; Guess aaa; Score: b..
Key: abc; Guess aab; Score: bw.
Key: abc; Guess abc; Score: bbb -- Correct!
Key: abc; Guess cba; Score: bww
Key: abc; Guess bab; Score: ww.
Key: aba; Guess aaa; Score: bb.
Key: aba; Guess aab; Score: bww
Key: aba; Guess abc; Score: bb.
Key: aba; Guess cba; Score: bb.
Key: aba; Guess bab; Score: ww.
Key: aaa; Guess aaa; Score: bbb -- Correct!
Key: aaa; Guess aab; Score: bb.
Key: aaa; Guess abc; Score: b..
Key: aaa; Guess cba; Score: b..
Key: aaa; Guess bab; Score: b.. 
```

* * *

## 从评论中

> 为什么我的代码不起作用？你能看看吗？问题是输入猜测模式后我无法进行下一步。也许我没有在我的代码中看到一些错误。

即时响应：

我回答的关键点之一是比较代码正在处理输入数据的副本。这是一种破坏性比较算法，在数据上写点。您尝试将我的代码合并到您的程序中并没有保留处理数据的单独副本的单独函数，这是该答案的关键部分。结构的使用可以方便地传递数据的副本（这是 C 自动为您复制数组的一次）。比较代码应该在它自己的函数中，而不是内联在`main()`.

但是，我们可以让给定的代码工作。有一些转录错误（下面标记为 BUG），还有一些其他问题（也在下面确定）。

### 有问题的修订代码的工作版本

这是您的程序的工作版本，带有重要更改的注释。非关键更改包括运算符周围的间距和使用 4 个空格的缩进级别。

```
#include <string.h>
#include <stdio.h>

static int length(void) { return 3; }    // Dummy function
static int guessnum(void) { return 5; }  // Dummy function

int main(void)
{
    int patternlength = length();
    char key[patternlength+1];      // Buffer overflow
    char keyc[patternlength+1];     // Copy of key
    int numguess = guessnum();
    char guess[patternlength+1];    // Buffer overflow
    printf("Input the key pattern with no spaces: ");
    scanf("%s", key);
    int i,j,count = 1;
    int bcount = 0, wcount = 0;
    char guessc[patternlength+1];   // Buffer overflow
    guessc[0] = '\0';               // Initialize!
    while (strcmp(key, guess) != 0 && count <= numguess)
    {
        strcpy(keyc, key);          // Copy key too
        printf("Input a guess pattern with no spaces: ");
        scanf("%s", guess);
        strcpy(guessc, guess);

        wcount = 0;     // Reinitialize
        bcount = 0;     // Reinitialize
        printf("%d: ", count);
        for (i = 0; i < patternlength; i++)
        {
            if (keyc[i] == guessc[i])
            {
                putchar('b');
                keyc[i] = guessc[i] = '.';
                bcount++;
            }
        }
        if (bcount != patternlength)    // Extraneous semi-colon excised! ;
        {
            for (i = 0; i < patternlength; i++)
            {
                if (guessc[i] != '.')
                {
                    //for (j = 0; i < patternlength; j++) BUG
                    for (j = 0; j < patternlength; j++)
                    {
                        //if (guessc[i] == keyc[i]) BUG
                        if (guessc[i] == keyc[j])
                        {
                            wcount++;
                            putchar('w');
                            //guessc[i] = keyc[i];  BUG
                            keyc[j] = guessc[i] = '.';
                            break;
                        }
                    }
                }
            }
            for (i = bcount  +  wcount; i < patternlength; i++)
                putchar('.');
        }
        count++;
        printf(" %s\n", guess);
    }
    if (strcmp(key, guess) != 0)
    {
        printf("You did not guess the pattern!\n");
    }
    else 
    {
        printf("You guessed the pattern!\n");
    }
    return 0;
} 
```

编译器告诉我有关杂散分号的信息：

```
ss2.c: In function ‘main’:
ss2.c:36:37: warning: suggest braces around empty body in an ‘if’ statement [-Wempty-body] 
```

如果您的编译器没有告诉您这一点，则说明您没有使用足够的警告（或者您需要更好的编译器）。我经常使用：

```
gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
    -Wold-style-definition ss2.c -o ss2 
```

工作代码毫不费力地通过了它。

### 样本输出

```
Input the key pattern with no spaces: abc
Input a guess pattern with no spaces: aaa
1: b.. aaa
Input a guess pattern with no spaces: bbb
2: b.. bbb
Input a guess pattern with no spaces: ccc
3: b.. ccc
Input a guess pattern with no spaces: cab
4: www cab
Input a guess pattern with no spaces: abc
5: bbb abc
You guessed the pattern! 
```

### 最终的调试代码

这主要是为了显示我以前看问题的打印水平。用于`stderr`诊断输出意味着诊断不会干扰`stdout`输出线路的缓冲。这一点以及在调试代码上不使用缩进也意味着很容易剥离调试代码。

```
#include <string.h>
#include <stdio.h>

static int length(void) { return 3; }
static int guessnum(void) { return 5; }

int main(void)
{
    int patternlength = length();
    char key[patternlength+1];      // Buffer overflow
    char keyc[patternlength+1];     // Copy of key
    int numguess = guessnum();
    char guess[patternlength+1];    // Buffer overflow
    printf("Input the key pattern with no spaces: ");
    scanf("%s", key);
    int i,j,count = 1;
    int bcount = 0, wcount = 0;
    char guessc[patternlength+1];   // Buffer overflow
    guessc[0] = '\0';               // Initialize!
    while (strcmp(key, guess) != 0 && count <= numguess)
    {
        strcpy(keyc, key);          // Copy key too
        printf("Input a guess pattern with no spaces: ");
        scanf("%s", guess);
        strcpy(guessc, guess);

fprintf(stderr, "B1: (%s) vs (%s)\n", key, guess);
fprintf(stderr, "B2: (%s) vs (%s)\n", keyc, guessc);
        wcount = 0;     // Reinitialize
        bcount = 0;     // Reinitialize
        printf("%d: ", count);
        for (i = 0; i < patternlength; i++)
        {
fprintf(stderr, "L1a: %d\n", i);
            if (keyc[i] == guessc[i])
            {
fprintf(stderr, "L1b: B (%c = %c)\n", keyc[i], guessc[i]);
                putchar('b');
                keyc[i] = guessc[i] = '.';
                bcount++;
            }
        }
fprintf(stderr, "M1: (%s) vs (%s)\n", keyc, guessc);
        if (bcount != patternlength)    // Extraneous semi-colon excised! ;
        {
fprintf(stderr, "L2a: b = %d (%s) vs (%s)\n", bcount, keyc, guessc);
            for (i = 0; i < patternlength; i++)
            {
fprintf(stderr, "L2b: %d (%c)\n", i, guessc[i]);
                if (guessc[i] != '.')
                {
fprintf(stderr, "L2c: %d (%c)\n", i, guessc[i]);
                    //for (j = 0; i < patternlength; j++) BUG
                    for (j = 0; j < patternlength; j++)
                    {
fprintf(stderr, "L2d: %d (%c) vs %d (%c)\n", i, guessc[i], j, keyc[j]);
                        //if (guessc[i] == keyc[i]) BUG
                        if (guessc[i] == keyc[j])
                        {
fprintf(stderr, "L2e: W %d (%c) vs %d (%c)\n", i, guessc[i], j, keyc[j]);
                            wcount++;
                            putchar('w');
                            keyc[j] = guessc[i] = '.';
                            //guessc[i] = keyc[i];  BUG
                            break;
                        }
                    }
                }
            }
fprintf(stderr, "L3a: %d + %d vs %d\n", bcount, wcount, patternlength);
            for (i = bcount  +  wcount; i < patternlength; i++)
fprintf(stderr, "L3b: D %d\n", i),
                putchar('.');
        }
        count++;
        printf(" %s\n", guess);
    }
    if (strcmp(key, guess) != 0)
    {
        printf("You did not guess the pattern!\n");
    }
    else 
    {
        printf("You guessed the pattern!\n");
    }
    return 0;
} 
```

`fprintf()`请注意在最后一次函数调用之后使用逗号运算符的技巧。

### 记录以前的猜测和标记

```
#include <stdarg.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static void err_exit(const char *msg, ...);
static void prompt_str(const char *prompt, int bufsiz, char *buffer);
static int  prompt_int(const char *prompt);

int main(void)
{
    int  patternlength = prompt_int("Length of key");
    int  numguess = prompt_int("Number of guesses");
    char key[patternlength+1];
    char guesses[numguess][patternlength+1];
    char marks[numguess][patternlength+1];
    int  count = 0;

    prompt_str("Input the key pattern with no spaces", patternlength, key);

    while (count < numguess)
    {
        char guess[patternlength+1];
        char keyc[patternlength+1];
        char mark[patternlength+1];
        char *marker = mark;
        int wcount = 0;
        int bcount = 0;

        strcpy(keyc, key);
        prompt_str("Input a guess pattern with no spaces", patternlength, guess);
        strcpy(guesses[count], guess);

        for (int i = 0; i < patternlength; i++)
        {
            if (keyc[i] == guess[i])
            {
                *marker++ = 'b';
                keyc[i] = guess[i] = '.';
                bcount++;
            }
        }
        if (bcount == patternlength)
            break;
        for (int i = 0; i < patternlength; i++)
        {
            if (guess[i] == '.')
                continue;
            for (int j = 0; j < patternlength; j++)
            {
                if (guess[i] == keyc[j])
                {
                    wcount++;
                    *marker++ = 'w';
                    keyc[j] = guess[i] = '.';
                    break;
                }
            }
        }
        for (int i = bcount  +  wcount; i < patternlength; i++)
            *marker++ = '.';
        *marker = '\0';
        strcpy(marks[count], mark);
        count++;
        for (int i = 0; i < count; i++)
            printf("Guess: %d [%s] marks [%s]\n", i, guesses[i], marks[i]);
    }
    if (count >= numguess)
        printf("You did not guess the pattern (which was [%s])!\n", key);
    else 
        printf("You guessed the pattern!\n");
    return 0;
}

static void prompt_str(const char *prompt, int bufsiz, char *buffer)
{
    char fmt[8];
    int  c;

    sprintf(fmt, "%%%ds", bufsiz);
    printf("%s: ", prompt);
    if (scanf(fmt, buffer) != 1)
        err_exit("Unexpected input failure\n");
    while ((c = getchar()) != EOF && c != '\n')
        ;
}

static int prompt_int(const char *prompt)
{
    int number;
    printf("%s: ", prompt);
    if (scanf("%d", &number) != 1)
        err_exit("Unexpected input failure\n");
    if (number <= 0 || number > 9)
        err_exit("Number should be in the range 1..9 (not %d)\n", number);
    return(number);
}

static void err_exit(const char *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    vfprintf(stderr, fmt, args);
    va_end(args);
    exit(1);
} 
```

引入函数`prompt_int()`并`prompt_str()`获取数据。该`prompt_str()`函数对溢出具有相当的弹性。有错误报告功能。虚拟功能被替换。这是一些示例输出。从这里开始，你就靠自己了！

```
Length of key: 4
Number of guesses: 8
Input the key pattern with no spaces: abcd
Input a guess pattern with no spaces: aaaa
Guess: 0 [aaaa] marks [b...]
Input a guess pattern with no spaces: dcba
Guess: 0 [aaaa] marks [b...]
Guess: 1 [dcba] marks [wwww]
Input a guess pattern with no spaces: cdba
Guess: 0 [aaaa] marks [b...]
Guess: 1 [dcba] marks [wwww]
Guess: 2 [cdba] marks [wwww]
Input a guess pattern with no spaces: abcd
You guessed the pattern! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T05:42:33.180

您基本上将 的所有元素`key`与 的所有元素匹配`guess`，这不是您想要的。

您需要迭代`guess`并区分这三种情况

1.  元素猜对了
2.  元素未正确猜测但存在于键中
3.  元素未正确猜测且未出现在密钥中

    ```
    int i,k;
    bool found;

    for (i=0; i<patternlength; i++)
    {
        if (key[i] == guess[i])
        {
            printf("b");
        }
        else
        {
            found = false;
            for (k=0; k<patternlength && !found; k++)
            {
                if (key[k] == guess[i])
                {
                    found = true;
                    printf("w");
                }
            }
            if (!found)
            {
                printf(".");
            }
        }
    } 
    ```

请注意，在内部循环中，当我找到一个带有`&& !found`. 否则，我会遇到与您类似的问题（它将打印`w`与我的猜测相匹配的每个元素`key`）

# c# - 如何获取 JSON 格式的响应和请求？

> ID：13206079
> 
> 赞同：0
> 
> 时间：2012-11-03T04:53:56.820
> 
> 标签：c#, .net, json, wcf, wcf-ria-services

我没有得到 JSON 格式的输出。这是代码

---- **IService1.cs** ----

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    [WebInvoke(Method = "GET", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare, UriTemplate = "currency")]
    List<Employee> GetAllEmployeesMethod();

     [OperationContract]
     string TestMethod();

     [OperationContract]
     [WebInvoke(Method = "GET", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, UriTemplate = "players")]
     List<Person> GetPlayers();

} 
```

---- **Service1.svc.cs** ----

```
public List<Employee> GetAllEmployeesMethod()
{
    List<Employee> mylist = new List<Employee>();

    using (SqlConnection conn = new SqlConnection("--connection string--"))
    {
        conn.Open();

        string cmdStr = String.Format("Select customercode,CurrencyCode,CurrencyDesc from Currency");
        SqlCommand cmd = new SqlCommand(cmdStr, conn);
        SqlDataReader rd = cmd.ExecuteReader();

        if (rd.HasRows)
        {
            while (rd.Read())
                mylist.Add(new Employee(rd.GetInt32(0), rd.GetString(1), rd.GetString(2)));
        }
        conn.Close();
    }

    return mylist;
} 
```

---- **web.config** ----

```
 <?xml version="1.0"?>
  <configuration>
 <appSettings/>
 <connectionStrings/>
 <system.web>
<compilation debug="true" targetFramework="4.0"/>   
<authentication mode="Windows"/>    

<pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>
</system.web>
 <system.webServer>
<directoryBrowse enabled="true"/>
</system.webServer>
 <system.serviceModel>
<services>
  <service name="JSONSerialization.Service1" behaviorConfiguration="EmpServiceBehaviour">
    <!-- Service Endpoints -->
    <endpoint address="" binding="webHttpBinding" contract="JSONSerialization.IService1" behaviorConfiguration="web" >
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="EmpServiceBehaviour">        
      <serviceMetadata httpGetEnabled="true"/>          
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp automaticFormatSelectionEnabled="true" defaultOutgoingResponseFormat="Json" helpEnabled="true" defaultBodyStyle="Bare"/>          
    </behavior>
  </endpointBehaviors>
  </behaviors>   
  </system.serviceModel>  
  </configuration> 
```

当我运行这个服务时，我得到了数据 ![输出](../Images/0b8d30631d9028b68a7d05907783d9ab.png)

但我希望结果为 JSON 格式
**示例：** `{"currencycode":"INR","DESCRIPTION":"Indian Rupees","customercode" : "1001"},....`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:12:49.750

将 [Serialize] 属性添加到您的方法

# ios - UITableViewCell 初始显示高度错误

> ID：13206087
> 
> 赞同：2
> 
> 时间：2012-11-03T04:56:40.493
> 
> 标签：ios, uitableview, dynamic, storyboard

这不是一个问题，只是我在使用 XCode 4.5 故事板和带有 UILabel 的动态高度 UITableCell 时遇到的问题的结果日志。

问题是；单元格的初始显示将仅显示调整大小的 UILabel 内容的一部分，并且视觉 UILabel 未调整大小。只有在从表格顶部滚动并向下滚动后才能正确显示。

我在 hieghtForRowAtIndexPath 和 sizeToFit 中计算了 rowAtIndexPath 中的 UILabel。在调试中出现的大小可以，但设备没有使用正确的大小和 UILable.text 值更新显示。

我在情节提要中创建了动态 UITableCell。但是，我已将宽度和高度设置为标称值 (290x44)。事实证明，这导致了我的问题。我在故事板中将宽度和高度设置为零 (0)，一切都开始正常工作。（即 UILabel 以正确的大小显示，内容完整）。

除了一些关于创建框架为零的自定义表格单元格的参考之外，我无法在网上找到任何关于此问题的内容。事实证明，这确实是答案（对我来说）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:50:22.920

我遇到了同样的问题并通过简单地取消选中情节提要中的“使用自动布局”来解决它。你可能想试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T15:28:46.313

除了一些关于创建框架为零的自定义表格单元格的参考之外，我无法在网上找到任何关于此问题的内容。事实证明，这确实是答案（对我来说）。

# iphone - 根据按下的表格视图单元格使用 NSUserDefaults 加载数据

> ID：13206088
> 
> 赞同：0
> 
> 时间：2012-11-03T04:57:07.463
> 
> 标签：iphone, objective-c, ios, uitableview, nsuserdefaults

我希望我的应用能够像 iOS 上的“联系人”应用一样工作。当用户选择某个 TableViewCell 时，我想加载某些数据。

![在此处输入图像描述](../Images/e2b458b9ee5755f0c932e0f20cbf7d39.png)

无论按下哪个单元格，无论是“约瑟夫、理查德还是香农”，都会出现以下视图：

![在此处输入图像描述](../Images/15045847c0a36d8cda4ffbc8395f3515.png)

![在此处输入图像描述](../Images/e272c42ea50f826bf6581767c2a26b13.png)

这两个视图看起来完全相同，但它们只是显示不同的信息。所以我想我的问题是：如何使用 NSUserDefaults 以编程方式为每个单元格设置一个键 @"cell1" @"cell2" 等...？但这里有个问题，我不知道要添加多少个单元格，所以我不能硬编码这个，如何为每个表格视图单元格创建一个键来添加多少个？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T05:50:39.540

如果您坚持使用`NSUserDefaults`，请尝试以下操作：

```
NSUserDefaults * prefs = [NSUserDefaults standardUserDefaults];
cellNumber = [prefs objectForKey:[NSString stringWithFormat:@"cell%d", index]]; 
```

`UITableViewCells`然后，您可以保存最大索引，以便确切知道必须显示多少。

请记住， 的存储限制较低`NSUserDefaults`，因此您可能无法在其中存储所有信息。[您可以在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)找到更多详细信息。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T05:37:20.380

也许您不想使用`NSUserDefaults`.... 那仅用于持久的用户信息，例如首选项。最好将 Core Data 用于此类事情。

由于您要标记视图，因此一种想法是在单元出列期间使用`-[UIView setTag:]`or`UIView.tag`属性/方法。`UITableViewCell`使用`UITableView`委托方法，您可以检测单元格上的点击，检索其标签，并查找`NSUserDefaults`您的数据库，或者更好的数据库。

首选方法是保留索引数据库，使单元格出列，然后在点击它时，使用单元格的索引导航到详细信息窗格。这是一个更具代表性的编程模型，比标记视图并`NSUserDefaults`用于拉取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T08:49:30.607

您可以通过创建一个 NSMutableDictionary 来做到这一点，它为每个单元格存储键/值对，而不是将其存储在 NSUserDefaults 中

```
NSMutableDictionay *dict = [[NSMutableDictionary alloc] init];
[[NSUserDefaults standardUserDefaults] setObject:dict forKey:@"myKey"];
[dict release]; 
```

比您可以随时使用单元格值更新字典：

```
NSMutableDictionary *dict = [[NSUserDefaults standardUserDefaults] objectForKey:@"myKey"];
[dict setValue:aNameforThisCell forKey:[NSString stringWithFormat@"cell%d", indexPath.row]]; 
```

# iphone - coredate 数据未显示在 tableView

> ID：13206090
> 
> 赞同：-1
> 
> 时间：2012-11-03T04:58:17.400
> 
> 标签：iphone, ios

当我进入 viewController 时，我在 tableView 上使用了 coredate：

```
dispatch_queue_t downloadQueue = dispatch_queue_create("socket login", NULL);
dispatch_async(downloadQueue, ^{
    NSManagedObjectContext *managedObjectContext =[self getManagedObjectContext];
    noticListArr=[[CoreDataManager sharedInstance] readEvent:@"NotificationEntity" SortDescriptor:nil managedObjectContext:managedObjectContext];
    NSLog(@"refreshData.count:%d ",noticListArr.count);
    for(int i=0;i<noticListArr.count;i++){
        NotificationEntity *notificationEntity=[noticListArr objectAtIndex:i];
        NSLog(@"notificationEntity.name:%@ ",notificationEntity.name);
        NSLog(@"notificationEntity.describeString:%@ ",notificationEntity.describeString);
        NSLog(@"notificationEntity.source:%@", notificationEntity.source);
    }     
});

dispatch_async(dispatch_get_main_queue(), ^{
    [self.tableView1 reloadData];
});
dispatch_release(downloadQueue); 
```

所有日志都包含价值，但是当我使用

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

     static NSString *CellIdentifier = @"NotificationViewCell";
     NotificationViewCell *cell = (NotificationViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

     NotificationEntity *notificationEntity=(NotificationEntity *)[noticListArr objectAtIndex:indexPath.row];

     NSLog(@"tableViewnoticListArr.count:%d ",noticListArr.count);
     NSLog(@"indexPath.row:%d ",indexPath.row);

     NSLog(@"notificationTable.avatarsmall:%@", notificationEntity.avatarsmall);
     NSLog(@"notificationTable.source:%@", notificationEntity.source);
     NSLog(@"notificationTable.name:%@", notificationEntity.name);
     NSLog(@"notificationTable.describeString:%@ ",notificationEntity.describeString);
 } 
```

只要

```
 NSLog(@"tableViewnoticListArr.count:%d ",noticListArr.count);
 NSLog(@"indexPath.row:%d ",indexPath.row); 
```

给了我正确的结果，但是所有的 notificationEntity.name notificationEntity.describeString 都是空的。我不知道为什么在 tabelview 单元格中 notificationEntity 的所有值都是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:39:56.947

检查此更改，

```
dispatch_async(downloadQueue, ^{
    NSManagedObjectContext *managedObjectContext = [self getManagedObjectContext];
    self.noticListArr = [[CoreDataManager sharedInstance] readEvent:@"NotificationEntity" SortDescriptor:nil managedObjectContext:managedObjectContext];
    NSLog(@"refreshData.count:%d ",noticListArr.count);
    for(int i=0; i<noticListArr.count; i++){
        NotificationEntity *notificationEntity = [noticListArr objectAtIndex:i];
        NSLog(@"notificationEntity.name:%@ ", notificationEntity.name);
        NSLog(@"notificationEntity.describeString:%@ ", notificationEntity.describeString);
        NSLog(@"notificationEntity.source:%@", notificationEntity.source);
    }     
    dispatch_async(dispatch_get_main_queue(), ^{
        [self.tableView1 reloadData];
    });
});

dispatch_release(downloadQueue); 
```

# powershell - 使用 Import-CSV Powershell 将 GB 内存传递到 Hyper-V 版本 3 中的 New-VM

> ID：13206091
> 
> 赞同：0
> 
> 时间：2012-11-03T04:58:48.620
> 
> 标签：powershell, hyper-v, powershell-3.0

我创建了以下函数以从 csv 文件传递​​内存以在 Hyper-V 版本 3 中创建 VM

```
Function Install-VM {
param (
[Parameter(Mandatory=$true)]
[int64]$Memory=512MB
)
$VMName = "dv.VMWIN2K8R2-3.Hng"

$vmpath = "c:\2012vms"

New-VM -MemoryStartupBytes ([int64]$memory*1024) -Name $VMName -Path $VMPath  -Verbose

}

Import-Csv "C:\2012vms\Vminfo1.csv" | ForEach-Object { Install-VM -Memory ([int64]$_.Memory) } 
```

但是当我尝试创建虚拟机时，它说从 import-csv 传递的内存参数不匹配，我收到如下错误

```
VERBOSE: New-VM will create a new virtual machine "dv.VMWIN2K8R2-3.Hng".
New-VM : 'dv.VMWIN2K8R2-3.Hng' failed to modify device 'Memory'. (Virtual machine ID
CE8D36CA-C8C6-42E6-B5C6-2AA8FA15B4AF)
Invalid startup memory amount assigned for 'dv.VMWIN2K8R2-3.Hng'. The minimum amount of memory you can assign to
a virtual machine is '8' MB. (Virtual machine ID CE8D36CA-C8C6-42E6-B5C6-2AA8FA15B4AF)
A parameter that is not valid was passed to the operation.
At line:48 char:9
+         New-VM  -ComputerName $HyperVHost -MemoryStartupBytes ([int64]$memory*10 ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (Microsoft.HyperV.PowerShell.VMTask:VMTask) [New-VM], VirtualizationOpe
   rationFailedException
    + FullyQualifiedErrorId : InvalidParameter,Microsoft.HyperV.PowerShell.Commands.NewVMCommand 
```

也请不要在 csv 文件中将内存作为 1,2,4.. 等传递，如下所示，然后通过将它们乘以 1024 将它们转换为 MB

记忆1

任何人都可以帮助我了解如何格式化并将内存详细信息传递给函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:57:29.257

如果您传递 1 并将其乘以 1024，您实际上是在要求分配 1024 字节 (kb) 的内存，并且错误消息指出您可以提供的最小数量为 8 mb。

如果您传递的数字是以 GB 为单位，请将其乘以 1024，即 (1024*1024*1024)。如果要传递诸如“3gb”之类的值，则需要先对其进行扩展：

```
New-VM -MemoryStartupBytes (Invoke-Expression $memory) -Name $VMName 
```

# java - 使用 new 关键字创建对象和使用 clone 方法的区别

> ID：13206094
> 
> 赞同：6
> 
> 时间：2012-11-03T04:59:39.710
> 
> 标签：java

`new`使用关键字创建对象和使用创建对象有什么区别[`clone()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#clone%28%29)？内存分配有什么区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T14:45:49.417

`new`根据构造函数创建一个对象，同时`clone()`创建一个新对象并使用原始对象的内容初始化字段。

我接受它，你阅读了 javadoc，所以让我带你看一个例子：

```
public class MyBaby implements Cloneable {

    int age = 0;
    String name = "Dolly";
    List<String> list = new ArrayList<String>();

    public static void main(String[] args) {
        MyBaby originalBaby = new MyBaby();
        originalBaby.setAge(1);
        try {
            // We clone the baby.
            MyBaby clonedBaby = (MyBaby) originalBaby.clone();
            // both babies now have: age 1, name "Molly" and an empty arraylist
            originalBaby.setAge(2);
            // originalBaby has age 2, the clone has age 1
            originalBaby.setName("Molly");
            // same goes for the String, both are individual fields
            originalBaby.getList().add("addedString");
            // both babies get the string added to the list, 
            // because both point to the same list.
            System.out.println(clonedBaby.toString());
        }
        catch (CloneNotSupportedException e) {}
    }
} 
```

javadoc 说：

> 此方法执行此对象的“浅拷贝”，而不是“深拷贝”操作。

这解释了我们婴儿列表的行为：引用被复制，而不是被引用的元素，因此我们的复制是“浅的”

内存分配当然可以不同：

1.  您可以在构造函数中初始化字段
2.  clone 可以初始化一个字段，即一个数组

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T05:04:18.207

`new`运算符实例化新对象，而`clone()`更像是一个**复制构造函数**。`clone()`方法创建**对象的副本，其中成员属性的值也被复制**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T05:05:22.050

简单地说，

> new 创建一个实例

尽管

> clone 返回一个实例的克隆。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T05:06:51.073

**Clone()**创建同一类的新实例并将所有字段复制到新实例并返回它（浅复制）。

而**new**关键字是创建对象的 Java 运算符 ( [http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html) )。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-08T02:59:50.483

*   new() 按照默认构造函数构造对象。
*   clone() 对引用进行浅拷贝。

只有在对象创建成本很高并且我们宁愿克隆并设置行为时，我们才应该使用克隆。

# c# - 如何使用 XmlWriter 将原始字节数组输出到我的 XML 中？

> ID：13206098
> 
> 赞同：0
> 
> 时间：2012-11-03T05:00:47.487
> 
> 标签：c#, xml, winforms, xml-serialization

我试图在我的一些 XML 节点中输出一些原始字节数据。
我不相信`Base64`输出适合我的解决方案。

我目前的工作如下：

要保存到文件：

（容器类Foo中的成员函数）

```
public void save(String file)
{
    XmlWriterSettings settings = new XmlWriterSettings();

    XmlSerializer serializer = new XmlSerializer(typeof(Foo));
    XmlWriter writer = XmlWriter.Create(file, settings);
    serializer.Serialize(writer, this);
} 
```

序列化类（类继承自 IXmlSerializable）：

（里面的数据`Bytes`是原始数据）

```
public void WriteXml(XmlWriter writer)
{
    char[] temp = new char[Bytes.Length];
    for (int i = 0; i < temp.Length; i++)
    {
        int n = (int)Bytes[i];
        temp[i] = (char)n;
    }
    writer.WriteRaw(temp, 0, temp.Length);
} 
```

我确定在此操作之后，数据中`Bytes`的数据与 temp 中的数据完全匹配，但是在我序列化类之后，输出文件中的原始数据似乎不匹配，尽管有些部分看起来相似。我也尝试过在 上使用编码设置`XmlWriter`，但这经常以异常结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:19:38.837

“我不相信 Base64 输出适合我的解决方案。” o_O，嗯……那么这不是一个编程问题，而是一个哲学问题……

尽管如此，假设有很多事情，例如数组`Bytes`包含文件的字节数据，该文件包含`Foo`按照您的`save()`方法的序列化实例，请记住，它`char`代表一个 Unicode 字符，它的大小是 2 字节......你是转换`byte`为`char`...时添加更多位

哦，编码，编码，编码……这就是为什么存在 Base64 的原因！！！

# findbugs - 检查增量构建中的样式、PMD、FindBugs

> ID：13206100
> 
> 赞同：3
> 
> 时间：2012-11-03T05:01:35.430
> 
> 标签：findbugs, checkstyle, pmd, incremental-build

我计划逐步对我的项目运行检查样式。目前我的 CI 服务器正在进行增量构建，即仅对修改的文件和依赖项运行单元测试。但是对于检查样式、PMD、Findbugs，我们在整个项目上运行，而不是只在修改过的文件上运行。

我需要在整个项目上运行这些静态分析工具以进行第一次构建，然后每次增量构建仅在修改后的文件集上运行。并合并修改文件的结果以完成结果，这样我就可以知道工具验证是否重要。

是否有任何蚂蚁任务可用于上述要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T20:49:01.440

如果您的 CI 系统可以创建它认为已更改的文件列表（我认为它可以，因为它使用这样的列表进行编译），那么您应该能够至少部分实现结果。

对于 CheckStyle 和 PMD，它们的 ant 任务采用文件集，这些文件集提供了应该运行分析的文件。只给他们更改的文件。

FindBugs，至少[根据文档](http://findbugs.sourceforge.net/manual/anttask.html)，不能这样做。这是有道理的，因为有许多 FindBugs 检测器会读取除已检查文件之外的文件以完成工作。因此，根据可用于分析的其他文件，FindBugs 分析可能会为同一文件产生不同的结果。

你最终不会得到一份综合报告。相反，您来自工具的报告将仅包含有关实际检查的文件的信息。这可能足以决定是否使构建失败。

[如果你想更大规模地做这件事，跟踪规则合规性、技术债务等的发展，我推荐免费的[SonarQube](http://www.sonarqube.org/)工具。SonarQube 还与您的 CI 系统集成。但是，它不会进行增量运行。**更新：**从 SonarQube 4.0 版开始，可以进行增量分析。请参阅[此处](http://www.sonarqube.org/sonarqube-4-0-in-screenshots/)的“增量分析”。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T04:07:43.520

我不确定是否有直接的选项可以解决您的问题。工具无法动态识别仅修改后的文件，而不是针对配置中给出的完整路径（例如：源路径/二进制路径）执行工具。由于您想保留以前的结果，这有点复杂。

首先，您需要了解是否有办法在增量构建执行时获取修改文件的列表。如果可能，那么您可以修改 ant 目标以仅将修改后的文件复制到临时文件中。位置并将其指向工具。

然后要与以前的报告合并，首先，您必须在执行上述 ant-target 之前备份现有报告。然后编写一个 xsl，用新报告中包含的信息替换现有报告中的信息。[通过使用 ant](http://ant.apache.org/manual/Tasks/style.html)执行 xsl 创建单独的报告。因此，该报告将包含您需要的结果。

# javascript - javascript中的自定义弹出窗口

> ID：13206101
> 
> 赞同：1
> 
> 时间：2012-11-03T05:01:38.707
> 
> 标签：javascript, jquery, html, popup

检查javascript中的条件后，我需要打开一个弹出窗口。我试图自定义弹出窗口。

我用了

```
function fun()
{
  if() {
     window.open('name.jsp','Popup','toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=no,width=420,height=400,left=430,top=23');
  }
  else {
  }
} 
```

但我需要一个像我在下面给出的那样的流行音乐。是否有可能在javascript中。图 1：我得到了什么 图 2：需要什么。

![正在得到什么](../Images/5ce808866074a60135ba8ee84874bed8.png) ![需要什么](../Images/a09d80e906b6563372155c1987ad9eed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:37:01.640

+1 对于所有使用模式而不是弹出式 winodw 的建议（无法按照您的意愿设置样式）。

模态是更现代和用户友好的方式。这篇文章：[jQuery 中的简单模态 div？](https://stackoverflow.com/questions/2101359/simple-modal-div-in-jquery)里面有很多可以帮助你入门的链接。

使用一点 css 和一个图标，您可以让您的模态看起来与您的图像 2 完全一样。

# c# - 获取小数点后面的数字

> ID：13206106
> 
> 赞同：0
> 
> 时间：2012-11-03T05:02:39.767
> 
> 标签：c#, math, decimal, digit

我目前正在使用 C# 进行开发，我正在尝试从一个`float`值中获取一个数字并将其存储到`int`. 例如：

```
float f = 0.04; 
```

我想`int r = 4;`

有没有办法做到这一点？我希望能够`switch(r)`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T05:07:53.210

在上面给出的情况下， 的`f = 0.04`和 的结果`r=4`。
您可以乘以`10`until `f > 0`，如果 f ，这是必要的`!=0`。

然后，要获得，`r = 4`您可以转换为整数。

```
int r = (int)f; 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T05:32:23.203

虽然我真的不知道你是如何在不将字符附加到值末尾的情况下设置 a类型的`float`，但这是可能的！`struct``0.04``F`

我建议您此时首先将包含小数点的数字转换为字符串。然后，您可以在获取小数点后的数字后将其`Int32.Parse(string s)`转换为`int`

**例子**

```
private Int32 GetDecimals(float n)
{
    string s = n.ToString("#.#########", System.Globalization.CultureInfo.InvariantCulture); //Convert the value to string
    return Int32.Parse(s.Substring(s.IndexOf(".") + 1)); //Return what's after the decimal point from the value as Int
} 
```

然后，您可以使用`GetDecimals(float n)`从 a 获取小数点后的值`float`。

**例子**

```
float f = 0.04F; //Initialize a new float of name f
int r = 0; //Initialize a new int of name r
r = GetDecimals(f); //Set r to 4 
```

**注意：**如果您想在输出中获取小数点后的值，您可以使用所需的输出进行更改，该输出是除此之外的任何其他结构`Int32`注意：**如果**您愿意，可以使用您想要转换的所需结构进行更改用于转换除.`GetDecimals``int`
**`float``GetDecimals(float n)``GetDecimals``float`**

 **谢谢，
我希望你觉得这有帮助:)**

# ios - 如何以编程方式更改 UIView 的“原点”（在 Xcode 中标记）？

> ID：13206113
> 
> 赞同：0
> 
> 时间：2012-11-03T05:03:11.847
> 
> 标签：ios, xcode, uiview, uikit

您会注意到所附屏幕截图中的红色“+”/“箭头”字形。在 Xcode 中更改这个“原点”很容易。有没有办法以编程方式执行*此*操作，或者这完全是 Xcode 抽象？

![在此处输入图像描述](../Images/3cca94fc6be99db14a41e2dba3851256.png)

例如，我想以编程方式创建一个 UILabel 并通过计算右下角坐标来定位它。在 Xcode 中，我只需确保红色的“+”位于右下角的网格点上，并在定义 X、Y、Width 和 Height 参数时牢记该“原点”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T05:31:31.127

如果您不使用自动布局，则可以通过设置标签（或任何视图）的中心在代码中定位标签（或任何视图）。所以如果你知道你想要标签的右下角在哪里，你可以减去标签的宽度和高度的一半来计算它的中心应该在哪里：

```
CGPoint lowerRight = somePoint;
CGRect frame = label.frame;
label.center = CGPointMake(lowerRight.x - frame.size.width / 2,
    lowerRight.y - frame.size.height / 2); 
```

我会建议这样做。

但如果你愿意，你可以改为去一个较低的层次。每个视图都有一个核心动画层，它实际上管理视图的屏幕外观。图层有一个`anchorPoint`属性，默认为 (0.5, 0.5)，表示图层的中心。您可以将`anchorPoint`右下角的设置为 (1, 1)：

```
label.layer.anchorPoint = CGPointMake(1, 1); 
```

现在标签`center`实际上控制了它的右下角的位置，所以你可以直接设置它：

```
label.center = somePoint; // actually sets the lower right corner 
```

您需要将`QuartzCore`框架添加到目标并导入`<QuartzCore/QuartzCore.h>`以修改`anchorPoint`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:07:18.247

```
myObject.origin = CGPointMake (0.0,0.0); 
```

# html - 如何在不超出窗口高度的情况下将标题添加到独立可滚动的 div？

> ID：13206116
> 
> 赞同：2
> 
> 时间：2012-11-03T05:03:37.987
> 
> 标签：html, css, scrollable

我发现另一篇文章让我非常接近我正在寻找的东西，但并非一直如此。（http://stackoverflow.com/questions/10474354/layout-with-fixed-header-and-footer-fixed-width-sidebar-and-flexible-content）

本质上，我想为每个可滚动区域添加一个标题/标题部分。这些不应该在各自的部分内滚动。这是 jsfiddle，我已经注释掉了标题部分。当它们被添加时，它会将 div 推到窗口的高度之外，从而扩展内容。任何帮助表示赞赏！

这是原始代码：

```
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Application Wireframe</title>
<style type="text/css">
    body    {
        margin: 0;
        height: 100%;
    }

    #header {
        text-align: left;
        background: #4f0f00;
        color: #fff;
        width: 100%;
        margin: 0 0 0 0;
        border: 0;
        overflow: hidden;
        position: fixed;
    }
    #accountbar {
        background-color: #000000;
        color: white;
        height: 40px;
        width: 100%;
    }

    #contextbar {
        position:fixed;
        top:40px;
        width: 100%;
    }
    #leftheader {
        background-color: #66CCFF;
        height: 40px;
        width:200px;
        float:left;
    }
    #contentheader {
        background-color: #996600;
        color: white;
        height: 40px;
    }

    #middle {
        position:fixed;
        top:80px;
        width: 100%;
        height: 100%;
    }

    #left_col {
        float: left;
        width: 200px;
        /*height: 100%;*/
    }
    #left_col_wrap  {
        /*width: 100%;
        height: 100%;
        position: fixed;*/
    }
    #leftnav {
        background-color: #66FFFF;
        height: 100%;
        overflow: scroll;
        /*width: 200px;*/
    }

    #main_col   {
        /*margin-left: 200px;*/
        /*height: 100%;*/
    }
    #main_content_wrap  {
        /*position:fixed;
        width:100%;
        height: 100%;*/
    }
    #messagegap {
        background-color: white;
    }
    #contentpane {
        background-color: #FFAA00;
        height: 100%;
        overflow: scroll;
    }
    #contentfoot {
        background-color: #C80;
        height: 20px;
        position: fixed;
        width: 100%;
        bottom: 0;
        padding-bottom: 18px;
    }
    #footer {
        background-color: #CCCCCC;
        clear: left;
        width: 100%;
        position: fixed;
        bottom: 0;
    }
</style>
</head>
<body>
<div id="header">
    <div id="accountbar"><b>Account Bar</b> -always visible-this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this</div>
</div>
<div id="contextbar">
    <div id="leftheader"><b>Left Header</b></br>-usually says "Contents"-</div>
    <div id="contentheader"><b>Content Header</b> -always visible- this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this</div>
</div>
<div id="middle">
    <div id="left_col">
        <div id="left_col_wrap">
            <div id="leftnav"><b>Left Navigation</b>
                <ul>
                <p>
                    First</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    Last</p>
                </ul>
            </div>
        </div>  
    </div>
    <div id="main_col">

        <div id="main_content_wrap">
            <div id="contentpane"><b>Content Pane</b>
<p>Content Pane</b> -always visible- this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this</p>
                <ul>
                    <p>
                    First</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    Last</p>
                </ul>
            </div>
        </div>
    </div>
</div>
<div id="footer"><b>Footer</b> -always visible, always at bottom of window-</div>
</body>
</html> 
```

这是解决方案：

```
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Application Wireframe</title>
<style type="text/css">
    body    {
        margin: 0;
        height: 100%;
    }

    #header {
        text-align: left;
        background: #4f0f00;
        color: #fff;
        width: 100%;
        margin: 0 0 0 0;
        border: 0;
        overflow: hidden;
        position: fixed;
    }
    #accountbar {
        background-color: #000000;
        color: white;
        height: 40px;
        width: 100%;
    }

    #contextbar {
        position:fixed;
        top:40px;
        width: 100%;
    }
    #leftheader {
        background-color: #66CCFF;
        height: 40px;
        width:200px;
        float:left;
    }
    #contentheader {
        background-color: #996600;
        color: white;
        height: 40px;
    }

    #middle {
        position:absolute;
        top:80px;
        width: 100%;
        overflow-y: visible;
        bottom: 8px;
        /*height: 100%;*/
    }

    #left_col {
        float: left;
        width: 200px;
        /*height: 100%;*/
    }
    #left_col_wrap  {
        /*width: 100%;
        height: 100%;
        position: fixed;*/
    }
    #leftnav {
        background-color: #66FFFF;
        height: 100%;
        overflow: scroll;
        /*width: 200px;*/
    }

    #main_col   {
        /*margin-left: 200px;*/
        /*height: 100%;*/
    }
    #main_content_wrap  {
        /*position:fixed;
        width:100%;
        height: 100%;*/
    }
    #messagegap {
        background-color: white;
    }
    #contentpane {
        background-color: #FFAA00;
        height: 100%;
        overflow: scroll;
    }
    #contentfoot {
        background-color: #C80;
        height: 20px;
        position: fixed;
        width: 100%;
        bottom: 0;
        padding-bottom: 18px;
    }

    #footer {
        background-color: #CCCCCC;
        clear: left;
        width: 100%;
        position: fixed;
        bottom: 0;
    }

</style>
</head>
<body>
<div id="header">
    <div id="accountbar"><b>Account Bar</b> -always visible-this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this</div>
</div>
<div id="contextbar">
    <div id="leftheader"><b>Left Header</b></br>-usually says "Contents"-</div>
    <div id="contentheader"><b>Content Header</b> -always visible- this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this</div>
</div>
<div id="middle">
    <div id="left_col">
        <div id="left_col_wrap">
            <div id="leftnav"><b>Left Navigation</b>
                <ul>
                <p>
                    First</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    Last</p>
                </ul>
            </div>
        </div>  
    </div>
    <div id="main_col">
        <div id="main_content_wrap">
            <div id="contentpane"><b>Content Pane</b>
                <p>Content Pane</b> -always visible- this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this this is the main page -- everyone else stay thin so we can see this</p>
                <ul>
                    <p>
                    First</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    left</p>
                <p>
                    Last</p>
                </ul>
            </div>
        </div>
    </div>
</div>
<div id="footer"><b>Footer</b> -always visible, always at bottom of window-</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:39:32.060

为此，您需要使用`position: fixed;`我认为您正在寻找这个。

`HTML:`

```
<div id="header">  Header Content    </div>

<div id="wrapper">

    <div id="leftheader"> Left Header   </div>

        <div id="leftwrapper">
                 ---CONTENT HERE---
        </div>        

    <div id="rightheader"> Right Header </div>

        <div id="rightwrapper">                     
                ---CONTENT HERE---
        </div>        
</div>

<div id="footer">   Footer Content    </div> 
```

`CSS:`

```
<style type="text/css">
 div#header
 {position: fixed;left: 0px;top: 0px;height:100px;width:100%;background: black;color: White; }

  div#leftheader
  {position: fixed;left: 0px;top: 100px; height: 50px;width: 30%;float: left; background: red; color: White;    }

  div#leftwrapper
  {position: fixed;left: 0px;color: Maroon;margin-top: 150px;margin-left: 0;margin-bottom: 100px; width: 30%; min-width: 30%; height: 600px; max-height: 600px; overflow-y: auto;    }

  div#rightheader
  {position: fixed;left: 0px;top: 100px; height: 50px;width: 70%;margin-left: 30%;float: right;background: green;color: White;}

  div#rightwrapper
  {position: fixed;left: 0px;color: Purple;margin-left: 30%;margin-top: 150px;margin-bottom: 100px;width: 70%; min-width: 70%;height: 500px;max-height: 500px;overflow-y: auto; }

  /*div#wrapper
  {   height: 1000px;   }*/        

  div#footer
  {position: fixed;left: 0px;bottom: 0px; height: 100px;width: 100%;background: black;color: White;}
</style> 
```

注意：我只在**Firefox**中测试过。

希望，它会帮助你。谢谢并继续发帖。

干杯。！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T05:22:07.450

所以我认为你正在寻找的是在每个可滚动的 div 中都有固定的标题？从视觉上看，这与将固定标题放在 div 顶部相同。只要页面本身不滚动，这个解决方案就可以正常工作。

你会用它`position: fixed;`来达到这个效果。其余的我认为你可以做到。

# android - 在 ViewFlipper 中的项目结束后停止滑动

> ID：13206117
> 
> 赞同：0
> 
> 时间：2012-11-03T05:04:01.053
> 
> 标签：android, viewflipper

我`Viewflipper`在我的应用程序中使用我在`Viewflipper`.

现在发生的事情是它在最后一项之后显示连续滚动中的第一项。

我需要停止它，因为滚动需要在到达最后一项后在任何特定方向停止，反之亦然。

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:44:49.083

If you are using timed interval flipping, you can call `stopFlipping()` when you hit the last view.

If you are doing it manually via `showNext()` and `showPrevious()`, then you can simply set a flags in your code to check for the first and last views and handle the swipe actions. For example:

```
if(lastFlag==true)
{

}
else
{
 vf.showNext();
} 
```

Here's a good tutorial on using ViewFlipper:

[http://www.techrepublic.com/blog/app-builder/a-dog-limps-into-a-saloon-a-tutorial-on-androids-viewflipper-widget/634](http://www.techrepublic.com/blog/app-builder/a-dog-limps-into-a-saloon-a-tutorial-on-androids-viewflipper-widget/634)

# android - 如何在 Android 的 onCreate() 中访问搜索栏未实现的方法？

> ID：13206119
> 
> 赞同：0
> 
> 时间：2012-11-03T05:04:35.480
> 
> 标签：android, seekbar

我在我的应用程序中自定义了搜索栏。我也可以拖动搜索栏并访问未实现的方法。我的代码是

```
public class Income extends Activity implements OnSeekBarChangeListener, OnItemSelectedListener 
{ 
   SeekBar net_sales1,cogs,operating,other_revenue;
   public void onCreate(Bundle bundle)
   {
       super.onCreate(bundle);
       setContentView(R.layout.income);
       seek_txt1 = (TextView)findViewById(R.id.net_sales);
       seek_txt2 = (TextView)findViewById(R.id.cogs_te);
       seek_txt3 = (TextView)findViewById(R.id.operate_exp);
       seek_txt4 = (TextView)findViewById(R.id.other_rev);
       net_sales1 = (SeekBar)findViewById(R.id.mySeekingBar1);
       cogs = (SeekBar)findViewById(R.id.mySeekingBar2);
       operating = (SeekBar)findViewById(R.id.mySeekingBar3);
       other_revenue = (SeekBar)findViewById(R.id.mySeekingBar4);
       net_sales1.setOnSeekBarChangeListener(this);
       cogs.setOnSeekBarChangeListener(this);
       operating.setOnSeekBarChangeListener(this);
       other_revenue.setOnSeekBarChangeListener(this);
   }

   @Override
   public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser)
   {
       seek_count=0;
       progress1=progress-150;

       verify = fromUser;

       if (fromUser) 
       {
           if (progress >= 0 && progress <= seekBar.getMax())
           {                        

                progressString  = String.valueOf(10*progress-150);

           }
       }
       seek_id=seekBar.getId();
       switch(current_spinner)

       {
            case R.id.mySeekingBar1 :   
                //tablelay.removeView(tableLayout);

                seek_txt1.setText(progressString);
                int seekbar1_val = Integer.parseInt(seek_txt1.getText().toString());
                progress_of_spinner1 = progress;

                break;
            case R.id.mySeekingBar2 :   
                 seek_txt2.setText(progressString);
                 progress_of_spinner2 = progress;
                 break;
           case R.id.mySeekingBar3 :   
                 seek_txt3.setText(progressString);
                 progress_of_spinner3 = progress;
                 break;                                  
           case R.id.mySeekingBar4 :   
                 seek_txt4.setText(progressString);
                 progress_of_spinner4 = progress;
                 break;
         }

         net_sales1.setProgress(progress_of_spinner1);
         cogs.setProgress(progress_of_spinner2);
         operating.setProgress(progress_of_spinner3);
         other_revenue.setProgress(progress_of_spinner4);

    }
    @Override
    public void onStartTrackingTouch(SeekBar seekBar) 
    {
        int progress2 = progress1;

        originalProgress=seekBar.getProgress();

    }
    @Override
    public void onStopTrackingTouch(SeekBar seekBar) 
    {
        progress2=progress1;

    } 
```

现在我的问题是，是否可以在活动的 onCreate() 方法中访问所有未实现的搜索栏方法？有没有机构可以告诉我？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:35:49.087

你想用在

> 创建

比你需要删除

> 实现 OnSeekBarChangeListener

和下线

```
net_sales1.setOnSeekBarChangeListener(this);
   cogs.setOnSeekBarChangeListener(this);
   operating.setOnSeekBarChangeListener(this);
   other_revenue.setOnSeekBarChangeListener(this); 
```

并给出单独的

> OnSeekBarChangeListener

比你在 onCreate 中使用的所有搜索栏

但是在这对于所有搜索栏，所有方法都单独覆盖。

请参阅下面的代码

```
 net_sales1.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
   {
       @Override
public void onStopTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    // TODO Auto-generated method stub

}
 });
     cogs.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
   {
       @Override
public void onStopTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    // TODO Auto-generated method stub

}
});
   operating.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
   {
       @Override
public void onStopTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    // TODO Auto-generated method stub

}
});
   other_revenue.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
   {
      @Override
public void onStopTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    // TODO Auto-generated method stub

}

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    // TODO Auto-generated method stub

}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T05:25:33.903

是的，它可能，如下使用：

将 onSeekBarChangeListener 设置为所有搜索栏，并提供未实现内联的定义。如下：

```
public class Income extends Activity implements OnItemSelectedListener 
{ 
   SeekBar net_sales1,cogs,operating,other_revenue;
   public void onCreate(Bundle bundle)
   {
       super.onCreate(bundle);
       setContentView(R.layout.income);
       seek_txt1 = (TextView)findViewById(R.id.net_sales);
       seek_txt2 = (TextView)findViewById(R.id.cogs_te);
       seek_txt3 = (TextView)findViewById(R.id.operate_exp);
       seek_txt4 = (TextView)findViewById(R.id.other_rev);
       net_sales1 = (SeekBar)findViewById(R.id.mySeekingBar1);
       cogs = (SeekBar)findViewById(R.id.mySeekingBar2);
       operating = (SeekBar)findViewById(R.id.mySeekingBar3);
       other_revenue = (SeekBar)findViewById(R.id.mySeekingBar4);
       net_sales1.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
       {
           @Override
           public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser)
           {
                 //Do some operation in this block
           }
       });
       cogs.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
       {
           @Override
           public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser)
           {
                 //Do some operation in this block
           }
       });
       operating.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
       {
           @Override
           public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser)
           {
                 //Do some operation in this block
           }
       });// Do same as cogs
       other_revenue.setOnSeekBarChangeListener(new OnSeekBarChangeListener()
       {
           @Override
           public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser)
           {
                 //Do some operation in this block
           }
       });//Do Same as cogs
   }
} 
```

在 onCreate 方法中创建侦听器对象的另一个选项，并将此侦听器设置为所有 seekbar，如下所示：

```
public class Income extends Activity implements OnItemSelectedListener 
{ 
   SeekBar net_sales1,cogs,operating,other_revenue;
   public void onCreate(Bundle bundle)
   {
       super.onCreate(bundle);
       setContentView(R.layout.income);
       seek_txt1 = (TextView)findViewById(R.id.net_sales);
       seek_txt2 = (TextView)findViewById(R.id.cogs_te);
       seek_txt3 = (TextView)findViewById(R.id.operate_exp);
       seek_txt4 = (TextView)findViewById(R.id.other_rev);
       net_sales1 = (SeekBar)findViewById(R.id.mySeekingBar1);
       cogs = (SeekBar)findViewById(R.id.mySeekingBar2);
       operating = (SeekBar)findViewById(R.id.mySeekingBar3);
       other_revenue = (SeekBar)findViewById(R.id.mySeekingBar4);
       OnSeekBarChangeListener listener= new OnSeekBarChangeListener()
       {
           @Override
           public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser)
           {
                 //Do some operation in this block
           }
       });
       net_sales1.setOnSeekBarChangeListener(listener);
       cogs.setOnSeekBarChangeListener(listener);
       operating.setOnSeekBarChangeListener(listener);// Do same as cogs
       other_revenue.setOnSeekBarChangeListener(listener);//Do Same as cogs
   }
} 
```

# php - 相当于 JavaScript 中 PHP 的 dirname(__FILE__)？

> ID：13206121
> 
> 赞同：3
> 
> 时间：2012-11-03T05:04:51.157
> 
> 标签：php, javascript, dirname

正如我在标题中已经提到的，我正在寻找一个 JS 函数来获得与使用此 PHP 代码获得的相同结果：

```
dirname(dirname(__FILE__)) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T05:14:52.790

我认为这是不可能的，因为 php dirname 在本地机器上的 apache 服务器上运行。它可以访问文件系统。但是 javascript 在不能与文件系统一起操作的浏览器层上运行。我认为您应该使用 ajax 并根据需要处理结果。我认为这对你来说是最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T02:04:57.330

我需要一个解决方案来编写这样的代码：

```
$("#div").load(ROOT_URL + "my/path/to/script.php"); 
```

**解决方案**：一个 PHP 脚本生成一个包含所有需要的 JS 文件的 JS 文件，并将 ROOT_URL 添加到生成文件的顶部：

```
$js = 'ROOT_URL = "' . ROOT_URL . '"; ' . $js;
file_put_contents("file.js", $js); 
```

现在我也可以在 JS 代码中使用 ROOT_URL（在 PHP 配置文件中设置）。我希望我能帮上忙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T02:19:01.967

您可以让 PHP 输出脚本。是的，没错，您可能无法使 php 处理 js 文件（除非您完全控制服务器）。但这没关系。只需确保在 PHP 返回的标头和脚本标记中的 MIME 类型都是正确的。这样，您可以让 PHP 在脚本中插入您想要的任何值，包括它自己的路径。

在 script.php 中：

```
header("Content-type: text/javascript");
echo 'var myvar = '.$something;
//where $something can be $_SERVER['REQUEST_URI'], __FILE__ or whatever you need.
//You could even use information from session variables, or query the database.
//In fact, this way you can have GET parameters in your javascript.
//Make sure you are not creating a vulnerability with the exposed information.

//Then put the rest of the script as usual. You could even include it*. 
```

*：[包括](http://www.php.net/manual/en/function.include.php)

在 HTML 中：

```
<script type="text/javascript" src="script.php"></script> 
```

是的，我知道我在重复 MIME 类型，这样做可以最大限度地提高浏览器兼容性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T02:22:15.163

浏览器 Javascript 中没有类似物`__FILE__`；该代码无法直接访问加载它的 URL。但是通过某些假设，您可以弄清楚，就像[这里](https://stackoverflow.com/questions/984510/what-is-my-script-src-url)的答案一样。

一旦你有了脚本的 URL（我假设在一个名为`scriptURL`下面的变量中），你就可以着手寻找祖父 URL。这对于 URL 来说可能会变得很棘手，因此在开始使用字符串处理之前，让精通 URL 的 Javascript 位为您解析 URL 并仅获取路径名组件可能是最安全的：

```
var a = document.createElement('a')
a.href = scriptURL
var scriptPath = a.pathname 
```

然后不幸的是字符串操作；这是一个有点笨拙的解决方案：

```
var components = scriptPath.split(/\//)
while (components.length > 0 && !components[components.length-1])
    components.length -= 1;
var twoDirsUp = components.slice(0,components.length-2).join('/') 
```

然后您可以使用反向锚元素技巧将结果转换回完整的 URL：

```
a.pathname = twoDirsUp;
var grandParentUrl = a.href 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T02:23:29.397

为什么不从绝对 URL 加载您想要的内容？

如果你有你的代码块：`/my/script/to/load.js`浏览器将加载正确的文件，如果你在`yoursite.com`或任何类似的地方`yoursite.com/a/b/c/d/e/f`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-07T16:19:17.500

有点离题，但如果你只是想获得类似的`dirname($_SERVER['REQUEST_URI'])`javascript，你可以做

```
window.location.href.substr(0, window.location.href.length - window.location.href.split('/').pop().length) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-05T10:23:14.477

我使用类似的东西来摆脱 javascript 中的路径

```
 var __DIR__ = window.location.pathname.match('(.*\/).*')[1] + 'NameOfThisFolder'; 
```

第一的

```
window.location.pathname.match('(.*\/).*')[1] 
```

返回没有文件名或其他内容的当前路径。

```
rootFolder/folder1/folder2/ 
```

然后我添加这个文件夹的名称（'NameOfThisFolder'）。

通过这种方式，我可以在当前页面中从一个从 ajax 请求依次调用的页面发出例如 ajax 请求，而无需担心路径

# php - 如何在php中从父类获取子类名称

> ID：13206133
> 
> 赞同：2
> 
> 时间：2012-11-03T05:07:29.020
> 
> 标签：php, inheritance

```
<?php

class parentClass {

    function myChild() {
        echo 'Child Class Name: '.__CLASS__;
    }   
}

class childClass extends parentClass {

}

$childClassObj = new childClass;

$childClassObj->myChild(); 
```

输出是

```
Child Class Name: parentClass 
```

实际上，我期待一个输出

```
Child Class Name: childClass 
```

我应该怎么做才能得到输出？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T05:12:06.970

您可以使用[get_call_class](http://php.net/manual/en/function.get-called-class.php)

```
<?php
    class parentClass {

        function myChild() {
           echo 'Child Class Name: '.get_called_class();
        }   
    }

    class childClass extends parentClass {

    }

    $childClassObj = new childClass;

    $childClassObj->myChild(); //childClass
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T05:12:22.450

你有没有试过这个：

```
function myChild() {
   echo 'Child Class Name: '.get_class($this);
} 
```

# sql - 将多个 SQL 查询合并为 1

> ID：13206134
> 
> 赞同：3
> 
> 时间：2012-11-03T05:07:38.387
> 
> 标签：sql, sql-server

我在尝试组合几个查询时有点卡住了。我得到的是包含某种统计信息和对另一个表的引用的表。

获取我正在运行的统计报告（短版）：

```
SELECT COUNT(id) 
from [Actions] 
where date between '2012-01-01 00:00:00' AND '2012-01-01 23:59:59' 
  AND [Action]='request' 
```

问题是如果我想在指定的时间段内获取每天的统计数据，这个查询应该是什么样子？我了解如果我更改开始日期和结束日期，我将获得整个指定期间的统计数据，而不是按天分组。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:11:57.547

就`GROUP BY date`在像这样消除时间部分之后：

```
SELECT 
  CONVERT(VARCHAR(10), [date], 121) ByDay, COUNT(id) 
FROM [Actions] 
WHERE date BETWEEN '2012-01-01 00:00:00' AND '2012-01-01 23:59:59' 
  AND [Action]='request'
GROUP BY CONVERT(VARCHAR(10), [date], 121) 
```

# c# - asp.net 网络安全自定义字段

> ID：13206137
> 
> 赞同：-1
> 
> 时间：2012-11-03T05:07:54.240
> 
> 标签：c#, asp.net, database

你好，我很新的 asp 和 c 锐利。

我想知道如何将自定义字段添加到数据库中，例如名字和电话号码。

我尝试了许多不同的技术，但我得到了所有类型的错误。我发现我使用最容易理解的网站，我看到他们提到了添加自定义字段，但我不知道如何实现它。

我不想改变我的代码，但如果我必须而且我会的。

我使用的代码不在这个网站上： [http ://www.thecodingguys.net/tutorials/asp/webpages-membership](http://www.thecodingguys.net/tutorials/asp/webpages-membership)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:43:13.920

这实际上比您想象的要容易，首先在 users 表中添加两个新字段，例如 FirstName 和 PhoneNumber。然后在[thecodingguys.net 注册页面上](http://www.thecodingguys.net/tutorials/asp/webpages-membership-registration-page)查找此代码：

```
var token = WebSecurity.CreateUserAndAccount(email, password, null, true); 
```

现在 null 表示不需要电话号码、姓名等额外信息，但是因为您需要它，所以您需要更改它。数据类型必须是数组。所以上面放了这个

```
var user = new{FirstName = firstname, LastName = lastname, Number = number}; 
```

现在 FirstName 是表中的列名，在 = 符号之后是获取此信息的 HTML 控件。（您需要添加额外的 HTML 框）

这是它应该看起来的样子

```
var user = new{FirstName = firstname, LastName = lastname, Number = number};
var token = WebSecurity.CreateUserAndAccount(email, password, user, true); 
```

好了，这应该可以解决您的问题，请标记为已解决！

# c++ - 具有内存位置的 C++ 删除运算符

> ID：13206140
> 
> 赞同：3
> 
> 时间：2012-11-03T05:08:05.467
> 
> 标签：c++, pointers, reference, delete-operator

我是 C++ 新手，现在正在学习`new`和`delete`关键字。

```
Point ppaa = *new Point;
Point *p = &ppaa;

ppaa.xpos = 1;
ppaa.ypos= 3;

delete &ppaa;
delete p; 
```

你能解释一下为什么我不能使用 &ppaa 删除上面的 ppaa 吗？我知道 delete 只能对指针进行操作，但我不明白为什么上面是不可能的，因为它们实际上是内存位置。搜索类似的问题，似乎这与第一行发生的复制操作有关，但我没有很好的解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:10:37.817

```
 T t = x; 
```

称为**复制初始化**。它：

*   它尝试转换为&`x`类型的对象`T`
*   然后将该对象复制到 to-initialized object`t`中。

所以你的代码声明，

```
Point ppaa = *new Point; 
```

*   `Point`在freestore/heap 上创建一个对象和
*   然后复制该对象以创建堆栈对象`ppaa`。

这两个对象都是不同的对象。
如您所见，执行此语句后，您不再有任何指向堆对象的指针。
在这种情况下，您需要传递 to 返回的地址`new`，`delete`由于您不再拥有该地址，因此会导致内存泄漏。
此外，注意`&ppaa`不返回地址，它返回的是位于堆栈上`new`的对象的地址。`ppaa`将此地址传递给`delete`导致**未定义行为**，因为`ppaa`从未在 freestore/动态上分配它是基于堆栈的本地/自动对象。

# python - Python并使用模式创建列表 - x1，x2，... x100

> ID：13206144
> 
> 赞同：-3
> 
> 时间：2012-11-03T05:08:31.330
> 
> 标签：python

我想使用将达到 100,000 的迭代器创建一个列表

['guid:0','guid:2', .....'guid:100000']

Python是最python的方法吗？一个班轮...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T05:09:32.633

蟒蛇2：`['guid:%d' % i for i in xrange(0, 100002, 2)]`

蟒蛇3：`['guid:%d' % i for i in range(0, 100002, 2)]`

# c++ - 内存屏障：如何确保工作线程看到初始化写入？

> ID：13206148
> 
> 赞同：4
> 
> 时间：2012-11-03T05:09:27.553
> 
> 标签：c++, memory-barriers, memory-fences

我对使用内存屏障/围栏进行编程相当陌生，我想知道我们如何保证设置写入在随后在其他 CPU 上运行的工作函数中可见。例如，考虑以下情况：

```
int setup, sheep;

void SetupSheep():    // Run once
    CPU 1: setup = 0;
    ... much later
    CPU 1: sheep = 9;
    CPU 1: std::atomic_thread_fence(std::memory_order_release);
    CPU 1: setup = 1; 
```

之后（*不是*同时）运行很多次：

```
void ManipulateSheep():
    CPU 2: int mySetup = setup;
    CPU 2: std::atomic_thread_fence(std::memory_order_acquire);
    CPU 2: // Use sheep... 
```

在 CPU 2 上，如果`mySetup`为 1，`sheep`则保证为 9——但我们如何保证它`mySetup`不是 0？

到目前为止，我能想到的只是在 CPU 2 上旋转等待直到`setup`1。但这似乎很丑陋，因为旋转等待只需要等待第一次`ManipulateSheep()`被调用。肯定有更好的方法吗？

请注意，未初始化代码还有一个对称问题：假设您正在编写一个无锁数据结构，该结构在其生命周期内分配内存。在析构函数中（假设所有线程都已完成调用方法），您想要释放所有内存，这意味着您需要运行析构函数的 CPU 具有最新的变量值。在这种情况下甚至不可能旋转等待，因为析构函数无法知道“最新”状态是什么来检查它。

**编辑**：我想我要问的是：有没有办法说“等待我的所有商店传播到其他 CPU”（用于初始化）和“等待所有商店传播到我的 CPU”（用于未初始化）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:24:40.587

事实证明，这`#StoreLoad`正是这种情况的正确障碍。[正如 Jeff Preshing 简单解释的那样](http://preshing.com/20120710/memory-barriers-are-like-source-control-operations)：

> StoreLoad屏障确保在屏障之前执行的所有存储对其他处理器可见，并且在屏障之后执行的所有加载都接收到屏障时可见的最新值。

在 C++11 中，`std::atomic_thread_fence(std::memory_order_seq_cst)`显然充当`#StoreLoad`屏障（以及其他三个：`#StoreStore`、`#LoadLoad`和`#LoadStore`）。请参阅[此 C++11 草案文件](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2633.html)。

旁注：在 x86 上，该[`mfence`指令](http://www.softeng.rl.ac.uk/st/archive/SoftEng/SESP/html/SoftwareTools/vtune/users_guide/mergedProjects/analyzer_ec/mergedProjects/reference_olh/mergedProjects/instructions/instruct32_hh/vc172.htm)充当`#StoreLoad`; `_mm_fence()`如果需要，这通常可以与编译器内在一起发出。

因此，无锁代码的模式可能是：

```
Initialize:
    CPU 1: setupStuff();
    CPU 1: std::atomic_thread_fence(std::memory_order_seq_cst);

Run parallel stuff

Uninitialize:
    CPU 2: std::atomic_thread_fence(std::memory_order_seq_cst);
    CPU 2: teardownStuff(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:30:08.293

事实上，内存屏障并没有给你任何方法来等待条件变为真。您几乎肯定希望使用操作系统提供的功能来执行此操作，例如 pthread 条件变量，或较低级别的原语，例如 Linux 的 futex 调用。

但是，您在示例中显示的障碍至少足以确保`ManipulateSheep`可以判断绵羊是否已准备好。

（咩。）

# algorithm - TSP NP-Hard 怎么样？

> ID：13206152
> 
> 赞同：3
> 
> 时间：2012-11-03T05:09:57.507
> 
> 标签：algorithm, traveling-salesman, np, np-hard

[我在SO](https://stackoverflow.com/questions/3671429/why-are-np-problems-called-that-way-and-np-hard-and-np-complete)的答案之一中阅读了以下内容：

*旅行商问题，正如通常所提出的，是找到连接所有城市的最便宜的路线。这不是决策问题，我们无法直接验证任何提议的解决方案。我们可以将其重述为一个决策问题：给定成本 C，有没有比 C 更便宜的路线？这个问题是 NP 完全的，只需一点点工作，我们就可以像修改后的 NP 完全形式一样简单地求解原始 TSP。因此，TSP 是 NP 难的，因为它至少与 NP 完全问题一样难。*

我知道 TSP 是 NP-Complete 但问题是如何 NP-Hard ？我读到NP中但不在P中的问题是NP-Hard。我无法将这件事与 TSP 联系起来。请解释一下。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T05:26:32.373

NP-Hard 问题是 NP 中的每个问题都有多项式时间（Cook 或 Karp，多个定义）归约到的那些问题。这些可能包含不属于 NP 的问题，实际上甚至不需要包含可决定的问题（如停止问题）。

NP-Complete 问题是 NP 中也是 NP-Hard 的那些问题。

如果 P 不等于 NP，则 NP 中存在无限多的问题，它们既不在 P 中，也不是 NP-Complete（Ladner 定理）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-29T20:01:43.590

TSP 问题的优化版本已被证明是 NP 难的，但由于尚有已知的验证算法，因此尚不知道它是否在 NP 中。

TSP 问题的决策版本已显示为 NP-complete（in-NP 和 NP-hard）。

# spring - 如何防止测试在 TestNG 中的每次测试之前清理数据库？

> ID：13206153
> 
> 赞同：0
> 
> 时间：2012-11-03T05:10:18.647
> 
> 标签：spring, hibernate, testng

我有一个这样的测试：

```
 @RunWith(SpringJUnit4ClassRunner.class),
 @ContextConfiguration(locations = { "file:war/WEB-INF/application-context.xml" })
 @Transactional
 public class ServiceImplTest extends AbstractTestNGSpringContextTests
 {
     @Autowired
     private Service service;

     @Test
     @Rollback(false)
     public void testCreate()
     {
         .....
         //save an entity to table_A
         service.save(a);
     }
 } 
```

似乎每次测试运行前都会清理table_A（不是测试运行后回滚），因为每次测试后，表中的所有旧数据条目都被清理了，只剩下测试新插入的条目。如何防止这种情况“清洁”行动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:22:47.113

默认行为是回滚测试上下文中的事务。您可以使用测试方法上的注释覆盖此行为，[`@Rollback(false)`](http://static.springsource.org/spring/docs/2.5.6/reference/testing.html)以不回滚在该特定测试期间对数据库所做的更改。

也就是说，建议每个测试用例都是独立的，并且应该有自己的场景设置、场景执行和场景拆除。否则，如果测试之间存在相互依赖关系，则很难分析测试失败行为。

# java - https URL 主机名与服务器证书上的公用名 (CN) 不匹配

> ID：13206155
> 
> 赞同：5
> 
> 时间：2012-11-03T05:10:47.173
> 
> 标签：java, web-services

我收到以下错误

```
javax.xml.ws.soap.SOAPFaultException: Marshalling Error: The https URL hostname does not match the Common Name (CN) on the server certificate.  To disable this check (NOT recommended for production) set the CXF client TLS configuration property "disableCNCheck" to true. 
```

当我尝试连接和使用 Web 服务时。

我在 cxf.xml 中添加了以下几行，但它仍然不起作用。

```
<http-conf:conduit  name="*.http-conduit">
<!--  deactivate HTTPS url hostname verification (localhost, etc)
WARNING ! disableCNcheck=true should NOT be used in production -->
<http-conf:tlsClientParameters  disableCNCheck="true" /> 
```

cxf.xml 文件放在WEB-INF/classes/CxfService 下。

请让我知道会是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T04:02:47.240

这种配置可能没有真正的问题。您在 Web 服务的 URL 中使用的主机名与证书中的主机名不匹配，但这可能是出于多种合法原因，但仍允许访问正确的数据。

SSL 提供两种保护。

1.  隐私：它提供了一个加密通道，数据通过该通道传递，因此其他人无法看到该数据
2.  来源保证：它还保证您已连接到您要求连接的站点。

然后，您可以看到三个安全级别：

*   根本没有保护
*   加密通道，因此没有人可以看到您的数据
*   加密通道，以及确保您连接到您期望的站点。

您要禁用的是后一个功能。该站点提供了一个加密证书，可以对其进行解码以说明用于访问该站点的 DNS 名称。如果您使用的名称与证书中的名称不匹配，您会收到此警告。您可能知道，有多种方法可以寻址服务器，并且证书仅匹配证书所针对的一个 DNS 名称。也许您没有使用正确的名称访问服务？或者您可能有一个“自签名”服务，它提供加​​密通道，但不提供来源保证。

要问自己的问题：您是否担心有人会入侵 DNS 系统，并导致您的请求（通过 DNS 名称）被路由到服务器，然后该服务器将提供虚假数据来代替您期望的 Web 服务。它肯定会发生，我不会说它永远不会发生，但它非常罕见。查看[更多关于此的讨论](http://social-biz.org/2011/10/16/the-anti-ssl-conspiracy/)。

这就是潜在的问题：有人可能会欺骗您正在调用的 Web 服务。安全专家永远不会建议妥协的立场，但您应该评估数据的价值、欺骗服务的可能性以及这种欺骗可能造成的损害。如果这是一个重大问题，那么您必须使用与证书匹配的主机名，或者您必须获得与您使用的主机名匹配的证书。

# c# - 切换列表项的可见性

> ID：13206156
> 
> 赞同：1
> 
> 时间：2012-11-03T05:10:58.180
> 
> 标签：c#, jquery, asp.net-mvc, razor

我正在使用带有 Razor 视图引擎的 MVC 4。

我想显示一个嵌套的无序列表，其中包含作为父母的年份和作为孩子的月份。

考虑以下 HTML：

```
<div>
    <ul>
    @foreach (var yr in Dates.Select(x => x.Year).Distinct())
    {
        <li><a href="#" class="parent">@yr</a></li>
        <ul class="child" style="display: none">
        @foreach (var mo in Dates.Where(x => x.Year == yr).Distinct())
        {
            <li id="@yr"><a href="#" class="submit-link" id="@mo.Month">@mo.ToString("MMMM")</a></li>
        }
        </ul>
    }
    </ul>
</div> 
```

我添加了以下脚本，以在单击“.parent”锚点时显示“.child”（dis）。

```
<script type="text/javascript">

    $(function () {
        $(".parent").click(function () {
            $(this).closest("ul").find(".child").toggle("fast")
            return false;
        });
    });

</script> 
```

但是，它会切换文档中的所有“.child”项目。如何让它只切换一个孩子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:13:17.130

您的 html 无效：您不能将一个`<ul>`元素直接嵌套在另一个`<ul>`.

您`<ul class="child">`应该`<li>`与相应的锚元素在同一元素内：

```
<div>
    <ul>
    @foreach (var yr in Dates.Select(x => x.Year).Distinct())
    {
        <li><a href="#" class="parent">@yr</a>
            <ul class="child" style="display: none">
            @foreach (var mo in Dates.Where(x => x.Year == yr).Distinct())
            {
                <li id="@yr"><a href="#" class="submit-link" id="@mo.Month">@mo.ToString("MMMM")</a></li>
            }
            </ul>
        </li>
    }
    </ul>
</div> 
```

*然后*你可以这样做：

```
$(function () {
    $(".parent").click(function () {
        $(this).siblings(".child").toggle("fast");
        // OR
        $(this).next().toggle("fast");
        return false;
    });
}); 
```

你拥有它的方式，`$(this).closest("ul")`上升到顶层`<ul>`，所以当你使用`.find(".child")`它时，它会在顶层的任何地方找到该类的所有元素`<ul>`。

# c - 在 C 中删除应用程序中的信息

> ID：13206158
> 
> 赞同：0
> 
> 时间：2012-11-03T05:11:11.570
> 
> 标签：c, strcmp, strcpy

我有一个电话簿应用程序，用户可以输入联系信息，它会显示在电话簿中。我有一个删除功能，允许用户通过姓氏搜索并从电话簿中删除联系人。我的问题是，当我搜索姓氏以删除联系人时，不仅是该联系人，还包括其后的所有联系人。

```
void delete_contact(fr*friends ,int* counter, int i)
{
    char name_search[50]={'\0'};
    char Delete[5]={'\0'};

     printf("Search by last name\n");
     scanf("%s",name_search);
     for(i=0;i<*counter;i++)
      {
       if(strcmp(name_search,friends[i].Last_Name)==0)
       {
       strcpy(friends[i].Last_Name,Delete);
       (*counter)--;

      } 
    }                                        
 } 
```

现在我意识到我需要编写更多`strcpy`函数来覆盖与姓氏相关的联系人中的其余信息，但现在我需要弄清楚为什么它会删除电话簿中的所有其他姓名。想法？

如果需要，我可以发布更多代码或我的输出。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:42:24.587

递减后，您必须通过语句`(*counter)--`退出循环。`'break'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:25:07.197

如果您拥有删除所需的所有“信息”，那么您要做的事情会稍微简单`struct fr`。

假设它只是一个链表，您将需要编写一个删除函数，该函数将从链表中删除单个节点

如果它是一个简单的数组，您可以用一堆“默认”值覆盖数据（下次搜索存储空间时可以填充）。

# php - 无法将 mysql_fetch_array 更改为 mysqli_fetch_array

> ID：13206159
> 
> 赞同：2
> 
> 时间：2012-11-03T05:11:13.567
> 
> 标签：php, mysql, mysqli

我正在我正在构建的网站上进行分页，我在这里找到了一个很好的分页示例：[http](http://www.awcore.com/dev/1/3/Create-Awesome-PHPMYSQL-Pagination_en) ://www.awcore.com/dev/1/3/Create-Awesome-PHPMYSQL-Pagination_en 。我想在我的页面上使用这个，但我使用的是 mysqli 而不是 mysql，并且需要转换其中的一些。

我是 MySQL 新手，正在尝试找出转换以下代码的语法：

```
function pagination($query, $per_page = 10,$page = 1, $url = '?'){        
    $query = "SELECT COUNT(*) as `num` FROM {$query}";
    $row = mysql_fetch_array(mysql_query($query));
    $total = $row['num'];
    $adjacents = "2"; 
```

我知道它并不能告诉你整个代码是什么（大约 100 行长），但我假设这可能是一个简单的语法更改。我最初这样做是这样的：

```
function pagination($query, $per_page = 10,$page = 1, $url = '?'){        
    $query = "SELECT COUNT(*) as `num` FROM {$query}";
    $row = mysqli_fetch_array(mysqli_query($query));
    $total = $row['num'];
    $adjacents = "2"; 
```

我知道 mysqli_query 需要采用两个参数，但我也觉得 mysql_query 是一样的，所以我想我只是不理解代码。抱歉，如果这是一个超级基本的问题，我只是想围绕其中一些概念来思考！谢谢你的帮助。

顺便说一句，我确实看到了这个问题（[Converting from mysql to mysqli (mysql_fetch_array)](https://stackoverflow.com/questions/10518090/converting-from-mysql-to-mysqli-mysql-fetch-array)），但似乎他正在采取一些可能不需要采取的额外步骤。

## 编辑

这是我在上面的代码中收到的错误消息，仅供参考：

> 警告：mysqli_query() 至少需要 2 个参数，1 个在第 9 行的 linkinformation/functions.php 中给出
> 
> 警告：mysqli_fetch_array() 期望参数 1 为 mysqli_result，在第 9 行的 linkinformation/functions.php 中给出 null

## 编辑

所以我在函数内添加了一个连接（这是正确的方法吗？我尝试在函数外部进行连接，但它正在获取信息）：

```
function pagination($mysqli, $query, $per_page = 10,$page = 1, $url = '?'){        
    $mysqli = mysqli_connect("localhost","username","password", "db_name");
    $query = "SELECT COUNT(*) as `num` FROM {$query}";
    $row = mysqli_fetch_array(mysqli_query($mysqli, $query));
    $total = $row['num'];
    $adjacents = "2"; 
```

我收到这个警告：

```
Warning: mysqli_fetch_array() expects parameter 1 to be mysqli_result, boolean given in linkstuff/functions.php on line 10 
```

它得到一个布尔值（我假设它是 TRUE），而它应该得到我认为的其他东西/实际查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T05:34:03.143

您还需要将连接更改`mysqli`为，并将连接对象`mysqli_query`作为第一个参数传递给。

```
function pagination($link, $query, $per_page = 10,$page = 1, $url = '?'){        
    $query = "SELECT COUNT(*) as `num` FROM {$query}";
    $row = mysqli_fetch_array(mysqli_query($link, $query));
    $total = $row['num'];
    $adjacents = "2"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:51:41.037

像这样的东西：

```
//You need to change thses variables    
$conn = new mysqli('localhost','root','',$databasename);

    function pagination( $conn,$query, $per_page = 10,$page = 1, $url = '?'){        
        $query = "SELECT COUNT(*) as `num` FROM {$query}";
        $result = $conn->query($query);
        $row=$result->fetch_array;
        $total = $result->num_rows;
        $adjacents = "2"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:51:10.263

//你需要改变这些变量

```
global $conn;  
$conn = new mysqli('localhost','root','',$databasename);

    function pagination($query, $per_page = 10,$page = 1, $url = '?'){        
        $query = "SELECT COUNT(*) as `num` FROM {$query}";
        $result = $GLOBALS['conn']->query($query);
        $row=$result->fetch_array;
        $total = $result->num_rows;
        $adjacents = "2"; 
```

# c# - 是否可以在没有 edititemtemplate 的情况下编辑 GridView 单元格？

> ID：13206160
> 
> 赞同：0
> 
> 时间：2012-11-03T05:11:19.317
> 
> 标签：c#, asp.net, .net, gridview

```
<asp:GridView ID="GridView1" runat="server">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton ID="LinkButton1" runat="server" OnClick="lclick">Buy</asp:LinkButton>
            </ItemTemplate>
    <edititemtemplate>
        <asp:Textbox runat="server" id="txt"/>
    <edititemtemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

`GridView`是否可以在没有`edititem`模板的情况下进行编辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:22:20.837

我以前做过，我只能解释我做了什么

为了确保我的编辑控件是视图状态的一部分，我在页面底部添加了一个空表单

```
<div id="myeditform">
   <table>
   <tr>
     <td><asp:HiddenField runat="server" ID="myRowId" />
     </td>

     <td>... other controls </td>

     <td>... Save button -- </td>
   </tr>
   <table>
</div> 
```

tr(s) 必须与网格中的列数匹配，或者您可以使用`colspan`

然后

*   使用 jQuery 或 javascript 来获取行（例如，与单击的编辑链接最近的父级），
*   获取 td(s) 并将每个值传递`td`给编辑表单中的相应控件。
*   `<tr>`用您的编辑表单中的表格内容替换您
*   单击保存时，刷新页面以更新gridview

# css - 如何使用 CSS 堆叠元素

> ID：13206161
> 
> 赞同：0
> 
> 时间：2012-11-03T05:11:54.850
> 
> 标签：css

我`div`在一个容器中有四个元素：

```
<div id="container">
    <div id="top"></div>
    <div id="bottom-left"></div>
    <div id="bottom-center"></div>
    <div id="fill"></div>
</div> 
```

我需要将它们定位如下：

元素的顶部边缘`top`应位于容器的顶部边缘。该`bottom-left`元素应位于容器的左下角。该`bottom-center`元素应位于容器底部的中心。该`fill`元素将具有固定宽度，并应垂直占用剩余空间。

问题是`fill`元素将包含任意文本并且可以是任意高度。我需要把它放在`top`元素下面，然后把它放在`bottom-center`下面。的底部边缘`bottom-left`必须与 的底部对齐`bottom-center`。

我尝试了绝对定位，但它不适用于任意文本长度。

我将不胜感激任何帮助。

编辑：这里是 jsfiddle 代码： http: [//jsfiddle.net/gCg29/](http://jsfiddle.net/gCg29/) 它创建了我想要实现的布局，但是有一个表格。

如何摆脱桌子并具有相同的功能？请注意，如果浏览器窗口的宽度不足，则元素不会重叠。还要注意，如果文本的长度增加，那么左下角和文本下的元素会粘在文本的底部。

```
 +-----------------------+
                           |  top (fixed size)     |
                           +-----------------------+
                    +-----------------------------------+
                    |                                   |
                    |                   fill            |
                    |        (arbitrary height,         |
+-----------------+ |         fixed width)              |
|                 | |                                   |
|  bottom-left    | |                                   |
|  (fixed size)   | |                                   |
|                 | |                                   |
|                 | |                                   |
|                 | |                                   |
|                 | |                                   |
|                 | +-----------------------------------+
|                 |      +--------------------------+
|                 |      |bottom-center (fixed size)|
+-----------------+      +--------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:43:21.580

这是很多 css，但我认为这就是你想要的。这里发生了很多事情：

1.  将#container 设置为，`position: relative`以便您可以绝对定位#bottom-left 和#bottom-center
2.  给 #top 和 #fill`margin: 0 auto`以便它们在页面上居中
3.  #bottom-center 也可以`left: 50%`带到中心。然后`margin-left: -width`让它完全居中
4.  #container`padding-bottom: 75px`使 #fill 不会与底部 div 重叠

[http://jsfiddle.net/34Jpx/2/](http://jsfiddle.net/34Jpx/2/)

```
div { 
    border: 1px dotted lightgray; 
}
div#container { 
    text-align: center; 
    width: 100%;  
    position: relative;
    padding-bottom: 75px; 
}
div#top { 
    height: 50px; 
    width: 400px; 
    margin: 0 auto; 
    background: lightgreen;  
}
div#fill { 
    height: 200px; 
    width: 500px; 
    margin: 0 auto;  
    background: lightblue; 
    border: 2px solid red; 
}
div#bottom-left {
    position: absolute;
    bottom: 0;
    height: 200px;
    width: 150px;
    background: gray;
    z-index: 99;
}
div#bottom-center {
    position: absolute;
    bottom: 0;
    left: 50%;
    margin-left: -200px;
    width: 400px;
    height: 50px;
    background: lightyellow;
    z-index: 100;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T05:54:57.137

我有一个可怕的想法给你。本质上，您要求反转页面重力。因此：

```
jQuery('body').css('transform', 'rotate(180deg)');
jQuery(everythingelse).css('-webkit-transform', 'rotate(180deg)'); 
```

这将翻转页面，然后将所有元素重新翻转到位，以便它们显示正面朝上但在反转后的相同位置。

当然，您不仅要支持 css3 浏览器，而且我敢肯定这非常昂贵，但我认为这将是一个有趣的答案，如果不是完全有用的话。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T09:04:36.940

干得好：

```
#container {
    position: relative;
    overflow: hidden;
}

#fill {
    margin: 0 auto 50px; /* 50px = height of bottom-center */
    width: 300px;
}

#top, #bottom-center {
    height: 50px;
    width: 200px;
    margin: 0 auto;
}

#bottom-center {
    position: absolute;
    bottom: 0;
    left: 50%;
    margin-left: -100px; /* - width / 2 */
}

#bottom-left {
    position: absolute;
    left: 0;
    bottom: 0;
} 
```

[http://jsfiddle.net/nXqQr/1/](http://jsfiddle.net/nXqQr/1/)

重要的部分`overflow: hidden;`在容器上，这将使边距`#fill`扩大其大小，以便`#bottom-center`适合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T05:30:47.887

创建一个不可见的 div（我们称之为 inv-div-1），它只包含左下角和另一个包含所有其余部分的（inv-div-2），给它们一个 float:left; 定位。在 html 文件中，inv-div-1 必须位于 inv-div-2 之前。

# php - 在 javascript 中运行 php 函数的语法

> ID：13206164
> 
> 赞同：0
> 
> 时间：2012-11-03T05:12:05.737
> 
> 标签：php, javascript, jquery, function

我尝试了不同的方法来让它发挥作用。我知道我必须包装函数但不能让它工作。该函数在 .js 文件中运行。

[http://jsfiddle.net/hookedonweb/yq8Hz/](http://jsfiddle.net/hookedonweb/yq8Hz/)

```
function showLabel(labelName) {
   var labelImgs = jQuery(".content .packaging .labels img");
   var focusImg  = jQuery("#label_" + labelName);

   if (labelImgs.length > 0 && focusImg.length > 0) {
       labelImgs.each(function() { jQuery(this).removeClass("active"); });

       focusImg.addClass("active");
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:22:07.393

我想你可能会混淆 PHP 和 jQuery。无论如何，您的代码可以简化很多。这似乎做你想做的事。如果不是，那么您需要澄清您的问题。

[http://jsfiddle.net/yq8Hz/3/](http://jsfiddle.net/yq8Hz/3/)

不要使用内联 javascript。您正在使用 jQuery，因此请使用它来将您的代码与 html 分开。这是一个很好的做法。您可以使用数据属性来存储您要引用的img。

```
<div><a href="" data-label="macandcheese">See Label</a></div>
<div><a href="" data-label="lasagna">See Label</a></div>
<div><a href="" data-label="beefstroganoff">See Label</a></div> 
```

然后使用 jQuery 的悬停来添加/删除活动类。我们利用 jQuery 的`data`方法来获取我们想要的标签。

```
$('a').hover( function() {
    $('img').removeClass('active');
    $('img#label_' +  $(this).data('label')).addClass('active');
});​ 
```

# git - 如何不显示在git中修改的文件

> ID：13206166
> 
> 赞同：1
> 
> 时间：2012-11-03T05:12:11.683
> 
> 标签：git, gitignore

我在 .gitignore 文件中有以下内容

```
application/config/database.php
application/config/config.php 
```

但是当我运行 git status 时，两个文件都在修改中。那git不应该忽略这些文件吗？我应该怎么做才能不显示这些文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:18:23.197

您必须停止跟踪文件。你可以这样做

```
git rm -r --cached . 
```

进而

```
git add . 
```

并提交

```
git commit -m "message" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:16:18.463

听起来 .gitignore 文件中的条目可能是在文件已经受到版本控制之后进行的。有更优雅的方法可以做到这一点，但纠正这种情况的一种简单方法是暂时从 .gitignore 中删除这些行。然后，将文件复制出项目目录并提交看似已删除的文件。添加你的忽略，并提交。现在，最后，将您的文件移回 - 现在应该正确忽略它们。希望这有帮助，祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T05:16:29.860

gitignore 只会阻止新文件被跟踪。如果一个文件已经被跟踪，它将继续被跟踪，即使它与忽略模式匹配。

# haskell - 在 Haskell 中应用 seq 来提高执行时间

> ID：13206169
> 
> 赞同：1
> 
> 时间：2012-11-03T05:12:38.483
> 
> 标签：haskell, ghc, lazy-evaluation, execution-time, seq

我有以下内容：

```
data Node = Node { position::Int
                 , zombies::Float
                 , connections::[Int]
                 }

moveZombie :: [Node] -> Node -> Node
moveZombie nodes (Node i _ cx) = zc `seq` Node i zc cx
  where zc = sum [zombies n / (fromIntegral $ length $ connections n) | i <- cx, let n = nodes !! i]

step :: Int -> [Node] -> [Node]
step 0 nodes = nodes
step k nodes = step (k-1) $ map (moveZombie nodes) nodes 
```

在 GHC 中启用分析的编译告诉我成本中心是：

```
 Individual
COST CENTRE            MODULE %time %alloc
moveZombie.zc          Main   60.3   90.4
moveZombie.zc.n        Main   37.6    0.0 
```

我尝试了以下方法：`moveZombie nodes (Node i _ cx) = zc `seq` Node i zc cx`强制进行严格的评估并让程序运行得更快，但完全没有成功。我知道我对工作方式的理解有问题`seq`，但我似乎无法弄清楚是什么。

我认为，我需要强制进行严格的评估，`step k nodes = step (k-1) $ map (moveZombie nodes) nodes`但是我很困惑。

**我知道：**

1.  `seq a b`在评估时强制`a`进入弱第一范式`b`
2.  如果最外面的表达式是 lambda 或 Data 构造函数，则表达式为弱范式

任何指向我缺少什么理解的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T17:34:52.407

主要的速度问题是将“节点”视为一个列表 - 您的算法通常需要在随机位置获取项目，这对于链表数据结构中的每次检索都是 O(n)。

将 [Node] 中的“节点”替换为任何更适合的数据结构（Data.Map 或 Array）将显着提高复杂性。

# .htaccess - RewriteRule 以访问公用文件夹外的文件夹

> ID：13206170
> 
> 赞同：2
> 
> 时间：2012-11-03T05:12:47.957
> 
> 标签：.htaccess, mod-rewrite

我的 .htaccess 文件将请求重定向到 public_html 文件夹。

例如，`http://mydomain.com/file.html`将显示`root_folder/public_html/file.html`.

但是，我希望它显示出来`root_folder/anotherfolder/file.html`。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T04:36:55.740

我想你想要

```
Alias /file.html root_folder/anotherfolder/file.html 
```

# java - 如何在 Java 中将 ArrayList 数据类型插入 MySQL 数据库

> ID：13206173
> 
> 赞同：2
> 
> 时间：2012-11-03T05:12:49.370
> 
> 标签：java, mysql

我有以下变量：

```
 ArrayList<String> NameSet = new ArrayList<String>(); 
```

我使用以下`add`方法在循环中填充了项目：

```
 NameSet.add(Body.item(t).getAttributes().getNamedItem("name").getNodeValue()); 
```

如何在 MySQL 数据库中以长文本数据类型插入列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-27T04:48:52.897

没有直接的方法可以将数组列表插入 mysql 中的一行。但是，如果您想在单行中插入名称，那么您可以将它们保存到字符串变量中，然后用“字符”分隔它们，然后使用插入查询将其保存在 Db 中，而不是将它们放入数组列表中。

否则，您必须创建一个单独的方法将此数组列表转换为字符串，然后执行上述操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-04T10:50:24.947

插入批次将是一个很好的解决方案：

假设连接是您的 mysql jdbc 连接：

```
 String queryInsert="INSERT INTO  TableName ( name, field2 ,...) values (?,?,..)";
        try( PreparedStatement ps= connection.prepareStatement(queryInsert);){
             connection.autoCommit(false);
            for(String name:NameSet){
            ps.setString(1,name);
             ....
      }
    ps.executeBatch();
    connection.commit();
} catch (SQLException e) {
    con.rollback();
    System.err.format(e.getSQLState(), e.getMessage());
} 
```

# java - 调用 java 属性类

> ID：13206176
> 
> 赞同：-1
> 
> 时间：2012-11-03T05:13:13.997
> 
> 标签：java, properties

需要创建一个类，我可以在其中加载属性并能够从该类中调用所需的属性。比如propertiesClass.getname()；

到目前为止，这是我的课程。我似乎无法启动属性加载。

所以我需要的是项目中的另一个类来做（目前为空）

字符串 url = TestProperties.getBaseUrl();

*更新了课程，这是现在的样子。

```
 public class TestProperties {

    private static Properties testProperties;
    private static String instanceUrl;

    public TestProperties() throws Exception{

         loadProperties();
         getInstanceProperties();
         instanceUrl =  TestProperties.testProperties.getProperty("confluence.base.url","");
    }

    public static String getBaseUrl(){

          return instanceUrl;
    }

    private void loadProperties() throws IOException {
        InputStream testPropertiesInput = this.getClass().getClassLoader().getResourceAsStream("smoketest.properties");
        TestProperties.testProperties = new Properties();

//        if (null != testProperties) {
            try{
                TestProperties.testProperties.load(testPropertiesInput);
            } finally {
                IOUtils.closeQuietly(testPropertiesInput);
            }
//        }
     }

}

my otherclass(){
 String myurl = TestProperties.getBaseUrl();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:15:08.733

请确保您能够正确访问您的属性`smoketest.properties`文件`InputStream testPropertiesInput`。

编辑：

不需要在里面重新定义局部变量`loadProperties`并返回它。它可以很简单地写成：

```
 private static void loadProperties() throws IOException {
       InputStream testPropertiesInput = getClass().getClassLoader()
                                     .getResourceAsStream("smoketest.properties");
       Properties testProperties = new Properties();
       try{
            TestProperties.testProperties.load(testPropertiesInput);
        } finally {
            IOUtils.closeQuietly(testPropertiesInput);
        }
        TestProperties.testProperties = testProperties;
    } 
```

**我认为`public void TestProperties() throws Exception{`是您班级的构造函数。如果是，请`void`从它中删除，因为它是一种方法。**

最后，您可能希望`testProperties`在`TestProperties()`构造函数中使用：

```
 public TestProperties() throws Exception{
     loadProperties();
     getInstanceProperties();
     instanceUrl = TestProperties.testProperties
                                            .getProperty("confluence.base.url","");
  } 
```

**请注意：我认为您的类变量不应定义为`static`. 这样做有什么理由吗？**

**编辑：这是希望为您工作的示例代码：**

```
 public class TestProperties {

        private static Properties testProperties;
        private static String instanceUrl;

        public TestProperties(){
            try{
                loadProperties();
                //getInstanceProperties();
                instanceUrl = TestProperties.testProperties
                                        .getProperty("confluence.base.url","");
               }catch(IOException ioe){
                 ioe.printStackTrace();
               }
        }

        static{
             //Just to initialize the properties
             new TestProperties();
        }        

        private void loadProperties() throws IOException {
          InputStream testPropertiesInput = getClass().getClassLoader()
                                .getResourceAsStream("smoketest.properties");
          Properties testProperties = new Properties();
          try{
              testProperties.load(testPropertiesInput);
          } finally {
               IOUtils.closeQuietly(testPropertiesInput);
          }
          TestProperties.testProperties = testProperties;
        }

        public static String getBaseUrl(){
              return instanceUrl;
        }

        public static String getPropertyValue(String key){
              return TestProperties.testProperties.getProperty(key,"Not Found");
        }
    } 
```

现在您可以在任何地方简单地获取您的基本 URL：

```
 public static void main(String[] args) {
        System.out.println(TestProperties.getBaseUrl());
        System.out.println(TestProperties.getPropertyValue("confluence.base.url"));
        System.out.println(TestProperties.getPropertyValue("test.property"));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:26:33.123

方法

```
public void TestProperties() throws Exception{ 
```

本来是构造函数，但不是构造函数，因此该类仅获得默认的无参数构造函数。将其更改为：

```
public TestProperties() throws Exception{ 
```

即删除返回类型，因为构造函数与普通方法的区别在于不声明返回类型。

# mysql - 将 .txt 文件中的数据导入 mySQL 表

> ID：13206180
> 
> 赞同：0
> 
> 时间：2012-11-03T05:14:26.527
> 
> 标签：mysql, database

我已经在 mysql 中创建了表并创建了表现在我想将数据插入到表中，但问题是我想插入到该特定表中的数据与我一起保存在单独的文本文件中，相同我想插入表中的数据，请告知如何将文本文件的数据插入到该特定表中。我还下载了sql gui浏览器工具，请告知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:23:10.950

据我了解

您应该使用任何编程语言来读取您的文本文件并将其插入

或者

如果您想避免编程语言，那么您可以使用文件中的 sql 注释将文本文件与这些数据一起导入您的数据库，作为 mysql 导入过程。

[文档](http://dev.mysql.com/doc/refman/5.5/en/mysqlimport.html)

[更多信息](http://blogs.devart.com/dbforge/how-to-import-data-to-mysql-from-text-file.html)

# ruby-on-rails - 为什么我无法测试我的版本主义路线

> ID：13206182
> 
> 赞同：1
> 
> 时间：2012-11-03T05:14:35.793
> 
> 标签：ruby-on-rails, rspec

我有这样的版本路线

```
api_version(:module => "api/v1", :path => "api/v1") do
  match '/files' => 'files#index', :via => :get
end 
```

还有我的控制器 app/controllers/api/v1/files_controller.rb

```
class Api::V1::FilesController < ApplicationController

  def index
  end

end 
```

根目录/spec/controllers/api/v1/files_controller_spec.rb 中的规范

```
require 'spec_helper'

describe Api::V1::FilesController do

  describe "routing" do

    it "should routes to version-1 api" do
      expect(:get => "/api/v1/files").to route_to("api/v1/files#index")
    end

  end

end 
```

命令 rake routes 给了我这样的路线列表

```
devise/registrations#edit
                          PUT    /users(.:format)  devise/registrations#update
                          DELETE /users(.:format)  devise/registrations#destroy
             api_v1_files GET    /api/v1/files(.:format)      api/v1/files#index 
```

当我运行 rake spec:controllers 时，规格下降。

```
F

Failures:

1) Api::V1::FilesController routing should routes to version-1 api
 Failure/Error: Unable to find matching line from backtrace
 NoMethodError:
   undefined method `[]' for nil:NilClass
 # /home/dilshod/.rvm/gems/ruby-1.9.2-p290/gems/moped-1.2.7/lib/moped/node.rb:74:in `block in command'
 # /home/dilshod/.rvm/gems/ruby-1.9.2-p290/gems/moped-1.2.7/lib/moped/n 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:35:57.440

解决将 RUBY 更新到 1.9.3 的问题

# drools - Drools Guvnor 数据枚举 API

> ID：13206189
> 
> 赞同：1
> 
> 时间：2012-11-03T05:15:12.680
> 
> 标签：drools, guvnor

在 Guvnor 文档中，我知道如何定义数据枚举并在 Guvnor 中使用它。是否可以从我自己的 Java 代码中获取数据枚举？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:15:57.480

我希望现在回答这个问题还为时不晚。

要将枚举从应用程序加载到 guvnor，

1.  从字符串动态构建枚举类（在我的情况下，枚举值由用户通过 GUI 提供）
2.  将其添加到 jar 中，将其转换为字节数组
3.  通过 REST 调用将其作为资产（模型 jar）发布到 guvnor
4.  调用save repository操作（guvnor源代码变化）

现在枚举将在您的规则窗口中显示为事实。

编辑/删除模型 jar 和验证规则后果是您必须注意的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:38:58.357

从 Guvnor 的文档中：

> 以编程方式加载枚举：在某些情况下，人们可能希望完全从外部数据源（例如关系数据库）加载他们的枚举数据。为此，您可以实现一个返回 Map 的类。map 的 key 是一个字符串（即如上所示的 Fact.field 名称），value 是一个 java.util.List of Strings。

```
public class SampleDataSource2 {
    public Map<String>, List<String> loadData() {
        Map data = new HashMap();
        List d = new ArrayList();
        d.add("value1");
        d.add("value2");
        data.put("Fact.field", d);
        return data;
    }
} 
```

> 在 BRMS 的枚举中，您输入：

```
=(new SampleDataSource2()).loadData() 
```

> “=”告诉它通过执行代码来加载数据。

此致，

# javascript - Javascript电话号码自动转换不起作用

> ID：13206190
> 
> 赞同：3
> 
> 时间：2012-11-03T05:15:38.017
> 
> 标签：javascript, jquery

我有一些像下面这样的javascript代码

```
function mask(eventVal,val){
    var len = val.value.length;
    var key = whichKey(eventVal);
    if(key>47 && key<58)
    {   
        if( len==0 )val.value=val.value+'('
        else if( len==4 )val.value=val.value+') '
        else if(len==9 )val.value=val.value+'-'
        else val.value=val.value;
    }
    else{
        val.value = val.value.replace(/[^0-9-]/,'')
        val.value = val.value.replace('--','-')
    }
}

function whichKey(eventVal) {
    var code;
    if (!eventVal) var eventVal = window.event;
    if (eventVal.keyCode) code = eventVal.keyCode;
    else if (eventVal.which) code = eventVal.which;
    return code;
} 
```

HTML

```
<input type="text" name="PhoneNumber" id="PhoneNumber" value="" onkeydown="mask(event,this)"/> 
```

当我输入像 1234567890 这样的电话号码时，它工作正常，当我试图从末尾删除 0 等值时，它会自动转换为 (123) 456-7890，然后格式化完全被破坏。像 123) 456-789 甚至当我点击任何其他地方时它都被毁了。任何人都可以帮我解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:41:36.457

检查这个脚本..

```
<script language="javascript">
var zChar = new Array(' ', '(', ')', '-', '.');
var maxphonelength = 14;
var phonevalue1;
var phonevalue2;
var cursorposition;
function ParseForNumber1(object){
  phonevalue1 = ParseChar(object.value, zChar);
}
function ParseForNumber2(object){
  phonevalue2 = ParseChar(object.value, zChar);
}
function up(object,e) { 
  if(e){ 
    e = e 
  } else {
    e = window.event 
  } 
  if(e.which){ 
    var keycode = e.which 
  } else {
    var keycode = e.keyCode 
  }
  ParseForNumber1(object)
  if(keycode >= 48){
    ValidatePhone(object)
  }
}
function down(object,e) { 
  if(e){ 
    e = e 
  } else {
    e = window.event 
  } 
  if(e.which){ 
    var keycode = e.which 
  } else {
    var keycode = e.keyCode 
  }
  ParseForNumber2(object)
} 
function GetCursorPosition(){
  var t1 = phonevalue1;
  var t2 = phonevalue2;
  var bool = false
  for (i=0; i<t1.length; i++)
  {
    if (t1.substring(i,1) != t2.substring(i,1)) {
      if(!bool) {
        cursorposition=i
        window.status=cursorposition
        bool=true
      }
    }
  }
}
function ValidatePhone(object){
  var p = phonevalue1
  p = p.replace(/[^\d]*/gi,"")
  if (p.length < 3) {
    object.value=p
  } else if(p.length==3){
    pp=p;
    d4=p.indexOf('(')
    d5=p.indexOf(')')
    if(d4==-1){
      pp="("+pp;
    }
    if(d5==-1){
      pp=pp+")";
    }
    object.value = pp;
  } else if(p.length>3 && p.length < 7){
    p ="(" + p; 
    l30=p.length;
    p30=p.substring(0,4);
    p30=p30+") " 
    p31=p.substring(4,l30);
    pp=p30+p31;
    object.value = pp; 
  } else if(p.length >= 7){
    p ="(" + p; 
    l30=p.length;
    p30=p.substring(0,4);
    p30=p30+") " 

    p31=p.substring(4,l30);
    pp=p30+p31;

    l40 = pp.length;
    p40 = pp.substring(0,9);
    p40 = p40 + "-"

    p41 = pp.substring(9,l40);
    ppp = p40 + p41;

    object.value = ppp.substring(0, maxphonelength);
  }
  GetCursorPosition()
  if(cursorposition >= 0){
    if (cursorposition == 0) {
      cursorposition = 2
    } else if (cursorposition <= 2) {
      cursorposition = cursorposition + 1
    } else if (cursorposition <= 4) {
      cursorposition = cursorposition + 3
    } else if (cursorposition == 5) {
      cursorposition = cursorposition + 3
    } else if (cursorposition == 6) { 
      cursorposition = cursorposition + 3 
    } else if (cursorposition == 7) { 
      cursorposition = cursorposition + 4 
    } else if (cursorposition == 8) { 
      cursorposition = cursorposition + 4
      e1=object.value.indexOf(')')
      e2=object.value.indexOf('-')
      if (e1>-1 && e2>-1){
        if (e2-e1 == 4) {
          cursorposition = cursorposition - 1
        }
      }
    } else if (cursorposition == 9) {
      cursorposition = cursorposition + 4
    } else if (cursorposition < 11) {
      cursorposition = cursorposition + 3
    } else if (cursorposition == 11) {
      cursorposition = cursorposition + 1
    } else if (cursorposition == 12) {
      cursorposition = cursorposition + 1
    } else if (cursorposition >= 13) {
      cursorposition = cursorposition
    }

    var txtRange = object.createTextRange();
    txtRange.moveStart( "character", cursorposition);
    txtRange.moveEnd( "character", cursorposition - object.value.length);
    txtRange.select();
  }

}

function ParseChar(sStr, sChar)
{
  if (sChar.length == null) 
  {
    zChar = new Array(sChar);
  }
    else zChar = sChar;
  for (i=0; i<zChar.length; i++)
  {
    sNewStr = "";
    var iStart = 0;
    var iEnd = sStr.indexOf(sChar[i]);
    while (iEnd != -1)
    {
      sNewStr += sStr.substring(iStart, iEnd);
      iStart = iEnd + 1;
      iEnd = sStr.indexOf(sChar[i], iStart);
    }
    sNewStr += sStr.substring(sStr.lastIndexOf(sChar[i]) + 1, sStr.length);
    sStr = sNewStr;
  }
  return sNewStr;
}
</script> 
```

HTML：

```
<input type="text" name="txtInput" onkeydown="javascript:down(this,event);" onkeyup="javascript:up(this,event);"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:43:00.807

您可以尝试使用此代码替换您的最后一位数字

```
<script type="text/javascript">
function fnc()
{

    str=document.getElementById("atext").value;
    x=(str.match(pattern));
    if(x!="")
    {str=str.replace(/[0-9]$/g,'')}
    alert(str);
}

</script>
<body>
  <input type="text" id="atext">
  <input type="button" onClick="fnc()">
</body> 
```

# javafx-2 - 如何在 JavaFX 中使未装饰的窗口可移动/可拖动？

> ID：13206193
> 
> 赞同：16
> 
> 时间：2012-11-03T05:16:06.827
> 
> 标签：javafx-2, minimize, maximize

我必须创建一个应用程序，其中最小化和最大化按钮将被禁用。

我已经使用`"StageStyle.UNDECORATED"`了该应用程序将不再是可移动或可拖动的，因此我正在寻找任何其他替代方案来制作我的应用程序。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-19T19:29:34.037

要使窗口未装饰但仍可移动/可拖动，您必须在`MouseEvent`您选择的任何节点上处理适当的。

**例子：**

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.stage.Stage;
import javafx.stage.StageStyle;

public class SimpleWindowApplication extends Application {
    private double xOffset = 0;
    private double yOffset = 0;

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(final Stage primaryStage) {
        primaryStage.initStyle(StageStyle.UNDECORATED);
        BorderPane root = new BorderPane();

        root.setOnMousePressed(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                xOffset = event.getSceneX();
                yOffset = event.getSceneY();
            }
        });
        root.setOnMouseDragged(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                primaryStage.setX(event.getScreenX() - xOffset);
                primaryStage.setY(event.getScreenY() - yOffset);
            }
        });

        Scene scene = new Scene(root, 800, 600);
        primaryStage.setScene(scene);
        primaryStage.show();
    }
} 
```

从 Oracle 的 JavaFX 下载页面中包含的非常有价值的示例中了解更多信息：[JavaFX 演示和示例](http://www.oracle.com/technetwork/java/javase/downloads/jdk7u9-downloads-1859576.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-21T17:27:16.273

此类的唯一目的是允许拖动未装饰的窗口。它还负责确保 TaskBar 在 FullScreen 中保持可见，并确保未装饰的窗口不会拖出屏幕。最后，它为错误“未找到 css 资源”提供了错误修复。只需将以下代码粘贴到重写的 start() 方法中的主类中，就在舞台即将显示或之后显示的时候。

```
WindowStyle.allowDrag(root, stage);
WindowStyle.stageDimension(stage.getWidth(), stage.getHeight()); 
```

注意：当舞台即将显示或之后粘贴以上内容。对于全屏窗口使用：

```
WindowStyle.fullScreen(Stage stage); 
```

要将大小调整回以前的使用：

```
WindowStyle.restoreScreen(Stage stage); 
```

要将自定义样式表添加到您的场景，只需在定义场景后将以下代码粘贴到覆盖的 start() 方法的主类中。

```
scene.getStylesheets().add(WindowStyle.addStyleSheet(String css)); 
```

用于样式的 css 名称可以是：`main.css`或`styles/main.css`

```
import javafx.geometry.Rectangle2D;
import javafx.scene.Parent;
import javafx.scene.input.MouseEvent;
import javafx.stage.Screen;
import javafx.stage.Stage;

/**
 * @author:   BENJAH
 */

public class WindowStyle {
    private static final Rectangle2D SCREEN_BOUNDS= Screen.getPrimary()
            .getVisualBounds();
    private static double[] pref_WH, offset_XY;
    private static String styleSheet;

    private WindowStyle(String css) {
        styleSheet= getClass().getResource(css).toString();
    }

    protected static void allowDrag(Parent root, Stage stage) {
        root.setOnMousePressed((MouseEvent p) -> {
            offset_XY= new double[]{p.getSceneX(), p.getSceneY()};
        });

        root.setOnMouseDragged((MouseEvent d) -> {
            //Ensures the stage is not dragged past the taskbar
            if (d.getScreenY()<(SCREEN_BOUNDS.getMaxY()-20))
                stage.setY(d.getScreenY() - offset_XY[1]);
            stage.setX(d.getScreenX() - offset_XY[0]);
        });

        root.setOnMouseReleased((MouseEvent r)-> {
            //Ensures the stage is not dragged past top of screen
            if (stage.getY()<0.0) stage.setY(0.0);
        });
    }

    //Sets the default stage prefered width and height.
    protected static void stageDimension(Double width, Double height) {
        pref_WH= new double[]{width, height};
    }

    protected static void fullScreen(Stage stage) {
        stage.setX(SCREEN_BOUNDS.getMinX());
        stage.setY(SCREEN_BOUNDS.getMinY());
        stage.setWidth(SCREEN_BOUNDS.getWidth());
        stage.setHeight(SCREEN_BOUNDS.getHeight());
    }

    protected static void restoreScreen(Stage stage) {
        stage.setX((SCREEN_BOUNDS.getMaxX() - pref_WH[0])/2);
        stage.setY((SCREEN_BOUNDS.getMaxY() - pref_WH[1])/2);
        stage.setWidth(pref_WH[0]);
        stage.setHeight(pref_WH[1]);
    }

    protected static String addStyleSheet(String css) {
        new WindowStyle(css);
        return styleSheet;
    }
} 
```

# java - 如何在 Java 中测试 Web 服务器？

> ID：13206194
> 
> 赞同：0
> 
> 时间：2012-11-03T05:16:16.157
> 
> 标签：java, unit-testing, testing, tdd, webserver

我基本上是通过构建客户端和服务器（不一定是 HTTP 服务器）来练习 Java 套接字编程。简而言之，客户端通过套接字向服务器发送请求，服务器将请求添加到任务队列。线程池最初有一定数量的线程，每个空闲的线程都分配给任务队列中的一个可运行任务。我的 Web 服务器也有一个简单的存储，用于存储和从磁盘中的文件中检索数据。在这个项目中，我必须处理几个并发问题。

基本上，我必须构建客户端、服务器、线程池、处理程序、存储。但是，我想以一种良好的系统方式进行彻底的测试（单元测试、集成测试等）。我在测试方面没有太多经验，所以我正在寻找指针、方法、框架或教程。（我使用 Ant 进行自动化构建，最初考虑使用 JUnit 和 EasyMock 进行测试）

![建筑学](../Images/886c61a1782ed7326b9c1e7e03bc1444.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:09:13.760

在测试之前，我会先编写一些粗略且现成的原型代码。只是为了看看它的工作情况并感受一下我将使用的 API。

然后介绍一些使用 JUnit 的单元测试（还有其他框架，但 JUnit 无处不在，您会发现很多教程可以帮助您入门）。

如果您的对象需要与其他一些对象交互以完成其任务，则使用模拟（EasyMock 或其他）来提供交互 - 这可能会导致一些重构。

一旦你满意了，你就可以开始测试你的对象是如何交互的，你可以编写新的（集成）测试来用真实的东西代替 Mocks。更大的交互导致更大的复杂性。

有些事情要记住

*   琐碎的方法不值得测试（例如简单的访问器）
*   100% 覆盖是浪费时间
*   任何测试都比没有好
*   单元测试比集成测试更容易实现
*   并非所有测试都有效
*   测试多线程应用程序很困难

有一本书介绍了 Google 如何进行测试。基本上，他们在看起来可行之前不会编写测试。他们有工程师就如何构建测试代码提供建议。重点是：

*   可运行的代码是目标
*   测试增加了这个目标，但不要取代它
*   编写可测试的代码是一项学习技能

# android - 如何发送 adb 事件以长按一个键

> ID：13206197
> 
> 赞同：0
> 
> 时间：2012-11-03T05:16:29.283
> 
> 标签：android, events, command, adb, keyevent

我正在尝试进行一些自动测试，我需要使用 PC 上的 adb 命令触发长按一个键。例如，长按主页按钮会调出最近使用的应用程序。我发现关键事件 #3 是用于 home 键的。但我不知道如何触发长按主页按钮。这里的一些帖子建议使用 sleep 命令。但它对我不起作用，它总是触发单击事件然后进入睡眠状态。它没有做长按动作。请帮忙。

我试过的是： adb shell input keyevent 3 adb shell sleep 2

我只是以 home 键为例。它可以是 Android 设备上的任何键，例如 dpad 键。返回键等

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-03T05:19:45.530

这是不可能的，因为我有研发和这个参考链接。

[在 category.HOME 活动中覆盖 Home 键长按](https://stackoverflow.com/questions/2934355/overriding-the-home-key-long-press-in-a-category-home-activity)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-03T18:06:43.457

`sleep`对您不起作用，因为该`input keyevent`命令在完成之前会同时发送 key down 和 key up 事件。要正确模拟“长”按，`sleep`您需要发送单独的向下和向上事件并`sleep`在两者之间使用。`sendevent`SO上有很多关于使用的回答问题。

# java - 如何从 Wicket 中的 Java 文件动态添加 HTML 代码？

> ID：13206199
> 
> 赞同：2
> 
> 时间：2012-11-03T05:17:04.773
> 
> 标签：java, html, dynamic, wicket, add

我正在研究如何从 Wicket 中的 Java 文件动态添加 HTML 代码。我的网页上有多个
链接，但不想为每个链接设计单独的页面。我只想
从 Java 文件中动态添加退出的 HTML 代码。

为此，我使用了以下代码。

```
public class DynamicHtml extends Panel{

public DynamicHtml(String id) 
{
    super(id);
    // TODO Auto-generated constructor stub

    String dynamicHtml = createDynamicHtml("divIdName");
    Label divLabel = new Label("divLabel",dynamicHtml );
    divLabel.setEscapeModelStrings(false);
    add(divLabel);
}

private String createDynamicHtml(String div_id) 
{
    // TODO Auto-generated method stub

    StringBuilder divSB = new StringBuilder(512);
    divSB.append("<div id=\"");
    divSB.append(div_id);
    divSB.append("\"></div>");

    return divSB.toString(); 
}

} 
```

html代码：

```
<wicket:panel>
    <span wicket:id="divLabel"></span>
</wicket:panel> 
```

但我无法理解如何在上面的代码中传递退出的 html 代码，即“divIdName”。
请给我一些建议或任何指导或参考。
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:38:53.320

不确定，哪个部分没有按您的意愿工作，但通常您应该使用

```
<wicket:panel>
    <wicket:container wicket:id="divLabel" />
</wicket:panel> 
```

因此，您的代码将生成有效的 XHTML。

除此之外，如果您想动态替换标记，您应该覆盖`getMarkup()`Panel 的方法。请参阅[JavaDoc](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/Component.html#getMarkup%28%29)

# java - Akka 2.1.0-RC 集群路由器因找不到路由问题而终止

> ID：13206202
> 
> 赞同：1
> 
> 时间：2012-11-03T05:17:08.603
> 
> 标签：java, scala, cluster-computing, akka, akka-cluster

我正在编写一个 java/scala akka 概念证明，目前我在集群环境中摸索演员的概念。

## 规格

我有一个特定的情况，系统将相同的消息发送到多个节点。我的工作是不丢弃任何这些消息，只将 1 条消息传递给后端系统。就像具有负载平衡/故障转移功能的独特过滤器一样。

## 主意

我正在考虑在 2 个节点上使用 2 个“前端”actor，系统会将消息发送到前端路由器（比如说循环），该路由器发送到发送到后端的前端actor。

另一个后备解决方案是使用 only-leader-send-to-backend 系统，他们都收到相同的消息，只有领导者将其转发。

## 问题

我面临的问题（见代码）是我希望路由器使用现有的前端参与者作为集群上的路由。这在示例代码中失败了，因为路由器仅在本地通过**routees-path**（配置设置）查找路由，没有找到任何并死掉。

我也没有成功配置路由器在集群节点上部署路由。它总是会在本地部署它们。

我在这里有示例代码[http://ge.tt/2UHUqoQ/v/0?c](http://ge.tt/2UHUqoQ/v/0?c)。有 2 个入口点 * TransformationSample.App2 - 运行两个实例，每个实例带有命令行参数 2551 和 2552（种子节点） * TransformationSample.App1 - 运行一个不带命令行参数的实例

App1 是尝试创建路由器并与之通信的应用程序，但路由器终止，因为它无法在本地找到前端路由器。我将问题固定到 akka.cluster.routing.ClusterRouteeProvider 类 createRoutees 方法第 178 行[https://github.com/akka/akka/blob/releasing-2.1.0-RC1/akka-cluster/src/main/scala /akka/cluster/routing/ClusterRouterConfig.scala](https://github.com/akka/akka/blob/releasing-2.1.0-RC1/akka-cluster/src/main/scala/akka/cluster/routing/ClusterRouterConfig.scala)。

## 结束时

我可能在这里做错了什么，请原谅我的 scala（这是我编写它的第一个项目）。

我希望这个路由器工作的原因是因为概念验证的下一步是使用类似的设置对后端系统进行负载平衡，其中前端参与者将与（单独的）后端集群路由器进行通信，该路由器发送与后端演员循环工作。

这是过度设计吗？我们必须对前端进行故障转移，在后端进行负载平衡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:59:51.400

首先，你使用什么样的演员？Scala 和 Akka 演员彼此不同。如果您使用的是 akka actor，请尝试使用 Remote Actor System，这非常好，尤其是在您安装了 DB 的情况下。

# user-interface - 进度条动画中的 UI 问题

> ID：13206209
> 
> 赞同：0
> 
> 时间：2012-11-03T05:18:48.887
> 
> 标签：user-interface, animation, qml

我正在 QML 中开发一个进度条。

但是该工作不适用于所有参数值。它在 UI 中的逻辑问题更多

要求大家审核。

下面是代码片段

```
Rectangle
{
    width: 500; height: 480

    .....

    color: "lightyellow"

    Rectangle {
        id: container
        ....

        Row {
            id:repeaterid

            Repeater {
                id: repeater
                model: 100
                Item { id: smallrect2; opacity:0.5; width:_width; height:_height

                    Rectangle { id: smallrect; color: _newColor }

                 ......  

                }
            }
        }

        Timer {
            id: progressTimer
            interval: 100

            onTriggered: {

                if ((slider.x + slider.width) < repeaterid.width)
                {
                    slider.x += _width
                    var item = repeater.itemAt(indexCurrent)
                    item._newColor = "red"
                    indexCurrent++
                }
                else
                {
                    progressTimer.repeat = false
                }
            }
        }

        Rectangle {
            id: slider

            // Adjust the dimensions of slider
            x: repeaterid.x 
            y: repeaterid.y
            width: _width 
            height: _height 

        }
    }

} 
```

当 _width 的值为 30 并且中继器中的模型值为 18 时，实现了所需的行为，但随着值的减小，进度条中的滑块不会完成其路径（宽度 = 5，模型 =100）或者如果增加它移出路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:04:34.980

已解决：根据容器大小和矩形大小调整模型值

# asp.net - 获取数组列表中的gridview列值

> ID：13206216
> 
> 赞同：0
> 
> 时间：2012-11-03T05:19:59.303
> 
> 标签：asp.net, vb.net, gridview, checkbox

我有 gridview，其中有复选框控件，就像这张图片。

![在此处输入图像描述](../Images/0a017425b3024239503c0ab2a4143da8.png)

问题是我想使用检查状态的值。如果状态被检查，那么我想将值分配给这样的字符串`867,864`。我在这里尝试了一些代码，但它不能正常工作

```
For Each gvrow As GridViewRow In GridView5.Rows
            Dim chkbox As CheckBox = CType(gvrow.FindControl("chkStatusGM"), CheckBox)
            If chkbox.Checked Then
                Dim bpv As String = GridView5.Rows(0).Cells(3).Text
                Response.Write(bpv)
End If
        Next 
```

但输出`867867`不是`867,864`我想要的。请任何人帮助获得所需的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:26:29.357

```
Dim bpv As String = ""

For Each gvrow As GridViewRow In GridView5.Rows
    Dim chkbox As CheckBox = (CheckBox)gvrow.FindControl("chkStatusGM"); 
    If chkbox!= null && chkbox.Checked Then
        If bpv <> "" Then
            bpv += ","
        End If
        bpv += gvrow.Cells(3).Text
    End If
 Next
 Response.Write(bpv) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:43:32.117

很抱歉用 C# 给你答案，因为我对 VB 不熟悉，你可以使用在线转换器将代码转换为 VB

我发现的错误是您应该使用索引和增量，以便检测下一个选中的复选框，如下所示：

```
int j = 0;
foreach (GridViewRow gvRow in GridView1.Rows)
{
    CheckBox chkSel = (CheckBox)gvRow.FindControl("SelectCheck");
    if (chkSel.Checked)
    {
        string Delete = Convert.ToString(GridView1.Rows[j].Cells[3].Text);
        //Cells[3] is the column to get one by one rows ceslls[3] columns
        Bal_add.Delete(Delete);
    }
    j++;
} 
```

例如在这种情况下`j`是索引并增加它。

希望这会有所帮助：D

# java - Hadoop 类路径伪分布式模式

> ID：13206217
> 
> 赞同：0
> 
> 时间：2012-11-03T05:20:25.827
> 
> 标签：java, hadoop, classpath

我正在以伪分布式模式在本地运行一些简单的 Hadoop 测试。但是减速器给了我一个 ClassNotFoundException。

我有`HADOOP_CLASSPATH`这样的集合：

```
export HADOOP_CLASSPATH=/home/davidparks21/hadoop/FruggMapreduceJobs.jar:/home/davidparks21/hadoop/hadoop-1.0.3/lib/* 
```

我有所有这些课程`$HADOOP_INSTALL/lib/`

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:49:49.017

我只需要重新启动 mapreduce (stop-mapred.sh/start-mapred.sh) 以便它适当地加载和分发我的新 jar。

# matrix - 沿一个坐标轴的 3D 倾斜变换矩阵

> ID：13206220
> 
> 赞同：6
> 
> 时间：2012-11-03T05:20:49.163
> 
> 标签：matrix, angle, skew

给定倾斜角，有没有办法计算沿一个坐标轴的倾斜变换矩阵，如下

![在此处输入图像描述](../Images/3f49987c1d147ea16186a49558f0decf.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T16:50:15.070

这应该在很大程度上适用于使用变换矩阵倾斜对象，特别是使用 glMultMatrix(matrix)

![在此处输入图像描述](../Images/547be3e283b573a7b6db50e345ea1c5a.png)

```
matrix1[] = {
1,  0,  0,  0,
tan(a), 1,  0,  0,
0,  0,  1,  0,
0,  0,  0,  1
};

matrix2[] = {
    1,  0,  0,  0,
    0,  1,  0,  0,
    tan(a), 0,  1,  0,
    0,  0,  0,  1
};

matrix3[] = {
    1,  tan(a), 0,  0,
    0,  1,  0,  0,
    0,  0,  1,  0,
    0,  0,  0,  1
};

matrix4[] = {
    1,  0,  0,  0,
    0,  1,  0,  0,
    0,  tan(a), 1,  0,
    0,  0,  0,  1
};

matrix5[] = {
    1,  0,  tan(a), 0,
    0,  1,  0,  0,
    0,  0,  1,  0,
    0,  0,  0,  1
};

matrix6[] = {
    1,  0,  0,  0,
    0,  1,  tan(a), 0,
    0,  0,  1,  0,
    0,  0,  0,  1
}; 
```

# jquery - 如何编写仅验证gmail的添加方法？

> ID：13206222
> 
> 赞同：0
> 
> 时间：2012-11-03T05:20:59.287
> 
> 标签：jquery, jquery-validate

我在客户端的应用程序中使用 jquery 验证，添加自定义方法以在 gmail 上验证的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:23:16.073

```
if (/@gmail\.com$/.test(string)) 
{ // This is a gmail id. } 
```

# r - R foreach ：线程数减少到1

> ID：13206223
> 
> 赞同：3
> 
> 时间：2012-11-03T05:21:08.150
> 
> 标签：r, foreach, domc

考虑一个示例代码

```
library("foreach")

 library("doMC")

 library("multicore")

 multicore:::detectCores()

 registerDoMC(cores=6)

 alpha <- foreach(i = 1:10) %dopar% {
  ...
 } 
```

当我使用 top 时，启动时线程数为 6。每个线程的工作量很大。但是，线程数迅速下降到 5、4、3、2，然后是 1。我猜从那时起执行是串行的。我不明白为什么？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T12:41:51.143

我认为执行串行任务时线程数不会减少，但相同的线程会等待。在您的情况下，似乎有些线程已经完成工作。

# html - 如何水平对齐两个div面板

> ID：13206224
> 
> 赞同：4
> 
> 时间：2012-11-03T05:21:33.207
> 
> 标签：html, css

我创建了两个 div 并使用 css 内联属性将它们左右对齐，问题是我无法以百分比（不是像素值）设置宽度和高度，我已经看到了这个问题的一些替代方案，但我还没找到解决办法

这就是我要的 ：![在此处输入图像描述](../Images/dead5d7660a158dc1eb9f658e922b386.png)

这是一个小提琴： http: [//jsfiddle.net/6JgNu/](http://jsfiddle.net/6JgNu/)（我使用像素值来设置高度而不是百分比）。请用百分比值的高度更新它。

这是代码：

```
<style type="text/css">
.left-panel
{        
    background-color:#ccc;
    width:10%;
    height:100px;            
}
.right-panel
{        
    background-color:Gray;
    width:90%;
    height:100px;
} 
```

第一面板 第二面板

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T05:26:04.823

采用`float:left`

```
.left-panel
{        
    background-color:#ccc;
    width:10%;
    height:100px;
    float:left;            
}
.right-panel
{        
    background-color:Gray;
    width:80%;
    height:100px;
    float:left;
}​ 
```

演示：http: [//jsfiddle.net/6JgNu/5/](http://jsfiddle.net/6JgNu/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T05:24:06.057

只需添加`float:left;`到`.left-panel`. 希望这有帮助，祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T10:13:37.313

用这个：

```
<style>
.left-panel
{        
    background-color:#ccc;
    width:10%;
    height:100px;
    float:left;        
}
.right-panel
{        
    background-color:Gray;
    width:90%;
    height:100px;
    float:left;
}

</style>

<div class="left-panel"></div>
<div class="right-panel"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T05:26:49.870

将 float:left 添加到 div 中，它应该可以工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T05:30:20.167

使用这个 CSS

```
.left-panel
    {        
        background-color:#ccc;
        width:10%;
        height:100px;
        float:left;        
    }
    .right-panel
    {        
        background-color:Gray;
        width:90%;
        height:100px;
        float:left;
} 
```

# java - 在抽象类上实现监听器是坏主意还是好主意？

> ID：13206246
> 
> 赞同：0
> 
> 时间：2012-11-03T05:23:28.757
> 
> 标签：java, listener, abstract-class

我正在为当前在 java 中的游戏编写代码（这里是新手程序员），**但我不确定危险或好处，或者我是否应该拥有**初始化显示模式并进入游戏循环的抽象类，它 **实现了一个关键的监听器用于控制**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T05:38:41.343

`Abstract Class`介于`Interface`和和之间，`BaseClass`即它可能有一些已实现的方法和一些未实现的方法。

子类的所有具有共同实现的方法都可以在抽象类本身中实现。

如果您认为您`Listener`的实现在抽象类的大多数实现实现类中都是通用的，那么我认为在抽象类中定义监听器是完全可以的。如果实现不同，但大多数实现类都需要相同的方法，则将签名定义为抽象类中的抽象方法。如果没有什么是共同的，那么我认为您最好不要在抽象类中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T16:08:21.887

有两个原因（我能想到）你希望你的听众更喜欢接口而不是抽象类。

1.  如果您有多个都标记为抽象的侦听器，则一个类只能从一个继承，即使一个类实现多个侦听器可能是有意义的。

2.  您可能有一个已经从另一个类继承的现有类，但您还希望能够将其标记为侦听器。

如果您决定使用接口但仍希望共享一些通用实现，则实现此目的的模式是创建侦听器接口和抽象实现，例如

```
interface ClickListener {
  void onLeftClickPressed();
  void onLeftClickReleased();
}

// "DefaultClickListener" and "AbstractClickListener" are also common conventions
abstract class DoubleClickListener implements ClickListener {
  int leftClickCount;
  @Override public final void onLeftClickPressed() {
    ++leftClickCount;
    if (leftClickCount == 2) {
      onDoubleClicked();
    }
  }
  @Override public final void onLeftClickReleased() { --leftClickCount; }

  protected abstract void onDoubleClicked();
} 
```

如果您的侦听器接口有多个方法，最好提供一个适配器版本，为所有方法提供存根实现，例如

```
interface ComplexListener {
  void onEvent1();
  ...
  void onEvent100();
}

abstract class ComplexListenerAdapter implements ComplexListener {
  @Override public void onEvent1() {}
  ...
  @Override public void onEvent100() {}
}

final class MySimpleListener extends ComplexListenerAdapter {
  // The only event I care about
  @Override public void onEvent42() { ... }
} 
```

我不确定这是一个标准约定，但我已经看到`ListenerAdapter`用于这些类型的侦听器实现的名称。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-03T06:22:51.970

抽象类是一个其对象无法实例化的类，对于任何控件的关键侦听器，您需要将游戏的每个定义包含到您使用的类或抽象类中，并且包括侦听器。

对于任何对象，哪个类建模取决于是否有任何对象在游戏中扮演任何角色，例如，某些类是父类，任何项目中的 HumanBeing 类都不会创建人类对象类，你肯定会将它扩展到 Man、Worker、Woman 等，所以让 HumanBeing 成为一个抽象类

这就是数据建模部分。很抱歉，当我在之前的回答中说您不能将侦听器添加到抽象类中时，我错了，您当然可以，但是**您必须考虑要创建哪些类以及这些类的角色是什么那么您可以决定是否将 Listener 包含到 Abstract 类**中（软件工程的一部分）

# ruby-on-rails - 按列和行Rails对表格进行排序

> ID：13206248
> 
> 赞同：1
> 
> 时间：2012-11-03T05:23:52.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

在这里，我想设置一个每周计划器，稍后我将在其中插入计划。

我有按星期几排序的列。（星期一，星期二...）现在，我希望按时间对行进行排序。

但是，下面是我的代码。对于每一列，它循环的次数与我的时间段中的项目数相同。

如果您能给我一些关于如何修复它的指导，以使每个时间段仅在整个表中出现一次，将不胜感激。

代码

```
<table class="Time Table">
  <tr>
    <th><%= "Time" %></th>
    <th><%= "Monday" %></th>
    <th><%= "Tuesday" %></th>
    <th><%= "Wednesday" %></th>
    <th><%= "Thursday" %></th>
    <th><%= "Friday" %></th>
    <th><%= "Saturday" %></th>

 </tr>
  <% @time_slots.each do |time_slot| %>
    <tr>
      <td></td>
        <td><% if time_slot.dayOfWeek = "Monday" %><%= time_slot.startTime %><% end %></td>
        <td><% if time_slot.dayOfWeek = "Tuesday" %><%= time_slot.startTime %><% end %></td>
    <td><% if time_slot.dayOfWeek = "Wednesday" %><%= time_slot.startTime %><% end %></td>
    <td><% if time_slot.dayOfWeek = "Thursday" %><%= time_slot.startTime %><% end %></td>
    <td><% if time_slot.dayOfWeek = "Friday" %><%= time_slot.startTime %><% end %></td>
    <td><% if time_slot.dayOfWeek = "Saturday" %><%= time_slot.startTime %><% end %></td>
    </tr>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T05:34:45.710

好的，你刚刚把它翻转过来......你需要这样的东西：

```
<% days = %w[ Monday Tuesday Wednesday Thursday Friday Saturday] %>

<% days.each do |day| %>
   <td>
   <% @time_slots.select {|time_slot| time_slot.dayOfWeek == day }.each do |time_slot| %>
     <%= time_slot.startTime %><br/>
   <% end %>
   </td>
<% end %> 
```

希望这有帮助，祝你好运。

# database - 将 Chrome 扩展程序连接到服务器

> ID：13206250
> 
> 赞同：2
> 
> 时间：2012-11-03T05:24:04.173
> 
> 标签：database, google-chrome, google-chrome-extension

我知道 Google Chrome 扩展可以有一些 HTML 和 JavaScript。但我想将它连接到我的服务器。当用户在浏览某个 URL 时单击扩展程序上的按钮时，该 URL 将被添加到服务器上的数据库中。是否可以实现此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T05:26:39.380

对的，这是可能的。只需为单击 url 添加事件处理程序。然后，您可以将数据异步发送回您的服务器。希望您通知您的插件客户您打算跟踪他们的所有点击。

我建议为此使用像 jQuery 这样的库。

```
//bind to all links
$('a').click( function() {
   //get the url
   var url = $(this).prop('href');
   //send the url to your server
   $.ajax({
        type: "POST",
        url: "http://yourserver.com/process.php",
        data: "url=" + url
   });
}); 
```

您将需要像 php 或 asp 这样的服务器端语言来解析发布的 url 并将其存储在您的数据库中。

# forms - 按钮上的 onClick 事件和“空格键”按键事件

> ID：13206252
> 
> 赞同：2
> 
> 时间：2012-11-03T05:24:08.963
> 
> 标签：forms, vba, ms-access, onclick, ms-access-2010

我有一个在 MS Access 中制作的表单，其中包含一个按钮。我在按钮的 onClick 事件上显示一个消息框。但是，用户也可以使用 Tab 键导航到该按钮，然后按空格键，并期望发生与 onClick 事件相同的行为。

有没有办法有效地实现这一点？或者唯一的方法是从两个地方调用相同的子程序——一个处理 onClick 事件，第二个处理“空格键”按键事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:54:20.037

您的问题有很多解决方案：

1.  禁用`Button_OnKey`事件，只允许`OnClick`事件
2.  允许 OnKey 事件，但调用处理`OnClick`
3.  删除`OnClick`事件代码，因为用户可以从键盘上按下按钮，或者通过单击鼠标，在这两种情况下，`Button_Click`都会触发事件，因此将处理代码放在`Button_Click`事件中更安全

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:40:27.547

您不应该将消息框的结果附加到另一个 onClick，而是应该在现有子中获取结果并从那里开始工作。例如：

```
Answer = MsgBox("Do you want to continue ?", vbYesNo)
If Answer = vbYes Then
  Code for YES
Else
  Code for NO
EndIf 
```

更多地了解您的消息框和代码的功能会有所帮助。

# python - 通过Regex获取公共前缀子串

> ID：13206262
> 
> 赞同：0
> 
> 时间：2012-11-03T05:25:49.827
> 
> 标签：python, regex

像这样

```
text = "  \t  hello there\n  \t  how are you?\n  \t HHHH"
      hello there
      how are you?
     HHHH 
```

我可以通过正则表达式获取公共前缀子字符串吗？

我试着

```
In [36]: re.findall(r"(?m)(?:(^[ \t]+).+[\n\r]+\1)", "  \t  hello there\n  \t  how are you?\n  \t HHHH")
Out[36]: ['  \t  '] 
```

但显然，公共前缀子字符串是 ' \t '
我想用于`dedent`像 python textwrap 模块这样的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:40:29.720

这是一个在文本中查找公共前缀的表达式：

```
r'^(.+).*(\n\1.*)*$' 
```

例子：

```
import re

text = (
    "No Red Leicester\n"
    "No Tilsit\n"
    "No Red Windsor"
)

m = re.match(r'^(.+).*(\n\1.*)*$', text)
if m:
    print 'common prefix is', m.group(1)
else:
    print 'no common prefix' 
```

请注意，此表达式涉及大量回溯，因此请明智地使用它，尤其是在大输入时。

要找出最长的公共“空格”前缀，只需找到它们并应用`len`：

```
def dedent(text):
    prefix_len = min(map(len, re.findall('(?m)^\s+', text)))
    return re.sub(r'(?m)^.{%d}' % prefix_len, '', text)

text = (
    "     No Red Leicester\n"
    "    No Tilsit\n"
    "\t\t   No Red Windsor"
)

print dedent(text) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T13:25:38.110

我建议

```
match = re.search(r'(?m)\A(.*).*(?:\n?^\1.*$)*\n?\Z', text) 
```

请参阅**[此演示](http://ideone.com/cr0fG9)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T13:28:39.897

我对 Python 不是很好，所以，也许这段代码看起来不适合该语言，但从算法上讲，它应该很好：

```
>>> import StringIO
...
>>> def strip_common_prefix(text):
...     position = text.find('\n')
...     offset = position
...     match = text[: position + 1]
...     lines = [match]
...     while match and position != len(text):
...         next_line = text.find('\n', position + 1)
...         if next_line == -1: next_line = len(text)
...         line = text[position + 1 : next_line + 1]
...         position = next_line
...         lines.append(line)
...         i = 0
...         for a, b in zip(line, match):
...             if i > offset or a != b: break
...             i += 1
...         offset = i
...         match = line[: offset]
...     buf = StringIO.StringIO()
...     for line in lines:
...         if not match: buf.write(line)
...         else: buf.write(line[offset :])
...     text = buf.getvalue()
...     buf.close()
...     return text
... 
>>> strip_common_prefix("  \t  hello there\n  \t  how are you?\n  \t HHHH")
' hello there\n how are you?\nHHHH'
>>> 
```

正则表达式在此之上会有很多开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-28T06:33:32.907

```
import os
#not just  for paths...

text = "  \t  hello there\n  \t  how are you?\n  \t HHHH"
li = text.split("\n")

common = os.path.commonprefix(li)

li = [i[len(common):] for i in li]
for i in li:
    print i 
```

=>

```
 hello there
 how are you?
HHHH 
```

# java-ee-6 - WAR 封装中的应用程序客户端模块可能吗？

> ID：13206263
> 
> 赞同：1
> 
> 时间：2012-11-03T05:25:55.700
> 
> 标签：java-ee-6, war

从 Java EE 6 开始，我可以将我的 Java EE 应用程序（包括 EJB）打包到 WAR 而不是 EAR 中。

我还可以在这样的 WAR 包中包含应用程序客户端模块吗？如果可以，我将如何使用 maven 来实现？

# spring - Spring 3 setter-injection：当你需要在另一个类的构造函数中使用注入的类时，它是如何完成的？

> ID：13206266
> 
> 赞同：1
> 
> 时间：2012-11-03T05:26:10.473
> 
> 标签：spring, dependency-injection

如果我有 ：

```
@Component
class Foo {

    @Autowired      
    private Bar b; //where b is @Service

     public Foo(){          
        //if i need to use b here, what do i need to do?
        b.something(); // <-- b is null so it'll crash here
    }

    public void setB(Bar b){
        this.b = b;
    }
} 
```

通过阅读 Spring 文档，我了解到基于 setter 的注入方法比基于构造函数的注入更推荐，但在上面的示例中，我需要在当前类的构造函数中使用注入的 spring 类，以便它必须是基于构造函数的注入正确吗？

如果是这样，它会是什么样子？

```
@Component
class Foo {

    private Bar b; //where b is @Service

    @Autowired
     public Foo(Bar b){
        b.something(); // b won't be null now !
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:43:02.983

您需要在 application-context.xml（或等效的 spring 配置文件）中定义 bean，如下所示：

```
<bean id="b" class="Bar" />
<bean id="f" class="Foo">
    <constructor-arg ref="b" />
</bean> 
```

只需从 Foo 类中删除这些`@Component`和`@Autowired`注释。`@Component`将在组件扫描期间尝试查找默认构造函数并失败 bean 创建过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T08:20:33.033

该代码有效，是的，@Autowired 可用于连接构造函数参数。

您也可以采用 setter 注入然后声明 init-method 或使用 @PostConstruct 来初始化 bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T12:09:07.393

您可以创建一个使用@PostConstruct 注释的方法，如前所述： [http](http://www.mkyong.com/spring/spring-postconstruct-and-predestroy-example/) ://www.mkyong.com/spring/spring-postconstruct-and-predestroy-example/ 这需要额外的依赖项和一些配置。

做你想做的事情的通常方法是让你的 bean 实现 Spring 接口`InitializingBean`。在注入所有依赖项之后，您可以实现的`afterPropertiesSet()`方法将由 Spring 触发。

您最好使用注解，一旦配置它就更简单、更易于阅读并且与 Java EE 兼容。

# android - 解析嵌套的 XML 文件

> ID：13206267
> 
> 赞同：1
> 
> 时间：2012-11-03T05:26:12.640
> 
> 标签：android, xml, parsing, nested

我有一个 XML 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
<MPD>
    <BaseURL>http://pilatus.d1.comp.nus.edu.sg/~a0095695/video_repo/</BaseURL>
    <SegmURL>
        <Low bandwidth="0">
            <Link>low/1.mp4</Link>
            <Link>low/2.mp4</Link>
            <Link>low/3.mp4</Link>
            <Link>low/4.mp4</Link>
            <Link>low/5.mp4</Link>
        </Low>
        <Medium bandwidth="1">
            <Link>med/1.mp4</Link>
            <Link>med/2.mp4</Link>
            <Link>med/3.mp4</Link>
            <Link>med/4.mp4</Link>
            <Link>med/5.mp4</Link>
        </Medium>
        <High bandwidth="2">
            <Link>hig/1.mp4</Link>
            <Link>hig/2.mp4</Link>
            <Link>hig/3.mp4</Link>
            <Link>hig/4.mp4</Link>
            <Link>hig/5.mp4</Link>  
        </High>
    </SegmURL>
</MPD> 
```

根据整数质量的值，我需要创建相应链接的链表

所以如果质量=0，我的链接列表将包含低/1.mp4 到低/2.mp4

经历了很多教程，但他们只解释了非嵌套的 xml 文件。

如何做到这一点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:07:34.490

我在我的项目中使用[XMLPull Parser](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)（android xml 解析器之一，android 在他们的网站上推荐）尝试了你的 xml，它遍历所有标签并打印所有标签的内容。

试试这个，网站上也给出了示例代码，我也用它来解决你的问题，得到你想要的..，。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:53:55.193

请尝试dom4j，并使用xpath直接定位对应的子节点。并编写循环来处理所有值。

# android - 为什么我会收到“由于 APK 文件无效而导致安装失败！” 当我运行我的应用程序时？

> ID：13206275
> 
> 赞同：0
> 
> 时间：2012-11-03T05:26:55.857
> 
> 标签：android

有谁知道如何处理这个错误？每次我尝试在我的三星 Galaxy S3 上运行我的应用程序时都会得到这个。

> 由于 APK 文件无效，安装失败！

我正在使用库存的 JB ROM。我已经尝试了所有方法，但无法使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:46:26.687

很简单，您的 apk 文件无效。尝试下载一个新文件。有时会在文件损坏时发生。这可能是由于许多问题，例如下载apk时网络延迟或由于网络问题而无法接收数据包。尝试再次下载一个新文件，这将起作用。如果这再次不起作用，则服务器上可用的 apk 文件不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:51:29.170

你能在你的模拟器上运行 apk 吗？似乎 apk 文件本身就是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T08:28:07.017

如果它的（apk）由你准备。那么您可能忘记了使用自己的密钥库对 apk 进行签名。请参阅 Android 开发人员指南以生成密钥库和签署应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T00:54:24.400

好的，我通过将我的 s3 从 4.1.1 更新到 4.1.2 解决了这个问题，马上就可以正常工作了。

# android - Android 中的相机预览

> ID：13206278
> 
> 赞同：2
> 
> 时间：2012-11-03T05:27:46.467
> 
> 标签：android, camera, surfaceview

我开发了一个基于相机的应用程序。它运行良好，但带有 Android 4.0 的 Camera 和 Sony Xperia Sola OS 存在一个问题。

问题如下：

当我从我的应用程序相机预览启动相机时，索尼 Xperia Sola 设备和任何其他设备 HTC 上显示半屏，三星它在全屏下运行良好。

对于相机预览，我使用`SurfaceView`了类。在`SurfaceChanged()`我使用以下代码的方法中

```
Parameters parameters = mCamera.getParameters();
Display display = ((WindowManager)getSystemService(WINDOW_SERVICE)).getDefaultDisplay();

    if(display.getRotation() == Surface.ROTATION_0)
    {

        System.out.println("Preview Height : " + h);
        System.out.println("Preview Width  : " + w);

        parameters.setPreviewSize(h, w);                           
        mCamera.setDisplayOrientation(90);
    } 
```

请帮我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:29:23.493

我很好奇运行应用程序时打印输出的高度和宽度提供了什么。我实现了一个简单的 SurfaceView 类并使用了您的代码。通过 logcat 报告的宽度和高度是

> I/System.out（4706）：预览宽度：480
> 
> I/System.out（4706）：预览高度：744

这与 SurfaceView 跨越的区域非常一致。

我用于此的面板代码：

```
public class Panel extends SurfaceView implements SurfaceHolder.Callback {
    private Camera  mCamera;
    private Context mContext;

    public Panel(Context context) {
        super(context);
        mContext = context;
        getHolder().addCallback(this);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        try {
            mCamera = Camera.open();
            mCamera.setPreviewDisplay(getHolder());
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }

    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)    {
        Parameters parameters = mCamera.getParameters();

        Display display = ((WindowManager) mContext.getSystemService(android.content.Context.WINDOW_SERVICE)).getDefaultDisplay();

        if (display.getRotation() == Surface.ROTATION_0) {

            System.out.println("Preview Width : " + width);
            System.out.println("Preview Height  : " + height);

            parameters.setPreviewSize(width, height);
            mCamera.setDisplayOrientation(90);
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        mCamera.stopPreview();
        mCamera.release();
        mCamera = null;
    }

} 
```

请提供更多详细信息，如有必要，我将尝试进一步调查。

我在 4.0.4 的 Xperia Sola 上运行。如果您可以向我提供您设备的内部版本号，这也会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T11:41:17.423

我遇到了同样的问题，在我使用 Sony Experia LT22I 的情况下，当我旋转屏幕时

> mCamera.setDisplayOrientation(90);

只显示大约 10-20% 的视图。最后我找到了这款手机的解决方案（补丁）。仅更改视图的边距顶部（我不知道为什么）效果很好，如下所示：

```
String model = (Build.MANUFACTURER+Build.MODEL).toUpperCase(Locale.getDefault());
if (model.equals(Constants.MODEL_EXCEPTION)) {
    final ViewGroup.MarginLayoutParams lpt =(MarginLayoutParams)       
    surfaceView.getLayoutParams();
    lpt.setMargins(0,-150,0,0);
    surfaceView.setLayoutParams(lpt);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T09:59:42.690

我已确认该问题与相机软件有关。

不幸的是，没有可用的解决方法。

唯一的解决方案将是未来的固件更新，其中包括对相机问题的修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T15:21:44.010

我们在这里遇到了同样的问题，我用你上面的代码来看看它是如何工作的，看起来旋转中心被移位了，所以当旋转 90 度到纵向时，它只显示了大约 10-20% 的视图。

它似乎是：

```
mCamera.setDisplayOrientation(90); 
```

这导致了问题。

这可以在以下位置重现：

*   索尼 Xperia ST25i，Android 版本 4.0.4（内部版本：6.1.1.B.1.54）
*   索尼 Xperia Solo MT27i，搭载 Android 4.0.4（内部版本：6.1.1.B.1.54）

如果它们包含任何信息，则为相机参数：

```
01-22 16:04:01.015: D/CameraTest(1336): Haz camera: true
01-22 16:04:01.095: D/TextLayoutCache(1336): Using debug level: 0 - Debug Enabled: 0
01-22 16:04:01.425: D/libEGL(1336): loaded /system/lib/egl/libGLES_android.so
01-22 16:04:01.505: D/libEGL(1336): loaded /system/lib/egl/libEGL_mali.so
01-22 16:04:01.535: D/libEGL(1336): loaded /system/lib/egl/libGLESv1_CM_mali.so
01-22 16:04:01.545: D/libEGL(1336): loaded /system/lib/egl/libGLESv2_mali.so
01-22 16:04:01.725: D/OpenGLRenderer(1336): Enabling debug mode 0
01-22 16:04:02.987: D/CameraTest(1336): preferred-preview-size-for-video=864x480
01-22 16:04:02.987: D/CameraTest(1336): zoom=0
01-22 16:04:02.987: D/CameraTest(1336): recording-hint=false
01-22 16:04:02.987: D/CameraTest(1336): max-num-detected-faces-hw=5
01-22 16:04:02.987: D/CameraTest(1336): zoom-supported=true
01-22 16:04:02.987: D/CameraTest(1336): whitebalance=auto
01-22 16:04:02.987: D/CameraTest(1336): scene-mode=auto
01-22 16:04:02.987: D/CameraTest(1336): jpeg-quality=85
01-22 16:04:02.987: D/CameraTest(1336): preview-format-values=yuv420sp,yuv420p
01-22 16:04:02.987: D/CameraTest(1336): jpeg-thumbnail-quality=100
01-22 16:04:02.987: D/CameraTest(1336): preview-format=yuv420sp
01-22 16:04:02.987: D/CameraTest(1336): video-size-values=1280x720,864x480,720x480,640x480,352x288,320x240,176x144
01-22 16:04:02.987: D/CameraTest(1336): preview-size=640x480
01-22 16:04:02.987: D/CameraTest(1336): focal-length=3.5
01-22 16:04:02.987: D/CameraTest(1336): flash-mode-values=off,auto,on,red-eye,torch
01-22 16:04:02.987: D/CameraTest(1336): preview-frame-rate-values=15,30
01-22 16:04:02.987: D/CameraTest(1336): max-num-metering-areas=0
01-22 16:04:02.987: D/CameraTest(1336): preview-frame-rate=30
01-22 16:04:02.987: D/CameraTest(1336): focus-mode-values=auto,infinity,macro,fixed,continuous-picture,continuous-video
01-22 16:04:02.987: D/CameraTest(1336): jpeg-thumbnail-width=160
01-22 16:04:02.987: D/CameraTest(1336): video-size=1280x720
01-22 16:04:02.987: D/CameraTest(1336): scene-mode-values=auto,portrait,landscape,night,night-portrait,beach,snow,sports,party,barcode
01-22 16:04:02.987: D/CameraTest(1336): preview-fps-range-values=(1000,15000),(1000,30000)
01-22 16:04:02.987: D/CameraTest(1336): jpeg-thumbnail-size-values=160x120,0x0
01-22 16:04:02.987: D/CameraTest(1336): zoom-ratios=100,107,115,123,132,141,152,162,174,187,200,214,230,246,264,283,303,325,348,373,400,429,459,492,528,566,606,650,696,746,800
01-22 16:04:02.987: D/CameraTest(1336): preview-size-values=864x480,720x480,640x480,480x320,352x288,320x240,176x144
01-22 16:04:02.987: D/CameraTest(1336): picture-size-values=2592x1944,2560x1440,1632x1224,1920x1080,640x480,480x320,320x240
01-22 16:04:02.987: D/CameraTest(1336): preview-fps-range=1000,30000
01-22 16:04:02.987: D/CameraTest(1336): auto-whitebalance-lock=false
01-22 16:04:02.987: D/CameraTest(1336): min-exposure-compensation=-6
01-22 16:04:02.987: D/CameraTest(1336): antibanding=auto
01-22 16:04:02.987: D/CameraTest(1336): max-num-focus-areas=1
01-22 16:04:02.987: D/CameraTest(1336): vertical-view-angle=360
01-22 16:04:02.987: D/CameraTest(1336): horizontal-view-angle=360
01-22 16:04:02.987: D/CameraTest(1336): video-stabilization-supported=false
01-22 16:04:02.987: D/CameraTest(1336): jpeg-thumbnail-height=120
01-22 16:04:02.987: D/CameraTest(1336): smooth-zoom-supported=true
01-22 16:04:02.987: D/CameraTest(1336): focus-mode=macro
01-22 16:04:02.987: D/CameraTest(1336): auto-whitebalance-lock-supported=true
01-22 16:04:02.987: D/CameraTest(1336): video-frame-format=yuv420mb
01-22 16:04:02.987: D/CameraTest(1336): max-num-detected-faces-sw=5
01-22 16:04:02.987: D/CameraTest(1336): picture-format-values=jpeg
01-22 16:04:02.987: D/CameraTest(1336): max-exposure-compensation=6
01-22 16:04:02.987: D/CameraTest(1336): focus-areas=(0,0,0,0,0)
01-22 16:04:02.987: D/CameraTest(1336): video-snapshot-supported=false
01-22 16:04:02.987: D/CameraTest(1336): exposure-compensation=0
01-22 16:04:02.987: D/CameraTest(1336): exposure-compensation-step=0.333333
01-22 16:04:02.987: D/CameraTest(1336): flash-mode=off
01-22 16:04:02.987: D/CameraTest(1336): auto-exposure-lock=false
01-22 16:04:02.987: D/CameraTest(1336): effect-values=none,mono,negative,solarize,sepia,posterize
01-22 16:04:02.987: D/CameraTest(1336): picture-size=2592x1944
01-22 16:04:02.987: D/CameraTest(1336): max-zoom=30
01-22 16:04:02.987: D/CameraTest(1336): effect=none
01-22 16:04:02.987: D/CameraTest(1336): whitebalance-values=auto,incandescent,fluorescent,daylight,cloudy-daylight
01-22 16:04:02.987: D/CameraTest(1336): picture-format=jpeg
01-22 16:04:02.987: D/CameraTest(1336): focus-distances=Infinity,Infinity,Infinity
01-22 16:04:02.987: D/CameraTest(1336): auto-exposure-lock-supported=true
01-22 16:04:02.987: D/CameraTest(1336): antibanding-values=auto,50hz,60hz,off
01-22 16:04:03.037: D/CameraTest(1336): Rotation : 0
01-22 16:04:03.037: D/CameraTest(1336): Preview Width : 480
01-22 16:04:03.037: D/CameraTest(1336): Preview Height  : 744
01-22 16:04:03.057: D/CameraTest(1336): Supported FPS  : [[1000, 15000], [1000, 30000]] 
```

# asp.net - 网格 CSS 问题

> ID：13206282
> 
> 赞同：1
> 
> 时间：2012-11-03T05:28:53.777
> 
> 标签：asp.net, css

我的报告中有一个gridview，但是如果我设置最小高度和宽度但我想设置，我的网格css会扭曲，因为我想根据我的主div自动调整gridview，即网格应该根据主div或屏幕进行相应的拉伸和数据单元也因此合并，所以我应该怎么做

```
<div class="dvmain">

<table>
                    <tr>
                    <td>
  <div style="width:100%; overflow:auto;min-height:500px;">                                             
  <asp:GridView ID="GridView1" runat="server" width:auto Height:auto 
          AutoGenerateColumns="False" ShowFooter="True"  CssClass="Itemgrid"
          RowStyle-CssClass="RowStyle" 
  onrowdatabound="GridView1_RowDataBound" onrowcreated="GridView1_RowCreated">

                         <Columns>
                        <asp:BoundField DataField="itdsrno" HeaderText="Srno" />
                        <asp:BoundField DataField="itemname" HeaderText="Item" />
                        <asp:BoundField DataField="itdlength" HeaderText="Gsm" />
                        <asp:TemplateField HeaderText="Qty">
                        <FooterTemplate>
                        <asp:Label ID="lbltotalquan" runat="server" Text="Label"></asp:Label>
                         </FooterTemplate>
                         <ItemTemplate>
                            <asp:Label ID="lblquantity" runat="server" Text='<%# Eval("itdquan") 

%>'></asp:Label>
                         </ItemTemplate>

                        </asp:TemplateField>
                        <asp:BoundField DataField="unitname" HeaderText="Nos" />
                             <asp:BoundField DataField="mstexcDes" HeaderText="Grain" />
                        <asp:TemplateField HeaderText="Rate">

                            <FooterTemplate>
                            <asp:Label ID="Label2" runat="server" Text="INR"></asp:Label>
                            </FooterTemplate>
                            <ItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text='<%# 

String.Format("{0:f2}",DataBinder.Eval(Container.DataItem,"itdRate")) %>' ></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField HeaderText="Amount">
                            <FooterTemplate>
                                <asp:Label ID="lbltxttotal" runat="server"  />
                            </FooterTemplate>
                            <ItemTemplate>
                                <asp:Label ID="lblamount" runat="server" Text='<%# 

String.Format("{0:f2}",DataBinder.Eval(Container.DataItem,"itdAmou")) %>' ></asp:Label>
                            </ItemTemplate>

                        </asp:TemplateField>

                        <asp:BoundField DataField="itdrema" HeaderText="Remark" />
                    </Columns>

                </asp:GridView>
</div>

                        </td>
                    </tr>
                 </table>

            </td>
        </tr>
    </table>

</div> 
```

css

```
<style type="text/css">
     .style1
  { 
    min-width:200px;

  }
        div.title
        {

            font-family:Verdana;
            font-size:14px;

         }
        .style2
        {
        }
        .dvitems
        {
            font-family:Verdana;
            font-size:12px;
            width: 108px;
        }
        .dvpo
        {
             font-family:Verdana;
            font-size:12px;
            width: 70px;
            height: 22px;
        }
        .dvinstruction
        {
             font-family:Verdana;
            font-size:12px;
            margin-left:20px;
        }
         .dvterms
         {
             font-family:Verdana;
            font-size:12px;
            margin-left:10px;
         }

        .style4
        {           
           height: 18px;
        }

        .style6
        {
        }
        div.dvmain
        {

        border-width:1px;
        border-style:solid;
        border-color:#000000;
        margin-left:80px;
        margin-top:50px;
        width:80%
        min-height:650px;
        font-family:Verdana;

        }
        .grd
        {
            font-family:Verdana;
            min-height:400px;
             position:relative;

        }
        .grd td
        {
           text-align:center;
           border: solid 1px #000000; 

        }

       /* div.dvtitle
        {
          border-width:1px;
        border-style:solid;
        border-color:#000000;  
        }*/
         div.dvright
        {
         /* border-width:1px;
        border-style:solid;
        border-color:#000000; */ 
        }
         div.dvleft
        {
          border-width:1px;
        border-style:solid;
        border-color:#000000;  
        }
      .tbborder 
      {
          border:1px solid black;
         border-right-style:none;
         border-left-style:none;

      }
      table.tbpayterms
      {
          border-left-style:none;
          border-width: 0 0 1px 1px;
          border-spacing: 0;
          border-style: solid;

      }
      .tbpayterms td
        {
    margin: 0;
    padding: 4px;
    border-width: 1px 1px 0 0;
    border-style: solid;
        }

        .body
        {
            font-family:Verdana;
        }

        .verticalLine {
            border-right:thick solid #000000;
            height:auto;
            border-width:1px;

            }

        .dvfaith
        {
            width: 138px;
        }

        .dvthanks
        {
            width: 117px;
        }

        .style14
        {
            width: 319px;
            height: 22px;
        }
        .style15
        {
            height: 22px;
        }

        .style17
        {
            width: 159px;
        }

        .style39
        {
            width: 219px;
        }

        .style40
        {
            width: 103px;
        }
        .style41
        {
            width: 102px;
        }
        .style42
        {
            width: 249px;
        }
        .style43
        {
            width: 185px;
        }

        .style58
        {
        }
        .style61
        {
            width: 69px;
        }

        .style63
        {
            width: 340px;
        }
        .style64
        {
            width: 273px;
        }

        .style67
        {
            width: 73px;
        }
        .style68
        {
            width: 87px;
        }

        .style69
        {
            width: 528px;
        }

        .style70
        {
            width: 112px;
        }
        @media print {
input#btnPrint {
display: none;
}
input#btnback {
display: none;
}

}

    </style> 
```

# c# - 反转大矩阵时出现 SEHException

> ID：13206288
> 
> 赞同：2
> 
> 时间：2012-11-03T05:30:33.277
> 
> 标签：c#, emgucv

我正在尝试使用 emgu cv 在 c# 中计算马氏距离。我有 3 张图像，每张尺寸为 100x100。步骤是，首先计算协方差矩阵，然后计算逆协方差矩阵，最后计算与另一个新图像的马氏距离。

但是当我计算逆协方差矩阵时，程序会抛出 SEHException。当我只使用 3x3 大小的图像时，程序运行完美。起初我怀疑我的协方差矩阵太大（10000x10000）因此逆运算失败。但如果是内存问题，它应该抛出 OutOfMemoryException (CMIIW)。

SEHException 的 HResult 是 0x80004005 或 HRESULT E_FAIL，这是未指定的失败。我不知道如何解决这个问题。或者也许还有另一种安全计算马氏距离的方法？

这是我的完整代码

```
 MySqlConnection SqlCon;
MySqlCommand SqlCmd;
MySqlDataReader SqlDataReader;
string ConString = "SERVER=localhost;" +
                    "USER=root;";
string CmdString;
string DBString = "TrainingDB";

Image<Gray, Byte>[] TrainingImage100 = new Image<Gray, byte>[3];
Image<Gray, float> covarImage = new Image<Gray, float>(10000, 10000);
Image<Gray, float> invCovarImage = new Image<Gray, float>(10000, 10000);
Image<Gray, float> averageImage = new Image<Gray, float>(100, 100);

SqlCon = new MySqlConnection(ConString);
try
{
    SqlCon.Open();

    CmdString = "USE `" + DBString + "`";
    SqlCmd = new MySqlCommand(CmdString, SqlCon);
    SqlCmd.ExecuteNonQuery();

    CmdString = "SELECT `face_image` FROM `face100_table` WHERE `person_id` = 1 LIMIT 1";
    SqlCmd = new MySqlCommand(CmdString, SqlCon);
    SqlDataReader = SqlCmd.ExecuteReader();
    while (SqlDataReader.Read())
    {
        byte[] blob = (byte[])SqlDataReader["face_image"];
        MemoryStream ms = new MemoryStream(blob);
        Bitmap bmp = new Bitmap(ms);
        Image<Gray, Byte> tempFrame = new Image<Gray, byte>(bmp);
        TrainingImage100[0] = tempFrame;
        ms.Close();
    }
    SqlDataReader.Close();

    CmdString = "SELECT `face_image` FROM `face100_table` WHERE `person_id` = 2 LIMIT 1";
    SqlCmd = new MySqlCommand(CmdString, SqlCon);
    SqlDataReader = SqlCmd.ExecuteReader();
    while (SqlDataReader.Read())
    {
        byte[] blob = (byte[])SqlDataReader["face_image"];
        MemoryStream ms = new MemoryStream(blob);
        Bitmap bmp = new Bitmap(ms);
        Image<Gray, Byte> tempFrame = new Image<Gray, byte>(bmp);
        TrainingImage100[1] = tempFrame;
        ms.Close();
    }
    SqlDataReader.Close();

    CmdString = "SELECT `face_image` FROM `face100_table` WHERE `person_id` = 3 LIMIT 1";
    SqlCmd = new MySqlCommand(CmdString, SqlCon);
    SqlDataReader = SqlCmd.ExecuteReader();
    while (SqlDataReader.Read())
    {
        byte[] blob = (byte[])SqlDataReader["face_image"];
        MemoryStream ms = new MemoryStream(blob);
        Bitmap bmp = new Bitmap(ms);
        Image<Gray, Byte> tempFrame = new Image<Gray, byte>(bmp);
        TrainingImage100[2] = tempFrame;
        ms.Close();
    }
    SqlDataReader.Close();
}
catch (Exception excpt)
{
    MessageBox.Show("load - " + excpt.Message);
}
SqlCon.Close();

IntPtr[] inObjs = Array.ConvertAll<Image<Gray, byte>, IntPtr>(TrainingImage100, delegate(Image<Gray, byte> img) { return img.Ptr; });

CvInvoke.cvCalcCovarMatrix(inObjs, 3, covarImage, averageImage, COVAR_METHOD.CV_COVAR_NORMAL);
Console.WriteLine(covarImage.Size);
Console.WriteLine(averageImage.Size);

CvInvoke.cvInvert(covarImage, invCovarImage, SOLVE_METHOD.CV_SVD_SYM);
Console.WriteLine(invCovarImage.Size); 
```

错误指向方法`CvInvoke.cvInvert()`。对于其他信息，我正在使用 Visual Studio 2010 和 emgu cv 2.3.0 版。

# ruby - 如何在 Heroku 上使用 Ruby Rack 为静态站点设置 URL

> ID：13206289
> 
> 赞同：12
> 
> 时间：2012-11-03T05:30:35.000
> 
> 标签：ruby, static, rack

我的网站在[这里](http://designintellection.com/)。

它曾经是一个 Django 驱动的博客。但是我不再更新它，所以我只想让它成为一个静态 HTML 站点。我使用 Ruby Rack 将其移至 Heroku。

但是，每个 URL 都会解析为主页。这是因为我的 config.ru 文件：

```
use Rack::Static, 
  :urls => ["/media/images", "/media/js", "/media/css"],
  :root => "public"

run lambda { |env|
  [
    200, 
    {
      'Content-Type'  => 'text/html', 
      'Cache-Control' => 'public, max-age=86400' 
    },
    File.open('public/index.html', File::RDONLY)
  ]
} 
```

**问题：**有没有办法映射多个 URL？例如`foo.com/about`映射到`public/about/index.html`，`foo.com/posts/2012/oct/21/blog-post`映射到`public/posts/2012/oct/21/blog-post/index.html`

在这一点上，我什至可以手动打字。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T08:34:39.960

目前我发现最好的答案是：

```
use Rack::Static, 
  :urls => ["/media/images", "/media/js", "/media/css"],
  :root => "public"

map "/" do
  run lambda { |env|
  [
    200, 
    {
      'Content-Type'  => 'text/html', 
      'Cache-Control' => 'public, max-age=86400' 
    },
    File.open('public/index.html', File::RDONLY)
  ]
}
end

map "/portfolio" do
  run lambda { |env|
  [
    200, 
    {
      'Content-Type'  => 'text/html', 
      'Cache-Control' => 'public, max-age=86400' 
    },
    File.open('public/portfolio/index.html', File::RDONLY)
  ]
}
end 
```

并将每个 URL 映射到其各自的文件。乏味，但有效。另请参阅[有关 URL 变量的此问题](https://stackoverflow.com/questions/13225343/rack-how-do-you-store-the-url-as-a-variable)的答案。但无法让它为我工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-03T17:00:28.573

为什么需要`run`声明？也许这对你有用：

```
use Rack::Static, 
  :urls => ["/media/images", "/media/js", "/media/css"],
  :root => "public",
  :index => "index.html",
  :header_rules => [
    [:all, {'Cache-Control' => 'public, max-age=86400'}]
  ]

run lambda{ |env| [ 404, { 'Content-Type'  => 'text/html' }, ['404 - page not found'] ] } 
```

# python - logging.fileConfig() 在谷歌应用引擎上表现得很奇怪

> ID：13206295
> 
> 赞同：3
> 
> 时间：2012-11-03T05:31:20.940
> 
> 标签：python, google-app-engine, logging

我在 Google 应用引擎上有一个简单的 webapp2 应用。这是代码

```
# log.py.........................................................................
logging_defaults = {
    'loglevel': 'DEBUG',
}
logging_config = """\
[loggers]
keys=root

[handlers]
keys=stderr

[formatters]
keys=default

[logger_root]
level=%(loglevel)s
handlers=stderr

[handler_stderr]
class=StreamHandler
level=NOTSET
formatter=default
args=(sys.stderr, )

[formatter_default]
format=%(asctime)s %(levelname)s %(name)s:%(lineno)d %(message)s
datefmt=
"""

import logging
import logging.config
import logging.handlers
from cStringIO import StringIO
config_file = StringIO(logging_config)
logging.config.fileConfig(config_file, logging_defaults)
l = logging.getLogger(__name__)

# helloworld.py......................................................

import webapp2
from log import l

class MainPage(webapp2.RequestHandler):
  def get(self):
      l.debug('debug message')
      l.info('info message')
      l.warn('warn message')
      l.error('error message')
      l.critical('critical message')
      self.response.headers['Content-Type'] = 'text/plain'
      self.response.write("hello me!! It's me here ;)")

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

这是应用引擎仪表板中生成的日志的屏幕截图

![日志截图](../Images/c0d35d2ec784d5a63cd54e16fcbb4b49.png)

如您所见，日志显示正常，但每个日志都标有“E”，即使它不是错误，也表示错误。据我所知，每次使用时都会发生这种情况

```
logging.config.fileConfig() 
```

有解决这个问题的方法吗？

PS：我知道还有其他方法可以配置日志记录。但我只要求 fileConfig() 。

更新：我尝试使用 fileConfig() 从真实文件加载并使用 dictConfig() 但每次问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:31:32.313

我怀疑你的问题的原因是这样的：

```
[formatter_default]
format=%(asctime)s %(levelname)s %(name)s:%(lineno)d %(message)s 
```

这与 App Engine 的默认日志格式不同，后者将级别放在首位，然后是日期时间。因此，App Engine 管理控制台无法解析您的日志消息以确定每个日志条目的级别，因此默认为错误。反转`%(asctime)s`and`%(levelname)s`参数，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T04:02:43.997

我最近遇到了同样的问题，请使用`google.appengine.api.app_logging.AppLogsHandler`而不是`StreamHandler`为我解决此问题。

# c++ - 为什么删除后仍然可以从指针类调用函数？

> ID：13206297
> 
> 赞同：1
> 
> 时间：2012-11-03T05:31:23.080
> 
> 标签：c++, pointers, function-pointers

> **可能重复：**
> [当我在 NULL 对象指针上调用成员函数时会发生什么？](https://stackoverflow.com/questions/2533476/what-will-happen-when-i-call-a-member-function-on-a-null-object-pointer)

```
#include <iostream>
#include <string>

using namespace std;

class myClass{
private:
        int *x, *y, *z;

public:
        myClass();
    ~myClass();
    void display();
    void math(int,int,int);
};

void myClass::math(int x,int y,int z){
    this->x = new int;
    this->y = new int;
    this->z = new int;

    *this->x = x;
    *this->y = y;
    *this->z = z;

    cout << "result: " << (x*y)+z << endl;
}

myClass::~myClass(){
    delete x;
    delete y;
    delete z;
}

void myClass::display(){
    cout << x << y << z << endl;
}

myClass::myClass(){
    x=0;
    y=0;
    z=0;
}

int main()
{
    myClass myclass;
    myClass *myptr;
    myptr = new myClass();

        myclass.math(1,1,1);

myptr->math(1,1,1);

delete myptr;

myptr->math(1,1,1);  **//why does this still print?**

int t;
cin >> t;

 } 
```

> ：：：输出：：：
> 
> 结果：2
> 
> 结果：2
> 
> 结果：2

我只是在 C++ 中胡闹，试图了解更多。我想看看 delete 操作符到底做了什么。为什么删除对象后我仍然得到“结果：2”的第三个输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T05:34:19.087

对象内存可能还没有被其他东西覆盖。不要做这样的事情，这是未定义的行为

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T05:35:53.870

那是未定义的行为。愿恶魔从你的鼻子里飞出来。

还有另一个方面。当一个对象是`delete`d 时，它不会从内存中删除，直到它被之后可能创建的其他对象覆盖。因此，即使它被标记为被回收，数据（由指针指向）也可能与释放时一样。但不能保证它*不会*被使用。这就是为什么它的未定义行为。

# python - 使用 Cairo 绘制 GTK Pixbuf 的效率

> ID：13206298
> 
> 赞同：4
> 
> 时间：2012-11-03T05:31:28.347
> 
> 标签：python, gtk, pygtk, cairo, pycairo

所以，我想使用 PyCairo 绘制图像。效率非常重要，但我正在使用 PyGtk 的 gtk.gdk.Pixbuf 加载图像。我的问题是，通过 gtk.gdk.CairoContext 检索 Cairo 上下文与将 Pixbuf 转换为 cairo.ImageSurface 对象来渲染 Pixbuf 是否存在性能差异，如果是，差异有多大？这是在一个单独的绘图线程中运行的，该线程每秒更新 30 次左右（尽管仅在图像需要更新时）。请注意，转换只会运行一次。

```
gdkcr = gtk.gdk.CairoContext(cr)

gdkcr.set_source_pixbuf(img, 0, 0)
gdkcr.paint() 
```

对比

```
cr.set_source(imgSurface)
cr.rectangle(0, 0, imgSurface.get_width(), imgSurface.get_height())
cr.fill() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:41:40.663

正如@UliSchlachter 所问，如何在第二个解决方案中获得 ImageSurface？我只能猜测它涉及`.set_source_pixbuf()`和`.get_source().get_surface()`。

pixbuf 和 cairo 在内存中存储像素的方式不一样（RGB(A) 与 ARGB），因此 set_source_pixbuf() 必须在移动位的同时逐个像素地复制图像。这是相对较快的，但仍然有成本。如果图像始终相同，那么在循环之外进行一次转换应该很容易。

# linux - linux nasm汇编显示输入加1

> ID：13206300
> 
> 赞同：0
> 
> 时间：2012-11-03T05:31:38.583
> 
> 标签：linux, assembly, x86, nasm

我正在解决一些简单的练习问题，其中一个问题是读入一个数字，然后输出该数字加 1。

例如：

```
Please enter a number: 4
5 
```

现在，有了这个输入和输出，它应该很容易。但我想让我的程序能够处理多个数字。这就是我难过的地方。因为如果给我 999 的输入，我的程序怎么会知道将最后的 9 设为 0，并将 1 加到十列？那么，它怎么知道通过添加另一个数字将数字变为1000？

到目前为止，这是我的代码：

```
SECTION .data
msg        db "Please enter a number: ",0
msglen     EQU $-msg
sz         EQU 32
NUL        EQU 0
len        EQU 32

SECTION .bss
num        resb len

SECTION .text
GLOBAL _start
_start:

Msg:                             ; display the message
mov        eax, 4
mov        ebx, 1
mov        ecx, msg
mov        edx, msglen 
int        80h              

Read:                            ; read in the number
mov        eax, 3
mov        ebx, 1
mov        ecx, num
mov        edx, len
int        80h

Length:                          ; Find length of string
mov        eax, num
mov        ebx, 0
loop:
cmp        BYTE[eax], NUL
je         Set 
inc        eax
inc        ebx
jmp        loop                               

Set:                             ; set up the registers and variables
mov        ecx, num

Print:                           ; main section - prints out the number plus 1
cmp        BYTE[ecx], NUL
je         Exit 
mov        eax, 4
mov        ebx, 1
mov        edx, 1            ; NOTE- does not yet add 1 to the number
int        80h

inc        ecx
jmp        Print 

Exit:                            ; exits safely
mov        eax, 1
mov        ebx, 0
int        80h 
```

有人可以告诉我如何解决这个问题吗？我只是无法弄清楚添加部分。我可以打印出多个数字，最多 32 位，但添加只是一个谜。

提前致谢，

赖莱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:17:20.207

如何使用 atoi() 将其转换为整数然后 printf() 输出结果？有一些关于它的示例代码：

[http://cs.lmu.edu/~ray/notes/nasmexamples/](http://cs.lmu.edu/~ray/notes/nasmexamples/)

至于你的整数加法问题，如果我是你，我会首先将问题分解为“加一”。你会注意到你在那里遵循这个算法：

1.  将指针设置为字符串中的最后一个字符。
2.  角色加一。如果字符低于 ASCII '9'，则返回。
3.  否则，将指针设置为前一个字符。如果它的编号不是-1，则跳转到2。
4.  如果我们试图覆盖字符号 -1，则为新字符串分配 n+1 个字节，将旧字符串的内容复制到新字符串并添加“1”作为第一个字符。

从这一点开始，如果您想添加多于一位的输入，您只需要弄清楚发生了什么变化。

# c# - DELETE 语句与 REFERENCE 约束冲突

> ID：13206302
> 
> 赞同：4
> 
> 时间：2012-11-03T05:31:54.113
> 
> 标签：c#, sql, sql-server

在我的项目中，我用两个数据集填充两个数据库表。我用来填充这些数据库表的方法如下所示：

```
SqlCommand sqlCommand = new SqlCommand();            
SqlCommand command;
using (SqlConnection conn = new SqlConnection(strConn))
{
    using (SqlCommand cmd = new SqlCommand(strQuery, conn))
    {
        using (SqlCommand cmdReset = new SqlCommand("DBCC CHECKIDENT('Doctor', RESEED, 0)", conn))
        {
            using (SqlCommand cmdUnCheck = new SqlCommand("alter table [dbo].[Doctor] nocheck constraint all",conn))
            {
                using (SqlCommand cmdCheck = new SqlCommand("alter table [dbo].[Doctor] with check check constraint all",conn))
                {
                    SqlDataAdapter da = new SqlDataAdapter(cmd);
                    conn.Open();
                    SqlTransaction sqlTransaction = conn.BeginTransaction();
                    cmd.Transaction = sqlTransaction;
                    cmdReset.Transaction = sqlTransaction;
                    cmdUnCheck.Transaction = sqlTransaction;
                    cmdCheck.Transaction = sqlTransaction;
                    try
                    {
                        cmdUnCheck.ExecuteNonQuery();
           /*ERROR*/    cmd.ExecuteNonQuery();
                        cmdReset.ExecuteNonQuery();//deleting database table data
                        foreach (DataRow dr in ds.Tables[0].Rows) //Inserting new data into the Database table
                        {
                            command = new SqlCommand(query.createDoctorRow("Doctor",
                            dr[1].ToString(), dr[2].ToString(), Convert.ToInt64(dr[3]), Convert.ToInt32(dr[4])), conn, sqlTransaction);
                            command.ExecuteNonQuery();
                        }
                        cmdCheck.ExecuteNonQuery();
                        sqlTransaction.Commit();
                        conn.Close();
                    }
                    catch (Exception e)
                    {
                        sqlTransaction.Rollback();
                        throw;
                    }
                }
            }
        }
    }                
} 
```

上面的代码工作正常，直到第二个数据库表为空，但是当我在其中插入一些数据然后运行代码时，VS 显示错误 -->

> DELETE 语句与 REFERENCE 约束“FK_Dr_ID”冲突。冲突发生在数据库“医院”、表“dbo.Patient”、列“Doctor_ID”中。该语句已终止。

这似乎很清楚，外键限制了查询的发生，但是由于我是初学者并且不知道该怎么做，所以我请求您的帮助..

在上面的代码中，我参考这个[SO 答案](https://stackoverflow.com/a/1566552/1577396)进行了更改，但并不高兴，错误仍然存​​在于同一点。

*可选*：有没有办法减少`using`我的代码中的语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T05:35:47.527

您无法删除 DOCTOR 表中的数据，因为您通过 DOCTOR 的 ID 与 Patient 表有关系。

# jquery - 防止文本框中的 unicode 字符

> ID：13206303
> 
> 赞同：2
> 
> 时间：2012-11-03T05:31:55.657
> 
> 标签：jquery

嗨，我有一些文本框，我希望其中一个只能获取符号编号和英文字符，但不能使用 ب 或 ن orص 等 unicode 和....

我写了以下代码，但它没有用

```
 $(function () {

        $("#usernametxt").keydown(function (event) {

            if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9) {

            }
            else {

                 if ((event.keyCode >= 48 && event.keyCode <=90) || (event.keyCode >= 96 && event.keyCode <= 105))
                 {

                 }

                else {
                    event.preventDefault();
                }
            }

        })

    }) 
```

当我编写流式代码时，所有文本框都无法获取 unicode

```
 document.onkeypress = function (evt) {
        evt = evt || window.event;
        var charCode = evt.which || evt.keyCode;
        var charStr = String.fromCharCode(charCode);
        if (/[a-zA-Z0-9-_*() #@ ]/i.test(charStr)) {

        }
        else {
            event.preventDefault();
        }
    }; 
```

# python - 裁剪掉透明像素但保留偏移量

> ID：13206304
> 
> 赞同：0
> 
> 时间：2012-11-03T05:31:57.013
> 
> 标签：python, image, imagemagick

我有一组 .png 文件，其中大部分图像是透明的（alpha 通道），但中间有图像（非透明像素）需要提取。

我需要做的是将图像裁剪为仅不透明的像素，但我需要知道从左侧和底部裁剪了多少像素，因此在渲染裁剪后的图像时，可以将其位置调整回来如果它在更大的图像中。

有没有办法使用 ImageMagick 进行裁剪并获得 x,y 偏移？我知道如何裁剪 .png 文件，但是大图像中不透明图像的位置丢失了，我需要这些信息。

看来我可以使用 PIL 和 python 来做到这一点，但是在 Mac 上安装 PIL 被证明是一种令人毛骨悚然的体验。我花了几个小时试图摆脱 jpeg_resync_to_restart 错误，似乎每个人都有不同的解决方案适用于他们，但它们都不适合我......所以我放弃了 PIL。

ImageMagick 已经安装并且可以工作了。

我可以从 bash 或 python 脚本调用另一组工具来满足我的需要吗？

这不仅仅是我需要执行的一次性操作，因此我需要一个可以在源 .png 文件更改时反复运行的脚本。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:52:55.517

您提到在 Mac 上安装 PIL 时遇到问题。你考虑过使用 Macports 吗？

# ruby-on-rails - Rails 2 纯文本邮件在 Thunderbird 中显示错误的缩进/格式

> ID：13206306
> 
> 赞同：2
> 
> 时间：2012-11-03T05:32:08.990
> 
> 标签：ruby-on-rails, actionmailer, ruby-on-rails-2, thunderbird

我正在使用 rails 2.3 并想发送多部分纯/html 电子邮件。html 电子邮件以正确的格式发送，但文本电子邮件有时会显示错误的格式。这是我的通知方法：

```
part :content_type => 'multipart/alternative' do |copy|
      copy.part :content_type => 'text/plain' do |plain|
        plain.body = render( :file => "file.text.plain.erb",  :body => @body )
        plain.transfer_encoding = "base64" 
```

预期输出：-

> 嗨用户，
> 
> 欢迎光临您的店铺。
> 
> * * *
> 
> 我们的客户服务团队将立即为您服务。
> 
> 您激活的计划是演示。
> 
> * * *
> 
> 如有任何困难，请随时与我们联系。
> 
> * * *
> 
> www.exampleshop.com

这个输出在 gmail、yahoomail 和其他网络邮件服务中很好。

但有时它会以这种方式在 Thunderbird、Outlook 和 Evolution 等邮件客户端中出现乱码：-

> 嗨用户，
> 
> 欢迎光临您的店铺。------------------------------------ 我们的客户服务团队将立即为您服务。
> 
> 您激活的计划是演示。--------------------------
> 
> 如有任何困难，请随时与我们联系。-------------------------------------------------- --- www.exampleshop.com

我有`ActionMailer::Base.default_charset = "utf-8"`

这也可能是编码问题吗？

请建议。

# bash - Bash - 带有可选参数和缺少逻辑的函数

> ID：13206311
> 
> 赞同：9
> 
> 时间：2012-11-03T05:32:59.703
> 
> 标签：bash

我正在尝试为 useradd 命令制作简单的功能，并快速提高我糟糕的 shell 编程技能。

```
useradd -m -g [initial_group] -G [additional_groups] -s [login_shell] [username] 
```

现在我有点不确定如何使用可选参数。经过一些谷歌搜索，我认为可能对此有所了解，只需要围绕代码进行操作。

我不确定的一件事是逻辑，我很好奇你们将如何写这篇文章。我相信它会比我可以一起破解的更好。

* * *

以下是我将如何尝试设置我的函数参数，对于登录 shell 和初始组，我希望它们具有通用默认值。

```
arg1 - userName, required
arg2 - loginShell, optional (default: /bin/bash)
arg3 - initGroup, optional (default: users)
arg4 - otherGroups, optional (default: none) 
```

这是一些关于我如何构建它的蹩脚的伪代码。

```
function addUser( userName, loginShell, initGroup, otherGroups){
// Not how I would go about this but you should get the point
  string bashCmd = "useradd -m -g ";

// Adding the initial user group
  if(initGroup == null){
    bashCmd += "users";
  } else {
    bashCmd += initGrop;
  }

// Adding any additional groups
  if(otherGropus != null){
    bashCmd += " -G " + otherGroups;
  }

  if(loginShell == null){
    bashCmd += " -s /bin/bash " + userName;
  } else {
    bashCmd += " -s " + loginShell + " " + userName;
  }
} 
```

* * *

这些是我要经过的链接

[http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-8.html](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-8.html)

[将参数传递给 Bash 函数](https://stackoverflow.com/questions/6212219/passing-parameters-to-a-bash-function)

[如何编写带有可选输入参数的 bash 脚本？](https://stackoverflow.com/questions/9332802/how-to-write-a-bash-script-that-takes-optional-input-arguments)

[在此处文档中使用函数](https://stackoverflow.com/questions/13197207/using-functions-inside-here-document)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-03T05:52:24.673

您可能会发现`${parameter:+word}`扩展很有用。来自[*Bash 参考手册*](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)：

> 如果*parameter*为 null 或未设置，则不替换任何内容，否则替换*word*的扩展。

所以：

```
function addUser {
    useradd -m ${2:+-s "$2"} ${3:+-g "$3"} ${4:+-G "$4"} "$1"
} 
```

请注意，如果任何参数包含有趣的字符（如空格、美元符号或其他 shell 元字符），此函数会正确处理引用。如果您尝试将命令字符串拼凑在一起，则正确引用这些片段要困难得多。如果这只是供您个人短期使用并且您知道输入是安全的，那可能并不重要。但是，如果脚本或函数打算以 root 身份运行并且没有非常仔细地处理其输入，那么最好不要留下脚本或函数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-03T17:24:48.007

@rob mayoff 的回答是完成此任务的最简单方法，但我想我会尝试将您的伪代码转换为真正的 shell 语法，以指出一些习惯于“真正”编程语言的人的标准陷阱。先说三点一般注意事项：

*   不同的shell 有不同的功能，所以如果您需要任何bash 扩展，请使用bash（即使用命令启动脚本`#!/bin/bash`或运行它）。`bash`如果您只使用基本的 Bourne shell 功能和语法，请改用 sh （`#!/bin/sh`或`sh`命令）运行它。如果你不知道，假设你需要 bash。
*   在为以后执行构建命令时，您可能会遇到各种解析异常（请参阅[BashFAQ#050：我正在尝试将命令放入变量中，但复杂的情况总是失败！](http://mywiki.wooledge.org/BashFAQ/050)）。最好的方法通常是将其构建为数组，而不是字符串。'当然，数组是 bash 扩展，而不是基本的 shell 功能......
*   在 shell 语法中，空格*很重要*。例如，在 command`if [ -n "$2" ]; then`中，分号后的空格是可选的（分号前也可以有一个空格），但*所有*其他空格都是必需的（没有它们，命令将执行完全不同的操作）。此外，在作业中，等号周围*不能有空格，或者（再次）它会做一些完全不同的事情。*

考虑到这一点，这是我对该功能的看法：

```
addUser() {
# The function keyword is optional and nonstandard, just leave it off. Also,
# shell functions don't declare their arguments, they just parse them later
# as $1, $2, etc

bashCmd=(useradd -m)
# you don't have to declare variable types, just assign to them -- the
# parentheses make this an array. Also, you don't need semicolons at the
# end of a line (only use them if you're putting another command on the
# same line). Also, you don't need quotes around literal strings, because
# everything is a string by default. The only reason you need quotes is to
# prevent/limit unwanted parsing of various shell metacharacters and such.

# Adding the initial user group
if [ -z "$3" ]; then
# [ is actually a command (a synonym for test), so it has some ... parsing
# oddities. The -z operator checks whether a string is empty (zero-length).
# The double-quotes around the string to be tested are required in this case,
# since otherwise if it's zero-length it'll simply vanish. Actually, you
# should almost always have variables in double-quotes to prevent accidental
# extra parsing.
# BTW, since this is a bash script, we could use [[ ]] instead, which has
# somewhat cleaner syntax, but I'm demonstrating the difficult case here.
    bashCmd+=(-g users)
else
    bashCmd+=(-g "$3")
    # Here, double-quotes here are not required, but a good idea in case
    # the third argument happens to contain any shell metacharacters --
    # double-quotes prevent them from being interpreted here. -g doesn't
    # have any shell metacharacters, so putting quotes around it is not
    # necessary (but wouldn't be harmful either).
fi

# Adding any additional groups
if [ -n "$4" ]; then
    bashCmd+=(-G "$4")
fi

# Set the login shell
if [ -z "$2" ]; then
    bashCmd+=(-s /bin/bash "$1")
else
    bashCmd+=(-s "$2" "$1")
fi

# Finally, run the command
"${bashCmd[@]}"
# This is the standard idiom for expanding an array, treating each element
# as a shell word.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T05:50:03.767

谷歌为[ABS](http://tldp.org/LDP/abs/html/)获取许多复杂的样本

```
function addUser{
userName=$1;
loginShell=$2;
initGroup=$3
otherGroups=$4;

  args=(-m -g);

// Adding the initial user group
  if [[ $initGroup == '' ];then
    args+=(users);
  else 
    args+=("$initGrop");
  fi;

# Adding any additional groups
  if [[ $otherGroups != '' ]];then
    args+=(-G "$otherGroups");
  fi;

  if [[ $loginShell == '' ]];then
    args+=(-s /bin/bash "$userName");
  else
    args+=(-s "$loginShell" "$userName");
  fi;
  useradd "${args[@]}"
} 
```

代码未检查，但我希望我不会错过任何东西

# ruby-on-rails - 每小时清理文件夹

> ID：13206313
> 
> 赞同：2
> 
> 时间：2012-11-03T05:33:20.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我希望 Rails 服务器`public/photos`每小时清空一次文件夹，以免文件夹太满。我该怎么做（如果有可能的话）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T05:43:57.530

假设您可以在托管环境中访问c​​rontab *（即**不是**heroku）*，您可以将以下内容添加到您的 crontab

```
0 * * * * rm -rf /path/to/rails/app/public/photos/* 
```

如果您在 Heroku 上运行，您可以通过在应用程序中创建一个包含类似内容的文件来使用[Heroku Scheduler插件](https://devcenter.heroku.com/articles/scheduler)`lib/tasks/scheduler.rake`

```
require 'fileutils'

task :clear_photos => :environment do
  FileUtils.rm_rf Dir.glob("#{Rails.root}/public/photos/*")
end 
```

您可以阅读上述链接中的文档，了解如何配置调度程序以`clear_photos`每小时运行此任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:01:43.127

您可以使用[每当](https://github.com/javan/whenever)宝石。通过这个宝石很容易做这种工作。

甚至还有关于这个主题的免费[railscast 。](http://railscasts.com/episodes/164-cron-in-ruby)

# python - 如何在 tkinter python 3 上调整/控制图片大小

> ID：13206314
> 
> 赞同：1
> 
> 时间：2012-11-03T05:33:23.600
> 
> 标签：python, python-3.x, tkinter

如何调整图像的大小？谢谢

```
canvas = Canvas(width = 300, height = 200, bg = 'white')
canvas.grid(row=0, column=0,sticky = 'W')
gif = PhotoImage(file = "picture.gif")
canvas.create_image(0, 0, image = gif, anchor = NW)
mainloop() 
```

# javascript - JavaScript innerHTML 函数问题

> ID：13206319
> 
> 赞同：0
> 
> 时间：2012-11-03T05:34:04.547
> 
> 标签：javascript, innerhtml

不确定这是否很奇怪或者我只是很愚蠢，但我在 JavaScript innerHTML 中遇到了问题。好的，我的身体标签中有一个空的 DIV。我想要的是在其中写一个无序列表。所以，我做了这个：

```
<script>
var bla = document.getElementById("bla");
bla.innerHTML = "<ul><li>LOL</li></ul>";
</script>

<div id="bla">

</div> 
```

嗯，DIV中没有出现任何内容.. :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:36:42.683

id='bla' 未找到，因为您在 id 上方编写脚本且未使用任何函数

像这样改变

```
<div id="bla">

</div>

<script>
var bla = document.getElementById("bla");
bla.innerHTML = "<ul><li>LOL</li></ul>";
</script> 
```

或者

```
<script>
window.onload=function(){var bla = document.getElementById("bla");
bla.innerHTML = "<ul><li>LOL</li></ul>";
 };
</script>

<div id="bla">

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:40:15.020

```
<div id="bla">

</div>
<script>
var bla = document.getElementById("bla");
bla.innerHTML = "<ul><li>LOL</li></ul>";
</script> 
```

# windows - 在 Windows 中编译 hello_world 时出错

> ID：13206328
> 
> 赞同：0
> 
> 时间：2012-11-03T05:35:56.490
> 
> 标签：windows, v8

我在尝试编译 hello_world 示例时出现此错误[错误图像，该示例在 v8 入门部分](http://www.freeimagehosting.net/k1uyl)[入门 google v8](https://developers.google.com/v8/get_started)上。我使用 arm 架构构建它。我正在使用视觉工作室构建方案。我已按照谷歌开发者页面上的说明进行操作，但仍然出现此错误。

需要解决这个问题，拜托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:10:08.983

Google V8 网站上的说明解释了如何使用 Microsoft Visual Studio 编译 v8。结果，您将获得 DLL 和 LIB 文件。LIB 文件只能被 Microsoft 编译器识别。

如果您想使用 GCC/CLANG 来开发 v8 应用程序，您应该直接链接到 DLL 文件。如果您使用的是不能直接链接到 DLL 的旧版 GCC，则需要将 DLL 转换为 .a 文件。

# uiscrollview - UIScrollView页面iOS时更新标签

> ID：13206329
> 
> 赞同：2
> 
> 时间：2012-11-03T05:36:15.857
> 
> 标签：uiscrollview, uiscrollviewdelegate

我有一个视图控制器，它在屏幕的上半部分包含一个 UIScrollView。在下半部分我有一个标签。这是表格的详细视图，因此一旦您从表格中选择了一个项目，它就会加载此详细视图。您选择的某些项目具有不同的变化，因此这是滚动视图的来源。您可以左右滚动以查看变化。

我试图让滚动视图下方的标签在滚动视图滚动时更改其文本。这是我用来检测我在哪个页面上的内容：

```
CGFloat pageWidth = scrollView.frame.size.width; 
int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1; 
```

这将返回滚动视图的“页码”。当用户滚动到不同的页面时，如何告诉标签更改其文本？我看过很多例子，包括自定义委托，但我似乎无法找到一个好的解决方案。

作为旁注，要显示的标题在一个数组中，所以`objectAtIndex:page - 1`一旦我能找到一种方法来告诉标签（以及将来可能显示的任何其他标签）进行更新，这将是完美的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T05:41:46.430

为什么不试试这个：

```
#define ScrollObjWidth 320.0f // Note: Use what size you need!

- (void)scrollViewDidScroll:(UIScrollView *)scrollView; {
  float roundedValue = round(scrollView.contentOffset.x / ScrollObjWidth);
  _label.text = [NSString stringWithFormat:@"%d", ((int)roundedValue - 1)];
} 
```

确保 your`UIViewController`是 a `UIScrollViewDelegate`，并且 the`UIScrollView`的`delegate`属性设置为`UIViewController`.

希望有帮助！

# r - R热图中的颜色标签（文本）

> ID：13206335
> 
> 赞同：4
> 
> 时间：2012-11-03T05:36:47.800
> 
> 标签：r, colors, heatmap, labels

我正在尝试在 R 中制作一个热图，其中标签文本是彩色的（以指示数据点来自哪个组）。

我目前正在使用 heatmap.2，但很乐意使用另一个包。

```
heatmap.2(data.matrix(data),trace = 'none', dendrogram='none',ColSideColors=col) 
```

这个调用给了我标签上的彩色条（ColSideColors），但我想让标签本身有颜色。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T07:35:38.120

您将需要创建一个包含该`col.axis`参数的新函数。这些是要使用的函数行：

```
# there were four long pages of code before this section:

axis(1, 1:nc, labels = labCol, las = 2, line = -0.5, tick = 0, # original line
        col.axis="green",   # added argument
        cex.axis = cexCol)
if (!is.null(xlab)) 
        mtext(xlab, side = 1, line = margins[1] - 1.25)
axis(4, iy, labels = labRow, las = 2, line = -0.5, tick = 0, # original line
        col.axis="green",   # added argument
        cex.axis = cexRow) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:40:45.043

我最近遇到了同样的问题，最后我用`mtext`替换原来的`axis`. 以前的答案已经显示了`axis`绘制标签的语句。但是，`col.axis`只能指定一种颜色。要启用矢量颜色，

```
#    axis(1, 1:nc, labels = labCol, las = 2, line = -0.5, tick = 0, 
#        cex.axis = cexCol )
mtext(side = 1, text = labCol, at = 1:nc, las = 2, line = 0.5,col = ClabColor, cex = cexCol)

#    axis(4, iy, labels = labRow, las = 2, line = -0.5, tick = 0, 
#        cex.axis = cexRow )
mtext(side = 4, text = labRow, at = iy, las = 2, line = 0.5,col = RlabColor, cex = cexCol) 
```

另外，请记住向函数添加另外两个参数，`ClabColor = "black", RlabColor = "black"`. 默认颜色为黑色。

您需要注意的另一件事是，矢量颜色应遵循标签的顺序，这些标签在您计算树状图时会被置换

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T04:18:35.417

由于缺乏评论权限，我无法回复lwz0203，但他们的代码并不完整。您需要添加以下行：

```
if(is.vector(RlabColor)) {
    RlabColor=RlabColor[rowInd]
} 
```

（同样适用于 ClabColor）

```
if(is.vector(ClabColor)) {
    ClabColor=ClabColor[colInd]
} 
```

在代码中的某个位置，否则当您使用颜色矢量时，您会得到与标签不匹配的颜色。向量 labRow 或 labCol 中的文本已经使用代码重新排序：

```
if (is.null(labRow))
    labRow <- if (is.null(rownames(x)))
        (1:nr)[rowInd]
        else rownames(x)
else labRow <- labRow[rowInd] 
```

所以我在同一个地方添加了 RlabColor 和 ClabColor 的重新排序。

# php - 检查数组值是数字

> ID：13206337
> 
> 赞同：0
> 
> 时间：2012-11-03T05:37:00.047
> 
> 标签：php

如何检查仅包含四位数字的数组中的值？如果有超过四位数的字符串或数字，我想回显一条错误消息。

这是对的：`$searchText = '3423, 2453, 3245 , 2425, 6765';`

这是错误的：`$searchText = '34d23, 244353, fsddf , 2d4425, 674365';`

我怎样才能做到这一点？

我尝试过这样的事情......

```
$searchText = '3423,2453,3245,2425,6765';       

function validate($input) {
    $searchArray = array_map('trim', explode(',', $input));
    foreach($searchArray as $item) {
        if(filter_var($item, FILTER_VALIDATE_INT) === false || strlen($item) != 4)
            return false;
    }
}

if(!validate($searchText))
    echo 'fail';
else
    echo 'pass'; 
```

输出是：失败为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:43:33.383

```
$searchText = '3423, 2453, 3245 , 2425, 6765';

$vals = explode(",",$searchText);

foreach($vals as $v){
    $v = trim($v);
    if(is_numeric($v) && strlen($v)==4){
        echo 'good to go<br>';
    }elseif(is_numeric($v)){
        echo 'num but not 4 digits<br>';
    }else{
        echo 'string<br>';
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T05:49:43.410

这些不是数组（它们是字符串），但您可以通过将字符串拆分为数组并使用[PHP 的过滤](http://www.php.net/manual/en/book.filter.php)（`filter_var`在本例中）来处理问题：

```
if(!validate($searchText))
    // fail
else
    // pass

function validate($input)
{
    $inputArray = array_map('trim', explode(',', $input));
    foreach($inputArray as $item) {
        if(filter_var($item, FILTER_VALIDATE_INT) === false || strlen($item) != 4)
            return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T05:47:05.063

您可以使用以下逻辑。（如果您的意思是“如何检查数组中的值，其中的数字仅包含四位数字？”，那么下面是解决方案）

```
<?php
//you can use explode() function to convert your string into array.
//$searchText = '3423, 2453, 3245 , 2425, 6765';    
//$searchText = explode(",",$searchText);

$searchText = array('3423', '2453', '3245' , '2425', '6765');
$count = sizeof($searchText);
foreach($searchText as $key=>$value) {

    if (is_numeric($value) && preg_match('/^\d{4}$/', $value)) {

      // pass
    } else {

        $count--;
       // fail
    }

}

if($count == sizeof($searchText)) {
    echo "All good";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T05:43:48.267

用 $ary 替换你的数组变量这是返回的字符数在数组中

```
$maxlen = max(array_map('strlen', $ary)); 
```

为了更好地解释[StackOverflow](https://stackoverflow.com/questions/1762191/how-to-get-the-length-of-longest-string-in-an-array)

# .net - 具有多个图像列表和图标/图像的列表视图

> ID：13206339
> 
> 赞同：3
> 
> 时间：2012-11-03T05:37:06.667
> 
> 标签：.net, listview, vb6, thumbnails, imagelist

我需要一种在列表视图上使用两个图像列表的方法。如果标题图标包含 16x16 图标，则其中一个图像列表将包含子项目内的 32x32 缩略图。

下图显示了我正在尝试做的事情

![带有听者图标和缩略图的列表视图](../Images/f1fdc5d102d5b87fc8c626c0e1a41f3c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:06:20.820

我发现了一个解决问题的技巧。诀窍是在 32x32 画布上创建一个 16x16 图标并将其居中。这是因为缩略图大小最大为 32 位。所以我有一个 16pix isonc 的图像列表和另一个 32pix 图标的图像列表

当需要缩略图时，我只需要将小图标设置为 32pix。

这个支持建立了它我只需要这样做

```
' for the header columns
Set ListView1.ColumnHeaderIcons = ImageList1
' for the items and sub items
Set ListView1.SmallIcons = ImageList2 
```

感谢您的所有投入

# c - 使用结构和多线程时的 malloc.c 错误

> ID：13206340
> 
> 赞同：0
> 
> 时间：2012-11-03T05:37:14.680
> 
> 标签：c, pthreads, malloc, dynamic-memory-allocation

我收到一个错误，我不知道如何解决。我正在尝试使用自旋锁解决“生产者-消费者”问题。我创建了一个类似“队列”的数据结构作为共享资源来放入“生产”项目，并删除要“消费”的项目。这是我的主程序的样子：

```
#include <pthread.h>
#include <stdlib.h>
#include <stdio.h>
#include <time.h>
#include "Queue.h"

#define DEBUG 1

Queue_t* global_queue; // create a global queue

/* thread procedure for the producer thread */
void* producer_func(void* arg)
{
   while(1) // loops infinitely
   {
      int datum = rand() % global_queue->maximum_count;

      // spin while the queue is full
      while ((global_queue->current_count) ==
         (global_queue->maximum_count));

      enqueue(global_queue, datum);
      display(global_queue);
   }
}

/* thread procedure for the consumer thread */
void* consumer_func(void* arg)
{
   while(1) // loops infinitely
   {
      int datum = 0;

      // spin while there are no items in the queue
      while(global_queue->current_count == 0);

      datum = dequeue(global_queue);
      printf("The number consumed is %d\n");
   }
}

/* Main */
int main(int argc, char** argv)
{
   if(argc != 2)
   {
      printf("Error: wrong number of command-line arguments\n");
      printf("Usage: %s <integer>\n", argv[0]);
      exit(1);
   }

   pthread_t producer;  // create producer thread
   pthread_t consumer;  // create consumer thread

   // create the queue object, get the max queue size
   //int max_count = atoi(argv[1]);
   global_queue = construct(10);
   display(global_queue);

   // intialize the random seed generator
   srand((unsigned)time(NULL));

   // create the threads and have them execute their routines
   pthread_create(&producer, NULL, &producer_func, NULL);
   pthread_create(&consumer, NULL, &consumer_func, NULL);

   // join the threads to finish
   pthread_join(producer, NULL);
   pthread_join(consumer, NULL);

   // deallocate the queue from memory
   //destruct(global_queue);

   return 0;
} 
```

然而，当我在主程序中调用 pthread_create 时，我在 malloc.c 中得到一个奇怪的错误：

```
queue_demo: malloc.c:3096: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed.
Aborted 
```

这是我的“队列”数据结构头文件：

```
#ifndef QUEUE_H
#define QUEUE_H

typedef struct Queue
{
   int  current_count;
   int  maximum_count;
   int  buffer[];       // queue uses an array
} Queue_t;

// routines to implement Queue-like functionality (FIFO)
// TODO: somehow encapsulate all these features in the struct itself.
//
Queue_t* construct(int buff_size);
void     destruct (Queue_t* queue);
void     display  (Queue_t* queue);
int      dequeue  (Queue_t* queue);
void     enqueue  (Queue_t* queue, const int datum);

#endif 
```

和实施：

```
#include <assert.h>
#include <stdlib.h>
#include <stdio.h>
#include "Queue.h"

Queue_t* construct(int buff_size)
{
   Queue_t* queue = malloc(sizeof(Queue_t));

   assert(queue != NULL);
   queue->maximum_count = buff_size;
   queue->current_count = 0;

   int i = 0;

   for(; i < queue->maximum_count; ++i)
      queue->buffer[i] = 0;

   return queue;
}

void destruct(Queue_t* queue)
{
   assert(queue != NULL);
   free(queue);
   printf("Queue destroyed!\n");
}

void display(Queue_t* queue)
{
   int i = 0;

   for(; i < queue->maximum_count; ++i)
      printf("%d ", queue->buffer[i]);
   printf("\n");
}

void enqueue(Queue_t* queue, const int datum)
{
   assert(queue->current_count < queue->maximum_count);
   queue->buffer[queue->current_count] = datum;
   ++queue->current_count;
}

int dequeue(Queue_t* queue)
{
   int i = 1;
   int datum = queue->buffer[0];

   assert(queue->current_count > 0);

   for(; i < queue->maximum_count; ++i)
   {
      queue->buffer[i-1] = queue->buffer[i];
      queue->buffer[i] = 0;
   }

   --queue->current_count;

   return datum;
} 
```

显然，我做错了什么。但我不知道那到底是什么。我怀疑它可能与全局声明结构有关，但我不确定。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T05:43:02.413

您`construct()`没有为队列项目数据分配空间。

```
Queue_t* construct(int buff_size)
{
   Queue_t* queue = malloc(sizeof(Queue_t));

   assert(queue != NULL);
   queue->maximum_count = buff_size;
   queue->current_count = 0;

   int i = 0;

   // HERE. Where is the item data space allocation ??
   for(; i < queue->maximum_count; ++i)
      queue->buffer[i] = 0;

   return queue;
} 
```

试试这个：

```
Queue_t* construct(int buff_size)
{
   // note space allocation for buffer[] bytes as well as overall structure.
   Queue_t* queue = malloc(sizeof(Queue_t) + sizeof(int) * buff_size);

   assert(queue != NULL);
   queue->maximum_count = buff_size;
   queue->current_count = 0;
   memset(queue->buffer, 0, sizeof(int)*buff_size);
   return queue;
} 
```

我还没有查看您的其余代码以确定您是否正确保护了对队列的并发访问（pthread 提到让我怀疑您应该向 Queue_t 类型的成员添加和初始化 pthread_mutex_t，并使用它用于保护并发队列修改）。无论如何，以上绝对是一个问题，应该*首先*处理。

# asp.net-mvc-3 - 在 webgrid 里面创建一个复选框

> ID：13206347
> 
> 赞同：0
> 
> 时间：2012-11-03T05:38:45.497
> 
> 标签：asp.net-mvc-3, checkbox, webgrid

我想在 webgrid 中创建一个复选框选项，其值为 int

下面我是怎么做的...

```
grid.Column("",header:"Select",format:(item)=>Html.CheckBox(String.Format("{0}",(int)item.ID),false,new{id="chkSelected", Style="width:60px"})), 
```

它对我来说工作正常，但我想使用类似下面的东西

```
grid.Column(header: "{CheckBoxHeading}",  format:
            @<text><input class="box"  type="checkbox" /></text>) 
```

注意：我在剃须刀上使用 aspx 引擎

请帮助我..我如何使用 aspx 引擎实现上述语法

谢谢阿曼
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:38:35.687

下面是一个关于如何在 MVC 3 中的 webgrid 列中使用复选框的简单演示。

我的模型中有一个名为“HasPassport”的字段，它是布尔类型，我需要一个复选框列，以显示每个真实值的选中复选框，否则显示未选中的复选框。

使用下面的 WebGrid.Column 的格式参数是我使用的方式……</p>

```
grid.Column(
header: "HasPassport ?",
format:
 (col) => @Html.Raw(

 "<input type='checkbox' checked='" +

 ((col.HasPassport) ? "checked" : "") +

 "' disabled='true' />")
) 
```

因此，对于“hasPassport”字段的每个真实值，都会生成以下 HTML 代码：

```
<input type='checkbox' checked='checked' disabled='true' /> 
```

*PS取自[这篇](http://yassershaikh.com/check-box-in-webgrid-mvc-3/)文章。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T20:54:19.073

```
grid.Column(
header: "HasPassport ?",
format:
 (col) => @Html.Raw(

 "<input type='checkbox' checked='" +

 ((col.HasPassport) ? "checked" : "") +

 "' disabled='true' />")
) 
```

`col.HasPassport`无论价值如何，这将始终被检查

修改为

```
grid.Column("HasPassport?",header: "HasPassport", 
                format:  (col) => @Html.Raw("<input type='checkbox' "+ ((col.HasPassport) ? "checked='checked'" : "") +"' disabled='true' />") ), 
```

# ruby-on-rails-3 - Rails 闪烁消息未清除

> ID：13206348
> 
> 赞同：2
> 
> 时间：2012-11-03T05:38:46.223
> 
> 标签：ruby-on-rails-3

这是我的环境：Rails 3.2.0 和 Ruby 1.9.2。

将我的会话存储升级到数据库后，我的任何闪存消息都没有在任何请求后清除。如果我恢复到 cookie 会话存储，闪存消息将按预期清除。有没有人遇到过这个问题？

谢谢！

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:01:48.147

我知道问题是什么。我正在使用 datamapper (dm-rails 1.2) 作为我的持久层，并且存在一个问题：github.com/datamapper/dm-rails/issues/30。我按照第一篇文章中的说明进行了修复，它解决了我的问题。

[https://stackoverflow.com/questions/9512253/rails-3-2-datamapper-session-store-flash-object-persisting?rq=1](https://stackoverflow.com/questions/9512253/rails-3-2-datamapper-session-store-flash-object-persisting?rq=1)中也提到了这个问题

# iphone - 使用多个输入总线、Apple Core 音频混音器主机时不需要的音量变化

> ID：13206350
> 
> 赞同：1
> 
> 时间：2012-11-03T05:39:15.647
> 
> 标签：iphone, ios4, core-audio, volume, mixer

我正在开发一个使用 Apple 的混音器主机示例作为起点的 iPhone 应用程序。我成功地添加了一些新的声音文件并为声音添加了新的输入总线。我在包含音频对象的主视图控制器中将所有输入音量设置为相同的值。

```
[audioObject enableMixerInput: 0 isOn: TRUE];
[audioObject enableMixerInput: 1 isOn: TRUE];
[audioObject enableMixerInput: 2 isOn: TRUE];
[audioObject enableMixerInput: 3 isOn: TRUE];

[audioObject setMixerOutputGain: 1.000];

[audioObject setMixerInput: 0 gain: 1.000];
[audioObject setMixerInput: 1 gain: 1.000];
[audioObject setMixerInput: 2 gain: 1.000];
[audioObject setMixerInput: 3 gain: 1.000]; 
```

我在混音器主机的同一个回调函数中触发所有声音。

问题是当多个声音同时播放时，整体音量变得更安静。然后当只有一个声音再次播放时，它会变得更响亮。我想知道为什么。我该如何解决这个问题，以使声音始终保持相同的音量？

# cocoa - 实时调整大小期间缓慢的 NSWindow 图像绘制

> ID：13206358
> 
> 赞同：3
> 
> 时间：2012-11-03T05:41:10.127
> 
> 标签：cocoa, optimization, graphics, nswindow, throttling

我有一个简单的测试 Cocoa 应用程序，在 OS X 10.7.5 上的 XCode 4.5 下运行。该应用程序包含一个 NSWindow。窗口的内容视图是一个自定义视图，它的drawRect方法生成一个图像（非常快）并使用CGContextDrawImage在视图中绘制它。没有缩放或任何其他操作。

我一直在使用 UpTime() 调用来计时。绘图操作最初相当快，大约 5 毫秒。但是，在实时调整大小期间，CGContextDrawImage 在返回之前大约需要一秒钟（大约 1020 毫秒）。我在一台运行 10.7.5 的慢速计算机上尝试过，一台运行 10.6.8 的快速计算机，有大小窗口，有或没有显示光标；总是相同的结果。绘图期间的实际 CPU 使用率非常低。感觉好像系统在实时调整大小期间会限制重绘，而不是其他时间。

如果我只是用纯色填充矩形，我不会得到这种效果。

知道发生了什么吗？

# asp.net - 什么时候应该在我的项目中使用 EF 代码优先或模型优先？

> ID：13206361
> 
> 赞同：0
> 
> 时间：2012-11-03T05:41:24.957
> 
> 标签：asp.net, entity-framework, c#-4.0, design-patterns, ef-code-first

我们有几种使用 EF 访问数据库的方法：代码优先或模型优先或数据库优先设计......我想知道我何时使用这些方式访问数据库？......

这些技术是否有任何标准可以访问我的 Asp.net Web 应用程序或 asp.net mvc Web 应用程序中的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T02:54:32.430

基本上有两种情况-您的数据库存在或您的数据库不存在。如果您的数据库存在，您有两个选择 - 您可以使用实体设计器对您的数据库进行逆向工程或对现有数据库使用“CodeFirst”（例如，通过使用 EF Power Tools 逆向工程）。现在，如果您更喜欢使用类作为建模工具而不是线和框（EF 设计器），您会选择 CodeFirst，否则您将使用设计器。如果您没有数据库，您还有两个选项 - CodeFirst - 根据您的类 (CodeFirst) 创建数据库或使用设计器绘制模型（“线和框”）并根据您绘制的内容创建数据库。

# java - 如何创建异步 Java Restlet Web 服务？

> ID：13206365
> 
> 赞同：0
> 
> 时间：2012-11-03T05:41:55.880
> 
> 标签：java, web-services, asynchronous, restlet

我正在使用带有 Apache Tomcat的**Restlet** **API**在 Java 中创建 Web 服务。

在 Restlet 中，Web 服务默认创建为**同步的。**

我想使用 Restlet创建**异步web 服务。**考虑我有**searchCity 网络服务**，如果客户端以快速方式第一次发送请求**abc**并第二次发送**abcd**，那么网络服务应该对每个请求做出响应，例如**Google 的**搜索框如何显示一些建议。

请建议我如何实施？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:47:09.383

我认为这在 Restlet 中是不可能的。您可以尝试使用 resteasy 框架。

# jquery - jQuery 多选择器减少集合的大小

> ID：13206368
> 
> 赞同：0
> 
> 时间：2012-11-03T05:42:47.767
> 
> 标签：jquery

我的理解是执行类似的查询`jQuery(a, b)`会给你一个包含`jQuery(a)`and 并集的 jQuery 集合`jQuery(b)`。但是，我遇到了这种情况：

```
jQuery(somediv).length ==> 1
jQuery('td').length ==> over 600
jQuery('td', somediv).length ==> 1 (the div) 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:54:14.487

我觉得你很困惑

```
$("td,#somediv") 
```

和

$("td",somediv)

如果后者的长度为 1，则表示 somediv 只有 1 个后代 td。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T05:52:26.640

下面的代码将获得你的 dom 中 somediv 的总数

```
 jQuery(somediv).length ==> 1 
```

下面的代码将获得您的 dom 中的 td 总数

```
 jQuery('td').length ==> over 600 
```

下面的代码将在您的 somediv 中获得 td 的总数

```
 jQuery('td', somediv).length ==> 1 (the div) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T05:52:43.737

`jQuery(a, b)`表示查找`jQuery(a)`包含 in 的所有元素`jQuery(b)`。

它更像是`jQuery(b).find(a)`

所以在你的情况下`jQuery('td', somediv).length`返回的`td`数量`somediv`

# git - Git：读取索引的命令

> ID：13206369
> 
> 赞同：1
> 
> 时间：2012-11-03T05:42:57.393
> 
> 标签：git

是否有任何内置命令来读取 Git 索引？

由于索引是一个平面文件，我希望结果类似于：

```
<mode> <pathname> <object SHA-1>
<mode> <pathname> <object SHA-1>
<mode> <pathname> <object SHA-1> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T05:47:25.810

是的，你可以这样做

```
git ls-files --stage 
```

还有许多其他选项可以[`git ls-files`](https://www.kernel.org/pub/software/scm/git/docs/git-ls-files.html)产生不同类型的输出。

# jquery - 为什么 jQuery 不删除动态添加行的工作？

> ID：13206380
> 
> 赞同：4
> 
> 时间：2012-11-03T05:44:17.187
> 
> 标签：jquery

我是 jQuery 的新手。

你们知道为什么使用按钮`.remove()`添加的行不起作用吗？`add`它适用于已经存在的元素，例如`<li>One</li>`.

```
<html>
<head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $('.more').click(function(){
                html_frag='<li>XXX<input type="submit" value="Remove" class="testing" /></li>';
                $('ul li:last').after(html_frag);
                return false;
            });
        });

        $(document).ready(function(){
            $('.testing').click(function(){
                $(this).remove();
                return false;
            });
        });
    </script>
</head>
<body>
    <ul>
        <li>
            One
            <input type="submit" value="Remove" class="testing" />
        </li>
    </ul>
    <input type="submit" value="Add" class="more" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:46:07.857

因为当您绑定该处理程序时，DOM 上不存在新添加的元素。尝试使用如下委托事件，

```
 $(document).ready(function(){
        $(document).on('click', '.testing', function(){
            $(this).remove();
            return false;
        });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:48:14.317

试试这个，它不起作用，因为你正在动态创建元素，动态创建的元素在 jquery 上或 live 上使用。

```
 $("body").on("click", ".testing", function(event){
      $(this).remove();
          return false;
   }); 
```

# php - 使用 unix 时间、php、mysql 的时区问题

> ID：13206383
> 
> 赞同：2
> 
> 时间：2012-11-03T05:44:50.147
> 
> 标签：php, mysql, date, offset, convert-tz

昨晚我花了 8 个多小时检查所有文档，浏览各种帖子等，我几乎解决了我的问题，但仍然缺少一些我无法理解的东西。

我有一个表，它存储各种用户提交的带有unix 时间戳（例如1351867293）。我正在提取这些信息并对其进行计数，以获得“今天”、“昨天”、“本周”等提交的总数。

我使用的代码（用于“今天提交”）是：

```
WHERE DATE(from_unixtime(comment_date)) = CURRENT_DATE"; 
```

到目前为止一切都很好，但是有一个时间偏移并且数据没有正确显示。stackoverflow 上的用户建议使用 CONVERT_TZ 来固定偏移量。

这就是我被卡住的地方。我位于 CST 时区，我的服务器似乎位于 EST 时区。所以我使用了这段代码

```
 WHERE DATE(CONVERT_TZ(from_unixtime(comment_date), 'EST', 'CST')) = CURRENT_DATE"; 
```

...但它只显示“0”，尽管我今天有提交。我尝试了不同的时区，但结果它们都给了我“0”。当我用数字替换 EST 和 CST 时，例如：

```
 WHERE DATE(CONVERT_TZ(from_unixtime(comment_date), '+00:00', '+07:00')) = CURRENT_DATE"; 
```

...我得到一个数字输出，但数字不正确。我尝试了很多组合，包括 +08:00、-05:00，但似乎没有任何效果。

基本上我要问的是我必须将哪些值作为这两个数字，以获得正确的结果？我网站上的所有其他内容都可以在我的时区 (CST) 中正确显示，我只遇到了这个查询的问题。

如果有帮助，我的服务器的 IP 是 50.116.13.130。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:28:38.453

我终于通过使用解决了

```
 $timezone1 = '+12:00';
  $timezone2 = '-04:00'; 
```

和

```
 DATE(CONVERT_TZ(from_unixtime(comment_date), '$timezone1', '$timezone2')) = CURRENT_DATE"; 
```

为了让我8小时的时差工作。它可以工作，尽管违反所有逻辑，因为我的服务器时间是 UTC（+0 小时），输出应该是 CST（+8 小时）。所以基本上

```
 $timezone1 = '+00:00';
  $timezone2 = '+08:00'; 
```

应该得到我想要的结果，但它没有。我不知道为什么，但我很高兴我的第一个代码引用现在有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:31:05.247

Unix 时间戳始终采用 UTC，因此您的服务器设置为哪个时区并不重要。

但是，您必须确保使用正确的时区转换“comment_date”的字符串表示形式：

```
// Use the timezone you are in (CST). If you're having user
// submissions from all over the world, use the timezone
// from where the submission came from.
$timezone = new DateTimeZone("CST"); 
$date = new DateTime("2012-01-02", $timezone);
$unixTimestamp = $date->getTimestamp(); 
```

另一个重要的事情是注意“2012-01-02”将被转换为“2012-01-02 00:00:00”。和“2012-01-02 00:00:00”！=“2012-01-02 04:03:27”。

所以当你想要今天的日期时，你应该查询一个间隔。

```
$today = new DateTime(); // Get current time
$today->setTimezone(new DateTimeZone("CST"));
$today->setTime(0,0,0); // Set time to midnight of today (depends on your definition of today, could also be -24h

$sql = "[..] WHERE comment_date > ".$today->getTimestamp(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T07:32:14.100

请注意，除非您使用 JavaScript，否则您的位置并不是很重要。重要的是服务器位置。因此，如果您在 CST 中，并且您的服务器在 EST 中，那么您所有操作的时间都将在 EST 中，因为 PHP 是服务器端。

我认为最好的方法是使用 UTC 时间。您使用以下命令将服务器重置为 UTC：

```
date_default_timezone_set("UTC"); 
```

设置 UTC 后，您的所有时间现在都从 UTC 重置为 0 偏移，并且更容易处理。我个人使用以下函数在 PHP 和 MySQL 日期之间切换

```
$mysqldate = date( 'Y-m-d H:i:s', $phpdate );
$phpdate = strtotime( $mysqldate ); 
```

但同样，您可以使用时间戳。这篇[文章](http://www.richardlord.net/blog/dates-in-php-and-mysql)可能会为你提供一些答案

我不确定我是否回答了你的问题，但我希望这些是对你的指导。

干杯。

# objective-c - 向下滚动时在表格视图上附加数据

> ID：13206391
> 
> 赞同：1
> 
> 时间：2012-11-03T05:46:00.433
> 
> 标签：objective-c, ios, uitableview

我正在将数据解析为表格视图，服务器页面中有数十万个名称，我有两个问题

1.  首先我做了（在php程序员的帮助下）在服务器端的不同页面中写入所有服务器数据，我在表格视图下放置了一个“查看更多”按钮。当用户点击它时，页码将增加到一并且第二页上的数据显示在表格视图中。那时我正在丢失表格视图上的所有第一页数据。单击“查看更多”时，如何将以前的数据附加到表格视图中。

2.  如果我在服务器端的单页中写入所有名称，我可以将数据调用到 TableView 而不出现内存问题（就像前 10 行一样，当我向下滚动时，所有其他数据都在附加而没有内存问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T07:00:11.983

@amar 我认为它可能与 **UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];**

我不确定，请检查并澄清...

# iphone - 带有 RGB 的 UIButton 文本颜色

> ID：13206395
> 
> 赞同：2
> 
> 时间：2012-11-03T05:46:42.757
> 
> 标签：iphone, uibutton

我正在`UIButton`根据以下提到的代码块以编程方式创建一个。我需要为按钮的文本分配 RGB 颜色。它不适用。有什么特别的原因吗？

```
 CGRect buttonFrame = CGRectMake(353, y, 607, 30);
    UIButton *button = [[UIButton alloc] initWithFrame: buttonFrame];
    button.tag = event.eventId;
    [button setTitle:event.eventName forState: UIControlStateNormal];
     button.titleLabel.font=[UIFont fontWithName:@"arial" size:14];
    [button addTarget:self action:@selector(btnSelected:) forControlEvents:UIControlEventTouchUpInside];

    [button setTitleColor:[UIColor colorWithRed:10.0 green:20.0 blue:100.0 alpha:1.0] forState: UIControlEventAllEvents];
    [self.contentView addSubview:button]; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T05:48:51.337

RGB 值需要在 0.0 到 1.0 的范围内。将每个数字除以 255.0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T05:48:36.323

这是你的理由：

**写**

```
 [button setTitleColor:[UIColor colorWithRed:10.0/255.0 green:20.0/255.0 blue:100.0/255.0 alpha:1.0] forState: UIControlEventAllEvents]; 
```

**而**不仅仅是

`[button setTitleColor:[UIColor colorWithRed:10.0 green:20.0 blue:100.0 alpha:1.0] forState: UIControlEventAllEvents];`

享受编程..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T10:29:45.837

```
// no need to alloc UIButton.. 

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(353, y, 607, 30);
button.tag = event.eventId;
[button setTitle:event.eventName forState: UIControlStateNormal];
 button.titleLabel.font=[UIFont fontWithName:@"arial" size:14];
[button addTarget:self action:@selector(btnSelected:) forControlEvents:UIControlEventTouchUpInside];

[button setTitleColor:[UIColor colorWithRed:10.0/255.0 green:20.0/255.0 blue:100.0/255.0 alpha:1.0] forState:UIControlStateNormal];
[button setTitleColor:[UIColor whiteColor] forState:UIControlStateHighlighted];
[button setTitleColor:[UIColor whiteColor] forState:UIControlStateSelected];

[self.contentView addSubview:button]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T07:39:35.560

根据[Apple 文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIColor_Class/Reference/Reference.html#//apple_ref/occ/clm/UIColor/colorWithRed%3agreen%3ablue%3aalpha%3a)，颜色值的范围从 0.0 到 1.0，因此您应该将当前值除以它们的最大可能值，通常是 255，如下所示：

```
[button setTitleColor:[UIColor colorWithRed:10.0/255.0 green:20.0/255.0 blue:100.0/255.0 alpha:1.0] forState: UIControlEventAllEvents]; 
```

# css - 如何在 webkit 浏览器上为 :before 之类的伪元素设置动画？

> ID：13206397
> 
> 赞同：3
> 
> 时间：2012-11-03T05:47:06.630
> 
> 标签：css, webkit, css-transitions

> **可能重复：**
> [伪元素（：after，：before）上的 CSS3 过渡不起作用？](https://stackoverflow.com/questions/10578424/css3-transitions-on-pseudo-elements-after-before-not-working)

我的 CSS 过渡只在 Firefox 中有效……不知道为什么它在 chrome、safari 或 Opera 中没有动画效果。

这是一个小提琴：http: [//jsfiddle.net/chovy/HUDuy/](http://jsfiddle.net/chovy/HUDuy/)

HTML：

```
<ol class="steps">
        <li>Foo</li>
        <li>Bar</li>
        <li>Baz</li>
</ol> 
```

CSS：

```
ol.steps {
  list-style-type: none;
  counter-reset: step-counter;
  padding-left: 60px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

ol.steps li {
  position: relative;
  padding: 10px 20px;
  height: 50px;
}

ol.steps li:before {
  content: counter(step-counter, decimal);
  counter-increment: step-counter;
  position: absolute;
  left: -50px;
  top: 10px;
  border: 1px solid #ccc;
  width: 45px;
  height: 45px;
  line-height: 45px;
  border-radius: 50px;
  background: #f9f9f9;
  text-align: center;
  font-size: 28px;
  color: #aaa;
  -webkit-transition: all 0.25s ease-in-out;
  -moz-transition: all 0.25s ease-in-out;
  -o-transition: all 0.25s ease-in-out;
  -ms-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
}

ol.steps li:hover:before {
  width: 60px;
  height: 60px;
  line-height: 60px;
  left: -57px;
  top: 2px;
  -webkit-transition: all 0.5s ease-in-out;
  -moz-transition: all 0.5s ease-in-out;
  -o-transition: all 0.5s ease-in-out;
  -ms-transition: all 0.5s ease-in-out;
  transition: all 0.5s ease-in-out;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T13:44:52.460

正如[这里](https://stackoverflow.com/a/10578718/295264)所说：

WebKit (Chrome, Safari) 不支持伪元素的过渡。

*   [https://bugs.webkit.org/show_bug.cgi?id=23209](https://bugs.webkit.org/show_bug.cgi?id=23209)
*   [http://code.google.com/p/chromium/issues/detail?id=54699](http://code.google.com/p/chromium/issues/detail?id=54699)

Firefox 确实如此。

# perl - Test::DBIx::Class 的 schema.conf 是什么样的？

> ID：13206400
> 
> 赞同：1
> 
> 时间：2012-11-03T05:47:40.217
> 
> 标签：perl, testing, dbix-class

[Test::DBIx::Class](https://metacpan.org/module/Test%3a%3aDBIx%3a%3aClass)的概要说明：

> 是的，它看起来像很多样板，但是合理的默认值已经到位（上面的代码示例显示了大多数现有默认值）并且可以从中央文件加载配置数据。因此，您的“现实生活”示例将看起来更接近（假设您将所有测试配置放在标准位置，“t/etc/schema.conf”：

除此之外，我似乎找不到对 t/etc/schema.conf 的引用，甚至找不到它的外观示例。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:14:44.323

查看 t(est) 目录中的示例。它使用 Config::Any 加载文件，因此您可以使用您选择的配置文件格式。Doc补丁欢迎澄清这一点！

# javascript - 从外部门户网站将参数传递给 GWT nocache.js

> ID：13206402
> 
> 赞同：1
> 
> 时间：2012-11-03T05:48:04.860
> 
> 标签：javascript, gwt, methods, native

我创建了一个`GWT`根容器 ID 为“widgetContainer”的小部件，相应的编译文件是 gwtwidget.nocache.js。我已经创建了这个小部件的 war 文件并托管在本地服务器 localhost:8888/gwtwidget 中。

我创建了另一个jsp应用程序，index.jsp如下：（将`GWT`模块集成到`JSP`应用程序中）

```
<html>
<head>
    <script type="text/javascript" language="javascript" src="http://localhost:8888/gwtwidget/gwtwidget/gwtwidget.nocache.js?appId=461333815262909&appId=461333815262909&appId=461333815262909&appId=461333815262909"></script>
</head>
<body>
    <div id="widgetContainer"></div>
</body>
</html> 
```

我想从应用程序中检索通过 nocache.js 文件传递​​的参数`JSP`。为此，我正在使用代码

```
public static native String getParameter( String moduleName, String parameterName ) /*-{
var search = "/" + moduleName + ".nocache.js";
var scripts = $doc.getElementsByTagName( "script" );
for( var i = 0; i < scripts.length; ++i ) {
    if( scripts[ i ].src != null && scripts[ i ].src.indexOf( search ) != -1 ) {
        var parameters = scripts[ i ].src.match(/\w+=\w+/g);
        for( var j = 0; j < parameters.length; ++j ) {
            var keyvalue = parameters[ j ].split( "=" );
            if( keyvalue.length == 2 && keyvalue[ 0 ] == parameterName ) {
                return unescape( keyvalue[ 1 ] );
            }
        }
    } 
}
return null;
}-*/; 
```

但无法将参数值获取到`GWT`小部件中。有人可以帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:55:00.687

如果您想使用查询字符串传递参数，这并不简单。有办法做到这一点。您可以参考以下帖子：

1.  [将参数传递给 JavaScript 文件](https://stackoverflow.com/questions/2190801/passing-parameters-to-javascript-files)
2.  [通过 SRC 属性将 vars 传递给 JavaScript](https://stackoverflow.com/questions/1017424/pass-vars-to-javascript-via-the-src-attribute)

还有一种方法，我觉得比较简单。您可以在 jsp 文件中设置 cookie。您可以在 GWT 模块中读取 cookie。

```
<html>
<head>
<script type="text/javascript">
    document.cookie="appId=461333815262909"
</script>
    <script type="text/javascript" language="javascript" src="http://localhost:8888/gwtwidget/gwtwidget/gwtwidget.nocache.js"></script>
</head>
<body>
    <div id="widgetContainer"></div>
</body>
</html> 
```

您可以通过以下方式访问 GWT 模块中的 cookie 'appId'：

```
String param = Cookies.getCookie("appId"); 
```

# ruby-on-rails - Rails：如何在编辑/更新后让 ajax 刷新索引？

> ID：13206406
> 
> 赞同：1
> 
> 时间：2012-11-03T05:48:44.623
> 
> 标签：ruby-on-rails, ajax, jquery, ruby-on-rails-3.2

**来自索引页面的**CRUD 。****

 **我知道有一些宝石可以让这件事变得简单，但如果可能的话，我想避免。

在 Index.html.erb
上 - 在 index.html.erb 上将 _newsfeeds 部分渲染到 <ul id="feedsNews" >
- 部分表单（:Create 和 :Edit 使用相同的表单）
- 当用户在新闻源上单击“编辑”按钮时，我将部分表单附加到新闻源

问题
正在编辑/更新更改...不幸的是，我似乎无法获得 ajax:success 以重新加载 index.html.erb 上的 _newsfeeds 部分。如果这是愚蠢的事情，我道歉......

**NEWSFEEDS_CONTROLLER**

```
 def index
      @newsfeeds = Newsfeed.all
      @newsfeed = Newsfeed.new
      @newsfeeds = Newsfeed.order("position") #for Sortable

      respond_to do |format|
        format.html # index.html.erb
        format.json { render json: @newsfeeds }
        format.js
      end
    end

    def update
      @newsfeed = Newsfeed.find(params[:id])

      respond_to do |format|
        if @newsfeed.update_attributes(params[:newsfeed])
          format.html { redirect_to newsfeeds_url, notice: 'Updated' }
          format.json { head :no_content }
        else
          format.html { render action: "edit" }
          format.json { render json: @newsfeed.errors, status: :unprocessable_entity }
        end
      end
    end 
```

**index.html.erb**

```
 <div>
        <div id="spinner" style="display:none;"></div>
        <ul id="feedsNews" class="showList" data-update-url="<%= sort_newsfeeds_url %>" >
            <%= render :partial => @newsfeeds %>
        </ul>
    </div> 
```

**index.js.erb**

```
 $('#<%= dom_id(@newsfeed, :edit) %>')
        .bind('ajax:send', function(){
           $('#spinner').show();
        })
        .bind('ajax:success', function() {
           $('#spinner').hide();
           $('#feedsNews').innerHTML ('<%= escape_javascript(render(@newsfeeds)) %>')
        }) 
```

任何帮助将非常感激。

**- - - - - - - - 更新 - - - - - - - - - -**

把它改成这个，它可以工作......排序...... index.js.erb 似乎在更新操作重定向之前触发，所以萤火虫给了我一个无尽的'spinner' index.js.erb获取请求

```
 $.ajax({
    complete: function() {
    $('#feedsNews').html('<%= escape_javascript(render :partial => @newsfeeds) %>');
    alert('Changes Saved!');
} 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:14:32.887

我不认为让 Rails 做这种工作是个好主意（通过 ajax 刷新部分）。因为你必须同时编写 Ruby 和 js 代码。

这项工作只能由 jQuery 完成。例如发送 ajax 请求，然后`update action`在回调中调用，例如

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```**

# string - 使用 Suffix 数组的最小旋转——重访

> ID：13206408
> 
> 赞同：0
> 
> 时间：2012-11-03T05:48:52.317
> 
> 标签：string, algorithm, suffix-array

考虑一个长度为 n (1 <= n <= 100000) 的字符串。确定其最小字典旋转。例如，字符串“alabala”的旋转是：

```
alabala

labalaa

abalaal

balaala

alaalab

laalaba

aalabal

and the smallest among them is “aalabal”. 
```

这个问题已经在 Stack 上被问过，但我正在问它，因为没有明确的解决方案可用。到目前为止，我取得了以下进展。
1.取S，concat with reverse(S)..let P=S+reverse(S)
2.构造上述字符串P的后缀数组

现在我的问题是如果我选择后缀数组中的第一个字符串`size> strlen(S)`那么这个字符串大小`strlen(S)`的前缀将是给定字符串 S 的最小旋转。

我的结论正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:31:27.573

不，一般来说这是错误的（如果我理解正确的话）。当然，它适用于您的回文输入。

请参阅 python 解释器的以下输出，其中输入字符串包括`'alabala'`和`'alabatta'`。（输出添加了一些空格和换行符。）在第二部分中，第一个比 S 长的后缀的前部是不允许的，即不是 S 的旋转。有关有效的方法，请参见第三部分。

```
>>> s = 'alabala'; p = s + ''.join(reversed(s))
>>> sorted([p[i:] for i in range(len(p))])
['a', 'aalabala', 'abala', 'abalaalabala', 'ala', 'alaalabala',
 'alabala', 'alabalaalabala', 'bala', 'balaalabala', 'la',
 'laalabala', 'labala', 'labalaalabala']

>>> s = 'alabatta'; p = s + ''.join(reversed(s))
>>> sorted([p[i:] for i in range(len(p))])
['a', 'aattabala', 'abala', 'abattaattabala', 'ala', 'alabattaattabala',
 'attaattabala', 'attabala', 'bala', 'battaattabala', 'la',
 'labattaattabala', 'taattabala', 'tabala', 'ttaattabala', 'ttabala']

>>> s = 'alabatta'; p = s + s
>>> sorted([p[i:] for i in range(len(p))])
['a', 'aalabatta', 'abatta', 'abattaalabatta', 'alabatta', 
 'alabattaalabatta', 'atta', 'attaalabatta', 'batta', 'battaalabatta',
 'labatta', 'labattaalabatta', 'ta', 'taalabatta', 'tta', 'ttaalabatta'] 
```

# c# - 为应用程序用户分配角色

> ID：13206409
> 
> 赞同：7
> 
> 时间：2012-11-03T05:48:54.943
> 
> 标签：c#, wpf, wcf, mvvm, user-roles

与所有业务线应用程序一样，一个应用程序可能有多个`Users`，其中一些`Roles`分配给了它们。我们最近转移到 WPF MVVM 架构，并寻找为每个登录用户分配角色的最佳方式。互联网上漂浮着许多术语，例如身份验证、角色管理器、登录服务等，但我不确定使用哪个术语。

**这是我们所拥有的：**

在单个项目中开发的小型企业应用程序（包含 20 个表单）。我们使用`MVVM`架构，`LINQ-to-SQL`如 DataAccess 和`Model`，with`Repository pattern`和`Unit Of Work`。

**我们想要什么：**

有不同的表格，每个表格都有*插入*、*更新*、*删除*、*打印*等操作。我们想要的是根据他的角色限制登录用户 - 他可以执行的任务。即例如管理员可以自由地对应用程序做“*任何事情*”，而其他一些用户可能不允许查看某些表单或执行某些操作（即更新或删除）。

那么我们如何才能做到这一点；什么样的服务可以用于在桌面 LOB 应用程序中使用 MVVM 架构来执行这个完整的机制。技术术语或教程链接会有所帮助。

我希望我很清楚，并提前非常感谢你。

**编辑：** 我浏览了很多论坛和文章，但它们都专注于 ASP.NET。仍然找不到在 WPF 中分配角色的具体实现。并且 ASP.NET 上的源代码不符合 WPF。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T07:36:51.350

我建议围绕[ASP.NET 成员资格](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)和[角色管理](http://msdn.microsoft.com/en-us/library/t32yf0a9.aspx)提供程序构建一个解决方案*（尽管对您的原始问题进行了编辑）*。它们在 MSDN 上有很好的记录并且非常灵活。

以下是一些链接，希望可以帮助您进行 WPF 集成：

*   [可以在 Windows 应用程序中使用 asp.net 成员资格提供程序吗？](https://stackoverflow.com/questions/444230/can-you-use-the-asp-net-membership-provider-in-a-windows-application)
*   [WPF 会员 API 管理工作室](http://wpfmembershipadmin.codeplex.com/)

另外，您提到您正在使用 MVVM；我建议拥有一个集中式授权类实例的静态类或其他可全局访问的属性（请参阅：[使用全局变量的 WPF 应用程序）。](https://stackoverflow.com/questions/1161459/wpf-application-using-a-global-variable)然后可以从应用程序中的任何位置（即在 ViewModel 中）调用此类的方法，以根据授予用户的任何权限启用/禁用或显示/隐藏适当的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T06:49:44.300

看看微软的安全应用程序块。我已经将它应用到一个听起来和你的有点相似的应用程序中。权限可以存储在 Active Directory、SQL 甚至平面文件中。

[http://msdn.microsoft.com/en-us/library/ff664771(v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/ff664771(v=pandp.50).aspx)

[http://msdn.microsoft.com/en-us/library/ff664559(v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/ff664559(v=pandp.50).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:24:45.110

我要做的是在客户端层创建一个包含当前用户信息（角色、权限等）的静态类。例如，这些权限可以通过枚举或类似的东西建模，然后在每个 ViewModel 中，您可以定义需要哪些枚举值，例如执行查询（查看记录）或执行保存或编辑命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T17:28:50.967

我只需在每个命令中放置一个RequiredRole 属性，并添加一个CanExecute 覆盖，以检查当前用户是否有权执行此操作。这对于命令来说已经足够了。

另一方面，必须在您的屏幕指挥/选项卡主机/...中检查显示表单的权限

使用 Linq to Sql 获取角色和每个 suer 角色，就结束了。我不会为这样一个简单的任务集成外部代码而烦恼。

如果您想让它更通用，请在您的数据库中保留一个链接命令/表单和角色的表，并使用反射来授权用户。

我希望你会发现这很有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T18:09:26.233

我们使用 AD 来确定用户所属的角色。然后检查任何角色是否具有正确的权限。但是，您可以使用`roles`and`userroles`表自己完成这部分。

使用这两种方法中的任何一种，用户都将处于一组角色中。这是第一步。

然后，您需要在操作点验证用户是否具有权限。我们的菜单结构是从数据库动态构建的，所以我有一个表，`MenuItems`然后是一个定义`RoleMenuAvailability`.

第一个有一个`Id`, an `order`, the和 the `Title`,以及其他一些字段。`Image source``navigation target`

第二个有`RoleId`和`menuId`以及是否可编辑。所以行的存在意味着它的可读性（如果是导航目标，即表单）然后从数据库中读入菜单项：

```
var usersItems =
    items.Where(i => i.RoleMenuAvailabilities
                    .Any(r => domainUser.IsInDomainRole(r.UserRole.Description)))
         .OrderBy(m => m.MenuOrder); 
```

`UserRole.Description`在我们的例子中是 AD 角色的名称，并且`IsInDomainRole`是一个辅助函数：

```
public bool IsInDomainRole(string role)
{
    var regex = new Regex("[^\\\\]+$");
    string name = this.Name ?? string.Empty;
    string domainRole = regex.Replace(name, role);
    return this.IsInRole(domainRole);
} 
```

`rolemenuavailability`如果需要，可以扩展该表以在其上添加用于删除、更新、添加等的附加标志。

我们还没有完全实现下一个阶段，但目的是我们将针对用户缓存用户权限。我们的 ViewModel 基类具有对用户的引用，因此可以调用该`CanEdit(int permissionId)`函数。然后，本质上控制可见性或命令的属性`CanExecute`可以访问用户权限，并确定他们是否具有任何操作的权限。

它仍在进行中，因此有兴趣了解这里提出的其他建议。

# c# - 有任何编辑器可以直观地修改 Wix 模板吗？

> ID：13206410
> 
> 赞同：1
> 
> 时间：2012-11-03T05:48:58.417
> 
> 标签：c#, .net, deployment, wix, windows-installer

我已经尝试过 wixedit 和 sharp Develop，据我所知，它们不允许您使用设计师直观地修改预制模板。它们只允许您创建自己可以设计的自定义对话框。

所以我想知道是否有任何编辑器可以直观地修改这些模板的设计，尤其是带有点击编辑器的 mondo 模板。

我也尝试过 SharpSetup，它看起来很有希望如何在 Visual Studio 中设计界面，尽管由于我对编辑 wix 知之甚少，我很难想出 wix 代码以使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:22:41.857

您可以使用这些工具来执行此操作，您只需要从 codeplex 网站下载源代码，如果要自定义文件，请找到源代码。您需要做的是更改您修改的文件的 ID，否则如果您仍需要引用同一 dll 中的依赖项，则会出现编译错误。

# devise - 设计的多重角色

> ID：13206411
> 
> 赞同：0
> 
> 时间：2012-11-03T05:49:11.723
> 
> 标签：devise, ruby-on-rails-3.2

我已经看到了用于为多个角色配置设计的链接[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)。`devise`但我对如何识别一个特定的事物`user`是一个事实感到困惑`admin`？请解释一下，因为管理员没有任何注册过程。我也是新手，`ror`所以请解释一下为多个角色配置设备的所有步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T10:15:19.893

CanCan 是迄今为止您最好的 ruby​​ 角色解决方案，我建议您查看[Tony 的使用 Devise/CanCan](http://www.tonyamoyal.com/2010/07/28/rails-authentication-with-devise-and-cancan-customizing-devise-controllers/)来创建基于角色的系统。我花了一点时间才弄清楚如何解决它，但现在它对我来说很神奇。

第二种方法是

我会推荐一个榜样。在这种情况下，用户会`have_and_belong_to_many :roles`，而角色会`have_and_belong_to_many :users`。这在角色和用户之间创建了多对多关系。有关关联的更多信息，请参阅[此](http://guides.rubyonrails.org/association_basics.html)RailsGuide。

在您的 CanCan ability.rb 文件中，您可以执行以下操作（我只是在猜测您的设置）：

```
 can :manage, Brand do |brand|
  user.has_role?("brand_manager") && user.brands.include?(brand)
end 
```

在您的 user.rb 文件中，编写如下内容会很有帮助：

```
def has_role?(name)
  role = Role.find_by_name(name)
  (self.roles.include?(role)) ? (return true) : (return false)
end 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-01T13:17:44.290

对于使用**Rails 5**、[Devise](https://github.com/plataformatec/devise)和[CanCanCan](https://github.com/CanCanCommunity/cancancan)的更新解决方案（CanCan 看起来不再受支持），请查看：

1.  [RAILS 5：具有 3 种角色类型的用户帐户 - DEVISE、RAILS_ADMIN、CANCANCAN](https://codepany.com/blog/rails-5-user-accounts-with-3-types-of-roles-devise-rails_admin-cancancan/)

这是使用 Rails [Pundit](https://github.com/varvet/pundit)和*has_secure_password*的替代解决方案：

2.  [在 Ruby on Rails 中实现角色和权限](http://culttt.com/2016/01/20/implementing-roles-and-permissions-in-ruby-on-rails/)

使用 CanCanCan 的优势在于它将授权与用户角色分离，而许多人发现 Pundit 更易于使用侵入性更小。两者都很好。

# android - Android - 使用搜索栏更改 LED 亮度

> ID：13206412
> 
> 赞同：2
> 
> 时间：2012-11-03T05:49:25.140
> 
> 标签：android, eclipse, sdk

我制作了一个手电筒应用程序，可以通过按钮打开相机的 LED 灯。如果可能的话，我希望能够用搜索栏改变 LED 灯的亮度。

如果这有帮助，这是我的按钮中的代码：

```
public class FlashLightActivity extends Activity {

private boolean isLighOn = false;
private Camera camera;
private Button button;

@Override
protected void onStop() {
    super.onStop();
    if (camera != null) {
        camera.release();
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    button = (Button) findViewById(R.id.buttonFlashlight);
    Context context = this;
    PackageManager pm = context.getPackageManager();

    if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        Log.e("err", "Device has no camera!");
        return;
    }

    camera = Camera.open();
    final Parameters p = camera.getParameters();

    button.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {

            if (isLighOn) {
                Log.i("info", "torch is turn off!");
                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                camera.setParameters(p);
                camera.stopPreview();
                isLighOn = false;
            } else {
                Log.i("info", "torch is turn on!");
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                camera.setParameters(p);
                camera.startPreview();
                isLighOn = true;
            }
        }
    });
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:56:21.187

检查在[增加/减少图像亮度中给出的示例](http://xjaphx.wordpress.com/2011/06/22/image-processing-brightness-over-image/)

并在搜索栏进度更改上执行如下所示

```
 int brightness;
 SeekBar seekbarbrightness=(SeekBar)findViewById(R.id.seekBar1);
 seekbarbrightness.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

         @Override
         public void onStopTrackingTouch(SeekBar arg0) {
          // TODO Auto-generated method stub

         }

         @Override
         public void onStartTrackingTouch(SeekBar arg0) {
          // TODO Auto-generated method stub

         }

         @Override
         public void onProgressChanged(SeekBar arg0, int progress, boolean arg2) {

             // TODO Auto-generated method stub

             brightness=progress;
             Bitmap bitmap=doBrightness(originalbitmap,brightness);
             imageView.setImageBitmap(bitmap);
         }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T16:43:28.117

据我自己的搜索所见（我还想为不同的应用程序控制相机 LED 的亮度），只能使用相机界面使用手电筒模式关闭或打开 LED。

现在，还可以在 Java 级别编写模拟 PWM（脉冲宽度调制）以在 TORCH_MODE 和 OFF 之间切换。但是我这样做的测试产生了太多的闪烁。

然后，我还尝试使用 NDK 在 Native 级别查看类似的方法，但似乎与相机（和 LED）的唯一接口是通过 Java 层。

### 2013-10-05 更新

下面是用于相机 LED 的 PWM 控制的 Java 代码。它可以工作，但闪烁使其通常无法使用。可能还有更多可以添加的优化，但不确定它们是否会对闪烁产生重大影响。

### 2013-12-15 更新

根据 Class Stacker 的反馈，我已经删除了无法实现的线程优先级，并且还改进了 PWM 延迟以单独使用 Thread.sleep 函数。测试显示略有改善，但闪烁仍然存在。请注意，可以减少睡眠值，但相机 API 调用需要相当长的时间才能返回，因此减少 PWM 睡眠不会对闪烁产生任何影响。

```
package com.whimsicalotter.ledpwmexample;

import java.util.List;

import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.util.Log;

public class LedPwmController {

private static String TAG = "LedPwmController";

private Camera m_camera = null;
private boolean m_torchSupported = false;

private LedPwmThread m_ledPwmThread = null;

private final int m_pwmMax = 10;
private int m_pwmValue = m_pwmMax;

public void init() {
    initCamera();

    // Start the thread
    m_ledPwmThread = new LedPwmThread();
    m_ledPwmThread.setRunning(true);
    m_ledPwmThread.start();
}

public void shutdown() {
    // Join the thread
    boolean retry = true;

    if (m_ledPwmThread != null) {
        m_ledPwmThread.setRunning(false);

        while (retry) {
            try {
                m_ledPwmThread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
    }

    destroyCamera();
}

/**
 * Set the LED brightness 0.0f to 1.0f.
 * @param brightness
 */
public void setLedBrightness(float brightness) {
    if( brightness < 0.0f ) brightness = 0.0f;
    if( brightness > 1.0f ) brightness = 1.0f;

    // Now convert to integer
    m_pwmValue = (int) Math.floor((brightness * (float)m_pwmMax));

    Log.i(TAG, "LED Brightness set:" + brightness + " == " + m_pwmValue);
}

private void initCamera() {
    if( m_camera == null ) {
        Log.i(TAG, "Opening Camera...");

        m_camera = Camera.open();

        m_torchSupported = isTorchSupported();

        Log.i(TAG, "Camera is open. Torch Supported = " + m_torchSupported);
    }
}

private void destroyCamera() {
    // switch off led
    ledOff();

    if( m_camera != null ) {
        Log.i(TAG, "Releasing Camera...");
        m_camera.release();
        m_camera = null;
    }
}

private boolean isTorchSupported() {
    if( m_camera != null ) {
        Parameters params = m_camera.getParameters();
        List<String> flashmodes = params.getSupportedFlashModes();
        if( flashmodes == null ) {
            return false;
        }

        return flashmodes.contains( Parameters.FLASH_MODE_TORCH );
    }

    return false;
}

private void ledOn() {
    if( !m_torchSupported ) {
        return;
    }

    if( m_camera != null ) {
        Parameters params = m_camera.getParameters();
        params.setFlashMode( Parameters.FLASH_MODE_TORCH );
        m_camera.setParameters(params);
    }
}

private void ledOff() {
    if( !m_torchSupported ) {
        return;
    }

    if( m_camera != null ) {
        Parameters params = m_camera.getParameters();
        params.setFlashMode( Parameters.FLASH_MODE_OFF );
        m_camera.setParameters(params);
    }
}

private class LedPwmThread extends Thread {

    private boolean m_running = false;

    public void setRunning(boolean running) {
        m_running = running;
    }

    @Override
    public void run() {
        if( m_camera != null && m_torchSupported ) {
            Parameters params = m_camera.getParameters();

            while( m_running ) {

                //ledOn();
                if( m_pwmValue > 0 ) {
                    params.setFlashMode( Parameters.FLASH_MODE_TORCH);
                    m_camera.setParameters(params);

                    try {
                        Thread.sleep(10*m_pwmValue,0);
                    } catch (InterruptedException e) {
                    }
                }

                //ledOff();
                if( m_pwmValue < m_pwmMax ) {
                    params.setFlashMode( Parameters.FLASH_MODE_OFF );
                    m_camera.setParameters(params);

                    try {
                        Thread.sleep(10*(m_pwmMax-m_pwmValue),0);
                    } catch (InterruptedException e) {
                    }   
                }

            }
        }
    }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T12:51:08.903

onCreate 方法中的简单代码如下：

```
SeekBar brightnesSseeker;   
brightnesSseeker = (SeekBar) findViewById(R.id.brightnesSseeker);

    brightnesSseeker
            .setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
                public void onStopTrackingTouch(SeekBar seekBar) {
                    // Nothing handled here
                }

                public void onStartTrackingTouch(SeekBar seekBar) {
                    // Nothing handled here
                }

                public void onProgressChanged(SeekBar seekBar,
                        int progress, boolean fromUser) {
                    // Set the minimal brightness level
                    // if seek bar is 20 or any value below
                    if (progress <= 20) {
                        // Set the brightness to 20
                        screenBrightness(20);
                    } else {
                        // Set brightness variable based on the progress bar
                        screenBrightness(progress);
                    }
                    stobeVariable=progress*10;
                }
            }); 
```

在课堂上写下这个函数：

```
private void screenBrightness(double newBrightnessValue) {
    /*
     * WindowManager.LayoutParams settings = getWindow().getAttributes();
     * settings.screenBrightness = newBrightnessValue;
     * getWindow().setAttributes(settings);
     */
    WindowManager.LayoutParams lp = getWindow().getAttributes();
    float newBrightness = (float) newBrightnessValue;
    lp.screenBrightness = newBrightness / (float) 255;
    getWindow().setAttributes(lp);
} 
```

你也可以看到这个链接：这是[一个链接](https://stackoverflow.com/questions/7845458/how-could-you-increase-the-screen-brightness-in-android-using-a-seek-bar)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T05:59:04.197

我为你的问题举了一个完整的例子：

主要活动 ：-

```
public class AndroidScreenBrightness extends Activity {
 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     SeekBar BackLightControl = (SeekBar)findViewById(R.id.backlightcontrol);
     final TextView BackLightSetting = (TextView)findViewById(R.id.backlightsetting);

     BackLightControl.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener(){

 @Override
 public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) {
  // TODO Auto-generated method stub
  float BackLightValue = (float)arg1/100;
  BackLightSetting.setText(String.valueOf(BackLightValue));

  WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
  layoutParams.screenBrightness = BackLightValue;
  getWindow().setAttributes(layoutParams);

 }

 @Override
 public void onStartTrackingTouch(SeekBar arg0) {
  // TODO Auto-generated method stub

 }

 @Override
 public void onStopTrackingTouch(SeekBar arg0) {
  // TODO Auto-generated method stub

 }});
 }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >
<TextView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="@string/hello"
   />
<TextView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="Set BackLight of the App"
   />
<SeekBar
   android:id="@+id/backlightcontrol"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:layout_margin="10px"
   android:max="100"
   android:progress="50"
   />
<TextView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:id="@+id/backlightsetting"
   android:text="0.50"
   />
</LinearLayout> 
```

# windows - 为什么苗条的读写器独占锁的性能优于共享锁？

> ID：13206414
> 
> 赞同：8
> 
> 时间：2012-11-03T05:49:33.983
> 
> 标签：windows, multithreading

*我已经使用来自Windows Via C/C++*的代码在 Windows 7 下测试了超薄读写器锁的性能。

结果让我感到惊讶的是，独占锁定性能比共享锁定性能好。这是代码和结果。

```
unsigned int __stdcall slim_reader_writer_exclusive(void *arg)
{
    //SRWLOCK srwLock;
    //InitializeSRWLock(&srwLock);

    for (int i = 0; i < 1000000; ++i) {
        AcquireSRWLockExclusive(&srwLock);
        g_value = 0;
        ReleaseSRWLockExclusive(&srwLock);
    }
    _endthreadex(0);
    return 0;
}

unsigned int __stdcall slim_reader_writer_shared(void *arg)
{

    int b;
    for (int i = 0; i < 1000000; ++i) {
        AcquireSRWLockShared(&srwLock);
        //b = g_value;
        g_value = 0;
        ReleaseSRWLockShared(&srwLock);
    }
    _endthreadex(0);
    return 0;
} 
```

`g_value`是一个全局 int volatile 变量。

![在此处输入图像描述](../Images/4d5a5569a3bdd6115e30a206fabafbce.png)

你能解释一下为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-04T04:58:19.760

对于小型通用锁（如 SRWLocks，它只有一个指针大小），这是一个非常常见的结果。

**要点：**如果你有一个非常小的受保护的代码部分，这样锁本身的开销可能占主导地位，排他锁比共享锁更适合使用。

此外，Raymond Chen 关于 g_Value 争论的论点也是正确的。如果在这两种情况下都读取而不是写入 g_Value，您可能会注意到共享锁的好处。

**细节：**

SRW 锁是使用单个指针大小的原子变量实现的，该变量可以采取多种不同的状态，具体取决于低位的值。这些位的使用方式的描述超出了此评论的范围——状态转换的数量非常多——所以，我将只提及您在测试中可能遇到的几个状态。

**Initial lock state:** (0, ControlBits:0) -- SRW 锁从所有位设置为 0 开始。

**共享状态：** (ShareCount: n, ControlBits: 1) -- 当没有冲突的排他获取并且锁保持共享时，共享计数直接存储在锁变量中。

**独占状态：** (ShareCount: 0, ControlBits: 1) -- 当没有冲突的共享获取或独占获取时，锁有一个低位设置，没有别的。

**竞争状态示例：** (WaitPtr:ptr, ControlBits: 3) -- 当发生冲突时，等待锁的线程使用分配在等待线程堆栈上的数据形成队列。lock 变量存储指向队列尾部的指针，而不是共享计数。

在此方案中，当您不知道初始状态时尝试获取独占锁是对锁定字的单次写入，以设置低位并检索旧值（这可以在 x86 上使用 LOCK BTS 指令完成）。如果你成功了（就像你在 1 线程情况下总是会做的那样），你可以继续进入锁定区域而无需进一步操作。

尝试获取共享锁是一个更复杂的操作：您需要首先读取锁变量的初始值以确定旧的共享计数，增加您读取的共享计数，然后使用 LOCK CMPXCHG 有条件地写回更新的值操作说明。这是一个明显较长的串行依赖指令链，因此速度较慢。此外，CMPXCGH 在许多处理器上比 LOCK BTS 等无条件原子指令要慢一些。

理论上，通过假设锁在开始时处于其初始状态并首先执行 LOCK CMPXCHG 来加速锁的第一次共享获取是可能的。这将加快锁的初始共享获取（所有这些都在您的单线程情况下），但它会显着减慢锁已被共享并且发生第二次共享获取的情况。

在释放锁时会发生一组类似的发散操作，因此管理共享状态的额外成本也在 ReleaseSRWLockShared 端支付。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-21T00:02:08.247

一位致力于在 Windows 中优化锁的 Windows 内核开发人员告诉我关于性能的经验法则：

1.  在大多数情况下使用关键部分以获得最佳性能
2.  如果您正在阅读至少 4:1 与写作，请考虑 SRW 锁
3.  仅当您的代码绝对不允许饥饿时才使用互斥锁

显然，关于锁还有其他方面需要考虑：

1.  您必须清理 CS 而不必清理 SRW 锁
2.  CS 锁可以递归获取，而 SRW 锁不能
3.  互斥锁可以同步 UM 和 KM，如果你在 KM 中，CS 和 SRW 锁不是真正的选择

所以，是的，除非阅读 >>>> 写入，否则只支持 CS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T05:56:50.713

推测：

排他锁是更简单的情况。共享锁支持并行性，但需要处理饥饿的可能性，因此会有额外的开销。

# javascript - 为什么单击事件在 Firefox 中运行良好但在 IE 中运行良好

> ID：13206421
> 
> 赞同：1
> 
> 时间：2012-11-03T05:51:10.120
> 
> 标签：javascript, jsf-2

这是一个简单的场景，click 事件在 Firefox 中运行良好，但在 IE 中运行良好。让我们详细介绍一下。我有一个如下所示的按钮：

```
<h:form id="theForm">
  <h:commandLink id="theButton" styleClass="button" action="#{theBean.doWork}"/>
</h:form> 
```

当我尝试从 JavaScript 调用按钮的单击事件时，如下所示：

```
document.getElementById('theForm:theButton').click(); 
```

根据这个[线程](https://stackoverflow.com/questions/2812411/click-works-in-ie-but-not-firefox)，我需要像这样将代码放在下面：

```
<script language="javascript" type="text/javascript">
  HTMLElement.prototype.click = function() {
    var evt = this.ownerDocument.createEvent('MouseEvents');
    evt.initMouseEvent('click', true, true, this.ownerDocument.defaultView, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
    this.dispatchEvent(evt);
  } 
```

但是当我在我的 JavaScript 中有这段代码时，它确实可以在 Firefox 中运行，但不再适用于 IE。我可以知道如何使它在 IE 和 Firefox 上都可以工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T05:55:17.553

尝试：

```
if(!HTMLElement){
var HTMLElement = Element;
}
HTMLElement.prototype.click = function() {
    var evt = this.ownerDocument.createEvent('MouseEvents');
    evt.initMouseEvent('click', true, true, this.ownerDocument.defaultView, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
    this.dispatchEvent(evt);
} 
```

这应该适用于 IE>=8，它用于`Element`提供与`HTMLElement`其他浏览器相同的界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:00:40.190

您可以使用 jQuery 进行尝试：

```
$("#theButton").click(function() {alert("Handler for .click() called.");}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:01:56.240

错过分号 - IE 不是那样的

```
<script language="javascript" type="text/javascript">
  HTMLElement.prototype.click = function() {
    var evt = this.ownerDocument.createEvent('MouseEvents');
    evt.initMouseEvent('click', true, true, this.ownerDocument.defaultView, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
    this.dispatchEvent(evt);
  }; 
```

是的，一定要修补 HTMLElement

`var HTMLElement =HTMLElement===undefined?Element:HTMLElement;`

# bson - 博森 | 终端和非终端

> ID：13206423
> 
> 赞同：12
> 
> 时间：2012-11-03T05:51:26.043
> 
> 标签：bson

通读[BSON 规范](http://bsonspec.org/#/specification)，我在其中遇到了**终端**和**非终端**术语。例如：

> 有效的 BSON 数据由文档**non-terminal**表示。

<...>

> 以下基本类型在语法的其余部分用作**终结符。**

在 BSON 规范的上下文中，“终端”和“非终端”是什么意思？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-03T05:59:08.617

在形式语法中，*终结符号*是不能进一步分解的符号，例如文字字符或数字（但不一定取决于语法），*非终结符号*是可以通过产生式进一步简化的符号规则（定义语法的规则）直到它被简化为终结符号，例如，在下面的语法`integer`中是非终结符号，`0-9`都是终结符号。

```
<integer> ::= ['-'] <digit> {<digit>}  
<digit> ::= '0' | '1' | '2' | > '3' | '4' | '5' | '6' | '7' | '8' | '9' 
```

[http://en.wikipedia.org/wiki/Terminal_and_nonterminal_symbols](http://en.wikipedia.org/wiki/Terminal_and_nonterminal_symbols)

# iphone - 如何在不重复的情况下随机播放 NSMutableArray

> ID：13206426
> 
> 赞同：0
> 
> 时间：2012-11-03T05:51:43.783
> 
> 标签：iphone, ios, nsmutablearray

> **可能重复：**
> [洗牌 NSMutableArray 的最佳方法是什么？](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)

在我的代码中，我想对数组中的元素进行洗牌并尝试将其打印出来，但它没有正确洗牌，我尝试了 [这里](http://eureka.ykyuen.info/2010/06/19/objective-c-how-to-shuffle-a-nsmutablearray/)显示的内容。它的工作但它的值正在重复。

```
for(UIView *view in self.view.subviews)
{
    if([view isKindOfClass:[UIButton class]])
    { 
        button= (UIButton *)view;
        if (button.tag >=1 && button.tag <=20)
        {
            for (NSUInteger i = 0; i < count; ++i)
            {
                [texts rotate];
                // Select a random element between i and end of array to swap with.
                int nElements = count - i;
                int n = (arc4random() % nElements) + i;
                [texts exchangeObjectAtIndex:i withObjectAtIndex:n];
                //int myTag= j+1;
                //button = [self.view viewWithTag:myTag];
                name=[NSString stringWithFormat:@"%@",[texts objectAtIndex:n]];
                [button setTitle:name forState:UIControlStateNormal];
                NSLog(@"current  name :%@",name);

            }
        }

    }

} 
```

洗牌后数组值重复，请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:07:58.940

试试这个`int n = (arc4random() % count);`
，而不是
`int n = (arc4random() % nElements) + i;`

确保你正在用任何元素交换当前元素，`texts`而不是总是在它后面的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:12:30.000

只需制作 NSMutableArray 的类别

```
@implementation NSMutableArray (ArrayUtils)
-(void)shuffle
{
static BOOL seeded = NO;
 if(!seeded)
{
    seeded = YES;
    srandom(time(NULL));
}

NSUInteger count = [self count];
for (NSUInteger i = 0; i < count; ++i) {
    // Select a random element between i and end of array to swap with.
    int nElements = count - i;
    int n = (random() % nElements) + i;
    [self exchangeObjectAtIndex:i withObjectAtIndex:n];
} 
```

}

# entity-framework - 实体框架 5.0 约定

> ID：13206431
> 
> 赞同：1
> 
> 时间：2012-11-03T05:52:57.043
> 
> 标签：entity-framework, .net-4.5, entity-framework-5, c#-5.0

我刚刚开始学习实体框架（从 5.0 开始）并遇到了一些问题。在观看了 Pluralsight 上的一些视频后，我决定发挥创意，创建了一个继承自 DbContext 的抽象基类，并公开了一个“DataContext”属性，该属性是一个泛型类型的 DbSet。像这样的东西：

```
public abstract class BaseDataContext<E> : DbContext
     where E : CustomEntity
{
      public DbSet<E> DataContext {get;set;}

      public BaseDataContext()
      {
           Database.SetInitializer<BaseDataContext<E>>(null);
      }
 } 
```

在我开始处理彼此有关系的实体（父/子）之前，这似乎工作得很好。发生的事情是，当我尝试通过继承 BaseDataContext 的数据类向数据库添加一个新的子实体时，而不是仅仅附加引用（意思是，带着孩子说“你的父键是 123”），它创建了另一个使用父项的新键记录，所有其他字段重复，并使此新记录成为子项的父项。我尝试只设置我孩子的 key 属性（取消与数据一起公开的属性），但这并没有改变任何东西。我在 SO ([这里](https://stackoverflow.com/questions/5823115/adding-user-to-a-role-inserts-a-duplicate-user-into-users-table)) 上发现了一个线程，它说像我试图做的那样做多个数据上下文并不是一个好主意，并且似乎准确地解释了正在发生的事情。

我的问题是，随着 EF 似乎越来越受欢迎，这是常用的方法吗？要创建一个单一的数据上下文，然后随处传递构造函数？还是有更简单的更常见的方法？如果事情进入后台线程，这尤其适用，因为在那里传递上下文可能会变得困难。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T22:37:58.150

当您按预期使用时，您可以像任何工具一样充分利用 EF。所以你问很好。实体框架，尤其是代码优先，都是关于持久性无知的（[例如在这里](http://geekswithblogs.net/danemorgridge/archive/2010/01/09/a-look-at-persistence-ignorance-in-entity-framework-4-via.aspx)解释）。我不知道您的评论“就像您在 EF/L2S 之前所做的那样”指的是什么，但听起来像是[active record](http://martinfowler.com/eaaCatalog/activeRecord.html)。那不是要走的路。

上下文负责物化存储中的实体，跟踪更改并将更改保存到数据库。更详细地说：上下文管理工作单元（跟踪更改），它的`DbSet`成员充当基本存储库（实现和保存）。实体类本身对此一无所知。（附带说明：在`ObjectContext`API 中它们确实如此，但它们可以被编码为对持久性无知）。

现在关于“多个上下文”。您提到的问题是关于同一上下文*类型的多个上下文**实例*。您的问题是关于多种上下文*类型*（并且必然是多个实例）。让我们整理一下：

 ***   **上下文类型的数量：上下文类型**的数量通常非常有限，通常甚至只有一种。为什么？因为覆盖大部分数据库的上下文能够检索和保存许多不同的对象图。所以它服务于大量的用例，现在和未来，稳定和变化，但它本身是稳定的。它仅在数据库更改时更改，而不是在应用程序更改时更改。（我应该说，虽然每个用例都有一种上下文类型的倡导者，但我发现它们有大量共同的类是不可避免的，非常令人困惑）。
*   **上下文实例的数量：**这个问题不能用几句话完全涵盖，但应该记住，上下文 (1) 缓存数据和 (2) 跟踪和存储更改。因此，长期存在的上下文很快就会包含陈旧的数据，并且它们会随着变化的发生而增长。共识是保持上下文“短暂”存在，但什么是短暂的？它可以是每个 http 请求一个实例，每个服务调用一个实例，每个（业务）事务一个实例，但也可以是 MDI 接口中的每个表单一个实例，每个线程一个实例......请参阅[此处](http://www.west-wind.com/weblog/posts/2008/Feb/05/Linq-to-SQL-DataContext-Lifetime-Management)关于 Linq-to-Sql 上下文的有用讨论， EF 上下文（或 NHibernate 会话）也是如此。有一点很清楚：不要使用一个静态上下文，因为有些人很想这样做。

因此，尽可能发挥创造力，尽可能多地进行实验。按照预期使用 EF，并获得很多乐趣！**

# python - Google App Engine 更新问题

> ID：13206438
> 
> 赞同：0
> 
> 时间：2012-11-03T05:53:30.897
> 
> 标签：python, google-app-engine

我正在开发一个部署在 GAE 上的应用程序（基于 python），它直到最后一天都运行良好，但是从今天早上开始我似乎无法更新应用程序引擎上的任何代码，它在抱怨某种问题使用密码，我已经仔细检查过，电子邮件 ID 和密码是正确的。

这是我收到的堆栈跟踪：

```
晚上 10:47 克隆 706 个静态文件。
2012-11-03 22:47:07,913 警告 appengine_rpc.py:542 未找到 ssl 模块。
没有 ssl 模块，无法验证远程主机的身份，并且
连接可能不安全。要解决此问题，请从以下位置安装 ssl 模块
http://pypi.python.org/pypi/ssl 。
要了解更多信息，请参阅 https://developers.google.com/appengine/kb/general#rpcssl
user@gmail.com 的密码：2012-11-03 22:47:07,913 ERROR appcfg.py:2266 发生意外错误。中止。
回溯（最近一次通话最后）：
  DoUpload 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 2208 行
    missing_files = self.Begin()
  文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 1934 行，开始
    CloneFiles('/api/appversion/cloneblobs', blobs_to_clone, '静态')
  CloneFiles 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 1929 行
    结果 = self.Send(url, payload=BuildClonePostBody(chunk))
  发送中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 1841 行
    return self.rpcserver.Send(url, payload=payload, **self.params)
  发送中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py”，第 403 行
    self._Authenticate()
  _Authenticate 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py”，第 543 行
    super(HttpRpcServer, self)._Authenticate()
  _Authenticate 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py”，第 293 行
    凭据 = self.auth_function()
  GetUserCredentials 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 2758 行
    密码 = self.raw_input_fn(password_prompt)
EOFError：读取一行时出现EOF
晚上 10:47 回滚更新。
2012-11-03 22:47:08,818 警告 appengine_rpc.py:542 未找到 ssl 模块。
没有 ssl 模块，无法验证远程主机的身份，并且
连接可能不安全。要解决此问题，请从以下位置安装 ssl 模块
http://pypi.python.org/pypi/ssl 。
要了解更多信息，请参阅 https://developers.google.com/appengine/kb/general#rpcssl
user@gmail.com 的密码： Traceback（最近一次通话最后一次）：
  文件“C:\Program Files (x86)\Google\google_appengine\appcfg.py”，第 171 行，在
    run_file(__file__, globals())
  文件“C:\Program Files (x86)\Google\google_appengine\appcfg.py”，第 167 行，在 run_file
    execfile(script_path, globals_)
  文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 4322 行，在
    主要（sys.argv）
  文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 4313 行，在 main
    结果 = AppCfgApp(argv).Run()
  运行中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 2599 行
    自我行动（自我）
  __call__ 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 4048 行
    返回方法（）
  文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 3065 行，在更新中
    self.UpdateVersion（rpcserver，self.basepath，appyaml）
  UpdateVersion 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 3047 行
    lambda 路径：self.opener(os.path.join(basepath, path), 'rb'))
  DoUpload 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 2267 行
    self.Rollback()
  回滚中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 2150 行
    self.Send('/api/appversion/rollback')
  发送中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 1841 行
    return self.rpcserver.Send(url, payload=payload, **self.params)
  发送中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py”，第 403 行
    self._Authenticate()
  _Authenticate 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py”，第 543 行
    super(HttpRpcServer, self)._Authenticate()
  _Authenticate 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py”，第 293 行
    凭据 = self.auth_function()
  GetUserCredentials 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py”，第 2758 行
    密码 = self.raw_input_fn(password_prompt)
EOFError：读取一行时出现EOF
2012-11-03 22:47:09（进程以代码 1 退出）

您现在可以关闭此窗口。
```

任何帮助将不胜感激。

PS，我已经从命令行以及谷歌应用引擎启动器尝试过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:19:14.223

要下载您现有的已部署代码，请查看[下载 appengine 文件](http://www.labnol.org/software/download-appengine-files/19348/) 并[下载已部署代码](https://developers.google.com/appengine/docs/python/tools/uploadinganapp#Downloading_Source_Code)链接。

这可以帮助您下​​载代码。

并尝试再次重新上传，看看它的工作与否。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:28:31.880

经过3天无休止的搜索，我发现了问题所在，如果您遇到此问题，首先要检查的是您的系统时间，由于夏令时更改，我的系统时间不正确。

谢谢

# c# - 如何将大 Json 对象转移到另一个页面

> ID：13206439
> 
> 赞同：1
> 
> 时间：2012-11-03T05:53:30.743
> 
> 标签：c#, asp.net, sql-server, json, session

我有一个搜索页面，让用户可以选择很多标准进行搜索，其中很多是客户端（即时创建），所以我决定将它们保存在 Json 对象中，以便我可以轻松捕获所有客户端数据。

现在我想使用这些数据来形成一个 sql 查询，这样我就可以通过一个网格搜索并在另一个页面中显示结果，如何通过会话将其传输到另一个页面，或者有其他建议来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:01:15.230

您可以使用客户端数据参数（如 JSON）并通过在同一页面上发布数据并获取结果而不是重定向用户来发出 AJAX 请求。

# jquery - 使用 jQuery 淡入淡出背景图像

> ID：13206440
> 
> 赞同：2
> 
> 时间：2012-11-03T05:53:50.460
> 
> 标签：jquery, css

我想通过悬停元素来交叉淡入淡出/过渡背景图像。有可能吗？我有一个`DIV`具有背景图像的元素，但是当您将其悬停时，背景图像会随着过渡/淡入淡出效果而变化。在我的样式表上，我为悬停状态分配了一个类。

这是 的正常或非悬停状态`DIV`。

```
#crossfade DIV{
    width: 100px;
    height: 100px;
    background-image: url('img/bg.jpg');
} 
```

下面是悬停状态类`DIV`。

```
#crossfade DIV.hovered{
    background-image: url('img/bg-1.jpg');
} 
```

然后我的jQuery脚本如下：

```
$(function(){
    $('#crossfade').find('DIV').hover(function(){
        $(this).addClass('hovered');
    }, function(){
        $(this).removeClass('hovered');
    });
}); 
```

我的脚本只是简单地切换背景图像。现在我想要的是给它一个过渡效果，或者更像是淡入/淡出效果。就像上一张背景图片淡出一样，下一张背景图片也在淡入。

知道怎么做吗？是否可以？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T04:35:39.783

我花了很多时间来解决这个问题，因为它也让我感兴趣。学到了很多，所以想和你分享。

第一：我不相信您可以使用*addClass*和*removeClass***交叉淡化**背景图像，因为**您不能在逻辑上同时淡入和淡出元素**。（如果我错了，请有人教我）。

 ****为了让您知道我知道您想要什么，我成功地完成了以下工作：

```
$(".div-bkgrnd-1").hover(function() {
    $(this).fadeOut("slow",function() {
        $(this).addClass('div-bkgrnd-2').fadeIn("slow",function() {
            $(this).removeClass('div-bkgrnd-1');
        });
    });
}); 
```

但是，这并**不能解决**您的问题，即创建 2 个图像的**交叉淡入淡出**。

您会看到，*fadeOut*先运行，然后添加新类，然后运行*​​fadeIn* ，然后删除第一个类。您不能同时运行*fadeOut*和*fadeIn*（这将创建您正在寻找的交叉淡入淡出），因为如果您在*fadeOut*完成之前删除第一个类，它会中断动画。

这是一个我相信对你有用的解决方案。

**HTML：**

```
<div id="div1"> <!-- with CSS background-image applied -->
    <img id="img" />
</div> 
```

**jQuery：**

```
$("#div1").hover(function() {
    $("#img").fadeToggle("slow");
}); 
```

**注意：**确保将 div 定位为悬停功能；定位图像会导致一些奇怪的行为。

（此解决方案假设您希望图像在悬停时交叉淡入淡出，然后在取消悬停时交叉淡入淡出。如果您想要，将功能更改为 fadeOut 将作为一次性使用）。

如果您指定**背景图像**是因为您需要其他内容放在前面，则可以使用 z-index 和包含 div（加上上面的 jQuery）轻松解决。

**HTML：**

```
<div id="container">
    <div id="div1">
        <img id="img" />
    </div>
    <div id="div2>
        Some content here to appear over the top of "div1".
    </div>
</div> 
```

**CSS：**

```
#div1 {
    z-index: 1;
    position: absolute;
    background-image: image1;
}

#div2 {
    z-index: 2;
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:04:11.147

有像 jQuery 循环插件这样的库可以为你做到这一点。非常强大且易于使用。不过，您也可以使用回调自行滚动。我相信这会奏效——我只编码了前半部分，但我想你会明白的。

```
$(function(){
    $('#crossfade').find('DIV').hover(function(){
        $(this).fadeOut('slow', function() {
            $(this).addClass('hovered').fadeIn();
    });
    }, function(){
        $(this).removeClass('hovered');
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-08T09:28:45.503

既然您愿意使用 CSS3，那么根本不涉及 jQuery 怎么样？

简单的解决方案。

**HTML：**

```
<div id="container">
    <div>
        <img src="img1hover.jpg" alt="" />
    </div>
</div> 
```

**CSS：**

```
#container div { 
    background-image: url("img1.jpg");
}
#container div img {
    opacity: 0;
    -webkit-transition: 500ms opacity;
    -moz-transition: 500ms opacity;
    -ms-transition: 500ms opacity;
    -o-transition: 500ms opacity;
    transition: 500ms opacity;
}
#container div img:hover {
    opacity: 1;
} 
```

**注意：** `-webkit`、`-moz`和前缀只是为了避免兼容性问题，但它应该在所有现代浏览器中都能正常工作`-ms`。`-o`

剥离版本：

```
#container div { 
    background-image: url("img1.jpg");
}
#container div img {
    opacity: 0;
    transition: 500ms opacity;
}
#container div img:hover {
    opacity: 1;
} 
```

Only downside is that background image won't fade out, it will be overlayered with `img` element, so it's useless with transparent PNGs.****

# mysql - 如果已选择的另一列为空，则选择一列

> ID：13206441
> 
> 赞同：0
> 
> 时间：2012-11-03T05:54:00.837
> 
> 标签：mysql

```
DEV|MUL
xyz|null
null|abc
123|456 
```

我想获取另一列为空的列的值，或者如果两者都有来自mysql的值，则专门获取一列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:59:43.657

您可以使用`IFNULL`

```
SELECT IFNULL(DEV, MUL) as Col FROM myTable  -- MySql

SELECT ISNULL(DEV, MUL) as Col FROM myTable  -- SQL Server

SELECT NVL(DEV, MUL) as Col FROM myTable  -- Oracle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:00:06.730

```
SELECT IFNULL(DEV, MUL) AS VALUE from table table1; 
```

`DEV`如果它是返回列值，这将返回`not null`列`MUL`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:01:13.477

```
select * from tablename where (columnname is null)
and
select * from tablename where (columnname1 is null) and (columnname2 is null) 
```

# struts2 - 执行动作后的Struts 2界面

> ID：13206447
> 
> 赞同：4
> 
> 时间：2012-11-03T05:55:23.363
> 
> 标签：struts2

动作执行后是否有struts2接口

可准备是在执行动作之前，我们在执行动作之后有什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T15:26:25.460

如果你想在动作执行前后执行一些方法，你可以使用下面的注解，但你需要配置[AnnotationWorkflowInterceptor](http://struts.apache.org/2.3.4/docs/annotationworkflowinterceptor.html)

[@前](http://struts.apache.org/2.3.4/docs/before-annotation.html)

[@后](http://struts.apache.org/2.3.4/docs/after-annotation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T13:02:51.903

不，没有。（我也不知道你为什么想要这样的东西。）

最简单的选择：

*   创建您自己的类似 Preparable 的拦截器来执行此操作。
*   创建一个使用实际操作方法调用子类的基本操作类。
*   使用 AOP，例如，与 Spring 或 AspectJ 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T10:12:38.950

我不确定，你的情况是什么，但我认为这可能是你正在寻找的：[执行和等待拦截器](http://struts.apache.org/2.1.6/docs/execute-and-wait-interceptor.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T15:43:33.573

有[PreResultListener](http://struts.apache.org/2.x/docs/preresultlistener.html)接口。从一个动作中实现它并不是最漂亮的。

出于您的目的使用此接口的示例可能是创建一个抽象支持类，例如：

```
public abstract class PreResultSupport extends ActionSupport implements PreResultListener {

    protected abstract String doExecute();

    @Override
    public String execute() {
        ActionContext.getContext().getActionInvocation().addPreResultListener(this);
        return doExecute();
    }

} 
```

然后，对于您想要做一些“后期准备”的操作，您可以扩展这个支持类：

```
public class ExampleAction extends PreResultSupport {

    private String instanceField;

    @Override
    protected String doExecute() {
        //your action code here
        return SUCCESS;
    }

    @Override
    public void beforeResult(ActionInvocation invocation, String resultCode) {
        //your "post-prepare" or "view-prepare" code here
        //this is threadsafe as well, so you can still reference class fields:
        this.instanceField = "blahblahblah";
    }

} 
```

# django - Heroku Piggyback SSL 的安全性如何

> ID：13206449
> 
> 赞同：2
> 
> 时间：2012-11-03T05:55:40.273
> 
> 标签：django, ssl, heroku

我在 Heroku 上部署了一个 Django 应用程序，它公开了一个我从 Android 应用程序调用的 API。我现在想知道 Heroku Piggyback SSL 加密的安全性如何。我在 URL 本身中传输必须安全的数据。

一个请求可能看起来像这样

```
https://myapp.herokuapp.com/api/v1/friends?authToken=xyz 
```

显然，没有人应该能够嗅探 URL 并从中获取 authToken。Heroku Piggyback SSL 是这样吗？如果是，将 SSL Endpoint 插件与我自己的 SSL 证书一起使用是否有优势？

谢谢西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:11:08.973

无论如何，它和 Heroku 的基础设施一样安全——显然你相信他们的内部配置和亚马逊的云不会泄露你的访问者的信息。

除此之外：任何 SSL 配置都应保护您在传输中的 URL 的隐私。你可能没问题。

# android - 在android中查找两个位置之间的距离？

> ID：13206451
> 
> 赞同：0
> 
> 时间：2012-11-03T05:55:54.033
> 
> 标签：android, google-maps, distance

> **可能重复：**
> [从我的位置到android中目标位置的距离计算](https://stackoverflow.com/questions/10683554/distance-calculation-from-my-location-to-destination-location-in-android)

我对 android 谷歌地图很陌生，我想显示两个地方之间的距离。为此，我编写了两个 autocompletedtextview，我得到了 from 和 to Locations。通过使用

```
public String host = "https://maps.googleapis.com";
public String searchPath = "/maps/api/place/autocomplete/json";
public String detailsPath = "/maps/api/place/details/json"; 
```

我将地名作为字符串我想使用这两个字符串位置计算两个地方之间的距离我该如何实现它在此先感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T06:01:34.837

我认为这段代码对你有用：

```
double distance

Location locationA = new Location(“point A”)

locationA.setLatitude(latA)

locationA.setLongitude(lngA)

Location locationB = new Location(“point B”)

locationB.setLatitude(latB)

LocationB.setLongitude(lngB)

distance = locationA.distanceTo(locationB) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:58:29.290

找到距离试试这个只是通过起点和终点返回你的距离

```
 double distance;
 GeoPoint StartP;
 GeoPoint EndP;

    distance=CalculationByDistance(StartP,EndP);

    public double CalculationByDistance(GeoPoint StartP, GeoPoint EndP) {
            double Radius = 6371;
            double lat1 = StartP.getLatitudeE6() / 1E6;
            double lat2 = EndP.getLatitudeE6() / 1E6;
            double lon1 = StartP.getLongitudeE6() / 1E6;
            double lon2 = EndP.getLongitudeE6() / 1E6;
            double dLat = Math.toRadians(lat2 - lat1);
            double dLon = Math.toRadians(lon2 - lon1);
            double a = Math.sin(dLat / 2) * Math.sin(dLat / 2)
            + Math.cos(Math.toRadians(lat1))
            * Math.cos(Math.toRadians(lat2)) * Math.sin(dLon / 2)
            * Math.sin(dLon / 2);
            double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            double temp = Radius * c;
            temp=temp*0.621;
            return temp;
        } 
```

# android - Froyo 中的下载管理器

> ID：13206452
> 
> 赞同：1
> 
> 时间：2012-11-03T05:55:59.393
> 
> 标签：android, download-manager, android-2.2-froyo

我已经在我的应用程序中实现了 DownloadManager。我知道 DownloadManager 需要最低 sdkVersion 9。但是我的应用程序的最低 sdkVersion 应该是 8。我在 sdkVersion 8 中使用 AsyncTask 进行下载。对于 9 以上的版本，我使用的是 DownloadManager。下面是我的实现方式。

```
if (Build.VERSION.SDK_INT >= 9) {
    android.app.DownloadManager downloadManager
        = (android.app.DownloadManager) getActivity().getSystemService(Context.DOWNLOAD_SERVICE);
    Uri downloadUri = Uri.parse(url.replace(" ", ""));
    android.app.DownloadManager.Request request = new android.app.DownloadManager.Request(downloadUri);
    request.setVisibleInDownloadsUi(true);
    downloadManager.enqueue(request);
    Toast.makeText(getActivity(), "Download started... Please find the downloading process in notificaion bar.", Toast.LENGTH_LONG).show();
}
else if (Build.VERSION.SDK_INT == 8) {
    //AysncTask for downloading...
} 
```

当我在 Gingerbread 及以上版本中运行此代码时，DownloadManager 工作正常。如果我在 Froyo 中运行此代码，应用程序会抛出 ClassNotFoundException。我不知道为什么会发生这种情况，因为我正在检查构建版本，并且只有当设备版本高于 9 时，DownloadManager 才应该工作。Froyo 中的错误是由于 DownloadManager 的实现而发生的。当我在 Froyo 中运行应用程序时，AynceTask 应该启动，但在执行下载操作之前应用程序会抛出 ClassNotFoundException。如果有人遇到过这种情况，请提供一些解决方案。

编辑：我找不到哪一行..但是当我在 Froyo 中使用此代码打开一个活动时，我得到 ClassNotFoundException。

# php - 如何（或我可以）删除 Zend_Search_Lucene 创建的索引文件

> ID：13206455
> 
> 赞同：0
> 
> 时间：2012-11-03T05:56:14.277
> 
> 标签：php, zend-framework, lucene, zend-search-lucene, zend-lucene

有什么方法可以删除 Zend_Search_Lucene 创建的索引文件？如果不可能，请建议一种删除索引数据的方法。我已经从代码中尝试过了。但是失败了。当我试图从 Zend Studio 中删除索引文件时，它给了我一个错误，因为“资源与系统不同步”。我什至不能从应用程序文件夹中做到这一点。请问，有人可以帮帮我吗？

```
$hits = $index->find('path:' . $indexpath);
foreach ($hits as $key =>$hit) 
{
    $index->delete($key);
}
$indexSize = $index->count();
$documents = $index->numDocs();
for ($count = 0; $count < $index->maxDoc(); $count++) 
{
    if ($index->isDeleted($count)) 
    {
       echo "Document deleted.\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:38:08.473

这是我在 UNIX 服务器上的方式：

```
/**
 * Delete whole Index, get $PATH_TO_INDEX from constant
 *
 * @return the last line of the command output or FALSE on failure
 */
public function deleteIndex(){
    $command = "rm -R ".$PATH_TO_INDEX;
    return system($command);
} 
```

# javascript - 在浏览器中检测 JavaScript 弹出窗口关闭事件

> ID：13206462
> 
> 赞同：2
> 
> 时间：2012-11-03T05:57:08.103
> 
> 标签：javascript, asp.net, dom-events, postback

我正在使用`window.open()`函数打开一个 Javascript 弹出窗口，并且上面有关闭按钮。我想在 IE、Firefox 和 chrome 中检测该窗口的关闭事件，因为我想清除会话变量并重定向到其他页面。我尝试使用`window.onbeforeunload` 事件，但它在每次回发时执行。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-03T10:24:50.153

您的问题有一个非常简单的解决方案。

首先创建一个新对象，它会像这样打开一个弹出窗口：

```
var winObj = window.open('http://www.google.com','google','width=800,height=600,status=0,toolbar=0'); 
```

为了知道此弹出窗口何时关闭，您只需使用如下循环继续检查：

```
var loop = setInterval(function() {   
    if(winObj.closed) {  
        clearInterval(loop);  
        alert('closed');  
    }  
}, 1000); 
```

现在你可以用你想要的任何 javascript 代码替换 alert。

玩得开心！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:39:36.337

您需要一个事件处理程序，只有这两个可以使用。因此，正如您所说，您将获得历史记录并刷新触发您的事件。

请查看[此帖](https://stackoverflow.com/questions/3888902/javascript-detect-browser-close-tab-close-browser)

另一种解决方案是将弹出窗口大小设置为全屏并制作自己的关闭按钮。对不起，javascript在这里没有解决方案：-/

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-03T06:13:52.930

```
$(window).bind('unload', function(){
    // ...
}); 
```

# ruby - 在 ruby on rails 中从数据库中检索 pdf（文件）

> ID：13206463
> 
> 赞同：0
> 
> 时间：2012-11-03T05:57:21.147
> 
> 标签：ruby, ruby-on-rails-3

我能够使用数据库中的二进制数据类型成功地将上传的 pdf 存储在数据库中。现在我想检索该 pdf 并将其存储在 mypdf = xxx.pdf 之类的变量中，以便我可以在我的几个方法中传递该 pdf。我想用 ruby​​ 或 rails 做。

让我改一下我的意思。我想检索已经存储在数据库中的 pdf 文件。我知道例如控制器中的这段代码将在本地呈现pdf。send_data @attachment.data, :filename => @attachment.filename, :type => @attachment.content_type 但我不想显示 pdf。我想将pdf分配给变量，然后将该pdf传递给我的方法

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:04:53.297

使用虾宝石，你可以看到它的 railscasts 剧集...... [http://railscasts.com/episodes/153-pdfs-with-prawn](http://railscasts.com/episodes/153-pdfs-with-prawn)

# c# - C#中itextsharp中的文本格式

> ID：13206467
> 
> 赞同：2
> 
> 时间：2012-11-03T05:58:03.017
> 
> 标签：c#, itextsharp

我正在尝试使用我的 C# 软件创建一个 pdf 文件。我正在使用`itextsharp`库来创建客户账单收据。

但是我无法格式化文本。我们如何格式化pdf文件中的文本。只有换行符`\n`似乎在工作。我们如何使用制表符格式化文本？

附件是pdf文件中文本的屏幕截图。

非常感谢你的帮助。

![在此处输入图像描述](../Images/45b0bb20ca46a438d280da971cd8ed00.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:10:33.967

对不起，我不得不反驳 Cuong Le，iTextSharp 确实支持 TAB 块。请下载[http://www.manning.com/lowagie2/samplechapter2.pdf](http://www.manning.com/lowagie2/samplechapter2.pdf)并查找标题为“TAB CHUNKS”的部分（第 2.2.6 节的一部分）。

当您要求 C# 解决方案时，让我从 iTextSharp 复制粘贴您需要的方法：

```
/**
 * Creates a tab Chunk.
 * Note that separator chunks can't be used in combination with tab chunks!
 * @param separator the drawInterface to use to draw the tab.
 * @param tabPosition an X coordinate that will be used as start position for the next Chunk.
 * @param newline if true, a newline will be added if the tabPosition has already been reached.
 * @since 2.1.2
 */
public Chunk(IDrawInterface separator, float tabPosition, bool newline)
   : this(OBJECT_REPLACEMENT_CHARACTER, new Font()) {
   if (tabPosition < 0) {
     throw new ArgumentException(MessageLocalization.GetComposedMessage("a.tab.position.may.not.be.lower.than.0.yours.is.1", tabPosition));
   }
   SetAttribute(TAB, new Object[] {separator, tabPosition, newline, 0});
} 
```

制表符位置是以用户单位表示的值（默认情况下 1 个用户单位 = 1 点 = 1/72 英寸）。在您的情况下，您需要`Chunk`使用正确的选项卡值（您希望名称和地址信息开始的 X 值）创建这样的一个，并将此“选项卡块”`Paragraph`添加到您要添加到文档的 4 个对象中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:05:01.237

`iTextSharp`不支持`Tab`，但您可以`Paragraph` `Paragraph.IndentationLeft`改用或`cell.PaddingLeft`用于表格单元格。

# jquery - 在rails中渲染json数组

> ID：13206470
> 
> 赞同：0
> 
> 时间：2012-11-03T05:58:34.687
> 
> 标签：jquery, ruby-on-rails-3.1

我在控制器中的代码如下所示：

```
def dashboard
    @proj_users.each do |us|
      @users<<User.find(us.user_id).email
    end
    render :json=>@users
end 
```

在我的视图页面中，javascript 如下所示：

```
$(".clicked").click(function () {
  $.get("/dashboard", {
      clicked_id:this.id,
      user:$("#user").val()
    },
    function (data) {
      $("#all_users").hide();
      $("#proj_users").html(data);
    });
}); 
```

`@users`是一个包含电子邮件 ID 的数组。如您所见，`data`将有`@users`。

`@users`会是这样的 `tm@gmail.com,tm2@gmail.com`

`$("#proj_users").html(data);`没有更新数据..

请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:43:16.913

```
two ways 
```

1）解决方案1

```
 @proj_users.each do |us|
     email  = User.find(us.user_id).email + "<br>"
     @users << email
   end
   render :text=>@users 
```

2）解决方案2

```
 @proj_users.each do |us|
     @users<<User.find(us.user_id).email
   end
   render :json=>@users

   in view

   $(".clicked").click(function(){
        $.get("/dashboard",{
        clicked_id:this.id,
        user:$("#user").val()
        },
        function(data)
        {
         $("#all_users").hide();
         $.each(data, function(email){
           $("#proj_users").append(email + "<br>");
         }
        });
   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:10:30.200

您可以简化迭代：

```
def dashboard
  render :json => @proj_users.map(&:email)
end 
```

现在您需要在前端迭代（使用 .each() 方法）并将其放入您的 html 中，如 @ubaid 的回调函数所示。

# java - 创建表语法在 hsql 中不起作用

> ID：13206473
> 
> 赞同：12
> 
> 时间：2012-11-03T05:59:06.177
> 
> 标签：java, hsqldb, create-table

我是 hsqldb 的新手。我正在开发简单的应用程序来获取用户的一些输入。所以搜索嵌入式数据库，发现 hsqldb 是我要求的解决方案。

我有一些创建表语法，但它会引发异常。

（此查询使用 Netbeans 数据库服务执行）

询问 ：

```
CREATE TABLE  company (
  comp_name varchar(100) NOT NULL,
  comp_id int(40) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (comp_id)
); 
```

或者

```
CREATE TABLE  company (
  comp_name varchar(100) NOT NULL,
  comp_id int(40) NOT NULL IDENTITY
); 
```

hsql db 抛出错误：

```
Error code -5581, SQL state 42581: unexpected token: ( : line: 3
Line 2, column 1

Execution finished after 0 s, 1 error(s) occurred. 
```

请帮帮我..

提前致谢..

干杯...！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-03T06:06:53.560

在`INT or INTEGER` **不指定字段长度**的情况下使用，因为 Int 类型字段不需要它。它是等类型字段所必需`VARCHAR`的`DECIMAL`。

```
 CREATE TABLE  company (
   comp_name varchar(100) NOT NULL,
   comp_id int
 ); 
```

自动递增：

```
 ALTER TABLE company ALTER COLUMN comp_id 
 SET GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1); 
```

或者：

```
 CREATE TABLE  company (
   comp_name varchar(100) NOT NULL,
   comp_id int GENERATED BY DEFAULT AS IDENTITY 
                                         (START WITH 1, INCREMENT BY 1) NOT NULL
 ); 
```

您还可以添加 PRIMARY_KEY 如下：

```
 CREATE TABLE  company (
   comp_name varchar(100) NOT NULL,
   comp_id INTEGER NOT NULL,
   PRIMARY KEY (comp_id)
 ); 
```

# iphone - 适合我的 iOS 应用的模板

> ID：13206479
> 
> 赞同：0
> 
> 时间：2012-11-03T06:00:15.057
> 
> 标签：iphone, ios, objective-c-2.0

我正在构建一个 iOS 应用程序，我正在对特定数据的存在性进行条件检查。请找到我用于 Android 的代码，此条件检查在内部完成`SplashScreenActivty`

```
if(data.exists())
{
     startActivity(new Intent(this,Activate.class))
}else{
     startActivity(new Intent(this,Tabs.class))
} 
```

我如何在 iOS 中处理这个逻辑。我对选择模板感到困惑。我要不要一起去`SplashScreenActivity`。我还发现 iOS 没有像 SplashScreen 这样的东西。那么我该如何开始我的应用程序呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:46:16.973

There are two ways for this .

*   Follow **first way**, if you want to display splash image only.
*   Follow **second way** if you want to do some customisation programmatically in splash image

1:) Rename your image as **Default.png**

2:) Add new view controller with xib, write your stuff there in viewcontroller.m . Set timer using NSTimer & disappear it after your requiered time.

*   // For first way // I assume you are creating your app for ***iPhone environment only*** not for iPad or universal
*   // For second way // I assume you have ***not any click event***

Enjoy Programmming

# linux - gnome-open 窗口定位

> ID：13206491
> 
> 赞同：0
> 
> 时间：2012-11-03T06:03:00.177
> 
> 标签：linux, ubuntu, sh, gnome-terminal

正如一些超级用户所知道的：

```
gnome-open /home/username/somefile.txt 
```

将在 gnome 中打开一个窗口。

是否可以从命令行打开一个窗口并将其放置在窗口的一角？

```
gnome-open /home/username/somefile.txt -top -left 
```

（我知道命令是编造的）这相当于打开文件并按 ctrl + alt + num9。

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:34:41.830

你可以试试这个，但它并不总是有效：

> gnome-open file.txt && sleep 2 && wmctrl -r ":ACTIVE:" -e 1,0,0,-1,-1

# java - 如何在 Scala 中实现这种 Java 机制？

> ID：13206495
> 
> 赞同：1
> 
> 时间：2012-11-03T06:03:11.860
> 
> 标签：java, scala

在`Java`中，抽象类的静态成员将通过其子类全部继承。像

```
abstract class TopThing{
  public TopThing next;
  public TopThing(TopThing tt){
        this.next = tt
  }

  private static HashTable<String, TopThing> someTable = new HashTable<String,TopThing>();
  protected void add(String name) {
      someTable.put(name, this);
  public static Parent forName(String name) {
      return someTable.get(name)    ;
  }
}

class SomeSpecific extends TopThing {
    public final String name;
    public SomeSpecific (String name, TopThing tt) {
       super(tt);
       this.name = name;
       this.add(name);
} 
```

这是我第一次在 Scala 中编写，我知道实现上述目标的唯一方法是使用伴随对象，但它似乎不适用于这种情况

*   伴生对象可以存储私有静态表吗？（好像没有……）
*   如果我可以在伴生对象中声明表，是否可以从伴生类中引用它？（好像没有……）
*   在`add`方法中，如何引用子类的实例并插入到表中？（问题也与`this`方法有关`add`）
*   在 Scala 中有什么好的做法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T08:25:08.680

1.  是的，它可以。

2.  是的，您将其引用为`TopThing.someTable`（或仅`someTable`在 之后`import TopThing._`）。

3.  与 Java 相同：`this`. 所以

    ```
    abstract class TopThing(val next: TopThing) {
      protected def add(name: String) {
        TopThing.someTable += (name -> this)
      }
    }

    object TopThing {
      private val someTable = collection.mutable.Map[String,TopThing]()

      def forName(name: String) = someTable.get(name)
    }

    class SomeSpecific(val name: String, next: TopThing) extends TopThing(next) {
      this.add(name)
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:05:24.187

对于问题 1：您可以使用 private[namespace]

对于问题 2：否，但您可以使用 import

```
class Xxx {
  import Xxx._
  ...
} 
```

对于问题3：我不知道如何回答。

对于问题 4：

```
trait TopThing {
  val someTable: HashTable[String, TopThing] 
}
class Xxx extend TopThing {
  val someTable = Xxx.someTable  
} 
```

# sqlite - 如何在 sqlite 中从另一个数据库导入表？

> ID：13206501
> 
> 赞同：16
> 
> 时间：2012-11-03T06:04:34.833
> 
> 标签：sqlite

我有以`database1`table`t1`和`database2`table命名的 SQLite 数据库`t2`。我想将表`t2`从`database2`导入到`database1`. 我应该使用什么命令？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-03T10:39:59.947

`database2`使用[`sqlite3`命令行工具](http://www.sqlite.org/sqlite.html)打开并使用命令读取表定义`.schema t2`。（或者，使用任何其他允许读取表定义的工具。）

然后打开`database1`，使用命令[附加](http://www.sqlite.org/lang_attach.html)另一个数据库：

```
ATTACH 'database2file' AS db2; 
```

然后创建表`t2`，并复制数据：

```
INSERT INTO t2 SELECT * FROM db2.t2; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-09T19:41:09.023

外壳命令：

```
sqlite3 database1 
```

在 SQLite 外壳中：

```
sqlite> ATTACH 'database2' AS db2;
sqlite> CREATE TABLE t1 AS SELECT * FROM db2.t2; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-03T10:37:48.347

您可以使用 sqlite3`.dump`命令将转储输出通过管道传输到另一个数据库。它需要一个带有表名的可选参数。

```
db1=~/mydb1.sqlite 
db2=~/mydb2.sqlite
t=t2

sqlite3 "$db2" ".dump $t" | sqlite3 "$db1" 
```

如果您在两个数据库中都没有公共表，则可以省略表名并复制所有表。

如果表很大，这可能会很慢，因为它会执行 INSERT。如果它们很大，而且真的太慢，也许`.import`会更快。你可以尝试类似的东西

```
sqlite3 "$db2" ".schema $t" | sqlite3 "$db1"
sqlite3 "$db2" "SELECT * FROM $t" | sqlite3 "$db1" ".import /dev/stdin $t" 
```

# php - YII - 使用 sendGrid 发送邮件

> ID：13206506
> 
> 赞同：4
> 
> 时间：2012-11-03T06:05:03.310
> 
> 标签：php, email, yii, sendgrid

我正在尝试在 yii php 框架中使用 SendGrid 发送邮件。

这是我发送邮件的操作代码：

```
public function actionSendmail()
{
    Yii::setPathOfAlias('Libs', Yii::app()->basePath.'/lib');
    Yii::setPathOfAlias('SendGrid', Yii::app()->basePath.'/lib/sendgrid-php/SendGrid');
    Yii::import('SendGrid.*');
    Yii::import('Libs.sendgrid-php.SendGrid', true);
    $sendgrid = new SendGrid('uname', 'pwd');
    $mail = new SendGrid\Mail();
    $mail->addTo('to-email')->
        setFrom('from-email')->
        setSubject('Subject goes here')->
        setText('Hello World!')->
        setHtml('<strong>Hello World!</strong>');
    $sendgrid->smtp->send($mail);
    $this->render('mail');
} 
```

显示错误：

> 使用未定义的常量 ROOT_DIR - 假定为“ROOT_DIR”
> 
> /var/www/apsiap/protected/lib/sendgrid-php/SendGrid/Smtp.php(18)

```
06 {
07   //the available ports
08   const TLS = 587;
09   const TLS_ALTERNATIVE = 25;
10   const SSL = 465;
11 
12   //the list of port instances, to be recycled
13   private $swift_instances = array();
14   protected $port;
15 
16   public function __construct($username, $password)
17   {
18     require_once ROOT_DIR . 'lib/swift/swift_required.php';
19     call_user_func_array("parent::__construct", func_get_args());
20 
21     //set the default port
22     $this->port = Smtp::TLS;
23   }
24 
25   /* setPort
26    * set the SMTP outgoing port number
27    * @param Int $port - the port number to use
28    * @return the SMTP object
29    */
30   public function setPort($port) 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:22:24.927

知道了：

```
 public function actionSendmail()
    {
        define('ROOT_DIR', Yii::app()->basePath . '/lib/sendgrid-php/');
        define('SWIFT_REQUIRED_LOADED', true);
        Yii::import('application.lib.sendgrid-php.SendGrid');
        Yii::import('application.lib.sendgrid-php.lib.swift.classes.Swift', true);
        Yii::registerAutoloader(array('Swift', 'autoload'));
        Yii::import('application.lib.sendgrid-php.lib.swift.swift_init', true);
        Yii::setPathOfAlias('SendGrid', Yii::app()->basePath . '/lib/sendgrid-php/SendGrid/');

        $sendgrid = new SendGrid('uname', 'pwd');
        $mail = new SendGrid\Mail();
        $mail->addTo('to-email')->
            setFrom('from-email')->
                    setSubject('Subject goes here')->
            setText('Hello World!')->
            setHtml('<strong>Hello World!</strong>');
        $sendgrid->smtp->send($mail);
        $this->render('mail');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:32:44.577

您有机会查看以下链接吗？主要问题似乎是您导入 SendGrid 库的方式。

*   [sendGrid 邮件功能在 yii 框架中不起作用](https://stackoverflow.com/questions/11862546/sendgrid-mail-function-not-working-in-yii-framework)
*   [http://www.yiiframework.com/forum/index.php/topic/32356-sendgrid-and-yii/](http://www.yiiframework.com/forum/index.php/topic/32356-sendgrid-and-yii/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-02-24T12:33:47.137

您不应该以这种方式使用 SendGrid，您必须配置一个类或下载一个已有的扩展并设置为邮件组件，然后您才能轻松发送电子邮件。

不要重新发明轮子:)

# jquery - 在 wordpress 中使用泰米尔语字体

> ID：13206509
> 
> 赞同：-1
> 
> 时间：2012-11-03T06:06:16.117
> 
> 标签：jquery, wordpress-theming, wordpress

如何在我的 WordPress 博客中使用泰米尔语字体。我需要帮助的博客是[jsabdul.wordpress.com](http://jsabdul.worpress.com)。泰米尔语字体，如 baamini、suntommy 等，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:42:55.307

1- Download some free Tamil fonts such as

[http://ta.wikipedia.org/s/3m](http://ta.wikipedia.org/s/3m)

2- Create a version that you can use on the web with FontSquirrel

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

3- Insert the @font-face statement in the CSS and upload the fonts on the web

4- Change the font families in the CSS to match the Tamil fonts.

To do this, you need to be able to edit a CSS file and to use an FTP software.

Info: [http://codex.wordpress.org/Playing_With_Fonts#Font_Face](http://codex.wordpress.org/Playing_With_Fonts#Font_Face)

# c# - 有没有更好的方法来改进 C# 2.0 中的代码？

> ID：13206512
> 
> 赞同：0
> 
> 时间：2012-11-03T06:06:35.837
> 
> 标签：c#, types, .net-2.0

此代码片段用于验证对象属性的值。

最小和最大范围以 .xml 文件的形式提供，如 Nhibernate .hbm 文件。

由于属性的数据类型也是从 .xml 文件中读取的，所以我们只能在运行时知道属性的类型。

有没有更好的方法来改进**C#**和**.NET 2.0**中的代码？

```
public static void ValidateMinMax(Property prop, Object value)
    {
        Type type = Type.GetType(prop.TypeName);

        Object minValue = PropertyDataExtractor.GetMinValue(prop);
        Object maxValue = PropertyDataExtractor.GetMaxValue(prop);
        Object actualVaue = null;

        bool minValueOk = false;
        bool maxValueOk = false;

        if (minValue != null)
        {
            switch (type.Name)
            {
                case "Boolean":
                    break;

                case "SByte":
                    actualVaue = Convert.ToSByte(value);
                    if (actualVaue != null)
                    {
                        minValueOk = ((sbyte)minValue) <= ((sbyte)actualVaue);
                    }
                    else
                    {
                        minValue = true;
                    }
                    break;

                case "Byte":
                    actualVaue = Convert.ToByte(value);
                    if (actualVaue != null)
                    {
                        minValueOk = ((byte)minValue) <= ((byte)actualVaue);
                    }
                    else
                    {
                        minValue = true;
                    }
                    break;

                case "Byte[]":
                    break;

                case "DateTime":
                    actualVaue = Convert.ToDateTime(value);

                    if (actualVaue != null)
                    {
                        minValueOk = ((DateTime)minValue).Date <= ((DateTime)actualVaue).Date;
                    }
                    else
                    {
                        minValue = true;
                    }
                    break;

                case "Int16":
                    actualVaue = Convert.ToInt16(value);
                    if (actualVaue != null)
                    {
                        minValueOk = ((short)minValue) <= ((Int16)actualVaue);
                    }
                    else
                    {
                        minValue = true;
                    }
                    break;

                case "Int32":
                    actualVaue = Convert.ToInt32(value);
                    if (actualVaue != null)
                    {
                        minValueOk = ((int)minValue) <= ((Int32)actualVaue);
                    }
                    else
                    {
                        minValue = true;
                    }
                    break;

                case "Int64":
                    actualVaue = Convert.ToInt64(value);
                    if (actualVaue != null)
                    {
                        minValueOk = ((long)minValue) <= ((Int64)actualVaue);
                    }
                    else
                    {
                        minValue = true;
                    }
                    break;

                case "Single":
                    actualVaue = Convert.ToByte(value);
                    if (actualVaue != null)
                    {
                        minValueOk = ((float)minValue) <= ((Single)actualVaue);
                    }
                    else
                    {
                        minValue = true;
                    }
                    break;

                case "Double":
                    actualVaue = Convert.ToByte(value);
                    if (actualVaue != null)
                    {
                        minValueOk = ((double)minValue) <= ((double)actualVaue);
                    }
                    else
                    {
                        minValue = true;
                    }
                    break;

                case "Decimal":
                    actualVaue = Convert.ToByte(value);
                    if (actualVaue != null)
                    {
                        minValueOk = ((decimal)minValue) <= ((decimal)actualVaue);
                    }
                    else
                    {
                        minValue = true;
                    }
                    break;

                case "Char":
                    actualVaue = Convert.ToChar(value);
                    if (actualVaue != null)
                    {
                        minValueOk = ((char)minValue) <= ((char)actualVaue);
                    }
                    else
                    {
                        minValue = true;
                    }
                    break;

                case "String":
                    actualVaue = Convert.ToString(value);
                    if (actualVaue != null)
                    {
                        minValueOk = ((int)minValue) <= ((string)actualVaue).Length;
                    }
                    else
                    {
                        minValue = true;
                    }
                    break;

                case "Guid":
                    break;
            }
        }

        if (maxValue != null)
        {
            switch (type.Name)
            {
                case "Boolean":
                    break;

                case "SByte":
                    actualVaue = Convert.ToSByte(value);
                    if (actualVaue != null)
                    {
                        maxValueOk = ((sbyte)minValue) >= ((sbyte)actualVaue);
                    }
                    else
                    {
                        maxValue = true;
                    }
                    break;

                case "Byte":
                    actualVaue = Convert.ToByte(value);
                    if (actualVaue != null)
                    {
                        maxValueOk = ((byte)minValue) >= ((byte)actualVaue);
                    }
                    else
                    {
                        maxValue = true;
                    }
                    break;

                case "Byte[]":
                    break;

                case "DateTime":
                    actualVaue = Convert.ToDateTime(value);
                    if (actualVaue != null)
                    {                            
                        maxValueOk = ((DateTime)maxValue).Date >= ((DateTime)actualVaue).Date;
                    }
                    else
                    {
                        maxValue = true;
                    }
                    break;

                case "Int16":
                    actualVaue = Convert.ToInt16(value);
                    if (actualVaue != null)
                    {
                        maxValueOk = ((short)minValue) >= ((Int16)actualVaue);
                    }
                    else
                    {
                        maxValue = true;
                    }
                    break;

                case "Int32":
                    actualVaue = Convert.ToInt32(value);
                    if (actualVaue != null)
                    {
                        maxValueOk = ((int)minValue) >= ((Int32)actualVaue);
                    }
                    else
                    {
                        maxValue = true;
                    }
                    break;

                case "Int64":
                    actualVaue = Convert.ToInt64(value);
                    if (actualVaue != null)
                    {
                        maxValueOk = ((long)minValue) >= ((Int64)actualVaue);
                    }
                    else
                    {
                        maxValue = true;
                    }
                    break;

                case "Single":
                    actualVaue = Convert.ToByte(value);
                    if (actualVaue != null)
                    {
                        maxValueOk = ((float)minValue) >= ((Single)actualVaue);
                    }
                    else
                    {
                        maxValue = true;
                    }
                    break;

                case "Double":
                    actualVaue = Convert.ToByte(value);
                    if (actualVaue != null)
                    {
                        maxValueOk = ((double)minValue) >= ((double)actualVaue);
                    }
                    else
                    {
                        maxValue = true;
                    }
                    break;

                case "Decimal":
                    actualVaue = Convert.ToByte(value);
                    if (actualVaue != null)
                    {
                        maxValueOk = ((decimal)minValue) >= ((decimal)actualVaue);
                    }
                    else
                    {
                        maxValue = true;
                    }
                    break;

                case "Char":
                    actualVaue = Convert.ToChar(value);
                    if (actualVaue != null)
                    {
                        maxValueOk = ((char)minValue) >= ((char)actualVaue);
                    }
                    else
                    {
                        maxValue = true;
                    }
                    break;

                case "String":
                    actualVaue = Convert.ToString(value);
                    if (actualVaue != null)
                    {
                        maxValueOk = ((int)maxValue) >= ((string)actualVaue).Length;
                    }
                    else
                    {
                        maxValue = true;
                    }
                    break;

                case "Guid":
                    break;
            }
        }

        if (minValue == null)
        {
            minValueOk = true;
        }

        if (maxValue == null)
        {
            maxValueOk = true;
        }

        if (!(minValueOk && maxValueOk))
        {
            throw new Exception("Property : " + PropertyDataExtractor.GetName(prop) +".\nMessage : "+ PropertyDataExtractor.GetMinValueErrorMessage(prop) + " " + PropertyDataExtractor.GetMaxValueErrorMessage(prop));
        }
        else if (!minValueOk)
        {
            throw new Exception("Property : " + PropertyDataExtractor.GetName(prop) + ".\nMessage : " + PropertyDataExtractor.GetMinValueErrorMessage(prop));
        }
        else if (!maxValueOk)
        {
            throw new Exception("Property : " + PropertyDataExtractor.GetName(prop) + ".\nMessage : " + PropertyDataExtractor.GetMaxValueErrorMessage(prop));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:23:04.060

我会选择面向对象的方法。这里有一些伪代码：

```
public abstract class MinMaxValidatorBase
{
    // do common stuff here 

    public abstract bool Validate(object value);
}

// Create a own Attribute so the currect Validator can be found
[ValidatorType(typeof(int))]     
public class Int32MinMaxValidator : MinMaxValidatorBase
{
  // validate int here
}

[ValidatorType(typeof(string))]  
public class StringMinMaxValidator : MinMaxValidatorBase
{
   // validate string here
}

public void ValidateValue(object value)
{
   // Validator loader gets the right MinMaxValidator with reflection 
   // based on the value type mapped with the ValidatorType attribute
   MinMaxValidatorBase validator = ValidatorLoader.GetValidator(value);
   bool isValid = validator.Validate(value);

} 
```

# jquery - CKEditor BBCode 插件中的自定义标签

> ID：13206515
> 
> 赞同：6
> 
> 时间：2012-11-03T06:07:00.483
> 
> 标签：jquery, plugins, ckeditor, bbcode

我正在使用带有[BBCode 插件的](http://ckeditor.com/addon/bbcode)[CKEditor](http://ckeditor.com) ，我需要添加自定义标签，如标签和另一个标签，这将提供链接到站点用户个人资料的可能性。标签将像标签一样工作：单击按钮并获取代码。我将所有字符串复制并更改为和。然后我在工具栏上添加了配置和一个按钮。它显示正确，但生成错误代码。 例如，如果我在选择文本后单击块引用按钮，则会生成以下代码：`spoiler`
`spoiler``blockquote``blockquote/plugin.js``blockquote``spoiler``quote``spoil``extraPlugins: 'spoiler'`

```
[quote]some text[/quote] 
```

但是当我点击我的新按钮时，我得到以下代码：

```
<p>
    <spoiler>
    <p>
        !!!</p>
    </spoiler></p> 
```

所以它不起作用。

我还想创建一个链接到用户的按钮。它应该是这样工作的：单击按钮后，会出现一个带有搜索字段的对话框（AJAX 不是问题），结果是用户列表；when a user would be chosen and the `OK`button would be clicked, it would generate a code like the following:

```
[user=1]Admin[/user] 
```

1 - 用户 ID，管理员 - 他的名字。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2015-07-28T12:16:36.010

我在使用 CKEditor 时遇到了很多问题。我正在使用所见即所得的 Froala。他可能会解决你的问题。

# ruby - Ruby 脚本 - 抑制“询问”

> ID：13206516
> 
> 赞同：1
> 
> 时间：2012-11-03T06:07:07.190
> 
> 标签：ruby, shell, scripting, rake

我正在处理如下所示的第 3 方 rake 任务：

`abort("rake aborted!") if ask("Are you sure?", ['y', 'n']) == 'n'`

我正在尝试编写一些额外的 rake 任务来自动化这个过程。有什么办法可以抑制这个问题的出现吗？或者以某种方式`y`通过命令行喂它让它快乐？

我可以编辑，`Rakefile`但这是最后的手段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:10:01.777

你会很高兴知道有一个名为`yes`. 这将为您提供源源不断的流量，`y`这将是您所需要的。

# php - 如何在 yii 中设置默认主页？

> ID：13206517
> 
> 赞同：2
> 
> 时间：2012-11-03T06:07:19.457
> 
> 标签：php, yii

我是 yii 的新手。

如何根据用户角色在我的站点中设置默认主页？yii为此使用了什么方法。

我所做的是，在我的索引操作中，我呈现索引文件。但是我怎样才能使它基于角色呢？

```
public function actionIndex() {
  $this->render('index'); 
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:49:27.613

您可以根据用户类型更改默认控制器中的视图文件和操作，例如：

```
if($usertype == 'user_type1') { $this->render('usertypeview1'); }
if($usertype == 'user_type2') { $this->render('usertypeview2'); } 
```

这里 usertypeview1 & usertypeview2 是视图文件夹下视图文件的名称。

您也可以根据您的用户类型更改布局，例如：

```
if($usertype == 'user_type1') { $this->layout = 'column1'; }
if($usertype == 'user_type2') { $this->layout = 'column2'; } 
```

这里column1和column2是views文件夹中layout文件夹下的layout文件

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T23:08:17.647

您现在可能已经弄清楚了，但没有发布您的答案。以防万一这对任何人都有帮助，一种实现如下。我不知道 RBAC 中是否有内置的东西可以做到这一点，但实现起来很简单。

在文件 protected/controllers/SiteController.php 中更改 1 行：

```
public function actionLogin()
{
    $model=new LoginForm;

    // if it is ajax validation request
    if(isset($_POST['ajax']) && $_POST['ajax']==='login-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }

    // collect user input data
    if(isset($_POST['LoginForm']))
    {
        $model->attributes=$_POST['LoginForm'];
        // validate user input and redirect to the previous page if valid
        if($model->validate() && $model->login())
            //$this->redirect(Yii::app()->user->returnUrl); change this
                      $this->roleBasedHomePage(); //to this
    }
    // display the login form
    $this->render('login',array('model'=>$model));
} 
```

并将此方法添加到同一个文件中

```
protected function roleBasedHomePage() {
    $role='theusersrole' //however you define your role, have the value output to this variable
    switch($role) {
        case 'admin':
            $this->redirect(Yii::app()->createUrl('site/page',array('view'=>$role.'homepage'));
        break;
        case 'member':
            $this->redirect(Yii::app()->createUrl('site/page',array('view'=>$role.'homepage'));
        break;
        //etc..
    }
} 
```

您重定向到的内容可能会有很大差异，具体取决于您希望主页上的页面类型。在这种情况下，我使用静态页面。如果您的页面名称一致，您可以省略 switch 语句并将角色连接到 createURL 中的视图名称。

# c++ - Visual Studio 2010 设置

> ID：13206519
> 
> 赞同：0
> 
> 时间：2012-11-03T06:07:57.707
> 
> 标签：c++, c, visual-c++

我正在尝试在 Visual Studio 2010 中编译一个 C++ 项目。它包含许多 C++ 文件，也有几个 C 文件。

因为它是一个 C++ 项目并且警告级别设置为 /W4，所以我在 C 源代码上收到了很多警告。

有没有办法为 C 源代码选择 C ​​编译器和为 C++ 源代码选择 C++ 编译器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:05:58.350

通常，文件扩展名将用于提示默认编译模式。如果由于某种原因编译模式被覆盖，您可以手动设置它：转到 C 文件的属性。内部：配置属性 --> C/C++ --> 高级 --> 编译为 --> 编译为 C 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:18:33.307

确保使用正确的扩展名命名文件。

`.c`文件是用 C 编译器编译的。

`.cpp`文件是用 C++ 编译器编译的。

C 文件没有模板，只需选择 C++ 文件并适当命名即可。否则，如果它已经添加到您的项目中，您仍然可以重命名该文件。

# php - 从 jQuery 中的 PHP MySQL 输出中选择 img 标签

> ID：13206521
> 
> 赞同：0
> 
> 时间：2012-11-03T06:07:58.740
> 
> 标签：php, javascript, jquery, mysql

我正在使用 PHP MySQL jQuery 创建一个基本的博客 CMS，下面是我的 MySQL 表：

```
id              : mediumint(6)      :AUTO_INCREMENT
content         : longtext
content_pic     : text 
```

1 content_pic 列保存几个img src：<img src="http://"><img src="http://">...

＆PHP：

```
$query=mysql_query($sql) or die(mysql_error());
while($list=mysql_fetch_array($query)){
    print"
        <div class=\"content\">$list[content]</div>
        <div class=\"contentpic\">$list[content_pic]</div>
    ";
} 
```

1 $list[content_pic] 输出中有几个 img src 标签，如何在 jQuery 中选择每个 img？
我应该命名每个img，当我将字符串上传到mysql时添加类名吗？

通常如何从 PHP 输出中选择每张图片？例如： [http](http://www.asos.com/Vans/Vans-Authentic-Plimsolls/Prod/pgeproduct.aspx?iid=691064&abi=1&clr=Black)
://www.asos.com/Vans/Vans-Authentic-Plimsolls/Prod/pgeproduct.aspx?iid=691064&abi=1&clr= Black 如何给每个img唯一的ID然后我可以在jQuery中选择？

任何建议将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:15:31.620

我建议不要将整个 HTML 源代码放在数据库中，而只是将图像文件的路径。对于内容图片，您可以在字段中存储一个逗号分隔的列表。

当您要输出 HTML 源代码时，只需将数据库中的内容图片字符串分解为逗号上的数组即可。然后你可以遍历每一个，给它一个唯一的 ID，你可以在 jquery 中用作句柄。

这样做会将 MySQL 中的数据存储与 PHP 中的显示逻辑分离，因此如果您决定更改 HTML 结构，则无需更改存储在数据库中的数据。

通常，除非您有一些真正令人信服的理由这样做，否则您不应该在数据库中存储任何要输出的 HTML 片段。

# python - 如何在 re.sub 中附加/连接一个数字

> ID：13206523
> 
> 赞同：2
> 
> 时间：2012-11-03T06:08:04.137
> 
> 标签：python, regex

所以我有一个看起来像这样的 re.sub 行

```
re.sub(r'(.*_)\d*(\..*)', r'\1' + mediaFileId + r'\2', baseName) 
```

mediaFileId 是一个字符串，看起来像`'8000'`

这条线返回`invalid group reference`，因为它认为我正在寻找我`\18000`真正想要的时间`\1`。

这是一个如此简单的问题，但我似乎无法弄清楚。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T06:12:31.853

```
re.sub(r'(.*_)\d*(\..*)', r'\g<1>8000\2', baseName) 
```

[http://docs.python.org/2/library/re.html#re.sub](http://docs.python.org/2/library/re.html#re.sub)

# c# - 在 Mono Linux 上使用 SerialPort 时出现高波特率错误

> ID：13206524
> 
> 赞同：3
> 
> 时间：2012-11-03T06:08:15.393
> 
> 标签：c#, python, linux, mono, serial-port

我必须通过 FTDI RS485 连接器（具有通常的 comport 软件接口）以 1000000 波特率在 Mono 中与设备通信。操作系统 - Linux（Ubuntu ... Mint13 特别是），单声道 2.10.2。

首先我在 Linux 上运行简单的 python 测试程序：

```
 >> import serial
 >> ser = serial.Serial("/dev/ttyUSB0",1000000, timeout=0.5)
 >> ser.write(":DCS3FF8;")   # Some message to the device with crc
 >> ser.readall()
 ':CDS P0 M0 E0 L1 S07B3B;'  #This is the correct response from the device

 >> print ser
 Serial<id=0x2ce71d0, open=True>(port='/dev/ttyUSB0', baudrate=1000000, bytesize=8, parity='N', stopbits=1, timeout=0.5, xonxoff=False, rtscts=False, dsrdtr=False) 
```

设备正确响应。一切正常。这表明在 Linux 上一切运行良好。

然后我退出 python 并尝试将 Mono 与代码一起使用：

```
 var serialPort = new SerialPort();
     serialPort.PortName = "/dev/ttyUSB0";
     serialPort.BaudRate = 1000000;

     serialPort.Open();
     serialPort.Write(":DCS3FF8;");
     Thread.Sleep(150);
     Console.WriteLine("BytesToRead: '{0}'", serialPort.BytesToRead);
     Console.WriteLine("Existing   : '{0}'", serialPort.ReadExisting()); 
```

使用命令编译并运行它：

```
 dmcs serial_try.cs && mono serial_try.exe 
```

并得到 TimeoutException，serialPort.BytesToRead 为 0。同时我看到连接器的两个灯都在闪烁（有东西正在传输）。

当我**在 Windows 上的 .NET 上运行相同的代码时**，它**成功地**与设备通信并接收到与 python 相同的消息。

那么单声道上的 SerialPort 有什么好处呢？我错过了一些设置或配置吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T14:58:50.490

在单声道上读取 FTDI 设备的问题被发现是由[波特率错误](https://bugzilla.xamarin.com/show_bug.cgi?id=8207)引起的。

错误的想法：如果将波特率设置为大于 921600，则实际波特率设置为 9600。

说起来很有趣（如果您浪费时间试图弄清楚为什么不能在单声道上与 SerialPort 通信），这与一个[较旧的错误](https://bugzilla.novell.com/show_bug.cgi?id=445520)有关。说明无法设置波特率 921600。所以看起来这个错误被修复到了 921600 而不是更高。

为了解决这个错误，可以在端口打开后调用 stty 来设置实际波特率。所以添加这个函数：

```
 private void ForceSetBaudRate(string portName, int baudRate)
    {
        if (Type.GetType ("Mono.Runtime") == null) return; //It is not mono === not linux! 
        string arg = String.Format("-F {0} speed {1}",portName , baudRate);
        var proc = new Process
            {
                EnableRaisingEvents = false,
                StartInfo = {FileName = @"stty", Arguments = arg}
            };
        proc.Start();
        proc.WaitForExit();
    } 
```

并在串行打开后立即调用：

```
 _serialPort.PortName = PortName;
    _serialPort.BaudRate = BaudRate;
    _serialPort.Open();
    ForceSetBaudRate(PortName, BaudRate); 
```

hack 并不漂亮，但最终 FTDI 调制解调器可以在 Mono + Linux 和 .Net + Windows 上运行。

其他解决方法可能是实现您自己的串行端口包装器并对其进行 PInvoking，或者按照@skolima 的建议修复单声道错误。

**如果波特率不是 ASCII 则更新**，因此不能使用 stty，python 可以用作解决方案。请参阅下面的评论。感谢@Dorian Scholz。

# c++ - 在 C++ 中的构造函数初始化列表中初始化 char 数组

> ID：13206526
> 
> 赞同：6
> 
> 时间：2012-11-03T06:08:45.833
> 
> 标签：c++, arrays, class, initialization-list

像这样使用初始化可以吗？

```
class Foo
{
public:
   Foo() : str("str") {}
   char str[4];
}; 
```

和这个？

```
int main()
{
   char str[4]("str");
} 
```

两者都在 gcc 4.7.2 中给我一个错误：

> 错误：数组用作初始化器

Comeau 编译了两者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T06:13:14.523

在 C++03 中，非静态成员数组不能像你提到的那样初始化。在 g++ 中，您可能可以扩展*初始化器列表*，但这是 C++11 的特性。

函数中的局部变量可以这样初始化：

```
char str[] = "str"; // (1)
char str[] = {'s','t','r',0}; // (2) 
```

虽然您可以将维度称为`4`，但最好*不要提及*以避免意外数组越界。

我建议`std::string`在这两种情况下都使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T07:18:17.427

这段代码是有效的 C++03 并且 gcc 在这里根本不符合。

允许这种语法初始化字符数组的语言与允许它用于任何其他类型的语言相同；没有任何例外会禁止它用于字符数组。`()`和`=`初始化在这些情况下是等价的，字符数组应该根据 8.5.2 简单地初始化。

[这是](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=43453)一个已确认的 gcc 错误报告，涵盖了这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T06:19:13.850

在 C++03 中，这是不可能的。Comeau 可能会因为非标准扩展而编译它。

在 C++11 中，您可以这样做：

```
Foo() : str({'s','t','r'}) {}       //C++11 only 
```

或者，您可能更喜欢这个：

```
class Foo
{
public:
   Foo() {}
   char str[4] = "str"; //in-class initialization (C++11 only)
}; 
```

此外，您可能会考虑使用`std::string`或`std::vector<char>`不考虑您正在使用的 C++ 版本。

# wget - 如何使用 wget 从特定文件夹下载网页？

> ID：13206528
> 
> 赞同：1
> 
> 时间：2012-11-03T06:09:07.210
> 
> 标签：wget

我使用 wget 从网站下载网页，但它下载整个网站而不是下载网站上的特定文件夹，即使我指定了特定路径。例如，

```
wget -r www.example.com/subfolder/ 
```

使用上述命令，从网站下载所有页面，而不是从 /subfolder 下载页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T06:11:53.090

帮助显示以下`wget`选项：

```
 -np, --no-parent                 don't ascend to the parent directory. 
```

默认情况下，可能有从子文件夹到站点主页的链接，wget 通常会遵循这些链接。

# php - Search Filtering with PHP/MySQL

> ID：13206530
> 
> 赞同：15
> 
> 时间：2012-11-03T06:09:26.143
> 
> 标签：php, mysql, database

I'm trying to create a search/filtering option in my blood donor application. Where donor can be searched by sex, name, blood group or by selecting all three. Here is my code

```
function search_donar($_POST) {

        $by_name = $_POST['by_name'];
        $by_sex = $_POST['by_sex'];
        $by_group = $_POST['by_group'];
        $by_level = $_POST['by_level'];

        $search_query = "SELECT * FROM donar WHERE";
        if($by_name !="") {
          $search_query .= " name='$by_name'";
        }
        if($by_sex !="") {
          $search_query .= " sex='$by_sex'";
        }
        if($by_group !="") {
          $search_query .= " blood_group='$by_group'";
        }
        if($by_level !="") {
          $search_query .= " e_level='$by_level'";
        }
        $search_query;
        $result = mysql_query($search_query);

        return $result;
    } 
```

And here is the html

```
if(isset($_POST['submit'])) {

    $retrived_result = $donar->search_donar($_POST);

}

   <form action="" method="post">
    <table width="100%" border="0" style="border:none;">
      <tr>
        <td><label>Name:&nbsp;</label><input type="text" name="by_name" /></td>
        <td><label>Sex:&nbsp;</label><input type="text" name="by_sex" /></td>
        <td><label>Blood Group:&nbsp;</label><input type="text" name="by_group" /></td>
        <td><label>Level:&nbsp;</label><input type="text" name="by_level" /></td>
        <td><input class="button" type="submit" name="submit" value="Search" /></td>
      </tr>
    </table>
    </form> 
```

Single filtering works very fine. But To filter with all I used AND , but it gives me error. Can anyone help ?

Thanks in advance

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-03T07:36:58.087

Like all the other post you will need to append all the conditions with AND like so. This is the cleanest answer so far. Remember to real escape your strings though use the mysqli OOP way instead of the old mysql. Just a suggestion.

Heres an example of a typical query.

The correct way:

```
SELECT * FROM donar WHERE name='dxenaretionx' AND sex='M'; 
```

The way you are doing it

```
SELECT * FROM donar WHERE name='dxenaretionx' sex='M'; 
```

Code:

```
function search_donar($_POST) {
    $by_name = $_POST['by_name'];
    $by_sex = $_POST['by_sex'];
    $by_group = $_POST['by_group'];
    $by_level = $_POST['by_level'];

    //Do real escaping here

    $query = "SELECT * FROM donar";
    $conditions = array();

    if(! empty($by_name)) {
      $conditions[] = "name='$by_name'";
    }
    if(! empty($by_sex)) {
      $conditions[] = "sex='$by_sex'";
    }
    if(! empty($by_group)) {
      $conditions[] = "blood_group='$by_group'";
    }
    if(! empty($by_level)) {
      $conditions[] = "e_level='$by_level'";
    }

    $sql = $query;
    if (count($conditions) > 0) {
      $sql .= " WHERE " . implode(' AND ', $conditions);
    }

    $result = mysql_query($sql);

    return $result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T06:14:09.933

The following code snippet:

```
$search_query = "SELECT * FROM donar WHERE";
if($by_name !="") {
  $search_query .= " name='$by_name'";
}
if($by_sex !="") {
  $search_query .= " sex='$by_sex'";
} 
```

produces queries like

```
SELECT * FROM donar WHERE name='nowak' sex='m' 
```

, which are not valid because there is no logical operator between the clauses. You need to add an 'AND'. To simplify code, you can generate conditions in the form of "true and a and b ...":

```
$search_query = "SELECT * FROM donar WHERE true";
if($by_name !="") {
  $search_query .= " AND name='$by_name'";
}
if($by_sex !="") {
  $search_query .= " AND sex='$by_sex'";
}
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T07:22:44.317

There in Your code there is problem in query where condition . Here your query will be like `select * from donar where by_name = "A" by_group = "N"` there is No `And/Or` to make where condition properly. Please try code like given below.

```
$search_query = "SELECT * FROM donar";
$query_cond = "";

if($by_name !="") {
      $query_cond .= " name='$by_name'";
}
if($by_sex !="") {

      if(!empty($query_cond)){
          $query_cond .= " AND ";
       }

      $query_cond .= " sex='$by_sex'";
}

if($by_group !="") {

      if(!empty($query_cond)){
          $query_cond .= " AND ";
       }

      $query_cond .= " blood_group='$by_group'";
}

if($by_level !="") {

      if(!empty($query_cond)){
          $query_cond .= " OR ";
       }

      $query_cond .= " e_level='$by_level'";
 }

 if(!empty($query_cond)){
      $query_cond = " Where ".$query_cond;
      $search_query.$query_cond;
 } 
```

Here in code First we take `$query_cond` variable empty and make condition according code. and manage `AND` operator according that. And in last if We found `$query_cond` not empty then add it to `$select_query`.

I hope it will be helpful for you.

thanks

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T06:25:20.340

Try like this:

```
function search_donar($_POST) {

        $by_name = $_POST['by_name'];
        $by_sex = $_POST['by_sex'];
        $by_group = $_POST['by_group'];
        $by_level = $_POST['by_level'];

        $isfirst=0;
        $search_query = "SELECT * FROM donar WHERE";
        if($by_name !="") {

          $search_query .= " name='$by_name'";
          $isfirst=1;
        }
        if($by_sex !="") {
            if($isfirst!=0)
            $search_query .= " AND ";
          $search_query .= " sex='$by_sex'";
          $isfirst=1;
        }
        if($by_group !="") {
            if($isfirst!=0)
            $search_query .= " AND ";
          $search_query .= " blood_group='$by_group'";
          $isfirst=1;
        }
        if($by_level !="") {
            if($isfirst!=0)
            $search_query .= " AND ";
          $search_query .= " e_level='$by_level'";
          $isfirst=1;
        }
        $result = mysql_query($search_query);

        return $result;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T07:30:27.870

In this where you don't use validation, it is recomended not to use whether Field is EMPTY or NOT. Try below code, Hope it will work

```
function search_donar($_POST) {

    $by_name = $_POST['by_name'];
    $by_sex = $_POST['by_sex'];
    $by_group = $_POST['by_group'];
    $by_level = $_POST['by_level'];

    $search_query = "SELECT * FROM donar WHERE name LIKE '%$by_name%' AND sex LIKE '%$by_sex%' AND blood_group LIKE '%$by_group%' AND  e_level LIKE '%$by_level%' ";

    $result = mysql_query($search_query);

    return $result;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-17T11:22:23.483

```
function search_donar($_POST) {

    $by_name = $_POST['by_name'];
    $by_sex = $_POST['by_sex'];
    $by_group = $_POST['by_group'];
    $by_level = $_POST['by_level'];

    $search_query = "SELECT * FROM donar WHERE";

    $and = '';
    if(count($_POST) > 1) {
        $and ='AND';
    }
    if($_POST[0]) {
        $and ='';
    }

    if($by_name !="") {
        $search_query .= $and." name='$by_name'";
    }
    if($by_sex !="") {
        $search_query .= $and." sex='$by_sex'";
    }
    if($by_group !="") {
        $search_query .= $and." blood_group='$by_group'";
    }
    if($by_level !="") {
        $search_query .= $and." e_level='$by_level'";
    }

    if(count($_POST) == 0) {
        $search_query .= " 1 ";
    }

    $search_query;
    $result = mysql_query($search_query);

    return $result;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-17T11:34:19.717

I'd do in this way.

```
function search_donar($_POST) {

    $by_name = $_POST['by_name'];
    $by_sex = $_POST['by_sex'];
    $by_group = $_POST['by_group'];
    $by_level = $_POST['by_level'];

    $search_query = "SELECT * FROM donar WHERE 1 = 1";
    if($by_name !="") {
      $search_query .= " AND name='$by_name'";
    }
    if($by_sex !="") {
      $search_query .= " AND sex='$by_sex'";
    }
    if($by_group !="") {
      $search_query .= " AND blood_group='$by_group'";
    }
    if($by_level !="") {
      $search_query .= " AND e_level='$by_level'";
    }
    $result = mysql_query($search_query);
    return $result;
} 
```

# html - 基于用户设备显示文本

> ID：13206532
> 
> 赞同：0
> 
> 时间：2012-11-03T06:09:46.087
> 
> 标签：html, css, responsive-design

我刚刚进入响应式设计，并且对显示内容有疑问。

显然，当用户使用更大的屏幕时，我想显示更多的内容，但我也想根据用户的设备显示某些文本。

例如，我想在桌面上说“拖放文件”，但在手机上我想说“触摸选择文件”。我意识到我可以使用@media 查询并隐藏不适用的文本来做到这一点，但我想知道是否有更好的方法来做到这一点（所以用户不必每次都加载两组文本） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:12:26.267

此代码段是引导 css 框架的一部分，您可以根据用户设备显示/隐藏 DOM 的任何部分，有关更多信息以及如何使用 get to [here](http://twitter.github.com/bootstrap/scaffolding.html#responsive)：

```
.hidden {
  display: none;
  visibility: hidden;
}
.visible-phone {
  display: none !important;
}
.visible-tablet {
  display: none !important;
}
.hidden-desktop {
  display: none !important;
}
.visible-desktop {
  display: inherit !important;
}
@media (min-width: 768px) and (max-width: 979px) {
  .hidden-desktop {
    display: inherit !important;
  }
  .visible-desktop {
    display: none !important ;
  }
  .visible-tablet {
    display: inherit !important;
  }
  .hidden-tablet {
    display: none !important;
  }
}
@media (max-width: 767px) {
  .hidden-desktop {
    display: inherit !important;
  }
  .visible-desktop {
    display: none !important;
  }
  .visible-phone {
    display: inherit !important;
  }
  .hidden-phone {
    display: none !important;
  }
} 
```

或者您可以使用 jquery 插件（例如[responsejs](http://responsejs.com/)，....），**但我建议您使用 CSS @media 查询（[引导程序](http://twitter.github.com/bootstrap)最适合您的意图）**。

# asp.net - Webservice.asmx 文件在服务器上不起作用

> ID：13206534
> 
> 赞同：-1
> 
> 时间：2012-11-03T06:10:18.497
> 
> 标签：asp.net, service, web

我已经在我的本地 PC 上提供了一项服务并且它工作正常，但是当我把它放在服务器上时，我得到“内部服务器错误”。即使我无法执行 service.asmx 文件。

这是网址：[http ://www.linkmastermonkey.com/domaincheck2/Service.asmx](http://www.linkmastermonkey.com/domaincheck2/Service.asmx)

Service.asmx 页面未执行并显示 web.config 文件的错误消息。

需要您的帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:59:50.250

首先，根据 web.config 文件中的更改，您在下面执行此操作

```
<configuration>
<system.web>
    <customErrors mode="Off"/>
</system.web>
</configuration> 
```

* * *

现在您将能够看到确切的错误。

# linux - shell脚本新手-如何自动运行一些脚本，在这些脚本运行时必须回答一些问题

> ID：13206535
> 
> 赞同：1
> 
> 时间：2012-11-03T06:10:20.760
> 
> 标签：linux, shell, debian

我正在尝试通过 Shell 命令在 Debian 系统中设置 Apache/PHP/其他一些软件。

[现在，在http://www.howtoforge.com/perfect-server-debian-squeeze-with-bind-and-courier-ispconfig-3-p4](http://www.howtoforge.com/perfect-server-debian-squeeze-with-bind-and-courier-ispconfig-3-p4)指定的用于安装 Apache 和其他一些软件的命令是这样的——

```
apt-get install apache2 apache2.2-common apache2-doc apache2-mpm-prefork apache2-utils libexpat1 ssl-cert libapache2-mod-php5 php5 php5-common php5-gd php5-mysql php5-imap phpmyadmin php5-cli php5-cgi libapache2-mod-fcgid apache2-suexec php-pear php-auth php5-mcrypt mcrypt php5-imagick imagemagick libapache2-mod-suphp libruby libapache2-mod-ruby 
```

现在，在运行上述命令后，屏幕上会出现 2 个提示 - 第一个提示问题是

```
Web server to reconfigure automatically: 
```

我必须选择“Apache2”选项

问的第二个问题是

```
Configure database for phpmyadmin with dbconfig-common? 
```

我选择选项为“否”

我想创建一个简单的 shell 脚本，我可以运行它而不需要像上面那样输入命令——我想知道的是，如何在这样的自定义 shell 脚本中指定，我必须选择的选项对于这两个问题（如上所示）？这样最终用户可以简单地运行脚本，甚至不需要回答上述 2 个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:19:42.267

如果你知道顺序、提示数量和正确答案，你可以试试这个：

```
echo -e "Apache2\nNo\n" | apt-get install apache2 apache2.2-common ...etc 
```

其中每一行 echo 将被重定向到来自 apt-get 的相应输入请求

# html - 如何在 IE 7 中关闭 CSS 问题

> ID：13206536
> 
> 赞同：0
> 
> 时间：2012-11-03T06:11:03.240
> 
> 标签：html, css, internet-explorer-7

```
#header-menu{
    width:990px;
    height: 115px;
    margin-top: 0px;
    margin-right: auto;
    margin-bottom: auto;
    margin-left: auto;
    padding-top: 0px;
} 
```

我正在使用这个 CSS 代码，它适用于每个浏览器，甚至 IE9、IE8 .. 但它不适用于 IE7。我不明白什么是问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:14:20.827

IE 7 在 CSS 方面一直很麻烦。您总是可以添加一个额外的样式表来修改和更改 IE 7 在文档的 HEAD 中弄乱的任何内容（只需确保它位于您的主样式表下方）：

```
<!--[if IE 7]><link href="/css/ie7.css" rel="stylesheet" type="text/css"><![endif]--> 
```

这不是最快的方法，W3C 建议您预先浏览器检查并向正文添加一个类，以便添加到您的样式表中，但它是最快的，并且可以完成工作。

注意：我们只能希望有一天我们生活在一个不支持 IE 7 的世界中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:15:28.377

你能告诉我们为什么它不起作用吗？如果您试图将某些内容居中，则`margin-left:auto;`and`margin-right:auto;`技术不适用于旧 IE 版本，因此您应该`text-align:center;`在父元素中使用（而不是在标题菜单本身中）。如果 header-menu 没有父级，那么你应该应用`text-align:center;`到 html 元素：

```
html {text-align:center;} 
```

编辑：由于这并不优雅，您可以将其包含在单独的 CSS 中，用于低于 IE8 的版本：

```
<!--[if lt IE8]> (your CSS here) <![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T08:47:29.223

如果您尝试将其居中，`header-menu`因为您在其中具有固定的宽度和高度，您可以使用以下方法`margin: 0 auto;`代替：

```
margin-top: 0px; margin-right: auto; margin-bottom: auto; margin-left: auto; 
```

希望这能解决您的 IE7 问题。

# android - 使用 phonegap 或 navigator.userAgent 检测 Android 平板电脑

> ID：13206541
> 
> 赞同：0
> 
> 时间：2012-11-03T06:12:14.743
> 
> 标签：android, cordova

在 OnDevice Ready 后，我需要检测 Android 平板电脑，如 Google Nexus 7/10 或三星 Galaxy Tab。

我使用 device.platform 它只返回 Android，与 iOS 不同，它返回 iPad。

我需要知道，如果我使用以下方法检测 Android 平板电脑，如果它是 Android 平板电脑，它是否总是返回正确的值？

```
if( /epad/i.test(navigator.userAgent.toLowerCase())) {
   // this is an Android tablet
} 
```

我正在使用 PhoneGap 2.1 和 jqm 1.2。

欢呼和问候，马克

**我发现了一种方法。你们觉得呢？任何评论表示赞赏:)**

```
if ($.event.special.orientationchange.orientation() === "portrait") {

    if($(window).width() > 420) {

        return true;

    } else {

        return false;

    }

} else {

    if($(window).width() > 660) {

        return true;

    } else {

        return false;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T14:18:42.727

为什么不使用 phonegap[设备](http://docs.phonegap.com/en/3.1.0/cordova_device_device.md.html)插件？它有一个`platform`和`model`属性可以帮助你。使用屏幕宽度和高度来推断设备身份是非常糟糕的做法。

# html - 拉伸液体容器和漂浮的内容物

> ID：13206542
> 
> 赞同：0
> 
> 时间：2012-11-03T06:12:19.593
> 
> 标签：html, css

基本上，我希望`container`与里面的内容一起垂直拉伸`id=content`。我似乎无法弄清楚如何，即使`height:100%`为`id=container`不起作用的价值。

[http://jsfiddle.net/hVksr/](http://jsfiddle.net/hVksr/)

容器的 CSS

```
#container {
width: 400px;
height:100%;
margin:auto;   
background:#ccc; 
} 
```

HTML 标记

```
<div id="container">
   <div id="head">
       header
   </div>

   <div id="content">
      Contents Here  
   </div>

   <div id="side">
      Side Contents
   </div>

</div>​ <!--/container--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:24:30.767

试试这个它应该工作

```
#container {
    width: 400px;
    min-height:100px;
    height:auto;
    overflow:hidden;
    margin:auto;   
    background:#ccc;

} 
```

希望这会有所帮助：D

# php - 如何按 ID desc 发布数据

> ID：13206546
> 
> 赞同：0
> 
> 时间：2012-11-03T06:12:30.873
> 
> 标签：php, database, mysqli, output

```
$query="select * from messages where client_id='$client_id' ORDER BY `id` DESC"; 
```

上面的脚本似乎不起作用，我想选择所有等于用户输入的数据，同时按降序发布

```
 $result = $mysqli->query( $query );

                                        while ($row = $result->fetch_object())
                                        {
                                                $mes_agent_id = $row->poster_id;
                                                $id = $row->msg_id;
                                                $mes = $row->message;
                                                $mes = nl2br($mes);
                                                $cdate = $row->date_post;
                                                $msg ="{$mes} <br> . {$cdate}";

                                                $query_agnt ="select * from agent_info where id='$mes_agent_id'";
                                                $result_agnt = $mysqli->query( $query_agnt );
                                                $row_agnt = $result_agnt->fetch_object();
                                                        $mes_agent_first = $row_agnt->first;
                                                        $mes_agent_last = $row_agnt->last;
//wall ===================================================
?>
<li class="bar<?php echo $id; ?>">
<div id="news-avatar">
<img src="data/agentpic/<?php echo $mes_agent_first.$mes_agent_last; ?>.jpg" style="height:50px;float:left;margin-right:10px;"/>
</div>
<div align="left" class="post_box">
<br><label><strong><?php echo $mes_agent_first.' '.$mes_agent_last; ?></strong></label> <br> <br>
<?php echo $msg; ?> 

<br><br><a href="#" class="comment" id="4">comment</a><br>
</div>
<div id='expand_box'>
<div id='expand_url'></div>
</div>
<div id="fullbox" class="fullbox<?php echo $id; ?>">
<div id="commentload<?php echo $id; ?>" > 
```

如何按降序从数据库中发布数据，同时选择应该选择数据的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:16:39.857

请更改此声明：

`$query="select * from messages where client_id='" . $client_id ."' ORDER BY`ID`DESC";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:15:25.377

您必须在 column_name 和 table_name 的开头和结尾使用“`”，或者只使用 column_name 和 table_name 但不要同时使用两者。

你这样使用：

```
"select * from `messages` where `client_id`='$client_id' ORDER BY `id` desc"; 
```

或者你可以使用

```
"select * from messages where client_id='$client_id' ORDER BY id desc"; 
```

并更好地在 php 中使用带有 $client_id 的 addlashes() 函数来防止 sql 注入。

像这样：

```
$client_id = addslashes($client_id);
"select * from messages where client_id='$client_id' ORDER BY id desc" 
```

我希望它会为你完成。

# c# - 如何删除 & 何时转换为 Excel

> ID：13206548
> 
> 赞同：0
> 
> 时间：2012-11-03T06:13:13.383
> 
> 标签：c#, asp.net, xml

在我的 ASP.NET 网络中，我有一个转换为 Excel 的功能，我使用 CarlosAG.convert。我的问题是当数据库中的某些表字段包含值“&”（格式字段=文本，例如：“you & i”）时，它在 excel 中变为 &，例如：you“&”；一世。请帮我解决这个问题。

用excel（CarlosAG）编写的代码：

```
WorksheetRow wr = new WorksheetRow();
DataTable dt = Testing;
foreach (DataRow dr in dt.Rows)
{
wr.Cells.Add(Convert.ToString(dr["TestingName"]), DataType.String, "s140");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:22:55.957

您要做的是 HtmlDecode 字符串，这将删除您使用的任何特殊编码。所以下面的代码应该可以解决问题。

```
WorksheetRow wr = new WorksheetRow();
DataTable dt = Testing;
foreach (DataRow dr in dt.Rows)
{
wr.Cells.Add(Server.HtmlDecode(Convert.ToString(dr["TestingName"])), DataType.String, "s140");
} 
```

# javascript - 使用 jasmine 测试主干视图时无法创建视图实例

> ID：13206551
> 
> 赞同：0
> 
> 时间：2012-11-03T06:13:30.997
> 
> 标签：javascript, backbone.js, jasmine

我正在使用 jasmine 框架来测试backbone.js 视图。我正在使用以下代码创建视图实例：`var listview = new employee_list_view();`在我的文件中`SpecRunner.html` 和我的`test.js`文件中，我有以下代码：

```
 var employee_list_view = Backbone.View.extend({
el: $('#employee'),
model:Person,
initialize: function() {
    this.collection.bind("add", this.render, this);

}, 
```

但是在运行测试用例后，我得到了以下错误：

```
TypeError: 'undefined' is not a constructor (evaluating 'new employee_list_view()') 
```

我已经尝试了很多，但我以同样的错误结束。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:24:23.553

看起来你没有实例化视图。

做`var list_view = new employee_list_view({ collection: collection });`

# scala - Scala Range(x, Int.MaxValue) 与 Stream.from(x)

> ID：13206552
> 
> 赞同：7
> 
> 时间：2012-11-03T06:13:51.257
> 
> 标签：scala, stream, range

我是一名 Scala 初学者，正在使用[Project Euler](http://projecteuler.net/)练习我的 FP 技能。

在研究*“[问题 5：](http://projecteuler.net/problem=5)可以被 1 到 20 的所有数字整除的最小正数是多少”*时，我比较了基于范围和基于流的解决方案：

```
val r1 = Range(20, Int.MaxValue).find(i => (2 to 20).forall(i % _ == 0)).get
val r2 = Stream.from(20).find(i => (2 to 20).forall(i % _ == 0)).get 
```

奇怪的是，r1 的计算大约在 20 秒内完成，而 r2 的基于流的计算内存不足。我会预料到相反的情况——有人能解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T06:43:34.790

For range it always takes fixed size of memory.

For stream it will cache all the element you are even used. So during find stream in r2 is keep increase until out of memory.

# java - 将 BigInteger 拆分为数字并将它们放入数组中

> ID：13206556
> 
> 赞同：4
> 
> 时间：2012-11-03T06:14:08.313
> 
> 标签：java, biginteger

我想将以下 biginteger 拆分为数字并将其放入数组中。

```
BigInteger = 123456789123456789123456789123456789
array[]={1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,1,2,3,4,5,6,7,8,9,} 
```

我该怎么做？谢谢。我搜索了它，但找不到更好的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T06:18:27.253

可以这样做：

```
BigInteger value = new BigInteger("123456789123456789123456789123456789");
List<Integer> list = new ArrayList<Integer>();
BigInteger ten = new BigInteger("10");
while (!value.equals(BigInteger.ZERO))
{
    list.add(0, value.mod(ten).intValue());
    value = value.divide(ten);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:17:31.667

只需`toString`将每个字符转换为`int`并添加到`int`s数组

```
String biStr = bi.toString();
int[] ints = new int[biStr.length()];
for(int i=0; i<biStr.length(); i++) {
    ints[i] = Integer.parseInt(String.valueOf(biStr.charAt(i)))
} 
```

# vb.net - vb.net 暂停代码的执行，直到线程完成

> ID：13206558
> 
> 赞同：0
> 
> 时间：2012-11-03T06:14:12.180
> 
> 标签：vb.net, multithreading

我有一个包含以下内容的函数

```
 WebUpdateThread = New System.Threading.Thread(AddressOf generatecids)
    WebUpdateThread.SetApartmentState(ApartmentState.STA)
    WebUpdateThread.Start()

    'after starting the thread i have some code that i want to run when the thread    finshes its work which takes about 3-4 hours
'if i put for example 
MsgBox("something") 
```

消息框在线程启动后立即显示，我如何让它等到线程完成？

有没有比检查线程状态的无限while循环更充分的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T06:35:09.983

您可以使用[BackGroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)，它专为这种情况而设计，您还可以实现进度指示，这样您的用户就不会想知道使用 ProgressChanged 事件发生了什么：

例子：

```
Imports System.Threading
Imports System.ComponentModel

Public Class Form1
    Dim WebUpdateWorker As BackgroundWorker

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        WebUpdateWorker = New BackgroundWorker
        AddHandler WebUpdateWorker.DoWork, AddressOf DoWork
        AddHandler WebUpdateWorker.RunWorkerCompleted, AddressOf WorkFinished
        WebUpdateWorker.RunWorkerAsync()

    End Sub

    Public Sub generatecids()
        System.Threading.Thread.Sleep(20000)
    End Sub

    Private Sub DoWork(sender As Object, e As DoWorkEventArgs)
        generatecids()
    End Sub

    Private Sub WorkFinished(sender As Object, e As RunWorkerCompletedEventArgs)
        MsgBox("something")
    End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:25:38.620

```
Please can try as below exapmle :
============================
Friend Class StateObj
   Friend StrArg As String
   Friend IntArg As Integer
   Friend RetVal As String
End Class

Sub ThreadPoolTest()
   Dim TPool As System.Threading.ThreadPool
   Dim StObj1 As New StateObj()
   Dim StObj2 As New StateObj()
   ' Set some fields that act like parameters in the state object.
   StObj1.IntArg = 10
   StObj1.StrArg = "Some string"
   StObj2.IntArg = 100
   StObj2.StrArg = "Some other string"
   ' Queue a task
   TPool.QueueUserWorkItem(New System.Threading.WaitCallback _
                          (AddressOf SomeOtherTask), StObj1)
   ' Queue another task
   TPool.QueueUserWorkItem(New System.Threading.WaitCallback _
                          (AddressOf AnotherTask), StObj2)
End Sub

Sub SomeOtherTask(ByVal StateObj As Object)
   ' Use the state object fields as arguments.
   Dim StObj As StateObj
   StObj = CType(StateObj, StateObj)   ' Cast to correct type.
   MsgBox("StrArg contains the string " & StObj.StrArg)
   MsgBox("IntArg contains the number " & CStr(StObj.IntArg))
   ' Use a field as a return value.
   StObj.RetVal = "Return Value from SomeOtherTask"
End Sub

Sub AnotherTask(ByVal StateObj As Object)
   ' Use the state object fields as arguments.
   ' The state object is passed as an Object.
   ' Casting it to its specific type makes it easier to use.
   Dim StObj As StateObj
   StObj = CType(StateObj, StateObj)
   MsgBox("StrArg contains the String " & StObj.StrArg)
   MsgBox("IntArg contains the number " & CStr(StObj.IntArg))
   ' Use a field as a return value.
   StObj.RetVal = "Return Value from AnotherTask"
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T06:34:26.000

其他答案是更好的完整解决方案，但要回答所提出的问题，只需`WebUpdateThread.Join`在您之前添加`MsgBox`，代码将等待线程完成后再继续。

正如我所说，其他答案更好，因为有了这些答案，您可以更自由地做其他事情，例如重新绘制表格等。

# android - 如何解决谷歌播放支付错误？

> ID：13206564
> 
> 赞同：1
> 
> 时间：2012-11-03T06:14:46.143
> 
> 标签：android, in-app-purchase, google-play

我一直在开发android应用程序，它通过应用内计费启用了订阅。我尝试使用两个gmail帐户测试订阅，但是当我每次尝试测试时它都说“此时无法处理您的付款。您可能会收到一封电子邮件，要求您验证您的帐户”。但我从未收到任何有关验证的电子邮件。我已经附上了屏幕截图，请有人帮我解决这个问题。提前致谢。![在此处输入图像描述](../Images/5ef41bdcb00be9d6f83192f50009b778.png)

# android - 如何在 ImageView 上实现缩放功能

> ID：13206570
> 
> 赞同：0
> 
> 时间：2012-11-03T06:15:24.283
> 
> 标签：android, listview, imageview, android-arrayadapter

我正在使用列表视图来显示 res/drawable 文件夹中存在的一组图像。为此，我创建了一个适配器类，它将填充（main.xml）。我已经编写了这样的代码，如果单击 listItem，图像应该在新活动中全屏显示。我还需要包括图像缩放功能。你能帮他把缩放功能附加到下面的代码中吗？

MainActivity.java

```
public class MainActivity extends ListActivity 
{
 static final String[] Furniture_types = new String[] { "Type1", "Type2","Type3", "Type4"};

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setListAdapter(new FurnitureArrayAdapter(this,Furniture_types ));
    }

    protected void onListItemClick(ListView l, View v, int position, long id) 
    {
        Intent myIntent = new Intent();
        myIntent.setClassName("com.mink7.furniture.list","com.mink7.furniture.list.ImageDisplayActivity");
        myIntent.putExtra("ID", id);
        startActivity(myIntent);

    }

}

FurnitureArrayAdapter.java

public class FurnitureArrayAdapter extends ArrayAdapter<String>
{
        private final Context context;
    private final String[] values;

    public FurnitureArrayAdapter(Context context, String[] values)
    {
        super(context, R.layout.activity_main, values);
        this.context = context;
        this.values = values;
    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.activity_main, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.type);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.photo);
        textView.setText(values[position]);
        String s = values[position];

        System.out.println(s);

        if (s.equals("Type1")) {
            imageView.setImageResource(R.drawable.img1);
        } else if (s.equals("Type2")) {
            imageView.setImageResource(R.drawable.img2);
        } else if (s.equals("Type3")) {
            imageView.setImageResource(R.drawable.img3);
        } else {
            imageView.setImageResource(R.drawable.img4);
        }

        return rowView;
    }

} 
```

ImageDisplayActivity.java

```
public class ImageDisplayActivity extends Activity
{
    protected void onCreate(Bundle savedInstanceState) 
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.imagedisp);
        Bundle extras = getIntent().getExtras();

        long id =extras.getLong("ID");
        String s=String.valueOf(id);
        ImageView image = (ImageView) findViewById(R.id.imageView1);

        System.out.println(s);

        if (s.equals("0")) 
        {
            image.setImageResource(R.drawable.img1);

        }
        else if (s.equals("1"))
        {
            image.setImageResource(R.drawable.img2);
        }
        else if (s.equals("2"))
        {
            image.setImageResource(R.drawable.img3);
        } 
        else 
        {
            image.setImageResource(R.drawable.img4);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:21:38.243

以下代码描述了一个实现某些方法来实现放大和缩小功能的类。您可以修改此代码并将其包含在您自己的类中。

```
import android.app.Activity;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.os.Bundle;
import android.util.FloatMath;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;

public class ZoomInZoomOut extends Activity implements OnTouchListener 
{
    private static final String TAG = "Touch";
    @SuppressWarnings("unused")
    private static final float MIN_ZOOM = 1f,MAX_ZOOM = 1f;

    // These matrices will be used to scale points of the image
    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();

    // The 3 states (events) which the user is trying to perform
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // these PointF objects are used to record the point(s) the user is touching
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ImageView view = (ImageView) findViewById(R.id.imageView);
        view.setOnTouchListener(this);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) 
    {
        ImageView view = (ImageView) v;
        view.setScaleType(ImageView.ScaleType.MATRIX);
        float scale;

        dumpEvent(event);
        // Handle touch events here...

        switch (event.getAction() & MotionEvent.ACTION_MASK) 
        {
            case MotionEvent.ACTION_DOWN:   // first finger down only
                                                savedMatrix.set(matrix);
                                                start.set(event.getX(), event.getY());
                                                Log.d(TAG, "mode=DRAG"); // write to LogCat
                                                mode = DRAG;
                                                break;

            case MotionEvent.ACTION_UP: // first finger lifted

            case MotionEvent.ACTION_POINTER_UP: // second finger lifted

                                                mode = NONE;
                                                Log.d(TAG, "mode=NONE");
                                                break;

            case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

                                                oldDist = spacing(event);
                                                Log.d(TAG, "oldDist=" + oldDist);
                                                if (oldDist > 5f) {
                                                    savedMatrix.set(matrix);
                                                    midPoint(mid, event);
                                                    mode = ZOOM;
                                                    Log.d(TAG, "mode=ZOOM");
                                                }
                                                break;

            case MotionEvent.ACTION_MOVE:

                                                if (mode == DRAG) 
                                                { 
                                                    matrix.set(savedMatrix);
                                                    matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
                                                } 
                                                else if (mode == ZOOM) 
                                                { 
                                                    // pinch zooming
                                                    float newDist = spacing(event);
                                                    Log.d(TAG, "newDist=" + newDist);
                                                    if (newDist > 5f) 
                                                    {
                                                        matrix.set(savedMatrix);
                                                        scale = newDist / oldDist; // setting the scaling of the
                                                                                    // matrix...if scale > 1 means
                                                                                    // zoom in...if scale < 1 means
                                                                                    // zoom out
                                                        matrix.postScale(scale, scale, mid.x, mid.y);
                                                    }
                                                }
                                                break;
        }

        view.setImageMatrix(matrix); // display the transformation on screen

        return true; // indicate event was handled
    }

    /*
     * --------------------------------------------------------------------------
     * Method: spacing Parameters: MotionEvent Returns: float Description:
     * checks the spacing between the two fingers on touch
     * ----------------------------------------------------
     */

    private float spacing(MotionEvent event) 
    {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    /*
     * --------------------------------------------------------------------------
     * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
     * Description: calculates the midpoint between the two fingers
     * ------------------------------------------------------------
     */

    private void midPoint(PointF point, MotionEvent event) 
    {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }

    /** Show an event in the LogCat view, for debugging */
    private void dumpEvent(MotionEvent event) 
    {
        String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE","POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
        StringBuilder sb = new StringBuilder();
        int action = event.getAction();
        int actionCode = action & MotionEvent.ACTION_MASK;
        sb.append("event ACTION_").append(names[actionCode]);

        if (actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP) 
        {
            sb.append("(pid ").append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
            sb.append(")");
        }

        sb.append("[");
        for (int i = 0; i < event.getPointerCount(); i++) 
        {
            sb.append("#").append(i);
            sb.append("(pid ").append(event.getPointerId(i));
            sb.append(")=").append((int) event.getX(i));
            sb.append(",").append((int) event.getY(i));
            if (i + 1 < event.getPointerCount())
                sb.append(";");
        }

        sb.append("]");
        Log.d("Touch Events ---------", sb.toString());
    }
} 
```

# java - 如何为 PdfContentByte 设置下划线——iText

> ID：13206578
> 
> 赞同：1
> 
> 时间：2012-11-03T06:16:43.093
> 
> 标签：java, pdf, fonts, itext

我无法在 iText 中使用 PdfContentByte 设置下划线和上划线。我想为 sectionArea == 1 || 中的所有字段设置下划线 部分 Area == 3，如 getFontForFormat 中所述。到目前为止，我只能做大胆的风格，我也需要加下划线和上划线。这是代码：

```
public void doOutputField(Field field) {
    String fieldAsString = field.toString();
    BaseFont baseFont = getFontForFormat(field);
    float fontSize = 11;

    Point bottomLeft = bottomLeftOfField(field, 11, baseFont);

    int align;

    align = PdfContentByte.ALIGN_LEFT;

    //PdfContentByte content
    content.beginText();
    content.setFontAndSize(baseFont, fontSize);

    content.setColorFill(Color.BLACK);

    double lineHeight = field.getOutputHeight();

    content.showTextAligned(align, fieldAsString, (float) bottomLeft.x,
                (float) bottomLeft.y, 0f);

    bottomLeft.y -= lineHeight;

    content.endText();
}

public BaseFont getFontForFormat(Field field) {

    try {
        if (field.getSection().getArea().getArea() == 1
                || field.getSection().getArea().getArea() == 3) {
            BaseFont bf = BaseFont.createFont(BaseFont.TIMES_BOLD,
                    BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
            return bf;
        } else {
            BaseFont bf = BaseFont.createFont("Times-Roman",
                    BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
            return bf;
        }
    } catch (Exception e) {
    }
    return null;
} 
```

提前致谢

编辑（由 Bruno Lowagie 解决）：

这个问题可以通过使用 ColumnText 来解决。

```
 if (field.getSection().getArea().getArea() == 1
            || field.getSection().getArea().getArea() == 3) {

        Chunk chunk = new Chunk(fieldAsString);
        chunk.setUnderline(+1f, -2f);

        if (field.getSection().getArea().getArea() == 3) {
            chunk.setUnderline(+1f, (float) field.getBoundHeight());
        }

          Font font = new Font();
          font.setFamily("Times Roman");
          font.setStyle(Font.BOLD);
          font.setSize((float) 11);
          chunk.setFont(font);

          Paragraph p = new Paragraph();
          p.add(chunk);

         ColumnText ct = new ColumnText(content);
         ct.setSimpleColumn(p, (float)bottomLeft.x, (float)bottomLeft.y,
             (float)field.getBoundWidth() + (float)bottomLeft.x,
             (float)field.getBoundHeight() + (float)bottomLeft.y,
             (float)lineHeight, align);
             try {
             ct.go();
             } catch (DocumentException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
             }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:53:49.927

使用`PdfContentByte.showTextAligned()`. 你有什么不想使用的理由`ColumnText`吗？

使用`PdfContentByte`，您必须处理文本状态 -<code>beginText() 和`endText()`-、字体 -<code>setFontAndSize()-，并且您只能添加`String`值。如果要添加线条（例如下划线），则需要`moveTo()`, `lineTo()`,`stroke()`操作。这些运算符需要坐标，因此您需要`BaseFont`结合使用`String`和字体大小来测量线条的大小。涉及到一些数学。

如果您使用`ColumnText`，您可以选择使用 一次添加一行`ColumnText.showTextAligned()`。或者您可以使用定义一列`setSimpleColumn()`并让 iText 负责将文本分布在不同的行上。在这两种情况下，您都不必担心处理文本状态，也不必担心字体和大小。`ColumnText`接受`Phrase`对象，这些对象由`Chunk`您可以为其定义下划线和上划线值的对象组成。在这种情况下，iText 会为您完成所有数学运算。

# python - Python：如何实现获取最新位置

> ID：13206579
> 
> 赞同：2
> 
> 时间：2012-11-03T06:16:59.573
> 
> 标签：python

目标：-我需要解析具有以下输入的文件，并在状态获得批准且构建日期为最新时获取最新的（构建日期时间戳应该是最新的）位置。我提供了示例输入和输出，我在 perl 中有代码，python新手，请建议如何在python中实现

```
INPUT:-
Build:          M1234BAAAANAAW9321.1
Location:       \\dreyers\builds468\INTEGRATION\M1234BAAAANAA9321.1
Comments:       Build completed, labeled, and marked for retention.
Status:         Approved
BuildDate:      10/25/2012 12:51:25

Build:          M1234BAAAANAAW9321.2
Location:       \\crmbld01\Builds\FAILED\M1234BAAAANAA9321.2
Comments:       The build is currently in a failed status.
Status:         Failed
BuildDate:      10/25/2012 19:37:17

Build:          M1234BAAAANAAW9321.3
Location:       \\freeze\builds427\INTEGRATION\M1234BAAAANAA9321.3
Comments:       Build completed, labeled, and marked for retention.
Status:         Approved
BuildDate:      10/25/2012 19:43:28

OUTPUT:-\\freeze\builds427\INTEGRATION\M1234BAAAANAA9321.3 
```

以下是实现的perl代码，我是python新手，请建议我如何对这段代码进行pythonize

```
$ echo 'Build:          M1234BAAAANAAW9321.1
Location:       \\dreyers\builds468\INTEGRATION\M1234BAAAANAAW9321.1
Comments:       Build completed, labeled, and marked for retention.
Status:         Approved
BuildDate:      10/25/2012 12:51:25

Build:          M1234BAAAANAAW9321.2
Location:       \\crmbld01\Builds\FAILED\M1234BAAAANAAW9321.2
Comments:       The build is currently in a failed status.
Status:         Failed
BuildDate:      10/25/2012 19:37:17

Build:          M1234BAAAANAAW9321.3
Location:       \\freeze\builds427\INTEGRATION\M1234BAAAANAAW9321.3
Comments:       Build completed, labeled, and marked for retention.
Status:         Approved
BuildDate:      10/25/2012 19:43:28
' | perl -e'

local $/ = "";
my ( $build_date, $location );
while ( <> ) {
next unless /status:\s+approved/i;
my $date = sprintf "%04d%02d%02d%02d%02d%02d", ( /builddate:\s+(\d
++)\D+(\d+)\D+(\d+)\D+(\d+)\D+(\d+)\D+(\d+)/i )[ 2, 0, 1, 3, 4, 5 ];
if ( !defined $build_date || $build_date lt $date ) {
    ( $build_date, $location ) = ( $date, /location:\s+(.+)/i );
    }                                                           
} 
```

打印“$位置\n”；' \冻结\builds427\INTEGRATION\M1234BAAAANAAW9321.3

我尝试在python中编写以下内容，似乎不起作用，我想知道是否有更好的实现来实现目标..请建议

```
for line_info in lines:

    line_info.find('Location')

    if line_info.find('Location') == 0:
        # Build Location
        print "  Found Build location"
        logString += "  Found Build location\n"
        location = line_info.split(" ")
        location1 = location[len(location)-1]
    elif line_info.find('Status') == 0:
        # Status
        print "  Found Status"
        logString += "  Found Status\n"
        status = line_info.split(" ")
        removeEmpty(status)
        status1 = status[1].strip()
        if status1 != "Approved"
        goto .start
    elif line_info.find('BuildDate') == 0:
        # Main Make
        print "  Found BuildDate"
        logString += "  Found BuildDate\n"
        builddate1 = line_info.split(" ")
        removeEmpty(builddate1)
        builddate1 = builddate1[1]
        #if builddate1 > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:47:00.683

You could split the problem into series of simpler steps:

1.  read input line by line
2.  collect 'name: value' pairs
3.  group pairs into records (each record starts with 'Build' pair)
4.  select 'Approved' records that have non-blank 'BuildDate', 'Location' values
5.  find the latest record using given date/time format

Implementation:

```
#!/usr/bin/env python
import sys
from datetime  import datetime
from itertools import groupby

# find all 'name: value' pairs
file = sys.stdin
pairs = ([s.strip() for s in line.partition(':')[::2]]
         for line in file if ':' in line)

# group records
def record_start(pair, count=[False]):
    """Mark start of a record."""
    if pair[0] == 'Build':
        count[0] = not count[0]
    return count[0]
records = (dict(record) for _, record in groupby(pairs, record_start))

approved = (r for r in records if r.get('Status') == 'Approved' and
            all(r.get(name) for name in "BuildDate Location".split()))

# find latest record
def get_date(record):
    try:
        return datetime.strptime(record['BuildDate'], '%m/%d/%Y %H:%M:%S')
    except ValueError:
        return datetime.min # handle invalid date strings

latest = max(approved, key=get_date)
assert get_date(latest) != datetime.min
print(latest['Location']) 
```

### [Output](http://ideone.com/tgUVfj)

```
\\freeze\builds427\INTEGRATION\M1234BAAAANAA9321.3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:48:54.850

Try this code:

```
lastLocation = None
lastTime = None
skip = False

bestLocation = None
bestTime = None

for line in text.split('\n'):    
    line.find('Location')
    if line.find('Location') == 0:
        # Build Location
        skip = False
        print "  Found Build location"
        lastLocation = line.split(":")[1].lstrip()       
    elif line.find('Status') == 0:
        # Status
        print "  Found Status"
        status = line.split(":")
        status1 = status[1].strip()
        if status1 != "Approved":
            skip = True
    elif line.find('BuildDate') == 0 and not skip:
        # Main Make
        print "  Found BuildDate"
        timeStr = line.split(":", 1)[1].lstrip()
        lastTime = datetime.datetime.strptime(timeStr, "%m/%d/%Y %H:%M:%S")
        if bestTime == None or bestTime < lastTime:
            bestTime = lastTime
            bestLocation = lastLocation
print lastLocation 
```

# c# - 定期自动点击按钮

> ID：13206581
> 
> 赞同：0
> 
> 时间：2012-11-03T06:17:12.380
> 
> 标签：c#, asp.net, .net, timer

我有一个 Web 应用程序，可以生成其他团队上传的较小图像的放大图像，如果上传的文件夹中没有图像，则停止。

需要单击一个按钮以开始生成图像并在每次完成时重新启动。

是否可以在应用程序停止时定期自动触发此单击事件，例如 15 分钟或更长时间。

[在较早的线程How to write C# Scheduler](https://stackoverflow.com/questions/7764812/how-to-write-c-sharp-scheduler)上提出了类似的问题。

```
private void OnTimerTick()
{
    if (DateTime.Now.Minutes % 15 == 0)
    {
        // Do something
    }
} 
```

我应该在哪里放置计时器来调用下面的代码？

```
protected void btnImgGenerate_click()
{
    // Application code
} 
```

有没有办法检查asp.net中的Web应用程序是否已停止执行然后自动重新启动它？

使用计时器，我可以安排应用程序在一天中的特定时间启动和停止，并使用第二种方法使应用程序在指定的一天中持续运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:26:35.743

在 15 分钟后单击按钮（这将导致回发并触发您的事件）的 jQuery 实现是：

```
$(document).ready(function(){
    setTimeout(function(){$('btnImgGenerate').click();},900000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:35:35.660

您可以添加代码以从 Global.asax 文件中的 System.Threading 命名空间初始化计时器，并将其配置为以所需的周期执行某些功能。但是，如果您的应用程序崩溃，您将遇到以下问题：

> 有没有办法检查 asp.net 中的 Web 应用程序是否已停止执行然后自动重新启动它？
> 
> 使用计时器，我可以安排应用程序在一天中的特定时间启动和停止，并使用第二种方法保持应用程序在一天中指定的持续时间内运行。

没有。如果由于某些原因停止并且没有新请求出现，您将无法从自身启动 Web 应用程序。因此，在我看来，出于您的目的，更适合 Windows 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:23:27.343

有一个启动计时器的按钮单击事件-

```
 protected void button1_Click(object sender, EventArgs e)
    {
     timer1.Enabled = true;
    } 
```

在计时器 Tick 事件中，您可以执行以下操作-

```
protected void timer1_Tick(object sender, EventArgs e)
    {
      timer1.enabled=false;
      //do your coding
      timer1.enabled= true;
    } 
```

因此，一旦您单击按钮，计时器就会启动，执行所有操作，最后在您将 timer1.enabled 设置为 true 后自动重新启动。

如果您正在寻找在没有点击事件的情况下自动执行此操作，您可以使用 javascript setInterval() 方法 - 请参见此处的示例 -

[http://www.w3schools.com/jsref/met_win_setinterval.asp](http://www.w3schools.com/jsref/met_win_setinterval.asp)

# linux - 无法在 VirtualBox 中安装 CentOS

> ID：13206584
> 
> 赞同：0
> 
> 时间：2012-11-03T06:17:35.330
> 
> 标签：linux, centos, virtualbox

我正在尝试在 My VirtualBox 中安装 CentOS 5.6，但在启动屏幕上出现此错误。

`Your CPU Does not support long mode : use a 32 bit Distribution`

我的 CPU 是 64 位的，我检查了使用 `uname -a' 命令，输出是

`Linux localhost.localdomain 2.6.43.8-1.fc15.x86_64 #1 SMP Mon Jun 4 20:33:44 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux`

据我所知，我需要为我的 VirtualBox 启用 32 位支持，但我无法从哪里启用它。

如果您对此有任何想法，请建议我。

感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:09:59.200

最近，VMware（在 VMplayer 5 和 VMware 工作站 9 中）和 Oracle Virtual Box 都要求您在计算机的 BIOS 中启用 VT 扩展，以便 64 位支持工作。

来自 Wikipedia：VirtualBox 仅在具有硬件辅助虚拟化的主机上支持某些客户机（包括 64 位客户机、SMP 客户机和某些专有操作系统）。

换句话说，确保您在 BIOS 中启用了 VT 扩展，它应该可以工作。

**编辑：**如果您不确定您的系统是否甚至支持硬件辅助虚拟化，这是如何检查：

1.  Windows：安装并运行[HAV 检测工具](http://www.microsoft.com/en-us/download/details.aspx?id=592)

2.  Linux：`cat /proc/cpuinfo`并检查`vmx`(Intel VT) 或`svm`(AMD SVM) 标志。如果您没有看到它们，则说明您的硬件太旧了。

# microsoft-sync-framework - Microsoft Sync Framework 2.1 范围创建删除问题

> ID：13206585
> 
> 赞同：0
> 
> 时间：2012-11-03T06:17:40.797
> 
> 标签：microsoft-sync-framework

这是我使用 Microsoft Sync Framework 2.1 的第一个应用程序，因此您假设我对此一无所知。

问题是我需要同步表 - 这些要同步的表数量随着数据库的变化而增加或减少。同样，表格的方向在本质上也是随机的，有时它是向上或向下或双向的。连规则都不一样

由于我们没有大量的客户端/分销商，因此要为 UserA 同步的表的数量可能与 UserB 甚至方向不同。

因为我们需要创建范围，我发现我们需要为每个更改和每个用户表创建一个新的范围，对吗？

**所以示例我们有 100 个表 10 个用户和 3 个方向，那么没有范围的可能性将超过 3000**

范围数如何影响**数据库性能？**

即使我不知道如何删除在数据库中删除的表的范围？或者我选择不同步，甚至对于用户也不同步。

我发现有一种叫做取消配置的东西，但不知道如何使用它。

此外，我还需要对表应用过滤器，所以在这种情况下，我是否需要再次创建新的范围？我不知道如何创建过滤器，因为我下载的示例没有任何过滤器示例？

非常感谢任何**帮助/示例/链接**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:26:21.967

范围是在单个同步会话中同步在一起的表的集合。要包括多少张桌子取决于您。

查看此链接以获取一些指导：[同步框架范围和 SQL Azure 数据同步数据集注意事项](http://jtabadero.wordpress.com/2012/03/01/sync-framework-scope-and-sql-azure-data-sync-dataset-considerations/)

我建议您先阅读文档和教程/演练。该文档实际上是随框架一起安装的。

如果您找不到它们，这里是相应的链接：

[如何：使用同步范围](http://msdn.microsoft.com/en-us/library/gg294195.aspx)

[如何：预配和取消预配同步范围和模板 (SQL Server)](http://msdn.microsoft.com/en-us/library/ff928603.aspx)

[如何：筛选数据以进行数据库同步 (SQL Server)](http://msdn.microsoft.com/en-us/library/ff928701.aspx)

如果您想进一步了解配置的实际作用，请查看以下内容：[同步框架配置](http://jtabadero.wordpress.com/2010/09/02/sync-framework-provisioning/)

您可能想要指定您实际同步的数据库

# python - 为什么这个 Python 勾股定理求解器不起作用？

> ID：13206586
> 
> 赞同：-3
> 
> 时间：2012-11-03T06:17:43.163
> 
> 标签：python, pythagorean

```
print "Welcome to Dylan's Pythagorean Theorem Solver."

from math import sqrt 

print "What are we solving for? A hypotenuse or a leg?"

ask = raw_input("# ")

if ask == "hypotenuse":
    print "What is the value of your first leg?"

    leg1 = raw_input("# ")

    print "The value of your first leg is %s. What is the value of your second leg?" % (leg1)

    leg2 = raw_input("# ")    

    print "The length of your hypotenuse is "sqrt((leg1 ** 2) + (leg2 ** 2)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T07:17:13.150

我是初学者，但这就是我让你的代码工作的方式：

Raw_input 产生字符串。您需要先将 leg1 和 leg2 转换为整数或浮点数，然后才能在 sqrt 中使用它们。你可以这样做：

```
leg1 = int(input("# ")) 
```

你有同样的问题，但在打印中相反（python 期待一个 str 但得到一个浮点数）。您还缺少打印中的运算符。

为 sqrt 的结果创建一个新变量，将其转换为 str，然后在 print 中使用该变量可能更容易。

```
hypotenuse = str(sqrt((leg1 ** 2) + (leg2 ** 2))) 
```

# spring - 如何在类注解@controller 中获取Spring WebContext

> ID：13206588
> 
> 赞同：8
> 
> 时间：2012-11-03T06:17:54.750
> 
> 标签：spring, servlets, spring-mvc, autowired, applicationcontext

在带有注解的 Spring MVC 中，我们使用 @Controller 标记任何 POJO。在这个控制器中，我们可以使用 autowired 属性获取 WebApplicationContext。

```
@Controller
public class HomePageController {

@Autowired
ApplicationContext act;

    @RequestMapping("/*.html")
    public String handleBasic(){
        SimpleDomain sd = (SimpleDomain)act.getBean("sd1");
        System.out.println(sd.getFirstProp());
        return "hello";
} 
```

但是在这种方法中，我们没有方便的 servletContext。那么有没有办法我们仍然可以使用旧的方式来获取 WebApplicationContext ？IE

```
WebApplicationContextUtils.getRequiredWebApplicationContext(servletContext) 
```

我们将如何在这里获得 servletContext ？

我没有面临使用旧方式的任何强迫；所以这个问题只是出于好奇来检查弹簧的灵活性。也可以是面试题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-03T16:11:36.553

您可以将其注入您的控制器：

```
@Autowired private ServletContext servletContext; 
```

或者将 HttpServletRequest 作为参数并从那里获取：

```
@RequestMapping(...)
public ModelAndView myMethod(HttpServletRequest request ...){
    ServletContext servletContext = request.getServletContext()
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T06:03:31.603

以下是正确的做法：

```
@Autowired
ServletContext context; 
```

否则，您可以实现 ServletContextAware，而不是自动连接 ServletContext。Spring 在 Web 应用程序上下文中运行时会注意到这一点并注入 ServletContext。读[这个](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/context/ServletContextAware.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-02T00:25:06.233

您可以从 Spring 实现一个名为的接口`org.springframework.web.context.ServletContextAware`

```
public class MyController implements ServletContextAware {
    private ServletContext servletContext; 

    @Override
    public void setServletContext(ServletContext servletContext) {
       this.servletContext=servletContext;
    }
} 
```

然后你可以使用`servletContext`课堂上的任何地方。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-20T12:01:26.507

你也可以内联：

```
@RequestMapping(value = "/demp", method = RequestMethod.PUT)
public String demo(@RequestBody String request) {
    HttpServletRequest re3 = ((ServletRequestAttributes) RequestContextHolder

            .getRequestAttributes()).getRequest();
    return "sfsdf";
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T13:56:43.873

通过访问会话，您可以获得 servlet 上下文，示例代码：

```
@Controller
public class MyController{

....
@RequestMapping(...)
public ModelAndView myMethod(HttpSession session ...){

WebApplicationContextUtils.getRequiredWebApplicationContext(session.getServletContext())

}

} 
```

您也可以从 HttpServletRequest 获取 HttpSession。

# c++ - 具有多个窗口的 OpenGL 程序

> ID：13206594
> 
> 赞同：0
> 
> 时间：2012-11-03T06:18:35.953
> 
> 标签：c++, opengl

我正在寻找一种有效的方法来为 C++ 中的一个 OpenGL 程序使用两个单独的窗口。它是一个绘图程序，与 Photoshop 或 Illustrator 一样，我希望有一个工具栏，它是一个单独的窗口，可以四处移动，但在用户开始绘图时不会发送到合成窗口后面。这可以做到吗？

# c - 如何重定向 fork() 创建的子进程的 IO 并使用 exec() 函数？

> ID：13206602
> 
> 赞同：1
> 
> 时间：2012-11-03T06:19:17.250
> 
> 标签：c, linux, ipc, fork

我正在用 C 语言编写一个 Shell。用户应该能够执行各种命令并使用管道（|）将一个命令的输入重定向到另一个命令。主 shell 进程是父进程，并为每个命令派生新进程，在子进程中，该命令由 exec*() 函数调用。

但我不知道如何将一个子进程的标准输入/输出重定向到另一个子进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:31:18.883

也许这可以帮助你....

```
int f=open(somefile, O_WRONLY | O_CREAT, S_IRWXU);
dup2(f,1);  //redirecting output to file
//execute your first command here using fork
close(f);
int f=open(somefile, O_RDONLY | O_CREAT, S_IRWXU);
dup2(f,0);    //this will give the ouput of the first command to stdout 
//i.e. the input is present for second one
//execute your second command here
close(f); 
```

# java - POJO定义中的N+1关系

> ID：13206603
> 
> 赞同：0
> 
> 时间：2012-11-03T06:19:44.987
> 
> 标签：java

我对 1+N 关系有疑问。我设计了如下具有 Workplace 和 Employee 关系的 POJO。

1+N --> 一家公司多员工

```
public class WorkplaceDetail implements Serializable {

private static final long serialVersionUID = -6760386803958725272L;
private int code;
private String plant;
private String compRegNum;
private String numOfEmps;
private List <Employee> employee = new ArrayList<Employee>();
      private Address address;
}

public class Employee{

private String empName;
private int empNumber;
      private Address address;
} 
```

公共类地址{

```
private String primaryPhone;
private String secPhone;
private String mobileNum;
private String fax;
private String zip;
private String add1;
private String add2; 
```

} **或**

N+1 关系，员工属于一个工作场所。

```
public class WorkplaceDetail implements Serializable {

private static final long serialVersionUID = -6760386803958725272L;
private int code;
private String plant;
private String compRegNum;
private String numOfEmps;   
}

public class Employee{

private String empName;
private int empNumber;
    private WorkplaceDetail WorkplaceDetail;
} 
```

请让我知道哪个是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:08:38.040

这是给你的答案。请注意，这只是一个片段，您应该处理与配置相关的事情。

```
public class Address {

private String primaryPhone;
private String secPhone;
private String mobileNum;
private String fax;
private String zip;
private String add1;
private String add2;
//As you said one to one relationship
private Employee employee;
private WorkplaceDetail workplaceDetail;
}

public class Employee{

private String empName;
private int empNumber;
private Address address;
private WorkplaceDetail workplaceDetail;
}

public class WorkplaceDetail implements Serializable {

private static final long serialVersionUID = -6760386803958725272L;
private int code;
private String plant;
private String compRegNum;
private String numOfEmps;
private List <Employee> employee = new ArrayList<Employee>();
private Address address;
} 
```

希望这可以帮助你......！

# php - 避免在 MVC 中使用 PHP 自动路由

> ID：13206604
> 
> 赞同：0
> 
> 时间：2012-11-03T06:20:08.810
> 
> 标签：php, codeigniter, codeigniter-routing

我正在使用**MVC**，并且在我的应用程序文件中，我以这种方式路由：

```
# Routing
$routing = array(
    '([a-zA-Z]+)\/?'    =>  array('Post', 'view')
);
framework::routing($routing); 
```

这意味着像“mysite.com/anything/”这样的所有 URL 都将被路由到相同的模板，但内容不同。到那时，一切都好。

我的问题是我想为此破例，

因为**我想**直接在浏览器中访问我的页面“mysite.com/uploads”，但是由于路由 php 的东西，我被重定向了。

**有没有办法让这个路由例外？像路由除“上传”外的所有名称一样？**

我可以提交路由文件，但由于它与 codeigniter 几乎相同，因此您可能不需要它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T13:01:54.353

看到您的网址不再包含 index.php 部分，我猜您添加了一个 .htaccess 文件来执行此操作，可能看起来像这样（直接来自 codeigniter 文档）：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

如果是这种情况，并且上传文件夹与 codeigniter 的根 index.php 文件位于同一文件夹中，则应将第二行更改为：

```
RewriteCond $1 !^(index\.php|images|uploads|robots\.txt) 
```

但这一切都取决于您的具体配置。

**编辑：**尽管您似乎没有使用 CodeIgniter，但这同样适用于 Zend Framework MVC。您应该对重写规则进行例外处理，以允许直接访问您的上传目录。

# java - Android Java 文本未居中

> ID：13206605
> 
> 赞同：1
> 
> 时间：2012-11-03T06:20:31.660
> 
> 标签：java, android

我正在尝试使文本全部居中，但没有成功。这是我的xml代码

```
<TextView
android:id="@+id/creditText"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:textSize="20dp"
android:textColor="#ffffff"
android:layout_marginLeft="0dp"
android:layout_marginTop="350dp"
android:gravity="center"
android:maxLines="6"
android:text="
Dalton Metlzer: Lead Programer/Designer
Cole Selensky: Lead Designer/Programer 
Carson Rego: Lead Artist
Carly R: Logo Artist
Evan Swonke: Music Composer/Performer
Blake Jackson: Narator"
 /> 
```

相反，它只是变得混乱起来。

这就是它的样子 [http://i.imgur.com/DVNua.png](http://i.imgur.com/DVNua.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:25:40.867

您在这些名称之间给出了空格。我假设您想要一个位于页面中心的垂直名称列表。在这种情况下，在每个名称的末尾，而不是空格，按 Enter 键，这样您就会得到一个换行符。然后，您可以获得一个很好的居中垂直名称列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:28:13.420

试试这个：

```
<TextView
        android:id="@+id/creditText"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="0dp"
        android:layout_marginTop="0dp"
        android:gravity="center"
        android:maxLines="6"
        android:text="
Dalton Metlzer: Lead Programer/Designer
Cole Selensky: Lead Designer/Programer 
Carson Rego: Lead Artist
Carly R: Logo Artist
Evan Swonke: Music Composer/Performer
Blake Jackson: Narator"
        android:textColor="#ffffff"
        android:textSize="20dp" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:34:34.293

**可能有用此代码**

```
 <TextView
        android:id="@+id/creditText"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="0dp"
        android:layout_marginTop="350dp"
        android:gravity="center"
        android:textColor="#ffffff"
        android:textSize="20dp"
        android:maxLines="6"
        android:text="Dalton 
                   Metlzer: Lead Programer/Designer\n
                   Cole Selensky: Lead Designer/Programer\n 
                   Carson Rego: Lead Artist\n
                   Carly R: Logo Artist\n
                   Evan Swonke: Music Composer/Performer\n
                   Blake Jackson: Narator"
        /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T06:41:37.733

首先，您需要用换行符和所有内容格式化文本，而不是像删除这样的 XML 文件中的一些更改

> android:layout_marginTop="350dp"

像这样的新xml代码

```
 <TextView
android:id="@+id/creditText"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:textSize="20dp"
android:textColor="#000000"
android:layout_marginLeft="0dp"
android:gravity="center"
android:maxLines="6"
android:text="
Dalton Metlzer: Lead Programer/Designer
Cole Selensky: Lead Designer/Programer 
Carson Rego: Lead Artist
Carly R: Logo Artist
Evan Swonke: Music Composer/Performer
Blake Jackson: Narator"
 /> 
```

这里我没有格式化文本。

根据您的要求格式化文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T07:53:22.587

尝试添加这个：

```
android:layout_gravity="center" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T10:50:01.930

android:gravity 属性在 TextView 的内容中生效，但由于您也有 android:layout_width="wrap_content" 您没有居中位置。

要么放

```
android:gravity="center"
android:layout_width="match_parent" 
```

在内部增长 TextView 和中心，或

```
android:layout_gravity="center_horizontally"
android:layout_width="wrap_content" 
```

保持 TextView 的最小宽度并将它的中心放在它的父级上

# php - 无法加载请求的类：会话

> ID：13206609
> 
> 赞同：3
> 
> 时间：2012-11-03T06:20:51.167
> 
> 标签：php, codeigniter, session

我的配置文件看起来像这样->

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = TRUE;
$config['sess_encrypt_cookie']  = FALSE;
$config['sess_use_database']    = FALSE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

自动加载是->

```
$autoload['libraries'] = array('database','session','uri'); 
```

我收到错误消息：

```
Unable to load the requested class: session 
```

请告诉我实际的问题是什么。我已经搜索了所有与此相关的先前问题，但还无法解决问题。提前致谢 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T07:55:33.460

设置你的 config.php 文件

```
$config['encryption_key'] = 'xyz' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T06:43:04.003

Your autoload is OK. It doesn't matter if you write it with cap letters or with not capitals.

At config put some random key at

`$config['encryption_key']`

2nd Check your folders permissions.

Tell us which version of CI you are using :)

Currently there are 2 possible reasons .. 1st is that for some reason your CI can't find session class, and second is if its try to load it more than once..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:45:26.037

您可能多次尝试加载 Session 类。检查您的代码是否有重复会话的负载。它将解决您的问题！还要确保将 Session 类作为库而不是作为驱动程序加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T12:00:57.277

尝试 ：

```
$this->load->library('Session'); 
```

代替

```
$this->load->driver('Session'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-13T19:43:20.313

我有这个问题，问题出在会话脚本所在的系统文件夹中。您需要将 Session 文件移到结构树上一层（文件从`System/libraries/session`到`System/libraries`）。我知道更改系统的文件和结构是不好的做法，但这是唯一的解决方案。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-03T06:32:14.233

可能是以下原因抛出此消息`Unable to load the requested class - encrypt`

1）在新服务器上，您的 lib 文件名如何更改。所以 CI 无法找到该文件

2) 可能给定 lib 文件在服务器上不存在。所以 CI 无法找到该文件

3) 可能是文件名大小写的问题。

首先检查 system/application/libraries/Session.php 是否可执行。如果这不起作用，请尝试更改自动加载中的行：

```
$autoload['libraries'] = array('database', 'session','uri'); 
```

至

```
$autoload['libraries'] = array('database', 'Session','uri'); 
```

并尝试

`$config['encryption_key'] = '`abc1234';

# python - Python将多个值从一个列表关联到另一个列表

> ID：13206611
> 
> 赞同：-2
> 
> 时间：2012-11-03T06:21:40.260
> 
> 标签：python, sql, list

我有一个非常简单的想法，但不完全知道如何去做。我有两个不同长度的列表（比如说一个有 50 个，另一个有 200 个）。

所以

```
len(x) = 50
len(y) = 200 
```

我想要做的是打印出一些行，其中 x 的一个值对应于 y 的多个值（如果数字重复则无关紧要）。

```
I.e. suppose x = [1,2,3,4]
y = [7,8,9,10,11,12,13,14,15,16,17]

I want to print out:
1: 7
1: 8
1: 9
1: 10
2: 11
2: 12
2: 13
3: 14
3: 15
3: 16
4: 17 
```

y 值的随机化并不重要。对于 x 的每个值，打印出多少个多个值都没有关系。我基本上是在尝试编写一个将多个元素从一个表插入另一个表并使用 python 编写脚本的 sql 脚本。

我知道这可以通过简单地迭代最小列表并拥有多个 f.write() 语句来完成，同时增加一些变量以使多个 y 值与单个 x 值相关联。但这并没有涵盖 y 的所有值，而且看起来有点傻。有没有更好的方法来做到这一点？

编辑：对于我如何提出键与值的关联的问题，1 个键与多少个值关联（存在 8 的上限）并不重要。只能有 1 个值或多个（最多 8 个）。再说一次，键之间可能存在重复值（即在我的示例中没有，但键 4 也可以说具有值 7/8）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:18:14.467

试试这个 Python 解决方案：

```
>>> x = [1,2,3,4]
>>> y = [7,8,9,10,11,12,13,14,15,16,17]
>>> lnx, lny = len(x), len(y)
>>> groupatleast = (lny + lnx - 1) // lnx
>>> x2y = {}
>>> for i in range(lnx):
    x2y[x[i]] = y[i*groupatleast: (i+1)*groupatleast]

>>> x2y[x[i]] += y[(i+1)*groupatleast:]
>>> for x1,ylist in sorted(x2y.items()):
    for y1 in ylist:
        print ("%i: %i" % (x1, y1))

1: 7
1: 8
1: 9
2: 10
2: 11
2: 12
3: 13
3: 14
3: 15
4: 16
4: 17
>>> 
>>> # Help:
>>> lnx, lny
(4, 11)
>>> groupatleast
3
>>> x2y
{1: [7, 8, 9], 2: [10, 11, 12], 3: [13, 14, 15], 4: [16, 17]}
>>> ylist
[16, 17]
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:50:03.883

```
>>> xs = [1,2,3,4]
>>> ys = [7,8,9,10,11,12,13,14,15,16,17]

>>> for (i, y) in enumerate(ys):
>>>    print "%d: %d" % (xs[len(xs) * i / len(ys)], y)
1: 7
1: 8
1: 9
2: 10
2: 11
2: 12
3: 13
3: 14
3: 15
4: 16
4: 17

>>> import itertools
>>> for x, y in itertools.izip(itertools.cycle(xs), ys):
...     print "%d: %d" % (x, y)
...
1: 7
2: 8
3: 9
4: 10
1: 11
2: 12
3: 13
4: 14
1: 15
2: 16
3: 17 
```

# lua - Lua 脚本和 redis - 如何测试 None 值

> ID：13206613
> 
> 赞同：4
> 
> 时间：2012-11-03T06:22:19.747
> 
> 标签：lua, redis

下面是我的lua脚本：

```
 local ckid = redis.pcall('get',KEYS[1])
     local meta = redis.call('hgetall', ckid)
     return {ckid, meta} 
```

如果第一次调用没有退出密钥，我不想执行第二次调用。

所以...我不知道 None 的返回值是什么。在 python 中，返回值为 None。

```
if ckid ~= '???????' then 
    local meta = redis.call('hgetall', ckid)
else
     local meta = 'empty'
retrun {ckid, meta} 
```

那么......我该怎么做是lua？

```
 local ckid = redis.pcall('get',KEYS[1])
     if ckid ~= nil then
         local meta = redis.call('hgetall', ckid)
     else
         local meta = 'none'
         local ckid = 'none'
     end

     return {ckid, meta} 
```

使用零时..

```
ResponseError: ERR Error running script (call to f_1400713412b0063a26eb0dc063f53a4e3be26380): user_script:12: Script attempted to access unexisting global variable 'meta' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T07:30:00.880

如果你在 if 语句中定义了一个局部变量，它只存在于 if 语句中。查看手册中的局部变量范围。

尝试

```
 local ckid = redis.pcall('get',KEYS[1])
 local meta
 if ckid ~= nil then
     meta = redis.call('hgetall', ckid)
 else
     meta = 'none'
     ckid = 'none'
 end

 return {ckid, meta} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:37:05.627

`nil` [这是手册中提到的第一件事。](http://www.lua.org/manual/5.2/manual.html#2.1)

# c# - 'System.Net.Sockets.Socket.Dispose(bool)' is inaccessible due to its protection level

> ID：13206617
> 
> 赞同：3
> 
> 时间：2012-11-03T06:22:46.857
> 
> 标签：c#, visual-studio-2008

I got this error while compiling. what does it mean and how do i resolve it?

'System.Net.Sockets.Socket.Dispose(bool)' is inaccessible due to its protection level

Here are both of my files;

Listener.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
namespace Multi_con_Server
{
class Listener
{
    Socket s;

    public bool Listening
    {
        get;
        private set;
    }
    public int Port
    {
        get;
        private set;
    }

    public Listener(int port)
    {
        Port = port;
        s = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    }
    public void Start()
    {
        if (Listening)
            return;
        s.Bind(new IPEndPoint(0, Port));
        s.Listen(0);

        s.BeginAccept(callback, null);
        Listening = true;
    }
    public void Stop()
    {
        if (!Listening)
            return;

        s.Close();
        s.Dispose();
        s = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    }

    void callback(IAsyncResult ar)
    {
        try
        {
            Socket s = this.s.EndAccept(ar);

            if (SocketAccepted != null)
            {
                SocketAccepted(s);
            }

            this.s.BeginAccept(callback, null);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

    }
    public delegate void SocketAccecptedHandler(Socket e);
    public event SocketAccecptedHandler SocketAccepted;

}
} 
```

Program.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
namespace Multi_Con_C
{
class Program
{
    static void Main(string[] args)
    {
        Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Stream,    
    ProtocolType.Tcp);
        s.Connect("127.0.0.1", 8);
        s.Close();
        s.Dispose();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T06:29:16.053

From [MSDN](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.close.aspx), `Socket.Close()` automatically "releases all associated resources". You can safely remove all occurances of `Socket.Dispose()` from your code.

# c - 如何去除C语言getmac程序中的错误？

> ID：13206623
> 
> 赞同：1
> 
> 时间：2012-11-03T06:23:53.067
> 
> 标签：c, file-io, include, system, file-handling

请在下面找到我得到的代码和输出。

我的 C 代码在`c:/turboc3/bin`目录中，我的输出`macid.txt`在`c:/turboc3/disk`.

这是我正在编译的代码

```
#include <stdio.h>
#include <conio.h>
#include <string.h>

int main ()
{
    //char mac[200];
    FILE *fp;
    clrscr();
    // fp=fopen("c:\macid.txt","w");
    system("GETMAC>c:/macid.txt");
    fp=fopen("c:/macid.txt","r");
    if(fp!=NULL)
    {
        char line[128];
        while(fgets(line,sizeof line,fp)!=NULL)
        {
            char *nwln=strchr(line,'\n');
            char *ptr;
            if(nwln!=NULL)
                *nwln='\0';
            ptr=strstr(line,"Physical Address");
            if(ptr!=NULL)
            {
                printf("%s\n",ptr);
                break;
            }
        }
    }
    getch();
    return 0;
} 
```

输出是：

```
Illegal command: GETMAC. 
```

谁能指导我完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:55:18.553

非法命令：GETMAC 暗示，它试图运行它但不能。

首先，要解决的问题：记住在字符串中转义 \。不要使用 / 作为路径分隔符。

然后，按大致顺序尝试的事情：尝试使用 GETMAC 的完整路径。尝试不重定向。尝试使用不同的程序。将 GETMAC 包装到 bat 文件中，该文件执行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:56:18.917

我不确定你的文件 macid.txt 是如何驻留的，但是 - 我认为你可以通过提供函数调用`c:/turboc3/disk`的完整路径来解决这个问题。`system()`

像这样：

`system("c:/windows/system32/getmac.exe > macid.txt");`

# linux - linux nasm程序集在终端中清除屏幕

> ID：13206629
> 
> 赞同：0
> 
> 时间：2012-11-03T06:25:15.813
> 
> 标签：linux, assembly, x86, nasm

有没有办法用 nasm 清除终端窗口中的屏幕？通过清除屏幕，我的意思是模拟`Ctrl-L`热键。从窗口中删除所有文本。

这可以在 nasm 组装中完成吗？

提前致谢，

赖莱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:32:02.967

在 Bash 中：

```
echo -ne "\033[H\033[2J" 
```

在 C 中：

```
printf("\033[H\033[2J"); 
```

如何找到字符串：

```
$ strace -e trace=write clear >/dev/null 
write(1, "\33[H\33[2J", 7)              = 7
Process 7983 detached 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:55:15.240

看看这个 NASM 程序：

[http://www.muppetlabs.com/~breadbox/software/tiny/snake.asm.txt](http://www.muppetlabs.com/~breadbox/software/tiny/snake.asm.txt)

有一个有趣的部分展示了如何将转义序列写入标准输出：

```
%define SC_write        4   ; eax = write(ebx, ecx, edx)
%define ESC         033q

; (...)

refresh:
        mov eax, ESC | ('[' << 8) | (BOTTOMROW << 16)
        stosd
        mov eax, ';0H' | (SI << 24)
        stosd
        mov edx, edi
        mov edi, outbuf
        mov ecx, edi
        sub edx, ecx
        xor ebx, ebx
        lea eax, [byte ebx + SC_write]
        inc ebx
        int 0x80 
```

该代码可能并不完全符合您的要求，但很容易将其修改为 output `\033[H\033[2J`。也看看这里：

[http://ascii-table.com/ansi-escape-sequences-vt-100.php](http://ascii-table.com/ansi-escape-sequences-vt-100.php)

另外，如果您希望您的代码具有可移植性，请考虑使用一些在不同终端之间兼容的库，例如[ncurses](http://www.gnu.org/software/ncurses/)。

（**编辑**：那是针对 Linux 的。如果你在 Windows 上，我会试试[这个](http://www.programmersheaven.com/mb/x86_asm/59673/59673/clear-screen/)。）

# cakephp-1.3 - HTML2PS pdf 使用 cakephp

> ID：13206635
> 
> 赞同：-1
> 
> 时间：2012-11-03T06:25:30.867
> 
> 标签：cakephp-1.3, html2ps

从类中生成的 pdf 文件未打开。我在尝试打开 pdf 时收到消息：“Adobe 阅读器可以打开“test.pdf”，因为它不是支持的文件类型或文件已损坏（例如，它作为电子邮件附件发送并且被'nt 正确解码）。

希望你能为我找到解决方案！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T07:40:26.770

您提供的信息不足以让任何人解决您的问题。我得到的是您在 ps/pdf 生成方面有问题，但是我们无法猜测到什么和在哪里！因此，不，我们无法为您找到解决方案，因为我们不知道您的问题可能是什么……阅读[有关如何提出问题的页面](https://stackoverflow.com/questions/how-to-ask)。

另外你为什么要使用这个库 - `html2ps/html2pdf`？已经很古老了。我可以提出一些其他的当代解决方案：

[DomPdf](http://code.google.com/p/dompdf/)
[Mpdf](http://www.smaizys.com/php/mpdf-html-to-pdf-introduction/)
[Tcpdf](http://www.tcpdf.org/)
[pdftk](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)
[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)

我个人推荐`wkhtmltopdf`。它使用[WebKit](http://www.webkit.org/%5C)引擎，然后生成 PDF 文件。如果你使用它，你也不应该改变你的应用程序，因为这两个是一个可执行文件，你必须调用 whit exec()（如果在 Linux/Unix 上）或[COM Objects](http://php.net/manual/en/book.com.php)如果在（Windows）上。

# ruby-on-rails - 即使将 token_authenticable 添加到设计中，设计中的令牌身份验证也不起作用

> ID：13206638
> 
> 赞同：0
> 
> 时间：2012-11-03T06:25:54.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我已经设计了身份验证，以下是我所做的步骤和令牌身份验证不起作用

1.  添加`devise`到gem文件
2.  rails 生成设计：安装
3.  rails 生成设计用户
4.  耙分贝：迁移
5.  rails 生成设计：视图
6.  rails 生成控制器主页索引

到此为止没有问题然后我添加`devise:token_authenticatable`到用户模型然后我添加`before_save :ensure_authentication_token`然后

1.  rails 生成迁移 AddTokenAuthenticatableToUser authentication_token:string

然后将 attr_accessible :authentication_token 添加到用户模型

但

```
curl -H 'Content-Type: application/json'   -H 'Accept: application/json'   -X POST http://localhost:3000/users/sign_in  -d "{'user' : { 'email' : 'sample@gmail.com', 'password' : 'xxxxxxxx'}}" 
```

不管用。它在终端中显示错误。请告诉我应该怎么做才能获取用户的令牌并在后续请求中使用它？

**更新：**

从 Web 应用程序创建新用户时，它会将身份验证令牌保存在用户表中，但无法从终端注册新用户或获取用户使用令牌进行身份验证的令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:47:43.017

请参阅此视频进行设计，这可能对您有所帮助，

一步一步，设计如何工作

[http://railscasts.com/episodes/209-introducing-devise](http://railscasts.com/episodes/209-introducing-devise)

# javascript - Ember 路由器记录错误：“Ember.CollectionView 的内容必须实现 Ember.Array”

> ID：13206639
> 
> 赞同：6
> 
> 时间：2012-11-03T06:26:07.513
> 
> 标签：javascript, ember.js, client-side

这里是相当直截了当的 Ember 问题，（我希望！）。

我有一个简单的 Ember 数据设置。一个应用程序有多个版本。这是我的应用模型：

```
App.App = DS.Model.extend({
  name: DS.attr('string'),
  publicKey: DS.attr('string'),
  versions: DS.hasMany('App.Version', { key: 'version_ids' })
}); 
```

我的路由器相当简单：

```
App.Router = Ember.Router.extend({
  location: 'hash',
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
      redirectsTo: 'dashboard'
    }),
    dashboard: ...,
    app: Ember.Route.extend({
      route: '/:app_id',
      connectOutlets: function(router, app) {
        router.get('applicationController').connectOutlet('appTest', app);
      },

      index: Ember.Route.extend({
        route: '/',
        connectOutlets: function(router) {
          appTestController = router.get('appTestController');
          appTestController.connectOutlet('addCommentOutlet', 'addComment', {});
          appTestController.connectOutlet('versions', appTestController.get('content.versions'));
        }
      })
    })
  })
}); 
```

视图和控制器如下所示：

```
App.AppTestView = Ember.View.extend({
  templateName: 'app_test'
});

App.VersionsView = Ember.View.extend({
  templateName: 'versions'
});

App.AppTestController = Ember.ObjectController.extend({
});

App.VersionsController = Ember.ArrayController.extend({
}); 
```

不幸的是，当我运行它时，我得到了错误：`an Ember.CollectionView's content must implement Ember.Array. You passed <App.Version:ember519>`.

有趣的是，如果我`[appTestController.get('content.versions')]`在路由器周围添加括号，它不会抱怨并正确创建一个包含第一个 Version 对象的数组。但它似乎不想显示多个对象。

有小费吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T08:00:57.830

最后，它不是模型、视图对象或控制器！它甚至不是路由器。

它是`versions.handlebars`。我的模板中有一个循环，如下所示：

```
{{#each version in controller}}
  Version here
  {{#each comment in version}}
    {{comment.text}}
  {{/each}}
{{/each}} 
```

我写错了：

```
each comment in version 
```

...我打算写的地方：

```
each comment in version.comments 
```

:) 这解释了错误消息。希望这对其他人有帮助！

# java - Simpledateformat ParseException

> ID：13206640
> 
> 赞同：1
> 
> 时间：2012-11-03T06:26:12.070
> 
> 标签：java, android

我需要将输入日期格式更改为我想要的格式。

```
String time = "Fri, 02 Nov 2012 11:58 pm CET";
SimpleDateFormat displayFormat = 
    new SimpleDateFormat("dd.MM.yyyy, HH:mm");
SimpleDateFormat parseFormat = 
    new SimpleDateFormat("EEE, dd MMM yyyy HH:mm aa z");
Date date = parseFormat.parse(time);
System.out.println("output is " + displayFormat.format(date)); 
```

它给了我这个错误

```
java.text.ParseException: Unparseable date: "Fri, 02 Nov 2012 11:58 pm CET"
    at java.text.DateFormat.parse(Unknown Source)
    at Main.main(Main.java:10) 
```

任何人都可以帮助我吗？因为这段代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:38:13.293

Android`z`似乎不接受 XXX 格式的时区（例如“CET”）。（从[文档](http://developer.android.com/reference/java/text/SimpleDateFormat.html)[中`SimpleDateFormat`](http://developer.android.com/reference/java/text/SimpleDateFormat.html)提取。）

试试这个：

```
String time = "Fri, 02 Nov 2012 11:58 pm +0100"; // CET = +1hr = +0100
SimpleDateFormat parseFormat = 
    new SimpleDateFormat("EEE, dd MMM yyyy hh:mm aa Z"); // Capital Z
Date date = parseFormat.parse(time);

SimpleDateFormat displayFormat = 
    new SimpleDateFormat("dd.MM.yyyy, HH:mm");
System.out.println("output is " + displayFormat.format(date)); 
```

> 输出为 02.11.2012, 22:58

*注意：另外，我认为您的意思是`hh`代替`HH`，因为您有`PM`.*

结果显示[在这里](http://ideone.com/sC6tUz)。（这使用 Java7 `SimpleDateFormat`，但 Android 也应该支持 RFC 822 timezones ( `+0100`)。）

**注意**：此外，由于 Android 似乎`z`接受全名（“太平洋标准时间”是他们给出的示例），您可以简单地指定“中欧时间”而不是“CET”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:00:37.903

首先，我必须同意@Eric 的回答。

您只需要从日期字符串中删除“CET”。

这是示例代码。核实。

```
 String time = "Fri, 02 Nov 2012 11:58 pm CET";
        time = time.replaceAll("CET", "").trim();
        SimpleDateFormat displayFormat = 
            new SimpleDateFormat("dd.MM.yyyy, HH:mm");
        SimpleDateFormat parseFormat = 
            new SimpleDateFormat("EEE, dd MMM yyyy HH:mm aa");
        Date date = null;
        try {
            date = parseFormat.parse(time);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        System.out.println("output is " + displayFormat.format(date)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:34:50.113

试试下面的代码：

```
SimpleDateFormat date_format = new SimpleDateFormat("yyyyMMMdd");
    System.out.println(date_format.format(cal.getTime())); 
```

它会工作..如果不打印日志猫？什么错误来了？

# assembly - 我不明白如何使用中断 21，AH=0ah

> ID：13206644
> 
> 赞同：11
> 
> 时间：2012-11-03T06:27:01.953
> 
> 标签：assembly, dos, interrupt, bios, tasm

我的信息来自[这里](http://www.ctyme.com/intr/rb-2563.htm)。该作业要求一个程序读取不超过 20 个字符，将这些字符转换为大写，然后将输入打印为大写。

我不知道如何从 int21/AH=0ah 访问输入。除非我了解上面链接的内容，否则我真的无法提出更准确的问题。有人可以解释吗？另外，如果这有什么不同，我正在使用 TASM。另外，我正在freedos上对此进行测试。

**更新1：**

好的，感谢您的帮助，我相信我了解中断需要如何设置和行为。

**设置：** 我必须指定一个 ds:dx 我希望此缓冲区存在的位置

我必须将 ds:dx 设置为 20 （设置缓冲区可以容纳的最大字符数）

我必须将 ds:dx+1 设置为 0 （我认为以某种方式设置了要读取的最小字符数）

实际调用 int21/AH=0ah，这将转到 ds:dx 并解释预设字节。它将在等待输入时停止程序

int21/AH=0ah 将从 ds:dx+2+n 填充我的输入（其中 n 是输入的字符数，包括 '\r'）

我现在的问题是，我该怎么做。我刚刚再次浏览了 x86 汇编语言参考，但还没有找到任何有用的东西。

到目前为止我得到的代码

```
 assume          cs:code,ds:code
code       segment
start:

           mov  ax,code ;moves code segment into reg AX
           mov  ds,ax   ;makes ds point to code segment

           mov  ah,0ah
           int  21h
           mov  ax,1234h  ;breakpoint

           mov  ah,9
           mov  dx,offset message
           int  21h

endNow:
           ;;;;;;;;;;ends program;;;;;;;;;;
           mov  ah,0  ;terminate program
           int  21h   ;program ends

message    db   'Hello world!!!',13,10,'$'
code       ends
           end  start 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T06:33:02.173

该 DOS 函数使用用户输入检索缓冲区。见此[表](http://spike.scu.edu.au/~barry/interrupts.html#ah0a)。似乎程序正在使用该调用来暂停执行，等待用户恢复程序。

编辑：我只是重读了这个问题。我以为你只是在问函数调用在你给定的源代码中做了什么。如果要读取不超过 20 个字符的输入，首先需要内存来存储它。添加如下内容：

```
bufferSize  db 21  ; 20 char + RETURN
inputLength db 0   ; number of read characters
buffer      db 21 DUP(0) ; actual buffer 
```

然后填充缓冲区：

```
mov ax, cs
mov ds, ax ; ensure cs == ds
mov dx, offset bufferSize ; load our pointer to the beginning of the structure
mov ah, 0Ah ; GetLine function
int 21h 
```

如何转换为大写留给读者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T06:47:37.093

该描述说您`ds:dx`在调用中断之前将缓冲区的地址放入。然后，中断将用它读取的字符填充该缓冲区。

在调用中断之前，缓冲区的第一个字节是缓冲区可以容纳多少个字符，或者在您的情况下为 20 个。我不明白缓冲区第二个字节的描述（在中断的输入上），所以我将它设置为零。返回时，该字节将告诉您读取了多少输入字符并将其放入缓冲区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T02:11:19.543

```
.model small
.stack 100h
.data 
    N db ?
    msg db 10,13,09,"Enter number of arrays---->$"
.code   
.startup
    mov ax,@data
    mov ds,ax
    call read_N;read N from console

    mov ah,4ch
    int 21h  

Read_N  proc
    ;get number of arrays from user

    push ax
    push dx

 readAgain:   

    mov ax,03h ;Clear screen
    int 10h

    mov dx,offset msg
    mov ah,09h
    int 21h

    call ReadNumber

    ;Inuput number must be in 2<=N<=10 bounery  
    cmp al,2
    js readAgain ;input out of boundary read again
    cmp al,10
    jg readAgain 
    mov N,al
    pop dx
    pop ax
    ret
Read_N endp

ReadNumber proc
    ;read decimal number 0-99 using 
    ;character by character in askii and conver in to decimal   
    ;return result in al
    xor ax,ax
    xor bx,bx
    xor dx,dx

    mov ah,01h
    int 21h

    sub al,'0'  ;conver in to decimal
    mov bl,al  

    mov ah,01h
    int 21h 
    cmp al,0dh  ;Exit if enter pressed
    jnz cont  
    mov al,bl
    jmp exit
  cont:
    sub al,'0'  ;conver in to decimal
    mov dl,al  

    xor al,al
    xor bh,bh
    mov cx,bx
  addnum:    
    add al,10
 loop addnum  

    add al,dl
  exit:   
  ret
 ReadNumber endp  

end 
```

# php - PHP GET 函数为 NULL

> ID：13206652
> 
> 赞同：1
> 
> 时间：2012-11-03T06:28:46.787
> 
> 标签：php

我想在 PHP 中使用 GET 并且我知道怎么做。唯一的问题是当我开始我的页面时，我没有 ?var=... 。例如我的网站是

```
http://localhost/q/question.php 
```

在我的代码中是

```
$num = $_GET['num']; 
```

我想假设如果 $num == NULL 或者没有像上面的链接那样定义。

我将生成一个不同的页面。因为作为下面的示例只是确定我在任何页面中开始问题。

没有 num 变量 = 开始在数组中生成问题。

```
http://localhost/q/question.php?num=1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T06:30:28.930

```
if(isset($_GET['num')){
header('Location: someotherpage.php');  //redirects user to someotherpage.php
//do something
}
else{
//do something else

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:35:27.900

```
<?php
   if(isset($_GET['num'))
   {
     echo "is not null";
   }
  else
  {
    echo "is null";
   }

?> 
```

# c# - 证书 - 超过 1 个序列号？

> ID：13206654
> 
> 赞同：0
> 
> 时间：2012-11-03T06:29:07.183
> 
> 标签：c#, .net, security, certificate, x509certificate

奇怪的 ：

我使用此代码通过此代码通过 c# 查找证书：

```
 X509Store store = new X509Store(StoreName.My, StoreLocation.CurrentUser);
 store.Open(OpenFlags.ReadOnly | OpenFlags.OpenExistingOnly);
 var certificates = store.Certificates;
 X509Certificate2Collection certificateCollection = store.Certificates.Find(X509FindType.FindBySerialNumber, "the Serial Number", false); 
```

所以我测试了一个现有的证书：

![在此处输入图像描述](../Images/980c33e4181801739d3af724889668de.png)

但它没有用（如链接问题中所述）。（也试过，删除空格，大写等...... - 无效）。

但是当我玩了一下时，我发现**了另一个串行位置**：

![在此处输入图像描述](../Images/27f0d9663d07c8c38e87a2f7324aff94.png)

这次只是粘贴了确切的短语 `"4e a1 ae 96 ec 1a b6 82 4e f6 23 9a 16 04 1a 51"`并且它**起作用**了。

这里发生了什么 ？

为什么有 2 个不同的序列号，它们之间有什么区别？

*ps，但是，并不是所有的证书都有“Authority Key Identifier”，所以其他属性还是有问题的...*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:50:10.963

我认为找到了解决方案。（我不敢相信）

通过复制+粘贴复制**指纹编号**并粘贴到 cmd 中：

![在此处输入图像描述](../Images/321f3bc6473753df1e09b9f72378f8cb.png)

这个字符到底是什么？

所以我逐个字符地手动输入它 - 一切都**很好** （+删除空格）。

但是为什么还有2个连续剧？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:50:20.883

授权密钥标识符是您可以添加到证书的附加扩展，它指示签署它的颁发者证书。它不是必需的，因为已经存在指示颁发者证书的主题名称的 Issuer 字段，但具有扩展名可以更准确地指定它。

# c# - 在所有 html 标记属性周围插入双引号

> ID：13206656
> 
> 赞同：-1
> 
> 时间：2012-11-03T06:29:28.207
> 
> 标签：c#, xml, vb.net

我正在尝试将 html 转换为 xml，但 html 标记属性的双引号不起作用
，因此当将其转换为 xml 时会出现错误，那么如何在我的 xml 文件中添加双引号，我正在使用 vb.net windows 窗体应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:22:19.343

我想知道你用什么方法来转换。你对此只字不提。然而，很明显这种方法才是核心问题。也许还有你打算在 html 转换为 xml 后做什么？

说实话，鉴于 html 已经是 xml（至少是格式良好的 html），因此不需要**转换**。只需将您的 html 加载到一个`XDocument`示例中......就是这样。没什么特别可做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:21:18.793

转换`html`为**不起作用**..在各种极端情况下，您`xml`的转换可能会**失败****`html``xml`**

 ****将 html 转换为 xml 的最佳方法是：

`html`1>从使用解析器如[htmlagilitypack](http://htmlagilitypack.codeplex.com/)中提取相关数据

2>`xml`使用各种 xml api 将提取的数据存储到[XmlWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.aspx)或[Linq2Xml](http://msdn.microsoft.com/en-us/library/bb387098.aspx)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-11T14:57:27.633

请试试这个：

*   从 nuget 安装 SgmlReader
*   如果您有如下所示的字符串变量，则必须将其转换为 TextReader 对象。

现在我们将使用安装的包。

```
static XmlDocument HTMLTEST()
        {
            string html = "<table frame=all><tgroup></tgroup></table>";
            TextReader reader = new StringReader(html);

            Sgml.SgmlReader sgmlReader = new Sgml.SgmlReader();
            sgmlReader.DocType = "HTML";
            sgmlReader.WhitespaceHandling = System.Xml.WhitespaceHandling.All;
            sgmlReader.InputStream = reader;

            XmlDocument doc = new XmlDocument();
            doc.PreserveWhitespace = true;  //false if you dont want whitespace
            doc.XmlResolver = null;

            doc.Load(sgmlReader);

            return doc;
        } 
```

输入为字符串 html 格式，返回为 doc XmlDocument 格式。您的 frame=all 来自 html 将变为 frame="all"。****

# objective-c - 新的 NSAttributedString 多行

> ID：13206657
> 
> 赞同：7
> 
> 时间：2012-11-03T06:29:32.293
> 
> 标签：objective-c, ios6, uilabel, nsattributedstring, multiline

我曾在 UILabel 工作过。但是 setLineBreakMode 已被弃用。我一直在使用 NSAttributedString。但是 UILabel setLineBreakMode 是在那之后 UILabel setNumberOfLines else 不起作用。

前：

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(42.0f, 10.0f, 275.0f, 50.0f)];
label.text = @"XXXXXX";
memoLabel.textAlignment = UITextAlignmentLeft;
memoLabel.numberOfLines = 2;
memoLabel.lineBreakMode = UILineBreakModeTailTruncation;
memoLabel.font = [UIFont systemFontOfSize:11];
memoLabel.backgroundColor = [UIColor clearColor]; 
```

IOS 6 之后：

```
NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
paragraphStyle.lineBreakMode = NSLineBreakByWordWrapping;
paragraphStyle.alignment = NSTextAlignmentLeft;
NSAttributedString *string
    = [[NSAttributedString alloc] initWithString:text
                                  attributes:[NSDictionary
                                              dictionaryWithObjectsAndKeys:[UIFont systemFontOfSize:11],
                                              NSFontAttributeName,
                                              paragraphStyle, NSParagraphStyleAttributeName,nil]];
[paragraphStyle release];
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(42.0f, 10.0f, 275.0f, 50.0f)];
label.attributedText = string;
[string relase]; 
```

我想在展示前后都一样。如何显示多行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T07:26:27.093

该`lineBreakMode`属性在 iOS 6 中并未被弃用。它只是更改了常量的名称。旧的常量已被弃用，但仍然可用。即使您正在部署到较旧的 iOS，您也可以使用新常量，因为常量只是枚举值。旧名称和新名称具有相同的值。所以，只需设置`memoLabel.lineBreakMode = NSLineBreakByTruncatingTail`.

您的示例代码似乎没有利用任何属性字符串特定功能。如果您不需要属性字符串，请继续使用纯字符串。这仍然适用于 iOS 6。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T20:40:30.777

使用`NSLineBreakByTruncatingTail`代替`UILineBreakModeTailTruncation`

# python - 用于动态大小表单的 Django 表单向导

> ID：13206659
> 
> 赞同：0
> 
> 时间：2012-11-03T06:29:56.087
> 
> 标签：python, django, forms, dynamic, wizard

所以我有一个动态表单，它可以具有从一个字段到 100 或更多的任意大小，我想知道如何将 Django 的表单向导用于该动态表单。通过将字段添加到字段字典中，在表单的 __init__ 中生成字段。

```
class MyDynamicForm(forms.Form):
def __init__(self, *args, **kwargs):
    parent = kwargs.pop('parent')
    super(MyDynamicForm, self).__init__(*args, *kwargs)
    # Add each element into self.fields
    for element in parent.elements:
        if element.type == TEXT_FIELD:
           self.fields[element.name] = forms.CharField(widget=forms.Textarea)
        elif element.type == CHECKBOX_FIELD:
            self.fields[element.name] = forms.BooleanField()
        elif element.type == SINGLE_CHOICE_FIELD:
            self.fields[element.name] = forms.ChoiceField(choices=element.choices.split(','))
        elif element.type = MULTIPLE_CHOICE_FIELD:
            self.fields[element.name] = forms.MultipleChoiceField(choices=element.choices.split(',')) 
```

我假设我可以将这个表单类包装在一个函数中，并且只让它返回表单类，该表单类只通过执行`for element in parent.elements[start:end]`而不是创建每个向导类来创建部分字段，但我觉得这不是正确的做法。我该怎么办，有正确的方法吗？或者甚至有可能吗？谢谢！

# java - 为什么必须在 Java 中将变量初始化为默认值

> ID：13206661
> 
> 赞同：7
> 
> 时间：2012-11-03T06:30:05.950
> 
> 标签：java, default-value, variable-initialization

在一篇关于如何在 Java 中初始化对象的文章中，有一段如下所示：

> 在对象生命的开始，Java 虚拟机 (JVM) 在堆上分配足够的内存来容纳对象的实例变量。但是，当首次分配该内存时，它包含的数据是不可预测的。如果内存按原样使用，对象的行为也将是不可预测的。为了防止出现这种情况，Java 确保在任何代码使用内存之前，至少将内存初始化为可预测的默认值。

谁能解释一下这里`unpredictable data`的意思`unpredictable behavior`。提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T06:36:40.307

> 任何人都可以在这里解释不可预测的数据和不可预测的行为是什么意思。

如果您使用 C/C++ 编程，您会注意到未初始化的变量带有一些垃圾值，存在于分配给它的内存位置中，根据变量的数据类型进行解释。编译器不会抱怨这些变量，如果开发人员忘记正确初始化它们，垃圾值就会被使用，从而导致程序出现意外行为。

在 Java 中，JVM 会根据变量的数据类型将所有成员变量初始化为默认值，并在编译过程中抱怨局部变量未初始化，以避免此类意外行为，并使开发人员始终使用已初始化的变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T06:32:18.020

因为如果您不初始化变量，那么 JVM 将无法理解要分配的内容，并且它将采用任何会导致不可预测数据的值。

编译器永远不会为未初始化的局部变量分配默认值。

来自[维基百科：](http://en.wikipedia.org/wiki/Uninitialized_variable)

> Java 没有未初始化的变量。没有显式初始化程序的类和对象的字段以及数组元素会自动使用其类型的默认值进行初始化（布尔值为 false，所有数值类型为 0，所有引用类型为 null）。Java 中的局部变量必须是在访问它们之前肯定分配给它们，否则是编译错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-03T06:38:11.127

这种不可预测性可以在 C 或 C++ 中体验到，其中语言不会**自动**初始化变量。这是维基百科的一个例子：

```
void count( void )
{
    int k, i;
    for (i = 0; i < 10; i++)
    {
        k = k + 1;
    }
    printf("%d", k);
} 
```

[http://en.wikipedia.org/wiki/Uninitialized_variable](http://en.wikipedia.org/wiki/Uninitialized_variable)

我们不知道`k`，因为我们不知道它最初的价值。初始值是分配的内存块中**已经**包含的值：0x0A4C1330，或 0x00000000，或 0x00FF3333 等。因此，不可预测的数据会产生（各种）不可预测的行为。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-03T06:38:16.417

在 C 和其他编译为本机代码并在非受控环境中运行的语言中，未初始化的变量可以保存任何随机值。这正是术语“不可预测”的含义。想想指向内存中某个未知位置的指针。如果你的程序错误地开始使用这个指针，如果这个值被用于读取，它至少会出现不可预测的行为，它可能会崩溃，因为例如位于该随机存储单元的值的转换不能转换为用代码编写的类型，甚至会导致系统损坏如果一个程序将信息写入属于另一个程序的内存区域。

# python-3.x - tkinter gif 不动，tkinter 可以显示动态图片吗？

> ID：13206663
> 
> 赞同：0
> 
> 时间：2012-11-03T06:30:45.513
> 
> 标签：python-3.x, tkinter, animated-gif

我的 gif 图片在 tkinter 中没有移动。请帮忙。谢谢

```
canvas = Canvas(width = 450, height = 450, bg = 'white')
canvas.grid(row=2, column=0,sticky = 'W')
gif = PhotoImage(file = "picture.gif")
canvas.create_image(0, 0, image = gif, anchor = NW)
mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:08:31.367

Tkinter 不支持动画 gif。

tk photo 图像类支持从动画 gif 的每个子图像创建图像，并且您可以使用它创建自己的动画。我不知道 python 中的任何示例，但可以在这里看到 tcl/tk 版本：[http ://wiki.tcl.tk/4882](http://wiki.tcl.tk/4882)

# java - 使用自定义 WritableComparable 时出错

> ID：13206667
> 
> 赞同：1
> 
> 时间：2012-11-03T06:31:54.357
> 
> 标签：java, hadoop

我正在尝试实现自定义 WritableComparable，[如此链接所示](http://my.safaribooksonline.com/book/databases/hadoop/9780596521974/serialization/id3548156)

当我尝试在我的映射器方法中初始化自定义可写可比较类时出现错误。我在代码中显示了我的错误。textpair 类应该在一个单独的文件中吗？

```
public class Myprog {
    public static class MyMap extends Mapper<Object, Text, TextPair, IntWritable> {
        public void map(Object key, Text value, Context context)
            throws IOException, InterruptedException {
            TextPair writable = new TextPair();

           //ERROR in this line 
           //No enclosing instance of type Myprog is accessible. Must qualify 
           //the allocation with an enclosing instance of type Myprog 
           //(e.g. x.new A() where x is an instance of Myprog).
            ....
    }
}

public static class MyReduce extends Reducer<TextPair, IntWritable, Text, Text> {
    public void reduce(TextPair key, Iterable<IntWritable> values, Context context)
        throws IOException, InterruptedException {
    }
}

public class TextPair implements WritableComparable<TextPair> {
      ....
}

public static void main(String[] args) throws Exception {
    Configuration conf = new Configuration();
    String[] otherArgs = 
        new GenericOptionsParser(conf, args).getRemainingArgs();
    Collections.addAll(headerList, header.split(","));
    Job job = new Job(conf, "Myprog");
    job.setJarByClass(Myprog.class);
    job.setMapperClass(MyMap.class);
    job.setReducerClass(MyReduce.class);
    job.setMapOutputKeyClass(TextPair.class); 
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(Text.class);

    FileInputFormat.addInputPath(job, new Path(otherArgs[0]));
    FileOutputFormat.setOutputPath(job, new Path(otherArgs[1]));

    System.exit(job.waitForCompletion(true) ? 0 : 1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:46:16.890

最好的方法是将您的 TextPair 放在一个单独的 .java 文件中。随着 mapper 和 reducer 的增长，最好也将它们放在单独的文件中。
话虽如此，您还可以将 TextPair 类定义为静态的，就像 Mapper 和 Reducer 一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:40:56.760

你必须定义你的`TextPair`as `static`。如果没有 的外部实例，它就无法实例化`Myprog`。由于您`Mapper`是静态的，因此它没有`Myprog`要引用的实例。

使用

```
public static class TextPair 
```

将解决您的问题。

# .net - 使用动态资源通过样式设置值时未分配依赖属性值

> ID：13206673
> 
> 赞同：0
> 
> 时间：2012-11-03T06:32:50.313
> 
> 标签：.net, wpf, vb.net, exception-handling, dependency-properties

```
Public Class UITreeview
    Inherits System.Windows.Controls.TreeView

Public Shared ExpandAllproperty As DependencyProperty
Shared Sub New()
        DefaultStyleKeyProperty.OverrideMetadata(GetType(UITreeview), New FrameworkPropertyMetadata(GetType(UITreeview)))
        UITreeview.ExpandAllproperty = UITreeViewItem.IsExpandedProperty.AddOwner(GetType(UITreeview), New FrameworkPropertyMetadata(True, FrameworkPropertyMetadataOptions.Inherits))
    End Sub
Public Property ExpandAll As Boolean
        Get
            Return Me.GetValue(ExpandAllproperty)
        End Get
        Set(value As Boolean)
            Me.SetValue(ExpandAllproperty, value)
        End Set
    End Property 
....
End Class 
```

我创建了自己的依赖属性，我使用样式设置

```
<Style  TargetType="{x:Type UINat:UITreeview}">
    <Setter Property="ExpandAll" Value="False" />
</Style> 
```

但不幸的是，我遇到了一个错误：

> System.ArgumentNullException：值不能为空。参数名称：属性。

我的目标是控制来自 Resource XAML 的 TreeviewItem.IsExpanded 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:18:48.057

您不能通过`ExpandAll`将所有者类型添加到现有依赖项属性来创建新的依赖项属性`IsExpanded`。

使用[Register](http://msdn.microsoft.com/en-us/library/ms597502.aspx)而不是 AddOwner 来注册新属性：

```
Public Shared ReadOnly ExpandAllproperty As DependencyProperty =
    DependencyProperty.Register(
        "ExpandAll", GetType(Boolean), GetType(UITreeView),
        New FrameworkPropertyMetadata(True, FrameworkPropertyMetadataOptions.Inherits)) 
```

# mongodb - 在MongoDB中，如何检索匹配条件的对象的子集？

> ID：13206674
> 
> 赞同：1
> 
> 时间：2012-11-03T06:32:50.567
> 
> 标签：mongodb, mongoose

### 我正在尝试做的事情：

筛选与给定条件匹配的集合的字段。而不是返回字段中的每个项目（这是一个项目数组），我只想查看匹配的项目。

如同

```
select items from test where items.histPrices=[10,12] 
```

它也类似于在 mongodb 网站上找到的内容：[http ://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)

这是我一直在尝试的：

```
db.test.save({"name":"record", "items":[{"histPrices":[10,12],"name":"stuff"}]})
db.test.save({"name":"record", "items":[{"histPrices":[10,12],"name":"stuff"}, 
{"histPrices":[12,13],"name":"stuff"},{"histPrices":[11,14],"name":"stuff"}]})

db.test.find({},{"name":1,"items.histPrices":[10, 12]}) 
```

它将返回与 items.histPrices:[10,12] 匹配的所有对象，包括 items[] 中的所有项目。但我不想要那些不符合条件的。

从两年前在 Mongodb 上留下的评论来看，仅获取具有 histPrices[10,12] 的项目的解决方案是使用 javascript 代码，即循环遍历结果集并过滤掉其他项目。

我想知道是否有办法只用查询来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:38:37.897

您的`find`查询有**误**

```
 db.test.find({},{"name":1,"items.histPrices":[10, 12]}) 
```

您的条件语句应该在 find 语句的第一部分。在您的查询`{}`中意味着获取所有类似于此 sql 的文档

```
 select items from test (no where clause) 
```

您必须将您的 mongodb 查找更改为

```
 db.test.find({"items.histPrices":[10, 12]},{"name":1}) 
```

让它起作用

因为您的项目是一个数组，如果您只想返回匹配的子项目，您必须使用[位置运算符](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)

```
 db.test.find({"items.histPrices":[10, 12]},{"name":1,'items.$':1}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:16:36.183

```
db.test.aggregate({$unwind:"$items"}, {$match:{"items.histPrices":[10, 12]}}) 
```

但我不知道性能是否还可以。你必须用你的数据来验证它。

[$unwind 的用法](http://docs.mongodb.org/manual/reference/aggregation/#_S_unwind)

如果您想添加一些过滤条件，例如`name="record"`，只需先添加另一个条件`$march`，例如：

```
db.test.aggregate({$match:{name:"record"}}, {$unwind:"$items"}, {$match:{"items.histPrices":[10, 12]}}) 
```

*   [https://jira.mongodb.org/browse/SERVER-828](https://jira.mongodb.org/browse/SERVER-828)
*   [从 mongoDB 数组中获取特定元素](https://stackoverflow.com/questions/5562485/get-particular-element-from-mongodb-array)
*   [MongoDB查询通过数组中的值检索一个数组值](https://stackoverflow.com/questions/6557508/mongodb-query-to-retrieve-one-array-value-by-a-value-in-the-array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T19:31:45.450

使用嵌入到文档中的数组时，最好的方法是黄建伟建议的方法。

我只想添加另一个聚合，使用[$group](http://docs.mongodb.org/manual/reference/operator/aggregation/group/#pipe._S_group)（如果文档很长，您可能不想检索其所有内容，只检索数组元素）运算符。

现在命令看起来像：

```
db.test.aggregate({$match:{name:"record"}}, 
{$unwind:"$items"}, 
{$match {"items.histPrices":[10, 12]}}, 
{$group: {_id: "$_id",items: {$push: "$items"}}});) 
```

如果您有兴趣**从每个集合中的数组中只返回一个元素**，那么您应该使用[投影](http://docs.mongodb.org/manual/reference/operator/projection/elemMatch/)代替

这里解决了同样的问题： [MongoDB Retrieve a subset of an array in a collection by specified two fields which should match](https://stackoverflow.com/questions/9194294/mongodb-retrieve-a-subset-of-an-array-in-a-collection-by-specifying-two-fields-w/20152599#20152599)

# django - How to use django inbuilt forms?

> ID：13206676
> 
> 赞同：1
> 
> 时间：2012-11-03T06:33:16.707
> 
> 标签：django, django-forms

I am trying to use the django inbuilt AuthenticationForm to allow users to login using their email address and password. I have changed the authenticate function to accept both username and email to authenticate users.

This is my code so far:

```
 def loginuser(request):
          if request.POST:
            """trying to use AuthenticationForm to login and add validations"""
            form = AuthenticationForm(request.POST.get('email'),request.POST.get('password'))
            user = form.get_user()
            if user.is_active:
                login(request,user)
                render_to_response('main.html',{'user':user})
            else:
                HttpResponse('user not active') 
          render_to_response('login.html') 
```

But this is not how the authentication form is used, at least not the correct way.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:32:15.617

An example. You can see django.contrib.auth.forms for derails (search AuthenticationForm in the file forms.py).

```
f = AuthenticationForm( { 'username': request.POST.get( 'email' ), 'password': request.POST.get( 'password' ) } )
try:
    if f.is_valid():
        login( f.get_user() )
    else:
        # authentication failed
except ValidationError:
    # authentication failed - wrong password/login or user is not active or can't set cookies. 
```

So, modify your code to:

```
 def loginuser(request):
      if request.POST:
        """trying to use AuthenticationForm to login and add validations"""
        form = AuthenticationForm(request.POST.get('email'),request.POST.get('password'))
        try:
            if form.is_valid():
                # authentication passed successfully, so, we could login a user
                login(request,form.get_user())
                render_to_response('main.html',{'user':user})
            else:
                HttpResponse('authentication failed') 
        except ValidationError:
             HttpResponse('Authentication failed - wrong password/login or user is not active or can't set cookies')

      render_to_response('login.html') 
```

# eclipse-plugin - 在特定文件夹中添加透视图

> ID：13206678
> 
> 赞同：6
> 
> 时间：2012-11-03T06:34:09.470
> 
> 标签：eclipse-plugin, eclipse-rcp, eclipse-3.6

在我的 Eclipse RCP 应用程序中，我有四个视图 A、B、C、D。我只想在应用程序启动时显示 A、B、C 视图，并在用户单击按钮时显示 D 视图。![在启动应用程序将如下所示](../Images/2ba4a88e98354baa6019087900e7c13b.png)

我正在动态添加视图

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().showView("D_ViewID",null, IWorkbenchPage.VIEW_ACTIVATE);
```

此视图添加在底部，但我希望此 D 视图以这种方式与 B_View 相邻 ![在此处输入图像描述](../Images/6e0615642a706fff8951f9d8c3b57027.png)

我的透视代码在这里：

```
@Override
public void createInitialLayout(IPageLayout layout) {

    String editor = layout.getEditorArea();
    layout.setEditorAreaVisible(false); 

    IFolderLayout top=layout.createFolder("view",IPageLayout.TOP , 0.80f, editor);
    top.addView(B.ID);

    layout.addView(A.ID, IPageLayout.LEFT, 0.20f, BrowserView.B);           
    layout.addView(c.ID, IPageLayout.BOTTOM, 0.20f,editor); 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T07:36:29.887

您需要向透视图[添加一个占位符](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/IPageLayout.html#addPlaceholder%28java.lang.String,%20int,%20float,%20java.lang.String%29)，就像您添加已经可见的视图一样。如果您查看[IPageLayout 文档](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/IPageLayout.html)的顶部，有一个示例将书签视图添加为占位符。

# python - 如何通过 JSON 对象搜索特定列表或预期键值？

> ID：13206680
> 
> 赞同：0
> 
> 时间：2012-11-03T06:34:16.833
> 
> 标签：python, list

我有这个 json 对象，我很好奇如何遍历 servicecatalog:name 并警告任何不等于“service-foo”或“service-bar”的名称。

这是我的 json 对象：

```
{
    "access": {
        "serviceCatalog": [
            {
                "endpoints": [
                    {
                        "internalURL": "https://snet-storage101.example.com//v1.0", 
                        "publicURL": "https://storage101.example.com//v1.0", 
                        "region": "LON", 
                        "tenantId": "1
                    }, 
                    {
                        "internalURL": "https://snet-storage101.example.com//v1.0", 
                        "publicURL": "https://storage101.example.com//v1.0", 
                        "region": "USA", 
                        "tenantId": "1
                    }
                ], 
                "name": "service-foo", 
                "type": "object-store"
            }, 
            {
                "endpoints": [
                    {
                        "publicURL": "https://x.example.com:9384/v1.0/x", 
                        "tenantId": "6y5t4re32"
                    }
                ], 
                "name": "service-bar", 
                "type": "rax:test"
            }, 
            {
                "endpoints": [
                    {
                        "publicURL": "https://y.example.com:9384/v1.0/x", 
                        "tenantId": "765432"
                    }
                ], 
                "name": "service-thesystem", 
                "type": "rax:test"
            }
        ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:56:16.103

如果 x 是上面提到的字典。你可以做

```
for item in x["access"]["serviceCatalog"]:
    if item["name"] not in ["service-foo", "service-bar"]:
        print(item["name"]) 
```

ps：如果您要求，您可以使用 json.loads() 来解码 json 数据。而且您的 JSON 中也有错误。

# mysql - SQL 从事务表更新主表中的最新列

> ID：13206691
> 
> 赞同：-1
> 
> 时间：2012-11-03T06:35:41.073
> 
> 标签：mysql, sql, postgresql

我有两张桌子

```
customer_master
> cname
> lastreceiptdate
> lastreceiptamt

accounts
> cname
> date
> amount 
```

我需要帮助来构建单个更新查询。其中该`customer_master`表使用来自accounts 表的单个客户代码（cname，如“FRUITXXXXX”）的最新收款日期和收款金额进行更新。

它应该在 mysql 5.0 和 postgresql 9.0 中工作

谢谢

到目前为止，我们正在使用一个选择命令来检索具有 max(Date) 的记录，然后使用另一个更新命令来使用来自选择查询的结果进行更新。

```
update customer_master 
set receiptdate = @_da, receiptamt=@_amt 
where cname = @_cn and (receiptdate < @_da or receiptdate='null') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:20:52.580

如果您需要为所有客户执行此操作，那么截断表并一次性插入所有内容会***快得多***：

```
truncate table customer_master;
insert into customer_master (cname, lastreceiptdate, lastreceiptamt)
select cname, last_date, last_amount
from amounts
  join (
    select cname, 
           max(date) as max_date
    from accounts
    group by cname
  ) ma on ma.max_date = amounts.date 
      and ma.cname = amounts.cname 
```

这假设最大。date 是“唯一的”，即在 中不存在具有相同日期的两行`accounts`。

如果您真的非常想在每次发生变化时更新表格，您可以使用以下内容：

```
update customer_master
    set lastreceiptdate = last_date, 
        lastreceiptamt = last_amount
from (
  select cname, last_date, last_amount
  from amounts
    join (
      select cname, 
             max(date) as max_date
      from accounts
      group by cname
    ) ma on ma.max_date = amounts.date 
        and ma.cname = amounts.cname
) as t
where customer_master.cname = t.cname
and customer_master.cname = 'some customer name'; 
```

`customer_master.cname = 'some customer name'`为单个客户而不是所有客户运行更新。（我不知道这是否适用于 MySQL）

请注意，您确实需要在 group by 语句中加入才能获得“属于”最新收据日期的正确金额。

如果你使用一个简单的

```
select cname,
       max(date), 
       max(amount)
from accounts; 
```

返回的最大值。金额不一定“属于”最大值。日期（可能是来自不同日期的金额）。

# android - android 4 我的第一个应用程序开发

> ID：13206692
> 
> 赞同：3
> 
> 时间：2012-11-03T06:35:50.907
> 
> 标签：android

当我尝试在 Eclipse 中创建虚拟设备时，出现以下错误无法找到 ABI armeabi 的“userdata.img”文件以复制到 AVD 文件夹中。我的 SDK 管理器显示 ARM EABI v7 系统映像已安装。我正在使用 Windows XP 操作系统和 eclipse juno 版本，请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:40:26.600

Try to install "ARM EABI v7a System Image" from SDK manager and create again your virtual device. Source [here](http://android-er.blogspot.com.es/2011/10/error-in-creating-emulator-for-android.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:52:44.767

您可以尝试制作新的 AVD

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:37:59.407

如果您的 AVD 文件夹的路径中有俄语字母，这很常见

例如您的 Windows 用户名

# javascript - Python中Google Maps Direction API的JSON解析

> ID：13206695
> 
> 赞同：1
> 
> 时间：2012-11-03T06:36:07.147
> 
> 标签：javascript, python, json, direction

我正在使用 python 使用 Directions API。

```
mapApi = GoogleMaps(API_KEY)
directionsObj.routes = mapApi.directions(directionsObj.source, directionsObj.destination)
print "directionsObj.routesssss", directionsObj.routes['routes'] 
```

我使用上面的代码来获取 Directions API 的 Json 响应文件，并将 Json 存储到 mongoengine（使用的数据库）。现在在终端中，当我运行上述代码时，我得到以下结果。

json文件：

```
[{u'overview_polyline': {u'points': u'yiv{@a~~pMPv@KDRnAfAdHeBl@o@ZaAh@}Bx@}CdAyBn@oDfAgEtAv@pEpBbLlBnItCxMlBlHdBpGzB|HXhAl@tBXv@`@`AoAr@iKbF{CxAcAl@]T_@^Q^GVIf@UdAO`@[j@YXo@b@aCrAsAn@{IhD{At@yCfBqAv@_@\\kAxByErKeB|DKR_CzCsBhCcAfAk@h@[Re@Js@JgD\\aBFeAAcAIq@OqAe@}@Qg@Ce@Bs@Ls@Ts@r@s@~@k@hAmCHeDDkAFsBJkI`@_BJyG\\s^bB}QvAa\\xCcEZaGl@yCV_Q~ABNh@Et@bBDVCJ?XL|@X`AXz@Rd@^r@`@t@X|@F^Dt@Jt@Xf@NTPl@Ff@?j@VnBJr@I@MFu@d@YPy@\\{Bl@}Aj@e@Vw@`@WFW@c@?a@E{@IU?q@JwB`@oB`@cARyABaCFs@FaAJOBbAnE?VEl@E^BRvAfCJJLFjAf@QDgEbAqAPoB^}@JkAReCl@iAZsBZGDCJDh@EDaD^Rv@b@bC\\tBVxB\\xCPdAPl@\\jAXv@zBvChAtAr@~@dCpC'}, u'copyrights': u'Map data \xa92012 Google', u'warnings': [], u'legs': [{u'distance': {u'text': u'11.1 km', u'value': 11118}, u'end_address': u'Kaloor, Ernakulam, Kerala, India', u'via_waypoint': [], u'start_address': u'Thrippunithura, Kerala, India', u'duration': {u'text': u'19 mins', u'value': 1126}, u'steps': [{u'html_instructions': u'Head west', u'distance': {u'text': u'33 m', u'value': 33}, u'polyline': {u'points': u'yiv{@a~~pMPv@'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.949890000000002, u'lng': 76.34929000000001}, u'duration': {u'text': u'1 min', u'value': 4}, u'end_location': {u'lat': 9.949800000000003, u'lng': 76.34901}}, {u'html_instructions': u'Turn right toward Ernakulam-Ettumanoor Rd/SH 15', u'distance': {u'text': u'8 m', u'value': 8}, u'polyline': {u'points': u'giv{@i|~pMKD'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.949800000000003, u'lng': 76.34901}, u'duration': {u'text': u'1 min', u'value': 11}, u'end_location': {u'lat': 9.949860000000001, u'lng': 76.34898000000001}}, {u'html_instructions': u'Take the 1st left toward Ernakulam-Ettumanoor Rd/SH 15', u'distance': {u'text': u'0.2 km', u'value': 211}, u'polyline': {u'points': u'siv{@c|~pMJp@F\\D\\RjA^|BL|@'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.949860000000001, u'lng': 76.34898000000001}, u'duration': {u'text': u'1 min', u'value': 28}, u'end_location': {u'lat': 9.949400000000002, u'lng': 76.34711}}, {u'html_instructions': u'Turn right onto Ernakulam-Ettumanoor Rd/SH 15Pass by Abhayam (on the right in 400m)', u'distance': {u'text': u'0.6 km', u'value': 608}, u'polyline': {u'points': u'wfv{@mp~pMcA\\a@N[NSJg@VYP[LaBj@m@PoBr@{@V}@V}Bp@q@T]JiDhA'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.949400000000002, u'lng': 76.34711}, u'duration': {u'text': u'1 min', u'value': 71}, u'end_location': {u'lat': 9.95439, u'lng': 76.34486000000001}}, {u'html_instructions': u'Turn left at SN Jct onto Kochi - Madurai - Tondi Point Hwy/Kochi - Madurai - Tondi Point Highway/NH 85Pass by ICICI Bank (on the left)', u'distance': {u'text': u'1.5 km', u'value': 1536}, u'polyline': {u'points': u'}ew{@kb~pM@D^xBTnA?@pB`L?@x@xDr@tCJf@x@zDJd@bAnEj@xBBJDNv@vCT|@b@|ABJf@hB~@zCz@`DJ\\Lj@^rAL`@JXL\\FRXl@'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.95439, u'lng': 76.34486000000001}, u'duration': {u'text': u'2 mins', u'value': 112}, u'end_location': {u'lat': 9.949900000000001, u'lng': 76.33162}}, {u'html_instructions': u'Turn right at Petta Jct onto Ernakulam Ettumanoor Rd', u'distance': {u'text': u'54 m', u'value': 54}, u'polyline': {u'points': u'{iv{@so{pMo@^_@R'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.949900000000001, u'lng': 76.33162}, u'duration': {u'text': u'1 min', u'value': 59}, u'end_location': {u'lat': 9.9503, u'lng': 76.33136}}, {u'html_instructions': u'Continue onto SH 15 Ernakulam -Ettumanoor HwyPass by Reliance Petrol Pump (on the right in 1.5km)', u'distance': {u'text': u'2.5 km', u'value': 2516}, u'polyline': {u'points': u'klv{@_n{pMuBbAcBx@uBbAy@`@OFqAn@g@TQJWLOJQJIFEBC@KHGDGFGFGDGHEFEHA@CJEJAJEPCTKh@IZGRGLIPGHABGJIHONIFe@ZMFe@Vi@Zc@VQHULSHWLs@XaEzA{An@IBe@Tu@^}@h@{A|@WNMHYPQJKHKHCBCDEFKP]n@[n@e@dAQ\\s@`BmBlEg@hAe@dAO\\GNEHEHEFyBrCmA~Ae@h@_@`@c@d@[XONKHOHSDQDWF[BcALcBNy@Bg@Bi@?[A]Ce@E]GSGk@Se@QOESEMCKAUAQAS@Q@YDYFWH[J'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.9503, u'lng': 76.33136}, u'duration': {u'text': u'3 mins', u'value': 153}, u'end_location': {u'lat': 9.967500000000001, u'lng': 76.31912000000001}}, {u'html_instructions': u'Continue onto Sahodaran Ayyappan Rd', u'distance': {u'text': u'0.1 km', u'value': 134}, u'polyline': {u'points': u'{wy{@oaypMGHIFQPONKJQTKNILa@t@IR'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.967500000000001, u'lng': 76.31912000000001}, u'duration': {u'text': u'1 min', u'value': 59}, u'end_location': {u'lat': 9.968240000000002, u'lng': 76.31817000000001}}, {u'html_instructions': u'Turn right at Vyttila Jct onto NH 66Pass by Muthoot Motors (on the left in 1.6km)', u'distance': {u'text': u'2.8 km', u'value': 2771}, u'polyline': {u'points': u'o|y{@q{xpMS?yBHeDDkAFm@BeAFgCJcEToAHO@yEVo@DC?K?q@DK@qLh@cOp@wIn@OB}ALwCTmNpA{D\\qEb@e@DcEZaGl@sAJeAJuALcFb@yEd@k@F'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.968240000000002, u'lng': 76.31817000000001}, u'duration': {u'text': u'3 mins', u'value': 205}, u'end_location': {u'lat': 9.99295, u'lng': 76.31493}}, {u'html_instructions': u'Turn left toward NH66 Service Road', u'distance': {u'text': u'9 m', u'value': 9}, u'polyline': {u'points': u'}v~{@igxpM?@BL'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.99295, u'lng': 76.31493}, u'duration': {u'text': u'1 min', u'value': 11}, u'end_location': {u'lat': 9.992930000000001, u'lng': 76.31485}}, {u'html_instructions': u'Turn left onto NH66 Service Road', u'distance': {u'text': u'24 m', u'value': 24}, u'polyline': {u'points': u'yv~{@yfxpMd@EB?'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.992930000000001, u'lng': 76.31485}, u'duration': {u'text': u'1 min', u'value': 11}, u'end_location': {u'lat': 9.99272, u'lng': 76.31488}}, {u'html_instructions': u'Take the 1st right onto Puthiya Rd', u'distance': {u'text': u'0.6 km', u'value': 621}, u'polyline': {u'points': u'ou~{@_gxpMBFh@jABHBD@F@F?D@@?@?@A@AD?B?F?D?F?D@BHj@@F?BDJHVHXPh@FPHTHNP^LRRXLZFPDJDLDPBLBPB\\@V@N@LBJBJ@BFJHLDHBFJLFTHV@F@B@L@L?H?J?H?J@NBTLv@BPJr@'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.99272, u'lng': 76.31488}, u'duration': {u'text': u'1 min', u'value': 51}, u'end_location': {u'lat': 9.990900000000002, u'lng': 76.30962000000001}}, {u'html_instructions': u'Turn right at Puthiya Road Junction onto Thammanam RdPass by Thammanam Mosque (on the left)', u'distance': {u'text': u'0.6 km', u'value': 623}, u'polyline': {u'points': u'cj~{@cfwpMI@GBEBOJOHIFKFKHMFg@RQHWH[Ha@He@No@Tm@TYNKFQHSLGBIDMBIBK@K?S?O?OAQC]E]CIAK@I@OBMBI@_APw@NoAT_@JQDYFKBK@S?'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.990900000000002, u'lng': 76.30962000000001}, u'duration': {u'text': u'2 mins', u'value': 98}, u'end_location': {u'lat': 9.996120000000001, u'lng': 76.30793000000001}}, {u'html_instructions': u'Continue onto Mahakavi Vailoppilli Rd', u'distance': {u'text': u'0.2 km', u'value': 187}, u'polyline': {u'points': u'wj_|@q{vpMa@@Q?Q@eBB[BYBYB_@Da@DOB'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.996120000000001, u'lng': 76.30793000000001}, u'duration': {u'text': u'1 min', u'value': 42}, u'end_location': {u'lat': 9.99779, u'lng': 76.30775000000003}}, {u'html_instructions': u'Turn left onto Indira Road', u'distance': {u'text': u'0.3 km', u'value': 343}, u'polyline': {u'points': u'eu_|@mzvpMbAnE@JAJC^ALEX?D@F@JBFrA~BDDDDFBDBjAf@'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.99779, u'lng': 76.30775000000003}, u'duration': {u'text': u'1 min', u'value': 45}, u'end_location': {u'lat': 9.996540000000001, u'lng': 76.30512}}, {u'html_instructions': u'Turn right onto St. Martin Road', u'distance': {u'text': u'0.6 km', u'value': 641}, u'polyline': {u'points': u'km_|@_jvpMQDgEbAqAP_@FoAVI@s@HkAReCl@m@P[Hc@HoAPC@CBADADDb@?DABC@aD^'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 9.996540000000001, u'lng': 76.30512}, u'duration': {u'text': u'1 min', u'value': 89}, u'end_location': {u'lat': 10.00178, u'lng': 76.30334}}, {u'html_instructions': u'Turn left at Worldwide IPR Services onto NH 47Pass by Juma Masjid (on the left)Destination will be on the left', u'distance': {u'text': u'0.8 km', u'value': 799}, u'polyline': {u'points': u'cn`|@{~upMRv@RnANr@BRX`BRxAB^D`@P~ABP@DF^Hd@@DNf@Rp@HXHXN\\`@j@xAjBJL|@fAr@~@dCpC'}, u'travel_mode': u'DRIVING', u'start_location': {u'lat': 10.00178, u'lng': 76.30334}, u'duration': {u'text': u'1 min', u'value': 77}, u'end_location': {u'lat': 9.998700000000001, u'lng': 76.29695000000001}}], u'start_location': {u'lat': 9.949890000000002, u'lng': 76.34929000000001}, u'end_location': {u'lat': 9.998700000000001, u'lng': 76.29695000000001}}], u'bounds': {u'northeast': {u'lat': 10.00178, u'lng': 76.34929000000001}, u'southwest': {u'lat': 9.949400000000002, u'lng': 76.29695000000001}}, u'waypoint_order': [], u'summary': u'NH 66'}] 
```

如何解析上面的 Json 文件，以便我只能得到`start_address`, `end_address`, `u'html_instructions`only。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:00:16.310

此代码用于获取`start_address`, `end_address`, `html_instructions`:

```
for leg in directionsObj.route['legs']:
    startAddress = leg['start_address']
    print "Start Address:", startAddress
    endAddress = leg['end_address']
    print "End Address:", endAddress
    for step in leg['steps']:
        html_instructions = step['html_instructions']
        print "html instructions", html_instructions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T22:20:55.790

工作python脚本。请确保在您的环境中安装 googlemaps 模块，并在 google 开发者控制台上注册 SERVER Key 并启用 Google Directions API。

```
from googlemaps import Client

  # Add you API key here
  mapService = Client(key='api_key')

  directions = mapService.directions('start', 'destination')
  directions = directions[0]

  i=1
  for leg in directions['legs']:
      startAddress = leg['start_address']
      print "Start Address:", startAddress
      endAddress = leg['end_address']
      print "End Address:", endAddress
      for step in leg['steps']:
          html_instructions = step['html_instructions']
          print "STEP {} {}".format(i ,html_instructions)
          i = i+1 
```

# python - 在python中将数字转换为字符串

> ID：13206698
> 
> 赞同：0
> 
> 时间：2012-11-03T06:36:26.500
> 
> 标签：python

我遇到了关于将数字转换为字符串的问题。

我想从 str(0100) 中得到一个字符串“0100”，但我得到的是“64”。有什么办法可以从 0100 获取字符串“0100”。

**更新**

感谢许多人指出前导“0”是八进制的指示符。我知道，我想要的是将 0100 转换为“0100”，有什么建议吗？

最好的祝福，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:41:05.177

您的第一个问题是文字“0100”，因为它以数字 0 开头，被解释为八进制而不是十进制。相比之下，按预期`str(100)`返回。`"100"`

其次，听起来您想将数字填充为零到固定宽度，您可以使用`zfill`字符串上的方法来做到这一点。例如，`str(100).zfill(4)`返回`"0100"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:41:40.073

整数应该写成 100，而不是 0100。

您可以使用前导零[格式化字符串，如下所示：](http://docs.python.org/2/library/stdtypes.html#string-formatting)

```
>>> "%04d" % 100
'0100'

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:48:26.800

在 Python2 中，`0`数字文字的前导表示它是八进制数。这就是为什么`0100 == 64`。这也意味着`0800`和`0900`是语法错误

这是一件有趣的事情，一次或多次吸引了很多人。

在 Python3 中，0100 是语法错误，`0o`如果需要编写八进制文字，则必须使用前缀。例如。`0o100 == 64`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-18T22:03:48.707

你可以连接两个字符串，所以如果你想要 0100

```
res = str(0) + str(100) 
```

那样`res = '0100'`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-03T10:32:26.743

不确定我是否理解这个问题......也许你正在寻找这个：

```
'%04o' % 0100  # 0100 
```

# c# - 运动检测'if''语句

> ID：13206700
> 
> 赞同：1
> 
> 时间：2012-11-03T06:36:37.207
> 
> 标签：c#, grammar

我一直在写这个运动检测程序，遇到了“if语句”的问题，代码如下：

```
 for (int i = 0; i < frameSize; i++, backFrame++, currFrame++)
            {
                // difference
                diff = ((int)*currFrame) - ((int)*backFrame);
               // threshold
                if ((diff >= differenceThreshold) || (diff <= differenceThresholdNeg))
                {
                    *currFrame = (byte)255;
                    if (i < 640)
                    {
                        x[i] = i;
                        y[i] = 0;
                    }
                    else
                    {
                        x[i] = i % 640;
                        y[i] = i / 640;
                    }
                    if (xMax < x[i]) xMax = x[i];
                    if (xMin > x[i]) xMin = x[i];
                    if (yMax < y[i]) yMax = y[i];
                    if (yMin > y[i]) yMin = y[i];
                    xC = ((xMax - xMin) / 2) + xMin;
                    yC = ((yMax - yMin) / 2) + yMin; 
                }
                else
                {
                    *currFrame = (byte)0;
                }
             } 
```

问题是它在“if”之后跳过代码并执行“else”，即使条件

```
(((diff >= differenceThreshold) || (diff <= differenceThresholdNeg))) is true. 
```

我是 C# 的新手，所以有人可以帮助我吗？

# google-maps - 使用基于介质（道路、空中、船舶）的谷歌地图 API 找出两点之间的距离？

> ID：13206705
> 
> 赞同：1
> 
> 时间：2012-11-03T06:37:52.707
> 
> 标签：google-maps, distance

我正在研究谷歌地图 API。我的问题是，我可以根据介质找到两点之间的距离吗

*   走陆路
*   空运
*   坐船

实际上，我得到了两点之间的距离。没有任何问题。这对我来说可以。

我需要这样的东西：

**示例**：如果我想从印度到美国，那么我有三种方式可以到达。

`By Road` `By Air` `By Ship`.

*   现在，如果我选择**By Road**那么它应该返回 Journey 的总天数。像**20天**。

*   现在，如果我选择**乘飞机**，那么它应该返回旅程的总天数。像**5天**。

*   现在，如果我选择**乘船**，那么它应该返回旅程的总天数。像 **15 天**。

它还应该根据介质变化在地图中显示不同的航点。

那么，有可能这样做吗？我已经在 Google Map API 中工作过，但这对我来说是一项具有挑战性的任务。

希望，你们会帮助我。

# python - 这个函数的bug在哪里？

> ID：13206711
> 
> 赞同：-3
> 
> 时间：2012-11-03T06:38:14.870
> 
> 标签：python, python-3.x, python-2.7

```
def sqrt(a):
    def tryit(x):
        return 0.5 * (a/x + x)
    return fixedPoint(tryit(x), 0.0001) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:47:49.013

有几个问题：

*   你在打电话`fixedPoint()`——那是什么？这是在其他地方定义的吗？
*   您在`x`未定义的情况下使用该函数。
*   您正在调用 function `sqrt()`，但逻辑并不接近可以计算任何东西的平方根的东西。

至少有一个不雅点：

*   您正在定义一个嵌套函数 ( `tryit()`)。这本身不是问题，但没有多大意义，并且您依赖于`a`此处定义的局部变量，而不是将该变量传递给在模块级别定义的独立函数。不过，很难说这个函数应该做什么。
*   `tryit()`不是一个好的函数名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:59:42.600

有关定点迭代的工作示例，请参阅[使用定点迭代求解此方程。](https://stackoverflow.com/questions/4326419)

当前问题中的代码拼写错误`fixed_point`，这是一个需要从`scipy.optimize`. 所需的参数`fixed_point`包括一个函数和一个初始值；例如：

```
scipy.optimize.fixed_point(tryit, a/2) 
```

# c - C 错误 - free()：下一个大小无效（快速）

> ID：13206714
> 
> 赞同：0
> 
> 时间：2012-11-03T06:38:23.387
> 
> 标签：c, struct, free, dynamic-memory-allocation

我不确定为什么会收到以下错误。奇怪的是，当我使用 Mac OS X 时不会发生此错误，但当我使用我的 Linux (Debian) 分区时会发生此错误。

```
-----------
Empty Queue: 0 0 0 0 0 0 0 0 0 0 

---------------
Populated Queue: 5 3 1 7 6 3 2 1 4 4 

-------------
After Dequeue: 3 1 7 6 3 2 1 4 4 0 
    Datum: 5

*** glibc detected *** ./queue_demo: free(): invalid next size (fast): 0x0000000000c73010 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x75b76)[0x7fde5c98db76]
/lib/x86_64-linux-gnu/libc.so.6(cfree+0x6c)[0x7fde5c9928ac]
./queue_demo[0x40098d]
./queue_demo[0x4008d8]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xfd)[0x7fde5c936ead]
./queue_demo[0x4006d9]
======= Memory map: ========
00400000-00401000 r-xp 00000000 08:01 940937                             /home/dylan/Desktop/CST352_Gleason_Lab2/solution_1/queue_demo
00601000-00602000 rw-p 00001000 08:01 940937                             /home/dylan/Desktop/CST352_Gleason_Lab2/solution_1/queue_demo
00c73000-00c94000 rw-p 00000000 00:00 0                                  [heap]
7fde58000000-7fde58021000 rw-p 00000000 00:00 0 
7fde58021000-7fde5c000000 ---p 00000000 00:00 0 
7fde5c702000-7fde5c717000 r-xp 00000000 08:01 1079347                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7fde5c717000-7fde5c917000 ---p 00015000 08:01 1079347                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7fde5c917000-7fde5c918000 rw-p 00015000 08:01 1079347                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7fde5c918000-7fde5ca95000 r-xp 00000000 08:01 1079316                    /lib/x86_64-linux-gnu/libc-2.13.so
7fde5ca95000-7fde5cc95000 ---p 0017d000 08:01 1079316                    /lib/x86_64-linux-gnu/libc-2.13.so
7fde5cc95000-7fde5cc99000 r--p 0017d000 08:01 1079316                    /lib/x86_64-linux-gnu/libc-2.13.so
7fde5cc99000-7fde5cc9a000 rw-p 00181000 08:01 1079316                    /lib/x86_64-linux-gnu/libc-2.13.so
7fde5cc9a000-7fde5cc9f000 rw-p 00000000 00:00 0 
7fde5cc9f000-7fde5ccbf000 r-xp 00000000 08:01 1079447                    /lib/x86_64-linux-gnu/ld-2.13.so
7fde5cea3000-7fde5cea6000 rw-p 00000000 00:00 0 
7fde5cebb000-7fde5cebe000 rw-p 00000000 00:00 0 
7fde5cebe000-7fde5cebf000 r--p 0001f000 08:01 1079447                    /lib/x86_64-linux-gnu/ld-2.13.so
7fde5cebf000-7fde5cec0000 rw-p 00020000 08:01 1079447                    /lib/x86_64-linux-gnu/ld-2.13.so
7fde5cec0000-7fde5cec1000 rw-p 00000000 00:00 0 
7fff13797000-7fff137b8000 rw-p 00000000 00:00 0                          [stack]
7fff137ff000-7fff13800000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted 
```

当我`destruct`在下面编写的测试程序中调用队列结构中的函数时，会发生此错误。

```
#include <time.h>
#include <stdio.h>
#include "Queue.h"

int main(int argc, char* argv[])
{
   // create a "queue" data structure
   Queue_t* my_queue = construct(10);

   // generate a random seed
   srand( (unsigned)time(NULL) );

   // display the empty queue
   printf("-----------\n");
   printf("Empty Queue: ");
   display(my_queue);
   printf("\n");

   // populate the queue with random numbers
   int i = 0;

   for(; i < my_queue->maximum_count; ++i)
      enqueue(my_queue, rand() % 10);

   printf("---------------\n");
   printf("Populated Queue: ");
   display(my_queue);
   printf("\n");

   // dequeue, print the current queue and the datum
   int datum = dequeue(my_queue);

   printf("-------------\n");
   printf("After Dequeue: ");
   display(my_queue);
   printf("\tDatum: %d\n\n", datum);

   // clean up memory
   destruct(my_queue);

   return 0;
} 
```

这是我的数据结构：

```
#ifndef QUEUE_H
#define QUEUE_H

typedef struct Queue
{
   int  current_count;
   int  maximum_count;
   int  buffer[];       // queue uses an array
} Queue_t;

// routines to implement Queue-like functionality (FIFO)
// TODO: somehow encapsulate all these features in the struct itself.
//
Queue_t* construct(int buff_size);
void     destruct (Queue_t* queue);
void     display  (Queue_t* queue);
int      dequeue  (Queue_t* queue);
void     enqueue  (Queue_t* queue, const int datum);

#endif 
```

执行：

```
#include <assert.h>
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include "Queue.h"

Queue_t* construct(int buff_size)
{
   Queue_t* queue = malloc(
      sizeof(Queue_t) + sizeof(int) * sizeof(Queue_t));

   assert(queue != NULL);
   queue->maximum_count = buff_size;
   queue->current_count = 0;
   memset(queue->buffer, 0, sizeof(int)*buff_size);

   return queue;
}

void destruct(Queue_t* queue)
{
   assert(queue != NULL);
   free(queue);  // error at this statement
   printf("Queue destroyed!\n");
}

void display(Queue_t* queue)
{
   int i = 0;

   for(; i < queue->maximum_count; ++i)
      printf("%d ", queue->buffer[i]);
   printf("\n");
}

void enqueue(Queue_t* queue, const int datum)
{
   assert(queue->current_count < queue->maximum_count);
   queue->buffer[queue->current_count] = datum;
   ++queue->current_count;
}

int dequeue(Queue_t* queue)
{
   int i = 1;
   int datum = queue->buffer[0];

   assert(queue->current_count > 0);

   for(; i < queue->maximum_count; ++i)
   {
      queue->buffer[i-1] = queue->buffer[i];
      queue->buffer[i] = 0;
   }

   --queue->current_count;

   return datum;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T06:46:46.487

这看起来像您损坏了 libc 内存分配函数使用的一些数据。在你的`construct`功能中我们不应该改变

```
Queue_t* queue = malloc(
      sizeof(Queue_t) + sizeof(int) * sizeof(Queue_t)); 
```

到

```
Queue_t* queue = malloc(
          sizeof(Queue_t) + sizeof(int) * buff_size); 
```

由于为队列分配的内存量不正确，以下行`construct`似乎现在导致损坏。

```
 memset(queue->buffer, 0, sizeof(int)*buff_size); 
```

当您将`sizeof`运算符应用于具有灵活数组成员的结构时，只有灵活数组以外的字段构成总结构大小，即其大小为 0。为此类结构分配内存时，您需要明确指定多少额外字节你想要在结构的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:47:00.203

这两行应该匹配：

```
Queue_t* queue = malloc(sizeof(Queue_t) + sizeof(int) * buff_size);
memset(queue->buffer, 0, sizeof(int)*buff_size); 
```

原始代码将分配 8+4*8 = 40 字节，而 memset 将清除 8+4*10 = 48 字节。这不一定显示为内存损坏，例如。64 位 gnu malloc 会将内存块对齐到 16 字节边界，因此它实际上也会分配丢失的 8 个字节。

其他 malloc 实现可以并且将分配更多，并且只放置一些簿记数据（就在每个分配的单元之前 - 可能是链表或指向某些树状结构中的父块的指针）。覆盖此簿记将在释放时显示为“损坏的列表”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:45:56.660

你还没有定义你的数组的大小

```
typedef struct Queue
{
   int  current_count;
   int  maximum_count;
   int  buffer[];       // queue uses an array
} Queue_t; 
```

这是仅针对 C99 定义的行为。对于以前的编译器，如果您希望缓冲区标记真实缓冲区的开始，请将其声明为`int buffer[1];`并分配更大的缓冲区。

另外，您的分配似乎不正确：

```
Queue_t* queue = malloc(
    sizeof(Queue_t) + sizeof(int) * sizeof(Queue_t)); 
```

你到底在这里分配什么？应该是
`Queue_t* queue = malloc(sizeof(Queue_t) + sizeof(int) * buf_size);`

# iphone - 错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

> ID：13206715
> 
> 赞同：1
> 
> 时间：2012-11-03T06:38:27.117
> 
> 标签：iphone, ios, xcode

当我使用 GooglePluse 库文件时，它适用于 iphone 模拟器。

但是当我在设备上运行它时，会出现以下错误：

```
 ld: duplicate symbol _OBJC_CLASS_$_GooglePlusSignIn in /Pratik workspace/Fitness 
     app/Fitness Ap/Fitness/lib/libGooglePlusUniversal.a(GooglePlusSignIn.o) and /Pratik 
     workspace/Fitness app/Fitness Ap/Fitness/lib/libGooglePlus.a(GooglePlusSignIn.o) for 
     architecture armv7 clang: error: linker command failed with exit code 1 (use -v to 
     see invocation) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-03T07:10:28.723

你将有 2 个同名的文件，这就是为什么它会给出这样的错误。

进入目标->构建阶段->编译源并尝试删除 GooglePlusSignIn 文件。我认为它会在那里。然后再次运行，让我知道它是否工作..!!!

快乐的编码......！！！！

# f# - 在 Mono 上找不到名称为 ' 的 NaturalSpec 方法

> ID：13206718
> 
> 赞同：1
> 
> 时间：2012-11-03T06:38:48.617
> 
> 标签：f#, mono, monodevelop

我已经设法在单声道上编译 NaturalSpec，并正在使用它在 MonoDevelop 中尝试一个 F# 库项目。自述文件测试失败：

```
module ListSpec
open NaturalSpec

[<Scenario>]
let When_removing_an_3_from_a_small_list_it_should_not_contain_3() =
  Given [1;2;3;4;5]
    |> When removing 3
    |> It shouldn't contain 3
    |> Verify 
```

-- 带有`NaturalSpec.Syntax.shouldn't method`未找到的错误。用`should`测试替换它可以纠正这一点。单声道使用带有撇号的方法有问题吗？编译工作正常，因此可以看到该方法，但在运行时找不到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:18:07.457

我最终用 F# 3.0 和 Mono 3.0.0 中的 .NET 框架 4.5 重新编译 NaturalSpec，然后对我自己的项目做同样的事情。显然，当您打开 NaturalSpec.fsproj 时，您会默认获得 .NET 3.5。此外，即使使用 Mono 3.0.0，默认的 F# 也是 2.0。我已经从开源代码 drop 中单独安装了 F#，并从中指定了 fsc 和 fsi，就像在 MonoDevelop 中的 F# 首选项中一样。现在我将 NaturalSpec 作为参考，并且单元测试在 MonoDevelop 中正确显示——这是在 Mono 中执行 TDD 的好方法。

# android - 自定义适配器 - 怎么办？

> ID：13206720
> 
> 赞同：0
> 
> 时间：2012-11-03T06:39:03.663
> 
> 标签：android, listview, custom-adapter

我整个上午都在这上面。即使我经历了很多 tuts，也找不到一个有用的解决方案。我只是要发布我的代码。

我想要的是？我有一个 RSS 阅读器，它可以从站点获取新闻，并将其存储在自定义类中。我想创建一个具有自定义设计的 ListView，该设计显示每个新闻项目的标题。如果我只使用 Android 中的默认 simple_list_view_1，这可以正常工作，但我想在 ListView 中进行自定义设计。

这是我的代码：

```
ArrayList<SingleNewsItem> newsList = new ArrayList<SingleNewsItem>(); 
```

这是 SingleNewsItem：

```
public class SingleNewsItem
{
    private String pubDate;
    private String title;
    private String description;
    private String link;

    public String getPubDate()
    {
        return pubDate;
    }

    public String getTitle()
    {
        return title;
    }

    public String getDescription()
    {
        return description;
    }

    public String getLink()
    {
        return link;
    }

    public SingleNewsItem(String _pubDate, String _title, String _description, String _link)
    {
        pubDate = _pubDate;
        description = _description;
        title = _title;
        link = _link;
    }

    @Override
    public String toString()
    {
        return title;
    }
} 
```

这是我尝试创建的自定义适配器：

```
public class NewsAdapter extends ArrayAdapter<ArrayList<SingleNewsItem>>
{
    Context context;
    int layoutResourceId;
    ArrayList<SingleNewsItem> news;
    LayoutInflater inflater;

    public NewsAdapter(Context context, int textViewResourceId, ArrayList<SingleNewsItem> objects)
    {
        super(context, textViewResourceId, objects);

        this.context = context;
        this.layoutResourceId = textViewResourceId;
        this.news = objects;
        inflater = LayoutInflater.from(context);
    }

    @Override
    public View getView( int position, View convertView, ViewGroup parent)
    {
        convertView = (RelativeLayout) inflater.inflate(layoutResourceId, null);
        ArrayList item = getItem(position);
        TextView title = (TextView) convertView.findViewById(R.id.text1);
        title.setText(item.toString());

        return parent;
    }
} 
```

这是我的自定义列表视图。它只有一个标题所需的 TextView：

```
<View
    android:id="@+id/view1"
    android:layout_width="15dp"
    android:layout_height="60dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@android:color/holo_blue_bright" />

<View
    android:id="@+id/view2"
    android:layout_width="match_parent"
    android:layout_height="2dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/view1"
    android:background="#660000" />

<TextView
    android:id="@+id/text1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/view1"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/view1"
    android:gravity="center_vertical"
    android:textSize="16dp"
    android:paddingLeft="10dp"
    android:background="@android:color/darker_gray"
    android:textColor="#ffffff" /> 
```

这是最后几行：

```
myListView.setAdapter(new NewsAdapter(this, R.layout.listview, newsList)); 
```

这行不通。现在错误出现在 NewsAdapter 类中。它说：

```
The constructor ArrayAdapter<ArrayList<SingleNewsItem>>(Context, int, ArrayList<SingleNewsItem>) is undefined 
```

**编辑/更新**

我现在运行应用程序后弹出以下强制关闭错误：

```
FATAL EXCEPTION: main
java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams
at android.widget.ListView.measureScrapChild(ListView.java:1152)
at android.widget.ListView.measureHeightOfChildren(ListView.java:1235)
at android.widget.ListView.onMeasure(ListView.java:1144)
at android.view.View.measure(View.java:8366)
at android.widget.RelativeLayout.measureChild(RelativeLayout.java:566)
at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:381)
at android.view.View.measure(View.java:8366)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
at android.view.View.measure(View.java:8366)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
at android.view.View.measure(View.java:8366)
at android.view.ViewRoot.performTraversals(ViewRoot.java:844)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:38:33.093

```
ArrayList item = getItem(position); 
```

应该

```
SingleNewsItem item = (SingleNewsItem) getItem(position); 
```

而且，如果您重写该`getItem()`方法以使其返回 a`SingleNewsItem`而不是 a `Object`，您甚至不必强制转换它。

然后试着保存你所有的源文件，刷新+清理你的项目，它可能就是这样（发生的频率比你想象的要多）。

**编辑** 您的代码也没有优化，因为`getView()`即使对于已经创建的视图，也可以多次调用该方法，例如，如果您滚动 ListView。所以你应该首先测试你的 convertView 是否为空：

```
SingleNewsItem item = getItem(position); //You should override this method
TextView tv;

if (convertView != null) { //View already created
    tv = (TextView) convertView.getTag();
}
else { //View already created
    convertView = this.inflater.inflate(layoutResourceId, null);
    tv = (TextView) convertView.findViewById(R.id.text1);
    convertView.setTag(tv);
}

tv.setText(item.toString()); 
```

# node.js - 如何获取进程列表

> ID：13206724
> 
> 赞同：17
> 
> 时间：2012-11-03T06:39:57.203
> 
> 标签：node.js

我正在玩节点，只是将它安装在我的机器上。现在我想获取在我的机器上运行的进程列表，以便查看 Apache 是否正在运行、MySQL 是否已启动等？我怎样才能做到这一点？我的 js 文件中只有非常基本的代码。我什至不知道从哪里开始。

这是我的代码：

```
var http = require('http');
http.createServer(function(request, response){
    response.writeHead(200);
    response.write("Hello world");
    console.log('Listenning on port 1339');
    response.end();
}).listen(8080); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-03T22:39:02.173

据我所知，还没有一个模块来做这个跨平台的。您可以使用子进程 API 来启动提供所需数据的工具。对于 Windows，只需启动内置的任务列表进程。

```
var exec = require('child_process').exec;
exec('tasklist', function(err, stdout, stderr) {
  // stdout is a string containing the output of the command.
  // parse it and look for the apache and mysql processes.
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-11T23:21:34.587

参见[ps 节点](https://www.npmjs.com/package/ps-node)

要获取节点中的进程列表：

```
var ps = require('ps-node');

ps.lookup({
command: 'node',
arguments: '--debug',
}, function(err, resultList ) {
if (err) {
    throw new Error( err );
}

resultList.forEach(function( process ){
    if( process ){

        console.log( 'PID: %s, COMMAND: %s, ARGUMENTS: %s', process.pid, process.command, process.arguments );
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-10-27T07:45:21.380

[ps-list](https://www.npmjs.com/package/ps-list)是一个更好的节点包，它也适用于 Linux、BSD 和 Windows 平台。

```
const psList = require('ps-list');

psList().then(data => {
    console.log(data);
    //=> [{pid: 3213, name: 'node', cmd: 'node test.js', cpu: '0.1'}, ...] 
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-19T11:14:11.550

您还可以使用列出所有进程的 current-processes。 [https://www.npmjs.com/package/current-processes](https://www.npmjs.com/package/current-processes)

结果包括**name**、**pid**、**cpu**和进程使用的**内存**。您还可以对结果进行排序并限制进程数。结果如下所示：

```
 [ Process {
pid: 31834,
name: 'atom',
cpu: 84,
mem: { private: 19942400, virtual: 2048, usage: 0.4810941724241514 } }] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-23T09:00:52.920

**类unix系统的解决方案：**

```
const child_process = require('child_process');

const displayProcessBy = (pattern) => {
    let command = `ps -aux | grep ${pattern}`;
    child_process.exec(command, (err, stdout, stdin) => {
        if (err) throw err;
        console.log(stdout);
    });
} 
```

**示例用法和结果**

> displayProcessBy("nodejs");

```
setivol+  7912  0.0  0.0  12732  2108 ?        S    10:56   0:00 grep nodejs
setivol+ 12427  0.0  0.0 669552   712 pts/3    Tl   Dec16   0:00 nodejs
setivol+ 14400  0.0  0.0 669552   644 pts/2    Tl   Dec15   0:00 nodejs
setivol+ 14412  0.0  0.0 670576   224 pts/3    Tl   Dec16   0:00 nodejs
setivol+ 14567  0.0  0.0 669552   436 pts/3    Tl   Dec15   0:00 nodejs
setivol+ 14911  0.0  0.0 669552     0 pts/3    Tl   Dec15   0:00 nodejs
setivol+ 15489  0.0  0.0 669552   712 pts/3    Tl   Dec16   0:00 nodejs
setivol+ 15659  0.0  0.0 669520     0 pts/3    Tl   Dec16   0:00 nodejs --harmony
setivol+ 16469  0.0  0.0 669520   704 pts/3    Tl   Dec16   0:00 nodejs --harmony
setivol+ 20514  0.0  0.0 669552   664 pts/2    Tl   Dec15   0:00 nodejs 
```

> displayProcessBy("python2")

```
setivol+  8012  0.0  0.0   4336   712 ?        S    10:58   0:00 /bin/sh -c ps -aux | grep python2
setivol+  8014  0.0  0.0  12728  2240 ?        S    10:58   0:00 grep python2 
```

**测试环境**

```
$ uname -a
Linux localhost 3.16.0-4-amd64 #1 SMP Debian 3.16.36-1+deb8u2 (2016-10-19) x86_64 GNU/Linux   
$ lsb_release -a
No LSB modules are available.
Distributor ID: Debian
Description:    Debian GNU/Linux 8.6 (jessie)
Release:    8.6
Codename:   jessie 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T07:49:23.463

好像没有直接的方法

但下面的视频可能会有所帮助。

*   使用 Node.js 监控长时间运行的进程。（[http://www.youtube.com/watch?v=zamGXhjim00](http://www.youtube.com/watch?v=zamGXhjim00)）
*   [使用 node.js 和 socket.io ( http://www.youtube.com/watch?v=bPYgx9V6qAk](http://www.youtube.com/watch?v=bPYgx9V6qAk) )实时 CPU 使用率

# mysql - About joining two table with unique index

> ID：13206725
> 
> 赞同：0
> 
> 时间：2012-11-03T06:40:02.460
> 
> 标签：mysql

I have two table like this

table "X"

```
idX(pk) contentX(char)
10         foo1
21         foo2
34         foo3
45         foo4 
```

table "Y"

```
idY(pk) contentY(char)
11         boo1
22         boo2
33         boo3
40         boo4 
```

And after joining, intsert to a table and become this

```
idNew(pk)    idX(UQ) content(char)    idY(UQ) content(char)
   1           10         foo1           11         boo1
   2           21         foo2           22         boo2
   3           34         foo3           33         boo3
   4           45         foo4           40         boo4 
```

The SQL I use is like this

```
 INSERT INTO DataBase.newtable(idX, contentX,idY,contentY)
        SELECT  X.idX, Y.idY, contentX, contentY
                FROM DataBase.X, DataBase.Y, ; 
```

But the SQL statement cannot insert to newtable because the idX and idY is needed to be unique value. What can I do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:54:23.880

您需要为该插入指定连接字段，否则您将获得两个表的笛卡尔积（即 16 行）。如果您在 idx 和 idy 字段上有唯一索引，则此约束将导致插入失败。

# angularjs - How to get Angular to work for dynamically added object

> ID：13206726
> 
> 赞同：0
> 
> 时间：2012-11-03T06:40:09.733
> 
> 标签：angularjs

I have two files as described below. I am defining the controller in file_1.php

In file_2.php, I am 'require'ing the file_1.php, and then moving the ul into the div that is described in file_1.php

What I want to be able to do is - get the functions within the controller to work for the ul which was dynamically added. My guess is that, when the page was loaded, the ul block is seen as being outside the controller and so it doesn't work. On searching, I was able to see a [solution](https://stackoverflow.com/questions/10857110/angularjs-and-generated-elements "solution") that involved $compile, but that works for ng-model, and not for repeat or {{}} either. I am new to Angular and would appreciate any help.

**file_1.php**

```
<?php
   <div id="box_1" ng-controller="MyCtrl"></div>
?> 
```

**file_2.php**

```
<?php
   require 'file_1.php';
?>

<ul>
   <li ng-repeat="item in items">item.text</li>
</ul>

{{items}}

<script>
   function MyCtrl($scope) {
      $scope.items = [{text: "Item 1", text: "Item 2"}];
   }

   $(document).ready(function() {
          $('#box_1').append($('ul'));
   })
</script> 
```

**Some information that I found:** In the [documentation](http://docs.angularjs.org/guide/directive) here, under section "Reasons behind the compile/link separation", they have explained why compiling is different for ng-repeat. Could anyone explain what it means exactly and/or the way to go about it? I tried compile - anything that is not in an ng-repeat works, but anything inside ng-repeat doesn't.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:43:04.180

出于某种原因，您是否喜欢这种文件结构？你试图做的事情违背了角度，因此会很痛苦。Angular 应该让您摆脱使用 jQuery 进行 DOM 操作的痛苦。

不过，似乎 using`$compile`应该可以工作。你能告诉我们你想用它做什么吗？

为什么你不能做这样的事情？

```
<div id="box_1" ng-init="items = [{text: "Item 1", text: "Item 2"}]">
    <ul>
        <li ng-repeat="item in items">{{item.text}}</li>
    </ul>

    {{items}}
</div> 
```

（语法可能有点偏离`ng-init`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:45:58.890

在控制器中操作 DOM 不是一个好习惯。除此之外，*$scope.$apply()*没有帮助吗？

```
$(document).ready(function() {
      $('#box_1').append($('ul'));
      $scope.$apply();
}) 
```

# jquery - $this->Js->writeBuffer() writes invalid jquery code in cakephp 2.2.3

> ID：13206728
> 
> 赞同：1
> 
> 时间：2012-11-03T06:40:13.947
> 
> 标签：jquery, cakephp

I'm just upgrading some code from cakephp 1.1 to 2.2.3 and I'm stuck on the ajax bits. The forms are completely different but they've I've reworked them just fine.

When I view the source I get this from the echo $this->Js->writeBuffer(); command

```
//<![CDATA[
$j(document).ready(function () {$("#AdlistingRegion").bind("click", function (event)     {$.ajax({async:true, dataType:"html", success:function (data, textStatus) {$("#AdlistingDistrict").html(data);}, url:"\/adlistings\/getdistricts"});
return false;});
$("#AdlistingDistrict").bind("click", function (event) {$.ajax({async:true, dataType:"html", success:function (data, textStatus) {$("#AdlistingSuburb").html(data);}, url:"\/adlistings\/getsuburbs"});
return false;});});
//]]> 
```

however firebug tells me

```
Uncaught TypeError: Property '$' of object [object Window] is not a function 
```

This appears to be a flaw in the library which doesn't seem plausible but I've got the JS helper in the controller and can't see which step I've missed.

Does anyone have any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T11:08:10.940

这是一个小技巧，但对我有用；）

```
<?php echo str_replace('$(document).ready(function ()', 'jQuery(document).ready(function($)',  $this->Js->writeBuffer()); ?> 
```

阅读有关安全 jQuery 的更多信息：http: [//api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

# ruby-on-rails - RubyOnRails：无法在我的控制器中将字符串转换为浮点数

> ID：13206734
> 
> 赞同：0
> 
> 时间：2012-11-03T06:41:16.800
> 
> 标签：ruby-on-rails, string, activerecord, floating-point, type-conversion

我正在尝试制作涉及位置的活动记录。我从参数中获取经度，并尝试使用该`Float()`方法将`locationLongitude`and`locationLatitude`从字符串转换为浮点数，但出现以下错误：

```
undefined method `call' for #<Class:0x007ffead288530> 
```

以下是该方法可以访问的参数：

```
{"locationName"=>"Stanford",
 "locationLatitude"=>"37.42839679991957",
 "locationLongitude"=>"-122.17553785073696"} 
```

这是我的控制器中尝试将字符串转换为浮点数并进行查询的方法：

```
def local
  radius = 10;
  @sort = "local"
  @locationName = params[:locationName]
  @locationLongitude = Float(params[:locationLongitude])
  @locationLatitude = Float(params[:locationLatitude])
  @musings = Musing.(:longitude => (Float(@locationLongitude) - radius)..(Float(@locationLongitude) + radius))

 end 
```

希望你能帮忙。我也尝试过`params[:locationName].to_f`，但也没有用。

谢谢，保罗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:00:52.397

我会说最好将处理从您的`local`方法中移动到 Musing（或其他）模型。

在您的表单中 - 尝试命名您的参数，使其具有作为最外层的思考。

```
<input name='musing[locationName' ...> 
```

在控制器中

```
def local
  # set some vars
  @musings = Musing.search(params[:musing])
end 
```

在模型中

```
def self.search(params)
  radius = 10
  long = params[:locationLongitude]
  lat = params[:locationLatitude]
  return self unless long and lat
  self.where(:latitude => lat.to_f-radius).where(:long => long.to_f-radius)
end 
```

我可以看到你解决了这个问题 - 但这可能会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:58:39.433

```
Please, change 
params[:locationName].to_f
to
params[:locationName].to_s.to_f 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:54:18.963

问题出在这一行：

```
@musings = Musing.(:longitude => (Float(@locationLongitude) - radius)..(Float(@locationLongitude) + radius)) 
```

我写`Musing.(...)`而不是`Musing.where(...)`

什么磨砂膏。

# trace - Azure Diagnostics: Trace messages don't work in VS2012 default template

> ID：13206743
> 
> 赞同：1
> 
> 时间：2012-11-03T06:41:59.060
> 
> 标签：trace, system.diagnostics, azure-diagnostics

I'm unable to get Azure Diagnostics to spit out any of my Trace messages - even in the near-as-is VS2012 project template. Here is what I did:

1.  In an empty VS2012, created a new Cloud project (called it "Azure.Diag")
2.  In the wizards next step, added the default template for "WCF Service Web Role" (called it "WCFService.WebRole")
3.  Editted Web.Config to enable Diagnostics (details below)
4.  Editted WebRole.cs to spit a Diagnostic Trace message (details below)
5.  Ran it locally in Azure Emulator (ServiceConfiguration.Local.cscfg: Diagnostics.ConnectionString is "UseDevelopmentStorage=true")
6.  Look at `C:\Users\<Username>\AppData\Local\dftmp\Resources\<Instance GUID>\directory\WCFService.WebRole.svclog` => see nothing!
7.  There is also nothing in the Local Storage Blog either (not surprising given the folder before move-to-blob is empty)

How can I get this working? I'm trying to avoid my own handwritten .txt logs to leverage the in built trace listener framework (and parsing tools).

**WebRole.cs**

```
using System.Diagnostics;

namespace WCFService.WebRole
{
    public class WebRole : RoleEntryPoint
    {
        public override bool OnStart()
        {
            // To enable the AzureLocalStorageTraceListner, uncomment relevent section in the web.config  
            DiagnosticMonitorConfiguration diagnosticConfig = DiagnosticMonitor.GetDefaultInitialConfiguration();
            diagnosticConfig.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(1);
            diagnosticConfig.Directories.DataSources.Add(AzureLocalStorageTraceListener.GetLogDirectory());

            string message = "Houston, tracing is broken!";
            Trace.TraceError(message);
            Trace.TraceInformation(message);
            Trace.TraceWarning(message);
            Trace.WriteLine(message);

            return base.OnStart();
        }
    }
} 
```

**Web.Config**:

I used the standard template one but uncommented the top portion (had to merge the two system.diagnostic portions to avoid HTTP 500)

```
 <system.diagnostics>     
    <sharedListeners>
      <add name="AzureLocalStorage" type="WCFService.WebRole.AzureLocalStorageTraceListener, WCFService.WebRole" />
    </sharedListeners>
    <!--<sources>
      <source name="System.ServiceModel" switchValue="Verbose, ActivityTracing">
        <listeners>
          <add name="AzureLocalStorage"/>
        </listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging" switchValue="Verbose">
        <listeners>
          <add name="AzureLocalStorage"/>
        </listeners>
      </source>
    </sources>-->
    <trace autoflush="true">
      <listeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
          name="AzureDiagnostics">
          <filter type="" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web> 
```

# windows-8 - Metro-style apps UI types

> ID：13206748
> 
> 赞同：0
> 
> 时间：2012-11-03T06:42:37.537
> 
> 标签：windows-8, microsoft-metro

Does Metro-style apps UI only support either Fullscreen or tile-based environment? Is there any other window styles?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:06:33.603

“Metro”或 Windows Store 应用程序支持多种[方向](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayorientations.aspx)和[布局状态](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationviewstate.aspx)。根据您设备的分辨率，Filled 和 Snapped 可能可用也可能不可用（需要 1366 x 768 或更高的分辨率）。

在应用程序中，您还可以使用浮出控件（例如由[Callisto 库](https://github.com/timheuer/Callisto)为 XAML 应用程序提供的，并且包含在 JavaScript 中的“本机”）。

瓷砖并不是真正的应用程序“风格”。每个 Windows 应用商店应用程序都可以在开始屏幕上有一个磁贴，它是应用程序清单的一部分以确定外观（尽管用户可以最终控制大小以及他/她是否想要开始屏幕上的磁贴）。此外，通过使用[通知](http://blogs.msdn.com/b/jimoneil/archive/2012/08/02/windows-8-notifications-overview.aspx)，您可以通过磁贴反映其他信息，但即使您的应用程序已安装，您也不能依赖实际存在的磁贴。

# asp.net - Asp.net中通过List显示json数组数据

> ID：13206750
> 
> 赞同：2
> 
> 时间：2012-11-03T06:42:58.830
> 
> 标签：asp.net, json, web-services

**我的 C# 类**

```
public class City
{

   public int City_id { get; set; }

    public string City_name { get; set; }
}

public class Model
{
    public City[] lstCitiesResult { get; set; }
} 
```

我的代码：

```
namespace gtp2
{
  ....
  List<Model> li = new List<Model>();

  WebClient re = new WebClient();

  var data = re.DownloadString("url");

  var a = JsonConvert.DeserializeObject<Model>(data);

  Response.Write(a.lstCitiesResult.ToString());
  ....
} 
```

在**Response.Write**我得到这样的：gtp2.City[] Any Ideya？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:53:27.530

看起来结果是一个数组，`City`因此您需要循环遍历它。但是您可以使用处理集合的控件来显示它，例如 ListView、DataList 等。试试这个：

```
string output = "";
foreach(var c in a.lstCitiesResult)
{
   output = output + String.Format("id: {0}, name: {1}", c.City_id, c.City_name);
}

Response.Write(output); 
```

# c++ - Returning char* from function not working

> ID：13206752
> 
> 赞同：2
> 
> 时间：2012-11-03T06:43:06.250
> 
> 标签：c++, pointers, char

Visual studio c++ shows that "string" on line 24 has one array element, but the top contains all the text that was input by the user. But when I send to PutString(), it disappears. Why?

```
#include <stdio.h>

void PutString( const char* pChar ){
    for( ; *pChar != 0; pChar++ )
    {
        putchar( *pChar );
    }
}

char* GetString(){
    char c[100];
    int i = 0;
    do
    {
        c[i] = getchar();
    }while( c[i++] != '\n' );
    c[i] = '\0';
    // PutString( c );
    return c;
}

void main(){
    char* string = GetString();
    PutString( string );
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T06:46:15.873

Because `c` is a local variable within `GetString` and you are returning its address, after which it disappears (moves out of scope). That's undefined behaviour - you're not allowed to use stuff that's gone out of scope. In fact, if you run that through `gcc`, it tells you that quite explicitly:

```
qq.cpp:9: warning: address of local variable ‘c’ returned 
```

If you want to return non-simple things (such as arrays instead of integers or floats, which make a copy for you) from a function, you need to (for example) dynamically allocate it so that it survives function return. Something like changing:

```
char c[100]; 
```

into:

```
char *c = malloc (100); // or equivalent 'new'. 
```

(and remembering to free/delete it eventually, of course).

Even though you may *see* it in the debugger when you return from `GetString`, it's still not guaranteed as per the standards.

In any case, there's a good chance the next stack manipulation (such as calling `PutString`) will wipe out the information.

* * *

Here's a C++ version that does it the `new/delete` way:

```
#include <stdio.h>

void PutString (const char* pChar ){
    for (; *pChar != 0; pChar++)
        putchar( *pChar );
}

char* GetString (void) {
    char *c = new char[100];      // memory behind c will survive ...
    int i = 0;
    do {
        c[i] = getchar();
    } while (c[i++] != '\n');
    c[i] = '\0';
    return c;
}                                 // ... past here ...

int main (void) {
    char* string = GetString();
    PutString (string);
    delete[] string;              // ... until here.
    return 0;
} 
```

* * *

I should also mention that there are probably better way to get line-based input in both C ([fgets](http://linux.die.net/man/3/fgets) or see [an earlier answer of mine](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)) and C++ (such as the [string getline](http://www.cplusplus.com/reference/string/getline/) and the [char array getline](http://www.cplusplus.com/reference/iostream/istream/getline/)).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T06:46:49.310

You are returning pointer to a variable that is local to the function in `GetString()`, when the function returns, the space allocated to the variable is reclaimed.

To fix these you can either dynamically allocate space for the character array or declare it as static so that the lifetime of the variable becomes the entire program.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T06:47:14.507

当字符串 ( ) 放入堆栈时，您`GetString`将无法正常工作。`char c[100]`当函数返回时，它将被删除。

使用`malloc`数组或将数组传递给函数。

# cakephp - Cakephp 属于有顺序的

> ID：13206758
> 
> 赞同：0
> 
> 时间：2012-11-03T06:44:06.987
> 
> 标签：cakephp

所以我有一个像这样的自我引用模型。

```
class Category extends AppModel {
  public $order = "Category.name";
  public $belongsTo = array(
      'ParentCategory' => array(
          'className'    => 'Category',
          'foreignKey'   => 'parent_id',
          'order'        => 'ParentCategory.name'
      )
  );
} 
```

它产生的 sql 查询是这样的：

```
SQL Query: SELECT `ParentCategory`.`id`, `ParentCategory`.`name` FROM `cakephp`.`categories` AS `ParentCategory` WHERE 1 = 1 ORDER BY `Category`.`name` ASC 
```

这不起作用，因为`"Category"`这里不是表名。

我在这里做错了什么。为什么它不尊重我的“秩序”规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:42:33.867

我在 CakePHP 文档中找到了一个类似问题的解决方案：

[http://book.cakephp.org/2.0/en/models/virtual-fields.html#virtual-fields-and-model-aliases](http://book.cakephp.org/2.0/en/models/virtual-fields.html#virtual-fields-and-model-aliases)

所以基本上，任何时候你想使用模型别名，最好像这样在构造函数中定义值：

```
 public function __construct($id = false, $table = null, $ds = null) {
      parent::__construct($id, $table, $ds);
      $this->order = $this->alias.".whatever";
  } 
```

# javascript - 扩展返回两个功能的函数

> ID：13206760
> 
> 赞同：0
> 
> 时间：2012-11-03T06:44:42.357
> 
> 标签：javascript, jquery

我正在尝试创建一个加载函数，它构建一个基本 DOM，加载动画垂直居中，另一种方法来破坏它。我不知道如何实现隐藏！我不想创建另一个单独的函数来破坏加载的 DOM！我想将它们都放在一个命名空间下！

```
$(document).ready(function() {
    $.extend({
        loading:function(status) {
            var _status=status || 'Loading';
            var $this= $('<div class="loadnote"><img src="loadinfo.net.gif" width="16" height="16" /><span>'+_status+'</span></div>').appendTo($('body'));
            function center() {
                var w = $this.width();
                w+= parseInt($this.css('padding-left'))+parseInt($this.css('padding-right'));
                var w_box = $(window).width();
                var w_total = (w_box - w)/2; 
                var css = {
                    "left": w_total+'px'
                    };
                $this.css(css)
            }

            center();

            function hide() {
                $this.remove();
            }

        //return hide();
        }
    });

    $.loading();
    //$.loading().hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:00:23.810

尝试：

```
$.extend({
    loading:function(status) {
        var _status=status || 'Loading';
        var $this= $('<div class="loadnote"><img src="loadinfo.net.gif" width="16" height="16" /><span>'+_status+'</span></div>').appendTo($('body'));
        function center() {
            var w = $this.width();
            w+= parseInt($this.css('padding-left'))+parseInt($this.css('padding-right'));
            var w_box = $(window).width();
            var w_total = (w_box - w)/2; 
            var css = {
                "left": w_total+'px'
                };
            $this.css(css)
        }

        center();

        function hide() {
            $this.remove();
        }

    return {hide: hide};
    }
});
var retval = $.loading();
retval.hide(); 
```

[http://jsfiddle.net/FVcpH/1/](http://jsfiddle.net/FVcpH/1/)

# java - Blocking operations in URLConnection

> ID：13206769
> 
> 赞同：1
> 
> 时间：2012-11-03T06:46:53.523
> 
> 标签：java, networking, blocking

Running the following code snippet:

```
URL url = new URL(uri);
URLConnection urlconn = url.openConnection();
urlconn.connect();
urlconn.getContentLength(); 
```

I get the dead-lock sometimes, usually at two lines: `urlconn.connect()` and `urlconn.getContentLength()`. Also, when I do

```
InputStream is = urlconn.getInputStream();
// doing some reading
is.close(); 
```

I also get blocking at `is.close()`. I want to ask why such blocking happens. It is clueless to me from the Java API.

# java - Dom4j 解析 - 如何以编程方式声明 HTML 实体？“实体“nbsp”已被引用，但未声明。”

> ID：13206774
> 
> 赞同：1
> 
> 时间：2012-11-03T06:47:36.970
> 
> 标签：java, sax, dom4j

我正在使用 Dom4j 来解析 HTML 文档。Dom4j 需要 XML，因此不声明 HTML 实体。可以在文档的 DTD 中声明它们，但我正在解析外部输入，所以这是不合适的。我宁愿在解析器中以编程方式声明它们。

这是我的代码：

```
 // Read.
    final DocumentFactory df = DOMDocumentFactory.getInstance();
    SAXReader reader = new SAXReader();
    Document doc, outDoc;
    try {
        doc = reader.read( new StringReader(htmlStr) );
    }
    catch( Exception ex ){
        throw new RuntimeException("Error parsing the HTML:\n       " + ex.toString() );
    } 
```

我看到了，`SAXReader`但`reader.setEntityResolver( ??? );`似乎不是解决方案，因为可覆盖的方法如下所示：

```
public InputSource resolveEntity(String publicId, String systemId) throws SAXException, IOException 
```

**我正在寻找的**是类似的东西

```
reader.setTrueEntityResolver( new EntityResolver(){
    public InputStream resolve( String name ){ ... }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:48:55.700

好吧，正如您所说，DOM4J 并不意味着解析 HTML。我宁愿使用[tagsoup](http://ccil.org/~cowan/XML/tagsoup/)或[HTML Cleaner](http://htmlcleaner.sourceforge.net/)之类的东西。它只是不是实体，HTML 不是 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:01:14.217

我在[http://evc-cit.info/dom4j/dom4j_groovy.html](http://evc-cit.info/dom4j/dom4j_groovy.html) 中找到了一个可能的解决方案，建议在其中添加 XML Commons Catalog 的东西。

但是，这似乎有点矫枉过正，因为无论如何都没有指定 doctype，我只打算解决 commons HTML 4 实体。

***更新***：原来，如果没有明确的 DOCTYPE 声明，这没有任何效果 - EntityResolver 永远不会被调用。

Maven 部门：

```
 <dependency>
        <groupId>xml-resolver</groupId>
        <artifactId>xml-resolver</artifactId>
        <version>1.2</version>
        <scope>test</scope>
    </dependency> 
```

在类路径中配置`/CatalogManager.proeprties`：

```
# allow location to be relative to this file's directory
relative-catalogs=yes

# A semicolon-delimited list of catalog files.
# In this instance, we have a single catalog file, and it's a relative path name
catalogs=sgml-lib/xml.soc

# no debugging messages, please
verbosity=0

# Use the SYSTEM identifier 
prefer=system 
```

告诉解析器在遇到 DTD 时使用目录解析器：

```
cResolver = new CatalogResolver( cMgr )
reader = new SAXReader( )
reader.setEntityResolver( cResolver ) 
```

# c# - 问题：SqlException 未处理

> ID：13206784
> 
> 赞同：0
> 
> 时间：2012-11-03T06:49:09.733
> 
> 标签：c#, sql-server

我正在尝试使用 SQL Server 数据库执行我的登录表单。但我收到一条错误消息

> *' '*附近的语法不正确**

 *我收到错误的行是：

```
objda.Fill(objds, "adm"); 
```

我的代码是：

```
public partial class Form1 : Form
{
    int total;
    SqlConnection objc;
    string c = "data source=.; initial catalog=student; integrated security=SSPI";
    SqlDataAdapter objda;
    DataSet objds;
    SqlCommand objcmd;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (objc != null)
        {
            objc.Open();
        }
        objcmd = new SqlCommand("select * form adm where Name= ' " + textBox1.Text + "',pass = ' " + textBox2.Text + "'", objc);
        if (objc != null)
        {
            objc.Close();
        }
        objc = new SqlConnection(c);
        objcmd = new SqlCommand("search * from adm", objc);
        objda = new SqlDataAdapter(objcmd.CommandText, objc);
        objds = new DataSet();
        objda.Fill(objds, "adm");

        total = Convert.ToInt32(objds.Tables["adm"].Rows.Count);
        if (total > 0)
        {
            MessageBox.Show("welcome");
            Class1.login = textBox1.Text;
            Form2 f2 = new Form2();
            this.Hide();
            f2.Show();
        }
        else
        {
        } 
```

我该怎么办？

哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:54:00.777

除了 SQL 注入漏洞、缺少 using 语句和明显不正确的语法（缺少 AND，加上拼写错误的 FROM）之外：

您忘记打开连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T06:55:48.867

您必须再次打开连接

```
 objc.Open(); 
```

并改变

```
select * form 
```

到

```
select * from 
```

也`AND`不见了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:56:27.507

您忘记在两个条件之间放置“And”并且错过了拼写`form`关键字。

```
objcmd = new SqlCommand("select * from adm where Name= '" + textBox1.Text + "' And pass = '" + textBox2.Text + "'", objc); 
```

顺便说一句，您应该使用`parameters`以[避免`sql injection`](http://msdn.microsoft.com/en-us/library/ff648339.aspx)漏洞

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-03T06:54:06.063

```
objcmd = new SqlCommand("select * form adm where Name= ' " + textBox1.Text + "',pass = ' " + textBox2.Text + "'", objc); 
```

应该是：

```
objcmd = new SqlCommand("select * from adm where Name= ' " + textBox1.Text + "',pass = ' " + textBox2.Text + "'", objc); 
```*

# multithreading - Spring @Async 限制线程数

> ID：13206792
> 
> 赞同：33
> 
> 时间：2012-11-03T06:50:13.920
> 
> 标签：multithreading, spring, asynchronous, thread-synchronization

我的问题与这个问题非常相似：[@Async prevent a thread to continue until other thread has done](https://stackoverflow.com/questions/4324212/async-prevent-a-thread-to-continue-until-other-thread-have-finished)

基本上我需要在更多线程中运行〜数百次计算。我只想运行一定数量的并行线程，例如并行运行 5 个线程和 5 个计算。

我正在使用 spring 框架，@Async 选项是自然的选择。我不需要功能齐全的 JMS 队列，这对我来说有点开销。

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-05-07T08:12:37.110

如果你使用 Spring 的 Java 配置，你的配置类需要实现`AsyncConfigurer`：

```
@Configuration
@EnableAsync
public class AppConfig implements AsyncConfigurer {

    [...]

    @Override
    public Executor getAsyncExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(2);
        executor.setMaxPoolSize(5);
        executor.setQueueCapacity(50);
        executor.setThreadNamePrefix("MyExecutor-");
        executor.initialize();
        return executor;
    }
} 
```

有关更多详细信息，请参阅`@EnableAsync`文档：http: [//docs.spring.io/spring/docs/3.1.x/javadoc-api/org/springframework/scheduling/annotation/EnableAsync.html](http://docs.spring.io/spring/docs/3.1.x/javadoc-api/org/springframework/scheduling/annotation/EnableAsync.html)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-03T06:54:51.867

你检查了`Task Executor`吗？您可以定义一个线程池，使用最大数量的线程来执行您的任务。

如果您想将它与 一起`@Async`使用，请在您的 spring-config 中使用它：

```
<task:annotation-driven executor="myExecutor" scheduler="myScheduler"/>

<task:executor id="myExecutor" pool-size="5"/>

<task:scheduler id="myScheduler" pool-size="10"/> 
```

完整参考[这里](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)（25.5.3）。希望这可以帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-10-03T08:44:05.883

**从 Spring Boot 2.1**开始，您可以使用自动配置并更改应用程序属性文件中的最大线程数

```
spring.task.execution.pool.max-size=4 
```

查看完整文档：
[https ://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-task-execution-scheduling](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-task-execution-scheduling)

# ios - iOS NSData 在发送 PNS 设备令牌时记录空值

> ID：13206794
> 
> 赞同：1
> 
> 时间：2012-11-03T06:51:07.453
> 
> 标签：ios, push-notification, nsdata, apple-push-notifications

我正在为我的应用程序启用 PNS 服务...当我尝试记录我的 NSData 值并将其发送到我的服务器时，它记录为空。如果我在我的 VC 中为 ibaction 使用相同的代码，它工作正常，如果我在哪里手动输入设备令牌..这是我的代码...有什么想法可以解决我的问题吗？...

```
NSString* newToken = [deviceToken description];
newToken = [newToken stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];
newToken = [newToken stringByReplacingOccurrencesOfString:@" " withString:@""];
NSString *urlString = [NSString stringWithFormat:@"http://sample.net/demo/registerDevice.php?appId=0003&deviceToken=%@",newToken];
NSLog(@"%@",newToken);
NSURL *url = [[NSURL alloc] initWithString:urlString];
NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
 NSData *urlData ;
NSURLResponse *response ;
urlData = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:nil];
NSLog(@"%@",urlData); 
```

# python - gevent中的cron（计时器）之类的东西

> ID：13206798
> 
> 赞同：8
> 
> 时间：2012-11-03T06:51:25.020
> 
> 标签：python, timer, gevent

如何在 gevent 中制作经典计时器？

我目前正在使用 gevent.spawn_later 但有没有办法像 cron 一样使用 core.timer 说“在间隔上进行回调”？

```
def callback():
    # do something
    print '!'

timer = core.timer(10, callback)
timer.start()

outpout:
0s
10s  !
20s  !
30s  ! 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-10-24T13:36:20.580

这取决于您希望安排工作的准确程度。有两种机制：

[这个博客](http://techualization.blogspot.co.uk/2011/08/simple-job-scheduling-with-gevent.html)有一个巧妙的技巧`gevent.spawn_later`来创建一个计时器：

```
def schedule(delay, func, *args, **kw_args):
    gevent.spawn_later(0, func, *args, **kw_args)
    gevent.spawn_later(delay, schedule, delay, func, *args, **kw_args) 
```

或者当然你可以简单地睡在一个可能更具可读性的循环中：

```
def run_regularly(self, function, interval, *args, **kwargs):
    while True:
        gevent.sleep(interval)
        function(*args, **kwargs) 
```

但是，这两者都会随着时间的推移而漂移，特别是如果您的函数相对于间隔需要时间来完成。您可以通过按函数执行时间调整睡眠间隔来进行补偿：

```
def run_regularly(self, function, interval, *args, **kwargs):
    while True:
        before = time.time()
        function(*args, **kwargs)

        duration = time.time() - before
        if duration < interval:
            gevent.sleep(interval-duration)
        else:
            warning("function %s duration exceeded %f interval (took %f)" % (
                function.__name__, interval, duration)) 
```

这仍然会漂移，只是没有那么多......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T22:05:25.567

在我的脑海中，您可以循环使用 gevent.sleep ：

```
import gevent
import gevent.monkey

gevent.monkey.patch_all()

INTERVAL = 10

def callback():
    # do something
    print "!"

def loop():
    while True:
        gevent.sleep(INTERVAL)
        callback()

gevent.Greenlet.spawn(loop) 
```

当然，您可以将此代码放在一个不错的 API 中，例如 core.timer。但我会让你所有的乐趣:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-23T12:51:03.327

这是一个初始化到整秒并随后纠正任何漂移的版本。它还可以用于将一段时间分成几个部分用于不同的目的：

```
import time
import gevent

def print_time(sleep_time, tag):
    print time.time(), tag
    time.sleep(sleep_time)

def run_regularly(function, intervals, sleep_time=0.1, round_length=1):
    _, init  = divmod(time.time(), 1)
    gevent.sleep(1 - init)
    while True:
        before = time.time()
        _, offset = divmod(before, round_length)
        for div in intervals:
            function(sleep_time, div)
            after = time.time() - before
            if after < (div * round_length):
                gevent.sleep((div * round_length) - after - (offset / len(intervals)))

gevent.spawn(run_regularly, print_time, [0.2, 0.8, 1.0])

while 1:
    gevent.sleep(0.1) 
```

# jquery - flowplayer : 控件被隐藏

> ID：13206801
> 
> 赞同：0
> 
> 时间：2012-11-03T06:52:08.063
> 
> 标签：jquery, video, flash, flowplayer

默认情况下，控件是隐藏的，即使在鼠标悬停时也不显示。

我想自定义控件 UI，添加播放/暂停按钮，并且控件应该始终可见。

我为 div 设置了类名“flowplayer is-splash”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:59:19.323

```
Change the files names/path accordigly:
 You can also check the code here http://easydaytravels.com/video/example/

<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<!-- A minimal Flowplayer setup to get you started -->

    <!-- 
        include flowplayer JavaScript file that does  
        Flash embedding and provides the Flowplayer API.
    -->
    <script type="text/javascript" src="flowplayer-3.2.4.min.js"></script>

    <!-- some minimal styling, can be removed -->
    <link rel="stylesheet" type="text/css" href="style.css">

    <!-- page title -->
    <title>Example</title>

</head><body>

    <div id="page">

        <h1>Black hawk down Part1</h1>
             <br>
        <a href="http://easydaytravels.com/files/Vts_03_1.flv"
    style="display:block;width:425px;height:300px;"
    id="player1">
</a>

<h1>Black hawk down Part2</h1>
             <br>

        <a href="http://easydaytravels.com/files/Vts_03_2.flv"
    style="display:block;width:425px;height:300px;"
    id="player"></a>

    <!--<a href="http://localhost/flv/Vts_03_1.flv"
    style="display:block;width:425px;height:300px;"
    id="player1">
</a>
    <h1>Black hawk down Part2</h1>
             <br>

        <a href="http://localhost/flv/Vts_03_2.flv"
    style="display:block;width:425px;height:300px;"
    id="player">
</a>-->

        <!-- this will install flowplayer inside previous A- tag. -->
        <!--<script>
            flowplayer("player", "../flowplayer-3.2.5.swf");
        </script>
    -->

    <script>

flowplayer("player1", "../flowplayer-3.2.5.swf", {
    clip: {
        // these two configuration variables does the trick
        autoPlay: false,
        autoBuffering: false // <- do not place a comma here
    }
});     

flowplayer("player", "../flowplayer-3.2.5.swf", {
    clip: {
        // these two configuration variables does the trick
        autoPlay: true,
        autoBuffering: true // <- do not place a comma here
    }
});     

    </script>

    </div>

</body></html> 
```

**你可以这样尝试：**

```
flowplayer("player_id", "/path/to/flowplayer-3.1.1.swf", {
    onMouseOut: function() {
        $f().getControls().show();
    },

    plugins:  {
        controls:  {
            backgroundGradient: 'none',
            backgroundColor: 'transparent',
            backgroundImage: 'url(/path/to/background.png)',
            backgroundRepeat: 'repeat'
        }
    }
}); 
```

您也可以参考这个[http://flash.flowplayer.org/forum/8/20841](http://flash.flowplayer.org/forum/8/20841)来解决这个问题。

# jquery - 为什么我的 jquery 可以在 jsFiddle 上工作，但不能在我的 localHost 上工作？

> ID：13206804
> 
> 赞同：3
> 
> 时间：2012-11-03T06:52:46.550
> 
> 标签：jquery, google-chrome, jsfiddle

适用于 jsFiddle 的代码：http: [//jsfiddle.net/NTadX/](http://jsfiddle.net/NTadX/)
我的 jquery 代码：

```
<link rel="stylesheet"
    href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<link rel="stylesheet" href="/CSS/mystyle.css" />

<style>
    $(function(){
$("input[value='WN']").hover(
    function() { 
        $('#divid').empty();
        $("#divid").append("<div>WN: Weekly Number. The number of consecutive weeks you want to book the room</div>"); 
        $("#divid").toggle();
    }
);
$("input[value='DN']").hover(
    function() { 
        $('#divid').empty();
         $("#divid").append("<div>DN: Day Number. The number of consecutive days you want to book the room</div>"); 
        $("#divid").toggle();
    }
);
$("input[value='DD']").hover(
    function() { 
        $('#divid').empty();
         $("#divid").append("<div>DD: Day date. The date till which you want to book the room for consecutive days </div>"); 
        $("#divid").toggle();
    }
);
$("input[value='WD']").hover(
    function() { 
        $('#divid').empty();
         $("#divid").append("<div>WD: Weekly date. The date till which you want to book the room for consecutve weeks</div>"); 
        $("#divid").toggle();
    }
);
 });
</style> 
```

我已经检查过了，上面的代码只有在文档完全加载时才开始......我真的不知道为什么它不起作用。我在谷歌应用引擎上运行这个。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:55:15.417

将您的代码放在脚本标签中：

```
<script type="text/javascript">
$(function(){
$("input[value='WN']").hover(
    function() { 
        $('#divid').empty();
        $("#divid").append("<div>WN: Weekly Number. The number of consecutive weeks you want to book the room</div>"); 
        $("#divid").toggle();
    }
);
$("input[value='DN']").hover(
    function() { 
        $('#divid').empty();
         $("#divid").append("<div>DN: Day Number. The number of consecutive days you want to book the room</div>"); 
        $("#divid").toggle();
    }
);
$("input[value='DD']").hover(
    function() { 
        $('#divid').empty();
         $("#divid").append("<div>DD: Day date. The date till which you want to book the room for consecutive days </div>"); 
        $("#divid").toggle();
    }
);
$("input[value='WD']").hover(
    function() { 
        $('#divid').empty();
         $("#divid").append("<div>WD: Weekly date. The date till which you want to book the room for consecutve weeks</div>"); 
        $("#divid").toggle();
    }
);
 });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:23:39.817

看起来`toogle()`给你造成了问题。这是一个工作[小提琴](http://jsfiddle.net/Cbk5n/6/)

开关盒会更好

[在 jquery 中切换大小写](https://stackoverflow.com/questions/2696436/switch-case-in-jquery)

更精致的版本[在这里](http://jsfiddle.net/x5xRG/10/)

```
$(document).ready(function(){
    $("input.selectionItems").live('hover', function() {

        optSelected = $(this).val();
        toUpdate = $("#divid");

    switch (optSelected) {
                    case ('WN'):
                        toUpdate.html("<div>WN: Weekly Number. The number of consecutive weeks you want to book the room</div>"); 
                        break;
                    case ('DN'):
                        toUpdate.html("<div>DN: Day Number. The number of consecutive days you want to book the room</div>"); 
                        break;
                    case ('DD'):
                       toUpdate.html("<div>DD: Day date. The date till which you want to book the room for consecutive days </div>"); 
                        break;
                    case ('WD'):
                       toUpdate.html("<div>WD: Weekly date. The date till which you want to book the room for consecutve weeks</div>"); 
                        break;
                    default:
                        alert('No Selection');
                }
            }
      );

    $('input.selectionItems').live('mouseleave', function(){
        $("#divid").empty();
    });
});​ 
```

# c# - 如何确定 ac# 应用程序是否繁忙？

> ID：13206807
> 
> 赞同：1
> 
> 时间：2012-11-03T06:53:26.830
> 
> 标签：c#, xml, winforms

> **可能重复：**
> [如何在加载 xml 文件期间使用进度条](https://stackoverflow.com/questions/8099149/how-to-use-progress-bar-during-loading-an-xml-file)

我有一个 XML 文件，XML 文件中有近 200.000 条记录。
我将这些记录加载到 DataTable 中，如下所示。

```
string file = "C:\\records.xml";
DataTable dt = new DataTable();
dt.ReadXml(file); 
```

当此过程正常工作时，应用程序会等待，直到将数据加载到数据表中。
所以，我想利用这个时间。我想在将数据加载到数据表时向用户进程栏显示。
我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:55:22.007

在不同的线程上执行长阻塞操作总是更好的做法，使用**[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)**.

您可以使用该**[`ReportProgress`](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)**方法更新 UI 线程上的 progressBar。**[这](http://www.codeproject.com/Tips/83317/BackgroundWorker-and-ProgressBar-demo)**是一个例子。

# mysql - MySQL 错误！1064

> ID：13206808
> 
> 赞同：-3
> 
> 时间：2012-11-03T06:53:28.157
> 
> 标签：mysql

嗨，我对这一切都很陌生，我在我的 VPS 上重新安装了我的操作系统 Ubuntu，并在成功恢复后尝试恢复我的数据库，我尝试访问我的站点，但出现此错误。请帮我解决这个问题我真的什么都不知道..

## MySQL 错误！

返回的错误是：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“LIMIT 0”附近使用正确的语法

错误号：1064

```
SELECT 
    SQL_CALC_FOUND_ROWS tag, COUNT(*) AS count 
FROM dle_search 
GROUP BY tag 
ORDER BY  LIMIT 0, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T06:54:59.963

这里“订购？” 列名是必需的：

```
SELECT SQL_CALC_FOUND_ROWS tag, COUNT(*) AS count FROM
 dle_search
 GROUP BY tag 
 ORDER BY columnname 
 LIMIT 0, 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:08:34.730

**主要问题是，您在 ORDER BY 之后缺少列名。此外，您没有在 0 之后指定数字，这是有限的。**

您的查询应如下所示。

```
SELECT 
    SQL_CALC_FOUND_ROWS tag, COUNT(*) AS MyCounter 
FROM dle_search 
GROUP BY tag 
ORDER BY MyCounter LIMIT 0,5 
```

***建议：不要使用保留关键字作为列名。我看到您使用 COUNT 作为列名。选择其他名称。***

# objective-c - 在 ScrollView 中移动 UIImageViews

> ID：13206824
> 
> 赞同：0
> 
> 时间：2012-11-03T06:55:15.703
> 
> 标签：objective-c

在我的滚动视图中，我有多个图像视图，当用户点击 LONGPRESS 时，我可以移动每个图像视图，我已经这样做了，

```
UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(moveImage:)];
[panGesture setMaximumNumberOfTouches:2];
[panGesture setDelegate:self];
[imageview addGestureRecognizer:panGesture];

UILongPressGestureRecognizer *longPressRecognizer = [[UILongPressGestureRecognizer alloc] init];
[imageview addGestureRecognizer:longPressRecognizer];

- (BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {

return YES;
}

- (void)adjustAnchorPointForGestureRecognizer:(UIGestureRecognizer *)gestureRecognizerv     {
if (gestureRecognizer.state == UIGestureRecognizerStateBegan) {
    UIView *piece = gestureRecognizerv.view;
    CGPoint locationInView = [gestureRecognizerv locationInView:piece];
    CGPoint locationInSuperview = [gestureRecognizerv locationInView:piece.superview];

    piece.layer.anchorPoint = CGPointMake(locationInView.x / piece.bounds.size.width, locationInView.y / piece.bounds.size.height);
    piece.center = locationInSuperview;
}
}

- (void)moveImage:(UIPanGestureRecognizer *)gestureRecognizerg
{
NSLog(@"sdfgdsgsdg");
UIView *piece = [gestureRecognizerg view];
[self adjustAnchorPointForGestureRecognizer:gestureRecognizerg];

// need to test if the scrollview is already using the touches. If it is, leave them
if (!galleryView.tracking) {
    if ([gestureRecognizerg state] == UIGestureRecognizerStateBegan || [gestureRecognizerg state] == UIGestureRecognizerStateChanged) {
        CGPoint translation = [gestureRecognizerg translationInView:[piece superview]];

        [piece setCenter:CGPointMake([piece center].x + translation.x, [piece center].y + translation.y)];
        [gestureRecognizerg setTranslation:CGPointZero inView:[piece superview]];
    }
}
} 
```

在这里，我的问题是**IMAGEVIEW 正在移动 scollview 中的每个位置，我需要重新排列视图，**例如画廊视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:34:52.840

要获得这种重新排列行为，您将需要一些逻辑来设置网格并将元素“捕捉”到它，在需要时将元素移开等等。这相当复杂。您当前的代码只是用您的手势移动视图。

但是，如果您能够以 iOS 6 及更高版本为目标，您几乎肯定会想要使用 a`UICollectionView`来代替，它可以免费为您提供很多这样的功能。集合视图简化了重新排列背后的布局和逻辑，通常会让你的生活*更*轻松。

# actionscript-3 - 如何在 flex 4.6 中添加列表框？

> ID：13206833
> 
> 赞同：-1
> 
> 时间：2012-11-03T06:55:59.723
> 
> 标签：actionscript-3, apache-flex, flex4.6

Flex 4.6 中有列表框吗？

如果是，sm1 可以告诉我如何在 Flex 代码中实现列表框

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:30:15.380

Flex 有一个[Spark List](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/List.html)控件，使用[`IList`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/IList.html)([`ArrayList`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ArrayList.html)或[`ArrayCollection`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ArrayCollection.html)) 作为数据提供者。

![列表](../Images/d057ba44c2bf8271e1165468267d012c.png)

**声明式方法：**

使用 MXML，这被实现为`<s:List>`，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark">

    <s:List>
        <s:dataProvider>
            <s:ArrayList>
                <fx:String>Item 1</fx:String>
                <fx:String>Item 2</fx:String>
                <fx:String>Item 3</fx:String>
            </s:ArrayList>
        </s:dataProvider>
    </s:List>

</s:Application> 
```

**程序化方法：**

从代码中，一个列表被实例化并添加到显示列表中，例如：

```
import mx.collections.ArrayList;
import spark.components.List;

var list:List = new List();
list.dataProvider = new ArrayList([ "Item 1", "Item 2", "Item 3" ]);
addElement(list); 
```

**参考：**

*   [火花列表控制](http://help.adobe.com/en_US/flex/using/WSc2368ca491e3ff923c946c5112135c8ee9e-7fff.html)
*   [Spark 列表 API 参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/List.html)

# c# - 在 TCP 连接上接收大量数据时出现内存不足异常

> ID：13206838
> 
> 赞同：1
> 
> 时间：2012-11-03T06:56:34.030
> 
> 标签：c#, networking, tcp, stream

我有一个应用程序通过 TCP 连接从现场的 GPRS 客户端接收数据。GPRS 客户端设备有时会丢失连接并缓冲数据，当连接恢复时，所有缓冲的数据都会发送到 TCP 连接，导致我的应用程序抛出 System.OutOfMemoryException。

我认为这是因为接收到的数据大于我的缓冲区大小（设置为 int.MaxValue）。

1.  如何防止我的应用程序内存不足？
2.  如何确保不会丢失任何传入数据？

下面是用于侦听和处理传入数据的代码

```
public void Listen(string ip, int port)
{
    _logger.Debug("All.Tms.SensorDataServer : SensorDataListener : Listen");

    try
    {
        var listener = new TcpListener(IPAddress.Parse(ip), port);
        listener.Start();

        while (true)
        {
            var client = listener.AcceptTcpClient();
            client.SendBufferSize = int.MaxValue;

            var thread = new Thread(() => ReadAndHandleIncommingData(client));
            thread.IsBackground = true;
            thread.Start();
        }
    }
    catch (Exception ex)
    {
        _logger.Error("TMS.Sensor.SensorDataServer : SensorDataListener : Error : ", ex);
    }  
} 
```

和

```
private void ReadAndHandleIncommingData(TcpClient connection)
{
     try
     {
         var stream = connection.GetStream();
         var data = new byte[connection.ReceiveBufferSize];

         var bytesRead = stream.Read(data, 0, System.Convert.ToInt32(connection.ReceiveBufferSize));

         var sensorDataMapper = new SensorDataMapperProvider().Get(data);

         if (sensorDataMapper != null)
         {
             _sensorDataHandler.Handle(sensorDataMapper.Map(data));
         }
    }
    catch (Exception ex)
    {
        _logger.Error("TMS.Sensor.SensorDataServer : SensorDataListener : ReadAndHandleIncommingData : Error : ", ex);
    }
    finally
    {
        try
        {
            connection.Close();
        }
        catch(Exception ex)
        {
            _logger.Error("All.Tms.SensorDataServer : SensorDataListener : ReadAndHandleIncommingData : Error : ", ex);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T09:38:16.013

## 关于缓冲区

`OutOfMemoryException`当没有剩余的**顺序内存**时抛出 s 。
在您的情况下，这意味着`connection.ReceiveBufferSize`太大而无法保存在一块内存中。不是因为*收到的数据大于你的缓冲区大小*。

您可以使用较小的固定缓冲区来获取接收到的字节，将其附加到某处并使用相同的缓冲区来接收其余数据，直到您拥有所有数据。

需要注意的一件事是您用于存储接收到的数据的集合。例如，您不能使用`List<byte>`它，因为它将其元素存储在引擎盖下的单个数组中，这与一次性获取所有内容没有区别 - 就像您现在所做的那样。

您可以看到[MemoryTributary](http://www.codeproject.com/Articles/348590/A-replacement-for-MemoryStream "代码项目 |  MemoryStream 的替代品")，这是一个旨在替换的流实现`MemoryStream`。您可以将您的流复制到此并将其保留为流。此页面还包含很多信息，可以帮助您了解`OutOfMemoryException`s 的原因。

另外，不久前我写了一个缓冲区管理器来提供固定大小的缓冲区。您可以在[此处](https://codereview.stackexchange.com/q/17804/17039 "代码审查 |  提供字节数组段的阻塞缓冲区管理器")的代码审查中找到它。

## 关于线程

*为每个连接*创建一个线程是**残酷**的。它们每个花费 1 MB，因此您应该使用`ThreadPool`或更好的 IOCP（通过`Socket`类的异步方法）。

您可能想查看这些关于套接字编程的常见陷阱和最佳实践：

*   [斯蒂芬·克利里（博客）| TCP/IP .NET 套接字常见问题解答](http://blog.stephencleary.com/2009/04/tcpip-net-sockets-faq.html)
*   [堆栈溢出 | 如何编写可扩展的基于 Tcp/Ip 的服务器](https://stackoverflow.com/q/869744/704144)
*   [代码项目 | C# SocketAsyncEventArgs 高性能套接字代码](http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T09:02:02.960

使用固定的接收缓冲区，增量解析数据

# python - 为什么我的 if 语句显示为错误？当 a==0 时，代码不会退出。时间应该是分钟/秒

> ID：13206843
> 
> 赞同：1
> 
> 时间：2012-11-03T06:57:35.853
> 
> 标签：python, python-2.7, tkinter

我无法弄清楚为什么我的计时器在运行时没有达到零。我试图让窗口在 a=0 时关闭，但一直减少到负数，为什么？这是我的代码

```
def close_timer(self):
    global a
    a = float(a - 0.1)
    self.labeltext.set(str(("%.1f" % (a))))
    a = float(a)
    print a
    print (a == 0)
    if a == 0:
        self.canvas.after(100)
        self.root.destroy()
    self.root.after(100,self.close_timer) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T07:11:33.353

浮点数数学[通常是不准确](http://docs.python.org/2/tutorial/floatingpoint.html)的 - 你不能准确地表示`0.1`二进制浮点中的小数，因此你永远不会达到`0`：

```
>>> a = 1
>>> while a > 0:
...     a = a - 0.1
...     print(repr(a))
...
0.9
0.8
0.7000000000000001
0.6000000000000001
0.5000000000000001
0.40000000000000013
0.30000000000000016
0.20000000000000015
0.10000000000000014
1.3877787807814457e-16
-0.09999999999999987 
```

使用`if abs(a) < 0.000001:`或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:12:01.387

除非您知道并减轻后果，否则将浮点数与固定值进行比较总是很危险的。

最有可能的是，您的价值正在下降为：

```
0.099999923354 
```

因为每次减去时都会逐渐将不精确性注入到您的值中`0.1`（这在 IEEE754 中无法直接表示）。

然后，当你减去 final 时`0.1`，你会得到类似：

```
-0.00000005345 
```

不*等于零*。

最快的解决方法是可能将您的零检查更改为：

```
if a <= 0: 
```

所以小错误是无关紧要的，除了可能需要一个额外的周期（可能是十分之一秒），如果它到达`0.0000001`它应该为零的地方，例如。

如果您想确保不采取额外的循环，并且您确信逐渐引入的错误不会太大，只需将其更改为：

```
if a <= 0.0003: 
```

或类似的东西。

# android - Android - 按下主页键时关闭应用程序

> ID：13206844
> 
> 赞同：3
> 
> 时间：2012-11-03T06:57:39.103
> 
> 标签：android, eclipse, sdk

我制作的这个应用程序运行良好，但是当我离开应用程序并再次打开它时，它总是强制关闭。我怎样才能做到这一点，当用户按下主页和/或返回键时，它会终止应用程序进程？

让它在应用程序再次打开时重新开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T07:08:05.633

你不应该“杀死进程”。`onPause()`您应该处理通过和`onResume()`方法离开您的应用程序的主页按钮按下和其他此类交互。

在您的`onPause()`方法中，您应该保存应用程序的状态。这可以从将其保存在 Bundles、SharedPreferences、sqlite 或任何适合您的应用程序的持久性形式中。

在你的`onResume()`方法中，你应该恢复你的应用程序的状态，这样用户就会产生一种什么都没有改变的错觉。

这就是 android 处理多任务处理的方式，这也是您必须在您的应用程序中适应它的方式，以有效和可靠地使您的应用程序适应 android 框架。

我建议您先在这里阅读活动生命周期指南：

[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

更多关于暂停和恢复活动的详细信息：

[http://developer.android.com/training/basics/activity-lifecycle/pausing.html](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)

此外，您可能想在此处阅读数据存储选项：

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

# android - android应用内支付sdk

> ID：13206845
> 
> 赞同：1
> 
> 时间：2012-11-03T06:57:39.897
> 
> 标签：android, mobile, payment, in-app-purchase

我想将应用购买添加到我的 Android 应用中。我知道我可以使用 Google In-App Billing API，但我想知道我是否可以使用其他库来提供更完整的解决方案，这样我就不必编写那么多代码。我知道有 Urban Airship，但他们的费用很高。有人知道别的吗？有没有大牌？理想情况下，用户将能够使用多种支付方式进行支付。对 iOS 的支持会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:38:40.290

请注意，Google 政策在您必须使用 Google API 的情况下为虚拟商品付款或在您可以使用其他 3 第三方的情况下为实物商品付款时有所不同。

Google checkout 也不支持某些国家/地区，因此我猜在这些国家/地区，您也可以将 3rd 方用于虚拟物品。

这是一个直接的问题，所以我将使用我自己的公司来回答你可以试试 ZooZ，Android 和 iOS 都可以 www.zooz.com

# javascript - 使用 Arc.centroid 绘制圆圈 - 但文本不符合它，为什么？

> ID：13206849
> 
> 赞同：0
> 
> 时间：2012-11-03T06:58:33.487
> 
> 标签：javascript, d3.js

我已经使用 arc.Centroid 尝试在带有标签的弧上绘制我的圆圈。但是，标签不留下来吗？

force.on("tick", function() {

```
 text.attr("x", function(d) { return d.x + 6; })
     .attr("y", function(d) { return d.y + 4; });           

   node.attr("transform", function(d,i) {

   return "translate(" + arc[i].centroid(d) + ")"; }) 
```

});

我试图用 centroid & arc[i] 代替 x & y。如何将我的圈子与文字放在一起？[http://jsfiddle.net/xwZjN/20/](http://jsfiddle.net/xwZjN/20/)

还说如果我有更多的 json 数据，我是否能够限制图只进入每个部分，例如每个部分都是一个类别？

任何帮助都会很棒。我认为解决方案可能与此类似 - [http://jsfiddle.net/nrabinowitz/GQDUS/](http://jsfiddle.net/nrabinowitz/GQDUS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:41:18.113

看来力布局不是您的应用程序的正确选择。尝试将您的符号和文本分组到一个`g`元素中，并将它们放置在计算出的坐标处。请参阅没有强制布局的更新小提琴：http: [//jsfiddle.net/xwZjN/26/](http://jsfiddle.net/xwZjN/26/)

```
var node = svg.selectAll("g.node")
    .data(nodes)
  .enter().append("g")
    .attr("class", "node")
    .attr("transform", function(d,i) {
      return "translate(" + arc[i].centroid() + ")"; 
    });

node.append("path")
    .attr("d", d3.svg.symbol().type(function(d) { return d.type; }))
    // change (0,0) for exact symbol placement
    .attr("transform", "translate(0,0)")
    .style("fill", "blue" );

node.append("text") 
      .text(function(d) { return d.Name; })
      // shift text in nice position
      .attr("x", 10)
      .attr("y", 5); 
```

# ios - iOS 可拖动子视图

> ID：13206850
> 
> 赞同：0
> 
> 时间：2012-11-03T06:58:35.817
> 
> 标签：ios, xamarin.ios

在实现可拖动视图时面临一些困难。使用 monotouch，但我不认为它是特定于语言的......问题详细信息：我有一个处理 TouchesBegan、TouchesMove 和重新定位自身的视图（通过更改 Frame 属性）。那工作完美！一旦我添加了禁用滚动和分页的 ScrollView，在滚动视图上进行的任何触摸都不会到达必须移动的视图。将 UserInteraction 设置为 NO 可以解决移动问题，但滚动条内的任何控件都不会响应任何触摸。

关于如何拥有 ScrollView 并允许它的超级视图在没有可用滚动事件时接收所有触摸的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:08:51.393

您必须将触摸传递给子视图，这个类别`UIScrollView`将完成这项工作：

```
@implementation UIScrollView (FixedApi)

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [[event allTouches] anyObject];

    NSLog(@"touch view = %@", [[touch view].class description]);
    if ([[[touch view].class description] isEqualToString:@"UITableView"]) {
        //You have touched a UITableView
    } else if ([[[touch view].class description] isEqualToString:@"UIView"]) {
        //You have touched a UIView
    } else {
         //Ignore the category and return the touch to the UIScrollView.
         [self.superview touchesBegan:touches withEvent:event]; // or 1 nextResponder, depends
         [super touchesBegan:touches withEvent:event];
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    if ( !self.dragging ) [self.nextResponder.nextResponder touchesEnded:touches withEvent:event];
    [super touchesEnded:touches withEvent:event];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:02:55.317

您可以使用 PanGesture Action 拖动子视图...

```
-(void)panGRAction {

  if (panGR.state == UIGestureRecognizerStateBegan) {

        UITouch *touch = [[event allTouches] anyObject];

    NSLog(@"touch view = %@", [[touch view].class description]);
    if ([[[touch view].class description] isEqualToString:@"UITableView"]) {
        //You have touched a UITableView
    } else if ([[[touch view].class description] isEqualToString:@"UIView"]) {
        //You have touched a UIView
    } else {
         //Ignore the category and return the touch to the UIScrollView.
         [self.superview touchesBegan:touches withEvent:event]; // or 1 nextResponder, depends
         [super touchesBegan:touches withEvent:event];
    }

    } else if (panGR.state == UIGestureRecognizerStateEnded) {
if ( !self.dragging ) [self.nextResponder.nextResponder touchesEnded:touches withEvent:event];
    [super touchesEnded:touches withEvent:event];
}

} 
```

# php - 带有验证的弹出式联系表单

> ID：13206852
> 
> 赞同：0
> 
> 时间：2012-11-03T06:58:44.843
> 
> 标签：php, codeigniter

我想像在这里一样创建带有验证的弹出式联系表单，`http://89.212.111.174/delovtujini.si`然后单击“VPIS V BAZO”。

您将获得弹出窗口，您可以在其中填写联系表格。我怎么能用 CI 做到这一点？在此示例中，我在同一个 html 页面中执行所有操作。在 CI 中，我尝试为联系人表单创建新控制器，但我不知道如何打开窗口。我也尝试使用[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)我尝试。但没有一个解决方案有效。

有人可以解释我该怎么做吗？也许最好使用[https://github.com/EllisLab/CodeIgniter/wiki/Ajax-Framework-For-CodeIgniter](https://github.com/EllisLab/CodeIgniter/wiki/Ajax-Framework-For-CodeIgniter)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:25:37.597

有 3 种方法可以跟踪您的问题。

1）使用自定义内嵌灯箱，就像在上面所做的那样

```
http://89.212.111.174/delovtujini.si 
```

首先将表单发布回同一页面，如下所示：

```
public function sign_up()
{
    // Setup form validation
    $this->form_validation->set_rules(array(
        //...do stuff...
    ));

    // Run form validation
    if ($this->form_validation->run()) 
    {
        //...do stuff...
        redirect('');
    }

    // Load view
    $this->load->view('my_form');
} 
```

在您检测到 POST 的视图中，您必须使用 javascript 在页面加载时“打开”灯箱，因为默认情况下它不会显示（即，当您正常加载页面时，灯箱是“关闭”并且它是“打开”仅当单击按钮时。）

2) 使用 iframe 灯箱

在单独的 CI 控制器/视图上创建表单，并在单击按钮时显示在 iframe 中。提交表单后，您可以调用 javascript 来关闭灯箱。

3) 使用 ajax 内联和 iframe 灯箱都可以使用 ajax 形式，其想法与使用 iframe 灯箱相同。通过 ajax 提交表单后，使用 javascript 关闭灯箱。

# opengl - OpenGL屏幕外渲染纹理未显示在屏幕上

> ID：13206859
> 
> 赞同：2
> 
> 时间：2012-11-03T07:00:09.167
> 
> 标签：opengl

我很难获得要显示的屏幕外渲染纹理。我已经检查了网络和其他问题，显然遗漏了一些东西。

我是 OpenGL 的新手，所以很可能会犯一些幼稚的错误。这是使用着色器添加后期处理以将 firestor/secondlife viewer 项目修改为 equifisheye 投影的例程的一部分。我的测试代码基于使用 OpenGL 1.3 的 GLEW 和 GLUT 框架，因为查看器旨在在旧平台上运行。

方法是：

1.  设置并初始化 FBO、渲染缓冲区和要绘制的纹理。
2.  为绘制 glutCube 和 glutTeapot 初始化各种默认设置 :)
3.  显示功能a）使用默认帧缓冲区绘制一个旋转立方体（工作正常）b）然后将纹理绘制到输出：全黑而不是旋转立方体。

我的代码是：

```
GLuint buffer_fbo;
GLuint bufferColtexture;
GLuint depthBuffer_rb;

typedef struct {
    int width;
int height;
char* title;

float field_of_view_angle;
float z_near;
float z_far;
} glutWindow;

glutWindow win;

// 

void ShutDown(void)
{
glDeleteFramebuffersEXT(1, &buffer_fbo);
glDeleteRenderbuffersEXT(1, &depthBuffer_rb);
glDeleteTextures(1,&bufferColtexture);
}

float g_potrotation = 0;
float g_potrotation_speed = 0.2f;

float xrot =0;
float yrot = 0;
float zrot = 0;

GLenum g_Drawbuffers[2] = {GL_COLOR_ATTACHMENT0_EXT };

void setupFBO(void)
{
// *********** set up scene FBO including dept buffers and their textures ****************

glGenFramebuffersEXT(1, &buffer_fbo);

// set up render buffers for depth info
glGenRenderbuffersEXT(1, &depthBuffer_rb);
glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, depthBuffer_rb);
glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT24, win.width, win.height);

// Genrate texture to render to
glGenTextures(1, &bufferColtexture);
glBindTexture(GL_TEXTURE_2D, bufferColtexture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8,  win.width, win.height, 0, GL_RGBA,   GL_UNSIGNED_BYTE, NULL);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

// attach texture to render to to fbo 
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, buffer_fbo); 
glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, bufferColtexture, 0);
glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, depthBuffer_rb);

GLenum status = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT); // check frame buffer

if(status != GL_FRAMEBUFFER_COMPLETE_EXT)
{
    printf("FRAMEBUFFER status error %i \n",status);
    exit(1);
}

glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0); // bind back to default

}   

void initialise() 
{

setupFBO();

    // select projection matrix
    glMatrixMode(GL_PROJECTION);                                                

// set the viewport
glViewport(0, 0, win.width,  win.height);                                   

// set matrix mode
 glMatrixMode(GL_PROJECTION);                                               

// reset projection matrix
  glLoadIdentity();                                                         
GLfloat aspect = (GLfloat) win.width / win.height;

// set up a perspective projection matrix
gluPerspective(win.field_of_view_angle, aspect, win.z_near, win.z_far);     

// specify which matrix is the current matrix
     glMatrixMode(GL_MODELVIEW);                                                    
glShadeModel( GL_SMOOTH );

// specify the clear value for the depth buffer
glClearDepth( 1.0f );                                                       
glEnable( GL_DEPTH_TEST );
glDepthFunc( GL_LEQUAL );

// specify implementation-specific hints
glHint( GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST );                        

GLfloat amb_light[] = { 0.1, 0.1, 0.1, 1.0 };
GLfloat diffuse[] = { 0.6, 0.6, 0.6, 1 };
GLfloat specular[] = { 0.7, 0.7, 0.3, 1 };
glLightModelfv( GL_LIGHT_MODEL_AMBIENT, amb_light );
glLightfv( GL_LIGHT0, GL_DIFFUSE, diffuse );
glLightfv( GL_LIGHT0, GL_SPECULAR, specular );
glEnable( GL_LIGHT0 );
glEnable( GL_COLOR_MATERIAL );
glShadeModel( GL_SMOOTH );
glLightModeli( GL_LIGHT_MODEL_TWO_SIDE, GL_FALSE );
glDepthFunc( GL_LEQUAL );
glEnable( GL_DEPTH_TEST );
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0); 
glClearColor(0.5, 0.5, 0.5, 1.0);   

}

void drawquad(void)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clear The Screen And The   Depth Buffer
 glDisable(GL_LIGHTING); // This was the cause of the problem, disable lighting worked!

glLoadIdentity();                                   // Reset The View
glTranslatef(0.0f,0.0f,-5.0f);
glTranslatef(0.0f,0.0f,-5.0f);
glRotatef(xrot,1.0f,0.0f,0.0f);
glRotatef(yrot,0.0f,1.0f,0.0f);
glRotatef(zrot,0.0f,0.0f,1.0f);

glBindTexture(GL_TEXTURE_2D, bufferColtexture);

glBegin(GL_QUADS);
// Front Face
glTexCoord2f(0.0f, 0.0f); glVertex2f(-1.0f, -1.0f);
glTexCoord2f(1.0f, 0.0f); glVertex2f( 1.0f, -1.0f);
glTexCoord2f(1.0f, 1.0f); glVertex2f( 1.0f,  1.0f);
glTexCoord2f(0.0f, 1.0f); glVertex2f(-1.0f,  1.0f);
glEnd();

xrot+=0.3f;
yrot+=0.2f;
zrot+=0.4f;

glEnable(GL_LIGHTING); // now reenabling the lighting. after adding to fix code.

}

void display(void)
{

// set red background
// draw to fbo
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT,0); 
// Clear Screen and Depth Buffer
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);          
glEnable(GL_TEXTURE_2D);

// set drawing a rotating cube as per default
glLoadIdentity();

// Define a viewing transformation
gluLookAt( 3,1,0, 0,0,0, 0,1,0);                      

// Push and pop the current matrix stack. 
// This causes that translations and rotations on this matrix wont influence others.

glPushMatrix();                                     
glColor3f(0,1,0);
glTranslatef(0,0,0);                            
glRotatef(g_potrotation,0,1,0);
glRotatef(90,0,1,0);

// Draw the solid cube
glutSolidCube(1);
glPopMatrix();          

// draw teapot to fbo
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, buffer_fbo);
glBindRenderbufferEXT(GL_RENDERBUFFER_EXT,depthBuffer_rb);
// Clear Screen and Depth Buffer
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);          
glLoadIdentity();

// Define a viewing transformation
gluLookAt( 4,2,0, 0,0,0, 0,1,0);                      

// Push and pop the current matrix stack. 
// This causes that translations and rotations on this matrix wont influence others.

glPushMatrix();                                     
glColor3f(1,0,0);
glTranslatef(0,0,0);                            
glRotatef(g_potrotation,0,1,0);
glRotatef(90,0,1,0);

// Draw the teapot
glutSolidTeapot(1);
glPopMatrix();                                        

g_potrotation += g_potrotation_speed;

glBindFramebufferEXT(GL_FRAMEBUFFER_EXT,0); // reset to default Frame and Render buffer
glBindRenderbufferEXT(GL_RENDERBUFFER_EXT,0);

drawquad();

glutSwapBuffers();  

}

// informs OpenGL that window size has changed.
void reshape(int width, int height)
{

}

void idle(void)
{
    glutPostRedisplay();
}

int checkglewOK()
{
if (GLEW_ARB_vertex_shader && GLEW_ARB_fragment_shader)
    printf("Ready for GLSL\n");
else {
    printf("Not totally ready :(  \n");
    exit(1);
};
}

void keyboard (unsigned char key, int mousePositionX, int mousePositionY)
{
switch (key)
{
    case KEY_ESCAPE:
        exit (0);
        break;

    default:
        break;
}
}

int main(int argc, char** argv)
{

// set window values
win.width = 640;
win.height = 480;
win.title = "Shader Test";
win.field_of_view_angle = 45;
win.z_near = 1.0f;
win.z_far = 500.0f;

////////////////////////////////////////////////////////
// Initialise and Create Window
////////////////////////////////////////////////////////
 glutInit(&argc, argv); 
 // set modes RGB-Alpha, doble bufferedd (prevent flickering)
 // has a depth buffer to ensure that 3D object overlp OK
 glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH); // set display mode
 // define window size
 glutInitWindowSize(win.width, win.height);
 glutCreateWindow(win.title); // create the window
 glewInit(); // Glew Init occurs after Create Window !!!
 checkglewOK();
 glutDisplayFunc(display); // register display function
 //glutReshapeFunc(reshape); // register resize function
 glutIdleFunc(idle); // register idel function
 glutKeyboardFunc(keyboard);
 initialise();

glutMainLoop(); // run glut main loop

ShutDown();

return EXIT_SUCCESS;
} 
```

# python - 从代码中删除 '/n'

> ID：13206869
> 
> 赞同：1
> 
> 时间：2012-11-03T07:01:33.183
> 
> 标签：python, string

所以我想从file_string的所有部分的末尾删除'\n'。有一个例外，最后一个值似乎没有'\n'。这是我的代码：

```
class Code(object):
    def __init__(self):
        pass
    def open_file(self,file):
        infile = open(file, 'r')
        self.infile = infile.readlines()
    def run(self,file):
        self.file_string = []
        self.open_file(file)
        for i in self.infile:
            self.file_string.append(i)
        return self.file_string 
```

就像我说的，我需要的只是 \n 删除。

输入：

```
>>>a = Code()
>>>a.run('go.txt') 
```

电流输出：

```
['100\n', '200\n', '300\n', '400'] 
```

我想要的是：

```
['100', '200', '300', '400'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:13:11.983

使用[`.strip()`](http://docs.python.org/2/library/stdtypes.html#str.strip)方法：

```
 for i in self.infile:
        self.file_string.append(i.strip()) 
```

如果您只想从左侧或右侧去除空格，还有一些变`.lstrip()`体。`.rstrip()`

# python - REST 的无状态原则究竟意味着什么？

> ID：13206870
> 
> 赞同：20
> 
> 时间：2012-11-03T07:01:41.910
> 
> 标签：python, rest, flask, stateless

在阅读了关于 REST 的介绍性文章（[菲尔丁的论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)和其他）之后，我对无状态的看法是服务器端不应该有会话对象。然而，我看到[Flask](http://flask.pocoo.org/)（可能还有其他我不知道的不同技术的 REST 框架）在这个[例子](http://flask.pocoo.org/docs/quickstart/#sessions)中为我们提供了一个会话对象来在服务器上存储信息：

```
@app.route('/login', methods=['GET', 'POST'])
def login():
  if request.method == 'POST':
    session['username'] = request.form['username']
    return redirect(url_for('index'))
... 
```

当然，我误解了 REST 的无状态性。那么，它到底是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T07:10:28.583

在 REST 中引入无状态约束的目的包括提高可见性、可靠性和可扩展性。这意味着代理和其他中介能够更好地参与涉及自描述无状态消息的通信模式，服务器死亡和故障转移不会导致会话状态同步问题，并且很容易添加新服务器以再次处理客户端负载，而无需需要同步会话状态。

REST 通过多种机制实现无状态：

1.  通过设计方法和通信模式，它们不需要在请求后将状态保留在服务器端。
2.  通过设计公开功能的服务，以直接采样和转换服务器端状态，而没有剩余的应用程序状态
3.  每当需要会话状态或应用程序状态时，通过“延迟”或在每个请求结束时将状态作为消息传递回客户端

最后一点暴露了无状态的缺点：需要某种会话状态的应用程序在单个请求的持续时间之后仍然存在，需要将该状态作为响应消息的一部分发送回客户端。下次客户端想要发出请求时，状态会再次传输到服务，然后返回客户端。

您可以从这里获取更多信息[http://soundadvice.id.au/blog/2009/06/](http://soundadvice.id.au/blog/2009/06/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:19:02.693

不，你很好理解。RESTful 服务中不应有任何“会话”。始终检查您是否可以通过邮件发送任何 URI，将其保存在书签中，并在链接中引用它。这确实是 REST 对 Web 如此重要的原因：没有 RESTful 资源 = 没有更多链接。仅应在访问资源表示时进行身份验证。

您可以拥有一个可以通过 REST 方法修改的用户对象（例如购物车），而不是会话。这与会话不同，因为例如，可能存在您可以授权其他人查看您的购物车的服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-09T06:03:40.427

在 REST 架构中，会话状态完全保存在客户端上。这意味着数据不能在共享上下文中留在服务器上，我们仍然必须在一系列请求中发送重复数据（每次交互开销）。当我们在客户端保持应用程序状态时，这减少了服务器对一致应用程序行为的控制，因为应用程序变得依赖于跨多个客户端版本的语义的正确实现。然而，这种约束导致了可见性、可靠性和可扩展性的属性。

*   可见性得到提高，因为监控系统不必超越单个请求数据来确定请求的全部性质。
*   可靠性得到了提高，因为它简化了从部分故障中恢复的任务。
*   可扩展性得到了改进，因为不必在请求之间存储状态允许服务器组件快速释放资源，并进一步简化了实现，因为服务器不必管理请求之间的资源使用。

见[http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)

# jquery - Cycle 插件：通过 div 循环，“幻灯片太少”？

> ID：13206871
> 
> 赞同：0
> 
> 时间：2012-11-03T07:01:45.670
> 
> 标签：jquery, html, jquery-cycle

我正在使用 Cycle 尝试循环浏览由另一个 jQuery 函数生成的一些 div。这是功能：

```
$.getJSON('../functions.php', function(images) {
  $.each(images, function() {
    $('#slideshow').append('<div class="slide" style="background-image:url(' + this + ');"></div>');
  });
}); 
```

我有一个奇怪的问题。DIV 正在出现，如果我使用 Chrome Inspector，我可以看到它们，但如果我明确查看源代码，它们不会出现。也许这无关紧要，但是当我运行时：

```
$('#slideshow').cycle(); 
```

我在控制台中收到一条错误消息：

> [循环] 终止；幻灯片太少：0

你可以在这里看到这个网站：http: [//new.element17.com](http://new.element17.com)

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:18:37.877

原因是您正在使用`getJSON`方法填充幻灯片图像。

尽管此方法位于循环方法之前，但它`getJSON`是异步方法，这就是循环在加载图像之前运行的原因。

解决方法：
1\. 使用`.ajax`代替`.getJSON`with`async: false`

```
$.ajax({
    async: false,
    url: '../functions.php',
    success: function() {
        $.each(images, function() {
            $('#slideshow').append('<div class="slide" style="background-image:url(' + this + ');"></div>');
        });
    }
}); 
```

2 移动`$('#slideshow').cycle();`内部`.getJSON`方法，使其在加载图像后运行。

```
$.getJSON('../functions.php', function(images) {
    $.each(images, function() {
            $('#slideshow').append('<div class="slide" style="background-image:url(' + this + ');"></div>');
        });
        $('#slideshow').cycle();
    }); 
```

**此代码未经测试**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:35:30.480

要添加到上一个[答案](https://stackoverflow.com/questions/13206871/cycle-plugin-cycling-through-divs-too-few-slides#answer-13206971)，您正在使用 $.getJSON 发出异步请求

因此，当调用循环时，请求还没有返回任何数据，这意味着在 'div#slideshow' 中没有附加 html，所以正如预期的那样

> [循环] 终止；幻灯片太少：0

**解决此问题：**异步请求完成后运行循环。我不建议进行同步调用

```
$.getJSON('../functions.php', function(images) {
    $.each(images, function() {
        $('#slideshow').append('<div class="slide" style="background-image:url(' + this + ');"></div>');
    });

    $('#slideshow').cycle();

}); 
```

# r - 保存和加载 data.frames

> ID：13206876
> 
> 赞同：27
> 
> 时间：2012-11-03T07:02:22.410
> 
> 标签：r, save, dataframe

我制作了一个基于一组推特的数据框，格式如下：

```
 rdmTweets <- userTimeline("rdatamining", n=200)
 df <- do.call("rbind", lapply(rdmTweets, as.data.frame)) 
```

现在我以这种方式保存数据框：

```
 save(df, file="data") 
```

我如何加载保存的数据框以供将来使用？当我使用：

```
 df2 <- load("data") 
```

我应用`dim(df2)`它应该返回数据框拥有的推文数量，但它只显示 1。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-03T08:13:58.703

正如@mrdwab 指出`save`的那样，保存名称以及数据/结构（实际上可以在单个文件中保存许多不同的 R 对象）。还有另一对存储函数的行为更符合您的预期。尝试这个：

```
saveRDS(df, file="mytweets.rds")
df2 <- readRDS("mytweets.rds") 
```

这些函数一次只能处理一个对象。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-03T09:23:45.573

另一种选择是将数据框保存为 csv 文件。此选项的好处是它提供了**长期**存储，即您将（可能）能够在十年后在任何平台上打开您的 csv 文件。对于一个`RData`文件，你只能用 R 打开它，我不想赌钱在版本之间打开它。

要将文件保存为 csv，只需使用：`read.csv`和`write.csv`，因此：

```
write.csv(df, file="out.csv", row.name=FALSE)
df = read.csv("out.csv", header=TRUE) 
```

* * *

加文在下面的评论提出了几点：

> CSV 路由仅适用于表格样式的数据。

完全正确。但是，如果您要保存数据框（就像 OP 一样），那么您的数据就是表格形式。

> 使用 R，如果由于某种原因它们更改了保存格式并且不允许旧格式由另一个函数加载，您将始终能够启动旧版本来读取数据和导出。

要扮演魔鬼的拥护者，您可以将此参数与 Excel 一起使用，并将您的数据保存为`xls`. 但是，将您的数据保存为 csv 格式意味着我们无需担心这一点。

> R 的文件格式已记录在案，因此可以使用该开放信息合理地轻松读取另一个系统中的二进制数据。

我完全同意——尽管“容易”有点强。这就是为什么保存为 RData 文件并不是什么大问题。**但是**，如果您要保存表格数据，为什么不使用 csv 文件呢？

作为记录，将表格数据保存为 RData 文件有一些原因。例如，读取/写入文件的速度或文件大小。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-03T07:06:24.373

`save`保存数据集的名称以及数据。因此，你不应该给它分配一个名字，你应该没`load("data")`问题。换句话说，只需使用：

```
load("data") 
```

它会将一个名为`df`（或文件“数据”中包含的任何内容）的对象加载到您当前的工作空间中。

不过，我会为您的文件建议一个更原始的名称，并考虑添加一个扩展名以帮助您记住脚本文件是什么、数据文件是什么等等。

* * *

完成这个简单的例子：

```
rm(list = ls())              # Remove everything from your current workspace
ls()                         # Anything there? Nope.
# character(0)
a <- 1:10                    # Create an object "a"
save(a, file="myData.Rdata") # Save object "a"
ls()                         # Anything there? Yep.
# [1] "a"
rm(a)                        # Remove "a" from your workspace
ls()                         # Anything there? Nope.
# character(0)
load("myData.Rdata")         # Load your "myData.Rdata" file
ls()                         # Anything there? Yep. Object "a".
# [1] "a"
str(a)                       # Is "a" what we expect it to be? Yep.
#  int [1:10] 1 2 3 4 5 6 7 8 9 10
a2 <- load("myData.Rdata")   # What about your approach?
ls()                         # Now we have 2 objects
# [1] "a"  "a2"
str(a2)                      # "a2" stores the object names from your data file.
#  chr "a" 
```

* * *

如您所见，`save`允许您一次保存和加载多个对象，这在处理具有多组数据的项目时非常方便。

另一方面，`saveRDS`（从[接受的答案](https://stackoverflow.com/a/13207330/1270695)）只允许您保存单个对象。在某些方面，这更“透明”，因为[`load()`不允许您在](https://stackoverflow.com/q/4831050/1270695)不先加载文件的情况下预览文件的内容。

# java - TreeMap 实现的 Put 方法

> ID：13206877
> 
> 赞同：1
> 
> 时间：2012-11-03T07:02:48.253
> 
> 标签：java, binary-search-tree, treemap

我正在研究 TreeMap（称为 MyTreeMap）的实现，但 put 方法遇到了很多麻烦。我希望有人可以查看我的代码并指出我在哪里开始出错的正确方向。

```
public class MyTreeMap<K extends Comparable<? super K>,V> extends AbstractMap<K,V>  {

K key;
V value;
int height;
MyTreeMap<K,V> left,right;
int size;

public V put(K key, V value) {

    int compareValue = this.key.compareTo(key);

    if(!this.containsKey(key)) {
        if(this.key == null) {
            this.key = key;
            this.value = value;
        }

        if(this.isLeaf() || this.isEmpty()) {
            if(this.key.compareTo(key) > 0)
                this.left = new MyTreeMap<K,V>(key,value,null,null);
            else
                this.right = new MyTreeMap<K,V>(key,value,null,null);

            if(left.height > right.height + 1 || right.height > left.height + 1)
                restructure(this);
            this.size++;
            setHeight();
            return null;
        }
        else {
            if(compareValue > 0)
                return this.left.put(key, value);
            else
                return this.right.put(key, value);
        }
    }

    else {
        if(compareValue == 0) {
            V temp = this.value;
            this.value = value;
            return temp;
        }

        else if(compareValue < 0)
            return this.right.put(key, value);
        else 
            return this.left.put(key, value);
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:11:46.043

我认为您的逻辑有点由内而外，因此比它需要的复杂得多：顶层`if`可能应该查看`compareValue`，而不是进行`containsKey`检查。

逻辑应该是：

*   如果`compareValue==0`那么这意味着您找到了正确的键，所以只需更新值并返回
*   否则酌情检查左或右分支（取决于 compareValue 的符号）：
    *   如果分支为空，则将其转换为包含您的键和值的新 TreeMap 分支（您现在完成了）
    *   否则（分支不为空），在这个分支上递归调用 put 。如果您愿意，可以在此调用之后执行重新平衡逻辑。

PS 我建议不要在 TreeMap 中允许空键，它会让你的生活更简单，并且避免需要对键进行空检查

# php - 在 PHP 中查找 MySQL BLOB 对象的类型

> ID：13206880
> 
> 赞同：2
> 
> 时间：2012-11-03T07:03:16.060
> 
> 标签：php, mysql, blob, phpmailer

我正在使用 PHP 在 MySQL BLOB 字段中存储一个文件。稍后我试图将该 BLOB 数据作为邮件附件发送。

我的问题是：如何在 PHP 中获取 BLOB 对象的类型？该 BLOB 对象可以是 PDF 或 Word 文件。在不知道文件类型的情况下，我们无法发送邮件。

请给我建议解决方案，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:02:55.340

BLOB 对象的数据的原始文件类型不存储在 MySQL 中，因此无法立即知道文件是什么文件类型。

为了获取文件类型，您可以执行以下操作：

*   在 MySQL 中，创建一个文件类型的字段，当存储文件数据时，也存储文件类型。
*   检查文件签名。大多数文件在格式相同时具有相同的第一个字节。对于 PDF 文件，签名是`%PDF`，对于 Word 文件，签名由以下字节组成（以十六进制显示）：`50 4B 03 04 14 00 06 00`. 我找到[了一张表格](http://www.garykessler.net/library/file_sigs.html)，您可以在其中找到许多文件签名。请注意，检查签名并不适用于所有文件格式。
*   为了使事情变得更容易，您可以使用 PHP 中的[FileInfo](http://www.php.net/manual/en/ref.fileinfo.php)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:15:00.197

您可以检查文件签名。这是定义文件类型和版本的文件的第一行。

对于 PDF，它应该是 %PDF 对于 MS Office <= 2003：ÐÏ.à¡±.á 对于 MS Office > 2003：PK......（因为它是压缩格式，它与 zip 文件具有相同的签名）

虽然，实现此目的的更简单方法应该是在将文件保存在新列中时存储文档类型。

# java - XmlDomParserContext.java:94:in ` '：java.lang.NoClassDefFoundError：无法初始化类 nokogiri.internals.NokogiriHelpers

> ID：13206889
> 
> 赞同：0
> 
> 时间：2012-11-03T07:05:32.750
> 
> 标签：java, ruby-on-rails, jruby, nokogiri, jrubyonrails

我正在做一个 jruby 项目，我收到一些与 Nokogiri 相关的 XML PARSING 错误，其控制台日志如下所示：

```
> XmlDomParserContext.java:94:in `<init>':
> java.lang.NoClassDefFoundError: Could not initialize class
> nokogiri.internals.NokogiriHelpers
>         from XmlDocument.java:317:in `newFromData'
>         from XmlDocument.java:334:in `read_memory'
>         from XmlDocument$INVOKER$s$0$0$read_memory.gen:-1:in `call'
>         from CachingCallSite.java:70:in `call'
>         from FCallManyArgsNode.java:60:in `interpret'
>         from NewlineNode.java:105:in `interpret'
>         from BlockNode.java:71:in `interpret'
>         from IfNode.java:118:in `interpret'
>         from LocalAsgnNode.java:123:in `interpret'
>         from NewlineNode.java:105:in `interpret'
>         from BlockNode.java:71:in `interpret'
>         from ASTInterpreter.java:75:in `INTERPRET_METHOD'
>         from InterpretedMethod.java:112:in `call'
>         from DefaultMethod.java:158:in `call'
>         from CachingCallSite.java:79:in `callBlock'
>         from CachingCallSite.java:85:in `call'
>         from CallManyArgsBlockPassNode.java:57:in `interpret'
>         from NewlineNode.java:105:in `interpret'
>         from ASTInterpreter.java:75:in `INTERPRET_METHOD'
>         from InterpretedMethod.java:182:in `call'
>         from DefaultMethod.java:192:in `call'
>         from CachingCallSite.java:326:in `cacheAndCall'
>         from CachingCallSite.java:170:in `call'
>         from CallOneArgNode.java:57:in `interpret'
>         from DAsgnNode.java:110:in `interpret'
>         from NewlineNode.java:105:in `interpret'
>         from BlockNode.java:71:in `interpret'
>         from RescueNode.java:226:in `executeBody'
>         from RescueNode.java:123:in `interpretWithJavaExceptions'
>         from RescueNode.java:113:in `interpret'
>         from BeginNode.java:83:in `interpret'
>         from NewlineNode.java:105:in `interpret'
>         from BlockNode.java:71:in `interpret'
>         from ASTInterpreter.java:112:in `INTERPRET_BLOCK'
>         from Interpreted19Block.java:209:in `evalBlockBody'
>         from Interpreted19Block.java:197:in `yield'
>         from Interpreted19Block.java:128:in `call'
>         from Block.java:89:in `call'
>         from RubyProc.java:261:in `call'
>         from RubyProc.java:213:in `call'
>         from Ruby.java:2873:in `tearDown'
>         from Ruby.java:2857:in `tearDown'
>         from Main.java:267:in `internalRun'
>         from Main.java:230:in `run'
>         from Main.java:214:in `run'
>         from Main.java:194:in `main' 
```

jruby 版本是 [jruby 1.7.0.RC1 (1.9.3p203) 2012-09-25 8e849de on Java HotSpot(TM) Client VM 1.6.0_37-b06 [Windows XP-x86]]

操作系统：Windows XP

Java 版本：java 版本“1.6.0_37” Java(TM) SE Runtime Environment (build 1.6.0_37-b06) Java HotSpot(TM) Client VM（build 20.12-b01，混合模式，共享）

有人对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:41:47.210

很可能该类`nokogiri.internals.NokogiriHelpers`有一个引发异常的静态初始化块，但该异常被某种方式抑制了。

尝试将`static`块放入`try`-`catch`并记录任何异常以找出答案。

```
class NokogiriHelpers {
    static {
         try { 
             // your initialization stuff
         } catch (Exception e) {
             // log e
         }
    } 
} 
```

请注意，您可能已在其中定义的任何静态常量`NokogiriHelpers`也有一个静态初始化程序，因此您可能也希望将它们放入 try catch。如果你有

```
class NokogiriHelpers {
    static int FOO = computeFoo();
} 
```

并`computeFoo()`可能引发未经检查的异常，您必须将其更改为

```
class NokogiriHelpers {
    static int FOO;
    static {
         try { 
             FOO = computeFoo();
         } catch (Exception e) {
             // log e
         }
    } 
} 
```

# jquery - jQuery 数据表中的列排序

> ID：13206894
> 
> 赞同：3
> 
> 时间：2012-11-03T07:06:02.760
> 
> 标签：jquery, datatables

我已经完成了 jQuery 数据表插件中的列排序以及控制它的各种方式。我有一个查询是否可以控制排序方式，即单击上箭头图标将按升序和下箭头图标进行排序会按降序排序吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T11:24:34.660

有两种方法可以做到这一点，具体取决于`datatables`版本。

## 编辑 Datatables 版本 1.9 或更低版本

你需要使用[`fnHeaderCallback`](http://legacy.datatables.net/usage/callbacks). 使用此回调，您可以编辑`th`表头中的每个元素。

我为您创建了一个工作示例。直播：http : ~~[//live.datatables.net/oduzov](http://live.datatables.net/oduzov)~~ 代码： http: ~~[//live.datatables.net/oduzov/edit#javascript,html](http://live.datatables.net/oduzov/edit#javascript,html)~~

这是后面的代码（打开代码段以查看代码）：

```
$(document).ready(function($) {
  var table = $('#example').dataTable({
    "fnHeaderCallback": function(nHead, aData, iStart, iEnd, aiDisplay) {
      // do this only once
      if ($(nHead).children("th").children("button").length === 0) {

        // button asc, but you can put img or something else insted
        var ascButton = $(document.createElement("button"))
          .text("asc");
        var descButton = $(document.createElement("button"))
          .text("desc"); // 

        ascButton.click(function(event) {
          var thElement = $(this).parent("th"); // parent TH element
          var columnIndex = thElement.parent().children("th").index(thElement); // index of parent TH element in header

          table.fnSort([
            [columnIndex, 'asc']
          ]); // sort call

          return false;
        });

        descButton.click(function(event) {
          var thElement = $(this).parent("th");
          var columnIndex = thElement.parent().children("th").index(thElement);

          table.fnSort([
            [columnIndex, 'desc']
          ]);

          return false;
        });

        $(nHead).children("th").append(ascButton, descButton);
      }
    }
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://legacy.datatables.net/release-datatables/media/js/jquery.dataTables.js"></script>
<table id="example" class="display" width="100%">
  <thead>
    <tr>
      <th>Name</th>
      <th>Position</th>
      <th>Office</th>
      <th>Age</th>
      <th>Start date</th>
      <th>Salary</th>
    </tr>
  </thead>
  <tfoot>
    <tr>
      <th>Name</th>
      <th>Position</th>
      <th>Office</th>
      <th>Age</th>
      <th>Start date</th>
      <th>Salary</th>
    </tr>
  </tfoot>
  <tbody>
    <tr>
      <td>Tiger Nixon</td>
      <td>System Architect</td>
      <td>Edinburgh</td>
      <td>61</td>
      <td>2011/04/25</td>
      <td>$3,120</td>
    </tr>
    <tr>
      <td>Garrett Winters</td>
      <td>Director</td>
      <td>Edinburgh</td>
      <td>63</td>
      <td>2011/07/25</td>
      <td>$5,300</td>
    </tr>
  </tbody>
</table>
```

## 对于 Datatables 版本 1.10 及更高版本

回调有一个新名称，它只是[`headerCallback`](http://datatables.net/reference/option/headerCallback). 其他一切都相同，因此请使用旧版 api 的新回调。

# java - 初始化 FileInputStream

> ID：13206896
> 
> 赞同：1
> 
> 时间：2012-11-03T07:06:31.753
> 
> 标签：java, file, fileinputstream

为什么它要求我初始化变量**fin**

```
FileInputStream fin;
File f = new File("C:/Users/NetBeansProjects/QuestionOne/input.txt");
fin = new FileInputStream(f); 
```

尝试关闭文件时

```
fin.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T07:10:36.990

我敢打赌，这与生成编译器错误的代码不完全相同。几乎可以肯定您在 try-catch-finally 块之外声明了变量，但您在 try 块中对其进行了初始化，这意味着变量可能未在发生编译器错误的 catch 或 finally 块的上下文中初始化

例如：

```
FileInputStream fin;
try {
   File f = new File("C:/Users/NetBeansProjects/QuestionOne/input.txt");
   fin = new FileInputStream(f);
} finally {
   //you cannot be sure fin is initialized
   fin.close(); //compiler error
} 
```

如果您使用的是 JDK 7，也许最好的方法是使用 try with resources 来处理您的流的关闭：

```
File f = new File("C:/Users/NetBeansProjects/QuestionOne/input.txt");
try(FileInputStream fin=new FileInputStream(f)) {
    //some input stream handlung here
}catch(IOException e){...} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T07:13:45.973

因为您更有可能在函数内部使用此代码段，并且内部函数变量不会自动初始化，如果它们是`instance variables`. 如果`fin = new FileInputStream(f);`抛出异常，并且我认为您有`fin.close();`一个`finally`语句（但您没有放置整个代码），编译器不知道哪个是`fin`关闭它的值。

# iphone - 与控制器分离的视图

> ID：13206900
> 
> 赞同：0
> 
> 时间：2012-11-03T07:07:53.653
> 
> 标签：iphone, ios, xcode, model-view-controller

为了尊重 MVC 模式，我想将视图与控制器分离。例如

*   QuestionView（继承自 UIVIew）
*   QuestionViewController（继承自 UIViewController

在我的控制器中，我设置了视图 self.view = ...

但是当我在视图中按下一个按钮时，它应该从控制器调用一个方法但是视图不应该知道它的控制器对吗？

那么如何将视图链接到控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:10:05.640

在大多数情况下，使用 iOS，您只需对控制器部分进行子类化，而不是对视图进行子类化即可完成工作。因此，您可以直接“开箱即用”地使用 UIKit 提供的类。

这是可能的，因为：

*   布局：这可以存储在 Nib 文件中并由控制器加载。
*   响应用户事件：UI 控件具有通用回调机制：委托和操作。“连接”要么在 nib 文件中，要么在控制器代码中。

就个人而言，我只在需要自定义绘图时子类化视图。

因此，View INSTANCE 显然“知道”它的控制器，但它都是通过通用接口完成的，因此视图代码不知道您的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:41:27.630

以编程方式将按钮目标设置为 QuestionViewController 的对象。

# c# - 这个 JavaScript 代码在 c# 中的等价物是什么？

> ID：13206901
> 
> 赞同：-1
> 
> 时间：2012-11-03T07:07:56.557
> 
> 标签：c#, javascript

我有这个需要用 C# 编写的 JavaScript 文件。我做了很多，但坚持下去。有人可以帮我解决这个问题吗？

```
var biginteger=new bigint(convert);
var mod = bigint_mod(biginteger, new bigint(97));
        var y = bigint_number(mod); 
```

我无法解释这些 JavaScript 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:43:51.527

```
using System.Numerics;       

BigInteger dividend= new BigInteger(1222222);
BigInteger mod;
BigInteger.DivRem(dividend, new BigInteger(97), out mod);
//mod will have the result 
```

或者

```
BigInteger dividend = BigInteger.Parse("3243434343434434");
BigInteger divisor = BigInteger.Parse("97");
BigInteger mod;
BigInteger.DivRem(dividend,divisor, out mod); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:44:45.520

首先，您需要引用自 2010 年以来（.NET 4.0 及更高版本）`System.Numerics.dll`的程序集。[`BCL`](http://en.wikipedia.org/wiki/Base_Class_Library)

使用类似：

```
using System.Numerics

...

      var bigInteger = (BigInteger)convert;  // or BigInteger.Parse(convert); not sure what type convert is
      var y = bigInteger % 97; 
```

当然，`BigInteger`结构[重载](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.op_modulus.aspx)了`%`运算符。并且文字`97`将被隐式转换为`BigInteger`.

如果不需要新变量，也可以说：`bigInteger %= 97;`.

# java - 如何在 Robotium 中编写的测试脚本中处理第三方的 Web 视图

> ID：13206907
> 
> 赞同：1
> 
> 时间：2012-11-03T07:08:39.780
> 
> 标签：java, android, robotium

我正在使用 robotsium 工具来编写应用程序的测试脚本。我想知道如何在我的应用程序中处理第三方的 webview（即登录）。

例如，如果我有一个按钮`Checkout With Paypal`，当我单击它时，我会从 Paypal 第三方获得一个登录页面，该页面要求以下内容

```
Login ID:
Password: 
```

那么如何在测试脚本中点击上面的文本框并在里面输入相应的文本呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:46:44.080

如果 webview 在您的应用程序之外，那么我不敢告诉您，在使用 robotsium 时，将无法测试您想要的内容。Robotium 只能将事件注入到您的应用程序进程中，遗憾的是这不会成为其中的一部分。

但是，如果它在您的应用程序中，那么您（稍微）很幸运。您可以与 webview 进行交互，但是 robotsium 目前没有任何方式与 webview 中的元素进行交互。虽然可以这样做，但您必须自己触发 javascript 才能与网页交互。这有点痛苦，但像[https://github.com/calabash/calabash-android](https://github.com/calabash/calabash-android)这样的产品做得很好，所以你可以看看它们的实现。

还有第三种选择，让开发人员为您的测试伪造应用程序的部分。然后添加一个在没有伪造的版本上运行的测试，以检查是否使用意图过滤器触发了正确的意图，这应该涵盖两个基础。

# jquery - 如何使用 jquery 发布 json 数据

> ID：13206908
> 
> 赞同：1
> 
> 时间：2012-11-03T07:08:45.353
> 
> 标签：jquery, python, http-post, wsgi, bottle

我想将 JSON 数据发布到 url，但下面提到的代码没有将数据发布到服务器。

我正在使用 python 瓶框架和 WSGI 服务器。

它没有接收 JSON 数据并且 WSGI 服务器给出 405 错误。

**脚本**

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script>
$(document).ready(function(){
$("#hi").click(function(){

var jsonObjects ='{"type":["FORGOT_PASSWORD"],"data":[{"hardwareID":"SAM1234567890123","emailID":"v@gmail.com"}]}';

jQuery.ajax({
      url: "http://192.168.0.135:8080/uid",
      type: "POST",
      contentType: "application/json",
      data: JSON.stringify(jsonObjects),
      success: function(result) {
     //Write your code here
      }
});

});
});
</script> 
```

**HTML**

```
<input type="button" value="submit" id="hi" />
<p>If you click on me, I will disappear.</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:31:08.077

```
data: JSON.stringify(jsonObjects), 
```

由于您的 json 有效负载已经是一个字符串，因此无需对其进行字符串化，尽管我愿意打赌，如果您对得到的字符串进行字符串化...

接下来是询问您从哪个网址发布？您的浏览器只允许 192.168.0.135

最后尝试添加一些调试，console.log 和 console.dir 是你的朋友 :-)

```
jQuery.ajax({
  url: "http://192.168.0.135:8080/uid",
  type: "POST",
  contentType: "application/json",
  data: jsonObjects,
  success: function(result) {
    console.log("success, check your server-side!");
    console.dir(result);
  },
  error: function(result) {
    console.log("error!");
    console.dir(result);
  }
}); 
```

# c++ - 为什么在 C++ 中出现第一个 chace 异常

> ID：13206911
> 
> 赞同：7
> 
> 时间：2012-11-03T07:08:58.100
> 
> 标签：c++, visual-studio-2010, visual-c++, exception

我制作了一个示例来检查在 Windows 控制台应用程序中按下 Ctrl+C 时会发生什么：

```
bool    TerminationFlag=true;

int main()
{
    g_hTerminateEvent = ::CreateEvent(NULL, FALSE, FALSE, NULL);
    ::SetConsoleCtrlHandler(ConsoleCtrlHandler, TRUE);
    while(1)
    {
        if(TerminationFlag == false)
        {
            break;
        }
    }
    return 0;
}

BOOL WINAPI ConsoleCtrlHandler(DWORD dwCtrlType)
{

    if (dwCtrlType == CTRL_C_EVENT ||
        dwCtrlType == CTRL_BREAK_EVENT ||
        dwCtrlType == CTRL_CLOSE_EVENT)
    {
        TerminationFlag=false;
        ::SetEvent(g_hTerminateEvent);
        return TRUE;
    }
    return FALSE;
} 
```

当我按下 ctrl+c 时，我通过使用 Visual Studio 中的启动调试选项运行代码来测试代码我收到以下消息

> 0x7c87647d 处的第一次机会异常

当我按下继续选项时，`TerminationFlag=false;`即使我在控制处理程序中处理了 Ctrl+C，我的代码也会出现。你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-03T07:57:13.190

我假设您从问题描述中使用 Microsoft Visual Studio。引发的第一个机会异常是由调试环境捕获的 CTRL-C 事件。这是预期的行为。

您可以选择忽略这一点：转到 Debug 菜单/Exceptions/Win32 Exceptions 并从“Thrown”列菜单中取出 CONTROL-C 检查。这将确保调试器仅在用户未处理时才在 CONTROL-C 上中断。见下图：

![在此处输入图像描述](../Images/ef5e8a4bf44d031fa3e67ea2fe03471f.png)

顺便说一句，您应该等待终止事件而不是轮询标志。你可能想要这样的东西：

```
#include "windows.h"
#include <iostream>
HANDLE g_hTerminateEvent;

BOOL WINAPI ConsoleCtrlHandler(DWORD dwCtrlType)
{

    if (dwCtrlType == CTRL_C_EVENT ||
        dwCtrlType == CTRL_BREAK_EVENT ||
        dwCtrlType == CTRL_CLOSE_EVENT)
    {
        std::cout << "Terminating" << std::endl;
        SetEvent(g_hTerminateEvent);

        return TRUE;
    }
    return FALSE;
}
int main()
{
    g_hTerminateEvent = ::CreateEvent(NULL, FALSE, FALSE, NULL);
    SetConsoleCtrlHandler(ConsoleCtrlHandler, TRUE);

    DWORD result = WaitForSingleObject(g_hTerminateEvent, INFINITE);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:18:06.287

在调试器中运行这种东西时，你永远不会得到与没有调试器运行它相同的画面。在调试器中，您通常不能跳过使控制台输入/输出的系统功能。调试器将不可避免地与这里的系统交互。

最可靠的方法是追踪。

这可能无法直接回答问题。

ps 在您的代码示例中，现在不需要该事件。

来自 MSDN 的更新：

```
Value   Meaning
 0 CTRL_C_EVENT 
```

从键盘输入或 GenerateConsoleCtrlEvent 函数生成的信号接收到 CTRL+C 信号。

# asp.net - 不支持 webclient uri 格式

> ID：13206913
> 
> 赞同：1
> 
> 时间：2012-11-03T07:09:28.210
> 
> 标签：asp.net, wcf, c#-4.0

```
WebClient fileReader = new WebClient();
fileAddress = listItem;    

//error here uri formats are not supported
fileReader.DownloadFile(fileAddress, saveTo); 
```

这里的文件地址地址来了

```
http://pcdev04.pcsolution.net:83\Update32\rts\RTSUpdate.dll 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T06:36:23.160

您需要在 URI 字符串中替换`\`为`/`以获得有效地址：

```
fileReader.DownloadFile(fileAddress.Replace("\\", "/"), saveTo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T07:25:48.197

您可以尝试使用`WebClient`Class 在 Internet 上打开文件 看看这个 -[示例](http://www.codeproject.com/Articles/24920/C-Image-Download) 打开并下载图像文件。

希望能帮助到你

# css - 如何使用媒体查询在浏览器窗口中调整背景图像的大小

> ID：13206915
> 
> 赞同：0
> 
> 时间：2012-11-03T07:09:51.780
> 
> 标签：css

我的网站上有一张背景图片。我想使用媒体查询来调整带有浏览器窗口的背景图像的大小。我是媒体查询概念的新手，你能告诉我怎么做吗？

谢谢 ：）

在我的 CSS 文件中：

```
.homepage{background-image:url(../images/work.jpg); background-repeat:no-repeat;} 
```

在我的 HTML 文件中

```
<body class="homepage">

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:13:34.340

您需要在样式表中使用媒体查询以获取特定的屏幕分辨率，例如

```
@media all and (max-width: 1200px) and (min-width: 520px) {
  body {
    /* Now whatever styles you use here will be applicable for your specified screen widths */
  }
} 
```

所以谈到你的问题，我假设你希望你的身体背景根据屏幕分辨率自动调整，你可以试试这个，而不使用媒体查询..

```
html { 
    background: url('/* Path to image file */') no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

# jquery - 为什么 $(document).ready() 从不触发但 $(window).load() 会触发？

> ID：13206916
> 
> 赞同：4
> 
> 时间：2012-11-03T07:09:57.507
> 
> 标签：jquery, ruby-on-rails-3, document-ready

我正在使用 Rails 3.2.8 并且正在运行 jQuery v1.8.2。

以下作品：

```
$(window).load(function(){
alert('window load is working');
}); 
```

但这不起作用：

```
$(document).ready(function() {
alert('document ready is working');
}); 
```

事实上，每当我切换`$(document).ready()`到`$(window).load()`我正在测试的任何和所有 jQuery 函数时，它们都会被触发。这些包括手风琴，可拖动元素......

这是我的**application.html.erb**文件：

```
<!DOCTYPE html>
<html>
<head>
<title><%= full_title(yield(:title)) %></title>
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= javascript_include_tag "application" %>
<%= csrf_meta_tags %>
</head>
<body background="<%= image_path(random_bg) %>">
<%= render 'layouts/header' %>

<div id="container">

<% flash.each do |key, value| %>
      <div class="alert alert-<%= key %>"><%= value %></div>
<% end %>

<%= yield %>
</div>
 <%= render 'layouts/footer' %>
</body>
</html> 
```

生成的html...

```
<html>
<head>
<title>Derp</title>
*bunch of css files*
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/collections.js?body=1" type="text/javascript"></script>
<script src="/assets/global.js?body=1" type="text/javascript"></script>
<script src="/assets/derp.js?body=1" type="text/javascript"></script>
<script src="/assets/sessions.js?body=1" type="text/javascript"></script>
<script src="/assets/static_pages.js?body=1" type="text/javascript"></script>
<script src="/assets/test.js?body=1" type="text/javascript"></script>
<script src="/assets/users.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
.... 
```

我也抛出了 stackoverflow，神经质地搜索了网络，并尝试了我能找到的所有解决方案：

*   我尝试禁用本地 jQuery 并使用 Google 托管 jQuery
*   我尝试过放置`javascript_include_tag`（将其移至样式表上方，将其移至之前）
*   我试过包括`$(document).ready()`里面`$(window).load()`

但`$(document).ready()`仍然没有触发...控制台没有问题（在 Chrome、Safari、Firefox 上检查）

[在这里](https://stackoverflow.com/questions/6022357/why-does-window-load-work-but-not-document-ready)问了一个类似的问题，但他从未收到他的主要问题的答案。

**为什么 jQuery 仅在我替换`$(document).ready()`为时才有效`$(window).load()`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:37:53.103

对不起，我通过删除我写的一些糟糕的 javascript 解决了这个问题。它应该是在不支持占位符的浏览器中显示标签的代码。不知何故，一旦我删除了文件，一切就恢复了正常工作……奇怪的是，我总是花费数小时试图解决问题，并且似乎在这里提出问题后立即解决了问题！

# jquery - 如果 scrollTop 小于指定值则动画 - 不起作用

> ID：13206923
> 
> 赞同：3
> 
> 时间：2012-11-03T07:10:36.697
> 
> 标签：jquery, jquery-animate, scrolltop

ease-scroll 是一个带有一个锚标记的 div。

```
<div id="ease-scroll">
    <a href="#">&uarr; Top</a>      
</div> 
```

当 scrollTop() 大于 450 时，我需要 div 的不透明度为 0.9，这按预期工作，如果我现在向上滚动*从而*scrollTop() 值小于 450，我想将不透明度恢复为原始值 0.1。但是，恢复不透明度值没有发生。任何线索有什么问题？

```
// Help navigate!
jQuery(window).scroll(function () { 
    if ( jQuery(window).scrollTop() > 450 && jQuery("#ease-scroll").css("opacity") != 0.9 ) {
       jQuery("#ease-scroll").animate( {opacity: 0.9}, 'medium');
    }
    if ( jQuery(window).scrollTop() < 450 && jQuery("#ease-scroll").css("opacity") != 0.1 ) {
        jQuery("#ease-scroll").animate( {opacity: 0.1}, 'medium');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:24:32.070

当用户滚动时，滚动事件会被触发很多次。对每个事件使用 animation() 并不是一个好主意，因为它会毫无意义地占用用户 CPU 资源。

这是一种解决方法：

```
// Help navigate!
jQuery(window).scroll(function () { 
    jQuery("#ease-scroll").stop(); // stop animation before anything else
    if ( jQuery(window).scrollTop() >= 450 && jQuery("#ease-scroll").css("opacity") != 0.9 ) {
       jQuery("#ease-scroll").animate( {opacity: 0.9}, 'medium');
    }
    if ( jQuery(window).scrollTop() < 450 && jQuery("#ease-scroll").css("opacity") != 0.1 ) {
        jQuery("#ease-scroll").animate( {opacity: 0.1}, 'medium');
    }
}); 
```

但是您应该定义一个 setTimeOut，如果需要，它会被重置以避免 CPU 无用（未经测试，可能的小语法错误：o）

```
// Help navigate!
var animationTimeout = null;
jQuery(window).scroll(function () { 

    // Clear planned animation
    clearTimeout(animationTimeout);

    // Define animation start after 500 ms if no others scroll events occurred

    if ( jQuery(window).scrollTop() >= 450 && jQuery("#ease-scroll").css("opacity") != 0.9 ) {
        animationTimeout = setTimeout(function(){
        jQuery("#ease-scroll").stop();
        jQuery("#ease-scroll").animate( {opacity: 0.9}, 'medium');
        },500);
    } 
    if ( jQuery(window).scrollTop() < 450 && jQuery("#ease-scroll").css("opacity") != 0.1 ) {
        animationTimeout = setTimeout(function(){
        jQuery("#ease-scroll").stop();
        jQuery("#ease-scroll").animate( {opacity: 0.1}, 'medium');
        },500);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:24:45.037

## *[jsBin 演示](http://jsbin.com/upojob/2/edit)*

```
jQuery(function( $ ){

   $(window).scroll(function(){

      var scrolled = $(window).scrollTop();
      $("#ease-scroll").stop().animate({opacity: (scrolled>450 ? 0.9 : 0.1) }, 600);

   });

}); 
```

# javascript - 无法让 Jquery 番茄酱插件工作

> ID：13206925
> 
> 赞同：2
> 
> 时间：2012-11-03T07:11:20.627
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我一生都无法弄清楚如何让 te ketchup jquery 插件工作。我知道我一定错过了一些简单的东西。有人请帮忙！以下 html 中没有任何反应，没有抛出任何错误..所以我迷路了！我尝试按照这里的简单步骤操作：http: [//demos.usejquery.com/ketchup-plugin/](http://demos.usejquery.com/ketchup-plugin/)

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Yammie</title>
        <link rel="stylesheet" type="text/css" media="screen" href="css/jquery.ketchup.css" />
        <script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>
        <script type="text/javascript" src="js/jquery.ketchup.all.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $('#default-behavior').ketchup();
            });
        </script>
    </head>
    <body>
        <form id="default-behavior" action="test.html">
            <ul>
                <li>
                    <label for="db-mail">E-Mail</label>
                    <input type="text" id="db-mail" data-validate="validate(required, email)" />
                </li>
                <li>
                    <label for="db-username">Username</label>
                    <input type="text" id="db-username" data-validate="validate(required, username, minlength(3))" />
                </li>
                <li>
                    <label for="db-skill">Skills</label>
                    <input type="checkbox" id="db-skill" name="db-skill" data-validate="validate(minselect(2))" /> jQuery
                    <input type="checkbox" name="db-skill" /> HTML
                    <input type="checkbox" name="db-skill" /> CSS
                    <input type="checkbox" name="db-skill" /> Rails
                </li>
                <li>
                    <input type="submit" value="Is Tasty?" />
                </li>
            </ul>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:00:47.663

尝试在标题中添加这个 scriot 并且表单 ID 必须是默认行为

```
 <script type="text/javascript">//<![CDATA[
                $(window).load(function(){
                               $('#default-behavior').ketchup();
                               });//]]>
                </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:26:12.323

现在试过了。这个对我有用。尝试从 github下载**ketchup 0.3.2 ：** [https](https://github.com/mustardamus/ketchup-plugin/downloads) ://github.com/mustardamus/ketchup-plugin/downloads 链接所有这三个 js 文件：**ketchup.js**、**ketchup.validations.js**和**ketchup.helpers.js**

# vb.net - VB.NET 进度条后台工作者

> ID：13206926
> 
> 赞同：9
> 
> 时间：2012-11-03T07:11:26.493
> 
> 标签：vb.net, progress-bar, backgroundworker

当我的应用程序启动并且刚刚升级时，我正在执行本地数据库更新（sqlite）。

就像这样：用户启动我的应用程序，然后我开始升级过程。在此升级过程中，我展示了一个具有连续进度条的表单。此表单在升级过程完成后关闭，然后用户可以开始使用我的应用程序。

但是进度条不会动画，因为升级过程非常密集。

在我的旧 VB6 版本中，我使用了一个具有 1 个表单并显示进度条的 ActiveX-Exe。这是我的“后台工作人员”。

我不确定是否可以在 VB.NET 中使用相同的方法。

我只看到了在后台工作人员中完成工作的示例，但我还没有看到进度条本身就是后台工作人员的任何示例。

数据库升级需要阻塞，在数据库升级完成之前用户可能不会使用我的应用程序。这意味着只有进度条应该“退出进程”，而不是升级。

非常感谢你！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T05:05:22.130

首先阅读此内容：[Application.DoEvents() 的使用](https://stackoverflow.com/questions/5181777/use-of-application-doevents)

因此，在阅读上述答案后，您将永远不会再使用 DoEvents，并且没有 DoEvents（和/或使 ProgressBar 无效，因此其 Paint 事件将触发）“progressbar 不会动画，因为升级过程非常密集”

因此 Cthulhu 的评论 - “您可以使用进度条创建对话框，使该对话框成为模态并在后台工作人员上执行您的 db-stuff。” 是最好的前进方式之一。

我已经翻译了我使用的 C# 实现，你应该可以直接把它放进去。

这是进度条表单：

```
Public Partial Class ThinkingProgressBar
    Inherits Form
    Private startTime As System.DateTime = DateTime.Now
    Public Sub New()
        InitializeComponent()
    End Sub

    Private Sub lblClose_LinkClicked(sender As Object, e As LinkLabelLinkClickedEventArgs)
        Me.Tag = "Cancelled"
        Me.Hide()
    End Sub

    Public Sub SetThinkingBar(ByVal switchedOn As Boolean)
        If switchedOn Then
            lblTime.Text = "0:00:00"
            startTime = DateTime.Now
            Timer1.Enabled = True
            Timer1.Start()
        Else
            Timer1.Enabled = False
            Timer1.Stop()
        End If
    End Sub

    Private Sub timer1_Tick(sender As Object, e As EventArgs)
        Dim diff As New TimeSpan()
        diff = DateTime.Now.Subtract(startTime)
        lblTime.Text = diff.Hours & ":" & diff.Minutes.ToString("00") & ":" & diff.Seconds.ToString("00")
        lblTime.Invalidate()
    End Sub
End Class 
```

将 BackgroundWorker 控件拖放到窗体上，这里是后台工作者事件：

```
Private Sub backgroundWorker1_DoWork(sender As Object, e As DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    e.Result = e.Argument
    'DirectCast(e.Result, ThinkingProgressBar).SetThinkingBar(True) 
    'DO LONG OPERATION HERE

End Sub

Private Sub backgroundWorker1_RunWorkerCompleted(sender As Object, e As RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
    Dim dlg As ThinkingProgressBar = TryCast(e.Result, ThinkingProgressBar)
    If IsNothing(dlg) = False Then
        dlg.SetThinkingBar(False)
        dlg.Close()
    End If
End Sub 
```

这是您的应用程序启动和升级时的调用代码：

```
Dim dlg As New ThinkingProgressBar()
dlg.SetThinkingBar(True)
BackgroundWorker1.RunWorkerAsync(dlg)
dlg.ShowDialog()
If IsNothing(dlg.Tag) = False AndAlso dlg.Tag.ToString() = "Cancelled" Then
    Return
End If 
```

有几件事，您可以阻止用户取消（即`lblClose_LinkClicked`）并进行保护/防御性编程以处理用户在升级期间终止进程或关闭其 PC 的情况。

ProgressBar 实际上是一个动画 gif - 这将适合您的使用，因为估计更新数据库所需的时间很难预测：

![在此处输入图像描述](../Images/449f079925106b4260dc7b7db2fa0b31.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T07:06:57.790

根据您的要求，在我看来您正在寻找：

```
Application.DoAction() 
```

我在一个应用程序中体验过，需要从 xml 加载 2000 到 3000 个项目相关的详细信息，并且实现的过程是一个一个地读取项目，这会挂起该过程。在循环中使用上述行解决了我的问题。UI 没有挂断，用户可以在其他表单上工作。这`progressbar is now as background process`在我看来（在某种程度上）。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T00:06:13.767

我理解您希望将进度条设为后台线程，但我相当肯定您将无法做到这一点。因为要更新应用程序的可视化组件，所以 UI 需要是主线程。禁用表单上的所有控件很容易，包括菜单项。

让我建议这个过程：

1.  使用提到的进度条显示您的表单。

2.  如果您显示任何其他表单，请禁用直接位于该表单上的所有子控件。根据控件的不同，您可能必须遍历其子控件才能禁用它们。

3.  在执行数据库更新的代码中，将进度条的值更新为您想要的值。更新值后，调用进度条的刷新方法。这将强制进度条正确绘制。

4.  更新完成后，隐藏进度条，重新启用您禁用的所有表单上的所有控件。

这将为您提供在后台线程中运行的进度条的外观，同时仍为您的应用程序提供所需的主线程阻塞。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T07:43:50.093

这没有经过测试，但我记得做过类似的事情来向 BGW 提供信息。这将更新后台工作人员的内容。

首先使用以下变量创建一个类（即ProgExample）并将其作为全局对象。

```
Dim ProgValue as Integer;
Dim ProgMax as Integer; 
```

然后将课程提供给后台工作人员。

```
BackgroundWorker1.RunWorkerAsync(_ProgExample) 
```

阅读并保存在里面：

```
Dim BGWProgExample as ProgExample = DirectCast(e.Argument, ProgExample), 
```

在后台工作人员中执行以下操作：

```
BGWProgressBar.Maximum = BGWProgExample.ProgMax
while BGWProgExample.ProgValue <> BGWProgExample.ProgMax
BGWProgressBar.Value = BGWProgExample.ProgValue 
```

因此，当您完成某些操作时，只需更新 _ProgExample.ProgValue。不要试图通过仅将 ProgValue 作为参数传递来在没有类的情况下执行此操作。这意味着您发送一份处于当前状态的 ProgValue 副本，如果您要更新 ProgValue，它不会改变。如果这没有任何作用，请尝试将 Application.DoEvents 和/或 Application.DoAction 与此一起使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T10:31:26.117

也许我不明白这个问题，但它真的很简单吗？

```
For i = ProgressBar1.Minimum To ProgressBar1.Maximum
        ProgressBar1.Value = i
        ProgressBar1.Update()
        System.Threading.Thread.Sleep(25)
    Next 
```

Progressbar 的“更新”可以解决问题。您的代码“阻塞”（虽然我看不到，为什么需要“应用程序不响应”），但 Progressbar 得到**更新**d。

顺便说一句：对于 Windows Vista/7（进度条动画），您可以检查：[ProgressBar is slow in Windows Forms](https://stackoverflow.com/questions/6071626/progressbar-is-slow-in-windows-forms)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-03T10:26:14.270

您可以在后台工作人员中引发事件，然后在 UI 线程上更新进度条。您可以在班级中引发事件并以表格形式处理它们。当它们被提出时，您可以在后台工作人员上调用 reportprogress()。

更多信息：

[在不阻塞主线程的情况下执行长时间运行的 UI 更改](https://stackoverflow.com/questions/13157886/performing-long-running-ui-changes-without-blocking-the-main-thread)

# api - 如何从浏览器获取 Skype 联系人列表？

> ID：13206932
> 
> 赞同：3
> 
> 时间：2012-11-03T07:11:51.020
> 
> 标签：api, rest, skype, skype4com, contact-list

我想在浏览器页面中获取我的 Skype 联系人列表，就像[https://imo.im/](https://imo.im/)一样。

Skype api 是如何工作的？对我来说，这真的很令人困惑。如我所见，我需要下载 skype4com 以使其与 PHP 或 node.js 等一起使用？

那是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-29T13:04:11.657

您可以查看[https://github.com/ShyykoSerhiy/skyweb](https://github.com/ShyykoSerhiy/skyweb) ( [https://www.npmjs.com/package/skyweb](https://www.npmjs.com/package/skyweb) )。

```
import Skyweb = require('../skyweb');

var skyweb = new Skyweb();
skyweb.login('skypeUsername', 'skypePassword').then((skypeAccount) => {
    console.log('Your contacts : ' + JSON.stringify(skyweb.contactsService.contacts, null, 2));
}); 
```

请注意，skyweb 依赖于 Skype for Web (web.skype.com) 实现的一些内部部件，这种方法可能随时停止工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T13:28:15.993

在 Chrome 中，按 Ctrl+U 以查看源代码，或者（更好的方法）在您的联系人列表上方按 Ctrl+Q 并查看是否有可以通过 preg_match 或 preg_match_all 处理的术语

# c# - 如何从 Jquery 中的 pagemethods 获取返回值..？

> ID：13206939
> 
> 赞同：4
> 
> 时间：2012-11-03T07:12:30.573
> 
> 标签：c#, jquery, asp.net

如何从 PageMethods 返回真/假到 OnclientClick 事件..？？这是将调用某个按钮的 OnClientClick 事件的 Jquery 函数。如果此函数返回 true，我想执行一些服务器端方法..？但是如何将值返回给 OnClientClick 事件..??

这是我的代码..

```
function SendFriendReq(FriendReq) {
        PageMethods.CheckFriend(FriendReq, function (ResString) {
        // Here I Want to send True/False to OnClientEvent based on ResStirng value  
        });

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T13:25:05.650

使用[jQuery Ajax](http://api.jquery.com/jQuery.ajax/)，如果您的 WebMethod 定义如下：

```
[WebMethod]
public static string GetTime()
{
    return DateTime.Now.ToString();
} 
```

您可以像这样从页面的 javascript 调用它：

```
$.ajax({
    type: "POST",
    url: "MyPage.aspx/GetTime",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(data) {
        var time = data.d;
    }
}); 
```

如果您不想使用 ASP.NET 自动生成的 javascript 代理，这是一种替代方法。我个人更喜欢使用 jQuery，因为它是适用于大多数[Web 服务](http://en.wikipedia.org/wiki/Web_service)实现的通用解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-01T09:59:18.367

您可以使用这样的返回值调用 PageMethod，如果您不想传递任何参数，则可以删除它们：

```
PageMethods.AddDocumentToCRM(imagedata, retrievedGuid,
    function(result) {
        if (result != null || result != undefined)
            appendMessage("<span style='color:#cE5E04'><b>Document Uploaded.</b></span> <br /><b>Note GUID : </b>" + result + "<br />");
        else
            appendMessage("<span style='color:#cE5E04'<b>Document Uploaded Fail.</b></span>");
        }
    ); 
```

# api - 如何根据服务路由在服务堆栈中对用户进行不同的身份验证？

> ID：13206940
> 
> 赞同：2
> 
> 时间：2012-11-03T07:13:02.123
> 
> 标签：api, authentication, servicestack, custom-attributes

我正在使用服务堆栈。我想根据 API 中的路由对用户进行不同的身份验证。例如：如果用户正在访问公司路由：/api/company (POST)（更新公司数据）我想使用存储在超级管理员帐户中的主密钥（例如）。但是如果用户正在访问一些琐碎的数据，比如员工部门，那么该员工的身份验证，Route: /api/employees/74274762764/departments (GET)

那么，如果我使用凭据身份验证（继承和实现），我该怎么做。

我是否检测路径并编写逻辑？那将是非常脆弱的。从理论上讲，我想在服务上指定属性并提供所需的身份验证。所以像：

[CorporateAuthentication] 或 [UserAuthentication] 以便身份验证逻辑可以确定在哪里验证用户。

请帮忙。

谢谢

阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:09:03.533

通常，当您拥有具有不同可访问性级别的资源时，您实际上并不想以不同的方式进行身份验证，而是希望资源受到附加在经过身份验证的用户上的不同角色或权限的保护。

有一个如何使用 ServiceStack 的[身份验证和授权 wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)的示例：

```
[Authenticate]
//All HTTP (GET, POST...) methods need "CanAccess"
[RequiredRole("Admin")]
[RequiredPermission("CanAccess")]
[RequiredPermission(ApplyTo.Put | ApplyTo.Post, "CanAdd")]
[RequiredPermission(ApplyTo.Delete, "AdminRights", "CanDelete")]
public class Secured
{
    public bool Test { get; set; }
} 
```

这个较早的[StackOverflow 答案](https://stackoverflow.com/questions/12095094/servicestack-web-services-security/12096813#12096813)详细介绍了角色和权限在[ServiceStack](http://www.servicestack.net/)中的工作方式。

# javascript - Three.js 和 GIF 动画

> ID：13206951
> 
> 赞同：0
> 
> 时间：2012-11-03T07:14:37.670
> 
> 标签：javascript, three.js, animated-gif

过去几天 我一直在尝试使用[http://slbkbs.org/jsgif/ ，以便将 4 帧动画 gif 合并到基于画布的六面网格的 loadTexture 函数中。](http://slbkbs.org/jsgif/)

任何想法或方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T08:08:07.120

我对 Three.js 了解不多，但 jsgif 所做的只是将动画 GIF 解析为帧，然后将它们显示在画布上。这似乎与此无关，如果您正在处理自己的动画，最好提前将其拆分为静态帧，然后使用 Three.js 使用这些帧的任何动画工具。您不会从浏览器的动画 GIF 支持中免费获得任何东西。

# ios - 如果设备自动休眠/自动锁定，有没有办法让 Airplay 继续运行？

> ID：13206952
> 
> 赞同：6
> 
> 时间：2012-11-03T07:15:06.383
> 
> 标签：ios, locking, sleep, airplay

通过 Airplay 将视频从 iPhone（或任何 iOS 设备）流式传输到电视时，只要设备从不活动状态进入睡眠状态，流就会停止。目前，我禁用了睡眠定时器，以便设备不会自动睡眠，但有更好的解决方案吗？

设置是否`AVPlayer.externalPlaybackActive`足以让操作系统知道屏幕关闭时继续播放？如果没有，即使设备关闭屏幕，是否有其他方法可以让 Airplay 继续运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T00:03:24.287

**要继续播放播放，请将“App 播放音频”添加到AppName-info.plist**中的“所需背景模式”中

 **![AppName-info.plist](../Images/a03e8af076d2d1c796ebbfca69a0dcb9.png)

并将音频会话设置为：

```
 [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
[[AVAudioSession sharedInstance] setActive: YES error: nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-09T06:28:08.120

要解决此问题，请转到“设置”>“通用”>“隔空播放和接力”>“自动隔空播放到电视”>“从不”。**

# android - 如何在 Android 上使用我自己的证书制作 .keystore 文件？

> ID：13206953
> 
> 赞同：-2
> 
> 时间：2012-11-03T07:15:05.930
> 
> 标签：android, certificate

> **可能重复：**
> [如何为我的 Android Market APK 创建证书？](https://stackoverflow.com/questions/3985419/how-do-i-create-a-certificate-for-my-android-market-apk)

我想从证书创建自己的 .keystore 文件。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:18:08.573

您应该能够使用对话框创建密钥库，是的。导航到您要使用的文件夹后，在文件浏览窗口的“文件名：”字段中输入一个名称，例如 sophie.keystore。然后你应该能够继续。

或者，您可以按照文档中的说明在命令行上创建它。

该命令如下所示：

```
keytool -genkey -v -keystore my-release-key.keystore -alias alias_name -keyalg RSA -keysize 2048 -validity 10000 
```

例如：

```
keytool -genkey -v -keystore ~/dcaunt.keystore -alias dcaunt -keyalg RSA -keysize 2048 -validity 10000 
```

# visual-studio-2010 - asp.net开发服务器上的xap加载错误

> ID：13206954
> 
> 赞同：1
> 
> 时间：2012-11-03T07:15:12.670
> 
> 标签：visual-studio-2010, iis-express, cassini, windows-update, aspnet-development-server

最近我开始遇到一个奇怪的错误，加载 xap 文件时它停止了！在 %4 中的 %95 中非常随机。

浏览器的开发者控制台出现错误

**未捕获的错误：Silverlight 应用程序代码中未处理的错误：2104
类别：InitializeError
消息：无法下载 Silverlight 应用程序。检查网络服务器设置**

当我打开所有调试选项时，我看到了

**System.Net.Sockets.SocketException 发生

**消息=远程主机强制关闭现有连接 Source=System ErrorCode=10054 NativeErrorCode=10054 StackTrace: at System.Net.Sockets.Socket.Send(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags) InnerException:**

在提琴手上，我可以清楚地看到 4 个 7MB xap 正在下载并中断！

注意：此错误仅发生在 iis-express 和 asp.net dev.server 上。在部署平台上一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:15:12.670

几天后我的一个朋友在办公室也遇到了这个错误，

所以我们意识到我们的电脑最近被更新服务器更新了。但是某些 Windows 更新在其他 PC 上不存在。

首先，我们删除了 VS2010 更新，但没有解决。最后，我们卸载了最近的 Windows 更新。（这会导致 Windows 重置，并需要时间来删除此更新）

哪个KB12XX？？我们不知道（如果有人检查它，请分享），但重启后它就像一个魅力。

希望对某人有所帮助！

# android - Android 布局，右侧视图占用预设空间，左侧视图缩放以填充屏幕的其余部分，直至达到一定限制

> ID：13206973
> 
> 赞同：5
> 
> 时间：2012-11-03T07:19:41.600
> 
> 标签：android, android-layout, android-xml, android-screen, android-screen-support

我正在 Android 中制作一个布局（XML 文件），它有两个子视图（一个在屏幕右侧，一个在左侧）。我希望右边的视图占据一个预先确定的空间（以 dp 为单位）并让左边的视图占据所有剩余空间直到一个限制，此时它将停止扩展并且两个布局将只是随着屏幕变大，距离更远。

奇怪的是，如果我希望右侧的视图是扩展的视图，而左侧的视图是占用预设空间的视图，这将非常容易。如果您将每个视图设置为您想要的宽度（在水平线性布局中），如果两个视图都不适合，Android 将自动缩小左侧的一个。

我想在一个布局文件中执行此操作；此布局已经为 sw512dp-land 和 sw765dp-land 之间的显示器设计。

如果我能找到一种方法让 Android 缩小左侧的布局（当布局都不能适应指定的大小时），下面的代码将起作用。但默认情况下，系统会先收缩右边的布局。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<RelativeLayout
    android:id="@+id/left"
    android:layout_width="150dip"
    android:layout_height="fill_parent"
    android:background="@color/red" >
</RelativeLayout>

<LinearLayout
    android:id="@+id/right"
    android:layout_width="100dip"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@color/green" >
</LinearLayout> 
```

如果我不需要左侧的布局在某个点停止扩展，则此代码（来自@Lokesh）将起作用。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<LinearLayout
    android:id="@+id/left"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_toLeftOf="@+id/right"
    android:background="@color/red" >

</LinearLayout>

<LinearLayout
    android:id="@+id/right"
    android:layout_width="100dip"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@color/green" >
</LinearLayout> 
```

很高兴知道是否有人认为这是不可能的，所以我可以采取务实的方式或改变我的布局方法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T09:12:44.460

这对我有用。我已将正确的布局设置为 100dip，根据您的需要进行更改。

```
<?xml version="1.0" encoding="utf-8" ?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/left"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_toLeftOf="@+id/right"
        android:background="@color/red" >

    </LinearLayout>

    <LinearLayout
        android:id="@+id/right"
        android:layout_width="100dip"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@color/green" >
    </LinearLayout>

</RelativeLayout> 
```

**编辑 1：**我使用背景颜色只是为了清楚地显示布局。完全没有必要。:)

**编辑 2：**如果您想要一种方法将左侧布局扩展到一个限制，那么试试这个 -

```
<?xml version="1.0" encoding="utf-8" ?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/left"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_toLeftOf="@+id/right">
        <LinearLayout 
                            android:id="@+id/inner"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"         
            android:background="@color/yellow">

            <TextView
                android:id="@+id/myTextView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="This will expand only to a limit"
                android:maxWidth="300dip"
                android:textAppearance="?android:attr/textAppearanceLarge" 
                android:background="@color/red" />

        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/right"
        android:layout_width="100dip"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@color/green" >
    </LinearLayout>

</RelativeLayout> 
```

在这里，您需要将小部件放置在`inner`布局中，这就是它在不同屏幕中的样子。

**3.1英寸HVGA** ![3.2英寸HVGA](../Images/8a6eede6429a01bb53a609a5bfd42592.png)

**5.2英寸QVGA** ![5.2英寸QVGA](../Images/be856d7daeaf38077b4959448062c794.png)

使用的颜色：红色（#FFFF00）、黄色（#FFFFFF00）、绿色（#FF00FF00）。

# php - 如何解决 IE 中 amCharts 折线图的问题

> ID：13206977
> 
> 赞同：1
> 
> 时间：2012-11-03T07:20:30.590
> 
> 标签：php, javascript, amcharts

我正在用 PHP 做一个有图形表示的网站。我用过`amCharts`。我已经绘制了图表。它可以工作，但是当我使用时`IE browser`，这条线显示很奇怪，并且在 Mozilla Firefox 中没有问题。我在小提琴中添加了折线图。请检查一下。任何帮助将不胜感激。

[http://jsfiddle.net/soumyamohanan/Qr7we/2/](http://jsfiddle.net/soumyamohanan/Qr7we/2/)

# gradle - 在gradle中使用fmpp生成java文件

> ID：13206979
> 
> 赞同：2
> 
> 时间：2012-11-03T07:21:07.017
> 
> 标签：gradle, freemarker, fmpp

我有一个现有的 Maven 项目，我正在尝试移植到 gradle。

一个子模块使用 fmpp/freemarker 生成大量的 java 文件，然后将这些文件反馈到构建中。

我是 gradle 新手，想知道是否有人知道这样做的简单方法。

任何帮助，将不胜感激。

我当前的 pom.xml 如下所示：

```
<build>
    <plugins>
        <!-- Freemarker maven plugin for code generation -->
        <plugin>
            <groupId>com.googlecode.fmpp-maven-plugin</groupId>
            <artifactId>fmpp-maven-plugin</artifactId>
            <version>1.0</version>
            <dependencies>
                <dependency>
                    <groupId>org.unix4j</groupId>
                    <artifactId>unix4j-tools</artifactId>
                    <version>0.1-SNAPSHOT</version>
                    <optional>true</optional>
                </dependency>
            </dependencies>
            <configuration>
                <cfgFile>src/main/resources/codegen/config.fmpp</cfgFile>
                <outputDirectory>target/generated-sources/main/java</outputDirectory>
                <templateDirectory>src/main/resources/codegen/templates</templateDirectory>
            </configuration>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>add-source</goal>
                    </goals>
                    <configuration>
                        <sources>
                            <source>src/main/generated</source>
                        </sources>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T08:42:45.900

对不起，应该先花更多时间在谷歌上搜索。这是对我有用的解决方案：

```
project(':unix4j-core:unix4j-command') {
    configurations {pmd}

    dependencies {
        compile project(':unix4j-core:unix4j-base')
        compile project(':unix4j-tools')
        pmd project(':unix4j-tools')
    }

    task generateFmppSources(dependsOn: ":unix4j-tools:compileJava") << {
        println "Generating sources...."
        ant.taskdef(name:'fmpp', classname:'fmpp.tools.AntTask', classpath:configurations.pmd.asPath);
        ant.fmpp configuration:"src/main/resources/codegen/config.fmpp", sourceRoot:"src/main/resources/codegen/templates", outputRoot:"target/generated-sources/main/java";
    }
    compileJava.dependsOn generateFmppSources
    sourceSets {
        main {
            java {
                srcDir 'target/generated-sources/main/java'
            }
        }
    }
} 
```

# java - 正则表达式检查字符串中的连续 3 位数字

> ID：13206983
> 
> 赞同：5
> 
> 时间：2012-11-03T07:22:04.150
> 
> 标签：java, regex

我想要一个 java 中的正则表达式来检查一个字符串是否包含连续的 3 位数字。但问题是我的字符串可能包含 unicode 字符。如果字符串包含 unicode 字符，它应该跳过 unicode 字符（在 & AND # 之后跳过 4 个 '.'）并且应该进行检查。一些例子是

```
Neeraj : false
Neeraj123 : true
&#1234Neeraj : false
&#1234Neeraj123 : true
123N&#123D : true
Neeraj&#1234 : false
Neeraj&#12DB123 : true
&#1234 : false 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T07:29:36.357

您需要使用否定的[后向断言](http://www.regular-expressions.info/lookaround.html)：

```
Pattern regex = Pattern.compile(
    "(?<!             # Make sure there is no...           \n" +
    " &\\#            # &#, followed by                    \n" +
    " [0-9A-F]{0,3}   # zero to three hex digits           \n" +
    ")                # right before the current position. \n" +
    "\\d{3}           # Only then match three digits.", 
    Pattern.COMMENTS); 
```

您可以按如下方式使用它：

```
Matcher regexMatcher = regex.matcher(subjectString);
return regexMatcher.find();  // returns True if regex matches, else False 
```

# ruby-on-rails - 如何持久化对客户端呈现的 Rails 视图所做的更改？

> ID：13206986
> 
> 赞同：2
> 
> 时间：2012-11-03T07:22:21.307
> 
> 标签：ruby-on-rails

在我的 Rails 应用程序中，我有一个允许用户修改呈现的 HTML 的视图，例如移动按钮、更改 DIV 的颜色等。如何保持这些更改，以便下次呈现视图时，那些变化有体现吗？

我的第一个想法是将修改后的 HTML 作为文本列存储到数据库中。但是我真的不喜欢这种方法，因为 HTML 可以任意大，更不用说性能会很差。我四处寻找，到目前为止还没有任何线索，这让我感到困惑，因为我认为这种情况并不罕见：WYSIWYG 类型编辑器、网站构建器应用程序都应该需要解决这个问题。这让我怀疑我是否走错了路。

非常感谢任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:43:56.747

为此，您需要为按钮提供一些位置编号。在移动这些按钮后，调用 ajax 请求以序列化方式将这些位置存储在数据库或缓存中。

```
 [button3, button1, button4, button2] or "button1, button4, button3, button2" 
```

通过循环此对象（将此对象转换为数组），您可以在下次渲染视图时显示这些按钮。

同样，您可以使用 div 的颜色来做到这一点。为您的 div 提供一些唯一的 id，并使用颜色代码存储这些 id。

我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:11:22.553

听起来用户对 DOM 有很多控制权，因此在每个元素的基础上存储更改是没有意义的——这将难以维护并且效率极低。

用户将同时更新 HTML 和 CSS，它们本质上只是字符串，因此一个好的解决方案可能是将修改后的 HTML 和 CSS 呈现为字符串并将它们存储在 MongoDB 文档中（一起或单独），然后引用那些 Mongo 文档当您想再次加载页面时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T00:26:18.350

我想我找到了一个解决方案，即：

1.  创建一个名为“站点”的模型
2.  将页面分成多个逻辑部分，例如徽标/标题、导航菜单、内容等。
3.  编辑页面所见即所得的风格
4.  通过此模型将 HTML 保存到数据库中
5.  当需要渲染页面以反映更改时，从数据库中提取内容并在模板中将它们呈现为“原始”

# python - virtualenv Env 未在 Windows 7 中创建 bin 目录

> ID：13206990
> 
> 赞同：47
> 
> 时间：2012-11-03T07:22:44.113
> 
> 标签：python, windows, virtualenv

我是 Python 的新手，我在这上面花了几个小时。当我运行一个简单的命令来设置我的 Python 环境时，我似乎无法弄清楚为什么：`virtualenv --distribute env`

这不会在`env`目录中创建 bin 文件。

它只创建：

```
-- env
   -- Include
   -- Lib
   -- Scripts 
```

我的印象是，我在网上找到的许多示例都会创建一个 bin 目录（例如，我无法运行此命令：）`env/bin/activate`。

我正在使用 Windows 7 和 Python 2.7。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-03T07:24:10.717

在 Windows 上，这是完全正确的。仅在`bin`POSIX 系统上创建目录。从文档的[Windows 注释](https://virtualenv.pypa.io/en/latest/virtualenv.html?highlight=windows#windows-notes)部分：

> virtualenv 中的一些路径在 Windows 上略有不同：Windows 上的脚本和可执行文件进入`ENV\Scripts\`而不是，`ENV/bin/`库进入`ENV\Lib\`而不是`ENV/lib/`.

对于 Windows，运行`\path\to\env\Scripts\activate`以激活 virtualenv。再次从[文档](https://virtualenv.pypa.io/en/latest/virtualenv.html#activate-script)中：

> 在 Windows 上，您只需执行以下操作：
> 
> `> \path\to\env\Scripts\activate`
> 
> 并键入*deactivate*以撤消更改。
> 
> 根据您的活动 shell（CMD.exe 或 Powershell.exe），Windows 将使用`activate.bat`或`activate.ps1`（视情况而定）激活虚拟环境。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-19T06:17:25.390

如果您使用的是 Windows 版 Git Bash，我发现以下命令可以激活环境： $ source (path to environment)/Scripts/activate

我在 Windows 10、Python(v3.7)、Pip (v19.0.3)、virtualenv (v16.4.3) 上使用 Git Bash

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-30T19:40:41.473

是，对的。在 Windows 上，它按如下方式创建目录层次结构：

*   venv（虚拟环境名称）
    *   包括
    *   库\站点包
    *   脚本

就像在这张图片中一样：

![令人讨厌的屏幕截图](../Images/be89a768183b3a484e6c9551e5c558ba.png).

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-06-07T13:06:09.417

对于 Windows，您必须运行`python -m venv <your_env_name>`和 `source <your_env_name>/Scripts/acivate`. 这适用于我在 Windows 上。

# swing - 树最后一个节点上的事件处理

> ID：13206992
> 
> 赞同：1
> 
> 时间：2012-11-03T07:23:39.903
> 
> 标签：swing, event-handling, jtree, treenode

你能告诉我我们如何在叶子的父节点上进行事件处理。

在这里，我想在 RRITG04 节点上进行事件处理。

```
mobileEnablerTxnListTree.addMouseListener(new MouseAdapter() {
    @Override
    public void mouseClicked(MouseEvent p_evt) {
    if (p_evt.getButton() == MouseEvent.BUTTON3) {
        DefaultMutableTreeNode l_selected_node = (DefaultMutableTreeNode) mobileEnablerTxnListTree
            .getLastSelectedPathComponent();

        if (l_selected_node != null && l_selected_node.isRoot())
        meTxnListTreeRightClickNewEntity(p_evt);
        if (l_selected_node != null && l_selected_node.isLeaf())
        meTxnListTreeRightClick(p_evt);
    }
    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:48:34.030

```
 public void mouseClicked(MouseEvent p_evt) {

    DefaultMutableTreeNode l_selected_node = (DefaultMutableTreeNode) returnMobileEnablerFieldMapTree
        .getLastSelectedPathComponent();
    if (p_evt.getButton() == MouseEvent.BUTTON3) {

if (l_selected_node != null
            & l_selected_node.equals(l_selected_node
                .getLastLeaf().getParent())) {
           Do whatever you want ...........
}
} 
```

我通过这样做解决了我的问题。

谢谢

# selenium - Selenium 在使用弹出窗口时打开多个窗口

> ID：13206995
> 
> 赞同：1
> 
> 时间：2012-11-03T07:23:51.790
> 
> 标签：selenium, selenium-webdriver

场景是我需要填写一个表格并单击一个按钮，只要我单击该按钮，就会显示一个新的弹出窗口。现在我的问题是当我点击一个按钮时；3 或 4 个空白窗口正在打开。

错误前的脚本如下：

`//To click on "Check Availability" Button waiter.until(ExpectedConditions.presenceOfElementLocated(By.id("ctl00_ContentPlaceHolder1_btnCheckAvailbility"))); driver.findElement(By.id("ctl00_ContentPlaceHolder1_btnCheckAvailbility")).click(); sleep(4000);`：

笔记：

1.  当我尝试手动执行时，它工作正常
2.  当我使用 Firefox 运行相同的脚本时，它运行良好，但不幸的是，我只能在 IE 上测试这个应用程序。
3.  我正确地声明了“IEDriverServer.exe”，所以这不是问题。

所以...朋友们对这个问题有任何帮助或想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:09:08.507

嗯...似乎有点奇怪，因为您按了一次按钮。我会向您推荐这种在按下按钮后处理新窗口的方法：

```
 //Store the current window handle
        String winHandleBefore = driver.getWindowHandle();

        //Perform the click operation that opens new window

        //Switch to new window opened
        for(String winHandle : driver.getWindowHandles()){
            driver.switchTo().window(winHandle);
        }

        // Perform the actions on new window

            //Close the new window, if that window no more required
    driver.close();

        //Switch back to original browser (first window)

        driver.switchTo().window(winHandleBefore);

        //continue with original browser (first window) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-05T09:25:36.320

经过多次头脑风暴后，我发现如果我们将操作系统升级到 Windows 7，那么这个问题就会得到解决。

# ios - iOS 6.0释放资源的方法

> ID：13206996
> 
> 赞同：1
> 
> 时间：2012-11-03T07:24:09.593
> 
> 标签：ios, ios6, viewdidunload

> **可能重复：**
> [iOS 6 - viewDidUnload 迁移到 didReceiveMemoryWarning？](https://stackoverflow.com/questions/12674268/ios-6-viewdidunload-migrate-to-didreceivememorywarning)

在 iOS 6.0 viewDidUnload: 和其他一些方法已被弃用。如果我需要释放一些资源，如 UIWebView 或网络连接，我应该使用什么方法？（如果包括 ARC）谢谢。