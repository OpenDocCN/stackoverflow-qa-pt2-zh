# StackOverflow 问答 15100000-15100999

# objective-c - 为什么没有调用此 URL 请求？

> ID：15100008
> 
> 赞同：0
> 
> 时间：2013-02-26T21:49:30.493
> 
> 标签：objective-c, xcode, ios6

我将以下代码作为 iOS 应用程序的一部分，该应用程序从 URL 获取 JSON 数组并使用它来填充表格视图。出于某种原因，函数中没有发出请求，我不知道为什么。功能如下图。

PS - 我是这个 Objective-C 云雀的新手，如果我犯了一个非常明显的错误，请原谅我！

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    // Create a URL Request
    self.responseData = [NSMutableData data];
        NSURLRequest *request = [NSURLRequest requestWithURL:
    [NSURL URLWithString:@"http://mydomain.com/return_json_list"]];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];

    self.viewController = [[BIDViewController alloc] initWithNibName:@"BIDViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:56:19.700

你从来没有真正提出请求......你需要在或（同步） `start`上调用（异步）。`NSURLConnection``+ (NSData *)sendSynchronousRequest:(NSURLRequest *)request returningResponse:(NSURLResponse **)response error:(NSError **)error`

您可以通过以下方式完成后者：

```
self.responseData = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://mydomain.com/return_json_list"]]; 
```

请注意，它将发生在主线程上，因此您的 UI 会受到影响。

# java - 在此合并排序实现中每次都调用合并

> ID：15100009
> 
> 赞同：-1
> 
> 时间：2013-02-26T21:49:30.460
> 
> 标签：java, mergesort

在下面的代码中，每次在合并排序方法中的条件内都会调用合并`if (low < high) {`？我认为它每次都被称为递归合并排序方法的一部分？

```
package sorting;

public class MyMergeSort extends Print{

      private static int[] numbers;
      private static int[] helper;

      private static int number;

    public static void main(String args[]){

        int[] array = {1 , 3 , 5 , 7 , 8};

        sort(array);
    }

      public static void sort(int[] values) {
            numbers = values;
            number = values.length;
            helper = new int[number];
            mergesort(0, number - 1);
          }

      private static void mergesort(int low, int high) {
            // Check if low is smaller then high, if not then the array is sorted
            if (low < high) {
              // Get the index of the element which is in the middle

              int middle = low + (high - low) / 2;
              println("low is "+low); println("high is "+high); println("middle is "+middle);
              // Sort the left side of the array
              mergesort(low, middle);
              // Sort the right side of the array
              mergesort(middle + 1, high);

              // Combine them both
              merge(low, middle, high);
            }
      }

      private static void merge(int low, int middle, int high) {

            // Copy both parts into the helper array
            for (int i = low; i <= high; i++) {
              helper[i] = numbers[i];
            }

            int i = low;
            int j = middle + 1;
            int k = low;
            // Copy the smallest values from either the left or the right side back
            // to the original array
            while (i <= middle && j <= high) {
              if (helper[i] <= helper[j]) {
                numbers[k] = helper[i];
                i++;
              } else {
                numbers[k] = helper[j];
                j++;
              }
              k++;
            }
            // Copy the rest of the left side of the array into the target array
            while (i <= middle) {
              numbers[k] = helper[i];
              k++;
              i++;
            }

          }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:15:42.300

```
 mergesort(1,3) (1)
                           /             \
                          / (2)           \ (5)
                         v                 v
              mergesort(1,2)              mergesort(2,3)
             /        \                   /            \
    (3)     /          \   (4)       (6) /              \  (7)
  mergesort(1,1)     mergesort(2,2)    mergesort(2,2)   mergesort(3,3)
            \        /                           \      /
             \      /                             \    /
               merge (8)                           merge (9)
                    \_________>  merge  <__________/
                                 (10) 
```

您可以看到，每当`low < high`调用 时`merge`，我都会对示例进行编号，以便您更好地了解调用的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:56:01.293

条件

```
if (low < high) 
```

是终止条件。当达到该条件时（例如，当 high = low 时），该方法将简单地返回，而不是继续进行任何递归调用。

但是，除了递归终止时，是的，每次调用该`mergesort`方法时都会调用一次合并。

# javascript - JavaScript 对象数组 - 第 0 个元素未定义，但 stringify 显示对象

> ID：15100010
> 
> 赞同：1
> 
> 时间：2013-02-26T21:49:36.213
> 
> 标签：javascript, backbone.js

我从backbone.js 中拉出一个对象，当我对对象进行字符串化时，我看到字符串文字

```
'[{"Name":"Testname","Address":"Testaddress","id":"444444444444444"}]' 
```

但是，当我将非序列化对象分配给变量并尝试访问第 0 个元素时，我得到未定义。我希望得到对象

```
{"Name":"Testname","Address":"Testaddress","id":"444444444444444"} 
```

JavaScript 不处理

```
[{"Name":"Testname","Address":"Testaddress","id":"444444444444444"}] 
```

作为对象的索引数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:56:16.300

要按索引访问 Backbone.Collection 的元素，请使用以下[`Collection#at`](http://backbonejs.org/#Collection-at)方法：

```
var first = collection.at(0); 
```

或者，您可以使用该`Collection#first`方法，它实际上是[下划线](http://underscorejs.org/#first)库的一部分，但被代理到 Backbone 集合以获取语法糖：

```
var first = collection.first(); 
```

您在序列化 JSON 中看到数组表示的原因是，按照惯例，它会`JSON.stringify`查找`toJSON`在您提供给它的对象上调用的方法以进行字符串化，如果找到，则将使用该方法的返回值。的实现[`Collection#toJSON`](http://backbonejs.org/#Collection-toJSON)返回集合内部模型数组的克隆，因此 JSON 输出是一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:02:01.300

刚试过

```
var arr = JSON.parse( '[{"Name":"Testname","Address":"Testaddress","id":"444444444444444"}]' ); 
```

和

```
console.log( arr[0] ); // => object 
```

你所描述的应该工作。

# node.js - 名称类型为 mongoose 的字段

> ID：15100013
> 
> 赞同：52
> 
> 时间：2013-02-26T21:49:45.490
> 
> 标签：node.js, mongoose

我正在尝试使用以下结构验证和保存 Passport 配置文件：

[http://passportjs.org/guide/profile/](http://passportjs.org/guide/profile/)

这是我想出的方案：

```
// Define the schema.
schema = new mongoose.Schema({
    // The name of this user, suitable for display.
    displayName: String,
    // Each e-mail address ...
    emails: [{
        // ... with the actual email address ...
        value: String,
        // ... and the type of email address (home, work, etc.).
        type: String
    }],
    // A unique identifier for the user, as generated by the service provider.
    id: String,
    // The name ...
    name: {
        // ... with the family name of this user, or "last name" in most Western languages ...
        familyName: String,
        // ... with the given name of this user, or "first name" in most Western languages ...
        givenName: String,
        // ... and with the middle name of this user.
        middleName: String
    },
    // The provider which with the user authenticated.
    provider: String
}); 
```

电子邮件有一个名为“type”的属性，它是为猫鼬类型保留的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-02-26T21:51:19.427

您需要使用对象定义字段：

```
type: {type: String} 
```

# ember.js - 支持转换到新对象的方法

> ID：15100014
> 
> 赞同：2
> 
> 时间：2013-02-26T21:49:47.760
> 
> 标签：ember.js, ember-data

我用我的帖子创建路线设置了一个保存事件。

```
App.PostsNewRoute = Ember.Route.extend({
  model: function(){
    return App.Post.createRecord();
  },
  exit: function() {
    this._super();
    this.get('currentModel.transaction').rollback();
  },
  setupController: function(controller, model){
    controller.set('content', model);
  },
  events: {
    save: function(post){
      post.one('didCreate', this, function(){

        this.transitionTo('posts.show', post);
      });
      post.get('transaction').commit();
    },
    cancel: function(){
      this.transitionTo('posts.index');
    }
  }
}); 
```

这是我的帖子模型。

```
App.Post = DS.Model.extend({
  body: DS.attr('string'),
  headline: DS.attr('string')
}); 
```

如您所见，它在帖子创建后过渡到显示路线。我遇到了一个问题，由于帖子的 id 未定义（它是在数据库中创建对象后定义的），因此转换将 url 更改为 /null 。这似乎合乎逻辑，但显然并不理想。

过渡到新帖子 id 的最佳方法是什么？我在创建后返回整个对象（包括 ID）。似乎 Ember 没有看到我要返回的新对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:55:14.903

我遇到了这个。 [https://github.com/emberjs/data/issues/405](https://github.com/emberjs/data/issues/405)看起来 didCreate 事件在对象更新之前触发。我使用的解决方法只是为有问题的 id 设置一个观察者。然后 didCreate 会触发，当 id 更新时，我的观察者触发了，并且在那个观察者中我做了到 show 路由的转换。

# javascript - 使用角度服务在控制器之间共享数据

> ID：15100020
> 
> 赞同：6
> 
> 时间：2013-02-26T21:50:10.913
> 
> 标签：javascript, angularjs, service, controller, share

我试图让两个不同的控制器相互通信。

**控制器 1**

```
function WelcomeCtl($scope, emailService) {
    $scope.save=function(){
        emailService.saveEmail(‘Hi’);
        }
}

WelcomeCtl.$inject = [$scope, emailService]; 
```

此控制器旨在从文本字段中获取文本（使用 ng-model = 'email'）并将文本放入服务（emailService）中，以便可以在下一个 ng-view（由下一个控制控制器） *//出于测试目的，我只是将“嗨”直接放入 saveEmail 函数中*

**控制器 2**

```
function SignupCtl($scope, emailService) {                                           
    window.alert(emailService.getEmail())
}

SignupCtl.$inject = [$scope, emailService]; 
```

*出于测试目的，我使用 window.alert 来显示 getEmail() 的值*

**电子邮件服务**

```
angular.module('myApp.services', [])
       .service('emailService', function (){
           var text =”start value”;
           return{
               saveEmail:function (data){
                  text  = data;

              },
              getEmail:function (){
                  return text;
              }
          };
      }); 
```

由于使用了此服务指定的 Controller1 和 Controller 2，window.alert 打印出“开始值”而不是“Hi”</p>

当我在代码中添加更多 window.alert 函数以查看发生了什么时，我看到调用 save() 时，控制器 1 执行并将值保存到服务中，并且 express.js 加载下一页。然后 Controller2 激活。当控制器 2 激活时，它会重新初始化服务，将文本设置回“起始值”。然后当 getEmail 被调用时，它返回值“起始值”</p>

这让我感到困惑，因为我的印象是每次将服务包含在控制器中时都没有初始化服务。

**咨询资源。**
[更好的设计将数据传递给其他 ng-view 并跨控制器持久化](https://stackoverflow.com/questions/12574765/better-design-for-passing-data-to-other-ng-views-in-angularjs-persisting-it-ac)

**我也在使用 angular-express-seed** [https://github.com/btford/angular-express-seed](https://github.com/btford/angular-express-seed)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T22:19:15.167

Angular.js 只能工作并将数据保存在单个页面上。如果您的页面重新加载（正如您在说“express.js 加载下一页”时所表明的那样），那么它会重新初始化所有内容。

您应该：

*   看看如何使用 Angular.js 路由 ( [http://docs.angularjs.org/tutorial/step_07](http://docs.angularjs.org/tutorial/step_07) ) 以便您停留在同一页面上。
*   使用某些东西来持久化您的数据，例如`localstorage`. 了解更多：[http ://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T11:31:29.707

[https://www.youtube.com/watch?v=HXpHV5gWgyk#t=29](https://www.youtube.com/watch?v=HXpHV5gWgyk#t=29)

这家伙用非常简单的方式解释了它。

# opa - Opa 的原生数据库和服务器是否仍然可用？

> ID：15100021
> 
> 赞同：0
> 
> 时间：2013-02-26T21:50:15.397
> 
> 标签：opa

几年前我尝试过 Opa。那时您可以将 Opa 程序编译为包含服务器和数据库的单个可执行文件。来自桌面应用程序编程背景，我真的发现这个单一的可执行文件非常吸引人。

快进到现在。我再次开始查看 Opa，现在我发现它在服务器端需要 node.js 和 mongoDB。是否仍然可以创建一个“经典”Opa 应用程序，它只是一个包含服务器和数据库的可执行文件，就像几年前作为选项一样，或者已经完全弃用？（如果这种可能性已完全消除，是否可以将其作为一种选择带回来？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:27:45.653

不，Opa 原生后端已从开源版本中删除。

# javascript - 为什么 JSON 比 `for in` 和 `map` 更快地克隆对象？

> ID：15100022
> 
> 赞同：3
> 
> 时间：2013-02-26T21:50:17.353
> 
> 标签：javascript, json, performance, copy, clone

使用下面的函数来深度克隆一棵树，

```
function clone_map(obj){
    return obj.map(function(val){
        return typeof(val) == "object" ? clone_map(val) : val;
    });
};
function clone_forin(obj){
    var result = [];
    for (var key in obj){
        var val = obj[key];
        result.push(typeof(val) == "object" ? clone_forin(val) : val);
    };
    return result;
};
function clone_json(obj){
    return JSON.parse(JSON.stringify(obj));
}; 
```

JSON 是[我测试中最快的](http://jsperf.com/treedeepclonejsonvsfunction)。为什么？还有更好的选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:59:17.530

从后续测试中可以看出，JSON 选项在某些版本的 Chrome 上更快，但在 Safari 或 Firefox 上则不然。您可能还会在其他浏览器中找到混合使用。

您的 JavaScript 克隆代码位于 JavaScript 中。浏览器可以免费实现`JSON.stringify`，并`JSON.parse`采用高度优化的机器代码。（如果需要，它也可以免费将您的 JavaScript 编译成优化的机器代码。）因此，*有时*，一个相当简单的数组（例如您测试的数组）可能通过 JSON 比不使用更快，这并不奇怪。在某些引擎上。带有一些样本数据集。而在其他引擎（或其他样本数据集）上，会有不同的结果。

还值得注意的是，差异并不大，在任何现实世界的意义上都没有。在 Chrome 24 中显示的测试中，JSON 选项比最接近的竞争对手快约 25%。但每个单独的迭代都非常快，以至于在现实世界中没有任何区别。392k ops/sec 与 521k ops/sec，它仍然是 ops/sec 的一部分。:-)

# session - 使用设计 timeout_in 和 timeoutable 在 Rails 中发出客户端超时通知

> ID：15100030
> 
> 赞同：3
> 
> 时间：2013-02-26T21:50:47.353
> 
> 标签：session, devise, ruby-on-rails-3.2

rails devise 有什么方法可以在超时发生之前警告用户，或者一旦 timeout_in 时间满足就自行超时（不发帖）？我怀疑它在客户端需要某种 jquery，但我不确定如何实现它以使其与`devise#timeout_in`. 谷歌搜索，我没有找到太多 - 是否有一个特定的技术术语我应该谷歌搜索以找到更多有用的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-04T23:12:32.170

我自己也有同样的问题。我唯一能建议的（远非理想）是将javascript倒计时设置为等于可超时值（如10分钟或其他）减去警告阈值。

只要用户有任何输入，这个倒计时就会被重置。因此，如果您将其设置为 9 分钟并且 timeoutable 为 10，则会相应地显示警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-13T12:41:56.870

也许你可以使用这个 gem [https://github.com/pelargir/auto-session-timeout](https://github.com/pelargir/auto-session-timeout)

分叉它并让它与活动的ajax调用一起返回会话剩余的时间

# oracle - plsql 代码中的调试语句

> ID：15100037
> 
> 赞同：1
> 
> 时间：2013-02-26T21:50:59.197
> 
> 标签：oracle, debugging, plsql

我一直在处理很多遗留的 plsql 代码。我在整个代码中都看到了如下调试语句。添加了“if”检查以避免调试模式关闭时过程调用的开销。

```
IF (Debug mode is on) THEN
  Debug_pkg.logmsg(l_module_name,'Unexpected error : '|| SQLERRM, FND_LOG.LEVEL_WARNING);
END IF; 
```

有没有办法在一行中编写调试语句？在 C 语言中，我们有可以用来避免程序开销的宏。我可以在 plsql 代码中做类似的事情吗？

**编辑：**

添加更多细节，因为我的问题可能会让一些人感到困惑。我要避免的是写 3 行来打印一个调试语句。我可以使用宏在一行中编写调试语句吗？我尝试这样做的原因是，当这样的语句被添加到所有地方时，它会导致混乱并降低可读性。当它应该只有一行时，我看到每个调试语句有 3 行。

**第二次编辑：**

在下面添加了我的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:56:05.670

根据您使用的 Oracle 版本，可以[在 PL/SQL 中使用条件编译](http://technology.amis.nl/2005/11/17/oracle-10gr2-conditional-plsql-compilation/)。就像是

```
$IF $$debug_mode
$THEN
  Debug_pkg.logmsg(l_module_name,'Unexpected error : '|| SQLERRM, FND_LOG.LEVEL_WARNING);
$END 
```

在`$debug_mode`会话的`PLSQL_CCFLAGS`设置中设置的位置或

```
$IF package_name.debug_mode = 1
$THEN
  Debug_pkg.logmsg(l_module_name,'Unexpected error : '|| SQLERRM, FND_LOG.LEVEL_WARNING);
$END 
```

where`package_name.debug_mode`是一个包级变量，指示代码是否应在调试模式下编译。

同样，根据您使用的 Oracle 版本，您可以将调试模式签入`debug_pkg.logmsg`并依赖编译器自动确定内联调用（消除过程调用开销）或指示编译器使用编译指示内联调用`INLINE`。这是一篇更详细地讨论[PL/SQL 中的内联的文章。](http://www.oracle-developer.net/display.php?id=502)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:12:46.973

感谢 Justin Cave 提供的链接[http://www.oracle-developer.net/display.php?id=502](http://www.oracle-developer.net/display.php?id=502)。我现在最终这样做了，

```
 PROCEDURE debug_msg(txt VARCHAR2) 
  IS 
  BEGIN  
      IF (debug mode is on) THEN
        debug_pkg.logmsg('Module', txt , LEVEL_WARNING);
      END IF;
  END; 
```

要内联上述过程，您需要执行此操作。

```
PRAGMA INLINE(debug_msg, 'YES'); 
```

然而 inline 只是对编译器的一个请求，它可能是内联的，也可能不是内联的。此外，内联的过程需要在同一个包中定义。

# java - 将图像从数据库同步到 Web 服务和移动应用程序的更好解决方案是什么

> ID：15100042
> 
> 赞同：0
> 
> 时间：2013-02-26T21:51:08.653
> 
> 标签：java, json, base64, blob, sync

根据路径同步图像的更好解决方案是什么：

*   数据库 - Web 服务 - 移动应用程序

在我的数据库中，我有一个**blob 字段**作为图像。所以，我需要为网络服务和移动应用程序传输图像。

我找到了解决方案（尝试），但大图像总是内存不足。解决方案如下：

*   在我的 Web 服务中，我使用 json API 来存储要集成的 blob 图像。看，我将图像创建为 base64，这对于小图像没有问题，但大图像（2000 个项目）会触发内存不足。所以，我的代码如下：

    ```
    public void getImages(String date) throws Exception {

    JSONObject jsonObject = new JSONObject();
    JSONArray jsonArray = new JSONArray();

    if (date != null)  {

        try {
            Class.forName(DRIVER);
            connection = DriverManager.getConnection(URL, USER, PASS);

            Statement s = connection.createStatement();
            ResultSet r = s.executeQuery("select * from images");

            while (r.next()) {
                JSONObject o = new JSONObject();

                byte[] imageBytes = r.getBytes("image");
                String imageBase64 = DatatypeConverter.printBase64Binary(imageBytes);
                o.put("image", imageBase64);

                jsonArray.put(o);
            }

            jsonObject.put("images", jsonArray);

        } catch (SQLException e) {
            System.out.println(e);
        }
    }
    } 
    ```

*   在我的移动应用程序中，在显示图像后读取 json 并将 base64 解码为每个图像。所以，我不需要将图像存储在移动磁盘或网络服务磁盘中。

移动应用程序将离线工作。有什么想法可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:47:52.630

> 不要将图像直接编码为 JSON。而是返回一个单独提供图像的服务器 URL。

@Alan Krueger 的提示。这是更好的解决方案，在 json 中编码图像是个坏主意。

# emacs - 分离和重新附加到 Emacs 服务器

> ID：15100045
> 
> 赞同：2
> 
> 时间：2013-02-26T21:51:23.700
> 
> 标签：emacs

我已经在使用[Emacs 服务器](http://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html)解决文档中描述的一些问题，例如，我`(server-start)`的`.emacs`init 文件中有，并且我已经设置了`EDITOR`env。变量，`emacsclient`以便`git`其他程序在需要我输入文本或记录消息时不会打开新的 Emacs 实例。到目前为止，这工作得很好。

我现在想知道是否可以将 Emacs 服务器用于其他用途：我经常通过`ssh -X`会话远程启动 Emacs。有时我需要关闭`ssh`会话（例如，我需要重新启动本地计算机）并重新连接。如果不是为此完全关闭 Emacs，我可以从 Emacs**分离，然后再****重新连接**，那就太好了。

Emacs 服务器可以做到这一点吗？我相信根据我在网上阅读的内容，答案是肯定的，但是：

### 我的问题：

如何安全地从 Emacs 服务器**分离并稍后****重新连接**？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T21:58:24.043

如果直接从 SSH 会话中启动 Emacs，则无法正常分离，因为 Emacs 进程成为远程 shell 创建的进程组的一部分，如果 shell 存在，它将终止其进程组中的所有进程。

但是，您可以先在守护程序模式下启动 Emacs，使用`emacs --daemon`. Emacs 将加载配置，启动编辑服务器（即使`(server-start)`您的配置中没有显式配置），然后从终端分离。这个 Emacs 守护进程将在不同的 SSH 会话中保持活动状态。

随后，仅用于`emacsclient`连接到正在运行的守护程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-14T11:26:50.697

`emacs --daemon`或`(server-start)`在`.emacs`.

下次使用`emacsclient file`，`emacsclient -n file`或`emacsclient -c`仅用于连接。

像往常一样离开附加`C-x C-c`。

# javascript - 粘贴文本时出现奇怪的消息

> ID：15100047
> 
> 赞同：9
> 
> 时间：2013-02-26T21:51:26.347
> 
> 标签：javascript, windows, wordpress

我不知道为什么会发生这种情况，但我不再能够在我的网站（在 Wordpress 中）上复制文本，有点。我可以粘贴文本，但不能复制文本。我可以去任何其他网站复制和粘贴文本，但不能靠我自己。两种复制方法（右键单击复制或 Windows 上的 control + C）在我的网站上都不起作用。但无论如何，这个问题只适用于文本字段，如样式编辑器、标题编辑器、仪表板上的“快速按下”文本字段，甚至我网站的搜索字段。所以我尝试了以下方法来解决这个问题：

1）禁用我的键盘驱动程序并重新启动我的电脑

2) 卸载并重新安装我的互联网浏览器 - Google Chrome

以上都没有奏效。但就在最近，II 能够`<script>`在我的 header.php 文件中复制和粘贴文本位。我无法复制任何其他文本，除了这个和其他一些代码片段......这很奇怪。但无论如何，这是我复制的代码/文本，也是我粘贴代码后得到的：

**我复制的原文：**

`<script src="http://code.jquery.com/jquery-1.9.0-min.js" type="text/javascript"></script>`

**当我在文本上方粘贴原始文本时得到的文本**：

`See more at: http://www.mywebsite.com/wp-admin/theme-editor.php?file=header.php&theme=mytheme2%2Fthemez2#sthash.WVvNmB7H.dpuf`

这可能是我网站的潜在黑客或入侵者吗？在这一点上，我看不到这个非常奇怪的错误的任何其他解释。如果有人可以帮助修复我网站的复制和粘贴功能，或者对这个奇怪的问题做出解释，那真的意义重大。

**更新：**

此问题仅在 Google Chrome 和 Safari 中存在......不是 Mozilla 或 IE。而且我剥离了我所有的java代码，问题仍然存在希望有帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T21:58:28.637

我在 thehollywoodreporter.com 工作。由于这次 sharethis 更改，我们的编辑无法再使用 Drupal 6 CMS。当他们试图从 cms 中的一个字段复制到另一个字段时，它会获取字符串并将其转换为：

```
See more at: <text pasted>&action=edit#sthash.mOyzIP9P.dpuf 
```

我认真地认为我们的网站已经被黑了大约 10 分钟。幸运的是，开发社区开始发布它，并指出这是新添加的 CopyNShare 功能 sharethis。我注释掉了 sharethis 代码，以便我们的编辑可以继续发布，我们与 sharethis 联系人通了电话，他们让我们更改：

```
 <script type="text/javascript">var __st_loadLate=true;</script><script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script> 
```

到

```
<script type="text/javascript">var __st_loadLate=true;</script><script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>

<script type="text/javascript">stLight.options({publisher: "<your publisher key>", doNotHash:false, doNotCopy:true,hashAddressBar:false});</script> 
```

显然，他们对代码进行了更改，因此您必须添加“doNotCopy：true”，以便在您在站点中剪切和粘贴时不会添加此哈希！这是他们的新“产品”CopyNShare。

我告诉他们“我不认为像这样将这个功能作为新的默认设置推出是受欢迎的举动。我认真地认为我们的网站已经被黑了 10-15 分钟。不好玩。”

他们回答说：“我绝对理解你的担忧，因为我们对酒吧服务团队有同样的担忧。我们将进行某种‘事后分析’，以确保我们在未来推出新产品功能时改变这一流程。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T12:54:06.890

正如@Punit Pandey 建议的那样，ShareThis 插件今天（2013 年 2 月 27 日）开始执行此操作而没有任何警告。您可以通过在 ShareThis 代码初始化后添加以下 JavaScript 来禁用此新功能：

```
stLight.options({doNotCopy:true}); 
```

可在此处找到此新功能的说明：[ShareThis CopyNShare 设置](http://support.sharethis.com/customer/portal/articles/961937-copynshare-settings "ShareThis CopyNShare 设置")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T07:10:33.480

由于 ShareThis 插件，这发生在我的网站上。ShareThis 添加了这个标签 sthash 和一个以 dpuf 结尾的标识，我猜是为了标识网站。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T02:02:58.750

问题源于 Wordpress 中名为“Digg Digg”的插件。我只是停用了这个插件，没有复制和粘贴问题。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-13T08:32:44.013

我通过在第 467 行更改 modules/sharethis/sharethis.module 在 Drupal 7 中解决了这个问题

```
 // Provide the publisher ID.
  $stlight = drupal_json_encode(array(
    'publisher' => $data_options['publisherID'],
    **'doNotCopy' => "true",**
  )); 
```

在模块配置页面中似乎没有任何选项可以关闭它。很烦人！

# c# - 认证后访问Web API上的方法

> ID：15100049
> 
> 赞同：3
> 
> 时间：2013-02-26T21:51:30.363
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我无法理解如何使用我的 api 以用户身份登录然后访问特定方法：

```
 public class UsersController : ApiController
    {
        [HttpPost]
        public HttpResponseMessage Login(LoginModel model)
        {
            HttpResponseMessage Response = new HttpResponseMessage();
            // check if all required fields are set
            if (ModelState.IsValid)
            {
                // authenticate user
                var success = Membership.ValidateUser(model.UserName, model.Password);

                if (success)
                {
                    FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1,
                            model.UserName,
                            DateTime.UtcNow,
                            DateTime.UtcNow.AddDays(1),
                            true,
                            "Api ticket",
                            FormsAuthentication.FormsCookiePath);

                    //Encrypt the ticket.
                    string encTicket = FormsAuthentication.Encrypt(ticket);

                    //Create the cookie.
                    CookieHeaderValue mycookie = new CookieHeaderValue(FormsAuthentication.FormsCookieName, encTicket);

                    // Set the cookie's expiration time to the tickets expiration time
                    if (ticket.IsPersistent)
                        mycookie.Expires = ticket.Expiration;

                    Response.Headers.AddCookies(new CookieHeaderValue[] { mycookie });

                    return Response;
                }
            }

            // If we got this far, something failed, redisplay form
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
            //return View(model);
            return Response;
        }
        [Authorize]
        [HttpGet]
        public string Get()
        {
            return User.Identity.Name;
        }
    } 
```

我正在使用 Fiddler，并使用我的 json 对象（包括我的用户名和密码）发布到此方法。如果我调试，一切顺利，我得到以下响应：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Expires: -1
Server: Microsoft-IIS/8.0
Set-Cookie: .ASPXAUTH=4FDA2F2D23381CD0C9AD901BB8A9FE808254502F3BB9442CF80B67F318E7000A1C8B395A97616DBE893317072957F7E1790D81F8648C8472EA80AE2A5E60BE81F08F8C0BF07F2F1EB8E1C661EE56FB61FEA7FCD4D7AABF2718B58690D4D82B049B16126D44368429331D8E3138D533D4; expires=Wed, 27 Feb 2013 21:45:48 GMT
X-AspNet-Version: 4.0.30319
X-SourceFiles: =?UTF-8?B?QzpcUHJvamVjdHNcRGVjaXNpb25NYWtlclxEZWNpc2lvbk1ha2VyXGFwaVx1c2Vyc1w=?=
X-Powered-By: ASP.NET
Date: Tue, 26 Feb 2013 21:45:48 GMT
Content-Length: 0 
```

从这里，我如何访问我的`Get()`方法而不返回 401 Unauthorized 错误？我确保将以下标头添加到我的 GET 中：

`Cookie: .ASPXAUTH=4FDA2F2D23381CD0C9AD901BB8A9FE808254502F3BB9442CF80B67F318E7000A1C8B395A97616DBE893317072957F7E1790D81F8648C8472EA80AE2A5E60BE81F08F8C0BF07F2F1EB8E1C661EE56FB61FEA7FCD4D7AABF2718B58690D4D82B049B16126D44368429331D8E3138D533D4`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:55:01.220

使用 cookie 进行安静的 API 访问并不是最好的方法。最好使用带有授权属性的令牌来实现安全性。这是一个很好的[`blog post`](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)说明如何编写自定义操作过滤器来实现这一点。

# error-handling - ZK 错误处理：在初始请求与 AJAX 请求期间

> ID：15100059
> 
> 赞同：1
> 
> 时间：2013-02-26T21:52:31.397
> 
> 标签：error-handling, zk

我想尽可能优雅地处理我的 webapp 中的错误。
当然，我有[RTFM](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/UI_Patterns/Error_Handling)并将以下内容添加到我的`web.xml`文件中：

```
<!-- WEB-INF/web.xml -->
<error-page>
    <exception-type>java.lang.Throwable</exception-type>    
    <location>/error.zul</location>    
</error-page> 
```

这是基本的[Java webapp 错误处理](http://weblogs.java.net/blog/crazybob/archive/2004/02/exception_handl.html)，效果很好。由于 ZK 是一个 AJAXy 框架，因此在呈现页面后可能会引发错误，因此 ZK 也为此提供了自己的错误处理：

```
<!-- zk.xml -->
<error-page>
    <exception-type>java.lang.Throwable</exception-type>    
    <location>/zk/common/error.zul</location>    
</error-page> 
```

这也很好用，但是，它们玩得不好。当在 AU 请求期间引发错误时，ZK 错误消息会按原样显示，但我得到以下信息`stderr`：

```
Feb 26, 2013 10:37:04 PM org.zkoss.zk.ui.http.DHtmlLayoutServlet handleError:273
WARNING: Failed to load the error page: /zk/common/error.zul
java.lang.IllegalStateException: getOutputStream() has already been called for this response
    at org.apache.catalina.connector.Response.getWriter(Response.java:611)
    at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)
    at javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:112)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.process(DHtmlLayoutServlet.java:168)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.handleError(DHtmlLayoutServlet.java:267)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.doGet(DHtmlLayoutServlet.java:138)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.doPost(DHtmlLayoutServlet.java:149)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:416)
    at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:270)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:680)
Feb 26, 2013 10:37:04 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet auEngine threw exception
java.lang.IllegalStateException: getOutputStream() has already been called for this response
    at org.apache.catalina.connector.Response.getWriter(Response.java:611)
    at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)
    at javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:112)
    at javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:112)
    at org.zkoss.web.servlet.dsp.ServletDspContext.getOut(ServletDspContext.java:113)
    at org.zkoss.web.servlet.dsp.impl.TextNode.interpret(TextNode.java:44)
    at org.zkoss.web.servlet.dsp.impl.RootNode.interpret(RootNode.java:51)
    at org.zkoss.web.servlet.dsp.impl.RootNode.interpret(RootNode.java:60)
    at org.zkoss.web.util.resource.DspExtendlet.service(DspExtendlet.java:92)
    at org.zkoss.web.util.resource.ClassWebResource.web0(ClassWebResource.java:583)
    at org.zkoss.web.util.resource.ClassWebResource.web(ClassWebResource.java:569)
    at org.zkoss.web.util.resource.ClassWebResource.service(ClassWebResource.java:260)
    at org.zkoss.zk.au.http.DHtmlUpdateServlet.doGet(DHtmlUpdateServlet.java:392)
    at org.zkoss.zk.au.http.DHtmlUpdateServlet.doPost(DHtmlUpdateServlet.java:464)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at org.zkoss.web.servlet.Servlets.include(Servlets.java:882)
    at org.zkoss.zk.ui.http.Utils.handleError(Utils.java:143)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.handleError(DHtmlLayoutServlet.java:278)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.doGet(DHtmlLayoutServlet.java:138)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.doPost(DHtmlLayoutServlet.java:149)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:416)
    at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:270)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:680)
Feb 26, 2013 10:37:04 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet zkLoader threw exception
java.lang.IllegalStateException: getOutputStream() has already been called for this response
    at org.apache.catalina.connector.Response.getWriter(Response.java:611)
    at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)
    at javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:112)
    at javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:112)
    at org.zkoss.web.servlet.dsp.ServletDspContext.getOut(ServletDspContext.java:113)
    at org.zkoss.web.servlet.dsp.impl.TextNode.interpret(TextNode.java:44)
    at org.zkoss.web.servlet.dsp.impl.RootNode.interpret(RootNode.java:51)
    at org.zkoss.web.servlet.dsp.impl.RootNode.interpret(RootNode.java:60)
    at org.zkoss.web.util.resource.DspExtendlet.service(DspExtendlet.java:92)
    at org.zkoss.web.util.resource.ClassWebResource.web0(ClassWebResource.java:583)
    at org.zkoss.web.util.resource.ClassWebResource.web(ClassWebResource.java:569)
    at org.zkoss.web.util.resource.ClassWebResource.service(ClassWebResource.java:260)
    at org.zkoss.zk.au.http.DHtmlUpdateServlet.doGet(DHtmlUpdateServlet.java:392)
    at org.zkoss.zk.au.http.DHtmlUpdateServlet.doPost(DHtmlUpdateServlet.java:464)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at org.zkoss.web.servlet.Servlets.include(Servlets.java:882)
    at org.zkoss.zk.ui.http.Utils.handleError(Utils.java:143)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.handleError(DHtmlLayoutServlet.java:278)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.doGet(DHtmlLayoutServlet.java:138)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.doPost(DHtmlLayoutServlet.java:149)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:416)
    at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:270)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:680)
Feb 26, 2013 10:37:04 PM org.apache.catalina.core.StandardHostValve custom
SEVERE: Exception Processing ErrorPage[exceptionType=java.lang.Throwable, location=/error.zul]
java.lang.IllegalStateException: getOutputStream() has already been called for this response
    at org.apache.catalina.connector.Response.getWriter(Response.java:611)
    at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)
    at javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:112)
    at javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:112)
    at org.zkoss.web.servlet.dsp.ServletDspContext.getOut(ServletDspContext.java:113)
    at org.zkoss.web.servlet.dsp.impl.TextNode.interpret(TextNode.java:44)
    at org.zkoss.web.servlet.dsp.impl.RootNode.interpret(RootNode.java:51)
    at org.zkoss.web.servlet.dsp.impl.RootNode.interpret(RootNode.java:60)
    at org.zkoss.web.util.resource.DspExtendlet.service(DspExtendlet.java:92)
    at org.zkoss.web.util.resource.ClassWebResource.web0(ClassWebResource.java:583)
    at org.zkoss.web.util.resource.ClassWebResource.web(ClassWebResource.java:569)
    at org.zkoss.web.util.resource.ClassWebResource.service(ClassWebResource.java:260)
    at org.zkoss.zk.au.http.DHtmlUpdateServlet.doGet(DHtmlUpdateServlet.java:392)
    at org.zkoss.zk.au.http.DHtmlUpdateServlet.doPost(DHtmlUpdateServlet.java:464)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at org.zkoss.web.servlet.Servlets.include(Servlets.java:882)
    at org.zkoss.zk.ui.http.Utils.handleError(Utils.java:143)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.handleError(DHtmlLayoutServlet.java:278)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.doGet(DHtmlLayoutServlet.java:138)
    at org.zkoss.zk.ui.http.DHtmlLayoutServlet.doPost(DHtmlLayoutServlet.java:149)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:416)
    at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:270)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:680) 
```

同样，这是 ZK 特定错误处理程序 (at `/zk/common/error.zul`) 拦截错误的时候。根据堆栈跟踪，似乎错误会传播到正常的 Java webapp 错误处理程序 (at `/error.zul`)。

如果第一次呈现页面时发生错误，则显示正常的错误处理程序（位于`/error.zul'）而不是按预期显示页面，不会记录任何问题。

关于如何解决这个问题的任何想法？我可以/应该在我的 ZK 错误处理程序上做些什么来阻止错误传播吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:49:25.033

您可以使用 Initiator 来处理 ZK Loader 呈现页面时发生的异常。使用的标签是

```
<?init class="com.foo.MyInitial"?> 
```

您需要实现[Initiator](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zk/ui/util/Initiator.html)。

希望这可以帮助。

参考：[链接](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/UI%20Patterns/Page%20Initialization)

# javascript - d3.js 强制定向布局受形状约束

> ID：15100060
> 
> 赞同：9
> 
> 时间：2013-02-26T21:52:34.340
> 
> 标签：javascript, d3.js, force-layout

我想知道是否有一种方法可以使用 d3.js 创建一个强制定向布局，并以任意形状限制它

*   所有节点均等地分布**在**形状内，并且
*   边界和节点之间的距离等于节点之间的距离

我希望那里已经有这样的解决方案。否则我的想法是从力导向布局开始，并在每次迭代中检查节点到边界的距离。您有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:58:51.977

你的想法也是我的。在刻度功能中，您可以添加额外的力。这是我的建议（未经测试）：

```
force.on('tick', function(e) {

  node
    .each(calcBorderDistance)
    .attr('transform', function(d) {
      d.x -= e.alpha*(1/Math.pow(d.borderDistance.x,2);
      d.y -= e.alpha*(1/Math.pow(d.borderDistance.y,2);
      return 'translate(' + d.x + ',' + d.y + ')'; // Move node
    });
});

function calcBorderdistance(d) {
  // Insert code here to calculate the distance to the nearest border of your shape
  var x = ..., y = ...;
  d.borderDistance = {'x':x,'y':y};
} 
```

[根据 excelent paper Drawing Graphs Nicely using Simulated Annealing](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.20.5663&rep=rep1&type=pdf)中的公式，我有到最近边界函数的反二次距离。下图说明了本文中的方法如何影响以框为界的绘图节点：

![在此处输入图像描述](../Images/d6f4d81509ca175bdf80de08e747aeb3.png)

这张图片说明了具有不同约束的情况，涉及节点之间的链接：

![在此处输入图像描述](../Images/9ad544bcc261f2d6f98ab60188445dde.png)

# python - Python 正则表达式 - 搜索和查找所有之间的区别

> ID：15100064
> 
> 赞同：7
> 
> 时间：2013-02-26T21:52:53.520
> 
> 标签：python, regex

我正在尝试在 URL 字符串上使用 python 正则表达式。

```
id= 'edu.vt.lib.scholar:http/ejournals/VALib/v48_n4/newsome.html'
>>> re.search('news|ejournals|theses',id).group()
'ejournals'
>>> re.findall('news|ejournals|theses',id)
['ejournals', 'news'] 
```

根据[http://docs.python.org/2/library/re.html#finding-all-adverbs](http://docs.python.org/2/library/re.html#finding-all-adverbs)上的文档，它说 search() 匹配第一个并找到所有匹配字符串中所有可能的匹配项。

我想知道为什么“新闻”没有被搜索捕获，即使它是在模式中首先声明的。

我使用了错误的模式吗？我想搜索字符串中是否出现任何这些关键字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:55:07.770

你倒着想。正则表达式遍历目标字符串寻找`"news"`OR `"ejournals"`OR`"theses"`并返回它找到的第一个。在这种情况下`"ejournals"`，首先出现在目标字符串中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T21:54:48.483

该`re.search()`函数在第一次出现满足您的条件后停止，而不是模式中的第一个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-19T14:56:24.440

***请注意， search***和***findall***之间还有一些其他差异，此处未说明。例如：

[python-regex 为什么 findall 一无所获，但搜索有效？](https://stackoverflow.com/questions/45772736/python-regex-why-findall-find-nothing-but-search-works)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-18T14:03:58.817

`id='edu.vt.lib.scholar:http/ejournals/VALib/v48_n4/newsome.html'

> > > re.search('news|ejournals|theses',id).group() 'ejournals'

# re.search -> 在字符串中搜索第一次出现然后退出。

> > > re.findall('news|ejournals|theses',id) ['ejournals', 'news']

# re.findall -> 在字符串中搜索所有匹配项并以列表形式返回。

# facebook - 您是否需要用户访问令牌才能访问 Facebook 图表人物搜索？

> ID：15100068
> 
> 赞同：0
> 
> 时间：2013-02-26T21:53:03.607
> 
> 标签：facebook, facebook-graph-api

是否可以使用应用程序访问令牌来做到这一点？我想制作一个与匿名性有很大关系的应用程序，所以如果我不需要，我不想让用户通过 facebook 登录来运行。用户访问令牌是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:00:32.130

过去可以在没有令牌的情况下进行搜索，但现在您似乎必须使用用户令牌。我已经尝试使用应用访问令牌，它只是返回一个错误，说需要用户访问令牌。

# objective-c - 从模型类返回对象

> ID：15100072
> 
> 赞同：0
> 
> 时间：2013-02-26T21:53:16.663
> 
> 标签：objective-c, object, nsmutabledictionary

我希望我不要在这里刮胡子！我尝试在我的模型类中调用一个方法并将一个对象返回给调用控制器。

我的 AppDelegate.h：

```
#import <Cocoa/Cocoa.h>
@class ResultItem;

@interface AppDelegate : NSObject <NSApplicationDelegate>{
    ResultItem *ri;
}
-(void)calculateResults;
@end 
```

我的 AppDelegate.m：

```
#import "AppDelegate.h"
#import "ResultItem.h"

@implementation AppDelegate
    //other stuff

- (void)calculateResults{
    self->ri = [[ResultItem alloc]init];         //ResultItem is my model
    [xx calculateUniformDistribution:(double)x1
            withxMinus:(double)x2
            withxAvg:(double)x3
            withCount:(double)numberCounter];
} ... 
```

我的 ResultItem.h

```
#import <Foundation/Foundation.h>
@interface ResultItem : NSObject

-(NSMutableDictionary *)calculateUniformDistribution:(double)xPlus
        withxMinus:(double)xMinus
        withxAvg:(double) xAvg
        withCount:(int) count; 
```

我的 ResultItem.m

```
#import "ResultItem.h"
@implementation ResultItem

- (NSMutableDictionary *)calculateUniformDistribution:(double)xPlus
        withxMinus:(double)xMinus
        withxAvg:(double)xAvg
        withCount:(int)count{

NSMutableArray *dimensionRandomArray = [[NSMutableArray alloc] init];
NSMutableDictionary *newResultItem = [[NSMutableDictionary alloc]init];

//calculation loop

[newResultItem setValue:[NSNumber numberWithDouble:max] forKey:@"maxValue"];
[newResultItem setValue:[NSNumber numberWithDouble:min] forKey:@"minValue"];
[newResultItem setValue:[NSNumber numberWithDouble:avg] forKey:@"averageValue"];
[newResultItem setValue:dimensionRandomArray forKey:@"randomValueArray"];

return newResultItem;
} 
```

ResultItem 方法被调用得很好。我想创建一个`NSMutableDictionary`对象，稍后我需要在我的 AppDelegate 中处理它。

我的问题：

1.  之后如何访问`newResultItem`我的`AppDelegate`方法。
2.  我不知道如何`newResultItem`在我的`AppDelegate`方法中使用键添加更多值`calculateResults`。有人可以帮我吗？
3.  谁是`newResultItem`对象`ResultItem`的实际所有者`AppDelegate`？
4.  像这样设置代码是否看起来不对。我尽量遵循 MVC 模式。

请不要打我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:37:42.417

理想情况下，您的 ResultsItem 应该只封装属性而没有计算方法。这是一个简单的示例（要添加更多值，您可以使用这样的字典）：

```
 @implementation  ResultItem  
   @synthesize max, min, ...;     
   - (id)initWithDictionary:(NSDictionary*)dictionary {
      if ((self = [super init])) {
          self.max = [dictionary objectForKey:@"maxValue"];
          self.min = [dictionary objectForKey:@"minValue"];
          ......
                     }
      return self; 
    }
    @end 
```

接下来我将创建一个计算类，您可以在其中执行所有计算方法，像这样创建 ResultItem 对象

```
ResultItem *resultItem = [[ResultItem alloc] initWithDictionary:yourDictionary]; 
```

并将此对象返回给您的 AppDelegate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:37:28.613

首先，我建议摆脱 ResultItem 类。我会用控制器类中的方法替换它 - 在您的情况下，将 calculateUniformDistribution 方法移动到 AppDelegate。或者至少将 calculateUniformDistribution 移动到适当的模型类（您的应用程序处理汽车、公共汽车、飞机等的实际对象）。

至于实际返回字典和添加值，这是一个简化的示例，假设您坚持当前的模式：

在 AppDelegate.m

```
self.ri = [[ResultItem alloc] init];
NSMutableDictionary* dict = [self.ri calculateUniformDistribution:(double)x1
        withxMinus:(double)x2
        withxAvg:(double)x3
        withCount:(double)numberCounter];
[dict setValue:[NSNumber numberWithDouble:1.0] forKey:@"additionalKey"]; 
```

在 ResultItem.m 中

```
NSMutableArray* dimensionRandomArray = [[NSMutableArray alloc] init];
NSMutableDictionary* returningDict = [[NSMutableDictionary alloc] init] autorelease];

//calculation loop

[newResultItem setValue:[NSNumber numberWithDouble:max] forKey:@"maxValue"];
[newResultItem setValue:[NSNumber numberWithDouble:min] forKey:@"minValue"];
[newResultItem setValue:[NSNumber numberWithDouble:avg] forKey:@"averageValue"];
[newResultItem setValue:dimensionRandomArray forKey:@"randomValueArray"];
[dimensionRandomArray release];

return newResultItem; 
```

注意returningDict 的自动释放和dimensionRandomArray 的释放。此外，您必须在之后释放 self.ri。如果你想在 AppDelegate 中保留 dict，你必须添加retain-release。

# hibernate - JPA ElementCollection 仅在复合键的一列上加入

> ID：15100073
> 
> 赞同：1
> 
> 时间：2013-02-26T21:53:19.347
> 
> 标签：hibernate, jpa-2.0

持久性框架 JPA 2.0，以 Hibernate 4.0 作为提供者。

表 X 将 A、B 和 C 列作为复合主键，没有其他列。表 Y 有 C、D 和 E 列。E 是主键。我希望 X 的实体具有来自 Y 的与列 C 匹配的实体集合。这是多对多关系。JPA 关系是不可能的，因为它需要一个连接表。我一直在尝试让 ElementCollection 工作，但它一直在尝试在 A、B 和 C 上进行连接。如果我将 ReferencedColumnName 放在 CollectionTable 的 JoinColumn 中，那么它会抱怨 ReferencedColumnName 没有映射到单个属性。我能找到的每个来源都说这不受支持。有几个重要的条件。首先，实体是只读的。不会进行任何更新或插入。其次，我无法对数据库结构进行任何更改。

鉴于所有这些，我想到了两个想法。

第一个是从代码中创建连接。换句话说，查询 XA = 'a' 然后遍历查询 XC = YC 的结果

第二个是创建一个 Z 实体，将字段 A 作为主键，然后在其中使用表 X 作为连接表与表 Y 建立多对多关系。

您将如何处理这种情况？

# mysql - 可以在 Rails 中配置模型以从不同的数据源中提取数据吗？

> ID：15100076
> 
> 赞同：0
> 
> 时间：2013-02-26T21:53:35.220
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, mongodb, model

我们的应用程序需要从不同的数据源中提取数据：一个是 MySQL 数据库，另一个是 Mongo 数据库。

是否可以配置模型以从不同的数据源中提取数据并利用 Rails.cache 进行快速查询？目前，Rails 中的配置文件似乎只支持单一数据源。

我们在 Rails 3.0.6 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:23:45.783

Rails 提供了使用多个数据库的约定。让我向您展示如何使用 Mango 和 Mysql。

将 mysql 视为主数据库。所以 mysql 的配置进入 config/database.yml

```
config/database.yml
  development:
    #dev config goes here
  test:
    #test config goes here
  production:
    #production config goes here 
```

现在考虑 Mongo。在 config/mongo_database.yml 中为 Mongo 放置另一个配置

```
 config/mongo_database.yml
    development:
      #dev config goes here
    test:
      #test config goes here
    production:
      #production config goes here 
```

现在我们将用户模型连接到 mysql：

```
 class User < ActiveRecord::Base
     #Active record by default connects with the primary database configuration
   end 
```

现在我们将 Product 模型连接到 Mongo：

```
 class Product
     include MongoMapper::Document
   end 
```

您还需要在 config/initializers/mongo.rb 中初始化 mongo 设置

```
config/intializers/mongo.rb 
Mongoid.configure do |config|
  config = YAML.load_file(Rails.root.join("config", "mongo_database.yml"))[Rails.env]
  host = config["host"]
  config.master = Mongo::Connection.new.db(config["database"])
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:01:41.183

**是的。**

对于 MySQL：

```
class Example < ActiveRecord::Base
  ...
end 
```

对于蒙哥：

```
class ExampleTwo
  include MongoMapper::Document
  ...
end 
```

# python - 消息队列——我怎么知道我是谁？

> ID：15100083
> 
> 赞同：2
> 
> 时间：2013-02-26T21:54:03.560
> 
> 标签：python, flask, rabbitmq, celery, nose

我有一个 Flask 应用程序，它使用 Nose 在特定目录中发现和运行一系列测试。测试需要很长时间才能运行，所以我想在事情发生时向用户报告进度。

我使用 Celery 创建了一个运行测试的任务，这样我就可以立即返回并开始显示结果页面。现在我需要开始报告结果。我想在测试中我可以在队列上放一条消息，上面写着“我已经完成了第 N 步”。

我知道 Celery 有任务上下文，我可以用它来确定要写入哪个队列，但测试不是任务的一部分，它是从任务调用的函数。我也不能使用烧瓶会话，因为当测试运行移动到任务时，上下文就消失了。

我见过几种进行数据驱动鼻子测试的方法，例如测试生成器或nose-testconfig，但这不符合消息队列名称是动态的并且可能有多个线程运行相同测试的要求。

**所以，我的问题是：** 我如何告诉测试它对应于特定的芹菜任务，即：开始测试的那个，所以我可以在正确的消息队列上报告它的状态？

# r - Grouped geom_boxplot from calculated values with mean

> ID：15100084
> 
> 赞同：3
> 
> 时间：2013-02-26T21:54:03.043
> 
> 标签：r, ggplot2

I created some grouped boxplots, basically for each dimension on the x axis I am showing various groups. Because my dataset is quite large, I had to precalculate the values for the boxes as ggplot did not have enough memory (I used `ddply` and did it in pieces).

I believe this is beter than just bar charts of the averages as it shows some of the variability.

I want 2 modifications, one was to not show the whisker lines, and I have done that by setting ymin=lower and ymax=upper.

I also wanted to add the means as well, but they show all in the center of each X category, and of course I want them each aligned with its box.

to make it easier on anyone helping, I recreated the same chart using mtcars - I tried `position = "dodge"` and "identity" with no change

Anyone knows how to do this? I searched and did not find a way. I am also attaching a picture of my latest chart. Code is below

```
data(mtcars)
data <- as.data.frame(mtcars)
data$cyl <- factor(data$cyl)
data$gear <- factor(data$gear)

summ <- ddply(data, .(cyl, gear),summarize, lower=quantile(mpg,probs=0.25,na.rm=T), middle=quantile(mpg,probs=.5,na.rm=T),upper=quantile(mpg,probs=.75,na.rm=T),avg=mean(mpg,na.rm=T))

p2 <- ggplot(summ, aes(x = cyl, lower = lower, middle = middle, upper = upper,fill=gear,ymin=lower,ymax=upper))+geom_boxplot(stat = "identity")
p2 <- p2 + geom_point(aes(x = cyl, y=avg, color=gear),color="red",position="dodge")
p2 
```

![enter image description here](../Images/76050b844dc312e04f3847fea49e8766.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:45:00.040

The problem is that the width of the points is not the same as the width of the box plots. In that case you need to tell `position_dodge` what width do use. `?position_dodge` gives a simple example of this using points and error bars, but the principle is the same for points and box plots. In your example, replacing `position="dodge"` with `position=position_dodge(width=0.9)` will dodge the points by the same amount as the box plots.

# oracle11g - 如何在动态 where 子句中创建列名？TO_NUMBER（列名）

> ID：15100086
> 
> 赞同：0
> 
> 时间：2013-02-26T21:54:04.573
> 
> 标签：oracle11g

当用户必须输入各种标准进行搜索时，我目前正在尝试创建一个动态 Select 语句。

目前，除了最重要的部分之外，我已经完成了声明的每个部分。

我正在尝试做这样的事情：

```
selStmt := 'SELECT column_one, column_2, column_3
            FROM nerf
whereClause := ' WHERE TO_NUMBER('''|| column_one ||''') <= '''|| userInput ||''''; 
```

但是，在执行此操作时，我的 SELECT 语句的 WHERE 语句不准确，如我的输出行所示：

```
WHERE TO_NUMBER('') <= '5'; 
```

我尝试了各种带引号的解决方案，但最终出现 ORA-00905 缺少标识符错误，或者得到 ORA-00911：无效字符错误。

在这一点上，我不太确定如何解决这个问题。

任何有用的帮助都会提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:55:52.520

这应该有效：

```
selStmt := 'SELECT column_one, column_2, column_3 FROM nerf';
whereClause := ' WHERE TO_NUMBER(column_one) <= TO_NUMBER('''|| userInput ||''')'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:07:51.590

出于某种原因，Oracle 使用单引号来分隔字符串和转义字符，因此 using`''`是 Oracle 在字符串中添加引号的指令。例子：

```
'This is a string with a quote here: '' and then it ends normally' 
```

将表示为

```
This is a string with a quote here: ' and then it ends normally 
```

在您的示例中，您将结束`WHERE`正在构建的子句，然后连接一个名为 的 PL/SQL 变量标识符`column_one`：

```
' WHERE TO_NUMBER('''|| column_one ||''') 
```

...并使用`NULL`标识符的值`column_one`表示为

```
 WHERE TO_NUMBER('') 
```

大概你想`column_one`从查询内部引用，而不是从同名的 PL/SQL 变量中引用，所以你应该像这样删除它周围的引号：

```
whereClause := ' WHERE TO_NUMBER(column_one) <= TO_NUMBER('''|| userInput ||''')'; 
```

在 Oracle 中转义字符串常常令人恼火——如果你有一个良好的 IDE，并且像 TOAD 或 SQL*Developer 一样具有良好的语法高亮显示，它会很有帮助。

# javascript - gmpanel 移动到标记坐标 - EXTJS 4

> ID：15100087
> 
> 赞同：1
> 
> 时间：2013-02-26T21:54:11.150
> 
> 标签：javascript, google-maps, extjs, extjs4

```
 function addDoctorLocation(options) 
    {
        var gm = Ext.getCmp('mygooglemap');
        var mpoint = new google.maps.LatLng(options.lat,options.lng);
        var marker = gm.addMarker(mpoint,options.marker,false,false, options.listeners);
   // move the map to the mark and adjust the zoom level at here
    }

        tree.on('checkchange', function(node){
            var data = node.data;

            if (data.checked == true){

            lati = 5.391788482666016; 
            longi = 100.29693603515625; 

            var options = {
            lat:lati,
            lng:longi,
            marker: {title:"Hello World!"},
            listeners: {
                         click: function(e){

                                             }
                        }     
            }     
            addDoctorLocation(options);  
            }       
        }) 
```

## 问题

如何将地图移动到那里的标记并调整缩放级别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T10:33:27.213

```
gm.setCenter(mpoint);
gm.setZoom(8); 
```

在此处查看 google.maps.Map 类的方法部分：[https ://developers.google.com/maps/documentation/javascript/reference?hl=en#Map](https://developers.google.com/maps/documentation/javascript/reference?hl=en#Map)

# c# - 如何为 WebClient() 设置暂停功能？

> ID：15100090
> 
> 赞同：0
> 
> 时间：2013-02-26T21:54:19.063
> 
> 标签：c#, multithreading, youtube, webclient, onpause

我正在制作一个 YouTube 下载器，我已经完成了一切 [应用程序现已完成] 但这让我很恼火；

如何制作东西可以暂停这个下载器

```
try
{
    wc = new WebClient();
    wc.DownloadProgressChanged += new DownloadProgressChangedEventHandler(wc_DownloadProgressChanged);
    wc.DownloadFileCompleted += new AsyncCompletedEventHandler(wc_DownloadFileCompleted);
    CancelBtn.Enabled = true;
    wc.DownloadFileAsync(new Uri(link), dwnFile);
    ResultLabel.Visible = false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:20:24.363

如果您想继续使用，则不能`WebClient`；否则，您将需要使用一种方法来更好地控制字节流，例如`WebRequest`（您可以管理响应流）或套接字。

# mongodb - 几次后猫鼬增量值错误

> ID：15100091
> 
> 赞同：2
> 
> 时间：2013-02-26T21:54:18.880
> 
> 标签：mongodb, express, mongoose

我在 MongoDB 中有一个产品集合。运行 Express 3 和 Mongoose 的应用程序。我正在进行拍卖，当我尝试将产品的价格增加 0.01 时，它工作正常，直到第 6 次，然后转到“1000.0699999999999”而不是 1000.07。知道为什么吗？再点击几下后，它将是：1000.1699999999998 等等。

这是我的更新功能：

```
app.post('/auctions/add', function(req, res){

  //Get username
  var user = req.session.username ;

  //Product ID from form
  var productID = req.body.product_id ;

  //Find and update product
  //Products.update( { id: productID }, { price: this.price + 0.01 } ).exec() ;
  Products.update( { id: productID }, {$inc: { price: .01 }, user_bidding: { username: user, timeBid: new Date() }}, function(err, numberAffected, raw) {

    console.log(err);
    console.log(numberAffected);
    console.log(raw);

  } ) ;

  //redirect to home
  res.redirect( '/' );

}) ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:17:41.110

这不是猫鼬问题..这就是javascript的工作原理......在javascript中`0.1 + 0.2 !== 0.3`..这是因为浮点运算不精确（或者至少不是您所期望的）..但是浮点运算中的整数运算是精确的..您可以将值转换为整数，求和，然后除以保持原样..

例子。

`(0.1 * 10 + 0.2 * 10)/10 === 0.3`

所以在你的情况下

```
var price = 1000; 
price = (price*100 + 0.01*100)/100 // => 1000.01; 
```

**编辑：**

顺便说一句，以美分工作的建议真的更好..你应该考虑到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T01:28:15.547

我认为 price.toFixed(3) 是更好的解决方案。没有美分，没有时期。

# sql - 创建外键是否意味着创建索引？

> ID：15100094
> 
> 赞同：1
> 
> 时间：2013-02-26T21:54:38.963
> 
> 标签：sql, sqlite

如果我`a`在表中有一个列`Foo`，并且我创建了一个具有作为外键的列的新表`Bar`，那么该列是否会自动为其编制索引，或者如果我想有效地搜索其中的所有行，我还必须创建一个索引吗？`b``Foo.a``b``Bar``Bar.b``Bar``b = 1`

（如果重要的话，我正在使用 SQLite。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:01:58.710

外键仅用于[“强制存在表之间的关系”](http://www.sqlite.org/foreignkeys.html)，但不会根据其相关列的索引自动建立索引。索引`Foo.a`将加速 上的插入/更新`Bar.b`，而索引`Bar.b`将加速 上的选择`Bar.b`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T22:03:19.367

在 SQLite 中创建外键只是创建一个约束。您应该自己创建索引。

从[文档](http://www.sqlite.org/foreignkeys.html)中，接近第 3 段的末尾：

> 因此，在大多数实际系统中，应该在每个外键约束的子键列上创建索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T21:55:47.680

您必须自己创建索引。至少我知道没有自动执行它的 DBMS。

# sql - UNPIVOT 在不确定的列数上

> ID：15100101
> 
> 赞同：3
> 
> 时间：2013-02-26T21:55:02.117
> 
> 标签：sql, oracle, unpivot

如何编写一个查询，将始终具有 1 行和多列的表取消透视到具有 2 列的结果集：column_name 和 value。我知道表格的底层结构是真正的问题所在，但我无法改变这一点。此查询也必须不知道所述表中的名称和/或列数，因为经常添加列（再次，我知道，糟糕的设计，无法更改），我不想要每次添加新列时都必须更新查询。我已经能够使用 unpivot 完成一些接近的事情，但是该查询需要对列名进行硬编码。

这甚至可能吗？

甲骨文 11gR2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T22:16:59.507

听起来您想取消透视表（旋转将涉及从多行 2 列变为 1 行多列）。您很可能需要使用动态 SQL 来生成查询，然后使用`DBMS_SQL`包（或可能`EXECUTE IMMEDIATE`）来执行它。您还应该能够构造一个执行逆透视的流水线表函数。您还需要在管道表函数中使用动态 SQL，但它可能会减少代码。不过，我希望使用纯动态 SQL 语句`UNPIVOT`更有效。

一种效率低下但相对容易遵循的方法是

```
SQL> ed
Wrote file afiedt.buf

  1  create or replace type emp_unpivot_type
  2  as object (
  3    empno number,
  4    col   varchar2(4000)
  5* );
SQL> /

Type created.

SQL> create or replace type emp_unpivot_tbl
  2  as table of emp_unpivot_type;
  3  /

Type created.

SQL> ed
Wrote file afiedt.buf

  1  create or replace function unpivot_emp
  2  ( p_empno in number )
  3    return emp_unpivot_tbl
  4    pipelined
  5  is
  6    l_val varchar2(4000);
  7  begin
  8    for cols in (select column_name from user_tab_columns where table_name = 'EMP')
  9    loop
 10      execute immediate 'select ' || cols.column_name || ' from emp where empno = :empno'
 11         into l_val
 12       using p_empno;
 13      pipe row( emp_unpivot_type( p_empno, l_val ));
 14    end loop;
 15    return;
 16* end;
SQL> /

Function created. 
```

然后您可以在 SQL 语句中调用它（我认为您至少需要第三列的列名）

```
SQL> ed
Wrote file afiedt.buf

  1  select *
  2*   from table( unpivot_emp( 7934 ))
SQL> /

     EMPNO COL
---------- ----------------------------------------
      7934 7934
      7934 MILLER
      7934 CLERK
      7934 7782
      7934 23-JAN-82
      7934 1301
      7934
      7934 10

8 rows selected. 
```

一种更有效的方法是改编 Tom Kyte 的[show_table 流水线表函数](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:1035431863958)。

# c - 如何在 x86_64 上支持 IA-32 的 mmap？

> ID：15100106
> 
> 赞同：1
> 
> 时间：2013-02-26T21:55:23.857
> 
> 标签：c, linux-kernel, linux-device-driver, device-driver

我需要支持旧硬件，该用户土地库没有源代码，但我有设备驱动程序的源代码。因此，我必须重写设备驱动程序以支持 IA-32 模式用户登陆二进制文件。

对于 ioctl 调用，添加了 compat_ioctl 以支持用户空间中的 IA-32。但是 32 位库进行 mmap 调用，它只返回一半的地址（当然）。我的问题是，是否有类似于 compat_ioctl vs ioctl 的 mmap 支持？如果没有 compat_mmap，如何支持 IA-32 用户登陆 mmap 调用？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T23:33:43.480

你不必担心它。当你的`f_op->mmap()`函数被调用时，它会传递一个`struct vm_area_struct`已经为调用任务正确定位的函数。

（在 x86-64 上，该`arch_get_unmapped_area()`函数负责这一点 - 它确保返回的区域小于`TASK_SIZE`，并`TASK_SIZE`取决于任务是否`TIF_ADDR32`设置了标志）。

# r - 与 Oracle 数据库的 RODBC 连接不起作用，崩溃 R

> ID：15100107
> 
> 赞同：1
> 
> 时间：2013-02-26T21:55:40.510
> 
> 标签：r, rodbc

我有许多脚本可以通过 Windows XP 上的 ODBC 从 Oracle 10g 数据库中提取数据，这些脚本已经运行了很长时间。我最近设置了一个新的 Oracle 帐户以从同一数据库的另一个模式中提取数据，但是当我使用该帐户和不同的模式进行测试时，我得到了奇怪的结果，并且有时可以（可靠地）完全杀死 R！

我使用 odbcConnect 连接到数据库，并且尝试过相信NRows 和 rows_at_time 没有区别

```
>imcon<-odbcConnect(sid, uid=uid, pwd=pwd, believeNRows = FALSE, rows_at_time=1)

> odbcGetInfo(imcon)
       DBMS_Name         DBMS_Ver  Driver_ODBC_Ver Data_Source_Name      Driver_Name       Driver_Ver         ODBC_Ver      Server_Name 
        "Oracle"     "10.02.0030"          "03.51"       "SID"    "SQORA32.DLL"     "09.02.0000"     "03.52.0000"       "SID" 
```

然后我尝试了一些查询（尽可能简单。这个返回零行（此表中有两行），并且大多数列名都替换为 An

```
> sqlQuery(imcon, "select * from SCHEMA.USERS;")
 [1] PASSWORD                  USER_DISABLED             USE_DOMAIN_AUTHENTICATION ID                        DESCRIPTION              
 [6] ADMIN_USER                A                         A.1                       A.2                       A.3                      
[11] A.4                       A.5                       A.6                       A.7                       A.8                      
[16] A.9                       A.10                      A.11                      A.12                      A.13                     
[21] A.14                      A.15                      A.16                      A.17                      A.18                     
[26] A.19                      A.20                      A.21                      A.22                      A.23                     
[31] A.24                      A.25                      A.26                      A.27                      A.28                     
[36] A.29                      A.30                      A.31                      A.32                      A.33                     
<0 rows> (or 0-length row.names)
Warning messages:
1: In deparse(., width.cutoff = max(20, width - 10)) :
  invalid 'cutoff' for deparse, using default
2: In deparse(., width.cutoff = max(20, width - 10)) :
  invalid 'cutoff' for deparse, using default 
```

这有效，但返回零行并且两个日期列被截断为 L 和 L.1

```
> sqlQuery(imcon, "select ID, DESCRIPTION, NAME, FIRST_NAME, LAST_NAME, DATE_CREATED, DATE_LAST_MODIFIED from SCHEMA.USERS;")
[1] ID          DESCRIPTION NAME        FIRST_NAME  LAST_NAME   L           L.1        
<0 rows> (or 0-length row.names) 
```

这工作正常，并返回数据

```
> sqlQuery(imcon, "select ID, DESCRIPTION, NAME, FIRST_NAME, LAST_NAME, ADMIN_USER from SCHEMA.USERS;")
  ID DESCRIPTION   NAME FIRST_NAME LAST_NAME ADMIN_USER
1  1        <NA> SYSTEM       <NA>        NA       TRUE
2  2  Admin user  ADMIN      Admin        NA       TRUE 
```

这似乎杀死了R（老实说）

```
> sqlQuery(imcon, "select ID, DESCRIPTION, NAME, FIRST_NAME, LAST_NAME, DATE_CREATED from SCHEMA.USERS;") 
```

R死了。（在 StatEt 和 RGui 中）

所以我的问题；

a) 有谁知道出了什么问题？

b) 有谁知道我还可以采取哪些步骤来诊断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:15:24.657

经过一番尝试并试图简化我的问题后，我注意到 SQLPlus 的输出非常奇怪（列标题的下划线非常非常长）。这导致我查看 SQL Developer 中的数据，它向我展示了列类（我确信 SQLPlus 也可以这样做）。看起来大多数文本字段都是 varchar2(4000) 或类似的，日期字段是带有时区的日期戳。似乎 varchars 阻止了返回结果，并且日期戳完全杀死了 R。

例如，我修改了我的查询，通过对 varchar2 使用 substr 和对 datestamp 使用 to_char 将这些列恢复为正常值；

```
select substr(t1.STATUS_DETAIL,0,24) as DETAIL,
to_char(t1.DATE_CREATED,'YYYY-MM-DD HH24:MI:SS') AS DCREATED 
from SCHEMA.TABLE; 
```

它阻止了 R 崩溃，并返回结果！我将通过电子邮件向 RODBC 的包维护者发送电子邮件，并将此答案留给遇到此问题的任何其他人。

# ruby-on-rails - rails3 无法在生产模式下发送 smtp 电子邮件

> ID：15100109
> 
> 赞同：3
> 
> 时间：2013-02-26T21:55:55.917
> 
> 标签：ruby-on-rails, smtp, ubuntu-12.04, email

根据我在此处发布的问题：[仅生产中的邮件程序错误](https://stackoverflow.com/questions/15086149/mailer-error-in-production-only)我决定创建一个小型脚手架应用程序来寻找解决方案。

问题：我无法在生产中使用 smtp 发送（通讯）电子邮件，但它在开发中完美运行。

[您可以在我的 github 存储库](https://github.com/lww/email_test)中找到该应用程序。

我刚刚创建了一个contact_messages 脚手架和一个简单的邮件程序。

点击提交按钮接收邮件后的错误日志：

```
Started POST "/contact_messages" for 194.XXX.XX.XXX at 2013-02-26 19:43:59 +0000
Processing by ContactMessagesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"xx0nxxJ2xwxxJavvZ278EUy2TABjD9CixxNcxDqwg=",
"contact_message"=>{"name"=>"test", "email"=>"test@testemail.com", "message"=>"test1"}, "commit"=>"Create Contact message"}
Rendered contact_mailer/confirmation.text.erb (0.3ms)

Sent mail to test@testemail.com (38ms)
Completed 500 Internal Server Error in 100ms

Errno::ECONNREFUSED (Connection refused - connect(2)):
  app/controllers/contact_messages_controller.rb:46:in `create' 
```

电子邮件被保存，它们列在索引中。所以数据库应该可以正常工作。

我正在使用带有 Gmail 帐户的 Ubuntu 12.04、Apache、Phusion Passenger、SMTP。这可能是服务器问题，还是我在应用程序中做错了什么？

我正在使用fail2ban 和denyhost。这些工具会阻止 smtp 吗？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:40:12.327

默认情况下，Rails 通过连接到目标 SMTP 服务器来发送电子邮件。尝试使用 sendmail 代替。在你的 config/initializers/production.rb 中添加这个：

```
config.action_mailer.delivery_method = :sendmail 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:13:39.083

我通过从 mandrill 更改新密码（api-key）解决了我的问题。仍然不知道问题是什么，因为旧的它在开发模式下工作......

工作环境：

```
YourApp::Application.configure do
  config.action_mailer.smtp_settings = {
    :address   => "smtp.mandrillapp.com",
    :port      => 587,
    :enable_starttls_auto => true,
    :user_name => "MANDRILL_USERNAME",
    :password  => "MANDRILL_PASSWORD", # SMTP password is any valid API key
    :authentication => 'login'
  } 
```

# logic - XACML 资源

> ID：15100111
> 
> 赞同：0
> 
> 时间：2013-02-26T21:56:02.750
> 
> 标签：logic, xacml2

我正在尝试编写一个代码，使用户能够基于安全角色从网站访问内容。因此，有些用户可以看到所有内容，而有些用户只能看到带有某些扩展名的 url。

我的大部分代码都有效，但我无法访问 3 个子类别。

```
<Rule Effect="Permit" RuleId="accesses">
    <Description>Permission for lower clearance</Description>
    <Target>
        <Resources>
            <Resource>
                <ResourceMatch
                    MatchId="urn:oasis:names:tc:xacml:1.0:function:regexp-string-match">
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">home.html
                    </AttributeValue>
                    <ResourceAttributeDesignator
                        AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id"
                        DataType="http://www.w3.org/2001/XMLSchema#string" Issuer="policy-admin@website.com"
                        MustBePresent="true" />
                </ResourceMatch>
            </Resource>
            <Resource>
                <ResourceMatch
                    MatchId="urn:oasis:names:tc:xacml:1.0:function:regexp-string-match">
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">localweather.html
                    </AttributeValue>
                    <ResourceAttributeDesignator
                        AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id"
                        DataType="http://www.w3.org/2001/XMLSchema#string" Issuer="policy-admin@website.com"
                        MustBePresent="true" />
                </ResourceMatch>
            </Resource>
            <Resource>
                <ResourceMatch
                    MatchId="urn:oasis:names:tc:xacml:1.0:function:regexp-string-match">
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">about.html
                    </AttributeValue>
                    <ResourceAttributeDesignator
                        AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id"
                        DataType="http://www.w3.org/2001/XMLSchema#string" Issuer="policy-admin@website.com"
                        MustBePresent="true" />
                </ResourceMatch>
            </Resource>
        </Resources>
    </Target>
    <Condition>
        <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:regexp-string-match">
            <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
                <SubjectAttributeDesignator AttributeId="AccessLevel"
                    DataType="http://www.w3.org/2001/XMLSchema#string" Issuer="policy-admin@website.com"
                    MustBePresent="true" />
                <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">Clear</AttributeValue>
            </Apply>
        </Apply>
    </ Condition >
</Rule> 
```

我有这 3 个资源，当我运行程序时，我得到一个“不确定”的响应。每个规则我只能有 1 个资源吗？还有什么东西抛出异常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:45:14.600

You can have tree resources for in target. According to the your rule, they would act as "OR". Please check with your XACML request, may be you are sending request that is not matching with policy (policy has MustBePresent="true it means, if attribute is not there, PDP would create a indeterminate error). Please change them to "false" and see.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T12:37:09.333

这实际上是一个条件问题。这些资源都是叶级文件。我的策略没有正确的用户属性值集。我将它与我的 LDAP 模式进行了比较并让它工作。

# email - Tridion OutboundEmail - 来自多个演示服务器的联系人同步？

> ID：15100122
> 
> 赞同：1
> 
> 时间：2013-02-26T21:56:26.833
> 
> 标签：email, synchronization, contacts, tridion-2011, outbound

我遇到了联系人的 OutboundEmail 同步问题。

我们有以下场景：2 个负载平衡的 CMS 服务器和 3 个负载平衡的 CDE Web 服务器位于不同的数据中心。每个 CDE Web 服务器都有自己的用于代理数据库和 OutboundEmail 订阅 + 跟踪数据库的 SQL 服务器。

如果我在每个 CDE 上安装本地 OutboundEmail 订阅 + 跟踪数据库，我如何处理来自 3 个 CDE 服务器的联系人同步，知道对于特定的 Tridion 发布，您只能指定 1 个包含 1 个 url 到 profilesync.aspx 的同步目标？

并用于跟踪同步。

我肯定错过了什么 ...

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:48:50.347

目前不支持此方案，我们确实支持多个演示服务器，但正如您所提到的，您只能在发布下指定一个同步目标

在没有详细说明的情况下，当时有令人信服的理由不支持这种情况，但它在我们的积压工作中

在这个版本中，我可以想到几个解决方案：

*   使用一个数据库，但我猜测将其拆分为 3 个数据中心的原因是出于故障转移/冗余和/或地理原因
*   在一台服务器上设置同步/跟踪并将数据复制到其他 2 个数据库，注意复制需要是双向的

# c# - C# 表单 - 加载图像

> ID：15100123
> 
> 赞同：-1
> 
> 时间：2013-02-26T21:56:32.857
> 
> 标签：c#, forms, radio-button, picturebox

*如果*选中了特定的单选按钮，我正在尝试在我的图片框中加载特定的图像。

运行时错误是“_Couldn't locate file in this directory。”，所以我将图像移动到该目录，但这只是导致图片框自动加载它。我还导入了我需要的所有图像。

```
private void button1_Click(object sender, EventArgs e)
{
    if (radioButton1.Checked)
    {
        pictureBox1.Load("10C.jpg");
    }
} 
```

当我运行程序`pictureBox1`时已经加载了图像。我想要`pictureBox1`做的是保持空白，直到用户选择一个单选按钮并单击“更改图像”按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:24:09.573

您应该放置`pictureBox1.Visible = false;`在表单加载事件中

```
 private void Form1_Load(object sender, EventArgs e)
    {
        pictureBox1.Visible = false;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:05:03.090

你可以让它 pictureBox1.Visible = false; 然后你可以说：

```
private void button1_Click(object sender, EventArgs e)
{
   if (radioButton1.Checked)
     {
        pictureBox1.Visible = true;
        pictureBox1.Load("10C.jpg");
     }
} 
```

这样，在单击按钮之前不会看到图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:53:56.337

我建议您在启动时在图片框中设置默认图像，如果选中单选按钮并单击按钮，则将`desired image`（10C.jpg）加载到图片框中，而不是处理图片框的`visible`属性。

代码将如下所示：

```
private void button1_Click(object sender, EventArgs e)
{
   // pictureBox1.Visible will be always set to true
   if (radioButton1.Checked)
   {
        pictureBox1.Load("10C.jpg");
   }
   else
   {
        pictureBox1.Load("placeholder.jpg");
   }
}

private void Form1_Load(object sender, EventArgs e)
{
    pictureBox1.Visible = true;
    pictureBox1.Load("placeholder.jpg");
} 
```

推荐：谷歌搜索`placeholder image`

希望能帮助到你！

**编辑**

回应：

> 运行时错误是“_Couldn't locate file in this directory。”，所以我将图像移动到该目录，但这只是导致图片框自动加载它。我还导入了我需要的所有图像。

在配置文件中定义一个包含图像路径的键，并通过在末尾连接文件名来使用它来访问您的图像。使用这种方法，即使在部署之后，您也可以更改图像路径。

# javascript - 带有 Javascript 的计算器

> ID：15100124
> 
> 赞同：0
> 
> 时间：2013-02-26T21:56:44.370
> 
> 标签：javascript, html, calculator

我是一个初学者，试图用 Javascript 编写一个简单的计算器，但出了点问题。

当用户输入数字“数字 1”和“数字 2”时，加减乘除应发生以下情况（例如）：

```
Number1 = 5, Number2 = 3
then   => 5 + 3 = 8,
          5 - 3 = 2,
          5 * 3 = 15,
          5 / 3 = 1.6 
```

当用户给特定方程赋值时，然后显示这些运算的结果。

```
<html>
<head>
<title>Function Calculator</title>
<script type="text/javascript">
   function show_cal(){
    function num(){
    a=Number(document.form1.num1.value);  
    b=Number(document.form1.num2.value); 
    c=a+b;
    document.form1.result1.value=c;

    a=Number(document.form1.num1.value);  
    b=Number(document.form1.num2.value); 
    c=a-b;
    document.form1.result2.value=c;

    a=Number(document.form1.num1.value);  
    b=Number(document.form1.num2.value); 
    c=a*b;
    document.form1.result3.value=c;

    a=Number(document.form1.num1.value);  
    b=Number(document.form1.num2.value); 
    c=a/b;
    document.form1.result4.value=c;
    }

    function addition(){
    a=Number(document.form1.num3.value);  
    b=Number(document.form1.num4.value); 
    c=a+b;
    document.form1.result1.value=c;
    }

    function subtraction(){
    a=Number(document.form1.num5.value);  
    b=Number(document.form1.num6.value); 
    c=a-b;
    document.form1.result2.value=c;
    }

    function multiply(){
    a=Number(document.form1.num7.value);  
    b=Number(document.form1.num8.value); 
    c=a*b;
    document.form1.result3.value=c;
    }

    function division(){
    a=Number(document.form1.num9.value);  
    b=Number(document.form1.num10.value); 
    c=a/b;
    document.form1.result4.value=c;
    }

    /*function formValidator(){
    var number = document.getElementById('number');
        if(isNumeric(number, "Only Numbers pls")){
        return true;
        }return false;
    }

    function notEmpty(elem, helperMsg){ //gia keno
        if(elem.value.length == 0){
            alert(helperMsg);
            elem.focus(); // set the focus to this input
        return false;
        }
    return true;
    }

    function show_clear(){
        document.form1.display.value=null;
        num1= null;
        num2 = null;
        lastaction= null;
        action = null;
    } */
}

</script>
</head>

<body>
<table width="400" align="center" bgcolor="#C0C0C0">
    <form name="form1" action="">

    <tr align="center">
    <td width="600" height="112" align="center" border="1">
        <h1 align="center"> Calculator </h1>
    Number 1: <input name="num1" type="text" size=10/>
    Number 2: <input name="num2" type="text" size=10/>
        </td>
    </tr>

    <tr align="center">
    <td width="500">
    <input name="num3" type="text" size=10/> + 
    <input name="num4" type="text" size=10/> =
    <input name="result1" type="text" size=10/>
    </td>
    </tr>

    <br/>
    <tr align="center">
    <td width="500">
    <input name="num5" type="text" size=10/> -
    <input name="num6" type="text" size=10/> =
    <input name="result2" type="text" size=10/>
    </td>
    </tr>

    <br/>
    <tr align="center">
    <td width="500">
    <input name="num7" type="text" size=10/> *
    <input name="num8" type="text" size=10/> =
    <input name="result3" type="text" size=10/>
    </td>
    </tr>

    <br/>
    <tr align="center">
    <td width="500">
    <input name="num9" type="text" size=10/> /
    <input name="num10" type="text"size=10/> =
    <input name="result4" type="text" size=10/>
    </td>
    </tr>

        <br/>
    <td height="13"></tr>
    <tr align="center" width="100">
    <td>
    <input name="result" type="button" onClick="show_cal()" value="Result" />
    <input type="button" onClick="show_clear()" value="Clear"/>
    </td>
    </tr>

</form>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:07:22.430

问题是你在函数**show_calc中有一个函数****sum**而你没有调用这个函数。完成 showcalc 函数后，您需要调用函数 num。

 **```
<script type="text/javascript">
   function show_cal(){

    function num(){
      a=Number(document.form1.num1.value);  
      b=Number(document.form1.num2.value); 
      c=a+b;
      document.form1.result1.value=c;

      a=Number(document.form1.num1.value);  
      b=Number(document.form1.num2.value); 
      c=a-b;
      document.form1.result2.value=c;

      a=Number(document.form1.num1.value);  
      b=Number(document.form1.num2.value); 
      c=a*b;
      document.form1.result3.value=c;

      a=Number(document.form1.num1.value);  
      b=Number(document.form1.num2.value); 
      c=a/b;
      document.form1.result4.value=c;
    }

    function addition(){
      a=Number(document.form1.num3.value);  
      b=Number(document.form1.num4.value); 
      c=a+b;
      document.form1.result1.value=c;
    }

    function subtraction(){
      a=Number(document.form1.num5.value);  
      b=Number(document.form1.num6.value); 
      c=a-b;
      document.form1.result2.value=c;
    }

    function multiply(){
      a=Number(document.form1.num7.value);  
      b=Number(document.form1.num8.value); 
      c=a*b;
      document.form1.result3.value=c;
    }

    function division(){
      a=Number(document.form1.num9.value);  
      b=Number(document.form1.num10.value); 
      c=a/b;
      document.form1.result4.value=c;
    }

    num();
} 
```

但我有更好的方法来正确地做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T22:07:33.743

您的代码可能更干净，并且反复违反 DRY（不要重复自己）。

试试这个：

```
<form action="javascript:void(null);" method="post" onSubmit="calculate(this);">
    <p><label>Number 1: <input type="number" /></label></p>
    <p><label>Number 2: <input type="number" /></label></p>
    <p><input type="submit" value="Calculate" /></p>
    <p>N1 + N2 = <span>-</span></p>
    <p>N1 - N2 = <span>-</span></p>
    <p>N1 * N2 = <span>-</span></p>
    <p>N1 / N2 = <span>-</span></p>
</form>
<script type="text/javascript">
    function calculate(form) {
        var fc = form.children,
            n1 = parseInt(fc[0].children[0].children[0].value || 0,10),
            n2 = parseInt(fc[1].children[0].children[0].value || 0,10);
        fc[3].children[0].firstChild.nodeValue = n1+n2;
        fc[4].children[0].firstChild.nodeValue = n1-n2;
        fc[5].children[0].firstChild.nodeValue = n1*n2;
        fc[6].children[0].firstChild.nodeValue = n1/n2;
    }
</script> 
```

[JSFiddle 演示](http://jsfiddle.net/wkR7N/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-27T12:56:10.850

```
<!DOCTYPE html>
<html>
    <head>
<title>Calculator</title>
<link rel="stylesheet" href="cal.css">
<script src="./calc.js"></script>
    </head>
    <body>
    <div class="calculator">
        <div id="textBox1">
             <input type="text"id="textBox" placeholder="0"/>
        </div>
        <div class="buttons">
        <button class="calc-buttons" onclick="disPlay('1')" value="1">1</button>
        <button class="calc-buttons" onclick="disPlay('2')" value="2">2</button>
        <button class="calc-buttons" onclick="disPlay('3')" value="3">3</button>
        <button class="calc-buttons" onclick="disPlay('4')" value="4">4</button>
        <button class="calc-buttons" onclick="disPlay('5')" value="5">5</button>
        <button class="calc-buttons" onclick="disPlay('6')" value="6">6</button>
        <button class="calc-buttons" onclick="disPlay('7')" value="7">7</button>
        <button class="calc-buttons" onclick="disPlay('8')" value="8">8</button>
        <button class="calc-buttons" onclick="disPlay('9')" value="9">9</button>
        <button class="calc-buttons" onclick="disPlay('0')" value="0">0</button>
        <button class="calc-buttons" onclick="disPlay('+')" value="+">+</button>
        <button class="calc-buttons" onclick="disPlay('-')" value="-">-</button>
        <button class="calc-buttons" onclick="disPlay('*')" value="*">*</button>
        <button class="calc-buttons" onclick="disPlay('/')" value="/">/</button>
        <button class="calc-buttons" onclick="disPlay('%')" value="%">%</button>
        <button class="calc-buttons" onclick="clr()" value="clear">C</button>
        <button class="calc-buttons" onclick="disPlay('.')" value=".">.</button>
        <button class="calc-buttons" onclick="backSpace()" value="B">B</button>
        <button class="calc-buttons-equal" onclick="result()" value="=">=</button>
        </div>
</div>
    </body>
</html>
calc.js:---
var res = "";
function disPlay(x) {
  nan = document.getElementById("textBox").value;
  if (nan === "NaN" || nan === "Infinity" || nan ===  "undefined" || nan === "-Infinity") {   // delete Nan,infinity,undefined after entering the numbers.
    document.getElementById("textBox").value = "";
  }
  if (res && (x >= 0 || x <= 0)) {
    res = false;
    document.getElementById("textBox").value = "";
    document.getElementById("textBox").value += x;

  } else {
    document.getElementById("textBox").value += x;
    res = false;
    var y = [];
    y = document.getElementById("textBox").value;
    p = y.length;
    if ((y[p - 2] === "*" || y[p - 2] === "/" || y[p - 2] === "%" || y[p - 2] === "+" || y[p - 2] === "-" || y[p - 2] === ".") && (x === "*" || x === "/" || x === "%" || x === "+" || x === "-" || x === ".")) {
      document.getElementById("textBox").value = y.slice(0, p - 1);

    }

  }
}

function clr() {
  document.getElementById("textBox").value = "";
}

function backSpace() {
  bakSpa = document.getElementById("textBox").value;
  if (bakSpa === "NaN" || bakSpa === "Infinity" || bakSpa === "undefined" || bakSpa === "-Infinity") {
    document.getElementById("textBox").value = "";
  } else {
    var value = document.getElementById("textBox").value;`enter code here`
    document.getElementById("textBox").value = value.substr(0, value.length - 1);
  }

}

function result() {
  exp = "";
  exp = document.getElementById("textBox").value;
  l = exp.length;
  if (exp[0] == '*' || exp[0] == '/' || exp[0] == '%' || exp[0] == '+' || exp[l - 1] == '+' || exp[l - 1] == '%' || exp[l - 1] == '/' || exp[l - 1] == '*' || exp[l - 1] == '-') {
    document.getElementById("textBox").value = 'NaN';
  } else {
    exp = document.getElementById("textBox").value;
    res = eval(exp);
    console.log(res);
    document.getElementById("textBox").value = res;
    if(res===undefined){
      document.getElementById("textBox").value = "";
    }
  }
}
cal.css:-
*{
    box-sizing: border-box;
    text-align: center;
    padding: 0;
    margin: 0;
}
::placeholder { 
    color: red;
    opacity: 1; 
  }

body {
background: #F6F6F6;
}
.calculator   {
max-width: 400px;
margin: 0 auto;
border: 2px solid #111;
border-radius: 5px;
display:flex;
flex-wrap: wrap;
flex: 0 1 60%;
min-width:400px;
color: #F6F6F6;
}
#calc-buttons ,.calc-buttons {
background-color: gray;
border: none;
color: white;
padding-left: 60px;
padding-top: 15px;
text-decoration: none;
display: inline-flex;
font-size: 16px;
margin: 1px;
cursor: pointer;
width:125px;
height: 50px;
border-radius: 6px;
}
.calc-buttons-equal{
    background-color:orange;
    border: none;
    color: white;
    padding-left: 190px;
    padding-top: 15px;
    text-decoration: none;
    display: inline-flex;
    font-size: 16px;
    margin: 1px;
    cursor: pointer;
    width:388px;
    height: 50px;
    border-radius: 6px;
    }
#textBox1 input   {
background: none;
border: none;
box-shadow: none;
padding: 10px;
width: 100%;
border-bottom: 2px solid #111;
color: #333;
text-align: right;
font-size: 40px;
border-radius: 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-19T16:04:35.153

我创建了一个 api 来自动制作计算器，只需将 api 放入脚本标签 (<script src="https://calculatorapi.netlify.app/api.js>")。我创建了这个 api 来帮助更多的人构建自己的 web 应用程序。如果你想为我的 api 计算器设置样式，只需执行以下操作：

```
<style>

<!--To result input-->

input[type="text"] {

<!--Your style-->

}

<!-- To Calculator buttons e.g: 1,2,3 -->

input[type="buttons"] {

<!-- Your style -->

}
</style> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-10-27T13:07:41.017

```
<!DOCTYPE html>
<html>
    <head>
        <script>
              z="";  
             fun =""
             ans="";
            function dis(val) 
            { 
                ans = document.getElementById("result").value;
               if (ans === "Infinity" ||ans === "-Infinity" || ans ===  "undefined") {  
                 document.getElementById("result").value = "";
                }
                if(z&& (val >= 0 || val <= 0)){
                    z = false;
                document.getElementById("result").value="";
                document.getElementById("result").value+=val;

                }
                else{
                ans = document.getElementById("result").value+=val;
                z = false;
                 var y = [];
                 y = document.getElementById("result").value;
                 p = y.length;
                if ((y[p - 2] ==="*" ||y[p - 2] ==="/" ||y[p - 2] ==="%" ||y[p - 2] ==="+" ||y[p - 2] ==="-" ||y[p - 2] ===".") && (val ==="*" ||val ==="/" ||val ==="%" ||val ==="+" ||val ==="-" ||val ===".")) {
                 document.getElementById("result").value = y.slice(0, p - 2)+y[p-1];

                }
                }
            } 
            function solve() 
            { 
                let i,j;
                i= ans;
                 j=i[i.length-1];
                if(i[0]==="*"||i[0]=="/"||i[0]==="%"||i[0]==="+"){ 
                 document.getElementById("result").value = undefined;

                }

                else if(j==="*"||j==="/"||j==="%"||j==="."||j==="+"||j==="-"){
                    document.getElementById("result").value = undefined;
                }

                else {
                    z="";
                    let x = document.getElementById("result").value; 
                     z = eval(x);
                     if(z===undefined)
                     {
                    document.getElementById("result").value = "";
                     }
                     else{
                        document.getElementById("result").value = z;
                     }

            }  
            } 
            function clr() 
            { 
                document.getElementById("result").value ="" 
            } 
            function back() 
              { 
                 var i = document.getElementById("result").value;
                 if(i==="undefined"||i==="infinity"||i==="-infinity"){
                    document.getElementById("result").value ="";
                 }
                 else{
                 document.getElementById("result").value = i.substr(0, i.length - 1);
                 }

                 } 
        </script>
        <style>
         * {
             background-color: black;
             height: 100%;
             width: 100%;
             margin: 0px;
             text-align: center;
             box-sizing: border-box;

         }
         .disply{
               height: 30%;
               width: 100%;
               box-sizing: border-box;

         }
         .functions{
             height: 68%;
             width: 100%;
             box-sizing: border-box;

         }

        input{
             background-color:black; 
              border:whitesmoke;
             color: white;
             text-align: center;
             font-size: 45px;
             cursor: pointer;
             height: 20%;
             width: 24.2%;

             }
             button{
             background-color:lightslategray; 
             color: white;
             text-align: center;
             font-size: 90px;
             cursor: pointer;
             height: 18%;
             width: 24%;
             border: none;
             border-radius: 50%;
             }
             button[type=button4]{
                width: 48.4%;
                padding-right: 24.2%;            
                border-radius: 40%;
             }
             button[type=button2]{
                 background-color: orange;
                 font-size: 60px;
             }
             button[type=button1]{
                 background-color: whitesmoke;
                 color: black;
                 font-size: 60px;
             }
             input[type=text]{
                height: 100%;
               width: 100%;
               background-color:black;
               text-align: right;
               color: white;
               font-size: 100px;

             }
             ::placeholder{
                 color: bisque;
             }
        </style>
    </head>
    <body>
        <div class="disply">
            <input type="text" id="result" placeholder="0"/> 
        </div>
        <div class="functions">
            <button type="button1" value="AC" onclick="clr()">AC</button>
            <button type="button1"value="/" onclick="dis('/')">/</button>
            <button type="button1"value="%" onclick="dis('%')">%</button>
            <button type="button2"value="back" onclick="back()">back</button>
            <button type="button3"value="7" onclick="dis('7')">7</button>
            <button type="button3"value="8" onclick="dis('8')">8</button>
            <button type="button3"value="9" onclick="dis('9')">9</button>
            <button type="button2"value="*" onclick="dis('*')">*</button>
            <button type="button3"value="4" onclick="dis('4')">4</button>
            <button type="button3"value="5" onclick="dis('5')">5</button>
            <button type="button3"value="6" onclick="dis('6')">6</button>
            <button type="button2"value="-" onclick="dis('-')">-</button>
            <button type="button3"value="1" onclick="dis('1')">1</button>
            <button type="button3"value="2" onclick="dis('2')">2</button>
            <button type="button3"value="3" onclick="dis('3')">3</button>
            <button type="button2"value="+" onclick="dis('+')">+</button>
            <button type="button4"value="0" onclick="dis('0')">0</button>
            <button type="button3"value="." onclick="dis('.')">.</button>
            <button type="button2"value="=" onclick="solve()">=</button>

        </div>
    </body>
</html> 
```**

# python - Appengine 中使用的是什么版本/风格的 Python？

> ID：15100125
> 
> 赞同：2
> 
> 时间：2013-02-26T21:56:53.700
> 
> 标签：python, google-app-engine

我只是第二次想知道哪个版本的 Python 用于 Google Appengine Python 2.7 运行时。

这是自 2.6 以来绝对有效的 Python，我希望 query_string 之后是“测试”：

```
query_string = "(test)"
query_string = query_string.translate(None, "()") 
```

但是在 Google Appengine 上，它会导致 TypeError *translate() 只需要一个参数（给定 2 个）*

上周，我们遇到了另一种奇怪的行为，一个函数 a 调用了另一个函数 b，它可能会引发 ValueError。我可以在函数 b 中捕获异常，但不能在函数 a 中捕获异常，因为异常的传播，后端刚刚崩溃。几个小时后，这个错误（？）被修复了。

编辑：我正在使用 Python 2.7 运行时并`sys.version`返回`2.7.3 (default, Oct 15 2012, 11:27:13)`

应用程序.yaml：

```
application: test
version: 1
runtime: python27
api_version: 1
threadsafe: no 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T22:02:52.287

根据您的更新进行编辑：
这可能是也可能不是问题的根本原因，但您`app.yaml`的说法不正确。的允许`threadsafe`值为`true`或`false`。链接到文档的相应部分：[https ://developers.google.com/appengine/docs/python/config/appconfig](https://developers.google.com/appengine/docs/python/config/appconfig)

* * *

原始答案：
发生这种情况的唯一方法是，如果您没有指定 GAE 应该为您的应用程序使用 Python 2.7 运行时`app.yaml`。以下是[优秀文档中的一个示例](https://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld)：

```
application: helloworld
version: 1
#        vvvvvvvv
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: helloworld.app 
```

如果不指定`python27`GAE`runtime`将使用 Python 2.5

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:47:13.323

这有点尴尬，GAE 是行为绝对正常，我使用的字符串是 unicode 对象，而不是 str。

# r - 使用 Roxygen2 模板标签

> ID：15100129
> 
> 赞同：27
> 
> 时间：2013-02-26T21:57:12.553
> 
> 标签：r, roxygen, roxygen2

有人可以提供一个如何正确使用模板标签的例子`Roxygen2`。我试图做最明显的事情（对我来说）：

在我的`packageName-package.R`文件中：

```
 #' [... other Roxygen blocks ...]
 #' 
 #' @templateVar testTemplateTag Testing one two
 NULL 
```

然后在一个文件中 someFunction.R

```
 #' [... other Roxygen blocks ...]
 #'
 #' @template testTemplateTag 
```

我得到错误：

```
 Error : Can not find template testTemplateTag 
```

我试图有一个地方来记录常见的重复定义示例等。当这些东西嵌套在我一直在使用的一组函数中时`@inheritParms`。但是有些东西，如定义和其他描述，在几个地方使用。我已经搜索了高和低的使用`@template`and`@templateVar`并没有找到任何东西。

谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-28T18:59:52.760

完美的！谢谢@hadley。plyr 的 GitHub 版本就是一个完美的例子。

我将在这里为未来的溢出者描述这个过程。

## 在 Roxygen2 中使用模板

1）您应该创建一个文件夹来保存您的模板：`man-roxygen/`

2）每个模板都是一个`.R`文件`man-roxygen/`

例如：`man-roxygen/someTemplate.R`

```
 #' ... [other roxygen2 tags and information] ...
 #'
 #' @param someParm A parameter that is used in several functions.
 #'
 #' ... [more roxygen2 tags and information] ... 
```

3）现在在其他一些块中，您可以通过这种方式`roxygen2`调用**所有**`roxygen2`代码。

```
 #' ... [other roxygen2 tags and information] ...
 #'
 #' @template someTemplate 
```

4）当您使用模板时，您会得到`someTemplate.R`文件中的所有内容。

查看[GitHub 上的 plyr 包，](https://github.com/hadley/plyr)了解 Hadley 使用存储在其中的多个模板文件的巧妙方式`man-roxygen\`，他可以混合搭配来创建文档。查看以下内容以了解此想法：

`@template`在这些文件中查找使用：

```
 R/aaply.r
 R/adply.r 
```

看看这里的模板：

```
 man-roxygen/ply.r
 man-roxygen/a-.r
 man-roxygen/-a.r
 man-roxygen/-d.r 
```

# r - 填充ggplot2散点图中的叠加椭圆

> ID：15100130
> 
> 赞同：14
> 
> 时间：2013-02-26T21:57:17.630
> 
> 标签：r, ggplot2

这个问题是“[如何将数据椭圆叠加在 ggplot2 散点图上？](https://stackoverflow.com/questions/2397097/how-can-a-data-ellipse-be-superimposed-on-a-ggplot2-scatterplot) ”的后续问题。

我想使用填充的叠加置信椭圆创建一个`ggplot2`二维*散点图*。使用上述帖子中 Etienne Low-Décarie 的解决方案，我确实可以使用叠加椭圆。`stat_ellipse`该解决方案基于[https://github.com/JoFrhwld/FAAV/blob/master/r/stat-ellipse.R](https://github.com/JoFrhwld/FAAV/blob/master/r/stat-ellipse.R)

**问：**如何用某种颜色填充椭圆的内部区域（更具体地说，我想使用带有一些 alpha 的椭圆边框的颜色）？

这是从上述帖子修改的最小工作示例：

```
# create data
set.seed(20130226)
n <- 200
x1 <- rnorm(n, mean = 2)
y1 <- 1.5 + 0.4 * x1 + rnorm(n)
x2 <- rnorm(n, mean = -1)
y2 <- 3.5 - 1.2 * x2 + rnorm(n)
class <- rep(c("A", "B"), each = n)
df <- data.frame(x = c(x1, x2), y = c(y1, y2), colour = class)

# get code for "stat_ellipse"
library(devtools)
library(ggplot2)
source_url("https://raw.github.com/JoFrhwld/FAAV/master/r/stat-ellipse.R")

# scatterplot with confidence ellipses (but inner ellipse areas are not filled)
qplot(data = df, x = x, y = y, colour = class) + stat_ellipse() 
```

工作示例的输出： ![示例输出的图像](../Images/6f0db9bd6f4c9da185afb0b5f7f0638b.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-26T22:30:56.247

如评论中所述，`polygon`此处需要：

```
qplot(data = df, x = x, y = y, colour = class) + 
  stat_ellipse(geom = "polygon", alpha = 1/2, aes(fill = class)) 
```

![在此处输入图像描述](../Images/f1ee514c0df5a41decd8e6b3528f1ed7.png)

# c# - 检查对象数组中的重复项？

> ID：15100132
> 
> 赞同：-1
> 
> 时间：2013-02-26T21:57:26.380
> 
> 标签：c#

我有以下对象数组，从自定义类 Room 创建。在向阵列添加新房间之前，我想验证 Roomname 是否已经在阵列中。这是我正在尝试的示例：

```
private void btnAddRm_Click(object sender, EventArgs e)
{
Room[] roomArray = new Room[20];
test = txtName.text;

for (int i = 0; i < roomArray.length; i++)
{
     if(test != roomArray[i].getRoomName())
     {
          addRoom();
     }
}
} 
```

`GetRoomName()`是`RoomName`从类中检索 的访问器。我想我的问题是为什么这段代码不起作用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:00:48.970

只要房间名称不等于新房间，您当前的代码就会添加房间。相反，首先检查所有房间都*没有*现有名称，*然后才*添加它：

```
private void btnAddRm_Click(object sender, EventArgs e)
{
    Room[] roomArray = new Room[20];
    test = txtName.text;
    bool exists = false;

    for (int i = 0; i < roomArray.length; i++)
    {
         if (test == roomArray[i].getRoomName())
         {
              exists = true;
              break;
         }
    }
    if (!exists)
    {
        addRoom();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:23:10.617

就像其他人已经说过的那样，您的代码没有任何意义。您创建了一个房间数组，使所有元素都未初始化（`null`）。然后检查该阵列中是否存在房间。同样在您的循环中，每次元素具有不同的名称时，您都会“添加”新房间。我不知道你想如何将一些东西添加到你的`addRoom`方法范围之外的数组中。我希望这不是您的实际代码！

因此，首先应该将房间数组创建为`btnAddRm_Click`方法范围之外的类的字段。

由于您要**添加**房间，因此不应使用数组。用一个`List<Room>`。否则你需要知道你的数组中有多少元素已经被一个房间初始化了。如果数量超过数组的初始大小，您还需要增加数组。这正是`List<Room>`可以为您做的。

然后，您的`btnAddRm_Click`事件处理程序可以使用 LINQ 检查是否存在同名的任何房间。请注意，您应该使用`String.Compare(name1, name2)`而不是`name1 == name2`.

```
private List<Room> _theRooms = new List<Room>();

private void btnAddRm_Click(object sender, EventArgs e)
{
    if (!_theRooms.Any(r => string.Compare(r.Name, txtName.Text, StringComparison.CurrentCultureIgnoreCase) == 0))
    {
        addRoom();
    }
} 
```

假设房间名称是房间的某种唯一键，您也可以使用 a`HashSet<Room>`然后添加房间。`HashSet`将检查房间的存在。但是，您的`Room`班级需要覆盖`Equals`，`GetHashCode`然后`Equals`检查房间名称是否相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:00:12.210

`addRoom()`每次当前数组中存在不匹配的空间时，您的代码都会触发。

我认为，您正在寻找类似的东西：

```
if(!roomArray.Any(r => r.getRoomName() == test))
    addRoom(); 
```

或使用`All`方法：

```
if(roomArray.All(r => r.getRoomName() != test))
    addRoom(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:01:19.893

在添加新房间之前，您应该完成整个阵列的循环。如果您有一个与任何现有房间都不匹配的新房间名称，它将调用`addRoom()`20 次。

```
Room[] roomArray = new Room[20];
test = txtName.text;

bool doesRoomExist = false;
for (int i = 0; i < roomArray.length; i++)
{
    if (test == roomArray[i].getRoomName())
    {
        doesRoomExist = true;
        break;
    }
}

if (!doesRoomExist)
   addRoom(); 
```

你也可以使用扩展方法来压缩你的 for 循环[`Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)，你需`using System.Linq`要这样做。

```
if (!roomArray.Any(room => room.GetRoomName() == test))
    addRoom(); 
```

# html - HTML 在 IE8 Compat View 中呈现，导致一团糟

> ID：15100136
> 
> 赞同：2
> 
> 时间：2013-02-26T21:57:40.323
> 
> 标签：html, internet-explorer, internet-explorer-8, ie8-compatibility-mode

我有一个很好用的页面`localhost`，但是当我将它推送到我们的登台服务器并在 IE8 中加载它时，它看起来就像垃圾一样。甚至比通常在 IE 中查看的页面还要多。我已经将此追溯到页面以兼容模式呈现的事实。如果我点击`F12`，我会看到：

![在此处输入图像描述](../Images/79d4556cbfa8e1fec4c853a5ed3228ce.png)

如果我点击*Browser Mode*并手动将其更改为*Internet Explorer 8*，页面将重新加载，其美丽的平庸。但是，我不能要求所有用户都使用开发工具。

有没有办法强制页面以 IE8 标准模式呈现？我的 DOCTYPE 看起来像：

```
<!doctype html> 
```

响应中的 HTTP 标头是：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: text/html; charset=utf-8
Content-Encoding: gzip
Vary: Accept-Encoding
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Tue, 26 Feb 2013 21:56:29 GMT
Content-Length: 6249 
```

有任何想法吗？

**更新：**我的兼容性视图设置如下，但请注意，我不能要求用户更改设置以使用我们的网站。

![在此处输入图像描述](../Images/b267335dcee8570008059b7a1a2a5c3a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:07:29.857

```
 <meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

基本上它（Internet Explorer）正在等待你告诉它你已经用新版本的 IE 检查了它。一旦你给它上面的批准印章，它就会假设页面可以安全地在 IE 8 模式下呈现。

# asp.net - 复制或网络服务

> ID：15100138
> 
> 赞同：0
> 
> 时间：2013-02-26T21:58:05.710
> 
> 标签：asp.net, sql-server, web-services, replication

我们正在考虑整合 3 个不同的系统（由不同的公司拥有），这些系统需要协调数据（数据的一个企业所有者）。一种选择是使用 Web 服务将数据从一个系统推送到另一个系统。所有系统都在 sql server 上，因此复制有限数据也是可能的。

任何尝试过这两种技术的人都愿意评论利弊吗？每个系统都可能是要推送到其他系统的数据子集的主控系统。具体来说，我很好奇如何在 Web 服务中处理失败的事务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:29:10.790

我们有一个类似的环境，我们在其中保持 3 个系统同步（Access、企业拥有的 SQL Azure 和第 3 方 SQL Azure）。我们从 Web 服务集成开始，但出于性能原因，我们正在慢慢转向更紧密的 SQL 到 SQL 复制。我们的实现是完全自定义的（不使用 SQL Server 提供的任何内置同步或复制服务），基本上使用 BulkImport 和基于集合的查询进行同步。

## 网页服务

优点

*   松散耦合（如果设计正确），如果任何部分发生变化或被换掉，可以更好地进行风险管理。
*   更好的访问控制
*   与基于数据库的现有应用程序更好地集成。
*   高度可扩展。

缺点

*   移动大量数据可能非常慢。
*   交易和数据处理必须手动处理 - 但可以完成。

## SQL 集成

优点

*   更高的吞吐量。
*   如果表结构映射起来相对简单，则可以更容易管理。
*   交易支持。

缺点

*   容易犯大错误，比如抹掉整张桌子、弄乱整列等等。
*   如果您必须为基于集合的复制滚动自己的集成，则很难构建可靠的错误处理。
*   如果表的结构非常不同，即一个是像我们的系统一样的 EAV 模型，系统之间的紧密集成将非常困难。

如果我可以选择并且性能不是问题，我肯定会选择 Web 服务。我们的 3 个系统的本质是它们具有非常不同的表结构，因此将后端表结构抽象为一个简单的 POCO 数据结构的 Web 服务可以让事情变得更简单。此外，三个系统中的一个驱动一个网站，该网站公开一个“正常工作”的 Web 服务，而不用担心缓存记录、同步更新等。

我们目前通过 Web 服务集成处理事务更新的方式是这样的（服务器应该是更复杂且更有可能失败的一方）：

1.  客户端启动与服务器的连接。
2.  客户端开始本地事务。
3.  服务器开始本地事务。
4.  服务器处理请求。
5.  服务器根据成功/失败提交/回滚本地事务。
6.  服务器发回带有成功/失败和错误消息的响应。
7.  客户端处理响应。
8.  客户端根据成功/失败提交/回滚本地事务。

# facebook - 在 JavaScript 中从 signed_request 中检索 app_data 时遇到问题

> ID：15100139
> 
> 赞同：2
> 
> 时间：2013-02-26T21:58:08.487
> 
> 标签：facebook, facebook-javascript-sdk

我正在尝试在 JavaScript 中获取 app_data 的内容，但无法使其正常工作。我能够按如下方式检索和解码signed_request（'response'变量是从FB.getLoginStatus传递的）：

```
var sr=response.authResponse.signedRequest.split("."); 
sr_json=window.atob(sr[1]); 
```

但 sr_json 总是包含这样的内容：

```
{"algorithm":"HMAC-SHA256","code":"fb_auth_code_here","issued_at":1361914477,"user_id":"1234567"} 
```

...没有 app_data。

由于我需要signed_request 来检索app_data 参数，因此我不担心检查签名。

有任何想法吗？还有其他地方可以查找 app_data 吗？是不是不可能在 JS 中检索它？（如果不是，我很想知道为什么它是这样设计的……）我已经玩了几个小时了，但没有运气。我宁愿避免添加服务器端组件来解码 app_data，所以如果可能的话，我正在寻找一个纯 JS 解决方案。

编辑：我正在调用像[http://www.facebook.com/3rdWindowApps?sk=app_169352419879937&app_data=](http://www.facebook.com/3rdWindowApps?sk=app_169352419879937&app_data=) {"t":"test123","a":"b"} 这样的 URL，所以我应该看到 {" t":"test123","a":"b"} 作为 app_data 的内容。

# json - 如何在 JSON 文件末尾添加新的空行？

> ID：15100140
> 
> 赞同：0
> 
> 时间：2013-02-26T21:58:11.747
> 
> 标签：json, r

我在 R 中使用 rjson 来读取 JSON 文件。它给出了 StackOverflow 指示的错误，因为它需要在 JSON 文件末尾有一个（额外的）空白行。我不确定 JSON 数据最后是否通常有一个空行，但我目前抓取它的方式没有。

有人知道怎么插入吗？很抱歉问了这么一个基本的问题。我在网上找到了一个答案，但我一定是错误地实施了它。这是我的代码的外观，其中第二行是我显然在滥用的另一个网站的其他人的解决方案：

```
json_file <- "C:\\Users\\bootydaddy\\Documents\\LookatHerBooty\\json.txt"
% echo "" >> json.txt
json_data <- fromJSON(paste(readLines(json_file), collapse="")) 
```

提前致谢

# c# - 只读列 DataGridView 中的可编辑单元格

> ID：15100143
> 
> 赞同：1
> 
> 时间：2013-02-26T21:58:14.337
> 
> 标签：c#, winforms, datagridview

我有一个从数据库中的数据填充的 DataGridView，但没有使用 DataSource。我从我的数据库中得到一行，并在初始化时向我的 DataGridView 添加一行。

我的问题是，我有一列是只读的，但有时，该列的数据库中没有数据，在这种情况下，我希望用户能够添加它，但如果信息来了，则不要覆盖数据从数据库。

如何使列中的单个单元格可编辑，而不是列？

IE 允许这个 ---

```
 Col1        Col2 (ReadOnly)                    Col1       Col2 (ReadOlny)
 Row1       A           Can't Change      -->   Row1       J          Can't Change
 Row2       B                                   Row2       B          I added this!
 Row3       C           No Change               Row3       T          No Change 
```

但不是这个——

```
 Col1        Col2 (ReadOnly)                    Col1       Col2 (ReadOlny)
 Row1       A           Can't Change      -->   Row1       J          OOPS!  
 Row2       B                                   Row2       B          I added this!
 Row3       C           No Change               Row3       T          Not allowed! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:12:44.933

也许您需要创建只读列的错觉。

您可以简单地将列中的每个单元格修改为只读，其中单元格值不等于 null 或 String.Empty，而不是将列设置为只读。这将允许用户编辑那些空白的单元格并保护您的数据。

只需遍历 DataGridViewRow 的：-

```
Foreach(DataGridViewRow row in DataGridView1.Rows)
{
   If(!row.Cells[2].Value.Equals(null) || !row.Cells[2].Value.Equals(String.Empty))
     {
        row.Cells[2].ReadOnly = true;
     }
} 
```

请原谅任何语法问题，我已经做到了这一点。

# javascript - 如何将二进制数据作为文件上传发送到服务器？

> ID：15100147
> 
> 赞同：0
> 
> 时间：2013-02-26T21:58:28.880
> 
> 标签：javascript, upload, webkit, xmlhttprequest

我有一个图像的 base64 编码字符串。它从另一个站点传给我，其中`iframe`的数据来自`postMessage`. 我知道这听起来很可怕，但由于我无法控制的原因，这是一个我无法解决的集成。

我正在尝试在 PHP 测试文件中进行概念验证。

我有这样的代码：

```
<div id="binary"><?=$file;?></div>
<script type="text/javascript">
var oReq = new XMLHttpRequest();
oReq.open("POST", "/endpoint.php", true);
oReq.setRequestHeader("Content-Type","application/octet-stream");
oReq.setRequestHeader("X-File-Name","abc.jpg");
oReq.setRequestHeader("X-Requested-With", "XMLHttpRequest" );
// This fails whether or not 'binary' is base64-encoded and decoded here
// or when `binary` is already actually binary
oReq.send(document.getElementById( 'binary' ).innerHTML );
</script> 
```

`$file`是文件的实际内容。这在 Firefox 中会出错，但我们只关心这个项目的 Chrome，因为`iframe`它来自嵌入式 webkit 的实例。

无论如何，这些数据会发送出去，并且由于某种原因总是一个损坏的图像。我还尝试将文件打印成`div`base64 编码（实际上是有效的 HTML），然后在发送之前对其进行解码。我只是想不出一个编码/解码/打印的组合来使它在服务器端工作。

我也尝试`send`通过以下方式更改`sendAsBinary`：

[使用 XHR 在 WebKit/Chrome 中上传二进制字符串（相当于 Firefox 的 sendAsBinary）](https://stackoverflow.com/questions/3743047/uploading-a-binary-string-in-webkit-chrome-using-xhr-equivalent-to-firefoxs-se)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:12:52.190

首先，如果可能，不要将文件内容存储在 a `<div>`（或 DOM 中的任何位置，就此而言）。如果可以的话，最好是这样`<script>var myfile="..."</script>`。如果你只是必须将它存储在 DOM 中，它肯定是 base64。并且不要`innerHTML`用于访问内容，`textContent`而是使用。

其次，我认为在这种情况下您不需要二进制文件，因为您不会（AFAIK）将二进制数据从 iframe 传输到主页，您必须将其编码为字符串（ base64 编码），一旦它是一个字符串，就可以安全地将其作为标准值传输，然后在接收端（PHP）对其进行 base64 解码。

编辑：在上面看到您关于需要使其尽可能像普通文件上传的评论。然后我建议这个用例需要一个单独的端点，它只接收 base64 字符串，什么都不做，然后它重新构建文件，然后将它转发到另一个端点。

编辑＃2：您可以将文件内容放入画布元素中，然后使用`toBlob()`. 要将内容放入画布中，您必须首先从您的 base64 编码中创建一个 dataURL（基本上，在您的 base64 内容之前添加“data:image/jpg;base64”），将该 dataURL 指定`src`为`<img>`，然后`drawImage()`从`<img>`到你的`<canvas>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:05:23.650

我无法通过服务器路由让它工作，所以我最终向服务器传递了一个标志，说“嘿，这是 base64_encoded” 结果并没有太多的返工，所以谢谢`@mr.VVoo`

# php - 数据库驱动的网站在初始页面加载中变得很慢

> ID：15100148
> 
> 赞同：0
> 
> 时间：2013-02-26T21:58:34.537
> 
> 标签：php, mysql

我开发了一个数据库驱动的网站，它实际上也是一个内容管理系统。它主要供我自己使用，但它也是一个 uni 项目。

我不太确定它发生在什么时候，但现在它的初始加载时间似乎很慢。现在加载至少需要大约 6 秒，有时速度会慢一些。最初加载后，几乎可以立即重新加载或加载任何其他页面。如果您离开它，然后在一段时间后返回它（不确定究竟需要多长时间......也许一分钟或两分钟），再次加载任何页面将需要 6 秒或更长时间。

我使用了webpagetest.org，结果显示第一个字节的时间非常长（有时长达10秒）。我可以在其他时间处理其他问题，例如图像大小，但需要解决的是初始页面加载。如果它与 php 包含文件有关，那么为什么页面会在初始加载后立即加载？

我知道我应该在它刚开始减速时对其进行调查，但不幸的是我无法确定确切的时间。我在谷歌上搜索过加载速度慢的问题，但我找不到任何人就真正的加载缓慢问题提供任何真正的建议。这只是基本的东西，比如“确保你没有太多单独的 CSS 文档”或“不要使用大图像”。除了这些是常识之外，它们也非常微不足道......

我会抛出一些想法，看看是否有人可以确认网站本身的一般设计缺陷。

我曾经在每个使用数据库的包含文件中单独连接到数据库，但后来认为这似乎没有必要，所以现在我只是在所有页面的开头连接到数据库（我也在每个主页的末尾关闭） ）。我应该连接到所有包含文件的数据库还是这不合逻辑？

这些页面都以与数据库的连接开始，并且头部中的链接是从数据库中检索的。诚然，有不止一个 CSS 文件，但我看不出这会导致在初始页面加载中添加很多时间。

包括主页在内的所有文章内容都是直接从数据库中加载的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:09:31.527

当然，这与某处发生的一些缓存有关。但是，根据您提供的信息，无法确定究竟是什么花费了这么长时间。您使用任何 PHP 框架或库吗？你的设置是什么？...

话虽如此，未缓存页面的 6 秒仍然是一个巨大的时间，因此会有一些低效的代码或数据库设计。但你不能指望这里有灵丹妙药。为了能够判断性能，需要查看整个代码，问题可能是许多错误选择的组合......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:15:31.897

如果您的网站上有社交按钮（fb/twitter/g+ 等），它们可能会显着降低网站速度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:22:22.910

对我来说听起来像是一个缓存问题。关于您提供的信息，它不应该是浏览器方面的。我也有一种感觉，你不使用任何 php 操作码缓存器。我想到的另外两个可能的原因是，由于某种原因，外部资源或第一次的 mysql 连接和查询速度较慢。最后在我看来可能性最高。

# html - IE7和IE8中是否可以使用服务器端浏览器检测来保证html5语义标签的优雅降级

> ID：15100149
> 
> 赞同：3
> 
> 时间：2013-02-26T21:58:37.243
> 
> 标签：html, cross-browser, browser-detection

众所周知，[如果没有条件 javascript 片段形式的帮助，html5 语义标签不会在低于版本 9 的 IE 中优雅地降级。](https://stackoverflow.com/questions/2967286/degradation-issues-for-html5-semantic-tags-article-footer-header) 这意味着使用 IE7 并关闭 javascript 的用户会看到一些丑陋的东西，而不是你闪亮的 html5 网站。

我想到了解决这个问题的方法，并提出了以下方法：在服务器端（例如在 mvc 视图中）有以下内容：

```
 OutputHtml5WithFallback("<header>MyHeader</header>", "<div>MyHeader</div>"); 
```

并有一个浏览器嗅探代码来确定请求是来自 IE7 还是 IE8。如果浏览器被识别为 IE7 或 IE8，html 输出将是

```
 <div>MyHeader</div> 
```

除此以外

```
 <header>MyHeader</header> 
```

这似乎是一种防欺骗 - 如果任何浏览器伪装成 IE7，它将收到没有任何 html5 元素的 html5 标记。我最担心的是这种方法可能会被搜索引擎阻止（因为不同的 html 是为不同的用户代理提供的）。

您能否指出我可能遗漏的其他缺陷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:03:49.890

您需要注意代理缓存，否则代理可能会缓存您的 IE7 页面并将其提供给更现代的浏览器，或者缓存您的 HTML5 页面并将其提供给 IE7，您的服务器将永远无法提供正确的版本。

除非您的站点已经要求您的 HTML 页面不被缓存，否则您为避免此问题所做的任何事情都会增加服务器的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:03:00.823

**编辑：**见 bfrohs 评论。*毕竟，*您仍然必须使用`document.createElement('HTML5ElementName')`才能获得正确的样式。

尽管如此，我不认为在 HTML5 退化中使用服务器端的长度是一个好主意。如果有人仍在使用 IE6/7/8 并且默认禁用 JavaScript，那么绝大多数在线页面（从 Facebook 到纽约时报）*无论如何都不会对他们起作用。*

* * *

在 HTML 中，未知元素（如`<blah>`）自动被视为内联元素。要更正旧版本的 IE，您需要将所有新的块级元素设置为`display: block;`，这就是 CSS 所做的：

```
article,aside,canvas,details,figcaption,figure,
footer,header,hgroup,menu,nav,section,summary { 
    display:block;
} 
```

这解决了旧浏览器上 99% 的 HTML5 布局问题。（其他，例如带有控件的音频和视频，可能仍需要工作或不同的回退机制才能真正有用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:03:05.793

只要您的样式不依赖于新的 HTML5 元素，您就可以毫无问题地在 IE7 中查看 HTML5。

所以你可以使用：

```
<header><div class="header"></div></header> 
```

它不是很漂亮，但它可以让你免于服务器端代码。

# javascript - 打开 2 个设置超时的窗口

> ID：15100154
> 
> 赞同：0
> 
> 时间：2013-02-26T21:58:49.843
> 
> 标签：javascript

我有这段代码可以重定向当前窗口并打开另一个弹出窗口。我需要先打开当前窗口，然后弹出窗口供用户执行操作。但它正在做的是打开当前窗口，然后是弹出窗口，但随后它会返回到当前窗口并且不会停留在弹出窗口中。我如何让它留在弹出窗口中。

```
 var WindowFtrs = "menubar=no,location=no,resizable=yes,scrollbars=yes,status=no,width=600,height=630";      
          document.location.href =  lUrl + RPID;             
  setTimeout(window.open(rUrl+ "?PID=" + RPID + isDlg , "Mywindow", WindowFtrs),5000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:00:01.877

将其参数更改`target`为“_blank”。

`window.open(url,target,params)`

# algorithm - 边缘着色算法中构造扇形时如何处理未着色的边缘

> ID：15100158
> 
> 赞同：0
> 
> 时间：2013-02-26T21:58:59.810
> 
> 标签：algorithm, graph-algorithm

我在实施 Misra & Gris 边缘着色算法时遇到问题。我有一个简单的问题 - 如何在最大风扇的构造中处理未着色的边缘？

uncolored 是所有顶点上的免费颜色，仅在未着色的顶点上免费（我们将 uncolored 视为单独的颜色）还是以其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:48:52.363

显然这并不重要（在仔细阅读所有证明并编写代码之后）。然而，使用未着色的边缘可能会意外地使边缘不着色，因此需要在此类设置中对其进行跟踪。在这种情况下，最大风扇也会更大。

# java - 在点击事件上处理 DownloadManager 并从 BroadcastReceiver 启动系统下载应用程序

> ID：15100159
> 
> 赞同：3
> 
> 时间：2013-02-26T21:59:08.080
> 
> 标签：java, android, broadcastreceiver, android-download-manager

我有一个从 http 下载大文件的应用程序。为了处理这个问题，我使用了`DownloadManager`.

要下载的文件太大，我希望用户能够将应用程序置于后台并在下载运行时自由使用他的手机。

在我编写的代码中，下载开始并且工作正常，但我需要每当用户在通知栏中单击下载文件的名称时，它必须向他显示下载列表（系统应用程序下载 - `DownloadManager.ACTION_VIEW_DOWNLOADS`）。

我想要的是，当浏览器从 Web 下载文件时，我的应用程序将与默认浏览器的下载管理器完全相同。

你能帮我声明和编码`BroadcastReceiver`吗？正如我所说，我需要一个`BroadcastReceiver`始终运行的。

我试图这样做，但它不起作用：

在我的清单中有：

```
<manifest>
    <application>
        <receiver android:name="com.test.BroadcastReceiverDownloadManager">
            <intent-filter>
                <action android:name="android.intent.action.DOWNLOAD_NOTIFICATION_CLICKED" />
                <action android:name="android.intent.action.DOWNLOAD_COMPLETE"></action>
            </intent-filter>
        </receiver>
    </application>
</manifest> 
```

而我的 BroadcastReceiverDownloadManager.java 就是这个：

```
public class BroadcastReceiverDownloadManager extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        String action = intent.getAction();
        Log.v("MY_APP","!!! onReceive !!!");

        if (DownloadManager.ACTION_NOTIFICATION_CLICKED.equals(action))
        {               
            Intent i = new Intent(context,DownloadManager.class);
            i.setFlags( Intent.FLAG_ACTIVITY_NEW_TASK);
            i.setAction(DownloadManager.ACTION_VIEW_DOWNLOADS);
            context.startActivity(i);       
        }        
    }
} 
```

它有时不处理点击事件，并且只要它正确处理点击，应用程序就会以这种方式崩溃：

```
02-27 19:13:04.098: E/AndroidRuntime(13274): FATAL EXCEPTION: main
02-27 19:13:04.098: E/AndroidRuntime(13274): java.lang.RuntimeException: Unable to start receiver com.my.app.name.services.BroadcastReceiverDownloadManager: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.my.app.name/android.app.DownloadManager}; have you declared this activity in your AndroidManifest.xml?
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2408)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.app.ActivityThread.access$1500(ActivityThread.java:139)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1321)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.os.Looper.loop(Looper.java:154)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.app.ActivityThread.main(ActivityThread.java:4944)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at java.lang.reflect.Method.invokeNative(Native Method)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at java.lang.reflect.Method.invoke(Method.java:511)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at dalvik.system.NativeStart.main(Native Method)
02-27 19:13:04.098: E/AndroidRuntime(13274): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.my.app.name/android.app.DownloadManager}; have you declared this activity in your AndroidManifest.xml?
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1634)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1510)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.app.ContextImpl.startActivity(ContextImpl.java:1100)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.content.ContextWrapper.startActivity(ContextWrapper.java:276)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.content.ContextWrapper.startActivity(ContextWrapper.java:276)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at com.my.app.name.services.BroadcastReceiverDownloadManager.onReceive(BroadcastReceiverDownloadManager.java:29)
02-27 19:13:04.098: E/AndroidRuntime(13274):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2397)
02-27 19:13:04.098: E/AndroidRuntime(13274):    ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:52:00.463

正如日志中所说：

```
02-27 19:13:04.098: E/AndroidRuntime(13274): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.my.app.name/android.app.DownloadManager}; have you declared this activity in your AndroidManifest.xml? 
```

为了启动一个活动，你必须声明它。打开文件 AndroidManifest.xml，并确保在应用程序标签内声明了活动：

```
 <activity
        android:name=".DownloadManager"
        android:label="@string/app_name"
        >
    </activity> 
```

“.DownloadManager”应该与应用程序具有相同的包名。如果您想使用与应用程序不同的包，请完全指定它，例如 android:name="com.my.app.name.DownloadManager"

在我看来，包名称有些混乱。在日志中，它列出了活动的 com.my.app.name。接收器是 com.my.app.name.services.BroadcastReceiverDownloadManager，但在清单中你有 com.test.BroadcastReceiverDownloadManager。

实际 Java 文件中的包名是什么？它们需要与清单一致。

# macos - unrar 命令仅在手动执行时有效

> ID：15100161
> 
> 赞同：0
> 
> 时间：2013-02-26T21:59:14.243
> 
> 标签：macos, bash, rar, transmission

很抱歉我不能非常具体，我真的不知道问题出在哪里，刚开始使用 bash，所以我的调试技能仅限于 echo。

我有以下代码：

```
#! /bin/bash
# post_torrent.sh
{
  # Log file, file where we tell what events have been processed.
  LOG_FILE=/Users/Server/Documents/sickbeard/logs/post_torrent.log
  # Username for transmission remote.
  TR_USERNAME="admin"
  # Password for transmission remote.
  TR_PASSWORD="1234"
  # Get current time.
  NOW=$(date +%Y-%m-%d\ %H:%M:%S)
  # Source directory, should not be changed.
  SRC_DIR="${TR_TORRENT_DIR}/${TR_TORRENT_NAME}/"
  # Directory to store the un-compressed files in..
  DEST_DIR="${TR_TORRENT_DIR}/${TR_TORRENT_NAME}/"

    cd $SRC_DIR
    echo $NOW "SRC_DIR $SRC_DIR" >> $LOG_FILE
    RAR=$(find . -iname "*.rar")
    echo $NOW "RAR $RAR" >> $LOG_FILE
    unrar x -inul "$RAR"

    exit 0
} & 
```

日志文件显示正在使用正确的文件。当我在终端中一一执行脚本中的语句时（我正在使用 mac osx 服务器），一切正常并且文件被提取。但是，在下载种子后执行此脚本时，它不会。

我一直试图找出为什么会这样大约三个小时，但仍然没有找到任何线索。我认为权限没问题，因为我对此进行了测试。然而，我是 bash 的新手，对 mac osx 命令行不太熟悉。

提前致谢。

编辑：一些额外的信息。日志如下所示： 2013-02-27 00:14:42 SRC_DIR /Volumes/Multimedia/aa_bb/Downloads/some_serie/ 2013-02-27 00:14:42 RAR ./some_serie.rar

该程序在文件下载完成时作为程序集通过传输执行。

必须提取的文件位于共享的外部硬盘驱动器上。

希望这可以帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:10:18.297

换行：

```
unrar x -inul "$RAR" 
```

至 ：

```
for i in $RAR 
do
   unrar -x inul $i
done 
```

原因是 $RAR 包含所有结果，并且您希望单独解析每个结果

**[编辑]** 我注意到您没有在示例中显示上述更改 - 如果没有它们，您想要做的事情将无法工作

改变这一行：

```
RAR=$(find . -iname "*.rar") 
```

至：

```
RAR=`find . -iname "*.rar"` 
```

顺便说一句，这些是引号，它们是重音
，将输出添加`set -x`到您的问题中
**[/edit]**

# c# - 如何在 C# 中浏览 2D SortedList

> ID：15100165
> 
> 赞同：1
> 
> 时间：2013-02-26T21:59:24.397
> 
> 标签：c#, list

我不明白我在浏览 Chunk 对象的“2D”列表时做错了什么：

我的对象的突变体/访问者：

```
public SortedList<int, SortedList<int, Chunk>> Chunks
{
     set;
     get;
} 
```

前锋：

```
 foreach (SortedList<int,Chunk> chunks_row in Chunks)
 {
        foreach (Chunk chunk in chunks_row)
       {
             chunk.Update(gameTime);
       }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:08:34.813

您需要引用[Values](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.values.aspx)对象以获取各个 SortedLists 和 Chunk：

```
foreach (var chunk_row in Chunks.Vales)
{
    foreach (var chunk in chunk_row.Values)
    {
        chunk.Update(gameTime);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:09:39.730

```
foreach (SortedList<int,Chunk> chunks_row in Chunks) 
```

这似乎不正确。chunks 中没有 SortedList，但有 keyValuePairs。尝试类似以下的操作。

```
foreach (KeyValuePair<int, SortedList<int, Chunk>> chunks_row in Chunks)
{
    foreach (KeyValuePair<int, Chunk> pair in chunks_row.Value)
    {
         pair.Value.Update(gameTime);
    }
} 
```

# php - 如何检测 PHP 中的文件编码？

> ID：15100166
> 
> 赞同：1
> 
> 时间：2013-02-26T21:59:25.850
> 
> 标签：php, encoding, utf-8, byte-order-mark

我需要在文件中检测这些编码：

*   UTF-8（带/不带 BOM）
*   UTF-7（不知道有没有BOM）
*   UTF-16 LE/BE（总是带有 BOM）
*   UTF-32（不知道有没有BOM）
*   Windows-****（如 Windows-1252）

`mb_detect_encoding`对文件内容不起作用。

# sql - SQL 嵌套查询可能吗？

> ID：15100167
> 
> 赞同：3
> 
> 时间：2013-02-26T21:59:45.497
> 
> 标签：sql, nested

我发现选择语句基本上使用不同的 where 子句来计数。我的问题是，如何将结果合并到一个语句中，以便这些计数可以成为列？

1.  从 table1 中选择 count(*) as c1 where city = 'nyc'
2.  从 table1 中选择 count(*) as c2 where city = 'boston'
3.  从 table1 中选择 count(*) as c3 where city = 'sf'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T22:01:52.003

```
SELECT
  COUNT(CASE WHEN city = 'nyc' THEN 1 END) AS Nyc,
  COUNT(CASE WHEN city = 'boston' THEN 1 END) AS Boston,
  COUNT(CASE WHEN city = 'sf' THEN 1 END) AS Sf
FROM table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:02:48.963

使用`sum()`并且还`filtering only required cities`

```
select sum(case when city = 'nyc' then 1 end) c1,
       sum(case when city = 'boston' then 1 end) c2,
       sum(case when city = 'sf' then 1 end) c3
from table1
where city in ('nyc','boston','sf') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T22:03:13.620

```
select count(CASE WHEN city = 'nyc' THEN 1 END) as c1,
       count(CASE WHEN city = 'boston' THEN 1 END) as c2,       
       count(CASE WHEN city = 'sf' THEN 1 END) as c3
from table1 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/b5a87/1)上的演示[](http://sqlfiddle.com/#!3/b5a87/1)

 **同样在SQLServer2005+，Oracle可以使用[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)操作

```
SELECT *
FROM table1
PIVOT (
COUNT(city) FOR city IN ([nyc], [boston], [sf])
) p 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/b5a87/2)上的演示[](http://sqlfiddle.com/#!3/b5a87/2)

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T22:09:05.270

你可以给 GROUP BY 一个机会，

```
SELECT city, gender, count(*)
WHERE gender = "male"
GROUP BY city, gender; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T22:06:45.503

为了完整性）

```
select
    (select count(*) as c1 from table1 where city = 'nyc') as c1,
    (select count(*) as c2 from table1 where city = 'boston') as c2,
    (select count(*) as c3 from table1 where city = 'sf') as c3 
```****

# c# - 如何使用 SyndicationFeed？

> ID：15100174
> 
> 赞同：14
> 
> 时间：2013-02-26T22:00:15.150
> 
> 标签：c#, .net, xml, rss, syndication-feed

这似乎是一个愚蠢的问题，但我一生都无法弄清楚如何访问`SyndicationFeed`c# 中的类。我在 MSDN 上看到的每个示例或以其他方式假设它已经导入，而我发现的每个示例都没有说明它的位置。

例如，我正在尝试运行以下命令：

```
XmlReader reader = XmlReader.Create(rss_url);
SyndicationFeed.Load(reader); 
```

但它失败了，因为`SyndicationFeed`在当前上下文中不存在。有没有人知道我怎么能进去？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T22:02:18.827

更仔细地阅读[文档：](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)

> **命名空间**：System.ServiceModel.Syndication
> **程序集**：System.ServiceModel（在 System.ServiceModel.dll 中）

右键单击您的项目，单击添加引用，然后选择 System.ServiceModel.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:02:26.280

它[似乎](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)驻留在`System.ServiceModel.Syndication`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-25T15:35:38.430

如果您使用的是 .NET Core，请搜索并安装 NuGet 包：

```
System.ServiceModel.Syndication 
```

# c# - 回发后刷新 ListView

> ID：15100179
> 
> 赞同：-4
> 
> 时间：2013-02-26T22:00:37.577
> 
> 标签：c#, asp.net, controls

是否可以刷新 ListView 控件？例如，在页面回发之后，我希望 ListView 再次迭代他的项目。有没有办法做到这一点 ？（ListView 与 EntityDataSource 绑定）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:02:30.837

如果源已更改，则重新绑定它，否则不要。

这与您现在所做的方式相同，例如：

```
list.DataSource = source;
list.DataBind(); 
```

通常，人们遇到的问题是他们*不*希望控件重新绑定，并且很高兴发现 , 的可用性`IsPostBack`，并且我可以*理解*，但是如果没有这些知识（或者甚至没有这些知识并主动排除逻辑），这就是默认情况下发生在你身上，所以，至少好奇。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:02:59.087

是的，有可能，使用该`DataBind`方法。

# mysql - MYSQL 查询以展平 joomla 组成员表

> ID：15100182
> 
> 赞同：1
> 
> 时间：2013-02-26T22:00:53.633
> 
> 标签：mysql, joomla, flatten

Joomla 有三个表：

用户：

```
id | username
-------------
1  | you
2  | me 
```

团体：

```
id | title
-------------
1  | users
2  | managers 
```

用户组地图：

```
user_id | group_id
------------------
1       | 2
2       | 1
2       | 2 
```

我想要做的是创建一个查询（我将创建一个视图），该查询变平为：

```
user_id | username | users | manager
------------------------------------
1       | you      | 0     | 1
2       | me       | 1     | 1 
```

到目前为止，我有这样的事情：

```
SELECT u.id, username, group_id, user_id, title
FROM joomla_users u
  LEFT JOIN joomla_user_usergroup_map map ON map.user_id = u.id
  LEFT JOIN joomla_usergroups g ON g.id = map.group_id
WHERE title = 'Super Users' 
```

这为每个组成员提供了一条记录，但我真的想通过将每个组名转换为一个值为 0 或 1 的字段来“展平”它，具体取决于 usergroups_map 中是否有该用户的记录。

有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:11:30.750

如果组是固定的（用户、管理员），您可以使用如下内容：

```
SELECT
  u.id,
  u.username,
  count(case when um.group_id = 1 then 1 end) users,
  count(case when um.group_id = 2 then 1 end) manager
FROM
  user u INNER JOIN usergroups_map um
  ON u.id = um.user_id
GROUP BY
  u.id, u.username 
```

否则你需要使用这样的解决方案：

```
SET @sql = NULL;
SELECT GROUP_CONCAT(CONCAT('count(case when um.group_id=',id,' then 1 end) ', title))
FROM `group`
INTO @sql;

SET @sql = CONCAT('SELECT u.id, u.username, ', @sql, ' FROM
  user u INNER JOIN usergroups_map um
  ON u.id = um.user_id
GROUP BY
  u.id, u.username');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请[在此处](http://sqlfiddle.com/#!2/3fffb/6)查看小提琴。

如果需要创建视图，只需修改上面的代码：

```
SET @sql = NULL;
SELECT GROUP_CONCAT(CONCAT('count(case when um.group_id=',id,' then 1 end) ', title))
FROM `group`
INTO @sql;

SET @sql = CONCAT('CREATE VIEW yourview AS SELECT u.id, u.username, ', @sql, ' FROM
  user u INNER JOIN usergroups_map um
  ON u.id = um.user_id
GROUP BY
  u.id, u.username');

DROP VIEW IF EXISTS yourview;

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# image - Github上markdown文件的图像垂直对齐

> ID：15100184
> 
> 赞同：0
> 
> 时间：2013-02-26T22:01:06.197
> 
> 标签：image, github, alignment, markdown

将垂直对齐应用于数学公式图像的最佳方法是什么，这些图像被github的markdown文件中的文本包围，例如

文本 文本 ![eq1][] 文本 文本

到目前为止我发现的一种方法需要放置 img html 标记而不是 ![][] 降价语法，例如

text text img style="vertical-align:middle" src="https://raw.github.com/danielkorzekwa/bayes-scala/master/doc/moment_matching/eq1.png" text text

但这不是一个真正的选择，因为它会使降价文件完全不可读。

要查看 github 默认情况下如何将图像与数学公式对齐，请访问此页面： [https ://github.com/danielkorzekwa/bayes-scala/blob/master/doc/moment_matching/moment_matching.md](https://github.com/danielkorzekwa/bayes-scala/blob/master/doc/moment_matching/moment_matching.md)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:24:54.450

最后我决定将 pdf 和 latex 文档附加到我的 markdown 文件中。markdown 格式并不真正适合编写数学密集型文档。

# iphone - 在哪里调用方法以重新加载应用程序从后台返回时的视图

> ID：15100189
> 
> 赞同：1
> 
> 时间：2013-02-26T22:01:22.840
> 
> 标签：iphone, ios, objective-c, cocoa-touch

在导航控制器中的一个视图中，我有一个方法`- (void) loadAlert`可以获取网页内容，对其进行解析，并将相关内容放在`UITextView`. 方法调用位于`viewDidAppear:`我的视图控制器的部分。当视图首次加载以及导航到视图时完全显示时，它工作正常。

我还希望在应用程序从后台返回时发生此数据加载。正如许多 Stackoverflow 帖子和其他来源所指出的那样，我将方法调用放入`applicationDidBecomeActive:`：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    MainViewController *mainView = [[mainViewController alloc] init];
    [mainView loadAlert];
} 
```

但是，当应用程序从后台返回时，视图中不会发生任何事情。我希望在从 Internet 获取内容时将`UITextView`其清除，`UIActivityIndicatorView`然后将新内容加载到`UITextView`.

我知道正在调用该方法，但视图中没有发生任何事情。我的感觉是调用此方法时视图尚未加载。**我可以把我的方法调用放在哪里，以便当应用程序从后台返回时，如果这个特定视图是导航控制器中显示的当前视图，它实际上会刷新 UI？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T22:06:29.863

您可以使用`UIApplicationWillEnterForegroundNotification`or `UIApplicationDidBecomeActiveNotification`，在应用程序的任何位置收听这些通知非常有效，您需要将控制器注册到这些通知之一，然后使用您的方法显示您想要的任何内容。

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(showYourView)
                                                 name:UIApplicationWillEnterForegroundNotification object:nil];

-(void) showYouView(){
 // do your stuff
} 
```

**笔记**

*最好的方法是使用 UIApplicationWillEnterForegroundNotification 因为它只会在用户从后台转到前台时运行，另一方面 UIApplicationDidBecomeActiveNotification 会在您的应用程序变为活动状态时运行*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:05:56.307

您正在创建一个新实例，`mainViewController`而不是使用已经存在的同一个实例。每当您执行 a`mainViewController *mainView = [[mainViewController alloc] init];`时，它都是一个新实例。您应该尝试访问视图控制器堆栈中的同一个实例并在其上调用此方法。

> 我可以把我的方法调用放在哪里，以便当应用程序从后台返回时，如果这个特定视图是导航控制器中显示的当前视图，它实际上会刷新 UI？

假设您已将 UINavigationController 作为属性添加到 appdelegate 中，您可以使用以下代码在`applicationWillEnterForeground`topViewController 上调用 loadAlert。

```
UIViewController *aViewController = self.navigationController.topViewController;
if ([aViewController isKindOfClass:[mainViewController class]]) {
    [(mainViewController *)aViewController loadAlert];
} 
```

在旁注中，请以大写字母开头类名。例如：- 你应该使用which`MainViewController`而不是`mainViewController`通常代表一个变量名。

**更新：**

如果您正在使用该`UIApplicationWillEnterForegroundNotification`方法，则应在`notificationMethod`方法中添加上述代码以确保`mainViewController`这是可见的当前视图控制器。否则它可能会表现出一些意想不到的行为。

所以这样的事情应该是好的：

```
- (void)notificationMethod {

   UIViewController *aViewController = self.navigationController.topViewController;
   if ([aViewController isKindOfClass:[mainViewController class]]) {
      [(mainViewController *)aViewController loadAlert];
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T22:18:09.553

处理此问题的正确方法是让您`MainViewController`的`UIApplicationWillEnterForegroundNotification`. 然后当收到通知时，调用该`loadAlert`方法。

在 MainViewController.m 中：

```
- (void)enterForeground {
    [self loadAlert];
}

- (void)viewDidLoad {
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(enterForeground) name:UIApplicationWillEnterForegroundNotification object:nil];
}

- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationWillEnterForegroundNotification object:nil];
} 
```

您无需为此在应用程序委托中执行任何操作。这样，MainViewController 负责知道应该发生什么以及何时发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:07:04.013

我对我的一个项目也有同样的需求，我必须通过notificationCenter系统来处理这件事。

首先，您需要在应用程序进入前台时启动通知：

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"app_entering_foreground" object:self];
} 
```

然后你需要在你需要的地方实际收听这个特定的通知。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateUI) @"app_entering_foreground" object:nil]; 
```

# mysql - 从 *varchar* 单元格中提取数字并在纯 mysql 中对它们进行数学运算

> ID：15100190
> 
> 赞同：0
> 
> 时间：2013-02-26T22:01:25.910
> 
> 标签：mysql

是否可以从*varchar*单元格中提取数字，对它们进行数学运算并使用结果更新单元格？

IE

*   列中的单元格具有值“24a10 b”

*   取 24、10 并注意 b

*   做 24*10 = 240

*   如果有 ab，则减 1

*   在该字段中存储 239（将“24a10 b”更改为“239”）

*   对表中的所有行执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:37:24.910

这适用于您的示例：

```
SELECT
  (col * SUBSTRING_INDEX(col, 'a', -1)) - (RIGHT(col, 1)='B')
FROM
  op 
```

请[在此处](http://sqlfiddle.com/#!2/f2a08/1)查看小提琴。

*   `col`是你的价值`'24a10 b'`
*   `SUBSTRING_INDEX(col, 'a', -1)`返回 '​​a' 右侧的字符串部分，即`'10 b'`
*   `'24a10 b' * '10 b'`自动将字符串转换为整数的乘法`24*10`
*   `RIGHT(col,1)='B'`如果 col 以 ab 结尾，则为 true (=1)，否则为 false (0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:44:01.260

当然可以，但是 SQL 是围绕原子值公理（即[第一范式](http://en.wikipedia.org/wiki/First_normal_form)）设计的。几乎不需要拆分字段。您需要在精心设计的数据库中使用它的唯一时间是您可能只想使用日期字段的月份或年份的日期。虽然你肯定会发现某些白痴设计的数据库违反了这个核心概念，但从试图弄清​​楚如何使用这些设计开始是个坏主意。

此外，您“存储在该单元格 239”的最后一步让我认为您仍在查看数据库，就像它们是电子表格一样。他们不是。数据库的另一个核心组件是行的顺序并不重要。另一方面，字段总是与同一行中的其他字段相关。您可以将其中一个字段的值设置为该记录的 ID 字段为 239 的值，但您通常不会关心记录是第 239 个这一事实。

也就是说，这里有一个查询可以做你想做的事：

假设：该字段的格式为“11a22 b”。也就是说，一个两位数，后跟一个字母，然后是另一个两位数，可能后跟一个空格和字母“b”。

```
SELECT CAST(SUBSTRING(Value,1,2) AS INT) 
    * CAST(SUBSTRING(Value,3,2) AS INT) 
    + CASE RIGHT(Value,1) WHEN 'b' THEN -1 ELSE 0 END
FROM MyTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:36:25.083

如果有人正在寻找类似的东西，完整的答案是这样的：

```
UPDATE `table`
SET cell = (
CAST( SUBSTRING( cell, 1, 2 ) AS UNSIGNED )
*
CAST( SUBSTRING( cell, 4, 2 ) AS UNSIGNED ) 
-
(SUBSTRING( latitud, 7, 1 ) = 'b')  
)
WHERE 1; 
```

# asp.net-mvc - 生产中的 JavaScript 错误，但不是开发/测试（捆绑不处理 Linux 样式的行尾）

> ID：15100191
> 
> 赞同：1
> 
> 时间：2013-02-26T22:01:26.783
> 
> 标签：asp.net-mvc, asp.net-mvc-4, system.web.optimization, scriptbundle

我有一个使用以下 javascript 库在 MVC4 上运行的网站。jQuery、jQueryValidate、Bootstrap、FineUploader、MaskedInput、Knockout 和 Modernizr。我也有我的应用程序特定的javascript。它们都是使用`System.Web.Optimization`命名空间中的脚本捆绑功能加载的。我的包看起来像这样。

```
bundles.Add(new ScriptBundle("~/bundles/scripts").Include(
    "~/Scripts/jquery-1.7*",
    "~/Scripts/modernizr.*",
    "~/Scripts/bootstrap*",
    "~/Scripts/jquery.validate.*",
    "~/Scripts/jquery.maskedinput-1.3.*",
    "~/Scripts/MyApp*",
    "~/Scripts/jquery.unobtrusive*",
    "~/Scripts/knockout-*",
    "~/Scripts/jquery.fineuploader-3.0.js")); 
```

但是由于某种原因，当该站点在我的开发系统上正常工作并且在测试时，它在生产中失败并出现 javascript 错误。错误对我来说毫无意义......

```
Uncaught ReferenceError: options is not defined 
```

现在，当我检查 javascript 文件时，所有内容当然都被缩小和压缩了，所以没有运气从中破译任何东西。有没有其他人在捆绑中遇到过这样的奇怪行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:01:26.783

因此，在疯狂地与这件事作斗争之后（因为我发布了一个损坏的构建），我将我的开发副本切换为始终应用优化，即使它是在调试构建中。

```
BundleTable.EnableOptimizations = true; 
```

我现在在我的机器上遇到了同样的问题（至少它是一致的）。我开始思考这个版本的变化以及自上次发布以来唯一修改的内容是来自 Nuget 包的一些更新和对管理任务的一些代码更改。我开始追踪 Nuget 包的变化，并检查了那些有 javascript 变化的包，希望能找到线索。在浏览完每一个之后，我去测试页面并且问题消失了，但我还没有进行任何更改！但是，当我尝试查看它时，我确实遇到了一个提示。

![不一致的行尾](../Images/7cf2f20183944eeaf6f92b2e96a6337d.png)

当我看到这个时，我心不在焉地点击了[是]，但是当问题消失时，我恢复了更改并再次尝试了该站点，JavaScript 错误又回来了。我已经粘贴了对该文件的一些更改，以设置[触发 ajax 请求的元素](https://stackoverflow.com/questions/6630189/how-to-use-this-inside-mvc3-ajax-actionlink-onbegin-oncomplete-events/14611314#14611314)[的上下文`this`](https://stackoverflow.com/questions/6630189/how-to-use-this-inside-mvc3-ajax-actionlink-onbegin-oncomplete-events/14611314#14611314)。我之前做过这个，但我需要在从 Nuget 更新源包后重新应用更改。当时我想我已经在 Sublime 中做到了这一点，我猜它复制了一些 Linux 风格的行尾。

长话短说，System.Web.Optimization 命名空间的 Bundling 功能中似乎存在一个错误，该错误会阻塞 Linux 样式的行尾。我希望这可以帮助其他可能遇到此问题的人。

# flash - 如何设置 AS3 以通过套接字与远程服务器通信？

> ID：15100192
> 
> 赞同：0
> 
> 时间：2013-02-26T22:01:28.767
> 
> 标签：flash, node.js, crossdomain.xml

我在本地主机中有一个使用 flash 和 node.js 的基本迷你游戏，我希望将后端移动到远程服务器。我创建了一个 Amazon EC2 实例，安装了 node.js、npm 并让它运行并在端口 1337 上侦听。问题是我现在在 flash 中遇到沙盒安全错误。我正在使用 FlashDevelop 并将“使用网络服务”编译为 true。我不确定如何处理 crossdomain.xml 问题。我是否需要在 node.js 中侦听此特定文件的请求并输出内容？

我的动作脚本：

```
var host:String = "54.234.175.99";
Security.allowDomain(host);
Security.allowInsecureDomain(host);
Security.loadPolicyFile("xmlsocket://" + host + ":" +  "1337");

xmlSocket = new XMLSocket(host, 1337);
xmlSocket.addEventListener(DataEvent.DATA, onData);
xmlSocket.addEventListener(Event.CONNECT, onConnect);
xmlSocket.addEventListener(IOErrorEvent.IO_ERROR, onIOError); 
```

在节点中，我使用 net 模块通过套接字与闪存通信：

```
var net = require('net'); 
```

var server = net.createServer(function(socket) {

```
socket.on("connect", function(client){
    console.log('new flash client connected')
});

var data_buffer=''; 
socket.on('data', function(data) {
    console.log('received data'+data);
            // do stuff with data 

}); 
```

# matlab - fftshift/ifftshift

> ID：15100195
> 
> 赞同：4
> 
> 时间：2013-02-26T22:01:38.857
> 
> 标签：matlab, fft, frequency, ifft

请参阅 和 的`fftshift`描述`ifftshift`。我想了解如何在 Matlab`fft`中调用上述两个函数。`fftn`

假设我的信号具有一定的频率成分；现在，频率数组通常可以存储为：

```
f = (-N/2:N/2-1)*df;

f = (1:N)*(df/2);

f = [(0:N/2-1) (-N/2:-1)]; 
```

对于前面提到的 3 个研究案例，`fft`最好`fftshift`的调用方式是什么？`ifftshift`

调用命令序列或错误命令对信号的标准偏差有什么影响？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T22:05:52.867

的结果`fft`是（用你的符号表示） indices `(0:N-1)`。 `fftshift`只需将其转换为`[(N/2:N-1) (0:(N/2-1))]`. ^* `ifftshift`只是恢复原始索引。

由于这只是对样本重新排序，因此对标准偏差没有任何影响。

* * *

[* 请注意，由于周期性，sample`k`等价于 sample`k+N`或`k-N`等。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T21:57:28.300

Matlab 文档简直就是在扼杀它。但实验表明

> > ifftshift([1 2 3 4 5])

答案=

```
 3     4     5     1     2 
```

> > fftshift([1 2 3 4 5])

答案=

```
 4     5     1     2     3 
```

它只是在神奇的 DFT 位置 [N/2] 周围交换。在 matlab 中实现的 FFT 使用通常的索引 (0:N-1)。据我了解，如果您的设置是不在 (0:N-1) 中的离散函数，则这是准备输入 DFT 的额外功能...

# python - 融化唯一索引的熊猫数据框，用于 ggplot/rpy2

> ID：15100197
> 
> 赞同：3
> 
> 时间：2013-02-26T22:01:39.800
> 
> 标签：python, numpy, pandas, ggplot2, rpy2

这个问题与（[在 Python pandas 中拆分和连接数据帧以使用 rpy2 进行绘图](https://stackoverflow.com/questions/15053834/splitting-and-concatenating-dataframes-in-python-pandas-for-plotting-with-rpy2)）有关。我正在使用 pandas 数据框，并对它们进行各种熔化/解熔化/连接操作，以便我可以使用 rpy2 用 ggplot2 绘制它们。我对如何对具有唯一索引的数据帧执行这些操作感到有些困惑。假设数据框`df`有一个唯一的列， `runner_id`该列记录每个跑步者完成两场比赛之一的时间和速度，比赛`A`和`B`. 每个跑步者都是独一无二的，因此 DataFrame 可以为两个跑步者具有这种形状，`bob`并且`mary`：

```
df = pandas.DataFrame([{"runner_id": "bob", "time_A": 30,
                        "time_B": 25, "speed_A": 5, "speed_B": 10},
                       {"runner_id": "mary", "time_A": 29,
                        "time_B": 19, "speed_A": 8, "speed_B": 12}]) 
```

`df`看起来像这样：

```
 runner_id  speed_A  speed_B  time_A  time_B
0       bob        5       10      30      25
1      mary        8       12      29      19 
```

由于跑步者是独一无二的，因此索引 dataframe 非常方便`runner_id`。它还可以防止意外添加重复条目，因为我们知道每个跑步者的所有信息都应该保存在跑步者的行中，并且每个跑步者不能有多个行：

```
df = df.set_index("runner_id") 
```

问题是 ggplot 需要使用列名中的信息`time_A, time_B, speed_A, speed_B`，如果我们想绘制两个种族之间的时间或速度差异。然后`df`需要看起来像这样：

```
runner_id  race  time  speed 
bob        A     ...   ...
mary       A     
bob        B
mary       B 
```

这样我们就可以做到：

```
ggplot2.ggplot(df) + \
ggplot2.geom_point(aes_string(x="time", y="speed", colour="race")) ... 
```

虽然这违反了`runner_id`条目的唯一性，因为跑步者需要被复制。一般如何处理这个问题？是否有一个很好的形式可以保留`df`，允许唯一的索引，但也方便 ggplot 的融化表示？我发现在这两者之间来回切换非常困难/令人困惑。每场比赛有不同的时间/速度列的第一个表示，由跑步者索引，非常直观，而 ggplot 的融化表示令人困惑，似乎很浪费。

任何关于在这两个或关于如何保留数据框的一般规则之间来回转换的想法都会有所帮助。`set_index`使用ggplot时的答案不是索引（不是调用）吗？这种数据帧有首选格式吗？

一种可能的解决方案是在解开/熔化时始终索引/取消索引 df，例如：

```
melted_df = pandas.melt(df.reset_index(), id_vars="runner_id") 
```

但这似乎容易出错。例如，如果我想计算每个跑步者的速度和`A`比赛时间的平均值，我可以尝试列出`A`条目：

```
# This is already complicated
a_entries = melted_df[map(lambda x: x.endswith("_A"), melted_df["variable"])] 
```

我知道有冗余/融化的表示，所以很难做不重复计算跑步者的操作，因为每个跑步者现在出现两次：

```
 runner_id variable  value
0       bob  speed_A      5
1      mary  speed_A      8
4       bob   time_A     30
5      mary   time_A     29 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:15:20.653

熔化和铸造数据帧是 R. Hadley 包中的常见操作`reshape`（并且发现`reshape2`原始数据帧的地方`melt()`很受欢迎是有原因的）。

使用 ggplot2，您还可以将数据添加到图层中。用你的例子：

```
import rpy2.robjects.pandas2ri
rpy2.robjects.pandas2ri.activate()

p = ggplot2.ggplot(rpy2.robjects.conversion.py2ri(df)) + \
    ggplot2.geom_point(ggplot2.aes_string(x="time_A",y="speed_A"),colour="#ff0000") + \
    ggplot2.geom_point(ggplot2.aes_string(x="time_B",y="speed_B"),colour="#0000ff") + \
    ggplot2.scale_x_continuous("time") + \
    ggplot2.scale_y_continuous("speed")
p.plot() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T18:57:54.030

对一个长问题的简短而迟到的回答：您似乎可以使用一些帮助来理解长格式数据帧。每个值都是唯一的，因为每场比赛只有一个具有给定名称的“跑步者”。它起初可以融化你的大脑，但对于利用 ggplot2 的功能来说非常强大和必不可少。Hadley Wickham 在几篇文章中很好地解释了这一点，例如：http [://had.co.nz/reshape/paper-dsc2005.pdf](http://had.co.nz/reshape/paper-dsc2005.pdf)

# android - setLayoutParams 在 Android 3.2 上抛出 nullPointerException

> ID：15100200
> 
> 赞同：1
> 
> 时间：2013-02-26T22:01:44.833
> 
> 标签：android, nullpointerexception

我正在自定义我的应用程序以在平板电脑上显示为 2 列。我将左右列的宽度设置为`setLayoutParams`. 它在 Android 3.0 和 Android 3.1 模拟器上运行良好。在 Android 3.2 模拟器上，它提供了一个`nullPointerException`.

这是我的代码的一部分：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Debug.LogCat(activityName + ":OnCreate");

    setContentView(R.layout.home);

    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);

    // set layout for tablets
    final boolean isTablet = getResources().getBoolean(R.bool.isTablet);
    if (isTablet) {
        // set screenorientation to landscape
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
        // get half screensize
        int width = metrics.heightPixels / 2;
        // set left column to width
        LinearLayout left_column = (LinearLayout) findViewById(R.id.left_column);
        LinearLayout.LayoutParams lp_left_column = new LinearLayout.LayoutParams(width,LinearLayout.LayoutParams.MATCH_PARENT);

        // this is where the NPE occurs
        left_column.setLayoutParams(lp_left_column);

        // set right column to width
        LinearLayout right_column = (LinearLayout) findViewById(R.id.right_column);
        LinearLayout.LayoutParams lp_right_column = new LinearLayout.LayoutParams(width,LinearLayout.LayoutParams.MATCH_PARENT);
        right_column.setLayoutParams(lp_right_column);

    } 
```

这是我的布局（home.xml），我在其中指定了 id 的 left_column 和 right_column：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
android:gravity="center" >    

<LinearLayout
    android:id="@+id/left_column"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <LinearLayout
        android:id="@+id/ll_gallery"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <Gallery
            android:id="@+id/gallery"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            />
    </LinearLayout>
    <LinearLayout
        android:id="@+id/ll_largeImage"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_gravity="center"
        android:layout_weight="1" >
        <ImageView 
            android:id="@+id/largeImage"
            android:contentDescription="@string/largeImage"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"         
            android:onClick="playSound" />
    </LinearLayout>
    <LinearLayout
        android:id="@+id/ll_buttons"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/right_column" 
    android:layout_width="0dip"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@color/white"
    android:visibility="visible"
    android:layout_weight="1" >

    <ImageView 
        android:id="@+id/infoImage"
        android:contentDescription="@string/largeImage"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center" />
</LinearLayout> 
```

有谁知道它为什么`nullPointerException`在*Android 3.2*上给出一个？

编辑：2013 年 6 月 3 日：正如我在对 dymmeh 的回答中所说，布尔 isTablet 设置在 layouts.xml 文件夹值、values-large 和 values-xlarge 中。对 logcat 的调试显示它正在 if 语句内部，因此该部分正在工作。但在此之后，我在 2 个文件夹中也有一个 home.xml：layout 和 layout-land。事实证明，对于 Android 3.2，它从布局文件夹中获取 home.xml，而不是从布局域中获取。我试图在 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE) 之后将 setContentView(R.layout.home) 放在 if 语句中，但它仍然给出 NPE。所以我继续搜索为什么 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE) 不适用于 Android 3.2。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:29:42.910

找到了！

setRequestedOrientation 工作正常，但 home.xml 不是从布局域中获取的，因为从 Android 3.2 开始，有一种支持多屏幕的新方法。然后您应该使用 sw*N*dp，如下所述：[DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

所以我在 res: layout-sw600dp 中创建了一个新文件夹，并将景观 home.xml 放在该文件夹中，这就是解决方案。

# ruby - 在 git 存储库中获取正确的文件修改时间（在 ruby 中）

> ID：15100203
> 
> 赞同：1
> 
> 时间：2013-02-26T22:01:55.673
> 
> 标签：ruby, git

在我在分支之间来回切换的 git 存储库中，文件修改时间如`mtime`ruby​​ 所示（或基于操作系统的修改时间度量，例如 through `ls -l`）显示我上次更改分支的时间而不是实际时间文件被修改。

我了解 Git 存储所有文件的文件修改时间，但我如何获得显示的实际修改日期，例如来自 ruby​​ 调用？

例如，我看到我可以从命令行得到这个：

`git log -1 --format="%ad" -- path/to/file`

但不确定最好的 Ruby 方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:26:05.280

我相信这是不可能的；即 git 只存储提交时间，而不是修改时间。但是，您可能想查看[metastore](http://david.hardeman.nu/software.php)，它是 git 的补充，可将此元数据存储在单独的文件中。

但是，由于提交时间足以满足您的目的，您可以直接从 ruby​​ 运行命令；就像是：

```
%x(git log -1 --format='%ci' path/to/file) 
```

或者您可以使用其中一个[ruby​​ git 库](https://www.ruby-toolbox.com/categories/git_Tools)。我自己从来没有使用过这些库，所以我不能保证它们中的任何一个。

编辑：添加了关于提交时间的部分，因为这足以满足 OP 的目的。

# c# - Exchange Webservice Managed API - 按扩展属性查找项目

> ID：15100204
> 
> 赞同：6
> 
> 时间：2013-02-26T22:01:58.100
> 
> 标签：c#, exchange-server, exchangewebservices

我曾尝试在与 EWS 的约会中使用扩展属性，但我似乎无法再次找到约会。设置属性部分等于这个问题中显示的部分：

[如何从 ASP.NET 中的 Exchange Web 服务托管 API 2.0 更新约会](https://stackoverflow.com/questions/13972311/how-to-update-an-appointment-from-exchange-web-service-managed-api-2-0-in-asp-ne)

当我尝试检索约会时，我遵循了以下示例：

[http://msdn.microsoft.com/en-us/uc14trainingcourse_5l_topic3#_Toc254008129](http://msdn.microsoft.com/en-us/uc14trainingcourse_5l_topic3#_Toc254008129) [http://msdn.microsoft.com/en-us/library/exchange/dd633697(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/dd633697(v=exchg.80).aspx)

但是，当我进行查找时，我从来没有收到任何约会。

这是查找的代码：

```
 ItemView view = new ItemView(10);

        // Get the GUID for the property set.
        Guid MyPropertySetId = new Guid("{" + cGuid + "}");

        // Create a definition for the extended property.
        ExtendedPropertyDefinition extendedPropertyDefinition =
          new ExtendedPropertyDefinition(MyPropertySetId, "AppointmentID", MapiPropertyType.String);

        view.PropertySet =
         new PropertySet(
               BasePropertySet.IdOnly,
               ItemSchema.Subject,
               AppointmentSchema.Start,
               AppointmentSchema.End, extendedPropertyDefinition);

        SearchFilter filter = new SearchFilter.Exists(extendedPropertyDefinition);

        FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, filter,
            view); 
```

任何帮助是极大的赞赏。

**编辑：** 当我尝试创建文档显示的属性时：

[http://msdn.microsoft.com/en-us/library/exchange/dd633654(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/dd633654(v=exchg.80).aspx)

它失败了，因为它是作为属性值添加的 Guid。：-/

**再次编辑：** 刚刚尝试获取今天的所有约会，并从我刚刚创建的约会中获取属性，它说的和我存储的一样，没有 {}，所以它必须与过滤器有关。

**再次编辑*** 它与

```
 ExtendedPropertyDefinition extendedProperty = new ExtendedPropertyDefinition( 
```

如果我使用：

```
 new ExtendedPropertyDefinition(
                DefaultExtendedPropertySet.Appointment,
                "AppointmentID",
                MapiPropertyType.String); 
```

它会找到所有具有属性的约会，但如果我搜索一个特定的约会：

```
 Guid MyPropertySetId = new Guid("{" + cGuid + "}");

 ExtendedPropertyDefinition extendedProperty =
            new ExtendedPropertyDefinition(
                MyPropertySetId,
                "AppointmentID",
                MapiPropertyType.String); 
```

然后什么也找不到。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-28T12:50:36.587

这是一个示例代码，如何使用 customid 创建约会并在保存后找到它：

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
        service.AutodiscoverUrl("someone@somewhere.com");

        ExtendedPropertyDefinition def = new ExtendedPropertyDefinition(DefaultExtendedPropertySet.PublicStrings, "AppointmenId", MapiPropertyType.String);

        Guid testid = Guid.NewGuid ();

        Appointment appointment = new Appointment(service);
        appointment.Subject = "Test";
        appointment.Start = DateTime.Now.AddHours(1);
        appointment.End = DateTime.Now.AddHours(2);
        appointment.SetExtendedProperty(def, testid.ToString());
        appointment.Save(WellKnownFolderName.Calendar);

        SearchFilter filter = new SearchFilter.IsEqualTo(def, testid.ToString());

        FindItemsResults<Item> fir = service.FindItems(WellKnownFolderName.Calendar, filter, new ItemView(10)); 
```

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:42:56.983

您在收件箱中搜索约会。在那里你永远找不到它们。尝试在日历中搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:00:47.877

这是一个将 guid 作为扩展属性并根据 guid 获取约会的示例。

```
private static readonly PropertyDefinitionBase AppointementIdPropertyDefinition = new ExtendedPropertyDefinition(DefaultExtendedPropertySet.PublicStrings, "AppointmentID", MapiPropertyType.String);
public static PropertySet PropertySet = new PropertySet(BasePropertySet.FirstClassProperties, AppointementIdPropertyDefinition);

//Setting the property for the appointment 
 public static void SetGuidForAppointement(Appointment appointment)
{
    try
    {
        appointment.SetExtendedProperty((ExtendedPropertyDefinition)AppointementIdPropertyDefinition, Guid.NewGuid().ToString());
        appointment.Update(ConflictResolutionMode.AlwaysOverwrite, SendInvitationsOrCancellationsMode.SendToNone);
    }
    catch (Exception ex)
    {
        // logging the exception
    }
}

//Getting the property for the appointment
 public static string GetGuidForAppointement(Appointment appointment)
{
    var result = "";
    try
    {
        appointment.Load(PropertySet);
        foreach (var extendedProperty in appointment.ExtendedProperties)
        {
            if (extendedProperty.PropertyDefinition.Name == "AppointmentID")
            {
                result = extendedProperty.Value.ToString();
            }
        }
    }
    catch (Exception ex)
    {
     // logging the exception
    }
    return result;
} 
```

# php - jquery从url获取值然后重新排序div

> ID：15100211
> 
> 赞同：0
> 
> 时间：2013-02-26T22:02:13.250
> 
> 标签：php, jquery

例如，我正在尝试从 url 中获取参数。

www.x.com/?source=display&zone=lc&topic=cloud

所以，如果主题是“云”，那么我想重新订购 3 个单独的 div。

到目前为止，这是我在标题中的内容：

```
<script type="text/javascript">
if (window.location.search.indexOf('topic=cloud') > -1) {
    alert('track present');
    $(".one").insertAfter(".two");
} else {
    $(".two").insertAfter(".three");
    alert('track not here');
}
</script> 
```

和html是这样的：

```
<div class="one">seo</div>
<div class="two">cloud</div>
<div class="three">social</div> 
```

我收到警报，但是当我使用`.insertAfter();`

我什么也得不到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:08:17.677

如果您也可以使用 PHP - 并且根据您的标签可以 - 我更喜欢在 PHP 中执行此操作，因此不需要客户端操作。基本上：

```
<?php if (isset($_GET['topic']) && 'cloud' == $_GET['topic']) { ?>
    <div class="one"></div>
    <div class="two">cloud</div>
    <div class="three">social</div>
<?php } else { ?>
    <div class="one">seo</div>        
    <div class="three">social</div>
    <div class="two">cloud</div>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:08:29.147

使用准备好的文档，您的代码将执行您的预期：

```
<script type="text/javascript">
$(function() { //<-- you are missing this

if (window.location.search.indexOf('topic=cloud') > -1) {
    alert('track present');
    $(".one").insertAfter(".two");
} else {
    $(".two").insertAfter(".three");
    alert('track not here');
}

}); // <-- and the closing element
</script> 
```

* * *

以下工作正常，试一试，看看它与您的代码相比如何（也请阅读 Juan Mendes 评论，因为他解释了正在发生的事情）：

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script>
    $(function() {  
        if (window.location.search.indexOf('topic=cloud') > -1) {
            alert('track present');
            $(".one").insertAfter(".two");
        } else {
            $(".two").insertAfter(".three");
            alert('track not here');
        }    
    });
  </script>
</head>
<body>
  <div class="one">seo</div>
  <div class="two">cloud</div>
  <div class="three">social</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:06:31.873

可能您收到与`$`尚未定义的 jQuery 相关的错误。查看 FireBug 或 Web Developer 工具进行检查。直到该行，您还没有引用 jQuery `$`，因此不会引发错误。

**可能性 1：**确保页面中包含 jQuery。

如果是本地的，则如下所示：

`<script type="text/javascript" src="js/jquery.js"></script>`

如果使用 CDN（托管）版本，则如下所示：

`<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>`

**可能性 2：**确保在引用之前包含 jQuery `$`。将您的`<script>`包含移到脚本的其余部分之上。

**可能性 3：**如果您正在使用另一个库，例如 Prototype，请`jQuery`直接引用（而不是`$`）：

```
<script type="text/javascript">
if (window.location.search.indexOf('topic=cloud') > -1) {
    alert('track present');
    jQuery(".one").insertAfter(".two"); // note jQuery, not $
} else {
    jQuery(".two").insertAfter(".three"); // note jQuery, not $
    alert('track not here');
}
</script> 
```

# matlab - 在 Matlab 中计算一维波形中脉冲的最佳方法

> ID：15100224
> 
> 赞同：2
> 
> 时间：2013-02-26T22:03:03.850
> 
> 标签：matlab, signal-processing, vectorization

我有一个由方脉冲（+ 一些噪声）组成的信号，这是它的一小部分：

![在此处输入图像描述](../Images/b95651a00096c6fd531ff0cae2a7f0f1.png)

我寻找一种有效且稳健的方法来计算我有多少脉冲。

这是我到目前为止所做的：

幅度有点嘈杂，但 SNR 很好，我可以阈值：

```
data = data>1; 
```

每个脉冲的长度可能是嘈杂的，所以我忽略它并使用`diff`, 来获得导数（+ 和 -），找出有多少非零元素，然后除以 2（因为每个脉冲有 2 个导数峰值）。

```
dd=diff(data);

num_of_pulses=length(find(diff(dd)))/2 
```

这是最好的方法吗？我被告知不要使用`diff`，因为它可能太吵了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:18:13.437

根据您对数据的描述，我认为这将起作用。

```
numberOfPulses = nnz(diff(data > 1) > 0) 
```

您可以使用 可靠地找到脉冲样本`data > 1`，然后使用`diff() > 0`查找从无脉冲到脉冲的转换，最后`nnz()`对它们进行计数。

# jakarta-ee - 瓷砖装饰过滤器示例

> ID：15100229
> 
> 赞同：2
> 
> 时间：2013-02-26T22:03:14.273
> 
> 标签：jakarta-ee, decorator, servlet-filters, tiles

我正在尝试在瓷砖中使用[装饰过滤器](http://tiles.apache.org/framework/apidocs/org/apache/tiles/web/util/TilesDecorationFilter.html)，但无法清楚地了解它是如何工作的。

> 过滤器将拦截对指定 url 模式的所有请求，将初始请求路径存储为“body”属性，然后呈现“test.definition”定义。过滤器只会重新装饰那些不包含与阻止令牌“布局”关联的请求属性的请求。

我只是不明白...它应该与装饰器模式相同吗？或者任何人都可以提供一个简单的解释不同的例子吗？

编辑：我也发现[了这个材料](http://www.developer.com/java/article.php/3697171/Tip-Use-Tiles-Decorations-Reduce-Configuration.htm)。作者说：

> 下面的过滤器配置将拦截所有转发到的 JSP 请求，使用名为“body”的属性配置名为“standard”的切片定义，并调用该定义。

我仍然不明白：/这是否意味着我只有一个转发操作（例如，我提交了一个表单，它被处理然后我被转发到主页）并且过滤器创建了一个在某处呈现的特定定义？但是这个定义在哪里定义？或者这个定义在哪里呈现？

# c# - System.UnauthorizedAccessException：在 WP8 中更新 ListPicker 时跨线程访问无效

> ID：15100230
> 
> 赞同：1
> 
> 时间：2013-02-26T22:03:16.027
> 
> 标签：c#, windows-phone-8

我正在构建简单的 WP8 应用程序。我正在尝试`ListPicker`使用作为另一个类成员的集合来更新控件。此类通过异步调用获取此数据。当收到响应触发 MainPage 上更新`ListPicker`.

```
 public void coinUtil_ReceivedPriceEvent(object sender, EventArgs e)
    {
        PopulateListPicker();
    }

    public void PopulateListPicker()
    {

        try
        {
            foreach (KeyValuePair<string, double> item in coinUtil.cointPriceList)
            {

                listPickerCurrencies.Items.Add(item.Key);
            }
        }
        catch (UnauthorizedAccessException ex)
        {
            System.Diagnostics.Debug.WriteLine(ex.ToString());
        }

    } 
```

我收到以下异常：

> System.Windows.ni.dll 中出现“System.UnauthorizedAccessException”类型的第一次机会异常
> 
> System.Windows.ni.dll 中发生了“System.UnauthorizedAccessException”类型的异常，并且在托管/本机边界 System.UnauthorizedAccessException：无效的跨线程访问之前未处理。在 MS.Internal.XcpImports.CheckThread() 在 System.Windows.DependencyObject.GetValueInternal(DependencyProperty dp) 在 System.Windows.FrameworkElement.GetValueInternal(DependencyProperty dp) 在 System.Windows.Controls.ItemsControl.get_Items() 在 BitCoinTail.MainPage .PopulateListPicker()

奇怪的是，当我尝试用一​​个简单的字符串访问这个类的另一个成员时，它工作正常。我在 WP7 中进行了一些开发，但不记得曾经遇到过这个异常。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:05:41.447

您需要使用调度程序来编组对正确线程的调用 - 请参阅[http://www.codeproject.com/Articles/368983/Invoking-through-the-Dispatcher-on-Windows-Phone-a](http://www.codeproject.com/Articles/368983/Invoking-through-the-Dispatcher-on-Windows-Phone-a)

# c# - 排序日期和时间

> ID：15100233
> 
> 赞同：0
> 
> 时间：2013-02-26T22:03:25.920
> 
> 标签：c#

我正在尝试编写一个控制台应用程序，以根据开始日期按升序对我的日期和时间进行排序，这是我正在尝试做的一个示例。

我的输入：

```
休息开始1 = 15/02/12 12.30PM
休息结束 1= 15/02/12 01.30PM
休息开始 2 = 15/02/12 11.00AM
休息结束 2 = 15/02/12 12.00PM
休息开始 3 = 15/02/12 12.00PM
休息结束 3= 15/02/12 01.00PM

```

我期待我的输出应该是这样的：

```
休息开始 1 = 15/02/12 11.00AM
休息结束 1= 15/02/12 12.00PM
休息开始 2 = 15/02/12 12.00PM
休息结束 2= 15/02/12 01.00PM
休息开始 3 = 15/02/12 12.30PM
休息结束 3= 15/02/12 01.30PM

```

请建议我解决这个问题的最佳方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T22:20:11.507

*我建议您将原始开始值和结束值配对，然后仅按开始日期排序。*

首先，您必须将`Start`和配对`End`。例如与类：

```
public class Break
{
    public DateTime Start { get; set; }
    public DateTime End { get; set; }
} 
```

然后，当您填充此类对象的集合时，只需`Start`使用 LINQ 对其进行排序。

```
var breaks = new List<Break>()
                 {
                     new Break()
                         {
                             Start = new DateTime(2012,2,15,12,30,0),
                             End = new DateTime(2012,2,15,13,30,0)
                             ... /// etc.
                         }
                 };

var ordered = breaks.OrderBy(s => s.Start);
foreach (var ord in ordered)
{
    System.Console.WriteLine(ord.Start);
    System.Console.WriteLine(ord.End);
} 
```

**编辑**

*要创建成对的日期时间对象，您可以使用如下方法：*

```
public static Break ConvertToBreak(string startDate, string endDate, object gmtOffset)
{
     var dtStart = UnixTimeConverter(startDate, System.Convert.ToDecimal(gmtOffset));
     var dtEnd =  UnixTimeConverter(endDate, System.Convert.ToDecimal(gmtOffset));
     return new Break{Start = dtStart, End = dtEnd};
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:07:30.983

您可以将所有 DateTimes 放入数组或列表中，并使用标准方法对数组或列表进行排序，请参见此处的示例：[http ://www.csharp-examples.net/sort-array](http://www.csharp-examples.net/sort-array)

在 .NET 中，[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)实现了`IComparable`接口，因此很容易比较/排序这些变量。

这么说，您可以有两个数组或一个矩阵并分别对它们中的每一个进行排序，因为从您的示例看来，您从 start 列中获取一个值，从 en 列中获取一个值等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T22:11:15.977

似乎您只想对日期/时间对象进行排序。由于您发布的代码不是 C#，我会做一些假设。

首先：假设您在[`DateTime`object](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)中有日期/时间组合。我假设你有他们的清单。

```
List<DateTime> dateTimes = new List<DateTime>();
dateTimes.AddRange(new []
{
    new DateTime(2012, 02, 15, 12, 30, 00),  // 15/02/12 12.30PM
    new DateTime(2012, 02, 15, 13, 30, 00),  // 15/02/12 01.30PM
    new DateTime(2012, 02, 15, 11, 00, 00),  // 15/02/12 11.00AM
    new DateTime(2012, 02, 15, 12, 00, 00),  // 15/02/12 12.00PM
    new DateTime(2012, 02, 15, 12, 00, 00),  // 15/02/12 12.00PM
    new DateTime(2012, 02, 15, 01, 00, 00),  // 15/02/12 01.00PM
}); 
```

您可以像这样对它们进行就地排序：

```
dateTimes.Sort(); 
```

* * *

或者，如果您有一个数组或任何`IEnumerable<T>`一般的数组，您可以获得一个新的有序可枚举序列：

```
IEnumerable<DateTime> dateTimes = new []
{
    new DateTime(2012, 02, 15, 12, 30, 00),  // 15/02/12 12.30PM
    new DateTime(2012, 02, 15, 13, 30, 00),  // 15/02/12 01.30PM
    new DateTime(2012, 02, 15, 11, 00, 00),  // 15/02/12 11.00AM
    new DateTime(2012, 02, 15, 12, 00, 00),  // 15/02/12 12.00PM
    new DateTime(2012, 02, 15, 12, 00, 00),  // 15/02/12 12.00PM
    new DateTime(2012, 02, 15, 01, 00, 00),  // 15/02/12 01.00PM
};

var orderedDateTimes = dateTimes.OrderBy(dt => dt); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T22:14:05.610

这是我的做法

我不知道您对如何发送它们有什么具体要求，或者结束时间是否总是比开始时间晚 1 小时，这个例子简单地展示了如何对它们进行相应的排序。

```
//GetYourInputValues() refers to however you plans on pulling in these inputs.
//It wasn't made clear in your post how you planned to do that.
string[] inputValues = GetYourInputValues(); 

//List that we will build, then sort, then print out.
List<DateTime> sortedDateTime = new List<DateTime>();

//Parse them into DateTime variables
foreach(var input in inputValues)
{
    DateTime inputDate;
    if(DateTime.TryParse(input, inputDate))
        sortedDateTime.Add(inputDate);
}
//Sort them ascending (for descending, flip a and b values)
sortedDateTime.Sort((a, b) => a.CompareTo(b));

//Print out the newly sorted values to console.
foreach(DateTime dt in sortedDateTime)
{
    Console.WriteLine(dt.ToString("MM/dd/yy hh:mm:ss tt")):
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T22:17:10.517

**注意：**如果您应该将每个开始/结束视为一对（以便它们始终在一起），那么您必须进行一些小的更改（请参阅@mipe34 答案）。否则，这是一个完整的工作示例，说明如何执行此操作：

```
static void Main(string[] args) {
    string text = 
  @"break Start1 = 15/02/12 12.30PM
    break End1= 15/02/12 01.30PM
    break Start2 = 15/02/12 11.00AM
    break End2= 15/02/12 12.00PM
    break Start3 = 15/02/12 12.00PM
    break End3= 15/02/12 01.00PM";

    string[] splitted = text.Split(new string[] {"\n", "\r"}, StringSplitOptions.RemoveEmptyEntries);
    IList<DateTime> starts = new List<DateTime>();
    IList<DateTime> ends = new List<DateTime>();
    for (int i = 0; i < splitted.Length; i++) {
        string line = splitted[i].Trim();
        string date = line.Split('=')[1].Trim();
        DateTime d = DateTime.ParseExact(date, "dd/MM/yy hh.mmtt", null);
        if (line.StartsWith("break Start")) {
            starts.Add(d);
        }
        else {
            ends.Add(d);
        }
    }

    starts = starts.OrderBy(x => x).ToList();
    ends = ends.OrderBy(x => x).ToList();

    for (int i = 0; i < starts.Count; i++) {
        Console.WriteLine("break Start{0} = {1}", i + 1, starts[i].ToString("dd/MM/yy hh.mmtt"));
        Console.WriteLine("break End{0} = {1}", i + 1, ends[i].ToString("dd/MM/yy hh.mmtt"));
    }

} 
```

# javascript - 使用 javascript 检测手机/平板电脑/网络客户端

> ID：15100234
> 
> 赞同：7
> 
> 时间：2013-02-26T22:03:28.557
> 
> 标签：javascript, browser-detection, device-detection

我正在尝试检测最终用户是在手机、平板电脑还是个人电脑上

我已经在谷歌上搜索了一段时间，显然没有简单的解决方案。

好吧，我想我不应该使用分辨率，因为现在有些平板电脑具有惊人的分辨率。

我不应该依赖方向，因为 windows8 笔记本电脑可以像平板电脑一样旋转。（响应式设计对我目前的项目来说太难了）

我一直在尝试使用 UserAgent（认为它也有它的缺点），但无法让它工作，下面是我用来区分手机/平板电脑和 PC 的不同版本的在线组合，它们只是不起作用并且我不知道为什么

```
var agents = ['android', 'webos', 'iphone', 'ipad', 'blackberry','iemobile','phone','mobile'];
                for(i in agents) {
                    if(navigator.userAgent.toLowerCase().match('/'+agents[i]+'/i')) {
                        return true;
                    }
                }

if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
                return true;
            }

 if( navigator.userAgent.match(/Android/i)
                 || navigator.userAgent.match(/webOS/i)
                 || navigator.userAgent.match(/iPhone/i)
                 || navigator.userAgent.match(/iPad/i)
                 || navigator.userAgent.match(/iPod/i)
                 || navigator.userAgent.match(/BlackBerry/i)
                 || navigator.userAgent.match(/Windows Phone/i)
                 || navigator.userAgent.match(/bada/i)
                 || navigator.userAgent.match(/Bada/i)
                 ){
                return true;
            } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T00:05:09.420

是的，您不应该依赖分辨率或方向。但是基于 em 的媒体查询呢？

为了使用 javascript 读取媒体查询的结果，您可以尝试将媒体查询添加到您的 css 以向您的页面添加不可见的内容：

```
@media all and (max-width: 45em) {
    body:after {
        content: 'smallscreen';
        display: none;
    }
} 
```

然后通过javascript读取内容：

```
var size = window.getComputedStyle(document.body,':after').getPropertyValue('content'); 
```

然后确定要加载的内容：

```
if (size.indexOf('smallscreen') !=-1) {
    // Load some content for smaller screens.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T23:02:34.903

用户代理非常不可靠，实际上可以被客户端伪造。我建议专注于特定功能而不是特定设备。[Modernizer](http://modernizr.com/)是一个库，可用于检测客户端设备上是否有可用的功能。这将允许您检测本地存储等是否可用。[如果您对响应式 Web 设计](http://en.wikipedia.org/wiki/Responsive_web_design)之类的东西感兴趣，而不是设备/客户端特定功能，您可以使用 Twitter 的[Bootstrap](http://twitter.github.com/bootstrap/index.html)之类的库。在脚手架页面的底部，它甚至有一些功能可以检测手机、平板电脑和台式机，尽管我相信它是基于分辨率的。

--编辑添加--

我还想强调的是，您应该问自己为什么您真正关心用户使用的是什么设备。检测您关心的特定功能比检测所有可用功能要容易得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T23:10:58.067

我建议查看媒体查询和`<viewport>`标签。

一些关于响应式设计背后的思考过程的优秀文章。

[http://www.html5rocks.com/en/mobile/mobifying/](http://www.html5rocks.com/en/mobile/mobifying/)

[http://www.magazine.org/timecom-gm-craig-ettinger-bringing-responsive-web-design-iconic-brand](http://www.magazine.org/timecom-gm-craig-ettinger-bringing-responsive-web-design-iconic-brand)

问题仍然存在，你想要完成什么？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-05T03:32:11.640

快速回答为什么代理匹配对给定列表不起作用：“Android”不在返回的（代理）字符串中！假设没有一个给定的字符串是正确的并且骗子比比皆是。

我已经发布了证明 android 案例的测试代码。

# tomcat - 在 tomcat 中的 .war 文件之间自动共享相同的 .jar 文件

> ID：15100236
> 
> 赞同：1
> 
> 时间：2013-02-26T22:03:36.497
> 
> 标签：tomcat, tomcat7

注意：一般来说，我对 JVM 部署还很陌生，所以请随时告诉我这是一个完全错误的方法 :)

我有一堆自包含的 .war 文件，它们的所有依赖项都包含为 .jar 文件。不过，我的一些项目具有共享依赖项。**是否可以设置 tomcat 以自动检测相同的 .jar 文件并跨主机重用它们？**还是我必须手动从 .war 中排除这些 .jar 依赖项，并将它们放在 CATALINA_HOME/lib 中？

我想一个检查 .jar 文件信息和校验和的系统将是一个足够好的测试。

注意：我需要这个的实际原因是由于 JNI。共享其他共享依赖项当然会很好，以降低内存使用率等，但对于使用相同 JNI 模块的 .wars 来说，这是绝对要求，因为当 Tomcat 尝试加载 .jar 时我会遇到类加载器异常第二次加载 JNI 模块的文件。这显然不受 Tomcat 支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:06:07.350

您需要手动完成并将它们填充到类路径上的共享空间中。

可以是 CATALINA_HOME/lib，也可以自己手动将它们添加到 Tomcat 的起始类路径中。

但无论哪种方式，您都需要手动管理它，或者您可以使用某种脚本自动执行它，但是（任何类型的）jar 更改需要重新启动 Tomcat。

# tortoisesvn - TortoiseSVN 错误“工作副本被锁定”“sqlite：尝试写入只读数据库” - 这可能是由不正确的权限引起的吗？

> ID：15100243
> 
> 赞同：31
> 
> 时间：2013-02-26T22:04:04.047
> 
> 标签：tortoisesvn

尝试更新时，应用程序的工作副本返回所描述的错误。

此错误是否是由于没有足够的权限写入文件夹（或其中的某些文件）而导致的？

我试过“释放锁”功能，乌龟告诉我没有锁。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-01-07T16:24:27.310

我在 Windows 下使用 TortoiseSVN 时遇到了这个错误。显然，该`.svn`文件夹有一个小的 SQLite 数据库文件，如果您没有写入权限，则会导致该错误。

当我通过 Windows shell（右键单击）菜单使用 TortoiseSVN 时，为了解决这个问题，**我运行了 Windows 资源管理器，我曾经以****管理员**身份导航到文件夹，一切正常。

当然，另一种解决方案是向您尝试使用 TortoiseSVN 的用户授予写入权限。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-03T22:22:15.450

共享上的工作副本经常会导致问题（包括/尤其是权限问题） - 因此，不推荐使用此配置。实际上，在很多 Samba 版本中，SVN 1.5 或 1.6 触发了一个错误，导致了许多类似的问题。它可以通过[更改 Samba 配置](https://serverfault.com/a/161293)来解决 - 但这可能无法解决您的所有问题。最佳做法是不要做你正在做的事情 - 只在本地操作 WC，而不是通过共享

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-03T18:37:54.007

虽然与乌龟无关，但我只是遇到了这个错误，因为我以 root 身份运行 svn update（忘记了我是在 Linux 机器上使用 su 的）并且发生了冲突。

修复它就像在 .svn 文件夹中的文件 wc.db 上执行 chown -R user .svn 然后 chmod ug=rwx 一样简单。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-10-28T14:50:39.560

如果您的组无法对 SVN 服务器上存储库中的 rep-cache.db 文件进行写访问，则可能会发生此错误。您将需要访问 SVN 服务器或获得有权访问的人。

搜索 rep-cache.db 文件：

```
find / | grep rep-cache.db 
```

转到您正在使用的存储库下的**db子目录，然后键入以下内容：**

```
chmod g+w rep-cache.db 
```

通常，发生此错误时，该组只有只读访问权限。这将使组读/写，这应该阻止错误发生。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-22T10:08:59.847

我收到此错误，因为我将存储库移动到了新服务器。主文件夹是由 root 创建的。结果，恢复的文件和新创建的文件之间的权限不一致。主文件夹上的 chown -R 解决了这个问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-02T09:17:21.987

我最近收到此错误，这是因为我使用错误的用户帐户登录了我的开发环境。我已经使用本地管理员帐户在开发 VM 上设置了项目。当我登录不是本地 Windows 管理员的个人帐户时，我收到此错误。所以在我的情况下，这是由于 Windows 权限。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-01-02T10:10:05.467

将整个 SVN 存储库复制到另一个位置时，我遇到了同样的错误。当我检查 Windows 权限时，一切似乎都很好。我重新应用了 Windows 权限，突然 Windows 应用了权限，从那时起一切正常。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-08-29T08:07:50.733

## 对于 Ubuntu 用户

当您在公共目录上设置项目时，例如`home`不要`sudo`在其上使用。例如：手动`sudo mkdir folderName`使用或创建它。`mkdir folderName`

当您使用创建时，`sudo`您将文件夹锁定。（检查带有和不带的图像`sudo`）

[![在此处输入图像描述](../Images/111df5da28c63b4929d8bfc36e3d5aa7.png)](https://i.stack.imgur.com/1gk7S.png)

* * *

也不要使用`sudo svn co http://path/to/trunk/ ./` **use without`sudo`**

像这样

`svn co http://path/to/trunk/ ./`

* * *

> **刚刚得到这个错误并很好地解决了**

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-18T09:06:10.023

在 Windows 7 系统上有这个，等待 10 分钟后 SVN 更新可用，没有问题。可能是 Tortoise 启动过程中的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-20T11:26:33.333

我也面临同样的问题。

分辨率为：

chmod g+w rep-cache.db 这个文件可以在 /db/ 下找到

# css - 如何检查浏览器类型和版本然后获取正确的 css？

> ID：15100245
> 
> 赞同：0
> 
> 时间：2013-02-26T22:04:14.423
> 
> 标签：css, cross-browser

我希望能够根据用户的浏览器类型和版本提供正确的 css 文件。在 FF 和 Chrome 中，我完全没有问题。但是当谈到 IE7-9 时，事情开始变得非常奇怪和破碎。我已经编写了一些 IE 特定的 css 页面，但不确定当用户使用 IE 时如何提供这些 css 页面。

有什么js可以做到吗？甚至使用java的后端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T13:14:37.243

只需为 IE 浏览器使用不同的 CSS 文件，如下所示。

```
<!--[if IE 7.0]><link href="css/ie7.css" type="text/css" media="screen" rel="stylesheet" /><![endif]-->
<!--[if IE 8.0]><link href="css/ie8.css" type="text/css" media="screen" rel="stylesheet" /><![endif]-->
<!--[if IE 9.0]><link href="css/ie8.css" type="text/css" media="screen" rel="stylesheet" /><![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T13:31:42.567

有很多方法可以做到这一点。但很可能您只需要处理 Internet Explorer，其他浏览器（如 Chrome、Firefox、Opera 等）处理网站的方式非常相似。

您可以使用简单的 HTML 条件，例如

```
<!--[if lt IE 9]>
    <link rel="stylesheet" type="text/css" href="/assets/css/ie8.css" />
<![endif]--> 
```

在其中更改您想要的 IE 版本。

但是，如果您仍然需要并希望处理多个浏览器，您应该做一些简单的 php，将[this](http://php.net/manual/en/function.get-browser.php)与[this](http://www.user-agents.org/)一起使用，这不是处理此类事情的最佳方法，因为用户代理总是可以更改并且不应该被依赖上。你也可以在 JS 中做类似的事情，但是 php 更适合重定向和使用条件加载内容。

# python - Python - 二项式期权定价代码

> ID：15100246
> 
> 赞同：2
> 
> 时间：2013-02-26T22:04:17.183
> 
> 标签：python, options, finance

我正在尝试完成此代码，但我不断收到未知错误消息。我不明白我做错了什么。对不起，我是python新手！

我将不胜感激任何帮助！！

```
import math

def nCr(n,r):
    f = math.factorial
    return f(n) / f(r) / f(n-r)

class Option(object):

    def __init__(self,s0,u,d,r,t,strike):
        self.s0=s0
        self.u=u
        self.d=d
        self.r=r
        self.t=t
        self.strike=strike

    def price(self):
        q = (self.r - self.d) / (self.u - self.d)
        prc = 0
        temp_stock = 0
        temp_payout = 0
        for x in range(1,self.t+1):
            temp_stock = self.strike*(self.u**(4-x))*(self.d**(x-1))
            temp_payout = max(temp_stock-self.strike,0)
            prc += nCr(self.t,x-1)*(q**(4-x))*((1-q)**(x-1))*temp_payout
        prc = prc / (self.r**self.t)
        return prc

newOption = Option(100,1.07,0.93458,1.01,3,100)
print newOption.price() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:17:01.767

您的代码至少存在以下问题：

*   您必须在程序的开头包含数学模块：

    导入数学

*   您必须用“**”运算符替换“^”运算符。

（如果这还不够，请检查缩进，因为您在此消息中的缩进有一个小问题：函数 price() 向左移动）

通过这些更正，您的程序会产生输出：6.77357485848。

检查这是否是您想要的输出。

# php - 从字符串中获取一部分

> ID：15100249
> 
> 赞同：1
> 
> 时间：2013-02-26T22:04:32.337
> 
> 标签：php, regex, string, explode

我正在尝试从一个站点收集所有 CatID...URL 结构是...

> [http://www.abc.com/family/index.jsp?categoryId=12436777](http://www.abc.com/family/index.jsp?categoryId=12436777)

我对它感兴趣，`categoryId`在这种情况下是`12436777`

我的问题是

哪个最好，正则表达式或字符串爆炸？

如果是正则表达式，请帮助我，我对此很不好..

另外，我必须考虑像这样的网址

> [http://www.abc.com/product/index.jsp?productId=12282785](http://www.abc.com/product/index.jsp?productId=12282785)

我试过

```
$array = explode("http://www.abc.com/family/index.jsp?categoryId=", $loc); 

foreach ($array as $part) {
        $zee[] = $part[1];
} 
```

但它什么也没给我..

感谢帮助..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T22:08:42.383

您可以使用[parse_url](http://www.php.net/parse-url)可靠地为您提供查询字符串：

```
$parts = parse_url('http://www.abc.com/family/index.jsp?categoryId=12436777'); 
```

然后[parse_str](http://www.php.net/manual/en/function.parse-str.php)解析出变量：

```
parse_str($parts['query'], $result);
echo $result['categoryId']; // outputs 12436777 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:06:51.420

您可以使用以下正则表达式：

```
http://.+?Id=(\d+) 
```

第一组将包含您要查找的 ID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T22:08:43.980

怎么样：

```
$url_parts = parse_url('http://www.abc.com/family/index.jsp?categoryId=12436777');

if (isset($url_parts['query'])) {
  $query_parts = explode('&', $url_parts['query']); 

  $keys = array(); 
  foreach ($query_parts as $part) { 
      $item = explode('=', $part); 
      $keys[$item[0]] = $item[1]; 
  } 

  $category_id = isset($keys['categoryId']) ? $keys['categoryId'] : 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T22:06:45.253

## 代码：

```
$url = "http://www.abc.com/family/index.jsp?categoryId=12436777";

$parts = Explode('=', $url);

$id = $parts[count($parts) - 1]; 
```

## 示范：

*   [http://stepolabs.com/lab/explode/index.php](http://stepolabs.com/lab/explode/index.php)

*   [http://stepolabs.com/lab/explode/index.php.txt](http://stepolabs.com/lab/explode/index.php.txt)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T22:08:20.660

尝试...

```
 list(,$id) = explode('=','http://www.abc.com/product/index.jsp?productId=12282785'); 
```

如果字符串中有**1** 这将起作用`=`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T22:08:45.170

explode' 的第一个参数是分隔项。如果您想使用它，请尝试以下方法：

```
$loc = "http://www.abc.com/family/index.jsp?categoryId=12436777";
$res=explode("=", $loc); 
```

并且 id 将在`$res[1]`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-26T22:12:32.673

如果您确定 what , 是唯一的数字，请执行此操作

```
$st = "http://www.abc.com/family/index.jsp?categoryId=12436777";

echo preg_filter('/[^0-9]/','',$st); 
```

# c++ - 调用堆栈仅显示第三方库

> ID：15100250
> 
> 赞同：-1
> 
> 时间：2013-02-26T22:04:36.753
> 
> 标签：c++, visual-studio-2010, debugging, opencv

在我的程序崩溃时，Visual Studio 给了我下面的调用堆栈，它没有引用任何 Iv 编写的代码或我的源代码中的行号，这是否表明 OpenCV 库中存在错误？

我认为仍然可以在我的程序中找到触发崩溃的源操作/函数，就像通常的情况一样..

```
 opencv_imgproc243d.dll!cv::RGB2RGB<unsigned char>::operator()(const unsigned char * src=0x00000000, unsigned char * dst=0x0f010050, int n=1920)  Line 208 + 0x6 bytes   C++
>   opencv_imgproc243d.dll!cv::CvtColorLoop_Invoker<cv::RGB2RGB<unsigned char> >::operator()(const cv::Range & range={...})  Line 176 + 0x1d bytes  C++
    opencv_core243d.dll!`anonymous namespace'::ParallelLoopBodyWrapper::operator()(const cv::Range & sr={...})  Line 134 + 0x17 bytes   C++
    opencv_core243d.dll!`anonymous namespace'::ProxyLoopBody::operator()(int i=0)  Line 177 C++
    opencv_core243d.dll!Concurrency::_Parallel_chunk_helper_invoke<int,unsigned int,`anonymous namespace'::ProxyLoopBody,0>::_Invoke(const int & _First=0, unsigned int & _Index=0, const `anonymous-namespace'::ProxyLoopBody & _Func={...})  Line 1445    C++
    opencv_core243d.dll!Concurrency::_Parallel_chunk_helper<int,unsigned int,`anonymous namespace'::ProxyLoopBody,0>::operator()()  Line 1833 + 0x16 bytes  C++
    opencv_core243d.dll!Concurrency::task_handle<Concurrency::_Parallel_chunk_helper<int,unsigned int,`anonymous namespace'::ProxyLoopBody,0> >::operator()()  Line 116 C++
    opencv_core243d.dll!Concurrency::details::_UnrealizedChore::_InvokeBridge<Concurrency::task_handle<Concurrency::_Parallel_chunk_helper<int,unsigned int,`anonymous namespace'::ProxyLoopBody,0> > >(Concurrency::task_handle<Concurrency::_Parallel_chunk_helper<int,unsigned int,`anonymous namespace'::ProxyLoopBody,0> > * _PChore=0x036fb148 {_M_first=0 _M_step=1 _M_function={...} ...})  Line 3495   C++
    msvcr100d.dll!Concurrency::details::_UnrealizedChore::_StructuredChoreWrapper(Concurrency::details::_UnrealizedChore * pChore=0x036fb148 {_M_first=0 _M_step=1 _M_function={...} ...})  Line 99 + 0xc bytes C++
    msvcr100d.dll!Concurrency::details::_UnrealizedChore::_Invoke()  Line 3454 + 0xc bytes  C++
    msvcr100d.dll!Concurrency::details::WorkItem::Invoke()  Line 75 C++
    msvcr100d.dll!Concurrency::details::InternalContextBase::ExecuteChoreInline(Concurrency::details::WorkItem * pWork=0x0fb8f7dc)  Line 1385   C++
    msvcr100d.dll!Concurrency::details::InternalContextBase::Dispatch(Concurrency::DispatchState * pDispatchState=0x0fb8f7fc)  Line 1478    C++
    msvcr100d.dll!Concurrency::details::FreeThreadProxy::Dispatch()  Line 157   C++
    msvcr100d.dll!Concurrency::details::ThreadProxy::ThreadProxyMain(void * lpParameter=0x029c2160)  Line 162   C++
    kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
    ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
    ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

看起来断言失败是因为函数接收到损坏的 Mat，因为这是在崩溃时输出到控制台的。 ![在此处输入图像描述](../Images/988793aed0357a355950f28101616658.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:39:11.110

我会冒险猜测，当在您的代码中调用方法 cvtColor() 时，opencv 在它自己的线程中运行它。

[您可以在此处](http://fossies.org/dox/OpenCV-2.4.3/imgproc_2src_2color_8cpp_source.html)查看 opencv 源代码，它表明该方法在 Color.cpp 文件中被调用。

RGB2RGB 格式类似于从一种颜色空间转换为另一种颜色空间时使用的格式，我猜这可能是在创建副本。

因此，我可能会在您的代码中查找以下命令作为原因。

```
cvtColor(src, dst, CV_RGB2RGB);
or 
Mat A = Mat(...);
Mat B = A.clone();

I don't think this will cause it as this just copies header information.
Mat B(A);

or

A.copyTo(B); 
```

您可以排除已将它们转换为 BGR 或 GREY 的 Mat。事实上，据我了解，opencv 在 BGR 颜色空间中工作，您很可能已经在某处将 Mat 转换为 RGB，这可能是一个很好的搜索起点。

**编辑**

该断言还表明您试图将一个空的 Mat 克隆（）到另一个。

```
Asset(   y==0   ) 
```

如果这种情况只是偶尔发生，那么我会寻找 if() 语句，或发生克隆或转换的条件情况。

# android - 未启用 AVD 硬件按钮

> ID：15100251
> 
> 赞同：69
> 
> 时间：2013-02-26T22:04:36.417
> 
> 标签：android, configuration, sdk, android-emulator, avd

我刚刚下载并安装了新的 Android SDK。当我启动模拟器时，在模拟器屏幕上显示*“硬按钮未在 AVD 中启用”*。有`Home`, `Menu`, 等都被禁用。如何启用这些按钮？

![](../Images/3b9a2f18e7ae75f40e0bea5d902f8597.png)

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-02-26T22:15:29.113

您需要修改设备定义。为此，请在 Android 虚拟设备管理器中找到“设备定义”选项卡，然后双击您正在使用的设备。

确保按钮设置为硬件。

![在此处输入图像描述](../Images/8df3f3f2e359f1ad5537b823e7dca19b.png)

不要忘记更新您的设备设置：

![在此处输入图像描述](../Images/d3c13cd17fcc43c839dba43db19cfdfe.png)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-10-23T00:21:44.820

我知道这个问题已经很久没有问过了，但只是想让其他人知道。

您可以手动编辑**config.ini**设置（在 Windows 7 上，您可以在 C:/Users/ **the_user** /.android/avd/ **the_emulator_name** /config.ini 上找到它）。

找出这条线：

```
hw.mainKeys=no 
```

并更改为：

```
hw.mainKeys=yes 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-14T19:56:53.593

要在代表最新 Android 设备的模拟器上测试您的应用程序，您可以使用新的 WXGA720 皮肤（它是 xhdpi，普通屏幕设备）创建一个 AVD。请注意，模拟器目前不支持没有硬件导航按钮的设备的新屏幕导航栏，因此在使用此皮肤时，**您必须使用键盘键 Home 作为 Home 键，ESC 作为返回键，F2 或 Page - 菜单按钮**。

取自：http: [//developer.android.com/tools/revisions/platforms.html](http://developer.android.com/tools/revisions/platforms.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-11-17T14:48:37.420

对于 linux，我不得不使用和修改 tato.rodrigo 和 johndodo 的解决方案。

编辑`~/.android/avd/<emulator name>/config.ini`

要设置的值是

`hw.keyboard=yes`

`hw.mainKeys=yes`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-23T17:24:38.333

我必须删除我的 AVD 并在激活硬件按钮的情况下完全重新创建它才能使其正常工作。由于某种原因，简单地修改现有设备定义并不能解决它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-05T18:46:48.757

接受的答案现在有点过时了，因为 android 模拟器界面发生了一些变化。

如果您需要在您的 android 模拟器上显示硬件按钮，您必须在您的 android 模拟器设置 -> 硬件配置文件中取消选中此切换：

[![在此处输入图像描述](../Images/28aa657fd33666d3e0c171afb918a166.png)](https://i.stack.imgur.com/gMULI.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-25T01:33:23.187

转到工具 > Android > SDK 管理器 > 工具 > 管理 AVD > 选择您的模拟器 > 编辑和管理您的设置并重新启动 Android Studio

如果你不明白请点击链接有截图图片的详细信息

[http://solutionfrominternet.blogspot.com/2015/01/how-to-show-system-navigation-bar-in.html](http://solutionfrominternet.blogspot.com/2015/01/how-to-show-system-navigation-bar-in.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-18T10:16:18.420

对于那些无法使其工作的人：在重新创建 AVD 之前，首先尝试按下数字锁定键，因为这会影响`Fn`键的行为。在我的情况下，如果numlock关闭，`F2`则不起作用。

# c++ - 尝试访问类的字符串成员变量时出现段错误 - C++

> ID：15100253
> 
> 赞同：0
> 
> 时间：2013-02-26T22:04:40.773
> 
> 标签：c++, string, segmentation-fault, member

这是我的 HeapNode 模板类定义：

```
#ifndef HEAP_N

#define HEAP_N

template <class T>
class HeapNode{

public:
    // Constructor
    HeapNode(T item = T(), int new_freq = 0, int new_right = 1, 
             int new_left = 1, int new_parent = 1);

    // Accessor Functions
    T data();
    int frequency();
    int right_child();
    int left_child();
    int parent();

    // Mutator Functions
    void set_data(T item);
    void set_frequency(int new_freq);
    void set_right(int new_right);
    void set_left(int new_left);
    void set_parent(int new_parent);

    // Operators
    HeapNode operator =(const HeapNode& other);
    bool operator >(const HeapNode& other);

private:
    T datafield;    // contains the data of the node
    int freq;       // frequency
    int l_child;    // index of left child
    int r_child;    // index of right child
    int parent_;    // index of parent
};

#include "HeapNode.template"

#endif 
```

这些分别是 mutator 和 accessor 函数：

```
template <class T>
void HeapNode<T>::set_data(T item){
    datafield = item;
}

template <class T>
T HeapNode<T>::data(){
    return(datafield);
} 
```

这是进行函数调用的函数：

```
void insert_or_update(string value, Heap<HeapNode<string> >& heap){ 

    HeapNode<string> temp;
    temp.set_data(value);
    temp.set_frequency(1);

        string ex = temp.data(); // The seg fault actually occurs in the find() function below, but any attempt to get temp.data() seg faults so the location is irrelevant

    if(!heap.empty()){  
        int index = heap.find(temp);
        if(index != -1){
            heap.inc_frequency(index);          
        }
        else{
            heap.insert(temp);
        }
    }
    else{
        heap.insert(temp);
    }   
} 
```

段故障发生在

```
string ex = temp.data(); 
```

线。

这些函数适用于非字符串对象，但是当我使用字符串（常量字符串和变量字符串，两者）时会出现段错误。

我尝试使用实现

```
datafield = item; 
```

使用复制构造函数的行：

```
datafield = T(item); 
```

但这也没有用。既没有通过引用传递，也没有设置

```
datafield 
```

成为公共成员并直接更改它。

注意：这必须在 C++ 98 编译器上编译，所以我不能使用字符串移动功能！

如果您需要更多信息，请告诉我。

非常感谢！

# sql - SQL 查询时间间隔。语法错误。

> ID：15100254
> 
> 赞同：1
> 
> 时间：2013-02-26T22:04:40.847
> 
> 标签：sql, sql-server, sql-server-2008, group-by

在这种情况下，看似简单的练习变成了无济于事。我什至无法弄清楚我的语法。

`Readings`表包含多个用户的坐标和时间读数。我现在只想将其组织为每个用户的连续时间间隔。

**资料**：

```
CREATE TABLE [Readings] (
user_id varchar(10),
reading_time int, 
x decimal(10,2),
y decimal(10,2) );

INSERT INTO Readings VALUES  
('u1', 60, 345, 400),
('u1', 100, 560,300), 
('u2', 35, 1024, 250), 
('u1', 90, 450, 450), 
('u3', 150, 600, 100), 
('u3', 100, 500, 125); 
```

**我的错误代码**：

```
SELECT r.user_id, r.reading_time start_time, rm.reading_time end_time, 
       (CONVERT(varchar, r.x)+' ; '+CONVERT(varchar, r.y)) start_point, 
       (CONVERT(varchar, rm.x)+' ; '+CONVERT(varchar, rm.y)) end_point 
FROM Readings r 
JOIN (SELECT TOP 1 r2.user_id, r2.reading_time, r2.x, r2.y
      FROM Readings r2
      WHERE r2.user_id=r.user_id and 
            r2.reading_time < r.reading_time
      ORDER BY r2.reading time desc) rm 
ON r.user_id=rm.user_id
ORDER BY 1,2 desc; 
```

你能指出我的语法错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:09:57.807

您不能使用`JOIN`类似的，您需要使用`CROSS APPLY`或`OUTER APPLY`（假设 SQL Server）。另外，请为 varchars 添加长度。现在，试试这个：

```
SELECT r.user_id, r.reading_time start_time, rm.reading_time end_time, 
       (CONVERT(varchar(10), r.x)+' ; '+CONVERT(varchar(10), r.y)) start_point, 
       (CONVERT(varchar(10), rm.x)+' ; '+CONVERT(varchar(10), rm.y)) end_point 
FROM Readings r 
OUTER APPLY (SELECT TOP 1 r2.user_id, r2.reading_time, r2.x, r2.y
             FROM Readings r2
             WHERE r2.user_id=r.user_id and 
                   r2.reading_time < r.reading_time
             ORDER BY r2.reading_time desc) rm 
ORDER BY 1,2 desc; 
```

[这是一个演示](http://sqlfiddle.com/#!3/fae71/8)供您尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:10:27.797

您的问题的一部分是您在子查询中引用表别名，只有在使用时才能这样做[`APPLY`](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)：

```
SELECT r.user_id, 
  r.reading_time start_time, 
  rm.reading_time end_time, 
  (CONVERT(varchar(10), r.x)+' ; '+CONVERT(varchar(10), r.y)) start_point, 
  (CONVERT(varchar(10), rm.x)+' ; '+CONVERT(varchar(10), rm.y)) end_point 
FROM Readings r 
CROSS APPLY
(
  SELECT TOP 1 r2.user_id, r2.reading_time, r2.x, r2.y
  FROM Readings r2
  WHERE r2.user_id=r.user_id and 
      r2.reading_time < r.reading_time
  ORDER BY r2.reading_time desc
) rm 
ORDER BY 1,2 desc; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/fae71/10)

# javascript - 如何在谷歌地图中画一个圆圈

> ID：15100255
> 
> 赞同：1
> 
> 时间：2013-02-26T22:04:42.627
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

如果用户有纬度、经度和半径，如何在谷歌地图中的某个位置（中心除外）绘制一个圆圈？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T22:11:08.403

```
// Create marker 
var marker = new google.maps.Marker({
  map: map,
  position: new google.maps.LatLng(53, -2.5),
  title: 'Some location'
});

// Add circle overlay and bind to marker
var circle = new google.maps.Circle({
  map: map,
  radius: 16093,    // 10 miles in metres
  fillColor: '#AA0000'
});

circle.bindTo('center', marker, 'position'); 
```

听起来如果你有你想要的纬度/经度和半径，那么你可以在地图上的某个地方定义一个点，然后将一个圆绑定到那个点。

[资源](https://stackoverflow.com/questions/825794/draw-radius-around-a-point-in-google-map)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:10:34.980

[给你](https://developers.google.com/maps/documentation/javascript/reference#Circle)！

```
google.maps.CircleOptions 
```

# file - 你可以使用PhoneGap.的JS方法读取www文件夹中的文件吗？

> ID：15100260
> 
> 赞同：1
> 
> 时间：2013-02-26T22:04:57.333
> 
> 标签：file, cordova, filesystems

使用 JavaScript（不是本机代码），是否可以从`www`例如所在的文件夹中读取文件夹和文件`phonegap.js`？

我已经设法通过 AJAX 调用读取文件内容，但我想知道是否有不同的方法。此外，您不能读取这样的文件夹。

据我所见，PG 公开的API`File`和`FileEntry`API 仅适用于磁盘上的持久性或临时性位置。我似乎无法指定我想要的任何位置。

那么，有没有办法用 JS 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:28:10.483

不，您不能使用 FileReader 执行此操作，因为它只能从文件系统中读取。对于您应用程序中的文件，它们实际上并不在文件系统上，您需要使用 XHR 来读取它们。

但是，我最近编写了一个 XhrFileReader 接口，允许您使用典型的 FileReader 方法，但仍然可以读取与您的应用程序打包的文件。

[http://simonmacdonald.blogspot.ca/2013/02/phonegap-android-xhrfilereader.html](http://simonmacdonald.blogspot.ca/2013/02/phonegap-android-xhrfilereader.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:05:29.913

您可能正在寻找“ [FileReader](http://docs.phonegap.com/en/2.4.0/cordova_file_file.md.html#FileReader_read_as_text) ”对象。

# java - 无法将调试器附加到 HTTP JVM，而是附加了 AMGR JVM

> ID：15100261
> 
> 赞同：0
> 
> 时间：2013-02-26T22:04:59.223
> 
> 标签：java, xpages, lotus-domino

Domino 配置为允许通过 notes.ini 参数进行远程调试：

```
JavaEnableDebug=1
JavaDebugOptions=transport=dt_socket,server=y,suspend=n,address=8703 
```

在 Domino Designer/Eclipse 中进行调试以调试一些 XPages 代码。调试器附加到不同的 JVM。正如我所发现的，以前运行 Java 代理的是 AMGR 的 JVM。断开和重新连接调试器没有帮助。

唯一的解决方法是关闭/重新启动 AMGR 以便能够附加到 HTTP JVM。

**是否可以为 AMGR 和 HTTP 调试器设置不同的端口？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:04:48.060

我就这个问题与开发人员进行了交谈，这是一个已知问题（对他们来说：）。当 Domino 服务器启动时，所有 JVM（AMGR / HTTP）将根据调试设置尝试连接到端口。因此，哪个进程首先抓住它就会获胜。

目前正在调查您是否可以拥有多个端口（我还没有 SPR）。

您可以尝试更改 notes.ini 中 SERVERTASKS 设置的顺序，以在 AMGR 之前启动 HTTP。否则停止这两个进程，然后启动你想要的那个。

# c# - 显示第一个结果 MVC3 剃刀视图的图像值

> ID：15100271
> 
> 赞同：0
> 
> 时间：2013-02-26T22:05:42.010
> 
> 标签：c#, asp.net-mvc-3, linq, razor

我有这个在主页上呈现的部分视图。我希望能够在视图中的十个结果列表上方显示十个结果中的第一个的图片。我在控制器中有以下

```
 public ActionResult _ChartHome()
    {
        var ChAd = db.Charts
        .Where(v => v.ChOk == true)
        .OrderBy(v => v.ChPosition)
           .Take(10);
        return PartialView(ChAd);
    } 
```

查看有

```
 <div class="thumb imgblock">   
 <div class="imlk">
 <img src="/images/@d.img?width=286&height=140" class="imlink" />
 </div> 

 @foreach (var d in Model)

 <div class="clear top5widg">
 <p class="musictitle">@d.ChTitle</p>
 <span class="chartno">#@d.ChPosition</span>
 <span class="artistname">By<br/>@d.ChArtist</span> 
 </div>       
  }
 </div> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:11:15.060

您可以使用 ViewBag 来保存第一项的值

```
public ActionResult _ChartHome()
    {
        var ChAd = db.Charts
        .Where(v => v.ChOk == true)
        .OrderBy(v => v.ChPosition)
           .Take(10);
        ViewBag.First = ChAd.FirstOrDefault();
        return PartialView(ChAd);
    } 
```

对视图代码执行以下操作

```
 @{
   var first = (FirstObjectType)ViewBag.First;
}

 <div class="thumb imgblock">   
 <div class="imlk">
 <img src="/images/@first.img?width=286&height=140" class="imlink" />
 </div> 

 @foreach (var d in Model)

 <div class="clear top5widg">
 <p class="musictitle">@d.ChTitle</p>
 <span class="chartno">#@d.ChPosition</span>
 <span class="artistname">By<br/>@d.ChArtist</span> 
 </div>       
  }
 </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:20:28.953

确保你在视图中定义了你的模型，那么你应该能够做到这一点：

```
@{
  var imgPath = Model.FirstOrDefault() == null ? "" : Model.FirstOrDefault().img; 
}
@if(imgPath != ""){
   <img src="/images/@imgPath ?width=286&height=140" class="imlink" />
} 
```

# java - 在条件中选择带有 order by 的查询

> ID：15100272
> 
> 赞同：0
> 
> 时间：2013-02-26T22:05:46.597
> 
> 标签：java, hibernate, criteria

我想从此 SQL 查询创建一个条件查询：

```
SELECT * FROM `Product` p
ORDER BY (SELECT COUNT(*) FROM `Sale` WHERE `product_id` = p.id) DESC 
```

我找不到使用子查询的方法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:13:15.640

尝试隐式连接：

```
select *
from (
    select 
         p.*, 
         (select count(*) from sale s where s.product_id = p.id) as cnt 
    from product p
)a 
order by cnt desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:13:26.510

`Order By`仅适用于`select`零件中存在的列。

所以基本上这样的事情会起作用：

```
SELECT Group, COUNT(*) as total
FROM table
GROUP BY Group
ORDER BY total DESC 
```

因此，对于您的情况，您可以执行以下操作：

```
SELECT *, (SELECT COUNT(*) FROM `Sale` WHERE `product_id` = p.id) as total FROM `Product` p
ORDER BY total DESC 
```

注意：这是完全未经测试的。

# android - TextView 实体阴影

> ID：15100274
> 
> 赞同：3
> 
> 时间：2013-02-26T22:05:52.807
> 
> 标签：android, textview

使用以下方法创建阴影：

```
textView.getPaint().setMaskFilter(new BlurMaskFilter(5, Blur.OUTER)); 
```

我发现它比 提供更好的结果`android:shadow...`，但是对于纯黑色，*“阴影”*仍然太模糊。

有没有办法让它在半径相对较大的情况下变得更锋利？

请注意，文档中提到我不应该修改它`TextPaint`，但是我需要一个带有透明文本的外阴影。如果可以在不直接修改 的情况下实现这一点`TextPaint`，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T10:53:18.600

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    super.onDraw(canvas);
} 
```

# javascript - 记住不同样式表的 Cookie 问题

> ID：15100277
> 
> 赞同：2
> 
> 时间：2013-02-26T22:05:54.720
> 
> 标签：javascript, cookies, stylesheet

我正在创建一个允许用户更改配色方案和文本大小的网站。我正在使用 cookie，因此当他们更改页面时，它会记住他们选择的配色方案/文本大小。

**问题是网站不能同时正确地“记住”配色方案和字体。**

当仅使用一个或另一个时，它可以在选择配色方案时可以很好地记住每个页面上所选的配色方案。

但是，当我更改配色方案并尝试更改字体大小时，网站停止记住所选配色方案并返回默认配色方案（但确实记住了文本大小）。

我猜这是因为我设置了两个 cookie 而不是一个，但是在尝试设置一个时我无法让代码工作。

```
<link class="changeme" rel="stylesheet" type="text/css" href="default.css"      title="Standard" />
<link rel="stylesheet" type="text/css" href="twitter/jquery.jtweetsanywhere-1.3.1.css" />

<!-- Loading Javascript -->
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="jquery.cookie.js"></script>
<script type="text/javascript" src="twitter/jquery.jtweetsanywhere-1.3.1.js"></script>
<script>      if($.cookie("css")) {
     $("link.changeme").attr("href",$.cookie("css"));
  }
$(document).ready(function() { 
  $("#nav li a").click(function() { 
     $("link.changeme").attr("href",$(this).attr('rel'));
     $.cookie("css",$(this).attr('rel'), {expires: 365, path: '/'});
     return false;
  });
 });
</script>
<script>
  if($.cookie("css2")) {
     $("link.changeme").attr("href",$.cookie("css2"));
  }
$(document).ready(function() { 
  $("#resize li a").click(function() { 
     $("link.changeme").attr("href",$(this).attr('rel'));
     $.cookie("css2",$(this).attr('rel'), {expires: 365, path: '/'});
     return false;
  });
 });
</script> 
```

更改样式表

```
<div id="colourscheme">
<ul id="nav">
<li><a class="colourtext">Colour Scheme: </a></li>
<li><a class="default" href="#" rel="default.css">Default</a></li>
<li><a class="wandb" href="#" rel="alternative.css">White and Black</a></li>
</ul> 
```

```
 <!-- Adjust font size -->
<div id="textadjustment">
<ul id="resize">
<li><a class="textsize">Resize Text: </a></li>
<li><a class="small" href="#" rel="default.css">A</a></li>
<li><a class="medium" href="#" rel="large.css">A</a></li>
<li><a class="large" href="#" rel="largest.css">A</a></li>
</ul>
</div> 
```

如果答案很简单，我仍在学习这一点，非常抱歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:24:51.377

使用两个样式表引用。

HTML 文档

```
<!doctype html>
<html>
  <head>
    <link class="colorCss" rel="stylesheet" type="text/css" href="defaultColor.css" />
    <link class="fontCss" rel="stylesheet" type="text/css" href="defaultFont.css" />
    <link rel="stylesheet" type="text/css" 
      href="twitter/jquery.jtweetsanywhere-1.3.1.css" />

    <!-- Loading Javascript -->
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" language="javascript" src="jquery.cookie.js"></script>
    <script type="text/javascript" src="twitter/jquery.jtweetsanywhere-1.3.1.js"></script>

    <script type="text/javascript">      

      if($.cookie("css")) {
        $("link.colorCss").attr("href",$.cookie("css"));
      }

      if($.cookie("css2")) {

        $("link.fontCss").attr("href",$.cookie("css2"));
      }

      $(document).ready(function() { 
        $("#nav li a").click(function() { 
         $("link.colorCss").attr("href",$(this).attr('rel'));
         $.cookie("css",$(this).attr('rel'), {expires: 365, path: '/'});
         return false;
        });

        $("#resize li a").click(function() { 

         $("link.fontCss").attr("href",$(this).attr('rel'));

         $.cookie("css2",$(this).attr('rel'), {expires: 365, path: '/'});
         return false;
        });
     });
    </script>
  </head>
  <body>
    <div id="colourscheme">
      <ul id="nav">
        <li><span class="colourtext">Colour Scheme: </span></li>
        <li><a class="default" href="#" rel="defaultColor.css">Default</a></li>
        <li><a class="wandb" href="#" rel="alternative.css">White and Black</a></li>
      </ul>
    </div>

    <div id="textadjustment">
      <ul id="resize">
        <li><span class="textsize">Resize Text: </span></li>
        <li><a class="small" href="#" rel="defaultFont.css">Default</a></li>
        <li><a class="medium" href="#" rel="large.css">Large</a></li>
        <li><a class="large" href="#" rel="largest.css">Largest</a></li>
      </ul>
    </div>
  </body>
</html> 
```

默认颜色.css

```
body {
  background-color: #aa0000;
  color: #0000aa;
} 
```

默认字体.css

```
body {
  font-size: 12px;
} 
```

替代.css

```
body {
  background-color: #000;
  color: #aaa;
} 
```

大.css

```
body {
  font-size: 14px;
} 
```

最大的.css

```
body {
  font-size: 18px;
} 
```

# jquery - jQuery循环动画

> ID：15100283
> 
> 赞同：-2
> 
> 时间：2013-02-26T22:06:10.873
> 
> 标签：jquery, loops, jquery-animate

我想循环播放动画。动画效果很好，但循环不起作用。请告诉我哪里出错了。

```
function loop(){
    $('.wuc-car').delay(5000).animate({"margin-left": "695px"}, "slow").delay(5000).animate({"margin-left": "40px"}, "slow");
}

loop(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:31:53.190

我设法用 setInterval 做到了

```
setInterval( function() {
    $('.wuc-car').delay(5000).animate({"margin-left": "695px"}, "slow").delay(5000).animate({"margin-left": "40px"}, "slow");
    }, 10000 ); 
```

# linq - 聚合 Linq 函数

> ID：15100289
> 
> 赞同：0
> 
> 时间：2013-02-26T22:06:20.277
> 
> 标签：linq, linq-to-entities

全部，

我在一个列表中有本地数据，其中 Col1、Col2、Col3、SumNumberColumn 作为每个元素的属性。我想要做的很简单是 SQL，但我正在努力用 Linq 完成同样的事情。我想做的是，从列表中执行一个 GroupBy，它将忽略 Col3 中的内容并聚合 SumNumberColumn，但仍返回 MyDataType 的 IEnumerable。

即在 SQL 中我会做

```
Select Col1, Col2, null as Col3, Sum(SumNumberColumn) as SumNumberColumn from MyTable GroupBy Col1, Col2; 
```

使用 Linq，我想做的是（伪代码）

```
List<MyDataType> lstAgg = lst.GroupBy(a => {a.Col1, a.Col2}).Select(a => new {a.Col1, a.Col2, Col3 = null, sum(a.Col4) }).ToList(); //lst is also a List<MyDataType>. 
```

实现这一目标的最佳方法是什么？

编辑：我已经看到了多个如何完成此操作并返回匿名类型的示例，但我确实需要返回一个 MyDataType 元素列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:11:27.630

您可以返回`List<MyDataType>`：

```
var lstAgg = lst.GroupBy(a => new { a.Col1, a.Col2})
                .Select(a => new MyDataType()
                                 {
                                     Col1 = a.Key.Col1,
                                     Col2 = a.Key.Col2,
                                     Col3 = null,
                                     SumNumberColumn = a.Sum(e => e.SumNumberColumn)
                                 })
                .ToList(); 
```

# r - 保留/删除符合特定条件的数据行

> ID：15100292
> 
> 赞同：0
> 
> 时间：2013-02-26T22:06:39.793
> 
> 标签：r

我收集了一项州测试的数据，该测试每年对几所学校的学生进行两次评分。一些学校在第一学期派学生参加考试，而另一些学校则在第二学期派学生参加考试。

我有每所学校的总成绩，但我需要排除过去 6 年未参加考试的学校。

换句话说，我需要一个代码来消除过去 6 年中整年没有出现在测试中的行（学校）（那一年的两个学期都有 NA 值）。

我有超过 200,000 次观察，但我无法成功消除学校。

数据帧排列如下（例如）

```
 School_Code      Score_2000.1      Score_2000.2      Score_2001.1      Score_2001.2      Score_2002.1      Score_2002.2      Score_2003.1      Score_2004.2      Score_2005.1      Score_2005.2      Score_2006.1      Score_2006.2      Score_2007.1      Score_2007.2      Score_2008.1      Score_2008.2      Score_2009.1      Score_2009.2      Score_2010.1      Score_2010.2      Score_2011.1      Score_2011.2      Score_2012.1      Score_2012.2
          1                NA               NA               243552              NA             234566               NA            726432               NA                 NA                NA             457246               NA            741362               NA               243552              NA             234566               NA               764332               NA               234566               NA                76432               NA
          2                NA             978304               NA              263760             NA               152853            NA               426483               NA              753651             NA               980412         NA                147258               NA              567123             NA               876543               NA              148234              NA               126745                NA               123456     
          3                NA             324654               NA              264660             NA               152753            NA               876521               NA              653211             NA               998232         NA                148766               NA              236421             NA               543921               NA              765134              NA               129805                NA               125600     
          4                NA             NA               425682              NA             645686               NA            328765               NA               861452              NA             276567               NA              NA                 NA               529805              NA               NA               123876             327626               998232         NA                148766            726432               NA 
         .                 .               .                   .                .                 .                  .                  .                 .                 .               .                   .                .                 .                  .                  .                 .                 .               .                   .                .                 .                  .                  .                 .
         .                 .               .                   .                .                 .                  .                  .                 .                 .               .                   .                .                 .                  .                  .                 .                 .               .                   .                .                 .                  .                  .                 .
         .                 .               .                   .                .                 .                  .                  .                 .                 .               .                   .                .                 .                  .                  .                 .                 .               .                   .                .                 .                  .                  .                 .
          n              876521             NA               425682              NA             645686               NA            328765               NA               861452              NA             276567               NA            142327               NA               529805              NA             643185               NA               327626 
```

例如，在这种特殊情况下，应该从样本中删除 4 号学校，因为 2007 年它没有派任何学生参加州考试。但是应该保留 1 号学校，因为即使它在 2005 年没有派出任何学生，但从 2006 年到 2012 年确实至少派出了一次学生。

这是我正在努力实现的目标，但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:15:37.757

怎么样：

```
schools <- df(...)
schools.ok <- schools[apply(schools[,seq(from = ncol(schools) - 11, to = ncol(schools))], 1, function(x) !(sum(is.na(x)) >= 7)),] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:21:47.980

像这样的东西？

```
idx <- which(colSums(apply(df[,12:25], 1, 
           function(x) 
           apply(as.matrix(seq(1, 14, by=2)), 1, 
           function(y) all(is.na(x[y:(y+1)]))))) 
> 0) 
```

它给出要删除的行索引。你可以这样做：

```
df[setdiff(1:nrow(df), idx), ] 
```

如果您不想要索引，而只是直接过滤结果，那么，

```
df[!(colSums(apply(df[,12:25], 1, 
           function(x) 
           apply(as.matrix(seq(1, 14, by=2)), 1, 
           function(y) all(is.na(x[y:(y+1)]))))) 
> 0), ] 
```

# vb.net - 如何阻止人们在visual basic中连续输入某些字符

> ID：15100293
> 
> 赞同：0
> 
> 时间：2013-02-26T22:06:40.713
> 
> 标签：vb.net

我的问题是我想阻止人们输入某些名字。目前我正在放置一个if语句。问题是他们可以简单地将小写字母更改为大写字母，然后他们就可以使用名称但是使用大写字母 B。我怎样才能使它不能连续使用相同的字符, 所以不管他们是小写 b 还是大写 B

```
Private Sub GhostButton1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles GhostButton1.Click

    Try
        DownloadResponse = GetResponse.DownloadString("http://Example.com/target=" & GhostTextBox1.Text)
        FormatResponse = DownloadResponse.Split(New Char() {ControlChars.Lf}, StringSplitOptions.RemoveEmptyEntries)
        RichTextBox1.Text = FormatResponse(0)
        If GhostTextBox1.Text = "buster3636" Then RichTextBox1.Text = "You can not put this name" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:09:57.903

用于`StringComparison.OrdinalIgnoreCase`_[`Equals`](http://msdn.microsoft.com/en-us/library/t4411bks.aspx)

```
If GhostTextBox1.Text.Equals("buster3636", StringComparison.OrdinalIgnoreCase) Then
    RichTextBox1.Text = "You can not put this name"
End If 
```

如果一个或两个也`Nothing`可能导致`NullReferenceException`我更喜欢：

```
StringComparer.OrdinalIgnoreCase.Equals(GhostTextBox1.Text, "buster3636") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:09:06.037

一种简单的方法是使用 ToLower(...)：

```
If GhostTextBox1.Text.ToLower() = "buster3636" ... 
```

# android - Android：时间选择器对话框

> ID：15100294
> 
> 赞同：6
> 
> 时间：2013-02-26T22:06:43.700
> 
> 标签：android

我一直在尝试在对话框中创建时间选择器，但在片段类中出现错误：

> 在下一行中，方法 is24HourFormat(Activity) 未定义为 DateFormat 类型。

在行

```
DateFormat.is24HourFormat(getActivity())); 
```

这是一个直接来自 android 开发者网站的示例，所以我没想到会出现任何错误。我已经展示了下面的代码。

如果有人可以帮助我解决这个问题，将不胜感激。

谢谢

**代码**

```
package com.app.timer2;

import android.app.Activity;
import android.app.DialogFragment;
import android.os.Bundle;
import android.view.View;

import com.app.timer.R;

public class SecondActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);}

    public void showTimePickerDialog(View v) {
        DialogFragment newFragment = new TimePickerFragment();
        newFragment.show(getFragmentManager(), "timePicker");
    }

} 
```

**分段**

```
package com.app.timer2;

import java.text.DateFormat;
import java.util.Calendar;

import android.app.Dialog;
import android.app.DialogFragment;
import android.app.TimePickerDialog;
import android.os.Bundle;
import android.widget.TimePicker;

public class TimePickerFragment extends DialogFragment
implements TimePickerDialog.OnTimeSetListener {

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
// Use the current time as the default values for the picker
final Calendar c = Calendar.getInstance();
int hour = c.get(Calendar.HOUR_OF_DAY);
int minute = c.get(Calendar.MINUTE);

// Create a new instance of TimePickerDialog and return it
return new TimePickerDialog(getActivity(), this, hour, minute,
DateFormat.is24HourFormat(getActivity()));
}

public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
// Do something with the time chosen by the user
}
} 
```

**XML**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    android:orientation="vertical" >

        <Button
        android:id="@+id/start_time_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:padding="10dp"
        android:text="@string/start_time_button"
        android:onClick="showTimePickerDialog"  />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-26T22:10:23.490

你导入`java.text.DateFormat`了，你需要导入 `android.text.format.DateFormat`......你使用了错误的类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T22:11:19.067

发生这种情况的原因是因为您使用了错误的 DateFormat。

你有：

```
import java.text.DateFormat; 
```

当你想要的时候：

```
import android.text.format.DateFormat 
```

总之，这两个对象具有相同的名称，但它们不是同一个对象。所以你必须专门使用android提供的一个，因为它是唯一一个知道如何处理`Context`你正在调用的方法的`DateFormat.is24HourFormat(getActivity()));`。

# java - WebDriver 在 iframe 下找不到元素

> ID：15100309
> 
> 赞同：-1
> 
> 时间：2013-02-26T22:07:32.287
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我正在尝试通过 hotmail.com 发送邮件。
当我进入“To”和“Subject”的屏幕时，我将 iframe 切换为“contentFrame”并继续到达那里。
但是当我尝试将密钥发送到正文（消息的正文）时，我找不到如何访问这个元素。
如我所见，正文是名为“RichText”的isdine iframe，所以我在iframe 中有iframe。
正文类名是“RichText”，所以我试图通过这个类名找到元素但没有成功。
我添加了一个带有红色框的图像，我找到了带有萤火虫的元素。
如果有人可以帮助我，我会很高兴。
PS - 您可以在常规 hotmail.com 中看到该元素撰写邮件 - 正文消息。
谢谢，
或者。
![在此处输入图像描述](../Images/34870402a574f6b513fd3bcfd3e396ba.png)

完整的html页面代码： http: [//pastebin.com/ejM5JYyS](http://pastebin.com/ejM5JYyS)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:42:22.657

这可能对你有用

```
driver.switchTo().frame(driver.findElement(By.cssSelector("iframe[id='contentFrame']")));
driver.switchTo().frame(driver.findElement(By.cssSelector("iframe[id='RichTextEditor_surface']")));

((JavascriptExecutor) driver).executeScript("document.body.innerHTML = '<br>'");

WebElement bodyOfMail = driver.switchTo().activeElement();

bodyOfMail.sendKeys("Your mail body content here");

//this is for switch back to default window from frame
driver.switchTo().defaultContent(); 
```

# java - 模拟adwords API

> ID：15100311
> 
> 赞同：8
> 
> 时间：2013-02-26T22:07:38.223
> 
> 标签：java, guice, google-ads-api

我想测试连接到 AdWords API 的代码，而无需实际调用 Google（这需要花钱；））。知道如何插入 TrafficEstimatorServiceInterface 的新实现吗？

AdWords Client API 使用 Guice 进行依赖注入，但我不确定如何获取 Injector 以对其进行修改？！

如果它有帮助，这就是我现在实现它的方式：

```
AdWordsServices adWordsServices = new AdWordsServices();
AdWordsSession session = AdwordsUtils.getSession();

TrafficEstimatorServiceInterface trafficEstimatorService =
    adWordsServices.get(session, TrafficEstimatorServiceInterface.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:06:58.470

为此，您应该使用[测试帐户。](https://developers.google.com/adwords/api/docs/test-accounts)[此外，从 2013 年 3 月 1 日起，使用 AdWords API](https://developers.google.com/adwords/api/docs/ratesheet2)将不再收费，但您在开发工具时仍应继续使用测试帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-24T09:55:34.500

您需要将 Google API 对象的测试实现（模拟/存根）注入到您的测试代码中。Google 内部使用的 Guice 注入与此处无关。

您应该让您的代码依赖`TrafficEstimatorServiceInterface`并在运行时注入它，而不是让您的代码`TrafficEstimatorServiceInterface`从`AdWordsServices`工厂获取 a。然后，在您的单元测试中，您可以注入一个模拟或存根。

例如，参见 Martin Fowler 的“ [Inversion of Control Containers and the Dependency Injection pattern](https://martinfowler.com/articles/injection.html) ”。

这在实践中的表现取决于您用于运行应用程序的 IoC 容器。如果您使用的是 Spring Boot，这可能看起来像这样：

```
// in src/main/java/MyService.java
// Your service code, i.e. the System Under Test in this discussion
@Service
class MyService {
  private final TrafficEstimatorServiceInterface googleService;

  @Autowired
  public MyService (TrafficEstimatorServiceInterface googleService) {
    this.googleService = googleService;
  }

  // The business logic code:
  public int calculateStuff() {
    googleService.doSomething();
  }
}

// in src/main/java/config/GoogleAdsProviders.java
// Your configuration code which provides the real Google API to your app
@Configuration
class GoogleAdsProviders {
  @Bean
  public TrafficEstimatorServiceInterface getTrafficEstimatorServiceInterface() {
    AdWordsServices adWordsServices = new AdWordsServices();
    AdWordsSession session = AdwordsUtils.getSession();

    return adWordsServices.get(session, TrafficEstimatorServiceInterface.class);
  }
}

// in src/test/java/MyServiceTest.java
// A test of MyService which uses a mock TrafficEstimatorServiceInterface
// This avoids calling the Google APIs at test time
@RunWith(SpringRunner.class)
@SpringBootTest
class MyServiceTest {

    @Autowired
    TrafficEstimatorServiceInterface mockGoogleService;

    @Autowired
    MyService myService;

    @Test
    public void testCalculateStuff() {
       Mockito.when(mockGoogleService.doSomething()).thenReturn(42);

       assertThat(myService.calculateStuff()).isEqualTo(42);
    }

    @TestConfiguration
    public static class TestConfig {
        @Bean()
        public TrafficEstimatorServiceInterface getMockGoogleService() {
            return Mockito.mock(TrafficEstimatorServiceInterface.class);
        }
    }
} 
```

# wpf - 跨多个控件的相同控件绑定

> ID：15100316
> 
> 赞同：0
> 
> 时间：2013-02-26T22:08:04.923
> 
> 标签：wpf, validation, controls

我有一个应用程序，我想在所有文本框中应用相同的绑定进行验证。

```
<TextBox Height="23" HorizontalAlignment="Left" Margin="71,76,0,0" Name="textBox1" VerticalAlignment="Top" Width="229" Style="{StaticResource ResourceKey=errorMsgStyle}">            
**<TextBox.Text>
            <Binding RelativeSource="{RelativeSource Self}" Path="Text" UpdateSourceTrigger="Explicit">
                <Binding.ValidationRules>
                    <Validators:RequiredFieldValidationRule ErrorMessage="Required field1"/>
                </Binding.ValidationRules>
            </Binding>
        </TextBox.Text>**

    </TextBox> 
```

(**) 中的部分对于所有文本框都是相同的，但这是我不想为所有人重复复制和粘贴的内容。

不幸的是，该应用程序不使用 MVVM。有人可以告诉我如何将此验证绑定定义为模板（或类似模板）并在任何地方使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:40:40.990

```
<Window.Resources>
    <Binding x:Key="Validation" RelativeSource="{RelativeSource Self}" Path="Text" UpdateSourceTrigger="Explicit">
        <Binding.ValidationRules>
            <Validators:RequiredFieldValidationRule ErrorMessage="Required field1"/>
        </Binding.ValidationRules>
    </Binding>
</Window.Resources> 
```

例子：

```
<TextBox Text="{StaticResource Validation}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:29:20.687

您可以通过在样式中设置绑定来做到这一点。

```
 <Style x:Key="ValidatedTextBox" TargetType="TextBox">
        <Setter Property="Text">
            <Setter.Value>
                <Binding RelativeSource="{RelativeSource Self}" Path="Text" UpdateSourceTrigger="Explicit">
                    <Binding.ValidationRules>
                        <Validators:RequiredFieldValidationRule ErrorMessage="Required field1"/>
                    </Binding.ValidationRules>
                </Binding>
            </Setter.Value>
        </Setter>
    </Style> 
```

当然，所有的文本框都将绑定到同一个源......但这可能是你想要的。

# python - 带有 Python 继承的未知 AttributeError

> ID：15100318
> 
> 赞同：1
> 
> 时间：2013-02-26T22:08:15.643
> 
> 标签：python, inheritance

我有一个继承自 Python 中的抽象类的类

```
class MyAbstractClass():
    __Var1 = 0

    def __init__(self):
        pass

class MySubClass(MyAbstractClass):
    def __init__(self):
        MyAbstractClass.__init__(self)

    def MyFunc(self):
        print self.__Var1 
```

这会出现以下错误：

```
AttributeError: MySubClass instance has no attribute '_MySubClass__Var1' 
```

值得注意的是，这两个类位于单独的文件中。

我四处搜索，大多数建议是将我的代码从使用“super()”更改为父级的显式名称。但是，我仍然收到此错误。

知道怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:10:04.170

你看到的是[mangling 这个名字](http://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references)。以双下划线开头的名称以特殊方式处理，以避免子类中的名称冲突。

基本上，只要您`__some_name`在类中有一个属性，它就会自动重命名`_YourClass__some_name`以避免在继承时发生名称冲突。

您可以使用以下[`dir()`](http://docs.python.org/2/library/functions.html#dir)功能进行检查：

```
>>> class MyClass(object):
...     __var = 1
... 
>>> dir(MyClass)
['_MyClass__var', '__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__'] 
```

请注意该列表如何**不**包含`__var`但包含`_MyClass__var`.

解决方法很简单：不要**使用**以双下划线开头的变量名。如果要将变量标记为私有，则约定是使用单个下划线。

我想再次强调，名称修饰的主要目的是避免命名空间与子类发生冲突：

```
>>> class MyClass(object):
...     def __init__(self, val):
...             self._value = val
... 
>>> class MySubclass(object):
...     def __init__(self, val):
...             super(MyClass, self).__init__(val)
...             self._value = val ** 2  #this hides the base class attribute!
... 
```

请注意，如果基类来自第三方库，那么您无法知道定义了哪些私有属性，因为它们不是 API 的一部分。检查 with`dir`只会提示您使用哪个名称，但由于它们是一个实现细节，它们可以在不通知的情况下更改。

您**不应该**使用它来将属性“标记”为私有。python*约定*是以单个下划线开头的属性是私有的。

在一个相关主题上，在名称`__something__`的开头和结尾都带有双下划线的表单名称也被特殊处理。其中一些实现了[特殊方法](http://docs.python.org/2/reference/datamodel.html#specialnames)，因此您*永远不*应该使用这种标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:12:56.243

双下划线故意混淆变量名以使其半私有。有关更多详细信息，请参阅[http://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references](http://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references)。

要解决此问题，请更改`__Var1`为`_Var1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T22:12:44.280

Var1 前面的双下划线确实命名了重整。在运行时`__Var1`看起来像`_MySubClass__Var1`.

尝试用一个下划线重命名它 _Var1 。

名称修饰是 Python 创建某种私有变量的方式。这真的是为了防止命名空间冲突。

这里有一些[细节](http://docs.python.org/release/1.5/tut/node67.html)

# perforce - 从 perforce 获取更改

> ID：15100321
> 
> 赞同：3
> 
> 时间：2013-02-26T22:08:20.957
> 
> 标签：perforce

我正在尝试从 perforce 中获得最后的更改

所以我去 perforce 文件夹并执行以下命令，正如我在教程中发现的那样

```
p4 changes -m 5 //depot/main//project/ result.txt // should save last five changes to result.txt 
```

但给了我以下错误

```
result.txt - must create client 'IM000001' to access local files // IM000001 is the name of my computer 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T22:27:57.753

尝试编写如下命令：

```
p4 changes -m 5 //depot/main/project/... > result.txt 
```

您出错的主要问题是没有将输出重定向到您的 result.txt 文件中，因此 p4 更改尝试将 result.txt 解释为版本化文件，但是没有有效的客户端规范（又名工作区），它无法解析软件仓库路径为了它。

# php - 从数据库中填充下拉框，然后更新页面以显示结果？

> ID：15100324
> 
> 赞同：0
> 
> 时间：2013-02-26T22:08:35.713
> 
> 标签：php, mysql

我想从数据库中填充一个下拉框，然后更新页面以显示结果？我想从下拉列表中的数据库中的 article.title 表中获取所有字段。我希望页面在用户单击提交按钮时更新，我将为它创建。我这甚至可能吗？

```
<?php

ini_set('display_errors',1); 
error_reporting(E_ALL);

//print_r(PDO::getAvailableDrivers()); 

$config['db'] = array( //This is the config array with the database details
    'host'              => 'localhost',
    'username'          => 'root',
    'password'          => '',
    'dbname'            => 'website'
); 

//echo '<table, th, td {border: 2px solid black; border-collapse="collapse";} >';
echo '<table id="customers"}>';
echo '<link rel="stylesheet" type="text/css" href="style.css">';

echo '<th> one </th>';
echo '<th> two </th>';
echo '<th> three </th>';
echo '<th> four </th>';

$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']        ['dbname'], $config['db']['username'], $config['db']['password']); //Instanciate an PDO Object

$query = $db->query("SELECT `articles`.`title`, `articles`.`hello`, `articles`.`id`, `articles`.`name` FROM `articles` WHERE `articles`.`title` > 1 LIMIT 10");//running a query from the database

$alt=0;
while ($row = $query->fetch(PDO::FETCH_ASSOC)){
 if($alt==0){
  echo '<tr>';
  $alt=1;
 }else{
  echo '<tr class="alt">';
  $alt=0;
 }
 echo '<td>';
 echo $row["title"];
 echo '</td>';
 echo '<td>';
 echo $row["hello"];
 echo '</td>';
 echo '<td>';
 echo $row["id"];
 echo '</td>';
 echo '<td>';
 echo $row["name"];
 echo '</td>';
 echo '</tr>';
}

//print_r($query); //printing a query 

echo '</table>';

echo '<p> Returned ', $query->rowCount(), ' results due to limit set</p>';

//$query = $db->query("SELECT `title` FROM `articles`");//running a query from the database

//$query = $db->query("SELECT * FROM articles");

//print_r($query); //printing a query

//$stmt = $db->prepare($sql);
//$stmt->execute();
//$results = $stmt->fetchAll();

/* $query = $db->query("SELECT `id` FROM `articles`");//running a query from the database

while ($row = $query->fetch(PDO::FETCH_ASSOC)){
echo $row['title'], '<br>';
echo $row['id'], '<br>';
}

}

*/ 
```

# javascript - 游戏关闭中的加速度计

> ID：15100337
> 
> 赞同：2
> 
> 时间：2013-02-26T22:09:16.103
> 
> 标签：javascript, ios, html, gameclosure

[是否可以在 Game Closure( http://www.gameclosure.com/](http://www.gameclosure.com/) ) 框架中使用加速度计/运动感应？我试着到处搜索它，但找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:23:00.837

我不能代表 Android，但在 iOS 上，目前还没有大量的设备 API 访问权限（至少在 GC 的文档中没有公开）。html5rocks 教程中的示例并不直接适用，因为当 GC 部署为应用程序时，它没有使用浏览器窗口或 webview。“窗口”对象有很大不同，并且没有相同的方法和属性。

GC 工作人员在他们的论坛中表示，他们正在编写扩展引擎原生方面的指南，我希望这将阐明如何访问更多原生设备 API，包括加速度计。

# mysql - Rails 根据缺少具有条件的关联模型来查询一个模型

> ID：15100338
> 
> 赞同：0
> 
> 时间：2013-02-26T22:09:18.937
> 
> 标签：mysql, sql, ruby-on-rails, database, ruby-on-rails-3

我一直在基于多个关联模型进行查询以及基于缺少关联模型进行查询时遇到问题。

因此，我正在尝试实现一种方法来将每个特定用户的消息标记为已读或未读。这些是我正在使用的模型：

```
class Stock < ActiveRecord::Base
  has_many :messages
end

class Message < ActiveRecord::Base
  belongs_to :stock
  has_many :message_viewings
end

class MessageViewing < ActiveRecord::Base
  belongs_to :user
  belongs_to :message
end

class User < ActiveRecord::Base
  has_many :message_viewings
end 
```

我的目标是找到特定用户缺少 MessageViewings 的所有带有 Messages 的 Stocks。我想要这些信息，这样我就可以向用户表明他们是否有未读消息。到目前为止，我的任何尝试都不值得一提。

**更新**

进一步的搜索使我找到了一个记录良好的 gem，几乎可以满足我的要求：[https](https://github.com/ledermann/unread) ://github.com/ledermann/unread 。获取那里列出的查询并对其进行一些修改，我来到了这个新查询，它似乎可以完成我想要完成的工作，尽管我不确定它的效率如何：

```
Stock.joins(:messages).joins("LEFT JOIN message_viewings ON \
  message_viewings.message_id = messages.id AND \
  message_viewings.user_id = #{User.sanitize(current_user.id)}").where(
  "message_viewings.id IS NULL") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:15:49.213

尝试类似：

```
Stock.joins(messages: :message_viewings).where("message_viewings.user_id != ? or message_viewings.user_id is null", current_user.id) 
```

只要确保当前用户已设置。

### 更新代码

如果您想要所有没有属于当前用户的 message_viewing 的股票，请执行以下操作：

```
@user = # code to retrieve user
Stock.joins(:messages).joins("LEFT JOIN message_viewings ON message_viewings.message_id = messages.id").where("message_viewings.user_id != ? OR message_viewings.id IS NULL", @user.id) 
```

我认为您编写的代码有错误，因为如果 message_viewing 中的 user_id 存在，那么 message_viewing 的 id 不会为空。

我可能会将该代码放入库存模型中：

```
# stock model
def self.join_message_viewings
  joins(:messages).joins("LEFT JOIN ... ")
end

def self.unread_by(user_id)
  .where("messages_viewings.user_id != ... ", user_id)
end

# query
Stock.join_message_viewings.unread_by(@user.id) 
```

如果您愿意，可以将最终查询变成一种方法。

# jquery - 如何将内容附加到输入元素？

> ID：15100345
> 
> 赞同：1
> 
> 时间：2013-02-26T22:09:35.713
> 
> 标签：jquery, html

我刚刚学习 jQuery，我已经能够使以下代码工作：

```
<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js" charset="utf-8"></script>
</head>
<body>
  <header>
      <h1></h1>
  </header>
  <form name="myForm" method="GET" action="">
Text Field Populated With XML Value.</br>
<input type="text" id="text1" name="text1" />
      </br></br>
Dropdown Populated With XML Data.</br>
      <select id="cdLDAP">
        <option/>
      </select>
  </form>
  </div>
  <script type="text/javascript">

  // variables declaration
    var XML_PATH = "XML/ou.xml";   
    // load XML file
    $(function() {
      $.ajax({
        type: "GET",
        url: XML_PATH,
        dataType: "xml",
        success: function(xml) {
          $(xml).find('LDAP').find('OU').each(function(i) {
            var ou = $(this).text();
            $('#cdLDAP').append("<option class='ddheader'>"+ou+"</option>");
          });
          $(this).find('Name').each(function() {
            var name = $(this).text();
            $('#cdLDAP').append("<option class='ddindent' value='"+ name +"'>"+name+"</option>");
          });
        }
      });
    });    
  </script>
</body>    
</html> 
```

这很好用；它能够读取以下 XML：

```
<?xml version= "1.0" encoding="UTF-8"?>
<DropDown>
    <LDAP>
        <OU>1</OU>
        <OU>2</OU>
        <OU>3</OU>
        <OU>4</OU>
        <OU>5</OU>
        <OU>6</OU>
        <OU>7</OU>
    </LDAP>
</DropDown> 
```

它在下拉列表中显示值 1,2,3,4,5,6,7`cdLDAP`没有问题。

到目前为止，一切都很好。

我遇到的问题是填充一个简单的文本文件......在这种情况下：

```
<input type="text" id="text1" name="text1" /> 
```

假设我只想要 xml 文件中的第一个值，即来自以下的“1”：

```
 <OU>1</OU> 
```

显示在 HTML5 表单的文本字段中。我怎么做？我尝试过的任何方法似乎都不起作用。我想我对这个`.each`部分感到困惑，比如放在`.each(function(i)`什么位置上

```
$('#text1').append( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:14:00.443

输入元素的行为与其他 HTML 元素略有不同。`value`您需要修改元素的属性，而不是尝试将值插入其 HTML 。

这可以使用 jQuery 来完成：

```
$('#text1').val(...) 
```

或者只是简单的旧 DOM 属性重新分配：

```
$('#text1')[0].value = ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:20:27.170

如果您希望将 of 设置`value`为`#text1`第一个`OU`值，那么您可以使用该`.index()`方法来确定哪个`:eq`存在。请记住，这`.index()`是`0 based values`我们要寻找的`$('OU:eq(0)')`：

```
$(xml).find('LDAP').find('OU').each(function(i) {
    var ou = $(this).text();
    if($(this).index()==0){
        $('#text1').val(ou)
    }
    $('#cdLDAP').append("<option class='ddheader'>"+ou+"</option>");
}); 
```

或者你可以使用：

```
success: function(xml) {
    $('#text1').val( $(xml).find('LDAP').find('OU:eq(0)').text() )
    // rest of code
} 
```

# java - “deWiTTERS 游戏循环”是否假设一个恒定的 UPS？

> ID：15100348
> 
> 赞同：8
> 
> 时间：2013-02-26T22:09:46.253
> 
> 标签：java, game-engine, frame-rate, game-loop

我最近尝试进入游戏编程。我对 Java 非常有经验，但对游戏编程却没有。我阅读了[http://www.koonsolo.com/news/dewitters-gameloop/](http://www.koonsolo.com/news/dewitters-gameloop/)并使用以下代码实现了那里提出的游戏循环：

```
private static int UPDATES_PER_SECOND = 25;
private static int UPDATE_INTERVAL = 1000 / UPDATES_PER_SECOND * 1000000;
private static int MAX_FRAMESKIP = 5;

public void run() {
    while (true) {
        int skippedFrames = 0;
        while (System.nanoTime() > this.nextUpdate && skippedFrames < MAX_FRAMESKIP) {
            this.updateGame();
            this.nextUpdate += UPDATE_INTERVAL;
            skippedFrames++;
        }

        long currentNanoTime = System.nanoTime();
        double interpolation = (currentNanoTime + UPDATE_INTERVAL - this.nextUpdate) / UPDATE_INTERVAL;
        this.repaintGame(interpolation);
    }
} 
```

这个循环看起来很有希望而且很容易，但现在我实际上正在尝试用它做点什么，我不再那么确定了。如果我没有完全弄错`updateGame()`的话，会处理诸如计算位置，移动敌人，计算碰撞之类的事情……？由于插值没有传递给`updateGame()`，这是否意味着我们假设每秒`updateGame()`准确且稳定地调用它？`UPDATES_PER_SECOND`这是否意味着我们所有的计算都是基于这个假设？如果 - 无论出于何种原因 - updateGame() 的调用被延迟，这不会给我们带来很多麻烦吗？
例如，如果我的角色精灵应该向右走，我们根据它的速度在每个`updateGame()`- 如果方法被延迟，那是否意味着我们的计算完全关闭并且角色会滞后？

在网站上，说明了以下插值示例：

> 如果在第 10 个 gametick 中位置是 500，速度是 100，那么在第 11 个 gametick 中，位置将是 600。那么当你渲染它的时候你会把你的车放在哪里呢？您可以只取最后一个gametick 的位置（在本例中为500）。但更好的方法是准确预测汽车在 10.3 处的位置，情况如下：
> `view_position = position + (speed * interpolation)`
> 然后汽车将在位置 530 处渲染。

我知道这只是一个例子，但这不会使车速依赖于`UPDATES_PER_SECOND`吗？所以更多的UPS意味着一辆更快的汽车？这不可能……？

任何帮助，教程，任何值得赞赏的东西。

# 更新/解决方案

在所有的帮助之后（谢谢！），这是我目前正在使用的 - 到目前为止效果很好（用于移动角色精灵），但让我们等待真正复杂的游戏内容来决定这一点。尽管如此，我还是想分享这个。
我的游戏循环现在看起来像这样：

```
private static int UPDATES_PER_SECOND = 25;
private static int UPDATE_INTERVAL = 1000 / UPDATES_PER_SECOND * 1000000;
private static int MAX_FRAMESKIP = 5;

private long nextUpdate = System.nanoTime();

public void run() {
    while (true) {
        int skippedFrames = 0;
        while (System.nanoTime() > this.nextUpdate && skippedFrames < MAX_FRAMESKIP) {
            long delta = UPDATE_INTERVAL;
            this.currentState = this.createGameState(delta);
            this.newPredictedNextState = this.createGameState(delta + UPDATE_INTERVAL, true);

            this.nextUpdate += UPDATE_INTERVAL;
            skippedFrames++;
        }

        double interpolation = (System.nanoTime() + UPDATE_INTERVAL - this.nextUpdate) / (double) UPDATE_INTERVAL;
        this.repaintGame(interpolation);
    }
} 
```

如您所见，有一些变化：

*   `delta = UPDATE_INTERVAL`? 是的。到目前为止，这是实验性的，但我认为它会起作用。问题是，一旦您从两个时间戳实际计算出一个增量，您就会引入浮点计算错误。这些很小，但考虑到您的更新被调用了数百万次，它们加起来。由于第二个 while 循环确保我们赶上错过的更新（例如，如果渲染需要很长时间），我们可以很确定我们每秒获得 25 次更新。最坏的情况：我们错过的不仅仅是`MAX_FRAMESKIP`更新——在这种情况下，更新会丢失并且游戏会滞后。不过，就像我说的，实验性的。我可能会再次将其更改为实际的增量。
*   预测下一场比赛状态？是的。GameState 是保存所有相关游戏信息的对象，渲染器通过此对象将游戏渲染到屏幕上。就我而言，我决定为渲染器提供两种状态：一种是我们通常会传递给他的状态，即当前的游戏状态，另一种是未来的预测状态`UPDATE_INTERVAL`。这样，渲染器可以使用插值值轻松地在两者之间进行插值。计算未来的游戏状态实际上很容易——因为你的更新方法 ( `createGameState()`) 无论如何都需要一个 delta 值，只需将 delta 增加`UPDATE_INTERVAL`——这样就可以预测未来的状态。当然，未来状态假设用户输入等保持不变。如果没有，下一次游戏状态更新将处理这些更改。
*   其余部分几乎保持不变，取自 deWiTTERS 游戏循环。`MAX_FRAMESKIP`如果硬件真的很慢，这几乎是一种故障保护，以确保我们不时渲染一些东西。但如果这开始了，我猜我们无论如何都会有极端的滞后。插值和以前一样——但是现在渲染器可以简单地在两个游戏状态之间进行插值，除了插值之外不需要任何逻辑。那很好！

也许为了澄清，一个例子。这是我计算字符位置的方法（稍微简化了一点）：

```
public GameState createGameState(long delta, boolean ignoreNewInput) {
    //Handle User Input and stuff if ignoreNewInput=false

    GameState newState = this.currentState.copy();
    Sprite charSprite = newState.getCharacterSprite();
    charSprite.moveByX(charSprite.getMaxSpeed() * delta * charSprite.getMoveDirection().getX()); 
    //getMoveDirection().getX() is 1.0 when the right arrow key is pressed, otherwise 0.0
} 
```

...然后，在窗口的绘制方法中...

```
public void paint(Graphics g) {
    super.paint(g);

    Graphics2D g2d = (Graphics2D) g;

    Sprite currentCharSprite = currentGameState.getCharacterSprite();
    Sprite nextCharSprite = predictedNextState.getCharacterSprite(); 
    Position currentPos = currentCharSprite.getPosition();
    Position nextPos = nextCharSprite.getPosition();
    //Interpolate position
    double x = currentPos.getX() + (nextPos.getX() - currentPos.getX()) * this.currentInterpolation;
    double y = currentPos.getY() + (nextPos.getY() - currentPos.getY()) * this.currentInterpolation;
    Position interpolatedCharPos = new Position(x, y);
    g2d.drawImage(currentCharSprite.getImage(), (int) interpolatedCharPos.getX(), (int) interpolatedCharPos.getY(), null);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:30:25.733

不要将您的游戏逻辑建立在更新间隔是恒定的假设上。包括一个精确测量两次更新之间经过的时间的游戏时钟。然后，您可以根据延迟进行所有计算，而不必担心实际的更新速率。

在这种情况下，汽车速度将以单位/秒为单位给出，增量将是自上次更新以来的总秒数：

```
car.position += car.velocity * delta; 
```

将更新游戏逻辑与绘制框架分开是一种常见的做法。就像您说的那样，这可以通过不时地跳过渲染帧来保持稳定的更新率。

但这并不是保持更新间隔不变。*每个时间单位的更新次数最少*是非常重要的。想象一辆汽车非常快地驶向障碍物。如果更新频率太低，则两次更新之间的行进距离可能大于障碍物的总大小。车辆将直接穿过它。

# cmake - 在项目中更改 CMAKE_CXX_FLAGS

> ID：15100351
> 
> 赞同：47
> 
> 时间：2013-02-26T22:10:00.877
> 
> 标签：cmake, compiler-flags

我的 CMakeLists.txt 中有以下内容：

```
project( Matfile )

SET ( CMAKE_CXX_FLAGS "-std=c++0x" )

set ( SOURCES
      "foo.cpp"
      "bar.cpp"
    )

add_library(
        Matfile
        ${SOURCES}
) 
```

正如您可能想象的那样，我想做的是使用标志 -std=c++0x 编译我的 C++ 源代码（我正在使用 gcc，我需要 C++11 功能）。不幸的是，这不起作用，因为当我使用 cmake 生成 makefile 时，变量 CMAKE_CXX_FLAGS 完全无效。

如何在项目文件中设置此变量？

这似乎是一个非常愚蠢的问题，但我花了不少于两个小时试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-02-04T19:35:38.747

[`add_compile_options()`](https://cmake.org/cmake/help/latest/command/add_compile_options.html)如果您使用的是 2.8.12 或更高版本，则应该使用最直接的解决方案。对于旧版本，您可以“滥用” [`add_definitions()`](https://cmake.org/cmake/help/latest/command/add_definitions.html)。虽然它仅用于添加 -D 标志，但它也适用于任何其他编译器标志。但是，我认为它不应该以这种方式使用，并且可能会在未来的版本中中断。

```
add_compile_options(-std=c++0x) # CMake 2.8.12 or newer 
```

或者

```
add_definitions(-std=c++0x) # CMake 2.8.11 or older 
```

从 CMake 3.3 开始，您还可以使用奇怪的生成器表达式语法使此标志仅适用于特定语言（例如，仅 C 或 C++）：

```
 add_compile_options($<$<COMPILE_LANGUAGE:CXX>:-std=c++14> $<$<COMPILE_LANGUAGE:C>:-std=c99>) 
```

但是，这[不适用于 Visual Studio 生成器](https://cmake.org/cmake/help/latest/manual/cmake-generator-expressions.7.html#logical-expressions)，因此请确保仅将其用于 Make/Ninja 生成器或使用[target_compile_options()](https://cmake.org/cmake/help/latest/command/target_compile_options.html)在每个目标范围内设置它。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-09-20T19:32:54.423

[在 CMake 3.1 及更高版本中设置 C++ 标准](https://cmake.org/cmake/help/v3.1/variable/CMAKE_CXX_STANDARD.html)的正确方法是：

```
set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED on) 
```

也可以[为一个单独的目标指定标准](https://cmake.org/cmake/help/v3.1/prop_tgt/CXX_STANDARD.html#prop_tgt:CXX_STANDARD)：

```
set_property(TARGET mylib PROPERTY CXX_STANDARD 11) 
```

从 CMake 3.8开始，该[命令有一个](https://cmake.org/cmake/help/v3.8/manual/cmake-compile-features.7.html#requiring-language-standards)[新选项`target_compile_features`](https://cmake.org/cmake/help/v3.8/manual/cmake-compile-features.7.html#requiring-language-standards)，允许为目标设置所需的标准：

```
target_compile_features(mylib PUBLIC cxx_std_11) 
```

优点是它将需求传播到依赖目标。如果您编译具有`cxx_std_11`所需功能的库，则链接到它的任何二进制文件都将自动具有此要求集。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-27T01:06:21.683

`FORCE`使用国旗有帮助吗？

```
SET ( CMAKE_CXX_FLAGS "-std=c++0x" CACHE STRING "compile flags" FORCE) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-26T22:17:39.267

也许这会更好：

```
set_source_files_properties(${SOURCES}
       PROPERTIES
       COMPILE_FLAGS  "-std=c++0x") 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-20T19:31:29.410

要扩展一点 ADD_COMPILE_OPTIONS() 与 ar31 的生成器表达式答案，当您想要添加多个由空格分隔的标志时可能会遇到问题，因为 cmake[在生成器表达式中有一个讨厌的错误](https://cmake.org/Bug/print_bug_page.php?bug_id=14353)。

我使用的解决方案是 FOREACH 循环，这是我正在从事的项目的一个示例：

```
IF(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID STREQUAL "Clang")
    # common flags
    SET(MY_C_AND_CXX_FLAGS -mtune=generic -pipe -fPIC -Wformat -Wformat-security -fomit-frame-pointer -fstack-protector-strong --param ssp-buffer-size=4 -fexceptions -D_FORTIFY_SOURCE=2 -feliminate-unused-debug-types)

    SET(MY_C_FLAGS   ${MY_C_FLAGS}   ${MY_C_AND_CXX_FLAGS})
    SET(MY_CXX_FLAGS ${MY_CXX_FLAGS} ${MY_C_AND_CXX_FLAGS})

    IF(MINGW)
        SET(MY_C_FLAGS   ${MY_C_FLAGS}   -static-libgcc)
        SET(MY_CXX_FLAGS ${MY_CXX_FLAGS} -static-libgcc -static-libstdc++)
    ENDIF(MINGW)

    IF(CMAKE_BUILD_TYPE STREQUAL "Debug")
        SET(MY_C_FLAGS   ${MY_C_FLAGS}   -g2 -Wall)
        SET(MY_CXX_FLAGS ${MY_CXX_FLAGS} -g2 -Wall)
    ELSE()
        SET(MY_C_FLAGS   ${MY_C_FLAGS}   -O2 -Wno-error)
        SET(MY_CXX_FLAGS ${MY_CXX_FLAGS} -O2 -Wno-error)
    ENDIF()

    FOREACH(C_COMPILE_FLAG ${MY_C_FLAGS})
        ADD_COMPILE_OPTIONS($<$<COMPILE_LANGUAGE:C>:${C_COMPILE_FLAG}>)
    ENDFOREACH()

    FOREACH(CXX_COMPILE_FLAG ${MY_CXX_FLAGS})
        ADD_COMPILE_OPTIONS($<$<COMPILE_LANGUAGE:CXX>:${CXX_COMPILE_FLAG}>)
    ENDFOREACH()

    # for the gcc -fstack-protector* flags we need libssp
    # clang does not have this
    IF(CMAKE_COMPILER_IS_GNUCXX)
        SET(CMAKE_CXX_LINK_EXECUTABLE "${CMAKE_CXX_LINK_EXECUTABLE} -lssp")
        SET(CMAKE_C_LINK_EXECUTABLE   "${CMAKE_C_LINK_EXECUTABLE}   -lssp")
    ENDIF()
ENDIF()

# Assembler flags

IF(ASM_ENABLED)
    FOREACH(ASM_FLAG -I${CMAKE_SOURCE_DIR}/src/filters/hq/asm/ -O1 -w-orphan-labels)
        ADD_COMPILE_OPTIONS($<$<COMPILE_LANGUAGE:ASM_NASM>:${ASM_FLAG}>)
    ENDFOREACH()
ENDIF(ASM_ENABLED) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-27T16:43:04.173

在需要编译器特定标准的特定情况下，cmake 3.1 通过提供一种请求标准版本或一组编译器功能的方法来解决该问题。请参阅[此答案](https://stackoverflow.com/a/20165519/1900563)和[官方文档](http://www.cmake.org/cmake/help/v3.1/manual/cmake-compile-features.7.html)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-05T21:22:32.733

检查[ucm的](https://github.com/onqtam/ucm)[ucm_add_flags](https://github.com/onqtam/ucm#ucm_add_flags)和[ucm_print_flags](https://github.com/onqtam/ucm#ucm_print_flags)宏- 将编译器标志添加到适当的 cmake 变量并检查结果

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-20T22:31:06.560

我想出了一种适用于旧版本 cmake 的更好方法，例如 Ubuntu 14 有 2.8.12，目标表达式是 3.3 功能。

以下是设置一些 C++ 特定标志的方法：

```
STRING(REGEX REPLACE "<FLAGS>" "<FLAGS> -std=gnu++11 -fpermissive -fexceptions " CMAKE_CXX_COMPILE_OBJECT ${CMAKE_CXX_COMPILE_OBJECT}) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-02T21:35:28.690

这是我目前使用的解决方案：

```
if(CMAKE_COMPILER_IS_GNUCXX)
    add_definitions(-std=c++0x)
    add_definitions(-std=gnu++11)
endif() 
```

或者，如果您有旧版本的 cmake，并且希望在 cmake-gui 中看到它：

```
set_property(CACHE CMAKE_CXX_FLAGS PROPERTY VALUE "-std=c++0x") 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-26T07:51:22.403

我在 C++ / clr 项目中遇到过这种情况，我需要修改两个变量 -`CMAKE_CXX_FLAGS`和`CMAKE_CXX_FLAGS_DEBUG`. `CMAKE_CXX_FLAGS`可以使用 修改`set_source_files_properties / COMPILE_FLAGS`，但不能`CMAKE_CXX_FLAGS_DEBUG`。我已经得出结论，在单独的文件夹中创建单独的、项目特定的 cmake 文件。如果项目是孤立的 - 那么变量修改将仅在当前 C++/clr 项目中起作用。

我想如果你想拥有多个 C++ 项目和多个 C++/clr 项目，至少将它们分开在两个不同的文件夹中（如果不是更多的话）是有意义的——特定于本机 C++，特定于托管 C++。

以类似的方式，您可以在 cmake 测试应用程序中找到： [https ://github.com/Kitware/CMake/blob/master/Tests/CSharpLinkToCxx/CMakeLists.txt](https://github.com/Kitware/CMake/blob/master/Tests/CSharpLinkToCxx/CMakeLists.txt)

这是同样的事情，只是有更多的解释：

```
# These variables affects also other C++ projects, that's why separate cmake for this c++ dll

# Clr compiling requires these:

# "Enable C++ Exceptions" - "Yes (/EHsc)" => "Yes with SEH Exceptions (/EHa)"
string(REPLACE "/EHsc" "/EHa" CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}")

# "Basic Run-time checks" - "Both (/RTC1, equiv. to /RTCsu) (/RTC1)" => "Default"
string(REPLACE "/RTC1" "" CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG}") 
```

这是一种方法。但是，如果您想在循环中生成本机 c++ 和托管 c++ 项目 - 一种方法是禁用全局标志：

```
# Disable global flag, configure on per project basis, using target_compile_options, target_link_options
string(REPLACE "/RTC1" "" CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG}")
string(REPLACE "/INCREMENTAL" "" CMAKE_SHARED_LINKER_FLAGS_DEBUG "${CMAKE_SHARED_LINKER_FLAGS_DEBUG}")
#string(REPLACE "/EHsc" "" CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}") 
```

然后为每个项目单独配置每个项目设置，例如：

```
if(${is_managed})
    # Managed C++ code
    set_target_properties(${project} PROPERTIES VS_GLOBAL_CLRSupport "true")
    set_property(TARGET ${project} PROPERTY VS_DOTNET_TARGET_FRAMEWORK_VERSION "v4.7.2")

    # Being able to debug dll
    target_link_options(${project} PRIVATE "$<$<CONFIG:Debug>:/ASSEMBLYDEBUG>")

    # Disable incremental linking
    target_link_options(${project} PRIVATE "$<$<CONFIG:Debug>:/INCREMENTAL:NO>")

    # "Enable C++ Exceptions" - "Yes with SEH Exceptions (/EHa)"
    set(compile_flags /EHa)
else()
    # Native C++ code
    # "Basic Run-time checks" - "Both (/RTC1, equiv. to /RTCsu) (/RTC1)" => "Default"
    target_compile_options(${project} PRIVATE "$<$<CONFIG:Debug>:/RTC1>")

    # Enable incremental linking
    target_link_options(${project} PRIVATE "$<$<CONFIG:Debug>:/INCREMENTAL>")

    # "Enable C++ Exceptions" - "Yes (/EHsc)"
    set(compile_flags /EHsc)
endif()
set_target_properties(${project} PROPERTIES COMPILE_FLAGS ${compile_flags}) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-13T00:43:26.473

我有类似的问题`-lstdc++fs`。

最后，解决我的问题是`target_link_libraries`：

```
set(CMAKE_CXX_STANDARD 17)

add_executable(main main.cpp)

target_link_libraries(main -lstdc++fs) 
```

# macos - 无法在 Snowleopard 上卸载 macport

> ID：15100355
> 
> 赞同：1
> 
> 时间：2013-02-26T22:10:07.570
> 
> 标签：macos, macports

我在他们的下载页面从可用于雪豹的安装程序安装。我是新手。我发现自制软件是一个更好的选择。所以，现在我正在尝试完全删除它。

```
sudo port -fp uninstall installed 
```

我得到：

```
Error: No ports matched the given expression 
```

当我尝试

```
sudo port uninstall installed 
```

我收到以下消息。

```
Can't map the URL 'file://.' to a port description file ("Could not find Portfile in /Users/Shashank").
Please verify that the directory and portfile syntax are correct.
To use the current port, you must be in a port's directory. 
```

我究竟做错了什么？

欣赏任何信息。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:14:00.337

您发出的命令会删除已安装的端口。您应该手动删除文件夹以完成安装：

使用这些命令：

笔记：

安装文件夹可能与下面列出的不同，具体取决于您的安装

```
%% sudo rm -rf \
    /opt/local \
    /Applications/DarwinPorts \
    /Applications/MacPorts \
    /Library/LaunchDaemons/org.macports.* \
    /Library/Receipts/DarwinPorts*.pkg \
    /Library/Receipts/MacPorts*.pkg \
    /Library/StartupItems/DarwinPortsStartup \
    /Library/Tcl/darwinports1.0 \
    /Library/Tcl/macports1.0 \
    ~/.macports 
```

# javascript - 如何更改此函数以便可以从父元素调用它？

> ID：15100356
> 
> 赞同：0
> 
> 时间：2013-02-26T22:10:07.713
> 
> 标签：javascript, jquery, function, call, children

我正在使用这个函数来替换标准的 html 复选框，我想从`label for`属性而不是`<div>`它当前所在的位置调用它。

我不知道如何修改它，以便我可以打电话给孩子`<div>`而不是`onclick="toggle_colorbox(this);"`. 我将它用于大量复选框，所以我不想通过 id 调用它。

HTML

```
<label for="color_Black"><div style="background-color: #000000" class="color" onclick="toggle_colorbox(this);"><div class=CheckMark>&#10003;</div>
<input type="checkbox" name="color[]" value="Black" id="color_Black" class="cbx"/></div>Black</label> 
```

JS

```
function toggle_colorbox(span) {
    div = span.getElementsByTagName('div')[0];
    cb = span.getElementsByTagName('input')[0];
    if (cb.checked == false) {
        div.style.visibility = "visible";
        span.className = "color ColorboxSelected";
        cb.checked = true;
    }
    else {
        div.style.visibility = "hidden";
        span.className = "color";
        cb.checked = false;
    }
} 
```

CSS

```
.color { border: 1px solid silver; vertical-align:baseline; margin-right:4px; width: 1.65em; height:1.65em; font-size:8px;float:left;  }
.color input {height: 100%; width: 100%; font-size:200%;}
.ColorboxSelected {opacity: 0.5; filter: alpha(opacity = 50);}  
.ColorboxSelected .CheckMark {visibility: visible; }        
.CheckMark {position:relative; top:-2px; vertical-align:middle; text-align:center ; color:white; font-family: Arial Narrow; font-size:1.6em;  display:block; visibility:hidden; }   /* text-shadow: black 0.1em 0.1em 0.2em;*/
.cbx { visibility:hidden; display:none;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:19:23.703

您可以执行以下操作。这将设置切换功能以在单击任何带有 class 的标签时触发`toggle`。它将直接在该标签中查找 div 和复选框。

HTML：

```
<label class="toggle" for="color_Black"><div style="background-color: #000000" class="color"><div class=CheckMark>&#10003;</div>
<input type="checkbox" name="color[]" value="Black" id="Checkbox1" class="cbx"/></div>Black</label> 
```

JS：

```
$(".toggle").on("click", function toggle_colorbox() {
    $div = $(this).children('div');
    $cb = $(this).find('input');
    $innerdiv = $div.find('div');

    if (!$cb.is(':checked')) {    
        $innerdiv.show();
        $div.addClass("ColorboxSelected");
        $cb.prop('checked', true);
    }
    else {
        $innerdiv.hide();
        $div.removeClass("ColorboxSelected");
        $cb.prop('checked', false);
    }
    return false;

}); 
```

小提琴：http: [//jsfiddle.net/aLJwH/1/](http://jsfiddle.net/aLJwH/1/)

编辑：现在回答以工作代码为特色！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:32:48.190

如果你想从标签中调用它，你可以像这样得到子 DIV ......

```
<label for="color_Black" onclick="toggle_colorbox(this.children[0]);"> 
```

# html - 我们如何查看预渲染资源或预取资源是否在 Firefox、Safari 和 IE10 上实际预渲染或预取？

> ID：15100360
> 
> 赞同：0
> 
> 时间：2013-02-26T22:10:32.627
> 
> 标签：html, google-chrome, firefox, prefetch, prerender

```
<!DOCTYPE html>
<meta charset="utf-8">
<title>An HTML Document</title>
<link rel="prefetch" href="https://www.apple.com/">
<link rel="prerender" href="https://www.apple.com/"> 
```

假设我们有上面的代码。[https://www.apple.com/](https://www.apple.com/)在 Chrome 上预渲染。如果我们打开 Chrome 的任务管理器，我们可以看到这一点。这很不错。

我怎么知道[https://www.apple.com/](https://www.apple.com/)是否真的在 Firefox 上预取？Firefox 是否为此提供了解决方案？

我如何知道[https://www.apple.com/](https://www.apple.com/)是否在 Safari 和 IE10 上实际预取或预渲染？这两个浏览器是否为此提供了解决方案？

谢谢！

顺便提一句。Safari和IE10选择哪种方式？预渲染还是预取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T18:13:39.710

在 Firefox 中，您可以清理缓存，然后打开`about:cache`. 我这样做是为了测试该`prefetch`指令，并且效果很好。

在 Chrome 中，您可以转到`chrome://cache/`.

我不知道 Safari 和 IE 是否实现了与`<link rel="prefetch" ...>`提示相关的任何内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-24T09:15:36.590

IE 11 已实现预渲染。您还可以通过给出组合预取和预渲染`rel="prerender prefetch"`

这将适用于所有浏览器，但 Safari 仍然是个谜。

# android - 移除其他网络后，Android 上的 Wifi 被禁用

> ID：15100366
> 
> 赞同：0
> 
> 时间：2013-02-26T22:10:55.983
> 
> 标签：android, networking, wifi, wifimanager, disconnect

我有一个 android 应用程序，它在打开应用程序时执行网络连接，并在关闭它时断开并删除网络。如果设备最初使用 3G，打开和关闭应用程序会执行正确的*连接/断开*操作。

如果设备最初使用 WiFi，则打开应用程序会连接到网络，但关闭应用程序会断开与网络的连接，并且设备会回退到 3G。

在打开应用程序之前，它本质上应该回退到设备所在的 WiFi。并且应用程序不会*断开/删除*设备最初所在的 WiFi。

下面是一段执行断开连接的示例代码：

```
 // remove the configuration (and disconnect, if connected)
            Log.i(TAG, "removing app network = " + ssid);
            boolean b = wifi.removeNetwork(wc.networkId);
            assert (b);

           // Enable the original WiFi that the device 
            String deviceInitialSSID = "TEST_WLAN";  
            previousNetId = wc.networkId;

            wifi.setWifiEnabled(true);
            wifi.enableNetwork(previousNetId, true); 
```

上面的代码`onStop()`在应用程序中执行。启用网络的调用返回 true，但实际上并未启用设备上以前的 WiFi。

请指教。提前致谢..

# postgresql - postgresql 端口混淆 5433 还是 5432？

> ID：15100368
> 
> 赞同：160
> 
> 时间：2013-02-26T22:11:12.733
> 
> 标签：postgresql, port, psql

我已经在 OSX 上安装了 postgresql。当我运行 psql 时，我得到

```
$ psql
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5433"? 
```

但是，从 /etc/services

```
postgresql      5432/udp    # PostgreSQL Database
postgresql      5432/tcp    # PostgreSQL Database
#                          Tom Lane <tgl@sss.pgh.pa.us>
pyrrho          5433/tcp    # Pyrrho DBMS
pyrrho          5433/udp    # Pyrrho DBMS 
```

5433被pyrrho占用，5432被分配给pg。我可以连接

```
psql -p 5432 
```

但是为什么 psql 认为它是 5433 以及如何让 psql 默认在正确的位置显示？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2013-02-27T00:16:49.537

`/etc/services`只是建议性的，它是知名端口的列表。这并不意味着该端口上实际上正在运行任何东西，或者命名服务将在该端口上运行。

在 PostgreSQL 的情况下，如果可用，通常使用端口 5432。如果不是，大多数安装程序会选择下一个空闲端口，通常是 5433。

您可以使用该工具查看实际运行的内容`netstat`（在 OS X、Windows 和 Linux 上可用，命令行语法在这三个工具中有所不同）。

这在 Mac OS X 系统上由于不同的 PostgreSQL 包的可怕混乱而变得更加复杂 - 苹果内置在操作系统中的古老版本的 PostgreSQL、Postgres.app、Homebrew、Macports、EnterpriseDB 安装程序等。

最终发生的是用户安装 Pg 并从一个包装启动服务器，但使用不同包装的客户端`psql`。`libpq`这通常发生在他们运行 Postgres.app 或 homebrew Pg 并与`psql`操作系统附带的连接时。不仅这些有时具有不同的默认端口，而且 Mac OS X 附带的 Pg 具有不同的*默认 unix 套接字路径*，因此即使服务器在同一端口上运行，它也不会侦听相同的 unix 套接字。

大多数 Mac 用户只需将 tcp/ip 与`psql -h localhost`. 如果需要，您还可以指定一个端口，例如`psql -h localhost -p 5433`. 您可能有多个 PostgreSQL 实例正在运行，因此请确保您使用`select version()`and连接到正确的实例`SHOW data_directory;`。

你也可以指定一个unix socket目录；检查`unix_socket_directories`您希望连接的 PostgreSQL 实例的设置，并用 指定`psql -h`，例如`psql -h /tmp`。

一个更干净的解决方案是更正您的系统`PATH`，以便与您实际运行的 PostgreSQL 相关联的`psql`和`libpq`是首先在`PATH`. 详细信息取决于您的 Mac OS X 版本以及您安装的 Pg 包。我不使用 Mac，如果不花费比目前可用的更多时间，我无法在这方面提供更多细节。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-07-02T19:50:33.227

在 OSX 上快速回答，设置你的环境变量。

```
>export PGHOST=localhost

>export PGPORT=5432 
```

或者你需要的任何东西。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-03-12T12:22:03.027

Postgres的默认端口一般配置在：

```
sudo vi /<path to your installation>/data/postgresql.conf 
```

在 Ubuntu 上，这可能是：

```
sudo vi /<path to your installation>/main/postgresql.conf 
```

`port`在这个文件中搜索。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-01-08T22:36:48.607

发生这种情况的最常见原因之一似乎是您安装了新版本的 PostgreSQL，而没有停止现有安装的服务。这也是我特别头疼的问题。在安装或升级之前，尤其是在 OS X 上并使用 Enterprise DB 中的一键安装程序之前，请确保在继续之前检查旧安装的状态。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-01T17:34:25.170

感谢[@a_horse_with_no_name](https://stackoverflow.com/users/330315/a-horse-with-no-name)的[评论](https://stackoverflow.com/questions/15100368/postgresql-port-confusion-5433-or-5432#comment21244421_15100368)，我在 pg_env.sh 中将我的 PGPORT 定义更改为 5432。这解决了我的问题。我不知道为什么 postgres 最初在 5432 托管服务时将其设置为 5433。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-04-07T14:36:11.227

我也遇到了这个问题，最终我有两个 postgres 服务器同时运行。我卸载了其中一个并将端口更改回 5432 并且现在可以正常工作。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-11-20T19:37:14.283

对于我在Mac **OS High Sierra上的****PgAdmin 4**中，单击左列中**Servers下的****PostrgreSQL10**数据库，然后单击**Properties**选项卡，将**5433显示为****Connection**下的端口。（我不知道为什么，因为我在安装时选择了5432）。无论如何，我单击了**Properties**选项卡下的**Edit**图标，将其更改为**5432**，保存，这样就解决了问题。去搞清楚。

# c# - HTML 敏捷包设置

> ID：15100375
> 
> 赞同：6
> 
> 时间：2013-02-26T22:11:47.070
> 
> 标签：c#, html

我正在使用 Agility Pack 解析 HTML，遵循这个问题[What is the best way to parse html in C#?](https://stackoverflow.com/questions/56107/what-is-the-best-way-to-parse-html-in-c) 我得到了很好的结果:)当我进入某些网页时，问题就出现了，结果是基于我的位置，所以例如我在西班牙，我得到了西班牙地区的结果，我想改变像如果我在英国，怎么办？我的意思是我必须在用户代理中进行更改？（我用作用户代理“Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:xxx) Gecko/20041107 Firefox/xx)”</p>

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T22:13:52.833

您可以使用[`WebClient.DownloadString`](http://msdn.microsoft.com/en-us/library/fhd1f0sw.aspx)允许您设置 HTTP 请求标头的方法来下载网页内容，然后将其提供给 HTML 敏捷包。

UserAgent 不是控制语言的东西。它是`Accept-Language`标题。例如：

```
using (var client = new WebClient())
{
    client.Headers[HttpRequestHeader.AcceptLanguage] = "es-ES";
    client.Headers[HttpRequestHeader.UserAgent] = "some user agent if you wish";
    string html = client.DownloadString("http://example.com");
    // feed the HTML to HTML Agility Pack
    var doc = new HtmlDocument();
    doc.LoadHtml(html);

    // now do the parsing
} 
```

但是，如果该站点使用基于 IP 的识别来向您发送不同语言的内容，那么您无法从客户端做很多事情来改变它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:17:07.990

基于位置的搜索或页面通常是通过 ip 完成的，或者当你注册时，你告诉网站你在哪里。您可能想在您希望自己所在的国家/地区查看匿名代理。

# php - jqgrid 复杂演示不工作

> ID：15100376
> 
> 赞同：0
> 
> 时间：2013-02-26T22:11:49.210
> 
> 标签：php, jquery, jqgrid

我整天都在尝试让这个例子在我的电脑上运行：

[http://trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html)

在我成功完成这项工作之前我无法入睡，因此我非常需要你的帮助！你有没有成功使用过jqgrid？

这是我的 HTML 文件中的代码：

```
<table id="list2"> </table>
<div   id="pager2" > </div> 
```

以下是我的 javascript 部分中的代码：

```
var theURL = 'matter_parties_model/<?php echo $matterID;?>';
alert('Donato');

$("#list2").jqGrid({
url:'server.php?q=2',
datatype: "json",
colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'],
colModel:[
    {name:'id',index:'id', width:55},
    {name:'invdate',index:'invdate', width:90,editable:true},
    {name:'name',index:'name asc, invdate', width:100},
    {name:'amount',index:'amount', width:80, align:"right",editable:true,editrules:{number:true}},
    {name:'tax',index:'tax', width:80, align:"right",editable:true,editrules:{number:true}},        
    {name:'total',index:'total', width:80,align:"right"},       
    {name:'note',index:'note', width:150, sortable:false}       
],
rowNum:10,
rowList:[10,20,30],
pager: '#pcelltbl',
sortname: 'id',
viewrecords: true,
sortorder: "desc",
caption:"Cell Edit Example",
forceFit : true,
cellEdit: true,
cellsubmit: 'clientArray',
afterEditCell: function (id,name,val,iRow,iCol){
    if(name=='invdate') {
        jQuery("#"+iRow+"_invdate","#celltbl").datepicker({dateFormat:"yy-mm-dd"});
    }
},
afterSaveCell : function(rowid,name,val,iRow,iCol) {
    if(name == 'amount') {
        var taxval = jQuery("#celltbl").jqGrid('getCell',rowid,iCol+1);
        jQuery("#celltbl").jqGrid('setRowData',rowid,{total:parseFloat(val)+parseFloat(taxval)});
    }
    if(name == 'tax') {
        var amtval = jQuery("#celltbl").jqGrid('getCell',rowid,iCol-1);
        jQuery("#celltbl").jqGrid('setRowData',rowid,{total:parseFloat(val)+parseFloat(amtval)});
    }
}});

jQuery("#celltbl").jqGrid('navGrid','#pgwidth',{edit:false,add:false,del:false}); 
```

最后这是我的 php 中的代码：

```
<?php
include("../../connections/xxxxxxxx");
$page = $_GET['page']; // get the requested page
$limit = $_GET['rows']; // get how many rows we want to have into the grid
$sidx = $_GET['sidx']; // get index row - i.e. user click to sort
$sord = $_GET['sord']; // get the direction
if(!$sidx) $sidx =1;
// connect to the database
$db = mysql_connect($dbhost, $dbuser, $dbpassword)
or die("Connection Error: " . mysql_error());

mysql_select_db("griddemo") or die("Error conecting to db.");
$result = mysql_query("SELECT COUNT(*) AS count FROM invheader a, clients b WHERE          a.client_id=b.client_id");
$row = mysql_fetch_array($result,MYSQL_ASSOC);
$count = $row['count'];

if( $count >0 ) {
    $total_pages = ceil($count/$limit);
} else {
    $total_pages = 0;
}
if ($page > $total_pages) $page=$total_pages;
$start = $limit*$page - $limit; // do not put $limit*($page - 1)
$SQL = "SELECT a.id, a.invdate, b.name, a.amount,a.tax,a.total,a.note FROM invheader a,     clients b WHERE a.client_id=b.client_id ORDER BY $sidx $sord LIMIT $start , $limit";
$result = mysql_query( $SQL ) or die("Couldn t execute query.".mysql_error());
$responce = new stdClass();
$responce->page = $page;
$responce->total = $total_pages;
$responce->records = $count;
$i=0;
while($row = mysql_fetch_array($result,MYSQL_ASSOC)) {
    $responce->rows[$i]['id']=$row[id];
    $responce->rows[$i] ['cell']=array($row[id],$row[invdate],$row[name],$row[amount],$row[tax],$row[total],$row[not e]);
    $i++;
}        
echo json_encode($responce);
?> 
```

现在网格显示标题但不显示可编辑行。任何想法？我知道这是一个复杂的问题，我问你之前是否使用过这个例子？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:54:14.597

在您的代码中，我看到了很多问题。

1.  将所有出现的#celltbl 替换为#list2，因为您的表ID 是list2。
2.  出于同样的原因，将所有出现的#pgwidth & #pcelltbl 替换为#pager2。
3.  放错误报告（E_ALL & ~E_NOTICE）；在 php 处理中，因为代码包含与 JSON 响应不兼容的通知错误

您也可以使用 firebug > net > ajax 响应来调试它，如果 json 输出即将到来。还要检查 jqgrid php 包装器[http://www.phpgrid.org](http://www.phpgrid.org)，因为它使用起来非常方便。

# magento - Magento：使用产品 URL 配置的类别路径不起作用

> ID：15100378
> 
> 赞同：0
> 
> 时间：2013-02-26T22:12:17.480
> 
> 标签：magento

我有一个有几个类别的商店。商店中的大多数产品都在 2-3 个类别中。我希望每个产品只有一个 url - domain.com/product_name.html。我不想让产品 URL 中包含类别路径。

我将“使用产品 URL 的类别路径”设置为“否”，但是当我重新索引目录 URL 重写时，它会为每个产品创建一个常规 url (domain.com/product_name.html) 和一个用于每个类别路径 (domain.com /category_path/product_name.html）。

我已经删除了所有包含类别路径的产品 URL 重写，但是当我重新索引目录 URL 重写时，它会再次创建它们。

“使用产品 URL 的类别路径”配置不应该阻止这种情况吗？我错过了什么吗？

我正在使用 Magento 版本。1.7.0.0

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:23:37.590

根据您的 Magento 版本和设置这些 URL 的目的，您可能希望使用较新版本中的规范 URL 功能。

[https://stackoverflow.com/a/13500138/901449](https://stackoverflow.com/a/13500138/901449)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-12T14:15:02.613

我们遇到了同样的问题，我们为我们的产品分配了多个类别，最终在 Google 网站管理员工具中出现重复的内容，因为即使产品完全相同，Google 也将它们视为不同的 URL。我们最终得到了以下令人讨厌的 URL

```
oursite.com/catgory-1/product-1.html

oursite.com/catgory-2/product-1.html

oursite.com/catgory-3/product-1.html

oursite.com/product-1.html 
```

我们调查并发现了以下扩展，它完全符合 Magento 配置**（“使用产品 URL 的类别路径”=“否”）**应该做的事情

[https://www.scommerce-mage.com/magento-2-seo-unique-product-url.html](https://www.scommerce-mage.com/magento-2-seo-unique-product-url.html)

我必须说这个扩展或功能应该在 Magento 中开箱即用。

无论如何希望它可以帮助某人。

干杯

小号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:16:33.730

我认为您误解了配置设置。

该设置完全按照您的描述进行：每个类别有一个 url，总共有一个 url。

问题是，产品没有主要类别。因此，如果您不在类别视图中，例如在小部件的主页上，magento 不知道应该将哪个类别用作 url 锚点。

如果您在笼统视图中，则所有 url 都应该是类别/产品 url，如果您在主页上并执行此处描述的操作：http: [//www.magentocommerce.com/wiki/groups/248/display_products_on_home_page](http://www.magentocommerce.com/wiki/groups/248/display_products_on_home_page)有不涉及类别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T06:54:54.743

Shani1351，我遇到了和你一样的问题。我做了同样的操作： - 将“使用产品 URL 的类别路径”设置为“否”。- 清除缓存。- 截断“core_url_rewrite”。- 清除缓存。- 然后检查我的 url 重写数据（来自后端）。我看到了每个产品的很多网址（每个相关链接类别都有一个网址）。

但是，如果您检查您的首页，您会发现产品只使用了一个 URL，正如预期的那样。

我认为 Magento 需要生成“整个包”网址，但不要在前端使用它们。

* * *

编辑（3年后）：

我最初的回答是错误的。产品 url 与类别路径一起返回。

为了帮助 magento 在没有类别路径的情况下获得重写的产品 url，我建议您重写以下方法（这是一个 POC，仅用于演示。不要修改核心文件，永远不要！）：

Mage_Catalog_Model_Product_Url::getUrl()

```
 public function getUrl(Mage_Catalog_Model_Product $product, $params = array())
{
    $routePath      = '';
    $routeParams    = $params;

    $storeId    = $product->getStoreId();
    if (isset($params['_ignore_category'])) {
        unset($params['_ignore_category']);
        $categoryId = null;
    } else {
        $categoryId = $product->getCategoryId() && !$product->getDoNotUseCategoryId()
            ? $product->getCategoryId() : null;
    }

    if ($product->hasUrlDataObject()) {
        $requestPath = $product->getUrlDataObject()->getUrlRewrite();
        $routeParams['_store'] = $product->getUrlDataObject()->getStoreId();
    } else {
        $requestPath = $product->getRequestPath();
        if (empty($requestPath) && $requestPath !== false) {
            $idPath = sprintf('product/%d', $product->getEntityId());
            if ($categoryId) {
        //         $idPath = sprintf('%s/%d', $idPath, $categoryId);
            } 
```

查看注释行（我的 CE 1.7.0.2 上的 194）。这是罪魁祸首！

只需在覆盖模块中删除此行：

```
$idPath = sprintf('%s/%d', $idPath, $categoryId); 
```

希望它可以帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-28T23:57:34.673

# tfs - TFS 在哪里存储 UNIT 测试结果？

> ID：15100379
> 
> 赞同：6
> 
> 时间：2013-02-26T22:12:19.383
> 
> 标签：tfs, msbuild, mstest

我在跑步：

1.  对比 2012
2.  最新版本的 TFS
3.  专用 VM 上的单独构建代理

我的测试是在构建和单元测试上进行的。在我的构建框中，我找到了以下文件夹：C:\Builds\4\SolutionName\SolutionName\TestResults，但遗憾的是它是空的。我想查找并解析测试结果文件。我想知道构建结果是什么以及如何从第三方工具调用它。有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T15:49:08.970

1.  在团队资源管理器中，**查看构建**（双击构建的名称）
2.  查找并**查看完成的构建**结果（双击打开）。
3.  单击最顶部的**“查看日志”链接。**
4.  向下滚动到“为元数据文件运行 MSTest”部分

在部分末尾，您将看到如下所示的详细信息，其中**显示了 .trx（测试结果文件）的位置：**

```
Results file:  C:\Source\TestResults\tfsbuild_PMBUILD7 2013-08-05 08_32_02_Any CPU_Release.trx Test Settings: Default Test Settings

Waiting to publish...
 Publishing results of test run tfsbuild@PMBUILD7
2013-08-05 08:32:02_Any CPU_Release to
http://pmtfs:8080/tfs/DefaultCollection... 
....Publish completed successfully. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T23:37:13.210

它可能取决于您的 MSBuild/MSTest 设置，特别是对于封闭式构建（可能会以不同的方式做各种事情），但希望以下内容至少可以为您提供一些线索......

测试结果通常被放入服务器的构建文件夹（不是放置文件夹，而是在 MSBuild 进程存储和构建所有源代码等的工作文件夹中），为您执行的每个测试运行使用带日期戳的文件名.

但是，听起来您的文件夹是空的，这表明您正在寻找错误的位置（如果您正在进行封闭式构建，则可能是它使用了与常规构建不同的工作文件夹，可能与 C: \Builds\4 文件夹），或未生成测试结果（禁用或失败）。

我会尝试查找构建日志，因为它几乎肯定会告诉您测试发生了什么以及是否/在哪里写入了任何结果。

如果您可以找到测试结果文件，那么您通常只需双击主测试结果文件即可将测试结果加载到 Visual Studio 中（用于在测试结果用户界面中显示） - 因此您应该能够以编程`Process.Start(testResultsFilename)`方式启动Visual Studio 查看结果（只要在您使用工具的计算机上安装了 VS）。

# html - 修复没有“显示内联”的 IE 双倍边距错误

> ID：15100381
> 
> 赞同：0
> 
> 时间：2013-02-26T22:12:33.410
> 
> 标签：html, css

**是否可以在不使用css属性“ display:inline;** ”的情况下修复“IE Double Margin Bug”我问的原因是因为我需要使用“display:block;” 让我的 div 元素正确显示。否则它将无法正常工作。

这是我的 HTML

```
</head>
<body>
<div class="jimgMenu">
  <ul>
    <li class="landscapes"><a href="#nogo">Landscapes</a></li>
    <li class="people"><a href="#nogo">People</a></li>
    <li class="nature"><a href="#nogo">Nature</a></li>
    <li class="abstract"><a href="#nogo">Abstract</a></li>
    <li class="urban"><a href="#nogo">Urban</a></li>
  </ul>
</div> 
```

和我的 CSS

```
.jimgMenu {
    float:left;
    position: relative;
    width: 670px;
    height: 200px;
    overflow: hidden;
    margin: 0px 0px 0px 0px;
    left:-42px;
}

.jimgMenu ul {
    list-style: none;
    margin: 0px;
    display: block;
    height: 200px;
    width: 1340px;

    }

.jimgMenu ul li {
    float: left;
}

.jimgMenu ul li a {
    text-indent: -1000px;
    background:#FFFFFF none repeat scroll 0%;
    border-right: 2px solid #fff;
    cursor:pointer;
    display:block;
    overflow:hidden;
    width:78px;
    height: 200px;
}

.jimgMenu ul li.landscapes a {
    background: url(images/landscapes.jpg) repeat scroll 0%;
}

.jimgMenu ul li.people a {
    background: url(images/people.jpg) repeat scroll 0%;
}

.jimgMenu ul li.nature a {
    background: url(images/nature.jpg) repeat scroll 0%;
}
.jimgMenu ul li.abstract a {
    background: url(images/abstract.jpg) repeat scroll 0%;
}

.jimgMenu ul li.urban a {
    background: url(images/urban.jpg) repeat scroll 0%;
    min-width:310px;

}

.clear {
    clear: both;
} 
```

# ios - 核心数据中的重复项

> ID：15100382
> 
> 赞同：0
> 
> 时间：2013-02-26T22:12:43.137
> 
> 标签：ios, core-data

我试图建立一种现代的方式来保存 Core Data 中的数据，使用`NSManagedDocument`. 一切正常，除了如果我重新启动应用程序（终止它并再次运行它）我会在我的数据库中得到重复的实体，有时应用程序会因错误而崩溃：

> 这个 NSPersistentStoreCoordinator 没有持久存储。它无法执行保存操作。

我认为在不同的线程中发生了一些事情并制造了麻烦，但我无法弄清楚我必须改变什么。希望你们中的一个可以帮助我。

我的班级`Database`有这个实现

```
+ (Database *)sharedDatabase
{
static Database *sharedInstance;
static dispatch_once_t oncePredicate;
dispatch_once(&oncePredicate, ^{
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"Default Database"];
    sharedInstance = [[self alloc] initWithFileURL:url];
    sharedInstance.isCreating = NO;
    sharedInstance.isOpening = NO;
});
if (![[NSFileManager defaultManager] fileExistsAtPath:[sharedInstance.fileURL path]]) {
    if (!sharedInstance.isCreating) {
        sharedInstance.isCreating = YES;
        [sharedInstance saveToURL:sharedInstance.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            sharedInstance.isCreating = NO;
        }];
    }
} else if(sharedInstance.documentState == UIDocumentStateClosed){
    if (!sharedInstance.isOpening) {
        sharedInstance.isOpening = YES;
        [sharedInstance openWithCompletionHandler:^(BOOL success) {
            sharedInstance.isOpening = NO;
        }];
    }
}
return sharedInstance;
} 
```

然后我创建了一个数据模型，其中包含一个名为`Book`. 为了简单起见，它只有一个`isbn`（类型`NSString`）作为属性。子类（ Xcode 自动生成`Create`的子类）的类别具有以下实现来检查数据库中是否已存在 ISBN。这应该返回一个新创建的实体或现有实体，并在发生某些错误时返回 nil，例如有 2 本书具有相同的 ISBN。`NSManagedObject``Book`

```
+(Book *) bookWithISBN:(NSString *)isbn inManagedObjectContext:(NSManagedObjectContext *)context
{
Book *book;

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Book"];
request.predicate = [NSPredicate predicateWithFormat:@"isbn LIKE %@", isbn];
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"isbn" ascending:YES];
request.sortDescriptors = @[sortDescriptor];

NSError *error;
NSArray *matches = [context executeFetchRequest:request error:&error];
if (!matches || (matches.count > 1)) {
    return nil;
} else if(matches.count == 0){
    book = [NSEntityDescription insertNewObjectForEntityForName:@"Book" inManagedObjectContext:context];
    book.isbn = isbn;
}else{
    book = [matches lastObject];
}
return book;
} 
```

所以现在如果我在第一次运行应用程序时调用这个方法，`[Book bookWithISBN:@"1234567890" inManagedObjectContext:[Database sharedDatabase].managedObjectContext]`它将在我的数据库中创建一个实体。如果我终止应用程序并再次运行它，它会再次创建相同的实体。第二次我终止并再次运行它时它会返回`nil`（应该是因为有 2 本书具有相同的 ISBN）。

我在这个项目中使用 ARC。

**可能的解决方案**：

我现在已经尝试了几个小时，直到现在，如果我不子类化`UIManagedDocument`而是创建一个继承自`NSObject`并包含`UIManagedDocument`. 有人知道这真的是正确的解决方案吗？因为我认为应该可以子类化`UIManagedDocument`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:19:49.770

这个建议不会解决你眼前的问题，但无论如何我都会把它放在那里。在我发现 MagicalRecord 之前，我曾经像你一样使用原始形式的 coreData。太棒了。你应该检查一下。[https://github.com/magicalpanda/MagicalRecord](https://github.com/magicalpanda/MagicalRecord)

好处是它将所有 CoreData 代码打包成简洁易懂的代码。它负责管理线程中的上下文关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:52:40.997

所有实例化代码必须驻留在 dispatch_once 块中。您要确保只打开文档一次。

此链接显示所有实例化代码必须在 dispatch_once 块内。

[如何实现与 ARC 兼容的 Objective-C 单例？](https://stackoverflow.com/questions/7568935/how-do-i-implement-an-objective-c-singleton-that-is-compatible-with-arc)

# java - 服务器角色中服务器名称指示 (SNI) 的 Java 支持？

> ID：15100386
> 
> 赞同：5
> 
> 时间：2013-02-26T22:12:46.093
> 
> 标签：java, sni

Java 7 带来了[对 SNI 的客户端支持](http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements-7.html)。是否存在已知的 SNI 服务器角色的开源实现？Java 提供“透明支持”TLS 连接（包括握手），但我需要解耦握手过程，以便我可以根据 SNI 主机名扩展发回证书。

在网上找不到文档后，我查看了 OpenJDK 源代码，但似乎没有一点可以在 Java 发送 ServerHello 消息之前监控 ClientHello 消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-12T03:18:10.980

我前段时间做了一个快速破解：[https ://bitbucket.org/zmarcos/sniserversocket](https://bitbucket.org/zmarcos/sniserversocket)

如果您按照说明操作：[https ://bitbucket.org/zmarcos/sniserversocket/wiki/Home](https://bitbucket.org/zmarcos/sniserversocket/wiki/Home)

它甚至可以在 Glassfish 等 Java EE 服务器上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T01:08:42.160

我不知道 Java 7 的已知开源实现，但[Java 8 中将](http://hg.openjdk.java.net/jdk8/tl/jdk/rev/3f62cfc4e83d)提供服务器 SNI 支持。如果您将此移植到 Java 7，我很想知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-22T14:23:14.800

我自己也遇到了同样的问题，最后写了一个开源库：[TLS Channel](https://github.com/marianobarrios/tls-channel)。该库的范围实际上更大：它是 SSLEngine 的完整抽象（*很难*直接使用），将其公开为 ByteChannel。

关于 SNI，该库在创建 SSLEngine 之前解析第一个字节。然后，用户可以向服务器通道提供一个函数，以根据接收到的域名选择 SSLContexts。

# php - for循环PHP中奇怪的形式出现

> ID：15100387
> 
> 赞同：0
> 
> 时间：2013-02-26T22:12:46.557
> 
> 标签：php, forms, loops, include

我在 for 循环中调用一个函数：

功能：

```
function shop_window($path, $id){

    //Add to shop window
    echo '<form action="/dashboard/'.$path.'/" name="'.$id.'" method="post">
            <input type="hidden" name="action" value="tcd.profile.add.to.shop.window"/>
            <input type="hidden" name="item_id" value="'.$id.'"/>
        </form>';

    echo '<a class="add_to_sw" href="#" onclick="document.'.$id.'.submit();" >Add to SW</a>';
} 
```

调用代码：

```
//query rows = $rows
       if($rows){
              for($i=0;$i<$rows;$i++){
           echo '<div style="float:right;text-align:right;">';
                  shop_window('cv', $db->result($result, $i, 'id'));
                  echo '<span style="font-size:10px;"> &bull; </span>';
                  echo '<a class="catalogue_tweet_this" href="#">Tweet this cv</a>';
           echo '</div>';
              }
        } 
```

这段代码的问题在于它仅适用于例如 for 循环中 4 次迭代中的 2 次。即在第 3 次和第 4 次迭代中，单击链接后，表单似乎没有处于活动状态。

谁能看到我做错了什么？

提前致谢

# pandas - Pandas 文件 IO 读取错误

> ID：15100391
> 
> 赞同：0
> 
> 时间：2013-02-26T22:13:05.087
> 
> 标签：pandas

pandas 新手，遇到与 WinXP 文件路径一致的错误，例如：

```
names1880 = pd.read_csv('C:\Documents and Settings\Foo\My Documents\pydata-book\pydata-book-master\ch02\names\yob1880.txt', names=['name', 'sex', 'births']) 
```

不断报错如下：

```
异常回溯（最后一次调用）
 在 （）
----> 1 names1880 = pd.read_csv('C:\Documents and Settings\Foo\My Documents\pydata-book\pydata-book-master\ch02\names\yob1880.txt', names=['name' , '性别', '出生'])

```

通过阅读可用的文档，如果我的语法有问题或解析器问题，还没有隔离。

对于任何反馈，我们都表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:35:10.843

除非你把`r`字符串放在前面，否则将`\n`被解释为换行符：

```
In [1]: 'C:\Documents and Settings\Foo\My Documents\pydata-book\pydata-book-master\ch02\names\yob1880.txt'
Out[1]: 'C:\\Documents and Settings\\Foo\\My Documents\\pydata-book\\pydata-book-master\\ch02\names\\yob1880.txt' 
```

对比

```
In [2]: r'C:\Documents and Settings\Foo\My Documents\pydata-book\pydata-book-master\ch02\names\yob1880.txt'
Out[2]: 'C:\\Documents and Settings\\Foo\\My Documents\\pydata-book\\pydata-book-master\\ch02\\names\\yob1880.txt' 
```

# html - CSS显示：当表格单元格中的第一个元素不是文本时表格中断

> ID：15100394
> 
> 赞同：3
> 
> 时间：2013-02-26T22:13:17.193
> 
> 标签：html, css

我正在使用 display:table 创建嵌套的行和列集的布局。我注意到当表格单元格中的第一个元素不是文本时，列的对齐似乎会中断。诚然，我还没有测试过哪些元素会导致这种情况，但是这个 JSFiddle 中有一个例子：http: [//jsfiddle.net/ekx4v/](http://jsfiddle.net/ekx4v/)

代码：

```
<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
  #container {
    width:200px;
    height:200px;
    display:table;
  }
  #column1 {
    display:table-cell;
    background-color:blue;
  }
  #column2 {
    display:table-cell;
    background-color:red;
  }
  </style>
</head>
<body>

<div id="container">
  <div id="column1">
    Col1
    <form>
      <select size="2">
        <option>Options go here...</option>
      </select>
    </form>
  </div>
  <div id="column2">Col2</div>
</div>

</body>
</html> 
```

删除“Col1”文本会导致第二列不对齐。如果这在其他浏览器上无法重现，这里有一些屏幕截图，在 Chrome 中拍摄：

使用“Col1”：

![正确对齐](../Images/5a579fe8fbe91fb41c5837ad326a9055.png)

没有“Col1”：

![不正确的对齐](../Images/7d5d5067ddd337d9d290758d1c9513f9.png)

我在 Firefox 中得到相同的结果。这是预期的行为吗？如果是这样，是否有一种解决方法，以便我不必在每个 div 的开头放置文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T22:17:32.470

这完全是由于[`vertical-align`](https://developer.mozilla.org/en-US/docs/CSS/vertical-align)默认为`baseline`，这是预期的行为，因为您的示例具有非常不同的字母基线。实际上，如果没有文本内容，`div`则没有字母基线，因此框的底部根据[规范](http://dev.w3.org/csswg/css3-linebox/#vertical-align)与父级的字母基线对齐。

值得庆幸的是，它很容易解决：

```
#container > div {
   vertical-align:top;
} 
```

[**演示**](http://jsbin.com/usogam/3/edit)

* * *

这是一个[相关的答案](https://stackoverflow.com/a/14918664/1331430)（检查最后一部分），尽管您的用例有点不同：

简单地说，当没有文本内容时，您的`select`元素将与父级的字母基线对齐。这会将父级的字母基线向下推，因此`select`仍然可以容纳在父级内部，其底部与父级的字母基线对齐。所有其他`div`s 的基线仍然与该基线对齐，该基线已被`select`.

通过在元素之前添加文本内容`form`，您`div`将拥有一个字母基线，它不会像那样推动父级的基线`select`。所有`div`s 的基线仍然与前一种情况一样与父级的字母基线对齐，但是这次父级的基线没有被推低。

这是上面2段的粗略演示（谨防疯狂的MS-Paint技能）：

![在此处输入图像描述](../Images/b093c2b9b20eec671173a76f21be971c.png)

如您所见，在第二种情况下，父元素的基线被向下推，因此`select`元素仍然可以容纳在父元素内部，同时其底部与父元素的基线对齐。

`vertical-align:top`使浏览器不必遵守如此复杂的规则。在将其应用于浮动/内联块/表格内容时，它还可以使我们免于许多麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:22:53.307

你也可以使用

```
display:block;
float:left;
height: 200px; 
```

在这两个细胞上。根据我的经验，允许 div 垂直对齐顶部以外的某个位置是使用`table-cell`. 如果您不需要它，可能会有更好的方法来做您想做的事情。将这些显示为块可以让您更好地控制文本在内部的显示方式。

# django - 带有内置登录视图和身份验证表单的 Django “记住我”

> ID：15100400
> 
> 赞同：43
> 
> 时间：2013-02-26T22:13:40.003
> 
> 标签：django, login, checkbox, remember-me

如何重用原始管理员 login() 和 AuthenticationForm 为在登录页面选中“记住我”选项的用户设置更长的 cookie 长度？我目前正在通过 urls.py 使用内置登录

```
url(r'^login/$','django.contrib.auth.views.login', {'template_name': 'authentication/login.html'}, name='login'), 
```

该复选框在我的 login.html 中实现为：

```
<label><input name="remember_me" type="checkbox">Keep me logged in</label> 
```

但我不确定如何通过 AuthenticationForm 将该信息传递给 django.contrib.auth.views.login

目前，如果用户未选中“记住我”框，则 cookie 年龄在 settings.py 中定义

```
SESSION_COOKIE_AGE = 360 
```

我发现了几个类似的问题，但我认为这不需要安装单独的应用程序。下面的代码片段（[http://djangosnippets.org/snippets/1881/](http://djangosnippets.org/snippets/1881/)）看起来很有希望，但我只编写了几个月的 python 和 Django 代码，但我无法让它工作：

```
def login(request, *args, **kwargs):
    if request.method == 'POST':
        if not request.POST.get('remember_me', None):
            request.session.set_expiry(0)
    return auth_views.login(request, *args, **kwargs) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-02-18T21:36:53.913

django 会话 cookie 年龄以[秒](https://docs.djangoproject.com/en/2.2/ref/settings/#std:setting-SESSION_COOKIE_AGE)为单位定义。

```
SESSION_COOKIE_AGE = 360 
```

表示会话将在 6 分钟后过期。我最近实现了“记住我”功能，并设置了以下内容：

```
SESSION_COOKIE_AGE = 60 * 60 * 24 * 30 # One month 
```

如您在代码段中所示，登录视图需要覆盖。

但是听起来您遇到了一个奇怪的问题，即关闭浏览器（当未选中记住我时）不需要用户重新登录，如果您使用 set_expiry(0)，则不应该发生这种情况。当您使用 set_expiry(0) 时，django 会设置一个“会话”长度的 cookie，而不是固定长度的 cookie，并且按照设计它会在浏览器关闭后过期。

还有另一个设置会影响浏览器关闭时清除 cookie。也许您可以尝试更改 SESSION_EXPIRE_AT_BROWSER_CLOSE 设置的值或检查它在您的配置中的现有值。[https://docs.djangoproject.com/en/2.2/topics/http/sessions/#browser-length-sessions-vs-persistent-sessions](https://docs.djangoproject.com/en/2.2/topics/http/sessions/#browser-length-sessions-vs-persistent-sessions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-29T08:49:41.247

所以 request.set_expiry(O) 只登录一个匿名但经过身份验证的用户。如果我是你，我会这样做

`if request.user.is_authenticated() and request.user.id is not None: return redirect('home')`

# python - 调用包含“echo”和“|”的命令行

> ID：15100402
> 
> 赞同：5
> 
> 时间：2013-02-26T22:13:40.947
> 
> 标签：python, shell, subprocess

我尝试使用 Python 调用命令行来执行一些文件。但是，当有一个同时包含`echo`和的命令行时`|`，`subprocess.call`似乎不能很好地工作。就像我跑步时一样：

```
echo "perp -t ../data/ReviewTest.text" | ./eva -b ../data/6.binlm 
```

我会得到我想要的。但是，当我尝试这个时：

```
import subprocess
e=["echo","\"perp", "-t", "../data/R.text\"", "|", "./eva", "-b", "../data/6.binlm"]
subprocess(e) 
```

我将得到除了命令行中显示的 echo 之外的所有内容，例如：

```
".prep -t ..data/ReviewTest.text" | ./eva -b ../data/6.binlm 
```

似乎在`subprocess.call()`，当有一个时`echo`，它后面的所有东西都会被扔到命令行上。

我希望`subprocess`当命令同时包含`echo`和时，我可以使用一些解决方案`|`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:30:20.493

我认为这可能会达到您正在寻找的效果（它应该完全重现您的问题中列出的第一个命令行）：

```
>>> import subprocess
>>> e = 'echo "perp -t ../data/ReviewTest.text | ./eva -b ../data/6.binlm'
>>> subprocess.call(e, shell=True) 
```

1.  “|” 是一个 shell 元字符，所以你需要调用`subprocess.call`with `shell=True`。

2.  在命令行中，您将字符串`"perp -t ../data/ReviewTest.text"`作为 的第一个也是唯一的参数`echo`传递，因此您需要传递相同的字符串，而不仅仅是`subprocess.call`参数字符串中的单个组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:29:35.760

管道`|`是一个 shell 结构，这意味着该命令需要作为 shell 的输入运行。这意味着设置`shell=True`何时`subprocess.call()`被调用。

```
import subprocess
subprocess.call("""echo "perp -t ../data/ReviewTest.text" | ./eva -b ../data/6.binlm""", shell=True) 
```

Python 文档中有关于使用[shell=True的说明。](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)

# php - 你如何从一个类中获取最后插入的 ID 到重定向

> ID：15100408
> 
> 赞同：-1
> 
> 时间：2013-02-26T22:14:05.117
> 
> 标签：php, mysql, pdo, lastinsertid

我使用以下代码通过 php pdo（来自一个类）将数据插入到 mysql 中：

```
$this->pdo = $this->connectMySql();
        if(isset($params['content'])){
            $query = 'INSERT INTO pages SET menu_name = :menu_name, position = :position, visible = :visible, content = :content, pagetype = :pagetype';
        }else{
            $query = 'INSERT INTO pages SET menu_name = :menu_name, position = :position, visible = :visible, pagetype = :pagetype';
        }
        $stmt = $this->pdo->prepare($query);
        $stmt->bindParam(':menu_name',$params['menu_name'], PDO::PARAM_STR);  // PDO::PARAM_STR is used for treating 
        $stmt->bindParam(':position',$params['position'], PDO::PARAM_INT);
        $stmt->bindParam(':visible',$params['visible'], PDO::PARAM_INT);
        if(isset($params['content'])){
            $stmt->bindParam(':content',$params['content'], PDO::PARAM_STR);
        }else{}
        $stmt->bindParam(':pagetype',$params['pagetype'], PDO::PARAM_STR);
        if(!$stmt->execute()){
            return false;
        }
        $lastid = $this->pdo->lastInsertId();
        $this->pdo = null;
        return $lastid; 
```

它位于 try catch 块内。插入有效，但我想插入最后一个 id，我使用了以下（你可以在这里看到它的一部分），但是在 index.php 页面上我似乎没有得到 id：

```
$params = array(
            'menu_name' => $_POST['menu_name'],
            'position' => $_POST['position'],
            'visible' => $_POST['visible'],
            'content' => $_POST['editor1'],
            'pagetype' => $_POST['pagetype']
            );
if ($pages->insertPage($params)) {
    $html->redirect_to("content.php?pageid=" . $pages->lastid);
}else{
    $message = "Aanmaken van pagina is niet gelukt!";
} 
```

任何帮助，将不胜感激。

我不明白为什么这是重复的。我已经看到了另一个问题，但那是关于将 lastinsertid 存储到数据库中（甚至可能不在一个类中）。
在我的主页（index.php）上，我调用了一个插入函数（来自一个类），当插入它时，它应该将 id 返回到主页。我什至尝试从另一篇文章中更改代码（以获取并返回 lastinsertid），但我得到的只是一个空值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T22:36:07.053

你调用 lastid 就像它是一种方法一样，在 index.php:9 我认为 $pages->lastid 会更好

# javascript - ScrollTop 在溢出的 DIV 中不起作用：隐藏

> ID：15100414
> 
> 赞同：2
> 
> 时间：2013-02-26T22:14:24.470
> 
> 标签：javascript, jquery, scrolltop

我有一个隐藏溢出的 DIV，该 DIV 的整个 CSS 块如下所示：

```
.mainContainer .display_box .container .row .col_4 .dPost_box{
    position:relative;
    height:100%;
    width: 100%;
    overflow:hidden;
} 
```

然后，每次将鼠标悬停在元素上时，我都想让 DIV 的内容滚动。但是，它不会起作用。我已经尝试过 jQuery.scrollTop()，以及更新常规的 scrollTop，它不起作用。我也尝试使用[Smooth Scroll](https://github.com/kswedberg/jquery-smooth-scroll)和[Autoscroll](http://code.google.com/p/jquery-autoscroll/) 插件，但它们都不起作用。我当前的 Javascript 如下所示：

```
 function autoScroll(div){
     setInterval(function() { 
    if (div.scrollTop() < div[0].scrollHeight - div.height()){
        div.scrollTop(div.scrollTop() + 10);
    }}, 1000);
 }
 $(document).on({mouseenter: function(){
     autoScroll($(this));
 }, mouseleave: function(){        
 }}, '.dPosts_post'); 
```

我也试过：

```
function autoScroll(div){
     setInterval(function() { 
    if (div.scrollTop() < div[0].scrollHeight - div.height()){
        div.scrollTop[0] +=10;
    }}, 1000);
 } 
```

但什么都行不通。最好，我想让该`autoScroll`功能正常工作，但如果有任何插件可以工作，我会非常乐意试用它们。

任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:42:18.297

我无法让 scrollTop 工作，但我想出了一个解决方法。这是代码，如果其他人将来遇到类似的问题：

```
funnction autoScroll(div){
     //check whether the content does not fit inside the div
     if(div[0].scrollHeight>div.height()){

        //calculate how much the div needs to be scrolled
        var distance = div[0].scrollHeight - div.height() + 20;
        var topCoord = parseInt(div.css('top')); //inital top coordinate of the div
        var lineHeight = Math.floor(parseInt(div.css('font-size')) * 1.5);

        //calculate approximately how many lines there are in the distance that needs scrolling
        var linesCt = distance/lineHeight; 

        //scroll the div at a pace of 2.5s per line
        div.animate({top: topCoord - distance + 'px'}, 2500 * linesCt);
     }
} 
```

# java - java - 扩展的使用

> ID：15100417
> 
> 赞同：-1
> 
> 时间：2013-02-26T22:14:35.543
> 
> 标签：java

我正在尝试了解扩展在 Java 中的使用。

从此代码：

有一个带有 printMethode 的超类

这是一个名为 Subclass 的子类，它覆盖了 printMethod()：

```
public class Subclass extends Superclass {

    // overrides printMethod in Superclass
    public void printMethod() {
        super.printMethod();
        System.out.println("Printed in Subclass");
    }
} 
```

1.  我们可以使用扩展 printMethod 而不使用 super 吗？

    ```
    @Override 
    public void printMethod() {
        System.out.println("Printed in Subclass");
    } 
    ```

2.  `super.printMethod()`扩展 printMethod 的主体有什么用？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:16:12.517

是的。对 super.printMethod 的调用调用父类的版本。有时这是合适的，有时则不是。唯一必须调用超类版本的函数是构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:16:03.063

1.  是的。

2.  它调用`printMethod()`父类的方法。有时课程有共同的功能，但每个孩子也必须做一些特定的事情。在这种情况下，将其放在父类中的公共部分很方便，并从子类中调用super。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T22:23:37.913

在这里 super 关键字扩展了父类方法...

如果你有这样的代码格式

```
class grandfather { name() }
class father extends { name() }
class son extends father
{ 
  super.name() 
} 
```

这个 super.name 实际上调用了祖父类的 name 方法......希望这有帮助

# ruby - 打印格式之间的 Ruby 差异

> ID：15100418
> 
> 赞同：2
> 
> 时间：2013-02-26T22:14:40.340
> 
> 标签：ruby

我开始学习 Ruby，我正在使用`print`，我看到它可以使用两种字符串格式：

1.  `print "#{var}"`
2.  `print "%r %d %r" % [var1,var2,var3]`

当然，一个区别是，在第一个中你不需要输入你传递的参数的类型，但我真正想知道的是其中哪一个更适合 Ruby 以及你可以提供的其他一些技巧我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:18:00.503

大多数人使用前一种方法，因为它会自动调用`.to_s`对象的方法来显示值。您可以通过覆盖类的`.to_s`方法来利用它来发挥您的优势，使其显示您想要的任何内容。

坦率地说，我从未见过在我看过的任何代码中使用的第二种方法。

# ios - 解析 XML 时的调试问题

> ID：15100419
> 
> 赞同：1
> 
> 时间：2013-02-26T22:14:49.697
> 
> 标签：ios, objective-c, xml

我正在尝试解析一些数据，如本教程：[http](http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml) : //www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml 并在“loadParty”中遇到问题" 方法（查看教程）。在本教程中，XML 如下所示：

```
<Party>
<Player>
    <Name></Name>
    <Level></Level>
    <Class></Class>
    <HP></HP>
    <MaxHP></MaxHP> 
</Player>
</Party> 
```

在解析这个时，这行得通。但是当我在我的 xml 文件中添加更多 Player 标签时，例如，删除标签“Level”：

```
<Party>
<Player>
    <Name></Name>
    <Level></Level>
    <Class></Class>
    <HP></HP>
    <MaxHP></MaxHP> 
</Player>
<Player>
    <Name></Name>
            // Level is removed here
    <Class></Class>
    <HP></HP>
    <MaxHP></MaxHP> 
</Player>
</Party> 
```

然后它不起作用。我的解析器基于相同的教程，但其他变量名称。看看我的调试屏幕：它说数字是 0x00，因为我的 XML 文件中没有数字标签...我该如何解决这个问题，因为我不希望我的 XML 全部相同的。

[http://i53.tinypic.com/280kw8z.png](http://i53.tinypic.com/280kw8z.png)

我的 XML 就像：

```
 <app>
    <window ident="1" type="intro">
            <title></title>
            <subtitle></subtitle>
            <number></number>
   </window>
   <window ident="2" type="intro">
           <title></title>
           <subtitle></subtitle>
   </window>
   </app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:41:49.333

我找到了解决方案：

如果您查看本教程[http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml](http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml)然后在 loadApp 方法中您得到了这个：

```
 // Name
NSArray *names = [partyMember elementsForName:@"Name"];
if (names.count > 0) {
    GDataXMLElement *firstName = (GDataXMLElement *) [names objectAtIndex:0];
    name = firstName.stringValue;
} else continue; // Remove this

// Level
NSArray *levels = [partyMember elementsForName:@"Level"];
if (levels.count > 0) {
    GDataXMLElement *firstLevel = (GDataXMLElement *) [levels objectAtIndex:0];
    level = firstLevel.stringValue.intValue;
} else continue; // Remove this 
```

问题是“其他继续；” 您需要删除这部分，因为当他在 XML 中找不到元素时，他会转到“else”然后继续，这意味着他将回到 for 循环的开头并且不会继续。如果您删除“else continue;”，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:47:15.640

我认为首先检查 nil 应该可以解决您的问题：

```
if (numbers != nil && numbers.size > 0) {...} 
```

# asp.net - ASP.NET 查找表

> ID：15100420
> 
> 赞同：2
> 
> 时间：2013-02-26T22:14:59.607
> 
> 标签：asp.net

在页面后面的 C# ASP.Net 代码中，我从 SQL 数据库中检索 200 多行数据，每行有 2 列，一列是唯一键，另一列是数值。然后，我想将这些行写入一个 aspx HTML 元素，例如`<select>`我可以遍历的 JavaScript 数组，本质上是一个查找表。我的问题是，这些方法是否可行，或者是否有更传统的方法来创建网页查找表。我知道如何使用 JavaScript 遍历数组，但我刚刚进入 jQuery，这将是我的迭代偏好。我将不胜感激任何有见地的反馈。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:20:19.923

如果可以接受选择元素，为什么不使用 DropDownList？

```
<asp:DropDownList runat="server" DataTextField="Column1" DataValueField="Column2" id="ddlLookup" /> 
```

然后，您可以使用绑定它

```
ddlLookup.DataSource=yourDataTable;
ddlLookup.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:16:58.130

这当然是一个可行的选择。您可以检索这些值并将它们写入您所说的 JavaScript 数组。我已经很久没有使用 ASP.NET，以至于我不记得您是否可以将这些值放入一个普通的 C# 数组并在您的 aspx 页面中使用它。至少如果您使用 MVC，您可以将 C# 数组传递到您的视图模型中以供您的视图使用。

# visual-studio-2012 - 对齐 Visual Studio 2012 Windows 窗体上的控件？

> ID：15100421
> 
> 赞同：16
> 
> 时间：2013-02-26T22:15:08.560
> 
> 标签：visual-studio-2012

我[确信](https://stackoverflow.com/a/1817547/969613)<= Visual Studio 2010 包含对齐 Windows 窗体上的控件的选项，但在 2012 年，布局工具栏上的控件似乎变灰，这是为什么呢？

![截屏](../Images/d3f41a92da0371f844473d7c571c0f8c.png)

我真的不想只安装 2010 来将控件集中在我的 Windows 窗体上，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-27T09:25:41.297

它们似乎只是用于**多个**控件。我也在 VS 2010 中尝试过，那里也一样。

对于只有一个控件，您可以使用**Format => Center in Form => Horizo​​ntally/Vertically**

在 VS 2010 中，上面的命令有默认的菜单按钮，但在 VS 2012 中默认没有。也许你一直对此感到困惑。（对于确定性问题：如前所述，它适用于“控制组”）

当您选择多个控件时，这些按钮将可用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-29T20:47:32.757

Beytan Kurt 的解释是正确的。另请注意，您可以手动将**Center Horizo​​ntally**和**Center Vertically**快捷方式添加到工具栏，而不是使用**Format > Center in Form**。

1.  右键单击工具栏
2.  单击**自定义...**
3.  选择**命令**选项卡
4.  选择**工具栏**单选按钮并从下拉列表中选择**布局**
5.  单击**添加命令...** ，然后从*类别*部分中选择**格式**
**   选择**Center Horizo​​ntally**和**Center Vertically**命令（不是*Center Horizo​​ntal*和*Center Vertical*）*

# java - 如何从字符串转换为整数？使用 valueOf() 继续获取 NumberFormatException；

> ID：15100426
> 
> 赞同：2
> 
> 时间：2013-02-26T22:15:28.563
> 
> 标签：java, string, integer, numberformatexception

我正在尝试将字符串转换为 Integer （不是原始 int ），然后再将其存储在 a 中，但如果我使用以下语法`Stack<Integer>`，我会不断得到 a ：`NumberFormatException`

```
String element = "5 ";
System.out.println(Integer.valueOf(element)); 
```

有人可以解释如何`valueOf();`正确使用吗？

编辑：我试过 parseInt(); 这给出了相同的异常，无论如何我希望它是一个整数，而不是整数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T22:18:14.733

`Integer.valueOf`将拒绝任何非数字字符。手动删除尾随空格或调用`String#trim()`：

```
String element = "5 ";
System.out.println(Integer.valueOf(element.trim())); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T22:18:14.277

它不喜欢这个空间。修剪输入。改变

```
String element = "5 ";
System.out.println(Integer.valueOf(element)); 
```

到

```
String element = "5 ";
System.out.println(Integer.valueOf(element.trim())); 
```

`valueOf`使用or没关系`parseInt`；似乎都不喜欢尾随空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:16:22.907

您应该`Integer.parseInt()`改用，应该是`Integer.parseInt(element)`.

似乎 5 之后的空间导致了这种情况。`Integer.valueOf(element)`没有空间应该仍然可以工作。

干杯。

# c# - ScintillaNET 控件中的隐藏线

> ID：15100438
> 
> 赞同：1
> 
> 时间：2013-02-26T22:15:59.743
> 
> 标签：c#, .net, winforms, scintilla

我正在使用以下代码来隐藏我的 scintillaNET 控件中的行：

```
if (cShowProcess.SelectedItem != null)
{
    for (int i = 0; i < scintilla1.Lines.Count; i++)
    {
        if (!scintilla1.Lines[i].Text.Contains(cShowProcess.SelectedItem.ToString()))
        {
            scintilla1.Lines.Hide(scintilla1.Lines[i].Number,scintilla1.Lines[i].Number);
            //scintilla1.Lines[i].IsVisible = false;
            continue;
        }
    }
} 
```

代码工作正常，实际上隐藏了线条，但是它在所有隐藏线上留下了一个隐藏线条的空间（即 CR），有没有办法完全隐藏隐藏线？

# javascript - 如何使用 phantomjs 抓取网站？

> ID：15100440
> 
> 赞同：0
> 
> 时间：2013-02-26T22:16:02.220
> 
> 标签：javascript, phantomjs

我正在尝试抓取网站并获取 iTunes 促销代码。经过一些实验，我发现我可以很容易地使用 JavaScript 控制台获取代码： http: [//cl.ly/image/3U1K2a2b1f36/console.png](http://cl.ly/image/3U1K2a2b1f36/console.png)

此后不久，我用 PhantomJS 尝试了以下操作：

```
 var page = require('webpage').create();
 page.open('http://www.air1.com/music/free-songs.aspx', function () {
     code = page.evaluate(function() {
         __doPostBack('ctl00$cphRight1$itunesPromo$lbGetDownloadCode','');
         return document.getElementById('ctl00_cphRight1_itunesPromo_lblItunesCodes').innerText;
     });

     console.log('Code: ' + code);
     phantom.exit();
 }); 
```

它没有像我想象的那样工作——<code>code 返回为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T23:06:19.577

在调用加载它和调用获取 innerText 之间，弹出窗口可能不在 DOM 中。尝试在两者之间暂停。

```
var page = require('webpage').create();
page.open('http://www.air1.com/music/free-songs.aspx', function (status) {

  if (status !== 'success') {
    console.log('error');
    phantom.exit();
    return;
  }

  page.evaluate(function() {
    __doPostBack('ctl00$cphRight1$itunesPromo$lbGetDownloadCode','');
  });

  setTimeout(function() {
   var code = page.evaluate(function() {
     return document.getElementById('ctl00_cphRight1_itunesPromo_lblItunesCodes').innerText;
   });
   console.log('code = ' + code);
   phantom.exit();
  }, 1000);
}); 
```

# mysql - 存储表单信息时最好的mysql表设计？

> ID：15100443
> 
> 赞同：0
> 
> 时间：2013-02-26T22:16:08.300
> 
> 标签：mysql

我正在设计一个有很多表格的网站。大约有 20 种不同的表格，每个表格都有自己的字段。因此，我想知道最好的 mysql 表设计用于存储每个表单的文本元素。字段标签、占位符文本、评估错误等元素。

```
 My design now is that i have one table with the following columns:

 Id areaName label placeholdertext errormsg 
```

然后，对于我的一个表单，我加载所有 areaName 等于“name”、“age”和“gender”的行（为我插入模板表单的三个字段获取三行。但这是最好的方法吗？ ? 我正在考虑进行多语言设置，命名 areaName _en 以支持英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:21:52.503

有了这个，就不会有一个通用的“最好”的方法来做到这一点。就个人而言，我使用

```
forms: form_id,form_action,form_method
forms_inputs: form_id,input_name,input_def_val,input_order,input_required,input_type 
```

这允许随时通过控制面板编辑任何表单，您只需将 input_locale 添加到 forms_inputs 的末尾即可将其本地化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:44:45.460

最重要的考虑因素是您的数据如何组织和逻辑绑定，即存在哪些关系。接下来，归结为您的收藏有多大。例如，如果您正在编写一个 facebook 应用程序，您希望在其中存储用户所在的城市，并且您希望有 10000 名用户，那么将位置作为文本字段存储在同一个表中并不是一个好主意。您将有一个字段“location_id”和一个单独的表“位置”，并通过 id 链接信息。这样，您只存储每个城市一次，然后引用它。

我的观点是您的数据库设计取决于许多因素：速度、大小、易于开发、个人喜好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:48:08.187

我会根据它的逻辑存储数据。就像我会创建一个单独的表来存储个人用户数据（**UserId、FirstName、MidName、LastName、BirthDate、Gender、UserLanguage、Timestamp**）。其他数据应该存储在其他表中，可以通过**UserId**键连接到“**用户**”表。请注意，我没有保存“年龄”，因为它会在不到一年的时间内过时。改为存储出生日期 ( **BirthDate )。**对于多语言设置，只需使用 UTF-8 并在每一行中存储语言 ID（例如我们的“eng”或“spa”等），这样您就可以始终知道它是什么语言。例如，用于存储表单数据的表如下所示：**MyFormId、UserId、Label、PlaceholderText、ErrorMsg、LangId、**

# java - 在 ListGrid (SmartGWT) 的过滤器中使用通配符

> ID：15100449
> 
> 赞同：1
> 
> 时间：2013-02-26T22:16:31.303
> 
> 标签：java, smartgwt

我有以下 ListGrid：

```
ListGridField eml = new ListGridField(EmlSearchItem.EMAIL, EmlSearchItem.EMAIL_TITLE);
emlGrid = new ListGrid();
emlGrid.setWidth("70%");
emlGrid.setHeight("60%");
emlGrid.setFields(eml);
emlGrid.setAutoFetchData(true);
emlGrid.setSelectionType(SelectionStyle.SINGLE);
emlGrid.setAllowFilterExpressions(true);
emlGrid.setShowFilterEditor(true);
emlGrid.setAutoFetchTextMatchStyle(TextMatchStyle. SUBSTRING); 
```

根据JavaDoc设置`allowFilterExpressions`为true应该启用通配符，`*`但我没有得到任何结果。

例如，我正在寻找`a*com`当我`12343@chat.mysite.com`在我的列表中有一个条目时不会返回任何点击

是否需要设置另一个标志才能使通配符在具有过滤功能的 ListGrid 中工作？

# matlab - MATLAB 中 geoshow 的挑战

> ID：15100451
> 
> 赞同：0
> 
> 时间：2013-02-26T22:16:40.310
> 
> 标签：matlab, mapping

我对`MATLAB`. 我能够加载世界地图，但是一旦我使用 geoshow，我就会得到地图的单一颜色。矩阵在图像中显示得很好。

> cmap = colormap(jet)
> worldmap([41 53],[-123 -109])
> geoshow(demo, cmap, R)

这是示例文件的[链接。](http://www.science.oregonstate.edu/~sprolese/demotif/demo.tif)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:27:57.760

[手册](http://www.mathworks.com/help/map/ref/geoshow.html)说：

geoshow(A,cmap,R) 通过参考矩阵 R 投影并显示以经纬度地理参考的图像。该图像在**零高程表面**上显示为纹理图。

这可能是问题吗？

# php - Wordpress 插件开发：将现有页面添加到导航菜单

> ID：15100452
> 
> 赞同：0
> 
> 时间：2013-02-26T22:16:43.870
> 
> 标签：php, wordpress

我很难尝试以编程方式将现有页面添加到现有导航菜单中。

```
wp_update_nav_menu_item($menu_id, 0, array('menu-item-title' => $page['Title'],
                                       'menu-item-object' => 'page',
                                       'menu-item-object-id' => $pid,
                                       'menu-item-type' => 'post_type',
                                       'menu-item-status' => 'publish')); 
```

我没有收到错误响应，但页面没有添加到菜单中。我错过了什么？

更新 [已修复]：

```
wp_update_nav_menu_item($menu_id, 0, $args);
$args = array(
        'menu-item-title' => $post['post_title'],
        'menu-item-object' => 'page',
        'menu-item-object-id' => $pid,
        'menu-item-type' => 'post_type',
        'menu-item-status' => 'publish',
        'menu-item-parent-id' => $navParentID,
        'menu-item-position' => $post['menu_order']
 ); 
```

显然需要菜单顺序才能完成这项工作。

# ruby-on-rails - Rails - 如何将两个 AR 查询的结果合并到一个对象中

> ID：15100464
> 
> 赞同：0
> 
> 时间：2013-02-26T22:17:20.130
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我将如何组合以下两个 AR 对象（从两个单独的查询返回）：

```
user1 = User.first 
```

和

```
user2 = User.last 
```

进入适当的 AREL 对象，例如：

```
@users = user1, user2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:29:48.907

我认为这没问题：`@users = [user1, user2]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:21:19.413

尝试：

```
@users = user1 + user2 
```

我知道这适用于从数据库中检索到的对象数组，但不确定单个对象。

否则，可能会像下面这样工作：

```
@users = [] << user1 << user2 
```

# java - Eclipse 中的 Tomcat 6 配置

> ID：15100471
> 
> 赞同：4
> 
> 时间：2013-02-26T22:17:52.657
> 
> 标签：java, eclipse, tomcat6

我在配置`Eclipse EE`运行 Tomcat 6 时遇到问题（我的公司尚未迁移到 Tomcat 7）。我试图按照[这些说明](http://www.coreservlets.com/Apache-Tomcat-Tutorial/eclipse.html)进行操作。我进入底部面板中的服务器选项卡，点击`New->Server`，然后选择`Apache->Tomcat 6`。然后我经历了以下一系列屏幕：

![在此处输入图像描述](../Images/6d1715c7242c0fb2556908e201e82187.png) ![在此处输入图像描述](../Images/78a7d9b9fd837816b196ea37b63bf0fb.png)

终于到了报错信息：

![在此处输入图像描述](../Images/b05df8cfd3e0fcc773d9106e0f5eaaae.png)

这是我的 Tomcat conf dir ( `C:\home\SFTWR\tomcat6\conf`) 的内容：

```
catalina.policy
catalina.properties
context.xml
logging.properties
server.xml
web.xml
wrapper.properties 
```

有什么建议可能是错的吗？它在独立运行时运行良好，我可以从 Eclipse 部署应用程序，但我希望能够在 Eclipse 中运行以进行调试。

**更新：**

尽管出现错误消息，但我注意到服务器确实已注册，但是无法正常工作——当我尝试点击“开始”时，我收到一个错误弹出窗口，列出了两个问题：

*   **发布到本地主机** （详细信息：*无法发布到服务器，因为它缺少运行时环境。）*

*   **启动本地主机** （详细信息： *在“启动本地主机”期间发生内部错误。java.lang.NullPointerException*）

详细的异常堆栈跟踪如下：

```
org.eclipse.core.runtime.CoreException: Could not load the Tomcat server configuration at \Servers\localhost-config. The configuration may be corrupt or incomplete.
    at org.eclipse.jst.server.tomcat.core.internal.Tomcat60Configuration.load(Tomcat60Configuration.java:313)
    at org.eclipse.jst.server.tomcat.core.internal.TomcatServer.getTomcatConfiguration(TomcatServer.java:124)
    at org.eclipse.jst.server.tomcat.core.internal.TomcatServerBehaviour.getTomcatConfiguration(TomcatServerBehaviour.java:80)
    at org.eclipse.jst.server.tomcat.core.internal.TomcatServerBehaviour.setupLaunch(TomcatServerBehaviour.java:496)
    at org.eclipse.jst.server.tomcat.core.internal.TomcatLaunchConfigurationDelegate.launch(TomcatLaunchConfigurationDelegate.java:96)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:696)
    at org.eclipse.wst.server.core.internal.Server.startImpl2(Server.java:3402)
    at org.eclipse.wst.server.core.internal.Server.startImpl(Server.java:3340)
    at org.eclipse.wst.server.core.internal.Server$StartJob.run(Server.java:363)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:31:23.823

Centos 6.3 上的 Eclipse Juno 和 Tomcat 6.0_36 似乎也有同样的问题。我花了 2 天的时间才意识到问题只存在于 Tomcat 服务器在 Eclipse 启动之前启动时（例如在启动时）。

在启动 Eclipse 之前执行“/etc/init.d/tomcat stop”解决了我的问题。

# assembly - MIPS：堆栈指针（$sp）和堆栈的相关用途

> ID：15100476
> 
> 赞同：19
> 
> 时间：2013-02-26T22:18:10.237
> 
> 标签：assembly, mips

目前我正在为我的计算机组织期中学习，我正在尝试完全理解堆栈指针和堆栈。我知道围绕这个概念的以下事实：

*   它遵循先进后出的原则
*   向堆栈中添加一些东西需要两个步骤：

    ```
    addi $sp, $sp, -4
    sw $s0, 0($sp) 
    ```

我认为阻止我完全理解的是，我无法提出一个相关的、不言自明的情况，我需要和/或想要使用堆栈指针跟踪数据。

有人可以详细说明这个概念并给我一些有用的代码示例吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-26T23:11:03.870

堆栈的一个重要用途是嵌套子程序调用。

每个子程序可能有一组该子程序的局部变量。这些变量可以方便地存储在*堆栈帧*中的堆栈中。一些调用约定也会在堆栈上传递参数。

使用子例程还意味着您必须跟踪调用者，即返回地址。一些架构为此目的有一个专用堆栈，而其他架构则隐式使用“普通”堆栈。默认情况下，MIPS 仅使用寄存器，但在非叶函数（即调用其他函数的函数）中，返回地址被覆盖。因此，您必须保存原始值，通常在局部变量中的堆栈上。调用约定还可能声明必须在函数调用之间保留一些寄存器值，您可以类似地使用堆栈保存和恢复它们。

假设你有这个 C 片段：

```
extern void foo();
extern int bar();
int baz()
{
    int x = bar();
    foo();
    return x;
} 
```

MIPS 程序集可能如下所示：

```
addiu $sp, $sp, -8  # allocate 2 words on the stack
sw $ra, 4($sp)      # save $ra in the upper one
jal bar             # this overwrites $ra
sw $v0, ($sp)       # save returned value (x)
jal foo             # this overwrites $ra and possibly $v0
lw $v0, ($sp)       # reload x so we can return it
lw $ra, 4($sp)      # reload $ra so we can return to caller
addiu $sp, $sp, 8   # restore $sp, freeing the allocated space
jr $ra              # return 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-26T23:21:47.980

MIPS 调用约定要求前四个函数参数在寄存器中`a0`，`a3`其余的（如果有更多的话）在堆栈中。更重要的是，它还要求函数调用者在堆栈上为前四个参数分配四个插槽，尽管这些参数是在寄存器中传递的。

因此，如果要访问参数 5（以及更多参数），则需要使用`sp`. 如果该函数依次调用其他函数并在调用后使用其参数，则需要在堆栈上的这四个槽中进行存储`a0`，`a3`以避免它们丢失/覆盖。同样，您使用`sp`将这些寄存器写入堆栈。

如果您的函数具有局部变量并且不能将它们全部保存在寄存器中（例如当它调用其他函数时无法保持`a0`通过`a3`），它将不得不为这些局部变量使用堆栈空间，这再次需要的使用`sp`。

例如，如果你有这个：

```
int tst5(int x1, int x2, int x3, int x4, int x5)
{
  return x1 + x2 + x3 + x4 + x5;
} 
```

它的反汇编是这样的：

```
tst5:
        lw      $2,16($sp) # r2 = x5; 4 slots are skipped
        addu    $4,$4,$5   # x1 += x2
        addu    $4,$4,$6   # x1 += x3
        addu    $4,$4,$7   # x1 += x4
        j       $31        # return
        addu    $2,$4,$2   # r2 += x1 
```

看，`sp`是用来访问的`x5`。

然后如果你有这样的代码：

```
int binary(int a, int b)
{
  return a + b;
}

void stk(void)
{
  binary(binary(binary(1, 2), binary(3, 4)), binary(binary(5, 6), binary(7, 8)));
} 
```

这是编译后反汇编的样子：

```
binary:
        j       $31                     # return
        addu    $2,$4,$5                # r2 = a + b

stk:
        subu    $sp,$sp,32              # allocate space for local vars & 4 slots
        li      $4,0x00000001           # 1
        li      $5,0x00000002           # 2
        sw      $31,24($sp)             # store return address on stack
        sw      $17,20($sp)             # preserve r17 on stack
        jal     binary                  # call binary(1,2)
        sw      $16,16($sp)             # preserve r16 on stack

        li      $4,0x00000003           # 3
        li      $5,0x00000004           # 4
        jal     binary                  # call binary(3,4)
        move    $16,$2                  # r16 = binary(1,2)

        move    $4,$16                  # r4 = binary(1,2)
        jal     binary                  # call binary(binary(1,2), binary(3,4))
        move    $5,$2                   # r5 = binary(3,4)

        li      $4,0x00000005           # 5
        li      $5,0x00000006           # 6
        jal     binary                  # call binary(5,6)
        move    $17,$2                  # r17 = binary(binary(1,2), binary(3,4))

        li      $4,0x00000007           # 7
        li      $5,0x00000008           # 8
        jal     binary                  # call binary(7,8)
        move    $16,$2                  # r16 = binary(5,6)

        move    $4,$16                  # r4 = binary(5,6)
        jal     binary                  # call binary(binary(5,6), binary(7,8))
        move    $5,$2                   # r5 = binary(7,8)

        move    $4,$17                  # r4 = binary(binary(1,2), binary(3,4))
        jal     binary                  # call binary(binary(binary(1,2), binary(3,4)), binary(binary(5,6), binary(7,8)))
        move    $5,$2                   # r5 = binary(binary(5,6), binary(7,8))

        lw      $31,24($sp)             # restore return address from stack
        lw      $17,20($sp)             # restore r17 from stack
        lw      $16,16($sp)             # restore r16 from stack
        addu    $sp,$sp,32              # remove local vars and 4 slots
        j       $31                     # return
        nop 
```

我希望我已经对代码进行了注释而不会出错。

因此，请注意编译器选择在函数中使用`r16`和`r17`，但将它们保留在堆栈中。由于该函数调用另一个函数，它还需要将其返回地址保存在堆栈中，而不是简单地将其保存在`r31`.

**PS**请记住，在将控制权实际转移到新位置之前，MIPS 上的所有分支/跳转指令都会有效地执行紧随其后的指令。这可能会令人困惑。

# jquery - 为什么追加只能工作一次？

> ID：15100481
> 
> 赞同：2
> 
> 时间：2013-02-26T22:18:17.110
> 
> 标签：jquery, button, append

我正在制作一个价目表，每次按下“下一步”按钮时都会添加一行。我正在尝试在每行之后附加单独的价格。但是，它仅适用于前两行，但最后打印行数（'totalCabs'）可以正常工作。

这是JS：

```
$(document).ready(function () {
var i = 2;
var totalPrice = 0;
var insert = $('<p class="nom">' +
    '<select id="cab' + i + '">' +
    '<option value="b1">B1</option>' +
    '<option value="b2">B2</option>' +
    '<option value="b3">B3</option>' +
    '<option value="bnd">Base No Drawer</option>' +
    '<option value="bt">Base Trey</option>' +
    '<option value="d3">D3</option>' +
    '<option value="d4">D4</option>' +
    '<option value="sc">SC</option>' +
    '</select>' +
    '<input id="cab' + i + 'Size" type="text" />' +
    '<div id="p' + i + '"></div>' +
    '</p>');

$("body").on('click', 'button', (function() {
    $("#poo").append(insert.clone());
    var cabP = '#p' + (i - 1);
    printPrice(cabP);
    i ++;
    document.getElementById('totalCabs').innerHTML = i-1;
}));
function printPrice(place){
    var ap = " $111";
    $(place).append(ap);
}
}); 
```

和 HTML：

```
<body>
<div id="poo">
    <p class="nom">
        <select id="cab1">
            <option value="b1">B1</option>
            <option value="b2">B2</option>
            <option value="b3">B3</option>
            <option value="bnd">Base No Drawer</option>
            <option value="bt">Base Trey</option>
            <option value="d3">D3</option>
            <option value="d4">D4</option>
            <option value="sc">SC</option>
        </select>
        <input id="cab1Size" type="text" />
        <div id="p1"></div>
    </p>
</div>
<button id="btn1">Next</button>
<div id="cabEnter"></div>
<div id="cabPercentage"></div>
<div id="totalCabs"></div>
<div id="totalCabs2"></div>
<div id="subtotalPrice"></div>
<div id="totalPrice"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:36:01.343

看到这个工作小提琴：http: [//jsfiddle.net/hcq7d/2/](http://jsfiddle.net/hcq7d/2/)

问题是变量`insert`是在什么时候创建的`i = 2`。尽管您`i`之后更改了 的值，但此更改不会影响 的值，`insert`因为它已经创建。因此，与其只是克隆`insert`jQuery 对象，不如创建一个新对象，传入 i 的新值：

```
function getInsert(i){
    return $('<p class="nom">' +
            '<select id="cab' + i + '">' +
            '<option value="b1">B1</option>' +
            '<option value="b2">B2</option>' +
            '<option value="b3">B3</option>' +
            '<option value="bnd">Base No Drawer</option>' +
            '<option value="bt">Base Trey</option>' +
            '<option value="d3">D3</option>' +
            '<option value="d4">D4</option>' +
            '<option value="sc">SC</option>' +
            '</select>' +
            '<input id="cab' + i + 'Size" type="text" />' +
            '<div id="p' + i + '"></div>' +
            '</p>');
} 
```

然后，在`click`处理程序中：

```
$("#poo").append(getInsert(i)); 
```

# sql-server - SQL Server 上的 sql 存储过程中的大小写

> ID：15100482
> 
> 赞同：16
> 
> 时间：2013-02-26T22:18:35.227
> 
> 标签：sql-server

基于一个参数，我想在我的存储过程中执行不同的更新。我已经尝试了下面代码的许多排列，但我总是有错误。

```
 @EmpID int = 0, 
@NewStatus nvarchar(10) = 0
AS
BEGIN
SET NOCOUNT ON;

select CASE   @NewStatus 

when    'InOffice' then 
     Update tblEmployee set InOffice = -1 where EmpID = @EmpID
when   'OutOffice' then 
    Update tblEmployee set InOffice = -1 where EmpID = @EmpID
when 'Home' then 
    Update tblEmployee set Home = -1 where EmpID = @EmpID

END 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-26T22:22:18.150

尝试这个

```
If @NewStatus  = 'InOffice' 
BEGIN
     Update tblEmployee set InOffice = -1 where EmpID = @EmpID
END
Else If @NewStatus  = 'OutOffice'
BEGIN
    Update tblEmployee set InOffice = -1 where EmpID = @EmpID
END
Else If @NewStatus  = 'Home'
BEGIN
    Update tblEmployee set Home = -1 where EmpID = @EmpID
END 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-26T22:25:08.573

`CASE`不用于流量控制...为此，您需要使用`IF`...

但是，这个问题有一个基于集合的解决方案，而不是程序方法：

```
UPDATE tblEmployee
SET 
  InOffice = CASE WHEN @NewStatus = 'InOffice' THEN -1 ELSE InOffice END,
  OutOffice = CASE WHEN @NewStatus = 'OutOffice' THEN -1 ELSE OutOffice END,
  Home = CASE WHEN @NewStatus = 'Home' THEN -1 ELSE Home END
WHERE EmpID = @EmpID 
```

请注意，如果不满足条件，`ELSE`遗嘱将保留原始值。`@NewStatus`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-17T05:51:26.687

```
(SELECT CASE WHEN (SELECT  Salary FROM tbl_Salary WHERE Code=102 AND Month=1 AND Year=2020 )=0 THEN 'Pending'
WHEN (SELECT  Salary FROM tbl_Salary WHERE Code=102 AND Month=1 AND Year=2020 AND )<>0 THEN (SELECT CASE  WHEN ISNULL(ChequeNo,0) IS NOT NULL   THEN 'Deposit' ELSE 'Pending' END AS Deposite FROM tbl_EEsi WHERE  AND (Month= 1) AND (Year = 2020) AND )END AS Stat) 
```

# c# - 运行 7-Zip 时抑制 Windows 安全警告

> ID：15100483
> 
> 赞同：2
> 
> 时间：2013-02-26T22:18:35.473
> 
> 标签：c#, command-line, 7zip, processstartinfo

当尝试从 C# Windows 服务中运行 7-Zip 命令行 .exe 时，我的应用程序挂起而没有引发错误。在下面的部分设置断点表明，一旦我点击 Process.Start(p)，就会发生挂起。我将相同的代码放在 Windows 窗体应用程序中，并收到“打开文件 - 安全警告”消息框，指出无法验证发布者。单击警告上的“运行”会导致它继续进行而没有任何问题。除了取消选中“在打开此文件之前始终询问”框之外，还有其他方法可以抑制此警告吗？

我的代码如下：

```
ProcessStartInfo p = new ProcessStartInfo();
p.FileName = "7za.exe";

p.Arguments = "a -tzip \"" + targetName + "\" \"" + sourceName + "\" -mx=9";
p.WindowStyle = ProcessWindowStyle.Hidden;

Process x = new Process();
x = Process.Start(p);
x.WaitForExit(); 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:47:25.473

在Windows资源管理器中右键单击7z exe，文件属性中应该有一个“取消阻止”按钮。单击它，然后单击应用，这应该会在您的计算机上停止它，但不幸的是，对于从 Internet 下载且未签名的任何 exe，它现在只是 Windows 的一部分。

# php - php foreach 多次相同的值，但只打印一次

> ID：15100484
> 
> 赞同：1
> 
> 时间：2013-02-26T22:18:40.423
> 
> 标签：php, foreach

我有一个包含节目和季节的 xml 文件。

我想做的是读出一个节目的季节。但问题是每个季节都在同一个节目下多次出现。

我只希望每个季节编号打印一次，例如：

```
Season 1
Season 2 
```

但我现在得到的是：

```
Season 1
Season 2
Season 2
Season 1
Season 1 
```

我的 xml 看起来像

```
<?xml version="1.0"?>
<episodeview>
<episodeview>
    <idShow>1</idShow>
    <idSeason>1</idSeason>
</episodeview>
<episodeview>
    <idShow>1</idShow>
    <idSeason>2</idSeason>
</episodeview>
<episodeview>
    <idShow>1</idShow>
    <idSeason>2</idSeason>
</episodeview>
<episodeview>
    <idShow>1</idShow>
    <idSeason>1</idSeason>
</episodeview>
<episodeview>
    <idShow>1</idShow>
    <idSeason>1</idSeason>
</episodeview>
</episodeview> 
```

还有我的 php 文件：

```
<?php
$idShow = "1";
$source = "show.xml";

$xmlstr = file_get_contents($source);
$xmlcont = new SimpleXMLElement($xmlstr);
foreach($xmlcont as $url) {
    if ($url->idShow == $idShow) {
        $test = $url->idSeason;
        echo "Season ";
        echo $test;
        echo "<br>";
     }      
} 
```

?>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:28:44.057

试试这个，简短而甜蜜：

```
 $xml=simplexml_load_file($source); // (1)

 foreach ($xml->xpath("//idSeason") As $season) { // (2)

      $s[(int)$season]=$season; // (3)
 }

 foreach ($s As $a) echo "Season $a<br />"; // (4) 
```

1.  从文件中获取`simplexml`-Element

2.  仅使用并遍历它们选择`<idSeason>`-nodes`xpath`

3.  创建一个`$s`以 season-id 作为索引和值的新数组 --> 数组索引必须是唯一的，因此重复的 id 不会扩大数组，而是“覆盖”已经存在的索引。

4.  迭代`$s`以回显它

我知道人们只能通过 选择唯一值`xpath`，但我不是那么熟练;-) 并且 simplexml 不支持更容易的 xpath 2.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:38:39.450

我会这样做：

```
<?php
  $idShow = "1";
  $source = "show.xml";

  $xmlstr  = file_get_contents($source);
  $xmlcont = new SimpleXMLElement($xmlstr);
  $seasons = array();
  foreach($xml_cont as $url){ $seasons[] = $url->idSeason; }

  $seasons = array_uniq($seasons);

  foreach($seasons as $season){ echo "Season $season <br />"; } 
?> 
```

诚然，与您可能尝试的其他一些解决方案相比，我的示例涉及更多的循环，但我认为它相当有效，也许同样重要的是，可读性强。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T22:21:52.910

尝试：

```
<?php
$idShow = "1";
$source = "show.xml";
$have = array();

$xmlstr = file_get_contents($source);
$xmlcont = new SimpleXMLElement($xmlstr);
foreach($xmlcont as $url) {
    if ($url->idShow == $idShow) {
        $test = $url->idSeason;
         if( ! in_array( $test, $have) ){ //Check if the season already is displayed
           echo "Season ";
           echo $test;
           echo "<br>";
           $have[] = $test; //Store the season in the array
          }
     }      
} 
```

这样您就可以将显示的所有内容存储在数组中，并且在输出测试之前，它会检查它是否已经显示。

# java - 遍历回历月的天数

> ID：15100487
> 
> 赞同：1
> 
> 时间：2013-02-26T22:18:46.780
> 
> 标签：java, calendar, gregorian-calendar, hijri

我正在使用一个类将公历日期转换为回历日期。

```
hdate = hijriToGreg(y, m, d); 
```

我如何循环获取回历月的天数？

换句话说，我怎样才能得到回历月的最后一天？

# jquery - Telerik MVC TreeView 获取所有选中的节点值

> ID：15100488
> 
> 赞同：0
> 
> 时间：2013-02-26T22:18:52.913
> 
> 标签：jquery, treeview, telerik-mvc

我有一个带有 ShowCheckBox(true) 的 TreeView。如何使用 JQuery 获取第二级检查节点的所有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:25:11.657

这是关于 jQuery 选择器的：

要仅将第二级的选中复选框的值作为数组检索，您可以使用以下代码行。

```
var array = $('#TreeViewName>ul>li>ul>li>div :checked').map(function(){ return this.value}); 
```

要获取节点的文本或值，您应该使用相应的方法 - **getItemText**或**getItemValue**

[文档](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-treeview-client-api-and-events.html#getItemText)中有示例：

```
var treeview = $('#ProductsTreeView').data('tTreeView');
var nodesSecondLevel= $("#TreeView1>ul>li :has(>div :checked)");
var arrayOfValue = nodesSecondLevel.map(function(){
    return treeview.getItemValue(this);
}) 
```

# google-app-engine - 正确的 GOPATH 包含来自 App Engine SDK 的 App Engine 库？

> ID：15100490
> 
> 赞同：9
> 
> 时间：2013-02-26T22:19:09.667
> 
> 标签：google-app-engine, go

我正在尝试使用 Go SDK 为 App Engine 编写一个应用程序，但它似乎与单元测试有一种有趣的关系。人们已经围绕[这套原始的、过时的工具](https://code.google.com/p/gae-go-testing/)[编写了](https://github.com/tenntenn/gae-go-testing) [库](https://github.com/icub3d/appenginetesting)，但是每次我尝试安装它们时，根据我使用的 Go 命令，我都会遇到两个问题之一：

*   从标准`go`：找不到“appengine”或“appengine_internal”
*   来自 SDK 的`go`：不允许构建包。我怀疑我应该使用这个。

我的猜测是我必须操纵我`$GOPATH`在 SDK 中的某个位置包含一个目录，以便 appengine 包可见，但我尝试了许多变体（例如`$SDK/goroot`、`$SDK/goroot/src`等），但它们似乎都不起作用。

-一般来说，对于 App Engine for Go，可能会建议哪些测试策略？

-具体来说，我怎样才能使这些包可见，以便我可以使用通用 Go 工具安装依赖于它们的库（例如这些测试包）或以其他方式运行我自己的测试套件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:43:42.370

[这个答案](https://stackoverflow.com/questions/11286534/test-cases-for-go-and-appengine)为更新的 gae-go-testing 提供了详细的安装说明。我快速浏览了一下，它们似乎确实有效。请注意，安装涉及跨 SDK 复制`appengine`，`appengine_internal`并`goprotobuf`从 SDK 复制到本地 go install。

# asp.net - DateTime 不会在我的模型中绑定，但可以在 FormCollection 中解析

> ID：15100494
> 
> 赞同：0
> 
> 时间：2013-02-26T22:19:27.563
> 
> 标签：asp.net, asp.net-mvc, c#-4.0, asp.net-mvc-4

这是新事物:)

我的文化是'nl'（荷兰语），我想我的模型无法解析包含 DateTime -> (DateTime)formColl['CreatedOn'] 的字符串不起作用。DateTime.Parse(formcoll['CreatedOn'] 虽然有效。

此外，在我看来，这是一个隐藏的领域。

```
@Html.HiddenFor(Model => Model.CreatedOn) 
```

如果不手动添加转换，我将如何解决这个问题（我怀疑这会开箱即用）？

编辑：Chrome 和 Firefox 似乎有所不同。使用 Chrome，转换不起作用，而使用 Firefox 则可以。我在 Chrome 上的主要浏览器语言是：'en'（在设置中它是荷兰语，但在第三位：-S）我在 Firefox 上的主要浏览器语言是：'nl'

在 Chrome ![Empy 模型值：CreatedOn (Chrome)](../Images/742a56e43fd45cf2fc8f1b0c6f937351.png) 中有关 chrome 提交值的更多信息 ![Formcollection -> Window information (Chrome)中填入值](../Images/d04f560347d02c04caabd951f24f756c.png) 在 FireFox 中 ![火狐截图](../Images/1b32734083d16857f6f6abf88c225f9b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:26:29.270

> (DateTime)formColl['CreatedOn'] 不起作用。

这是完全正常的。您不能将字符串（`formColl['CreatedOn']`代表的）转换为`DateTime`实例。

您可以尝试在[`<globalization>`](http://msdn.microsoft.com/en-us/library/hy4kkhe0%28v=vs.100%29.aspx)元素的 web.config 中设置文化，看看这是否有任何不同：

```
<globalization culture="nl-NL" uiCulture="nl-NL" /> 
```

# ruby - 卸载所有 gem Ruby 2.0.0

> ID：15100496
> 
> 赞同：47
> 
> 时间：2013-02-26T22:19:46.783
> 
> 标签：ruby, gem, ruby-2.0

似乎 ruby​​ 2.0.0 已将“默认” gem 添加到组合中，并使它们无法通过 gem 卸载来移除。

如何删除所有非默认宝石？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-28T11:10:50.237

我使用了这一行脚本。

```
for i in `gem list --no-versions`; do gem uninstall -aIx $i; done 
```

它会忽略默认的 gem 错误并继续进行。简单明了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-30T10:12:16.970

首先，进入 gems 目录 像 ../ruby/2.0.0-p195/lib/ruby/gems/2.0.0/specifications
你会找到一个名为**default**的目录，其中包括所有 ruby​​ 2.0 附带的默认 gem

将存储在**默认**目录中的所有***.gemspec**移动到**规范**目录并删除空的**默认**目录。

 ******然后你可以像过去一样做任何你想做的事情。:-)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-26T22:19:46.783

我用 ruby​​ 编写了一个脚本来删除所有非默认的 gem。

[https://gist.github.com/nixpulvis/5042764](https://gist.github.com/nixpulvis/5042764)

现在需要这样做，因为与 2.0.0 之前不同，一些 gem 在安装 ruby​​ 时被标记为“默认”，并且不能使用`gem uninstall`. 这使得以前流行的删除所有 gem 的方法不起作用。

在这里供参考。
`gem list | cut -d" " -f1 | xargs gem uninstall`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T18:13:26.053

我还没有找到比排除“默认”宝石更好的答案：

```
/usr/local/bin/gem list --no-versions | \
grep -v -E "(bigdecimal|io-console|json|minitest|psych|rake|rdoc|test-unit)" | \
xargs --no-run-if-empty /usr/local/bin/gem uninstall --executables --user-install --all --force 
```******

# ember.js - Ember.js：transitionTo 路由，然后到动态段

> ID：15100499
> 
> 赞同：15
> 
> 时间：2013-02-26T22:19:57.477
> 
> 标签：ember.js

我有一个设置了帐户和 account/:account_id 选项的路由器。当用户登陆我的应用程序的索引页面时，我将它们转换到帐户路由。

```
Social.Router.map(function() {
    this.resource('accounts', function(){
        this.resource('account', { path: ':account_id'});
    });
});

Social.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('accounts');
    }
}); 
```

我想做的是根据某些标准将它们转换为指定的 :account_id 路由。目前我只想获取数组中的第一个帐户并使用它。但在未来，这可能是一种将他们转移到他们查看的最后一个帐户的方法。像这样的东西：

```
Social.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('accounts/:account_id');
    }
}); 
```

文档给出了“详细信息”，但没有提供示例，仅提供以下内容：

> **过渡到（名称，模型）**
> 
> 过渡到另一条路线。（可选）为相关路线提供模型。该模型将使用序列化钩子序列化到 URL 中。

我尝试了以下方法：

```
this.transitionTo('accounts/4');
Uncaught Error: assertion failed: The route accounts/4 was not found

this.transitionTo('accounts', Social.Account.find(1));
Uncaught More objects were passed than dynamic segments 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T11:05:01.897

我把其他人的答案和一些摆弄放在一起，得出了这个答案：

定义您的路线，例如：

```
this.resource('accounts', function () {
    this.route('account', {path: '/:account_id'});
}); 
```

重定向：

```
this.transitionTo('accounts.account', accountObj); 
```

但是，如果您从服务器加载，则需要`accountObj`在重定向之前加载对象：

```
var accountObj = App.Account.find(1);
accountObj.one('didLoad', this, function () {
    this.transitionTo('accounts.account', accountObj);
}); 
```

我用完整的例子设置了[这个小提琴](http://jsfiddle.net/cenic/XNyme/6/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T07:04:05.257

看起来transitionTo 已被弃用，取而代之的是transitionToRoute。

尽管如此，您可以通过拥有原始声明来实现重新路由，`this.resource('account', { path: '/:account_id'});`然后使用单个创建的对象进行转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T20:59:39.997

您没有正确指定路由路径，您应该在资源下有一个路由，而不是另一个资源。它应该是这样的：

```
Social.Router.map(function() {
    this.resource('accounts', function(){
        this.route('account', { path: '/:account_id'});
    });
});

Social.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('accounts.account', Social.Account.find(1));
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-24T07:04:01.153

使用最新的 Ember (1.0.0-RC-6)，可以完美运行。

**路由器：**

```
this.resource('accounts', function () {
    this.resource('account', {path: '/:account_id'});
}); 
```

**重定向：**

```
this.transitionToRoute('account', Social.Account.find(1)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T21:54:04.350

由于您的 /:account_id 是您需要 transitionToRoute 'account' 的资源。您还需要相应的 AccountRoute。

如果 /:account_id 是路由而不是资源，您将 transitionToRoute 'accounts.account' 并且您的路由处理程序将被称为 AccountsAccountRoute。

# java - 如何在没有包装器的情况下从 Java 应用程序创建服务（Windows）？

> ID：15100500
> 
> 赞同：1
> 
> 时间：2013-02-26T22:19:59.413
> 
> 标签：java, service, wrapper

我见过很多人问如何使 java 应用程序成为服务，而答案总是包装器（即 JSW）。

我想知道是什么让 java 应用程序变成了服务，以及如何在没有包装器的情况下实现它。

我并不是要重新发明轮子，只是让我觉得“更弱”不处理这个问题背后的概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:25:48.990

Windows 不是 Lunix。Linux 服务只是一个 shell 脚本，它实现了启动、停止、重启等选项。Windows 服务是实现良好定义接口的本机组件。JVM 没有实现这样的接口，所以你需要一些东西来实现它并运行 java。

有几个这样的组件。我知道 JavaService 和 Apache Daemon，建议你使用它们。我不相信有什么“较弱”的东西，我不认为提到的解决方案太重。JavaService 只是一个小 DLL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:25:12.623

看看[https://en.wikipedia.org/wiki/Service_wrapper](https://en.wikipedia.org/wiki/Service_wrapper)：

> “Java 本身不支持创建系统服务”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:49:21.760

如果您想知道为什么需要这些包装器，可以查看它们的源代码（其中一些是开源的）。

通常用于运行应用程序 (`java.exe`和`javaw.exe`) 的可执行文件无法处理运行服务所需的信号。特别是，虽然启动应用程序很容易，但通知服务应用程序需要停止并重新启动是另一回事。您需要在应用程序运行时捕获这些通知，如果这不是突然的进程终止，那肯定会更好。

除了服务的注册方面，服务包装器还实现了一些 JNI 功能，以使您的应用程序知道它是一个服务。（据我所知，他们也倾向于使用 JVM DLL 而不是可执行文件。）

以[Winrun4J 代码](https://github.com/poidasmith/winrun4j)为例。它具有本机部分和 Java 部分。

此外，服务还需要注意某些技巧。例如，[如果您不使用`-Xrs`，您的服务将在用户注销时关闭](https://superuser.com/q/374147/42341)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:29:21.923

Java 不会编译为本机可执行文件（用于 !indows 或 Linux elf 可执行文件的 .exe 文件）。执行 Java 类的唯一方式是在 Java 虚拟机中，这就是您`java -cp Main`在启动 Java 应用程序时键入的原因。这也是为什么 Java 二进制文件可以在多个平台上执行的原因，无论哪个平台创建了类和 jar 文件。

服务只是操作系统在某个时间点（例如在启动时）启动的可执行文件。创建此类服务与 Java 完全不同，因为它们是操作系统的问题。如果您想了解有关服务的更多信息，我建议您在相关网站上查找“服务”（或您正在使用的平台调用它们的任何内容）的创建。您甚至可以查看现有包装库的源代码以了解详细信息，但您将不可避免地不得不使用**Java 以外**的语言来为您的操作系统实现服务。

使用现有的包装库来避免至少在其他语言中进行本机编码没有任何弱点。正如你所说，不要重新发明轮子。

# css - Bootstrap / KendoUI / LocalHost 工作正常，但不是域名

> ID：15100502
> 
> 赞同：0
> 
> 时间：2013-02-26T22:20:02.150
> 
> 标签：css, twitter-bootstrap, kendo-ui, data-visualization

我在同一页面上有一个使用 bootstrap 和 Kendo UI 的 Web 应用程序。该页面大部分时间看起来都很完美，但在部署到测试 Web 服务器后我发现了一个问题。谁能帮我弄清楚为什么在使用域名而不是 localhost 时 IE 9 的格式会关闭？

```
For (http://localhost) (Running from VS 2012) Chrome: Works; FireFox: Works; IE 9: Works

For (http://webtrgws01:1200/) Chrome: Works; FireFox: Works; IE 9: Not Working

For (http://localhost:1200/) (This is on the server) IE 9: Works

For (http://webtrgws01:1200/) (This is also on the server) IE 9: Not working 
```

我的代码如下。任何帮助将不胜感激。

```
@model LatencyApp.Domain.Models.ChartsViewModel

@{
Layout = null;
}

<!DOCTYPE html>

<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Bentley Systems - Application Latency</title>

<!-- Kendo References -->
<link rel="stylesheet" href="~/Content/kendo.common.min.css">
<link rel="stylesheet" href="~/Content/kendo.blueopal.min.css">
<link rel="stylesheet" href="~/Content/kendo.dataviz.min.css" type="text/css" />
<script src="~/Scripts/jquery.min.js"></script>
<script src="~/Scripts/kendo.all.min.js"></script>
<script src="~/Scripts/kendo.aspnetmvc.min.js"></script>

<!-- Bootstrap References -->
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/bootstrap-responsive.css" rel="stylesheet" />

</head>
<body>
<div class="container">
    <h2>Bentley Systems - Application Latency</h2>

    @* Filters Begin Here *@
    @using (Html.BeginForm("Index", "Home", FormMethod.Get))
    {
            <div style="white-space: nowrap; display: inline-block;">
                Environment:
                @(Html.Kendo().DropDownList()
                .Name("envDD")
                .DataTextField("LoginEnvName")
                .DataValueField("LoginEnvironmentID")
                .BindTo(Model.EnvForDD)
                .HtmlAttributes(new { style = "width: 100px;" })
                )
                &nbsp;
            </div>
            <div style="white-space: nowrap; display: inline-block;">
                Region:
                @(Html.Kendo().DropDownList()
                .Name("locDD")
                .DataTextField("LoginLocName")
                .DataValueField("LoginLocationID")
                .BindTo(Model.LocForDD)
                .HtmlAttributes(new { style = "width: 100px;" })
                )
                &nbsp;
            </div>
            <div style="white-space: nowrap; display: inline-block;">
                Frequency:
                @(Html.Kendo().DropDownList()
                .Name("freDD")
                .DataTextField("FrequencyName")
                .DataValueField("FrequencyID")
                .BindTo(Model.FreForDD)
                .HtmlAttributes(new { style = "width: 100px;" })
                )
                &nbsp;
            </div>
            <div style="white-space: nowrap; display: inline-block;">
                Date Range: 
                @(Html.Kendo().DateTimePicker()
                .Name("startDate")
                .HtmlAttributes(new { style = "width: 210px;" })
                .Value(DateTime.Today.AddDays(-7))
                .Max(DateTime.Today.AddDays(1))
                .ParseFormats(new string[] { "MM/dd/yyyy" })
                .Events(e => e.Change("startChange"))
                )
                    -
                @(Html.Kendo().DateTimePicker()
                .Name("endDate")
                .HtmlAttributes(new { style = "width: 210px;" })
                .Value(DateTime.Today.AddDays(1))
                .Min(DateTime.Today.AddDays(-7))
                .ParseFormats(new string[] { "MM/dd/yyyy" })
                .Events(e => e.Change("endChange"))
                )
                &nbsp;
            </div>

        <input type="submit" value="Run Report" class="k-button" />
    }
    @* Filters End Here *@

    @* Charts Begin Here *@ 
 @foreach (var item in Model.AppsForChart)
 {
 @Html.Partial("ChartPartial", item.LoginHistories,
                    new ViewDataDictionary{{"AppName", item.LoginAppName},
                                           {"StartDate", item.StartDate.ToShortDateString()},
                                           {"EndDate", item.EndDate.ToShortDateString()},
                                           {"Step", item.Step },
                                           {"AvgDuration", item.AvgDuration },
                                            })
 }
    @* Charts End Here *@

</div>

<!-- Bootstrap -->
<script src="~/Scripts/bootstrap.min.js"></script>

</body>
</html>
<style>
.k-widget.k-chart{
    display: inline-block;
}
</style>

<script>
function startChange() {
    var endPicker = $("#endDate").data("kendoDateTimePicker"),
        startDate = this.value();

    if (startDate) {
        startDate = new Date(startDate);
        startDate.setDate(startDate.getDate() + 1);
        endPicker.min(startDate);
    }
}

function endChange() {
    var startPicker = $("#startDate").data("kendoDateTimePicker"),
        endDate = this.value();

    if (endDate) {
        endDate = new Date(endDate);
        endDate.setDate(endDate.getDate() - 1);
        startPicker.max(endDate);
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T09:56:49.433

优先使用*IE=edge*而不是*IE=9*以强制使用最新的渲染引擎。

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

请参阅[HTML5 样板文档](https://github.com/h5bp/html5-boilerplate/blob/master/doc/html.md#x-ua-compatible)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:44:38.647

我使用以下元标记修复了该错误：

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

# c - 脚本二进制文件的无限循环

> ID：15100504
> 
> 赞同：0
> 
> 时间：2013-02-26T22:20:05.833
> 
> 标签：c, linux, buffer, infinite-loop

我注意到我们可以通过运行来获得脚本二进制文件的无限循环

```
script -c "repeat 1000 ls -l && cat typescript" 
```

我通过强制脚本将缓冲区刷新到打字稿文件中来做到这一点（这就是为什么重复 1000）然后当 cat 命令输出文件而脚本二进制文件正在写入他的缓冲区时，文件已满：“延迟” cat 命令的输出和文件的写入之间是肯定的，我的问题是：如何使它成为否定，使这个无限循环消失？

当然没有环境修改。我在 C 中有自己的版本，具有相同的行为。谢谢 ！

# ios - iOS 个人开发者计划中的公司名称？

> ID：15100506
> 
> 赞同：4
> 
> 时间：2013-02-26T22:20:11.863
> 
> 标签：ios, account

我应该在 iOS 个人开发者计划中使用我的真实公司名称吗？

编辑：我计划以个人身份注册 iPhone 开发者计划。在 iTunes Connect 上添加我的第一个应用程序时，它会提示我输入公司名称吗？我可以使用任何虚构的名字吗？它必须是法人实体吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:23:53.877

你可以使用你自己的名字（我愿意）。如果您计划销售应用程序（而不是提供免费应用程序），请勿使用虚假信息，因为 Apple 将在应用程序的“合同、税务和银行业务”阶段验证信息。

访问 iTunes Connect (itunesconnect.apple.com) 了解更多信息。

# android - 使用任务杀手后在我的应用程序中强制关闭

> ID：15100508
> 
> 赞同：0
> 
> 时间：2013-02-26T22:20:18.407
> 
> 标签：android, forceclose, kill-process, taskkill

我有一个可以正常工作的应用程序。我按“返回”按钮并关闭应用程序，然后打开应用程序并正常工作按“主页”并转到设备的主屏幕，然后打开应用程序并正常工作

问题如下：

我使用“返回”或“主页”离开应用程序，如果我使用任务杀手并关闭进程，当我再次打开应用程序时会显示“强制关闭”

我正在使用一些库。

有一些方法，例如“内存不足”、“OnFinish”等，可以帮助我处理这个错误吗？

附上错误日志

非常感谢您提前

```
02-26 23:11:48.022: E/AndroidRuntime(13427): FATAL EXCEPTION: main
02-26 23:11:48.022: E/AndroidRuntime(13427): java.lang.RuntimeException: Unable to start activity ComponentInfo{proyect.com.test/proyect.com.test.Hola}: java.lang.NullPointerException
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.os.Looper.loop(Looper.java:137)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.app.ActivityThread.main(ActivityThread.java:5041)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at java.lang.reflect.Method.invokeNative(Native Method)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at java.lang.reflect.Method.invoke(Method.java:511)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at dalvik.system.NativeStart.main(Native Method)
02-26 23:11:48.022: E/AndroidRuntime(13427): Caused by: java.lang.NullPointerException
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.os.Parcel.readIntArray(Parcel.java:784)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at com.origamilabs.library.views.StaggeredGridView$SavedState.<init>(StaggeredGridView.java:2108)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at com.origamilabs.library.views.StaggeredGridView$SavedState.<init>(StaggeredGridView.java:2104)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at com.origamilabs.library.views.StaggeredGridView$SavedState$1.createFromParcel(StaggeredGridView.java:2132)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at com.origamilabs.library.views.StaggeredGridView$SavedState$1.createFromParcel(StaggeredGridView.java:1)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.os.Parcel.readParcelable(Parcel.java:2103)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.os.Parcel.readValue(Parcel.java:1965)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.os.Parcel.readSparseArrayInternal(Parcel.java:2255)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.os.Parcel.readSparseArray(Parcel.java:1687)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.os.Parcel.readValue(Parcel.java:2022)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.os.Parcel.readMapInternal(Parcel.java:2226)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.os.Bundle.unparcel(Bundle.java:223)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.os.Bundle.getSparseParcelableArray(Bundle.java:1240)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:845)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.support.v4.app.FragmentManagerImpl.dispatchCreate(FragmentManager.java:1856)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:210)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at proyect.com.test.Hola.onCreate(Hola.java:222)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.app.Activity.performCreate(Activity.java:5104)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-26 23:11:48.022: E/AndroidRuntime(13427):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-26 23:11:48.022: E/AndroidRuntime(13427):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:20:27.043

我在这里找到了解决方案[https://github.com/maurycyw/StaggeredGridView/issues/12](https://github.com/maurycyw/StaggeredGridView/issues/12)。

只需替换此构造函数以匹配此：

```
private SavedState(Parcel in) {
    super(in);
    firstId = in.readLong();
    position = in.readInt();
    topOffsets = in.createIntArray();
    mapping = new ArrayList<ColMap>();
    in.readTypedList(mapping, ColMap.CREATOR);
}

private ColMap(Parcel in) {
    tempMap = in.createIntArray();
    values = new ArrayList<Integer>();
    for (int index = 0; index < tempMap.length; index++) {
        values.add(tempMap[index]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T15:55:50.007

tsil 的答案从根本上说，但该链接并没有准确解释为什么会发生这种情况。或者如何重现。

# java - 如果我的 JRE 不支持字符编码怎么办？

> ID：15100511
> 
> 赞同：5
> 
> 时间：2013-02-26T22:20:24.970
> 
> 标签：java, character-encoding

如果使用我的 JRE 不支持的编码生成文件怎么办？无论如何扩展/自定义我的 JRE 可以处理的内容？

这可能是一个糟糕/无关的例子（我只是第一次复习字符集/编码），但我*相信*Linux JRE 不处理 CP-1252（一种 Windows 编码）。如果是这种情况，那么如何让 Java 应用程序在 Linux 机器上运行以读取 CP-1252 编码的文件？

即使 Linux JRE 发行版*确实*支持 CP-1252（这是一个可怕的例子），我也知道它不支持某些编码。无论这些编码是什么，有没有办法扩展它的标准`Charactset`，如果有，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:26:29.803

Java 类库具有添加新字符集支持的机制；请参阅 .java 文档[`CharsetProvider`](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/spi/CharsetProvider.html)。

基本思想是编写一个实现`CharsetProvider`API 的类。然后在您的 JAR 文件中添加一个名为“/META-INF/services/java.nio.charset.spi.CharsetProvider”的文件，该文件以规定的格式列出您的字符集名称。

[（我还遇到了这个错误报告[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4619777](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4619777)如果您尝试在受信任的小程序中添加自己的字符集，这可能会影响您......）]

* * *

> 您是否知道任何已经这样做的“字符集扩展库”（并提供许多非标准字符集）？

我能找到的唯一例子是[JCharset](http://www.freeutils.net/source/jcharset/)，它只添加了 8 个额外的字符集。

如果您（或其他任何人）需要不包含在内的字符集，我建议您下载 JCharset，实现新的字符集，然后将更改作为补丁发布给作者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:26:41.577

[文档](http://docs.oracle.com/javase/6/docs/api/java/nio/charset/package-summary.html)说：

> 可以通过 java.nio.charset.spi 包中 CharsetProvider 类中定义的接口提供对新字符集的支持。

按照链接并阅读说明...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:41:29.753

来自 vmoksha 的 sunilkumar

请检查您的 .xml 文件是否包含 UTF-8

# c# - 从动态生成的用户控件调用父页面中的方法

> ID：15100514
> 
> 赞同：1
> 
> 时间：2013-02-26T22:20:42.427
> 
> 标签：c#, asp.net

我有一个类似于[Calling a method in parent page from user control](https://stackoverflow.com/questions/623136/calling-a-method-in-parent-page-from-user-control)的问题，除了我的用户控件是在页面创建时动态生成的。

我在上面的答案中尝试了首选解决方案，但是由于我事先不知道页面上需要多少个控件副本，所以我无法订阅 Page_Load 上的事件。

这个应用程序需要对其逻辑进行大修，但它超出了我当前项目的范围。我目前已经实现了 less preferred `((MyPageName)this.Page).CustomMethod();`，但如果可以的话，我想以“正确”的方式来做。

你有什么建议吗？

编辑：控件的代码位于与页面分开的页面中。（我打算在项目的其他地方重用它。）这意味着控件不知道页面上有哪些处理程序可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:43:25.467

最终，提供的链接中的示例与您的方案之间的唯一区别是控件变量实例范围的上下文。也就是说，在他们的情况下，控件是使用`ID`其声明中指定的（例如，在标记中）访问的，只有一个始终存在的单一控件。

但是，在您的情况下，您将变出控件的实例，并可以直接、立即访问该实例；这意味着，就像按照示例一样，您可以执行以下操作：

```
// alread doing this to dynamically generate, no doubt
var control = new MyControl(); 
// then subscribe to the event of this instance...
control.MyEvent += MyEventHandler; 
```

# c++ - 从基类继承私有成员

> ID：15100515
> 
> 赞同：2
> 
> 时间：2013-02-26T22:20:43.897
> 
> 标签：c++, class, templates, inheritance, private

这个问题已经在[这里](https://stackoverflow.com/questions/424104/can-i-access-private-members-from-outside-the-class-without-using-friends)被问过——实际上不止两次——但我自己无法从帖子中找到解决我的问题的方法。

我所拥有的是一个库，其中包含一个名为的类`A`。从课堂`A`上我需要访问一个`std::map<>`，但它是私有的。此外，根据我在我提到的帖子中发现的可能性，类**没有**`A`模板化功能。

 **我实际上能够重新编译库，这样我就可以简单地改变可见性。**但是**，这将是**很多**工作——而且我不确定改变可见性是否不会让其他任何东西崩溃。

我想做的是，在课堂上`B`：

```
// NOT MY CODE -- library <a.h>
class A {
private:
    std::map<int, int> A_map;
};

// MY CODE -- module "b.h"
# include <a.h>
class B : private A {
public:
    B() {
        for (auto it(A_map.begin()); it != A_map.end(); ++it) {
            ...;
        }
    }
}; 
```

我如何在不更改原始类的情况下做到这一点——并且在基类中没有任何可用的模板化方法可以重载/专门化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:42:51.180

您首先应该非常确信您尝试做的事情实际上是有效的……变量是私有的可能有充分的理由。修改它可能会破坏 A 实例的状态，并且不能保证私有变量在您破坏封装以读取它时将处于逻辑或一致状态。

有了这个警告，如果你可以修改/重新编译库，声明你的类是 A 的朋友可能是要走的路。让 B 通过组合持有 A 的实例，并且由于它是朋友，它可以访问 A 实例的私有成员。

* * *

而且，因为我感觉特别邪恶，这里有一个演示如何在不修改 A 的情况下打破封装。虽然它不是可移植的（我在 64 位 linux 上使用 g++ 工作）并且涉及弄清楚内存中的对象布局。为简单起见，我将地图更改为矢量。

```
#include<vector>
#include<iostream>

class A {
private:
    int blah; //Just to make it a bit more realistic.
    std::vector<int> A_vec;
public:
    void outputVec() {
       std::vector<int>::iterator it = A_vec.begin();
       while(it != A_vec.end()) {
         std::cout << *it << std::endl;
         ++it;
        }
    }
};

int main() {
  A* a = new A();
  std::vector<int>* v = (std::vector<int>*)(((char*)a)+sizeof(long));
  v->push_back(27);
  v->push_back(12);
  a->outputVec();
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:38:48.027

特意保护私有变量免受任何外部访问。如果拥有类允许通过较少限制的访问或结交朋友，您只能访问成员。

> 而且我不确定改变可见性是否不会让其他任何东西崩溃。

C++ 中的访问限制是有意设计的，因此可访问性是在进行名称查找时检查的最后一件事。这意味着如果您有一个工作程序并且您使某些东西更易于访问，那么该程序的行为根本不应该改变，因为在检查可访问性之前已经检查了所有其他潜在问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T22:35:55.400

首先，将所有数据成员保密是一个非常好的主意。如果您的派生类确实需要访问`A_map`，那么最好的办法是给基类一个 getter，它返回一个对它的 const 引用（假设您只需要读取访问权限）。如果您需要对 的写入权限`A_map`，那么这很好地表明您需要重新考虑您的设计。

除此之外，如果不严重违反 C++ 的规则和约定，就无法授予类`B`访问权限。`A_map`

顺便说一句，私有继承意味着别的东西。这意味着 class 的所有公共方法都`A`将成为 class 的私有方法`B`。换句话说，私有继承意味着你继承了 的实现`A`，而不是它的接口。所以在这里它不会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T05:25:06.480

私有继承真的是变相的组合！它实际上的意思是“实施”。

撇开这一点不谈，无论私有/公有/受保护的继承模式如何，私有成员都将保持私有（在该类之外无法访问，即使是派生类也是如此）。

有两种合法的方式可以访问任何类的私有成员。

1) 使用 Get/Set 方法访问私有成员（假设类公开它）。

2) 与班级交朋友。

在您的情况下，A 类属于一个库，库供应商有责任为外部世界与 A 类交互提供适当的接口。也许，最好与库供应商交谈。对我来说，它看起来更像是一个设计问题而不是实现问题。

只是为了测试，作为一种快速破解，我建议使用好友机制。

```
 class A {
      friend class B;
      private:
      std::map<int, int> A_map;
    };

    // MY CODE -- module "b.h"
    class B {
     public:
     B() {
      for (std::map<int, int>::iterator  it(a.A_map.begin()); 
          it != a.A_map.end(); ++it) {  }
     }
     A a;
    }; 
```**

# toggle - 无法在 Arduino Due 上获取当前输出引脚状态

> ID：15100517
> 
> 赞同：0
> 
> 时间：2013-02-26T22:21:01.093
> 
> 标签：toggle, arduino

我有一个简单的任务是使用 Arduino IDE 1.5.2 在 Arduino Due 上切换输出引脚状态。我试过这样的代码：

```
int pinnum = 13;
void setup() {
  pinMode(pinnum, OUTPUT);  // use on-board LED
} 

void loop() {
  digitalWrite(pinnum, !digitalRead(pinnum));
  delay(1000);  // wait around for 1 sec (1000 ms)
} 
```

这无济于事。引脚 13 一直保持高电平。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-12T18:56:16.420

读取设置为 OUTPUT 的引脚状态时存在错误。作为一种临时解决方法，如果您的电路允许，请先将引脚设置为输入，然后再将其设置为输出，如下所示：

```
int pinnum = 13;
void setup() {
  pinMode(pinnum, INPUT);   // Work around bug
  pinMode(pinnum, OUTPUT);  // use on-board LED
} 

void loop() {
  digitalWrite(pinnum, !digitalRead(pinnum));
  delay(1000);  // wait around for 1 sec (1000 ms)
} 
```

有关更多详细信息，请参阅我在[http://forum.arduino.cc/index.php?topic=185291.0](http://forum.arduino.cc/index.php?topic=185291.0)上的帖子。

编辑：对不起我之前糟糕的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T19:28:24.983

我认为您的问题是您无法读取先前发送到引脚 13 的数字值。由于 LED 接地，您总是读取低电平。

**解决方案**：将发送到引脚 13 的逻辑电平的副本存储在变量中。`mem`我在下面的代码中命名了这个变量。你不需要阅读 pin 13，因为现在你有一个副本`mem`。正如您在代码示例中所做的那样，您在将其发送到引脚 13 之前反转此副本。

在端口引脚上执行读-修改-写操作时，您的问题通常被描述为警告——请参阅从微控制器制造商处获取的数据表。

```
int pinnum = 13;
int mem = 0;
void setup() {
  pinMode(pinnum, OUTPUT);  // use on-board LED
} 

void loop() {
  digitalWrite(pinnum, mem);
  mem=!mem;
  delay(1000);  // wait around for 1 sec (1000 ms)
} 
```

# c# - 不理解 RunInstaller 属性

> ID：15100519
> 
> 赞同：2
> 
> 时间：2013-02-26T22:21:01.043
> 
> 标签：c#, .net, installation, vsto

我需要创建一个新的事件源，以便我的 office 插件可以将事件记录到事件日志中。这需要管理员权限，所以我需要在安装时执行此操作。msdn 文档说：

> 如果从 Installer 继承的类标记为 RunInstallerAttribute 设置为 >true，则在安装程序集时将调用 Visual Studio 的自定义操作安装程序或 InstallUtil.exe。

现在我正在使用标准的 Visual Studio Outlook 2007 项目，我相信它会创建一个 ClickOnce setup.exe 文件，可用于安装我的加载项。所以我需要做的就是在我的加载项项目中包含 MyEventLogInstaller 类（如下所示），setup.exe 会检测到它并安装日志源？我的 setup.exe 是否检测到 RunInstaller 属性并使用“自定义操作安装程序”？我理解代码（下面），但我不明白的是安装程序如何知道在派生的 MyEventLogInstaller 上实际调用 Install 方法？

```
[RunInstaller(true)]
public class MyEventLogInstaller: Installer
{
    private EventLogInstaller myEventLogInstaller;

    public MyEventLogInstaller() 
    {
    myEventLogInstaller = new EventLogInstaller();
    myEventLogInstaller.Source = "Source1";
    myEventLogInstaller.Log = "Log1";

    Installers.Add(myEventLogInstaller);   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:38:30.887

明白了（我认为）！

我所做的是在 Visual Studio 2010 中创建一个新的安装项目。然后，我将一个新的控制台应用程序项目添加到总体解决方案中，并将我的 MyEventLogInstaller 类添加到控制台应用程序项目中。在控制台应用程序的主要方法中，我实例化了 MyEventLogInstaller 并添加了一些额外的代码来写入新的事件源。然后我右键单击 Setup Project->Add->Assembly... 并选择 Console Application 可执行文件以将其添加到 setup 项目中（我是 setup 项目的新手，我期待更直观的东西，但我离题了）。

现在，最后一步（感谢[Why won't my Setup Project Perform my Custom Registration Process](https://stackoverflow.com/questions/2151003/why-wont-my-setup-project-perform-my-custom-registration-process) for the bit on Custom actions）是右键单击设置项目，选择查看->自定义操作，右键单击顶层自定义Actions->Add Custom Action...，然后选择带有安装程序的程序集（在我的情况下是控制台应用程序 .exe）

在完成所有这些之后，我可以构建 .msi 并使用我的管理员帐户安装它，然后当我切换回我的非管理员帐户并运行控制台应用程序时，它现在可以登录到新创建的源！！唷。

# javascript - 如何在 Backbone 中制作 JQuery 进度条以显示多个 Ajax 调用的进度？

> ID：15100520
> 
> 赞同：1
> 
> 时间：2013-02-26T22:21:03.267
> 
> 标签：javascript, jquery, ajax, backbone.js, progress-bar

编辑：

我什至无法在控制器中使用主干 js 进行简单设置

```
initialize: function() {

    // alert("1"); 
    $( "#progressbar" ).html("0%");
    // alert("2");

    $.ajax({
      dataType:"json", 
      async:true,
      url:"http://localhost:8888/chathau5/rest/tasks/list",
      success: function(data, response) {

      }
    });

    // alert("3");
    $( "#progressbar" ).html("25%");
            // it works when i put the alerts in...

}, 
```

有任何想法吗？

* * *

我试图在加载时放置一个 jquery 进度条。我目前的结构是java和backbone。

当我进入主干控制器时，我想初始化进度条，并在每次 ajax 调用后更新值，如下所示

```
 initialize: function() {

    $("#progressbar").progressbar({ 
        value: 0
    });

    var tasks = $.ajax({
      dataType: "json",
      async:false,
      url: "http://localhost:8888/chathau5/rest/tasks/list",
      success:function(data,response) {
        tsks = data;
      }
    });

    $("#progressbar").progressbar({ 
        value: 50
    });

    var tasks2 = $.ajax({
      dataType: "json",
      async:false,
      url: "http://localhost:8888/chathau5/rest/tasks/list2",
      success:function(data,response) {
        tsks = data;
      }
    });

    $("#progressbar").progressbar({ 
        value: 100
    }); 
```

在我的 index.html 中，我有但是进度条根本不显示.....除非我在每个 $progress bar 更新周围都包含警报....

在我的后端java中，我正在运行线程睡眠以进行测试......

如果我在上面的每个进度条更新周围发出警报，它会起作用...我不确定这是怎么发生的...任何想法如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:33:52.450

您的进度条代码需要进入`success`函数内部

```
var tasks = $.ajax({
      dataType: "json",
      async:false,
      url: "http://localhost:8888/chathau5/rest/tasks/list",
      success:function(data,response) {
        tsks = data;
        $("#progressbar").progressbar({ 
          value: 50
        });
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:35:45.060

首先，当警报之类的东西有帮助时，通常是因为你有一个并发错误，这意味着某事正在完成或没有在其他事之前完成。他们真的很难被发现。我猜想在调用初始化时#progressbar 实际上并没有出现在屏幕上。我可以做一个快速的 console.log($("#progressbar")); 在初始化的第一行，只是为了确保它确实存在。

其次，这是一个旁白，但它可能会帮助您了解并发错误是如何发生的。我们不能保证第一个 ajax 调用将首先完成。这就是 ajax 的异步特性，我们在这一点上放弃对回调的控制，然后我们继续使用该方法的其余部分。因此，在达到这两种成功方法中的任何一种之前，您的初始化方法可能已经完成。出于这个原因，最好嵌套这两个调用。

```
// I like keeping my display code separated out like this.
this.updateProgress = function( newValue )
{
  $("#progressbar").progressBar({value:newValue}); 
}

$.ajax({ // first call
  success: function() // done loading when this gets called
  {
    this.updateProgress(50);
    $.ajax({ // second call
      success: function() // all done loading at this point
      {
        this.updateProgress(100);
      }  
    });
  }
}); 
```

这样，您可以确保一个接一个地加载。没有理由不像您的示例那样同时执行此操作，但是这样我们就有了保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:38:40.180

该问题很可能是由于当您`jQuery.ajax`使用该`async:false`选项调用时，AJAX 调用在执行期间阻塞了 GUI 线程，因此浏览器无法更新进度条。您应该使您的 AJAX 调用异步，并在每个步骤成功后更新进度条：

简单的方法：

```
$("#progressbar").progressbar({ 
    value: 0
});

//make first call
var tasks = $.ajax({
  dataType: "json",
  url: "http://localhost:8888/chathau5/rest/tasks/list",
  success:function(data,response) {

    //first call succeeded
    tsks = data;
    $("#progressbar").progressbar({ 
        value: 50
    });

    //make second call
    var tasks2 = $.ajax({
      dataType: "json",
      url: "http://localhost:8888/chathau5/rest/tasks/list2",
      success:function(data,response) {

        //second call succeeded
        tsks = data;
        $("#progressbar").progressbar({ 
            value: 100
        });
      }
    });
  }
}); 
```

这个解决方案远非完美。它仍然按顺序发出两个 AJAX 请求，与同时发出请求相比，这是次优的。也许是这样的：

```
var $progressbar = $("#progressbar");
var progress = 0;
var updateProgress = function(amount) {
  $progressbar.progressbar({value:progress+=amount});
};

updateProgress(0);

$.ajax({
  dataType:"json", 
  url:"http://localhost:8888/chathau5/rest/tasks/list",
  success: function(data, response) {
    updateProgress(50);
  }
});

$.ajax({
  dataType:"json", 
  url:"http://localhost:8888/chathau5/rest/tasks/list2",
  success: function(data, response) {
    updateProgress(50);
  }
}); 
```

# android - 为什么我的数据库在 android sqlite 中找到不存在的东西

> ID：15100522
> 
> 赞同：0
> 
> 时间：2013-02-26T22:21:11.427
> 
> 标签：android, sqlite

```
 public boolean find_uid(String uid){
          String [] columns = new String [] {DB_Helper.KEY_NAME};
          Cursor c = database.query(DB_Helper.DATABASE_TABLE_USERS, columns,null,null,
             null,
             null,
             null);
           boolean value=   c.moveToFirst();
           c.close();
           //didn't find it

            if(!value)  {
        Log.d("value", "false");
        return false;   
             }
           //did find it
           else return true;

        } 
```

数据库中不存在 sting uid。我知道这是事实。但是查询总是返回一个游标，这样 c.moveToFirst() 总是返回 true。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:24:25.567

您没有对传递给方法的 uid 做任何事情。所以您所做的只是查询该表中的所有记录。

尝试在查询中添加 where 子句。确保将 DB_Helper.UID_COLUMN 更改为您实际拥有的 UID 列名。

```
String where = DB_Helper.UID_COLUMN + " = ?";
String[] whereArgs = new String[] { uid };
Cursor c = database.query(DB_Helper.DATABASE_TABLE_USERS, columns,where,whereArgs,
             null,
             null,
             null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:24:32.223

因为您不是在搜索 uid - 您没有 where 子句，所以您选择了表中的每一行。

# c# - 如何查询linq检查日期是月、季还是年

> ID：15100523
> 
> 赞同：0
> 
> 时间：2013-02-26T22:21:12.890
> 
> 标签：c#, linq, entity-framework

我有一个带有`userdateregistered`字段的用户表，并希望显示在当前月份、上个月、当前季度、上个季度、当年和去年注册的用户（日期参考是 datetime.now）。我需要构建一个 linq 查询

例如：

2013/12/31 如果在 12 月(12)

2012/01/15 如果是第一季度(1)

2013/05/12 如果是 2012 年。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:12:00.390

这是从当月选择所有用户的查询

```
DateTime startOfMonth = DateTime.Today.AddDays(1 - DateTime.Today.Day);
DateTime today = DateTime.Today;

var users =
   from u in context.Users
   where EntityFunctions.TruncateTime(u.UserDateRegistered) >= startOfMonth &&
         EntityFunctions.TruncateTime(u.UserDateRegistered) <= today
   select u; 
```

它向您展示了按日期过滤的想法。只需计算适当的开始和结束日期。并使用[EntityFunctions.TruncateTime](http://msdn.microsoft.com/en-us/library/dd395596.aspx)方法仅比较日期。

* * *

实际上我已经创建了类`DateRange`来保存开始和结束日期，并创建一些范围：

```
public class DateRange
{
    public DateTime BeginDate { get; set; }
    public DateTime EndDate { get; set; }

    public static DateRange OfYear(int year)
    {
        return new DateRange
        {
            BeginDate = new DateTime(year, 1, 1),
            EndDate = new DateTime(year, 12, 31)
        };
    }

    public static DateRange OfMonth(int month)
    {
        var year = DateTime.Today.Year;

        return new DateRange
        {
            BeginDate = new DateTime(year, month, 1),
            EndDate = new DateTime(year, month, 1).AddMonths(1).AddDays(-1)
        };
    }
} 
```

它将允许您轻松创建过滤器范围：

```
var range = DateRange.OfMonth(10);
var users =
   from u in context.Users
   where EntityFunctions.TruncateTime(u.UserDateRegistered) >= range.BeginDate &&
         EntityFunctions.TruncateTime(u.UserDateRegistered) <= range.EndDate
   select u; 
```

# magento - magento 模块（谷歌信任的商店）的 Cron 不工作

> ID：15100525
> 
> 赞同：0
> 
> 时间：2013-02-26T22:21:17.900
> 
> 标签：magento, module, cron

Magento cron 在除一个模块之外的所有模块中为我们的站点运行良好。这个模块是谷歌信任的商店。其他 magento 用户也报告了此问题。

我查看了 cron_schedule 表，并且该模块没有待处理的任务。当我手动将这个模块的 cron 任务插入到 cron_schedule 表中时，这个模块完全做了它应该做的事情。那么，这个 cron 任务的模块可能有什么问题呢？这是config.xml。我想一旦我们解决了这个问题，这个模块就很好了。

```
<?xml version="1.0"?>
<!--
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    Mage
 * @package     Mage_GoogleTrustedStore
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://www.magentocommerce.com/license/enterprise-edition
 */
-->
<config>
    <modules>
        <Mage_GoogleTrustedStore>
            <version>1.6.0.0</version>
        </Mage_GoogleTrustedStore>
    </modules>
    <global>
        <helpers>
            <googletrustedstore>
                <class>Mage_GoogleTrustedStore_Helper</class>
            </googletrustedstore>
        </helpers>
        <models>
            <googletrustedstore>
                <class>Mage_GoogleTrustedStore_Model</class>
            </googletrustedstore>
        </models>
        <resources>
            <googletrustedstore_setup>
                <setup>
                    <module>Mage_GoogleTrustedStore</module>
                </setup>
            </googletrustedstore_setup>
        </resources>
        <blocks>
            <googletrustedstore>
                <class>Mage_GoogleTrustedStore_Block</class>
            </googletrustedstore>
        </blocks>
        <googletrustedstore>
            <google_group_email>mage-google-trusted-store-news@googlegroups.com</google_group_email>
            <order_cancellation_reasons>
                <BuyerCanceled>Buyer Canceled</BuyerCanceled>
                <MerchantCanceled>Merchant Canceled</MerchantCanceled>
                <DuplicateInvalid>Duplicate Invalid</DuplicateInvalid>
                <FraudFake>Fraud Fake</FraudFake>
            </order_cancellation_reasons>
            <ftp_host>uploads.google.com</ftp_host>
            <carriers>
                <main>
                    <ups>UPS</ups>
                    <fedex>FedEx</fedex>
                    <usps>USPS</usps>
                </main>
                <other>
                    <dhl>DHL</dhl>
                    <dhlint>DHL</dhlint>
                </other>
            </carriers>
        </googletrustedstore>
    </global>
    <default>
        <google>
            <trustedstore>
                <enabled>1</enabled>
                <default_order_cancellation_reason>BuyerCanceled</default_order_cancellation_reason>
                <estimated_ship_date>3</estimated_ship_date>
            </trustedstore>
        </google>
    </default>
    <frontend>
        <layout>
            <updates>
                <googletrustedstore>
                    <file>googletrustedstore.xml</file>
                </googletrustedstore>
            </updates>
        </layout>
        <events>
            <checkout_multishipping_controller_success_action>
                <observers>
                    <googletrustedstore>
                        <type>model</type>
                        <class>googletrustedstore/observer</class>
                        <method>collectMultishippingOrderIds</method>
                    </googletrustedstore>
                </observers>
            </checkout_multishipping_controller_success_action>
        </events>
    </frontend>
    <adminhtml>
        <translate>
            <modules>
                <Mage_GoogleShopping>
                    <files>
                        <default>Mage_GoogleTrustedStore.csv</default>
                    </files>
                </Mage_GoogleShopping>
            </modules>
        </translate>
        <layout>
            <updates>
                <googletrustedstore>
                    <file>googletrustedstore.xml</file>
                </googletrustedstore>
            </updates>
        </layout>
        <events>
            <sales_order_save_before>
                <observers>
                    <googletrustedstore>
                        <type>model</type>
                        <class>googletrustedstore/observer</class>
                        <method>addCancellationReasonToOrder</method>
                    </googletrustedstore>
                </observers>
            </sales_order_save_before>
            <sales_convert_order_to_quote>
                <observers>
                    <googletrustedstore>
                        <type>model</type>
                        <class>googletrustedstore/observer</class>
                        <method>addCancellationReasonToSession</method>
                    </googletrustedstore>
                </observers>
            </sales_convert_order_to_quote>
            <checkout_submit_all_after>
                <observers>
                    <googletrustedstore>
                        <type>model</type>
                        <class>googletrustedstore/observer</class>
                        <method>collectAdminOrderId</method>
                    </googletrustedstore>
                </observers>
            </checkout_submit_all_after>
            <controller_action_predispatch_adminhtml_sales_order_index>
                <observers>
                    <googletrustedstore>
                        <type>model</type>
                        <class>googletrustedstore/observer</class>
                        <method>addOrderGridBlocksRenderingObserver</method>
                    </googletrustedstore>
                </observers>
            </controller_action_predispatch_adminhtml_sales_order_index>
        </events>
    </adminhtml>
    <crontab>
        <jobs>
            <googletrustedstore_generate_feeds>
                <schedule>
                    <cron_expr>0/20 * * * *</cron_expr>
                </schedule>
                <run>
                    <model>googletrustedstore/feeder::generateFeeds</model>
                </run>
            </googletrustedstore_generate_feeds>
            <googletrustedstore_upload_feeds>
                <schedule>
                    <cron_expr>0 2 * * *</cron_expr>
                </schedule>
                <run>
                    <model>googletrustedstore/feeder::uploadFeeds</model>
                </run>
            </googletrustedstore_upload_feeds>
        </jobs>
    </crontab>
</config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T03:57:04.037

我们修补了 Google Trusted Stores 的社区版版本，并在[http://www.dcjcooltools.com/blog/magento-extensions/the-nightmare-that-is-google-trusted-stores-for记录了所需的确切修改-magento/](http://www.dcjcooltools.com/blog/magento-extensions/the-nightmare-that-is-google-trusted-stores-for-magento/)。

我们解决的特定问题包括 Cron Job 处理不正确（如果我自己这么说的话，这是一个有趣的小错误），即使上传过程不起作用，Feed 文件也会被删除，最后，托运人名称被设置为 Other 而不是 USPS , 联邦快递等等等。

让我知道我们的解决方案是否适合您！

问候， 埃文

# android - 监控安卓电池

> ID：15100528
> 
> 赞同：0
> 
> 时间：2013-02-26T22:21:34.233
> 
> 标签：android

类似于此[链接](https://stackoverflow.com/questions/13512698/remaining-time-to-battery-discharge-on-android)

我想知道是否可以在我的应用程序未打开的情况下以某种方式跟踪电池？我的主要方面是：1）获取上次电池充电的时间以及当时有多少％（级别）。2) 多少%(level) 电池从上次充电开始放电。

我的目标是：大概计算一下，每次电池电量下降 1%。计算下降 1% 需要多长时间，然后看看他们还剩下多少 %。每 1% 做一次检查？然后我将能够计算出该电池的剩余时间:) 任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:26:08.320

您可以通过 SDK 获取所有这些数据：

[http://developer.android.com/training/monitoring-device-state/battery-monitoring.html](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)

具体来说，计算归结为您存储的内容和使用方式。此外，对于您上次收费的时间/日期，归结为将该值永久存储在应用程序的共享首选项或数据库中（取决于上下文使用情况）。

# java - 对正在运行的 Java 应用程序进行 Java 调用的 Python egg

> ID：15100529
> 
> 赞同：3
> 
> 时间：2013-02-26T22:21:40.227
> 
> 标签：java, python, jpype

我正在为 Oracle NoSQL 数据库的 Python 适配器提出建议。Oracle NoSQL 数据库作为独立的 Java 应用程序运行，至少在 Java 程序中，您可以通过告诉程序要连接的主机名和端口以及一些配置设置来与它交互。然后，您对包含该配置的“kvstore”对象进行 java 调用。

我想制作一个 Python 库，它基本上公开了 Oracle NoSQL 拥有的 Java 方法的 Python 版本，并将它们转换为 Java 以与正在运行的 Oracle NoSQL 应用程序对话，但我不确定哪种技术最适合要做到这一点。

有谁知道我想使用什么技术？我宁愿不使用 Jython（这样应用程序可以在标准 Python 环境中运行）或 JNI（因为它似乎有一些讨厌的警告。）

编辑：到目前为止，我发现的唯一潜在技术是：[Jpype](http://jpype.sourceforge.net/) 它对我有用吗？

此外，这里是图书馆的理想要求。如果其中之一确实最符合这些要求，我会考虑使用 Jython 或 JNI。

1.  表现。Oracle NoSQL 的主要优点是性能和可扩展性，因此这将是适配器最重要的组件。

2.  易于为 Python 用户实现。为了让 Python 程序员真正使用该库，他们必须相对容易以一种自然的方式使用。

3.  可靠性。它需要有可能让它值得信赖且没有错误，同时在你自然期望 Python 可以工作的平台上工作。（这就是让我担心 JNI 的原因。听起来它的实现依赖于平台，并且容易出错。）

4.  发展速度。最后一点很重要，它的开发速度相对较快。开发人员团队会喜欢学习 Python 或 C，但我们现在比任何其他编程语言都更了解 Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:47:24.797

我试图用自己的相关注释按顺序回答每一点。

1.  性能：我的观点是 JNI 会是这里的赢家，但我可能是错的，因为 Jython 也可以是 JITed。

2.  易于实施：我认为这是因为您的意思是易于使用该库？这完全取决于您如何构建 API、1 对 1 方法调用、对象句柄等。

3.  可靠性：Jython 显然是这里的赢家，因为当您仅实例化 POJO/直接在客户端代码中直接访问 API 时，没有出错的余地。

4.  开发速度：JNI 可能非常乏味。您实际上是在学习 CPython 模块、C、Python 扩展、JNI，然后引用现有的用 Java 构建的 API。

总而言之，如果您能实现跳跃，我认为您在短期内嵌入 Jython 会获得更多好处，主要是因为您可以直接操作 API。我亲自将 IronPython 嵌入到 .NET 代码库中并取得了很好的成功。是的，您会失去本机速度，但是很难用工作 JNI 桥所需的 C 编码量来证明这种折衷是合理的。也就是说，您很可能会找到像您列出的项目（Jpype）这样可以为您完成大部分工作的项目。

我会问在使用 Jython 时我需要哪些本机 CPython 运行时的特性而你失去了这些特性。您现有的 CPython 代码库是否严重依赖 CPython 原生功能？

无论如何，我正在尝试回答。

# android - DecorView 没有在 SurfaceView 上绘制

> ID：15100535
> 
> 赞同：2
> 
> 时间：2013-02-26T22:21:52.523
> 
> 标签：android, android-view

我有一个使用`SurfaceView`绘制内容的应用程序。我想将漂亮的[ShowcaseView](https://github.com/Espiandev/ShowcaseView)库添加到我的应用程序中，该库用于`getWindow().getDecorView()).addView(...)`将自身绘制在其他视图和装饰之上。但就我而言，它不会覆盖我的`SurfaceView`（如果我从布局中删除它，一切都会完美）。

这是 Android 架构的限制，还是我可以`SurfaceView`在 ShowcaseView 库中调整或修复某些内容？

**更新**

如果我`mySurfaceView.setVisibility(View.INVISIBLE)`在创建所有内容之前调用也很`ShowcaseView`完美（除了我的主视图区域是黑色的）。

**更新 2**

我已经阅读了`SurfaceView`文档中的 Z-indexes 。我不会在我的代码中触及它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T17:14:58.020

***解决方案***

`setWillNotDraw(false)`在调用 SurfaceView 的超级构造函数后添加。

* * *

***关于surfaceview的**其他提示*

 ***这可能会有所帮助*

1.  *将 SurfaceView 添加到容器 - 例如 RelativeLayout*
2.  *`getWindow().getDecorView()).requestTransparentRegion(mySurfaceView);`使您的视图可见后调用***

# objective-c - 我可以在运行方法之前创建一个数组吗？

> ID：15100538
> 
> 赞同：0
> 
> 时间：2013-02-26T22:21:58.823
> 
> 标签：objective-c

```
int indexOfArray = 0;

-(void)pushNumber:(double)number{
    if(self.numArray == NULL)
        self.numArray = [NSMutableArray array];
    indexOfArray = self.numArray.count;
    [self.numArray insertObject:[NSNumber numberWithDouble:number] atIndex:(indexOfArray)];
    indexOfArray--;
} 
```

这就是我正在执行的推送方法中我的代码的一部分。我想要设置它的方式是将数字推到数组的末尾，因为这将允许我弹出我推入的第一个数字`lastObject`。我有 Java 方面的经验，但我一直在自己使用 Objective-C，因此我不确定我所做的是否正确。我现在所知道的是，每次运行此方法`indexOfArray`都会重置其计数，我不希望这样。我希望能够在方法之前初始化数组，这样我就可以有一个恒定的大小开始，然后每次调用这个方法时我可以递减。

需要明确的是，这是我在空闲时间制作的计算器应用程序。我希望能够`indexOfArray`在操作员之后、用户按下清除键或用户按下按钮时重置用户按下的每个数字`=`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:46:59.637

如果您正在寻找与 Java 中的构造函数等效的东西，请覆盖`-init`. 例子：

```
- (id)init
{
    self = [super init]
    if (!self) {
        return nil;
    }

    self.numArray = [NSMutableArray array];

    return self;
} 
```

但是，正如其他人所说，如果您的类只是一个堆栈，则使用 NSMutableArray 可能更容易，因为它具有类似堆栈的访问方法。

此外，如果`int indexOfArray = 0;`真的像看起来那样在方法旁边定义，那么您有一个全局变量而不是实例（/成员）变量，您可能认为您正在声明它。

（如果这些东西对你来说是新的，我推荐阅读 Apple 的[Cocoa Core Competencies](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011210) and [Programming With Objective-C](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011210)文章）

# mips - 将十进制转换为八进制的 Mips 帮助

> ID：15100542
> 
> 赞同：0
> 
> 时间：2013-02-26T22:22:12.183
> 
> 标签：mips

我在使用 MIPS 转换输入（十进制数）并转换为八进制并显示该数字时遇到问题。在项目中，我必须使用Masking，有没有好的示例代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:25:09.223

要屏蔽除正在`$t0`使用的数字的底部 3 位以外的所有位：

```
andi $t1,$t0, 0x7    # 0x7 is binary 0111 
```

# javascript - new:true 选项返回 MongoDB 中的旧值

> ID：15100544
> 
> 赞同：0
> 
> 时间：2013-02-26T22:22:21.223
> 
> 标签：javascript, mongodb, mongoskin

我在 MongoDB v2.2 NodeJS 0.8 MongoSkin 0.5 框架中使用以下代码：

```
var db = mongo.db(admin+"@127.0.0.1:27017/database",{safe:true});
db.collection('collection').findAndModify({'code':code,'email':email},[],
    {
        $push:
        {
            'code.pub':newPub,
        }
    },{new:true},
    function(err, result) 
```

新的 true 选项返回我在 MongoDB 中的旧值。为什么会这样？怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:43:36.047

设置`{w: 1}`或，`{safe: true}`已弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:16:42.890

在您搜索的查询中：`"{'code':code,..."`并且在您说的更新中`"$push: {code.pub...`

如果您的“代码”字段包含一个对象（子文档） - 您的查询将找不到任何内容并且更新将失败

您能否发布完整的声明（包含变量的内容）和正在更新的文档示例？

干杯

罗纳德

# mysql - （错误？）InnoDB MySQL 错误 1025，errno 150 外键

> ID：15100545
> 
> 赞同：3
> 
> 时间：2013-02-26T22:22:21.863
> 
> 标签：mysql, innodb

我有一张表，我正在尝试更改其主键。这是表定义。

```
CREATE TABLE `tbl_customer` (
  `PersonId` int(11) NOT NULL,
  `Id` int(10) unsigned NOT NULL,
  `Name` varchar(100) collate utf8_spanish_ci NOT NULL,
  `Alias` varchar(50) collate utf8_spanish_ci NOT NULL,
  `Phone` varchar(30) collate utf8_spanish_ci default NULL,
  `Phone2` varchar(30) collate utf8_spanish_ci default NULL,
  `Email` varchar(50) collate utf8_spanish_ci default NULL,
  `Email2` varchar(50) collate utf8_spanish_ci default NULL,
  `RFC` varchar(13) collate utf8_spanish_ci default NULL,
  `AddressStreetName` varchar(45) collate utf8_spanish_ci default NULL,
  `AddressStreetNumber` varchar(45) collate utf8_spanish_ci default NULL,
  `AddressCityWard` varchar(45) collate utf8_spanish_ci default NULL,
  `AddressCityName` varchar(45) collate utf8_spanish_ci default NULL,
  `AddressStateName` varchar(45) collate utf8_spanish_ci default NULL,
  `AddressCountryName` varchar(45) collate utf8_spanish_ci default NULL,
  `AddressPostalCode` int(10) default NULL,
  `IsDistributor` tinyint(1) NOT NULL default '0' COMMENT '1 = Is Distributor, 0 = Is Not Distributor',
  `ParentCustomerId` int(10) NOT NULL default '11' COMMENT 'Our Id is 11, so by default, all customers right now are our children.',
  PRIMARY KEY  (`Id`),
  KEY `fk_tbl_cliente_tbl_cliente1_idx` (`ParentCustomerId`),
  KEY `fk_tbl_cliente_tbl_person1_idx` (`PersonId`),
  KEY `PersonId` (`PersonId`),
  KEY `PersonId_2` (`PersonId`),
  CONSTRAINT `fk_tbl_cliente_tbl_cliente1` FOREIGN KEY (`ParentCustomerId`) REFERENCES `tbl_customer` (`PersonId`),
  CONSTRAINT `fk_tbl_cliente_tbl_person1` FOREIGN KEY (`PersonId`) REFERENCES `zapata`.`tbl_person` (`Id`) ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci COMMENT='''Customer'' refers to a person or entity to which we provide '$$ 
```

现在，当我第一次尝试：

```
ALTER TABLE `tbl_customer` DROP PRIMARY KEY; 
```

我`PRIMARY KEY`的是`Id`。当我试图放下它时，我得到了..

```
Error Code: 1025\. Error on rename of './services/#sql-29a_218cc7f' to './services/tbl_customer' (errno: 150) 
```

因此，我删除了所有`FOREIGN KEY`引用此表和列的约束，但仍然出现相同的错误。我也去了`SHOW ENGINE INNODB STATUS`并发现了这一点：

```
------------------------
LATEST FOREIGN KEY ERROR
------------------------
130226 14:41:11 Error in foreign key constraint of table services/tbl_employee_shift:
there is no index in referenced table which would contain
the columns as the first columns, or the data types in the
referenced table do not match to the ones in table. Constraint:
,
  CONSTRAINT fk_tbl_employee_shift_tbl_customer1 FOREIGN KEY (CustomerId) REFERENCES services.tbl_customer (Id) ON UPDATE CASCADE 
```

但是，该表`services.tbl_employee_shift`不存在（它存在一次，但在我尝试此更改前几周被删除）。所以我继续...

```
CREATE TABLE services.tbl_employee_shift(
    CustomerId INT (11)
);
ALTER TABLE services.tbl_employee_shift ADD CONSTRAINT fk_tbl_employee_shift_tbl_customer1 FOREIGN KEY (CustomerId) REFERENCES avatar.tbl_cliente (Id);
ALTER TABLE services.tbl_employee_shift DROP FOREIGN KEY fk_tbl_employee_shift_tbl_customer1; 
```

它有效......但它没有更正必要的信息，似乎 InnoDB 仍然认为约束`fk_tbl_employee_shift_tbl_customer1`是有效的，因此，“防止主键丢失以保持一致性”......我使用的是 MySQL 5.0 .95。

编辑：这个问题没有解决，它已经解决了

只有当我们将数据库迁移到较新的服务器（相同的 mysql 版本）时，该问题才能得到纠正，似乎存在对幽灵外键（fk_tbl_employee_shift_tbl_customer1）的损坏/幽灵引用，这阻止了该列被删除。由于这个损坏的/ghostfk 不在新服务器中，因此我可以毫无问题地删除该列。我的猜测是这是一个错误，但不幸的是我无法重新创建它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:02:45.053

听起来好像您在设置为 0`tbl_employee_shift`时掉线了：[`foreign_key_checks`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_foreign_key_checks)

> 设置[`foreign_key_checks`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_foreign_key_checks)为 0 也会影响数据定义语句：[`DROP SCHEMA`](http://dev.mysql.com/doc/en/drop-database.html)删除一个模式，即使它包含具有由模式外的表引用的外键的表，并[`DROP TABLE`](http://dev.mysql.com/doc/en/drop-table.html)删除具有由其他表引用的外键的表。

由于记录了此行为，因此必须将其视为设计使然，因此不是错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:16:09.867

当外键公式错误时会发生错误。SQL 是正确的，我在本地主机中运行脚本，我得到同样的错误。解决方案是验证表 tbl_person 是使用引擎“InnoDB”创建的。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-23T23:08:06.960

今天刚刚处理了这个问题。在任何模式信息表中都没有两个受影响表的迹象。我搜索了各种系统数据库以寻找 FK，但无济于事。最后，**删除数据库立即生效。**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T08:05:32.070

我有一个类似的错误，mysql 要求你有键和外，类型和大小匹配，例如。person.id int (10) 必须映射到 (10) 中的 service_customer.person_id 如果类型和大小不同，mysql 会报错。

# c# - 将数据从一个表单传递到另一个表单

> ID：15100552
> 
> 赞同：-4
> 
> 时间：2013-02-26T22:22:47.823
> 
> 标签：c#, winforms

我的一个项目中有两种表格。在 form1 我有一个 dataGridView，在 form2 我有 4 个文本框。在 Form1 中，我想使用 CellMouseClick 事件从 datagridview 中获取变量中的值，然后将其传递给 Form2 中的 TextBox

我试过这个。

form1 # 它给了我一个错误

```
public form(int id)
{
    int x;
    x = dataGridView1.CurrentRow.Cells[0].Value.ToString();
} 
```

以及我想在 form2 中做什么

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T22:24:49.693

使用[构造函数](http://msdn.microsoft.com/en-us/library/vstudio/ms173115.aspx)，您可以[构造](http://msdn.microsoft.com/en-us/library/vstudio/ms173115.aspx)具有给定[构造](http://msdn.microsoft.com/en-us/library/vstudio/ms173115.aspx)先决条件的类型。

如果这意味着一个整数，那么就这样吧：

```
public MyForm(int id) {
  SomeIdProperty = id;
} 
```

而不是`var form = new MyForm();`，做：

```
var form = new MyForm(idOfTheRelevantThing); 
```

*然后*展示它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T22:46:51.647

表格1

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
    private void button1_Click(object sender, EventArgs e)
    {
        var frm2 = new Form2(dataGridView1.Rows[0].Cells[0].Value.ToString());
        frm2.Show();
    }
} 
```

表格2

```
public partial class Form2 : Form
{
    public Form2(string s)
    {
        InitializeComponent();
        textBox1.Text = s;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T22:26:55.687

如果要显示`Form2`from `Form1`，则可以使用构造函数传递值。像这样的东西：

```
class Form2 {
    public string Value { get; set; }
    public Form2(string value) {
        Value = value;
    }

    public void Form2_Load() {
        textBox1.Text = Value;
    }
} 
```

并执行此操作（内部`Form1.cs`）：

```
Form2 f = new Form2("the value here");
f.ShowDialog(); //or f.Show(); 
```

# jquery - 如何将多个 Pin 图添加到 Google Maps API v3，并单击更新它们？

> ID：15100553
> 
> 赞同：0
> 
> 时间：2013-02-26T22:22:49.930
> 
> 标签：jquery, google-maps, google-maps-api-3

我正在尝试从页面中提取纬度和经度坐标（从 php 动态生成）并将它们放在谷歌地图上。我不确定最好的方法，但似乎将它们放在一个数组中并单击重绘是最好的方法（是吗？）

在这里查看网站：http: [//yournextwebsite.se/riokultur/projekt](http://yournextwebsite.se/riokultur/projekt)

这是其工作原理的一般前提：用户选择复选框，然后项目（在地图下方列出）根据他们所在的类别进行过滤。地图还必须在页面加载时显示所有位置（基于 lat和长坐标）并在用户单击过滤器时显示/隐藏它们。一个“活动”类被添加到适合用户参数的每个项目中。我需要归还那些活跃的项目，并在地图上显示它们。

这是我到目前为止的代码（它绘制地图，但没有所有标记，或者单击重绘......大部分代码都是从谷歌地图网站本身​​提取的）

```
jQuery(document).ready(function($){
function initialize() {
    var myLatlng = new google.maps.LatLng(57.68066002977235, 11.9091796875);
    var mapOptions = {
      zoom: 8,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    var contentString = '<div id="content">Content</div>';

    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });

    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        title: 'Uluru (Ayers Rock)'
    });
    google.maps.event.addListener(marker, 'click', function() {
      infowindow.open(map,marker);
    });
  }

function redraw(lat, long) {
    //add a new location for each lat/long pair
    var newLatLong = new google.maps.LatLng(lat, long);

    var mapOptions = {
      zoom: 8,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    var contentString = '';

    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });

    var marker = new google.maps.Marker({
        position: newLatlng,
        map: map,
        title: ''
    });
    google.maps.event.addListener(marker, 'click', function() {
      infowindow.open(map,marker);
    });
  }

  initialize();

//start latitudes array
var latitudes = [];
//start longitudes array
var longitudes = [];

$('form div input').click(function(){
    //loop through active elements when a checkbox is selected/deselected
    $('p.active.filter-result').each(function(){

        //finds the active elements latitude
        var latitude = $(this).children('.latitude').text();

        //finds the active elements longitude
        var longitude = $(this).children('.longitude').text();

        //if the latitude is set, add it to the array
        if (latitude) latitudes.push(latitude);

        //if the longitude is set add it to the array
        if (longitude) longitudes.push(longitude);

    });

    //redraw the map...
    for(i=0; i<latitudes.length; i++) {
        redraw(latitude, longitude);
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:49:56.393

试试这个...

```
jQuery(document).ready(function($){

    var existingMarkers = []; // to save existing markers on screen
    var popupWindow = [];
    //start latitudes array
    var latitudes = [];
    //start longitudes array
    var longitudes = [];

    function initialize() {
        var lat = 57.68066002977235;
        var lon = 11.9091796875;
        var myLatlng = new google.maps.LatLng(lat, lon);
        var mapOptions = {
          zoom: 8,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

        var contentString = '<div id="content">Content</div>';
        var markerTitle = 'Uluru (Ayers Rock)';

        redraw(lat, lon, contentString, markerTitle);

      }

    function redraw(lat, long, popupContent, mTitle) {
        //add a new location for each lat/long pair
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat, long);,
            map: document.getElementById('map_canvas'),
            title: mTitle
        });
        AttachPopupToMarker(marker, popupContent);
        existingMarkers.push(marker);
    }

    function AttachPopupToMarker(marker, popupContent){
        google.maps.event.addListener(marker, 'click', function() {
            var infowindow = new google.maps.InfoWindow({
                content: popupContent
            });
            ClearMap(popupWindow);
            infowindow.open(map,marker);
            popupWindow.push(infowindow);
        });
    }

    function ClearMap(mapObjects){
        while(mapObjects[0]){
            mapObjects.pop().setMap(null);
        }
    }

    initialize();    

    $('form div input').click(function(){
        //loop through active elements when a checkbox is selected/deselected
        $('p.active.filter-result').each(function(){

            //clear latitudes array
            latitudes = [];
            //clear longitudes array
            longitudes = [];
            //finds the active elements latitude
            var latitude = $(this).children('.latitude').text();

            //finds the active elements longitude
            var longitude = $(this).children('.longitude').text();

            //if the latitude is set, add it to the array
            if (latitude) latitudes.push(latitude);

            //if the longitude is set add it to the array
            if (longitude) longitudes.push(longitude);

        });

        //clear previous marker
        ClearMap(existingMarkers);

        //redraw the map...
        for(i=0; i<latitudes.length; i++) {
            redraw(latitude, longitude, '', '');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:44:47.277

固定的：

```
jQuery(document).ready(function($){
var initialize = function() {

    //an array of arrays, with location info
var locations = [];

    //only do this for the active results
$('p.active.filter-result').each(function(n){
    var title = $(this).children('a').text();
    var link = $(this).children('a').attr('href');
    var latitude = $(this).children('.latitude').text();
    var longitude = $(this).children('.longitude').text();

        //must have a latitude and longitude to be added to the array
    if(latitude && longitude) {

            //build the title link for the tool tip
            var titleLink = '<h3><a href="' + link + '"/>' + title + '</a></h3>';

            //save the new location info
            var newLocation = [titleLink, latitude, longitude, n];

            //push it to the locations array
            locations.push(newLocation);
     }
});

var map = new google.maps.Map(document.getElementById('map_canvas'), {
  zoom: 10,
  center: new google.maps.LatLng(57.7068353, 11.9691625),
  mapTypeId: google.maps.MapTypeId.ROADMAP
});

var infowindow = new google.maps.InfoWindow();

var marker, i;

for (i = 0; i < locations.length; i++) {  
  marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    map: map
  });

  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][0]);
      infowindow.open(map, marker);
    }
  })(marker, i));
}
}

initialize();

    //recheck for active classes on each form click
$('form div input').click(function(){
    initialize();
});

 }); 
```

# ruby - 保存 url 时 Datamapper 会破坏应用程序

> ID：15100557
> 
> 赞同：0
> 
> 时间：2013-02-26T22:22:53.693
> 
> 标签：ruby, sinatra, datamapper

我正在 Sinatra 中制作 URL 缩短器应用程序。它的工作原理如下：

首页是一个有一个字段的表单，可以输入一个长网址：

```
<form action="" method="post">
    <input type='url' name='url' placeholder='Enter URL to be shortened'>
    <input type="submit">
</form> 
```

表单发布到同一首页，发布到“/”的代码是这样的：

```
post '/' do
    #Makes variable of POSTed url.
    @long = params[:url]
    loop do
            #makes random six letter hash
        @rand = (0...6).map{(65+rand(26)).chr}.join.downcase
            #don't generate another one if it isn't found in the database
        break if Short.first(id: "#{@rand}").nil?
    end
    #saves url and hash to database
    @input = Short.create(url: @long, id: @rand)
    #displays link with hash to be copied into browser address bar
    "http://192.168.1.3:999/"+@rand

end 
```

问题是当我提交表单时，它不会返回`http://192.168.1.3:999/...`我在该`@input=Short.create(...`行之后放置的任何内容。即使`raise_on_save_failure`为真，它也不会返回任何错误。如果我将该行注释掉，它可以正常工作（尝试使用缩短的 url 时除外）。

编辑：当我更改代码以允许非网址时，它可以正常运行。它只与确切的 url 格式中断。

# perl - Perl 重置变量

> ID：15100558
> 
> 赞同：2
> 
> 时间：2013-02-26T22:22:53.910
> 
> 标签：perl, shell, scripting

我正在学习 Perl，我制作了一个脚本，该脚本将在脚本开头使用定义的变量来建立连接、提取记录、修改它们，然后关闭连接。

我工作的第二部分涉及重复相同的步骤，但针对不同的服务器。

有没有办法取消设置之前设置的任何变量？然后使用新定义的设置并重复这些步骤？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T22:51:31.457

在自己的范围内定义变量。

```
{
    my $server = '123.123.123.123';
    my $username = 'user1';
    ping($server);
    login($username);
}
{
    my $server = '222.222.123.123';
    my $username = 'user2';
    ping($server);
    login($username);
} 
```

更好的是，使用函数定义：

```
sub doSomethingToServer
{
    my ($server, $username) = @_;
    ping($server);
    login($username);
}

doSomethingToServer('123.123.123.123', 'user1');
doSomethingToServer('222.222.123.123', 'user2'); 
```

# algorithm - 渲染算法建议

> ID：15100559
> 
> 赞同：2
> 
> 时间：2013-02-26T22:22:54.737
> 
> 标签：algorithm, raytracing

对于计算机科学项目，我将进一步改进我的光线追踪渲染器。

目前的特点：

*   射线三角形相交的 SIMD 实现
*   BVH 使用 AABB。（SIMD 射线盒相交）
*   光计算：漫反射、镜面反射（反射、折射）、光泽高光
*   基于 HDR 图像的照明
*   色调映射

我正在寻找关于我可能尝试实施什么算法来赢得渲染竞赛的建议；）。

要求：

*   艰难（具有挑战性）和有趣，但对于一个 3 年的本科生来说是可行的。
*   物理上正确的实施。
*   良好的描述性研究论文、实施教程或理论解释。（EG幻灯片）
*   应该可以在大约 2 周的时间内完成。
*   也许某些东西会让我能够对角色、头发、衣服等进行基于物理的渲染。

# r - 在R中执行for循环

> ID：15100560
> 
> 赞同：0
> 
> 时间：2013-02-26T22:22:55.297
> 
> 标签：r, for-loop, pattern-matching

我对 R 很陌生，并且有几个关于我正在尝试执行的循环的问题。我将尝试尽可能地解释自己，并注意我希望循环做什么。

```
for(i in (1988:1999,2000:2006)){
    yearerrors=NULL
    binding=do.call("rbind.fill",x[grep(names(x), pattern ="1988.* 4._ data=")])
    cmeans=lapply(binding[,2:ncol(binding)],mean)
    datcmeans=as.data.frame(cmeans)
    finvec=datcmeans[1,]
    kk=0
    result=RMSE2(yields[(kk+1):(kk+ncol(binding))],finvec)
    kk=kk+ncol(binding)
    yearerrors=c(result)
}

yearerrors 
```

1.  首先，我希望循环遍历数据的文件名。特别是在 1988-2006 年间，在约束性声明中现在放置 1988 的地方。x 是输入到 R 中的数据文件列表，1988 是文件名的一部分。所以，我的文件名以 1988,1989,...,2006 开头。

2.  yield 是一个数字向量，我想将向量的索引输入到函数 RMSE2 中，如循环中所示。例如，在第一次迭代中，我希望使用索引 1 到绑定中的列数。然后对于下一次迭代，我希望第一个索引比上一次迭代结束的多 1，并继续到等于下一个绑定语句中的列数的数字。我只是不知道我所写的是否能做到这一点。

3.  最后，我希望将这些结果中的每一个存储在向量 yearerrors 中，然后再访问该向量。

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:27:50.917

好的，这里有很多猜测，因为你的数据结构非常不清楚，我不知道 RMSE2 函数是什么（你也没有给出细节）。根据您前几天的问题，我将假设您的数据位于 .csv 文件中。我要对你的问题进行一番探讨。

我将首先在读取文件时构建组合数据框，而不是先做一个然后再做另一个。像这样：

```
#Set your working directory to the folder containing the .csv files
#I'm assuming they're all in the form "YEAR.something.csv" based on your pattern matching

filenames <- list.files(".", pattern="*.csv") #if you only want to match a specific year then add it to the pattern match
years <- gsub("([0-9]+).*", "\\1", filenames)

df <- mdply(filenames, read.csv)
df$year <- as.numeric(years[df$X1]) #Adds the year
#Your column mean dataframe didn't work for me
cmeans <- as.data.frame(t(colMeans(df[,2:ncol(df)]))) 
```

然后就很难知道你想要实现什么。由于您`datcmeans`是单行 data.frame，`datcmeans[1,]`因此不会改变任何内容。因此，如果数据框（或数字向量）中的一行是您的`RMSE2`函数所需的参数，您可以传递它`datcmeans`（`cmeans`在我的示例中）。

从那时起，您的代码对我来说几乎是难以理解的。不知道是什么`yields`样子，或者 RMSE2 是如何工作的，几乎不可能提供更多帮助。

如果你要在这里做一个循环，我会说`kk=kk+ncol(binding)`在第一次迭代结束时设置对你没有帮助，因为你已经设置`kk=0`了 ， kk 不会等于 ，也就是说`ncol(binding)`，我我猜，不是你想要的。这是我对您在这里需要的猜测（假设需要循环）。

```
yearerrors=vector("numeric", ncol(df)) #Create empty vector ahead of loop

for(i in 1:ncol(df)) {
  yearerrors[i] <- RMSE2(yields[i:ncol(df)], finvec)
}
yearerrors 
```

老实说，我无法想象像这样工作的函数，但这似乎是您的代码最合乎逻辑的改编。

# git - Git 日志搜索 iging 更改？

> ID：15100562
> 
> 赞同：1
> 
> 时间：2013-02-26T22:23:15.067
> 
> 标签：git

我写

```
git log -SMyTextStringHere --source --all 
```

我希望 git 在所有分支的源代码中搜索文本 MyTextStringHere。我得到一个结果。当我上周介绍它时。我期望得到的是我最新的变化，`string MyTextStringHere;`即`string MyTextStringHere=""`. 这是今天的变化，我可以在我的源代码中看到它，我可以在 github 上看到它。

为什么 git log search 不向我显示此更改？它在一条线上工作，这条线受到影响，所以我希望看到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:38:14.880

状态的文档`git log -S`：

> 寻找引入或删除 <string> 实例的差异。请注意，这与仅出现在 diff 输出中的字符串不同；有关更多详细信息，请参阅 gitdiffcore(7) 中的镐条目。

手册页的引用部分`gitdiffcore`部分说明：

> 当使用 diffcore-pickaxe 时，它​​会检查是否存在“结果”端和“源”端具有不同数量的指定字符串的文件对。

由于您期望找到的更改，您的搜索字符串的出现次数不会增加或减少，因此不应找到该提交。

使用该`-G`选项而不是`-S`应该给您预期的结果。

# javascript - 如何在我的任务代码运行之前*从我的自定义任务中调用其他任务？

> ID：15100565
> 
> 赞同：13
> 
> 时间：2013-02-26T22:23:23.877
> 
> 标签：javascript, node.js, gruntjs

我正在尝试在 grunt 中创建一个自动调用其“先决条件”的自定义任务。我不确定该怎么做。Grunt.js[文档](http://gruntjs.com/creating-tasks#custom-tasks)展示了这个例子：

```
grunt.registerTask('foo', 'My "foo" task.', function() {
  // Enqueue "bar" and "baz" tasks, to run after "foo" finishes, in-order.
  grunt.task.run('bar', 'baz');
  ... // Other stuff here
}); 
```

我不想“排队`bar`并`baz`在之后`foo`”，我想在那里执行它们，`grunt.task.run`行在哪里，所以它们在我的“其他东西”之前被执行。

我怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T22:54:19.153

我认为您目前唯一的方法是通过创建和附加任务

```
grunt.registerTask('fooTask', 'My "foo" task.', function() {
  grunt.task.requires('bar'); // make sure bar was run and did not fail
  grunt.task.requires('baz'); // make sure bar was run and did not fail
  ... // Other stuff here
});

grunt.registerTask('foo', 'My "foo" sequence.', ['bar', 'baz', 'fooTask']); 
```

# python - view_func.__module__ 突然坏了

> ID：15100566
> 
> 赞同：1
> 
> 时间：2013-02-26T22:23:25.080
> 
> 标签：python, django, python-2.7, django-middleware

我有一个**process_view**中间件，它将模块和视图名称设置到请求中，如下所示：

```
class ViewName( object ):
    def process_view( self, request, view_func, view_args, view_kwargs ):
        request.module_name = view_func.__module__
        request.view_name = view_func.__name__ 
```

我将这些名称一起用作基于会话的分页的键。

但截至昨天，由于我无法发现的原因， **view_func.__module__**现在返回“cp.models”，这是我的一个应用程序中的模型文件。

我一次返回一个提交，试图找到原因。即使将代码恢复到一个多月前，问题仍然存在。

我看到服务器上最近只更改了两个 python 包，我的应用程序都没有使用，并且更新是一个多月前：

```
cat /var/log/dpkg.log*|grep "upgrade" |grep python
2013-01-25 03:41:05 upgrade python-problem-report 2.0.1-0ubuntu15.12.0.1-0ubuntu17.1
2013-01-25 03:41:06 upgrade python-apport 2.0.1-0ubuntu15.1 2.0.1-0ubuntu17.1 
```

我还尝试重新排列我的中间件列表，但没有帮助。

知道还有什么可能导致这个问题吗？

# sql - 所需的结果行数作为存储过程中的参数

> ID：15100573
> 
> 赞同：2
> 
> 时间：2013-02-26T22:23:50.337
> 
> 标签：sql, sql-server, stored-procedures, parameters

我想让我的消费者指定他们希望在存储过程中返回的行数。我正在寻找模仿这种行为：

```
SELECT  TOP 100 AccountId ,
        AccountName
FROM    dbo.Account 
```

但以这种方式：

```
DECLARE @resultCount INT = 100;

SELECT  TOP @resultCount AccountId ,
        AccountName
FROM    dbo.Account 
```

当然，第二个版本会导致“@resultCount 附近的语法不正确”错误。有没有办法做到这一点，而不会分解为包含 SQL 字符串并使用 EXEC？我发现这不是很容易维护。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T22:27:14.650

`(` `)`在 周围添加括号`@resultCount`：

```
DECLARE @resultCount INT = 100;

SELECT  TOP (@resultCount) AccountId ,
        AccountName
FROM    dbo.Account 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:28:02.797

B. 将 TOP 与变量一起使用 下面的示例使用变量来指定查询结果集中返回的员工人数。事务处理 SQL

```
USE AdventureWorks2012;
GO
DECLARE @p AS int = 10;
SELECT TOP (@p) JobTitle, HireDate, VacationHours
FROM HumanResources.Employee
ORDER BY VacationHours DESC
GO 
```

所以在你的情况下......

```
SELECT  TOP (@resultCount) AccountId ,
        AccountName
FROM    dbo.Account 
```

# javascript - 如何在javascript中删除事件监听器？

> ID：15100576
> 
> 赞同：15
> 
> 时间：2013-02-26T22:23:57.073
> 
> 标签：javascript, touch

我想知道如何在添加一个事件侦听器后删除一个事件侦听器，您在 jquery 中使用 on 和 off 的方式？

```
document.removeEventListener('touchstart');
document.addEventListener('touchstart', function (e) {
     closePopupOnClick(e, popup);
}); 
```

但这实际上并没有删除事件侦听器。如果我将 addEventListener 代码放在一个函数中并将该函数传递给 removeEventListener 它将不起作用，因为你不能将参数传递给函数。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-26T22:26:22.737

将侦听器作为变量并通过附加[`.addEventListener`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)

```
var myListener = function (e) {
    closePopupOnClick(e, popup);
};
document.addEventListener('touchstart', myListener, true); 
```

然后在删除时再次传递它[`.removeEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.removeEventListener)

```
document.removeEventListener('touchstart', myListener); 
```

* * *

如果您**不在**严格模式下，您可以使用以下命令使侦听器自行移除`arguments.callee`

```
document.addEventListener('touchstart', function (e) {
    closePopupOnClick(e, popup);
    document.removeEventListener('touchstart', arguments.callee);
}, true); 
```

如果您处于严格模式，如果您希望函数删除自身，则必须使用**命名函数表达式**

```
document.addEventListener('touchstart', function myListener(e) {
    closePopupOnClick(e, popup);
    document.removeEventListener('touchstart', myListener);
}, true); 
```

* * *

如果您想在侦听器中使用可能被某些东西（例如循环）更改的变量，那么您可以编写一个生成器函数，例如

```
function listenerGenerator(popup) {
    return function (e) {
        closePopupOnClick(e, popup);
    };
} 
```

现在您可以创建侦听器，`listenerGenerator(popup)`它将作用于`popup`变量。请注意，如果`popup`是*Object*，它将是*ByRef*，因此可能仍会发生变化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-03-09T16:32:08.373

我认为这样做的一个好方法是自己添加一个事件，然后调用

```
event.stopImmediatePropagation() 
```

例如：

```
htmlElement.addEventListener('touchstart', (event) => event.stopImmediatePropagation()); 
```

在 Chrome 中有类似的功能

```
htmlElement.removeAllListeners() 
```

这可能会真正删除侦听器。但我认为这不是一个明智的解决方案，因为其他浏览器似乎没有很好地支持它。

# html - 如何垂直对齐包装器，使其居中在（移动）屏幕上？

> ID：15100577
> 
> 赞同：2
> 
> 时间：2013-02-26T22:24:01.113
> 
> 标签：html, css, css-float, vertical-alignment

我正在练习使网页响应移动屏幕分辨率。我成功的宽度。我如何管理这个高度？我的包装器继续保持在顶部而不是垂直对齐。

我已经看到了很多关于这个问题的问题，但还没有在我的 css 上找到指定的解决方案。希望有人可以帮助我。

**HTML**

```
<body>
  <div class="wrapper">
    <div class="header">
    </div>
    <div class="content">
      <a href="http://test"><div id="topleftbox"></div></a>
      <a href="http://test"><div id="toprightbox"></div></a>
      <a href="http://test"><div id="bottomleftbox"></div></a>
      <a href="http://test"><div id="bottomrightbox"></div></a>
    </div>
  </div> 
```

**CSS**

```
 body {

    }

    .wrapper {
    margin: 0 auto;
    width: 100%;
    height: 100%;
    }

    .header {
    min-width: 50%;
    height: 20px;
    }

    .content {
    min-width: 500px;
    width: 40%;
    height: auto;
    margin: 0 auto;
    }

    #topleftbox {
    background: url(..);
    background-repeat: no-repeat;
    width: 229px;
    height: 228px;
    float: left;
    }

    #toprightbox {
    background: url(...);
    background-repeat: no-repeat;
    width: 229px;
    height: 228px;
    float: right;
    }

etc. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:49:02.337

要使用`display:table-cell;`，您需要模拟完整的表结构。幸运的是，您不必添加任何额外的标记，因为您可以针对`html`and`body`标签设置样式：

```
html{display:table;width:100%;height:100%;}
body{display:table-row;}
.wrapper{
    display:table-cell;
    vertical-align:middle;
    text-align:center;
} 
```

**注意：**这垂直居中`.wrapper`的**内容**，而不是 div 本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:46:26.537

与水平居中不同，从来没有一种 CSS 方式来垂直居中。唯一的方法是使用 javascript 获取“window.innerHeight”，然后将 HTML 元素（包装器）的高度添加到其中并将总数分成两半。并将其设置为新的顶部位置。

此外，您的“包装器”的高度为 100%，这应该意味着它填充了整个屏幕高度。如果它与屏幕高度相同，它将不会居中。它的宽度也为 100%，我怀疑“margin: 0 auto”是否在做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:47:12.823

CSS 中的垂直对齐有几个选项：

**1.通过表格单元格**。（这在 IE8+ 中确实有效）

```
{
    display:table-cell;
    vertical-align:middle;
} 
```

**2\. line-height = 元素的高度**（如果你有超过一行的文字，我想这看起来很时髦）

```
{
    height:10em; 
    line-height:10em;
} 
```

您可以找到更多选择，但我相信`display: table`现在应该是您最好的选择。

[http://www.zann-marketing.com/.../vertically-centering-text-using-css.html](http://web.archive.org/web/20091017204329/http://www.zann-marketing.com/developer/20050518/vertically-centering-text-using-css.html) [https://stackoverflow.com/questions/2939914/](https://stackoverflow.com/questions/2939914/vertically-align-text-in-a-div)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:40:20.133

您可以使用`display:table`呈现您的 DIV，如表格和表格单元格。

更多信息：[http ://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

# tinymce - Google Chrome 范围变量的真正含义是什么？

> ID：15100580
> 
> 赞同：1
> 
> 时间：2013-02-26T22:24:11.863
> 
> 标签：tinymce, google-chrome-devtools

我正在尝试 Google Chrome 的开发工具，它显示了一些奇怪的值。在图片上您可以看到*obj*的值设置为“k.create.Editor”（标记为红色）。

我的问题是，我们如何在 JavaScript 代码中找到这个值？我试过*alert(obj)*，但我得到的只是*[object Object]*。 *typeof obj*返回*Object*。那么这个*k.create.Editor*是从哪里来的呢？如何将*obj*与值“k.create.Editor”进行比较？

（为了提供更多细节，我正在使用 TinyMCE，但这应该不相关）

![在此处输入图像描述](../Images/8cf309b5730e7191a6fa06ef63e50f2e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:02:47.353

它是类的名称。DevTools 能够在 V8 api 的帮助下推断对象的类名。

# c++ - 数组下标错误的无效类型“int [int]”

> ID：15100581
> 
> 赞同：0
> 
> 时间：2013-02-26T22:24:16.527
> 
> 标签：c++, arrays, compiler-errors, subscript

我正在从 Java 世界迁移到 C++，并试图移植一个示例。我收到一个错误，因为我没有正确访问我的数组。我尝试使用 -> 和 * 符号指向它们，但我很难理解它。我相信这是多次重复的相同基本错误。我已经强调了错误开始的三个区域，不包括相同错误的倍数。任何帮助都会对我理解该主题大有帮助。谢谢！

```
//--------------------------------------------------------------
void testApp::setup(){
    colorCount = 20;
    int *hueValues = new int[colorCount];
    int *saturationValues = new int[colorCount];
    int *brightnessValues = new int[colorCount];

ofColor::fromHsb(360, 100, 100, 100);
ofFill();
}

//--------------------------------------------------------------
void testApp::update(){

}

//--------------------------------------------------------------
void testApp::draw(){
    // ------ colors ------
    // create palette
    for (int i=0; i<colorCount; i++) {
        if (i%2 == 0) {
            hueValues[i] = (int) random(0,360);                  // invalid types 'int[int]' fr array subscript
            saturationValues[i] = 100;  
            brightnessValues[i] = (int) random(0,100);
        } 
        else {
            hueValues[i] = 195;
            saturationValues[i] = (int) random(0,100);
            brightnessValues[i] = 100;
        }
    }

    // ------ area tiling ------
    // count tiles
    int counter = 0;
    // row count and row height
    int rowCount = (int)random(5,40);                  // At this point in file
    float rowHeight = (float)ofGetHeight()/(float)rowCount;

    for(int i=0; i<rowCount; i++) {
        // seperate each line in parts  
        // how many fragments
        int partCount = i+1;
        parts = new float[0];                  // Cannot convert "float" to "float" in assignment

        for(int ii=0; ii<partCount; ii++) {
            // sub fragments or not?
            if (random(1.0) < 0.075) {
                // take care of big values      
                int fragments = (int)random(2,20);
                partCount = partCount + fragments; 
                for(int iii=0; iii<fragments; iii++) {
                    parts = append(parts, random(2));
                }              
            }  
            else {
                parts = append(parts, random(2,20));   
            }
        }

        // add all subparts
        float sumPartsTotal = 0;
        for(int ii=0; ii<partCount; ii++) sumPartsTotal += parts[ii];

        // draw rects
        float sumPartsNow = 0;
        for(int ii=0; ii<parts.length; ii++) {
            // get component color values
            int index = counter % colorCount;
            fill(hueValues[index],saturationValues[index],brightnessValues[index]);

            sumPartsNow += parts[ii];
            rect(map(sumPartsNow, 0,sumPartsTotal, 0,width),rowHeight*i, 
                 map(parts[ii], 0,sumPartsTotal, 0,width)*-1,rowHeight);

            counter++;
        }
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:30:44.183

看起来您正在为`setup()`函数中的数组分配空间，但是您的指针是在本地定义的，因此一旦函数完成执行，就会超出范围；当您尝试在`draw()`函数中引用它们时，您会收到编译器错误，因为未找到/未正确定义符号。将`int *hueValues/saturationValues/brightnessValues`声明移到头文件的私有部分`testAPP`，将分配代码（`new int[coloCount]`）保留在 setup 函数中，然后您应该能够在`draw()`函数中引用数组而不会出错。

测试应用程序.h：

```
private:
int* hueValues;
int* saturationValues;
int* brightnessValues; 
```

测试应用程序.cpp

```
void testApp::setup(){
  hueValues = new int[colorCount];
  ...
} 
```

# opengl - 注释和文件名导致运行时错误？

> ID：15100587
> 
> 赞同：0
> 
> 时间：2013-02-26T22:24:37.870
> 
> 标签：opengl, glut

我正在开发一个 OpenGL 过剩项目。然而，奇怪的事情发生了。第一个是我在main.cpp中注意到，通过改变注释行数，它会导致运行时错误。但是，对于同一个文件，我将其名称更改为 niam.cpp，一切正常！

有没有人遇到过这样的问题？我不会上传实际的代码，因为其中的所有内容都已被推荐，除了用于创建简单过剩窗口的几个代码。当我只是更改文件名时它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:52:43.733

> 第一个是我在main.cpp中注意到，通过改变注释行数，它会导致运行时错误。

你到底改变了什么？请发布一些源代码。

> 但是，对于同一个文件，我将其名称更改为 niam.cpp，一切正常！

在 C 和 C++ 中，编译单元源文件名根本不重要。它可以是任何东西。重要的是其中定义的符号。

请注意，还有许多其他语言并非如此，即文件名与内容密切相关。但不是在 C 和 C++ 中。

# ios - 适用于 iPhone 的 Google Analytics（分析）报告 SDK？

> ID：15100589
> 
> 赞同：0
> 
> 时间：2013-02-26T22:24:41.820
> 
> 标签：ios, sdk, report, adsense

在探索应用程序的新想法时，我偶然发现了一个在确定正确的 SDK 等后似乎很容易实现的方法。我想使用 Google OAuth 身份验证系统从用户帐户将 Google Analytics 数据报告到我的应用程序中。

几天的研究几乎没有结果，只是关于如何将 Google 分析添加到您的应用程序以跟踪您的视图等。

我应该从哪里开始？谷歌有这方面的示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:28:35.733

谷歌有一个完整的 API 用于访问谷歌分析数据。请参阅[https://developers.google.com/analytics/devguides/](https://developers.google.com/analytics/devguides/)

有几个 iOS 应用程序已经使用这些数据在您的 GA 帐户上提供图形和数字数据。

# asp.net-mvc - MVC 脚手架 - context.Save() 正在尝试更新外键表

> ID：15100593
> 
> 赞同：1
> 
> 时间：2013-02-26T22:25:02.833
> 
> 标签：asp.net-mvc, razor, entity-framework-5, asp.net-mvc-scaffolding

我一直在寻找我的问题发生的原因，我很困惑。不知道这是我做数据注释的方式还是什么......尝试了几件事，现在只是希望你们中的一个聪明人能发现它。

我们正在使用 EF5、MVC4 Razor 和 MVCScaffolding。我对这一切还是很陌生。

我的问题是，当表单提交并调用 Save 方法时，模型会发布所有正确的数据，但似乎不是只保存概率对象，而是试图在 Component 表上进行更新（其中是概率的 FK）。此更新没有传入任何值 (id = 0)，因此页面由于并发检查而失败。而且我们只能通过使用 SQL Profiler 才能找到这一点。

有人可以告诉我我做错了什么，因为我不相信 FK 表应该更新。请在下面查看我的所有代码......非常感谢任何帮助或指导:)

我的**模型**如下所示：

```
public class Probability 
{
    [Key]
    public int ProbabilityId { get; set; }

    public int ComponentId { get; set; }
    [ForeignKey("ComponentId")]
    public virtual Component Component { get; set; }

    public int PlantId { get; set; }
    [ForeignKey("PlantId")]
    public virtual Plant Plant { get; set; }

    // Data Entered into the database
    public decimal RiskMinorPercentage { get; set; }
    public decimal RiskMajorPercentage { get; set; }
    public decimal RiskCatastrophicPercentage { get; set; } 
```

我们正在尝试使用 Telerik Grid 来加载数据并对其进行编辑。数据加载并且是可编辑的并且数据返回到调用probabilityReposity的probabilityController。

**概率控制器**

```
[AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Save(Probability probability)
    {
        if (TryUpdateModel(probability))
        {

            probabilityRepository.InsertOrUpdate(probability);
            probabilityRepository.Save();     

        }

        return RedirectToAction("Index", probabilityRepository.All.ToList());
    } 
```

和**概率存储库**

```
 public void InsertOrUpdate(Probability probability)
    {
        if (probability.ProbabilityId == default(int)) {
            context.Probabilities.Add(probability);
        } else
        {
              context.Entry(probability).State = EntityState.Modified;
        }
    } 
```

# linux - ssh-add，自动添加私钥

> ID：15100594
> 
> 赞同：4
> 
> 时间：2013-02-26T22:25:06.857
> 
> 标签：linux, mercurial, ssh

我有一个公私 ssh 密钥对（由`ssh-keygen` *没有*密码短语生成），我将它与我的 bitbucket 帐户一起使用，特别是与一个 mercurial 存储库一起使用。

通常我在我的家用电脑中手动添加私钥，使用`ssh-add ~/.ssh/id_rsa`. 我正在寻找一种在每次启动时自动执行此操作的方法。有很多教程，但我仍然有一些问题。

我尝试过：

1.  `ssh = ssh -i ~/.ssh/id_rsa -C`在我的`~/.hgrc`mercurial 设置文件中添加该行。这个不行

2.  创建`~/.ssh/config`ssh 配置文件，内容如下：

    ```
    Host bitbucket-ssh
        Hostname ssh://hg@bitbucket.org/...
        IdentityFile ~/.ssh/id_rsa 
    ```

第二个也不行。

我有什么问题？`ssh-add`我应该在每次启动时使用一个简单的 bash 脚本吗？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-10-30T20:35:42.450

我知道这个问题很老，但我在任何相关问题中都找不到（恕我直言）正确答案。

不要在任何 shell 启动脚本中添加任何内容，这是不必要的黑客行为。

相反，添加

```
AddKeysToAgent yes 
```

到你的 .ssh/config

像这样， ssh-add 会在您第一次 ssh 进入另一个盒子时自动运行。您只需在 ssh-agent 过期或重新启动后重新输入您的密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:33:48.880

如果`ssh-add ~/.ssh/id_rsa`从命令行调用它时解决了您的问题，只需将其添加到您的`.bash_profile`（或等效的，如果您不使用 bash）并完成它。只要您登录，它就会运行。

# c# - 让 NBuilder 构建列表列表

> ID：15100597
> 
> 赞同：0
> 
> 时间：2013-02-26T22:25:19.080
> 
> 标签：c#, nbuilder

我的参数计数与 NBuilder 不匹配，基本上是在尝试建立一个列表列表，似乎找不到任何使用 NBuilder 执行此操作的示例：

```
public class MyClass
{
   public IEnumerable<IEnumerable<int>> Matrix { get; set; }
}

_myClass.Matrix = Builder<List<int>>.CreateListOfSize(10).Build();

System.Reflection.TargetParameterCountException : Parameter count mismatch. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:50:05.420

您无法使用 NBuilder 创建列表列表 - 它无法初始化泛型类型参数的属性，这就是`List<int>`您的情况。NBuilder 在列表中找到 indexer 属性并尝试以这种方式初始化它的值（您可以[在此处](https://github.com/garethdown44/nbuilder/blob/master/Source/FizzWare.NBuilder/PropertyNaming/PropertyNamer.cs)找到源代码）：

```
propertyInfo.SetValue(obj, value, null); 
```

但是对于索引器属性索引应该在最后一个参数中传递。这会导致异常`Parameter count mismatch`。

* * *

以下是如何初始化矩阵：

```
_myClass.Matrix = Enumerable.Repeat(Enumerable.Range(0, 100).ToList(), 100); 
```

或使用 NBuilder

```
_myClass.Matrix = Enumerable.Repeat(Builder<int>.CreateListOfSize(100).Build(), 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:41:10.357

好的，据我所知，不能使用 NBuilder，有人纠正我，但这解决了问题，

```
// basically create a matrix of 100x100 for instance
var innerList = Enumerable.Repeat(0, 100);
var list = Enumerable.Repeat(innerList, 100);
_myClass.Matrix = list; 
```

# c# - 用于代码生成的 Rosyln 与 T4

> ID：15100601
> 
> 赞同：8
> 
> 时间：2013-02-26T22:25:30.643
> 
> 标签：c#, .net, code-generation, t4, roslyn

所以我在T4上投入了很多知识。我已经编写了一些不同复杂度的代码生成器，并且通常喜欢它，但需要注意的是代码生成代码难以进行单元测试（但我什至解决了这个问题）。不过现在，我听到越来越多关于 Rosyln 项目的消息。我听说了很多它应该做的事情。语法分析，用作脚本语言等，以及某种代码生成（尽管我认为它发生在运行时而不是编译时）

这两种截然不同的技术是如何叠加起来的？除了*今天*的 T4 稳定之外，这通常应该是代码生成器的“默认值”吗？

它们在哪些方面有所不同，使用任何一种方法的优缺点是什么？

# haskell - 计算表达式中的出现次数

> ID：15100606
> 
> 赞同：4
> 
> 时间：2013-02-26T22:25:46.123
> 
> 标签：haskell, functional-programming

我对 Haskell 很陌生，我有一个评估，其中涉及布尔表达式的操纵器和评估器。

你的表达式类型是：

```
type Variable = String
data Expr = T | Var Variable | And Expr Expr | Not Expr 
```

我已经解决了很多问题，但我被困在如何处理以下功能上。我需要计算表达式中所有变量的出现次数

```
addCounter :: Expr -> Expr
addCounter = undefined

prop_addCounter1 = addCounter (And (Var "y") (And (Var "x") (Var "y"))) == 
                   And (Var "y1") (And (Var "x2") (Var "y1"))
prop_addCounter2 = addCounter (Not (And (Var "y") T)) == 
                   Not (And (Var "y1") T) 
```

我不是在寻找关于如何做到这一点的答案，因为这是一个评估问题，但我想要一些关于如何解决这个问题的提示？

在我的脑海中，我想象增加一个计数器以便我可以得到`y1`,`x2`部分，但这在 Haskell 中并不是真正可行的（或者无论如何都不建议这样做！）我会通过递归来解决这个问题吗？如果是的话，我该怎么做知道要添加到变量中的数字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:44:09.730

正如您所说，您不能保留一个共享计数器，这在这种情况下是很自然的。相反，您可以做的是在递归访问所有 Expr 时将当前计数器值向下传递，并从被调用的函数接收增加的计数器值。它*必须*是双向通信。您传递当前值并接收更新的 Expr 和新的计数器值。

如果您希望每个唯一变量名称具有相同的计数器值，则需要保留变量名称到分配的计数器值的映射。您需要像当前计数器值一样传递该值。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T00:45:07.480

## 原子化你的有状态更新

所以，这绝对是使用`State`monad 的好时机。特别是，您正在寻找的原子转换是一种`String -> String`通过每个字符串的唯一 id 来枚举字符串的方法。让我们称之为`enumerate`

```
import Control.Monad.State

-- | This is the only function which is going to touch our 'Variable's
enumerate :: Variable -> State OurState Variable 
```

为此，我们需要跟踪将`String`s 映射到计数 ( `Int`s)的状态

```
import qualified Data.Map as M
type OurState = Map String Int

runOurState :: State OurState a -> a
runOurState = flip evalState M.empty

runOurState $ mapM enumerate ["x", "y", "z", "x" ,"x", "x", "y"]
-- ["x1", "y1", "z1", "x2", "x3", "x4", "y2"] 
```

因此我们可以直接将 enumerate 实现为有状态的操作。

```
enumerate :: Variable -> State OurState Variable
enumerate var = do m <- get
                 let n = 1 + M.findWithDefault 0 var m
                 put $ M.insert var n m
                 return $ var ++ show n 
```

凉爽的！

* * *

## 一般折叠在表达式树上

现在我们真的应该编写一个精细的折叠设备，通过在每个-type 叶子`Expr -> State OurState Expr`上应用 enumerate 来进行映射。`Var`

```
enumerateExpr :: Expr -> State OurState Expr
enumerateExpr T = return T
enumerateExpr (Var s) = fmap Var (enumerate s)
enumerateExpr (And e1 e2) = do em1 <- addCounter e1
                            em2 <- addCounter e2
                            return (Add em1 em2)
enumerateExpr (Not expr) = fmap Not (addCounter expr) 
```

但这很乏味，所以我们将使用`Uniplate`库来保持干燥。

```
{-# LANGUAGE DeriveDataTypeable #-}
import Data.Data
import Data.Generics.Uniplate.Data

data Expr = T | Var Variable | And Expr Expr | Not Expr 
  deriving (Show,Eq,Ord,Data)

onVarStringM :: (Variable -> State OurState Variable) -> Expr -> State OurState Expr
onVarStringM action = transformM go
  where go :: Expr -> State OurState Expr
        go (Var s) = fmap Var (action s)
        go x       = return x 
```

`transformM`操作符做我们想做的事——对通用树（我们的）的所有部分应用一元转换`Expr`。

所以现在，我们只需解开完整的`State`动作来制作`addCounter`

```
addCounter :: Expr -> Expr
addCounter = runOurState . onVarStringM enumerate 
```

* * *

## 等一下！

刚刚注意到，这实际上并没有正确的行为——它没有完全正确地枚举你的变量（`prop_addCounter1`失败但`prop_addCounter2`通过）。不幸的是，我不太确定应该怎么做……但是考虑到这里列出的关注点分离，只需编写适当的`enumerate` `State`ful 操作并将其应用于相同的通用转换`Expr`机器就很容易了。

# mono - 不同的框架，不同的成本

> ID：15100612
> 
> 赞同：0
> 
> 时间：2013-02-26T22:26:22.357
> 
> 标签：mono, xamarin.ios, xamarin.android, monodevelop, monocross

我正在为想要进入市场的朋友开发一些混合应用程序。我对 monotouch、monodroid 和 monocross 之间的区别感到困惑。Monocross 似乎是 monotouch/monodroid 的开源版本？这些不同框架之间的主要区别是什么？

此外，monodroid/monotouch 的费用是否同样为每年 999 美元？还是每个平台 999 美元？如果可能的话，我希望使用 Microsoft Visual Studios 或 XCode 以及用于放置事物等的 HTML/CSS 来构建我的应用程序。这样，除了在各自市场的不同平台上之外，应用程序还可以在网站上运行。

有人能指出我在这个领域没有经验的新手应该看什么的正确方向吗？这些产品也有IRC吗？

谢谢

# mysql - 我移动了我的 Joomla 网站，但现在我无法登录管理工具

> ID：15100615
> 
> 赞同：1
> 
> 时间：2013-02-26T22:26:24.480
> 
> 标签：mysql, joomla, joomla1.5

我们最近不得不将我们客户的一个网站移动到新服务器（从 unix 到 unix）。他们有一个 Joomla 网站。我按照 Joomla 的文档来转移整个站点，并且没有任何问题。我通过 FTP 下载了所有文件，并在 phpMyAdmin 中导出了数据库。我通过 FTP 将所有文件上传到新服务器，并使用 phpMyAdmin 将数据库 sql 文件导入到新数据库中。

当我访问该站点时，所有页面都在那里，所有内容都像以前一样正常工作。该网站已成功移动。

但是，现在当以管理员身份登录添加新页面或编辑当前页面时，它不会让我们登录并说用户名和密码不匹配。它与以前服务器上使用的登录凭据完全相同，并且它们在那里工作。

对理解出了什么问题有任何帮助吗？如果您需要我提供更多信息，请询问，我会提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:38:12.630

登录问题可能是由几件事引起的。

*   管理员密码错误，因此请在`#_users`-> [http://stepolabs.com/upload/pass.png中进行更改](http://stepolabs.com/upload/pass.png)
*   CHMOD 的问题，将管理员文件夹 -r 设置为 755
*   cookie 有问题，因此请在浏览器和服务器上使用缓存将其删除。
*   如果以上没有帮助，请阅读这篇文章： http: [//kb.siteground.com/i_cant_log_into_the_joomla_backend_as_administrator/](http://kb.siteground.com/i_cant_log_into_the_joomla_backend_as_administrator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T07:34:43.743

1.  进入md5转换器网站，选择一个新密码，将其转换为md5。
2.  登录到 phpMyAdmin 或您用来操作数据库的任何工具。
3.  打开 _users 表，搜索您的用户。
4.  编辑您的用户，将密码字段更改为您的新 md5 编码密码并保存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T01:57:13.060

我尝试了很多解决方案（joomla 2.5），但都没有奏效......当我更改 configuration.php 时，我已经能够在后端登录

```
 public $session_handler = 'database'; 
```

到

```
 public $session_handler = 'none'; 
```

我还删除了变量 public $cookie_domain = ''; 中的域名

如果这对其他人有帮助:)

# android - 获取从 Spinner 中选择的位置的 Int 值 - android

> ID：15100618
> 
> 赞同：2
> 
> 时间：2013-02-26T22:26:31.517
> 
> 标签：android, int, android-spinner

我想获得在我的活动中运行的 4 个微调器中选择的位置的 int 值。一旦我有了 Int 值，我想根据这个值循环并将一个文件写入 SDCARD，选择 IE spinner1 item 4，在 sdcard 上生成文本文件 1、2、3、4。

我不确定如何获取用户在每个微调器中单击的位置的 int 值，但我想在选择图像按钮时“收集”这些值，目前这是我的代码；

```
 //used to track spinner value
public int spinner1 = 0;
public int spinner2 = 0;
public int spinner3 = 0;
public int spinner4 = 0;

        etnumber1 = (Spinner) findViewById(R.id.etnumber1);
    etnumber2 = (Spinner) findViewById(R.id.etnumber2);
        etnumber3 = (Spinner) findViewById(R.id.etnumber3);
    etnumber4 = (Spinner) findViewById(R.id.etnumber4);

         etnumber1.setOnItemSelectedListener(this);
 etnumber2.setOnItemSelectedListener(this);
 etnumber3.setOnItemSelectedListener(this);
 etnumber4.setOnItemSelectedListener(this);

 }//end of oncreate

     public void onClick(View v) {
      if (v==imagerun) {
           for (int i=1; i<spinner1; i++){
            //primary callsign
                Toast.makeText(getBaseContext(), String.valueOf(i),
                        Toast.LENGTH_SHORT).show();
                 String fileName = String.valueOf(i) +".txt";   
        File myFile = new File("/sdcard/.working/" +fileName);
        myFile.createNewFile();
        FileOutputStream fOut = new FileOutputStream(myFile, false);
        OutputStreamWriter myOutWriter = 
                                new OutputStreamWriter(fOut);
        myOutWriter.append(etpri1.getText());
        myOutWriter.append(" ");
        myOutWriter.append(String.valueOf(i));
        myOutWriter.close();
        fOut.close();
        }
        }
         catch (Exception e) {
                Toast.makeText(getBaseContext(), e.getMessage(),
                        Toast.LENGTH_SHORT).show();
            }

           }//end onclick
     public void onItemSelected(AdapterView<?> parent, View view1, int pos,
        long id) {
    // TODO Auto-generated method stub
        spinner1=etnumber1.getSelectedItemPosition(); // primary number
        spinner2=etnumber2.getSelectedItemPosition(); //secondary 
        spinner3=etnumber3.getSelectedItemPosition(); //primary number 
        spinner4=etnumber4.getSelectedItemPosition(); //secondary number
        } 
```

我显然做错了，我尝试遵循很多教程，但它们都指的是从单个微调器获取字符串值。抱歉，这可能是一个简单的请求，但我整天都在为此努力！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T23:17:21.593

要在微调器中选择索引，请使用以下代码（以 etnumber1 为例）

```
 int spinnerValue1 = etnumber1.getSelectedItemPosition(); 
```

并为其他微调器复制代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:07:06.537

也许就是这样

```
 public void onItemSelected(AdapterView<?> parent, View view1, int pos,
    long id) {
// TODO Auto-generated method stub
    switch(parent.getId()){
    case R.id.etnumber1:
    {
        spinner1 = pos;
        break;
    }
    case R.id.etnumber2:
    {
        spinner2 = pos;
        break;
    }
    case R.id.etnumber3:
    {
        spinner3 = pos;
        break;
    }
    case R.id.etnumber4:
    {
        spinner4 = pos;
        break;
    }

    }} 
```

# python - pylab中的散点图：排列轴和数据

> ID：15100619
> 
> 赞同：1
> 
> 时间：2013-02-26T22:26:34.470
> 
> 标签：python, matplotlib

我试图在 pylab 中拼凑一个散点图，但到目前为止都失败了。我不是这样的程序员，所以请多多包涵。

我有一个数据集，由包含在 csv 文件中的两列数据组成，大约有 60k 行。这是一个示例：

```
100000000012640,0.888888888888889
100000000105442,0.777777777777778
100000000206866,1.0
100000000304930,0.777777777777778
100000000583236,0.888888888888889
100000000683528,0.777777777777778
718435316,1.0
718494043,0.777777777777778
718602951,0.777777777777778
718660499,0.777777777777778
718766852,1.0
718795104,1.0
718862926,0.777777777777778
718927526,0.777777777777778
718952836,1.0
719102865,0.777777777777778
719156726,1.0
719213511,1.0
719425334,1.0
719452158,1.0
719493947,0.777777777777778
719566609,1.0
720090346,0.777777777777778
720127760,0.777777777777778
720143948,0.944444444444444
720221566,1.0
720256688,0.944444444444444
720349817,0.777777777777778
720380601,0.777777777777778
720446322,1.0
720524740,1.0
720560353,1.0
720594066,0.777777777777778
720673388,1.0
720716865,0.777777777777778
720730249,1.0
720774433,1.0 
```

我的目标是绘制这些数据的散点图，第一行数据在 x 轴上，第二行在 y 轴上。x 轴的值按降序排列，从显示的值开始，到 999963505 结束。y 轴的值始终介于 0 和 1 之间。

这是我尝试过的（使用“ipython --pylab”）：

```
data = loadtxt('./data/OD-4322/facebookID.csv', unpack=True, dtype=('float', 'float'), delimiter=',')
scatter(data[0],data[1]) 
```

这让我得到了类似于散点图的东西，但不是我正在寻找的东西：

[http://content.screencast.com/users/FernandoGarridoVaz/folders/Jing/media/a0df81c5-2dbb-4e93-8e18-3c9db07728f5/00000793.png](http://content.screencast.com/users/FernandoGarridoVaz/folders/Jing/media/a0df81c5-2dbb-4e93-8e18-3c9db07728f5/00000793.png)

（我会直接发布图片，但我在网站上的声誉还不允许）。

我怎样才能使 x 轴与我的值在同一范围内？为什么我的情节中的点都堆积在 0 和 1 上，而实际上它们分布在 0 和 1 之间的所有地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:38:43.333

[Pylab 使用 numpy，您可以在此处](http://docs.scipy.org/doc/numpy/user/basics.types.html)查找提供的数据格式。您在第一列中使用了非常高的数字，不需要浮点双精度，而是需要高整数值。查看您粘贴的示例数据：

```
>>> x = np.loadtxt('./temp.dat', unpack=True, dtype=('float'), delimiter=',')[0] 
>>> x
array([  1.00000000e+14,   1.00000000e+14,   1.00000000e+14,
     1.00000000e+14,   1.00000001e+14,   1.00000001e+14])
>>> x = np.loadtxt('./temp.dat', unpack=True, dtype=('uint64'), delimiter=',')[0]
>>> x
array([100000000012640, 100000000105442, 100000000206866, 100000000304930,
   100000000583236, 100000000683528], dtype=uint64)
>>> y = np.loadtxt('./temp.dat', unpack=True, dtype=('float'), delimiter=',')[1]
>>> scatter(x,y) 
```

请注意，您在行`scatter(data[0],data[1])`中所做的事情是在`loadtxt()`两列的语句之后完成的。第一个函数在读入浮点数后显示您的数据。使用以“uint64”形式读取的数据将帮助您绘制散点图。

很好的起点：[matplotlib 画廊](http://matplotlib.org/gallery.html)

编辑以回答您的评论，更好地控制输入数据的读取：

```
# create python lists to store the data
x_vals = []
y_vals = []
#open file and read in a list containing all lines as string
f = open("./temp.dat","r")
lines = f.readlines()
#Go through the lines
   #strip() takes away "\n" characters and such
   #split(",") creates a list of the string line splitted into (here: 2) substrings
for line in lines:
   x,y = line.strip().split(",")
   #append values to their lists and apply the right format
   x_vals.append(np.uint64(x))
   y_vals.append(np.float64(y))

scatter(x_vals,y_vals)
#or just plot the data as points using:
plot(x_vals,y_vals,"o") 
```

您的数据在最小值和最大值之间有很大的范围，当您将集合分成小数和大数时，您会得到更好的结果

# jquery - Kendo Window 在拖动和调整大小时跳转

> ID：15100620
> 
> 赞同：0
> 
> 时间：2013-02-26T22:26:37.897
> 
> 标签：jquery, asp.net-mvc-4, kendo-ui

我有一个加载 KendoUI 窗口的页面，对于我目前正在做的事情，一切似乎都很好。

但是，我注意到的一件事是，当我抓取小部件以调整其大小或拖动它时，它会跳跃大约 20 像素的位置，这弄乱了我试图强制执行的一些放置约束。

有没有其他人经历过这种“跳跃”？如果是这样，有没有人可以阻止它？

![在此处输入图像描述](../Images/15732c3b0acf2b5fa13833e2b08d277a.png)

所以上面是一个 2 状态图像，我在这里所做的只是抓住要拖动的标题，移动一两个像素开始拖动，然后它又跳了一个“x”像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:16:57.303

我找到了答案！原来 kendoWindow 不赞成应用边框的 body 标签，这在基本上任何 MVC 4 项目模板中都是默认设置。

从 Site.css 中删除 'border-top:solid 10px #000' 解决了这个问题。

# hadoop - 新 API 中的 MultipleTextOutputFormat 替代方案

> ID：15100621
> 
> 赞同：8
> 
> 时间：2013-02-26T22:26:41.570
> 
> 标签：hadoop, mapreduce

值得注意的是，MultipleTextOutputFormat 尚未迁移到新的 API。因此，如果我们需要根据动态写入的键值来选择输出目录和输出文件名，那么新的 mapreduce API 有什么替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-11T17:32:11.770

我使用的是 AWS EMR Hadoop 1.0.3，可以根据 k/v 对指定不同的目录和文件。使用`MultipleOutputs`类中的以下任一函数：

```
public void write(KEYOUT key, VALUEOUT value, String baseOutputPath) 
```

或者

```
public <K,V> void write(String namedOutput, K key, V value,
                        String baseOutputPath) 
```

前`write`一种方法要求 key 与 map 输出 key 的类型相同（如果您在 mapper 中使用它）或与 reduce 输出 key 相同的类型（如果您在 reducer 中使用它）。该值也必须以类似的方式输入。

后一种方法要求键/值类型与使用该函数`write`设置 MultipleObjects 静态属性时指定的类型相匹配：`addNamedOutput`

```
public static void addNamedOutput(Job job,
                              String namedOutput,
                              Class<? extends OutputFormat> outputFormatClass,
                              Class<?> keyClass,
                              Class<?> valueClass) 
```

因此，如果您需要与使用不同的输出类型，`Context`则必须使用后一种`write`方法。

获取不同输出目录的技巧是传递`baseOutputPath`包含目录分隔符的 a，如下所示：

```
multipleOutputs.write("output1", key, value, "dir1/part"); 
```

就我而言，这创建了名为“dir1/part-r-00000”的文件。

我没有成功使用`baseOutputPath`包含`..`目录的a，所以所有`baseOutputPath`s都严格包含在传递给`-output`参数的路径中。

有关如何设置和正确使用 MultipleOutputs 的更多详细信息，请参阅我找到的这段代码（不是我的，但我发现它很有帮助；不使用不同的输出目录）。[https://github.com/rystsov/learning-hadoop/blob/master/src/main/java/com/twitter/rystsov/mr/MultipulOutputExample.java](https://github.com/rystsov/learning-hadoop/blob/master/src/main/java/com/twitter/rystsov/mr/MultipulOutputExample.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:12:23.473

类似于：[Hadoop Reducer：如何使用推测执行输出到多个目录？](https://stackoverflow.com/questions/14824215/hadoop-reducer-how-can-i-output-to-multiple-directories-using-speculative-execu)

基本上你可以直接从你的 reducer 写入 HDFS - 你只需要警惕推测执行并唯一地命名你的文件，然后你需要实现你自己的 OutputCommitter 来清理中止的尝试（这是最困难的如果您有真正的动态输出文件夹，则部分 - 您需要逐步浏览每个文件夹并删除与中止/失败任务相关的尝试）。一个简单的解决方案是关闭推测执行

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T05:19:41.807

要获得最佳答案，请参阅 Hadoop - 第 3 版权威指南（从第 253 页开始。）

HDG书的摘录-

“在旧的 MapReduce API 中，有两个类用于产生多个输出：MultipleOutputFormat 和 MultipleOutputs。简而言之，MultipleOutputs 功能更全，但 MultipleOutputFormat 对输出目录结构和文件命名的控制更多。新 API 中的 MultipleOutputs 结合了旧 API 中两个多输出类的最佳特性。”

它有一个关于如何使用 MultipleOutputs API 控制目录结构、文件命名和输出格式的示例。

HTH。

# c# - 在服务器上安装 ef 5

> ID：15100626
> 
> 赞同：1
> 
> 时间：2013-02-26T22:27:08.977
> 
> 标签：c#, entity-framework, deployment

我在 Microsoft .Net 4 和 Entity Framework 5 上开发了一个 Web 应用程序。当我将项目上传到我的网络场时，它不起作用。我相信我的网络农场上没有安装实体框架。所以我联系了我的主人来支持这个特定的问题。

他们说：

> 向我们发送下载和安装说明，以及安装实体框架的任何要求。

除了我们通过 Nuget 直接在 Visual Studio 中使用链接。

您如何将正确的部署信息加载到服务器上，因为您无法直接使用 Nuget 进行部署，因为它们没有安装 Visual Studio？

服务器信息：

*   Windows Server 2008 R2 64 位
*   [我用来安装实体框架的 Nuget 链接。](http://nuget.org/packages/EntityFramework/5.0.0)

如果可能，请指导我或参考可以解决此部署问题的地方。任何帮助将不胜感激。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:49:07.323

为了在部署服务器上成功启动您的项目，您应该确保您的应用程序具有要安装在服务器上的部署包。

[部署注意事项可以在这里找到](http://msdn.microsoft.com/en-us/library/ee518967.aspx)：

你有很多事情需要考虑，但 Entity Framework 确实有很多选择和灵活性。您的一些选择：

*   单击一次安全和部署
*   Windows 安装程序部署

> 什么是 ClickOnce 应用程序？
> 
> ClickOnce 应用程序是使用 ClickOnce 技术发布的任何 Windows Presentation Foundation (.xbap)、Windows 窗体 (.exe)、控制台应用程序 (.exe) 或 Office 解决方案 (.dll)。您可以通过三种不同的方式发布 ClickOnce 应用程序：从网页、从网络文件共享或从 CD-ROM 等媒体。ClickOnce 应用程序可以安装在最终用户的计算机上并在计算机离线时在本地运行，或者它可以在仅在线模式下运行，而无需在最终用户的计算机上永久安装任何东西。有关更多信息，请参阅选择 ClickOnce 部署策略。
> 
> ClickOnce 应用程序可以自我更新；他们可以在更新版本可用时检查它们并自动替换任何更新的文件。开发者可以指定更新行为；网络管理员还可以控制更新策略，例如，将更新标记为强制。最终用户或管理员也可以将更新回滚到早期版本。有关更多信息，请参阅选择 ClickOnce 更新策略。
> 
> 因为 ClickOnce 应用程序是隔离的，所以安装或运行 ClickOnce 应用程序不会破坏现有应用程序。ClickOnce 应用程序是独立的；每个 ClickOnce 应用程序都安装到每个用户、每个应用程序的安全缓存中并从其运行。ClickOnce 应用程序在 Internet 或 Intranet 安全区域中运行。如有必要，应用程序可以请求提升的安全权限。有关详细信息，请参阅保护 ClickOnce 应用程序。
> 
> Windows Installer 部署如何工作？
> 
> Windows Installer 部署使您能够创建要分发给用户的安装程序包；用户运行安装文件并通过向导逐步安装应用程序。这是通过将安装项目添加到您的解决方案来完成的。构建后，该项目会创建一个安装文件，您可以将其分发给用户；用户运行安装文件并通过向导逐步安装应用程序。

这是对几种方法的简要描述，您可以在[此处找到示例](http://msdn.microsoft.com/en-us/library/ee191532.aspx)：一旦您的主机实际加载了您的部署包，它应该可以毫无问题地运行。希望这会为您指明正确的方向。

# php - 使用大量资源的带有 Shopp 插件的 Wordpress

> ID：15100628
> 
> 赞同：0
> 
> 时间：2013-02-26T22:27:21.190
> 
> 标签：php, wordpress, plugins, shopp

我安装了 Wordpress，并为电子商务安装了 Shopp 插件。我有大约 70 种产品，它们都是基于数字下载的。

我的网站使用大约 105MB 的内存来生成页面。这对我来说似乎很高。我确实有几个其他插件正在运行，但这些并没有导致任何显着的内存使用，因为我已经检查过它们。

根据 WP/Shopp 设置，这看起来是否正常/可行？还是总体上看起来很高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:35:45.173

是的，这对于 wordpress + 插件来说是很正常的。我见过更糟糕的。您可以尝试禁用一些插件以查看使用最多内存的插件。如果您确保将 max_memory 设置为高于您的使用量（留有余量以捕捉尖峰），则不会有任何问题。

您还可以缓存您的网站，因此未登录的用户将看到您网站的静态缓存，因此根本不使用内存。这是一个很好的缓存插件：[http](http://wordpress.org/extend/plugins/wp-super-cache/) ://wordpress.org/extend/plugins/wp-super-cache/ （阅读设置手册）

# r - 读取路径未知的 .csv 文件——R

> ID：15100631
> 
> 赞同：3
> 
> 时间：2013-02-26T22:27:35.370
> 
> 标签：r, path, design-patterns, dir

我知道这可能是一个非常愚蠢的问题，但我一直在这上面花了几个小时

想要读取我没有完整路径 (*/*data.csv) 的 .csv 文件。我知道下面会得到当前目录的路径但不知道如何适应

```
Marks <- read.csv(dir(path = '.', full.names=T, pattern='^data.*\\.csv')) 
```

这个也试过了，但没用

```
Marks <- read.csv(file = "*/*/data.csv", sep = ",", header=FALSE)) 
```

我无法识别特定路径，因为这将在具有不同路径的不同机器上使用，但我确信主目录的子文件夹是 bash 脚本的结果

我打算从定义工作空间的unix中调用它

我的数据结构是

```
lecture01/test/data.csv
lecture02/test/data.csv
lecture03/test/data.csv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T03:25:52.447

您的评论（尽管目前不是您的问题本身）表明您希望在包含一些子目录（lecture01、lecture02 等）的工作目录中运行代码，每个子目录都包含一个子目录“marks”，而这些子目录又包含一个 data.csv 文件。如果是这样，并且您的目标是从每个子目录中读取 csv，那么您有几个选项，具体取决于剩余的详细信息。

**案例 1**：直接指定顶级目录名称，如果您都知道它们并且它们可能是特殊的：

```
dirs <- c("lecture01", "lecture02", "some_other_dir")
paths <- file.path(dirs, "marks/data.csv") 
```

**案例 2**：构建顶级目录名称，例如，如果它们都以“lecture”开头，后跟一个两位数，您可以（或特别希望）指定一个数字范围，例如 01 到 15：

```
dirs <- sprintf("lecture%02s", 1:15)
paths <- file.path(dirs, "marks/data.csv") 
```

**Case 3**: Determine the top-level directory names by matching a pattern, e.g. if you want to read data from within every directory starting with the string "lecture":

```
matched.names <- list.files(".", pattern="^lecture")
dirs <- matched.names[file.info(matched.names)$isdir]
paths <- file.path(dirs, "marks/data.csv") 
```

Once you have a vector of the paths, I'd probably use `lapply` to read the data into a list for further processing, naming each one with the base directory name:

```
csv.data <- lapply(paths, read.csv)
names(csv.data) <- dirs 
```

Alternatively, if whatever processing you do on each individual CSV is done just for its side effects, such as modifying the data and writing out a new version, and especially if you don't ever want all of them to be in memory at the same time, then use a loop.

If this answer misses the mark, of even if it doesn't, it would be great if you could clarify the question accordingly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:22:45.453

我没有代码，但我会从根目录做一个隐蔽的 glob 并做一个 preg_match 来查找 .csv 文件（使用 glob 大括号）。

# image - 如何在浏览器页面标题旁边的标签栏上放置图像？

> ID：15100634
> 
> 赞同：8
> 
> 时间：2013-02-26T22:27:45.710
> 
> 标签：image, html, jsp

嗨，我想知道如何在标签栏上放置与本网站相同的图像，该网站已将其徽标放在其标题的左侧。如下图。

![在此处输入图像描述](../Images/7d0f37a5a6b2f936bccedf6579b810f4.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T22:30:57.357

它被称为 a[`favicon`](http://en.wikipedia.org/wiki/Favicon)并且`<link>`在文档的标签中设置了一个`header`标签。

例如，堆栈溢出将其设置为：

```
<link rel="shortcut icon" href="http://cdn.sstatic.net/stackoverflow/img/favicon.ico">
<link rel="apple-touch-icon" href="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png"> 
```

第一个标签是为常用桌面浏览器设置图标的跨浏览器方式。第二个标签适用于 iOS 设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:33:23.703

我认为您所指的称为 Favicon。这是一个链接，可帮助您制作（或导入图像）然后导出网站图标供您使用。下载文件后，只需将其放在站点目录的根目录中即可。

[http://www.favicon.cc](http://www.favicon.cc)

# cakephp - CakePHP 反向路由：Html 链接未显示正确的链接

> ID：15100638
> 
> 赞同：1
> 
> 时间：2013-02-26T22:28:00.403
> 
> 标签：cakephp, routes, friendly-url

首先，我知道有很多关于此的问题和解决方案，但我没有找到解决我的问题。

总之，Html 助手没有正确地反向路由，而不是像这样的 URL：

```
http://website.com/user_of_website/slug_name 
```

我得到这样的网址：

```
http://website.com/things/view/username:user_of_website/slug:a_thing 
```

这是我的路由器设置：

```
Router::connect('/', array('controller' => 'pages', 'action' => 'display', 'home'));
/**
* ...and connect the rest of 'Pages' controller's urls.
*/
Router::connect('/pages/*', array('controller' => 'pages', 'action' => 'display'));

//User routes
Router::connect('/login', array('controller' => 'users', 'action' => 'login'));
Router::connect('/logout', array('controller' => 'users', 'action' => 'logout'));
Router::connect('/register', array('controller' => 'users', 'action' => 'add'));

Router::connect('/users/:action/*', array('controller' => 'users')); 
Router::connect('/things/:action/*', array('controller' => 'things')); 

Router::connect(
    '/:username/:slug',
    array(
        'controller' => 'things',
        'action' => 'view'
    ),array(
        'username' => '[a-zA-Z0-9_]+',
        'slug' => '[a-zA-Z0-9_]+',
        'pass'=>array(
            'username',
            'slug'
        )
    )
);
Router::connect('/:userName', array('controller' => 'things', 'action' => 'user'),array('pass'=>array('userName'))); 
```

还有我的 Html 助手：

```
echo $this->Html->link('View', array(
    'controller' => 'things',
    'action' => 'view',
    'username' => 'user_of_website',
    'slug' => 'a_thing'
),array(
    'class' => 'text-warning'
)); 
```

我真的看不出我做错了什么。非常感谢任何帮助。

注意，我使用的是 CakePHP 2.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:40:43.560

如果您禁用“常规”路线，您是否尝试过它是否有效`things`？例如`/things/:action/*`。

我的猜测是，由于通配符，该路由也将匹配 URL，并且由于它是在您的自定义路由*之前*定义的，因此将被匹配。

如果这样可以解决问题，您可以尝试将该路线移至“自定义”路线*下方*

# .net - 更改我的查询并导致 SQL 异常

> ID：15100640
> 
> 赞同：6
> 
> 时间：2013-02-26T22:28:03.883
> 
> 标签：.net, entity-framework, sqlexception, mvc-mini-profiler

我喜欢我们的 .NET 项目的 MiniProfiler。但是，我遇到了一个问题。探查器实际上导致查询略有不同，从而导致错误。例如，当探查器未初始化时，会生成一个 SQL 查询，其中包含`nvarchar(4000)`. 但是，随着探查器的初始化，该部分查询已更改为`nvarchar(max)`. 这会导致以下**SqlException**：

> 全文查询字符串的全文查询参数无效。

我还没有找到任何有非常相似问题的人。

一种解决方案是能够在执行此特定查询之前以某种方式动态取消初始化 MiniProfiler，以便仅对于这一个查询，将使用默认 DBProviderFactory 而不是 MiniProfiler 的 DBProviderFactory。但是，这似乎不受支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:15:57.840

如果您使用的是实体框架，请更新模型，因为您正在更改字段范围。

# recursion - 计算树中的节点

> ID：15100645
> 
> 赞同：2
> 
> 时间：2013-02-26T22:28:40.067
> 
> 标签：recursion, f#, tree, continuations

与 f# 战斗 - 战斗在树的领域 - 专门计算节点的数量。这是真正有趣的，因为我想最终在 F# 中编码的程序涉及多路树，不幸的是它的开始有点麻烦 - 我希望你能提供帮助！

99 f# 系列的第 61 题，要求计算二叉树的叶子。解决方案（如下所示）计算节点，但我的问题是不理解

*   双递归的工作原理向左循环（有趣的 lacc -> 向右循环..）

*   什么`cont (branchF x lacc racc)`是，我的印象是 cont 是“abc”函数，但这只需要两个参数......

*   `loop t id`id 的类型是 unit - 我不明白这是如何暗示的

基本上不理解这一点，或者它在树中流动的顺序（调试和单步执行没有帮助）如果有更简单的示例、预读建议等，请指导我。

非常感谢您的帮助，有问题的解决方案代码如下：

干杯

时间

```
type 'a Tree = Empty | Branch of 'a * 'a Tree * 'a Tree

let foldTree branchF emptyV t =
    let rec loop t cont =
        match t with
        | Empty ->
            cont emptyV
        | Branch (x, left, right) ->
            loop left  (fun lacc -> 
                loop right (fun racc ->
                    cont (branchF x lacc racc)))
    loop t id

let counLeaves tree =
    foldTree (fun abc lc rc ->
        if lc + rc = 0 then 1
        else 1 + lc + rc) 0 tree

let Tree1 = Branch ('x', Branch ('x', Empty, Empty),Branch ('x', Empty, Branch ('x', Empty, Branch ('x', Empty, Empty))))

let result = counLeaves Tree1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T09:34:51.387

顾名思义，`foldTree`定义了自定义`Tree`类型之上的折叠函数。

定义 a 的一种天真的方法`foldTree`可能是：

```
let rec foldTreeNaive accFun init = function
    | Empty -> init
    | Branch (x, left, right) ->
        let lacc = foldTreeNaive accFun init left
        let racc = foldTreeNaive accFun init right
        accFun x lacc racc 
```

这个函数的问题是，如果被折叠的树很深，它可能会进行非常深的递归调用，因为在调用累加器函数之前，节点的递归调用必须完成。例如以下导致堆栈溢出异常：

```
let unbalanced = [1..100000] |> List.fold (fun t i -> Branch(i, t, Empty)) Empty
let nodeCount = foldTreeNaive (fun _ lc rc -> lc + rc + 1) 0 unbalanced 
```

避免这种堆栈溢出的常用方法是使函数尾部递归，但是在这种情况下这似乎是不可能的，因为要进行两次递归调用，而不是折叠列表时所需的一次。

`foldTree`是使用局部`loop`函数定义的。这个函数很有趣，因为它是使用[延续传递样式](http://en.wikipedia.org/wiki/Continuation-passing_style)定义的。在 CPS 中，每个函数都有一个附加的“延续”函数，该函数传递计算结果并负责决定接下来会发生什么。请注意，它`loop`是尾递归的，因此避免了`foldTreeNaive`.

函数的类型`loop`是：

```
Tree<'a> -> ('b -> 'c) -> 'c 
```

其中'a是树中节点的类型，'b是累加器类型，'c是延续函数的结果。

在叶节点的情况下，将传递给函数的空累加器值传递给延续`foldTree`。

在这种情况下折叠非空树时`Branch`，折叠的结果取决于左右子树的结果。这是递归完成的，首先折叠左子树，然后折叠右子树。对于左子树上的递归调用，`loop`必须建立一个新的延续来接收结果，这是

```
(fun lacc -> 
    loop right (fun racc ->
        cont (branchF x lacc racc)) 
```

功能。这个延续所做的是对右子树进行递归调用，传递另一个延续来接收折叠的结果。当调用该延续时，左子树和右子树的结果在`lacc`和中可用`racc`。此时，可以使用当前节点的值和左右子树的结果调用节点的累积函数。然后将此函数的结果传递给传递给的原始延续`loop`。

然后该`loop`函数由该行中的函数调用`foldTree`：

```
loop t id 
```

这里，`id`是接收树根节点折叠结果的延续。由于这是所需的值，因此`id`只需返回其参数而不进行修改。

您可能还会发现[这种对二叉树折叠的描述](http://lorgonblog.wordpress.com/2008/04/06/catamorphisms-part-two/)很有用。

# javascript - jQuery 和 AJAX 调用的最佳实践

> ID：15100647
> 
> 赞同：6
> 
> 时间：2013-02-26T22:28:45.567
> 
> 标签：javascript, jquery, security

我对使用 jQuery/JavaScript/Ajax 时的最佳实践有疑问。假设我有一些任务，并且每个任务都有一个日历。用户可以点击任务日历中的某一天并通过 AJAX 预订特定日期的任务。我必须将任务的日期和 ID 存储在某处，并且我正在使用非常奇怪的 ID，例如：

```
<span class="day_field" id="date_13-02-2013_task_4">13.02.2013</span> 
```

然后我只是像这样附加一个监听器：

```
$('.day_field').on('click',function(){
    var date = $(this).id.split('_')[1];
    var task_id = $(this).id.split('_')[3];
    //place for some validation
    $.post('book_task.php',{task_id: task_id, date: date},function(data){
        //something cool with the result
    });
}); 
```

我的问题是：这是正确的方法吗？我不太确定，因为 ID 可能很长 + 它包含数据库中的 ID，可能根本不保存。

谢谢！T。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T22:31:50.360

使用 HTML5 数据属性：

```
<span class="day_field" data-date="13-02-2013" data-task="4">13.02.2013</span>

$('.day_field').on('click',function(){
    var date = $(this).data("date");
    var task_id = $(this).data("task");
    //place for some validation
    $.post('book_task.php',{task_id: task_id, date: date},function(data){
        //something cool with the result
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:31:24.667

~~正确的方法~~更好的方法是将数据存储在数据属性中，或者将跨度设置为锚标记并将所需的参数字符串存储在 href 属性中。

```
<span class="day_field" data-date="13-02-2013" data-task="4>13.02.2013</span>

or

<a class="day-field" href="?task_id=4&date=13-02-2013">13.02.2013</a> 
```

用这个作为锚标签：

```
$('.day_field').on('click',function(e){
    e.preventDefault();
    $.post("foo.php",this.href,handler);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T22:31:59.673

[您可以使用自定义数据属性](http://html5doctor.com/html5-custom-data-attributes/)代替 ID，如下所示：

```
<span class="day_field" data-date="date_13-02-2013_task_4">13.02.2013</span> 
```

然后你可以在 jQuery 中访问这样的值：

```
$(".day_field").data("date"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:31:25.740

暴露数据库中某些东西的实际 ID 与数据库一样不安全。

对我来说，使用`id`of 元素似乎也很好，如果它唯一地标识一个事物。如果您愿意，使用`data`属性可以节省拆分逻辑，但您仍然可以`id`串联使用。

按照惯例，与 jQuery 相比，这是非常温和的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T22:32:34.553

将数据关联到元素的一种更优雅的方法是使用[jQuery 的 data](http://api.jquery.com/jQuery.data/)。但是，我会考虑构建一个 jQuery 插件并为每个任务使用它的一个实例。插件封装了它需要的所有数据，因此您不需要将其存储到元素上，这不是很好。

# sorting - 计数和基数排序的运行时间

> ID：15100648
> 
> 赞同：1
> 
> 时间：2013-02-26T22:28:49.040
> 
> 标签：sorting, time, radix-sort

我知道计数和基数排序通常被认为在 O(n) 时间内运行，我相信我明白为什么。然而，我在作业中被要求解释为什么这些排序不一定在 O(n) 时间内对不同的正整数列表进行排序。我想不出任何理由。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:58:06.470

说计数或基数排序是 O(n) 实际上是不正确的。

[**计数排序**](http://en.wikipedia.org/wiki/Counting_sort)是 O(n+k)，其中 k 是数组中任何元素的最大值。

原因是您必须逐步遍历整个列表以填充计数 (O(n))，然后逐步遍历计数 (O(k))。

[**基数排序**](http://en.wikipedia.org/wiki/Radix_sort)是 O(mn)，其中 m 是数字的最大位数。

原因是您必须为每个数字单步遍历数组一次（O(n) m 次）。

# ruby-on-rails - 在 polymorphic_path 中使用 slug

> ID：15100651
> 
> 赞同：1
> 
> 时间：2013-02-26T22:28:56.607
> 
> 标签：ruby-on-rails, polymorphic-associations

有没有办法可以在 polymorphic_path 中使用参数来传递 slug？

例如，我有以下路线

*路线.rb*

```
MyApp::Application.routes.draw do

  match "movies/:slug" => 'movies#show', :as=>:movie
  match "series/:slug" => 'series#show', :as=>:series

end 
```

我有以下型号：

*电影.rb*

```
class Movie < ActiveRecord::Base
    has_many :cast_members, :as=>:media_item
end 
```

*系列.rb*

```
class Series < ActiveRecord::Base
    has_many :cast_members, :as=>:media_item
end 
```

*演员表.rb*

```
class CastMember < ActiveRecord::Base
  belongs_to :media_item, :polymorphic=>true
end 
```

这很好用，我可以从演员那里引用我的电影，反之亦然，就像正常的 has_many/belongs_to 关系一样。我也可以在我的 cast_member 视图中执行此操作：

*cast_members/show.html.erb*

```
link_to (@cast_member.movie.title, movie_path(@cast_member.movie.slug)) 
```

返回“电影/电影标题”

我能做到

*cast_members/show.html.erb*

```
link_to (@cast_member.movie.title, polymorphic_path(@cast_member.media_item)) 
```

但这会返回“/movies/24”

我尝试以不同的方式将 slug 作为项目传递给 polymorphic_path，例如

```
link_to (@cast_member.movie.title, polymorphic_path(@cast_member.media_item, @cast_member.media_item.slug))
link_to (@cast_member.movie.title, polymorphic_path(@cast_member.media_item, :slug=>@cast_member.media_item.slug))
link_to ([@cast_member.movie.title, polymorphic_path(@cast_member.media_item, @cast_member.media_item.slug])) 
```

但这些都返回错误或带有 id 的路径。

如何让 polymorphic_path 使用 movie.slug 而不是 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:07:45.977

我切换到使用friendly_id 生成蛞蝓。它神奇地在后台神奇地处理所有 slug<->id 转换，并解决了这个问题。

我确实认为 rails 应该有一种内置的方式来做到这一点，就像你可以将 slug 传递给默认的 *_path 方法一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-25T20:02:22.363

我通过使用 Rails 的内置路径助手而不是`polymorphic_path`. 我真的很想用那个方法，因为它需要使用模型的 ID，我不能。

在我的应用程序中，我有很多“slugable”模型，因此`#to_path`在 slugable mixin 中包含一个方法是有意义的。

```
# app/models/concerns/slugable.rb
module Slugable
  extend ActiveSupport::Concern

  included do
    validates :slug, presence: true, uniqueness: {case_sensitive: false}
  end

  def to_path
    path_method = "#{ActiveModel::Naming.singular_route_key(self)}_path"
    Rails.application.routes.url_helpers.send(path_method, slug)
  end

  def slug=(value)
    self[:slug] = value.blank? ? nil : value.parameterize
  end
end 
```

然后在模板中：

```
<%= link_to my_slugable_model.name, my_slugable_model.to_path %> 
```

如果您的路线中有嵌套资源，则需要调整该资源的代码。

像这样的东西（未经测试）：

```
def to path(my_has_many_model_instance)
   class_path = self.class.to_s.underscore
   has_many_class_path = my_has_many_model_instance.class.to_s.underscore
   path_method = "#{self_path}_#{has_many_class_path}_path"
   Rails.application.routes.url_helpers.send(path_method, slug, my_has_many_model)
end 
```

祝你好运！

# java - JNA 在 Win7 64 位机器上使用 32 位 dll

> ID：15100652
> 
> 赞同：4
> 
> 时间：2013-02-26T22:29:03.877
> 
> 标签：java, dll, jna

在过去的 8 个月里，我一直在使用 Java。目前我正在使用 JNA 加载第三方 DLL，它在 32 位 WinXP 和 32 位 Win7 机器上运行良好。

在 64 位 Win7 机器上，这个第三方 dll 存在于**C:\Program Files(x86)**下，我认为这意味着它是一个 32 位 DLL。所以，这是我目前使用的配置，

**Win7 机器 - 64 位，第三方 dll - 32 位（根据上述假设），JRE - 尝试使用 32 位和 64 位**

但我得到以下信息 - “**错误：java.lang.UnsatisfiedLinkError：无法加载库'Wrapper'：找不到指定的模块。”**

请让我知道 JNA 是否支持在 64 位机器上使用 32 位 JRE 加载 32 位 DLL。此外，如果这个 32 位 DLL 依赖于其他 32 位和 64 位 DLL，JNA 仍然支持它。

我将使用 procexp 来确定我是否缺少任何依赖项。我会相应地更新这篇文章。

**请提供您的专家建议。提前致谢 ！**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T19:27:01.767

JNA 确实支持在 64 位机器上加载 32 位 DLL。但我们需要一个 32 位的 JVM 来执行此操作。我使用 Platform.is64Bit() 来确定 DLL 的路径。我了解到此方法返回 JVM 而不是操作系统的配置。

所以，就我而言，当我在 64 位机器上使用 32 位 VM 时，DLL 的路径是错误的。

# node.js - 从 Angular $resource.save 调用访问 NodeJS 中的 Post 参数

> ID：15100654
> 
> 赞同：3
> 
> 时间：2013-02-26T22:29:17.177
> 
> 标签：node.js, angularjs

我正在使用 AngularJS 资源向运行 express 的节点 js 服务器发布 ajax 帖子。但是我无法访问 NodeJS 端的 post 有效负载参数。

我有一个服务设置：

```
angular.module('app.services', ['ngResource'])
    .factory('PostService', function($resource) {
        return $resource('/postTest');
    }); 
```

在控制器中我有：

```
function UserCtrl($scope, PostService) {
    //query for the users
    $scope.testPost = function() {
        var stuff = {firstname: 'some', lastname:'person'};
        PostService.save(stuff,function(data) {
            console.log('called save on PostService');
        });
    };
} 
```

我可以在 http 标头中看到有效负载：

```
{"firstname":"some","lastname":"person"} 
```

但是，当我到达 NodeJS 路由来处理它时，我不确定如何访问参数：

（从节点控制台输出）：内部测试内容 req.params 未定义

```
app.post('/postTest', function(req, res) {
        console.log('inside test stuff');
        console.log('req.params ' + req.param('stuff'));
    }) 
```

我在以下位置创建了一个小提琴：http: [//jsfiddle.net/binarygiant/QNqRj/](http://jsfiddle.net/binarygiant/QNqRj/)

谁能解释如何在我的 NodeJS 路由中访问帖子传递的参数？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:45:52.457

如果 "{"firstname":"some","lastname":"person"}" 在 json 中的帖子正文中？

你会以不同的方式访问它。

使用`express.bodyParser()`,`req.body.firstname`会得到你的名字

```
app.use(express.bodyParser()); 
```

然后

```
app.post('/postTest', function(req, res) {
    console.log('inside test stuff');
console.log(req.body.firstname);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-17T18:55:32.900

您需要在您的**应用程序中设置正文解析器**

例如在 ExpressJs 4 中，

```
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: false })); 
```

# android - 以编程方式创建带圆角的图层列表

> ID：15100660
> 
> 赞同：10
> 
> 时间：2013-02-26T22:29:35.787
> 
> 标签：android, xml, drawing, shape, layer-list

我目前正在尝试将以下 XML 转换为以编程方式创建，以便我可以在整个项目中根据需要设置顶角和底角。这是一个简单的图层列表，有两个矩形；一个在另一个之上。我想将其用作几个不同视图的背景，因此结果缩放很重要。

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:bottom="20dp">
        <shape android:shape="rectangle" >
            <size android:height="20dp" />
            <solid android:color="#969595" />
            <corners
                android:radius = "0dp"
                android:topLeftRadius="5dp"
                android:topRightRadius="5dp" />
        </shape>
    </item>
    <item android:top="20dp">
        <shape android:shape="rectangle" >
            <size android:height="20dp" />
            <solid android:color="#7B7979" />
            <corners
                android:radius = "0dp"
                android:bottomLeftRadius="5dp"
                android:bottomRightRadius="5dp" />
        </shape>
    </item>
</layer-list> 
```

这种方法确实有效，但我需要为每个形状创建一个单独的 XML，具体取决于我想要顶部、底部、两者还是不圆角。

我目前创建相同可绘制对象的尝试只产生了两个矩形，一个在另一个之上。我不知道如何设置矩形的位置。无论形状的边界设置为什么，我都看不到任何可见的变化。任何建议将不胜感激。

```
// Usage: 
setBackgroundDrawable(new DualColorStateDrawable(0, 10f)); 
```

...

```
private final int topColorUnselected = Color.RED;
private final int bottomColorUnselected = Color.GREEN;
private final int topColorSelected = Color.YELLOW;
private final int bottomColorSelected = Color.BLUE;
private final int m_nZERO_RADIUS = 0;

class DualColorStateDrawable extends StateListDrawable
{
    public NYWTableViewCellStateDrawable(float topRadius, float bottomRadius){
        addState(new int[] { -android.R.attr.state_pressed }, 
                 createListWithSelectedState(false, topRadius, bottomRadius));
        addState(new int[] { android.R.attr.state_pressed }, 
                 createListWithSelectedState(true, topRadius, bottomRadius));   
    }

    public Drawable createListWithSelectedState(
        boolean isSelected, float topRadius, float bottomRadius){

        int topColor, bottomColor;

        if (isSelected) {
            topColor = topColorSelected;
            bottomColor = bottomColorSelected;
        } else {
            topColor = topColorUnselected;
            bottomColor = bottomColorUnselected;
        }

        int x = 10;
        int y = 10;
        int width = 20;
        int height = 20;

        RoundRectShape _rrsTopShape = 
            new RoundRectShape(getRadii(topRadius, m_nZERO_RADIUS), null, null);
        CustomShapeDrawable _csdTopShape = 
            new CustomShapeDrawable(_rrsTopShape, topColor);
        RoundRectShape _rrsBottomShape = 
            new RoundRectShape(getRadii(m_nZERO_RADIUS, bottomRadius), null, null);
        CustomShapeDrawable _csdBottomShape = 
            new CustomShapeDrawable(_rrsBottomShape, bottomColor);
        _csdBottomShape.setBounds(x, y, x + width, y + height);

        return new LayerDrawable(new Drawable[] {_csdTopShape, _csdBottomShape});
    }

    private float[] getRadii(float top, float bottom) 
    {
        return new float[] { top, top, //
                top, top, //
                bottom, bottom, //
                bottom, bottom //
        };
    }

    class CustomShapeDrawable extends ShapeDrawable {
        private final Paint fillpaint;

        public CustomShapeDrawable(Shape s, int fill) {
            super(s);
            fillpaint = new Paint(this.getPaint());
            fillpaint.setColor(fill);
        }

        @Override
        protected void onDraw(Shape shape, Canvas canvas, Paint paint) {
            shape.draw(canvas, fillpaint);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-11T23:28:44.903

您正在寻找`LayerDrawable`'s [setLayerInset](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html#setLayerInset%28int,%20int,%20int,%20int,%20int%29)以便能够将一个矩形设置在另一个矩形之上。

见下文：

```
float radius = 5.0f;

float[] m_arrfTopHalfOuterRadii = 
    new float[] {radius, radius, radius, radius, 0, 0, 0, 0};
float[] m_arrfBottomHalfOuterRadii = 
    new float[] {0, 0, 0, 0, radius, radius, radius, radius};

int m_nTopColor = Color.BLUE;
int m_nBottomColor = Color.CYAN;

int m_nCellHeight = 40;

public Drawable drawbg()
{
    RoundRectShape top_round_rect = 
        new RoundRectShape(m_arrfTopHalfOuterRadii, null, null);
    ShapeDrawable top_shape_drawable = new ShapeDrawable(top_round_rect);
    top_shape_drawable.getPaint().setColor(m_nTopColor); 

    RoundRectShape bottom_round_rect = 
        new RoundRectShape(m_arrfBottomHalfOuterRadii, null, null);
    ShapeDrawable bottom_shape_drawable = new ShapeDrawable(bottom_round_rect);
    bottom_shape_drawable.getPaint().setColor(m_nBottomColor);

    Drawable[] drawarray = {top_shape_drawable, bottom_shape_drawable};
    LayerDrawable layerdrawable = new LayerDrawable(drawarray);

    int _nHalfOfCellHeight = m_nCellHeight/2; 
    layerdrawable.setLayerInset(0, 0, 0, 0, _nHalfOfCellHeight); //top half
    layerdrawable.setLayerInset(1, 0, _nHalfOfCellHeight, 0, 0); //bottom half

    return layerdrawable;
} 
```

# android - ParticleEffect.start 不会在 touchlistener 中被调用

> ID：15100662
> 
> 赞同：1
> 
> 时间：2013-02-26T22:29:36.187
> 
> 标签：android, libgdx

所以我有以下演员：

```
package com.asteroids.actors;
import com.asteroids.screens.AbstractScreen;
import com.asteroids.utility.FireworkParticleEffect;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.g2d.ParticleEffect;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.g2d.TextureAtlas;
import com.badlogic.gdx.graphics.g2d.TextureAtlas.AtlasRegion;
import com.badlogic.gdx.math.Rectangle;
import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.scenes.scene2d.InputEvent;
import com.badlogic.gdx.scenes.scene2d.InputListener;
import com.badlogic.gdx.scenes.scene2d.ui.Image;

public class Meteorites extends Image {

public Rectangle meteorRect;
public Vector2 position;
public float speed;
private float rotation = 300;
private ParticleEffect meteorTrailEffect;
private FireworkParticleEffect explodeMeteoriteEffect;

private Meteorites(AtlasRegion region) {
    super(region);
    position = new Vector2();
    meteorRect = new Rectangle(getX(), getY(), getWidth(), getHeight());
    meteorTrailEffect = new ParticleEffect();
    meteorTrailEffect.load(Gdx.files.internal("data/comet_fire"),
            Gdx.files.internal("data"));
    explodeMeteoriteEffect = new FireworkParticleEffect();
    explodeMeteoriteEffect.load(Gdx.files.internal("data/firework"));

    setOrigin(getWidth() / 2, getHeight() / 2);

    addListener(new InputListener() {
        public boolean touchDown(InputEvent event, float x, float y,
                int pointer, int button) {
            explodeMeteoriteEffect.setPosition(position.x, position.y);
            explodeMeteoriteEffect.start();
            remove();
            return false;
        }
    });
}

/**
 * Factory method to create a {@link Meteorites}.
 */
public static Meteorites create(TextureAtlas textureAtlas) {
    AtlasRegion planetRegion = textureAtlas.findRegion("meteorite");

    return new Meteorites(planetRegion);
}

@Override
public void act(float delta) {
    super.act(delta);
    float x = AbstractScreen.GAME_VIEWPORT_WIDTH / 2 - position.x;
    float y = AbstractScreen.GAME_VIEWPORT_HEIGHT / 2 - position.y;
    double dx = x / Math.sqrt(Math.pow(x, 2) + Math.pow(-y, 2));
    double dy = -y / Math.sqrt(Math.pow(x, 2) + Math.pow(-y, 2));
    position.x = (float) (position.x + dx * speed * delta);
    position.y = (float) (position.y - dy * speed * delta);

    setX(position.x - (getWidth() / 2));
    setY(position.y - (getHeight() / 2));
    meteorRect.setX(position.x - (getWidth() / 2));
    meteorRect.setY(position.y - (getHeight() / 2));
    meteorTrailEffect.setPosition(position.x, position.y);
    rotate(rotation * delta);
}

@Override
public void draw(SpriteBatch batch, float parentAlpha) {
    meteorTrailEffect.draw(batch, Gdx.graphics.getDeltaTime());
    explodeMeteoriteEffect.draw(batch, Gdx.graphics.getDeltaTime());
    super.draw(batch, parentAlpha);
}
} 
```

当演员被触摸时，我开始自定义粒子效果：

```
addListener(new InputListener() {
        public boolean touchDown(InputEvent event, float x, float y,
                int pointer, int button) {
            explodeMeteoriteEffect.setPosition(position.x, position.y);
            explodeMeteoriteEffect.start();
            remove();
            return false;
        }
    }); 
```

问题`explodeMeteoriteEffect.start()`在这里不起作用，有趣的是，如果我将`explodeMeteoriteEffect.start()`侦听器放在构造函数之外，它*确实*起作用。

# visio - 以编程方式在 linux 服务器上创建 Visio 绘图

> ID：15100664
> 
> 赞同：2
> 
> 时间：2013-02-26T22:29:46.047
> 
> 标签：visio

是否可以从 Linux 服务器创建 Visio 绘图？

也就是说，无需访问 Visio 软件。语言可以是python、php、C ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:34:50.750

**简短的回答**：是的

有几个选项可供您使用：

1 - 生成 VDX 或 VSDX 文件。这些是 Visio 可以读取的基于 XML 的格式。（VSDX 是新的，只能由 Visio 2013 读取）。如果您可以在 Linux 上生成 XML 文件，那么您可以创建这些文件。我写了一个可以帮助创建 VDX 文件的库 - 在此处查找 VisioAutomation.VDX：http://visioautomation.codeplex.com/[您](http://visioautomation.codeplex.com/)也可以查看[http://pkgvisio.codeplex.com/](http://pkgvisio.codeplex.com/)。

2 - 生成 VSD。这是一种二进制格式，更难创建。LibreOffice 有一个库来生成这种格式。“Aspose.Diagram”也可以做到这一点，但据我所知，它在 Linux 服务器上不起作用。

# python - Django-haystack 搜索#hashtag

> ID：15100666
> 
> 赞同：5
> 
> 时间：2013-02-26T22:30:00.837
> 
> 标签：python, django, solr, django-haystack, hashtag

我在 Haystack 的经验真的是 0，但我们使用 django-haystack 进行搜索。现在搜索工作正常，但我只是在网站上添加了#hashtags，我希望搜索对带标签的单词有所不同。

我现在拥有的：

*   搜索“pizza”和“#pizza”的结果是相同的，我认为这是因为在搜索中省略了“#”作为字符。

我想要完成的事情：

*   搜索“#pizza”的结果应该只包含文本“#pizza”。

希望任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T09:57:15.873

其他人[修改了 WordDelimiterFilterFactory 和 WordDelimiterFilter 来处理 @ 和 #-characters 作为数字](http://www.johnandcailin.com/blog/cailin/tokenizing-twitter-posts-lucene)。也许这也对你有用？

# c# - 如何将准备好的带有附件的消息加载到用户的默认邮件客户端中？

> ID：15100667
> 
> 赞同：2
> 
> 时间：2013-02-26T22:30:00.883
> 
> 标签：c#, email, outlook, mapi

如何将准备好的带有附件的消息加载到用户的默认邮件客户端中？

我四处寻找答案，发现：

*   使用带有“mailto:”url 的 Process.Start() 将不起作用，因为 mailto: 不支持附件（Outlook 除外，我不能依赖 Outlook 作为默认客户端。）

*   此[Code Project MAPI 包装器](http://www.codeproject.com/Articles/17561/Programmatically-adding-attachments-to-emails-in-C)不起作用，因为它显然会阻止应用程序。

*   然后是[这个 MAPI Wrapper](http://www.vbusers.com/codecsharp/codeget.asp?ThreadID=71&PostID=1)，它显然不会阻止应用程序，但它会更改当前目录，这会破坏我们应用程序中的许多东西，其中一些在不同的线程中运行，所以我不能仅仅依靠更改回来了。

*   在尝试上述方法并发现当前目录问题后，我遇到了[这篇博](http://blogs.msdn.com/b/stephen_griffin/archive/2008/06/24/mapi-and-the-current-directory.aspx?Redirected=true)文，将问题归咎于 MAPI 存根库，

*   这将我指引[到这里](http://msdn.microsoft.com/en-us/library/ms528324%28EXCHG.10%29.aspx)，它指出 MAPI 存根库已被弃用。

这让我问：

有没有办法在 C# 应用程序中创建包含附件的电子邮件，并将其加载到用户的默认邮件客户端中，该客户端不依赖于 Outlook 客户端，在运行时不会阻止应用程序的 UI ，不会从其下方更改应用程序的当前目录，并且不依赖已弃用和即将删除的系统库？

# android - 从 GCM 获取不同的数据

> ID：15100671
> 
> 赞同：0
> 
> 时间：2013-02-26T22:30:24.830
> 
> 标签：android, eclipse, google-cloud-messaging

我每次都需要从数据库中获取不同的消息。我解释说，当数据库中有新问题时，我希望用户收到类似“New_Question”的消息。如果数据库中有新答案，我希望用户收到类似“New_Answer”的消息。这样我在收到来自 GCM 的消息时可以做不同的事情。我该怎么做？此外，我想从 GCM 中获取一个不是字符串的对象。可能吗？我该怎么做？

这是我的一些代码：
GCMIntentService 类中的我的 onMessage 函数：

```
@Override
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");
    String message = intent.getExtras().getString("price");

    displayMessage(context, message);
    // notifies user
    generateNotification(context, message);
} 
```

我在 MainActivity 中的 onReceive 函数：

```
 public void onReceive(Context context, Intent intent) {
        String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
        // Waking up mobile if it is sleeping
        WakeLocker.acquire(getApplicationContext());

        // Releasing wake lock
        WakeLocker.release();
    }
}; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:21:43.300

1.  你没有提到你在服务器端使用什么代码来发送消息，但无论如何你可以发送你想要的任何东西，或者更准确地说，你可以发送最多 4096 字节的键/值对。例如，您可以根据数据库的状态发送“问题”键或“答案”键。或者，您始终可以发送具有不同值的相同键来确定消息类型。

2.  你想得到什么类型？任何类型都可以作为字符串发送并由 Android 应用程序解析。

# knockout.js - KO.mapping + KO.validation，如何使用验证映射来验证两个属性

> ID：15100674
> 
> 赞同：2
> 
> 时间：2013-02-26T22:30:43.150
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-validation

```
 var validationMapping = {

        emailAddress: {
            create: function (options) {
                return ko.observable(options.data).extend({ required: true }).extend({email:true});
            }
        },
        emailAddressConfirm: {
            create: function (options) {
                return ko.observable(options.data).extend({ required: true }).extend({ email: true })
                .extend({equal: emailAddress});}}}; 
```

以上是我在映射模型时使用的验证映射，如下所示

```
 $.post('getaccountdata', {},
        function (data) {
            if (data != "") {
                myViewModel = ko.validatedObservable(ko.mapping.fromJS(data, validationMapping));
                ko.applyBindings(myViewModel);
            }
        }); 
```

问题是这似乎不起作用。似乎传递给“相等”验证函数的 emailAddress 对象不是视图模型中的可观察对象。指定“其他”可观察对象的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T01:25:04.833

几个月后，但无论如何;）我发现的唯一方法是在绑定之后扩展验证：

```
...
myViewModel = ko.validatedObservable(ko.mapping.fromJS(data, validationMapping));
ko.applyBindings(myViewModel);
myViewModel().emailAddress.extend({ equal: myViewModel().emailAddressConfirm }); 
```

# algorithm - 计算布尔函数密度的算法

> ID：15100676
> 
> 赞同：2
> 
> 时间：2013-02-26T22:30:48.747
> 
> 标签：algorithm, boolean, boolean-logic, boolean-expression, cad

我正在尝试编写一个程序，该程序需要计算处理布尔函数的特定值。给定一个由覆盖 F 给出的单输出布尔函数 f，假设我将函数的密度定义为函数值为 1 的所有输入向量的分数。

例如，假设我传入给定的函数 f(a, b, c)，它由覆盖 F = ab'+c' 定义。该函数有 5 个 ON-set 最小项，总共有 8 个最小项，因此其密度为 d(f) = 5/8 = 0.625。应该注意的是，立方体 ab' 覆盖了 2 个最小术语，而立方体 c' 覆盖了 4 个最小术语，但其中一个最小术语被两个立方体覆盖。

谁能想到一个好的算法来处理这个问题？我强烈怀疑它最好以递归方式表达，但我无法确定有效的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T00:12:57.187

坏消息：永远快的算法是没有希望的。

即，这个问题：

> 给定一个合取范式（和的乘积）的布尔公式，确定是否存在自由变量的赋值，使得公式产生真

是NP完全的。这意味着，如果您找到解决它的多项式时间算法，您也可以在多项式时间内解决一些世界上最困难的问题（背包、旅行商问题、哈密顿循环问题等等）。没有人真正期望这是可能的。

这个问题其实等价于这个问题：

> 给定一个析取范式（乘积之和）的布尔公式，确定其密度是否为 100%

* * *

好消息：

输入大小可能*非常*小。在三个变量中，您并不真正关心速度。在 30 个输入变量处，您仍然更有可能耗尽内存（使用某些算法）而不是运行时间过长。

算法#1：`O(2^v*i)`时间，几行代码，`v`=变量数；`i`=输入的长度。

*   如果任何子句不一致（`A & !A`），则删除它。
*   首先按大小对子句进行排序，最大（变量最少）。
*   对于全集中的每一个最小项
    *   对于输入中的每个子句
        *   对于术语中的每个文字
            *   如果 minterm 没有被字面量覆盖，则继续下一个子句
        *   minterm 包含在以下子句中：
        *   计算涵盖的最小术语，并继续下一个最小术语。
    *   minterm 没有被任何文字覆盖；继续下一个学期。
*   让`density = [#covered terms]/[#terms]`

* * *

如果你想跑得更快，你需要希望有一个好的输入。您可以尝试使用二元决策图 (BDD) 对当前编码的最小项集进行编码，并在您从输入中添加子句时尝试更新二元决策图。

二元决策图是有根有向无环图，每个节点要么是决策节点（测试单个变量，然后采用假分支或真分支）或叶节点（要么 要么`true`）`false`。例如，`XOR`可以用这个二元决策图表示：

```
 |
     A
    / \
   /   \
  B     B
 / \   / \
0   1 1   0 
```

* * *

算法 #2（延迟扩展 BDD，更复杂但对于大量变量可能更快）：

*   如果任何子句不一致（`A & !A`），则删除它。
*   首先按大小对子句进行排序，最大（变量最少）。
*   从一个空的 BDD 开始（root = false）
*   对于每个子句
    *   更新 BDD：从根目录开始。
    *   对于每个变量：
        *   如果该子句没有更多文字，请将当前节点替换为`true`（仅在您来的边缘）
            *   如果直接兄弟也是`true`，则用 替换公共父`true`节点，并对新节点重复此测试。
        *   如果当前节点是`true`
            *   继续下一个子句或递归分支，或加入同级线程。
        *   如果变量在子句中并且在当前 BDD 节点中，
            *   下降到与子句相交的孩子。
        *   如果变量在子句中但不在当前 BDD 节点中。
            *   创建一个新的 BDD 节点
            *   将两个子节点都设置为当前节点
            *   用新节点替换当前节点（仅在您来的边缘）
            *   下降到与子句相交的孩子。
        *   如果变量在 BDD 中但不在子句中
            *   依次递归地下降到两个孩子。或者，在单独的线程中并行下降到两个孩子。
        *   如果变量既不在 BDD 中也不在子句中
            *   没做什么。
*   让`density = 0/(2^variables)`（分母表示建议的整数计算比例）
*   每个叶节点都是`true`或`false`。对于 BDD 中的每条路径
    *   如果叶节点是`true`
        *   让`length`是沿路径遇到的非叶节点的数量。
        *   添加`1/(2^length)`到`density`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-12T13:08:46.753

令 f 和 g 为布尔表达式。

递归分解

```
d(f and g) = d(f)d(g|f)
d(f or g) = d(f) + d(g) - d(f and g)
for d(g|f) you do unit/expression propergation of f in g

E.g. d(x' + y | x) = d(y)     (I do not have a way to implement it for non single literals on right side of | apart from brute force)

d(g|f) can also be read as what is the density of g in the true area of f. 
```

示例 1：

```
d(ab'+c)
= d(ab') + d(c) - d(ab'c)
= d(a)d(b) + d(c) - d(a)d(b')d(c)
= 0.5*0.5 + 0.5 - 0.5*0.5*0.5
= 0.625 
```

示例 2：

```
d((a+b)(a+c))
= d(a+b)d(a+c|a+b)
= (d(a) + d(b) - d(a)*d(b))*(d(a|a+b) + d(c|a+b) - d(ac|a+b))
= 0.75*((2/3) + 0.5 - (1/3))
= 0.625 
```

可能不比蛮力好，但它是递归的。

`d(g|f)`如果`f`是立方体或文字，也更容易做到。所以下面的身份可以用来交换边：

```
d(g|f)d(f) = d(f|g)d(g) 
```

另一个使用上述标识的解析示例（用于将 args 交换到**给定**的运算符）

```
d((a+b)(a'+b))
= d(a+b)d(a'+b|a+b)
= 0.75(d(a'|a+b) + d(b|a+b) - d(a'b|a+b))
= 0.75(d(a+b|a')d(a')/d(a+b) + d(a+b|b)d(b)/d(a+b) - d(a+b|a'b)d(a'b) / d(a+b))
= 0.75(d(b)d(a') + d(1)d(b) - d(1)*d(a')*d(b))/d(a+b)
= 0.75*(0.5*0.5 + 1*0.5 - 1*0.5*0.5)/0.75
= 0.5 
```

一个有趣的模式发生在 2/3 电路中：

```
d((a+b)(b+c)(c+a))
= d(a+b)d((b+c)(c+a)|a+b)
. . . skipping many steps . . .
= d((a+b)(b+c)|c)d(c) + d((a+b)(b+c)|a)d(a) - d((a+b)(b+c)|ca)d(ca)
= d(a+b)d(c) + d(b+c)d(a) - d(1)d(c)d(a)
= 0.75*0.5 + 0.75*0.5 - 1*0.5*0.5
= 0.5 
```

还有一个技巧，为了减少分支，可以使用以下恒等式：

`d(a+b) = 1 - d(a'b')`

这基本上是用于不同目的的德摩根理论。现在，不再分支 3 种方式来处理 OR，而是只分支了一种方式。

再次显示您的示例，显示所有步骤并使用 demorgans 身份：

```
d(ab'+c')
= 1 - d((ab')'c')
= 1 - d((ab')')d(c'|(ab')')
= 1 - (1 - d(ab'))d((ab')'|c')d(c) / d((ab')')
= 1 - (1 - d(ab'))(1 - d(ab'|c'))d(c') / (1 - d(ab'))
= 1 - (1 - 0.25)(1 - d(ab'))*0.5 / (1 - 0.25)
= 1 - (1 - 0.25)(1 - 0.25)*0.5 / (1 - 0.25)
= 0.625 
```

为常见的子表达式添加缓存也应该提供速度提升。

玩了一会之后。我提出了一个很好的递归表达式，用于以合取范式表示布尔表达式的密度。

```
let f be the first CNF clause
let g be the remaining clauses
d(fg) = d(g) - d(g|f')d(f') 
```

每个递归在左侧分支中剥离一个子句并从右侧分支中剥离三个变量（对于 3CNF）。（d(f') 是常数时间，因为它是单子句）

这是最后一个表达式在 Rust 中的样子。

```
pub fn cnf_density(mut cnf: CnfFormula) -> f64 {
    if cnf.is_empty() {
        return 1.0;
    }
    // d(fg) = d(g) - d(g|f')d(f')
    let clause1 = cnf.remove(0);
    let mut cnf2 = cnf.clone();
    for lit in &clause1 {
        // unit propergation of f' in g|f'
        cnf2.assign_lit(lit.negated());
    }
    let d1 = cnf_density(cnf);
    let d2 = cnf_density(cnf2);
    d1 - d2 * 2.0_f64.powf(-(clause1.len() as f64))
} 
```

又发现了一个窍门。您可以从旧的密度开始`f=1`然后`d(f) = 1`计算新的密度，同时添加子句来构建您的 CNF 表达式：

`d(f(a+b)) = d(f) - d(f|!a!b)d(!a!b)`

如果您希望获得任何性能，您需要对其输入的任何技术进行有限的密度函数缓存。它仍然是指数级的。该`d(f(a+b)) = d(f) - d(f|!a!b)d(!a!b)`技术的伟大之处在于它为您提供了一个递减的上限。所以你可以在任何时候终止它，并且仍然告诉你密度会小于什么。如果有一个类似的技巧来增加下限，那就太好了。

Rust 的最后一招：

```
pub fn cnf_density(&mut self, cnf: CnfFormula, lvl: usize) -> f64 {
    if cnf.is_empty() {
        return 1.0;                                                                         }
    if cnf.len() == 1 && cnf[0].is_empty() {
        return 0.0;
    }
    if let Some(d) = self.cache.get(&cnf) {
        return *d;
    }                                                                                       // d(f(a+b)) = d(f) - d(f|!a!b)d(!a!b)
    let mut f = 1.0_f64;
    let mut cnf2 = CnfFormula::new();                                                       let mut idx: usize = 0;
    if self.cache.len() > 1000 {
        self.cache.clear();
    }
    for clause in &cnf {
        idx += 1;
        if lvl == 0 {
            println!("{:?}", clause);
            println!("{}/{}", idx, cnf.len());
            println!("{}", self.cache.len());
            println!("d(f) = {}", f);
        }
        let mut cnf3 = cnf2.clone();
        cnf2.push(clause.clone());
        for lit in clause {
            cnf3.assign_lit(lit.negated());
        }
        f -= self.cnf_density(cnf3,lvl+1) * 2.0_f64.powf(-(clause.len() as f64));
    }
    self.cache.insert(cnf, f);
    f
} 
```

# java - JAXB 重命名属性

> ID：15100680
> 
> 赞同：4
> 
> 时间：2013-02-26T22:31:00.157
> 
> 标签：java, attributes, jaxb, rename

我有一个名字很长的类，它使用 JAXB 转换为 XML。使用`@XmlRootElement(name="nicername")`，我可以将外部 XML 标记重命名为`<nicername>`.

如何将具有丑陋名称的单个属性也重命名为一些好听的名称？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T02:42:30.890

您可以使用`@XmlAttribute`和`@XmlElement`注释来更改 XML 名称。如果您对字段进行注释，请务必`@XmlAccessorType(XmlAccessType.FIELD)`在类上使用注释：

```
@XmlRootElement(name="nice-name")
@XmlAccessorType(XmlAccessType.FIELD)
public class UglyName {

    @XmlElement(name="nice-element-name")
    private String uglyElementName;

    @XmlAttribute(name="nice-attribute-name")
    private String uglyAttributeName;

} 
```

或者您可以注释属性：

```
@XmlRootElement(name="nice-name")
public class UglyName {

    private String uglyElementName;
    private String uglyAttributeName;

    @XmlElement(name="nice-element-name")
    public String getUglyElementName() {
         return uglyElementName;
    }

    public void setUglyElementName(String name) {
         this.uglyElementNamne = name;
    }

    @XmlAttribute(name="nice-attribute-name")
    public String getUglyAttributeName() {
         return uglyAttributeName;
    }

    public void setUglyAttributeName(String name) {
         this.uglyAttributeNamne = name;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:47:50.710

@XmlAttribute 和@XmlElement 注释都可以使用与@XmlRootElement 注释相同的语法按名称重新映射。因此，只需将相关注释附加到您需要重新映射的每个单独的字段/属性，并为“名称”提供一个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T22:34:18.607

您可以使用以下方法为对象属性定义替代名称：

*   [`XMLAttribute`](http://docs.oracle.com/javaee/6/api/javax/xml/bind/annotation/XmlAttribute.html)属性注释
*   [`XMLElement`](http://docs.oracle.com/javaee/6/api/javax/xml/bind/annotation/XmlElement.html)元素注释

# php - 在页面加载时从 PHP 调用 javascript 函数

> ID：15100681
> 
> 赞同：0
> 
> 时间：2013-02-26T22:31:10.537
> 
> 标签：php, javascript, function, undefined

我正在尝试从 PHP 循环中调用 javascript 函数。该调用从 PHP 循环传递一个 id，然后应该根据它是否在 cookie 中找到该 id 来设置一个类。目前我只是得到：

> ReferenceError: 未定义 getFaveClass()

我的代码如下 -

```
?>
<script>getFaveClass(<?php echo $row->id; ?>);</script>
<?php 
```

我有什么遗漏或更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:41:44.713

您所写的内容没有任何问题（尽管我个人会使用它`json_encode`来确保正确处理该值）。

所有错误意味着您尚未定义该`getFaveClass`功能。如果它在外部`.js`文件中，请确保包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:41:52.987

如果输出 id，则执行脚本时数据应该在页面上。将 PHP 作为初始数据回显到 JavaScript 调用是可以的。我建议您检查并查看实际输出的内容，而不是您的 PHP 源代码，以便调试 JS 错误。

您的问题可能是如果`$row->id == ""`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:46:58.217

您是否声明了函数`getFaveClass()`并且在`<?php echo $row->id; ?>`

请检查您的函数名称是否准确，包括您调用它的情况。

只需检查它是否应该运行。因为我看不出您共享的代码有什么问题。

# c# - 将除法四舍五入为整数的正确方法是什么？

> ID：15100685
> 
> 赞同：4
> 
> 时间：2013-02-26T22:31:15.300
> 
> 标签：c#, math

我正在划分 2 个整数并希望得到一个整数。我想要正确的`Math.Round()`方法，所以当我除法时，无论如何它总是四舍五入到下一个整数。这里有一堆例子，下面有期望。

```
int result = (6/4); // = 2
int result = (3/4);  // = 1
int result = (1/4);  // = 1
int result = (8/4);  // = 2
int result = (9/4);  // = 3 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T22:37:13.997

由于您的示例中的所有整数都是正数，因此我假设您对一个或两个操作数为负数或零的情况不感兴趣。

`Math.Round`适用于浮点数。这里没有必要。

两个整数相除得到整数结果。它总是四舍五入。你想要这样的东西：

```
int Divide(int numerator, int denominator) {
    return (numerator + denominator - 1) / denominator;
} 
```

例如，for `1/4`, we get`(1 + 4 - 1) / 4 = 4 / 4 = 1`和 for `8/4`we get `(8 + 4 - 1) / 4 = 11 / 4 = 2`。

这里溢出的可能性很小，所以如果分子总是大于零，最好使用：

```
int Divide(int numerator, int denominator) {
    return 1 + (numerator - 1) / denominator;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T22:34:07.153

您需要以浮点/双精度执行除法并使用[Math.Ceiling](http://msdn.microsoft.com/en-us/library/zx4t0t48.aspx)：

> Math.Ceiling... 返回大于或等于指定双精度浮点数的最小整数值。

样本：

```
 int result = (int)Math.Ceiling(6/4.0);
 result = (int)Math.Ceiling((double)3/4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:32:33.580

这些整数之一应该是 a `double`：

```
double result = (6d/4); // 1.5  
int rounded = (int)Math.Round(result, MidpointRounding.AwayFromZero); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:34:43.147

这绝对不是你要找的方法......

```
int mod = 9 % 4;
int result = (9 - mod) / 4) + (mod > 0 ? 1 : 0); 
```

不需要 Math 类的任何转换或使用。

# php - 在 JavaScript 函数中传递新行

> ID：15100689
> 
> 赞同：0
> 
> 时间：2013-02-26T22:31:28.780
> 
> 标签：php, html, string, escaping

我有一个 JavaScript 函数，当用户将鼠标悬停在某物上时，它会填充并显示一个 div。我发现如果我传递给函数的输入包含一个空行，它将不起作用。有没有一种简单的方法可以在 PHP 中对我的变量进行编码，以便它可以安全地传递？

Javascript：

```
function showPlay(id, info)
{
    var playID = "my_play_div" + id;
    var snippetID = "post_snippet" + id;

    document.getElementById(playID).style.visibility="visible";
    document.getElementById(snippetID).innerHTML = info;
} 
```

我已经尝试`$info = htmlentities($info);`在我的内容上使用，`$info = mysql_real_escape_string($info);`但这些都没有摆脱空行，只是引号（我也需要摆脱）。

有人有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:33:47.523

我认为你需要[json_encode](http://php.net/manual/en/function.json-encode.php)，`echo json_encode($info);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:35:45.893

php`trim`函数将满足您的需求：请参阅[http://php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

# android - 我的列表视图不起作用

> ID：15100690
> 
> 赞同：1
> 
> 时间：2013-02-26T22:31:30.110
> 
> 标签：android, listview

我的脚本不工作。我的目标是制作一个包含一些可点击项目的列表视图。但应用程序不断崩溃。如何解决这个问题？我是否正确使用了适配器？

我使用标题、副标题和图像作为列表视图中的项目。

```
package com.example.whs;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class MenuAdapter extends BaseAdapter{
    // Define variables
    ArrayList<HashMap<String, String>> data;
    Activity activity;
    private static LayoutInflater inflater=null;

    public MenuAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data = d;
    }

    @Override
    public int getCount() {
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        TextView title = (TextView)vi.findViewById(R.id.title); // title
        TextView subtitle = (TextView)vi.findViewById(R.id.subtitle); // subtitle

    HashMap<String, String> item = new HashMap<String, String>();
        item = data.get(position);

        // Setting all values in listview
        title.setText(item.get(Index.TITLE));
        subtitle.setText(item.get(Index.SUBTITLE));
        return vi;
    }

} 
```

这是我的索引类：

```
package com.example.whs;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.ListView;

public class Index extends Activity {

    public static final Object TITLE = "title";
    public static final Object SUBTITLE = "subtitle";
    public static final Object THUMBNAIL = "thumbnail";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_index);

        buildMenu();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.index, menu);
        return true;
    }

    //Builds the menu for listview
    public void buildMenu(){
        ArrayList<HashMap<String, String>> menu = new ArrayList<HashMap<String, String>>();
        //Arrays for info
        String[] menuTitleArray = {"Gallerij"}; 
        String[] menuSubtitleArray = {"Bekijk foto's en geef reacties"};
        String[] menuThumbnailArray = {"gallery"};
        for(int i=0; i < menuTitleArray.length; i++){
            HashMap<String, String> item = new HashMap<String, String>();
            item.put((String) TITLE, menuTitleArray[i]);
            item.put((String) SUBTITLE, menuSubtitleArray[i]);
            item.put((String) THUMBNAIL, menuThumbnailArray[i]);
            menu.add(item);
        }
        MenuAdapter adapter = new MenuAdapter(this, menu);
        ListView list = (ListView)findViewById(R.id.list);
        list.setAdapter(adapter);   
    }
} 
```

日志文件： http: [//pastebin.com/kzeVMLuk](http://pastebin.com/kzeVMLuk)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:34:43.607

一个问题：

`private static LayoutInflater inflater=null,`

它永远不会在您的代码中实例化：

在您的构造函数中执行以下操作：

```
private LayoutInflater inflater=null;
public MenuAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data = d;
    inflater = LayoutInflater.from (a);
} 
```

如您所见，我还取出了`static`修饰符。对于与上下文相关的任何内容，我建议不要使用`static`修饰符，特别是因为它绑定到一个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:11:47.383

在您使用`.put`并插入字符串之后。要使它们可点击，请尝试使用`onItemClickListener`. 我会帮你的。

# android - MonoDroid 上的 MonoGame - 共享运行时初始化错误无法加载库“libmonosgen-2.0.so”

> ID：15100696
> 
> 赞同：2
> 
> 时间：2013-02-26T22:31:56.523
> 
> 标签：android, mono, xamarin.android, monodevelop, monogame

我有一个简单的 Android MonoGame 项目，使用 MonoDevelop 构建。它是 XNA 示例游戏的一个端口，它在模拟器中的一台设备上运行良好，但在另一台设备上部署它时出现此错误：

```
shared runtime initialization error: Cannot load library: load_library(linker.cpp:745):
library "/data/data/Mono.Android.DebugRuntime/lib/libmonosgen-2.0.so" not found 
```

该错误发生在设备上出现初始屏幕之后。

代码不会改变，它可以在一台设备上运行，但不能在另一台设备上运行。设备之间的主要区别在于屏幕分辨率。320x480 分辨率的设备很好，但 480x800 分辨率的设备会出错。这两种设备在 AVD 中都定义为面向 Android 4.2 API 级别 17，并使用 Intel Atom x86 CPU/ABI。我为 480x800 设备提供了 AVD 允许的尽可能多的内存（768 MB - 高于此值并且它无法启动）。

我知道其他人之前[报告过类似的错误](https://stackoverflow.com/questions/9575881/android-mono-data-data-mono-android-debugruntime-lib-libmonosgen-2-0-so-not-f)，我已经尝试了那里的建议（关闭“快速部署”并重新部署，增加设备上的可用空间）但得到了同样的错误。它始终适用于 320x480，但从不适用于更大屏幕的设备。

最后一点——我使用的是免费版的 MonoDroid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:50:34.873

[万一有人遇到同样的错误， Xamarin 网站上](http://forums.xamarin.com/discussion/comment/6513)有更多详细的解决方案。简而言之，当我卸载调试运行时然后重新安装我的游戏时，错误就会消失：

```
$ adb uninstall Mono.Android.DebugRuntime
$ MSBuild /t:Install YourProject.csproj 
```

（或者只是从 IDE 安装游戏）

# java - 在 EclipseLink 中为每个连接设置数据库会话级别参数？

> ID：15100698
> 
> 赞同：3
> 
> 时间：2013-02-26T22:32:03.340
> 
> 标签：java, eclipselink

我想为来自 Eclipselink 的每个会话设置一个数据库会话变量。我要执行的 SQL 类似于：

```
begin DBMS_SESSION.SET_IDENTIFIER('MyApplicationName'); end; 
```

如果我尝试创建一个将执行命令的 SessionEvent 侦听器，我似乎陷入了无限递归。

```
myServer.getEventManager().addListener(new SessionEventAdapter() {
    public void postConnect(SessionEvent evt) {
        evt.getSession().executeNonSelectingCall(new SQLCall("begin DBMS_SESSION.SET_IDENTIFIER('MyApplicationName'); end;"));
    }
}); 
```

我是在使用事件侦听器以错误的方式解决这个问题，还是需要以特殊方式执行 SQL 命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T15:23:19.440

您正在对会话执行查询，而它仍在为其他进程获取连接。在您的事件完成之前，触发 postConnect 事件的连接对会话不可用 - 这意味着会话上的任何查询都将被迫获得不同的连接。

您需要使用 SessionEvent 中的访问器来获取连接并使用它来直接执行 JDBC 语句。就像是

```
 public void postConnect(SessionEvent evt) {
    Connection connection = ((Accessor)event.getResult()).getConnection()
    Statement statement = connection.createStatement();
    statement.execute("begin DBMS_SESSION.SET_IDENTIFIER('MyApplicationName'); end;");
  } 
```

# javascript - 我的网站使用 Twitter Bootstrap 并在 IE 10 上崩溃 - 动态图像

> ID：15100705
> 
> 赞同：-1
> 
> 时间：2013-02-26T22:32:34.477
> 
> 标签：javascript, css, twitter-bootstrap, internet-explorer-10

是的; 这就是我所拥有的所有信息；所以我的网站似乎只在 IE10 中崩溃（它完全阻止了浏览器），我找不到原因；它在 Chrome 和 Firefox 上运行良好。该网站是“响应式”的。

我希望我有更多信息，但实际上这就是我所拥有的全部信息，IE10 在崩溃之前不会在控制台中显示任何内容。

这是[“主”JS 文件的链接](http://programando.la/js/app.js?nocahe=1)。

**编辑：**修复了问题；我正在创建一个新`<img>`标签，并且每次执行函数时都尝试在此类图像上使用“加载”事件，而 IE10 似乎不喜欢这样；显然其他浏览器会立即检查图像是否已经加载，但 IE10 似乎是异步执行的，导致某种堆栈溢出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:47:29.447

布埃纳斯...

在我的 IE10 中，该网站也崩溃了。但我设法启动了 DevTools 以及脚本控制台和断点。

起初它在这里破裂：

```
return typeof v=="undefined"||!!e&&.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments) 
```

（但这是一个很大的代码块，我不明白）然后在这里：

```
(function loop(loading) 
{
  if (waitForHold) 
  {
    setTimeout(loop, 5000);
    return;
  }
... 
```

在 app.js - 也许这是一个仅在 IE10 中出现的漏洞。

# linux - 构建与导出符号共享目标文件的树外 Linux 内核模块

> ID：15100707
> 
> 赞同：5
> 
> 时间：2013-02-26T22:32:42.073
> 
> 标签：linux, makefile, kbuild

想象一个项目，需要构建两个 linux 内核模块，源码树布局如下：

```
modules/
|--common/
|  `--common_data.c
|--mod1/
|  `--mod1_main.c
`--mod2/
   `--mod2_main.c 
```

common_data.o 目标文件需要包含在两个模块中。所以这个项目的 Kbuild 文件看起来像这样：

```
obj-m  := mod1.o mod2.o
mod1-y := mod1/mod1_main.o common/common_data.o
mod2-y := mod2/mod2_main.o common/common_data.o 
```

如果 common_data.c 文件中没有导出符号（即 EXPORT_SYMBOL），它构建得很好。但是，如果有一些导出的符号（例如`some_func`），那么 MODPOST 将产生如下警告：

```
WARNING: mod2: 'some_func' exported twice. Previous export was in mod1.ko 
```

这是因为两个模块共享一个 Module.symvers 文件。可以在 mod1/ 和 mod2/ 目录中创建两个单独的 Kbuild 文件以避免出现此警告，因为这样就会有两个单独的 Module.symvers 文件。但这会导致另一个问题 - commond_data.o 对象将被构建两次 - 第一次是在编译 mod1.ko 时，第二次是在编译 mod2.ko 时。

有没有办法在使用单个 Kbuild 文件时抑制此警告，或者在使用两个单独的 Kbuild 文件时防止第二次重建 common_data.o 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:01:48.407

在对 Kbuild 系统进行了一些修改后，我得出结论，处理这种情况的最直接方法是从`make`外部 makefile 的输出中过滤掉警告消息：

```
$(MAKE) -C $(KDIR) M=$$PWD 2>&1 \
| grep -v '^WARNING:.*exported twice\. Previous export was in' 
```

或不牺牲 STDERR 并将其压缩为 STDOUT，但它需要`bash`：

```
bash -c "$(MAKE) -C $(KDIR) M=$$PWD 2> >( grep -v '^WARNING:.*exported twice\. Previous export was in' )" 
```

# javascript - Javascript在外部文件中不起作用

> ID：15100708
> 
> 赞同：1
> 
> 时间：2013-02-26T22:32:44.757
> 
> 标签：javascript

我正在尝试一些 JS 基础知识进行小测试，并且在尝试将 Javascript 代码放在 HTML 代码之外时遇到了问题。

的HTML：

```
<body id="index" class="home">
<table style="width:100%">
<thead>
<tr>
    <th>Region</th>
    <th>Population 2012</th>
    <th>Population 2035</th>
    <th>Annual Growth</th>
    <th>Daily Growth</th>
    <th>Incr./Sec</th>
    <th>Live Pop</th>
    <th>GDP p/c annual</th>
    <th>GDP p/c month</th>
    <th>Incr./Sec</th>
    <th>GDP 2012</th>
    <th>GDP 2013</th>
    <th>Area</th>
    <th>Land</th>
    <th>Water</th>
    <th>Density</th>
</tr>
</thead>
<tr>
<th>EU</th>
<td>503 492 041</td>
<td>520 654 000</td>
<td>746 172</td>
<td>2 044</td>
<td>0.02366</td>
<td><label id="populationEU">503604514.99676</label></td>
<td>31 959.42 €&lt;/td>
<td>2 663.29 €&lt;/td>
<td><label id="GDPEUIncrement">0.00101</label> €&lt;/td>
<td>16 091 315 618 944.38 €&lt;/td>
<td><label id="GDPEU">2 425 518 867 456.69</label> €&lt;/td>
<td>4 324 782.00 km<sup>2</sup></td>
<td>4 191 578.71 km<sup>2</sup></td>
<td>133 203.29 km<sup>2</sup></td>
<td>116.42 hab/ km<sup>2</sup></td>
</tr>
<h1 id="test"></h1>
<hr />
<tr>
<th>Asia</th>
<td>4 227 067 000</td>
<td>6 534 959 649</td>
<td>84 541 340</td>
<td>231 620</td>
<td><label id="populationAsiaIncrement">2.6808</label></td>
<td><label id="populationAsia">4239810309.5035</label></td>
<td>4 629.42 €&lt;/td>
<td>385.79 €&lt;/td>
<td><label id="GDPAsiaIncrement">0.00016</label> €&lt;/td>
<td>19 568 885 419 408.00 €&lt;/td>
<td><label id="GDPAsia">3 120 792 273 016.10</label> €&lt;/td>
<td>44 579 000.00 km<sup>2</sup></td>
<td>43 286 209.00 km<sup>2</sup></td>
<td>1 292 791.00 km<sup>2</sup></td>
<td>94.82 hab/ km<sup>2</sup></td>
</tr>
</table>
<script type="text/javascript" src="js/counters.js"></script>
</body> 
```

和 JS：

```
var test = document.getElementById("test"); // Test placeholder

var millennium =new Date(2013, 0, 1); //Month is 0-11 in JavaScript
var today=new Date();
var one_day=60*60*24; //Get 1 day in seconds

//Calculate difference btw the two dates, and convert to days
var secondsSinceNewYear = Math.ceil(today.getTime()-millennium.getTime());

var populationEU = document.getElementById("populationEU");
var totalPopEU = 0;
var incrementEU = 1/2 ;

setInterval(popGrowthEU, 500);

function popGrowthEU()
{
totalPopEU = totalPopEU+incrementEU;
populationEU.innerHTML = addCommas(Math.round(totalPopEU*100)/100);
}

var GDPEU = document.getElementById("GDPEU");
var totalGDPEU = 0;
var incrementGDPEU = 1*totalPopEU/10;

setInterval(GDPGrowthEU, 100);

    function GDPGrowthEU()
    {
        totalGDPEU = totalGDPEU+incrementGDPEU;
        GDPEU.innerHTML = addCommas(Math.round(totalGDPEU*100)/100);
    }

var populationAsia = document.getElementById("populationAsia");
var incrementPopAsia = parseFloat(document.getElementById("populationAsiaIncrement").innerHTML);
var totalPopAsia = populationAsia.innerHTML+(incrementPopAsia*secondsSinceNewYear);
var incrementPopAsia = incrementPopAsia/2;
setInterval(popGrowthAsia, 500);

function popGrowthAsia()
    {
        totalPopAsia = totalPopAsia+incrementPopAsia;
        populationAsia.innerHTML = addCommas(Math.round(totalPopAsia*100)/100);
    }

var GDPAsia = document.getElementById("GDPAsia");
var incrementGDPAsia = document.getElementById("GDPAsiaIncrement").innerHTML;
var totalGDPAsia = incrementGDPAsia*secondsSinceNewYear*totalPopAsia;
var incrementGDPAsia = incrementGDPAsia*totalPopAsia/10;

setInterval(GDPGrowthAsia, 100);

function GDPGrowthAsia()
{
totalGDPAsia = totalGDPAsia+incrementGDPAsia;
GDPAsia.innerHTML = addCommas(Math.round(totalGDPAsia*100)/100);
}

function addCommas(nStr) {
nStr += '';
var x = nStr.split('.');
var x1 = x[0];
var x2 = x.length > 1 ? '.' + x[1] : '';
var rgx = /(\d+)(\d{3})/;
while (rgx.test(x1)) {
    x1 = x1.replace(rgx, '$1' + ' ' + '$2');
}
return x1 + x2;
} 
```

[http://jsfiddle.net/9GTFS/](http://jsfiddle.net/9GTFS/)

我有一些数据，现在它是硬编码的初始数据，尽管我尝试使用 JS 在特定时间间隔内更新某些字段（带有“标签”标签和 id 的字段）。当我将 JS 代码放在 HTML 页面中时，它工作得非常好，但是当我把它拿出来放在一个单独的文件中时，它就不起作用了。实际上，我设法弄清楚了这条线

`var incrementPopAsia = parseFloat(document.getElementById("populationAsiaIncrement").innerHTML);`

发现带有该信息的标签（id 'populationAsiaIncrement'）返回“未定义”状态并且我被困在那里的问题，因为我认为一切都是正确的。什么可能导致此问题？我认为这不是 DOM 问题，因为 JS 是在页面的最后加载的，所以所有代码都已加载（以及 javascript 需要的所有 DOM 元素），事实上，失败的元素（标签id="populationAsiaIncrement") 实际存在。

最终显示的具体问题是`document.getElementById("populationAsiaIncrement").innerHTML`由于某种原因没有分配给变量。如果我只是在 Firebug 中执行它，它会显示我的预期值，但是当我尝试将它分配给一个变量时，它会得到“未定义”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:35:19.077

将`<script>`用于导入 JavaScript 的标记放在 . 的**末尾**而`<body>`不是`<head>`.

导入的脚本在浏览器获取它们后立即进行评估，同步进行。如果您将脚本放入其中`<head>`并尝试查找 DOM 元素，则它们将不存在，因为尚未解析文档的正文。通过将脚本放在最后，您可以避免该问题。

*编辑*- 在您的 jsfiddle 中，代码有效，因为该站点默认将您的 JavaScript 代码包装在一个函数中，该函数设置为页面的“加载”处理程序。直到页面加载后它才会运行。这也是您的另一种选择，但您必须自己构建代码。

# dita - 在 DITA 中使用 prodname 元数据？

> ID：15100713
> 
> 赞同：4
> 
> 时间：2013-02-26T22:33:06.847
> 
> 标签：dita

DITA 元数据中 prodinfo 元素内的元数据元素的预期用途是什么？

每个 prodinfo（可以是多个）只有一个 prodname，然后在里面可以有组件、品牌、系列等。

prodinfo 本身似乎旨在表明它对特定产品的适用性，并且您可以有多个表明它适用于多种产品。

但是在 prodinfo 中，您有组件、品牌、系列等，在我看来，这似乎是通用元数据 - 即表示该主题适用于更广泛主题的元数据。但如果它在特定的 prodinfo 元素内，则没有任何意义。例如，如果我将 component 解释为表明主题涉及产品的特定组件，例如引擎，那么它可能被用来找到可以重用于多个不同产品的主题，所有这些都以类似的方式描述引擎组件。

例子：

```
 <metadata>
        <prodinfo>
            <prodname>SuperMachine</prodname>
            <vrmlist>
                <vrm version="1.0"/>
            </vrmlist>
            <component>power pack</component>
            <component>engine</component>
            <brand>ACME</brand>
            <series>Z32</series>
        </prodinfo>
    </metadata> 
```

在这种情况下，我认为组件元数据不应附加到特定产品。那么这些部分打算如何在 DITA 元数据中使用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:18:06.817

关于这个问题的一个想法是依靠地图来定义特定上下文的元数据。然后，您可以在主题中使用 @conkeyref 从地图中提取，以便在输出中生成您在该点描述的正确结构的正确信息。这样您就不会在单个主题中使用多个元素来显示该主题的适用性。

在 keydef 映射中，您甚至可以创建所需的所有关联元数据并过滤掉不适用的键，以便将正确的元数据应用于主题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T08:16:22.997

就我们的目的而言，描述产品元数据的 prodinfo 方式是有效的。我们的情况如下：我们有一个软件产品（服务器应用程序），它以我们自己的品牌名称销售，但也以不同品牌的 OEM 模式销售。

那么我们接下来要做的是：

```
<metadata>
    <prodinfo>
        <prodname>OurBigServerSoftware</prodname>
        <vrmlist>
            <vrm version="10"/>
        </vrmlist>
        <component>PDF rendering engine</component>
        <brand>OEM Partner 1</brand>
    </prodinfo>
</metadata> 
```

这允许我们将主题标记为特定于单个 OEM 合作伙伴，但也可以过滤产品名称本身（因为 OEM 合作伙伴的捆绑解决方案通常由产品组合组成）。

我想这只是说有一种情况确实有意义:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T01:52:53.803

我们使用地图文件中的 prodname 来确定要在转换场景中使用的 PDF 模板。每个产品都有自己的外观和感觉，prodname 值决定使用哪种格式。我们使用品牌、系列等（也在地图文件中指定）作为值来生成 PDF 的第一页。

不确定这是否是最好的方法，但它对我们来说效果很好。

# c++ - 模板链接列表：没有可用的成员错误

> ID：15100717
> 
> 赞同：-1
> 
> 时间：2013-02-26T22:33:21.543
> 
> 标签：c++, visual-studio-2010, templates, linked-list

请看下面的代码

**链表.h**

```
template <typename T>

class LinkedList
{
public:
    T *first;

    LinkedList()
    {
        first = 0;
    }
    ~LinkedList(){}

    T *Delete()
    {
    }

    T *Delete(const int key)
    {
    }

    void Display()
    {
    }

    T *Find(const int key)
    {
    }

    void Insert(T* newLink)
    {
        //newLink->next = first;
        //first = newLink;
    }

    bool IsEmpty()
    {
        return (first==0);
    }
}; 
```

**武器.h**

```
#pragma once
#include "GameObject.h"
#include "Stack.h"
#include "Round.h"

class Weapon :
    public GameObject
{
public:
    Weapon(int);
    ~Weapon(void);

    Stack <Round>   stack1;
    Weapon *next;

    void Display();
}; 
```

**武器.cpp**

```
#include "Weapon.h"
#include <iostream>

using namespace std;

Weapon::Weapon(int size) : stack1(size)
{

}

Weapon::~Weapon(void)
{
} 
```

在这里，Weapon 表示链接列表中的链接。`Next`是指向列表中下一个武器的指针。但是我怎样才能访问它？我对链接列表方法的尝试`Insert()`没有奏效。我评论过他们。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:19:37.703

```
 void Insert(T* newLink)
    {
        //newLink->next = first;
        //first = newLink;
    } 
```

不会“工作”，因为`T`是模板类型。它可能包含也可能不包含“下一个”元素。这是使用模板的错误方式。

`T`应该是`LinkedList`.. 而不是`LinkedList`本身持有的数据类型。

```
#include <iostream>
using namespace std;

template <typename T>
class LinkedList 
{
  struct Node {
    T data;
    struct Node *next;
  };

  Node *head,*tail;

  void init(T& data)
  {
    if(head == NULL){
      head = new Node;
      head->data = data;
      head->next = NULL;
      tail = head;
    }
  }
public:
  LinkedList()
  {
    head = NULL;
    tail = NULL;
  }
  LinkedList(T& data)
  {
    head = NULL;
    tail = NULL;
    init(data);
  }

  ~LinkedList()
  {
    deleteLinkedList(head);
  }

  bool IsEmpty()
  {
    if(head == NULL) return true;
    return false;
  }

  void Display()
  {
    for(Node *h = head; h != NULL; h=h->next){
      cout << h->data;
    }
  }

  void Insert(T data)
  {
    if(this->IsEmpty()){
      init(data);
      return;
    }
    Node *n = new Node;
    n->data = data;
    n->next = NULL;
    tail->next = n;
    tail = n;
  }

  void deleteLinkedList(Node *hd)
  {
    if(hd->next == tail){
      delete tail;
      tail = hd;
      return;
    }
    deleteLinkedList(hd->next); 
  }
};

int main(int argc, char *argv[])
{
  LinkedList<int> list;
  list.Insert(10);
  list.Insert(20);
  list.Insert(30);
  list.Display();
  return 0;
} 
```

# css - 文本跨浏览器问题

> ID：15100720
> 
> 赞同：1
> 
> 时间：2013-02-26T22:33:26.167
> 
> 标签：css, text

我已经开始创建一个新网站，这一次我真的想确保解决跨浏览器问题，因为我认为这对我自己的开发技能非常重要。

在 Chrome 和 Firefox 中，我设置样式的文本显示为我期望的样式。在 IE 中情况并非如此。事实上，在 IE 中出现的字体和我在这里写的字体并没有太大的不同。

下面是我的css中的代码..

```
h.title{
font-family: Impact, Haettenschweiler, "Franklin Gothic Bold", Charcoal, "Helvetica Inserat", "Bitstream Vera Sans Bold", "Arial Black", sans serif;
color:#060;
font-size:30px;
} 
```

下面是html

```
 <h class="title">Contact</h> 
```

在 Chrome 和 Firefox 中查看..

![在铬中查看](../Images/c19f8043851db8bb0238cc66b9bc27e2.png)

在 IE 中查看

![在 IE 中查看](../Images/0c8fbec2ddedc858356ec6f443533813.png)

任何帮助/解释将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:40:17.687

IE 可能不支持您尝试在 IE 中使用的许多字体。使用@font-face（Google 将为您提供大量教程的链接），并阅读[此问题](https://stackoverflow.com/questions/1753838/internet-explorer-font-face-is-failing)的答案以获得在 IE 中使用网络字体的好建议和工具。

# acl - 使用 parse.com 将用户分组

> ID：15100733
> 
> 赞同：0
> 
> 时间：2013-02-26T22:34:20.497
> 
> 标签：acl, parse-platform

我正在为我的下一个项目使用 Parse 进行调查，但其中一个要求是在 SaaS 风格的应用程序中按帐户对用户进行分组。因此，一家公司注册了一个帐户，然后为其所有员工创建用户，然后他们基本上共享所有内容。

我仍在思考 Parse 的做事方式，但我找不到如何做到这一点的示例。似乎 ACL 是要走的路，但我不知道究竟是怎么回事。

有没有使用 Parse 的这种架构的例子？我什至可以从这里到达那里吗？

# python - 检查二维列表中的对角线（Python）

> ID：15100735
> 
> 赞同：3
> 
> 时间：2013-02-26T22:34:31.157
> 
> 标签：python, 2d

最初的问题：对于给定的 3x3 井字棋棋盘，检查是否有玩家获胜。

到目前为止，我提出的最简单的解决方案是旋转矩阵并对每一行求和：

```
board
[[0, 1, 2], [3, 4, 5], [6, 7, 8]]

pr(board)
0 1 2
3 4 5
6 7 8

pr(zip(*board))
0 3 6
1 4 7
2 5 8 
```

上面的 0..9 数字只是为了显示棋盘上的位置，通常它们会为玩家 1 填充 1，为玩家 2 填充 -1，为未填充位置填充 0。逐行进行，如果总和为 3 或 -3，则为获胜块。

但是，不检查对角线。有没有办法以优雅+高性能的方式从这样的矩阵中提取对角线？我的意思不是“手动”使用琐碎的索引（0、1、2），而是获取 nxn 矩阵的对角线。

PS pr 只是打印二维列表的辅助函数：

```
def pr(x):
    for row in x:
        print ' '.join(map(str, row)) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T22:40:15.300

你可以得到一个对角线：

```
[r[i] for i, r in enumerate(board)]
# [0, 4, 8] 
```

和对角线的对角线：

```
[r[-i-1] for i, r in enumerate(board)]
# [2, 4, 6] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T22:46:57.963

用魔方给你的游戏领域编号

```
2|9|4
7|5|3
6|1|8 
```

现在在三步之后总结并检查总和是否为 15 --> 获胜者。您必须为每个玩家检查这一点。当然你必须在第 4 步和第 5 步后重新检查（仅限开始游戏的玩家）

这就是我在我的第一个 Java 类中解决这个问题的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T22:39:57.037

可能您需要的是`numpy`，请参阅[在 Python 中获取矩阵/列表列表中的所有对角线](https://stackoverflow.com/questions/6313308/get-all-the-diagonals-in-a-matrix-list-of-lists-in-python)。也许你可以使用它，并像你一样翻转它以获得其他解决方案。

```
if sum(board[i][i] for i in (0, 1, 2)) in (-3, 3):
    true 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T00:02:14.857

方板上的对角线位于索引相等的位置，因此对于 3x3 板，它们是 `board[0][0]`、`board[1][1]`和`board[2][2]`或两者之和为板尺寸 1（在这种情况下为 3 个位置）：例如`board[0][2]`、`board[1][1]`和`board[2][0]`--注意这`board[1][1]`两个集合中都包含，因为它应该是。这些事实使得编写 Python 代码来计算它们变得相当容易：

```
board = [[0, 1, 2], [3, 4, 5], [6, 7, 8]]
BOARD_SIZE = len(board)

diags1 = [board[i][i] for i in xrange(BOARD_SIZE)]
diags2 = [board[i][BOARD_SIZE-1-i] for i in xrange(BOARD_SIZE)]

print diags1
print diags2 
```

输出：

```
[0, 4, 8]
[2, 4, 6] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T22:40:19.923

这将为您提供一个列表，其中包含一个方向的对角线元素（从左上到右下）：

```
[board[i][i] for i in range(len(board))] 
```

这将对相反的方向执行相同的操作：

```
[board[i][len(board)-i-1] for i in range(len(board))] 
```

# perl - 尝试在 BioPerl 中对系统发育树进行自定义排序会导致“未定义值”或“未授权参考”错误

> ID：15100736
> 
> 赞同：0
> 
> 时间：2013-02-26T22:34:34.073
> 
> 标签：perl, sorting, namespaces, bioperl

我在 BioPerl 中加载了一个系统发育树。我想在打印出树时使用自定义排序函数（下面的“$depth_sort”）对节点进行垂直排序。然而，下面使用的记录方法以读取树的相同顺序写出树，而没有实际排序：

```
use strict;
use Bio::TreeIO;

my $input = new Bio::TreeIO(-file=>"input.tree", -format=>'newick');
my $tree = $input->next_tree;

my $depth_sort = sub { $a->depth <=> $b->depth };

#this is the way it is supposed to work:
my $out = new Bio::TreeIO(
     -file     => ">sorted.tree", 
     -format   => 'newick', 
     -order_by => $depth_sort
);
$out->write_tree($tree); 
```

相反，我可以手动遍历树以查看发生了什么。如果我在本地进行自己的排序，它会按预期工作：

```
my $rnode = $tree->get_root_node;
&printNode($rnode);

sub printNode {
    my $thisNode = shift;

    #print the node identity and depth, just to keep track:
    print "this is " . $thisNode->internal_id . 
          " with depth " . $thisNode->depth . "\n";

    if (! $thisNode->is_Leaf) {
        my @children = sort $depth_sort $thisNode->each_Descendent();
        for my $otherNode (@children) { &printNode($otherNode); }
    }
} 
```

但是，如果我将自定义排序传递给 each_Descendent（上面的 write 调用应该采用的方式）：

```
my @children = $thisNode->each_Descendent($depth_sort); 
```

然后它随着消息而死：

> 无法在 treeFlipper.pl 第 7 行第 1 行的未定义值上调用方法“深度”。

我在这里找到了另一个我认为让我走上正轨的线程，但我还没有解决它：[Perl 排序；干净地处理跨命名空间的 $a、$b 包全局变量](https://stackoverflow.com/questions/3826978/perl-sorting-dealing-with-a-b-package-globals-across-namespaces-cleanly)

在第一个答案中切换到原型方法：

```
my $depth_sort = sub ($$) { 
    my ($a1,$b1) = @_;
    return ($a1->depth <=> $b1->depth) }; 
```

给我：

> 无法在 treeFlipper.pl 第 9 行第 1 行的 unblessed 引用上调用方法“深度”。

但是，如果我检查 ref 类型，那似乎是正确的：

```
print ref($a1) . "\n"; 
```

给

```
Bio::Tree::Node 
```

当我尝试强制祝福参考时（这可能是一件可怕的事情）：

```
bless $a1, 'Bio::Tree::Node';
bless $b1, 'Bio::Tree::Node'; 
```

我得到：

> 不是 /usr/local/share/perl/5.14.2/Bio/Tree/Node.pm 第 433 行第 1 行的 HASH 引用。

该线程中的其他方法（使用调用者）给了我同样的旧“未定义值”错误。

这是 BioPerl 的问题，还是（我怀疑）我仍然遗漏了什么？谢谢！

编辑：在 Ubuntu 12.04 LTS 上使用 Perl 5.14.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:22:00.203

原来这包括三个部分：

1.  排序函数确实需要直接原型化和索引，或者通过调用包访问，如我链接到的另一个线程中所记录的（例如）。

2.  为什么修复排序功能后它仍然不起作用有点神秘，但可能是不可重现的。通过重新安装 BioPerl 解决了这个问题。

3.  最后，事实证明当前版本的 BioPerl（我有 1.6.9）没有完全实现“order_by”参数——Bio::TreeIO::newick 构造函数没有像它应该设置的那样设置传入的值. 但是，我能够通过在构造*后显式设置参数来解决这个问题：*

    ```
    my $out = new Bio::TreeIO(
         -file     => ">sorted.tree", 
         -format   => 'newick', 
    );
    $out->get_params->{'order_by'}=$depth_sort;
    $out->write_tree($tree); 
    ```

这按预期工作。

# java - 32 位和 64 位 Windows 服务器上 JVM 的最大堆大小

> ID：15100737
> 
> 赞同：1
> 
> 时间：2013-02-26T22:34:37.873
> 
> 标签：java, memory, jvm, heap-memory, 32bit-64bit

我有一个第三方应用程序，它安装在我的 Windows Server 2008 上并附带 JRE。

服务器是 64 位机器，但是当我尝试将堆大小调整到超过 1.5 GB 时，JVM 出错。

我找到了这篇文章：[Understanding max JVM heap size - 32bit vs 64bit](https://stackoverflow.com/questions/2457514/understanding-max-jvm-heap-size-32bit-vs-64bit)

因此，如果是 32 位窗口，则最大大小约为 1.5gb 到 2gb，因为窗口在中间占用一些空间并且需要连续。那么64位不应该更多吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:45:31.097

您是否尝试过使用 -d64 选项运行 jvm？我想我在某处读过一些虚拟机默认以 32 位模式运行

# android - 在一个对象中同时使用 jackson 和 ormlite 注释时出现异常

> ID：15100744
> 
> 赞同：2
> 
> 时间：2013-02-26T22:35:05.510
> 
> 标签：android, json, jackson, deserialization, ormlite

我正在使用**Jackson**库将 json 解析为对象，并使用**ormlite**将相同的对象存储到 sqlite db。这是我的模型类：

```
public class Site {
    private String uniqueId;
    private String name;
    private ForeignCollection<ContactDetails> items;

    @JsonProperty("contact_details")
    public void setContactDetails(ForeignCollection<ContactDetails> contact_details) {
        this.items = contact_details;
    }

    public List<ContactDetails> getContactDetails() {
        return new ArrayList<ContactDetails>(items);
    }

    public String getUniqueId() {
        return uniqueId;
    }
    @JsonProperty("unique_id")
    public void setUniqueId(String uniqueId) {
        this.uniqueId = uniqueId;
    }
    public String getName() {
        return name;
    }
    @JsonProperty("name")
    public void setName(String name) {
        this.name = name;
    }
} 
```

ContactDetails 类是：

```
public class ContactDetails {

    @JsonProperty("contact_detail_id")
    int getContactDetailId;
    @JsonProperty("cellphone_number")
    String getCellphoneNumber;
    @JsonProperty("email")
    String getEmail;
    @JsonProperty("name")
    String getName;
} 
```

我的json是：

```
{
    "unique_id": "WDV000282",
    "name": "2XL - Diverse werken - Zeebrugge",

    "contact_details": [
        {
            "contact_detail_id": 20647,
            "cellphone_number": "123456",
            "email": "plabon@gmail.com",
            "name": "plabon",

        },
        {
            "contact_detail_id": 20648,
            "cellphone_number": "",
            "email": "modak@gmail.com",
            "name": "test",

        }
    ]
} 
```

但是当我执行 readvalue 时：

```
Site test= objectMapper.readValue(json, Site.class); 
```

我得到以下异常

```
org.codehaus.jackson.map.JsonMappingException: Can not find a deserializer for non-concrete Collection type [collection type; class com.j256.ormlite.dao.ForeignCollection, contains [simple type, class com.example.jacksonparsingtest.ContactDetails]] 
```

我不明白发生了什么？请帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:10:55.623

由于 ForeignCollection 是一个接口，Jackson 不能实例化这种类型的新对象。我会尝试使用[@JsonDeserialize(as=ConcreteSubclassOfForeignCollection.class)](http://fasterxml.github.com/jackson-databind/javadoc/2.1.0/)注释该字段，使用像[BaseForeignCollection](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/BaseForeignCollection.html)这样的具体子类或使用像此解决方案中的简单列表：[https](https://stackoverflow.com/a/14920916/2021412) ://stackoverflow.com/a/14920916/2021412 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:06:19.383

我已经通过使用**Collection**而不是 ForeignCollection 解决了这个问题。Jackson 现在可以解析 Collection 了。

# c - 如何读取文件的最后一行？

> ID：15100749
> 
> 赞同：0
> 
> 时间：2013-02-26T22:35:31.853
> 
> 标签：c, file

我有一个像这样的文件，我需要它最后一行的一些值。这是文件：

```
XFOIL 版本 6.96

计算的极坐标：窗格

1 1 雷诺数固定 马赫数固定

xtrf = 1.000（顶部） 1.000（底部）
马赫 = 0.000 Re = 0.100 e 6 Ncrit = 4.000

alpha CL CD CDp CM Top_Xtr Bot_Xtr
------ -------- --------- --------- -------- -------- -- ------
0.000 0.3882 0.01268 0.00440 -0.0796 0.6713 1.0000

```

我想要做的是读取 , 的值`alpha`，`CL`并`CD`位于最后一行。

我使用此代码

```
#include <stdio.h>
#include <stdlib.h>

int main ()
{
  FILE * pFile;
  FILE * test1;

   char ch;
   double alpha,lift,drag;
   int i;

   pFile = fopen("save.txt","r");
   test1 = fopen("test1.txt","w");

   fseek ( pFile , 434 , SEEK_SET );

  while( ( ch = fgetc(pFile) ) != EOF ){
      fputc(ch, test1);
  }

  for(i = 0; i < 3; i++)
  {

  fscanf(test1, "%lf  ",&alpha);
  fscanf(test1, "%lf ",&lift);
  fscanf(test1, "%lf",&drag);

  }

  printf("alpha = %lf  cl = %lf   cd = %lf",alpha,lift,drag);

  fclose(test1);
  fclose ( pFile );
  return 0;
} 
```

先感谢您...

```
Guys thank you all for your answers what i forgot 
```

值得一提的是，它打印出 alpha = 0.00000 cl = 0.00000 cd = 0.00000 实际上不是零，而是分别为 0.000 0.3882 0.01268 ...！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:53:02.887

```
 pFile = fopen("save.txt","r");
   test1 = fopen("test1.txt","w"); 
```

你正在`save.txt`为阅读和`test1.txt`写作而开放。

```
 fseek ( pFile , 434 , SEEK_SET );

  while( ( ch = fgetc(pFile) ) != EOF ){
      fputc(ch, test1);
  } 
```

您现在跳到 434 中的字符`save.txt`，然后读取文件的其余部分，将每个字符打印到`test1.txt`.

```
 for(i = 0; i < 3; i++)
  {

  fscanf(test1, "%lf  ",&alpha);
  fscanf(test1, "%lf ",&lift);
  fscanf(test1, "%lf",&drag);

  } 
```

您现在正尝试从 读取`test1.txt`，但它已打开以供写入，并且当前位置位于文件末尾。如果你想读取它，你需要关闭它并打开它进行读取，或者`fopen(..., "rw")`在上面打开它读写（）然后在开始读取之前将当前位置重置为文件的开头（它是未定义的如果你不这样做会发生什么）。

事实上，您不需要跳到字节偏移量，将最后一行复制到另一个文件中，然后读取该新文件。您可以直接从原始文件中读取最后一行。不需要从一个文件读取到另一个文件的循环；只需`scanf()`在原始文件上运行您的。

请记住检查您的函数调用是否有错误。您进行的`scanf()`调用可能返回了错误。您可以使用 来检查错误`ferror(file)`，并使用 来获取实际的错误消息`strerror(errno)`。

# matlab - 在 Matlab 中对一维向量上的范围选择进行矢量化

> ID：15100751
> 
> 赞同：3
> 
> 时间：2013-02-26T22:35:36.237
> 
> 标签：matlab, vectorization

这可能很简单，但我想不通......我想创建一个范围矩阵，我可以使用以下循环来做到这一点：

```
a=[0 10 22 35 42]; % sample initial  ranges
for i=1:length(a)
    b(i,:)= a(i):a(i)+5;
end

 b =
     0     1     2     3     4     5
    10    11    12    13    14    15
    22    23    24    25    26    27
    35    36    37    38    39    40
    42    43    44    45    46    47 
```

它如何被矢量化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:47:57.793

以下两项都适用于您的示例：

```
b = bsxfun(@plus, repmat(a',1,6), 0:5);
b = bsxfun(@plus, a'*ones(1,6), 0:5); 
```

您可以根据输入`a`和范围长度修改参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T22:50:32.767

```
a = 0:10:40;

b = bsxfun(@plus,a', 0:5)
b =

 0    1    2    3    4    5
10   11   12   13   14   15
20   21   22   23   24   25
30   31   32   33   34   35
40   41   42   43   44   45 
```

# c# - 从另一个窗体中删除控件

> ID：15100755
> 
> 赞同：-3
> 
> 时间：2013-02-26T22:35:47.007
> 
> 标签：c#, .net, winforms, tabcontrol

目前我有 2 个表格。`Form1`有一些选项卡控件。我想关闭标签页`Form2`。Form1 是 MDI 表格。Form2 是子窗体。Form2 位于 Form1 的标签页中。我只想将关闭按钮放入 Form2 以关闭 Form1 中的标签页。

```
Form2:

private void btnClose_Click(object sender, EventArgs e)
{
    Form1 frm = new Form1();
    frm.tabControl1.TabPages.Remove(frm.tabPage1); 
} 
```

此代码没有错误，但在 vs2010 中不起作用。也尝试过`RemoveAt`, `RemoveByKey`。结果是一样的。

注意：我解决了以编程方式将按钮从 Form1 添加到 Form2 的问题。

```
Form1;

Button btn = new Button();
btn.Text = "X";
btn.Width = 23;
btn.Height = 23;
btn.FlatStyle = FlatStyle.Flat;
btn.Location = new Point(2, 3);
Form2 frm = new Form2();
frm.Controls.Add(btn); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:44:25.183

```
public class Form1 : Form
{
    //Delegate stuff for performing on UI thread.
    private delegate void TabPageDelegate(TabPage tab);
    private void RemoveTabOnUi(TabPage tab)
    {
        tabControl1.TabPages.RemoveAt(tab);
    }
    //internal method that will be accessible to other members of this namespace.
    internal void RemoveTab(TabPage tab)
    {
        //Do this action on UI delegate.
        this.Invoke(new TabPageDelegate(RemoveTabOnUi), tab);
    }

    //... Form1 Stuff
}
public class Form2 : Form
{
    public Form2()
    {
       //Add event to the closing event handler
       this.Closing += OnClosing;
    }
    private void OnClosing(object sender, EventArgs e)
    {
       //Check to make sure that MdiParent and Parent are correct
       if(null != this.MdiParent && this.MdiParent is Form1 && 
              null != this.Parent && this.Parent is TabPage)
       {
           //Calls the Form1().RemoveTab() internal method 
           ((Form1)this.MdiParent).RemoveTab((TabPage)this.Parent);
       }
    }

    //... Form2 Stuff
} 
```

# java - 在 JBoss AS7 中使用 @DataSourceDefinition 配置 MySQL 数据源

> ID：15100761
> 
> 赞同：8
> 
> 时间：2013-02-26T22:36:06.643
> 
> 标签：java, mysql, java-ee-6, jboss7.x

我能够在standalone.xml 中配置MySQL DataSource 并且工作正常。但我想使用`@DataSourceDefinition`注释配置 DataSource 。

如何在 JBoss AS7 中使用 @DataSourceDefinition 配置 MySQL 数据源？

我已经尝试过的是：

```
@DataSourceDefinition(
        className = "com.mysql.jdbc.Driver",
        name = "java:global/jdbc/MyDS",
        serverName="localhost",
        portNumber=3306,
        user = "root",
        password = "admin",
        databaseName = "test"
)
@Startup
public class DBConfig {
} 
```

连同这个**persistence.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="javaee6-app" transaction-type="JTA">
        <jta-data-source>java:global/jdbc/MyDS</jta-data-source>
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.show_sql" value="true"/>
        </properties>
    </persistence-unit>
</persistence> 
```

我有 mysql 连接器 jar 文件`WEB-INF/lib`。

但是当我部署应用程序时，我收到了这个错误：

> （DeploymentScanner-threads - 2）{“JBAS014653：复合操作失败并回滚。失败的步骤：”=> {“操作步骤 2”=> {“JBAS014771：缺少/不可用依赖项的服务”=> [” jboss.persistenceunit.\"javaee6-app.war#javaee6-app\"jboss.naming.context.java.global.jdbc.MyDSMissing[jboss.persistenceunit.\"javaee6-app.war#javaee6-app\"jboss.命名.context.java.global.jdbc.MyDS]"]}}}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:11:06.360

我自己想通了。

看来 JBoss AS7 的扫描过程有一些缺陷。根据 Java EE 6 规范，它应该扫描**任何**类`@DataSourceDefinition`上的注释。但是如果我们把它放在一个有注释的类上，它就可以正常工作。**`@Stateless`**

 **```
@DataSourceDefinition(
        className = "com.mysql.jdbc.Driver",
        name = "java:global/jdbc/MyDS",
        serverName="localhost",
        portNumber=3306,
        user = "root",
        password = "admin",
        databaseName = "test"
)
@Stateless
public class DBConfig {
    public void test() { //there should be atleast one method, so this dummy
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:04:52.753

一种建议是在standalone.xml 或jboss 中的domain.xml 中配置数据源名称为7。并在jboss 模块中配置mysql 连接器jar。然后尝试。

配置 Mysql 连接器 jar 请参阅此链接。

[http://www.mastertheboss.com/jboss-datasource/how-to-configure-a-datasource-with-jboss-7](http://www.mastertheboss.com/jboss-datasource/how-to-configure-a-datasource-with-jboss-7)

Standalone.xml 中的数据源配置参考这个链接

[https://docs.jboss.org/author/display/AS71/DataSource+configuration](https://docs.jboss.org/author/display/AS71/DataSource+configuration)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T23:35:52.787

您可能遇到的下一个问题是：

> java.lang.ClassCastException：com.mysql.jdbc.Driver 无法转换为 javax.sql.DataSource

原因参数必须提供`className`实现（参见 javadoc），而不是驱动程序类。`@DataSourceDefinition``DataSource`

对于 MySQL，它可以是：

```
className = "com.mysql.jdbc.jdbc2.optional.MysqlDataSource"
className = "com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource"
className = "com.mysql.jdbc.jdbc2.optional.MysqlXADataSource"    // XA transaction 
```**

# java - 将密钥发送到非活动窗口

> ID：15100762
> 
> 赞同：2
> 
> 时间：2013-02-26T22:36:15.970
> 
> 标签：java

我已经在软件工程课上学习了几个月的 Java，最近我一直在研究一个将文本发送到非活动或最小化程序的程序。将其发送到活动窗口很简单，只需导入 jna 并使用按键功能，例如：`r.keyPress(KeyEvent.VK_F6);`. 但是，我不知道如何将处理程序设置为最小化窗口，然后将密钥发送到那里。

# jquery-isotope - 是否可以使用同位素项目作为隐藏项目的触发器？

> ID：15100765
> 
> 赞同：0
> 
> 时间：2013-02-26T22:36:28.730
> 
> 标签：jquery-isotope

我有一个将使用 Isotop 的客户布局（我认为它是唯一可以满足我需要的插件）。它是一个投资组合，当单击一个项目时，布局会要求 ajax 加载内容。我知道如何通过简单的 jquery 加载函数来加载它，但我想知道这是否实际上不是 Isotop 的内置功能？如果是的话'我会怎么做？谢谢，耶胡达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:30:44.353

好的，这似乎对我有用。不过，我希望得到比这更好的答案。

-- HTML --

```
<div id="portfolio1" class="element Packaging Mitug   " data-symbol="Hg" data-category="Packaging">
<a href="#"><img src="/Portals/0/images/portfolio/p6_250x250_off.jpg" /></a>
<p class="portfolioItemTtl"><a href="#">פורטפוליו 1</a></p>
 <div  class="portfolio1Details" id="portfolio1Details"></div>  
 <div id="portfolio1detailes" class="portfolio1detailes"></div> 
```

-- 这里是同位素脚本 --

-- 然后添加这样的东西 -- -- 注意 jQuery Load 之前的 reLayout --

```
 <script type="text/javascript">
$(document).ready(function() {
    $('#portfolio1').click(function(event){
        event.preventDefault();
        $('#portfolio1').css('width','100%');
        $('#portfolio1').css('height','800px');
        $('#portfolio1 a img').css('display','none');
        $('#isoTopContainer').isotope('reLayout');
        $('#portfolio1').load('demo_test.txt');
        $('html, body').animate({
             scrollTop: $("#portfolio2detailes").offset().top
         }, 1000);
    });
});

</script> 
```

# dita - DITA OT 中的主题编号更简单？

> ID：15100771
> 
> 赞同：2
> 
> 时间：2013-02-26T22:37:14.757
> 
> 标签：dita, dita-ot

如何在 DITA OT 的 PDF 输出中添加主题的章节编号？我的意思是这样编号：

```
1\. Heading

     Some content

1.2\. Heading

     Some more content

1.2.1\. Heading

     Some further content 
```

编辑：我意识到我的问题有点不清楚。我的意思是说主题编号（指的是比作为 DITA 元素的部分更通用的部分）。此外，我知道如何在代码中执行此操作，但想知道我是否错过了通过 DITA OT 中的简单配置来执行此操作的更简单方法 - 例如打开或关闭参数或其他东西。这是一个常见的请求，它应该比一直像这样修改样式表更容易：

[http://tech.groups.yahoo.com/group/dita-users/message/18417](http://tech.groups.yahoo.com/group/dita-users/message/18417)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:36:19.890

您可以使用[DITA-OT PDF 插件生成器](http://dita-generator-hrd.appspot.com/pdf-plugin)，它有一个用于对所有层级进行编号的开关。DITA-OT 没有为此提供单独的配置属性，因为保持内置配置集较小更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:48:21.143

这就是我所做的。CSS：

```
body { counter-reset: H1; }     /* Create the counter for H1 */
h1:before {
  content: counter(H1) ". ";    /* Print the H1 number */
  counter-increment: H1;    /* Add 1 to next H1 */
 }
h1 { counter-reset: H2; }
h2:before {
  content: counter(H1) "." counter(H2) " ";
  counter-increment: H2;
}
h2 { counter-reset: H3; }
h3:before {
  content: counter(H1) "." counter(H2) "." counter(H3) " ";
  counter-increment:H3; 
```

然后呈现为 ​​XHTML（分块为单个页面）并将网页转换为 PDF。可能不是规范的方法，但它有效。

# html - HTML 文件阅读器

> ID：15100780
> 
> 赞同：0
> 
> 时间：2013-02-26T22:37:43.407
> 
> 标签：html, filereader

```
function fileSelected() {
    // get selected file element
    var files = document.getElementById('files[]').files;

    for (var i = 0; i < files.length; i++)  //for multiple files          
    {
        (function (file) {
            var fileObj = {
                Size: bytesToSize(file.size),
                Type: file.type,
                Name: file.name,
                Data: null
            };

            var reader = new window.FileReader();
            reader.onload = function (e) {
                fileObj.Data = e.target.result;
            };
            // read selected file as DataURL
            reader.readAsDataURL(file);

           //Create Item
           CreateFileUploadItem(fileObj);

        })(files[i]);
   }
}

function CreateFileUploadItem (item) {
    console.log(item);

    $('<li>', {
        "class": item.Type,
        "data-file": item.Data,
        "html": item.Name + ' ' + item.Size
    }).appendTo($('#filesForUpload'));
} 
```

因此，当 console.log(item) 在 CreateFileUploadItem 函数中运行时，它会显示 item.Data。然而，它不会将其添加到 LI 的数据文件中。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:55:22.140

调用`readAsDataURL`是异步的。因此，函数调用很可能在函数被调用之前返回`onload`。因此，`fileObj.Data`当您尝试在`CreateFileUploadItem`.

要修复它，您应该将调用移动`CreateFileUploadItem`到您的`onload`函数中。至于控制台记录正确的值，你也不能依赖它是同步的。我认为在调试期间在该行使用断点可能会显示真正的空值。

# php - 使用 Simple_HTML_Dom 获取跟随特定文本的文本

> ID：15100781
> 
> 赞同：1
> 
> 时间：2013-02-26T22:37:48.233
> 
> 标签：php, html, simple-html-dom

Simple_HTML_Dom 非常适合抓取特定标签中的内容，但我不确定在抓取文本时如何做超出基础的任何事情。这是我从中抓取的代码的示例：

```
<span>
Some code stuff.
</span>
FirstWord: 88
<span>
More code stuff.
</span> 
```

如您所见，FirstWord 和 88 没有包含在任何类型的标签中。这使得它们很难被抓住。不过，问题是：FirstWord 总是一样的——只是数字发生了变化。

所以，我的想法是简单地告诉 Simple_HTML_Dom 获取紧跟在 FirstWord 之后的数字。问题是我不知道如何做到这一点。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:06:00.437

```
preg_match_all('/FirstWord:\s?([0-9]+)/', $input, $matches);
print_r($matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T04:34:29.260

您可以使用消除过程，假设您的 html 看起来像这样..

```
<html>
    <head></head>
    <body>
        <span>Some code stuff.</span>
        FirstWord: 88
        <span>More code stuff.</span>
    </body>
</html> 
```

您可以遍历所有子元素（在这种情况下将是`<span>`元素），并将它们的 html 设置为空字符串。这将使您只剩下“FirstWord：88”。

```
foreach($html->find('body', 0)->children() as $child){
    $child->outertext = "";
}

echo $html;
// Output:
// FirstWord: 88 
```

# vb.net - Excel 高级筛选器 - 筛选具有多个单元格值的表格

> ID：15100782
> 
> 赞同：0
> 
> 时间：2013-02-26T22:37:53.977
> 
> 标签：vb.net, excel, vba

我一天中的大部分时间都在努力解决这个问题，并在此过程中使用从网络上借来的代码使 Excel 2010 崩溃了几次。

我有一个表（见下文），其中有一列称为“ID”的唯一值。我还有一个 ID 列表，例如 [2 5 7 8]，它们是表中的一个子集。我只想显示与子集中对应的表条目。

我确信它一定可以做到，但我的 VB 技能有限。

```
ID   A__    B ____     C _
1,   1.1,   2.1,      -2.1
2,   1.2,   2.2,      -2.1
3,   1.3,   2.3,      -2.1
4,   1.4,   2.4,      -2.1
5,   1.5,   2.5,      -2.1
6,   1.6,   2.6,      -2.1
7,   1.7,   2.7,      -2.1
8,   1.8,   2.8,      -2.1 
```

有人可以为此提出解决方案吗？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:43:38.663

在 VBA 中不需要这样做。

只需添加另一列并使用以下公式填充它：（假设它从第 2 行开始，ID 在 A 列中，并且您选择的 ID 列表在 Sheet2!A1:A10 中 - 相应调整）

```
=--NOT(ISERROR(MATCH(A2,Sheet2!$A$1:$A$10,0)))

```

把这个公式抄下来。此公式将为列表中具有 ID 的每一行返回 TRUE - 否则返回 FALSE。现在您只需要应用自动过滤器并过滤 TRUE - 完成！:-)

如果您将此代码与您的选择一起放在工作表中，自动过滤器将自动更新：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Intersect(Target, Me.Range("A1:A10")) Is Nothing Then Exit Sub

    With Worksheets("Sheet1")
        .AutoFilterMode = False
        On Error Resume Next
        .Range("$A:$C").AutoFilter Field:=3, Criteria1:="1"
    End With
End Sub 
```

# java - 在这些线程中，这个布尔值是做什么用的？

> ID：15100783
> 
> 赞同：1
> 
> 时间：2013-02-26T22:38:02.773
> 
> 标签：java, multithreading, boolean, producer-consumer

您好，我在理解此处显示的代码时遇到问题，此代码显示了如何将 wait() 和 notify() 正确实现到线程中的示例。

这是代码：

```
class Q {

  int n;    
  boolean valueSet = false;

  synchronized int get() {
    if(!valueSet)
    try {
        wait();
    } catch(InterruptedException e) {
        System.out.println("InterruptedException caught");
    } 
    System.out.println("Got: " + n);
    valueSet = false;
    notify();
    return n;    
  }

  synchronized void put(int n) {
    if(valueSet)
    try {
        wait();
    } catch(InterruptedException e) {
        System.out.println("InterruptedException caught");
    }
    this.n = n;
    valueSet = true;
    System.out.println("Put: " + n);
    notify();
   }
 }

class Producer implements Runnable {
  Q q;
  Producer(Q q) {
    this.q = q;
    new Thread(this, "Producer").start();
  }
  public void run() {
    int i = 0;
    while(true) {
      q.put(i++);
    }
  }    
}

class Consumer implements Runnable {
  Q q;
  Consumer(Q q) {
    this.q = q;
    new Thread(this, "Consumer").start();
  }
  public void run() {
    while(true) {
      q.get();
    }
  }
}

class PCFixed {
    public static void main(String args[]) {
      Q q = new Q();
      new Producer(q);
      new Consumer(q);
      System.out.println("Press Control-C to stop.");
    }
  } 
```

我很难理解这里布尔值的用法，如果布尔变量保留，代码将正确打印。

但是，如果我拿走布尔值，那么它只会打印“按 Control-C 停止”。这是为什么？

为什么布尔值在这里如此重要，它的用途是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:15:53.720

布尔值的名称是`valueSet`。如果为真，则表示已设置了一个值。为 false 时，表示尚未设置值。将布尔值视为一个标志，当它为真时，有数据被消耗（标志向上），当它为假时，没有数据被消耗（标志向下）。

只有当标志为假时，生产者线程才会设置一个值。如果为真，则等待消费者通知。

如果标志为真，消费者线程只会读取该值。如果为假，则等待生产者通知。

您是否有权访问并使用调试器？逐步浏览这两个线程并查看它们如何相互交互可能会对您有所帮助。如果您以前没有使用过调试器，那么多线程可能不是理想的学习场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T00:18:28.920

该类`Q`为存储在`n`. 该容器用于将该值从 传递`Producer`到`Consumer`。由于容器一次只能保留一个值，因此两者都`Producer`必须`Consumer`以某种方式知道容器是否已满。布尔值`valueSet`就是这个指标。

如果设置为`true`，则容器已满，因此`Producer`必须等到它被清空才能再次填充。同样，如果`valueSet`为 false，则在有要检索的内容之前，`Consumer`可能不会尝试检索`Q`实例的内容。

通过删除布尔值（及其状态的测试），您将两个`Producer`线程都`Consumer`置于等待通知状态（这可能永远不会发生，因为只有它们能够在代码中生成它），因此出现的唯一消息是来自主线程的那个。

非常重要的一点：正如[Freedom_Ben](https://stackoverflow.com/users/2062384/freedom-ben)在他自己的[回答](https://stackoverflow.com/a/15101994/1769720)中所暗示的那样，这段代码之所以有效，是因为`get`和`put`方法都是生成的`synchronised`，这意味着它们将阻止所有其他线程`synchronized`在执行期间通过调用来访问对象，从而使这些调用相对于彼此。`valueSet`这一点很重要，因为它几乎可以保证两者的读写操作都是`n`原子的。**如果没有在这两种**方法上设置该属性，则通知`put`可能会在`Consumer`已检查之后`valueSet` 但在它调用之前发生`wait`。根据通知机制 (*) 的实现，这可能导致`Consumer`缺少通知并进入等待状态，即使`Q`. 使用`synchronized`这些方法的属性，我们可以确保这些调用将按预期运行。

*   `synchronized`关键词

*   [`notify`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#notify())和[`wait`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait())方法

* * *

(*) `wait`and`notifiy`代码可以通过两种方式实现：

*   快速的方法是`notify`简单地检查一个线程是否正在运行，如果是`wait`，则将其唤醒，否则什么也不做。这是导致没有正确`synchronized`方法调用的竞争条件的场景。

*   更正确的方法是使用在 处初始化的专用信号量，并将和分别`0`别名为信号量上的(aka ) 和(aka ) 操作。`notifiy``wait``increment``release``decrement``acquire`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T00:19:47.757

如果尚未处理最后一个值，则似乎正在使用布尔值来避免等待。例如，在 put 方法中，如果 valueSet 为真，我们将跳过 wait()，因为这意味着自上次更新 this.n 的值以来 get() 还没有运行。如果我们每次都等待（）而不考虑布尔值，那么死锁的可能性非常大，两个线程都在等待并且没有线程会通知。

这就是我不喜欢将 synchronized 关键字应用于方法的原因。将哪个对象用作互斥锁可能会令人困惑。我更喜欢这种风格，因为它更清楚正在等待哪个资源。我还发现这种风格通过在不需要同步的互斥锁下工作来阻止懒惰。不过这都是个人喜好：

```
void get(int n){
    synchronized(this){
        // do the work
    }
}

void put(int n){
    synchronized(this){
        // do the work
    }
} 
```

# javascript - 比较 Javascript 数组实时和触发事件

> ID：15100787
> 
> 赞同：0
> 
> 时间：2013-02-26T22:38:13.840
> 
> 标签：javascript, regex, events

** 更新：

jsfiddle.net/terra823/WA6sX

我基本上是在寻找文本输入并将输入文本与一个名为 magic_words 的数组进行比较。如果匹配，则将屏幕变为蓝色，如果不匹配，则将屏幕变为绿色。到目前为止，当我进行匹配时，它会将屏幕变为蓝色，但在进行初始匹配后似乎并没有继续比较。如果有人知道编写函数的更好方法 - 也许使用正则表达式 - 我将非常感谢您的帮助！

** 旧帖：

我正在编写一些 Javascript 代码，这些代码获取用户输入的内容并将其与我拥有的数组进行比较。如果它与某些单词匹配，则会触发更改。我正在工作的那部分代码，但是，在触发所述事件后，我希望页面返回到默认状态。换句话说，用户在默认状态下开始页面，在写作过程中，他通过输入数组中的特定单词来触发事件，一旦他继续输入，他就会返回到默认状态。这是我为该功能所拥有的：

```
function handleChange(){
        var newText=input.value;
        if (newText==oldText)return; else oldText=newText;
            set(reversed, reverse(newText));
            set(count, 'You entered '+newText.length+' characters.');
            set(orig, newText); 
```

// 魔法词数组

```
 var magic_words = ["cool", "brother", "fun", "sister", "apple", "orange"]; 
```

// 屏幕背景

```
 var box = document.getElementById("box"); 
```

// splitEnds 采用 newText 并将输入文本的整个字符串拆分为单词，方法是在 SPACE 处拆分字符串

```
 var splitEnds = newText.split(" "); 
```

// 屏幕最初是白色的

```
 var color = "white"; 
```

// 当用户开始时，屏幕变绿只是表示用户已经开始

```
 if(newText != " ") {
                color = "green";
            } 
```

// 在数组中查找所有的magic_words

```
 for (var i = 0; i < magic_words.length; i++) { 
```

// 浏览所有 INPUT 字符串文本，这些文本被分成单独的单词

```
 for(var x = 0; x < splitEnds.length; x++){ 
```

// 如果用户已经开始输入并且他们输入了一个magic_word 将屏幕变为蓝色

```
 if(color == "white" || color == "green") 
                        if (magic_words[i] == splitEnds[x]) {
                            color = "blue"; 
                        break;
                    } 
```

// 我需要告诉函数继续分析文本以查看是否匹配。现在它坚持蓝色

```
 }
            }

            box.style.backgroundColor = color;
        } 
```

感谢任何帮助。

谢谢，最好的，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:36:28.857

我真的不确定你在找什么，但只是在你把它改成蓝色后把它改回绿色。

```
 box.style.backgroundColor = color;
            setTimeout(function(){
                box.style.backgroundColor = 'green';
            },1000); 
```

# android - 如何为 Nexus 4 和类似设备创建不同的布局？（银河 S4）

> ID：15100789
> 
> 赞同：3
> 
> 时间：2013-02-26T22:38:16.337
> 
> 标签：android

问题是如何为 Nexus 4 和类似设备创建特定布局？

4.7 英寸对角线 1280 x 768 像素分辨率 (320 ppi) WXGA IPS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:06:32.880

对于 Nexus 4 应该加载与 Galaxy S3 相同的布局

Galaxy S3 屏幕尺寸：4.8 英寸屏幕分辨率：1,280 x 720 像素

并且配置应该是：

1.  对于相同的布局横向和纵向布局-sw360dp
2.  仅适用于横向布局-sw360dp-land
3.  仅适用于纵向布局-sw360dp-port

其他类似设备：

*   LG 擎天柱 4X 高清
*   宏达一 X+

对于 Galaxy S4 也应该兼容并加载此布局

响应在此条目中：[Android S3 布局与 Galaxy Nexus 布局](https://stackoverflow.com/questions/11699761/android-s3-layout-vs-galaxy-nexus-layout/12557007#12557007)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:08:19.643

您可以为特定组合创建布局目录。对于 7" 1280 x 768 at 320 ppi，它看起来像这样：

```
layout-sw600p-xdpi-large 
```

[正如@Tomer Mor 提到的，您可以在此处](http://developer.android.com/guide/practices/screens_support.html)找到可用参数的完整列表

此外，如果您想更具体地了解设备参数，请查看[此问题](https://stackoverflow.com/questions/14082868/android-does-not-honor-ldpi-qualifier)- 您可以根据环境从代码中分配不同的布局。

# django - 如何使用 Django Rest Framework 自定义 URL 未找到错误的默认 404 响应？

> ID：15100790
> 
> 赞同：3
> 
> 时间：2013-02-26T22:38:18.480
> 
> 标签：django, rest, http-status-code-404, django-rest-framework

我想知道当我的 Django Rest Framework API 上的未找到资源出现 404 错误时如何显示这样的错误页面：

```
{
    'detail': 'The resource was not found'
} 
```

我不知道如何做到这一点，因为大部分教程只是假设您正在设置一个特定的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T23:38:32.307

Django Rest Framework 覆盖了[exception_handler](https://github.com/tomchristie/django-rest-framework/blob/master/rest_framework/views.py)中的 Django Http404，因此您需要编写自己的异常。例子：

```
class NotFound(APIException):
    status_code = status.HTTP_404_NOT_FOUND
    default_detail = 'The resource was not found.'

    def __init__(self, detail=None):
        self.detail = detail or self.default_detail 
```

# jquery - 在 JQuery DatePick 中格式化日期（Keith Wood 版本）

> ID：15100791
> 
> 赞同：1
> 
> 时间：2013-02-26T22:38:21.137
> 
> 标签：jquery, datepicker, format

我正在从 datepicker（Keith wood 版本）中提取日期并使用将其写入 div

```
$(function() {
  var  today = $.datepick.today();
  $("#date").html( today);
}); 
```

格式如下所示：

```
Tue Feb 26 2013 12:00:00 GMT+0000 (GMT Standard Time) 
```

我已经尝试重新格式化几次，但无济于事！

我需要长格式：

```
Tuesday 26th February 2013 
```

任何人都可以提供帮助，因为这真的阻碍了我的项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:56:05.790

`dateFormat`调用方法时需要传入选项`datepick()`：

```
$("#your-datepicker-input").datepick({dateFormat: 'DD d MM yyyy'}); 
```

[文档](http://keith-wood.name/datepick.html)

# android - ImageView 裁剪和缩放图像到更小的尺寸

> ID：15100792
> 
> 赞同：0
> 
> 时间：2013-02-26T22:38:21.650
> 
> 标签：android, android-imageview

我试图让我的图像出现在我的图像视图中，这样如果图像是 600x400 并且我的图像视图是 200x200，则图像会缩放到 300x200，然后裁剪掉额外的宽度，以便图像显示为 200x200图片。我玩过各种 ScaleType，但找不到适合我想要的。我想要 ScaleType.FIT_XY 和 ScaleType.CENTER_CROP 的组合

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:03:27.317

您需要做的是使用 inSampleSize 缩小图像，如下所示：http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

然后使用 ScaleType.CENTER_CROP 在视图中显示图像。

# c - memcpy 期间的分段错误

> ID：15100795
> 
> 赞同：0
> 
> 时间：2013-02-26T22:38:32.037
> 
> 标签：c, reverse, memcpy, memmove

我正在尝试制作一个反转部分字符串的顺序的函数。我是使用指针的新手，出于某种原因，我可以访问字符串字符的位置以复制出子字符串，但我无法将它们放回同一位置...

当我尝试将反转的子字符串复制回其原始位置时，我得到

程序收到信号 SIGSEGV，分段错误。0x00007ffff7b5dc66 在?? () 来自 /lib/x86_64-linux-gnu/libc.so.6

任何帮助都是极好的！

这是我到目前为止所拥有的：

```
void reverse(char* line, int start, int end){

      char str[end-start];

      memcpy ( str , line + start , end-start );

      reverseSubString ( str );

      memcpy ( line + start, str , end-start );

}

void reverseSubString(char* str){

    int i, j, len;
    char temp;

    i=j=len=temp=0;

    len=strlen(str);

    for (i=0, j=len-1; i<=j; i++, j--)
    {
        temp=str[i];
        str[i]=str[j];
        str[j]=temp;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:47:28.270

```
 char str[end-start];

  memcpy ( str , line + start , end-start ); 
```

除非包含原始字符串的 0 终止符，否则您有一个`char`不是 0 终止的数组。所以

```
len=strlen(str); 
```

计算谁知道如果那还没有崩溃。然后

```
for (i=0, j=len-1; i<=j; i++, j--)
{
    temp=str[i];
    str[i]=str[j];
    str[j]=temp;
} 
```

访问分配的内存之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:47:32.150

`reverseSubstring()`需要一个以 NUL 结尾的 C 字符串，因为它调用`strlen()`传入的字符串。但是，您无法在`reverse`函数中以 NUL 结尾您的字符串。要么这样做，甚至更好，传入一个`length`参数：

```
void reverseSubString(char *str, size_t len)
{
    int i, j;
    char temp;

    for (i = 0, j = len - 1; i <= j; i++, j--) {
        temp = str[i];
        str[i] = str[j];
        str[j] = temp;
    }
}

void reverse(char *line, int start, int end)
{
    char str[end - start];
    memcpy(str, line + start, end - start);
    reverseSubString(str, end - start);
    memcpy (line + start, str, end - start);
} 
```

# android - 使用 Android 中的用户输入在 SQLite 中动态创建表

> ID：15100799
> 
> 赞同：0
> 
> 时间：2013-02-26T22:38:40.513
> 
> 标签：android, sqlite

我对 Android 和 SQLite 很陌生。我目前正在开发一个需要用户创建他们最喜欢的艺术家列表的应用程序。

我已经实现了一些已经显示此艺术家数据的图表。我相信我可以很容易地弄清楚如何实现将数据添加到列表中。

我正在考虑在 SQLite 中有两个单独的表：

*   列表（将存储用户创建的列表名称）

*   ChartItems（将存储图表项目及其所属的列表）

但是，在这种情况下，Lists 表只需要一个字段“ListName”，所以我认为为此拥有一个表可能并不重要。

从用户获取输入时是否可以动态创建表？

例如：用户创建一个列表，该值随后用于创建一个表。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:08:43.637

您不想即时创建新表。你对两张桌子的提议很好。列表表应该至少有两个字段 - 一个称为 id 或 _id 的整数字段，它是主键，以及一个用于列表名称的文本字段。Chartitems 表将有一个字段 (listid)，其中包含它所属列表的 id。这意味着一个图表项只能属于一个列表，而将一个图表项添加到列表中是通过在其记录中设置 listid 字段来实现的。这是一对多的关系。

如果您想在多个列表中拥有一个图表项，那么您需要一个多对多关系，这是通过拥有第三个表（链接）来实现的。此表将有一个字段映射到列表 (listid)，还有一个字段映射到图表项 (itemid)。要将图表项添加到列表中，您需要在链接表中创建适当的链接条目。在这种情况下，chartitem 表不需要 listid 字段。

我建议阅读更多关于数据库关系的内容以阐明这些概念。我强烈建议遵循的一个原则是让*每个*表都包含一个名为 id 的字段，它是该表的主键，并将其用于其他表的所有引用。从长远来看，这比在关系中使用其他字段（如名称）要好得多。

# java - 如何将我的数组调用到我的主类？

> ID：15100801
> 
> 赞同：0
> 
> 时间：2013-02-26T22:38:52.070
> 
> 标签：java

我有一门叫做 DVD 收藏，另一门叫做电影。我试图返回的数组方法如下所示：

```
public class DVDCollection
{
  public static DVD[] collection;
  public static void searchForDVD( String DVD[], String a) {
    System.out.println("What DVD would you like to search for?");
    Scanner scan = new Scanner(System.in);

    a = scan.nextLine();
    int N = DVD.length;
    for (int i = 1; i < N; i++)
      for (int j = i; j > 0; j--)
      if (DVD[j-1].compareTo(DVD[j]) > 0)
      change(DVD, j, j-1);
    else break;
    for (int i = 0; i < DVD.length; i++) {
      System.out.print(DVD[i] + a);
    }
    System.out.println();
  }
} 
```

我试图从我的主要方法中调用它，如下所示：

```
public class Movies
{
  public static void main (String[] args)
  {
    DVDCollection movies = new DVDCollection();
    movies.searchForDVD(DVD);
  }
} 
```

但它给了我一个错误，说找不到符号 - 可变 DVD

那么这里的问题到底是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T22:41:33.643

你在打电话

```
movies.searchForDVD(DVD); 
```

但是 main 方法中没有`DVD`定义变量。顺便说一句，即使有一个，该`searchForDVD()`方法也需要两个参数，而不仅仅是一个。

另请注意，该`searchForDVD()`方法是静态的。所以你不需要任何 DVDCollection 实例来调用它。代替

```
DVDCollection movies = new DVDCollection();
movies.searchForDVD(...); 
```

你应该使用

```
DVDCollection.searchForDVD(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:42:33.293

在您的 main 方法中调用该`searchForDVD`方法时，您必须将 dvd 的字符串数组以及 dvd 的名称作为字符串传递给它。

目前，您正在传递未在 main 方法中的任何位置声明的变量 DVD。

main 方法中的代码应该是：

```
String[] dvds = new String[] {"firstDVD","secondDVD","thirdDVD");
String movie = "secondDVD";
DVDCollection.searchForDVD(dvds,movie); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:43:32.107

您在此代码中多次调用 DVD。我相信这里的错误是变量名。

您已经定义`public static DVD[] collection;`了一个 DVD 对象数组，称为集合。变量名称是`collection`，这是您在引用变量时需要使用的名称。

即：`collection.length`而不是 DVD.length。

当您说 时`public static DVD[] collection;`，您是在告诉编译器为您创建一个名为 collection 的公共、静态 DVD 对象数组。在某些时候，这个数组需要被初始化。数组按以下格式初始化：

```
DVD[] collection = new DVD[]; 
```

或 String[] arrayOfStrings = {"a","b","c","d"};

另一个问题是您的方法定义如下：

```
public static void searchForDVD( String DVD[], String a) 
```

此方法需要两个参数，而不是一个。如果您试图要求一个名为“DVD”的 String[] 数组，那么您应该声明如下：

```
public static void searchForDVD( String[] DVD, String a) 
```

该声明说此方法接受一个字符串数组，我们将其称为 DVD 和另一个称为 a 的字符串。

请务必记下您的变量类型和变量名称。类型告诉 java 在变量中期望什么，名称是您访问它的方式。

```
String myString = "string data"; 
```

字符串是类型。myString 是变量名。“字符串数据”是分配给变量的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:55:21.687

对我来说有意义的是：

```
public class Movies
{
    public static void main (String[] args)
    {
        DVDCollection movies = new DVDCollection();

        //create an Add function inside DVDCollection which reads lines from a text file into collection
        movies.Add("list_of_movies.txt");

        // no arguments are needed here imo, just have it print to user to ask for a DVD to search and then search the collection
        movies.searchForDVD();
    }
}

public class DVDCollection
{
    public DVD[] collection;
    public void Add(string file)
    {
      // parse file and add contents to collection
    }
    public void searchForDVD()
    {
        System.out.println("What DVD would you like to search for?");
        Scanner scan = new Scanner(System.in);
        a = scan.nextLine();
        int N = DVD.length;
        for (int i = 1; i < N; i++)
           for (int j = i; j > 0; j--)
              if (DVD[j-1].compareTo(DVD[j]) > 0)
                 change(DVD, j, j-1);
              else break;
        for (int i = 0; i < DVD.length; i++)
        {
           System.out.print(DVD[i] + a);
        }
        System.out.println();
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T22:44:06.783

**问题1**

```
movies.searchForDVD(DVD); 
```

参数`DVD`未定义。

**问题 2**

`public static void searchForDVD(...)`是类的**静态**方法，`DVDCollection`你应该调用它`DVDCollection.searchForDVD(...)`你不需要`movie`对象。

# python - 使用 twisted 和 sockjs 获取 websocket 请求的 headervalue

> ID：15100802
> 
> 赞同：1
> 
> 时间：2013-02-26T22:38:52.897
> 
> 标签：python, twisted, sockjs

我有一个位于 haproxy 后面的 sockjs 服务器。现在我需要一个客户的 IP 地址，但使用`self.transport.getPeer()`我得到了我的 haproxy 的 IP。Haproxy 在请求中添加一个 X-Forward-For 标头，其中包含原始客户端的 ip。

如何获取在我的协议中发送到服务器的原始 http 请求？

```
class MyProtocol(LineReceiver):
    def connectionMade(self):
        # this next line only gives me the ip of my proxy
        ip = self.transport.getPeer()

class MyFactory(protocol.ServerFactory):
    protocol = MyProtocol

my_factory = MyFactory()
sockjs_factory = SockJSMultiFactory()
sockjs_factory.addFactory(my_factory, 'echo')

sockjs_service = internet.TCPServer(10000, sockjs_factory)

application = service.Application("frog32")
sockjs_service.setServiceParent(application) 
```

# javascript - 使用 Object.create 和 toString.call() 返回 '[object Rectangle]'

> ID：15100803
> 
> 赞同：0
> 
> 时间：2013-02-26T22:39:13.077
> 
> 标签：javascript, node.js, v8

在节点中：如果我这样做

```
var Shape = {
  x:0,
  y:0
}

var rectangle = Object.create(Shape); 
```

我可以得到：

```
toString.call(rectangle);
//'[object Object]'
toString.call(Shape);
//'[object Object]'
toString.call({});
//'[object Object]' 
```

有没有办法产生类似的效果：

```
toString.call(rectangle);
'[object Shape]' 
```

我知道我可以覆盖 Shape.toString() 或创建一个新的 Shape.toClassString() 方法，但我对 toString.call() 实现感兴趣。这是 v8 必需的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:42:37.843

您可以查看规范：[http](http://es5.github.com/#x15.2.4.2) ://es5.github.com/#x15.2.4.2 。

基本上，默认实现采用内部`[[Class]]`属性并将其连接到结果字符串。由于`Shape`和`rectangle`都是普通对象，它们的内部`[[Class]]`属性是`Object`。您必须`toString`使用构造函数覆盖或创建对象。

我认为 V8 或 Node.js 不会为您提供任何额外的可能性来覆盖它，但我不确定。

# android - ActionBarSherlock targetSdkVersion

> ID：15100804
> 
> 赞同：1
> 
> 时间：2013-02-26T22:39:17.977
> 
> 标签：android, actionbarsherlock

我是开发基于 API 10 (android 2.3.3) 的 android 应用程序的新手，我想在我的应用程序中添加操作栏，但 API 10 不支持它。所以我使用 ActionBarSherlock 4.0.0 添加操作栏。

ActionBarSherlock v4.0.0 至少支持 api 级别 14 (sdk 4.0)，所以我将 projet 构建目标设置为 API 14 和 targetsdkversion = 15

现在我想创建我的新 android 项目（使用 API 10 在 Android 2.3.3 上运行）我应该选择哪个“目标 SDK”和“编译”？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:52:19.087

你使用什么 targetSdk 并不重要（不过我推荐 API 17），你只需要至少使用 API 14 来构建它。

# jquery - 使用存储在 web.config 文件中的 URL 对 WebService 的 JQuery ajax 调用

> ID：15100805
> 
> 赞同：3
> 
> 时间：2013-02-26T22:39:19.643
> 
> 标签：jquery, asp.net, web-services

我正在从 JQuery ajax 调用中调用 WebService (ASP.NET) - 这工作正常。我想做的是将 WebService 移动到与 WebApp 不同的项目中。我已经为我的项目添加了一个 Web 引用，但现在我需要从 web.config 中获取服务 URL，并将其用作我的 JQuery ajax 调用中的 URL。我想这样做，以便应用程序支持团队可以将 WebService 移动到他们喜欢的任何地方，并且只需要更新 web.config 而无需编辑 ASPX 页面。

这样做的最佳方法是什么？我可以从 web.config 文件中获取 URL，所以我只需要知道在运行时将其传递给 jquery ajax 调用的最佳方法是什么？到目前为止，我只使用硬编码的 URL。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:54:52.013

您可以从`Page_Load`事件中的配置中检索 url，然后将 url 存储为 HiddenField 值，可以通过 jQuery 检索：

ASPX：

```
 <asp:HiddenField ID="urlHiddenField" runat="server" ClientIDMode="Static" /> 
```

代码隐藏：

```
 protected void Page_Load(object sender, EventArgs e)
 {
      string url = RetrieveUrlFromConfig();
      urlHiddenField.Value = url;
 } 
```

Javascript：

```
var serviceUrl = $("#urlHiddenField").val();
$.ajax({
  type: "POST",
  url: serviceUrl,
  success: function(msg) { }
}); 
```

**如果您不想使用隐藏字段，**另一种解决方案是在代码隐藏中注册启动脚本，这会将 url 分配给全局 Javascript 变量：****

 **```
 Page.ClientScript.RegisterStartupScript(this.GetType(), "defineUrl", String.Format("_serviceUrl = '{0}';", RetrieveUrlFromConfig()), true); 
```

`_serviceUrl`在发出 Ajax 请求的函数范围之外已经定义的 Javascript 变量在哪里？**

# java - Android SQLite 错误：（1）“创建”附近：语法错误

> ID：15100806
> 
> 赞同：0
> 
> 时间：2013-02-26T22:39:22.257
> 
> 标签：java, android, sqlite

我在创建 SQLite 数据库时遇到问题。这是我得到的错误：

> (1) “CREATE”附近：语法错误。

代码：

```
db.execSQL(context.getString(R.string.sql_create)) 
```

SQL：

```
CREATE  TABLE IF NOT EXISTS `Categories` (
    `idCategories` INT NOT NULL ,
    `name` VARCHAR(45) NULL ,
     PRIMARY KEY (`idCategories`)
)

CREATE  TABLE IF NOT EXISTS `Stores` (
    `idStores` INT NOT NULL ,
    `name` VARCHAR(45) NOT NULL ,
    `locationAdress` VARCHAR(45) NULL ,
    `locationLongitude` INT NULL ,
    `locationLatitude` INT NULL ,
    `category` INT NOT NULL ,
    `telephoneNumerber` VARCHAR(45) NULL ,
    PRIMARY KEY (`idStores`) ,
    INDEX `category_idx` (`category` ASC) ,
    CONSTRAINT `category` FOREIGN KEY (`category` )
        REFERENCES `mydb`.`Categories` (`idCategories` )
        ON DELETE NO ACTION
        ON UPDATE NO ACTION
)

CREATE  TABLE IF NOT EXISTS `OpeningHours` (
    `idOpeningHours` INT NOT NULL ,
    `store` INT NOT NULL ,
    `day` INT NULL ,
    `forenoon` VARCHAR(45) NULL ,
    `afternoon` VARCHAR(45) NULL ,
    PRIMARY KEY (`idOpeningHours`) ,
    INDEX `store_idx` (`store` ASC) ,
    CONSTRAINT `store` FOREIGN KEY (`store` )
        REFERENCES `mydb`.`Stores` (`idStores` )
        ON DELETE NO ACTION
        ON UPDATE NO ACTION
) 
```

我真的不知道sql代码有什么问题，希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:45:13.220

从这里复制：[我的 SQLite 语法错误](https://stackoverflow.com/questions/1609474/error-in-my-sqlite-syntax)

> 在每条语句后加一个分号。

```
CREATE TABLE ( ... ) ;
CREATE TABLE ( ... ) ; 
```

# c# - Monodroid 多定时器

> ID：15100807
> 
> 赞同：0
> 
> 时间：2013-02-26T22:39:25.080
> 
> 标签：c#, timer, xamarin.android

嘿，伙计们，这是我在 stackoverflow 上的第一个问题 :) 所以要解决我的问题：我有 3 个不同的 Timer 类，我想在不同的时间调用它们：

```
public class Activity1 : Activity
{
     static public Timer Kundenerz = new Timer();
     static public Timer Kundenerz2 = new Timer();
     static public Timer Kundenerz3 = new Timer();

     protected override void OnCreate (Bundle bundle)
     {
        base.OnCreate (bundle);
        SetContentView (Resource.Layout.Main);
        Kundenerz.Interval = 5000;
        Kundenerz.Elapsed += new ElapsedEventHandler (Kundengroup);
        Kundenerz.Enabled = true;
        Kundenerz2.Interval = 5000;
        Kundenerz2.Elapsed += new ElapsedEventHandler (Kundengroup2);
        Kundenerz3.Interval = 5000;
        Kundenerz3.Elapsed += new ElapsedEventHandler (Kundengroup3);

    {

    public  void Kundengroup(object sender, ElapsedEventArgs e)
    {
        var textView1 = FindViewById<TextView> (Resource.Id.textView1);

        Kundenerz.Enabled = false;
        textView1.Append ("HI");
        textView1.Append ("\r\n");
        Kundenerz2.Interval = 5000;
        Kundenerz2.Enabled = true;

    }

    public void Kundengroup2(object sender, ElapsedEventArgs e)
    {
        var textView1 = FindViewById<TextView> (Resource.Id.textView1);
        Kundenerz2.Enabled = false;
        textView1.Append ("BYE");
        textView1.Append ("\r\n");
        Kundenerz3.enabled = true;  
    }

    public void Kundengroup3(object sender, ElapsedEventArgs e)
    {
        var textView1 = FindViewById<TextView> (Resource.Id.textView1);
        Kundenerz3.Enabled = false;
        textView1.Append ("TRI");
        textView1.Append ("\r\n");
        Kundenerz.Enabled = true;
    }
} 
```

我希望我的程序的这一部分在前 5 秒后将“HI”添加到我的 TextView，然后在另一个计时器停止时在另一个 5 秒后添加“BYE”，然后最后但并非最不重要的是在“后 5 秒”添加“TRI” BYE”，然后重新开始整个事情。但这对我不起作用，我只得到一个“HI”，然后它停止做任何事情。

我会很感激任何帮助，因为这是我需要用我的应用程序完成的最后一件事:)

顺便说一句，我对 C# 很陌生...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:33:49.843

您的计时器很好，但是它们在自己的线程上运行，因此您需要`RunOnUiThread`在想要更新 UI 元素时使用。

```
public class Activity1 : Activity
{
    public static Timer Kundenerz = new Timer();
    public static Timer Kundenerz2 = new Timer();
    public static Timer Kundenerz3 = new Timer();

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        SetContentView(Resource.Layout.Main);
        Kundenerz.Interval = 5000;
        Kundenerz.Elapsed += Kundengroup;
        Kundenerz.Enabled = true;
        Kundenerz2.Interval = 5000;
        Kundenerz2.Elapsed += Kundengroup2;
        Kundenerz3.Interval = 5000;
        Kundenerz3.Elapsed += Kundengroup3;
    }

    public void Kundengroup(object sender, ElapsedEventArgs e)
    {
        var textView1 = FindViewById<TextView>(Resource.Id.textView1);

        Kundenerz.Enabled = false;
        RunOnUiThread(() =>
                          {
                              textView1.Append("HI");
                              textView1.Append("\r\n");
                          });
        Kundenerz2.Interval = 5000;
        Kundenerz2.Enabled = true;
    }

    public void Kundengroup2(object sender, ElapsedEventArgs e)
    {
        var textView1 = FindViewById<TextView>(Resource.Id.textView1);
        Kundenerz2.Enabled = false;
        RunOnUiThread(() =>
                          {
                              textView1.Append("BYE");
                              textView1.Append("\r\n");
                          });
        Kundenerz3.Enabled = true;
    }

    public void Kundengroup3(object sender, ElapsedEventArgs e)
    {
        var textView1 = FindViewById<TextView>(Resource.Id.textView1);
        Kundenerz3.Enabled = false;
        RunOnUiThread(() =>
                          {
                              textView1.Append("TRI");
                              textView1.Append("\r\n");
                          });
        Kundenerz.Enabled = true;
    }
} 
```

# c# - Mysql如果存在则更新否则插入

> ID：15100809
> 
> 赞同：3
> 
> 时间：2013-02-26T22:39:49.437
> 
> 标签：c#, mysql, .net, sql

我 Sql server 我使用这个命令来插入值，如果 id 已经存在，则更新 vale

```
string commandLine = "IF NOT EXISTS(SELECT clientid FROM Rating WHERE clientid = " + clientId + " AND userid = " + userid + ") " +
            "INSERT INTO Rating VALUES(@clientId,@userid,@rating) " +
            "ELSE " +
            "UPDATE Rating SET rating=@rating WHERE clientid = " + clientId + " AND userid = " + userid + ";"; 
```

我现在移动到`MySQL`这个命令将不起作用。MySQL有什么相同的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T22:44:21.607

[INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)在 MySQL 中提供了一种更简单的语法，并且还通过affected-rows API 调用为您提供了关于发生了什么的反馈。根据我的经验，很少有人意识到在您的程序逻辑中知道以下内容是多么方便：

> 使用 ON DUPLICATE KEY UPDATE，如果将行作为新行插入，则每行的受影响行值为 1，如果更新现有行，则为 2，如果将现有行设置为其当前值，则为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:46:37.413

如果您在 clientid、userid 上有唯一约束或主键，您可以使用[INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

```
INSERT INTO Rating VALUES(@clientId,@userid,@rating)
ON DUPLICATE KEY
UPDATE Rating SET rating=@rating 
```

# php - ZF2 货币格式

> ID：15100813
> 
> 赞同：1
> 
> 时间：2013-02-26T22:39:58.683
> 
> 标签：php, zend-framework2, currency

我正在为我的项目使用 ZF2。这是一个电子商务网站。所以我正在处理货币。

在 ZF2 中有一个名为的视图助手`currencyFormat()`

我来自土耳其，所以我的主要货币格式是 TRY（这是土耳其里拉的 ISO 代码）。但在土耳其，我们不使用 TRY 作为货币图标。图标是“$”代表美元，€ 代表“欧元”和“TL”代表土耳其里拉 (TRY)。

因此，当我为 TRY 格式化货币时，我在视图脚本中这样做：

```
<?php
echo $this->currencyFormat(245.40, 'TRY', 'tr_TR');
?> 
```

此代码的结果是“245.40 TRY”。但它必须是“245.40 **TL** ”

有没有办法解决这个问题？我不想使用替换功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:27:15.240

我猜当你说`I do not want to use replacement function`你的意思是`str_replace`每次打电话给助手时都会很费力。解决方案是用您自己的助手替换助手。这是一个快速的方法

首先创建一个您自己的助手，它扩展现有助手并在必要时处理替换...

```
<?php
namespace Application\View\Helper;

use Zend\I18n\View\Helper\CurrencyFormat;

class MyCurrencyFormat extends CurrencyFormat
{
    public function __invoke(
        $number,
        $currencyCode = null,
        $showDecimals = null,
        $locale       = null
    ) {
       // call parent and get the string
       $string = parent::__invoke($number, $currencyCode, $showDecimals, $locale);
       // format to taste and return
       if (FALSE !== strpos($string, 'TRY')) {
           $string = str_replace('TRY', 'TL', $string);
       }
       return $string;
    }
} 
```

然后在 Module.php 中，实现 ViewHelperProviderInterface，并为它提供您的助手的详细信息

```
//Application/Module.php
class Module implements \Zend\ModuleManager\Feature\ViewHelperProviderInterface
{

     public function getViewHelperConfig()
     {
         return array(
             'invokables' => array(
                  // you can either alias it by a different name, and call that, eg $this->mycurrencyformat(...)
                  'mycurrencyformat'  => 'Application\View\Helper\MyCurrencyFormat',
                  // or if you want to ALWAYS use your version of the helper, replace the above line with the one below, 
                  //and all existing calls to $this->currencyformat(...) in your views will be using your version
                  // 'currencyformat'  => 'Application\View\Helper\MyCurrencyFormat',
              ),
         );
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:14:45.233

截至 2012 年 3 月 1 日，土耳其里拉的标志是 TRY。[http://en.wikipedia.org/wiki/Turkish_lira](http://en.wikipedia.org/wiki/Turkish_lira)

所以我认为 ZF 的输出是正确的。

# c - C51 编译器 - 写入 xdata

> ID：15100820
> 
> 赞同：4
> 
> 时间：2013-02-26T22:40:23.177
> 
> 标签：c, embedded, microcontroller, 8051

在 XC888 微控制器上编程，我想为外部存储器中的一些数据保存一个缓冲区`xdata`。

我正在这样做（只是一个例子，我去掉了不必要的代码）：

头文件.h

```
extern ubyte xdata rec_buffer[32]; 
```

函数.c

```
ubyte xdata rec_buffer[32] = {0};

void foo()
{
    //Option 1
    rec_buffer[0] = 0xFF;    // Doesn't work

    //Option 2
    ubyte xdata *ptr_buf = rec_buffer;
    ptr_buf[0] = 0xFF        // Doesn't work
} 
```

所以我只是无法弄清楚我在这里缺少什么。在这两种情况下，都没有数据写入缓冲区。（用调试器检查过）。我还检查了指针指向的地址->它实际上指向外部内存（地址`0x000000`，但应该没有问题）。

当我在没有定义缓冲区的情况下这样做时，`xdata`它工作得很好。我究竟做错了什么？有什么特殊的方法我必须写入 xdata 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T11:00:15.543

XRAM 不应该在`0xF000`（不是`0x000000`）吗？根据此处的图 7：

[http://www.keil.com/dd/docs/datashts/infineon/xc88xclm_ds.pdf](http://www.keil.com/dd/docs/datashts/infineon/xc88xclm_ds.pdf)

链接器配置是否有问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:08:23.587

对缓冲区使用 volatile 关键字，很可能变量被编译器跳过。如果您将值写入内存或 I/O 空间但未观察到该值或任何更改，则很可能您的变量已被编译器优化。

# javascript - 如何在 UIAutomation 中使用节点模块

> ID：15100823
> 
> 赞同：3
> 
> 时间：2013-02-26T22:40:37.347
> 
> 标签：javascript, ios, node.js, npm, ios-ui-automation

根据苹果的[文档](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UsingtheAutomationInstrument/UsingtheAutomationInstrument.html#//apple_ref/doc/uid/TP40004652-CH20-SW1)，我可以使用 import 语句将一个 JS 文件导入另一个文件。是的，我能够使用 JS 函数并递归调用其他 JS 函数。

但是我可以将节点模块包含在我的自动化中吗？Node/ [npm](http://npmjs.org)模块似乎有很多工具可以让生活更轻松并避免代码重复。

实际上，我可以通过代码中的以下调用来使用一个名为[moment.js的节点模块](http://momentjs.com)

```
#import "../node_modules/moment/moment.js" 
```

但我对其他 npm 模块没有同样的运气。我尝试了几个 [Faker.js](https://npmjs.org/package/Faker)，[Charlatan.js](https://npmjs.org/package/charlatan)并且我在 Faker.js 中收到以下错误

> 脚本抛出一个未捕获的 JavaScript 错误：找不到变量：Faker.js 的第 618 行上的窗口

查看 *.js 文件似乎与这些模块的打包方式有关。我的 JS 知识并没有让我到任何地方。

时刻js文件的最后几行

```
// CommonJS module is defined
if (hasModule) {
    module.exports = moment;
}
/*global ender:false */
if (typeof ender === 'undefined') {
    // here, `this` means `window` in the browser, or `global` on the server
    // add `moment` as a global object via a string identifier,
    // for Closure Compiler "advanced" mode
    this['moment'] = moment;
}
/*global define:false */
if (typeof define === "function" && define.amd) {
    define("moment", [], function () {
        return moment;
    });
} 
```

Faker js文件的最后几行

```
if (typeof define == 'function'){
   define(function(){
        return Faker;
   });
}
else if(typeof module !== 'undefined' && module.exports) {
    module.exports = Faker;
}
else {
    window.Faker = Faker;
} 
```

我完全能够在节点控制台中使用这些模块，所以这些模块没有问题，它只是如何在我的 JS 文件中包含/要求它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:36:48.160

必须为Faker做两件事才能为我工作

1.  删除“使用严格”
2.  检查窗口是否未定义
3.  添加此语句

    this['Faker'] = 伪造者；

# c - 如何使用 POSIX 线程在 C 中创建特定于线程的全局变量？

> ID：15100824
> 
> 赞同：16
> 
> 时间：2013-02-26T22:40:39.353
> 
> 标签：c, linux, multithreading, pthreads, posix

我正在学习 POSIX 线程，我已经来到线程特定数据部分。这本书使用文件描述符做了一个很好的例子。但是，我想自己做同样的例子，除了这次使用全局变量。但是，我很难完全掌握这个概念。

我想要做的是以下内容：

*   创建一个全局整数
*   为全局 int 声明一个键

主要：

*   将全局整数设置为一个值，例如。10
*   无需任何清理即可为其创建密钥
*   创建4个线程并发送它们执行thread_func
*   检查值是否仍然是 10，因为线程只看到它的副本

在线程函数中：

*   使用 pthread_setspecific(key,global variable) 创建本地实例 - 不确定我是否正确解释
*   调用一个函数 - dosomething()
*   出口

在做某事

*   创建一个本地指针并将其分配给 pthread_getspecific(key) - 这应该让我获得全局变量的线程特定版本
*   将存储在本地指针处的值更改为 2
*   出口

这是代码：

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

#define NUMTHREADS 4

pthread_key_t glob_var_key;
int glob_var;

void do_something()
{
    //get thread specific data
    int* glob_spec_var = (int*) pthread_getspecific(glob_var_key);
    printf("Thread %d glob_spec before mod value is %d\n", (unsigned int) pthread_self(), *glob_spec_var);
    *glob_spec_var = 2;
    printf("Thread %d glob_spec after mod value is %d\n", (unsigned int) pthread_self(), *glob_spec_var);
}

void* thread_func(void *arg)
{
    pthread_setspecific(glob_var_key, &glob_var);
    do_something();
    pthread_exit(NULL);
}

int main(void)
{
    pthread_t threads[NUMTHREADS];
    int i;
    glob_var = 10;
    pthread_key_create(&glob_var_key,NULL);
    printf("Main: glob_var is %d\n", glob_var);
    for (i=0; i < NUMTHREADS; i++)
    {
        pthread_create(&threads[i],NULL,thread_func,NULL);
    }

    for (i=0; i < NUMTHREADS; i++)
    {
        pthread_join(threads[i], NULL);
    }
    printf("Main: glob_var is %d\n", glob_var);

    return 0;
} 
```

据我了解，当您调用 pthread_getspecific 时，每个线程都应该有自己唯一的内存地址作为内存地址——我在这里没有发现这种情况。我知道我没有正确处理这个问题，当我在执行 getspecific 时尝试查看每个线程的内存地址时，我看到了相同的内存地址。也许有人可以给我举个例子，他们使用全局变量（而不是文件描述符）并且他们具有线程特定的用法，其中线程将其视为局部变量。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-27T12:05:00.863

这不是答案，而是附注：

如果您正在处理特定于 Linux 的代码，则可以使用`__thread`关键字。本质上，

```
static __thread int counter = 5; 
```

为每个线程创建一个不同的`counter`变量，每当创建新线程时初始化为值 5。这样的代码与 C11 未来兼容，因为 C11 使用`_Thread_local`关键字标准化了相同的语义。这比`__thread`使用 C 的所有体系结构上的 POSIX 线程特定函数（具有特定于实现的限制，并且与关键字相比相当繁琐）要理智得多，除了那些声明 C99 和更高版本的“*标准不受欢迎*”（即，微软）。

有关详细信息，请参阅[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/)中的[线程本地存储章节](http://gcc.gnu.org/onlinedocs/gcc/Thread_002dLocal.html#Thread_002dLocal)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-26T23:07:12.837

TLS（线程本地存储）的目的是提供一种定义的机制，使代码可以检索存储在数据库中的线程特定数据，该数据库由所有线程已知的共享密钥访问。您的代码在 TLS 中存储*相同*的数据：单个全局变量的地址）。因此，当线程使用 tls-key 请求此数据时，它们都将返回*相同*的地址。

我认为您打算让您的代码执行以下操作：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

#define NUMTHREADS 4

pthread_key_t glob_var_key;

void do_something()
{
    //get thread specific data
    int* glob_spec_var = pthread_getspecific(glob_var_key);
    printf("Thread %d before mod value is %d\n", (unsigned int) pthread_self(), *glob_spec_var);
    *glob_spec_var += 1;
    printf("Thread %d after mod value is %d\n", (unsigned int) pthread_self(), *glob_spec_var);
}

void* thread_func(void *arg)
{
    int *p = malloc(sizeof(int));
    *p = 1;
    pthread_setspecific(glob_var_key, p);
    do_something();
    do_something();
    pthread_setspecific(glob_var_key, NULL);
    free(p);
    pthread_exit(NULL);
}

int main(void)
{
    pthread_t threads[NUMTHREADS];
    int i;

    pthread_key_create(&glob_var_key,NULL);
    for (i=0; i < NUMTHREADS; i++)
        pthread_create(threads+i,NULL,thread_func,NULL);

    for (i=0; i < NUMTHREADS; i++)
        pthread_join(threads[i], NULL);

    return 0;
} 
```

**输出**

```
Thread 2625536 before mod value is 1
Thread 741376 before mod value is 1
Thread 3162112 before mod value is 1
Thread 3698688 before mod value is 1
Thread 2625536 after mod value is 2
Thread 741376 after mod value is 2
Thread 3162112 after mod value is 2
Thread 3698688 after mod value is 2
Thread 2625536 before mod value is 2
Thread 741376 before mod value is 2
Thread 3162112 before mod value is 2
Thread 3698688 before mod value is 2
Thread 2625536 after mod value is 3
Thread 741376 after mod value is 3
Thread 3162112 after mod value is 3
Thread 3698688 after mod value is 3 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-26T22:50:09.687

一般来说，您正在寻找的是“线程本地存储”。这里有几个链接：

*   [http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzahw%2Frzahwex1.htm](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzahw%2Frzahwex1.htm)

*   [http://en.wikipedia.org/wiki/Thread-local_storage](http://en.wikipedia.org/wiki/Thread-local_storage)

选择`pthread_getspecific()`是正确的。这是一个很好的例子：

*   [http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fapis%2Fusers_34.htm](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fapis%2Fusers_34.htm)

请查看上面的示例：我认为它会指出您的问题......或提出一个好的替代方案。

恕我直言...

# python - 如何在 Python/PyObjC 中继承 NSPanel？

> ID：15100827
> 
> 赞同：1
> 
> 时间：2013-02-26T22:40:40.977
> 
> 标签：python, pyobjc

我正在将一个 Objective-C/Cocoa 的小库移植到 Python/PyObjC 中。而且我对实施方式感到困惑。

原始代码如下所示：

```
@implementation HUDWindow
- (id)initWithContentRect:(NSRect)contentRect 
                styleMask:(unsigned int)styleMask 
                  backing:(NSBackingStoreType)bufferingType 
                    defer:(BOOL)flag 
{
    if (self = [super initWithContentRect:contentRect 
                                styleMask:NSBorderlessWindowMask 
                                  backing:bufferingType 
                                    defer:flag]) {
        // initialize code here
             :
             :
             :
             :
             :
             :
        return self;
    }
} 
```

在头文件中说HUDWindow类继承了NSPanel。据我阅读代码，初始化是这样的：

1.  HUDWindow 的 initContentRect 覆盖 NSPanel 的 initContentRect。
2.  在 HUDWindow 的 initContentRect 内部，NSPanel 的 initContentRect 被调用并得到结果为“self”。

首先，我这样写python代码。这是一个字一个字的翻译：

```
class HUDWindow(NSPanel):
    def initWithContentRect_styleMask_backing_defer_(self, rect, style, buf, flag):
        self = NSPanel.initWithContentRect_styleMask_backing_defer_(
            rect, NSBorderlessWindowMask, buf, flag)
        # initialize code here
             :
             :
             :
             :
             :
             :
        return self 
```

它不起作用，因为`self`它只是`NSPanel`. 我不能调用从原始 obj-c 代码移植的任何令人上瘾的函数。

所以我像这样更改了我的代码：

```
class HUDWindow(NSPanel):
    def initWithContentRect_styleMask_backing_defer_(self, rect, style, buf, flag):
        self.window = NSPanel.initWithContentRect_styleMask_backing_defer_(
            rect, NSBorderlessWindowMask, buf, flag)
        # initialize code here
             :
             :
             :
             :
             :
             :
        return self.window 
```

它工作得更好一点。至少，我可以在这个初始化函数中调用其他函数。但是在初始化函数之外，我不能调用从原始代码移植的其他函数。

所以我尝试这样：

```
class HUDWindow(NSPanel):
    def initWithContentRect_styleMask_backing_defer_(self, rect, style, buf, flag):
        self.window = NSPanel.initWithContentRect_styleMask_backing_defer_(
            rect, NSBorderlessWindowMask, buf, flag)
        # initialize code here
             :
             :
             :
             :
             :
             :
         self.window.setTitle_ = self.setTitle_
         return self.window 
```

它没有用。创建实例后我无法覆盖或添加函数。

现在我觉得我做错了。是否有任何常见的方法来继承像 NSPanel 或 NPWindow 这样的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:06:55.413

您的第一个解决方案是正确的。在第二种情况下，您需要使用`NSProxy`或编写自己的显式委托，这很痛苦（第三种方法不是这样做的——您*可以*通过 swizzling 做类似的事情，但不要这样做）。

但是，有一些问题。

首先，这段代码：

```
self = NSPanel.initWithContentRect_styleMask_backing_defer_(rect, NSBorderlessWindowMask, buf, flag) 
```

… 相当于这个 ObjC 代码：

```
self = [NSPanel initWithContentRect:rect 
                          styleMask:NSBorderlessWindowMask
                            backing:buf
                              defer:flag] 
```

…当你想要的是：

```
self = [super initWithContentRect:rect 
                        styleMask:NSBorderlessWindowMask
                          backing:buf
                            defer:flag] 
```

后者的 PyObjC 等价物是：

```
self = super().initWithContentRect_styleMask_backing_defer_(rect, NSBorderlessWindowMask, buf, flag) 
```

或者，在 2.x 中：

```
self = super(HUDWindow, self).initWithContentRect_styleMask_backing_defer_(rect, NSBorderlessWindowMask, buf, flag) 
```

在 ObjC 中，`super`不是超类，而是一个特殊的魔法对象，它实际上是“作为超类的实例的自我”。它几乎与 Python 3`super()`或不那么神奇的 Python 2完全一样`super`，并且 PyObjC 做了额外的工作，这意味着您可以“几乎”忽略它。

你正在做的是（试图）初始化`NSPanel`类对象（或者可能是 PyObjC 桥的类对象`NSPanel`，我不确定是哪个），或者甚至可能试图`rect`初始化`NSPanel`. 无论您在做什么，它都不可能做任何事情来初始化您的`self`实例。（并且将结果分配给`self`在 Python 中与在 ObjC 中做的事情不同。它在 PyObjC 中通常仍然是惯用的风格，但不要被它误导；它的唯一效果是如果你`self`在初始化方法中再次使用. 无论如何，这充其量只能掩盖 ObjC 中的问题，而不是修复它……）所以，在从这个方法返回之后，你`self`仍然`NSPanel`是你调用任何东西之前的已分配但未初始化的实例。

这主要在本教程的早期[两阶段实例化](http://pythonhosted.org/pyobjc/core/intro.html#two-phase-instantiation)中进行了解释。

# kinect - 如何以全深度分辨率加速 Kinect 人脸跟踪

> ID：15100833
> 
> 赞同：0
> 
> 时间：2013-02-26T22:41:10.213
> 
> 标签：kinect, kinect-sdk

我正在使用 Kinect 开发应用程序，我需要全深度分辨率。面部跟踪工作速度快 (30 fps)，深度分辨率为 320x240。但是，当我切换到 640x480 时，我得到了三分之一的速度（~10fps）。我已经尝试提取 320x240 深度图像进行人脸跟踪（每隔一列和一行），但我没有检测到任何人脸。

```
depthImageSmall = new short[this.depthImage.Length/4];
  for (int y = 0; y < 240; y++)
    for (int x = 0; x < 320; x++)
      depthImageSmall[y * 320 + x] = this.depthImage[y * 640 + x * 2]; 
```

如何加快人脸跟踪？

谢谢

# java - 可以删除时间，只需要 getTime() Date 类的日期吗？

> ID：15100834
> 
> 赞同：1
> 
> 时间：2013-02-26T22:41:11.573
> 
> 标签：java

是否可以通过输出“Jan 11 1980”而不是“Fri Jan 11 22:34:21 GMT”来删除日期（星期五）、时间（22:34:21）和时区（GMT） 1980”？？

下面的代码：

```
Calendar date = Calendar.getInstance();
date.set(Calendar.YEAR, 1980);
date.set(Calendar.MONTH, 0);
date.set(Calendar.DAY_OF_MONTH, 11);

Date dob = date.getTime();

System.out.println(dob);//Fri Jan 11 22:34:21 GMT 1980 
```

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T22:44:53.757

```
Date date = new Date(); 
SimpleDateFormat sdf = new SimpleDateFormat("MMM dd yyyy"); 
System.out.println(sdf.format(date)); 
```

输出：

```
Feb 26 2013 
```

如果你想要一个特定的日期，做

```
Calendar c = Calendar.getInstance();
c.set(1980, 0, 11);
Date date = c.getTime();
SimpleDateFormat sdf = new SimpleDateFormat("MMM dd yyyy");
System.out.println(sdf.format(date)); 
```

印刷

```
Jan 11 1980 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:51:31.280

```
public class DateFormat {
    public static void main(String[] args) {
        Calendar date = Calendar.getInstance();
        date.set(Calendar.YEAR, 1980);
        date.set(Calendar.MONTH, 0);
        date.set(Calendar.DAY_OF_MONTH, 11);
        Date dob = date.getTime();
        System.out.println(new SimpleDateFormat("MMM dd yyyy").format(dob));
    }
} 
```

输出：

```
Jan 11 1980 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T22:45:08.167

`Date`表示自纪元以来的毫秒数（1970 年 1 月 1 日，格林威治标准时间 00:00:00）

为了“删除” a 的时间部分`Date`，您需要使用 a`DateFormat`

像这样简单的东西；

```
System.out.println(new SimpleDateFormat("dd/MM/yyyy").format(dob)); 
```

应该管用。

对于更本地化的版本，您应该使用[`DateFormat.getDateInstance()`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html)

```
System.out.println(DateFormat.getDateInstance().format(dob));
System.out.println(DateFormat.getDateInstance(DateFormat.SHORT).format(dob));
System.out.println(DateFormat.getDateInstance(DateFormat.MEDIUM).format(dob));
System.out.println(DateFormat.getDateInstance(DateFormat.LONG).format(dob)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:45:05.473

```
DateFormat dateFormatter = DateFormat.getDateInstance();
System.out.println(dateFormatter.format(date); 
```

这将打印与您当前系统区域设置相对应的唯一日期。

另请参阅：[JavaDoc 中的 DateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T22:50:31.440

```
SimpleDateFormat sdf = new SimpleDateFormat("MMM dd yyyy");

System.out.println(sdf.format(dob)); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-26T22:44:31.243

您可以使用：

```
stringToPrint = time.getMonth()+" "+time.getDate()+" "+time.getYear(); 
```

更多信息： [http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)

# jquery - jquery从数据中获取url并替换为href

> ID：15100835
> 
> 赞同：1
> 
> 时间：2013-02-26T22:41:21.947
> 
> 标签：jquery

我需要一些关于 javascript 函数的帮助。我有这个脚本

```
$.get('http://ste.com/a-link.php', function(data) {
  alert(data);
}); 
```

where`"data"`包含一个链接，我需要将其用作“a href”。

例如，

```
<a href="#">link</a> 
```

当我单击“链接”时，“a href”中的 # 将替换为“数据”中的 url 也许有人知道并帮助我解决这个问题。我是 javascript 的菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:53:49.153

您应该为此使用 jquery，因为它将为您提供内置的方法，使此类事情变得更容易。

你会在你的 javascript 中调用它最有可能在文档准备好时。所提到的返回数据的格式是有效的。您将调用的脚本很可能会以 json 格式向您返回数据，您必须使用 javascript 处理这些数据。这很容易使用点符号，但仍然需要。您可以访问它，例如 data.url

```
 $.get('http://ste.com/a-link.php', 
        function(data) {
           $('a').on("click", function(){
                  $(this).prop('href', data);     
               });
       }); 
```

# python - 更改 Eclipse 窗口的名称

> ID：15100838
> 
> 赞同：0
> 
> 时间：2013-02-26T22:41:35.873
> 
> 标签：python, eclipse, pydev, title, titlebar

我正在开发一个项目，我有一个 Eclipse 工作区。但是，此工作空间内有三个文件夹，每个文件夹都有相似的文件名。
对应这三个文件夹，我打开了三个eclipse窗口，分别显示了其中的文件。

但是，由于文件名相似并且文件在所有窗口中的排序方式相同，因此我无法立即判断我现在正在查看哪个文件夹的窗口。从技术上讲，这可以通过查看标题栏来实现，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/ae525e1d9acee886ef7d6f038d219596.png)

但是使用该标识符是次优的，因为我必须在该字符串中间搜索文件夹名称。
如果我可以在窗口标题中写入一个专用字符串，这将有助于我识别文件夹，该文件夹的文件包含在该窗口中。

我知道我可以在窗口中设置自定义“工作区”标识字符串，但由于这是在工作区级别，设置该字符串会影响所有三个窗口，因此在窗口级别不起作用。

甚至可以设置这样的字符串吗？我怎么能做到这一点？

**技术规格**：

1.  日蚀朱诺
2.  Mac OS X 10.7.5（狮子）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:30:04.483

我假设（可能是错误的）您使用的是 X Windows 系统计算机（基于问题标题栏中显示的路径）。如果是这样，您的窗口管理器应该具有更改窗口标题的机制。

下面说明了一个稍微笨拙的方法，如果您没有找到一个好的窗口管理器特定的路由，它可能会起作用。

```
tini ~ > wmctrl -l |grep Eclipse
0x06400080  1 tini Java - Eclipse
0x06401d89  1 tini Java - Eclipse 

tini ~ > wmctrl -ir 0x06400080 -N 'oneForEach'

tini ~ > wmctrl -l |grep 0x0640
0x06400080  1 tini oneForEach
0x06401d89  1 tini Java - Eclipse 
```

请注意，“wmctrl 是一个 UNIX/Linux 命令行工具，用于与兼容 EWMH/NetWM 的 X 窗口管理器进行交互”，如[tomas.styblo.name](http://tomas.styblo.name/wmctrl/)和[wikipedia](http://en.wikipedia.org/wiki/Wmctrl)中所述。几个 linux 发行版的包管理器可以安装它。

`wmctrl -l`列出所有托管窗口。 `wmctrl -ir 0x06400080 -N 'oneForEach'`更改由指示的十六进制数字标识的窗口的长名称（在窗口标题栏中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:27:15.430

我不认为 eclipse 有什么开箱即用的东西可以提供帮助。可能需要一个 Eclipse 插件来以这种方式自定义工作台窗口标题。一种解决方案是编写您[自己的 Eclipse 插件](http://www.vogella.com/articles/EclipsePlugIn/article.html)，该插件将完全满足您的需求，这将涉及抓取各种工作台窗口外壳并根据您自己的需要将 Text 设置为您需要的任何标题。

然而，编写一个新的 Eclipse 插件可能对你来说是重量级的。一种选择是将脚本环境安装到您的 Eclipse 环境中。 ~~我查看了[Eclipsescript](http://eclipsescript.org/)，但我认为它不会让您访问 WorkbenchWindow 对象，您需要获取活动 shell 来更改标题。你需要的是更像 Eclipse Monkey 的东西。~~ 但是，[Eclipse 猴子](http://eclipse.dzone.com/news/introduction-scripting-eclipse)已停产。也许是[Groovy Monkey](http://groovy.codehaus.org/Groovy+Monkey)。这样，您可以编写一个 groovy 脚本，一旦您运行 Eclipse，您就可以执行该脚本，它可以为您修改标题等等。

使用 groovy monkey，您需要执行的脚本是：

```
window.getShell().setText( 'Custom shell text' ) 
```

**更新**跟进我再次查看的评论，[EclipseScript](http://eclipsescript.org/)是您所需要的，而且它也非常简单。

1.  从此更新站点安装[EclipseScript](http://eclipsescript.org/updates/)。
2.  创建一个新文件，如`customWindowTitles.eclipse.js`
3.  添加如下一行：`Packages.org.eclipse.ui.PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell().setText('Foo');`
4.  `Alt+R`如果您在 Windows 上，请执行脚本。

# ios - 使用 NSNumberFormatter 将 NSString 转换为 NSNumber 时崩溃

> ID：15100845
> 
> 赞同：1
> 
> 时间：2013-02-26T22:41:54.943
> 
> 标签：ios, nsnumberformatter

我在 NSSTRING 中有一个简单的值，我想将其转换为 NSNumber。我一直在我的代码中这样做，由于某种原因，这次它不起作用。你觉得这有什么问题吗？

```
NSNumberFormatter * num_formatter = [[NSNumberFormatter alloc] init];
[num_formatter setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber *score;
NSString *mystr = [[player ScoresArray] objectAtIndex:currentKeeper - 1];

NSLog(@"here is my string: -%@-", mystr);
score = [num_formatter numberFromString:mystr];   // crash occurs on this line.  see error below...
NSLog(@"now it is: %d", [score intValue]);        // it never gets to this line... 
```

以下是上述代码的输出：

> 这是我的字符串：-3-

这是我得到的错误：

```
2013-02-26 17:21:48.912 Golf Whiz[50407:c07] -[__NSCFNumber isEqualToString:]: unrecognized selector sent to instance 0xcb5fa90
2013-02-26 17:21:48.912 Golf Whiz[50407:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFNumber isEqualToString:]: unrecognized selector sent to instance 0xcb5fa90'
*** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:56:32.577

确保您添加到 ScoresArray 的对象实际上是字符串，而不是 NSNumber。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:42:21.163

谢谢，正如怀疑的那样，事实证明我确实在 scoreArray 中有 nsnumber 对象。我在这段代码中从 string 到 num 来来回回，以至于我的脑袋都快要爆炸了。抱歉这个蹩脚的问题 - 如果可以的话，我现在会否决我自己的问题......哈哈

# php - 如何在后续查询中使用 SQL 查询的结果？

> ID：15100846
> 
> 赞同：1
> 
> 时间：2013-02-26T22:41:57.487
> 
> 标签：php, mysql

我想在`where`后续查询的语句中使用查询的结果集。遇到问题，因为第一个查询返回多个结果，我不知道如何将这些结果转换为逗号分隔的字符串以在`'IN' ()`语句中使用。

```
$Result1 = mysql_query ("
select id from Table1
where
upper('$Input') = Employee_number   
")
or die(mysql_error());

$Result2 = mysql_query ("

Select * from table2 where ID in ($Result1)") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:45:08.367

您可以将其组合成一个 MySQL 语句，如下所示：

```
SELECT * FROM Table2 WHERE id IN
(SELECT id FROM Table1 where upper('$Input') = Employee_number); 
```

但是，如果您真的想像在您的问题中那样做，您可能必须查找如何处理来自 的结果`mysql_query`，只需在函数参考中查找即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T23:07:52.953

```
$query1 = mysql_query("
    select id from Table1 
    where upper('$Input') = Employee_number
") or die(mysql_error());

$ids = array();
while($Result1 = mysql_fetch_array($query1))
{
    $ids[] = $Result1['id'];
}

if(sizeof($ids))
{
    $n_ids = implode(',', $ids);

    $query2 = mysql_query("
        select * from Table2 
        where ID IN (" . $n_ids . ")
    ") or die(mysql_error());
} 
```

# c++ - 使用 ShellExecute() 打开命令提示符与手动打开命令提示符有什么区别？

> ID：15100853
> 
> 赞同：2
> 
> 时间：2013-02-26T22:42:26.027
> 
> 标签：c++, windows, visual-c++, command-prompt, shellexecute

我正在尝试通过我创建为一种“启动器”应用程序的 Windows 程序运行 Java 程序。通常要运行这个 java 程序，我要么运行一个批处理文件，要么直接进入 cmd 提示窗口（Windows 键 + R，键入“cmd”）并输入`java -Xmx4096M -Dsun.java2d.noddraw=true [...]`. 关键是在这个窗口中似乎可以识别**java 。**

另一方面，当我从我的应用程序启动命令提示符时，java 不再“被识别为内部或外部命令、可运行程序或批处理文件”。

```
TCHAR szPath[MAX_PATH];
if(SUCCEEDED(SHGetFolderPath(NULL, CSIDL_SYSTEM, NULL, 0, szPath))) {
    PathAppend(szPath, TEXT("cmd.exe"));
    ShellExecuteW( GetSafeHwnd(),L"open", szPath, NULL, NULL, 1 );
} 
```

## 为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T00:26:28.447

### 对于遇到此问题的未来访问者，这是我的工作解决方案：

```
PVOID OldValue = NULL;
if( Wow64DisableWow64FsRedirection(&OldValue) )  {
        TCHAR szPath[MAX_PATH];
    if(SUCCEEDED(SHGetFolderPath(NULL, CSIDL_SYSTEM, NULL, 0, szPath))) {
        PathAppend(szPath, TEXT("cmd.exe"));
        ShellExecuteW( GetSafeHwnd(), L"open", szPath, NULL, NULL, 1 );
    }
    if ( FALSE == Wow64RevertWow64FsRedirection(OldValue) ) {
        AfxMessageBox(L"A script that should never fail has failed.");
        return;
    }
} 
```

感谢[HansPassant](https://stackoverflow.com/users/17034/hans-passant)引导我朝着正确的方向前进。

# actionscript-3 - 使用while循环等待？

> ID：15100858
> 
> 赞同：0
> 
> 时间：2013-02-26T22:42:48.017
> 
> 标签：actionscript-3, while-loop

```
var lastRecordedTime:Number = getTimer();
while(getTimer()>lastRecordedTime+10000)
{

} 
```

我想让我的游戏进入等待状态。我应该像这样使用while循环还是有更高效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T22:53:17.710

永远不要在 AS3 中使用这样的方法。AS3 有一个严重的缺点，它不支持多线程。只要该计时器继续运行，这就会使程序完全崩溃，如果用户一直试图单击它或其他什么东西，Windows 7 尤其会崩溃。

试试这个：

```
private var m_tmr:Timer = new Timer(10000, 1);

.
.
.

private function func():void
{
    .
    .
    .
    m_tmr.addEventListener(TimerEvent.TIMER, tick);
    m_tmr.start();
}

private function tick(pEvent:TimerEvent):void
{
    // pick back up in here
} 
```

唯一的问题是它是异步的，因此您可能需要添加一些特殊的逻辑来同时忽略某些类型的事件和内容，具体取决于您要完成的任务。但是在 AS3 中使用 while 循环让线程休眠是行不通的。

# railstutorial.org - 第 5.4 节 Rails 教程

> ID：15100860
> 
> 赞同：0
> 
> 时间：2013-02-26T22:42:51.303
> 
> 标签：railstutorial.org

我在扯头发。我正在做 Hartl 的 Rails 教程，直到第 5.4 节，一切都在工作。

似乎是我生成了一个新的控制器，然后生成了 integration_test user_pages，然后整个事情就乱套了。我一生都无法弄清楚我做错了什么或从哪里开始。我什至尝试将两者都销毁，但出现了相同的错误。请帮忙！

## 我的代码

```
Jordan-Poulton:Projects academy$ cd first_app/
Jordan-Poulton:first_app academy$ subl .
Jordan-Poulton:first_app academy$ rails generate controller Users new --no-test-framework
/Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /usr in PATH, mode 040777
/Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /usr in PATH, mode 040777
      create  app/controllers/users_controller.rb
       route  get "users/new"
      invoke  erb
      create    app/views/users
      create    app/views/users/new.html.erb
      invoke  helper
      create    app/helpers/users_helper.rb
      invoke  assets
      invoke    coffee
   identical      app/assets/javascripts/users.js.coffee
      invoke    scss
      create      app/assets/stylesheets/users.css.scss
Jordan-Poulton:first_app academy$ rails generate integration_test user_pages
/Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /usr in PATH, mode 040777
/Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /usr in PATH, mode 040777
      invoke  rspec
      create    spec/requests/user_pages_spec.rb
Jordan-Poulton:first_app academy$ rails s
/Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /usr in PATH, mode 040777
/Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/bundler-1.2.4/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /usr in PATH, mode 040777
=> Booting WEBrick
=> Rails 3.2.12 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/mapper.rb:185:in `default_controller_and_action': missing :action (ArgumentError)
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/mapper.rb:78:in `normalize_options!'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/mapper.rb:61:in `initialize'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/mapper.rb:1304:in `new'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/mapper.rb:1304:in `add_route'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/mapper.rb:1284:in `decomposed_match'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/mapper.rb:1270:in `block in match'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/mapper.rb:1270:in `each'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/mapper.rb:1270:in `match'
    from /Users/academy/Projects/first_app/config/routes.rb:6:in `block in <top (required)>'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:260:in `draw'
    from /Users/academy/Projects/first_app/config/routes.rb:1:in `<top (required)>'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `block in load'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:40:in `each'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:26:in `block in updater'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/file_update_checker.rb:78:in `call'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/activesupport-3.2.12/lib/active_support/file_update_checker.rb:78:in `execute'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:27:in `updater'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `run'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `each'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/application.rb:136:in `initialize!'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/academy/Projects/first_app/config/environment.rb:5:in `<top (required)>'
    from /Users/academy/Projects/first_app/config.ru:3:in `require'
    from /Users/academy/Projects/first_app/config.ru:3:in `block in <main>'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
    from /Users/academy/Projects/first_app/config.ru:in `new'
    from /Users/academy/Projects/first_app/config.ru:in `<main>'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/commands/server.rb:46:in `app'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/commands/server.rb:70:in `start'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/commands.rb:50:in `tap'
    from /Users/academy/.rvm/gems/ruby-1.9.3-p385/gems/railties-3.2.12/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:21:20.780

请检查您的控制器。内容应该是这样

```
#app/controllers/users_controller.rb
class UsersController < ApplicationController
  def new
  end
end 
```

和你的 routes.rb

```
#config/routes.rb
FirstApp::Application.routes.draw do

get "users/new"

root to: 'pages#home' 
```

在 rails 之前运行以下命令，以防万一：

```
bundle install
bundle update
rake db:migrate 
```

有时 rake db:reset 可能会有所帮助，但这会破坏并在您的开发环境中重建您的数据库。

# twig - 树枝和错误消息 - 这是正常的吗？

> ID：15100863
> 
> 赞同：0
> 
> 时间：2013-02-26T22:43:01.577
> 
> 标签：twig

我一直在 localhost 上测试 Twig ...这里的代码与[这个问题](https://stackoverflow.com/questions/14817159/twig-and-truncating-text)相同，但查询不同：

```
 <?php
// include and register Twig auto-loader
include 'Twig/Autoloader.php';
Twig_Autoloader::register();

// attempt a connection
try {
  $dbh = new PDO('mysql:dbname=world;host=localhost', 'root', 'mypass');
} catch (PDOException $e) {
  echo "Error: Could not connect. " . $e->getMessage();
}

// set error mode
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

// attempt some queries
try {
  // execute SELECT query
  // store each row as an object
  $sql = "SELECT manufacturer, model, modelinfo FROM automobiles WHERE id = '4' ";
  $sth = $dbh->query($sql);
  while ($row = $sth->fetchObject()) {
    $data[] = $row;
  }

  // close connection, clean up
  unset($dbh); 

  // define template directory location
  $loader = new Twig_Loader_Filesystem('templates');

  // initialize Twig environment
  $twig = new Twig_Environment($loader);

  // load template
  $template = $twig->loadTemplate('cars.html');

  // set template variables
  // render template
  echo $template->render(array (
    'data' => $data
  ));

} catch (Exception $e) {
  die ('ERROR: ' . $e->getMessage());
}
?> 
```

我有 3 条记录；我决定查询一条不存在的记录，看看 Twig 的错误处理是什么样的，因为我正在比较 Twig 和 Smarty - 出于兴趣，并且是为了一个项目。出现此错误消息：

```
Notice: Undefined variable: data in /Applications/MAMP/htdocs/mysite/twigtesting.php on line 42 
```

肯定会出现“未找到数据”的通知，还是我在这里错了？未定义的变量数据是指：

```
 // set template variables
  // render template
  echo $template->render(array (
    'data' => $data
  )); 
```

为什么会这样？我是 Twig 的新手，并且使用他们网站上的最新版本，这很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:57:30.667

您不会收到 Twig 错误，因为该错误不存在于模板中，而是存在于生成这些模板的代码中。

PHP 在将值`$data`放入数组时遇到问题，因为该变量不存在。

如果您想查看 twig 如何处理错误，您需要访问模板中不存在的变量。例如，放入`{{ notExisting }}`您当前的模板。

* * *

我已经可以说 Twig 通过在 PHP 中抛出解析异常来处理错误。Twig 抛出的所有异常都在扩展[`Twig_Error`](http://twig.sensiolabs.org/api/v1.4.0/Twig_Error.html)。要捕获这些，请使用`try { ... } catch (\Twig_Error $e) { ... }`块。

此外，Twig 可以抛出 3 种不同类型的异常：

*   [`Twig_Error_Syntax`](http://twig.sensiolabs.org/api/v1.4.0/Twig_Error_Syntax.html)当解析模板时发生错误（例如使用格式错误的标签）时抛出。
*   [`Twig_Error_Loader`](http://twig.sensiolabs.org/api/v1.4.0/Twig_Error_Loader.html)当 Twig 无法加载文件时抛出。`render()`使用方法或使用 Twig 中的某些文件功能（例如`{% extends ... %}`）时，可能会发生这种情况。
*   [`Twig_Error_RunTime`](http://twig.sensiolabs.org/api/v1.4.0/Twig_Error_Runtime.html)当运行时发生错误时抛出（例如扩展内的错误）。

# java - 如何在 GUI jButton 中添加侦听器？

> ID：15100866
> 
> 赞同：0
> 
> 时间：2013-02-26T22:43:21.637
> 
> 标签：java, swing, actionlistener, onclicklistener

```
 JButton bkButton = new JButton(new ImageIcon("src/Images/smallBArrow.bmp"));
    JPanel buttonPanel = new JPanel(new FlowLayout());
    buttonPanel.add(bkButton); 
```

使用动作侦听器，我需要能够单击并执行操作（返回、前进或刷新）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T22:49:13.457

这通常是通过匿名内部类完成的......

```
bkButton.addActionListener(new ActionListener() { 
    public void actionPerformed(ActionEvent e) { 
        backButtonPressed();
    } 
}); 
```

看到[这个](https://stackoverflow.com/questions/284899/how-do-you-add-an-actionlistener-onto-a-jbutton-in-java)答案

# cosine-similarity - 余弦相似度——一对多

> ID：15100867
> 
> 赞同：0
> 
> 时间：2013-02-26T22:43:23.013
> 
> 标签：cosine-similarity

我想知道是否有任何好的方法可以使用余弦相似度来比较单个文档和一组文档。显然，您可以计算单个文档和集合中每个文档之间的余弦相似度，但是如果这样做，您会取平均值吗？您是否会按与原始文档进行比较的每个其他文档的大小来衡量？我还想知道是否有任何方法可以将您要比较的文档集中的所有字数组合起来，以便最终只计算一次余弦相似度；在原始文档和“汇总”文档之间。我问的原因是我有大约 200,000 个文档要与单独的一组大约 50,000 个文档进行比较。将 200,000 个文档中的每个文档与 50 个文档中的每个文档进行比较，000 计算量很大，我不知道如果我最终还是要取某种平均值，是否真的有必要。我的汇总文档想法是一个很大的禁忌吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T17:46:01.223

有一种方法可以显着加快这一速度。关键是要注意词向量是稀疏的。因此，您希望将文档转换为按单词列组织的表格。每个单词一列。对于每一列，您只存储非零条目。这是每个实际包含该单词的文档的一行。然后，您通过遍历列来计算部分总和并收集每个文档的结果。这具有易于并行化的额外优点。

为了进一步加快速度，您为每个集合的每个单词创建一个列，并且只计算和分配不同集合文档的相同单词的部分总和。

# java - 根据用户输入的答案对学生的测试进行评分

> ID：15100873
> 
> 赞同：0
> 
> 时间：2013-02-26T22:43:35.690
> 
> 标签：java, arrays, for-loop, user-input

我必须

*   声明/初始化一个数组以保存 12 个问题的多项选择测验的正确答案，其答案是：'B'、'D'、'A'、'A'、'C'、'A'、'B'、' A'、'C'、'D'、'B'、'A'</li>
*   使用 for 循环将单个学生的答案读入另一个数组
*   “评分”测验并显示以下内容：
    *   学生姓名
    *   测验分数作为百分比到小数点后 1 位（例如：12 分中有 7 分显示为 58.3%）

进而

*   首先，在程序的顶部，询问用户班上有多少学生
*   循环并输入每个学生的答案，“评分”测验，并显示每个学生的结果
*   处理完所有学生后，以百分比（小数点后 1）显示高低分和平均测验分数的值

程序最终应该看起来像：

```
How many students are in the class? 2
Enter name for Student 1: Bob
Enter quiz score answers: <allow user to input 12 answers>
Bob
66.7%
Enter name for Student 2: Fred
Enter quiz score answers: <allow user to input 12 answers>
Fred
91.7%
The high score is 11 and the low score is 8
Average is: 79.2% 
```

我已经设置了这个数组，但我真的不知道如何使用 for 循环来实现它。

```
import java.util.*;

public class Lab4 {
public static void main(String[] args){
    Scanner s= new Scanner(System.in);
    String name;

    char [] answerKey= { 'B' , 'D' , 'A' , 'A' , 'C' , 'A' , 'B' , 'A' , 'C' , 'D' , 'B' , 'A' };
    char [] userAnswers = new char[answerKey.length];

}
} 
```

感谢到目前为止的帮助，我已经做了更多的工作，但是在输入答案后它给了我一个错误，这就是我所拥有的

```
import java.util.*;
import java.text.*;

public class Lab4 {
    public static void main(String[] args){
    Scanner s= new Scanner(System.in);
    String input;
    int students;
    int correctAnswers=0;

    char [] answerKey= { 'B' , 'D' , 'A' , 'A' , 'C' , 'A' , 'B' , 'A' , 'C' , 'D' , 'B' , 'A' };
    char [] userAnswers = new char[answerKey.length];

        DecimalFormat df = new DecimalFormat("#0.0");

    System.out.print("how many students are in your class?");
    input = s.nextLine();
    students=Integer.parseInt(input);

    String [] name = new String[students];

    int j=1;
    while(students>=j)
    {
        System.out.print("Enter name of student" + j + ": ");
        name[j] = s.nextLine();

        System.out.print("Enter quiz score answers");
            userAnswers[answerKey.length] = s.next().charAt(0);

        for (int i = 0; i < userAnswers.length; ++i)
        {
            if(userAnswers[i]==answerKey[i]);
            correctAnswers++;
        }

        System.out.print((df.format(correctAnswers/answerKey.length)) + "%");
    j++;

    }
    }
} 
```

> 错误消息是 Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 12 at Lab4.main(Lab4.java:29)

我不确定这意味着什么或如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:59:07.147

这是一个关于数组的快速教程的跳转-> [http://www.learn-java-tutorial.com/Arrays.cfm#.US09R-sjqy0](http://www.learn-java-tutorial.com/Arrays.cfm#.US09R-sjqy0)

如评论中所述，我们不会为您编写代码，但我会尝试提供一些有用的指示：

您想要提示用户班级中有多少学生，这应该在您的班级中教授。接受该输入并将其存储在变量中。

创建一个`while`循环来接受每个学生的数据。循环应该只运行用户声明有学生的次数。

在循环中接受您所有的学生数据、答案、姓名等。

收集完所有数据后，您需要将学生的答案与密钥进行比较。您可以使用`for`循环或`while`循环来执行此操作。我会推荐一个 for 循环，创建某种计数器来跟上有多少答案是正确的或不正确的，然后您的选择然后在循环之后进行数学运算以获得您的百分比。

打印结果并重新开始循环。

关于数组的 Java 文档：http: [//docs.oracle.com/javase/6/docs/api/java/lang/reflect/Array.html](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Array.html)

一些快速数组特定的指针：

访问一个数组：

```
String[] array = {"a", "b", "c", "d"}; //creates array
System.out.println( array[0] ); //prints out "a"
System.out.println( array.length ); //prints out "4", the number of elements in the array 
```

希望这可以帮助！

# c# - 解决 Global.asax 中的 Ninject ILogger

> ID：15100888
> 
> 赞同：1
> 
> 时间：2013-02-26T22:44:42.173
> 
> 标签：c#, .net, asp.net-mvc, ninject, global-asax

我正在尝试在MVC4 项目的*global.asax中使用依赖解析器来获取对**Ninject.Extensions.Logging.ILogger*的引用，但它抛出了*NullReferenceException*。我在项目的其他地方使用构造函数注入来获取 ILogger 的实例，并且可以完美运行。

```
protected void Application_EndRequest()
{
    if (Context.Response.StatusCode == 404)
    {
        Response.Clear();

        var rd = new RouteData();
        rd.Values["controller"] = "Error";
        rd.Values["action"] = "NotFound";

        //this line throws a NullReferenceException with the stack track below
        var logger = DependencyResolver.Current.GetService<ILogger>();

        IController c = new ErrorController(logger);
        c.Execute(new RequestContext(new HttpContextWrapper(Context), rd));
    }
}

at Ninject.Extensions.Logging.LoggerFactoryBase.GetLogger(IContext context) in c:\Projects\Ninject\ninject.extensions.logging\src\Ninject.Extensions.Logging\LoggerFactoryBase.cs:line 61
at Ninject.Extensions.Logging.LoggerModuleBase.<Load>b__0(IContext context) in c:\Projects\Ninject\ninject.extensions.logging\src\Ninject.Extensions.Logging\LoggerModuleBase.cs:line 26
at Ninject.Activation.Providers.CallbackProvider`1.CreateInstance(IContext context) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Providers\CallbackProvider.cs:line 45
at Ninject.Activation.Provider`1.Create(IContext context) in c:\Projects\Ninject\ninject\src\Ninject\Activation\Provider.cs:line 38
at Ninject.Activation.Context.Resolve() in c:\Projects\Ninject\ninject\src\Ninject\Activation\Context.cs:line 157
at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 386
at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
at Ninject.Web.Mvc.NinjectDependencyResolver.GetService(Type serviceType) in c:\Projects\Ninject\ninject.web.mvc\mvc3\src\Ninject.Web.Mvc\NinjectDependencyResolver.cs:line 56
at System.Web.Mvc.DependencyResolverExtensions.GetService[TService](IDependencyResolver resolver)
at My.WebApp.MvcApplication.Application_EndRequest() in c:\Dev\Project\My.WebApp\Global.asax.cs:line 92 
```

如果我用以下内容替换 DependencyResolver 行，它可以工作，但是可以创建多个 Kernel 实例吗？

```
var kernel = new StandardKernel();
ILoggerFactory loggerFactory = kernel.Get<ILoggerFactory>();
var logger = loggerFactory.GetCurrentClassLogger(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:23:09.520

您不能这样`Get<>`做，`ILogger`因为在这种情况下，它不会在任何地方注入，并且无法评估类型。你有两个选择：

1.  属性将记录器注入全局 asax
2.  或者更好地实现 IHttpModule 并注册 Application.EndRequest 事件。在这里你可以进行构造函数注入

# jquery - 利用fancybox、jquery-isotope 和截断文本，合而为一！（哦，它也在 Drupal 中）

> ID：15100891
> 
> 赞同：1
> 
> 时间：2013-02-26T22:44:48.573
> 
> 标签：jquery, drupal, fancybox, jquery-isotope, truncate

我们将 Drupal 用于我们维护的站点之一（并将 JQuery 作为库）。我们的页面之一是使用 jquery-isotope 插件（特别是 views-isotope 模块）在视图中排序，并使用 fancybox 来完整显示正文字段的内容。这是因为，就目前而言，body 的大部分内容都被 css 高度和溢出：隐藏。

可想而知，如此粗暴的方法看起来并不漂亮。大部分文字都被剪掉了，留下多余的衬线之类的东西，让它看起来特别“脏”。那么，下一步是截断文本并附加一个“...”，这样文本就不会被截断。

但是，fancybox 会将内容按原样拉入叠加层。因此，当您截断正文的文本时，它也会在叠加层中截断。

基本上，我的问题是，有没有办法截断文本，直到点击打开fancybox？单击时如何将完整内容发送到fancybox而不会丢失截断？当我开始使用 jsfiddle 来解决这个问题时，我没有将 isotope 或 fancybox 合并到我的计算中：我只是用一个子字符串构建它，克隆原始内容，然后在点击时替换子字符串。但是，正如您可以想象的那样，这会破坏页面，因为没有什么可以告诉它只针对fancybox 执行此操作，而不仅仅是随机执行。我也不知道如何在 fancybox 关闭时恢复文本的截断。

这是我的[jsfiddle](http://jsfiddle.net/KwEeq/22/)。

这是html：

```
<div class="element">
    <div class="item">
        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy
            nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut
            wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit
            lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure
            dolor in hendrerit in vulputate velit esse molestie consequat, vel illum
            dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio
            dignissim qui blandit praesent luptatum zzril delenit augue duis dolore
            te feugait nulla facilisi. </p>
    </div>
</div> 
```

这是CSS：

```
.item {
width:300px !important;
height: 150px;
overflow: hidden; } 
```

这是脚本：

```
var originalState = $(".element").clone().text();

$(".item").each(function () {
    if ($(this).text().length > 30) {
        $(this).text($(this).text().substr(0, 27));
        $(this).append('...');
    }
});

$(".element").click(function () {
    $(this).replaceWith(originalState);
}); 
```

我将如何将它与fancybox联系起来，以便在您单击之前修剪文本，fancybox获取全文，然后关闭时，事情会恢复到之前的修剪样式？

注意：如果我的代码有任何致命错误，请告诉我。我在 JavaScript 和 JQuery 方面还很年轻，但是非常努力地学习。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:38:24.537

你已经成功了一半。

由于您已经克隆了原始文本：

```
var originalState = $(".element").clone().text(); 
```

...您唯一需要做的就是将它用作fancybox的内容，所以不要这样：

```
$(".element").click(function () {
    $(this).replaceWith(originalState);
}); 
```

... 做这个 ：

```
$(".element").click(function () {
    $.fancybox(originalState);
}); 
```

请参阅**[分叉的 JSFIDDLE](http://jsfiddle.net/2RefS/)**

这将在 fancybox 中显示克隆的文本，并保留完整的修剪文本。

**编辑**（2013 年 2 月 28 日）：

如果您要克隆多个项目，那么您可以调整代码以将它们排列在一个数组中，并将 fancybox 分别绑定到每个项目，例如：

```
var originalState = new Array();
$(".item").each(function (i) {
    originalState[i] = $(this).clone().text();
    if ($(this).text().length > 30) {
        $(this).text($(this).text().substr(0, 27)).append('...');
    }
    $(this).click(function () {
        $.fancybox(originalState[i]);
    });
}); 
```

查看新的**[JSFIDDLE](http://jsfiddle.net/vcxDh/1/)**

# php - Codeigniter 2.x：为我的条目添加标签

> ID：15100893
> 
> 赞同：0
> 
> 时间：2013-02-26T22:44:54.897
> 
> 标签：php, codeigniter

我正在构建一个用户可以添加注释的应用程序。我希望用户能够为笔记添加一些标签并在之后对其进行过滤。到目前为止，我允许用户使用字符串工作并使用 LIKE %% 进行过滤。但这并不能完全满足我的需求，因为当有更多标签时，我可能需要搜索并非所有标签，使用运算符等。例如：stackoverflow 标签。

我正在考虑以下SQL结构

*   有一个名为“notes”的表，列名为“tag_id”
*   有一个名为“tags”的表，它为“tag_id”提供“文本”
*   一个函数，它翻译每个数组（向前和向后）并将其替换为相反的等价物 [numbers <=> tag translations for front end, and tag translations <=> number for the database and following filtering]

问题是：这样做是个好主意吗？我应该如何构建我的数据库？你知道任何可以帮助我的特定文章吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:09:30.113

如果您想要一张带有许多标签的便笺，我建议您颠倒您跟踪关系的方式。换句话说，单词有：

表注释
- 字段注释 ID
- 字段注释名称

表标签
- 字段标签 ID - 字段 noteid -
字段标签名

如果您想要多对多关系，则将该关系存储在第三个表中，该表将具有 3 列：1) linkid 2) tagid 3) noteid 。

然后，您可以通过查询标签表 where noteid=noteid 或对表进行联接来检索特定标签的所有标签 - 实际联接将取决于您要执行的操作

# testing - 用小团队（和很少的时间）对大型项目进行手动与自动测试

> ID：15100894
> 
> 赞同：0
> 
> 时间：2013-02-26T22:44:57.380
> 
> 标签：testing, process, automated-tests

我在一个由 5 名程序员组成的小型开发团队工作，其中没有人有任何整体测试经验。我们开发的产品是一个复杂的 VMS，基本上由一个（独立的）视频服务器和一个用于查看实况和录制视频的客户端组成。由于视频处理需要大量硬件能力，因此该软件通常部署在多台服务器上。

我们使用精简版的功能驱动开发。在过去的几个月中，实现了许多功能，几乎没有时间花在 QA 上。

我目前正在研究一种方法，让我们尽可能（时间）高效地测试我们的软件。我知道围绕测试构建的软件方法论，例如 TDD。然而，由于许多特性是围绕分布式架构构建的，因此很难为单个特性编写单独的测试。鉴于许多功能需要一些无穷无尽的场景，因此可以将其部署以进行复制以便正确测试。

例如，最近我们开发了一种故障转移功能，其中一个或多个空闲服务器将监视其他服务器，并在发生故障时取代它。可能的情况包括位于远程位置或不同子网中的故障转移服务器，或者一次有多个故障服务器。

手动设置这些场景会花费大量宝贵的时间。尽管我知道在这种情况下总是需要手动初始化，但我似乎无法找到一种方法来自动化这些类型的测试（最好在实现功能之前定义它们）而无需投入同等或更大的资金实际创建自动化测试的时间。

有没有人在类似环境中有任何经验，或者可以告诉我更多关于适合这种环境的（自动化）测试方法或技术的信息？如果它以显着的方式增强测试，我们愿意推翻我们当前的开发过程。

提前感谢您的任何意见。请原谅我的语法，因为英语不是我的第一语言:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:08:13.423

我通过考虑金字塔中的层来处理测试策略。

金字塔的第一层是你的单元测试。我将单元测试定义为执行类的单个方法的测试。系统中的每个类都应该有一套与之相关的测试。并且每个方法都应该在该套件中包含一组测试。这些测试可以而且应该存在于模拟环境中。

这是测试和质量策略的基础。如果你在这里有可靠的测试覆盖率，很多问题都会被扼杀在萌芽状态。这些是您将要创建的所有测试中最便宜和最简单的。您可以在这里获得巨大的收益。

金字塔的下一层是您的功能测试。我将功能测试定义为对模块中的类进行测试的测试。这是您测试各种类如何相互交互的地方。这些测试可以而且应该存在于模拟环境中。

下一层是您的集成测试。我将集成测试定义为执行模块之间交互的测试。这是您测试各种模块如何相互交互的地方。这些测试可以而且应该存在于模拟环境中。

下一层是我所说的行为或工作流测试。这些是像客户一样使用系统的测试。这些是构建和维护的最昂贵和最难的测试，但它们至关重要。他们确认该系统按照客户期望的方式运行。

金字塔的顶端是探索性测试。根据定义，这是一项手动活动。在这里，您有一个知道如何使用该系统的人来完成它的步伐并努力发现问题。这在一定程度上是一门艺术，需要特殊的个性。但这对您的整体成功非常宝贵。

我上面描述的只是你需要做的一部分。下一部分是设置持续集成/持续部署 (CI/CD) 管道。

每当代码提交到您的一个存储库时，我确实希望您有一个像这样大的项目分解成单独的存储库，该组件应该进行静态分析（即对其进行 lint），构建，针对它执行测试，收集代码覆盖率数据。

定期构建系统的每个组件的行为将有助于解决问题。将其与针对它运行的单元/功能/集成测试相结合，您将发现很多问题。

构建组件后，应将其部署到测试或登台环境中。此过程必须是自动化的并且能够在无人值守的情况下运行。我强烈建议您考虑在此过程中使用[Opscode的](http://www.opscode.com/)[Chef 。](http://www.opscode.com/chef/)

一旦您将其部署在暂存或测试环境中，您就可以开始使用工作流和行为测试来实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-25T03:19:31.513

我首先通过以下方式进行测试：

*   为功能和自动化测试选择 P0/P1 测试用例
*   选择我将使用什么框架以及为什么
*   在手动进行发布测试时获取工具和框架设置
*   构建一个 MVP，至少自动化高优先级测试用例
*   在构建了每天运行的回归测试用例的测试套件之后。

最重要的是你必须从 MVP 开始。

# javascript - 即使在覆盖 module.exports 之后，模块也是一个空对象

> ID：15100902
> 
> 赞同：0
> 
> 时间：2013-02-26T22:45:13.190
> 
> 标签：javascript, node.js, class, module, export

这是 class.js 中的一些类：

```
function Class(value1, value2) {
  this.value1 = value1;
}

Class.prototype = {
  value1: "default_value",
  method: function(argument) {
    this.value2 = argument + 100;
  }
};

module.exports = exports = Class; 
```

这是我想在其中使用此类的文件：

```
var Class = require('../classes/class.js');
// (...)
var o = new Class(1,22); 
```

我得到的是一个错误：

```
TypeError: object is not a function 
```

确实，`Class`是`{}`。我希望这会有所帮助：[Node.js 对象不是函数 - module.exports](https://stackoverflow.com/questions/9893592/node-js-object-is-not-a-function-module-exports)，但我按照他们所说的做了一切。我的情况有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:47:39.167

```
module.exports = Class; 
```

应该是你所需要的。

注意：不过，您的代码对我有用，所以也许您不需要正确的 class.js

# jquery - 如何使用jQuery从body元素中提取类？

> ID：15100909
> 
> 赞同：3
> 
> 时间：2013-02-26T22:45:54.820
> 
> 标签：jquery

我是 jQuery 新手，仍在学习正确的做事方式。从 body 元素中提取类的最佳方法是什么？

具体来说，我正在尝试提取 WordPress 页面的 Post ID（如下所示：

```
<body class="single single-project postid-20 logged-in"> 
```

所以我可以将它插入到新的 3.5 上传器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:49:05.003

您可以像这样获得身体上的课程：

```
$('body').attr('class'); 
```

但是，这将返回字符串`single single-project postid-20 logged-in`。然后，您可以获取该字符串并通过各种方法获取所需的类。我更喜欢避免使用正则表达式，并且可能会使用这样的东西：

演示：http: [//jsfiddle.net/p6Ksd/](http://jsfiddle.net/p6Ksd/)

```
var postid;    
$.each($('body').attr('class').split(' '), function (index, className) {
    if (className.indexOf('postid') === 0) {
        postid = className;
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T22:49:50.700

根本不需要 jQuery（它没有任何帮助）。您可以在类名上使用正则表达式：

```
var id, matches = document.body.className.match(/(^|\s)postid-(\d+)(\s|$)/);
if (matches) {
    // found the id
    id = matches[2];
} 
```

注意：此正则表达式比其他正则表达式更小心，因为它需要在匹配的内容之前和之后使用类名分隔符（空格或字符串的存在/结尾）。

工作演示：http: [//jsfiddle.net/jfriend00/JcDtJ/](http://jsfiddle.net/jfriend00/JcDtJ/)

# perl - 即使 curl 有效，net::oauth 也会返回 401 未经授权

> ID：15100910
> 
> 赞同：0
> 
> 时间：2013-02-26T22:46:04.747
> 
> 标签：perl, oauth

我正在尝试从[https://launchpad.net](https://launchpad.net)请求一个令牌，根据文档，它只需要一个到 /+request-token 的 POST，其中包含 oauth_consumer_key、oauth_signature 和 oauth_signature_method 的表单编码值。通过 curl 提供这些项目按预期工作：

```
curl --data "oauth_consumer_key=test-app&oauth_signature=%26&oauth_signature_method=PLAINTEXT" https://launchpad.net/+request-token 
```

但是，当我尝试通过我的 perl 脚本执行此操作时，它给了我一个 401 未经授权的错误。

```
#!/usr/bin/env perl

use strict;
use YAML qw(DumpFile);
use Log::Log4perl qw(:easy);
use LWP::UserAgent;
use Net::OAuth;
$Net::OAuth::PROTOCOL_VERSION = Net::OAuth::PROTOCOL_VERSION_1_0A;
use HTTP::Request::Common;
use Data::Dumper;
use Browser::Open qw(open_browser);

my $ua = LWP::UserAgent->new;

my ($home)           = glob '~';
my $cfg              = "$home/.lp-auth.yml";
my $access_token_url = q[https://launchpad.net/+access-token];
my $authorize_path   = q[https://launchpad.net/+authorize-token];

sub consumer_key { 'lp-ua-browser' }
sub request_url {"https://launchpad.net/+request-token"}

my $request = Net::OAuth->request('consumer')->new(
    consumer_key     => consumer_key(),
    consumer_secret  => '',
    request_url      => request_url(),
    request_method   => 'POST',
    signature_method => 'PLAINTEXT',
    timestamp        => time,
    nonce            => nonce(),
);

$request->sign;
print $request->to_url;

my $res = $ua->request(POST $request->to_url, Content $request->to_post_body);
my $token;
my $token_secret;
print Dumper($res);
if ($res->is_success) {
    my $response =
      Net::OAuth->response('request token')->from_post_body($res->content);
    $token        = $response->token;
    $token_secret = $response->token_secret;
    print "request token ",       $token,        "\n";
    print "request token secret", $token_secret, "\n";
    open_browser($authorize_path . "?oauth_token=" . $token);
}
else {
    die "something broke ($!)";
} 
```

我尝试了使用`$request->sign`和不使用它，因为我认为在请求令牌阶段不需要这样做。无论如何，对此的任何帮助将不胜感激。

更新，切换到 LWP::UserAgent 并且必须同时传递 POST 和 Content ：

```
my $res = $ua->request(POST $request->to_url, Content $request->to_post_body); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:18:28.683

抱歉，我无法通过我的平板电脑进行验证，但您应该使用最新的 Perl 安装和使用

```
use LWP::Protocol::https; 
```

[http://blogs.perl.org/users/brian_d_foy/2011/07/now-you-need-lwpprotocolhttps.html](http://blogs.perl.org/users/brian_d_foy/2011/07/now-you-need-lwpprotocolhttps.html)

# unit-testing - 从不同的可执行文件收集单元测试输出的框架？

> ID：15100911
> 
> 赞同：2
> 
> 时间：2013-02-26T22:46:07.837
> 
> 标签：unit-testing, testing, automated-tests

我负责清理旧的单元测试环境。现有环境包含大量可执行文件（1000 多个 shell 脚本、已编译的二进制文件等），每个都返回代码 0 或 1，并根据结果返回一些输出。测试也可能超时。一组 PERL 脚本通过，运行每个可执行文件，并将结果收集到一个大的 XML 文件中，该文件被呈现到一个网页中。这个系统工作得很好，但不是非常可扩展或快速。

除了清理/加速这个，我想实现并发测试。现在测试一次运行一个。许多测试需要资源锁（端口、文件等），并且没有列出哪些可以安全同时运行。这里的一个选项是在某种虚拟机中运行每一个。

是否有针对这种情况设计的框架或工具？如果我必须编写自己的全新系统，最好的方法是什么？我的限制是我无法更改 1000 多个测试可执行文件。我正在考虑类似 PyUnit 的 Python 单元测试，它使用 subprocess 或类似方法来执行现有测试并将结果转换为 Pythonic 格式。这是矫枉过正吗？这样的系统能否支持进程隔离以避免测试之间的死锁和竞争条件？在最坏的情况下，我正在考虑使用 Python 将 SSH 连接到几个 VM 之一来运行测试。

任何帮助或指导将不胜感激。

编辑：Python 不是绝对必要的。另一种解决方案可能只是将测试集分成几个 M 大小的块，并通过 SSH 在独立的 VM 中运行每个测试，直到完成所有 M 大小的块。我希望有一个工具可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:26:37.547

没有开箱即用的或根据您的需求定制的解决方案，我知道它可以解决您面临的问题。

查看您的问题，有几个不同的需求很突出：

*   测试标记
*   测试执行
*   测试结果捕获

您需要解决的第一个问题是您将如何识别和跟踪您可以在给定环境中同时执行的测试等。

如果您使用[nose](https://nose.readthedocs.org/en/latest/)（即对python 进行更好的测试），您将能够使用[属性选择器插件](https://nose.readthedocs.org/en/latest/plugins/attrib.html)来标记具有各种属性的测试。

鼻子还可以帮助您执行测试，并且与测试标记结合使用时，将允许您并行运行测试等。使用鼻子，您应该能够运行外部可执行文件并根据其状态代码进行断言。

您面临的最后一个问题是如何以专有格式捕获测试输出并将其转换为可被现成工具提取的格式。再说一次，我相信鼻子可以帮助你。您可以构建一个[鼻子插件](https://nose.readthedocs.org/en/latest/developing.html)，它将采用您的专有格式并将其转换为 XUnit 格式并以这种方式报告结果。

考虑到以上所有因素，我将如何处理这种情况：

*   基于鼻子创建一个测试包装类
    *   可以标记
    *   执行程序并捕获结果输出
    *   将该输出转换为 XUnit
*   为每个测试创建一个包装器
    *   弄清楚如何自动化这个过程，因为它会很乏味
*   构建一个测试执行工具，它
    *   启动一个或多个虚拟机
    *   加载并运行测试包装器
    *   捕获结果

# xml - DITA 中的关键字与数据元数据？

> ID：15100912
> 
> 赞同：8
> 
> 时间：2013-02-26T22:46:07.823
> 
> 标签：xml, dita

DITA 中有两种“通用”类型的元数据标记，即数据元素和关键字元素。当然还有 othermeta，但显然它应该很快就会被弃用，而且这个名字暗示它无论如何都是最后的手段。

因此，该关键字似乎与 Web 应用程序中的标签非常相似，即通常用于“folksonomies”的标签。但是数据和关键字之间的确切区别是什么，什么时候应该使用哪个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:03:48.187

该`<data>`元素主要用于专业化，因此直接使用它可能不明智。`<keyword>`元素更好。

这个：

> ```
>  <metadata>
>         <keywords>
>             <keyword>red</keyword>
>             <keyword>green</keyword>
>             <keyword>blue</keyword>
>         </keywords>
>     </metadata> 
> ```

将在 DITA-OT XHTML 转换中对此进行渲染：

> ```
> <head>
>   <meta name="DC.subject" content="red, green, blue"/>
>   <meta name="keywords" content="red, green, blue"/>
> </head> 
> ```

如果您想添加标签，我会考虑使用主题方案映射，这将允许您包含受控值列表。

如果您专门化`@base`or`@props`属性，则可以添加具有更多控制权的元数据。在这里，我们有一个`@props`专门用于 的属性`@era`。

然后，您可以将该`@era`属性添加到主题中的`<topicref>`元素或地图中的元素。

```
<subjectdef keys="era_attributedef">
  <topicmeta>
  <navtitle>Era of production by decade and producer</navtitle>
</topicmeta>

 <subjectdef keys="producer">
     <hasInstance>
         <subjectdef keys="sixties">
             <subjectdef keys="verity_lambert"/>
             <subjectdef keys="john_wiles"/>
             <subjectdef keys="innes_lloyd"/>
             <subjectdef keys="peter_bryant"/>
             <subjectdef keys="derrick_sherwin"/>
         </subjectdef>

         <subjectdef keys="seventies">
             <subjectdef keys="barry_letts"/>
             <subjectdef keys="philip_hinchcliff"/>
             <subjectdef keys="graham_williams"/>
         </subjectdef>

         <subjectdef keys="eighties">
             <subjectdef keys="john_nathan-turner"/>
         </subjectdef>
     </hasInstance>
 </subjectdef> 
```

```
<enumerationdef>
    <attributedef name="era"/>
    <subjectdef keyref="era_attributedef"/>
</enumerationdef> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T22:22:35.567

你在这里有点偏离轨道；关键字元素不是元数据元素。关键字元素是通用文本元素，通常用于产品名称。我认为您可能想要在此处指定的元素是关键字元素。此外，您真的不想注销 othermeta 元素；它没有被弃用并且非常有用。

**关键字元素**

关键字元素可以在主题或地图级别使用。它包含来自主题词汇表的术语列表，用关键字或索引词元素标记。关键字和索引词元素被视为元数据元素，它们应在适合媒体的输出中反映出来。indexterm 元素通常生成索引；在 XHTML 输出中，关键字元素通常被添加到 XHTML 中并用于搜索引擎优化。（这是 DITA-OT 的标准功能，尽管 DITA-OT 附带的免费 PDF 渲染引擎不会生成索引。）

**数据元素**

按原样使用时，数据元素表示 DITA 主题或映射中的属性。以下是关键方面：

*   属性的主题是包含数据元素的元素。如果该属性作为一个整体应用于一个主题，它应该进入主题序言元素或指向该主题的 topicref 中的 topicmeta 元素中。
*   数据元素上的@name 属性是处理器的主要标识符。
*   财产的价值可以用几种不同的方式表达：
    *   文本值，通常使用@value 属性表示
    *   使用@href 属性引用另一个资源（主题、图像、Web 资源等）
    *   由嵌套数据元素组成的复杂结构
*   您可以使用可选的标题元素为属性提供标签。

默认情况下，处理器忽略数据元素的内容。但是，可以构建自定义处理，使用特定数据元素的内容进行格式化等。

作为专业化的基础，数据元素特别有用。它支持更精确的语义，以及特定元素的受控属性列表的枚举。如果您检查 bookmap 和学习与培训专业化中使用的元数据元素，您可以看到许多将其用作专业化基础的示例。

有关一些具体示例，请参阅[DITA 1.2 规范中的数据元素主题。](http://docs.oasis-open.org/dita/v1.2/os/spec/langref/data.html#data "DITA 1.2 规范中的数据主题")

**其他元元素**

othermeta 元素旨在保存似乎没有现有元数据元素适用的内容。它本质上包含一个名称和值对。您使用@name 属性来命名属性并使用@content 属性来保存值。

**什么时候应该使用哪个特定元素？**

*   使用**关键字**元素指定适用于特定主题的索引词和关键字，尤其是在生成的输出中应使用关键字元素的内容时。
*   使用**数据**元素在 DITA 主题或 DITA 映射中嵌入属性，尤其是作为自定义处理的辅助或收集属性以进行自动处理。
*   使用**数据**元素作为专业化的基础。
*   使用**othermeta**元素来保存不存在语义元素的名称和值对。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T08:25:53.057

确切的区别？有很多不同之处。阅读规范（对不起，我并不是说听起来不友好）。

这是与已经提到的规范的一个区别，但我认为值得强调，因为它可能会帮助您决定使用哪个（或者更确切地说，帮助您决定是否使用 <data>）：

> 默认情况下，处理器应忽略 <data> 元素的内容，因此 <data> 元素应仅用于属性，**而不应将用于格式化的文本嵌入主题主体的流程中**。

（另请参阅规范开头的其他文本：“自定义处理可能......”。）

您可以使用 <keyword> “将用于格式化的文本嵌入主题主体流的一部分”，但您不应该使用 <data> 这样做。

你能描述一下你的具体用例吗？（您要标记什么信息？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T17:32:18.280

数据元素具有@href 以及作为键的@name 和@value 属性。

因此，您可以定义构建可能需要的任何类型的属性。

```
<data name="currentTopNavSection" value="profil"/> 
```

我有几个场景需要根据文档的受众提供一些路径信息。我可以为此使用数据元素。

```
<data audience="lifeg" name="active-audience" value="lifeg"/> 
```

这个让我在过滤文档时知道哪些是活跃的受众

另一个例子是附加一个特定于地图的 javascript

我目前正在研究 webmap 专业化，我专门化数据以包括 javascript 和 css 。

***更新2 ***

数据元素可以嵌套。Eliot Kimber 在一篇文章中解释了这一点。我不记得是哪一个了。这个想法是它可以表示属性的集合

```
 <data name="parent">
        <data name="chilproperty1" value="abc"/>
        <data name="chilproperty2" value="abc"/>
   </data> 
```

这种结构对于专业化目的非常有用。

据我了解，数据元素并不具体。这是作者记录非常具体的需求的一种方式，无论是否专业。稍后在构建过程中使用 xsl 检索值很容易。

# python - 使用 cv2 进行色彩空间转换

> ID：15100913
> 
> 赞同：1
> 
> 时间：2013-02-26T22:46:11.663
> 
> 标签：python, opencv

我正在从`cv`to迁移，`cv2`并且很难找到该功能的等效项`cv.CvtColor`。

我阅读了现有的文档，`cv2.cvtColor`但我不知道如何使用第三个参数。

`cv2.CV_BGR2Lab`不存在。也没有`cv2.CV2_BGR2Lab`，当我使用`cv.CV_BGR2Lab`所有我得到的是一个错误：

`cv2.cvtColor(img, img, cv.CV_BGR2Lab)`

`TypeError: only length-1 arrays can be converted to Python scalars`

产生问题的一段简单代码：

```
img = cv2.imread(path)
cv2.cvtColor(img, img, cv.CV_BGR2Lab) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T23:31:26.407

我认为您只是参数顺序错误。cv2[文档](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cv2.cvtColor)按以下顺序显示它们：`cv2.cvtColor(src, code[, dst[, dstCn]])`，这与[cv](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cv.CvtColor)中的顺序不同，顺序为：`cv.CvtColor(src, dst, code)`。

因此，基于此，连同其他[答案](https://stackoverflow.com/a/15339919/355230)中有关颜色转换常量名称更改的信息，您需要使用：

```
cv2.cvtColor(img, cv2.COLOR_BGR2LAB, img) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T13:32:07.843

你在寻找这个常数

```
cv.CV_BGR2Lab --> cv2.COLOR_BGR2LAB 
```

并且所有其他用于颜色转换的常数都遵循类似的模式

```
cv.CV_<CONSTANT> --> cv2.COLOR_<CONSTANT> 
```

我仍然没有找到一个好的来源（甚至是文档）来确定如何翻译常量。

**更新：**有关常量的更多信息， 请参见[此处](http://answers.opencv.org/question/8861/what-opencv-constants-are-available)和[此处的讨论。](https://stackoverflow.com/questions/15328426/what-constants-codes-are-available-in-opencv)

# django - django tastepie 错误“没有这样的表”

> ID：15100914
> 
> 赞同：2
> 
> 时间：2013-02-26T22:46:11.980
> 
> 标签：django, tastypie

我有一个 Django 项目，它使用了美味的馅饼。当我尝试从 auth_user 中删除一行时，如下所示：

```
user.delete() 
```

它引发了一个错误

```
DatabaseError: (1146, "Table 'develop.tastypie_apikey' doesn't exist") 
```

我搜索了一段时间，知道创建新行时可能会发生这种情况，但我正在尝试删除。

有谁知道此时可能出了什么问题？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T23:35:45.923

如果您使用 south-migration 从命令行运行此命令：

```
django-admin.py migrate tastypie 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T23:05:44.283

sweetpie 应用程序有自己的一组数据库表，其中一个是`tastypie_apikey`. 这要求当您添加`tastypie`到`INSTALLED_APPS`运行syncdb 的变量时。

```
python manage.py syncdb 
```

这将自省您的数据库并创建任何缺失的表。

# youtube-api - Youtube 搜索因 GoogleJsonResponseException 失败：403 Forbidden

> ID：15100916
> 
> 赞同：2
> 
> 时间：2013-02-26T22:46:25.827
> 
> 标签：youtube-api, android-youtube-api

这似乎是一个基本程序，但我不知道出了什么问题。

logcat 输出错误：

```
com.google.api.client.googleapis.json.GoogleJsonResponseException:
403 Forbidden
{
"code" : 403, 02-26
"errors" : [ {
"domain" : "usageLimits",
"message" : "Access Not Configured",
"reason" : "accessNotConfigured"
}
"message" : "Access Not Configured" 
```

我在 code.google.com API 控制台中配置了 YouTube 数据 API，并为我的 Android 应用程序获得了一个简单的访问 API 密钥。

代码如下；与搜索示例代码相同：

```
YouTube youTube = new YouTube.Builder(HTTP_TRANSPORT, JSON_FACTORY,
  new HttpRequestInitializer() {
    @Override
    public void initialize(HttpRequest httpRequest) throws IOException {}
})
.setApplicationName("youtubeplayer")
.setYouTubeRequestInitializer(new YouTubeRequestInitializer(DEV_KEY))
.build();

YouTube.Search.List search = youTube.search().list("id,snippet");
//search.setKey(DEV_KEY);
search.setQ(videoName);
search.setType("video");

search.setFields("items(id/kind,id/videoId,snippet/title,snippet/thumbnails/default/url)");
search.setMaxResults(NUMBER_OF_VIDEO);
SearchListResponse searchListResponse = search.execute();
List<SearchResult> searchResultList = searchListResponse.getItems(); 
```

这是针对安卓的。我可以使用相同的密钥通过 YouTube Android 播放器 API 播放视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T13:49:07.070

您需要使用浏览器密钥来访问 Youtube Data API。Android 密钥仅用于 Youtube Player。

因此，只需在 DevConsole 中生成 Browser 密钥即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:52:39.560

1）您需要使用“keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android”获取您的 SHA1 密钥

2) 在 API 控制台中：使用此密钥和完整的包名称创建一个客户端 ID。

3) 在 API 控制台中：使用此密钥和完整的包名创建一个 Android 密钥。

4) 从控制台启用 YouTube Data API v3

# database - 从多个表中的mysql复杂选择查询

> ID：15100920
> 
> 赞同：0
> 
> 时间：2013-02-26T22:46:46.603
> 
> 标签：database, database-design, relational-database

餐桌访问；

字段[id,patient_id(fk),doctor_id(fk),flag(Xfk),type(Xfk),time_booked,日期,...]

Xfk = 它指的是其他表，但它不是必须存在的，所以我不使用约束。

```
SELECT `v`.`date`, `v`.`time_booked`, `v`.`stats`, `p`.`name` as pt_name, 
 `d`.`name` as dr_name, `f`.`name` as flag_name, `f`.`color` as flag_color,
 `vt`.`name` as type, `vt`.`color` as type_color

FROM (`visits` v, `users` p, `users` d, `flags` f, `visit_types` vt)

WHERE `p`.`id`=`v`.`patient_id` 
AND `d`.`id`=`v`.`doctor_id` 
AND `v`.`flag`=`f`.`id` 
AND `v`.`type`=`vt`.`id`
AND `v`.`date` >= '2013-02-27'
AND (v.date <= DATE_ADD('2013-02-27', INTERVAL 7 DAY))
AND (`v`.`doctor_id`='00002' OR `v`.`doctor_id`='00001')
ORDER BY `v`.`date` ASC, `v`.`time_booked` ASC; 
```

我有一个大数据！我的问题是，

1：我应该考虑使用联接而不是选择多个表吗？如果我应该为什么？

这个查询执行时间是 0.0009，所以我认为它很好，因为我在一个查询中获取了所有数据，或者这是不好的做法？

2：在选择部分我想说

如果 v.type != 0`select f.name,f.color`否则我不想在任何表格`flags f` **中选择它们，这可能吗？**

目前，如果未找到标志，它会复制所有行，就像标志表在行中的一样多！有什么办法可以防止这种情况吗？标志和访问类型表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:53:23.267

1.  如果它运行得很快，我就不会惹它。我通常更喜欢在 where 子句中使用连接而不是匹配内容。

2.  你有没有机会删除 ` 字符？在我看来，只是让阅读变得有点困难。

3.  查看 MySQL 的 case 语句：http: [//dev.mysql.com/doc/refman/5.0/en/case.html](http://dev.mysql.com/doc/refman/5.0/en/case.html)

```
 select case when v.type <> 0 then 
   f.name 
else 
   '' 
end as name, ... 
```

# matlab - Matlab：获取相邻坐标值 - && 操作数

> ID：15100937
> 
> 赞同：0
> 
> 时间：2013-02-26T22:47:38.700
> 
> 标签：matlab, matrix, coordinate, operand

我正在尝试从具有 id 值的二维矩阵中提取板上每个元素的相邻 id。

我有一个 ID 列表及其坐标（n 个元素），我正在创建以下内容：（仅左邻居的示例）。

```
%Left:
leftIndex = (currentLocationIndex - bSize);
hasLeft = leftIndex >= 1; %If element on first col, value will be 0 or negative
hasLeft = hasLeft(:) & board(leftIndex)==0; 
```

我得到：下标索引必须是真正的正整数或逻辑。

我想使用 && 操作数或其他一些逻辑的主体。leftIndex 包含表中当前索引的所有索引。有些是合法的有些不合法。如果 hasLeft 向量为真，则 leftIndex 向量值在“板”中是合法的。

仅当 hasLeft 为真时，如何检查向量的某个值中的邻居？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:52:52.267

我会做两件事：

首先，找到“所有邻居”，包括“非法”邻居。例如，如果索引是，`n, m`那么所有“潜在邻居”都是`[pn pm]= meshgrid(n+(-1:1), m+(-1:1));`. 请注意，这也包括点本身。

其次，通过根据数组的限制测试它们的值，仅屏蔽“合法”邻居。如果您有一个大小为 N x M 的二维数组，您可以使用

```
legal = find(pn>0 && pn <= N && pm > 0 && pm <= M && ~(pn==n && pm==m)); 
```

这应该给你（最多 8 个）所有合法邻居。显然，如果您不想要“小猫角”邻居，您可以更改创建`pn`and的语句`pm`。我希望你能明白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T04:23:11.977

我解决这个问题的方法是使用“try”语句来阻止索引是否合法，然后分配它，如果是。

这是我发现的最接近简单的检查索引合法性命令的东西。

这是一个代码来说明

初始化

```
M=4;  N=5;             
Mat=rand(M,N);
m=2; n=1; 
```

代码：尝试访问此元素...仅在成功时将元素分配为合法邻居

```
near= [m,n-1;m,n+1;m+1,n;m-1,n]; 
Neibs=[];          

for i =1:4
    try
        Mat(near(i,1),near(i,2));  
        Neibs=[Neibs;[near(i,1),near(i,2)]]; 
    catch
    end
end 
```

结果展示

```
BW=zeros(M,N);
if ~isempty(Neibs)
    for i =1:length(Neibs(:,1))
        BW(Neibs(i,1),Neibs(i,2))=true;
    end
end 
```

当然，一旦确定了这一点，改变大小、尺寸或邻域度量就不是问题了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T22:23:10.000

更仔细地阅读您的问题，并仅回答您的要求（在我阅读了您最近的一些其他问题后，这变得更加清晰......）：

您遇到的第一个问题是您的数组`leftIndex`可能包含 < 1 的值，因此不能在表达式中合法使用`hasLeft = hasLeft(:) & board(leftIndex)==0;`

为了解决这个问题，您需要`board`仅使用“有效”索引进行索引，您可以通过将前一行更改为

```
hasLeft = find(leftIndex >= 1); 
```

请注意，您的原始文件会`hasLeft = leftIndex >= 0;`生成与`leftIndex`. 相比之下，该`find`命令仅返回满足条件的元素的索引。现在我们还需要做两件事： 1) 找到`board`具有有效索引且值 >=0 的元素；2）将这些映射回“整个事物”的索引（不是子数组中的索引）。这是您的操作方法：

```
interestingSquare = (board(hasLeft)==0);
hasLeft = hasLeft(interestingSquare); 
```

最后一行将您从“子数组'hasLeft'中有趣正方形的位置”带回到“相对于原始`leftIndex`数组的位置。

我确实想知道您是否真的打算进行测试，`board == 0`但我敢肯定，如果这是一个错字，您会弄清楚的...

# ruby - 未定义的方法或变量错误（Rails）

> ID：15100939
> 
> 赞同：1
> 
> 时间：2013-02-26T22:47:41.080
> 
> 标签：ruby, ruby-on-rails-3

所以，我有评分

```
class Rating < ActiveRecord::Base
  attr_accessible :name
  has_many :parties
end 
```

和Party，属于Rating

```
class Party < ActiveRecord::Base
  attr_accessible :name, :rating_id
  belongs_to :rating
end 
```

在 show.html.erb 中用于评级视图

```
 <%=  @rating.parties %> 
```

显示属于此评级的所有各方。

错误：

```
undefined method `parties' 
```

我不明白为什么，如果我定义派对模式属于评级。在示例中看到过类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:54:49.220

因为您刚刚定义了两个表之间的关系，但是您创建了一个包含 :party 的属性，因此它报告为错误。

试试这个，看看。

```
class Rating < ActiveRecord::Base
  attr_accessible :name, :party
  has_many :parties
end 
```

并调用类似的东西：

`@rating.party`会给出你真正需要的答案

希望能帮助到你！

# c - C 要求结构或联合至少有一个成员

> ID：15100946
> 
> 赞同：1
> 
> 时间：2013-02-26T22:47:56.623
> 
> 标签：c, compiler-errors

当我尝试编译这段代码时，我从编译器中得到了一堆奇怪的错误。

我只是想写一个基本的链表，头文件在单独运行时编译得很好，但是当我编译 c 文件时，一切都崩溃了

链表.h

```
typedef struct Data
{
    char *title;
} Data;

typedef struct LinkedList
{
    LinkedList *next;
    Data *data;
} LinkedList;

LinkedList *createnew(void);
void destroylist(LinkedList *old);
Data *adddata(void);
void destroydata(Data *old); 
```

链表.c

```
#include <stdlib.h>
#include "linkedlist.h"

LinkedList *createnew(void) {
    LinkedList *newnode = (LinkedList *) malloc(sizeof(LinkedList));
    newnode->data = adddata();
    newnode->next = NULL;
    return newnode;
}

void destroylist(LinkedList *old) {
    destroydata(old->data);
    free(old);
    return;
}

Data *adddata(void) {
    Data *newdata = (Data *) malloc(sizeof(Data));
    newdata->title = NULL;
    return newdata;
}

void destroydata(Data *old) {
    free(old->title);
    free(old);
    return;
} 
```

最后编译器吐出什么

```
linkedlist.h(8): error C2016: C requires that a struct or union has at least one member
linkedlist.h(8): error C2061: syntax error : identifier 'LinkedList'
linkedlist.h(10): error C2059: syntax error : '}'
linkedlist.h(12): error C2143: syntax error : missing '{' before '*'
linkedlist.h(13): error C2143: syntax error : missing ')' before '*'
linkedlist.h(13): error C2143: syntax error : missing '{' before '*'
linkedlist.h(13): error C2059: syntax error : ')'
linkedlist.c(4): error C2143: syntax error : missing '{' before '*'
linkedlist.c(5): error C2065: 'LinkedList' : undeclared identifier
linkedlist.c(5): error C2065: 'newnode' : undeclared identifier
linkedlist.c(5): error C2059: syntax error : ')'
linkedlist.c(6): error C2065: 'newnode' : undeclared identifier
linkedlist.c(6): error C2223: left of '->data' must point to struct/union
linkedlist.c(7): error C2065: 'newnode' : undeclared identifier
linkedlist.c(7): error C2223: left of '->next' must point to struct/union
linkedlist.c(8): error C2065: 'newnode' : undeclared identifier
linkedlist.c(8): warning C4047: 'return' : 'int *' differs in levels of indirection from 'int'
linkedlist.c(11): error C2143: syntax error : missing ')' before '*'
linkedlist.c(11): error C2143: syntax error : missing '{' before '*'
linkedlist.c(11): error C2059: syntax error : ')'
linkedlist.c(11): error C2054: expected '(' to follow 'old' 
```

我很困惑，因为它看起来好像找到了两个文件，但是即使它单独工作正常，它的标题也有问题。任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T22:52:17.377

错误信息很奇怪，但是

```
typedef struct LinkedList
{
    LinkedList *next;
    Data *data;
} LinkedList; 
```

`LinkedList`不是定义中的已知类型，只有定义完成后才知道，必须是

```
typedef struct LinkedList
{
    struct LinkedList *next;
    Data *data;
} LinkedList; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T22:52:24.820

头文件不是自己编译的。它们的唯一用途是在`#include`其他地方使用。

标题中的错误是这部分：

```
typedef struct LinkedList  // <- defines the type 'struct LinkedList'
{
    LinkedList *next;      // <- attempts to use the type 'LinkedList', which isn't defined at this point
} LinkedList;              // <- defines the type 'LinkedList', or it would if the previous code were correct 
```

有几种可能的方法来解决这个问题：

```
// forget about 'LinkedList'; just use 'struct LinkedList' everywhere
struct LinkedList {
    struct LinkedList *next;
}; 
```

 *```
// use 'struct LinkedList' in its own definition but provide typedef to users
struct LinkedList {
    struct LinkedList *next;
};
typedef struct LinkedList LinkedList; 
```

 *```
// like the previous version, but combine struct + typedef
typedef struct LinkedList {
    struct LinkedList *next;
} LinkedList; 
```

还有我最喜欢的：

```
// establish alias first, then use it everywhere
typedef struct LinkedList LinkedList;
struct LinkedList {
    LinkedList *next;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:57:30.060

试试这个，它比其他建议更干净（**编辑**：我看到 melpomene 在我之前提到过这个）：

```
typedef struct Data Data;
struct Data
{
    char *title;
};

typedef struct LinkedList LinkedList;
struct LinkedList
{
    LinkedList *next;
    Data *data;
}; 
```

您会发现如果/当您继续使用 C++ 时，您可以删除 typedef 行。

如果您有相互引用的结构，请将所有 typedef 移到顶部，例如，

```
typedef Type1 Type1;
typedef Type2 Type2;

struct Type1
{
    Type2* link;
};

struct Type2
{
    Type1* link;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-19T03:00:17.967

除了添加`struct`before `LinkedList`，您可能需要在 Visual Studio 中将“compile as”选项显式设置为 c++。

我已经为这个 C2016 错误苦苦挣扎了一段时间，最终通过设置选项来修复它。**

# ios - 使用核心动画创建 2 个独立动画

> ID：15100948
> 
> 赞同：0
> 
> 时间：2013-02-26T22:48:03.787
> 
> 标签：ios, core-animation

假设我已经提交了一个持续 10 秒的动画，但是由于某种原因，我决定在那 10 秒内添加一个新动画，这可能还是第一个动画会阻止第二个动画？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:49:54.190

是的，有可能:) 只需同时提交动画或声明一个新动画然后提交动画，它将在不同的线程下运行。如果旧 iOS 版本存在一些我不知道的问题，只需将动画组件放在单独的子视图中并单独启动它们：)

# cpanel - mod_security 链适用于没有规则 ID 的 pre 2.7，但不适用于有规则 ID (cPanel) 的 2.7

> ID：15100950
> 
> 赞同：0
> 
> 时间：2013-02-26T22:48:16.327
> 
> 标签：cpanel, mod-security

在我的 cPanel 服务器上，当使用 cPanel 内置的 mod_security 2.7（通过 EasyApache 安装）时，此代码：

```
SecRule REQUEST_URI "!(/do_command)" chain "id:1234123478"
SecRule REQUEST_URI "\.php\?.*=(https?|ftp)\:/.*(cmd|command)=" 
```

生成此错误：

> /usr/local/apache/conf/modsec_rules/modsec2.vectro.conf 第 177 行的语法错误：SecRule 采用两个或三个参数、规则目标、运算符和可选操作列表

此代码适用于没有规则 ID 的 pre-2.7，但在 2.7 上使用时会出现此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T10:58:46.377

也许您可以使用有效的 mod_sec 规则进行尝试 :)

```
SecRule REQUEST_URI "!(/do_command)" "chain,phase:1,id:'1001',t:none,pass,nolog"
    SecRule REQUEST_URI "\.php\?.*=(https?|ftp)\:/.*(cmd|command)=" "t:none,ctl:ruleRemoveById=960015" 
```

# javascript - jquery检查是否选择了选项

> ID：15100951
> 
> 赞同：0
> 
> 时间：2013-02-26T22:48:16.287
> 
> 标签：javascript, html, css, jquery-selectors

我遇到一种情况，我需要查看是否选择了某个选项。当我单击按钮时，如果未选择某个选项，则选择框应变为红色并提示我。这没用。我对 if 语句有困难。有什么解决办法吗？

Javascript

```
$(document).ready(function(){

var $films = [];

$("#button").click(function(){
    var $titelBetyg = [];

    var $titel = $('#name').val();
    var $betyg = $('#options').val();

    if($titel == ""){
        $('#name').css('background-color', 'red');
        alert("Fail");
    }
    else if($betyg == "0"){
        $('#options').css('background-color', 'red');
        alert("Fail");
    }
    else{
        $titelBetyg.push($titel);
        $titelBetyg.push($betyg);
        $films.push($titelBetyg);
    }

    $('#rightbar').append($films);
});

}); 
```

HTML

```
<body>
<div id="page">
    <div id="header">
        <h1> Min filminsamling </h1>
    </div>
    <div id="leftbar">
        <form>
            <fieldset>
                <legend>Lägg till en film:</legend>
                Titel:
                <br><input type="text" name="name" id="name"><br>
                Betyg:
                <br><select id="options">
                    <option>Välj betyg här...</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>                        
                </select>
                <br><input type="button" name="button" value="Spara film" id="button">
            </fieldset>
            <fieldset>
                <legend>Sortera film:</legend>
                <input type="button" name="stigande" value="Högst betyg" id="stigande">
                <br><input type="button" name="fallande" value="Lägst betyg" id="fallande">
            </fieldset>
        </form>
    </div>
    <div id="rightbar">
        Filmer
    </div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:51:59.280

`$betyg == "0"`不起作用，因为根据 UI 不可能。

您的默认选项是……什么都没有。也许是一个空字符串，`""`; 无处`0`出现。

显式设置一个选项来检查，并检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:52:33.437

当您检查是否警告未选择任何内容时，您会查看“option”的值是否为“0”。然而，您实际上并没有为没有选择定义“0”的值，您只定义了“1”到“5”的值。如果您要求未定义值的值，我不确定对 Javascript 的期望是什么；我的第一个建议是为无选择定义值“0”，看看它是否有帮助。:)

# xml - XML 和 XSLT 浏览器问题

> ID：15100952
> 
> 赞同：-1
> 
> 时间：2013-02-26T22:48:19.760
> 
> 标签：xml, xslt, xpath, cross-browser

我正在[在线教程中学习 XML 和 XSLT](http://www.youtube.com/watch?v=E1eKCk1o5lo&feature=share&list=PLBF09D7B011F80BA7)中学习 XML 和 XSLT，并且遇到了一个 exampleS 的跨浏览器问题。

XML 文件在 Firefox 19.0 和 IE9 中正常运行，但在 Chrome 版本 25.0.1364.97 中没有。

知道为什么会发生这种情况，或者我应该怎么做才能避免浏览器问题？

这是我的 XML：

```
<?xml version="1.0" standalone="no" ?>

<?xml-stylesheet type="text/xsl" href="basic.xsl" ?>

<people>
    <husband employed = "Yes" >
        <name>Mark</name>
    <age>45</age>
    <wife>
        <wname>Janet</wname>
        <age>29</age>
    </wife>
    </husband>

    <husband employed = "No" >
        <name>Matt</name>
    <age>42</age>
    <wife>
        <wname>Annie</wname>
        <age>43</age>
    </wife>
    </husband>
</people> 
```

& 这是我的 basic.xsl 文件：

```
<?xml version="1.0"?>

<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
    <html>
    <body>
    <table border="2px">
        <tr>
        <xsl:apply-templates/>
        </tr>
    </table>
    </body>
    </html>
</xsl:template>

<xsl:template match="husband">
    <td>
    <xsl:value-of select="name"/>
    </td>
</xsl:template>

</xsl:stylesheet> 
```

Chrome 的控制台读数是：

> 从带有 URL 文件:///C:/Users/Ross/Desktop/XML%20Demos/people_externalXSL 的框架中加载 URL 文件：///C:/Users/Ross/Desktop/XML%20Demos/basic.xsl 的尝试不安全。 xml。域、协议和端口必须匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:21:09.853

尝试这个：

```
<xsl:template match="husband/name">
    <td>
    <xsl:value-of select="text()"/>
    </td>
</xsl:template> 
```

# arrays - Perl Getopt::Long 似乎没有修改数组中的现有值

> ID：15100960
> 
> 赞同：1
> 
> 时间：2013-02-26T22:49:13.127
> 
> 标签：arrays, perl, getopt-long

我正在尝试使用 Perl (v5.14.2) 将 3D 矢量作为单个命令行输入参数。

在浏览了[Getopt::Long 文档](http://perldoc.perl.org/Getopt/Long.html "perldoc.perl.org")之后，我决定从这个开始：

```
use Getopt::Long;
my @boxSize = (0, 0, 0);

GetOptions('box:f{3}' => \@boxSize);

print "Box size: $boxSize[0], $boxSize[1], $boxSize[2]\n"; 
```

使用参数运行此脚本会`-box 1.0 2.0 3.0`产生：

```
Box size: 0 0 0 
```

现在，如果我`@boxSize`未初始化：

```
use Getopt::Long;
my @boxSize; #= (0, 0, 0);

GetOptions('box:f{3}' => \@boxSize);

print "Box size: $boxSize[0], $boxSize[1], $boxSize[2]\n"; 
```

现在返回相同的脚本：

```
Box size: 1.0 2.0 3.0 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T23:05:00.093

我正要说你发现了一个错误，然后我检查了一些东西：事实证明，当这样使用时，值被附加了。您最终得到 6 个值`@boxSize`。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Getopt::Long;
my @boxSize = (0, 0, 0);

GetOptions('box:f{3}' => \@boxSize);

print "Box size: @boxSize\n"; 
```

您正在使用的功能被标记为实验性

> 警告：以下是实验性功能。

但考虑到您指定了三个值，也许这仍然应该被视为一个错误。

同时，简单的解决方法是检查是否添加了值，如果不使用默认值。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Getopt::Long;
my @boxSize;

GetOptions('box:f{3}' => \@boxSize);
@boxSize = (0, 0, 0) unless @boxSize;

print "Box size: @boxSize\n"; 
```

# ios - 表背景清晰 - 目标 c - 可可

> ID：15100962
> 
> 赞同：0
> 
> 时间：2013-02-26T22:49:20.583
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, uikit

嗨，我想显示没有任何背景颜色的表格视图，所以我使用以下代码将其清除

```
[uiTableView setBackgroundColor:[UIColor clearColor]]; 
```

这在新 iPad 和其他一代 iPad 中运行良好，但在 iPad 版本一中无法运行。表格以背景灰色显示。这与iOS 5有关吗？谁能告诉我我们是否可以清除第一版 iPad 中的背景颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:52:44.343

我在 iOS 5+ 下也注意到了同样的事情。试试这个：

```
[uiTableView setBackgroundColor:[UIColor clearColor]];
[uiTableView setBackgroundView:nil]; 
```

应该按预期工作。

编辑：如果您使用默认单元格，它们会覆盖`UITableView`，因此更改`UITableView`的背景颜色和视图不会做任何事情。`tableView:cellForRowAtIndexPath:`在你的方法中试试这个：

```
cellName.backgroundColor = [UIColor clearColor];
cellName.backgroundView = nil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:35:53.903

由于 tableview 有另外一个视图作为其背景。您可以通过两种方式设置背景颜色。

i) 设置 tableview 的背景颜色并将 backgroundView 设置为 nil。

```
[uiTableView setBackgroundColor:[UIColor clearColor]];
[uiTableView setBackgroundView:nil]; 
```

ii) 为 tableView backgroundView 设置 backgroundColor。

```
UIColor *backgroundColor = [UIColor clearColor];
uiTableView.backgroundView = [[UIView alloc] initWithFrame:self.tableView.bounds];
uiTableView.backgroundView.backgroundColor = backgroundColor; 
```

# visual-studio-2008 - 如何根据设备更改输出文件夹

> ID：15100965
> 
> 赞同：5
> 
> 时间：2013-02-26T22:49:40.040
> 
> 标签：visual-studio-2008, compact-framework, environment-variables, windows-ce, windows-mobile-5.0

首先，我将从我想要完成的工作开始，然后我将提供上下文细节：

当我选择开始调试时，我希望根据通过 Windows Mobile 设备中心连接的设备来更改输出目录。**澄清**：从我们的安装程序安装工作正常，但从 Visual Studio 调试给我带来了问题。

我正在使用 Visual Studio 2008。该项目是用 C# 为 Compact Framework 3.5 编写的智能设备项目，目标是 Windows Mobile 5.0 Pocket PC Device R2（根据项目设置）。我发现当我以这种设备类型为目标时，它可以在我们支持的所有 Windows Mobile 版本以及 Windows CE 6 上正常工作。任何建议的解决方案都必须在 Windows Mobile 和 Windows CE 上工作。

当我进入项目属性并转到设备选项卡时，它显示输出文件夹：和输出路径。如果我单击 ... 按钮，我可以将其更改为不同的默认值，甚至将其设置为根文件夹，然后完全指定我想要的确切路径作为子目录。在大多数设备上，如果我将其保留在（设备默认值）或从下拉列表中选择程序文件文件夹，它工作正常。问题是当它在我们支持的 Windows CE 设备上运行时，它需要从不同的位置运行。

**可能的解决方案**：

多项目解决方案：针对不同的设备拥有多个项目。这样做的问题是我不知道如何在不违反 DRY 原则的情况下执行某些需要包含在输出中的文件，并且我不想在不同的 Start 项目之间来回切换。

重新定义`%CSIDL_PROGRAM_FILES%`解决方案：更改`%CSIDL_PROGRAM_FILES%`含义，因为这可以在指定 Program Files 所在位置的输出路径中。但是我不知道这是否可能或从哪里开始尝试。我想也许这会在设备注册表中定义，但我找不到它。

自定义路径变量解决方案：选择根文件夹，然后在子目录下以某种方式引用一个变量（可能以一个开头和结尾`%`？）我可以更改为我需要的路径（可能来自构建后或预部署（如果有这样的事情）脚本）。我不知道这是否可能或从哪里开始。

任何帮助将不胜感激，谢谢！

**编辑：**

经过一番挖掘，我最好的猜测是这`%CSIDL_PROGRAM_FILES%`是一个 Windows CE 环境变量。我仍然不知道是否可以创建或修改这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:18:37.647

使用不同的解决方案/项目配置来使用不同的输出路径和调试设置：

在 VS 中右键单击解决方案和“配置管理器” ![在此处输入图像描述](../Images/b2652f3742c70a6d13dcb570b4acb64e.png)

在“活动解决方案配置”下方的列表中单击 ![在此处输入图像描述](../Images/95535d11598bdc3c8f8e2ef884d481da.png)

现在输入一个新的描述性名称以及可以为新配置复制哪些设置。请启用“创建新项目配置”并单击“确定”

您现在有了一个新的解决方案和一个新的项目配置。 ![在此处输入图像描述](../Images/2e57588ca030a24dcac3fa9567dde341.png)

单击确定关闭解决方案配置管理器。

要更改所有或单个项目配置的设置，您必须右键单击解决方案，然后选择属性 ![在此处输入图像描述](../Images/7a346aa7858bb6df83d31c354043f890.png)

现在您可以为每个配置设置不同的设置。

“Release_Device1”配置的部署设置： ![在此处输入图像描述](../Images/3590ced97bb2dbfe7331546e306506b3.png)

但是“发布”配置的不同部署设置： ![在此处输入图像描述](../Images/9f17874da2980126588507a163de281e.png)

您还可以在配置集中有不同的调试设置： ![在此处输入图像描述](../Images/d51bd3a347a42f25bc0d65daeeef5b6d.png)

有什么要补充的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:10:12.740

如果我对您的理解正确，我会看到您可以采取的几种选择：

1.  让您的安装程序将这些可执行文件放在您需要的文件夹中，或者

2.  将您需要的所有数据放在一个中心位置（`\Program Files\Data`文件夹）。

不过，第一个选项本身很难调试（通过 VS2008 环境是不可能的）。

您甚至可以将两者结合使用！

现在，我要去看看[josef](https://stackoverflow.com/users/1479943/josef)链接到的所有这些工具。*他从哪里得到所有这些很酷的玩具？*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:12:23.423

首先我尝试在项目文件中使用环境变量：

```
 <DeploymentTool
    ForceDirty="-1"
    RemoteDirectory="$(ceRemoteDir)"
    RegisterOutput="0"
    AdditionalFiles=""
/> 
```

但不幸的是，只有在您启动 VS 时才会更新，以后不会更新。

我会使用免费的[远程工具](http://itsme.home.xs4all.nl/projects/xda/tools.html)使用自定义部署脚本。

使用 preg 您应该能够识别批处理脚本中的不同设备：

```
pregutl.exe hklm\Ident 
```

例如会给：

```
[HKLM\Ident]
Desc=""
Name="CK7007121144066"
OrigName="Pocket_PC"
Restriction=dword:00000002
Username="guest" 
```

在一台设备上，在另一台设备上我得到：

```
[HKLM\Ident]
Desc="Intermec CN3 Device"
Name="CN3A32110646073"
OrigName="IntermecCN3"
Restriction=dword:00000002
Username="guest" 
```

在 bat/cmd 文件中过滤它应该不难，然后根据 pregutl 查询使用 pput 将 exe 部署到不同的目录。

然后可以使用 bat/cmd 文件代替 VS 部署作为 Post-Built Event。

是的，这一切都有点复杂，但会奏效。

# c++ - C++ 不兼容的类型：计算等位基因频率

> ID：15100971
> 
> 赞同：-3
> 
> 时间：2013-02-26T22:49:55.030
> 
> 标签：c++, arrays, multidimensional-array, genetic, dna-sequence

这是输入文件的样子：

> 1-1_Sample 1 GCCCATGGCT 2-1_Sample 1 GAGTGTATGT 3-1_Sample 1 TGTTCTATCT 1-1_Sample 2 GCTTAGCCAT 2-1_Sample 2 TGTAGTCAGT 3-1_Sample 2 GGGAACCAAG 1-1_Sample 3 TGGAAGCGGT 2-1_Sample 3 CGGGAGGAG

* * *

```
#include <cstdlib>
#include <iostream>
#include <string>
#include <fstream>
#include <stdlib.h>

using namespace std;

const int pops = 10;
const int sequence = 100;
string w;
string popname;
string lastpop;
int totalpops;
string ind;
int i;
int j;
char c;
float dna[pops][4][sequence];
float Af[1][1][1];

int main(int argc, char *argv[])
{
ifstream fin0("dnatest.txt");
lastpop = "nonsense";
totalpops = -1;

if (fin0)
{
do
{           
getline(fin0, w);
cout << w<<endl;
i=0;
ind = "";
     popname = "";

    do  {c = w [i];
         i++;
         if ((c != '>')&(c!='-'))  ind=ind+c; } while (c != '-');
     do {c = w [i];
         i++; } while (c != ' ');
     do {c = w [i];
         i++;
        if (c!= '\n') popname=popname+c; } while (i< w.length());
        if (popname != lastpop) { totalpops++;
        lastpop=popname;
        }

     getline (fin0, w);
     cout << w<<endl << w.length()<<endl;         
     for (i=0; i<w.length(); i++)
     {if (w[i]=='A') dna[totalpops][0][i]++;
      if (w[i]=='C') dna[totalpops][1][i]++;
      if (w[i]=='G') dna[totalpops][2][i]++;
      if (w[i]=='T') dna[totalpops][3][i]++;
      }

      for(int k=0;k<1;k++)
      {for(int j=0; j<1;j++)
        {for (int i=0;i<1;i++)
         Af[0] = Af[0][0][0]+dna[i][j][k]; //RETURNS THE ERROR "INCOMPATIBLE TYPES IN ASSIGNMENT OF 'FLOAT' TO 'FLOAT[1][1]'
         cout<<Af<<endl;}
    }

       while (!fin0.eof());

     }

system("PAUSE");
return EXIT_SUCCESS;
} 
```

背景：我对 C++ 非常陌生，并试图自学用它来补充我的研究生研究。我是遗传学博士候选人，试图模拟不同的进化历史，以及它们如何影响人群中等位基因的频率。

问题：我正在尝试从我从输入文件创建的“dna”数组中提取某些数据部分。例如，在这里我创建了另一个数组“Af”，我试图在其中提取 dna 数组的第一个“细胞”的计数。这样做的目的是让我可以通过将某些细胞组中的计数与整个 dna 阵列中的计数进行比较来计算频率。我不知道该怎么做。我不断收到错误消息：“将'FLOAT'分配给'FLOAT [1] [1]'的类型不兼容”

我花了很多时间在不同的论坛上研究这个，但我似乎无法理解这个错误意味着什么，以及如何实现我想要实现的目标。

所以我正在可视化的 dna 数组是由输入文件制成的，因此有 4 行（A、C、G、T）。然后是 10 列（系列中的每个核苷酸一列）。然后将该“网格”堆叠 3 次（输入文件中列出的每个样本（这里样本表示总体，每个总体有 3 个个体）一个“表”）。因此，我想从这堆网格中提取，例如，第一个单元格（样本 1 中位置 1 的 A 数。然后我想将此数字与所有样本中位置 1 的 A 总数进行比较。对于我正在测试的模型，这个频率将是一个有意义的数字。

问题是，我不知道如何提取 dna 数组的一部分——一旦我弄清楚这个精简的例子，我将把它应用到非常大的输入文件中，并且一次要提取多个单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:32:42.217

`Af`是一个 3 维数组：

```
float Af[1][1][1]; 
```

但是，它只包含一个元素。它有一行、一列和一个“层”（或者您想命名第三维）。这让它有点毫无意义。你也可以这样：

```
float Af; 
```

尽管如此，你没有那个 - 你有一个 3D 数组。现在让我们看看这一行：

```
Af[0] = Af[0][0][0] + dna[i][j][k]; 
```

所以首先它获取第`(0, 0, 0)`th 元素 from `Af`(正如我们刚刚看到的那样，它是唯一的元素，`A`并将第`(i, j, j)`th 元素添加`dna`到它。那一点很好，因为这两个元素都是 type `float`。即：

```
Af[0] = Af[0][0][0] + dna[i][j][k];
//      ^^^^^^^^^^^   ^^^^^^^^^^^^
//        These are both floats 
```

所以这个加法的结果也是一个`float`。那么您尝试将此结果分配给什么？好吧，您尝试将其分配给，`Af[0]`但这*不是*`float`. 您已经简化了`0`在第一维中指定的第 th 索引。还有两个其他维度需要指定。的类型`Af[0]`实际上是一个`float[1][1]`（s 的二维数组`float`）。这将起作用，例如：

```
Af[0][0][0] = Af[0][0][0] + dna[i][j][k];
// Or equivalently:
Af[0][0][0] += dna[i][j][k]; 
```

这是否是您想要做的完全取决于问题，我无法开始理解。`Af`然而，正如我所说，作为一个只有一个元素的 3 维数组是没有意义的。如果它只是 one `float`，请将其设为 a `float`，而不是数组。然后你会做上面的行：

```
Af += dna[i][j][k]; 
```

# date - Stata 纵向平均值

> ID：15100975
> 
> 赞同：-1
> 
> 时间：2013-02-26T22:50:08.840
> 
> 标签：date, stata

我正在使用 Stata 并尝试根据时间/日期计算条件均值。对于每家商店，我想计算每年的平均值（库存）。如果缺少年份差距，那么我想从最接近的两个日期的库存值中取平均值。

我已经使用（如下）来获取每家商店的整体平均值，但我需要更多的粒度。

```
egen mean_inv = mean(inventory), by (store) 
```

我也试过这个循环，结果相似：

```
by id, sort: gen v1'=_n'
forvalues x = 1/'=n'{
by store: sum inventory if v1==`x'
replace mean_inv= r(mean) if v1==`x'
} 
```

从视觉上看，我想要每家商店的平均库存：（商店 id 不是连续的）

```
5/1/2003 2/3/2006 8/9/2006  3/5/2007   6/9/2007   2/1/2008
   13        18        12       15       24          11
     [mean1]    [mean2]   [mean3]   [mean4]   [mean5]

store   date    inventory
 1  16750   17
 1  18234   16
 1  15844   13
 1  17111   14
 1  17870   13
 1  16929   13.5
 1  17503   13
 4  15987   18
 4  15896   16
 4  18211   16
 4  17154   18
 4  17931   24
 4  16776   23
12  16426   26
12  17681   17
12  16386   17
12  16603   18
12  17034   16
12  17205   16
42  15798   18
42  16022   18
42  17496   16
42  17870   18
42  16204   18
42  16778   14
33  18053   23
33  16086   13
33  16450   21
33  17374   19
33  16814   19
33  15834   16
33  16167   16
56  17686   16
56  17623   18
56  17231   20
56  15978   16
56  16811   15
56  17861   20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:30:30.883

很难将您的代码与问题的文字描述联系起来。

您的`egen`通话按年计算`store`，而不是按年计算。

鉴于缺乏定义和至少一个错字，您的较长片段没有完全意义。

请注意，您的变量`v1`包含在 组中运行 1 的标识符`store`，并且不区分 的不同值`store`，正如您（似乎）暗示的那样。它会在任何接近电话结果的地方产生结果，这会降低可信度`egen`。

`n`没有定义，并且评估它的代码可能是为了

```
`=n' 
```

如果你计算

```
 by store: sum inventory if v1 == `x' 
```

将依次计算几种方法，但*只有*最后一个要计算的方法可以作为`r(mean)`.

样本数据与问题无关。没有`year`变量，即使`date`s 是 Stata 每日日期，它们都是 1960 年以内的日期。

抛开所有这些，假设您有变量`store`,`inventory`和`year`. 你可以试试

```
 collapse inventory, by(store year) 
 fillin store year 
 ipolate inventory year, gen(inventory2) by(store) 
```

生成一个减少的`collapse`均值数据集。如您所问，`ipolate`插值跨越间隙。`fillin`可能不足以提供您想要的所有`store`和`year`组合，您可能需要在插值之前手动添加更多年份。如果你想把这些结果和原始数据一起放回去，那就是`merge`.

总的来说，这是一个非常混乱的问题。

# python - 通过python脚本按回车

> ID：15100977
> 
> 赞同：1
> 
> 时间：2013-02-26T22:50:15.230
> 
> 标签：python, pywin32

我们正在尝试创建一个 python 脚本来通过 windows shell 提示安装应用程序，执行我们的 python 脚本。我们有来自 app.exe 的输出提示，指示“按 Enter 继续...”

我们试图模拟`Enter`密钥，但它不起作用。提示只是仍然没有移动到下一个向导步骤。

我们如何克服这个问题？

```
import subprocess
import win32console

APP_BIN = 'app.exe'

def main():
    proc = subprocess.Popen([APP_BIN,'-i','console'],stdin=subprocess.PIPE,
                                                     stdout=subprocess.PIPE)
    proc.stdin.write("\r\n")            <--- issue
    output = proc.stdout.readline()     <--- issue
    print output
    ret = proc.wait()
    print ret

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:54:31.363

不完全确定如何在 python 中执行此操作，但我的建议是模拟实际的“输入”按键命令。在您的代码中，您只是更改插入符号的位置而不发出正确的返回。

看看这个：[http ://win32com.goermezer.de/content/view/136/254/](http://win32com.goermezer.de/content/view/136/254/)

```
import win32com.client
shell = win32com.client.Dispatch("WScript.Shell")
shell.SendKeys("{ENTER}", 0) 
```

似乎这正是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:13:39.497

以下可能有效（未经测试）：

```
import subprocess
import win32console

APP_BIN = 'app.exe'

def main():
    proc = subprocess.Popen([APP_BIN,'-i','console'],stdin=subprocess.PIPE,
                                                     stdout=subprocess.PIPE)
    stdoutdata, stderrdata = proc.communicate(input="\r\n")
    output = stdoutdata.readline()
    print output
    ret = proc.wait()
    print ret

if __name__ == '__main__':
    main() 
```

# python - Python 错误：object.__new__() 没有参数

> ID：15100978
> 
> 赞同：-1
> 
> 时间：2013-02-26T22:50:19.953
> 
> 标签：python, api

我得到错误：

```
object.__new__() takes no parameters 
```

当我运行以下程序时：

```
import urllib as net
class weather:
    api = "http://www.google/ig/api?weather="
    wData = None
    def _init_(self,location):
        self.api = self.api + location
        self.wData = net.urlopen(self.api).read()
    def showXML(self):
        return self.wData

w = weather("11570")
w.showXML() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T22:54:04.730

你有：

```
def _init_(self,location): 
```

你是这个意思吗？

```
def __init__(self, location): 
```

特殊方法名称总是以两个下划线开头和结尾。

此外，最好包含回溯，并提及您正在使用的 Python 版本——我假设为 3，否则`object`默认情况下您的类不会继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:54:38.707

如果您逐字粘贴代码，则`__init__`定义中存在错误（注意，`_`每侧 2 个）

# android - WebView 显示选择操作对话框，不导航

> ID：15100979
> 
> 赞同：1
> 
> 时间：2013-02-26T22:50:21.957
> 
> 标签：android, android-webview

鉴于以下代码，WebView 将不会导航到并显示 google.com，而是会弹出一个选择操作对话框，其中包含所有已安装的浏览器应用程序可供选择。这是有意的吗？是否有解决这种 imo 奇怪行为的方法？

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    WebView webview = new WebView(this);
    setContentView(webview);

    WebSettings settings = webview.getSettings();
    settings.setJavaScriptEnabled(true);
    webview.loadUrl("http://www.google.com/");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:54:29.450

请参阅[单击 URL 会打开默认浏览器](https://stackoverflow.com/questions/2378800/android-webview-click-opens-default-browser)

本质上，您必须提供自己的 WebClient 并覆盖 shouldOverrideUrlLoading

```
private class CustomWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
} 
```

# javascript - 使用 Javascript 在 Firefox 中打印 PDF

> ID：15100983
> 
> 赞同：2
> 
> 时间：2013-02-26T22:50:47.600
> 
> 标签：javascript, firefox, pdf, printing

我正在仓库的​​终端上构建一个在 Firefox 中运行的应用程序。此应用程序需要打印 PDF。

我发现了很多关于从 Javascript 打印 PDF 的问题和答案，但我无法让它工作。

这是我当前的代码。

```
$(document).ready(function() {
    $(document.body).append('<IFRAME id="pdfLabel" ... >');
    $('iframe#pdfLabel').attr('src', 'testlabel.pdf');

    $('iframe#pdfLabel').load(function() {
        document.getElementById('pdfLabel').focus();
        document.getElementById('pdfLabel').contentWindow.print();
    });
}); 
```

使用 iFrame 中的常规 html 页面，此代码可以完美运行。对于 PDF，pdf 显示在 iFrame 中，但不打印。我尝试使用内置 PDF 渲染器的 Firefox 和嵌入式 Adob​​e acrobat 阅读器进行打印。我也试过

```
document.getElementById('pdfLabel').print(); 
```

但这会引发 `TypeError: window.frames.pdfLabel.print is not a function`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T21:21:04.497

. . 遗憾的是，Firefox 19 附带的 PDF.js 版本不支持内置 JavaScript 来自行打印文档，并且它也不允许您访问 PDF 窗口内的任何内容（包括打印方法）。

. . [他们意识到了这个问题](https://bugzilla.mozilla.org/show_bug.cgi?id=839627)，并计划在 Firefox 21 版中提供修复程序。

# wpf - 从 ItemsControl DataTemplate 绑定到父 UserControls DependencyProperty

> ID：15100985
> 
> 赞同：1
> 
> 时间：2013-02-26T22:50:53.637
> 
> 标签：wpf, data-binding, windows-phone-8

我想创建一个包含带有按钮的 ItemsControl 的用户控件，并且我想将它们的内容绑定到用户控件依赖属性（类似于 DisplayMemberPath 属性）。

我的 xaml.cs 代码：

```
public partial class ButtonsItemsSourceControl : UserControl
{
    public static readonly DependencyProperty ItemsSourceProperty = DependencyProperty.Register("ItemsSource", typeof(object), typeof(ButtonsItemsSourceControl), null);
    public static readonly DependencyProperty DisplayMemberProperty = DependencyProperty.Register("DisplayMember", typeof(string), typeof(ButtonsItemsSourceControl), null);

    public object ItemsSource
    {
        get { return (ICollection<object>)GetValue(ItemsSourceProperty); }
        set { SetValue(ItemsSourceProperty, value); }
    }

    public string DisplayMember
    {
        get { return (string)GetValue(DisplayMemberProperty); }
        set { SetValue(DisplayMemberProperty, value); }
    }

    public ButtonsItemsSourceControl()
    {
        InitializeComponent();

    }
} 
```

我的xml代码：

```
<UserControl x:Class="Controls.ButtonsItemsSourceControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
d:DesignHeight="480" d:DesignWidth="480" x:Name="root">

<ItemsControl x:Name="ctrl" ItemsSource="{Binding ItemsSource, ElementName=root}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Button Content= ?????/>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl>
</UserControl> 
```

我应该在 Content 属性中写什么绑定表达式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:14:45.693

只是为了清楚起见，您是在问如何将子属性绑定到父属性？

[相对来源](https://stackoverflow.com/questions/3406166/binding-to-an-ancestor-in-wpf)

# javascript - 未捕获的类型错误：对象 [object Object] 没有方法“tablesorter”

> ID：15100986
> 
> 赞同：1
> 
> 时间：2013-02-26T22:50:57.270
> 
> 标签：javascript, css, google-chrome

我正在尝试使 jQuery 分页工作，并且我正在包含触发它的这个 javascript 文件。

```
<script src="<?php echo SITE_URL?>/lib/js/jquery.tablesorter.pager.js" type="text/javascript"> </script> 
```

Chrome 显示文件已加载，但分页点击不起作用。我进入控制台，我得到了这个烦人的小错误，我不知道如何解决。上课在那里：/

![在此处输入图像描述](../Images/106fde5906af478075044559bd1d7088.png)

这是该类的 HTML...

```
<table id="tabledlist" class="tablesorter" width="920px" align="left" cellpadding="3" cellspacing="0" border="0">
..thead, th, tbody, tr, td and so on...
</table>

<div align="right" id="pager" class="pager">
    <form>
            <img src="<?php echo SITE_URL?>/lib/skins/flyeuro/images/pagination/first.png" class="first" />
            <img src="<?php echo SITE_URL?>/lib/skins/flyeuro/images/pagination/prev.png" class="prev" />
            <input align="middle" type="text" class="pagedisplay" size="5"/>
            <img src="<?php echo SITE_URL?>/lib/skins/flyeuro/images/pagination/next.png" class="next" />
            <img src="<?php echo SITE_URL?>/lib/skins/flyeuro/images/pagination/last.png" class="last" />
    </form>
</div> 
```

就在它下面，我包括了这个......

```
<script defer="defer">
    $(document).ready(function() 
    { 
            $("#tabledlist")
            .tablesorter({widthFixed: true, widgets: ['zebra']})
            .tablesorterPager({container: $("#pager")}); 
    } 
    ); 
</script> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:03:32.643

由于 jQuery 抱怨这`tablesorter`不是一个有效的方法，这意味着`tablesorter`插件似乎没有被包含/加载。

需要jQuery`tablesorter`插件才能使用其`pager`附加组件。为此，请访问文档并滚动到“下载”部分：[http](http://tablesorter.com/docs/) ://tablesorter.com/docs/ 。有 的下载`tablesorter`，以及`pager`附加组件和其他一些项目。

然后，您将需要像这样包含脚本，具体取决于您将它们保存为的文件名，但最重要的是按以下顺序：

```
<script src="<?php echo SITE_URL?>/lib/js/jquery.js" type="text/javascript"> </script>
<script src="<?php echo SITE_URL?>/lib/js/jquery.tablesorter.js" type="text/javascript"> </script>
<script src="<?php echo SITE_URL?>/lib/js/jquery.tablesorter.pager.js" type="text/javascript"></script> 
```

从那里，您可以`.tablesorter()`在 jQuery 对象上使用该方法。

# python-2.7 - Python2.7 上的 Os.statvfs 问题

> ID：15100987
> 
> 赞同：3
> 
> 时间：2013-02-26T22:51:06.303
> 
> 标签：python-2.7

我已经安装了 python 2.7 并尝试在下面运行总是给出错误的代码：

```
# !/usr/bin/python

import os, sys

stinfo = os.statvfs("C:\Tools") 
```

错误如下：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'statvfs' 
```

有什么线索可以让它工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T23:02:31.230

我从您的示例文件路径中假设您使用的是 Windows。

[`os.statvfs()`](http://docs.python.org/2/library/os.html#os.statvfs)Windows 不支持调用。尝试添加支持，但被[拒绝](http://bugs.python.org/issue410547)。

您可能会发现此[答案](https://stackoverflow.com/a/2372171/849425)对可能的解决方案很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:05:10.727

确保您在 python2.7 中运行

```
import sys
print(sys.version) 
```

你也应该转义反斜杠

编辑：见 Mikes 的回答，不知道这不是为 Windows 实现的。使用它也是不明智的，因为它自 Python2.6 以来已被弃用，并已在 Python3 中删除

# android - es_US 的 Android NumberFormat.getCurrencyInstance 返回不正确的值

> ID：15100990
> 
> 赞同：2
> 
> 时间：2013-02-26T22:51:19.193
> 
> 标签：android, locale, currency, number-formatting

```
 Locale locale = Locale.getDefault();
    final NumberFormat numberFormat = NumberFormat.getCurrencyInstance(locale); 
```

语言环境是 es_US

numberFormat 是

```
 java.text.DecimalFormatSymbols[currency=USD,currencySymbol=$,decimalSeparator=,,digit=#,exponentSeparator=E,groupingSeparator=.,infinity=∞,intlCurrencySymbol=USD,minusSign=-,monetarySeparator=,,NaN=NaN,patternSeparator=;,perMill=‰,percent=%,zeroDigit=0] 
```

decimalSeparator 和 groupingSeparator 是错误的，它们应该是 . 和 ，分别。这是Android中的错误吗？

编辑：

```
 DecimalFormatSymbols decimalFormatSymbols = ((DecimalFormat) numberFormat).getDecimalFormatSymbols();

    if ("US".equalsIgnoreCase(locale.getCountry())
            && "es".equalsIgnoreCase(locale.getLanguage())) {
        decimalFormatSymbols.setMonetaryDecimalSeparator('.');
        decimalFormatSymbols.setGroupingSeparator(',');
    }

    ((DecimalFormat) numberFormat).setDecimalFormatSymbols(decimalFormatSymbols); 
```

这是“修复”它的一种方法，但似乎应该有一种对语言环境更友好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:11:34.907

回答我的问题；是的，这是 Android 中的一个已知错误：

[https://code.google.com/p/android/issues/detail?id=38844](https://code.google.com/p/android/issues/detail?id=38844)

据说是在 4.2 之后修复的，但我们现在是 4.2.2

# c# - 如何在 web api 项目中做 Routes.IgnoreRoute？

> ID：15100992
> 
> 赞同：2
> 
> 时间：2013-02-26T22:51:26.723
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

在我的 web api 项目 Application_Start() 方法中，我正在执行以下操作以允许 elmah.axd

```
RouteTable.Routes.IgnoreRoute("{resource}.axd/{*pathInfo}") 
```

但这需要对 System.Web.Mvc 和相关 dll 的依赖，比如我的 web api 项目中我并不真正想要的 System.Web.WebPages。有没有办法在不引入所有这些 dll 的情况下获得 IgnoreRoutes 功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:17:22.220

遗憾的是，ASP.NET Web API 的路由系统中不支持 IgnoreRoutes。但是，如果应用程序在 ASP.NET 中托管（而不是作为 SelfHost 应用程序托管），您仍然可以将 IgnoreRoute 添加到 RouteTable（就像在 MVC 中一样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T03:13:09.993

WebApi 2.1 现在实现了 IgnoreRoute 扩展方法的一个版本

```
config.Routes.IgnoreRoute("elmah", "{resource}.axd/{*pathInfo}"); 
```

在后台，这会创建一个 System.Web.Http.Routing.StopRoutingHandler ，然后无论如何都会[重新映射](https://github.com/ASP-NET-MVC/aspnetwebstack/blob/0ee98f84b41b6bef6bde6945e2797de9dac7d48a/src/System.Web.Http.WebHost/Routing/HttpRouteExtensions.cs)到 System.Web.Routing.StopRoutingHandler 。

但是在 MVC4 WebApi1（由单声道支持）下我无法解决这个问题，但其他人应该逃脱：

```
config.Routes.MapHttpRoute(
            name: "ignore",
            routeTemplate: "{resource}.asp/{*pathInfo}",
            handler: new System.Web.Http.Routing.StopRoutingHandler()
); 
```

# google-app-engine - allocate_ids 是否总是返回正值？

> ID：15100993
> 
> 赞同：0
> 
> 时间：2013-02-26T22:51:27.813
> 
> 标签：google-app-engine, google-cloud-datastore

allocate_ids 函数是否总是返回正值？或者它有时会返回负值或零值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:53:25.453

在谷歌群组的评论中，一个叫[斯蒂芬](https://groups.google.com/forum/#!msg/google-appengine/_I7KW2X02aI/Drqp7HHhAucJ)的人说`db.model`：

> ID 是 64 位正整数。如果您为名为“序列”的实体分配 ID，则可以将它们用于任何其他实体类型，包括具有父级的实体，否则如果自动分配，它们将使用唯一范围。“序列”中的 ID 在您的数据存储中将是唯一的，这是 ID 是每个实体组唯一要求的超集。但是，您必须始终使用来自 Sequence 的 ID，并且绝不允许自动分配。

他似乎知道他在说什么。我找不到对 Datastore 的自动 ID 序列生成器的另一个引用，但是在这个类似的[问题中，](https://stackoverflow.com/questions/8542982/is-it-guaranteed-that-numeric-auto-incremented-id-of-new-entity-always-bigger-th/8544624#8544624) [allocateids](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#allocateIds%28com.google.appengine.api.datastore.Key,%20java.lang.String,%20long%29)的 java 定义被链接到它，它说它可以抛出这个错误：

> java.lang.IllegalArgumentException - 如果 parent 不是一个完整的键，**如果 num 小于 1，或者如果 num 大于 10 亿。**

# iphone - 检测到声音时调用动作？（无线电流）

> ID：15100994
> 
> 赞同：0
> 
> 时间：2013-02-26T22:51:29.850
> 
> 标签：iphone, ios, xcode, streaming, avplayer

我在 Xcode 中编程总共三个月了，我遇到了这个小问题：

目前，我正在使用*AVPlayer构建一个广播流应用程序，您可以在其中从**UICollectionView*中的一堆不同广播电台中进行选择。当您选择一个站点时，会出现一个子视图，它会使*UICollectionView变暗并显示一个带有站点名称和**ActivityIndi* ​​cator的加载视图。到目前为止，一切都很好。

问题是一旦开始播放，我不知道如何摆脱视图。现在我通过触摸视图暂时手动关闭它，但我当然希望当应用程序检测到声音时自动发生这种情况。

**当收音机开始播放/完成加载时，我应该在哪里放置我的关闭方法来关闭子视图？**

[子视图截图： http](http://dl.dropbox.com/u/49270819/iOS%20Simulator%20Screen%20shot%2026%20feb%202013%2023.54.04.png) ://dl.dropbox.com/u/49270819/iOS%20Simulator%20Screen%20shot%2026%20feb%202013%2023.54.04.png

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:12:25.417

试试这个代码来启动声音监控：

#pragma mark - AudioStuff

```
double lowPassResultAudio;
-(void) initAudioRecorder {
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setDelegate: self];
    NSError *audioSessionError;
    [audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:&audioSessionError];
    [[AVAudioSession sharedInstance] setActive: YES error: &audioSessionError];

    NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc] init];
    // We can use kAudioFormatAppleIMA4 (4:1 compression) or kAudioFormatLinearPCM for nocompression
    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];
    // We can use 44100, 32000, 24000, 16000 or 12000 depending on sound quality
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
    // We can use 2(if using additional h/w) or 1 (iPhone only has one microphone)
    [recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

    //initiate recorder
    inputAudioUrl = [NSURL fileURLWithPath:pathToFile];
    recorder = [[AVAudioRecorder alloc] initWithURL:inputAudioUrl settings:recordSetting error:&error];
    if(recorder){
        //setting to speaker for appropritae recording
        UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
        AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,
                                 sizeof (audioRouteOverride),&audioRouteOverride);
        [recorder setDelegate:self];
        [recorder prepareToRecord];
        recorder.meteringEnabled = YES;

        //for monitoring with same recorder
        [recorder record];

        [[NSTimer alloc] initWithFireDate:[NSDate date] interval:0.1 target:self selector:@selector(monitorAudioController:) userInfo:,mil repeats:YES]

    } else
        NSLog(@"%@",[error description]);
} 
```

现在，如果声音值超过限制，即正在播放一些附近的声音，则删除您的视图。

```
//monitor audion with same recorder
-(void) monitorAudioController: (NSTimer *) timer {
    [recorder updateMeters];
    const double ALPHA = 0.05;
    double peakPowerForChannel_ = pow(10, (ALPHA * [recorder peakPowerForChannel:0]));
//    double lowpassMultiplier = (lowPassResultAudio > 0.2f) ? 0.2f : lowPassResultAudio;
    double AUDIOMONITOR_THRESHOLD = 0.7;
    lowPassResultAudio = ALPHA * peakPowerForChannel_ + (1.0 - ALPHA) * AUDIOMONITOR_THRESHOLD;

   // NSLog(@"peakPowerForChannel_=%lf, lowpassMultiplier = %lf, lowPassResultAudio = %lf", peakPowerForChannel_, AUDIOMONITOR_THRESHOLD, lowPassResultAudio);
    if (lowPassResultAudio >= AUDIOMONITOR_THRESHOLD) {
           //remove here
           //invalidate timer
           //stop recorder monitoring
    }
} 
```

# xaml - 在 Visual Studio 2012 中打开 Dynamics Workflow 文件 (.xaml) 时出错

> ID：15100995
> 
> 赞同：1
> 
> 时间：2013-02-26T22:51:30.263
> 
> 标签：xaml, visual-studio-2012, dynamics-crm-2011, workflow-foundation

当我尝试打开一个 .xaml 文件时，设计器仅显示一个红色框，其中显示“无法为工作流生成视图”

这是我采取的步骤：

1.  在 Dynamics CRM 2011 中创建一个简单的工作流，它只有一个 if 条件和一个发送电子邮件步骤
2.  将工作流添加到解决方案，并将解决方案导出为非托管。
3.  在 Visual Studio 2012 中，创建一个 .NET 4 活动库
4.  右键单击项目，然后添加现有并选择解决方案中导出的 xaml 文件
5.  双击 .xaml 文件以在设计器中查看

我正在关注的教程都使用 Visual Studio 2010，这让我想知道 VS 2012 中是否有问题。

编辑：实际的例外：

> System.NullReferenceException：对象引用未设置为对象的实例。在 Microsoft.Xrm.Sdk.Workflow.Activities.ReferenceLiteral `1.CacheMetadata(CodeActivityMetadata metadata) at System.Activities.CodeActivity`1.OnInternalCacheMetadataExceptResult(Boolean createEmptyBindings) 在 System.Activities.Activity `1.OnInternalCacheMetadata(Boolean createEmptyBindings) at System.Activities.Activity.InternalCacheMetadata(Boolean createEmptyBindings, IList`1& validationErrors) 在 System.Activities.ActivityUtilities.ProcessActivity(ChildActivity childActivity, ChildActivity& nextActivity, Stack `1& activitiesRemaining, ActivityCallStack parentChain, IList`1& validationErrors, ProcessActivityTreeOptions 选项, ProcessActivityCallback 回调）在 System.Activities.ActivityUtilities.ProcessActivityTreeCore（ChildActivity currentActivity，ActivityCallStack parentChain，ProcessActivityTreeOptions 选项，ProcessActivityCallback 回调，IList`1& validationErrors) at System.Activities.ActivityUtilities.CacheRootMetadata(Activity activity, LocationReferenceEnvironment hostEnvironment, ProcessActivityTreeOptions options, ProcessActivityCallback callback, IList`1& validationErrors) 在 System.Activities.Validation.ActivityValidationServices.InternalActivityValidationServices.InternalValidate() 在 System.Activities.Validation.ActivityValidationServices.Validate(Activity toValidate, ValidationSettings settings) 在 System.Activities.Presentation.Validation.ValidationService.CoreValidationWork(ValidationReason 原因， CancellationToken 取消令牌）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:52:26.300

我找到的唯一解决方案是降级到 CRM SDK 版本 1.0（不是当前版本的 1.1）。然后在 VS 2010 中工作。

# mysql - 忽略符号的 SQL 查询

> ID：15100998
> 
> 赞同：0
> 
> 时间：2013-02-26T22:51:37.027
> 
> 标签：mysql, sql

我正在寻找只会在 SQL 查询中返回字母数字字符的东西

现在我有两个柱子，`ttitle`可能在`tsub`哪里，可能`ttitle`在哪里`Champ's Shack``tsub``"Grilled Cheese"`

我需要它来将该字段返回为`champsshackgrilledcheese`

到目前为止，我已经把它归结为`champs'sshack"grilledcheese"`

我仍然需要删除这些字符...

这是实现它的代码......

`REPLACE(LOWER(CONCAT(TRIM(ttitle),TRIM(tsub))), ' ','')`

我该怎么做才能让它在没有符号的情况下返回？并且只有字母数字，如果可能，我想尽量避免使用 SQL 函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:59:07.407

```
REPLACE(REPLACE(REPLACE(LOWER(CONCAT(TRIM(ttitle),TRIM(tsub))), ' ',''),'\'',''),'"','') 
```

*是的，这非常丑陋。*但是由于 MySQL 不支持正则表达式（[除非您添加扩展名](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)），因此您需要对`REPLACE`要替换的每个字符进行调用。

至少，如果您想避免问题中指定的用户定义函数。