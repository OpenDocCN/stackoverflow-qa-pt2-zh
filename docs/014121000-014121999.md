# StackOverflow 问答 14121000-14121999

# codeigniter - Codeigniter url 路由选择菜单项将段添加到 url

> ID：14121002
> 
> 赞同：0
> 
> 时间：2013-01-02T11:10:29.653
> 
> 标签：codeigniter, url, routing, routes

在全新安装的 codeigniter 2.1.3 中，我有一个具有两个功能的控制器“home.php”：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Home extends CI_Controller {

    public function index()
    {
        $this->load->view('home');
    }

    public function homefunction()
    {
        $this->load->view('homefunction');
    }

} 
```

我有一个视图'home.php'。锚点代表菜单：

```
<p>Home</p>
<br/>
<a href="home">Home</a>
<a href="home/homefunction">Home Function</a> 
```

和一个视图'homefunction.php'

```
<p>Function in the Home controller</p>
<br/>
<a href="home">Home</a>
<a href="home/homefunction">Home Function</a> 
```

我的路线：

```
$route['default_controller'] = "home"; 
```

我已经用 .htaccess 和 config.php 从 URL 中“消除”了 index.php，我的 .htaccess 是：

```
RewriteEngine On
RewriteBase /test/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [PT,L] 
```

在我设置的 config.php 文件中：

```
$config['base_url'] = 'http://localhost/test';
$config['index_page'] = ''; 
```

现在我运行`http://localhost/test`并且我的主页加载了菜单。浏览器中的网址是`localhost/test/`. 然后我单击浏览器中的 url 变为的“主页”锚菜单项`localhost/test/home`。我单击主页功能页面加载的另一个菜单项“主页功能”，网址变为`localhost/test/home/homefunction`. 在主页功能视图的菜单中，单击“主页”项，网址变为`localhost/test/home/home`. **我期待成为** `localhost/test/home`. 然后我单击菜单项“主页功能”，主页功能视图未加载并且 url 变为`localhost/test/home/home/homefunction`，主页功能页面**未**加载我再次单击主页并进入 url `localhost/test/home/home/home`，每次单击主页功能菜单项时都会继续然后主页菜单项在 url 中添加主页部分。

我知道这很简单，可能与路由有关，但我卡住了，我在谷歌上找不到类似的问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:24:54.333

加载 url 帮助程序类。这将使您轻松而充满活力。

```
$this->load->helper('url'); 
```

或者默认加载它，在*config/autoload.php*

```
$autoload['helper'] = array('url'); 
```

每次您将网址分配为：

```
<a href="<?=site_url('home');?>">Home</a>
<a href="<?=site_url('home/homefunction');?>">Home Function</a> 
```

建议您在需要生成本地 URL 的任何时候使用此功能，以便在您的 URL 更改时您的页面变得更加便携。

[URL 助手：codeigniter](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:13:25.757

去做

```
<a href="/home">Home</a>
<a href="/home/homefunction">Home Function</a> 
```

或者

```
<a href="<?=base_url('home');?>">Home</a>
<a href="<?=base_url('home/homefunction');?>">Home Function</a> 
```

# c++ - 获取矩形的所有顶点

> ID：14121009
> 
> 赞同：1
> 
> 时间：2013-01-02T11:10:49.210
> 
> 标签：c++, algorithm, opengl

在我的程序中，我需要绘制一个与来自中心的线垂直的矩形。

为了在 3D 空间中以这种方式定位矩形，我使用了`gluLookAt`给它外观点并绘制了矩形图形。这对我来说是正确的。

为了绘制矩形（在我的框架中，在后面使用 openGL），我现在使用一个矩形类并用 3D 扩展它`Node`（其中节点是有一个`lookAt`点的东西）。给定宽度、高度和顶部顶点，绘制矩形（节点位于左上顶点并使用lookAt 定位矩形）。

`Node`还有一个`getPosition()`函数可以给我它的 3D 位置（矩形左上角 - 比如说 300,400,20）。我正在尝试获取**其他三个顶点**在 3D 空间中的位置以用于我的操作。由于矩形是在 3D 空间中定向的，其他三个顶点不能仅仅通过添加宽度和高度来获取。使用 3D 方向的矩形，我如何获得其他三个顶点的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:30:17.547

最小坐标量略小于 9：这是 3d 空间中通用矩形的三个顶点（Ax、Ay、Az、Bx、By、Bz、Cx、Cy、Cz）。

最后一个是例如D=A+(BA)+(CA)=B+CA。

为什么它稍微少一点，因为 A、B、C 坐标的任何三元组不一定形成 90 度角——但追求简单的可能排列并准备计算叉积确实没有多大意义或标准化向量。

```
 A----B
 |    |
 C---(D) 
```

编辑：矢量算术初级：

要添加/减去向量，需要对元素求和。A=B+C 表示（ax=bx+cx；ay=by+cy；az=bz+cz）。

（任何维度）中的点积是项的乘积之和：dot(A,B) = ax*bx + ay*by + az*bz；// 对于 2,3,4，任意数量的元素/维度。

[叉积](http://en.wikipedia.org/wiki/Cross_product)是一种特殊的算子，至少在 2 维和 3 维中定义良好。叉积的几何解释之一是它产生一个垂直于其参数的两个向量的向量。

如果A是向量(ax,ay,az)，也表示从原点O=(0,0,0)的方向向量即A = AO = (ax-0,ay-0,az-0)；同样 (BA) 是从 A 到 B 的 [direction] 向量（有时写为 AB（顶部带有箭头 -->））

可以“添加”这些有向向量，例如：

```
 o----->
           \
            \
      <------o
     /
    /
   x 
```

因此，如果将向量 A+(BA) + (CA) 相加，则将结束于点 D。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:36:09.657

您可以使用矩形的法线检索其他 3 个点的位置。为了在空间中定位一个矩形，您需要 2 个信息：

*   它的位置，通常表示为 3 或 4 分量向量，或 4x4 矩阵；
*   它的方向，通常表示为四元数。

如果你用法线表示方向，并且只有一个点，你就*不能*推断出其他点（因为你需要其他信息来求解围绕法线的旋转方程）。我认为最好的想法是使用四元数来定位空间中的事物（您仍然可以从中检索法线），但您也可以使用矩形中的法线 + 一个向量。你说你只有一个点和一个元组（宽度，高度），所以基于×操作的常用方法无法通过。

我建议你：

*   使您的`Node`班级成为正确处理方向的班级；`lookAt`不是为那项工作而设计的；
*   将平移矩阵（位置）与四元数（方向）中的转换矩阵相结合，以正确处理位置和方向；
*   使用该矩阵来提取一个旋转向量，您将使用它`rotated × normal`来获得 3 个点。

# c# - 通过连接包含的元素来合并两个 Json.NET 数组

> ID：14121010
> 
> 赞同：10
> 
> 时间：2013-01-02T11:10:53.437
> 
> 标签：c#, json, json.net

我有两个`JToken`'s 代表 JSON 对象数组，我想合并它们。`JToken`有一个方法`Concat`，但是`null`当我尝试使用它时它会产生结果。

```
Action<JToken> Ok = (x) =>
{
    Debug.WriteLine(x);
    /* outputs
    [
      {
        "id": 1,
      },
      {
        "id": 2,
      }
    ]
    */

    x = (x).Concat<JToken>(x) as JToken;
    Debug.WriteLine(x); // null
}; 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-12-16T10:24:11.977

**`JContainer.Merge()`与 一起使用`MergeArrayHandling.Concat`。**

这从[Json.NET 6 Release 4](http://james.newtonking.com/archive/2014/08/04/json-net-6-0-release-4-json-merge-dependency-injection)开始可用。因此，如果您的数组在 a 中`JContainer`（例如 a `JObject`），这是一个简单而强大的解决方案。

例子：

```
JObject o1 = JObject.Parse(@"{
  'FirstName': 'John',
  'LastName': 'Smith',
  'Enabled': false,
  'Roles': [ 'User' ]
}");
JObject o2 = JObject.Parse(@"{
  'Enabled': true,
  'Roles': [ 'Operator', 'Admin' ]
}");

o1.Merge(o2, new JsonMergeSettings { MergeArrayHandling = MergeArrayHandling.Concat });

string json = o1.ToString();
// {
//   "FirstName": "John",
//   "LastName": "Smith",
//   "Enabled": true,
//   "Roles": [
//     "User",
//     "Operator",
//     "Admin"
//   ]
// } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-02T13:26:15.617

```
JToken.FromObject(x.Concat(x)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-14T08:06:08.307

我需要同样的，这就是我想出的

[https://github.com/MrAntix/Newtonsoft.Json/blob/master/Src/Newtonsoft.Json/Linq/MergeExtensions.cs](https://github.com/MrAntix/Newtonsoft.Json/blob/master/Src/Newtonsoft.Json/Linq/MergeExtensions.cs)

```
public static void MergeInto(
    this JContainer left, JToken right, MergeOptions options)
{
    foreach (var rightChild in right.Children<JProperty>())
    {
        var rightChildProperty = rightChild;
        var leftPropertyValue = left.SelectToken(rightChildProperty.Name);

        if (leftPropertyValue == null)
        {
            // no matching property, just add 
            left.Add(rightChild);
        }
        else
        {
            var leftProperty = (JProperty) leftPropertyValue.Parent;

            var leftArray = leftPropertyValue as JArray;
            var rightArray = rightChildProperty.Value as JArray;
            if (leftArray != null && rightArray != null)
            {
                switch (options.ArrayHandling)
                {
                    case MergeOptionArrayHandling.Concat:

                        foreach (var rightValue in rightArray)
                        {
                            leftArray.Add(rightValue);
                        }

                        break;
                    case MergeOptionArrayHandling.Overwrite:

                        leftProperty.Value = rightChildProperty.Value;
                        break;
                }
            }

            else
            {
                var leftObject = leftPropertyValue as JObject;
                if (leftObject == null)
                {
                    // replace value
                    leftProperty.Value = rightChildProperty.Value;
                }

                else
                    // recurse object
                    MergeInto(leftObject, rightChildProperty.Value, options);
            }
        }
    }
} 
```

# jquery - 如何处理不同的动态组合框？

> ID：14121023
> 
> 赞同：1
> 
> 时间：2013-01-02T11:11:36.217
> 
> 标签：jquery

html

```
<div id="opts" class="styled-select">
 <select id="combo1" class="combo" data-index="1">
        <option></option>
        <option val="Opt1">Opt1</option>
        <option val="Opt2">Opt2</option>
        <option val="Opt3">Opt3</option>
    </select>
</div>

<div id="opts2" class="styled-select">
  <select id="combo2" class="combo2" data-index="1">
            <option></option>
            <option val="Opt11">Opt11</option>
            <option val="Opt22">Opt22</option>
            <option val="Opt32">Opt33</option>
        </select>
 </div> 
```

jQuery

```
$('#opts').on('change', '.combo', function() {
    var selectedValue = $(this).val();

    if ($(this).find('option').size() > 2) {
        var newComboBox = $(this).clone();
        var thisComboBoxIndex = parseInt($(this).attr('data-index'), 10);
        var newComboBoxIndex = thisComboBoxIndex + 1;

        $('.parentCombo' + thisComboBoxIndex).remove();

        if (selectedValue !== '') {
            newComboBox.attr('data-index', newComboBoxIndex);
            newComboBox.attr('id', 'combo' + newComboBoxIndex);
            newComboBox.addClass('parentCombo' + thisComboBoxIndex);
            newComboBox.find('option[val="' + selectedValue + '"]').remove();
            $('#opts').append(newComboBox);
        }
    }
});​ 
```

我不能为 2 个不同的组合框复制/使用相同的代码，这似乎会造成某种麻烦。

我怎样才能对 2 个组合框有相同的“效果”？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:32:45.360

您可以在`on`功能中使用多选器..

```
$('body').on('change', '.combo,.combo2', function() { 
```

确保您克隆的元素具有唯一的 id ，并且 dat_index...我增加了它的值

```
var thisComboBoxIndex = parseInt($(this).attr('data-index'), 10) + 1; //here 
```

这是[小提琴](http://jsfiddle.net/JaVVe/18/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:33:48.820

克隆元素也克隆了它的属性，我在你的代码中做了一些改变！检查它们，看看我有什么改变 :) 我将它们包装在一个 div 和其他一些东西中！

查询：

```
$('body').on('change', '.combo', function() {
    var selectedValue = $(this).val();

    if ($(this).find('option').size() > 2) {
        var newComboBox = $(this).clone();
        var thisComboBoxIndex = $(this).attr('id').replace("combo", "");
        var newComboBoxIndex = thisComboBoxIndex + 10;

        $('.parentCombo' + thisComboBoxIndex).remove();

        if (selectedValue != '') {
            newComboBox.attr('data-index', newComboBoxIndex);
            newComboBox.attr('id', 'combo' + thisComboBoxIndex);
            newComboBox.find('option[val="' + selectedValue + '"]').remove();
            $('div.'+thisComboBoxIndex).append(newComboBox);
        }
    } 
});​ 
```

HTML：

```
 <div class="1">
    <select id="combo1" class="combo" data-index="1">
        <option></option>
        <option val="Opt1">Opt1</option>
        <option val="Opt2">Opt2</option>
        <option val="Opt3">Opt3</option>
    </select>
</div>
<br>
<div class="2">
    <select id="combo2" class="combo" data-index="2">
        <option></option>
        <option val="Opt1">Opt1</option>
        <option val="Opt2">Opt2</option>
        <option val="Opt3">Opt3</option>
    </select>
</div> 
```

工作 [小提琴](http://jsfiddle.net/JaVVe/19/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:18:34.793

因为您在类选择器上调用您的函数并且选择框的两个类不同，所以您可以尝试以下方法之一，

```
<select id="combo1" class="combo" data-index="1">
        <option></option>
        <option val="Opt1">Opt1</option>
        <option val="Opt2">Opt2</option>
        <option val="Opt3">Opt3</option>
    </select>

  <select id="combo2" class="combo" data-index="1">
            <option></option>
            <option val="Opt11">Opt11</option>
            <option val="Opt22">Opt22</option>
            <option val="Opt32">Opt33</option>
        </select>​

$('body').on('change', '.combo', function() {
    var selectedValue = $(this).val();

if ($(this).find('option').size() > 2) {
    var newComboBox = $(this).clone();
    var thisComboBoxIndex = parseInt($(this).attr('data-index'), 10);
    var newComboBoxIndex = thisComboBoxIndex + 1;

    $('.parentCombo' + thisComboBoxIndex).remove();

    if (selectedValue !== '') {
        newComboBox.attr('data-index', newComboBoxIndex);
        newComboBox.attr('id', 'combo' + newComboBoxIndex);
        newComboBox.addClass('parentCombo' + thisComboBoxIndex);
        newComboBox.find('option[val="' + selectedValue + '"]').remove();
        $('body').append(newComboBox);
    }
}
});​ 
```

**或者**您可以使用多个类选择器选项

```
$('body').on('change', '.combo,.combo2', function() {
        var selectedValue = $(this).val();

    if ($(this).find('option').size() > 2) {
        var newComboBox = $(this).clone();
        var thisComboBoxIndex = parseInt($(this).attr('data-index'), 10);
        var newComboBoxIndex = thisComboBoxIndex + 1;

        $('.parentCombo' + thisComboBoxIndex).remove();

        if (selectedValue !== '') {
            newComboBox.attr('data-index', newComboBoxIndex);
            newComboBox.attr('id', 'combo' + newComboBoxIndex);
            newComboBox.addClass('parentCombo' + thisComboBoxIndex);
            newComboBox.find('option[val="' + selectedValue + '"]').remove();
            $('body').append(newComboBox);
        }
    }
    });​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:20:35.113

类名和ID的设置是问题。

```
$('body').on('change', '.combo', function() {
    var selectedValue = $(this).val();

if ($(this).find('option').size() > 2) {
    var newComboBox = $(this).clone();
    //I incremented the index so the new element would have a unique id and class
    var thisComboBoxIndex = parseInt($(this).attr('data-index')) + 1;
    var newComboBoxIndex = thisComboBoxIndex + 1;

    $('.parentCombo' + thisComboBoxIndex).remove();

    if (selectedValue !== '') {
        newComboBox.attr('data-index', newComboBoxIndex);
        newComboBox.attr('id', 'combo' + thisComboBoxIndex.toString());
        newComboBox.addClass('parentCombo' + thisComboBoxIndex.toString());
        newComboBox.find('option[val="' + selectedValue + '"]').remove();
        $('body').append(newComboBox);
    }
}
}); 
```

**演示**：http: [//jsfiddle.net/2zNRu/1/](http://jsfiddle.net/2zNRu/1/)

# php - PHP Ajax聊天：将一台PC数据传输到另一台PC而不发送/接收

> ID：14121024
> 
> 赞同：0
> 
> 时间：2013-01-02T11:11:48.290
> 
> 标签：php, javascript, jquery

我正在创建一个基本的`Php` `Ajax`聊天应用程序。

当我在我自己的 PC 上的跨浏览器中使用这个基本应用程序时（意味着一次 chrome 和 Mozilla 假设两个人）工作正常。但是当我在跨 PC 上使用此应用程序时，意味着一个人正在从一台 PC 聊天，而另一个人正在从第二台 PC 聊天，那么它就无法正常工作..

问题：从一台 PC 发送聊天内容在第二台 PC 上接收，但从第二台 PC（聊天回复）发送聊天内容未接收

```
 Ajax response is not coming using `set Interval` and browser is not refreshing.. 
```

**代码 ：**

**J查询**

```
setInterval(function() { 
   $.ajax({
     url: "http://192.168.1.13/naresh/ajaxchat/chatsave.php?q=getChat",
     success: function(response) {
        $("#ulShowChatContent").append(response);
         }
    });
}, 1000); 
```

**php**

```
function getChat(){
        $useremail  = $_SESSION['email'];
        $sqlGetUserInfo = mysql_query("select * from  users where email = '$useremail'") or die(mysql_error());
        if(mysql_num_rows($sqlGetUserInfo)>0){
            $userInfo = mysql_fetch_array($sqlGetUserInfo);
            $userId = $userInfo['id']; 
            $currentdate =  date('Y-m-d H:i:s');

            $sqlGetChatContent = mysql_query("select chat_id,chat_content,name from pvt_chat 
                                                INNER JOIN users ON pvt_chat.userid = users.id 
                                                where pvt_chat.userid != '$userId' 
                                                and receive_status = 0
                                                and send_datetime <= '$currentdate' 
                                                ORDER BY send_datetime DESC limit 1") or die(mysql_error());

            if(mysql_num_rows($sqlGetChatContent)>0) {
                $resGetChatContent = mysql_fetch_array($sqlGetChatContent);
                $receiveChatId = $resGetChatContent['chat_id'];
                echo '<li>'.$resGetChatContent['name'].' says : '.$resGetChatContent['chat_content'].'</li>';
                $sqlUpdateRecStatus = mysql_query("UPDATE pvt_chat SET receive_status = '1' WHERE chat_id ='$receiveChatId'") or die(mysql_error());
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:22:38.957

我的问题是：PC2 使用什么网页（+ 域）来访问聊天？如果从他的本地主机或 192.168.1.13 以外的任何域/IP 访问该页面，则您遇到了跨域问题。出于安全原因，今天的浏览器会阻止对另一个域（甚至子域和端口必须是相同的 IIRC）上的网页的 AJAX 调用。如果 PC2 正在从`http://localhost/chatPage.html`（例如）访问网页，那么他无法在 AJAX 调用中向“http://192.168.1.13”发出请求。

一些解决方案：

*   将聊天页面托管在与您的 AJAX 调用来源相同的服务器上（以便聊天页面的域与 AJAX 调用的域相同）
*   使用 JSON 响应并在浏览器中将其转换为 HTML。当您使用 JSON 时，有一种解决跨域问题的方法，但这意味着您必须自己将 JSON 输出转换为 HTML。您还需要确保将属性`dataType: 'jsonp'`放入 AJAX 调用中。

# iphone - 将 UIButton 添加到 MKAnnotationView

> ID：14121030
> 
> 赞同：1
> 
> 时间：2013-01-02T11:12:29.330
> 
> 标签：iphone, objective-c, ios, mkmapview, mkannotation

我有一个自定义类`MKAnnotationView`，我正在尝试以循环方式将 8 个按钮添加到注释中。我已经添加了按钮。它们在视图中的位置非常好，但按钮的动作没有得到调用。为什么没有调用该操作以及解决方案是什么。

```
-(void)setSelected:(BOOL)selected animated:(BOOL)animated`
{
    [super setSelected:selected animated:animated];
    if(selected)
    {
        UIView *circularView = [[UIView alloc]initWithFrame:CGRectMake(-55, -55, 110, 110)];
        circularView.tag = 1000;

        UIButton *btn1;
        UIButton *btn2;
        UIButton *btn3;
        UIButton *btn4;
        UIButton *btn5;
        UIButton *btn6;
        UIButton *btn7;
        btn1 = [UIButton buttonWithType:UIButtonTypeCustom];
        [circularView addSubview:btn1];
        btn1.userInteractionEnabled = YES;
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                       initWithTarget:self action:@selector(buttonTapped:)];
        tap.numberOfTapsRequired = 1;
        [btn1 addGestureRecognizer:tap];

        btn2 = [UIButton buttonWithType:UIButtonTypeCustom];
        [circularView addSubview:btn2];

        btn3 = [UIButton buttonWithType:UIButtonTypeCustom];
        [circularView addSubview:btn3];

        btn4 = [UIButton buttonWithType:UIButtonTypeCustom];
        [circularView addSubview:btn4];

        btn5 = [UIButton buttonWithType:UIButtonTypeCustom];
        [circularView addSubview:btn5];

        btn6 = [UIButton buttonWithType:UIButtonTypeCustom];
        [circularView addSubview:btn6];

        btn7 = [UIButton buttonWithType:UIButtonTypeCustom];
        [circularView addSubview:btn7];

        [btn1 setBackgroundImage:[UIImage imageNamed:@"message-icon"] forState:UIControlStateNormal];
        [btn2 setBackgroundImage:[UIImage imageNamed:@"message-icon"] forState:UIControlStateNormal];
        [btn3 setBackgroundImage:[UIImage imageNamed:@"message-icon"] forState:UIControlStateNormal];
        [btn4 setBackgroundImage:[UIImage imageNamed:@"message-icon"] forState:UIControlStateNormal];
        [btn5 setBackgroundImage:[UIImage imageNamed:@"message-icon"] forState:UIControlStateNormal];
        [btn6 setBackgroundImage:[UIImage imageNamed:@"message-icon"] forState:UIControlStateNormal];
        [btn7 setBackgroundImage:[UIImage imageNamed:@"message-icon"] forState:UIControlStateNormal];

        CGPoint point = CGPointMake(55, 55);
        btn1.frame = CGRectMake(point.x - 15.00, point.y - 55.00, 30, 30);
        btn2.frame = CGRectMake(point.x + 16.27, point.y - 39.94, 30, 30);
        btn3.frame = CGRectMake(point.x + 24.00, point.y - 06.10, 30, 30);
        btn4.frame = CGRectMake(point.x + 02.36, point.y + 21.04, 30, 30);
        btn5.frame = CGRectMake(point.x - 32.36, point.y + 21.04, 30, 30);
        btn6.frame = CGRectMake(point.x - 54.00, point.y - 06.10, 30, 30);
        btn7.frame = CGRectMake(point.x - 46.27, point.y - 39.94, 30, 30);
        [self addSubview:circularView];
    }
    else
    {
        [[self viewWithTag:1000] removeFromSuperview];
    }
}
-(void)buttonTapped:(UITapGestureRecognizer*)sender
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:23:13.753

只需尝试添加`UIButton`类似波纹管并用 . 调用它的事件`UITapGestureRecognizer`。请参见下面的示例...

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView 
        viewForAnnotation:(id<MKAnnotation>)annotation
{
    MKAnnotationView *annView = (MKAnnotationView *)[mapView 
            dequeueReusableAnnotationViewWithIdentifier: @"pin"];
    if (annView == nil)
    {
        annView = [[[MKAnnotationView alloc] initWithAnnotation:annotation 
                      reuseIdentifier:@"pin"] autorelease];

        annView.frame = CGRectMake(0, 0, 200, 50);

        UIButton *pinButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        pinButton.frame = CGRectMake(0, 0, 140, 28);
        pinButton.tag = 10;

        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] 
            initWithTarget:self action:@selector(btnPinTap:)];
        tap.numberOfTapsRequired = 1;
        [pinButton addGestureRecognizer:tap];
        [tap release];

        [annView addSubview:pinButton]; 
    }

    annView.annotation = annotation;

    UIButton *pb = (UIButton *)[annView viewWithTag:10];
    [pb setTitle:annotation.title forState:UIControlStateNormal];

    return annView;
}

- (void) btnPinTap:(UITapGestureRecognizer *)gestureRecognizer 
{
    UIButton *btn = (UIButton *) gestureRecognizer.view;
    MKAnnotationView *av = (MKAnnotationView *)[btn superview];
    id<MKAnnotation> ann = av.annotation;
    NSLog(@"btnPinTap: ann.title=%@", ann.title);
} 
```

只需在`.h`文件中添加代表..

`UIGestureRecognizerDelegate`

只需将以下方法放入您的`.m`文件中...

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
        shouldRecognizeSimultaneouslyWithGestureRecognizer
            :(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

我希望这对你有帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:03:09.550

我找不到任何解决方案。所以，我认为这种方法是不可能的。如果仍然有人想要实现这个功能，那么必须在禁用用户交互的 UIiew 上使用绘制它们。添加这个 UIView在 MKMapView 上。如果需要，请`didSelectAnnotationView`使用该方法。`[mapView deselectAnnotation:view.annotation animated:YES];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T13:15:44.727

这是因为 circularView 在注释框架之外。将 self.frame 扩展为 circularView 的大小将使其工作。但是，根据其他事情、别针等，它可能看起来不太好。

# linux - 无密码 ssh 登录后检查远程用户的身份？

> ID：14121045
> 
> 赞同：4
> 
> 时间：2013-01-02T11:13:46.407
> 
> 标签：linux, login, ssh, authorized-keys

在无密码 ssh-login 之后，Linux 中是否有任何方法可以检索登录的远程用户的身份？

我想在登录脚本中采取一些不同的操作，这取决于我从哪个远程主机/用户 ID 进行 ssh 登录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T12:17:15.233

[除非您使用类似此答案](https://superuser.com/questions/163167/when-sshing-how-can-i-set-an-environment-variable-on-the-server-that-changes-f)的内容，否则不会记录原始系统的用户名- 即将用户名作为连接的一部分推送。远程主机编码在`SSH_CLIENT`环境变量中，因此可以确定。

您可以尝试`finger`远程系统，但这需要`fingerd`运行，这在当今不是常见的服务。

为用户使用特定的密钥会更好，这些密钥可以在密钥的开头设置选项，例如`environment="NAME=value"`在`authorized_keys`文件中，以确定连接的远程用户。例如

```
environment="REMOTEUSER=fred" ssh-rsa <blahblahkey> <comment> 
```

`environment`仅当您已`PermitUserEnvironment`在 sshd 配置中设置时，密钥中的选项才有效，否则`authorized_keys`将忽略该行并提示您输入密码。

# asp.net-mvc - 了解每个用户登录文化的用户

> ID：14121055
> 
> 赞同：1
> 
> 时间：2013-01-02T11:14:35.723
> 
> 标签：asp.net-mvc

`CurrentCulture`了解每个登录用户并根据该文化为每个用户进行一些设置的最佳地点是什么？

我可以使用静态构造函数来分配静态属性！

我可以做这样的事情吗！！

```
 public class MetricSystemHelper
{
    private static bool _isMetric;
    static MetricSystemHelper()
    {
        RegionInfo region = new RegionInfo(System.Threading.Thread.CurrentThread.CurrentCulture.Name);

        if (true == region.IsMetric)
        {
            _isMetric = true;
        }
        else //  USA, Liberia, Myanmar(Only these countries doesn't use metric)
        {
            _isMetric = false;
        };
    }

    public static bool IsMetric
    {
        get
        {
             return _isMetric;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:43:40.493

您可以使用该`Thread.CurrentThread.CurrentCulture`属性来检索当前 ASP.NET 用户的文化信息。如果您需要保留此信息，您可以在用户登录时将其存储在数据库中。但是您应该知道，在 ASP.NET 应用程序中，此属性是从[`<globalization>`](http://msdn.microsoft.com/en-us/library/hy4kkhe0%28v=vs.100%29.aspx)您的 web.config 文件中的元素填充的。

例如：

```
<globalization culture="auto" uiCulture="auto" /> 
```

`auto`是默认值。然后 ASP.NET 将使用`Accept-Language`HTTP 请求标头来填充此属性。此属性通常由客户端浏览器在每次请求时发送。但请注意以下问题：同一用户可能有 2 个浏览器（例如 Google Chrome 和 Mozilla Firefox），并且他可能在这些浏览器中配置了不同的文化设置。因此，当他访问您的网站时，您可能会为同一用户获得不同的结果。

另一方面，如果您想以与浏览器无关的方式管理用户的语言或文化偏好，您应该为用户提供告诉您他的偏好的可能性。例如，这可能是您网站中用户可以修改的设置，您可以将其存储在数据库中。

# php - 告诉 PHP 类在扩展时始终运行它的构造函数

> ID：14121058
> 
> 赞同：4
> 
> 时间：2013-01-02T11:14:39.417
> 
> 标签：php, class, constructor, extend

据我了解，当扩展 PHP 类时，它的构造函数没有被调用？因此，在下面，该方法`Options_Page_Template->on_enqueue_scripts()`从未实际运行 -

```
class Options_Page_Template{

    function __construct(){ 

        /** Enqueue scrips and styles for use in this plugin */
        add_action('wp_enqueue_scripts', array(&$this, 'on_enqueue_scripts'));

    }

    function on_enqueue_scripts(){

        { do Whatever here }

    }

}

class Options_Home extends Options_Page_Template{

    function __construct(){ 

        { Add various actions here }

    }

} 
```

有没有办法告诉它在扩展时`Options_Page_Template()`总是运行它自己的`__constructor()`？我知道我可以使用`parent::__construct()`，但这涉及将代码添加到扩展类的所有文件中。

我还尝试了将构造函数与类同名的老式方法，但 PHP 显然比这更聪明，因为它不起作用。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T11:17:45.740

不可能。对于所有代码，一个好的经验法则是始终为覆盖构造函数的每个子类调用 parent::__construct；如果不是，请在构造函数中明确注释，以及为什么。

一般来说，对于函数和构造函数/析构函数，如果你重写了一些东西；您还负责调用父函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T11:25:37.180

`parent::__construct()`如果要在两个类中创建 __construct，则必须始终使用您确实可以选择将其翻转。您可以让您的父类构造函数检查子类中是否存在自定义构造函数并运行它。

```
<?php
class Options_Page_Template{
    function __construct(){ 
        if (method_exists($this,'__beforeconstruct'))
          $this->__beforeconstruct();

        echo "construct class<br/>";

        if (method_exists($this,'__afterconstruct'))
          $this->__afterconstruct();

    }

    function on_enqueue_scripts(){
    }
}

class Options_Home extends Options_Page_Template{
    function __beforeconstruct(){ 
       echo "Extended class before<br/>";
    }

    function __afterconstruct(){ 
       echo "Extended class after<br/>";
    }
}

new Options_Home();

?> 
```

输出：

```
Extended class before
construct class
Extended class after 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T11:22:03.750

你可以做一些讨厌的事情，比如将你的构造函数定义为 final 并有一个受保护的 init 方法，扩展类可以覆盖它，但老实说我不建议这样做。

这样，如果有人试图在子类中编写构造函数，他们会得到类似的东西：

PHP 致命错误：无法在第 5 行的 php shell 代码中覆盖最终方法 A::__construct()

您可能需要换一种不同的方法来组织您的课程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:23:11.173

```
class Options_Home extends Options_Page_Template{

    function __construct() { 
       parent::__construct(); // Needs to be first line so the rest of the constructor
                              // can assume the Options_Page_Template has been constructed.
       // Various stuff here for Options_home constructor

    }

} 
```

应该管用。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-02T11:17:38.820

只是不要为扩展类定义构造函数。

# java - 同步访问的方法应该同步吗？

> ID：14121059
> 
> 赞同：2
> 
> 时间：2013-01-02T11:14:41.703
> 
> 标签：java, concurrency, synchronized, synchronized-block

我想从一个`synchronized`块中访问一个方法。这是一个例子：

```
public void doSomething() {
    // simple stuff

    // a block to reduce the synchronized code to
    // what really needs to be synchronized.
    synchronized(this) {
        if (precondition) {
            doSequentialStuff();
        }
    }
}

private void doSequentialStuff() {
    // do stuff needs to be performed sequentially.
} 
```

`doSequentialStuff`为了编写干净的代码，我想知道明确地创建方法是否好`synchronized`。恕我直言，这在语义上没有任何区别，因为在这两种情况下都有锁，`this`并且保证只能从`synchronized`块中访问该方法。我希望增加可读性。

有什么建议吗？

**编辑：** 我修改了示例以合并评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:23:33.083

如果没有合法的代码路径`doHeavyStuff`可以在不持有锁的情况下执行，那么一定要**通过**它`synchronized`来抢占未来由粗心的开发人员引入的任何错误。代码的可读性只能提高什么方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:17:01.127

最好使用断言来检查锁是否被持有。请注意，您确实需要启用断言才能执行检查。

```
assert Thread.holdsLock(this); 
```

通常，如果您使用这种私有方法，它往往表明您应该将类​​一分为二。外层执行锁定以及可能适合客户端的其他事情，而更深层则更关注实现。

使用`this`to lock 是可疑的。通常最好使用私有显式锁定对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:17:01.453

看看[http://weblogs.java.net/blog/mason/archive/2006/09/rechecking_doub.html](http://weblogs.java.net/blog/mason/archive/2006/09/rechecking_doub.html)，它涵盖了类似的模式（以单例为例，但您可以轻松地根据您的情况对其进行改造）。

# c++ - C++ 字符串擦除返回 *this 是什么意思？

> ID：14121064
> 
> 赞同：4
> 
> 时间：2013-01-02T11:15:31.013
> 
> 标签：c++, string, erase

所以C++字符串函数

```
string& erase ( size_t pos = 0, size_t n = npos ) 
```

返回`*this`。这意味着什么？为什么我需要它来返回任何东西？

例子

```
string name = "jimmy";  
name.erase(0,1); 
```

会擦除`j`并变成`immy`，但为什么我需要它来返回任何东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T11:16:52.337

对于**方法链**。例如，在你擦除之后，你可以调用`==`它来检查一些东西：

```
string name = "jimmy";
bool b = name.erase(0,1) == "immy"; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T11:17:18.270

这只是为了方便，例如您可以像这样链接调用：

```
name.erase(0,1).erase(3,1); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T11:49:10.173

在您的示例中，您*不需要*它返回任何内容，因为表达式：

```
name.erase(0,1) 
```

相当于：

```
((void)name.erase(0,1), name) 
```

因此，例如，您可以编写：

```
while(name.erase(0,1).size()) {
    std::cout << name << '\n';
} 
```

或者：

```
while((name.erase(0,1), name).size()) {
    std::cout << name << '\n';
} 
```

或者：

```
while(name.erase(0,1), name.size()) {
    std::cout << name << '\n';
} 
```

或者：

```
while(true) {
    name.erase(0,1);
    if (!name.size()) break;
    std::cout << name << '\n';
} 
```

该标准决定给您选择，可能是基于它可能会使用返回值而不是“浪费”它。

基本上，它有时会节省一些重复变量名或引用中间结果的代码。

有些人认为修改被调用对象的函数不应该返回任何东西（想法是将具有副作用的函数的使用限制为每个语句一个）。在 C++ 中，他们只需要忍受标准库的设计者不同意的事实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:19:20.363

你可以这样做：

```
void process(std::string const &s) {}

process(name.erase(0,1)); //self-explanatory?

std::cout << name.erase(0,1) << std::endl; 

//etc 
```

以及其他答案提到的事情。

# iptables - iptables 嗅探流量未发送到本地计算机

> ID：14121066
> 
> 赞同：1
> 
> 时间：2013-01-02T11:15:38.000
> 
> 标签：iptables, mirror, sniffer

我有一个交换机配置为将所有流量镜像到服务器的以太网接口。我实际上可以看到使用 tshark、tcpdump 等接收到的数据包，但 iptables 似乎没有看到这个流量。我的最终目标是 ulog 用于连接记帐的同步数据包。

我试图在 PREROUTING 链中放置规则，但没有成功。

iptable 可以捕获没有发送到本地机器的数据包吗？如果没有，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:33:48.977

`iptables`仅适用于以某种方式指向您的机器的 IP 数据包。因此，您尝试实现的目标将*无法*使用`iptables`. 要使其工作，您需要将记帐机器设置为所有 IP 流量的路由器。

这个任务的 tcpdump 有什么问题？

```
tcpdump -G 3600 -w tcpsyn-%FT%T.pcap tcp and 'tcp[tcpflags] & (tcp-ack|tcp-syn) = tcp-syn' 
```

如果您想要所有 TCP 启动尝试。

```
tcpdump -G 3600 -w tcpsynack-%FT%T.pcap tcp and 'tcp[tcpflags] & (tcp-ack|tcp-syn) = (tcp-ack|tcp-syn)' 
```

如果您希望实际建立所有 TCP 会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:19:04.297

您使用哪个表进行监控？

您要做的是使用过滤表（默认）和`FORWARDING`链：它专门用于捕获“遍历”机器的数据包。例如：

```
iptables -A FORWARDING -p tcp --dport 80 -j LOG 
```

该`INPUT`链将捕获来自外部的发往本地机器的`OUTPUT`数据包，该链将捕获来自该机器并向外发送的数据包。

附带说明：通过环回传输的数据包会同时通过`INPUT`和`OUTPUT`链。

至于`PREROUTING`，它是一个链，如果有必要，*在*路由决策之前修改数据包——这就是为什么，例如，端口重定向在那里完成。这就是为什么过滤表没有钩子的原因：它没有意义。

# iphone - UISearchBar scopebar tint color 问题

> ID：14121071
> 
> 赞同：1
> 
> 时间：2013-01-02T11:15:56.353
> 
> 标签：iphone, ios, ios4, cocos2d-iphone

在使用带有范围栏的 uisearchbar 时，范围栏的色调在 iOS 4.3 中没有更新。在剩余的 iOS 版本中，它运行良好。我在这里展示了该示例的屏幕截图。请有任何解决此问题的想法。![在此处输入图像描述](../Images/bd6f04c4cea58bd719948c278cd246f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:31:27.093

```
for (id subview in yourSearchDisplayController.searchBar.subviews )
{
    if([subview isMemberOfClass:[UISegmentedControl class]])
    {
        UISegmentedControl *scopeBar=(UISegmentedControl *) subview;
        [scopeBar setSegmentedControlStyle:UISegmentedControlStyleBar];
        [scopeBar setTintColor: [UIColor redColor]];//you can also set RGB color here 
        //scopeBar.tintColor =  [UIColor blackColor];         
    }
} 
```

另请参阅此链接中的我的答案以修改`UISearchBar`组件

[如何在 iOS 上更改 UISearchBar 组件的内部背景颜色](https://stackoverflow.com/questions/13817330/how-to-change-inside-background-color-of-uisearchbar-component-on-ios/13817915#13817915)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:22:58.077

如果我没记错的话，不可能改变范围栏的色调。一种解决方案可能是搜索搜索栏的所有子视图并找到范围栏对象并尝试修改其背景。但这可能会导致您修改私有财产，因此可能无法接受。我试图这样做，但我放弃了它，不知道为什么。

其他不太干净的解决方案是自己实现范围栏并将其作为子视图添加到搜索栏并阻止原始范围栏。仅对 iOS 4.3 或更低版本执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-26T12:16:30.280

![在此处输入图像描述](../Images/84b0c740465d2a7741760a6c9475763d.png)

更改色调颜色以更改范围栏的颜色。注意 BarTintColor 不同 - 这将改变搜索栏的颜色。

# json - 从 json 文件更新 JQuery 移动列表视图

> ID：14121075
> 
> 赞同：2
> 
> 时间：2013-01-02T11:16:12.883
> 
> 标签：json, html, jquery-mobile

在花了最后几天试图找到解决方案之后，现在我正在寻求帮助以了解哪些是/是我的代码的错误/s。从以下外部 Json 文件开始`listviewJsonData.json`

```
var itemList = [{"title":"Title_1","description":"Blah blah1"},{"title":"Title_2","description":"Blah blah2"}]; 
```

我正在通过以下代码更新列表视图：

```
<div id="dataList">
     <ul data-role="listview" data-inset="true">
        <script type="text/javascript">
            var serviceURL = "https://.../.../listviewJsonData.json";
            var outputitem = '';
            $.getJSON(serviceURL,function(data) {
                $.each(data, function(index,item) {
                        outputitem += '<li><h4>'+ item[index].title +'</h4></li>';
                        $('#dataList').append(outputitem);
                    }
                    $('#dataList').listview('refresh');
            }); 
        </script>
     </ul>
</div> 
```

这段代码没有给我任何更新，并且列表视图仍然是空的，我也检查了这篇[文章](https://stackoverflow.com/questions/10972513/jquery-mobile-parse-json-for-listview)，但我无法找到解决我的问题的方法。

谁能给我任何帮助？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:17:08.800

您的脚本是内联的，可能会在 jQuery Mobile 加载或增强您的标记之前触发。尝试通过将脚本作为 pageinit 事件的一部分触发来调用脚本。

[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

```
$( '#aboutPage' ).live( 'pageinit',function(event){
  enhanceMyDataList();
}); 
```

此外，您将`<li>`项目附加到容器`<div>`，而不是您的`<ul>`. 移动/组合您的`id`属性。

`<ul id="dataList" data-role="listview" data-inset="true">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:25:24.757

尝试这个：

```
<div>
  <ul id="dataList" data-role="listview" data-inset="true">
  </ul>
  <script type="text/javascript">
     var serviceURL = "https://.../.../listviewJsonData.json";
     $.getJSON(serviceURL,function(data) {
       $.each(data, function(index,item) {
         $('#dataList').append('<li><h4>'+ item.title +'</h4></li>');
       });
       $('#dataList').listview('refresh');
     });
  </script>
</div> 
```

**编辑：**我将 div id 更改为 ul 和脚本上的语法错误。

# google-apps-script - Google Apps 脚本 - 推文批准者

> ID：14121076
> 
> 赞同：1
> 
> 时间：2013-01-02T11:16:16.783
> 
> 标签：google-apps-script

我一直在关注这里的指南：[https ://developers.google.com/apps-script/articles/twitter_tutorial](https://developers.google.com/apps-script/articles/twitter_tutorial)

关于创建 Twitter 应用程序。

我一直在看下面的部分：

```
To get started, copy this spreadsheet containing the script for this tutorial. Once you've got your own copy of the spreadsheet, open it and you will notice the spreadsheet will be empty; that is intentional, as we won't be using any of the spreadsheet's cells in this tutorial.The first thing you need to do is publish your script as a service. To do this, open the script editor by clicking Tools > Script Editor... In the new window, click Publish > Publish as Service... 
```

这实际上根本不起作用。

如果我打开电子表格并单击工具 > 脚本编辑器。我将进入脚本向导。然后它给了我创建一个新脚本的选项。该脚本只能发布到图库或作为 Web 应用程序。发布为服务选项在哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:26:04.260

我检查了教程页面，似乎模板电子表格确实没有包含脚本......

但是完整的代码仍然发布在同一页面的末尾，因此您可以在脚本编辑器中复制/粘贴完整的代码（从向导中选择新代码并删除其中的所有内容）并从那里开始。

关于*“发布为服务”*，这是现在称为**部署为 webapp**的旧名称，过程略有不同，并在[此处](https://developers.google.com/apps-script/execution_web_apps)进行了描述，您需要先保存一个版本（在文件菜单中管理版本）然后您将获得 2 个 url，一个用于开发，一个用于使用，两者都将从您的浏览器开始`doGet()`运行。

关于电子表格菜单中的初始化和授权的教程的其余部分没有改变，只需按照教程说明进行操作即可。

希望对你有帮助

# winapi - Windows 7 中的文件重定向

> ID：14121078
> 
> 赞同：0
> 
> 时间：2013-01-02T11:16:23.107
> 
> 标签：winapi, windows-7

![截屏](../Images/327e7fe8024c9a299cc3ffe7cb57df89.png)

因此，假设我们有一个`"c:\1.txt"`文本文件和一个`"c:\other\"`包含 3 个其他文本文件（A、B、C）的文件夹。

我想做的是`c:\1.txt`随机或根据一天中的特定时间重定向到 A、B 或 C。

例如，如果您`1.txt`使用任何应用程序（记事本、写字板等）打开文件。Windows 应该表现得像正在与之交谈以`"c:\other\A.txt"`进行阅读、写作等。而不是`c:\1.txt`. 就好像 Windows 对所有其他应用程序撒谎并表现得好像文件已更改，而实际上它只是重定向到另一个文件，而不是更改真实文件。

我认为 Windows 7 已经对“程序文件”文件夹做了类似的事情，但我需要能够使用 Windows API 或其他东西、Java 或任何其他常见的编程语言来切换文件（在 A、B、C 之间）。我需要告诉 Windows 每次选择什么文件。

有没有人听说过这样的事情？是否可以？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:46:09.407

您可以使用符号链接来执行此操作。在命令行你会这样做：

```
C:\>mklink 1.txt 其他\A.txt
为 1.txt > other\A.txt 创建的符号链接

```

您以编程方式使用该[`CreateSymbolicLink`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa363866.aspx)功能。

但是您不能这样做并保留一个名为 C:\1.txt 的真实文件。您不能有两个具有相同名称的不同对象。

* * *

关于 Program Files 和 Program Files (x86) 文件夹，它们只是普通文件夹。只有约定说 64 位应用程序进入前者，而 32 位应用程序进入后者。也许您正在考虑影响 system32 文件夹的文件系统重定向器。无论如何，这确实是一个问题。

# .net - Windows 无法在 Win Server 2008 R2 SP1 上启动服务（错误 1053）

> ID：14121079
> 
> 赞同：13
> 
> 时间：2013-01-02T11:16:23.403
> 
> 标签：.net, windows-services, windows-server-2008-r2

这个问题似乎被广泛讨论，但在我的特定案例中找到解决方案时我遇到了问题。

我的服务设置为在`Local System`帐户下运行。在我的第一台安装了*Windows 7 SP1（64 位）的*机器上，一切正常。但是，就在我尝试使用*Windows Server 2008 R2 SP1 (64-bit)*在我的第二台机器上启动服务之后，甚至没有第二次通过，我正面临这个恼人的错误：

```
Windows could not start the ProService service on Local Computer
Error 1053: The service did not respond to the start or control request in a timely fashion 
```

显示`System Log`2个条目：

```
The ProService service failed to start due to the following error: 
The service did not respond to the start or control request in a timely fashion. 
```

和：

```
A timeout was reached (30000 milliseconds) while waiting for the ProService service to connect. 
```

实现如下所示：

**程序.cs：**

```
static void Main()
{
    AppDomain.CurrentDomain.UnhandledException += CurrentDomainUnhandledException;
    ServiceBase.Run(new ServiceBase[] { new ProService() });
}

static void CurrentDomainUnhandledException(object sender, UnhandledExceptionEventArgs e)
{
    if (e != null && e.ExceptionObject != null)
    {
        Logger.Record(e.ExceptionObject);
    }            
} 
```

**ProService.cs：**

```
public ProService()
{
    InitializeComponent();
}

protected override void OnStart(string[] args)
{
    try
    {
        RequestAdditionalTime(10000);
        FireStarter.Instance.Execute();
    }
    catch (Exception e)
    {
        Logger.Record(e);
        throw;
    }            
} 
```

该`OnStart`方法只是启动一个新线程，因此执行几乎不需要任何时间。我使用`RequestAdditionalTime`声明以防万一-拒绝将此事作为我的问题的根源。此外，如您所见，我正在处理所有异常，但在启动期间没有异常写入我的自定义服务事件日志（顺便说一句：日志记录正在第一台 win7 机器上工作）。如何调查发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T09:08:44.040

我已经通过几个步骤弄清楚了发生了什么：

1.  我已经编写了控制台应用程序 - 包装器基本上是在`OnStart`服务方法中完成的。
2.  我已经执行了控制台应用程序 - 应用程序正常启动。
3.  我已将服务配置文件的内容复制到控制台应用程序配置文件。
4.  我再次执行了控制台应用程序 - 应用程序立即静默中止（出乎意料地类似于我们的服务行为，出了点问题）。
5.  我比较了 2 个配置 - 来自服务和来自控制台应用程序的原始配置。结果，我发现了一些差异。其中，有这样一个条目 - 问题的根源（删除后，一切正常）：

    ```
    <startup>
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup> 
    ```

所以基本上我有过时的配置文件。以前服务是在.NET 4.5下编译的，然后我将框架更改为4.0并将文件部署到服务器，但保留了以前的配置文件（我更改了目标框架，因为我的开发机器有.NET 4.5而服务器有不是）。我不会认为显示的行会在没有任何合理信息的情况下隐藏所有问题，这有助于跟踪混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T14:53:44.737

检查缺少的依赖项/DLL。

如果您还没有这样做，请允许您的服务作为常规应用程序调用（长期调试的一种很好的技术），并查看它是否在您的 Windows 2008 机器上正常启动。

如果以这种方式工作，那么在 LocalSystem 帐户中运行可能会出现问题。继续从在 LocalSystem 帐户中运行的命令提示符启动您的应用程序（[此处的示例设置](http://www.coretechnologies.com/products/AlwaysUp/Apps/RunCommandPromptAsAService.html)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-31T15:08:41.047

我尝试了此[链接提供的以下修复](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/b57ee42d-42ef-44a4-9670-be9088dbf9d4/reporting-server-error-1053-the-service-did-not-respond-to-the-start-or-control-request-in-a-timely?forum=sqlreportingservices)

1.  单击开始，单击运行，键入 regedit，然后单击确定。

2.  找到并单击以下注册表子项：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control

3.  在右窗格中，找到 ServicesPipeTimeout 条目。
    注意 如果 ServicesPipeTimeout 条目不存在，您必须创建它。为此，请按照下列步骤操作
    ：在编辑菜单上，指向新建，然后单击 DWORD 值。
    湾。键入 ServicesPipeTimeout，然后按 Enter。
4.  右键单击 ServicesPipeTimeout，然后单击修改。
5.  单击十进制，键入 60000，然后单击确定。
    此值表示服务超时之前的时间（以毫秒为单位）。
6.  重新启动计算机。

但我仍然有启动服务的问题。

对我有用的修复是，

1.  转到 services.msc
2.  双击您要启动的服务。
3.  采取登录选项卡
4.  将登录身份更改为：本地系统帐户。
5.  尝试在此更改后启动服务。（仍然给出 1053 错误）
6.  再次选择登录选项卡，将其更改为网络服务（随机提供新密码）
7.  尝试再次启动服务。（服务完美启动）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T08:14:24.300

我尝试了以下步骤。它就像一个魅力。

1.转到 services.msc 2.双击您要启动的服务。3.Take 登录选项卡 4.Changed 登录为：本地系统帐户。5.更改后尝试启动服务。（仍然给出1053错误） 6.再次登录选项卡，将其更改为网络服务（随机输入新密码） 7.再次尝试启动服务。（服务已启动完美）

但我只想知道会是什么问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-03T13:20:46.343

安装服务后，我必须授予安装文件夹的完全控制权限（每个人）。然后，我的服务将完美启动。

# android - android按钮布局不出现

> ID：14121080
> 
> 赞同：0
> 
> 时间：2013-01-02T11:16:40.237
> 
> 标签：android, android-layout, button

嘿，我正在做一个安卓应用程序，有人可以告诉我为什么我的安卓屏幕上没有显示按钮 mi_perfil？这是我的布局代码：

```
<LinearLayout 
    android:id="@+id/linearLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
     >

      <ImageView
        android:id="@+id/foto"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_marginRight="6dip"
        android:layout_marginLeft="20dip" /> 

            <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/linearLayout2"
            android:gravity="center_horizontal"
            android:layout_toRightOf="@id/linearLayout"
            android:orientation="vertical" >

                <TextView
                    android:id="@+id/txt3"
                    android:layout_width="match_parent"
                    android:layout_height="34dp"
                     />

                 <TextView
                    android:id="@+id/txt4"
                    android:layout_width="match_parent"
                    android:layout_height="34dp"
                    />

                <TextView
                    android:id="@+id/txt2"
                    android:layout_width="match_parent"
                    android:layout_height="34dp"
                    android:text="@string/Importar_Contactos"  />

            </LinearLayout>

   <Button android:id="@+id/miPerfil"
            android:layout_height="match_parent"
            android:layout_width="match_parent"
            android:text="@string/boton_mi_perfil"
            android:onClick="MiPerfil"
            android:layout_marginRight="20dip"
            android:layout_marginLeft="6dip" />     

   </LinearLayout> 
```

我想将按钮放在屏幕右侧，但它没有出现。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:41:09.917

使用RelativeLayout 而不是外部的LinearLayout。

然后您可以将图像视图排列在左侧，将按钮排列在右侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:16:55.253

将方向更改为**"vertical"**。
比它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:49:18.003

如果您使用`RelativeLayout`，您可以使用按钮内的属性`android:layout_alignParentRight="true"`来正确放置您的按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:50:48.033

请在子linearLayout中试试这个你的按钮代码

```
<LinearLayout 
android:id="@+id/linearLayout"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center_horizontal"
 >

  <ImageView
    android:id="@+id/foto"
    android:layout_width="48dp"
    android:layout_height="48dp"
    android:layout_marginRight="6dip"
    android:layout_marginLeft="20dip" /> 

        <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/linearLayout2"
        android:gravity="center_horizontal"
        android:layout_toRightOf="@id/linearLayout"
        android:orientation="vertical" >

            <TextView
                android:id="@+id/txt3"
                android:layout_width="match_parent"
                android:layout_height="34dp"
                 />

             <TextView
                android:id="@+id/txt4"
                android:layout_width="match_parent"
                android:layout_height="34dp"
                />

            <TextView
                android:id="@+id/txt2"
                android:layout_width="match_parent"
                android:layout_height="34dp"
                android:text="@string/Importar_Contactos"  />

<Button android:id="@+id/miPerfil"
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:text="@string/boton_mi_perfil"
        android:onClick="MiPerfil"
        android:layout_marginRight="20dip"
        android:layout_marginLeft="6dip" />

        </LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T11:56:36.050

我已根据您的要求编辑了您的 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@android:color/white"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/linearLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal" >

    <ImageView
        android:id="@+id/foto"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="6dip" />

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/linearLayout"
        android:gravity="center_horizontal"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/txt3"
            android:layout_width="match_parent"
            android:layout_height="34dp" />

        <TextView
            android:id="@+id/txt4"
            android:layout_width="match_parent"
            android:layout_height="34dp" />

        <LinearLayout
            android:id="@+id/linearLayout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/linearLayout"
            android:gravity="center"
            android:orientation="horizontal"
            android:weightSum="2" >

            <TextView
                android:id="@+id/txt2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text=" Importar_Contactos" />

            <Button
                android:id="@+id/miPerfil"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center"
                android:text="dsfsd" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout>

</LinearLayout> 
```

您的按钮布局与宽度和高度匹配父级，这就是您的按钮隐藏在后面的原因。我使用了另一个子线性布局。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T11:58:47.570

请试一试：

```
<LinearLayout
    android:id="@+id/linearLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal" >

    <ImageView
        android:id="@+id/foto"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="6dip"
        android:background="@drawable/ic_launcher" />

    <RelativeLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/linearLayout"
        android:gravity="center_horizontal"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/txt3"
            android:layout_width="match_parent"
            android:layout_height="34dp"
             />

        <TextView
            android:id="@+id/txt4"
            android:layout_width="match_parent"
            android:layout_height="34dp"
            android:layout_below="@+id/txt3"
             />

        <TextView
            android:id="@+id/txt2"
            android:layout_width="match_parent"
            android:layout_height="34dp"
            android:layout_below="@+id/txt4"
            android:text="Importar_Contactos" />

        <Button
            android:id="@+id/miPerfil"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginLeft="6dip"
            android:onClick="MiPerfil"
            android:text="Button" />
    </RelativeLayout>
</LinearLayout> 
```

# android - Android：是否可以将 R 与 app 和 lib 别名来区分两者？

> ID：14121081
> 
> 赞同：2
> 
> 时间：2013-01-02T11:16:50.770
> 
> 标签：android, android-library

我可以以某种方式`R`为库中生成的`R`文件和应用程序中生成的文件取别名吗？

`IE`: 我有两个项目，一个是图书馆。我在应用程序中引用了库。库创建一个`R`文件，应用程序创建两个：`com.example.mapplication.R`以及`R`来自引用库的`com.example.mlibrary.R`. 但是，由于我想在应用程序中经常使用这两个类，所以我想为这两个`R`类设置别名。例如，调用库之类的`R`东西`libR`和应用程序之`R`类的`appR`.

我尝试了一些非常愚蠢的事情，我什至不会完全提及它们，但我做了一些事情，例如`private com.example.mapplication.R appR = com.example.mapplication.R`（立即意识到这行不通），并且`private Class<com.example.mapplication.R> appRclass = com.example.mapplication.R.class;`，但这并没有给我想要的效果. 但是，我确实使用后一种方法和一些反射来获得像这样的字段和内部类：

```
Class<com.example.mapplication.R> appRclass = com.example.mapplication.R.class;
int activity_main_layoutid = Toolkit.getFromClass(appR).
         getMeTheInnerClass("layout").getMeAField("activity_main"); 
```

我还没有完全实现 Toolkit 方法，但我们都知道反射可以做这种事情，但归根结底，它与打字`com.example.mapplication.R`或`com.example.mlibrary.R`任何地方一样多。

所以总结一下：**是否可以给多个`R`命名**，以便我可以使用`appR`并`libR`区分两者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:00:40.470

我希望我们可以，但据我所知，这是不可能的，至少现在还不可能。

我也希望我们可以将资源放在子文件夹中，但即使这样也是不可能的。

您可以做的是为每个库设置一个唯一的前缀（重命名每个资源文件），因为它是由一些第三方库完成的（例如*actionBarSherlock*，它使用“abs”作为前缀）。

或者，您可以有一个特殊的技巧，将文件放在**src**文件夹中并从那里访问它们，但这更像是一种解决方法，因为`R`不会引用那里的任何资源。

例如，您可以将名为**image.png**的图像放入**src/com/company/app_name**，然后使用以下命令从中创建位图：

```
final InputStream fis = getClass().getResourceAsStream("/com/company/app_name/image.png");
final Bitmap bitmap = BitmapFactory.decodeStream(fis); 
```

顺便说一句，如果您考虑过使用 assets 文件夹，则不能对库项目执行此操作，因为它要求您在使用库项目的项目中拥有文件。它会起作用，但它错过了封装的想法......

# django - 使用 Django 为 Nginx 和 Gunicorn 设置可切换代理 ip

> ID：14121083
> 
> 赞同：2
> 
> 时间：2013-01-02T11:16:58.350
> 
> 标签：django, nginx, ip, gunicorn

我有`VDS`with`debian`和`nginx`, `gunicorn`,`django`安装。以及许多解析为 ip 的域。

我打算从我的提供商那里购买额外的 IP。

我的目标是：轻松切换当前域的 ip。

当然，我可以通过 1 种方式做到这一点：使用 dns 托管，并在需要时从 A 记录中更改 ip。但还有另一种方式：以某种方式代理流量。我有 nginx 配置：

```
...
upstream app_server_djangoapp {
    server localhost:8000 fail_timeout=0;
}

server {
    listen 80;
    server_name yourdomain.com;
... 
```

我如何设置服务器，所以我可以在 django 中存储和管理代理域 ip 表单数据库？

# ruby-on-rails - ruby on rails 3 使用 private_pub 运行 faye 服务器时出错

> ID：14121084
> 
> 赞同：0
> 
> 时间：2013-01-02T11:17:00.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3, thin, faye, private-pub

我正在尝试运行本教程中的代码：[http ://railscasts.com/episodes/316-private-pub](http://railscasts.com/episodes/316-private-pub)

我从 github 下载了源代码并按照说明进行操作，但随后我运行 `rackup private_pub.ru -s thin -E production`的瘦服务器无法启动。

```
>> Thin web server (v1.3.1 codename Triple Espresso)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:9292, CTRL+C to stop
/home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/eventmachine-0.12.10/lib/eventmachine.rb:572:in `start_tcp_server': no acceptor (RuntimeError)
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/eventmachine-0.12.10/lib/eventmachine.rb:572:in `start_server'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/thin-1.3.1/lib/thin/backends/tcp_server.rb:16:in `connect'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/thin-1.3.1/lib/thin/backends/base.rb:53:in `block in start'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `call'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/thin-1.3.1/lib/thin/backends/base.rb:61:in `start'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/thin-1.3.1/lib/thin/server.rb:159:in `start'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.3.6/lib/rack/handler/thin.rb:13:in `run'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.3.6/lib/rack/server.rb:265:in `start'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.3.6/lib/rack/server.rb:137:in `start'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/gems/rack-1.3.6/bin/rackup:4:in `<top (required)>'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/bin/rackup:19:in `load'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/bin/rackup:19:in `<main>'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/bin/ruby_noexec_wrapper:14:in `eval'
    from /home/jatin/.rvm/gems/ruby-1.9.2-p320/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我该如何摆脱这个错误？

# javascript - 如何从字符串中删除文本？

> ID：14121100
> 
> 赞同：5
> 
> 时间：2013-01-02T11:18:10.567
> 
> 标签：javascript, string, null, substring, match

我有一个变量保存单行字符串，它是这样的 html 元素。

```
var des = "<p> --Sometext before-- FI: This is fi name, This is fi manufacturer <br /> SE:This is se name, This is se manufacturer <br /> EN: This is en name, This is en manufacturer</p>"; 
```

我想选择 FI 之后的所有内容：直到逗号符号进入一个变量，逗号符号之后直到
标记进入另一个变量。也适用于 SE: 和 EN:。

例如，结果将是这样的。

```
 var fi_name         = "This is fi name";
    var fi_manufacturer = "This is fi manufacturer";
    var se_name         = "This is se name";
    var se_manufacturer = "This is se manufacturer";
    var en_name         = "This is en name";
    var en_manufacturer = "This is en manufacturer"; 
```

请注意，字符串会动态变化，但仍具有相同的模式。

例如：

```
<p> --Sometext before-- FI:[name],[manufacturer]<br/ >SE:[name],[manufacturer]<br/ >FI:[name],[manufacturer]</p> 
```

您可以查看[JsFiddle](http://jsfiddle.net/raPDd/)中的演示。

现在它抛出空错误。

已编辑 vvv

它不适用于实时网站。des 变量完全像这样。请参阅[http://jsfiddle.net/AM8X2/](http://jsfiddle.net/AM8X2/)它再次抛出空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:34:05.207

您只需查找指定的模式并从中提取相关信息：

```
var des = "<p>FI: This is fi name, This is fi manufacturer <br /> SE:This is se name, This is se manufacturer <br /> EN: This is en name, This is en manufacturer</p>";

var f = function(w, s) {
    return new RegExp(w + ':([^,]+)').exec(s)[1];
}

fi = f('FI', des);
se = f('SE', des);
en = f('EN', des); 
```

`w + ':([^,]+)'`可以解释为：get me in冒号后面的`w`值`s`

这是更新的[小提琴](http://jsfiddle.net/raPDd/2/)。

* * *

一个更完整的解决方案，一个处理所有 HTML 标记的解决方案如下：

```
var f = function(w, s) {
    var el = document.createElement('div'), arr;
    el.innerHTML = s;

    arr = (new RegExp(w + ':([^\n]+)').exec(el.innerText)[1]).split(',');

    return {
        manufacturer: arr[1],
        name: arr[0]       
    }
}

fi = JSON.stringify(f('FI', des));
se = JSON.stringify(f('SE', des));
en = JSON.stringify(f('EN', des)); 
```

小提琴就[在这里](http://jsfiddle.net/epoch/jdZdv/)

要在变量中访问这些中的任何一个（没有`JSON.stringify()`，直接方法返回，即`f('SE', des)`），您将执行以下操作：

```
// for fi manufacturer
fi.manufacturer

// for en name
en.name

// etc.. 
```

在我看来，通过使用它，你有一个更加模块化的方法，并且出错的机会更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:33:37.577

这是一个可能的解决方案：

```
var des = "<p> --Sometext before-- FI: This is fi name, This is fi manufacturer <br /> SE:This is se name, This is se manufacturer <br /> EN: This is en name, This is en manufacturer</p>";

​var matches = des.match( /([A-Z]{2}):\s*([^,]+?)\s*,\s*([^<$]+?)\s*(?=<|$)/g );

var results = [];

for ( var i = 0; i < matches.length; i++ ) {
    var res = matches[ i ].match( /([A-Z]{2}):\s*([^,]+?)\s*,\s*([^<$]+?)\s*(?=<|$)/ );
    var abbr = res[ 1 ].toLowerCase();

    results[ abbr + '_name' ] = res[ 2 ];
    results[ abbr + '_manufacturer' ] = res[ 3 ];
}

console.log( results ); 
```

在这个小提琴中尝试一下：http: [//jsfiddle.net/bukfixart/QB5qu/](http://jsfiddle.net/bukfixart/QB5qu/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T11:44:16.063

我将您的 jsFiddle 更改为：

[http://jsfiddle.net/11684/raPDd/4/](http://jsfiddle.net/11684/raPDd/4/)

我在你的正则表达式中添加了大写字母、空格和逗号，所以它不会返回 null（因为没有找到匹配项），其余的都很好。
结果：

```
var fi,se,en;
var des = "<p>FI: This is fi name, This is fi manufacturer <br /> SE:This is se name, This is se manufacturer <br /> EN: This is en name, This is en manufacturer</p>";

var match = des.match(/<p>FI:([a-zA-Z ,]+)<br \/> SE:([a-zA-Z ,]+)<br \/> EN:([a-zA-Z ,]+)<\/p>/);
fi = match[1];
se = match[2];
en = match[3];

alert("[FI]: " + fi + "\n[SE]:" + se + "\n[EN]:" + en);​ 
```

**编辑：**
我没有看到你需要单独变量中的名称和制造商，我编辑了小提琴：http: [//jsfiddle.net/11684/raPDd/5/](http://jsfiddle.net/11684/raPDd/5/)到这个：

```
var fi,se,en;
var des = "<p>FI: This is fi name, This is fi manufacturer <br /> SE:This is se name, This is se manufacturer <br /> EN: This is en name, This is en manufacturer</p>";

var match = des.match(/<p>FI:([a-zA-Z ,]+)<br \/> SE:([a-zA-Z ,]+)<br \/> EN:([a-zA-Z ,]+)<\/p>/);
fi = match[1];
se = match[2];
en = match[3];

//After that just split on the comma:

var fi_name = fi.split(",")[0];
var fi_manu = fi.split(",")[1];
var en_name = en.split(",")[0];
var en_manu = en.split(",")[1];
var se_name = se.split(",")[0];
var se_manu = se.split(",")[1];
​ 
```

# android - Activity被后退按钮关闭时返回意图结果

> ID：14121101
> 
> 赞同：19
> 
> 时间：2013-01-02T11:18:18.113
> 
> 标签：android, android-intent, android-activity

我`Activity`从原来`Activity`的开始一个新的`startActivityForResult(intent, requestCode)`。我想`Activity`在用户按下后退按钮时将数据返回到原始状态，所以当返回到原始`Activity`. 我尝试了两种方法：

*   压倒一切`onBackPressed()`：

    ```
    @Override
    public void onBackPressed() {
        super.onBackPressed();

        Intent intent = new Intent();
        intent.putIntegerArrayListExtra(SELECTION_LIST, selected);
        setResult(RESULT_OK, intent);
    } 
    ```

*   压倒一切`onPause()`：

    ```
    @Override
    protected void onPause() {
        super.onPause();

        Intent intent = new Intent();
        intent.putIntegerArrayListExtra(SELECTION_LIST, selected);
        setResult(RESULT_OK, intent);
    } 
    ```

不幸的是，他们都没有工作（`resultCode`不在`RESULT_OK`）`onActivityResult()`。这样做的正确方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-02T11:21:22.477

试试这个 ：

```
@Override
public void onBackPressed() {
   // super.onBackPressed();

    Intent intent = new Intent();
    intent.putIntegerArrayListExtra(SELECTION_LIST, selected);
    setResult(RESULT_OK, intent);
    finish();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-01T18:00:52.197

由于这个问题仍然受到关注，我发布的答案比我两年前接受的答案更正确，感谢[MasterGaurav](https://stackoverflow.com/users/332210/mastergaurav)的[提示](https://stackoverflow.com/questions/14121101/returning-intent-result-when-activity-is-closed-by-back-button/30580141#comment43994839_14121142)。

```
@Override
public void onBackPressed() {
    Intent intent = new Intent();
    intent.putIntegerArrayListExtra(SELECTION_LIST, selected);
    setResult(RESULT_OK, intent);

    super.onBackPressed();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:21:15.990

试试这个：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            onBackPressed();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:25:45.130

从原来的 Activity 开始一个新的 Activity`startActivityForResult(intent, requestCode)`

当用户按下返回键的时候想要返回数据到原来的Activity，那么什么时候返回到原来的Activity。

```
@Override
public void onBackPressed() {
    super.onBackPressed();

    Intent intent = new Intent();
    intent.putIntegerArrayListExtra(SELECTION_LIST, selected);
    setResult(RESULT_OK, intent);
} 
```

如果您想从新打开的活动中获取结果，只需覆盖

`onActivityResult(int requestCode, int resultCode, Intent data)`来自原始活动的方法

```
@Override

protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-10T15:58:33.303

试试这个：

```
@Override
public void onBackPressed() {
    super.onBackPressed();

    Intent intent = new Intent();
    intent.putIntegerArrayListExtra(SELECTION_LIST, selected);
    setResult(RESULT_OK, intent);
    finish();
} 
```

# php - opencart seo 调整

> ID：14121109
> 
> 赞同：0
> 
> 时间：2013-01-02T11:18:53.640
> 
> 标签：php, url, seo, opencart

谁能帮我调整我的 opencart seo_url 文件，以便我的博客条目具有从 url_alias 表中提取的 seo 关键字并显示为 mypage.co.uk/blog/post1 而不是它现在正在执行的操作 mypage.co.uk /blog?news_id=9

如果我删除该行`'information/news' => 'blog',`，那么它会从表中正确选择分配给博客文章的 seo 关键字，但 url 显示为 mypage.co.uk/post1

下面的代码可以帮助任何希望拥有一套比 opencart 提供的更完整的 seo 优化 url 的人。

```
 <?php
class ControllerCommonSeoUrl extends Controller {
        /* SEO Custom URL */
        private $url_list = array (
            'common/home'       => '',
            'checkout/cart'     => 'basket',
            'account/register'  => 'register',
                        'account/wishlist'  => 'wishlist',
                        'checkout/checkout' => 'checkout',
                        'account/login'     => 'login',
                        'product/special'   => 'special',
                        'affiliate/account' => 'affiliate',
                        'checkout/voucher'  => 'voucher',
                        'product/manufacturer' => 'brand',
                        'account/newsletter'   => 'newsletter',
                        'account/order'        => 'order',
                        'account/account'      => 'account',
                        'information/contact'  => 'contact',
                        'account/return/insert' => 'return/insert',
                        'information/sitemap'   => 'sitemap',
            'information/news'      => 'blog',
            );
        /* SEO Custom URL */

    public function index() {
        // Add rewrite to url class
        if ($this->config->get('config_seo_url')) {
            $this->url->addRewrite($this);
        }

        // Decode URL
        if (isset($this->request->get['_route_'])) {
            $parts = explode('/', $this->request->get['_route_']);

            foreach ($parts as $part) {
                $query = $this->db->query("SELECT * FROM " . DB_PREFIX . "url_alias WHERE keyword = '" . $this->db->escape($part) . "'");

                if ($query->num_rows) {
                    $url = explode('=', $query->row['query']);

                    if ($url[0] == 'product_id') {
                        $this->request->get['product_id'] = $url[1];
                    }

                    if ($url[0] == 'category_id') {
                        if (!isset($this->request->get['path'])) {
                            $this->request->get['path'] = $url[1];
                        } else {
                            $this->request->get['path'] .= '_' . $url[1];
                        }
                    }   

                    if ($url[0] == 'manufacturer_id') {
                        $this->request->get['manufacturer_id'] = $url[1];
                    }

                    if ($url[0] == 'information_id') {
                        $this->request->get['information_id'] = $url[1];
                    }

                } else {
                    $this->request->get['route'] = 'error/not_found';   
                }
            }
                         /* SEO Custom URL */
                         if ( $_s = $this->setURL($this->request->get['_route_']) ) {
                                 $this->request->get['route'] = $_s;
                         }/* SEO Custom URL */

            if (isset($this->request->get['product_id'])) {
                $this->request->get['route'] = 'product/product';
            } elseif (isset($this->request->get['path'])) {
                $this->request->get['route'] = 'product/category';
            } elseif (isset($this->request->get['manufacturer_id'])) {
                $this->request->get['route'] = 'product/manufacturer/info';
            } elseif (isset($this->request->get['information_id'])) {
                $this->request->get['route'] = 'information/information';
            }

            if (isset($this->request->get['route'])) {
                return $this->forward($this->request->get['route']);
            }
        }
    }

    public function rewrite($link) {
        if ($this->config->get('config_seo_url')) {
            $url_data = parse_url(str_replace('&amp;', '&', $link));

            $url = ''; 

            $data = array();

            parse_str($url_data['query'], $data);

            foreach ($data as $key => $value) {
                if (isset($data['route'])) {
                    if (($data['route'] == 'product/product' && $key == 'product_id') || (($data['route'] == 'product/manufacturer/info' || $data['route'] == 'product/product') && $key == 'manufacturer_id') || ($data['route'] == 'information/information' && $key == 'information_id')) {
                        $query = $this->db->query("SELECT * FROM " . DB_PREFIX . "url_alias WHERE `query` = '" . $this->db->escape($key . '=' . (int)$value) . "'");

                        if ($query->num_rows) {
                            $url .= '/' . $query->row['keyword'];

                            unset($data[$key]);
                        }                   
                    } elseif ($key == 'path') {
                        $categories = explode('_', $value);

                        foreach ($categories as $category) {
                            $query = $this->db->query("SELECT * FROM " . DB_PREFIX . "url_alias WHERE `query` = 'category_id=" . (int)$category . "'");

                            if ($query->num_rows) {
                                $url .= '/' . $query->row['keyword'];
                            }                           
                        }

                        unset($data[$key]);
                     }// 
                                        /* SEO Custom URL */
                                        if( $_u = $this->getURL($data['route']) ){
                                            $url .= $_u;
                                            unset($data[$key]);
                                        }/* SEO Custom URL */        

                                }
                        }

            if ($url) {
                unset($data['route']);

                $query = '';

                if ($data) {
                    foreach ($data as $key => $value) {
                        $query .= '&' . $key . '=' . $value;
                    }

                    if ($query) {
                        $query = '?' . trim($query, '&');
                    }
                }

                return $url_data['scheme'] . '://' . $url_data['host'] . (isset($url_data['port']) ? ':' . $url_data['port'] : '') . str_replace('/index.php', '', $url_data['path']) . $url . $query;
            } else {
                return $link;
            }
        } else {
            return $link;
        }       
    }
        /* SEO Custom URL */
        public function getURL($route) {
                if( count($this->url_list) > 0) {
                     foreach ($this->url_list as $key => $value) {
                        if($route == $key) {
                            return '/'.$value;
                        }
                     }
                }
                return false;
        }
        public function setURL($_route) {
                if( count($this->url_list) > 0 ){
                     foreach ($this->url_list as $key => $value) {
                        if($_route == $value) {
                            return $key;
                        }
                     }
                }
                return false;
        }/* SEO Custom URL */   
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:26:08.287

这只是如何继续前进的建议：

在您的`rewrite`方法中，有一部分`if ($url) { ... }`将`?news_id=1`or`&news_id=1`添加到 URL 的末尾。

我会在这里做一个类似于方法中测试的测试`index`——找出它是否是产品、制造商、信息、类别、新闻等，并将其替换为它的 SEO 关键字——无论是来自`url_alias`表还是来自相应的表...

然后，而不是添加`?news_id=1`or`&news_id=1`你只需添加`/<SEO_KEYWORD>`...

# mysql - Hive 的 hour() 函数返回 12 小时时钟值

> ID：14121112
> 
> 赞同：1
> 
> 时间：2013-01-02T11:19:00.343
> 
> 标签：mysql, hadoop, hive

根据文档 Hives 标准函数 hour() 应该返回一个 0 到 24 之间的值，但由于某种原因，我总是得到一个 12 小时制的时钟值，介于 0 到 12 之间。我在我的 Hive 表中使用一个`MySQLDateTime`字段作为字段。`Timestamp`有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T12:04:55.097

我想我找到了。我查看了源代码，显然`UDFHour.java`确实有两个`evaluate()`功能。一种接受`Text`对象作为参数，另一种接受`TimeStampWritable`对象作为参数。两者都使用一个`Calendar`实例，但由于某种原因，第一个函数返回的值`Calendar.HOUR_OF_DAY`和第二个`Calendar.HOUR`。

我查看了 Hives 文档，但找不到关于第二个函数的任何信息，但它就在那里。我正在使用 Hortonworks 的 HDP 附带的 Hive 0.9.0.16。

**编辑：** 我已经报告了一段时间。现在有一个补丁可用：[https](https://issues.apache.org/jira/browse/HIVE-3850) ://issues.apache.org/jira/browse/HIVE-3850 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T11:28:13.583

不管做了什么`hive`，您都可以将要返回的日期格式化为 24 小时格式。

```
select FROM_UNIXTIME(mydate)  
from mytable
; 
```

或者，如果有意义，您可以更新所有日期时间戳。

[参考](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T19:45:11.643

如果函数`hour()`使用字符串格式，则返回 24 小时格式的结果。您可以使用

`hour(cast (column_name as string))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T15:04:29.480

对于较低版本的配置单元，我有一个解决方法

```
 hour(from_unixtime(
unix_timestamp(
from_utc_timestamp(
from_unixtime(round(created_at/1000)),'Etc/GMT-8')
))) 
```

由于我使用的是 EMR，我不能选择使用最新版本的 hive，所以我得到了这个解决方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-05T18:31:37.400

只是为了展示上面已经讲过的例子

HOUR(cast (from_utc_timestamp(my_date_timestamp,'GMT') as string)) -- 返回 24 小时制

HOUR( from_utc_timestamp(my_date_timestamp ,'GMT') ) --返回 12 小时格式

# python - CSRF 令牌丢失或不正确

> ID：14121115
> 
> 赞同：2
> 
> 时间：2013-01-02T11:19:05.127
> 
> 标签：python, html, django

> **可能重复：**
> [Django 1.4 中的 CSRF 保护](https://stackoverflow.com/questions/14074844/csrf-protection-in-django-1-4)

我正在尝试使用 Django 制作一个简单的火箭票预订系统。但是，每次我尝试预订机票时，都会收到 Forbidden 403 错误：`CSRF token missing or incorrect`.

这是我的代码：

### 模型.py：

```
class Tickets(models.Model):
    rocket_line = models.ForeignKey('Rockets')
    date = models.DateField()
    number_of_seats = models.IntegerField()
    email = models.CharField(max_length=50)
    ordered_on = models.DateTimeField()
    total_price = models.DecimalField(max_digits=10, decimal_places=2)
    def __unicode__(self):
        return str(self.id) 
```

### 视图.py：

```
def order(request):
    if request.method == 'POST':
        order = Tickets(
            rocket_line = Rockets.objects.get(id=request.POST['rocket_line']),
            date=request.POST['date'],
            number_of_seats=request.POST['number_of_seats'],
            email=request.POST['email'],
            ordered_on=datetime.now(),
            total_price=(float(number_of_seats) * float(Rockets.objects.get(id=request.POST['rocket_line']).rprice))
        )
        order.save()
        return HttpResponseRedirect('/menu/')
    else:
        all_rockets = Rockets.objects.all().order_by('rtime')
        return render_to_response('order.html', { 'all_rockets': all_rockets},  RequestContext(request)) 
```

### 订单.html：

```
<h1>You can order a ticket here:</h1>

        <form action="/order/" method="post">       
        <p>             
        <label>Rocket_line</label>
        <select name="rocket_line">
            {% for rocket in all_rockets %}
                <option value="{{ rocket.id }}">{{ rocket }}</option>
            {% endfor %}
        </select>
        <label>Date</label>
        <input name="date" value="YYYY-MM-DD" type="text" size="10" />
        <label>Number of seats</label>
        <input name="number_of_seats" value="" type="text" size="10" />
        <label>E-mail</label>
        <input name="email" value="@" type="text" size="50" />
        <br /><br />
        <input class="button" value="Order" type="submit" />        
        </p>        
        </form>             
    <br /> 
```

你能帮我解决一下，问题可能出在哪里吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T11:23:42.723

取自全能的 django[文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-to-use-it)：

第1步：

> 将中间件“django.middleware.csrf.CsrfViewMiddleware”添加到中间件类列表 MIDDLEWARE_CLASSES。（它应该出现在任何假定 CSRF 攻击已被处理的视图中间件之前。）

第2步：

```
<form action="." method="post">{% csrf_token %} 
```

{% csrf_token %} 就是您需要添加到模板中的所有内容。

周围还有其他解决方案（装饰器或基于 ajax），但这个是最快和最常用的（我认为，至少......它不需要任何麻烦来实现）

# android - 与 setComponent 相反的 Android 意图

> ID：14121116
> 
> 赞同：0
> 
> 时间：2013-01-02T11:19:07.907
> 
> 标签：android, android-intent, intentfilter

`application/activity`我知道我可以通过使用来强制使用特定的意图`intent.setComponent()`。但是有没有办法说它不应该使用特定的`app/activity`?

为什么我需要这个：我的应用程序将能够响应几个`urls (like http://www.companyname.com/something/12345)`. 如果我的应用程序启动此 url 的 Intent 原因，我将检查我是否有处理此问题所需的数据。（在我的示例中，ID 为 12345）。如果我无法对意图做一些有用的事情，我会使用相同的数据创建一个新的意图，以便用户可以尝试在其浏览器中查看内容。

这是我的问题发生的时刻。当我启动新创建的意图时，我的应用程序再次出现在可以处理此问题的应用程序列表中。但我已经知道我的应用程序不能用这个意图做任何事情。用户已经知道我的应用程序无法处理意图，但如果我的应用程序没有出现在此列表中，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:55:12.207

您可以为您的应用程序使用 Intent-Filters 并根据需要使用*通配符*设置[URI](http://developer.android.com/guide/topics/manifest/data-element.html)，请参阅[此处](http://developer.android.com/guide/components/intents-filters.html#ifs)了解更多信息。通过操作或类别的一些附加信息，您可以确保您的应用程序是唯一（不）与意图匹配的应用程序。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:34:06.817

一个可行的解决方案是在创建新意图时，而不是`intent.setData(uri)`I do `intent.setDataAndType(uri, "text/html")`。这导致我的应用程序从列表中消失。目前这是一个可行的解决方案:)但我仍然想知道是否有更好的方法来实现这一结果。*

# android - 在android中单击AlertDialog的按钮时显示文本

> ID：14121121
> 
> 赞同：1
> 
> 时间：2013-01-02T11:19:37.790
> 
> 标签：android, android-alertdialog

我正在使用android，我想在`AlertDialog`按钮上做一个事件。我想动态更改按钮上的文本，这是我的代码

```
AlertDialog.Builder alert = new AlertDialog.Builder(Soto_Betawi.this);
            alert.setTitle("Payment");
            alert.setMessage("Total Price : Rp. " + total);
            final EditText input = new EditText(Soto_Betawi.this);
            alert.setView(input);
            alert.setPositiveButton("Change Due", new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int which)
                {
                    cash = Integer.parseInt(input.getText().toString());
                    change = cash - total;
                    //I want to set a text from the operation above in a text
                }
            });
            alert.setNegativeButton("Close", new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int which)
                {

                }
            });
            alert.setCancelable(true);
            alert.create().show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:28:14.997

您可以使用带有对话框主题的 Activity 并创建自己的布局，而不是使用 AlertDialog。这样您就可以简单地更改文本

`myButton.setText("your text");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:14:37.563

为您提供的另一种解决方案：

```
(AlertDialog)dialog.getButton(AlertDialog.BUTTON_POSITIVE) 
```

这应该给你积极的按钮`AlertDialog`

所以我的假设是

```
(AlertDialog)dialog.getButton(AlertDialog.BUTTON_POSITIVE).setText("Your Text"); 
```

应该是你的答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T11:38:24.357

从方法创建并显示警报对话框：

```
public void showAlert(String txtPositiveButton) {
    AlertDialog.Builder alert = new AlertDialog.Builder(Soto_Betawi.this);
    alert.setTitle("Payment");
    alert.setMessage("Total Price : Rp. " + total);
    final EditText input = new EditText(Soto_Betawi.this);
    alert.setView(input);
    alert.setPositiveButton(txtPositiveButton, new DialogInterface.OnClickListener()
    {
        public void onClick(DialogInterface dialog, int which)
        {
            cash = Integer.parseInt(input.getText().toString());
            change = cash - total;
            //I want to set a text from the operation above in a text
        }
    });
    alert.setNegativeButton("Close", new DialogInterface.OnClickListener()
    {
        public void onClick(DialogInterface dialog, int which)
        {
        }
    });
    alert.setCancelable(true);
    alert.create().show();
} 
```

# iphone - 纵向应用程序 - 横向模式视图 - 无自动旋转

> ID：14121123
> 
> 赞同：2
> 
> 时间：2013-01-02T11:19:49.287
> 
> 标签：iphone, ios, ipad, rotation

我们的应用程序处于强制纵向模式。没有自动旋转，支持的界面方向设置为纵向。

现在我们需要显示一个需要横向的“签名”视图。这应该在纵向视图上模态输入，并且需要有一个导航控制器和导航栏。它应该不能旋转到纵向，并且当模态视图被隐藏时，前一个视图应该仍然是纵向的。

我试过使用：

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft animated:YES]; 
```

但这不会旋转导航栏......大概是因为`supportedInterfaceOrientations`需要返回 0 才能工作。

有什么方法可以做我需要的吗？使用笔尖（不是故事板）。

非常感谢

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:15:00.300

只需执行这些步骤。

1.  在目标中进行可能的旋转。
2.  在您的应用程序委托中创建一个 UINavigationController 类别（我认为您的应用程序是导航基础），例如

-

```
@interface UINavigationController (Autorotation)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation   - (BOOL) shouldAutorotate;
- (NSUInteger) supportedInterfaceOrientations;
@end

@implementation UINavigationController (Autorotation)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{

    if ([self.visibleViewController isKindOfClass:["your view controller name" class]]) {
        return YES;
    }
    return  (toInterfaceOrientation == UIInterfaceOrientationPortrait);
}

-(BOOL) shouldAutorotate{
    return YES;
}

-(NSUInteger) supportedInterfaceOrientations{

    if ([self.visibleViewController isKindOfClass:["your view controller name" class]]) {
        return UIInterfaceOrientationMaskAll;
    }

    return UIInterfaceOrientationMaskPortrait;
}

@end 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:58:32.977

它的 iPhone

首先设置支持的界面方向 All Interface then

在 yourview.h 文件中

```
 AppDelegate *appDel;
 BOOL isShowingLandscapeView;
 CGAffineTransform _originalTransform;
 CGRect _originalBounds;
 CGPoint _originalCenter;
 BOOL isLand,touch; 
```

在 yourview.m 文件中

```
 -(void)viewWillAppear:(BOOL)animated
    {
          isLand = NO;

appDel = (AppDelegate*)[[UIApplication sharedApplication] delegate];
[[UIApplication sharedApplication] setStatusBarHidden:TRUE withAnimation:UIStatusBarAnimationNone];
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
_originalTransform = [[appDelegate navigationController].view transform];
_originalBounds = [[appDelegate navigationController].view bounds];
_originalCenter = [[appDelegate navigationController].view center];

[appDelegate navigationController].view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

//[appDelegate navigationController].view.bounds  = CGRectMake(0.0,20.0, 480.0, 320.0);
CGSize result = [[UIScreen mainScreen] bounds].size;

if(result.height == 480)
{

    CGAffineTransform landscapeTransform = CGAffineTransformMakeRotation(M_PI/2);
    landscapeTransform = CGAffineTransformTranslate (landscapeTransform, +60.0, +80.0);
    [[appDelegate navigationController].view setTransform:landscapeTransform];

    [appDelegate navigationController].view.bounds  = CGRectMake(-20.0,00.0, 480.0, 320.0);
    [appDelegate navigationController].view.center  = CGPointMake (240.0, 160.0);
}
if(result.height == 568)
{
    CGAffineTransform landscapeTransform = CGAffineTransformMakeRotation(M_PI/2);
    landscapeTransform = CGAffineTransformTranslate (landscapeTransform, +124.0, +124.0);
    [[appDelegate navigationController].view setTransform:landscapeTransform];
    [appDelegate navigationController].view.bounds  = CGRectMake(0.0,0.0, 568, 320.0);
    [appDelegate navigationController].view.center  = CGPointMake (284, 160.0);
}

    }

  -(NSUInteger)supportedInterfaceOrientations
 {
     return UIInterfaceOrientationLandscapeLeft;
 }
  -(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
 {
   AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
  CGSize result = [[UIScreen mainScreen] bounds].size;

  if(result.height == 480)
  {
    [appDelegate navigationController].view.bounds  = CGRectMake(0.0,0.0, 480.0, 320.0);
 }
if(result.height == 568)
{
    [appDelegate navigationController].view.bounds  = CGRectMake(0.0,0.0, 568, 320.0);
}

//    [appDelegate navigationController].view.bounds  = CGRectMake(0.0,0.0, 480.0, 320.0);
 }
     - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
     if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    {
       return YES;
    }
   else
   {
      return NO;
   }
   }
  - (void) viewWillDisappear:(BOOL)animated {

   AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
  [[appDelegate navigationController].view setTransform:_originalTransform];
  [[appDelegate navigationController].view setBounds:_originalBounds];
  [[appDelegate navigationController].view setCenter:_originalCenter];

  if (isLand == NO) {
     isLand = YES;

    [UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationLandscapeRight;
} else {
    isLand = NO;
     [UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationPortrait;
 }

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:57:49.237

您需要允许更多（所有您想要的纵向和横向）模式，正如我[在此处描述的那样。](https://stackoverflow.com/questions/12503658/top-home-button-portrait-orientation-in-ios6-simulator-not-working/12518577#12518577)

原因：如果你的应用只支持竖屏，没有 ViewController 可以支持横屏。如果您的应用程序同时支持横向和纵向，则所有 ViewController 都可以定义进一步的限制。

在所有 ViewController 的源代码中，您可以根据具体情况决定是否希望单个 ViewController 派生允许纵向或横向。您还可以考虑为所有肖像等创建一个通用的超类。

# android - Android 捕捉视频并播放

> ID：14121126
> 
> 赞同：1
> 
> 时间：2013-01-02T11:20:06.190
> 
> 标签：android, android-videoview

我希望我的应用程序录制视频并在 android 的 VideView 上播放。我正在为此做这件事。

```
Intent takeVideoIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
context.startActivityForResult(takeVideoIntent, ACTION_TAKE_VIDEO); 
```

// context 是一个Activity的上下文

并将 onActivityResult() 重写为

```
Uri mVideoUri = data.getData();
videoView.setVideoUri(mVideoUri);
videoView.setMediaController(new MediaController(this));
videoView.requestFocus(); 
```

但它没有播放录制的视频，我也尝试过使用

```
videoView.setVideoPath(mVideoUri.getPath()); 
```

而不是 Uri，但没有发生任何事情，除了一个变化，它显示该视频无法播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:53:26.477

我解决了这个问题，我只是犯了一个愚蠢的错误，我没有调用 videoView.start() 方法。

# javascript - 如何访问另一个jquery函数的全局变量

> ID：14121129
> 
> 赞同：1
> 
> 时间：2013-01-02T11:20:14.360
> 
> 标签：javascript, jquery, ant, global-variables, overriding

我有两个 jquery 函数（父函数和覆盖函数）

**父函数：**

```
( function ( $ )
{
    var one = null;
    var two = {};

    $.fn.method = function(){
    // parent code;
    }
   })( jQuery ); 
```

**超车功能：**

```
( function ( $ )
{

$.fn.method = function(){
    // override code;
  }
  })( jQuery ); 
```

这是按预期工作的。但是当我尝试访问变量一或二时，我不能。你知道为什么吗？是否有任何选项可以在不修改父项的情况下从覆盖函数访问变量一和二？

注意：在我的例子中，parent 和 override 是两个单独的 js 文件合并到一个公共 js，同时通过 ant 构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:20:56.497

不，你不能。你这里有一个闭包，关于闭包的一点是你不能从其他地方访问它们的变量。

如果要访问它们，则必须添加访问器：

```
( function ( $ )
    {
        var one = null;
        var two = {};

        $.fn.method = function(){
        // parent code;
        }
        $.fn.getOne = function() {
            return one;
        };
        $.fn.setOne = function(n) {
            return one = n;
        };
})( jQuery ); 
```

您可能[对此相关问题](https://stackoverflow.com/questions/11192875/is-it-possible-to-gain-access-to-the-closure-of-a-function)感兴趣。

# jquery - 如何使用 Modelform 和 jquery 在 django 中获取相互依赖的下拉菜单？

> ID：14121132
> 
> 赞同：16
> 
> 时间：2013-01-02T11:20:21.560
> 
> 标签：jquery, django, drop-down-menu, modelform

我是 django 和 jquery 的新手。我正在开发一个基于 django 的应用程序，其中一个表单中有 3 个下拉菜单。1\. 校园 2\. 学校 3\. 中心

层次结构是校园有学校，学校有中心。我想链接这些下拉菜单。

例如，我有 3 个校区，例如 Campus1、Campus2、Campus3。如果我选择 Campus1，我应该只选择 Campus1 中的学校并继续此操作，如果我选择 School1，那么我需要能够选择 School1 的中心，并且所有其他选项都应该被隐藏。

我在网上搜索并尝试了这个[http://blog.devinterface.com/2011/02/how-to-implement-two-dropdowns-dependent-on-each-other-using-django-and-jquery/](http://www.javascriptkit.com/script/script2/triplecombo.shtml) 但它似乎对我不起作用。我也检查了这个[http://www.javascriptkit.com/script/script2/triplecombo.shtml](http://www.javascriptkit.com/script/script2/triplecombo.shtml) 但由于我使用 ModelForm 创建表单，这不符合我的需要。

请指导我这样做。

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-02T12:28:06.843

您可能需要使用以下技术：

*   自定义 Django 表单字段（在模型表单中）
*   ajax（获取记录）
*   simplejson（向 ajax 发送 json 响应）
*   jquery（更新客户端的组合框）

让我们看一个例子（没有真正测试过，只是从我的脑海中）：

### 模型.py

```
from django.db import models

class Campus(models.Model):
    name = models.CharField(max_length=100, choices=choices.CAMPUSES)

    def __unicode__(self):
        return u'%s' % self.name

class School(models.Model):
    name = models.CharField(max_length=100)
    campus = models.ForeignKey(Campus)

    def __unicode__(self):
        return u'%s' % self.name

class Centre(models.Model):
    name = models.CharField(max_length=100)
    school = models.ForeignKey(School)

    def __unicode__(self):
        return u'%s' % self.name 
```

### 表格.py

```
import models
from django import forms

class CenterForm(forms.ModelForm):
    campus = forms.ModelChoiceField(queryset=models.Campus.objects.all())
    school = forms.ModelChoiceField(queryset=models.School.objects.none()) # Need to populate this using jquery
    centre = forms.ModelChoiceField(queryset=models.Centre.objects.none()) # Need to populate this using jquery

    class Meta:
        model = models.Center

        fields = ('campus', 'school', 'centre') 
```

现在，在您的视图中编写一个方法，该方法为校园下的学校和学校下的中心返回一个 json 对象：

### 视图.py

```
import models
import simplejson
from django.http import HttpResponse

def get_schools(request, campus_id):
    campus = models.Campus.objects.get(pk=campus_id)
    schools = models.School.objects.filter(campus=campus)
    school_dict = {}
    for school in schools:
        school_dict[school.id] = school.name
    return HttpResponse(simplejson.dumps(school_dict), mimetype="application/json")

def get_centres(request, school_id):
    school = models.School.objects.get(pk=school_id)
    centres = models.Centre.objects.filter(school=school)
    centre_dict = {}
    for centre in centres:
        centre_dict[centre.id] = centre.name
    return HttpResponse(simplejson.dumps(centre_dict), mimetype="application/json") 
```

现在编写一个 ajax/jquery 方法来获取数据并填充`select`HTML 中的元素。

### AJAX/jQuery

```
$(document).ready(function(){
    $('select[name=campus]').change(function(){
        campus_id = $(this).val();
        request_url = '/get_schools/' + campus_id + '/';
        $.ajax({
            url: request_url,
            success: function(data){
                $.each(data, function(index, text){
                    $('select[name=school]').append(
                         $('<option></option>').val(index).html(text)
                     );
                });
            }
        });
        return false;
    })
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-21T14:54:16.100

我不会重新发明轮子，而是使用[Django Smart Selects](https://github.com/digi604/django-smart-selects) 或[Django Autocomplete Light](http://django-autocomplete-light.readthedocs.org/en/latest/)

我还没有尝试过，但我将在即将到来的项目中使用它们中的一个或两个。

# spring - Spring 可配置的 bean 注入

> ID：14121137
> 
> 赞同：1
> 
> 时间：2013-01-02T11:20:59.060
> 
> 标签：spring, dependency-injection

除了工厂模式之外，有没有办法注入 bean 依赖项使其可配置？我有 3 个类实现相同的接口并有 3 个 bean 定义。我想改变在其他班级使用的豆子？例如，是否可以从 conf 文件中读取 bean 名称并将其用作变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:33:20.773

是的，您可以使用`@Qualifier`注释。由于您有 3 个实现相同接口的类，因此用不同的名称命名这些类并使用`@Qualifier`注释。

[Spring文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-autowired-annotation-qualifiers)说：`autowiring by type may lead to multiple candidates, it is often necessary to have more control over the selection process. One way to accomplish this is with Spring's @Qualifier annotation.`

# javascript - javascript正则表达式匹配单词不跟随模式，中间有文本

> ID：14121139
> 
> 赞同：0
> 
> 时间：2013-01-02T11:21:16.757
> 
> 标签：javascript, regex

文本：

```
id="word1 word2 word3/343/els/425/word4 word5 word6"
wordA wordB Bword2B word1 word2 word3
blah blah blah 
```

我正在尝试匹配整个单词：文本中的**word1、word2、word3**但我不希望它们在`id="word1 word2 word3/343/els/425/word4 word5 word6"`文本行中匹配，这些单词不是拉丁语。

**目前的做法：**

```
var sWord = "word2";
text = text.replace( new RegExp(sWord+"(?!\/[0-9])", "gi"), "<span style='background-color: yellow'>"+sWord+"</span>"); 
```

这种方法仅适用于 word3，不适用于 word1 或 word2，那么我如何在正则表达式中引入在 NUMBER 之前还有另一个词的可能性？

```
"(?!.\/[0-9])" 
```

我添加了点“。” 到正则表达式。但它似乎不起作用。

另外，我如何添加全词匹配的可能性？**\b**和**\S**似乎不起作用，因为单词不是拉丁语。

先感谢您！

**编辑：** jsfiddle [http://jsfiddle.net/GLt4F/5/](http://jsfiddle.net/GLt4F/5/)

如您所见，word1 和 word2 的按钮中断，但 word3 的按钮中断，因为匹配正确

**编辑2：**

重新表述问题：仅在 BBB 之后不匹配 AAA 并且它们之间可以是任何东西。例如：

AAA frefe BBB 不应匹配
AAA BBB 不应匹配
AAA frefe cc 应匹配

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:31:08.837

```
/AAA([\s\S](?!=BBB))*$/ 
```

应该这样做。

> 另外，我如何添加全词匹配的可能性？\b 和 \S 似乎不起作用，因为单词不是拉丁语。

JavaScript 没有 unicode 兼容模式，所以你必须为一个单词 char 编写自己的字符集并使用负匹配，所以

```
(?:^|[^A-Za-z0-9_$]) 
```

在 AAA 之前，并且在 JS 中没有后退，因此之前的非单词 char 将成为捕获的组 0 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:38:14.777

```
(?!(.*)\/[0-9]) 
```

这似乎可以解决问题（因为介于两者之间时不匹配。不知道是否存在漏洞或者它是否是一个可靠的答案。

# asp-classic - 经典 ASP VBScript - 刷新给定页面

> ID：14121144
> 
> 赞同：0
> 
> 时间：2013-01-02T11:21:30.610
> 
> 标签：asp-classic

我认为这很容易，但我无法让它发挥作用。

我有一个带有“删除”按钮的表单。它调用 www.mypage.com/adm/ads.asp?del=12。所以 list.asp 看到有一个 del=12 的查询字符串，并删除了相应的项目。删除后，我想刷新此页面（类似于 Response.Redirect www.mypage.com/adm/ads.asp），以便查询字符串 del=12 消失。我无法让它工作。

```
If (Request.QueryString("del").Count > 0) Then      
id = Request.QueryString("del") 
sql = "delete from Ads where ID = " & id & ""
on error resume next
conn.Execute sql   
If err<>0 then
    Response.Write("Delete error!")
Else            
    Response.Redirect http://www.mypage.com/adm/ads.asp     
    //Call opener.location.reload()
End if 
```

页面已重新加载，但 del 不会从查询字符串中消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:25:11.930

参数 to`Response.Redirect`应该是一个字符串 - 你有一个语法错误：

```
Response.Redirect http://www.mypage.com/adm/ads.asp 
```

应该：

```
Response.Redirect "http://www.mypage.com/adm/ads.asp" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:27:03.783

为了使其通用且不与原始 URL 混淆，您可以使用这样的代码：

```
Response.Redirect(Request.ServerVariables("SCRIPT_NAME")) 
```

SCRIPT_NAME 服务器变量将返回当前执行脚本的相对路径，无论页面被调用什么以及它位于何处。

# iphone - Core Motion 错误 102 是什么意思？

> ID：14121145
> 
> 赞同：5
> 
> 时间：2013-01-02T11:21:31.010
> 
> 标签：iphone, ios, core-motion

我使用 Core Motion 的传感器融合来获取北向运动更新：

```
[motionManager startDeviceMotionUpdatesUsingReferenceFrame:CMAttitudeReferenceFrameXTrueNorthZVertical toQueue:motionQueue withHandler:motionHandler] 
```

在极少数情况下，只能在选定的客户设备上重现（运行 iOS 6.0.2 的 iPhone 4S）我在 motionHandler 中收到此错误：

```
Error Domain=CMErrorDomain Code=102 "The operation couldn’t be completed. (CMErrorDomain error 102.) 
```

另外，在那之后我似乎没有得到任何有效的 deviceMotion 更新。有人知道这个错误102是什么意思吗？我在文档中找不到任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T21:06:40.320

正如 Krishnabhadra 正确指出的那样，此错误代码意味着`CMErrorTrueNorthNotAvailable`. 描述（“此设备上不提供真北。这通常表明该设备的位置尚不可用。”）不幸的是，没有给出任何提示如何解决该问题，所以我想在此描述我的发现发生错误。

它发生在一小部分（成千上万的少数）iOS 6.0+ 设备上使用`CMAttitudeReferenceFrameXTrueNorthZVertical`（没问题`CMAttitudeReferenceFrameXMagneticNorthZVertical`）。尽管有错误描述，Core Location 工作正常。在受影响的设备上，该错误会在 100% 的情况下触发并完全阻止 Core Motion 更新。`-[CMMotionManager deviceMotion]`总是返回`nil`。

重置 iOS 系统设置可解决问题。

我已经记录了[rdar://12952327](http://openradar.appspot.com/12952327)并提供了更多详细信息。

**更新：** 如果在隐私/位置服务/系统服务部分禁用指南针校准，则会发生此错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T11:27:59.720

从[文档](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html#//apple_ref/c/data/CMErrorDomain)

```
typedef enum {
   CMErrorNULL = 100,
   CMErrorDeviceRequiresMovement,
   CMErrorTrueNorthNotAvailable
} CMError; 
```

似乎错误 102 是`CMErrorTrueNorthNotAvailable`，它的描述是

> **CMErrorTrueNorthNotAvailable**

关于导致此错误的原因，似乎没有太多可用信息。这可能是设备的任何硬件问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-10T17:03:40.737

另外，请确保已启用此功能。启用此选项后，我在使用 xTrueNorthZVertical 时不再遇到 102 问题。

> 设置 > 隐私 > 定位服务 > 系统服务 > 指南针校准

[![iOS 11 系统服务](../Images/4299cb761a45cec622f52a40dca082d3.png)](https://i.stack.imgur.com/ZL4Cr.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:27:46.780

102 是 CMErrorTrueNorthNotAvailable。我猜您的设备在确定北方向或其他方面存在问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-23T07:01:49.530

我收到此错误，当我试图找到解决方案时，显然我设备中的定位服务已关闭，一旦我打开，它就可以工作。

# ruby - 如何优化这个迭代（红宝石）？

> ID：14121148
> 
> 赞同：0
> 
> 时间：2013-01-02T11:21:39.320
> 
> 标签：ruby, json, string, parsing, iteration

我必须遍历一些 json 字符串，这就是它的样子：

```
parsed.each do |a|
 a.each do |b|
   if(b.class == Array)
    b.each do |c|
     c["attributes"].each do |d|
      p d
     end
    end
   end
 end
end 
```

有人可以帮我把它放在一两行吗？提前致谢！

基督教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:48:34.090

根据 Jörg W Mittag 的建议进行编辑。

```
p(*parsed.grep(Array).flat_map{|c| c["attributes"]}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:37:04.887

```
parsed.flatten.each do |c|
  c["attributes"].each { |d| p d }
end 
```

[Array#flatten](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-flatten)和[Array#flatten！](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-flatten-21)用于就地展平

# java - JPA 连接查询不起作用

> ID：14121149
> 
> 赞同：1
> 
> 时间：2013-01-02T11:21:46.463
> 
> 标签：java, mysql, jpa

我正在尝试将 JOIN 与 JPA 一起使用。这是我的 JPA 查询：

```
SELECT o FROM Assessment AS o 
INNER JOIN AssessmentText at 
WHERE o = at.assessment 
AND at.localeCode = :localeCode 
```

从`Assessment`to的关系`AssessmentText`是`OneToMany`。

当我执行此查询时，我得到：

```
org.apache.openjpa.persistence.ArgumentException: 
    Encountered "INNER JOIN AssessmentText at" at character 31, 
    but expected: [".", "FETCH", "INNER", "JOIN", "LEFT", <IDENTIFIER>]. 
```

我正在使用 JPA 实现：带有 MySQL 数据库的 OpenJPA 2.2.1。

为什么我会收到此错误以及如何解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:26:09.107

假设您想急切获取 AssessmentText，您可以这样做（假设 Assessment 有一个名为 AssessmentText 的成员）：

```
SELECT o FROM Assessment AS o LEFT JOIN FETCH o.assessmentText WHERE o.assessmentText.localeCode = :localeCode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:31:08.137

您的查询中缺少`ON`它应该类似于

`SELECT o FROM Assessment AS o INNER JOIN AssessmentText at ON o = at.assessment WHERE at.localeCode = :localeCode`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:14:04.510

您没有提到从 Assessment 到 AssessmentText 的关系是 - 它需要在连接声明中使用。

您确实拥有的查询显示了从 AssessmentText 到 Assessment 的关系，如果您稍微重构查询，则可以使用该关系：

```
SELECT at.assessment FROM AssessmentText at WHERE at.localeCode = :localeCode 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T09:19:15.030

请记住，您应该通过以下方式创建查询：

```
Query query = entityManager.createQuery(queryString); 
```

不是`em.createNativeQuery`（如果你这样做的话）。

# tomcat - tomcat 应用程序之间的反射

> ID：14121150
> 
> 赞同：0
> 
> 时间：2013-01-02T11:21:50.807
> 
> 标签：tomcat, reflection

我在 Tomcat 服务器中部署了两个不同的应用程序。一个应用程序的目的是调用另一个使用规则引擎处理数据的应用程序。基本上，它通过反射调用另一个应用程序的静态方法。

这在 Jboss 中运行良好。但现在由于某种原因，我需要在 Tomcat 上部署相同的应用程序。在这里它失败了。似乎一个应用程序类无法找到另一个应用程序类。Tomcat不支持反射吗？或者不同应用程序之间无法进行反射？

谢谢，尼朋

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:24:08.350

我认为您依赖于每个应用服务器的类加载结构。类加载器结构/层次结构是可配置的，但通常这 2 个应用程序将占用不同的类加载器，并且跨类加载器使用反射很可能会出现问题。

为什么要使用反射在这些应用程序之间进行通信？这听起来不切实际，甚至不合适。您有 2 个 Web 应用程序，那么为什么不使用它们的 HTTP API 进行通信呢？如果您可以/不想这样做，我会研究其他解决方案，例如 RMI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:24:34.170

我怀疑这个问题的原因是反射，而是[类加载器层次结构](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)。

一个 webapp 不应该**调用**另一个的方法，这是一个主要的设计缺陷。

# macos - 使用 NSArrayController 过滤单列 NSTableView

> ID：14121152
> 
> 赞同：3
> 
> 时间：2013-01-02T11:21:57.657
> 
> 标签：macos, cocoa, nstableview, cocoa-bindings, nsarraycontroller

我展示了一张带有`NSTableView`（一列）、一个`NSSearchField`和一个`NSButton`（'添加'）的工作表。我想要的是将表格视图的内容设置为字符串列表。这个字符串列表在一个`NSArray`被调用的*列表中*。此内容应根据搜索字段的内容（如果*列表*中的字符串）不包含搜索字段的内容进行过滤，它不再显示在表格视图中。

我对绑定不熟悉，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T11:57:46.870

我已经上传了一个[项目](http://www.keepandshare.com/doc/5393575/array-controller-search-59k?da=y)，请检查。

一个粗略的想法是：（但是通过查看项目更容易理解）

1.  创建一个阵列控制器。

2.  为阵列控制器对象设置

    ```
     Mode:Class

      Class Name: Your custom Class 
    ```

3.  收到的操作

    ```
     add: to the button that will add new objects, typically labelled with +

      remove:to the button that will add new objects., typically labelled with - 
    ```

4.  引用绑定（来自表格或表格的每一列的此处）。

5.  对于搜索字段

    ```
     Bindings, Predicate to Array Controller

     ControllerKey : filterPredicate

     Predicate Format : <class property> contains $value

     (if to search in multiple table columns  then <class property 1> contains $value || <class property 2> contains $value etc…. ) 
    ```

# python - 正则表达式模式 ValueError

> ID：14121153
> 
> 赞同：0
> 
> 时间：2013-01-02T11:21:58.587
> 
> 标签：python, regex

在下面的代码中，我试图匹配数字，可以是 16 位或 15 位数字，并且可能有空格或`-`在每 4 位数字之间。

我收到一个错误

```
ValueError: Cannot process flags argument with a compiled pattern 
```

我究竟做错了什么？

```
import re

p_number = re.compile(r'(\d{15}|\d{16}|\d{4}[\s-]\d{4}[\s-]\d{4}[\s-]\d{4})')
c=["1234567891234567","123456789123456","1234 5678 9123 4567","1234-5678-9123-4567","1234567891111111tytyyyy"]

for a in c:
  #re.search(c,p_number,flag=0)
  matchObj = re.search( p_number , a, re.M|re.I)
  if matchObj:
     print "match found"
  else:
     print "No match!!" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T11:24:39.463

您需要将标志传递给`.compile()`调用：

```
p_number = re.compile(r'(\d{15}|\d{16}|\d{4}[\s-]\d{4}[\s-]\d{4}[\s-]\d{4})', re.M|re.I) 
```

你可以调用`.search()`编译后的模式：

```
matchObj = p_number.search(a) 
```

您的完整脚本将变为：

```
import re

p_number = re.compile(r'(\d{15}|\d{16}|\d{4}[\s-]\d{4}[\s-]\d{4}[\s-]\d{4})', re.M|re.I)
c=["1234567891234567","123456789123456","1234 5678 9123 4567","1234-5678-9123-4567","1234567891111111tytyyyy"]

for a in c:
    matchObj = p_number.search(a)
    if matchObj:
        print "match found"
    else:
        print "No match!!" 
```

并打印`match found`5 次。

# jquery-mobile - jquery mobile自定义css仅在重新加载时

> ID：14121156
> 
> 赞同：0
> 
> 时间：2013-01-02T11:22:28.263
> 
> 标签：jquery-mobile

我有一些带有自定义 css 的 jquery 移动页面，但它仅在我重新加载页面而不是第一次加载时才会生效。在所有站点中调用 css 文件：

`<link rel="stylesheet" href="http://mobile.kerger-mg.de/rezepte-suche/stylesheet/style.css" />`

提前感谢您的任何建议和您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:50:48.933

你必须在第一次加载所有css，也就是说所有页面必须有相同的包含，不要忘记jqm是基于ajax导航的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:27:59.617

尝试以这种方式链接相关页面：

```
<a href="PAGE_WITH_PROBLEM_CSS.html" rel="external"> 
```

这样，登陆页面（PAGE_WITH_PROBLEM_CSS.html）被重新加载。

:)

# grails - Grails 自定义验证器，获取对字段名称的引用

> ID：14121161
> 
> 赞同：2
> 
> 时间：2013-01-02T11:22:49.457
> 
> 标签：grails, global, shared, customvalidator

我正在尝试为属性编写一个通用的自定义验证器，为了使其通用，我需要在闭包中引用字段名称，代码如下在 config.groovy

```
grails.gorm.default.constraints = {
nameShared(validator: {val, obj, errors->
        Pattern p = Pattern.compile("[a-zA-Z0-9-]{1,15}")
        Matcher m = p.matcher(val)
        boolean b = m.matches()
        if(!b)
        errors.rejectValue('name', "${obj.class}.name.invalid", "Name is invalid")

    }) 
```

在我的域类中

```
class Student{
  String name

  static constraints = {
       name(shared:'nameShared')
   }
}

class Teacher{
  String firstName
  String lastName

  static constraints = {
     firstName(shared:'nameShared')
  }
} 
```

我想对姓名和名字使用相同的验证器，但是由于我在验证器中对字段名进行硬编码，所以它始终适用于姓名而不是名字，所以我想知道是否有任何方法可以参考字段名并使验证器通用，请帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T11:35:15.790

您可以使用该变量`propertyName`来获取已验证属性的名称。

来自 grails[文档](http://grails.org/doc/latest/ref/Constraints/validator.html)：

*闭包还可以访问约束应用于使用的字段的名称`propertyName`*

```
myField validator: { val, obj -> return propertyName == "myField" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:38:53.573

您可以将验证器闭包包装在另一个函数中，如下所示：

```
def getValidator(myValue) {
  return { val, obj, errors ->
    // make use of myValue
  }
}

myField validator: getValidator('foo') 
```

# objective-c - 开发 Radio ios App

> ID：14121162
> 
> 赞同：0
> 
> 时间：2013-01-02T11:22:55.940
> 
> 标签：objective-c, cocoa-touch

当我在真实设备上测试我的收音机 iOS 应用程序时遇到问题，它运行良好，但是当屏幕或设备关闭时，收音机停止并关闭，为什么会发生这种情况？以及如何使活动指示器视图停止移动并在收音机打开并完成加载时隐藏它？？？

```
(void)viewDidLoad
{
    [super viewDidLoad];
    timer=[NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(uodatetimer) userInfo:nil repeats:YES];
    player = [[MPMoviePlayerController alloc] initWithContentURL:   
                                       [NSURL URLWithString:@"http://46.43.64.50:8008/AJYAL.m3u"]];
    player.movieSourceType = MPMovieSourceTypeStreaming;
    player.view.hidden = YES;
    [self.view addSubview:player.view];
    [player prepareToPlay];
    [player play];
   // player.useApplicationAudioSession=NO;
    spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];

    spinner.frame = CGRectMake(0.0, 0.0, 20.0, 20.0);

    spinner.center=self.view.center;

    [spinner startAnimating];

    [self.view addSubview:spinner];

    MPVolumeView *volumeView = [[[MPVolumeView alloc] initWithFrame:
                                 CGRectMake(0, 0, 105, 15)] autorelease];
    volumeView.center = CGPointMake(152,372);
    [volumeView setShowsVolumeSlider:YES];
    [volumeView setShowsRouteButton:YES];
    [volumeView sizeToFit];
    [self.view addSubview:volumeView];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:38:52.210

您需要做 2 件事才能在后台启用音频播放：

*   使用“App 播放音频”值将“必需的背景模式”键添加到 Info.plist 文件中。
*   将音频会话类别设置为 AVAudioSessionCategoryPlayback 并激活音频会话：

    `AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];
    [audioSession setActive:YES error:nil];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:26:41.773

为了能够让它在后台播放，您需要在项目 .plist 文件中启用`UIBackgroundModes`人类可读格式的必需背景模式，并在数组中启用第一个字符串行写入音频。这将使您的应用程序在屏幕关闭后在后台运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:39:34.470

在`yourProject-pList`添加这一行

![UIBackgroundModes](../Images/c6456ddceec2ab77cefd6d889cf78658.png)

# c++ - gdk pixbuf 从内存中加载图像

> ID：14121166
> 
> 赞同：2
> 
> 时间：2013-01-02T11:22:59.800
> 
> 标签：c++, image-processing, gtk, jpeg, gdkpixbuf

使用 GTK+ 3.6 我想显示来自内存缓冲区的图像，而不是磁盘上的文件。我有一个`const char *data`图像数据，我正在尝试从中创建一个 GTK 图像。到目前为止，我已经尝试了两种我认为可行的方法。两者都使用 GdkPixbuf，因此要求图像数据为`guchar* (unsigned char*)`.

有了这个要求，我必须转换数据：

```
guchar *gudata = reinterpret_cast<guchar*>(const_cast<char*>(data)); 
```

然后我尝试了以下方法：

1.  `gdk_pixbuf_loader_write`使用.将数据写入 GdkPixbufLoader 在这里我收到一个错误`"Unrecognized image file format"`，或者如果我创建具有特定类型 (jpg) 的加载程序，我收到一个错误，指出它不是 JPG 文件格式（它是，如下所述）。

    编辑：一些代码：

    ```
    guchar *gudata = reinterpret_cast<guchar*>(const_cast<char*>(data));
    int stride = ((1056 * 32 + 31) & ~31)/8;
    GdkPixbufLoader *loader = gdk_pixbuf_loader_new();
    GError *error = NULL;

    if(!gdk_pixbuf_loader_write(loader, gudata, data_size, &error)
    { 
        printf("Error:\n%s\n", error->message); 
    } 
    ```

    编辑 03/01/2013：从写入函数中删除了步幅参数 - 打印错误。

    开罗表面也不能正常工作。显示黑屏和噪音。

2.  初始化 pixbuf，`gdk_pixbuf_new_from_data`然后图像看起来像电视噪声，这表明数据错误（并且它已被投射），或者其他参数错误（图像行步幅，但不是 :)）。

`foo.jpg`出现错误后，我只是尝试使用将数据写入文件`ofstream`，是的，我得到了一个正常工作的图像文件。终端中的`file`命令确认它是一个 JPEG 图像，并且通过一个简单的代码块，我从该 foo.jpg 创建了一个 GdkPixbuf 来检查它的行步幅值，它与我传递给上述函数的值相匹配。

图像数据是否会因演员阵容而损坏，如果是，我该如何解决？我在`const char*`. 我看过 QtPixmap 并且它也加载了`unsigned char*`.

我需要使用单独的库吗？（libjpeg？）我安装了 libgtk3-dev。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T13:44:00.483

**2012 年 3 月 1 日更新：**

这是一个简单的工作应用程序，它在它附近加载一个“test.jpg”文件（文件大小必须小于 100000 字节）。

```
#include <glib.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <gtk/gtk.h>

void on_destroy (GtkWidget *widget G_GNUC_UNUSED, gpointer user_data G_GNUC_UNUSED)
{
    gtk_main_quit ();
}

int main (int argc, char *argv[]) 
{
    FILE *f;
    guint8 buffer[100000];
    gsize length;
    GdkPixbufLoader *loader;
    GdkPixbuf *pixbuf;
    GtkWidget *window;
    GtkWidget *image;

    gtk_init (&argc, &argv);

    f = fopen ("test.jpg", "r");
    length = fread (buffer, 1, sizeof(buffer), f);
    fclose (f);

    loader = gdk_pixbuf_loader_new ();
    gdk_pixbuf_loader_write (loader, buffer, length, NULL);
    pixbuf = gdk_pixbuf_loader_get_pixbuf (loader);

    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
    image = gtk_image_new_from_pixbuf (pixbuf);
    gtk_container_add (GTK_CONTAINER (window), image);
    gtk_widget_show_all (GTK_WIDGET (window));
    g_signal_connect (window, "destroy", G_CALLBACK(on_destroy), NULL);
    gtk_main ();

    return 0;
} 
```

**原答案：**

`char *`或这里的`unsigned char *`重要性不大。

[`gdk_pixbuf_new_from_data`](http://developer.gnome.org/gdk-pixbuf/stable/gdk-pixbuf-Image-Data-in-Memory.html#gdk-pixbuf-new-from-data)只会读取带有 alpha 通道 (RGBA) 或不带 (RGB) 的未压缩 RGB 数据（支持的唯一色彩空间是 GDK_COLORSPACE_RGB）。难怪通过它JPEG失败。

调用`gdk_pixbuf_loader_write`看起来是一个更好的选择，但我们需要一些代码来查看您可能做错了什么。但是，通过在 shell 中运行命令来检查您是否安装了 jpg 的 pixbuf 加载程序`gdk-pixbuf-query-loaders`，并验证 JPEG 是否存在。

# php - 防止黑客攻击的基本措施

> ID：14121167
> 
> 赞同：-1
> 
> 时间：2013-01-02T11:23:02.877
> 
> 标签：php, mysql, security

防止黑客攻击 php-mysql 网站的基本措施是什么？在 php 端和 mySql 端。您也可以提供参考网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:25:07.483

首先，防止 sql 注入。[http://en.wikipedia.org/wiki/SQL_injection](http://en.wikipedia.org/wiki/SQL_injection) 基本上它是“不要相信你从用户那里得到的任何东西”。

另一个是跨站脚本；[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

# javascript - 使用 VS2012 JavaScript 调试 Chrome（类似 IE）

> ID：14121176
> 
> 赞同：6
> 
> 时间：2013-01-02T11:23:42.927
> 
> 标签：javascript, google-chrome, visual-studio-2012

使用 VS2012 和 IE9，我可以在 VS2012 中使用 VS2012 JavaScript 调试器（类似于 C#，..）。当我将浏览器切换到 Chrome 时，我失去了这样做的能力。我可以切换到 Chrome 内部调试器。

![Chrome 作为浏览器](../Images/b75c1bfadeed9ef0b5bffe571e54e905.png)

**但是，有没有办法让 Chrome 与 VS2012 一起调试（类似于 IE）？**

示例：使用 IE 命中断点，但没有使用 Chrome 作为浏览器。

![断点](../Images/5b071a4700932d698f34098c27d20635.png)

备注：没有重复的[Debugging Websites with Google Chrome](https://stackoverflow.com/questions/6189353/debugging-websites-with-google-chrome)是关于 .net 调试的。我没有使用任何 ASP.net，只有 JavaScript

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T22:54:37.767

不，在 VS 中调试 Chrome 中的 JS 是绝对不可能的，因为它是一个完全不同的内部引擎。可能有人会为 VS 编写插件，但现在不可能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-09T01:34:05.170

在 javascript 中放置一个“调试器”；命令并刷新页面。

适用于**CHROME** v30> 和 IE 10>

例子：

```
<script type='text/javascript'>
        function LoginEstabelecimento() {

            var form = $('form#formLoginEstabelecimento');

            debugger;

           ... SOME REST OF CODE ...

        };
</script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T17:15:38.207

您可以随时在 Chrome 中右键单击页面，选择“检查元素”并使用 chrome 的内置 javascript 调试器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-14T11:44:11.107

现在这是可能的。请参阅[此](http://lostindetails.com/blog/post/JavaScript-debugging-in-VisualStudio-with-Chrome)页面了解如何，但简而言之（使用 Windows 10 1607、Visual Studio 2015 和 Update 3）：

1.  关闭所有 Chrome 窗口（这很重要）
2.  从运行提示“chrome --remote-debugging-port=9222”（不带引号）
3.  在 Visual Studio 中，使用 Chrome 作为浏览器启动应用程序。这将在新选项卡中打开您的页面。
4.  在 Visual Studio 中，应用程序仍在运行，单击调试 -> 附加到进程... -> 选择正在运行您的页面的 Chrome 进程。
5.  这应该没有任何错误地附加到该过程，并且您在 Visual Studio 中的断点现在应该被命中。

此外，请参阅[此](https://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/6205061-provide-integrated-javascript-debugging-in-firefox?page=1&per_page=20)页面，确认此功能将添加到未来的 Visual Studio 版本中。

# android - 如何从 sdcard 获取文件名并保存在数据库 android 中并将其显示为 listview

> ID：14121177
> 
> 赞同：0
> 
> 时间：2013-01-02T11:23:45.150
> 
> 标签：android, database, sd-card

我正在将音频文件保存到 sd 卡中的特定文件夹中，现在我想获取这些文件的名称并将它们的名称和其他信息保存到数据库并将它们显示为列表视图...找不到任何解决方案，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:02:03.643

嗨使用下面的代码。

```
 List<String> list=new ArrayList<string>();
// String path="/mnt/sdcard/audiofilesfolder/"; 
        File folder = new File(path);

        listOfFiles = Arrays.asList(folder.listFiles());

            if(listOfFiles.size()>0)
            {

           for (int j = 0; j < listOfFiles.size(); j++) {

         System.out.println(" j " + listOfFiles.get(j).getAbsolutePath());
         list.add((listOfFiles.get(j).getAbsolutePath()));
     } 
```

然后使用列表并抓取从中添加的项目并将其显示在列表视图中。希望这会帮助你。

# c++ - 运算符 new 导致初始化列表中的崩溃

> ID：14121185
> 
> 赞同：0
> 
> 时间：2013-01-02T11:24:04.870
> 
> 标签：c++, sdl

我在 C++ 中有一个奇怪的问题：

当我想`uint8_t*`在我的类的初始化列表中新建 a 时，我的程序崩溃了`PixelIterator`。

这是调用堆栈：

```
#0 00000000 0x0040b030 in __cxa_throw() (??:??)
#1 00000000 0x004047e1 in operator new() (??:??)
#2 004018B5 PixelIterator(this=0x28fe2c, _oth=0x5d5154, iOffset=300, iPitch=300, iBpp=2 '\002') (C:\Users\David\Desktop\SDL++\SDLPP_Sprite.cpp:34)
#3 0041E0CC SDL::Sprite::At(this=0x5d1548, iX=150, iY=0) (C:/Users/David/Desktop/SDL++/SDLPP_Sprite.hpp:89)
#4 0041E5B0 MyApp::OnInit(this=0x5d1520, iArgc=1, ppcArgv=0x5d1498) (C:\Users\David\Desktop\SDL++\main.cpp:37)
#5 00402641 SDL::Application::Run(this=0x5d1520, pScreen=0x5d4df0, iArgc=1, ppcArgv=0x5d1498) (C:\Users\David\Desktop\SDL++\SDLPP_Application.cpp:24)
#6 004020A3 main(iArgc=1, ppcArgv=0x5d1498) (C:\Users\David\Desktop\SDL++\main.cpp:103) 
```

首先，`PixelIterator`该类继承自`BaseIterator`：

```
template< typename T >
class BaseIterator
{
public:
    typedef T ValueType;

    BaseIterator( void )
        :   ptr( NULL )
    {}

    BaseIterator( const BaseIterator< T >& _oth )
        :   ptr( _oth.ptr )
    {}

    BaseIterator( T * p )
        :   ptr( p )
    {}

    T& operator*( void )
    {
        assert( ptr != NULL );
        return *ptr;
    }

    T* operator->( void )
    {
        assert( ptr != NULL );
        return ptr;
    }

    bool operator==( const BaseIterator< T >& _oth )
    {
        return ptr == _oth.ptr;
    }

    bool operator!=( const BaseIterator< T >& _oth )
    {
        return ptr != _oth.ptr;
    }

    bool operator<( const BaseIterator< T >& _oth )
    {
        return ptr < _oth.ptr;
    }

    bool operator<=( const BaseIterator< T >& _oth )
    {
        return ptr <= _oth.ptr;
    }

    bool operator>( const BaseIterator< T >& _oth )
    {
        return ptr > _oth.ptr;
    }

    bool operator>=( const BaseIterator< T >& _oth )
    {
        return ptr >= _oth.ptr;
    }

    friend ostream& operator<<( ostream& _os, const BaseIterator< T >& _this )
    {
        _os << reinterpret_cast< void* >( _this.ptr );
        return _os;
    }

protected:
    T * ptr;
}; 
```

这是`PixelIterator`课程：

```
/**
 **  Designed to iterate through a virtual 2D array of pixels( uint8_t* )
 **/
class PixelIterator : public BaseIterator< uint8_t* >
{
public:
    PixelIterator( void );
    PixelIterator( const PixelIterator& _oth );
    PixelIterator( uint8_t ** _oth, uint32_t iOffset, uint16_t iPitch, uint8_t iBpp );
    ~PixelIterator( void );

    PixelIterator& operator=( const PixelIterator& _oth );

    PixelIterator& operator++( void ); // 1 pixel right
    PixelIterator& operator--( void ); // 1 pixel left
    PixelIterator& operator++( int unused ); // 1 pixel right
    PixelIterator& operator--( int unused ); // 1 pixel left

    PixelIterator& operator+=( uint32_t iSize ); // iSize pixel right
    PixelIterator& operator-=( uint32_t iSize ); // iSize pixel left

    PixelIterator& operator>>( uint32_t iSize ); // iSize pixel down
    PixelIterator& operator<<( uint32_t iSize ); // iSize pixel up

protected:
    uint16_t m_iPitch;
    uint8_t m_iBpp;
}; 
```

这是构造函数，错误发生的地方：

```
Sprite::PixelIterator::PixelIterator( uint8_t ** _oth, uint32_t iOffset, uint16_t iPitch, uint8_t iBpp )
    :   BaseIterator< uint8_t* >( new uint8_t*( *_oth + iOffset ) ),
        m_iPitch( iPitch ),
        m_iBpp( iBpp )
{} 
```

`_oth`在这种情况下是指向像素数据的指针（一维数组`void*`）； `iOffset`是数组中的偏移量

我使用 SDL 进行图形输出，使用 Code::Blocks 作为 IDE。测试图像的大小为 150x120 像素。

如果您需要有关代码的更多信息，请询问:)

**编辑：**

实例化：

```
m_Img.Lock();
for( int32_t y = 0; y < m_Img.GetSurface()->h; y++ )
{
    for( SDL::Sprite::Iterator x = m_Img.At( 0, y ); x != m_Img.At( m_Img.GetSurface()->w, y ); x++ )
        *reinterpret_cast< uint16_t* >( *x ) = 0;
}
m_Img.Unlock(); 
```

`SDL::Sprite::Iterator``SDL::Sprite::PixelIterator`与( )相同`typedef`。 `m_Img`是 的一个对象`SDL::Sprite`。

`SDL::Sprite::At()`方法：

```
inline
Iterator At( uint32_t iX, uint32_t iY )
{
    return Iterator( reinterpret_cast< uint8_t ** >( &m_pSurface->pixels ),
                     iY * m_pSurface->pitch + iX * m_pSurface->format->BytesPerPixel,
                     m_pSurface->pitch, m_pSurface->format->BytesPerPixel );
} 
```

`m_pSurface`是一个指针`SDL_Surface`

# sql - 文件移动后Joomla数据库错误

> ID：14121188
> 
> 赞同：0
> 
> 时间：2013-01-02T11:24:12.187
> 
> 标签：sql, database, joomla

我需要重新制作一个网站。我对网页设计比较陌生。我将所有现有的 Joomla 文件移动到备份文件夹（一个非常愚蠢的举动），并开始构建新页面。当然，后来我意识到我没有上一个站点的信息，所以我尝试将所有文​​件放回原处，但是现在，当然，该站点无法正常工作并给出“ `Database Error: Unable to connect to the database:Could not connect to MySQL`”错误。

我也无法访问数据库，因为之前的开发人员没有留下密码。显然我可以访问 ftp。

我可以做些什么来恢复网站吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:32:00.710

更改`configuration.php`站点根目录中的数据库信息。检查这些变量-

```
public $host = 'localhost';
public $user = 'root';//database user
public $password = '';//database password
public $db = 'database';//datebase name
public $dbprefix = 'jos_';//table prefix
public $log_path = 'E:\\xampp\\htdocs\\joomla\\logs';//log folder path
public $tmp_path = 'E:\\xampp\\htdocs\\joomla\\tmp';//tmp folder path 
```

# android - 获取未在 android 2.3.3 姜饼上执行的命令

> ID：14121192
> 
> 赞同：1
> 
> 时间：2013-01-02T11:24:28.467
> 
> 标签：android, cordova, get

我有一个将数据提交到其他域服务器的 javascript 代码。数据提交正常，但是当我使用 get 方法从我设备上的 phonegap 应用程序中检索数据时，它将无法正常工作。服务器的响应应该替换我的内容，这是通常的行为，如果我从浏览器窗口或我的 android 模拟器 4.2 执行我的 get 方法，它工作正常。但在我的手机 2.3.3 姜饼上，post 命令正确执行，但服务器响应没有通过 get 接收。

谢谢，有什么建议吗？

编辑：

如前所述，我正在使用 post 和 get 命令将数据提交到服务器并检索它。我是通过使用表单提交来做到的。现在出现了一个新事物：当我在 mozilla 和我的 android 模拟器 4.2 上使用表单提交时，它可以工作，但相同的代码在 android phone 2.3.6 上不起作用。我现在考虑使用 ajax 调用，代码开始在手机上运行，​​但现在它们不适用于 android 模拟器 4.2 和 mozilla。对于在手机上运行的相同代码，模拟器接收状态为 0。就 mozilla 而言，跨域不起作用，所以我了解发生了什么，但是模拟器呢？为什么 ajax 不能在模拟器上工作以及为什么表单提交工作？看起来模拟器和浏览器的行为方式相同。

再次，任何建议都会有帮助。我无法一直在实际设备上进行测试。

# drop-down-menu - Bootstrap 下拉菜单中的响应式导航栏

> ID：14121194
> 
> 赞同：1
> 
> 时间：2013-01-02T11:24:39.027
> 
> 标签：drop-down-menu, twitter-bootstrap, menu, navbar

我正在尝试使用引导程序开发导航栏。我想要的是，如果我的导航栏折叠，导航栏中的菜单项应该展开。

这是我的项目
[http://studi-wgt.de/development/Joomla/jupgrade/](http://studi-wgt.de/development/Joomla/jupgrade/)

这是我想要的：
[http](http://www.w3resource.com/twitter-bootstrap/navbar-tutorial.php) ://www.w3resource.com/twitter-bootstrap/navbar-tutorial.php （顶部导航栏）

# twitter - 分析影响水平

> ID：14121195
> 
> 赞同：1
> 
> 时间：2013-01-02T11:24:39.287
> 
> 标签：twitter, social-networking, ipython

我正在使用 Ipython 并通过库 Twython 我能够使用用户名获取推文。是否可以分析影响度量（例如我正在检索其推文的人的影响力）或推文的影响是什么

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:55:13.470

对您的问题的简短回答是，是的，您当然可以从 Twitter 数据中以某种方式衡量影响力。另一方面，您可能应该对如何将影响力理解为指标、这与您的数据有何关系以及如何衡量数据中的影响力进行大量思考。

您可能会考虑以下几点：

1.) 除了为单个用户提取推文外，您可能还想提取他们的个人资料信息（例如，关注者数量、推文总数等）。通过将此数据与推文中的元数据相结合，您将拥有更多的乐趣。

2.) 考虑逐个查看以下一些数据点：

*   转发推文的份额：假设您为个人拉入 1000 条推文；您可以确定转发这些推文的百分比（例如，这些推文中有多少百分比影响他人转发）。
*   每条转发推文的平均转发次数：当该人被转发时，是只有一两个人转发了他/她，还是有 hudnreds？
*   追随者人数：这个数据点本身就可以告诉你一些事情。一般来说，拥有更多追随者的人可能比拥有更少追随者的人更有影响力。

3.) 您还应该考虑主题相关性。如果某人在 Twitter 上被大量转发并且拥有大量追随者，是因为与他们的职业相关的推文，还是因为他们写了关于猫的文章？根据您的用例和业务逻辑，这类问题可能很关键。

这些只是一些起点。我会花一些时间查看 Twitter REST API 1.1 文档和 Twython 文档，以便您更好地了解哪些数据点可用，然后考虑这些数据点如何有助于您衡量影响力。

祝你好运。

**编辑** 如果我理解正确，vishal1985，在您的评论中，您询问如何使用 Twython 收集有关转发的信息。这可能意味着几件事之一，但我认为您要问的是如何获取我列出的一些数据点（例如，上面的“转发推文的分享”）。

在这里，我再次向您指出 Twython 和[Twitter API 文档](https://dev.twitter.com/docs/api/1.1)，如果您打算大量使用此类数据，您真的应该了解它们。但是为了给你指明正确的方向，这里是你如何确定作者的原始推文被其他人转发的百分比。

```
from twython import Twython
from __future__ import division  #assuming you're using Python 2.X

t = Twython(app_key='...',
        app_secret='...',
        oauth_token = '...',
        oauth_token_secret = '...')  #supply your credentials for each of these

tweets = t.getUserTimeline(screen_name='justinbieber', include_retweets=False) #see note below
retweeted_tweets = 0  

for tweet in tweets:
  if tweet['retweet_count']> 0: #...if at least one person has retweeted the tweet
    retweeted_tweets += 1

share_tweets_retweeted = retweeted_tweets/len(tweets) 
   #e.g., #number retweeted divided by total number of sampled tweets 
```

这些步骤的作用是提取多达 200 条出现在用户时间轴中的推文。**include_retweets=False**部分可能看起来令人困惑，但它是必要的。这样做是排除其他人撰写的您感兴趣的作者（在本例中为贾斯汀比伯）转推的推文，因为您想知道有多少人在您的作者撰写原创内容时转推。我们遍历用户的时间线，并确定他们的推文被至少一个人转发的数量。然后，我们将其除以采样推文的总数，这给了我们被转发的份额。

请注意，这没有考虑分页（例如，在时间轴的多个页面中导航——您一次只能从时间轴请求 200 条推文，总共最多 5000 条），这可能是您想要的来实施。希望这可以帮助。

# android - Android - 仅使用 GPS 提供程序无法获取位置坐标

> ID：14121197
> 
> 赞同：3
> 
> 时间：2013-01-02T11:24:49.510
> 
> 标签：android, locationmanager, android-location, locationlistener

我是安卓新手。因此，如果我的问题很简单，请道歉并帮助我。

我正在开发一个 android 应用程序，我在其中尝试**仅使用 GPS 服务**获取用户位置（因为我正在开发一个即使**没有互联网**也需要在 android 设备中运行的应用程序）。

我的代码如下：

**我的活动：**

```
public class MyView extends Activity implements OnClickListener, Runnable
    {
       LocationManager itsLocationManager;
       LocationListener itsLocationListener;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
      itsLocationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
      itsLocationListener = new MyLocationListener(this, itsLocationManager);

      getLocationAndSendMessage();
    }

    private void getLocationAndSendMessage() 
    {
      try 
      {
        itsLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, itsLocationListener);
      } 
      catch (Exception theException) 
      {
        theException.printStackTrace();
        ToastMsgUtil.showErrorMessage("Problem in retrieving your current location! Please try again.", this);  
       }
     } 
```

**MyLocationListener.java：**

```
public class MyLocationListener implements LocationListener
{
    Context itsContext;
    LocationManager itsLocationManager;

    public MyLocationListener(Context theContext, LocationManager theLocationManager) 
    {
        itsContext = theContext;
        itsLocationManager = theLocationManager;
    }

        @Override
    public void onLocationChanged(final Location theLocation) 
    {
                //My Location processing code
                itsLocationManager.removeUpdates(SafemateLocationListener.this);
         }
} 
```

**AndroidManifest.xml**：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

正如我上面所说，我只需要通过 GPS 获取位置（因为用户移动设备中没有互联网）。

*   在调试时，我发现当我使用**LocationManager.GPS_PROVIDER**时，我没有在**onLocationChanged方法中****收到任何位置更新**。
*****   但是，当我尝试使用**LocationManager.NETWORK_PROVIDER**时，我会收到位置更新。****

 ****谁能说出我在上面的代码中做错了什么？我错过了什么吗？

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:30:24.037

以稳定、有效和兼容的方式使用 GPS 获取正确的坐标是一团糟。我记得在 stackoverflow.com 的某处发帖，但目前找不到。所以我建议从[WLocate.java](http://sourceforge.net/p/libwlocate/code/ci/641b5fa038398364c7fe3fc996744ae094f0cc49/tree/master/android/LocDemo/src/com/vwp/libwlocate/WLocate.java)中取出 GPS 相关的代码，它可以使用所有已知的 Android 版本。或者使用[libwlocate](http://sourceforge.net/projects/libwlocate/)，它封装了您正在寻找的功能。****

# iphone - 不同应用的相同图标

> ID：14121202
> 
> 赞同：-1
> 
> 时间：2013-01-02T11:25:08.027
> 
> 标签：iphone, ios6, itunes

我用多种语言设计了 3 个应用程序，但所有 3 个应用程序的图标都是相同的。苹果会因为这个原因拒绝这些应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:33:16.623

AI 明白，您有 ​​3 个功能相同但语言不同的应用程序。在这种情况下，您应该将一个应用程序本地化为 3 种不同的语言，而不是创建 3 个不同的应用程序。看看这个[教程](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:38:13.310

**引用自 App Store 资源中心：**

> 2.20 开发者在 App Store 中“发送垃圾邮件”包含多个版本的类似应用程序将被从 iOS 开发者计划中删除

Apple 不希望您创建具有相同功能的多个应用程序。您必须本地化单个应用程序，而不是创建多个应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:38:49.940

我的应用程序的免费版本和付费版本使用相同的图标，所以这没有问题。

但正如 mike-dutka 所说，您应该只创建一个应用程序并将其本地化为多种语言

# java - 当运行队列延迟太大时如何调整 Linux 性能？

> ID：14121204
> 
> 赞同：1
> 
> 时间：2013-01-02T11:25:16.727
> 
> 标签：java, linux, jvm, performance

我观察到当系统负载上升时，运行队列延迟约为 10000 微秒。该应用程序启动 8 个 JVM 实例，每个实例启动大量线程，平台为 Linux。

我想知道是否有关于为这种多线程应用程序调整运行队列延迟的一般想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:42:24.737

10 毫秒的运行队列延迟并没有那么高。最简单的做法是减少您尝试运行的线程数量，或为系统提供更多硬件（或多于一个盒子） 理想情况下，您希望线程的繁忙程度低于您拥有的核心数量。如果您有很多想要高效运行的线程，Linux 只能做这么多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:42:49.457

运行队列延迟取决于可运行（准备运行）线程与可用 CPU 的比率。

当可运行线程多于可用 CPU 时，即当负载平均值高于 CPU 数量时，不可避免地一些线程将不得不等待直到 CPU 变得可用，即直到其他一些线程被阻塞或抢占。

因此，为了改善运行队列延迟，您要么需要增加可用 CPU 的数量，要么需要减少竞争 CPU 的线程数量。

如果应用程序是 CPU 密集型的，那么 CPU 的竞争将会更加激烈。您应该调查一下您的 JVM 是否没有花费太多时间进行垃圾收集。在 CPU 很少的机器上运行多个 JVM 时，您可以通过让多个 JVM 同时进行垃圾收集来轻松增加运行队列延迟的长尾。如果是这种情况，您可以尝试增加线程数并减少单独 JVM 的数量。

# java - Java：不解析 xml 的简单 XML。给出例外

> ID：14121206
> 
> 赞同：2
> 
> 时间：2013-01-02T11:25:37.263
> 
> 标签：java, xml-parsing, simple-framework

我在[这里](http://simple.sourceforge.net/)使用简单 XML 序列化（simple-xml-2.6.6.jar）将我的 XML 响应从 web 服务转换为 POJO 类。XML如下：

```
<Alerts>
        <Alert>
            <CCRDataObjectID>38</CCRDataObjectID>
            <DateTime>
                <Type>
                    <Text>Verified</Text>
                </Type>
                <ExactDateTime>2010-06-16T00:00:00Z</ExactDateTime>
            </DateTime>
            <Type>
                <Text>Allergy</Text>
            </Type>
            <Description>
                <Text>R-Tanna</Text>
            </Description>
            <Source>
                <Actor>
                    <ActorID>122</ActorID>
                </Actor>
            </Source>
            <Reaction>
                <Description>
                    <Text>rash</Text>
                </Description>
            </Reaction>
        </Alert>
        <Alert>
            <CCRDataObjectID>39</CCRDataObjectID>
            <DateTime>
                <Type>
                    <Text>Verified</Text>
                </Type>
                <ExactDateTime>2010-06-16T00:00:00Z</ExactDateTime>
            </DateTime>
            <Type>
                <Text>Allergy</Text>
            </Type>
            <Description>
                <Text>Zithromax</Text>
            </Description>
            <Source>
                <Actor>
                    <ActorID>122</ActorID>
                </Actor>
            </Source>
            <Reaction>
                <Description>
                    <Text>rash</Text>
                </Description>
            </Reaction>
        </Alert>
    </Alerts> 
```

POJO 如下：包含警报的第一个 POJO 列表是`Alerts`

```
@Root
public class Alerts {

    @ElementList
    private List<Alert> Alerts;

    public List<Alert> getAlerts() {
        return this.Alerts;
    }

    public void setAlerts(List<Alert> alerts) {
        this.Alerts = alerts;
    }

} 
```

实际的第二个 POJO`Alert`如下：

```
@Root(strict=false)
public class Alert {

    @Element
    private int CCRDataObjectID;

    @Element
    private DateTime DateTime;  

    @Element
    private Type Type;  

    @Element 
    private Description Description;

    @Path("Source/Actor")
    @Element        
    private int ActorID;

    @Element
    private Reaction Reaction;

    @Root
    private static class Type {

        @Element
        private String Text;        

    }

    @Root
    private static class Description {

        @Element
        private String Text;
    }

    @Root
    private static class DateTime {

        @Element
        private Type Type;

        @Element
        private String ExactDateTime;

    }

    @Root
    private static class Reaction {

        @Element
        private Description Description;
    }

    public int getCCRDataObjectID() {
        return CCRDataObjectID;
    }

    public void setCCRDataObjectID(int cCRDataObjectID) {
        CCRDataObjectID = cCRDataObjectID;
    }   

    public String getVerification(){
        return this.DateTime.Type.Text;
    }

    public String getDateTime() {
        return this.DateTime.ExactDateTime;
    }

    public String getAllergyType() {
        return this.Type.Text;
    }
    /**
     * 
     * @return Name/Description of an Allergy
     */
    public String getDescription() {
        return this.Description.Text;
    }

    public int getActorID() {
        return ActorID;
    }

    public void setActorID(int actorID) {
        ActorID = actorID;
    }

    public String getReactionDescription() {
        return this.Reaction.Description.Text;
    }

    public String getDisplayDate() {
        SimpleDateFormat sdf = new SimpleDateFormat("d MMM yyyy");
        return sdf.format(this.DateTime.ExactDateTime);     
    }
} 
```

在解析时，我得到如下错误：

```
Element 'Alert' does not have a match in class com.mypck.pojo.Alerts at line 2 
```

现在我无法更改 XML 响应，因为它正在其他地方使用。我可以用 POJO 做什么，以便我可以解析我的 XML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:01:46.000

好的。通过[教程](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php)后得到答案。我只需要告诉该列表在类警报中是内联的。

```
@Root
public class Alerts {

    @ElementList(inline=true)
    private List<Alert> Alerts;

    public List<Alert> getAlerts() {
        return this.Alerts;
    }

    public void setAlerts(List<Alert> alerts) {
        this.Alerts = alerts;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:27:56.853

这不应该：

```
@ElementList
private List<Allergy> Alerts; 
```

是

```
@ElementList
private List<Alert> Alerts; 
```

?

# android - AppWidget 将无法工作

> ID：14121208
> 
> 赞同：0
> 
> 时间：2013-01-02T11:25:39.013
> 
> 标签：android, xml, widget, views, clock

我正在使用配置活动来使用 RemoteViews 切换 xml 文件中不同视图的可见性。起初我想，由于在设置小部件之前调用了配置活动，我不需要更新，所以我使用了：

```
package com.example.test.clock.one;

 import android.app.Activity;
 import android.appwidget.AppWidgetManager;
 import android.content.Context;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.RemoteViews;

 public class chooseract extends Activity
 {
int mAppWidgetId;
RemoteViews rv;
AppWidgetManager appWidgetManager;
Context context;
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);      
}
public void buttonhandler(View view)
{
    rv = new RemoteViews(context.getPackageName(), R.layout.activity_main);
    Intent intent = getIntent();
    Bundle extras = intent.getExtras();
    if (extras != null) 
    {
        mAppWidgetId =  extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID,AppWidgetManager.INVALID_APPWIDGET_ID);
    }
    switch(view.getId())
    {
        case R.id.button1:
        {
            rv.setViewVisibility(R.id.analogClock1, View.VISIBLE);
            rv.setViewVisibility(R.id.analogClock2, View.INVISIBLE);

                finish();
                            break;
        }
        case R.id.button2:
        {               
            rv.setViewVisibility(R.id.analogClock1, View.INVISIBLE);
            rv.setViewVisibility(R.id.analogClock2, View.VISIBLE);
            finish();
                            break;

        }
    }

}   
} 
```

但这只是设置了一个空白小部件（默认可见性是不可见的）然后我尝试在使用切换可见性后更新 appwidget

```
package com.example.test.clock.one;

import android.app.Activity;
import android.appwidget.AppWidgetManager;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.RemoteViews;

public class chooseract extends Activity
{
int mAppWidgetId;
RemoteViews rv;
AppWidgetManager appWidgetManager;
Context context;
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);      
}
public void buttonhandler(View view)
{
    rv = new RemoteViews(context.getPackageName(), R.layout.activity_main);
    Intent intent = getIntent();
    Bundle extras = intent.getExtras();
    if (extras != null) 
    {
        mAppWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID,AppWidgetManager.INVALID_APPWIDGET_ID);
    }
    switch(view.getId())
    {
        case R.id.button1:
        {
            rv.setViewVisibility(R.id.analogClock1, View.VISIBLE);
            rv.setViewVisibility(R.id.analogClock2, View.INVISIBLE);
            break;

        }
        case R.id.button2:
        {               
            rv.setViewVisibility(R.id.analogClock1, View.INVISIBLE);
            rv.setViewVisibility(R.id.analogClock2, View.VISIBLE);
            break;

        }
    }

    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
    appWidgetManager.updateAppWidget(mAppWidgetId, rv);
    Intent resultValue = new Intent();
    resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, mAppWidgetId);
    setResult(RESULT_OK, resultValue);
    finish();
}   
} 
```

但这只是当我用 NullPointerException 触摸按钮时强制关闭有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:56:30.063

```
public class MainActivity extends Activity implements OnClickListener{

private int mAppWidgetId;
private RemoteViews rv;
private AppWidgetManager appWidgetManager;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);    

    rv = new RemoteViews(this.getPackageName(), R.layout.activity_main);
    Button button1 = (Button)findViewById(R.id.button1);
    Button button2 = (Button)findViewById(R.id.button2);

    AnalogClock cos1 = (AnalogClock)findViewById(R.id.analogClock1);
    AnalogClock cos2 = (AnalogClock)findViewById(R.id.analogClock2);

    button1.setOnClickListener(this);
    button2.setOnClickListener(this);
}

@Override
public void onClick(View view) {
    Intent intent = getIntent();
    Bundle extras = intent.getExtras();
    if (extras != null) 
    {
        mAppWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID,AppWidgetManager.INVALID_APPWIDGET_ID);
    }
    switch(view.getId())
    {
        case R.id.button1:
        {
            rv.setViewVisibility(R.id.analogClock1, View.VISIBLE);
            rv.setViewVisibility(R.id.analogClock2, View.INVISIBLE);
            break;

        }
        case R.id.button2:
        {               
            rv.setViewVisibility(R.id.analogClock1, View.INVISIBLE);
            rv.setViewVisibility(R.id.analogClock2, View.VISIBLE);
            break;

        }
    }

    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this);
    appWidgetManager.updateAppWidget(mAppWidgetId, rv);
    Intent resultValue = new Intent();
    resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, mAppWidgetId);
    setResult(RESULT_OK, resultValue);
    finish();
} 
```

}

我添加了一些修复程序并且没有抛出错误。:)

# c# - 放置与桌面重叠的图像

> ID：14121210
> 
> 赞同：3
> 
> 时间：2013-01-02T11:25:47.720
> 
> 标签：c#, winforms

> **可能的重复：**
> [绘制/绘制外部表格](https://stackoverflow.com/questions/3379306/draw-paint-outside-form)

基本上我正在做一个没有边框的 Windows 窗体应用程序。作为视觉效果，我想在窗口的上角放置一个图像，但不是将其截断，而是希望它与桌面重叠。

该图像将是一个 png，我希望它保持透明度。这可能吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:34:33.340

对我来说，听起来您需要将图像框属性设置为拉伸。确保表格在开始时也是最上面的。

# c - 使用 libxml2 解析 xml 文件

> ID：14121215
> 
> 赞同：0
> 
> 时间：2013-01-02T11:26:04.450
> 
> 标签：c, xml, parsing, libxml2

我一直在尝试使用**libxml2**解析 xml 文档，并且我正在使用**Dev c++**进行编译。我不知道如何使用`libxml2/parser.h`？我收到错误

```
no such file or directory 
```

（我正在使用**窗户**）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:36:35.517

libxml2 包通常不会安装到标准路径中（在 unix fe /usr/include 下），因此您必须告诉编译器/IDE 您安装包含和库的位置（fe /home/include）。在现代 IDE 中，这可以通过将库拖放到项目中来实现。在其他环境中，您必须调整您的 makefile 或系统（环境变量）以将包含路径指向您的 libxml2 目录包含路径（-I 与 gcc）和库路径（-L）。在您的 IDE 中，您可能有一个选项/项目设置来执行此操作。

# php - 将行单元格更新为旧值

> ID：14121223
> 
> 赞同：0
> 
> 时间：2013-01-02T11:26:28.793
> 
> 标签：php, mysql, database

**已修复问题：浏览器正在缓存 GET 请求。在 jQuery 中添加随机值可解决此问题。例如：**

```
$.get(templateDir + "/inc/quote-update.php", { FlightID: FlightID, returnorigin: valuefrom, returndestination: valueto, returnpax: valuepax, returndate: valueret, "_": $.now()}, 
```

我到处寻找解决方案，但找不到。如果之前已经发布过，我深表歉意。

问题是这样的。当用户访问该网站时，他们会搜索航班。详细信息存储在数据库中。这工作正常。

然后，用户可以更改并添加到他们的航班。这很好用——除了乘客人数。

出于某种原因，我在更新乘客人数字段时遇到了一个奇怪的错误。发生的情况是，如果您将值更改为***以前***的值，它将不会更新。如果您将其更改为***以前没有***的值，它将成功更新。

例如，如果用户最初搜索 6 名乘客的航班，然后将其更改为 4 名乘客 - 他们无法将其更改回 6 名乘客。但是，他们可以将其更改为 3、5 或 7 等。

这就是我在 phpmyadmin 中设置字段的方式：

```
4   pax bigint(20)      UNSIGNED    No  None 
```

这是我的代码：

```
<?php

    $FlightID = isset($_GET["FlightID"]) ? $_GET['FlightID'] : null;

    $db = new PDO('mysql:host=localhost;dbname=databasename', 'database-table', 'afgafha', array(PDO::ATTR_EMULATE_PREPARES => false, 
                                                                                                    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
    // Start a counter for errors
    $error = 0;

    if (!is_null($FlightID)) {

            $stmt = $db->prepare("SELECT * FROM database-table WHERE FlightID = ?");
            $stmt->execute(array($FlightID));

            if ($stmt->rowCount() <= 0){ 

                        // Do Nothing //

                                        } elseif ($stmt->rowCount() == 1){      

                                                        $origin = isset($_GET['origin']) ? $_GET['origin'] : null;
                                                        $destination = isset($_GET['destination']) ? $_GET['destination'] : null;
                                                        $pax = isset($_GET['pax']) ? $_GET['pax'] : null;       
                                                        $depdate = isset($_GET['depdate']) ? $_GET['depdate'] : null;                   

                                                            if (!is_null($origin) && !is_null($destination) && !is_null($pax) && !is_null($depdate)){

                                                                    $data = array($origin, $destination, $depdate, $pax, $FlightID);  
                                                                    $stmt = $db->prepare("UPDATE database-table SET origin=?, destination=?, depdate=?, pax=? WHERE FlightID=?");
                                                                    $stmt->execute($data);

                                                                    $affected_rows = $stmt->rowCount();

                                                                    echo $affected_rows.' were affected';
                                                                    print_r ($data);

                                                            } else {
                                                                    // Validation failed
                                                                    $error++;
                                                            }

                                        } else { 
                                                $error++;           
                                        }
    } else {
            $error++;
    }
    if($error > 0) {

    }
    ?> 
```

有人有什么想法吗？如果这是一个真正的菜鸟问题，我很抱歉，但这是我第一次自己制作 PHP/SQL 应用程序。

提前 - 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:53:50.763

也许这很愚蠢，但是您的表中有`pax`和`Rpax`字段，并且您正在更新`returnpax`php 代码中命名的字段。

**编辑：**

只是为了共享此信息，您可以使用`cache: false`JQuery 调用中的设置来避免缓存。它与您所做的基本相同`$.now()`，但对我来说听起来更干净。无论如何，很高兴你解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:36:49.590

wpdev_flights 是如何定义的？我想这可能与您的主键有关...在您运行脚本几次后，该表的外观如何？一个 FlightID 表中是否有不止一行？如果存在多于一行，这将解释该行为。如果存在与值匹配的行，则 UPDATE 不会执行任何操作。

# java - 已经发出连接错误信号的 PooledConnection 仍在使用中

> ID：14121226
> 
> 赞同：13
> 
> 时间：2013-01-02T11:26:39.537
> 
> 标签：java, hibernate

[我在这里](https://stackoverflow.com/questions/14106239/how-to-use-the-named-parameters-with-contains)发布了一个查询 ，运行休眠查询后出现此错误，我不知道这是什么意思。所以几分钟后我重新运行查询，然后我没有错误，但我想知道我是如何得到它以及如何修复它。

```
WARN  com.mchange.v2.c3p0.impl.NewPooledConnection - [c3p0] A PooledConnection that has already signalled a Connection error is still in use!
WARN  com.mchange.v2.c3p0.impl.NewPooledConnection - [c3p0] Another error has occurred [ java.sql.SQLException: Invalid state, the Connection object is closed. ] which will not be reported to listeners!
java.sql.SQLException: Invalid state, the Connection object is closed.
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.checkOpen(ConnectionJDBC2.java:1713)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.clearWarnings(ConnectionJDBC2.java:2020)
    at com.mchange.v2.c3p0.impl.NewProxyConnection.clearWarnings(NewProxyConnection.java:933)
    at org.hibernate.util.JDBCExceptionReporter.handleAndClearWarnings(JDBCExceptionReporter.java:71)
    at org.hibernate.util.JDBCExceptionReporter.logAndClearWarnings(JDBCExceptionReporter.java:49)
    at org.hibernate.jdbc.ConnectionManager.closeConnection(ConnectionManager.java:472)
    at org.hibernate.jdbc.ConnectionManager.aggressiveRelease(ConnectionManager.java:429)
    at org.hibernate.jdbc.ConnectionManager.afterStatement(ConnectionManager.java:304)
    at org.hibernate.jdbc.AbstractBatcher.closePreparedStatement(AbstractBatcher.java:572)
    at org.hibernate.jdbc.AbstractBatcher.closeStatement(AbstractBatcher.java:291)
    at org.hibernate.jdbc.AbstractBatcher.closeQueryStatement(AbstractBatcher.java:307)
    at org.hibernate.jdbc.AbstractBatcher.closeQueryStatement(AbstractBatcher.java:234)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1967)
    at org.hibernate.loader.Loader.doQuery(Loader.java:802)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.doList(Loader.java:2533)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
    at org.hibernate.loader.Loader.list(Loader.java:2271)
    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:316)
    at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1842)
    at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:165)
    at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:157)
org.hibernate.exception.JDBCConnectionException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:99)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.doList(Loader.java:2536)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
    at org.hibernate.loader.Loader.list(Loader.java:2271)
    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:316)
    at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1842)
    at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:165)
    at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:157)
Caused by: java.sql.SQLException: I/O Error: Software caused connection abort: recv failed
    at net.sourceforge.jtds.jdbc.TdsCore.executeSQL(TdsCore.java:1053)
    at net.sourceforge.jtds.jdbc.JtdsStatement.executeSQLQuery(JtdsStatement.java:465)
    at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.executeQuery(JtdsPreparedStatement.java:778)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)
    at org.hibernate.loader.Loader.doQuery(Loader.java:802)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.doList(Loader.java:2533)
    ... 8 more
Caused by: java.net.SocketException: Software caused connection abort: recv failed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at java.io.DataInputStream.readFully(DataInputStream.java:195)
    at java.io.DataInputStream.readFully(DataInputStream.java:169)
    at net.sourceforge.jtds.jdbc.SharedSocket.readPacket(SharedSocket.java:842)
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:723)
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:466)
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:103)
    at net.sourceforge.jtds.jdbc.ResponseStream.peek(ResponseStream.java:88)
    at net.sourceforge.jtds.jdbc.TdsCore.wait(TdsCore.java:3932)
    at net.sourceforge.jtds.jdbc.TdsCore.executeSQL(TdsCore.java:1046)
    ... 16 more 
```

**更新 ：**

我的第一个代码：

```
Session session = getSessionfactory().openSession();
session.beginTransaction();

ArrayList<Object[]> results = null;
try {
    StringBuilder sb = new StringBuilder();
    sb.append("select p from person p ");
    sb.append("where CONTAINS(p.name , :myName) ");

    Query q = session.createSQLQuery(sb.toString());
    String myName = "Bob Jones";
    q.setString("myName", "*" + myName + "*");  

    results = (ArrayList<Object[]>) q.list();

} catch (Exception e) {
    logger.error("Error : ", e);
} finally {
    session.close();
} 
```

它不起作用，[要修复它，](https://stackoverflow.com/questions/14106239/how-to-use-the-named-parameters-with-contains) 这是第二个版本：

```
Session session = getSessionfactory().openSession();
session.beginTransaction();

ArrayList<Object[]> results = null;
try {
    StringBuilder sb = new StringBuilder();
    sb.append("select p from person p ");
    sb.append("where CONTAINS(p.name , :myName) ");

    Query q = session.createSQLQuery(sb.toString());
    String myName = "Bob Jones";
    q.setString("myName", "\"*" + myName + "*\""); 

    results = (ArrayList<Object[]>) q.list();

} catch (Exception e) {
    logger.error("Error : ", e);
} finally {
    session.close();
} 
```

尝试运行第二个版本，我有上面的错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T11:30:57.570

您的事务管理和/或连接管理代码可能已关闭。似乎您在出错后没有释放与连接池的连接，并试图重用它。这可能是由于您使用了错误的异常处理习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:47:25.003

通过使用 jTDS，您可能正在尝试连接到 MS SQL 或 Sybase。根据您发布的代码，一切看起来都很好。我建议您升级驱动程序并提高日志记录级别以获取更多详细日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T07:00:28.347

添加我的 2 美分，似乎与数据库的网络连接存在一些问题。

> 原因：java.sql.SQLException：I/O 错误：软件导致连接中止：recv 失败

还尝试使用另一个数据库进行测试，以便检查数据库是否可能是随机发生的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-13T17:19:10.493

尝试使用本地数据库工具建议的索引，这可能是由于所有其他连接都需要时间从表中获取响应并且无法建立新连接，因此连接已关闭警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-18T20:26:18.750

如果您的池空闲超时（使用测试查询检查连接）在数据库连接超时（没有从客户端听到任何消息）之前运行，也会发生这种情况，即数据库服务器决定删除并且客户端不知道它。

# php - 在 Drupal 中为页面选择性地删除样式表

> ID：14121231
> 
> 赞同：4
> 
> 时间：2013-01-02T11:27:12.750
> 
> 标签：php, drupal, drupal-7, drupal-theming, drupal-zen

我正在尝试为首页制作不同的布局。在那个过程中，我声明了名为“front-page.css”和 page--front.tpl.php 的新样式表。我正在使用加载 responsive-sidebar.css 的 Zen 子主题。我想删除“responsive-sidebar.css”并加载“front-page.css”。我这样做的原因是后来样式表中的研磨列数与前者不同。

我不想使用 Panels 模块。我正在使用 Drupal 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:33:52.583

在您的主题`template.php`文件和[template_preprocess_page($vars)](http://api.drupal.org/api/drupal/includes!theme.inc/function/template_preprocess_page/7)中，找到要在其中删除的 CSS 文件，`$vars['stylesheets']`然后使用 PHP 的`unset`函数将其从`$vars['stylesheets']`数组中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:18:56.547

Drupal 7 方法是使用[`hook_css_alter()`](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_css_alter/7)：

```
function MYMODULE_css_alter(&$css) {
  // Remove defaults.css file. The path will probably change for your theme obviously.
  unset($css[drupal_get_path('theme', 'MYTHEME') . '/css/responsive-sidebar.css']);
} 
```

该钩子可以在模块或主题中实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T12:09:29.683

我刚刚找到了更好的方法来做到这一点。它有点 hacky，但允许在几乎任何地方取消设置 css：

```
$css = &drupal_static('drupal_add_css', array());
unset($css['some_css_path']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-22T20:47:52.227

Drupal 8 路。也许它适用于 Drupal 7。要删除某个/特定页面上的样式表，您需要：

```
function MYTHEME_css_alter(&$css) {

// Get me path:
  $current_path = \Drupal::service('path.current')->getPath();
  $result = \Drupal::service('path.alias_manager')->getAliasByPath($current_path);

    if ($result == 'your/path' ){
      unset($css[drupal_get_path('theme', 'THEMENAME') . '/css/style.css']);
    }
} 
```

它在 D8 中适用于我，可以将其放入 .theme 或 .module 中。您需要删除所有缓存（或模块缓存）。

# symfony - 无法在 Symfony2 中从 YML 生成实体

> ID：14121233
> 
> 赞同：0
> 
> 时间：2013-01-02T11:27:19.403
> 
> 标签：symfony

我的实体代码：

```
GameShelf\GamesBundle\Entity\Game:
    type: entity
    table: games
    id:
        id:
            type: integer
            generator: { strategy: AUTO }
    fields:
        parent_id:
            type: integer
            length: 11
        name:
            type: string
            length: 200
        slug:
            type: string
            length: 200
        reldate:
            type: date
        genres:
            type: text
        platforms:
            type: text
        developers:
            type: text
        desc:
            type: text
        desc_src:
            type: text
        rate:
            string: integer
            lenght: 10 
```

我跑`php app/console doctrine:generate:entities GameShelf\GamesBundle\Entity\Game`了，它回来了`Namespace "GameShelf\GamesBundle\Entity\Game" does not contain any mapped entities.`。怎么了？我按照[这里的文档](http://symfony.com/doc/current/book/doctrine.html)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T13:10:22.457

请查看 Game.orm.yml 文件的以下代码。

```
GameShelf\GamesBundle\Entity\Game:
  type: entity
  table: null
  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    parent_id:
      type: integer
      length: 11
    name:
      type: string
      length: 200
    slug:
      type: string
      length: 200
    reldate:
      type: datetime
    genres:
      type: text
    platforms:
      type: text
    developers:
      type: text
    desc:
      type: text
    desc_src:
      type: text
    rate:
      type: integer
      length: 10 
```

以下内容已更正，可能有助于解决您的问题。

*   您的身份声明很不稳定。
*   “比率”列的“长度”中的错字
*   没有这样的类型“日期”，只有“日期时间”
*   看起来您使用 4 个空格制表符，YAML 需要 2 个空格制表符

在我自己的配置上测试了正确的 YAML，并能够使用以下命令创建实体：

```
app/console generate:doctrine:entities --no-backup <Your Bundle>
app/console doctrine:schema:update --dump-sql
app/console doctrine:schema:update --force 
```

# php - Magento 结帐卡在帐单地址

> ID：14121237
> 
> 赞同：0
> 
> 时间：2013-01-02T11:27:43.647
> 
> 标签：php, html, css, magento, checkout

我有一个奇怪的问题。我没有对我的商店进行任何更改或任何操作，但突然间，我的客户被卡在结帐的结算步骤中。它只是返回**“所有 '*' 都需要填写”。**

知道我如何解决/解决这个问题吗？我的 URL 是[canopysound](http://canopysound.dk)（它是丹麦语，但我想您无论如何都可以导航到结帐）。

另一件事是，在我的后端配置中，我无法保存所做的更改。我尝试关闭客人结帐和一页结帐。当我按“保存”时，它们保持不变（都打开）。我不知道这是否相关：/

编辑：关于最后提到的问题，我做了更多的搜索。它可能与我的 .htaccess 配置有关。我可能在那里毁了一些东西。我的 .htaccesss 看起来像这样：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
RewriteRule (.*?)index\.php/*(.*) /$1$2 [R=301,L]

RewriteRule ^(.*)/$ /$1 [L,R=301]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

RewriteCond %{SCRIPT_FILENAME}/ -d
  RewriteCond %{SCRIPT_FILENAME}.html !-f
  RewriteRule [^/]$ %{REQUEST_URI}/ [R=301,L]

  RewriteCond %{ENV:REDIRECT_STATUS} ^$
  RewriteRule ^(.+)\.html$ /$1 [R=301,L]
</IfModule>

<ifModule mod_gzip.c>
  mod_gzip_on Yes
  mod_gzip_dechunk Yes
  mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
  mod_gzip_item_include handler ^cgi-script$
  mod_gzip_item_include mime ^text/.*
  mod_gzip_item_include mime ^application/x-javascript.*
  mod_gzip_item_exclude mime ^image/.*
  mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

<IfModule mod_expires.c>
ExpiresActive On
############################################
## Add default Expires header
## http://developer.yahoo.com/performance/rules.html#expires
<FilesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
ExpiresDefault "access plus 1 year"
</FilesMatch>
</IfModule> 
```

# php - 从 EC2 连接到 Gmail

> ID：14121248
> 
> 赞同：0
> 
> 时间：2013-01-02T11:28:47.990
> 
> 标签：php, function, amazon-ec2, gmail

我有一个问题在截止日期前变得更糟，以使其工作悬在我的头上。以下代码已在我的旧 Web 服务器上成功运行。但是，当将其移至亚马逊 EC2 时，它会导致调用它的页面无法打开（即无法正常工作）。我已确保 EC2 上的端口 993 已打开，但由于我是服务器设置的新手，我可能会遗漏一些东西：

```
function downloadData($emailAddress, $reportUrl, $reportType)
{
    $result = "error";
    // DOWNLOAD DATA
    // the max time allows for the email to download
    set_time_limit(3000);

    // connect to gmail with your credentials
    $hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
    $username = $emailAddress; # e.g somebody@gmail.com
    $password = '*************';

    // try to connect
    $inbox = imap_open($hostname,$username,$password) or die('Cannot download information: ' . imap_last_error());

    /* get all new emails. If set to 'ALL' instead 
     * of 'NEW' retrieves all the emails, but can be 
     * resource intensive, so the following variable, 
     * $max_emails, puts the limit on the number of emails downloaded.
     * 
     */
    $emails = imap_search($inbox,'ALL');

    // useful only if the above search is set to 'ALL'
    $max_emails = 5;

    // if any emails found, iterate through each email
    if($emails)
        {
            $count = 1;

            // put the newest emails on top
            rsort($emails);

            // for every email...
            foreach($emails as $email_number) 
                {
                    // get information specific to this email
                    $overview = imap_fetch_overview($inbox,$email_number,0);

                    // get mail message
                    $message = imap_fetchbody($inbox,$email_number,2);

                    // get mail structure
                    $structure = imap_fetchstructure($inbox, $email_number);

                    $attachments = array();

                    // if any attachments found...
                    if(isset($structure->parts) && count($structure->parts)) 
                        {
                          for($i = 0; $i < count($structure->parts); $i++) 
                            {
                                $attachments[$i] = array(
                                    'is_attachment' => false,
                                    'filename' => '',
                                    'name' => '',
                                    'attachment' => ''
                                    );

                            if($structure->parts[$i]->ifdparameters) 
                                {
                                    foreach($structure->parts[$i]->dparameters as $object) 
                                        {
                                            if(strtolower($object->attribute) == 'filename') 
                                                {
                                                    $attachments[$i]['is_attachment'] = true;
                                                    $attachments[$i]['filename'] = $object->value;
                                                }
                                        }
                                }

                            if($structure->parts[$i]->ifparameters) 
                                {
                                    foreach($structure->parts[$i]->parameters as $object) 
                                        {
                                            if(strtolower($object->attribute) == 'name') 
                                                {
                                                    $attachments[$i]['is_attachment'] = true;
                                                    $attachments[$i]['name'] = $object->value;
                                                }
                                        }
                                }

                            if($attachments[$i]['is_attachment']) 
                                {
                                    $attachments[$i]['attachment'] = imap_fetchbody($inbox, $email_number, $i+1);

                                    // 4 = QUOTED-PRINTABLE encoding
                                    if($structure->parts[$i]->encoding == 3) 
                                        { 
                                            $attachments[$i]['attachment'] = base64_decode($attachments[$i]['attachment']);
                                        }
                                    // 3 = BASE64 encoding
                                    elseif($structure->parts[$i]->encoding == 4) 
                                        { 
                                            $attachments[$i]['attachment'] = quoted_printable_decode($attachments[$i]['attachment']);
                                        }
                                                //imap_delete($inbox,$email_number);
                                                imap_mail_move($inbox, $email_number,'[Gmail]/Bin');
                                        }
                                 }
                          }

                     // iterate through each attachment and save it
                     foreach($attachments as $attachment)
                        {
                            if($attachment['is_attachment'] == 1)
                                {
                                    // SCAN REPORT SET OUTSIDE OF FUNCTION
                                    $filename = $reportUrl;
                                    if(empty($filename)) $filename = $attachment['filename'];
                                    if(empty($filename)) $filename = time() . ".dat";

                                    /* prefix the email number to the filename in case two emails
                                    * have the attachment with the same file name.
                                    */
                                    $fp = fopen($filename, "w+");
                                    fwrite($fp, $attachment['attachment']);
                                    fclose($fp);
                                    $result = "success";
                                 }

                        }
                    if($count++ >= $max_emails) break;
                }
        } 
    // close the connection
    imap_close($inbox,CL_EXPUNGE);
    return $result;
} 
```

虽然没有出现这样的错误（页面只是没有从调用函数的位置加载）控制台返回此错误：500（内部服务器错误）

有什么建议我可能会错过吗？

编辑：似乎只有在函数中包含以下代码时，页面才会出错：

```
 // try to connect
    $inbox = imap_open($hostname,$username,$password) or die('Cannot download information: ' . imap_last_error());

    // close the connection
    imap_close($inbox,CL_EXPUNGE); 
```

向我建议问题出在端口上，但根据我的 ec2 安全组，正确的端口 (993) 已打开。在这样的过程中是否应该打开任何其他端口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:40:34.267

确保 EC2 不在 VPC 上！当 EC2 实例位于 VPC 内时；它需要特殊配置才能连接到互联网（通过 NAT 实例等）。

我觉得您应该做的第一个测试是“在您的 EC2 实例上执行 ssh”，然后从那里尝试检查您是否可以在端口 993 上访问 google。您可以尝试在 imap.google.com 上 ping

# iphone - UIWebView 中的可访问性读取 HTML 代码，而不是 HTML 页面

> ID：14121249
> 
> 赞同：1
> 
> 时间：2013-01-02T11:28:50.907
> 
> 标签：iphone, uiwebview, uiaccessibility

这是一个奇怪的错误 - 我在 UITableView 中有 UIWebView，可访问性不是读取 html 页面的内容，而是读取 RAW html 数据，包括 HTTP 标头。UIWebView 中的可访问性应该是开箱即用的，对吧？什么会导致这种奇怪的行为？

它是 iphone 4S、ios 6.0 和 xcode 4.5.2。

谢谢你的帮助。

# iphone - RESTKit 的问题，无法正确映射

> ID：14121252
> 
> 赞同：8
> 
> 时间：2013-01-02T11:29:29.180
> 
> 标签：iphone, ios, restkit

我正在学习 RESTKit，我正在学习[本](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial)教程，该教程是根据以前版本的 RESTKit 进行的，并且在 v0.20.0 中发生了很多变化，所以我正在阅读新版本并执行与教程中相同的任务。

现在映射出现问题，我花了好几个小时都没有成功。我得到的错误是：

```
error: Error Domain=org.restkit.RestKit.ErrorDomain Code=1001 "No response descriptors match the response loaded." UserInfo=0x758d320 {NSErrorFailingURLStringKey=https://api.foursquare.com/v2/venues/search?client_id=<client id>&client_secret=KYHQHRYJ4PYFJYEG1F1IQVLQDM4G1HZ1STB2O1VUVUVQZBGS<client secret>&ll=37.33,-122.03&query=coffee&v=20120602, NSLocalizedFailureReason=A 200 response was loaded from the URL 'https://api.foursquare.com/v2/venues/search?client_id=<client id>&client_secret=<client secret>&ll=37.33,-122.03&query=coffee&v=20120602', which failed to match all (1) response descriptors:
  <RKResponseDescriptor: 0x9566a60 baseURL=https://api.Foursquare.com/v2/ pathPattern=(null) statusCodes=200-299> failed to match: response URL 'https://api.foursquare.com/v2/venues/search?client_id=<client id>&client_secret=<client secret>&ll=37.33,-122.03&query=coffee&v=20120602' is not relative to the baseURL 'https://api.Foursquare.com/v2/'., NSLocalizedDescription=No response descriptors match the response loaded., keyPath=null, NSErrorFailingURLKey=https://api.foursquare.com/v2/venues/search?client_id=<client id>&client_secret=<client secret>&ll=37.33,-122.03&query=coffee&v=20120602, NSUnderlyingError=0x758d3a0 "No mappable object representations were found at the key paths searched."} 
```

Venue.h 是：

```
#import <Foundation/Foundation.h>

@interface Venue : NSObject

@property (strong, nonatomic) NSString *name;

@end 
```

Venue.m 是：

```
#import "Venue.h"

@implementation Venue
@synthesize name;

@end 
```

我正在 ViewDidAppear 方法中的 MasterViewController.m 中执行所有操作，即：

```
- (void) viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    NSURL *baseURL = [NSURL URLWithString:@"https://api.Foursquare.com/v2"];

    AFHTTPClient * client = [AFHTTPClient clientWithBaseURL:baseURL];
    [client setDefaultHeader:@"Accept" value:RKMIMETypeJSON];

    RKObjectManager *objectManager = [[RKObjectManager alloc] initWithHTTPClient:client];

    RKObjectMapping *venueMapping = [RKObjectMapping mappingForClass:[Venue class]];
    [venueMapping addAttributeMappingsFromDictionary:@{
     @"name" : @"name"
     }];

    RKResponseDescriptor * responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:venueMapping
                                                                                        pathPattern:nil
                                                                                            keyPath:@"response.venues"
                                                                                        statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
    [objectManager addResponseDescriptor:responseDescriptor];

    NSString *latLon = @"37.33,-122.03";
    NSString *clientID = [NSString stringWithUTF8String:kCLIENTID];
    NSString *clientSecret = [NSString stringWithUTF8String:kCLIENTSECRET];

    NSDictionary *queryParams;
    queryParams = [NSDictionary dictionaryWithObjectsAndKeys:latLon, @"ll", clientID, @"client_id", clientSecret, @"client_secret", @"coffee", @"query", @"20120602", @"v", nil];
    //NSLog(@"object manager: %@ - %@", objectManager.baseURL, [[objectManager responseDescriptors] objectAtIndex:0]);

    /*
    RKRelationshipMapping* relationShipMapping = [RKRelationshipMapping relationshipMappingFromKeyPath:@"venues"
                                                                                             toKeyPath:@"venues"
                                                                                           withMapping:venueMapping];
    [venueMapping addPropertyMapping:relationShipMapping]; */
    [objectManager getObjectsAtPath:@"https://api.Foursquare.com/v2/venues/search"
                         parameters:queryParams
                         success:^(RKObjectRequestOperation * operaton, RKMappingResult *mappingResult)
                         {
                             NSLog(@"success: mappings: %@", mappingResult);
                         }
                         failure:^(RKObjectRequestOperation * operaton, NSError * error)
                         {
                             NSLog (@"failure: operation: %@ \n\nerror: %@", operaton, error);
                         }];

} 
```

我已经检查了浏览器中的响应，没关系，但是由于某种原因，我所做的一切都没有消除错误。我卡在映射的第一步，无法前进。互联网上有关该主题的所有示例和文档都已过时，并且对 RESTKit 的旧版本没有经验，我无法弄清楚。请告诉我我做错了什么。

使用 xcode 4.5 并为 iOS6 构建。

响应是（在浏览器上检查）：

```
{"meta":{"code":200},"response":{"venues":[{"id":"4f482132e4b0f85d07c34cb5","name":"De Anza 3 Coffee Bar","contact":{},"location":{"address":"10500 De Anza Blvd","lat":37.329438,"lng":-122.03083,"distance":96,"postalCode":"95014","city":"Cupertino","state":"CA","country":"United States","cc":"US"},"canonicalUrl":"https:\/\/foursquare.com\/v\/de-anza-3-coffee-bar\/4f482132e4b0f85d07c34cb5","categories":[{"id":"4bf58dd8d48988d1e0931735","name":"Coffee Shop","pluralName":"Coffee Shops","shortName":"Coffee Shop","icon":{"prefix":"https:\/\/foursquare.com\/img\/categories\/food\/coffeeshop_","sizes":[32,44,64,88,256],"name":".png"},"primary":true}],"verified":false,"restricted":true,"stats":{"checkinsCount":1,"usersCount":1,"tipCount":0},"likes":{"count":0,"groups":[]},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"groups":[]},"referralId":"v-1357121711"},{"id":"40ccea80f964a52019011fe3","name":"Coffee Society","contact":{"phone":"4087258091","formattedPhone":"(408) 725-8091"},"location":{"address":"21265 Stevens Creek Blvd","crossStreet":"at Oaks Shopping Center","lat":37.32330342,"lng":-122.047382,"distance":1709,"postalCode":"95014","city":"Cupertino","state":"CA","country":"United States","cc":"US"},"canonicalUrl":"https:\/\/foursquare.com\/v\/coffee-society\/40ccea80f964a52019011fe3","categories":[{"id":"4bf58dd8d48988d1e0931735","name":"Coffee Shop","pluralName":"Coffee Shops","shortName":"Coffee Shop","icon":{"prefix":"https:\/\/foursquare.com\/img\/categories\/food\/coffeeshop_","sizes":[32,44,64,88,256],"name":".png"},"primary":true}],"verified":false,"restricted":true,"stats":{"checkinsCount":2536,"usersCount":869,"tipCount":24},"likes":{"count":0,"groups":[]},"specials":{"count":0,"items":[]},"hereNow":{"count":0,"groups":[]},"referralId":"v-1357121711"}, ..... 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T21:29:20.893

我尝试将完全相同的教程转换为 0.20 版，最后为我解决的问题是将 URL 设为小写（https://api.Foursquare.com/v2）。用小写 f 替换那个大写的“F”，所以都是小写的。似乎 RESTKit 需要全部小写并且区分大小写，但我是 iOS 编程和 RESTKit 的新手。

另请注意：

1.  不需要 RKRelationshipMapping 的东西
2.  pathPattern:nil & keyPath:@"response.venues"

我相信你已经有了这些，但我想详细一点以防万一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T01:27:46.310

对于来到这里但没有 CAPS 问题的人（比如我），请查看RestKit 的创建者的[这篇 github 解决方案](https://github.com/RestKit/RestKit/issues/1060)帖子。它帮助我弄清楚[我的路径问题](http://www.readncode.com/blog/2013/04/28/restkit-0-dot-20-no-response-descriptors-match-the-response-loaded/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:03:48.017

您是否尝试过将 keyPath 简单地称为“venues”而不是“response.venues”？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T00:08:49.250

由于您在自定义 HTTP 客户端中使用了 baseURL，因此请尝试仅使用路径扩展名：

```
 [objectManager getObjectsAtPath:@"/venues/search"
                     parameters:queryParams
                     success:^(RKObjectRequestOperation * operaton, RKMappingResult *mappingResult)
                     {
                         NSLog(@"success: mappings: %@", mappingResult);
                     }
                     failure:^(RKObjectRequestOperation * operaton, NSError * error)
                     {
                         NSLog (@"failure: operation: %@ \n\nerror: %@", operaton, error);
                     }]; 
```

并在您的响应描述符中添加路径：

```
RKResponseDescriptor * responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:venueMapping
                                                                                    pathPattern:@"/venues/search"
                                                                                        keyPath:@"venues"
                                                                                    statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]; 
```

# c# - 我想在客户端机器上打印水晶报告，在 C#

> ID：14121253
> 
> 赞同：0
> 
> 时间：2013-01-02T11:29:37.027
> 
> 标签：c#, printing, crystal-reports, report

此代码在安装了代码的服务器机器上成功运行，但是当我尝试从客户端机器打印报告时它不起作用

请帮我解决这个问题。

```
CrystalDecisions.CrystalReports.Engine.ReportDocument doc = new CrystalDecisions.CrystalReports.Engine.ReportDocument();
            string crptpath;
            crptpath = Server.MapPath("rpt_Water_FO_Gas_Consumption.rpt");
            doc.Load(crptpath);

            //For Local Server
            doc.SetDatabaseLogon("user_name", "password", "localhost", "ktem");

            //For Online Server
            //doc.SetDatabaseLogon("user_name", "password", "ip_address", "ktem");

            da = new SqlDataAdapter(cmd);
            dt = dbcon.filldataset(cmd);

            doc.Database.Tables[0].SetDataSource(dt.Tables[0]);
            CrystalReportViewer1.ReportSource = doc;

            //For Print Report
            CrystalReportViewer1.PrintMode.Equals(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:02:16.773

在客户端加载crptpath时检查路径，如果路径正确验证服务器是否允许访问rpt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:28:52.273

您提供的代码有答案：

```
 //For Local Server
        doc.SetDatabaseLogon("user_name", "password", "localhost", "ktem"); 
```

数据库正在服务器中运行。它在服务器中工作。知道了？好的，在上面的代码中 localhost 代表服务器机器，当代码运行时是服务器。所以报告知道数据库在哪里退出。

当您在客户端机器上运行相同的代码时，本地主机代表客户端机器并报告抱怨没有数据库。

将本地主机替换为服务器 IP 地址。[取自您评论的代码]

```
 //For Online Server
        //doc.SetDatabaseLogon("user_name", "password", "12.121.114.220", "ktem"); 
```

# c# - 当我尝试使用 DotNetOpenAuth 访问其 API 时，从 LinkedIn 收到 HTTP 400 错误

> ID：14121254
> 
> 赞同：1
> 
> 时间：2013-01-02T11:29:35.783
> 
> 标签：c#, oauth, linkedin, dotnetopenauth

我正在尝试使用 DotNetOpenAuth 编写一个基本程序来代表用户搜索人员。只是一个尝试了解 OAuth 的简单程序。现在我一直在尝试授权，但是当我尝试这样做时，我从linkedIn 获得了 HTTP 400 状态代码。

我试过同时使用 DesktopConsumers 和 WebConsumers，两者都以同样的方式失败。我知道导致异常的特定函数是第 34 行对 RequestUserAuthorization 的调用，我尝试使用空字典和空值作为它的输入，但什么也没发生。

我在程序中使用了两个类，一个包含 main 的 TestLinkedIn.cs 类和一个 LinkedInTokenManager.cs 类，这是 IConsumerTokenManager 的一个非常简单的实现。

这是 TestLinkedIn.cs 的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using DotNetOpenAuth.Messaging;
using DotNetOpenAuth.OAuth.Messages;
using DotNetOpenAuth.OAuth;
using DotNetOpenAuth.OAuth.ChannelElements;

namespace Project
{
    class TestLinkedIn
    {
        #region Variables
        private static string APIKey = "APIKey";
        private static string APISecret = "APISecret";
        private static string OAuthToken = "OAuthToken";
        private static string OAuthSecret = "OAuthSecret";
        #endregion

        static void Main(string[] args)
        {
            ServiceProviderDescription linkedIn = LinkedInDescription();
            LinkedInTokenManager tokenManager = new LinkedInTokenManager(OAuthToken, OAuthSecret);//APIKey,APISecret);//
            DesktopConsumer web = new DesktopConsumer(linkedIn,tokenManager); 
            string requestToken = "";
            Uri authUrl = new Uri("https://steve.com");// ("https://api.linkedin.com/uas/oauth/requestToken");//"http" + "://" + "api.linkedin.com" + "/Home/OAuthCallBack");
            Dictionary<string, string> empty = new Dictionary<string, string>();
            try{
                //UserAuthorizationRequest request = web.PrepareRequestUserAuthorization(null, null, null, out requestToken);//null, null, null);//authUrl, null, null);
                //UserAuthorizationRequest request =web.Channel.Request(new AccessProtectedResourceRequest());
                //web.Channel.Send(request);
                authUrl = web.RequestUserAuthorization(empty, empty, out requestToken);
                Console.WriteLine(requestToken);
                Console.ReadKey();
            }
            catch (ProtocolException e)
            {
                Console.Write(e.StackTrace);
                Console.WriteLine("Error detected");
                //Console.ReadKey();
            }
        }

        private static ServiceProviderDescription LinkedInDescription(){
            ServiceProviderDescription linkedIn = new ServiceProviderDescription();
            linkedIn.AccessTokenEndpoint = new DotNetOpenAuth.Messaging.MessageReceivingEndpoint
                ("https://api.linkedin.com/uas/oauth/accessToken", DotNetOpenAuth.Messaging.HttpDeliveryMethods.PostRequest);
            linkedIn.RequestTokenEndpoint = new DotNetOpenAuth.Messaging.MessageReceivingEndpoint
                ("https://api.linkedin.com/uas/oauth/requestToken",DotNetOpenAuth.Messaging.HttpDeliveryMethods.PostRequest);
            linkedIn.UserAuthorizationEndpoint = new MessageReceivingEndpoint("https://www.linkedin.com/uas/oauth/authorize",
                HttpDeliveryMethods.PostRequest);
            linkedIn.TamperProtectionElements =new ITamperProtectionChannelBindingElement[]
                {new HmacSha1SigningBindingElement()};
            linkedIn.ProtocolVersion=ProtocolVersion.V10a;
            return linkedIn;
        }
    }
} 
```

这是代码`LinkedInTokenManager`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using DotNetOpenAuth.OAuth.ChannelElements;
using DotNetOpenAuth.OAuth.Messages;

namespace Project
{
    class LinkedInTokenManager : IConsumerTokenManager
    {
        private Dictionary<string, string> tokens = new Dictionary<string, string>();
        private string consumerKey;
        private string consumerSecret;

    public LinkedInTokenManager(string Key, string Secret)
    {
        consumerKey = Key;
        consumerSecret = Secret;
    }
    public string ConsumerKey
    {
        get { return consumerKey; }
    }

    public string ConsumerSecret
    {
        get { return consumerSecret; }
    }

    public void ExpireRequestTokenAndStoreNewAccessToken(string consumerKey, string requestToken, string accessToken, string accessTokenSecret)
    {
        tokens.Remove(requestToken);
        tokens[accessToken] = accessTokenSecret;
    }

    public string GetTokenSecret(string token)
    {
        try
        {
            return tokens[token];
        }
        catch (KeyNotFoundException k)
        {
            return null;
        }
    }

    public TokenType GetTokenType(string token)
    {
        throw new NotImplementedException();
    }

    public void StoreNewRequestToken(UnauthorizedTokenRequest request, ITokenSecretContainingMessage response)
    {
        tokens[response.Token] = response.TokenSecret;
    }
  }
} 
```

这是我发布到服务器的东西。

```
oauth_callback=oob&oauth_consumer_key=6415f7ed-d618-422a-b090-73f3056653d7&oauth_nonce=nGQjFcC1&oauth_signature_method=HMAC-SHA1&oauth_signature=XmUBfGVGDoBZDOC%2Bjp4Fj68MPGI%3D&oauth_version=1.0&oauth_timestamp=1357136418 
```

这是错误消息中的堆栈跟踪。

```
at DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse(HttpWebRequest request, DirectWebRequestOptions options)
   at DotNetOpenAuth.Messaging.StandardWebRequestHandler.GetResponse(HttpWebRequest request)
       at DotNetOpenAuth.Messaging.Channel.GetDirectResponse(HttpWebRequest webRequest)
       at DotNetOpenAuth.Messaging.Channel.RequestCore(IDirectedProtocolMessage request)
       at DotNetOpenAuth.Messaging.Channel.Request(IDirectedProtocolMessage requestMessage)
       at DotNetOpenAuth.Messaging.Channel.Request[TResponse](IDirectedProtocolMessage requestMessage)
       at DotNetOpenAuth.OAuth.ConsumerBase.PrepareRequestUserAuthorization(Uri callback, IDictionary`2 requestParameters, IDictionary`2 redirectParameters, String& requestToken)
       at DotNetOpenAuth.OAuth.DesktopConsumer.RequestUserAuthorization(IDictionary`2 requestParameters, IDictionary`2 redirectParameters, String& requestToken)
       at APIphanySalesProject.TestLinkedIn.Main(String[] args) in c:\Users\Admin\Documents\Visual Studio 2012\Projects\Project\Project\TestLinkedIn.cs:line 34 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:42:47.067

如果您遇到与我相同的问题，请尝试检查计算机的时间设置。时间*和*时区都需要正确才能生成正确的时间戳，这是我的程序的问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T11:09:47.940

[当您在https://www.linkedin.com/secure/developer](https://www.linkedin.com/secure/developer)上注册您的应用程序时，我在使用 Linkedin API 时遇到了同样的错误，请确保在生成 OAuth 密钥时单击撤消，这将删除 OAuth 用户令牌和用户密码和一旦通过您的应用程序进行调用，它将动态创建新的 OAuth 令牌。阅读以下文档以了解更多信息 [https://developer.linkedin.com/documents/authentication](https://developer.linkedin.com/documents/authentication) 有关详细步骤，请遵循 [http://infinityexist.wordpress.com/2014/08/25/solution-for-400-bad-request- of-access-token-in-linkedin-api/](http://infinityexist.wordpress.com/2014/08/25/solution-for-400-bad-request-of-access-token-in-linkedin-api/)

# java - 突出显示的文本存储在哪里？

> ID：14121255
> 
> 赞同：1
> 
> 时间：2013-01-02T11:29:37.250
> 
> 标签：java, clipboard

我需要制作一个复制突出显示的文本的应用程序。

我试过这个程序

```
String myString = "This text will be copied into clipboard when running this code!";
StringSelection stringSelection = new StringSelection (myString);
Clipboard clpbrd = Toolkit.getDefaultToolkit ().getSystemClipboard ();
clpbrd.setContents (stringSelection, null); 
```

但这会复制剪贴板中已经存在的文本，它会在我们突出显示文本并点击复制选项后从剪贴板打印文本

我想知道在我们简单地通过突出显示选择一个文本之后，它存储在哪里，我如何直接访问这个突出显示的文本而不通过操作系统的复制选项物理复制它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:58:43.490

您可以使用 收听选择更改[`CaretListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/caretlistener.html)。然后您可以使用[`#getSelectedText()`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/text/JTextComponent.html#getSelectedText%28%29).

这是一个简单的例子`TextArea`：

```
 final JTextArea textArea = new JTextArea();
    textArea.addCaretListener(new CaretListener() {
        @Override
        public void caretUpdate(CaretEvent e) {
            String selectedText = textArea.getSelectedText();
            // do something with it...
        }
    }); 
```

# html - 如何使用风格化的谷歌地图？

> ID：14121256
> 
> 赞同：-1
> 
> 时间：2013-01-02T11:29:43.337
> 
> 标签：html, google-maps, google-maps-api-3

我对使用 Google Maps API 很陌生，但我无法让它工作。

我想要这样的效果[http://labfiftyfive.com/](http://labfiftyfive.com/)大约在底部附近他们有一张地图，它是红色的，带有制造商。这就是我想要的效果。

我已经进入了代码并得到了他们使用的东西，比如谷歌 API [https://maps.googleapis.com/maps/api/js?sensor=false](https://maps.googleapis.com/maps/api/js?sensor=false)然后是 Jscript（下面），然后我把它放进了我的网站，但没有成功。

```
var MY_MAPTYPE_ID = 'lab55';
var map;
var theLab = new google.maps.LatLng(-32.055658, 115.747989);

    var mapOptions = {
        zoom: 15,
        center: theLab,
  disableDefaultUI: true,
  zoomControl: true,
  scrollwheel: false,
        mapTypeControlOptions: {
            mapTypeIds: [google.maps.MapTypeId.ROADMAP, MY_MAPTYPE_ID]
        },
        mapTypeId: MY_MAPTYPE_ID
    };

    var stylez = [
        {
            featureType: 'all',
            elementType: 'all',
            stylers: [
                { hue: '#C1272D' },
                { saturation: 40 },
                { lightness: 40 }
            ]
        }
    ];

    var image = 'img/marker.png';

    map = new google.maps.Map(document.getElementById('google-maps'), mapOptions);

    map.setOptions({styles: stylez});

    var lab55MapType = new google.maps.StyledMapType(stylez);

map.mapTypes.set(MY_MAPTYPE_ID, lab55MapType);

var markerIcon = new google.maps.MarkerImage(
  image,
  null,
  null,
  null,
  new google.maps.Size(25, 34)
);
    var labMarker = new google.maps.Marker({ 
    position: theLab,
    map: map,
    icon: markerIcon
});

var infowindow = new google.maps.InfoWindow({
    content: "26/36 South Tce<br />Fremantle, 6160"
});
google.maps.event.addListener(labMarker, 'click', function() {
  infowindow.open(map,labMarker);
}); 
```

我浏览了 Google 上的所有文档，但没有成功。

所以我的问题是，有没有人知道任何谷歌教程可以做到这一点？或可能有帮助的提示？

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:53:06.700

只需使用该代码（将元素 ID 更改为我在 HTML 中使用的那个）就可[以为我工作](http://www.geocodezip.com/v3_SO_simpleMap_styledMap_lab55.html)。我的猜测是您的代码中的其他地方有问题（例如地图 div 大小为零）。

# bash - 过滤管道而不丢失全部内容

> ID：14121264
> 
> 赞同：0
> 
> 时间：2013-01-02T11:30:28.857
> 
> 标签：bash, awk, grep, sh

标题可能含糊不清，但我有一个很好的例子：

```
echo "Test message:\nThis is a line.\nAnd this is another." | nail -s "`tail -1`" joe@localhost 
```

这里的目标是将回显的内容作为消息正文发送，并使用最后一行作为主题。然而，当我这样做时，我失去了身体。

```
echo "Test message:\nThis is a line.\nAnd this is another." | nail joe@localhost 
```

工作正常，但没有主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:57:51.797

您可以使用命名管道来执行此操作，这适用于：

```
mkfifo subj.fifo

echo "Test message:\nThis is a line.\nAnd this is another." |
  tee >(tail -n1 > subj.fifo) | mail -s "$(< subj.fifo)" joe@localhost

rm subj.fifo 
```

请注意，如果您使用 head 而不是 tail，则需要发出`tee`忽略`SIGPIPE`信号，例如`trap '' PIPE`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:00:53.360

由于您的主题出现在最后一行，因此您必须缓冲所有行（否则，无法确定哪一行是最后一行）。将主题放在第一行会容易得多。任何。这是一种可能的方法，使用`mapfile`bash 4.0 中出现的方法：

```
printf "%s\n" "Line one in the body of message" "Line two in the body of message" "Subject in the last line" | {
    mapfile -t array
    nail -s "${array[@]: -1}" joe@localhost < <(printf "%s\n" "${array[@]:0:${#array[@]}-1}")
} 
```

如果您决定将主题放在第一行，那会容易得多（当然，只是一个管道，除了主题之外没有多余的子壳或缓冲）：

```
printf "%s\n" "Subject in the first line" "Line one in the body of message" "Line two in the body of message"  | { read -r subject; nail -s "$subject" joe@localhost; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T11:41:01.740

`tail`丢弃最后一行之前的行。您可以使用临时文件，或者将主题放在第一位而不是最后一位。无论哪种方式，如果没有合作程序 la ，管道就无法同时消耗和保持一条线`tee`。

```
#!/bin/sh
# use first line as subject, args are recipients
# stdin is message body
read subj
( echo "$subj"; cat ) | nail -s "$subj" "$@" 
```

# sql - 在 CASE 语句中使用 OR 的 Sql

> ID：14121265
> 
> 赞同：2
> 
> 时间：2013-01-02T11:30:30.133
> 
> 标签：sql, select, case, conditional-statements

我需要检查一个以元音开头的单词并相应地写“an”或“a”。

我可以去写：

```
CASE substring(word, 1, 1) when 'a' then write an when 'i' write an 
```

等等。

有人有更简单的方法吗？直接说是`a`, `i`, `o`,`u`还是`e`- 写 'an' 否则写 'a'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:33:41.913

```
CASE WHEN substring(word, 1, 1) IN ('a', 'e', 'i', 'o', 'u')
         THEN 'an'
  -- WHEN 

END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:07:28.230

```
(CASE WHEN left(word, 1) IN ('a', 'e', 'i', 'o', 'u')  THEN 'an' ELSE 'a' END) 
```

# asp.net - 我们如何自动刷新不是默认页面的页面

> ID：14121271
> 
> 赞同：1
> 
> 时间：2013-01-02T11:30:57.047
> 
> 标签：asp.net

我们如何自动刷新不是默认页面的页面？

假设我有一个站点，当在站点中添加任何产品（页面-“New_News”）时，我想在其中向所有订阅的电子邮件 ID 发送邮件。现在的问题是我的默认页面是主页，我该如何设置自动刷新到该特定页面，即“New_News”。

我对此进行了很多搜索，但我发现的每个结果都是在 page_load 上刷新的，而不是网站的单个页面。

如果有人有想法，请与我分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:23:27.270

我已经解决了这个问题。唯一的方法是为特定时间创建窗口服务和点击页面。下面是创建窗口服务的精彩链接，对我有很大帮助：

[http://www.aspdotnet-suresh.com/2011/06/creating-windows-service-in-c-or.html](http://www.aspdotnet-suresh.com/2011/06/creating-windows-service-in-c-or.html)

# r - 比较R中不同长度的两个向量

> ID：14121273
> 
> 赞同：7
> 
> 时间：2013-01-02T11:31:00.887
> 
> 标签：r, vector, merge

我一直在努力解决这个问题，并决定在一些失败后寻求帮助..

这是我的问题，我想根据日期划分这两个向量，例如 2012-12-11 将是 3/17，而 2012-12-12 应该是 0/7。但是我似乎无法弄清楚如何做到这一点..

```
> ili

2012-12-11 2012-12-13 2012-12-14 2012-12-17 
     3          6          7          1 
> no.ili

2012-12-11 2012-12-12 2012-12-13 2012-12-14 2012-12-15 2012-12-16 2012-12-17 
    17          7        232        322         38         21         36 
```

最后一次尝试是循环两个向量并将值或零添加到新向量但是当我使用`%in%`它时不会将值按顺序排列（显然）但是如果我使用`==`它也不起作用..

```
 days.ili <- unique(one.three$timestamp)
 days <- unique(one.week$timestamp)
 ili.vec <- rep(0, length(days))

 for (i in 1:length(days)) {
     if (days.ili[i] %in% days) {
         ili.vec[i] <- ili[i]
     } else {
         ili.vec[i] <- 0
     }
 } 
```

我一定是忘记了一些事情，因为我无法看透这个问题。任何人都可以告诉我在 R 中实现这一目标的最佳方法吗？

也许一个选项将使用`merge`..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T11:59:18.990

像这样的东西：

```
res <- rep(0, length(no.ili))
where <- match( names(ili), names(no.ili) )
res[ where ] <- ili / no.ili[where]
names(res) <- names(no.ili)
res
# 2012-12-11 2012-12-12 2012-12-13 2012-12-14 2012-12-15 2012-12-16 2012-12-17 
# 0.17647059 0.00000000 0.02586207 0.02173913 0.00000000 0.00000000 0.02777778 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T12:04:29.400

Romain 的解决方案更清洁，但假设`no.ili`总是更长..

```
ili <- 
    c( 3 , 6 , 7 , 1 )
names( ili ) <- 
    as.Date( c( '2012-12-11' , '2012-12-13' , '2012-12-14' , '2012-12-17' ) )

no.ili <- 
    c( 17 , 7 , 232 , 322 , 38 , 21 , 36 )
names( no.ili ) <- 
    as.Date( c( '2012-12-11' , '2012-12-12' , '2012-12-13' , '2012-12-14' , '2012-12-15' , '2012-12-16' , '2012-12-17' ) )

ili.df <- data.frame( ili )
ili.df$Date <- rownames( ili.df )

no.ili.df <- data.frame( no.ili )
no.ili.df$Date <- rownames( no.ili.df )

x <- merge( ili.df , no.ili.df , all = TRUE )

x[ is.na( x ) ] <- 0

result <- x$ili / x$no.ili

names( result ) <- x$Date

result 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T11:58:37.597

是的，合并是一种可能的解决方案。诀窍是，将 ili/no.ili 数据帧及其列名作为附加变量（即长格式）重述。然后使用将所有参数设置为 TRUE 的合并：

```
ili2 <- data.frame(date=colnames(ili),                                                                                                                
                   ili=as.numeric(ili[1,]),                                                                                                           
                   stringsAsFactors=FALSE)                                                                                                            
no.ili2 <- data.frame(date=colnames(no.ili),                                                                                                          
                      no.ili=as.numeric(no.ili[1,]),                                                                                                  
                      stringsAsFactors=FALSE)                                                                                                         

tmp <- merge(ili2, no.ili2, all=TRUE) 
```

然后执行您要求的除法（并且我最初已经过读），首先将缺失值设置为 0，然后除法：

```
tmp[is.na(tmp[,"ili"]),"ili"] <- 0                                                                                                                    
tmp[is.na(tmp[,"no.ili"]),"no.ili"] <- 0                                                                                                              

res <- tmp[,"ili"]/tmp[,"no.ili"] 
```

# c++ - 在 C++ 中从 XML 调用函数

> ID：14121274
> 
> 赞同：0
> 
> 时间：2013-01-02T11:31:03.670
> 
> 标签：c++, xml, parsing, events, signals

我打算将 XML 解析添加到我正在处理的项目中。这将需要允许软件不仅可以加载和保存设置，还需要在需要时调用函数。

我可以看到加载和保存设置不是问题，但是，需要触发的异步事件可能有点棘手。

应用程序将被远程驱动，并且需要触发事件，例如开始播放。这应该使用 XML 来完成。

我可以看到的一种方法如下所示。对于每个元素，XML 将包含设置和信号。对于加载和保存，不需要信号，只需要设置。但是，如果需要调用信号，则其值将设置为 1，并且时钟将被切换。

```
<SomeElement>
  <Settings>
    <setting1 value="1"/>
    <setting2 value="2"/>
  </Settings>
  <Signals>
    <clock value="0"/>
    <Signal1 value="1"/>
  </Signals>
</SomeElement> 
```

这似乎是实现这一目标的合理方式，还是有一种我不知道的更简单/更好的方式。

我目前计划使用 pugixml 作为 XML 解析器，但是，我很可能会围绕它编写一个包装器。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:38:32.763

首先：您上面提供的“XML”不是真正有效的 XML，除非您的设置和信号被视为纯文本。否则你必须使用类似的东西：

```
<Settings>
    <setting name="setting1" value="1" />
    <setting name="setting2" vakue="2" />
</Settings> 
```

此外，如果您要求以特定顺序读取 XML 文件的元素，那么您不是在谈论 XML，而是在谈论类似于 XML 的纯文本 - XML 标准确实要求以与它们相同的顺序交付元素在文件中找到（仅保留级别结构）。因此，您很可能在“setting1”之前阅读“setting2”，在“clock”之前阅读“signal”。为了保持一定的顺序，您需要使用一些可以排序的“排序”属性。

我要做的是构建某种“操作列表”——要做的事情列表（设置设置或启动操作）并填充此列表以解析 XML 文件。然后，我将遍历列表并执行操作告诉我执行的操作。

但是，这绝不可以称为“在 C++ 中从 XML 调用函数”（这是不可能的，因为 XML 不是可以以程序运行的方式“运行”的东西）。

# php - 返回登录页面

> ID：14121278
> 
> 赞同：0
> 
> 时间：2013-01-02T11:31:19.967
> 
> 标签：php, codeigniter

登录后，我将用户重定向到论坛控制器，但不知何故它执行了构造函数，但没有进入`index()`功能。当我尝试退出（“第 7 行”）时它停止执行，但是当我尝试退出索引时它不会

```
<?php
class Forum extends CI_Controller
{
    public function __construct() {
        parent::__construct();
        $this->load->model('ForumModel');   
            //exit("line 7");
    }
    function index()
    {
        exit("line9");
        //print_r($this->session->userdata); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:54:17.577

经过整整一周的努力，我得到了答案-

会话值正在被 codeigniter 破坏。

默认情况下，CodeIgniter 将会话数据存储在 cookie 中，大小上限为 2KB-4KB，具体取决于浏览器。如果您尝试在会话中存储超过 4KB 的数据，您将开始遇到问题。

所以我选择将会话值存储在数据库中。

更多详情：http: [//goo.gl/YPllj0](http://goo.gl/YPllj0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:35:45.933

您正在被重定向`ForumModel`，或者尝试`parent::__construct(TRUE);`您的会话未生成或可能无法正常工作。我希望这有帮助。如果您有会话问题，请查看正在打印的会话是什么。

```
print_r($this->session->userdata); 
```

这将打印所有会话数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:38:09.283

如果您使用没有任何函数名称的 url 访问控制器，CodeIgniter 总是执行索引函数。所以请检查您要重定向的 URL，如果一切正常，然后通过注释所有其他代码行来测试真正调用的索引函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:49:09.413

在这里，您的模型不会让控件跳转到 index() 方法。请检查您的模型（调用 Forum 类时，它的构造函数和堆栈中的所有其他函数）。可能有一些命令没有得到满足并允许执行继续。请检查模型和与之关联的资源。谢谢

# jsp - 如何从jsp的下拉列表中获取选定的值？

> ID：14121295
> 
> 赞同：14
> 
> 时间：2013-01-02T11:32:20.903
> 
> 标签：jsp

```
<select name="item">
<c:forEach items="${combo}" var="id">
    <option value="${id}">${id}</option>
</c:forEach>
</select> 
```

我们如何从上面的下拉列表中获取选定的值？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-07-10T02:24:59.080

我知道这是一个老问题，但当我在谷歌搜索时，它是结果中的第一个链接。所以这里是jsp解决方案：

```
<form action="some.jsp">
  <select name="item">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
  </select>
  <input type="submit" value="Submit">
</form> 
```

在一些.jsp

```
request.getParameter("item"); 
```

此行将返回所选选项（从示例中为：1、2 或 3）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-03T05:52:42.597

使用 jQuery

```
$("#item").change(function({
    var x=$(this).val();
}); 
```

您的值将在`x`变量中，在您的 jsp 中使用此变量值，就像这样，`{x}`此语句将给出值

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T11:35:14.280

直接`value`应该可以正常工作：

```
var sel = document.getElementsByName('item');
var sv = sel.value;
alert(sv); 
```

您的代码可能失败的唯一原因是没有选择任何项目，然后`selectedIndex`返回 -1 并且代码中断。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-03T14:16:55.617

```
 <%-- if you want to select value from drop-downlist here is jsp code. --%>
    <body>
    <form name="f1" method="get" action="#">
       <select name="clr">
           <option>Red</option>
           <option>Blue</option>   
           <option>Green</option>
           <option>Pink</option>
       </select>
     <input type="submit" name="submit" value="Select Color"/>
    </form>
    <%-- To display selected value from dropdown list. --%>
     <% 
                String s=request.getParameter("clr");
                if (s !=null)
                {
                    out.println("Selected Color is : "+s);
                }
      %>
</body> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-30T05:38:00.997

我还有一个额外的选择来获得价值`id`：

```
var idElement = document.getElementById("idName");
var selectedValue = idElement.options[idElement.selectedIndex].value; 
```

这是一个简单的`JavaScript`解决方案。

# c++ - 在 C++ 中的多重继承的情况下，类型转换为接口（抽象类）

> ID：14121297
> 
> 赞同：-3
> 
> 时间：2013-01-02T11:32:34.580
> 
> 标签：c++, oop, design-patterns, abstract-class, multiple-inheritance

```
class Widget{ .. }  // Widget Class

class Interface { // pure virtual functions .. } // Interface class (Abstract Class)

class WidgetType1 : public Widget, public Interface { ... } // Type 1 Widget (ComboBox) inherits widget and Interface
class WidgetType2 : public Widget, public Interface { ... } // Type 2 Widget (LineEdit) inherits widget and Interface

Widget* widget = getWidget(...);
Interface* interface = dynamic_cast<Interface*> (widget); // Convert Widget to Interface 
```

我应该做什么访问 Widget 对象上的接口方法（基本上是 WidgetType 1/2）

我无法键入 Widget 指针引用的 WidgetType1 的转换对象

![设计形象](../Images/e43ae4041ca6612bffddf348854165ee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:58:41.123

我正在将我的评论变成一个答案：我的猜测是你得到一个编译器错误，因为你忘记在`dynamic_cast`:中添加括号

```
Interface* interface = dynamic_cast<Interface*>(widget) 
```

为了`dynamic_cast`在运行时正常工作，您需要使用 RTTI 编译您的项目（运行时类型信息，[链接到 Wikipedia 文章](http://en.wikipedia.org/wiki/Run-time_type_information)）。我可能弄错了，但我相信编译器默认启用 RTTI，所以你应该知道你是否禁用了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:06:28.037

这只是一个猜测，因为您没有向我们展示错误的实现`class Widget`或描述错误的性质。

```
class Widget{ ... };  // Widget Class
...
Interface* interface = dynamic_cast<Interface*> (widget); 
```

请注意，我在类规范的末尾添加了一个缺少的分号。仅此一项就可能是您的问题的原因。

另一种可能性：您对类的评论`Interface`特别表明为该类定义了虚拟方法。您对课程的评论`Widget`没有说明任何问题。`Widget`不是多态类，您没有为该类定义任何虚拟方法。唯一可以将指向非多态类的指针动态转换为父类指针。`Interface`不是 的父类，如果没有任何虚方法`Widget`，则创建动态类是非法的。`Widget`

# php - 使用相同内容的多个域

> ID：14121300
> 
> 赞同：0
> 
> 时间：2013-01-02T11:32:43.973
> 
> 标签：php, apache, .htaccess

我有一个使用主域 (domain.com) 的应用程序，我希望能够将其他域指向相同的内容，而无需维护单独的代码实例。该应用程序包含在主域上的一个文件夹中，搜索引擎等无法访问此文件夹，因此我不担心 SEO 等。所有域都将位于运行 Apache 的同一台服务器上。

我想确保域名保持用户最初输入的状态，而不是重定向到 domain.com，因为这样做的目的是让多个客户可以使用代码，但应用程序使用他们的颜色、徽标等标记给他们使用从 MySQL 数据库中获取的设置。

例如，用户访问 newdomain.com，他们会看到一个登录表单，该表单是存储在 /home/newdomain/public_html 中的本地登录表单 - 成功登录后，他们将被定向到包含应用程序的 /folder，而不是被定向到 newdomain。 com/folder 是空的 我希望他们被重定向到 domain.com/folder（即 /home/domain/public_html/folder），但仍然在他们的浏览器中看到 newdomain.com/folder，所以它对他们是透明的。

我使用 htaccess 尝试了以下[https://stackoverflow.com/a/9521102/1278201](https://stackoverflow.com/a/9521102/1278201)，但它将 URL 更改为 domain.com：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^(www\.)?domain\.com$ [NC]
RewriteRule ^ http://www.domain.com/%{REQUEST_URI} [R=301,L] 
```

我还发现了一篇提到使用 Apache 配置的帖子，这似乎是一个更好的选择，因为我不关心 SEO，但不确定我是否可以使用它来仅重定向一个文件夹（即不重定向 webroot，只重定向/文件夹）[https ://stackoverflow.com/a/3849129/1278201](https://stackoverflow.com/a/3849129/1278201)：

```
NameVirtualHost *

<VirtualHost *>
ServerName domain.com
DocumentRoot /home/domain/public_html/folder
</VirtualHost>

<VirtualHost *>
ServerName newdomain.com
DocumentRoot /home/domain/public_html/folder
</VirtualHost> 
```

我还发现一些帖子指出了会话和 SSL 证书[https://stackoverflow.com/a/140008/1278201](https://stackoverflow.com/a/140008/1278201)可能存在的问题，这两者都在应用程序中使用。我很高兴为每个域安装单独的 SSL 证书，但上述任何一个都可以重定向“中断”会话吗？如果有人登录到 newdomain.com/folder 然后转到 domain.com/folder 他们将需要再次登录，但是 domain.com/folder 重定向到 newdomain.com/folder 的事实是否会对会话安全产生影响？ ?

实现预期结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:39:19.087

您可以使用**'P'**（代表 proxypass）作为标志而不是 'R=301' ：

```
RewriteCond %{HTTP_HOST} !^(www\.)?domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [P,L] 
```

还将虚拟主机更改为单个：

```
NameVirtualHost *

<VirtualHost *>
    ServerName domain.com
    ServerAlias www.domain.com newdomain.com www.newdomain.com
    DocumentRoot /home/domain/public_html/folder
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:56:22.097

**虚拟主机配置**

上面的配置片段只是在 Apache 中设置了两个[虚拟主机。](http://httpd.apache.org/docs/2.2/en/vhosts/)它们中的每一个都指向同一个 documentRoot - 这是将成为网站根文件夹的文件夹。没有重定向。虚拟主机是正确的解决方案。

***EDIT1*** 如果您想对所有虚拟主机使用相同的文件，但有一个例外，您可以在每个虚拟主机中[使用mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)或[mod_alias重写请求](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)

例如`domain.com/favicon.ico`可以从`document_root/specific/domain.com/favicon.ico`

**SSL 证书**

除非您的客户使用子域共享域，否则每个虚拟主机都需要一个 SSL 证书。如果他们只是获得一个子域，您可以购买一个通配符证书 *.yourdomain.com

多个域的问题是，每个虚拟主机需要一个 IP 才能使用不同的 SSL 证书：[如何在 Apache 上为虚拟主机设置不同的 SSL 证书？](https://stackoverflow.com/questions/276134/how-can-i-setup-different-ssl-certificates-for-vhosts-on-apache)

**会话**

您的应用程序将需要检查域。为特定域设置了 cookie，但客户端可以通过操作 cookie 将会话“移动”到另一个域。无论如何，我认为您不想允许所有域上的所有用户，因此在凭证检查时需要进行检查。此外，您可以将域保存到会话中，并在域更改时终止会话

```
session_start();
if ( user_authorized_with_credentials_and_domain ) {
     $_SESSION['sess_domain'] = $_SERVER['HTTP_HOST'];
} 
```

在以后的请求中，您可以比较

```
if ( $_SESSION['sess_domain'] !== $_SERVER['HTTP_HOST'] ) {
    session_destroy();
    // redirect to login
} 
```

# java - 如何从java返回一个列表到JNI

> ID：14121303
> 
> 赞同：1
> 
> 时间：2013-01-02T11:32:52.990
> 
> 标签：java, java-native-interface

> **可能重复：将**
> [字符串从 Java 传递到 JNI](https://stackoverflow.com/questions/4247002/passing-string-from-java-into-jni)
> [将字符串数组从 Java 传递到 C 与 JNI](https://stackoverflow.com/questions/5972207/passing-string-array-from-java-to-c-with-jni)

我需要将列表**List < String >**从 java 返回到 jni。我应该怎么做，我还需要将返回的值转换为JNI 端**的 std::string 数组。**谁能告诉我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:42:11.867

Java 和 C 之间的数据交换可以仅使用原始类型来执行。所以通过JNI是不可能的。替代方案可能是[SWIG](http://www.swig.org/)或[JavaCpp](http://code.google.com/p/javacpp/)。

# php - 表格 $_POST 无法访问 SWF

> ID：14121304
> 
> 赞同：1
> 
> 时间：2013-01-02T11:32:54.253
> 
> 标签：php, flash

我有一个用 SWFObject 文件管理的 swf，它在其他页面上发送`$_POST`数据。当我尝试输入`print_r($_POST)`or`$_GET`时，php 返回我`Array()`。但是在检查员 chrome 上，`$_POST`都在这里。

```
"Form data" : 
onData:[type Function]
__app_key:be86b85e5b
code:b1512Xs05015s09153s09018s04144
groupId:8954 
```

`$_POST`数据已发送，但我无法使用它们。

# php - PHP函数到MySQL函数

> ID：14121313
> 
> 赞同：0
> 
> 时间：2013-01-02T11:33:30.837
> 
> 标签：php, mysql

有人可以告诉我如何将这个函数重写为 MySQL 函数以便能够直接在 MySQL 上进行解码吗？

```
const CHAR_MAP = 'abcdefghijklmnopqrstuvwxz0123456789';

function decode($encoded) {
    $elen = strlen($encoded);
    $cmlen = strlen(Mobile::CHAR_MAP);
    $offset = strpos(Mobile::CHAR_MAP, substr($encoded, 0, 1), 1);

    $decoded = '';
    $check = 0;
    for ($i=1;$i<$elen-1;$i++) {
        $a = strpos(Mobile::CHAR_MAP, substr($encoded, $i, 1), 1);
        $x = $a - $offset * $i;

        $x %= $cmlen;

        if ($x < 0) {
            $x = $cmlen + $x;
        }

        $decoded .= $x;

        $check += $x;

    }

    return $decoded;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:24:15.833

好吧，根据我更好的判断，我已经为您编写了一个快速 SQL 函数。

我应该注意到，SO 并不是一个人们为你写完整答案的网站，而是你学习如何为自己写答案的地方。但是，在这种情况下，如果不给出答案，我就看不到如何教学，所以就在这里。

但请注意：我根本没有测试过*这个*。我直接将它输入到 SO 答案框中，它并没有靠近实际的 mySQL 服务器。如果它不起作用（很有可能），请在寻求任何进一步的帮助之前尝试自己修复它（并将其视为帮助您了解它如何工作的答案的一部分）。

另请注意，我假设我在评论中关于您的原始 PHP 函数存在错误的猜测是准确的。该 SQL 函数对字符串进行字符移位操作；它不会输出一串无用的数字。

```
delimiter ||
DROP FUNCTION IF EXISTS mydecode||
CREATE FUNCTION mydecode( x longtext) RETURNS longtext
LANGUAGE SQL NOT DETERMINISTIC READS SQL DATA 
BEGIN
DECLARE len INT UNSIGNED;
DECLARE cpos INT UNSIGNED;
DECLARE output LONGTEXT;
DECLARE charmap LONGTEXT;
DECLARE cshift VARCHAR(1);
DECLARE thischar VARCHAR(1);
DECLARE thischarpos INT UNSIGNED;

SET charmap = 'abcdefghijklmnopqrstuvwxz0123456789abcdefghijklmnopqrstuvwxz0123456789';
SET len = LENGTH(x);
SET cpos = 1;
SET cshift = POSITION(SUBSTRING(x,len,1) IN charmap);

REPEAT
  SET thischar = SUBSTRING(x,cpos,1);
  SET thischarpos = POSITION(thischar IN charmap) + 35;
  SET output = CONCAT_WS(output,SUBSTRING(charmap,thischarpos-cshift,1));
  SET cpos = cpos + 1;
  UNTIL cpos >= len END REPEAT;
return output;
END;
|| 
```

我将重申我在评论中关于这是一个微不足道的操作的另一点。像这样简单的字符移位操作真的没用。没有任何场景我能想到它们是一个好主意。特别不安全。

如果这个“编码器”被用于任何你认为是安全的一部分，那么你就有一个非常严重的问题。

# iphone - 在 uitextfield 中滑动

> ID：14121317
> 
> 赞同：3
> 
> 时间：2013-01-02T11:33:40.243
> 
> 标签：iphone, objective-c, ios, uitextfield

我的文本超过了`UITextField`. 文本被截断，并在文本末尾添加点。`EditText`如果文本字段中的文本大于宽度，我如何实现（在 Android 中）我们可以在文本字段中滑动而不减小字体大小的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:59:38.433

如果您的文本字段不可编辑，那么最好在 UIScrollView 中使用 UILabel。

1.  设置标签的宽度等于文本大小，保持高度不变。
2.  设置滚动视图的内容大小等于标签的大小。

希望这会奏效。

如果您需要代码示例，我可以提供。

# mysql - 切换到 mysqli 并需要一种新方法来获取永久链接

> ID：14121326
> 
> 赞同：0
> 
> 时间：2013-01-02T11:33:52.957
> 
> 标签：mysql, mysqli, permalinks

我刚刚从 MySQL 切换到 MySQLi，我想知道，在什么时候我会让我的博客只显示某个 postid，具体取决于 URL 中的内容，例如：localhost:8080/blogzone.php?blogid=3 然后是我的第三个博客 ID 将通过使用永久链接显示。我正在使用一个简单的 isset 方法来检查 id 是否被捕获，通过使用 GET。但我告诉 GET 方法不再安全，不应该使用。

我现在如何使用 MySQLi 来解决这个问题？

我也不是在寻找一个直截了当的答案，非常感谢文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:51:58.317

要么你误解了某人，要么他们说的完全是垃圾。
GET方法没问题。从安全的角度来看，HTTP 方法是无关紧要的。无论您选择哪种方法，您**都**必须与用户方进行交互。然而，每一种从外部获取数据的方法在设计上都是不安全的。

您唯一需要考虑的是该方法的目的：

*   POST方法更改数据
*   GET方法显示数据

根据这条规则，你以前的方法是完全正确的，坚持下去。

至于 mysql 部分 - 它也与安全性无关。您必须正确格式化要查询的数据。尽管有任何条件，例如数据源、含义或目的。如果您始终保持格式正确 - 将没有注入的机会。简而言之，只要您在查询中使用参数 - 它们也是非常安全的。

# javascript - Javascript：将“this”作为“dom”对象传递，而不是将“this”作为“this”函数传递

> ID：14121333
> 
> 赞同：1
> 
> 时间：2013-01-02T11:34:14.960
> 
> 标签：javascript, jquery

这可能很难解释这一点。让我们看看这个：

```
<a onclick="jsFunction (1, 'a', function() { callback(this); }"></a> 
```

回调需要知道`<a>`这个调用来自哪里。但是这个“这个”并不是我想要的那个“这个”。有一个小解决方法，我知道：

```
<a onclick="var _this = this; jsFunction (1, 'a', function() { callback(_this); }"></a> 
```

但我觉得很不幸。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:36:00.390

[您可以使用bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)做一些不那么尴尬的事情，但不会太多：

```
<a onclick="jsFunction (1, 'a', (function(){callback(this);}).bind(this))"></a> 
```

这是通常最好不要在 HTML 中内联 javascript 代码的众多原因之一。

我通常更喜欢这样写：

```
<a id=someid></a>

<script>
    $('#someid').click(function(){
        var _this=this;
        jsFunction (1, 'a', function() { callback(_this); });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:35:33.913

我不知道您所说的“不幸”是什么意思，但这是一种完全有效且常见的做法。

另一种方法是使用`bind`方法：

```
function() { /* use this as usual here */ }.bind(this); 
```

如果您想支持古老的浏览器，则必须为此使用其中一个“polyfills”（可从您的友好社区 Google 获得）

此外，请考虑不要将代码放入 HTML 中。它很快变得混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:39:24.200

当您进入真正的基于 OO 的语言（如 Java）的世界时，您会看到通过多态等不同的方式执行此操作，但即使在大多数情况下，您也完全按照您所做的那样，在更改为函数范围之前分配“this”。

“this”是我认为基于范围的关键字，因此分配像 objHandel=this 或类似的东西很好，因为它很有意义。“这个”会根据您所在的位置而变化。

无论哪种方式，我认为您的代码仍然有效且良好......如果您可以使用脚本语言，那么我认为您到目前为止非常幸运：p

~ 丹

# java - GWT 隐藏框架

> ID：14121337
> 
> 赞同：1
> 
> 时间：2013-01-02T11:34:52.333
> 
> 标签：java, gwt, hide, frame

我有一个框架面板

```
Frame frameExample = new Frame(); 
```

我点击它时需要隐藏框架，我知道方法`setvisible`

```
frameExample.setVisible(false); 
```

但是如何`onclick`在 gwt 的框架上添加处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:40:00.793

要在 Frame 上添加已知 DOM 事件的处理程序，您应该使用 addDomHandler api。Frame 从 Widget 扩展而来，并且 widget 具有 addDomHandler api。

也来自 addDomHandler java doc

```
 /**
   * Adds a native event handler to the widget and sinks the corresponding
   * native event. If you do not want to sink the native event, use the generic
   * addHandler method instead.
   */ 
```

但是我不确定 Frame 是否支持 Click 事件。对类似 javascript 问题的快速 stackoveflow 搜索提供了[Detect Click into Iframe using JavaScript](https://stackoverflow.com/questions/2381336/detect-click-into-iframe-using-javascript)。

# google-maps - 我不想点击“通过”信息框

> ID：14121342
> 
> 赞同：2
> 
> 时间：2013-01-02T11:35:15.843
> 
> 标签：google-maps, mobile, infobox

我目前在使用 Google 地图上的自定义信息框的 google-maps-utility-library 插件时遇到问题。我可以成功地创建一个我想要的自定义形状的信息框。但在移动设备上（在 Galaxy S2 和 iPad 上测试）我可以点击 infoBox。这很烦人，因为当一个人触摸信息框的关闭按钮并在关闭按钮下方有一个标记信息框时立即打开另一个标记信息框时也会发生这种情况（在我的地图上经常发生）。

有谁知道如何解决这个问题？我的第一个想法是它与 enableEventPropagation 标志有关，但禁用事件传播似乎对移动设备没有影响（我需要其他事件的事件）。

提前感谢您花时间阅读和回答:)

# c# - DateTime.Kind 未在 WCF 中返回

> ID：14121343
> 
> 赞同：5
> 
> 时间：2013-01-02T11:35:27.560
> 
> 标签：c#, .net, wcf, datetime

`DateTime`使用 WCF处理对象时，返回`DateTime`的对象缺少该属性，即使我在返回之前手动更改它`Kind`也会始终如此！`DateTimeKind.Unspecified`

我在 WCF 方面做到了这一点：

```
dateFrom = DateTime.SpecifyKind(dateFrom , DateTimeKind.Utc); 
```

仍然，它被发送`DateTimeKind.Unspecified`给客户......

客户端是 WinForm 应用程序，服务器是托管在 IIS 中的 WCF。

PS我知道这种`DateTime.ToUniversalTime()`方法，但这不是我需要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:07:58.170

您可以在这个问题中找到解决方案：

[DateTime 和 xsd:date 的往返 XML 序列化？](https://stackoverflow.com/questions/1297506/roundtrip-xml-serialization-of-datetime-and-xsddate)

> 处理日期、时间和日期时间值有不同的行为。对于 DateTime 值，如果 XmlDateTimeSerializationMode 不是 Local，则保留有关种类（UTC、Local 或 Unspecified）的信息。在反序列化时也是如此。但是，对于日期和时间，它们总是以相同的格式序列化：（yyyy-MM-dd 表示日期，HH:mm:ss.fffffff.zzzzzz 表示时间）。所以关于 kind 的信息在序列化和反序列化时会丢失。

# vb.net - 什么都不转换成值类型：不同的行为取决于间接的数量

> ID：14121345
> 
> 赞同：3
> 
> 时间：2013-01-02T11:35:31.850
> 
> 标签：vb.net, types, casting, directcast

在 VB 中，我对`DirectCast`值类型 ( `double`, `int`, ...) 有不同的行为，具体取决于间接数

```
DirectCast(nothing, Double)
return 0 
```

但是，如果我尝试将诸如矩阵元素等于无的东西强制转换，则会出现异常

```
Dim pArray as Object() = { nothing, 1.5, 2.27, -3.0}
DirectCast(pArray(1), Double)  'work with no issue
DirectCast(pArray(0), Double)  'Exception : Cannot convert to double 
```

以同样的方式：

```
Dim TestCasting as object = nothing
Directcast(TestCasting, double) 'Exception : Cannot convert to double 
```

我怎样才能使工作方式与工作方式`DirectCast`相同？`pArray(0)``DirectCast(nothing, double)`

* * *

我的帖子是一个突出问题的示例，而无需担心其余代码。

要激动。这是一个可能引起一些问题的例子。让我们看一个随机表（没有主键或任何东西，但没关系）：

```
TABLE [dbo].[IDENTIFICATION] (
    [USER_ID]        INT            IDENTITY (1, 1) NOT NULL,
    [PASSWORD]       NVARCHAR(50)   NULL,
    [EXPIRATION_D]   DATETIME       NOT NULL,
    [LAYOUT]         INT            NULL,
); 
```

现在，我有一个返回 Object(,) 的方法

```
Dim pArray as Object(,)  = myconnection.GetSqlRequest("Select USER_ID, PASSWORD, EXPIRATION_D, LAYOUT from IDENTIFICATION where USER_ID = 3") 
```

这可能会返回类似的内容，`{ 3, "StackOverflow", New Date(2110,01,01), nothing}` 因为布局是一个可选字段。

我可以这样做：

```
if pArray(0,3) is nothing then
   Layout = 0
Else 
   Layout = DirectCast(pArray(0,3), Double)
End if 
```

但我的目标是做：

```
Layout = DirectCast(pArray(0,3)) 
```

主要是因为我正在重构我没有编写的代码的很大一部分，而且`DirectCast(nothing, Double) return 0`除了这种情况外，它让我感到困扰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T11:45:52.167

这很简单：`Nothing`当你存储`Doubles`在数组中时不要使用，`Object()`当你真正想要存储双精度时不要使用 a。

`Double?()`等等，反正用 a 会更好。Nullables 可以用`null/Nothing`Then 初始化，你根本不需要演员表。

```
Dim pArray As Double?() = {Nothing, 1.5, 2.27, -3.0}
Dim first = pArray(0)
If first.HasValue Then
    ' No, it's a Nullable(Of Double)/Double? without a value
End If 
```

**编辑**根据您的原始问题。更好的问题是为什么这在 VB 中有效：

```
Dim d as Double = DirectCast(Nothing, Double) ' => 0.0 
```

原因：`Nothing`在 VB.Net 中相当于`default(T)`C#：给定类型的默认值是 0，对于数字类型，`Date.MinValue`对于`Date`和`Nothing`（现在在 `null`C# 中的含义）对于引用类型。

所以`DirectCast(Nothing, Double)`将被隐式转换为`Double`0。而`Object()`包含真正的对象，它是所有东西的占位符。但`Nothing`通常是任何对象的“未知”状态而不是双精度，因此`DirectCast`非常严格的状态失败。如果您将值更改为，它也会引发运行时错误`-3.0`，`-3`因为它实际上是一个`Integer`.

长话短说，

**使用`CType`而不是`DirectCast`那些转换，它会起作用。**

```
Dim obj As Object() = {Nothing, 1.0, 2}
Dim d1 = CType(obj(0), Double) ' => 0.0
Dim d2 = CType(obj(1), Double) ' => 1.0
Dim d3 = CType(obj(2), Double) ' => 2.0 
```

# jquery - 如何在 iframe 中搜索文本并获取其元素？

> ID：14121350
> 
> 赞同：1
> 
> 时间：2013-01-02T11:36:04.560
> 
> 标签：jquery

如何在 iframe 中搜索某些文本并在匹配时获取其元素或将 css 类附加到它。

我试过了：

```
$('#my_iframe').contents().find().text('my text'); 
```

但它也不起作用我已经阅读了一些带有**:contains**的文章，但我不确定如何使它适用于 iframe。

#########已编辑

甚至尝试过，但它给了我“未定义”

```
alert($('#my_iframe:contains("'+data+'")').first().tagName); 
```

**注意：** *不要告诉我如何使用 Jquery 的 find 方法，只回答我如何搜索特定文本并获取其元素的问题。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:45:06.357

use [contains](http://api.jquery.com/contains-selector/) ..it 选择包含指定文本的所有元素。

```
$('#my_iframe:contains("I am a simple string")') 
```

**更新**

如果你很想得到一个标签名，那么试试这个..

```
alert($('#my_iframe:contains("'+data+'")').first().prop("tagName")); 
```

**请注意** ，按照惯例，标签名称返回大写，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:47:13.350

请参阅[此页面](http://api.jquery.com/find/)以了解`find`.

您可以将文本包装到带有 id 的 span 或 div 中，然后对其进行操作。这是一个将 a 添加`cssClass`到 id 为 的元素的示例`container`。

> ('#my_iframe').contents().find('#container').addClass('cssClass');

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:48:23.597

```
$("#my_iframe").contents().find("#myContent"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T12:08:12.113

Atif 您可以通过以下方式在 iframe 正文中找到您的文本：

```
$('iframe').contents().find('h2').text(); 
```

你可以在这个小提琴中找到它：http: [//jsfiddle.net/vjWaH/](http://jsfiddle.net/vjWaH/)

# open-source - java中的开源mp4多路复用器

> ID：14121355
> 
> 赞同：3
> 
> 时间：2013-01-02T11:36:20.183
> 
> 标签：open-source, containers, mp4, muxer

是否有任何可用的开源 MP4 多路复用器/编写器 java 项目（用 java 编写的源代码，没有本机代码）？

我将 H.264 和 AAC 原始/基本流存储在单独的文件中。我想混合它们并获取包含音频和视频的 .mp4 视频文件。

提前感谢您的宝贵建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:13:16.407

使用[isoparser](http://code.google.com/p/mp4parser/)库，据我所知，它是唯一可以复用 AAC 和 H264 的纯 Java 工具。它还为您描述的用例提供了[一个示例。](https://mp4parser.googlecode.com/svn/trunk/examples/src/main/java/com/googlecode/mp4parser/muxformats/H264Example.java)

完全披露：我是图书馆的创建者。

```
 AACTrackImpl audio= new AACTrackImpl(new FileInputStream("sample.aac").getChannel());
 H264TrackImpl video = new H264TrackImpl(new FileInputStream("sample.h264"));
 Movie m = new Movie();
 m.addTrack(video);
 m.addTrack(audio);

 IsoFile out = new DefaultMp4Builder().build(m);
 FileOutputStream fos = new FileOutputStream(new File("output.mp4"));
 out.getBox(fos.getChannel());
 fos.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T17:57:36.327

来自[isoparser](http://code.google.com/p/mp4parser/)的先前示例无法使用最新源编译。我正在使用以下代码将行 h264（来自 android MediaCodec）复用到 .mp4 容器中

```
 H264TrackImpl video;
    try {
        video = new H264TrackImpl(new FileDataSourceImpl("/home/aod/tmp/rec_1392309584754.h264"), "eng", 9, 1);
        Movie m = new Movie();
        m.addTrack(video);

        BasicContainer out = (BasicContainer) new DefaultMp4Builder().build(m);
        FileOutputStream fos = new FileOutputStream(new File("/home/aod/tmp/output.mp4"));
        out.writeContainer(fos.getChannel());
        fos.flush();                        
        fos.close();
    } catch ( IOException e) {
        e.printStackTrace();
    } 
```

# css - 样式 h:selectOneListbox

> ID：14121356
> 
> 赞同：0
> 
> 时间：2013-01-02T11:36:26.697
> 
> 标签：css, jsf

我对样式有疑问，`h:selectOneListbox`非常感谢一些建议。

在 bean 中，我有一个循环，其中从文件中读取值和标签并使用`h:selectOneListbox`. 大部分条目显示正常并且可以选择，但有几个条目显示但被禁用。这是 bean 中的一段代码，其中初始化了条目，并设置了一个标志来指定是否禁用给定条目。

```
// private method for initialization

// Initialization code

SelectItem item = new SelectItem();
for (i=0; i<numEls[set]; i++) {
    item = null;
    if (itemLabels[set][i].contains(disabledLabel))
        item = new SelectItem(itemValues[set][i], itemLabels[set][i], "", true); // Disabled
    else
        item = new SelectItem(itemValues[set][i], itemLabels[set][i]);           // Enabled
    if (set == 0)
        items0[i] = item;
    else
        items1[i] = item;

    // Rest of the initialization code

}

public String getElement0() {
    return element[0];
}

public void setElement0(String element) {
    this.element[0] = element;
}

// Other getters and setters, including for element[1] etc. 
```

这可以正常工作，相应的 xhtml 代码的一部分是：

```
<h:selectOneListbox id="abundances0" size="10" style="width:15em" value="#{abundance.element0}"
                    enabledClass="itemEnabled" disabledClass="itemDisabled">
    <f:selectItems value="#{abundance.items0}"/>
</h:selectOneListbox> 
```

在 CSS 文件中有以下两行：

```
.itemEnabled {font-family:monospace;}
.itemDisabled {font-family:monospace;} 
```

使用 Firefox，项目的格式正确，禁用的项目也被格式化，但显示为灰色。由于某种原因，即使样式 itemDisabled 与 itemEnabled 完全相同，它仍然是灰色的。如果 itemDisabled 被省略，它仍然是灰色的，但不是等宽的，这是可以预料的。

但是，使用 Internet Explorer 或 Chrome 时，文本不是等宽的，启用或禁用的文本也不是。我该如何解决？另外，我注意到 的属性`h:selectOneListbox`还包括 styleClass，但是这与 enabledClass 和 disabledClass 有什么关系？

有人可以帮我解决这个问题，以便使用所有主要浏览器正确设置输出样式吗？

* * *

好的，非常感谢，我刚刚开始使用 PrimeFaces。

但是，我确实有另一个与此相关的问题。我尝试将 f:validateDoubleRange 与一系列有效输入值一起使用，如果输入超出指定范围，则使用 h:message 生成错误消息。问题是当我这样做时，当我单击一个按钮来更新菜单中的内容时，不会触发一个动作，否则它会起作用。

这是我的 xhtml 代码的更完整列表：

```
<h:selectOneMenu id="abundanceSet0" value="#{abundance.abunSet0}" style="height:25px; width:180px;">
  <f:selectItems value="#{abundance.abunSetMap}"/>
</h:selectOneMenu>
<p:spacer width="37" height="0"/>
<p:commandButton value="Select Set" actionListener="#{abundance.selectSet0}" update="abundances0"/>
<br/><br/>
<h:outputText value="Specify the abundances of individual elements:"/>
<h:panelGrid columns="3" cellpadding="2">
  <h:selectOneListbox id="abundances0" size="10" style="width:15em" value="#{abundance.element0}"
                          enabledClass="itemEnabled" disabledClass="itemDisabled">
    <f:selectItems value="#{abundance.items0}"/>
  </h:selectOneListbox>
  <h:panelGrid style="text-align:center;">
  <p:commandButton type="button" value="Readme" onclick="openPopup(600,500,'htmlPopup/expAbundances')" styleClass="longButton"/>
    <h:inputText id="update0" size="4" value="#{abundance.updateAbun0}"/>
    <p:commandButton value="Update Abundance" actionListener="#{abundance.update0}"
                     styleClass="longButton" update="abundances0">
      <f:validateDoubleRange minimum="-9.99" maximum="12.00"/>
  </h:panelGrid>

  <ui:include src="abunExplain.xhtml"/>

</h:panelGrid> 
```

动作丰度.selectSet0 和丰度.update0 以及其他动作不会被触发。此处的文件包含在显示整个页面的主文件中，甚至验证该文件中的条目也会阻止操作起作用。顺便说一句，您可以忽略“abunExplain.xhtml”，它只是在视图中添加了一些静态文本。

目前我在我的 bean 中使用一些方法来拦截输入值并确保它们是范围内的有效数字。

如果您或某人对此有一些想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:50:31.343

这是特定于 HTML 的问题，而不是特定于 JSF 的问题。in a生成的 HTML`<option>`元素本身已经非常有限的 CSS 样式选项。只有字体颜色可以跨浏览器更改，其他任何内容都取决于浏览器。`<f:selectItem(s)>``<h:selectOneListbox>`

最好的办法是使用`<select><option>`JavaScript`<ul><li>`将[`<p:selectOneListbox>`](http://www.primefaces.org/showcase/ui/selectOneListbox.jsf). 允许完全的`<ul><li>`CSS 样式自由。你甚至可以为此使用一些独立的 jQuery (UI) 插件——但是如果 PrimeFaces 已经在这样做，为什么还要重新发明轮子呢。

# javascript - 是否可以拆分 HTML 文本区域？

> ID：14121358
> 
> 赞同：0
> 
> 时间：2013-01-02T11:36:35.923
> 
> 标签：javascript, html, jsp, textarea

在我的聊天应用程序中，我需要将单个文本区域分成两部分，并且必须将其用于双重目的。

一个显示消息，另一个显示每条消息的当前时间。

可能吗 ？如果我问了一个错误的方法，请纠正我。

我的需要是在文本区域的左侧显示消息，在测试区域的右侧显示时间。

或者给出一些想法来实现......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:00:04.807

这是你想要的吗。？

```
<!DOCTYPE html>
<html>
<head>
<style>
.time
{
position:absolute;
left:400px;
top:20px;
}
</style>
</head>
<body>
<textarea rows="4" cols="50">
your chat messages
</textarea>
<div class="time">
4.30
</div>

</body>
</html> 
```

# doxygen - 使用 Doxygen 生成关键字列表

> ID：14121362
> 
> 赞同：2
> 
> 时间：2013-01-02T11:37:06.947
> 
> 标签：doxygen

我很好奇是否可以生成一个关键字列表，如果你愿意的话，一个索引，以便 doxygen 参考？我说的不是类列表等，而是用作索引的特定单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:01:34.923

这是可能的，但 AFAIK 仅适用于 Latex/pdf 输出，使用命令`\addindex`

请参阅[手册](http://doxygen.nl/manual/commands.html#cmdaddindex)。

如果有人知道用 HTML 生成索引的方法，我也会很感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T22:24:27.657

[外来物品](http://www.doxygen.nl/manual/commands.html#cmdxrefitem)

有了这个，您可以为每个关键字创建一个页面。一个例子，他们已经为：

```
\xrefitem todo "Todo" "Todo List" 
```

您可以在 Doxygen 文件中添加其他别名：

```
ALIASES += "reminder=\xrefitem reminders \"Reminder\" \"Reminders\"" 
```

然后在代码中您可以执行以下操作：

```
\reminder Add the cool feature here. 
```

你会得到一个提醒页面，上面有提醒列表。

# javascript - javascript Date构造函数中的日期溢出

> ID：14121363
> 
> 赞同：2
> 
> 时间：2013-01-02T11:37:13.550
> 
> 标签：javascript

我目前正在编写某种基于 javascript 的客户端日历并观察到一些问题。在网上，我可以找到代码示例，人们在 Date 构造函数中使用日期溢出。

IE

```
// get the first day of the next month
var myDate = new Date(someDate.getFullYear(),someDate.getMonth(),32);
myDate.setDate(1); 
```

这个概念的一般思想是，由于没有 32 天的月份，构造函数将在下个月内创建一个日期。我什至看到了带有负溢出的代码示例：

IE

```
// get the last day of the previous month
var myDate = new Date(someDate.getFullYear(),someDate.getMonth(),1);
myDate.setDate(-1); 
```

现在，虽然这似乎在很多情况下都有效，但我终于发现了一个矛盾：

```
// this prints "2012-12-30" expected was "2012-12-31"
var myDate = new Date(2013,0,1);
myDate.setDate(-1); 
```

进一步检查最终发现，像 new Date(2013,0,23) 或 new Date(2013,0,16) 结合 setDate(-1) 这样的日期都以“2012-12-31”结尾。最后我观察到使用 -1 似乎减少了两天（为了获得预期的结果 setDate(0) 必须使用）。

这是浏览器实现中的错误还是代码示例在互联网垃圾中传播？

此外，这个带有正负溢出的 setDate 是否可以安全地被所有主流浏览器使用和统一实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T11:44:20.353

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setDate)：

> 如果您指定的参数超出预期范围，setDate 会尝试相应地更新 Date 对象中的日期信息。例如，如果您对 dayValue 使用 0，则日期将设置为上个月的最后一天。

如果您考虑一下，这是合乎逻辑的：`setDate(1)`将日期设置为每月的第一天。要获取上个月的最后一天，即本月第一天的前一天，请从参数中减去一个并得到`0`。如果减去两天（`1 - 2`），则得到倒数第二天（`-1`）。

> [..] 代码示例是否在互联网垃圾中传播？

是的。这至少在 90% 的情况下是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T11:46:40.207

在[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setDate)，他们说：

> 如果您指定的参数超出预期范围，setDate 会尝试相应地更新 Date 对象中的日期信息。例如，如果您对 dayValue 使用 0，则日期将设置为上个月的最后一天。

所以你得到了连贯的结果：

```
 1 - Jan 1
 0 - Dec 31
-1 - Dec 30
-2 - Dec 29 
```

**编辑：**如果你认为它仅仅是一个相对值，它可能看起来违反直觉，例如 PHP 的[strtotime()](http://php.net/strtotime)函数：

```
strtotime('-1 day'); 
```

事实并非如此;-)

# php - 使用 Zend_Cache_Backend_Memcached 进行 SASL 身份验证

> ID：14121367
> 
> 赞同：2
> 
> 时间：2013-01-02T11:37:36.550
> 
> 标签：php, zend-framework, appfog

Zend_Cache 是否能够使用 SASL 身份验证连接到 memcachier 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:49:15.920

假设您使用的是 ZF 1.x，[手册说](http://framework.zend.com/manual/1.12/en/zend.cache.backends.html)Zend_Cache_Backend_Memcached 使用了[memcache 扩展](http://php.net/book.memcache)，它不明确支持[memcached 1.4.3+ 的 SASL 支持](http://code.google.com/p/memcached/wiki/SASLHowto)。

事实上，如果任何 PHP memcached 库要获得支持，那就是[memcache **d**](http://php.net/book.memcached)，而不是 memcache。 [是的，它们是不同的东西](https://stackoverflow.com/a/2659060/168868)。原因是旧的非 D'd 扩展使用旧版本的客户端库，而不是使用新的官方库的更新的 D'd 扩展。

# ruby-on-rails - 比较 Date 对象的错误布尔结果

> ID：14121376
> 
> 赞同：1
> 
> 时间：2013-01-02T11:38:14.137
> 
> 标签：ruby-on-rails, ruby, rspec

我正在尝试编写比较某些日期的测试。到目前为止，我有 2 个测试，其中一个按预期工作，但另一个失败，因为没有/没有正确比较日期。这是我的代码：

```
def self.has_expired?(card, start_month, start_year, annually)
    card_date = Date.new(card.year, card.month, -1)
    billing_date = Date.new(start_year, start_month, -1)
    if !annually
      p '--------'
      p card_date
      p billing_date
      card_date > billing_date

    else
      #return false
    end
  end 
```

信用卡对象

```
creditcard = ActiveMerchant::Billing::CreditCard.new(
        :number     => 1234567890123456
        :month      => 01,
        :year       => 13,
        :first_name => 'John', 
        :last_name  => 'Doe',
        :verification_value  => 132,
        :brand => 'visa'
      ) 
```

这是 p 的第一个块按预期工作的输出。

```
"--------"
Tue, 31 Jan 0013
Thu, 28 Feb 2013
false 
```

第二个块失败，期待真，但得到假

```
."--------"
Tue, 31 Jan 0013
Fri, 30 Nov 2012
false 
```

这是我的 rspec 代码

```
describe CreditCard do 
  context 'card_expired' do
    it 'should return false with args passed to method (02month, 13 year, annually==false)' do
      CreditCard.has_expired?(creditcard, 02, 2013, false).should == false
    end

    it 'should return true with args passed to method (11month, 12 year, annually==false)' do
      CreditCard.has_expired?(creditcard, 11, 2012, false).should == true
    end
  end

end 
```

在 irb 它作为魅力，返回正确的值（真/假）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:56:29.647

我认为问题在于你的逻辑。当到期日期早于计费日期时，卡已过期，因此当

```
card_date < billing_date # expired 
```

而不是什么时候

```
card_date > billing_date # valid 
```

* * *

还可以尝试输入完整的 2013 年，看看是否有帮助，如果它不断破裂

```
:year => 2013, 
```

您在此行之后还缺少逗号（可能是复制/粘贴错误）`:number => 1234567890123456`

# opengl - OpenGL围绕场景中心旋转相机

> ID：14121377
> 
> 赞同：4
> 
> 时间：2013-01-02T11:38:17.763
> 
> 标签：opengl, camera, rotation, center

我有一个场景，基本上是一个正方形的地板，尺寸为 15x15（坐标为 (0,0,0) (0,0,15) (15,0,15) (15,0,0) 的四边形）。

我已将场景中心设置为 (7.5,0,7.5)。问题是我无法弄清楚如何围绕场景中心水平旋转相机（也就是让相机围绕场景中心进行 360 度水平旋转）。我知道你需要对 sin 和 cos 做一些事情，但不知道具体是什么。

这是代码（纯C）：

```
//set camera position
//camera height is 17
GLfloat camx=0, camy=17, camz=0;

//set center of scene
GLfloat xref=7.5, yref=0, zref=7.5;

gluLookAt(camx, camy, camz, xref, yref, zref, 0, 1, 0);

//projection is standard gluPerspective, nothing special
gluPerspective(45, (GLdouble)width/(GLdouble)height, 1, 1000); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T11:50:58.343

您需要修改 camx 和 camz 变量。

您要经过的点位于圆上，它们的坐标由 确定`x = r*sin(alpha) + 7.5, z = r*cos(alpha) + 7,5`，其中 r 是圆的半径，alpha 是 xy 平面与相机当前位置之间的角度。

当然，角度取决于旋转速度，也取决于动画开始的时间。基本上，您唯一需要做的就是设置直角，然后根据上面的表达式计算坐标。

有关圆坐标的更多信息，请参阅 Wiki：[http ://en.wikipedia.org/wiki/Unit_circle](http://en.wikipedia.org/wiki/Unit_circle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:50:45.087

我认为您可以使用两种方法：

您可以使用 sin/cos 来计算您的`camx`和`camz`位置。[这张](http://upload.wikimedia.org/wikipedia/commons/e/e3/Einheitskreis_Ani.gif)图片是一个很好的例子，它是如何工作的。

另一种方法是将相机移动到`7.5, 0, 7.5`，然后以您想要的相机角度旋转相机。之后，您将相机移动`-7.5, 0, -7.5`。

# ios - 辞职在 UIAlertView 的 UITextField 中不起作用？

> ID：14121380
> 
> 赞同：0
> 
> 时间：2013-01-02T11:38:31.047
> 
> 标签：ios, xcode, uitextfield, uialertview, resignfirstresponder

我创建了警报视图，在警报视图中会出现一个文本字段，但是当我单击键盘上的返回按钮时它不会消失，即使我将委托添加到 .h 文件。

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
[textField resignFirstResponder];
return YES;
}
-(IBAction)barButtonPressed:(id)sender 
{ 
UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Enter Data" message:@"\n\n\n" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];

textUserName =[[UITextField alloc] initWithFrame:CGRectMake(50.0f, 50.0f, 200.0f, 40.0f)];
textUserName.placeholder = @"Name";
textUserName.autocorrectionType = UITextAutocorrectionTypeNo;
textUserName.textAlignment=UITextAlignmentLeft;
textUserName.userInteractionEnabled = YES;
textUserName.enabled = YES;
textUserName.enablesReturnKeyAutomatically= NO;
textUserName.clearsOnBeginEditing = NO;
textUserName.borderStyle = UITextBorderStyleRoundedRect;
textUserName.keyboardType = UIKeyboardTypeDefault;
textUserName.delegate = self;
//[textUserName setReturnKeyType:UIReturnKeyDone];
 **strong text**
[alert
 addSubview:textUserName];

[alert show];
[self resignFirstResponder];
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:51:31.063

您可以使用`UIAlertViewStylePlainTextInput`来`UIAlertView`获取 alertView 中的文本字段：

```
UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Enter Data" message:@"\n\n\n" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];

// Set alertView style
alert.alertViewStyle = UIAlertViewStylePlainTextInput;

textUserName =[alert textFieldAtIndex:0];

// Then customize your textField
textUserName.placeholder = @"Name";
textUserName.autocorrectionType = UITextAutocorrectionTypeNo;
textUserName.textAlignment=UITextAlignmentLeft;
textUserName.userInteractionEnabled = YES;
textUserName.enabled = YES;
textUserName.enablesReturnKeyAutomatically= NO;
textUserName.clearsOnBeginEditing = NO;
textUserName.borderStyle = UITextBorderStyleRoundedRect;
textUserName.keyboardType = UIKeyboardTypeDefault;

[alert show]; 
```

在此无需单独设置委托..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:03:57.757

您需要`UITextField`在初始化后设置委托属性。

采用：

```
textUserName =[[UITextField alloc] initWithFrame:CGRectMake(50.0f, 50.0f, 200.0f, 40.0f)];
textUserName.delegate = self; 
```

# css - 颜色渐变不显示

> ID：14121382
> 
> 赞同：0
> 
> 时间：2013-01-02T11:38:33.023
> 
> 标签：css, linear-gradients

我正在尝试用 html 编写一个 pH 值，包括颜色。我希望颜色从酸性平滑过渡到碱性（从上到下）。但是，pH 颜色不显示。这是html代码：

```
<!DOCTYPE html>
<html>
<head>
    <link rel = "STYLESHEET" type = "text/css" href = "Ph.css">
    <title >Ph SCALE</title>
    <h1 class = "Ph">THE pH SCALE</h1>
</head>
<body>
    <div>
        <p class = "zero">0.0 very acidic</p>
        <p class = "one">1.0</p>
        <p class = "two">2.0</p>
        <p class = "three">3.0</p>
        <p class = "four">4.0</p>
        <p class = "five">5.0</p>
        <p class = "six">6.0</p>
        <p class = "seven">7.0 neutral</p>
        <p class = "eight">8.0</p>
        <p class = "nine">9.0</p>
        <p class = "ten">10.0</p>
        <p class = "eleven">11.0</p>
        <p class = "twelve">12.0</p>
        <p class = "thirteen">13.0</p>
        <p class = "fourteen">14.0 very alkaline</p>
    </div>
</body>
</html> 
```

以下是我的 CSS 代码。我使用 -webkit-gradient 作为颜色渐变：

```
* {
     background-color: #ccc;
 }

 h1.Ph {
     background-color: white; font-family: Arial; padding: 20px; 
     text-decoration:underline;
     text-align: center;
 }

 p {
    padding: 5px; margin: 0px;
    text-align: center;
 }

 div {
    background-color: -webkit-gradient(top, bottom,rgb(238,62,128), rgb(0,136,221));
    font-family: Courier;
 } 
```

你能解释一下为什么从上到下没有颜色渐变`<div>`吗？

感激不尽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:52:40.653

梯度不是 the 的值，`background-color`而是 the`background-image`

```
background-image: -webkit-linear-gradient(top,rgb(238,62,128), rgb(0,136,221)); 
```

演示在[http://jsfiddle.net/L6bQ9/](http://jsfiddle.net/L6bQ9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:51:41.977

使用`background-image`而不是`background-color`它的工作原理

# flash - 如何在舞台上展示物体？

> ID：14121383
> 
> 赞同：0
> 
> 时间：2013-01-02T11:38:32.810
> 
> 标签：flash, stage

我是**actionscript 3.0**的新手，正在尝试编写一些代码。我有一堂课“ `RadioButtonExample.as`”。通过使用这个类，我试图在舞台上显示不同的对象（单选按钮和按钮）。

* * *

```
RadioButtonExample.as

package
{
    import flash.text.TextFieldAutoSize;
    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import fl.controls.RadioButton;
    import fl.controls.RadioButtonGroup;
    import fl.controls.Label;
    import fl.controls.Button;

    public class RadioButtonExample extends Sprite
    {
        private var j:uint;
        private var padding:uint = 10;
        private var currHeight:uint = 0;
        private var verticalSpacing:uint = 30;

    private var sp:Sprite = new Sprite();
        private var rbg:RadioButtonGroup;
        private var questionLabel:Label;
        private var answerLabel:Label;        
        private var question:String = "What day is known internationally as Speak Like A Pirate Day?"
        private var answers:Array = [ "August 12", "March 4", "September 19", "June 22" ];

        public function RadioButtonExample() {
            setupQuiz();    
        }
        private function setupQuiz():void {
            setupQuestionLabel();
            setupRadioButtons();
            setupButton();
            setupAnswerLabel();
        }
        private function setupQuestionLabel():void {
            questionLabel = new Label();
            questionLabel.text = question;
            questionLabel.autoSize = TextFieldAutoSize.LEFT;
            questionLabel.move(padding,padding + currHeight);

            currHeight += verticalSpacing;
            addChild(questionLabel);
        }
        private function setupAnswerLabel():void {
            answerLabel = new Label();
            answerLabel.autoSize = TextFieldAutoSize.LEFT;
            answerLabel.move(padding + 120,padding + currHeight);

            addChild(answerLabel);            
        }
        private function setupRadioButtons():void {
            rbg = new RadioButtonGroup("question1");
            createRadioButton(answers[0], rbg);
            createRadioButton(answers[1], rbg);
            createRadioButton(answers[2], rbg);
            createRadioButton(answers[3], rbg);
        }
        private function setupButton():void {
            var b:Button = new Button();
            b.move(padding,padding + currHeight);
            b.label = "Check Answer";
            b.addEventListener(MouseEvent.CLICK,checkAnswer);

            addChild(b);
        }
        private function createRadioButton(rbLabel:String,rbg:RadioButtonGroup):void {
            var rb:RadioButton = new RadioButton();
            rb.group = rbg;
            rb.label = rbLabel;
            rb.move(padding, padding + currHeight);
            addChild(rb);

            currHeight += verticalSpacing;
        }
        private function checkAnswer(e:MouseEvent):void {
            if(!rbg.selection.label) answerLabel.text = "Select an answer.";
            else {
                var resultStr:String = rbg.selection.label == answers[2] ? "Correct" : "Incorrect";
                answerLabel.text = resultStr;
            }
        }
    }
} 
```

另一方面，我的`main.fla`文件在时间轴的第一帧上有以下代码。

`main.fla`

```
import RadioButtonExample;
var rbe:RadioButtonExample = new RadioButtonExample(); 
```

在编译 FLA 文件时，它不会给出任何编译器错误，但不会在舞台上显示任何单选按钮和简单按钮。

请注意，我已经通过在 FLA 文件的属性面板下的类文本框中写入类名来尝试此操作，但我不想这样做。我想使用代码来实现这一点。请让我知道应该在代码中添加什么以在舞台上显示对象。请帮我解决我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:19:26.200

嗯，这可能是不对的，因为我是菜鸟，但我注意到你没有像标准一样建立它：

```
 package {

import flash.display.MovieClip;

import flash.text.TextFieldAutoSize;
import flash.display.Sprite;
import flash.events.MouseEvent;
import fl.controls.RadioButton;
import fl.controls.RadioButtonGroup;
import fl.controls.Label;
import fl.controls.Button;

public class RadioButtonExample extends MovieClip { 
```

也许这可以为您指明正确的方向

# php - 通过 PHP/PDO 从 MySQL 数据库中选择不同的行

> ID：14121385
> 
> 赞同：1
> 
> 时间：2013-01-02T11:38:47.147
> 
> 标签：php, mysql, pdo, haversine

> **可能重复：**
> [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)
> [从 MySQL 数据库中选择不同的行](https://stackoverflow.com/questions/14120373/select-distinct-rows-from-mysql-database)

嗨，我有一个 phonegap 应用程序，当检测到路面变形（例如坑洼和减速带）时，它会存储纬度、经度、地址和严重程度。

到目前为止，通过 PHP PDO 将这些保存在数据库中根本不是问题。PDO 的设计方式是，如果被报告的坑洞已经被报告了 10 次（检查数据库中 15 米范围内的任何条目），则不会被报告（即再次插入数据库中）。此外，加载表面变形也不是问题，我使用 Haversine 公式来执行此操作，其中我传递用户的纬度和经度并获得一定距离内的值。

```
$stmt = $dbh->prepare("
  SELECT
    lat, lng,
    ( 6378160 * acos( cos( radians(?) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(?) ) + sin( radians(?) ) * sin( radians( lat ) ) ) ) AS distance
  FROM myTable
  HAVING distance > 0 
  ORDER BY distance
  LIMIT 0 , 30
"); 
```

我遇到的问题是，由于可以报告 10 次相同的坑洼，我最终会将相同的坑洼报告给应用程序以在地图上绘制 10 次。我需要做的是，获取距离用户一定距离内的坑洞列表（使用haversine公式完成），然后从这个列表中过滤坑洞，以便我只得到不同的坑洞而不是相同的坑洞坑洼被退回10次。任何人都知道如何进行这种过滤？谁能告诉我如何在 PHP/PDO 中做到这一点，或者如果可以的话，请给我一些类似的教程？

这是我需要做的简要说明：假设我在坑洼 A 和坑洼 B 附近，并说我在数据库中有 6 个坑洼 A 的报告和 8 个坑洼 B 的报告（等等）。通过使用harsine 公式，我得到了坑洞A 和坑洞B 的所有报告值（即14 个结果）。我需要的是获得坑洼 A 报告的中点和坑洼 B 报告的中点（使用：[http](http://www.geomidpoint.com/calculation.html) ://www.geomidpoint.com/calculation.html ）并返回 2 个结果（一个用于 A 和一个用于 B）而不是 14 个结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:44:58.090

您必须将坑洼和报告分开。首先查询周围有哪些坑洞`GROUP BY lat, lng`，然后使用 查询每个坑洞的报告`LIMIT 1`。

```
$rows = dbh_query("SELECT id FROM ... ");
foreach ($rows as $row)
{
    dbh_query("SELECT ... WHERE id = :id LIMIT 1", array('id' => $row['id']));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:38:27.757

我认为您有 2 个选项可以详细说明。不幸的是，两者都意味着一些并发症。

1）不要写多个观察，你应该总是在写作时对它们进行聚类。例如，如果您支持 10 米的空间粒度，那么每次到达距离现有记录不到 10 米的新测量值时，您不会添加新的坑洞，而是更改平均值（纬度、经度、计数器）最近的现有记录。这样，您将在示例中得到 2 条坑洼 A 和 B 记录，因此您可以使用`DISTINCT`查询。

2）对于每个请求，您可以从现有表中获取 15 米范围内的所有记录，并在其上创建一个临时表，用于计算沿路斧的概率密度函数。同样，这需要选择一个可以在`ROUND`函数中模拟为小数精度的粒度。例如，如果你有一个存储函数来计算当前点和现有记录之间的距离，你可以写：

```
INSERT INTO `temppdf` (dist, pothole_id)
SELECT FROM `maintable`
ROUND(distance(@current_lat, @current_lon, maintable.lat, maintable.lon), -1), pothole_id
WHERE distance(@current_lat, @current_lon, maintable.lat, maintable.lon) < 15; 
```

然后，您可以在 temppdf 中查询每个坑洞具有最大计数器的行，如下所示：

```
SELECT pothole, MAX(cnt) as `peak` FROM
(SELECT DISTINCT pothole, COUNT(dist) as cnt FROM `temppdf` GROUP BY pothole, dist) as `subq`
GROUP BY pothole; 
```

结果是计数器大于阈值的坑洼。

# d - 在writefln（）之外连接D中字符串的最短方法？

> ID：14121390
> 
> 赞同：7
> 
> 时间：2013-01-02T11:39:01.247
> 
> 标签：d, phobos

我反复需要连接格式字符串，并且想知道在 D 中连接 writefln() 函数之外的字符串的最短（或最容易阅读）方法是什么？

也就是说，我喜欢 writefln 的行为，例如：

```
// Some code to init y="2013", m="01", d="02" ...
writefln("%s-%s-%s", y, m, d); 
```

...但我想这样做而不把它写在标准输出上。有没有同样简单的方法？

我发现的唯一想法是 std.string 中的[格式](http://dlang.org/phobos/std_string.html#format)函数，但这需要您提供预定义长度的字符串缓冲区作为第一个参数，这在大多数情况下很不方便。

我发现的另一种选择是（通过在 std.array 中使用“join”）：

```
// Some code to init y="2013", m="01", d="02" ...
datestr = [y, m, d].join("-"); 
```

...这很方便，但当然只有在您使用相同的“分隔符”时才有效。

任何更通用的方法来做到这一点，比上面的例子更短，并且不需要提供预定义长度的缓冲区字符串？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-02T12:33:25.907

您似乎`format`与`sformat`. `format`完全符合您的要求：

```
datestr = format("%s-%s-%s", y, m, d); 
```

更好的是：在编译时而不是运行时捕获格式字符串和参数之间的潜在不匹配：

```
datestr = format!"%s-%s-%s"(y, m, d); 
```

* * *

连接字符串的最基本方法是`~`：

```
datestr = y ~ "-" ~ m ~ "-" ~ d; 
```

更多信息：http: [//dlang.org/arrays.html#array-concatenation](http://dlang.org/arrays.html#array-concatenation)

# iphone - ios mobileshop 帮助资源

> ID：14121391
> 
> 赞同：0
> 
> 时间：2013-01-02T11:39:03.883
> 
> 标签：iphone, ios, ipad, shopping-cart, shop

我想为我的 webhsop 制作一个原生 ios 应用程序。我有兴趣将所有产品加载到 iphone/ipad，然后处理本机应用程序中的所有逻辑以及付款，然后将订单详细信息发送到我的系统以将订单发送给客户。

现在我得到了支付部分，将订单发送到我的系统不会那么难。但是有人知道上述任何步骤的好资源吗？只是想知道去哪里以及如何去做？一些我没有想到的东西和好的实现想法，例如购物车？

我不认为我在寻找成品，但我认为任何帮助或好的想法都会受到赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:44:44.563

根据您的要求，您可以按照以下步骤操作：

1）在服务器端创建网络服务。其中提供所有产品数据。

2) 在 iPhone 应用端，您可以通过从 web-service 获取数据来显示数据。

3）当用户将任何产品添加到他/她的购物车时，它应该被添加到服务器端。（您需要为此实施注册/登录过程）。

4) 现在，您可以通过任何移动支付 SDK（如 PayPal）进行支付处理。

5）每当您收到成功的交易时，您就可以将其存储在服务器端。

希望你有一个想法。

让我知道任何查询/困难。

快乐的开始！

# ssis - SSIS 错误：另一个会话正在使用事务上下文

> ID：14121393
> 
> 赞同：0
> 
> 时间：2013-01-02T11:39:05.587
> 
> 标签：ssis

我正在使用具有许多`Execute SQL`并行运行的任务的 SSIS 包。每个任务都包含`MERGE`SQL 语句。父表合并语句首先运行，然后所有子表的合并语句并行运行。该包使用本机事务功能。我已经设计了这个包，使得事务级别在控制流级别上设置为“必需”，在所有其他容器/可执行文件上设置为“支持”。

问题是，它有时可以正常工作，但有时会引发以下异常

> 错误消息：另一个会话正在使用事务上下文。”。可能的失败原因：查询问题、“ResultSet”属性设置不正确、参数设置不正确或连接未正确建立。

可能是什么原因？隔离级别有影响吗？它在包中的任何地方都设置为“Serializable”。保留相同的连接属性也设置为 True。

# sql - SQL Server 2008 查询结果到 XML 文件

> ID：14121395
> 
> 赞同：1
> 
> 时间：2013-01-02T11:39:09.767
> 
> 标签：sql, sql-server, xml, sql-server-2008, xquery

我在将查询结果转储到 XML 文件时遇到了一些问题。我已经阅读了很多关于这个主题的文章，但我仍然无法为我的案例找到一个像样的解决方案。

我有一个以 XML 格式输出查询的过程，并且运行良好：

```
alter proc pr_export_xml
as
declare @XmlOutput xml
set @XmlOutput = (select id,ref,sit from RepData for XML PATH('Produto'), ROOT('Produtos'), TYPE)

select @XmlOutput
go 
```

我现在需要的是获得该结果并将其转储到文件中以备后用。此过程将在触发期间调用，因此必须自动转储到文件中。

我希望我足够清楚，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:38:19.150

另一个替代方案是 bcp 实用程序。
看看这些。

*[http://www.brighthub.com/internet/web-development/articles/119542.aspx](http://www.brighthub.com/internet/web-development/articles/119542.aspx)* *[启用“xp_cmdshell”SQL Server](https://stackoverflow.com/questions/5131491/enable-xp-cmdshell-sql-server)*

# sql-server - 重新启动域控制器时连接到 SQL Server

> ID：14121396
> 
> 赞同：1
> 
> 时间：2013-01-02T11:39:11.653
> 
> 标签：sql-server, domaincontroller

我有 2 个 W2k3 域控制器。有时，当我需要重新启动其中一个时，ASP.NET 应用程序无法连接到 SQL Server，并显示以下异常：“登录失败。登录来自不受信任的域，不能用于 Windows 身份验证。”

30-60 秒后，SQL 连接到另一个域控制器，一切又开始工作。

这是正常的吗？有什么办法可以减少这种停机时间？谢谢！

# css - facebook 喜欢 iframe 和旧浏览器

> ID：14121398
> 
> 赞同：0
> 
> 时间：2013-01-02T11:39:18.410
> 
> 标签：css, iframe, browser, facebook-like

如果我使用旧浏览器或新浏览器加载此网站 [http://liberainformazione.it/](http://liberainformazione.it/) ，我的 facebook like iframe 按钮会以两种不同的方式显示。

![在此处输入图像描述](../Images/8758c5b0601a52059a96afea1fd72817.png)

如何从浏览器中独立地正确呈现这个 iframe？这是网站： http: [//liberainformazione.it/](http://liberainformazione.it/)

非常感谢。

# iphone - 如何将 unix 时间戳转换为人类可读的时间？

> ID：14121403
> 
> 赞同：6
> 
> 时间：2013-01-02T11:39:37.367
> 
> 标签：iphone, objective-c, ios, xcode, nsdate

我从数据库中获得了一个 unix 时间戳，并试图从中创建一个人类可读的日期。我正在使用这种方式

```
long t1=[time longLongValue];

NSDate* date=[NSDate dateWithTimeIntervalSince1970:t1]; 
```

其中时间是时间戳。当我打印日期时，我得到

```
1956-02-18 19:04:01 +0000 
```

代替

```
2013-01-02 12:31:03 +0000 
```

时间戳是`1356765933449`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T12:29:09.597

正如鲍里斯在他的回答中正确指出的那样，这是整数溢出的问题。

我不知道你的`time`对象是什么，但不是`signed long int`使用 a `NSTimeInterval`。

在 iOS`NSTimeInterval`上目前定义为

```
typedef double NSTimeInterval; 
```

但你不应该太在意这一点。坚持使用类型同义词将保护您，以防 Apple 决定将基础定义更改为其他内容。

也就是说，您应该将代码更改为类似

```
NSTimeInterval epoch = [time doubleValue];
NSDate * date = [NSDate dateWithTimeIntervalSince1970:epoch]; 
```

关于我之前描述的代码可维护性问题，这里您明确使用 a `doubleValue`（您没有太多选择），但好在如果 Apple 将`NSTimeInterval`定义更改为与赋值不兼容的内容`double`，编译器会通知您.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T11:43:35.733

试试这个

```
- (NSString *) getDateFromUnixFormat:(NSString *)unixFormat
{

    NSDate *date = [NSDate dateWithTimeIntervalSince1970:[unixFormat intValue]];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"MMM dd, yyyy-h:mm"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    //NSDate *date = [dateFormatter dateFromString:publicationDate];
    NSString *dte=[dateFormatter stringFromDate:date];

    [dateFormatter release];
    return dte;

} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-02T12:13:02.017

Unix 时间戳只有 32 位可用。

因为他们使用有符号整数，所以他们从 1.1.1970 开始计算秒数。32 位带符号的 int 最多只能保存 2147483647 的值，如您所愿`1356765933449`。这会导致溢出，并导致您的日期无效。

这也称为`Year 2038 Problem`，因为 2147483647（最大值）将在 2038 年 1 月 19 日星期二 03:14:07 UTC 达到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:42:42.503

然后使用 nsdateformatter 格式化日期。详细指南。

> [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

# css - 移动浏览器更改 div 布局

> ID：14121407
> 
> 赞同：0
> 
> 时间：2013-01-02T11:39:56.803
> 
> 标签：css, layout, html, mobile

当通过 Chrome、Safari、FireFox 和 IE 查看时，这看起来不错。

在移动 Android 手机上查看横向时，它看起来不错，纵向查看，列表与容器底部重叠。

为什么以及如何解决它？

```
<style>
div.test {color:black; text-align:left; border-radius:15px; -moz-border-radius:15px; border:2px solid #000; background-color:#808080; }
ul#navlist {width:80%; \width:80%; w\idth:80%; padding:15px; border-top:0px; margin:0px; color:#ffffff; font:10pt verdana,helvetica,arial,sans-serif; }
ul#navlist li {list-style:none; }
ul#navlist li a {display:block; padding:4px 8px 4px 8px; border-left:20px solid #808080; background:#808080; text-decoration:none; text-align:left; font:bold 10pt verdana,helvetica,arial,sans-serif; }
ul#navlist li a:link {color:#fff; }
div#nav li a:visited {color:#fff; }
ul#navlist li a:hover {border-color:#fff; color:#ffffff; background:#202020; }
</style>

<div class="test" style="position:absolute; top:30px; left:10px; width:485px; height:580px">
<div id="nav" ><ul id="navlist"><b>&nbsp;&nbsp;DEMO</b>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
<li><a href="#">TEST Entry</a></li>
</ul></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:07:47.247

您必须为横向编写 2 个 css 1，为纵向编写 1 个，然后复制粘贴以下代码，它将正常工作 meta name="apple-mobile-web-app-capable" content="yes" />

```
meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=0;" />
<link rel="stylesheet" media="all and (orientation:portrait)" href="../../../css/potrait.css" />
<link rel="stylesheet" media="all and (orientation:landscape)" href="../../../css/landscape.css" /> 
```

# css - SCSS 和 Susy：使盒子延伸到网格排水沟中

> ID：14121410
> 
> 赞同：0
> 
> 时间：2013-01-02T11:40:12.490
> 
> 标签：css, sass, susy-compass

我用[优秀的 Susy](http://susy.oddbird.net/)做了一个网格。

我想在我的网格中添加一个框内容。当我这样做时，一切都会变得局促，因为框与内容对齐到网格的同一边缘。

我可以向盒子添加填充，然后应用 box-sizing:border-box。这消除了“抽筋”，但也导致内容不再与网格对齐。

我真正想做的是保持内容与网格对齐并将框延伸到排水沟中。有没有办法用 Susy 做到这一点？

我附上了一张图表来说明我的意思：

![图形演示问题](../Images/637d174a915580e28617b3e0102289f0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:11:13.320

目前最好的解决方案是添加等于您的填充的负边距。

请参阅：[Susy：如何扩展内容框以覆盖网格填充？](https://stackoverflow.com/questions/11223927/susy-how-to-extend-content-box-to-cover-grid-padding-as-well)

我们已经向 Susy 添加了相同 mixin 的更复杂版本（[此处](https://github.com/ericam/susy/commit/33a3417cafa250a6c6cdf425737f2df82328cf3a)），但尚未在 gem 中发布。

# php - 我们可以使用graph api搜索我们朋友共享的公共对象吗？

> ID：14121413
> 
> 赞同：0
> 
> 时间：2013-01-02T11:40:35.913
> 
> 标签：php, facebook, facebook-graph-api

我尝试使用图形 API 搜索对关键字的评论

[https://graph.facebook.com/search?q=QUERY](https://graph.facebook.com/search?q=QUERY) 为我列出了大量的结果。

例如： [https](https://graph.facebook.com/search?q=watermelon) : //graph.facebook.com/search?q=watermelon 在页面上为我提供了大量 JSON 格式的结果。有什么方法可以获取仅由我的朋友发布的结果。？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:08:18.640

使用**Search**，您可以搜索社交图谱中的所有公共对象。由于您将搜索限制为用户的朋友，因此只需使用此-

```
https://graph.facebook.com/me/home?q=watermelon 
```

# javascript - 我可以使用 jQuery 动态创建文件（及其内容）吗？

> ID：14121417
> 
> 赞同：10
> 
> 时间：2013-01-02T11:40:50.820
> 
> 标签：javascript, jquery, ajax, html

这是我的 HTML 代码，

```
<ul>
  <li> Download <a href="#">file1</a> </li>
  <li> Download <a href="#">file2</a> </li>
  <li> Download <a href="#">file3</a> </li>
</ul> 
```

我想创建类似`"href=filename.txt"`. `"filename"`文本文件及其内容需要根据点击的标签动态创建。

我使用 Web API 来获取 JSON 格式的数据，因此我认为安全性不应该成为问题。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-02T12:40:53.357

从**HTML5**开始，您可以使用[`data:`URL](http://www.w3.org/TR/html51/single-page.html#data-protocol)和[`download`属性](http://www.w3.org/TR/html51/single-page.html#downloading-resources)的组合。例如，

```
<a href="data:text/plain;charset=UTF-8,Hello%20World!" download="filename.txt">Download</a> 
```

或者，以编程方式，

```
<a id="programatically" href="#" download="date.txt">Download</a> 
```

```
$("a#programatically").click(function() {
    var now = new Date().toString();
    this.href = "data:text/plain;charset=UTF-8," + encodeURIComponent(now);
});​ 
```

[**看这里。**](http://jsfiddle.net/enbMe/)

不幸的是，[`download`不完全支持属性](http://caniuse.com/#feat=download)并且[`data:`URL 运行良好](http://caniuse.com/#feat=datauri)。

现在，为了获得更好的跨浏览器支持，您需要在服务器端动态创建文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T12:04:07.373

您可以使用[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)，这是一个非常简单的示例：

```
<html>
<body>
<a href="#">click</a>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function() {
    $("a").click(function() {
        window.location.href = "data:text/plain;charset=UTF-8,Hello World";
    });
});
</script>
</body>
</html> 
```

但是，您不能设置文件名。

# android - 这个网络服务也适用于安卓吗？

> ID：14121418
> 
> 赞同：0
> 
> 时间：2013-01-02T11:40:57.127
> 
> 标签：android, json, web-services, titanium

```
 https://github.com/appcelerator/titanium_mobile/blob/master/demos/KitchenSink/Resources/examples/soap.js 
```

我已经为 iphone 测试了这个，它工作正常，但在 android 上不行。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:47:47.850

您也可以在 android 中使用上述链接示例中使用的 Web 服务 url。那里显示的 Web 服务可以以多种方式使用。你可以做soap解析，或者你也可以做xml解析。如果你想通过 xml 解析，那么使用下面的链接

[http://www.webservicex.net/CurrencyConvertor.asmx/ConversionRate?FromCurrency=USD&ToCurrency=INR](http://www.webservicex.net/CurrencyConvertor.asmx/ConversionRate?FromCurrency=USD&ToCurrency=INR)

您需要用所需的转换替换 USD（此处为美元）和 INR（印度卢比）。

# xml - 按属性对 XML 元素进行分组

> ID：14121421
> 
> 赞同：0
> 
> 时间：2013-01-02T11:41:05.803
> 
> 标签：xml, xslt, xslt-1.0

我有一个名为`filt`保存这样的 xml 的变量：

```
<filters>
  <ISP_WebItem FILTER="Farve" FILTERNAME="Transparent" UNITCODE="" />
  <ISP_WebItem FILTER="Antal" FILTERNAME="10" UNITCODE="mapper" />
  <ISP_WebItem FILTER="Indpakning" FILTERNAME="Æske" UNITCODE="" />
  <ISP_WebItem FILTER="Materiale" FILTERNAME="PP" UNITCODE="" />
  <ISP_WebItem FILTER="Bredde" FILTERNAME="35.6" UNITCODE="cm" />
  <ISP_WebItem FILTER="Farve" FILTERNAME="blue" UNITCODE="" />
  <ISP_WebItem FILTER="Dybde" FILTERNAME="5" UNITCODE="mm" />
  <ISP_WebItem FILTER="Farve" FILTERNAME="red" UNITCODE="" />
</filters> 
```

我想按其“过滤器”属性对这些元素进行分组。那就是我想要这样的输出 xml（请注意，xml 元素由过滤器属性重新排列，即所有具有 FILTER 的元素现在都在相邻位置）

```
<filters>
  <ISP_WebItem FILTER="Farve" FILTERNAME="Transparent" UNITCODE="" />
  <ISP_WebItem FILTER="Farve" FILTERNAME="blue" UNITCODE="" />
  <ISP_WebItem FILTER="Farve" FILTERNAME="red" UNITCODE="" />
  <ISP_WebItem FILTER="Antal" FILTERNAME="10" UNITCODE="mapper" />
  <ISP_WebItem FILTER="Indpakning" FILTERNAME="Æske" UNITCODE="" />
  <ISP_WebItem FILTER="Materiale" FILTERNAME="PP" UNITCODE="" />
  <ISP_WebItem FILTER="Bredde" FILTERNAME="35.6" UNITCODE="cm" />
  <ISP_WebItem FILTER="Dybde" FILTERNAME="5" UNITCODE="mm" />
</filters> 
```

我尝试过这样的事情：

```
 <xsl:variable name="grouped_filt" select="$filt//ISP_WebItem[@FILTER = preceding-sibling::*[1]/@FILTER ]"></xsl:variable> 
```

但没有用。我找不到任何错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:03:31.567

XSLT 1.0 中的标准方法称为[Muenchian Grouping](http://www.jenitennison.com/xslt/grouping/muenchian.html)：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:strip-space elements="*"/>
  <xsl:output method="xml" indent="yes" />
  <xsl:key name="itemByFilter" match="ISP_WebItem" use="@FILTER" />

  <xsl:template match="filters">
    <filters>
      <xsl:apply-templates select="ISP_WebItem[
          generate-id() = generate-id(key('itemByFilter', @FILTER)[1])]" />
    </filters>
  </xsl:template>

  <xsl:template match="ISP_WebItem">
    <xsl:copy-of select="key('itemByFilter', @FILTER)" />
  </xsl:template>
</xsl:stylesheet> 
```

这`generate-id() = generate-id(key('itemByFilter', @FILTER)[1])`是一种仅选择具有每个值的*第一个* 元素并将模板应用于该元素的方法。然后在模板中复制*所有*具有相同值的元素。`ISP_WebItem``FILTER``ISP_WebItem`*`FILTER`*

 *编辑：

您说该`<filters>`元素位于“名为 filt 的变量”中，而不是您直接从输入文档中匹配的内容。在这种情况下，您可以使用相同的键定义

```
 <xsl:key name="itemByFilter" match="ISP_WebItem" use="@FILTER" /> 
```

但不是`<xsl:template match="filters">`你使用`<xsl:for-each select="$filt/filters">`. 如果`filt`变量是结果树片段而不是节点集 - 即它被创建为

```
<xsl:variable name="filt">
  <filters>
    <!-- ... -->
  </filters>
</xsl:variable> 
```

您将需要一个扩展功能将其转回节点集

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
                xmlns:exslt="http://exslt.org/common"
                exclude-result-prefixes="exslt">
  <xsl:strip-space elements="*"/>
  <xsl:output method="xml" indent="yes" />
  <xsl:key name="itemByFilter" match="ISP_WebItem" use="@FILTER" />

  <xsl:variable name="filt">
    <filters>
      <ISP_WebItem FILTER="Farve" FILTERNAME="Transparent" UNITCODE="" />
      <ISP_WebItem FILTER="Antal" FILTERNAME="10" UNITCODE="mapper" />
      <ISP_WebItem FILTER="Farve" FILTERNAME="blue" UNITCODE="" />
    </filters>
  </xsl:variable>

  <xsl:variable name="grouped_filt">
    <xsl:for-each select="exslt:node-set($filt)/filters">
      <filters>
        <xsl:apply-templates select="ISP_WebItem[
            generate-id() = generate-id(key('itemByFilter', @FILTER)[1])]" />
      </filters>
    </xsl:for-each>
  </xsl:variable>

  <xsl:template match="/">
    <!-- Demonstrate that the grouping did the right thing -->
    <xsl:copy-of select="$grouped_filt" />
  </xsl:template>

  <xsl:template match="ISP_WebItem">
    <xsl:copy-of select="key('itemByFilter', @FILTER)" />
  </xsl:template>
</xsl:stylesheet> 
```

此样式表在任何输入文档（例如`<foo/>`）上运行时将输出

```
<?xml version="1.0"?>
<filters>
  <ISP_WebItem FILTER="Farve" FILTERNAME="Transparent" UNITCODE=""/>
  <ISP_WebItem FILTER="Farve" FILTERNAME="blue" UNITCODE=""/>
  <ISP_WebItem FILTER="Antal" FILTERNAME="10" UNITCODE="mapper"/>
</filters> 
```*

# go - 使用 Gob 解码和编码接口{}

> ID：14121422
> 
> 赞同：18
> 
> 时间：2013-01-02T11:41:06.190
> 
> 标签：go, gob

我正在尝试对包含 Interface{} 作为字段的结构进行解码和编码。

存在的问题是，编码工作正常，但如果我尝试将数据解码为`data`值 get `{ <nil>}`。

如果我更改`Data interface{}`为，它实际上可以工作，`Data substring`但这对我来说不是解决方案，因为我想将查询结果缓存到根据查询具有不同类型的数据库中。（例如`Users`或`Cookies`）

# 最小的工作示例

## 来源

[http://play.golang.org/p/aX7MIfqrWl](http://play.golang.org/p/aX7MIfqrWl)

```
package main

import (
    "bytes"
    "encoding/gob"
    "fmt"
)

type Data struct {
    Name string
    Data interface{}
}

type SubType struct {
    Foo string
}

func main() {
    // Encode
    encodeData := Data{
        Name: "FooBar",
        Data: SubType{Foo: "Test"},
    }
    mCache := new(bytes.Buffer)
    encCache := gob.NewEncoder(mCache)
    encCache.Encode(encodeData)

    fmt.Printf("Encoded: ")
    fmt.Println(mCache.Bytes())

    // Decode
    var data Data
    pCache := bytes.NewBuffer(mCache.Bytes())
    decCache := gob.NewDecoder(pCache)
    decCache.Decode(&data)

    fmt.Printf("Decoded: ")
    fmt.Println(data)
} 
```

## 输出

### 预期产出

编码： [37 255 129 3 1 1 4 68 97 116 97 1 255 130 0 1 2 1 4 78 97 109 101 1 12 0 1 4 68 97 116 97 1 255 132 0 0 0 29 255 781 3 7 1 1 98 84 121 112 101 1 255 132 0 1 1 1 3 70 111 111 1 12 0 0 0 19 255 130 1 6 70 111 111 66 97 114 1 1 4 84 101 115 116 0 0]

解码：{FooBar {Test}}

### 当前结果

编码： [37 255 129 3 1 1 4 68 97 116 97 1 255 130 0 1 2 1 4 78 97 109 101 1 12 0 1 4 68 97 116 97 1 255 132 0 0 0 29 255 781 3 7 1 1 98 84 121 112 101 1 255 132 0 1 1 1 3 70 111 111 1 12 0 0 0 19 255 130 1 6 70 111 111 66 97 114 1 1 4 84 101 115 116 0 0]

解码：{}

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-09T23:06:01.150

问题是在您的代码中，执行时出现错误，`encCache.Encode(encodeData)`但由于您不检查错误，因此您没有意识到这一点。输出为空白，因为 encodedData 未能正确编码。

如果添加错误检查，

```
err := enc.Encode(encodeData)
if err != nil {
    log.Fatal("encode error:", err)
} 
```

然后你会看到类似的东西

```
2013/03/09 17:57:23 encode error:gob: type not registered for interface: main.SubType 
```

如果在 enc.Encode(encodeData) 之前在原始代码中添加一行，

```
gob.Register(SubType{}) 
```

然后你得到预期的输出。

```
Decoded: {FooBar {Test}} 
```

见[http://play.golang.org/p/xt4zNyPZ2W](http://play.golang.org/p/xt4zNyPZ2W)

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-01-02T19:05:53.247

您无法解码为接口，因为解码器无法确定该字段应该是什么类型。

您可以通过几种不同的方式处理此问题。一种是让 Data 保存一个结构，其中包含可以解码的每种类型的字段。但是类型可能非常复杂。

另一种方法是为您的结构实现 GobDecoder 和 GobEncoder 接口，并为类型实现您自己的序列化。不过，这可能并不理想。

也许最好的方法是让缓存存储特定类型，并为每种类型使用单独的方法。用你的例子。您的应用程序将在缓存`GetSubType(key string) (*SubType, error)`上调用一个缓存方法。这将返回具体类型或解码错误而不是接口。它会更干净，更易读，也更安全。

# java - 通过两个事件之一调用单个事件监听器？

> ID：14121426
> 
> 赞同：3
> 
> 时间：2013-01-02T11:41:21.640
> 
> 标签：java, jquery, ajax, jsf, primefaces

我正在尝试一种搜索功能，该功能应该通过单击事件或模糊事件调用 bean 上的方法，该事件首先被调用。我需要这两个事件，因为每当用户输入内容时，它都应该显示结果，并且如果用户已经复制并粘贴到搜索框中，那么它也应该可以工作。因为在第二种情况下没有关键事件，这就是我需要模糊事件的原因。我尝试在它们之间放置分隔符，例如：

```
<f:ajax event="keyup blur" listener="#{mybean.search}" render="something"> 
```

也喜欢

```
<f:ajax event="keyup,blur" listener="#{mybean.search}" render="something"> 
```

它没有用

所以现在我使用我的代码作为

```
<p:inputText value="#{mybean.search}" >
            <f:ajax listener="#{mybean.searchByIdListener}" event="keyup" render="datatable"/>
            <f:ajax listener="#{mybean.searchByIdListener}" event="blur" render="datatable"/>
</p:inputText> 
```

但是这段代码调用了事件监听器两次。如果首先发生的这两个事件中的任何一个只调用一次事件侦听器，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:31:11.607

为什么不使用这样的东西：

```
<p:inputText onchange="" /> 
```

来自用户指南：

```
Client side callback to execute when input element loses
focus and its value has been modified since gaining focus. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:07:23.120

不确定primefaces，但在richfaces 中，您可以使用ajax 支持并调用多个事件。否则你可以使用`focus`事件吗？

# c# - 在使用 WCF 时返回 DateTime 对象

> ID：14121428
> 
> 赞同：0
> 
> 时间：2013-01-02T11:41:26.693
> 
> 标签：c#, .net, wcf, datetime

我`DateTime`在 SQL Server 的 DateTime 字段中保存了一个对象。我正在与来自不同时区的客户打交道。我希望将 DateTime 原样返回给用户，而无需转换为用户的时区。我尝试将对象的`Kind`属性设置为，以便客户端的机器不会将其转换为本地时间，但它仍然以某种方式计算出原始时区并将其转换为本地时区。`DateTime``DateTimeKind.Unspecified`

例如，如果`DateTime`对象是“13DEC2012 00:00”，即使 WCF 服务器时区与客户端的时区不同，它也会以“13DEC2012 00:00”的形式返回给客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:51:41.900

您可以为此使用[DateTimeOffset](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.aspx)。这应该使您能够将时间表示为相对于 UTC 的时间。

# hibernate - JPA：获取单个记录@OneToOne 和@PrimaryKeyJoinColumn 时的多个选择语句

> ID：14121429
> 
> 赞同：1
> 
> 时间：2013-01-02T11:41:29.093
> 
> 标签：hibernate, jpa

将我的实体视为 CPU 和 PROCESSOR 与共享主键具有一对一的关系。一个 CPU 有一个处理器。

CPU.java

```
@Entity
@Table(name = "PKJoin_CPUt")
public class CPU {

    private int id;
    private String name;
    private Processor processor;

    @OneToOne(cascade = CascadeType.PERSIST, mappedBy = "cpu", optional = true,fetch=FetchType.LAZY)
    public Processor getProcessor() {
        return processor;
    }
    public void setProcessor(Processor processor) {
        this.processor = processor;
        if (null != processor) {
            processor.setCpu(this);
        }
    }
    private Processor2 processor2;

    @OneToOne(cascade = CascadeType.PERSIST, mappedBy = "cpu", optional = true,fetch=FetchType.LAZY)
    public Processor2 getProcessor2() {
        return processor2;
    }

    public void setProcessor2(Processor2 processor2) {
        this.processor2 = processor2;
        if (null != processor2) {
            processor2.setCpu(this);
        }
    }

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
        if (null != processor) {
            processor.setId(id);
        }
        if (null != processor2) {
            processor2.setId(id);
        }
    }

    public String getName() {
        return name;
    }

    public void setName(String deptName) {
        this.name = deptName;
    }

} 
```

处理器.java

```
@Entity
@Table(name = "PKJoin_Processor")
public class Processor {

    private int id;
    private String name;

    private CPU cpu;

    @OneToOne(fetch=FetchType.LAZY)
    @PrimaryKeyJoinColumn
    public CPU getCpu() {
        return cpu;
    }

    public void setCpu(CPU cpu) {
        this.cpu = cpu;
    }
    @Id
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

主.java

```
public class Main {
  static EntityManagerFactory emf = Persistence.createEntityManagerFactory("Hello");
  static EntityManager em = emf.createEntityManager();

  public static void main(String[] a) throws Exception {
    em.getTransaction().begin();

    new Main().findData();
   // new Main().persistData();

    em.getTransaction().commit();
    em.close();
    emf.close();    

  }

 public void findData(){      

    CPU cpu = em.find(CPU.class, 449);
    System.out.println(cpu.getProcessor().getName());   

  }
} 
```

这是这样执行的::

```
 Hibernate: select cpu0_.id as id11_0_, cpu0_.name as name11_0_ from PKJoin_CPUt cpu0_ where cpu0_.id=?
    Hibernate: select processor0_.id as id38_0_, processor0_.name as name38_0_ from  PKJoin_Processor processor0_ where processor0_.id=?
    Hibernate: select processor2x0_.id as id19_0_, processor2x0_.name as name19_0_ from PKJoin_Processor222 processor2x0_ where processor2x0_.id=? 
```

乔

我不希望在仅获取 CPUName 属性时执行这三个查询。我也不想加入。每当我尝试获取 CPU 属性时，我只想执行第一个查询。需要解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:39:53.463

问题在于，由于关联是可选的，Hibernate 无法仅通过加载 CPU 来知道它是否具有关联的处理器。因此，为了将处理器字段设置为空，或者将其设置为处理器的实例，它必须使用 CPU 的主键检查处理器是否存在。

为避免这种情况，最简单的方法是使用 CPU 中指向处理器的连接列来映射关联。这样，如果连接列为空，Hibernate 就知道没有关联的 CPU。如果它不为空，它可以将 procssor 字段设置为惰性代理。

另一种方法，AFAIK，是使用`@LazyToOne(NO_PROXY)`, 并[检测 bytecode](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#performance-fetching-lazyproperties)。但是我过去在这种设置方面有过不好的经历。也许它已经有所改善。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:47:04.217

在您的 findData() 中，您执行 cpu.getProcessor().getName()，因此您得到第一个处理器的查询是合乎逻辑的。

您在 CPU.setId() 函数中做了一些奇怪的事情，也许这就是加载处理器的原因。

你不应该这样做，你应该让hibernate来处理这个。对于基于主键的双向一对一关系，我认为您需要以下内容：

```
public class CPU { 
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;

    @OneToOne(cascade = CascadeType.ALL, mappedBy = "cpu", fetch=FetchType.LAZY)
    private Processor processor; 

    ...
}

public class Processor {  
    @Id @OneToOne 
    @JoinColumn("id")
    private CPU cpu;  //combine @Id and @OneToOne, no int id needed.

    protected Processor(){}    

    public Processor(CPU cpu){
       this.cpu = cpu;
       cpu.setProcessor(this);
    }    
    ...
} 
```

现在如果你保存一个带有 CPU 的处理器，它的 id 会神奇地用 CPU 的 id 填充。确保以正确的顺序保存它们：

```
CPU cpu = new CPU();
em.save(cpu);
Processor p = new Processor(cpu);
em.save(p); 
```

# ruby-on-rails-3 - 无法为 Draper 运行 rails 生成器

> ID：14121430
> 
> 赞同：0
> 
> 时间：2013-01-02T11:41:45.937
> 
> 标签：ruby-on-rails-3, decorator, ruby-1.9.3, draper

我在 Ruby 1.9.3 和 Rails 3.0.11 上。我最近安装了 Draper(0.12.0) gem，但我无法运行它的生成器。当我尝试在 Post 模型上运行生成器时出现以下错误：-

```
rails generate decorator Post
/home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.11/lib/active_support/whiny_nil.rb:48:in `method_missing': undefined method `config' for nil:NilClass (NoMethodError)
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/draper-0.12.0/lib/draper/railtie.rb:6:in `block in <class:Railtie>'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/railtie.rb:189:in `call'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/railtie.rb:189:in `each'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/railtie.rb:189:in `load_generators'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/application.rb:147:in `block in load_generators'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/application/railties.rb:11:in `each'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/application/railties.rb:11:in `all'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/application.rb:147:in `load_generators'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/generators.rb:319:in `load_generators_from_railties!'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/generators.rb:278:in `lookup'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/generators.rb:141:in `find_by_namespace'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/generators.rb:161:in `invoke'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/commands/generate.rb:10:in `<top (required)>'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `require'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `block in require'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:225:in `block in load_dependency'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:593:in `new_constants_in'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:225:in `load_dependency'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.11/lib/active_support/dependencies.rb:239:in `require'
    from /home/mohnish/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.11/lib/rails/commands.rb:17:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

任何关于如何调试的输入都会非常有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:45:28.920

问题是 v0.12.0 中的这一部分（您正在使用的那个）[https://github.com/drapergem/draper/blob/v0.12.0/lib/draper/railtie.rb#L5-L8](https://github.com/drapergem/draper/blob/v0.12.0/lib/draper/railtie.rb#L5-L8)

当我查看主分支时，它们更改为代码如下：[https://github.com/drapergem/draper/blob/master/lib/draper/railtie.rb#L5-L10](https://github.com/drapergem/draper/blob/master/lib/draper/railtie.rb#L5-L10)

您应该将 draper gem 升级到最新版本，看看是否仍然出现错误。

# ios - iOS - 内存泄漏地址簿

> ID：14121441
> 
> 赞同：5
> 
> 时间：2013-01-02T11:42:26.190
> 
> 标签：ios, memory, memory-leaks, addressbook

当我在我的应用程序中发现一些不同类型的内存泄漏时，我正在使用 AddressBook 框架：

```
Leaked Object   #   Address Size    Responsible Library Responsible Frame
__NSCFArray 8   < multiple >    256 Bytes   AddressBook ABCMultiValueInsertAndCreateIdentifier
__NSCFString    7   < multiple >    224 Bytes   AppSupport  _sqliteStatementApplyValuesFromRecordWithNullValue
Malloc 32 Bytes 8   < multiple >    256 Bytes   AddressBook ABCMultiValueInsertAndCreateIdentifier
__NSCFArray 8   < multiple >    256 Bytes   AddressBook ABCMultiValueInsertAndCreateIdentifier
ABCMultiValue   8   < multiple >    256 Bytes   AddressBook ABCMultiValueCreate
Malloc 32 Bytes 7   < multiple >    224 Bytes   AddressBook ABCMultiValueInsertAndCreateIdentifier
__NSCFArray 7   < multiple >    224 Bytes   AddressBook ABCMultiValueInsertAndCreateIdentifier
Malloc 32 Bytes 5   < multiple >    160 Bytes   AddressBook ABCMultiValueInsertAndCreateIdentifier 
```

这是我的代码：

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

    SDAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    ABMultiValueRef multiRef = ABRecordCopyValue(person, kABPersonPhoneProperty);
    NSString *number = (__bridge NSString *) ABMultiValueCopyValueAtIndex(multiRef, 0);
    NSString *firstname = (__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
    NSString *lastname = (__bridge NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);

    number = (number ? number : @"");
    firstname = (firstname ? firstname : @"");
    lastname = (lastname ? lastname : @"");

    NSDictionary *dic = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:number, firstname, lastname, nil] forKeys:[NSArray arrayWithObjects:kSDPhoneNumberKey, kSDFirstnameKey, kSDLastnameKey, nil]];

    NSMutableArray *numberArray = [NSMutableArray arrayWithArray:appDelegate.contactArray];
    [numberArray addObject:dic];

    [appDelegate setContactArray:numberArray];

    [self.tableView reloadData];

    [self dismissModalViewControllerAnimated:YES];

    return NO;
} 
```

有人知道哪些线路是造成这些泄漏的原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:26:03.243

通常，任何具有`Copy`或`Create`名称中的 Core Foundation 方法都应该将所有权转移给您的 ARC 对象，或者您必须调用`CFRelease`自己。因此，您应该转移三个`NSString`对象的所有权，并手动释放`multiRef`.

要将所有权转移给 ARC，您应该使用`CFBridgingRelease`，根据[WWDC 2012 - Modern Objective-C](https://developer.apple.com/videos/wwdc/2012/?id=405)（视频中大约 37:35），现在比以前的技术更受欢迎，`__bridging_transfer`（尽管在幕后，它们是相同的事物）。

无论如何，你的三个`NSString`对象的声明应该是：

```
NSString *number = CFBridgingRelease(ABMultiValueCopyValueAtIndex(multiRef, 0));
NSString *firstname = CFBridgingRelease(ABRecordCopyValue(person, kABPersonFirstNameProperty));
NSString *lastname = CFBridgingRelease(ABRecordCopyValue(person, kABPersonLastNameProperty)); 
```

这相当于：

```
NSString *number = (__bridge_transfer NSString *) ABMultiValueCopyValueAtIndex(multiRef, 0);
NSString *firstname = (__bridge_transfer NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
NSString *lastname = (__bridge_transfer NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty); 
```

另外，也不要忘记发布`multiRef`：

```
CFRelease(multiRef); 
```

顺便说一句，如果您运行静态分析器，我相信它会为您指出这些。从“产品”菜单中选择“分析”，或按`shift`+ `command`+ `B`。

# sencha-touch-2 - 在 Ext.form.Panel 上离开事件

> ID：14121442
> 
> 赞同：0
> 
> 时间：2013-01-02T11:42:27.897
> 
> 标签：sencha-touch-2

当用户点击 Ext.form.Panel 之外的其他地方时是否触发了任何事件？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:20:12.357

那么在这种情况下，您应该听点击面板外部的组件区域。你可以倾听发生的事情而不是没有发生的事情。

顺便说一句，如果您的面板是模态窗口并且有人正在点击视口的蒙版部分，那么您可以使用 hideOnMaskTap 配置隐藏它（如果这是您想要的）：http://docs.sencha.com/touch/2-1/# [！ /api/Ext.Container-cfg-hideOnMaskTap](http://docs.sencha.com/touch/2-1/#!/api/Ext.Container-cfg-hideOnMaskTap)

# python - 如何获取图形工具中特定布局算法绘制的图形的坐标？

> ID：14121445
> 
> 赞同：6
> 
> 时间：2013-01-02T11:42:36.500
> 
> 标签：python, graph, coordinates, graph-layout

我想做[这里](http://projects.skewed.de/graph-tool/wiki/FrontpageExample)显示的例子。它在我的机器上运行良好。问题是，我无法将节点的坐标作为存储在变量*pos*某处的数组获取。我该怎么做呢？

提前感谢您的回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:38:01.643

`import pdb; pdb.Pdb().set_trace()`我在分配给 的那一行之后卡住了一个`pos`，然后戳了戳`pos`。它是一个`graph_tool.PropertyMap`包含顶点属性：

```
(Pdb) pos
<PropertyMap object with key type 'Vertex' and value type 'vector<double>', for Graph 0x2efbf90 
```

似乎没有直接的方法来迭代这个对象的每个顶点，但我们可以得到图形，并询问每个顶点的图形：

```
(Pdb) pos.get_graph().vertices()
<graph_tool.libgraph_tool_core.VertexIterator object at 0x2f99950> 
```

这将遍历每个顶点，我们可以将其用作 的键`pos`，这是一个映射：

```
(Pdb) pos[pos.get_graph().vertices().next()]
array([-37.40184702,  25.3717068 ]) 
```

或者如果你想要所有这些，你可以把它放在示例程序中：

```
for vertex in g.vertices():
    print pos[vertex] 
```

这将打印：

```
array([-37.40184702,  25.3717068 ])
array([-37.5790565 ,  26.77548156])
array([-35.57640651,  24.60125253])
array([-38.90262591,  24.30374   ])
array([-33.72945377,  24.31891936])
array([-32.68247364,  25.85861809])
[...] 
```

# django - Django 构造对象

> ID：14121448
> 
> 赞同：0
> 
> 时间：2013-01-02T11:42:48.903
> 
> 标签：django, json, django-models

我正在开发一个应用程序的后端，并编写一个函数来从多个表中检索数据，然后从中构造一个 httpresponse。

我想做的是获得一种疫苗，然后是该疫苗的所有疾病，然后构建包含所有内容的东西（对象，列表，字典，...）。

到目前为止，我得到的是：

```
def vaccinepack(request, country_id):
    vaccines = Vaccine.objects.filter(diseases__countries__id=country_id)
    diseases = []
    json = serializers.get_serializer("json")()
    response = HttpResponse()
    for v in vaccines:
        dis = Disease.objects.filter(vaccine=v.id)
        disdata = ""
        for d in dis:
            disdata += json.serialize([d], ensure_ascii=False)
        json.serialize([v, disdata], ensure_ascii=False, stream=response)
    return response 
```

但是我在序列化 [v, disdata] 时遇到了麻烦。

```
'list' object has no attribute '_meta'. 
```

我对 Django 很陌生，所以我不确定这样做的正确方法是什么。

这是我的模型：

```
class Disease(models.Model):
    name = models.CharField(max_length=100)
    text = models.CharField(max_length=2000)
    countries = models.ManyToManyField(Country, blank=True)
    def __unicode__(self):
        return self.name

class Vaccine(models.Model):
    name = models.CharField(max_length=100)
    text = models.CharField(max_length=2000)
    diseases = models.ManyToManyField(Disease, blank=True)
    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:30:12.650

您的错误消息的直接原因是因为您将一个列表对象传递给 Django 序列化程序，但它需要一个 QuerySet。

我要做的是将数据结构构建为一系列嵌套的 Python 字典，然后在最后将其全部转换为 JSON `json.dumps()`。（请注意，这是实际的内置`json`库，您已使用序列化程序对其进行了隐藏。）类似于（未经测试）：

```
serializer = serializers.get_serializer('python')
vaccine_list = serializer.serialize(vaccines)
for i, v in enumerate(vaccines):
    diseases = v.diseases.all()
    disease_list = serializer.serialize(diseases)
    vaccine_list[i]['fields']['diseases'] = disease_list
data = json.dumps(vaccine_list) 
```

# xcode - 在 UIPickerview xcode 上解析 JSON 值

> ID：14121449
> 
> 赞同：2
> 
> 时间：2013-01-02T11:42:53.530
> 
> 标签：xcode, json, parsing, uipickerview

我有一个选择器视图，我想使用 JSON 解析来显示值。我知道网站上的一些问题已经解决了解析和pickerview，但我的json文件结构略有不同。这是 json 文件的示例。

```
[
{
"model":"juice",
"id" :
  [
    {
        "version": "version01"
    },

    {
        "version": "version02"
    }

  ]
},
 {
"model":"cream",
"id" :
[
  {
      "version": "cream01"
  },

  {
      "version": "cream02"
  }
]
}
] 
```

和我的 .m 文件

```
- (void)viewDidLoad
    {
    [super viewDidLoad];

    NSURL * serverhost = [NSURL URLWithString:@"http://my.json"];

    NSError *error;

    NSData  * Data  = [NSData  dataWithContentsOfURL: serverhost];

    self.modelsArray= [NSJSONSerialization JSONObjectWithData:Data   options:NSJSONReadingAllowFragments error:&error];

    NSLog(@"%@", modelsArray);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component
{
    if (component == departments)
        return [self.modelsArray count];
    return [self.versionsArray count];
}

#pragma mark Picker Delegate Methods
- (NSString *)pickerView:(UIPickerView *)pickerView
         titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    if (component == departments)
          return [[self.modelsArray    objectAtIndex:row]objectForKey:@"model"];
    return [[[self.versionsArray objectAtIndex:row]objectForKey:@"model"]objectForKey:@"version"];
}

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:    (NSInteger)component
{
    if (component == departments)
    {
        NSString * selectedRow = [[self.modelsArray objectAtIndex: row]    valueForKey:@"version"];
        NSArray * array = [sybreDepts objectForKey:selectedRow];
        self.
    }
}

@end 
```

Basically when I select a model ie juice or cream on the first column the second column should display its contents with key being 'versions' thus when juice is selected "version01" and "version02" should be displayed on the second column.

关于该行`return [[[self.versionsArray objectAtIndex:row]objectForKey:@"model"]objectForKey:@"version"];`，我不相信它执行正确，因为我收到错误

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0xa18c450' . Any suggestions ? Thanks 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:28:02.080

如果您很好地缩进您的 JSON 数据并查看它：

```
[
    {
        "model": "juice",
        "id" : [
            {
                "version": "version01"
            }, 
            {
                "version": "version02"
            }
        ]
    },
    .... 
```

然后您会看到它具有以下结构（从外部元素到内部元素）：

1.  数组
2.  具有两个键的对象/字典：*模型*和*版本*
3.  *键模型*的字符串和键*id*的对象/字典
**   （仅用于密钥*ID ）密钥**版本*的字符串*

 **所以如果你想访问第一个模型的第二个版本，你必须这样写：

```
NSArray* versionsArray = [[self.modelsArray objectAtIndex:modelRow] objectForKey:@"id"];
NSString* versionName = [[versionArray objectAtIndex: versionRow] objectForKey:@"version"]; 
```

在您的代码中，我看不到在哪里`self.versionArray`分配了值。正如我在评论中指出的那样，以下行与 JSON 数据结构不匹配：

```
return [[[self.versionsArray objectAtIndex:row]objectForKey:@"model"]objectForKey:@"version"]; 
```

那个部分：

```
[[self.versionsArray objectAtIndex:row]objectForKey:@"model"] 
```

将返回一个`NSString`实例。如果你再打电话`objectForKey:@"version"`，你会得到*无法识别的选择器发送*错误。

**更新：**

更改后的代码可能如下所示：

**.h 文件：**

```
NSInteger modelRow; 
```

**.m 文件：**

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    if (component == departments)
        return [self.modelsArray count];

    NSArray* versionsArray = [[self.modelsArray objectAtIndex:modelRow] objectForKey:@"id"];
    return [versionsArray  count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    if (component == departments)
          return [[self.modelsArray objectAtIndex:row]objectForKey:@"model"];

    NSArray* versionsArray = [[self.modelsArray objectAtIndex:modelRow] objectForKey:@"id"];
    return [[versionsArray objectAtIndex:row] objectForKey:@"version"];
}

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:    (NSInteger)component
{
    if (component == departments)
    {
        modelRow = row;
        [pickerView reloadComponent:1];
    }
}

@end 
```**

# objective-c - iOS：徽章计数器与通知中心

> ID：14121452
> 
> 赞同：0
> 
> 时间：2013-01-02T11:43:04.900
> 
> 标签：objective-c, ios, notifications, notificationcenter

我对通知中心和应用程序徽章计数器有点（很多）困惑。我设计了一个 iOS 待办事项应用程序，它使用本地通知来提醒用户计划提醒（他们在应用程序中设置）。该应用程序还使用图标批处理计数器来显示“今天”到期的任务数。

在设置提醒通知正确显示在通知中心的时间。但是，一旦打开应用程序，通知就会从通知中心清除。这个想法是通知在通知中心保持可用，直到用户清除它们。

我已经和我的开发人员讨论过这个问题，他说只有在我们不使用图标批处理计数器时才能将通知保存在 NC 中。这对我来说似乎很不合逻辑，因为图标批处理计数器显示“今天”到期的任务数，而通知中心中显示的通知是用户设置的警报。

希望你们能在这里提供帮助....谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:22:57.177

应用程序可以设置自己的徽章（计数器），独立于计划的通知。所以你当然可以通过以下方式设置你想要显示今天任务的任何计数器：

```
NSUInteger tasksCount = 10; 
[UIApplication sharedApplication].applicationIconBadgeNumber = tasksCount; 
```

谈论要在 NF 栏中显示的通知，它可由用户在设备的本机中进行配置：设置-> 通知-> 因此，如果用户已配置，您不能强制用户在 NF 栏中显示所有通知（假设当天为 50 个）只有5。

回到您的关注点，当应用程序启动时，来自 NF 栏的通知不会自动消失。您必须编写**代码**才能从应用程序内部删除它们。

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

或者

```
[[UIApplication sharedApplication] cancelLocalNotification:<notification object>]; 
```

# javascript - 对 html 弹出窗口执行 fetch 查询

> ID：14121457
> 
> 赞同：1
> 
> 时间：2013-01-02T11:43:23.020
> 
> 标签：javascript, html, dynamics-crm-2011

我创建了一个 html Web 资源，当单击功能区按钮时会显示该资源。在此弹出窗口中，我有一个下拉列表，我想用我使用 fetchXml 查询获得的记录列表填充该列表。

我的问题是我尝试了几种不同的方法来执行查询，但它总是返回错误。我猜测弹出窗口不会具有与父表单相同的功能范围，因此我需要做一些不同的事情来执行查询。

目前我有它，所以我已经加载了一个包含执行提取所需的函数的外部脚本，但是代码看不到 _HtmlEncode 的 CRM 函数，因此失败了。

有什么方法可以让弹出窗口查看 CRM 功能？还是有另一种方法可以做到这一点？

编辑：一些示例代码

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:asp>
<head>
   <title>Re-Assign</title>
   <script type=text/javascript src="ClientGlobalContext.js.aspx"></script>

   <script type=text/javascript src="http://crm/DEVCRM/WebResources:ts_/scripts/fetch_global.js"></script>

   <script type=text/javascript>

   function OnLoad_GetAreasAndConsultants() {

       var fetchXml = '<fetch distinct="false" mapping="logical" output-format="xml-platform" version="1.0"><entity name="ts_solution_area"><attribute name="ts_solution_areaid"/><attribute name="ts_descriptor"/><attribute name="createdon"/> <order descending="false" attribute="ts_descriptor"/><filter type="and"><condition attribute="statecode" value="0" operator="eq"/></filter></entity></fetch>';
       var fetchedRecords = FetchRecordsToolKit.Fetch(fetchXml);

       if (fetchedRecords !== null) {

            var areaList = document.getElementById("ddl_solution_area")

            for (var i=0; i<fetchedRecords.length;i++) {

                var name = fetchedRecords[i].getValue("ts_descriptor");

                areaList.options[select.options.length] = new Option(name, i);
            }
        }
   }
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:25:34.817

我专门为在 HTML Web 资源中执行 fetch 构建了一些东西。

[https://github.com/paul-way/JCL/blob/master/jcl.js](https://github.com/paul-way/JCL/blob/master/jcl.js)

这是一个使用它的例子：

```
var processProjectInfo = function (data) {
    if (data.length > 0) {
        // Set Project Header Information
        $('#ProjectTitle').html(data[0].attributes.new_name.value);
        $('#CompanyName').html(data[0].attributes.new_accountid.name);
    }
};

var loadProjectInfo = function (guid) {
    var fetchXML = " " +
        "<fetch mapping='logical' count='10'>" +
        "  <entity name='new_project'>" +
        "    <all-attributes/>" +
        "    <filter>" +
        "      <condition attribute='new_projectid' operator='eq' value='" + guid + "' />" +
        "    </filter>" +
        "  </entity>" +
        "</fetch>";

    JCL.Fetch(fetchXML, processProjectInfo);
}; 
```

# c++ - 如何配置 Jenkins 以检测 SVN 更改并执行作业？

> ID：14121463
> 
> 赞同：3
> 
> 时间：2013-01-02T11:43:50.537
> 
> 标签：c++, linux, svn, jenkins, cmake

我已经配置了[Jenkins](https://wiki.jenkins-ci.org/pages/viewpage.action?pageId=65143593)并创建了一个工作来从 SVN 签出、构建和运行一个简单的项目。我可以将此作业配置为定期运行，例如每五分钟运行一次。但我希望它仅在 SVN 存储库发生更改时才构建项目。我阅读了[本文档的“](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-Buildsbysourcechanges)**按源更改构建**”部分，但无法弄清楚我到底要做什么！任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:56:23.880

当你配置你的工作时，你必须这样做：

1.  在**Source Code Management**中指定您使用的源代码管理系统（例如 SVN）并填写所有必填字段（url、身份验证等）（可能已经完成，因为您可以进行结帐）

2.  在**Build Triggers**部分：选择 Poll SCM 并安排`*/10 * * * *`每 10 分钟检查一次存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:58:21.930

转到项目的配置并向下滚动到**源代码管理**部分下的**构建触发器。**在这里，您必须以这种方式配置它：

 **![在此处输入图像描述](../Images/0ba90a5ed1310968600cfb10a89a7772.png)

安排作业的语法是**crontab 格式**，请看[这里](http://en.wikipedia.org/wiki/Cron#Predefined_scheduling_definitions)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T16:55:21.690

您正在寻找的是 Subversion 提交后挂钩，它将执行您在挂钩脚本中编写的任何脚本。看看 Mike West 的以下示例：

[Mike West - Subversion Post-commit-hook](https://mikewest.org/2006/06/subversion-post-commit-hooks-101)

祝你好运！**

# mysql - 与 MISAM 相比，在插入期间使用 InnoDB 的 mysql 速度较慢

> ID：14121464
> 
> 赞同：7
> 
> 时间：2013-01-02T11:44:08.727
> 
> 标签：mysql, performance, logging, insert, innodb

我刚刚安装了具有 InnoDB 默认引擎的 MySQL 5.5，并实现 INSERT 查询真的很慢！禁用通用日志后，它变得更好了，但仍然很慢。我分析mysql以找到问题但没有机会。

这是比较这个的基准：

**使用 500 行测试一个 (n) MISAM 表。** - 每秒 5866 次插入。- 每秒 128866 行读取。- 每秒 56306 次更新。

**使用 500 行测试一个 (n) INNODB 表。** - 每秒 9 次插入。- 每秒 28539 行读取。- 每秒 4358 次更新。

与使用 MyISAM 的 5866 相比，我在 InnoDB 上有 9 个插入查询。

这是我的 my.ini（Windows 8 64 位）：

```
[mysql]

default-character-set=utf8
no-auto-rehash

[mysqld]
max_allowed_packet = 500M
table_open_cache = 512

# The TCP/IP Port the MySQL Server will listen on
port=3306

# Path to installation directory. All paths are usually resolved relative to this.
basedir="C:\Program Files\MySQL\MySQL Server 5.5\"

# Path to the database root
datadir="D:\MySQL Datafiles\data\"

# The default character set that will be used when a new schema or table is
# created and no character set is defined
character-set-server=utf8

# The default storage engine that will be used when create new tables when
# default-storage-engine=MYISAM

# Set the SQL mode to strict
sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"

# Enable Windows Authentication
# plugin-load=authentication_windows.dll

# General and Slow logging.
#log-output=FILE
#general-log=0
#general_log_file="POOYA.log"
#slow-query-log=0
#slow_query_log_file="POOYA-slow.log"
#long_query_time=10

#innodb_flush_log_at_trx_commit = 2

# Binary Logging.
# log-bin

# Error Logging.
log-error="POOYA.err"

max_connections=100

query_cache_size=32M

table_cache=512

tmp_table_size=64M

thread_cache_size=8

myisam_max_sort_file_size=100G

myisam_sort_buffer_size=64M

key_buffer_size=256M

# Size of the buffer used for doing full table scans of MyISAM tables.
# Allocated per thread, if a full scan is needed.
read_buffer_size=1M
read_rnd_buffer_size=4M

# This buffer is allocated when MySQL needs to rebuild the index in
# REPAIR, OPTIMZE, ALTER table statements as well as in LOAD DATA INFILE
# into an empty table. It is allocated per thread so be careful with
# large settings.
sort_buffer_size=1M

#*** INNODB Specific options ***
# innodb_data_home_dir=0.0

# Use this option if you have a MySQL server with InnoDB support enabled
# but you do not plan to use it. This will save memory and disk space
# and speed up some things.
# skip-innodb

# Additional memory pool that is used by InnoDB to store metadata
# information.  If InnoDB requires more memory for this purpose it will
# start to allocate it from the OS.  As this is fast enough on most
# recent operating systems, you normally do not need to change this
# value. SHOW INNODB STATUS will display the current amount used.
innodb_additional_mem_pool_size=64M

# If set to 1, InnoDB will flush (fsync) the transaction logs to the
# disk at each commit, which offers full ACID behavior. If you are
# willing to compromise this safety, and you are running small
# transactions, you may set this to 0 or 2 to reduce disk I/O to the
# logs. Value 0 means that the log is only written to the log file and
# the log file flushed to disk approximately once per second. Value 2
# means the log is written to the log file at each commit, but the log
# file is only flushed to disk approximately once per second.
innodb_flush_log_at_trx_commit=1

# The size of the buffer InnoDB uses for buffering log data. As soon as
# it is full, InnoDB will have to flush it to disk. As it is flushed
# once per second anyway, it does not make sense to have it very large
# (even with long transactions).
innodb_log_buffer_size=8M

# InnoDB, unlike MyISAM, uses a buffer pool to cache both indexes and
# row data. The bigger you set this the less disk I/O is needed to
# access data in tables. On a dedicated database server you may set this
# parameter up to 80% of the machine physical memory size. Do not set it
# too large, though, because competition of the physical memory may
# cause paging in the operating system.  Note that on 32bit systems you
# might be limited to 2-3.5G of user level memory per process, so do not
# set it too high.
innodb_buffer_pool_size=512M

# Size of each log file in a log group. You should set the combined size
# of log files to about 25%-100% of your buffer pool size to avoid
# unneeded buffer pool flush activity on log file overwrite. However,
# note that a larger logfile size will increase the time needed for the
# recovery process.
innodb_log_file_size=49M

# Number of threads allowed inside the InnoDB kernel. The optimal value
# depends highly on the application, hardware as well as the OS
# scheduler properties. A too high value may lead to thread thrashing.
innodb_thread_concurrency=17
[mysqldump]
quick
max_allowed_packet = 16M

[myisamchk]
key_buffer_size = 128M
sort_buffer_size = 128M
read_buffer = 2M
write_buffer = 2M

[mysqlhotcopy]
interactive-timeout 
```

我已经编辑了这个文件以获得高性能，mysql 5.1也没有任何问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T12:07:59.580

根据要求，提交级别的日志记录通常会导致大量磁盘压力，从而大大降低了带有 inno 的 mysql 实例上的数据吞吐量。

将 mysql.ini 设置为`innodb_flush_log_at_trx_commit = 0`（或 2）通常可以解决此问题。

请注意，ACID 规则希望该值为 1...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T11:48:21.123

您也可以使用以下命令直接在 MySQL 命令行上进行设置：

```
SET GLOBAL innodb_flush_log_at_trx_commit = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-19T15:38:21.580

您是否一次添加一行？

如果您为每个事务添加多行，那将**有很大**帮助。

```
# 1:
INSERT INTO my_table VALUES (1, "A");
INSERT INTO my_table VALUES (2, "B");

# 2:
INSERT INTO my_table VALUES (1, "A"),(2, "B");

# 3:
BEGIN;
INSERT INTO my_table VALUES (1, "A");
INSERT INTO my_table VALUES (2, "B");
COMMIT; 
```

在 InnoDB 中 #2 和 #3 将比 #1 快得多。

#2 对 MyISAM 也有帮助，但作用不大。粗略的数字，我看到这将 MyISAM 提高了 2 倍，将 InnoDB 提高了 100 倍。

# php - PHP注销系统无法正常工作。（MAMP 上的 session_destroy）

> ID：14121468
> 
> 赞同：2
> 
> 时间：2013-01-02T11:44:36.127
> 
> 标签：php, session, mamp, logout

我最近将我的网站从 XAMPP 转移到了 MAMP。问题是我的注销系统不再工作。注销小部件：

```
<a href="logout.php">Log Out</a> 
```

我的注销页面本身：

```
<?php 
session_start()
session_destroy()
header('Location:login.php');
?> 
```

奇怪的是，当我将某些内容更改为 logout.php 时，例如使其成为一个简单的 echo 语句：

```
<?php 
echo 'test';

//session_start()
//session_destroy()
//header('Location:login.php');
?> 
```

我的浏览器中仍然没有看到“测试”；我只是留在 index.php，即使我已经注释掉了页面中的标题。我是 100% 链接路径很好。

无论我是否更改 logout.php 文件，我都可以看到服务器没有删除 tmp/php 中的会话文件。这很奇怪，因为我在 MAC OS X 中允许每个人都可以读取和写入这个 tmp/php 文件夹。

操作系统：MAC OS X
服务器：MAMP
PHP：5.4.4中的 Apache
浏览器：Google Chrome 和 Safari 都出现问题

（这是我在 stackoverflow 上发布问题的处女航，如果您提示改进我的提问，请告诉我）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:52:10.497

尝试改用这个：

```
<?
    session_start();

    $_SESSION = array();
    header("Location: index.php");
?> 
```

我只是清除 $_SESSION，它总是对我有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:00:57.753

如果在包含以下代码时调用 logout.php 不打印`test`，那么还有其他错误，与会话无关。

```
<?php 
echo 'test';
//session_start()
//session_destroy()
//header('Location:login.php');
?> 
```

你提到它仍然显示 index.php，这让我觉得你的`.htaccess`文件中有一个重写规则，它将调用从 logout.php 重定向到索引。检查您的 htaccess 文件是否有任何规则。

您可以在此处找到有关[MAMP 上的 htaccess 的信息](http://www.witheringtree.com/2010/03/htaccess-vs-mamp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:53:19.847

这些是注销的基本部分，假设您的脚本正在使用 PHP 会话。请注意，您的注销脚本会导致解析错误，因为它在语句末尾缺少分号。也许只是一个错字。

```
<?php // RAY_EE_logout.php
session_start();

// CLEAR THE INFORMATION FROM THE $_SESSION ARRAY
$_SESSION = array();

// IF THE SESSION IS KEPT IN COOKIE, FORCE SESSION COOKIE TO EXPIRE
if (isset($_COOKIE[session_name()]))
{
   $cookie_expires  = time() - date('Z') - 3600;
   setcookie(session_name(), '', $cookie_expires, '/');
}

// TELL PHP TO ELIMINATE THE SESSION
session_destroy();

// REDIRECT TO THE HOME PAGE
header("Location: /");
exit; 
```

HTH，~雷

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:53:40.613

尝试使用输出缓冲区。

```
<?php 
ob_start();
session_start();
session_destroy();
header('Location:login.php');
?>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-09T19:45:37.617

在我的情况下，它与未正确定义的 php 代码块有关。我有`<? ?>`而不是`<?php ?>`

希望这可以帮助某人。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-20T21:44:46.110

@tom.e.degroot：上次我检查时，“它不起作用”不是错误消息。你需要多描述一些症状。请遵循此处的指导：http: [//SSCCE.org](http://SSCCE.org)并给我们一些可以在我们自己的服务器上安装和测试的东西。谢谢，~雷

# c# - 无法将参数值从 List`1 转换为 IEnumerable`1

> ID：14121470
> 
> 赞同：7
> 
> 时间：2013-01-02T11:44:39.430
> 
> 标签：c#, sql, list

我将表值参数传递给 StoredProcedure。

请检查我下面的代码

```
CREATE TYPE TempTable AS TABLE 
(A nvarchar(50), B nvarchar(50), C nvarchar(500))

 SqlParameter[] param = new SqlParameter[3];
 param[0] = new SqlParameter("@A", A);
 param[1] = new SqlParameter("@B", B);
 param[2] = new SqlParameter("@C", lstC);
 param[2].SqlDbType = SqlDbType.Structured;
 param[2].TypeName = "dbo.TempTable ";

 DataSet ds = SqlHelper.ExecuteDataset("StoredProcedureName", param); 
```

这里，`lstC`是类的 List 对象。

但是出现错误“ `Failed to convert parameter value from a List1 to a IEnumerable1.`”

**编辑**

```
 public static DataSet ExecuteDataset(string spName, params object[] parameterValues)
    {
        if (connectionString == null || connectionString.Length == 0) throw new ArgumentNullException("connectionString");
        if (spName == null || spName.Length == 0) throw new ArgumentNullException("spName");

        // If we receive parameter values, we need to figure out where they go
        if ((parameterValues != null) && (parameterValues.Length > 0))
        {
            // Pull the parameters for this stored procedure from the parameter cache (or discover them & populate the cache)
            SqlParameter[] commandParameters = SqlHelperParameterCache.GetSpParameterSet(connectionString, spName);

            // Assign the provided values to these parameters based on parameter order
            AssignParameterValues(commandParameters, parameterValues);

            // Call the overload that takes an array of SqlParameters
            return ExecuteDataset(CommandType.StoredProcedure, spName, commandParameters);
        }
        else
        {
            // Otherwise we can just call the SP without params
            return ExecuteDataset(CommandType.StoredProcedure, spName);
        }
  }

 public static DataSet ExecuteDataset(CommandType commandType, string commandText, params SqlParameter[] commandParameters)
    {
        if (connectionString == null || connectionString.Length == 0) throw new ArgumentNullException("connectionString");

        // Create & open a SqlConnection, and dispose of it after we are done
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();

            // Call the overload that takes a connection in place of the connection string
            return ExecuteDataset(connection, commandType, commandText, commandParameters);
        }
    }

   public static DataSet ExecuteDataset(SqlConnection connection, CommandType commandType,   String commandText, params SqlParameter[] commandParameters)
    {
        if (connection == null) throw new ArgumentNullException("connection");

        // Create a command and prepare it for execution
        SqlCommand cmd = new SqlCommand();
        bool mustCloseConnection = false;
        PrepareCommand(cmd, connection, (SqlTransaction)null, commandType, commandText, commandParameters, out mustCloseConnection);

        // Create the DataAdapter & DataSet
        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        {
            DataSet ds = new DataSet();
            cmd.CommandTimeout = 0;
            // Fill the DataSet using default values for DataTable names, etc
            da.Fill(ds);

            // Detach the SqlParameters from the command object, so they can be used again
            cmd.Parameters.Clear();

            if (mustCloseConnection)
                connection.Close();

            // Return the dataset
            return ds;
        }
    } 
```

**准备命令**

```
private static void PrepareCommand(SqlCommand command, SqlConnection connection, SqlTransaction transaction, CommandType commandType, string commandText, SqlParameter[] commandParameters, out bool mustCloseConnection)
    {
        if (command == null) throw new ArgumentNullException("command");
        if (commandText == null || commandText.Length == 0) throw new ArgumentNullException("commandText");

        // If the provided connection is not open, we will open it
        if (connection.State != ConnectionState.Open)
        {
            mustCloseConnection = true;
            connection.Open();
        }
        else
        {
            mustCloseConnection = false;
        }

        // Associate the connection with the command
        command.Connection = connection;

        // Set the command text (stored procedure name or SQL statement)
        command.CommandText = commandText;

        // If we were provided a transaction, assign it
        if (transaction != null)
        {
            if (transaction.Connection == null) throw new ArgumentException("The transaction was rollbacked or commited, please provide an open transaction.", "transaction");
            command.Transaction = transaction;
        }

        // Set the command type
        command.CommandType = commandType;

        // Attach the command parameters if they are provided
        if (commandParameters != null)
        {
            AttachParameters(command, commandParameters);
        }
        return;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-05-10T14:00:18.377

在对 .Net Core 3.1 的项目更新期间来到这里，并开始在以前工作的代码上出现此错误。如果您要使用 Core 3.1+，这可能只会对您有所帮助

原来这是我在创建结构化数据以发送到我的存储过程时使用的 SqlDataRecord**类型的问题。**

旧：`Microsoft.SqlServer.Server.SqlDataRecord`
新：`Microsoft.Data.SqlClient.Server.SqlDataRecord`

请注意，我还根据他们对 .Net Core 3.1 及更高版本的建议从 System.Data.SqlClient 转移到了 Microsoft.Data.SqlClient，并在找到开始这篇文章的错误之前清除了另一个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-28T14:17:01.510

如果您通过参数传递表数据，则需要使用*用户定义的表类型*，例如：

```
CREATE TYPE [dbo].[TempTable] AS TABLE(
    [A] [varchar](50) NULL,
    [B] [varchar](50) NULL,
    [C] [varchar](500) NULL,
) 
```

并且`lstC`应该是`DataTable`或`IEnumerable<SqlDataRecord>`而不是简单地列出您自己的班级。

尝试：

```
param[2] = new SqlParameter("@C", lstC.Select(c => c.ToSqlDataRecord())); 
```

`ToSqlDataRecord`您的班级中的辅助函数在哪里。例子：

```
public class Thing {

    public string A { get; set; }

    public string B { get; set; }

    public string C { get; set; }

    // to match the dbo.TempTable User-Defined Table Type on database
    private static readonly SqlMetaData[] myRecordSchema = {
        new SqlMetaData("A", SqlDbType.VarChar, 50),
        new SqlMetaData("B", SqlDbType.VarChar, 50),
        new SqlMetaData("C", SqlDbType.VarChar, 500)
    };

    public SqlDataRecord ToSqlDataRecord() {
        var record = new SqlDataRecord(myRecordSchema);
        record.SetString(0, A);
        record.SetDateTime(1, B);
        record.SetDateTime(2, C);
        return record;
    }
} 
```

# c# - 为什么空作业编译时没有错误

> ID：14121474
> 
> 赞同：1
> 
> 时间：2013-01-02T11:45:02.223
> 
> 标签：c#, asp.net, .net, asp.net-4.0, compiler-bug

这是我的片段：

```
var country = BLLocations.Instance.GetCountries();
ddlCountry.DataSource = 
ddlCountry.DataTextField = "Country";
ddlCountry.DataValueField = "CountryCode";
ddlCountry.DataBind(); 
```

见第二行：

```
ddlCountry.DataSource = 
```

它编译成功并发布到云端。奇怪的！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T11:46:16.157

就是这样：

```
ddlCountry.DataSource =  ddlCountry.DataTextField = "Country"; 
```

换行不起作用，这是一个有效的代码。

就像：

```
var x = 2;
var y = 3;
x = y = 1000; 
```

（请注意，这根本不是一个好习惯！它令人困惑且难以反感）

C# 中的每个代码都返回一个值（尽管该值可以为 void），它允许您执行此延迟加载：

```
return x ?? x = new ExpensiveObject();// 
```

它能做什么：

1.  如果 x 不为 null，则返回 x。
2.  如果 x 为 null，则分配 x`new ExpensiveObject()`并返回分配值 - x。

有用的功能，但要小心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T11:46:33.540

这是可以接受的，就像您可以拥有：

```
a = b = c; 
```

我很惊讶虽然由于类型的原因没有警告。ddlCountry.DataSource 和 ddlCountry.DataTextField 必须是我认为的相同类型。

在这种情况下，编译器会忽略空格，因为它在语法上无关紧要。更具体地说，这是由预处理器完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:47:31.783

在 C# 中，与许多其他语言一样，语句由`;`字符分隔，*而不是*由换行符分隔。因此写作：

```
var someString =

"SomeValue"; 
```

完全没问题。

您的代码段与

```
ddlCountry.DataSource = "Country";
ddlCountry.DataTextField = "Country"; 
```

# javascript - 使用 JavaScript 读取 html/body 标签 margin-top

> ID：14121477
> 
> 赞同：4
> 
> 时间：2013-01-02T11:45:32.503
> 
> 标签：javascript, html, css

我正在尝试从`<html>`and`<body>`标签中读取“marginTop”样式属性。Chrome 开发者工具显示通过 in-HTML CSS 设置的 margin-top：

```
<style type="text/css" media="screen">
html { margin-top: 28px !important; }
* html body { margin-top: 28px !important; }
</style> 
```

但是，当我尝试这样的事情时：

```
console.debug(document.getElementsByTagName('html')[0].style.marginTop);
console.debug(document.getElementsByTagName('body')[0].style.marginTop); 
```

在这两种情况下，我都会得到空字符串。

jQuery 的`offset()`函数可以正确检测边距。不幸的是，在这种情况下我不能使用 jQuery，它必须是纯 JavaScript。

如果有人能提供一些关于如何从 html 和 body 元素中读取 top margin 属性的见解，我将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T11:54:04.550

您可以通过以下方式解决它：

```
var element = document.getElementsByTagName('html')[0],
    style = window.getComputedStyle(element),
    marginTop = style.getPropertyValue('margin-top'); 
```

[jsFiddle](http://jsfiddle.net/n3vwP/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-10T10:27:56.370

`document`已经有关于`body`元素的知识，所以：

```
window.getComputedStyle(document.body).getPropertyValue('margin-top'); 
```

# java - 在android中调用线程内的方法

> ID：14121482
> 
> 赞同：0
> 
> 时间：2013-01-02T11:45:57.087
> 
> 标签：java, android, multithreading

您好，下面是一种`fileUpload`调用方法的方法，上传文件后我想删除该`synchronized`对象，我这样做了。现在我必须通过调用`fillRecipients()`方法重新加载页面，它的作用是列出数据库中的所有信息并显示在`listView`. 由于我使用了线程，它不允许我放入`fillRecipeints`线程内，但我希望它位于下面的第 230 行 [下面注释为第 230 行] 这是我的`Synchronize`方法：

```
public void synchronize(final String id){
    dialog = ProgressDialog.show(ViewRecipients.this, "", "Uploading this file...", true);
    new Thread(new Runnable() {
           public void run() {
                runOnUiThread(new Runnable() {
                       public void run() {
                           //uploading.setText("uploading started.....");
                           //dialog.show();
                       }
                   });
                mDbHelper.open();
                Cursor cData = mDbHelper.fetchRecipientInfo(id);

                for(cData.moveToFirst();!cData.isAfterLast();cData.moveToNext()){
                    String id = cData.getString(cData.getColumnIndex("fld_recipient_id"));
                    String info = cData.getString(cData.getColumnIndex("fld_info"));
                    String latitude = cData.getString(cData.getColumnIndex("fld_latitude"));
                    String longitude = cData.getString(cData.getColumnIndex("fld_longitude"));
                    ArrayList<String> imagesArray = new ArrayList<String>();
                    for (int i = 1; i <= 4; i++) {
                        String image = cData.getString(cData.getColumnIndex("fld_image_url" + i));
                        if (image != null) {
                            imagesArray.add(image);
                        }
                    }

                    try {
                        serverResponseCode = uploadFile(imagesArray, info, latitude, longitude, id);
                        if (serverResponseCode==200){
                              mDbHelper.deleteRecipientRecId(id);
//Line NO 230 here i want to add fillRecipients() method
                        }
                        dialog.dismiss();
                    } catch (IOException e) {
                        e.printStackTrace();
                        dialog.dismiss();
                    }
                }
                cData.close();
                mDbHelper.close();

                if(serverResponseCode == 200){
                     runOnUiThread(new Runnable() {
                          public void run() {
                              Toast.makeText(ViewRecipients.this, "File Upload Complete.", Toast.LENGTH_SHORT).show();
                          }
                      });               
                 }

           }
         }).start();
} 
```

这是我的 fillRecipeints() 方法：

```
private void fillRecipients(){
    mCursor = mDbHelper.fetchAllRecipientsInfo();
    if (mCursor==null){
        System.out.println("empty cursor");
    }
    else{
        String [] from = new String[]{MunchaDbAdapter.FLD_RECIPIENT_ID};
        int [] to = new int[]{R.id.text1};
        SimpleCursorAdapter recipient = new SimpleCursorAdapter(this, R.layout.recipient_show, mCursor, from, to);
        setListAdapter(recipient);
    }
} 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:30:40.370

```
public void synchronize(final String id) {

        new UploadAsync.execute();

    }

//async class to do task in background and notify UI after completion of task in onPost()
class UploadAsync extends AsyncTask<Void, Void, Void>{
        ProgressDialog dialog = null;
        boolean isUploaded = false;
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            ProgressDialog.show(ViewRecipients.this, "", "Uploading this file...", true);
        }

        @Override
        protected Void doInBackground(Void... params) {
            try{
            mDbHelper.open();
            Cursor cData = mDbHelper.fetchRecipientInfo(id);

            for(cData.moveToFirst();!cData.isAfterLast();cData.moveToNext()){
                String id = cData.getString(cData.getColumnIndex("fld_recipient_id"));
                String info = cData.getString(cData.getColumnIndex("fld_info"));
                String latitude = cData.getString(cData.getColumnIndex("fld_latitude"));
                String longitude = cData.getString(cData.getColumnIndex("fld_longitude"));
                ArrayList<String> imagesArray = new ArrayList<String>();
                for (int i = 1; i <= 4; i++) {
                    String image = cData.getString(cData.getColumnIndex("fld_image_url" + i));
                    if (image != null) {
                        imagesArray.add(image);
                    }
                }

                try {
                    serverResponseCode = uploadFile(imagesArray, info, latitude, longitude, id);
                    if (serverResponseCode==200){
                          mDbHelper.deleteRecipientRecId(id);
                          isUploaded = true;
                    }

                } catch (IOException e) {
                    e.printStackTrace();

                }
            }
            cData.close();
            mDbHelper.close();
        }
        catch(Exception e){
            e.printStackTrace();
        }
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            //close dialog
            if(dialog != null && dialog.isShowing()){
                dialog.dismiss();
            }

            if(isUploaded){
                Toast.makeText(ViewRecipients.this, "File Upload Complete.", Toast.LENGTH_SHORT).show();
                fillRecipients();
            }
        }

    }

private void fillRecipients() {
        mCursor = mDbHelper.fetchAllRecipientsInfo();
        if (mCursor == null) {
            System.out.println("empty cursor");
        } else {
            String[] from = new String[] { MunchaDbAdapter.FLD_RECIPIENT_ID };
            int[] to = new int[] { R.id.text1 };
            SimpleCursorAdapter recipient = new SimpleCursorAdapter(this,
                    R.layout.recipient_show, mCursor, from, to);
            setListAdapter(recipient);
        }
    } 
```

# mysql - 从 cat_table 中选择类别，其中该类别的 main_table 项目不为空

> ID：14121488
> 
> 赞同：1
> 
> 时间：2013-01-02T11:46:25.077
> 
> 标签：mysql, select, join, group-by

我想不出正确的表达方式，也许如果我知道正确的短语，我可以正确地谷歌搜索，但到目前为止我还在苦苦挣扎。

我有两个表：类别，目录

在用户选择类别的页面上，我只想显示具有该类别的目录项存在的类别。

我想知道我是否可以通过加入来做到这一点并尝试了

```
SELECT
wedding_directory_cats.id,
wedding_directory_cats.name,
wedding_directory.id AS d_id
FROM wedding_directory_cats
JOIN wedding_directory ON wedding_directory.category = wedding_directory_cats.id 
```

但这会返回每个目录项的类别，所以我不止一次得到相同的类别。就在我写这篇文章的时候，我开始认为我可以在最后使用 GROUP BY 但这仍然意味着它必须先将它们全部返回，然后再返回 GROUP BY，是效率低下还是有更好的方法来做这样的事情? 任何答案表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:34:31.333

试试这个：

```
SELECT wdc.id, wdc.name, wd.id AS d_id
FROM wedding_directory_cats wdc
INNER JOIN (SELECT id, category FROM wedding_directory GROUP BY category) wd ON wdc.id = wd.category ; 
```

**或者**

```
SELECT wdc.id, wdc.name, GROUP_CONCAT(wd.id) AS d_id
FROM wedding_directory_cats wdc
INNER JOIN wedding_directory wd ON wdc.id = wd.category 
GROUP BY wd.category; 
```

# python - CentOS下Python 2.7.3安装MySQLDB

> ID：14121491
> 
> 赞同：0
> 
> 时间：2013-01-02T11:46:33.993
> 
> 标签：python, mysql, centos

我需要在机器上安装 Python 2.7，从源代码以及机器上的现有版本（2.4）。我已经成功编译并安装了 Python，但是当我尝试运行一个调用 MySQLDB 模块的脚本时，它会抛出以下错误：

```
[root@the-node1 bin]# interactive_recording_archive.py 
Traceback (most recent call last):
  File "/usr/local/bin/interactive_recording_archive.py", line 8, in <module>
    import MySQLdb as mdb
ImportError: No module named MySQLdb 
```

我曾尝试使用 easy-install 脚本安装 MySQLDB，但这无法找到该名称的任何模块。我已经安装了 MySQL 并在机器上工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T11:50:00.007

该软件包称为[`MySQL-python`](http://pypi.python.org/pypi/MySQL-python/1.2.4)：

```
easy_install MySQL-python 
```

检查[安装要求](https://raw.github.com/farcepest/MySQLdb1/master/INSTALL)；你有 python 和 setuptools，但你也需要这个`mysql-devel`包。

# mysql - MySQL：将一行中的所有值乘以 2

> ID：14121492
> 
> 赞同：12
> 
> 时间：2013-01-02T11:46:37.077
> 
> 标签：mysql, sql

我有一个表 Person ，它是包含 1000 个条目的列之一。我想将每个人的年龄乘以 2 来更新。

是否可以在一个 SQL 查询中进行？我正在使用 MySQL 数据库。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-02T11:47:43.317

是的，这可能是这样的：

```
UPDATE Persons p
SET p.Age = p.Age * 2; 
```

# apache - 语言路径的永久重定向（?language=en 到 /en/）

> ID：14121496
> 
> 赞同：-1
> 
> 时间：2013-01-02T11:47:07.010
> 
> 标签：apache, drupal, redirect, rewrite

我正在将 Drupal 设置中的语言特定路径从 url 获取参数 (?language=en) 更改为 url 前缀 /en/。我需要检查请求的 url 是否包含语言参数（？language=en），然后重定向它。

我有 4 种语言（da、en、de、pl）应该使用这种结构重定向：

```
www.example.com/blog?language=da => www.example.com/blog  (This is the default language)
www.example.com/blog?language=en => www.example.com/en/blog
www.example.com/blog?language=de => www.example.com/de/blog
www.example.com/blog??language=pl => www.example.com/pl/blog 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:42:11.887

可以使用以下条件：

```
RewriteCond %{QUERY_STRING} ^language=da$
RewriteRule ^/blog /blog/? [R=301,L]

RewriteCond %{QUERY_STRING} ^language=(en|de|pl)$
RewriteRule ^/blog /%1/blog/? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:28:52.767

```
RewriteCond %{QUERY_STRING} language=en
RewriteRule ^/blog /en/blog/? [R=301]

RewriteCond %{QUERY_STRING} language=de
RewriteRule ^/blog /de/blog/? [R=301]

RewriteCond %{QUERY_STRING} language=pl
RewriteRule ^/blog /pl/blog/? [R=301] 
```

# xml - XSLT for-each as for 在属性中带有参数的循环

> ID：14121498
> 
> 赞同：1
> 
> 时间：2013-01-02T11:47:13.100
> 
> 标签：xml, xslt, xslt-1.0

## 预

我有这个 XML

```
<root>
    <subscribers nullDays="5">
        <subscriber>
            <ThumbURL>
                http://cs323321.userapi.com/v323321550/eea/iakdB20fx20.jpg
            </ThumbURL>
        </subscriber>
        <subscriber>
            <ThumbURL>
                http://cs323321.userapi.com/v323321550/f24/CQ-Zm0_BWnQ.jpg
            </ThumbURL>
        </subscriber>
        ...
        <subscriber>
            <ThumbURL>...</ThumbURL>
        </subscriber>
    </subscribers>
</root> 
```

在 XSLT 之后，我得到 HTML，其中**订阅者**将被分隔到每个**div**中，里面有**img**标签。

## 问题

如何使用**xsl:for-each生成****div**等于**nullDays**属性？以下代码需要多个**订阅者**节点**nullDays**，但它不能存在：

 ******```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">    
<xsl:output encoding="UTF-8" doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"xml:base="http://www.w3.org/1999/xhtml" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" indent="yes"/>

<xsl:template match="root">
    <xsl:element name="html">
        <xsl:element name="head"/>
        <xsl:element name="body">

            <xsl:variable name="nullDays" select="subscribers/@nullDays"/>                

            <xsl:for-each select="subscribers/subscriber">
                <xsl:if test="(position() mod $nullDays) = 0">
                    <xsl:element name="div">
                        <xsl:attribute name="class">empty-div</xsl:attribute>
                    </xsl:element>
                </xsl:if>
            </xsl:for-each>
        </xsl:element>
    </xsl:element>        
</xsl:template>
</xsl:stylesheet> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:32:45.530

**这个 XSLT 1.0 转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="subscribers">
     <html>
       <xsl:apply-templates select="subscriber"/>
       <xsl:call-template name="genEmpty">
         <xsl:with-param name="pTimes" select="@nullDays - count(subscriber)"/>
       </xsl:call-template>
     </html>
 </xsl:template>

 <xsl:template match="subscriber">
   <div><img src="{normalize-space(ThumbURL)}"/></div>
 </xsl:template>

 <xsl:template name="genEmpty">
  <xsl:param name="pTimes" select="0"/>

  <xsl:if test="$pTimes >= 0">
    <div class="empty-div"/>
    <xsl:call-template name="genEmpty">
     <xsl:with-param name="pTimes" select="$pTimes -1"/>
    </xsl:call-template>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <subscribers nullDays="5">
        <subscriber>
            <ThumbURL>
                http://cs323321.userapi.com/v323321550/eea/iakdB20fx20.jpg
            </ThumbURL>
        </subscriber>
        <subscriber>
            <ThumbURL>
                http://cs323321.userapi.com/v323321550/f24/CQ-Zm0_BWnQ.jpg
            </ThumbURL>
        </subscriber>
        ...
        <subscriber>
            <ThumbURL>...</ThumbURL>
        </subscriber>
    </subscribers>
</root> 
```

**产生（我猜是）想要的结果：**

```
<html>
   <div><img src="http://cs323321.userapi.com/v323321550/eea/iakdB20fx20.jpg"></div>
   <div><img src="http://cs323321.userapi.com/v323321550/f24/CQ-Zm0_BWnQ.jpg"></div>
   <div><img src="..."></div>
   <div class="empty-div"></div>
   <div class="empty-div"></div>
   <div class="empty-div"></div>
</html> 
```******

# android - 移动图像后如何刷新android画廊

> ID：14121499
> 
> 赞同：0
> 
> 时间：2013-01-02T11:47:12.643
> 
> 标签：android, gallery

在我的应用程序中，每当用户通过我的应用程序共享图像时，我都必须从图库中删除图像。但我不知道该怎么做。我已经试过了

```
SendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,Uri.parse("file://"+ Environment.getExternalStorageDirectory()))); 
```

但它没有帮助，而是退出画廊并显示以下信息`MediaScanner is running.`

如果您有任何其他想法，请分享

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:05:24.033

您可能正在使用 One ArrayList 从图像列表 (Sdcard) 中绑定图库。删除后，您必须**重新绑定适配器**视图。在此之前使用**SendBroadcast**方法。

所以重新绑定后适配器列表或数组将被刷新。（如果该项目在sdcard中不存在，则在读取文件数和文件时会自动忽略。）。

希望这会帮助你。

# c# - 上下文菜单上的自定义阴影不适用于子菜单

> ID：14121501
> 
> 赞同：0
> 
> 时间：2013-01-02T11:47:22.293
> 
> 标签：c#, wpf, contextmenu, menuitem, drop-shadow

我`ContextMenu`在 XAML 中定义如下：

```
<ContextMenu x:Name="deleteContextMenu">
    <ContextMenu.BitmapEffect>
        <DropShadowBitmapEffect Color="#FFB3C7E5" Direction="-60" ShadowDepth="5" Opacity="0.8"/>
    </ContextMenu.BitmapEffect>

    <MenuItem Header="Delete" Click="DeleteMenuItem_Click" Name="DeleteMenuItem" Background="{StaticResource ContextMenuBrush}">
        <MenuItem Header="DeleteChild" Name="DeleteMenuItem2" Background="{StaticResource ContextMenuBrush}">
        </MenuItem>
    </MenuItem>
</ContextMenu> 
```

我的自定义`DropShadow`应用于主`ContextMenu`弹出窗口，但是当我单击 时`MenuItem`，子菜单弹出窗口仍然有可怕的默认阴影，与我的配色方案看起来非常不合适。如何强制所有子菜单具有相同的自定义`DropShadow`效果？

**`UPDATE:`**

`MenuItem`如果我因此在主上下文菜单弹出窗口中破解视觉树：

```
StackPanel menuStackPanel = VisualTreeHelper.GetParent(menuItem as DependencyObject) as StackPanel;
Border border = VisualTreeHelper.GetParent(menuStackPanel) as Border;
border.Background = Brushes.Red; 
```

我可以控制主弹出窗口的颜色。

对于子菜单弹出窗口中的 subMenuItem，可视化树帮助程序没有返回任何类型的父项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:01:41.347

我有一个 hacky 建议：

```
 <ContextMenu x:Name="deleteContextMenu">
        <ContextMenu.BitmapEffect>
            <DropShadowBitmapEffect Color="#FFB3C7E5" Direction="-60" ShadowDepth="5" Opacity="0.8"/>
        </ContextMenu.BitmapEffect>
        <ContextMenu.Resources>
            <Style TargetType="{x:Type PopupRoot}">
                <Setter Property="BitmapEffect">
                    <Setter.Value>
                        <DropShadowBitmapEffect Color="#FFB3C7E5" Direction="-60" ShadowDepth="5" Opacity="0.8"/>
                    </Setter.Value>
                </Setter>
            </Style>
        </ContextMenu.Resources>

        <MenuItem Header="Delete" Name="DeleteMenuItem" Background="White" UsesItemContainerTemplate="True">
            <MenuItem Header="DeleteChild" Name="DeleteMenuItem2" Background="White" UsesItemContainerTemplate="True">
            </MenuItem>
        </MenuItem>
    </ContextMenu> 
```

a 的子项`MenuItem`显示在 a 中`Popup`（可以在[MenuItem ControlTemplate Example](http://msdn.microsoft.com/en-us/library/ms747082%28v=vs.85%29.aspx "菜单项控件模板示例")中看到。感谢这个和 snoop 样式`<Style TargetType="{x:Type PopupRoot}">`应该将阴影应用于子项。

**B计划：**

您需要将 PresentationFramework.Classic（或其他 Aero 等）程序集添加到项目中。

```
xmlns:mwt="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Classic

    <ControlTemplate TargetType="MenuItem" x:Key="miTest">
        <Grid SnapsToDevicePixels="True">
            <Rectangle RadiusX="2" RadiusY="2" Fill="{TemplateBinding Panel.Background}" Stroke="{TemplateBinding Border.BorderBrush}" StrokeThickness="1" Name="Bg" />
            <Rectangle RadiusX="2" RadiusY="2" Stroke="#00FFFFFF" StrokeThickness="1" Name="InnerBorder" Margin="1,1,1,1" />
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" MinWidth="24" SharedSizeGroup="MenuItemIconColumnGroup" />
                    <ColumnDefinition Width="4" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="37" />
                    <ColumnDefinition Width="Auto" SharedSizeGroup="MenuItemIGTColumnGroup" />
                    <ColumnDefinition Width="17" />
                </Grid.ColumnDefinitions>
                <ContentPresenter Content="{TemplateBinding MenuItem.Icon}" ContentSource="Icon" Name="Icon" Margin="1,1,1,1" VerticalAlignment="Center" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                <Border BorderThickness="1,1,1,1" CornerRadius="3,3,3,3" BorderBrush="#FFCDD3E6" Background="#FFE6EFF4" Name="GlyphPanel" Width="22" Height="22" Margin="1,1,1,1" Visibility="Hidden">
                    <Path Data="M0,5.1L1.7,5.2 3.4,7.1 8,0.4 9.2,0 3.3,10.8z" Fill="#FF0C12A1" Name="Glyph" Width="9" Height="11" FlowDirection="LeftToRight" />
                </Border>
                <ContentPresenter RecognizesAccessKey="True" Content="{TemplateBinding HeaderedContentControl.Header}" ContentTemplate="{TemplateBinding HeaderedContentControl.HeaderTemplate}" ContentStringFormat="{TemplateBinding HeaderedItemsControl.HeaderStringFormat}" ContentSource="Header" Margin="{TemplateBinding Control.Padding}" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" Grid.Column="2" />
                <TextBlock Text="{TemplateBinding MenuItem.InputGestureText}" Margin="{TemplateBinding Control.Padding}" Visibility="Collapsed" Grid.Column="4" />
                <Path Data="M0,0L4,3.5 0,7z" Fill="{TemplateBinding TextElement.Foreground}" Margin="4,0,0,0" VerticalAlignment="Center" Grid.Column="5" />
            </Grid>
            <Popup IsOpen="{TemplateBinding IsSubmenuOpen}" Placement="Right" HorizontalOffset="-2" VerticalOffset="-3" PopupAnimation="{DynamicResource {x:Static SystemParameters.MenuPopupAnimationKey}}" AllowsTransparency="True" Name="PART_Popup" Focusable="False">
                <mwt:SystemDropShadowChrome Color="#00FFFFFF" Name="Shdw">
                    <mwt:SystemDropShadowChrome.BitmapEffect>
                        <DropShadowBitmapEffect Color="#FFB3C7E5" Direction="-60" ShadowDepth="5" Opacity="0.8"/>
                    </mwt:SystemDropShadowChrome.BitmapEffect>
                    <Border BorderThickness="1,1,1,1" BorderBrush="#FF959595" Background="#FFF5F5F5" Name="SubMenuBorder">
                        <ScrollViewer Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly=FrameworkElement, ResourceId=MenuScrollViewer}}" Name="SubMenuScrollViewer" Margin="1,0,1,0">
                            <Grid RenderOptions.ClearTypeHint="Enabled">
                                <Canvas Width="0" Height="0" HorizontalAlignment="Left" VerticalAlignment="Top">
                                    <Rectangle Fill="#FFF5F5F5" Name="OpaqueRect" Width="Auto" Height="Auto" />
                                </Canvas>
                                <Rectangle RadiusX="2" RadiusY="2" Fill="#FFF1F1F1" Width="28" Margin="1,2,1,2" HorizontalAlignment="Left" />
                                <Rectangle Fill="#FFE2E3E3" Width="1" Margin="29,2,0,2" HorizontalAlignment="Left" />
                                <Rectangle Fill="#FFFFFFFF" Width="1" Margin="30,2,0,2" HorizontalAlignment="Left" />
                                <ItemsPresenter Name="ItemsPresenter" Margin="2,2,2,2" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" KeyboardNavigation.TabNavigation="Cycle" KeyboardNavigation.DirectionalNavigation="Cycle" Grid.IsSharedSizeScope="True" />
                            </Grid>
                        </ScrollViewer>
                    </Border>
                </mwt:SystemDropShadowChrome>
            </Popup>
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="MenuItem.IsSuspendingPopupAnimation" Value="True">
                <Setter Property="Popup.PopupAnimation" TargetName="PART_Popup" Value="None" />
            </Trigger>
            <Trigger Property="MenuItem.IsHighlighted" Value="True">
                <Setter Property="Shape.Stroke" TargetName="InnerBorder" Value="#D1DBF4FF" />
            </Trigger>
            <Trigger Property="MenuItem.Icon" Value="{x:Null}">
                <Setter Property="UIElement.Visibility" TargetName="Icon" Value="Collapsed" />
            </Trigger>
            <Trigger Property="MenuItem.IsChecked" Value="True">
                <Setter Property="UIElement.Visibility" TargetName="GlyphPanel" Value="Visible" />
                <Setter Property="UIElement.Visibility" TargetName="Icon" Value="Collapsed" />
            </Trigger>
            <Trigger Property="Popup.HasDropShadow" SourceName="PART_Popup" Value="True">
                <Setter Property="FrameworkElement.Margin" TargetName="Shdw" Value="0,0,5,5" />
                <Setter Property="mwt:SystemDropShadowChrome.Color" TargetName="Shdw" Value="#71000000" />
            </Trigger>
            <Trigger Property="MenuItem.IsHighlighted" Value="True">
                <Setter Property="Shape.Fill" TargetName="Bg">
                    <Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <LinearGradientBrush.GradientStops>
                                <GradientStop Color="#34C5EBFF" Offset="0" />
                                <GradientStop Color="#3481D8FF" Offset="1" />
                            </LinearGradientBrush.GradientStops>
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Shape.Stroke" TargetName="Bg" Value="#8571CBF1" />
            </Trigger>
            <Trigger Property="UIElement.IsEnabled" Value="False">
                <Setter Property="TextElement.Foreground" Value="#FF9A9A9A" />
                <Setter Property="Panel.Background" TargetName="GlyphPanel" Value="#FFEEE9E9" />
                <Setter Property="Border.BorderBrush" TargetName="GlyphPanel" Value="#FFDBD6D6" />
                <Setter Property="Shape.Fill" TargetName="Glyph" Value="#FF848589" />
            </Trigger>
            <Trigger Property="ScrollViewer.CanContentScroll" SourceName="SubMenuScrollViewer" Value="False">
                <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding Path=VerticalOffset, ElementName=SubMenuScrollViewer}" />
                <Setter Property="Canvas.Left" TargetName="OpaqueRect">
                    <Setter.Value>
                        <Binding Path="HorizontalOffset" ElementName="SubMenuScrollViewer" />
                    </Setter.Value>
                </Setter>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate> 
```

用法：

```
 <ContextMenu x:Name="deleteContextMenu">
        <ContextMenu.BitmapEffect>
            <DropShadowBitmapEffect Color="#FFB3C7E5" Direction="-60" ShadowDepth="5" Opacity="0.8"/>
        </ContextMenu.BitmapEffect>

        <MenuItem Header="Delete" Name="DeleteMenuItem" Background="White" Template="{StaticResource miTest}">
            <MenuItem Header="DeleteChild" Name="DeleteMenuItem2" Background="White" Template="{StaticResource miTest}">
                <MenuItem Header="DeleteChild" Name="DeleteMenuItem3" Background="White" Template="{StaticResource miTest}">
                </MenuItem>
            </MenuItem>
        </MenuItem>
    </ContextMenu> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:57:38.553

您需要`Style`为子菜单设置 。这是一个 MSDN 示例。显然，只需获取您需要的代码即可。

[http://msdn.microsoft.com/en-us/library/ms744758%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms744758%28v=vs.85%29.aspx)

# sql - 空字段不应显示在单独的列中

> ID：14121503
> 
> 赞同：0
> 
> 时间：2013-01-02T11:47:24.373
> 
> 标签：sql, sql-server, sql-server-2008

这是我的 sql 查询

```
select C.Name, C.[Name 2] ,
    C.Address, C.[Address 2],C.[Address 3], 
    C.City, C.[Post Code], C.[Contact], CR.Name as country, 
    SIH.[ARE Gr_Wt],SIH.[Total Boxes] , SIH.[Posting Date] , 
    SIH.[Country of Origin of Goods],
    CASE when C.[E-Mail] <> '' then  'E-mail: ' + C.[E-Mail] else '' end [E-Mail] 
from [Sales Invoice Header] SIH 
inner join [Customer] C 
    on C.No_ = SIH.[Sell-to Customer No_]
inner join [Country_Region] CR 
    On CR.Code = SIH.[Country of Final Destination] 
where SIH.No_ = 'PEXP1213-596' 
```

在此查询中，如果我的地址 3 字段对所有客户都没有价值..我需要显示此地址 3 列只有当它有值时...我不想显示空列

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:05:06.543

根据您的描述和评论，听起来您只想在`Address 3`列中有值时显示该列。

没有办法显示所有客户，但如果没有值则隐藏一列，至少在一个查询中你不能这样做。

如果您`SELECT`的所有字段都将获得该`Address 3`字段，除非您专门将其过滤掉，但如果您进行过滤，您将不会获得所有数据。

例如，如果您有以下示例数据：

```
CREATE TABLE yourtable
    ([id] int, [name] varchar(4), [Address1] varchar(10), [Address2] varchar(4));

INSERT INTO yourtable ([id], [name], [Address1], [Address2])
VALUES
    (1, 'Test', '12345 blah', NULL),
    (2, 'John', '45 Test', 'test'); 
```

如果我使用查询（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/17606/1)）：

```
select id,
  name, 
  address1,
  address2
from yourtable 
```

它将返回表中的所有数据，包括字段中没有值的记录`Address2`。

如果我不想显示空的记录，`Address2`我将丢失不是您想要的记录。（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/17606/2)）：

```
select id,
  name, 
  address1,
  address2
from yourtable
where address2 is not null 
  or address2 <> '' 
```

无法隐藏选择列表中的列。您只能通过不选择值来隐藏它。

因此，您可以执行两个选择，但它们不会在同一个数据集中。您可以使用以下内容：

```
select id,
  name, 
  address1,
  address2
from yourtable
where Address3 is not null 
  or Address3 <> ''; 
```

然后是第二个查询以选择空的记录`Address3`：

```
select id,
  name,
  address1
from yourtable
where Address3 is null 
  or Address3 = ''; 
```

我建议这样做的唯一另一种方法是使用`CASE`语句来构建一个类似于此的地址字符串：

```
select C.Name, 
  C.[Name 2] ,
  case 
    when C.[Address 3] is not null or C.[Address 3] <> ''
    then C.Address +' '+ C.[Address 2] + ' '+ C.[Address 3]
    else C.Address +' '+ C.[Address 2] end Address, 
  C.City, 
  C.[Post Code], 
  C.[Contact], 
  CR.Name as country, 
  SIH.[ARE Gr_Wt],
  SIH.[Total Boxes], 
  SIH.[Posting Date], 
  SIH.[Country of Origin of Goods],
  CASE when C.[E-Mail] <> '' then  'E-mail: ' + C.[E-Mail] else '' end [E-Mail] 
from [Sales Invoice Header] SIH 
inner join [Customer] C 
  on C.No_ = SIH.[Sell-to Customer No_]
inner join [Country_Region] CR 
  on CR.Code = SIH.[Country of Final Destination] 
where SIH.No_ = 'PEXP1213-596' 
```

这将检查 中是否有值`Address 3`，如果有，则将所有地址列连接成一个字符串。如果 中没有值`Address 3`，则仅连接`Address 1`和`Address 2`。

# javascript - 在折线上停止动画符号 - googlemaps

> ID：14121506
> 
> 赞同：2
> 
> 时间：2013-01-02T11:47:37.820
> 
> 标签：javascript, google-maps-api-3, overlay, google-polyline

我根据这个非常有用的答案在折线上使用了符号动画： [Animate symbol on multiple geodesic polylines](https://stackoverflow.com/questions/11931415/animate-symbol-on-multiple-geodesic-polylines)

我想要的是有几条折线并在选择一条时生成动画并为其他折线停止动画。

也就是说，一旦使用上述方法开始，我想删除符号并停止动画：

```
function animateCircle(id) {
    var count = 0;
    offsetId = window.setInterval(function () {
        count = (count+1) % 200;
        id.setOptions({
            icons: [{
                offset: (count/2)+'%'
            }]
        });
    }, 20);
}; 
```

我尝试了另一个这样的功能，但它根本不起作用：

```
function stopCircle(id) {
    id.setOptions({
        icons: [{
            offset: '0%'
        }]
}; 
```

两者都不：

```
function stopCircle(id) {
    id.setOptions({
        icons: null
}; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:32:45.500

id 是折线数组的索引。要访问折线，您需要使用 polylines[id]（即 polylines[id].setOptions。

您可能还想停止计时器，因为您需要保留对 setInterval 返回的值的引用。

[工作示例](http://www.geocodezip.com/v3_SO_animated_polylines.html)

```
function stopCircle(id) {
    clearInterval(polylines[id].handle);
    polylines[id].polyline.setOptions({
        icons: null});
}; 
```

折线数组现在包含：

```
 polylines[i] = new Object();
    polylines[i].polyline = polyline;
    polylines[i].handle = animateCircle(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:45:05.113

对我来说，“id”本身就是一条折线。我只需要保留“setInterval”的输出，这应该是“clearInterval”的输入。这是两个函数：

```
function animateCircle(id) {
    var count = 0;
    window.clearInterval(id.offsetId);
    id.offsetId = window.setInterval(function () {
        count = (count+1) % 200;
        id.setOptions({
            icons: [{
                offset: (count/2)+'%'
            }]
        });
    }, 20);
};

function stopCircle(id) {
    window.clearInterval(id.offsetId);
    id.setOptions({
        icons: null
    });
}; 
```

# ruby-on-rails - 错误：未捕获的类型错误：无法读取未定义 bootstrap-popover.js 的属性“构造函数”

> ID：14121509
> 
> 赞同：1
> 
> 时间：2013-01-02T11:47:47.770
> 
> 标签：ruby-on-rails, twitter-bootstrap, ruby-on-rails-3.2

我想在我的 rails 项目中手动使用 twitter bootstrap。
但是我遇到了这个错误，并且引导程序的某些功能不起作用。

如果您帮助我，我将不胜感激。谢谢你。

**控制台错误**

> 未捕获的类型错误：无法读取未定义 bootstrap-popover.js:38
> （匿名函数）bootstrap-popover.js:38
> （匿名函数）bootstrap-popover.js:115的属性“构造函数”

**应用程序/视图/应用程序/index.html.erb**

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<%= stylesheet_link_tag    "bootstrap" %>
<%= stylesheet_link_tag    "bootstrap-responsive" %>

<%= javascript_include_tag "jquery" %>
<%= javascript_include_tag "bootstrap" %>
<%= javascript_include_tag "bootstrap-transition" %>
<%= javascript_include_tag "bootstrap-alert" %>
<%= javascript_include_tag "bootstrap-modal" %>
<%= javascript_include_tag "bootstrap-dropdown" %>
<%= javascript_include_tag "bootstrap-scrollspy" %>
<%= javascript_include_tag "bootstrap-tab" %>
<%= javascript_include_tag "bootstrap-tooltip" %>
<%= javascript_include_tag "bootstrap-popover" %>
<%= javascript_include_tag "bootstrap-button" %>
<%= javascript_include_tag "bootstrap-collapse" %>
<%= javascript_include_tag "bootstrap-carousel" %>
<%= javascript_include_tag "bootstrap-typeahead" %>

<!-- as example, which doesn't work, somehow  -->
<i class="icon-search icon-home"></i> 
```

我相信所有必要的 js 和 css 文件都在

*   ./app/assets/images
*   ./app/assets/javascripts
*   ./app/assets/样式表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:07:25.310

如果您想在 Rails >3 中添加资产文件（like或 images） `.js`，`.css`您应该使用清单文件：application.js、application.css。在您复制其目录中的源代码后，您应该进行如下声明：

```
application.js :

//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require bootstrap-responcive
//= require tree . 
```

在 application.css 中：

```
*= require_self
*= require bootstrap
*= require_tree . 
```

在您的视图中包含 `<%= javascript_include_tag %> 会变得毫无用处。

# objective-c - AVAssetWriter 有时会失败，状态为 AVAssetWriterStatusFailed。似乎随机

> ID：14121511
> 
> 赞同：7
> 
> 时间：2013-01-02T11:47:51.153
> 
> 标签：objective-c, cocoa-touch, avfoundation, avassetwriter

我正在使用 AVAssetWriter 编写一个 MP4 视频文件`AVAssetWriterInputPixelBufferAdaptor`。

源是来自 的视频`UIImagePickerController`，可以是从相机或资产库中新捕获的。现在的质量是`UIImagePickerControllerQualityTypeMedium`。

有时作家会失败。它的状态是`AVAssetWriterStatusFailed`，`AVAssetWriter`对象错误属性是：

```
Error Domain=AVFoundationErrorDomain Code=-11800 "The operation could not be completed" 
UserInfo=0xf5d8990 {NSLocalizedFailureReason=An unknown error occurred (-536870210), 
NSUnderlyingError=0x4dd8e0 "The operation couldn’t be completed. (OSStatus error -536870210.)",
NSLocalizedDescription=The operation could not be completed 
```

错误发生在代码运行的大约 20% 的时间里。在 iPhone 4 / 4S 上似乎比在 iPhone 5 上更频繁地失败。

如果源视频质量更高，它也会更频繁地发生。使用 UIImagePickerControllerQualityTypeLow 错误不会经常发生。使用 UIImagePickerControllerQualityTypeHigh，错误发生的频率更高一些。

我还注意到别的东西：它似乎是一波又一波的。当它失败时，即使我删除应用程序并重新安装它，以下运行也会经常失败。这让我想知道，我的程序是否泄漏了一些内存，即使应用程序被杀死，该内存是否仍然存在（这甚至可能吗？）。

这是我用来渲染视频的代码：

```
- (void)writeVideo
{
    offlineRenderingInProgress = YES;

/* --- Writer Setup --- */

    [locationQueue cancelAllOperations];

    [self stopWithoutRewinding];

    NSError *writerError = nil;

    BOOL succes;

    succes = [[NSFileManager defaultManager] removeItemAtURL:self.outputURL error:nil];

    // DLog(@"Url: %@, succes: %i, error: %@", self.outputURL, succes, fileError);

    writer = [AVAssetWriter assetWriterWithURL:self.outputURL fileType:(NSString *)kUTTypeQuickTimeMovie error:&writerError];
    //writer.shouldOptimizeForNetworkUse = NO;

    if (writerError) {
        DLog(@"Writer error: %@", writerError);
        return;
    }

    float bitsPerPixel;
    CMVideoDimensions dimensions = CMVideoFormatDescriptionGetDimensions((__bridge CMVideoFormatDescriptionRef)([readerVideoOutput.videoTracks[0] formatDescriptions][0]));
    int numPixels = dimensions.width * dimensions.height;
    int bitsPerSecond;

    // Assume that lower-than-SD resolutions are intended for streaming, and use a lower bitrate
    if ( numPixels < (640 * 480) )
        bitsPerPixel = 4.05; // This bitrate matches the quality produced by AVCaptureSessionPresetMedium or Low.
    else
        bitsPerPixel = 11.4; // This bitrate matches the quality produced by AVCaptureSessionPresetHigh.

    bitsPerSecond = numPixels * bitsPerPixel;

    NSDictionary *videoCompressionSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                          AVVideoCodecH264, AVVideoCodecKey,
                                          [NSNumber numberWithFloat:videoSize.width], AVVideoWidthKey,
                                          [NSNumber numberWithInteger:videoSize.height], AVVideoHeightKey,
                                          [NSDictionary dictionaryWithObjectsAndKeys:
                                           [NSNumber numberWithInteger:30], AVVideoMaxKeyFrameIntervalKey,
                                           nil], AVVideoCompressionPropertiesKey,
                                          nil];

    writerVideoInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoCompressionSettings];
    writerVideoInput.transform =  movie.preferredTransform;
    writerVideoInput.expectsMediaDataInRealTime = YES;
    [writer addInput:writerVideoInput];

    NSDictionary *sourcePixelBufferAttributesDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                                       [NSNumber numberWithInt:kCVPixelFormatType_32ARGB], kCVPixelBufferPixelFormatTypeKey, nil];

    writerPixelAdaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerVideoInput
                                                                                      sourcePixelBufferAttributes:sourcePixelBufferAttributesDictionary];
    BOOL couldStart = [writer startWriting];

    if (!couldStart) {
        DLog(@"Could not start AVAssetWriter!");
        abort = YES;
        [locationQueue cancelAllOperations];
        return;
    }

    [self configureFilters];

    CIContext *offlineRenderContext = [CIContext contextWithOptions:@{kCIContextUseSoftwareRenderer : @NO}];

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    if (!self.canEdit) {
        [self createVideoReaderWithAsset:movie timeRange:CMTimeRangeFromTimeToTime(kCMTimeZero, kCMTimePositiveInfinity) forOfflineRender:YES];
    } else {
        [self createVideoReaderWithAsset:movie timeRange:CMTimeRangeWithNOVideoRangeInDuration(self.thumbnailEditView.range, movie.duration) forOfflineRender:YES];
    }

    CMTime startOffset = reader.timeRange.start;

    DLog(@"startOffset: %llu", startOffset.value);

    [self.thumbnailEditView removeFromSuperview];
    //    self.thumbnailEditView = nil;

    [glLayer removeFromSuperlayer];
    glLayer = nil;

    [playerView removeFromSuperview];
    playerView = nil;

    glContext = nil;

    [writerVideoInput requestMediaDataWhenReadyOnQueue:dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) usingBlock:^{

        @try {

        BOOL didWriteSomething = NO;

        DLog(@"Preparing to write...");

        while ([writerVideoInput isReadyForMoreMediaData]) {

            if (abort) {
                NSLog(@"Abort == YES");
                [locationQueue cancelAllOperations];
                [writerVideoInput markAsFinished];
                videoConvertCompletionBlock(NO, writer.error.localizedDescription);
            }

            if (writer.status == AVAssetWriterStatusFailed) {
                DLog(@"Writer.status: AVAssetWriterStatusFailed, error: %@", writer.error);

                [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:1] forKey:@"QualityOverride"];
                [[NSUserDefaults standardUserDefaults] synchronize];

                abort = YES;
                [locationQueue cancelAllOperations];
                videoConvertCompletionBlock(NO, writer.error.localizedDescription);
                return;
                DLog(@"Source file exists: %i", [[NSFileManager defaultManager] fileExistsAtPath:movie.URL.relativePath]);
            }

            DLog(@"Writing started...");

            CMSampleBufferRef buffer = nil;

            if (reader.status != AVAssetReaderStatusUnknown) {

                if (reader.status == AVAssetReaderStatusReading) {
                    buffer = [readerVideoOutput copyNextSampleBuffer];
                    if (didWriteSomething == NO) {
                        DLog(@"Copying sample buffers...");
                    }
                }

                if (!buffer) {

                    [writerVideoInput markAsFinished];

                    DLog(@"Finished...");

                    CGColorSpaceRelease(colorSpace);

                    [self offlineRenderingDidFinish];

                    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

                        [writer finishWriting];
                        if (writer.error != nil) {
                            DLog(@"Error: %@", writer.error);
                        } else {
                            DLog(@"Succes!");
                        }

                        if (writer.status == AVAssetWriterStatusCompleted) {

                            videoConvertCompletionBlock(YES, nil);
                        }

                        else {
                            abort = YES;
                            videoConvertCompletionBlock(NO, writer.error.localizedDescription);
                        }

                    });

                    return;
                }

                didWriteSomething = YES;
            }
            else {

                DLog(@"Still waiting...");
                //Reader just needs a moment to get ready...
                continue;
            }

            CVPixelBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(buffer);

            if (pixelBuffer == NULL) {
                DLog(@"Pixelbuffer == NULL");
                continue;
            }

            //DLog(@"Sample call back! Pixelbuffer: %lu", CVPixelBufferGetHeight(pixelBuffer));

            //NSDictionary *options = [NSDictionary dictionaryWithObject:(__bridge id)CGColorSpaceCreateDeviceRGB() forKey:kCIImageColorSpace];

            CIImage *ciimage = [CIImage imageWithCVPixelBuffer:pixelBuffer options:nil];

            CIImage *outputImage = [self filteredImageWithImage:ciimage];

            CVPixelBufferRef outPixelBuffer = NULL;
            CVReturn status;

            CFDictionaryRef empty; // empty value for attr value.
            CFMutableDictionaryRef attrs;
            empty = CFDictionaryCreate(kCFAllocatorDefault, // our empty IOSurface properties dictionary
                                       NULL,
                                       NULL,
                                       0,
                                       &kCFTypeDictionaryKeyCallBacks,
                                       &kCFTypeDictionaryValueCallBacks);

            attrs = CFDictionaryCreateMutable(kCFAllocatorDefault,
                                              1,
                                              &kCFTypeDictionaryKeyCallBacks,
                                              &kCFTypeDictionaryValueCallBacks);

            CFDictionarySetValue(attrs,
                                 kCVPixelBufferIOSurfacePropertiesKey,
                                 empty);

            CFDictionarySetValue(attrs,
                                 kCVPixelBufferCGImageCompatibilityKey,
                                 (__bridge const void *)([NSNumber numberWithBool:YES]));

            CFDictionarySetValue(attrs,
                                 kCVPixelBufferCGBitmapContextCompatibilityKey,
                                 (__bridge const void *)([NSNumber numberWithBool:YES]));

            status = CVPixelBufferCreate(kCFAllocatorDefault, ciimage.extent.size.width, ciimage.extent.size.height, kCVPixelFormatType_32BGRA, attrs, &outPixelBuffer);

            //DLog(@"Output image size: %f, %f, pixelbuffer height: %lu", outputImage.extent.size.width, outputImage.extent.size.height, CVPixelBufferGetHeight(outPixelBuffer));

            if (status != kCVReturnSuccess) {
                DLog(@"Couldn't allocate output pixelBufferRef!");
                continue;
            }

            [offlineRenderContext render:outputImage toCVPixelBuffer:outPixelBuffer bounds:outputImage.extent colorSpace:colorSpace];

            CMTime currentSourceTime = CMSampleBufferGetPresentationTimeStamp(buffer);
            CMTime currentTime = CMTimeSubtract(currentSourceTime, startOffset);
            CMTime duration = reader.timeRange.duration;
            if (CMTIME_IS_POSITIVE_INFINITY(duration)) {
                duration = movie.duration;
            }
            CMTime durationConverted = CMTimeConvertScale(duration, currentTime.timescale, kCMTimeRoundingMethod_Default);

            float durationFloat = (float)durationConverted.value;
            float progress =  ((float) currentTime.value) / durationFloat;

            //DLog(@"duration : %f, progress: %f", durationFloat, progress);

            [self updateOfflineRenderProgress:progress];

            if (pixelBuffer != NULL && writerVideoInput.readyForMoreMediaData) {
                [writerPixelAdaptor appendPixelBuffer:outPixelBuffer withPresentationTime:currentTime];
            } else {
                continue;
            }

            if (writer.status == AVAssetWriterStatusWriting) {
                DLog(@"Writer.status: AVAssetWriterStatusWriting");
            }

            CFRelease(buffer);
            CVPixelBufferRelease(outPixelBuffer);
        }

        }

        @catch (NSException *exception) {
            DLog(@"Catching exception: %@", exception);
        }

    }];

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T14:26:15.283

好的，我想我自己解决了。坏人是这行：

```
[writerVideoInput requestMediaDataWhenReadyOnQueue:dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) usingBlock:^{ .... 
```

我传递的全局队列是一个并发队列。这允许在前一个回调完成之前进行新的回调。资产编写器并非设计为一次从多个线程写入。

创建和使用新的串行队列似乎可以解决这个问题：

```
assetWriterQueue = dispatch_queue_create("AssetWriterQueue", DISPATCH_QUEUE_SERIAL);

[writerVideoInput requestMediaDataWhenReadyOnQueue:assetWriterQueue usingBlock:^{... 
```

# json - Apploop通过json提要中的事件

> ID：14121512
> 
> 赞同：0
> 
> 时间：2013-01-02T11:47:53.797
> 
> 标签：json, fullcalendar

当我在下面的 jquery 中成功发布 ajax 后使用警报时，我看到了很多事件对象。

我如何访问每个事件的详细信息并相应地更改它们？

```
eventSources: [
{
    url: 'json-events.php',
    type: 'POST',
    error: function (data) {
        alert('there was an error while fetching events!' + data.msge);
    },
    success: function (data) {
        alert(data);
        // how do i loop through the event objects and filter which ones are approved == 1?
        if(data.approved == "1") {
            // How do I then change the properties of each event that is approved?
            event.title = title + "approved";
            event.Color = 'green';
            var event.className = "approved";
        } else{
            var event.title = title + "awaiting approval";
            event.Color = 'red';
            var event.className = "unapproved";
        }
    }
}] 
```

更新：批准后更改单个事件的颜色

```
// approve function
$('.approve').click(function (calEvent, jsEvent, view, getid) {
    // Get id of event 
    var getid = $('.approve').attr('id');

    if ($(this).html() == "yes") {
        // AJAX post to insert into DB 
        $.post("ajax.php", {
                action: 'approve',
                color: 'green'
            },
            function (data) {
                var fancyContent = ('<div class="header"><p>' + data.msge + '</p></div>');
                $.fancybox({
                    content: fancyContent
                });
            }, "json");

        // get event 
        var eventObject = $('#calendar').fullCalendar( 'clientEvents', getid );

        // set event colors
        eventObject.backgroundColor = 'green';
        eventObject.eventBorderColor = 'green';
        eventObject.title = event.title + " approved";

        // update event somehow?
        $('#calendar').fullCalendar('updateEvent', eventObject);
    } else {
        // close fancybox
        $.fancybox.close();
    } // end of  if
}); // end of approve click 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:33:00.803

您可以像这样遍历 JSON 响应：

```
success : function( responseData ) {
  $.each( function( index, responseObj ) {
    if( responseObj.approved === "1" ) {
      responseObj.title += " approved";
      responseObj.className = "approved";
    }
    else {
      responseObj.title += " waiting approval";
      responseObj.className = "unapproved";
    }
  } );

} 
```

您将无法使用这种过滤方式设置每种事件类型的颜色。

您可以将每种类型分解为它们自己的事件源，例如：

```
eventSources : [
  {
    url : 'json-events.php?approved=y',
    color : 'green'
    // ... success() and other attributes go here
  },
  {
    url : 'json-events.php?approved=n',
    color : 'red'
    // ... success() and other attributes go here
  }
] 
```

# mysql - 替换 120 多个表中的 MySQL 值

> ID：14121516
> 
> 赞同：0
> 
> 时间：2013-01-02T11:48:20.503
> 
> 标签：mysql, regex, replace, vbulletin

我们已将巨大的互联网服务从 .de 域重定向到 .com 域 - 这是讨论板 (vBulletin)。目前我们需要将“domainame.de”等所有短语更改为“domainame.com”：

*   超过 120 个表格（帖子、主题）
*   很多 MySQL 字段

任何人都有建议如何做这样的事情？我们需要将字符串“domainame.de”替换为“domainname.com”——无处不在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:04:46.860

你想做的事情听起来很危险，因为它可能会出现一些误报，并无意中改变事情。假设您的旧域是“acme.de”，新域是“acme.com”，并且一些随机访问者发布了以下内容（这是一个过于简化的示例）：

> 我喜欢与 Acme 一起工作。取决于我的心情。

将其转换为：

> 我喜欢与 Acme 一起工作。根据我的心情进行补偿。

因此，我的建议按优先顺序排列：

1.  根本不更新数据库，只需配置您的 Web 服务器以将 .de 流量重定向到 .com 流量。这样你就不太可能犯错。

2.  如果您必须更新讨论板，请在您的显示逻辑中而不是在数据库中进行更新——那么您将没有机会犯不可挽回的错误。

3.  用 perl 或您最喜欢的文本处理语言语言编写一个脚本，该语言对每个表/字段进行正则表达式替换。我建议以下策略：

    一个。做一个`SELECT id,<field name> FROM <table> WHERE <field name> LIKE '%domain.de%'`

    湾。以 CSV 或其他易于解析的格式存储输出。

    C。运行您的正则表达式脚本以将**domain.de**更改为**domain.com**

    d。检查输出。

    e. `UPDATE <table> SET <field>=? WHERE id=?`使用脚本的输出执行,。

    开始时分小块进行（一次几十或几百个帖子），并在将更改提交到数据库之前目视检查结果，以确保您没有犯错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:53:22.720

我不知道这是否对你有用，但看看这个

以下查询将为您提供表列表（120 个表）

```
 SELECT DISTINCT table_name
   FROM
   (
     SELECT *
     FROM information_schema.`COLUMNS` C
   ) t1
   WHERE TABLE_SCHEMA='schema_name' 
```

接下来，您可以对每个表使用 UPDATE 查询。[您可以使用CURSORS](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)实现此目的

我不擅长游标，但我认为在这种情况下会有所帮助

# css - 带有箭头的垂直表的左列不调整大小

> ID：14121518
> 
> 赞同：2
> 
> 时间：2013-01-02T11:48:26.823
> 
> 标签：css

我将带有箭头的水平面包屑菜单转换为使用`:before`和`:after`元素生成箭头的垂直时间线。左列被标记为`th`并且必须定义为`display: block`以便可以生成箭头。我的问题是，该定义`display: block`避免了`table-cell`根据其`table-cell`右侧调整其高度。

为了更好地理解，您可以查看[此链接](http://vorschau.e-friedrich.de/ueber-uns/geschichte/)

该站点具有响应性，因此我无法定义固定的高度值。如果您将窗口大小调整为小于 400 像素，则会发生错误。

也许有人对我有想法......？:)

这是代码：

```
<table width="100%" border="0" class="zeitstrahl">
      <tr>
        <th class="datum1" scope="row">1947</th>
        <td>Unternehmensgründung durch Erich Friedrich </td>
      </tr>
      <tr>
        <th class="datum2" scope="row">1951</th>
        <td>Bau der ersten  Aufbereitungsanlage in Stiddien bei Braunschweig,<br>
        Jahresleistung 100.000 t</td>
      </tr>
      <tr>
        <th class="datum3" scope="row">1954</th>
        <td><p>Bau einer Anlage in Salzgitter  Drütte mit einer Jahresleistung <br>
        von 600.000 t</p></td>
      </tr>
      <tr>
        <th class="datum4" scope="row">1964</th>
        <td>Standortwechsel nach  Salzgitter-Immendorf und Bau einer Anlage in Salzgitter Immendorf auf dem Gelände des  heutigen Reststoffzentrum 
        Barum (RZB)  mit einer Anfangskapazität von 600.000 t/a und der Erweiterung auf eine  Jahresleistung von 1.200.000 t</td>
      </tr>
      <tr>
        <th class="datum5" scope="row">1980</th>
        <td>Weltweiter Bau von  Aufbereitungsanlagen    Mit  einem Partner wurden Anlagen u.a. in Indien, China, Ungarn, der UdSSR mit  Jahreskapazitäten von 1,0 bis 3,5 Million t geplant und errichtet.</td>
      </tr>
      <tr>
        <th class="datum6" scope="row">1990</th>
        <td>Bündelung der  Aufbereitungsaktivitäten in einer separaten Gesellschaft und Gründung der Firmen ERICH FRIEDRICH Hüttenservice  GmbH 
        und ERICH FRIEDRICH Handel GmbH</td>
      </tr>
      <tr>
        <th class="datum7" scope="row">2000</th>
        <td>Beginn einer weiteren  Expansionsphase<br>
          ERICH FRIEDRICH Handel GmbH führt  Entsorgungsdienstleistungen 
            in den Stahlwerken der Salzgitter Flachstahl  GmbH und der 
            Georgsmarienhütte GmbH durch, u.a. den  Transport von flüssiger 
            Schlacke, Betreiben der Schlackebette und  die anschließende 
        Aufbereitung zu wiederverwertbaren Hüttenreststoffen</td>
      </tr>
      <tr>
        <th class="datum8" scope="row">heute</th>
        <td>Aufbereitungsaktivitäten für die <a href="http://www.peiner-traeger.de" title="Peiner Träger GmbH" target="_blank">Peiner Träger GmbH</a></td>
      </tr>
</table> 
```

***CSS：***

```
table.zeitstrahl { margin-top: 0px; }

.zeitstrahl th {
    position: relative; 
    display: block;
    width: 120px;       
    color: white;
    text-decoration: none; 
    padding: 60px 0 60px 0;
    background: #004993;                   /* fallback color */
    background: hsla(210,100%,15%,1);           
}

.zeitstrahl th:after { 
    content: " "; 
    display: block; 
    width: 0; 
    height: 0;
    border-right: 60px solid transparent;  /* Go big on the size, and let overflow hide */
    border-left: 60px solid transparent;
    border-top: 30px solid hsla(210,100%,15%,1);
    position: absolute;
    top: 100%;
    left: 50%;          
    margin-left: -60px;
    z-index: 2;
}

.zeitstrahl th:before { 
    content: " "; 
    display: block; 
    width: 0; 
    height: 0;
    border-right: 60px solid transparent;  /* Go big on the size, and let overflow hide */
    border-left: 60px solid transparent;
    border-top: 30px solid white;
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -60px;
    margin-top: 2px;
    z-index: 1;
}

.zeitstrahl td { padding: 20px; vertical-align: middle; display:table-cell; }

.zeitstrahl .datum1 { padding-top: 20px; }

.zeitstrahl .datum2 { background: hsla(210,100%,25%,1); }
.zeitstrahl .datum2:after { border-top-color: hsla(210,100%,25%,1); }

.zeitstrahl .datum3 { background: hsla(210,100%,35%,1); }
.zeitstrahl .datum3:after { border-top-color: hsla(210,100%,35%,1); }

.zeitstrahl .datum4 { background: hsla(210,100%,45%,1); }
.zeitstrahl .datum4:after { border-top-color: hsla(210,100%,45%,1); }

.zeitstrahl .datum5 { background: hsla(210,100%,55%,1); }
.zeitstrahl .datum5:after { border-top-color: hsla(210,100%,55%,1); }

.zeitstrahl .datum6 { background: hsla(210,100%,65%,1); }
.zeitstrahl .datum6:after { border-top-color: hsla(210,100%,65%,1); }

.zeitstrahl .datum7 { background: hsla(210,100%,75%,1); }
.zeitstrahl .datum7:after { border-top-color: hsla(210,100%,75%,1); }

.zeitstrahl .datum8 { background: hsla(210,100%,75%,1); margin-top: -30px; }
.zeitstrahl .datum8:after { border-top-color: hsla(210,100%,75%,1); }

.zeitstrahl th:hover { background: hsla(210,100%,25%,1); }
.zeitstrahl th:hover:after { border-top-color: hsla(210,100%,25%,1) !important; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:08:14.063

`<th>`需要`display: block`在`position: relative`Firefox 中生效。但正因为如此，它的高度不会填满表格行，因为它不再像表格单元格一样。

要解决此问题，您必须`display: block`从`<th>`. 但是因为我们需要`position: relative`箭头起作用，所以我将其设置`display: block; position: relative;`为它的父级：table-row。然后我不得不使用`th:after, th:before`底部和左侧值，因为百分比不再起作用。我不知道`tr { display: block; }`, 将来是否会导致任何其他问题，但它确实可以完成工作。

完成此操作后，`<th>`它将表现为一个普通的表格单元格，当窗口太小时它会缩小。为了解决这个问题，我设置了`th { min-width: 120px }`.

所以这里是[codepen](http://codepen.io/joe/pen/BpFwe). 更改标有注释。适用于 Chrome、Firefox 和 Opera，但不适用于 IE8-。没有测试过IE8+。

# android - 如何在 Universal Image Loader 中动态设置 url？

> ID：14121533
> 
> 赞同：0
> 
> 时间：2013-01-02T11:49:13.870
> 
> 标签：android

我正在使用我在[这里](https://github.com/nostra13/Android-Universal-Image-Loader)找到的通用图像加载器。在这种情况下，图片的 url 是静态设置的或预设在`String[] IMAGES`. 我想要的是让它更具动态性，比如它来自 URL。( `http://site.com/myfile.xml`)。我已经完成了对 XML 的解析，但现在我的问题是将它设置在`UIL`. 有没有办法动态设置图像？我在正确的方向吗？（解析`xml`并将其保存在`ArrayList`并将其转换为`String[]`数组。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:07:20.573

解析 xml 后，在`getView()`您的适配器中使用`ArrayList.get(position)`而不是`String[position]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T08:59:10.223

我有类似的要求，这就是我实现它的方式：

我有一个 Async 任务，它从 url 获取图像的 url。所以本质上它会返回带有 url 列表的 JSON 字符串。一旦该请求完成，我就会有一个监听器通知我的 Fragment 更新列表视图。

异步任务返回一个字符串列表，我将其添加到适配器正在使用的列表中。

//异步任务中的代码

```
@Override
        protected void onPostExecute(List<String> result) {
            if (null != mClient)
                mClient.close();
            //TODO
                //Constants.IMAGES = result.toArray(new String[result.size()]);
            Constants.IMAGES.addAll(result);
                Log.i("IMAGES", IMAGES.toString());
                if (mTheListener != null && firstCallFlag ) {
                    firstCallFlag = false;
                    mTheListener.GotoNextScreen();
                }else{
                dataUpdateListener.dataUpdated(result);
            }
        } 
```

//fargment中的代码

```
public void dataUpdated(List<String> data) {
        // TODO Auto-generated method stub
        imageUrls.addAll(data);
        mAdapter.notifyDataSetChanged();
    } 
```

# jsp - 如何在 JSP 中自动更改文本字段值？

> ID：14121535
> 
> 赞同：0
> 
> 时间：2013-01-02T11:49:28.363
> 
> 标签：jsp

我的页面中有 2 个文本字段，其中包含`id="textfield1"`和`id="textfield2"`：

```
<input type="text" name="textfield1" id="textfield1" size="70" />
<input type="text" name="textfield1" id="textfield2" size="70" /> 
```

如果我更改`textfield1`，那么我想`textfield2`在 JSP 中自动更改值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:55:06.953

您可以使用如下的小型 javascript 代码：

```
function fillTextbox(){
var tf1=document.getElementById("textfield1").value;
document.getElementById("textfield2").value=tf1;
}

<input type="text" name="textfield1" id="textfield1" size="70" onkeyleave="fillTextbox()" />

<input type="text" name="textfield1" id="textfield2" size="70" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:59:16.477

添加这个javascript函数

```
function changeVal() 
{ 
document.getElementById("textfield2").value="abc";   
} 
```

在 textbox1 的模糊事件上调用它

```
<input type="text" name="textfield1" id="textfield1" size="70" onkeyleave="changeVal()"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:52:20.683

像这样编写 onchange 函数：

```
$('#textfield1').change(function() {
$('#textfield2').val($('#textfield1').val());
}); 
```

# php - 在 PHP Excel 类的 excel 单元格中设置数据类型

> ID：14121536
> 
> 赞同：1
> 
> 时间：2013-01-02T11:49:34.813
> 
> 标签：php, phpexcel

使用 PHP Excel 类，如何在 Excel 单元格中设置百分比数据类型。

我尝试使用以下代码：

```
$objPHPExcel->getActiveSheet()->getStyle('I2')
    ->getNumberFormat()->applyFromArray( 
        array( 
            'code' => PHPExcel_Style_NumberFormat::FORMAT_PERCENTAGE_00
        )
    ); 
```

但在这种情况下，如果我将值添加到“I2”为“2.35”，它会在生成的 Excel 文件中显示为“235.00%”。

反正有没有正确显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:58:28.447

这是 MS Excel 行为：

打开 MS Excel，将单元格值设置为 2.35，然后将单元格编号格式设置为百分比（带或不带小数），您将看到 235.00% 作为格式化值。

PHPExcel 简单地反映了这一点。

如果要在 Excel 中显示 2.35%，则需要将单元格值设为 0.0235，然后将数字格式掩码设置为百分比。在 PHPExcel 中做同样的事情，你会得到你想要的结果

请注意，这不会以任何方式改变单元格的值，只是改变它的显示方式。

或者，将数字格式掩码设置为：

```
#,##0.00"%" 
```

# python - Django 重用模型

> ID：14121537
> 
> 赞同：0
> 
> 时间：2013-01-02T11:49:39.737
> 
> 标签：python, django, django-models

我有 30 多个模型的 Django 应用程序。我想编写一个可以对某些模型中的数据进行快照的应用程序。我想编写一次模型并在每个应用程序中重用它们，这样如果我将它维护在一个地方，唯一的区别是当我调用`python manage.py syncdb`同一个表时会使用不同的表前缀创建。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:59:32.737

这正是可重用应用程序原则发挥作用的地方。（[如django网站上所述](https://docs.djangoproject.com/en/dev/intro/reusable-apps/)）

# forms - 播放框架 Scala - 以表单获取会话值

> ID：14121540
> 
> 赞同：3
> 
> 时间：2013-01-02T11:49:52.287
> 
> 标签：forms, scala, session, playframework, playframework-2.0

我正在使用带有 Scala 的 Play 2.0.4 框架。

我必须是用户和团队的模型。

```
case class User {
    var email: String,
    var username: String
}

case class Team {
    var sport: String,
    var captain: String //is the username of a User
} 
```

在我的用户和团队控制器中，对象是通过表单创建的。对于用户来说，这很完美。并通过成功的请求，使用 .withSession() 将用户名放入会话中。也可以正常工作。

但现在我正在努力创建一个团队并从会话中检索用户名。

看起来像

```
val teamForm = Form[Team](
    mapping(
        sport -> nonEmptyText,
        //I actually don't have an input for captain as it should be retrieved from the session
    )
) (
    ((sport, _) => User(sport, request.session.get("username"))
    ((team: Team) => Some(team.sport, team.captain))
) 
```

问题是请求在表单的“上下文”中是未知的。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T12:53:55.673

除非我遗漏了一些基本的东西，否则您可以将您的更改`val teamForm`为`def`.

```
def teamForm(request:Request[_]) = Form[Team](
    mapping(
        sport -> nonEmptyText,
        //I actually don't have an input for captain as it should be retrieved from the session
    )
) (
    ((sport, _) => User(sport, request.session.get("username"))
    ((team: Team) => Some(team.sport, team.captain))
) 
```

# hive - 控制 Hive 中的详细程度

> ID：14121543
> 
> 赞同：3
> 
> 时间：2013-01-02T11:50:05.820
> 
> 标签：hive

我以这种方式从命令行运行 hive：

```
hive -e "select * from table;" 
```

它为我提供了查询的所有细节和阶段。如果我做：

```
hive -S -e "select * from table;" 
```

它没有给出任何细节。

我想要的只是显示 map reduce 的每个步骤的 mapper 和 reducer 的数量，以及 map reduce 步骤的数量，但我不想看到所有信息，例如：

```
2013-01-02 12:46:28,756 Stage-1 map = 100%,  reduce = 67%, Cumulative CPU 287.99 sec 
```

那么，是否可以使用 Hive 对详细程度进行更精细的控制？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T01:40:15.463

[我对同一问题](https://stackoverflow.com/questions/20849289/how-do-i-limit-log-verbosity-of-hive)的“解决方案”是

```
hive ... 2>&1 | grep --line-buffered -v -e ' map = .*,  reduce = ' | tee log 
```

这很糟糕（并且可能会杀死更多人），但这是迄今为止我能想到的最好的。

编辑：请观看并投票给[日志记录（进度报告）太冗长](https://issues.apache.org/jira/browse/HIVE-6314)

# file-upload - Jmeter 代理服务器不捕获文件上传请求

> ID：14121551
> 
> 赞同：5
> 
> 时间：2013-01-02T11:50:52.643
> 
> 标签：file-upload, jmeter

我试图从 Jmeter 的代理服务器捕获文件上传请求，但在上传文件时显示错误消息。我已经将该`proxy.binary.types`属性配置为`application/x-amf,application/x-java-serialized-object,application/octet-stream,application/vnd.ms-excel`.

以下是 UI 上显示的错误消息：

```
java.io.FileNotFoundException: employee_template.xls (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at java.io.FileInputStream.<init>(Unknown Source)
    at org.apache.jmeter.protocol.http.sampler.PostWriter.writeFileToStream(PostWriter.java:406)
    at org.apache.jmeter.protocol.http.sampler.PostWriter.sendPostData(PostWriter.java:115)
    at org.apache.jmeter.protocol.http.sampler.HTTPSampler.sendPostData(HTTPSampler.java:122)
    at org.apache.jmeter.protocol.http.sampler.HTTPSampler.sample(HTTPSampler.java:508)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:965)
    at org.apache.jmeter.protocol.http.proxy.Proxy.run(Proxy.java:242) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T12:46:18.857

将要上传的文件复制到 JMeter 的 bin 文件夹中，请参见：

*   [http://jmeter.512774.n5.nabble.com/File-Upload-failure-td530225.html](http://jmeter.512774.n5.nabble.com/File-Upload-failure-td530225.html)

# android - Droid：如何以编程方式重新排序线性布局内容？

> ID：14121552
> 
> 赞同：6
> 
> 时间：2013-01-02T11:50:57.287
> 
> 标签：android, button, android-linearlayout

我有一个带有按钮列表的滚动视图。我希望在首次使用应用程序时将说明放在此列表的开头，但在用户使用过一次后将说明移至屏幕末尾，因为不再需要说明，但我仍然想要他们可以访问。我不知道从哪里开始！

编辑：根据要求进行不同的解释。

我的主要布局有一张桌子。最下面一行是一个Horizo​​ntalScrollView，包含一个LinearLayout，包含6个Button。如果我们按照 .xml 布局中的顺序调用这些按钮 1、2、3、4、5、6，我希望在代码中能够将它们重新排序为“6、1、2、3、4、5” .

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-02T12:13:34.697

只需找到您的视图，然后从线性布局中删除并按新顺序添加。

```
ln1= (LinearLayout)findViewById(R.id.ln1);

    btn1= (Button)findViewById(R.id.button1);
    btn2= (Button)findViewById(R.id.button2);
    btn3= (Button)findViewById(R.id.button3);
    btn4= (Button)findViewById(R.id.button4);
    btn5= (Button)findViewById(R.id.button5);
    btn6= (Button)findViewById(R.id.button6);

    ln1.removeAllViews();

    ln1.addView(btn6);
    ln1.addView(btn1);
    ln1.addView(btn2);
    ln1.addView(btn3);
    ln1.addView(btn4);
    ln1.addView(btn5); 
```

# f# - 重载度量 运算符 (*)

> ID：14121556
> 
> 赞同：4
> 
> 时间：2013-01-02T11:51:07.207
> 
> 标签：f#

我试图为 Measure 类型重载 (*) 运算符。

我想看到的是：

```
> let x = 1.0<i> * 1.0<i>;;

val x : float = -1.0 
```

以下定义似乎可以解决问题：

```
> let inline (*) (v1 : float<i>) (v2 : float<i>) = float(-1) * float(v1) * float(v2);;

val inline ( * ) : float<i> -> float<i> -> float 
```

请注意，此示例中的乘积度量正确解析为 <1>，例如，当乘以复数的虚数单位时会发生这种情况。如果没有此重载定义，默认产品将解析为 <i^2>。

但是上面的重载定义有一个讨厌的副作用：

```
> let y = 1.0 * 1.0;;

let y = 1.0 * 1.0;;
--------^^^

stdin(11,9): error FS0001: This expression was expected to have type
float<i>    
but here has type
float 
```

显然我的重载定义隐藏了浮点类型的 (*) 运算符。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T12:51:36.713

请注意，您正在重新定义`(*)`运算符而不是重载它。

让它工作的诀窍是使用中间类型编写一些东西，如下所示：

```
type Mult = Mult with
    static member        ($) (Mult, v1: float<i>) = fun (v2: float<i>) -> 
                                 float(-1) * float(v1) * float(v2)
    static member inline ($) (Mult, v1      ) = fun v2 -> v1 * v2
    static member        ($) (Mult, v1: Mult) = fun () -> Mult //Dummy overload

let inline (*) v1 v2 = (Mult $ v1) v2 
```

顺便说一句，使用计量单位的有趣方式。

# asp.net-mvc-4 - 了解路由，如何创建两个可以是 GET 和 POST 的“相同”路由？

> ID：14121558
> 
> 赞同：0
> 
> 时间：2013-01-02T11:51:17.013
> 
> 标签：asp.net-mvc-4, asp.net-web-api, asp.net-mvc-routing

以前，我有两种方法，一种用标记，另`[WebGet]`一种用标记`[WebInvoke(Method = "POST"]`

当我对我指定的 URL 执行 GET 或 POST 时，它总是会调用正确的方法。

网址是：

```
POST: fish-length
GET: fish-length?start-date={startDate}&pondId={pondId} 
```

现在我正在使用 web api，我必须单独定义我的路由，如下所示：

```
 RouteTable.Routes.MapHttpRoute(
        name: "AddFishLength",
        routeTemplate: "fish-length",
        defaults: new
        {
            controller = "FishApi",
            action = "AddFishLength"
        });

    RouteTable.Routes.MapHttpRoute(
       name: "GetFishLength",
       routeTemplate: "fish-length?start-date={startDate}&pondId={pondId}",
       defaults: new
       {
           controller = "FishApi",
           action = "GetFishLength"
       }); 
```

但是，第二条路线不起作用，因为您不允许`?`在 routeTemplate 中使用 a。

我可以将 URL 格式更改为类似的格式，`fish-length/{startDate}/{pondId}`但这并不是公开服务的好方法。

有一个更好的方法吗？另外因为我之前对同一个 url 进行了 POST 和 GET，所以我需要确保我的路由方法仍然允许这样做。假设上述方法有效，我仍然不确定它如何正确路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:49:25.303

您不能在路由模板中指定查询字符串参数 - 但只要您有一个与参数名称匹配的方法，WebApi 就应该足够聪明，可以自行解决。

`public HttpResponseMessage Get(string id)`将对应于请求`{controller}?id=xxx`

但是，如果没有看到实际对象，就很难判断您应该如何解决您的问题。例如，WebApi 不喜欢 Get 请求中的复杂类型，并且它仅以特定方式支持发布数据中的 url 编码内容。

至于区分 Get 和 Post 非常简单——WebApi 知道您在发送请求时使用了哪种方法，然后它会查找以 Get/Post 开头或以 HttpGet/Post 属性装饰的方法名称。

我建议看一下以下文章——它们帮助我理解了它是如何工作的：

[http://www.west-wind.com/weblog/posts/2012/Aug/16/Mapping-UrlEncoded-POST-Values-in-ASPNET-Web-API](http://www.west-wind.com/weblog/posts/2012/Aug/16/Mapping-UrlEncoded-POST-Values-in-ASPNET-Web-API)

[http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:54:37.807

不，您不需要定义单独的路线。您只需要一条路线：

```
RouteTable.Routes.MapHttpRoute(
    name: "AddFishLength",
    routeTemplate: "fish-length",
    defaults: new
    {
        controller = "FishApi",
    }
); 
```

然后遵循 ApiController 操作的 RESTful 命名约定：

```
public class FishApiController: ApiController
{
    // will be called for GET /fish-length
    public HttpResponseMessage Get()
    {
        // of course this action could take a view model
        // and of course that this view model properties
        // will automatically be bound from the query string parameters
    }

    // will be called for POST /fish-length
    public HttpResponseMessage Post()
    {
        // of course this action could take a view model
        // and of course that this view model properties
        // will automatically be bound from the POST body payload
    }
} 
```

所以假设你有一个视图模型：

```
public class FishViewModel
{
    public int PondId { get; set; }
    public DateTime StartDate { get; set; }
} 
```

继续并修改您的控制器操作以采用此参数：

```
public class FishApiController: ApiController
{
    // will be called for GET /fish-length
    public HttpResponseMessage Get(FishViewModel model)
    {
    }

    // will be called for POST /fish-length
    public HttpResponseMessage Post(FishViewModel model)
    {
    }
} 
```

对于不同的操作，您显然可以有不同的视图模型。

# python - Tix ScrolledListbox 不可滚动

> ID：14121566
> 
> 赞同：0
> 
> 时间：2013-01-02T11:52:01.843
> 
> 标签：python, tkinter, arcpy, tix

你好，新年快乐，

我正在尝试构建用户界面，但 Tix.ScrolledListbox 有问题。（Python 2.6.5、Tix 8.4.3、Windows XP）

我想用它来显示不同数量的项目，这取决于用户之前的选择。

这是一个 GIS 的东西：用户从 ComboBox 中选择一个图层，按下一个按钮，Listbox 会显示从属性表中检索到的所有字段名。所以对于某些层有 5 个，对于其他层有 30 个字段。原则上它是有效的。

但是列表框旁边的滚动条仍然是灰色的，没有任何功能。

在一个小的测试片段中，按下按钮后，滚动条工作的列表框中会显示随机（0..100）个项目。

我不知道。有人以前有过这个吗？

编辑：以下示例代码在导入 arcpy 时显示不可滚动的滚动列表框

```
import Tix  
import random  
import arcpy       

class SampleApp(object):
  def __init__(self):
    self.window = Tix.Tk()
    #listbox
    self.lbx = Tix.ScrolledListBox(self.window, width = 30)
    self.lbx.listbox.insert(Tix.END, " ")
    self.lbx.listbox.bind("<<ListboxSelect>>", self.Choose)

    #button to generate new list
    self.btn = Tix.Button(self.window, text = "new list",
                          command = self.NewList)
    #label shows chosen list item
    self.lbl = Tix.Label(self.window, text = "   ", bg = "white")

    #pack
    self.btn.pack(pady = 10)
    self.lbx.pack(side="top", fill="both", expand=True, pady = 10)
    self.lbl.pack(pady = 10)

    self.window.mainloop()

  #function to generate new listbox items on button command
  def NewList(self):
    self.lbx.listbox.delete(0, Tix.END)
    r = random.randint(1, 30)
    for i in range(r):
        self.lbx.listbox.insert(Tix.END, i)

  #event to show selected item in label
  def Choose(self, event):
    widget = event.widget
    selection = widget.curselection()
    value = widget.get(selection[0])
    self.lbl.config(text = value)

 sa = SampleApp() 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T13:32:53.767

您是否将滚动条附加到列表框？

```
from Tkinter import *

root = Tk()

scrollbar = Scrollbar(root)
scrollbar.pack(side=RIGHT, fill=Y)

listbox = Listbox(root)
listbox.pack()

for i in range(100):
    listbox.insert(END, i)

# attach listbox to scrollbar
listbox.config(yscrollcommand=scrollbar.set)
scrollbar.config(command=listbox.yview)

mainloop() 
```

盗自：[http ://effbot.org/zone/tkinter-scrollbar-patterns.htm](http://effbot.org/zone/tkinter-scrollbar-patterns.htm)

编辑： Tix.ScrolledListBox 的工作方式不同，所以不要将它与上述解决方案混为一谈。

# objective-c - 配置文件消失了

> ID：14121571
> 
> 赞同：1
> 
> 时间：2013-01-02T11:52:30.777
> 
> 标签：objective-c, ios, xcode, profile

我有一个 XCode 项目，它已经在 App Store 中，现在我正在尝试进行更新，但我在这个 XCode 项目中看不到任何配置文件。他们消失了。我有 7 个项目，他们正确识别配置文件，这个特定项目有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:58:29.947

在项目的 Xcode 设置中检查 Bundle Identifier。它是否与配置文件标识符匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:58:37.930

检查管理器中是否存在配置文件如果存在，则检查应用程序的捆绑标识符。如果它不存在，您的个人资料一定已过期，请创建一个新的..

希望这可以帮助你...

# selenium - 使用selenium ide测试时如何点击浏览器刷新确认弹出

> ID：14121572
> 
> 赞同：1
> 
> 时间：2013-01-02T11:52:33.030
> 
> 标签：selenium, selenium-ide

我在尝试使用 Selenium IDE 测试 Web 应用程序时遇到问题，当我刷新网页时会弹出浏览器确认消息，selenium IDE 中是否有任何选项可以自动单击“确定”到此浏览器确认消息

请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:27:25.230

关闭从 onload 事件启动的警报/提示/确认对话框是 Selenium 长期存在的问题，没有人能够找到解决方法。Selenium 在所有其他时间都可以很好地处理这些对话框，但在页面加载期间它不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:31:42.327

你用过 assertConfirmation 吗？如果不试试。我已经用它来处理此类确认。

# spotify - sp_image_is_loaded 始终返回 true

> ID：14121575
> 
> 赞同：0
> 
> 时间：2013-01-02T11:52:43.757
> 
> 标签：spotify

所以我正在为一首曲目加载专辑图像，我得到一个指针，`sp_image`然后等待它完成加载，然后再用`sp_image_data`( `sp_image`, `data`) 获取字节字节，但问题是`sp_image_loaded`总是检查为真，甚至图像未加载并`sp_image_data`返回错误“资源尚未加载”。

难道我做错了什么？因为想要同步获取图像，所以我没有使用回调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:12:28.040

`sp_image`在初始化之前，您应该确保该结构被 memset 为 0。这可能是许多此类问题的原因。

# java - Oracle 异常：SQL 命令未正确结束

> ID：14121578
> 
> 赞同：2
> 
> 时间：2013-01-02T11:53:07.977
> 
> 标签：java, sql, oracle

我正在使用 JSP 和 Servlet 开发 Web 应用程序（IDE：Eclipse，Container：Tomcat7.0，DB：Oracle 10）

我想在一个查询中从两个表中获取数据

**询问：**

```
query = "select * from PROTOCOL as a, ACTIONS as b where a.PROTOCOL_ID = b.PROTOCOL_ID"; 
```

但是在运行应用程序后，我得到以下异常：

```
java.sql.SQLException: ORA-00933: SQL command not properly ended 
```

查询有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T12:02:34.533

您遇到的问题是关键字`AS`。这用于`SELECT`部分中的列。`FROM`它对于您指定表的位置无效。

你有

`select * from PROTOCOL as a, ACTIONS as b`

应该

`select * from PROTOCOL a, ACTIONS b...`

来自[Oracle 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_10002.htm#sthref9806)

> **t_alias**
> 
> 指定相关名称，它是用于评估查询的表、视图、物化视图或子查询的别名。如果选择列表引用任何对象类型属性或对象类型方法，则需要此别名。关联名称最常用于关联查询。整个查询中对表、视图或实体化视图的其他引用必须引用此别名。

**例子：**

```
SELECT select_list 
    FROM table1 t_alias1 
    WHERE expr operator 
        (SELECT column_list 
            FROM table2 t_alias2 
            WHERE t_alias1.column 
               operator t_alias2.column); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:05:16.247

错误的别名语法。尝试以下操作：

```
query = "select * from PROTOCOL a,ACTIONS b where a.PROTOCOL_ID = b.PROTOCOL_ID"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T10:09:28.490

任何人都可能需要它的评论.. PostgreSQL 似乎接受 FROM/JOIN 旁边的 AS

# android - 嵌套的线性布局不起作用

> ID：14121586
> 
> 赞同：0
> 
> 时间：2013-01-02T11:53:58.197
> 
> 标签：android

我在绘制嵌套的线性布局时遇到问题。在第二个线性布局（第一个包含在主线性布局中）之后，没有其他任何显示！但我的 xml 文件中没有任何错误消息。

```
---main linearLayout--------------------------------
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  
    android:orientation="horizontal"
    tools:context=".MainActivity" 
    >
------first included linearLayout: it's shown without nay problems--------------------
    <LinearLayout 
    android:background="#FFFFFF"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="1">
<TextView
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="0.4"
    android:text="@string/hello_world" />   
</LinearLayout>

------second included linearLayout: it's NOT shown--------------------
<LinearLayout 
       android:background="#CCCCCC"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_marginTop="20dp"
    android:gravity="center"
    android:weightSum="1">

    <ImageView 
        android:layout_width="0dp"
        android:layout_weight="0.3"
        android:layout_marginLeft="2dp"
         android:background="@drawable/ic_launcher"
        android:layout_height="100dp"/>
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:49:17.927

也许，在您的帮助下，我找到了解决问题的方法。在 xml 文件中，我将 android:orientation 设置为“垂直”，然后`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);`在我的主要活动类中使我的应用程序“水平”。这是解决我的问题的正确方法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:56:24.337

在布局顶部更改

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  
    android:orientation="horizontal"
    tools:context=".MainActivity" 
    > 
```

对此：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  
    android:orientation="vertical"
    tools:context=".MainActivity" 
    > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:00:23.720

设置这个，

```
android:layout_width="wrap_content"
android:layout_weight="1" 
```

把你的第一个和第二个包括在内`linearLayout`。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T12:05:50.510

使您的顶部`Linearlayout`方向`android:orientation="vertical"`。

> ```
> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
> xmlns:tools="http://schemas.android.com/tools"
> android:layout_width="fill_parent"
> android:layout_height="fill_parent"  
> android:orientation="vertical" <---Change orientation.
> tools:context=".MainActivity" 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T12:46:10.347

也许，在您的帮助下，我找到了解决问题的方法。在 xml 文件中，我将 android:orientation 设置为“垂直”，然后`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);`在我的主要活动类中使我的应用程序“水平”。这是解决我的问题的正确方法吗？

# tkinter - tkinter 删除消息框内容

> ID：14121588
> 
> 赞同：0
> 
> 时间：2013-01-02T11:54:06.153
> 
> 标签：tkinter, tkmessagebox

我使用消息框作为小部件来显示随机数生成器的结果。随机数的数量是通过输入框选择的。使用

```
def evClear():
    from_draws.delete(0,END)# clears only entry value
    from_draws.focus()
    cvt_to.delete() 
```

我成功地删除了输入框（from_draws）的内容，但是包含随机数的 cvt_to 给出了错误：AttributeError：'StringVar' object has no attribute 'delete' 如何同时删除两者（只是为了让 GUI 看起来好一点）？如果在输入框中输入不同的数字，reruslt 将被新结果覆盖。我想问题是如何删除写入消息框的内容，请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:48:45.090

代替

```
cvt_to.delete() 
```

经过

```
cvt_to.set("")  # set to empty string 
```

# iphone - 在 iPhone / iOS 上绘制网格并与之交互

> ID：14121591
> 
> 赞同：0
> 
> 时间：2013-01-02T11:54:28.950
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, uikit

我有一个 iPhone 游戏的想法，它基本上涉及与正方形网格进行交互（想想[凸版印刷](https://itunes.apple.com/gb/app/letterpress-word-game/id526619424?mt=8)）

创建可以通过触摸进行交互的彩色方块网格的最简单方法是什么？

UIKit、Cocos2d 还是其他方式，比如 OpenGL？我理解 UIKit 的好处是我能够为每个盒子获取触摸事件（如果我将它们设为对象/容器等），但可能不如 cocos2d 快，而且我的控制权可能要少得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:42:33.920

如果你想坚持使用 UIKit，一个随机的“网格组件”框架*可以*为你完成这项工作。例如，有[GMGridView](https://github.com/gmoledina/GMGridView)，它具有触摸处理和您可能需要的一切开箱即用的功能。（只需查看 GMGridView 提供的示例项目）

# android - 如何在警报对话框中随机显示消息

> ID：14121594
> 
> 赞同：0
> 
> 时间：2013-01-02T11:54:51.017
> 
> 标签：android, random, hyperlink, android-alertdialog

我正在使用 AlertDialog 显示任何消息和链接，我使用此代码。但我想在每个动作中随机显示不同的消息（链接）。那可能吗？如果是的话，你能给我这个示例代码吗？谢谢。

```
final AlertDialog d = new AlertDialog.Builder(this)
.setPositiveButton(android.R.string.ok, null)
.setIcon(R.drawable.icon)
.setMessage(Html.fromHtml("<a href=\"http://www.google.com\">Check this link out</a>"))
.create();
 d.show();
// Make the textview clickable. Must be called after show()   
         ((TextView)d.findViewById(android.R.id.message)).setMovementMethod(LinkMovementMethod.getInstance()); 
```

我想要的是：当用户打开我的应用程序时，我的警报框会显示一个链接，但我想使用许多链接并随机显示它们，我会将它用于类似文字广告。我的意思是当用户打开我的应用程序 google.com 时，将显示另一次 yahoo.com 和另一次不同的链接。希望我清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:58:18.957

你可以使用这个：

```
public static void showAlertDialog(final String title, String message,
            final Context context, final boolean redirectToPreviousScreen) {
        AlertDialog.Builder alertbox = new AlertDialog.Builder(context);
        alertbox.setMessage(message);
        alertbox.setTitle(title);

        alertbox.setNeutralButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {

            }
        });
        try{
            alertbox.show();    
        }catch (Exception b) {

        }

    } 
```

# php - 在 PHP 中匹配模式时将文本拆分为行

> ID：14121596
> 
> 赞同：4
> 
> 时间：2013-01-02T11:54:58.220
> 
> 标签：php, regex

> **可能重复：**
> [根据 php 中的数字拆分字符串数组？](https://stackoverflow.com/questions/14102235/splitting-string-array-based-upon-digits-in-php)

我有一组数据，这些数据都在一大块文本中。它看起来类似于以下内容；

> 01/02 10:45:01 测试数据 01/03 11:52:09 测试数据 01/04 18:63:05 测试数据 01/04 21:12:09 测试数据 01/04 13:10:07 测试数据01/05 07:08:09 测试数据 01/05 10:07:08 测试数据 01/05 08:00:09 测试数据 01/06 11:01:09 测试数据

我试图简单地使它可读（例如，见下文），但每条线上唯一相似的地方是开头遵循 00/00 模式。

```
01/02 10:45:01 test data 
01/03 11:52:09 test data 
01/04 18:63:05 test data 
01/04 21:12:09 test data 
01/04 13:10:07 test data 
01/05 07:08:09 test data 
01/05 10:07:08 test data 
01/05 08:00:09 test data 
01/06 11:01:09 test data 
```

我已经通过将其与正则表达式模式匹配来将其拆分出来；

```
$split = preg_split("/\d+\\/\d+ /", $contents, -1, PREG_SPLIT_NO_EMPTY); 
```

这个输出；

```
Array ( [0] => 
        [1] => 10:45:01 test data 
        [2] => 11:52:09 test data 
        [3] => 18:63:05 test data 
        [4] => 18:63:05 test data 
        ...and so on 
```

但正如您所看到的，问题在于 preg_split 没有保留分隔符。我尝试将 preg_split 更改为；

```
$split = preg_split("/\d+\\/\d+ /", $contents, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE 
```

但是，这与上面的返回相同，行首没有 00/00。

我做错了什么还是他们是实现这一目标的更好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T12:01:42.403

您可以`preg_split()`使用[前瞻断言](http://www.regular-expressions.info/lookaround.html)在字符串中的任何点拆分，然后是数字斜线数字。

```
$result = preg_split('#(?=\d+/\d+)#', $contents, -1, PREG_SPLIT_NO_EMPTY); 
```

使用该`PREG_SPLIT_NO_EMPTY`标志是因为字符串的开头也是三个数字的点，因此此处发生空拆分。我们可以将正则表达式更改为不在字符串的开头拆分，但这会使一目了然地理解起来有点困难，而标志非常清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:00:35.383

PHP：

```
<?php

$text = '01/02 10:45:01 test data 01/03 11:52:09 test data 01/04 18:63:05 test data 01/04 21:12:09 test data 01/04 13:10:07 test data 01/05 07:08:09 test data 01/05 10:07:08 test data 01/05 08:00:09 test data 01/06 11:01:09 test data';

$text = preg_replace('/(\d{2})\/(\d{2})(.*)/U', PHP_EOL . "$0", $text);

echo $text; 
```

输出：

```
01/02 10:45:01 test data 
01/03 11:52:09 test data 
01/04 18:63:05 test data 
01/04 21:12:09 test data 
01/04 13:10:07 test data 
01/05 07:08:09 test data 
01/05 10:07:08 test data 
01/05 08:00:09 test data 
01/06 11:01:09 test data 
```

[演示](http://sandbox.onlinephpfunctions.com/code/e1dd0f2281863036c158aa2a703cd7d3680c579e)

# c# - 为什么变量计数器始终为 0？

> ID：14121599
> 
> 赞同：0
> 
> 时间：2013-01-02T11:55:09.183
> 
> 标签：c#

在我在顶部执行的用户控制代码中：

```
int counter; 
```

在构造函数中：

```
counter = 0; 
```

在 MouseDown 事件中，我正在做：

```
private void listBox1_MouseDown(object sender, MouseEventArgs e)
        {
            int index = listBox1.IndexFromPoint(e.X, e.Y);

            if (e.Button == System.Windows.Forms.MouseButtons.Right)
            {
                if (m_itemIndexes.Contains(index))
                    return;

                m_itemIndexes.Add(index);
                DrawItem(index);
                counter += 1;
            } 
```

我在计数器上使用了断点 += 1; 每次单击鼠标右键时，它都会增长一。

然后我在底部添加计数器的属性：

```
[Browsable(true)]
        public int RedCounts
        {
            get { return counter; }
            set
            {
                counter = value;
                Refresh();
            }
        } 
```

然后在顶部的Form1中我做了：

```
ListBoxControl lb1; 
```

在构造函数中：

```
lb1 = new ListBoxControl(); 
```

然后在 Form1 的底部我添加了：

```
private void deleteSelectedLightningsToolStripMenuItem_Click(object sender, EventArgs e)
            {
                if (MessageBox.Show("Are you Sure you want to delete " + lb1.RedCounts + " the selected files ? Click Yes to Confirm and No to continue", "WinForm", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.No)
                {

                }
                else
                {

                }
            } 
```

但是 RedCounts 的结果一直是 0 我不知道为什么。

编辑：

我发现如果我在做而不是 counter = 0; 做计数器= 1；而不是 counter += 1; 做 RedCounts += 1; 然后在 RedCounts 上使用断点，我看到计数器从 1 开始增长 1\. 1,2,3,4....

出于某种原因，问题出现在 Form1 中，当我使用断点单击 deleteSelectedLightningsToolStripMenuItem_Click 然后 lb1.RedCounts 为 1 时，由于某种原因，它可能从属性或行计数器 = 1; 获取值 1；我不知道为什么。所以如果我设置 counter = 121; 然后 lb1.RedCounts 会告诉我 121。奇怪。

这是带有计数器和 RedCounts 的完整用户控件：

```
/*----------------------------------------------------------------
 * Module Name  : ListBoxControl
 * Description  : Change listBox items color
 * Author       : Danny
 * Date         : 30/12/2012
 * Revision     : 1.00
 * --------------------------------------------------------------*/

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;

/*
 *  Introduction :
 * 
 *  By default the color is red.
 *  Added a property to change the color.
 *  Right mouse click on item to change item color.
 *  Left mouse click on item to change the item color back.
 *  If the listBox is empty the control will be filled with 10 "Test" items.
 * */

namespace Lightnings_Extractor // to check how and change the namespace to listBoxControl
{
    public partial class ListBoxControl : UserControl
    {
        private Color m_MyListColor;
        private List<int> m_itemIndexes = new List<int>();
        private List<int> m_coloringItemIndexes = new List<int>();
        private int counter;
        public event EventHandler<ItemEventArgs> ItemRemoved;

        public List<int> Indices
        {
            get { return m_itemIndexes; }
        }

        public ListBoxControl()
        {
            InitializeComponent();

            counter = 1;
            if (listBox1.Items.Count == 0)
            {
                for (int i = 0; i < 10; i++)
                {
                    listBox1.Items.Add("Test " + i);
                }
            }
        }

        private void listBox1_MouseDown(object sender, MouseEventArgs e)
        {
            int index = listBox1.IndexFromPoint(e.X, e.Y);

            if (e.Button == System.Windows.Forms.MouseButtons.Right)
            {
                if (m_itemIndexes.Contains(index))
                    return;

                m_itemIndexes.Add(index);
                DrawItem(index);
                RedCounts += 1;
            }
            else if (e.Button == MouseButtons.Left)
            {
                if (!m_itemIndexes.Contains(index))
                    return;

                m_itemIndexes.Remove(index);
                DrawItem(index);
                OnItemRemoved(index, listBox1.Items[index].ToString());
            }  
            listBox1.SelectedIndex = index;
        }

        protected virtual void OnItemRemoved(int indx, string name)
        {
            EventHandler<ItemEventArgs> handler = ItemRemoved;

            if(handler != null)
                ItemRemoved(this, new ItemEventArgs() {  Index = indx, Name = name});
        }

        private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
        {
            m_MyListColor = MyListColor;
            if (m_MyListColor.IsEmpty == true)
            {
                m_MyListColor = Color.Red;
            }

            bool selected = (e.State & DrawItemState.Selected) == DrawItemState.Selected;

            if (m_itemIndexes.Contains(e.Index))
            {
                using (var brush = new SolidBrush(m_MyListColor))
                {
                    e.Graphics.FillRectangle(brush, e.Bounds);
                }
            }
            else
            {
                e.DrawBackground();
            }

            string item = listBox1.Items[e.Index].ToString();
            e.Graphics.DrawString(item, e.Font, selected || m_itemIndexes.Contains(e.Index) ? Brushes.White : Brushes.Black, e.Bounds, StringFormat.GenericDefault);

            if (selected)
                e.DrawFocusRectangle();
        }

        private void DrawItem(int index)
        {
            Rectangle rectItem = listBox1.GetItemRectangle(index);
            listBox1.Invalidate(rectItem);
        }

        [Browsable(true)]
        public Color MyListColor
        {
            get { return m_MyListColor; }
            set
            {
                m_MyListColor = value;
                Refresh();
            }
        }

        [Browsable(true)]
        public ListBox MyListBox
        {
            get { return listBox1; }
            set
            {
                listBox1 = value;
                Refresh();
            }
        }

        [Browsable(true)]
        public int RedCounts
        {
            get { return counter; }
            set
            {
                counter = value;
                Refresh();
            }
        }

        private void ListBoxControl_Load(object sender, EventArgs e)
        {
            this.listBox1.SelectedIndex = 0;
        }
    }

    public class ItemEventArgs : EventArgs
    {
        public int Index { get; set; }
        public string Name { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:12:36.270

没有奇迹，右键单击`counter`代码中的某处->“查找所有引用”。如果在初始化为 0 的地方无法立即看到结果，请在每次出现时设置一个断点，您很快就会找到它

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-02T11:59:22.237

您的计数器变量始终为零，因为每次调用您的类时，所有非静态对象都会再次实例化。您需要将您的计数器变量声明为静态变量，例如 `static int counter=0;

`

# android - 列表视图布局类似于android的通话记录

> ID：14121601
> 
> 赞同：1
> 
> 时间：2013-01-02T11:55:39.667
> 
> 标签：android, android-layout, android-linearlayout, calllog

我想创建一个类似于 ![在此处输入图像描述](../Images/05df75e7a388f1fe36ae7c7427c43cf1.png)

为此，我正在为 ListView 行创建布局。你能描述一下他们用来创建这一行布局的组件是什么吗？

下面是我用来创建 ListView 行的编码。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:orientation="vertical"
    android:padding="8dp" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        tools:ignore="UseCompoundDrawables" >

        <TextView
            android:id="@+id/callDetailName"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="name"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textStyle="bold"
            tools:ignore="HardcodedText" />

        <ImageView
            android:id="@+id/callDetailType"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_gravity="right|center_vertical"
            tools:ignore="ContentDescription" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/callDetailNumber"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="number"
            android:textAppearance="?android:attr/textAppearanceSmall"
            tools:ignore="HardcodedText" />

        <TextView
            android:id="@+id/callDetailTime"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:text="TextView"
            android:textAppearance="?android:attr/textAppearanceSmallInverse"
            tools:ignore="HardcodedText" />
    </LinearLayout>
</LinearLayout>

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:padding="5dp"
    android:scaleType="fitXY"
    android:src="@android:drawable/dark_header"
    tools:ignore="ContentDescription" />

<ImageButton
    android:id="@+id/callBackBtn"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:background="#00000000"
    android:minWidth="50dp"
    android:src="@android:drawable/sym_action_call"
    tools:ignore="ContentDescription" /> 
```

# java - 在 Android 的主屏幕小部件中填充 ListView

> ID：14121602
> 
> 赞同：7
> 
> 时间：2013-01-02T11:55:45.760
> 
> 标签：java, android, listview, android-widget

我正在尝试创建一个包含元素（任务）列表的 android 小部件。

当我将小部件放在主屏幕上时，它是空的，没有显示任何任务。

我不明白缺少什么。

在此先感谢您的帮助。

这是我的 widget_layout.xml 的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/widget_background"
android:orientation="vertical" >

<TextView
    android:id="@+id/title"
    style="@android:style/TextAppearance.Medium"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_margin="4dip"
    android:gravity="center_horizontal"
    android:text="@+string/TASK_LIST_ACT" >
</TextView>

<ListView
    android:id="@+id/list"
    style="@android:style/TextAppearance.Medium"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</ListView> 
```

这是 ListView 项目的布局

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/widget_element"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:minHeight="?android:attr/listPreferredItemHeight" /> 
```

这是我的 widgetProvider 类

```
package it.geotask.android.widget;

import it.geotask.android.R;
import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.widget.RemoteViews;

public class TaskWidgetProvider extends AppWidgetProvider {

public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    for (int i = 0; i < appWidgetIds.length; ++i) {

        Intent intent = new Intent(context, GeotaskRemoteViewService.class);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                appWidgetIds[i]);
        intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));

        RemoteViews rv = new RemoteViews(context.getPackageName(),
                R.layout.widget_layout);

        rv.setRemoteAdapter(appWidgetIds[i], R.id.list, intent);

        rv.setEmptyView(R.id.list, R.id.empty_view);
        appWidgetManager.updateAppWidget(appWidgetIds[i], rv);
    }

}
} 
```

这是我的 RemoteViewsFactory

```
package it.geotask.android.widget;

import it.geotask.android.R;
import it.geotask.android.dto.Task;
import it.geotask.android.service.TaskService;

import java.util.ArrayList;
import java.util.List;

import android.appwidget.AppWidgetManager;
import android.content.Context;
import android.content.Intent;
import android.widget.RemoteViews;
import android.widget.RemoteViewsService;

public class GeoTaskRemoteViewsFactory implements
    RemoteViewsService.RemoteViewsFactory {

private Context context = null;
private int appWidgetId;

private List<Task> taskList = new ArrayList<Task>();

public GeoTaskRemoteViewsFactory(Context context, Intent intent) {
    this.context = context;
    appWidgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
            AppWidgetManager.INVALID_APPWIDGET_ID);

}

public int getCount() {
    return taskList.size();
}

public long getItemId(int position) {
    return taskList.get(position).getId();
}

public RemoteViews getLoadingView() {
    // TODO Auto-generated method stub
    return null;
}

public RemoteViews getViewAt(int position) {
    RemoteViews row = new RemoteViews(context.getPackageName(),
            R.layout.row);

    row.setTextViewText(android.R.id.text1, taskList.get(position)
            .getName());

    return (row);
}

public int getViewTypeCount() {
    // TODO Auto-generated method stub
    return 0;
}

public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return false;
}

public void onCreate() {
    taskList = TaskService.getTaskInStateList(context, context
            .getResources().getString(R.string.DB_STATE_ACTIVE));
    taskList.addAll(TaskService.getTaskInStateList(context, context
            .getResources().getString(R.string.DB_STATE_IN_RANGE)));
    taskList.addAll(TaskService.getTaskInStateList(context, context
            .getResources().getString(R.string.DB_STATE_DELAYED)));

}

public void onDataSetChanged() {
    // TODO Auto-generated method stub

}

public void onDestroy() {
    // TODO Auto-generated method stub

}

} 
```

remoteViewsService 只是返回工厂的一个实例。

**编辑：** 我忘了在清单中声明服务；现在我得到了填充了正确数量的项目的小部件，但是消息“正在加载”而不是我要显示的项目的名称

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T17:56:04.720

解决了。我正在关注stackWidget的google示例，他们在widgetIds数组上使用了一个for，用++i增加了int光标，这导致小部件无法工作。使用 i++ 并且可以正常工作

# ios - AudioServicesPlaySystemSound 知道声音何时停止

> ID：14121612
> 
> 赞同：2
> 
> 时间：2013-01-02T11:56:24.677
> 
> 标签：ios, audio, service, delegates

我正在使用

```
AudioServicesPlaySystemSound(soundID); 
```

播放声音，但我需要知道声音何时停止播放，那么代表是什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T04:25:41.473

你读过[文档](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html)吗？

> **AudioServicesPlaySystemSound**
> 
> 播放系统声音对象。

```
void AudioServicesPlaySystemSound (
   SystemSoundID inSystemSoundID
); 
```

> **讨论**此功能播放短声（持续时间为 30 秒或更短）。因为声音可能会播放几秒钟，所以这个函数是异步执行的。**要知道声音何时播放完毕，请调用该`AudioServicesAddSystemSoundCompletion` 函数注册回调函数**。

[这个](https://stackoverflow.com/questions/6410143/audioservicesaddsystemsoundcompletion-callback-method-is-not-called-after-a-few)stackoverflow 问题可能会帮助您学习如何使用此回调。

# google-search-console - 我可以将通配符域添加到 Google 网站管理员工具吗？

> ID：14121615
> 
> 赞同：4
> 
> 时间：2013-01-02T11:56:28.243
> 
> 标签：google-search-console

我刚刚向网站管理员工具添加了一个域。我现在意识到它不能识别所有子域。

我的网络应用程序有用户创建的子域。因此，我希望将整个域下的所有搜索引擎信息都放在一个网站管理员帐户中。

我想不通的是一种添加通配符域的方法。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T21:49:56.157

谷歌需要一段时间才能在网站管理员工具中包含同一域下的内容

您可以等待或单独添加每个子域

希望有帮助

# javascript - 如何在诸如单击链接之类的事件中从 Jquery 内部调用 Javascript 函数？

> ID：14121619
> 
> 赞同：1
> 
> 时间：2013-01-02T11:56:33.207
> 
> 标签：javascript, jquery, html

我有一个页面显示一些文本。我想隐藏该文本并仅在有人单击链接/按钮时显示它。我尝试使用这个：

```
<script>
    function f()
    {          
      document.getElementById("line").focus();
      document.getElementById("help").innerHTML = helptext();
    }

    $(function(){
       $('p[id=help]').hide();
       $('a[title=showcmd]').click(function(){
            $('p[id=help]').slideIn();
            $(this).hide();
            f();
       });
    });

    </script> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T12:05:23.673

改变：

```
$('p[id=help]').slideIn(); 
```

到

```
$('p[id=help]').slideDown(); 
```

jquery中没有slideIn

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:03:33.237

如[控制台所示](http://jsfiddle.net/WQcv7/)`slideIn`， jQuery中没有函数：

> 未捕获的类型错误：对象 [object Object] 没有方法“slideIn”

**测试代码：**

```
function f()
    {          
      document.getElementById("help").innerHTML = "Trying out Jquery";
    }

$(function(){
   $('p[id=help]').hide();
   $('a[title=showcmd]').click(function(){
        $('p[id=help]').slideIn();
        $(this).hide();
       f();
   });
}); 
```

我想您想使用[slideUp](http://api.jquery.com/slideUp/)或[slideDown](http://api.jquery.com/slideDown/)，或者可能[是 fadeIn](http://api.jquery.com/fadeIn/)。

对于未来的问题，我建议您查看[开发人员控制台](https://developers.google.com/chrome-developer-tools/docs/console)：它始终显示错误消息，通常以足够清晰的方式显示代码中的确切位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T12:09:16.667

如果它不起作用，请尝试阻止点击事件，如下所示。

```
<script>
    function f()
    {          
      document.getElementById("line").focus();
      document.getElementById("help").innerHTML = helptext();
    }

    $(function(){
       $('p#help').hide();
       $('a[title=showcmd]').click(function(e){
            e.preventDefault();
            $('p#help').slideDown('slow');
            $(this).hide();
            f();
       });
    });

    </script>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T12:10:23.627

使用`slideDown()`代替`slideIn()`

# c# - 如何根据示例数据库结构从不同的表创建分层菜单

> ID：14121623
> 
> 赞同：0
> 
> 时间：2013-01-02T11:56:37.060
> 
> 标签：c#, asp.net, sql, database, sql-server-2008

我正在一个具有菜单结构的网站上工作，以便它可以从下面的多个表中读取子菜单是示例菜单示例

![在此处输入图像描述](../Images/7f51538e3d1c8835ef563960df409510.png)

我有几个表，如 pg_Pages、art_Article、art_Categories、Magazine 每个表在 pg_Pages 表中都有一个带有 PK 的 FK PageID。

我想创建一个 sql 查询，它将从这些表中读取数据并创建一个分层菜单结构，每个链接都指向正确的页面。

我可能需要将几个查询字符串作为 href 的一部分传递，例如`PageID, LanguageID, IssueID and CategoryID`

**示例链接**

`Home = Default.aspx?LanguageId=1&IssueID=101&PageID=1`

`About Us = Page.aspx?LanguageId=1&IssueID=101&PageID=2`

`Categories = Article-Category.aspx?LanguageId=1&IssueID=101&PageID=6`

`--Politics = Article-Category.aspx?LanguageId=1&IssueID=101&PageID=6&CategoryID=1`

`--Economy= Article-Category.aspx?LanguageId=1&IssueID=101&PageID=6&CategoryID=2`

`--Business= Article-Category.aspx?LanguageId=1&IssueID=101&PageID=6&CategoryID=16`

`Multimedia = Multimedia.aspx?LanguageId=1&IssueID=101&PageID=10`

`--Video= Video.aspx?LanguageId=1&IssueID=101&PageID=11`

我不确定如何以最好的方式处理这个问题，没有出错的余地，因为我必须将不同的查询字符串传递给不同的菜单，所以我有点困惑如何处理这种方法，我应该用 Union 创建一个多 sql 查询来处理这个或不同的东西。我需要这个作为 asp.net 网站

我还添加了示例 sql 查询和每个表的输出

**SQL**

```
SELECT PageId AS ParentID,SUBSTRING(PageName,0,20) AS PARENT_MENU,SUBSTRING(PageInternalLinkURL,0,24) AS PageHandler, PageLinkPosition,SUBSTRING(PageLayoutPosition,0,14) AS MENU_Type,PageLangID,PageInheritance  FROM pg_Pages

SELECT p.PageID as ParentID, SUBSTRING(c.ArticleCategoryName,0,20) AS CHILD_MENU,SUBSTRING(p.PageInternalLinkURL,0,24) AS PageHandler,              ArticlePostion,ArticleID AS CHILDID,c.ArticleCategoryID,IssueID,LanguageID FROM art_Articles a JOIN art_Category  c ON a.ArticleCategoryID = c.ArticleCategoryID
JOIN pg_pages p ON p.PageID = a.PageID

SELECT p.PageID AS ParentID, IssueCode as CHILD_MENU,SUBSTRING(p.PageInternalLinkURL,0,24) AS PageHandler, m.IssueCode,IssueID AS CHILDID,CurrentIssue,IssueDate,LangID FROM Magazine m JOIN pg_pages p ON m.PageID = p.PageID 

SELECT p.PageID AS ParentID, SUBSTRING(c.ArticleCategoryName,0,20) AS CHILD_MENU,SUBSTRING(p.PageInternalLinkURL,0,24) AS PageHandler, LangID,ArticleCategoryID AS CHILDID FROM art_Category c JOIN pg_Pages p ON c.PageID = p.PageID 
```

**输出**

```
ParentID    PARENT_MENU          PageHandler              PageLinkPosition MENU_Type      PageLangID  PageInheritance
----------- -------------------- ------------------------ ---------------- -------------- ----------- ---------------
1           Home                 Default.aspx             10               TopMenu        1           0
2           About Us             Page.aspx                20               TopMenu        1           0
3           News                 News.aspx                30               TopMenu        1           0
4           Publication          Publication.aspx         40               TopMenu        1           0
5           Articles             Articles.aspx            20               TopMenu        1           0
6           Categories           Article-Category.aspx    25               TopMenu        1           0
10          Multimedia           Multimedia.aspx          60               TopMenu        1           0
11          Video                Videos.aspx              10               SubMenu        1           10
12          Archive              Default.aspx             40               TopMenu        1           0

ParentID    CHILD_MENU           PageHandler              ArticlePostion CHILDID     ArticleCategoryID IssueID     LanguageID
----------- -------------------- ------------------------ -------------- ----------- ----------------- ----------- -----------
5           Politics             Articles.aspx            10             12          1                 1           1
5           Politics             Articles.aspx            10             13          1                 3           1
5           Politics             Articles.aspx            10             14          1                 4           1
5           Politics             Articles.aspx            1              15          1                 5           1
5           Politics             Articles.aspx            20             16          1                 5           1
5           Business             Articles.aspx            30             17          16                5           1
5           Group News           Articles.aspx            40             18          6                 5           1
5           Infrastructure       Articles.aspx            50             23          17                5           1
5           Group News           Articles.aspx            60             24          6                 5           1
5           Book Review          Articles.aspx            70             25          18                5           1

ParentID    CHILD_MENU  PageHandler              IssueCode   CHILDID     CurrentIssue IssueDate               LangID
----------- ----------- ------------------------ ----------- ----------- ------------ ----------------------- -----------
12          106         Default.aspx             106         1           0            2012-09-01 00:00:00.000 1
12          106         Default.aspx             106         2           1            2012-09-01 00:00:00.000 2
12          102         Default.aspx             102         3           1            2011-11-01 00:00:00.000 1
12          103         Default.aspx             103         4           1            2012-02-01 00:00:00.000 1
12          109         Default.aspx             109         5           1            2012-12-01 00:00:00.000 1

ParentID    CHILD_MENU           PageHandler              LangID      CHILDID
----------- -------------------- ------------------------ ----------- -----------
6           Politics             Article-Category.aspx    1           1
6           Economy              Article-Category.aspx    1           2
6           Culture              Article-Category.aspx    1           3
6           Sports               Article-Category.aspx    1           4
6           xxxxxxxxxxxxxxxxxxx  Article-Category.aspx    1           5
6           Group News           Article-Category.aspx    1           6
6           People               Article-Category.aspx    1           7
6           Editorial Message    Article-Category.aspx    1           8
6           Chairman's Message   Article-Category.aspx    1           9
6           Business             Article-Category.aspx    1           16
6           Infrastructure       Article-Category.aspx    1           17
6           Book Review          Article-Category.aspx    1           18
6           Finance              Article-Category.aspx    1           19
6           Lifestyle            Article-Category.aspx    1           20
6           Others               Article-Category.aspx    NULL        21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:23:38.257

根据你的问题....

**- 通过with 子句**创建一个 sql 查询，并创建一个包含所有记录的单个表。之后选择任何 html 表格菜单...在 ul 标记设置主菜单项（为此您可以使用数据阅读器等控件）。这是简单的方法...。

在那之后，如果你没有得到，请告诉我......我制作了这种类型的菜单......我将提供示例代码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:19:32.380

有许多不同的方法来处理构建菜单。

*   构建一个存储过程来完成所有艰苦的工作。
*   从数据库中选择数据，并在应用程序代码中构建字符串。
*   从数据库中构建一个文件，您可以在“制作”时包含该文件。
*   在 SQL 查询中执行所有操作。

对于菜单之类的事情，我最不喜欢的选项是在 SQL 查询中执行所有操作。如果我站在你的立场上，我认为我的第一选择是构建一个我可以在“制作”时包含的文件。我的第二个选择是从数据库中选择数据，并在应用程序代码中构建字符串。

构建一个在 make 时包含的文件会执行得更好。用 SQL 编写代码更容易，因为您需要的简单查询的数量并不重要。（它是在“make”时完成的，而不是在运行时。）它处理任意复杂的菜单，没有运行时的惩罚。（同样，因为它是在制作时完成的。）但它可能会产生维护问题，具体取决于菜单需要更改的频率。

# solr - Solr 多核中的最大核数

> ID：14121624
> 
> 赞同：3
> 
> 时间：2013-01-02T11:56:41.300
> 
> 标签：solr

我们有一个系统，使用户能够创建应用程序并在他们的应用程序上存储数据。我们要分离每个应用程序的索引。我们为每个应用程序创建一个核心，并在用户进行查询时搜索给定的应用程序。由于应用程序之间没有任何关系，因此该解决方案可以比将所有索引存储在一起更好。

我有两个与此相关的问题。

1.  这是一个好的解决方案吗？如果不能，您能否提出更好的解决方案？
2.  我可以在 Solr 上创建的核心数量是否有限制？系统上可能会有数千个应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T12:13:00.187

1.  是的，它可能是一个很好的解决方案，始终取决于具体的用例\
2.  看看Erick 提到 10k 核心系统的[这个 jira 问题](https://issues.apache.org/jira/browse/SOLR-1028)......所以它似乎对你有用，应该需要评估硬件等

# android - Android - 片段中的 ListView 不显示

> ID：14121627
> 
> 赞同：0
> 
> 时间：2013-01-02T11:57:11.173
> 
> 标签：android, android-layout, android-fragments

告诉我我做错了什么？

我正在尝试填写表格。但是数据没有出现在 ListView 中。

例如，在 Activity 中它正在工作。正是这段代码没有尝试过，而是从它完美运行的地方复制而来。

数据准确，经过调试器检查。

```
public class TabFilter extends Fragment {

    private static String TAB_FILTER_LOG = "TabFilter: ";
    private ArrayList<HashMap<String, Object>> filterListData;
    private ListView filterListView;

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        setHasOptionsMenu(true);

        View view = inflater.inflate(R.layout.tab_filter, container, false);

        filterListView = (ListView) view.findViewById(R.id.filtersListView);
        filterListData = new ArrayList<HashMap<String, Object>>();

        fillListView();

        SimpleAdapter filtersListAdapter = new SimpleAdapter(getActivity().getBaseContext(), filterListData, R.layout.filters_list_view_row, new String[] { "name",
                "nummer" }, new int[] { R.id.filterNameTv, R.id.filterInfoTv });

        filterListView.setAdapter(filtersListAdapter);
        filterListView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

        // filterListView.setOnItemClickListener(this);

        if (container == null) {
            return null;
        }
        return (LinearLayout) inflater.inflate(R.layout.tab_filter, container, false);
    }

    private HashMap<String, Object> fillListView() {
        HashMap<String, Object> fillMap = null;

        SQLiteDatabase db = DatabaseHelper.getInstance(getActivity().getBaseContext()).getWritableDatabase();
        Cursor cursor = db.query("filters", null, null, null, null, null, null);

        if (cursor.moveToFirst()) {

            int nameColIndex = cursor.getColumnIndex("name");
            int nummerColIndex = cursor.getColumnIndex("nummer");

            do {
                fillMap = new HashMap<String, Object>();

                fillMap.put("name", cursor.getString(nameColIndex));
                fillMap.put("nummer", cursor.getString(nummerColIndex));
                filterListData.add(fillMap);

            } while (cursor.moveToNext());

            cursor.close();
            db.close();
        } else {
            Toast.makeText(getActivity().getBaseContext(), "0 ROWS: ", Toast.LENGTH_LONG).show();
        }
        return fillMap;
    }
} 
```

tab_filter.xm

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ListView
        android:id="@+id/filtersListView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

filters_list_view_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@color/BlueViolet">

    <TextView
        android:id="@+id/filterNameTv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:gravity="center"
        android:background="@color/LightGrey"/>

    <TextView
        android:id="@+id/filterInfoTv"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/LightSkyBlue" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T12:01:45.833

您需要在 onCreateView() 中返回视图对象。请检查您在第一行创建 View 对象的 onCreateView() 并根据第一个视图对象创建 listview 对象。最后，您正在膨胀另一个 LinearLayout 并返回它。所以你的屏幕是空的。

替换您的以下代码：

```
if(container == null) {
    return null;
}
return (LinearLayout)inflater.inflate(R.layout.tab_filter, container, false); 
```

有了这个：

```
return view; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:03:56.573

您膨胀另一个 LinearLayout 并返回它。所以你得到空屏幕使用这个方法而不是上面

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    setHasOptionsMenu(true);

    View view = inflater.inflate(R.layout.tab_filter, container, false);

    filterListView = (ListView) view.findViewById(R.id.filtersListView);
    filterListData = new ArrayList<HashMap<String, Object>>();

    fillListView();

    SimpleAdapter filtersListAdapter = new SimpleAdapter(getActivity().getBaseContext(), filterListData, R.layout.filters_list_view_row, new String[] { "name",
                 "nummer" }, new int[] { R.id.filterNameTv, R.id.filterInfoTv });

    filterListView.setAdapter(filtersListAdapter);
    filterListView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

    // filterListView.setOnItemClickListener(this);

    if(container == null) {
        return null;
    }
    return view;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T12:02:41.030

我有没有出现片段的等效问题。一个问题是 XML 语句的顺序，所以方向应该出现在“布局”之前：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="match_parent"
    android:layout_height="match_parent"

    android:background="@color/BlueViolet">
... 
```

# c# - 将int转换为十六进制格式0xyy c#

> ID：14121644
> 
> 赞同：0
> 
> 时间：2013-01-02T11:58:22.937
> 
> 标签：c#, hex

我需要编写一个函数，它接收一个类型`int`（十进制）的参数，并返回`string`包含十六进制的 int 值，**但格式为 0xyy**。
不仅如此，我还希望答案采用 4 字节的固定格式，例如：

```
int b = 358;
string ans = function(b); 
```

在这种情况下，ans =“0x00 0x00 0x01 0x66”

```
int a = 3567846; 
string ans = function(a); 
```

在这种情况下，ans =“0x00 0x36 0x70 0xE6”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T12:16:33.733

这应该与您的示例相匹配：

```
static string Int32ToBigEndianHexByteString(Int32 i)
{
    byte[] bytes = BitConverter.GetBytes(i);
    string format = BitConverter.IsLittleEndian
        ? "0x{3:X2} 0x{2:X2} 0x{1:X2} 0x{0:X2}"
        : "0x{0:X2} 0x{1:X2} 0x{2:X2} 0x{3:X2}";
    return String.Format(format, bytes[0], bytes[1], bytes[2], bytes[3]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:13:41.323

我认为您想要的格式在类似的行上

```
int ahex = 3567846;
byte[] inthex = BitConverter.GetBytes(ahex);
Console.WriteLine("0x"+ BitConverter.ToString(inthex).Replace("-"," 0x")); 
```

# c# - 我可以在用户控件中强制编译错误吗？

> ID：14121654
> 
> 赞同：0
> 
> 时间：2013-01-02T11:58:45.230
> 
> 标签：c#, winforms

示例：我有一个具有 1 个属性（可通过属性网格编辑）的用户控件，称为“标题”。如果属性“Title”为空，有没有办法抛出编译时异常？还是所有设计时属性都是可选的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:31:23.543

在编译时无法确保设置了特定属性。如果代码已编译，您可以使用[#error](http://msdn.microsoft.com/en-US/library/x5hedts0%28v=vs.110%29.aspx)指令导致编译时错误或使用[#warning](http://msdn.microsoft.com/en-us/library/963th5x3.aspx)发出编译时警告，但这不是您想要的。

有两种方法可以确保设置特定的属性或方法。第一种是在构造函数中要求它或检查它是否已在后续方法或属性中设置。这是运行时检查，而不是编译时间，正如您所说，您在 UserControl 中有某些限制。

第二种方法是使用[FXCop](http://msdn.microsoft.com/en-us/library/bb429476%28v=vs.80%29.aspx)之类的代码分析工具。您可以编写一个自定义规则来识别您的 UserControl 的所有实例并确保已在所有实例上设置了该属性。[Roslyn](http://msdn.microsoft.com/en-us/roslyn)或 PostSharp也有可能，但我对这些工具还不够熟悉，不能这么说。

像 FXCop 这样的代码分析工具的问题是学习曲线相当陡峭。编程语言很复杂，这些工具需要暴露复杂性。我的建议是使用像“在此处插入标题”这样的默认值，或者即使没有合适的默认值，也不太可能在使用描述性消息呈现控件时抛出异常。

请参阅[确保设置 UserControl 上的属性的好方法？](https://stackoverflow.com/questions/3460362/good-way-to-ensure-that-a-property-on-a-usercontrol-gets-set)对于类似的情况。

# linq - LINQ 选择项的 Lambda 表达式

> ID：14121656
> 
> 赞同：3
> 
> 时间：2013-01-02T11:58:50.847
> 
> 标签：linq, entity-framework, lambda, linq-to-entities

我有这个代码

```
var list = _db.Projects.Where(item => item.Loc =="IN").Select(p => new {id=p.Id, title=p.Title,pc=p.PostalCode }); 
```

项目表有很多列，我需要动态查询所需的列并从数据库加载，而不是所有列以及数据。

问题：

1.  如何为 linq select 编写 lambda 表达式？
2.  如何通过选择特定的列、实体框架来减少对数据库的数据读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:28:44.707

查看 C# 编译器生成的表达式并尝试复制它的作用：

```
Expression<Func<Project, object>> lambda =
    (Project p) => (object)new {id=p.Id, title=p.Title,pc=p.PostalCode }; 
```

我希望这段代码可以编译。如果没有，你肯定能够修复它。之后，查看`lambda`变量的内容。

请注意，转换`object`为仅用于进行编译。你不需要/不想要那是生产。

# pytest - 如何在 pytest 运行时获取测试名称和测试结果

> ID：14121657
> 
> 赞同：7
> 
> 时间：2013-01-02T11:59:02.783
> 
> 标签：pytest

我想在运行时获取测试名称和测试结果。

我的脚本中有`setup`和`tearDown`方法。在`setup`中，我需要获取测试名称，在中`tearDown`我需要获取测试结果和测试执行时间。

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-03-19T09:02:57.220

你可以，用一个钩子。

我的测试目录中有这些文件：

```
./rest/
├── conftest.py
├── __init__.py
└── test_rest_author.py 
```

在`test_rest_author.py`我有三个函数，`startup`和`teardown`，`test_tc15`但我只想显示结果和名称`test_tc15`。

`conftest.py`如果您还没有文件，请创建一个文件并添加：

```
import pytest
from _pytest.runner import runtestprotocol

def pytest_runtest_protocol(item, nextitem):
    reports = runtestprotocol(item, nextitem=nextitem)
    for report in reports:
        if report.when == 'call':
            print '\n%s --- %s' % (item.name, report.outcome)
    return True 
```

该钩子`pytest_runtest_protocol`为给定的测试项实现了 runtest_setup/call/teardown 协议，包括捕获异常和调用报告钩子。它在任何测试完成时调用（例如`startup`or`teardown`或您的测试）。

如果您运行脚本，您可以看到测试的结果和名称：

```
$ py.test ./rest/test_rest_author.py
====== test session starts ======
/test_rest_author.py::TestREST::test_tc15 PASSED
test_tc15 --- passed
======== 1 passed in 1.47 seconds ======= 
```

另请参阅[pytest hooks](https://pytest.org/latest/plugins.html#hook-specification-and-validation)和[conftest.py](https://pytest.org/latest/plugins.html#conftest-py-local-per-directory-plugins))上的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T19:28:47.340

unittest.TestCase.id() 这将返回完整的详细信息，包括类名、方法名。从中我们可以提取测试方法名称。可以通过检查执行测试是否有异常来获得结果。如果测试失败，那么如果 sys.exc_info() 返回 None 那么测试通过，否则测试将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-14T06:04:12.100

按照建议使用`pytest_runtest_protocol`夹具标记解决了我的问题。`reports = runtestprotocol(item, nextitem=nextitem)`在我的情况下，只需在我的 pytest html 夹具中使用就足够了。因此，要最终确定`item`元素包含您需要的信息。

非常感谢。

# httpclient - 任何具有 kerberos 身份验证和测试帐户的在线服务器

> ID：14121662
> 
> 赞同：3
> 
> 时间：2013-01-02T11:59:21.220
> 
> 标签：httpclient, kerberos

是否有任何可用的在线服务器/代理服务器支持 kerberos 身份验证并有一些测试帐户。

我想测试 httpclient 代码但不想在本地设置 Kerberos 服务器。如果任何具有测试帐户的在线服务器可用，那么它将有很大帮助。

谢谢，

-维奈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:36:42.853

不，不可能。您将需要完全控制您的提供商的 DNS，并拥有与 IP 1:1 的域名。

# iphone - ios上的HTML“点击”事件

> ID：14121666
> 
> 赞同：1
> 
> 时间：2013-01-02T11:59:34.917
> 
> 标签：iphone, ios, ipad

我正在将 HTML 页面的所有标签导入到`UITextView`. 但我在这个标签中几乎没有`on click`邮件和电话之类的事件。`HTML`我怎样才能检测到该`on click`事件并将其打开`UIWebView`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:39:09.510

当您点击事件时，您是否只是意味着您想让电子邮件地址、电话号码等内容成为可点击的，例如点击电话号码会打开电话应用程序等？

如果是这样，您是否尝试过在 Interface Builder > Attributes Inspector 中简单地设置 UITextView 的属性。

请看下面我的图片：

![在此处输入图像描述](../Images/7e66240ef89bcfb64a7cd33509e62320.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:54:56.387

假设您是否像下面一样显示字符串`UIWebView`但首先您必须配置您的 webView 插座并正确连接，`Delegate`然后将以下代码放入`ViewWillApear`：-

> [webview loadHTMLString:[NSString stringWithFormat:@"%@
> 对 %@ 有疑问？点击收听，我们将与您联系。* {margin:0;padding:0; font-family:Arial;font-size: 15px;text-align:justify}", yourStringDiscription,YourHyperlinkWord] baseURL:nil];

在上面的脚本中这一行： - `:[NSString stringWithFormat:@"<html><body text=\"#000000\">%@ <br>Have an enquiry for %@? Click <a href=\"inapp://\">hear</a>`

第一个 %@ 用于包含字符串，第二个 %@ 用于您的 Hyparlink

**现在**

你可以得到这个`webViewdelegate`方法的点击事件

```
-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
    if ( inType == UIWebViewNavigationTypeLinkClicked ) {

       //Got even here put breck point
       return NO;
    }

    return YES;

} 
```

你可以在上面的代表中得到点击事件希望你不明白我在说什么，希望它对你有帮助

# android - 强制关闭单击设备上的列表视图项目，但在模拟器中运行良好

> ID：14121668
> 
> 赞同：1
> 
> 时间：2013-01-02T11:59:45.967
> 
> 标签：android, android-intent, android-listview, android-custom-view

**homeactivity.class**

```
lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
    public void onItemClick(AdapterView<?> a, View v, int position, long id) {                      if(image_details.get(position).getQueryType().equals("service_appointment")){       
     Intent intent1=new Intent(getApplicationContext(),SingleClick.class);
     Bundle b = new Bundle(); 
     b.putString("UserName", username);
     b.putString("Password",password);
     b.putString("id", image_details.get(position).getServiceRequestnum());
     b.putString("id3", image_details.get(position).getId());
     intent1.putExtras(b);
     startActivity(intent1); 

    }
    else  { 
     Intent intent2=new Intent(HomeActivity.this,SingleClickComment.class);
     Bundle b = new Bundle();
     b.putString("UserName", username);                     
     b.putString("Password",password);
     b.putString("id", image_details.get(position).getId());
     intent2.putExtras(b);
     startActivity(intent2);
     }
    }); 
```

**SingleClickComment.class**

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.singleclick);   
enquiry=(TextView) findViewById(R.id.serviceEnduiry_Id);  
servicestatus=(TextView) findViewById(R.id.serviceappointmentstatus); 
count1=(TextView) findViewById(R.id.Count1);
time1=(TextView) findViewById(R.id.Time1);  
comment1=(TextView) findViewById(R.id.Comment1);  
description1=(TextView) findViewById(R.id.DEscription1); 
count3=(TextView) findViewById(R.id.Count2);     
singleClickComment=(EditText) findViewById(R.id.singleclickcommententry);             
singleClick=(Button) findViewById(R.id.singleclickcommentbutton);                 
ArrayList<Comment> image_details = new ArrayList<Comment>();
image_details = GetSearchResults();
System.out.println("imagedetails:"+image_details);
final ListView lv1 = (ListView) findViewById(R.id.list10);
lv1.setAdapter(new CustomListViewAdapter1(this, image_details));          
count1.setText(size+"  comments");
count3.setText(size+"  comments");
Intent intent2 = getIntent();
Bundle b = intent2.getExtras();
final  String username= b.getString("UserName");       
System.out.println("username:"+username);          
final  String password= b.getString("Password");                
System.out.println("password:"+password);               
final  String id2= b.getString("id");                
System.out.println("id:"+id2);                           
singleClick.setOnClickListener(new View.OnClickListener() {                             
                            @Override               
public void onClick(View v) {
            // TODO Auto-generated method stub   
            //post();                                                                    
String url = "http://192.168.0.199:8080/CarKonect/webresources/rest/commentInsert";

List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);  

nameValuePairs.add(new BasicNameValuePair("UserName", username));                       
nameValuePairs.add(new BasicNameValuePair("Password",password));                                    
nameValuePairs.add(new BasicNameValuePair("id", id2));
nameValuePairs.add(new BasicNameValuePair("description",
singleClickComment.getText().toString()));
JSONParser1 jParser = new JSONParser1();         
// getting JSON string from URL along with list values
             JSONObject json = jParser.makeHttpRequest(url, method,                   
            nameValuePairs);

         try {  

              String value=(String) json.get("error");
              System.out.println("error:"+value);
              String value1=(String) json.get("Inserted");
              System.out.println("insert value:"+value1);                           
              if(value1.equals("true"))
              {
                Intent homeintent=new Intent(SingleClickComment.this,HomeActivity.class);
                Bundle b = new Bundle();
                b.putString("UserName", username);          
                b.putString("Password",password);
                homeintent.putExtras(b);
                startActivity(homeintent);
              }                     
            } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
                }           
            }           
                    });         
                }    

      private ArrayList<Comment> GetSearchResults() {
        // TODO Auto-generated method stub

              Intent intent2 = getIntent();
              Bundle b = intent2.getExtras();
              final  String username= b.getString("UserName");
              System.out.println("username:"+username);
              final  String password= b.getString("Password");
              System.out.println("password:"+password);
              final  String id2= b.getString("id");
              System.out.println("id:"+id2);

              ArrayList<Comment> results = new ArrayList<Comment>();
              String url = "http://192.168.0.199:8080/CarKonect/webresources/rest/readSingleQuery";

              List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2); 
              nameValuePairs.add(new BasicNameValuePair("id", id2));
              nameValuePairs.add(new BasicNameValuePair("UserName", username));
              nameValuePairs.add(new BasicNameValuePair("Password",password));
              JSONParser1 jParser = new JSONParser1();

              // getting JSON string from URL along with list values
              JSONObject json = jParser.makeHttpRequest(url, method,nameValuePairs);                                       
              try {                 
              Comment undergraduateDetailsPojoObj = new Comment();
              String description=(String) json.get("Description");
              System.out.println(description);
              enquires=(String) json.get("Query_Id");
              System.out.println( enquires);
              String title=(String) json.get("Title");
              System.out.println(title);
              servicestatusapp=(String) json.get("Query_Status");                           
              System.out.println(servicestatusapp);
              JSONArray jsonArray = json.getJSONArray("historyList");
              size=jsonArray.length();
              System.out.println(size);     
                for(int i=0;i<=size;i++)
                {   
                JSONObject c1 = jsonArray.getJSONObject(i);
                username1=(String) c1.get("Response_From_Name");     
                inserteddate1=(String) c1.get("Inserted_Date");                                     
                description4=(String) c1.get("Description");  
                undergraduateDetailsPojoObj.setUserName(username1); 
                undergraduateDetailsPojoObj.setImage(1);
                undergraduateDetailsPojoObj.setInsertedDate(inserteddate1);
                undergraduateDetailsPojoObj.setDescription(description4);
                results.add(undergraduateDetailsPojoObj);
                }

                }catch (JSONException e1) {                     
                // TODO Auto-generated catch block
                     e1.printStackTrace();
                }   
                return results;     
              } 
              } 
```

**单击.xml：**

```
<?xml version="1.0" encoding="utf-8"?>  
    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"  
   android:layout_width="match_parent"          
  android:layout_height="match_parent"            
 android:background="#2f322a" >                 
 <LinearLayout             
   android:id="@+id/linearLayout1"              
  android:layout_width="match_parent"             
   android:layout_height="match_parent" >              
  <LinearLayout                
    android:id="@+id/linearLayout2"                   
 android:layout_width="wrap_content"                   
 android:layout_height="match_parent"                   
 android:layout_weight="0.01"                
   android:orientation="vertical" >            
 </LinearLayout>                  
  <LinearLayout                      
  android:id="@+id/linearLayout3"                       
 android:layout_width="wrap_content"                      
  android:layout_height="match_parent"                      
  android:layout_weight="0.99"                      
  android:orientation="vertical" >         
 <TableRow                          
  android:id="@+id/tableRow1"                      
   android:layout_width="fill_parent"                         
   android:layout_height="wrap_content"                      
     android:orientation="vertical" >          
 <LinearLayout           
    android:id="@+id/linearLayout5"              
  android:layout_width="match_parent"              
  android:layout_height="match_parent"               
 android:orientation="horizontal" >        
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"           
 android:orientation="vertical"           
 android:layout_width="fill_parent"           
 android:layout_height="fill_parent"          
  android:scrollbars="vertical"           
 >        
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"            
android:orientation="horizontal"            
style="@style/TitleBar"         
android:layout_width = "fill_parent"            
android:layout_height="43dp"        
    android:gravity="left|top">     
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"                    
  android:orientation="horizontal"                  
  android:layout_width = "wrap_content"                 
  android:layout_height="50dp"                  
  android:gravity="left"                    
  android:background="@drawable/customerbg"                 
  >                             
  <Button style="@style/TitleBarOperation"                          
      android:layout_width="wrap_content"                           
      android:layout_height="wrap_content"                                              
      android:drawableTop="@drawable/user"                          
android:id="@+id/userslide"                                                     
   android:textSize="10dp"                          
       android:layout_marginTop="2dp"                               
   android:layout_marginRight="10dip"                               
   android:layout_marginLeft="4dip"                                                 
   android:background="@drawable/home_bg"                               
   android:layout_gravity="center"                              
   android:layout_marginBottom="5dp"                                 
   />                           
  <ImageView android:layout_width="1px"                 
   android:layout_height="fill_parent"                 
   android:background="@drawable/divider"                   
   android:layout_marginRight="5dip"/>                  
  <Button style="@style/TitleBarOperation"                   
              android:drawableTop="@drawable/write"                         
     android:text="Write"                           
     android:id="@+id/onwrite"                          
       android:textSize="10dp"                                  
   android:layout_marginRight="10dip"                               
   android:layout_marginLeft="4dip"                             
   android:layout_marginBottom = "5dip"                             
   android:paddingBottom = "3dip"                               
   android:background="@drawable/home_bg"                               
   android:layout_gravity="center"                              
    />               
 <Button style="@style/TitleBarOperation"                                       
     android:id="@+id/onschedule"                           
       android:layout_width="50dp"                              
   android:drawableTop="@drawable/schedule"                         
      android:text="Schedule"                              
   android:textSize="10dp"                               
  android:layout_marginRight="5dip"                             
   android:layout_marginLeft="4dip"                               
 android:layout_marginBottom = "5dip"                                
  android:paddingBottom = "3dip"                                
   android:background="@drawable/home_bg"                               
   android:layout_gravity="center"                          
        />                   
  <Button style="@style/TitleBarOperation"                     
    android:layout_width="50dp"                                                     
  android:id="@+id/feedback"                                
   android:drawableTop="@drawable/feedback"                             
   android:text="Feedback"                               
  android:textSize="10dp"                              
   android:layout_marginTop="3dp"                               
   android:layout_marginRight="10dip"                                
  android:layout_marginLeft="4dip"                                
 android:layout_marginBottom = "5dip"                                
  android:paddingBottom = "3dip"                                 
  android:background="@drawable/home_bg"                                
   android:layout_gravity="center"                          
        />                    
 <Button style="@style/TitleBarOperation"                        
  android:layout_width="50dp"                               
 android:layout_marginTop="1dp"                             
   android:id="@+id/truevalue"                              
  android:drawableTop="@drawable/truevalue"                             
  android:text="Truevalue"                              
  android:textSize="10dp"                               
   android:layout_marginRight="15dip"                               
   android:layout_marginLeft="4dip"                              
  android:layout_marginBottom = "5dip"                              
   android:paddingBottom = "3dip"                                      android:background="@drawable/home_bg"                               
   android:layout_gravity="center"                              
    />                     
 <ImageView android:layout_width="1px"                    
 android:layout_height="fill_parent"                      
 android:background="@drawable/divider"                
   android:layout_marginRight="1dip"/>                          
 <Button style="@style/TitleBarOperation"                                
    android:drawableTop="@drawable/dealer"                          
      android:id="@+id/dealer"                             
    android:layout_marginTop="7dp"                                                    
   android:layout_marginRight="10dip"                               
   android:layout_marginLeft="4dip"                             
   android:layout_marginBottom = "5dip"                             
   android:paddingBottom = "3dip"                                
  android:background="@drawable/home_bg"                                  
 android:layout_gravity="center"                                
    />      
    </LinearLayout>         
</LinearLayout>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"                          
        android:orientation="horizontal"                                       android:layout_width = "fill_parent"                             
   android:layout_height="wrap_content"                                  
  android:background="#C0C0C0">        
     <TextView                  
 android:id="@+id/serviceEnduiry_Id"             
   android:layout_width="wrap_content"            
  android:layout_height="wrap_content"             
 android:layout_marginRight="30sp"          
  />        
     <TextView                  
 android:id="@+id/serviceappointmentstatus"          
  android:layout_width="wrap_content"              
 android:layout_height="wrap_content"                 
 />        
 </LinearLayout>               
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"          
    android:layout_width="fill_parent"               
android:layout_height="wrap_content"        
  android:orientation="vertical"           
 android:background="#2f322a"              
android:paddingLeft="10sp"          
   >           
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"            
  android:layout_width="fill_parent"              
 android:layout_height="wrap_content"            
 android:orientation="horizontal"           
   android:layout_marginTop="2sp"            
 android:paddingLeft="10sp"            
  >          
     <ImageView             
    android:id="@+id/ImageCity1"               
  android:paddingTop="3sp"               
  android:layout_width="20sp"             
    android:src="@drawable/coment"              
  android:layout_height="20sp"              
   android:contentDescription="desc"                
  android:paddingLeft="5sp"/>              
         <TextView                
   android:id="@+id/Count1"                 
  android:layout_width="wrap_content"                
   android:layout_height="wrap_content"                 
  android:textSize="12sp"                 
  android:layout_marginRight="50sp"                 
  android:textColor="#A1A1A1"                   
 android:paddingLeft="5sp" />                  
      <TextView               
    android:id="@+id/Time1"                
   android:layout_width="wrap_content"                 
  android:layout_height="wrap_content"              
     android:textSize="12sp"                 
  android:textColor="#A1A1A1"  />                   
       </LinearLayout>                    
   <TextView                
   android:id="@+id/Comment1"               
  android:layout_width="wrap_content"                  
 android:layout_height="wrap_content"                 
  android:textSize="15sp"                  
 android:textStyle="bold"              
     android:layout_marginRight="30sp"                 
 android:textColor="#ffffff"                  
  android:paddingLeft="10sp"                 
  android:layout_marginBottom="4sp" />                 
  <TextView                 
 android:id="@+id/DEscription1"                  
 android:layout_width="wrap_content"             
     android:layout_height="wrap_content"                 
  android:textSize="13sp"                  
 android:paddingLeft="10sp"                  
 android:textColor="#A1A1A1"  />             
      </LinearLayout>                    
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"                               
    android:orientation="vertical"                             
    android:layout_width = "fill_parent"                                
   android:layout_height="wrap_content"                             
        android:layout_marginLeft="10sp"                 
android:layout_marginRight="10sp"                          >        
<TextView             
android:layout_width="fill_parent"             
 android:layout_height="wrap_content"             
  android:text="WikiCode - Custom ExpandableListView"       
      />            
<ExpandableListView                 
android:id="@+id/ExpandableListView01"                  android:layout_height="wrap_content"                
android:layout_width="fill_parent"              
android:background="#C0C0C0"                
android:childDivider="#848482"          
>           
</ExpandableListView>           
 <TextView                 
  android:id="@+id/Count2"                 
  android:layout_width="wrap_content"                  
 android:layout_height="wrap_content"                 
  android:textSize="12sp"                 
  android:layout_marginRight="50sp"                  
 android:textColor="#A1A1A1"               
     android:paddingLeft="5sp" />
       <ListView android:id="@+id/list10"               
  android:layout_width="fill_parent"               
  android:layout_height="wrap_content"                
 android:background="#C0C0C0"                
  android:textColor="#A1A1A1"                
 ></ListView>    
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"             
 android:layout_width="fill_parent"              
 android:layout_height="wrap_content"          
  android:orientation="horizontal"           
   android:layout_marginTop="2sp"          
   android:paddingLeft="10sp"           
   >               
 <EditText android:id="@+id/singleclickcommententry"              
    android:layout_width="150sp"             
     android:layout_height="wrap_content"            
            />        
      <Button android:id="@+id/singleclickcommentbutton"             
     android:layout_width="wrap_content"              
    android:layout_height="wrap_content"         
         android:text="send"              
    />        
            </LinearLayout>                 
</LinearLayout>              
</LinearLayout>         
    </LinearLayout>            
     </TableRow>            
</LinearLayout>        
</LinearLayout>    
    </FrameLayout> 
```

**LOGCAT 报告**

> 01-02 12:18:19.072: E/AndroidRuntime(3286): 致命异常: main 01-02 12:18:19.072: E/AndroidRuntime(3286): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. example.androidactionbar/com.example.androidactionbar.SingleClickComment}：java.lang.NullPointerException 01-02 12:18:19.072：E/AndroidRuntime(3286)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 01 -02 12:18:19.072: E/AndroidRuntime(3286): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 01-02 12:18:19.072: E/AndroidRuntime(3286): 在 android.app .ActivityThread.access$2300(ActivityThread.java:125) 01-02 12:18:19.072: E/AndroidRuntime(3286): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 01-02 12: 18:19.072: E/AndroidRuntime(3286): 在 android.os.Handler.dispatchMessage(Handler.java:99) 01-02 12:18:19.072: E/AndroidRuntime(3286): 在 android.os.Looper.loop(Looper.java:123) 01-02 12:18:19.072: E/AndroidRuntime(3286): 在android.app.ActivityThread.main(ActivityThread.java:4627) 01-02 12:18:19.072: E/AndroidRuntime(3286): 在 java.lang.reflect.Method.invokeNative(Native Method) 01-02 12:18 :19.072: E/AndroidRuntime(3286): at java.lang.reflect.Method.invoke(Method.java:521) 01-02 12:18:19.072: E/AndroidRuntime(3286): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858) 01-02 12:18:19.072: E/AndroidRuntime(3286): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) 01 -02 12：18：19.072：E/AndroidRuntime（3286）：在 dalvik.system.NativeStart.main（本机方法）01-02 12：18：19.072：E/AndroidRuntime（3286）：引起：java.lang。 NullPointerException 01-02 12:18:19.072: E/AndroidRuntime(3286): at com.example.androidactionbar.SingleClickComment.onCreate(SingleClickComment.java:82) 01-02 12:18:19.072: E/AndroidRuntime(3286): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 01-02 12: 18:19.072: E/AndroidRuntime(3286): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 01-02 12:18:19.072: E/AndroidRuntime(3286): ... 还有 11 个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:46:58.290

改变

```
final ListView lv1 = (ListView) findViewById(R.id.list10); 
```

至

```
final ListView lv1 = (ListView) findViewById(R.id.ExpandableListView01); 
```

我相信 ExpandableListView01 是您的列表视图的 id

# excel - 合并第 1 列中的相同值并添加第 2 列中的总计

> ID：14121677
> 
> 赞同：0
> 
> 时间：2013-01-02T12:00:42.170
> 
> 标签：excel, group-by, excel-formula, reporting

我在第 1 列中有 sku 编号，在第 2 列中有 qty。我需要一个公式来查看第 1 列中的所有产品编号并将第 2 列中的数量相加，因此相同的 sku 和 qty 都在一行上。

例子：

```
SKURCD  QTY
100095  1
100095  1
100121  1
12172   1
15440   1
16637   1
21674   1
24567   1
2789    1
3514    1
36816   1
36819   1
42734   1
42734   1 
```

需要看起来像：

```
SKURCD  QTY
100095  2
100121  1
12172   1
15440   1
16637   1
21674   1
24567   1
2789    1
3514    1
36816   1
36819   1
42734   2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:48:16.290

我强烈建议你使用数据透视表来做这样的事情。

您可以使用 =sumif() 但只能在静态列表上使用。否则，您将不得不不断更新您的 SKU 列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:01:51.373

我也同意使用数据透视表可能是最好的方法。您可以通过选择所有数据并单击数据-->数据透视表和数据透视图报表的菜单来完成。

# ios - 如何在 coreplot 中设置绘图委托

> ID：14121683
> 
> 赞同：1
> 
> 时间：2013-01-02T12:01:03.360
> 
> 标签：ios, ios5, ios6, core-plot, bar-chart

这是来自此链接的后续问题：[coreplot bar tap not working](https://stackoverflow.com/questions/14112893/coreplot-bar-tap-not-working) ，答案是：请`Set the plot delegate to your bar plot delegate object.`任何人告诉我如何。我正在尝试创建一个简单的条形图，点击 10 天，没有教程可以解释用简单的话来说这个过程。这将是一个很大的帮助，我将非常感激。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:54:04.763

您需要设置您的 CPTBarPlot 委托。在设置之前，CPTBarPlot 对象不知道将其委托方法发送到何处。

在`GraphView.m`

查找`plot.dataSource = self`并添加该行`plot.delegate = self`（它在您正在创建的代码中`CPTBarPlot *plot`）

然后一定要将委托方法实现添加到GraphView.m。

这应该可行，但值得指出的是，您不应该真正将 dataSource 和委托方法放在视图中。这是视图控制器的工作，因为控制器在视图和它的模型之间进行调解，并指导用户交互。同样，您的`generateData`方法不属于视图，数据应该通过视图控制器设置/发送到视图（我想它只是为了测试目的，但最好从你的意思开始......）。

# ios - 检查联系人是否来自 facebook iOS 6.0

> ID：14121685
> 
> 赞同：2
> 
> 时间：2013-01-02T12:01:13.010
> 
> 标签：ios, facebook, contacts

是否可以通过新的 facebook 集成检查是否将联系人（ABRecordRef）添加到地址簿？

我想过滤掉 facebook 联系人，因为我似乎无法在 facebook 联系人上添加或编辑信息......（如果可能的话？我怎么能这样做也会有所帮助）

# wpf - 如何从视图更新模型

> ID：14121688
> 
> 赞同：0
> 
> 时间：2013-01-02T12:01:27.923
> 
> 标签：wpf, mvvm, inotifypropertychanged, itemsource

我有模特班员工：

```
public class Employee   
{
    public string Id { get; set; }  
    public string Name { get; set; }  
    public string LastName { get; set; }            
} 
```

和 View Model 类`EmployeeViewModel`，其中包含一个`Employee Object`

```
public class EmployeeViewModel : INotifyPropertyChanged  
{  
    public EmployeeViewModel()
    {

    }            

    private Employee currentEmployee;

    public Employee CurrentEmployee
    {
        get { return this.currentEmployee; }

        set
        {
            this.currentEmployee = value;
            this.NotifyPropertyChanged("CurrentEmployee");
        }
    }

    //Some code .....
    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

        #endregion
} 
```

现在视图（WPF）将使用`Employee`视图模型中的对象`ItemSource`来显示员工数据

现在的问题是：我在视图上有更新按钮，当我更改`Employee`视图中的属性时（通过文本框）我想更新模型（所以之后我可以更新数据库），如何从视图更新这个模型.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:01:40.980

当我检查你的模型类有什么奇怪的地方时。它应该实现 INotifyPropertyChanged 然后为每个属性创建支持字段，就像这样。

**模型类**

```
public class Employee:INotifyPropertyChanged
    {
        private string _name;
        public string Name
        {
            get
            {
                return _name;
            }
            set
            {
                _name= value;
                OnPropertyChanged("Name");
            }

        }
          #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;
        private void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
        #endregion

    }

**ViewModel Class**

 class EmployeeViewModel 
    {
        private IList<Employee> _employees;
        public EmployeeViewModel()
        {
            _employees= new List<Employee>
            {
                new Employee{ID=1, Name ="Emp1"},
                new Employee{ID=2, Name="Emp2"}
            };

        }

        public IList<Employee> Employees
        {
            get
            {
                return _employees;
            }
            set
            {
                _employees= value;
            }
        }

        private ICommand mUpdater;
        public ICommand UpdateCommand
        {
            get
            {
                if (mUpdater == null)
                    mUpdater = new Updater();
                return mUpdater;
            }
            set
            {
                mUpdater = value;
            }
        }

        private class Updater : ICommand
        {
            #region ICommand Members

            public bool CanExecute(object parameter)
            {
                return true;
            }

            public event EventHandler CanExecuteChanged;

            public void Execute(object parameter)
            {

            }

            #endregion
        }

    } 
```

您可以将您的逻辑放在 OnPropertyChanged 事件中。每当您在 UI 上进行更改时，始终会调用此方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:20:28.543

如果您使用的是通过基于 ID 搜索项目来`ObservableCollection`修改您的，那么如果找到，请修改值。`List`您所做的任何更改都会自动影响 UI 项，如果它们绑定到您的`ObservableCollection`然后使用修改后的集合来更新您的数据库记录

# html - 网站在没有可见内容时水平向右滚动

> ID：14121689
> 
> 赞同：1
> 
> 时间：2013-01-02T12:01:30.263
> 
> 标签：html, scrollbar, horizontal-scrolling

我最近启动了一个网站，但我创建的静态页面似乎有问题。这不是一个大问题，但它真的困扰着我！

有问题的网站是： http: [//gadgetmill.co.uk/](http://gadgetmill.co.uk/)

基本上我已经通过 CSS 隐藏了水平滚动条，但我想找到问题的根源并解决它而不是掩盖它。问题是，当右侧没有可见内容时，网站一直想要水平滚动。

我假设它是触发此问题的页脚，但如果有人能告诉我要更改什么来解决此问题，我将不胜感激？

非常感谢，新年快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:04:37.670

只需删除该填充： 0 1em; 和宽度：身体上的 96% 并在 id 为 socialslider 的元素上设置 right:0px

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:18:58.607

在 .footer-wrap (custom.css)

将边距从

`0 -8em`

到

`0 auto`

这对我在 chrome 中使用 firebug 有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:22:16.403

我在萤火虫上检查了你的网站

似乎

```
 .footer-wrap {margin :0 -8em} 
```

导致它。无法弄清楚为什么要应用它，猜测您可以取消它或解决它。禁用它为我解决了问题。

# .net - Web.config 中的必要节点

> ID：14121691
> 
> 赞同：0
> 
> 时间：2013-01-02T12:01:34.343
> 
> 标签：.net, asp.net-mvc

我的`Web.config`文件中有哪些必要的节点？`VS 2012`尽管我的项目是`ASP.NET MVC 3`类型，但我正在使用。

我没有使用`Entity Framework`. 而且我正在与一个管理员用户一起使用表单身份验证模式。

我应该保留这些节点吗：

*   `configSections`及其内容（`<section name="entityFramework" ...`）；
*   `profile`, `membership`,`roleManager`以及它们的内容；
*   `entityFramework`. 显然我不需要它；
*   `connectionStrings`包含→ →所依赖的`DefaultConnection`定义。`sessionState``providers``DefaultSessionProvider`

有点需要你的指导。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:57:16.173

如果您不使用 EF，则不需要 entityFramework 部分或其在 configSections 下的相应节点。如果没有其他特殊的 configSection，您可以完全删除整个节点。

您不需要 profile、membership 或 roleManager，除非您将它们与您的 1 admin login 帐户结合使用。

如果您不使用任何数据库，您也可以删除连接字符串。当您在 InProc 中运行 sessionState 时，它​​并没有真正使用 DefaultConnection。我不知道他们为什么将该属性放在 sessionState 节点上。

# android - 如何在android中使用OCR从图像中读取文本

> ID：14121693
> 
> 赞同：2
> 
> 时间：2013-01-02T12:01:38.360
> 
> 标签：android, ocr

我想在 Android 中实现 OCR。即从名片图像中获取文本。我使用了[这里](http://ocrapiservice.com/documentation/)的代码。

但是当我运行这段代码时，我得到了以下错误：

> java.lang.NoClassDefFoundError: org.apache.http.entity.mime.content.FileBody

我认为它指向以下行：

```
final FileBody image = new FileBody(new File(filePath)); 
```

类的`OCRServiceAPI`。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:13:46.587

无法猜测您的上述错误，但我通过在**PHP**服务器上使用OCR 的第三方应用程序**ABBYY产品在****Blackberry中完成了此任务。**

 ****在我长期的 R & DI 期间，我还研究了[Github_Abbyy](https://github.com/abbyysdk/ocrsdk.com)的以下链接。要使用此代码，您应该在此处创建一个免费帐户：[ocrsdk.com](http://ocrsdk.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:13:10.280

检查您是否获得了从图库中选择的图像的正确路径。

我也试过这个演示，它对我来说很好用。

在这里我发布我的代码：

*   `OCRServiceAPI.java`

    ```
    public class OCRServiceAPI {  
    public final String m_serviceUrl = "http://api.ocrapiservice.com/1.0/rest/ocr";
    private final String m_paramImage = "image";
    private final String m_paramLanguage = "language";
    private final String m_paramApiKey = "apikey";
    private String m_apiKey, m_responseText;
    private int m_responseCode; 
    public OCRServiceAPI(final String p_apiKey) {
        this.m_apiKey = p_apiKey;
    }
    /*
     * Convert image to text.
     * 
     * @param language The image text language.
     * 
     * @param filePath The image absolute file path.
     * 
     * @return true if everything went okay and false if there is an error with
     * sending and receiving data.
     */
    public boolean convertToText(final String p_language,
            final String p_filePath) {
        try {
            sendImage(p_language, p_filePath);
            return true;
        } catch (ClientProtocolException e) {
            e.printStackTrace();
            return false;
        } catch (IOException e) {
            e.printStackTrace();
            return false;
        }
    }
    /*
     * Send image to OCR service and read response.
     * 
     * @param language The image text language.
     * 
     * @param filePath The image absolute file path.
     */
    private void sendImage(final String p_language, final String p_filePath)
            throws ClientProtocolException, IOException {
        final HttpClient m_httpclient = new DefaultHttpClient();
        final HttpPost m_httppost = new HttpPost(m_serviceUrl);
        final FileBody m_image = new FileBody(new File(p_filePath));
        final MultipartEntity m_reqEntity = new MultipartEntity();
        m_reqEntity.addPart(m_paramImage, m_image);
        m_reqEntity.addPart(m_paramLanguage, new StringBody(p_language));
        m_reqEntity.addPart(m_paramApiKey, new StringBody(getApiKey()));
        m_httppost.setEntity(m_reqEntity);
        final HttpResponse m_response = m_httpclient.execute(m_httppost);
        final HttpEntity m_resEntity = m_response.getEntity();
        final StringBuilder m_sb = new StringBuilder();
        if (m_resEntity != null) {
            final InputStream m_stream = m_resEntity.getContent();
            byte m_bytes[] = new byte[4096];
            int m_numBytes;
            while ((m_numBytes = m_stream.read(m_bytes)) != -1) {
                if (m_numBytes != 0) {
                    m_sb.append(new String(m_bytes, 0, m_numBytes));
                }
            }
        }
        setResponseCode(m_response.getStatusLine().getStatusCode());
        setResponseText(m_sb.toString());
    }
    public int getResponseCode() {
        return m_responseCode;
    }
    public void setResponseCode(int p_responseCode) {
        this.m_responseCode = p_responseCode;
    }
    public String getResponseText() {
        return m_responseText;
    }
    public void setResponseText(String p_responseText) {
        this.m_responseText = p_responseText;
    }
    public String getApiKey() {
        return m_apiKey;
    }
    public void setApiKey(String p_apiKey) {
        this.m_apiKey = p_apiKey;
    }   } 
    ```

*   `SampleActivity.java`

    ```
    public class SampleActivity extends Activity implements OnClickListener {
    private final int RESPONSE_OK = 200;
    private final int IMAGE_PICKER_REQUEST = 1;
    private TextView m_tvPicNameText;
    private EditText m_etLangCodeField, m_etApiKeyFiled;
    private String m_apiKey; // T7GNRh7VmH
    private String m_langCode; // en
    private String m_fileName;
    @Override
    public void onCreate(Bundle p_savedInstanceState) {
        super.onCreate(p_savedInstanceState);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main);
        m_tvPicNameText = (TextView) findViewById(R.id.imageName);
        m_etLangCodeField = (EditText) findViewById(R.id.lanuageCode);
        m_etApiKeyFiled = (EditText) findViewById(R.id.apiKey);
        m_etApiKeyFiled.setText("T7GNRh7VmH");
        final Button m_btnPickImage = (Button) findViewById(R.id.picImagebutton);
        m_btnPickImage.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // Starting image picker activity
                startActivityForResult(
                        new Intent(
                                Intent.ACTION_PICK,
                                android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI),
                        IMAGE_PICKER_REQUEST);
            }
        });
        final Button m_btnConvertText = (Button) findViewById(R.id.convert);
        m_btnConvertText.setOnClickListener(this);
    }
    public void onClick(View p_v) {
        m_apiKey = m_etApiKeyFiled.getText().toString();
        m_langCode = m_etLangCodeField.getText().toString();
        // Checking are all fields set
        if (m_fileName != null && !m_apiKey.equals("")
                && !m_langCode.equals("")) {
            final ProgressDialog m_prgDialog = ProgressDialog.show(
                    SampleActivity.this, "Loading ...", "Converting to text.",
                    true, false);
            final Thread m_thread = new Thread(new Runnable() {
                public void run() {
                    final OCRServiceAPI m_apiClient = new OCRServiceAPI(
                            m_apiKey);
                    m_apiClient.convertToText(m_langCode, m_fileName);
                    // Doing UI related code in UI thread
                    runOnUiThread(new Runnable() {
                        public void run() {
                            m_prgDialog.dismiss();
                            // Showing response dialog
                            final AlertDialog.Builder m_alert = new AlertDialog.Builder(
                                    SampleActivity.this);
                            m_alert.setMessage(m_apiClient.getResponseText());
                            m_alert.setPositiveButton("OK",
                                    new DialogInterface.OnClickListener() {
                                        public void onClick(
                                                DialogInterface p_dialog,
                                                int p_id) {
                                        }
                                    });
                            // Setting dialog title related from response code
                            if (m_apiClient.getResponseCode() == RESPONSE_OK) {
                                m_alert.setTitle("Success");
                            } else {
                                m_alert.setTitle("Faild");
                            }
                            m_alert.show();
                        }
                    });
                }
            });
            m_thread.start();
        } else {
            Toast.makeText(SampleActivity.this, "All data are required.",
                    Toast.LENGTH_SHORT).show();
        }
    }
    @Override
    protected void onActivityResult(int p_requestCode, int p_resultCode,
            Intent p_data) {
        super.onActivityResult(p_requestCode, p_resultCode, p_data);
        if (p_requestCode == IMAGE_PICKER_REQUEST && p_resultCode == RESULT_OK) {
            m_fileName = getRealPathFromURI(p_data.getData());
            m_tvPicNameText.setText("Selected: en"
                    + getStringNameFromRealPath(m_fileName));
        }
    }
    /*
     * Returns image real path.
     */
    private String getRealPathFromURI(final Uri p_contentUri) {
        final String[] m_proj = { MediaStore.Images.Media.DATA };
        final Cursor m_cursor = managedQuery(p_contentUri, m_proj, null, null,
                null);
        int m_columnIndex = m_cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        m_cursor.moveToFirst();
        return m_cursor.getString(m_columnIndex);
    }
    /*
     * Cuts selected file name from real path to show in screen.
     */
    private String getStringNameFromRealPath(final String bucketName) {
        return bucketName.lastIndexOf('/') > 0 ? bucketName
                .substring(bucketName.lastIndexOf('/') + 1) : bucketName;
    }   } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:19:25.907

默认情况下，并非所有 Apache 软件包都在 Android 中可用，因此您必须从 Apache 存储库下载它们并自己包含它们。请参阅问题[Android library not found](https://stackoverflow.com/questions/6840911/android-libraries-not-found)以及答案中提供的链接。

编辑：具体不包括 org.apache.http.entity 的子包，只包括实体包本身。

在 OCR API 给出的示例项目中，他们将 mime 包放在[lib 文件夹中的 jar 中](https://github.com/smart-mobile-software/ocrapiservice/tree/master/Android/lib)。****

# java - 如何生成 onPause() 事件代码

> ID：14121694
> 
> 赞同：-9
> 
> 时间：2013-01-02T12:01:40.123
> 
> 标签：java, android, eclipse

我需要`onPause()`在 MainActivity 类中进行事件。是否有可能以某种方式自动生成这种东西，或者我需要在键盘上输入 evrything？

目前我的课看起来像：

```
package com.example.llk;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Toast.makeText(this,"onCreate()", Toast.LENGTH_LONG).show();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

有 onCreate 和 onCreateOptionsMenu 事件，但没有 onPause。IDE可以自动生成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:57:12.447

如果我正确理解了您的问题，请右键单击您的代码并选择“源”>“覆盖/实现方法”，在“活动”选项卡下应该有一个 onPause() 方法，检查它并单击“确定”，Eclipse 将为您生成代码.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:14:22.343

你可以只写 onPause() 和 Eclipse 会建议你，但如果你想手动做，你可以通过这种方式，

右键单击您的编码区域**->**单击源**->**单击覆盖/实施方法..- **>** 单击箭头按钮以展开“活动” **->**选中onPause（）**->**为onPause（）方法选择插入点根据您的需要**- >**单击“确定”按钮。

*当您想了解可用于覆盖的各种方法时，手动执行此操作会很有帮助。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:05:21.207

[**转到此 android 链接。它会告诉你。在 Eclipse 中，你不能自动完成，你必须从键盘输入所有内容。**](http://developer.android.com/training/basics/firstapp/creating-project.html)

以编程方式这样做

```
public class MainActivity extends Activity 
{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_xml);
//stuffs
}

@Override
protected void onPause() {
    super.onPause();
     // your stuffs on pause what should be paused or stopped
}

@Override
protected void onResume() {
    super.onResume();
     //your stuffs on resume
}
} 
```

# blackberry - 应用程序未部署在 Eclipse 3.7 的 BlackBerry Simulator 4.2 上

> ID：14121701
> 
> 赞同：0
> 
> 时间：2013-01-02T12:01:56.740
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde

我正在使用 Eclipse 3.7 (Indigo) 和 BlackBerry Eclipse 插件开发 BlackBerry 应用程序。我的应用程序没有部署在 BlackBerry Simulator 4.2.0.46 上。如果我关闭并清除模拟器并运行项目，它可以工作，但毕竟没有在模拟器上部署应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T02:30:50.213

黑莓 OS 4.2 已经很老了。您确实不需要以 OS 4.2 为目标。这是相当罕见的。这些天至少看 4.5 或 4.6。WhatsApp 是最受欢迎的 BlackBerry 第三方应用程序之一，不支持 OS 4.6 之前的任何内容。

在您的问题中，您说“如果我关闭并清除模拟器并运行项目，它可以工作，但毕竟没有在模拟器上部署应用程序。” 当您说“它正在工作”时，您是什么意思？似乎它不起作用，因为您想部署您的应用程序，所以那里的措辞令人困惑。

# eclipse - 尝试在 Eclipse 中以调试模式运行时出现 Tomcat 7.0 超时错误

> ID：14121703
> 
> 赞同：0
> 
> 时间：2013-01-02T12:02:03.160
> 
> 标签：eclipse, tomcat, timeout

当我尝试在调试模式下运行 tomcat 服务器时，它每次都会超时，但在正常模式下工作正常，即使我尝试增加服务器中的超时持续时间并从项目中删除所有断点。我尝试了提供给的各种解决方案其他帖子中的类似问题，但没有任何人知道如何解决这个问题

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-18T06:01:22.023

想通了原因。如果我们有太多的断点，调试模式会花费大量的时间。禁用所有断点并在启动时以调试模式启动，根据需要启用断点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T18:59:44.717

不确定，但如果我没记错，默认情况下启用以下属性，请禁用它并重试：Window -> Preferences -> Java -> Debug -> Suspend execution on uncaught exceptions。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T14:57:07.677

here is something else that helped me. :)

on your eclipse properties add `-clean` to your target. For example

```
..\eclipse.exe -clean 
```

# c++ - 使用 Qt 从原始数据加载图像

> ID：14121704
> 
> 赞同：2
> 
> 时间：2013-01-02T12:02:04.967
> 
> 标签：c++, image, qt

我很惊讶，因为我找不到任何从原始数据加载图像的方法。有什么优雅的方法吗？我只需要从原始位图二进制数据（无标题）创建一个 QImage 或类似的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:17:23.337

您可以使用带有 uchars 数组的 ctor 从原始数据创建一个 QImage 对象。您需要指定提供给 QImage 的数据格式（RGB、RGBA、Indexed 等）

```
QImage ( uchar * data, int width, int height, Format format )
QImage ( const uchar * data, int width, int height, Format format )
QImage ( uchar * data, int width, int height, int bytesPerLine, Format format )
QImage ( const uchar * data, int width, int height, int bytesPerLine, 
         Format format ) 
```

[http://doc.qt.digia.com/qt/qimage.html](http://doc.qt.digia.com/qt/qimage.html)

例如：

```
uchar* data = getDataFromSomewhere();
QImage img(data, width, height, QImage::Format_ARGB32); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T13:49:27.507

你的问题不清楚。使用 Qpixmap。和 Qbyte 数组。它很容易。

```
 QPixmap pic;
  pic.loadFromData(array); //array contains a bite array of the image.
  label->setPixmap(pic);  //do what ever you want from the image. here I set it to a lable. 
```

# search - Perforce 在 depot 中搜索具有某些关键字作为内容的文件

> ID：14121705
> 
> 赞同：2
> 
> 时间：2013-01-02T12:02:07.340
> 
> 标签：search, perforce

我在[这里](https://stackoverflow.com/questions/10519342/how-do-i-search-for-the-content-of-files-in-a-perforce-depot-p4v)找到了这个，但它似乎是一个命令行选项，出于某种原因 p4 grep 没有给我结果。它给出了诸如“必须参考客户”之类的错误。

所以我问，P4 视觉客户端（我有 2012 年 9 月 21 日版本）是否有任何规定可以搜索仓库文件以查找作为关键字输入的某些内容？

这是我使用 p4 grep 命令所做的：

光盘

```
p4 grep -i -n -e dmc ./ 
```

这给出了错误：

```
./ - file(s) not in client view. 
```

因此，然后尝试执行 switch 命令以更改为该客户端/工作区（它们是 Perforce 中的同义词）：

p4 客户端 -s MyClientName

它给出了错误说：

```
Usage: client -s [ -f ] -t template | -S stream [ clientname ] 
```

然后甚至进一步尝试但无法使用 -S -t 选项。

**切换客户端的命令是什么，可以解决错误消息“./ - 文件不在客户端视图中”。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:57:25.657

最后经过大量的试验和错误（网上对此没有太多讨论），我得到了 p4 grep 命令成功运行。

cd到你的

```
grep -i -n -F -e "class"  //depot/folder1/folder2/code/* 
```

关键是使用 Perforce 文件夹表示法`//depot/...`

您可以使用其帮助中提到的 grep 命令的任何选项。甚至可以使用正则表达式作为模式/关键字。

做得好你的真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:47:44.653

不，p4v 没有搜索文件内容的能力，你需要使用“p4 grep”来做到这一点。

# java - 在哪个类/接口中声明了 readObjectNoData()、writeReplace()、readResolve()？

> ID：14121706
> 
> 赞同：1
> 
> 时间：2013-01-02T12:02:11.090
> 
> 标签：java, java-io

在序列化/反序列化过程中，我们可以定义`readObjectNoData()/writeReplace()/readResolve()`自定义默认序列化/反序列化行为。

现在我的问题是声明在哪里？像`readUnshared()/writeUnshared()` 在 `ObjectInputStream/ObjectOutputStream`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:16:43.173

In `ObjectStreamClass hasReadObjectNoDataMethod()/hasReadResolveMethod()/hasWriteReplaceMethod()`method is define 用于标识目标类是否定义了`readObjectNoData()/writeReplace()/readResolve()`方法，如果是，则调用这些方法`ObjectInputStream/ObjectOutputStream.`

`ObjectInputStream.readSerialData(.... if (obj != null && slotDesc.hasReadObjectNoDataMethod() && handles.lookupException(passHandle) == null) { slotDesc.invokeReadObjectNoData(obj); }`

`ObjectStreamClass`还声明以下字段 `private Method readObjectNoDataMethod;private Method writeReplaceMethod;private Method readResolveMethod;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:05:22.783

它们没有在任何接口中声明：这是一个语言外契约。`Serializable`是一个标记接口，它绑定一个通过 Java 序列化机制的协定实现它的类。最佳实践是声明 a `private readResolve`，这很明显不可能有一个接口来声明它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T12:08:52.507

序列化机制使用反射来调用这些字段。检测基于方法签名，这些没有接口。

# shell - aix 中的 mv 命令

> ID：14121707
> 
> 赞同：-1
> 
> 时间：2013-01-02T12:02:14.017
> 
> 标签：shell, unix, aix, mv

当我在 aix 中使用 mv 命令将文件移动到目标目录时，如果该目标中存在另一个同名文件，它应该会失败。但是现在发生的是它替换了目标中的文件。请帮助。我应该使用任何其他命令或者我应该如何使用 mv 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:31:56.217

像这样的东西：

```
$ TDIR="/home/xyz"
$ FILE="f1"
$ [ -f $TDIR/$FILE ] || mv $FILE $TDIR/$FILE 
```

仅当目标目录中不存在名为 f1 的文件时，这才会移动它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:52:06.383

许多版本都`mv`支持一个`-n`选项。要完全便携，您可以执行以下操作：

```
echo no | mv -i a b 
```

如果您要移动多个文件，您可以执行以下操作：

```
yes no | mv -i a b target-dir 
```

# css - Twitter Bootstrap 标准化图像大小的方法？

> ID：14121711
> 
> 赞同：0
> 
> 时间：2013-01-02T12:02:35.807
> 
> 标签：css, twitter-bootstrap

我正在使用 Bootstrap 为房地产经纪人做一个网站，而 MLS 图像是各种古怪的尺寸，这给了我一个时髦的布局。处理此问题的最佳方法是什么，以便文本从每行中的相同位置开始？

在 css/js 中是否有一个好的解决方案，或者我应该在一些标准化纵横比的 imagemagick 处理之后制作图像的副本？

[http://jsfiddle.net/MgcDU/1055/](http://jsfiddle.net/MgcDU/1055/)和下面的来源

```
<div class="container">
    <div class="row">
        <div class="span4">
            <h4>123 Happy Tree Lane</h4>
            <img src="http://placehold.it/767x575" class="img-rounded"/>
            <p>A-list networks niches ROI tagclouds architect, users strategic granular applications maximize functionalities streamline</p>
            <p><a class="btn" href="#">View Details &raquo;</a></p>
        </div>
        <div class="span4">
            <h4>666 Doomsday Road</h4>
            <img src="http://placehold.it/400x266" class="img-rounded"/>
            <p>Semantic e-tailers networks users user-contributed action-items. E-commerce architectures networking envisioneer next-generation</p>
            <p><a class="btn" href="#">View Details &raquo;</a></p>
        </div>
        <div class="span4">
            <h4>000 asdf</h4>
            <img src="http://placehold.it/768x511" class="img-rounded"/>
            <p>Productize e-tailers users redefine e-business synergize bandwidth user-contributed, "front-end reintermediate,"</p>
            <p><a class="btn" href="#">View Details &raquo;</a></p>
        </div>
    </div>
</diV> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T17:20:18.843

这是让您入门的一个想法：http: [//jsfiddle.net/panchroma/sukH8/](http://jsfiddle.net/panchroma/sukH8/)

你会看到我指定了一个新类

```
.imageClip{
width:300px;
height:175px;
overflow:hidden;
} 
```

然后将此类应用于所有图像。您只需要使用 .imageClip 中的高度和宽度来满足您的目的，您还可以通过@media 请求使用不同的值来处理窄屏幕宽度。

希望这可以帮助

# xml - 在 xml 的单个参数中添加 2 个文本字段

> ID：14121714
> 
> 赞同：0
> 
> 时间：2013-01-02T12:02:52.940
> 
> 标签：xml, xsd

我使用参数在 xml 中创建了一个新的文本字段，例如，

```
<param name="address" 
       type="text" 
       mandatory="" 
       label="Address" 
       size="100"/> 
```

同样，我需要在同一个参数中创建 2 个文本字段。有没有可能在单个参数中创建 2 个文本字段的方法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:23:27.840

是否可以使用单个`param`元素创建两个文本字段完全取决于您正在使用的 XML 词汇表的创建者所做的设计决策。这不是 XML 或模式语言问题。这完全是关于您使用的不明词汇的问题。

如果您可以识别该词汇，那么可能会有人阅读 Stack Overflow 可以回答您的问题；如果您真的想要一个完全通用的答案，那就是“是的，当然有一种可能的方法-您的语言的设计者只需将其指定为特定标记结构的语义”。

# linux - 如何为双周（每周两次）设置 cron 作业

> ID：14121715
> 
> 赞同：21
> 
> 时间：2013-01-02T12:02:53.743
> 
> 标签：linux, ubuntu, cron, crontab

如何将 cron 作业设置为每周运行两次？

我知道如何为每周设置一个 cron 作业：

```
0 0 * * 0 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-02T12:05:39.077

以下情况如何：

```
0 0 * * 1,4 
```

这会将星期几设置为星期一 (1) 和星期四 (4)。您可以选择 0 到 7 之间的任何值（0 和 7 都是星期日）。

对于更具可读性的 crontab，您还可以使用名称：

```
0 0 * * MON,THU 
```

*另请参阅：[如何指示 cron 每两周执行一次作业？](https://stackoverflow.com/questions/350047/how-to-instruct-cron-to-execute-a-job-every-second-week)*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-25T12:22:09.083

回复埃尔比的问题：

```
0 0 1,15 * * 
```

这将在一个月内设置 cronjob（两周）2 次，即一个月的第 1 天和第 15 天。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-25T22:30:19.463

这些答案很棒，但我想分享一个我在查看这个问题和答案后立即发现的工具，称为 crontab.guru。我不附属，我只是认为这是一个不错的工具。

[crontab.guru 表示“周一和周四 00:00”。](https://crontab.guru/#0_0_*_*_1,4)

# android - 如何在 Google Maps v2 上的两个标记点之间绘制路线？

> ID：14121716
> 
> 赞同：0
> 
> 时间：2013-01-02T12:02:53.237
> 
> 标签：android, google-maps, google-maps-markers

[https://developers.google.com/maps/documentation/android/lines](https://developers.google.com/maps/documentation/android/lines) doc 说通过`".geodesic(true)"`选择，它将遵循地球的曲率。但它只是显示一条直线。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:15:58.667

试试这个代码

```
 String uri = "http://maps.google.com/maps?saddr=" +
   currentLatitude+","+currentLongitude+"&daddr="+fixedLatitude+","+fixedLongitude;
   Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
    Uri.parse(uri)); intent.setClassName("com.google.android.apps.maps",
    "com.google.android.maps.MapsActivity"); startActivity(intent); 
```

这可能对你有帮助

# delphi - 创建兼容 VCL 和 FMX 的新组件

> ID：14121717
> 
> 赞同：6
> 
> 时间：2013-01-02T12:03:00.537
> 
> 标签：delphi

我正在做一些组件，我想让它们兼容 VCL 和 FMX。所以我有一个遵循这种模式的结构：

General_dpk（使用 TCustomMyClass）+ VCL_dpk（使用 TMyClass）+ FMX_dpk（使用 TMyClassFMX）

每个包都有注册其组件的注册程序。在组件面板中出现两个组件（VCL 和 FMX）。如何像其他 Delphi 组件一样仅根据所选项目类型（VCL 或 FMX）显示组件？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T08:39:00.983

好吧，经过长时间的搜索，我在 Embarcadero 论坛上问过了。在那里，雷米友善地告诉我答案（当你知道时很容易）。问题是您需要像这样将 GroupDescendentsWith 函数调用到注册过程中

```
// para componentes VCL
GroupDescendentsWith(TMyClass, Vcl.Controls.TControl);

// para componentes FMX
GroupDescendentsWith(TMyClassFMX, Fmx.Types.TControl); 
```

Embarcadero 论坛的答案在[这里](https://forums.embarcadero.com/thread.jspa?threadID=81551&tstart=0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:13:33.713

您可以在此答案的注册过程代码中使用：[Delphi XE2：是否有预定义的条件来识别 VCL 和 FireMonkey？](https://stackoverflow.com/questions/7720508/delphi-xe2-is-there-a-predefined-conditional-to-identify-vcl-and-firemonkey)检查它是 Firemonkey 还是 VCL 应用程序。

# html - HTML5 画布背景图片重复

> ID：14121719
> 
> 赞同：20
> 
> 时间：2013-01-02T12:03:28.993
> 
> 标签：html, canvas, background, background-image

我有一个绘制声波的 html5 画布。我已将背景设置为背景图像，但是，我希望此背景图像重复。谁能告诉我我将如何做到这一点以及我需要在我的代码中添加什么：

```
var backgroundImage = new Image(); 
backgroundImage.src = 'http://www.samskirrow.com/client-kyra/images/main-bg.jpg'; 
var canvas;
var context;

function init(c) {
    canvas = document.getElementById(c);
    context = canvas.getContext("2d");
    soundManager.onready(function() {
        initSound(clientID, playlistUrl);
    });
    aniloop();
}

function aniloop() {
    requestAnimFrame(aniloop);
    drawWave();
}

function drawWave() {

    var step = 10;
    var scale = 60;

    // clear
    context.drawImage(backgroundImage, 0, 0);

    // left wave
    context.beginPath();
    context.moveTo(0, 256);
    for ( var i = 0; i < 256; i++) {
        context.lineTo(6 * i, 257 + waveLeft[i] * 80.);
    }
    context.lineWidth = 1;
    context.strokeStyle = "#000";
    context.stroke();

    // right wave
    context.beginPath();
    context.moveTo(0, 256);
    for ( var i = 0; i < 256; i++) {
        context.lineTo(6 * i, 256 + waveRight[i] * 80.);
    }
    context.lineWidth = 1;
    context.strokeStyle = "#000";
    context.stroke();
}

function updateWave(sound) {
    waveLeft = sound.waveformData.left;
}

return {
    init : init
};
})(); 
```

你可以在这里看到这个代码：http: [//www.samskirrow.com/client-kyra](http://www.samskirrow.com/client-kyra)

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-02T12:17:59.243

使用画布[`createPattern`](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Applying_styles_and_colors#A_createPattern_example)功能

```
const canvas = document.getElementById("canvas"),
      context = canvas.getContext("2d"),
      img = new Image();

img.src = 'https://www.google.nl/images/srpr/logo3w.png';

img.addEventListener('load', () => {
  const ptrn = context.createPattern(img, 'repeat'); // Create a pattern with this image, and set it to "repeat".
  context.fillStyle = ptrn;
  context.fillRect(0, 0, canvas.width, canvas.height); // context.fillRect(x, y, width, height);
})
```

```
<canvas id="canvas" width="600px" height="600px"></canvas>
```

（这是[2 个样本](http://jsperf.com/canvas-pattern-vs-manual-tiling)[中**最快**](http://jsperf.com/canvas-pattern-vs-manual-tiling)的）。

或者，尝试手动实现：

```
const canvas = document.getElementById("canvas"),
      context = canvas.getContext("2d"),
      img = new Image();

img.src = 'https://www.google.nl/images/srpr/logo3w.png';

img.addEventListener('load', () => {
  for (let w = 0; w < canvas.width; w += img.width) {
    for (let h = 0; h < canvas.height; h += img.height) {
      context.drawImage(img, w, h);
    }
  }
})
```

```
<canvas id="canvas" width="600px" height="600px"></canvas>
```

# android - Android：实现多选复选框时出现classCastException

> ID：14121724
> 
> 赞同：-1
> 
> 时间：2013-01-02T12:03:41.647
> 
> 标签：android, android-listview

下面是我的适配器类，我在其中检索电话联系人，尝试使用复选框获取多个联系人。

```
 public ProfileAdapter(Activity activity, int textViewResourceId, List<Profile> listCont,int renderer, String profileType) {
        super(activity, textViewResourceId, listCont);
        this.renderer = renderer;
        this.listCont = listCont;
        this.activity = activity;
        this.profileType=profileType;

        checkBoxState=new boolean[listCont.size()];
    }

    private class ViewHolder
    {
      ImageView photo;
      TextView text,textContNo, textEmailId;
      CheckBox checkBox;
    }

    @TargetApi(9)
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

         View view = convertView;

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) (getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE));
            view = inflater.inflate(renderer, null);
             viewHolder=new ViewHolder();

             //cache the views
                viewHolder.photo=(ImageView) view.findViewById(R.id.photo);
                viewHolder.text=(TextView) view.findViewById(R.id.name);
                viewHolder.textContNo=(TextView) view.findViewById(R.id.contactno);
                viewHolder.textEmailId=(TextView) view.findViewById(R.id.emailId);
                viewHolder.checkBox=(CheckBox) view.findViewById(R.id.checkBox1);

                viewHolder.checkBox
                  .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                        Profile element = (Profile) viewHolder.checkBox
                          .getTag();
                      element.setSelected(buttonView.isChecked());

                    }
                  });
              view.setTag(viewHolder);
              viewHolder.checkBox.setTag(listCont.get(position));
            } else {
              view = convertView;
              ((ViewHolder) view.getTag()).checkBox.setTag(listCont.get(position));
            }
            ViewHolder holder = (ViewHolder) view.getTag();
            holder.text.setText(listCont.get(position).getName());
            holder.checkBox.setChecked(listCont.get(position).isSelected());

            holder.text = (TextView) view.findViewById(R.id.name);
            holder.photo = (ImageView) view.findViewById(R.id.photo);

            holder.textContNo = (TextView) view.findViewById(R.id.contactno);
            holder.textEmailId = (TextView) view.findViewById(R.id.emailId);

        Profile contact = listCont.get(position);
        holder.text.setText(contact.getName());
        contact.getName();
        contact.getId();

        holder.text.setTag(contact);
        holder.text.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Profile myContact= (Profile) v.getTag();

                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("city", myContact.getCity());
                intent.putExtra("state", myContact.getState());
                intent.putExtra("countryName", myContact.getCountryName());
                intent.putExtra("postalCode", myContact.getPostalCode());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                Log.d(TAG, "On Activity Result Method : 1");
                activity.setResult(100, intent);

                activity.finish();
                Constants.loadEntries.cancel(true);
                return false;
            }
        });

        if(contact.getPhoto() !=null && !contact.getPhoto().equals("")){
            viewHolder.photo.setImageBitmap(contact.getPhoto());
        }else{
            viewHolder.photo.setImageResource(R.drawable.profile);
        }

        holder.photo.setTag(contact);
        holder.photo.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Profile myContact= (Profile)v.getTag();

                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                Log.d(TAG, "On Activity Result Method : 2");
                activity.setResult(100, intent);
                activity.finish();
                Constants.loadEntries.cancel(true);
                return false;
            }
        });

        holder.textContNo.setText(contact.getNumber());
        holder.textEmailId.setText(contact.getEmail());

        view.setClickable(true);
        view.setTag(contact);
        view.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Profile myContact= (Profile) v.getTag();

                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                Log.d(TAG, "On Activity Result Method : 3");
                activity.setResult(100, intent);
                activity.finish();
                Constants.loadEntries.cancel(true);
            }
        }); 

        LinearLayout layout = (LinearLayout)view.findViewById(R.id.profilelayout);
        layout.setTag(contact);
        layout.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Profile myContact= (Profile) v.getTag();
                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                Log.d(TAG, "On Activity Result Method : 4");
                activity.setResult(100, intent);
                activity.finish();
                Constants.loadEntries.cancel(true);
            }
        });

        if (position % 2 == 0) 
            view.setBackgroundResource(R.drawable.listshape); 
            else 
            view.setBackgroundResource(R.drawable.favoritebody); 

            if (contact.getAddress() != null && contact.getAddress().length() != 0){ 
                view.setBackgroundResource(R.drawable.hasaddress); 

            } 
            return view;
            } 

            } 
```

当我选中一个复选框并滚动复选标记重复几行时，如何避免这种情况，我在行出现 gettign classcast 异常

```
 ((ViewHolder) view.getTag()).checkBox.setTag(listCont.get(position)); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:37:19.600

这是您`view.setTag(contact);`在代码中间调用的问题。所以最终你的 convertView 的标签是`contact`，不是`ViewHolder`

编辑1：

代替

```
view.setTag(contact); 
```

和

```
holder.checkBox.setTag(contact); 
```

编辑 2：好的，我在答案中添加了 nizk2 的评论。另外，要修复您错误的复选框和图像问题，请尝试以下代码：

```
public ProfileAdapter(Activity activity, int textViewResourceId, List<Profile> listCont,int renderer, String profileType) {
        super(activity, textViewResourceId, listCont);
        this.renderer = renderer;
        this.listCont = listCont;
        this.activity = activity;
        this.profileType=profileType;

        checkBoxState=new boolean[listCont.size()];
    }

    private class ViewHolder
    {
      ImageView photo;
      TextView text,textContNo, textEmailId;
      CheckBox checkBox;
    }

    @TargetApi(9)
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

         View view = convertView;
         final Profile myContact = listCont.get(position);

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) (getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE));
            view = inflater.inflate(renderer, null);
             viewHolder=new ViewHolder();

             //cache the views
                viewHolder.photo=(ImageView) view.findViewById(R.id.photo);
                viewHolder.text=(TextView) view.findViewById(R.id.name);
                viewHolder.textContNo=(TextView) view.findViewById(R.id.contactno);
                viewHolder.textEmailId=(TextView) view.findViewById(R.id.emailId);
                viewHolder.checkBox=(CheckBox) view.findViewById(R.id.checkBox1);

              view.setTag(viewHolder);
            } else {
              view = convertView;
              ((ViewHolder) view.getTag()).checkBox.setTag(listCont.get(position));
            }
            ViewHolder holder = (ViewHolder) view.getTag();
            holder.text.setText(listCont.get(position).getName());
            holder.checkBox.setChecked(myContact.isSelected());
            viewHolder.checkBox
                  .setOnCheckedChangeListener(new                                                     CompoundButton.OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                      myContact.setSelected(buttonView.isChecked());
                    }
                  });

        holder.text.setText(myContact.getName());
        myContact.getName()
        myContact.getId();

        holder.text.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("city", myContact.getCity());
                intent.putExtra("state", myContact.getState());
                intent.putExtra("countryName", myContact.getCountryName());
                intent.putExtra("postalCode", myContact.getPostalCode());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                Log.d(TAG, "On Activity Result Method : 1");
                activity.setResult(100, intent);

                activity.finish();
                Constants.loadEntries.cancel(true);
                return false;
            }
        });

        if(myContact.getPhoto() !=null && !myContact.getPhoto().equals("")){
            viewHolder.photo.setImageBitmap(myContact.getPhoto());
        }else{
            viewHolder.photo.setImageResource(R.drawable.profile);
        }

        holder.photo.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {    
                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                Log.d(TAG, "On Activity Result Method : 2");
                activity.setResult(100, intent);
                activity.finish();
                Constants.loadEntries.cancel(true);
                return false;
            }
        });

        holder.textContNo.setText(myContact.getNumber());
        holder.textEmailId.setText(myContact.getEmail());

        view.setClickable(true);
        view.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                Log.d(TAG, "On Activity Result Method : 3");
                activity.setResult(100, intent);
                activity.finish();
                Constants.loadEntries.cancel(true);
            }
        }); 

        LinearLayout layout = (LinearLayout)view.findViewById(R.id.profilelayout);
        layout.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.putExtra("type", profileType);
                intent.putExtra("name", myContact.getName());
                intent.putExtra("phoneNumber", myContact.getLandLineNo());
                intent.putExtra("email", myContact.getEmail());
                intent.putExtra("contactid", myContact.getId());
                intent.putExtra("address", myContact.getAddress());
                intent.putExtra("website", myContact.getWebSite());
                intent.putExtra("mobileNumber", myContact.getMobileNo());
                Log.d(TAG, "On Activity Result Method : 4");
                activity.setResult(100, intent);
                activity.finish();
                Constants.loadEntries.cancel(true);
            }
        });

        if (position % 2 == 0) 
            view.setBackgroundResource(R.drawable.listshape); 
            else 
            view.setBackgroundResource(R.drawable.favoritebody); 

            if (myContact.getAddress() != null && myContact.getAddress().length() != 0){ 
                view.setBackgroundResource(R.drawable.hasaddress); 

            } 
            return view;
            } 

            } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T12:15:57.790

这个表达式：`(ViewHolder) view.getTag()`

您正在将超类转换为子类。`getTag()` [返回一个对象](http://developer.android.com/reference/android/view/View.html#getTag%28%29)；Java 中**最高级的类**。将其转换为子类（您的 ViewHolder）是非常非常错误的（错误的意思是不可预测的，因为有时它可能会起作用）。

Java 中允许向上转换，但是向下转换会产生编译错误。可以通过添加强制转换来删除编译错误，但这可能会在运行时中断。

为什么是错的？[看这里](https://stackoverflow.com/a/4863090/1782481)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T12:21:27.013

尝试这个：

```
 CheckBox chB=(CkeckBox)((ViewHolder) view.getTag()).checkBox;
 chB.setTag(listCont.get(position)); 
```

# python - IOError: [Errno 13] 文件不可访问 GAE

> ID：14121726
> 
> 赞同：7
> 
> 时间：2013-01-02T12:03:53.707
> 
> 标签：python, google-app-engine

我想从谷歌应用引擎应用程序访问我计算机中的文件。如果我将文件放在应用程序的 src 文件夹中，则没有问题，但我需要将该文件放在该文件夹之外。

当我尝试访问此文件时，出现下一个错误：

```
Traceback (most recent call last):
File "C:\Program Files     (x86)\Google\google_appengine\google\appengine\ext\webapp\_webapp25.py", line 712, in __call__
handler.post(*groups)
File "C:\Users\path\Documents\path\oauth2client\appengine.py", line 469, in check_oauth
return method(request_handler, *args, **kwargs)
File "C:\Users\path\Documents\path\myapp.py", line 88, in post
filename=open('C:/Users/path_to_file/Documento 1.docx','r')
File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 635, in __init__
raise IOError(errno.EACCES, 'file not accessible', filename)
IOError: [Errno 13] file not accessible: 'C:/Users/path_to_file/Documento 1.docx' 
```

我已经读过，如果文件在 app.yaml 中定义为静态文件，则无法从 GAE 访问。这是我的 app.yaml。我不知道是否有问题：

```
application: myapp
version: 1
runtime: python
api_version: 1

handlers:
- url: /.*
script: myapp.py 
```

这是尝试访问该文件的应用程序的一部分：

```
filename='C:/Users/path_to_file/Documento 1.docx'
media_body = MediaFileUpload(filename,resumable=True) 
```

有人知道为什么我会收到“文件不可访问”错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T12:14:11.643

将该文件与您的应用程序文件的其余部分放在同一目录中（即 app.yaml 所在的位置）。

您希望应用程序访问的所有文件都必须位于主应用程序目录下的同一个位置。

GAE 无法访问您计算机上某处的任意文件，就像部署时它无法访问保存在其他“某处”的文件一样。

```
filename='myfile.doc' 
```

假设它位于“根”中（与 app.yaml 相同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-22T22:25:45.923

在您的 app.yaml 文件中，您需要使该文件对您的应用程序可见：

```
 handlers:
 - url: /<location to your data files>
   script: <your app name>.app 
```

例如在我的 app.yaml 文件中，它看起来像这样

```
- url: /data
  script: main.app 
```

# hadoop - 由于权限失败，无法在 cygwin 上启动 tasktracker

> ID：14121727
> 
> 赞同：3
> 
> 时间：2013-01-02T12:03:55.530
> 
> 标签：hadoop, cygwin

我已经在 Windows 7 下的 cygwin 上设置了 hadoop 1.1.1。dfs 组件启动正常（start-dfs.sh 或 start-all.sh 两者），jobtracker（启动 mapred.sh）也是如此，但 tasktracker 无法启动并关闭出现与 taskTracker 路径权限相关的错误（未能设置 0755）。我[在 Windows 下的 hadoop 中启动 tasktracker 的问题](https://stackoverflow.com/questions/6276642/problem-starting-tasktracker-in-hadoop-under-windows)中看到了类似的问题，但没有找到任何解决方案或有关如何解决它的指导。也尝试了许多网站的解决方案，但都是徒劳的。

这是日志输出

```
 2013-01-02 15:51:31,836 INFO org.apache.hadoop.mapred.TaskTracker: Starting tasktracker with owner as 120173
     2013-01-02 15:51:31,836 INFO org.apache.hadoop.mapred.TaskTracker: Good mapred local directories are: /tmp/hadoop-120173/mapred/local
     2013-01-02 15:51:31,852 ERROR org.apache.hadoop.mapred.TaskTracker: Can not start task tracker because java.io.IOException: Failed to set permissions of path: \tmp\hadoop-120173\mapred\local\taskTracker to 0755
at org.apache.hadoop.fs.FileUtil.checkReturnValue(FileUtil.java:689)
at org.apache.hadoop.fs.FileUtil.setPermission(FileUtil.java:670)
at org.apache.hadoop.fs.RawLocalFileSystem.setPermission(RawLocalFileSystem.java:509)
at org.apache.hadoop.fs.RawLocalFileSystem.mkdirs(RawLocalFileSystem.java:344)
at org.apache.hadoop.fs.FilterFileSystem.mkdirs(FilterFileSystem.java:189)
at org.apache.hadoop.mapred.TaskTracker.initialize(TaskTracker.java:810)
at org.apache.hadoop.mapred.TaskTracker.<init>(TaskTracker.java:1557)
at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:3893)

    2013-01-02 15:51:31,852 INFO org.apache.hadoop.mapred.TaskTracker: SHUTDOWN_MSG: 
```

我什至尝试手动设置此目录的权限，然后运行 ​​tasktracker 但它仍然失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:22:03.250

This is due to hadoop-7682 bug and you have to apply a jar patch in order to resolve this issue. You can find the patch and instructions here

[https://github.com/congainc/patch-hadoop_7682-1.0.x-win](https://github.com/congainc/patch-hadoop_7682-1.0.x-win)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T18:55:09.570

尝试更改默认目录，`hdfs-site.xml`以便 hadoop 为其创建的目录`dfs`是 cygwin 目录的子目录。像这样改变`hdfs-site.xml`：

```
<configuration>
 <property>
    <name>dfs.name.dir</name>
    <value>c:/cygwin/usr/somedir/dfs/name</value>
 </property>
 <property>
    <name>dfs.data.dir</name>
    <value>c:/cygwin/usr/somedir/dfs/data</value>
 </property>
</configuration> 
```

# numpy - 使用 numpy.savetxt 后的问题

> ID：14121733
> 
> 赞同：0
> 
> 时间：2013-01-02T12:04:10.303
> 
> 标签：numpy, python-2.7

我正在用 Python 编程。这是我的代码：

```
def data_exp(nr, nc):
    data=numpy.zeros((nr, nc))
    print data
    for i in range(0, nr):
        for j in range (0, nc):
            data[i, j]=input('Insert values: ')
    numpy.savetxt(str(input('Insert the name of the file (ex: "a.txt"): ')), data)
    return data 
```

问题是这个程序什么也不返回！我在 numpy.savetxt 之后放置的所有内容都被忽略了！有人可以告诉我如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:34:36.377

你的问题是使用不当`input`。`input`相当于`eval(raw_input())`。该`eval()`调用将尝试在程序中的全局变量和局部变量的上下文中评估您作为 python 源代码输入的文本，在这种情况下，这显然不是您想要做的。我很惊讶您没有收到运行时错误报告您输入的字符串未定义。

尝试`raw_input`改用：

```
def data_exp(nr, nc):
    data=numpy.zeros((nr, nc))
    print data
    for i in range(0, nr):
        for j in range (0, nc):
            data[i, j]=input('Insert values: ')
    numpy.savetxt(str(raw_input('Insert the name of the file (ex: "a.txt"): ')), data)
    return data 
```

* * *

编辑：

这是上面的代码，在 ipython 会话中为我工作。如果你不能让它工作，还有其他问题：

```
In [7]: data_exp(2,2)
[[ 0\.  0.]
 [ 0\.  0.]]
Insert values: 1
Insert values: 2
Insert values: 3
Insert values: 4
Insert the name of the file (ex: "a.txt"): a.txt
Out[7]: 
array([[ 1.,  2.],
       [ 3.,  4.]])

In [8]: data_exp??
Type:       function
Base Class: <type 'function'>
String Form:    <function data_exp at 0x2ad3070>
Namespace:  Interactive
File:       /Users/talonmies/data_exp.py
Definition: data_exp(nr, nc)
Source:
def data_exp(nr, nc):
    data=numpy.zeros((nr, nc))
    print data
    for i in range(0, nr):
        for j in range (0, nc):
            data[i, j]=input('Insert values: ')
    numpy.savetxt(str(raw_input('Insert the name of the file (ex: "a.txt"): ')), data)
    return data

In [9]: _ip.system("cat a.txt")
1.000000000000000000e+00 2.000000000000000000e+00
3.000000000000000000e+00 4.000000000000000000e+00 
```

# php - PHP & combination to detect enabled JavaScript in browser

> ID：14121743
> 
> 赞同：3
> 
> 时间：2013-01-02T12:04:52.880
> 
> 标签：php, javascript, noscript

Is this correct? If not what is the correct syntax

I am new to php hence trying to learn.

```
 <?php
    // Check browser for JavaScript support

        $jsSupport='true'; ?>

        <noscript><?php $jsSupport='false'; ?></noscript>

        <?php
        if ($jsSupport == 'false') {

        include ('no-script-layout.php');

        } else {

        include ('regular-layout.php');

        }

     ?> 
```

Or is there a better way to handle this?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T12:16:16.620

## `<noscript>` tags

You can use the `noscript` tags to display content to browsers with javascript disabled or redirect them to another page (a `nojs-version.php` for example).

```
<!-- Redirect to another page (for no-js support) (place it in your <head>) -->
<noscript><meta http-equiv="refresh" content="0;url=nojs-version.php"></noscript>    

<!-- Show a message -->
<noscript>You don't have javascript enabled! Please download Google Chrome!</noscript> 
```

## Modernizr

The better way to handle javascript detection (& feature) would be to use Modernizr: [http://modernizr.com](http://modernizr.com)

Check out this SO question: [What is the purpose of the HTML "no-js" class?](https://stackoverflow.com/questions/6724515/what-is-the-purpose-of-the-html-no-js-class)

### A basic example (without Modernizr)

You could add the class `no-js` on page load to your `<body>` tag. Then when the page loads and if javascript is enabled, you can replace the `no-js` with `js` like so:

```
// When the DOM is ready & loaded, do this..
$(document).ready(function(){
    // Remove the `no-js` and add the `js` (because JS is enabled (we're using it!)
    $('body').removeClass('no-js').addClass('js');

    // Assign it to a var so you don't traverse the DOM unnecessarily.
    var useJS = $('body').hasClass('js');
    if(useJS){
        // JS Enabled
    }
}); 
```

The above code is a very basic example of how modernizr works. I would highly recommend just using that.

[Check out Modernizr](http://modernizr.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T12:08:08.957

To accomplish this (if you really need to know from PHP if the user has JS enabled) :

```
<script>
// AJAX call to your PHP script to tell it that JS is enabled
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:05:52.210

No that is not correct. All code is interpreted, and why are you using string literals instead of actual booleans? And not to mention, you're using an assignment operator instead of a comparison operator in your if statement.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T12:07:06.340

It won't work, because `<noscript>` induces a behavior in the **browser**, and you are checking your condition server side.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-22T14:01:35.717

this works very good if the JavaScript is disabled

HTML

```
<noscript>
         <div id="noscript-warning">This Application works best with JavaScript enabled</div>
        </noscript> 
```

CSS

```
<style>
#noscript-warning {
font-family: sans-serif;
position: fixed;
top: 0;
left: 0;
width: 100%;
z-index: 101;
text-align: center;
font-weight: bold;
font-size: 120%;
color: #fff;
background-color: #ae0000;
padding: 5px 0 5px 0;
</style> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-28T01:53:52.483

It will not work because php is a server-side pre-processor that cannot know anything about the user's browser other than what is provided in the browser's original request, which includes nothing about its current scripting capability.

Basically, if you want to have rich content beyond the simplistic `noscript` tags -- they can only add non-scripted content, not hide scripted content -- you have to:

1.  Send all content -- both plain and javascript versions -- to the browser.
2.  Place all non-scripted versions of the html in `div` or `span` tags with `class="nocript"`.
3.  Place all scripted versions of the html in `div` or `span` tags with `class="script"`.
4.  Set css to start with `div.noscript{display:block}`, `span.noscript{display:inline}`, `.script{display:none}`.
5.  Have your javascript hide each element with `class="noscript"` with `element.style.display='none'`, show each `div` with `class="script"` with `element.style.display='block'` and show each `span` with `class="script"` with `element.style.display='inline'`.

You also have to consider that a browser is an especially hostile environment to be programming into, as the user, or any plugins, can do anything, like disable javascript, at any time. Therefore, you have to double-check everything that the browser sends, whether by form or AJAX, in your PHP code to make sure it is complete and not corrupt.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-02-20T21:41:30.610

I got it to work for me by wrapping an HTML comment tag inside the noscript tags:

```
<noscript><!-- </noscript>
<?php 
 $a = 42;
 echo $a;
?> 
<noscript> --> </noscript> 
```

I had my doubts going into it...but it works, so...Let me know if there's some wierd case where it doesn't...Hope this helps with your problems :)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-11-08T14:16:22.023

I think that you can do that in your script , in a index.php script , write down this code :

```
<?php

  //true will be returned only if javascript is not enabled 
  $JSEnabled = "<noscript>true</noscript>"; 

  //then you can do echo $JSEnabled to see the result yourself 

  //in a condition statement ...
  if($JSEnabled) {

          // ... code for JS Enabled 

  } else {

          // ... code not JS Disabled 

  } 
```

**UPDATE :**

```
 $js = null;
   $js = (boolean) '<noscript>false</noscript>';  
   //the noscript text : false is shown when no js support detected in your browser. this value will be converted to a boolean value for testing purpose.

   if($js) {                                      
   //if $js gets the no script text , that means that the browser is not supporting the js, so this line will check if $js is set to false , the else statement is fired , otherwise the if statement is fired
    echo 'Your javascript is enabled<br>';
   } else {
    echo 'Your javascript is disabled<br>';
   } 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-09-30T23:45:56.533

Yo can do this with jQuery and CSS:

```
<body style='display: none;'>
<!--- Content goes here --->
</body>
<script>
//jQuery
$("body").css("display","block");
//Pure JavaScript
document.body.style.display="block";
</script> 
```

* * *

## 回答 #10

> 赞同：-6
> 
> 时间：2013-01-02T12:32:02.560

# how about ?

```
<noscript>
<?php 
//do the include thing right here 
$a=1;
?>
</noscript>
<?php
if(isset($a)){
//do nothing
}else {
//add the include u want 
};
<? 
```

# mobile - 用户或个人资料选项卡图标不可见

> ID：14121754
> 
> 赞同：2
> 
> 时间：2013-01-02T12:05:41.317
> 
> 标签：mobile, extjs, extjs4, sencha-touch, sencha-touch-2

我是 sencha touch 的新手，想要三个标签图标，即`Home, Profile/User and Camera`. 该`home`图标当前可见但`Profile/User`不可见。如何在 sencha touch 中添加图标`profile/user`和标签？`camera`

这是我的 Profile.js 代码

```
Ext.define('find.view.Profile' , {
extend: 'Ext.Panel',
xtype: 'profile',

config: {
    title: 'Profile',
    iconCls: 'user',
    layout: 'fit',
    scrollable: true,
    styleHtmlContent: true,
    styleHtmlCls: 'profilepage',
    html: ['<h1>Profile</h1>'].join('')
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:17:51.960

您可以在 ST 应用程序中使用的所有图标都位于目录中

```
resources/themes/images/default/pictos 
```

但是，并非所有内容都默认包含在您的应用程序主题中。为了包含那些额外的图标，您需要包含该行

```
@include pictos-iconmask(<YOUR_ICON>); 
```

在您的 app.scss 文件中，然后使用 COMPASS 编译主题。如果您完全不熟悉 Sencha Touch，我强烈建议您观看以下来自 SenchaCon 2011 的视频，了解如何为 ST 应用程序设置样式。

[http://docs.sencha.com/touch/2-1/#!/video/theming](http://docs.sencha.com/touch/2-1/#!/video/theming)

PS：请注意，“pictos-iconmask” mixin 仅适用于 ST < 2.2.0.alpha，因为从这个版本开始，由于集成了[Pictos 字体](http://pictos.cc/font/)，它已被弃用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:24:02.587

你需要利用`pictos`. 在此之前，您需要安装`Ruby`以及`Sass`和`Compass`。按照本教程添加新的图标蒙版：

[http://www.netmagazine.com/tutorials/styling-user-interface-sencha-touch-application](http://www.netmagazine.com/tutorials/styling-user-interface-sencha-touch-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:30:10.877

相机不能作为 iconCls 使用。支持以下图标（[见此处](http://docs.sencha.com/touch/2-1/#!/api/Ext.Button)）：

```
action
add
arrow_down
arrow_left
arrow_right
arrow_up
bookmarks
compose
delete
download
favorites
home
info
locate
maps
more
organize
refresh
reply
search
settings
star
team
time
trash
user 
```

为您自己的图标设置样式`@Andrea Cammarata`并查看`@user1479606`答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T04:59:58.480

如果要添加自定义图标（未在 pictos 中列出），请使用此 css 代替 somename name 使用您的名称作为图标

`.x-tab .x-button-icon.somename,.x-button .x-button-icon.x-icon-mask.somename{-webkit-mask-image:url('path-to-image/facebook-icon.png')}`

并将其用作

```
iconCls: 'somename', 
```

# ip - 两个域指向同一个IP地址

> ID：14121756
> 
> 赞同：0
> 
> 时间：2013-01-02T12:05:49.213
> 
> 标签：ip, cross-domain, subdomain, pagerank, inbound

我有域名喜欢`www.abc.in`并想购买`www.abc.com`。因为每个人都习惯了 .com 。如果两个域指向相同，我有点困惑，`IP address` 它会影响我的吗

1) Alexa 排名。2）页面排名。3) 入站和出站链接

如果您的回答是肯定的，请建议我如何解决此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:09:23.397

如果有人打开域，您可以重定向`www.abc.com`到它会自动打开。否则，如果您只想使用，那么您可以制作对 SEO 友好的，并且您的排名不会受到影响。不过，我个人更喜欢第一个`www.abc.in``.com``.in``.com``301 redirects`

# node.js - node.js http模块超时时如何发送响应

> ID：14121760
> 
> 赞同：2
> 
> 时间：2013-01-02T12:05:52.550
> 
> 标签：node.js, http, sockets, timeout

在 nodejs.org [socket.setTimeout 上](http://nodejs.org/api/all.html#all_socket_settimeout_timeout_callback)，它说

> 当触发空闲超时时，套接字将收到一个“超时”事件，但连接不会被切断。

但是当我测试这样的代码时：

```
var http = require('http');

server = http.createServer(function (request, response) {
    request.socket.setTimeout(500);
    request.socket.on('timeout', function () {
        response.writeHead(200, {'content-type': 'text/html'});
        response.end('hello world');
        console.log('timeout');
    });
});

server.listen(8080); 
```

超时后立即关闭套接字，不向浏览器回复任何数据。这与文档完全不同。这是一个错误还是在 http 模块下有任何处理套接字的技巧？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T14:11:31.007

该文档确实是正确的，但是看起来该`http`模块添加了一个“超时”侦听器，该侦听器调用`socket.destroy()`. 所以你需要做的是通过调用来摆脱那个监听器`request.socket.removeAllListeners('timeout')`。所以你的代码应该是这样的：

```
var http = require('http');

server = http.createServer(function (request, response) {
    request.socket.setTimeout(500);
    request.socket.removeAllListeners('timeout'); 
    request.socket.on('timeout', function () {
        response.writeHead(200, {'content-type': 'text/html'});
        response.end('hello world');
        console.log('timeout');
    });
});

server.listen(8080); 
```

# image - pygame旋转图像

> ID：14121761
> 
> 赞同：0
> 
> 时间：2013-01-02T12:05:53.673
> 
> 标签：image, rotation, pygame

我一直在尝试使我的炮塔正确旋转，但是，当我移动鼠标（导致旋转）时，炮塔会在油箱底座上方旋转，有人知道解决此问题的简单方法吗？帮助将不胜感激，请注意这是我第一次尝试 pygame

代码：

```
#Rotation
mousex,mousey = pygame.mouse.get_pos()
CalcHeight = cannonBase.y - mousey
CalcWidth = cannonBase.x - mousex
if CalcWidth == 0:
   CalcWidth = 1
CalcRot = CalcHeight/float(CalcWidth)
rot = math.degrees(math.atan(CalcRot))

OldCenter = cannonBase.center
rot_image,rot_rect = rot_center(cannon_original, cannonBase, rot)
cannonBaseStretchedImage = rot_image

#Rot_center
def rot_center(image, rect, angle):
     """rotate an image while keeping its center"""
     rot_image = pygame.transform.rotate(image, angle)
     rot_rect = rot_image.get_rect(center=rect.center)
     return rot_image,rot_rect 
```

（我第一次发帖，请告诉我我的帖子是否难以阅读或理解）

*添加图片

感谢您的快速回复，这里有 2 张图片（由于我的成绩太低，无法通过 stackoverflow 上传）

[http://imageshack.us/a/img266/606/prntscrnpygame.png](http://imageshack.us/a/img266/606/prntscrnpygame.png) http://imageshack.us/a/img507/3848/prntscrnpygame2.png

请注意，我很清楚旋转有点偏离，我只是想先修复位置，希望我们能解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:40:34.673

感谢您的电子邮件。您的问题是旋转中心已关闭。你必须做到这一点，使炮塔的中心是图像的确切中心。我会通过电子邮件将我的意思的图片发给你。

# jquery - 在knockoutjs中按回车键重新加载页面

> ID：14121763
> 
> 赞同：0
> 
> 时间：2013-01-02T12:05:58.527
> 
> 标签：jquery, html, knockout.js

我在表单标签内有自动完成的输入控件，如下所示：

```
 <input type="text" class="tags" data-bind="value: selectedMember(), event: { keypress: $root.DisablePostBack}" /> 
```

我为强制选择添加了模糊事件，如下所示：

```
$(function () {
        $('.tags').autocomplete({
            //make ajax call to get all mentored member of logged member
            source: function (request, response) {
                $.ajax({

                });
            },
            minlength: 0,
            focus: function () {
                // prevent value inserted on focus
                return false;
            },
            select: function (event, ui) {
                self.selectedMember(this.value);
                return false;
            }

        }).blur(
            function () {
                var terms = split(this.value);
                self.selectedMember(terms);
                return false;
            }
                ); 
```

当用户输入名称而不是从自动完成中选择成员并按回车键时，将调用模糊事件。我的问题是当我按回车键时，页面再次重新加载。按下回车键时如何防止页面重新加载。

*编辑：*要禁用回车键，我添加了一项功能，如下所示：

```
self.DisablePostBack = function (e) {
    if (e.which == 13) {
        return false;
    }
}; 
```

并在该文本框的按键上调用它。但在那之后按键不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:14:29.033

尝试使用类似的东西：

```
if((e.keyCode == 13) {// do something;
return false;} 
```

*e.keyCode == 13*将帮助您检查是否按下了 Enter，然后您可以执行一些您的代码，之后您必须返回 false 以防止浏览器发送数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:52:55.687

我已经用 keypress 事件替换了 blur 事件，并检查是否按下了 enter 键，如下所示：

```
.keypress(function (e) {
            if (e.which == 13) {
                //write code
            }
        }); 
```

现在它无需重新加载页面即可工作。我已经用按键替换了模糊，因为在 chrome 中按下输入键时不会调用模糊。

并感谢大家的有用建议。

# c# - 转换通用类型然后使用 Ref

> ID：14121764
> 
> 赞同：0
> 
> 时间：2013-01-02T12:05:59.233
> 
> 标签：c#, visual-studio-2010, generics

我需要澄清我的问题。

我有一个方法可以做到这一点：

```
public static void SetEntityValue<TEntity>(ref TEntity entityToTransform, PropertyHelper entityProperty)
{
   // create type from entity
   Type t = entityToTransform.GetType();
   // get the property to set
   var prop = t.GetProperty(entityProperty.Name);
   // set the property value to the one parsed
   prop.SetValue(entityToTransform, entityProperty.Value, null);
} 
```

`PropertyHelper`只包含两个属性，名称和值。

所以，我有一个采用通用类型的方法，然后需要初始化一个新类型并用值填充它的属性，这个方法会这样做吗：

```
TEntity ReadIntoEntity<TEntity>(TEntity entity, XElement node)
{
    if (!node.HasElements)
        throw new IllFormedDocumentException("Entity found but contains no properties");

    var xmlProps = node.Elements();

    Type t1 = entity.GetType();

    // the line which initialises a new TEntity same as string myString = new string();
    TEntity newEntity = Activator.CreateInstance<TEntity>();

    var props = t1.GetProperties();
    var readableProps = props.Select(x => new PropertyHelper(GenericHelper.GetEntityProperty(x), GenericHelper.GetEntityValueAsObject<TEntity>(entity, x)));

    List<string> foundAProp = new List<string>();

    foreach (var el in xmlProps)
    {
        // iterate through all xml elements

        foreach (var prop in readableProps)
        {
            // check the prop exists in the xml set

            // We found a prop that exists!
            if (el.Name.ToString() == prop.Name.ToString())
            {
                foundAProp.Add(prop.Name.ToString());

                GenericHelper.SetEntityValue<TEntity>(ref newEntity, prop);
            }
        }
    }

} 
```

这会像非泛型一样工作吗：

```
MyEntity ReadIntoEntity(XElement node)
{
    if (!node.HasElements)
        throw new IllFormedDocumentException("Entity found but contains no properties");

    var xmlProps = node.Elements();

    MyEntity newEntity = new MyEntity();

    var props = typeof(MyEntity).GetProperties();
    var readableProps = props.Select(x => new PropertyHelper(GenericHelper.GetEntityProperty(x), GenericHelper.GetEntityValueAsObject<TEntity>(entity, x)));

    List<string> foundAProp = new List<string>();

    foreach (var el in xmlProps)
    {
        // iterate through all xml elements

        foreach (var prop in readableProps)
        {
            // check the prop exists in the xml set

            // We found a prop that exists!
            if (el.Name.ToString() == prop.Name.ToString())
            {
                foundAProp.Add(prop.Name.ToString());

                GenericHelper.SetEntityValue<MyEntity>(ref newEntity, prop);
            }
        }
    }

} 
```

所以有效的是：

```
TEntity newEntity = Activator.CreateInstance<TEntity>(); 
```

相当于：

```
MyEntity newEntity = new MyEntity(); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:10:13.013

这种方法能做到吗？试试看。

然而：

```
TEntity newEntity = Activator.CreateInstance<TEntity>(); 
```

应该替换为

```
TEntity newEntity = new TEntity(); 
```

在为参数添加`new()`通用约束之后。这将添加编译时检查以确保实体具有有效的无参数构造函数。IE：

```
TEntity ReadIntoEntity<TEntity>(TEntity entity, XElement node)
    where TEntity : class, new()
{
    // ... 
```

并且您不需要`ref`在第一种方法中，假设您的所有实体都是`class`类型。

# android - 在 Android 应用程序中存储重新编码的 10000 行的最佳方法是什么？

> ID：14121765
> 
> 赞同：-4
> 
> 时间：2013-01-02T12:06:13.130
> 
> 标签：android, memory-management, sharedpreferences, android-sqlite

在应用程序中存储 10.000 行数据的正确方法是什么？据我所知Android有：

1.  内部存储器
2.  外部存储器
3.  存储的首选项
4.  SQLite 数据库

什么是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:23:34.957

哪个更好仅取决于数据**使用情况**。我们在磁盘上写入字节只是为了再次读取它们。您提到的四个地方，它们最终都会写入文件系统，但提供不同的 API 来访问数据，以及可能找到相关信息的不同机制。

每个选择都是一种权衡，各有利弊，如果不知道这 10K 行代表什么、如何使用它们、检索它们的频率以及通常的使用模式，就无法给出合理的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:09:44.310

**SQLite DB**将是您的最佳选择，因为您必须存储 100 条记录。

此外，如果您愿意，您可以将记录存储在一个**文件**中并将其保存在您的**Assest 文件夹**中，然后在安装应用程序之后，您可以将该文件复制到您的**SDCard**中。这对您来说也是不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:11:09.943

SQLite 绝对是比其他更好的选择

# java - 一个 EAR 的不同库的特定类加载器

> ID：14121766
> 
> 赞同：0
> 
> 时间：2013-01-02T12:06:37.547
> 
> 标签：java, jakarta-ee, classloader, war

我确实有一个耳朵，里面有一个战争。在 WEB-INF/lib 文件夹中的这个 WAR 中，我确实有一个 lib jar 列表。其中一些 lib jar 是自己的代码和一种插件。该插件通过新功能扩展了 WAR。使用 CDI 功能自动检测插件。

这么长时间一切正常。但是我花在这个插件上的工作越多，我就越想为多个插件提供一些通用代码，这些代码不是普通 EAR/WAR 通用代码的一部分。我也想有这个插件的不同版本（这个通用插件代码的不同版本）。

我的想法是，为每个插件都有一个特定的类加载器。这个类加载器应该首先尝试从这个插件 JAR 加载。如果在此 JAR 中找不到类/资源，则请求 EAR 的正常类加载器。

这个想法有什么解决方案吗？我可以为一个 JAR 定义一个特殊的类加载器吗？还是这个想法不好，你有更好的建议？

环境：

*   JBoss 7.1.1
*   JDK 1.6

# linux - 尝试在启用硬件监控的情况下加载 bootpimage 时出现内核恐慌错误

> ID：14121767
> 
> 赞同：1
> 
> 时间：2013-01-02T12:06:43.510
> 
> 标签：linux

当我从 makemenuconfig 启用硬件监控并尝试加载 bootpimage 时，出现以下错误。我们正在为基于 arm 的处理器执行此操作

内核恐慌 - 不同步：试图杀死 init！

# hadoop - 带有 mapreduce 的 hcatalog

> ID：14121769
> 
> 赞同：1
> 
> 时间：2013-01-02T12:06:53.287
> 
> 标签：hadoop, mapreduce, hive, hcatalog

执行 MapReduce 程序时出现以下错误。我已将所有 jars 放在 hadoop/lib 目录中，并且还提到了 -libjars 中的 jars。

这是我正在执行的 cmd：

```
$HADOOP_HOME/bin/hadoop --config $HADOOP_HOME/conf jar /home/shash/distinct.jar  HwordCount -libjars $LIB_JARS WordCount HWordCount2

java.lang.RuntimeException: java.lang.ClassNotFoundException: 
org.apache.hcatalog.mapreduce.HCatOutputFormat at 
org.apache.hadoop.conf.Configuration.getClass(Configuration.java:996) at 
org.apache.hadoop.mapreduce.JobContext.getOutputFormatClass(JobContext.java:248) at org.apache.hadoop.mapred.Task.initialize(Task.java:501) at 
org.apache.hadoop.mapred.MapTask.run(MapTask.java:306) at org.apache.hadoop.mapred.Child$4.run(Child.java:270) at 
java.security.AccessController.doPrivileged(Native Method) at 
javax.security.auth.Subject.doAs(Subject.java:415) at 
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127) at 
org.apache.hadoop.mapred.Child.main(Child.java:264) Caused by: java.lang.ClassNotFoundException: org.apache.hcatalog.mapreduce.HCatOutputFormat 
at java.net.URLClassLoader$1.run(URLClassLoader.java:366) at 
java.net.URLClassLoader$1.run(URLClassLoader.java:355) at 
java.security.AccessController.doPrivileged(Native Method) at 
java.net.URLClassLoader.findClass(URLClassLoader.java:354) at 
java.lang.ClassLoader.loadClass(ClassLoader.java:423) at 
sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) at 
java.lang.ClassLoader.loadClass(ClassLoader.java:356) at 
java.lang.Class.forName0(Native Method) at 
java.lang.Class.forName(Class.java:264) at 
org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:943) 
at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:994) ... 
8 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-23T17:42:35.103

确保 LIB_JARS 是一个逗号分隔的列表（而不是像 CLASSPATH 那样的冒号分隔）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T19:08:17.557

> 适用于 CDH 5.0.x CDH 5.1.x CDH 5.2.x CDH 5.3.x Sqoop
> 
> 原因 Sqoop 无法获取 HCatalog 库，因为 Cloudera Manager 未设置 HIVE_HOME 环境。需要手动设置。

使用以下 JIRA 跟踪此问题： [https ://issues.apache.org/jira/browse/SQOOP-2145](https://issues.apache.org/jira/browse/SQOOP-2145)

自 5.4.0 版以来，此 JIRA 的修复程序已包含在 CDH 中。

解决方法：适用于低于 5.4.0 的 CDH 版本。

在调用 Sqoop 命令或将它们添加到 /etc/sqoop/conf/sqoop-env.sh 之前，在 shell 中执行以下命令（如果它不存在，则创建一个）：

```
export HIVE_HOME=/opt/cloudera/parcels/CDH/lib/hive   (for parcel installation)
export HIVE_HOME=/usr/lib/hive (for package installation) 
```

# sdk - 通过三星 SDK 访问和修改默认电视字体大小

> ID：14121771
> 
> 赞同：0
> 
> 时间：2013-01-02T12:06:56.443
> 
> 标签：sdk, font-size, samsung-smart-tv, subtitle

有没有办法通过其 SDK 更改三星智能电视的最大字幕字体大小（用于电影播放）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:10:25.927

我知道这有点老了，但几天前我遇到了同样的问题，想分享我的经验。我猜你指的是电视上的隐藏字幕功能。如果您的视频有 608 个字幕，那么很遗憾您无法更改它。但如果它有较新的 708 字幕，那么您可以更改字体大小、颜色等。

希望这可以帮助。

# python - 从文本文件中读取虚线

> ID：14121774
> 
> 赞同：1
> 
> 时间：2013-01-02T12:07:23.850
> 
> 标签：python, file, iterator

如果我有这样的文本文件：

```
[001]This is line 1.
[002][too long]This is line 2 but it's Tooooo
oooo long!
[003]This is line 3. 
```

我写了一个'for line in fileA'来读取这个文件，比如：

```
for line in fileA:
    ... 
```

现在我需要在 line.find("[too long]")>=0 时合并当前行和下一行。我应该怎么做？

PS：我写道：

```
for line in fileA:
    if line.find("[too long]")>=0:
        loc = fileA.tell()
        fileB = open("file.txt") #open this file again
        fileB.seek(loc)
        line += fileB.readline().strip() 
```

但它没有用。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:10:23.747

额外读取文件听起来开销太大。试试这个：

```
with open('file.txt') as f:
    for line in f:
        if '[too long]' in line:
            line = line.rstrip('\r\n') + next(f)
        print line 
```

印刷

```
[001]This is line 1.

[002][too long]This is line 2 but it's Tooooooooo long!

[003]This is line 3. 
```

如果在一行`[too long]`中找到，则会附加以下行。也许您想追加所有其他行，直到一行以`[xxx]`?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:26:41.947

您可以使用列表推导将所有行添加到列表中，执行与 eumiros 答案非常相似的操作。

```
with open('file.txt') as f:
    lines = [line.rstrip('\r\n') + next(f) if '[too long]' in line else line for line in f] 
```

然后输出是：

```
>>> lines
    ['[001]This is line 1.\n', "[002][too long]This is line 2 but it's Tooooooooo long!\n", '[003]This is line 3.\n'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:22:40.140

我不确定实际文件的样子，但我可能会使用这样的[东西](http://ideone.com/Ng9Mpq)：

```
contents = """[001]This is line 1.
[002][too long]This is line 2 but it's Tooooo
oooo long!
[003]This is line 3.
"""

lines = iter( contents.split("\n") )

def fix_file( lines ):
    prev = ''
    number = 1
    for line in lines:
        if not line.startswith( '[{0:03d}]'.format( number ) ):
            prev += line
        else:
            yield prev
            number = number + 1
            prev = line
    yield prev

for line in fix_file( lines ):
    print line 
```

这样你就不需要额外的内容了。

# ant - 如何在 build.xml 中运行 Junit 文件

> ID：14121787
> 
> 赞同：0
> 
> 时间：2013-01-02T12:08:44.997
> 
> 标签：ant, junit, junit4, build.xml

我需要从 ant build.xml 运行一个 junit 文件，其中 junit 位于 testscripts 包中，而 junit 类已由位于另一个名为 supportlibraries 的包中的其他类扩展，现在介绍如何通过 build.xml 运行我的 junit

可以帮我吗谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:38:11.353

除了 Mark O'Connor 的建议之外，您还需要在 junit 任务中设置依赖项。

```
<junit ....> 
  <classpath>
     <pathelement path="testscripts" />
     <pathelement path="supportlibraries">
     <!-- Add other dependencies here. -->
  </classpath>
  <test name ="...">
  </test>
</junit> 
```

# python-2.7 - 使用漂亮的汤抓取数据时出现 html 标签问题

> ID：14121788
> 
> 赞同：1
> 
> 时间：2013-01-02T12:08:46.550
> 
> 标签：python-2.7, html-parsing, screen-scraping, beautifulsoup, html

常见的一段代码：

```
# -*- coding: cp1252 -*-
import csv
import urllib2
import sys
import time
from bs4 import BeautifulSoup
from itertools import islice

page = urllib2.urlopen('http://www.vodafone.de/privat/tarife/red-smartphone-tarife.html').read()
soup = BeautifulSoup(page)
prices = soup.findAll('div', {"class": "price"}) 
```

在此之后，我尝试使用以下代码来获取数据：代码 1：

```
for price in prices:
    print unicode(price.string).encode('utf8') 
```

输出 1：无输出，代码运行没有任何错误并且什么也不打印。

代码 2：

```
for price in prices:
    textcontent3= u' '.join(price.stripped_strings)
    if textcontent3:
        print textcontent3 
```

输出2：再次无输出，与输出1相同。

代码 3：

```
for price in prices:
    fonttag = price.find('div')
    if fonttag is not None:
        print unicode(fonttag.string).encode('utf8').strip() 
```

输出 3：无输出，与输出 1 相同

在此之后，我尝试打印 html 的相关部分：

代码 4：

```
print prices 
```

输出4：

```
</span></div>, <div class="price">
<span id="price"><br/>
</span></div>, <div class="price">
<span id="price"><br/>
</span></div>] 
```

从 Output4 中可以看出，html 漂亮的汤正在为我刮来没有价格价值。在网页上，此 html 结构如下所示：

```
<div class="price"><span id="price">49,90 €&lt;/span><br>einmalig</div> 
```

漂亮的汤没有提取 html 页面中提到的价格值，因此我无法抓取价格数据。请帮助我解决这个问题并原谅我的无知，因为我是编程新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:44:54.060

该页面使用大型 JavaScript 结构来加载价格。您可以仅加载该结构：

```
scripts = soup.find_all('script')
script = next(s.text for s in scripts if s.string and 'window.rates' in s.string)
datastring = script.split('phones=')[1].split(';window.')[0] 
```

这会产生一个庞大的 JavaScript 结构，从以下内容开始：

```
{sku844082:{name:"Samsung Galaxy SII",image:"/images/m677391_300468.jpg",deliveryTime:"Vorauss. verf&#252;gbar ab Anfang Januar",sku1444291:{p:"prod954312",e:"19.90"},sku1444286:{p:"prod954312",e:"19.90"},sku1444283:{p:"prod954312",e:"39.90"},sku1444275:{p:"prod954312",e:"59.90"},sku1104261:{p:"prod954312",e:"99.90"}},sku894279:{name:"BlackBerry Torch 9810",image:"/images/m727477_300464.jpg",deliveryTime:"Lieferbar innerhalb 48 Stunden",sku1444275:{p:"prod1004495",e:"179.90"},sku1104261:{p:"prod1004495",e:"259.90"},sku1444291:{p:"prod1004495",e:"29.90"},sku1444286:{p:"prod1004495",e:"29.90"},sku1444283:{p:"prod1004495",e:"49.90"}},sku864221:{name:"BlackBerry Bold 9900",image:"/images/m707491_300465.jpg",deliveryTime:"Lieferbar innerhalb 48 Stunden",sku1444275:{p:"prod974431",e:"129.90"},sku1104261:{p:"prod974431",e:"169.90"},sku1444291:{p:"prod974431",e:"49.90"},sku1444286:{p:"prod974431",e:"49.90"},sku1444283:{p:"prod974431",e:"89.90"}} 
```

`json`不幸的是，这不能直接用模块加载。尽管是有效的 JavaScript，但在没有引用键的情况下它不是有效的 JSON。您需要使用正则表达式来进一步清理它，或者`p:"someprice"`直接从该字符串中获取信息。

幸运的是，结构可以通过少量的正则表达式魔法来修复：

```
import re
import json

datastring = re.sub(ur'([{,])([a-z]\w*):', ur'\1"\2":', datastring)
data = json.loads(datastring) 
```

这为您提供了一个大字典，其中包含 SKU 键和带有嵌套字典的字典作为数据，包括带有`p`产品代码和`e`价格的嵌套 SKU：

```
>>> from pprint import pprint
>>> pprint(data['sku864221'])
{u'deliveryTime': u'Lieferbar innerhalb 48 Stunden',
 u'image': u'/images/m707491_300465.jpg',
 u'name': u'BlackBerry Bold 9900',
 u'sku1104261': {u'e': u'169.90', u'p': u'prod974431'},
 u'sku1444275': {u'e': u'129.90', u'p': u'prod974431'},
 u'sku1444283': {u'e': u'89.90', u'p': u'prod974431'},
 u'sku1444286': {u'e': u'49.90', u'p': u'prod974431'},
 u'sku1444291': {u'e': u'49.90', u'p': u'prod974431'}} 
```

# vbscript - 用于检查文件夹是否存在然后运行文件的 Vbs 脚本

> ID：14121790
> 
> 赞同：9
> 
> 时间：2013-01-02T12:08:52.277
> 
> 标签：vbscript, filesystems

您好，我是新来的，我需要一个脚本来检查文件夹是否存在，然后从该文件夹中运行一个文件。如果没有，它应该将 ZIP 文件提取到特定位置。提前致谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-02T12:18:52.813

```
'Objects
Set fso = CreateObject("Scripting.FileSystemObject")
Set shl = CreateObject("WScript.Shell")

path="C:\SomeFolderToExist\" 'path to folder    
exists = fso.FolderExists(path)

if (exists) then 
    program="myprog.exe" 'Program name to run
    shl.Run(path & program) 'Run a program
end if 
```

对于解压，我只能告诉你看这个：[Extract files from ZIP file with VBScript](https://stackoverflow.com/questions/291406/extract-files-from-zip-file-with-vbscript)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-07-17T17:54:58.690

```
Dim FILE, tmpfilepath, uniqueid As String
    uniqueid = Row.uniqueid
    tmpfilepath = "G:\Files\" + uniqueid
    If System.IO.Directory.Exists(tmpfilepath) Then
          do something
              Else
        System.IO.Directory.CreateDirectory(tmpfilepath)

    End If 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-10-01T13:39:29.757

如果我理解正确：创建一个脚本：`sudo vim script.sh`

```
#!/bin/bash
    echo "enter your path"
    read path

    if [[ -d "$path"  ]]
            then
            echo $(sudo $path/yourprograme)
            else
            echo "enter your specific location"
            read spec
            $ mkdir -p $spec
            $ unzip yourfiles.zip -d $spec

            fi 
```

运行 scrip.sh ：`sudo ./script.sh`

# datetime - Unitils 数据集 - 插入 sybase 日期时间列

> ID：14121793
> 
> 赞同：1
> 
> 时间：2013-01-02T12:09:02.920
> 
> 标签：datetime, dataset, sybase, unitils

我有一个 unitils 数据集试图将数据输入到 sybase datetime 列中，但是当我尝试运行单元测试时它会出错。

我在网上找不到任何有关插入日期的信息，因此我尝试以与其他列相同的方式将其声明为字符串，但出现错误：

```
org.unitils.core.UnitilsException: Error inserting test data from DbUnit dataset for method etc etc
    at org.unitils.dbunit.DbUnitModule.insertDataSet(DbUnitModule.java:156)
    at org.unitils.dbunit.DbUnitModule$DbUnitListener.beforeTestSetUp(DbUnitModule.java:556)
    at org.unitils.core.Unitils$UnitilsTestListener.beforeTestSetUp(Unitils.java:273)
    at org.unitils.UnitilsJUnit4TestClassRunner$TestListenerInvokingMethodRoadie.runBeforesThenTestThenAfters(UnitilsJUnit4TestClassRunner.java:151)
    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)
    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
    at org.unitils.UnitilsJUnit4TestClassRunner.invokeTestMethod(UnitilsJUnit4TestClassRunner.java:95)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:61)
    at org.unitils.UnitilsJUnit4TestClassRunner.access$000(UnitilsJUnit4TestClassRunner.java:44)
    at org.unitils.UnitilsJUnit4TestClassRunner$1.run(UnitilsJUnit4TestClassRunner.java:62)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
    at org.unitils.UnitilsJUnit4TestClassRunner.run(UnitilsJUnit4TestClassRunner.java:68)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.unitils.core.UnitilsException: Error while executing DataSetLoadStrategy
    at org.unitils.dbunit.datasetloadstrategy.impl.BaseDataSetLoadStrategy.execute(BaseDataSetLoadStrategy.java:46)
    at org.unitils.dbunit.DbUnitModule.insertDataSet(DbUnitModule.java:230)
    at org.unitils.dbunit.DbUnitModule.insertDataSet(DbUnitModule.java:153)
    ... 18 more
Caused by: org.dbunit.dataset.datatype.TypeCastException: Error casting value for table 'USER' and column 'SUSPEND_SD'
    at org.dbunit.operation.AbstractBatchOperation.execute(AbstractBatchOperation.java:202)
    at org.dbunit.operation.CompositeOperation.execute(CompositeOperation.java:78)
    at org.unitils.dbunit.datasetloadstrategy.impl.CleanInsertLoadStrategy.doExecute(CleanInsertLoadStrategy.java:45)
    at org.unitils.dbunit.datasetloadstrategy.impl.BaseDataSetLoadStrategy.execute(BaseDataSetLoadStrategy.java:44)
    ... 20 more 
```

在我的数据集中插入日期的唯一行是：

```
<USER ID="4" FULL_NAME="user3" SUSPEND_SD="25/12/2011 00:00" SUSPEND_ED="25/12/2013 00:00" PASSWORD="password3"/> 
```

任何人都可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:43:03.517

Ok, it turns out it has to be in exactly the format YYYY-MM-DD HH:MM:SS", for example "2011-01-01 02:00:00".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:04:08.547

我不知道 unitils 是如何工作的，但假设您的数据集是可编辑的，为什么不将日期更改为 yyyy/mm/dd 格式。

该 java 堆栈提到了强制转换，我认为将 dd/mm/yyyy 转换为 datetime 将是失败的。

或者，中间件可能有一些日期配置方式 - 你可能会告诉它日期是英国的（它甚至可能是区域设置？）

# asp.net-mvc-4 - MVC4 - 缺少 AuthConfig.cs

> ID：14121795
> 
> 赞同：0
> 
> 时间：2013-01-02T12:09:05.647
> 
> 标签：asp.net-mvc-4, dotnetopenauth

我正在尝试开始使用 MVC4 的 OpenAuth 功能，如下所述：

[http://pluralsight.com/training/Player?author=scott-allen&name=mvc4-building-m7-security&mode=live&clip=9&course=mvc4-building](http://pluralsight.com/training/Player?author=scott-allen&name=mvc4-building-m7-security&mode=live&clip=9&course=mvc4-building)

为了不错过任何东西，我已经重新开始了几次，但是即使我选择了正确的模板（Internet 应用程序），也没有 AuthConfig.cs。

我也找不到文档如何手动完成所需的任务。我很确定这是一个非常愚蠢的问题，但也许我找不到答案，因为它是如此明显...... thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:38:36.793

我按照以下步骤操作：

打开文件/新建/项目

选择 ASP.NET MVC 4 Web 应用程序

然后选择互联网应用程序

创建项目后，App_Start 文件夹中应该有一个 AuthConfig.cs 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:52:41.700

难以置信.. 我使用了 Visual Studio 的 RC 版本，即使我从头开始重新安装 MVC4，包括 openauth 扩展在内的最新版本也不能正确使用。

遵循常规 Visual Studio 安装的相同步骤就可以了...

# c# - 堆栈空异常

> ID：14121799
> 
> 赞同：7
> 
> 时间：2013-01-02T12:09:27.860
> 
> 标签：c#, multithreading, visual-studio-2012, stack, fifo

我得到一个堆栈空异常。如果堆栈不为空（它有 16 个项目），这怎么可能？

我得到了错误的快照：

![堆栈空异常](../Images/896ea55972d67c9d37c7e378600cb1b1.png)

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T12:18:45.470

**使用**类似`Stack<T>`. _ 最简单的方法是使用`lock`，然后您也可以将`lock`用于同步本身；所以流行会是：

```
int item;
lock (SharedMemory)
{
    while (SharedMemory.Count == 0)
    {
        Monitor.Wait(SharedMemory);
    }
    item = SharedMemory.Pop();
}
Console.WriteLine(item); 
```

和推动将是：

```
lock (SharedMemory)
{
    SharedMemory.Push(item);
    Monitor.PulseAll(SharedMemory);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T12:15:02.443

> 堆栈怎么可能已满并且有 16 个项目？？！

在多线程环境中这是很有可能的。

你在你的程序中使用了多个线程吗？如果是，`SharedMemory`则应在对其`lock`进行任何更改之前进行编辑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T12:18:33.330

如果`SharedMemory`是`Stack`, 并且因为您使用的是多线程并且如果您使用的是 .Net 4 。你应该使用：[ConcurrentStack](http://msdn.microsoft.com/en-us/library/dd267331.aspx)

**编辑**

在我的第一次编辑和**Quartermeister**的精彩评论之后，这是一个更简单的工作解决方案：

```
 int item;
    var SharedMemory = new BlockingCollection<int>(new ConcurrentStack<int>());
    // later in the Consume part
    item = SharedMemory.Take(); // this will block until there is an item in the list
    Console.WriteLine(item); 
```

# c# - 查询字符串不会映射到动作视频模式？

> ID：14121801
> 
> 赞同：0
> 
> 时间：2013-01-02T12:09:29.473
> 
> 标签：c#, .net, asp.net-mvc, query-string, viewmodel

我有以下控制动作：

```
public ActionResult List(ListPostViewModel data)
{
     return View(data);
} 
```

ViewModel 看起来像这样：

```
public class ListPostViewModel
    {
        public ListPostViewModel()
        {
            PLS = new PostListSettings();
        }

        public PostListSettings PLS;
    } 
```

这是 ViewModel 的另一部分：

```
public class PostListSettings
    {
        public PostListSettings()
        {
            P = 1;
            CP = int.Parse(ConfigurationManager.AppSettings["AmountOfPostsPerPage"].ToString());
        }

        /// <summary>
        /// Amount of ads on one page
        /// </summary>
        public int CP { get; set; }
        /// <summary>
        /// CurrentPage
        /// </summary>
        public int P { get; set; }
    } 
```

在以前的项目中，我可以发送这样的 URL：`http://MyComputer/?PLS.P=2`并将 ListPostViewModel.PLS.P 设置为 2，但它在我的新 ASP.NET MVC 4 解决方案中不起作用？为什么？

我得到的唯一溃败是默认的：

```
routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Post", action = "List", id = UrlParameter.Optional }
            ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:41:06.380

像这样更改`PostListSettings`to 属性：

```
public class ListPostViewModel
{
    public ListPostViewModel()
    {
        PLS = new PostListSettings();
    }

    public PostListSettings PLS { get; set; }
} 
```

# php - 在 jmultiselect2side yii 扩展中，更新数据后我看不到所选列表

> ID：14121802
> 
> 赞同：1
> 
> 时间：2013-01-02T12:09:38.677
> 
> 标签：php, jquery, yii, yii-extensions

我正在使用`jmultiselect2side yii`扩展，我没有发现该选项会显示更新的选定列表，代码示例是：

```
$this->widget('application.extensions.jmultiselect2side.Jmultiselect2side',array(
                'model'=>$model,
                'attribute'=>'gossip_id', //selected items
                'labelsx'=>'Disponible',
                'labeldx'=>'Gossip Selected',
                'moveOptions'=>false,
                'autoSort'=>'true',
                'search' =>'Search:',
                'list'=>CHtml::listData(            // available items
                   $gossips,
                   'gossip_id',
                   'gossip_name'),
            )); 
```

在行动更新中，无法看到更新的列表（选定项目），请帮助我

# reporting-services - 自定义报告项未显示在 Web 浏览器中

> ID：14121804
> 
> 赞同：1
> 
> 时间：2013-01-02T12:10:07.663
> 
> 标签：reporting-services

我按照这些 MSDN 页面上列出的步骤进行操作：

*   [创建自定义报告项运行时组件](http://msdn.microsoft.com/en-us/library/ms345254.aspx)
*   [创建自定义报表项设计时组件](http://msdn.microsoft.com/en-us/library/ms345225.aspx)
*   [如何：部署自定义报告项](http://msdn.microsoft.com/en-us/library/ms345230.aspx)

我现在有一个自定义报表项，它在 Visual Studio 2010 中运行良好，但在 Web 浏览器中呈现报表时没有显示。Windows 事件日志说：

> “报表服务器 (MSSQLSERVER12) 无法加载 CRITest 扩展。”

CRITest 是我给我的 CRI 起的名字。

我在 Visual Studio 2008 中开发了相同的对象，因为我认为 SSRS 2012 不支持 .NET 4.0（在 ReportingServicesService.exe.config 中你会发现 SupportedRuntime=2.0）。结果：无法将对象放入使用 Visual Studio 2010 开发的报表中，因为 Reporting Services 所需的 Common7/IDE/PrivateAssmblies 有另一个版本号。

有没有人有好的建议？

# php - 使用类别 ID 在产品视图上使用分页

> ID：14121805
> 
> 赞同：0
> 
> 时间：2013-01-02T12:10:10.223
> 
> 标签：php, mysql, pagination

我觉得我最近问了很多问题，如果这相对简单，我很抱歉，但我正在努力让它正常工作。

我想在我的产品视图中添加分页，但是当我添加页面底部的分页编号代码时，它们没有显示。

我也知道我应该使用 mysqli 但我想在移动之前先让它工作。

谢谢。

**展示产品**

```
 <div class="link" style="width:100%; height:100%; background-color: white">
<?php
include("../script/dbconnect.php");
include("../script/get_product.php");

$posts = get_posts(null, $_GET['id']); 

foreach ( $posts as $post ) {
    if ( ! category_exists('name', $post['name']) ) {
        $post['name'] = 'Uncategorised';
    }
    ?>  
    <ul class='featured'>

            <li class='headhighlight'><?php echo $post['title']; ?></li>  
            <li class='pricehigh'><?php echo $post['price']; ?></li>
            <li class='imagefeat'><img class='imagelink' src='<?php echo $post['picture']; ?>' alt='$name'></li>                
            </ul>   

<?php
    }
?>

    </div> 
```

**get_product.php**

```
 <?php
    function get_posts($id = null, $cat_id = null) {
    $posts = array();

//Pagination Code
    $perpage = 10;
     if(isset($_GET["page_num"]))
     {
      $page_num = intval($_GET["page_num"]);
     }
     else
     {
      $page_num = 1;
     }
     if ($page_num < 1)
     {
       $page_num = 1;
     }
     $calc = $perpage * $page_num;
     $start = $calc - $perpage;

//End pagination code

        $query ="SELECT  `products`.`id` AS  `name` ,  `products_cat`.`id` AS  `category_id` , `products`.`name` AS `title` ,  `description` ,  `price` ,  `sale` ,  `picture` 
    FROM  `products` 
    INNER JOIN  `products_cat` ON  `products`.`prod_id` =  `products_cat`.`id` ";

        if ( isset($id) ) {
        $id = (int) $id;
        $query .= " WHERE `products`.`id` = {$id}";
        }

        if ( isset($cat_id) ) {
            $cat_id = (int) $cat_id;
            $query .= " WHERE `products_cat`.`id` = {$cat_id}";
    }

        $query .= " ORDER BY `products`.`price` DESC Limit $start, $perpage";

        $query = mysql_query($query);
        echo mysql_error();
        while ( $row = mysql_fetch_assoc($query) ) {
            $posts[] = $row;
            }

        return $posts;
    } 
```

**分页代码 - 添加页码 - 将放置在 showproduct.php**

```
<p class="pagination">
<?php
    if(isset($page_num))
    {
        $result = mysql_query("SELECT COUNT(*) As Total FROM products");
        $rows = mysql_num_rows($result);
        if($rows)
        {
            $rs = mysql_fetch_array($result);
            $total = $rs["Total"];
        }
        $totalPages = ceil($total / $perpage);
        if($page_num <=1 )
        {
            echo '<span id="page_links" style="font-weight:bold;"> < </span>';
        }
        else
        {
            $j = $page_num - 1;
            echo '<span><a id="page_a_link" href="../admin/admin.master.php?page=list_products.php&page_num=' . $j . '"> < </a></span>';
        }
        for($i=1; $i <= $totalPages; $i++)
        {
            if($i<>$page_num)
            {
                echo '<span><a href="../admin/admin.master.php?page=list_products.php&page_num=' .$i. '" id="page_a_link">' . $i . '</a></span>';
            }
            else
            {
                echo '<span id="page_links" style="font-weight:bold;">' . $i . '</span>';
            }
        }
        if($page_num == $totalPages )
        {
            echo '<span id="page_links" style="font-weight:bold;">Next ></span>';
        }
        else
        {
            $j = $page_num + 1;
            echo '<span><a href="../admin/admin.master.php?page=list_products.php&page_num=' .$j. '" id="page_a_link"> > </a></span>';
        }
    }
?>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:15:47.900

```
$posts = get_posts(null, $_GET['id']);
$result = mysql_query($posts); 
```

在`get_posts`函数中，您将此变量声明为数组，从查询结果中填充它，然后返回它......所以它永远不会工作。你想在这里做什么？您必须使用正确的 MySQL 查询结构将字符串传递给 mysql_query 函数。

编辑：添加出现问题的代码部分，以及可能的修复。

```
$posts = get_posts(null, $_GET['id']);

  $i = 0;
foreach ($posts as $post){
   .... 
```

它是这样工作的吗？您已经在 get_posts 函数中使用 LIMIT 进行了查询并返回了数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:17:04.217

```
$posts = get_posts(null, $_GET['id']); 
```

返回数组，一些东西。之后，您尝试制作 mysql_query(array); 尝试制作

```
var_dump($posts); and copy print here. Or try next: 
$posts = get_posts(null, $_GET['id']);
foreach($posts as $post){
$result[] = mysql_query($posts);
} 
```

# spring - 在少数 Web 应用程序之间共享安全上下文

> ID：14121810
> 
> 赞同：7
> 
> 时间：2013-01-02T12:10:29.263
> 
> 标签：spring, security, web

我需要有一个 Web 应用程序，它实际上由几个单独的战争统一到 UI 上的同一个导航栏组成，我需要保护所有系统，但只对主 Web 应用程序进行身份验证，并且在此安全上下文自动传播到子 Web 应用程序之后。我正在使用spring security，有人可以帮我建议吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-23T12:02:05.307

这可以通过以下方法来实现。在 Spring 中，`SecurityContext`默认情况下存储在`HttpSession`. 相反，您可以将其配置为存储在某个共享存储库中。

因此，应该更改配置以使用您自己的`SecurityContextRepository`实现而不是`HttpSessionSecurityContextRepository`. 配置完成后，安全框架将查看`Repository`可用于所有 Web 应用程序的内容。

`Repository`可以是数据库或缓存服务器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T12:35:50.557

Spring Security 将登录数据存储在 http 会话中。所以我会尝试在应用程序之间共享会话。

通过使用[Single Sing On](http://tomcat.apache.org/tomcat-6.0-doc/config/host.html#Single%20Sign%20On)属性，这似乎是可能的（在 Tomcat 中）。

但请注意，在两个应用程序之间共享会话并非没有危险。请参阅[此堆栈溢出问题](https://stackoverflow.com/questions/665941/any-way-to-share-session-state-between-different-applications-in-tomcat)。

# c# - 在fancybox内提交时将父页面重定向到指定的url

> ID：14121813
> 
> 赞同：1
> 
> 时间：2013-01-02T12:10:48.920
> 
> 标签：c#, jquery, asp.net, fancybox

我正在使用fancybox，在提交表单后，我想将我的父页面重定向到某个指定的网址，我正在使用fancybox，如下所示

```
$(document).ready(function () {
            $('[id*=addnewRequest]').fancybox({
                'width': 760,
                'height': 540,
                'padding': 0,
                'margin': 0,
                'hideOnOverlayClick': false,
                'scrolling': 'auto',
                'autoScale': false,
                'transitionIn': 'none',
                'transitionOut': 'none',
                'type': 'iframe',
                'centerOnScroll': true,
                'onClosed': function () {

                    if ($.redirTo != null && $.redirTo.length > 0){

                        window.location.replace($.redirTo);
                    }

                    else {
                        parent.location.reload(true);
                    }
                }
            });
        }); 
```

在提交我的表单后，我正在使用下面的注册脚本，其中“redirectTo”是我希望我的父页面重定向的 url

```
ScriptManager.RegisterStartupScript(this.Page, typeof(Page), "add", "parent.jQuery.redirTo='" + redirectTo + "'; parent.jQuery.fancybox.close();", true); 
```

现在我的父页面将如何重定向到特定的 url。知道吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:18:49.057

提交表单后，您可以`window.top.location.href`使用新的 url 直接调用：

```
window.top.location.href = "http://www.urltogo.com/pagetomove.aspx"; 
```

并避免在父节点上发送参数并从那里进行重定向。

这是一个示例（我添加了 5 秒延迟以便有时间查看）

[http://jsfiddle.net/u6whQ/3/](http://jsfiddle.net/u6whQ/3/) 或 [http://jsfiddle.net/u6whQ/4/](http://jsfiddle.net/u6whQ/4/)

您的线路可能如下：

```
ScriptManager.RegisterStartupScript(this.Page, typeof(Page), "add", "window.top.location.href ='" + redirectTo + "'; parent.jQuery.fancybox.close();", true); 
```

# database - 如果 heroku pg 输出显示零表，我的 Rails 应用程序在哪里保存数据？

> ID：14121814
> 
> 赞同：0
> 
> 时间：2013-01-02T12:10:59.550
> 
> 标签：database, postgresql, ruby-on-rails-3, heroku

我创建了我的第一个 Rails 应用程序，它有一个免费的 :dev: 数据库。我花了 50 美元购买了一个 Crane 数据库并删除了我的开发数据库。

运行`heroku pg`命令：

```
=== HEROKU_POSTGRESQL_NAVY_URL
Plan:        Crane
Status:      available
Data Size:   5.9 MB
Tables:      0
PG Version:  9.1.6
Connections: 3
Fork/Follow: Available
Created:     2012-12-17 21:46 UTC
Maintenance: not required 
```

奇怪的是，如果我运行`heroku run rake db:migrate`它运行良好，但`heroku pg` **仍**显示 0 表计数，并且应用程序本身的数据显示我的 :dev: 数据库中的旧数据。

有什么建议么？我怎么能告诉 Heroku，`Please use this database as the default from now on?`

此外，如果`heroku pg`只显示 1 个数据库，并且该数据库有零个表，我的应用程序从哪里获取它当前显示的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:22:39.097

基本上，我不得不将我的 Crane 数据库推广为我的 Rails 应用程序将使用的默认数据库。Heroku 上的 Rails 应用程序使用名为`DATABASE_URL`.

所以首先，我运行这个命令来获取我需要提升的数据库的名称：

```
heroku pg

=== HEROKU_POSTGRESQL_NAVY_URL
Plan:        Crane
Status:      available
Data Size:   5.9 MB
Tables:      0
PG Version:  9.1.6
Connections: 3
Fork/Follow: Available
Created:     2012-12-17 21:46 UTC
Maintenance: not required 
```

然后我运行了提升命令：

```
heroku pg:promote HEROKU_POSTGRESQL_NAVY_URL 
```

最后，由于这是现在的默认数据库，我可以对我的 Crane 数据库运行迁移：

```
heroku run rake db:migrate 
```

# mercurial - 在 IntelliJ 的更改窗口中仅显示当前项目的根文件夹

> ID：14121821
> 
> 赞同：0
> 
> 时间：2013-01-02T12:11:30.537
> 
> 标签：mercurial, intellij-idea

我所有的项目都包含在同一个（Mercurial）存储库中，因为这些项目相当小。所以我有这个文件夹“工作区”，其中包含其他文件夹“项目 A”、“项目 B”等。还有“.hg”文件夹。

在 IntelliJ 中，“更改窗口”显示来自所有项目的所有未提交的更改。如果我打开“项目 A”，它还会显示“项目 B”的更改，反之亦然。但我只想查看当前项目文件夹的那些未提交的更改。

有没有什么设置可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:46:30.770

Changes 视图始终显示与项目关联的 VCS 根目录下的所有更改。您可以使用“按目录分组”按钮将项目 A 和项目 B 下的更改分开。

# php - 我可以使用 .htaccess 将完整的 REQUEST_URI 保存在变量中吗？

> ID：14121822
> 
> 赞同：0
> 
> 时间：2013-01-02T12:11:41.497
> 
> 标签：php, apache, .htaccess

我对 .htaccess 有一点问题：使用这段代码，

```
SetEnvIfNoCase Request_URI ^(.*)$ TEST=$1 
```

`/index.php`即使我的 URL（被重写）是别的东西，TEST 也会给我。

例如：

```
// URL: http://www.example.com/us_en/module/controller/
echo $_SERVER['TEST']; // returns /index.php
echo $_SERVER["REQUEST_URI"]; // returns /us_en/module/controller/ 
```

我希望 TEST 在 REQUEST_URI 中拥有来自 .htaccess 而不仅仅是 .htaccess 的完整路径`/index.php`。

我知道这可能是由重写条件中的某些原因引起的，所以我将向您展示我所拥有的：

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteRule ^api/rest api.php?type=rest [QSA,L]
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
RewriteRule .* - [L,R=405]
RewriteCond %{REQUEST_URI} !^/(media|skin|js)/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule .* index.php [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:47:42.973

尝试其中之一：

```
SCRIPT_NAME=/sw/lib/w3s/tree/global/u/rse/.www/index.html
SCRIPT_FILENAME=/u/rse/.www/index.html
SCRIPT_URL=/u/rse/
SCRIPT_URI=http://en1.engelschall.com/u/rse/ 
```

这些是[环境变量](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#EnvVar)。

它们也应该在 PHP 的`$_SERVER`超全局中可用。

# android - 日历活动管理

> ID：14121825
> 
> 赞同：1
> 
> 时间：2013-01-02T12:12:20.310
> 
> 标签：android, calendar

我想问一个关于在中创建`Events`via `Calender`(Native) 的问题`Android`

这是场景：-

在我的应用程序的帮助下，我正在打开 Android 的默认日历以创建日历事件。但是在这里我遇到了一个问题-**如何区分我的应用程序创建的事件或其他事件（默认创建的 Android 应用程序）**

我目前没有可分享的代码。需要一个好的或相关的链接。请帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:27:51.953

没有直接的方法可以访问它，但是，[`CalendarContract class`](http://developer.android.com/reference/android/provider/CalendarContract.html)您可以使用`Intent.ACTION_VIEW`

```
Intent intent = new Intent(Intent.ACTION_VIEW);
//calendarEventID is unique ID returned stored in the contentprovider.
intent.setData(Uri.parse("content://com.android.calendar/events/" + String.valueOf(calendarEventID)));
startActivity(intent); 
```

要获取符合您要求的事件的唯一 _id，您可以使用 SQLITE 数据库将其保存在您的应用程序中。

1.  [BaseColumns 开发者文档](http://developer.android.com/reference/android/provider/BaseColumns.html#_ID)
2.  [日历合同事件](http://developer.android.com/reference/android/provider/CalendarContract.Events.html)

# ios - 显示从当前点到从数组中获取的所需点的直线路线

> ID：14121831
> 
> 赞同：-1
> 
> 时间：2013-01-02T12:12:33.377
> 
> 标签：ios, mkmapview

我想在我的应用程序中创建一个功能，通过它我可以从当前位置绘制一条线到所需的浮点值坐标。请建议我做同样的最好的有效方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:43:12.577

我对所有 ios 的问题都有答案，如下

// 使用地理编码器显示方向... ***** - (void)showDirection:(id)sender

```
{
    NSString *deviceVersion   = [[UIDevice currentDevice] systemVersion];
    NSLog(@"My Device version is :%@ ",deviceVersion);

    //*********  For ios 6 supporting devices  *********
    if ([deviceVersion isEqualToString:@"6.0"])
    {

        Class itemClass = [MKMapItem class];
        if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {

            CLGeocoder *geocoder = [[CLGeocoder alloc] init];
            CLLocation *newLocation = [[CLLocation alloc]initWithLatitude:getLatitude
                                                                longitude:getLongitude];

            [geocoder reverseGeocodeLocation:newLocation
                           completionHandler:^(NSArray *placemarks, NSError *error) {

                               MKPlacemark *placeMark = [[MKPlacemark alloc] initWithPlacemark:[placemarks objectAtIndex:0]];

                               MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:placeMark];

                               MKMapItem *mapItem2 = [MKMapItem mapItemForCurrentLocation];

                               NSArray *mapItems = @[mapItem, mapItem2];

                               NSDictionary *options = @{
                           MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving,
                           MKLaunchOptionsMapTypeKey:
                               [NSNumber numberWithInteger:MKMapTypeStandard],
                           MKLaunchOptionsShowsTrafficKey:@YES
                               };

                               [MKMapItem openMapsWithItems:mapItems launchOptions:options];

                           }         ];
        }
        else
        {
            UIAlertView *errorAlert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Failed to Get Your Location"delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [errorAlert show];

        }
    }
    //*********  For other ios supporting devices  *********
    else {

        MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
        region.center.latitude = getLatitude;
        region.center.longitude = getLongitude;

        MKCoordinateRegion currentRegion = { {0.0, 0.0 }, { 0.0, 0.0 } };
        currentRegion.center.latitude = currentLatitude;
        currentRegion.center.longitude = currentLongitude;

        region.span.longitudeDelta = 4.0f;
        region.span.latitudeDelta = 4.0f;
        currentRegion.span.longitudeDelta = 4.0f;
        currentRegion.span.latitudeDelta = 4.0f;

        CLLocationCoordinate2D start = { currentRegion.center.latitude, currentRegion.center.longitude };
        CLLocationCoordinate2D destination = { region.center.latitude, region.center.longitude };

        NSString *googleMapsURLString = [NSString stringWithFormat:@"http://maps.google.com/?saddr=%1.6f,%1.6f&daddr=%1.6f,%1.6f",start.latitude, start.longitude, destination.latitude, destination.longitude];

        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:googleMapsURLString]];

    }

} 
```

# scala - 实现弱引用的 Eventbus 参与者？

> ID：14121833
> 
> 赞同：6
> 
> 时间：2013-01-02T12:12:38.460
> 
> 标签：scala, akka

说未引用的演员仍然订阅事件流是否正确？至少，这是我从 Akka 实验中得到的……

我正在尝试在 EventBus 场景中为参与者实现弱引用。在这些情况下，事件侦听器/参与者通常来来去去。与应该一直在场的独立演员不同。当然，显式注销确实有效。但我并不总是能够感知到正确的时机来做这件事。

Akka 是否提供这种用例？

```
val as = ActorSystem.create("weak")
var actor = as.actorOf(Props[ExceptionHandler])
as.eventStream.subscribe(actor,classOf[Exception])

// an event is published & received
as.eventStream.publish(new KnownProblem)

//session expires or whatever that makes the actor redundant
actor = null
(1 to 30).foreach(_ => System.gc)

// an event is published & STILL received
as.eventStream.publish(new KnownProblem) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:13:24.447

好的，我实际上无法实现它，但演员正在 GC 上停止。使用 Scala 2.9.2 (REPL) + Akka 2.0.3。

`EventBus`with`WeakReference[ActorRef]`没有帮助——因为在 Akka 中你也有一个with `dungeon`( `ChildrenContainer`) `self.children`，也可以`Monitor`订阅生命周期事件。我没有尝试过的事情 - 使用只知道我们新闪亮的调度程序创建演员`WeakEventBus`- 所以也许我错过了重点？

下面是 REPL 的代码（从适当的导入开始，`:paste`分两步）：

```
// Start REPL with something like:
// scala -Yrepl-sync -classpath "/opt/akka-2.0.3/lib/akka/akka-actor-2.0.3.jar:
// /opt/akka-2.0.3/lib/akka/akka-remote-2.0.3.jar:
// /opt/akka-2.0.3/lib/akka/config-0.3.1.jar:
// /opt/akka-2.0.3/lib/akka/protobuf-java-2.4.1.jar:
// /opt/akka-2.0.3/lib/akka/netty-3.5.3.Final.jar"

// :paste 1/2
import akka.actor._
import akka.pattern._
import akka.event._
import akka.util._
import com.typesafe.config.ConfigFactory
import akka.util.Timeout
import akka.dispatch.Await
import scala.ref.WeakReference
import java.util.Comparator
import java.util.concurrent.atomic._
import java.util.UUID

case class Message(val id:String,val timestamp: Long)
case class PostMessage(
  override val id:String=UUID.randomUUID().toString(), 
  override val timestamp: Long=new java.util.Date().getTime(), 
  text:String) extends Message(id, timestamp)  
case class MessageEvent(val channel:String, val message:Message)

case class StartServer(nodeName: String)
case class ServerStarted(nodeName: String, actor: ActorRef) 
case class IsAlive(nodeName: String)
case class IsAliveWeak(nodeName: String)
case class AmAlive(nodeName: String, actor: ActorRef)
case class GcCheck()
case class GcCheckScheduled(isScheduled: Boolean, 
  gcFlag: WeakReference[AnyRef])

trait WeakLookupClassification { this: WeakEventBus ⇒
protected final val subscribers = new Index[Classifier, 
  WeakReference[Subscriber]](mapSize(), 
    new Comparator[WeakReference[Subscriber]] {
          def compare(a: WeakReference[Subscriber], 
        b: WeakReference[Subscriber]): Int = { 
              if (a.get == None || b.get == None) -1
              else compareSubscribers(a.get.get, b.get.get)
        }
      })  
protected def mapSize(): Int
protected def compareSubscribers(a: Subscriber, b: Subscriber): Int
protected def classify(event: Event): Classifier
protected def publish(event: Event, subscriber: Subscriber): Unit
def subscribe(subscriber: Subscriber, to: Classifier): Boolean = 
  subscribers.put(to, new WeakReference(subscriber))
def unsubscribe(subscriber: Subscriber, from: Classifier): Boolean = 
  subscribers.remove(from, new WeakReference(subscriber))
def unsubscribe(subscriber: Subscriber): Unit = 
  subscribers.removeValue(new WeakReference(subscriber))
def publish(event: Event): Unit = {
      val i = subscribers.valueIterator(classify(event))
      while (i.hasNext) publish(event, i.next().get.get)
}
  }

class WeakEventBus extends EventBus with WeakLookupClassification {
  type Event = MessageEvent
  type Classifier=String   
  type Subscriber = ActorRef

  protected def compareSubscribers(a: ActorRef, b: ActorRef) = a compareTo b

  protected def mapSize(): Int = 10
  protected def classify(event: Event): Classifier = event.channel
  protected def publish(event: Event, subscriber: Subscriber): Unit =
      subscriber ! event
}

lazy val weakEventBus = new WeakEventBus

implicit val timeout = akka.util.Timeout(1000)
lazy val actorSystem = ActorSystem("serversys", ConfigFactory.parseString(""" 
akka {
  loglevel = "DEBUG"
  actor {
        provider = "akka.remote.RemoteActorRefProvider"
        debug {
          receive = on 
          autoreceive = on        
          lifecycle = on
          event-stream = on
        }
  }
  remote {
        transport = "akka.remote.netty.NettyRemoteTransport"
        log-sent-messages = on 
        log-received-messages = on    
  }
}
serverconf {
  include "common"
  akka {
        actor {
          deployment {
        /root {
          remote = "akka://serversys@127.0.0.1:2552"
        }    
          }
        }
        remote {
          netty {
        hostname = "127.0.0.1"
        port = 2552
          }
        }
  }
}
""").getConfig("serverconf"))

class Server extends Actor {
  private[this] val scheduled = new AtomicBoolean(false)
  private[this] val gcFlagRef = new AtomicReference[WeakReference[AnyRef]]()

  val gcCheckPeriod = Duration(5000, "millis")

  override def preRestart(reason: Throwable, message: Option[Any]) {
        self ! GcCheckScheduled(scheduled.get, gcFlagRef.get)
        super.preRestart(reason, message)
  }

  def schedule(period: Duration, who: ActorRef) = 
        actorSystem.scheduler.scheduleOnce(period)(who ! GcCheck)  

  def receive = {    
        case StartServer(nodeName) => 
          sender ! ServerStarted(nodeName, self)
          if (scheduled.compareAndSet(false, true)) 
        schedule(gcCheckPeriod, self)
          val gcFlagObj = new AnyRef()              
          gcFlagRef.set(new WeakReference(gcFlagObj))
          weakEventBus.subscribe(self, nodeName)
          actorSystem.eventStream.unsubscribe(self)      
        case GcCheck =>
          val gcFlag = gcFlagRef.get
          if (gcFlag == null) {
        sys.error("gcFlag")
          }
         gcFlag.get match {
        case Some(gcFlagObj) =>
          scheduled.set(true)
          schedule(gcCheckPeriod, self)  
        case None =>
          println("Actor stopped because of GC: " + self)
          context.stop(self)        
        }
        case GcCheckScheduled(isScheduled, gcFlag) =>
          if (isScheduled && scheduled.compareAndSet(false, isScheduled)) {
        gcFlagRef.compareAndSet(null, gcFlag)
        schedule(gcCheckPeriod, self)            
          }
        case IsAlive(nodeName) =>
          println("Im alive (default EventBus): " + nodeName)
          sender ! AmAlive(nodeName, self)
        case e: MessageEvent => 
          println("Im alive (weak EventBus): " + e)       
    }   
} 

// :paste 2/2
class Root extends Actor { 
  def receive = {
      case start @ StartServer(nodeName) =>
        val server = context.actorOf(Props[Server], nodeName)
        context.watch(server)
        Await.result(server ? start, timeout.duration)
      .asInstanceOf[ServerStarted] match {
        case started @ ServerStarted(nodeName, _) => 
          sender ! started
        case _ => 
          throw new RuntimeException(
            "[S][FAIL] Could not start server: " + start)
        }
      case isAlive @ IsAlive(nodeName) =>
        Await.result(context.actorFor(nodeName) ? isAlive, 
      timeout.duration).asInstanceOf[AmAlive] match {
        case AmAlive(nodeName, _) => 
          println("[S][SUCC] Server is alive : " + nodeName)
        case _ => 
      throw new RuntimeException("[S][FAIL] Wrong answer: " + nodeName)    
          }
      case isAliveWeak @ IsAliveWeak(nodeName) =>                
        actorSystem.eventStream.publish(MessageEvent(nodeName, 
      PostMessage(text="isAlive-default")))  
        weakEventBus.publish(MessageEvent(nodeName, 
      PostMessage(text="isAlive-weak")))  
}
  }

lazy val rootActor = actorSystem.actorOf(Props[Root], "root")

object Root {
  def start(nodeName: String) = {
        val msg = StartServer(nodeName)
        var startedActor: Option[ActorRef] = None
        Await.result(rootActor ? msg, timeout.duration)
      .asInstanceOf[ServerStarted] match {
            case succ @ ServerStarted(nodeName, actor) => 
          println("[S][SUCC] Server started: " + succ)
          startedActor = Some(actor)
            case _ => 
      throw new RuntimeException("[S][FAIL] Could not start server: " + msg)
          }
        startedActor  
  }
  def isAlive(nodeName: String) = rootActor ! IsAlive(nodeName)
  def isAliveWeak(nodeName: String) = rootActor ! IsAliveWeak(nodeName)
}

////////////////
// actual test 
Root.start("weak")
Thread.sleep(7000L)
System.gc()
Root.isAlive("weak") 
```

# java - java中的同步方法而不是同步语句

> ID：14121836
> 
> 赞同：0
> 
> 时间：2013-01-02T12:12:59.737
> 
> 标签：java, synchronization

我有一个在“非这个”对象上带有同步语句的方法

```
class Some_Class { 
  public A s = new A();
  public void method_A() { 
    synchronized(s) { 
      ....
    } 
  }
} 
```

我可以改为扩展 A 类并按如下方式进行同步：

```
class B extends A {  
  public A a;
  public B(A a) {  
    this.a = a; 
  }  
  public synchronized void some_m() {  
    ...  
  }  
}   
class Some_Class {  
  public A s = new A();
  public void method_A() {
    B b = new B(s);
    b.some_m();
  }  
} 
```

这两个同步是否等效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:17:38.167

不，它们不相等。这个方法在这里：

```
public synchronized void some_m() {  
  ...  
} 
```

与此相同：

```
public void some_m() {  
    synchronized(this) {
        ...  
    }
} 
```

或者换句话说

1.  `A`您的第一个代码选项在in `Some_Class`（类成员，每个人都可见）的实例上同步。
2.  `B`您的第二个代码选项在inside 的实例上同步`Some_Class.method_A()`（一个局部变量，对该方法的外部不可见）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:17:42.300

不，它们不相等。在第二种情况下，您实际上根本没有同步。因为`some_m`方法在`B`. 因此，您创建 B 的本地实例并在其上调用方法。此方法仅在 B 的本地实例上同步，其他线程不关心它，并且可以做任何他们想做的事情，`s`因为它不同步。
你能描述一下你想要达到的目标吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:18:45.903

同步块同步整个对象，而同步方法仅同步该方法。在第二种情况下，某些线程仍然可以访问对象的其他非同步方法。

# asp.net - 在同一用户多次登录的情况下强制注销所有其他会话

> ID：14121838
> 
> 赞同：0
> 
> 时间：2013-01-02T12:13:04.587
> 
> 标签：asp.net, session, global-asax

我有一个应用程序，我阻止同一用户多次登录。如果用户尝试从另一个网页/机器登录（当已经登录另一个），则会出现一个确认框，询问他是否需要注销上一个会话，如果他单击“是”，然后以前的会话将被注销。我无法注销上一个会话，但是代码阻止了多次登录，但是我如何注销上一个会话 n 将用户重定向到当前会话的主页

这是
loginButton_Click 中的代码（身份验证后）

```
 string sKey = loginControl.UserName + loginControl.Password;
    string sUser = Convert.ToString(Cache[sKey]);
    if (sUser == null || sUser == String.Empty || sUser == "")
    {
        TimeSpan SessTimeOut = new TimeSpan(0, 0, HttpContext.Current.Session.Timeout, 0, 0);
        HttpContext.Current.Cache.Insert(sKey, sKey, null, DateTime.MaxValue, SessTimeOut, System.Web.Caching.CacheItemPriority.NotRemovable, null);
        Session["user"] = loginControl.UserName + loginControl.Password;
        Response.Redirect("MainPage.aspx");
    }
    else
    {
        Response.Write("<script>if(window.confirm('You have already Logged In.Do you want to sign off the previous Session?')){} else{window.location.href='login.aspx'}</script>");
        //if part
        return;
    } 
```

在 Global.asax 页面中

```
protected void Application_PreRequestHandlerExecute(Object sender, EventArgs e)
{
    if (System.Web.HttpContext.Current.Session != null)
    {
        if (Session["user"] != null)
        {
            string sKey = (string)Session["user"];
            string sUser = (string)HttpContext.Current.Cache[sKey];
        }
        else
        {
            foreach (DictionaryEntry de in HttpContext.Current.Cache)
            {
                HttpContext.Current.Cache.Remove((string)de.Key);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:16:38.067

您当前使用的方法是有问题的。您保留相同的“密钥” ( `loginControl.UserName + loginControl.Password`) 来标识用户的会话，而不是每个会话的唯一密钥（`Guid.NewGuid()`例如）。
如果您有唯一的密钥，您将能够区分一个会话和另一个会话（例如，如果用户执行两次登录，您将能够知道哪个是哪个）

**说明：**
当用户登录时，创建一个新的 Guid 并将其保存在另一个 Session 密钥中（`Session["SessionGuid"] = Guid.NewGuid()`例如）。
此外，要么保留一个字典（或在全局缓存中为每个用户创建一个单独的条目），其中每个 userId 保存唯一的 Guid。
由于在一个会话中您将拥有旧的 Guid，而在新的会话中您将拥有新的 Guid，您可以检查`Application_PreRequestHandlerExecute`当前会话具有的 Guid，如果不匹配 - 断开用户连接。

# installshield - Installshield 强制将 GAC 组件替换为具有相同版本的组件

> ID：14121841
> 
> 赞同：0
> 
> 时间：2013-01-02T12:13:07.880
> 
> 标签：installshield, gac

我有一个名为 A.dll 版本 3.303.1.1 的 .NET DLL。
我有一个带有补丁的新 A.dll，但它具有相同的版本 3.303.1.1，我需要在我的应用程序的即将发布的版本中提供它。

我需要做的是在安装过程中用来自 GAC 的新补丁 A.dll 强制替换旧 A.dll。我正在使用 Installshield 创建安装程序。

DLL 是应用程序所需的第三方 DLL。旧 DLL 的文件版本也是 3.303.1.1；但对于新的 DLL，它是 3.3.1.1。

假设仍然安装旧版本的应用程序，并且在我们使用新设置安装新版本应用程序时应该保留。

所以旧版本也应该指向新的dll A.dll。

如何使用 Installshield(2011) 自定义设置以实现该行为？

我的试验：当我简单地将新 DLL 添加到设置中并尝试将其安装在已安装旧版本应用程序的机器上时，新 DLL 未安装在 GAC 中，因为两个 DLL 的版本相同。但是，当我使用 GACUTIL.exe 强制安装新的 DLL 时，我能够这样做，并且旧的 DLL 被机器中的新 DLL 替换。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:51:00.963

使用递增的 AssemblyFileVersion 重建 DLL，但相同的 AssemblyVersion 和 InstallShield / Windows Installer 应该会自动执行您要查找的操作。

# c# - 没有寻呼机的asp .net水平滚动

> ID：14121862
> 
> 赞同：1
> 
> 时间：2013-01-02T12:14:47.693
> 
> 标签：c#, asp.net

[ASP.NET [GridView 的水平滚动]](https://stackoverflow.com/questions/2099236/asp-net-horizontal-scroll-fro-gridview) 展示了如何向我的网格添加水平滚动

**问题是它还会在自动生成的寻呼机周围滚动。**

我可以制作外部寻呼机，但肯定有更好的解决方案吗？

问题是：有没有一种简单的方法可以使我的gridview 水平滚动而不使寻呼机滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:33:36.293

另一个更简单的解决方案：

1.  创建一个空表并给它一个**id**。在我的情况下**customPager**。
2.  给您的默认 GridView 寻呼机一个**css 样式**。**您只需要一个没有 css 编码的名称**。
3.  **将jquery**包含在您的 aspx（头部）中。
4.  您会看到下面的 2 行脚本...**它们将默认分页移到**您放置**customPager的位置之外**

这是我能制作的最简单的......希望它有帮助......

```
 <table id="customPager">

    </table>
    <hr />
        <div id="dvGridView" style="height: 200px;overflow:scroll;">
        <asp:GridView ID="GridView1" runat="server" AllowPaging="True" PageSize="5">
            <PagerSettings Position="Top" />
            <PagerStyle CssClass="pagerStyle" />
        </asp:GridView>
    </div>
    <script>
        $('#customPager').html($('.pagerStyle').html());
        $('.pagerStyle').html('');
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:42:59.537

erich007 给出了一个非常有趣的答案，这可能是要走的路，但我没有时间去测试它。

以下方法对我有用：

引用：

[http://blogs.visoftinc.com/2008/03/19/extending-the-gridview-to-work-with-the-new-datapager-control/](http://blogs.visoftinc.com/2008/03/19/extending-the-gridview-to-work-with-the-new-datapager-control/)

扩展 GridView 以使用新的 DataPager 控件

通过戴夫马里尼 | 发布时间：2008 年 3 月 19 日 Technorati 标签：ASP.NET,C#

最近，我阅读了 Scott Mitchell 撰写的一篇关于 .NET Framework 3.5 版中包含的新 ListView 和 DataPager 控件的文章。这让我很好奇如何调整其他众所周知的数据绑定控件，例如 GridView，以便它们可以与 DataPager 控件一起使用。经过一些简单的阅读和对 GridView 控件的深入思考后，我有了一个游戏计划并准备好了。扩展数据绑定控件以允许与 DataPager 控件进行通信并不难，但它确实假定您了解数据如何绑定到控件。但是，当 GridView 内置了自己的分页控件时，为什么还要这样做呢？好吧，一方面，能够将寻呼机与网格分离，让我们可以做一些非常酷的事情。我能想到的一件事是在左侧栏中有 GridView，而在主窗口中的某处有分页控件。此外，我们可以有一个带有两个寻呼机的网格。无论我们使用哪一个页面来翻阅我们的数据，每个页面都一致地跟踪当前页面。最后，与 GridView 本身相比，pager 的模板控件非常强大。

让我们从数据绑定控件如何与 DataPager 通信开始。DataPager 控件可以连接到任何实现位于 System.Web.Extensions 程序集中的 IPageableItemContainer 接口的控件。这是 .NET Reflector 提供的界面外观的快速截图：

```
public interface IPageableItemContainer
{
    //Events
    event EventHandler<PageEventArgs> TotalRowCountAvailable;
    // Methods
    void SetPageProperties(int startRowIndex, int maximumRows, bool databind);
    // Properties
    int MaximumRows { get; }
    int StartRowIndex { get; }
} 
```

界面的MaximumRows 和StartRowIndex 属性只是为您的数据绑定控件创建一种方法来确定要显示的数据窗口。这有效地定义了您将视为数据“页面”的基础。SetPageProperties 方法在与 DataPager 的交互中很重要，因为这是您的控件中的方法，每当您单击任何 DataPagerField 控件（例如，下一个或上一个按钮）时，DataPager 都会调用该方法。最后，该接口定义了一个名为 TotalRowCountAvailable 的事件。此事件告诉 DataPager 绑定到控件的数据中有多少条记录。

因此，让我们开始使用 DataPager 的钩子扩展 GridView。从 GridView 的角度考虑 IPageableItemContainer 接口，我们意识到 MaximumRows 等价于现有的 PageSize 属性，而 StartRowIndex 可以从现有的 PageSize 和 PageIndex 属性中计算出来。我们还通过声明事件并创建相应的事件调用程序来准备事件。因为我希望我的新分页功能成为此网格的默认功能，所以我强制分页器在每次页面加载时隐藏自己。如果您愿意，可以为此行为添加一个切换。最后，我们将 SetPageProperties 方法存根，但我们暂时将其留空，因为我们稍后会重新讨论它。到目前为止，我们的新 GridView 如下所示：

```
public class PageableGridView : GridView, IPageableItemContainer
{
     public PageableGridView() : base()
     {
          PagerSettings.Visible = false;
     }
     public event EventHandler<PageEventArgs> TotalRowCountAvailable;
     public int MaximumRows
     {
          get{ return this.PageSize; }
     }
     public int StartRowIndex
     {
          get{ return (this.PageSize * this.PageIndex); }
     }
     protected virtual void OnTotalRowCountAvailable(PageEventArgs e)
     {
          if (TotalRowCountAvailable != null)
                TotalRowCountAvailable(this, e);
     }
     protected virtual void SetPageProperties(int startRowIndex, int maximumRows, bool dataBind) { }
} 
```

好消息是我们已经完成了一半以上。现在是事情变得更加复杂的地方。我们仍然需要一种方法来设置控件的页面大小和起始行值，该值基于 DataPager 所说的我们需要在用户单击其中一个按钮时显示的内容。这就是 SetPageProperties 方法发挥作用的地方。这是完成工作的基本实现：

protected virtual void SetPageProperties(int startRowIndex, int maximumRows, bool dataBind) { if (databind) { PageSize = maximumRows; int newPageIndex = (startRowIndex / PageSize); if (PageIndex != newPageIndex) { OnPageIndexChanging(new GridViewPageEventArgs(newPageIndex)); 页面索引 = 新页面索引；OnPageIndexChanged(EventArgs.Empty); } } RequiresDataBinding = 数据绑定；当 DataPager 向网格发送其分页信息时，网格需要对其自身设置任何适当的参数以准备绑定到正确的数据窗口。网格已经配备的 2 个属性是 PageSize 和 PageIndex 属性。这些属性可以从发送到方法中的信息中计算出来，所以我们设置它们。当然，如果 Page 正在更改，我们可能应该触发 OnPageIndexChanging 事件。这意味着如果您没有绑定到数据源，您仍然需要确保处理此事件。最后，如果 DataPager 处于绑定数据的过程中，我们会指示网格重新绑定自身。这是一个基本实现，因此您还需要在此处进行任何数据完整性检查，例如检查以确保新的 PageIndex 和 StartRowIndex 值在有效范围内。

完成我们将 GridView 与 DataPager 的集成只剩下一件事要做。为了让 DataPager 呈现适当数量的页面按钮，或者让它知道何时禁用分页器上的下一页或上一页按钮，它需要知道总共有多少行。这与在 DataPager 本身上以声明方式指定的页面大小相结合，有助于确定数据源包含的页面数。问题是，寻呼机不知道这些信息。然而，GridView 知道它，我们需要从那里获取它并将其传递给 DataPager。但是我们什么时候可以确定 GridView 有这些数据呢？GridView 控件继承自 CompositeDataboundControl。此类型包含 CreateChildControls 方法的特殊变体，该变体还接受一个属性，该属性指示控件是绑定到数据还是简单地重新呈现。一点反映表明 GridView 使用此方法绑定到其数据源。知道了这一点，看来这是我们想要注入触发器以引发 TotalRowCountAvailable 事件的地方。这有点复杂，因为我们需要处理手动绑定到数据源或使用 DataSource 控件（如 ObjectDataSource 或 SqlDataSource）的情况，这些控件中指定了总行数。需要几个辅助方法来确保我们获得正确的值：一点反映表明 GridView 使用此方法绑定到其数据源。知道了这一点，看来这是我们想要注入触发器以引发 TotalRowCountAvailable 事件的地方。这有点复杂，因为我们需要处理手动绑定到数据源或使用 DataSource 控件（如 ObjectDataSource 或 SqlDataSource）的情况，这些控件中指定了总行数。需要几个辅助方法来确保我们获得正确的值：一点反映表明 GridView 使用此方法绑定到其数据源。知道了这一点，看来这是我们想要注入触发器以引发 TotalRowCountAvailable 事件的地方。这有点复杂，因为我们需要处理手动绑定到数据源或使用 DataSource 控件（如 ObjectDataSource 或 SqlDataSource）的情况，这些控件中指定了总行数。需要几个辅助方法来确保我们获得正确的值：其中具有指定的总行数。需要几个辅助方法来确保我们获得正确的值：其中具有指定的总行数。需要几个辅助方法来确保我们获得正确的值：

```
//Gets row count from SqlDataSource and the like...
private int _GetTotalRowsFromDataSourceObject(IEnumerable dataSource)
{
    DataSourceView view = this.GetData(); if (AllowPaging && view.CanPage && view.CanRetrieveTotalRowCount)
        return base.SelectArguments.TotalRowCount;
    else
        return (PageIndex * PageSize) + _GetSourceCount(dataSource);
}
//Gets the row count from a manually bound source or from a source in viewstate
private int _GetSourceCount(IEnumerable dataSource)
{
    ICollection source = dataSource as ICollection;
    return source != null ?
         source.Count :
         (from x in dataSource.OfType<object>() select 1).Sum();
} 
```

_GetTotalRowsFromDataSourceObject 方法从 DataSource 对象中检索记录的总数（如果可用）。这取决于几件事，例如是否在 DataSource 控件上设置了 EnablePaging 属性以及 Object 是否已完成查询操作。最坏的情况，我们返回一页数据并完成它。_GetSourceCount 方法用于两个特定场合。首先，这是在手动绑定网格的 DataSource 属性然后调用 DataBind() 的情况下获取行数的方式。其次，当网格在回发到存储在视图状态中的数据后重新绑定时，这种方法也将证明是有用的。在这两种情况下，我们都使用一点 linq 来提取数据源中结果数据项（或视图状态中的行）的总数。现在让'

```
protected override int CreateChildControls(IEnumerable dataSource, bool dataBinding)
   {
       int baseResult = base.CreateChildControls(dataSource, dataBinding);
       if (dataSource != null)
       {
           int dataSourceCount = (IsBoundUsingDataSourceID && dataBinding) ?
               _GetTotalRowsFromDataSource(dataSource) :
               _GetSourceCount(dataSource);
           OnTotalRowCountAvailable(new PageEventArgs(StartRowIndex, MaximumRows, dataSourceCount));
       }
       return baseResult;
   } 
```

首先调用基本控件的 CreateChildControls 方法，因为网格使用它来实际执行数据绑定。如果没有要绑定的数据，就没有理由通知寻呼机，所以我们检查以确保我们有数据，然后通过上述过程确定源中的行数。最后，我们使用派生数据触发事件，然后返回原始结果，以免影响可能依赖它的任何其他操作。我们现在有一个可以与新的 DataPager 控件耦合的 GridView。下面是一个标记示例，我们将使用它在页面上一起使用这些控件：

```
<asp:DataPager ID="DataPager1" runat="server" PageSize="2" PagedControlID="grid2">
    <Fields>
        <asp:NextPreviousPagerField />
    </Fields>
</asp:DataPager>

<custom:pageablegridview id="grid2" runat="server" autogeneratecolumns="true" allowpaging="true"
        onpageindexchanging="grid2_PageIndexChanging" /> 
```

请注意，我不必指定 GridView 的 PageSize 属性，因为 DataPager 上的 PageSize 属性将控制该值。为了确保这一点，我们可以在网格上隐藏 PageSize 属性，但现在就足够了。所以这就是它的全部。对于绑定到数据的新创建的服务器控件，使这些侵入以允许您的控件与 DataPager 一起工作非常简单。对于现有的控件，如 GridView，只需知道绑定是如何发生的，然后将功能注入到您知道所需值将存在的地方。

# c# - 锁定纵横比导致窗口闪烁

> ID：14121863
> 
> 赞同：1
> 
> 时间：2013-01-02T12:14:48.007
> 
> 标签：c#, winforms, resize, aspect-ratio, window-resize

我正在开发一个应用程序，要求我强制主窗口具有锁定的纵横比。[我在这里](http://web.archive.org/web/20150330022650/http://bobpowell.net/controlaspect.aspx)找到了这个片段。它可以工作，但是窗口在调整大小时会闪烁。

```
float _currentRatio;
bool _lockRatio=false;

public bool LockRatio
{
    get{ return _lockRatio; }
    set{ _lockRatio=value; }
}

protected override void OnSizeChanged(EventArgs e)
{
    if(!_lockRatio)
        this._currentRatio=(float)this.Height/(float)this.Width;
    else
        this.Height=(int)(this.Width*this._currentRatio);

    base.OnSizeChanged (e);
} 
```

有没有办法避免这种闪烁？

# java - 如何在 Java 中捕获所有鼠标事件？

> ID：14121866
> 
> 赞同：1
> 
> 时间：2013-01-02T12:15:13.093
> 
> 标签：java, mouse

我想在 Swing 组件中捕获鼠标事件，例如 MouseDrag 事件等，但是我发现当我快速移动鼠标时缺少一些事件，

似乎并非所有事件都被捕获。我捕获的鼠标轨迹是离散的，但我想要鼠标轨迹，精度为 1 像素。

请问你能帮帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T12:18:02.597

你不能这样做。甚至鼠标本身也不会向计算机报告每个像素（或它使用的任何单位）。

您必须插入缺失的点。单个线性插值应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:04:23.737

如果您只想捕获某个组件上的鼠标移动，那么您只需要 MouseDrag 事件等。正如 Matti Virkkunen 所说，如果你想要一条连续的线，你必须进行点对点插值。

如果您询问捕获容器及其子组件内发生的所有事件，那么您可能会考虑访问 EventQueues。但是，我对此一无所知，但在 google 上搜索可能会找到您需要的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:53:03.130

一个非常简单的解决方案——尤其是在绘画方面——是使用提供的 Graphics 和 Graphics2D 对象：

```
static class MyPanel extends JPanel {
    private static final long serialVersionUID = -5482850214654836564L;

    private int lastX = -1;
    private int lastY = -1;
    public MyPanel() {
        super(true); // activate double buffering
        addMouseListener(new MouseAdapter() {
            @Override public void mousePressed(final MouseEvent pE) {
                final int newX = pE.getX();
                final int newY = pE.getY();
                final Graphics g = getGraphics();
                if (g == null) return; // panel not visible
                g.drawLine(lastX, lastY, newX, newY); // or add to list
                lastX = newX;
                lastY = newY;
            }
        });
    }
}

public static void main(final String[] args) {
    final JFrame f = new JFrame();
    f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    f.setBounds(200, 200, 400, 400);

    f.add(new MyPanel());

    f.setVisible(true);
} 
```

要获得更一致的系统，请查看 Java 形状（RoundRectangle、Polygon）等。这些可以在侦听器部分创建，然后存储在列表中，在 paint()/paintComponent() 方法中，您可以使用绘制这些形状g.fill() 或 g.drawPolygon(p)。

# c++ - WinOS 上的线程睡眠和唤醒

> ID：14121867
> 
> 赞同：0
> 
> 时间：2013-01-02T12:15:39.367
> 
> 标签：c++, multithreading, concurrency, pthreads

如何`pthread_cond_signal`在 WinOS 上实现类似 pthreads 的东西。我不想为此使用 pthreads Win32 端口，因为我也支持 Win64。

我正在开发一个基于任务的系统，其中客户端请求产生 n 个任务，这些任务在服务器上产生 n 个线程。在客户端线程产生所有服务器任务后，我希望它进入睡眠状态或其他不消耗任何系统资源的线程状态。当所有服务器任务完成后，我希望客户端线程被唤醒并将结果返回给客户端应用程序。

编辑：我考虑过在一些共享内存中等待条件变量，并在循环中检查 condvar，但循环不会消耗资源吗？我可以`sleep()`在循环内添加一个，但我不会得到实时的客户端请求和服务器响应——因为一个任务可能需要 1/1000 秒（但也需要几秒）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:32:28.597

Win32 API 在 Vista 和更高版本上支持条件变量。请参阅[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682052%28v=vs.85%29.aspx)以获取 API 和[此](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686903%28v=vs.85%29.aspx)示例用法。

[`WakeConditionVariable()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687076%28v=vs.85%29.aspx)等价于`pthread_cond_signal()`并且[`WakeAllConditionVariable()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687080%28v=vs.85%29.aspx)等价于`pthread_cond_broadcast()`

也就是说，如果您使用的是 VS2012，我真的建议您使用新的[C++11 线程库](http://en.cppreference.com/w/cpp/thread)。它还支持[条件变量](http://en.cppreference.com/w/cpp/thread/condition_variable)，并且由于在多个平台上运行对您来说很重要，因此使用标准库可以帮助您最终合并您的代码库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:26:54.380

您可以使用事件函数和 WaitForMultipleObject 等

有关事件功能的更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms686360 (v=vs.85).aspx#event_functions](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686360(v=vs.85).aspx#event_functions)

更多关于 WaitForSingleObject 的信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms687032 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032(v=vs.85).aspx)

更多关于 win32 同步的信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms686360 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686360(v=vs.85).aspx)

# php - 将全名变量传递给 PHP 会话

> ID：14121876
> 
> 赞同：1
> 
> 时间：2013-01-02T12:16:20.193
> 
> 标签：php, javascript

我如何将`response.name`值设置为`$_SESSION`

```
 FB.api('/me', function (response) {
    var fullname = response.name;
    <?php $_SESSION['fullname'] = 'fullname'; ?>
  }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T12:17:54.907

如果您想使用通过运行客户端代码获得的数据来运行服务器端代码，那么您必须将数据发送到服务器。在生成客户端的服务器端代码运行时，不会收集数据。

您可以使用重定向 ( `location = etc etc`) 或 Ajax（那里有很多教程）来执行此操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T12:19:06.207

# 为什么你需要一个ajax调用？

PHP 是服务器端脚本，不能用于 Javascript 等客户端脚本。但是您可以对服务器进行 AJAX 调用并设置会话:)

.

```
 FB.api('/me', function (response) {
    var fullname = response.name;
    $.ajax({ 
       url : "setsession.php?name="+fullname,
       cache : false,
       type : POST;
    });
  }); 
```

设置会话.php：

```
<?php session_start(); $_SESSION['fullname'] = $_GET['name']; ?> 
```

# sql - 使用单一模式的多个客户端数据库 - 这可能吗？

> ID：14121877
> 
> 赞同：0
> 
> 时间：2013-01-02T12:16:21.910
> 
> 标签：sql, sql-server, sql-server-2008, multi-tenant

我是 SQL Server 2008 的新手，但在阅读了有关 Schemas 的信息后，我有这个问题。

目前，对于我们拥有的每个新客户，我必须手动创建一个新数据库，然后从现有数据库中导入所有对象（表/视图/存储过程等）。现在，只要开发人员有任何更新（例如，表结构的更改、存储过程等），都必须在所有数据库中进行更改。我厌倦了使用 DBComparer 来修复数据库中的差异。

**是否有可能拥有一个包含所有表/存储过程/视图的“主架构”？**这样所有的“客户端数据库”都可以引用这个“主架构”，但仍然能够毫无问题地维护自己的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:30:48.617

不，这是不可能的。Schemata 存在于数据库中。

多个客户端数据库 SIMILAR Schema，是的，但你必须一一升级。Schema 不在 master 中 - 它在每个数据库中，并且无法更改。事实上，每个 Schema 都是完全独立的，您可以在一个数据库中拥有 01 个“相同内容”Schemata。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:32:10.283

可以有一个单一的“主”模式。拥有这个“主”模式可能是*不可能的，并且仍然让每个客户端**都毫无问题地*维护自己的数据。

你看到的是一种多租户架构。Microsoft 的[多租户数据架构](http://msdn.microsoft.com/en-us/library/aa479086.aspx)很好地介绍了这些问题。

[这个 SO 答案](https://stackoverflow.com/a/8343142/562459)概述了您需要考虑的各种权衡。

# java - 如何使用 JAX RPC 获取 Handler 中的 WS 操作名称？

> ID：14121878
> 
> 赞同：0
> 
> 时间：2013-01-02T12:16:21.427
> 
> 标签：java, handler, jax-rpc

我已经编写了一个处理程序来构造我的 SOAP 标头，但我打算将它用于不同的操作。现在根据操作，一些标题名称会发生​​变化。所以我需要知道哪个操作被调用，基于它我将更改我的标题名称。

我的问题就在于此。我正在使用 JAX RPC，这是我正在处理的当前项目的要求。我如何知道我的处理程序中的操作名称？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-19T11:24:23.880

这为您提供了服务名称：

```
@Override
public boolean handleMessage(SOAPMessageContext pContext) {
    QName servicio = (QName) pContext.get(MessageContext.WSDL_SERVICE);
    return servicio.getLocalPart();
} 
```

这为您提供了操作名称：

```
@Override
public boolean handleMessage(SOAPMessageContext pContext) {
    QName servicio = (QName) pContext.get(MessageContext.WSDL_OPERATION);
    return servicio.getLocalPart();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T12:52:02.087

我对此做了一些研究。互联网上没有很多可用的材料。不过我很幸运。像我一样面临类似问题的人可以使用这种方法：

```
 protected String getMethodName(MessageContext mc)
    {
    String operationName = null;

    try
    {
    SOAPMessageContext messageContext = (SOAPMessageContext) mc;

    // assume the operation name is the first element
    // after SOAP:Body element
    Iterator i = messageContext.
    getMessage().getSOAPPart().getEnvelope().getBody().getChildElements();
    while ( i.hasNext() )
    {
    Object obj = i.next();
    if(obj instanceof SOAPElement)
    {
    SOAPElement e = (SOAPElement) obj;
    operationName = e.getElementName().getLocalName();
    break;
    }
    }
    }
    catch(Exception e)
    {
    e.printStackTrace();
    }
    return operationName;
    } 
```

此方法获取消息上下文对象并遍历整个肥皂信封以获取操作名称。

希望这可以帮助一些人。

# javascript - 启用禁用下拉菜单和提交按钮

> ID：14121881
> 
> 赞同：1
> 
> 时间：2013-01-02T12:16:39.587
> 
> 标签：javascript, jquery, html, ajax

我正在尝试开发一个需要验证的网络应用程序，当页面加载时，我将启用一个下拉选择框，其余的东西，如文本框，按钮都应该处于禁用模式。当我从第一个选择框中选择项目时，只有另一个文本框应该启用。

在我选择完所有字段后，只应启用提交按钮。

请建议我使用 javascript 的方式或提供任何代码片段，以便我可以有效地设计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:24:40.473

好的，每个选择框都有 onchange 属性，它会触发一个函数，在该函数中你可以编写来启用你的文本框和你想要的任何东西

```
<select onchange = 'func();'></select> 
```

之后文本框有 onkeypress attr 这将触发功能，您可以编写以启用 sumbit 按钮

```
<input type='text' onkeypress="func();"/> 
```

在此功能中，您可以检查是否所有文本框都已填写，然后您可以启用提交按钮..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:27:57.433

您必须尝试使用​​ jquery，示例代码如下，并且也经过测试。

```
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript">

    $(document).ready(function(){

        $("#xyz").change(function(){
            var fields = $("input");
            fields.removeAttr("disabled");          
        });

    });

</script>

<form action="">

    <select name="xyz" id="xyz">
        <option value="">Select</option>
        <option value="1">1</option>
        <option value="2">2</option>
    </select>

    <input type="text" disabled="disabled"/>
    <input type="text" disabled="disabled"/>

</form>
```

随意问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:19:08.323

让我们首先将选择列表值映射到需要启用的字段。您可以使用类以便一次启用多个字段。

```
var choiceFieldMapping = {
    'val1': '.first',
    'val2': '.second',
    // and so on
}; 
```

我们还需要知道选择了哪些值：

```
var selectedValues = {
    'val1': false,
    'val2': false,
    // and so on, all false by default
}; 
```

接下来我们禁用所有输入并启用选择：

```
function resetDisable() {
    $('form :input').prop('disabled', true);
    $('form #firstSelect').prop('disabled', false);
}
resetDisable(); // Call it once to reset the form to initial state 
```

当用户更改所选选项时，我们这样做：

```
$('form #firstSelect').change(function() {
    // Current value
    var v = $(this).val();

    // Enable the fields
    resetDisable();
    $(choiceFieldMapping[v]).prop('disabled', false);

    // Update the selectedValues object
    selectedvalues[v] = true;

    // Check if all values have been selected
    var allSelected = Object.keys(selectedValues).every(function(key) {
        return selectedValues[key];
    });

    if (allSelected) {
        // Enable submit button
        $('form #submit').prop('disabled', false);
    }
}); 
```

# c# - 在 C# Windows 应用程序中使用辅助线程打开新的弹出窗口不起作用？

> ID：14121884
> 
> 赞同：0
> 
> 时间：2013-01-02T12:16:46.280
> 
> 标签：c#, .net

在我的 C# windows 应用程序中，我构建了一个自动邮件系统来通知用户他们使用 SMTP 设置在应用程序中设置的关键事件......这个邮件系统工作正常。我已经使用 System.Net.Mail 命名空间来实现这一点......

我的问题是，每当邮件发送成功时，我需要在一个窗体上显示一个通知窗口（弹出窗口），显示收件人的姓名和他的电子邮件 ID。

为此，我正在使用辅助线程，但它无法正常工作，它使我的主应用程序无响应，直到它将邮件传递给所有用户。对于每封邮件已经给线程睡眠 5 秒，考虑有 10 封邮件，那么我将无法使用我的主应用程序 50 秒......所以任何帮助将不胜感激......

我已经完成了这样的 C# 编码：

```
 //My main Function
    public void SendMail(dataset ds)
    {
      for(inti=0;i<ds.Tables[0].Rows.Count;i++)
      {
       string resValue = genFunc.SMTPClienTSetting(ds, mail);
        if (resValue == "True")
        {
            Thread tPopUp = new Thread(new ThreadStart(this.ShowMessagePopUp));
            tPopUp.IsBackground = true;
            tPopUp.Start();
            lblPOpUpInfo = "Message sent successfully";
        }
        else
        {
            Thread tPopUp = new Thread(new ThreadStart(this.ShowMessagePopUp));
            tPopUp.IsBackground = true;
            tPopUp.Start();
            lblPOpUpInfo = "Message sending failed";
        }
       }
    }

    //Thread Function to open secondary form
    public void ShowMessagePopUp()
    {
        try
        {
            frmHomePopUp homePopUp = new frmHomePopUp();
            homePopUp.Show();
            homePopUp.lblInfo.Text = lblPOpUpInfo;
            Application.DoEvents();
            Thread.Sleep(5000);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

public string SMTPClienTSetting(DataSet ds, MailMessage MailstoSend)
        {
            try
            {
                SmtpClient objsmtp = new SmtpClient();
                NetworkCredential NetAccess = new NetworkCredential();

                NetAccess.UserName = ds.Tables[0].Rows[0][0].ToString();
                NetAccess.Password = ds.Tables[0].Rows[0][1].ToString();
                objsmtp.Credentials = NetAccess;
                objsmtp.Host = ds.Tables[0].Rows[0][2].ToString();
                objsmtp.Port = Convert.ToInt16(ds.Tables[0].Rows[0][3].ToString());

                objsmtp.Send(MailstoSend);

                System.Threading.Thread.Sleep(500);

                return "True";
            }
            catch (NullReferenceException nr)
            {
                return nr.Message;
            }
            catch (Exception ex)
            {
                return ex.Message;
            }
        } 
```

我可以使用线程显示我的表单，但主应用程序在完成发送邮件之前没有响应......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:34:51.813

您可以`TPL`用于异步邮件发送和`ContinueWith`与 UI 线程的交互。类似的东西

```
for (int i = 0; i < 10; i++)
{
    var asyncTask = Task.Factory.StartNew(() => SendMail(i)).ContinueWith((result) =>
    {
        // UI interaction logic
    });
}
private bool SendMail(string data)
{
    // send logic
    // you can handle result from this function in ContinueWith delegate function
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:34:54.230

您的阻塞代码实际上包含在**SMTPClientTSetting**方法中，在您的情况下，该方法在主线程（UI 线程）上执行。为了避免 UI 阻塞，您应该在不同的线程上执行此方法（您可以使用 Vadim 建议的方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:29:57.260

我认为这里不需要新线程。此外，请避免使用 DoEvents，请参阅[此处](https://stackoverflow.com/questions/5181777/use-of-application-doevents)或自行搜索。您是否考虑过制作一个小型列表框作为某种控制台/日志并在那里显示成功或失败消息？每个用户都讨厌总是到处乱扔消息框的应用程序。

# javascript - 有没有更好的方法来设置画廊，使折叠 div 不会移动其他元素？

> ID：14121886
> 
> 赞同：0
> 
> 时间：2013-01-02T12:17:09.193
> 
> 标签：javascript, jquery, html, css

正如你[在这里看到的（JSFiddle）](http://www.jsfiddle.net/kwillisbws/2pvxR/)我有一些盒子。当您单击第一个框时，您可以看到折叠 div 的作用。我希望 div 在图像下方折叠，但不要将其他框移到其右侧。

我假设有更好的方式来布置画廊以实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:59:08.023

通过使用该插件，您将无法按照您的意愿进行这项工作。它这样做的原因不是基于您的任何样式错误；它是 Javascript 所固有的。所以你有两个选择：

1.  编辑源代码以解决您的问题（可能不值得）

2.  制作自己的脚本，我敢肯定这不会太难。

3.  找到一个新脚本。[非常简单的可能对你有用](https://stackoverflow.com/questions/8495257/jquery-simple-collapsible-div)

但是，我还注意到了其他一些事情。首先，如果您打开 a `ul`，它的任何直接子级都必须是 a ，`li`否则您的 html 将无效。因此，明确地说，您的 html 应始终采用以下形式：

```
<ul>
  <li><a href=""></a></li>
  <li><div></div></li>
  <li>...</li>
<ul> 
```

而且你可以清理你的 CSS 相当多。[看一看！](http://jsfiddle.net/wQB3K/)

# asp.net - 没有声明像 xxx 这样的错误。由于其保护级别，它可能无法访问

> ID：14121889
> 
> 赞同：0
> 
> 时间：2013-01-02T12:17:18.650
> 
> 标签：asp.net, gridview

使用 vb.net .bind 数据集值到 gridview。并使用 vb.net 中的 smtpclient 将此 gridview 发送到 Outlook。能够在gridview控件中绑定数据。当我调用 sendmail 函数时，它在代码中显示类似上面的错误。

GridView 设计代码

```
<asp:GridView ID="gdv2" runat ="server" width="100%" autogeneratedcolumn="false">
 <columns>
 <asp:BoundField HeaderText="TRREQNO" DataField="TRREQNO" ItemStyle-Width="50"/>
 <asp:BoundField HeaderText="From" DataField="ename" ItemStyle-Width="50"/>
 <asp:BoundField HeaderText="Departure Date" DataField="departuredate" ItemStyle-Width="50"/>
 <asp:BoundField HeaderText="Return Date" DataField="returndate" ItemStyle-Width="50"/>
 <asp:BoundField HeaderText="Passport" DataField="havepassport" ItemStyle-Width="50"/>
  <asp:BoundField HeaderText="Passport Number" DataField="passportnumber" ItemStyle-Width="50"/>
 <asp:BoundField HeaderText="Travel Type" DataField="traveltype" ItemStyle-Width="50"/>
 <asp:BoundField HeaderText="Additional Passengers" DataField="noofcopassenger" ItemStyle-Width="50"/>
 </columns>
</asp:gridview> 
```

文件 .aspx.vb 后面的代码

```
 Dim ds_get As New TR_REQTableAdapters.proc_bindingridTableAdapter
 Dim dt_get As TR_REQ.proc_bindingridDataTable = ds_get.GetData(s1)
 gdv2.datasource = dt_get
 gdv2.databind()

  SendHTMLMail()

Public Sub SendHTMLMail()
    Dim Msg As New MailMessage()
    Dim fromMail As New MailAddress("xxx")
    ' Sender e-mail address.
    Msg.From = fromMail
    ' Recipient e-mail address.
    Msg.[To].Add(New MailAddress("xxx"))
    ' Subject of e-mail
    Msg.Subject = "Send Gridivew in EMail"
    Msg.Body += "Please check below data <br/><br/>"
    Msg.Body += GetGridviewData(gdv2)
    Msg.IsBodyHtml = True
    Dim sSmtpServer As String = ""
    sSmtpServer = "10.200.4.59"
    Dim a As New SmtpClient()
    a.Host = sSmtpServer
    a.EnableSsl = True
    a.Send(Msg)
End Sub

Public Function GetGridviewData(ByVal gv As GridView) As String
    Dim strBuilder As New StringBuilder()
    Dim strWriter As New StringWriter(strBuilder)
    Dim htw As New HtmlTextWriter(strWriter)
    gv.RenderControl(htw)
    Return strBuilder.ToString()
End Function 
```

第 4 行的最后一个函数我得到了上面提到的错误。怎么解决？

# android - ？？？在 Ubuntu 中没有 Android 开发权限

> ID：14121891
> 
> 赞同：0
> 
> 时间：2013-01-02T12:17:26.123
> 
> 标签：android, ubuntu

我用这个答案来解决这个问题 -[为开发设置设备（?????? 没有权限）](https://stackoverflow.com/questions/9210152/set-up-device-for-development-no-permissions)，它对我有帮助。但是存在以下问题 - 重新启动系统后我必须执行以下命令：

```
sudo service udev restart
sudo killall adb
sudo ~/android-sdk-linux/platform-tools/adb start-server 
```

毕竟一切都好。但是我该如何解决呢？我不想每次重新启动系统后都执行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:29:14.940

首先打开终端进入`gksudo gedit /etc/rc.local`并修改文件如下图

```
#!/bin/sh -e
#
# rc.local
#
# This script is executed at the end of each multiuser runlevel.
# Make sure that the script will "exit 0" on success or any other
# value on error.
#
# In order to enable or disable this script just change the execution
# bits.
#
# By default this script does nothing.

PASSWORD='yourPasswordHere'

echo $PASSWORD | sudo -S service udev restart
echo $PASSWORD | sudo -S killall adb
echo $PASSWORD | sudo -S ~/android-sdk-linux/platform-tools/adb start-server

exit 0 
```

`adb devices`现在重新启动系统后尝试。确保`yourPasswordHere`用您的登录密码替换。我没有测试过。希望这可以帮助。

# winforms - MessageBox.show() 在工作线程中调用不安全吗？

> ID：14121894
> 
> 赞同：0
> 
> 时间：2013-01-02T12:17:40.117
> 
> 标签：winforms

在 C# winform 应用程序中，我在对象调用的堆栈树深处的 doWork 方法中有一个后台工作者

```
 // This is ok to be called on non UI thread because 
            // MessageBox has its own message pump
            result = MessageBox.Show(form, message, AppStrings.low_space_title, MessageBoxButtons.YesNo, MessageBoxIcon.Question); 
```

评论来自以前的开发人员，这段代码显然有效，现在它似乎不再工作了..我得到的错误是

```
 Cross-thread operation not valid: Control 'FormMain' accessed from a thread other than the thread it was created on. 
```

任何帮助将不胜感激

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:19:18.633

`MessageBox`**仅**当您没有将主表单（在 UI 线程上创建，因此绑定到它）分配为`IWin32Window`拥有`Messagebox`.

改用[这个](http://msdn.microsoft.com/en-us/library/365dky5y.aspx)重载：

```
result = MessageBox.Show(message, AppStrings.low_space_title, MessageBoxButtons.YesNo, MessageBoxIcon.Question); 
```

# javascript - 我的javascript在本地工作，但不在服务器上，为什么？

> ID：14121897
> 
> 赞同：0
> 
> 时间：2013-01-02T12:17:50.240
> 
> 标签：javascript, asp.net, .net

我知道这是一个愚蠢的问题，但我的 javascript 在本地运行得非常好，但在 some.com 托管服务器上它根本不起作用。任何人都可以帮我弄清楚我的错误吗？

这是我的 javascript 链接：

```
<script type="text/javascript" language="javascript" src="../../Library/Client/Js/Utility.js"></script>
<script type="text/javascript" language="javascript" src="../../Library/Client/js/TlBarAction.js"></script>
<script type="text/javascript" language="javascript" src="../../Library/Client/Js/ControlsFunc.js"></script>
<script type="text/javascript" language="javascript" src="../../Library/Client/Js/Menu.js"></script> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:14:01.607

假设您的路径是正确的，您的服务器是否区分大小写？您的代码有三个“JS”（大写“J”）和一个“js”（小写“j”）引用。

这可以正常工作，就像在 Windows 等不区分大小写的操作系统上一样，但可能不适用于区分大小写的操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:34:14.933

如果您的项目配置路径中的文件夹，则无需像这样`../../`

如果您项目中的文件夹只是这样使用`src="~/Library/Client/Js/Utility.js"`

如果您的文件夹在您的项目之外的文件夹`src="../Library/Client/Js/Utility.js"`（一个文件夹）

根据您必须添加的文件夹计数`../`

检查您的 Some.Com IIS 配置是否正确配置了 js 路径。

希望这可能会有所帮助。，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:45:46.703

如果您在站点的根文件夹中运行，则不允许在共享托管服务器上使用 ../，因为它会使您脱离容器。您需要确保在您的根目录中有您的脚本，然后使用 ~/ 或相应地使用文件夹名称。如果您不在根文件夹中，则可以使用 ~/ ，但前提是您的网站作为自己的应用程序托管，而不仅仅是子目录。

我建议先尝试 Library/Client/Js/Utility.js，然后是 /Library/Client/Js/Utility.js，然后是 ~/Library/Client/Js/Utility.js，看看哪个有效。

# php - 如果此文件大小大于 3GB，如何清除 apache_error.log 文件？

> ID：14121899
> 
> 赞同：0
> 
> 时间：2013-01-02T12:17:52.160
> 
> 标签：php, apache

在我的错误日志文件大小超过 3gb。但我无法清除。因为无法使用任何编辑器打开它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:21:08.790

好吧，我建议您为此使用 logrotate 服务！不要只是删除文件。

这是一个很好的教程：[http ://www.thegeekstuff.com/2010/07/logrotate-examples/](http://www.thegeekstuff.com/2010/07/logrotate-examples/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:22:52.157

[这里](http://www.cyberciti.biz/faq/how-do-i-rotate-log-files/)的教程解释了如何在 linux 环境中使用日志轮换来轮换日志。您也可以在 Windows 中执行类似的操作。这将有助于任何未来的日志。

对于 3GB 的日志，您需要一个特定的工具来查看这么大的文件。大多数编辑对大文件感到窒息。有关更多信息，请参阅[此 stackflow 问题](https://stackoverflow.com/questions/159521/text-editor-to-open-big-giant-huge-large-text-files)的答案。

# android - Google Maps Android API v2，标记标题/片段错误显示

> ID：14121908
> 
> 赞同：7
> 
> 时间：2013-01-02T12:18:33.317
> 
> 标签：android, google-maps, internationalization, google-places-api

我使用带有 Android 的 Google Maps Android API v2 来显示带有附近标记的当前位置。使用 Google Places API 接收附近地点的位置和标题。

问题是标题/片段中的非英语名称以失败方式显示。例如，希伯来名字。

附上截图。

![截屏](../Images/3845fd889e37e3b024d55598064e5aa2.png))

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T15:00:23.947

由于阿拉伯语和希伯来语引起了问题，而英语和俄语则没有，我猜想在从右到左 (RTL) 语言的默认信息窗口实现中出现了一些问题。特别是如果您在 Android 4.2 上运行测试，可能是 Maps V2 的默认信息窗口内容错误地应用了各种与 RTL 相关的属性。

幸运的是，您可以提供自己的信息窗口内容，方法是实现`InfoWindowAdapter`并`getInfoContents()`返回`View`您想要在信息窗口中使用的内容。

例如，[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/Popups)（来自明天对我的书的更新）显示了使用此自定义信息窗口`InfoWindowAdapter`：

```
class PopupAdapter implements InfoWindowAdapter {
  LayoutInflater inflater=null;

  PopupAdapter(LayoutInflater inflater) {
    this.inflater=inflater;
  }

  @Override
  public View getInfoWindow(Marker marker) {
    return(null);
  }

  @Override
  public View getInfoContents(Marker marker) {
    View popup=inflater.inflate(R.layout.popup, null);

    TextView tv=(TextView)popup.findViewById(R.id.title);

    tv.setText(marker.getTitle());
    tv=(TextView)popup.findViewById(R.id.snippet);
    tv.setText(marker.getSnippet());

    return(popup);
  }
} 
```

如果要替换整个窗口，则必须`getInfoWindow()`返回一个`View`. 如果`getInfoWindow()`返回`null`，`getInfoContents()`则用于窗口的内容。`InfoWindowAdapter`然后，您将via的实例附加`setInfoWindowAdapter()`到您的`GoogleMap`.

在您的情况下，您可以使用自己的布局来确保正确实施 RTL。原则上，这应该可以解决这个问题。可以想象，Maps V2 做了一些奇怪的事情，破坏了通常应该工作的 RTL 代码，在这种情况下，您需要[提交问题](http://code.google.com/p/gmaps-api-issues/issues/list)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-26T13:02:23.993

添加有关 CommnsWare 答案的更多信息：

在我写这篇推荐信的那一刻，地图本身似乎`layout_direction="LTR"`意味着你的标题不会在 RTL 桌面上翻转。解决方案很简单：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="wrap_content"
android:layout_height="48dp"
android:layoutDirection="locale"
>
    ....
</RelativeLayout> 
```

请注意，我使用的是语言环境的布局方向，而不是继承的方向。我在这里对相应的 Google 错误报告发表了评论：[https ://code.google.com/p/gmaps-api-issues/issues/detail?id=5608#makechanges](https://code.google.com/p/gmaps-api-issues/issues/detail?id=5608#makechanges)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T13:21:12.940

我注意到这个错误只发生在 LinearLayout 上（这很奇怪）。

请尝试使用 RelativeLayout，或者，如果您有 API 17 及更高版本，请为每个 TextView 设置 textDirection，它应该可以工作

# ruby-on-rails - 安装导轨时出错：构建本机扩展时出错（-Wl insilde ld 调用）

> ID：14121917
> 
> 赞同：5
> 
> 时间：2013-01-02T12:19:00.410
> 
> 标签：ruby-on-rails, haiku

目前我正在尝试在 Haiku R1 aplha 4 OS 上安装 rails。

我必须警告你，我对 Haiku 和 ruby​​ 也很陌生。我没有找到有类似问题的帖子，如果我错了并且这样的话题已经存在，我非常抱歉。

**脚步：**

1.  我已经用[haikuporter安装了 ruby​​ 1.9.1](http://ports.haiku-files.org/wiki/Installation)
2.  然后执行*gem update --system* //一切似乎都很好
3.  最后*gem install rails*

**输出：**

> 正在取...
> 
> 获取 bla bla bla
> 
> 获取：json-1.7.6.gem (100%)
> 
> 构建原生扩展。这可能需要一段时间...
> 
> 错误：安装导轨时出错：错误：无法构建 gem 原生扩展。
> 
> ```
>  /boot/common/bin/ruby extconf.rb 
> ```
> 
> 创建 Makefile
> 
> 制作 gcc -I。-I/boot/common/include/ruby-1.9.1/i586-haiku -I/boot/common/include/ruby-> 1.9.1/ruby/backward -I/boot/common/include/ruby-1.9\. 1-I。-DJSON_GENERATOR -O2 -g -Wall -Wno-括号 -O3 -Wall -O0 -ggdb -o generator.o -c generator.c
> 
> ld -shared -o generator.so generator.o -L。-L/boot/common/lib -Wl,-R/boot/common/lib -L. -L/boot/develop/lib/x86 -lroot -L/boot/common/lib
> 
> ld：无法识别的选项 '-Wl,-R/boot/common/lib' ld：使用 --help 选项获取使用信息
> 
> make: *** [generator.so] 错误 1

我在这里调查了一下。-Wl 选项用于间接调用链接器（例如从 gcc 调用）。

ld 没有 -Wl，所以看起来错误很明显 - 我们在 ld 调用中不需要 -Wl。

然后我问自己“好的，你有可能的解决方案 - 只是删除这个 -Wl，但是这个脚本在哪里？” 我不知道在哪里看=（

问题也可能不那么明显，我应该做一些复杂的事情（包括仪式舞蹈）

所以，我发现我需要帮助，否则我会在显示器前用聪明的脸度过一生。

请问，有什么建议吗？我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-17T12:40:29.200

这看起来像这个问题的重复：

[构建 gem 原生扩展失败](https://stackoverflow.com/questions/13767725/unable-to-install-gem-failed-to-build-gem-native-extension-cannot-load-such/13767801#13767801)

所以，尝试安装

```
ruby-dev 
```

或者

```
ruby1.9.1-dev 
```

# java - 强制 JTextField 在出现时选择其所有内容

> ID：14121918
> 
> 赞同：10
> 
> 时间：2013-01-02T12:19:02.180
> 
> 标签：java, swing, jtextfield

我有一个`JLabel`，当您单击它时，它会替换为`JTextField`. 我需要`JTextField`它在出现时自动选择它的所有文本。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T12:54:47.593

解决方案一：通过焦点事件进行。不是最好的解决方案。

```
public static void main(final String[] args) {
    // simple window preparation
    final JFrame f = new JFrame();
    f.setBounds(200, 200, 400, 400);
    f.setVisible(true);

    { // this sleep part shall simulate a user doing some stuff
        try { 
            Thread.sleep(2345);
        } catch (final InterruptedException ignore) {}
    }

    { // here's the interesting part for you, this is what you put inside your button listener or whatever
        final JTextField t = new JTextField("Hello World!");
        t.addFocusListener(new FocusListener() {
            @Override public void focusLost(final FocusEvent pE) {}
            @Override public void focusGained(final FocusEvent pE) {
                t.selectAll();
            }
        });
        f.add(t);
        f.validate();

        t.requestFocus();
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-02T12:56:09.700

[JTextField.selectAll()](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#selectAll%28%29)是您所需要的。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SelectAll
{
    private int count = 0;

    private void displayGUI()
    {
        JFrame frame = new JFrame("Select All");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final JPanel contentPane = new JPanel();
        JButton addButton = new JButton("Add");
        addButton.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent ae)
            {
                JTextField tfield = new JTextField(10);
                tfield.setText("" + (++count));             
                contentPane.add(tfield);
                tfield.requestFocusInWindow();
                tfield.selectAll();

                contentPane.revalidate();
                contentPane.repaint();
            }
        });

        contentPane.add(addButton);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }
    public static void main(String... args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new SelectAll().displayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T12:48:51.803

JTextField 类在其 API 中包含用于此目的的方法。

这可以帮助：

[http://forums.codeguru.com/showthread.php?308517-How-do-you-highlight-the-text-in-a-JTextfield](http://forums.codeguru.com/showthread.php?308517-How-do-you-highlight-the-text-in-a-JTextfield)

# maven - Maven Archetype Plugin - 如何使用不包含 pom.xml 的部分原型？

> ID：14121923
> 
> 赞同：5
> 
> 时间：2013-01-02T12:19:17.797
> 
> 标签：maven, plugins, pom.xml, archetypes

我们想创建一个部分原型来将一个`custom-pom.xml`以及其他资源添加到现有项目中。然后自定义 pom 将通过`mvn -f custom-pom.xml`.

因此，我们的原型包含 a ，但在同一目录`src/main/resources/archetype-resources/osgi-pom.xml`中不包含 a 。`pom.xml`

我们使用`archetype:generate`适当的参数化来在现有项目上运行此原型。这会产生：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) on project standalone-pom: org.apache.maven.archetype.exception.ArchetypeGenerationFailure: Error merging velocity templates: Unable to find resource 'archetype-resources/pom.xml' -> [Help 1] 
```

作为测试，我们创建了一个假人`archetype-resources/pom.xml`然后重新运行`generate`目标。这会产生：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) on project standalone-pom: Don't override file /tmp/archetype/fabric-rf-server/pom.xml -> [Help 1] 
```

我们看到了[这个](http://www.avajava.com/tutorials/lessons/how-do-i-create-an-archetype-that-can-run-on-an-existing-project.html)没有`archetype-resources/pom.xml`. 然而，我们使用的是 Archetype 2.0x 标准，这可能是该策略适用于该作者而不适用于我们自己的原因。

我们如何解决这个问题？部分原型是否不适合将资源插入现有的 Maven 项目 - 项目是否必须是非 Maven？

我们搜索了[Maven Archetype 插件 2.2 文档](http://maven.apache.org/archetype/maven-archetype-plugin/index.html)，但几乎没有提到部分原型及其特殊行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T12:59:09.393

事实证明，OP 中列出的第二条错误消息是由于 POM 属性冲突（`artifactId`和`groupId`）`version`。从`archetype-resources/pom.xml`解决的问题中删除这些。

部分原型实际发生的情况是现有项目的 POM 与原型中的 POM 合并。所以这个属性冲突导致合并失败。

我们确定在浏览[源代码](http://maven.apache.org/archetype/archetype-common/xref/org/apache/maven/archetype/generator/DefaultFilesetArchetypeGenerator.html)后应该进行合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T13:43:45.480

Per **Don't override file error**，这是因为有一个或多个重叠的文件集，配置为将相同的文件复制到相同的位置，检查您的原型的“ `achetype-metadata.xml`”，删除重复的配置将解决此问题

对于下面的例子，如果配置文件夹中有一个 test.xml，它将被速度处理两次，对于第二个进程，它将打印警告。如果文件是 pom.xml，会导致构建错误

```
 <fileSet filtered="true" encoding="UTF-8">
  <directory>config/src</directory>
  <includes>
    <include>**/*.vm</include>
    <include>**/*.xml</include>
  </includes>
</fileSet>
<fileSet filtered="true" encoding="UTF-8">
  <directory>config</directory>
  <includes>
    <include>**/*.xml</include>
  </includes>
</fileSet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-13T02:05:19.533

不要覆盖文件错误，因为有一个或多个重叠的文件集。

删除重复的文件集将解决问题。

# objective-c - 如何正确处理应用内购买？

> ID：14121930
> 
> 赞同：2
> 
> 时间：2013-01-02T12:19:38.217
> 
> 标签：objective-c, in-app-purchase

我是应用内购买的新手，我遇到了问题。

现在购买流程如下：

1.  单击“是”并准备使用`UIAlertViewDelegate`方法购买。
2.  `paymentQueue:updatedTransaction`用 case: 调用`SKPaymentTransactionStatePurchasing`。
3.  Next 调用与 case 相同的方法`SKPaymentTransactionStatePurchased`。我的功能在此状态下已解锁（此状态应在购买过程结束时）
4.  有关购买的密钥存储在钥匙串中。
5.  再次称为步骤 2。
6.  这是关于购买功能的问题（由 StoreKit 生成）。购买前已解锁功能 - 用户现在可以取消购买。
7.  最后，我有上述方法与案例`SKPaymentTransactionStateFailed`，因为项目是在步骤 3 中购买的。

问题出在哪里？我该如何解决？

这是我的代码：

```
#pragma mark - UIAlertViewDelegate Methods
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

if (alertView == askToPurchase) {

    if ([SKPaymentQueue canMakePayments]) {
    //prepare to purchase            
        SKProductsRequest *request =[[SKProductsRequest alloc] initWithProductIdentifiers:
                                     [NSSet setWithObject:completeIdentifier]];
        request.delegate = self;
        [request start];
    }
    else {
    //...
    }
}
}

#pragma mark - SKProductsRequestDelegate Methods
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {

SKProduct *validProduct = nil;
int count = [response.products count];

if (count > 0) {

    validProduct = [response.products objectAtIndex:0];

    SKPayment *payment = [SKPayment paymentWithProductIdentifier:completeIdentifier];
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    [[SKPaymentQueue defaultQueue] addPayment:payment];
}
else {
// item not available.
}
}

#pragma mark - SKPaymentTransactionObserver Methods
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {

for (SKPaymentTransaction *transaction in transactions) {

    switch (transaction.transactionState) {

        case SKPaymentTransactionStatePurchasing:
        {
           //processing...            
            break;
        }

        case SKPaymentTransactionStatePurchased:
        {
    //purchased.

            NSError *error = nil;
            [STKeychain storeUsername:identifier andPassword:@"Purchased" forServiceName:[[NSBundle mainBundle] bundleIdentifier] updateExisting:YES error:&error];

            if (error) {

                // Error with store key in keychain.
            }

            [self.delegate TSIAPHelperResponse:[NSDictionary dictionaryWithObjectsAndKeys:
                                               identifier, @"identifier",
                                               [NSNumber numberWithBool:TRUE], @"success",
                                               nil]];
            break;
        }

        case SKPaymentTransactionStateRestored:
        {
            [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
    // restored.            
            break;
        }

        case SKPaymentTransactionStateFailed:
        {
            if (transaction.error.code != SKErrorPaymentCancelled) {
        //failure..                   
            }

            [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
    //cancelled.            
            break;
        }

        default:
            break;
    }
}
}

- (void)requestDidFinish:(SKRequest *)request {

}

- (void)request:(SKRequest *)request didFailWithError:(NSError *)error {
// failed to connect
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:27:43.830

我认为本教程是正确描述**应用内购买**购买过程的最佳教程

[应用内购买](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)

# c# - Windows Phone 8 镜头应用程序覆盖

> ID：14121934
> 
> 赞同：0
> 
> 时间：2013-01-02T12:20:08.943
> 
> 标签：c#, image, windows-phone-8

我正在用 C# 编写一个 Windows Phone 8 镜头应用程序，并且想覆盖当前时间和位置等文本，但我可以弄清楚如何在图像上绘制文本。

我将 PhotoCamera 类用作 Canvas 背景的 VideoBrush 作为取景器的源。

使用 PhotoCamera 类时，我在互联网上搜索了有关叠加层的信息，但找不到任何东西。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:30:45.450

我还没有完成任何#WP8 特定的相机工作/镜头开发，但是在#WP7 中您需要创建一个 WriteableBitmap，然后对其进行特定操作。就像在这种情况下覆盖时间戳一样。

看看[http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)因为它提供了许多扩展方法 使用 nuget / 包管理器[http://nuget.org/packages/WriteableBitmapEx下载它](http://nuget.org/packages/WriteableBitmapEx)

# c# - 检查数字是否在增加？

> ID：14121937
> 
> 赞同：0
> 
> 时间：2013-01-02T12:20:24.233
> 
> 标签：c#

我如何检查数字是否在增加？123456-真 423659-假

我试试

```
while (newNumber != 0)
         {

             string a = newNumber.ToString().Substring(0, 1);
             string b = newNumber.ToString().Substring(0, 2);

             input1 = Convert.ToInt32(a);
             input2 = Convert.ToInt32(b);

             if (input1 < input2)
             {
                 ////how do i increase substring a&b +1 ?

             }

         }

    } 
```

另外，如果没有 substring 方法，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:35:00.707

无需在 和 之间来回转换`string`数字`int`。在 C# 中，字符串可以作为字符数组进行枚举，并且字符之间是可比较的：

```
bool IsIncreasing(int number)
{
    string text = number.ToString();
    char previous = '0';

    foreach(char c in text)
    {
        if(c <= previous)
            return false;
        previous = c;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:29:48.827

您使用的方法不是一个很好的方法。首先，b 总是大于 a，因为您将 1 和 2 输入到长度函数中，而不是位置。因此，例如，如果您取数字 12345，则 a 为 1，b 为 12。另外，Substring 方法是在调用时计算的，因此如果不再次调用 Substring，则定义后无法修改参数。可以这样想：如果您将方法的结果分配给变量，则该方法必须计算该结果，因此如果您想要不同的结果，则必须再次计算它。但是，您根本不需要使用 Substring 方法。在 C# 中，字符串可以通过索引来访问，所以你可以说`myString[0]`对于第一个元素（请记住，C# 中的索引是 0 索引，所以第一项是索引 0）。要执行您正在检查的操作，您可以使用 for 循环，如下所示：

```
if (newNumber != 0)
     {

         string a = newNumber.ToString();

         for(int i = 1; i < a.Length; i++)
         {
             int input1 = Convert.ToInt32(a[i-1]);
             int input2 = Convert.ToInt32(a[i]);

             if (input1 >= input2) //Note the reversed condition
             {
                 return false; //Gives the false result

             }
         }
         return true; //Computation finished, so the number is increasing
     }

} 
```

如果我正确理解了您的问题，此方法应该很快，并且几乎可以完全按照您的意愿进行。另外，我不确定你为什么使用while循环，因为你没有在循环体中更改“newNumber”，程序将在循环中计算，直到有东西停止它。您应该使用 if 语句。While 循环将一遍又一遍地循环遍历主体，在每次开始计算之前测试条件，而 if 语句只运行一次。一般来说，尽可能使用 if 语句，因为 while 循环有可能无限期地运行（因为你可能会进入一个条件永远不会满足的状态，它只会永远循环下去）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:24:52.147

您可以查看字符串中索引为 i 的元素是否大于元素 i-1（对于每个索引以 1 开头的元素）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T12:25:01.377

您可以使用此 LINQ 链。`asc1`并且`asc2`是布尔值，第一个为真，第二个为假。链所做的是检查索引等于零或索引大于零但仍大于前一个的字符数量是否等于字符串的长度。它不解析字符，因为假设字符串只是数字，它们的 ASCII 值将在 30..39 范围内，因此在检查中仍然有效。

```
var s1 = "123456";
var s2 = "423659";
var asc1 = s1.Where((c, i) => i == 0 || c > s1[i - 1]).Count() == s1.Length;
var asc2 = s2.Where((c, i) => i == 0 || c > s2[i - 1]).Count() == s2.Length; 
```

# model-view-controller - extjs 和翻译

> ID：14121939
> 
> 赞同：0
> 
> 时间：2013-01-02T12:20:28.460
> 
> 标签：model-view-controller, extjs, extjs4, translation, extjs-mvc

我看了一下[Sencha 的官方示例](http://cdn.sencha.com/ext-4.1.1a-gpl/examples/locale/dutch-form.html)，现在我想将翻译应用到我的应用程序中。在示例中我遵循了两个 files.js 和 file.html 在同一目录中，但我的应用程序遵循 MVC 架构，因此有所不同。我有一个 js 文件，其中包含要翻译的单词：

```
if (Ext.app.ContactForm) {
Ext.apply(Ext.app.ContactForm.prototype, {
    formTitle: 'Contact Informatie (Dutch)',
    firstName: 'Nom',
    lastName: 'Prénom'
});
} 
```

而且我的应用程序只包含一个file.html 'app.html'，所以我不知道将file.js 放在哪里，在app.html 的同一目录或视图文件夹中！以及它如何在所有应用程序中都可以阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:04:10.960

一种方法是，在 index.html 中包含一个包含所有覆盖的文件！就像您使用官方语言环境文件（ext/locale）一样。

```
 <script type="text/javascript" src="ext-4/locale/ext-lang-de.js"> </script> 
```

只要您不构建应用程序，它就可以工作。

总有一天你想构建你的应用程序，所以我建议一种不同的方式！

**问题：**我发现，如果我正在构建我的应用程序（使用 sencha 工具 -> app-all.js），当我第一次加载应用程序时本地化不起作用。原因是，覆盖是在元素的渲染过程之后应用的。

创建一个名为*myOverrides.js的文件*

```
Ext.define('MyApp.myOverrides', {    

statics: {
    doOverride: function() {

        Ext.apply(Ext.app.ContactForm.prototype, {
            formTitle: 'Contact Informatie (Dutch)',
            firstName: 'Nom',
            lastName: 'Prénom' 
        });
}
}); 
```

为了在初始化之前应用它，我对 app.js 进行了以下更改并将其从 index.html 中删除。

1.  开启*autoCreateViewport* 原因：现在会在渲染进程开始前调用app的launch函数！
2.  在 app.js 的启动功能中执行以下操作

    ```
    launch: function() {
        ...
        //Injecting the overrides
        Ext.Loader.injectScriptElement('app/myOverride.js', Ext.emptyFn);        
        MyApp.myOverride.doOverride();
        Ext.create( "MyApp.view.Viewport");  //We have to create the viewport manually
    } 
    ```

正如我之前所说，这在开发和生产模式中对我有用（使用 app-all.js）。

# android - 将 git 与通过 repo 检索的 android 源存储库一起使用

> ID：14121942
> 
> 赞同：2
> 
> 时间：2013-01-02T12:20:44.903
> 
> 标签：android, git, android-source, repository

我使用 repo 下载了 android 源代码。但是，如果我尝试在 .repo 所在的目录中打印 git status ，它会说

```
 git status
 fatal: Not a git repository (or any of the parent directories): .git 
```

我该怎么做才能让 git 在那个目录中工作？

ls -a 的输出：

```
cts       external    libnativehelper  prebuilts
abi       dalvik       frameworks  Makefile         .repo
bionic    development  gdk         ndk              sdk
bootable  device       hardware    packages         system 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:22:17.223

`repo`用于轻松管理多个相关`git`存储库。顶级目录 (TLD) 包含目录`.repo`. `repo`因此，您可以从 TLD调用命令。

`.git`但是顶层没有目录。这告诉您 TLD 没有 git 存储库。事实上，`repo`管理的许多 git 存储库都在各个子目录中。因此，您必须到`cd`包含文件夹的特定子目录才能为该存储库`.git`发出命令。`git`

如果您希望对由 管理的所有 git“项目”执行相同的命令，请从 TLD`repo`发出以下命令：`repo`

[`repo forall -c COMMAND`](http://source.android.com/source/using-repo.html#forall)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:41:39.207

您使用 `repo`该存储库的工具。Android 源站点提供了一些关于[版本控制](http://source.android.com/source/version-control.html)的好信息。

> Repo 是我们构建在 Git 之上的存储库管理工具。Repo 在必要时统一了许多 Git 存储库，上传到我们的修订控制系统，并自动化部分 Android 开发工作流程。Repo 并不是要取代 Git，只是为了让在 Android 环境中使用 Git 更容易。repo 命令是一个可执行的 Python 脚本，您可以将其放在路径中的任何位置。在使用 Android 源文件时，您将使用 Repo 进行跨网络操作。例如，使用单个 Repo 命令，您可以将多个存储库中的文件下载到本地工作目录中。

我不确定如何使 git 命令在该目录中工作，但是从[这个链接](http://www.innovantesindia.com/wordpress/2011/08/04/repo-reference-why-we-require-repo-on-top-of-git-in-development-project/)和上面的定义来看，我相信 repo 实际上具有运行所有 git 功能的能力。检查上面的链接以获取参考。

> 回购状态 [项目列表]
> 
> 在指定的每个项目中显示与当前工作目录、暂存区域和分支 (HEAD) 上的最新提交有关的文件状态。

# java - Spring WS 在模式实例的命名空间声明方面存在问题

> ID：14121946
> 
> 赞同：2
> 
> 时间：2013-01-02T12:21:03.937
> 
> 标签：java, spring, soap, soapui, spring-ws

这是我的请求`Envelope`，`xsi:xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"`声明放在我的`myRequestMethod`XML 标记中：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
                  xmlns:sd="http://www.foo.bar/ws" 
                  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soapenv:Header/>
    <soapenv:Body >
     <sd:myRequestMethod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
       <sd:name xsi:nil="true"/> 
```

这有效（用 SoapUI 测试），但是当我的用户生成soap客户端时，`xsi:xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"`声明会自动放在`Envelope`这样的标签中（最外面的标签）：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
                  xmlns:sd="http://www.foo.bar/ws" 
                  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Header/>
    <soapenv:Body >
     <sd:myRequestMethod>
       <sd:name xsi:nil="true"/> 
```

这给了他

```
The namespace associated with the prefix 'xsi' could not be resolved. 
```

这是正常的行为吗，如果肥皂不在内部标签中，肥皂就无法理解它吗？或者我可以以某种方式配置我的 spring-ws 以允许它？**用户自动生成客户端和请求，所以他不能改变他的立场。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:23:47.623

两种 XML 都是合法使用 XML 命名空间的实例。我怀疑文档处理基础架构中存在错误，在该错误中处理*正文*的内容时没有正确传播所有声明的命名空间前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:34:34.200

在创建 WebService 方法时，您可以指定名称空间。如果你让它自己生成，它给了我类似的错误。更改命名空间后，就解决了。

尝试做这样的事情，

`@WebMethod(operationName = "operation")`

`@WebResult(name = "Response",targetNamespace = ServiceConstant.TARGET_NAME_SPACE)`

`Response operation(@WebParam(name = "input", mode = WebParam.Mode.IN)Request Request);`

所以这一次你已经定义了自定义的命名空间，无论是 SOAPUI/ SOA Client...

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:14:41.807

我从 castor JIRA 中找到了相关的错误。

我认为还没有解决。所以这仍然是一个错误。

[http://jira.codehaus.org/browse/CASTOR-2813](http://jira.codehaus.org/browse/CASTOR-2813)

> 更具体地说，当提供命名空间信息时出现问题，例如，在 XML 文档的根元素处，并且有人想要解组该文档的子节点（调用 Unmarshaller#unmarshal(org.w3c.dom.节点））。由于命名空间是在根元素中声明的，因此子节点将不具有 Castor 正在寻找的任何 XML 命名空间属性。
> 
> 在这种情况下，某个元素遇到了一个属性 (xsi.*)，而 Castor 不知道命名空间。所以它可能认为 XML 无效并抛出错误。

# canvas - 在 HTML5 上绘制宽度变化的贝塞尔曲线 使用 Javascript

> ID：14121949
> 
> 赞同：3
> 
> 时间：2013-01-02T12:21:19.647
> 
> 标签：canvas, html5-canvas

是否有可能以任何方式改变线宽，例如基于画布的绘图应用程序的图像中的线宽？由于线宽没有类似渐变的值（不同的开始 - 不同的结束），我正在寻找尽可能接近下图的最佳方法。

![平滑线宽](../Images/b4b8e552db098e43f57c1345e72f896b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:09:30.853

HTML5 `<canvas>`API 不提供如此复杂的功能。

您最好的选择是使用您需要的任何算法编写您自己的线像素渲染器。然而，渲染器可能有点慢，因为逻辑必须用纯 Javascript 实现。

在这种情况下，问题变得更加通用“如何在位图上绘制不同宽度的贝塞尔曲线”，而 Javascript`<canvas>`只是该算法的一种实现。

例子：

[如何平滑地改变使用 glDrawArray() 绘制的贝塞尔曲线的各个点的宽度](https://stackoverflow.com/questions/5783362/how-to-smoothly-vary-width-at-various-points-of-a-bezier-curve-drawn-using-gldra)

我还建议您研究像 Inkscape 这样的开源绘图应用程序的源代码，它们是如何做到这一点的。

# asp.net - 绑定到 girdview 时出现错误数据源

> ID：14121953
> 
> 赞同：1
> 
> 时间：2013-01-02T12:21:26.657
> 
> 标签：asp.net, membership-provider

我有一个`gridview`并且我正在尝试绑定数据：

```
string id = Request.QueryString["uid"].ToString();

MembershipUser u = Membership.GetUser(new Guid(id)); 

GridView1.DataSource = Membership.GetUser(u.ProviderUserKey); 

GridView1.DataBind(); 
```

我收到一个错误：

```
Data source is an invalid type.  It must be either an IListSource,
IEnumerable, or IDataSource. 
```

但我试过：

```
GridView1.DataSource = Membership.GetAllUsers(); 
```

上面的代码ok

我如何`gridview`通过`ProviderUserKey`类似字符串将数据绑定到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:09:28.470

```
GridView1.DataSource = Membership.GetAllUsers();
GridView1.DataBind(); 
```

必须工作：http: [//msdn.microsoft.com/en-us/library/dy8swhya.aspx](http://msdn.microsoft.com/en-us/library/dy8swhya.aspx)

检查你的语法，你最后没有“ **s** ”字母。

Membership.GetAllUser **s** ();

# android - 通过 Maps API v2 处理 SurfaceView 中的触摸事件

> ID：14121955
> 
> 赞同：11
> 
> 时间：2013-01-02T12:21:35.750
> 
> 标签：android, google-maps, google-maps-android-api-2

我在创建将在用户移动地图时触发的事件处理程序时遇到问题。有`OnCameraChangeListener`，但在地图移动停止*后触发。*

我已经创建`SurfaceView`了地图，现在我不知道如何处理`onScroll`来自`OnGestureListener`.

这是示例代码：

```
SurfaceView sv = new SView();
sv.setZOrderOnTop(true);
mapView.addView(sv); 
```

...

```
public class SView extends SurfaceView implements Runnable, android.view.GestureDetector.OnGestureListener {
...
@Override
public boolean onTouchEvent(MotionEvent event) {
    //this worked in Overlay in Maps API v1
    if(gestureDetector.onTouchEvent(event)) {
        return true;
    }
    return false;
}
...

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
    Log.i("test","onScroll");
    return false;
}

...
} 
```

如果我`return true`在`onTouchEvent`,`onScroll`中设置，但我无法移动 Map（这很明显，事件已被消耗），并且我不知道如何将事件分派到 Map 对象。

任何人都知道如何`SurfaceView`在地图移动时更新？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T23:44:51.283

我已经实施了一些其他解决方案来解决这个问题。我所做的 - 是将我的 GoogleMap 放在自定义的 RelativeLayout 中。之后`onInterceptTouchEvent`回调像一个魅力一样工作，底层地图按预期接收触摸事件

这是我的xml：

```
<com.my.package.name.map.MapRelativeLayout
    android:id="@+id/map_root_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

     <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/>

</com.my.package.name.map.MapRelativeLayout> 
```

和自定义相对布局：

```
package com.my.package.name.map;

import android.content.Context;
import android.util.AttributeSet;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.widget.RelativeLayout;

public class MapRelativeLayout extends RelativeLayout
{
    private GestureDetector gestureDetector;

    public MapRelativeLayout(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        gestureDetector = new GestureDetector(context, new GestureListener());
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev)
    {
        gestureDetector.onTouchEvent(ev);
        return false;
    }

    private class GestureListener extends GestureDetector.SimpleOnGestureListener {

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }
        @Override
        public boolean onDoubleTap(MotionEvent e) {
            return false;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY)
        {
            return false;
        }

        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2,
                float distanceX, float distanceY)
        {
            //do whatever you want here
            return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T17:47:03.990

来自：[Android ListView：覆盖导致不执行滚动](https://stackoverflow.com/questions/5261217/android-listview-overriding-causes-scrolling-do-not-executed)

> 您是否尝试过调用`super.onTouchEvent(event)`您的 `onTouchEvent`方法？
> 
> **编辑**- 我认为你也想`false`在你的`onScroll`方法中返回。
> 
> 那么你的`onTouchEvent`方法应该是：
> 
> ```
> @Override
> public boolean onTouchEvent(MotionEvent event) {
>     if (gestureDetector.onTouchEvent(event)) {
>         return true;
>     }
>     return super.onTouchEvent(event);
> } 
> ```

其他可能有用的链接：

*   [Android：如何判断视图是否正在滚动](https://stackoverflow.com/questions/2480187/android-how-to-tell-if-a-view-is-scrolling)
*   [将 GestureOverlayView 添加到我的 SurfaceView 类，如何添加到视图层次结构？](https://stackoverflow.com/questions/3375967/adding-gestureoverlayview-to-my-surfaceview-class-how-to-add-to-view-hierarchy?rq=1)
*   [Android onFling 没有响应](https://stackoverflow.com/questions/4522637/android-onfling-not-responding)
*   [OnGestureListener onDown 方法永远不会被调用](https://stackoverflow.com/questions/11730425/ongesturelistener-ondown-method-never-gets-called)
*   [覆盖与 ScrollView 竞争的 onTouchEvent](https://stackoverflow.com/questions/6194739/overriding-ontouchevent-competing-with-scrollview)

# jquery - Photoswipe 没有在 phonegap 上触发（Android）

> ID：14121956
> 
> 赞同：0
> 
> 时间：2013-01-02T12:21:39.033
> 
> 标签：jquery, cordova, jquery-mobile, photoswipe

我是 jquery mobile 和 phonegap 的相对初学者，我试图使用 photoswipe 来让照片库正常工作。我让它在您单击图像时出现的位置工作，但我无法让它在页面加载时触发类似的单击事件。

我在下面附上了我正在使用的代码：

```
<html>

<head>

    <link href="http://code.jquery.com/mobile/1.0rc2/jquery.mobile-1.0rc2.min.css" rel="stylesheet" />

    <link href="photoswipe.css" type="text/css" rel="stylesheet" />
    <link rel="stylesheet" href="jquery.mobile.structure-1.2.0.min.css" />
    <link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />
    <script type="text/javascript" src="klass.min.js"></script>
    <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" src="code.photoswipe.jquery-3.0.4.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>

</head>

<body>
<div id="photos" data-role="page" data-add-back-btn="true">

            <script type="text/javascript">
                $("#photos").on('pageshow', function() {

                    (function(window, $, PhotoSwipe)
                    {
                        $(document).ready(function()
                        {

                            $("#gallery a").photoSwipe(
                            {
                                enableMouseWheel: false,
                                enableKeyboard: false
                            });
                            $("#gallery a:first").click();

                        });

                    }(window, window.jQuery, window.Code.PhotoSwipe));

                });

            </script>
        <div data-role="content">

            <div id="gallery">

            <a href="images/full/001.jpg" rel="external"><img src="images/thumb/001.jpg" alt="Image 001" /></a>
            <a href="images/full/002.jpg" rel="external"><img src="images/thumb/002.jpg" alt="Image 002" /></a>
            <a href="images/full/003.jpg" rel="external"><img src="images/thumb/003.jpg" alt="Image 003" /></a>
            <a href="images/full/004.jpg" rel="external"><img src="images/thumb/004.jpg" alt="Image 004" /></a>
            <a href="images/full/005.jpg" rel="external"><img src="images/thumb/005.jpg" alt="Image 005" /></a>
            <a href="images/full/006.jpg" rel="external"><img src="images/thumb/006.jpg" alt="Image 006" /></a>
            <a href="images/full/007.jpg" rel="external"><img src="images/thumb/007.jpg" alt="Image 007" /></a>
            <a href="images/full/008.jpg" rel="external"><img src="images/thumb/008.jpg" alt="Image 008" /></a>
            <a href="images/full/009.jpg" rel="external"><img src="images/thumb/009.jpg" alt="Image 009" /></a>

            </div>
        </div>
</div>
</body>

</html> 
```

我认为 $(document).ready 可能存在问题，因为我知道 jquery mobile 没有这个概念，但我不确定这是否会影响 photoswipe。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:42:36.997

要使用 jQuery 模拟点击事件，可以使用 trigger 方法。

在你的代码中试试这个：

```
$("#gallery a:first").trigger("click"); 
```

这应该模拟事件并启动您的 photoswipe 幻灯片。我希望这有帮助。

# java - Java 趋势和模式发现算法

> ID：14121961
> 
> 赞同：0
> 
> 时间：2013-01-02T12:22:18.160
> 
> 标签：java, algorithm, design-patterns

我正在编写一个 java 程序来尝试识别股票市场的趋势，并且我想识别以下模式：

其中`EMA`价值下降`SMA`超过约。0.7%（第 1 天），您可以寻找未来 2-3 天两者之间 0.2%-0.5% 的波动（`SMA`&`EMA`上下关系的变化）。这表明卖出信号。

我有一个浮点值数组，`EMA`然后`SMA`我有一个单独的浮点数组`percentDif`，它包含 EMA 和 SMA 之间的百分比差异。例如，这些是`EMA`,`SMA`和`percentDif`数组的前两组值

```
EMA 314.395         SMA 314.9859884       percentDif -0.001876237
EMA 313.9476        SMA 314.4888908        percentDif -0.001721176 
```

我已经编写了这个方法来识别我想要的模式，但它不能正常工作，有没有更好的方法可以做到这一点？

```
public void trend(){

    /*
     * Trend indicator pattern
     */
    float valueDrop = -0.7f;

    float minFluxPos = 0.2f;
    float maxFluxPos = 0.5f;

    float minFluxNeg = -0.2f;
    float maxFluxNeg = -0.5f;

    for(int i = 0; i< percentDif.length-2; i++)
    {
        //If the difference between EMA and SMA is greater or equal to -0.7 percent
        if(percentDif[i] >= valueDrop){
            //If the next day the percentage difference fluctuates between 0.2 or 0.5 either way
            if( ((percentDif[i+1] > minFluxPos) && (percentDif[i+1] < maxFluxPos))
                    || ((percentDif[i+1] > minFluxNeg) && (percentDif[i+1] < maxFluxNeg)) )
            {
                //Indicates price drop and therefore sell signal
                System.out.println("Trend Indicated - SELL");
            }
        }
    }
} 
```

我在`percentDif`数组中输入了以下值：5 -0.8 -0.3

这些值符合模式的描述，因此应该触发 print 语句，但它没有这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:31:42.373

到目前为止，这段代码中效率最低的事情是写入控制台。鉴于您很可能只有 10 年内的每日数据，即 2500 个样本，因此以这种方式扫描大约需要 1 毫秒。

我怀疑你的循环结束得太早了试试

```
for(int i = 0; i < percentDif.length - 1; i++) 
```

你的最小值/最大值是错误的

```
float minFluxNeg = -0.5f;
float maxFluxNeg = -0.2f; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:51:53.933

对于负通量值，您有错误的比较运算符。if 语句应该是：

```
if( ((percentDif[i+1] > minFluxPos) && (percentDif[i+1] < maxFluxPos))
                || ((percentDif[i+1] < minFluxNeg) && (percentDif[i+1] > maxFluxNeg)) ) 
```

此外，鉴于您提供的数据和边界，条件永远不会成立。在第一次迭代中，外部条件成立（如 5 > -0.7）但内部条件不成立（因为 -0.8 既不在 0.2 和 0.5 之间，也不在 -0.2 和 -0.5 之间）。在第二次也是最后一次迭代中，外部条件失败为 -0.8 < -0.7。

# android - Android如何测量上传/下载速度wifi/2G/3G ...？

> ID：14121962
> 
> 赞同：4
> 
> 时间：2013-01-02T12:22:20.460
> 
> 标签：android, file-upload, download

我在谷歌上搜索过，但没有找到任何测量安卓`wifi/2G/3G`网络速度的教程。

[通过大量搜索终于得到了这个](http://www.gregbugaj.com/?p=47)下载速度，任何人都知道上传速度。

任何人指导我是否有任何`API`或教程存在？任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:27:50.317

您必须实施自己的速度测试测量程序。你可以在这里找到Ookla的speedtest的算法描述： [http ://wiki.ookla.com/lq_test_flow](http://wiki.ookla.com/lq_test_flow)

基本上你要做的就是执行下载和上传例程并测量下载和上传的时间。您可以使用*System.nanoTime()*获得更准确的时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:28:30.583

不需要特殊工具的非常简单的通用方法是：

将已知大小的文件上传/下载到某个服务器（如果您没有自己的服务器，可以使用 dropbox 等）并使用[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)测量所花费的时间。

然后，您可以使用收集的数据轻松计算速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-13T12:29:45.787

没有内置的 Android 库，因为有许多采样方法，没有一个“真正的”速度。您可以查看以下标准，让您更了解推荐的方法：

[https://itu.int/en/ITU-T/CI/Pages/IM/Internet-speed.aspx](https://itu.int/en/ITU-T/C-I/Pages/IM/Internet-speed.aspx)

[https://itu.int/itu-t/recommendations/rec.aspx?rec=q.3960](https://itu.int/itu-t/recommendations/rec.aspx?rec=q.3960)

[https://itu.int/ITU-T/recommendations/rec.aspx?rec=14125](https://itu.int/ITU-T/recommendations/rec.aspx?rec=14125)

[https://tools.ietf.org/pdf/rfc6349.pdf](https://tools.ietf.org/pdf/rfc6349.pdf)

无论您选择哪种算法，请确保其多线程（在多个线程中并行下载文件，上传相同）

您还可以使用我们的 Android SDK，它应该可以满足您的需求并符合 ITU 标准：

[https://github.com/speedchecker/speedchecker-sdk-android](https://github.com/speedchecker/speedchecker-sdk-android)

# python - 从时间值列表中查找最大时间值

> ID：14121967
> 
> 赞同：0
> 
> 时间：2013-01-02T12:22:44.537
> 
> 标签：python, python-2.6

我需要从列表中找到最大时间值：

```
num[2] = 2012-12-16 16:56:31 
```

我尝试过以下操作：

```
max =0
for num in list:
 if num[2] > max:
   max = num
print max 
```

但它显示错误：

```
 if num[5] > max:
TypeError: can't compare datetime.datetime to int 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:23:25.860

你可以做

```
max(my_dates) 
```

不要调用您的列表，列表，因为这会影响内置并在以后产生令人困惑的错误。

不要在此[链接中为您的变量命名](http://docs.python.org/2/library/functions.html)

# css - 如何在全屏时从 Internet Explorer 7 中删除垂直滚动条？

> ID：14121972
> 
> 赞同：0
> 
> 时间：2013-01-02T12:23:07.977
> 
> 标签：css, internet-explorer

我的 Internet Explorer 版本是 9。但我使用浏览器模式：IE7 和文档模式：IE7 标准。我的 Asp.Net 项目必须全屏查看且没有垂直滚动条。如何在全屏上删除垂直滚动条。

我使用*溢出：隐藏*的 css 代码，它删除了滚动条，但打破了项目的屏幕，屏幕没有正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:24:38.307

我对我的 css 文件进行了一些更改，垂直滚动条消失了。这里的解决方案：

```
#altPanel, .tampon {
height: 4%;    //Changed
}

body {
background-color:#0ff;

margin-top:0;        //Added
margin-bottom:0;     //Added
} 
```

# c# - 在gridview中选择多个复选框

> ID：14121973
> 
> 赞同：2
> 
> 时间：2013-01-02T12:23:08.967
> 
> 标签：c#, asp.net

在此处输入代码我有一个`CheckBox`内部`GridView`模板。检查a 时`CheckBox`，它应该将列值发送到存储过程，并在另一个 中显示所需的结果`gridview`。当检查两个复选框时，应在另一个GridView中显示两个列的值。

我的问题是单击第二个复选框会删除第一个复选框的值，并且仅导致第二个复选框的值显示在另一个网格视图中。

```
 protected void ChkRule_CheckedChanged(object sender, EventArgs e)
    {
        StringCollection sc = new StringCollection();

        for (int i = 0; i < gdYojnaDtl.Rows.Count; i++)
        {

            string yojnaNo = "";
            CheckBox chl = (CheckBox)gdYojnaDtl.Rows[i].Cells[0].FindControl("CheckBox1");
            //CheckBox chl = (CheckBox)sender;
            if (chl != null)
            {
                if (chl.Checked == true)
                {

                    int rowsNo = (Convert.ToInt16(chl.ToolTip) - 1); 
                    yojnaNo = ((Label)gdYojnaDtl.Rows[rowsNo].FindControl("lblYojnaNo")).Text;
                    sc.Add(yojnaNo);

                }

            }
        }

    foreach (string obj in sc)
    {

        objyojnadetail4.YojnaNo = obj;
        DataTable city = objyojnadetail4.Selectcity();
        gdCityDetail.DataSource = city;

        gdCityDetail.DataBind();

    }

}

 <Columns>
                        <asp:TemplateField HeaderText="Scheme Code">
                        <ItemTemplate>
                            <asp:Label ID="lblYojnaNo" runat="server" Text='<%#Eval("Yojna_No")%>' />

                        </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Scheme Name">
                         <ItemTemplate>
                     <asp:Label ID="lblYojnaName" runat="server" Text='<%#Eval("Yojna_Name")%>' />

                        </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Assistant Name">
                         <ItemTemplate>
                         <asp:Label ID="lblAsstName" runat="server" Text=' <%#Eval("Asst_Name")%>' />

                        </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Select for City">
                        <ItemTemplate>
                 <asp:CheckBox ID="CheckBox1"  runat="server"    AutoPostBack="true" 
                  oncheckedchanged="ChkRule_CheckedChanged" 
                  ToolTip="<%#Container.DataItemIndex+1 %> "   CommandName="cbCity"/>

                        </ItemTemplate>
                        </asp:TemplateField>

                    </Columns> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:09:00.150

```
//**This code is tested and working fine** 
//at aspx page
<columns>
<asp:TemplateField HeaderText="Checkboxes">
        <ItemTemplate>
          <asp:CheckBox ID="cheker" runat="server" />
        </ItemTemplate>
</asp:TemplateField>
</Columns>

//this button is outside gridview but in same page
<asp:Button ID="check" runat="server" CssClass="btnstyle" Text="Check"       OnClick="btnredirect_Click" /> 
```

//代码隐藏中点击事件的方法

```
protected void btnredirect_Click(object sender, EventArgs e)
{
    Button btn = sender as Button;
    switch (btn.ID)
    {
        case "check":
            {
                for(int i=0;i<Gvshowcart.Rows.Count; i++)
                {
                    CheckBox chl =     (CheckBox)Gvshowcart.Rows[i].Cells[0].FindControl("cheker");
                    if (chl != null)
                    {
                        if (chl.Checked == true)
                        {
                            chl.Checked = false;
                        }
                        else
                        {
                            chl.Checked = true;
                        }
                    }

                }

            }
            break;
    } 
```

}

# android - SupportMapFragment 在两个不同选项卡的 Activitygroup 中无法正常工作

> ID：14121977
> 
> 赞同：1
> 
> 时间：2013-01-02T12:23:26.700
> 
> 标签：android, google-maps, activitygroup

我正在使用下面的代码在具有不同 ID 的两个不同选项卡中显示地图。如果我将它用于单个活动，但当我将它用于来自不同选项卡的两个不同活动时，它会完美运行。

情况1

*   单击第一个选项卡，它会正确显示地图
*   单击第二个选项卡，它显示第一个选项卡的地图

案例2

*   单击第二个选项卡，它正确显示地图
*   单击第一个选项卡，它显示地图，因为它在第二个选项卡中我观察到以前的地图与当前地图重叠，因此无法看到我当前的选项卡地图

    ```
    <fragment
    android:id="@+id/map1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" >
    </fragment> 
    ```

# php - codeigniter 将数组数据从模型传递到控制器

> ID：14121978
> 
> 赞同：3
> 
> 时间：2013-01-02T12:23:28.980
> 
> 标签：php, arrays, codeigniter

我在模型的 get_distribuidor() 函数中执行以下查询：

```
public function get_distribuidor()
{
    $this->load->helper('url');

    $query = $this->db->query("SELECT * FROM distribuidor where id_distribuidor='1';");

    foreach ($query->result_array() as $row)
    {
      echo $row['id_distribuidor'];
      echo $row['nome_empresa'];
      echo $row['cod_postal'];
      echo $row['localidade'];
      echo $row['telefone'];
      echo $row['fax'];
      echo $row['email'];
    }

    $res = array(
        'nome_empresa' => $row['nome_empresa'],
        'morada' => $row['morada'],
        'cod_postal' => $row['cod_postal'],
        'localidade' => $row['localidade'],
        'telefone' => $row['telefone'],
        'fax' => $row['fax'],
        'email' => $row['email']
    );

    return $res;

} 
```

现在，将 $res 返回给控制器，我不太清楚如何分隔数组结果包含的多个字段。

我在控制器的功能上使用它：

```
$data['nome_produto']=$this->fichas_model->set_fichas();

$teste=$this->fichas_model->get_distribuidor();

$this->load->view('produtos/ponto1',$data, $teste); 
```

在视图上写这样的东西：

```
<input type="input" name="morada" value="<?php echo $teste['morada'];?>" /><br /> 
```

但它不起作用，有人能指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T12:29:40.380

```
$teste=$this->fichas_model->get_distribuidor();
$this->load->view('produtos/ponto1',$data, $teste); 
```

应该：

```
$data['teste'] = $this->fichas_model->get_distribuidor();
$this->load->view('produtos/ponto1',$data); 
```

如果要将 的内容抓取到变量中，则使用第三个参数[。](http://ellislab.com/codeigniter/user-guide/general/views.html#footer)要将数据传递给视图，您需要将其添加为.`view()``view()``$data`

**例如：**

```
$data = array(
    'title' => 'My Title',
    'heading' => 'My Heading',
    'message' => 'My Message'
);

$this->load->view('blogview', $data);
// You then access $title, $heading, $message in the view file 
```

您对上述编辑所做的基本上是以下内容：

```
$data = array(
    'teste' => $this->fichas_model->get_distribuidor()
);

$this->load->view('produtos/ponto1', $data);
// You then access $teste in the view file, 
// which will be an array so you can access $teste['morada'] 
```

# performance - Erlang 中的接受器池和负载平衡？

> ID：14121987
> 
> 赞同：8
> 
> 时间：2013-01-02T12:24:16.903
> 
> 标签：performance, erlang, load-balancing, unicorn

来自[http://www.erlang.org/doc/man/gen_tcp.html#accept-1](http://www.erlang.org/doc/man/gen_tcp.html#accept-1)：

> 值得注意的是，接受调用不必从套接字所有者进程发出。使用 5.5.3 及更高版本的模拟器，可以从不同的进程发出多个同时接受调用，这允许一个接受器进程池处理传入连接。

**(Q1)**这是否意味着我们可以在 Erlang 中进行[Unicorn](http://unicorn.bogomips.org/)式的负载均衡？

**(Q2)**如果有，是否有任何现有的服务器或库使用此功能？

**(Q3) Unicorn 在请求处理***快速*的假设下工作。在同样的假设下，是否可以通过在 Erlang 中结合接受器和工作器来获得更好的性能？

对于不熟悉 Unicorn 的人来说，它是一个传统的 UNIX prefork web 服务器。工作进程之间的负载平衡由操作系统内核完成。所有工作人员共享一组通用的侦听器套接字，并对它们执行非阻塞的 accept()。内核将决定向哪个工作进程提供套接字，如果没有任何内容可以接受（），工作人员将进入睡眠状态。*对于单个侦听器套接字，我相信当工作进程阻塞 accept() 并且操作系统内核决定“竞赛”的结果时，情况是一样的。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T04:06:37.080

我还在 Erlang Questions 邮件列表中发布了这个问题。*正如Daniel Goertzen*所指出的，Erlang 中有接受器池库，例如[ranch](https://github.com/extend/ranch)和[swarm](https://github.com/jeremey/swarm)。

*   **牧场**与独角兽的工作方式不同，它只在许多进程中“接受”，然后将套接字传递给某个工作进程。

*   **swarm**的工作方式与 Unicorn 的工作方式相同，因为接受者和工作人员是结合在一起的。（感谢*Loïc Hoguin*的指出）但是它们有点不同，因为 swarm 可以在处理已接受的套接字的同时接受一个新的套接字，而 Unicorn 仅在处理已接受的套接字后才接受

我更喜欢 swarm 样式，因为它适用于快速和慢速请求，而 Unicorn 需要快速请求。

> unicorn 没有试图高效地为慢速客户端提供服务，而是依靠缓冲反向代理来有效地处理慢速客户端。
> 
> 独角兽并不适合所有应用程序。unicorn 针对 CPU/内存/磁盘密集型应用程序进行了优化，并且很少花费时间等待外部资源（例如数据库服务器或外部 API）。
> 
> unicorn 对于 HTTP 连接花费大量空闲时间的 Comet/reverse-HTTP/push 应用程序非常低效。

# javascript - 如何使用渐变重新在 HTML5 画布中绘制线条

> ID：14121989
> 
> 赞同：0
> 
> 时间：2013-01-02T12:24:39.400
> 
> 标签：javascript, html, canvas, line, gradient

我在画布中绘制了许多带有渐变的线条，我正在绘制它，也有一个 js fiddle 链接。

[http://jsfiddle.net/mailrox/XWLgD/2/](http://jsfiddle.net/mailrox/XWLgD/2/)

```
var canvas = document.getElementById('c');
var context = canvas.getContext('2d');

context.fillStyle = "rgb(255, 255, 255)";

//draw lines
for (i=1;i<canvas.height;i++){
    if(i%100 == 0){

        //a line
       // linear gradient from start to end of line
       var grad= context.createLinearGradient(50, 50, 150, 150);
       grad.addColorStop(0, "red");
       grad.addColorStop(1, "green");

       context.strokeStyle = grad;
       context.beginPath();
       //line start point
       context.moveTo(0, (i + 20 + 0.5));
       //line end point
       context.lineTo(canvas.width, (i + 20 + 0.5) );

       context.stroke();

       context.closePath();

    }
} 
```

问题是我正在重新启动渐变的每个循环，但是渐变似乎只跨越所有线。如果你看一下链接，它很明显但很难解释。

我想要发生的是每条线都有自己的绿色到红色渐变，而不是穿过所有线的渐变。我是否缺少一些特别的东西来重新启动线条或渐变。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:34:16.830

你的梯度下降了 45 度。想象一下你的渐变穿过整个区域，在那里你可以看到你正在画一条线。

我从此更改了您的代码：

```
//Create a gradient groing from point (50,50) to (150,150)
var grad= context.createLinearGradient(50, 50, 150, 150); 
```

对此：

```
//Create a gradient groing from point (50,50) to (150,50)
var grad= context.createLinearGradient(50, 50, 150, 50); 
```

看一下这个：

[http://jsfiddle.net/XWLgD/3/](http://jsfiddle.net/XWLgD/3/)

PS：我更改了 lineWidth 以突出渐变效果：P

* * *

您甚至可以通过将渐变创建和绘制放在循环之外来缩短和加速代码：

[http://jsfiddle.net/XWLgD/4/](http://jsfiddle.net/XWLgD/4/)

# android - 安卓中的新菜单？

> ID：14121995
> 
> 赞同：1
> 
> 时间：2013-01-02T12:25:00.260
> 
> 标签：android, android-actionbar, android-menu

是否可以创建如下所示的菜单？（对不起图片质量：P）

![在此处输入图像描述](../Images/48cd8ba3252cb746234f9f85d709b695.png)

有可能的？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:38:34.217

使用滑动抽屉检查一下： http: [//www.coderzheaven.com/2011/12/01/slidingdrawer-in-android-a-simple-example/](http://www.coderzheaven.com/2011/12/01/slidingdrawer-in-android-a-simple-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:29:58.833

您可能对[滑动菜单库](https://github.com/jfeinstein10/SlidingMenu)感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:30:18.587

检查本教程以获取[滑动菜单](https://github.com/jfeinstein10/SlidingMenu)。

网上有很多教程和示例可以满足您的需求。

# unit-testing - 使用可标记插件时测试未能包含 Cakesession

> ID：14121999
> 
> 赞同：0
> 
> 时间：2013-01-02T12:25:14.290
> 
> 标签：unit-testing, cakephp, cakephp-1.3

（使用 CakePHP 1.3 和 Taggable 插件。）

运行我的测试时失败并出现错误：

```
Fatal error: Class 'CakeSession' not found in app/plugins/tags/models/behaviors/taggable.php on line 137 
```

在我的测试中，我包括这样的**固定装置**：

```
var $fixtures = array('app.tag','app.tagged'); //including others 
```

但是，当我使用烘焙版本时**它工作正常：**

```
var $fixtures = array('app.plugin.tags.tag','app.plugin.tags.tagged'); 
```

问题在于它现在使用插件测试文件夹中的测试装置。现在，**我可以**在那里添加我的固定装置并完成它，但这似乎不正确。

插件装置（特定于我的应用程序）应该在我的 app/tests 目录中工作，不是吗？

**更新**：实际上，只是注意到我的默认插件测试用例也因同样的错误而失败，所以我现在正在调查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:44:57.400

问题是 Taggable 使用了在测试期间未设置的会话信息。在我的测试用例中，我使用以下代码手动设置了用户 ID，现在它可以工作了：

```
App::import('Component', 'Session');
$Session = new SessionComponent();
$Session->write('Auth.User', array(
    'id' => 1
)); 
```