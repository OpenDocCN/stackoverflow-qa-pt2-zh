# StackOverflow 问答 14368000-14368999

# sql - 对表中的行重新排序的存储过程

> ID：14368019
> 
> 赞同：0
> 
> 时间：2013-01-16T21:18:08.093
> 
> 标签：sql, sql-server, stored-procedures

我的任务是创建自定义存储过程：

```
exec UPDATE_PROJECT_ORDER @PROJECTID=12, @UPDATEMODE=0 
```

这将在表中的一行更新后执行。

不幸的是，我真的很难过（以至于我什至不确定这是否可能）我一直在努力简化我正在做的事情，并想知道我是否可以就代码本身向董事会寻求帮助......

因此，存储过程/代码的目的是通常按顺序对项目列表重新排序，重新排序会根据传入的参数更改，该参数将保留表中设置的值用户并围绕它对列表的其余部分进行排序，或者将其重新编号为序列中的下一个数字。我认为我们可以假设 UPDATEMODE=0 大部分时间都是默认的。

我有一个看起来像这样的表：

```
---------------------------------------
|   ID   |   POSITION   |   OLD_POS   |
---------------------------------------
|   10   |     1        |             |
|   11   |     2        |             |
|   12   |     3        |             |
|   13   |     4        |             |
--------------------------------------- 
```

如果用户决定给 ID 为 12 的记录（ID 与存储过程一起传入）更高的优先级，例如 1，那么应该发生的是其他记录（10 / 11 / 13）应该按顺序重新围绕它排序（2 / 3 / 4），这将影响它们在前端的显示方式，例如

```
---------------------------------------
|   ID   |   POSITION   |   OLD_POS   |
---------------------------------------
|   10   |     2        |      1      |
|   11   |     3        |      2      |
|   12   |     1        |      3      |
|   13   |     4        |      4      |
--------------------------------------- 
```

另一个示例是记录 ID 12 的位置从 1 更改为 7，因此该数据集：

```
---------------------------------------
|   ID   |   POSITION   |   OLD_POS   |
---------------------------------------
|   10   |     2        |      1      |
|   11   |     3        |      2      |
|   12   |     1/7      |      3      |
|   13   |     4        |      4      |
--------------------------------------- 
```

位置数据重新排序为：

```
---------------------------------------
|   ID   |   POSITION   |   OLD_POS   |
---------------------------------------
|   10   |     1        |      2      |
|   11   |     2        |      3      |
|   12   |     7        |      1      |
|   13   |     3        |      4      |
--------------------------------------- 
```

如上所述 - 在存储过程中，需要传入另一个参数（@UPDATEMODE，可以是 0 或 1），这会改变函数的行为，允许用户指定他们想要的位置并重新排序列出它而不是使其成为序列中的下一个数字，例如，它们将第 3 行中的优先级从值 1 更新为值 7

此数据集第 12 行位置值 = 1，但更改为 7，其中 UPDATEMODE 指定为 1：

```
---------------------------------------
|   ID   |   POSITION   |   OLD_POS   |
---------------------------------------
|   10   |     2        |      1      |
|   11   |     3        |      2      |
|   12   |     1/7      |      3      |
|   13   |     4        |      4      |
--------------------------------------- 
```

这将重新排序列表如下：

```
---------------------------------------
|   ID   |   POSITION   |   OLD_POS   |
---------------------------------------
|   10   |     1        |      2      |
|   11   |     2        |      3      |
|   12   |     4        |      1      |
|   13   |     3        |      4      |
--------------------------------------- 
```

在此示例中，存储过程将被称为：

```
exec UPDATE_PROJECT_ORDER @PROJECTID=12, @UPDATEMODE=1 
```

这是我一直在使用的 SQL 代码：

```
-- Declare variables
DECLARE @PROJECTID INTEGER
DECLARE @CURRENTPOSITION INTEGER
DECLARE @ROLLBACKPOSITION INTEGER
DECLARE @STARTPOSITION INTEGER
DECLARE @ENDPOSITION INTEGER

-- For testing hardcode a REQUEST ID
SET @PROJECTID = 12

-- Start Position value
SET @STARTPOSITION = 1

-- End Position value
SELECT @ENDPOSITION = COUNT(ID) FROM PROJECT WHERE PROJECT_ORDER IS NOT NULL

-- Update Rollback column with current value    
UPDATE PROJECT SET OLD_POS = POSITION WHERE POSITION IS NOT NULL

DECLARE cursorProjectPositionUpdate CURSOR fast_forward
FOR 
    SELECT ID, POSITION, OLD_POS
    FROM PROJECT 
    WHERE ID = @PROJECTID
    AND POSITION IS NOT NULL
OPEN cursorProjectPositionUpdate
FETCH NEXT FROM cursorProjectPositionUpdate INTO @PROJECTID, @CURRENTPOSITION, @ROLLBACKPOSITION

WHILE @@FETCH_STATUS = 0
    BEGIN   
        WHILE (@STARTPOSITION <= @ENDPOSITION)
            IF @STARTPOSITION = 1
                UPDATE PROJECT
                SET POSITION = @STARTPOSITION
                WHERE ID = @PROJECTID
                    AND OLD_POSITION = @ROLLBACKPOSITION

            ELSE
                UPDATE PROJECT
                SET POSITION = @STARTPOSITION
                WHERE OLD_POS = @ROLLBACKPOSITION
                    AND ID <> @PROJECTID
        SET @STARTPOSITION = @STARTPOSITION + 1
        FETCH NEXT FROM cursorProjectPositionUpdate INTO @PROJECTID, @CURRENTPOSITION, @ROLLBACKPOSITION
    END
CLOSE cursorProjectPositionUpdate
DEALLOCATE cursorProjectPositionUpdate 
```

我使用了游标，因为最多可以重新排序 25 条记录的硬性限制，所以我不太担心性能。虽然表中可能有超过 25 条记录，这就是为什么我尝试使用 AND POSITION IS NOT NULL 子句排除记录的原因，所以我希望这是可以接受的。

我脑海中的想法是计算我总共有多少条记录有一个位置，然后循环将第一个设置为位置 1，然后将其余的设置为下一个顺序。

我发现的最大问题是记录的匹配，即我的 WHERE 子句，因为存储过程传入​​的唯一内容是我想要设置为位置 1 的 ID，所以我怎么知道接下来是哪个...逻辑是它应该是列表中的下一个最低 ID 号。

这是在 MS SQL Server 中完成的。

我试图避免创建任何临时表，因此需要查看是否可以一并完成。

希望这对某人有某种意义，我对解决方案持开放态度，并将尽可能多地分享信息。

非常感谢！

* * *

**额外的**

根据下面的答案，我一直在考虑这个问题，我再次试图让这个尽可能简单，所以我有存储过程，它传入了一个 PROJECT ID 值，所以如果我循环遍历所有我拥有的与我的项目 ID 不匹配的值将它们从 2 开始重置到我的终点，这是基于我拥有的记录数，一旦这些记录按顺序设置，将传入项目的位置设置为 1 . 我知道这不适合我的更新模式选项，但我担心这只会增加很多复杂性。

因此，就代码而言，您对以下内容有何想法：

```
-- Declare variables
DECLARE @PROJECTID INTEGER
DECLARE @STARTPOSITION INTEGER
DECLARE @ENDPOSITION INTEGER

-- Hardcoded for testing
SET @PROJECTID = 25061

-- Start Position value
SET @STARTPOSITION = 2

-- End Position value
SELECT @ENDPOSITION = COUNT(ID) FROM PROJECT WHERE PROJECT_ORDER IS NOT NULL AND ID <> @PROJECTID 

-- Update Rollback column with current value    
UPDATE PROJECT SET PROJECT_ORDER_RB = PROJECT_ORDER WHERE PROJECT_ORDER IS NOT NULL

-- Loop other records
WHILE (@STARTPOSITION <= @ENDPOSITION)
    UPDATE PROJECT SET PROJECT_ORDER = @STARTPOSITION WHERE ID <> @PROJECTID 
        AND PROJECT_ORDER IS NOT NULL AND (PROJECT_ORDER = 1 OR PROJECT_ORDER => @STARTPOSITION OR PROJECT_ORDER <= @ENDPOSITION)
SET @STARTPOSITION = @STARTPOSITION + 1

-- Finally set passed in Project to Position 1
UPDATE PROJECT SET PROJECT_ORDER = 1 WHERE ID = @PROJECTID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:51:42.033

您不需要模式，您可以设置默认的新位置 = 1，因此如果您想要执行第一个模式，您只需输入 ID，如果您想要执行第二个模式，您需要指定附加变量。

```
Create  Proc update_project_order (@ID Int, @NewPosition Int = 1)
As

Declare @OldPosition Int,
        @Direction Int

Select  @OldPosition = Position
From    tableName
Where   ID = @ID

Set     @Direction =    Case 
                        When    @OldPosition < @NewPosition Then 0
                        When    @OldPosition > @NewPosition Then 1
                        Else    -1
                        End

Update  t
Set     Old_Pos =   Position,
        Position =  Case
                    When    ID = @ID Then @NewPosition
                    When    @Direction = 0 And 
                            Position Between @OldPosition And @NewPosition Then Position - 1
                    When    @Direction = 1 And 
                            Position Between @NewPosition And @OldPosition Then Position + 1
                    Else    Position
                    End
From    tableName t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:43:56.660

看来您可以将其实现为两步过程：

1.  增加位置等于或大于目标位置且小于旧位置的所有项目的位置值
2.  更新应该移动到目标位置的项目

`CASE`你可以用两个更新语句来做到这一点，如果你在其中塞进一点逻辑，甚至可以用一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:29:13.920

这可以通过单个更新语句来完成，不需要 OLD_POS 列或任何类似的东西，也不需要任何循环、游标或其他面向非集合的工件：

```
CREATE Proc UPDATE_PROJECT_ORDER 
(
    @ProjectID      As INT, 
    @StartPosition  As INT,
    @EndPosition    As INT
) As

;With
  cteProjectOld As
(
    SELECT  ID, 
            POSITION,
            Case WHEN POSITION = @StartPosition 
                THEN @EndPosition 
                ELSE POSITION       END As TempPosition,
            Case WHEN POSITION = @StartPosition 
                THEN 1 
                ELSE 0              END As Moved
    FROM    PROJECT
)
, cteProjectNew As
(
    SELECT  *,
            ROW_NUMBER() OVER(PARTITION BY ID ORDER BY TempPosition, Moved) As NewPosition
    FROM    cteProjectOld
)
UPDATE  cteProjectNew
SET     POSITION = NewPosition
WHERE   ID = @ProjectID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T21:45:15.700

我认为这是两种不同的可能性，要么向上移动，要么向下移动。其余的只是位置的算术，可以在单个更新语句中完成。

```
create procedure update_project_order (@ProjectId int, @UpdateMode int default 1)
begin

    declare @ProjectIdPosition int;
    select @ProjectIdPostion = Position
    from t
    where ProjectId = @ProjectId;

    if (@UpdateMode < @ProjectIdPosition)  -- Moving up the list
        update t
            set position = (case when position < @UpdateMode
                                 then position
                                 when position < @ProjectIdPosition
                                 then position + 1
                                 when ProjectId = @ProjectId
                                 then @UpdateMode
                                 when position
                            end);
    else if @UpdateMode > @ProjectIdPosition  -- Moving down the list
        update t
            set position = (case when position < @ProjectIdPostion
                                 then position
                                 when position < @UpdateMode
                                 then position - 1
                                 when ProjectId = @ProjectId
                                 then @UpdateMode
                                 else position
                            end);
end; 
```

注意：我没有测试过这个。这是一个关于如何实现它的想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T22:03:58.690

```
Create Procedure UPDATE_PROJECT_ORDER (@ID int,@Posi int) as
begin

Select Cast(ID as int) as ID,POSITION,Identity(int ,1,1) as NewPos
into #tmp
from Project
where POSITION<=@Posi 
order by POSITION

Select Cast(ID as int) as ID,POSITION,Identity(int ,1,1)   as NewPos
into #tmp2
from Project
where POSITION>=@Posi 
order by POSITION

Update Project set Project.POSITION=#tmp.NewPos 
from #tmp 
where #tmp.ID=Project.ID

Update Project set Project.POSITION=#tmp2.NewPos + @Posi
from #tmp2 
where #tmp2.ID=Project.ID

Update Project set POSITION=@Posi where ID=@ID

Drop table #tmp
Drop table #tmp2
end 
```

# ravendb - 如何定义处理最小值和多态属性的静态索引？

> ID：14368021
> 
> 赞同：1
> 
> 时间：2013-01-16T21:18:13.537
> 
> 标签：ravendb

好的，我有这些 POCO

```
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Manufacturer { get; set; }
}

public class Offer
{
    public int Id { get; set; }
    public User Seller { get; set; }
    public Product Product { get; set; }
    public decimal Price { get; set; }
} 
```

我有许多从 Product 派生的类，Offer 类的产品属性可以是其中任何一个。

我想定义静态索引，返回**每个**产品价格最低的报价，然后按产品类型对其进行过滤。

我走到这一步了。

```
 Map = offers => offers.Select(x => new Offer { Product = x.Product, Price = x.Price });

        Reduce = results => from r in results
                            group r by r.Product into g
                            select new Offer { Product = g.Key , Price = g.Min(x => x.Price) }; 
```

这确实有效，并且给了我最低的价格，尽管我认为 Map 应该只使用 Product.Id，而不是全部（我只是不知道该怎么做）。

当我查询索引时：

```
Session.Query<Offer>("BestOffersIndex").Where(offer => offer.Product is DerivedProduct) 
```

它只是忽略了 Where 条件。

如果我这样做：

```
 Map = offers => offers.Select(x => new OfferIndexResult { ProductType = MetadataFor(x.Product)["Raven-Entity-Name"].ToString(), ProductId = x.Product.Id, Price = x.Price });

        Reduce = results => from r in results
                            group r by r.ProductId into g
                            select new OfferIndexResult { ProductType = g.FirstOrDefault().ProductType, ProductId = g.Key, Price = g.Min(x => x.Price) };

        TransformResults = (database, offers) => from offer in offers
                                                 let product = database.Load<Product>(offer.ProductId.ToString())
                                                 select new Offer { Product = product, Price = offer.Price }; 
```

实时投影中加载的产品为空，我不知道如何使用 ProductType 进行过滤。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:54:38.043

根据评论中的讨论，我对这个问题有了更好的理解。具体来说，*嵌入*在类中，`Product`是其他产品的基类。因此，您不能使用我描述的方法（请参阅编辑），因为在索引.*`Offer``Product``Offer`*

 *解决方案是依赖于您的基类将使用`$type`属性序列化的事实。这是由 Json.Net 完成的，因为您存储的是派生类型的类。序列化`Offer`文档如下所示：

```
{
  "SellerUserId": 1,
  "Product": {
    "$type": "YourNamespace.TheProductType, YourAssembly",
    "Id": 1,
    "Name": "product name",
    "Manufacturer": "manufacturer"
  },
  "Price": 10.0
} 
```

为了绝对确保`$type`永远存在，将`Product`类标记为，`abstract`以便所有实际产品都必须是派生类。

因此，当您构建索引图时，您需要访问此字段。您可以使用以下`AsDocument`方法来解决它：

```
Map = offers => from offer in offers
                select new
                {
                    Product = offer.Product,
                    offer.Price,
                    ProductType = AsDocument(offer.Product)["$type"]
                }; 
```

当你去查询并想按产品类型过滤时，你可以得到这样的字符串产品类型：

```
var productType = documentStore.Conventions.GetClrTypeName(typeof(ProductA)); 
```

我在[这里](https://gist.github.com/4557250)进行了完整的单元测试，以向您展示如何使用此技术来达到您描述的目标。*

# c++ - 从十进制转换为二进制

> ID：14368023
> 
> 赞同：0
> 
> 时间：2013-01-16T21:18:21.200
> 
> 标签：c++

我正在使用此示例代码来帮助我完成十进制到二进制数的转换：[http](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=13734&lngWId=3) ://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=13734&lngWId= 3 从十进制转换为二进制.

我成功地尝试了较小的数字。但是当我添加一个数字时，例如：2159492075 或 2159492195。程序只输出`0`. 此外，我尝试了一个相同大小的数字，例如 1234567899 或 2134567899，我得到了数字的正确二进制表示。我想知道这是为什么？

最初我认为这可能是因为将变量定义为 long int：

```
long int dec,k=0,i=0,j=0,n,remainder,result[100]; 
```

但在进一步挖掘时，我认为这不是问题。有人可以建议我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:22:26.383

尝试使用`long long`type 代替。您的问题可能不超过溢出。

```
void convert(long long n, int arr[100], int & i)
{
   i = 0;
   do
   {
       arr[i++] = n % 2;
       n /= 2;
   } while (n);
   for (int j = 0; j <= i / 2; ++j) swap(arr[j], arr[i - j - 1]);
} 
```

用法：

```
int sz, my_arr[100];
convert(2013, my_arr, sz);
for (int i = 0; i < sz; ++i) cout << my_arr[i];
cout << endl; 
```

# vbscript - 用于映射网络位置的 VB 脚本

> ID：14368024
> 
> 赞同：1
> 
> 时间：2013-01-16T21:18:23.150
> 
> 标签：vbscript

我有一个几乎可以满足我要求的脚本，除了我希望它保存到“%userprofile%\appdata\Roaming\Microsoft\Windows\Network Shortcuts”而不是桌面的快捷方式。在此先感谢您的帮助！

```
Set objShell=Wscript.CreateObject("Wscript.shell")
strDesktopFolder=objShell.SpecialFolders("Desktop") & _
"\"
Set objShortcut=objShell.CreateShortcut(strDesktopFolder & _
"Company Files.lnk")
objShortCut.TargetPath = "\\server\Folder"
objShortCut.Description = "Company Files Description"
objShortCut.Save 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:23:08.397

您可以使用`objShell.ExpandEnvironmentStrings("%USERPROFILE%")`从`%userprofile%`环境变量中检索值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T06:56:45.587

这会将快捷方式添加到您想要的位置，该位置将显示在“我的电脑”中。但是，脚本不允许文件夹位置像网络驱动器一样显示在左侧浏览器导航菜单中。

如果要执行此操作，则需要通过右键单击“我的电脑”中的空白区域并选择“添加网络位置”来手动创建文件夹位置。创建网络位置后，右键单击它并选择“复制”。

将它保存在您的服务器上的某个位置，您将在该位置存储您想要为人们的机器编写脚本的所有网络位置。现在在您的脚本中，您将网络位置文件夹从您的服务器复制到“%userprofile%AppData\Roaming\Microsoft\Windows\Network Shortcuts”

这会将位置添加到我的电脑和导航窗格中，就像映射驱动器一样。

这是您可以做到这一点的唯一方法。原因是网络位置与实际的文件夹没有什么不同。只是文件夹上的路径指向其他地方。它不是所有脚本在尝试创建时都会尝试创建的快捷方式。

如果您只想在“我的电脑”中添加快捷方式，这是一个脚本。否则按照我的其他方法。

```
Const NETHOOD = &H13&

Set objWSHShell = CreateObject("Wscript.Shell")
Set objShell = CreateObject("Shell.Application")

Set objFolder = objShell.Namespace(NETHOOD)
Set objFolderItem = objFolder.Self
strNetHood = objFolderItem.Path

strShortcutName = "Location Name"
strShortcutPath = "\\Server\Share"

Set objShortcut = objWSHShell.CreateShortcut _
(strNetHood & "\" & strShortcutName & ".lnk")
objShortcut.TargetPath = strShortcutPath
objShortcut.Save 
```

# c# - 从一个图像淡出并淡入另一个图像

> ID：14368025
> 
> 赞同：3
> 
> 时间：2013-01-16T21:18:25.513
> 
> 标签：c#, wpf, fade

我试图让一个图像完全淡出，然后用 Storyboards 淡入另一张图像，但我无法弄清楚。我有淡出部分工作，但我找不到改变图像并顺利淡入的方法。我还没有想出一种方法让它通过一个按钮来淡入淡出，并让图像动态变化。即使我更改源路径，图像也不会更新。我正在尝试使用尽可能多的 XAML 而不是代码隐藏来完成所有这些工作。

**编辑** 我想出了如何让它淡入，但是，改变图像源并不会改变图像。我需要一些帮助。

这就是我现在所拥有的

```
<Window.Resources>
    <Storyboard x:Key="FadeOut" Completed="Storyboard1_Completed">
        <DoubleAnimation From="1" To="0" Storyboard.TargetName ="Image1" Storyboard.TargetProperty="(UIElement.Opacity)" Duration="0:0:5"/>
    </Storyboard>
    <Storyboard x:Key="FadeIn" Name="FadeIn">
        <DoubleAnimation From="0" To="1" Storyboard.TargetName ="Image1" Storyboard.TargetProperty="(UIElement.Opacity)" Duration="0:0:5"/>
    </Storyboard>
</Window.Resources>

<Grid HorizontalAlignment="Center">

    <Image Source="{Binding Path=imagePath}" Margin="0,0,0,28" Name="Image1"/>
    <Button Content="Fade" Height="23" Margin="0,284,341,0" Name="button1" Width="162" Click="button1_Click"/>

</Grid> 
```

C＃

```
public partial class MainWindow : Window
{

    public String imagePath { get; set; }

    public MainWindow()
    {
        imagePath = "1.png";
        InitializeComponent();

    }

    private void Storyboard1_Completed(object sender, EventArgs e)
    {

        imagePath = "2.png";
        Storyboard stbFadeOut = (Storyboard)FindResource("FadeIn");
        stbFadeOut.Begin();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        Storyboard stbFadeOut = (Storyboard)FindResource("FadeOut");
        stbFadeOut.Begin();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:03:07.487

您可以通过将第一个设置为第一个完成`Storyboard`后将另一个设置为淡入`Storyboard``BeginTime``Duration``StoryBoard`

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="199" Width="206" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <Image Source="{Binding Path=MyImage}" Margin="0,0,0,28" Name="Image1"/>
        <Button Content="Fade" Height="23"  Name="button1" Width="162" Margin="12,136,10,0">
            <Button.Triggers>
                <EventTrigger RoutedEvent="Button.Click">
                    <BeginStoryboard >
                        <Storyboard Name="Storyboard1" Duration="0:0:1" Completed="Storyboard1_Completed">
                            <DoubleAnimation Storyboard.TargetName="Image1" Storyboard.TargetProperty="Opacity" From="1" To="0"></DoubleAnimation>
                        </Storyboard>
                    </BeginStoryboard>
                    <BeginStoryboard>
                        <Storyboard Name="Storyboard2" BeginTime="0:0:1" Duration="0:0:1" >
                            <DoubleAnimation Storyboard.TargetName="Image1" Storyboard.TargetProperty="Opacity" From="0" To="1"></DoubleAnimation>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Button.Triggers>
        </Button>
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();
        MyImage = new BitmapImage(new Uri(@"Capture.png", UriKind.RelativeOrAbsolute));
    }

    private BitmapImage _image;
    public BitmapImage MyImage
    {
        get { return _image; }
        set { _image = value; NotifyPropertyChanged("MyImage"); }
    }

    private void Storyboard1_Completed(object sender, EventArgs e)
    {
        MyImage = new BitmapImage(new Uri(@"Capture1.png", UriKind.RelativeOrAbsolute));
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:20:09.273

查看[WPF 技巧包中](https://github.com/thinkpixellab/bot)`TransitionPresenter`的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:23:33.150

[Bag of Tricks](https://github.com/thinkpixellab/bot)项目提供了如何执行此操作的示例。

具体看[FadeTransition](https://github.com/thinkpixellab/bot/blob/master/net40-client/Bot/Transitions/FadeTransition.cs)

# tsql - 包含多个表的 FROM 子句中的子查询

> ID：14368026
> 
> 赞同：0
> 
> 时间：2013-01-16T21:18:26.370
> 
> 标签：tsql, subquery

在子查询中，我希望能够在 WHERE 子句中添加：

```
duedate<=quotehed.duedate 
```

quotehed.duedate 在主查询中。我不知道如何将 quotehed.duedate 带入子查询，因为它与我的子查询不在同一个表中。我也不知道如何确保 quotehed.duedate 将从参数中选择的报价单中提取截止日期`@p_quotenum`。

我的整个查询如下。我非常感谢任何帮助！谢谢！

```
SELECT partwhse.warehousecode,
       partwhse.allocqty,
       partwhse.onhandqty,
       quotehed.quotenum,
       quotehed.custnum,
       quotehed.datequoted,
       quotehed.duedate,
       quotedtl.quoteline,
       quotedtl.partnum,
       quotedtl.reqshipdate,
       quotedtl.sellingexpectedqty,
       plantwhse.plant,
       part.partdescription,
       t_partdtl1.totaldemand
FROM   part
       INNER JOIN quotedtl
         ON part.company = quotedtl.company
            AND part.partnum = quotedtl.partnum
       LEFT OUTER JOIN (SELECT company,
                               partnum,
                               requirementflag,
                               SUM(quantity) AS totaldemand,
                               plant,
                               duedate
                        FROM   partdtl AS partdtl_1
                        WHERE  ( company = 'lot' )
                               AND ( requirementflag = '1' )
                               AND ( plant = @p_plant )
                        GROUP  BY company,
                                  partnum,
                                  requirementflag,
                                  plant,
                                  duedate) AS t_partdtl1
         ON quotedtl.company = t_partdtl1.company
            AND quotedtl.partnum = t_partdtl1.partnum
       LEFT OUTER JOIN partwhse
                       INNER JOIN plantwhse
                         ON partwhse.company = plantwhse.company
                            AND partwhse.partnum = plantwhse.partnum
                            AND partwhse.warehousecode = plantwhse.warehousecode
         ON quotedtl.company = plantwhse.company
            AND quotedtl.partnum = plantwhse.partnum
       RIGHT OUTER JOIN quotehed
         ON quotedtl.company = quotehed.company
            AND quotedtl.quotenum = quotehed.quotenum
WHERE  ( quotehed.quotenum = @p_quotenum )
       AND ( quotehed.company = 'lot' )
       AND ( plantwhse.plant = @p_plant )
ORDER  BY quotehed.quotenum,
          quotedtl.quoteline 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:30:45.647

您应该尝试重新排序您的连接，以便在您加入后放置子查询`quotehed`。完成后，使用日期过滤器将子查询连接到`quotehed`表，类似于：

```
SELECT partwhse.warehousecode, 
    partwhse.allocqty, 
    partwhse.onhandqty, 
    quotehed.quotenum, 
    quotehed.custnum, 
    quotehed.datequoted, 
    quotehed.duedate, 
    quotedtl.quoteline, 
    quotedtl.partnum, 
    quotedtl.reqshipdate, 
    quotedtl.sellingexpectedqty, 
    plantwhse.plant, 
    part.partdescription, 
    t_partdtl1.totaldemand
FROM part
INNER JOIN quotedtl
    ON part.company = quotedtl.company 
    AND part.partnum = quotedtl.partnum 
LEFT JOIN plantwhse
    ON quotedtl.company = plantwhse.company 
    AND quotedtl.partnum = plantwhse.partnum 
LEFT OUTER JOIN partwhse
    ON partwhse.company = plantwhse.company 
    AND partwhse.partnum = plantwhse.partnum 
    AND partwhse.warehousecode = plantwhse.warehousecode 
RIGHT OUTER JOIN quotehed
    ON quotedtl.company = quotehed.company 
    AND quotedtl.quotenum = quotehed.quotenum
LEFT OUTER JOIN
(
    SELECT company, partnum, requirementflag, SUM(quantity) AS totaldemand, plant, duedate
    FROM partdtl AS partdtl_1
    WHERE (company = 'lot') 
        AND (requirementflag = '1') 
        and (plant=@p_plant)
    GROUP BY company, partnum, requirementflag, plant, duedate
) AS t_partdtl1 
    ON quotedtl.company = t_partdtl1.company 
    AND quotedtl.partnum = t_partdtl1.partnum 
    AND t_partdtl1.duedate < quotehed.duedate
WHERE (quotehed.quotenum = @p_quotenum) 
    AND (quotehed.company = 'lot') 
    AND (plantwhse.plant = @p_plant)
ORDER BY quotehed.quotenum, quotedtl.quoteline 
```

# python - 如何刷新 Heroku buildpack CACHE_DIR？

> ID：14368027
> 
> 赞同：21
> 
> 时间：2013-01-16T21:18:41.540
> 
> 标签：python, heroku, buildpack

在我们的 Python/Django 应用程序的开发过程中，我们不小心在 requirements.txt 中引入了包需求，它安装了一个库的冲突版本。Heroku 已将损坏的需求缓存在 python buildpack 指定的 CACHE_DIR 中，如其[buildpack API info page](https://devcenter.heroku.com/articles/buildpack-api)中所述，并且似乎对 requirements.txt 文件的任何修改都无法清除损坏包的缓存。我们如何强制 Heroku 完全清空 CACHE_DIR 并从头开始重新安装所有需求和依赖项？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-02-20T13:54:52.623

使用`heroku-repo`插件[purge_cache](https://github.com/heroku/heroku-repo#purge_cache)命令：

```
$ heroku plugins:install heroku-repo
$ heroku repo:purge_cache -a appname 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-18T12:38:38.020

我在尝试`django-piston`从源代码安装模块（反正之前有个issue打开了，居然得到了[支持的回复](https://github.com/heroku/heroku-buildpack-python/issues/33#issuecomment-12419565)。

这对我来说似乎有点奇怪，但至少它可以工作（只需在 中选择任何 python 版本号`runtime.txt`，重建，然后改回所需的运行时并再次重建）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-09-01T19:31:21.707

我可以通过简单地更改 readme.md 文件（添加一些空格）、提交和推送来清除缓存

# c# - 来自电子邮件地址的掩码 smtp asp.net gmail

> ID：14368030
> 
> 赞同：0
> 
> 时间：2013-01-16T21:18:53.687
> 
> 标签：c#, asp.net, gmail, mailmessage

我正在使用 MailMessage 从 Web 应用程序发送电子邮件。我相信我有正确的代码来“屏蔽”`SendEmail()`函数中的 from 名称

```
public static void SendEmail(string toAddress, string ccAddress, string bccAddress, string subject, string body, MemoryStream attachment, string attachmentName, bool isHtml, string fromAlias = "info@cipollainsurance.com")
    {
        using (MailMessage message = new MailMessage())
        {
            AlternateView htmlView = AlternateView.CreateAlternateViewFromString(AddHeaderAndFooter(subject, body).ToString(), new System.Net.Mime.ContentType("text/html"));

            var resources = LoadResources();

            foreach (LinkedResource resource in resources)
            {
                htmlView.LinkedResources.Add(resource);
            }

            message.AlternateViews.Add(htmlView);

            if (!string.IsNullOrEmpty(toAddress))
            {
                var addresses = toAddress.Split(',', ';');

                foreach (string address in addresses)
                {
                    message.To.Add(address);
                }
            }

            if (!string.IsNullOrEmpty(ccAddress))
            {
                var ccAddresses = ccAddress.Split(',', ';');

                foreach (string cc in ccAddresses)
                {
                    message.CC.Add(cc);
                }
            }

            if (!string.IsNullOrEmpty(bccAddress))
            {
                var bccAddresses = bccAddress.Split(',', ';');

                foreach (string bcc in bccAddresses)
                {
                    message.Bcc.Add(bcc);
                }
            }

            if (!string.IsNullOrWhiteSpace(fromAlias))
            {
                message.Sender = new MailAddress("info@cipollainsurance.com", fromAlias, System.Text.Encoding.ASCII);
            }
            message.Body = body;
            message.BodyEncoding = System.Text.Encoding.UTF8;
            message.Subject = subject;
            message.SubjectEncoding = System.Text.Encoding.UTF8;
            message.IsBodyHtml = isHtml;
            message.From = new MailAddress("info@cipollainsurance.com", "Cipolla Insurance");

            if (attachment != null)
            {
                message.Attachments.Add(new Attachment(attachment, attachmentName));
            }

            SmtpClient client = new SmtpClient();
            client.Send(message);
        }
    } 
```

但是，发件人电子邮件地址仍然显示`email`，`email@webedgemedia.com`这是`web.config`.

```
<smtp from="info@cipollainsurance.com" deliveryMethod="Network">
    <network host="smtp.gmail.com" enableSsl="true" port="587" password="myPassword" userName="email@webedgemedia.com" />
</smtp> 
```

有人可以确定我缺少什么以将电子邮件发送为 info@cipollainsurance.com 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:15:59.693

我不相信 GMAIL 允许您这样做 - 否则将其服务用作垃圾邮件中继非常简单。

您最多可以设置一个不同的`REPLY-TO`但您的 GMAIL（帐户）电子邮件仍然是`FROM`.

# c++ - opencv flann 索引赋值运算符

> ID：14368037
> 
> 赞同：2
> 
> 时间：2013-01-16T21:19:53.733
> 
> 标签：c++, opencv, knn

我想`cv::flann::Index`用作类成员，从而在必要时为其赋值。

但是，如果重新分配，我会在执行期间销毁时`Index`得到“未分配指针被释放” 。`Index`它的复制控制有问题还是我误解了smth？

这有效：

```
cv::Mat mat = cv::Mat(101508, 128, CV_32F);
cv::flann::Index
index = cv::flann::Index(mat, cv::flann::SavedIndexParams("myfile.bin")); 
```

这不起作用

```
cv::Mat mat = cv::Mat(101508, 128, CV_32F);
cv::Mat mat2 = cv::Mat(101508, 128, CV_32F);
cv::flann::Index 
index = cv::flann::Index(mat, cv::flann::SavedIndexParams("myfile.bin"));
index = cv::flann::Index(mat2, cv::flann::SavedIndexParams("myfile.bin")); 
```

甚至这不起作用：

```
cv::Mat mat = cv::Mat(101508, 128, CV_32F);
cv::flann::Index 
index;
index = cv::flann::Index(mat, cv::flann::SavedIndexParams("myfile.bin")); 
```

它是opencv 2.4.2

# r - R-project 数据框返回太多列

> ID：14368038
> 
> 赞同：0
> 
> 时间：2013-01-16T21:19:54.407
> 
> 标签：r, function, dataframe

完成我很难理解的 R 教程。

目录是一个包含大量 csv 文件的文件夹。该函数将多个文件中的一个作为 id，并返回每个文件中的记录数。

我的功能：

```
complete <- function(directory,id = 1:332) {

   csvfiles <- sprintf("/Users/myname/Desktop/%s/%03d.csv", directory, id)

   nrows <- sapply( csvfiles, function(f) nrow(read.csv(f)))
   data.frame(ID=sprintf('%03d', id), 
              countrows=sapply(csvfiles,function(x) length(count.fields(x))),
             row.names=id
           )
       } 
```

然后完成("specdata", 100:105) 返回

```
 ID countrows
100 100      1097
101 101       731
102 102      1462
103 103      3653
104 104      2558
105 105      2192 
```

我必须怎么做才能使最左边的列是从 1 开始的序列？因此，例如，第一条记录是 1 100 和 1092，第二条记录是 2 101 和 731

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:26:23.897

第一个明显的列只是行的名称（查看 eg `ncol(specdata)`）。您可以按如下方式重命名行：

```
row.names(specdata) <- 1:nrow(specdata) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:19:15.113

在函数内部，在数据框调用中使用它：

```
row.names = 1: length(id) 
```

# arrays - Xcode Storyboard segue 将歌曲标题从数组传递到详细视图控制器

> ID：14368039
> 
> 赞同：0
> 
> 时间：2013-01-16T21:19:59.323
> 
> 标签：arrays, tableview, segue

我收到此错误消息：- `[MPConcreteMediaItem isEqualToString:]`: unrecognized selector sent to instance...</p>

我正在从媒体选择器创建一个 NSMutable 歌曲数组到一个名为“array”的数组中。该数组正确显示在 tableview (myTable) 中。但是，当我尝试转到详细视图并将歌曲标题发送到本教程之后的详细视图上的标签时。我收到上面的崩溃和错误消息。

感谢任何帮助，谢谢！

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([[segue identifier] isEqualToString:@"detailView"]) {

    NSIndexPath *indexPath = [self.myTable indexPathForSelectedRow];

    DetailViewController *vc = [segue destinationViewController];

    vc.trackName = [array objectAtIndex:indexPath.row];

    //crashes -[MPConcreteMediaItem isEqualToString:]: unrecognized selector sent to instance

    }

}

- (void)mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection {

    [array addObjectsFromArray:mediaItemCollection.items];

    [myTable reloadData];

    // mediaItemCollection = nil;

    [mediaPicker dismissViewControllerAnimated:YES completion:nil];

}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    //this method is called to fill out table with data

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    if (cell == nil) {

    cell = [[UITableViewCell alloc]

    initWithStyle:UITableViewCellStyleDefault

    reuseIdentifier:@"Cell"];

}

    // Configure the cell

    anItem = nil;

    anItem = [array objectAtIndex:indexPath.row];

    cell.textLabel.text = [anItem valueForProperty:MPMediaItemPropertyTitle];

    cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;

    return cell;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:22:51.273

该错误看起来像您没有在字符串对象上调用“isEqualToString：”...哪个超类具有 MPConcreteMediaItem

# c# - 将 Observable 集合绑定到 ListView

> ID：14368041
> 
> 赞同：0
> 
> 时间：2013-01-16T21:20:09.060
> 
> 标签：c#, listview, gridview, binding, observablecollection

XAML：

```
<Window x:Class="Genesis.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="725" Width="918" Loaded="Window_Loaded"
    DataContext="{Binding RelativeSource={RelativeSource Self}}">
<Grid>
    <ListView Margin="22,39,0,0" Name="Library" DataContext="{Binding}" ItemsSource="{Binding _songData}" HorizontalAlignment="Left" Width="854" Height="427" VerticalAlignment="Top">
        <ListView.View>
            <GridView x:Name="gvLibrary" >
                <GridViewColumn Width="220" Header="Title" DisplayMemberBinding="{Binding Title}" x:Name="gvColumnTitle" />
                <GridViewColumn Width="180" Header="Artist" DisplayMemberBinding="{Binding Artist}" x:Name="gvColumnArtist" />
                <GridViewColumn Width="180" Header="Album" DisplayMemberBinding="{Binding Album}" x:Name="gvColumnAlbum" />
                <GridViewColumn Width="180" Header="Location" DisplayMemberBinding="{Binding Location}" x:Name="gvColumnLocation" />
            </GridView>
        </ListView.View>
    </ListView>
</Grid>
</Window> 
```

C＃：

```
ObservableCollection<songInfo> songData = new ObservableCollection<songInfo>();

    public ObservableCollection<songInfo> _songData
    { 
        get 
        { 
            return songData; 
        } 
    }
public ObservableCollection<songInfo> getStoredData()
    {

        string[] songs = System.IO.File.ReadAllLines("library");

        ObservableCollection<songInfo> songs_formatted = new ObservableCollection<songInfo>();

        foreach (string song in songs)
        {
            string[] data = song.Split('|');
            songs_formatted.Add(new songInfo
            {
                Title = data[0],
                Artist = data[1],
                Album = data[2],
                Location = data[3]
            });
        }
        return songs_formatted;

    }
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        if (System.IO.File.Exists("library"))
        {
            songData = getStoredData();
        }
        else
        {
            F.MessageBox.Show("Could not get your Library.");
        }

        F.MessageBox.Show(songData.ToArray().Length.ToString());
    }
public class songInfo
    {
        public string Title { get; set; }
        public string Artist { get; set; }
        public string Album { get; set; }
        public string Location { get; set; }
    } 
```

在`ObservableCollection`运行时正确填充并且所有元素的格式都正确：问题与将集合绑定到列表视图和列有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:38:48.287

问题是您正在设置`songData`但 ListView 绑定到`_songData`ListView 不会知道您已更改`songData`。

尝试添加一个 setter`_songData`并设置`getStoredData();`它。

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        if (System.IO.File.Exists("library"))
        {
            _songData = getStoredData();
        }
    }

    private ObservableCollection<songInfo> songData = new ObservableCollection<songInfo>();
    public ObservableCollection<songInfo> _songData
    {
        get { return songData; }
        set { songData = value; }
    } 
```

# ruby-on-rails - 宁静网址的最佳做法是什么？

> ID：14368043
> 
> 赞同：0
> 
> 时间：2013-01-16T21:20:11.963
> 
> 标签：ruby-on-rails, rest, jersey

我有一个基于 java 的 rest 服务器，我的客户将主要使用 Ruby。

什么是 URL 结构的最佳实践？

这仅适用于 JSON。

假设这是一个博客应用程序：

例如：

获取所有帖子：

```
 GET http://www.example.com/api/v1/posts.json 
```

删除 id 为 1 的帖子：

```
DELETE http://www.example.com/api/v1/posts/1.json 
```

嵌入式集合怎么样：

获取帖子 1 的所有评论：

```
GET http://www.example.com/api/v1/posts/1/comments.json 
```

查看 id 为 1 的帖子 1 的评论：

```
GET http://www.example.com/api/v1/posts/1/comments/1.json 
```

**是否有文件可以在某个地方进行处理？相当“官方”的东西？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:03:07.927

Apigee 有一本关于 RESTful API 设计的免费电子书。您必须提供一个电子邮件地址才能获得它：

[http://offers.apigee.com/api-design-ebook-rr/](http://offers.apigee.com/api-design-ebook-rr/)

你会发现这是一个见仁见智的问题，没有官方规范，但你的 URL 对我来说看起来不错，并且符合那本书中的指导方针。可能的例外是最后一个。如果 1 是评论的唯一 ID，则 /posts/1/ 可能不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:08:33.037

您可以从创造 REST 的论文开始，然后查看 URI 部分： http: [//www.ics.uci.edu/~fielding/pubs/dissertation/evaluation.htm#sec_6_2](http://www.ics.uci.edu/~fielding/pubs/dissertation/evaluation.htm#sec_6_2)

Bob Aman 对这个 SO 问题的备受推崇的第二个答案提供了详细的指导： [如何创建没有动词的 REST URL？](https://stackoverflow.com/questions/1619152/how-to-create-rest-urls-without-verbs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:37:00.557

正确使用 HTTP 协议是最好的主意。阅读一些有关 url 版本控制的信息。[http://blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http](http://blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http)

# codeigniter - 如何在通过验证之前重新填充字段？

> ID：14368044
> 
> 赞同：0
> 
> 时间：2013-01-16T21:20:15.170
> 
> 标签：codeigniter, validation, repopulation

我需要填写的字段应重新填充正确填写的字段，而不是提交表单并为错误填写的字段提出错误。最好的方法是什么？

请注意，使用此代码，我将在正确提交表单时重新填充字段，并且在重新加载页面时它们都会显示。

```
 <div class="dropdown_structure">
        <?php

        if($user['location'] == "empty")
        {
        echo country_dropdown('location');

        }
        else
        {
        echo country_dropdown('location',$user['location']);

        }

        ?>
  </div> 
```

另请注意，我已尝试在输入字段中插入值。

```
$data = array( 'name' => 'location', 'value' => $this->input->post('location'));
echo relation_dropdown('location'); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:36:33.717

嗨，如果您使用以下国家/地区下拉帮助程序，您可以通过以下方式设置值验证

[国家下拉助手](https://github.com/EllisLab/CodeIgniter/wiki/helper-dropdown-country-code)

```
country_dropdown('location',array(),set_value('location')) 
```

即使在您的第二个下拉菜单中，使用 set_value('field_name') 也可以。如果验证失败，您选择的值将保留。

# visual-studio-2010 - Visual Studio 2010 C++ 折叠一个特定的宏

> ID：14368048
> 
> 赞同：1
> 
> 时间：2013-01-16T21:20:24.377
> 
> 标签：visual-studio-2010, macros

我有很多包含用于记录 LOG_MACRO 的宏的代码，我想在我的所有解决方案中折叠它以更好地理解代码。知道我可以用来折叠宏的任何 Visual Studio 选项或工具吗？我有视觉辅助，但我找不到任何东西可以做到这一点。

谢谢

```
void ClassA::FuncA()
{
    LOG_MACRO( LogA, LogB, Log1,
      ("ClassA::FuncA - IN - id:[%x]", this ) );

   if ( ...condition here... )
   {
      ...code here...
   }

    LOG_MACRO( LogA, LogB, Log1,
      ("ClassA::FuncA - END" ) );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-19T18:01:38.483

您可以在[Notepad++中打开宏源文件](https://notepad-plus-plus.org/)

# jquery - 带有嵌套列表的 CSS 垂直菜单，在 MouseOut 上需要 jQuery 延迟

> ID：14368051
> 
> 赞同：1
> 
> 时间：2013-01-16T21:20:46.637
> 
> 标签：jquery

我是 jQuery 新手，我正在尝试解决导航问题。我构建了一个包含许多嵌套列表的垂直菜单。它纯粹是 CSS，但我的客户要求当您不再将鼠标悬停在它上面时，当前打开的子菜单保持打开一秒钟左右。

这是我正在开发的网站：http: [//dev.musgraveagencies.com/](http://dev.musgraveagencies.com/)

这是他们目前拥有的网站，以及他们希望菜单如何延迟： http: [//www.musgraveagencies.com/](http://www.musgraveagencies.com/)

我相信我可以使用 jQuery 来实现这一点，但我希望网站能够在未启用 Javascript 的情况下正常工作。

**编辑：**感谢大家的帮助！这是下面的最终代码。

我的 HTML：

```
<body class="nojs">
        <div id="nav">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Development Projects</a>
                <ul>
                    <li><a href="#">Design Build</a>
                        <ul>
                            <li><a href="#">Interior Design</a>
                                <ul>
                                    <li><a href="#">Project Example</a></li>
                                </ul>
                            </li>
                            <li><a href="#">Project Example 1</a></li>
                            <li><a href="#">Project Example 2</a></li>
                            <li><a href="#">Project Example 3</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Industrial</a>
                        <ul>
                            <li><a href="#">Project Example 1</a></li>
                            <li><a href="#">Project Example 2</a></li>
                            <li><a href="#">Project Example 3</a></li>
                            <li><a href="#">Project Example 4</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Residential</a></li>
                    <li><a href="#">Neighbourhood</a></li>
                </ul>
            </li>
            <li><a href="#">Contact</a></li>
        </ul>
        </div>
    </div>
</body> 
```

我的 CSS：

```
#nav {
    width: 156px;
    font: 9pt 'TeXGyreScholaRegular', Arial, sans-serif;
    text-align: left;
}

#nav ul a {
    color: #fff;
    display: block;
    overflow: auto;
    line-height: 19pt;
    text-indent: 2px;
}

#nav ul a:hover {
    color: #fff;
    text-decoration: none;
}

#nav ul li:hover {
    background: #484848;
}

#nav ul {
    width: 156px;
}

#nav ul li {
    list-style: none;
    background: #000;
    position: relative;
    z-index: 100;
}

#nav ul li ul {
    position: absolute;
    width: 156px;
    top: 0;
    left: 156px;
}

body.nojs #nav ul li ul  {
    display: none;
}

body.nojs #nav ul li:hover > ul {
    display: block;
} 
```

我的 jQuery：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.hoverIntent.minified.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#nav ul li ul').hide();
        $('body').removeClass('nojs');

        var config = {    
            sensitivity: 2, 
            interval: 200,    
            timeout: 700, 
        };

        var animating = false;

        $('#nav ul li').hoverIntent(
        function () {
                animating = true;
                $('> ul', this).fadeIn(100, function() {
                    animating = false;
                });
        },

        function () {
            animating = true;
            $('> ul', this).delay(400).fadeOut(200, function() {
                animating = false;
            });
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:27:49.120

使用[jQuery HoverIntent 插件](http://cherne.net/brian/resources/jquery.hoverIntent.html)

您可以在@thecl.com 中看到它，它还有助于解决 ie8/7 中无法从父锚点转到子导航的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:35:59.803

试试这个小提琴：http: [//jsfiddle.net/hamidlab/adadv/](http://jsfiddle.net/hamidlab/adadv/)

我已经删除了所有顶级和子级类，并用于`>`定位直接子级。

对js也做了一点改动（不需要js，如果你不关心fadeIn效果）

```
$('#nav ul li').hover(function(){
    $(' > ul', this).stop(true, true).fadeIn();  
}, function(){
    $(' > ul', this).hide(0);
}); 
```

CSS 的一些变化：http: [//jsfiddle.net/hamidlab/adadv/1/](http://jsfiddle.net/hamidlab/adadv/1/)

注意：对于这个小东西，您不需要插件。我觉得最好不要使用插件，尽可能保持简单和干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:49:58.713

代码的问题是，您正在使用 jQuery 触发转换（淡入淡出），但使用 CSS 立即隐藏元素。所以这会毫不拖延地发生。

您可以在 CSS3 中使用`transition-delay`or`animation-delay`属性，但 IE 不支持这些属性。所有其他人都支持它们，但大多数版本都不支持。

```
transition-delay: 2s;
-moz-transition-delay: 2s; /* Firefox 4 */
-webkit-transition-delay: 2s; /* Safari and Chrome */
-o-transition-delay: 2s; /* Opera */ 
```

因此，我认为您应该将大部分 CSS（悬停伪类）迁移到 javascript/jQuery 并使用该`setTimeout()`方法或 jQuery 的`delay()`方法延迟隐藏/显示。

**更新：**

由于您担心用户浏览器中是否未启用 javascript；如果没有 javascript 和 CSS 延迟相关的属性，我认为不可能延迟 HTML 元素外观的更改。

所以你可以做的是；

1.  创建仅 CSS 版本的菜单（如果需要延迟，请使用 transition-delay 和/或 animation-delay CSS3 属性）。如果浏览器不支持这些属性，唯一的缺点是你不会得到“延迟”，但你的菜单仍然可以工作。
2.  创建一个 javascript 版本的菜单（使用 setTimeout 等延迟方法）。
3.  将`<noscript>`标签用于非 JavaScript 内容和您的纯 CSS 菜单并将它们放在其中。

这样，您将使两个用户都满意。

# php - php 代码独立工作，但不在另一个文档中

> ID：14368052
> 
> 赞同：0
> 
> 时间：2013-01-16T21:20:55.177
> 
> 标签：php, file, include, echo

我在一个名为 cheeseside.php 的文件中有一些 php

```
<?php
foreach (glob("./Cheese_of_Week/*.php") as $fileName) {  //set files in specified directory as $fileName
   $fileContents = file_get_contents($fileName); //retrieve the contents of the php file in string format
   $findme   = 'id="cheeseName'; //finds where the cheese name starts in the file
   $findme2 = '</h2>'; //find the end of the cheese name
   $pos = strpos($fileContents, $findme); //finds the offset starting position 
   $pos2 = strpos($fileContents, $findme2, $pos); //finds the ending position of the name
   $cheesePos=$pos+strlen($findme)+2; //finds the real starting position by cominsating for the search term and 2 characters of the html tag that I didn't include in the search term
   $cheeseName = substr($fileContents, $cheesePos, $pos2-$cheesePos); //Isolates the cheese name from the     $fileContents string
   if ($fileName != "./Cheese_of_Week/currentCheese.php")  //avoids repeating the current cheese which is one of the php files that will be pulled
     echo "<a href=\"$fileName\">".$cheeseName."</a>"."<br/>"; //makes a link to the the php file    
} 
?> 
```

当我直接调用该文件时，它完全符合我的要求（将它找到的 php 文件列为链接。）当我尝试使用名为 currentCheese.php 的文件中的包含语句调用此文件时，我得到了绝对没有什么。我在该文件中有其他包含语句可以正常工作。我什至尝试将代码直接放在文档中，但它不起作用。我一直在搜索 php.net 手册页和堆栈溢出，以查看它是否与范围、包含 statememt 或回显有关。我只是想不通为什么我什么也得不到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:23:00.020

请记住，这`glob("./Cheese_of_Week/*.php")`与您的*入口点*有关，在您的情况下为*currentCheese.php*

要使路径始终与*cheeseside.php*的位置相关，请使用：

```
glob(__DIR__ . "/Cheese_of_Week/*.php"); 
```

关于[`__DIR__`](http://php.net/manual/en/language.constants.predefined.php)

# logging - 电锯中的多行消息

> ID：14368055
> 
> 赞同：0
> 
> 时间：2013-01-16T21:21:05.033
> 
> 标签：logging, apache-chainsaw

我正在使用来自[http://people.apache.org/~sdeboy/](http://people.apache.org/~sdeboy/)
的电锯 2.1.0 快照 我能够将其设置为解析日志文件，但它总是将多行消息拆分为多个单行消息（包括所有其他字段都放入第一条消息中）
如何使其正确解析多行消息？有什么解决方法或替代方法吗？

编辑：文件中的几行：

```
[<proceed>(2)] INFO 2013-01-16 05:04:23,728 xmlstream.py:start_tls:740 ::: Negotiating TLS :::
[<proceed>(2)] INFO 2013-01-16 05:04:23,729 xmlstream.py:start_tls:741 ::: Using SSL version: 3 :::
[<proceed>(2)] DEBUG 2013-01-16 05:04:23,838 xmlstream.py:start_tls:809 ::: CERT: -----BEGIN CERTIFICATE-----
MIIDaDCCAtGgAwIBAgIKMfrHUQAAAABbMDANBgkqhkiG9w0BAQUFADBGMQswCQYD
VQQGEwJVUzETMBEGA1UEChMKR29vZ2xlIEluYzEiMCAGA1UEAxMZR29vZ2xlIElu
dGVybmV0IEF1dGhvcml0eTAeFw0xMjA2MDUwMDUyMTRaFw0xMzA2MDUwMTAyMTRa
MGMxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1N
...
Zfhf9Lio+EplEmBc
-----END CERTIFICATE-----
 ::: 
```

并且日志格式是`"[NDC] LEVEL TIMESTAMP FILE:METHOD:LINE ::: MESSAGE :::"`
（我试图在消息之前和之后放置唯一的分隔符以帮助解析）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:37:36.337

尝试在接收器配置中将“appendNonMatches”设置为 false。

如果这不起作用，请提供几行日志文件（单行和多行的混合），我可以告诉您配置方面需要做什么。

这也可能是一个错误，将不得不看到。

回复后的几点说明：

*   如果您使用单个日志框架/布局（不是随机嵌入 printf 样式的输出），AppendNonMatches=false 可能没问题..但是..错过的匹配项在此设置为 false 时会掉到地板上，所以要小心..
*   我从来没有费心测试消息的结束分隔符 - 由于消息字段中的内容可能存在差异，因此非常需要消息是日志消息中的最后一个字段。
*   如果您有多行以： (tab)at 开头 - 这些字段应转换为可抛出字段。

# node.js - NodeJS异步队列太快（减慢异步队列方法）

> ID：14368061
> 
> 赞同：5
> 
> 时间：2013-01-16T21:21:31.563
> 
> 标签：node.js, loops, asynchronous, web-crawler

我有一个 HTTP Get 请求，我想解析响应并将其保存到我的数据库中。

如果我独立调用 crawl(i)，我会得到很好的结果。但是我必须从 1 到 2000 调用 crawl()。我得到了很好的结果，但有些响应似乎丢失了，有些响应是重复的。我不认为我了解如何调用数千个异步函数。我正在使用[异步模块](https://github.com/caolan/async)队列功能，但到目前为止我仍然缺少一些数据并且仍然有一些重复。我在这里做错了什么？谢谢你的帮助。

[我在爬什么](http://magicseaweed.com/syndicate/rss/index.php?id=363&unit=uk)

我的节点功能：

```
 function getOptions(i) {
    return {
        host: 'magicseaweed.com',
        path: '/syndicate/rss/index.php?id='+i+'&unit=uk',
        method: 'GET'
    }
};

function crawl(i){
var req = http.request(getOptions(i), function(res) {
    res.on('data', function (body) {
        parseLocation(body);
    });
});
req.end();

}

function parseLocation(body){
    parser.parseString(body, function(err, result) {
        if(result && typeof result.rss != 'undefined') {
            var locationTitle = result.rss.channel[0].title;
            var locationString = result.rss.channel[0].item[0].link[0];
            var location = new Location({
                id: locationString.split('/')[2],
                name: locationTitle
            });
            location.save();
        }
    });
  }

N = 2 //# of simultaneous tasks
var q = async.queue(function (task, callback) {
        crawl(task.url);
        callback();
}, N);

q.drain = function() {
    console.log('Crawling done.');
}

for(var i = 0; i < 100; i++){
   q.push({url: 'http://magicseaweed.com/syndicate/rss/index.php?id='+i+'&unit=uk'});
} 
```

[编辑] 好吧，经过大量测试后，我正在抓取的服务似乎无法快速处理这么多请求。因为当我按顺序执行每个请求时，我可以获得所有好的响应。

有没有办法减慢异步队列方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T21:35:34.703

你应该看看这个很棒的模块，[async](https://github.com/caolan/async)，它简化了这样的异步任务。您可以使用队列，简单示例：

```
N = # of simultaneous tasks
var q = async.queue(function (task, callback) {
    somehttprequestfunction(task.url, function(){
    callback();
    } 
}, N);

q.drain = function() {
    console.log('all items have been processed');
}

for(var i = 0; i < 2000; i++){
   q.push({url:"http://somewebsite.com/"+i+"/feed/"});
} 
```

如果您只调用回调函数，它将有一个正在进行的操作的窗口，并且任务室将可用于未来的任务。不同的是，您的代码现在立即打开 2000 个连接，显然失败率很高。将其限制在一个合理的值，5,10,20（取决于站点和连接）将导致更好的成功率。如果请求失败，您可以随时重试，或者将任务推送到另一个异步队列以进行另一次试用。关键是在队列函数中调用callback()，这样房间完成后就可以使用了。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-16T09:14:25.323

```
var q = async.queue(function (task, callback) {
    crawl(task.url);
    callback();
}, N); 
```

您在启动前一个任务后立即执行下一个任务，这样队列就没有意义了。你应该像这样修改你的代码：

```
// first, modify your 'crawl' function to take a callback argument, and call this callback after the job is done.

// then
var q = async.queue(function (task, next/* name this argument as 'next' is more meaningful */) {
    crawl(task.url, function () {
        // after this one is done, start next one.
        next();
    });     
    // or, more simple way, crawl(task.url, next);
}, N); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-17T19:49:45.070

如果你愿意，另一种选择。Vanilla JS 没有花哨的库。

```
var incrementer = 0;
var resultsArray = [];

var myInterval = setInterval(function() {
    incrementer++
    if(incrementer == 100){
        clearInterval(myInterval)
        //when done parse results array
    }
    //make request here
    //push request result to array here

}, 500); 
```

每半秒调用一次函数。在 x 个请求后强制同步和退出的简单方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-25T01:49:36.600

我知道我对这个问题有点晚了，但是这是我写的一个解决方案，用于在使用节点 4 或节点 5 测试 api 端点时减慢请求的数量：

```
var fs = require('fs');
var supertest = require('supertest');
var request = supertest("http://sometesturl.com/api/test/v1/")
var Helper = require('./check.helper');
var basicAuth = Helper.basicAuth;
var options = Helper.options;

fs.readFile('test.txt', function(err, data){
  var parsedItems = JSON.parse(data);
  var urlparts = []
  // create a queue
  for (let year of range(1975, 2016)) {
    for (var make in parsedItems[year]){
      console.log(year, make, '/models/' + year + '/' + make)
      urlparts.push({urlpart:'/models/' + year + '/' + make, year: year, make: make})
    }
  }
  // start dequeue
  waitDequeue();

  // This function calls itself after the makeRequest promise completes
  function waitDequeue(){
    var item = urlparts.pop()
    if (item){
      makeRequest(item)
        .then(function(){
          // wait this time before next dequeue
          setTimeout(function() {
            waitDequeue();
          }, 3000);
        })
    } else {
      write(parsedItems)
    }
  }

  // make a request, mutate parsedItems then resolve
  function makeRequest(item){
    return new Promise((resolve, reject)=>{
      request
        .get(item.urlpart)
        .set(options.auth[0], options.auth[1])
        .set(options.type[0], options.type[1])
        .end(function(err, res) {
          if (err) return done1(err);
          console.log(res.body)
          res.body.forEach(function(model){
            parsedItems[item.year][item.make][model] = {}
          });
          resolve()
        })
      })
  }

  // write the results back to the file
  function write(parsedItems){
    fs.writeFile('test.txt', JSON.stringify(parsedItems, null, 4), function(err){
      console.log(err)
    })
  }

}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-10T10:06:37.637

有点晚了，但我发现这很有效！使用 async 您可以在任务处理程序中使用 while 来减慢队列速度，例如：

```
var q = async.priorityQueue(function(task, callback) {
// your code process here for each task
//when ready to complete the task delay it by calling
async.whilst( //wait 6 seconds
   function() {         
        return count < 10;      
   },
   function(callback) {
      count++;
      setTimeout(function() {
        callback(null, count);
      }, 1000);
   },
   function (err, n) {
    // n seconds have passed  
    callback(); //callback to q handler 
   }
 ); //whilst
} , 5); 
```

# ios - 带轮廓的 CGPath

> ID：14368064
> 
> 赞同：9
> 
> 时间：2013-01-16T21:21:54.077
> 
> 标签：ios, objective-c, core-graphics, quartz-graphics, cgpath

我正在尝试绘制一个有中风的 CGPath。

基本上我想用CGPath画一条线。然后我想返回并在最后一个 CGPath 的两侧画线，使其具有轮廓的效果。

这条线可以以任何方式弯曲和转动，但我总是需要外面的两条线跟随。

![小路](../Images/613b35e7941495bc2007f928ce947d9d.png)

编辑：我需要能够使线的中间透明但轮廓纯黑色。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T21:37:58.753

用于`CGPathCreateCopyByStrokingPath`通过以一定宽度抚摸旧路径来创建新路径。然后使用`kCGPathFillStroke`.

```
- (void)drawRect:(CGRect)rect {
  CGContextRef context = UIGraphicsGetCurrentContext();

  CGMutablePathRef path = CGPathCreateMutable();
  CGPathMoveToPoint(path, NULL, 50, 50);
  CGPathAddLineToPoint(path, NULL, 200, 200);

  CGPathRef thickPath = CGPathCreateCopyByStrokingPath(path, NULL, 10, kCGLineCapButt, kCGLineJoinBevel, 0);
  CGContextAddPath(context, thickPath);

  CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);
  CGContextSetFillColorWithColor(context, [UIColor blueColor].CGColor);
  CGContextSetLineWidth(context, 3);
  CGContextDrawPath(context, kCGPathFillStroke);

  CGPathRelease(thickPath);
  CGPathRelease(path);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T21:24:11.917

最简单的解决方案就是将路径描边两次。首先以较大的笔划宽度使用黑色，然后再次使用具有稍小的笔划宽度的蓝色笔划相同的路径。

**编辑：**
如果我没记错的话，你可以用它`CGPathCreateCopyByStrokingPath(...)`来创建一个新的路径，然后你可以描边和填充。然后你可以使用半透明的颜色。

从文档中：

> ## `CGPathCreateCopyByStrokingPath`
> 
> 创建另一个路径的描边副本。
> 
> ```
> CGPathRef CGPathCreateCopyByStrokingPath(
>                                          CGPathRef path,
>                                          const CGAffineTransform *transform,
>                                          CGFloat lineWidth,
>                                          CGLineCap lineCap,
>                                          CGLineJoin lineJoin,
>                                          CGFloat miterLimit 
>                                          ); 
> ```
> 
> **参数**
> *path*
> `要复制的路径。`
> 
>  `*transform*
> `指向仿射变换矩阵的指针，如果不需要变换，则为 NULL。如果指定，Quartz 在将转换路径的元素添加到新路径之前应用转换。`
> 
>  `*lineWidth*
> `要使用的线宽，以用户空间为单位。该值必须大于 0。`
> 
>  `*lineCap*
> `线帽样式常量——kCGLineCapButt（默认）、kCGLineCapRound 或 kCGLineCapSquare。参见“CGLineCap”。`
> 
>  `*lineJoin*
> `线连接值——kCGLineJoinMiter（默认）、kCGLineJoinRound 或 kCGLineJoinBevel。请参阅“CGLineJoin”。`
> 
>  `*miterLimit*
> `要使用的斜接限制。``````

# c# - 如何在 C# 中解决 System.OutOfMemoryException？

> ID：14368068
> 
> 赞同：2
> 
> 时间：2013-01-16T21:22:09.880
> 
> 标签：c#, asp.net

我的代码是

```
 private byte[] Invoke(Stream inputFileStream, CryptoAction action)
     {
        var msData = new MemoryStream();
        CryptoStream cs = null;

        try
        {
            long inputFileLength = inputFileStream.Length;
            var byteBuffer = new byte[4096];
            long bytesProcessed = 0;
            int bytesInCurrentBlock = 0;

            var csRijndael = new RijndaelManaged();
            switch (action)
            {
                case CryptoAction.Encrypt:
                    cs = new CryptoStream(msData, csRijndael.CreateEncryptor(this.Key, this.IV), CryptoStreamMode.Write);
                    break;

                case CryptoAction.Decrypt:
                    cs = new CryptoStream(msData, csRijndael.CreateDecryptor(this.Key, this.IV), CryptoStreamMode.Write);
                    break;
            }

            while (bytesProcessed < inputFileLength)
            {
                bytesInCurrentBlock = inputFileStream.Read(byteBuffer, 0, 4096);
                cs.Write(byteBuffer, 0, bytesInCurrentBlock);
                bytesProcessed += bytesInCurrentBlock;
            }
            cs.FlushFinalBlock();

            return msData.ToArray();
        }
        catch
        {
            return null;
        }
    } 
```

如果加密大小为 60mb 的大文件 System.OutOfMemoryException 被抛出并且程序崩溃。我的操作系统是 64 位并且有 8Gb 的内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:36:45.683

尝试摆脱所有缓冲区管理代码，这可能是您的问题的原因......尝试使用两个流（易失性输出的内存流很好）：

```
using (FileStream streamInput = new FileStream(fileInput, FileMode.Open, FileAccess.Read))
{
    using (FileStream streamOutput = new FileStream(fileOutput, FileMode.OpenOrCreate, FileAccess.Write))
    {
        CryptoStream streamCrypto = null;
        RijndaelManaged rijndael = new RijndaelManaged();
        cspRijndael.BlockSize = 256;

        switch (CryptoAction)
        {
            case CryptoAction.ActionEncrypt:
                streamCrypto = new CryptoStream(streamOutput, rijndael.CreateEncryptor(this.Key, this.IV), CryptoStreamMode.Write);
                break;

            case CryptoAction.ActionDecrypt:
                streamCrypto = new CryptoStream(streamOutput, rijndael.CreateDecryptor(this.Key, this.IV), CryptoStreamMode.Write);
                break;
        }

        streamInput.CopyTo(streamCrypto);
        streamCrypto.Close();
    }
} 
```

# facebook-graph-api - 将对象发布到 Facebook Graph API Explorer

> ID：14368071
> 
> 赞同：1
> 
> 时间：2013-01-16T21:22:24.200
> 
> 标签：facebook-graph-api

试图找出正确的 Json 字符串以传递给我的 OpenGraph 应用程序。我正在使用 Gigya Java SDK，但决定在测试字符串时消除一些额外的层。

所以我首先看的是 Graph API Explorer。

我的 POST 字段名称是“Recipe”，值是

```
{"title":"one-handed fried pies","description":"ye olde Description goeth here.","image":"http://www.recipe.com/images/one-handed-fried-pies-R094255-ss.jpg","url":"http://www.recipe.com/one-handed-fried-pies/"} 
```

这完全映射到 Recipe 对象的字段。

但是，无论我如何格式化 JSON，我都会得到这个异常

```
{
  "error": {
"message": "(#3503) \"{\"title\":\"one-handed fried pies\",\"description\":\"ye olde Description goeth here.\",\"image\":\"http://www.recipe.com/images/one-handed-fried-pies-R094255-ss.jpg\",\"url\":\"http://www.recipe.com/one-handed-fried-pies/\"}\" is an invalid value for property \"recipe\" with type \"Reference\"", 
    "type": "OAuthException", 
    "code": 3503
  } 
```

}

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:49:31.773

通过破解，让它以这种方式工作。

1.  最重要的是...上面的 URL*必须*指向具有应用程序有效 og: 标签的页面。（您可以查看此页面的结构[http://www.csmonitor.com/Science](http://www.csmonitor.com/Science)的来源）

2.  在 Graph Api Explorer 中，选择左上角的应用程序。

3.  单击获取访问令牌。

4.  选择发布。

5.  点击添加字段

6.  键入对象的名称。就我而言，“食谱”。

7.  输入网址。就我而言，我设置了一个实时测试页面并进行了部署。

8.  点击提交并等待一个ID。{“id”：“290473937742173”}

# ruby-on-rails - 从 Facebook 访问大量数据

> ID：14368074
> 
> 赞同：0
> 
> 时间：2013-01-16T21:22:29.990
> 
> 标签：ruby-on-rails, facebook, facebook-fql, facebook-opengraph, fb-graph

因此，我正在开发一个 Rails 应用程序，而我为其设计它的人似乎对数据量的要求非常高。他们希望收集登录到应用程序的用户的所有帖子，以及他们每个朋友在过去一年中的所有帖子。

在向我传达这个特定级别的详细信息之前，我使用 fb_graph gem 构建了这个东西，并通过帖子进行分页。我遇到了这样一个事实，即首先需要很长时间才能做到这一点，即使我更改了每页请求的帖子数量。其次，我经常遇到 Oauth 错误 #613，每 600 秒有超过 600 个请求。在将每个请求增加到 200 个帖子后，我遇到的限制减少了，但是获取所有这些数据仍然需要非常长的时间。

我对 FQL 替代方案不是特别熟悉，但在我看来，我们将不得不优先考虑速度或数据量。有没有一种方法可以让我快速检索此级别的信息？

编辑：当我检索它们时，我确实将所有帖子保存到数据库中。所需要的是通过并抓取过去一年的所有帖子，供用户和朋友使用。这个过程需要很长时间，我基本上想知道是否有任何方法可以加快速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:34:05.673

我想在这里指出一件事：
您应该为用户的帖子实现某种本地缓存。我的意思是，您应该将帖子保存在本地数据库中，并且只检查新帖子（在需要时），而不是每次都查询 FB 帖子。

这更快，并为您节省了许多 API 请求。

# jpa - EclipseLink，延迟提取集合可在事务之外访问

> ID：14368075
> 
> 赞同：4
> 
> 时间：2013-01-16T21:22:41.803
> 
> 标签：jpa, eclipselink

我有一个名为的实体`User`，它具有以下字段`roles`：

```
@ManyToMany
@JoinTable(
        name = "user_role",
        joinColumns = {@JoinColumn(name = "user_id", nullable = false)},
        inverseJoinColumns = {@JoinColumn(name = "role_id", nullable = false)}
)
private List<Role> roles; 
```

`User`我通过使用服务方法加载，服务方法被包装在事务（JTA）中。在调用服务方法并检索 之后，我在用于加载实体的事务之外`User`访问此字段。我期待得到一个错误，因为 eclipselink 文档指出，默认情况下，ManyToMany 关联的 fechtype 是[lazy](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Relationship_Mappings/Collection_Mappings/ManyToMany)。这告诉我，当实体在服务方法中加载时，不应该自动加载。`role``User``User``roles`

为什么我能够访问`roles`事务的外部？为什么看起来`roles`是急切而不是懒惰？

这是加载用户的服务类（我删除了一些与问题无关的代码）：

```
@Service
@Transactional(rollbackFor = ServiceException.class)
public class UserServiceImpl implements UserService {

    @Autowired(required = true)
    private UserRepository userRepository;

    @Override
    public User authenticate(String username, String password) throws ServiceException {
        //Get the user
        List<User> users = userRepository.findByUsername(username);

        if (users == null || users.isEmpty() || users.size() > 1) {
            return null;
        }

        User user = users.get(0);
        String hash = getHash(password, user.getSalt());

        return StringUtils.equals(hash, user.getPassword()) ? user : null;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T12:02:41.600

只要上下文仍然可用，EclipseLink 就允许获取惰性关系，如下所述：[https ://forums.oracle.com/forums/thread.jspa?messageID=1706796](https://forums.oracle.com/forums/thread.jspa?messageID=1706796)

# javascript - +ev.clientX === WinJS 中的 ev.clientX (Windows 8)

> ID：14368080
> 
> 赞同：3
> 
> 时间：2013-01-16T21:22:56.193
> 
> 标签：javascript, windows-8, winjs

我正在实现捏放大/缩小代码。
我只是检查了 WinJS 语义缩放实现并发现了有趣的代码片段。

适用于 JavaScript 1.0/js/ui.js 的 Windows 库

行号：30710、30720

```
return {
   x: +ev.clientX === ev.clientX ? (ev.clientX - sezoBox.left - sezoPaddingLeft - sezoBorderLeft) : 0,
   y: +ev.clientY === ev.clientY ? (ev.clientY - sezoBox.top - sezoPaddingTop - sezoPaddingTop) : 0
}; 
```

为什么有`+ev.clientX === ev.clientX`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:28:07.193

一元运算`+`符用作对 a 的强制转换`Number`。这是确保`ev.clientX`数字的一种非常模糊的方法。

我的建议：不要使用它。我猜这家伙真的很喜欢他的单行字。我怀疑他的同事是否同意他的看法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T21:25:46.657

这是一种检查是否`ev.clientX`不是数字的方法。

```
x === x 
```

相当于

```
!isNaN(x) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T21:27:48.847

`+variable`将变量解析为一个数字，例如：

```
var a = "1";
+a; // 1 
```

所以这是一个检查是否`event.clientX`是一个数字：

```
var a = "1";
+a === a // false 
```

`a`是一个字符串。

```
var a = 1;
+a === a // true 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T21:26:16.003

他们正在检查是否 `ev.clientX`是一个数字，而它不是`NaN`。如果是，则进行计算，否则返回 0。

一元加运算符将`+`任何值强制为数字。所以，如果 ev.clientX 没有 type `number`，那么`+ev.clientX !== ev.clientX`.

还要注意`NaN !== NaN`, 所以如果`ev.clientX`是`NaN`，那么它将返回 false。

# linux - Linux bc 命令总数

> ID：14368083
> 
> 赞同：1
> 
> 时间：2013-01-16T21:23:22.447
> 
> 标签：linux, bash, bc

这是我的 netstat 命令的输出。我想计算第一个字段数的总数，例如`7+8+1+1+1+1+3+1+2..so on...`我如何使用`bc`或任何其他方法命令来对它们进行总数？

```
[root@example httpd]# netstat -natp | grep 7143 | grep EST | awk -F' ' '{print $5}' | awk -F: '{print $1}' | sort -nr | uniq -c
      7 209.139.35.xxx
      8 209.139.35.xxx
      1 209.139.35.xxx
      1 209.139.35.xxx
      1 208.46.149.xxx
      3 96.17.177.xxx
      1 96.17.177.xxx
      2 96.17.177.xxx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:36:51.250

您需要使用 awk 获取第一列（您实际上并不需要它，但我将其作为我永恒耻辱的纪念碑）

```
awk {'print $1'} 
```

然后再次使用 awk 对数字列求和并打印结果

```
awk '{ sum+=$1} END {print sum}' 
```

全部一起：

```
netstat -natp | grep 7143 | grep EST | awk -F' ' '{print $5}' | awk -F: '{print $1}' | sort -nr | uniq -c | awk {'print $1'}  | awk '{ sum+=$1} END {print sum}' 
```

我知道这不使用 bc，但它可以完成工作，所以希望这就足够了。

# wordpress - 仅显示 wordpress 中的子类别

> ID：14368086
> 
> 赞同：0
> 
> 时间：2013-01-16T21:23:26.003
> 
> 标签：wordpress, taxonomy

我需要显示自定义分类的类别拇指和描述。可以说我有这个：

```
<ul>
<li>Cars
  <ul>
     <li>Electric cars</li>
     <li>foo cars
         <ul>
            <li>Toyota</li>
            <li>Nissan</li>
         </ul>
     </li>
  </ul>
</li>
</ul> 
```

我需要的是显示子类别**电动汽车**和**foo 汽车**的拇指和描述，而不是它们里面的帖子。

任何人都可以指导我，我可以在哪里寻找？

Tks

# android - 将 Android 平板电脑连接到 WAMP 服务器

> ID：14368090
> 
> 赞同：0
> 
> 时间：2013-01-16T21:23:34.107
> 
> 标签：android, apache, android-asynctask, wamp

我正在使用 WAMP 服务器。我在服务器上有一个 db_connect.php 文件。我从通过 USB 电缆连接到计算机的 android 设备对该文件发出 http 请求。

但是，每次我请求文件时，都会出现以下错误：

**连接 org.apache.http.conn.HttpHostConnectException 中的错误：与[http://xxxx](http://x.x.x.x)的连接被拒绝**

有谁知道我可能做错了什么？我的桌面在我的家庭宽带上运行 WAMP，我的平板电脑连接到我的家庭宽带。

如果我将发布请求更改为联系 www.google.com，我会建立连接。有什么建议么？

MainActivity - 我尝试连接的地方：

```
public class MainActivity extends Activity {

Button b1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    b1 = (Button)findViewById(R.id.button1);
    b1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            new HTTPTask().execute();
        }
    });
}

private class HTTPTask extends AsyncTask<String, Void, Boolean>{

    @Override
    protected Boolean doInBackground(String... params) {

        //location of file to retrieve
        String url = "http://192.168.x.xx/emenu/db_connect.php";
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        try{
            HttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost(url);

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            httpclient.execute(httppost);
            return true;
        }catch(Exception e){
            Log.e("log_tag", "Error in Connection " + e.toString());
            return false;
        }

    }

    @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        if(result){
            Toast.makeText(getApplicationContext(), "Connection Established!", Toast.LENGTH_SHORT).show();
        }else{
            Toast.makeText(getApplicationContext(), "Connection Failed!", Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        Toast.makeText(getApplicationContext(), "Connection initiating...", Toast.LENGTH_SHORT).show();
    }

} 
```

}

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.dbconnectiontest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

# git - 在 Git 中仅暂存已修改文件的更简单方法（未删除）

> ID：14368093
> 
> 赞同：11
> 
> 时间：2013-01-16T21:23:46.480
> 
> 标签：git

我的工作分支中有一堆已删除的文件，我不确定是否要提交。我需要根据需要提交我修改过的文件。

这就是我想出的：

```
git add `git status | grep modified | cut -f2 | cut -f4 -d' '` 
```

这个答案做了类似的事情，但也好不到哪里去：[https ://stackoverflow.com/a/8277826](https://stackoverflow.com/a/8277826)

那么有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T21:40:17.443

只需使用`git add --no-all .`(Git v. 2.0+) 或`git add .`(Git v. 1.x)。这将通过遍历当前目录来获取它可以找到的任何文件，该目录自然不会包括已删除的文件。

当然，这也会拾取任何未跟踪的文件。如果您需要避免这些，那么您可以使用更复杂的表达式。它与您的相似，但它使用用于脚本的输出（因此它更稳定且更易于解析）：

```
git diff-files -z --diff-filter=M --name-only --relative | xargs -0 git add 
```

# google-maps - 如何找到经度/纬度多边形的高程

> ID：14368095
> 
> 赞同：2
> 
> 时间：2013-01-16T21:24:01.557
> 
> 标签：google-maps, gis, polygon, postgis, elevation

我正在尝试创建一个使用有关区域的地形信息的应用程序。我使用 kml 文件中的 lon/lat (4326) 多边形并将几何图形存储在 postgis 中。

我需要找到由 lon/lat 点定义的特定区域（多边形）的高程波动。这怎么可能？我已经阅读了某些可能的解决方案，例如 DEM，但我不知道如何使用它们。还有其他方法可以实现吗？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:10:45.310

令人惊讶的是有一个Google Elevation API :)（主要用于Android开发，您需要注册一个正确的密钥）：

[https://developers.google.com/maps/documentation/elevation/](https://developers.google.com/maps/documentation/elevation/)

也许你可以使用同一个服务的 JavaScript API（这个我没试过，只是找到了上一个的链接）：

[https://developers.google.com/maps/documentation/javascript/services#Elevation](https://developers.google.com/maps/documentation/javascript/services#Elevation)

也许您可以使用它，但请注意：

> 每天使用 Google Elevation API 的请求数限制为 2,500 个。

好消息是，在一个请求中，您可以获得关于*Line*的高程数据，具有任意数量的分隔点（分隔线将线分成等长的部分）。

# javascript - 页面完成下载和引导后执行功能

> ID：14368097
> 
> 赞同：0
> 
> 时间：2013-01-16T21:24:02.277
> 
> 标签：javascript, angularjs, onload

我已经尝试过 $evalAsync 和 $viewContentLoaded 并且所有这些事情似乎都在 Angular 完成填充模板时启动。

我想做的是，在指令中：

1.  Angular 是否完成了模板的替换？
2.  所有图像和其他资产（由模板指定）是否已完成下载？
3.  如果是这样，请执行此操作-->

我已经尝试了很多事情，但我只是想要一个关于如何以正确的 Angular 方式执行此操作的明确答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T01:22:34.163

你可以试试这个指令，寻找所有嵌套包含在它们的内容中加载：

[http://www.sangwine.net/jim/index.php/2013/05/how-to-detect-when-all-your-nested-includes-have-loaded-their-content-in-angularjs/](http://www.sangwine.net/jim/index.php/2013/05/how-to-detect-when-all-your-nested-includes-have-loaded-their-content-in-angularjs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:03:29.690

看看[Angular JS 指令是否有渲染后回调？](https://stackoverflow.com/questions/11125078/is-there-a-post-render-callback-for-angular-js-directive)
和[AngularJS - 指令渲染完成后如何查询 DOM](https://stackoverflow.com/questions/14235669/angularjs-how-to-query-the-dom-when-directive-rendering-is-complete)

不幸的是，没有办法确定渲染何时完成（例如，没有事件发生）。使用 $timeout 似乎是唯一可用的解决方法。

# c++ - 如何从类似的模板类构建对象

> ID：14368098
> 
> 赞同：1
> 
> 时间：2013-01-16T21:24:09.047
> 
> 标签：c++, templates, inheritance, multiple-inheritance, class-template

我的目标如下。

我正在数据分析环境中处理蛋白质。任何给定蛋白质的可用数据都是可变的。我希望能够从更简单的父类构建蛋白质类。每个父类将特定于我可用的数据层。

不同的项目可能有不同的可用数据层。我想为包含与特定数据层相关的所有变量和方法的蛋白质编写简单的类。然后，对于任何给定的项目，能够编译从相关数据层特定蛋白质类继承的项目特定蛋白质类。

此外，每个数据层特定的蛋白质类都需要类似的数据层特定的链类、残基类和原子类。它们都是积木。原子用于构建用于构建用于构建蛋白质的链的残基。蛋白质类别需要能够访问其所有原子、残基和链。同样，链需要访问残基和原子。

我使用向量和映射来存储指向相关对象的指针。还有相关的get和set方法。为了提供每个版本的蛋白质变量以及 getter 和 setter 方法，我为原子、残基、链和蛋白质制作了 1 个模板类。这个模板类包含向量、getter 和 setter 方法，这些方法使蛋白质能够访问其链、残基和原子。然后这个模板类被每个数据层特定的蛋白质类继承。

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:35:41.650

首先，使用继承是一种很好的抽象方式，应该可以帮助您轻松构建自定义类，从而为重用性和维护铺平道路。不过请花点时间考虑一下您的数据结构。使用矢量似乎是采用动态的最自然的方式然而，重新调整向量大小会带来一些开销，有时在处理大数据时，这会成为一个问题。为了克服这个问题，请尝试计算每个通常具有的数据的平均数量。因此，您可以拥有一个数组和一个向量，并且只有在完成数组后才能使用该向量。这样您就不用不要经常遇到间接费用。根据您即将进行的实际处理，您可能需要重新考虑您的数据结构。例如，如果您的数据足够小且易于管理，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:44:00.457

您可能希望查看[**复合设计模式**](http://sourcemaking.com/design_patterns/composite)来组织您的多级数据，并查看[**访问者设计模式**](http://sourcemaking.com/design_patterns/visitor)来编写“访问”您的数据结构的算法。

复合设计模式创建了一个组件接口（抽象基类），允许对其子层中的所有元素进行迭代，添加/删除元素等。它还应该有一个`accept(some_function)`方法来允许将外部算法应用于自身。然后，每个特定层（原子、残基、链）将是派生自 Component 接口的具体类。不要让一个层从它的子层派生：**继承应该只反映一种“is-a”关系**，除非在非常特殊的情况下。

访问者设计模式创建了一个算法层次结构，它独立于数据的精确结构。如果您的数据的类层次结构在可预见的将来不会发生变化，则此模式效果最佳。[注意：您仍然可以通过用特定数据填充结构来获得所需的任何分子，只是不要更改结构中的层数]。

无论您做什么，始终建议仅使用继承来重用或扩展接口，并使用组合来重用/扩展数据。例如，STL 容器`vector`没有`map`虚拟析构函数，并且没有设计为用作基类。

# python - 指装饰器内部的被装饰函数的名称

> ID：14368102
> 
> 赞同：0
> 
> 时间：2013-01-16T21:24:25.063
> 
> 标签：python, python-3.x

我可以在装饰器内部引用被装饰对象的名称吗？例如，

```
def add_debug_info(func):
    # how to write magic_function?
    name = magic_function(func)
    # name is 'execute' when applied as
    # @add_debug_info
    # def execute(): 
```

我正在尝试打印包含此名称的调试语句，因为我正在传递更高级别的函数，并且很难判断调试语句所指的是哪个函数。

我只知道[一种](https://stackoverflow.com/a/8875313/336527)获取对象名称的方法，但在这里效果不佳（多个名称可以引用一个对象，但我想要一个恰好被修饰的特定名称）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:26:28.173

函数的原始名称存储在`.__name__`属性中：

```
>>> def foo(): pass
...
>>> foo.__name__
'foo'
>>> bar = foo
>>> bar.__name__
'foo' 
```

您可以在数据模型文档中找到类似这样的有趣信息[，并且该](http://docs.python.org/2/reference/datamodel.html)[`inspect`模块](http://docs.python.org/2/library/inspect.html)的文档中也总结了许多此类信息。

您可能还想看看[`functools.wraps`decorator](http://docs.python.org/2/library/functools.html#functools.wraps)，它使用原始包装函数的属性更新包装函数（通常在装饰器中使用），包括它的名称和它的文档字符串。

# html - 实现一个在主包装之外的粘性页脚？

> ID：14368104
> 
> 赞同：-1
> 
> 时间：2013-01-16T21:24:27.933
> 
> 标签：html, css, sticky-footer

这是一个老问题的新变化。

我正在处理页脚需要位于主包装器之外的页面。

```
<body>
    <div id="page-wrap"></div>
    <footer id="footer"></footer>
</body> 
```

我一直在寻找一个不错的跨浏览器解决方案来实现一个页脚，当页面换行中的内容没有完全填满页面时，该页脚会粘在页面换行中内容的底部或页面底部。我搜索了 stackoverflow 和其他一些地方。我还没有看到一个涵盖所有重要浏览器并允许页脚位于页面换行之外的解决方案。

任何人都知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:33:58.663

CSS Sticky Footer 会做到这一点。

[http://www.cssstickyfooter.com/html-code.html](http://www.cssstickyfooter.com/html-code.html)

# ios - 某些客户的 iOS TCP 套接字丢失连接

> ID：14368105
> 
> 赞同：3
> 
> 时间：2013-01-16T21:24:29.517
> 
> 标签：ios, sockets, tcp

我有一个创建 TCP 套接字并从不同类型的硬件接收数据的应用程序。我的大多数客户都是满意的用户，但有些客户会遇到 TCP 连接在一段时间后中断（可能是 30 秒或 5 分钟）的问题。

我正在使用 CFStreamCreatePairWithSocketToHost - 方法，并在“handleEvent”方法中完成所有处理。

我有一些客户记录失败，我得到了这个事件：

> ErrorOccurred “操作无法完成。套接字未连接（代码 = 57）”

经过几次成功的重新连接后，当我尝试重新连接时，我可能会收到此事件：

> ErrorOccurred “操作无法完成。没有到主机的路由（代码 = 65）”

简单的解释是他们创建 WiFi 网络和流式传输数据的设备不好，但一些客户也在使用连接到相同设备的其他应用程序，并且这些应用程序不会失去连接。

我没有什么想法可以改变或改进以解决问题。

我已经检查了可用数据的大小，它从不超过 1 个句子，所以它不像任何缓冲区都已满。

实际上，我还有一个小型测试应用程序，它除了连接到广播设备并记录接收到的数据之外什么都不做——这也失去了这些客户的连接。

我也尝试使用`AsyncSocket`，但我遇到了同样的问题。

我的头发变白了...... :-) 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:27:10.710

大量的测试、记录和推测最终解决了这个问题。客户唯一要做的就是降低波特率，问题就消失了。

结案。

# php - T_PUBLIC，期望 T_STRING 使用 require()

> ID：14368106
> 
> 赞同：-3
> 
> 时间：2013-01-16T21:24:32.463
> 
> 标签：php, require

当我通过链接到我的函数时出现错误`require()`

错误：`Parse error: syntax error, unexpected T_PUBLIC, expecting T_STRING in /home/content/23/9953123/html/new/lib/functions.php on line 3`

代码：

```
<?php
require("lib/functions.php");
require("lib/dbconnect.php");
?> 
```

函数.php：

```
<?php

function stateToAbb($input){ 
//reset found 
$found = 0; 
//list states 
$states = "Alaska,Alabama,Arkansas,Arizona,California,Colorado,Connecticut,Delaware,Florida,Georgia,Hawaii,Iowa,Idaho,Illinois,Indiana,Kansas,Kentucky,Louisiana,Massachusetts,Maryland,Maine,Michigan,Minnesota,Missouri,Mississippi,Montana,North Carolina,North Dakota,Nebraska,New Hampshire,New Jersey,New Mexico,Nevada,New York,Ohio,Oklahoma,Oregon,Pennsylvania,Rhode Island,South Carolina,South Dakota,Tennessee,Texas,Utah,Virginia,Vermont,Washington,Wisconsin,West Virginia,Wyoming"; 
//list abbreviations 
$abb = "AK,AL,AR,AZ,CA,CO,CT,DE,FL,GA,HI,IA,ID,IL,IN,KS,KY,LA,MA,MD,ME,MI,MN,MO,MS,MT,NC,ND,NE,NH,NJ,NM,NV,NY,OH,OK,OR,PA,RI,SC,SD,TN,TX,UT,VA,VT,WA,WI,WV,WY"; 
//create arrays 
$states_array = explode(",", $states); 
$abb_array = explode(",", $abb); 

//run test 
for ($i = 0; $i < count($states_array); $i++){ 
    if (strtolower($input) == strtolower($states_array[$i])){ 
        $found = 1; 
        $output = $abb_array[$i]; 
        return $output; 
    } 
} 
if ($found != 1){ 
    $output = $input; 
    return $output; 
} 
return $output; 
} 

?> 
```

但是当我只是将函数放入文件中而不需要单独的 php 文件时，它工作得很好......

有任何想法吗？

更新...

由于每个人都认为我试图拉一个快速的并使用不同的代码......这是一个更新的代码......

```
<?php
require("lib/functions.php");
require("lib/dbconnect.php");
function stateToAbb($input) { 
    //reset found 
    $found = 0; 
    //list states 
    $states = "Alaska,Alabama,Arkansas,Arizona,California,Colorado,Connecticut,Delaware,Florida,Georgia,Hawaii,Iowa,Idaho,Illinois,Indiana,Kansas,Kentucky,Louisiana,Massachusetts,Maryland,Maine,Michigan,Minnesota,Missouri,Mississippi,Montana,North Carolina,North Dakota,Nebraska,New Hampshire,New Jersey,New Mexico,Nevada,New York,Ohio,Oklahoma,Oregon,Pennsylvania,Rhode Island,South Carolina,South Dakota,Tennessee,Texas,Utah,Virginia,Vermont,Washington,Wisconsin,West Virginia,Wyoming"; 
//list abbreviations 
$abb = "AK,AL,AR,AZ,CA,CO,CT,DE,FL,GA,HI,IA,ID,IL,IN,KS,KY,LA,MA,MD,ME,MI,MN,MO,MS,MT,NC,ND,NE,NH,NJ,NM,NV,NY,OH,OK,OR,PA,RI,SC,SD,TN,TX,UT,VA,VT,WA,WI,WV,WY"; 
//create arrays 
$states_array = explode(",", $states); 
$abb_array = explode(",", $abb); 

//run test 
for ($i = 0; $i < count($states_array); $i++){ 
    if (strtolower($input) == strtolower($states_array[$i])){ 
        $found = 1; 
        $output = $abb_array[$i]; 
        return $output; 
    } 
} 
if ($found != 1){ 
    $output = $input; 
    return $output; 
} 
return $output; 
} 
?> 
```

它不起作用...当我删除`require("lib/functions.php");`它时它起作用了，所以问题在于那行代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:14:58.793

调试的第一步：更改某些内容以查看错误消息是否也更改。

我总是通过在错误行之前添加一个空行来确保我正在查看正确的文件。如果错误消息相应更改，我知道我有正确的文件。

`die()`之后，根据我收到的错误消息，如果代码崩溃，我可能会插入。对于解析错误，在某些地方添加分号可能会有所帮助。

为了确定一行中错误的确切位置，我通常将这一行中的每个关键字拆分为自己的一行。空格对于解析没有问题，但这样做可以更好地识别解析器抱怨的确切位置。

# c# - 替换特定字符串 C#？

> ID：14368109
> 
> 赞同：2
> 
> 时间：2013-01-16T21:24:39.500
> 
> 标签：c#, string

我正在尝试从 C# 中的字符串替换特定的子字符串。

我的字符串是：`This is a car.`

我正在尝试用以下代码替换字符串中的 string.Empty 'a'：

```
data = data.Replace("a", string.Empty); 
```

但我的输出是：

```
This is c r. 
```

我只想删除“a”的孤立出现，而不是当这个字符/单词用于其他单词（如汽车）时。

我想要这样的输出：`This is car.`

我怎样才能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:29:57.610

您需要一个只匹配单词边界上的“a”的正则表达式模式。`"\b"`在正则表达式模式中表示单词边界：

```
Regex.Replace("this is a car", @"\ba\b", "") 
```

如果您还想匹配大写“A”，请确保您的模式忽略大小写 ( `RegexOptions.IgnoreCase`) 或显式将“A”添加到`"\b[Aa]\b"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:29:01.170

您需要做几种不同的情况，但这当然是可能的：

*   a 在句子“A car going by”的开头 -> s.StartsWith("A ")

*   中间的 a “这是一辆车” -> Replace(" a ", " ")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T21:27:02.817

“孤立事件”是什么意思？您是否真正追求这样的东西：

```
data.Replace(" a ", " "); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T21:26:37.127

也搜索空格。

```
data = data.(" a ", " ") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T21:26:48.963

您可以使用正则表达式并限制为符合单词的“a”实例。

```
string input = "This is a car. A thing to watch out for.";
string output = Regex.Replace(input, "\ba\b", "");

//Results in "This is car. A thing to watch out for." 
```

您还可以添加一个字符类来处理大写和小写以及任何其他字符。前任。\s[Aa]\s

\s 表示任何空白字符

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T21:26:28.900

而是搜索字符串“ a ”，并用空格替换以保持句子结构正确；

```
data = data.Replace(" a ", " "); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-12T14:42:54.710

# 这似乎是使用 StringBuilder 类的 replace 方法的好时机。

> StringBuilder.Replace 方法
> 
> 将此实例中出现的所有指定字符或字符串替换为另一个指定字符或字符串。
> 
> OVERLOADS Replace(Char, Char) 将此实例中出现的所有指定字符替换为另一个指定字符。
> 
> Replace(String, String) 将此实例中出现的所有指定字符串替换为另一个指定字符串。
> 
> Replace(Char, Char, Int32, Int32) 在此实例的子字符串中，将所有出现的指定字符替换为另一个指定字符。
> 
> Replace(String, String, Int32, Int32) 在此实例的子字符串中，将所有出现的指定字符串替换为另一个指定字符串。

```
string myString = "This is a car.";
StringBuilder sb = new StringBuilder(myString);
sb.Replace(' a ', ' ');
```

[资源](https://docs.microsoft.com/en-us/dotnet/api/system.text.stringbuilder.replace?view=net-5.0)

# java - Util方法逐行获取#

> ID：14368111
> 
> 赞同：0
> 
> 时间：2013-01-16T21:24:48.563
> 
> 标签：java, apache-commons-io

是否有任何 Util 方法可以通过 Line# 从给定文件中获取行内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:31:29.140

最简单的方法是将所有行读入一个列表，然后在该列表中按编号查找行。您可以使用

```
List<String> lines = FileUtils.readLines(file); 
```

> 我的文件是 3GB，我不想将所有行都存储在我的 java 内存中

我会确保你有足够的内存。您可以以不到 200 美元的价格购买 32 GB。

但是，假设这不是一个选项，您可以通过在将每行的偏移量存储在另一个文件中时读取它来索引文件。它可能是 32 位偏移量，但如果您使用 64 位偏移量，它会更简单/更具可扩展性。

然后，您可以查找每一行和下一行的偏移量，以确定读取每一行的位置。如果有效实施，我预计这将花费大约 10 微秒。

顺便说一句：如果你将它加载到 Java 内存中，它会快 100 倍。

# java - 为什么我的小程序创建一个单独的窗口

> ID：14368112
> 
> 赞同：0
> 
> 时间：2013-01-16T21:24:54.320
> 
> 标签：java, php, html, canvas, applet

问候stackoverflow的伟大思想。我最近一直在用java编写一个小型2D游戏，我想将它导出到一个可以在网页上运行的小程序中。我这样做了，代码在作为小程序和应用程序运行时都运行良好。但是，每当我将代码作为小程序运行时，都会显示小的默认小程序窗口，然后会显示另一个具有正确大小的显示内容的窗口。我认为这就是它无法在我的网页上正确显示的原因。我假设它正在显示第一个窗口中的内容，即空窗口。我想知道如何才能使它只显示一个窗口。我正在使用 Canvas 来显示我的窗口。我将上传任何请求的代码。先感谢您！

*   链接到嵌入小程序的小程序[PHP](http://andreas.kruhlmann.com/rain.php)。
*   [小程序存档](http://andreas.kruhlmann.com/rainApplet.jar)的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:28:38.703

```
Java Plug-in 10.5.1.255
Using JRE version 1.7.0_11-b21 Java HotSpot(TM) Client VM
User home directory = C:\Users\Andrew
----------------------------------------------------
c:   clear console window
..
0-5: set trace level to <n>
----------------------------------------------------
Attempting to start init...
-INIT METHOD STARTED-
Preferred size set to java.awt.Dimension[width=852,height=480]
Initialized JFrame with size java.awt.Dimension[width=852,height=480]
Initialized screen (284x160)
Initialized keyboard
Added key listener
Resizeable set to false
Title set
Game component added to screen
Frame packed
Exception in thread "AWT-EventQueue-3" java.lang.NullPointerException
    at sun.awt.SunToolkit.createImage(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.AWTErrorPanel.getErrorImage(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.AWTErrorPanel.paintComponent(Unknown Source)
    at javax.swing.JComponent.paint(Unknown Source)
    at javax.swing.JComponent.paintToOffscreen(Unknown Source)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown Source)
    at javax.swing.RepaintManager$PaintManager.paint(Unknown Source)
    at javax.swing.RepaintManager.paint(Unknown Source)
    at javax.swing.JComponent._paintImmediately(Unknown Source)
    at javax.swing.JComponent.paintImmediately(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.prePaintDirtyRegions(Unknown Source)
    at javax.swing.RepaintManager.access$700(Unknown Source)
    at javax.swing.RepaintManager$ProcessingRunnable.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

IE 没有小程序，没有窗口。控制台的输出设置为跟踪级别 5。

## 更新

新结果：

```
// ..
Frame packed
java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "exitVM.0")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source) 
```

代码（缺少我们只能猜测的 [SSCCE](http://sscce.org/)）是否随时调用..

```
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

?

如果是这样，请将其更改为：

```
// See http://stackoverflow.com/a/7143398/418556 for demo.
frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE); 
```

后者将在沙盒小程序中被允许，而`EXIT_ON_CLOSE`即使在受信任的小程序中也是不允许的。

# php - mysql_fetch_assoc 没有获取数据

> ID：14368114
> 
> 赞同：-1
> 
> 时间：2013-01-16T21:24:58.907
> 
> 标签：php, mysql

当我运行我的 php 文件时，它输出：

> 错误：无法获取结果，

我不明白为什么，我在其他文件中使用了这个确切的代码，它工作正常。

代码：

```
<?php
$mysql = mysql_connect('localhost','root','password') or die('ERROR: Could not connect, ' . mysql_error($mysql));
mysql_select_db('twp',$mysql) or die('ERROR: Could not connect, ' . mysql_error($mysql));
$q = mysql_query("SELECT * FROM DenCrypt_Users",$mysql) or die('ERROR: Could not lookup users, ' . mysql_error($mysql));
if(!$q)
{
    die('ERROR: Could not lookup users, ' . mysql_error($mysql));
}
while($row[] = mysql_fetch_assoc($q))
{
    $lp[] = $row['lastPing'];
    $usr[] = $row['usr'];
    for($i = 0; $i < count($usr);$i++)
    {
        if($lp[$i] + 180 >= time())
        {
            $q = mysql_query("UPDATE DenCrypt_Users SET online='Offline' WHERE usr='$usr[$i]'") or die('ERROR: Failed to update user, ' . mysql_error($mysql));
        }
    }
}
?> 
```

我在 phpmyadmin 上运行了相同的查询并且它有效。为什么 php 不获取数据？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T21:30:07.757

人们*期望* [`mysql_fetch_assoc()`](http://php.net/manual/en/function.mysql-fetch-assoc.php)最终在结果集的末尾返回 false。不要死于这种可能性，只需退出循环：

```
while($row = mysql_fetch_assoc($q))
{
  // etc. 
```

但是，正如其他人所提到的，您*真的*应该停止使用现已弃用的`ext/mysql`. 切换到*改进的* [MySQLi](http://php.net/manual/en/book.mysqli.php)扩展几乎就像在`i`每个函数调用中插入字母一样简单，尽管还应该投资于[参数化准备好的语句](https://stackoverflow.com/a/60496/623041)以减轻 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:37:49.807

看起来您在`$row`while 循环的每次迭代中都向 Array 添加了一个新项目。

```
while($row[] = mysql_fetch_assoc($q) or die('ERROR: Could not fetch results, ' . mysql_error($mysql)))
{
    $lp[] = $row['lastPing'];
..
} 
```

我认为您不应该能够使用`lastPing`Array 上的索引访问项目`$row`。您是否打算将获取的行收集到这样的数组中？如果没有，只需使用

```
while ( ($row = mysql_fetch_assoc($q)) !== false ) { .. } 
```

注意后面缺少的方括号`$row`。（如 Eggyal 所述将模具移除）

# spring - 春季自动扫描 jpa 实体的包

> ID：14368119
> 
> 赞同：2
> 
> 时间：2013-01-16T21:25:27.110
> 
> 标签：spring, hibernate, jpa

使用 hibernate SessionFactory 时可以轻松做到这一点：

```
<bean id="sessionFactory"
...
p:packagesToScan="com.sahandrc.survey" 
```

如何使用 jpa EntityManagerFactory 做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T21:38:57.880

对于更高版本来说几乎是一样的`Spring 3.1`。

这里有一个例子：

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
            p:packagesToScan="com.sahandrc.survey"
            p:dataSource-ref="dataSource"
            p:jpaPropertyMap-ref="jpaPropertyMap"
            p:jpaVendorAdapter-ref="hibernateVendor" /> 
```

上下文文件中所有内容的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
       http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

    <context:property-placeholder
        location="WEB-INF/database.properties"/>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
        p:packagesToScan="com.sahandrc.survey"
        p:dataSource-ref="dataSource"
        p:jpaPropertyMap-ref="jpaPropertyMap"
        p:jpaVendorAdapter-ref="hibernateVendor" />

    <bean id="dataSource"
          class="org.apache.commons.dbcp.BasicDataSource"
          destroy-method="close"
          p:driverClassName="${jdbc.driverClassName}"
          p:url="${jdbc.url}"
          p:username="${jdbc.username}"
          p:password="${jdbc.password}"
          p:maxActive="${dbcp.maxActive}"
          p:maxIdle="${dbcp.maxIdle}"
          p:maxWait="${dbcp.maxWait}"/>

    <util:map id="jpaPropertyMap">
        <entry key="generateDdl" value="${hibernate.generate_ddl}"/>
        <entry key="hibernate.hbm2ddl.auto" value="${hibernate.hbm2ddl.auto}"/>
        <entry key="hibernate.dialect" value="${hibernate.dialect}"/>
        <entry key="hibernate.default_schema" value="${hibernate.default_schema}"/>
        <entry key="hibernate.format_sql" value="${hibernate.format_sql}"/>
    </util:map>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

</beans> 
```

# c# - 创建自定义访问表的正确方法

> ID：14368121
> 
> 赞同：0
> 
> 时间：2013-01-16T21:25:32.593
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4, ef-code-first

我想知道（我知道这取决于项目，什么不是）开发自定义访问表的最佳/正确方法是什么，管理员可以在其中细粒度访问该站点。它基本上是动态创建一堆角色并使用 [Authorize] 属性检查这些角色吗？我看到的一个问题（我可能是错的，因为我刚开始学习 asp.net MVC 架构）是为了修改访问权限，我必须更改并重新编译整个站点。

我正在寻找的是向管理员展示一组操作，并让他们选择每个用户（和/或角色，如果这样会更好，角色可以与简单成员角色不同）可以并且可以不在站点中执行（例如，从访问特定操作到更改 entity1 的 name 属性的任何地方）

任何人都有关于教程或某种插件的建议，甚至是我可以实现这一目标的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:50:48.680

您误解了授权模式：在身份验证后，用户 id 和她分配的角色将附加到 iprincipal 中的线程上下文。然后，当您在代码中进行安全检查时，会根据您的软件检查此主体。

因此，没有什么需要重新编译，除非您想更改允许哪些角色做什么。然后仅针对您已完成程序检查的地方。可以在 web.config 中定义对 url 路径的访问。

# javascript - 如何获取所有计算属性的列表？

> ID：14368122
> 
> 赞同：4
> 
> 时间：2013-01-16T21:25:33.560
> 
> 标签：javascript, ember.js, ember-data

使用 ember 数据，我在序列化过程中遇到了计算属性不包含在有效负载中的问题。

```
var Person = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName:  DS.attr('string'),
    fullName:  function( ) {
            return this.firstName + this.lastName;
    }.property()
});

App.store.createRecord( Person, {
    firstName: 'John',
    lastName:  'Doe'
});
App.store.commit(); 
```

产生以下有效载荷：

```
{ firstName: "John",
  lastName:  "Doe" } 
```

我已经尝试添加`.cacheable()`到该属性，但它似乎没有帮助。我也尝试将整个`fullName`函数包装在 中`Ember.computed()`，但这似乎也没有帮助。

跟踪 Ember 代码，我看到请求的数据来自`DS.Model.serialize()`收集模型的所有属性。但是，它似乎没有收集计算属性。

Ember 代码片段：

```
serialize: function(record, options) {
  options = options || {};

  var serialized = this.createSerializedForm(), id;

  if (options.includeId) {
    if (id = get(record, 'id')) {
      this._addId(serialized, record.constructor, id);
    }
  }

  this.addAttributes(serialized, record);
  this.addRelationships(serialized, record);

  return serialized;
},

addAttributes: function(data, record) {
  record.eachAttribute(function(name, attribute) {
    this._addAttribute(data, record, name, attribute.type);
  }, this);
} 
```

如您所见，它们收集属性和关系，但似乎没有任何东西收集计算属性。起初我的策略是重载`addAttributes()`以循环遍历所有计算属性并将它们添加到列表中。但在我的尝试中，无法找到一种可靠的方法来获取计算属性列表。如果我使属性可缓存，我可以使用`Ember.meta( model, 'cache' )`，但该列表包括所有属性、计算属性和一些我不需要/不想要的额外内容。

所以，在这一切之后我的问题......

*   Ember 中是否已经存在一种方法可以使计算属性包含在序列化中？

*   如果没有，我可以重载适当的方法，但是如何获得所有计算属性的动态列表？（我可以使用`.getProperties()`，但它需要一组属性名称，而我没有）

*   还有其他相关建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:49:08.733

我没有尝试过，但是[eachComputedProperty 是否](http://emberjs.com/api/classes/Ember.Object.html#method_eachComputedProperty)适合您的目的？

# html - 网络托管的 URL

> ID：14368123
> 
> 赞同：-3
> 
> 时间：2013-01-16T21:25:39.360
> 
> 标签：html, url-rewriting, hosting

我用来托管我的网站的人告诉我，我的网站在浏览器中看起来像这样。

```
http://www.website.domain/folder/index.html 
```

我希望网站看起来像这样：

```
A - http://www.website.domain/ 
```

或者

```
B - http://www.website.domain/index.html 
```

我几乎可以肯定这是可能的，他们只是不知道如何设置某种文件路径。这是一个单页 html 站点，整个站点包含在 1 个文件夹中。所以我决定去找一家公司来托管我的网站（即 1and1.com）。

首先，我如何为我的首选方式设置网络托管？Web 开发人员对偏好 A 或 B 的偏好是什么？

其次，添加包含另一个网站的第二个文件夹会产生什么后果。第二个网站是否仍然能够拥有样式 A 或 B 的 URL 而不会干扰第一个网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:29:56.837

只需相应地为每个虚拟主机配置您的 Web 服务器的文档根目录。如果您的虚拟主机不会为您执行此操作，或者不允许您执行此操作……请寻找新的虚拟主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:48:07.860

**为此有一个名为mod_rewrite**的好工具。

入门：[http ://wettone.com/code/clean-urls](http://wettone.com/code/clean-urls)

复杂示例：[http ://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

# c# - 这个构造函数的用途是什么：ActionBlock 构造函数（函数 )

> ID：14368124
> 
> 赞同：1
> 
> 时间：2013-01-16T21:25:42.897
> 
> 标签：c#, task-parallel-library, .net-4.5, tpl-dataflow

我之前通过另一个构造函数使用了 ActionBlock：

`ActionBlock<TInput> Constructor (Action<TInput>)`

但是对于标题中的返回类型任务，我不确定 ActionBlock 对返回的任务做了什么。我认为这是为了以某种方式等待提供给构造函数的异步委托？我能抓住它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:51:48.180

好的，我应该猜到它是为了提供异步委托。我一定对它的语法有点陌生。这是一个这样的代表的例子：

```
var writer = new ActionBlock<string>(async url =>
{
    WebClient wc = new WebClient();
    // using IOCP the thread pool worker thread does return to the pool
    byte[] buffer = await wc.DownloadDataTaskAsync(url);
    string fileName = Path.GetFileName(url);

    string name = @"Images\" + fileName;

    using (Stream srm = File.OpenWrite(name))
    {
        await srm.WriteAsync(buffer, 0, buffer.Length);
    }
}); 
```

所以可以说委托 async url => 具有 type `Func<String, Task>`。

该示例来自：http: [//blogs.microsoft.co.il/blogs/bnaya/archive/2012/01/28/tpl-dataflow-walkthrough-part-5.aspx](http://blogs.microsoft.co.il/blogs/bnaya/archive/2012/01/28/tpl-dataflow-walkthrough-part-5.aspx)

# c# - 如何在 C# 中使用全局变量？

> ID：14368129
> 
> 赞同：119
> 
> 时间：2013-01-16T21:26:07.847
> 
> 标签：c#, variables, scope

如何声明一个变量，以便每个类 (*.cs) 都可以访问其内容，而无需实例引用？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2013-01-16T21:43:52.223

在`C#`你不能定义真正的全局变量（从某种意义上说它们不属于任何类）。

话虽这么说，我知道模仿此功能的最简单方法是使用 a `static class`，如下所示：

```
public static class Globals
{
    public const Int32 BUFFER_SIZE = 512; // Unmodifiable
    public static String FILE_NAME = "Output.txt"; // Modifiable
    public static readonly String CODE_PREFIX = "US-"; // Unmodifiable
} 
```

然后，您可以在代码中的任何位置检索定义的值（前提是它是相同的一部分`namespace`）：

```
String code = Globals.CODE_PREFIX + value.ToString(); 
```

为了处理不同的命名空间，您可以：

*   声明`Globals`类而不将其包含在特定的类`namespace`中（以便将其放置在全局应用程序命名空间中）；
*   插入正确的 using 指令以从另一个`namespace`.

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2013-01-16T21:28:18.033

C# 中没有全局变量之类的东西。时期。

如果需要，您可以拥有静态成员：

```
public static class MyStaticValues
{
   public static bool MyStaticBool {get;set;}
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-10-31T16:19:07.070

首先检查您是否真的需要一个全局变量，而不是在不考虑您的软件架构的情况下公然使用它。

让我们假设它通过了测试。根据使用情况，全局变量可能很难在竞争条件和许多其他“坏事”中进行调试，最好从你准备好处理这些坏事的角度来处理它们。所以，

1.  将所有此类全局变量包装到一个`static`类中（为了便于管理）。
2.  有属性而不是字段（='变量'）。这样，您就有了一些机制来解决将来并发写入 Globals 的任何问题。

这样一个类的基本大纲是：

```
public class Globals
{
    private static bool _expired;
    public static bool Expired 
    {
        get
        {
            // Reads are usually simple
            return _expired;
        }
        set
        {
            // You can add logic here for race conditions,
            // or other measurements
            _expired = value;
        }
    }
    // Perhaps extend this to have Read-Modify-Write static methods
    // for data integrity during concurrency? Situational.
} 
```

其他类的用法（在同一命名空间内）

```
// Read
bool areWeAlive = Globals.Expired;

// Write
// past deadline
Globals.Expired = true; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-06-12T19:50:41.807

一个有用的功能是[`using static`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/using-static)

正如其他人所说，您必须为您的全局变量创建一个类：

```
public static class Globals {
    public const float PI = 3.14;
} 
```

但是您可以像这样导入它，以便不再在其静态属性前面写类名：

```
using static Globals;
[...]
Console.WriteLine("Pi is " + PI); 
```

# gdi+ - Delphi/C++Builder TBitmap：如何确定扫描线顺序？

> ID：14368136
> 
> 赞同：0
> 
> 时间：2013-01-16T21:26:24.900
> 
> 标签：gdi+, gdi, c++builder, vcl

Delphi 的 TBitmap 类型基本上是 GDI BITMAP 和 PALETTE 的包装器，并且可以支持自上而下和自下而上的扫描线排序。

我有一个 TBitmap，我需要将其转换为 GDI+ Bitmap，以便对其进行旋转和合成。

我的位图是 Windows 支持的 32 位 ARGB，但 VCL 本身并不“理解”。

```
TBitmap *bmp;
... 
```

当我使用以下构造函数时，alpha 通道不适用于合成，但除此之外一切正常。

```
Gdiplus::Bitmap b(bmp->Handle, NULL); 
```

所以，我尝试了下面的构造函数，它接受大小、像素数据和格式参数。

```
Gdiplus::Bitmap b(bmp->Width,  bmp->Height, bmp->Width *4, PixelFormat32bppARGB,   
    (BYTE*) bmp->ScanLine[bmp->Height-1]); // bottom up storage 
```

这得到了阿尔法，但位图是颠倒的，所以我尝试了这个

```
Gdiplus::Bitmap b(bmp->Width,  bmp->Height, - bmp->Width *4, PixelFormat32bppARGB,   
    (BYTE*) bmp->ScanLine[0]);  // negative stride for bottom up bitmaps?! 
```

现在，这行得通，但我当然是硬编码到自下而上的位图中。但是，我找不到确定 TBitmap 是自上而下还是自下而上的方法。它们以负高度存储在内部，但高度值在传递回用户代码之前会被处理。

我怎样才能找出扫描线的顺序，或者——更好的是——还有另一种从 TBitmap 创建 GDIPlus 位图的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:38:29.223

该`TBitmap::ScanLine`属性占自上而下和自下而上。对于自底向上位图，`ScanLine[0]`返回原始像素数据的最后一行，并`ScanLine[Height-1]`返回第一行。对于自上而下的位图，返回原始像素数据`ScanLine[0]`的第一行和最后一行。`ScanLine[Height-1]`

要确定 a`TBitmap`是自下而上还是自上而下，您必须手动检索其[`BITMAPINFOHEADER`](http://msdn.microsoft.com/en-us/library/dd183376.aspx)结构，该结构`TBitmap`本身并不公开。您可以使用 Win32 API[`GetObject()`](http://msdn.microsoft.com/en-us/library/dd144904.aspx)函数来检索[`DIBSECTION`](http://msdn.microsoft.com/en-us/library/dd183567.aspx)具有[`BITMAPINFOHEADER`](http://msdn.microsoft.com/en-us/library/dd183376.aspx)成员的结构。

# c# - 在 Windows 8 应用商店应用程序中嵌入 Acrobat Reader

> ID：14368140
> 
> 赞同：1
> 
> 时间：2013-01-16T21:26:33.510
> 
> 标签：c#, pdf, windows-8, windows-store-apps, acrobat

如何在 Windows 8 应用商店应用程序中嵌入 Acrobat Rader。有一些基于 C# 的教程和一些相关的问题，但我找不到任何解决方案。他们都建议添加一个 COM 元素，然后从工具箱中选择 Acrobat Reader 控件。我添加了 Acrobat Reader COM 元素，但它给了我错误： ![在此处输入图像描述](../Images/9339d02e5274fd9f17d5ff7f9b4c8e61.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:39:53.823

如果您希望您的应用程序经过认证可以在 Windows 应用商店中分发，则您不能这样做。

COM 对象可以在 Windows 应用商店应用程序中使用，但它们必须与您的应用程序包一起分发，并且**它们不得使用任何用于 Windows 应用商店的禁止 API**。对于 Acrobat Reader 的 ActiveX 控件，情况可能并非如此，因为它使用（仅举一个示例）OPENFILENAME 对话框，而 Windows 应用商店中不允许使用该对话框。

**2013 年 4 月编辑：**

[Amyuni PDF Creator for WinRT](http://w8pdf.com)（一个商业库）目前作为[预发布试用版](https://www.amyuni.com/en/resources/trialdownloads/)提供。该库为基于 Xaml 的项目中的 PDF 查看提供了 Xaml 控件，也可用于 WinRT-Javascript 项目中的 PDF 到 HTML5 的转换。 *免责声明：我目前是该库的开发人员*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:09:14.493

遗憾的是，目前，在 Windows 8 应用商店应用程序中读取 pdf 文件的唯一方法是使用诸如[Foxit](http://www.foxitsoftware.com)之类的商业库。

# python - Python ArcGIS ArcPy 运行时错误：未初始化

> ID：14368143
> 
> 赞同：1
> 
> 时间：2013-01-16T21:26:37.517
> 
> 标签：python, gis

不确定我是否在正确的位置发帖，但我无法让我的 python GIS 程序在 Windows 7 64 位上运行。这些程序适用于 XP 32 位。我做了很多研究并尝试更改我的 PythonPath、移动 lib 文件夹等以及其他建议。我按照另一个人的建议在 Python26 下的注册表中创建了一个新密钥，其中包含 Desktop10.pth 文件的内容。但是，我仍然收到下面发布的相同错误。我目前正在运行 ArcGIS 10.0。我可能错过了一些简单的东西！任何帮助将不胜感激！先感谢您。

Traceback（最近一次调用最后一次）：文件“Z:\Desktop\GISClimateMapping.py”，第 85 行，在 import arcpy 文件“C:\Program Files (x86)\ArcGIS\Desktop10.0\arcpy\arcpy__init__.py”中，第 17 行，从地理处理导入 gp 文件“C:\Program Files (x86)\ArcGIS\Desktop10.0\arcpy\arcpy\geoprocessing__in it__.py”，第 14 行，从 _base 导入 * 文件“C:\Program Files (x86)\ArcGIS\Desktop10.0\arcpy\arcpy\geoprocessing_bas e.py"，第 568 行，在 env = GPEnvironments(gp) 文件“C:\Program Files (x86)\ArcGIS\Desktop10.0\arcpy\arcpy \geoprocessing_bas e.py"，第 565 行，在 GPEnvironments 中返回 GPEnvironment(geoprocessor) 文件 "C:\Program Files (x86)\ArcGIS\Desktop10.0\arcpy\arcpy\geoprocessing_bas e.py"，第 521 行，在**init** self._refresh() 文件“C:\Program Files (x86)\ArcGIS\Desktop10.0\arcpy\arcpy\geoprocessing_bas e.py”，第 523 行，在 _refresh envset = (set(env for env in self._gp. listEnvironments())) RuntimeError: NotInitialized

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T15:38:00.167

我有一个非常相似的问题。我们有一个许可证，如果它被签出给其他人，它会禁止我的脚本运行。我是凭经验而不是通过代码/支持发现的，但我相当有信心这是您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:03:59.173

当我的代码的第一行是“import arcpy”时，我遇到了这个错误，我的解决方案是在我的 python 脚本中插入一个新的第一行：“import arcview”。

我的代码在使用 ArcGIS 10.0 的系统上运行良好，但是在我将开发盒升级到 10.1 桌面和服务器后遇到了这个问题。各种 stackoverflow、gisstackexchange 和 forums.arcgis.com 文章指出了 PATH、PYTHONPATH、HLKM 等环境的可能性或检查您的 ArcGIS 管理员许可。在 pyscripter 和 IDLE 中重现问题后，通过正确卸载的 python 2.6、安装的 python 2.7 环境和有效的浮动许可证确认一切正常，但错误仍然存​​在。关于此修复为何有效，我的最佳猜想是，从 10.1 arcgis 许可证签出开始可能会更明确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:48:25.513

您必须使用 Python 2.6 32 位和 Arcgis 10.0，即使是 64 位操作系统。我怀疑（尽管从提供的信息中不确定）您安装了另一个版本的 Python。我会首先检查安装了多少版本，然后卸载所有版本，除了 C:\Pytho26\ArcGIS10.0 中的版本。然后我会在提到的位置安装 Python 2.6（它在 ArcGIS 磁盘上）。您还需要重新安装 numpy 和 matplotlib，它们也在磁盘上。如果这没有帮助，那么我会卸载您计算机上的 ArcGIS 和每个 Python 版本，然后重新安装 ArcGIS。这听起来很激烈，但是 ESRI 的 Python 实现非常敏感，您可能会浪费数天时间来尝试找到一个简单的解决方案。这最后一步通常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T14:14:10.973

我认为问题是由同时运行 ArcMap 的另一个用户造成的——因为只有一个 ArcGIS 许可证。事实上，当用户关闭 ArcMap 时，python 脚本开始运行良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-25T14:10:37.420

作为记录，我刚刚在 10.1 中在 Visual Studio 中调试 arcpy 脚本时遇到了这个问题。它实际上发生在没有代码更改的运行之间 - 一次运行有效，下一次出现错误。无论出于何种原因，将导入 arcview 添加到顶部都有效。也许这是一个许可证结帐问题，但这种不一致是令人不安的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-25T15:18:33.680

奇怪但真实。将 ArcGIS (ArcInfo) 10.1 升级到 10.2 后出现同样的问题。在python代码中添加了一行：

```
import arcinfo 
```

在此之后，一切都很完美。易于修复，难以理解。

谢谢！威廉

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-08T07:43:11.300

由于您的 Python 是 64 位而 ArcMap 是 32 位，因此可能会发生此错误。

您可以将 python 更新为 64 位版本，也可以将 ArcMap 更新为 64 位版本。

如何获得 64 位版本的 ArcMap：

*   从安装。当您启动 autorun.exe 应用程序时，启动窗口将为您提供安装 ArcGIS Desktop 后台地理处理（64 位）的选项。这仅在 10.1 及更高版本中可用
*   如果您的计算机中已经安装了 ArcGIS。您可以[在此处下载背景地理处理（64 位）的补丁](http://support.esri.com/en/downloads/patches-servicepacks/view/productid/67/metaid/2194)。

# r - 以交互方式迭代许多绘图到不同的文件

> ID：14368147
> 
> 赞同：0
> 
> 时间：2013-01-16T21:26:56.660
> 
> 标签：r, loops, plot

我需要构建一个函数来绘制多个 pdf，读入它们，组合结果（不同大小的 pdf），保存组合文件并删除初始文件。我对以交互方式将多个绘图绘制到外部 pdf 的初始部分感到困惑。问题是我需要一种在`for`循环中暂停的方法，等待情节，然后在收到情节后继续前进。我认为`readLines`这是要走的路（可能是这样），但这不起作用（即没有产生任何情节）。

我怎样才能让 R`pdf`在剧情之间暂停，继续前进`dev.off`并再次重复整个过程？期望的结果是在 wd 中有三个文件，称为`file1.pdf`,`file2.pdf`和`file3.pdf`. 同样，在运行 loop/ 之后`lapply`，这个过程将是交互式的。

这是问题的MWE：

```
widths <- c(10, 9, 8)
heights <- c(11, 9, 7)
file <- "foo.pdf"
lapply(1:3, function(i) {  #will askfor/take 3 plots interactively
    qo <- gsub(".pdf", paste0(i, ".pdf"), file, fixed = TRUE)
    cat("plot now...")
    pdf(file=qo, width = widths[i], height = heights[i])
#pause command here
    dev.off()
})

#the interactive part
plot(1:10)
plot(1:13)
plot(1:15) 
```

**编辑 1** *相关问题：* [确定 ghostscript 版本](https://stackoverflow.com/questions/14366406/determine-ghostscript-version)

**编辑 2**这是我使用此信息创建的包的链接[-单击此处-](https://github.com/trinker/plotflow)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:01:32.607

就这么简单吗？

```
for(i in 1:3){
  cat(i, "\n")
  cat("plot now...")
  readLines(n=1)
} 
```

* * *

`stdin`这将停止从（即控制台）读取单行。按 Enter 继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T23:06:30.420

你在寻找这样的东西吗？

```
widths <- c(10, 9, 8)
heights <- c(11, 9, 7)
file <- "foo.pdf"
lapply(1:3, function(i) {
    qo <- gsub(".pdf", paste0(i, ".pdf"), file, fixed = TRUE)
    pdf(file=qo, width = widths[i], height = heights[i])
    # Reads string interactively
    input <- scan("", what = "character", nmax=1, quiet=TRUE)
    # Executes `input` as a command (possibly, needs extra check)
    eval(parse(text=input))
    dev.off()
}) 
```

这会产生三个文件：`foo1.pdf`和`foo2.pdf`使用`foo3.pdf`您以交互方式键入的命令生成的图。

# java - 使 JTextPane 的文本横向移动而不是换行

> ID：14368151
> 
> 赞同：1
> 
> 时间：2013-01-16T21:27:07.990
> 
> 标签：java, swing, jscrollpane, jtextpane

我正在使用 JTextPane 并试图让文本横向移动，而不是像 JTextField 这样的换行符。我尝试过搜索和查看 JTextPane 的 API，但没有发现任何有用的东西。有人可以告诉我某种可以帮助我的方法或过程（可以在主类中使用）吗？谢谢！

PS 我知道使用 JScrollPane，但我想避免这种情况，因为我希望 JTextPane 尽可能看起来像 JTextField。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:35:19.183

```
JTextPane textPane = new JTextPane();
JPanel noWrapPanel = new JPanel( new BorderLayout() );
noWrapPanel.add( textPane );
JScrollPane scrollPane = new JScrollPane( noWrapPanel ); 
```

[解决方案来源](http://tips4java.wordpress.com/2009/01/25/no-wrap-text-pane/)

加：

```
JScrollPane.setVerticalScrollBarPolicy(VERTICAL_SCROLLBAR_NEVER);
JScrollPane.setHorizontalScrollBarPolicy(HORIZONTAL_SCROLLBAR_NEVER); 
```

编辑：

**没有**解决方案 **`JScrollPane`**

 **```
import java.awt.Component;
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.plaf.ComponentUI;
import javax.swing.text.StyledDocument;

public class NonWrappingTextPane extends JTextPane {

    public NonWrappingTextPane() {
        super();
    }

    public NonWrappingTextPane(StyledDocument doc) {
        super(doc);
    }

    // Override getScrollableTracksViewportWidth
    // to preserve the full width of the text
    @Override
    public boolean getScrollableTracksViewportWidth() {
        Component parent = getParent();
        ComponentUI ui = this.getUI();

        return parent != null ? (ui.getPreferredSize(this).width <= parent.getSize().width) : true;
    }

    // Test method
    public static void main(String[] args) {
        String content = "The plaque on the Apollo 11 Lunar Module\n"
                + "\"Eagle\" reads:\n\n"
                + "\"Here men from the planet Earth first\n"
                + "set foot upon the Moon, July, 1969 AD\n"
                + "We came in peace for all mankind.\"\n\n"
                + "It is signed by the astronauts and the\n"
                + "President of the United States.";
        JFrame f = new JFrame("Non-wrapping Text Pane Example");
        JPanel p = new JPanel();

        NonWrappingTextPane nwtp = new NonWrappingTextPane();
        nwtp.setText(content);

        p.add(nwtp);
        f.getContentPane().setLayout(new GridLayout(2, 1));
        f.getContentPane().add(p);

        f.setSize(300, 200);
        f.setVisible(true);

        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```**

# jquery - 如何使用 jquery 按值访问复选框

> ID：14368156
> 
> 赞同：0
> 
> 时间：2013-01-16T21:27:40.467
> 
> 标签：jquery, html

> **可能重复：**
> [jQuery 值选择器](https://stackoverflow.com/questions/4974033/jquery-value-selector)

我有这个作为html：

```
<div style="" id="results">
        <label class="wList"><input checked="checked" class="wList-chk" name="wList[]" value="6" type="checkbox">Running</label>
        <label class="wList"><input checked="checked" class="wList-chk" name="wList[]" value="1" type="checkbox">Baseball</label>
        <label class="wList"><input checked="checked" class="wList-chk" name="wList[]" value="3" type="checkbox">Basketball</label>
</div> 
```

我想按值访问一个复选框，并且想知道这是如何完成的。我试过了：

`$("#results .wList .wList-chk input:checkbox").attr('value').effect('highlight',{},1500);`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:32:37.277

有很多方法，其中一种是：

```
$('input.wList-chk[value="1"]').effect('highlight',{},1500); 
```

但是，这只会选择复选框，而不是它周围的文本。你可能想要什么：

```
$('input.wList-chk[value="1"]').parent().effect('highlight',{},1500); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/gNbzq/)**

这将选择标签和其中的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:29:17.050

```
$('input[type="checkbox"][value="foo"]'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:30:39.223

您需要实际检查该值。像这样：

```
 $("#results .wList .wList-chk input:checkbox").each(function(){
     value = $(this).val();
     if(value==someVal){
          $(this).effect('highlight', {}, 1500);
     }
 }); 
```

# c++ - 如何通过 bash shell 输入 c++ 字符串 >= 1024 个字符？

> ID：14368168
> 
> 赞同：4
> 
> 时间：2013-01-16T21:28:12.857
> 
> 标签：c++, string, macos, bash, cin

在 os X 10.8 上，我尝试通过 bash 将 std 输入重定向到 c++ 字符串。

打印第 1024 个字符后，我什至无法按 Enter。

您能否解释一下问题发生在哪里以及如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:04:19.673

该问题与 C++ 代码或 C++ 代码无关`bash`。为了验证这一点，这个简单的程序有同样的问题：

```
#include <iostream>
#include <string>
int main(int, char**) {
    std::string s;
    std::getline(std::cin, s);
} 
```

这个 Python 程序也是如此：

```
#!/usr/bin/python
raw_input() 
```

你可以尝试在不同的shell下运行，看看它没有什么区别。

问题是线路模式下的 TTY 总是有一个最大线路长度，而这个恰好有一个最大线路长度为 1024。

所以，这甚至不是一个真正的编程问题。这是一个 TTY 问题。这就是为什么您可以在[superuser.com](https://superuser.com/questions/264407/macosx-10-6-7-cuts-off-stdin-at-1024-chars)而不是在这里找到副本的原因。请参阅那里有关处理此问题的各种方法的讨论。

但是，如果您想从程序内部而不是全局处理它，您可以检查是否`stdin`是 a `tty`，如果是，则使用`termios`函数暂时关闭线路模式。例如，像这样：

```
#include <iostream>
#include <string>
#include <termios.h>
#include <unistd.h>

int main(int, char**) {
  struct termios told;

  if (isatty(STDIN_FILENO)) {
    tcgetattr(STDIN_FILENO, &told);
    struct termios tnew = told;
    tnew.c_lflag &= ~ICANON;
    tcsetattr(STDIN_FILENO, TCSAFLUSH, &tnew);
  }

  std::string s;
  std::getline(std::cin, s);

  if (isatty(STDIN_FILENO)) {
    tcsetattr(STDIN_FILENO, TCSAFLUSH, &told);
  }
} 
```

但是，您显然需要真正的错误处理，并且您可能希望使用 RIAA 来存储和恢复原始 termios 设置，并且您可能应该阅读`man termios`以了解您在做什么以及它将产生什么其他影响（和你是否想做其他事情）。

# grails - 引导枚举值给出奇怪的结果

> ID：14368173
> 
> 赞同：0
> 
> 时间：2013-01-16T21:28:24.763
> 
> 标签：grails, enums, bootstrapping

我有一个域类，我有一个控制器和 UI，它为枚举的值吐出 [object Object]。

我的枚举如下：

```
enum customerenum {
  value1('value1'),
  value2('value2')
} 
```

我有一个域类客户

```
class Customer {
  customerenum ce
  String location
} 
```

所以现在我想引导这个

所以在我的引导程序中，我有

```
class BootStrap {
  def init = { servletContext ->
    new Customer(
      ce:'value1',
      location:'USA'
    ).save()
  }
} 
```

但是在实际页面中，位置显示为 USA，但 customerenum 显示为 [object Object]

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:58:29.340

所以事实证明，我需要枚举中的 getvalue() 方法，并且当您在类或控制器中获取枚举的值时需要调用该方法。这解决了我的问题

# c# - 所有值的计数为零的频率表

> ID：14368180
> 
> 赞同：3
> 
> 时间：2013-01-16T21:28:55.197
> 
> 标签：c#, .net, linq

> **可能重复：**
> [如果键不存在，字典返回默认值](https://stackoverflow.com/questions/2601477/dictionary-returning-a-default-value-if-the-key-does-not-exist)

我有一个只包含数字的字符串。我有兴趣生成数字的频率表。这是一个示例字符串：

```
var candidate = "424256"; 
```

`KeyNotFound`此代码有效，但如果我查找不在字符串中的数字，它会引发异常：

```
var frequencyTable = candidate
    .GroupBy(x => x)
    .ToDictionary(g => g.Key, g => g.Count()); 
```

产生：

```
Key Count
4   2 
2   2 
5   1 
6   1 
```

所以，我使用了这段代码，它有效：

```
var frequencyTable = (candidate + "1234567890")
    .GroupBy(x => x)
    .ToDictionary(g => g.Key, g => g.Count() - 1); 
```

但是，在其他用例中，我不想指定所有可能的键值。

有没有一种优雅的方法可以将 0 计数记录插入到`frequencyTable`字典中，而无需使用这种行为创建自定义集合，例如这样？

```
public class FrequencyTable<K> : Dictionary<K, int>
{
  public FrequencyTable(IDictionary<K, int> dictionary) 
    : base(dictionary)
  { }

  public new int this[K index]
  {
    get
    {
        if (ContainsKey(index))
            return base[index];
        return 0;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:31:58.847

如果您不*以某种方式*指定所有可能的键值，则您的字典将不包含此类键的条目。

而不是存储零计数，您可能希望使用

```
Dictionary.TryGetValue(...) 
```

在尝试访问之前测试密钥的存在。如果 TryGetValue 返回 false，则只需返回 0。

您可以轻松地将其包装在扩展方法中（而不是创建自定义集合）。

```
static public class Extensions
{
    static public int GetFrequencyCount<K>(this Dictionary<K, int> counts, K value)
    {
        int result;
        if (counts.TryGetValue(value, out result))
        {
            return result;
        }
        else return 0;
    }
} 
```

用法：

```
Dictionary<char, int> counts = new Dictionary<char, int>();
counts.Add('1', 42);
int count = counts.GetFrequencyCount<char>('1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:52:19.497

如果所有可能的键都有一个模式，您可以使用`Enumerable.Range`（或`for`循环）生成 0 值键作为基表，然后在频率数据中左连接以填充相关值：

```
// test value
var candidate = "424256";

// generate base table of all possible keys
var baseTable = Enumerable.Range('0', '9' - '0' + 1).Select(e => (char)e);

// generate freqTable
var freqTable = candidate.ToCharArray().GroupBy (c => c);

// left join frequency table results to base table
var result =
    from b in baseTable
    join f in freqTable on b equals f.Key into gj
    from subFreq in gj.DefaultIfEmpty()
    select new { Key = b, Value = (subFreq == null) ? 0 : subFreq.Count() };

// convert final result into dictionary
var dict = result.ToDictionary(r => r.Key, r => r.Value); 
```

样本结果：

```
Key Value
0   0
1   0
2   2 
3   0
4   2
5   1
6   1
7   0
8   0
9   0 
```

# sql-server - 多个 SSRS 实例 - 如何查询配置详细信息？

> ID：14368183
> 
> 赞同：0
> 
> 时间：2013-01-16T21:29:11.323
> 
> 标签：sql-server, ssrs-2008, reporting-services

我们在一台服务器上有大约 20 个 SSRS 实例。我希望可以通过某种查询或命令行提示获得配置详细信息。我正在从 Reporting Services 配置管理器中查找所有相关信息，例如：

*   实例名称
*   报表服务器虚拟目录
*   报表管理器虚拟目录
*   数据库名称

希望此问题的答案适用于 SQL Server 2005 和 2008R2。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:23:08.257

可以使用 WMI 获取 SSRS 实例信息（请参阅此处[http://msdn.microsoft.com/en-us/library/ms152836(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms152836(v=sql.105).aspx)）尝试它的最简单方法可能是使用 PowerShell。这是 2008R2 的一些示例[http://blogs.msdn.com/b/jgalla/archive/2010/05/26/rs-powershell-gems-the-wmi-provider.aspx](http://blogs.msdn.com/b/jgalla/archive/2010/05/26/rs-powershell-gems-the-wmi-provider.aspx) 如果您更改它也应该适用于 2005 v10 到 v9

# ios - 需要在iOS中生成一个包含至少一个数字的随机数

> ID：14368187
> 
> 赞同：1
> 
> 时间：2013-01-16T21:29:33.340
> 
> 标签：ios, random

我目前正在使用的 iOS 中有一个随机数生成器方法。虽然它工作正常，但我想对其进行修改，使其输出中始终包含至少一个数字。我该怎么做？这是我正在使用的随机数方法：

```
- (NSString *)generateRandString {

    NSString *alphabet  = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXZY0123456789";
    NSMutableString *s = [NSMutableString stringWithCapacity:5];
    for (NSUInteger i = 0U; i < 5; i++) {

        u_int32_t r = arc4random() % [alphabet length];
        unichar c = [alphabet characterAtIndex:r];
        [s appendFormat:@"%C", c];

    }

    return s;
} 
```

提前感谢所有回复的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:43:33.883

这是我编辑和检查的解决方案：

```
- (NSString *)generateRandString {

         NSString *alphabet  = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXZY0123456789";
         NSMutableString *s;
         NSCharacterSet *set = [NSCharacterSet characterSetWithCharactersInString:@"0123456789"];

         do
        {
            s = [NSMutableString stringWithCapacity:5];
           for (NSUInteger i = 0U; i < 5; i++)
           {

              u_int32_t r = arc4random() % [alphabet length];
              unichar c = [alphabet characterAtIndex:r];
              [s appendFormat:@"%C", c];
            }
       }
       while ([s rangeOfCharacterFromSet:set].location == NSNotFound);  

      return s;
 } 
```

我还实施了 Dan Dyer 建议的解决方案（它显然比我的要好）。我的实现可能并不完美（我多次使用相同的功能，而不是为它创建一个单独的函数，但我相信这对你来说并不难实现），但它的工作原理与 Dan 提出的完全一样。

```
 NSString *alphabet  = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXZY0123456789";
NSMutableString *s  = [NSMutableString string];
NSCharacterSet *set = [NSCharacterSet decimalDigitCharacterSet];
NSString *digits    = @"0123456789";

for (NSUInteger i = 0U; i < 4; i++)
{
    u_int32_t r = arc4random() % [alphabet length];
    unichar c = [alphabet characterAtIndex:r];
    [s appendFormat:@"%C", c];
}

if ([s rangeOfCharacterFromSet:set].location == NSNotFound)
{
    u_int32_t r = arc4random() % [digits length];
    unichar c = [digits characterAtIndex:r];
    [s appendFormat:@"%C", c];
}
else
{
    u_int32_t r = arc4random() % [alphabet length];
    unichar c = [alphabet characterAtIndex:r];
    [s insertString:[NSString stringWithFormat:@"%C", c] atIndex:arc4random() % s.length];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T22:24:13.090

而不是生成整个字符串，然后在它不包含任何数字时拒绝它，这可能需要多次迭代才能生成有效的字符串（您生成的任何 5 个字符的字符串有 41.5% 的可能性不会包含digit），一种更有效的方法是在生成字符串时进行跟踪。

如果要生成 5 个字符的字符串，首先生成 4 个字符。如果其中至少一个是数字，则可以正常生成第五个字符。如果不是，请仅从第五个字符的数字集中选择。如果您想避免数字位置出现偏差，您可以在随机位置插入第五个字符，而不是在末尾添加。

# c++ - Mongoose C++ Http 服务器仅获取 MG_OPEN_FILE 事件

> ID：14368188
> 
> 赞同：0
> 
> 时间：2013-01-16T21:29:40.780
> 
> 标签：c++, mongoose-web-server

我有这个使用猫鼬的服务器，它接受一些请求，解析信息，执行操作并返回结果。

例如，我可以这样查询它 server:port/action?arg1=test&arg2=...

我的问题是，每当我查询服务器时，我只会得到“MG_OPEN_FILE”事件。对于每个请求，我都会得到 3 个。

我读到在 http 查询中有一些可能是正常的，但这里的问题是我没有任何“MG_NEW_REQUEST”事件。

基本上，每当我启动服务器时，第一个连接（以及之后的所有连接）总是返回以下事件：MG_OPEN_FILE

MG_OPEN_FILE

MG_OPEN_FILE

MG_REQUEST_COMPLETE

我这样称呼我的服务器：

```
int main(int argc, char* argv[]) {
  struct mg_context *ctx;
  const char *options[] = {"listening_ports", "8080", "num_threads","10",  NULL};
  ctx = mg_start(&callback, NULL, options);
  while(1){  
      getchar(); // Wait until user hits "enter"
  }
  mg_stop(ctx);
  return 0;
} 
```

回调函数以：

```
static void *callback(enum mg_event event, struct mg_connection *conn)
{

const struct mg_request_info *request_info = mg_get_request_info(conn);
if (event == MG_NEW_REQUEST)
{ 
```

但这始终是“MG_OPEN_FILE”事件，我不知道原因:(因此，如果有人对此原因有任何想法，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:44:48.493

当你得到`MG_OPEN_FILE`时，检查`(char *) mg_get_request_info(conn)->ev_data` 它包含猫鼬想要打开的文件名。如果您在内存中有该文件，请返回它的数据和大小。如果没有，请返回`NULL`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:51:36.010

您的回调是否返回您处理了该事件？如果我处理事件，我只会返回“是”。

# html - 如何停止输入类型文本执行 html 代码

> ID：14368190
> 
> 赞同：0
> 
> 时间：2013-01-16T21:29:52.323
> 
> 标签：html, database, alignment

我使用一个系统来创建然后将数据库中的数据查询到表中。问题是，如果我编写例如`<h1>test</h1>`，表将其作为 html 代码执行。

我怎样才能阻止它执行代码，只是作为简单的文本查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:33:02.127

您需要在使用前清理服务器上的输入。这对于防止 SQL 注入攻击也很重要。

您如何执行此操作取决于您使用的服务器端语言。

对于 PHP，

见： http: [//php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

请参阅： http: [//www.bitrepository.com/sanitize-data-to-prevent-sql-injection-attacks.html](http://www.bitrepository.com/sanitize-data-to-prevent-sql-injection-attacks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:42:54.803

您应该更改 html 中的一些字符，以免浏览器将其识别为 html。对于 php`htmlspecialchars()`将适合您的目的（[http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)）。PS希望您在将输入插入数据库之前对其进行验证。

# intellij-idea - Intellij 12 代码完成快捷方式

> ID：14368191
> 
> 赞同：0
> 
> 时间：2013-01-16T21:29:53.943
> 
> 标签：intellij-idea

我刚开始使用 Intellij 12，我无法让代码完成工作。根据手册，我应该可以按 Enter 或 Tab 键来选择建议。例如，如果编写下面的代码，则会出现一个建议框，其中显示几个建议（put、putAll）。我如何实际选择其中之一？非常沮丧。谢谢。

```
map.put 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:32:38.797

尝试上下光标选择一个，然后按 Enter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:20:46.987

除了提供的答案@user1888440 之外，您可能还想查看*File > Settings > [IDE Settings] > Editor > Code Completion*中的“预选第一个建议”选项。在该设置页面上，单击“帮助”按钮以查看“预选第一个建议”选项的不同选项的说明。

# r - 在 R 中使用 tapply() 对类别进行回归模型

> ID：14368196
> 
> 赞同：0
> 
> 时间：2013-01-16T18:58:11.307
> 
> 标签：r, regression

我正在尝试使用`tapply()`函数按几个类别运行模型，但没有太多成功。我的数据有 20 个诊所，我想按每个诊所运行模型。

这是我的模型：

```
attach(qregdata)
rq(logA~ dose+ chtcm + cage +raceth + sex,tau=.9) 
```

我作为可变诊所的数据（值为 1-20）。有人知道如何像在其他统计软件包中一样在 R 中通过诊所运行这个模型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:55:57.483

完成此操作的一种非常通用的方法如下所示。该`ddply`函数为每个 运行提供的函数（在本例中`lm`）`clinic`。您还可以在更复杂的数据横截面上运行它。例如`.(clinic,level)`，将对`clinic`和的每个组合运行一个单独的模型`level`。该术语`lm(y~x)$coef[1]`得到线性模型的截距。我认为没有简单的方法可以一次保存每个模型拟合的所有输出。

```
n <- 10
clinic <- factor(rep(1:3,each=n))
x <- rep(0:(n-1),3)
y <- rnorm(3*n)*x
d <- data.frame(clinic,x,y)

# plot data and linear fits
library(ggplot2)
ggplot(d,aes(x,y)) + geom_point() + facet_wrap(~clinic) + stat_smooth(method='lm')

# run a separate model for each clinic
library(plyr)
ddply(d,.(clinic),summarize,intercept=lm(y~x)$coef[1],slope=lm(y~x)$coef[2]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:01:13.883

您可以在诊所的唯一值中使用“lappy”，并使用子集来提取该诊所的数据集部分。然后将模型拟合到子集。

这将返回一个模型列表，然后您可以对其进行进一步处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-18T20:26:40.933

我最近遇到了类似的问题，想分享一下，以防有人仍然对这个话题感兴趣；抱歉挖了一个旧帖子。

`tapply`当输入对象（被“拆分”的对象）是向量时，使用起来非常方便。如果要拆分的输入对象是一个矩形数据集，则使用（在这种情况下恰当地命名）函数会简单得多，它是用于对象`by`的方便包装器。函数的返回对象属于可以使用参数简化为 a或 a的类。`tapply``data.frame``by``by``array``list``simplify = TRUE`

当然有更有效的方法来执行此操作，但如果您正在寻找类似`tapply`的解决方案 -`by`就是这样。

这是一个示例，用于在数据集中的萼片宽度“ ”物种`lm`上回归花瓣宽度：`by``iris`

```
## Load iris data 
data(iris)

## Fit a model to each species-specific subset of the data 
fitBySpecies <- by(
    data    = iris,
    INDICES = iris$Species,
    FUN     = function(speciesSubset)
        lm(Petal.Width ~ Sepal.Width, data = speciesSubset)
) 
```

# google-bigquery - 在 BigQuery 中使用 url 编码的值

> ID：14368199
> 
> 赞同：3
> 
> 时间：2013-01-16T21:30:09.847
> 
> 标签：google-bigquery

我使用包含 url 编码列的压缩日志文件。（空格字符编码为“%20”等）。

我的计划是将这些文件直接从 Google Cloud Storage 导入 BigQuery。

我没有在[加载配置](https://developers.google.com/bigquery/docs/reference/v2/jobs?hl=fr#importing)中找到任何选项来在导入期间自动解码值。

我想您不会建议在我的所有查询中使用一系列[REGEXP_REPLACE](https://developers.google.com/bigquery/docs/query-reference?hl=fr#regularexpressionfunctions)。

有什么想法可以避免解析所有日志并在将所有这些字符导入 BigQuery 之前对其进行转义（如果其中一个是分隔符，这将是危险的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-03T12:15:03.453

如果是旧版 SQL，则接受的答案。

对于标准 SQL：

```
#standardSQL

CREATE TEMPORARY FUNCTION DECODE_URI_COMPONENT(path STRING)
RETURNS STRING
LANGUAGE js AS """
if (path == null) return null;
try {
  return decodeURIComponent(path);
} catch (e) {
  return path;
}
""";

WITH source AS (SELECT "/work.json?myfield=R%C3%A9gions%2CSport" AS path)
SELECT DECODE_URI_COMPONENT(REGEXP_EXTRACT(path, r"[?&]myfield=([^&]+)")) AS myfield FROM source 
```

这将返回：

```
 myfield
---------------
 Régions,Sport 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-18T21:09:42.140

很可能你已经得到了类似下面的东西:o)

```
SELECT url FROM
js(
  (SELECT url FROM 
    (SELECT 'http://example.com/query?q=my%20query%20string' AS url), 
    (SELECT 'http://example.com/query?q=your%20query%20string' AS url), 
    (SELECT 'http://example.com/query?q=his%20query%20string' AS url)
  ),
  // Input columns.
  url,
  // Output schema.
  "[
  {name: 'url', type:'string'}]",
  // The function.
  "function(r, emit) { 
    var url  = decodeURI(r.url);
    emit({
      url: url
    });
  }"
) 
```

[https://cloud.google.com/bigquery/user-defined-functions](https://cloud.google.com/bigquery/user-defined-functions)

# dynamic - 在 ios 6 中向第二个动态单元格添加单独的标识符？

> ID：14368202
> 
> 赞同：0
> 
> 时间：2013-01-16T21:30:15.570
> 
> 标签：dynamic, uitableview, ios6, segue, identifier

项目的第一个场景是动态单元格视图，如下图。我已经给了它一个标识符，所以我可以在代码中引用它。

![动态细胞](../Images/258eca56b06a3ee05b0d78f7864cf7f9.png)

我从按预期显示的代码中创建了第二个分组部分。当用户点击第一个单元格时，它会移动到一个特定的场景，但是第二个单元格也会进入相同的场景。

如何给第二个单元格一个单独的标识符，然后我可以创建一个到不同场景的 segue？第二个单元格没有出现在情节提要中，所以我不能那样给它一个。

我目前对这个场景的代码如下：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize testLocation;

- (void)viewDidLoad
{

    testLocation = @"Washington, Dulles";
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

#pragma mark - Table View Methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;              // Default is 1 if not implemented
{
    return 2;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section;    // fixed font style. use custom view (UILabel) if you want something different

{
    if (section == 0) {
        return @"Choose Test Location:";
    }
    else {
        return @"Choose Test Type:";
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;

{
    if (section == 0) {
        return 1;
    }
    else {
        return 1;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;

{

    UITableViewCell *serverLocCell = [tableView dequeueReusableCellWithIdentifier:@"serverLocation"];

    switch (indexPath.section) {
        case 0:
            serverLocCell.textLabel.text = testLocation;
            serverLocCell.detailTextLabel.text = @"Change";
            break;
        case 1:
            serverLocCell.textLabel.text = @"Speed Test";
            serverLocCell.detailTextLabel.text = @"Change";
            break;
        default:
            break;
    }

    return serverLocCell;

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:36:09.827

在情节提要编辑器中，创建您要使用的两个转场——但让它们从一个控制器转场到下一个，而不是从表格视图转场。在控制器级别执行此操作。为每个 segue 指定一个特定且不同的名称。

实施`didSelectRowAtIndexPath`以便您知道用户何时选择表格中的单元格。根据索引路径中的部分（或行），以编程方式触发 segue。

# javascript - 无法将值传递给函数参数 javascript

> ID：14368204
> 
> 赞同：0
> 
> 时间：2013-01-16T21:30:28.770
> 
> 标签：javascript, object, parameters

这是我的代码：

构造函数：

```
 function Box (//parameters) {  
  // code for constructor function  
  } 
```

这是我获取创建新对象的值的地方：

```
 function getBoxValues() {
   //code to get values

if (name == null || name == "") {                    
     alert("Please enter a name for your box");
     return;
   }
   else {
    var newbox = new Box("id", name, color, number, "coordinates");  //creates "newbox"
    boxes.push(newbox);                                       
    addBox(newbox); 
    counter++;                                          
   } 
```

这是我将框添加到页面的位置：

```
function addBox(newbox) {  
   for (var i = 0; i < newbox.number; i++) {                                 
   var scene = document.getElementById("scene");              
   var div = document.createElement("div"); 
   div.className += " " + "box"; 
   div.innerHTML += newbox.name; 
   div.style.backgroundColor = newbox.color; 
   var x = Math.floor(Math.random() * (scene.offsetWidth-101));
   var y = Math.floor(Math.random() * (scene.offsetHeight-101));
   div.style.left = x + "px";
   div.style.top = y + "px";                     
   scene.appendChild(div);                           
    } 
   return div;                        
  }

  display();

  function display(div) {
  div.innerHTML += "alert";
  console.log("alert");
  } 
```

我的问题是我试图将 div 的值传递给显示函数，以便我可以写入对象的 innerHTML。我在控制台中不断收到一条消息，说 div 未定义。我认为这可能是范围的问题，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:32:26.363

你打电话`display()`时没有参数，当然它是未定义的；）

将适当的参数传递给函数调用，一切都会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:32:34.333

你的问题在这里：

```
display(); // <-- you call it with no argument

function display(div) {  // <-- there is 'div'
div.innerHTML += "alert"; // <-- undefined error
console.log("alert");
} 
```

# python - Django：`QuerySet.__nonzero__` 和 `QuerySet.exists` 之间有什么区别吗？

> ID：14368205
> 
> 赞同：7
> 
> 时间：2013-01-16T21:30:29.873
> 
> 标签：python, django

我看到`QuerySet`该类有 2 种不同的方法，它们似乎具有相同的目的（除非我弄错了）：`.__nonzero__`和`.exists`. （是的，我知道这`.__nonzero__`是`bool`.）

我的问题：如果这两种方法都只是检查查询集中是否有任何对象，为什么它们有不同的实现？

Django 文档说`QuerySet.__nonzero__`：

> 注意：如果您只想确定是否存在至少一个结果，并且不需要实际对象，请不要使用此选项。使用 exists() 更有效（见下文）。

（我没有在“下面”找到任何有见地的东西。）

为什么执行`QuerySet.__nonzero__`效率不高？它是否试图实现与 不同的东西`.exists`？Django 开发人员不这样做的原因是什么`__nonzero__ = exists`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:25:18.180

> Why does QuerySet.**nonzero** have a non-efficient implementation? Is it trying to achieve something different than .exists? What is the reason that the Django developers don't do **nonzero** = exists?

I think it's because `exists` is only efficient under certain circumstances.

Imagine this common scenario if `__nonzero__` had the "efficient" implementation.

```
foos = Foo.objects.filter(bar='baz')

if foos:   # nonzero() calls exists() which causes extra query
           # even though the QS is already going to be evaluated
           # which in my projects is a common pattern. 
   print "Yay for foos!"
   for foo in foos:
       print foo 
```

`__nonzero__` also evaluates the query and stores results in cache. That means all results are stored in memory.

`exists` only cares about 1 row, and doesn't even instantiate a django object or even store its result in cache.

It seems useful if you are *only* checking if something exists, and don't need the data in any way.

> Why don't the devs make `__nonzero__` == `exists`?

Because `exists` assumes you don't care about the results. If `__nonzero__` called `exists`, we'd have no results. If `exists` called `__nonzero__`, we'd collect results (potentially a lot) just to check if a row exists or not.

Examples:

```
bool( Foo.objects.filter(user=user) )  
# calls __nonzero__, evaluates, converts all fields to python objects 
# and stores in queryset._result_cache

Foo.objects.filter(user=user).exists()
# stores nothing, and query only returns one row.
# less data from DB and less python overhead generating django model instances. 
```

# r - 用 ggplot2 绘制箱线图

> ID：14368207
> 
> 赞同：-1
> 
> 时间：2013-01-16T19:20:42.417
> 
> 标签：r, ggplot2, boxplot

我正在使用 Rattle 附带的 weather.csv 数据集（注意：我没有为此使用 Rattle）并尝试构建一个与风向和风速相关的箱线图。我正在执行以下操作，但没有显示任何情节，也没有错误或警告：

```
weatherPlot <- ggplot(weather, aes(factor(WindGustDir), WindGustSpeed)) 
weatherPlot + geom_boxplot() 
```

任何想法为什么我的情节会是空白的？

PS WindGustDir 数据是分类值，如 N、E、W、S、NW、SE 等，WindGustSpeed 是数值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:51:58.327

您的代码适用于我的安装（R 2.15.2，64 位）。所以这可能不是编码问题。你能检查一下这个段周围没有任何其他导致问题的代码吗（例如，试试下面的极简代码。）

```
library(rattle)
library(ggplot2)

weatherPlot <- ggplot(weather, aes(factor(WindGustDir), WindGustSpeed)) 
weatherPlot + geom_boxplot() 
```

![在此处输入图像描述](../Images/de84d714454aacf53c4dec78b5a3ef83.png)

# mysql - MYSQL，排序很慢

> ID：14368211
> 
> 赞同：18
> 
> 时间：2013-01-16T21:30:43.297
> 
> 标签：mysql

我有两张桌子。一个是用户表，其主键是用户 ID，另一个表是使用外键引用用户表。

User 表只有一个条目（目前），而另一个表有 100 万个条目。

以下加入让我发疯：

```
 SELECT p0_.*, p1_.*
 FROM photo p0_, User p1_
 WHERE p0_.user_id = p1_.user_id
 ORDER BY p0_.uploaddate DESC Limit 10 OFFSET 100000 
```

该查询在具有 order by 的非常快的机器上需要 12 秒，而没有 order by 则需要 0.0005 秒。

我在 user_id (IDX_14B78418A76ED395) 上有一个索引，在 user_id 和 uploaddate 上有一个复合索引 ("search2")。

EXPLAIN 显示以下内容：

```
+----+-------------+-------+------+------------------------------+----------------------+---------+---------------------+-------+---------------------------------+
| id | select_type | table | type | possible_keys                | key                  | key_len | ref                 | rows  | Extra                           |
+----+-------------+-------+------+------------------------------+----------------------+---------+---------------------+-------+---------------------------------+
|  1 | SIMPLE      | p1_   | ALL  | PRIMARY                      | NULL                 | NULL    | NULL                |     1 | Using temporary; Using filesort |
|  1 | SIMPLE      | p0_   | ref  | IDX_14B78418A76ED395,search2 | IDX_14B78418A76ED395 | 4       | odsfoto.p1_.user_id | 58520 |                                 |
+----+-------------+-------+------+------------------------------+----------------------+---------+---------------------+-------+---------------------------------+ 
```

表定义：

```
CREATE TABLE `photo` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`user_id` int(11) NOT NULL,
`album_id` int(11) DEFAULT NULL,
`exif_id` int(11) DEFAULT NULL,
`title` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
`width` int(11) NOT NULL,
`height` int(11) NOT NULL,
`uploaddate` datetime NOT NULL,
`filesize` int(11) DEFAULT NULL,
`path` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
`originalFilename` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
`mimeType` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
`description` longtext COLLATE utf8_unicode_ci,
`gpsData_id` int(11) DEFAULT NULL,
`views` int(11) DEFAULT NULL,
`likes` int(11) DEFAULT NULL,
PRIMARY KEY (`id`),
UNIQUE KEY `UNIQ_14B78418B0FC9251` (`exif_id`),
UNIQUE KEY `UNIQ_14B7841867E96507` (`gpsData_id`),
KEY `IDX_14B78418A76ED395` (`user_id`),
KEY `IDX_14B784181137ABCF` (`album_id`),
KEY `search_idx` (`uploaddate`),
KEY `search2` (`user_id`,`uploaddate`),
KEY `search3` (`uploaddate`,`user_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `user` (
`user_id` int(11) NOT NULL,
`photoCount` int(11) NOT NULL,
`photoViews` int(11) NOT NULL,
`photoComments` int(11) NOT NULL,
`photoLikes` int(11) NOT NULL,
`username` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
PRIMARY KEY (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

我能做些什么来加快这个查询？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-16T21:58:56.110

似乎您正在遭受 MySQL 无法进行后期行查找的困扰：

*   [**MySQL ORDER BY / LIMIT 性能：延迟行查找**](http://explainextended.com/2009/10/23/mysql-order-by-limit-performance-late-row-lookups/)
*   [**后期行查找：InnoDB**](http://explainextended.com/2011/02/11/late-row-lookups-innodb/)

尝试这个：

```
SELECT  p.*, u.*
FROM    (
        SELECT  id
        FROM    photo
        ORDER BY
                uploaddate DESC, id DESC
        LIMIT   10
        OFFSET  100000
        ) pi
JOIN    photo p
ON      p.id = pi.id
JOIN    user u
ON      u.user_id = p.user_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:45:51.033

你有两个问题：

1.  你需要创建一个`INDEX(user_id, uploaddate)`这将大大提高查询的效率。

2.  您需要找到一种解决方法来使用`LIMIT 10 OFFSET 100000`. MySQL 正在创建一个包含 100,000 条记录的记录集，然后将最后 10 条记录拉到最后……这是非常低效的。

[https://www.percona.com/blog/2006/09/01/mysql-order-by-limit-performance-optimization/](https://www.percona.com/blog/2006/09/01/mysql-order-by-limit-performance-optimization/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:34:20.113

你需要一个单独的索引`uploaddate`。`uploaddate`只有当它是第一列时，这种排序才会利用复合索引。您也可以尝试将 user_id 添加到 ORDER BY：

```
 ....      
    ORDER BY p0_.user_id, p0_.uploaddate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-27T18:21:14.533

首先尝试在没有连接的情况下根据主键获取结果，并使用结果再次查询结果。
例如：

$userIds=mysql::select("select user_id from photo ORDER BY p0_.uploaddate DESC Limit 10 OFFSET 100000");

$photoData=mysql::select("SELECT p0_. *, p1_.* FROM photo p0_, User p1_ WHERE p0_.user_id = p1_.user_id and p0_.user_id in ($userIds->user_id) order by p0_.uploaddate");

在这里，我们将语句分为两部分：
1.我们可以根据主键轻松排序和获取，并且没有连接。
2.根据id和order by获取查询结果只在有限的列上，我们可以在更短的时间内检索数据

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-07-26T08:50:35.830

[使用Quassnoi](https://stackoverflow.com/users/55159/quassnoi)答案从 30 秒到 0.015 秒/0.000 秒！这就是我所说的MySql专业知识！我从我的个人项目中删除了一个 Join（不加入自身）

```
Select ser.id_table, ser.id_rec, ser.relevance, cnt, title, description, sell_url, medium_thumb,  
        unique_id_supplier, keywords width, height, media_type 
from (    
        Select ser.id_rec, ser.id_table, ser.relevance, ser.cnt 
        from searchEngineResults ser     
        where thisSearch = 16287     
    order by  ser.relevance desc, cnt desc, id_rec 
    ) ser 
join photo_resell sou on sou.id = ser.id_rec 
#join searchEngineResults ser on ser.id_rec = tmp.id_rec 
limit 0, 9 
```

# ios - iOS viewController 和 detailViewController 流程 /设计

> ID：14368213
> 
> 赞同：0
> 
> 时间：2013-01-16T21:30:57.240
> 
> 标签：ios, parsing, uiviewcontroller, viewcontroller

1.  我应该在哪里/如何/何时初始化我的第二个解析器？

2.  我所描述的视图/视图控制器的最佳配置是什么？

这是交易：

我有一个 tableViewController。我让它填充了来自在 appDelegate 方法中启动的解析类的数据，applicationDidFinishLaunching... 这个类通过我创建的 XML 文件运行。

填充 tableViewController 的每个项目都与一个 URL 相关联，该 URL 将被解析为在 tableViewController 的 didSelectRowAtIndexPath 方法中选择了一行（这是正确的做法吗？）。

第二次解析的结果是用第二次解析的选定 url 中的项目的标题填充详细信息视图。如果这么简单，我就不会写这个问题了。我需要能够选择填充详细视图的项目并钻取到另一个显示该项目详细信息的详细视图。

我用笔尖

这不是一个讨论问题：

1.  我应该在哪里/如何/何时初始化我的第二个解析器？

2.  我所描述的视图/视图控制器的最佳配置是什么？

3.  有什么明显的我必须知道的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:38:02.537

有两种选择

1.) 选择 tableviewcell 后立即解析数据，然后一旦完成加载带有结果的详细视图。（con 可以减慢界面速度）

2.）加载详细信息视图，然后解析数据并在数据可用时填充详细信息（con加载没有数据的详细信息视图并让用户等待）

所以这两个选项都让用户等待，但只有一个会减慢界面速度......

我认为选项 2 是每个人都会推荐的选择。

# c++ - 不同结构初始化方法的区别

> ID：14368214
> 
> 赞同：4
> 
> 时间：2013-01-16T21:31:12.650
> 
> 标签：c++

我知道在 C++ 中有许多不同的方法可以完成同样的事情。但是，我想知道这些初始化结构的方法之间的区别。我也想知道 C++ 做事的方式是什么，因为我知道其中一些方法来自 C。

```
struct MyStruct
{
    int x, y, z;
};

MyStruct s1 = { 0 };  //I think this is from C but not really sure.
MyStruct s2 = { }; //I think this might be from C++
MyStruct s3 = { sizeof(MyStruct) } ; //Not sure where this comes from but I like it 
```

使用 C++ 编程时，我应该使用哪个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:36:23.153

`MyStruct s3 = { sizeof(MyStruct) } ;`不太可能做你认为的事情：

```
struct MyStruct
{
    int a;
    int b;
}; 
```

在本例中，`MyStruct s3 = { sizeof(MyStruct) } ;`将初始化`x3.a`为 8 和`x3.b`0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T21:39:16.717

（假设 POD 类型，而不是新的*统一初始化*语法）

这三个是 C++ 中的有效初始化，假设结构具有可以从整数初始化的第一个元素。第三个选项将结构的第一个成员设置为结构的大小，其余字段保持零初始化。

前两个在 C++ 中是等价的，尽管第二个不是有效的 C，因为在 C 中，您必须在大括号内传递至少一个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:39:49.420

[假设 C++] 对于 s1 ，您将 MyStruct 中的第一个变量初始化为零。对于 s3，您将其初始化为结构的大小。在这两种情况下，编译器都会将您提供的值转换为适合 MyStruct 中第一个列出的变量的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T22:04:36.503

第一个将结构元素初始化为零，并将其指针在 C 中指向 null。 [http://www.ex-parrot.com/~chris/random/initialise.html](http://www.ex-parrot.com/~chris/random/initialise.html)并将[结构初始化/重置为零/null](https://stackoverflow.com/questions/6891720/initialize-reset-struct-to-zero-null)

但在 C++ 中没有。在 C++ 中，第一个元素被初始化。

```
MyStruct s1 = { 0 };  //I think this is from C but not really sure. 
```

第二个在 C++ 中初始化为零，就像 1) 对 C 所做的那样

```
MyStruct s2 = { }; 
```

第三个将第一个元素的值设置为 C 和 C++ 中 MyStruct 的 sizeof

```
MyStruct s3 = { sizeof(MyStruct) } ; //Not sure where this comes from but I like it 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T21:49:00.900

```
MyStruct s1 = { 0 }; 
```

使用这个初始化之王，您将初始化结构的第一个元素。如果值与元素类型不对应，编译器（例如 gcc 或 g++）将尝试进行一些隐式转换。所有其他元素将设置为默认值。

```
MyStruct s3 = { sizeof(MyStruct) }; 
```

完全一样，第一个元素值将是结构的大小（以字节为单位）。

```
MyStruct s2 = { }; 
```

最后，这个初始化只在 C++ 中有效，C 中的等价物是`MyStruct s2;`. 它将所有值初始化为默认值。

# python - 一段时间后无法持续保存和更新 .CSV 文件

> ID：14368217
> 
> 赞同：4
> 
> 时间：2013-01-16T21:31:20.300
> 
> 标签：python, csv, collections, export-to-csv

我编写了一个小程序，每个小步舞曲从两件设备中读取值，然后将其保存到 .csv 文件中。我希望在每次收集每个点后更新和保存文件，这样如果电脑崩溃或发生其他问题，就不会发生数据丢失。为此，我打开文件（ab 模式），使用写入行并循环关闭文件。集合之间的时间约为 1 分钟。这工作得很好，但问题是在数据收集 5-6 小时后，它停止保存到 .csv 文件，并且没有出现任何错误，代码继续运行，图形正在更新，就像什么都没发生一样，但打开.csv 文件显示数据丢失。我想知道我使用的代码是否有问题。我也不应该从中运行一个进行实时绘图的子进程，

```
##Initial file declaration and header
with open(filename,'wb') as wdata:
     savefile=csv.writer(wdata,dialect='excel')
     savefile.writerow(['System time','Time from Start(s)','Weight(g)','uS/cm','uS','Measured degC','%/C','Ideal degC','/cm'])

##Open Plotting Subprocess
 draw=subprocess.Popen('TriPlot.py',shell=True,stdin=subprocess.PIPE,stdout=subprocess.PIPE)
##data collection loop
while True:
   Collect Data x and y
   Waits for data about 60 seconds, no sleep or pause commoand used, pyserial inteface is used.
   ## Send Data to subprocess 
   draw.stdin.write('%d\n' % tnow)
   draw.stdin.write('%d\n' % s_w)
   draw.stdin.write('%d\n' % tnow)
   draw.stdin.write('%d\n' % float(s_c[5]))

   ##Saving data Section 
   wdata=open(filename,'ab')
   savefile=csv.writer(wdata,dialect='excel')
   savefile.writerow([tcurrent,tnow,s_w,s_c[5],s_c[7],s_c[9],s_c[11],s_c[13],s_c[15]])
   wdata.close() 
```

PS 此代码使用以下包用于未显示的代码。pyserial、csv、os、subprocess、Tkinter、string、numpy、time 和 wx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:01:11.547

如果`draw.stdin.write()`阻塞，则可能意味着您没有`draw.stdout`及时消费。由于完整的操作系统管道缓冲区，文档警告死锁。

如果您不需要输出，您可以设置`stdout=devnull`在哪里，`devnull = open(os.devnull, 'wb')`否则有几种方法可以在不阻塞代码的情况下读取输出：线程、选择、`tempfile.TemoraryFile`.

# ruby-on-rails - 使 rails 控制台输出更漂亮一点

> ID：14368218
> 
> 赞同：42
> 
> 时间：2013-01-16T21:31:21.283
> 
> 标签：ruby-on-rails, rails-activerecord

rails 控制台输出如下所示：

```
User.all
=> [#<User id: 1, name: "Michael Hartl", email: "mhartl@example.com",
created_at: "2011-12-05 00:57:46", updated_at: "2011-12-05 00:57:46">,
#<User id: 2, name: "A Nother", email: "another@example.org", created_at:
"2011-12-05 01:05:24", updated_at: "2011-12-05 01:05:24">] 
```

我想知道是否有命令可以使它更容易阅读？例如，在 MongoDB 控制台中有一个*.pretty*命令，它对输出进行格式化，对眼睛更友好一些。但不确定 Rails 中是否有类似的东西。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2014-03-19T08:48:16.047

A bit more elegant shorthand:

```
y User.all 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2017-09-19T18:32:24.013

我一直在使用`pp`。pp 代表“漂亮的印刷品”。不需要宝石。

在 Rails 控制台上尝试这样做：

```
pp User.all 
```

如果您简单地执行 User.all，您将在记录中连续显示每个属性及其值，而不是它们的捆绑。

这是文档：

[https://ruby-doc.org/stdlib-2.1.0/libdoc/pp/rdoc/PP.html](https://ruby-doc.org/stdlib-2.1.0/libdoc/pp/rdoc/PP.html)

我正在使用 Rails 5.1.3 和 ruby​​ 2.4.1p111，它已经安装在我的项目中。如果这不起作用，我想你必须这样做`require 'pp'`。我希望这有帮助。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-01-16T22:32:44.947

如果您不想使用 gem，这里是低价版本：

```
 puts User.all.to_yaml 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-01-16T21:55:34.763

你也可以使用这个令人难以置信的宝石：

[很棒的印刷品](https://github.com/awesome-print/awesome_print)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-16T21:34:05.860

你可以试试 awesome_print gem： [https ://github.com/michaeldv/awesome_print](https://github.com/michaeldv/awesome_print)

安装后，您可以使用以下命令打印任何对象：

```
ap User.all 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-02-18T17:35:01.803

这里有几个选项

### yaml 格式

```
y your_code 
```

### 真棒打印

```
gem install awesome_print 
```

然后在 irb 或 pry

```
require 'awesome_print'
ap your_code 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-05-18T02:52:40.713

利用`pry`

**不撬：**

```
2.3.1 :001 > SupplierTerm.first
  SupplierTerm Load (39.4ms)  SELECT  "supplier_terms".* FROM "supplier_terms" ORDER BY "supplier_terms"."id" ASC LIMIT $1  [["LIMIT", 1]]
 => #<SupplierTerm id: "1bc48081-402a-41d9-b6af-d783c28bb363", 
entity_id: "927b398f-2bbd-40cb-b668-eb284e26688d", uses_custom_terms: 
false, requires_credit_check: false, requires_identity_check: false, 
requires_guarantees: true, requires_trade_reference_check: true, 
minimum_guarantees: 1, minimum_trade_references: 1, trade_account_limit: 
20000, created_at: "2017-02-01 22:11:49", updated_at: "2017-02-01 
22:11:49", created_by_id: "2c314f8a-6d84-48c8-a963-75130e97f1a6", 
updated_by_id: "2c314f8a-6d84-48c8-a963-75130e97f1a6", questions: [], 
minimum_approvers: 1, excluded_sources: nil> 
```

**用撬：**

```
2.3.1 :002 > pry
[1] pry(main)> SupplierTerm.first
  SupplierTerm Load (0.4ms)  SELECT  "supplier_terms".* FROM "supplier_terms" ORDER BY "supplier_terms"."id" ASC LIMIT $1  [["LIMIT", 1]]
=> #<SupplierTerm:0x007fb4e1feff40
 id: "1bc48081-402a-41d9-b6af-d783c28bb363",
 entity_id: "927b398f-2bbd-40cb-b668-eb284e26688d",
 uses_custom_terms: false,
 requires_credit_check: false,
 requires_identity_check: false,
 requires_guarantees: true,
 requires_trade_reference_check: true,
 minimum_guarantees: 1,
 minimum_trade_references: 1,
 trade_account_limit: 20000,
 created_at: Wed, 01 Feb 2017 22:11:49 UTC +00:00,
 updated_at: Wed, 01 Feb 2017 22:11:49 UTC +00:00,
 created_by_id: "2c314f8a-6d84-48c8-a963-75130e97f1a6",
 updated_by_id: "2c314f8a-6d84-48c8-a963-75130e97f1a6",
 questions: [],
 minimum_approvers: 1,
 excluded_sources: nil> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-04-19T18:02:59.037

有一种很棒的宝石叫做[Jazz Hands](https://github.com/nixme/jazz_hands)。在 rails 控制台中包括基于 pry 的增强功能、hirb 和 awesome_print。

PS 你可能想使用 fork [Jazz Fingers](https://github.com/plribeiro3000/jazz_fingers)使其与 Ruby 2.1.2 兼容

# java - 防止某些代码在程序流程中执行

> ID：14368220
> 
> 赞同：1
> 
> 时间：2013-01-16T21:31:24.090
> 
> 标签：java, android

在主要活动的 onCreate 方法中，我有一些代码正在检查是否启用了 wifi 连接。如果不是，我正在尝试自动启用它（现在非常重要）**，然后**我想做其他东西（启动服务..和其他东西）。在继续执行**之前**必须启用它非常重要！

我已经尝试过 AsyncTask ，但没有运气。（代码仍在下面执行，在 AsyncTask 中的任务完成之前）。

如何在某些任务完成**后**执行某些代码？

编辑：

我在主要活动中的 onCreate

```
wifiManager = (WifiManager) getSystemService(WIFI_SERVICE); 

    if(!wifiManager.isWifiEnabled()) {

        new Asyn(this, progress, wifiManager);

        } 

    startService(new Intent(intentt)); 
```

异步类

```
public class Asyn extends AsyncTask<Context, Integer, Long> {

private Context context;
private ProgressDialog pd;
private WifiManager wm;

   public Asyn(Context context, ProgressDialog pd, WifiManager wm) {
     this.context = context;
     this.pd = pd;
     this.wm = wm;
    }

@Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
    pd = ProgressDialog.show(context, "", "Enabling wifi");

}

@Override
protected Long doInBackground(Context... params) {

    wm.setWifiEnabled(true);

    return null;
}

@Override
protected void onPostExecute(Long result) {
    // TODO Auto-generated method stub
    super.onPostExecute(result);

    pd.dismiss();

} 
```

}

在 wifi 未完全启用之前，我不想执行“startService”！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:45:53.200

异步任务不是解决方案，因为启动 WIFI 是您不能假设在您调用后会发生的事情`wm.setWifiEnabled(true);` 您必须在 WiFi 状态下添加广播接收器。请看一下这个答案：

[监听WIFI状态](https://stackoverflow.com/questions/9434235/android-i-want-to-set-listener-to-listen-on-wireless-state-can-anyone-help-me-w)

我相信第二个答案（不是被接受的那个）是您所寻求的

# linux - 测试 NFS 性能的正确方法是什么

> ID：14368223
> 
> 赞同：12
> 
> 时间：2013-01-16T21:31:31.577
> 
> 标签：linux, performance, monitoring, nfs, system-administration

我有一个项目，其唯一目标是监控网络的 NFS 性能。我知道那里有很多开源工具，但我仍然想了解背后的基本想法，以便更好地调整这些工具。因此，网络由数百个 linux 系统和数千个带有 NFS 安装的主目录的帐户组成；脚本可以推送到每个站点，服务器也可以，如果这样有好处的话。Afaik，基本上所有脚本应该做的就是几个 dd 并观察 NFS 上的 IO 速率。
我的问题是这样做的正确方法是什么？我是否将新帐户添加到系统中只是为了运行脚本？
非常感谢一些一般性的想法:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T21:43:01.417

```
Bonnie 
```

一个经典的性能评估工具测试。主程序测试对单个文件（或一组文件，如果您希望测试超过 1G 的存储空间）的数据库类型访问，并测试小文件的创建、读取和删除，可以模拟程序的使用，例如Squid、INN 或 Maildir 格式的电子邮件。

与 NFS 的相关性:: 性能测试、工作负载

```
DBench 
```

编写 Dbench 是为了允许独立开发人员调试和测试 SAMBA。它深受原始 SAMBA 工具的启发：NetBench

作为 NetBench，它允许：

折磨文件系统 独立于磁盘 IO 改善网络负载 测量性能

但它不需要像 NetBench 那样多的硬件资源来运行。

与 NFS 的相关性::

```
IOZone 
```

性能测试套件。POSIX 和 64 位兼容。此测试是来自 LSE 主要功能的文件系统测试

POSIX 异步 I/O、Mmap() 文件 I/O、普通文件 I/O 单流测量、多流测量、分布式文件服务器测量（集群） POSIX pthreads、多进程测量 使用 fsync、O_SYNC 延迟图的可选测量

与 NFS:: 性能测试的相关性。适合在各种负载条件下锻炼给定的安装点。

完整的细节可以在这里找到。[http://wiki.linux-nfs.org/wiki/index.php/Testing_tools](http://wiki.linux-nfs.org/wiki/index.php/Testing_tools)

# javascript - 如何通过在coldfusion代码中放置一个函数来让我的所有链接滚动到页面顶部

> ID：14368231
> 
> 赞同：0
> 
> 时间：2013-01-16T21:32:21.667
> 
> 标签：javascript

这是我目前拥有的功能。我希望我的所有链接都滚动到页面顶部，而不是一个链接。该函数将放置在冷融合代码中。

```
<script>
function ScrollClick() {
         // Scroll to top

                 document.body.scrollTop = document.documentElement.scrollTop = 0;

        // Open up a link in my iframe
 document.getElementById('MainWindow').src="DocDisplayCategory.cfm?categoryID=89"
            }
</script>   
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:06:41.053

以下是您使用 jQuery 进行操作的方法，以防您可以选择：

```
$("body").on("click", "a", function(){
  $("html, body").animate({ scrollTop: 0 }, "slow");
}); 
```

[http://jsfiddle.net/sL2vA/2/](http://jsfiddle.net/sL2vA/2/)

更新：为了帮助消除有关 ColdFusion 的困惑，您只需将其添加到模板的头部（假设 jQuery 尚不可用）：

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> 
```

并将上面的代码放在您的应用程序中适当的位置（在模板页脚中，在外部 JS 文件中，等等）。如果它在模板中，则将其包装在脚本标记中。

# c++ - C++ switch 语句，这是如何工作的

> ID：14368240
> 
> 赞同：2
> 
> 时间：2013-01-16T21:32:47.920
> 
> 标签：c++, switch-statement

```
#include <iostream>
#include <sstream>

int main(int argc, char* argv[]) {
if ( argc != 2 ) {
 std::cout << "usage: " << argv[0] << " <n> " << std::endl;
 return 0;
}
std::stringstream strm;
strm << argv[1];
int count = 0;
int number;
strm >> number;
switch ( number ) {
 case 0: ++count; 
 case 1: ++count; 
 case 2: ++count; 
 case 3: ++count; 
 case 4: ++count; 
 }

    std::cout << "count: " << count << std::endl;
    return 0;
 } 
```

我知道这是一个新手问题，但我刚开始使用 C++。我参加了一个游戏设计课程，这是教授在 SVN 上的第一个示例。当我编译后运行程序时，

./run 4 (即我给出参数 4) 我得到一个输出：count: 1

./run 3 我得到一个输出：count: 2

./run 1 计数：4

./run 0 计数：5

由于 count 被初始化为 0，为什么 ./run 1 给出 4 或 ./run 0 给出 count 5。

对于这样一个愚蠢的问题，我真的很抱歉，但我会很感激任何解释。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T21:33:55.970

使用`switch`语句，当控制传递给`case`标签时，代码将继续通过所有其他`case`标签，直到遇到`break`或`return`（或其他流控制机制）。这可以用于统一特定案例的逻辑，也可以用于更复杂的任务。参见例如：[达夫设备。](http://en.wikipedia.org/wiki/Duff%27s_device)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T21:37:18.457

switch 语句定义了在哪里输入一组代码。

```
switch ( number ) {
 case 0: ++count; //entrance point with number= 0
 case 1: ++count; //entrance point with number= 1
 case 2: ++count; //entrance point with number= 2
 case 3: ++count; //entrance point with number= 3
 case 4: ++count; //entrance point with number= 4
} 
```

除了到达开关的尽头之外，本质上没有出口。但是，可以添加一个“break;”。在 case 下的任何地方声明，以使代码提前退出 switch（或超出范围）。

此外，在 case 语句中应该使用关键字“default”，但稍微偏离主题。当数字没有定义大小写时，调用默认关键字。例如，使用上面的案例，如果有人将数字 6 发送到案例。

# android - 如何根据用户选择在 ViewPager 中设置当前页面以及如何知道哪个列表项称为活动

> ID：14368242
> 
> 赞同：5
> 
> 时间：2013-01-16T21:32:52.563
> 
> 标签：android, eclipse, android-listview, android-viewpager

我是新手`Android programming`。

我有一个项目列表，当用户单击一个项目时，它会将他们带到包含该项目详细信息的屏幕。

我希望用户能够左右滑动以查看列表中其他项目的详细信息，而不是返回列表并选择另一个项目。

我读到我需要使用`ViewPager`左右滑动的能力，所以我这样做了。
ViewPager 工作正常，但是当我单击列表中的任何项目时，我总是会到达 ViewPager 中的第一页。

我不希望这样，我想要的是，如果我单击列表中的第 4 项，它会将我带到视图寻呼机中的第 4 页，并且仍然能够左右滑动以查看其他项目的详细信息。
我知道如何设置页面，`viewpager`但`using mPager.setCurrentItem(0)`
我不知道如何根据从列表中选择的项目（即启动活动的项目）进行设置。

这是我的代码：

包含列表视图的主要活动：

```
 public class Main extends SherlockListActivity implements OnItemClickListener {

        @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);  

            ListView mylist = (ListView) findViewById(android.R.id.list);
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.simple_list_reda_1, R.id.list_content, getResources().getStringArray(R.array.items_list_array) );
            mylist.setAdapter(adapter);

            mylist.setOnItemClickListener(new OnItemClickListener() 
            {
                public void onItemClick(AdapterView<?> arg0,View arg1, int position, long arg3) 
                {
                    Intent n = null; 
                    switch (position){
                        case 0: 
                            n = new Intent(getApplicationContext(), ViewPagerClass.class);
                            break;
                        case 1: 
                            n = new Intent(getApplicationContext(), ViewPagerClass.class);
                            break;
                        case 2: 
                            n = new Intent(getApplicationContext(), ViewPagerClass.class);
                            break;
                        case 3: 
                            n = new Intent(getApplicationContext(), ViewPagerClass.class);
                            break;
                    }

                    if(null!=n)
                        startActivity(n);
                }
            });     
        }
    } 
```

查看PagerClass

```
 public class ViewPagerClass extends SherlockFragmentActivity{

        static final int NUM_ITEMS = 4;
        MyAdapter mAdapter;
        ViewPager mPager;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            super.setContentView(R.layout.viewpager_layout);

            mAdapter = new MyAdapter(getSupportFragmentManager());
            mPager = (ViewPager) findViewById(R.id.viewpager);
            mPager.setAdapter(mAdapter);
            //mPager.setCurrentItem(2);

                final ActionBar ab = getSupportActionBar();
                ab.setDisplayHomeAsUpEnabled(true);
                ab.setDisplayUseLogoEnabled(false);
                ab.setDisplayShowHomeEnabled(false);

    }

    public static class MyAdapter extends FragmentPagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return NUM_ITEMS;
        }

        @Override
        public Fragment getItem(int position) {

            switch(position){
            case 0: return FirstPageFragment.newInstance();

            case 1: return SecondPageFragment.newInstance();

            case 2: return ThirdPageFragment.newInstance();

            case 3: return FourthPageFragment.newInstance();

            }
            return null;
        }
    }

    public static class FirstPageFragment extends Fragment {

        public static FirstPageFragment newInstance() {
            FirstPageFragment f = new FirstPageFragment();
            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View V = inflater.inflate(R.layout.fragment1, container, false);
            return V;

        }
    }

    public static class SecondPageFragment extends Fragment {

        public static SecondPageFragment newInstance() {
            SecondPageFragment f = new SecondPageFragment();
            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View V = inflater.inflate(R.layout.fragment2, container, false);
            return V;

        }
    }

    public static class ThirdPageFragment extends Fragment {

        public static ThirdPageFragment newInstance() {
            ThirdPageFragment f = new ThirdPageFragment();
            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View V = inflater.inflate(R.layout.fragment3, container, false);
            return V;

        }
    }

    public static class FourthPageFragment extends Fragment {

        public static ThirdPageFragment newInstance() {
            ThirdPageFragment f = new ThirdPageFragment();
            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View V = inflater.inflate(R.layout.fragment4, container, false);
            return V;

        }
    } 
```

最后是viewpager_layout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
>

<android.support.v4.view.ViewPager
android:id="@+android:id/viewpager"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
> 
```

所以简而言之，我想要的是：如果我点击列表中的第 3 项，我会进入包含第 3 项详细信息的屏幕，如果我向右滑动，我会进入第 4 项，如果我向左滑动，我会得到到第 2 项。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T21:58:43.470

在中，`onItemClickListener()`您需要向意图添加额外的内容，以便在该活动启动时获得它。

```
n.putExtra("POSITION_KEY", position); 
```

在`ViewPagerClass` `onCreate()`使用中

```
int position = getIntent().getIntExtra("POSITION_KEY", 0);
mPager.setCurrentItem(position); 
```

那应该做你想做的事。

# mysql - 如何从 Wordpress (MySQL) 中的多个帖子中删除宽度和高度属性

> ID：14368243
> 
> 赞同：0
> 
> 时间：2013-01-16T21:32:53.297
> 
> 标签：mysql, regex, wordpress, phpmyadmin

所以我有数以千计的 Wordpress 帖子，其中包含我想要删除的宽度和高度属性。例如：

```
img class="aligncenter size-full wp-image-21011999" title="sometitle" 
alt="somealt" src="http://mysite.com/blabla/somefile.jpg" width="xxx" height="xxx" 
```

正如我提到的，我想删除`width="xxx" height="xxx"`并且我想直接从 MySQL 中删除它们，不想使用任何 PHP 函数或类似函数。

有没有可以通过 PhpMyadmin 运行的查询？

是否有任何正则表达式可以用于每个帖子不同的 xxx。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:59:50.217

您可以编写一个小的 PHP 脚本（当然在 WordPress 之外），它可以使用 Regex 轻松完成此任务。

```
<?php

$host = "hostname";
$user = "username";
$pass = "password";
$db   = "database";

mysql_connect($host, $user, $pass);
mysql_select_db($db);

$pattern = "/width|height=\"[0-9]*\"/";

$query = "SELECT ID, post_content FROM wp_posts";
while ($row = mysql_fetch_assoc($query)) {
    if (preg_match($pattern, $row['post_content']))
    {
        $row['post_content'] = preg_replace($pattern, "", $row['post_content']);
        mysql_query("UPDATE wp_posts SET post_content=" . $row['post_content'] . "WHERE ID=" . $row['ID'];
    }
}

?> 
```

无论如何我都会这样做。我假设当您说“没有 PHP 函数”时，您的意思是您希望数据库中的数据永久更新，而不是每次加载页面时都即时更新。这应该可以解决问题。编写一个原始 SQL 查询来处理这个问题可能要复杂得多。

您不需要在 WordPress 中执行此操作。您甚至可以在不同的主机上运行它，前提是该主机具有数据库访问权限。

注意：我没有测试过这些。如果您使用它，我会确保在您的数据库的一小部分上运行它，然后再将其应用到整个站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-19T22:05:25.953

我已经使用了这个脚本，它有一些错误。我已经纠正并使用了它。有用。确保表名 (wpfs_posts) 对应于您的表名和帖子。总是有备份。

```
<?php

$host = "localhost";
$user = "nameuser";
$pass = "password";
$db   = "namedb";

mysql_connect($host, $user, $pass);
mysql_select_db($db);

$pattern = "/width|height=\"[0-9]*\"/";

$query = "SELECT ID, post_content FROM wpfs_posts";
$result = mysql_query($query);
while ($row = mysql_fetch_assoc($result)) {
    if (preg_match($pattern, $row['post_content']))
    {
        $row['post_content'] = preg_replace($pattern, "", $row['post_content']);
        $row['post_content']=mysql_real_escape_string($row['post_content']);
        mysql_query("UPDATE wpfs_posts SET post_content='" . $row['post_content'] . "' WHERE ID=" . $row['ID']);
    }
}

?> 
```

# jquery - jQuery对象HTML最大？

> ID：14368244
> 
> 赞同：1
> 
> 时间：2013-01-16T21:32:53.913
> 
> 标签：jquery, ajax, google-chrome-devtools

假设我们有一个对服务器的 ajax 调用：

```
 1 var jSonCall = 
  2  $.ajax({
  3    url: 'http://some_url.com/some_endpoint'
  4  }).success(function(response) {
  5      $(response).appendTo($('.some_div'));
  6  });
  7 return jSonCall; 
```

在 chrome 中，我在链接的 jquery 文件中得到一个“Uncaught SyntaxError: Unexpected identifier”，这可能是由第 4 行引起的。

还说我在 Chrome 的网络选项卡中检查了请求的响应，发现响应是 18,000 行 html（*edit: +150,000 个字符）。参数'response'（应该是html的bookoos的jquery对象）是否有可能在某个地方截断了它，并且它只能容纳这么多的html？如果是这样，有谁知道硬限制是什么（最大字符数左右）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:39:17.217

你有一个额外的`}`

```
var jSonCall = 
  $.ajax({
     url: 'http://some_url.com/some_endpoint'
  }).success(function(response) {
      $(response).appendTo($('.some_div'));
  });
  return jSonCall; 
```

编辑：尝试：

```
var jSonCall =
    $.ajax({
        url: 'http://some_url.com/some_endpoint'
    }).success(function(response) {
        $('.some_div').html(response); //don't make jquery parse the html
    });
return jSonCall; 
```

这样您就不必担心 jQuery 首先解析响应的 html ( `$(response)`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:32:52.643

这取决于 JavaScript VM，但通常没有硬性限制，字符串的最大长度由可用的 JSVM 堆定义。

# c# - 在外部上下文中重用 NSpec 规范

> ID：14368245
> 
> 赞同：1
> 
> 时间：2013-01-16T21:32:56.567
> 
> 标签：c#, bdd, nspec

我正在研究 NSpec 框架。

这是我的例子。我为一个简单的 HttpRequester 类编写了规范：

```
using Moq;
using NSpec;

namespace FooBrowser.UnitTests.BDD
{
    class HttpRequester_specification : nspec
    {
        private HttpRequester requester;

        private string sentData;
        private int sendTimes;

        private readonly Mock<IConnection> connectionMock;
        private string resource;

        public HttpRequester_specification()
        {
            connectionMock = new Mock<IConnection>();

            connectionMock
                .Setup(x => x.Send(It.IsAny<string>()))
                .Callback<string>(data =>
                {
                    sendTimes++;
                    sentData = data;
                });
        }

        void given_opened_connection_with_no_recent_sends()
        {
            before = () =>
            {
                sendTimes = 0;
            };

            context["when HttpRequester is constructed"] = () =>
            {
                before = () => requester = new HttpRequester(connectionMock.Object);

                it["should not do any request"] = () => sendTimes.should_be(0);

                context["when performing request"] = () =>
                {
                    act = () => requester.Request(resource);

                    context["when resource is not specified"] = () =>
                    {
                        it["should do 1 request"] = () => sendTimes.should_be(1);
                        it["should send HTTP GET / HTTP/1.0"] = () => sentData.should_be("GET / HTTP/1.0");
                    };

                    context["when resource is index.html"] = () =>
                    {
                        before = () => resource = "index.html";

                        it["should do 1 request"] = () => sendTimes.should_be(1);
                        it["should send HTTP GET /index.html HTTP/1.0"] = () => sentData.should_be("GET /index.html HTTP/1.0");
                    };
                };
            };
        }
    }
} 
```

如您所见[“应该做 1 个请求”] = () => sendTimes.should_be(1); 写了两次。

我尝试将其移至外部上下文，如下所示：

```
context["when performing request"] = () =>
{
    act = () => requester.Request(resource);

    context["when resource is not specified"] = () =>
    {
        it["should send HTTP GET / HTTP/1.0"] = () => sentData.should_be("GET / HTTP/1.0");
    };

    context["when resource is index.html"] = () =>
    {
        before = () => resource = "index.html";

        it["should send HTTP GET /index.html HTTP/1.0"] = () => sentData.should_be("GET /index.html HTTP/1.0");
    };

    it["should do 1 request"] = () => sendTimes.should_be(1);
}; 
```

但这会导致它[“应该做 1 个请求”] = () => sendTimes.should_be(1); 检查一次外部上下文，而不是我想要的内部上下文。

那么，我可以以某种方式将其移至外部上下文吗？

还是更容易向 NSpec 贡献一些代码来启用这种行为？

我在这里找到了类似的问题[重用 NSpec 规范](https://stackoverflow.com/questions/10053168/reusing-nspec-specifications)，但我想保留 lambda 表达式语法（没有继承）以在 1 个地方查看所有规范。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:14:07.887

很抱歉看到这两个星期都没有得到答复，但我只是通过提取类似的方法来解决它

```
void ItShouldRequestExactly(int n)
{
    it["should do " + n + " request"] = () => sendTimes.should_be(n);
} 
```

在大多数情况下，这对我来说已经足够干燥了。但是，当您传入在规范执行时实际初始化的对象时，您会遇到一些微妙的问题，但是对于这个简单的示例，它非常适合。遗憾的是，我没有看到另一种将此类 mixin 断言注入上下文的方法。

# python - 无需安装即可使用 Pygame

> ID：14368246
> 
> 赞同：4
> 
> 时间：2013-01-16T21:32:57.993
> 
> 标签：python, module, pygame

我在大学里制作一个真正简单的 RPG 游戏，我想使用 pygame。但是，我的大学有一个组策略禁止运行任何 Windows 可执行文件，因此我无法安装 pygame。有什么方法可以通过将 pygame 放在同一个文件夹中来导入它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:43:32.863

我对外部 python 库做的一件事是下载源代码，构建它并将构建的库复制到 ${ **PROJECT_HOME** }/lib/${ **EXTERNAL_LIB_NAME** }。这样，我只需在机器上安装标准的 python 就可以运行我的 python 脚本。为了能够使用外部库，您必须将 lib 目录包含到 sys 路径中，如下所示：

```
import os
from sys import path as syspath
syspath.append(os.path.join(os.path.dirname(__file__), 'lib')) 
```

PS：由于 pygame 有 C/C++ 文件要编译，所以你必须使用 mingw 代替。请参阅此答案：[错误：无法找到 vcvarsall.bat](https://stackoverflow.com/questions/2817869/error-unable-to-find-vcvarsall-bat)

**编辑**：如果您想知道如何从源代码构建 pygame，您需要运行`setup.py build`. 这会将 python 库构建到包目录的“build”文件夹中，在那里你会看到它应该如何放置在 Python 的目录中。正如我之前提到的，您将面临 Windows 中的编译问题，但您可以轻松解决该问题。

**编辑 2**：下载 PyGame 的“lib”内容的链接：

Python 2.7：[http ://dl.dropbox.com/u/71422266/pygame27.7z](http://dl.dropbox.com/u/71422266/pygame27.7z)

Python 3.2：[http ://dl.dropbox.com/u/71422266/pygame32.7z](http://dl.dropbox.com/u/71422266/pygame32.7z)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:11:07.790

如果允许您从 USB 驱动器运行东西，一种选择是使用[Portable Python 2.7.3.2](http://portablepython.com/wiki/PortablePython2.7.3.2)，其中包括 PyGame 1.9.1。

# php - 在不重新加载页面的情况下将 MySQL 数据加载到现有表单中

> ID：14368254
> 
> 赞同：-1
> 
> 时间：2013-01-16T21:33:37.343
> 
> 标签：php, html, mysql, forms

我在用于“添加/编辑位置”的页面上有一个表单。这是我的表格：

```
<form id='locationEditForm' name='locationEditForm'>
<table width='50%'>
<tr><td colspan='2'><hr></td></tr>
<tr><td colspan='2'><button type='submit' name='save' id='save'>Lookup Location By ID: </button>
<input type='text' size='10' name='locationToEdit'><br/><br/></td></tr>

<tr><td>Name:</td><td><input type='text' name='locationName'/></td></tr>
<tr><td>URL:</td><td><input type='text' name='locationURL'/></td></tr>
<tr><td>Coordinates:</td><td><input type='text' name='locationCoords'/></td></tr>
<tr><td>Address:</td><td><textarea name='locationAddress' rows='4' cols='40'></textarea></td></tr>
<tr><td>Phone:</td><td><input type='text' name='locationPhone'/></td></tr>
<tr><td>Hours:</td><td><textarea name='locationHours' rows='3' cols='40' wrap='soft'/></textarea></td></tr>

<tr><td colspan='2'><button type='submit' name='save' id='save'>Save Changes</button>
<button type='button' class="cancel">Cancel</button></td></tr>
</table>
</form> 
```

我将表单元素包装在一个表格中只是为了保持输入框现在以一种“快速而肮脏”的方式对齐。

无论如何，如您所见，我有一个按钮和输入区域供用户通过 id“查找”现有位置。这样可以编辑现有位置。我了解如何使该按钮“提交”到我的 php 代码，然后在数据库中查找位置，但我的问题是——**是否可以在 MySQL 数据库中查找位置并将信息加载到现有表单中*不会*像我发布表单时那样导致页面重新加载？**

理想情况下，我想象现有位置的数据只是“弹出”到表单中，而无需重新加载整个页面。我将如何去做这样的事情？

万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:37:53.003

您正在寻找的技术通常称为[Ajax](https://en.wikipedia.org/wiki/Ajax)。在您的情况下，您需要提交[`XMLHttpRequest()`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)一个不同的 PHP 脚本，该脚本返回您可以使用的数据。插入表单的 HTML 或解析并用于更新字段值的[JSON](https://en.wikipedia.org/wiki/JSON)数据都是不错的选择。

有很多关于如何为 Ajax 请求创建 PHP/MySQL 端点的资源。这些搜索词应该可以帮助您入门。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:39:04.873

确实如此，但您必须使用 javascript。我建议你看看[Jquery](http://jquery.com/)。它是[$.ajax](http://api.jquery.com/jQuery.ajax/)和[$.post](http://api.jquery.com/jQuery.post/)函数。

# c++ - 不同文件中的复选框值

> ID：14368255
> 
> 赞同：0
> 
> 时间：2013-01-16T21:33:41.853
> 
> 标签：c++, visual-c++, mfc

我需要在不同的程序中访问复选框值。复选框在 ToolDlg.cpp 中启动

```
DDX_Control(pDX, IDC_CalculateTBA, m_CalculateTBA); 
```

在这样启动的 oninitdialog 中：

```
 m_CalculateTBA.SetCheck(0);
    CalculateAnalyticTBA = false;

void CToolDlg::OnBnClickedCheck3()
{   
    CalculateAnalyticTBA = m_CalculateTBA.GetCheck();   
} 
```

我需要 SetCal.cpp 程序中的复选框值。这是我在这个程序中尝试的代码：

```
 CToolDlg dialog;
 if( dialog.CalculateAnalyticTBA )
{

  Do some thing

} 
```

但是即使我没有选中该复选框， dialog.CalculateAnalyticTBA 也始终为真。如果您需要任何其他信息，请告诉我。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:46:14.167

看起来您正在创建一个对话框，但从未显示它。你在类`CalculateAnalyticTBA`的构造函数中给它的任何值也是`CToolDlg`如此（或者，如果你没有，编译器给它的任何值）。

为了设置此值，您至少必须*创建*对话框，以便数据交换代码（调用`DDX_Control`并处理复选框和变量的绑定）有机会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:23:32.477

正确的方法是创建并显示 CToolDlg 对话框并等待用户选择他的选择，然后仅在用户最终单击“确定”按钮时处理选择。

```
CToolDlg dialog;
// create and display the dialog
if (dialog.DoModal()==IDOK)
{  // user clicked the ok button, now do the work
   ....
} 
```

# java - 在片段中使用 android-color-picker？

> ID：14368256
> 
> 赞同：1
> 
> 时间：2013-01-16T21:33:44.770
> 
> 标签：java, android, color-picker

我对android开发相当陌生，想在片段中使用Android-Color_picker“AmbilWarna”。我收到错误消息：

```
The constructor AmbilWarnaDialog(HomeFragment, int, new OnAmbilWarnaListener(){}) is undefined. 
```

这是因为我使用的是 Fragment 而不是 Fragment Activity 我使用的教程使用的是 Activity。

我正在使用以下教程： [http ://wptrafficanalyzer.in/blog/android-color-picker-application-using-ambilwarna-color-picker-library/](http://wptrafficanalyzer.in/blog/android-color-picker-application-using-ambilwarna-color-picker-library/)

```
public class HomeFragment extends SherlockFragment implements TabListener {

private View homeView;

@Override
public View onCreateView(LayoutInflater inflater, final ViewGroup container,
        Bundle savedInstanceState) {

    homeView = inflater.inflate(R.layout.homefragment, container, false);

    Button sColorBtn = (Button) homeView.findViewById(R.id.button2);
    OnClickListener clickListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            colorpicker();
        }
    };

    // Setting click event listener for the button
    sColorBtn.setOnClickListener(clickListener);
    return sColorBtn;
}

public void colorpicker() {
    //     initialColor is the initially-selected color to be shown in the rectangle on the left of the arrow.
    //     for example, 0xff000000 is black, 0xff0000ff is blue. Please be aware of the initial 0xff which is the alpha.

    AmbilWarnaDialog dialog = new AmbilWarnaDialog(this, 0xff0000ff, new OnAmbilWarnaListener() {

        // Executes, when user click Cancel button
        @Override
        public void onCancel(AmbilWarnaDialog dialog){
        }

        // Executes, when user click OK button
        @Override
        public void onOk(AmbilWarnaDialog dialog, int color) {
            Toast.makeText(getBaseContext(), "Selected Color : " + color, Toast.LENGTH_LONG).show();
        }
    });
    dialog.show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:36:47.373

用这个：

```
AmbilWarnaDialog dialog = new AmbilWarnaDialog(getActivity().getApplicationContext(), 0xff0000ff, new OnAmbilWarnaListener() {

    // Executes, when user click Cancel button
    @Override
    public void onCancel(AmbilWarnaDialog dialog){
    }

    // Executes, when user click OK button
    @Override
    public void onOk(AmbilWarnaDialog dialog, int color) {
        Toast.makeText(getBaseContext(), "Selected Color : " + color, Toast.LENGTH_LONG).show();
    }
}); 
```

所以你必须使用`getActivity().getApplicationContext()`而不是`this`. 它将与上下文一起返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T16:10:52.683

如果您想要颜色选择器的片段解决方案，我已经制作了一个**android-color-** picker 的分支，其中使用了**DialogFragment**并在配置更改时重新创建。这是链接：[https ://github.com/lomza/android-color-picker](https://github.com/lomza/android-color-picker)

# jquery - JQuery Animate 中的回调

> ID：14368258
> 
> 赞同：0
> 
> 时间：2013-01-16T21:33:49.077
> 
> 标签：jquery, asynchronous, jquery-animate, jquery-callback

我正在使用以下 JQuery 代码打开一扇开始关闭的门。不同的菜单项会导致门关闭然后重新打开，并在下方显示相应的图片。一切都很顺利，除了第一次打开门时，右边的门 div 会弹回到它的初始位置并再次动画。我在这里做错了什么？请查看#leftdoor 和#rightdoor 这些是我遇到问题的div。

```
 var doorOpen = false;

        $("a[href=#bugz]").click(function() {

            // If door is open then close doors
            if (doorOpen) { 
                var duration = 1000;
            } else {
                var duration = 0;
            }

            $('.title1,.title2,.title3,.title4,.title5,.fade1,.fade2,.fade3,.fade4,.fade5,').animate({
            opacity: 0,
            }, 1000);
            $('.fade5,.fade2,.fade3,.fade4').css('zIndex', 1);
            $('.fade1').css('zIndex', 20);

            $("#rightdoor,#leftdoor").animate(
                {"marginLeft":"0px"},
                {duration:duration,
                    complete:function() {
                        $('.pic2,.pic3,.pic4,.pic5').css('zIndex', 1);  //puts wrong pics in back
                        $('.pic1').css('zIndex', 2);  //brings right pic into view
                        $('#rightdoor').animate({  //opens doors again
                         marginLeft: "150px",
                        }, 1000);
                        $('#leftdoor').animate({
                         marginLeft: "-150px",
                        }, 1000);
                        $('.title1').animate({
                        "opacity": "0.75",
                        }, 1000);
                        $('.fade1').animate({
                        "opacity": "1",
                        }, 1000);
                    }
                }
            );

            doorOpen = true;

        }); 
```

每次再次运行时，它都可以正常工作。刚开始关门的时候才第一次出现问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:37:12.313

尝试

```
doorOpen = true;
return false;

//instead of 
doorOpen = true; 
```

如果这不起作用

尝试

```
$("a[href=#bugz]").click(function(e) {
  e.stopPropagation() 
```

# php - 复制mysql中的记录与不同表中的关系

> ID：14368265
> 
> 赞同：2
> 
> 时间：2013-01-16T21:34:12.063
> 
> 标签：php, mysql, copy

我有 3 张不同的桌子。它们通过表中的 ID 列相互连接。

```
table "Purchase"
table "Catalog" has 'purchase_id' column in table
table "Product" has 'catalog_id' column in its table. 
```

一键复制记录一些已经激活的“购买”及其包含的所有目录和产品的方法是什么？

看起来像这篇文章[Duplicate a record in MySQL](https://stackoverflow.com/questions/1632680/duplicate-a-record-in-mysql)或多或少是连接的。这样做的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:38:32.083

执行“插入选择”：

```
 insert into <table> ( purchase_id, catalog_id, product_id ) 
     select purchase_id, catalog_id, product_id from Purchase 
       join Catalog using ( purchase_id )
       join Product using ( catalog_id )
   where <some condition>; 
```

# java - 使用文本文件填充 JCombobox

> ID：14368268
> 
> 赞同：0
> 
> 时间：2013-01-16T21:34:28.480
> 
> 标签：java, swing, jcombobox

> **可能重复：**
> [如何从文本文件中填充 JComboBox？](https://stackoverflow.com/questions/3173149/how-do-i-populate-jcombobox-from-a-text-file)

我是 Java 编程新手，只有 2 个月的经验。任何人都可以帮我填充一个`JComboBox`包含 5 行的文本文件吗？我在 Google 上查看过代码，但我不断收到错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:40:52.120

```
private void populate() {
    String[] lines;
    lines = readFile();

    jComboBox1.removeAllItems();

    for (String str : lines) {
       jComboBox1.addItem(str);
    }
} 
```

这里是 readFile()。[从这个网站](http://www.roseindia.net/java/beginners/java-read-file-line-by-line.shtml)

```
private String[] readFile() {
  ArrayList<String> arr = new ArrayList<>();
  try {
     FileInputStream fstream = new FileInputStream("textfile.txt");
     BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
     String strLine;
     while ((strLine = br.readLine()) != null) {
        arr.add(strLine);
     }
     in.close();
  } catch (Exception e) {
  }
  return arr.toArray(new String[arr.size()]);
} 
```

# javascript - 隐藏锚点，但不隐藏锚文本

> ID：14368269
> 
> 赞同：0
> 
> 时间：2013-01-16T21:34:29.710
> 
> 标签：javascript, html, css, dom

基本上，我想做与此相反的事情：[如何隐藏锚文本而不隐藏锚](https://stackoverflow.com/questions/5300714/how-do-i-hide-anchor-text-without-hiding-the-anchor)

我希望能够在我的页面上有一个链接，该链接在一组客户端确定的条件下能够停用链接，但仍显示文本。有没有办法做到这一点而无需两个单独的元素（一个带有锚点和文本，一个只带有文本）然后在两者之间翻转可见性？

编辑：对不起，应该澄清。我希望链接在停用时不要像链接一样设置样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:38:57.060

将 替换`<a>`为 generic `<span>`，然后再返回。

一个简单的替换策略是：

1.  找到节点。
2.  在它之前添加被替换的节点
3.  删除第一个节点

--

```
var node = document.getElementById("example");
var new_node = document.createElement("a"); // or "span"
new_node.innerText = text;
node.parentNode.insertBefore(new_node, node);
node.parentNode.removeChild(node); 
```

这段代码并不完整，只是为了给你一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:45:07.337

满足条件时，您可以删除 href 属性。
检查这个例子。
HTML

```
<a href="http://google.com"> Link to google</a>
<p> Hover over me to remove the link from the anchor</p> 
```

Javascript（使用 jquery）

```
$("p").on("mouseover", function(){
   $("a").removeAttr("href"); 
}); 
```

当您将鼠标悬停在段落标签上时，href 将被删除，但如果您从未将鼠标悬停在它上面，您可以访问 google.com，将鼠标悬停在 p 标签上就是示例条件。
Example [Fiddle](http://jsfiddle.net/pgbJD/)

这将从锚标记中永久删除 href。当满足另一个条件时，您必须将其添加回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:39:38.233

最简洁的答案是不。任何隐藏或不可见的元素也会隐藏它的子元素。您可能会发现在需要时简单地修改锚标记的属性更容易。

热点链接：

```
<a href="#some-url-here" class="">Text here</a> 
```

非热链接

```
<a class="no-link" data-url="#some-url-here">Text here</a> 
```

您可以使用 JavaScript 删除`href`属性、存储其值并添加可用于覆盖任何样式的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T21:47:48.767

您所问的问题没有直接的“正确”答案，因为有太多方法可以达到类似的效果。如果您需要根据条件禁用和重新启用锚点，我认为这个答案是最简单的方法之一。

您可以添加一个单击处理程序，例如`.on('click.disabledLink', false)`停用锚功能（防止默认并停止传播），然后使用一个使其看起来像页面中的普通文本的类来设置它的样式。

要重新启用它，您只需要`off`处理程序并删除添加的类。

```
//disable link
$('a').on('click.disabledLink', false).addClass('disabledLink');
//re-enable link
$('a').off('.disabledLink').removeClass('disabledLink'); 
```

[**小提琴**](http://jsfiddle.net/uGPmx/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T21:50:15.857

在 Firefox 和 WebKit 浏览器中，您可以使用`pointer-events: none;`使元素对指针“透明”（在功能意义上，而不是视觉意义上！）。你真正点击的是下面的元素。有关演示，请参见[http://jsfiddle.net/Hqk49/](http://jsfiddle.net/Hqk49/)。
请注意，它仅在启用 CSS（和 JS，以便切换类以恢复链接的正常行为）时才有效。IE9 不支持，也许 IE10 不支持，Opera 不支持：[https ://developer.mozilla.org/fr/docs/CSS/pointer-events](https://developer.mozilla.org/fr/docs/CSS/pointer-events)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-02T13:06:47.920

参考下面的CSS：

```
a{
    line-height: 0; 
    font-size: 0;
    color: transparent; 
 } 
```

# mysql - 错误的mysql索引选择

> ID：14368270
> 
> 赞同：0
> 
> 时间：2013-01-16T21:34:31.507
> 
> 标签：mysql

我有一个大表（250M 行），其列 group_id 将表大致分为组（group_id）。它具有以下索引：

```
mysql> show indexes from table\G;
*************************** 13\. row ***************************
       Table: table
  Non_unique: 1
    Key_name: myindex
Seq_in_index: 1
 Column_name: group_id
   Collation: A
 Cardinality: 181819
    Sub_part: NULL
      Packed: NULL
        Null: YES
  Index_type: BTREE
     Comment: 
*************************** 14\. row ***************************
       Table: table
  Non_unique: 1
    Key_name: myindex
Seq_in_index: 2
 Column_name: id
   Collation: A
 Cardinality: 213456239
    Sub_part: NULL
      Packed: NULL
        Null: 
  Index_type: BTREE
     Comment: 
```

我想执行以下查询：

```
mysql> explain select * from `table` WHERE (`table`.`type_id` IN (11, 17, 12, 19) AND `table`.`group_id` = 310248) ORDER BY `table`.`id` ASC LIMIT 201\G

*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: table
         type: index
possible_keys: [SOME INDEX NAMES]
          key: PRIMARY
      key_len: 4
          ref: NULL
         rows: 257386914
        Extra: Using where
1 row in set (0.00 sec) 
```

我知道由于 WHERE ... IN () 的索引问题，它需要扫描一些行。然而，令我惊讶的是，它选择使用主键索引扫描尽可能多的行。

以下似乎明确（并且显然）优越：

```
mysql> explain select * from `table` USE INDEX (myindex) WHERE (`table`.`type_id` IN (11, 17, 12, 19) AND `table`.`group_id` = 310248) ORDER BY `table`.`id` ASC LIMIT 201\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: table
         type: ref
possible_keys: myindex
          key: myindex
      key_len: 5
          ref: const
         rows: 1883760
        Extra: Using where
1 row in set (0.00 sec) 
```

为 LIMIT (2000) 使用更大的值、使用不同的 group_id 值、删除 ORDER BY 和删除 type_id 过滤器都会导致它使用索引。我已经运行了分析表。

值得注意的是，行估计值相当高：

```
mysql> select count(*) from table where group_id=310248 and type_id in (11, 17, 12, 19) ;
+----------+
| count(*) |
+----------+
|   583868 |
+----------+
1 row in set (0.61 sec) 
```

mysql版本：

版本 5.1.57-rel12.8-log，用于 x86_64 上的 debian-linux-gnu（（Percona Server (GPL)，12.8，修订版 233））

为什么mysql会选择一个它认为会涉及扫描257386914行而不是1883760行的计划？我知道它可能重视顺序读取，但为什么它会选择 2000 行的索引，而不是 200 行？为什么要按不同的组 id 过滤？

编辑：我也尝试过创建索引 (group_id, id, type_id) 以便仅使用索引扫描即可完成所有排序，但我无法让它选择该索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:00:33.433

你有问题吗？

请注意，因为`type_id`必须检查列上的谓词，并且因为您的查询返回至少一个不在索引中的列，所以 MySQL 必须访问表的数据页，才能访问那些列。

因此，MySQL 可能更喜欢集群键，因为那是数据页所在的位置；集群键还允许 MySQL 避免排序操作（“使用文件排序”）。（我们确实注意到使用您的索引的执行计划也避免了排序操作。）

如果您希望 MySQL 支持您的索引，您可以考虑`type_id`在该索引中包含第三列，如果这是有选择性的。

或者，您可以考虑将查询修改为“ORDER BY group_id, id”以影响优化器。

您是否测量了带有提示和不带提示的查询的性能？

# java - Selenium 隐藏浏览器

> ID：14368271
> 
> 赞同：2
> 
> 时间：2013-01-16T21:34:33.187
> 
> 标签：java, selenium

我在我的 java 应用程序中使用 selenium。我知道它运作良好。因此，我想在没有浏览器的情况下使用我的应用程序。我使用 Windows 7，将来我想在 Windows server 2008 上运行 selenium 服务器。你能帮帮我吗？

# android - 第一行始终可见的 Android 滑动抽屉

> ID：14368273
> 
> 赞同：0
> 
> 时间：2013-01-16T21:34:34.610
> 
> 标签：android, android-layout, slidingdrawer

我创建了一个 Android 滑动抽屉，但是当它被关闭时，它完全隐藏了。我正在寻找的行为是让抽屉的第一行始终可见。如果这是可能的，那么尝试这个的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:20:03.653

这对我有用：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Button 1" />

    <SlidingDrawer
        android:id="@+id/slidingDrawer1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/button1"
        android:content="@+id/content"
        android:handle="@+id/handle" >

        <Button
            android:id="@+id/handle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Handle" />

        <ScrollView
            android:id="@+id/content"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <LinearLayout
                android:id="@+id/content1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:scrollbars="vertical" >

                <Button
                    android:id="@+id/button1a"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="Button 1" />

                <Button
                    android:id="@+id/button2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="Button 2" />
            </LinearLayout>
        </ScrollView>
    </SlidingDrawer>

</RelativeLayout> 
```

在主要活动中：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    actionsSlider = (SlidingDrawer) findViewById(R.id.slidingDrawer1);
    actionsSlider.setOnDrawerCloseListener(new OnDrawerCloseListener() {
        public void onDrawerClosed() {
            firstButton = (Button) findViewById(R.id.button1);
            firstButton.setVisibility(View.VISIBLE);

        }
    });

    actionsSlider.setOnDrawerScrollListener(new OnDrawerScrollListener() {

        public void onScrollStarted() {
            if (!actionsSlider.isOpened()) {
                findViewById(R.id.button1).setVisibility(View.GONE);
                firstButton = (Button) findViewById(R.id.button1a);
            }
        }

        @Override
        public void onScrollEnded() {
        }
    });
} 
```

# iis - 无法让 IIS 7/Coldfusion 提供 404

> ID：14368274
> 
> 赞同：4
> 
> 时间：2013-01-16T21:34:35.017
> 
> 标签：iis, iis-7, coldfusion, http-status-code-404, coldfusion-10

所以......我们有一个定制的CMS。我们有一个重写规则，任何页面请求（当文件不存在时）都会转到 root/index.cfm 文件。在那里，我们在我们的数据库中搜索有问题的页面。如果页面存在，我们会提供正确的模板等。如果该页面不存在，我想提供一个 404 页面。现在我“认为”我不能在 IIS 中执行此操作，因为我需要在 CF 中处理请求，所以它必须通过。该文件将始终存在。当页面不存在时，我尝试使用`<cfheader statusCode="404" >`然后包含一些 html，它会放在`The resource you are looking for has been removed, had its name changed, or is temporarily unavailable.`页面顶部，位于我的 html 之前。为了让它显示页面，我必须从 IIS 中删除 404 状态代码处理程序。

此外，当我以 Google 的身份获取时，它得到的是 301。但是，当我在 Firefox 中查看响应标头时，我得到了。

```
Transfer-Encoding: chunked
Content-Type: text/html
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Wed, 16 Jan 2013 21:31:42 GMT
404 Not Found 
```

我尝试了重定向和各种事情的组合。如果有办法，我愿意让 IIS 处理 404，但我不知道如何让 Coldfusion 正确提供 404，以便 Google 正确处理。网站管理员工具对我很生气，因为我在此之前提供了“Soft 404s”，所以我正在尝试解决这个问题。

我也尝试过设置`<httpErrors existingResponse="PassThrough" />`任何该死的东西，但也没有用。我一直在寻找其他线程试图弄清楚这一点，但不能。

编辑：进一步研究，查看 Firebug 和 Chrome 中的标题信息，我清楚地看到标题说 404。为什么 Fetch as Bing 和 Fetch as Google 会说不同？

我测试了一个事实，即如果我将 .cfm 添加到 URL，它会像 Google 一样获取 404。但是如果没有 .cfm，它会认为它是 301。Firebug 将两者都视为 404。这似乎是 Google 的问题。

**答案种类：**

所以今天早上我做了更多的测试（实际上是在我添加赏金之后），我注意到在网站管理员工具中，谷歌正确地将我的一个页面标记为 404。所以我开始研究它。我有一个“添加尾部斜杠规则”。谷歌`domain.com/page`将 301（我猜是正确的）通知为`domain.com/page/`. 但它确实注意到`domain.com/page/`了 404。我认为使用斜杠规则是正确的方法，但是，我应该做一些不同的事情，还是使用带有斜杠的重定向是“正确”的做事方式，即使谷歌有时想为它找我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:45:23.393

我不完全确定我是否遵循您的方法的具体细节，所以我将给您一些您需要查看的内容，以便让这种方法运作良好（或至少对我最有效的方法）。

在“错误页面”下，确保您的 404 错误页面设置为“在此站点上执行 URL”（我通常将我的设置为“/404.cfm”之类的内容）。这将确保为 404 页面正确调用 ColdFusion 页面（听起来您可以正常工作）。

在“处理程序映射”下，双击“.cfm”的处理程序。然后单击“请求限制...”按钮。它应该打开到“映射”选项卡。不应选中“仅当请求映射到时才调用处理程序：”复选框。

这确实会导致此类操作出错，因为这意味着如果文件不存在，IIS 将不会调用 ColdFusion。如果您的 404 设置正确，这应该不是问题，但仍然需要调查。

在“处理程序映射”部分中，查找路径为“*”的 IsapiModule。我的总是设置为 ColdFusion - 不确定这是否有所作为。

要查看的另一件事是“默认文档”设置。请记住，这可能会在转发到文件夹时影响您。

您还可以再次查看您的重写规则，并确保它没有在已经存在的地方添加斜杠。

# c# - 在 Perl 中更新 app.config.xml

> ID：14368276
> 
> 赞同：0
> 
> 时间：2013-01-16T21:34:38.100
> 
> 标签：c#, xml, perl

我有一个 test.config 文件。它是 c# 程序的配置文件。看起来像这样

```
<?xml version="1.0"?>
<configuration>
    <appSettings>
        <add key="key1" value="val1, val2, val3, val4"/>
        <add key="key2" value="val1, val2, val3, val4"/>
    </appSettings>
</configuration> 
```

我想编写一个 PERL 脚本，它可以检索给定键的值，然后更改文件中的值。

我是 Perl 的新手，并且有几个 XML 库，因为我正在努力实现最优雅、最有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:47:22.883

我建议看看[Task::Kensho:XML](https://metacpan.org/module/Task%3a%3aKensho#XML-Development%3a-Task%3a%3aKensho%3a%3aXML)对此有何看法。引用[描述](https://metacpan.org/module/Task%3a%3aKensho#DESCRIPTION-)：

> Task::Kensho 是为 Enlightened Perl 开发构建推荐模块列表的第一步。CPAN 很棒，但是轮子太多了，您必须在各种竞争技术中进行选择。

例如[XML::LibXML](https://metacpan.org/module/XML%3a%3aLibXML)可能是一个很好的起点。

# javascript - AJAX 调用变量

> ID：14368277
> 
> 赞同：0
> 
> 时间：2013-01-16T21:34:38.513
> 
> 标签：javascript, jquery, twig

> **可能重复：**
> [使用 Javascript 访问通过 Twig 传递的变量](https://stackoverflow.com/questions/13928729/use-javascript-to-access-a-variable-passed-through-twig)

我有一个 Twig 模板，我想在`{{ item.getPrice() }}`它完成加载后附加商品的价格。我正在考虑使用 AJAX 在 jQuery 中执行此操作，但我不知道如何将变量分配给`url`值以及如何分配`{{ item.getPrice() }}`给变量`offerPrice`。

```
$.ajax ({
  url: {{ item.getPrice() | json_encode | raw }}
}).done( function() {
  $('#price').append(offerPrice);
}); 
```

# c# - WinForms App 在调用其他线程的委托后挂起

> ID：14368278
> 
> 赞同：0
> 
> 时间：2013-01-16T21:34:39.147
> 
> 标签：c#, winforms, multithreading

我有 2 个线程的 Winforms 应用程序问题：在第二个线程中，我从 WCF 服务中提取消息。当有消息时我需要更新 GUI：我按照此处找到的模式执行此操作[如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-the-gui-from-another-thread-in-c). 这是代码：

```
 private delegate void CWU(int ID); 
    public void AddNewTab(int id)
    {
        if (this.tabControl1.InvokeRequired)
        {
            CWU cb = new CWU(AddNewTab);
            this.tabControl1.Invoke(cb,id);
        }
        else
        {
            User ToChatWith = ContactsHelper.AllFriends.Find(e => e.ID == id);
            tabpage.Text = ToChatWith.ToString();
            this.tabControl1.TabPages.Add(tabpage);
            this.tabControl1.SelectTab(tabpage);
        } 
```

选项卡已正确添加，当我们离开此方法时，应用程序没有响应，调试中没有信息。当我在添加此选项卡后运行我的应用程序时，我得到 AppHangB1 没有任何详细信息。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:51:02.970

如果被调用线程忙于做某事，调用可能会挂起。（如果 BeginInvoke 调用而不是您的 Invoke 不会挂起，您可能会知道这种情况。Invoke 会阻塞，直到调用成功，BeginInvoke 不会。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:57:05.530

尝试这个：

```
if (this.InvokeRequired)
{
    this.Invoke((MethodInvoker)delegate
    {
        AddNewTab(id);
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:31:25.870

用这个替换你的方法：

```
 private void dbg(string s)
    {
        System.Diagnostics.Debug.WriteLine("AddNewTab({0}): {1}", 
            Thread.CurrentThread.ManagedThreadId, s);
    }
    public void AddNewTab(int id)
    {
        try
        {
            dbg("entered");
            if (this.tabControl1.InvokeRequired)
            {
                new Thread(delegate() { try {
                        CWU cb = new CWU(AddNewTab);
                        dbg("calling Invoke");
                        this.tabControl1.Invoke(cb, id);
                        dbg("Invoke returned");
                    } catch (Exception ex) { dbg("" + ex); }
                }).Start();
                dbg("created sub-thread");
            }
            else
            {
                dbg("setting tabpage.Text");
                User ToChatWith = ContactsHelper.AllFriends
                    .Find(e => e.ID == id);
                tabpage.Text = ToChatWith.ToString();
                dbg("adding tab");
                this.tabControl1.TabPages.Add(tabpage);
                this.tabControl1.SelectTab(tabpage);
                dbg("done adding tab");
            }
            dbg("leaving");
        }
        catch (Exception ex)
        {
            dbg("" + ex);
        }
    } 
```

确保您可以在您的环境中找到调试器输出。（见鬼，如果有帮助，请使用 Console.WriteLine）

如果那不能帮助您诊断问题，我不知道会怎样。

# ember.js - CollectionView 模板中对 arrayController 的操作

> ID：14368280
> 
> 赞同：1
> 
> 时间：2013-01-16T21:34:52.593
> 
> 标签：ember.js

*   我有一个带有 addField 和 deleteField 方法的 personArrayController
*   我有一个 PersonCollectionView 类（继承自 CollectionView）
*   HandleBars 正在建立连接：
    {{view PersonCollectionView contentBinding="personArrayController"}}
*   我需要在 collectionView 的每个视图中都有一个按钮，以允许删除选定的元素。

子 View 模板需要从 personArrayController 中调用 deleteField。使用目标是因为否则会触发路由器。

视图的显示已正确完成，但是当我单击“删除”按钮时，找不到目标（未触发 personArrayController）。

如何从我的模板视图访问 personArrayController ？
我在想这个控制器可以通过 target="view.content" 访问......但是“view.content”是当前数组元素而不是 arrayController 似乎是合乎逻辑的......

```
App.PersonCollectionView=Ember.CollectionView.extends({
itemViewClass: Ember.View.extend({
    template: Ember.Handlebars.compile(<button {{action deleteField view.content target="view.content"}});
  })
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:44:13.017

您可以将“控制器”指定为目标：

```
App.PersonCollectionView=Ember.CollectionView.extends({
itemViewClass: Ember.View.extend({
    template: Ember.Handlebars.compile(<button {{action deleteField view.content target="controller"}});
  })
}) 
```

# objective-c - 使 NSTimeZone 在单元测试中无故障

> ID：14368281
> 
> 赞同：3
> 
> 时间：2013-01-16T21:34:54.653
> 
> 标签：objective-c, date, date-math

所以这是在 Objective-C 中对日历代码进行单元测试的问题：时区包含有关夏令时的信息，所以你在夏天编写了一个测试，预计 6 月 10 日的日出将在早上 6:02 发生。您的测试通过，稍后，您在不是 DST 时运行测试并且失败，因为当您获得时区时，夏令时已关闭。

似乎没有一种简单的方法来告诉它给你打开 dst 的时区？

我正在考虑做一个类别，以便拦截时区调用，但这听起来超级混乱，因为我不知道你在操纵什么日期。

当然，我可以编写所有测试来检查时区设置，然后改变我所有的期望，但这听起来是所有可能选择中最糟糕的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:39:03.533

特定区域的时区必须考虑夏令时，以便准确计算两个日期（和时间）之间的间隔。如果您对此不感兴趣，也许您可​​以改用 UTC“时区”，它根本不会改变。

例如，新西兰标准时间定义为 UTC+12:00，新西兰夏令时定义为 UTC+13:00。尽管新西兰的当地时间在夏令时期间有所不同，但 UTC+12:00 的时间保持不变（也就是说，所有其他也使用 UTC+12:00 的国家不会因为夏令时而神奇地向前移动已在新西兰开始）。

您只需提供该 UTC 偏移量作为名称即可实现此目的：

```
NSTimeZone *utc_plus12 = [NSTimeZone timeZoneWithName:@"UTC+12:00"]; 
```

找出您所在地区的夏令时所基于的 UTC 偏移量并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-16T03:26:35.943

我遇到了类似的问题。最后我找到`OCMock`并救了我的命。
如果你正在使用`Cocoapods`，那就太好了！以下是步骤：

1.  编辑您的*Podfile*并添加一行以导入 OCMock。

    ```
    target 'YourProjectTests' do
        pod 'OCMock'
    end 
    ```

2.  在您的单元测试类中添加导入

    ```
    #import <OCMock/OCMock.h> 
    ```

3.  像这样写你的测试用例

    ```
    - (void)testLocalTimezoneFromPDT {
        NSTimeZone* timeZone = [NSTimeZone timeZoneWithAbbreviation:@"PDT"];
        id timeZoneMock = OCMClassMock([NSTimeZone class]);
        OCMStub([timeZoneMock localTimeZone]).andReturn(timeZone);

        // Implement your test case
        // XCTAssertEqual(...);
    } 
    ```

该代码将模拟原始`[NSTimeZone localTimeZone]`方法并返回静态值。
在此示例中，我们从*太平洋夏令时间 (PDT) [GMT-07:00]*返回时区。
当您的班级打电话时`[NSTimeZone localTimeZone]`，您的班级将获得我们设置的时区`OCMock`。

希望这个答案对您有所帮助。

# c# - 调整 DirectX 控件大小的标准方法

> ID：14368282
> 
> 赞同：0
> 
> 时间：2013-01-16T21:34:55.370
> 
> 标签：c#, model, directx, slimdx

我想知道调整 DirectX 控件大小的标准方法。控件中显示了一个模型，我希望它在调整大小后具有相同的大小，只有更多的环境应该可见。

我设法通过重置视口和交换链缓冲区来做到这一点，但我也可以用另一种方式（移动相机），也许还有我没有想到的其他方式。我只是不知道哪个是“最好的”方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:39:08.260

更改视口大小应仅显示“更多”查看区域，因为更改纵横比。例如，如果视口的宽度和高度加倍，则纵横比将相同，因此将显示相同的图像，只是更大。

相反，移动相机会改变观看的数量，例如，如果您将相机向后移动，您会看到更多。但是，这可能不是您想要的。您实际上是在将相机移动到另一个位置，而不是简单地更改视图属性。

您可能正在寻找的是更改相机投影属性，这可能会使用“PerspectiveFovLH”来完成，其输入是：（“视野”，“纵横比”，“z 近平面”，“z远平面”）。扩大视野 (FOV) 可以让您看到更多场景。更改纵横比将适当地缩放。通常，纵横比应该是屏幕宽度和高度之间的比率，如果您想要更大的屏幕以显示更多整体，请按照屏幕重新调整大小的量来缩放 FOV。

# java - 如何在android 3.0 + 版本的主题中更改默认分隔（划分）？

> ID：14368284
> 
> 赞同：1
> 
> 时间：2013-01-16T21:35:04.513
> 
> 标签：java, android, actionbarsherlock, android-theme

我有一个问题。我使用 actionbarsherlock 库。我有一个绿色操作栏，我想为我的所有应用程序使用绿色主题。如何将蓝色变为绿色？它在整个应用程序中都是可取的。 [![在此处输入链接描述](../Images/0be21811cd30b3f4dbe5fc1f36c410da.png)](https://i.stack.imgur.com/6bwcS.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:01:53.817

你可以这样设计它：

```
<style name="myStyle" parent="android:Theme.Holo">
     <item name="android:calendarViewStyle">@style/myCalendarView</item>
</style>

<style name="myCalendarView" parent="android:Widget.Holo.CalendarView">
     <item name="android:selectedDateVerticalBar">@drawable/myDivider</item>
</style> 
```

默认分隔符是这样的：

![在此处输入图像描述](../Images/432415d682c0daac262b25b93bd96bdd.png)

只需将颜色更改为绿色，瞧，您将拥有绿色分隔线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:50:56.467

我找到了答案。DatePicker 由 CalendarView 和 NumberPicker 组成。CalendarView 很容易设计，但 NumberPicker 不再，因为他的属性是私有的，不应该找到方法。唯一的选择是从头开始完全重写这个小部件 DatePicker，但这是非常耗时的工作。好在我找到了一个 HoloEverywhere 库，这些人都已经完成了，我只能自己替换图标/图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T20:38:49.243

使用此代码：

```
Field[] pickerFields = NumberPicker.class.getDeclaredFields();
        for (Field pf : pickerFields) {
            if (pf.getName().equals("mSelectionDivider")) {
                pf.setAccessible(true);
                try {
                    pf.set(daypicker, new ColorDrawable(getResources().getColor(R.color.transparent)));//you can use all colors
                    pf.set(mounthpicker, new ColorDrawable(getResources().getColor(R.color.transparent)));
                    pf.set(yearpicker, new ColorDrawable(getResources().getColor(R.color.transparent)));
                } catch (IllegalArgumentException e) {
                    e.printStackTrace();
                } catch (Resources.NotFoundException e) {
                    e.printStackTrace();
                } catch (IllegalAccessException e) {
                    e.printStackTrace();
                }
                break;
            } 
```

# java - 在java中使用进程构建器运行批处理文件时出现奇怪的问题

> ID：14368285
> 
> 赞同：0
> 
> 时间：2013-01-16T21:35:06.627
> 
> 标签：java, process, batch-file, processbuilder

我有以下运行批处理文件的java代码片段（根据标志重命名文件）。此代码正常工作。但是，当我评论该行时`while( isRunning(p) ) {}`，它就不起作用了。任何人都可以给出任何理由吗？

```
public static void main(String[] args) throws IOException, InterruptedException {
        ProcessBuilder pb = new ProcessBuilder(  fileManipulatorScriptLocation, "Rename_File", "a.txt", "b.txt" );
        pb.directory( new File(targetDirectory) );
        Process p = pb.start();
        while( isRunning(p) ) {}
    }

    public static boolean isRunning(Process process) {
        try {
            process.exitValue();
            return false;
        } catch (IllegalThreadStateException e) {
            return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:40:23.880

而不是忙着等待的无限循环，使用`Process#waitFor`. 为什么它不起作用：您的父进程（Java）立即死亡，并拖着子进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:45:54.130

`isRunning()`检查`Process#exitValue()`.

从[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html#exitValue%28%29)：

返回子进程的退出值。

**返回**：此 Process 对象表示的子流程的退出值。按照惯例，值 0 表示正常终止。

**抛出**： IllegalThreadStateException - 如果此 Process 对象表示的子进程尚未终止。

意味着，如果进程仍在运行，则在方法`IllegalThreadStateException`内部抛出，但异常被捕获，所以方法 return ，否则返回进程存在值和方法 return打破循环。`isRunning()``true``exitValue()``isRunning``false``while`

# ruby - Mongo Mapper 中的返回结果是什么？

> ID：14368286
> 
> 赞同：0
> 
> 时间：2013-01-16T21:35:09.307
> 
> 标签：ruby, mongodb, mongomapper

我正在根据文档的 ID 在集合中搜索文档。

`find(the_id)`找不到返回什么？

```
session[:remote_ip] =  request.env['REMOTE_ADDR'].split(',').first
user = User.find({user_id: session[:remote_ip]})
if user.nil?
  # Do stuff if find couldn't find the user_id
  # Am I right to assume it will return nil? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:12:18.560

绝对地 ！

如您所见，它甚至还有一个规范：

[https://github.com/jnunemaker/mongomapper/blob/master/test/functional/test_querying.rb#L183](https://github.com/jnunemaker/mongomapper/blob/master/test/functional/test_querying.rb#L183)

也试试 Mongoid。

这是 MongoDB 的另一个伟大的宝石： [https ://github.com/mongoid/mongoid](https://github.com/mongoid/mongoid)

# python - Python 编码问题（ascii > unicode）

> ID：14368287
> 
> 赞同：0
> 
> 时间：2013-01-16T21:35:12.610
> 
> 标签：python, google-app-engine, utf-8, python-2.7

我遇到了一个典型的 utf-8 编码问题，但到目前为止我还无法解决它。

```
class StatsTandE(webapp2.RequestHandler):
  def get(self):

    conn = rdbms.connect(instance=_INSTANCE_NAME, database='origami')
    cursor = conn.cursor()
    cursor.execute('SELECT ui.displayName, ui.title, ui.costCenter FROM views AS v')
    results = [[str(row[0]), str(row[1]), str(row[2])] for row in cursor.fetchall()]
    logging.info('results identified as %s', results)

    template_file_name = 'templates/stats_results.html'
    template_values = {
      'results': results,
    }

    path = os.path.join(os.path.dirname(__file__), template_file_name)
    self.response.out.write(template.render(path, template_values))
    conn.close() 
```

我看到的错误是：

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xa0' in position 4: ordinal not in range(128) 
```

改`str(row[0])`了`str(row[0]).encode('utf-8')`也没用。。。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:52:24.000

尝试更改`str(row[0])`为`unicode(row[0])`.

更新：正如其他人所说：你甚至不应该使用`unicode`，`str`除非你需要它。试试吧`row[0], row[1], row[2]`。当您需要显示它时，请执行以下操作：`row[0].encode('utf8')`.

# windows-8 - Windows 8 应用程序：如何在 GoBack() 上传递参数？

> ID：14368289
> 
> 赞同：3
> 
> 时间：2013-01-16T21:35:13.360
> 
> 标签：windows-8, navigation, windows-runtime

有很多示例展示了如何在 Window 8 (WinRT) 中导航到页面时传递参数。但我找不到任何关于传递参数的提示。
情况：用户导航到相同数据的详细信息页面。数据通过以下方式传递到页面

```
Frame.Navigate(typeof(DedtailsPage), data); 
```

如何将更改的数据传回`GoBack()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:32:03.843

将数据的引用存储在某处并在您返回时检索它？

另请注意，最好不要在页面之间传递简单字符串或值以外的对象，因为仅支持简单类型来存储框架导航状态，以防您的应用程序被挂起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-15T19:56:35.093

我知道，这是一个非常糟糕的主意，但通常我使用这个：

1.  来写：

    Frame rootFrame = Window.Current.Content as Frame;
    rootFrame.Tag = myObject1;

2.  读书：

    Frame rootFrame = Window.Current.Content as Frame;
    var myObject2 = rootFrame.Tag;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-13T09:22:08.177

我已经做出了另一个选择来处理这个问题。请记住，我是 Xamarin 开发人员（不是 Forms！），所以我一直在寻找适用于所有平台的解决方案：iOS、Android 和 Windows。

我很喜欢事件，而不是传递对象或存储全局变量。因此，将数据从 PageB（子）传递到 PageA（父）的最佳选择是通过事件进行通信。

一些注意事项：在 iOS 和 Android 中，当您从“页面”导航到“页面”时，您可以通过传递要导航到的目标对象的实例来执行此操作。在 iOS 中，您创建一个自定义 UIViewController 的实例。在 Android 中，您创建一个自定义片段的实例。这样做允许您将事件处理程序附加到您的实例。

一个例子：

```
var controller = new ExtrasViewController();
controller.ExtraSelected += ExtrasFragment_ExtraSelected;
controller.ExtrasCleared += ExtrasFragment_ExtrasCleared;
this.NavigationController.PushViewController(controller, false); 
```

在 WinRT 应用程序中，您只能传递要导航到的目标页面的“类型”。因此，将事件处理程序附加到页面实例的唯一方法是使用调用页面中的 OnNavigatedFrom 方法。因此，假设您在 PageA 中并且想要将一些事件处理程序附加到您的 PageB，在它变为活动之前，只需在您的 PageA 中编写“代码隐藏”：

```
protected override void OnNavigatedFrom(NavigationEventArgs e)
{
    base.OnNavigatedFrom(e);

    var page = e.Content as ExtraBody;
    if(page != null)
    {
        page.ExtraSelected += ExtrasFragment_ExtraSelected;
        page.ExtrasCleared += ExtrasFragment_ExtrasCleared;
    }
} 
```

# python - Django DateTimeField() 和 timezone.now()

> ID：14368290
> 
> 赞同：7
> 
> 时间：2013-01-16T21:35:17.963
> 
> 标签：python, django, django-models

好的，当我运行功能测试时出现奇怪的时区问题。Django 1.4，Python 2.7。MySQL 上的 DateTimeField() 中的毫秒数是否被截断？这是我唯一的理论。

模型文件

```
from django.db import models
from django.utils import timezone

class Search(models.Model):
    query = models.CharField(max_length=200, null=True)
    query_date = models.DateTimeField(null=True) 
```

测试.py

```
from django.test import TestCase
from django.utils import timezone
from search.models import Search

class SearchModelTest(TestCase):
def test_creating_a_new_search_and_saving_it_to_the_database(self):
    # start by creating a new Poll object with its "question" set
    search = Search()
    search.query = "Test"
    search.query_date = timezone.now()

    # check we can save it to the database
    search.save()

    # now check we can find it in the database again
    all_search_in_database = Search.objects.all()
    self.assertEquals(len(all_search_in_database), 1)
    only_search_in_database = all_search_in_database[0]
    self.assertEquals(only_search_in_database, search)

    # and check that it's saved its two attributes: question and pub_date
    self.assertEquals(only_search_in_database.query, "Test")
    self.assertEquals(only_search_in_database.query_date, search.query_date) 
```

测试失败了：

```
self.assertEquals(only_search_in_database.query_date, search.query_date)
AssertionError: datetime.datetime(2013, 1, 16, 21, 12, 35, tzinfo=<UTC>) != datetime.datetime(2013, 1, 16, 21, 12, 35, 234108, tzinfo=<UTC>) 
```

我认为发生的事情是毫秒在保存到数据库后被截断。可以这样吗？我正在运行 MySQL v 5.5。MySQL是否截断日期？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T21:43:14.233

Django ORM在 mysql 中转换`DateTimeField`为。`Timestamp`您可以通过查看原始 sql 来确认`./manage.py sqlall <appname>`

在 mysql`timestamp`中不存储毫秒。

```
The TIMESTAMP data type is used for values that contain both date and time parts. TIMESTAMP has a range of '1970-01-01 00:00:01' UTC to '2038-01-19 03:14:07' UTC. 
```

这是 MySql 中的一个错误，似乎已在 v5.6.4 中修复，[错误](http://bugs.mysql.com/bug.php?id=8523)

```
Noted in 5.6.4 changelog.

MySQL now supports fractional seconds for TIME, DATETIME, and
TIMESTAMP values, with up to microsecond precision. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-17T13:27:28.370

Django 1.8 现在[支持毫秒](https://docs.djangoproject.com/en/1.8/ref/databases/#fractional-seconds-support-for-time-and-datetime-fields)。

> 以前，Django 在使用 MySQL 后端时会从日期时间和时间值中截断小数秒。现在它让数据库决定是否应该删除该部分值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T21:39:38.487

根据[mysql开发者网站](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)：

> DATETIME 或 TIMESTAMP 值可以包括以微秒（6 位）精度为单位的尾随小数秒部分。尽管可以识别此小数部分，但它会从存储到 DATETIME 或 TIMESTAMP 列中的值中丢弃。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-07-23T11:56:24.143

**更新**：这真的是老答案，不再相关。

DJango ORM 还不支持 MySQL 的微秒。他们故意截断微秒部分。如果您使用的是 MySQL 5.6.4 或更高版本，您可以对 DJango 代码应用以下更改以使其按预期工作：

这是一个 3 行更改。希望 Django 开发人员包括它。你可以在这里关注票：[https ://code.djangoproject.com/ticket/19716](https://code.djangoproject.com/ticket/19716)

* * *

在“db/backends/mysql/base.py”中

函数“def value_to_db_datetime(self, value)”

更改自：

```
return six.text_type(value.replace(microseconds=0)) 
```

至：

```
return six.text_type(value) 
```

* * *

在“db/backends/mysql/base.py”函数中“def value_to_db_time(self, value)”

更改自：

```
return six.text_type(value.replace(microseconds=0)) 
```

至：

```
return six.text_type(value) 
```

* * *

在“db/backends/mysql/creation.py”中定义“data_types”

更改自：

```
'DateTimeField': 'datetime', 
```

至：

```
'DateTimeField': 'datetime(6)', 
```

# python - 类内嵌套函数内的Python范围？

> ID：14368297
> 
> 赞同：22
> 
> 时间：2013-01-16T21:35:25.067
> 
> 标签：python

如何从另一个函数内部的函数内部设置类变量？

变量.py

```
class A:
    def __init__(self):
        self.a = 1
        self.b = 2
        self.c = 3
    def seta(self):
        def afunction():
            self.a = 4
        afunction()
    def geta(self):
        return self.a 
```

运行.py

```
cA = A()
print cA.a
cA.seta()
print cA.a
print cA.geta() 
```

蟒蛇运行.py

```
1
1
1 
```

为什么a不等于4，我怎样才能使它等于4？

编辑：

谢谢大家-对不起，我现在才看到。我不小心被我的名字中的一个 _ 关闭了......所以我的范围实际上一切正常。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-16T21:43:38.040

问题是有多个`self`变量。传递给内部函数的参数会覆盖外部函数的范围。

您可以通过从内部函数中删除参数来克服这个问题`self`，并确保以某种方式调用该函数。

```
class A:
    def __init__(self):
        self.a = 1
        self.b = 2
        self.c = 3
    def seta(self):
        def afunction():  # no self here
            self.a = 4
        afunction()       # have to call the function
    def geta(self):
        return self.a 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T21:41:39.717

正如其他人所提到的，`afunction`永远不会被调用。你可以这样做：

```
class A:
    def __init__(self):
        self.a = 1

    def seta(self):
        def afunction(self):
            self.a = 4
        afunction(self)

    def geta(self):
        return self.a

a = A()
print a.a
a.seta()
print a.a 
```

在这里，我们实际上调用`afunction`并显式传递它`self`，但这是设置属性的一种相当愚蠢的方式`a`——尤其是当我们可以显式地进行而不需要 getter 或 setter 时： `a.a = 4`

或者您可以`return`使用以下功能：

```
def seta(self):
    def afunction(): #Don't need to pass `self`.  It gets picked up from the closure
        self.a = 4
    return afunction 
```

然后在代码中：

```
a = A()
a.seta()()  #the first call returns the `afunction`, the second actually calls it. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:38:42.437

在里面`seta`，你定义了一个函数

```
 def afunction(self):
        self.a = 4 
```

...如果它被调用，*它将*设置为 4。`self.a`但它没有在任何地方调用，所以`a`没有改变。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T21:43:43.890

正如其他几个人所说，您需要在某个时候实际*调用functiona 。*评论不会让我清楚地输入这个，所以这里有一个答案：

```
def seta(self):
    def functiona(self):  #defined
        self.a = 4
    functiona()           #called 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-16T21:47:09.783

你怎么能使它等于4：

```
class A:
    def __init__(self):
        self.a = 1
        self.b = 2
        self.c = 3
    def seta(self):
        ##def afunction(self): (remove this)
        self.a = 4 
    def geta(self):
        return self.a 
```

棘手的部分：为什么不等于 4...

目前 a 仅通过“afunction”设置为 4。由于从未调用过函数，因此它永远不会执行.. seta 具有嵌套在内部但未调用的“函数”...类似于类中的成员变量。

# php - 字段继承

> ID：14368299
> 
> 赞同：-1
> 
> 时间：2013-01-16T21:35:29.647
> 
> 标签：php, oop, inheritance

我有下一个代码。为什么字段 userId 在 InheritUser 中不可见？

```
class User{
    private $userId;

function User($userId){
    $this->userId = $userId;
}

    function getId(){
        return $this->userId;
    }
}

class InhreritUser extends User{
    function someFunc(){
            echo $this->userId; // nothing
    }
} 
```

someFunc 什么也不返回：

```
$inheritUser = new InheritUser(1);
$inheritUser->someFunc(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:38:39.683

这就是`private`关键字的重点。如果你使用`protected`这将工作。

见： http: [//php.net/language.oop5.visibility](http://php.net/language.oop5.visibility)

此外，如果您没有关闭 PHP 中的错误（开发期间的坏主意），那么该代码会引发错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:38:24.060

[http://php.net/manual/en/language.oop5.visibility.php](http://php.net/manual/en/language.oop5.visibility.php)

需要保护类成员才能对子类可见。私有意味着子类*将无法*看到它。

```
protected $userId; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:38:28.973

它是私人的。改为保护它。

私有字段只能由类访问。受保护的字段也可用于子类。

# php - 使用带引号的 bbcode 插件时需要调整 tinymce

> ID：14368300
> 
> 赞同：2
> 
> 时间：2013-01-16T21:35:30.887
> 
> 标签：php, javascript, tinymce

我需要 TinyMCE 编辑器的帮助，它是带引号的 BBCode 插件。

我想要的只是当我选择要引用的文本时，将所有突出显示的文本都包裹在一个 div 中。

默认的引号样式似乎给每一行突出显示它自己的跨度标签，这很可怕，并且使每一行都成为一个新的引号，而不是一个块。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:43:36.373

我担心这不可能开箱即用。这里的问题是tinymce 具有一定的文本样式（通常是跨度）。并且没有简单的方法来调整它。为此，您需要摆弄 tinymce 核心类`Formatter.js`，我不建议这样做。

# c++ - 如何通过 netlink 获取网络链接 L2 地址？

> ID：14368306
> 
> 赞同：0
> 
> 时间：2013-01-16T21:36:14.377
> 
> 标签：c++, linux, netlink

我`netlink`用来获取接口、它的名称、类型等，但我无法获取 L2 地址（`ugly_data`is `nlmsghdr*`）：

```
struct ifinfomsg *iface;
struct rtattr *attribute;
int len;

iface = (struct ifinfomsg *) NLMSG_DATA(ugly_data);
len = ugly_data->nlmsg_len - NLMSG_LENGTH(sizeof(*iface));

for (attribute = IFLA_RTA(iface);
     RTA_OK(attribute, len);
     attribute = RTA_NEXT(attribute, len))
{
  id_ = iface->ifi_index;

  // get type
  switch (iface->ifi_type)
  {
  case ARPHRD_ETHER:
    type_ = "Ethernet";
    break;
  case ...
  }

  // get attributes
  switch (attribute->rta_type)
  {
  case IFLA_IFNAME:
    name_ = (char *) RTA_DATA(attribute);
    break;
  case IFLA_ADDRESS:
    address_ = (char *) RTA_DATA(attribute);
    break;
   ...
  }
} 
```

`type_`,`id_`并`name_`包含正确的值，与我从中得到的值相同`ifconfig`，但`address_`始终为空。我做错了什么以及如何获取地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T15:51:39.400

也许问题是这里的硬件地址不是字符串。尝试像这样获取地址：

```
case IFLA_ADDRESS:
  char buffer[64];
  unsigned char* ptr = (unsigned char*)RTA_DATA(attribute);
  snprintf(buffer, 64, " %02x:%02x:%02x:%02x:%02x:%02x", 
      ptr[0], ptr[1], ptr[2], ptr[3], ptr[4], ptr[5]);
  std::cout << "address : " << buffer << std::endl; 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T23:51:34.553

这是一个 Python (Linux) 的“解决方案”（可能对某人有所帮助）：
这是 Python Netlink 库中的第一个示例：
请参阅：[https](https://pypi.python.org/pypi/pyroute2/0.2.16)
://pypi.python.org/pypi/pyroute2/0.2.16 非常简单的安装：

```
$ sudo pip install pyroute2 
```

将其粘贴在一个文件中（我称之为 netlink1.py）并使其可执行：

```
#!/usr/bin/env python
from pyroute2 import IPRoute

# get access to the netlink socket
ip = IPRoute()

# print interfaces
print ip.get_links()

# stop working with netlink and release all sockets
# ip.release() (deprecated)
ip.close() 
```

这会在一行上打印出来，然后：

```
$ ./netlink1.py | sed 's/\], /\n/g' | grep IFLA_ADD 
```

# javascript - 如何从 TideSdk 应用程序的窗口中删除类似窗口的边框？

> ID：14368315
> 
> 赞同：0
> 
> 时间：2013-01-16T21:37:08.103
> 
> 标签：javascript, api, tidesdk

如何从 TideSdk 应用程序的窗口中删除类似窗口的边框？
我在 API 中找不到解决方案...
[截图。](http://i.stack.imgur.com/Xw8BB.jpg)
抱歉英语不好。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T23:50:23.313

这是您在 tiapp.xml 文件中配置的内容。在 window 元素中，插入一个值为 false 的 chrome 元素。例如：

```
<window>
  <id>initial</id>
  <title>My Great App</title>
  <url>app://index.html</url>
  <width>700</width>
  <height>500</height>
  <fullscreen>false</fullscreen>
  <chrome>false</chrome>
</window> 
```

希望有帮助。

# objective-c - Mac OS X 中的 top 命令被截断

> ID：14368319
> 
> 赞同：1
> 
> 时间：2013-01-16T21:37:28.713
> 
> 标签：objective-c, macos, cocoa

我正在尝试使用 MacOS X 中的“top”命令来确定哪个应用程序正在使用这些资源。当我做：

顶部-stats“pid，命令”

如果进程名称太长，命令列将被截断。

如果您查看活动监视器，进程名称会正确显示（带有全名）+ 图标。我的问题是：

1.  如何获得完整的进程名称？
2.  有时应用程序图标显示在进程名称旁边，是否有使用objective-c做类似的事情？我应该简单地导航到应用程序内容文件夹并获取 icns 图像吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:56:00.020

首先，如果您尝试以编程方式获取数据，那么驾驶`top`几乎绝对不是您想要做的。

但是，要回答您的直接问题：

> 如何获得完整的进程名称？

没有办法控制命令的截断。您可以使用该[`-ncols`](http://www.manpagez.com/man/1/top/)参数设置非交互式输出的输出宽度，但`top`如果需要，它不会停止截断。

> 有时应用程序图标显示在进程名称旁边，是否有使用objective-c做类似的事情？我应该简单地导航到应用程序内容文件夹并获取 icns 图像吗？

不。您将如何处理具有多个 .icns 文件的应用程序，例如文档图标？（例如，尝试使用 iTunes。如果您选择第一个 .icns，您将获得 AIFF 文档图标；如果您选择最后一个，您将获得内部使用的最近电视节目图标。）

正确的方法是获取[`NSBundle`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)应用程序的应用程序，然后执行以下操作：

```
NSString *iconFile = [bundle objectForInfoDictionaryKey:@"CFBundleIconFile"];
if (iconFile) {
    NSString *iconPath = [bundle pathForResource:iconFile ofType:@"icns"];
    // load and display the icon
} 
```

* * *

那么，如果不是通过驾驶，您*实际上*想如何做到这一点`top`？

好吧，您所要求的实际上并不是一个明确定义的东西。OS X 有四种不同的任务/进程/程序/应用程序概念，它们不是一对一对应的，如果你想编写两个使用不同概念的程序的混搭，那就很难了——例如，`top`在 BSD 中的交易进程，而 Activity Monitor 处理 OS X 应用程序。

如果你真正想要的是使用相同的列表`top`，它是开源的，所以你可以[阅读它](http://www.opensource.apple.com/source/top/top-73/)并做同样的事情。

但是获取 BSD 进程列表的最简单方法可能是 中的接口，`libproc.h`特别是. 例如：`proc_listallpids``proc_pidinfo`

```
int dump_proc_names() {
  int buf[16384];
  int count = proc_listallpids(&buf, 16384*sizeof(int));
  for (int i = 0; i != count; ++i) {
    int pid = buf[i];
    char path[MAXPATHLEN+1] = {0};
    int ret = proc_pidinfo(pid, PROC_PIDPATHINFO, 0,
                           &path, sizeof(path));
    if (ret < 0) {
      printf("%d: error %s (%d)\n", pid, strerror(errno), errno);
    } else {
      printf("%d: %s\n", pid, path);
    }
  }
} 
```

显然，在实际代码中，您将希望动态分配缓冲区，返回值而不是仅仅转储它们，获得的不仅仅是路径等。但这足以为您提供基本概念。（当您获取其他信息时，请注意，如果您要求任何结构，除非您有权查看该结构的每个成员，否则您将收到 EPERM 错误。所以，`PROC_PIDTASKALLINFO`如果您只想要`PROC_PIDT_SHORTBSDINFO`.

* * *

无论如何，由于此 API 处理 BSD 进程（和 Mach 任务），而不是应用程序，因此它不会直接帮助您获得`NSBundle`想要提供 Activity Monitor 样式的功能。

没有办法做到这一点是完全正确的，但你可能会摆脱这样的事情：

```
NSString *path = processPath;
while (path && ![path isEqualTo:@"/"]) {
    NSBundle *bundle = [NSBundle bundleWithPath:path];
    if (bundle) {
        if ([bundle executablePath != processPath]) return nil;
        return bundle;
    }
    path = [path stringByDeletingLastPathComponent];
} 
```

可能有其他方法可以做到这一点，每种方法都有不同的权衡。例如，使用`-[NSWorkspace runningApplications]`，将结果存储在字典中，将包的可执行路径映射到包，并使用它来查找每个进程很简单，但它似乎只对当前用户拥有的应用程序有用（并且可能在当前会话）。另一方面，枚举系统上的所有捆绑包，或询问 Spotlight 或类似的可能太慢而无法即时执行，但如果您在第一次运行时缓存它们就会过时。

* * *

代替 的另一种选择`libproc`是使用`libtop`。

不幸的是，Apple 没有提供它。他们确实*有*一个`libtop`实现，他们将其用于他们的`top`工具，但它实际上嵌入在源代码中`top`，不能从外部获得。您可以找到源代码（在上面的链接中）并将其嵌入到您的程序中，就像`top`它本身一样。

或者，GNU 和 BSD 进程实用程序都有 Mac 端口（尽管知道哪个名称与 Homebrew/MacPorts/Google 搜索一起使用并不总是那么容易……），因此您可以构建其中一个并使用它。

但是，除非您尝试编写跨平台软件（或者已经知道如何为 linux 或 FreeBSD 或其他任何东西编写此代码），否则我认为这只会增加额外的复杂性。

# jsf - PrimeFaces selectManyCheckBox 不适用于 enctype="multipart/form-data"

> ID：14368322
> 
> 赞同：2
> 
> 时间：2013-01-16T21:37:37.840
> 
> 标签：jsf, primefaces, selectmanycheckbox

我在使用具有`enctype="multipart/form-data"`属性和 Primefaces的表单时遇到问题`<p:selectManyCheckBox>`。这是我的代码：

```
<f:view xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui" xmlns="http://www.w3.org/1999/xhtml">

<h:head />
<h:body id="expiration-body">
    <h:form id="new-expiration-form">
        <div id="form_cargar_grupo">
        <p:messages id="msgs" />

            <div class="form_cargar">
                <label>Resolución:</label>
                <p:fileUpload value="#{expirationViewEdit.file}"
                        mode="simple" required="false" />
            </div>

            <p:selectManyCheckbox value="#{expirationViewEdit.departamentIds}">
                    <f:selectItem itemLabel="Option1" itemValue="TEST1" />
                    <f:selectItem itemLabel="Option2" itemValue="TEST2" />
            </p:selectManyCheckbox>

        </div>

        <div class="camp_envio">
            <p:commandButton value="Save" actionListener="#{expirationViewEdit.onSave}" ajax="false" />                 
        </div>
    </h:form>
</h:body> 
```

我遇到的问题是，当我选择多个**selectManyCheckBox**选项时，在我的支持 bean List 中只有一个元素，提交表单后，我看到只有一个复选框被选中（另一个未选中） .

我发现当我删除表单的**enctype="multipart/form-data"**属性时，复选框可以正常工作，但我需要该属性才能将文件上传到服务器。

有什么解决方法吗？或者也许我做错了什么？

提前致谢！

# xml - XSLT/XPath 替换特定节点

> ID：14368325
> 
> 赞同：0
> 
> 时间：2013-01-16T21:37:42.153
> 
> 标签：xml, xslt, xpath

我有以下要转换的 xml 数据结构：

```
<root>
        <main1>
            <page>
                <text-body>
                    <title>K1</title>
                    <subtitle>Text</subtitle>
                </text-body>
                <text-body>
                    <title>Text</title>
                    <subtitel>Text</subtitel>
                </text-body>
                <text-body>
                    <title>Text</title>
                    <subtitel>Text</subtitel>
                </text-body>
            </page>
            <page>
                <text-body>
                    <title>K2</title>
                    <subtitel>Text</subtitel>
                </text-body>
                <text-body>
                    <title>Text</title>
                    <subtitel>Text</subtitel>
                </text-body>
            </page>
            <page>
                <text-body>
                    <title>K3</title>
                    <subtitel>Text</subtitel>
                </text-body>
                <text-body>
                    <title>Text</title>
                    <subtitel>Text</subtitel>
                </text-body>
            </page>
        </main1>
        <main2>
            <text-body>
                <title>B</title>
                <subtitle>B</subtitle>
                <body>B</body>
            </text-body>
            <text-body>
                <title>C</title>
                <subtitle>C</subtitle>
                <body>C</body>
            </text-body>
            <text-body>
                <title>D</title>
                <subtitle>D</subtitle>
                <body>D</body>
            </text-body>
        </main2>
 </root> 
```

我需要用 main2/text-body 中的数据替换 main1/text-body 中的数据为标题 K1、K2、K3，但保留 main1 中的其他 text-body 元素。输出应如下所示：

```
<root>
        <main1>
            <page>
                <text-body>
                    <title>B</title>
                    <subtitle>B</subtitle>
                    <body>B</body>
                </text-body>
                <text-body>
                    <title>Text</title>
                    <subtitel>Text</subtitel>
                </text-body>
                <text-body>
                    <title>Text</title>
                    <subtitel>Text</subtitel>
                </text-body>
            </page>
            <page>
                <text-body>
                    <title>C</title>
                    <subtitle>C</subtitle>
                    <body>C</body>
                </text-body>
                <text-body>
                    <title>Text</title>
                    <subtitel>Text</subtitel>
                </text-body>
            </page>
            <page>
                <text-body>
                    <title>D</title>
                    <subtitle>D</subtitle>
                    <body>D</body>
                </text-body>
                <text-body>
                    <title>Text</title>
                    <subtitel>Text</subtitel>
                </text-body>
            </page>
        </main1>
        <main2>
            <text-body>
                <title>B</title>
                <subtitle>B</subtitle>
                <body>B</body>
            </text-body>
            <text-body>
                <title>C</title>
                <subtitle>C</subtitle>
                <body>C</body>
            </text-body>
            <text-body>
                <title>D</title>
                <subtitle>D</subtitle>
                <body>D</body>
            </text-body>
        </main2>
 </root> 
```

我有以下 xsl 代码：

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output method="xml"/>

       <xsl:template match="@*|node()">
        <xsl:copy>
             <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
       </xsl:template>

        <xsl:template match="main1/page/text-body">
            <xsl:param name="count" select="title/substring(.,2,1)"/>
            <xsl:if test="title/substring(.,1,1)='K'">
               <xsl:copy-of select="/root/main2/text-body[$count]"/>
            </xsl:if>
        </xsl:template>

    </xsl:stylesheet> 
```

我尝试选择标题中的数字并检查文本中是否有 K。但它不起作用。而且我不知道如何保留其他文本正文元素。这是当前的输出：

```
 <main1>
            <page>
                <text-body>
                <title>B</title>
                <subtitle>B</subtitle>
                <body>B</body>
            </text-body><text-body>
                <title>C</title>
                <subtitle>C</subtitle>
                <body>C</body>
            </text-body><text-body>
                <title>D</title>
                <subtitle>D</subtitle>
                <body>D</body>
            </text-body>

            </page>
            <page>
                <text-body>
                <title>B</title>
                <subtitle>B</subtitle>
                <body>B</body>
            </text-body><text-body>
                <title>C</title>
                <subtitle>C</subtitle>
                <body>C</body>
            </text-body><text-body>
                <title>D</title>
                <subtitle>D</subtitle>
                <body>D</body>
            </text-body>

            </page>
            <page>
                <text-body>
                <title>B</title>
                <subtitle>B</subtitle>
                <body>B</body>
            </text-body><text-body>
                <title>C</title>
                <subtitle>C</subtitle>
                <body>C</body>
            </text-body><text-body>
                <title>D</title>
                <subtitle>D</subtitle>
                <body>D</body>
            </text-body>

            </page>
        </main1>
        <main2>
            <text-body>
                <title>B</title>
                <subtitle>B</subtitle>
                <body>B</body>
            </text-body>
            <text-body>
                <title>C</title>
                <subtitle>C</subtitle>
                <body>C</body>
            </text-body>
            <text-body>
                <title>D</title>
                <subtitle>D</subtitle>
                <body>D</body>
            </text-body>
        </main2>
 </root> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:38:01.147

使用谓词仅匹配`text-body`您真正想要交换的元素。当您使用 XSLT 2.0 时，您可以在谓词中使用正则表达式：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xsl:output method="xml"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="main1/page/text-body[matches(title,'^K\d+$')]">
    <xsl:variable name="count" select="xs:integer(title/substring(.,2))"/>
    <xsl:copy-of select="/root/main2/text-body[$count]"/>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:26:38.070

主要问题是你的**count**参数设置为字符串，但是如果你想用in作为索引，它应该是一个数字，所以你需要这样做

```
<xsl:copy-of select="/root/main2/text-body[number($count)]"/> 
```

此外，您可能不想在此处使用**xsl:if** ，因为对于您当前的模板，当 if 条件为 false 时，它​​不会输出**text-body元素。**您实际上应该将测试移动到模板匹配的一部分。

```
<xsl:template match="main1/page/text-body[title/substring(.,1,1)='K']"> 
```

这是完整的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
   <xsl:output method="xml"/>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="main1/page/text-body[title/substring(.,1,1)='K']">
      <xsl:param name="count" select="title/substring(.,2,1)"/>
      <xsl:copy-of select="/root/main2/text-body[number($count)]"/>
   </xsl:template>
</xsl:stylesheet> 
```

这应该会产生您预期的输出。

如果您对不同的方法感兴趣，您可以选择定义一个**xsl:key**来查找**main2/text-body**元素

```
<xsl:key name="main2" 
     match="main2/text-body" 
     use="concat('K', count(preceding-sibling::text-body) + 1)" /> 
```

这样，您可以通过使用以下模板匹配**main1/page/text-body**元素来消除对子字符串的需求

```
 <xsl:template match="main1/page/text-body[key('main2', title)]">
    <xsl:copy-of select="key('main2', title)"/>
 </xsl:template> 
```

# javascript - 如何将参数传递给 PhoneGap 数据库事务函数

> ID：14368335
> 
> 赞同：9
> 
> 时间：2013-01-16T21:38:20.993
> 
> 标签：javascript, android, cordova, jquery-mobile

我有一个有效的 PhoneGap 数据库事务，我可以在其中运行 sql 查询并处理结果。但是，为了使其可重用，我需要将参数传递给查询函数。应该有比在查询函数中声明全局变量并访问它们/重置更好的方法。感谢任何帮助转换它：

```
 //update images function
    function updateGalleryCovers() {
        var db = window.openDatabase("test db", "1.0", "Cordova DB", 200000);
        db.transaction(queryDB_u_g, errorCB);
    }
    //Query the database
    function queryDB_u_g(tx) {
        var query = 'SELECT cover_img, objectId FROM USER_GALLERY WHERE userId="'+getUserId()+'"';
        tx.executeSql(query, [], querySuccess_u_g, errorCB);
    }
//Query success callback
function querySuccess_u_g(tx, results) {
    var len = results.rows.length;
    for (var i=0; i<len; i++){
        // process results
    }
} 
```

像这样：

```
 //update images function
    function updateGalleryCovers(userid) {
        var db = window.openDatabase("test db", "1.0", "Cordova DB", 200000);
        db.transaction(queryDB_u_g, userid, errorCB);
    }
    //Query the database
    function queryDB_u_g(tx, userid) {
        var query = 'SELECT cover_img, objectId FROM USER_GALLERY WHERE userId="'+userid+'"';
        tx.executeSql(query, [], querySuccess_u_g, errorCB);
    }
//Query success callback
function querySuccess_u_g(tx, results) {
    var len = results.rows.length;
    for (var i=0; i<len; i++){
        // process results
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T08:49:53.857

事务功能由 sqlite 而不是 phonegap 提供。确实，由于 sqlite 接受的方法签名，您不能将额外的变量传递给函数。

但这里有一个解决方法：

```
db_conn.transaction( function(tx){ your_function(tx, parameter1, parameter2) }, ErrorCallBack ); 
```

在这里，您将一个虚拟函数传递给事务成功回调并将事务对象连同它一起使用。

希望有帮助

# python - 树莓派 Python 错误

> ID：14368336
> 
> 赞同：3
> 
> 时间：2013-01-16T21:38:21.323
> 
> 标签：python, pip, raspberry-pi

我尝试安装分发或设置工具，这必须在 Raspberry Pi 上安装 pip 之前完成。

使用的命令是`$ curl http://python-distribute.org/distribute_setup.py | python`

但是我收到以下错误。如果需要，我可以复制整个终端脚本。

```
[Errno 13] Permission denied: '/usr/local/lib/python2.7/dist-packages/test-easy-install-2082.pth' 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:42:36.093

我从来没有使用过树莓派。但是从日志可以看出它抱怨不能有权限修改python包目录。您必须使用 root 权限运行 pip install。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-11T04:56:11.077

这个答案基于您拥有的任何操作系统，但是一个专门基于 Linux 的操作系统，例如 raspbian，您应该打开终端并在**此处输入 chmod +x 文件路径**。此外，为了使其正常工作，您应该在运行 chmod +x 等时存储文件的位置... /Desktop/python/ 例如可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-11T10:22:04.250

尝试

```
sudo curl http://python-distribute.org/distribute_setup.py | python command 
```

一些权限问题是这样解决的。我不确定这是否有效。

# java - Spring 3.2 Autowire 泛型类型

> ID：14368339
> 
> 赞同：27
> 
> 时间：2013-01-16T21:38:23.643
> 
> 标签：java, generics, spring-mvc, inversion-of-control, autowired

所以我在 Spring 3.2 中有许多泛型，理想情况下我的架构看起来像这样。

```
class GenericDao<T>{}

class GenericService<T, T_DAO extends GenericDao<T>>
{
    // FAILS
    @Autowired
    T_DAO;
}

@Component
class Foo{}

@Repository
class FooDao extends GenericDao<Foo>{}

@Service
FooService extends GenericService<Foo, FooDao>{} 
```

不幸的是，对于泛型的多个实现，自动装配会引发关于多个匹配 bean 定义的错误。我认为这是因为`@Autowired`类型擦除之前的过程。我发现或提出的每个解决方案对我来说都很难看，或者只是莫名其妙地拒绝工作。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-30T20:30:38.670

如何添加一个构造函数`GenericService`并将自动装配移动到扩展类，例如

```
class GenericService<T, T_DAO extends GenericDao<T>> {
    private final T_DAO tDao;

    GenericService(T_DAO tDao) {
        this.tDao = tDao;
    }
}

@Service
FooService extends GenericService<Foo, FooDao> {

    @Autowired
    FooService(FooDao fooDao) {
        super(fooDao);
    }
} 
```

* * *

**更新：**

从[Spring 4.0 RC1](https://spring.io/blog/2013/11/01/spring-framework-4-0-rc1-available)开始，可以基于泛型类型自动装配，这意味着您*可以*编写一个泛型服务，例如

```
class GenericService<T, T_DAO extends GenericDao<T>> {

    @Autowired
    private T_DAO tDao;
} 
```

并创建多个不同的 Spring bean，例如：

```
@Service
class FooService extends GenericService<Foo, FooDao> {
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T03:25:16.650

这是一个最接近的解决方案。专门的 DAO 在业务层进行注释。正如 OP 提出的问题一样，最好的办法是在 EntityDAO 通用模板本身中添加一个带注释的 DAO。类型擦除似乎不允许将专用类型信息传递给 spring 工厂 [导致报告来自所有专用 DAO 的匹配 bean]

## 通用实体 DAO 模板

```
public class EntityDAO<T> 
{
    @Autowired
    SessionFactory factory;

    public Session getCurrentSession()
    {
        return factory.getCurrentSession();
    }

    public void create(T record)
    {
        getCurrentSession().save(record);
    }

    public void update(T record)
    {
        getCurrentSession().update(record);
    }

    public void delete(T record)
    {
        getCurrentSession().delete(record);
    }

    public void persist(T record)
    {
        getCurrentSession().saveOrUpdate(record);
    }

    public T get(Class<T> clazz, Integer id)
    {
        return (T) getCurrentSession().get(clazz, id);
    }
} 
```

## 基于通用实体的业务层模板

```
public abstract class EntityBusinessService<T>
implements Serializable
{
    public abstract EntityDAO<T> getDAO();

    //Rest of code.
} 
```

## 一个示例专业实体 DAO

```
@Transactional
@Repository
public class UserDAO
extends EntityDAO<User>
{
} 
```

## 一个示例专业实体业务类

```
@Transactional
@Service
@Scope("prototype")
public class UserBusinessService
extends EntityBusinessService<User>
{
    @Autowired
    UserDAO dao;

    @Override
    public EntityDAO<User> getDAO() 
    {
        return dao;
    }

    //Rest of code
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T11:20:30.440

您可以删除 @autowire 注释并使用 @PostConstruct 和 ServiceLocatorFactoryBean 执行延迟的“自动装配”。
您的 GenericService 将与此类似

```
 public class GenericService<T, T_DAO extends GenericDao<T>>{

        @Autowired
        private DaoLocator daoLocatorFactoryBean;

        //No need to autowried, autowireDao() will do this for you 
        T_DAO dao;

        @SuppressWarnings("unchecked")
        @PostConstruct
        protected void autowireDao(){
        //Read the actual class at run time
        final Type type; 
        type = ((ParameterizedType) getClass().getGenericSuperclass())
                                              .getActualTypeArguments()[1]; 
        //figure out the class of the fully qualified class name
        //this way you can know the bean name to look for
        final String typeClass = type.toString();      
        String daoName = typeClass.substring(typeClass.lastIndexOf('.')+1
                                            ,typeClass.length());
        daoName = Character.toLowerCase(daoName.charAt(0)) + daoName.substring(1);
        this.dao = (T_DAO) daoLocatorFactoryBean.lookup(daoName);
       } 
```

daoLocatorFactoryBean 为您施展魔法。
为了使用它，您需要添加一个类似于下面的接口：

```
 public interface DaoLocator {
        public GenericDao<?> lookup(String serviceName);           
 } 
```

您需要将以下代码段添加到您的 applicationContext.xml

```
 <bean id="daoLocatorFactoryBean" 
      class="org.springframework.beans.factory.config.ServiceLocatorFactoryBean">
      <property name="serviceLocatorInterface"
              value="org.haim.springframwork.stackoverflow.DaoLocator" />
    </bean> 
```

这是一个不错的技巧，它将为您节省一些样板类。
顺便说一句，我不认为这个样板代码是一个大问题，我工作的项目使用 matsev 方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-05T12:48:15.000

为什么需要通用服务？服务类适用于涉及多个实体的特定工作单元。您可以直接将存储库注入控制器。

这是带有构造函数参数的通用存储库的示例，您也可以将每个方法设为通用而不具有构造函数参数。但是每个方法调用都需要类作为参数：

```
public class DomainRepository<T> {

   @Resource(name = "sessionFactory")
   protected SessionFactory sessionFactory;

   public DomainRepository(Class genericType) {
        this.genericType = genericType;
   }

   @Transactional(readOnly = true)
   public T get(final long id) {
       return (T) sessionFactory.getCurrentSession().get(genericType, id);
   } 
```

通用存储库的 bean 定义示例 - 您可以拥有多个不同的 bean，使用不同的构造函数参数。

```
<bean id="tagRepository" class="com.yourcompnay.data.DomainRepository">
        <constructor-arg value="com.yourcompnay.domain.Tag"/>
</bean> 
```

使用资源注解进行 bean 的深度注入

```
@Resource(name = "tagRepository")
private DomainRepository<Tag> tagRepository; 
```

这允许域存储库被子类化为特定的实体/方法，这将允许自动装配：

```
public class PersonRepository extends DomainRepository<Person> {
    public PersonRepository(){
        super(Person.class);
    }
    ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T12:38:38.503

对于这个问题，需要了解什么是自动接线。通俗地说，我们可以说通过自动装配，我们在部署 Web 应用程序时创建了一个对象实例/bean。因此，如果您要在多个具有相同名称的地方声明自动装配，那么现在解决这个问题。然后这个错误来了。自动装配可以通过多种方式完成，因此如果您使用多种类型的自动装配技术，那么也可能会出现此错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-06T20:12:06.627

您应该在扩展这些泛型的类中使用自动装配

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-20T20:12:18.537

**使用 Spring 4 的**完整通用解决方案：

* * *

## 领域类

```
@Component
class Foo{
}

@Component
class Bar{
} 
```

* * *

## DAO 层

```
interface GenericDao<T>{
//list of methods
}

class GenericDaoImpl<T> implements GenericDao<T>{
 @Autowired
 SessionFactory factory;

 private Class<T> domainClass; // Get Class Type of <T>

 public Session getCurrentSession(){
    return factory.getCurrentSession();
 }

 public DaoImpl() {
    this.domainClass = (Class<T>) GenericTypeResolver.resolveTypeArgument(getClass(), DaoImpl.class);
 }
 //implementation of methods
}

interface FooDao extends GenericDao<Foo>{
//Define extra methods if required
}

interface BarDao extends GenericDao<Bar>{
//Define extra methods if required
}

@Repository
class FooDao extends GenericDaoImpl<Foo> implements FooDao{
 //implementation of extra methods
}

@Repository
class BarDao extends GenericDaoImpl<Bar> implements BarDao{
 //implementation of extra methods
} 
```

* * *

## 服务层

```
interface GenericService<T>{
//List of methods
}

class GenericServiceImpl<T> implements GenericService<T>{
 @Autowire
 protected GenericDao<T> dao; //used to access DAO layer
}

class FooService extends GenericService<Foo>{
//Add extra methods of required
}

class BarService extends GenericService<Bar>{
//Add extra methods of required
}

@Service
class FooServiceImpl extends GenericServiceImpl<Foo> implements GenericService<Foo>{
//implementation of extra methods
}

@Service
class BarServiceImpl extends GenericServiceImpl<Bar> implements GenericService<Bar>{
//implementation of extra methods
} 
```

# asp-classic - 没有从 xml 文件中获取属性到 asp 中

> ID：14368342
> 
> 赞同：0
> 
> 时间：2013-01-16T21:38:25.977
> 
> 标签：asp-classic, xml-parsing

我从这个链接得到以下 xml 结果 - [https://api.eveonline.com/eve/CharacterID.xml.aspx?names=BorisKarlov](https://api.eveonline.com/eve/CharacterID.xml.aspx?names=BorisKarlov)

```
<eveapi version="2">
<currentTime>2013-01-16 18:57:38</currentTime>
<result>
<rowset name="characters" key="characterID" columns="name,characterID">
<row name="BorisKarlov" characterID="315363291"/>
</rowset>
</result>
<cachedUntil>2013-02-16 18:57:38</cachedUntil>
</eveapi> 
```

我正在尝试将 characterID 提取到 asp.xml 中。我正在使用以下代码，

```
Set oXML = Server.CreateObject("Msxml2.DOMDocument.6.0")
oXML.LoadXML("https://api.eveonline.com/eve/CharacterID.xml.aspx?names=BorisKarlov")

Set oRoot = oXML.selectSingleNode("//result")

For Each oNode In oRoot.childNodes
  response.Write oNode.Attributes.getNamedItem("characterID").Text
Next 

Set oXML = Nothing 
```

我一直得到的是以下错误：

Microsoft VBScript 运行时错误“800a01a8”

需要对象：'oRoot'

......

我只能假设 Set oRoot = oXML.selectSingleNode("//result") 实际上没有生成任何数据，因此在下一行抛出错误。

任何人都可以阐明我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:06:57.063

你有几个问题。

1.  [loadXML()](http://msdn.microsoft.com/en-us/library/ms754585%28v=vs.85%29.aspx)用于将 XML 块加载为字符串，而不是从远程服务器获取；为此，您需要使用[load()](http://msdn.microsoft.com/en-us/library/ms762722%28v=vs.85%29.aspx)
2.  从服务器加载时，您需要告诉它使用[ServerXMLHTTP 组件](http://support.microsoft.com/kb/281142)，并将 async 设置为 false 以便它等到加载后再执行脚本的其余部分。
3.  当我尝试加载该 XML 时，出现编码错误；您将需要以[一种或另一种方式解决该问题](http://support.microsoft.com/kb/304625)
4.  当我直接从字符串加载 XML 时，它不会解析，因为有一个包含非 XML 内容的脚本元素；需要包含在[CDATA 部分中](http://msdn.microsoft.com/en-us/library/vstudio/ms256076%28v=vs.90%29.aspx)
5.  您的 XPath 查询是 to `//result`，但您实际上需要它`//result/rowset`

解决上述问题 3 和 4 后，此代码应该可以工作：

```
Set oXML = Server.CreateObject("Msxml2.DOMDocument.6.0")
oXML.async = False
oXML.setProperty "ServerHTTPRequest", true

oXML.Load("https://api.eveonline.com/eve/CharacterID.xml.aspx?names=BorisKarlov")

If oXML.parseError.errorCode <> 0 Then
    Response.Write "<p>XML parse error: " & Server.HTMLEncode(oXML.parseError.reason) & "</p>"
Else
    Set oRoot = oXML.selectSingleNode("//result/rowset")

    If oRoot Is Nothing Then
        response.write "Nothing!"
        response.end
    End If

    For Each oNode In oRoot.childNodes
        response.Write oNode.Attributes.getNamedItem("characterID").Text
    Next
End If

Set oXML = Nothing 
```

编辑：为了解决问题#3，奇怪的是#4（不知道为什么！），使用这个片段来加载XML。出于某种原因，我认为上面的代码没有正确处理 gzip 压缩流，但下面的代码可以。

```
Set oXML = Server.CreateObject("Msxml2.DOMDocument.6.0")
Set xh = Server.CreateObject("Msxml2.ServerXMLHTTP.6.0")
xh.open "GET", "https://api.eveonline.com/eve/CharacterID.xml.aspx?names=BorisKarlov", False
xh.send
xml = xh.responseText
oXML.LoadXML xml 
```

# xml - 在shell脚本中将xml文件转换为csv？

> ID：14368347
> 
> 赞同：2
> 
> 时间：2013-01-16T21:38:39.113
> 
> 标签：xml, linux, shell, csv

我正在尝试将 xml 文件转换为 csv 文件。我有一个这样的输入 xml 文件：

```
<Row>
  <Cell>
    <Data Type="String" >START</Data>
  </Cell>
  <Cell>
    <Data Type="DateTime" >2013-01-15T21:30:42</Data>
  </Cell>
  <Cell>
    <Data Type="String" ></Data>
  </Cell>
  <Cell>
    <Data Type="String" >Start 'suite8'</Data>
  </Cell>
  <Cell>
    <Data Type="String" >Test 'suite8' started</Data>
  </Cell>
  <Cell>
    <Data Type="String" ></Data>
  </Cell>
</Row>
<Row/>
<Row>
  <Cell>
    <Data Type="String" >START_TEST_CASE</Data>
  </Cell>
  <Cell>
    <Data Type="DateTime" >2013-01-15T21:30:42</Data>
  </Cell>
  <Cell>
    <Data Type="String" ></Data>
  </Cell>
  <Cell>
    <Data Type="String" >Start 'case1'</Data>
  </Cell>
  <Cell>
    <Data Type="String" >Test Case 'case1' started</Data>
  </Cell>
  <Cell>
    <Data Type="String" >case1</Data>
  </Cell>
</Row> 
```

我对标签`<Data Type="String" >`和`</Data>`. `<Row>`此外，当标签出现时，应该开始一个新行。

我想要的输出 csv 文件应该如下所示：

```
START,2013-01-15T21:30:42,,Test 'suite8' started 

START_TEST_CASE,2013-01-15T21:30:42,,Start 'case1',Test Case 'case1' started,case1 
```

我希望这足够清楚，非常感谢任何帮助:) 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:57:40.977

看看 xslt 样式表和`xsltproc`命令。如果它只是无条件地将所有数据转换为来自单元格标记的逗号分隔值的行，那么它是一个相对简单的样式表。

快速搜索得到以下结果：[XML to CSV Using XSLT](https://stackoverflow.com/questions/365312/xml-to-csv-using-xslt) 对您的 xml 进行一些修改后，它应该可以满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:46:42.980

使用 Bash 解析 XML 之前已在此处解决：

[如何在 Bash 中解析 XML？](https://stackoverflow.com/questions/893585/how-to-parse-xml-in-bash)

也就是说，这似乎是一种痛苦的生活方式。

# php - 要计数的 SQL 查询

> ID：14368358
> 
> 赞同：-4
> 
> 时间：2013-01-16T21:39:12.997
> 
> 标签：php, mysql, sql

我目前正在练习 PHP 和 MySQL，只是为了加强我的技能，因为我是编程新手，我正在尝试不同的东西 :)

我做了一个基本的网站，用户可以在其中输入一个单词，数据库会保存它，只是为了好玩。但不是重复存储同一个词，我希望 SQL 能够让我看到苹果已经存储了 3 次，而不是 [apple,apple,apple] 在我的列中。

**我怎样才能让 SQL 做到这一点？**我只在网上看到过 count() 函数，所以我有点困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T21:43:05.767

您可以：

*   只需选择插入后每个单词的计数：

    ```
    SELECT COUNT(*) FROM my_table WHERE word = 'apple' 
    ```

*   维护表中的计数：

    1.  添加一`count`列，以及`UNIQUE`您的 word 列上的索引：

        ```
        ALTER TABLE my_table
          ADD count INT UNSIGNED DEFAULT 1,
          ADD UNIQUE INDEX (word) 
        ```

    2.  而不是使用`INSERT`，使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)：

        ```
        INSERT INTO my_table
          (word)
        VALUES
          ('apple')
        ON DUPLICATE KEY UPDATE
          count = count + 1 
        ```

    3.  从表中获取计数：

        ```
        SELECT count FROM my_table WHERE word = 'apple' 
        ```

# javascript - 替代现在移除的 $.browser 属性

> ID：14368366
> 
> 赞同：2
> 
> 时间：2013-01-16T21:39:45.473
> 
> 标签：javascript, jquery

> **可能重复：**
> [为什么不推荐使用 $.browser - 什么是更好的选择？](https://stackoverflow.com/questions/12372831/why-is-browser-deprecated-and-what-is-a-better-alternative)

我曾经在我的 jQuery 中使用 $.browser 属性来确定浏览器。我发现它非常有帮助和有用。

我也曾与最新版本的 jQuery 相关联。像这样：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

好吧，显然 jQuery 1.9 还没有出来，对这个属性的支持也被移除了。

有谁知道一个好的 jQuery 插件可以用作替代品？

我知道推荐的方法是使用 $.support，我有时会使用它。

但有时更容易知道某人正在使用什么浏览器。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:47:23.620

浏览器对象只是为您解析`navigator.userAgent`。如果你愿意的话，你总是可以自己解析。

没有什么能阻止您从较旧的 JQuery 版本中提取代码，然后将其放入您自己的 jquery 插件中。

[Jquery 文档](http://api.jquery.com/jQuery.browser/)建议不要使用浏览器对象，甚至声明它容易受到欺骗：

> 因为 $.browser 使用 navigator.userAgent 来确定平台，所以它很容易受到用户的欺骗或浏览器本身的虚假陈述。在可能的情况下，最好完全避免使用特定于浏览器的代码。$.support 属性可用于检测对特定功能的支持，而不是依赖于 $.browser。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:57:43.533

你总是可以找到源头。

*这不是我的代码，这是改编自 jQuery 源代码*

演示：http: [//jsfiddle.net/KKwqU/](http://jsfiddle.net/KKwqU/)

js：

```
function ExtendJqueryBrowser(){

 jQuery.extend({browser:{}});

 function uaMatch(ua){
     ua = ua.toLowerCase();
     var rwebkit = /(webkit)[ \/]([\w.]+)/,
     ropera = /(opera)(?:.*version)?[ \/]([\w.]+)/,
     rmsie = /(msie) ([\w.]+)/, 
     rmozilla = /(mozilla)(?:.*? rv:([\w.]+))?/;
     var match = rwebkit.exec( ua ) || ropera.exec( ua ) || rmsie.exec( ua ) || ua.indexOf("compatible") < 0 && rmozilla.exec( ua ) || [];
     return { browser: match[1] || "", version: match[2] || "0" };
 }

    var browserMatch = uaMatch( navigator.userAgent );
    if ( browserMatch.browser ) {
     jQuery.browser[ browserMatch.browser ] = true;
     jQuery.browser.version = browserMatch.version;
    }

    // Deprecated, use jQuery.browser.webkit instead
    if ( jQuery.browser.webkit ) {
     jQuery.browser.safari = true;
    }
} 
```

# java - 如何将 64 个字符串转换为 256 AES 加密的密钥

> ID：14368374
> 
> 赞同：1
> 
> 时间：2013-01-16T21:40:17.700
> 
> 标签：java, encryption, cryptography, aes

```
public static byte[] decryptByte(byte[] blahh, byte[] keyExample) throws Exception
{
Cipher cipher = null;

try
{
    cipher = Cipher.getInstance("AES/ECB/PKCS5PADDING");
    SecretKeySpec secretKey = new SecretKeySpec(key, "AES");
    cipher.init(Cipher.DECRYPT_MODE, secretKey);

    return cipher.doFinal(Base64.decodeBase64(blah));
}
catch(Exception e)
{
    e.printStackTrace();
}
return null;
}

String keyExample = "99112277445566778899AABBCCDDEEFF0123456789ABCDEF0123456789ABCDEF";
byte[] key = keyExample.getBytes();    
byte[] barrayMessage = {123,45,55,23,64,21,65};    
byte[] result = decryptByte(barrayMessage, key); 
```

抛出异常：`java.security.InvalidKeyException: Invalid AES key length: 64 bytes`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:54:15.880

您应该尝试使用十六进制解码器来解码您的密钥，而不是调用`getBytes()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T12:35:40.753

当您调用`String.getBytes()`（[JDK 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#getBytes%28%29)）时，您使用平台的默认字符集将给定字符串的字符编码为字节序列。

您实际需要做的是将每个十六进制（也是以 16 为基数）数字（由`0`to`9`和`A`to两个字符表示，`F`例如`1A`,`99`等）转换为其对应的数字 ( `byte`) 值，例如`"FF"`->`-1`字节。

示例代码如下：

```
import static java.lang.Character.digit;
...

private static byte[] stringToBytes(String input) {
    int length = input.length();
    byte[] output = new byte[length / 2];

    for (int i = 0; i < length; i += 2) {
        output[i / 2] = (byte) ((digit(input.charAt(i), 16) << 4) | digit(input.charAt(i+1), 16));
    }
    return output;
}

...

String keyExample = "99112277445566778899AABBCCDDEEFF0123456789ABCDEF0123456789ABCDEF";
byte[] key = stringToBytes(keyExample);    
byte[] barrayMessage = {123,45,55,23,64,21,65};    
byte[] result = decryptByte(barrayMessage, key); 
```

请记住，因为我们将每两个字符转换为一个字节，所以建议的方法假设您的输入将有偶数个字符（输入也不是`null`空的）。

如果要在内部使用该方法，则该表单是可以接受的，但是如果您将其作为库的一部分对其他人可见，那么最好进行一些检查并在无效输入上抛出异常。

# azure - Azure CDN 端点，在暂存和生产中具有托管服务

> ID：14368378
> 
> 赞同：3
> 
> 时间：2013-01-16T21:40:44.070
> 
> 标签：azure, cdn

使用映射到托管服务的 Azure CDN 终结点，我如何管理暂存和生产之间的差异？我希望我的登台站点的用户看到从我的登台部署中获取的 CDN 页面，对于生产服务也是如此。但由于我无法为每个部署创建一个端点，我无法看到如何提供正确的内容 - 它们都将使用相同的 xx123456.vo.msecnd.net 地址。（也许可以使用 REST API 创建与特定部署关联的 CDN 端点，[但缺少文档](http://msdn.microsoft.com/en-us/library/windowsazure/ee460786)。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:34:08.703

根据我提交给 Microsoft 的支持票，您不能这样做。CDN 仅适用于生产托管服务。

# c# - Moq 根据调用次数设置函数返回

> ID：14368380
> 
> 赞同：27
> 
> 时间：2013-01-16T21:40:53.850
> 
> 标签：c#, moq

我需要模拟一个接口来调用 MSMQ，有没有办法可以使用 Moq 模拟真实的 MSMQ 场景，队列中有 10 条消息，我调用模拟函数 10 次，我可以获得一个预定义的对象，在第 11 次我应该得到不同的返回值（例如 null）？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-10-09T00:05:26.277

Moq 现在有一个在命名空间中调用的**扩展方法**，这意味着您可以为每个特定调用定义不同的返回值。`SetupSequence()``Moq`

一般的想法是，您只需链接所需的返回值。在下面的示例中，第一个调用将返回**Joe**，第二个调用将返回**Jane**：

```
customerService
.SetupSequence(s => s.GetCustomerName(It.IsAny<int>()))
.Returns("Joe")   //first call
.Returns("Jane"); //second call 
```

更多信息[在这里](http://www.syntaxsuccess.com/viewarticle/define-different-return-values-in-moq)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-16T21:48:06.003

对于这种情况，我有时会使用一个简单的计数器：

```
int callCounter = 0;
var mock = new Mock<IWhatever>();
mock.Setup(a => a.SomeMethod())
    .Returns(() => 
    {
       if (callCounter++ < 10)
       {
           // do something
       }
       else
       {
           // do something else
       }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-31T19:56:57.323

您还可以设置一个单独的函数来执行此操作。如果需要，您甚至可以向函数传递参数：

```
_serviceMock.Setup(x => x.SomeMethod(It.IsAny<String>())).Returns((String param) => getTimesCalled(param)); 
```

# javascript - 为什么 javascript 报告 Motorola Atrix MB860 4G 的 800px 宽度？不应该是540px吗

> ID：14368384
> 
> 赞同：1
> 
> 时间：2013-01-16T21:41:12.017
> 
> 标签：javascript, android, web-applications, motorola, screen-size

对于我的移动网络应用程序，我正在尝试获取设备的屏幕宽度以动态适应视图。

我真的很困惑为什么摩托罗拉 Atrix Atrix MB860 报告的宽度为 800 像素。当我看到这个设备的规格时，它的分辨率是 540x960。为什么在javascript中它报告800px？我使用了这个测试页面： [http ://www.quirksmode.org/m/tests/widthtest.html](http://www.quirksmode.org/m/tests/widthtest.html) ![来自摩托罗拉 atrix 的屏幕截图](../Images/53dec2ebe16315d16df1cae9c63b7a0f.png)

我在几台设备上测试了上面的页面，除了摩托罗拉 atrix 之外，它们都正确地报告了宽度。例如，galaxy s2 报告 480px，nexus 7 报告 1280px

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:05:12.177

这是 Android 2.3 的奇怪行为。我在这里发现：http: [//tripleodeon.com/2011/12/first-understand-your-screen](http://tripleodeon.com/2011/12/first-understand-your-screen)

> 然而，在常规浏览器场景中，Android v2.3 显示出更奇怪的行为。它的 screen.width 总是以 800 开头——这显然是某种虚拟视口，而不是物理屏幕。但是当文档具有 XHTML-MP doctype 或受约束的视口（对于任何 doctype）时，值将在文档加载事件发生时切换为您可能期望的 320 或 480。

window.outerWidth 应该可以解决问题或将视口宽度设置为设备宽度

```
<meta name="viewport" content="width=device-width, user-scalable=no" /> 
```

# javascript - 我如何使用 CocoonJS？

> ID：14368386
> 
> 赞同：1
> 
> 时间：2013-01-16T21:41:21.727
> 
> 标签：javascript, html, cordova, game-engine

我使用 Construct 2 制作了一个游戏，我首先尝试使用 PhoneGap 构建来制作应用程序，但我意识到在 PhoneGap 游戏非常慢。所以听说CocoonJS可以解决这个问题。我尝试通过在 Construct 2 中导出来制作 CocoonJS 游戏，但您需要购买更新。我还尝试导出到 HTML 游戏并上传到 CocoonJS 并在 iPhone 上进行测试，但我得到的只是黑屏。我不太明白游戏需要采用什么格式。需要什么样的结构。如果我遇到过任何情况或知道如何解决，请提供帮助。我不是一个很短的期限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:16:03.743

对于 CocoonJS：

当使用 CocoonJS 选项从 Construct 2 导出时，它会将其打包在 .zip 文件中。因此，请尝试将您的文件放入 .zip 并尝试。如果之后出现黑屏，您可能没有正确打包 .zip，请确保 index.html 没有埋在 .zip 文件的另一个文件夹中。

有关更多信息，请查看： [http ://wiki.ludei.com/cocoonjs:launcherapp](http://wiki.ludei.com/cocoonjs:launcherapp)

# javascript - 骨干比较器不工作

> ID：14368388
> 
> 赞同：0
> 
> 时间：2013-01-16T21:41:30.363
> 
> 标签：javascript, sorting, backbone.js, comparator

我正在开始使用骨干网，并且无法让比较器驱动的排序正常工作。我有一个简单的集合，用于填充页面中的导航菜单。它是从 MongoDB 后端填充的。

```
window.navItem = Backbone.Model.extend({
    initialize: function(){
        return {
            "title": "no title",
            "href": "",
            "class": "",
            "style": "",
            "position": -1,
            "showLog": false,
            "showUnlog": false
        }
    },
});

window.navList = Backbone.Collection.extend({
    url: "../nav",
    initialize: function(){        
    },        
    model: navItem,
    comparator: function(iNavItem){
        return iNavItem.position;
    },
}); 
```

编辑以包含视图代码：只是一个骨架，它具有更改 window.loggedIn 变量状态的逻辑，以根据其 showLog/showUnLog 属性显示/屏蔽视图成员。

```
window.navView = Backbone.View.extend({
    el: $('#navBar'),
    initialize: function(){
        var self = this;
        this.model.bind("reset", this.render, this);
        this.navTemplate = Handlebars.compile($("#navListTemplate").html());
    },
    events: {
        "click #navLogIn"       : "navLogIn",
        "click #navLogOut"      : "navLogOut"
    },
    render: function() {
        this.json = _.where(this.model.toJSON(), 
            {showUnlog:(!window.loggedIn),
            showLog:(window.loggedIn)});
        $(this.el).html( this.navTemplate(this.json));
        return this;
    },
    navLogIn: function() {
        window.loggedIn = !window.loggedIn;
        this.render();
    },
    navLogOut: function() {
        window.loggedIn = !window.loggedIn;
        this.render();          
    }
}); 
```

菜单填充，一切似乎工作正常，除了集合没有按“位置”排序。我有一个菜单项应该位于导航菜单的第二个插槽中，但由于在 MongoDB 中进行编辑，它位于集合中的最后一个。它始终显示在菜单的最后，即使它的“位置”值应该将其排在第二位。

从服务器发送的 JSON 是：

```
[{
    "_id": "50f6fe449f92f91bc1fcbcf6",
    "title": "Account",
    "href": "",
    "htmlId": "",
    "class": "nav-header",
    "style": "",
    "position": 0,
    "showLog": true,
    "showUnlog": true
},
{
    "_id": "50f6fe449f92f91bc1fcbcf7",
    "title": "Log In",
    "href": "#",
    "htmlId": "navLogIn",
    "class": "",
    "style": "",
    "position": 10,
    "showLog": false,
    "showUnlog": true
},
{
    "_id": "50f6fe449f92f91bc1fcbcf8",
    "title": "New Account",
    "href": "#",
    "htmlId": "",
    "class": "",
    "style": "",
    "position": 20,
    "showLog": false,
    "showUnlog": true
}, 
```

剪...

最后一项没有被分类到正确的位置，而是显示在最后......

```
{
    "_id": "50f6fe449f92f91bc1fcbcf9",
    "class": "",
    "href": "#",
    "htmlId": "navLogOut",
    "position": 10,
    "showLog": true,
    "showUnlog": false,
    "style": "",
    "title": "Log Out"
}] 
```

调用 theNavList.pluck('position') （theNavList 是 navList 的实例化副本）给我 [0, 10, 20, 20, 30, 40, 50, 60, 70, 80, 90, 10]。

我尝试在 Firefox 中手动触发集合上的 .sort() 函数，但无论是在显示的菜单中还是在集合本身中，都无法更正集合中的模型顺序。

我觉得我在这里遗漏了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:49:56.267

你只是错过了听。

您可能想查看有关此主题的[讨论：](https://github.com/documentcloud/backbone/issues/41)

简而言之，当用户选择“按 X 排序”时，您可以：

1.  在 Collection 上设置比较器功能
2.  调用集合的排序函数（这将触发重置事件
3.  在您的视图中侦听重置事件，并（清除和）重绘项目

处理第 1 步和第 2 步的另一种方法是使用您自己的方法来调用 Collection 的 sortBy 方法，然后触发您的 View 可以侦听的自定义事件。

但似乎清除和重绘是对视图进行排序并使它们与集合的排序顺序保持同步的最简单（甚至可能是最快）的方法。

# c - 哪些 C 语言的绿色线程库可以与 Haskell 的绿色线程的性能和易用性相匹配？

> ID：14368391
> 
> 赞同：25
> 
> 时间：2013-01-16T21:41:37.360
> 
> 标签：c, networking, haskell, concurrency, green-threads

在 Haskell 中编程时，我习惯于依赖 GHC 的[`forkIO`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Concurrent.html#v:forkIO)可移植轻量级线程。

可以提供相同可扩展性和易用性的 C 等效库是什么？

具体来说，我需要至少以下两个函数的 C 等效项。

```
forkIO     :: IO () -> IO ThreadId
killThread ::             ThreadId -> IO () 
```

我假设对于我的应用程序，如果线程只打开阻塞操作而不是强制挂起就足够了，因为所有线程都非常频繁地阻塞网络 IO，并且我只使用`splice`系统调用来要求 Linux 内核在套接字之间推送数据。

* * *

**更新**

[本文](http://seer.ufrgs.br/rita/article/download/rita_v18_n1_p112/11798)有图表比较

*   [GNU Pth](http://www.gnu.org/software/pth/)
*   [原型线程](http://dunkels.com/adam/pt/)
*   [PM2 包裹](http://runtime.bordeaux.inria.fr/marcel/)

结果有利于 Protothreads。由于我没有使用过任何库，并且可能还有其他库，我很想听听任何使用/开发过此类库的人的意见。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-09T16:16:33.810

libMill 可能是您正在搜索的内容：http: [//libmill.org/](http://libmill.org/)

它以 Go-Lang 通道样式实现用户级线程。

它由 ZeroMQ [http://250bpm.com/](http://250bpm.com/)的创建者、超级聪明的 Martin Sústrik 开发。所以一定不错☺</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T00:59:58.040

我不再有以下代码的注释，也没有任何示例 - 这是一个可移植（伪）线程库，实现为预处理器宏

```
 typedef struct
     {
     unsigned int magic;
     unsigned short ctx;
     unsigned char is_destroyed;
     }
     _run;

     typedef struct
     {
     unsigned int magic;
     unsigned int cnt;
     }
     _sem;

     #define aa_RUNNER_WAITING             0
     #define aa_RUNNER_YIELDED             1
     #define aa_RUNNER_EXITED              2
     #define aa_RUNNER_ENDED               3

     #define aaRunnerCreate(rp)            (rp)->magic='runr'; (rp)->ctx=0; (rp)->is_destroyed=NO
     #define aaRunnerDestroy(rp)           (rp)->is_destroyed=YES

     #define aaRunnerThread(args)          C args
     #define aaRunnerBegin(rp)             { C yflag=YES; if(yflag) {}  switch((rp)->ctx) { case 0:
     #define aaRunnerEnd(rp)               } yflag=NO; if(yflag) {}  aaRunnerCreate(rp); return aa_RUNNER_ENDED; }

     #define aaRunnerWaitUntil(rp,condx)   do  { (rp)->ctx=__LINE__; case __LINE__: if(!(condx))  { return aa_RUNNER_WAITING;  }  } while(0)
     #define aaRunnerWaitWhile(rp,condi)   aaRunnerWaitUntil((rp),!(condi))
     #define aaRunnerWaitThread(rp,thr)    aaRunnerWaitWhile((rp),aaRunnerSchedule(thr))
     #define aaRunnerWaitSpawn(rp,chl,thr) do { aaRunnerCreate((chl));  aaRunnerWaitThread((rp),(thr)); } while(0)

     #define aaRunnerRestart(rp)           do { aaRunnerCreate(rp); return aa_RUNNER_WAITING; } while(0)
     #define aaRunnerExit(rp)              do { aaRunnerCreate(rp); (rp)->magic=0; return aa_RUNNER_EXITED;  } while(0)

     #define aaRunnerSchedule(f)           ((f)<aa_RUNNER_EXITED)
     #define aaRunnerYield(rp)             do { yflag=NO; (rp)->ctx=__LINE__; case __LINE__: if(!yflag||!((rp)->is_destroyed))  { return aa_RUNNER_YIELDED;  }  } while(0)
     #define aaRunnerYieldUntil(rp,condi)  do { yflag=NO; (rp)->ctx=__LINE__; case __LINE__: if(!yflag||!(condi)) { return aa_RUNNER_YIELDED;   }   } while(0)

     #define aaRunnerSemInit(sp,c)         (sp)->magic='runs'; (sp)->cnt=c
     #define aaRunnerSemWait(rp,sp)        do { aaRunnerWaitUntil(rp,(sp)->cnt>0); --(sp)->cnt;  } while(0)
     #define aaRunnerSemSignal(rp,sp)      ++(sp)->cnt 
```

* * *

## 回答 #3

> 赞同：-16
> 
> 时间：2013-01-16T23:15:38.070

使用 POSIX 线程。它们在任何现代实现中都是“绿色的”，不是在“绿色线程”的意义上，而是在轻量级和高效的意义上。没有可移植的方式在普通 C 或 POSIX 减线程之上滚动您自己的线程。正如 OP 所提到的，有一些库以不可移植的方式实现绿色线程/协同例程（通常尽管声称具有可移植性）。

最接近便携的方法是使用`makecontext`/ `swapcontext`，不幸的是这不能很好地执行，因为它必须进行系统调用来保存/恢复“线程”之间的每个切换上的信号掩码。这使得“绿色”线程之间的切换比“真正的”POSIX 线程实现上内核级线程之间的上下文切换更昂贵，并且基本上否定了“绿色线程”的任何声称的好处。

不关心信号掩码的非便携式方法可以使用特定于机器的 asm 完全在用户空间中进行上下文切换，并且理论上比内核级线程执行得更好，但性能将再次飞出窗口您引入 IO，因为即将执行 IO 的线程必须首先进行昂贵的测试以检查操作是否会阻塞，如果是，则将控制权移交给不同的线程。

我坚持我的立场，即“绿色线程”是一个早已过去的想法。这似乎也是 Austin Group（负责 POSIX）的立场，他们删除了`ucontext`POSIX 2008 中的功能，并建议用 POSIX 线程（现在是强制性功能）替换。

# algorithm - 基数排序 vs 计数排序 vs 桶排序。有什么不同？

> ID：14368392
> 
> 赞同：59
> 
> 时间：2013-01-16T21:41:37.380
> 
> 标签：algorithm, sorting, radix-sort, bucket-sort, counting-sort

我正在阅读基数、计数和桶排序的定义，似乎所有这些都只是下面的代码：

```
public static void sort(int[] a, int maxVal){
    int [] bucket=new int[maxVal+1];

    for (int i=0; i<bucket.length; i++){
        bucket[i]=0;
    }

    for (int i=0; i<a.length; i++){
        bucket[a[i]]++;
    }

    int outPos=0;
    for (int i=0; i<bucket.length; i++){
        for (int j=0; j<bucket[i]; j++){
            a[outPos++]=i;
        }
    }
} 
```

我知道我不可能是对的，所以我错过了什么？如果您认为这有助于用 Java 或 C 进行解释，请显示代码。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-26T19:58:06.500

让我们从用 C 重写您的代码开始，因为 C 对我来说更容易解释。因此，让我们用一些注释来回忆您的代码：

```
int
counting_sort(int a[], int a_len, int maxVal)
{
  int i, j, outPos = 0;
  int bucket_len = maxVal+1;
  int bucket[bucket_len]; /* simple bucket structure */

  memset(bucket, 0, sizeof(int) * bucket_len);

  /* one loop bucket processing */
  for (i = 0; i < a_len; i++)
    {
      bucket[a[i]]++; /* simple work with buckets */
    }

  for (i=0; i < bucket_len; i++)
    {
      for (j = 0; j < bucket[i]; j++)
        {
          a[outPos++] = i;
        }
    }

  return 0;
} 
```

现在让我们向这个人提供一些真实的数据：

[126、348、343、432、316、171、556、223、670、201]

在输出上我们有

[126、171、201、223、316、343、348、432、556、670]

似乎一切正常？还没有。让我们看看maxVal。它是 670（！）为了​​在这里对 10 个元素的数组进行排序，我们使用了 670 个元素的数组，主要是零。非常。为了处理这个计数排序问题，我们有两种可能的泛化方式：

1）第一种方式——按数字排序。这称为基数排序。让我们展示一些代码，尝试使其尽可能接近计数排序代码。再看评论：

```
int
radix_sort(int a[], int a_len, int ndigits)
{
  int i;
  int b[a_len];
  int expn = 1;

  /* additional loop for digits */
  for (i = 0; i != ndigits; ++i)
    {
      int j;
      int bucket[10] = {0}; /* still simple buckets */

      /* bucket processing becomes tricky */
      for (j = 0; j != a_len; ++j)
        bucket[ a[j] / expn % 10 ]++;

      for (j = 1; j != 10; ++j)
        bucket[j] += bucket[j - 1];

      for (j = a_len - 1; j >= 0; --j)
        b[--bucket[a[j] / expn % 10]] = a[j];

      for (j = 0; j != a_len; ++j)
        a[j] = b[j];

      expn *= 10;
    }
} 
```

我们用 N 附近的乘数换取内存。利润？也许。但在某些情况下，N 附近的乘数非常重要。程序、一天工作和一周工作与用户视图有很大不同，即使两者分别工作 1*O(N) 和 7*O(N)。所以我们要进行第二次概括：

2）第二种方式——让桶更复杂。这称为桶排序。

让我们再次从一些代码开始。在哲学论证之前，我更喜欢更多的代码。还是看评论吧，都是必不可少的。

```
int
bucket_sort(int a[], int a_len, int maxVal)
{
  int i, aidx;

  typedef struct tag_list {
    int elem;
    struct tag_list *next;
  } list_t, *list_p;

  list_p bucket[10] = {0}; /* sophisticated buckets */

  /* one loop simple processing with one more inner loop 
    to get sorted buckets (insert-sort on lists, Cormen-style) */
  for (i = 0; i != a_len; ++i)
    {
      int bnum = (10 * a[i]) / maxVal;
      list_p bptr = bucket[bnum];
      list_p belem = malloc(sizeof(list_t));
      belem->elem = a[i];
      if (bptr == 0)
        {
          bucket[bnum] = belem;
          belem->next = 0;
          continue;
        }
      else if (a[i] <= bptr->elem)
        {
          belem->next = bptr;
          bucket[bnum] = belem;
          continue;
        }
      else
        {
          while (bptr != 0)
            {
              if ((bptr->elem <= a[i]) && ((bptr->next == 0) || (bptr->next->elem > a[i])))
                {
                  belem->next = bptr->next;
                  bptr->next = belem;
                  break;
                }
               bptr = bptr->next;
            }
         }
    }

  /* one loop (looks as two) to get all back */
  aidx = 0;

  for (i = 0; i != 10; ++i)
    {
      list_p bptr = bucket[i];
      while (bptr)
        {
          list_p optr = bptr;
          a[aidx] = bptr->elem;
          aidx += 1;
          bptr = bptr->next;
          free(optr);
        }
    }

  return 0;
} 
```

那么我们这里有什么？我们正在交易一些复杂的存储桶结构和动态分配内存的要求，但赢得了静态内存和平均接近 N 的乘数。

现在让我们回忆一下我们在代码中看到的内容：

1.  计数排序——简单的桶、简单的处理、内存开销
2.  基数排序——简单的桶、复杂的处理、速度开销（并且仍然需要额外的静态内存）
3.  桶排序——复杂的桶，处理简单，需要动态内存，平均不错

因此，基数和桶排序是计数排序的两个有用的概括。它们与计数排序和彼此有很多共同点，但在每种情况下，我们都在失去一些东西并赢得一些东西。软件工程是关于这些机会之间的平衡。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-17T10:48:47.480

> 基数排序 vs 计数排序 vs 桶排序。有什么不同？

桶排序将要排序的键或元素放入桶中。它们如何放置在存储桶中是任意的，可以是复合键的一部分，也可以是您喜欢的任何分布。各个桶可能需要进一步分类。

在内存中排序比在磁盘上排序更快。但是，如果您的数据超出内存容量，则需要另一种选择。您可以做的是桶排序，其中桶足够小以适合内存。即每个桶中有大量的条目。这些您可以单独快速排序。

基数排序是一种特定类型的桶排序。它从前 n 位或 n 位开始，并且可以使用基数排序等对这些桶进行排序，直到对每个条目进行排序。

计数排序就像使用基数排序一样，只是您使用的是整个值。它不是记录每个对象，而是为每个对象都有一个存储桶，它只计算出现的次数。当您有有限数量的可能键并且您有许多重复项时，这很有效。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-17T15:26:42.707

根据 Geekviewpoint：

基数：[http ://www.geekviewpoint.com/java/sorting/radixsort](http://www.geekviewpoint.com/java/sorting/radixsort)

> 基数排序与计数排序和桶排序一样，是一种基于整数的算法（即假设输入数组的值是整数）。因此，从理论上讲，基数排序是最快的排序算法之一。基数排序的特殊区别在于它为每个密码（即数字）创建一个桶；因此，类似于桶排序，基数排序中的每个桶都必须是一个可增长的列表，可以接受不同的键。

桶：[http ://www.geekviewpoint.com/java/sorting/bucketsort](http://www.geekviewpoint.com/java/sorting/bucketsort)

> 考虑到计数排序合理地说是它的上限，桶排序实际上非常好。而且计数排序非常快。桶排序的特殊区别在于它使用哈希函数对输入数组的键进行分区，以便多个键可以哈希到同一个桶。因此，每个桶必须有效地是一个可增长的列表；类似于基数排序。

计数：[http ://www.geekviewpoint.com/java/sorting/countingsort](http://www.geekviewpoint.com/java/sorting/countingsort)

> 计数排序的特殊区别在于它为每个值创建一个桶，并在每个桶中保留一个计数器。然后每次在输入集合中遇到一个值时，相应的计数器就会递增。因为计数排序为每个值创建一个桶，所以一个强加的限制是输入数组中的最大值是事先知道的。

他们在他们的网站上更详细地解释了它。

编辑：

*   如果您使用的是基数排序并且您的数字是十进制的，那么您需要 10 个存储桶，每个存储桶用于 0 到 9 的每个数字。

*   如果您使用计数排序，那么您需要为输入中的每个唯一值使用一个存储桶（实际上，您需要为每个介于 0 和最大值之间的值使用一个存储桶）。

*   如果您使用的是桶排序，您不知道您将使用多少桶。无论您使用什么散列函数都将决定存储桶的数量。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-16T22:05:57.247

您的代码是计数排序的简单变体，没有数据，只有键。

基数排序就是基于这种方法的排序。计数排序的问题是内存要求：`int [] bucket=new int[maxVal+1];`. 基数排序解决了这个问题。这个想法是多次使用计数排序，首先是较低的数字，然后是较高的数字。例如，要对 32 位整数进行排序，您可以使用：

```
sort(a, 65535) using lower half as key
sort(a, 65535) using higher half as key 
```

它可以工作，因为计数排序是稳定的 - 它使用相同的键保持数据的顺序。这就像在电子表格中排序：`sort by B; sort by A`为您提供按 A 排序的元素，当 As 相等时按 B 排序。

桶排序是计数排序的推广。您可以使用它从一些可预测的概率分布（例如 uniform `(0,1)`）中对实数进行排序。这个想法是使用计数排序（使用`floor(x*N_BUCKETS)`作为键），然后只对每个桶进行独立排序。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-23T13:45:07.803

首先让我们看看基数排序和桶排序之间的区别，因为这通常是一个令人困惑的事情，因为想法似乎相同。然后我们看一下计数排序，它就像这两个的主要版本，计数排序的哪些问题导致使用其他两个

Radix 和 Bucket 排序的初始传递是相同的。元素放在“Buckets”中，即 0-10、11-20、...等，取决于最大编号中的位数，即基数。然而，在下一轮中，桶排序将这些“桶”排序并将它们附加到一个数组中。但是，基数排序方法在不进一步排序的情况下附加存储桶，并根据数字的第二个数字（十位）“重新存储桶”。因此，桶排序对“密集”数组更有效，而基数排序可以很好地处理稀疏数组。好吧，把桶排序想象成这样

假设您有一个包含 n 条记录的列表，每条记录的键都是从 1 到 k 的数字（我们稍微概括一下问题，因此 k 不一定等于 n）。

我们可以通过创建一个链表数组来解决这个问题。我们将每个输入记录移动到数组适当位置的列表中，然后按顺序将所有列表连接在一起。

```
 bucket sort(L)
    {
    list Y[k+1]
    for (i = 0; i <= k; i++) Y[i] = empty
    while L nonempty
    {
        let X = first record in L
        move X to Y[key(X)]
    }
    for (i = 0; i <= k; i++)
    concatenate Y[i] onto end of L
    } 
```

k很大时怎么办？想想数字 x = a + 10 b + 100 c + 1000 d + ... 的十进制表示，其中 a、b、c 等都在 0..9 范围内。这些数字很容易小到可以进行桶排序。

```
 radix sort(L):
    {
    bucket sort by a
    bucket sort by b
    bucket sort by c
    ...
    } 
```

或更简单地说

```
radix sort(L):
{
while (some key is nonzero)
{
    bucket sort(keys mod 10)
    keys = keys / 10
}
} 
```

为什么我们先做最不重要的数字？就此而言，为什么我们要做不止一个桶排序，因为最后一个是把所有东西都放在适当位置的那个？回答：如果我们尝试手动排序，我们倾向于做一些不同的事情：首先进行桶排序，然后递归地对共享第一个数字的值进行排序。这可行，但效率较低，因为它将问题分解为许多子问题。相比之下，基数排序永远不会拆分列表。它只是将桶排序多次应用于同一个列表。在基数排序中，桶排序的最后一次是对整体顺序影响最大的一次。所以我们希望它是使用最重要数字的那个。之前的桶排序通过仅用于处理两个项目在最后一次通过时具有相同键（mod 10）的情况。

现在我们已经解决了所有计数排序的问题，它保留了一个包含 k 个元素的辅助数组 C，所有元素都初始化为 0。

> 我们遍历输入数组 A，对于我们看到的 A 中的每个元素 i，我们将 C[i] 增加 1。在遍历 A 的 n 个元素并更新 C 之后，C 的索引 j 处的值对应j 在 A 中出现了多少次。这一步需要 O(n) 时间来迭代 A。一旦我们有了 C，我们就可以通过迭代 C 并将每个元素 ja 插入 C[j] 来构造 A 的排序版本次进入一个新列表（或 A 本身）。遍历 C 需要 O(k) 时间。最终结果是排序的 A，总共需要 O(n + k) 时间。

计数排序的缺点是如果元素的范围太大，它可能不太实用。例如，如果我们需要排序的 n 个元素的范围是从 1 到 n 3 ，那么简单地创建辅助数组 C 将花费 O(n^3) 时间，并且计数排序会渐近地比插入排序更差。这也占用了 O(n^3) 空间，这比我们迄今为止学习的任何其他排序算法使用的任何空间都要大得多。基数排序通过逐位排序元素来帮助解决这个问题

注意：答案和进一步阅读的来源：

> [http://htmltolatex.sourceforge.net/samples/sample4.html](http://htmltolatex.sourceforge.net/samples/sample4.html)
> 
> 第一个答案：[桶排序和基数排序有什么区别？](https://stackoverflow.com/questions/4461737/what-is-the-difference-between-bucket-sort-and-radix-sort)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-23T13:10:37.703

基数排序使用一种计数排序形式作为子程序（好的，可以使用，但最常见的是计数排序）。

正如 kasavbere 所回答的那样，计数排序是一种特殊形式的桶排序。

Bucketsort 将键分成桶，然后对桶进行单独排序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-16T22:01:22.967

使用计数排序对数组进行排序：

```
#define MAX_INPUT 1000

void sort(int arr[100], int n)
{
    static int hash[MAX_INPUT], i, j;

    memset(hash, 0, sizeof hash);

    for (i = 0; i < n; ++i) ++hash[arr[i]];

    j = 0;
    for (i = 0; i < MAX_INPUT; ++i)
        while (hash[i]--)
           arr[j++] = i;
} 
```

这只是`O(MAX_INPUT)`，因此按线性时间排序。对于桶排序，这是非常不同的。这是[一个实现](http://users.dcc.uchile.cl/~rbaeza/handbook/algs/4/423.sort.c.html)

# c++ - 具有新实例参数的 C++ 11 委托构造函数？

> ID：14368393
> 
> 赞同：0
> 
> 时间：2013-01-16T21:41:38.980
> 
> 标签：c++, c++11, constructor, visual-studio-2012, delegation

使用 Visual Studio Nov 2012 CTP C++ Compiler 编译此语法时遇到问题……只是想确保我没有遗漏一些明显的东西。

谢谢！

编辑：删除标题使其更简单。

```
class Location
{
public:
    Location();
};

class Shape
{
public:
    Shape();
    Shape(Location location);
};

// Doing this by pointer works ...
// Shape::Shape(Location* location){}
// Shape::Shape() : Shape(new Location()){}

Shape::Shape(Location location)
{
}

Shape::Shape()
    : Shape(Location())
    // error C2143: syntax error: missing ';' before ':'
{
    // int x = 0;
    // (void) x;  // Added these two lines in some cases to get it to compile.
    // These two lines do nothing, but get around a compiler issue.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:14:46.867

```
// .h Simplification
class Location
{
public:
  Location() {}
  Location(Location const& other) {}
};

class Shape
{
  Shape();
  Shape(Location location);
};

// How about by value or reference?
Shape::Shape(Location location)
{
}

Shape::Shape(void)
  : Shape(Location()) // error C1001: An internal error has occurred in the compiler.
{
}

int main() {} 
```

上述代码在[gcc 4.7.2中编译运行](http://liveworkspace.org/code/1SKOQJ%241)

我必须对您的代码进行一些更改才能使其编译。在简化事情时，尽量保持简化的代码编译。 [http://sscce.org/](http://sscce.org/)

# python - 在 Django 中将通用元素的名称转换为 URL

> ID：14368395
> 
> 赞同：0
> 
> 时间：2013-01-16T21:41:48.907
> 
> 标签：python, django, urlencode

我的目标是从产品名称开始获取产品页面的 URL。

例如

从

```
"My Product 2.0" 
```

我想得到

```
 www.example.com/my-product-2-0/ 
```

从**我的产品 2.0** --> **my-product-2-0**

如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:17:26.017

Django 有一个 slugify 函数来解决这个问题：

```
from django.template.defaultfilters import slugify
slugify("My Product 2.0")   # 'my-product-20' 
```

请注意，在当前的开发版本（即将是 1.5）中，这已移至`django.utils.text`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:52:28.680

尝试使用正则表达式：

```
import re
string="My Product 2.0"
rs=re.compile(r"\W+")
string=re.sub(rs, "-", string)
print string 
```

您可能需要稍微使用正则表达式，具体取决于您希望用“-”替换的内容。

# python - 关于显示后台线程经过时间的 GUI 计时器的建议？

> ID：14368400
> 
> 赞同：3
> 
> 时间：2013-01-16T21:41:59.933
> 
> 标签：python, qt, pyqt, qthread, qtimer

**问题**

我有一个 PyQt GUI，用户在其中按下一个按钮来启动一个后台线程（`workerThread`，它是 的子类`QThread`）。我想要一个计时器显示（以 a 的形式`QLabel`）来显示自开始以来已经过去了多少时间`workerThread`，我希望这个计时器在`workerThread`退出后立即停止。

**可能的解决方案**

我考虑过创建另一个`timerThread`独立`QTimer`线程`QLabel`（这`timerThread`将在收到来自 的终止信号后立即退出`workerThread`。

但是，我必须同时开始`timerThread`，`WorkerThread`而且我不知道该怎么做。

**问题**

有没有更简单的方法来做到这一点？甚至是`QTimer`正确的方法开始吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T22:36:51.290

这是执行此操作的一种方法。在此示例中，在调用其方法时将其作为子进程`myThread`启动。它的信号连接到s信号。将每秒检查一次并在以下情况下发出信号：`timerThread``run``timeElapsed``timerThread``timeElapsed``timerThread``while``parent` `isRunning``timeElapsed``True`

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import time

from PyQt4 import QtCore, QtGui

class timerThread(QtCore.QThread):
    timeElapsed = QtCore.pyqtSignal(int)

    def __init__(self, parent=None):
        super(timerThread, self).__init__(parent)
        self.timeStart = None

    def start(self, timeStart):
        self.timeStart = timeStart

        return super(timerThread, self).start()

    def run(self):
        while self.parent().isRunning():
            self.timeElapsed.emit(time.time() - self.timeStart)
            time.sleep(1)

class myThread(QtCore.QThread):
    timeElapsed = QtCore.pyqtSignal(int)
    def __init__(self, parent=None):
        super(myThread, self).__init__(parent)

        self.timerThread = timerThread(self)
        self.timerThread.timeElapsed.connect(self.timeElapsed.emit)

    def run(self):
        self.timerThread.start(time.time())

        iterations = 3
        while iterations:
            print "Running {0}".format(self.__class__.__name__)
            iterations -= 1
            time.sleep(2)        

class myWindow(QtGui.QWidget):    
    def __init__(self):
        super(myWindow, self).__init__() 

        self.button = QtGui.QPushButton(self)
        self.button.setText("Start Threading!")
        self.button.clicked.connect(self.on_button_clicked)

        self.label = QtGui.QLabel(self)

        self.layout = QtGui.QVBoxLayout(self)
        self.layout.addWidget(self.button)
        self.layout.addWidget(self.label)

        self.myThread = myThread(self)
        self.myThread.timeElapsed.connect(self.on_myThread_timeElapsed)
        self.myThread.finished.connect(self.on_myThread_finished)

    @QtCore.pyqtSlot()
    def on_button_clicked(self):
        self.myThread.start()

    @QtCore.pyqtSlot(int)
    def on_myThread_timeElapsed(self, seconds):
        self.label.setText("Time Elapsed: {0}".format(seconds))

    @QtCore.pyqtSlot()
    def on_myThread_finished(self):
        print "Done"

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# windows - 如何更改 cabal 配置文件的路径？

> ID：14368401
> 
> 赞同：8
> 
> 时间：2013-01-16T21:42:02.657
> 
> 标签：windows, haskell, path, cabal, haskell-platform

我在 Win7 上使用 HaskellPlatform-2012.4.0.0。它安装为便携式。路径是通过 .bat 文件管理的，因此`ghci`可以`ghc`正常工作。
但是 cabal 将它自己安装在 C:\Users\name\AppData\Roaming\cabal\
以规避我所做的：

```
cabal update
edit config file
delete all files except config 
```

改变的路径：

```
remote-repo-cache: d:\h1\cabal\packages 
world-file: d:\h1\cabal\world
build-summary: d:\h1\cabal\logs\build.log 
```

它可以工作，但远非真正便携。

Cabal 配置是更大的问题。似乎它必须留在 C:\Users\name\AppData\Roaming\cabal 中，这根本不可移植。
第一轮`cabal update`说`Config file path source is default config file.`

问题：
1\. 默认配置文件在哪里？
2.remote-repo-cache、world-file等路径可以是相对的吗？
3\. 有没有办法设置默认的 cabal 路径，所以它永远不会去 C:\Users\name\AppData\Roaming\cabal

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T23:45:44.327

使用以下命令运行 cabal：

```
cabal --config-file="path/to/config" 
```

# c# - 从文件中解码大型 XML 响应

> ID：14368407
> 
> 赞同：1
> 
> 时间：2013-01-16T21:42:36.550
> 
> 标签：c#, xml

我有一个大 (2+ GB) XML 文件，其内容如下所示：

```
< rootNode>
   <content>
      & lt;node& gt;test& lt;/node& gt;
   </content>
< /rootNode> 
```

该节点包含我需要的整个 xml 结构，但它是一个编码的 xml 字符串。

当使用 XmlReader 循环时，“<node>test</node>” 作为字符串返回，而不是我想要迭代的单个 xml 元素。

是否有解码节点的有效方法？所以我只需要遍历文件一次？

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:47:23.383

正确，您必须至少遍历文件一次才能解码文件。

我推荐[HtmlDecode](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmldecode.aspx)。

# android - 找不到 Google Maps API v2 API 密钥；使用 ABS

> ID：14368409
> 
> 赞同：1
> 
> 时间：2013-01-16T21:42:49.243
> 
> 标签：android, actionbarsherlock, google-maps-api-2

我一直在尝试将应用程序从旧的 Google Maps API 转换为新的 Google Maps API v2，并且遇到了几个令人沮丧的障碍。我目前试图弄清楚的错误是：

```
01-16 14:59:38.414: E/AndroidRuntime(29059): Caused by: java.lang.RuntimeException: API key not found.  Check that <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="your API key"/> is in the <application> element of AndroidManifest.xml
01-16 14:59:38.414: E/AndroidRuntime(29059):    at maps.y.z.a(Unknown Source)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at maps.y.z.a(Unknown Source)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at maps.y.z.a(Unknown Source)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at maps.y.ae.a(Unknown Source)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at maps.y.bu.a(Unknown Source)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at maps.y.p.onCreateView(Unknown Source)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:107)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at android.os.Binder.transact(Binder.java:279)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onCreateView(Unknown Source)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at com.google.android.gms.maps.SupportMapFragment$a.onCreateView(Unknown Source)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at com.google.android.gms.internal.d$4.a(Unknown Source)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at com.google.android.gms.internal.d.a(Unknown Source)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at com.google.android.gms.internal.d.onCreateView(Unknown Source)
01-16 14:59:38.414: E/AndroidRuntime(29059):    at com.google.android.gms.maps.SupportMapFragment.onCreateView(Unknown Source) 
```

这让我感到困惑，因为我的清单中显然有一个格式正确的“元数据”块。这是我的清单的相关部分：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<permission
    android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:allowBackup="false"
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/Theme.Styled" >
    <meta-data
        android:name="com.google.android.maps.API_KEY"
        android:value="my api key" />
    (activities and stuff)
</application> 
```

我已经检查并仔细检查了我正在使用的 API 密钥是在 Google 控制台中生成的那个，我已经检查了“Google Maps Android v2”服务，并且我使用了正确的 SHA-1我的调试密钥。

这让我认为这可能与 ABS 与新的 API v2 不兼容有关。这似乎不太可能，因为我使用 ABS 创建了一个没有遇到此错误的测试项目。这是我的活动的 .xml 布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <fragment
        android:id="@+id/map_fragment"
        android:name="(mypackage).MapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</RelativeLayout> 
```

我引用的包中的 MapFragment 是一个自定义片段，如以下问题所述构造： [Using ActionBarSherlock With the New SupportMapFragment](https://stackoverflow.com/questions/13721929/using-actionbarsherlock-with-the-new-supportmapfragment)。正如我之前提到的，我使用这种方法创建了一个测试项目，没有遇到上述错误。

我在我的项目中将 ABS 4.2.0 和 google_play_services_lib 作为库引用。我的 libs/ 文件夹以及我的 Java 构建路径中也有 google_play_services.jar 作为外部 JAR。

我一直在寻找解决方案，但遇到此错误的每个人都只是放错了他们的“元数据”块或使用了错误的 SHA-1 哈希作为他们的调试密钥。这似乎不是我的情况。有没有人知道什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:10:27.630

检查

```
<meta-data
> android:name="com.google.android.maps.v2.API_KEY" android:value="your
> API key"/> 
```

在 AndroidManifest.xml 的元素中

**改变这个：**

```
<meta-data
        android:name="**com.google.android.maps.API_KEY**"
        android:value="my api key" /> 
```

**对此：**

```
<meta-data
        android:name="**com.google.android.maps.v2.API_KEY**"
        android:value="my api key" /> 
```

希望能帮助到你。

# ruby-on-rails - Rails cancan（带权重的角色）

> ID：14368412
> 
> 赞同：0
> 
> 时间：2013-01-16T21:42:54.380
> 
> 标签：ruby-on-rails, cancan

我对 CanCan 有以下疑问：

如果我有不同的用户角色并且每个人都有一个权重（他们的 id），我是否也可以拥有不同的资源和他们的相应角色？

只有当用户的权重大于或等于资源权重时，是否可以授予对每个资源的访问权限？例如：

## 角色：

*   管理员 => 3
*   作家 => 2
*   读者 => 1
*   基本 => 0

## 问题 1 的示例：

资源：

Resouce1 具有角色 Writer

然后，只有具有 Admin 或 Writer 角色的用户才能访问

## 问题 2 的示例：

资源2 => 0

所有用户都可以访问 Resource2

规则（如果 current_user.role_id < resource.role_id）看不到资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:46:11.613

当然可以。Cancan 可以很容易地配置来做到这一点。我推荐 Ryan Bates 的 Railscast [http://railscasts.com/episodes/192-authorization-with-cancan](http://railscasts.com/episodes/192-authorization-with-cancan)

这实际上是他的宝石。但是他很好地解释了它，并为您想要做的事情提供了一个良好的开端。

```
class Ability
  include CanCan::Ability

  def initialize(user)
    can :update, Resource do |r|
      r.resource_weight <= user.role_weight
  end
end 
```

编辑：附件是一些基本的想法代码。没有功能但很明显，但会给你一个想法。铁轨演员将有助于理解它。

# linux - 当另一个任务完成时Linux计划任务

> ID：14368420
> 
> 赞同：0
> 
> 时间：2013-01-16T21:43:27.183
> 
> 标签：linux, process, cron, task, schedule

我有一个当前正在运行的任务/进程。我想安排另一个任务在第一个任务完成时开始。

我怎么能在 linux 中做到这一点？

（我不能停止第一个，并创建一个脚本来开始一个接一个的任务）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:49:49.443

有点微薄的规格，但沿着线的东西

```
watch -n 1 'pgrep task1 || task2' 
```

可能会完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:15:24.377

你要**等**。

手册第 2 节中的系统调用，它的变体之一，`waitpid`或者专门为此目的设计的内置 shell。

* * *

内置的 shell 更自然一点，因为这两个进程都是 sell 的子进程，所以你编写如下脚本：

```
#!/bin/sh
command1 arguments &
wait 
command2 args 
```

* * *

要使用系统调用，您必须编写一个程序，在`wait`执行第二个程序之前，在子进程中启动第一个命令然后 s。

手册页`wait (2)`说：

> **wait() 和 waitpid()**
> wait() 系统调用暂停当前进程的执行，直到其子进程之一终止。调用 wait(&status) 等价于：
> 
> ```
>  waitpid(-1, &status, 0); 
> ```
> 
> waitpid() 系统调用暂停当前进程的执行，直到 pid 参数指定的子进程改变状态。

# asp.net-mvc-4 - 子文件夹中的控制器和视图

> ID：14368427
> 
> 赞同：4
> 
> 时间：2013-01-16T21:43:51.277
> 
> 标签：asp.net-mvc-4, directory-structure

我正在使用 ASP.NET MVC 4 开发一个 Web 应用程序，我想按以下方式组织我的控制器和视图：

```
/Controller    
    /Admin
        /LessonController.cs
        /ExerciseController.cs    
    HomeController.cs

/Views
        /Admin
              /Lesson
                   /Index.cshtml
        /Home
              /Index.cshtml 
```

我尝试了以下代码来注册路由，但它不起作用：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );

            routes.MapRoute(
                name: "Admin",
                url: "Admin/{controller}/action/{id}",
                defaults: new { controller = "Lesson", action = "Index", id = UrlParameter.Optional }
                );

        } 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T21:47:47.727

您可以使用[`areas`](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)，它们是为这种类型的隔离而设计的，并且会给您某种开箱即用的分离：

```
/Areas
     /Admin
         /Controllers
             /LessonController.cs
             /ExerciseController.cs    
         /Views
             /Lesson
                 /Index.cshtml
             /Exercise
                 /Index.cshtml
/Controllers    
    /HomeController.cs
/Views
    /Home
        /Index.cshtml 
```

如果您不想遵循 ASP.NET MVC 支持的标准约定，则必须[`write and register a custom view engine`](https://stackoverflow.com/a/6184093/29407).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T11:42:27.553

交换您的路线，使管理员路线高于默认路线，然后重新启动应用程序。

# image - 如何在 Photoshop 中将两个独特的图像系列批量组合成一个并排的图像？

> ID：14368429
> 
> 赞同：0
> 
> 时间：2013-01-16T21:43:52.410
> 
> 标签：image, batch-file, merge, photoshop, composite

我需要将两个系列的图像（都具有相同的分辨率，保存为 JPG 文件）合并到一个 JPG 文件中，并且图像彼此并排。我曾尝试使用 Photoshop CS6 操作来执行此操作，但无济于事……我在互联网上搜索了可能的解决方案，但事实证明，编写脚本来执行此类功能需要编程知识。我想在以下方面获得任何帮助：

我的文件名是这样的：

系列一：bone00001.jpg、bone00002.jpg ... bone00060.jpg 系列二：st00001.jpg、st00002.jpg ... st00060.jpg

我希望它们并排组合，以便“骨骼”系列在左侧，“st”系列在右侧，最终系列导出为 done00001.jpg ... done00060.jpg

任何人都可以帮助我处理这个 Photoshop 脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:27:33.893

Adam D 是对的 - 你最好在[Adob​​e 论坛上提问](http://forums.adobe.com/community/photoshop/photoshop_scripting)。[但幸运的是，您的请求与不久前提出的问题](https://stackoverflow.com/questions/13530943/merging-files-together-side-by-side-in-folder-photoshop-scripts)非常相似。剧本很粗糙；但它会做你想做的事：图像需要相同大小。如果骨骼图像比扫描图像小，它看起来会很乱并且无法工作。

将其保存为 .jsx 文件。它可以在 PS 中从文件 > 脚本菜单访问。

加载其中一个骨骼图像，运行脚本 - 然后它将找到匹配的扫描图像并将它们并排放置并将它们保存为 bone_XXXX_done.jpg（其中 XXXX 是数字）

```
 var srcDoc = app.activeDocument;

// call the current document
var srcDoc = app.activeDocument;

// set original width and height
var imageW = srcDoc.width.value;
var imageH = srcDoc.height.value;

// get the info out of the source doc
var fileName = srcDoc.name;
var docName = fileName.substring(0,fileName.length -4);
var filePath = srcDoc.path.toString();
var fileExt = fileName.substring(fileName.length -4, fileName.length);

var nameCheck = fileName.substring(0,fileName.indexOf("bone"));

if (nameCheck <1)
{
   var fileNum = fileName.substring(4,fileName.length -4);
   // no underscore so we need to open it's namesake
   // alert(nameCheck)
   var filePair = filePath + "/" + "st" + fileNum + fileExt;
   openThisFile(filePair)
   activeDocument.selection.selectAll()
   activeDocument.selection.copy();
   app.activeDocument.close(SaveOptions.DONOTSAVECHANGES);
   app.activeDocument = srcDoc;
   activeDocument.resizeCanvas(imageW *2, imageH, AnchorPosition.MIDDLELEFT);
   selectRect(0, imageW, imageW*2, imageH)
   activeDocument.paste()
   activeDocument.flatten();
   var newName = filePath + "/" + docName + "_done" + fileExt
   saveMe(newName)
}
    else
    {
      app.activeDocument.close(SaveOptions.DONOTSAVECHANGES);
    }

function openThisFile(masterFileNameAndPath)
{
 var fileRef = new File(masterFileNameAndPath)
 if (fileRef.exists)
 //open that doc
 {
    app.open(fileRef);
 }
 else
 {
    alert("error opening " + masterFileNameAndPath)
 }
}

function selectRect(top, left, right, bottom)
{
    srcDoc.selection.deselect()
    // =======================================================
    var id1 = charIDToTypeID( "setd" );
    var desc1 = new ActionDescriptor();
    var id2 = charIDToTypeID( "null" );
    var ref1 = new ActionReference();
    var id3 = charIDToTypeID( "Chnl" );
    var id4 = charIDToTypeID( "fsel" );
    ref1.putProperty( id3, id4 );
    desc1.putReference( id2, ref1 );
    var id5 = charIDToTypeID( "T   " );
    var desc2 = new ActionDescriptor();
    var id6 = charIDToTypeID( "Top " );
    var id7 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id6, id7, top );
    var id8 = charIDToTypeID( "Left" );
    var id9 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id8, id9, left );
    var id10 = charIDToTypeID( "Btom" );
    var id11 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id10, id11, bottom );
    var id12 = charIDToTypeID( "Rght" );
    var id13 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id12, id13, right );
    var id16 = charIDToTypeID( "Rctn" );
    desc1.putObject( id5, id16, desc2 );
    executeAction( id1, desc1, DialogModes.NO );
}

function saveMe(fPath)
{

// save out the image as jpeg
var jpgFile = new File(fPath);
jpgSaveOptions = new JPEGSaveOptions();
jpgSaveOptions.formatOptions = FormatOptions.OPTIMIZEDBASELINE;
jpgSaveOptions.embedColorProfile = true;
jpgSaveOptions.matte = MatteType.NONE;
jpgSaveOptions.quality = 12;

activeDocument.saveAs(jpgFile, jpgSaveOptions, true, Extension.LOWERCASE);

// close that saved jpg
app.activeDocument.close(SaveOptions.DONOTSAVECHANGES);
} 
```

# php - php mysql中的分页

> ID：14368435
> 
> 赞同：0
> 
> 时间：2013-01-16T21:44:06.800
> 
> 标签：php, mysql, database, paging

我正在尝试制作一个包含电影的网站，一切都很好，但我只有一个小问题，每当我制作网站时，我都会在本地计算机上完成所有工作测试然后我上传网络，下面的代码用于带有查询的分页，它在 WAMP（本地）中运行良好。但是当我将分页代码上传到我的网络服务器时，它显示不存在。它显示了其他部分，有什么问题？

```
<?php

$per_page = 35; 
 $page = 1;
 if (isset($_GET['page'])) 
 {
  $page = intval($_GET['page']); 
  if($page < 1) $page = 1;
}

 $start_from = ($page - 1) * $per_page; 

$con= mysql_connect("localhost","sarya_asad","Thisisfor123");
 mysql_select_db('saryaal_com_movies',$con);

 $current_items = mysql_query( "SELECT * FROM `english` LIMIT $start_from, $per_page");
 if( mysql_num_rows($current_items) > 0)
 {
  while($item = mysql_fetch_assoc($current_items))
  {

  ?>
    <tr>
        <td> <strong><a href="english/english-preview.php?id=<?php echo$item['id']?>" ><?php echo $item['title'] ;?></a>    </strong></td>
        <td> <strong> <?php echo $item['year'] ;?>  </strong></td>
        <td> <strong> <?php echo $item['quality'] ;?>   </strong> </td>
    </tr>
    <tr><td>
    <?php
    }
 }
 else
 {
  echo 'this page does not exists'; 
 }

 $total_rows = mysql_query("SELECT COUNT(*) FROM `english`");
 $total_rows = mysql_fetch_row($total_rows);
 $total_rows = $total_rows[0];

 $total_pages = $total_rows / $per_page;
 $total_pages = ceil($total_pages); # 19/5 = 3.8 ~=~ 4

 for($i = 1; $i  <= $total_pages; ++$i)
 {
  echo "<a href='temp2.php?page=$i' class='pagNumActive'>$i</a> &nbsp;&nbsp;";
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T07:54:52.490

```
<?php if($Strkeyword=="" AND $StrLoc=="" AND $StrMinsal=="-1" AND $StrMaxsal=="-1" AND $StrMax_exp=="maximum" AND $Strcategory=="" AND $Strjobtype=="") {
 $sql=mysql_query("select * from job where AND status='Active'");
 } 
$per_page = 5;
 $page = 1; 
if (isset($_GET['page'])) { 
$page = intval($_GET['page']);
 if($page < 1) $page = 1; 
} 
$start_from = ($page - 1) * $per_page;
 if($Strkeyword=="" AND $StrLoc=="" AND $StrMinsal=="-1" AND $StrMaxsal=="-1" AND $StrMax_exp=="maximum" AND $Strcategory=="" AND $Strjobtype=="") 
{ 
$current_items=mysql_query("select * from job LIMIT $start_from, $per_page"); } $start_from, $per_page");
 if( mysql_num_rows($current_items)>0) { while($arr=mysql_fetch_array($current_items)) {
?> 

<?php include("include/result.php") ?>// result u want to display 
<?php 
} 
} else { 
echo 'Data does not exists'; } 
if($Strkeyword=="" AND $StrLoc=="" AND $StrMinsal=="-1" AND $StrMaxsal=="-1" AND $StrMax_exp=="maximum" AND $Strcategory=="" AND $Strjobtype=="") {
 $total_rows=mysql_query("select COUNT(*) from job where AND status='Active'");
 } 
$total_rows = mysql_query("SELECT COUNT(*) FROM job");
 $total_rows = mysql_fetch_row($total_rows); 
$total_rows = $total_rows[0]; 
$total_pages = $total_rows / $per_page;
 $total_pages = ceil($total_pages);
 # 19/5 = 3.8 ~=~ 4 
echo "<div style='margin-left:280px;'>";
 echo "Page : ";
 for($i = 1; $i <= $total_pages; $i++) {
 echo "[<a style='text-decoration:none' href='search_result.php?page=$i' class='pagNumActive'>$i</a>&nbsp;]"; 
} 
echo "</div>"; 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:49:58.717

你可能想使用类似的东西：

```
$per_page = 35;
$start_from = $page * $per_page - $per_page; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:51:29.880

这是你的问题：

```
$con= mysql_connect("localhost","sarya_asad","Thisisfor123");
    mysql_select_db('saryaal_com_movies',$con); 
```

您需要更改主机详细信息。`localhost`是您机器上的本地服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T21:48:33.257

改变这个

```
 $start_from = ($page - 1) * $per_page; 
```

至

```
 $start_from = ($page) * $per_page; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T22:23:15.467

试试这个分页逻辑：

您的目标是抵消您希望在每页上显示的图像数量。

因此，假设您想在一个页面上显示 6 个电影缩略图……您将拥有：

```
$videos_per_page = 6
$pageNumber = (isset($_GET['page']) ? ($_GET['page']) : 1); 
```

你的偏移量将是：

```
$offset = $videos_per_page * $pageNumber 
```

（6 个视频 * 第 0 页...所以您抵消了 0 个视频。这很好，因为您想在第 0 页的数据结构中显示前 6 个视频）。

* * *

所以现在您有了偏移值...您需要将数组指针设置到正确的位置...循环遍历存储电影的数据库行并将指针移动您的偏移值...将其存储在 $videos_to_offset 中。 ..

```
while ($videos_per_page < $offset && ($row = $Query_Result->fetch_assoc())) {
    $videos_to_offset++;
} 
```

现在你可以遍历你的数据库行，从你的偏移数组指针离开的地方输出你的视频：

```
 $video_counter = 0;
    while ($video_counter < $videos_per_page && ($row = $Query_Result->fetch_assoc())) {

        echo   $row['videopath'];
        $video_counter++;
} 
```

类似的东西。

# java - 用于 Google Drive API 的 Maven 存储库已关闭？

> ID：14368442
> 
> 赞同：3
> 
> 时间：2013-01-16T21:44:29.130
> 
> 标签：java, google-api-java-client

想在 java 和 maven 中使用 google drive api，我向文档报告：

[http://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API](http://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API)

它表示此存储库：

[http://google-api-client-libraries.appspot.com/mavenrepo](http://google-api-client-libraries.appspot.com/mavenrepo)

问题是我无法访问它，我得到一个 404 并且 maven 找不到它（在 Nexus 中尝试过）。回购失败还是我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:07:09.440

没关系。他们只是在该 URL 上没有可浏览的内容。我已经尝试过这个存储库和工件，并且它被成功获取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T15:39:53.327

几个月前，Google 开始将库推送到 Sonatype 存储库。您不再应该在 pom.xml 中包含指向 google-api-client-libraries.appspot.com/mavenrepo 或 mavenrepo.google-api-java-client.googlecode.com 的存储库条目

这样做会减慢您的构建速度，因为您最终会检查该存储库中的所有依赖项（甚至是非 Google 依赖项）。这些检查 404，然后您检查主存储库。

# javascript - 强制 div/文本框在一行中显示？

> ID：14368447
> 
> 赞同：4
> 
> 时间：2013-01-16T21:45:20.870
> 
> 标签：javascript, html, css

如何强制以下内容显示在一行中？（目前两个文本框都显示在彼此下方）

```
 <form>
               <div class="loginDiv">
               Username : <input type="text" class="resizedTextbox" name="username">
               Password : <input type="text" class="resizedTextbox" name="password">
               </div>
           </form>

     <style type="text/css">
        .resizedTextbox {width: 50px; height: 25px}
        .loginDiv{font-size: 12px;}
    </style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:47:37.750

如图所示添加`display:inline-block`到您的 CSS 中：

```
<style type="text/css">
    .resizedTextbox {
      width: 50px;
      height: 25px;
      display:inline-block;
    }
    .loginDiv {
      font-size: 12px;
    }
</style>

    <form>
       <div class="loginDiv">
          Username : <input type="text" class="resizedTextbox" name="username">
          Password : <input type="text" class="resizedTextbox" name="password">
        </div>
    </form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:47:57.453

最简单的方法是设置`display: inline`或设置`display: inline-block`要内联显示的元素。

请仔细阅读他们的[实际](http://www.w3.org/TR/CSS2/visuren.html#propdef-display)工作，这样您就不会遇到任何意外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:49:48.997

我想你想要`display: inline-block`，但我运行了一个[jsfiddle](http://jsfiddle.net/PDJEV/)，它已经是内联的，没有额外的 css。您确定在其他地方没有其他 css 可以覆盖它吗？

# mysql - 对多个结果集的多个查询

> ID：14368448
> 
> 赞同：0
> 
> 时间：2013-01-16T21:45:24.233
> 
> 标签：mysql, jdbc

我想使用 3 个 WHERE 条件从一个数据库中检索数据，并且数据应该列在我的 Web 应用程序的同一张表上，在同一行，不同的列上。

这是我在一个 WHERE 条件下所拥有的，但我找不到一种方法来将所有结果都放在我在我的网络应用程序上构建的同一张表中。

```
try
{
        //Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        //Connection connection=DriverManager.getConnection("jdbc:odbc:db1","","");
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection connection=DriverManager.getConnection("jdbc:mysql://localhost/etoolsco_VecinetSM?user=USERNAME&password=PASSWORD");
        Statement statement=connection.createStatement();
        String query;
        query="SELECT * FROM flatene2013 WHERE Apto='5C'";
        ResultSet resultSet=statement.executeQuery(query);
        while(resultSet.next())
    {%>
    <tr>

    <td>&nbsp;</td>
    <td align="right"><font size="-1"><%out.println(resultSet.getBigDecimal(4)+"");%></font></td>
    </tr>
    <tr>

    <td>&nbsp;</td>
    <td align="right"><font size="-1"><%out.println(resultSet.getBigDecimal(5)+"");%></font></td>
    </tr>
    <tr> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:01:27.850

最好的猜测是，您可能正在寻找`UNION`由 3 个不同/独立条件返回的三行之一。这是你需要的吗？

```
SELECT * FROM flatene2013 WHERE Apto='5C'
UNION
SELECT * FROM flatene2013 WHERE Apto='6C'
UNION
SELECT * FROM flatene2013 WHERE Apto='7C'; 
```

请注意，在不知道您的表架构...或您所追求的逻辑的情况下提出答案是无效的。

# python - code.interact 和导入/定义可见性

> ID：14368449
> 
> 赞同：17
> 
> 时间：2013-01-16T21:45:30.363
> 
> 标签：python, function, scope, visibility, python-import

我不太明白**导入**和**函数定义**在python 模块中的**可见性。**这是我的案例的简化：

```
from scapy.all import *

def getA():
    return 0

def getB():
    return getA() + 1

def getC():
    code.interact(local=locals()) 
    return 3

def main():
    print getA()
    print getB()
    print getC()
    exit()

if __name__ == '__main__':
    main() 
```

现在，一切都很顺利，直到我到达函数`getC`并出现命令提示符，我应该看到**的很多东西****都不见了**。

*   getA() 和 getB() 不可见
*   进口中的 scapy 也不可见

为什么会这样？我怎么了？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-21T15:44:38.637

正如我在上面的评论中所写，解决方案是：

```
code.interact(local=dict(globals(), **locals())) 
```

（[在这里](https://stackoverflow.com/questions/7165493/how-to-get-python-interactive-console-in-current-namespace#comment17527678_7165575)拍摄）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T21:47:13.063

你很困惑[`locals()`](http://docs.python.org/2/library/functions.html#locals)和[`globals()`](http://docs.python.org/2/library/functions.html#globals)。在函数范围内，*仅*`locals()`列出函数本身中定义的名称。

 *改为使用`globals()`。

```
>>> bar = 'baz'
>>> def foo():
...     spam ='eggs'
...     print locals()
...
>>> foo()
{'spam': 'eggs'}
>>> globals()
{'__builtins__': <module '__builtin__' (built-in)>, '__name__': '__main__', 'foo': <function foo at 0x108a027d0>, '__doc__': None, '__package__': None} 
```*

# opengl-es - 绕中心平移和旋转

> ID：14368460
> 
> 赞同：1
> 
> 时间：2013-01-16T21:46:37.147
> 
> 标签：opengl-es

我正在尝试实现一些简单的事情：在 X 轴上设置平移，然后将对象围绕其中心旋转一个固定角度。

为此，据我目前所知，有必要将对象移动到中心，旋转并移回原始位置。好的。我得到的问题是，它看起来像对象旋转它的局部轴并沿这些轴进行最后一次平移，因此它以错误的位置结束。

这是我的代码：

```
public void draw(GL10 gl) {
    gl.glLoadIdentity();

    GLU.gluLookAt(gl, 0, 0, 5, 0, 0, 0, 0, 1, 0);

    gl.glTranslatef(x, 0, 0);

    gl.glTranslatef(-x, 0, 0);
    gl.glRotatef(-80, 0, 1, 0);
    gl.glTranslatef(x, 0, 0);

    gl.glBindTexture(GL10.GL_TEXTURE_2D, textureId);

    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    gl.glFrontFace(GL10.GL_CW);

    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, verticesBuffer);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

    gl.glDrawElements(GLES20.GL_TRIANGLES, indices.length,  GLES10.GL_UNSIGNED_SHORT, indicesBuffer);
} 
```

在旋转之前，对象应位于 0,0,0。它正确旋转。但随后它靠近屏幕，好像 x 轴将指向我（80°）。

注意：我只让“opengl”作为标签，因为这是一个通用的 OpenGL 问题，答案不应该与 Android 相关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:13:39.630

这是不推荐使用的方法，但我想这不是不回答问题的借口。

如果对顶点应用多个变换，OpenGL 会以相反的顺序执行矩阵乘法。例如，如果一个顶点首先被 MA 变换，然后被 MB 变换，那么 OpenGL 在乘以顶点之前首先执行 MB x MA。因此，最后一个转换首先出现，第一个转换在您的代码中最后发生。

```
gl.glPushMatrix();

gl.glTranslatef(globalX, 0, 0);

gl.glTranslatef(localX, 0 ,0);
gl.glRotatef(-80, 0, 1, 0);

gl.glTranslatef(-globalX, 0, 0);

gl.glPopMatrix(); 
```

首先从您在变换层次结构中的位置移动到原点。然后围绕该原点旋转。沿任何轴应用一些局部运动。将对象移回其全局定位。

使用 glPushMatrix() 和 glPopMatrix() 撤消对处于相同相对定位级别的元素的更改，这意味着它们具有相对定位的相同父元素。推送保留了 OpenGL 在上述本地代码中的操作之后应用的先前（父）对象的转换，因为它是公共堆栈 (LIFO) 的顺序，在这种情况下是矩阵堆栈。

# .net - AForge.NET WebCam 快照内存消耗

> ID：14368462
> 
> 赞同：0
> 
> 时间：2013-01-16T21:46:46.550
> 
> 标签：.net, vb.net, memory-management, aforge

我对框架和我的应用程序的内存消耗有疑问。我制作了一个应用程序，它不时从我的网络摄像头拍摄快照，因为我的网络摄像头不支持快照功能，我必须创建一个新的帧事件并最终捕获并保存一帧。当前帧率为 5 FPS，内存消耗稳定，虽然**约为 11MB**。它足够好还是有什么方法可以减少内存使用量？

这是我的代码：

```
Imports AForge.Video
Imports AForge.Video.DirectShow
Imports System.Drawing.Imaging

Public Class Form1
    Dim VideoCaptureDevices As FilterInfoCollection
    Dim FinalVideo As VideoCaptureDevice
    Dim save As Boolean = False
    Dim Username As String = Environment.UserName
    Dim counter As Integer
    Private Sub Form1_FormClosing(sender As Object, e As FormClosingEventArgs) Handles Me.FormClosing
        If FinalVideo.IsRunning Then
            FinalVideo.SignalToStop()
        End If
    End Sub

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Timer1.Interval = 5000
        Timer1.Start()
        VideoCaptureDevices = New FilterInfoCollection(FilterCategory.VideoInputDevice)
        If VideoCaptureDevices.Count Then
            FinalVideo = New VideoCaptureDevice(VideoCaptureDevices(0).MonikerString)
            AddHandler FinalVideo.NewFrame, AddressOf Me.video_NewFrame
            FinalVideo.Start()
            FinalVideo.DesiredFrameRate = 5
        Else
            MsgBox("No video input found")
        End If
    End Sub

    Private Sub video_NewFrame(ByVal sender As Object, ByVal eventArgs As NewFrameEventArgs)

        Dim image As Bitmap = DirectCast(eventArgs.Frame.Clone(), Bitmap)
        Dim g As Graphics = Graphics.FromImage(image)
        If save Then
            counter += 1
            image.Save("C:\Users\" & Username & "\Desktop\" & counter & ".jpeg", ImageFormat.Jpeg)
            save = False
        End If
        g.Dispose()
        image.Dispose()

    End Sub

    Private Sub Timer1_Tick(sender As Object, e As EventArgs) Handles Timer1.Tick
        save = True
    End Sub

End Class 
```

# c - 尝试从文件打印数据时出现分段错误

> ID：14368468
> 
> 赞同：1
> 
> 时间：2013-01-16T21:47:22.293
> 
> 标签：c, segmentation-fault

编辑：我现在已经完全修复了我的代码。这里是：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

int main(){
    int n, i , j;
    char **mensagem;
    char leitura[1000];
    FILE *arquivo;

    arquivo = fopen("entrada.txt", "r");

    fgets(leitura, 1000, arquivo);

    fclose(arquivo);

    arquivo = fopen("entrada.txt", "r");

    n = sqrt(strlen(leitura));

    mensagem = malloc(n * sizeof(char *));

    for (i = 0; i < n; i++){
        mensagem[i] = malloc(n * sizeof(char));
    }

    for (j = 0; j < n; j++){
        for (i = 0; i < n; i++){
            fscanf(arquivo, "%c", &mensagem[i][j]);
        }
    }

    for (j = 0; j < n; j++){
        for (i = 0; i < n; i++){
            if(mensagem[j][i] == '*'){
                printf(" ");
                i = n - 1;
            }
            else {
                printf("%c", mensagem[j][i]);
            }
        }
    }

    fclose(arquivo);
    free(mensagem);

    return 0;
} 
```

这个想法是像 Cesar 在过去那样破译消息：D。`.txt`我从文件中读取了一条编码消息。我读了整行然后我动态分配了一个数组数组。这样我就可以打印列，并且消息将正常打印。

这是我的代码：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>
int main(){
    int n, i , j;
    char **mensagem;
    char leitura[1000];
    FILE *arquivo;
    arquivo = fopen("entrada.txt", "r");

    fgets(leitura, 1000, arquivo);

    n = sqrt(strlen(leitura));

    mensagem = (char **)malloc(n * n * sizeof(char));

    for (j = 0; j < n; j++){
        for (i = 0; i < n; i++){
            fscanf(arquivo, "%c", &mensagem[i][j]);
        }
    }

    for (j = 0; j < n; j++){
        for (i = 0; i < n; i++){
            if(mensagem[i][j] == '*'){
                printf(" ");
                i = n - 1;
            }
            else {
                printf("%c", mensagem[i][j]);
            }
        }
    }

    fclose(arquivo);
    free(mensagem);

    return 0;
} 
```

这是文件中的数据：

> ```
> AEEUMOLSHMSCGT*AGU2A***L:****T*****A 
> ```

这是预期的输出：

> ```
> ALG2: ESTA EH UMA MSG OCULTA 
> ```

这是它背后的逻辑：

> ```
> A E E U M O
> L S H M S C
> G T * A G U
> 2 A * * * L
> : * * * * T
> * * * * * A 
> ```

我确实知道问题出在 的调用上`printf`，但我不确定如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:01:39.397

这是一个典型的“两星不成二维数组”的例子。

mensagem = (char **)malloc(n * n * sizeof(char));

```
for (j = 0; j < n; j++){
    for (i = 0; i < n; i++){
        fscanf(arquivo, "%c", &mensagem[i][j]);
    }
} 
```

`mensagem`是指向字节块的指针`n * n`。但是，当您这样做时`mensagem[i][j]`，编译器将读取指针的值，添加`i`，然后读取该地址处的指针。该指针设置为什么？无论发生在`i * sizeof(char *)`您分配的内存中的什么 - 可能为零。

您需要进行两阶段分配，首先分配`n`指针，然后为每个`n`字节字符串分配存储空间。

编辑：我故意没有编写代码来解决您的问题，因为您会从自己编写代码中学到更多...

# ruby-on-rails - 从另一个中调用一个步骤，菠菜

> ID：14368479
> 
> 赞同：0
> 
> 时间：2013-01-16T21:47:47.097
> 
> 标签：ruby-on-rails, gherkin, spinach

我记得有一种方法可以使用菠菜从另一个步骤中执行一个步骤。

我记得，这样的步骤看起来类似于以下内容：

```
...
step "I create a patient as a facility's administrator" do
  %Q{ Given I am a facility's administrator }
  %Q{ Given I create a patient }
end
... 
```

找到[.execute(step)](http://rubydoc.info/github/codegram/spinach/master/Spinach/DSL/InstanceMethods%3aexecute)但没有任何运气可以将 Step 对象作为参数发送。如何从另一个步骤中执行步骤？帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:11:30.170

`execute`是不应从功能中使用的内部方法。如果你想从另一个步骤执行一个步骤，*你必须*强调它。Spinach 维护人员建议将“我是设施管理员”和“我创建患者”步骤中的逻辑提取到另一个方法中，并从其他步骤中调用这个方法。

```
step "I create a patient as a facility's administrator" do
  log_as_facility_admin
  create_patient
end

def log_as_facility_admin
  # something
end

def create_patient
  # something
end 
```

来源：[https ://github.com/codegram/spinach/issues/132](https://github.com/codegram/spinach/issues/132)

# c++ - MinGW 编译的程序在 64 位 Windows 上崩溃

> ID：14368482
> 
> 赞同：7
> 
> 时间：2013-01-16T21:47:52.797
> 
> 标签：c++, segmentation-fault, mingw

我在带有 Intel 的 64 位 Windows 7 上安装了 32 位 MinGW 和 64 位 Eclipse CDT `Core i7-3612QM`。当我编译并运行`hello world`时，字符串会打印出来，但程序会在`SIGILL`之后得到一个。

来源：

```
#include <iostream>
using namespace std;

int main() {
    cout << "Hello World!" << endl;
    return 0;
} 
```

堆栈跟踪：

```
hello.exe [C/C++ Application]   
    hello.exe [5532]    
        Thread [1] 0 (Suspended : Signal : SIGILL:Illegal instruction)  
            libstdc++-6!_ZSt4cout() at 0x6fccc3c0   
            libstdc++-6!_ZNSolsEPFRSoS_E() at 0x6fc8908c    
            _fu0___ZSt4cout() at hello.cpp:5 0x4013be   
    gdb 
```

添加`cin`会导致段错误：

来源：

```
#include <iostream>
#include <string>

using namespace std;

int main() {
    string name;
    cout << "Please type your name: ";
    cin >> name;
    cout << "Hello " << name << endl;
    return 0;
} 
```

详细的编译器输出：

```
C:\Users\Sean\temp>g++ -v main.cpp
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=c:/mingw/bin/../libexec/gcc/mingw32/4.6.2/lto-wrapper.exe
Target: mingw32
Configured with: ../gcc-4.6.2/configure --enable-languages=c,c++,ada,fortran,obj
c,obj-c++ --disable-sjlj-exceptions --with-dwarf2 --enable-shared --enable-libgo
mp --disable-win32-registry --enable-libstdcxx-debug --enable-version-specific-r
untime-libs --build=mingw32 --prefix=/mingw
Thread model: win32
gcc version 4.6.2 (GCC)
COLLECT_GCC_OPTIONS='-v' '-shared-libgcc' '-mtune=i386' '-march=i386'
 c:/mingw/bin/../libexec/gcc/mingw32/4.6.2/cc1plus.exe -quiet -v -iprefix c:\min
gw\bin\../lib/gcc/mingw32/4.6.2/ main.cpp -quiet -dumpbase main.cpp -mtune=i386
-march=i386 -auxbase main -version -o C:\Users\Sean\AppData\Local\Temp\ccSVBzeY.
s
GNU C++ (GCC) version 4.6.2 (mingw32)
        compiled by GNU C version 4.6.2, GMP version 5.0.1, MPFR version 2.4.1,
MPC version 0.8.1
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
ignoring nonexistent directory "c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../.
./mingw32/include"
ignoring duplicate directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.6.2/inclu
de/c++"
ignoring duplicate directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.6.2/inclu
de/c++/mingw32"
ignoring duplicate directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.6.2/inclu
de/c++/backward"
ignoring duplicate directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.6.2/inclu
de"
ignoring duplicate directory "/mingw/lib/gcc/mingw32/4.6.2/../../../../include"
ignoring duplicate directory "c:/mingw/lib/gcc/../../include"
ignoring duplicate directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.6.2/inclu
de-fixed"
ignoring nonexistent directory "c:/mingw/lib/gcc/../../lib/gcc/mingw32/4.6.2/../
../../../mingw32/include"
ignoring duplicate directory "/mingw/include"
#include "..." search starts here:
#include <...> search starts here:
 c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++
 c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/mingw32
 c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include/c++/backward
 c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include
 c:\mingw\bin\../lib/gcc/mingw32/4.6.2/../../../../include
 c:\mingw\bin\../lib/gcc/mingw32/4.6.2/include-fixed
End of search list.
GNU C++ (GCC) version 4.6.2 (mingw32)
        compiled by GNU C version 4.6.2, GMP version 5.0.1, MPFR version 2.4.1,
MPC version 0.8.1
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: f7eb4168c2cf10318cc29da8d23b7f3c
COLLECT_GCC_OPTIONS='-v' '-shared-libgcc' '-mtune=i386' '-march=i386'
 c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/as.exe -o C:\User
s\Sean\AppData\Local\Temp\ccb0vTGl.o C:\Users\Sean\AppData\Local\Temp\ccSVBzeY.s

COMPILER_PATH=c:/mingw/bin/../libexec/gcc/mingw32/4.6.2/;c:/mingw/bin/../libexec
/gcc/;c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/
LIBRARY_PATH=c:/mingw/bin/../lib/gcc/mingw32/4.6.2/;c:/mingw/bin/../lib/gcc/;c:/
mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/lib/;c:/mingw/bin/../lib/
gcc/mingw32/4.6.2/../../../;/mingw/lib/
COLLECT_GCC_OPTIONS='-v' '-shared-libgcc' '-mtune=i386' '-march=i386'
 c:/mingw/bin/../libexec/gcc/mingw32/4.6.2/collect2.exe -Bdynamic -u ___register
_frame_info -u ___deregister_frame_info c:/mingw/bin/../lib/gcc/mingw32/4.6.2/..
/../../crt2.o c:/mingw/bin/../lib/gcc/mingw32/4.6.2/crtbegin.o -Lc:/mingw/bin/..
/lib/gcc/mingw32/4.6.2 -Lc:/mingw/bin/../lib/gcc -Lc:/mingw/bin/../lib/gcc/mingw
32/4.6.2/../../../../mingw32/lib -Lc:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../.
. -L/mingw/lib C:\Users\Sean\AppData\Local\Temp\ccb0vTGl.o -lstdc++ -lmingw32 -l
gcc_s -lgcc -lmoldname -lmingwex -lmsvcrt -ladvapi32 -lshell32 -luser32 -lkernel
32 -lmingw32 -lgcc_s -lgcc -lmoldname -lmingwex -lmsvcrt c:/mingw/bin/../lib/gcc
/mingw32/4.6.2/crtend.o 
```

堆栈跟踪：

```
hello.exe [C/C++ Application]   
    hello.exe [9092]    
        Thread [1] 0 (Suspended : Signal : SIGSEGV:Segmentation fault)  
            libstdc++-6!_ZNSs12_Alloc_hiderC1EPcRKSaIcE() at 0x6fc89542 
            libstdc++-6!_ZNSsC1Ev() at 0x6fc8c38b   
            main() at hello.cpp:7 0x4013a7  
    gdb 
```

使用 32 位`code::blocks`或从命令行手动编译时也会出现这些问题。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T01:37:21.667

当我试图在另一台没有安装 MinGW 的计算机上运行 EXE 时，它抱怨：

> 程序无法启动，因为您的计算机缺少 libgcc_s_dw2-1.dll。尝试重新安装程序以解决此问题。

谷歌搜索该错误导致我出现 SO 问题[The program can't start because libgcc_s_dw2-1.dll is missing](https://stackoverflow.com/questions/4702732/the-program-cant-start-because-libgcc-s-dw2-1-dll-is-missing)

从答案：

> `libgcc_s_dw2-1.dll`应该在编译器的 bin 目录中。您可以将此目录添加到 PATH 环境变量以进行运行时链接，或者您可以通过在编译器标志中添加“-static-libgcc -static-libstdc++”来避免该问题。

所以我添加了标志，结果程序在两个系统上都能正常运行。我不确定为什么需要这些标志才能在我的开发系统上正常工作，因为 MinGW bin 目录位于 PATH 中。任何人都可以提供解释吗？我应该创建一个单独的问题吗？

# github - GitHub API 提交文件 raw_url 404

> ID：14368488
> 
> 赞同：2
> 
> 时间：2013-01-16T21:48:06.953
> 
> 标签：github, github-api

我正在使用 GitHub API，并且在`raw_url`实际引用“子项目”的提交文件条目上得到 404。例如，[此](https://api.github.com/repos/libgit2/libgit2sharp/commits/39c2ed2233b3d99e33c031183e26996d1210c329)提交底部的**libgit2**条目具有以下内容：[https ://github.com/libgit2/libgit2sharp/raw/39c2ed2233b3d99e33c031183e26996d1210c329/libgit2](https://github.com/libgit2/libgit2sharp/raw/39c2ed2233b3d99e33c031183e26996d1210c329/libgit2)`raw_url`

这是 GitHub.com 上的提交：[https ://github.com/libgit2/libgit2sharp/commit/39c2ed2233b3d99e33c031183e26996d1210c329#L19L1](https://github.com/libgit2/libgit2sharp/commit/39c2ed2233b3d99e33c031183e26996d1210c329#L19L1)

有什么方法可以使用 GitHub API 检测文件实际上是子项目吗？

# c# - EF 5 派生类无法访问部分类的属性

> ID：14368490
> 
> 赞同：2
> 
> 时间：2013-01-16T21:48:07.020
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个 EF 5/MVC 4，我正在处理的数据库第一个项目，并为我的应用程序的某些逻辑功能区域（UserManagement、CompanyManagement、InventoryManagement、OrderManagement）创建了单独的 edmx 文件。UserProfile 表位于所有 edmx 文件中，因为它可以加入 CreatedById 和 ModifiedById 表，因此您可以获得实际的用户名。但我不想在 UserProfile 表的每个版本中创建额外的属性和数据注释，所以我继承了 UserProfile 的（我称之为）“原始版本”，它位于 UserManagement 区域中，我添加了我的额外属性并添加我的数据注释。好的，还在我身边吗？

好的，这是 EF 5 创建的原始 UserProfile 类（在 UserManagement 区域/文件夹中）：

```
namespace OTIS.domain.UserMgmt
{
    using System;
    using System.Collections.Generic;

    public partial class UserProfile
    {
        public UserProfile()
        {
            this.webpages_Roles = new HashSet<webpages_Roles>();
        }

        public int UserId { get; set; }
        public Nullable<int> AccountId { get; set; }
        public string UserName { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Email { get; set; }

        public virtual webpages_Membership webpages_Membership { get; set; }
        public virtual ICollection<webpages_Roles> webpages_Roles { get; set; }
    }
} 
```

这是我用来添加其他属性和添加数据注释的部分类：

```
namespace OTIS.domain.UserMgmt
{
    [MetadataType(typeof(UserProfileMD))]
    public partial class UserProfile : IEntity
    {
        public int Id
        {
            get
            {
                return this.UserId;
            }
        }

        public string FullName
        {
            get
            {
                return this.FirstName + " " + this.LastName;
            }
        }

        public string EntityDescription
        {
            get
            {
                return this.FullName;
            }
        }

        public class UserProfileMD
        {
            public int UserId { get; set; }

            [Required]
            [Display(Name = "User Name")]
            public string UserName { get; set; }

            [Required]
            [Display(Name = "First Name")]
            public string FirstName { get; set; }

            [Required]
            [Display(Name = "Last Name")]
            public string LastName { get; set; }

            [Display(Name = "Name")]
            public string FullName { get; set; }

            [Display(Name = "Email")]
            public string Email { get; set; }

        }
    }
} 
```

现在我正在使用 InventoryMgmt edmx 中的 UserProfile 版本，因此我创建了一个同名的部分类并从上面继承：

```
namespace OTIS.domain.InventoryMgmt
{
    [MetadataType(typeof(OTIS.domain.UserMgmt.UserProfile.UserProfileMD))]
    public partial class UserProfileInvnMgmt : UserProfile
    {

    }
} 
```

现在在 InventoryMgmt edmx 中也是 PO Header。这是 EF 生成的类（注意它引用了 UserProfileInvnMgmt UserProfile，它是 CreatedById 的外键表）：

```
namespace OTIS.domain.InventoryMgmt
{
    using System;
    using System.Collections.Generic;

    public partial class POHeader
    {
        public POHeader()
        {
            this.PODetails = new HashSet<PODetail>();
        }

        public int Id { get; set; }
        public int FacilityId { get; set; }
        public int VendorId { get; set; }
        public int StatusId { get; set; }
        public string Notes { get; set; }
        public int CreatedById { get; set; }
        public System.DateTime CreatedOn { get; set; }
        public int ModifiedById { get; set; }
        public System.DateTime ModifiedOn { get; set; }

        public virtual ICollection<PODetail> PODetails { get; set; }
        public virtual Vendor Vendor { get; set; }
        public virtual POHeaderStatus POHeaderStatus { get; set; }
        public virtual UserProfileInvnMgmt UserProfile { get; set; }
        public virtual UserProfileInvnMgmt UserProfile1 { get; set; }
    }
} 
```

现在我有一个将 POHeader 类实体转换为视图模型的方法。在设计期间，它允许我将 POHeader.UserProfile.FullName 分配给视图模型属性 OrderedBy。

```
public IEnumerable<POHeadersListViewModel> ConvertClassToViewModel(IEnumerable<POHeader> purchaseOrders)
    {
        IEnumerable<POHeadersListViewModel> poGrid =
            from l in purchaseOrders.ToList()
            select new POHeadersListViewModel()
            {
                Id = l.Id,
                VendorName = l.Vendor.VendorName,
                OrderedBy = l.UserProfile.FullName,
                OrderDate = l.CreatedOn,
                Status = l.POHeaderStatus.DisplayName
                //OwnerName = l.Customer == null ? "" : l.Customer.CustomerName
            };

        return poGrid;
    } 
```

但是，当您运行此代码时，不会为 OrderedBy 分配任何值，并且如果在调试时展开 IEnumerable purchaseOrders 变量，您会看到 UserProfile，但如果展开它，您不会看到 FullName 属性，而是看到 FirstName 和 LastName被填充。视图模型中的结果值或 OrderBy 是一个空格，这似乎是返回 FullName 属性，但 FirstName 和 LastName 为空，导致 FullName 只返回应该分隔 FirstName 和 LastName 属性的空格， IE

```
public string FullName
    {
        get
        {
            return this.FirstName + " " + this.LastName;
        }
    } 
```

但请注意，如果我这样做：

```
OrderedBy = l.UserProfile.FirstName + " " + l.UserProfile.LastName, 
```

它有效，所以 FirstName 和 LastName 不为空。关于为什么没有正确返回 FullName 的任何想法？一般来说，处理多个版本的 UserProfile 是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:35:00.573

Not sure this is your issue, but your partial class extends IEntity `public partial class UserProfile : IEntity` where the auto-gen class does not. I believe these should match exactly, or does C# allow you to do that?

**UPDATE** I believe you issue is that you are trying the use the derived/calculated property in your linq query, which when you consider mapping this back to your database using EF would not be something it would be able to handle / translate. This discussion seems relevant: [Using a partial class property inside LINQ statement](https://stackoverflow.com/questions/6879529/using-a-partial-class-property-inside-linq-statement)

# c - GCC函数调用错误

> ID：14368492
> 
> 赞同：0
> 
> 时间：2013-01-16T21:48:12.603
> 
> 标签：c, gcc, c-preprocessor

我有以下**C**代码：

```
#ifdef _MODE_DEBUG
void program_exit(void){
#else
void program_exit(const unsigned char* fileName, unsigned int lineNumber){
    printf("The program was called to terminate early from file \"%s\" line %u", fileName, lineNumber);
#endif
//We have to call cleanup() wherever possible.
arguments_cleanup(void);

exit(1);
} 
```

哪个应该在代码的预编译版本中只动态提供一个功能，取决于是否定义了_MODE_DEBUG。但是，GCC 抱怨它在调用 arguments_cleanup 之前需要各种标记。为什么 GCC 不承认这是一个有效的函数，或者为什么这是无效的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:52:39.217

```
arguments_cleanup(void); 
```

不是调用函数的正确方法，它应该是

```
arguments_cleanup(); 
```

编译器试图解释

```
arguments_cleanup(void); 
```

作为宣言。

# compiler-construction - 动态和静态类型检查的优点

> ID：14368499
> 
> 赞同：7
> 
> 时间：2013-01-16T21:48:44.380
> 
> 标签：compiler-construction, typechecking

任何人都可以提供一些优点和缺点吗？静态类型检查和动态类型检查？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T21:55:58.250

这个问题在 SO 上已经被问过几次：

[静态类型语言和动态类型语言有什么区别？](https://stackoverflow.com/questions/1517582/what-is-the-difference-between-statically-typed-and-dynamically-typed-languages)

[动态类型语言与静态类型语言](https://stackoverflow.com/questions/125367/dynamic-type-languages-versus-static-type-languages/125380#125380)

[动态语言比静态语言慢吗？](https://stackoverflow.com/questions/2198684/are-dynamic-languages-slower-than-static-languages/2198964#2198964)

[动态编译语言与静态编译语言](https://stackoverflow.com/questions/12600296/dynamically-compiled-language-vs-statically-compiled-language)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-30T16:53:08.503

静态类型有以下主要好处：

它允许静态（无需运行程序）快速、可靠和自动地检测许多编程错误。这有助于减少错误的数量并减少调试所花费的时间。类型声明用作自动检查的文档。它们使程序更易于理解和维护。静态类型可以提高运行时效率。（请注意，Alore 运行时目前无法利用类型声明，但这可能会在未来发生变化。）动态类型具有不同的互补优势：

动态类型在概念上比静态类型更简单、更容易理解，尤其是在使用强大的容器类型（如 Alore 数组、元组和映射）时。这种效果对于非专业程序员来说很明显。动态类型更灵活。静态类型系统总是限制可以方便地表达的内容。使用静态类型系统进行编程通常需要更多的设计和实现工作。动态类型导致程序更紧凑，因为它更灵活并且不需要拼写类型。静态类型的好处对于大型和复杂的程序更为明显。例如，在编写短脚本和原型时，它与动态类型相比几乎没有什么好处。在这些情况下，它主要会减慢程序员的速度，而动态类型更可取。

通过：[http ://www.alorelang.org/doc/typeoverview.html](http://www.alorelang.org/doc/typeoverview.html)

# c# - 使用 Entity Framework 4.0 / .edmx 从 c# 调用标量函数

> ID：14368505
> 
> 赞同：24
> 
> 时间：2013-01-16T21:49:04.140
> 
> 标签：c#, entity-framework-4, user-defined-functions

我想将我的标量函数映射到我的 .edmx 但它失败了。我右键单击我的实体框架映射，然后从数据库中选择更新模型。它出现在模型浏览器的存储过程文件夹中。

但是，当我想`Function Imports`在模型浏览器中将它添加到我的文件夹时，消息**标量函数不会出现**在下拉列表中。有人能帮我吗？

我可以使用旧方式调用标量函数，例如：

```
dbContext.ExecuteStoreQuery<DateTime?>(
"SELECT dbo.getMinActualLoadDate ({0}, {1}, {2}) AS MyResult", 
LoadPkid, LoadFkStartLoc, TripSheetPkid).First(); 
```

但这不是最好的方法。我的经理希望我找到一种能够将标量函数放在“函数导入”文件夹中的方法，这样我就可以使用以下代码而不是前面的代码来调用标量函数：

```
dbContext.ExecuteFunction("getMinActualLoadDate ", paramList); 
```

我尝试添加图像以显示我的意思，但由于我的声誉仍然很低，我无法这样做。但是可以在这里找到图片：http: [//social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/756865e5-ff25-4f5f-aad8-fed9d741c05d](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/756865e5-ff25-4f5f-aad8-fed9d741c05d)

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-29T09:17:07.220

我遇到了同样的问题。这是我发现自己足够合适的解决方案（在 EF5 中测试，但也应该在 EF4 中工作）：

不支持开箱即用的映射标量值函数，但您可以直接执行它们。

您还可以编辑 edmx 文件以使 edmx 为标量值函数生成正确的方法，但如果您将模型与数据库同步，它将被删除。

**自己编写标量值函数实现：**

```
string sqlQuery = "SELECT [dbo].[CountMeals] ({0})";
Object[] parameters = { 1 };
int activityCount = db.Database.SqlQuery<int>(sqlQuery, parameters).FirstOrDefault(); 
```

**或者编辑 edmx 并添加 Xml 用于标量值函数的自定义映射：**

```
<Function Name="CountActivities" Aggregate="false" BuiltIn="false"    NiladicFunction="false" IsComposable="false"   ParameterTypeSemantics="AllowImplicitConversion" Schema="dbo">
    <CommandText>
        SELECT [dbo].[CountActivities] (@personId)
    </CommandText>
    <Parameter Name="personId" Type="int" Mode="In" />
</Function> 
```

此信息可在此[博客文章中找到](http://programmaticponderings.wordpress.com/2012/11/22/first-impressions-of-database-first-development-with-entity-framework-5-in-visual-studio-2012/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-20T06:58:08.490

这是我对这个问题的解决方案，这几乎正是您的经理所要求的……尽管晚了 18 个月。

作为香草方法：

```
 /// <summary>
    /// Calls a given Sql function and returns a singular value
    /// </summary>
    /// <param name="db">Current DbContext instance</param>
    /// <typeparam name="T">CLR Type</typeparam>
    /// <param name="sql">Sql function</param>
    /// <param name="parameters">Sql function parameters</param>
    /// <param name="schema">Owning schema</param>
    /// <returns>Value of T</returns>
    public T SqlScalarResult<T>(DbContext db, 
                                string sql, 
                                SqlParameter[] parameters,
                                string schema = "dbo") {

        if (string.IsNullOrEmpty(sql)) {
            throw new ArgumentException("function");
        }

        if (parameters == null || parameters.Length == 0) {
            throw new ArgumentException("parameters");
        }

        if (string.IsNullOrEmpty(schema)) {
            throw new ArgumentException("schema");
        }

        string cmdText =
            $@"SELECT {schema}.{sql}({string.Join(",",
                parameters.Select(p => "@" + p.ParameterName).ToList())});";

        // ReSharper disable once CoVariantArrayConversion
        return db.Database.SqlQuery<T>(cmdText, parameters).FirstOrDefault();

    }

} 
```

作为 EF 的扩展方法：

```
namespace System.Data.Entity {

    public static class DatabaseExtensions {

        /// <summary>
        /// Calls a given Sql function and returns a singular value
        /// </summary>
        /// <param name="db">Current DbContext instance</param>
        /// <typeparam name="T">CLR Type</typeparam>
        /// <param name="sql">Sql function</param>
        /// <param name="parameters">Sql function parameters</param>
        /// <param name="schema">Owning schema</param>
        /// <returns>Value of T</returns>
        public static T SqlScalarResult<T>(this Database db, 
                                           string sql, 
                                           SqlParameter[] parameters,
                                           string schema = "dbo") {

            if (string.IsNullOrEmpty(sql)) {
                throw new ArgumentException("sql");
            }

            if (parameters == null || parameters.Length == 0) {
                throw new ArgumentException("parameters");
            }

            if (string.IsNullOrEmpty(schema)) {
                throw new ArgumentException("schema");
            }

            string cmdText =
                $@"SELECT {schema}.{sql}({string.Join(",", 
                    parameters.Select(p => "@" + p.ParameterName).ToList())});";

            // ReSharper disable once CoVariantArrayConversion
            return db.SqlQuery<T>(cmdText, parameters).FirstOrDefault();

        }

    }

} 
```

虽然这里不冒烟，但我建议在认真使用之前进行单元测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T23:54:33.850

我猜你错过了[`Edit Function Import`](http://msdn.microsoft.com/en-us/library/vstudio/dd456824%28v=vs.100%29.aspx)可以生成*Complex Types*的对话框。尝试探索。

![在此处输入图像描述](../Images/2657fd563e89fd2a27dd8d2e75380d46.png)

如果您已成功创建`scalars`，您现在可以像这样导航

```
using (var con = new DatabaseEntities())
{
   long? invoiceNo = con.sp_GetInvoiceMaxNumber(code.Length + 2).First();
   ....
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-17T05:31:31.657

唯一的解决方案是将函数标量类型转换为表中具有单个值的表值类型，请参阅代码示例。

**您不必更改 EDMX XML 中的任何内容，请修改 SQL 函数**

> 原来的标量函数，它不起作用

```
CREATE FUNCTION [dbo].[GetSha256]
(
    -- Add the parameters for the function here
    @str nvarchar(max)
)
RETURNS VARBINARY(32)
AS
BEGIN
    RETURN ( SELECT * FROM HASHBYTES('SHA2_256', @str) AS HASH256 );
END -- this doesn't work. 
```

> 标量函数 -> 转换为表值函数，它可以工作

```
CREATE FUNCTION [dbo].[GetSha2561]
(
    -- Add the parameters for the function here
    @str nvarchar(max)
)
RETURNS  @returnList TABLE (CODE varbinary(32))
AS
BEGIN

    INSERT INTO @returnList
    SELECT HASHBYTES('SHA2_256', @str);

    RETURN; -- This one works like a charm.

END 
```

Edmx 截图

[![在此处输入图像描述](../Images/8fd5a81b6a14c597f3a8dc1b53f2567e.png)](https://i.stack.imgur.com/7c5eZ.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-02T11:36:55.730

页面代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        using (MayEntities context = new MayEntities())
        {
            string str = context.Database.SqlQuery<string>("select dbo.HeyYou()").Single().ToString();
            Response.Write(str); //output:'Hey this works'
        }
    }
} 
```

标量函数：

```
CREATE FUNCTION [dbo].[HeyYou] ()
RETURNS varchar(20)
AS
BEGIN
    RETURN 'Hey this works'
END
go 
```

# xcode - Xcode 找不到我的数据库的路径

> ID：14368506
> 
> 赞同：1
> 
> 时间：2013-01-16T21:49:08.967
> 
> 标签：xcode

我现在搜索了几个小时，但我找不到使用 xcode for iOS 应用程序创建的数据库的路径。数据库存在，导致其将数据加载到我的应用程序中，但我找不到我的数据库的路径。我正在使用 xcode 4.5 和 ios-simulator 6.0。

我在 Xcode/contents/ 下找到了一些文件夹，我在其中搜索了我的数据库，但没有成功^^。

那么它现在存储在哪里？

```
- (void)createOrOpenDB {
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docPath = [path objectAtIndex:0];

    dbPathString = [docPath stringByAppendingPathComponent:@"WorkoutPlans.db"];

    char *error;

    NSFileManager *fileManager = [NSFileManager defaultManager];

    //[fileManager removeItemAtPath:dbPathString error:nil];

    if(![fileManager fileExistsAtPath:dbPathString]) {
        const char *dbPath = [dbPathString UTF8String];

        if (sqlite3_open(dbPath, &workoutPlansDB) == SQLITE_OK) {
            const char *sql_cr_wp = "CREATE TABLE IF NOT EXISTS WORKOUTPLANS (ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , NAME TEXT NOT NULL  UNIQUE , DESCRIPTION TEXT NOT NULL  UNIQUE)";
            const char *sql_cr_en = "CREATE TABLE IF NOT EXISTS ENTITY (ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , NAME TEXT NOT NULL  UNIQUE , DESCRIPTION TEXT NOT NULL  UNIQUE )";
            const char *sql_cr_ex = "CREATE TABLE IF NOT EXISTS EXERCISE (ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , NAME TEXT NOT NULL  UNIQUE , DESCRIPTION TEXT NOT NULL  UNIQUE , REPS TEXT NOT NULL , WEIGHT TEXT NOT NULL)";
            const char *sql_cr_plen = "CREATE TABLE IF NOT EXISTS WPEN (PLANID, ENID, FOREIGN KEY(PLANID) REFERENCES WORKOUTPLANS(ID) ON DELETE CASCADE, FOREIGN KEY(ENID) REFERENCES ENTITY(ID) ON DELETE CASCADE)";
            const char *sql_cr_enex = "CREATE TABLE IF NOT EXISTS ENEX (ENTITYID, EXERCISEID, FOREIGN KEY(ENTITYID) REFERENCES ENTITY(ID) ON DELETE CASCADE, FOREIGN KEY(EXERCISEID) REFERENCES EXERCISE(ID) ON DELETE CASCADE)";

            sqlite3_exec(workoutPlansDB, sql_cr_wp, NULL, NULL, &error);
            sqlite3_exec(workoutPlansDB, sql_cr_ex, NULL, NULL, &error);
            sqlite3_exec(workoutPlansDB, sql_cr_en, NULL, NULL, &error);
            sqlite3_exec(workoutPlansDB, sql_cr_plen, NULL, NULL, &error);
            sqlite3_exec(workoutPlansDB, sql_cr_enex, NULL, NULL, &error);
            sqlite3_close(workoutPlansDB);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:43:57.153

您的数据库将存储在以下路径中

/Users/SystemName/Library/Application\ Support/iPhone\ Simulator/6.1/Applications/Application UniqueName/Documents\databasename

Xcode 与 iPhone 模拟器一起为您的应用程序的每个构建创建一个新的应用程序文件夹，并将旧的文档文件夹及其内容移动到新的应用程序文件夹中。您可以检查文档文件夹的内容，并决定您的 Bundle 中的文件是否比文档文件夹中的文件更适合使用。你应该明智而不是轻率地做出这个决定。

这是正确的行为。您的软件的用户可能对数据库进行了一些重大更改和修改。如果在升级小错误修复甚至功能增强时，他们的数据库更改、高分、修改后的图像或您的应用程序保存的任何内容突然被通用版本替换，他们可能不会喜欢它。

您应该做的是比较新数据库中的数据与用户拥有的数据，对于 SQLite，您应该将用户的条目导入或复制到新数据库中，然后您可以移动新数据库到文档文件夹，删除用户，但将其替换为包含用户数据和新数据的文件夹。

简而言之：确保不要用捆绑包中的新数据库替换现有数据库，因为这会破坏用户的更改。

# matlab - Surf 命令轴缩放

> ID：14368507
> 
> 赞同：1
> 
> 时间：2013-01-16T21:49:09.340
> 
> 标签：matlab, plot

我在使用[surf](http://www.mathworks.com/help/matlab/ref/surf.html)绘制 3D 表面时移动基准面时遇到问题。我有一个`RES`值< `10^-5`（例如`RES(30,40)=0.000043245`）的矩阵。如果我使用 surf 绘制这个矩阵：

```
surf(RES); axis([0 70 0 70 0 0.0008]); 
```

然后我得到一个很好的平滑图像。

现在我需要在整个矩阵中添加一个常数值 10，然后用新的数据绘制它。所以我想要与上图完全相同的图，只是我希望 z 轴从 10 变为 10.0008。在这种情况下，所有数字都更像`RES(30,40)=10.000043245`.

所以我尝试一下：

```
surf(RES+10); axis([0 70 0 70 10 10.0008]); 
```

我得到了这个非常厚实、块状的输出。

有谁知道它为什么这样做？两个数字应该看起来完全一样，不是吗？我所做的只是将 z 轴向上移动 10。

# map - SELECT 和 <= 和 >= 运算符的奇怪行为，返回垃圾或无

> ID：14368508
> 
> 赞同：1
> 
> 时间：2013-01-16T21:49:23.740
> 
> 标签：map, rebol

我正在尝试将运算符映射到 Rebol 2 中的对立面，例如：

```
op-map: [
    >= [<]
    <= [>]
] 
```

这不适用于`<=`：

```
>> select op-map to-word "<="
== none  ;-- expected [>] 
```

并给出了一个非常奇怪的回应`>=`：

```
>> select op-map to-word ">="
== [<]
    <= [>]  ;-- expected just [<] 
```

这在 Rebol 3 中可以正常工作。这是一个错误吗？如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:14:40.887

添加空格 -由于标签中的双重使用（如您所建议的那样），因此在单词中使用`<`和是特殊情况。`>`与常规使用一样，例如`3 < 4`，在后面放置一个空格`<`将防止解析器将其与标记混淆并将其视为一个单词：

```
op-map: [
    >= [< ]
    <= [>]
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:49:23.740

看起来是 Rebol 2 解析逻辑中的错误。它看到第一个`<`，然后开始解释后续输入，就好像它是一个 TAG！键入*（如 HTML 标记）*，直到找到结束符`>`。请注意：

```
>> length? op-map
== 2

>> op-map/2/1
== <]
    <= [>

>> type? op-map/2/1
== tag! 
```

因此，对于 Rebol 的 2 想法，这类似于您是否写了更多类似以下内容的内容：

```
op-map: [
    >= [<a href="http://hostilefork.com">]
] 
```

这不仅仅是块！有这个问题，它发生在PAREN！也：

```
>> op-map: first [(>= (<) <= (>))]
== (>= (<) <= (>))

>> length? op-map
== 2 
```

我不完全确定在 Rebol 3 中进行这项工作的规则是什么。它不允许在标签内使用括号：

```
>> print <[o]>
== <[o]> 
```

...但是您不能在源代码中使用不匹配的右大括号，而可以容忍左大括号：

```
>> print <]>
** Syntax error: missing "[" at "end-of-block"
** Near: (line 1) print <]>

>> print <[>
<[> 
```

...但是当它们在引号内时，您可以使用不匹配的结束符：

```
>> print <"]">
<"]"> 
```

更奇怪的是，您可以通过编程方式创建一个只包含一个不匹配的右大括号的标签：

```
>> print to-tag "]"
<]> 
```

因此，虽然它在给定的情况下看起来有更好的行为，但很难判断是否真的存在“修复”方面的形式化逻辑。新规则可能有类似但更微妙的问题。同时，为了安全起见，在 Rebol 2 中处理这些运算符时，您可以尝试从字符串创建它们：

```
op-map: compose/deep [
    (to-word ">=") [(to-word "<")]
    (to-word "<=") [(to-word ">")]
] 
```

它更冗长。但是字符串定界符的存在将阻止解析器尝试将`<`and解释`>`为标记定界符。

# sql-server - 如果月份和年份不存在行，SQL 在子表中显示 0 个计数

> ID：14368520
> 
> 赞同：1
> 
> 时间：2013-01-16T21:49:59.417
> 
> 标签：sql-server, sql-server-2000

我有两张表分销商和订单。我想获取每个月的订单计数（包括 0 个计数）我按 CustId 月份和年份分组。注意：客户端使用的是 SQL 2000 :(

这就是我要的

```
DistID   Month   Year   Orders
------------------------------
1        1       2012     4
1        2       2012     13
1        3       2012     5
2        1       2012     3
2        2       2012     0
2        3       2012     0
3        1       2012     8
3        2       2012     0
3        3       2012     3
4        1       2012     1
4        2       2012     0
4        3       2012     1
5        1       2012     6
5        2       2012     6
5        3       2012     0 
```

这就是我得到的

```
DistID   Month   Year   Orders
------------------------------
1        1       2012     4
1        2       2012     13
1        3       2012     5
2        1       2012     3
3        1       2012     8
3        3       2012     3
4        1       2012     1
4        3       2012     1
5        1       2012     6
5        2       2012     6 
```

我知道为什么。这是因为某些月份的 Orders 表中没有一行。如果该月份和年份的 Orders 表中没有任何行，有没有办法将计数设为 0？

这是我到目前为止所拥有的

```
SELECT 
D.DistID,
DATEPART(MONTH, Order_Date) AS [Month],
DATEPART(YEAR, Order_Date) AS [Year],
SUM(Total_PV) AS TotalPV,
COUNT(D.DistId) AS Orders

FROM Distributor D
LEFT OUTER JOIN Order O ON D.DistID = O.Distributor_ID                                           
WHERE DATEPART(YEAR, Order_Date) > 2005
GROUP BY DistID, DATEPART(MONTH, Order_Date), DATEPART(YEAR, Order_Date) 
```

感谢您的任何意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:00:07.760

您可以创建一个包含所有月份和年份的表，例如：

```
create table MonthList(year int, month int); 
```

如果您填写所有可用年份，则可以`left join`：

```
select  o.distributor_id
,       ml.month
,       ml.year
,       sum(o.total_pv) as totalpv
,       count(d.distid) as orders
from    monthlist ml
left join 
        [order] o 
on      datepart(year, o.order_date) = ml.year
        and datepart(month, o.order_date) = ml.month
where   ml.year > 2005
group by 
        o.distributor_id
,       ml.month
,       ml.year 
```

`Distributor`如果您不使用该表中的列，则无需加入。

# ruby-on-rails - LoadError（无法加载此类文件 -- static_helper.rb）：

> ID：14368521
> 
> 赞同：0
> 
> 时间：2013-01-16T21:50:00.057
> 
> 标签：ruby-on-rails

我正在尝试将旧的 rails 2.3 应用程序升级到 2.3.15，并且在更改 environment.rb 中的 RAILS_GEM_VERSION 行后出现以下错误

```
LoadError (cannot load such file -- static_helper.rb):
app/controllers/static_controller.rb:1:in `<top (required)>'
<internal:prelude>:10:in `synchronize'
/Users/bob/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/bob/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/bob/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:59:31.463

你在使用捆绑器吗？（[http://gembundler.com/rails23.html](http://gembundler.com/rails23.html)）。

我在将旧的 rails 2.3 应用程序更新到 2.3.15 时遇到了另一个错误，我可以通过设置捆绑程序并从中删除`config.gem`行来解决这个问题`config/environment.rb`

* * *

没关系 Bundler 的建议，我打赌`StaticController`希望找到相应的帮助文件。尝试创建一个名为`app/helpers/static_helper.rb`：

```
module StaticHelper
end 
```

# javascript - 相同的 JS 闭环问题 - 但 SO 的答案不起作用

> ID：14368523
> 
> 赞同：8
> 
> 时间：2013-01-16T21:50:18.107
> 
> 标签：javascript, jquery, closures

> **可能重复：**
> [JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

我已经阅读了相同的旧 javascript 闭包循环问题的所有数百万个重复项。我以为我理解它们，并且一直使用闭包几个月没有问题，直到今天。我难住了。

```
for (var i in groups){
    for(var j in groups[i]){
        $(unique_form).die('submit').live('submit'), function{
             function (groups2, i2, j2){
                 return function(){alert(groups2[i2][j2])}
              }(groups, i, j)
             }
         });
        }               
    }
 } 
```

当我提交每个独特的表单时 - 我不断收到关于 groups[i][j] 的最后一个元素的警报。显然，我在做一些愚蠢的事情，这是什么？我认为通过创建匿名函数 groups2、i2 和 j2 可以解决问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T21:54:18.253

您传递给的函数*在提交事件触发时*`.live()`执行。到那时，就会有它们的最终值。您需要在事件处理程序*之外创建闭包：**`i``j`*

 **```
(function (i2, j2) {
    $(unique_form).die('submit').live('submit', function{
        alert(groups[i2][j2])
    });
}(i, j)); 
```

请注意，我已从`groups`匿名函数中删除了参数。没有必要关闭它，因为它的价值不会改变。我还将整个函数表达式包装在括号中，这是约定（在这种情况下实际上需要强制将其解析为表达式）。

另请注意，我已删除`.live()`您问题中第一个参数后的右括号。它不应该在那里。

* * *

*旁注*。

`.live()`并且`.die()`已经被弃用了很长时间。使用`.on()`（使用 jQuery 1.7+）或`.delegate()`（使用旧版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:55:58.177

您的代码设置`groups.length`平方实时提交处理程序。每个实时处理程序都包含此函数的不同副本：

```
function{
    function (groups2, i2, j2){
        return function(){alert(groups2[i2][j2])}
    }(groups, i, j)
} 
```

当提交事件发生时，所有实时处理程序文件，每个都引用and的*最后一个*值。`i``j`

根据代码片段很难说出你真正想要的东西，如果有更多信息，我可能会提供更多帮助。祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T21:54:41.747

试试这个

```
for (var i in groups){
    for(var j in groups[i]){
        $(unique_form).die('submit').live('submit', function( groups2, i2, j2 ){
             return function (){
                 alert(groups2[i2][j2])
             }
         }(groups, i, j) );
        }               
    }
 } 
```**

# c++ - 用户定义的文字参数中的初始化列表

> ID：14368525
> 
> 赞同：9
> 
> 时间：2013-01-16T21:50:37.887
> 
> 标签：c++, c++11

我不知道这是否可能，但我想做类似的事情

```
int someval = 1;
if({1,2,3,4}_v.contains(someval )) 
```

但是当我尝试将文字定义为：

```
std::vector<int> operator"" _v ( std::initializer_list<int> t )
{
    return std::vector<int> (t);
} 
```

接受我得到的整数的初始化列表

```
 error: 'std::vector<int> operator"" _v(std::initializer_list<int> t)' has invalid argument list 
```

有没有办法做到这一点？我真正想要的是最终摆脱像

```
if(value == 1 || value ==2 || value == 3 ... 
```

不得不写这样的东西真的很烦人，因为你希望语法是

```
if value in (value1, value2 ...) 
```

或类似的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T22:03:49.963

这个怎么样：

```
#include <initializer_list>

template <typename T>
bool contains(std::initializer_list<T> const & il, T const & x)
{
    for (auto const & z : il) { if (z == x) return true; }
    return false;
} 
```

用法：

```
bool b = contains({1, 2, 3}, 5);  // false 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T02:48:37.723

> > 你希望语法是
> > 
> > ```
> > if value in (value1, value2 ...) 
> > ```
> > 
> > 或类似的东西。

如果您愿意添加*一个额外的字符*，请尝试以下语法：

```
#include <algorithm>
#include <iostream>
#include <array>

template <typename T0, typename T1, std::size_t N>
bool operator *(const T0& lhs, const std::array<T1, N>& rhs) {
  return std::find(begin(rhs), end(rhs), lhs) != end(rhs);
}

template<class T0, class...T> std::array<T0, 1+sizeof...(T)> in(T0 arg0, T...args) {
  return {{arg0, args...}};
}

int main () {
  if( 2 *in(1,2,3) ) { std::cout << "Hello\n"; }
  if( 4 *in(5,6,7,8) ) { std::cout << "Goodbye\n"; }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T21:55:47.003

§13.5.8/3 说：

> 文字运算符的声明应具有等效于以下之一的参数声明子句：
> 
> ```
> const char*
> unsigned long long int
> long double
> char
> wchar_t
> char16_t
> char32_t
> const char*, std::size_t
> const wchar_t*, std::size_t
> const char16_t*, std::size_t
> const char32_t*, std::size_t 
> ```

所以看起来你不能有一个`initializer_list`类型的参数。

我只能把显而易见的作为一种选择；如果你不介意多输入一点，你可以做类似的事情

```
std::vector<int> v(std::initializer_list<int> l) {
    return { l };
}

int someval = 1;
if(v({1,2,3,4}).contains(someval)) 
```

`initializer_list`或者，您可能会变得古怪并为（虽然尚未测试）编写一个运算符重载：

```
bool operator<=(std::intializer_list<int> l, int value) {
    return std::find(std::begin(l), std::end(l), value) != std::end(l);
} 
```

和

```
if ({1, 2, 3, 4} <= 3) 
```

应该管用...

**其实没关系，它没有。**您必须使用正常功能。

# gps - 确定 GPS 位置是否在城市范围内？

> ID：14368529
> 
> 赞同：2
> 
> 时间：2013-01-16T21:50:49.790
> 
> 标签：gps, location, geocoding, reverse-geocoding

我希望能够确定 GPS 位置是在有人居住的区域还是无人居住的区域。

我已经尝试了几个反向地理编码 API，比如 Nominatim，但都没有得到好的结果。它总是返回最近的可能地址，即使我选择了森林中间的位置。

有没有办法以合理的准确性确定这一点？是否有任何数据库或网络服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:14:26.387

由于您使用的是 Nominatim，因此您将在回复中获得最近地址的坐标。

由于[可以计算两个坐标之间的距离](http://www.movable-type.co.uk/scripts/latlong.html)，因此您可以使用它来计算到找到的最近地址的距离，并从中确定您是否靠近人口稠密的地区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T21:36:00.240

如果您必须自己计算，那么有趣的事情就开始了：

一个地区是否有人居住的信息存储在“ `Land_Use`”层的数字地图中。有森林、水、工业、墓地等的值。

您必须将这些 Land_use 多边形导入一个特殊的 DB ( `PostGres`)。这样的空间数据库提供了快速的地理索引，用于仅搜索相关的多边形。

一些国家可能也适合主内存，但是您需要某种地理空间索引，例如`Quad-Tree`或`k-d tree`存储多边形。

导入多边形后，它就是一个简单的“多边形中的点”查询，或“半径 r 内的多边形”。epolygon 的拼写表示土地用途。

OpenStreetMap 免费提供这些多边形。

否则，您必须从`TomTom`或可能从 NavTeq ( `Nokia Maps`) 购买它们。但这仅对大公司有意义。

# sql - 如何在 Microsoft Access 或 SQL 中选择多列中的顶部记录？

> ID：14368530
> 
> 赞同：1
> 
> 时间：2013-01-16T21:50:56.150
> 
> 标签：sql, ms-access, select

数据库中的每条记录都有多个列。

**如何选择那些同时**属于X列**和**Y 列中前 100 条记录的记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:53:05.010

```
select *
from table_name
where column_x in (
    select top 100 column_x
    from table_name 
    order by column_x )
and column_y in (
    select top 100 column_y
    from table_name
    order by column_y ); 
```

# ruby-on-rails - 使用 CanCan 和 Rolify 将特定用户角色添加到特定模型实例

> ID：14368531
> 
> 赞同：0
> 
> 时间：2013-01-16T21:51:00.493
> 
> 标签：ruby-on-rails, devise, cancan

当我通过 Rails 应用程序工作时，我还有另一个问题。该应用程序允许用户通过 Devise 进行注册。这样可行。在应用程序中，用户可以创建自己的名为 Circles 的组。这样可行。现在我希望用户能够将其他用户添加到他们的圈子。这行不通。

到目前为止，我已经实现了 CanCan 和 Rolify。我可以从 User 模型为用户分配角色，所以我知道设置工作正常。我无法弄清楚用户如何将另一个用户添加到特定的圈子。我查看了 SO 并发现了一些与我想在这里做的事情相近的东西：[Rails 3.1 中的授权：CanCan、CanTango、declarative_authorization？](https://stackoverflow.com/questions/8906237/authorization-in-rails-3-1-cancan-cantango-declarative-authorization)，但这不适用于我的情况。

我知道如何使用 CanCan 在应用程序级别添加角色。我想要做的是在特定的 Circle 实例中添加一个角色。并非所有用户都可以访问圈子，只有那些被添加的用户。

如果有人有任何想法，我愿意接受其他方式来实现这一点。设置它的最佳方法是什么？

**编辑**

我想出了如何从 Rails 控制台做到这一点。 `user.add_role :moderator, Circle.find(22)` 这完美地工作并保存到数据库中。我怎样才能通过视图中的表单来做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:30:01.797

使用控制器....它会在您提交表单后添加角色！例如，在控制器中，您可以只使用类方法:) 如果我需要更明确，请告诉我！干杯

# php - 将值传递到外部 js 文件中

> ID：14368533
> 
> 赞同：2
> 
> 时间：2013-01-16T21:51:03.197
> 
> 标签：php, javascript, ajax, cakephp

嘿，我希望有人可以帮助我，

我有一个位于 webroot/js 文件夹中的外部 js 文件，我使用以下方法将其插入到我的视图中：

```
echo $this->Html->script('script'); 
```

在 js 文件中，我有一个将数据插入数据库的 ajax 请求：

```
var assetData = { 
 "project_id":  $("#projectId").val(), 
 "asset_id":"??",
 "content": "content":$(this).html()
};
$.ajax({                    
 url:'/assets/add',
 type:"POST",                                        
 data:assetData
}); 
```

在我看来，我创建了一个带有 project_id 的隐藏表单字段，以便我可以在 js 文件中获取它，但是资产项是动态创建的，被创建并保存到资产表中，现在我想用更新该资产内容。

获得资产的最佳方式是什么？我无法获取 id 并将其保存，例如，在 div 的 id 中，因为它是在 js 文件中创建的。

我真的很感激任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:01:59.690

`/assets/add`应该返回它创建的资产的 ID。

如果您要插入 mysql 数据库，那么一种选择是使用[`mysql_insert_id`](http://au.php.net/mysql_insert_id)（手册上有 mysqli 和 pdo 等效项）。

```
var assetData = { 
 "project_id":  $("#projectId").val(), 
 "content": "content":$(this).html()
};
$.ajax({                    
 url:'/assets/add',
 type:"POST",                                        
 data:assetData,
 dataType:'text',
 success:function (data)
 {
    assetData['asset_id'] = (int)data;
 }
}); 
```

然后你`/assets/add`应该在创建 ID 后回显它

```
echo $asset_id; // some INT id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:54:49.983

因此，您可能需要考虑 HTML 部分。这些是 HTML 的一小部分，代表从单个标签到弹出窗口的任何内容。重要的是它没有 or 标签。

```
$.post('/assets/add', data, function (html) {
    $('#assets').append(html);
}, 'html'); 
```

在您发布数据后，您的调用会返回一段 HTML。然后，您可以将该 HTML 附加到页面上的 DIV。

```
<div id="assets">
   <div class="asset" id="asset-1">
       <p>Asset content</p>
   </div>
</div> 
```

在您的控制器（我假设它是 CakePHP）中，您有：

```
if ($this->Asset->save($this->data)) {
    $this->autoLayout = false;
    $this->render('asset_partial.html');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T23:01:18.047

使用我收到的建议是我设法解决问题的方法：

javascript文件：

```
$.ajax({                    
    url:'/assets/create',
    type:"POST",                                        
    data:assetData,
    dataType:'text',
    success: function (response) {
        if (response.success) {
            alert("response: "+response);
        } else {
            //console.log(response.data, response.code);
            alert("response: "+response);
        }
    }
}); 
```

控制器：

```
public function create($id = null) {
    if ($this->data != null) {
        $this->Asset->save($this->data);
        $this->autoRender = false;
        echo $this->Asset->id;
    }
} 
```

# javascript - 以下演示中的 FadeIn 和 fadeOut

> ID：14368534
> 
> 赞同：0
> 
> 时间：2013-01-16T21:51:09.677
> 
> 标签：javascript, jquery, html, css

在尝试了几个选项后，我无法让文本淡入淡出。无论我尝试什么，整个动画都会冻结，即使添加这样的东西

```
$("#headertxt".fadeIn('slow').css({"display" : "block"}); 
```

或者

```
$("#headerimg" + currentContainer).fadeOut(function() {
setTimeout(function() {
$("#headertxt".fadeIn({"display" : "block"}); 
animating = false;
}, 500);
});

$("#headerimg" + currentContainer).fadeOut(function() {
setTimeout(function() {
$("#headertxt".fadeOut({"display" : "block"}); 
animating = false;
}, 5000);
}); 
```

这是原始[演示](http://demo.marcofolio.net/bgimg_slideshow/)

这[是jfiddle](http://jsfiddle.net/HELLena/QxAKa/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:59:12.130

fadeIn 和 fadeOut 不将对象作为参数，所以我不确定你为什么有这些。您还缺少一个括号 before `.fadeIn`。

尝试这样的事情：

```
$("#headerimg" + currentContainer).fadeOut(function() {
    setTimeout(function() {
        $("#headertxt").fadeIn(); 
        animating = false;
    }, 500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:00:09.740

改变

```
$("#headertxt".fadeIn('slow').css({"display" : "block"}); //this will not work 
```

到

```
$("#headertxt").fadeIn('slow', function(){
  $(this).css('display', 'block');
});
// apply css after animation. 
```

# ubuntu - 在 Ubuntu 中使用 SMLNJ 时遇到问题

> ID：14368539
> 
> 赞同：1
> 
> 时间：2013-01-16T21:51:48.253
> 
> 标签：ubuntu, sml

在我开始并执行这个伟大的程序后，我希望看到输出`val it = 2 : int`

```
$ sml
Standard ML of New Jersey v110.74 [built: Fri Dec  7 10:09:50 2012]
- 1+1
= 
= 
= 
```

但是，我只看到等于，当我在 emacs 中执行相同的程序时，我会得到相同的行为。sml 从不打印结果。

我正在使用最新版本的 ubuntu。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:52:37.163

你忘了分号。

```
- 1 + 1;
val it = 2 : int 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:53:39.517

你需要一个 ; 在行尾

# c# - C# Order List 基于具有 lambda 表达式的嵌套列表值的平均值

> ID：14368543
> 
> 赞同：0
> 
> 时间：2013-01-16T21:52:26.480
> 
> 标签：c#, lambda

我想知道是否可以使用 lambda 表达式根据嵌套项目列表的平均值对项目列表进行排序。

在项目方面，我有一个产品列表，每个产品都可以有很多评论。我想根据每个产品的评论列表中的平均评分来订购产品列表。

我有这个：

```
products = category.Products.OrderBy(i => i.Reviews.Average(x => x.Rating)); 
```

这构建没有问题，但是当我运行它时，它返回一个错误，说

> *序列不包含任何元素*

是否可以使用 lambda 表达式来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T21:55:48.127

`Enumerable.Average`抛出 ，`InvalidOperationException`因为序列不包含任何元素，因为产品没有`Reviews`.

你可以使用[`Enumerable.DefaultIfEmpty(customValue)`](http://msdn.microsoft.com/en-us/library/bb355419.aspx)：

```
products = category.Products
    .OrderBy(i => i.Reviews.Select(r => r.Rating).DefaultIfEmpty(0).Average()); 
```

也许您想从结果中排除这些产品：

```
products = category.Products
    .Where(p => p.Reviews.Any())
    .OrderBy(p => p.Reviews.Average(r => r.Rating)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:54:07.933

您的一种产品可能没有评论。你应该决定给它什么评级，比如说 99，因为你希望它出现在最后，所以：

```
category.Products.OrderBy(p=>p.Reviews.Count > 0 ?
                          p.Reviews.Average(r=>r.Rating) : 99); 
```

# android - How do i send an list item to the end of the list in android?

> ID：14368557
> 
> 赞同：0
> 
> 时间：2013-01-16T21:53:22.453
> 
> 标签：android

My idea is to do a shopping list and when i click on an item it gets a strikethrough and goes to the end of the list. So far i have gotten everything except sending the item to the end of the list. Here is a bit of my code:

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);

    TextView text = (TextView) v.findViewById(android.R.id.text1);
    text.setPaintFlags(text.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);

} 
```

Edit:

Thank you for the anwsers so far. Some helpful people requested more code so here is everything (including adding stuff to list):

```
public class ShoppingActivity extends ListActivity {

    ArrayList<String> list = new ArrayList<String>();
    ArrayAdapter<String> adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_shopping);

        Button add = (Button) findViewById(R.id.btnAdd);

        adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, list);

        OnClickListener listner = new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                EditText item = (EditText) findViewById(R.id.etItem);
                list.add(item.getText().toString());
                item.setText("");
                adapter.notifyDataSetChanged();
            }
        };

        add.setOnClickListener(listner);

        setListAdapter(adapter);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);

        TextView text = (TextView) v.findViewById(android.R.id.text1);
        text.setPaintFlags(text.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:01:06.727

Your adapter tells the list what order items are in. Make the adapter tell it that this item is at the end- probably by removing it from the ArrayList its in and adding it to the end of the list, but the exact method depends on your code. Then tell the adapter that its data has changed by calling notifyDataSetChanged.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T21:57:01.757

first get the list long. Once you have it, you only set the item strikethrough position to the list long, this will put your item as the bottom

# macos - 保留一个 NSTextField （不可见）或在需要时开始一个新的？

> ID：14368560
> 
> 赞同：0
> 
> 时间：2013-01-16T21:53:45.147
> 
> 标签：macos, nsview, nstextfield

我有一个“画布”视图，用户可以在其中输入不同位置的短字符串。我使用 NSTextField 进行条目或编辑，但是当不被编辑时，文本只是在视图的 draw 方法中绘制。

目前，每当需要输入或编辑时，我都会创建一个新的 NSTextField ，并且不保留它，因此当它作为子视图被删除时，它可能已被释放。

这工作正常，打字速度比处理器慢，没有明显的延迟。

最近发现需要从程序的不同部分去'finish editing'方法，所以sender不再一定是NStextField；我为用于此目的的文本字段添加了一个属性，现在在完成特定编辑任务时将其设置为 nil。这似乎仍然可以正常工作。

作为一个原则问题，最好简单地保留一个 NSTextField，然后简单地从超级视图中添加或删除它，而不是总是创建一个新的？

稍后添加：我决定使用单个 NSTextField，根据需要将其放入和取出超级视图。这对我来说似乎“更干净”，但我仍然会对任何赞成或反对的意见感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T04:23:13.533

你的决定可能是最明智的。您只需要使用一个文本字段，并且由于您假设它会释放，我猜它会保留在内存中，并且在某些时候它会吃掉各种内存。

# gcc - gcc 是否使用内存填充模式？

> ID：14368561
> 
> 赞同：1
> 
> 时间：2013-01-16T21:53:55.727
> 
> 标签：gcc

我知道 Microsoft 编译器使用不同的填充模式初始化内存以指示内存状态（新分配、释放、未初始化等）。gcc（4.6.1）会这样做吗？如果是这样，模式记录在哪里？我在缓冲区中看到这种模式，想知道编译器是否设置了它或我还没有找到的其他代码：0x01010101

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:36:13.553

GCC 不这样做。

无论您碰巧使用什么 C 库都可以。我相信 Glibc 对双重释放和堆损坏有一些保护，虽然我不确定它在哪里记录，但你可以在这里找到 Glibc 主页[和](http://sourceware.org/git/?p=glibc.git)[这里](http://www.gnu.org/software/libc/)的来源。

# asp.net - IIS 7 在网站上部署重写规则

> ID：14368562
> 
> 赞同：0
> 
> 时间：2013-01-16T21:54:03.953
> 
> 标签：asp.net, visual-studio-2008, deployment, iis-7, web-config

我必须在 IIS7/VS2008 上应用一些重定向规则，并且对如何部署它有疑问。我们有一个网站而不是 Web 应用程序，因此大多数其他 SO 问题对我没有用。

为了在网站上应用如下规则：

```
 <rewrite>
       <rules>
       <clear />
          <rule name="Redirect rule1 for Static404Redirects">
            <match url=".*" />
            <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
               <add input="{Static404Redirects:{REQUEST_URI}}" pattern="(.+)" />
             </conditions>
             <action type="Redirect" url="{C:1}" appendQueryString="false" />
           </rule>
        </rules>
    </rewrite> 
```

1.  在 Bin 文件夹中没有*网站名称 .dll*。只是一些其他的dll，比如Ajaxtoolkit。
2.  它应该有任何 dll/程序集/GAC 作为网站吗？
3.  我可以使用任何 IIS UI 作为规则部分简单地将测试服务器 web.config 复制到生产环境，它应该可以工作。
4.  更改 web.config 后是否还需要从 IIS 重新启动应用程序？还是新的更改会在保存 web.config 时自行产生影响？

它是否正确？还是我需要做其他事情？恐怕 web.config 更改会导致任何程序集更改/dll/版本或我应该首先想到的任何其他更改？正如我提到的它的网站项目，它甚至没有在 Prod 上安装 VS2008。基本上我想确定我知道我在做什么。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:22:16.870

假设您实际上使用的是 IIS7（AFAIK 无法在 Server 2008 上安装 IIS6），上面的代码采用[IIS7 Rewrite Module](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-video-walkthrough)使用的语法。这是一个扩展，默认情况下不与 IIS 一起安装，它需要在每台服务器上单独安装。

1 + 2) 网站（相对于 Web 应用程序）可以编译或未编译部署。如果站点已经编译，那么在 bin 目录中将有一个或多个 dll 文件，其中包含构建站点中使用的对象的代码，以及用于 aspx 页面的占位符文件。编译站点的优点是它的执行速度更快，特别是从“冷启动”（站点不保存在服务器的内存中）开始。如果该站点未编译，它将具有包含代码的 .aspx.cs/.aspx.vb 文件，或者

```
<script runat="server"> // code here </script> 
```

.aspx 文件本身中的标签。

3) IIS GUI 只是一种更简单的生成规则的方法，这些规则将放置在 web.config 文件中。在服务器之间复制文件应该可以工作，从您的开发人员复制到实时环境也应该有效（关于将连接字符串等更改为适合实时环境的通常规则适用）。一些开发者会在他们的开发服务器或本地机器上创建规则并以这种方式部署它们。如果您希望您根本不必接触 IIS GUI，只需在代码中编写规则即可。要使规则生效，您需要在每台服务器上安装 IIS 7 Rewriter 模块。

4) 保存或“触摸” web.config 文件将强制重新启动应用程序。进程中的会话数据将丢失（作为否定），但规则应该立即生效 - 不需要 IIS 重置。

更改 web.config 以添加新规则不应破坏您的任何代码或编译的程序集，只要属性和 XML 语法保持有效，就不会破坏明显的破坏性更改 - 更改或删除应用程序密钥或连接字符串、目标框架、自定义错误或调试模式显然会影响您的网站。虽然没有必要重新发布。由于 XML 故意容易出现语法错误，我强烈建议您首先在非实时站点上测试您的更改，弄乱 web.config 是关闭整个站点的最快方法之一。

# moxy - JAXB/MOXy XPath 谓词支持

> ID：14368563
> 
> 赞同：2
> 
> 时间：2013-01-16T21:54:05.237
> 
> 标签：moxy

我们正在处理一个相当复杂的 XML 模式 (HR-XML)，并希望使用基于 xpath 的映射方法来解组到我们本地定义的域对象。我们尝试了 Simple 但遇到了问题。我们最近尝试了 MOXy，运气好一点，但遇到了谓词支持问题。我正在尝试确认 MOXy 是否支持我认为我需要使用的谓词。我需要做的是根据兄弟元素的值检索一个元素的值。

当它被执行时，我得到空值，就像它没有正确选择一样。有没有人做过类似的？也许还有另一个问题？

示例 XML：

```
<person>
<communication>
    <address>
        <street>101 First St.</street>
        <city>Whoville</city>
        <state>CA</state>
    </address>
</communication>
<communication>
    <channelcode>email</channelcode>
    <uri>johndoe@some.com</uri>
</communication>
<communication>
    <channelcode>telephone</channelcode>
    <usecode>mobile</usecode>
    <dialnumber>555-555-5555</dialnumber>
</communication>
</person> 
```

示例对象：

```
public class Person
{
    private String email;
    private Address homeAddress;
    private String homePhone;
... 
```

xml-bindings.xml 片段示例：

```
<java-types>
      <java-type name="Person">
        <xml-root-element name="person">
        <java-attributes>
          <xml-element java-attribute="email" xml-path="communication/uri[../channelcode/text()='email']/text()" />
          <xml-element java-attribute="homePhone" xml-path="communication[channelcode/text()='telephone']/dialnumber/text()" />
          <xml-element java-attribute="homeAddress" xml-path="communication/Address" />
        </java-attributes>
     </java-type>
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:31:40.137

目前[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)要求谓词检查 XML 属性的值。这意味着如果您有以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<person>
   <communication channelcode="address">
      <address>
         <city>Whoville</city>
         <state>CA</state>
         <street>101 First St.</street>
      </address>
   </communication>
   <communication channelcode="email">
      <uri>johndoe@some.com</uri>
   </communication>
   <communication channelcode="telephone">
      <dialnumber>555-555-5555</dialnumber>
   </communication>
</person> 
```

然后，您可以使用以下内容对其进行映射：

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum14368563"
    xml-accessor-type="FIELD">
    <java-types>
        <java-type name="Person">
            <xml-root-element/>
            <xml-type prop-order="homeAddress email homePhone"/>
            <java-attributes>
                <xml-element java-attribute="homeAddress" xml-path="communication[@channelcode='address']/address"/>
                <xml-element java-attribute="email" xml-path="communication[@channelcode='email']/uri/text()"/>
                <xml-element java-attribute="homePhone" name="communication[@channelcode='telephone']/dialnumber/text()"/>
            </java-attributes>
        </java-type>
     </java-types>
</xml-bindings> 
```

# algorithm - 在三角网格中检测四面体？

> ID：14368571
> 
> 赞同：5
> 
> 时间：2013-01-16T21:54:22.980
> 
> 标签：algorithm, math, 3d, geometry, mesh

假设我有一个网格，它有连接顶点的线，其方式允许将其拆分为四面体。在给定顶点和线的情况下，是否有一种算法可以用来检测四面体的存在？（即，给定带有连接线的网格，输出一组具有相同形状和体积的四面体。）

编辑：四面体不允许相交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:51:05.987

我认为基于图形的方法可能会奏效。

首先，可以通过注意一组边定义`G1(V1,E1)`了几何顶点之间的连通性的无向图来恢复三角形面的列表。在此图中，三角形面是任意长度为 3 的循环。

```
for (i = all vertices in G1)
// form list of vertex triplets
    list = find all length 3 cycles from ith vertex
// push new faces onto output
    for (j = all triplets in list)
        [v1,v2,v3] = list(j)
        if ([v1,v2,v3] is not an existing face)
            push triplet [v1,v2,v3] as a new face
        endif
    endfor
endfor 
```

接下来，可以通过形成定义面之间连通性的无向图来恢复四面体`G2(V2,E2)`（即，如果面共享一条边，则面是连接的）。在此图中，四面体是任何长度为 4 的循环。

```
for (i = all vertices in G2)
// form a list of face tuples
    list = find all length 4 cycles from ith vertex
// push new tetrahedra onto output
    for (j = all tuples in list)
        [f1,f2,f3] = list(j)
        [v1,v2,v3,v4] = unique vertices in faces [f1,f2,f3]
        if ([v1,v2,v3,v4] is not an existing tetrahedra)
            push tuple [v1,v2,v3,v4] as a new tetrahedra
        endif
    endif
endfor 
```

希望这可以帮助。

# sql - 从存储过程将数据插入 Temp 表

> ID：14368573
> 
> 赞同：2
> 
> 时间：2013-01-16T21:54:43.230
> 
> 标签：sql, sql-server, tsql, stored-procedures

基于这篇文章[如何根据列号创建临时表？](https://stackoverflow.com/questions/14367492/how-to-create-temp-table-based-on-column-number#14367618)我可以用 name 创建临时表`#VarTemp`。但是如何从 exec 存储过程中抽取数据？它正在抛出错误

> *无效的对象名称“#VarTemp”*

这是我的代码：

```
DECLARE @ColCount int = 20
DECLARE @Ct int = 1
DECLARE @SQL nvarchar(max) = ''

SET @SQL = 'CREATE TABLE #VarTemp('

WHILE @Ct < @ColCount+1
BEGIN
    SET @SQL += 'Col' + CAST(@Ct as nvarchar(8)) + ' nvarchar(256),'
    SET @Ct = @Ct + 1
END
SET @SQL = LEFT(@SQL, (LEN(@SQL) - 1))
SET @SQL += ')'

Exec (@SQL)
INSERT into #VarTemp EXEC sp_FindStringInTable 'Nareshbhai%', 'dbo', 'aspnet_Membership'
 --- Get error Invalid object name '#VarTemp'. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T21:59:40.630

您的临时表的范围仅限于`EXEC`命令...一旦该语句完成，它将自动删除。

如果您动态构建临时表，则必须在同一动态 sql 语句中插入临时表......并且您还必须在同一动态 sql 语句中从中读取：

```
SET @SQL = 'CREATE TABLE #VarTemp('

WHILE @Ct < @ColCount+1
BEGIN
    SET @SQL += 'Col' + CAST(@Ct as nvarchar(8)) + ' nvarchar(256),'
    SET @Ct = @Ct + 1
END
SET @SQL = LEFT(@SQL, (LEN(@SQL) - 1))
SET @SQL += ')

INSERT into #VarTemp EXEC sp_FindStringInTable ''Nareshbhai%'', ''dbo'', ''aspnet_Membership''

SELECT * FROM #VarTemp
'

Exec (@SQL) 
```

# actionscript-3 - 使用 socket.io 将数据从 flash 发送到 node.js 服务器

> ID：14368576
> 
> 赞同：5
> 
> 时间：2013-01-16T21:54:54.520
> 
> 标签：actionscript-3, flash, node.js, websocket, socket.io

我在 node.js 中有一个简单的基于 socket.io 的服务器，它监听端口 81 中的套接字（例如）我在用 Javascript 编写的客户端之间连接和传递数据没有问题但是经过多次尝试后我无法得到我的Flash 应用程序连接到服务器并将数据传递给它（我在网络上找到了一些示例 - 但所有这些示例都是基于 flex 的，并且使用不属于基本 AS3 库的类）

当我尝试使用 XMLSocket 连接到套接字时 - 我收到 Security Sandbox Violation Error - 我知道我需要加载策略文件（假设可以使用 socket.io）但我无法做到它

这是我的闪存代码：

```
Security.loadPolicyFile("http://127.0.0.1:81/crossdomain.xml");
socket = new XMLSocket("127.0.0.1", 81);
socket.addEventListener(Event.CONNECT, onConnect);  
socket.addEventListener(IOErrorEvent.IO_ERROR, onError);  
socket.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecurityEvent);
socket.addEventListener(DataEvent.DATA, onData); 
```

服务器端代码是

```
var app = require('http').createServer(function (req, res) {...})
   , io = require('socket.io').listen(app, { log: true })
   , fs = require('fs')

app.listen(81);

io.sockets.on('connection', function (socket) {
    console.log("connection "+socket.id);
    socket.on("message",function(data){
        console.log("data: "+data);
    });
    socket.on("data",function(d){
         console.log('data from flash: ',d);
    });
    socket.on('disconnect', function (socket) {
        console.log("disconnect");
    });
}); 
```

我的 crossdomain.xml 是：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
    <site-control permitted-cross-domain-policies="master-only"/>
    <allow-access-from domain="*" to-ports="*"/>
</cross-domain-policy> 
```

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T08:43:55.260

在我们的上一个项目中，我们使用[了 FlashSocket.IO](https://github.com/simb/FlashSocket.IO)，它的工作就像一个魅力。

我们必须在服务器端做一些小的调整（即确保 socket.io 监听端口 843 而不是 10843 上的策略文件）并激活 flashsocket 传输，但通信很轻松。

```
io.configure(function() {
  io.set('transports', ['websocket','flashsocket']);
  io.set('flash policy port', 843);
}); 
```

注意：此配置要求 node.js 以 root 身份运行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:57:17.617

试试[这个](https://stackoverflow.com/questions/14093429/how-to-fix-this-probably-cross-domain-policy-error-using-flash-socket-io-and/14093590#14093590)解决方案（除了843端口上的游戏服务器，你还需要设置套接字策略服务器）

顺便说一句：当您使用套接字时，请始终使用类似 url `xmlsocket://host:port`（对于端口 843 闪存自动加载策略文件），而不是`http://host:port`仅用于 http 请求。

# php - 数据库中的 Blob 或指向文件的指针？

> ID：14368581
> 
> 赞同：1
> 
> 时间：2013-01-16T21:55:10.573
> 
> 标签：php, mysql

> **可能重复：**
> [何时将图像存储在数据库（mySQL）中，何时不存储？（将图像链接到数据库中的项目）](https://stackoverflow.com/questions/8407372/when-to-store-images-in-a-databasemysql-and-when-not-linking-image-to-item-i)
> [将文件存储在服务器上的最佳方法是（在数据库中或单独存储位置）？](https://stackoverflow.com/questions/14215701/which-is-the-best-method-to-store-files-on-the-server-in-database-or-storing-th)

我应该考虑在使用数据库存储 MP3/pdf 之间进行最佳选择。将文件作为 BLOB 存储在数据库中会更好吗？还是只有一个允许我查看文件系统的字段更好？

有问题的文件不太可能超过 15MiB，但都可能至少为 1MiB，以防万一。

数据将通过 PHP 访问，如果这有所不同...

编辑：我将使用我已经在做的事情:) 文件系统上的资源以及数据库中的文件名。谢谢或输入！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:09:05.197

在过去的 3 年里，我一直在从事一个项目，其中大型附件存储在数据库中。

## 好处

*   与处理相关文件相比，管理数据库中的记录更容易且代码更少。
*   即使使用 CakePHP 的行为来自动执行任务。数据库更容易。
*   一些项目有将数据保存在数据库中的安全要求（即使它并没有真正提高安全性）。
*   自动构建过程可以轻松备份数据，因为它已经在数据库中。

## 缺点

*   为开发拍摄数据库快照是一件痛苦的事情。
*   在您传递了几个 GB 的大小之后。不管人家怎么告诉你。您会开始怀疑数据库引擎是否可以处理它。
*   转储数据库开始需要很长时间。
*   数据迁移到不同的模式开始需要非 SQL 解决方案。

## 关于 DB Blob 的神话

*   您的数据库无法处理大型数据库文件。
*   硬盘驱动器上的一个坏扇区意味着您可能会丢失所有 blob 数据。
*   存储在数据库中会产生性能成本。
*   这样更安全。
*   从数据库读取并发送到客户端比读取文件并发送它要慢。

以上所有（根据我的经验）都是**错误**的。

## 关于大斑点的事实

*   有一天，您不再需要它在数据库中。
*   GUID 记录标识符是您的朋友。不要在文件名中使用记录 (int)ID。
*   您不需要反向从文件名中查找记录，但您需要从记录中查找文件。所以你可以只使用 guid 作为文件名。
*   备份/复制文件系统和小型数据库更容易，然后只是大型数据库。
*   不要将文件存储在您的 webroot 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T22:04:29.060

我认为对于大多数用例，仅存储文件路径是最好的方法。对我来说，这种方法的优点包括：

*   对于用户可以下载的图像或其他文件的情况，您可以让客户端直接下载/缓存文件。
*   允许在将来某个时候需要时实施 CDN（即只需更新数据库中的文件引用
*   它将大大减少在应用程序和数据库之间传回的数据量，潜在地消除额外的带宽使用（如果数据库在远程服务器上）并使您的查询响应更快（因此不会占用您的数据库）。
*   它使数据库备份更快。
*   它允许您对资产使用传统的文件管理技术。

存储 blob 有一些潜在的用例：

*   也许您想对资产执行某种二进制搜索（尽管很容易认为有比 MySQL 更好的解决方案）。
*   由于某种原因，您需要保证没有孤立文件或没有实际文件的条目（即提交图像事务）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-16T21:56:11.113

最好的办法是将文件保存在上传目录中，然后将该位置传递给 MySQL

# jquery - Colorbox JQuery 无法正常工作

> ID：14368582
> 
> 赞同：0
> 
> 时间：2013-01-16T21:55:27.507
> 
> 标签：jquery, colorbox

我是第一次使用 colorbox，我需要一些帮助。我在正确的文件夹中有文件。所以我不确定问题是什么。

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"             "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

 <link href="colorbox.css" rel="stylesheet" type="text/css" />

        <script src="jquery.colorbox-min.js"></script>

</head>
<title>Untitled Document</title>

<body>
<!--JQuery library-->
<a href="http://jquery.com/">jQuery</a>
    <script src="jquery.js"></script>
    <script>
      var foo = "bar";
    </script>

<!--Colorbox Call-->

        <a class='gallery'     href='images/DSC_0114.JPG'>Photo_1</a>
        <a class='gallery'     href='images/money2.jpg'>Photo_2</a>
        <a class='gallery'     href='images/money2.jpg'>Photo_3</a>

        <script>
            jQuery(document).ready(function() {
            jQuery('a.gallery').colorbox();
            });;
        </script>

</body> 
```

类“box”的内容 id “box” 放在这里

我是初学者，所以请指出你想到的一切！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:04:01.290

您在加载 jquery 之前加载颜色框。它需要反过来。

```
<script src="jquery.js"></script>
<script src="jquery.colorbox-min.js"></script> 
```

# javascript - 在正文加载javascript上调用函数？

> ID：14368583
> 
> 赞同：5
> 
> 时间：2013-01-16T21:55:30.983
> 
> 标签：javascript, onload

> **可能重复：**
> [加载页面时运行函数](https://stackoverflow.com/questions/4842590/run-function-when-page-is-loaded)

我的身体里有一个脚本，一个相对较长的脚本，我想把它放在一个单独的 .js 文件中，然后只在身体加载时调用函数，而不是将脚本放在正文中，但我不知道如何叫它。帮助？

脚本：

```
 <script type="text/javascript">
            // Set the number of snowflakes (more than 30 - 40 not recommended)
     var snowmax = 35

     // Set the colors for the snow. Add as many colors as you like
     var snowcolor = new Array("#ddddff", "#ccccdd", "#f3f3f3", "#f0ffff")

     // Set the fonts, that create the snowflakes. Add as many fonts as you like
     var snowtype = new Array("Times", "Arial", "Times", "Verdana")

     // Set the letter that creates your snowflake (recommended: * )
     var snowletter = "*"

     // Set the speed of sinking (recommended values range from 0.3 to 2)
     var sinkspeed = 0.6

     // Set the maximum-size of your snowflakes
     var snowmaxsize = 30

     // Set the minimal-size of your snowflakes
     var snowminsize = 8

     // Set the snowing-zone
     // Set 1 for all-over-snowing, set 2 for left-side-snowing
     // Set 3 for center-snowing, set 4 for right-side-snowing
     var snowingzone = 1

     ///////////////////////////////////////////////////////////////////////////
     // CONFIGURATION ENDS HERE
     ///////////////////////////////////////////////////////////////////////////

     // Do not edit below this line
     var snow = new Array()
     var marginbottom
     var marginright
     var timer
     var i_snow = 0
     var x_mv = new Array();
     var crds = new Array();
     var lftrght = new Array();
     var browserinfos = navigator.userAgent
     var ie5 = document.all && document.getElementById && !browserinfos.match(/Opera/)
     var ns6 = document.getElementById && !document.all
     var opera = browserinfos.match(/Opera/)
     var browserok = ie5 || ns6 || opera

         function randommaker(range) {
             rand = Math.floor(range * Math.random())
             return rand
         }

         function initsnow() {
             if (ie5 || opera) {
                 marginbottom = document.body.scrollHeight
                 marginright = document.body.clientWidth - 15
             } else if (ns6) {
                 marginbottom = document.body.scrollHeight
                 marginright = window.innerWidth - 15
             }
             var snowsizerange = snowmaxsize - snowminsize
             for (i = 0; i <= snowmax; i++) {
                 crds[i] = 0;
                 lftrght[i] = Math.random() * 15;
                 x_mv[i] = 0.03 + Math.random() / 10;
                 snow[i] = document.getElementById("s" + i)
                 snow[i].style.fontFamily = snowtype[randommaker(snowtype.length)]
                 snow[i].size = randommaker(snowsizerange) + snowminsize
                 snow[i].style.fontSize = snow[i].size + 'px';
                 snow[i].style.color = snowcolor[randommaker(snowcolor.length)]
                 snow[i].style.zIndex = -1;
                 snow[i].sink = sinkspeed * snow[i].size / 5
                 if (snowingzone == 1) {
                     snow[i].posx = randommaker(marginright - snow[i].size)
                 }
                 if (snowingzone == 2) {
                     snow[i].posx = randommaker(marginright / 2 - snow[i].size)
                 }
                 if (snowingzone == 3) {
                     snow[i].posx = randommaker(marginright / 2 - snow[i].size) + marginright / 4
                 }
                 if (snowingzone == 4) {
                     snow[i].posx = randommaker(marginright / 2 - snow[i].size) + marginright / 2
                 }
                 snow[i].posy = randommaker(2 * marginbottom - marginbottom - 2 * snow[i].size)
                 snow[i].style.left = snow[i].posx + 'px';
                 snow[i].style.top = snow[i].posy + 'px';
             }
             movesnow()
         }

         function movesnow() {
             for (i = 0; i <= snowmax; i++) {
                 crds[i] += x_mv[i];
                 snow[i].posy += snow[i].sink
                 snow[i].style.left = snow[i].posx + lftrght[i] * Math.sin(crds[i]) + 'px';
                 snow[i].style.top = snow[i].posy + 'px';

                 if (snow[i].posy >= marginbottom - 2 * snow[i].size || parseInt(snow[i].style.left) > (marginright - 3 * lftrght[i])) {
                     if (snowingzone == 1) {
                         snow[i].posx = randommaker(marginright - snow[i].size)
                     }
                     if (snowingzone == 2) {
                         snow[i].posx = randommaker(marginright / 2 - snow[i].size)
                     }
                     if (snowingzone == 3) {
                         snow[i].posx = randommaker(marginright / 2 - snow[i].size) + marginright / 4
                     }
                     if (snowingzone == 4) {
                         snow[i].posx = randommaker(marginright / 2 - snow[i].size) + marginright / 2
                     }
                     snow[i].posy = 0
                 }
             }
             var timer = setTimeout("movesnow()", 50)
         }

     for (i = 0; i <= snowmax; i++) {
         document.write("<span id='s" + i + "' style='position:absolute;top:-" + snowmaxsize + "'>" + snowletter + "</span>")
     }
     if (browserok) {
         window.onload = initsnow
     }
            </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:57:48.263

您可以`<body onload="aFunction()">`直接使用 HTML 正文声明，也可以使用[jQuery](http://api.jquery.com)做同样的事情，我发现它更具可读性：

```
$(document).ready(function() {
    aFunction();
});
// This will wait for the DOM (your HTML) to be loaded before executing aFunction 
```

甚至做：

```
$(window).load(function () {
    aFunction(); 
});
// This will wait for every element in the page (including CSS, JS files ...) 
// to be loaded before executing aFunction 
```

使用 jQuery 而不是旧版 Javascript 的另一个优点是您的代码可以在所有主要浏览器中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T21:58:21.680

创建一个新文件`script.js`，将所有脚本移入其中并将其添加到文档中：

```
<script type="text/javascript" src="script.js"></script> 
```

然后在文件中使用 onload 事件：

```
window.onload = function () {
   all your code goes here.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T22:00:55.230

由于您的脚本底部已经有一个 window.onload 分配并且该脚本当前可以正常工作，因此我认为如果您将它放在一个单独的文件中，然后用普通脚本标签代替当前代码。

因此，只需将脚本复制到其中，`snowScript.js`然后将这一行替换为当前代码：`<script type="text/javascript" src="snowScript.js"></script>`

# function - 用伪代码表示数学函数

> ID：14368586
> 
> 赞同：1
> 
> 时间：2013-01-16T21:55:40.950
> 
> 标签：function, math, pseudocode

在编写伪代码（例如平方、平方根 vs.）时，它应该如何表示数学函数？

```
 if (b[i] > 0) {
            axb = axb + (a[i] * b[i]);
            asquare = asquare + Math.pow(a[i], 2);
            bsquare = bsquare + Math.pow(b[i], 2);
        } 
```

如何用伪代码表示这个表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:46:58.587

以任何清晰简洁的方式表示它们。你可以使用标准的数学符号，如果你喜欢，或者如果在你的编辑器中太难使用，插入符号运算符`^`通常用于取幂，`sqrt()`用于平方根，对于其他幂和根，取幂应该足够了（即，`x^3`或`x^(1/3)`等）。

# linux - 单步执行 Linux 内核源代码？

> ID：14368587
> 
> 赞同：4
> 
> 时间：2013-01-16T21:55:42.187
> 
> 标签：linux, unix, ubuntu, kernel

我的目标是了解 Linux 的工作原理。我知道那里有更小的内核——我有 Minix 书，但问题是在教授概念的同时还可以——我真的很想了解 linux 内核的细节。

我有一份linux内核源代码。有什么技术可以让我“启动”这个源代码并以某种方式逐步执行代码，以便我可以看到发生了什么？

如果不是，那么了解正在发生的事情的下一个最佳技术是什么（包括推荐的书籍、博客、技术文档等）？

编辑

源代码是否有针对特定操作系统领域的良好文档？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T22:13:18.550

您可以在“用户模式 ​​Linux”架构中构建内核，并在另一个 (Linux) 操作系统中将其作为正常进程运行。（提示：RTFM，“make ARCH=um”）

然后你可以在调试器下运行它，在任何地方或任何地方设置断点，它就像一个普通的用户空间任务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T21:59:49.180

[http://www.amazon.com/Professional-Linux-Kernel-Architecture-Programmer/dp/0470343435/ref=sr_1_1?ie=UTF8&qid=1358373427&sr=8-1&keywords=professional+linux+kernel+architecture](https://rads.stackoverflow.com/amzn/click/com/0470343435)

我推荐这本书胜过其他任何书。这将解释一切如何运作并且仍然非常准确。

概念真的很重要，本书将向您指出内核中的关键功能，以便您自己了解详细信息。要阅读的简单内容是一些系统调用，或者只是打开一些核心文件并通读函数并尝试弄清楚它们在做什么，或者只是手动跟踪内容。

如果你想单步执行内核，你可以使用像 QEMU 这样的虚拟化软件并在调试模式下加载内核（QEMU 支持远程 GDB），你可以将内核的符号表`kernel.syms`（IIRC）加载到 GDB 中，你可以看看到底在执行什么。虽然对于在内部运行的内核来说这可能非常慢，并且实际上只对调试开发内核有用，但是如果您愿意接受减速，那就去吧。

如前所述，最好是阅读源代码，至少我是这样学习的。找到您想要查看的任何功能的关键功能，并且不难单步执行代码并查看发生了什么（使用 TAGS 或 CSCOPE 之类的东西可以使这更容易）。

# javascript - 如何检查两个对象是否具有相同的一组属性名称？

> ID：14368596
> 
> 赞同：64
> 
> 时间：2013-01-16T21:56:05.687
> 
> 标签：javascript, node.js, mocha.js, chai

我在我的应用程序中使用 node、mocha 和 chai。我想测试我返回的结果数据属性是否与我的模型对象之一相同的“对象类型”（非常类似于 chai 的实例）。我只是想确认这两个对象具有相同的属性名称集。**我对属性的实际值特别不感兴趣。**

假设我有下面的模型 Person 。我想检查我的 results.data 是否具有与预期模型相同的所有属性。所以在这种情况下，Person 有一个名字和姓氏。

因此，如果`results.data.lastName`两者`results.data.firstName`都存在，那么它应该返回 true。如果其中任何一个都不存在，它应该返回 false。如果 results.data 有任何额外的属性，比如 results.data.surname，那么它会返回 false，因为 Person 中不存在 surname。

**该型号**

```
function Person(data) {
  var self = this;
  self.firstName = "unknown";
  self.lastName = "unknown";

  if (typeof data != "undefined") {
     self.firstName = data.firstName;
     self.lastName = data.lastName;
  }
} 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-01-16T21:58:01.227

您可以序列化简单数据以检查是否相等：

```
data1 = {firstName: 'John', lastName: 'Smith'};
data2 = {firstName: 'Jane', lastName: 'Smith'};
JSON.stringify(data1) === JSON.stringify(data2) 
```

这会给你类似的东西

```
'{firstName:"John",lastName:"Smith"}' === '{firstName:"Jane",lastName:"Smith"}' 
```

作为一个函数...

```
function compare(a, b) {
  return JSON.stringify(a) === JSON.stringify(b);
}
compare(data1, data2); 
```

# 编辑

如果您像您说的那样使用 chai，请查看[http://chaijs.com/api/bdd/#equal-section](http://chaijs.com/api/bdd/#equal-section)

# 编辑 2

如果您只想检查密钥...

```
function compareKeys(a, b) {
  var aKeys = Object.keys(a).sort();
  var bKeys = Object.keys(b).sort();
  return JSON.stringify(aKeys) === JSON.stringify(bKeys);
} 
```

应该这样做。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2016-01-27T21:00:18.270

2 这里是一个简短的**ES6**可变参数版本：

```
function objectsHaveSameKeys(...objects) {
   const allKeys = objects.reduce((keys, object) => keys.concat(Object.keys(object)), []);
   const union = new Set(allKeys);
   return objects.every(object => union.size === Object.keys(object).length);
} 
```

一点**性能测试**（MacBook Pro - 2,8 GHz Intel Core i7，Node 5.5.0）：

```
var x = {};
var y = {};

for (var i = 0; i < 5000000; ++i) {
    x[i] = i;
    y[i] = i;
} 
```

结果：

```
objectsHaveSameKeys(x, y) // took  4996 milliseconds
compareKeys(x, y)               // took 14880 milliseconds
hasSameProps(x,y)               // after 10 minutes I stopped execution 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-16T23:20:44.103

如果要检查两个对象是否具有相同的属性名称，可以这样做：

```
function hasSameProps( obj1, obj2 ) {
  return Object.keys( obj1 ).every( function( prop ) {
    return obj2.hasOwnProperty( prop );
  });
}

var obj1 = { prop1: 'hello', prop2: 'world', prop3: [1,2,3,4,5] },
    obj2 = { prop1: 'hello', prop2: 'world', prop3: [1,2,3,4,5] };

console.log(hasSameProps(obj1, obj2)); 
```

通过这种方式，您可以确保只检查两个对象的可迭代和可访问属性。

**编辑 - 2013.04.26：**

前面的函数可以用以下方式重写：

```
function hasSameProps( obj1, obj2 ) {
    var obj1Props = Object.keys( obj1 ),
        obj2Props = Object.keys( obj2 );

    if ( obj1Props.length == obj2Props.length ) {
        return obj1Props.every( function( prop ) {
          return obj2Props.indexOf( prop ) >= 0;
        });
    }

    return false;
} 
```

通过这种方式，我们检查两个对象具有相同数量的属性（否则对象没有相同的属性，我们必须返回逻辑假）然后，如果数字匹配，我们去检查它们是否具有相同的特性。

**奖金**

一个可能的增强可能是引入类型检查以强制对每个属性进行匹配。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-05-11T05:54:05.597

如果你想要像@speculees 这样的深度验证，这里有一个答案使用`deep-keys`（披露：我有点像这个小包的维护者）

```
// obj1 should have all of obj2's properties
var deepKeys = require('deep-keys');
var _ = require('underscore');
assert(0 === _.difference(deepKeys(obj2), deepKeys(obj1)).length);

// obj1 should have exactly obj2's properties
var deepKeys = require('deep-keys');
var _ = require('lodash');
assert(0 === _.xor(deepKeys(obj2), deepKeys(obj1)).length); 
```

或与`chai`：

```
var expect = require('chai').expect;
var deepKeys = require('deep-keys');
// obj1 should have all of obj2's properties
expect(deepKeys(obj1)).to.include.members(deepKeys(obj2));
// obj1 should have exactly obj2's properties
expect(deepKeys(obj1)).to.have.members(deepKeys(obj2)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-07-30T09:44:49.497

[这是schirrmacher](https://stackoverflow.com/users/1652085/schirrmacher)上面提供的函数的深度检查版本。下面是我的尝试。请注意：

*   解决方案不检查 null 并且不是防弹的
*   我没有对它进行性能测试。也许 schirrmacher 或 OP 可以做到这一点并为社区分享。
*   我不是 JS 专家:)。

```
function objectsHaveSameKeys(...objects) {
  const allKeys = objects.reduce((keys, object) => keys.concat(Object.keys(object)), [])
  const union = new Set(allKeys)
  if (union.size === 0) return true
  if (!objects.every((object) => union.size === Object.keys(object).length)) return false

  for (let key of union.keys()) {
    let res = objects.map((o) => (typeof o[key] === 'object' ? o[key] : {}))
    if (!objectsHaveSameKeys(...res)) return false
  }
  return true
} 
```

## 更新 1

通过跳过`concat()`并将密钥直接添加到`Set()`. schirrmacher 对原始单级版本的相同优化也实现了约 40% 的改进。

*优化的深度检查现在在性能上与优化的单级版本非常相似！*

```
function objectsHaveSameKeysOptimized(...objects) {
  let union = new Set();
  union = objects.reduce((keys, object) => keys.add(Object.keys(object)), union);
  if (union.size === 0) return true
  if (!objects.every((object) => union.size === Object.keys(object).length)) return false

  for (let key of union.keys()) {
    let res = objects.map((o) => (typeof o[key] === 'object' ? o[key] : {}))
    if (!objectsHaveSameKeys(...res)) return false
  }
  return true
} 
```

**性能比较**

```
var x = {}
var y = {}
var a = {}
for (var j = 0; j < 10; ++j){
  a[j] = j
}

for (var i = 0; i < 500000; ++i) {
  x[i] = JSON.parse(JSON.stringify(a))
  y[i] = JSON.parse(JSON.stringify(a))
}

let startTs = new Date()
let result = objectsHaveSameKeys(x, y)
let endTs = new Date()
console.log('objectsHaveSameKeys = ' + (endTs - startTs)/1000) 
```

**结果**

*A：递归/深度检查版本**

1.  objectsHaveSameKeys = 5.185
2.  **objectsHaveSameKeysOptimized = 0.415**

*B：原始非深度版本*

1.  objectsHaveSameKeysOriginalNonDeep = 0.517
2.  objectsHaveSameKeysOriginalNonDeepOptimized = 0.342

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-28T08:05:45.140

如果您使用的是 underscoreJs，那么您可以简单地使用 _.isEqual 函数，它会比较每个层次结构级别的所有键和值，如下例所示。

```
var object = {"status":"inserted","id":"5799acb792b0525e05ba074c","data":{"workout":[{"set":[{"setNo":1,"exercises":[{"name":"hjkh","type":"Reps","category":"Cardio","set":{"reps":5}}],"isLastSet":false,"index":0,"isStart":true,"startDuration":1469689001989,"isEnd":true,"endDuration":1469689003323,"speed":"00:00:01"}],"setType":"Set","isSuper":false,"index":0}],"time":"2016-07-28T06:56:52.800Z"}};

var object1 = {"status":"inserted","id":"5799acb792b0525e05ba074c","data":{"workout":[{"set":[{"setNo":1,"exercises":[{"name":"hjkh","type":"Reps","category":"Cardio","set":{"reps":5}}],"isLastSet":false,"index":0,"isStart":true,"startDuration":1469689001989,"isEnd":true,"endDuration":1469689003323,"speed":"00:00:01"}],"setType":"Set","isSuper":false,"index":0}],"time":"2016-07-28T06:56:52.800Z"}};

console.log(_.isEqual(object, object1));//return true 
```

如果这些键的所有键和值在两个对象中都相同，则它将返回 true，否则返回 false。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-03-03T15:27:31.110

这是我验证 JSON 属性的尝试。我使用了@casey-foster 的方法，但添加了递归以进行更深入的验证。函数中的第三个参数是可选的，仅用于测试。

```
//compare json2 to json1
function isValidJson(json1, json2, showInConsole) {

    if (!showInConsole)
        showInConsole = false;

    var aKeys = Object.keys(json1).sort();
    var bKeys = Object.keys(json2).sort();

    for (var i = 0; i < aKeys.length; i++) {

        if (showInConsole)
            console.log("---------" + JSON.stringify(aKeys[i]) + "  " + JSON.stringify(bKeys[i]))

        if (JSON.stringify(aKeys[i]) === JSON.stringify(bKeys[i])) {

            if (typeof json1[aKeys[i]] === 'object'){ // contains another obj

                if (showInConsole)
                    console.log("Entering " + JSON.stringify(aKeys[i]))

                if (!isValidJson(json1[aKeys[i]], json2[bKeys[i]], showInConsole)) 
                    return false; // if recursive validation fails

                if (showInConsole)
                    console.log("Leaving " + JSON.stringify(aKeys[i]))

            }

        } else {

            console.warn("validation failed at " + aKeys[i]);
            return false; // if attribute names dont mactch

        }

    }

    return true;

} 
```

# javascript - 如何在 PhoneGap 中编写基本的“Hello World”java 脚本插件？

> ID：14368597
> 
> 赞同：4
> 
> 时间：2013-01-16T21:56:07.347
> 
> 标签：javascript, objective-c, html, cordova, phonegap-plugins

我已经阅读了 Cordova 的教程，但我不确定他们是否给了我足够的信息。

编辑显示更新的代码：

让我向您展示我的代码：

从 config.xml：

```
<plugin name="someMethod" value="MyPluginClass" /> 
```

现在对于 Plugin.h：

```
#import <Cordova/CDV.h>

@interface MyPluginClass : CDVPlugin

- (void)someMethod:(CDVInvokedUrlCommand*)command;

@end 
```

现在对于 Plugin.m：

```
#import "Plugin.h"

@implementation MyPluginClass

- (void)someMethod:(CDVInvokedUrlCommand *)command
{
    NSLog(@"YOU ARE READING THIS NATIVELY FROM A PLUGIN");
}

@end 
```

显示的第一个 html 页面称为“index.html”

我只想要一个空白的 html 页面，它只运行一个调用 cordova.exec() 函数的脚本。我这样做的尝试失败了。我不知道是我的脚本做错了什么还是我在其他地方做错了什么，但这是我的 index.html：

```
<!DOCTYPE html>
<html>
<head>
    <title>Cordova Device Ready Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
    <script type="text/javascript" charset="utf-8">

        // Call onDeviceReady when Cordova is loaded.
        //
        // At this point, the document has loaded but cordova-2.3.0.js has not.
        // When Cordova is loaded and talking with the native device,
        // it will call the event `deviceready`.
        //
        function onLoad() {
            document.addEventListener("deviceready", onDeviceReady, false);
        }

        // Cordova is loaded and it is now safe to make calls Cordova methods
        //
        function onDeviceReady() {
            // Now safe to use the Cordova API
            document.addEventListener("deviceready", function() {
                                      cordova.exec(null,null,"MyPluginClass","someMethod",[]);
                                      }, false);
        }
        </script>
    </head>
    <body onload="onLoad()">
    </body>
</html> 
```

我收到以下错误日志：

2013-01-17 11:36:31.782 CCT [1293:907] 错误：找不到插件“MyPluginClass”，或者不是 CDVP 插件。检查 config.xml 中的插件映射。

2013-01-17 11:36:31.787 CCT[1293:907] -[CDVCommandQueue executePending] [第 103 行] 失败 pluginJSON = ["INVALID","MyPluginClass","someMethod",[]]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T01:08:09.730

[在deviceready](http://docs.phonegap.com/en/2.3.0/cordova_events_events.md.html#deviceready)事件触发之前，您不能对 cordova 进行任何调用。做：

```
 document.addEventListener("deviceready", function() {
    cordova.exec(null,null,"MyPluginClass","someMethod",[]);
 }, false); 
```

**编辑：**

对于上面列出的示例调用，您需要一个如下所示的 Objective-C 类：

```
@interface MyPluginClass : CDVPlugin

- (void)someMethod:(CDVInvokedUrlCommand*)command;

@end 
```

注意类的名称和方法的名称，它们与调用相匹配`cordova.exec`

**另一个编辑：**

您`config.xml`应该如下所示：

`<plugin name="MyPluginClass" value="MyPluginClass" />`

（这些不一定必须相同，但`name`应与 javascript 调用的第三个参数中的引用匹配，并且`value`应与您的 Objective-C 类的名称匹配。

有关为 iOS 开发插件的完整文档，请查看[指南](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_ios_index.md.html#Developing%20a%20Plugin%20on%20iOS)

# iphone - 如何使用指定IP的UIWebView访问域

> ID：14368604
> 
> 赞同：0
> 
> 时间：2013-01-16T21:56:38.960
> 
> 标签：iphone, uiwebview

```
[webview loadRequest:[NSURLRequest requestWithURL:[NSURL 
URLWithString:@"http://www.google.com"]]]; 
```

比如google.com有很多服务器，但是有些ip地址连接不上。

如果我使用指定 ip(74.125.128.99) 访问 google.com，则连接正常。

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:00:39.590

我不太明白你的问题 - 你能更具体一点吗？上面的代码应该没有问题。

# java - HTMLUnit Java，有时只能工作

> ID：14368606
> 
> 赞同：1
> 
> 时间：2013-01-16T21:56:50.933
> 
> 标签：java, testing, htmlunit

我`HTMLUnit`在java中使用来浏览一个网站。首先它登录，然后导航到一个页面。

有时我运行它，它工作正常。但是其他时候，当我运行它时，它只会在控制台上的相同消息上停止，而无需对代码进行任何更改。我发现很难解决这个问题。

控制台通常停止的消息是：

```
htmlunit.incorrectnessListnerImpl notify
Obsolete content type encountered: 'application/x-javascript'
htmlunit.incorrectnessListnerImpl notify
Obsolete content type encountered: 'text/javascript' 
```

我虽然不等待`AJAX`调用执行可能是个问题，但是我尝试将 Web 客户端设置为使用`NicelyResynchronizingAjaxController`and `waitforbackgroundjavascript`，但仍然遇到同样的问题。

如果有人有任何想法，我将不胜感激！

# ios - 是否可以在不设置原点的情况下以编程方式设置 UIView 的高度和宽度？

> ID：14368610
> 
> 赞同：3
> 
> 时间：2013-01-16T21:57:13.487
> 
> 标签：ios, objective-c, xcode, constraints

我刚刚开始使用约束，我发现必须使用约束来设置 UIView 的位置和大小是很麻烦的——四个约束似乎过多。（我不怀疑可以使用更少的约束；我只是仍然有一个非常基本的理解！）是否可以设置 UIView 的大小，因此，不使用约束，而是设置位置使用约束？我知道设置大小的唯一非约束方式还涉及设置原点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:09:47.787

如果您使用 AutoLayout 来管理视图位置和大小，则不建议调整视图的框架。大多数时候这无论如何都行不通。

但即使是 AutoLayout 也需要知道大小和位置。所以你总是不得不同时指定两者。如果像您问的那样可以设置少于 4 个约束（例如，通过不指定它的位置），AutoLayout 将不知道在哪里显示视图。

您发现必须指定 4 个约束有什么困难？这是在您的 XIB/Storyboard 文件中自动为您完成的。如果您在代码中编写所有内容，请查看方便的[ASCII-art-format 字符串](http://developer.apple.com/library/mac/documentation/UserExperience/Conceptual/AutolayoutPG/Articles/constraintFundamentals.html#//apple_ref/doc/uid/TP40010853-CH2-SW2)，它允许您使用“可视”字符串表示指定位置和大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T22:04:37.427

似乎您只是想设置视图的框架（原点和大小）。

你可以使用这样的东西来做到这一点：

```
CGRect newFrame = CGRectMake( xCoordinate, yCoordinate, width, height);
myView.frame = newFrame; 
```

xCoordinate、yCoordinate、宽度和高度是你想要的。

希望有帮助！如果这不是您正在寻找的答案，请告诉我，我会尽力提供帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T22:07:55.823

据说：

> 视图的几何结构由其框架、边界和中心属性定义。框架定义了视图在其父视图坐标系中的原点和尺寸，通常在布局时用于调整视图的大小或位置。center 属性可以用来调整视图的位置而不改变它的大小。边界定义视图的内部尺寸，因为它看到它们并且几乎专门用于自定义绘图代码。**框架和边界矩形的大小部分** **耦合在一起，因此更改任一矩形的大小都会更新两者的大小。**

因此，理论上，您可以更改边界的大小，其中原点始终为 0,0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T22:07:09.373

设置`bounds`视图的属性将更改其大小，而无需您明确设置原点 - 来自文档：

> 更改边界大小会相对于其中心点增大或缩小视图。

您可以尝试设置一个适当的调整大小蒙版（可能是灵活的边距？），它将为您转换为约束，然后使用定位约束来移动它。

但是，我个人建议全力以赴，而不是混合和匹配。视觉格式将允许您非常简单地指定大小和位置。

# java - Java SMPP 库比较

> ID：14368611
> 
> 赞同：20
> 
> 时间：2013-01-16T21:57:15.267
> 
> 标签：java, smpp

我们即将开始一个需要使用 SMPP 作为主要集成交换渠道的项目。现在，由于 SMS 不一定是我们业务的核心，所以我想为 Java 使用一个 SMPP 库，这将是最省事的。除了遵循实际协议之外，我们不太可能需要更高级的能力或在引擎盖下进行调整。

为此，我列出了一些我们拥有的可能选项：

*   Logica 的开放式 SMPP
*   阿帕奇的骆驼
*   JSMPP
*   Twitter 的 Cloudhopper

对他们的使用更有经验的人可以把他们的一些经验告诉我吗？

编辑：只是为了给用例提供范围，我们将发送和接收短信，因此库应该希望通过客户端操作和服务器侦听器实现让生活变得轻松。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T12:01:21.467

我已经将[jSMPP](https://jsmpp.org/)和[cloudhopper-smpp](https://github.com/twitter/cloudhopper-smpp)用于单独的项目，这些项目涉及在以下情况下通过 smpp 发送和接收 SMS：

*   接收中高数量的 MO。
*   发送大量 MT（高达 70/秒）。

这两个库都表现良好，而且 IMO jSMPP 对用户更加友好，可以立即开始编码。但是我在使用 GitHub 的最新版本时遇到了一些错误，这些错误仍未修复。

在使用过*cloudhopper*之后，我认为学习曲线非常值得，与 jSMPP（主观）相比，这有点陡峭。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T21:27:15.697

只是对我最终决定的内容（以及图书馆如何审查）的更新：

1.  Logica：看起来很有希望，但我担心整个社区缺乏更新/活跃度。最后一个有意义的构建是在 yonks 之前，所以并不是我真正想做的投资。

2.  Apache Camel：我们开始使用它，但他们的库有一些限制（我们需要将自定义头插入到我们的 SMPP 数据包中）。公平地说，他们对论坛上的问题做出了相当迅速的回应，但他们的构建周期对我的 sprint 来说太长了一点，所以我们暂缓了这一点。

3.  JSMPP：这是我们最终使用的那个。总体而言非常简单，但确实感觉它希望您已经对 SMPP 有了一个相当好的了解。事情正在进行中，所以我无法告诉你它在生产负载下的表现如何。上线时会更新。

4.  Cloudhopper：老实说，这是我热衷于使用的那个，但更多的是因为像任何极客一样，我想跳上最闪亮的最新玩具。对于我们从一开始就提出的任何疑问，我并没有真正得到足够的回应，因此很担心加入。当其他更多文档选项可用时，没有理由采用一个需要我浏览他们的代码的库。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-14T15:19:58.570

我目前正在使用 Logica 的库通过 Java 实现 SMPP 解决方案。这是非常容易使用。以下信息说明了测试的结果：

应用程序：企业 Java Beans 应用程序部署在 Glassfish 3.1.2.2 中
语言：Java（使用 JMS）
库：Logica SMPP（1.3 版）
来源（ESME）：本地主机
目的地（SMSC）：开发服务器上的 Logica SMSC 模拟器（托管在 Amazon Web Services 中） )
类型：收发器 异步
**平均发送速率 (80%)：246 msg / sec**
低发送速率 (15%)：50 msg / sec
高发送速率 (5%)：255 msg /sec

只要您坚持异步模式，它就非常有效。如果您需要保持消息与其响应之间的相关性，请使用消息和响应中的“序列号”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-08T07:03:15.187

我们的 SMSC 是在 Logica SMPP (v 1.3) 上编写的，它仍然可以很好地处理企业负载。关于这个库，只有一些小问题，主要是 message_payload，老实说，我不记得其他问题了。但它很容易修复，因为它是开源产品。

虽然我个人相信 logica 的来源，但对于小客户，我使用 jsmpp。我同意@Farhan 的观点，它对用户更加友好，并且开发一个简单的客户端需要更少的时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-23T18:19:22.793

我同时使用了 jsmpp 和[smppapi](http://smppapi.sourceforge.net/documentation/user-guide/)，发现后者更好，因为当时 jsmpp 只有同步阻塞模式（2010 年）——不确定是否仍然如此。

当我连接到的 SMPP 服务器遇到一些性能问题并且响应比平时慢时，jsmpp 的阻塞特性成为大问题的根源。突然，我发现我所有的线程都在等待回复。迁移到 smppapi 显然解决了这些问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-04T09:39:07.917

我已将Logica SMPP 用于生产项目。它不再被积极维护，并且有一些固有的错误导致不得不产生变通方法或实际上分叉代码库来修复。话虽如此，我发现 API 非常稳定且高性能（300msg/s）。

我简要地查看了 JSMPP，它的 API 比 Logica 好得多，尽管问题列表中存在很长时间，但似乎有大量缺陷尚未修复。

刚刚遇到 Cloudhopper SMPP，它似乎以更新的风格编码，但同样需要更多示例。不得不通过代码库做家务是没有吸引力的。虽然 github 上的例子越来越好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-12T14:09:24.310

Cloudhopper 是最好的选择，Apache 的 Camel 也不错，但它是一个非常大的项目，有很多 PDF 接口，salesforce....你不需要。其他项目至今未更新。Cloudhopper 由 Telestax 维护，他们添加了一些有用的功能，看起来他们将来会给予大力支持

这是用于轻松配置 Cloudhopper 的堆栈 [https://github.com/RestComm/smpp-extensions](https://github.com/RestComm/smpp-extensions) 这是由 Telestax 分叉的 Cloudhopper（非常最新）： [https](https://github.com/RestComm/cloudhopper-smpp) ://github.com/RestComm/cloudhopper-smpp 还有 JainSlee 资源适配器为谁谁在电信领域工作 [https://github.com/RestComm/jain-slee.smpp](https://github.com/RestComm/jain-slee.smpp)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-09-14T11:07:48.313

presently I am using JSMPP and i found it's okay so far. Cloudhopper seems easier of the lot but i ended up with JSMPP and also found out that JSMPP is also at the heart of Apache camel implementation i might be wrong though.

# javascript - 脚本标签中的 JavaScript onClick

> ID：14368614
> 
> 赞同：-1
> 
> 时间：2013-01-16T21:57:17.807
> 
> 标签：javascript, html, onclick

我的代码（迷你计算器应用程序）：（html/js）

```
<input class="value" type="text" id="first" />
<input class="value" type="text" id="second" />
<input class="value" type="text" id="result" />
<input class="button" type="button" value="+" id="plus" />

window.onLoad = function motor()
{
    var plus = document.getElementById("plus");

    function updateResult(act)
    {
        var first = parseFloat(document.getElementById("first").value);
        var second = parseFloat(document.getElementById("second").value);
        if (isNaN(first)) first = 0;
        if (isNaN(second)) second = 0;

        if (act == '+') {
            document.getElementById("result").value = first + second;
        }
    }
    plus.onClick = updateResult('+');
} 
```

这是行不通的。按下按钮“id”时，我需要一个 onClick 操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:00:03.643

您正在将函数调用的结果分配给 onclick 事件。您没有分配对该函数的引用。

此外，单击事件名称使用*小写*c。

```
plus.onclick = function(){updateResult('+');}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:00:44.663

您想将`plus`对象的`onClick`属性设置为一个函数，而不是调用的结果`updateResult()`（未定义）。实现此目的的一种方法是`updateResult()`返回一个函数：

```
window.onLoad = function motor()
{
    var plus = document.getElementById("plus");

    function updateResult(act)
    {
        return function(){
            var first = parseFloat(document.getElementById("first").value);
            var second = parseFloat(document.getElementById("second").value);
            if (isNaN(first)) first = 0;
            if (isNaN(second)) second = 0;

            if (act == '+') {
                document.getElementById("result").value = first + second;
            }
        };
    }
    plus.onclick = updateResult('+');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:04:07.737

```
//JS is case-sensitive, the correct property name is `onload` not onLoad
window.onload = function motor()
[...]
    //onclick not onClick
    plus.onclick = function() {
      //you need to assign a function to execute on `onclick` instead of
      //the return value of calling it with () which you were doing previously
      updateResult('+');
    }; 
```

[**小提琴**](http://jsfiddle.net/JMCK9/1/)

此外，考虑使用代码质量分析工具，例如[JSHint](http://www.jshint.com/)。尽管它可能无法捕捉到这些错误类型，因为在这些对象上创建新属性是“有效的”，但它应该会在未来对您有所帮助。此外，如果您对如何使用函数或属性或其正确的拼写/语法有疑问，您可以查看[MDN](https://developer.mozilla.org/en-US/)。例如，[`window.onload`文档](https://developer.mozilla.org/en-US/docs/DOM/window.onload)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-14T18:50:07.270

不需要onload，调用事件click即可。这是代码：

```
document.getElementById("plus").onclick = function() {updateResult();};

    function updateResult()
    {
        var first = parseFloat(document.getElementById("first").value);
        var second = parseFloat(document.getElementById("second").value);
        if (isNaN(first)) first = 0;
        if (isNaN(second)) second = 0;

        document.getElementById("result").value = first + second;
    }
```

```
<html>
<body>
    <input class="value" type="text" id="first" />
    <input class="value" type="text" id="second" />
    <input class="value" type="text" id="result" />
    <input class="button" type="button" value="+" id="plus" />
</body>
</html>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T22:00:46.727

是`onclick`，不是`onClick`。

请确保大小写正确。

# python - Python 竖直插入

> ID：14368616
> 
> 赞同：0
> 
> 时间：2013-01-16T21:57:23.417
> 
> 标签：python, vertica

我一直在尝试使用 Python 将数据加载到 Vertica DB 中。

```
def test():
    try:
        connection = psycopg2.connect(db_connect_string)
        cursor = connection.cursor()
    except psycopg2.DatabaseError, e:
        print 'Error %s' % e
        sys.exit(1)
    cursor.execute("INSERT INTO <table_name> (cusip, ticker) VALUES (%s, %s)"% (1234, "'tkr'"))
    connection.commit() 
```

返回时没有错误，但随后的 SELECTS 不返回任何内容。（注意：SELECT 代码经过独立测试并且有效）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:49:25.290

您正在使用针对 postgres 的 psycopg2，也许使用 pyodbc 代替（由 vertica 文档建议）可以解决您的问题？

我们在 $work 开发了一个开源库，以帮助将 vertica 与 python 结合使用，更具体地说，以正确的 Vertica 方式插入数据（单个 INSERT 非常慢）。也许它可以帮助你： http: [//pypi.python.org/pypi/pyvertica](http://pypi.python.org/pypi/pyvertica)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T14:30:00.007

You should use the following syntax:

```
cursor.execute("INSERT INTO <table_name> (cusip, ticker) VALUES (%s, %s)"% (1234, "'tkr'");commit;) 
```

or change

```
connection.commit() 
```

by

```
cursor.execute("commit") 
```

# c++ - 我可以在 C++ 中创建匿名类并像在 Java 中一样捕获外部变量吗？

> ID：14368619
> 
> 赞同：43
> 
> 时间：2013-01-16T21:57:28.963
> 
> 标签：c++, c++11, lambda, anonymous-class

在Java中，当我需要回调函数时，我必须实现一个匿名类。在匿名类内部，我可以访问外部变量（如果它们是`final`.

现在我在 C++ 中做同样的事情。我知道 C++ lambda 效果更好，但有时我需要传入许多函数，而对于匿名类，我只需要传入一个实例。

我尝试了以下示例。它适用于 GCC 4.3.4。

```
class IA {
public:
  virtual int f(int x) = 0;  
};

int main() {
    class : public IA {
        int f(int x) { return x + 1; }
    } a;
    doFancyWork(&a);
    return 0;
} 
```

是否可以像这样捕获外部变量？

```
int main() {
    int y = 100; // mark y as final if possible
    class : public IA {
        int f(int x) { return x + y; }
    } a;
    return 0;
} 
```

更新：

第二个示例无法编译。错误在这里，

```
prog.cpp: In member function ‘virtual int main()::<anonymous class>::f(int)’:
prog.cpp:9: error: use of ‘auto’ variable from containing function
prog.cpp:7: error:   ‘int y’ declared here
prog.cpp: In function ‘int main()’:
prog.cpp:7: warning: unused variable ‘y’ 
```

更新：

我刚刚意识到这样做还有一些问题：

*   我无法编写构造函数，因为该类没有名称
*   初始化列表不允许继承。
*   使其编译的任何更改都会使代码不可读。

我想我必须远离匿名课程。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-16T22:14:12.890

无法*自动*捕获这些变量，但您可以使用另一种方法。这是如果您想通过引用捕获：

```
int main() {
    int y = 100; // mark y as final if possible
    class IB : public IA {
    public:
      IB(int& y) : _y(y) {}
      int f(int x) { return x + _y; }
    private:
      int& _y;
    } a (y);
    return 0;
} 
```

如果要按值捕获，只需更改`int&`为`int`.

无论如何，如果您对单个 lambdas 感到困扰，您可以考虑使用**lambdas 元组作为“多回调”对象。**您仍然可以将所有东西都打包在一个对象中，并且可以免费进行捕获。

举个例子：

```
auto callbacks = make_tuple(
    [] (int x) { cout << x << endl; },
    [&] () { cout << y << endl; }, // y is captured by reference
    [=] (int x) { cout << x + y << endl; }, // y is captured by value
    // other lambdas here, if you want...
    ); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T22:11:53.113

您可以手动捕获变量（这类似于 lambda 捕获在幕后所做的）：

```
int main() {
    int y = 100;
    struct { 
        int& y;
        int operator()(int x) { return x + y; }
    } anon = { y };
} 
```

然后你可以像这样使用它：

```
#include <iostream>
...
std::cout << anon(10) << std::endl; 
```

按预期打印 110。不幸的是，您不能使用此方法从另一个类型继承匿名类型，因为初始化列表可构造类型不能从另一个类型继承。如果继承至关重要，那么您应该使用[Andy Prowl 概述的构造方法](https://stackoverflow.com/a/14368688/203133)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-16T22:01:45.253

C++ lambda 可以捕获“外部”变量。[编辑：当我第一次阅读这个问题时，我不知何故错过了他提到他知道 lambdas 的地方。无论好坏，C++ 没有任何其他真正类似于匿名类的东西]。

例如：

```
#include <iostream>

int main(){ 

    int y = 100;
    auto lambda = [=](int x) { return x + y; };

    std::cout << lambda(2);
} 
```

...`102`作为其输出打印。

请注意，尽管它看起来有点像一个函数，但 C++ lambda 确实会导致创建一个类。我想我应该补充一点：该类在技术上不是匿名的，但它有一些从未直接可见的未指定名称。

编辑：我仍然对不使用 lambdas 的理由感到有些困惑。是否打算使用一个包含许多成员函数的类？如果是这样，则不清楚您计划如何指定在哪个时间/出于何种目的调用哪个成员函数。我的直接反应是，这听起来很可疑，就好像您试图扭曲语言以支持有问题的设计一样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-15T16:12:53.650

限制对外部变量访问的不是类的匿名性。在问题中， y 不可访问，因为该类是在函数中本地定义的。

本地定义的类有一些限制。首先，它们只能访问静态的局部变量，但可以访问函数范围内可用的任何其他变量。此外，本地类不能有静态数据成员。

至于匿名类，你不能有构造函数也不能有析构函数。所有成员函数都必须在类定义中声明。它不能有静态静态成员，这包括通常可以在类定义中实例化的 const 静态整数成员。也不允许继承。

匿名类是 C++ 的一个不起眼的角落，几乎没有实用价值。Lambda 函数和其他技术要灵活得多。但谁知道呢，也许在某些情况下它可以帮助提高代码的可读性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T22:28:12.200

如果您的`IA`类确实只有一个需要覆盖的虚拟方法（真正的复杂性是其他非虚拟方法），但您不想捕获*该方法需要*的局部变量，那么如何：

```
int main() {
  int y = 100;
  auto f = [=](int x){return x+y;};
  typedef decltype(f) F;
  struct IB : IA {
    F _f;
    IB(F _f): _f(_f) {}
    int f(int x) { return _f(x); }
  } a(f);
  doFancyWork(&a);
  return 0;
} 
```

# ios - MonoTouch 调试不使用 ServiceStack.Text 构建（AOT 错误）？

> ID：14368620
> 
> 赞同：4
> 
> 时间：2013-01-16T21:57:34.097
> 
> 标签：ios, xamarin.ios, servicestack, aot

我刚刚开始在我的 MonoTouch 解决方案中使用 ServiceStack.Text.MonoTouch.dll。一切都在模拟器中编译和运行，但是一旦我尝试在手机上运行调试版本，编译过程就会终止，并出现以下错误： **错误 MT3001：无法 AOT 程序集'.../ServiceStack.Text.MonoTouch。 dll'**

我读过这是由于 ServiceStack.Text dll 太大或类似的东西。所以我尝试在发布模式下，由于 LLVM 处于打开状态并且链接器被转换为“仅链接 SDK 程序集”，一切正常。

这是有问题的，因为我现在无法在设备上进行调试。在调试模式下，链接器被禁用，LLVM 被关闭。有没有办法解决？

MT 6.0.8 和最新版本的 ServiceStack dll 来自 Github。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:24:30.003

> 在调试模式下，链接器被禁用，

否（至少默认情况下不是）。

默认情况下，为所有设备构建（调试或发布）启用托管链接器（Link SDK）。但是，默认（链接 SDK）将无法从中删除未使用的代码，`ServiceStack.Text.dll`因为该程序集不是**SDK**程序集。

您需要将选项切换到**链接所有程序集**以确保它得到处理。

请注意，如果链接器不安全（例如使用反射），您可能需要在您自己的代码上添加`[Preserve]`属性（或）。有关示例，`--linkskip=ASSEMBLY`请参见此[线程。](http://forums.xamarin.com/discussion/810/servicestack-text-not-working-with-link-all-assemblies-linker-behavior)

# c# - 一个 C# 正则表达式：只允许非空白，并且只允许 ()+

> ID：14368621
> 
> 赞同：0
> 
> 时间：2013-01-16T21:57:39.743
> 
> 标签：c#, regex, c#-4.0, regex-negation

我正在尝试验证用户是否在服务器端将一些文本输入到富文本框中。我也不想让他们只放入 HTML 编码的空格。我正在使用应用程序的内置正则表达式验证，所以我不能有多个模式。

是否可以对以下模式**仅使用一个C# 正则表达式？**

允许（一个或多个非空白字符）。不允许空字符串：

```
^.*\S+.*$ 
```

- 他们需要输入一些文字。不允许所有空格：

```
!^\s+$ 
```

- 最有可能的空白将显示为`&nbsp;`. 不允许仅包含 HTML 空格字符的字符串：

```
!^(&nbsp;)+$ 
```

我认为这会起作用，但它不会：

```
 ^.*\S+$(!(^(\s+)+$))!(^(&nbsp;)+$) 
```

所以这两个将是一个有效的字符串：

```
'lorem ipsum' 
'lorem&nbsp;ipsum' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:11:59.833

我不清楚你想捕捉什么......但这有效吗？

```
^((\S(?<!&nbsp;))+((\s|&nbsp;)+)?)+$ 
```

火柴：
`"lorem"`
`"lorem ipsum"`
`"lorem&nbsp;ipsum"`

不匹配：
`""`
`" "`

*编辑评论*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:16:22.957

听起来这样可以正常工作（编辑以匹配新要求）：

```
^\s*(?!&nbsp;)\S 
```

# jquery - jQuery不附加元素

> ID：14368623
> 
> 赞同：2
> 
> 时间：2013-01-16T21:57:41.750
> 
> 标签：jquery, datepicker, append

我试图雄心勃勃地向 flexigrid 添加额外的搜索框......我已经深入研究了 flexigrid 脚本并找到了添加搜索元素的位置。然后我添加了自己的输入字段，如下所示：

```
$(g.sDiv).append("<input type='text' value='' size='30' name='fromDate' id='datepicker' class='qsbox datepicker' />"); 
```

g.sDiv 是在脚本前面创建的变量，如下所示：

```
g.sDiv = document.createElement('div'); 
```

我假设这会创建一个 div 并且我可以将项目附加到它。

虽然我无法解决一些事情。如果我附加以下元素：

```
$(g.sDiv).append("<div id = 'customSearch'></div>"); 
```

（确实可以正确渲染），然后尝试使用以下命令附加到该 div：

```
$('#customSearch').append("<input type='text' value='' size='30' name='fromDate' id='datepicker' class='qsbox datepicker' />"); 
```

输入框未添加到页面中。

为什么这种方法行不通？

此外，创建了输入框后，我想添加 datepicker ui。如何对动态创建的项目执行此操作。在应该创建元素后，我尝试添加这行代码：

```
$('#datepicker').datepicker(); 
```

但这不起作用。

我在附加项目时缺少什么，以及如何在附加项目后将 datepicker 添加到最终输入中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:00:22.330

您必须首先将选择器添加`g.sDiv`到文档中`$('#customSearch')`才能找到该元素，否则该元素还不是文档的一部分，因此无法使用`document.getElementById()`.

```
$("body").append(g.sDiv);
$("#customSearch").doSomething(); 
```

# java - 使用 gson 的 JSON 到 java 对象

> ID：14368624
> 
> 赞同：4
> 
> 时间：2013-01-16T21:57:43.123
> 
> 标签：java, android, json, gson

我正在使用 GSON 库来处理来自 Web 服务的 JSON，但我无法使其工作，我总是得到一个空值。我已经查看了类似的问题，例如将 Json 转换为 Java，例如[使用 GSON 将简单的 Json 转换为 Java](https://stackoverflow.com/questions/4981471/simple-json-to-java-convertion-using-gson)。但我仍然缺少一些东西

JSON

```
{"A":"val1","B":"val2","C":"val3","D":"val4","E":"val5","F":"val6","G":"val7"}
         SiteWrapper m = gson.fromJson(json, SiteWrapper.class); 
```

java类

```
SiteWrapper m = gson.fromJson(json, SiteWrapper.class);
System.out.println(m.getMenu());

static class Site {
    static String A;
    static String B;
    static String C;
    static String D;
    static String E;
    static String F;
    static String G;

    public String toString() {
        return String.format(A,B,C,D,E,F,G);}

    public static String getA() {
        return A;
    }
    public static String getB() {
        return B;
    } 
... all the way to getG

    public void setA(String A) {
        Site.A = A;
    }
    public void setB(String B) {
        Site.B = B;
    }
... all the way to setB 
```

和我的包装

```
class SiteWrapper {
    private Site site;
    public Site getMenu() { return site; }
    public void setMenu(Site site) { this.site = site; }
} 
```

无论我做什么，我都会打印一个空值，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:20:14.550

由于它是一个静态内部类。正如[文档](https://sites.google.com/site/gson/gson-user-guide#TOC-Java-Modifier-Exclusion)指出和评论的那样：

> 同样，如果一个字段被标记为“静态”，那么默认情况下它将被排除在外。如果您想包含一些瞬态字段...

你可能想试试

```
 Gson gson = new GsonBuilder()
    .excludeFieldsWithModifier()
    .create(); 
```

此外，由于它是一个内部类，您可能需要更改 JSON 如果可以：

```
 {
   "site":{
      "A":"val1",
      "B":"val2",
      "C":"val3",
      "D":"val4",
      "E":"val5",
      "F":"val6",
      "G":"val7"
   }
} 
```

如本文[所述](https://stackoverflow.com/questions/4470339/deserializing-arbitrary-object-json-arrays-in-inner-classes-with-gson-or-nested)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:02:22.937

问题是在你的代码中`SiteWrapper.class`你应该传递`Site.class`给`gson.fromJSON`

这条线

```
SiteWrapper m = gson.fromJson(json, SiteWrapper.class); 
```

应该

```
Site s = gson.fromJSON(json, Site.class); 
```

`Site`是您为提供的 JSON 定义的类。 `SiteWrapper`包含一个站点变量，您需要将此`Site`变量设置为`fromJSON`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:04:08.520

根据[本](https://sites.google.com/site/gson/gson-user-guide#TOC-Java-Modifier-Exclusion)文档，默认情况下会排除所有静态字段。按照链接中的示例更改默认排除策略，以便接受静态。

创建`Gson`对象时，请尝试以下操作：

```
Gson gson = new GsonBuilder()
    .excludeFieldsWithModifier(Modifier.TRANSIENT,Modifier.VOLATILE)
    .create(); 
```

这应该会创建一个`Gson`默认情况下不会排除静态字段的对象。

# arm - Libtool 声称它在交叉编译期间不支持共享库

> ID：14368627
> 
> 赞同：15
> 
> 时间：2013-01-16T21:57:57.873
> 
> 标签：arm, cross-compiling, libtool, expat-parser

我正在尝试为运行 busybox 1.13 的 ARM 嵌入式机器构建 expat (2.0.0) XML 解析库，在 ./configure 期间，我收到错误：

```
checking if libtool supports shared libraries... no 
```

我已经指定了我的 gcc、g++、ar、ranlib、strip 等，这些都可以通过配置工具找到，并且我有最新的 libtool（在撰写本文时为 2.4.2）在 Ubuntu 12.10 上运行，那为什么说 libtool 不支持共享库呢？我的配置命令是：

```
./configure --host=arm --enable-shared CC=arm-none-linux-gnueabi-gcc CXX=arm-none-linux-gnueabi-g++ AR=arm-none-linux-gnueabi-ar RANLIB=arm-none-linux-gnueabi-ranlib STRIP=arm-none-linux-gnueabi-strip 
```

...调用的完整输出是：

```
 configure: WARNING: If you wanted to set the --build type, don't use --host.
    If a cross compiler is detected then cross compile mode will be used.
checking build system type... i686-pc-linux-gnu
checking host system type... arm-unknown-none
checking for arm-gcc... arm-none-linux-gnueabi-gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... yes
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether arm-none-linux-gnueabi-gcc accepts -g... yes
checking for arm-none-linux-gnueabi-gcc option to accept ANSI C... none needed
checking for a sed that does not truncate output... /bin/sed
checking for egrep... grep -E
checking for ld used by arm-none-linux-gnueabi-gcc... /usr/local/arm/arm-2007q1/arm-none-linux-gnueabi/bin/ld
checking if the linker (/usr/local/arm/arm-2007q1/arm-none-linux-gnueabi/bin/ld) is GNU ld... yes
checking for /usr/local/arm/arm-2007q1/arm-none-linux-gnueabi/bin/ld option to reload object files... -r
checking for BSD-compatible nm... nm
checking whether ln -s works... yes
checking how to recognise dependent libraries... unknown
checking how to run the C preprocessor... arm-none-linux-gnueabi-gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking for arm-g++... arm-none-linux-gnueabi-g++
checking whether we are using the GNU C++ compiler... yes
checking whether arm-none-linux-gnueabi-g++ accepts -g... yes
checking how to run the C++ preprocessor... arm-none-linux-gnueabi-g++ -E
checking for arm-g77... no
checking for arm-f77... no
checking for arm-xlf... no
checking for arm-frt... no
checking for arm-pgf77... no
checking for arm-fort77... no
checking for arm-fl32... no
checking for arm-af77... no
checking for arm-f90... no
checking for arm-xlf90... no
checking for arm-pgf90... no
checking for arm-epcf90... no
checking for arm-f95... no
checking for arm-fort... no
checking for arm-xlf95... no
checking for arm-ifc... no
checking for arm-efc... no
checking for arm-pgf95... no
checking for arm-lf95... no
checking for arm-gfortran... no
checking for g77... no
checking for f77... no
checking for xlf... no
checking for frt... no
checking for pgf77... no
checking for fort77... no
checking for fl32... no
checking for af77... no
checking for f90... no
checking for xlf90... no
checking for pgf90... no
checking for epcf90... no
checking for f95... no
checking for fort... no
checking for xlf95... no
checking for ifc... no
checking for efc... no
checking for pgf95... no
checking for lf95... no
checking for gfortran... no
checking whether we are using the GNU Fortran 77 compiler... no
checking whether  accepts -g... no
checking the maximum length of command line arguments... 32768
checking command to parse nm output from arm-none-linux-gnueabi-gcc object... ok
checking for objdir... .libs
checking for arm-ar... arm-none-linux-gnueabi-ar
checking for arm-ranlib... arm-none-linux-gnueabi-ranlib
checking for arm-strip... arm-none-linux-gnueabi-strip
checking if arm-none-linux-gnueabi-gcc supports -fno-rtti -fno-exceptions... no
checking for arm-none-linux-gnueabi-gcc option to produce PIC... -fPIC
checking if arm-none-linux-gnueabi-gcc PIC flag -fPIC works... yes
checking if arm-none-linux-gnueabi-gcc static flag -static works... yes
checking if arm-none-linux-gnueabi-gcc supports -c -o file.o... yes
checking whether the arm-none-linux-gnueabi-gcc linker (/usr/local/arm/arm-2007q1/arm-none-linux-gnueabi/bin/ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... no
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... no
checking whether to build shared libraries... no
checking whether to build static libraries... yes
configure: creating libtool
appending configuration tag "CXX" to libtool
checking for ld used by arm-none-linux-gnueabi-g++... /usr/local/arm/arm-2007q1/arm-none-linux-gnueabi/bin/ld
checking if the linker (/usr/local/arm/arm-2007q1/arm-none-linux-gnueabi/bin/ld) is GNU ld... yes
checking whether the arm-none-linux-gnueabi-g++ linker (/usr/local/arm/arm-2007q1/arm-none-linux-gnueabi/bin/ld) supports shared libraries... no
checking for arm-none-linux-gnueabi-g++ option to produce PIC... -fPIC
checking if arm-none-linux-gnueabi-g++ PIC flag -fPIC works... yes
checking if arm-none-linux-gnueabi-g++ static flag -static works... yes
checking if arm-none-linux-gnueabi-g++ supports -c -o file.o... yes
checking whether the arm-none-linux-gnueabi-g++ linker (/usr/local/arm/arm-2007q1/arm-none-linux-gnueabi/bin/ld) supports shared libraries... no
checking dynamic linker characteristics... no
checking how to hardcode library paths into programs... immediate
appending configuration tag "F77" to libtool
checking for arm-gcc... (cached) arm-none-linux-gnueabi-gcc
checking whether we are using the GNU C compiler... (cached) yes
checking whether arm-none-linux-gnueabi-gcc accepts -g... (cached) yes
checking for arm-none-linux-gnueabi-gcc option to accept ANSI C... (cached) none needed
checking for a BSD-compatible install... /usr/bin/install -c
checking whether gcc accepts -fexceptions... yes
checking for ANSI C header files... (cached) yes
checking whether byte ordering is bigendian... no
checking for an ANSI C-conforming const... yes
checking for size_t... yes
checking for memmove... yes
checking for bcopy... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking for unistd.h... (cached) yes
checking for off_t... yes
checking for stdlib.h... (cached) yes
checking for unistd.h... (cached) yes
checking for getpagesize... yes
checking for working mmap... no
checking for an ANSI C99-conforming __func__... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating expat_config.h
amarshall3@pg-oj-amarshall3:~/Sandbox/expat-2.0.0$ make
/bin/bash ./libtool --silent --mode=compile arm-none-linux-gnueabi-gcc -I./lib -I. -g -O2 -Wall -Wmissing-prototypes -Wstrict-prototypes -fexceptions -DHAVE_EXPAT_CONFIG_H   -o lib/xmlparse.lo -c lib/xmlparse.c
/bin/bash ./libtool --silent --mode=compile arm-none-linux-gnueabi-gcc -I./lib -I. -g -O2 -Wall -Wmissing-prototypes -Wstrict-prototypes -fexceptions -DHAVE_EXPAT_CONFIG_H   -o lib/xmltok.lo -c lib/xmltok.c
/bin/bash ./libtool --silent --mode=compile arm-none-linux-gnueabi-gcc -I./lib -I. -g -O2 -Wall -Wmissing-prototypes -Wstrict-prototypes -fexceptions -DHAVE_EXPAT_CONFIG_H   -o lib/xmlrole.lo -c lib/xmlrole.c
/bin/bash ./libtool --silent --mode=link arm-none-linux-gnueabi-gcc -I./lib -I. -g -O2 -Wall -Wmissing-prototypes -Wstrict-prototypes -fexceptions -DHAVE_EXPAT_CONFIG_H   -no-undefined -version-info 6:0:5 -rpath /usr/local/lib  -o libexpat.la lib/xmlparse.lo lib/xmltok.lo lib/xmlrole.lo
arm-none-linux-gnueabi-gcc -I./lib -I. -g -O2 -Wall -Wmissing-prototypes -Wstrict-prototypes -fexceptions -DHAVE_EXPAT_CONFIG_H   -o xmlwf/xmlwf.o -c xmlwf/xmlwf.c
arm-none-linux-gnueabi-gcc -I./lib -I. -g -O2 -Wall -Wmissing-prototypes -Wstrict-prototypes -fexceptions -DHAVE_EXPAT_CONFIG_H   -o xmlwf/xmlfile.o -c xmlwf/xmlfile.c
arm-none-linux-gnueabi-gcc -I./lib -I. -g -O2 -Wall -Wmissing-prototypes -Wstrict-prototypes -fexceptions -DHAVE_EXPAT_CONFIG_H   -o xmlwf/codepage.o -c xmlwf/codepage.c
arm-none-linux-gnueabi-gcc -I./lib -I. -g -O2 -Wall -Wmissing-prototypes -Wstrict-prototypes -fexceptions -DHAVE_EXPAT_CONFIG_H   -o xmlwf/readfilemap.o -c xmlwf/readfilemap.c
xmlwf/readfilemap.c: In function 'filemap':
xmlwf/readfilemap.c:65: warning: implicit declaration of function 'read'
xmlwf/readfilemap.c:69: warning: implicit declaration of function 'close'
/bin/bash ./libtool --silent --mode=link arm-none-linux-gnueabi-gcc -I./lib -I. -g -O2 -Wall -Wmissing-prototypes -Wstrict-prototypes -fexceptions -DHAVE_EXPAT_CONFIG_H    -o xmlwf/xmlwf xmlwf/xmlwf.o xmlwf/xmlfile.o xmlwf/codepage.o xmlwf/readfilemap.o libexpat.la 
```

有人可以向我解释一下如何`configure`确定 libtool 是否支持构建共享库吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-18T01:33:09.267

从输出：

```
检查构建系统类型... i686-pc-linux-gnu
检查主机系统类型... arm-unknown-none
...
检查 arm-none-linux-gnueabi-gcc 链接器 (/usr/local/arm/arm-2007q1/arm-none-linux-gnueabi/bin/ld) 是否支持共享库...是
...
检查 libtool 是否支持共享库...否
检查是否构建共享库...否
检查是否构建静态库...是

```

可能 libtool 被您的主机标志混淆了：`--host=arm`， libtool 与`--host=arm-unknown-none`. 试试`--host=arm-none-linux`吧。IIRC，`arm-unknown-none`供那些想要为没有操作系统且所有内容都静态链接到图像的 MCU 和其他嵌入式板做非 RTOS（主循环）类型的东西的人使用。您的工具链是为 Linux 构建的：`arm-none-linux`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T12:41:30.027

如果您使用 Homebrew 作为包管理器，请注意某些公式是从编译为 32 位作为最低公分母的瓶子中倒出来的。您可以使用以下方法将 libtool 重建为本机架构

`$ brew install --build-from-source`库工具`

或者简单地通过任何有效的标志

`$ brew install --universal libtool`

大多数公式都有`--universal`生成 i386 和 x86_64 架构的标志。

# java - 是否可以在 JBoss AS 7 中部署分解的战争文件（解压缩的战争）

> ID：14368629
> 
> 赞同：24
> 
> 时间：2013-01-16T21:58:01.883
> 
> 标签：java, jakarta-ee, deployment, jboss7.x, web-deployment

复制到以下部署文件夹时，我在部署**“app.war”**文件时没有问题：
**“jboss-as-7.0.0.Final\jboss-as-7.0.0.Final\standalone\deployments”**；JBoss7 会正确部署它。
我想对展开的文件夹**“app”**（即提取的 app.war）做同样的事情。Apache Tomcat 可以在其部署目录中的展开文件夹中正常工作，但无法对 JBoss 执行相同操作。

我确实将 **deployment-scanner auto-deploy-exploded='true'**放在了 JBoss 控制台中；我确实在部署目录中创建了**“app.war.dodeploy”**文件以及提取**的“app”文件夹。**我无法在 jboss 服务器中部署和启动“应用程序”。

**我想知道是否可以在 JBoss7 中部署分解的战争文件（解压缩的战争）。**

我想特别部署一个解压缩的文件夹，因为我正在使用“ [Kwatee](http://www.kwatee.net/) ”部署软件。Kwatee 将展开的（提取的战争）文件夹复制到其目标服务器部署文件夹。如果有人知道如何让 Kwatee 按原样移动“战争”文件，而不是移动提取的战争文件夹，我将不胜感激。如果有人可以为 Kwatee 建议替代软件或[回答我之前的相关问题，我也将不胜感激](https://stackoverflow.com/questions/14327273/open-source-deployment-tool-required-to-deploy-ear-war-files-to-any-hosted-se)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-16T23:44:59.667

将您的文件夹重命名为**app.war**并触摸您的**app.war.dodeploy**文件。

我还建议`deployment-scanner`在**standalone.xml**配置文件中编辑您的并将`auto-deploy-exploded`属性更改回`false`.

从[管理员指南 - JBoss AS 7.0](https://docs.jboss.org/author/display/AS7/Admin+Guide#AdminGuide-FileSystemDeployments)：

> 强烈建议对展开的内容使用手动部署模式，因为展开的内容本身就容易受到试图自动部署部分复制内容的扫描仪的攻击。

# symfony - 如何在 symfony2 中获取用于学说 dbal 连接的密码？

> ID：14368634
> 
> 赞同：0
> 
> 时间：2013-01-16T21:58:40.767
> 
> 标签：symfony, doctrine-orm

我想在 symfony2 中检索当前由学说 2 dbal 连接使用的密码。

如果我使用`$kernel->getContainer()->getParameter('database_password')`，我可以找到在 parameters.yml 中定义的那个，但是如果我为某些环境定义不同的密码（例如在 config_test.yml 中），则来自 parameters.yml 的数据是无用的。

现在，如果我仔细看`$kernel->getContainer()->getParameterBag()->all()`，我仍然找不到它。

如果你想知道为什么？我在函数中使用了锁定机制，并且我试图`register_shutdown_function()`使用 php 内置的 mysql 或 pdo 函数来删除该锁定以防出现致命错误，因为那时大部分框架都已关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:30:23.443

如果您无法检索它，那么您也将没有数据库连接。

测试环境中的参数不会加载到 dev、prod、... 环境中！在覆盖的情况下，在 parameters.yml 中定义所有连接参数

```
//parameters.yml
database_prod_name: prod
database_prod_user: prod_user
database_prod_password: prod_password

database_dev_name: dev
database_dev_user: dev_user
.....

//config_prod.yml
doctrine:
    dbal:
        dbname:   "%database_prod_name%"
        user:     "%database_prod_user%"
        password: "%database_prod_password%"
.... 
```

您使用的所有其他环境也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-28T13:58:12.550

如果您需要通过内核对象访问容器和连接，请使用以下代码：

```
$connection = $kernel->getContainer()->get('doctrine')->getConnection(); 
```

如果您需要获取和设置容器参数，您可以使用以下代码：

```
$container->setParameter('database_name', 'xyz');
$db_password = $container->getParameter("database_password"); 
```

# python - Django：如何为抽象模型及其子模型定义一个独特的 slug？

> ID：14368641
> 
> 赞同：3
> 
> 时间：2013-01-16T21:59:05.763
> 
> 标签：python, django, django-models

我有一个包含模型的公共字段的抽象模型，但是如何定义一个唯一的 slug，因为我不能对抽象模型进行查询，而只能在其子类上进行查询？

我正在寻找一种干净简单的方法，而无需手动提及子类的名称..

```
class MainModel(models.Model):
    title = models.CharField(_('title'), max_length=150)
    slug = models.SlugField(_('slug'), unique=True, max_length=150)
    category = models.ForeignKey('Category', verbose_name=_('category'))

    class Meta:
        abstract = True

    def save(self, *args, **kwargs):
        # define unique slug for ChildModel1, ChildModel2

class ChildModel1(MainModel):
    active = models.BooleanField()

class ChildModel2(MainModel):
    content = models.TextField() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:51:12.197

您可以尝试使用模型的[`verbose_name`](https://docs.djangoproject.com/en/dev/ref/models/options/#django.db.models.Options.verbose_name)：

```
def save(self, *args, **kwargs):
    # fill in make_slug yourself
    self.slug = make_slug(self._meta.verbose_name) 
```

# ruby - 在 Apache 服务器上持续运行 Sinatra

> ID：14368642
> 
> 赞同：1
> 
> 时间：2013-01-16T21:59:10.680
> 
> 标签：ruby, sinatra

是否可以`ssh`进入服务器，使用 启动`Ruby`程序`Sinatra`，然后退出`ssh`会话，仍然让`Sinatra`服务器运行？我已经尝试过了，但似乎当我注销服务器时，`Sinatra`服务器退出了。难道我做错了什么？如果我不能这样做，我将如何`Sinatra`连续运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:08:59.690

这通常是由于 shell（例如 bash）退出并向其所有子进程发送挂断或终止信号。要在后台启动服务器并屏蔽 HUP 信号，您可以使用以下命令[`nohup`](http://linux.die.net/man/1/nohup)：

```
 nohup - run a command immune to hangups, with output to a non-tty 
```

例如：

```
nohup ruby sinatra_app.rb & 
```

[http://en.wikipedia.org/wiki/Nohup](http://en.wikipedia.org/wiki/Nohup)

对于更强大的部署选项，您可能需要查看[Nginx](http://wiki.nginx.org/Main) 和/或[Phusion Passenger 之](https://www.phusionpassenger.com/)类的东西：

[部署 Rack 应用程序的可靠方法 (Sinatra)](https://stackoverflow.com/questions/4486320/robust-way-to-deploy-a-rack-application-sinatra)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:56:37.787

你也可以使用[gnu screen](http://www.gnu.org/software/screen/)

但是 nohup 可能是“可能工作的最小的东西”。如果您开始多件事并希望以不同的方式处理它们，Screen 可以提供帮助。

# python - 在 OSX 10.7 上读取或写入 OpenEXR 时，OpenCV 2.4.3 引发错误

> ID：14368647
> 
> 赞同：0
> 
> 时间：2013-01-16T21:59:34.397
> 
> 标签：python, opencv, openexr

我正在 OSX 10.7.5 上运行 OpenCV (2.4.3) 的 brew 安装。我已经尝试过 OpenEXR (1.7.0) 的 brew install 和下载它们的源代码并直接编译 1.7.1，因为我读到它的界面可能已经发生了一些变化。两个版本的 OpenEXR 都可以让我在预览中打开 EXR 文件。每次新安装 OpenEXR 后，我都会返回，卸载 OpenCV 并重新安装。OpenCV 正在检测正确的 OpenEXR：

```
--   Media I/O: 
--     ZLib:                        /usr/lib/libz.dylib (ver 1.2.5)
--     JPEG:                        /usr/local/lib/libjpeg.dylib (ver 80)
--     PNG:                         /usr/X11/lib/libpng.dylib (ver 1.5.4)
--     TIFF:                        /usr/local/lib/libtiff.dylib (ver 42 - 4.0.3)
--     JPEG 2000:                   /usr/local/lib/libjasper.dylib (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1) 
```

当我尝试在 python 中通过 cv2 读取或写入 EXR 时，我得到

```
terminate called throwing an exceptionAbort trap:6 
```

这是完整的崩溃报告：

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
abort() called
objc[52394]: garbage collection is OFF
terminate called throwing an exception

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x00007fff8e43a82a __kill + 10
1   libsystem_c.dylib               0x00007fff8e012a9c abort + 177
2   libc++abi.dylib                 0x00007fff8d2607bc abort_message + 214
3   libc++abi.dylib                 0x00007fff8d25dfcf default_terminate() + 28
4   libobjc.A.dylib                 0x00007fff944501cd _objc_terminate + 114
5   libc++abi.dylib                 0x00007fff8d25e001 safe_handler_caller(void (*)()) + 11
6   libc++abi.dylib                 0x00007fff8d25e05c std::terminate() + 16
7   libc++abi.dylib                 0x00007fff8d25f152 __cxa_throw + 114
8   libopencv_highgui.2.4.dylib     0x000000010dc49d44 Iex::throwErrnoExc(std::string const&, int) + 3492
9   libopencv_highgui.2.4.dylib     0x000000010dc4a8fc Iex::throwErrnoExc(std::string const&) + 24
10  libopencv_highgui.2.4.dylib     0x000000010dc4c5e7 IlmThread::Semaphore::Semaphore(unsigned int) + 67
11  libopencv_highgui.2.4.dylib     0x000000010dc4b969 IlmThread::ThreadPool::Data::Data() + 27
12  libopencv_highgui.2.4.dylib     0x000000010dc4be74 IlmThread::ThreadPool::ThreadPool(unsigned int) + 46
13  libopencv_highgui.2.4.dylib     0x000000010dc4c260 IlmThread::ThreadPool::globalThreadPool() + 46
14  libopencv_highgui.2.4.dylib     0x000000010dc696aa Imf::globalThreadCount() + 9
15  libopencv_highgui.2.4.dylib     0x000000010dc3e38b cv::ExrDecoder::readHeader() + 35
16  libopencv_highgui.2.4.dylib     0x000000010dc2f54a _ZN2cvL7imread_ERKSsiiPNS_3MatE + 249
17  libopencv_highgui.2.4.dylib     0x000000010dc2f3d4 cv::imread(std::string const&, int) + 132
18  cv2.so                          0x000000010d4d28f4 _ZL15pyopencv_imreadP7_objectS0_S0_ + 332
19  org.python.python               0x000000010d19ed77 PyEval_EvalFrameEx + 13861
20  org.python.python               0x000000010d1a1cd8 PyEval_EvalCodeEx + 1996
21  org.python.python               0x000000010d1a1d4d PyEval_EvalCode + 54
22  org.python.python               0x000000010d1b908f 0x10d117000 + 663695
23  org.python.python               0x000000010d1ba671 PyRun_InteractiveOneFlags + 517
24  org.python.python               0x000000010d1ba79a PyRun_InteractiveLoopFlags + 214
25  org.python.python               0x000000010d1ba7fc PyRun_AnyFileExFlags + 63
26  org.python.python               0x000000010d1ca2af Py_Main + 2715
27  org.python.python               0x000000010d10fe88 0x10d10f000 + 3720 
```

具体来说，这些错误是由于：

```
import cv2
cv2.imread("image.exr") 
```

有什么建议么？

编辑：我还尝试从 OpenCV 网站重新编译 2.4.3 的源代码，并且遇到了完全相同的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T11:11:07.810

我有一个非常相似的问题，并调试了库，通过源代码挖掘并找到了问题的原因。

它是由 OpenEXR 库尝试使用 SysV 信号量引起的，但实际上并不支持它们。EXR 中有一行`CMakeLists.txt`查找是否存在`semaphore.h`以决定是否应在支持库中使用它。

然而，达尔文只包含信号量作为遗留，并且`sem_init()`将始终返回`ENOSYS`，这意味着它没有实现。这会导致信号量构造函数在其构造函数中抛出异常，该异常在尝试解析 EXR 标头时触发。

解决方案是简单地编辑文件`ilmBaseConfig.h`并将信号量行更改为：

```
#undef HAVE_POSIX_SEMAPHORES 
```

然后重建并重新安装。

然后，EXR 库将使用它自己的信号量实现，并且 EXR 加载将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:51:32.960

通过回滚到 OpenCV 2.4.2 解决了这个问题。似乎他们已经将 OpenEXR 1.7.1 与 2.4.3 发行版捆绑在一起，但它不起作用。此外，2.4.3 似乎无法检测到早期版本的 OpenEXR。

# c# - 实现文件上传的MVP模式

> ID：14368651
> 
> 赞同：2
> 
> 时间：2013-01-16T21:59:48.663
> 
> 标签：c#, asp.net, file-upload, webforms, mvp

我是 MVP 模式的新手。我不太清楚在哪里编写将文件上传到服务器的逻辑，然后在上传后执行一些验证步骤和数据库操作。请指教。

```
public interface IPresenter
{
    void UploadFile(string fileName); //For simplicity, file name is passed;
                                      //it can be declared as a property  
}    

public interface IDefaultView
{
     void Upload();
}

public class DefaultPresenter : IPresenter
{
     protected DefaultPresenter() {}

     public DefaultPresenter(IDefaultView defaultview)
     {
        this.defaultView = defaultView;
     }

     public void UploadFile(string fileName)
     {
         //Do I need to write saving functionality here or call
         //defaultView.Upload(fileName)?
         //
         //From online articles, I have seen all business functionality written here.
         //But I think I will not be able to use System.Web in this layer.
     }
}

public partial class UploadExtract: IDefaultView    
{
    public void Upload(fileName)
    {                
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:01:42.777

您将无法`System.Web`在您的业务逻辑中使用。而且，事实上，你不应该。

您可以对控制器进行编码以接受来自客户端的文件并将其保存在本地服务器的某个位置。然后，将文件名传递给您的业务逻辑层以进行进一步处理。

还有你的后续问题：

> 问：我正在将文件读入内存流。是否可以将内存流传递给presenter，在presenter中执行业务逻辑，最后在view中设置文件上传状态？

是的，这也有效：传递流而不是文件名。

# javascript - 浏览器中的 javascript：异步任务执行模型

> ID：14368655
> 
> 赞同：2
> 
> 时间：2013-01-16T22:00:04.693
> 
> 标签：javascript, browser, asynchronous

我试图绕开我的脑袋，了解 javascript async 在单线程浏览器环境中是如何工作的。

作为异步，我们可以同时处理计时器和 xhr 请求。现在假设我有类似下面的东西

```
function doStuff() {
    for(var i=0; i<100000000; i++) {
        // do something to make proc busy
        if(i%1000 === 0) {
            console.log('in for loop');
        }
    }
}

setTimeout(function() {
    console.log('timed out')
}, 2);
doStuff();
doStuff();
doStuff(); 
```

计时器设置为非常小的值（2ms），所以我想它应该如下工作：

1) 定时器回调排队

2)`doStuff()`被执行（作为一个整体？），它需要一些时间（超过 2 毫秒）

`doStuff()`3）计时器回调运行，因为在一个执行和另一个执行之间有一个时刻

4) next`doStuff()`被称为

4）最后一个`doStuff()`被称为

相反，我看到的是所有三`doStuff()`件事都在计时器回调触发之前完成。而且它比那些 2ms 的时间要长得多。是的，我知道`setTimeout`不能保证设置的这个时间值。

我的问题是javascript如何执行代码？在调用异步队列中的某些内容之前将立即执行的最小的原子块是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:07:24.667

你在这里错了：

> 3）计时器回调运行，因为在一个 doStuff() 执行和另一个执行之间有一个时刻

为什么在以下问题的答案中：

> 在调用异步队列中的某些内容之前将立即执行的最小的原子块是什么？

JavaScript 使用一种叫做**事件循环**的东西。每个事件循环周期都可以称为“滴答”。在每个滴答声中，解释器检查是否有要执行的异步回调（例如，`setTimeout`超时已过期的回调）。

所有其他同步操作都发生在同一滴答声中。因此，在您的示例中，将*在下一个*滴答中检查计时器是否到期，但所有三个调用`doStuff`都在*当前*滴答中执行。这就是为什么传递给的时间值`setTimeout`不能保证的原因：没有办法知道到下一个刻度需要多长时间，所以我们通常说回调将“尽快”运行。在 的情况下`setInterval`，甚至可能会掉线；例如，当下一个滴答发生在定义间隔的两倍之后，回调只运行一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T22:03:20.510

由于 Javascript 是单线程的，因此只能在解释器空闲时处理超时。当您将超时功能排队时，解释器仍在处理您的主脚本，并且在完成之前无法处理超时。

`setTimeout`or`setInterval`或任何其他异步事件只会在没有代码运行时处理。他们不会中断当前的代码。任何阻塞的正在运行的 javascript 代码都会延迟所有事件处理程序的执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T12:36:43.323

WebWorker 是 Async Javascript 的更新解决方案。对于 sencha 开发人员来说，[这里](http://www.sencha.com/blog/the-html5-family-web-workers)是教程，仍然不依赖于 setTimeout

# linux - 需要使用 BASH 脚本将 TLD 从 FQDN 列表中吸出

> ID：14368658
> 
> 赞同：3
> 
> 时间：2013-01-16T22:00:16.010
> 
> 标签：linux, bash, scripting

我有一个从 httpd.conf 文件中提取的域名列表。这些域名的格式如下：

tld.com
cname.tld.com

这些域名中很少有共享 TLD。

我正在尝试为每个域名仅输出 TLD 列表，但似乎无法弄清楚如何操作 STDOUT 以仅显示给定每个字符串的 tld.com。

例如。假设我的清单有：

site1.com
site2.com
mail.site2.com
www.site3.com
site4.com

我需要从这个列表中得到的结果将反映：

网站 1.com网站
2.com网站 2.com 网站
3.com
网站
4.com

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:23:27.200

我想到了：

```
 awk -F"." '{print $(NF-1)"."$NF}' /path/to/listfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:02:44.710

**试试这个**：

```
rev <your file> | cut -d "." -f1-2 | rev | sort -u 
```

**说明**：

如果您的文件包含以下几行：

```
foo.com
bar.foo.com 
```

第一个 rev 将其转换为：

```
moc.oof
moc.oof.rab 
```

然后只需选择前两个字段并再次反转它。但是，这仅适用于 3 个字符的 tld。它不适用于类似`.co.uk`.

**CCTLD 更新：**

```
#!/usr/local/bin/bash

# Usage ./foo.sh <file with FQDNS>

for i in `cat $1`
do
        j=`echo $i | rev | cut -d "." -f2`;
        if [ $j == "co" ]
        then
                # CCTLDs
                echo $i | rev | cut -d "." -f1-3 | rev >> $1.tmp
        else
                # 3 character TLD
                echo $i | rev | cut -d "." -f1-2 | rev >> $1.tmp
        fi
done
cat $1.tmp | sort -u
rm $1.tmp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:07:40.193

当您尝试在文本中查找模式时，请考虑[正则表达式](https://rads.stackoverflow.com/amzn/click/com/0596528124)。

此[Wikipedia 页面](http://en.wikipedia.org/wiki/Regular_expression#POSIX)列出了您将在正则表达式中使用的最常见符号。

现在，TLD 是一系列 ( `*`) 非点 ( `[^.]`)、一个点 ( `\.`)、另一个系列非点 ( `[^.]*]`)，然后是行尾 ( `$`)。正则表达式是：

```
[^.]*\.[^.]*$ 
```

您可以像这样使用它：

```
$ cat foo
site1.com
site2.com
mail.site2.com
www.site3.com
site4.com
$ grep -o '[^.]*\.[^.]*$' foo
site1.com
site2.com
site2.com
site3.com
site4.com 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-31T14:05:22.640

```
echo FQDN | rev | cut -d "." -f1 | rev 
```

或者，即使使用 IP 地址：

```
getent hosts IP |  rev | cut -d "." -f1 | rev 
```

# c# - 确定 IDisposable 是否应该扩展接口或在实现所述接口的类上实现

> ID：14368663
> 
> 赞同：27
> 
> 时间：2013-01-16T22:00:27.817
> 
> 标签：c#, dispose, idisposable

如何确定是否应该使用 IDisposable 扩展我的接口之一或在实现我的接口的类上实现 IDisposable？

我有一个不需要处理任何外部资源的接口，除了一个特定的实现。我的选择似乎是：

1) 在需要所有实现都实现 Dispose 的接口上实现 IDisposable，即使只是一个空方法。

-或者-

2) 仅在需要释放资源的类上实现 IDisposable。这将导致“使用”问题，因为我的对象是从工厂创建的，因此所有上游代码都对接口起作用。由于接口未绑定到 IDisposable，因此“使用”看不到 Dispose 方法。但是，我可以将工厂结果转换为实现；但是，这会使消费者意识到实现，从而破坏了接口的目的。

关于最佳实践的任何想法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-16T22:07:21.100

如果您希望调用者只能与接口交互，而不能与实现交互，那么您希望接口扩展`IDisposable`。如果没有，他们将需要检查是否`value is IDisposable`仍然需要处理它。

如果负责处理对象的对象知道具体的实现，并且只有对象被赋予了对它的引用（但不负责处理它）才使用接口，那么考虑第二个选项。

第一个选项的一个很好的例子是`IEnumerator`. 许多`IEnumerator`对象在释放时不需要做任何事情，但有些对象需要做任何事情，因此接口扩展`IDisposable`，因为负责该对象的创建/生命周期的对象将（或应该）永远不知道底层实现。

第二种的一个例子是`IComparer` *很多*需要比较的对象都是一次性的，但是通过接口使用对象的代码部分不负责它的创建/生命周期，所以它不需要知道是否类型是一次性的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-18T00:20:29.833

50,000 美元的问题是处置责任是否会与接口一起传递，或者换句话说，使用实现对象的最后一个实体是否可能不是创建它的实体。

实现的一个重要原因是`IEnumerator<T>`实现`IDisposable`对象是由实现的对象创建的，`IEnumerable<T>.GetEnumerator()`但随后通常被其他对象使用。实现的对象`IEnumerable<T>`会知道它返回的东西是否真的需要处理，但无法知道接收者什么时候处理完。调用的代码`IEnumerable<T>.GetEnumerator()`将知道何时处理完返回的对象，但无法知道它是否需要任何清理。明智的做法是指定调用的代码，`IEnumerable<T>.GetEnumerator()`以确保返回的对象`Dispose`在被放弃之前已经调用过它；这`Dispose`方法在很多情况下什么都不做，但是无条件地调用一个保证存在的不做任何事情的方法比检查一个不存在的方法是否存在要便宜。

如果您的接口类型的性质是实现对象是否需要清理以及何时应该进行清理的问题都将由同一个实体来回答，那么接口就不需要继承`IDisposable`。如果实例将由一个实体创建但最后由另一个实体使用，那么继承`IDisposable`将是明智的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-22T19:21:15.123

如果您`IDisposable`在具体类上实现并且接口用户知道它可能是一次性的；你可以做

```
IFoo foo = Factory.Create("type");
using(foo as IDisposable){
    foo.bar();
} 
```

如果`foo`不执行`IDisposable`，`using`将达的`using(null)`行之有效。

以下示例程序的输出将是

```
Fizz.Bar
Fizz.Dispose
Buzz.Bar 
```

示例程序

```
using System;

internal interface IFoo
{
    void Bar();
}
internal class Fizz : IFoo, IDisposable
{
    public void Dispose()
    {
        Console.WriteLine("Fizz.Dispose");
    }

    public void Bar()
    {
        Console.WriteLine("Fizz.Bar");
    }
}
internal class Buzz : IFoo
{
    public void Bar()
    {
        Console.WriteLine("Buzz.Bar");
    }
}

internal static class Factory
{
    public static IFoo Create(string type)
    {
        switch (type)
        {
            case "fizz":
                return new Fizz();
            case "buzz":
                return new Buzz();
        }
        return null;
    }
}

public class Program
{

    public static void Main(string[] args)
    {

        IFoo fizz = Factory.Create("fizz");
        IFoo buzz = Factory.Create("buzz");

        using (fizz as IDisposable)
        {
            fizz.Bar();
        }
        using (buzz as IDisposable)
        {
            buzz.Bar();
        }
        Console.ReadLine();
    }

} 
```

# ruby - Ruby Shoes，多元素删除

> ID：14368668
> 
> 赞同：0
> 
> 时间：2013-01-16T22:00:43.123
> 
> 标签：ruby, shoes

基本上，每次选择保管箱选项时，我都会尝试重新打印此方法。然而：

```
inscription "test", :margin => 1, :stroke => rgb(x, x, x) 
```

元素不删除。他们只是将自己附加到旧的。如果不清除整个堆栈，我似乎找不到清除它们的方法！有没有办法将 Shoe 的 clear() 用于相同类型的元素？

请注意，很多代码是其他东西的占位符，这就是为什么我像糖果一样到处乱扔常量。

```
def drawHeatMap #(calculatedGeneArray) NOT IMPLEMENTED
        # rect 'Pixels across, pixels down, width, height'
        pixelsAcross = 32
        pixelsDown = 28
        size = 18
        for i in 1..30
            if i <= 15 
            inscription "test", :margin => 1, :stroke => rgb(0, 128, 0)
            elsif i > 15
            inscription "test", :margin => 1, :stroke => rgb(205, 92, 92)
            end
            for j in 1..10
                stroke rgb(0, 0, 0) 
                #Fills Blocks randomly  
                randomnumber = 1+rand(8)
                case randomnumber
                when 1
                    fill rgb(19, 231, 3)
                when 2
                    fill rgb(9, 99, 0)   
                when 3
                    fill rgb(3, 73, 0)
                when 4 
                    fill rgb(74, 74, 0)
                when 5
                    fill rgb(48, 47, 0)
                when 6
                    fill rgb(32, 32, 48)
                when 7 
                    fill rgb(41, 41, 41)
                when 8 
                    fill rgb(15, 15, 15)
                end
                rect pixelsAcross, pixelsDown, size, size
                #Fills Ovals Randomly
                randomnumber = 1+rand(4)
                case randomnumber
                when 4
                    fill white
                    nostroke
                    oval  (pixelsAcross+(size/2)),(pixelsDown+(size/2)), size/4, center:true
                end         
                pixelsAcross += 18      
            end
            pixelsDown += 18
            pixelsAcross = 32   
        end 
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:13:57.807

我不知道您要删除什么以及何时删除，但我认为您可以使用以下原则：

```
Shoes.app do

  a=[]

  tmp=para "jkjkj"
  a << tmp
  tmp=para "sdfg"
  a << tmp

  button "jhjjh" do
   a.each{|l| l.remove}
  end

end 
```

# macos - 如何访问 TWRequest.h

> ID：14368677
> 
> 赞同：0
> 
> 时间：2013-01-16T22:01:09.360
> 
> 标签：macos, twitter

我正在按照此处编写的说明来编译示例 twitter 客户端应用程序。 [https://dev.twitter.com/docs/ios/making-api-requests-twrequest](https://dev.twitter.com/docs/ios/making-api-requests-twrequest)

我遇到的问题是在我的本地机器上找不到 TWRequest.h。我是这个环境的新手。有人可以指导我在哪里/如何将 TWRequest.h 添加到环境/路径中吗？

我可以使用 apt-get / homebrew / mac-ports 来获取它吗？它是否驻留在我的机器上但我找不到它？或者我应该手动下载它，从哪里下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:23:31.923

TWRequest 包含在 Twitter.framework 中，该框架仅适用于 iOS 设备。

# objective-c - 在显示视图之前从后台恢复后修改 UIViewController

> ID：14368685
> 
> 赞同：0
> 
> 时间：2013-01-16T22:01:35.687
> 
> 标签：objective-c, cocoa-touch, uiviewcontroller

我想修改我的`UIViewController`应用程序已经在后台，然后再次被带到前面，我想在它显示之前修改视图。我怎么能这样做，因为`-viewWillAppear:`没有被调用？我应该`- application:didBecomeActive`获取对正在显示的视图控制器的引用然后修改视图吗？重要的是视图在可见时不被修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:16:46.710

[您的控制器可以将自己注册为UIApplicationDidBecomeActiveNotification](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/data/UIApplicationDidBecomeActiveNotification)通知的观察者，以根据需要做出反应。

* * *

仅此一项并不能保证视图可见或不可见。

UIApplicationDelegate 协议文档声明将在调用 -applicationDidBecomeActive: 后触发通知。根据触发调用的事件，视图可能已经或可能不可见。例如，如果应用程序由于来电而暂停，则视图可能在用户拒绝呼叫时保持可见，并且在应用程序再次激活时仍然可见。

您可能需要跟踪应用程序在变为非活动状态后是否真正进入了后台，以决定在再次变为活动状态时采取什么操作。`UIApplicationWillEnterForegroundNotification`听起来像您正在寻找的通知，但仅此一项并不能告诉您应用程序是否被某些事件中断，或者用户是否通过按下主页按钮暂停了它。您还需要考虑应用程序可能已暂停、终止然后重新启动的情况。

[需要阅读 iOS 应用程序编程指南中的管理应用程序状态更改](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW14)，以了解您希望如何响应不同的可能转换。

# javascript - 画布上的水平滚动。HTML5

> ID：14368716
> 
> 赞同：9
> 
> 时间：2013-01-16T22:04:06.300
> 
> 标签：javascript, asp.net, html, c#-4.0, html5-canvas

我正在通过 javascript 在 webproject 上创建画布。

画布在 xy 平面上有图形表示。

我正在尝试将水平滚动功能添加到画布。

我研究了一些方法：-

1）在画布上绘制12个月的数据，当鼠标向前滚动时，第1个月的数据消失，最后添加一个新的月份数据，绘制新的画布。

缺点：- 每次鼠标滚动以平移时间线时 - 都必须进行新的 SQL 查询，这使我的 Web 应用程序非常慢。

2) 也许我可以通过 1 个 SQL 查询在画布上绘制 10 年的数据，但只显示 12 个月的数据。掩盖剩下的 9 年。现在当客户端滚动时，我捕获滚动事件并移动到画布的适当部分。这可能吗？如果是，那怎么办？

任何人都可以建议吗？

![我当前的画布表示 = 只有 12 个月的数据](../Images/84db8b7892111ee73ed4a517e6271fb2.png)

**我当前的画布表示 = 只有 12 个月的数据**

**为了更具体地说明滚动，我想对我的客户端滚动操作有如下感觉：-**

[http://www.simile-widgets.org/timeline/](http://www.simile-widgets.org/timeline/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T23:07:14.350

这是一个非常基本的实现：http: [//jsfiddle.net/CQPeU/](http://jsfiddle.net/CQPeU/)

```
var can = document.getElementById("can"),
    ctx = can.getContext('2d'),
    dragging = false,
    lastX = 0,
    translated = 0;

// these two lines will make the y-axis grow upwards. 
ctx.scale(1,-1);  
ctx.translate(0, -400);

can.onmousedown = function(e){
  var evt = e || event;
  dragging = true;
  lastX = evt.offsetX;
}

window.onmousemove = function(e){
  var evt = e || event;
  if (dragging){
    var delta = evt.offsetX - lastX;
    translated += delta;
    ctx.translate(delta, 0);  // translate the context.
    lastX = evt.offsetX;
    draw();  // redraw
  }
}

window.onmouseup = function(){
  dragging = false;
}

function draw() {
  ctx.clearRect(-translated, 0, 600, 400); // this is why we need to keep track of how much we've translated
  for (var i = 0; i < plot.length; i++) {
    ctx.beginPath();
    ctx.arc(plot[i].x, plot[i].y, 5, 0, 2 * Math.PI); // note we don't have to futz with the x/y values, and can use them directly. 
    ctx.fill();
  }
} 
```

要创建网格，您可以执行以下操作：

```
var grid = (function(dX, dY){
  var can = document.createElement("canvas"),
      ctx = can.getContext('2d');
  can.width = dX;
  can.height = dY;
  // fill canvas color
  ctx.fillStyle = 'black';
  ctx.fillRect(0, 0, dX, dY);

  // x axis
  ctx.strokeStyle = 'orange';
  ctx.moveTo(.5, 0.5);
  ctx.lineTo(dX + .5, 0.5);
  ctx.stroke();

  // y axis
  ctx.moveTo(.5, .5);
  ctx.lineTo(.5, dY + .5);
  ctx.stroke();

  return ctx.createPattern(can, 'repeat');
})(100, 50); 
```

这将像这样使用：

```
function draw() {
  ctx.clearRect(-translated, 0, 600, 400);
  ctx.rect(-translated, 0, 600, 400);
  ctx.fillStyle = grid;
  ctx.fill();
  ctx.fillStyle = "#fff";
  for (var i = 0; i < plot.length; i++) {
    ctx.beginPath();
    ctx.arc(plot[i].x, plot[i].y, 5, 0, 2 * Math.PI);
    ctx.fill();
  }
} 
```

更新演示：http: [//jsfiddle.net/CQPeU/2/](http://jsfiddle.net/CQPeU/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-09T00:32:29.760

为避免在@Shmiddty 的答案中重绘每个鼠标移动事件，您可以将整个画布绘制成超大尺寸，然后更改 CSS 边距属性。当画布的内容变得更复杂时，这是一个显着的性能提升。

这是一个演示：[https ://jsfiddle.net/ax7n8944/](https://jsfiddle.net/ax7n8944/)

HTML：

```
<div id="canvasdiv" style="width: 500px; height: 250px; overflow: hidden">
    <canvas id="canvas" width="10000px" height="250px"></canvas>
</div> 
```

JS：

```
var canvas = document.getElementById("canvas");
var context = canvas.getContext('2d');
var dragging = false;
var lastX;
var marginLeft = 0;

for (var i = 0; i < 1000; i++) {
    context.beginPath();
    context.arc(Math.random() * 10000, Math.random() * 250, 20.0, 0, 2 * Math.PI, false);
    context.stroke();
} 

canvas.addEventListener('mousedown', function(e) {
    var evt = e || event;
    dragging = true;
    lastX = evt.clientX;
    e.preventDefault();
}, false);

window.addEventListener('mousemove', function(e) {
    var evt = e || event;
    if (dragging) {
        var delta = evt.clientX - lastX;
        lastX = evt.clientX;
        marginLeft += delta;
        canvas.style.marginLeft = marginLeft + "px";
    }
    e.preventDefault();
}, false);

window.addEventListener('mouseup', function() {
    dragging = false;
}, false); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-12T19:41:00.777

最好使用带有以下插件的 Phaser 框架[http://jdnicholsc.github.io/Phaser-Kinetic-Scrolling-Plugin/](http://jdnichollsc.github.io/Phaser-Kinetic-Scrolling-Plugin/)

# web - 如何为网站创建 facebook 测试用户？

> ID：14368727
> 
> 赞同：2
> 
> 时间：2013-01-16T22:04:43.127
> 
> 标签：web, facebook-like, webpage, facebook-test-users

我在网页上有类似 facebook 的按钮。我想使用 facebook 帐户测试按钮。我知道您可以创建测试用户来测试 Facebook 应用程序 ( [https://developers.facebook.com/docs/test_users/](https://developers.facebook.com/docs/test_users/) )，但方向和 GUI 似乎只针对 Facebook 应用程序。该网站与组织的 facebook 页面相关联，但管理控件不包括 Facebook 应用程序开发人员控件，例如用于测试用户的 GUI。这是我们 Facebook 页面的角色页面的样子：

![角色页面截图](../Images/6a34b84cfcc8d1392c21e80891137af7.png)

我希望能够为网站上的页面点赞，这样我就可以确保 Facebook 为用户单击点赞按钮时创建的结果帖子获取正确的标题、网址和描述。如何创建测试用户来执行此操作？

如果这很重要，则使用 AddThis 创建喜欢按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:18:48.713

这是页面管理界面的屏幕截图 - 您需要通过 API 或应用仪表板为您的应用创建测试用户，而不是通过页面界面：此处的完整文档：developers.facebook.com/docs/test_users

测试用户将与拥有它的应用 ID 绑定，但测试用户也可以使用多个应用

# mysql - 如何将存储在 Magento DB 中不同表中的产品添加到 Magento 购物车？

> ID：14368737
> 
> 赞同：0
> 
> 时间：2013-01-16T22:05:30.790
> 
> 标签：mysql, database, magento, paypal, shopping-cart

有人可以提供一些指导，说明我们如何将存储在不同 Magento DB 表（而不是通常存储产品的表）中的产品添加到 Magento 购物车，以便我们可以利用 Magento 支付流程？

这是问题所在：

我聘请的一位开发人员正在尝试将来自数字分销商的提要集成到 Magento 实例。他将产品信息保存在数据库中的一个表中，而不是 Magento 通常存储产品的表。实际上，数字产品存储在供应商服务器上。

产品购买流程如下： • 对于每次销售

1.  销售产品
2.  出示收据页
3.  接受下载命中
4.  执行“mkfu”命中

    *   重要的是，当您的客户点击此类链接时，examville.com 上的功能应查找数字商品的 SECURITY_REFERENCE（例如 MTE0NjUwNzU4239xNi43NDcyOTk），然后在仓库服务器上执行命中
5.  处理结果

6.  将买家重定向到“fu”（履行 URL）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:22:23.300

您需要聘请合适的开发人员；) 无法将此类产品添加到购物车。您需要将它们转换为 Magento 产品。

# attributes - 在 twig 中显示来自连接查询的数据属性

> ID：14368738
> 
> 赞同：0
> 
> 时间：2013-01-16T22:05:31.237
> 
> 标签：attributes, doctrine, twig, jointable

我对 Symfony2 和 Doctrine 很陌生，但我用 PHP 做了一些编程。我有两张桌子：

```
Quotes:
id
quote
subject
auth_id 
```

和

```
QuoteAuthor:
id
authorFirstName
authorLastName
authorLastNameFirstLetter
slug 
```

我正在运行一个查询：

```
"SELECT u, a FROM BetterLifeQuotesBundle:Quote u u.auth_id a WHERE a.id = 4" 
```

在这个特定的查询中，结果只有一行（作者只有一个引号）。查询是使用 WhiteOctober pagerfanta 完成的，以便于分页。我将结果传递给树枝并显示引号

```
{% for data in pagerfanta.currentPageResults %}
    <li>{{ data.quote }}</li>
{% endfor %} 
```

在这种情况下，将显示 data.quote 属性。

**问题是：** 如何显示连接`QuoteAuthor`表中的数据属性？即`authFirstName, authLastName`等。

我在网上搜索，我找不到任何答案。顺便说一句 - 如果在上面的 Twig 语句中，我用它替换`data.quote`它`data[‘quote’]`给出了“类型的对象（带有 ArrayAccess）中的键'引用'不存在”的错误。

我需要的所有信息都在其中`data`，您可以在下面的转储信息中看到：

```
object(BetterLife\QuotesBundle\Entity\Quote)[760]
  private 'id' => int 500
  private 'quote' => string 'An archaeologist is the best husband a woman can have; the   
                       older she gets, the more interested he is in her.' (length=108)
  private 'subject' => string 'Men and Women' (length=13)
  private 'auth_id' => 
    object(BetterLife\QuotesBundle\Entity\QuoteAuthor)[758]
      private 'id' => int 4
      private 'authorFirstName' => string 'Agatha' (length=6)
      private 'authorLastName' => string 'Christie' (length=8)
      private 'authorLastNameFirstLetter' => string 'C' (length=1)
      private 'slug' => string '' (length=0)
      private 'quotes' => 
        object(Doctrine\ORM\PersistentCollection)[753]
          private 'snapshot' => 
            array (size=0)
              ...
          private 'owner' => 
            &object(BetterLife\QuotesBundle\Entity\QuoteAuthor)[758]
          private 'association' => 
            array (size=15)
              ...
          private 'em' => 
            object(Doctrine\ORM\EntityManager)[345]
              ...
          private 'backRefFieldName' => string 'quote_author' (length=12)
          private 'typeClass' => 
            object(Doctrine\ORM\Mapping\ClassMetadata)[816]
              ...
          private 'isDirty' => boolean false
          private 'initialized' => boolean false
          private 'coll' => 
            object(Doctrine\Common\Collections\ArrayCollection)[769]
          ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:18:41.153

为了使这个工作，你将需要`getAuthor()`你的类中的一个方法`Quote`（它返回 的值`auth_id`）和`getFirstName()`你的类中的一个方法`QuoteAuthor`（它返回 的值`authorFirstName`）。

然后，您应该能够使用`{{ data.author.firstName }}`.

我建议将`auth_id`属性重命名为，以便更容易理解和`author`之间的关系。`Quote``Author`

# node.js - 带有猫鼬和数组的聚合框架

> ID：14368740
> 
> 赞同：2
> 
> 时间：2013-01-16T22:05:50.213
> 
> 标签：node.js, mongodb, express, mongoose

我提出了一个与此相关的问题，但我对 mongoose 的聚合框架有一个新的疑问。例如，我有这个架构：

```
var userschema = new mongoose.Schema({

   user: String,
   pass: String,
   following: [String],
   imagen: [{ 

              title: String,
              date: { type: Date, default: Date.now },
              name: String,
              author: String,

           }],

}); 
```

这是聚合框架的代码：

```
app.get('/home', middleware.yeses, function (req, res){

 usermodel.findOne({ user: req.session.user }, function (err, user){

 model.aggregate([

       {$match: { _id : '50f5c7265838530000000006' }},
       {$unwind: '$imagen'},          
       {$sort: {'imagen.date': 1}}

    ], function (err, imagenes){

        if (err) throw err;

        console.log(imagenes);

        res.send('foo');

    });
   });
  }); 
```

我试图进入控制台所有的`images`，例如像这样的 imagen 模式：

```
{  title: 'footitle',
   name: 'foophoto.png',
   date: Tue Jan 1 2013 22:32:12 GMT+0100 (CET),
   author: 'foouser'  } 
```

并获取按日期排序的所有图像模式。

用户架构中的以下数组包含`_id`实际用户正在关注的用户。因此，使用`{$match: { _id : '50f5c7265838530000000006' }},`，我只得到我关注的用户的图像。问题是，当执行此代码时，我收到 this `[]`，我得到的图像数组是空的，所以代码不起作用，因为我关注的用户有上传照片。

当我删除这个`{$match: { _id : '50f5c7265838530000000006' }}`时，我得到了所有用户和他们的图像，但我不仅得到了图像模式，我得到了整个用户模式。

所以，我想要的是获取我关注的用户的所有图像，按日期排序。有什么解决办法吗？

谢谢提前！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:52:03.293

原因是您将`_id`字段作为字符串而不是`ObjectID`. 尝试这个：

```
var ObjectID = require("mongodb").ObjectID;

// ...

model.aggregate([

  {$match: { _id : ObjectID('50f5c7265838530000000006') }},

  // ... 
```

# c++ - lambda 捕获是否支持可变参数模板参数

> ID：14368744
> 
> 赞同：8
> 
> 时间：2013-01-16T22:06:08.783
> 
> 标签：c++, templates, c++11, lambda

如果我能做到以下几点就好了：

```
template <class RT, class... PT>
class Event 
{
    ...
    void operator()(PT... args)
    {
        std::for_each(
            l.begin(), l.end(), [args...](Handler *p) { (*p)(args...); }
        );
    }
    ...
}; 
```

不幸的是，我无法使用 g++ 4.7.2 (-std=c++0x) 编译它：

> evtempl.hh：在成员函数'void elt::Event::operator()(PT ...)'中：evtempl.hh:75:54：错误：预期'，'在'...'标记之前:75:54: 错误: '...' 标记之前的预期标识符 evtempl.hh:75:57: 错误: 参数包没有用'...'扩展: evtempl.hh:75:57: 注意: 'args' evtempl.hh：在 lambda 函数中：evtempl.hh:76:26：错误：扩展模式 'args' 不包含参数包 evtempl.hh：在 'void elt::Event::operator()(PT ... ) [RT = 无效；PT = {int}]': testevtempl.cc:28:9: 这里需要 evtempl.hh:74:9: 错误: 使用无效字段 'elt::Event::operator()(PT ...):: ::Handler*)>::__args' evtempl.hh: 在 'void elt::Event::operator()(PT ...) [with RT = void; PT = {int, const char*}]'

相反，我必须将该 lambda 更改为旧的、普通的语法：

```
for (itr = l.begin(); itr != l.end(); ++itr)
     (*(*itr))(args...); 
```

这个编译并且工作正常。

我想知道为什么 lambda 语法不起作用。

1.  我做错了什么或错过了什么？
2.  在 c++11 标准中这样的事情是非法的吗？
3.  或者，这是标准允许的，但这是当前编译器的问题？

我试过

```
[=](Handler *p) { (*p)(args...); } 
```

它给出的错误与您所做的相同：

```
[args](Handler *p) { (*p)(args...); } 
```

抱怨参数包未扩展

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T22:23:21.880

这是 gcc 中的一个错误。请参阅[[c++0x]lambdas and variadic templates don't work together](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=41933)或者[[C++11] Pack expansion failed in lambda expressions](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=55914)。

# php - 根据条件重定向

> ID：14368746
> 
> 赞同：-5
> 
> 时间：2013-01-16T22:06:09.997
> 
> 标签：php

我确实有以下代码：

```
<?php 
if($_SERVER['REQUEST_URI'] == 'http://example.com/knowthecode')
{
    header("Location: http://example.org/knowthecode"); exit;
} 
```

这没有按预期工作。你能帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:08:43.820

的值`$_SERVER['REQUEST_URI']`不包含整个 URL（如评论中所建议的那样）。

虽然其中还有其他元素[`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)可能最终满足您的需求，但您最好使用类似的功能[`parse_url()`](http://php.net/parse_url)，然后比较各个部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:09:00.907

`$_SERVER["REQUEST_URI"]`不包括网站的主机 - 对于像 http://www.mysite.com/page.php?key=value 这样的页面，[将](http://www.mysite.com/page.php?key=value)是`$_SERVER["REQUEST_URI"]``/page.php?key=value"

尝试查看以`$_SERVER["HTTP_HOST"]`在主机上搜索。

一个好的方法是添加：

```
echo "<pre>";
var_dump($_SERVER);
echo "</pre>";
die(); 
```

这将帮助您了解什么是服务器变量以及它们的含义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:13:10.627

看看[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

REQUEST_URI 是发送到您的服务器（域）的请求

例如在[http://www.domain.com/index.php](http://www.domain.com/index.php) REQUEST_URI 是 /index.php

你可以做的是：

```
if($_SERVER['REQUEST_URI'] == '/index.php')
{
    header("Location: http://www.google.com"); 
    exit;

} 
```

# linux - 如果 ping 服务器关闭，Linux 命令在服务器上生成文件，如果它启动，则生成不同的文件

> ID：14368751
> 
> 赞同：0
> 
> 时间：2013-01-16T22:06:26.070
> 
> 标签：linux, bash, shell, scripting, awk

好的，有点奇怪/具体的问题，但是我在 linux 上有一个命令来 ping 服务器 3 次，并返回成功回复的数量

`ping -c 3 google.com | grep 'received' | awk -F',' '{ print $2 }' | awk '{ print $1 }'`

我想扩展它，以便它在服务器上创建一个名为“server_is_up.txt”的文件（如果服务器已启动（即 - 数字为 3），或写入文件“server_is_down.txt”（如果服务器已关闭，显然）。

试过这个，但没有奏效：

`ping -c 3 google.com | grep 'received' | awk -F',' '{ print $2 }' | awk '{ if ($1 == 0) { > host_is_down.txt } else { > host_is_up.txt } }'`

我确定这很明显，但想不出将“> host_is_down.txt”部分放在哪里。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:21:33.737

试试这个：

```
ping -c 3 google.com | grep '0 received' && touch host_is_down.txt || touch host_is_up.txt 
```

# java - Webstart https：与证书上的服务器一起使用，而不是在负载均衡器上使用

> ID：14368753
> 
> 赞同：0
> 
> 时间：2013-01-16T22:06:30.960
> 
> 标签：java, https, ssl-certificate, load-balancing, java-web-start

我正在尝试为我的 Java webstart 应用程序创建一个 https 安全连接。我所做的只是将我的 Tomcat 配置为使用证书，然后就完成了。我可以做

“https://nsjns:8443/abc/xyz.jnlp”它下载了我的应用程序并且运行良好。

对于生产，我们购买了一个证书，该证书保存在负载均衡器上，实际的 Web 服务器位于负载均衡器后面。如果我使用浏览器，我可以看到服务器并可以通过在浏览器中输入 url 来下载我的 jnlp 文件。但是，由于出现以下异常，我无法使用 Java webstart 执行 jnlp 文件。

```
Java.io.IOException: Server returned HTTP response code: 503 for URL: "http://test.tec.com/abc.jnlp"
                at sun.reflect.GeneratedConstructorAccessor13.newInstance(Unknown Source)
                at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
                at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
                at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1674)
                at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1672)
                at java.security.AccessController.doPrivileged(Native Method)
                at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1670)
                at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1243)
                at com.sun.deploy.net.BasicHttpRequest.doRequest(Unknown Source)
                at com.sun.deploy.net.BasicHttpRequest.doRequest(Unknown Source)
                at com.sun.deploy.net.BasicHttpRequest.doGetRequest(Unknown Source)
                at com.sun.deploy.net.DownloadEngine.actionDownload(Unknown Source)
                at com.sun.deploy.net.DownloadEngine._downloadCacheEntry(Unknown Source)
                at com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry(Unknown Source)
                at com.sun.deploy.cache.ResourceProviderImpl.getResourceCacheEntry(Unknown Source)
                at com.sun.deploy.cache.ResourceProviderImpl.getResource(Unknown Source)
                at com.sun.javaws.Launcher.updateFinalLaunchDesc(Unknown Source)
                at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
                at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
                at com.sun.javaws.Launcher.launch(Unknown Source)
                at com.sun.javaws.Main.launchApp(Unknown Source)
                at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
                at com.sun.javaws.Main.access$000(Unknown Source)
                at com.sun.javaws.Main$1.run(Unknown Source)
                at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.IOException: Server returned HTTP response code: 503 for URL: http://test.tec.com/abc.jnlp
                at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1625)
                at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:468)
                ... 17 more 
```

它将我的网址从 https 解析为 http。我对这一切都很陌生。请帮助我提出您的想法和建议。我想做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:16:49.740

不太可能与您的证书有关。尝试在 webstart URL 中使用 IP 地址而不是主机名。

您没有说明您在哪个平台上运行 webstart，但如果 IP 地址有效，则启动 webstart 控制面板：`javaws -viewer`并转到 Java 选项卡上的网络设置。假设它还没有这么说，选择直接连接（即没有代理）并告诉我们它是否在此之后工作。

# xcode - xcode 试图嵌入视频。没有错误，但也没有视频

> ID：14368754
> 
> 赞同：3
> 
> 时间：2013-01-16T22:06:36.360
> 
> 标签：xcode, video, embed

我确信我只是错过了一些愚蠢的东西，但我整天都被困在这上面。任何帮助，将不胜感激。我试图在 ipad 应用程序中嵌入视频。我正在使用 xcode 4.2.5。我正在关注我在这里找到的教程：[embeded ipad video](http://www.techotopia.com/index.php/Video_Playback_from_within_an_iOS_4_iPhone_Application_%28Xcode_4%29)

据我所知，我完全按照说明进行操作。我已经重新开始了好几次。在我收到内存错误之前，但这次我根本没有收到任何错误。只有没有视频或音频。我没有使用的教程的唯一部分是关于 ipad 旋转的最后一部分，因为我并不担心。

我无法完全理解的唯一部分是将视频放在资源文件夹中，因为 xcode 4.5.2 没有制作视频。因此，我将 MOVIE.MOV 放在与我的 .h、.m 和 .xib 文件自动放入的同一目录中。我已经测试了视频，它确实可以自己运行。

这是代码：任何帮助或指导将不胜感激。很抱歉成为这样的菜鸟。

标题：

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>
@interface ViewController : UIViewController{

}
-(IBAction) playMovie;
@end 
```

主要的：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
-(void)playMovie
{
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                     pathForResource:@"MOVIE" ofType:@"MOV"]];
    MPMoviePlayerController *moviePlayer =
    [[MPMoviePlayerController alloc]
    initWithContentURL:url];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:moviePlayer];

    moviePlayer.controlStyle = MPMovieControlStyleDefault;
    moviePlayer.shouldAutoplay = YES;
    [self.view addSubview:moviePlayer.view];
    [moviePlayer setFullscreen:YES animated:YES];
}
- (void) moviePlayBackDidFinish:(NSNotification*)notification {

    MPMoviePlayerController *moviePlayer = [notification object];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                name:MPMoviePlayerPlaybackDidFinishNotification
                                              object:moviePlayer];

    if ([moviePlayer
         respondsToSelector:@selector(setFullscreen:animated:)])
    {
        [moviePlayer.view removeFromSuperview];
    }    
    [moviePlayer release];
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:15:13.753

您可以检查的一些事项：

*   当您将影片拖到 Xcode 项目上时，您是否选中了“将项目复制到目标组文件夹”？
*   该项目是否出现在“复制捆绑资源”构建阶段？（单击项目，选择您的目标并检查 Xcode 中的“构建阶段”选项卡）
*   路径字符串在 iOS 上区分大小写。你的电影真的有文件名“MOVIE”和扩展名“MOV”（全部大写）吗？

# git - git add 后未上演的更改

> ID：14368755
> 
> 赞同：3
> 
> 时间：2013-01-16T22:06:37.617
> 
> 标签：git

为什么我会在`Changes not staged for commit`跑步后得到物品`git add .`？

```
> git add .
> git st 

# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#       modified:   bin/ls-- (modified content, untracked content)
# 
```

这是`Red Hat 4.1.2-50`与`git 1.7.10.`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-21T13:50:40.440

尝试`git add -A`然后检查状态以提交

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T23:28:46.140

看来，那`bin/ls`是一个[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)。

当您`cd`进入此目录并运行`git status`时，您应该会看到哪些内容被修改和未跟踪，您将能够将其提交到 sumbodule 的基本存储库中。

之后，当子模块存储库的 HEAD 有新提交时，您可以`git add`在主存储库中进行此更改并在那里提交。

# android - 寻找OpenCV android教程

> ID：14368776
> 
> 赞同：4
> 
> 时间：2013-01-16T22:07:49.490
> 
> 标签：android, opencv

现在有没有人在android中实现openCV的好教程？

我基本上对仿射\包装器转换感兴趣

透视变换扭曲透视

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T08:58:34.970

*   您可能会知道[OpenCV 自己的 Android 教程](http://docs.opencv.org/doc/tutorials/introduction/table_of_content_introduction/table_of_content_introduction.html)。
*   NVIDIA的[Tegra Android 开发包](https://developer.nvidia.com/tegra-android-development-pack)包含十多个使用 OpenCV 的示例 Android 项目。文件夹中`doc`有一些解释，但不是全部。您必须注册 NVIDIA 并申请成为 Tegra Developer，这意味着填写一份包含一般信息的表格。
*   您需要很好地了解[Java 原生接口 (JNI)](http://en.wikipedia.org/wiki/Java_Native_Interface)才能创建高性能应用程序。有人已经[通过 Stackoverflow 上的 Android 教程询问了 JNI](https://stackoverflow.com/q/5659068/199048)。

# c# - 如何使用 c# 杀死除主线程之外的所有活动线程？

> ID：14368779
> 
> 赞同：0
> 
> 时间：2013-01-16T22:07:57.163
> 
> 标签：c#

> **可能重复：**
> [在 .NET 中获取当前活动的托管线程列表？](https://stackoverflow.com/questions/1825882/getting-list-of-currently-active-managed-threads-in-net)

在 ac# 方法中，我使用以下构造同时启动多个线程：

```
new Thread(() =>
{
    Application.Run(...);
}).Start(); 
```

之后如何获取所有活动线程的列表并将它们全部杀死，不包括主线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:10:46.740

如果您真的想*杀死*线程，请从 new Thread() 捕获返回值并调用 myThread.Abort()

```
Thread myThread = new Thread(() =>
{
    Application.Run(...);
}).Start();

// ...

myThread.Abort(); 
```

[http://msdn.microsoft.com/en-us/library/system.threading.thread.abort.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.abort.aspx)

然而，最好以合作方式结束线程。

如果您不想捕获线程并自己跟踪它，您可能必须使用 Profiling/Debugging API 来枚举进程中的线程

[如何枚举 C# 中的所有托管线程？](https://stackoverflow.com/questions/466799/how-can-i-enumerate-all-managed-threads-in-c)

要了解有关协作线程以及一般线程的更多信息，我建议阅读出色的文章

[http://www.albahari.com/threading/](http://www.albahari.com/threading/)

# css - Chrome 更新版本 24.0.1312.52 m 弄乱了字间距

> ID：14368780
> 
> 赞同：1
> 
> 时间：2013-01-16T22:08:03.653
> 
> 标签：css, google-chrome, word-spacing

Chrome 最近更新了，现在我的一些具有字间距样式的网站正在用最后一个单词换行到第二行。您可以在下面的链接中查看它，带有标题 (H1) 标记。这是一个错误还是有解决方法？这是在 Windows 7 64 位上。

[http://exposurebasketballtournaments.com/3008/3rd-4th-boys-basketball-tournament](http://exposurebasketballtournaments.com/3008/3rd-4th-boys-basketball-tournament)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:12:48.060

我正在使用 chrome canary（Windows 7 上的 V.26），我也看到了这种效果。我使用 chrome 检查器查看它是否在 css 代码中，似乎这段代码

```
in element
<div class="event-details">

 body.event .event-header .event-details {
float: left;
} 
```

造成这种影响，如果我错了，请纠正我:)

**编辑**

如果这是您的网站，您可以通过将其添加到代码中`min-width: 540px;` 或仅删除它来阻止它`float:left`

[SO](https://stackoverflow.com/questions/3598110/prevent-floated-divs-from-wrapping-to-next-line)上的这个问题可能与您的问题相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:18:48.110

在我看来，元素的宽度小于文本的宽度，所以它被包裹了。尝试增加元素的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:20:56.280

这是一个已报告的错误，请参阅[问题 #170226](http://code.google.com/p/chromium/issues/detail?id=170226)了解更多信息。从 Chromium 版本 27.0.1413.0 (182441) 开始，它还没有得到修复。

在修复之前，我建议应用 Chrome 特定的 CSS 来设置`word-spacing: 0;`遇到问题的元素。为此，请查看[CSS Browser Selector](https://github.com/rafaelp/css_browser_selector)。

# jquery - 如何在具有类的 div 之前选择标签

> ID：14368783
> 
> 赞同：0
> 
> 时间：2013-01-16T22:08:25.177
> 
> 标签：jquery

我有这个：

```
<a href="#">link1</a>
<a href="#">link2</a>
<div class="test">
<p>text</p>
</div> 
```

我想在 div.test 之前选择第一个 a 标签并为其添加一个类，所以我尝试了这个：

```
$('a').before('.test').addClass('test'); 
```

这有效，但它实际上也在页面上打印“.test”。

帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:09:59.870

尝试使用`.prev()`. 如果您尝试从具有类的 div 导航，这很容易。

```
$('div.test').prev().addClass('test'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:09:58.310

我认为您正在寻找`.prev()`而不是`.before()`.

[.before()](http://api.jquery.com/before/)实际上插入内容，这就是`.test`打印出来的原因。由于 jQuery 的链接能力，它仍在添加该类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:21:03.023

尝试使用`$(".test").prev().addClass('test');` 我在测试时制作的[小提琴。](http://jsfiddle.net/TExJd/)

# android - 如何更改 SearchView 默认图标？

> ID：14368788
> 
> 赞同：17
> 
> 时间：2013-01-16T22:08:52.460
> 
> 标签：android, android-actionbar, customization, searchview

我使用“ [Android Action Bar Style Generator](http://jgilfelt.github.com/android-actionbarstylegenerator) ”来生成我自己的 Holo 主题。然后我在操作栏中添加了两个图标，一个用于 searchFilter，一个用于文件选择器，**两个图标都是白色的**。文件选择器图标（右侧）看起来不错，但不知何故，搜索图标看起来是深灰色的。在搜索文本视图上键入时，关闭按钮也显示为深灰色。

我尝试更改操作栏的颜色以及搜索视图的颜色，但均未成功。为什么搜索视图显示这种颜色？我怎样才能改变它？

![ActionBar 有两个动作](../Images/64bc7bd27a7fbec053ac67e2ef4b10be.png)

非常感谢你。

**更新**：我认为我的应用程序正在使用我的图标，但它没有，它使用默认的搜索视图图标，所以我的问题实际上是，如何更改搜索视图的默认图标？menu.xml 文件中的这句话不起作用：

```
android:icon="@drawable/selectable_header_search" 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T09:23:01.373

不幸的是，没有简单的方法可以将`SearchView`图标更改为自定义可绘制对象，因为主题属性`searchViewSearchIcon`不是公共的。有关详细信息，请参阅[此](https://stackoverflow.com/a/11669808/1018177)答案。

但是，我认为您的问题是由于继承了错误的主题引起的。请`android:Theme.Holo.Light.DarkActionBar`用作您的主题的基础。那么操作栏上的默认图标应该是浅色的。

```
<style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    ...
</style> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-10T10:58:26.063

由于 searchViewSearchIcon 属性不是公开的，因此您可以使用以下代码更改图标：

```
int searchIconId = searchView.getContext().getResources().getIdentifier("android:id/search_button",null, null);
ImageView searchIcon = (ImageView) searchView.findViewById(searchIconId);
searchIcon.setImageResource(R.drawable........); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-11T20:56:03.097

尝试在*showAsAction*中设置这个选项：*MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW*

如果没有此选项，SearchView 不会采用您为操作按钮设置的图标。

```
menu.add("Search")
            .setIcon(
                    getResources().getDrawable(
                            R.drawable.selectable_header_search))
            .setActionView(searchView)
            .setShowAsAction(
                    MenuItem.SHOW_AS_ACTION_ALWAYS
                            | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW
                            | MenuItem.SHOW_AS_ACTION_WITH_TEXT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T14:47:15.077

我发现更改操作栏中默认搜索视图图标的最简单方法是在您的 onPrepareOptionsMenu 中。[你可以在这里](https://stackoverflow.com/questions/10445760/how-to-change-the-default-icon-on-the-searchview-to-be-use-in-the-action-bar-on)看到我对类似问题的回答！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-18T02:41:41.460

在您的主题风格中包括：

```
<style name="YourTheme.Toolbar">
    <item name="searchViewStyle">@style/YourActionBarSearch</item>
    <item name="editTextColor">@color/your_ab_text_color</item>
    <item name="android:textColorHint">@color/your_ab_hint_color</item>
</style> 
```

您现在可以使用 定义 SearchView 的样式`searchViewStyle`，`editTextColor`并将设置搜索框中文本的颜色。通过设置`android:textColorHint`，您还将设置提示的颜色，例如“搜索...”。

```
<style name="YourActionBarSearch" parent="@style/Widget.Holo.SearchView">
    <item name="searchIcon">@drawable/ic_ab_search</item>
    <item name="queryBackground">@null</item>
    <item name="submitBackground">@null</item>
    <item name="searchHintIcon">@drawable/ic_ab_small_search</item>
    <item name="defaultQueryHint">@string/toolbar_search_hint</item>
    <item name="closeIcon">@drawable/ic_ab_small_search_close</item>
</style> 
```

这将或多或少地为您的搜索视图设置样式。该字段`searchIcon`是操作栏中的图标。该字段`searchHintIcon`是搜索字段中提示左侧的小图标。该字段`closeIcon`是搜索字段右侧的关闭图标。

看看这个，更多的样式设置：

```
$ANDROID_SDK/platforms/android-24/data/res/values/styles_holo.xml 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-05-29T14:56:20.900

对于像我这样希望找到真正更改图标的方法的人，您可以将其与 actionbar sherlock 一起使用：

```
 // Getting the 'search_icon'
        ImageView searchIcon = (ImageView)searchView.findViewById(R.id.abs__search_button);
        // Setting background of 'search_plate' to earlier defined drawable.
        searchIcon.setImageResource(R.drawable.search_button_selector); 
```

你不能用普通的方式改变默认的`android:icon`，因为与之相关的字段已经被设置为私有。

# bash - 如何在bash的命令行上为`for`循环指定一个列表？

> ID：14368789
> 
> 赞同：1
> 
> 时间：2013-01-16T22:08:55.843
> 
> 标签：bash, command-line, for-loop

我想在命令行上指定一个不连续数字的列表，如下所示：

```
for i in (50 89 132 17 55); do
      echo $i
done 
```

如何指定列表以便`$i`依次获取每个值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T22:12:10.527

跳过括号。

```
for i in 50 89 132 17 55; do
      echo $i
done 
```

# javascript - 主干视图结构：如何在布局中嵌套视图并委托事件

> ID：14368811
> 
> 赞同：1
> 
> 时间：2013-01-16T22:10:35.080
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我是主干上的新手，我需要创建一个这样的视图结构。

```
<header>
  <nav>...</nav>
</header>
<section id="content">
  here i want to dynamically render a sub-view with its own events..
</section>
<footer>...</footer> 
```

当用户单击导航上的链接时，子视图会发生变化，并且它始终是不同的子视图（带有新闻的 HomeView 或用于身份验证过程的 LoginView，例如......）

我怎样才能做到这一点，而不委托 LayoutView 上的所有事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:18:39.377

使用[`Backbone.Router`](http://backbonejs.org/#Router). 与其在视图中处理导航链接单击事件，不如将它们的`href`属性与路由匹配。

因此，如果您有这样的导航设置：

```
<nav>
  <a href="#home">Home</a>
  <a href="#login">Login</a>
</nav> 
```

你的路由器看起来像这样：

```
Backbone.Router.extend({
  routes: {
    home:   'homePage',
    login:  'loginPage'
  },
  home: function() {
      $("#content").html(new HomeView().render().el);
  },
  login: function() {
      $("#content").html(new LoginView().render().el);
  }
}); 
```

# mamp - 使用 Mamp PRO 安装 intl.so

> ID：14368814
> 
> 赞同：0
> 
> 时间：2013-01-16T22:10:40.983
> 
> 标签：mamp, intl

我遵循这张票：http: [//blog.geertvd.be/2011/05/18/installing-the-intl-extension-on-mamp/](http://blog.geertvd.be/2011/05/18/installing-the-intl-extension-on-mamp/)。

当我重新启动 MAMP 服务器并执行 phpinfo() 时，未加载 intl 扩展。

我不明白为什么。我已经完成了好的 php.ini 文件（在我的情况下：/Applications/MAMP/bin/php/php5.3.14/conf/php.ini，我已经移动了 intl.so）我没有错误。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:56:17.420

我发现了我的问题。事实上，我使用 MAMP Pro，要编辑 php.ini 文件，我们必须点击 File > Edit Config > Php ...重启后你的配置就可以了！

# ruby - 在 Sql Server 上按顺序检索 ActiveRecord 会引发 ConnectionNotEstablished

> ID：14368818
> 
> 赞同：1
> 
> 时间：2013-01-16T22:10:59.543
> 
> 标签：ruby, sql-server, activerecord

我在一个红宝石世界，使用 activerecord (3.2.11)、tiny_tds (0.5.1-x86-mingw32) 和 activerecord-sqlserver-adapter (3.2.10)。

以下作品：

```
require 'active_record'  
class My_Table < ActiveRecord::Base; end  
My_Table.establish_connection connection_hash  
My_Table.first 
```

以下*在同一会话中*引发 ConnectionNotEstablished ：

```
require 'active_record'  
class My_Table < ActiveRecord::Base; end  
My_Table.establish_connection connection_hash  
My_Table.order(:some_column).first 
```

作为一种解决方法，我正在提取*所有*此类记录并在 ruby​​ 中进行排序，但这显然是错误的。我遗漏了一些明显的东西；它是什么？

# html - 位置的额外填充：绝对属性

> ID：14368819
> 
> 赞同：0
> 
> 时间：2013-01-16T22:11:04.440
> 
> 标签：html, css, css-position

在下面的代码中，左侧`div`块导航区域有填充，块顶部的固定（或绝对）位置`div`看起来像 1em，但左侧没有填充，而另一个`div`没有顶部或左侧的内容块上没有填充填充。至少在 Firefox 和 Chrome 中是这样。我怎样才能在`position: absolute`块上没有填充。注意：如果我删除`position: absolute`. 我该如何解决？我知道稍后我会想要填充，但我希望填充在导航和内容区域上看起来正确，并且我希望它们在没有填充作为基线的情况下看起来相同。

这是一张图片。看看左侧的 have 区域更厚，左侧的 content 区域如何变薄？

![在此处输入图像描述](../Images/8d9d3fecf000223ca12750b305f7345d.png)

这是示例代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style type="text/css">
    body {
    background: #fff;
    }
    div.content {
    background: #000;
    margin-left: 20em;
    margin-right: 4em;
    border-radius: 2em;
    }
    p {
    color: #fff;
    }
    div.nav {
    background: #000;
    width: 16em;
    position: absolute;
    left: 1em;
    top: 1em;
    border-radius: 2em
    }
</style>
</head>
<body>
<div class="content">
    <p>This is content area text</p>
</div>
<div class="nav">
    <p>This is a nav area text</p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T06:17:09.737

如果您要分配职位：绝对；到任何元素，然后不要应用边距属性。利用 top, left, right, bottom 属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T07:21:06.260

在这里找到答案[http://www.webmasterworld.com/css/3083754.htm](http://www.webmasterworld.com/css/3083754.htm)

它需要`* {margin:0; padding:0}`添加到开头，并且可以正常工作。

# .htaccess - 如何使用 %3E 字符对 URL 进行 301 重定向

> ID：14368820
> 
> 赞同：0
> 
> 时间：2013-01-16T22:11:13.987
> 
> 标签：.htaccess, redirect

我有这个奇怪的网址，`/andy-sixx-2012-short-hair%3Eandy`. 我试过这个：

```
Redirect 301 /andy-sixx-2012-short-hair%3Eandy http://mysite.com/page.html 
```

但这失败了。我可以重定向没有问题的东西，`/andy-sixx-2012-short-hairandy`所以问题似乎是**%3E**字符。任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:01:53.777

URI 在 mod_alias 或 mod_rewrite 等模块开始处理它们之前被解码，因此您需要匹配`>`而不是`%3E`：

```
Redirect 301 /andy-sixx-2012-short-hair>andy http://mysite.com/page.html 
```

# javascript - 通过 Javascript 压缩重复使用的 HTML（基于变量的变化）

> ID：14368822
> 
> 赞同：0
> 
> 时间：2013-01-16T22:11:27.943
> 
> 标签：javascript, html, minify, reusability

我有一个页面，该页面由一个包含多个组件 div 的容器组成。标记中有许多这样的容器（套件类型和版本），我根据用户通过选择框所做的选择来显示/隐藏适当的容器。

组件 div 的内容发生了变化，但 HTML 标记基本相同。

组件 HTML 框架是：

```
<div class="docs basicEdition720">  // 2nd class here is the suite type/version
  <div class="component" title=" /* component title here */ ">
    <p class="componentName"> /*component name here */ </p>
    <p class="componentType"> /*component type here */ </p>
    <p class="links"> /*component links here */ </p>
  </div>
</div> 
```

这里的重点是我有“whizbang”组件，它可能出现在几个不同的容器中，并且它具有完全相同的内容，只要容器的版本相同。当容器的版本发生变化时，whizbang 组件的唯一变化通常是链接。

例如，在**基本版 720 套件类型和版本中，whizbang 组件的内容将与****企业**版 720 套件中的 whizbang 组件完全相同。

# 关系：

## 职务/姓名

组件标题和名称永远不会根据版本而改变。它们具体地直接相互关联。如果是“A”，那么“B”。

## 类型

组件类型偶尔会根据我们正在使用的组件名称的 VERSION 更改。对于 7.2.0，“bojangle”组件可能是类型“admin”，但对于版本 7.0.4，可能是类型“user”。如果'A'和'1'，那么'B'。如果'A'和'2'，那么'C'。

有时类型与名称具体相关，例如，“gadget”组件始终具有“reference”类型。

## 链接

链接总是根据组件的版本而变化。

# 客观的：

我只想在文档中一次更新不同组件版本的链接，而不是我目前正在做的十几个。

我希望 javascript 根据已知的套件类型和版本自动生成容器。我可以给它一个框架来知道哪些组件属于哪里，例如：

```
<div class="docs basicEdition720">  // Here we have the basic edition of the
  <div class="comp gadget">         // suite, version 7.2.0\. That means I know 
  <div class="comp bojangle">       // we have the gadget, bojangle, widget, 
  <div class="comp widget">         // and gizmo components.
  <div class="comp gizmo">
</div>

<div class="docs basicEdition704">  // Now we have the basic edition suite, 
  <div class="comp gadget">         // version 7.0.4\. Knowing that, I know we 
  <div class="comp gizmo">          // only have the gadget, gizmo,and whatsit
  <div class="comp whatsit">        // components.
</div>

<div class="docs enterpriseEdition720">  // Now we have the enterprise edition
  <div class="comp gadget">              // suite, version 7.2.0\. Hey, looks 
  <div class="comp bojangle">            // pretty much the same as the basic 
  <div class="comp widget">              // edition of the same version...
  <div class="comp gizmo">
</div>

<div class="docs enterpriseEdition704">  // Ditto for enterprise suite v7.0.4.
  <div class="comp gadget">
  <div class="comp gizmo">
  <div class="comp whatsit">
</div>

/* more suites and versions */ 
```

或者如果最好在 JS 中处理版本控制，那也很好。

我写了这么多基本的 JS，但没有实现我的目标，而且我对 JS 的态度很差，以至于我不愿给你任何好的开始/jsFiddle。基本上，它应该使用 HTML 框架并根据变量和它所知道的套件版本来填补空白。

到目前为止，我一直在使用类似的东西

```
var gadgetName = " long name here ";
var bojangleName = " long name here ";
var gadgetLink720 = " version 720 link here";
var bojangleLink720 = " version 720 link here";
var gadgetTitle = " Gadget is a thingie that does...";
var bojangleTitle = " Bojangle is this thing that does...";

$(this).html("<div class=\"component\" title=\"" + myTitle + "\">\
    <p class=\"componentName\">" + myName +"</p>\
    <p class=\"componentType\">Setup Guide</p>\
    <p class=\"links\"><a href=\"\" class=\"html\">HTML</a> <a href=\"\" class=\"pdf\">PDF</a></p>\
  </div>");
}); 
```

但一直很不成功。**注意：**这不是我已经完成的最好的例子，我实际上（在某一时刻）让它阅读了父 div 类的内容，以了解要自动放入的版本等。

# TL;博士

*“WTF老兄？！这件事太大了！你丑又蠢。”*

我知道，我很抱歉。我不知道我是否可以使它更简洁。TL;DR 是：“哎呀，我有一个可以工作的页面，但我一遍又一遍地重复使用相同的内容。每次我们有新版本时，我都应该手动更新几十个链接，就像一个好的peon，而不是编写单一源解决方案的脚本。忽略我。

:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:16:31.393

[Mustache](http://mustache.github.com/)是最好的框架之一

你可以在[这里查看演示](http://mustache.github.com/#demo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:34:34.087

[车把](http://handlebarsjs.com)会为您做到这一点。基本思想是您可以使用如下模板将 JavaScript 变量替换到 HTML DOM 中：

```
<p>{{hello}}</p> 
```

它还允许基本的循环和逻辑。

你的问题的一个小提琴在这里：http: [//jsfiddle.net/Yk43x/](http://jsfiddle.net/Yk43x/)

For more complex templating, including bindings (so your templates update as your JavaScript model does), I'd recommend [Knockout](http://knockoutjs.com). [EmberJS](http://emberjs.com), which uses Handlebars, and [Google Angular](http://angularjs.org) also enable templating (and bindings), as well as a lot more.

# linux - 使用 wget 下载 YouTube 视频

> ID：14368823
> 
> 赞同：20
> 
> 时间：2013-01-16T22:11:29.590
> 
> 标签：linux, youtube, wget

我通常使用 keepvid.com 或 Firefox 下载助手插件来下载 YouTube 视频。是否可以使用 Linux 中可用的 wget 命令下载它们？

另外，我有一个 VPS 服务器。我想在我的 VPS 服务器 (cPanel) 上下载视频。

如果可能，如果可能，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-19T10:38:14.983

我会推荐[youtube-dl](http://rg3.github.io/youtube-dl/)作为 YouTube 和其他视频网站的控制台下载器。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-16T22:16:05.983

```
#!/usr/bin/perl

use strict;
use warnings;
## Two arguments
##    $1 YouTube URL from the browser
##    $2 Prefix to the file name of the video (optional)
#

## Collect the URL from the command line argument
my $url = $ARGV[0] or die "\nError: You need to specify a YouTube URL\n\n";

## Declare the user defined file name prefix
my $prefix = defined($ARGV[1]) ? $ARGV[1] : "";

## Download the HTML code from the YouTube page
my $html = `wget -Ncq -e "convert-links=off" --keep-session-cookies --save-cookies /dev/null --no-check-certificate "$url" -O-`  or die  "\nThere was a problem downloading the HTML file.\n\n";

## Collect the title of the page to use as the file name
my ($title) = $html =~ m/<title>(.+)<\/title>/si;
$title =~ s/[^\w\d]+/_/g;
$title =~ s/_youtube//ig;
$title =~ s/^_//ig;
$title = lc ($title);

## Collect the URL of the video
my ($download) = $html =~ /"url_encoded_fmt_stream_map"([\s\S]+?)\,/ig;

## Clean up the URL by translating Unicode and removing unwanted strings
$download =~ s/\:\ \"//;
$download =~ s/%3A/:/g;
$download =~ s/%2F/\//g;
$download =~ s/%3F/\?/g;
$download =~ s/%3D/\=/g;
$download =~ s/%252C/%2C/g;
$download =~ s/%26/\&/g;
$download =~ s/sig=/signature=/g;
$download =~ s/\\u0026/\&/g;
$download =~ s/(type=[^&]+)//g;
$download =~ s/(fallback_host=[^&]+)//g;
$download =~ s/(quality=[^&]+)//g;

## Collect the URL and signature since the HTML page randomizes the order
my ($signature) = $download =~ /(signature=[^&]+)/;
my ($youtubeurl) = $download =~ /(http.+)/;
$youtubeurl =~ s/&signature.+$//;

## Combine the URL and signature in order to use in Wget
$download = "$youtubeurl\&$signature";

## A bit more cleanup
$download =~ s/&+/&/g;
$download =~ s/&itag=\d+&signature=/&signature=/g;

## Print the file name of the video collected from the web page title for us to see on the CLI
print "\n Download: $prefix$title.webm\n\n";

## Download the file using Wget and background the Wget process
system("wget -Ncq -e \"convert-links=off\" --load-cookies /dev/null --tries=50 --timeout=45 --no-check-certificate \"$download\" -O $prefix$title.webm &");

#### EOF ##### 
```

这是我已经使用了一段时间的 Perl 脚本。我不确定它来自哪里......它工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-09T18:44:12.463

如果你在 Windows 上需要这个，[YouTuber](https://github.com/maythamfahmi/YouTuber/releases)是一个 Windows 控制台下载器。相同的链接也提供源代码。

> 免责声明：我制作了这个程序，它链接到我的 github。

# regex - 日期时间正则表达式不起作用

> ID：14368825
> 
> 赞同：1
> 
> 时间：2013-01-16T22:11:38.697
> 
> 标签：regex, date, time, escaping, expression

我很难阅读具有以下格式的日期和时间的字符串：

```
YYYYMMDDHHmmSS.FFFF[+|-]ZZzz 
```

*   `YYYY`是年，
*   `MM`是月份（从 01 到 12 开始），
*   `DD`是第 (01-31) 天，
*   `HH`是小时 (00-23)，
*   `mm`是分钟 (00-59)，
*   `SS`是第二个（00-59），
*   `FFFF`是秒 (0000-9999) 的分数，
*   `ZZzz`是“与协调世界时 (UTC) 的小时（ZZ – 值从 +14 到 –12）和分钟（zz – 值 00 到 59）的差异。”

这是在 HL7 中传输日期时间信息的标准，但不要担心。我遇到的问题是处理我为此标准编写的正则表达式的系统拒绝让我在第二个字段后面添加点。它也不允许 ZZ 字段之前的加号或减号。

这是我写的正则表达式：

```
/^(1|2)\\d{3}(0[1-9]|1[0-2])(0[1-9]|(1|2)[0-9]|3(0|1))((0|1)[0-9]|2[0-3])[0-5][0-9][0-5][0-9]\\.\\d{4}((\\+|\\-)0[0-9]|\\-1[0-2]|\\+1[0-4])[0-5][0-9]$/ 
```

它适用于 Limesurvey，适用于给定问题的验证字段。如果你不知道那是什么，只要知道它的正则表达式使用 Perl 约定即可。

请注意，如果我删除 \. 或 \+ \-，它工作得很好（除了正则表达式不再强制执行标准）。我也尝试过不转义反斜杠，但这也无济于事。

如果有人能指出为什么这不起作用，我将不胜感激。请注意，如果正则表达式中有任何看起来奇怪或多余的东西，那很可能是我在逻辑上将其分解为各个字段以便于阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:13:20.647

在 +14 到 -12 部分之前，我几乎没有改变你的正则表达式。我不太你可以在这里看到它：[http ://www.regex101.com/r/jF1bA9](http://www.regex101.com/r/jF1bA9)

**最终正则表达式：**

```
^(1|2)[0-9]{3}(0[1-9]|1[0-2])((0[1-9])|((1|2)[0-9])|3(0|1))((0|1)[0-9]|2[0-3])([0-5][0-9])([0-5][0-9])\.[0-9]{4}(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-2])[0-5][0-9]$ 
```

**正则表达式解释：**

行首： `^` //行首

年：

`(1|2)[0-9]{3}`

月：

`(0[1-9]|1[0-2])`

天：

`((0[1-9])|((1|2)[0-9])|3(0|1))`

小时：

`((0|1)[0-9]|2[0-3])`

分钟：

`([0-5][0-9])`

秒：

`([0-5][0-9])`

时期：

`\.`

第二部分：

`[0-9]{4}`

***匹配 +14 到 -12***（您可能需要更改的内容）

`(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-2])`

> 匹配： +14 +13 +12 +11 +10 +09 +08 +07 +06 +05 +04 +03 +02 +01 +00 -00 -01 -02 -03 -04 -05 -06 -07 -08 -09 -10 -11 -12

00 - 59:

`[0-5][0-9]`

行结束：

`$`

* * *

您可能需要更改它以使用您的特定语言（我看到您在某些区域有双反斜杠，例如`\\d`）

# sql - ORA-00907 问题：缺少右括号

> ID：14368833
> 
> 赞同：-4
> 
> 时间：2013-01-16T22:12:12.297
> 
> 标签：sql, oracle

你能帮我么？我有同样的问题，我无法解决

```
create table minimarketi (id number(6) constraint min_id_pk primary key
  , ime varchar2(40) not null
  , adresa varchar2(100)
  , grad varchar2(30)
  );

create table zahtjevi (id_minimarketa number(6)
  , rbr_zahtjeva number(6)
  , datum_izdavanja date
  , constraint zaht_pk primary key(id_minimarketa, rbr_zahtjeva)
  , constraint zaht_min_fk foreign key(id_minimarketa) references minimarketi(id)
  );

create table artikli (sifra number(6)
  , constraint art_sifra_pk primary key(sifra)
  , naziv varchar2(100) not null
  );

create table stavke_zahtjeva (id_minimarketa number(6)
  , rbr_zahtjeva number(6)
  , sifra_artikla number(6)
  , kolicina number(6) not null
  , constraint stavke_zahtjeva_pkl
       primary key(id_minimarketa, rbr_zahtjeva, sifra_artikla)
  , constraint stav_zaht_idrbr_fk
     foreign key(id_minimarketa, rbr_zahtjeva)
     references zahtjevi(id_minimarketa, rbr_zahtjeva)
  , constraint stav_art_fk 
     foreign key(sifra_artikla)
     references artikli(sifra)
  );

create table isporuke (rbr_isporuke number(6)
  , id_minimarketa number(6)
  , rbr_zahtjeva number(6)
  , datum izdavanja date
  , constraint isporuke_pk
      primary key(rbr_isporuke, id_minimarketa, rbr_zahtjeva)
  , constraint ispo_zaht_fk
       foreign key(id_minimarketa, rbr_zahtjeva)
       references zahtjevi(id_minimarketa, rbr_zahtjeva)
  ); 
```

这张桌子`isporuke`我有907问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:17:52.213

问题在于 table `isporuke`。您正在创建一个列的表中的空间。

你有：

```
 datum izdavanja date, 
```

但你应该有：

```
 datum_izdavanja date, 
```

所以你的脚本将是：

```
create table isporuke 
(
  rbr_isporuke number(6), 
  id_minimarketa number(6), 
  rbr_zahtjeva number(6), 
  datum_izdavanja date, 
  constraint isporuke_pk primary key(rbr_isporuke, id_minimarketa, rbr_zahtjeva),
  constraint ispo_zaht_fk foreign key(id_minimarketa, rbr_zahtjeva) 
    references zahtjevi(id_minimarketa, rbr_zahtjeva)
); 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/9032b)

我通过将每个表单独添加到脚本中以确保它可以编译来发现这一点。通过单独运行每一个，您可以消除正在运行的代码并缩小错误范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:17:38.580

以下是如何调试这些问题。

首先，一次尝试每个语句。与其尝试所有五个 CREATE TABLE 语句，不如尝试第一个，看看它是否通过。然后尝试下一个。你把它缩小到某个陈述。

现在您知道哪个语句缺少括号。查看左括号，并查看对应的右括号在哪里。它和你想象的相符吗？继续遍历所有开头的括号并找到其匹配的括号。最终你会发现没有匹配的结束括号的开始括号。

此外，清理您的代码，使其不会全部在一行中。调试这个要困难得多：

```
create table minimarketi (id number(6) constraint min_id_pk primary key, ime varchar2(40) not null, adresa varchar2(100), grad varchar2(30)); 
```

但是当它像这样格式化时，更容易看到：

```
create table minimarketi (
    id number(6) constraint min_id_pk primary key,
    ime varchar2(40) not null,
    adresa varchar2(100),
    grad varchar2(30)
); 
```

# c - 为什么要使用本地指针来遍历列表？

> ID：14368835
> 
> 赞同：1
> 
> 时间：2013-01-16T22:12:20.587
> 
> 标签：c, pointers, linked-list

假设我有以下结构来定义列表节点：

```
 struct node {
         int            data;
         struct node*   next;
}; 
```

我有这个函数来获取列表的长度：

```
int Length(struct node* head) {
   struct node* current = head;
   int count = 0;
   while (current != NULL) {
      count++;
      current = current->next;
   }
   return count;
} 
```

我为什么要这样做：`struct node* current = head;`而不是仅仅在头上迭代？

那么，为什么这不行：

```
int Length(struct node* head) {
   int count = 0;
   while (head != NULL) {
      count++;
      head = head->next;
   }
   return count;
} 
```

head 进入 Length 函数后是否会失去作用域，因此即使我们执行 head = head->next 它也不会在函数之外受到影响？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:13:27.027

您的两个代码片段是等效的。

然而，有一种观点认为你永远不应该修改函数参数，以避免潜在的编程错误，并提高可读性（你并没有真正修改头部）。为此，您经常会看到人们定义尽可能多的参数`const`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:14:10.937

无论如何，智能编译器都会这样做。有些人这样做是为了清楚起见，因为 head 对他们来说意味着列表的头部，而 current 只是迭代器，它只是为了可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:41:14.760

我认识的程序员都直观地假设按值传递的参数的值（例如指针引用的地址）在整个函数中保持不变。由于这个假设，在扩展功能时很容易引入小错误。想象一下，我想向您的`Length`函数打印一些调试信息：

```
int Length(struct node* head) {
   int count = 0;
   while (head != NULL) {
      count++;
      head = head->next;
   }
   printf( "Length of list at %p is %d\n", head, count );
   return count;
} 
```

函数越大（或者逻辑越做作，或者做修改的人付出的注意力越少……），这种问题就越容易发生。

对于简短的函数，例如`Length`，我个人认为它很好（我也这样做）。

# vb.net - 按下输入时防止派生表单上的 AcceptButton 事件

> ID：14368836
> 
> 赞同：0
> 
> 时间：2013-01-16T22:12:20.993
> 
> 标签：vb.net, winforms, event-handling

我在一个系统上工作，其中大多数数据收集表单都是从基本表单派生的。每个表单都有一个 AcceptButton 集，因此当按下 Enter 键时，它会引发 AcceptButton 的事件。我希望能够向用户显示警告，询问他们是否确定在按 Enter 后要保存。如果他们选择“是”，则将引发 AcceptButton 事件，如果他们选择“否”，则不会发生任何事情。这可以从基类中做到吗？如果按下回车，我已经尝试在 ProcessCmdKey 方法的基类中将 AcceptButton 设置为空，但我不知道如何再次重置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:44:16.810

我认为您在覆盖该`ProcessCmdKey`方法方面走在正确的轨道上，但是为什么将 AcceptButton 设置为空呢？像这样的实现就足够了

```
Protected Overrides Function ProcessCmdKey(ByRef msg As System.Windows.Forms.Message, keyData As System.Windows.Forms.Keys) As Boolean

    If (keyData = Keys.Enter) Then
      If (MessageBox.Show("Do you want to save?", "", MessageBoxButtons.YesNo) = Windows.Forms.DialogResult.No) Then
        Return True 'Eat the key press.
      End If
    End If

    Return MyBase.ProcessCmdKey(msg, keyData)

End Function 
```

这将在按下 enter 时提示用户，如果他们以 No 响应，则`True`返回，表示该键已被处理，不会进行进一步处理。这将防止`Button.Click`事件引发。

# google-maps - 多个鼠标事件未触发

> ID：14368840
> 
> 赞同：1
> 
> 时间：2013-01-16T22:12:51.033
> 
> 标签：google-maps, events, mouse

我正在使用谷歌地图 API。我想准备一次触发两个鼠标事件。下面是一个代码片段。

```
function initialize() {
var myLatlng = new google.maps.LatLng(37.4419, -122.1419);
var myOptions = {
  zoom: 13,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var polyOptions = {
        strokeColor: '#000000',
        strokeOpacity: 1.0,
        strokeWeight: 3  }
    poly = new google.maps.Polyline(polyOptions);
    poly.setMap(map);
    // Add a listener for the click event
    google.maps.event.addListener(map, 'click', addLatLng);
}

function addLatLng(event) {
var path = poly.getPath();

if(!draw)
{
    path.push(event.latLng);
    path.push(event.latLng);
    draw = true;
// Add a new marker at the new plotted point on the polyline.

    var marker = new google.maps.Marker({
            position: event.latLng,
            title: '#' + path.getLength(),
            map: map  });
    google.maps.event.addListener(map, 'mousemove', moveTrackLine);
}
else
{
        path.push(event.latLng);
        var marker = new google.maps.Marker({
                                                    position: event.latLng,
                                                    title: '#' + path.getLength(),
                                                    map: map  });
        draw = false;
}
}

function moveTrackLine(event) {

var path = poly.getPath();
// replace the old point with a new one to update the track
path.pop();
path.push(event.latLng);
} 
```

当我第一次点击地图时，我看到地图上放置了一个标记。然后当鼠标移动时，我看到折线更新并正确跟随我的光标。接下来，如果我单击地图，我看不到地图上放置的标记，也不会进入 addLatLng 函数。提前感谢您的帮助和时间。-蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:32:29.260

将折线的`clickable`-option 设置为 false。

问题：一旦将鼠标移动事件应用于地图，您将无法再单击地图，因为鼠标光标下方始终是折线。

当您将折线的可点击选项设置为 false 时，折线不会响应鼠标事件并且点击事件将被传递给地图。

# javascript - jQuery 和 textarea 更改事件

> ID：14368844
> 
> 赞同：1
> 
> 时间：2013-01-16T22:13:09.993
> 
> 标签：javascript, jquery

我刚刚遇到了一个奇怪的行为 jQuery，无法找出任何或多或少的轻微解决方案。说，我有文本区域和按钮。如果 textarea 为空，我想禁用按钮。为此，我有一个处理程序来完成这项工作。

这是代码：

```
// textarea control
var $textarea = $('#myTextarea');
var $button = $('#myButton');
$textarea.on('input propertychange', function() {
    if($textarea.val().length > 0) {
        $button.removeClass('disabled').removeAttr('disabled');
    } else {
        $button.addClass('disabled').attr('disabled', 'disabled');
    }
});
$button.on('click', function() {
    if ($button.attr("disabled") != null) {
        console.log('Disabled!');
        return false;
    } else {
        // do some stuff and eventually erase textarea 
        $textarea.val('');
    }
}); 
```

我的麻烦是当我擦除 textarea （代码的结尾）时，它不会禁用按钮。任何想法都将不胜感激（实际上它是对我的代码的轻微改编，但情况反映得很好，希望你能清楚，谢谢！）

**UPD** 在 stackoverflow 上找不到任何东西没有帮助。

**UPD2** 正如我在开始时所说的那样，我不是在寻找像强制触发事件这样的解决方法，我认为可以捕获由`$textarea.val();`Sure @Madbreaks 和 @epascarello 的解决方案触发的任何事件，谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:14:38.057

问题是使用 JavaScript 设置值通常不会触发事件，但您可以自己进行。

```
$textarea.val('').trigger("input"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T22:14:58.257

也许只是添加这个：

```
else {
    // do some stuff and eventually erase textarea 
    $textarea.val('');
    // notify
    $textarea.trigger('propertychange');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:17:49.570

确保修剪 textarea 的值，并且在获得 .val() 的长度时没有空格。此外，如果您使用像 ckEditor 这样的文本编辑器，请确保您阅读了他们关于如何检索正在编写的文本的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-15T23:25:30.850

推荐使用这个 jQueryTextChange 库。它是一个跨浏览器一致的。主页上清楚地阐述了用法。[http://zurb.com/playground/jquery-text-change-custom-event](http://zurb.com/playground/jquery-text-change-custom-event)

# html - 更改文件扩展名会影响 SE 排名吗？

> ID：14368847
> 
> 赞同：3
> 
> 时间：2013-01-16T22:13:18.430
> 
> 标签：html, asp-classic, seo, search-engine, google-ranking

我正在更新一个站点并将页面从 .html 更改为 .asp 页面将具有与旧 html 页面完全相同的名称，唯一的区别是文件扩展名。这会影响现有的 SE 排名吗？有解决办法吗？我在 Microsoft 服务器上，这里没有 Apache。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:15:35.170

1.  是的，因为新的扩展使 URL 成为新的 URL。您当前页面的所有链接和排名都将丢失。

2.  不，因为您可以执行从旧 URL 到 URL 的 301 重定向，该 URL 将告诉搜索引擎您的页面已移动以及已移动到何处。所有链接和排名将（最终）恢复到新页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:15:47.827

是的，它会。您需要在原始页面上使用 301 重定向并指向新页面才能结转任何 SEO 值。

见： http: [//www.hochmanconsultants.com/articles/301-versus-302.shtml](http://www.hochmanconsultants.com/articles/301-versus-302.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:26:35.200

另一种选择是在有人请求 .html 时自动提供 .asp 页面。

在 IIS 中，这可以使用 URL 重写来完成，请参阅下面的快速指南。 [http://msdn.microsoft.com/en-us/library/ms972974.aspx](http://msdn.microsoft.com/en-us/library/ms972974.aspx) 这样你就不需要担心谷歌等，因为它可以继续请求 html 并且无论如何都会得到正确的页面（没有重定向）。对于更经典的 asp 解决方案（上面的链接有点 .net 特定），您可以使用许多 ISAPI 重写模块，例如：[isapi_rewrite](http://www.isapirewrite.com/)，它可以让您执行以下操作：

```
<rule name="RewriteHTMLtoASP" stopProcessing="true">
  <match url="(.*).html(.*)" />
  <conditions logicalGrouping="MatchAll" />
  <action type="Rewrite" url="{R:1}.asp{R:2}" />
</rule> 
```

我敢肯定那里也有免费的解决方案，我只是不知道有什么。

类似的问题：[URL Redirection from a html page to an .aspx page](https://stackoverflow.com/questions/13068519/url-redirection-from-a-html-page-to-an-aspx-page)

# assembly - 在与处理器交谈时，有什么比汇编“更低”的吗？

> ID：14368851
> 
> 赞同：0
> 
> 时间：2013-01-16T22:13:28.960
> 
> 标签：assembly

我经常听到人们说你可以“理论上向 CPU 编写直接指令”，但是还有什么比汇编更“直接”的东西是人类可以编写的，然后可以在没有任何从语义到机器指令的“汇编”的情况下执行?

我知道你不能写电压，但请耐心等待......是否存在这样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T22:15:11.130

汇编是 CPU 的操作码（操作码）之上的抽象。

[http://en.wikipedia.org/wiki/Opcode](http://en.wikipedia.org/wiki/Opcode)

x86 操作码列表：

[http://ref.x86asm.net/coder32.html](http://ref.x86asm.net/coder32.html)

实际上，您可以在操作码级别进行编程（我在大学时就这样做了）。要在 DOS 上执行此操作，您将使用十六进制编辑器并在文件中键入由 COM 或 EXE 格式指定的标头，然后开始编写表示操作码的二进制指令，以及操作的数据的二进制表示代码可能会起作用。

[http://en.wikipedia.org/wiki/COM_file](http://en.wikipedia.org/wiki/COM_file)

[http://en.wikipedia.org/wiki/EXE_file](http://en.wikipedia.org/wiki/EXE_file)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T22:15:36.427

是的，您可以将机器代码本身插入内存（取决于您的环境的“保护”程度）。除了将源代码映射到机器指令的复杂性之外，编译和汇编代码之间几乎没有区别。

一些处理器实际上具有更低的级别，例如微码，但它们很少用于一般用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:55:14.370

正如其他人所说，机器语言。一些 CPU 级别的命令没有在汇编语言中公开，这并非闻所未闻 - 没有助记符。`LOADALL`首先想到的是英特尔的臭名昭著——它存在于 CPU 中，但汇编器不会识别它。

`db`要使用它，可以使用汇编命令将相关字节直接插入代码中。

如果问题是——如何在没有汇编程序的情况下编写机器语言，答案是——使用十六进制编辑器。

编辑：有时，程序集本身比人们想要的更高级别。MIPS 汇编器以具有内置宏而闻名 - 助记符可以扩展到一个或多个命令，具体取决于操作数和命令行选项的具体情况。Thumb-2 模式下的 ARM 也是如此。这与故意阻碍底层指令集（RISC）有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T17:28:57.043

很久以前，当我提出一块带有 CPU 芯片的新电路板时，我必须首先将十六进制值编程到 ROM 芯片中才能开始运行。

每个 CPU 芯片在通电时都有一些约定。通常它从内存中的固定位置加载某些内容，并将其用作加载第一条指令的内存地址，或者将其用作要执行的第一条指令。

回到新的董事会。对 ROM 芯片进行编程后，将芯片插入电路板并通电。弄清楚它是否做对了是一件痛苦的事。也许新硬件正在工作。也许不是。我用示波器观察 CPU 上的数据和地址线，看它是否是可识别的模式。由于处理器在一种情况下是如此简单，这就足够了。

一旦你知道它真的出现了，你就开始使用交叉汇编器（甚至交叉编译器）编写低级代码来运行它。它生成十六进制字节，然后以处理器需要执行的模式将这些字节烧录到另一个 ROM 中。很快你就可以让它工作了。（或者可能不会那么快。）

我只做了两次我记得的。在一种情况下，小板只需要监听来自硬件端口的字节，并通过将其他字节发送到另一个端口来响应它们。这就是与外界的全部联系。（它实际上类似于今天的 Web 服务。字节进来，字节出去。）

这是具有挑战性和令人沮丧的，但非常充实。我很高兴我做到了。我不想再这样做了。

# c# - 在单个 ftp 请求中创建带有子目录的目录？

> ID：14368852
> 
> 赞同：4
> 
> 时间：2013-01-16T22:13:32.497
> 
> 标签：c#, .net, ftp, ftpwebrequest

关于如何在单个 ftp 请求中创建带有子目录的目录，我遇到了一个小问题

我有一个字符串 s

```
 string s = "a/b/c/d" 
```

**注意：斜线之间的单词是随机的，项目的数量是未知的。**

如何在 FTP 服务器中创建目录 a/b/c/d ????

我用来实现这一点的方法是拆分字符串并使用以下代码为每个部分创建一个文件夹：

```
 var ftpWebRequest = (FtpWebRequest)WebRequest.Create("ftp://domain.com/public_html/a");
    ftpWebRequest.Credentials = new NetworkCredential(ftpUsername, ftpPassword);
    ftpWebRequest.Method = WebRequestMethods.Ftp.MakeDirectory;
    ftpWebRequest.GetResponse(); 
```

然后我在a中创建b目录，然后在b中创建c，然后通过重复一些代码在c中创建d，每次

我试图直接输入网址。喜欢 ：

```
 var ftpWebRequest = (FtpWebRequest)WebRequest.Create("ftp://doemin.com/public_html/a/b/c/d); 
```

但它不起作用。

关于如何在一个请求中创建一个包含其他子目录的文件夹有没有捷径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:41:19.563

如果您愿意使用像这样的更友好的库（免费和开源）：

[System.Net.FtpClient.dll](http://netftp.codeplex.com)

然后你可以写这样的代码（改编自他们的例子）

```
static ManualResetEvent m_reset = new ManualResetEvent(false);
void Main()
{
    m_reset.Reset();
    using (FtpClient ftp = new FtpClient())
    {
        ftp.Host = "yourFTPHost.com";
        ftp.Credentials = new NetworkCredential("yourUserName", "yourPassword");
        ftp.SetWorkingDirectory("/rootForTest");
        if(ftp.DirectoryExists("test"))
            ftp.DeleteDirectory("test", true);
        ftp.BeginCreateDirectory("test/path/that/should/be/created", true,
                    new AsyncCallback(CreateDirectoryCallback), ftp);
        m_reset.WaitOne();
        ftp.Disconnect();
    }
}
static void CreateDirectoryCallback(IAsyncResult ar) 
{
    FtpClient ftp = ar.AsyncState as FtpClient;
    try 
    {
        if (ftp == null)
             throw new InvalidOperationException("The FtpControlConnection object is null!");
        ftp.EndCreateDirectory(ar);
    }
    catch (Exception ex) 
    {
        Console.WriteLine(ex.ToString());
    }
    finally 
    {
        m_reset.Set();
    }
} 
```

附注：System.Net.FtpClient 需要完整的 NET 4.0 框架。（客户资料还不够）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:17:32.420

有些服务器确实支持 FTP 命令，例如 MKD a/b/c/d 。如果您的服务器不支持，但支持通过 SITE 命令执行 shell 命令，您可以尝试调用“SITE md a/b/c/d”（但这是特定于机器的）。如果上述方法都不起作用，那么您必须像您一样在循环中创建文件夹，或者使用某个库以一种方法隐藏此循环。

# compilation - 为什么我无法在 Ubuntu 12.04 中编译 Drwright

> ID：14368854
> 
> 赞同：3
> 
> 时间：2013-01-16T22:13:46.823
> 
> 标签：compilation, package, ubuntu-12.04, configure

Drwright 不包含在主要的 Ubuntu 发行版中，但可以通过 PPA 获得。这种方式安装步骤：

```
 sudo add-apt-repository ppa:drwright/stable 
   sudo apt-get update
   sudo apt-get install drwright 
```

安装成功完成。

但我想更正这个程序的源代码。我使用 apt-get source drwright 来下载它。首先，我尝试编译源代码而不做任何更改：

```
 ./configure 
```

但是配置不执行：

```
configure: error: Package requirements (
  glib-2.0 >= 2.31.13
  gio-2.0 >= 2.31.13
  gdk-pixbuf-2.0 >= 2.25.3
  gtk+-3.0 >= 3.0.0
  libcanberra-gtk3 >= 0
  libnotify >= 0.7
  x11) were not met:

No package 'glib-2.0' found
No package 'gio-2.0' found
No package 'gdk-pixbuf-2.0' found
No package 'gtk+-3.0' found
No package 'libcanberra-gtk3' found
No package 'libnotify' found
No package 'x11' found 
```

为什么 Drwring 从 PPA 安装并成功运行，但我无法从源代码编译它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T04:58:27.867

### 头文件

要从源代码构建程序，您不仅需要它使用的库的编译二进制文件。你还需要他们的[头文件](http://en.wikipedia.org/wiki/Header_file)。

在 Debian、Ubuntu 和其他基于 Debian 的操作系统中，头文件由名称以`-dev`. 通常它是`-dev`附加的二进制包名称，或者是删除并`-dev`附加了一些版本号的二进制包名称。

*`-dev`包（用于编译）不应与[`-dbg`包](https://stackoverflow.com/a/14421056/1038860)（用于调试）混淆。以下是[有关如何以及为何](https://askubuntu.com/questions/182703/how-and-why-to-create-dbg-dev-doc-packages)制作这些软件包的一些信息。*

### pkg-config 软件包与您的软件包管理器的软件包

当您从源代码构建并`./configure`告诉您缺少包时，通常它不会检查包管理器以查看已安装的内容，并且缺少包的名称通常不是您需要与包一起安装的包的确切名称经理。（[pkg-config](https://stackoverflow.com/tags/pkg-config/info)是`./configure`脚本计算依赖项的常用方法——请参阅[本文](http://en.wikipedia.org/wiki/Pkg-config)、[手册页](http://manpages.ubuntu.com/manpages/precise/en/man1/pkg-config.1.html)和[项目页面](http://www.freedesktop.org/wiki/Software/pkg-config)了解更多信息。）

### 使用包管理器确定要安装的包

要找出您*确实*需要安装哪些软件包，您可以查看以相同开头的软件包......或者`lib`以`./configure`. 以 开头的包`lib`更常见（在 Debian 和基于 Debian 的系统上），因为大多数库包都是这样命名的。

您可以[在线搜索软件包](http://packages.ubuntu.com/)（其他发行版通常也提供此功能，[这里是 Debian 的](http://www.debian.org/distrib/packages)）。或者您可以使用[bash 补全](http://en.wikipedia.org/wiki/Command-line_completion)来找到它们。由于这使用了系统上本地存储的有关哪些软件包在哪些版本中可用的信息，因此您应该首先更新该信息：

```
sudo apt-get update 
```

然后输入一个命令来安装一个包，只是名称的开头——不管你认为你知道多少。例如，对于`glib-2.0`：

```
ek@Del:~$ apt-get install libglib2
libglib2.0-0                libglib2.0-cil-dev
libglib2.0-0-dbg            libglib2.0-data
libglib2.0-0-dbgsym         libglib2.0-dev
libglib2.0-0-refdbg         libglib2.0-dev-dbgsym
libglib2.0-0-refdbg-dbgsym  libglib2.0-doc
libglib2.0-bin              libglib2-ruby
libglib2.0-bin-dbgsym       libglib2-ruby1.8
libglib2.0-cil              libglib2-ruby1.8-dbg
libglib2.0-cil-dbgsym 
```

在那里，我没有*运行*我输入的命令。（如果我有，它就不会成功，既因为没有调用包`libglib2`，也因为`apt-get install`除非以 root 身份运行，否则不会成功。）

相反，我`Tab`在行尾按了几次，我得到了一份建议清单。

从这些建议中，正确的是`libglib2.0-dev`。

### 如果你仍然不确定

有时你不一定知道哪一个是对的；然后你可以用它`apt-cache show ...`来找出答案。例如，假设我想知道是否*还*需要`libglib2.0-cil-dev`：

```
ek@Del:~$ apt-cache show libglib2.0-cil-dev 
Package: libglib2.0-cil-dev
Priority: optional
Section: libs
Installed-Size: 174
Maintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>
Original-Maintainer: Debian CLI Libraries Team <pkg-cli-libs-team@lists.alioth.debian.org>
Architecture: i386
Source: gtk-sharp2
Version: 2.12.10-2ubuntu4
Replaces: libglib2.0-cil (<< 2.12.9-2)
Depends: libglib2.0-cil (= 2.12.10-2ubuntu4)
Filename: pool/main/g/gtk-sharp2/libglib2.0-cil-dev_2.12.10-2ubuntu4_i386.deb
Size: 2408
MD5sum: 50fa0825eb4d73593bdc8419c5fc9737
SHA1: f9659e85410505f7463a7117ebb92c70af6ad3aa
SHA256: 8f9d39465f2a1d5b4cc7832660ea53bacc681811ab2c80b57cad1655d4055b01
Description-en: CLI binding for the GLib utility library 2.12
 This package provides the glib-sharp assembly that allows CLI (.NET) programs
 to use the GLib utility library 2.12\. This is mostly useful for the GTK+ and
 GNOME bindings.
 .
 GTK# 2.10 is a CLI (.NET) language binding for the GTK+ 2.10 toolkit
 .
 This package contains development files for the glib-sharp library, and should
 be used for compilation
Homepage: http://www.mono-project.com/GtkSharp
Description-md5: e7432bd7eb91c1c711c14150f81a3556
Bugs: https://bugs.launchpad.net/ubuntu/+filebug
Origin: Ubuntu
Supported: 18m 
```

如果需要，您可以对不完整的包名称使用命令行完成作为参数`apt-cache show`而不是`apt-get install`. 任何采用软件包名称的命令（无论软件包是否安装都采用它）都适用于此目的。

### 您需要的特定软件包

鉴于出现的消息，`-dev`您需要的软件包*可能是*：

*   [libglib2.0-dev 安装 libglib2.0-dev http://hostmar.co/software-small](https://apps.ubuntu.com/cat/applications/libglib2.0-dev)

    *   （提供“glib-2.0”和“gio-2.0”标头，参见[清单](http://packages.ubuntu.com/precise/i386/libglib2.0-dev/filelist)）

*   [libgdk-pixbuf2.0-dev 安装 libgdk-pixbuf2.0-dev http://hostmar.co/software-small](https://apps.ubuntu.com/cat/applications/libgdk-pixbuf2.0-dev)（提供“gdk-pixbuf-2.0”标头）

*   [libgtk-3-dev 安装 libgtk-3-dev http://hostmar.co/software-small](https://apps.ubuntu.com/cat/applications/libgtk-3-dev)（提供“gtk+-3.0”头文件）

*   [libcanberra-gtk3-dev 安装 libcanberra-gtk3-dev http://hostmar.co/software-small](https://apps.ubuntu.com/cat/applications/libcanberra-gtk3-dev)（提供“libcanberra-gtk3”标头）

*   [libnotify-dev 安装 libnotify-dev http://hostmar.co/software-small](https://apps.ubuntu.com/cat/applications/libnotify-dev)（提供“libnotify”标头）

*   [libx11-dev 安装 libx11-dev http://hostmar.co/software-small](https://apps.ubuntu.com/cat/applications/libx11-dev)（提供“x11”标头）

你可以在软件中心安装这些，但我推荐使用命令行，因为它更容易安装多个包：

```
sudo apt-get update && sudo apt-get install libglib2.0-dev libgdk-pixbuf2.0-dev libgtk-3-dev libcanberra-gtk3-dev libnotify-dev libx11-dev 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T22:23:00.420

以 root 身份在 shell 中尝试命令

$apt-get install glib-2.0 gio-2.0 gdk-pixbuf-2.0 gtk+-3.0 libcanberra-gtk3 libnotify x11 -f -y

# solr - 希伯来语全文搜索引擎

> ID：14368857
> 
> 赞同：3
> 
> 时间：2013-01-16T22:13:52.567
> 
> 标签：solr, full-text-search, elasticsearch

我想尝试使用 Elasticsearch 作为希伯来语网站的全文搜索引擎。我想知道这个 Elasticsearch 是否可以为希伯来语产生好的结果，以及以色列是否有任何大型网站使用它作为搜索引擎。

如果不是 ElasticSearch - 也许是 Apache Solr？顺便说一句 - 我正在使用 Ruby，但也可以使用 Java。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:38:33.947

查看 Elasticsearch 的[ICU 插件](https://www.elastic.co/guide/en/elasticsearch/plugins/6.2/analysis-icu.html)。

大卫。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T22:46:39.200

Solr 似乎支持希伯来语，请参阅下面的语言分析器链接：

*   [希伯来语中的 Solr 语言分析](http://wiki.apache.org/solr/LanguageAnalysis#Hebrew)
*   [http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ICUTokenizerFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.ICUTokenizerFactory)

虽然我不确定 ElasticSearch 的选项是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T21:14:09.750

看看 hebmorph - [http://www.code972.com/blog/hebmorph/](http://www.code972.com/blog/hebmorph/) 这是一个 lucene 插件，我们一直在[http://alpha.gov.il](http://alpha.gov.il)和[http://www.guidestar.org使用它.il/](http://www.guidestar.org.il/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-04T20:05:28.373

看看[阿尔戈利亚](https://www.algolia.com/)

> 根据设计，Algolia 引擎与语言无关。开箱即用，它支持所有语言/字母，包括基于符号的语言，如中文、日文和韩文。
> 
> 此外，Algolia 在同一网站/应用程序上处理多种语言，这意味着一些用户可以在后台使用同一个 Algolia 帐户以法语搜索，而另一些用户可以用英语搜索。
> 
> 本指南的目的是解释如何组织索引以启用多语言搜索。

取自[这里](https://www.algolia.com/doc/tutorials/full-text-search/multi-language-search/multilingual-search/#before-starting)

# documentation - 如何在技术写作中使函数名称复数？

> ID：14368859
> 
> 赞同：0
> 
> 时间：2013-01-16T22:14:05.563
> 
> 标签：documentation, styles, comments

如何复数功能的名称，例如`foobar`在技术写作中？

我所说的技术写作是指，例如，源代码中的注释文本、软件或编程元素的文档可能与相应的源代码位于不同的位置。

我应该使用

```
foobars
foobar`s
foobar's
foobar 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:17:48.103

我建议不要以任何方式更改函数/方法名称，因为这会引起混淆，但可以像这样引用它：

```
Use the fooBar functions to blah, blah, blah... 
```

或者

```
Use the fooBar methods to blah, blah, blah... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:26:56.080

像任何其他复数一样在末尾添加“s”，但通过格式区分。

写一些类似“所有的`substr`s都是......”的东西。我还将通过使用括号将函数名区分为函数名，如“所有 substr() 都是 ...”。

# qt - 如何删除 QLabel 和 QLineEdit 之间的空格

> ID：14368863
> 
> 赞同：0
> 
> 时间：2013-01-16T22:14:25.903
> 
> 标签：qt

我想减少标签和 QLineEdit 之间的空间（QLabel 在 QLineEdit 之上）。我怎样才能实现它？在我创建项目的代码中，我稍后将其放入一些布局中。

```
QLabel* lgamma = new QLabel("Gamma");
gamma = new QLineEdit();
QLabel* lmin_linie = new QLabel(QString::fromUtf8("Min. il. zmian linii"));
min_lin = new QLineEdit();
// ...
QLabel* lmax_kursy = new QLabel(QString::fromUtf8("Max zm. il. kursów"));
max_kursy = new QLineEdit();
QGridLayout *lay = new QGridLayout(this);
QVBoxLayout *box1 = new QVBoxLayout();
QVBoxLayout *box2 = new QVBoxLayout();
// ...
QVBoxLayout *box12 = new QVBoxLayout();
box1->addWidget(lmin_linie);
box1->addWidget(min_lin);
box2->addWidget(lmax_lin);
box2->addWidget(max_lin);
// ...
box12->addWidget(literacje);
box12->addWidget(iteracje);
verticalColumn1->addLayout(box1);
verticalColumn1->addLayout(box2);
// ...
verticalColumn3->addLayout(box12);

start = new QPushButton("Start", this);
QHBoxLayout *corn = new QHBoxLayout();
corn->addLayout(verticalColumn1);
corn->addLayout(verticalColumn2);
corn->addLayout(verticalColumn3);
QVBoxLayout *rup = new QVBoxLayout();
rup->addLayout(corn);
rup->addWidget(start); 
```

![在此处输入图像描述](../Images/4933553a816123d021a8cd4407b89fd4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:26:02.467

您可以简单地在布局中添加一个垫片。

```
QSpacerItem *spacer = new QSpacerItem(1, 50, QSizePolicy::Ignored, QSizePolicy::Expanding);
box1.addItem(spacer); 
```

根据您的需要调整 args 或[QSpacerItem](http://doc.qt.digia.com/qt/qspaceritem.html)，例如`QSizePolicy::Preferred`可能比 更好`QSizePolicy::Expanding`，并减少首选高度（第二个参数）。你为什么不使用简单的方法来使用 Qt 设计器来做那个 GUI？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:22:53.680

您可以尝试设置 QLabel 和 QLineEdit 边框：

```
lmax_kursy->setStyleSheet("border-width:0px");
max_kursy->setStyleSheet("border-width:0px"); 
```

或在布局中设置间距。首先检查什么是间距的当前值：

```
box1->spacing(); 
```

如果为 0，请尝试设置负值，如 -2：

```
box1->setSpacing(-2);       // or 0 or something else 
```

# iphone - 使用 ARC 重新初始化/重新分配对象

> ID：14368865
> 
> 赞同：2
> 
> 时间：2013-01-16T22:14:29.760
> 
> 标签：iphone, ios, memory-management, automatic-ref-counting

我想知道调用`[[MyClass alloc] init]`已经存在的（分配的）对象是否会在 ARC 中创建泄漏？还是它为您管理发布和重新分配？

做以下事情会更合适：

```
myObject = nil;
myObject = [[MyClass alloc] init]; 
```

哪个更合适？还有另一种方法可以正确地做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:17:34.090

使用 ARC，您无需在重新分配之前将 myObject 设置为 nil，只需这行代码即可：

```
myObject = [[MyClass alloc] init]; 
```

xcode在编译代码时，会自动在里面添加正确的发布机制。

# android - 许可拒绝：开放提供者

> ID：14368867
> 
> 赞同：22
> 
> 时间：2013-01-16T22:14:37.603
> 
> 标签：android

我已经创建了一个自定义内容提供程序，它将被更多的应用程序访问。我在提供程序 AndroidManifest.xml 文件中包含了权限标签，在第二个应用程序中，我包含了使用权限标签，但没有成功。Logcat 向我展示：

```
java.lang.SecurityException: Permission Denial: opening provider com.company.contentprovider.AplicacaoContentProvider requires READ_DATABASE or WRITE_DATABASE. 
```

我搜索过类似的问题，但似乎一切都是正确的。有任何想法吗 ？谢谢 ！！！

这是我的提供者 AndroidManifest.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.company.contentprovider"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<permission android:name="READ_DATABASE" android:label="@string/app_read"       android:protectionLevel="normal"></permission>
<permission android:name="WRITE_DATABASE" android:label="@string/app_write" android:protectionLevel="normal"></permission>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".CompanyProvider"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <provider android:name="AplicacaoContentProvider"
        android:authorities="com.company.contentprovider"
        android:exported="true"
        android:readPermission="@string/app_read"
        android:writePermission="@string/app_write"
       />
</application> 
```

这是我的第二个应用程序 AndroidManifest.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.testeprovider"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />
<uses-permission android:name="android.permissions.READ_DATABASE"/>
<uses-permission android:name="android.permissioms.WRITE_DATABASE"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.testeprovider.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-30T13:38:38.670

上面的答案对我来说有点困惑。但我现在明白了。我也想发布我的解决方案。也许对某人来说更好理解。

第一个应用程序 A 是具有 SQLite 数据库和“自定义内容提供程序”的应用程序。应用 B 使用来自应用 A 的数据库的 ContentResolver。

这是来自 App A 的 AndroidManifest.xml 文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="de.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<permission android:name="de.test.READ_DATABASE" android:protectionLevel="normal" />
<permission android:name="de.test.WRITE_DATABASE" android:protectionLevel="normal" />

<application
    android:debuggable="true"
    ... >
    ...
    ...
    <provider
        android:name="de.test.TestContentProvider"
        android:authorities="de.test.ContentProvider"
        android:exported="true"
        android:readPermission="de.test.READ_DATABASE"
        android:writePermission="de.test.WRITE_DATABASE" />
    ...
    ...
</application> 
```

好的，这是来自 App B 的 AndroidManifest.xml 文件。重要的是带有“使用权限”的部分：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="de.test.testercontentprovider"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="17" />

<uses-permission android:name="de.test.READ_DATABASE" />
<uses-permission android:name="de.test.WRITE_DATABASE" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="de.test.testercontentprovider.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

App A 的 ContentProvider 的代码如下所示：

```
public class TestContentProvider extends ContentProvider {

public static final String AUTHORITY = "de.test.TestContentProvider";

public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY
        + "/" + "nameoftable");

@Override
public boolean onCreate() {
    ...
    return true;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {
    // TODO Auto-generated method stub
            return null;
}

@Override
public int update(Uri uri, ContentValues values, String selection,
        String[] selectionArgs) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public int delete(Uri uri, String selection, String[] selectionArgs) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public Uri insert(Uri uri, ContentValues values) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public String getType(Uri uri) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

以及来自 App B 的 ContentResolver 的代码：

```
public class MainActivity extends Activity {

private static final String TAG = MainActivity.class.getSimpleName();
public static final String AUTHORITY = "de.test.TestContentProvider";
public static final String TABLE_NAME = "nameoftable";

    ...

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ContentResolver cr = getContentResolver();

    // show entries of db
    listEntries(cr);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

private void listEntries(ContentResolver cr) {
    Uri uri = Uri.parse("content://" + AUTHORITY + "/" + TABLE_NAME);
    Cursor c = cr.query(uri, null, null, null, null);

    if (c == null) {
        Log.d(TAG, "Cursor c == null.");
        return;
    }
    while (c.moveToNext()) {
        String column1 = c.getString(0);
        String column2 = c.getString(1);
        String column3 = c.getString(2);

        Log.d(TAG, "column1=" + column1 + " column2=" + column2 + " column3=" + column3);
    }
    c.close();
}
} 
```

我希望这可以帮助某人更好地理解它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-16T22:32:35.557

> 但似乎一切都是正确的

不完全是。

```
<permission android:name="READ_DATABASE" android:label="@string/app_read"       android:protectionLevel="normal"></permission>
<permission android:name="WRITE_DATABASE" android:label="@string/app_write" android:protectionLevel="normal"></permission> 
```

首先，你真的真的真的真的真的真的应该在这些权限名称上放置一个命名空间。使它们`com.company.contentprovider.READ_DATABASE`和`com.company.contentprovider.WRITE_DATABASE`.

```
<provider android:name="AplicacaoContentProvider"
    android:authorities="com.company.contentprovider"
    android:exported="true"
    android:readPermission="@string/app_read"
    android:writePermission="@string/app_write"
   /> 
```

其次，您的`android:readPermission`and`android:writePermission`值需要使用`android:name`from 的值`<permission>`，而不是`android:label`。`android:label`只是一个显示名称。所以，上面的代码片段应该是：

```
<provider android:name="AplicacaoContentProvider"
    android:authorities="com.company.contentprovider"
    android:exported="true"
    android:readPermission="com.company.contentprovider.READ_DATABASE"
    android:writePermission="com.company.contentprovider.WRITE_DATABASE"
   /> 
```

（虽然，明确放置的奖励积分`android:exported="true"`，这是一个好主意）

```
<uses-permission android:name="android.permissions.READ_DATABASE"/>
<uses-permission android:name="android.permissioms.WRITE_DATABASE"/> 
```

第三，您的其他清单不使用您的 old `android:name`，也不是我建议的 modified `android:name`，也不是`android:label`，而是完全不同的东西，您选择说这些在`android.permission`命名空间中，而它们不在。这应该是：

```
<uses-permission android:name="com.company.contentprovider.READ_DATABASE"/>
<uses-permission android:name="com.company.contentprovider.WRITE_DATABASE"/> 
```

（尽管这可能`com.company.contentprovider.WRITE_DATABASE`就足够了——我不知道是否`android:writePermission`会自动暗示`android:readPermission`）

做出这些改变，我想你会有更好的运气。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-10T14:13:15.820

我遇到了同样的问题，然后我记得我忘了

> 在清单中为提供者添加导出标签

```
 <provider
        android:name=".UsersProvider"
        android:authorities="com.xyz.demoapplication"
        android:exported="true">
   </provider> 
```

要在另一个应用程序中访问，您需要导出 true 这允许其他应用程序从该主机应用程序访问 Content Provider

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-05T10:25:59.333

我遇到了同样的问题。确保您的权威声明内部 AndroidManifest 和 URL(in URI.parse(URL)) 是相同的。这可能是问题所在。

# vba - excel VBA从宏发送电子邮件

> ID：14368875
> 
> 赞同：0
> 
> 时间：2013-01-16T22:15:04.580
> 
> 标签：vba, excel

我正在编写一个宏来从 Excel 工作表发送电子邮件。该宏准备了一些报告，然后具有为报告准备电子邮件的功能。一切正常，除了当它到达 .Send 行时，它给了我一个运行时错误-2147467259。不知道这意味着什么，但希望能得到帮助。

这是该函数的代码：

```
Function Mail_Reports(ByRef wkDate2 As String, fileDate2 As String, wkNumber2 As String, thisYear2 As String)
' Works in Excel 2000, Excel 2002, Excel 2003, Excel 2007, Excel 2010, Outlook 2000, Outlook 2002, Outlook 2003, Outlook 2007, Outlook 2010.
' This example sends the last saved version of the Activeworkbook object .
    Dim OutApp As Object
    Dim OutMail As Object
    Dim mailList As String
    Dim i As Long, lstRow As Long, p As Long, addressNum As Long, begRow As Long
    Dim proNam2 As String
    Set OutApp = CreateObject("Outlook.Application")
    Set OutMail = OutApp.CreateItem(0)

    'On Error Resume Next
   ' Change the mail address and subject in the macro before you run it.
    For i = 1 To 5 Step 1
        mailList = ""
        lstRow = Sheets("Data").Cells(Rows.Count, i).End(xlUp).Row
        addressNum = lstRow - 16
        begRow = lstRow - addressNum
        proNam2 = Sheets("Data").Cells(16, i)
        proNam2 = Replace(proNam2, " ", "")
        For p = 1 To addressNum Step 1
            mailList = Sheets("Data").Cells(begRow + p, i) & " ; " & mailList
        Next p
        With OutMail
            .To = mailList
            '.CC = "" remove comma and use this if you want to cc anyone, can be string or variable
            '.BCC = "" remove comma and use this if you want to cc anyone, can be string or variable
            .Subject = "Test"
            .HTMLBody = "<HTML><BODY><Font Face=Calibri(Body)><p>Hi All,</p><p2>Attached to this e-mail is the test file.<p2/><br><br><p3>Best,<p3/></font></BODY></HTML>"
            .attachments.Remove 1
            .attachments.Add "C:\Documents and Settings\test.xlsx"
            .Display
            .Send
    Next i

    On Error GoTo 0

    Set OutMail = Nothing
    Set OutApp = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:07:53.520

你能试试吗，

1.  将报告文件保存到本地驱动器
2.  首先使用一个电子邮件地址，因此删除 for 循环
3.  只用一个文件/范围/工作簿发送它。
4.  删除用于签名等的 html 标签。

代码：

```
With WB '-- workbook
        .SaveAs TempFilePath & TempFileName & FileExtStr, _
                FileFormat:=FileFormatNum
        On Error Resume Next
        With OutMail
            .To = "myname@myname.com"
            .CC = ""
            .BCC = ""
            .Subject = "This is the Subject line"
            .Body = "Here is a Report on My VBA analysis"
            .Attachments.Add Dest.FullName
            'You can add other files also like this
            '.Attachments.Add ("C:\testmail.txt") '-- .xls
            .Send   'or use .Display
        End With
        On Error GoTo 0
        .Close SaveChanges:=False
    End With 
```

*   根据 OP 的评论进行更新：

查看您的电子邮件连续循环，您不必每次收到新书时都这样做，**除非每个工作簿的邮件列表都不同**...... 您可以将该循环从邮件工作簿迭代中取出。

```
For p = 1 To addressNum Step 1
    mailList = Sheets("Data").Cells(begRow + p, i) & " ; " & mailList
Next p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:33:22.700

我在这里看到的一个问题是您执行以下操作：

```
Set OutMail = OutApp.CreateItem(0) 
```

在发送循环之外。你应该把它移到这里：

```
[...]
For p = 1 To addressNum Step 1
  mailList = Sheets("Data").Cells(begRow + p, i) & " ; " & mailList
Next p
Set OutMail = OutApp.CreateItem(0)
With OutMail
[...] 
```

我无法评论您的具体错误，因为我不知道哪些数据将进入您的 OutMail 对象。但是，为了帮助您调试，我建议您：

1.  用一个关闭`With OutMail`块`End With`
2.  设置对 Microsoft Outlook 14.0 对象库的引用
3.  将 OutApp 声明为 Outlook.Application ( `Dim OutApp as Outlook.Application`)
4.  将 OutMail 声明为 Outlook.MailItem ( `Dim OutMail as Outlook.MailItem`)
5.  初始化 OutApp 如下：`Set OutApp = New Outlook.Application`

以上不是必需的（除了可能关闭您的`With OutMail`块），但可以帮助您诊断代码问题。

另请注意，如果您使用的是较新版本的 Outlook，其他应用程序（Excel、Word、Access 等）可能会被安全控制阻止发送：http: [//support.microsoft.com/kb/263084](http://support.microsoft.com/kb/263084)。

# c - 子进程可以等待它的兄弟进程并获得其退出状态吗？

> ID：14368876
> 
> 赞同：2
> 
> 时间：2013-01-16T22:15:07.640
> 
> 标签：c, process, fork

我正在尝试从子进程中获取其“兄弟”的退出状态，

我试过这样做：

```
int main(void){
    int i,j,status,p1;
    pid_t pids[2],pid;
    for (i = 0; i < 2; i++){
        pids[i]=fork();
    /*child 1*/
        if(pids[i]==0 && i==0)exit(5);
    /*child 2*/
        else if(pids[i]==0 && i==1){
            waitpid(pids[0],&p1,0);
            exit(WEXITSTATUS(p1));
        }
    }

    for(j=0;j<2;j++ ){
        pid = wait(&status);
        if(pid==pids[0]){
            printf("child process 0 exit with status %d\n",WEXITSTATUS(status));
        }
        else if(pid==pids[1]){
            printf("child process 1 exit with status %d\n",WEXITSTATUS(status));
        }
    }
    return 0;
} 
```

但我得到的输出是：

```
child process 0 exit with status 5
child process 1 exit with status 0 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:17:49.507

不可以。您只能`wait()`在您创建的进程上。

# ios - 未调用 layoutSubviews 时如何获取 UICollectionView 单元格的大小

> ID：14368877
> 
> 赞同：3
> 
> 时间：2013-01-16T22:15:11.050
> 
> 标签：ios, ios6, uicollectionview

我正在尝试创建一个 UICollectionView，其中单元格的大小根据它们中的内容以及这些内容如何与它们设置的约束一起发挥作用。基本上，我需要检查框架大小，但直到布局子视图之后，单元格才会更新此大小。不幸的是，直到视图附加到它看起来的窗口层次结构才完成。如果不将其添加到窗口层次结构中，我找不到任何一系列调用来触发它，但我*不想*将它添加到层次结构中，除非通过这个 UICollectionView。当然，集合视图在请求和添加单元格之前需要它的大小。

如果不将其添加到窗口层次结构（我认为），我就无法获得大小，并且如果没有大小，我就无法将其添加到窗口层次结构（即集合视图）中。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T11:43:33.560

只需在单元格上调用这些，它应该就像它被添加到视图层次结构中一样：

```
setNeedsLayout()
layoutIfNeeded() 
```

# mongodb - 如何使用 Doctrine ODM 对 map/reduce 的结果进行排序

> ID：14368881
> 
> 赞同：0
> 
> 时间：2013-01-16T22:15:16.713
> 
> 标签：mongodb, sorting, symfony, doctrine-odm, odm

我在尝试对 map reduce 进行排序时遇到问题。该集合具有附加用户的统计信息（如分数），因此它正在查找用户的最高分数。该部分有效，排序是然后对排行榜的这些结果进行排序。我已将这些函数放入 javascript 变量中并在 mongo 控制台中运行它们，一个简单的 find().sort({'value.max.value':-1}) 在生成的集合上工作正常，但我无法得到它在这里工作。（我的结果无序返回）。

```
$query->map('function() { 
    var x = { value : parseInt(this.value), _id : this._id, date : this.postDate };
    emit(this.user, { max : x }); 
}')
->reduce('function(key, vals) {
    var res = vals[0];
    for (var i=1; i<vals.length; i++) 
    {
        if(vals[i].max.value > res.max.value)
            res.max = vals[i].max;
    }
    return res;
}')
->sort('value.max.value', 'desc'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T06:24:51.427

当您执行`->map`or`->reduce`调用时，Doctrine 会在内部`"query mode"`从`"find"`模式切换到`"mapreduce"`模式。

因此，您实际上是在执行[MongoDB 文档中的](http://docs.mongodb.org/manual/reference/command/mapReduce/#dbcmd.mapReduce)[mapReduce MongoDB 命令](http://docs.mongodb.org/manual/reference/command/mapReduce/#dbcmd.mapReduce)

这意味着您的`sort()`调用被转换为 mapReduce 命令中的排序属性，因此它只对**输入**文档进行排序。

**要实际对输出**进行排序，您有 2 个选项：

*   使用`out()`查询中的方法将结果输出到临时集合中，然后使用排序从那里查询数据
*   在php中对结果进行排序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:26:12.647

map-reduce的`sort`应用于*输入*文档（如馈送到`map`），而不是结果。如果要对 map-reduce 的结果进行排序，则需要输出到集合，然后对该集合执行排序`find`查询（正如您已成功尝试的那样）。

# java - Integer.parseInt 重新格式化字符串？

> ID：14368886
> 
> 赞同：0
> 
> 时间：2013-01-16T22:15:37.527
> 
> 标签：java, android, datepickerdialog

我正在为 Android 构建我的自定义应用程序。我已经实现了一个`datepicker`对话框，选择时间需要时间。问题是时间选择器没有正确格式化我选择的内容（例如，如果`03`选择，则`datepicker`返回`3`）。

为了解决这个问题，我实现了这个代码：

```
 TimePickerDialog.OnTimeSetListener timePickerListener = 
            new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int selectedHour,
                int selectedMinute) {

            hour = selectedHour;
            minute = selectedMinute;

            long date = calendarView.getDate();
            DateFormat df = new DateFormat();

            String format = (String) df.format("dd/MM/yyyy", date);

            Date hourdate = new Date();

            hourdate.setHours(hour);
            hourdate.setMinutes(minute);

            SimpleDateFormat hourformatter = new SimpleDateFormat("HH");
            SimpleDateFormat minuteformatter = new SimpleDateFormat("mm");

            String formattedhour = hourformatter.format(hourdate);
            String formattedminute = minuteformatter.format(hourdate);

            Log.v(StorybookContentProvider.TAG_LOG, "formattedhour" + Integer.parseInt(formattedminute) + formattedminute);

            as.setDate(format);
            as.setRangeStart("");
            as.setRangeFinish("");
            as.setHour(Integer.parseInt(formattedhour));
            Log.v(StorybookContentProvider.TAG_LOG, "formattedhoursaving" + Integer.parseInt(formattedminute));
            as.setMinutes(Integer.parseInt(formattedminute));
            as.setTabColor(as.tabHost, true); 
```

问题是：`formattedhour`以我想要的方式格式化（如果选择`03`它返回`03`），但如果我这样做`Integer.parseInt(formattedhour)`，它返回 3！它删除格式。这是一个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:17:32.860

没有错误。它按预期工作。

格式化是为了显示的目的，如果你想要 03，那么使用格式化的。与整数一起使用时，前导零具有不同的含义，这就是将其视为 3 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:10:45.593

您必须删除整数左侧的零，然后它应该可以正常工作

# objective-c - NSCoding VS NSCopying

> ID：14368887
> 
> 赞同：1
> 
> 时间：2013-01-16T22:15:38.157
> 
> 标签：objective-c, nscoding, nscopying

NSCoding 和 NSCopying 在底层的真正区别是什么？

另外，它们应该独立使用，一起使用还是什么时候使用哪个好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T22:22:43.193

*   NSCopying 最接近于其他语言中`clone()`的名称，也就是说，它用于立即创建（功能性）新对象作为现有对象的复本。

*   NSCoding 最接近`serialize()/deserialize`，也就是说，它用于将对象转换为可以持久存储并在以后恢复的形式，可能在其他时间重新启动程序时。

如您所见，它们在功能上并不是很相似，并且肯定应该能够独立使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T22:22:53.567

虽然他们都创建了相关对象的副本，但他们以非常不同的方式进行操作。

协议实际上只是实现一组特定功能的承诺。在 NSCopying 的情况下，它是`-copyWithZone:`，在 NSCoding 的情况下，它是`–initWithCoder:`and `-encodeWithCoder:`。

NSCopying 用于制作对象的内存副本 - 另一个相同的对象。

NSCoding 用于创建序列化表示 - NSData 对象 - 或从这样的表示创建对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:22:57.653

NSCoding 是关于将对象序列化到磁盘。

NSCopying 是关于可复制的（在内存中）。

# isql - isql 的默认输出宽度

> ID：14368891
> 
> 赞同：0
> 
> 时间：2013-01-16T22:15:52.257
> 
> 标签：isql

当我使用具有相同连接字符串的 isql 并在两个不同的主机中执行相同的查询时，我会得到不同的结果格式——一个将每条记录包装在 X 字符之后，而另一台主机每条记录显示一行。

因此，我认为在连接字符串中连接 isql 时可以使用 -w200 作为选项，并且两台主机上的输出相同。但是，我想让两个主机的输出相同，因为如果未指定 -w，则显示宽度必须有默认设置才会生效。

如何指定此设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:50:08.817

根据文档，默认值应该是 80。如果您在不同的主机上看到不同的输出，这可能是主机终端的配置方式。

# iphone - UILabel 错误 - [__NSCFNumber string]: 无法识别的选择器发送到实例

> ID：14368892
> 
> 赞同：2
> 
> 时间：2013-01-16T22:15:53.003
> 
> 标签：iphone, ios, nsstring, uilabel

我随机收到这种错误。它并不总是发生，但无论如何，它没有意义。

“[__NSCFNumber string]: 无法识别的选择器发送到实例”

出现在这一行：

```
_displayLabel.text = @""; 
```

`_displayLabel`是一个 iVar 类型`UILabel`，我只是在这里清除它的文本。这是`NSCFNumber`从哪里来的？这是从 a 中清除文本的不正确方法`UILabel`吗？

注意：这是一个 ARC 项目。

**更新**

我在代码的不同部分中遇到了涉及相同对象的不同错误，同样非常随机。有时我能看到，其他我看不到

```
-[NSConcreteMutableAttributedString string]: message sent to deallocated instance 
```

我在这条线上看到

```
NSLog(@"displayLabel: %@", _displayLabel.text); 
```

我会重申这是一个 ARC 项目，`release`我的代码中没有任何消息。会不会是 ARC 插入不好？

# python - 为什么十进制乘法稍微不准确？

> ID：14368893
> 
> 赞同：3
> 
> 时间：2013-01-16T22:15:53.643
> 
> 标签：python, math

> **可能重复：**
> [为什么浮点上的简单数学运算会在 VB.Net 和 Python 中返回意外（不准确）的结果？](https://stackoverflow.com/questions/1594985/why-do-simple-math-operations-on-floating-point-return-unexpected-inacurate-re)

为什么在 Python 中会发生这种情况：

```
>>> 
>>> 483.6 * 3
1450.8000000000002
>>> 
```

我知道这发生在其他语言中，我不是在问如何解决这个问题。我知道你可以这样做：

```
>>> 
>>> from decimal import Decimal
>>> Decimal('483.6') * 3
Decimal('1450.8')
>>> 
```

那么究竟是什么导致了这种情况发生呢？为什么在进行这样的数学运算时小数会稍微不准确？

是否有任何特定原因计算机无法正确执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T22:18:34.437

请参阅[有关浮点数的 Python 文档](http://docs.python.org/2/tutorial/floatingpoint.html)。本质上，当您创建浮点数时，您使用的是以 2 为底的算术。正如 1/3 是 .333.... 到无穷大，所以大多数浮点数不能以 2 为底数精确表示。因此你的结果。

Python 解释器与其他一些语言的区别在于，其他语言可能不会显示这些额外的数字。这不是 Python 中的错误，而是硬件如何使用浮点算法进行计算。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T22:23:33.167

计算机不能完美地表示每个浮点数。

基本上，浮点数以科学计数法表示，但以 2 为底。现在，尝试用科学计数法表示 1/3（以 10 为底）。您可以尝试 3 * 10 ^(-1)或者更好的是 33333333 * 10 ^(-8)。您可以继续添加 3，但您永远不会得到 1/3 的精确值。现在，尝试用二进制科学计数法表示 1/10，你会发现同样的事情发生了。

[这](http://docs.python.org/2/tutorial/floatingpoint.html)是关于python中浮点数的一个很好的链接。

当您深入研究较低级别的主题时，您将看到浮点在计算机中的表示方式。例如，在 C 中，浮点数的表示方式[如此](https://stackoverflow.com/questions/7644699/floating-point-representation)stackoverflow 问题中所述。您无需阅读本文即可了解为什么无法准确表示小数，但它可能会让您更好地了解正在发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:19:09.393

计算机将数字存储为位（二进制）。不幸的是，即使有无限的内存，你也不能准确地用二进制表示一些小数，例如`0.3`. 这个概念类似于试图以`1/3`十进制表示法存储。

# javascript - 在咖啡脚本中以编程方式/“按字符串”调用函数

> ID：14368894
> 
> 赞同：5
> 
> 时间：2013-01-16T22:15:56.027
> 
> 标签：javascript, coffeescript

> **可能重复：**
> [动态对象属性名称](https://stackoverflow.com/questions/4244896/dynamic-object-property-name)

我有一个需要根据用户输入的数据调用的函数。

例如，我有：

```
models.cat
models.dog 
```

现在，我希望能够调用`models.[my_str]`where `my_str = "snake"`。所以计算机会认为它正在尝试执行`models.snake`。有没有办法在javascript或更好的coffeescript中做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T22:23:17.543

你应该可以这样称呼它：

```
models[my_str](); 
```

这应该适用于 Javascript 和 Coffeescript。

# android - 如何在 Phonegap、JQuery Mobile 和 Dreamweaver 中集成 PayPal 捐赠按钮

> ID：14368897
> 
> 赞同：0
> 
> 时间：2013-01-16T22:16:09.847
> 
> 标签：android, jquery, cordova

我正在尝试将 paypal 捐赠按钮集成到我的 phonegap-jquery 移动应用程序中，但该按钮没有出现并且不起作用。有什么方法可以显示按钮或任何简单的方法可以在我的应用程序中显示贝宝？

这是应用程序代码 -

```
<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>jQuery Mobile Web App</title>
<link href="file:///C|/Program Files/Adobe/Adobe Dreamweaver CS5.5/Configuration/Third Party Source Code/jquery-mobile/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css"/>
<script src="file:///C|/Program Files/Adobe/Adobe Dreamweaver CS5.5/Configuration/Third Party Source Code/jquery-mobile/jquery-1.5.min.js" type="text/javascript"></script>
<script src="file:///C|/Program Files/Adobe/Adobe Dreamweaver CS5.5/Configuration/Third Party Source Code/jquery-mobile/jquery.mobile-1.0a3.min.js" type="text/javascript"></script>
<!-- This reference to phonegap.js will allow for code hints as long as the current site has been configured as a mobile application. 
     To configure the site as a mobile application, go to Site -> Mobile Applications -> Configure Application Framework... -->
<script src="/phonegap.js" type="text/javascript"></script>
</head> 
<body> 

<div data-role="page" id="page">
    <div data-role="header">
        <h1>Page One</h1>
    </div>
    <div data-role="content">   
        <ul data-role="listview">
            <li><a href="#page2">Page Two</a></li>
            <li><a href="#page3">Page Three</a></li>
            <li><a href="#page4">Page Four</a></li>
        </ul>       
    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div> 
```

这是按钮代码 -

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_donations">
<input type="hidden" name="business" value="me@example.com">
<input type="hidden" name="lc" value="US">
<input type="hidden" name="item_name" value="Test">
<input type="hidden" name="no_note" value="0">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="bn" value="PP-DonationsBF:btn_donateCC_LG.gif:NonHostedGuest">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

当我在任何页面中添加按钮代码时，将出现一个空白按钮并且不显示任何内容！任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T18:43:15.863

嗨，您将使用 phonegap paypal 插件库，具体取决于您所针对的手机。这是你需要的 git repo 和说明 [https://github.com/phonegap/phonegap-plugins/tree/master/Android/PayPalPlugin](https://github.com/phonegap/phonegap-plugins/tree/master/Android/PayPalPlugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:22:20.003

一方面，您的脚本链接在由 Phonegap 编译时将不起作用

```
<script src="file:///C|/Program Files/Adobe/Adobe Dreamweaver CS5.5/Configuration/Third Party Source Code/jquery-mobile/jquery-1.5.min.js" type="text/javascript"></script> 
```

该路径仅适用于您的本地计算机。您需要使用相对路径，例如 jquery-mobile/jquery-1.5.min.js 作为脚本 src

该按钮看起来像是从 Internet 中提取图像，您是否在 Phonegap 中启用了对该域的访问？另一种选择是下载图像并使用相对链接而不是 http:// 链接

如果您想使用第一个选项，请查看白名单域指南

[http://docs.phonegap.com/en/2.3.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/2.3.0/guide_whitelist_index.md.html)

# javascript - 如何使用在 Breeze 中测试空列的谓词进行查询？

> ID：14368901
> 
> 赞同：5
> 
> 时间：2013-01-16T22:16:41.327
> 
> 标签：javascript, breeze

如何使用在 Breeze 中测试 null 的谓词进行查询？

与`Predicate.create("region", "==", null)`

我从服务器收到 500 http 错误：

> 无法执行操作：eqon 类型：

我正在使用 Asp.Net Breeze Web Api 控制器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T00:13:16.837

**空数据属性**值的谓词表达式在您的示例中**确实**有效，但我猜在您的查询中“区域”是区域类型的一个实例。我会更详细地研究这个，但目前我猜你也有一个“regionID”属性或类似的东西。所以也许尝试：

```
EntityQuery.from("Territories").where("regionID", "==", null) 
```

# php - 如何从一个表中选择由 MySQL 中的另一个表过滤的行？

> ID：14368904
> 
> 赞同：0
> 
> 时间：2013-01-16T22:16:52.973
> 
> 标签：php, mysql, select

我有一个表*成员*：

```
member_id, points 
```

我还有另一桌*赌注*：

```
member_id, finished 
```

考虑表*成员*的以下数据：

```
1 0
2 15000
3 0 
```

对于*投注*：

```
1 -1
1  0
2  1
3  1
3 -1 
```

在表中，已完成*投注*= -1 表示投注失败，0 表示未完成，1 表示获胜。如何选择积分为 0 且所有投注都已完成的会员 ID？使用我给出的数据，它应该返回成员 id = 3 的一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:24:40.043

您可以使用 EXISTS 子句：

```
select members.id
from members
where
  points=0
  and not exists (select null from bets where bets.id=members.id and status=0) 
```

您还可以使用 LEFT JOIN：

```
select members.id
from
  members left join bets
  on members.id = bets.id
     and bets.status=0
where
  bets.id is null
  and members.points=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:19:37.220

使用 a `JOIN`，像这样：

```
select members.member_id, members.points, bets.finished
  from members
  join bets on bets.member_id = members.member_id
  where bets.finished <> 0 and members.points = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:19:53.960

您可以使用内部联接

```
SELECT member_id FROM members m
INNER JOIN bets b
ON m.member_id = b.member_id
WHERE b.finished = 0 AND m.points = 0 
```

> 内连接是应用程序中最常见的连接操作，可以视为默认连接类型。内连接通过基于连接谓词组合两个表（A 和 B）的列值来创建一个新的结果表。该查询将 A 的每一行与 B 的每一行进行比较，以找到满足连接谓词的所有行对。当满足连接谓词时，将 A 和 B 的每对匹配行的列值组合成一个结果行。

[http://en.wikipedia.org/wiki/Join_(SQL)#Inner_join](http://en.wikipedia.org/wiki/Join_(SQL)#Inner_join)

在您的情况下，*连接谓词*是`m.member_id = b.member_id`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T22:20:19.670

-- 大多数答案都没有解决您的关键问题 -- 所有的赌注都被下注而不仅仅是其中一个 -- 给你

```
Select memberid 
  from members 
 where points = 0 
   and member id not in (select member id from bets where bet <> -1 ) 
```

或者随着数据增长到非常高的容量，效率更高

```
Select memberid 
  from members 
 where points = 0 
   and member id not in (select member id from bets where bet <> -1 and bets.memberid = members.memberid) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T22:20:40.340

试试这个

```
 SELECT m.member_id , b.finished FROM members m
   INNER JOIN bets b
   ON m.member_id = b.member_id
   WHERE m.points = 0
   and b.finished = 1 
```

[**看演示 SQLFIDDLE**](http://www.sqlfiddle.com/#!2/033b0/3)

# android - Android webview + progressbar：在页面更改之前重新显示webview

> ID：14368906
> 
> 赞同：1
> 
> 时间：2013-01-16T22:16:59.353
> 
> 标签：android, webview, progress-bar

我的 Android 应用程序存在以下问题。我正在使用具有进度条的 webview。它工作正常，但问题是当进度条再次设置为不可见时（进度 == 100），webview 还没有更改页面（它在重新显示后不久就这样做了）。

总而言之，就是这样： 1\. 视图中的 Webview 2\. Webview 消失，进度条可见 3\. Progressbar 消失，webview 可见 4\. Webview 实际上改变了页面

我的目标是在 3 之前发生 4 （因此在实际更改页面之前不显示 webview。

我怎样才能做到这一点？

我的代码如下：

> 公共类 MyActivity 扩展 Activity { WebView mWebView; 进度条 pd = null;
> 
> ```
> @Override
> public void onCreate(Bundle savedInstanceState) {
>   super.onCreate(savedInstanceState);
>   getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
>   requestWindowFeature(Window.FEATURE_NO_TITLE);
> 
>     setContentView(R.layout.main);
>     pd = (ProgressBar) findViewById(R.id.web_view_progress_bar);
>     mWebView = (WebView) findViewById(R.id.webview);
> 
>     mWebView.getSettings().setJavaScriptEnabled(true);
>     mWebView.getSettings().setDomStorageEnabled(true);
>     mWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY); 
>     mWebView.loadUrl("http://www.myurl.com");
>     mWebView.setWebViewClient(new WebViewClient());        
>     mWebView.setWebChromeClient(new WebChromeClient() {
>         public void onProgressChanged(WebView view, int progress) {
>            if(progress < 100 && pd.getVisibility() == ProgressBar.GONE){
>                mWebView.setVisibility(WebView.GONE);
>              pd.setVisibility(ProgressBar.VISIBLE);
>            }
>            pd.setProgress(progress);
>            if(progress == 100 && mWebView.getVisibility() == WebView.GONE) {
>              pd.setVisibility(ProgressBar.GONE);
>              mWebView.setVisibility(WebView.VISIBLE);
>            }
>         }
>     });
> }
>   @Override
>    public void onBackPressed(){                  
>         if(mWebView.canGoBack())            
>            mWebView.goBack(); 
>         else
>            super.onBackPressed();   
>         } 
>    }
> 
> class ClassWebViewClient extends WebViewClient {
>    @Override
>    public boolean shouldOverrideUrlLoading(WebView view, String url) {
>       return super.shouldOverrideUrlLoading(view, url);
>    } 
> } 
> ```

布局：

> android:orientation="vertical" android:layout_width="fill_parent"
> android:layout_height="fill_parent">
> 
> ```
> <ProgressBar
>     android:id="@+id/web_view_progress_bar"
>     style="?android:attr/progressBarStyle"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_centerInParent="true"
>     android:visibility="gone" >
> </ProgressBar>
> 
> <WebView xmlns:android="http://schemas.android.com/apk/res/android"
>     android:id="@+id/webview"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:layout_alignParentLeft="true"
>     android:layout_alignParentTop="true"
>     android:visibility="visible">
> </WebView> 
> ```

# facebook - 获取给定 url 的 facebook 喜欢计数

> ID：14368907
> 
> 赞同：1
> 
> 时间：2013-01-16T22:17:04.353
> 
> 标签：facebook, facebook-graph-api, facebook-fql

当我使用[https://developers.facebook.com/docs/reference/fql/link_stat](https://developers.facebook.com/docs/reference/fql/link_stat)

我得到了这些信息 like_count、commentsbox_count、share_count、comments_fbid like_count 是 Facebook 用户“喜欢”该页面的次数，或者喜欢该页面的任何评论或转发的次数。我只能获取点击我的赞按钮页面的用户数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:57:35.227

您已经获得了点赞数，只需将您的 fql 设置为如下

```
SELECT like_count FROM link_stat WHERE url=your_url 
```

# c# - 如何将 Json 中的自定义节点反序列化为名称不断变化的 c#？

> ID：14368913
> 
> 赞同：2
> 
> 时间：2013-01-16T22:17:26.467
> 
> 标签：c#, dynamic, deserialization

下面是我从端点收到的一段 json。

如果你看下面的 Json，'User-Defined-Network-Name' 是一个自定义节点，名称每次都会改变。

如何为此 Json 定义 C# 对象？

```
"addresses": {
            "public": [{
                "version": 6,
                "address": "2005:4600:788e:0910:1a72:81c0:ff03:c7y6"
            },
            {
                "version": 4,
                "address": "197.68.xx.xxx"
            }],
            "private": [{
                "version": 4,
                "address": "10.xx.xx.xxx"
            }],
            "User-Defined-Network-Name": [{
                "version": 4,
                "address": "192.xxx.x.xxx"
            }]
        } 
```

这就是我已经走了多远-

```
[Serializable]
    public class Addresses
    {
        public List<Public> @public { get; set; }
        public List<Private> @private { get; set; }
    } 
```

我使用“JavascriptSerializer”类来反序列化 json。

谢谢，瑞安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:00:10.097

`addresses`可以反序列化为`Dictionary<string,List<YourClass>>`where `YourClass`hold`version`和`addresss`.

```
var obj = new JavaScriptSerializer().Deserialize<Root>(jsonstring); 
```

--

```
public class Root
{
    public Dictionary<string,List<VersionAddress>> addresses;
    //Your other fields/properties
}

public class VersionAddress
{
    public string version;
    public string address;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:25:02.847

您可以利用 C# 的动态特性：

```
// this could come from user input:
string userDefinedName = "User-Defined-Network-Name"; 
```

    string json = "你的 JSON 来了";

```
var serializer = new JavaScriptSerializer();
dynamic result = serializer.DeserializeObject(json);
int version = result["addresses"][userDefinedName][0]["version"];
string address = result["addresses"][userDefinedName][0]["address"];

Console.WriteLine(version);
Console.WriteLine(address); 
```

如果您想遍历结果：

```
foreach (dynamic item in result["addresses"][userDefinedName])
{
    int version = item["version"];
    string address = item["address"];

    Console.WriteLine(version);
    Console.WriteLine(address);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:28:49.137

为什么不将网络名称制作成字典，并带有网络名称的键？然后你可以迭代它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T22:39:22.773

我不建议使用`JavaScriptSerializer`，因为它已被弃用。如果您想要第三方解决方案，`JSON.Net`据我所知非常好。

然而，我是一个对依赖很奇怪的人，所以如果它不存在，我通常会自己动手。`DataContractJsonSerializer`幸运的是，由于来自命名空间，这并不太难`System.Runtime.Serialization`。

您需要做的就是首先以嵌套方式定义所有对象：

```
using System.Reflection;
using System.Runtime.Serialization;      // You will have to add a reference
using System.Runtime.Serialization.Json; // to System.Runtime.Serialization.dll

[DataContract]
public class AddressInfo
{ 
  [DataMember(Name = "address")]
  public string Address { get; set; }

  [DataMember(Name = "version")]
  public int Version { get; set; }
}

[DataContract]
public class AddressList
{ 
  [DataMember(Name = "public")]
  public IEnumerable<AddressInfo> Public { get; set; }

  [DataMember(Name = "private")]
  public IEnumerable<AddressInfo> Private { get; set; }

  [DataMember(Name = "User-Defined-Network-Name")]
  public IEnumerable<AddressInfo> UserDefined { get; set; }
} 
```

然后是几个辅助方法来进行反序列化：

```
// This will change the DataMember.Name at runtime!
// This will only work if you know the node name in advance.
static void SetUserDefinedNodeName(string userDefinedNodeName)
{
  var type = typeof(AddressList);
  var property = type.GetProperty("UserDefined", BindingFlags.Default);
  var attribute = property.GetCustomAttribute<DataMemberAttribute>();

  if (attribute != null)
    attribute.Name = userDefinedNodeName;
}

static T Deserialize<T>(string jsonText, string userDefinedNodeName)
{
  SetUserDefinedNodeName(userDefinedName);

  var jsonBytes = Encoding.UTF8.GetBytes(jsonText);

  using (var stream = new MemoryStream(jsonBytes))
  {
    var serializer = new DataContractJsonSerializer(typeof(T));  
    var obj = serializer.ReadObject(stream) as T;

    return obj;
  }
} 
```

然后你像这样使用它：

```
var jsonText = // get your json text somehow
var addressList = Deserialize<AddressList>(jsonText); 
```

# ruby-on-rails - 包含字段列表的表格

> ID：14368918
> 
> 赞同：0
> 
> 时间：2013-01-16T22:17:40.220
> 
> 标签：ruby-on-rails, ruby, html

我正在尝试将一个包含七列的表格放在一起作为时间表。在每一列上，我想列出二十个字段。我到处玩，但我找不到让它工作的方法。

控制器：

```
def new
  @doctor = Doctor.new

  140.times { @doctor.schedules.build }
end 
```

模型：

```
has_many :schedules

def schedule_attributes=(schedule_attributes)
    schedule_attributes.each do |attributes|
      schedules.build(attributes)
    end
end 
```

形式：

```
<tr>
  <% @doctor.schedules.each_with_index do |schedule, i| %>
    <td>
      <% if i > 0 && i % 20 == 0 %>
      </td>
      <td>
      <% end %>
      <%= fields_for "doctor[schedule_attributes][]", schedule do |schedule_form|  %>
        <ul>
           <% schedule_form.text_field :day, value: @days[0] %>
           <li><%= schedule_form.check_box :hour, value: "8:00" %></li>
        </ul>                 
      <% end %>
    </td>
  <% end %>
</tr> 
```

这只输出四十个字段。这个想法是输出 140 个字段，每列 20 个。

我想在一个单元格中插入二十个字段。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:25:57.113

使用简单（快速而肮脏）的方法，您可以这样做：

```
<tr>
  <td>
    <% @doctor.schedules.limit(140).each_with_index do |schedule, i| %>
      <% if i > 0 && i % 20 == 0 %>
        </td>
        <td>          
      <% end %>
      <%= fields_for "doctor[schedule_attributes][]", schedule do |schedule_form|  %>
        <ul>
           <% schedule_form.text_field :day, value: @days[0] %>
           <li><%= schedule_form.check_box :hour, value: "8:00" %></li>
        </ul>                 
      <% end %>
    <% end %>
  </td>
</tr> 
```

如果要重用此逻辑，则应使用辅助方法：

```
def to_columns(collection, num_columns)
  html = ""
  count = collection.size
  num_rows = (count / num_columns.to_f).ceil
  collection.each_with_index do |item, i|        
    html << '<td>'.html_safe if (i % num_rows == 0)
    html << yield(item, i)
    html << '</td>'.html_safe if (i % num_rows == 0 || i == (count - 1))
  end
  html
end 
```

在您看来，让此方法`<td>`根据需要制作您的标签：

```
<tr>
  <%= to_columns(@doctor.schedules.limit(140), 7) do |schedule, i| %>
    <%= fields_for "doctor[schedule_attributes][]", schedule do |schedule_form|  %>
      <ul>
         <% schedule_form.text_field :day, value: @days[0] %>
         <li><%= schedule_form.check_box :hour, value: "8:00" %></li>
      </ul>                 
    <% end %>
  <% end %>
</tr> 
```

# cmake - CMake自定义命令复制多个文件

> ID：14368919
> 
> 赞同：24
> 
> 时间：2013-01-16T22:17:42.317
> 
> 标签：cmake

我正在尝试使用该`${CMAKE_COMMAND} -E copy <from> <to>`格式复制多个文件，但我想知道是否有办法提供许多文件以复制到特定目录。似乎 cmake 副本一次只允许复制一个文件。当我宁愿提供要复制的文件列表作为第一个参数时，我真的不想重复使用复制命令。

我认为最简单的解决方案是使用平台相关的“cp”命令。虽然这绝对不利于可移植性，但我们的系统保证构建在 Linux 上。一个简单的、独立于平台的解决方案会更好。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-03-03T09:00:01.180

从 CMake 3.5 可以复制多个文件

```
cmake -E copy <file>... <destination> 
```

[“cmake -E copy” 支持多个文件](https://cmake.org/Bug/view.php?id=15703)

[命令行工具模式](https://cmake.org/cmake/help/v3.5/manual/cmake.1.html#command-line-tool-mode)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-08T09:58:03.467

我用循环做到了

```
# create a list of files to copy
set( THIRD_PARTY_DLLS
   C:/DLLFOLDER/my_dll_1.dll
   C:/DLLFOLDER/my_dll_2.dll
)

# do the copying
foreach( file_i ${THIRD_PARTY_DLLS})
    add_custom_command(
    TARGET ${VIEWER_NAME}
    POST_BUILD
    COMMAND ${CMAKE_COMMAND}
    ARGS -E copy ${file_i} "C:/TargetDirectory"
)
endforeach( file_i ) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-16T23:09:46.543

一个相对简单的解决方法是使用`${CMAKE_COMMAND} -E tar`捆绑源、移动 tarball 并将其解压缩到目标目录中。

如果您的资源分散在许多不同的目录中，这可能会带来更多麻烦，因为提取会保留原始目录结构（与 using 不同`cp`）。但是，如果所有文件都在一个目录中，则只需 2 次`add_custom_command`调用即可完成复制。

假设您要移动的源都在 中`${CMAKE_SOURCE_DIR}/source_dir`，目标是`${CMAKE_SOURCE_DIR}/destination_dir`并且您的文件名列表（不是完整路径）在`${FileList}`. 你可以这样做：

```
add_custom_command(
    TARGET MyExe POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E tar cfj ${CMAKE_BINARY_DIR}/temp.tar ${FileList}
    WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}/source_dir)

add_custom_command(
    TARGET MyExe POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E rename ${CMAKE_BINARY_DIR}/temp.tar temp.tar
    COMMAND ${CMAKE_COMMAND} -E tar xfj temp.tar ${FileList}
    COMMAND ${CMAKE_COMMAND} -E remove temp.tar
    WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}/destination_dir) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-30T17:23:33.357

由于我或多或少有完全相同的问题并且不喜欢上面的解决方案，我最终想出了这个。它不仅仅是复制文件，但我想我会发布整个内容，因为它显示了该技术的灵活性以及生成器表达式，允许根据构建变体使用不同的文件和目录。我相信 COMMAND_EXPAND_LISTS 对这里的功能至关重要。这个函数不仅将一些文件复制到一个新目录，而且在每个文件上运行一个命令。在这种情况下，它使用 microsoft signtool 程序为每个文件添加数字签名。

```
cmake_minimum_required (VERSION 3.12)

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)

SET(ALL_3RD_PARTY_DLLS_DEBUG "${CMAKE_CURRENT_SOURCE_DIR}/file1.dll" "${CMAKE_CURRENT_SOURCE_DIR}/file2.dll")
SET(ALL_3RD_PARTY_DLLS_RELEASE "${CMAKE_CURRENT_SOURCE_DIR}/file3.dll" "${CMAKE_CURRENT_SOURCE_DIR}/file4.dll")

STRING(REPLACE "${CMAKE_CURRENT_SOURCE_DIR}" ";${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/Debug" ALL_OUTPUT_3RD_PARTY_DLLS_DEBUG ${ALL_3RD_PARTY_DLLS_DEBUG})
LIST(REMOVE_AT ALL_OUTPUT_3RD_PARTY_DLLS_DEBUG 0)
STRING(REPLACE "${CMAKE_CURRENT_SOURCE_DIR}" ";${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/Release" ALL_OUTPUT_3RD_PARTY_DLLS_RELEASE ${ALL_3RD_PARTY_DLLS_RELEASE})
LIST(REMOVE_AT ALL_OUTPUT_3RD_PARTY_DLLS_RELEASE 0)

FILE(TO_NATIVE_PATH "C:\\Program\ Files\ (x86)\\Windows\ Kits\\10\\bin\\10.0.17763.0\\x86\\signtool.exe" SIGNTOOL_COMMAND)

add_custom_target(Copy3rdPartyDLLs ALL
                COMMENT "Copying and signing 3rd Party DLLs"
                VERBATIM
                COMMAND_EXPAND_LISTS
                COMMAND ${CMAKE_COMMAND} -E
                    make_directory "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/$<$<CONFIG:Release>:Release>$<$<CONFIG:Debug>:Debug>/"
                COMMAND ${CMAKE_COMMAND} -E
                    copy_if_different 
                            "$<$<CONFIG:Release>:${ALL_3RD_PARTY_DLLS_RELEASE}>" 
                            "$<$<CONFIG:Debug>:${ALL_3RD_PARTY_DLLS_DEBUG}>"
                            "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/$<$<CONFIG:Release>:Release>$<$<CONFIG:Debug>:Debug>/"
                COMMAND ${SIGNTOOL_COMMAND} sign 
                            "$<$<CONFIG:Release>:${ALL_OUTPUT_3RD_PARTY_DLLS_RELEASE}>" 
                            "$<$<CONFIG:Debug>:${ALL_OUTPUT_3RD_PARTY_DLLS_DEBUG}>"
) 
```

我希望这可以节省一天的时间，或者我花了很多时间才弄清楚这一点。

# ruby-on-rails - Ruby 无法将数组转换为整数

> ID：14368923
> 
> 赞同：-1
> 
> 时间：2013-01-16T22:17:50.287
> 
> 标签：ruby-on-rails, ruby

我收到此错误：

```
TypeError in Properties#show 
```

在 /Users/taylor/Pro/rentroll_analysis/app/views/properties/show.html.erb 的第 67 行，引发了此异常：

```
can't convert Array into Integer 
```

这是第 67 行附近的提取源代码：

```
64:     <td><%=u.unit_number%></td>
65:     <td><%=u.unit_type%></td>
66:     <td><%=number_to_currency(u.market_rent - u.current_rent)%></td>
67:     <td><%=number_to_currency(u.market_rent - u.current_rent)*(session[:assumptions]=    [:spread_x])%></td>
68:    
69:   </tr>
70: <%end%> 
```

运行时：

```
def setup_assumptions
  if session[:assumptions].nil?
    session[:assumptions]=[:min_spread=>400,:spread_x=>10]
  end
end 
```

我敢肯定它相对简单，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:34:19.443

如果您尝试将其设置为地图，请使用地图（大括号）而不是数组（方括号）：

```
session[:assumptions] = { :min_spread => 400, :spread_x => 10 } 
```

否则，您将设置为其中包含哈希*的*`session[:assumptions]`数组。

 *另外，你在这里的目标是什么？

```
number_to_currency(u.market_rent - u.current_rent) * (session[:assumptions]= [:spread_x]) 
```

我想你的意思是：

```
number_to_currency(u.market_rent - u.current_rent) * session[:assumptions][:spread_x] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-05T19:05:56.933

当您将某些内容保存到会话时，它会将其保存为字符串，因此当您从会话中拉回某些内容并希望对其执行 Integer 方法时，您可能必须指定它是一个整数。

执行以下操作：`session[:assumptions][:spread_x].to_i`将会话内容用作整数。另外，请注意我认为您的原始代码中有错误`=`。

最后，您可能不会遇到这种情况，但我有时会在会话变量中使用嵌套符号时遇到问题。如`session[:assumptions][:spread_x]`. 我有时不得不将其更改为类似`session[:assumptions]['spread_x']`并用字符串调用嵌套变量。

祝你好运！*

# java - 我的 setColor 方法搞混了？

> ID：14368927
> 
> 赞同：-1
> 
> 时间：2013-01-16T22:17:56.730
> 
> 标签：java, multithreading, colors, sleep

好的，我不久前发布了一个关于如何在不暂停整个程序的情况下暂停方法的问题。这是上下文的链接-[如何在不暂停整个程序的情况下暂停方法？](https://stackoverflow.com/questions/14366777/how-do-i-make-method-pause-without-pausing-the-whole-program). 我得到的答案是创建一个新线程并从那里暂停它。新线程工作，但现在我有一个不同的问题。由于我同时运行翻转 5-6 次，因此三个 setcolor 方法都使用相同的图形，因此混淆了。我认为这是因为一些线程将颜色设置为绿色，一些设置为黑色，一些设置为白色。结果是这些片段在动画过程中会迅速改变颜色。我该如何解决？

```
 public void flip(int row, int col, Graphics window)
{
Color a;
    Color b = new Color(0, 100, 0);
if (pieces[row][col]==2)
    a = Color.black;
else
    a = Color.white;
for ( int size = 90; size>=0; size-=2)
{
    try { Thread.sleep(5,5555); } catch (InterruptedException exc){}
    window.setColor(b);
    window.fillRect(row*100+3, col*100+3, 94, 94);
    window.setColor(a);
    window.fillOval(row*100 + 5, col*100+5+(90-size)/2, 90, size);

}
if (a==Color.black)
    a=Color.white;
else
    a=Color.black;
for ( int size = 0; size<=90; size+=2)
{
    try { Thread.sleep(5,5555); } catch (InterruptedException exc){}
    window.setColor(b);
    window.fillRect(row*100+3, col*100+3, 94, 94);
    window.setColor(a);
    window.fillOval(row*100 + 5, col*100+5+(90-size)/2, 90, size);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:32:53.877

由于您现在使用的线程都更改相同的值，因此您需要了解同步。

# javascript - 如何在移动浏览器的嵌入式 iframe 中滚动 javascript

> ID：14368928
> 
> 赞同：0
> 
> 时间：2013-01-16T22:18:04.680
> 
> 标签：javascript, mobile, iframe, scrollto

我有我认为应该做的简单的事情，但我尝试过的一切都失败了。

我在移动网页中有一个 iframe，看起来不错，在主要操作系统中手指滑动滚动，没有任何代码。但我希望 iframe 将 map.html 打开到特定坐标，map.html 只是地图的图像，没有别的。

嵌入 iframe 的页面上的代码：

```
<iframe id="iframe2" width="292" height="350" frameborder="0" scrolling="yes" marginheight="0" marginwidth="0" src="map.html"></iframe> 
```

map.html 的代码

```
<html>
<head>
</head>
<body> 
<div style="width:292px;height:350px;frameborder:1;marginheight:0;marginwidth:0;overflow:scroll;" >
<img src="images/map.png">
</div>
</body> 
</html> 
```

是否有一些javascript可以放在包含iframe的页面上或map.html中，可以将map.html滚动到50px，50px之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:12:52.243

我想我会放弃这个想法......在页面中嵌入图像而不是对 HTML 页面进行 iframe，然后设置 user-scalable=yes，（这是一个移动的东西）......我希望有更优雅的东西，但这非常有用且易于构建。

不管怎么说，多谢拉！

也许这就是 Shmiddty 的观点，其中之一是“一只手拍手的声音是什么？” 诸如此类的问题/课程！！！

# c# - 实体框架中唯一字段的选项- dbSet 的导航属性？

> ID：14368937
> 
> 赞同：3
> 
> 时间：2013-01-16T22:18:40.013
> 
> 标签：c#, entity-framework, validation, constraints, unique

经过大量研究，似乎 Entity Framework 4.4 不支持唯一约束。是的，它可以并且应该在数据库中完成，但我更希望它发生在模型验证中，因此对用户的警告更漂亮。

对于程序员来说，能够用 [Unique] 属性装饰属性将是理想的，并且它应该以某种方式成为可能，例如：

```
public class UserGroup
{

    public int UserGroupID { get; set; }

    [Required]
    [Unique]
    public string Name { get; set; }

    [Required]
    public string Description { get; set; }

} 
```

我正在考虑的选项：

1) 让存储库在 SaveChanges() 处做一些额外的工作，扫描已修改实体上的 [Unique] 属性并访问数据库以检查唯一性。缺点：此验证仅在我们调用 SaveChanges() 时发生，理想情况下它可以更早发生（例如，当 UI 控件验证时）。

2) 给 UserGroup 模型一个延迟加载的导航属性给 AllUserGroups：

```
public virtual ICollection<UserGroup> AllUserGroups { get; set; } 
```

然后编程 UniqueAttribute{} 来扫描这个属性并检查值等。

**问题**：如何配置实体框架（代码优先）以将所有记录加载到此“导航属性”中？它似乎只想要一个带有外键等的导航属性，而我只想要它们。

3) 在 UI 中手动编码此验证 - 糟糕且绝对是最后的手段。

**问题**：有没有更好的选择来通过模型级别的验证来强制执行唯一约束？

问候，-布伦丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:52:56.383

我发现了这个，似乎是你要找的那个：

[根据数据库中的其他行验证唯一字段的唯一属性（继承 DataAnnotations.ValidationAttribute）](http://blogs.microsoft.co.il/blogs/shimmy/archive/2012/01/23/validationattribute-that-validates-a-unique-field-against-its-fellow-rows-in-the-database.aspx)

# xcode - xcodebuild 说不包含方案

> ID：14368938
> 
> 赞同：127
> 
> 时间：2013-01-16T22:18:44.397
> 
> 标签：xcode, xcodebuild, bamboo

我有一个古玩问题。

我有一个我一直在使用 XCode IDE 构建的项目，它运行良好。现在我正在设置 Bamboo 来构建项目，因此我正在从命令行构建它。

问题是，如果我从 GIT 中检查我的代码，然后使用 xcodebuild 构建它，它会说找不到该方案，但是如果我打开项目，它会构建，然后如果我尝试从命令行再次构建它使用相同的命令，它可以工作。

当我打开项目时，XCode 有什么魔力，或者我在做一些愚蠢的事情，也许在我的 .gitignore 中排除了一个我不应该做的文件？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-04-17T01:38:15.220

关于 .xcscheme 文件，您绝对走在正确的轨道上——我在设置自己的项目时出现了这个问题！

对于后代，或者至少任何从搜索中得到这里的人，这里有两个版本的东西——“我很忙，所以请提供事实”版本和一个更复杂的讨论和理由。这两个版本都假定您正在尝试从 Workspace 文件构建；如果您不是，那么我很抱歉，因为这主要适用于基于工作空间的项目。

**精简的“修复”版本**

根本原因是方案的默认行为是将方案保持为“私有”，直到它们被明确标记为共享。在命令行启动构建的情况下，Xcode UI 永远不会运行，并且 xcoderun 工具没有自己的 Schemes 缓存可以使用。目标是生成、共享和提交您希望 Bamboo 运行的方案：

1.  在代码的干净工作副本上，打开项目的工作区。
2.  从产品菜单中选择方案 > 管理方案...。
3.  出现为项目定义的方案列表。
4.  定位 Bamboo 尝试运行的 Scheme
5.  确保为该方案选中“共享”框，并将“容器”设置设置为工作区，而不是项目文件本身。
6.  单击“确定”关闭“管理方案”表。
7.  一个新的 .xcscheme 文件已在您的项目中创建，位于 WorkspaceName.xcworkspace/xcshareddata/xcschemes。
8.  将此文件提交到您的存储库并运行 Bamboo 构建。

**更深入的讨论和理由**

Xcode 4 引入了 Workspaces 和 Schemes 作为一种方法来帮助尝试和驯服一些在处理连接相关 Xcode 项目、构建目标和构建配置的机制时所固有的混乱。工作区本身有自己的一组配置数据，描述了它包含的每个较小的数据“盒子”，并充当附加 .xcodeproj 文件的骨架和一组共享配置数据，这些数据镜像到每个开发人员机器或 CI 系统. **这既是工作区的强大之处，也是陷阱——有 1) 有很多方法可以让事情 100% 正确配置，但放入错误的容器中；或者 2) 放入正确的容器中，但配置不正确，从而呈现数据系统的其他部分无法访问！**

Xcode 4 方案的默认行为是在将项目添加到工作区文件时自动生成新方案。那些添加了多个 .xcodeproj 文件的人可能已经注意到，您的方案列表很快就会变得不规则，尤其是在添加项目文件、然后删除、然后再将其读取到同一个工作区时。所有方案，自动生成或手动创建，默认为仅对当前用户可见的“私有”方案，即使 .xcuserdata 文件与项目的数据和配置一起提交也是如此。这是 Bamboo 从 xcodebuild 报告的那个神秘的构建错误的根本原因——因为 Bamboo 通过命令行而不是 Xcode UI 操作构建，所以它没有机会自动生成 Schemes 并且只依赖于那些在工作区本身中定义。

```
xcodebuild -workspace MyWorkspace.xcworkspace -scheme MyApplication -configuration Debug 
```

xcodebuild 去寻找文件 <'scheme' Parameter Value>.xcscheme 存在于 <'workspace' Parameter Value>/xcshareddata/xcschemes。

显然，有很多方法可以同时配置 Bamboo 和工作空间，因此请记住，您的独特配置可能不会 100% 映射到此处显示的内容。关键要点：

1.  Xcode UI 神奇地处理的某些自动化任务无法通过 Xcodebuild CLI 获得。
2.  您可以将方案和构建配置数据附加到“容器层次结构”中的许多地方——确保您的数据在正确的容器中结束（工作区、项目和/或构建目标）
3.  考虑 xcodebuild 工具可能在容器层次结构中的哪个位置查找配置数据；一个很好的指示它将从哪里开始寻找是基于“-workspace”或“-project”参数的使用。

*“共享”框已被选中……现在怎么办？*

我在自己的 Bamboo 实例上遇到了同样的问题；事实证明，在我的存储库中提交的方案已经过时，最新版本的命令行工具并没有很好地处理它。由于这之前存在，我查看了设置以确保该方案没有任何明显的自定义，删除并重新创建了该方案，确保我将其标记为“共享”，并将新的 .xcscheme 文件重新提交到存储库。

如果一切看起来都很好并且重建它并不能解决问题，请仔细检查容器设置——很容易将该方案附加到层次结构中的错误容器！

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-04-01T15:18:54.207

像这样调试问题：

```
xcodebuild -list 
```

或者如果您使用的是工作区（例如使用 pod）

```
xcodebuild -workspace MyProject.xcworkspace -list 
```

如果您的方案未列出，则修复如下：

![在此处输入图像描述](../Images/6a533700fb46672c72707e914b92429f.png)

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2014-01-06T02:03:35.960

大多数答案会建议您使用 Xcode 共享您的方案，然后将更改提交到 repo。当然，这可行，但前提是您有权访问源代码并有权提交更改，以及其他一些假设。

但是有许多“**假设**”需要考虑

*   如果你因为某种原因不能修改 Xcode 项目怎么办？
*   如果你在 CI 服务器上自动创建一个新方案怎么办？
    这实际上经常发生。如果您使用测试自动化框架，如 Calabash，通常最终会复制现有目标，该目标也会自动复制方案，并且不会共享新方案，即使原始方案是。

**红宝石和 xcodeproj 宝石**

我会推荐使用[xcodeproj](http://rubygems.org/gems/xcodeproj) Ruby gem。这是一个非常酷的开源工具，可以帮助您自动化大量与 Xcode 相关的任务。

顺便说一句，这是[CocoaPods](http://cocoapods.org)用来处理 Xcode 项目和工作区的 gem。

所以安装它

```
sudo gem install xcodeproj 
```

然后编写一个简单的 Ruby 脚本来重新共享所有方案，gem 有**recreate_user_schemes**方法用于此目的

```
#!/usr/bin/env ruby
require 'xcodeproj'
xcproj = Xcodeproj::Project.open("MyProject.xcodeproj")
xcproj.recreate_user_schemes
xcproj.save 
```

它不仅将用户文件夹中的方案文件复制到**xcshareddata/xcschemes**，它还通过解析**pbxproj**文件首先创建这些文件。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-16T22:28:45.710

好的，我知道它 2 分钟后，但我发现另一个堆栈溢出说该方案必须设置为共享... [Xcode 4 在哪里存储方案数据？](https://stackoverflow.com/questions/5304031/where-does-xcode-4-store-scheme-data)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-25T17:05:31.287

缺少该方案的一个常见原因是忘记将提交推送到源。如果您收到缺少方案消息，您应该首先验证方案是共享的，然后验证您已提交更改并将它们推送到源服务器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-21T12:40:12.070

我在实施 CI 时遇到了这个错误。上面的问题与我的问题相同，只是我使用的是 Gitlab 自己的 CI 工具。您可以检查 Bamboo 中是否有任何此类文件。我通过对文件
进行一些更改来解决它。 在您通过共享使您可用之后。在 Xcode 中转到并检查共享以共享。**变化**`gitlab-ci.yml`
`scheme``Products>Scheme>Manage Scheme`

 **> 到处设置绝对路径。
> 例如。`xcodebuild clean archive -archivePath /path/to/your/project/build/testDemo -scheme testDemo | xcpretty`
> 在这里，您需要更改`/path/to/your/project/`路径和`testDemo`项目名称。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-21T10:39:29.337

我想为与此线程相关的案例添加解决方案。这个适用于克隆现有项目的您，您需要的所有方案都已共享：

[![在此处输入图像描述](../Images/7af7afe2aad55e003ba7c13beeda0c7d.png)](https://i.stack.imgur.com/PBNT6.png)

，`fastlane lanes`正确显示您的所有车道，包括您的所有方案：

[![在此处输入图像描述](../Images/bea618b811eb53d2f614cf11b03b3917.png)](https://i.stack.imgur.com/aKVps.png)

，但`fastlane gym`只显示主要方案（不是开发和测试方案）：

[![在此处输入图像描述](../Images/07b52c695aca5819714d738c227332d3.png)](https://i.stack.imgur.com/4KQnw.png)

解决方案是取消选中未列出的**方案的共享选项**`fastlane gym`，**然后再次检查**。它将为方案生成 .xcscheme：

[![在此处输入图像描述](../Images/982a59d92397f4097ab3a097f228a072.png)](https://i.stack.imgur.com/09Aix.png)

现在，如果您检查`fastlane gym`，将列出所有方案：

[![在此处输入图像描述](../Images/548b78847290ee4788412623c782f722.png)](https://i.stack.imgur.com/MUiIx.png)

然后您应该将这些 .xcshemes 文件提交到存储库，以便克隆该项目的其他开发人员将获得这些文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-01T03:40:57.757

遇到了同样的问题，但是在使用 xcode 作为主项目的子项目进行构建期间。在 xcode 中独立构建子项目 - 之后此错误消失。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-15T16:53:05.177

对于任何使用 Xcode 11.4 试图在方案上找到“共享”按钮的人，它现在已移至单独的方案中。

1.  选择你想要的方案
2.  按“编辑”
3.  选中“共享”框

[![方案编辑现在包含共享框](../Images/24c42779b034d9769c7fa38303b31e20.png)](https://i.stack.imgur.com/T6uIk.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-02T09:39:18.353

我遇到了这个问题，即使这里的一些答案实际上提供了解决方案，我也不是很清楚。所以我只会再添加一个。简而言之，如何从 excode 共享模式。

导航至`Product`> `Scheme`>`Manage Schemes`

[![在此处输入图像描述](../Images/83d506be5184ea0a94de0d7b8a7d9df2.png)](https://i.stack.imgur.com/LCI73.png)

然后，您将看到一个方案列表，每个方案都表示为是否共享。只需检查您要共享的那些（对于开发和产品构建可能是不同的）

[![在此处输入图像描述](../Images/4b515143ec2f016429bf714ac0a989ee.png)](https://i.stack.imgur.com/a8Ydz.png)

图片取自本文[https://developer.nevercode.io/docs/sharing-ios-project-schemes](https://developer.nevercode.io/docs/sharing-ios-project-schemes)**

# makefile - 命名 make 文件的约定是否使用大写的“m”，例如 Makefile？

> ID：14368941
> 
> 赞同：16
> 
> 时间：2013-01-16T22:18:53.443
> 
> 标签：makefile, capitalization

> **可能重复：**
> [我应该命名“makefile”还是“Makefile”？](https://stackoverflow.com/questions/12669367/should-i-name-makefile-or-makefile)

就其大小写而言，制作文件的标准约定是什么。我看过 Makefile 和 makefile。这取决于语言吗？项目？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T07:05:43.903

您可以使用其中任何一个，但通常`Makefile`优先于`makefile`. 如果两者都`Makefile`在`makefile`同一个目录中，并且您只需键入`make`then 将`makefile`被执行并被`Makefile`忽略。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-16T22:21:44.427

没关系。make 程序会寻找其中任何一个。我个人更喜欢 Makefile，因为我总是在 Linux 上，它首先出现在目录列表中，因为我在所有 .ccp 和 .h 文件上都使用小写字母。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:21:00.717

我相信它通常是大写的。至少在 *nix 系统上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T22:21:12.623

`Makefile`（大写）是 Unix 世界中的标准，其中文件系统区分大小写（即 `makefile`，`MAKEFILE`并且`Makefile`都是不同的文件）。在 Windows 上，这没关系。

# java - 如何确定 Java 函数的副作用？

> ID：14368943
> 
> 赞同：8
> 
> 时间：2013-01-16T22:19:05.863
> 
> 标签：java, eclipse

我正在研究一个对象，特别是它的一个函数，它看起来像这样：

```
public class Dog {
    private ArrayList<Paw> paws;
    private double age;
    private Tongue tongue;

    public Dog(ArrayList<Paw> paws, double age, Tongue tongue) {
        this.paws = paws;
        this.age = age;
        this.tongue = tongue;
    }

    public void bark() {
        // ... about 100 lines of side effects operating
        // on the object's global members ...
    }
} 
```

我真的很想修复这些副作用并将对象重构为只做一件事的函数。

Eclipse 中是否有一个自动化过程来标记可能的副作用？

如果没有，是否有我可以遵循的手动算法，这样我就不会迷失在兔子洞里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T22:24:51.170

我会创建一个单元测试来测试你的旧`Dog`类，包括所有“副作用”（不太清楚你的意思）。

假设您的单元测试通过，您可以开始重构（使用 Eclipse，选择适当的行并使用右键单击，Refactor，Extract Method 可能是您的朋友）并继续使用您的单元测试来检查重构是否破坏了任何东西。

编辑：

要找出还有什么正在更改您`Paw`和`Tongue`类的属性，您可以在 使用的任何属性上设置修改观察点（即在属性上设置断点，右键单击断点，断点属性，取消选中“访问”）`bark()`，然后当您正在调试器中运行您的应用程序，每次更改属性时，调试器都会停止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T22:25:44.980

我不知道自动化过程。

至于手动算法，如果您将所有类字段设为 ，则*大多数*`final`地方都会出错，因为它们被修改为. （另一种方法是重命名它们，但也会标记从它们读取的内容）因此您可以很容易地找到副作用。慢慢重构成更小的函数，直到没有错误。*`bark()``bark()`*

 *ArrayList 爪子*不会*被这个`final`技巧所覆盖，因为你仍然可以从中`add(), remove()`等。所以这可能是一个要重命名的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:26:52.040

> Eclipse 中是否有一个自动化过程来标记可能的副作用？

不，没有。

> 如果没有，是否有我可以遵循的手动算法，这样我就不会迷失在兔子洞里？

您可以从注释 ( `ctrl + /`) 对象的所有全局成员开始。所以在你的函数中，你会有红色下划线的单词，你必须通过参数传递或局部变量来修复。后来取消评论成员。在 Eclipse 中，您还可以使用快捷方式`Ctrl + Shift + M`进行方法提取。对于 refectoring，还有一个非常有用的快捷方式`Ctrl + Shift + R`来更改变量名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-05T14:02:22.007

至少您可以在使用**标记出现**时检查任何直接引用，然后指向任何字段。您还可以在**搜索**菜单中搜索每个字段的写入**权限，***但请注意这不会显示间接更改*。要查找间接更改，您还需要搜索**读取访问权限**，然后找出所有（可变）引用的使用方式。**您也应该对参数执行此操作，以避免类外部**的副作用。最后，应审查对静态方法和字段的任何调用。

否则，不幸的是，我不知道在任何 IDE 中列出（可能的）副作用的任何方式。请注意，对任何对象（例如`Paw`s 列表中的“爪子”）的任何函数调用也可能会产生副作用。这使得几乎不可能检查*每一个*副作用。不过，有更多的见解会很好。

* * *

您可以手动执行以下操作（准备好！）：

首先要做的是最小化状态变化。如果您最小化状态，那么您也会自动最小化对状态的可能更改，即副作用。在这种情况下，随着时间的推移，该字段`age`是一个众所周知的陷阱`age`：您应该记录生日，并在课堂之外或使用接受（当前）日期的函数来计算年龄。*如果您删除所有可能的状态更改，那么您的类实例是不可变的，您无需再担心副作用。*

已经提到了使基本值（整数、字符等）和引用不可变的方法：使它们成为最终字段。但是还有其他事情：`final`如果您还没有将其设计为使用子类进行扩展，您还应该标记您的类。如果类本身不是最终的，那么您可以将特定的函数设为最终的。始终使用正确的访问修饰符公开一组最小的方法。

另一个技巧是[`List.copyOf(Collection)`](https://docs.oracle.com/javase/10/docs/api/java/util/List.html#copyOf(java.util.Collection))在将其分配给该字段时使用给定的一组爪子（假设您当然没有`removePaw`方法）。这会创建一个防御性副本，但前提是认为有必要。但是，为了避免应用程序其他部分的副作用，您应该确保它`Paw`也是不可变的。Guava 和其他库也有不可变的列表，类或构造类的用户都不能更改。

请注意，创建不可变类与类设计直接相关。如果你的狗因为吠叫而有副作用，那么你做错了什么。如果有的话，狗本身不会因为它吠叫而发生显着变化。例如，如果您想计算树皮的数量或响度，**您应该在类实例之外注册它，而不是在**. 总是尽量减少类的功能；它本质上允许您最小化状态变化。

在较新的 Java 版本中，您可以改用记录。这些是默认情况下不可变的数据类。密切相关的想法是 Java 枚举、工厂和工厂方法。如果您想了解更多信息，请阅读最新版本的“Effective Java”。

* * *

如果您没有留下任何状态更改，那么您的对象是不可变的，您不必再担心副作用。请注意，内部创建的实例不需要是不可变的，只要您不在类之外共享它们的引用。问题中显示的`Dog`类将非常适合创建不可变数据类（通常也具有`hashCode`和`equals`方法并标记为`Serializable`）。

如果您仍然有产生副作用的方法，那么您应该使用单元测试对其进行测试。当然，在这个阶段，如果调用者可以执行状态更改的方式数量最小化，并且他们可以进行的更改有明确的界限，那就太好了。*

# html - 对图像精灵使用带有百分比的背景位置

> ID：14368947
> 
> 赞同：3
> 
> 时间：2013-01-16T22:19:30.573
> 
> 标签：html, css, css-sprites

我正在尝试`background-position`在图像精灵中使用具有百分比的属性。虽然它似乎不起作用，即它不会改变背景图像。

你可以在这里看到一个例子：http: [//jsfiddle.net/3UQYg/3/](http://jsfiddle.net/3UQYg/3/)

当我使用像素时，图像会发生变化：请参见此处[http://jsfiddle.net/3UQYg/2/](http://jsfiddle.net/3UQYg/2/)。

我究竟做错了什么？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-18T12:45:01.323

## 背景位置：x% y%；

实际上，百分比背景位置的工作方式如下：

![在此处输入图像描述](../Images/b773270d42ca4d1b6ceb80c7b135eb1f.png)

*   当**横坐标**为`0%`时，图像的左侧对齐容器的左侧。
*   当**横坐标**为`100%`时，图像的右侧与容器的右侧对齐。
*   中间值是线性计算的。

相似地，

*   当**纵坐标**为`0%`时，图像的顶部对齐容器的顶部。
*   当**纵坐标**为`100%`时，图像的底边与容器的底部对齐。
*   中间值是线性计算的。

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T12:13:13.863

确切地。

像素的工作方式与背景位置的百分比不同。总而言之：例如 background-position:30% 10% 会将位于图像 30% 10% 处的点与包含 DIV 或 HTML 标签的 30% 10% 轴对齐。计算百分比数字并不那么明显。

下一篇文章解释了这一切： [http ://www.sitepoint.com/css-using-percentages-in-background-image/](http://www.sitepoint.com/css-using-percentages-in-background-image/)

# ruby - Cucumber/Aruba Thor：在单个场景中测试多个命令，第一次通过，第二次失败

> ID：14368949
> 
> 赞同：1
> 
> 时间：2013-01-16T22:19:35.643
> 
> 标签：ruby, cucumber, thor, aruba

我正在尝试使用 Bundler 和 Thor 编写一个小的 ruby​​ gem 来生成一些模板。我正在用 Cucumber 和 Aruba 编写测试，但无法让它们通过。

我在应用程序中定义了以下 Thor CLI 类：

```
require 'thor'
require 'sleipnir'
require 'sleipnir/generators/layout'
require 'sleipnir/generators/app'

module Sleipnir
  class CLI < Thor

    desc "app", "Generates an app directory and copies the appropriate files"
    def app(app_name)
      Sleipnir::Generators::App.start([app_name])
    end

    desc "layout", "Generates specific layout based on template type"
    def layout(template_type)
      Sleipnir::Generators::Layout.start([template_type])
    end
  end
end 
```

这是`app.rb`文件：

```
require 'thor/group'

module Sleipnir
  module Generators
    class App < Thor::Group
      include Thor::Actions

      argument :app_name, :type => :string
      class_option :template_type, :default => :erb, :required => true

      def self.source_root
        File.dirname(__FILE__)
      end

      def create_app_dir
        empty_directory(app_name)
      end

      def copy_app_scaffold
        directory("app", app_name)
      end
    end
  end
end 
```

和`layout.rb`文件：

```
require 'thor/group'

module Sleipnir
  module Generators
    class Layout < Thor::Group
      include Thor::Actions

      class_option :template_type, :default => :erb, :required => true

      def self.source_root
        File.dirname(__FILE__) + "/template"
      end

      def copy_layout
        template_type = options[:template_type]
        template("layout_template.#{template_type}", "views/layout.#{template_type}")
      end
    end
  end
end 
```

我为该`app`方法编写了一个黄瓜测试，它通过了。但是，该`layout`方法失败了。这是测试：

```
Feature: Generate
  In order to generate templates
  As a CLI
  I want to run the generator

  Scenario: Layout
    When I run `sleipnir app test_app`
    Then the following directories should exist:
      | test_app/views |
    When I run `sleipnir layout --template_type "erb"`
    Then the following files should exist:
      | test_app/views/layout.erb | 
```

测试的第一部分很好地通过了（即创建了目录），但是关于验证文件是否存在的部分失败了。我检查了文件结构，并且`layout_template.erb`文件存在，所以我无法弄清楚为什么它没有正确模板化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T06:18:17.853

不幸的是，Aruba 不支持这一点：[https](https://github.com/cucumber/aruba/issues/140) ://github.com/cucumber/aruba/issues/140 。

但是编写您自己的步骤定义也不错，只要在您传入的命令之前先执行您想要执行的操作即可。有关示例，请参见[https://github.com/cucumber/cucumber/wiki/Step-Definitions](https://github.com/cucumber/cucumber/wiki/Step-Definitions)。

# ruby - 在 mac 10.7 上启动 github gollum 时找不到命令

> ID：14368954
> 
> 赞同：2
> 
> 时间：2013-01-16T22:19:58.823
> 
> 标签：ruby, rubygems, homebrew

我尝试按照以下安装说明进行操作：

[Github 咕噜](https://github.com/github/gollum)

我有一个全新的 Lion 安装并安装了 xcode 命令行工具。然后我做了以下事情：

```
homebrew < -- ran script from website
brew doctor
brew install git
brew install rbenv
brew install ruby-build
echo 'eval "$(rbenv init -)"' >> ~/.bash_profile
rbenv install 1.9.3-p362
rbenv rehash
rbenv global 1.9.3-p362
gem install gollum

mkdir ~/gollum_test
cd ~/gollum_test
git init

gollum 
```

我得到**-bash: gollum: command not found**

我对上述所有工具都是新手，所以我不知道我错过了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T22:42:46.507

解决了，我不得不跑

```
rbenv rehash 
```

再次！

# jquery - 在 jQuery 中删除事件特定事件处理程序的最佳方法

> ID：14368955
> 
> 赞同：0
> 
> 时间：2013-01-16T22:20:02.383
> 
> 标签：jquery

所以，情况就是这样。我有几个相同类型的对象都在监听同一个事件。每个对象的处理程序都操作 DOM 的某些部分。这些对象几乎可以在任何时候重新创建或销毁，当它们被销毁时，它们会占用它们负责的 DOM 的一部分。问题是这些对象的处理程序会在对象被销毁后继续尝试操作 DOM。

下面是我拥有的似乎可以工作的代码。但是我不关心处理程序被销毁的方式，我怀疑它可能对 jQuery 不利。有没有更好的办法？

```
 var ID: "uniqueID",
    connectEvents: function ()
    {
      $(someDiv).on("customEvent", this, this.eventHandler);
    },
    eventHandler: function (e)
    {
        //do some stuff to the DOM
    },
    destroy: function ()
    {
      var gridCell = this;
      if (jQuery(someDiv).data("events"))
      {
         var handlers = jQuery(someDiv).data("events").customEvent
         var handlerIndex = -1;
         $(handlers).each(function (i, handler)
         {
            if (handler.data.ID === ID)
               handlerIndex = i;
         });
         if (handlerIndex > 0)
         {
            handlers.splice(handlerIndex, 1);
         }
      }
      //Destroy some Dom elements
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:26:43.560

假设元素有一个类似的类“测试”，

你可以做的是：

```
$('.test').click(function(){
   $(this).off(); // remove all event handlers assigned to this object with class test that has been clicked.

   $(this).remove(); // removes the element
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:08:59.217

事件处理委托给祖先 div，声明如下：

```
$(someDiv).on("customEvent", this, this.eventHandler); 
```

如果这是附加的唯一语句`this.eventHandler`，并且如果您`eventHandler`在删除目标元素后仍然看到行为，则`somediv` **必须**仍然包含一些其他元素，该元素也将其“customEvent”委托给祖先 div。

根据@charlietfl 的建议，事件命名空间可以很好地解决眼前的问题，但我认为这不是一个完整的解决方案。需要修复一些更基本的东西。

您可能将“customEvent”委托给比您意识到的更多的元素。

# ruby - Ruby：多次重复一个方法并将结果收集到一个数组中

> ID：14368958
> 
> 赞同：1
> 
> 时间：2013-01-16T22:20:12.930
> 
> 标签：ruby, arrays

我有一个返回哈希的方法。我想通过这个方法重复五次，将结果收集到一个数组中。现在，我正在尝试这样：

```
votes = 5.times.collect{ create_vote }.inject{|memo, vote| memo << vote} 
```

这不起作用，我相信它失败了，因为 memo 不是数组。我可以采取另一种方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:25:47.657

是的：

```
votes = 5.times.collect { create_vote } 
```

更一般地说，使用`each_with_object`：

```
votes = 5.times.collect { create_vote }.each_with_object([]) {|o,memo| memo << o } 
```

`each_with_object`是一个添加的方法，因为 Ruby Core 发现`inject`以您打算使用的方式使用它非常普遍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T22:39:03.387

在范围上使用 #map 而不是在固定数字上使用 #times

```
(0..5).map { create_vote } 
```

或者，从时间映射一个数组

```
5.times.map { create_vote } 
```

每个都会给你一个包含 5 个元素的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:24:46.320

怎么样：

```
votes = (1..5).collect { create_vote } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-18T23:46:15.660

我尝试使用接受的答案，但后来[Rubocop](http://rubocop.readthedocs.io/en/latest/)告诉我，这样使用会更快`Array.new`：

```
votes = Array.new(5) { create_vote } 
```

# php - 搜索多个mysql表

> ID：14368960
> 
> 赞同：2
> 
> 时间：2013-01-16T22:20:17.790
> 
> 标签：php, mysql

我目前有这个代码。

```
 switch($search_topic)
            {
                case 'Title':
                    $stmt = $dbh->prepare("SELECT game_id, title, platform_name, author_name, price
                                            FROM games 
                                            WHERE title 
                                            LIKE :search_term");
                break;

                case 'Platform':
                    $stmt = $dbh->prepare("SELECT game_id, title, platform_name, author_name, price
                                            FROM games 
                                            INNER JOIN platforms ON games.platform_id = author.platform_id
                                            WHERE platform_name LIKE :search_term");
                break;
            } 
```

search_topic 变量来自上一个网页上的列表框，标题搜索正常工作，因为它只是搜索一个 MySQL 表。平台搜索有点困难，因为我正在尝试搜索多个表，如果这有意义的话。

游戏表有一个名为“platform_id”的列，它链接到平台表，其中关键字段链接到它所在的平台。那么我将如何从游戏表中获取“platform_id”，然后将其链接到“platforms”，以便我检索“platform_title”，然后使用它进行搜索。

架构：[http ://sqlfiddle.com/#!2/3d3e3/6](http://sqlfiddle.com/#!2/3d3e3/6)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:37:02.957

根据您的小提琴，以下是您的更新：

```
SELECT g.game_id, g.title, p.platform_name, a.author_name, g.price
FROM games g
INNER JOIN platforms p ON p.platform_id = g.platform_id
INNER JOIN author a ON a.author_id = g.author_id
WHERE g.title LIKE 'Skyrim'; 
```

您显然会更改`WHERE g.title LIKE 'Skyrim';`为要过滤的任何字段。所以平台查询将是：

```
SELECT g.game_id, g.title, p.platform_name, a.author_name, g.price
FROM games g
INNER JOIN platforms p ON p.platform_id = g.platform_id
INNER JOIN author a ON a.author_id = g.author_id
WHERE p.platform_name LIKE 'Xbox'; 
```

我还建议您将 CHARSET 更改为 utf8 而不是 latin1，假设这反映了您的生产数据库设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T22:36:46.833

```
SELECT games.game_id, 
games.title, 
games.platform_name, 
games.author_name, 
games.price, 
games.platform_id, 
platforms.platform_id,
platforms.platform_name
FROM games, platforms 
WHERE
games.platform_id = platforms.platform_id
AND
platform.platform_name LIKE %:search_term% 
```

# ios - UICollectionView 总是落后一项

> ID：14368961
> 
> 赞同：0
> 
> 时间：2013-01-16T22:20:18.053
> 
> 标签：ios, objective-c, ios6, uicollectionview

我有一个在情节提要中创建的 UICollectionViewController，并且我有委托方法“didDeselectItemAtIndexPath”。然而，当这个方法被触发时，它总是返回上一次触摸的 indexPath。最终，这意味着第一次触摸不会导致任何事情发生。

示例：
- 用户触摸单元格 2，没有任何反应
- 用户触摸单元格 5，返回单元格 2
- 用户触摸单元格 3，返回单元格 5

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T22:26:18.767

这是正常的。您正在使用“didDeselectItemAtIndexPath”。这意味着你先选择了一些东西，然后当你选择另一个东西时它会触发。你应该使用“didSelectItemAtIndexPath”，一切都会好起来的。

# android - 如何使用 jQuery mobile 模仿 Google Play 的水平 div 滚动？

> ID：14368963
> 
> 赞同：0
> 
> 时间：2013-01-16T22:20:20.863
> 
> 标签：android, iphone, ipad, jquery-mobile

我目前正在探索 jQuery Mobile 的功能。我对 Google Play 商店处理水平滑动的方式很感兴趣，因此，当用户向右滑动点击时，视图应该滑动到下一页，当用户向左滑动点击时，视图应该滚动到上一页，如果有的话。我知道这可以使用本机 jQuery 来完成，但我还不熟悉移动设备上的事件，我确信已经有一个内置的功能。

我想先用 Android 设备试试这个，如果可能的话，用 iPad 和 iPhone。任何人都可以指导我实现这一目标的方法吗？

顺便说一句，我在这里不是在谈论浏览器历史记录，如果可能的话，可能只是一些 div、页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:33:36.447

这是可以做到的，但你会很失望。

可以这样实现：

1.  一个 HTML 中的多个页面。每个页面都将绑定向左滑动和向右滑动。触发事件时，changePage() 函数将转换到上一页/下一页。这听起来很棒，并且在桌面浏览器上运行良好，但在 Android 手机上使用 phonegap 执行时会失败。在 Android 手机上，转换仍然是一个大问题，iOS 的表现更好但不是很多。

    像这样的东西：

    ```
    $('#page-two').on('#page-two', 'swipeleft', function () {
        //next page
        $.mobile.changePage($('#page-three'));
    }).on('#page-two', 'swiperight', function () {
        //prev page
        $.mobile.changePage($('#page-one'), { reverse : true });
    }); 
    ```

    jQuery Mobile 支持滑动事件，因此不需要 3rd 方插件。

2.  使用 jQuery Mobile 轮播插件，例如：http: [//jsfiddle.net/blackdynamo/yxhzU/](http://jsfiddle.net/blackdynamo/yxhzU/)

    原插件：[https ://github.com/blackdynamo/jQuery-Mobile-Carousel](https://github.com/blackdynamo/jQuery-Mobile-Carousel)

    与页面转换不同，这个插件会给你更好的手机感觉。

3.  您选择的任何路径都将通过第二个标题内的导航栏实现：

    ```
    <div data-theme="a" data-role="header">
        <h3>
            First Page
        </h3>
        <a href="#second" class="ui-btn-right">Next</a>
    </div>
    <div data-theme="a" data-role="header">
        <div data-role="navbar">
            <ul>
                <li><a href="#">Page One</a></li>
                <li><a href="#">Page Two</a></li>
                <li><a href="#">Page Three</a></li>
            </ul>
        </div><!-- /navbar -->
    </div> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:34:35.220

解决方案#1——这应该是最简单的方法：

```
 <script>
        $(document).delegate("#homepage", 'pageinit', function (evt) {
            $(this).bind("swipeleft", function (e) {
                $.mobile.changePage("#anotherpage", {
                    transition : 'slide'
                });
            });
        }).delegate("#anotherpage", 'pageinit', function (evt) {
            $(this).bind("swiperight", function (e) {
                $.mobile.changePage("#homepage", {
                    transition : 'slide',
                    reverse    : true
                });
            });
        });         
    </script> 
```

解决方案#2——这个更简单：

```
$('#homepage').bind('swipeleft', function() {
    $.mobile.changePage('#anotherpage', {transition: 'slide', reverse: false});
});

$('#anotherpage').bind('swiperight', function() {
    $.mobile.changePage('#homepage', {transition: 'slide', reverse: true});
}); 
```

# c# - 如何通过解析对象列表来更新 Mongo DB

> ID：14368964
> 
> 赞同：0
> 
> 时间：2013-01-16T22:20:24.353
> 
> 标签：c#, mongodb

我正在使用 c# 其中一个 mongo db 文档就是这样的结构

```
Class QuestionData{
    public Guid Id { get; set; }
    public string Type { get; set; }
    public List<NotesQuestion> Question { get; set; }
} 
```

所以我想做一个更新。我将更新编写如下：

```
var update = Update.Set("Question", data.Question); 
```

“数据”是 QuestionData 的一种。但现在它说 data.Question 的“无效参数”。如果我将其更改为

```
 var update = Update.Set("Question", data.Question.ToJson()); 
```

它没有问题。但我不想将它保存为 json 字符串。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-07T15:11:38.490

用我自己的模型课，

```
internal class QuestionData
{
  [BsonId] public Guid Id { get; set; }
  [BsonElement("type")] public string Type { get; set; }
  [BsonElement("qnotes")] public QuestionNote[] QuestionNotes { get; set; }
}

[BsonNoId] internal class QuestionNote
{
  [BsonElement("q")] public string Question { get; set; }
  [BsonElement("n")] public string Note { get; set; }
} 
```

您可以覆盖整个 bson 数组，例如：

```
// get client, database, collection ...
var col = Database.GetCollection<QuestionData>("questions");
// QuestionNote[] toModifyWith = ... 
var udb = Builders<QuestionData>.Update;
var fdb = Builders<QuestionData>.Filter;
var ur = await col.UpdateManyAsync(fdb.Empty, udb.Set(x => x.QuestionNotes, toModifyWith )); 
```

# c# - 拍摄/选择图片并在 ImageView 中显示而不先保存（使用 MvvmCross）

> ID：14368967
> 
> 赞同：2
> 
> 时间：2013-01-16T22:20:49.823
> 
> 标签：c#, xamarin.ios, xamarin.android, mvvmcross

我想从库中选择一张图片或用相机拍照并将结果显示给视图（ImageView）

但是根据包括[这篇](https://stackoverflow.com/questions/13475896/need-an-example-of-take-a-picture-with-monodroid-and-mvvmcross)文章在内的一些帖子，我使用的 MvxHttpImageView 需要一个 Uri 来显示图像（无论它来自文件系统还是相机）。这意味着，将 Stream 转换为文件并取回 Uri。

我写了一个图片服务来完成这项工作：

```
public class PictureService : IPictureService, 
    IMvxServiceConsumer<IMvxPictureChooserTask>, 
    IMvxServiceConsumer<IMvxSimpleFileStoreService>
{
    private const int MaxPixelDimension = 1024;
    private const int DefaultJpegQuality = 92;

    public void TakeNewPhoto(Action<string> onSuccess, Action<string> onError)
    {
        this.GetService<IMvxPictureChooserTask>().TakePicture(
            PictureService.MaxPixelDimension,
            PictureService.DefaultJpegQuality,
            pictureStream =>
            {
                var newPictureUri = this.Save(pictureStream);
                if (!string.IsNullOrWhiteSpace(newPictureUri))
                    onSuccess(newPictureUri);
                else
                    onError("No picture selected");
            },
            () => { /* cancel is ignored */ });
    }

    public void SelectExistingPicture(Action<string> onSuccess, Action<string> onError)
    {
        this.GetService<IMvxPictureChooserTask>().ChoosePictureFromLibrary(
            PictureService.MaxPixelDimension,
            PictureService.DefaultJpegQuality,
            pictureStream =>
            {
                var newPictureUri = this.Save(pictureStream);
                if (!string.IsNullOrWhiteSpace(newPictureUri))
                    onSuccess(newPictureUri);
                else
                    onError("No photo taken");
            },
            () => { /* cancel is ignored */ });
    }

    private string Save(Stream stream)
    {
        string fileName = null;
        try
        {
            fileName = Guid.NewGuid().ToString("N");
            var fileService = this.GetService<IMvxSimpleFileStoreService>();
            fileService.WriteFile(fileName, stream.CopyTo);
        }
        catch (Exception)
        {
            fileName = null;
        }

        return fileName;
    }

} 
```

但出于隐私原因，我不想将图片保存在文件系统上。工作流程是：

1.  拍摄或选择照片
2.  在屏幕上显示（带有附加信息）
3.  将我的模型保存在将图像发送到云的服务器上：不在设备上跟踪

我的问题是：如何在不保存文件系统的情况下处理包含图片数据的流？

或者

如何使用用户无法访问的临时存储系统（忽略“根”设备案例）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:26:18.073

您可以尝试创建自己的自定义控件`ImageView`：

**1.**使用 a`MemoryStream`将接收到的数据收集到ViewModel 上的`pictureStream`一个属性中，例如`byte[]``MyBytes`

```
pictureStream => {
     var memoryStream = new MemoryStream();
     pictureStream.CopyTo(memoryStream);
     TheRawImageBytes = memoryStream.GetBuffer()
} 
```

哪里`TheRawImageBytes`是：

```
private byte[] _theRawImageBytes;
public byte[] TheRawImageBytes
{
    get { return _theRawImageBytes; }
    set { _theRawImageBytes = value; RaisePropertyChanged(() => TheRawImageBytes); }
} 
```

**2.**创建自己的`MyImageView`派生类`ImageView`，添加构造函数，然后在-上`(context, attr)`公开一个`byte[]`属性，然后使用并从传入字节呈现图片`MyImageView``byte[]``BitmapFactory.DecodeByteArray``SetBitmap`

```
private byte[] _rawImage;
public byte[] RawImage
{
     get { return _rawImage; }
     set 
     {
             _rawImage = value;
             if (_rawImage == null)
                     return;

             var bitmap = BitmapFactory.DecodeByteArray(_rawImage, 0,_rawImage.Length);
             SetImageBitmap(bitmap);
     }
} 
```

**3.**`<yourapp.namespace.to.MyImageView ... />`在axml中使用而不是普通的`<ImageView ... />`

**4.**在 axml 中将 View`byte[]`属性绑定到源 ViewModel`byte[]`属性。

```
local:MvxBind="{'RawImage':{'Path':'TheRawImageBytes'}}" 
```

**5.**就是这样——尽管您可能想要添加一些错误处理并进行一些测试

* * *

这种方法改编自[MvvmCross Android Bind Image from byte[]的答案](https://stackoverflow.com/questions/14194546/mvvmcross-android-bind-image-from-byte)

如该问题所述，另一种方法是使用`ImageView`具有自定义绑定的标准。

* * *

有关基于标准视图/小部件创建自定义视图/小部件的更多信息 - 包括如何`<yourapp.namespace.to.MyImageView ... />`用缩写替换`<MyApp.MyImageView ... />`，请参阅[http://slodge.blogspot.co.uk/2012/10/creating-custom-views-is-easy -to-do.html](http://slodge.blogspot.co.uk/2012/10/creating-custom-views-is-easy-to-do.html)

# algorithm - 计算复杂度？

> ID：14368972
> 
> 赞同：3
> 
> 时间：2013-01-16T22:21:04.503
> 
> 标签：algorithm, sorting, complexity-theory, asymptotic-complexity

我一直在尝试计算以下函数的复杂性：

```
k=n;
while(k>0)
  g(n);
  k=k/2; {Comment: this is integer division, so 1/2=0}
end while;
for(j=0;j<m;j++)
  f(m); 
```

具体来说，while 循环的复杂性。有人告诉我 g(n) 的复杂性是 O(n)，但我不确定它的复杂性是多少，以及我将如何解决它。我已经意识到复杂度不会是 O(0.5n^2)，但我不确定如何计算它，因为每次减半。有人有想法么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:26:32.467

如果 g(n) 是 O(n)，那么你的复杂度是 O(n*log(n))

为了进一步解释，让我们暂时忽略 g(n)

```
k = n;
while(k > 0) {
    k = k / 2;
} 
```

假设 n = 1000

然后我们将得到以下k的值

```
Pass | k
-------------
 0   | 1000
 1   | 500
 2   | 250
 3   | 125
 4   | 62
 5   | 31
 6   | 15
 7   | 7
 8   | 3
 9   | 1
 10  | 0 (stopped) 
```

log(1000) = 9.96 请注意，只需 10 次迭代即可将 k 降至零。这是一个 log(n) 计算复杂度的例子。

然后，当您在循环中添加 g(n) 时，这意味着您为每次迭代添加 O(n)，这给了我们一个总计 O(n*log(n))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T20:43:42.277

while 循环的复杂性显而易见`O(n log n)`。存在`log n`迭代，因为在每次迭代结束时`k`除以 2。要获得迭代次数，请表示`n`为 2 的幂，例如 2^x。如果`2^x=n, then x = log n`. 这就是为什么 while 循环的复杂性是`O(n log n)`. 不要混淆，因为`n`它不是 2 的幂，这意味着它`log n`并不总是一个整数，你应该写，而不是 log n `[log n]`，，其中`[y]`是 的整数部分`y`。您始终可以表示`[log n]`为 a `c* log n`，其中 c 是一个常数，这不会改变算法的复杂性。因此，您不需要`[]`功能并且`O(n log n)`是可以接受且正确的答案。

for 循环的复杂度取决于`f(m)`. 如果 O(f(m)) 为`O(1)`，则循环为 O(m)，但如果`O(f(m))`为`O(m)`，则循环为`O(m^2)`。因为`f(m)`也是算法的一部分，`f(`如果你想确定整个代码的复杂度，你需要知道 ) 的复杂度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T10:59:02.887

您的算法的复杂性是：

您的第一个循环运行 O(logn) 次，每次迭代都必须执行 g(n)。因此需要

```
O(sum{i from 0 to log(n)}{O(g(i))}). 
```

第二个循环运行 m 次。它需要：

```
O(sum{j from 0 to m}{O(f(i))}) 
```

你的算法的总复杂度是：

```
O(sum{i from 0 to log(n)}{O(g(i))}) + O(sum{j from 0 to m}{O(f(i))}) 
```

# actionscript-3 - Flash Youtube 嵌入问题

> ID：14368973
> 
> 赞同：0
> 
> 时间：2013-01-16T22:21:12.070
> 
> 标签：actionscript-3, flash, youtube, embed

我已经将 youtube 视频嵌入到不同页面的不同帧的 flash 文件中，基本上，当我单击显示我的视频的页面时，youtube 视频仍在屏幕上，并且声音继续播放。我希望视频只显示在一帧上，并且当我切换帧时声音停止。这是我的代码：

```
Security.allowDomain("www.youtube.com");

var player : Object;
var mute : Boolean = false;

var loader:Loader = new Loader();
    loader.contentLoaderInfo.addEventListener(Event.INIT, onLoaderInit);
    loader.load(new URLRequest("http://www.youtube.com/apiplayer?version=3"));

playButton.addEventListener(MouseEvent.CLICK, playVideo);
pauseButton.addEventListener(MouseEvent.CLICK, pauseVideo);
muteButton.addEventListener(MouseEvent.CLICK, muteVideo);

function onLoaderInit(event:Event):void {
     addChild(loader);
     loader.content.addEventListener("onReady", onPlayerReady); 
}

function onPlayerReady(event:Event):void {
     player = loader.content;
     player.setSize(520, 265);
     player.x = 230;
     player.y = 370;
     player.cueVideoByUrl("http://www.youtube.com/v/G-P9fO4g2Jc", 0);
}

function playVideo(event:MouseEvent):void {
     player.playVideo();
}    

function pauseVideo(event:MouseEvent):void {
    player.pauseVideo();
}

function muteVideo(event:MouseEvent):void {
    if(!mute){
        player.mute();
        mute = true;
        return;
    }
    else {
        player.unMute();
        mute = false;
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:09:05.160

该`addChild`方法将孩子添加到孔movieClip而不是currentFrame，实际上没有办法将孩子添加到给定帧。

可能的解决方案是：

1.  在需要插入播放器的框架中创建空精灵，并将此精灵用作支架。离开框架时不要忘记停止视频（`Event.REMOVED_FROM_STAGE`例如，您可以收听播放器的事件并在处理程序中停止视频）。

2.  添加`onEnterFrame`事件侦听器并检查`currentFrame`属性，当它是目标帧时添加视频，否则删除视频。

# virtualbox - “错误：'ptrdiff_t' 没有命名类型”在 Ubuntu 12.04 中安装 Berkley DB XML 2.5.16

> ID：14368975
> 
> 赞同：0
> 
> 时间：2013-01-16T22:21:15.653
> 
> 标签：virtualbox, ubuntu-12.04, vagrant, berkeley-db-xml

在虚拟机上使用 vagrant 在 Ubuntu 12.04 中运行 Berkley DB XML 2.5.16 的构建脚本时收到错误：

```
../include/xqilla/framework/XPath2MemoryManager.hpp:90:11: error: 'ptrdiff_t' does not name a type
make[1]: *** [ReferenceCounted.lo] Error 1
make[1]: Leaving directory `/usr/share/dbxml-2.5.16/xqilla/build' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:21:15.653

解决方法是将第 26 行之后的以下行添加到文件 XPath2MemoryManager.hpp 中：

```
#include <cstddef> 
```

该文件的完整路径是：

```
/usr/share/dbxml-2.5.16/xqilla/include/xqilla/framework/XPath2MemoryManager.hpp 
```

归功于[http://tlmaloney.ruhoh.com/sysadmin/installing-bdb-xml-in-ubuntu/](http://tlmaloney.ruhoh.com/sysadmin/installing-bdb-xml-in-ubuntu/)

# ios - 为 segue 控制器设置 webview 委托？

> ID：14368984
> 
> 赞同：0
> 
> 时间：2013-01-16T22:21:37.097
> 
> 标签：ios, uiwebview, uiwebviewdelegate

我有两个由模态转接连接的视图控制器。目标控制器也有一个 UIWebView。

阅读文档我想选择第一个控制器来负责关闭 webview 控制器，我这样做的操作将在 webview 委托方法中。

我正在尝试这个：

第一个控制器：

```
@interface ABISignInViewController : UIViewController <UIWebViewDelegate>
...

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
...
  } else if ([[segue identifier] isEqualToString:@"showWebViewForSignUp"]) {
    ABIWebBrowserViewController *webViewController = (ABIWebBrowserViewController *)segue.destinationViewController;
    [webViewController.webView setDelegate:self];
    [webViewController setUrlString:@"https://myurl"];
  }
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
  NSLog(@"%@", request);
  return YES;
} 
```

第二个控制器启动并开始加载请求的 url：

```
- (void)viewDidAppear:(BOOL)animated {
  NSURL *url = [NSURL URLWithString:self.urlString];
  NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
  [self.webView loadRequest:requestObj];
} 
```

然而，第一个控制器中的委托方法永远不会被调用。有什么方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:26:21.000

为什么不将 URL 作为 NSString 或 NSURL 传递，然后让带有 WebView 的 ViewController 处理委托方法？

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
...
  } else if ([[segue identifier] isEqualToString:@"showWebViewForSignUp"]) {
    ABIWebBrowserViewController *webViewController = (ABIWebBrowserViewController *)segue.destinationViewController;
    webViewController.urlString = @"https://myurl";
  }
} 
```

WebView 视图控制器：

```
- (void)viewDidAppear:(BOOL)animated {
  NSURL *url = [NSURL URLWithString:self.urlString];
  NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
  [self.webView loadRequest:requestObj];
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
  NSLog(@"%@", request);
  return YES;
} 
```

# python - 如何在打印结束时添加句点

> ID：14368986
> 
> 赞同：-3
> 
> 时间：2013-01-16T22:21:45.953
> 
> 标签：python

基本的东西，我收到了一个语法错误。如何在打印行的末尾添加句点？

```
first_name = raw_input("Enter your first name: ")
last_name = raw_input("Enter your last name: ")
print "Enter your date of birth" 
month= raw_input("Month? ")
day= raw_input("Day? ")
year= raw_input("Year? ")

print "Here's your information"
print first_name, "was born on", month, day+',', year. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:22:52.707

您需要将其连接起来：

```
print first_name, "was born on", month, day+',', year, "." 
```

更新：正如@sr2222 指出的那样，这将在句点之前打印一个额外的空间。如果你想避免它（并假设那一年是一个字符串）：

```
print first_name, "was born on", month, day+',', year + "." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:22:38.967

在它周围加上引号。

```
print first_name, "was born on", month, day+',', year +'.' 
```

虽然真的，你应该清理它，因为在一行中组合一堆不同的字符串连接机制很难阅读。

```
print first_name + " was born on " + month + ", " + day + ", " + year + "." 
```

当然，还有[字符串格式化的广阔天地](http://docs.python.org/2/library/string.html#format-examples)。

# google-app-engine - 如何按键选择单个实体（低级 java 数据存储 API）

> ID：14368995
> 
> 赞同：3
> 
> 时间：2013-01-16T22:22:25.763
> 
> 标签：google-app-engine, google-cloud-datastore

我对如何创建一个“键”对象来准确选择我的实体（“客户”）的 1 行有点困惑。

我的代码：

```
Query query = new Query("Customer");
// **** how do I have to create this key ???
Key key = KeyFactory.createKey("Customer", 1);
// ****
FilterPredicate keyFilter =  new FilterPredicate(Entity.KEY_RESERVED_PROPERTY,       FilterOperator.EQUAL, key);
query.setFilter(keyFilter);
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
PreparedQuery pq = datastore.prepare(query);
Entity customer = pq.asSingleEntity();
if  (! (customer == null)) {
    log.info("OK !");
}
else {
    log.info("no customer found");
} 
```

我的结果总是：“找不到客户”。

使用数据存储查看器（我在本地工作）我可以看到 3 行：

*   id/name = 1 email = "你的邮箱" name = "你的名字"
*   id/name = 2 email = "你的邮箱" name = "你的名字"
*   id/name = 3 email = "你的邮箱" name = "你的名字"

我想选择 id/name=1 的客户。我试过了： KeyFactory.createKey("Customer", 1); 和 KeyFactory.createKey("客户", "你的名字");

但没有成功。

当我以编程方式对“客户”进行搜索（asList）并打印我看到的键值时：

*   第 1 行键 = 客户（“您的姓名”）/客户（1）
*   第 2 行键 = 客户（“您的姓名”）/客户（2）
*   第 3 行键 = 客户（“您的姓名”）/客户（3）

键的可打印值格式为：“Entity(name)/Entity(id/name)”

如何在我的代码中创建这样的键值？在 javadoc 我只看到：

*   createKey("种类", id)
*   createKey("种类", "名称")

其他方法需要一个祖先，我没有创建一个祖先....这是我为创建 3 行而执行的代码（它已经执行了 3 次）：

```
Key customerKey = KeyFactory.createKey("Customer", "your name");
Entity customer = new Entity("Customer", customerKey);
customer.setProperty("name", "your name");
customer.setProperty("email", "your email");
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
datastore.put(customer); 
```

提前致谢 ！

问候

最大限度

**换句话说，如何创建一个“toString”给出以下结果的键？**

*   代码：log.info("客户KeyFactory.keyToString = "+KeyFactory.keyToString(key));
*   输出：信息：客户 KeyFactory.keyToString = Customer("your name")/Customer(1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-08T11:47:46.587

实体的创建不正确。您不必自己创建密钥。如果您使用种类和键名或 ID 参数创建实体，则会根据种类和键名或 ID 自动创建一个键。

```
Entity customer = new Entity("Customer", "your name");
customer.setProperty("email", "your email");

DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
datastore.put(customer); 
```

这就是创建所需实体所需的全部内容。

当您提供种类和密钥时，将创建一个子实体。因此，您创建了一个带有“您的名字”的客户，该客户是 ID 为 1 的客户。

要使用密钥获取实体，您只需采用相同的参数来创建密钥。

```
Key key = KeyFactory.createKey("Customer", "your name"); 
```

我更喜欢使用 get()，但我不知道你想做什么。例如获取客户的电子邮件：

```
 Entity e;
    try {
        e = datastore.get(key);

        String myEmail= (String) e.getProperty("your email"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T23:05:45.677

我认为当你有一个密钥时你想使用 get() 而不是 query()。

[https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#get(com.google.appengine.api.datastore.Key)](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#get%28com.google.appengine.api.datastore.Key%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:16:03.693

让我们假设您有一个称为 Java 实体类`Product`，并且您希望检索给定其键即 ID 的唯一记录

该方法看起来像这样：

```
 public Product getProduct(Long id) {

        //Get Persistence Manager
        PersistenceManager pm = ...;

        Key k = KeyFactory.createKey(Product.class.getSimpleName(), id);
        Product product = null;
        try {
           product = pm.getObjectById(Product.class, k);
        } 
        finally {
           pm.close();
        }

    return product;
} 
```

所以在你的例子中，我认为你可以`Product`用你的类名替换。我猜你的班级名称是`Customer`

# c++ - 确定 CPU 缓存中值的值和/或地址

> ID：14368996
> 
> 赞同：1
> 
> 时间：2013-01-16T22:22:35.073
> 
> 标签：c++, c, windows, memory-management, cpu-cache

有没有办法准确地确定当前或所有进程的 CPU 缓存（L1、L2 等）中当前驻留的值、内存地址和/或其他信息？

我已经做了很多阅读，它展示了如何优化程序以更有效地利用 CPU 缓存。但是，我正在寻找一种方法来真正确定某些方法是否有效。

**底线：**是否有可能**100% 确定**哪些可以进入 CPU 缓存，哪些不能进入 CPU 缓存。

搜索此主题会返回有关如何确定缓存大小的多个结果，但不会返回内容。

*编辑：*澄清以下一些评论：由于软件无疑会改变缓存，CPU制造商是否有提供此功能的工具/硬件诊断系统（内置）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:27:21.137

如果不使用专门的硬件，您无法直接检查 CPU 缓存中的内容。运行任何软件来检查 CPU 缓存的行为会改变缓存的状态。

我发现的最佳方法是简单地识别应用程序中的真正热点，并在代码将在生产中运行的硬件上对替代算法进行基准测试（如果您无法控制生产环境，则在一系列可能的硬件上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T22:39:01.097

除了 Eric J. 的回答之外，我还要补充一点，虽然我确信大型芯片制造商确实拥有这样的工具，但像你我这样的普通人不太可能使用这样的“调试”工具，但是即使是这样，它也不会*真正*有多大帮助。

为什么？您不太可能遇到已跟踪到缓存的性能问题，并且使用众所周知的“常识”技术来维持高缓存命中率是无法解决的。

您是否*真的*优化了代码中的所有其他热点，并且 CPU 的缓存行为不佳是问题所在？我非常怀疑这一点。

此外，值得深思的是：您*真的*想将程序的行为优化到只针对一个或两个特定的 CPU 吗？毕竟，缓存算法一直在变化，缓存的参数也是如此，有时会发生巨大变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:53:39.763

如果您有一个运行 Windows 的相对现代的处理器，请查看 [http://software.intel.com/en-us/articles/intel-performance-counter-monitor-a-better-way-to-measure-cpu-利用率](http://software.intel.com/en-us/articles/intel-performance-counter-monitor-a-better-way-to-measure-cpu-utilization) ，看看这是否可以提供您正在寻找的一些东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T23:24:03.887

为一个特定的 CPU 缓存大小进行优化通常是徒劳的，因为当您在不同的 CPU 上执行时，如果您对 CPU 缓存大小的假设是错误的，这种优化就会中断。

但有一条出路。您应该针对某些访问模式进行优化，以允许 CPU 轻松预测接下来应该读取哪些内存位置（最明显的是线性递增读取）。为了能够充分利用 CPU，您应该阅读有关[缓存遗忘](http://en.wikipedia.org/wiki/Cache-oblivious_algorithm)算法的内容，其中大多数算法遵循分而治之的策略，其中问题在一定程度上被划分为子部分，直到所有内存访问完全适合 CPU 缓存。

还值得注意的是，您有一个独立的代码和数据缓存。Herb Sutter 有一个很好的在线[视频](https://www.youtube.com/watch?v=L7zSU9HI-6I)，他在其中深入讨论了 CPU 内部结构。

[Visual Studio Profiler](http://msdn.microsoft.com/en-us/library/bb385772.aspx)可以收集处理内存和 L2 计数器的 CPU 计数器。当您选择检测分析时，这些选项可用。

英特尔还有[一篇在线论文，其中](http://software.intel.com/en-us/articles/intel-performance-counter-monitor-a-better-way-to-measure-cpu-utilization)更详细地讨论了这些 CPU 计数器以及 Windows 和 Linux 的任务管理器向您展示的内容，以及对于当今在许多不同级别上内部异步和并行工作的 CPU 来说这是多么错误。不幸的是，英特尔没有工具可以直接显示这些东西。我知道的唯一工具是 VS 分析器。也许 VTune 也有类似的能力。

如果您已经走到这一步来优化您的代码，那么您也可以研究一下 GPU 编程。您至少需要一个 PHD 来了解 SIMD 指令、缓存位置等，以使您的原始设计可能达到 5 倍。但是通过将你的算法移植到 GPU 上，你可以在一张像样的显卡上花费更少的精力来获得 100 倍的收益。[支持CUDA](http://www.nvidia.com/object/cuda-apps-flash-new.html#)的 NVidia GPU （现在所有出售的显卡都支持它）可以用 C 语言很好地编程。甚至还有托管代码 (.NET) 的包装器来利用 GPU 的全部功能。

[您可以通过使用OpenCL](http://en.wikipedia.org/wiki/OpenCL)保持平台无关，但 NVidia OpenCL 支持非常糟糕。OpenCL 驱动程序至少比其 CUDA 驱动程序慢 8 倍。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T23:25:10.767

Almost everything you do will be in the cache at the moment when you use it, unless you are reading memory that has been configured as "uncacheable" - typically, that's frame buffer memory of your graphics card. The other way to "not hit the cache" is to use specific load and store instructions that are "non-temporal". Everything else is read into the L1 cache before it reaches the target registers inside the CPU itself.

For nearly all cases, CPU's do have a fairly good system of knowing what to keep and what to throw away in the cache, and the cache is nearly always "full" - not necessarily of useful stuff, if, for example you are working your way through an enormous array, it will just contain a lot of "old array" [this is where the "non-temporal" memory operations come in handy, as they allow you to read and/or write data that won't be stored in the cache, since next time you get back to the same point, it won't be in the cache ANYWAYS].

And yes, processors usually have special registers [that can be accessed in kernel drivers] that can inspect the contents of the cache. But they are quite tricky to use without at the same time losing the content of the cache(s). And they are definitely not useful as "how much of array A is in the cache" type checking. They are specifically for "Hmm, it looks like cache-line 1234 is broken, I'd better read the cached data to see if it's really the value it should be" when processors aren't working as they should.

As DanS says, there are performance counters that you can read from suitable software [need to be in the kernel to use those registers too, so you need some sort of "driver" software for that]. In Linux, there's "perf". And AMD has a similar set of performance counters that can be used to find out, for example "how many cache misses have we had over this period of time" or "how many cache hits in L" have we had, etc.