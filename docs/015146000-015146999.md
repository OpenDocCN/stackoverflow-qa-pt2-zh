# StackOverflow 问答 15146000-15146999

# signalr - 信号器捕获保持活动故障/断开连接

> ID：15146002
> 
> 赞同：2
> 
> 时间：2013-02-28T21:29:10.617
> 
> 标签：signalr

所以我的信号器工作正常，将我的数据推送给客户端没有问题。我使用 ajax 调用实现了自己的保持活动状态以保持连接活动。但我一直在阅读，并且有一个我正在尝试的选项：

```
GlobalHost.Configuration.KeepAlive = TimeSpan.FromSeconds(30); 
```

但我的问题是，如果它无法发送保持活动状态，您如何在 javascript 端捕获它？

如果这是服务器推送数据以保持连接处于活动状态，这是否意味着客户端永远不会知道它是否失败了？

或者javascript会抛出connection.error吗？

我希望能够拔出客户端的网络电缆，并在 ​​XX 秒后显示一条消息说网络连接丢失。Atm 我使用我的 ajax 调用来工作，但这是否可以使用 keepalive 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:19:04.300

除了 LongPolling 之外，每个传输都已经实现了这一点。

默认情况下，如果 JS 客户端错过了 2 次保持活动，它将重新连接。

如果您想参与重新连接事件，您可以执行以下操作：

```
$.connection.hub.reconnecting(function() {
    // Your logic
}); 
```

如果您想绑定表明连接可能会重新连接的事件，可以执行以下操作：

```
$.connection.hub.connectionSlow(function() {
    // Your logic
}); 
```

请记住，默认情况下，客户端将在给定时间后停止尝试重新连接，并将转换为断开连接状态以避免不必要的重新连接事件。如果您想确保您的连接始终保持连接，即使有停机时间，请在此处查看我的答案：[客户端重新连接](https://stackoverflow.com/questions/15124716/client-reconnection)

# javascript - javascript计算不起作用

> ID：15146006
> 
> 赞同：0
> 
> 时间：2013-02-28T21:29:26.090
> 
> 标签：javascript

我正在尝试用 js 为我父亲的网站制作一个简单的计算器。

我有一些带有用户输入的 texbox，应该可以很好地计算，但它拒绝工作。我根本无法弄清楚它有什么问题！ [http://jsfiddle.net/xjsc16x/WgKmn/](http://jsfiddle.net/xjsc16x/WgKmn/)

```
function foundationcalc() {
var height = parseFloat(document.getElementById("height").value, 0);
var thickness = parseFloat(document.getElementById("thickness").value, 0);
thickness = thickness / 12;
var length = parseFloat(document.getElementById("length").value, 0);
var width = parseFloat(document.getElementById("width").value, 0);
var calc1 = height * thickness * length
calc1 = calc1 / 27;
var calc2 = height * thickness * width
calc2 = calc2 / 27;
var total = (2 * calc1) + (2 * calc2);
total = parseFloat(Math.round(total * 100) / 100).toFixed(2);
document.getElementById("output").value = total;
} 
```

我最初有`(height * thickness * length) / 27`，但我改变了它，希望这可能是错误。没有骰子。有谁知道一个 javascript 调试器，您可以在其中实时查看变量的值？对我会有很大的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:33:51.240

问题是 jsFiddle 默认将您的代码包装在`onload`处理程序中。将其更改为直接驻留`<head>` [可解决问题](http://jsfiddle.net/WgKmn/3/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T21:43:45.303

您可以简单地添加

```
window.onload = foundationcalc(); 
```

这将在窗口加载时运行脚本。

# db2 - DB2 锁超时

> ID：15146008
> 
> 赞同：0
> 
> 时间：2013-02-28T21:29:32.033
> 
> 标签：db2

我们有一个带有四个克隆的 WebSphere 集群。每个克隆上运行相同的代码。我们让 Quartz 定期启动运行代码的作业。

该代码尝试更新表中的一行，以便只有一个克隆能够成功更新表，然后该克隆将运行其余的作业。就像是：

```
update <table> set status = 'RUNNING' where job_name = 'JOB1' and status = 'STOPPED' 
```

当我们执行更新语句时，我们不会启动事务。

我们有时看到的是所有四个克隆都无法更新表，并且都出现锁定超时错误（sql 代码 -913）。

我们还尝试了另一种方法，即启动事务，选择以查看该行是否标记为正在运行，如果没有，则执行更新并提交；否则回滚。

那有同样的问题。

我们尚未尝试的一种解决方案是将选择修改为“选择更新”，尽管从我的谷歌搜索来看，我怀疑这是否会有所帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:35:23.547

这最终不是问题（这就是我听别人而不自己检查的结果）。

我在我们的开发环境中使用两个克隆对此进行了测试。其中一个克隆偶尔会看到 -913 锁定超时错误，而另一个克隆会成功更新表。除了丑陋的日志消息外，一切正常。

然而，通常我们不会得到 -913 错误，而是一个警告，表明没有从其中一个克隆中更新的行。同样，这种行为很好。

因此，正如我们最初所想的那样，Clockwork-Muse 也建议，以这种方式使用 UPDATE 语句来强制锁定在 DB2 中工作得很好。

# objective-c - 使用 MagicalRecord，如何将数据从 NSArray 中取出并放入 NSManagedObject？

> ID：15146017
> 
> 赞同：-1
> 
> 时间：2013-02-28T21:30:15.003
> 
> 标签：objective-c, core-data, magicalrecord

我正在使用 MagicalRecord 处理 Core Data 对象。我在使用 MR 将它们放入的 NSArray 检索核心数据对象时遇到问题……我似乎无法将数据从数组中取出并放入 NSManagedObject 中，因此我可以使用它。这是我的代码：

```
 //  create the predicate
    NSArray *apptDataArray = [NSMutableArray new];
    NSPredicate *predicate =  ([NSPredicate predicateWithFormat:@"((aStartTime > %@) AND (aStartTime <= %@))", startDate, endDate]);

    //  find all appointments with that selected date
    apptDataArray = [AppointmentInfo MR_findAllWithPredicate:predicate];

    //  now find the appointments for the selected date and put them in the schedule
    if(apptDataArray.count > 0) {
        for (NSManagedObject *AppointmentInfo in apptDataArray) {
            NSLog(@"\n\n-->apptDataArray: %@", apptDataArray);

        }
    } 
```

这是 AppointmentInfo 的定义，它位于不同的类中：

```
@interface AppointmentInfo : NSManagedObject

@property (nonatomic, retain) NSDate * aStartTime;
@property (nonatomic, retain) NSDate * aEndTime;
@property (nonatomic, retain) NSString * aServiceTech;
@property (nonatomic, retain) NSString * aApptKey;
@property (nonatomic, retain) NSDate *aShortDate; 
```

不知何故，我需要获取返回数组中的数据并将其放在 AppointmentInfo 中。我已经尝试了各种排列，查看了谷歌和 SO，但我找不到任何东西。我难住了！我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:52:01.590

我不确定我是否正确理解了您的问题，但是`apptDataArray`fetch 请求的结果只是一个`AppointmentInfo`对象数组，因此您可以使用

```
AppointmentInfo *appt = [apptDataArray objectAtIndex:i]; // 0 <= i < apptDataArray.count 
```

或枚举结果数组的所有对象

```
for (AppointmentInfo *appt in apptDataArray) {
    NSLog(@"startTime=%@, endTime=%@", appt.aStartTime, appt.aEndTime);
} 
```

# java - 在弹簧数据实体中填充“创建”列

> ID：15146022
> 
> 赞同：1
> 
> 时间：2013-02-28T21:30:33.733
> 
> 标签：java, spring, hibernate

```
@javax.persistence.Column(name = "created", nullable = false, insertable = true, updatable = true, length = 19, precision = 0)
@Basic
public Timestamp getCreated() {
    return created;
}

public void setCreated(Timestamp created) {
    this.created = created;
} 
```

我有这个实体，我希望 MySQL 提供创建的时间戳。我试过添加`@GeneratedValue`，`nullable = true`但保存时仍然失败，说值不能为空。

我知道我的实体正在传递 null 因为这是默认值，所以 MySQL 抛出错误，因为我试图传递 null 并且它没有设置为 NULl 字段。

但是，我可以在 java 对象级别上解决这个问题吗？说，`created`保存实体时不提交列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:33:15.293

使用[`@PrePersist`](http://docs.oracle.com/javaee/6/api/javax/persistence/PrePersist.html)处理程序来初始化字段。初始化将在保存实体之前完成，从而避免空指针异常。

```
@PrePersist
protected void beforeCreate() {
    if(created == null)
        created = new Timestamp(System.currentTimeMillis());
} 
```

# c++ - 向量抛出“访问冲突读取位置”异常。C++。对比 2012

> ID：15146027
> 
> 赞同：0
> 
> 时间：2013-02-28T21:31:02.413
> 
> 标签：c++, exception, vector, visual-studio-2012

有问题的向量声明如下：

```
vector<int> lowerList; 
```

如果向量不为空，则使用以下方法清除该向量：

```
if(!lowerList.empty()){
    lowerList.clear();
} 
```

然后使用 0 到 8 个数字填充向量：

```
lowerList.push_back(); 
```

随机选择一个向量元素并移动到使用：

```
if(!lowerList.empty()){

    int element = rand()%lowerList.size();

    int lowerIndex = lowerList.at(element);

    MoveTo(lowerIndex, currentX, currentZ);
} 
```

唯一一次访问向量是这样的：

```
if(lowerList.empty()){
    return true;
}else
    return false; 
```

我收到一个运行时错误，它说：

Engine.exe 中 0x00C702C8 处的未处理异常：0xC0000005：访问冲突读取位置 0x0870249C。

但据我所知，我访问向量的方式没有任何问题。

谢谢。

# php - 在 PHP 中解码文件的 htmlentities

> ID：15146037
> 
> 赞同：1
> 
> 时间：2013-02-28T21:32:07.237
> 
> 标签：php, xml, html-entities

如何在 PHP 中转换/解码文件内容 (XML) 的 html 实体。

我试图在命令行上运行它：

```
perl -MHTML::Entities -ne 'print decode_entities($_)' /apps/www/mydir/xmlfiles/p34580600.xml >> /apps/www/mydir/xmlfiles/p34580600_1.xml 
```

它可以在命令行上正常运行，但是当我尝试在 PHP 中调用它时：

```
system("perl -MHTML::Entities -ne 'print decode_entities($_)' /apps/www/mydir/xmlfiles/p34580600.xml >> /apps/www/mydir/xmlfiles/p34580600_6.xml"); 
```

它创建文件，但它是空的。我尝试使用 html_entity_decode 但 XML 文件太大了。至少20兆。

非常感谢任何帮助或建议。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:45:34.870

尝试在系统调用中转义 $ 。php 可能正在寻找一个变量 $_ 因为您对字符串命令使用双引号。

# jquery - 如何在 jQuery 中复制文本框值？

> ID：15146040
> 
> 赞同：0
> 
> 时间：2013-02-28T21:32:20.060
> 
> 标签：jquery, html

我这里有一个例子：

[http://jsfiddle.net/nLMPe/3/](http://jsfiddle.net/nLMPe/3/)

是否有类似的东西`.html()`也会从文本框中复制带有用户输入值的值？

我将可能使用大量的文本框，因此`.val()`对于每个单独的文本框都不是一个实用的解决方案。

--寻找一个`.html()`也可以从文本框和文本区域复制值的替代方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:34:04.867

是的，您应该使用[`.val()`](http://api.jquery.com/val/)表单元素。

# c++ - HDF5 复合类型 Native vs. IEEE

> ID：15146041
> 
> 赞同：5
> 
> 时间：2013-02-28T21:32:28.863
> 
> 标签：c++, c, hdf5, dataformat

我刚刚拿起 HDF5，我对为内存创建数据和为文件创建数据之间的区别有点困惑。有什么不同？

在[本](http://www.hdfgroup.org/ftp/HDF5/examples/examples-by-api/hdf5-examples/1_8/C/H5T/h5ex_t_cmpd.c)例中，创建复合类型数据需要在内存中创建数据并放置在文件中：

```
 /*
 * Create the memory data type. 
 */
s1_tid = H5Tcreate (H5T_COMPOUND, sizeof(s1_t));
H5Tinsert(s1_tid, "a_name", HOFFSET(s1_t, a), H5T_NATIVE_INT);
H5Tinsert(s1_tid, "c_name", HOFFSET(s1_t, c), H5T_NATIVE_DOUBLE);
H5Tinsert(s1_tid, "b_name", HOFFSET(s1_t, b), H5T_NATIVE_FLOAT);

/* 
 * Create the dataset.
 */
dataset = H5Dcreate(file, DATASETNAME, s1_tid, space, H5P_DEFAULT);

/*
 * Wtite data to the dataset; 
 */
status = H5Dwrite(dataset, s1_tid, H5S_ALL, H5S_ALL, H5P_DEFAULT, s1); 
```

[但是，在这里](http://www.hdfgroup.org/ftp/HDF5/examples/examples-by-api/hdf5-examples/1_8/C/H5T/h5ex_t_cmpd.c)的另一个例子中，作者还为文件创建了一个复合数据，它指定了不同的数据类型。例如，在为内存创建数据类型时，serial_no 使用**了 H5T_NATIVE_INT**类型，但在为文件创建数据类型时，serial_no 使用**了 H5T_STD_I64BE**。他为什么这样做？

```
 /*
 * Create the compound datatype for memory.
 */
memtype = H5Tcreate (H5T_COMPOUND, sizeof (sensor_t));
status = H5Tinsert (memtype, "Serial number",
            HOFFSET (sensor_t, serial_no), H5T_NATIVE_INT);
status = H5Tinsert (memtype, "Location", HOFFSET (sensor_t, location),
            strtype);
status = H5Tinsert (memtype, "Temperature (F)",
            HOFFSET (sensor_t, temperature), H5T_NATIVE_DOUBLE);
status = H5Tinsert (memtype, "Pressure (inHg)",
            HOFFSET (sensor_t, pressure), H5T_NATIVE_DOUBLE);

/*
 * Create the compound datatype for the file.  Because the standard
 * types we are using for the file may have different sizes than
 * the corresponding native types, we must manually calculate the
 * offset of each member.
 */
filetype = H5Tcreate (H5T_COMPOUND, 8 + sizeof (hvl_t) + 8 + 8);
status = H5Tinsert (filetype, "Serial number", 0, H5T_STD_I64BE);
status = H5Tinsert (filetype, "Location", 8, strtype);
status = H5Tinsert (filetype, "Temperature (F)", 8 + sizeof (hvl_t),
            H5T_IEEE_F64BE);
status = H5Tinsert (filetype, "Pressure (inHg)", 8 + sizeof (hvl_t) + 8,
            H5T_IEEE_F64BE);

/*
 * Create dataspace.  Setting maximum size to NULL sets the maximum
 * size to be the current size.
 */
space = H5Screate_simple (1, dims, NULL);

/*
 * Create the dataset and write the compound data to it.
 */
dset = H5Dcreate (file, DATASET, filetype, space, H5P_DEFAULT, H5P_DEFAULT,
            H5P_DEFAULT);
status = H5Dwrite (dset, memtype, H5S_ALL, H5S_ALL, H5P_DEFAULT, wdata); 
```

这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T02:27:58.793

来自[http://www.hdfgroup.org/HDF5/doc/UG/UG_frame11Datatypes.html](http://www.hdfgroup.org/HDF5/doc/UG/UG_frame11Datatypes.html)：

> H5T_NATIVE_INT 对应于 C int 类型。在基于 Intel 的 PC 上，此类型与 H5T_STD_I32LE 相同，而在 MIPS 系统上，这将等效于 H5T_STD_I32BE。

也就是说，H5T_NATIVE_INT 在不同类型的处理器上具有不同的内存布局。如果您的数据只在内存中使用，这意味着您的数据不会从这台机器中流出，您可能希望使用 H5T_NATIVE_INT 以获得更好的性能。

但是如果你的数据将被保存到文件中，并且将被不同的系统使用，你必须指定某种 int 类型来保持你的数据可以被正确读取，例如 H5T_STD_I64BE 或 H5T_STD_I32LE。如果您使用 H5T_NATIVE_INT，并且您在基于 Intel 的 PC 上创建了一个数据文件，则该编号将保存为 H5T_STD_I32LE。当这个文件被 MIPS 系统使用时，它将读取的数字为 H5T_STD_I32BE，这不是预期的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-27T07:00:33.570

这里的另一个答案是缺少一些关键思想，使得使用 HDF5 数据类型看起来比实际更难。

首先，NATIVE 类型只是 C 类型在该平台上映射到的别名（在构建 HDF5 库时会检测到这一点）。如果您在代码中使用它们并查看您使用 h5dump 工具创建的文件，您将不会看到 NATIVE 数据类型，而是会看到真正的数据类型（H5T_STD_I32LE 或诸如此类）。诚然，这些 NATIVE 类型有点令人困惑，但它们便于在 C 类型和 HDF5 数据类型之间进行映射，而无需知道您所在系统的字节顺序。

我想澄清的另一个误解是，库会在合理的情况下为您转换类型。如果数据集包含 H5T_STD_I32BE 值，并且您在 little-endian 系统上声明 I/O 缓冲区为 H5T_NATIVE_INT，则 HDF5 库将为您将 big-endian 数据集整数转换为内存中 little-endian 整数。您不需要自己执行字节交换。

这是一个简单的思考方法：

*   在调用 H5Dcreate() 时声明**数据集的存储数据类型。**
*   在调用 H5Dread() 和 H5Dwrite() 时声明**I/O 缓冲区的数据类型。**

同样，如果这些不同并且类型转换是合理的，则数据将在读/写调用期间进行转换。

请注意，这种类型转换可能会对时间要求严格的应用程序产生性能影响。如果将写入和读取数据的平台在字节顺序或字长上不同，您可能希望显式设置数据类型而不是使用 NATIVE 别名，以便强制转换在不太重要的平台上进行。

示例：假设您有一个 BE 写入器和 LE 读取器，并且数据到达缓慢但读取必须尽可能快。在这种情况下，您需要显式创建数据集来存储 H5T_STD_I32LE 数据，以便在编写器上进行数据类型转换。

最后一件事——在构造复合类型时，最好使用 HOFFSET(s,m) 宏而不是手动计算偏移量。它更易于维护，您的代码看起来会更好。

如果您想了解有关 HDF5 数据类型的更多信息，请在此处查看用户指南的第 6 章：https: [//support.hdfgroup.org/HDF5/doc/UG/HDF5_Users_Guide-Responsive%20HTML5/index.html](https://support.hdfgroup.org/HDF5/doc/UG/HDF5_Users_Guide-Responsive%20HTML5/index.html)

您还可以在此处查看参考手册中的 H5T API 文档：https: [//support.hdfgroup.org/HDF5/doc/RM/RM_H5Front.html](https://support.hdfgroup.org/HDF5/doc/RM/RM_H5Front.html)

# php - Silex 设置因 MAMP 失败，因为找不到 mod_access.so？

> ID：15146042
> 
> 赞同：1
> 
> 时间：2013-02-28T21:32:35.750
> 
> 标签：php, apache, mamp, silex, mod-access

我已经下载了[Silex](http://silex.sensiolabs.org/)，我正在尝试让它与 MAMP 一起运行。但是，当我运行 Silex 时（并且**仅**在我运行 Silex 时），Apache 不会启动。在控制台中，我看到：

`httpd: Syntax error on line 238 of /Applications/MAMP/conf/apache/httpd.conf: Cannot load /Applications/MAMP/Library/modules/mod_access.so into server: dlopen(/Applications/MAMP/Library/modules/mod_access.so, 10): image not found logout`

谷歌搜索错误会导致信息表明这是一个已知的错误，但我找不到实际*该怎么做*。

Silex 在运行时将我的 httpd.conf 暂时从[这个](http://pastebin.com/53rL9gbY)更改为[这个](http://pastebin.com/UsKSuvBW)。在它变回来后，退出 Silex 后，Apache 再次启动。

Apache 是 2.2.22 版本。

# ms-access - 来自类的 VBA 调用属性

> ID：15146044
> 
> 赞同：3
> 
> 时间：2013-02-28T21:33:00.527
> 
> 标签：ms-access, vba

在 VBA 中，我想`Property Let()`从我的类构造函数中调用 a 而不仅仅是在构造函数中设置变量。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T21:49:22.540

除非我误解了您的问题，否则您正在寻找`Me`关键字。

```
Option Explicit

Dim l_ As Long

Private Sub Class_Initialize()
    Me.l = 5
End Sub

Public Property Let l(newl As Long)
    l_ = newl
End Property 
```

# linux - Linux 中使用 systemd 的启动脚本

> ID：15146049
> 
> 赞同：17
> 
> 时间：2013-02-28T21:33:09.977
> 
> 标签：linux, bash, startup, boot, systemd

请问下面这个启动服务，运行一次没有报错，但是下面的服务器脚本没有运行！

```
ln /lib/systemd/aquarium.service aquarium.service
systemctl daemon-reload
systemctl enable aquarium.service
systemctl start aquarium.service 
```

谢谢

**水族馆服务：**

```
[Unit]
Description=Start aquarium server

[Service]
WorkingDirectory=/home/root/python/code/aquarium/
ExecStart=/bin/bash server.* start
KillMode=process

[Install]
WantedBy=multi-user.target 
```

**这是 server.sh 脚本**

```
#!/bin/bash

PID=""

function get_pid {
   PID=`pidof python ./udpthread.py`
}

function stop {
   get_pid
   if [ -z $PID ]; then
      echo "server is not running."
      exit 1
   else
      echo -n "Stopping server.."
      kill -9 $PID
      sleep 1
      echo ".. Done."
   fi
}

function start {
   get_pid
   if [ -z $PID ]; then
      echo  "Starting server.."
      ./udpthread.py &
      get_pid
      echo "Done. PID=$PID"
   else
      echo "server is already running, PID=$PID"
   fi
}

function restart {
   echo  "Restarting server.."
   get_pid
   if [ -z $PID ]; then
      start
   else
      stop
      sleep 5
      start
   fi
}

function status {
   get_pid
   if [ -z  $PID ]; then
      echo "Server is not running."
      exit 1
   else
      echo "Server is running, PID=$PID"
   fi
}

case "$1" in
   start)
      start
   ;;
   stop)
      stop
   ;;
   restart)
      restart
   ;;
   status)
      status
   ;;
   *)
      echo "Usage: $0 {start|stop|restart|status}"
esac 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-28T21:47:23.687

尝试使用“Type=forking”并使用完整的文件名。

```
[Unit]
Description=Start aquarium server

[Service]
WorkingDirectory=/home/root/python/code/aquarium/
Type=forking
ExecStart=/bin/bash server.sh start
KillMode=process

[Install]
WantedBy=multi-user.target 
```

如果它不起作用，请发布此命令的输出：

```
# journalctl -u aquarium.service 
```

# java - Java中的箭头操作符'->'有什么作用？

> ID：15146052
> 
> 赞同：231
> 
> 时间：2013-02-28T21:33:17.513
> 
> 标签：java, intellij-idea, apache-commons, java-8, apache-commons-collection

在浏览一些代码时，我遇到了箭头运算符，它到底是做什么的？我认为Java没有箭头运算符。

```
return (Collection<Car>) CollectionUtils.select(listOfCars, (arg0) -> {
        return Car.SEDAN == ((Car)arg0).getStyle();
}); 
```

***详细信息**：Java 6、Apache Commons Collection、IntelliJ 12*

***更新/回答：**事实证明 IntelliJ 12 支持 Java 8，它支持 lambda，并且正在“折叠”谓词并将它们显示为 lambda。下面是“未折叠”的代码。*

```
return (Collection<Car>) CollectionUtils.select(listOfCars, new Predicate() {
    public boolean evaluate(Object arg0) {
        return Car.SEDAN == ((Car)arg0).getStyle();
    }
}); 
```

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-02-28T21:35:27.023

这是新 lambda 表达式语法的一部分，将在 Java 8 中引入。有几个在线教程可以掌握它，这里有一个[链接](http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)。基本上，`->`将参数（左侧）与实现（右侧）分开。

使用 lambda 表达式的一般语法是

`(Parameters) -> { Body }`其中`->`分隔参数和 lambda 表达式主体。

参数用括号括起来，这与方法相同，lambda 表达式主体是用大括号括起来的代码块。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2017-08-30T11:59:52.537

当您想要实现功能接口时，这也很有用

```
Runnable r = ()-> System.out.print("Run method"); 
```

相当于

```
Runnable r = new Runnable() {
        @Override
        public void run() {
            System.out.print("Run method");
        }
}; 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-02-28T21:42:46.413

我相信，这个箭头的存在是因为你的 IDE。IntelliJ IDEA 用一些代码来做这样的事情。这称为代码折叠。您可以单击箭头将其展开。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-02-28T21:37:13.203

这是一个 lambda 表达式。

这意味着，在 listOfCars 中，arg0 是该列表的项目之一。他将要使用该项目，因此->，括号内的任何内容。

在此示例中，他将返回符合条件的汽车列表

```
Car.SEDAN == ((Car)arg0).getStyle(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-25T08:18:01.100

**在 java 8 中添加了用于 lambda 表达式的**新运算符

 **Lambda 表达式是**方法编写的简写方式。**
间接用于实现[功能接口](https://stacktraceguru.com/java-8-functional-interface?utm_source=stackoverflow&utm_medium=post)

**主要语法：（参数）-> { 语句；}**

您应该了解一些[编写有效 lambda 表达式](https://stacktraceguru.com/java-lambda-expression?utm_source=stackoverflow&utm_medium=post#thinksToKnowAboutLambda)的基本规则。**

# c# - OleDb ORDER BY RND() 不起作用（C#）

> ID：15146053
> 
> 赞同：0
> 
> 时间：2013-02-28T21:33:23.517
> 
> 标签：c#, dataset, sql-order-by, oledb, oledbcommand

您好，感谢您的帮助。

我在我的数据集数据表查询（通过向导）中使用以下代码按随机（ID 列）排序。

```
SELECT        ID, Q, A_1, A_2, A_3, A_4, Correct
FROM            Quiz
ORDER BY RND(Quiz.ID) 
```

当我在 Query-builder(in C#) 中测试此代码时可以正常工作，但是当我运行我的项目时，此代码不起作用并且不会随机加载。我使用加载代码：

```
this.quizTableAdapter.Fill(this.dBDataSet.Quiz); 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:29:04.133

没有错误。Just Don't Order random and order from 1 to ... 。我正在使用 Sqlite。

# python - 使用管理员的 django-taggit 出错

> ID：15146056
> 
> 赞同：1
> 
> 时间：2013-02-28T21:33:28.460
> 
> 标签：python, django, python-2.7

在一个 Django 项目中，我安装了 django_taggit。当我同步我的项目时，我收到了这个错误。

```
AttributeError: 'TaggableManager' object has no attribute 'related' 
```

我的models.py是这样的......

```
from taggit.managers import TaggableManager

class Post(models.Model):
    title = models.CharField(max_length=100)
    tags = TaggableManager() 
```

和 admin.py 类似的东西......

```
from django.contrib import admin

admin.site.register(Post) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:26:09.867

Django 管理员正在尝试使用 TaggableManager 来管理您的帖子对象。使用自定义管理器时需要小心；正如[文档](https://docs.djangoproject.com/en/dev/topics/db/managers/#modifying-initial-manager-querysets)指定的那样：

> 如果您使用自定义 Manager 对象，请注意 Django 遇到的第一个 Manager （按照它们在模型中定义的顺序）具有特殊状态。Django 将类中定义的第一个管理器解释为“默认”管理器，Django 的几个部分（包括转储数据）将专门为该模型使用该管理器。因此，最好谨慎选择默认管理器，以避免覆盖 get_query_set() 导致无法检索您想要使用的对象的情况。

解决此问题的一种简单方法是首先手动指定`Post.objects`：

```
class Post(models.Model):
    title = models.CharField(max_length=100)
    objects = models.Manager()
    tags = TaggableManager() 
```

# c++ - 运行后台进程linux simple shell。C++

> ID：15146060
> 
> 赞同：0
> 
> 时间：2013-02-28T21:33:33.153
> 
> 标签：c++, linux, waitpid

我正在 linux 中创建一个简单的 shell，但无法在后台运行命令。

到目前为止，这是我的代码：

```
create command,argv and check if it is to be ran in the background &
enter this code:

if(strcmp(command,"cd")==0)
{        
  chdir(argv[1]);

}
else if(strcmp(command,"clr") == 0)
{
  if ((pid = fork()) == 0) 
  {        
     execvp("clear",argv);
  }
  wait(&status);
}
else
{      
   if ((pid = fork()) == 0)
{        
  execvp( prog, argv );        
}
  wait(&status);

} 
```

command 和 argv 是我从用户那里得到的。

如果“&”是命令的最后一部分，我需要在后台运行命令。我已经用 bg 的布尔变量检查了这一点。但我在使用 WAITPID() 函数时遇到问题，我不确定它的去向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:26:19.107

我猜你的问题是，如果你最终`waitpid()`直接调用，你会阻塞，并且进程并没有真正在后台运行。您可以通过两种方式处理此问题。

*   选择1：避免这个问题。叫 fork 一次后，让孩子再 fork 一次。让孙子执行命令，让子子退出。父母像以前一样等待孩子，但孙子正在后台执行命令。孙子进程将被该`init`进程收割。

*   选择 2：注意孩子完成的异步通知。当子进程死亡时，父进程将收到`SIGCHLD`信号。让信号处理程序注意到这个信号并收获孩子。这可能需要您重新构建代码，以便同步服务员实际接收来自信号处理程序的同步通知。然后，您需要一种信号处理程序机制来区分前台子项和后台子项，并且只为前台子项发送同步通知。

# ios - Apple 的外部配件（蓝牙）仅适用于 MFI 设备？

> ID：15146066
> 
> 赞同：6
> 
> 时间：2013-02-28T21:33:50.047
> 
> 标签：ios, bluetooth, external-accessory

我的学士学位论文的目标是通过蓝牙适配器将光串行设备连接到 iPad。目前我正在努力解决苹果的限制。我经常在网上看到我可以使用[支持的配置文件](http://support.apple.com/kb/ht3647)连接到至少支持其中一个的任何设备。但苹果的技术[FAQ](https://developer.apple.com/library/ios/#qa/qa1657/_index.html#//apple_ref/doc/uid/DTS40010232)指出，*“External Accessory框架旨在让iOS应用程序只能与在苹果的MFi被许可人计划下开发的硬件配件进行通信”*。我不认为那些在这里写信的人只是为了好玩而撒谎。

任何人都可以根据经验告诉我它是否可以与非 MFi 配件一起使用，这就是重点吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T21:49:29.530

该`External Accessory`框架确实仅适用于 MFi，但您有两种选择：

1.  越狱（我不能在那里给你任何建议）。

2.  改为使用`CoreBluetooth`。

我在自己的应用程序中使用过 CoreBluetooth，它可以完成工作，具体取决于您要传输的数据量。我不知道什么是光串行设备，您需要多少数据，但我们正在讨论有效地按字节顺序传输数据。 `CoreBluetooth`与蓝牙 4.0 LE 设备一起运行，现在是 iPhone 4S 之后（包括）发布的任何 iOS 设备。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T22:04:26.643

某些类型的 BT 设备（即免提模块、BT 耳机）当然不需要是 MFi。

另一方面，串行通信则完全不同。BT 配件必须执行一个识别过程——通常使用识别芯片。

有趣的是，SPP（串行端口配置文件）甚至没有列在支持的配置文件下。

但是你可以找到一些 MFi GPS 模块。

而且这个模块也很有意思：[OEM蓝牙iPhone / iOS Accessory Module OBS414](http://www.connectblue.com/products/classic-bluetooth-products/classic-bluetooth-modules/bluetooth-iphone-ios-accessory-module-obs414/)

不过，您必须先进入 MFi 程序，然后才能获得技术规格。否则制造商将违反 NDA。

关于如何通过 BT 进行通信还有另一种解决方法：您始终可以在一侧（音频 BT 链接）和应用程序中的软件对应物实现硬件 FSK（或类似调制解调器）。

# css - 主 div 后面的图像阴影

> ID：15146069
> 
> 赞同：0
> 
> 时间：2013-02-28T21:33:51.293
> 
> 标签：css, internet-explorer, position, shadow

我有以下 HTML 源代码：

```
 <div id="page">
        <div id="header">
            <!-- end header div -->
        </div>
        <div id="dropdown">
       <!--navigator menu is here!-->
        </div>

    <div id="main">
 <!--main is here!-->
     </div>
       <div id="sidebar">
           <!--sidebar menu is here!--></div>
        <div id="footer">

        </div>
        <!-- end page div -->
    </div>
    <div id="leftshadow"></div>
    <div id="rightshadow"></div>
</body> 
```

这是CSS源

```
/* html selectors ---- */

html, body {
    font-family: 'Arial Unicode MS';
    margin: 0;
    padding: 0;
    background-repeat: repeat-x;
    background-color: white;
    direction: rtl;
    font-size: 10.3pt;
}

/*page -----------*/
#page {
    width: 900px;
    padding: 0px;
    margin: 0 auto;
    direction: rtl;
    position: relative;
    z-index: 100;
    z-index: 5;
    background-image: url("images/bgimage.png");
}

#leftshadow {
    width: 100px;
    height: 900px;
    background-image: url("images/leftshadow.png");
    position: absolute;
    right: 1220px;
    z-index: none;
    top: -50px;
}

#rightshadow {
    width: 100px;
    height: 900px;
    background-image: url("images/rightshadow.png");
    position: absolute;
    right: 345px;
    z-index: none;
    top: -25px;
}

/* header ---------- */

#header {
    height: 110px;
    top: 0px;
    line-height: 30px;
    background-image: url("images/header.png");
    background-position-x: center;
    background-repeat: repeat-x;
}

/* main -------------- */

#main {
    line-height: 21px;
    font-family: arial;
    width: 625px;
    padding: 30px;
    position: relative;
    right: 205px;
    padding-bottom: 80px;
    direction: rtl;
    top: 42px;
    padding-right: 60px;
    min-height: 750px;

      text-align: justify;

} 
```

通常我得到这个结果![我想要的是](../Images/08008281210395664feecdb230ea1430.png)

但是在 Internet-Explorer 我得到了这个结果![我得到了什么](../Images/b934d50e99a649fc194ff7501e126415.png)

我知道如果我将插入

```
 <div id="leftshadow"></div>
         <div id="rightshadow"></div> 
```

******这里是活的例子！[http://lawb.co.il/](http://lawb.co.il/) ******

进入#page Div问题可以解决，但唯一的问题是阴影比内容更容易，而不是被他束缚

你能帮我解决这个问题吗？

希望得到帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:04:05.337

[当您可以使用 CSS3 box-shadow](http://www.w3schools.com/cssref/css3_pr_box-shadow.asp)时，为什么要使用图像来创建阴影？

如果您要使用这种方法，我会像这样更改您的 HTML 结构：

```
<div id="page">
    <div id="leftshadow"></div>
    <div id="header">
        <!-- end header div -->
    </div>
    <div id="dropdown">
        <!--navigator menu is here!-->
    </div>

    <div id="main">
        <!--main is here!-->
    </div>
    <div id="sidebar">
        <!--sidebar menu is here!-->
    </div>
    <div id="footer">
        <!-- footer -->
    </div>
    <!-- end page div -->
    <div id="rightshadow"></div>
</div> 
```

然后将右阴影 div 向右浮动，将左阴影 div 向左浮动。很可能您会看到不一致的地方，因为您没有使用重置，并且东西是相对定位的。`#page`如果容器内部不需要绝对定位，您真的不需要定位所有相对位置和阴影。

# c# - 较大数据集子集视图的设计模式

> ID：15146071
> 
> 赞同：2
> 
> 时间：2013-02-28T21:33:51.930
> 
> 标签：c#, .net, design-patterns, struct

我有一个由数千个中等大小（数百字节）对象组成的数据结构，每个对象代表一个更大数据集的一个子集。这不是最优的，原因有几个（分析大范围时的复杂性、垃圾收集器的压力等）

从概念上讲，您可以想象代表一天的气象数据的对象，而整个数据集是一年的数据（比如说）。简单的例子：

```
class YearData
{
   private readonly DayData[] days = new DayData[365];
   public DayData GetDayData(int dayNumber)
   {
      return days[dayNumber];
   }
}

class DayData
{
   private readonly double[] temperatures = new double[24];
   public double GetTemperature(int hour)
   {
      return temperatures[hour];
   }     
   public void SetTemperature(int hour, double temperature)
   {
      temperatures[hour] = temperature;
   }
} 
```

在重构工作中，我尝试将数据移动到表示整个数据集的单个对象，但为了保持其余代码不变（并且简单），我需要表示数据子集/段的对象。例子：

```
class YearData
{
   private readonly double[] temperatures = new double[365*24];   

   public DayData GetDayData(int day)
   {
      return new DayData(this, day);
   } 

   internal double GetTemperature(int day, int hour)
   {
      return temperatures[day*24 + hour];
   }

   internal double SetTemperature(int day, int hour, double temperature)
   {
      temperatures[day*24 + hour] = temperature;
   }
}

class DayData // or struct?
{
    private readonly YearData yearData;
    private readonly int dayNumber;
    public DayData(YearData yearData, int dayNumber)
    {
       this.yearData = yearData;
       this.dayNumber = dayNumber;
    }
    public double GetTemperature(int hour)
    {
       return yearData.GetData(dayNumber, hour);
    }
    public void SetTemperature(int hour, double temperature)
    {
       yearData.SetData(dayNumber, hour, temperature);
    }
} 
```

通过这种方式，我可以拥有一个巨大且长期存在的对象，并且我可以保留许多小的短期对象来分析数据。GC 更快乐，直接对整个数据集进行分析现在不那么复杂了。

我的问题是，首先：这种模式有名字吗？似乎它应该是很常见的模式。

第二（特定于.NET）：段对象非常轻量级且不可变。这是否使它成为结构的良好候选者？结构字段之一是引用是否重要？将结构用于*看起来*可变但实际上不是的类型是不好的形式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:54:55.847

非常有趣的问题和方法！

我不确定，但我认为这些模式可能被认为是 a`Flyweight`和 an `Adapter`。

## 来自[sourcemaking.com](http://sourcemaking.com)的[Flyweight](http://sourcemaking.com/design_patterns/flyweight)：

> *   使用共享有效地支持大量细粒度对象。
> *   用轻量级小工具替换重量级小部件的 Motif GUI 策略。

您所持有的`temperatures`数组存储在 中`YearData`，可以看作是一个 DayData Factory。

## 还有一个[适配器](http://sourcemaking.com/design_patterns/adapter)：

> *   将一个类的接口转换为客户期望的另一个接口。Adapter 让那些因为接口不兼容而无法协同工作的类。
> *   用新接口包装现有类。
> *   阻抗匹配旧组件到新系统

因此，通过公开`DayData`这种方式，您正在提供客户想要的接口

另外，我不确定 DayDate 是一个结构，您可以在[此答案中查看有关何时以及如何使用结构的很好的解释](https://stackoverflow.com/a/6973171/821054)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:19:58.053

蝇量级，绝对。

它允许您以最佳方式打包大数据，但仍然假装您对每个单独的数据都有一个额外的对象。

# c# - 受密码保护的 SQLite 数据库

> ID：15146072
> 
> 赞同：3
> 
> 时间：2013-02-28T21:33:54.433
> 
> 标签：c#, sqlite

我正在尝试对我的 db 文件进行加密，因此没有密码就没有人可以访问它，所以我首先想到的是使用内置的 SQLite 加密，这是我用来为数据库创建密码的代码

```
public void SetPassword(byte[] password)
{
    _dbConnection.SetPassword(password);
} 
```

但真正让我感到惊讶的是，任何人都可以使用非常简单的代码轻松删除密码并查看数据库的内容，例如

```
public void RemovePassword(SQLiteConnection conn)
{
    conn.ChangePassword(null);
} 
```

所以我想知道如果可以那么容易地删除它，那么该内置加密有什么用？！。还是我对我提到的事情有误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T00:36:36.023

好的，解决方案很简单：

当使用密码为数据库设置密码时

```
.SetPassword(password); 
```

除非您使用旧密码合法连接到数据库{或以某种方式破解数据库：D}，否则不能使用 changepassword 功能简单地删除或更改它

```
.ChangePassword(password); 
```

# javascript - CSS 在 192 行后不起作用

> ID：15146081
> 
> 赞同：-1
> 
> 时间：2013-02-28T21:34:33.203
> 
> 标签：javascript, html, css, loading, lines

嗨，我的 CSS 刚刚从第 192 行或“主题部分”停止工作，它上面的所有内容都可以工作，但之后的任何内容都不再工作，有人可以看看我的代码，看看你是否能看到任何错误提前谢谢！

```
body {
border-top : 1em solid #333;
font : 300 62.5% "Open Sans";
line-height : 1.5;
}
.heading-large {
font-size : 2em;
}
.heading-medium {
text-transform : uppercase;
font-size : 1.8em;
}
.title-medium {
font-size : 1.6em;
}
p {
font-size : 1.4em;
}
footer p {
color : #959595;
}
a {
color : inherit;
text-decoration : none;
}
a:hover .title-medium {
color : #D73300;
transition : all 0.5s ease;
}
article {
margin : 1em 0;
}
li {
margin : 1em 0;
}
br {
margin : 0 0 1em;
}
img {
display : block;
margin : 0 0 0.5em;
max-width : 100%;
}
hr {
margin : 0.5em 0;
height : 0.3em;
border : 0;
background : url('../img/border-dots-1.png');
}
footer hr {
margin : 0.5em 0;
height : 0.3em;
border : 0;
background : url('../img/border-dots-2.png');
}
input, select, textarea {
border : #CCC solid 0.1em;
font : 300 1.4em "Open Sans";
transition : border 0.5s ease;
}
input, select {
margin : 0 1em 1em 0;
padding : 0.5em;
width : 20em;
}
input[type="submit"] {
margin : 1em 0;
}
textarea {
padding : 0.5em;
max-width : 100%;
width : 65em;
height : 15em;
}
.button {
padding : 0.5em;
width : 20em;
outline : #FFF;
background : #D73300;
color : #FFF;
text-align : center;
}
.button:active {
outline : 0.1em solid #FFF;
outline-offset : -0.3em;
}
*, *:before, *:after {
box-sizing : border-box;
}
.layout-row {
margin : 0 auto;
width : 96em;
}
.layout-row .layout-row {
width : auto;
}
.layout-row:before, .layout-row:after {
display : block;
visibility : hidden;
height : 0;
content : "\0020";
}
.layout-row:after {
clear : both;
}
.layout-column {
position : relative;
display : inline;
float : left;
padding : 1em;
}
.layout-column .layout-column {
padding : 0;
}
.one {
width : 8.33333%;
}
.two {
width : 16.66667%;
}
.three {
width : 25%;
}
.four {
width : 33.33333%;
}
.five {
width : 41.66667%;
}
.six {
width : 50%;
}
.seven {
width : 58.33333%;
}
.eight {
width : 66.66667%;
}
.nine {
width : 75%;
}
.ten {
width : 83.33333%;
}
.eleven {
width : 91.66667%;
}
.twelve {
width : 100%;
}
.layout-navigation {
margin : -2em 0 0;
}
.layout-navigation li {
float : left;
padding : 3em 0.75em 0.5em;
text-align : center;
}
.widget-contacts li {
float : left;
margin : 0.5em 0;
width : 50%;
}
.layout-footer-background {
background : #333;
}
footer .layout-navigation {
margin : 0;
}
footer .layout-navigation li {
padding : 0 0.75em 0 0;
}
.selected {
margin : -0.1em 0 0;
border-top : 1.1em solid #D73300;
background : #F3F3F3;
}
.selected .title-medium {
color : #D73300;
}
.highlight {
color : #D73300;
}

/* THEME SECTION */

.icon-small:before {
display : block;
float : left;
overflow : hidden;
margin : 0.3em 0.5em 0 0;
width : 16px;
height : 16px;
background-image : url(../img/icon-sprite-16.png);
content : "";
}
.address:before {
background-position : 0 0;
content : "";
}
.phone:before {
background-position : -1.2em 0;
content : "";
}
.email:before {
background-position : -2.4em 0;
content : "";
}
.twitter:before {
background-position : -3.6em 0;
content : "";
}
a .twitter:hover:before {
background-position : -3.6em -1.3em;
}
.pen:before {
background-position : -4.6em 0;
content : "";
}
a .pen:hover:before {
background-position : -4.6em -1.3em;
}
.file:before {
background-position : -5.8em 0;
content : "";
}
a .file:hover:before {
background-position : -5.8em -1.3em;
}
.delete:before {
background-position : -6.9em 0;
content : "";
}
a .delete:hover:before {
background-position : -6.9em -1.3em;
}
.author:before {
background-position : -8em 0;
content : "";
}
.calendar:before {
background-position : -9.2em 0;
content : "";
}
.category:before {
background-position : -10.4em 0;
content : "";
}
a .category:hover:before {
background-position : -10.4em -1.3em;
}
.facebook:before {
background-position : -11.4em 0;
content : "";
}
a .facebook:hover:before {
background-position : -11.4em -1.3em;
}
.linkedin:before {
background-position : -12.6em 0;
content : "";
}
a .linkedin:hover:before {
background-position : -12.6em -1.3em;
}
.google:before {
background-position : -13.7em 0;
content : "";
}
a .google:hover:before {
background-position : -13.7em -1.3em;
}
.check:before {
background-position : -14.8em 0;
content : "";
}
.icon-large:before {
display : block;
float : left;
overflow : hidden;
margin : 0.3em 0.5em 0 0;
width : 48px;
height : 48px;
background-image : url(../img/icon-sprite-48.png);
content : "";
}
.graph:before {
background-position : 0 0;
content : "";
}
.lightning:before {
background-position : -3.4em 0;
content : "";
}
.pencil:before {
background-position : -6.8em 0;
content : "";
}
a .pencil:hover:before {
background-position : -6.8em -3.6em;
}
.frame:before {
background-position : -10.2em 0;
content : "";
}
a .frame:hover:before {
background-position : -10.2em -3.6em;
}
.man:before {
background-position : -13.8em 0;
content : "";
}
a .man:hover:before {
background-position : -13.8em -3.6em;
}
.align-left {
float : left;
padding : 0 2em 0 0;
}
.align-right {
float : right;
padding : 0 0 0 2em;
}
.text-align-center {
text-align : center;
}
.text-align-left {
text-align : left;
}
.text-align-right {
text-align : right;
}
#container {
min-height : 20em;
}
img[id*="drag"] {
padding : 0.5em;
width : 15.1em;
height : 10em;
cursor : move;
}
#drop {
margin : 1em 0 0;
min-height : 10em;
border : #CCC solid 0.1em;
}
#drop img {
display : block;
float : left;
width : 15.1em;
height : 10em;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T21:36:34.293

You have to comment out any non-CSS content in the file. Change `THEME SECTION` to `/* THEME SECTION */`.

Also, the definition for `.icon-small:before` has no quotes around the URL for the **background-image**. It should be:

```
{
display : block;
float : left;
overflow : hidden;
margin : 0.3em 0.5em 0 0;
width : 16px;
height : 16px;
background-image : url('../img/icon-sprite-16.png');
content : "";
} 
```

Looks like you'll have the same issue with `.icon-large:before`, as well.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T21:36:37.023

Have you tried commenting out that line that says THEME SECTION?

```
/* THEME SECTION */ 
```

That might rectify your issue

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T21:36:54.730

THEME SECTION isn't commented and isn't valid css

```
/* THEME SECTION*/ 
```

# python - 在python中打印对象

> ID：15146086
> 
> 赞同：0
> 
> 时间：2013-02-28T21:34:43.580
> 
> 标签：python, python-3.x

我正在尝试打印这些`car_object[objectname]`对象，但不知道该怎么做……我还有一个 Cars 类。当我这样做时，`print(car_object[objectname])`我得到`ObjectmeA160 <__main__.Cars object at 0x027FB970>`. 我究竟做错了什么？

```
def __iter__(self):
    car_object = {}
    cursor = self._db.execute('SELECT IDENT, MAKE, MODEL, DISPLACEMENT, 
      POWER, LUXURY FROM CARS')
    for row in cursor:
        car_object = {}
        objectname = 'Object'+str(row['IDENT'])
        car_object[objectname] = Cars(ident = row['IDENT'], make = row['MAKE'], 
                  model = row['MODEL'], disp = row['DISPLACEMENT'], power = row['POWER'], luxury = row['LUXURY'])
        print(car_object[objectname])
        yield dict(row)

class Cars:  
    def __init__(self, **kwargs):
        self.variables = kwargs

    def set_Variable(self, k, v):
        self.variables[k] = v

    def get_Variable(self, k):
        return self.variables.get(k, None) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:42:38.580

这`<__main__.Cars object at 0x027FB970>`是不实现自己的[`.__str__()`钩子](http://docs.python.org/3/reference/datamodel.html#object.__str__)的自定义对象的标准字符串。您可以通过实现该方法来自定义它：

```
class Cars:
    # ....

    def __str__(self):
        return 'Car instance with variables: {!r}'.format(self.variables) 
```

# c# - EntityFramework - 将 ID 加载到下一级而不加载其他列

> ID：15146087
> 
> 赞同：0
> 
> 时间：2013-02-28T21:34:45.827
> 
> 标签：c#, linq, entity-framework

我有 3 个实体：横幅、包和文件。

一个横幅有很多包，一个包有很多文件。

我需要获取所有横幅的所有文件 ID。我尝试了以下方法：

```
 IList<BannerModel> banners = context.Banners
    .OrderBy(x => Guid.NewGuid())
    .Take(count)       
    .Select(x => 
      new BannerModel {
        Images = x.Packs.SelectMany(p => p.Files.Select(f => f.Id)).ToList()
      }).ToList(); 
```

但是，我在选择文件 ID 时遇到错误：

> System.NotSupportedException：LINQ to Entities 无法识别方法 'System.Collections.Generic.List `1[System.Int32] ToList[Int32](System.Collections.Generic.IEnumerable`1[System.Int32])' 方法，并且此方法无法转换为存储表达式。在 System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.DefaultTranslator.Translate(ExpressionConverter parent, MethodCallExpression call) 在 ...

知道可能出了什么问题吗？

**注意：**我禁用了延迟加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:38:11.573

```
var allFileIDs = context.Banners.SelectMany(b => 
                           b.Packs.SelectMany(p => p.Files.Select(f => f.ID)))
                        .ToList(); 
```

Resulting SQL will look like:

```
SELECT [t2].[ID]
FROM [Banners] AS [t0], [Packs] AS [t1], [Files] AS [t2]
WHERE ([t1].[BannerID] = [t0].[ID]) AND ([t2].[PackID] = [t1].[ID]) 
```

No lazy-loading, single query.

* * *

Misunderstood your question about getting all file ids. If you need to project each banner to BannerModel:

```
context.Banners.Select(b => new BannerModel {
          Images = b.Packs.SelectMany(p => p.Files.Select(f => f.ID))
        }).ToList(); 
```

You see exception, because you have `ToList()` in expression, which cannot be converted into SQL. Change `BannerModel.Images` to be of type `IEnumerable<int>` instead of `List<int>`, and remove `ToList()` call from select statement.

* * *

One more option if you don't want to change type of `BannerModel.Images`:

```
context.Banners.Select(b => b.Packs.SelectMany(p => p.Files.Select(f => f.ID)))
               .ToList() // brings next projection into memory
               .Select(ids => new BannerModel { Images = ids.ToList() })
               .ToList(); 
```

# vba - Microsoft Word 2007 宏中应使用哪些 VBA 代码来创建目录

> ID：15146088
> 
> 赞同：2
> 
> 时间：2013-02-28T21:34:48.737
> 
> 标签：vba, ms-word, tableofcontents

我想在 Microsoft Word 2007 中定义一个宏，该宏在按下热键时插入具有提供的自动样式的目录。我成功定义了一个宏来插入一个非样式（例如基本）目录，如下所示：

```
Sub InsertTableOfContents()
'
' InsertTableOfContents Macro
'
'
    With ActiveDocument
        .TablesOfContents.Add Range:=Selection.Range, RightAlignPageNumbers:= _
            True, UseHeadingStyles:=True, UpperHeadingLevel:=1, _
            LowerHeadingLevel:=3, IncludePageNumbers:=True, AddedStyles:="", _
            UseHyperlinks:=True, HidePageNumbersInWeb:=True, UseOutlineLevels:= _
            True
        .TablesOfContents(1).TabLeader = wdTabLeaderDots
        .TablesOfContents.Format = wdIndexIndent
    End With
End Sub 
```

但是，当我尝试插入样式如下的目录时：

```
Sub InsertStyledTOC()
'
' Macro to insert a table of contents styled like Automatic Table 2
'
ActiveDocument.AttachedTemplate.BuildingBlockEntries("Automatic Table 2"). _
    Insert Where:=Selection.Range, RichText:=True
End Sub 
```

我收到以下错误：

> 运行时错误 5941 请求的集合成员不存在

我相信这表明`BuildingBlockEntries`（例如自动表2）的引用成员不存在，但我不清楚为什么或如何更正它。

感谢您的帮助

**编辑**- 我尝试按照建议使用应用程序默认构建块模板的文件路径：

`Application.Templates("C:\Program Files\Microsoft Office\Office12\Document Parts\1033\Building Blocks.dotx").BuildingBlockEntries("Automatic Table 2").Insert Where:=Selection.Range _ , RichText:=True`

但是，我仍然收到错误：`Run-time error 5941 The requested member of the collection does not exist`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:59:42.397

您的代码期望在附加的模板中找到构建块，如果您没有做任何特别的事情，它可能是 Normal.dotm。Microsoft 实际上将内置构建块存储在不同的模板中。如果你录制一个宏，你会看到这个模板的位置（我的在“C:\Users\owner\AppData\Roaming\Microsoft\Document Building Blocks\1033\14\Built-In Building Blocks.dotx”） .

所以，你有两个选择。您可以使用 Templates 集合访问该模板并从那里插入构建块（宏记录器是您的朋友）。或者，您可以将构建块保存到 Normal.dotm 以便更轻松地访问它。为此，请单击插入 > 快速文本 > 积木，在列表中找到您的积木，编辑其属性，然后将其保存为普通。如果你这样做，你的代码应该可以工作（我有 2010，但我打赌这非常相似）。

我不知道这两个选项之间有什么真正的区别，假设这只是给你的，而不是你需要分发的东西。

编辑添加我从宏记录器获得的代码：

```
 Application.Templates( _
    "C:\Users\owner\AppData\Roaming\Microsoft\Document Building Blocks\1033\14\Built-In Building Blocks.dotx" _
    ).BuildingBlockEntries("Automatic Table 2").Insert Where:=Selection.Range _
    , RichText:=True 
```

因此，您应该尝试用它替换 InsertStyledTOC 中的代码。

# c# - WCF MessageHeader 不会写入命名空间

> ID：15146092
> 
> 赞同：3
> 
> 时间：2013-02-28T21:34:54.903
> 
> 标签：c#, wcf, soap

我有这段代码由于某种原因没有写名称或命名空间或属性

```
public class MultiSpeakHeader : MessageHeader
{
    protected override void OnWriteHeaderContents(XmlDictionaryWriter writer, MessageVersion messageVersion)
    {
        writer.WriteAttributeString("AppName", "A");
        writer.WriteAttributeString("AppVersion", "1");
        writer.WriteAttributeString("CSUnits", "feet");
    }

    public override string Name
    {
        get { return "MultiSpeakMsgHeader"; }
    }

    public override string Namespace
    {
        get { return "http://www.multispeak.org/Version_3.0"; }
    }
} 
```

this 类实例的结果如下：

```
<MultiSpeakHeader xmlns="http://schemas.datacontract.org/2004/07/my.app" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"/> 
```

我需要这个：

```
<MultiSpeakMsgHeader xmlns="http://www.multispeak.org/Version_3.0" AppName="A" AppVersion="1" CSUnits="feet" /> 
```

代码使用：

```
AddressHeader[] header = { AddressHeader.CreateAddressHeader(new MultiSpeakHeader()) }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-08T23:26:59.637

我可以添加属性，但根节点需要有前缀。我试图避免它，但没有成功。

```
writer.WriteXmlnsAttribute("test", this.Namespace);
writer.WriteAttributeString("AppName", "A");
writer.WriteAttributeString("AppVersion", "1");
writer.WriteAttributeString("CSUnits", "feet"); 
```

# php - 从 xdebug_get_code_coverage 输出生成报告

> ID：15146096
> 
> 赞同：2
> 
> 时间：2013-02-28T21:35:03.243
> 
> 标签：php, phpunit, code-coverage, xdebug, behat

我们正在使用 BDD 来测试我们的代码。使用 BDD，您基本上有两组代码，一组运行测试，另一组实际在您的服务器上执行。

据我所知，PHP 的大多数代码覆盖工具都假设您正在运行 PHPUnit，然后在您的单个代码库上收集统计信息，这里详细讨论了这个问题[https://github.com/Behat/Behat/issues /92](https://github.com/Behat/Behat/issues/92)。

我基本上已经放弃（也许是错误地）使用现有工具并回到基础。使用 xdebug，我可以通过在适当的位置注入启动和停止收集调用来收集服务器[http://xdebug.org/docs/code_coverage上的所有统计信息。](http://xdebug.org/docs/code_coverage)这将创建一个包含所有已执行行的巨大数组列表。现在我想把它转换成一个很好的报告，它实际上会显示代码覆盖率。不幸的是，我没有时间为此构建工具。我的问题是：

有人知道我可以将 xdebug 代码覆盖率输出转换为报告的工具/方式吗？

有没有更好的方法来做我想做的事情？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:42:28.917

我们最终从“第一原则”出发。使用 X-Debug 生成被命中的行列表，然后编写脚本来计算覆盖率。这里还有一个非常好的博客[http://qafoo.com/blog/040_code_coverage_with_behat.html](http://qafoo.com/blog/040_code_coverage_with_behat.html)

# django - 错误“sqlserver_ado 不是可用的数据库后端”（IIS 上的 PyISAPIe）

> ID：15146100
> 
> 赞同：3
> 
> 时间：2013-02-28T21:35:30.207
> 
> 标签：django, sql-server-2008, iis-7, django-mssql, pyisapie

[在使用 IIS 为 Django 提供服务并使用django-mssql](http://django-mssql.readthedocs.org/en/latest/index.html)处理事务时，我在将我的 Django 项目连接到 SQL Server 2008 时遇到问题。我正在使用 IIS 7 和[64 位 ActivePython 2.7](http://www.activestate.com/activepython/downloads)。

这是我的已安装软件包列表：

```
Django==1.4.5
distribute==0.6.19
django-mssql==1.2
pypm==1.3.4
pythonselect==1.3
pywin32==214
virtualenv==1.6.1
wsgiref==0.1.2 
```

这是堆栈跟踪的最后一点：

```
 File "C:\Python27\lib\site-packages\django\db\__init__.py", line 40, in 
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "C:\Python27\lib\site-packages\django\db\__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "C:\Python27\lib\site-packages\django\db\utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "C:\Python27\lib\site-packages\django\db\utils.py", line 51, in load_backend
    raise ImproperlyConfigured(error_msg)
django.core.exceptions.ImproperlyConfigured: 'sqlserver_ado' isn't an available database backend.
Try using django.db.backends.sqlserver_ado instead.
Error was: DLL load failed: The specified module could not be found. 
```

如果我将`sqlserver_ado`文件夹添加到`C:\Python27\Lib\site-packages\django\db\backends`并将我的数据库设置更改为`settings.py`from`'ENGINE': 'sqlserver_ado',`到`'ENGINE': 'django.db.backends.sqlserver_ado',`，那么我会得到一个稍微不同的堆栈跟踪。

```
 File "C:\Python27\lib\site-packages\django\db\backends\sqlserver_ado\base.py", line 6, in 
    import dbapi as Database
  File "C:\Python27\lib\site-packages\django\db\backends\sqlserver_ado\dbapi.py", line 49, in 
    import pythoncom
  File "C:\Python27\lib\site-packages\pythoncom.py", line 2, in 
    import pywintypes
  File "C:\Python27\lib\site-packages\win32\lib\pywintypes.py", line 124, in 
    __import_pywin32_system_module__("pywintypes", globals())
  File "C:\Python27\lib\site-packages\win32\lib\pywintypes.py", line 64, in __import_pywin32_system_module__
    import _win32sysloader
ImportError: DLL load failed: The specified module could not be found. 
```

如果我连接到 sqlite 数据库而不是 SQL Server，则应用程序可以正常工作。
如果我使用开发服务器运行项目，连接到 SQL Server 工作正常。
所以看来问题是 IIS / PyISAPIe 和 django_mssql 的组合。

其他几个问题也提到了类似的问题。通过以某种方式在系统路径上获取 python dll 解决了这些问题。我试过（通过检查路径并将文件复制到`c:\python2.7`中，但我得到了同样的错误。

*   [https://stackoverflow.com/questions/13965251/django-error-in-apache-2-2-database-backend-fails-in-production-but-successful](https://stackoverflow.com/questions/13965251/django-error-in-apache-2-2-database-backend-fails-in-production-but-successful)
*   [使用 Apache、Django、pywin32、Python2.7 和 mod_wsgi 找不到 pywintypes27.dll](https://stackoverflow.com/questions/7755626/pywintypes27-dll-not-found-using-apache-django-pywin32-python2-7-and-mod-wsgi)
*   [http://code.google.com/p/django-mssql/issues/detail?id=107](http://code.google.com/p/django-mssql/issues/detail?id=107)

最后一点信息，这里是`sys.path`开发服务器版本和 IIS / PyISAPIe 版本。

发展（作品）：

```
C:\Users\Administrator\Desktop\django test C:\Python27\python27.zip C:\Python27\DLLs C:\Python27\lib C:\Python27\lib\plat-win C:\Python27\lib\lib-tk C:\Python27 C:\Users\Administrator\AppData\Roaming\Python\Python27\site-packages C:\Python27\lib\site-packages C:\Python27\lib\site-packages\win32 C:\Python27\lib\site-packages\win32\lib C:\Python27\lib\site-packages\Pythonwin C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg-info 
```

IIS（失败）：

```
C:\PyISAPIe C:\Windows\system32\python27.zip C:\Python27\Lib C:\Python27\DLLs C:\Python27\Lib\lib-tk c:\windows\system32\inetsrv C:\Python27 C:\Python27\lib\site-packages C:\Python27\lib\site-packages\win32 C:\Python27\lib\site-packages\win32\lib C:\Python27\lib\site-packages\Pythonwin C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg-info c:\inetpub\PyApp 
```

任何关于从哪里去的提示或建议将不胜感激。接下来我将尝试正常的（即非活动的）Python，看看是否会有所作为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:02:36.600

从头开始安装 64 位 python 并按照[此处](https://stackoverflow.com/questions/7755626/pywintypes27-dll-not-found-using-apache-django-pywin32-python2-7-and-mod-wsgi)的建议进行操作。问题一定是 Active Python 出了点问题。

我确实注意到一件事可能会有所帮助。

*   正常安装 python 和 pywin32（使用来自链接站点的可执行文件），`C:\Python27\Lib\site-packages`包含一个名为的文件夹`pywin32_system32`，其中包含需要复制到`C:\Python27`以解决问题的可执行文件。
*   在 Active Python 安装中，此目录不存在。

我还注意到，两种安装方法（、、和）的目录`win32`包含`win32com`的`win32comext`文件略有不同。

我希望这可以在将来减轻其他人的痛苦。

# javascript - 将多个 contenteditable id 的信息保存到 localStorage

> ID：15146102
> 
> 赞同：0
> 
> 时间：2013-02-28T21:35:32.187
> 
> 标签：javascript, jquery, html, local-storage, contenteditable

这是交易：

我有 100 个 html5 contenteditable 字段，每个字段都有一个 id。

我愿意做的是将用户输入的数据保存到localsotarge中，这样当他回来访问该站点时，不必再次重新输入信息。

发生这种情况的事件必须是 onkeyup。

示例标记如下：

```
<a href="#"  contenteditable="true" id="uniquevalue" onkeyup="myFunction();"><span class="item_price">$35.99</span></a><br>

 <a href="#"  contenteditable="true" id="anotheruniquevalue" onkeyup="myFunction();"><span class="item_price">$35.99</span></a><br> 
```

我在互联网上看过示例，但由于我不是 javascript 专家，我需要创建 100 个函数才能真正做我想做的事。

我已经为这个项目加载了 jquery

我非常感谢你花时间帮助我完成这个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:39:53.070

这样的事情应该是可行的：

```
$('a[contenteditable="true"]').on('keyup', function(event){
    localStorage.setItem($(this).attr('id'), $(this).html());
}); 
```

这是一个[jsFiddle。](http://jsfiddle.net/TV6Es/)

# magento - Magento 删除客户交易电子邮件中的促销代码

> ID：15146103
> 
> 赞同：0
> 
> 时间：2013-02-28T21:35:38.330
> 
> 标签：magento

我的客户不希望他的客户拥有他们使用的促销代码的副本，以尽量减少他们创建新帐户并再次使用它的机会。我正在查看发票和订单收据交易电子邮件，并且只引用了 order.getIsNotVirtual()，我假设它插入了有关订单的详细信息。我将如何查找对促销代码本身的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:32:24.040

您必须像这样编辑电子邮件的布局：

```
<sales_email_order_items>
     <reference name="order_totals"><action method="setTemplate"><template>sales/mytotals.phtml</template></action></reference>
</sales_email_order_items> 
```

然后将 sales/totals.phtml 复制到 mytotals.phtml 并使用以下内容删除折扣代码：

```
if ($_code!='discount') 
```

这是订单模板，查看 sales.xml 布局以查找有关其他电子邮件的信息

# c - 在c中找到指向链表中元素的指针

> ID：15146109
> 
> 赞同：-2
> 
> 时间：2013-02-28T21:35:59.473
> 
> 标签：c, struct, linked-list

我想在c中获取指向链表中元素的指针。这是我的代码。我收到错误“返回类型'bigList'但预期'struct bigList **'时类型不兼容”。请帮忙。谢谢

```
 /*this is the struct*/
     struct bigList
     {
      char data;
      int count;
      struct bigList *next;
      };

      int main(void)
      {
        struct bigList *pointer = NULL;

        *getPointer(&pointer, 'A');  //here how do I store the result to a pointer 

       }

    /*function to return the pointer*/    
    bigList *getPointer(bigList *head, char value)
    {
      bigList temp;
      temp=*head;

      while(temp!=NULL)
       {
        if(temp->data==value)
        break;

        temp = temp->next;     
        }
    return *temp;      //here I get the error I mentioned
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:39:21.933

您需要 2 个指针，一个指向基本列表的头指针和要返回指针的位置：

```
 int main(void)
  {
    struct bigList *pointer = NULL;

    struct bigList *retValPtr = getPointer(pointer, 'A');  //here how do I store the result to a pointer 

   }

   struct bigList *getPointer(struct bigList *head, char value)
   {
       struct bigList *temp;  // Don't really need this var as you could use "head" directly.
       temp = head;

       while(temp!=NULL)
       {
           if(temp->data==value)
             break;

           temp = temp->next;     
       }

       return temp;  // return the pointer to the correct element
   } 
```

请注意我是如何围绕指针进行更改的，以使它们都是相同的类型，而您的代码对于 thsi 有点随机。这很重要！

# javascript - Is there a good cross-browser way to detect changes to an yet?

> ID：15146110
> 
> 赞同：4
> 
> 时间：2013-02-28T21:36:29.817
> 
> 标签：javascript, jquery, html

First off, I know this has [been](https://stackoverflow.com/questions/11338592/jquery-textarea-change-event) [asked](https://stackoverflow.com/questions/1948332/detect-all-changes-to-a-input-type-text-immediately-using-jquery) [before](https://stackoverflow.com/questions/2988660/propertychange-event-is-not-available-in-firefox). I'm asking again in the hopes that more recent versions of common libraries like jQuery have solved this. This may be wishful thinking, I know...

Having said that, is there a way to detect all changes (keypress, paste, autocorrect) to an `<input>` yet? I was using `$("#myElement").bind('input propertychange', function (e) {...});` until IE9 came along and broke it (it doesn't fire on backspace/cut/delete).

There are three options that I'm aware of, all of which have drawbacks:

1.  Bind to even more events (keyup, paste, etc.) and use `setTimeout` to ignore duplicates.
2.  Bind to specific events based on browser detection.
3.  Bind to even more events, track the old value with [jQuery.data()](http://api.jquery.com/jQuery.data/), and compare against it before firing the handler (as in [this answer](https://stackoverflow.com/a/2885716/1431252)).

If there's not a "better way" yet, which of the above do you prefer, and why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-02T14:23:59.433

作为不支持 的浏览器的后备方案`oninput`，您可以在字段上同时使用`onkeyup`和`oninput`事件，但对事件处理程序进行去抖动以防止多次执行：

```
$('input').on('keyup input', debounce(function() {
  // do something
  console.log('input'):
}, 500));

var debounce = function(func, wait, immediate) {
    var timeout;
    return function () {
        var context = this, args = arguments;
        var later = function () {
            timeout = null;
            if (!immediate) func.apply(context, args);
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) func.apply(context, args);
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:01:11.800

尝试这个：

```
<input type="text" onchange="$(this).trigger('change');"> 
```

如果它有效，您可以有条件地使用`.attr('onchange', '...')`有问题的浏览器，以避免将您的标记与黑客行为混淆。

```
<script>
    <!--[if lte IE 9]>
        $('input[type=text]').attr('onchange', '$(this).trigger(\'change\')');
    <![endif]-->
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:42:30.017

您可以尝试[按键事件](http://api.jquery.com/keypress/)。但是，我使用了[blur 事件](http://api.jquery.com/blur/)。

给你一点哲学：我发现文本框会以任何方式改变我的文本的形状或形式，因为我正在输入反直觉和烦人的东西。

当然，对于诸如 3 字段 SSN 之类的东西，您想继续检查长度以将它们射击到下一个字段，但它`.blur()`适用于其他所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T21:45:24.300

如果您只支持现代浏览器，是的，有一种方法可以跨浏览器只使用一个事件：`input`

```
$(myelement).on('input',function(){
    console.log(this.value);
}); 
```

如果您希望继续支持旧浏览器，则必须继续为它们使用解决方法，因为旧版本的浏览器不会被修复。

我更喜欢将 keydown 与输入配对，因为 keydown 在触发输入事件的同时触发。

# python - Problems with external visibility of Flask web-server

> ID：15146117
> 
> 赞同：4
> 
> 时间：2013-02-28T21:36:52.947
> 
> 标签：python, flask, http-status-code-401

I have managed to to install flask and run the hello-world script:

```
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello World!'

if __name__ == '__main__':
    app.run() 
```

I was impressed how easy it was. Then I wanted to make my web-server visible externally. As recommended, I put `host='0.0.0.0'` as the argument of run function. Then I found my IP address (in Google) and put it in the address line of my web browser (while the hello-world-script was running).

As a result I got: "A username and password are being requested" and a dialogue box where I need to put a user name and password. I am not sure but I think it comes from my wireless network. Is there a way to change this behaviour?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T06:40:14.997

您如何尝试运行您的应用程序？如果您运行 flask as - flask 在您的主机（[默认为 127.0.0.1](https://github.com/mitsuhiko/flask/blob/master/flask/app.py#L767)）和端口（[默认为 5000](https://github.com/mitsuhiko/flask/blob/master/flask/app.py#L769)`app.run()` ）上创建自己的 WSGI 服务器（如果端口 < 1000，则需要权限）。如果您使用 nginx + WSGI 等运行烧瓶，您的服务器会解析主机和端口。

现在看起来你想通过端口获取应用程序，它解析了你的服务器，比如 nginx 或 Apache。尝试`http://your-server-host-or-ip:5000`使用默认端口获取烧瓶应用程序，或尝试更改端口（设置显式）`app.run('0.0.0.0', 8080)`并通过`http://your-server-host-or-ip:8080`.

顺便说一句，您总是可以使用命令行工具获取 IP 地址，例如`ifconfig`类 Unix 系统或`ipconfig /all`Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:57:26.013

为了详细说明@tbicr 所说的内容，该密码提示表明您正在尝试连接到端口 80 上的 IP，该端口很可能托管您的路由器/调制解调器的管理页面。您想在端口 5000 上连接到您的 IP，这是 Flask 应用程序运行的默认端口`app.run()`。

# ios - How to release iOS app to App Store for client

> ID：15146118
> 
> 赞同：0
> 
> 时间：2013-02-28T21:36:54.890
> 
> 标签：ios, xcode, app-store

I am trying to figure out how to release an app for a customer. I need to do the entire release process for the customer.

I have been added as Team Admin in Dev Center and can choose the customers account when logging in to Dev Center.

It seems i need the private key in order to sign the app for the customer. I can download the Distribution Certificate of the customer, but when trying to build the archive with the Provisioning Profile in XCode i get the text: "Profile doesn't match any valid certificate/private key pair in your keychains", so i cannot archive and sign the binary.

Do i need to get the private key from the customer in order to be able to release in his company name or am i doing this the wrong way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:39:12.267

是的，您将需要一个私钥。整个过程[在这里](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ApplicationDevelopmentOverview/DeliverYourAppontheAppStore/DeliverYourAppontheAppStore.html)详细介绍。您需要使用私钥构建和签署应用程序，然后提交给苹果进行审核。

# arrays - Combining and returning arrays from Model to Controller - CodeIgniter

> ID：15146120
> 
> 赞同：4
> 
> 时间：2013-02-28T21:37:00.520
> 
> 标签：arrays, codeigniter, activerecord

I want to combine two arrays from two separate queries. I stored my products in two separate tables: one for general information like name, description, price, etc; and another for their various details i.e. a clothing items size and colour.

So my database is structured like this for products:

```
products table:
p_id | title | descr | etc

product_attrs table:
attr_id | products.p_id | name | value 
```

where name and value can be name = Size value = Large

If I trying getting all the details for a product out in one query, like this:

```
this->db->select('products.title,
                           p.description,
                           p.price,
                           p.stock,
                           p.name,
                           p.value');
        $this->db->from('p');
        $this->db->where('p.p_id', $id);
        $this->db->join('product_attrs', 'product_attrs.product_id = p.p_id', 'inner');
        $result = $this->db->get();

        return $result->result_array(); 
```

I get an array populated with the number of name/value pairs there are in the table product_attributes for that product. So if there are say 5 attributes of a product, I would get everything back 5 times like this:

```
Array ( [0] => Array ( [title] => Modest Swimsuit - Full body [description] => UV +50 Protection - Chlorine Resistant - Water Resistant - Quick Drying - Maximum Breathe Ability- Sea Water Resistant [price] => 59.95 [stock] => 20 [name] => Brand [value] => Modestly Active Swimwear ) [1] => Array ( [title] => Modest Swimsuit - Full body [description] => UV +50 Protection - Chlorine Resistant - Water Resistant - Quick Drying - Maximum Breathe Ability- Sea Water Resistant [price] => 59.95 [stock] => 20 [name] => Colour [value] => Black and Light Blue ) [2] => Array ( [title] => Modest Swimsuit - Full body [description] => UV +50 Protection - Chlorine Resistant - Water Resistant - Quick Drying - Maximum Breathe Ability- Sea Water Resistant [price] => 59.95 [stock] => 20 [name] => size [value] => small ) [3] => Array ( [title] => Modest Swimsuit - Full body [description] => UV +50 Protection - Chlorine Resistant - Water Resistant - Quick Drying - Maximum Breathe Ability- Sea Water Resistant [price] => 59.95 [stock] => 20 [name] => size [value] => medium ) [4] => Array ( [title] => Modest Swimsuit - Full body [description] => UV +50 Protection - Chlorine Resistant - Water Resistant - Quick Drying - Maximum Breathe Ability- Sea Water Resistant [price] => 59.95 [stock] => 20 [name] => size [value] => large ) ) 
```

So I decided to separate the queries for each table, so that I can get one result set each. But I want to combine them both so that I can return the data back as one array to the Controller and display that onto my view. This is how I've queried the two tables, I just need a way to combine the results for both:

```
$this->db->select('p.title,
                           p.description,
                           p.price,
                           p.stock');
        $this->db->from('p');
        $this->db->where('p_id', $id);
        $result = $this->db->get();

        $this->db->select('name, value');
        $this->db->from('product_attrs');
        $this->db->where('p_id', $id);
        $result2 = $this->db->get(); 
```

If someone could please help I'd greatly appreciate it. Thank you

EDIT:

I'm looking at array_merge() function right now in php.net, but if I do this:

```
$result = $this->db->get();
        $array1 = $result->result_array();

$result2 = $this->db->get();
        $array2 = $result2->result_array();
        $data = array_merge($array1,$array2);
        return $data; 
```

I get more than one array:

```
Array ( [0] => Array ( [title] => Modest Swimsuit - Full body [description] => UV +50 Protection - Chlorine Resistant - Water Resistant - Quick Drying - Maximum Breathe Ability- Sea Water Resistant [price] => 59.95 [stock] => 20 ) [1] => Array ( [name] => Brand [value] => Modestly Active Swimwear ) [2] => Array ( [name] => Colour [value] => Black and Light Blue ) [3] => Array ( [name] => size [value] => small ) [4] => Array ( [name] => size [value] => medium ) [5] => Array ( [name] => size [value] => large ) ) 
```

Is there a way to get the values out of the above array in my view?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:43:43.953

另一种选择是遍历第二个结果数组并将值添加到第一个数组。

```
 // Get products results as an array
    $this->db->select('products.title,
                       products.description,
                       products.price,
                       products.stock');
    $this->db->from('products');
    $this->db->where('product_id', $id);
    $product = $this->db->get()->result_array();

    // Get product attributes as an array
    $this->db->select('name, value');
    $this->db->from('product_attributes');
    $this->db->where('product_id', $id);
    $product_attributes = $this->db->get()->result_array();

    // Loop through the results
    foreach($product_attributes as $attribute) {

         // Add results to original product array
         $product[$attribute['name']] = $attribute['value'];
    } 
```

这应该产生一个像这样的数组：

```
 [title]       => Modest Swimsuit - Full body 
        [description] => UV +50 Protection - Chlorine Resistant - Water Resistant - Quick Drying - Maximum Breathe Ability- Sea Water Resistant 
        [price]       => 59.95 
        [stock]       => 20
        [Brand]       => Modestly Active Swimwear 
        [Colour]      => Black and Light Blue
        [size]        => small 
```

# jquery - Symfony2: JQuery request isn't XHR

> ID：15146124
> 
> 赞同：2
> 
> 时间：2013-02-28T21:37:24.297
> 
> 标签：jquery, ajax, symfony, xmlhttprequest

I'm working on a simple blog-application with Symfony2.
I'd like to check login-data via ajax:

*   if the data is correct -> forward to another page
*   if not -> respond with a 400 status and animate the form

My problem is that the Request, JQuery sends, seems not to be XHR.

Html:

```
<form id="logfo" action="{{path('Login_Ajax')}}" method="POST">
    <p> Name </p>
    <input type="text" id="logname"> </br>
    <p> Password </p>
    <input type="text" id="logpass"> </br>
    <input type="submit" value="Log In">
</form> 
```

Javascript:

```
$(document).ready(function() {
    //listen for the form beeing submitted
    $("#logfo").submit(function(){
        var url = $("#logfo").attr("action");
        //start the post
        $.post(url,{Name:$("#logname").val(),
            Password:$("#logpass").val()}, 
            function(data){
                if(data.responseCode==400) {
                    //animate the Form
                    var fo=$("#logfo");
                    fo.animate({left:'+=25px'}, "fast");
                    fo.animate({left:'-=50px'}, "fast");
                    fo.animate({left:'+=50px'}, "fast");
                    fo.animate({left:'-=25px'}, "fast");
                }
        });
    }); 
}); 
```

routing.yml:

```
Login_Ajax:
pattern: /thefitthing/logjax
defaults: {_controller: FitcompTheFitThingBlogBundle:Ajax:login }
requirements:
    _method:  POST 
```

For testing reasons, I replaced code for comparing the request with data
from the database with simple if-terms.
controller:

```
class AjaxController extends Controller {

    public function logInAction()
    {
        $request = $this->getRequest();
        if ($request->isXmlHttpRequest()) { 
            $name=$request->request->get('Name');
            if($name == "page") return new Response("",400);
            if($name == "plant") return $this->redirect($this->generateUrl('Thanks_Page'));
        }
        else return $this->render('FitcompTheFitThingBlogBundle:Blog:test.html.twig', array('hint' => "noXHR"));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:45:21.877

您的`submit`处理程序不会阻止浏览器提交表单，因此您的 XHR 请求永远没有机会完成（浏览器只是先执行常规 POST）。您可以通过简单地删除您的呼叫来确认这一点`$.post`——行为完全没有区别。

通过阻止默认操作来解决此问题：

```
$("#logfo").submit(function(event) {
    event.preventDefault();
    $.post(...);
}); 
```

# android - Dialog Fragment with and EditText shows keyboard automatically after load

> ID：15146128
> 
> 赞同：6
> 
> 时间：2013-02-28T21:37:31.323
> 
> 标签：android, android-edittext, android-softkeyboard, android-dialogfragment

I have a DialogFragment that has a view with an `EditText` in it. Every time I show the dialog the edittext has focus and the keyboard comes up.

How can i stop it from coming up automatically?

I tried putting `android:windowSoftInputMode="stateHidden"` in my manifest for the activity that creates the fragment but that had no effect

this is my dialog fragment

```
public class RegDialog extends DialogFragment {

OnRegComplete mRegComplete;

@Override
public void onAttach(Activity activity){
    super.onAttach(activity);
    try{
        mRegComplete = (OnRegComplete)activity;
    }catch(ClassCastException e){
        throw new ClassCastException(activity.toString() + " must implement OnRegComplete");
    }
}

public Dialog onCreateDialog(Bundle state){
    Dialog d = new Dialog(getActivity());
    d.requestWindowFeature(Window.FEATURE_NO_TITLE);
    d.setContentView(R.layout.registration);
    d.setCanceledOnTouchOutside(false);

    return d;
}

public interface OnRegComplete{
    void onRegComplete();
} 
```

}

this is my layout

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/imageView1"
    android:layout_marginLeft="20dp"
    android:layout_alignParentTop="true"
    android:layout_marginTop="20dp"
    android:layout_marginRight="20dp"
    android:textSize="30sp"
    android:text="Registration" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView3"
    android:layout_marginLeft="26dp"
    android:layout_marginTop="16dp"
    android:text="State"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_below="@+id/imageView1"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView2"
    android:layout_marginTop="10dp"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:text="@string/reg_title" />

<Spinner
    android:id="@+id/spinner2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView4"
    android:layout_toRightOf="@+id/textView4"
    android:layout_marginRight="50dp"
    android:minWidth="300dp"
    android:layout_alignLeft="@+id/editText1"
     />

<TextView
    android:id="@+id/textView5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView4"
    android:layout_below="@+id/textView4"
    android:layout_marginTop="40dp"
    android:text="Station"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView2"
    android:layout_below="@+id/textView2"
    android:layout_marginTop="40dp"
    android:text="County"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView4"
    android:layout_marginRight="50dp"
    android:minWidth="300dp"
    android:layout_alignLeft="@+id/editText1" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/textView6"
    android:layout_toRightOf="@+id/textView6"
    android:layout_marginRight="50dp"
    android:minWidth="300dp"
    android:layout_marginLeft="20dp"
    android:ems="10"
    android:inputType="textPassword" />

<Spinner
    android:id="@+id/spinner3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView6"
    android:layout_marginRight="50dp"
    android:minWidth="300dp"
    android:layout_alignLeft="@+id/editText1" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="36dp"
    android:text="@string/reg_btn" />

<TextView
    android:id="@+id/textView6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView5"
    android:layout_below="@+id/textView5"
    android:layout_marginTop="42dp"
    android:text="Password"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="60dp"
    android:layout_marginTop="15dp"
    android:src="@drawable/mobile_mapr_logo" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-25T23:20:57.647

使用此代码以编程方式隐藏它

```
Dialog dialog = builder.create();
dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-01T14:50:22.520

我必须将焦点放在编辑文本上方的视图上

```
android:focusable="true"
android:focusableInTouchMode="true" 
```

在视图中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:39:36.787

尝试这个：

```
your_edit_text.clearFocus(); 
```

如果您在清单中更改为：

```
android:configChanges="keyboardHidden" 
```

这帮助我解决了一些我遇到的键盘问题:-)

# servicestack - 是否可以在设计时编译 Servicestack Razor Pages

> ID：15146131
> 
> 赞同：1
> 
> 时间：2013-02-28T21:37:38.707
> 
> 标签：servicestack, razorgenerator

我正在构建一个包含许多插件的应用程序。该应用程序和插件围绕服务堆栈框架构建，包括剃刀引擎。

我遇到的一个问题是我必须将所有文件设置为始终复制，最终的应用程序最终会得到来自所有插件的文件的混搭。它可以工作，但不容易添加/删除插件 - 最终我想在应用程序运行时执行此操作。

我发现[razorgenerator](http://razorgenerator.codeplex.com/)看起来像是解决了我的部分问题，并将微软剃须刀页面预编译到 dll 中。有人对服务堆栈剃刀文件做过类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:36:24.420

它并不是真正为它设计的，但这里有一个使用 ServiceStack[呈现独立剃须刀页面](https://stackoverflow.com/a/14263254/85785)的示例。

您也可以使用其他工具，例如 razorgenerator 或 RazorEngine，尽管这已断开连接并且与 ServiceStack 中的 Razor 支持没有任何关系。

# ios - Cannot Access Object Within Dictionary

> ID：15146132
> 
> 赞同：0
> 
> 时间：2013-02-28T21:37:42.890
> 
> 标签：ios, objective-c, indexing, nsarray, nsdictionary

I am having problems getting into an NSDictionary within another NSDictionary. I've been trying to access the text in the nodeContent key in the 0th index of the key nodeChildArray,"Number of Patrons Using Facility: 163". Here is the array.

```
{
nodeAttributeArray =     (
            {
        attributeName = class;
        nodeContent = style1;
    }
);
nodeChildArray =     (
            {
        nodeContent = "Number of Patrons Using Facility: 163";
        nodeName = text;
    },
            {
        nodeName = br;
    },
            {
        nodeContent = "
        Room Occupancy: 210 ";
        nodeName = text;
    },
            {
        nodeName = br;
    },
            {
        nodeContent = "
        Current Wait: 0 minutes ";
        nodeName = text;
    }
);
nodeName = p;
} 
```

I have tried different variations of the following:

```
//I Parse some HTML using Xpath before this
NSArray *tutorialsNodes = [tutorialsParser    
searchWithXPathQuery:tutorialsXpathQueryString];

NSDictionary*dict=[tutorialsNodes objectAtIndex:0];
NSDictionary*dict2=[[dict objectForKey:@"nodeChildArray"]objectAtIndex:0]; 
```

So it should be returning both keys in the index but it keeps returning null. I'd really appreciate some help. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:02:40.053

MainResultDictionary => 其中包含您的回复

你应该编码

```
NSArray *dictsArr = [MainResultDictionary objectForkey:@"nodeChildArray"];
NSdictionary *dict = [dictsArr objectAtIndex:0];
[dict objectForkey:@"nodeContent"]; 
```

# iphone - YouTube Custom Brand on iPhone

> ID：15146135
> 
> 赞同：1
> 
> 时间：2013-02-28T21:38:11.507
> 
> 标签：iphone, iframe, youtube, youtube-channels

I am having a hard time trying to fit a YouTube custom brand channel on an iPhone.

It's just a simple html page, and it fits well outside YouTube - the page is 640px wide and I use the viewport meta tag to make it fit well, this works fine outside the youtube structure.

On youtube the content gets bigger than the iPhone viewport, it seems like it shows only 320px, YouTube defines the viewport to equal device-width, so it may be the cause. Any ideas about how make it fit well on youtube channel?

# string - Excel 是否有单元格中多个字符串的单元格内公式？

> ID：15146144
> 
> 赞同：1
> 
> 时间：2013-02-28T21:38:45.417
> 
> 标签：string, excel-formula

我在一列中有一堆名字 - Mike、Bob、Al、John、Fred、Jim 等。

Excel 是否有某种包含或发现我可以在 IF 语句中组合以仅标记我需要的人？

如果我找到我需要的名称，则输入一些代码，例如 BD，否则为空白。

像这样的东西：

=IF(EXISTS("迈克","约翰","鲍勃", A1),"BD","")

所以如果 A1 单元格有 Mike、John 或 Bob，那么目标单元格等于 BD，否则什么都没有。

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:49:18.583

我不知道任何这样的“存在”功能，但你可以使用这样的东西：

IF(OR(A1="Mike", A1="John", A1="Bob"),"BD","")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:02:13.800

这将告诉您单元格是否包含“Mike”。

```
=IF((ISNUMBER(SEARCH("Mike",A1))),"BD","") 
```

无论您需要检查多少名称，您都可以在其内部重复此功能。这个会告诉你单元格中是否包含 Mike 或 John

```
=IF((ISNUMBER(SEARCH("Mike",A1))),"BD",IF((ISNUMBER(SEARCH("John",A1))),"BD","")) 
```

# php - 将二进制数据转换为图像 cURL GET 请求

> ID：15146145
> 
> 赞同：0
> 
> 时间：2013-02-28T21:38:52.917
> 
> 标签：php, image, image-processing, curl, binary-data

我正在尝试访问返回 jpeg 图像的 Web 服务。它在 URL## Heading ## 中需要两个变量 time_sent 和 user_id。

这是我的代码：

```
 $ch = curl_init();
   $options =  array(

            CURLOPT_URL => 'www.example.com/service/?time_sent=time&user_id=user',
            CURLOPT_HTTPHEADER => array('Authorization-Token:' . $api_key, 'Content-type: image/jpeg'),
            CURLOPT_ENCODING => "",
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_HTTPGET => true,
            CURLOPT_CONNECTTIMEOUT => 60,
            CURLOPT_TIMEOUT => 60

        );
    }
    curl_setopt_array($ch, $options);
    $response = curl_exec($ch);

    if(!curl_errno($ch)){
        curl_close($ch);
        $img = imagecreatefromstring($response);
        imagejpeg($img);
        imagedestroy($img);
    }
    else{
        curl_close($ch);
        return curl_error($ch);
    } 
```

这是我的输出：

> ÿØÿàJFIFÿþ>创建者：gd-jpeg v1.0（使用 IJG JPEG v80），默认质量 ÿÛC $。",#(7),01444'9=82<.342ÿÛC
> 2!!22222222222222222222222222222222222222222222222222ÿÀÈ•"ÿÄ
> ÿÄµ}!1AQa"q2'¡#B±ÁRÑð$3br‚<br> %&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyzƒ„ …†‡ˆ‰Š'“”•–~™š¢£¤¥¦§¨©ª²³´µ¶·¸¹ºÂÃÄÅÆÇÈÉÊÒÓÔÕÖ×ØÙÚáâãääåæçèééêñòóôõö÷øùúÿÄ
> ÿÄµw!1AQaq"2B'¡±Á #3RðbrÑ $4á%ñ&'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz‚ƒ„…†‡ˆ‰Š'“”•–～™š¢£¤¥¦§¨©ª²³´ µ¶·¶ ª\¯÷~uÿâk—³ðóN¬îQ*Ëxq¢]ÂUoø (rÈèWÁ~RË¹:ý^³ï<áe•Z¾æþÕ'Ú[$Lå¾ía\Þ*3)o—ýšÖ<Ò(éæðŒåêˆÊ+VòþÑ4VÓ„ß2ÿyŒ×› ÔÊû¿Þ¨µ%PÊìÌÕŒ§Ìuu ªíß¿o÷k2æõ.%ûì«þõs¯xïº ¶ê9b(È»s>ÖÜ›æ©lüAqoÕÙ«(¾æçîÔEUºSäˆæŸâ¿ò¼Õº'¤¨®Ž¬µÙ¾]Õ¥¬ ÜÙºì—å_á¨äÑÓk3|ÕËx·^¢ujþ‹Å~»ä—ø¿Ú¬Ýy[ûA?º”cÊ8™òîÿj~?Öí©vî¦lÚû«Qšqí1šŠ‰±E2¡4H•õm«÷k– ø†ÒÞø¢ÊÍÓ÷®êêtiâK®_/Þ¬]7^+ó6+Ä©÷·W$yyKŸÅÌe$B$Ø‹M¹e··i–²µmQ–gŠÙÕ]k*Ù5=YÒßÍÜÎßuj£b¹½ÒY®.õyÚÒÆ •Ÿø–¦¶ø_¬N-Ê²(þõïxfÓF²‹÷<em>éyltö@ªrVð‡,N~{ÈùwXðãØM·gûß5bM¦²¯ÿe^ãâû+ifw ªª¿7ûÕæšŒVêÿ#n¨æ÷¹#ÊqO§ÿµP2íêμÏ2ðµ -»V„Jizvê±5¿Ë÷j©ù~SAŸ("í}Õ,Ëòn¦V½SLÉäªŠ`Coq-¼©,mµ–¶ŸWûz'™þµWkµXiÑJÈô´¹TÕbæÊæÞ(¦'DºÍVô;xµ$µ··\<¿:ÿ³]Ä¨~Ýi...etc

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:40:41.870

> 谁能告诉我我做错了什么？

没什么，看起来像一个健康的 JPG :) 发送

```
header("Content-type: image/jpeg"); 
```

在做之前`imagejpeg($img);`，它应该工作。

# google-api - 如何将 Google 日历添加到域的所有用户？

> ID：15146146
> 
> 赞同：4
> 
> 时间：2013-02-28T21:39:09.820
> 
> 标签：google-api, google-calendar-api, google-apps, google-api-ruby-client

我无法弄清楚如何将日历添加到域的所有用户的`CalendarList`.

到目前为止，我可以成功地创建`Calendar`并创建一个域范围，`ACL`但我不知道如何将日历插入域用户的列表中。

使用 ruby​​ 客户端 API，它看起来像这样：

```
client = Google::APIClient.new
service = client.discovered_api("calendar", "v3")

calendar_response = JSON.parse(client.execute(:api_method => service.calendars.insert,
  :body => JSON.dump({"summary" => "events"}),
  :headers => { "Content-Type" => "application/json" }).response.body)

rule = {
  "scope" => {
    "type" => "domain",
    "value" => domain,
  },
  "role" => "writer"
}
acl_result = client.execute(:api_method => service.acl.insert,
  :parameters => { "calendarId" => calendar_response["id"] },
  :body => JSON.dump(rule),
  :headers => { "Content-Type" => "application/json" }) 
```

这一切都很好。它创建日历并与域中的每个人共享。我不知道如何将其明确添加到用户的日历列表中。

添加到单个 authed 用户的日历列表如下所示：

```
list_params = {
  "calendarId" => calendar_response["id"],
  "hidden" => false,
  "selected" => true
}
calendar_list_result = client.execute(:api_method => service.calendar_list.insert,
  :body => JSON.dump(list_params),
  :headers => { "Content-Type" => "application/json" }) 
```

问题：

*   如果我被认证为域管理员，我可以`CalendarList`为所有用户创建项目吗？
*   如果是这样，可以使用单个命令完成还是我需要使用每个用户 ID 拨打电话？
*   如果我需要为每个用户执行一个命令，我如何获取用户 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T13:08:58.517

**如果我被认证为域管理员，我可以为所有用户创建 CalendarList 项目吗？** 不，你不能:(。

**如果是这样，可以使用单个命令完成还是我需要使用每个用户 ID 拨打电话？** 您必须为每个用户 ID 拨打电话。

**如果我需要为每个用户执行一个命令，我如何获取用户 ID？**[要检索用户 ID，您首先必须使用 Admin SDK API， https://developers.google.com/admin-sdk/directory/v1/guides/manage-users#get_all_domain_users](https://developers.google.com/admin-sdk/directory/v1/guides/manage-users#get_all_domain_users) 列出域中的所有用户，然后为每个INSERT 命令在您更改用户 ID 的日历中，用于电子邮件地址。

# ruby-on-rails - AuthenticationsController#create 中的 ActiveRecord::StatementInvalid

> ID：15146148
> 
> 赞同：0
> 
> 时间：2013-02-28T21:39:12.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, rubygems, omniauth

我几乎已经让 Omniauth w/twitter 工作了，但是当它在验证 twitter 凭据后尝试将我重定向到我的应用程序时，我收到以下冗长的错误：

### AuthenticationsController#create 中的 ActiveRecord::StatementInvalid

```
SQLite3::ConstraintException: constraint failed: INSERT INTO "users" 
("created_at",  "current_sign_in_at", "current_sign_in_ip", "email", 
"encrypted_password", "last_sign_in_at", "last_sign_in_ip", 
"password_salt", "remember_created_at", "remember_token", 
 "reset_password_token", "sign_in_count", "updated_at") VALUES 
 (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
```

用户.rb：

```
class User < ActiveRecord::Base
  has_many :authentications

  # Include default devise modules. Others available are:
  # :token_authenticatable, :lockable, :timeoutable and :activatable
  devise :database_authenticatable, :registerable, 
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation
  # attr_accessible :title, :body

  def apply_omniauth(omniauth)
    self.email = omniauth['info']['email'] if email.blank?
    authentications.build(:provider => omniauth['provider'], :uid => omniauth['uid'])

  end

  def password_required?
    (authentications.empty? || !password.blank?) && super
  end

  def email_required?
    super && :provider.blank?
  end
end 
```

身份验证控制器：

```
 class AuthenticationsController < ApplicationController
  def create
    omniauth = request.env["omniauth.auth"]
    authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
    if authentication
      flash[:notice] = "Signed in successfully."
      sign_in_and_redirect(:user, authentication.user)
    elsif current_user
      current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'])
      flash[:notice] = "Authentication successful."
      redirect_to authentications_url
    else
      user = User.new
      user.apply_omniauth(omniauth)
      if p user user.save
        flash[:notice] = "Signed in successfully."
        sign_in_and_redirect(:user, user)
      else
        session[:omniauth] = omniauth.except('extra')
        redirect_to new_user_registration_url
      end
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:11:13.860

您可以将 user.save 部分更改为：

```
p user
if user.save 
```

这会将用户对象的内容记录到您的控制台或日志文件中（取决于您运行 Rails 的方式）。然后，您可以检查输出（类似于`#<User id: 15, sign_in_count: 3...`）以确保 SQLite 错误中列出的所有列都具有合理的值。例如，您可能会发现数据库中需要“电子邮件”，但您的用户的电子邮件为 nil。

# jquery - 翻转 DIV onclick

> ID：15146150
> 
> 赞同：0
> 
> 时间：2013-02-28T21:39:18.427
> 
> 标签：jquery

我正在使用[翻转！](http://lab.smashup.it/flip/)插件可在单击时翻转 div 并在用户再次单击 div 时恢复翻转。下面的代码使 DIV 翻转，但当您再次单击它时不会将其翻转回来。

JavaScript

```
$(function(){
$("#flipbox").bind("click",function(){
    $("#flipbox").flip({
        direction:'rl',
        content:'this is my new content',
        onEnd: function(){
            $("#flipbox").bind("click",function(){
                $("#flipbox").revertFlip(); 
            });
        }
    })
    return false;
}); 
```

});

HTML

```
<div id="flipbox">
    Hello! I'm a flip-box! :)
</div> 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:49:57.870

通过将翻转框的状态放到元素上，我使用 if 语句来检查该状态并确定如何翻转框。
JSFiddle： http: [//jsfiddle.net/HP7mu/](http://jsfiddle.net/HP7mu/)
**Javascript：**

```
$(function(){
$("#flipbox").bind("click",function(){
    if($(this).data('flipped')!="yes"){
    $("#flipbox").flip({
        direction:'rl',
        content:'this is my new content',
        onEnd: function(){
                $("#flipbox").data('flipped','yes');
        }
    });
    }else{
        $("#flipbox").flip({
        direction:'rl',
        content:'Hello! I\'m a flip-box! :)',
        onEnd: function(){
                $("#flipbox").data('flipped','no');
        }
    });
    }
    return false;
});
}); 
```

**Html** : 相同
*注意：正如下面的评论所示，Asad 有一个更好的解决方案，如果在代码中触发，只需简单地使用`revertFlip`来恢复状态。`else`*

# c - 如何获取特定头文件的绝对路径？

> ID：15146152
> 
> 赞同：1
> 
> 时间：2013-02-28T21:39:28.720
> 
> 标签：c, unix

我有一个带有一些`#include`头文件说明的 C 文件。我知道当我用 gcc 编译 C 文件时，编译器`.h`会在环境变量中包含的路径中查找文件`$CPATH`。如何获取特定`.h`文件的绝对路径？（我更喜欢不编译就获取路径）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:12:23.667

如果您使用 -E 编译，您将获得预处理器输出，并且其中所有包含的文件都将具有其完整路径。例如，在下面，文件“文件”将包含预处理的输出：

```
gcc -E -o file file.c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:00:39.727

这有点小技巧：

```
cpp -MD file.c | sed -n '/\.h"/s/.*"\(.*\)".*/\1/p' | sort -u 
```

并且显然取决于`cpp`. （以上适用于 gnu cpp 3.4.6）这给出了所有包含文件的完整路径。通过另一个过滤器将其有趣，以将输出减少到您关心的特定标头。

# ember-data - 测试 Ember 数据

> ID：15146153
> 
> 赞同：0
> 
> 时间：2013-02-28T21:39:35.497
> 
> 标签：ember-data

任何人都有在你自己的应用程序中测试 Ember 数据的好例子吗？

我开始使用 Fixtures 适配器构建一个应用程序，这很棒。但我想测试我的模型并确保在我构建时一切正常。

我已经设置并运行了 QUnit，但我不想编写服务器端来验证数据模型是否进行了调用。我想模拟 Adapter 并查看是否`find`调用了该方法并从中返回一个新对象。稍后我会担心服务器端的实现。

有任何想法吗？

这是我到目前为止所拥有的（这不起作用）：

```
test('MyModel should call find', 1, function(){
  App.TestAdapter = DS.Adapter.extend({
    find: function(store, type, id){
      ok(true, 'calls the find method');
      console.log('find: ', type, id);
    }
  });

  App.Store = DS.Store.extend({
    adapter: 'App.TestAdapater'
  });

  myModel = App.MyModel.createRecord({
    name: 'Test',
    period: 0
  });

  // method that should call .find
  myModel.currentObject();

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:21:43.000

我最终选择了[Konacha](https://github.com/jfirebaugh/konacha)。

最大的部分是：

```
before(function() {
  Ember.run(function() {
    App.initialize();     
  });    
});

afterEach(function() {
  Ember.run(function() {
    App.reset();
  });
}); 
```

# asp.net-mvc - 如何判断 Web Application\Site 是哪个版本的 MVC？

> ID：15146162
> 
> 赞同：0
> 
> 时间：2013-02-28T21:40:23.350
> 
> 标签：asp.net-mvc, razor, razor-2

如上...根据源代码，您如何找出应用程序的 MVC 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:47:01.200

如果您在 Web 应用程序中右键单击 MVC 引用并转到属性，则应该有引用的 MVC dll 的版本属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:26:41.617

根据[这个答案](http://forums.asp.net/t/1639800.aspx/1)，您可以通过以下方式以编程方式获取程序集的版本：

```
typeof (Controller).Assembly.GetName().Version 
```

# git - 以编程方式获取 bash 中 git 目录的路径（包括子模块）

> ID：15146163
> 
> 赞同：6
> 
> 时间：2013-02-28T21:40:32.523
> 
> 标签：git, bash, git-submodules

是否可以以编程方式找到 .git 目录的路径，包括子模块？

我正在尝试编写一个安装 git 钩子的脚本，但我找不到一个直接的方法来找到项目的 .git 目录。理想情况下，它应该涵盖以下情况：

1.  在项目的根目录中
2.  在项目的子目录中
3.  在项目内子模块的根目录中
4.  在项目内子模块的子目录中

我可以手动完成所有这些，但我宁愿不解析子模块的 .git 文件。

编辑：我也会对 python 中的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-07T18:10:25.480

`git rev-parse --git-dir`似乎是你想要的。我刚刚用一个子模块对其进行了测试：

```
cd mymodule
git rev-parse --git-dir  # --> .git
git submodule add ssh://.../path/to/mysubmodule
cd mysubmodule
git rev-parse --git-dir  # --> /home/.../mymodule/.git/modules/mysubmodule 
```

这让我很惊讶，因为有一个`.git`in `mysubmodule`，但它原来是一个文件，内容如下：

```
gitdir: ../.git/modules/mysubmodule 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T01:23:50.047

[这个](https://stackoverflow.com/questions/957928/is-there-a-way-to-get-the-git-root-directory-in-one-command)SO question 用于`git rev-parse --show-toplevel`查找顶级目录。

# java - 类、抽象、接口组合中extends的使用

> ID：15146164
> 
> 赞同：0
> 
> 时间：2013-02-28T21:40:38.647
> 
> 标签：java, generics, collections

我的主要问题围绕何时使用以及与 Class、Abstract、Interface 结合使用时有什么区别：

1.  `<E>`

2.  `<E extends Interface>`

3.  `<? extends Interface>`

下面显示的是带有一些代码签名的详细问题：

此代码使用 Guava 转发装饰器来定义特定的集合。

基础接口：

```
public interface AnimalSetInterface<E extends AnimalI> extends Set<E> 
```

这有效：

```
public interface AsiaI<E extends AnimalI> extends AnimalSetInterface<E> 
```

以下给出了错误：

```
public interface AsiaI<E> extends AnimalSetInterface<E> 
```

> 边界不匹配：类型 E 不是 AnimalSetInterface 类型的有界参数的有效替代品

我想了解的是，如果我已经在我只想要的基本接口上指定了，`<E extends AnimalI>`那么为什么我必须再次指定`AsiaI`？

我试图理解泛型，同时尽量减少代码。

此外，如果两个类都有这样的代码，是否有一种组合/最小化（删除/生成样板代码）的好方法：
**亚洲：**

```
public Asia(final ImmutableSet<E> animalSet){
    super(animalSet);
}

public static <E extends AnimalI> AsiaI<E> of(final ImmutableSet<E> animalSet){
    return new Asia(animalSet);
} 
```

**非洲：**

```
public Africa(final ImmutableSet<E> animalSet){
    super(animalSet);
}

public static <E extends AnimalI> AfricaI<E> of(final ImmutableSet<E> animalSet){
    return new Africa(animalSet);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:51:13.863

```
 public class Africa<E extends AnimalI> extends AnimalSetAbstract implements AfricaI

 public class Asia<E> extends AnimalSetAbstract implements AsiaI 
```

不同之处在于，在第一种情况下，您的泛型类型必须扩展 AnimalI 在第二种情况下，您的泛型类型可以是任何类。

# python - IPython.parallel - 我可以将自己的日志写入引擎日志吗？

> ID：15146168
> 
> 赞同：1
> 
> 时间：2013-02-28T21:40:45.913
> 
> 标签：python, parallel-processing, ipython

我希望能够在相关引擎日志中记录我传递给引擎的函数的输出。

IE：

```
data = /* my list of data to operate on */
def fn(inval):
    import logging
    log = logging.getLogger()
    log.error('This is on the engine')
    // do stuff
    return result

calculated_data = []
for datum in data:
    calc = view.apply(fn, datum)
    calculated_data.append(calc) 
```

我希望能够在执行特定任务的相关引擎日志中看到日志语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:58:16.593

您可以通过以下方式获取当前应用程序（即本例中的引擎）的记录器：

```
from IPython.config import Application
log = Application.instance().log 
```

然后正常登录，它将进入引擎日志。

# blackberry - 黑莓浏览器字段/浏览器内容

> ID：15146169
> 
> 赞同：1
> 
> 时间：2013-02-28T21:40:46.557
> 
> 标签：blackberry, browserfield

我正在使用**BrowserFieldDemo** (JDE 7.1.0) 并且在事件中`Event.EVENT_BROWSER_CONTENT_CHANGED`，一个`BrowserContent`对象被检索到

```
(BrowserContent) browserContentChangedEvent.getSource(); 
```

我的问题是：我可以从事件信息中获取[BrowserField实例吗？](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/browser/field2/BrowserField.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:54:13.780

我认为问题在于您使用的是**旧** `BrowserFieldDemo`的. 这段代码已经存在了很长时间（从 7.1 之前开始），并且使用的代码比自 BB OS 5.0 以来所需的代码要复杂得多。

如果您想直接使用[net.rim.device.api.browser.field2.BrowserField](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/browser/field2/BrowserField.html)，那么您应该查看`BrowserField2Demo`.

在 Eclipse 中，转到**BlackBerry** -> **Import** -> **BlackBerry Samples** -> **BrowserField2Demo**。

如果您随后使用较新的`BrowserField`，您可以附加一个[BrowserFieldListener](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/browser/field2/BrowserFieldListener.html)，它将在正常的浏览器事件期间被回调，类似于您在 old 中提到的方法`BrowserFieldDemo`。在所有这些回调中，您会看到确实`BrowserField`如您所愿地传递了 的真实实例。

```
 void documentAborted(BrowserField browserField, Document document) ;         
 void documentCreated(BrowserField browserField, ScriptEngine scriptEngine, Document document);             
 void documentError(BrowserField browserField, Document document);              
 void documentLoaded(BrowserField browserField, Document document);              
 void documentUnloading(BrowserField browserField, Document document);              
 void downloadProgress(BrowserField browserField, ContentReadEvent event); 
```

# java - 带有 SortedSet 的 Java 强制转换异常

> ID：15146170
> 
> 赞同：-1
> 
> 时间：2013-02-28T21:40:52.883
> 
> 标签：java, interface, casting, set

我试图理解为什么这段代码无法编译。
我有一个实现接口的类。最后一种方法由于某种原因无法编译。

它不仅允许我将集合转换为集合，而且允许它很好地返回单个对象。

有人可以向我解释这是为什么吗？谢谢。

```
public class Testing2 {

    public SortedSet<ITesting> iTests = new TreeSet<ITesting>();
    public SortedSet<Testing> tests = new TreeSet<Testing>();

    public ITesting iTest = null;
    public ITesting test = new Testing();

    // Returns the implementing class as expected
    public ITesting getITesting(){
        return this.test;
    }

    // This method will not compile
    // Type mismatch: cannot convert from SortedSet<Testing> to SortedSet<ITesting>
    public SortedSet<ITesting> getITests(){
        return this.tests;
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T21:43:11.120

简单地说， a`SortedSet<Testing>` *不是*a `SortedSet<ITesting>`。例如：

```
SortedSet<Testing> testing = new TreeMap<Testing>();
// Imagine if this compiled...
SortedSet<ITesting> broken = testing;
broken.add(new SomeOtherImplementationOfITesting()); 
```

现在您`SortedSet<Testing>`将包含一个*不是*`Testing`. 那会很糟糕。

你*可以*做的是：

```
SortedSet<? extends ITesting> working = testing; 
```

...因为那样你只能从集合中获取*值*。

所以这应该工作：

```
public SortedSet<? extends ITesting> getITests(){
    return this.tests;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:43:27.153

假设`ITesting`是一个超类型的`Testing`. **泛型类型****不是**多态的。`SortedSet<ITesting>`因此不是. **多态性**根本不适用于泛型类型。您可能需要使用带有下限的通配符作为返回类型。**`SortedSet<Testing>`**`? extends ITesting`****

 ****```
public SortedSet<? extends ITesting> getITests(){
    return this.tests;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:43:17.643

您的声明中有错字：

```
public SortedSet<Testing> tests = new TreeSet<Testing>(); 
```

如果您希望该方法返回 ITesting，或者您需要该方法返回，则应该在那里进行 ITesting：

```
SortedSet<Testing> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T21:43:19.767

我想你想要这个：

```
public SortedSet<Testing> getTests(){
    return this.tests;
} 
```

现在你正在尝试返回`tests`，它被声明为 a`SortedSet<Testing>`而不是`SortedSet<ITesting>`。****

# wordpress - Edit_Post 钩子似乎触发了两次

> ID：15146171
> 
> 赞同：0
> 
> 时间：2013-02-28T21:40:53.090
> 
> 标签：wordpress

我在这里找到了类似的东西：[http ://wordpress.org/support/topic/publish_post-hook-multiple-firing](http://wordpress.org/support/topic/publish_post-hook-multiple-firing)

基本上我使用 wordpress 中的编辑钩子将一些数据添加到表中，并且该函数被调用两次。第一次使用默认值，第二次使用实际数据。

有人提出这个问题吗？这真的是一个问题还是我错过了什么？

行动：

```
add_action('edit_post', 'my_func'); 
```

功能：

```
function my_func() {
    if(!wp_is_post_revision($post_ID)) {

    // Code to get $_POST data, omitted

    // Call to the database here, omitted
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:34:28.517

`edit_post`**当您编辑和**更新帖子时触发（即使在该帖子中添加了评论）。你需要的是`publish_post`钩子。阅读[此页面](http://adambrown.info/p/wp_hooks/hook/%7B%24new_status%7D_%7B%24post-%3Epost_type%7D)了解更多信息。

# java - Struts 2 OGNL - 比较validation.xml中的两个字符串值

> ID：15146172
> 
> 赞同：5
> 
> 时间：2013-02-28T21:41:01.233
> 
> 标签：java, struts2, validation, ognl

我是 Struts2 和 OGNL 的新手，正在制作一个带有注册页面的简单 Web 应用程序。有两个字段，`password`和`repassword`（重新输入密码）并使用验证框架我想验证两个密码是否匹配（我知道我可以使用 JavaScript 轻松完成）。这是我到目前为止所得到的。所有字段验证器都工作正常。这是我的第一个非字段验证器，但我无法让它工作。

```
<validator type="expression">
    <param name="expression">${password}!=${repassword}</param>
    <message>Passwords must match.</message>
</validator> 
```

我都试过了

```
${password}!=${repassword} 
```

并且没有

```
password!=repassword 
```

OGNL 标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:04:08.967

[`expression`](http://struts.apache.org/development/2.x/docs/expression-validator.html)验证器是一个非字段级别的验证器。使用[`fieldexpression`](http://struts.apache.org/development/2.x/docs/fieldexpression-validator.html)验证器，它是一个字段级验证器，并使用 OGNL 表达式进行验证。它必须是等于（`==`）检查。

```
<field name="password">
  <field-validator type="fieldexpression">
    <param name="expression"><![CDATA[password == repassword]]></param>
    <message>Passwords must match.</message>
  </field-validator>
</field> 
```

验证器[`expression`](http://struts.apache.org/development/2.x/docs/expression-validator.html)添加操作错误。验证器[`fieldexpression`](http://struts.apache.org/development/2.x/docs/fieldexpression-validator.html)添加字段错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:55:37.703

尝试

```
%{password == repassword} 
```

验证器检查布尔 OGNL 表达式是否相等。

# android - 缺少 x86 架构的 Android 库 .so？（武佛利亚）

> ID：15146174
> 
> 赞同：3
> 
> 时间：2013-02-28T21:41:11.873
> 
> 标签：android, x86, java-native-interface, arm

我想将 Vuforia 增强现实库 (jni) 集成到 Android 项目中。AR 不是应用程序的核心，它更像是一个小工具。但是 X86 架构没有提供 Vuforia 库，这意味着 x86 Android 手机将无法下载该应用程序。

有没有办法授权x86手机下载app，只是不让他们玩app的AR部分？这意味着一种为缺少库的 x86 架构编译的方法，还可以检测应用程序运行在哪个架构上？

我知道没有很多 x86 android 手机，最后，我可能会被迫等待 Vuforia 发布他们的 .so 的 x86 版本，但我想知道是否有办法做我正在做的事情在这里描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:32:49.467

这是我实际上很容易解决问题的方法。感谢@auselen 的帮助。

您有一个在 x86 架构上失败的常规 Android.mk，因为您使用的库 (libExternalLibrary.so) 仅提供给 arm 架构。您想基于此库构建一个 .so (libMyLibraryBasedOnExternalLibrary.so)。

1) 创建 2 个虚拟 .cpp 文件 Dummy0.cpp 和 Dummy1.cpp 示例 Dummy0.cpp 如下所示：

```
#include <jni.h>
#include <android/log.h>
#include <stdio.h>
#include <string.h>
#include <assert.h>
#include <math.h>
#include <string>

#ifdef __cplusplus
extern "C"
{
#endif

int dummy0                        =  0;

#ifdef __cplusplus
}
#endif 
```

然后，编辑构建你的库的 Android.mk 并像这样修改它：

```
LOCAL_PATH := $(call my-dir)

ifeq ($(TARGET_ARCH_ABI), armeabi)

# In this condtion block, we're compiling for arm architecture, and the libExternalLibrary.so is avaialble
# Put every thing the original Android.mk was doing here, importing the prebuilt library, compiling the shared library, etc...
# ...
# ...

else

# In this condtion block, we're not compiling for arm architecture, and the libExternalLibrary.so is not availalble.
# So we create a dummy library instead.

include $(CLEAR_VARS)
# when LOCAL_MODULE equals to ExternalLibrary, this will create a libExternalLibrary.so, which is exactly what we want to do.
LOCAL_MODULE := ExternalLibrary
LOCAL_SRC_FILES := Dummy0.cpp
include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)
# This will create a libMyLibraryBasedOnExternalLibrary.so
LOCAL_MODULE := MyLibraryBasedOnExternalLibrary
# Don't forget to tell this library is based on ExternalLibrary, otherwise libExternalLibrary.so will not be copied in the libs/x86 directory
LOCAL_SHARED_LIBRARIES := ExternalLibrary
LOCAL_SRC_FILES := Dummy1.cpp
include $(BUILD_SHARED_LIBRARY)

endif 
```

当然，请确保在您的代码中，当您的应用在仅 x86 的设备上运行时，您永远不会调用该库：

```
if ((android.os.Build.CPU_ABI.equalsIgnoreCase("armeabi")) || (android.os.Build.CPU_ABI2.equalsIgnoreCase("armeabi"))) {
    // Good I can launch
    // Note that CPU_ABI2 is api level 8 (v2.2)
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:25:26.177

您可以`vuforia`使用工具（如[cmock](https://github.com/ThrowTheSwitch/CMock)？）进行模拟，从头文件创建存根，然后使用`NDK`for构建它并在应用程序中`x86`使用生成的（共享对象）。`so`

在这种情况下，您还应该很好地处理代码中的不同架构，这可能意味着读取诸如[Build.CPU_ABI 之类的值](http://developer.android.com/reference/android/os/Build.html#CPU_ABI)

我建议你把这样的项目放在下面，`github`这样其他人也可以利用它。我不是许可方面的专家，但使用头文件应该是相当合法的。

# c# - 从组合图像中提取图像

> ID：15146178
> 
> 赞同：1
> 
> 时间：2013-02-28T21:41:23.227
> 
> 标签：c#

如果我使用此处描述的技术组合两个图像：

[将两张图片合并为一张新图片](https://stackoverflow.com/questions/7206510/combine-two-images-into-one-new-image)

如何从它们的组合形式重建两个单独的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:03:00.477

假设您知道原始位图的大小，您可以克隆位图的一个矩形：

```
Bitmap bitmapLeft = bitmap.Clone(new Rectangle(0, 0, widthLeft, heightLeft), PixelFormat.DontCare);
Bitmap bitmapRight = bitmap.Clone(new Rectangle(widthLeft, 0, widthRight, heightRight), PixelFormat.DontCare); 
```

# html - 使用css将文本与底部对齐

> ID：15146179
> 
> 赞同：0
> 
> 时间：2013-02-28T21:41:23.900
> 
> 标签：html, css, text-alignment

我有一个带有图像和 ul 的导航栏。我想在 ul 中的文本与 div 的底部对齐，但它现在位于顶部。我怎样才能做到这一点？
[http://jsbin.com/otitaf/1/](http://jsbin.com/otitaf/1/)

```
<nav>
            <div class="logo">
                <img src="img/logo.jpg" id="logo">
            </div>
            <div class="nav">
                <ul>
                    <li class="bottom">
                        <a href="home.html">Luigi's ♨  Pizzeria</a>
                    </li>
                    <li>
                        <a href="menu.html">Menu</a>
                    </li>
                    <li class="bottom">
                        <a href="#">Map</a>
                    </li>
                    <li>
                        <a href="#">About</a>
                    </li>
                    <li>
                        <a href="#">Contact</a>
                    </li>
                    <li>
                        <a href="#">Praises</a>
                    </li>
                </ul>
            </div>
        </nav> 
```

css

```
.logo{
    width: 30%;
    float: left;
}
.nav{
    float: right;
}
#logo{
    height: 100%;
    margin-left: 25%;
}
.bottom{
    position: relative;
    vertical-align: bottom;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:45:35.577

使用下面的 css 来实现你的梦想

```
#side-bar{ position:relative; }
#side-bar ul{position: absolute; bottom: 0;}     /*   this will apply to all ul available in side-bar 
```

插入这个，您还可以将 class 或 id 添加到 ul 以专门选择它，例如：

```
.sidebar-ul{position: absolute; bottom: 0;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:48:27.860

尝试调整您的 ul 和定位，如下所示：

```
#side-bar section ul {
position: absolute;
bottom: 30px;
} 
```

# asp.net-mvc - 如何创建到通用注释表 ASP MVC 的上下文映射？

> ID：15146183
> 
> 赞同：0
> 
> 时间：2013-02-28T21:41:52.510
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

我有多个模型（任务/服务器/等），所有这些模型都需要支持评论。我想要一个所有这些模型都可以参考的集中评论表（尽管我对其他设计持开放态度）。

评论表将包含以下字段：

```
CommentID
RefTable
RefId
Text 
```

我可以在任务类（例如）中使用以下代码来引用任务的注释。

`IEnumerable<Comment> comments = Comment.Find(this.GetType().Name, this.TaskID)`

但是，我更愿意创建从任务到注释的 HasMany 映射，以便我可以使用以下代码。

`this.Comments`

```
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity.ModelConfiguration;

namespace Models.Mapping
{
    public class TaskMap : EntityTypeConfiguration<Task>
    {
        public TaskManagerItemMap()
        {
            // Primary Key
            this.HasKey(t => t.TaskID);

            ...

            this.Property(t => t.TaskID).HasColumnName("TaskID")

            ...

            this.ToTable("Task");

         }

    }
}

using System;
using System.Collections.Generic;

namespace Models
{
    public partial class Task
    {
        public int TaskID { get; set; }

        ....

        public virtual IEnumerable<Comment> Comments { get; set; }

        ...
    }
}

using System.ComponentModel.DataAnnotations;
using System.Data.Entity.ModelConfiguration;

namespace Models.Mapping
{
    public class CommentMap : EntityTypeConfiguration<Comment>
    {
        public CommentMap()
        {
            this.HasKey(t => new { t.RefID, t.RefTable });

            this.ToTable("Comment");
            this.Property(t => t.CommentID).HasColumnName("CommentID")
                .IsRequired();

            this.Property(t => t.RefID).HasColumnName("RefID")
                .IsRequired();

            this.Property(t => t.RefTable).HasColumnName("RefTable")
                .IsRequired();

            this.Property(t => t.Text).HasColumnName("Text")
                .IsRequired();
        }
    }
}

using System;
using System.Collections.Generic;

namespace Models
{
    public partial class Comment
    {
        public int CommentID { get; set; }
        public int RefID { get; set; }
        public string RefTable { get; set; }
        public string Text { get; set; }
    }
}

using System.Collections;
using System.Collections.Generic;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Globalization;
using Vocus50.SiteManager.SiteManager2014.Models.Mapping;

namespace Models
{
    public partial class DataContext : DbContext
    {
        static DataContext()
        {
            Database.SetInitializer<DataContext>(null);
        }

        public DataContext()
            : base("Name=DataContext")
        {
        }

        public DbSet<Task> Task{ get; set; }
        public DbSet<Comment> Comment { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Configurations.Add(new TaskMap());
            modelBuilder.Configurations.Add(new CommentMap());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:35:11.540

您是否考虑过使用[Automapper](http://automapper.codeplex.com/)。我相信您可以将其用于您正在寻找的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:34:46.790

如果您使用上面的代码，在我看来，问题在于发送 RefTable（或上面的 RefModel - 那些应该是相同的吗？）这里的一个选项（可能还有很多其他选项）是覆盖SaveChanges 并在保存时检查值（或填写）。

所以如果你重写SaveChanges（下面是粗略的方法，网上有很多示例）你会根据实体类型填写这张表。感觉很hacky，所以可能有更好的解决方案

[有没有一种简单的方法可以让 EntityFramework 使用 SQL 默认值？](https://stackoverflow.com/questions/5965386/is-there-an-easy-way-to-make-entityframework-use-sql-default-values)

当然，如果我理解正确的话:)

# python - Python如何在不覆盖其他值的情况下更新dict

> ID：15146184
> 
> 赞同：2
> 
> 时间：2013-02-28T21:41:55.053
> 
> 标签：python, dictionary

假设我有这个：

```
config = {
    "a": {
        "hello": 1,
        "goodbye": 2,
    }
} 
```

我想像这样更新`["a"]["hello"]`到 10：

```
update = {
    "a": {
        "hello": 10
    }
}

config.update(update) 
```

此时配置现在是：

```
config = {
    "a": {
        "hello": 10
    }
} 
```

如何在不覆盖其他值/子字典的情况下用另一个字典更新一个字典？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:53:08.940

```
config = {
    "a": {
        "hello": 1,
        "goodbye": 2,
    }
} 
```

你可以做：

```
config['a']['hello'] = 10 
```

更新`config`：

```
config = {
    "a": {
        "hello": 10,
        "goodbye": 2,
    }
} 
```

# c# - wpf按钮上的多内容（图像+文本）

> ID：15146185
> 
> 赞同：1
> 
> 时间：2013-02-28T21:42:07.050
> 
> 标签：c#, wpf, xaml, templates, styles

我想为按钮创建一个模板。我想在此按钮上放置图像（左侧）和文本。

我试图做这样的事情：

```
<ControlTemplate TargetType="{x:Type Button}" x:Key="BoutonImageEtTexte">
<Button Grid.Column="2" BorderBrush="Transparent" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Center" Width="90" Height="27" >
    <Button.Content>
            <Label>
                <Label.Content>Fichiers joints</Label.Content>
                <Label.Foreground>white</Label.Foreground>
                <Label.VerticalAlignment>center</Label.VerticalAlignment>
                <Label.HorizontalAlignment>center</Label.HorizontalAlignment>
            </Label>
            <Border CornerRadius="3">
            <ContentPresenter/>
            <Border.Style>
                <Style TargetType="{x:Type Border}">
                    <Setter Property="Background" Value="#58585a" />
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{StaticResource DegradeCouleurTheme}" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
        </Border>
    </Button.Content>      
    <Button.Style>
        <Style TargetType="{x:Type Button}" >
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}" >
                        <ContentPresenter />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Button.Style>

</Button>
</ControlTemplate> 
```

这是我添加了堆栈面板的代码：

```
 <ControlTemplate TargetType="{x:Type Button}" x:Key="BoutonImageEtTexte">
<Button Grid.Column="2" BorderBrush="Transparent" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Center" Width="90" Height="27" >
    <Button.Content>
        <StackPanel Orientation="Horizontal">
            <Border CornerRadius="3">
                <ContentPresenter/>
                <Border.Style>
                    <Style TargetType="{x:Type Border}">
                        <Setter Property="Background" Value="#58585a" />
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource DegradeCouleurTheme}" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
            </Border>
            <Label>
                <Label.Content>Fichiers joints</Label.Content>
                <Label.Foreground>white</Label.Foreground>
                <Label.VerticalAlignment>center</Label.VerticalAlignment>
                <Label.HorizontalAlignment>center</Label.HorizontalAlignment>
            </Label>
        </StackPanel>
    </Button.Content>
    <Button.Style>
        <Style TargetType="{x:Type Button}" >
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}" >
                        <ContentPresenter />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Button.Style>
</Button> 
```

这是我对模板的调用：

```
 <Grid Margin ="10,180,10,14">
                <Button Template="{StaticResource BoutonImageEtTexte}" HorizontalAlignment="Left" Margin="13,0,0,0"> 
                    <Image Source="ToolBar_FicJoints.png" />
                </Button>
            </Grid> 
```

不幸的是，我只看到图像，而不是文字？有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T08:32:28.257

也许您可以尝试一些更简单的方法：

```
<Button>
<StackPanel Orientation="Horizontal">
    <Image Source="yourimage.jpg" />
    <TextBlock>Button content</TextBlock>
</StackPanel>
</Button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:47:35.803

您可以将 2 个元素包装在一个元素中，例如`StackPanel`

例子：

```
<ControlTemplate TargetType="{x:Type Button}" x:Key="BoutonImageEtTexte">
    <Button Grid.Column="2" BorderBrush="Transparent" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Center" Width="90" Height="27" >
        <Button.Content>
            <StackPanel Orientation="Horizontal">
                <Border CornerRadius="3">
                    <ContentPresenter/>
                    <Border.Style>
                        <Style TargetType="{x:Type Border}">
                            <Setter Property="Background" Value="#58585a" />
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{StaticResource DegradeCouleurTheme}" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                </Border>
                <Label>
                    <Label.Content>Fichiers joints</Label.Content>
                    <Label.Foreground>white</Label.Foreground>
                    <Label.VerticalAlignment>center</Label.VerticalAlignment>
                    <Label.HorizontalAlignment>center</Label.HorizontalAlignment>
                </Label>
            </StackPanel>
        </Button.Content>
        <Button.Style>
            <Style TargetType="{x:Type Button}" >
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}" >
                            <ContentPresenter />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Button.Style>
    </Button>
</ControlTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:48:22.630

你会发现创建一个内部带有图像的按钮会给你一个丑陋的边框，应该避免这种情况。一种解决方法是为图像创建事件。

例如，您可以创建一个`OnMouseOver`事件，将按钮切换到新图像、文本或带有文本的图像，或者您选择的任何内容。

您还可以创建一个`OnClick`可以触发图像执行任务的事件，就好像它是一个按钮一样。

在这种情况下，我所做的是创建一个看起来像自定义按钮的图像，然后创建相同的图像，并对其进行修改，使其周围出现边框。

我制作了一个 OnMouseOver 来切换图像（因此出现了带边框的图像），并制作了一个 OnClick 来执行我需要的功能。

然后，您可以将此模板用于使用自定义按钮的任何其他情况。

希望这可以帮助！

# java - 强制将指令解释为文本？

> ID：15146186
> 
> 赞同：0
> 
> 时间：2013-02-28T21:42:09.070
> 
> 标签：java, escaping, velocity

我正在使用 Java 和 Apache Velocity 模板来生成一些 C 代码。目前我必须转义`#define`预处理器指令，因为 Apache Velocity 也使用这个指令。是否可以告诉 Apache Velocity 不要解释`#define`为 Velocity 的指令而不必总是逃避`#define`？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T16:22:00.267

VTL 指令可以使用反斜杠字符 ("\") 以类似于有效 VTL 引用的方式进行转义。

```
\#define will renders texts as #define 
```

＃定义

```
## \#include( "a.txt" ) renders as #include( "a.txt" ) 
```

#include("a.txt")

有关更多信息： [转义 VTL 指令](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html#escaping_vtl_directives)

# android - 在 windows mobile、IOS 和 Android 的浏览器中访问 GPS 和相机

> ID：15146187
> 
> 赞同：3
> 
> 时间：2013-02-28T21:42:10.873
> 
> 标签：android, ios, mobile, camera, windows-mobile

我必须编写一个基本上可以拍照的应用程序，应用一些过滤器（如 Instagram），然后通过 HTTP 或 FTP 将其与照片拍摄位置的 GPS 坐标一起上传。

由于我将不得不为 Windows Mobile、IOS 和 Android 编写此代码：有没有办法在浏览器中执行此操作（访问相机和 GPS），以使其适用于 Windows Mobile、IOS 和 Android？

如果答案是否定的，则无法在浏览器中执行此操作：是否有框架/api/任何我可以用来完成这项工作的东西？（相机、GPS 和通过互联网发送东西）。

我只是想避免为三个不同的操作系统重写相同的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:50:46.833

答案是否定的，您将无法从浏览器执行此操作。

也就是说，某些部分可以使用 3 个系统：

编写一个已经有图片和一些 GPS 坐标的应用程序，并通过 http 请求上传一些 GPS 数据。

但是您必须编写本机代码才能从相机获取图片并在每个系统上获取 GPS 坐标，我不知道其他解决方案，并且很高兴在这里阅读更有趣的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T00:39:27.597

实际上，您可以使用 HTML5 实现这些要求：例如：

控制相机：

[http://davidwalsh.name/browser-camera](http://davidwalsh.name/browser-camera)

或门控位置：

[在此处输入链接描述](http://blogs.msdn.com/b/nagavo/archive/2011/11/29/html-5-how-to-track-your-location-using-the-geolocation-api.aspx)

然后正如您已经提到的，您可以使用 PhoneGap 导出此 Web 应用程序以充当本机应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T00:28:10.487

似乎可以编写相同的代码并将其编译到许多不同的移动平台上。答案是[PhoneGap](http://phonegap.com/app/)。

# ajax - 应用程序 ajax 超时

> ID：15146188
> 
> 赞同：0
> 
> 时间：2013-02-28T21:42:12.573
> 
> 标签：ajax, spring-mvc

控制器：处理回发的代码在 biz 层中有一个长期运行的 db 调用。30 分钟后，浏览器显示来自 ajax 调用的错误消息，但是我的 db 日志显示 db 方法仍在运行 - 运行超过 30 分钟标记。

我的 ？当控制器仍在等待来自 biz 层的反馈时，控制器中没有引发 ajax 错误是如何引发的 [log4j 没有显示任何被捕获的错误]。

在tomcat中调整超时有帮助吗？我认为不是，因为应用程序仍在处理

我的观点：

```
function runAjax(){
    $.ajax({
        type: "POST",
        url: "Test.html",
        data: { testparam1,testparam2},
        success: function(data){
            document.getElementById("processdata").innerHTML="Success";
        },
        error: function(request){
            document.getElementById("processdata").innerHTML="Error";
        }
        });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:49:05.167

浏览器，也就是 JavaScript，不会永远等待响应。一段时间后（在这种情况下读取 30 分钟），它会放弃请求，认为服务器没有响应。HTTP 并没有真正设置为处理超过 30 分钟的请求，至少不是通过正常方式。

有一些选择。首先，您可以优化您在后端所做的任何事情以使其更快。我的意思是，如果运行查询需要 30 多分钟，那么您可能需要重新考虑一下您的 SQL 方法。

其次，您可以简单地分解这些步骤，以便您可以运行每个步骤、验证，然后运行下一个步骤。根据您正在做的事情，这可能会打开并行执行某些工作的可能性，从而加快进程。这里的挑战是在失败的情况下回滚。

第三，您可以实现 Pub/Sub 模型。有几个框架可以为 JavaScript 进行 Pub/Sub。我个人使用过 Atmosphere，它有一个不错的 jQuery 插件，当浏览器中没有更高级的方法时，它会回退到更多的 HTTP 常规方法。在此模型中，您的视图将提交请求，后端将排队工作并告诉视图订阅特定队列/通道以获取结果。View 可以简单地等待响应。

第四，你可以发布请求，有一个中间页面，它只是通过 JavaScript 不断刷新，直到后端说“好的，我们完成了！”。许多较旧的 Web 应用程序曾经为长时间运行的事务执行此操作。

我相信您可能还可以使用 1000 多个选项，但是如果您的请求总是需要很长时间才能运行，我认为 AJAX 不适合您。

# jquery - ul li 下拉选择框

> ID：15146196
> 
> 赞同：0
> 
> 时间：2013-02-28T21:42:43.600
> 
> 标签：jquery, drop-down-menu, html-lists

我需要一个使用 Ul li 的下拉框。我试过插件：[教程](http://tympanus.net/Tutorials/CustomDropDownListStyling/index3.html)

问题是当我点击 li 元素时，页面没有重定向。

例子：

```
<div id="dd" class="wrapper-dropdown-3" tabindex="1">
    <span>Transport</span>
    <ul class="dropdown">
        <li><a href="htttp://www.myweb.com/1"><i class="icon-envelope icon-large"></i>Classic mail</a></li>
        <li><a href="htttp://www.myweb.com/2"><i class="icon-truck icon-large"></i>UPS Delivery</a></li>
        <li><a href="htttp://www.myweb.com/1"><i class="icon-plane icon-large"></i>Private jet</a></li>
    </ul>
</div> 
```

但是里面的链接`<a=""...>`不起作用，什么都没有发生，就像在演示中一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:57:44.333

根据这个插件，当您进行 Dropbox 选择时，魔法就会发生在这里：

```
obj.opts.on('click',function(){
    var opt = $(this);
    obj.val = opt.text();
    obj.index = opt.index();
    obj.placeholder.text(obj.val);
    /* Below is the piece of code you want */
    window.location = obj.opts.find('a').prop('href');
}); 
```

这是我使用演示中的样式/脚本[放在一起的快速 jsFiddle 。](http://jsfiddle.net/mUbE6/)我只是将该`window.location`片段添加到点击函数中，瞧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:11:58.347

如果您从页面复制源代码，请务必删除页面最底部和最顶部的所有 javascript。这（不知何故）为我解决**了**标签问题

# html - Extjs ComboBox - 更改 CSS？

> ID：15146197
> 
> 赞同：1
> 
> 时间：2013-02-28T21:42:44.950
> 
> 标签：html, css, extjs, combobox

我需要显示一个下拉列表（在 Extjs ComboBox 中编码），但它应该看起来像一个表格，如下图所示。这可以通过修改或覆盖 CSS 来完成吗？

我很感激帮助。

![在此处输入图像描述](../Images/162394b24149fdd9f19c120fadd54c47.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:45:58.277

单独使用 CSS 是不可能的，但您可以使用 XTemplates 来做类似的事情。

我已经这样做了：

```
Ext.onReady(function(){

        var states = Ext.create('Ext.data.Store', {
            fields: ['class', 'desc', 'policy', 'ac'],
            data : [
                {"class":"1", "desc":"Medical Bills", "policy":"41000", "ac":"1"},
                {"class":"12", "desc":"One Time Payments", "policy":"41000", "ac":"1"},
                {"class":"3", "desc":"Treatment", "policy":"41000", "ac":"1"}
            ]
        });

        // Create the combo box, attached to the states data store
    Ext.create('Ext.form.ComboBox', {
        fieldLabel: 'Class Description',
        width: 400,
        store: states,
        queryMode: 'local',
        valueField: 'class',
        displayField: 'desc',
        renderTo: Ext.getBody(),
        listConfig: {
            minWidth: 500,
            tpl: new Ext.XTemplate(
                '<div class="HeaderDiv" style="width: 75px;">Class</div>' + 
                '<div class="HeaderDiv" style="width: 300px;">Description</div>' +
                '<div class="HeaderDiv" style="width: 95px;">Policy</div>'+
                '<div class="HeaderDiv" style="width: 20px;">A/C</div>' +
                '<ul style="list-style-type: none;"><tpl for=".">' + 
                '<li role="option" class="x-boundlist-item" style="list-style-type: none;"> ' + 
                    '<div class="InnerDiv" style="width: 75px;">{class}</div>' +
                    '<div class="InnerDiv" style="width: 300px;">{desc}</div>' + 
                    '<div class="InnerDiv" style="width: 95px;">{policy}</div>' + 
                    '<div class="InnerDiv" style="width: 20px;">{ac}</div>' + 
                '</li></tpl></ul>'
            )    
        }
    });
}); 
```

真的，它应该使用一个实际的表来完成，但似乎（从我尝试过的）ComboBox 需要 ul/li 标签才能正常工作。

如果你想看到它的实际效果，这里有一个 JS Fiddle：http: [//jsfiddle.net/MzdqJ/3/](http://jsfiddle.net/MzdqJ/3/)

它看起来不太好，但这应该只是玩弄 CSS 样式的一个例子。逻辑至少应该有效。

# iphone - UPnP 端口映射/转发到不同的 IP (iOS/Objective-C)

> ID：15146200
> 
> 赞同：3
> 
> 时间：2013-02-28T21:42:48.673
> 
> 标签：iphone, ios, objective-c, upnp

**免责声明：我已经仔细阅读了这里的所有类似主题并进行了谷歌搜索。这些都没有回答我的问题，所以我想要一些进一步的解释。**

是否有适用于**iOS/Objective-C**的框架可以更改UPnP 端口映射的**本地 IP 地址？**

我已经尝试过：TCMPortMapper、miniupnpc、libnatpmp ...

如果我没有错过任何东西，那么所有库都只提供类似的功能

*   *addPortMapping(internalPort,desiredExternalPort,Protocol,description)*

是否有可能在我使用的框架中更改 UPnP 映射的**目标 IP**，或者我是否需要特定的库？

# asp.net-mvc - 您可以只更新部分视图而不是整页帖子吗？

> ID：15146212
> 
> 赞同：41
> 
> 时间：2013-02-28T21:43:52.853
> 
> 标签：asp.net-mvc, jquery, knockout.js, partial-views

有没有办法在 asp.net mvc 中提交部分视图表单而不重新加载父页面，但仅将部分视图重新加载到其新状态？类似于 knockout.js 使用数据绑定进行更新的方式。

我的数据表以可变数量的列/名称呈现，所以我不认为 knockout.js 是这个选项的一个选项，所以我尝试使用部分视图。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-28T21:49:04.920

不是没有 jQuery。

您需要做的就是将您的 Partial 放在一个 div 中，例如：

```
<div id="partial">
    @Html.Partial("YourPartial")
</div> 
```

然后，要更新（例如单击带有 id 的按钮`button`），您可以执行以下操作：

```
$("#button").click(function () {
   $.ajax({
       url: "YourController/GetData",
       type: "get",
       data: $("form").serialize(), //if you need to post Model data, use this
       success: function (result) {
           $("#partial").html(result);
       }
   });
}) 
```

然后您的操作将类似于：

```
public ActionResult GetData(YourModel model) //that's if you need the model
{
    //do whatever

    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-28T21:57:09.870

实际上，如果您的 Partial 有一个子操作方法，您可以直接发布（甚至使用锚链接）到子操作并获得类似 Ajax 的效果。我们在几个视图中执行此操作。

语法是

```
@Html.Action("MyPartial") 
```

儿童行动是

```
public ActionResult MyPartial()
{
    return PartialView(Model);
} 
```

如果您的表单发布到子操作

```
@using (Html.BeginForm("MyPartial"))
{
    ...
} 
```

部分视图将使用从子操作返回的部分视图进行更新。

**Jquery 仍然是更新部分的合法方式。但从技术上讲，您的问题的答案是肯定的。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-02T21:47:32.753

通常我在寻找这样的东西时发现人们提供的信息太有限，所以我会尝试在这里提供帮助。关键是设置一个带有 ID 的 div，您可以将返回的 html 附加到该 ID。此外，当您点击控制器时，请确保它返回部分。这种方法有一些潜在的问题，但在美好的一天它应该可以工作。

```
<div id="CategoryList" class="widget">
    @{
        Html.RenderPartial("WidgetCategories.cshtml");
    }
</div>

          function DeleteCategory(CategoryID) {
            $.get('/Dashboard/DeleteWidgetCategory?CategoryID=' + CategoryID,
                function (data) {
                    if (data == "No") {
                        alert('The Category has report widgets assigned to it and cannot be deleted.');
                    }
                    else {
                        $('#CategoryList').html(data);
                    }

                }
            );
        }

    [HttpGet("DeleteWidgetCategory")]
    [HttpPost("DeleteWidgetCategory")]
    public IActionResult DeleteWidgetCategory(string CategoryID)
    {
        string Deleted = CategoryModel.DeleteCategory(CategoryID);

        if (Deleted == "Yes")
        {
            return PartialView("WidgetCategories");
        }
        else
        {
            return this.Json("No");
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T03:04:10.680

对于使用局部视图和 @html.RenderPartial("partialName") [局部帮助器的此类场景，我会使用 Ajax 表单帮助器](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.renderpartialextensions.renderpartial%28v=vs.108%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-17T03:18:45.650

在您的主视图中

```
<div id=SearchResult>
   @Html.Partial("_NameOfPartialView", Model)
</div>

<input type="button" id="btnSubmit" value="Submit"> 
```

在您的 Javascript 文件中

```
$('#btnSubmit').click(function () {
    GetData(Id);
});

function GetData(Id){
  $.ajax({
     url: "/Home/GetEmployee/",
     type: "get",
     data: { Id:Id },
     success: function (result) {
     $('#SearchResult').html(result);
     }
   });
} 
```

在您的家庭控制器中

```
public ActionResult GetEmployee(int Id)
{
   var employee= context.Employee.Where(x=> x.EmployeeId == Id)

   return this.PartialView("_NameOfPartialView", employee);
} 
```

# php - javascript .onclick 我如何隐藏其他 .onclick 选项

> ID：15146216
> 
> 赞同：0
> 
> 时间：2013-02-28T21:43:58.877
> 
> 标签：php, javascript

好的，我正在使用代码将照片覆盖在视频上方，这意味着，在有人点击照片之前，其中包含视频的 div 是隐藏的。这是我正在使用的代码。

```
<img src="http://ericavain.com/wp-content/uploads/2013/02/ravaughn.jpg" alt="ravaughn" width="610" height="390" class="aligncenter image" />
<div class="videobox" style="display:none;">
<iframe width="610" height="390" src="http://www.youtube.com/embed/rpVctT8BuVc" frameborder="0" allowfullscreen></iframe>
</div> 
```

这是脚本

```
<script>
$(function () {
    $('.image').click(function () {
        $(this).hide();
        $('.videobox').show()
        $('.videobox')[0].play();
    });
});
</script> 
```

我设置该代码的方式是，如果有人单击具有该类的照片，`.image`则该照片将消失并显示视频。

好的，现在的问题是，如果我在主页上使用该课程有多个帖子`.image`，并且有人点击了第一个帖子的照片，那么它会使第二个帖子的图像消失，因为它具有相同的课程。

有没有一种方法可以做到这一点，以便当人们单击该帖子的该图像时它会消失，而不是使所有具有该类的图像都`.image`消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:48:41.737

你能提供更多代码吗？同时你可以试试这个

```
$(function () {
    $('img').click(function () {
        var video = $(this).next('.videobox');
        $(this).hide();
        video.show()
        video[0].play();
    });
}); 
```

这样，您就可以使用`.videobox`该图像旁边的下一个。一种更简洁的方法是使用该`data`属性将图像链接到视频，或者将它们放在同一个容器中。

# msbuild - 覆盖 bin 目录

> ID：15146217
> 
> 赞同：0
> 
> 时间：2013-02-28T21:44:02.330
> 
> 标签：msbuild

我正在编写一个用于创建一键式部署的 MSBuild 脚本。一切正常，但文件是在 bin 目录下的 app.publish 中创建的。有没有办法将输出目录设置为另一个目录而不是默认的 bin 目录？

我使用了 PublishDir，但这只是在指定目录中创建 setup.exe。其他文件仍然在 bin 目录下创建。

可以将所有一键式部署路由到特定目录还是我必须稍后复制？

谢谢，

理查德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:54:44.330

您是否尝试过 OutputPath？

```
msbuild my_solution.sln /p:OutputPath=c:\my_dir 
```

# php - PHP/MYSQL 中的类别？

> ID：15146218
> 
> 赞同：0
> 
> 时间：2013-02-28T21:44:05.013
> 
> 标签：php, mysql

我尝试创建一个菜单系统，并在该菜单中根据一列显示 MySQL 中的任何内容！

### 例子

目前，我可以从我的管理面板添加产品，并将其添加到 MySQL 数据库中。当我添加一个产品时，我可以给这个产品一个品牌名称，即柴油、李维斯等。

### 问题 1

现在我知道如何通过使用在 PHP 文件中显示 MySQL 中数据库的内容`SELECT brand FROM products ...`，但这将在我的菜单中显示所有重复的品牌（例如 3 列维，6 个柴油），并且显示如下：

> 列维列维列维 柴油机 柴油机 柴油机
> _
> _ _

但我每个只需要 1 个。我怎样才能做到这一点？

### 问题 2

我如何才能将柴油类别仅与具有该品牌的产品联系起来？例如，如果有人点击柴油类别，php 将只显示具有柴油品牌的产品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:46:48.497

这些是相当简单的关系数据库问题。

1个；`DISTINCT`与您的查询一起使用

```
SELECT DISTINCT `brand` FROM `products`; 
```

2；您需要使用一个子句，基于您以某种方式`WHERE`传入的参数。`category.php`如果没有现有的代码，我们真的无法帮助您，但这应该是一个文件`category.php`无论如何都会做的事情。

也就是说，您的品牌实际上应该包含在一个单独的表中并与您的产品链接（可能是一对多关系，一个产品可以有一个品牌，但一个品牌可以有很多产品）。在我看来，在继续你的项目之前，你真的应该查阅一些数据库设计概念。

* * *

这是您的关系如何运作的非常简单的图表： ![简单的关系](../Images/5c4d795b511eeeabcfa86a023607cbbe.png)

而不是查询`products`您的品牌，您只需`SELECT name FROM brand`获取您的品牌列表。

然后，传入你的`brand_id`to `category.php`，你就可以得到这样的产品`SELECT * FROM product WHERE brand_id = 1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:48:33.280

您需要使用一些 SQL。

要获得不同的品牌：

```
'SELECT DISTINCT brand from products' 
```

获取特定品牌的产品

```
'SELECT products WHERE brand = "diesel"' 
```

编写第二个查询时要小心，以确保用户不能输入故意有害的数据。使用准备好的语句（PDO / mysqli），例如：

```
$stmt = $dbh->prepare('SELECT products WHERE brand = :brand');
$stmt->bindParam(':brand', $brand); 
```

我会回应另一个答案，并说您可能想稍微设计一下您的数据库并弄清楚数据是什么以及它与其他数据的关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T21:50:23.077

问题1：您的查询应该是这样的：

```
Select distinct brand from products 
```

问题2 ：

您应该将品牌发送到 category.php 页面：

例如链接应该是这样的：

category.php?brand=disel

然后在 category.php 页面上，您应该像这样更改您的查询：

```
 if(isset($_GET['brand']))

        mysql_query("select * from products where brand='".$_GET['brand']."'");
    else
        mysql_query("select * from products"); 
```

最好将您的品牌 ID 而不是品牌字符串发送到 category.php，因为查询具有更好的性能。

# scala - Finagle 客户端处理 onConnected 事件

> ID：15146223
> 
> 赞同：0
> 
> 时间：2013-02-28T21:44:30.203
> 
> 标签：scala, asynchronous, finagle

我正在尝试为某些 tcp 服务构建异步客户端。服务需要握手。建立初始连接后，我可以进行握手，但如果连接失败并且 finagle 重新连接，我将无法再次握手。有没有办法捕捉连接的事件？谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:10:16.507

您可以在编解码器中覆盖方法[prepareConnFactory](https://github.com/twitter/finagle/blob/master/finagle-core/src/main/scala/com/twitter/finagle/Codec.scala#L40)。基本上每次 finagle 建立连接时，它都会在将连接放入队列之前执行此方法。

[我们在ThriftClientFramedCodec](https://github.com/twitter/finagle/blob/master/finagle-thrift/src/main/scala/com/twitter/finagle/thrift/ThriftClientFramedCodec.scala#L76)中使用此功能来验证服务器是否与我们的自定义 thrift 协议兼容。

# class - 我的代码中的错误

> ID：15146224
> 
> 赞同：0
> 
> 时间：2013-02-28T21:44:33.380
> 
> 标签：class, function, lookup, matching, member

好吧，我有几个错误消息，我被卡住了。只是看看是否有人可以在这里帮助我，将不胜感激。

**这是错误消息：**

bibleajax.cpp：在函数âint main()中：

bibleajax.cpp:92: 错误: 没有匹配函数调用 Bible::lookup(Verse&, LookupResult&)

Bible.h:32：注意：候选者是：const Verse Bible::lookup(Ref, LookupResult&) make: *** [bibleajax.o] Error 1

**这是第 92 行：**

```
Ref nRef;
    Verse nVerse;

    for (int t = 0; t < num; t++){
        do {
            nRef = kjv.lookup(nVerse, result);
            nVerse = kjv.lookup(nRef, result);
           }
        while (result != ch && result != no_chapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:48:29.417

您的`Verse`类似乎没有名为`getRef()`. 您似乎还试图`lookup`通过将`Verse`对象而不是`Ref`对象传递给该函数来调用该函数……但是那段代码似乎并未包含在您在此处发布的内容中。

请注意，代码的相关行号已发布在错误消息中。因此，请检查第 79 行和第 92 行以了解我在此处提到的问题。

# xcode - Xcode：Mac OS X，删除标题栏，但保留窗口按钮

> ID：15146227
> 
> 赞同：3
> 
> 时间：2013-02-28T21:44:44.783
> 
> 标签：xcode, webview, title

我一直在寻找和寻找，但我没有任何运气。我正在尝试删除窗口中的标题栏，这很容易。但我想将按钮（关闭、最小化、调整大小）保留在窗口中。所以本质上，窗口的整个部分都可以是一个 web 视图，按钮仍然完好无损。Rdio 应用程序就是一个很好的例子，我附上了它的图片。整个白色区域是一个 webview。任何帮助将不胜感激。我对xcode有点陌生。谢谢你。

[Rdio 加载前的屏幕截图](http://i.stack.imgur.com/bFeoL.png)

# maven - Maven Pom 清理问题

> ID：15146228
> 
> 赞同：0
> 
> 时间：2013-02-28T21:44:59.383
> 
> 标签：maven, spring-mvc, pom.xml

我收到这个 maven clean 错误，错误`org.apache.maven.plugins`：

> maven-clean-plugin:2.4.1:clean 无法删除 C:\Users\Hobbs\git\heroku\reservosity\target\tomcat.8080\work\Tomcat\localhost_\WEB-INF\lib\mysql-connector-java -5.1.20.jar

不知道为什么会这样。任何帮助，将不胜感激。

日志：

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 08:44:56+0000)
Maven home: C:\Users\Hobbs\git\heroku\reservosity\EMBEDDED
Java version: 1.7.0_04, vendor: Oracle Corporation
Java home: C:\Program Files\Java\jre7
Default locale: en_IE, platform encoding: Cp1252
OS name: "windows 7", version: "6.1", arch: "amd64", family: "windows"
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
[INFO] Error stacktraces are turned on.
[DEBUG] Reading global settings from EMBEDDED\conf\settings.xml
[DEBUG] Reading user settings from C:\Users\Hobbs\.m2\settings.xml
[DEBUG] Using local repository at C:\Users\Hobbs\.m2\repository
 [DEBUG] Using manager EnhancedLocalRepositoryManager with priority 10 for C:\Users\Hobbs\.m2\repository
    [INFO] Scanning for projects...
    [DEBUG] Extension realms for project com.example:Reservosity:war:0.0.1-SNAPSHOT: (none)
    [DEBUG] Looking up lifecyle mappings for packaging war from ClassRealm[plexus.core, parent: null]
 [WARNING] 
 [WARNING] Some problems were encountered while building the effective model for com.example:Reservosity:war:0.0.1-SNAPSHOT
 [WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-compiler-plugin is missing. @ line 232, column 12
 [WARNING] 
 [WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
 [WARNING] 
 [WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
 [WARNING] 
 [DEBUG] === REACTOR BUILD PLAN ================================================
 [DEBUG] Project: com.example:Reservosity:war:0.0.1-SNAPSHOT
 [DEBUG] Tasks:   [clean]
[DEBUG] Style:   Regular
[DEBUG] =======================================================================
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Reservosity 0.0.1-SNAPSHOT
 [INFO] ------------------------------------------------------------------------
[DEBUG] Lifecycle default -> [validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy]
[DEBUG] Lifecycle clean -> [pre-clean, clean, post-clean]
[DEBUG] Lifecycle site -> [pre-site, site, post-site, site-deploy]
[DEBUG] Lifecycle default -> [validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy]
[DEBUG] Lifecycle clean -> [pre-clean, clean, post-clean]
[DEBUG] Lifecycle site -> [pre-site, site, post-site, site-deploy]
[DEBUG] === PROJECT BUILD PLAN ================================================
[DEBUG] Project:       com.example:Reservosity:0.0.1-SNAPSHOT
[DEBUG] Dependencies (collect): []
[DEBUG] Dependencies (resolve): []
[DEBUG] Repositories (dependencies): [central (http://repo.maven.apache.org/maven2, releases)]
[DEBUG] Repositories (plugins)     : [central (http://repo.maven.apache.org/maven2, releases)]
[DEBUG] -----------------------------------------------------------------------
[DEBUG] Goal:          org.apache.maven.plugins:maven-clean-plugin:2.4.1:clean (default-clean)
[DEBUG] Style:         Regular
    [DEBUG] Configuration: <?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <directory default-value="${project.build.directory}"/>
 <excludeDefaultDirectories default-value="false">${clean.excludeDefaultDirectories}     </excludeDefaultDirectories>
  <failOnError default-value="true">${maven.clean.failOnError}</failOnError>
   <followSymLinks default-value="false">${clean.followSymLinks}</followSymLinks>
    <outputDirectory default-value="${project.build.outputDirectory}"/>
   <reportDirectory default-value="${project.reporting.outputDirectory}"/>
   <skip default-value="false">${clean.skip}</skip>
   <testOutputDirectory default-value="${project.build.testOutputDirectory}"/>
   <verbose>${clean.verbose}</verbose>
   </configuration>
[DEBUG] =======================================================================
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ Reservosity ---
[DEBUG] Created new class realm maven.api
[DEBUG] Importing foreign packages into class realm maven.api
[DEBUG]   Imported: org.apache.maven.wagon.events < plexus.core
[DEBUG]   Imported: org.sonatype.aether.transfer < plexus.core
[DEBUG]   Imported: org.apache.maven.exception < plexus.core
[DEBUG]   Imported: org.sonatype.aether.metadata < plexus.core
[DEBUG]   Imported: org.codehaus.plexus.util.xml.Xpp3Dom < plexus.core
[DEBUG]   Imported: org.sonatype.aether.collection < plexus.core
 [DEBUG]   Imported: org.sonatype.aether.version < plexus.core
  [DEBUG]   Imported: org.apache.maven.monitor < plexus.core
  [DEBUG]   Imported: org.apache.maven.wagon.repository < plexus.core
  [DEBUG]   Imported: org.apache.maven.repository < plexus.core
 [DEBUG]   Imported: org.apache.maven.wagon.resource < plexus.core
 [DEBUG]   Imported: org.codehaus.plexus.logging < plexus.core
 [DEBUG]   Imported: org.apache.maven.profiles < plexus.core
[DEBUG]   Imported: org.sonatype.aether.repository < plexus.core
[DEBUG]   Imported: org.apache.maven.classrealm < plexus.core
[DEBUG]   Imported: org.apache.maven.execution < plexus.core
[DEBUG]   Imported: org.sonatype.aether.artifact < plexus.core
 [DEBUG]   Imported: org.sonatype.aether.spi < plexus.core
 [DEBUG]   Imported: org.apache.maven.reporting < plexus.core
 [DEBUG]   Imported: org.apache.maven.usability < plexus.core
 [DEBUG]   Imported: org.codehaus.plexus.container < plexus.core
 [DEBUG]   Imported: org.codehaus.plexus.component < plexus.core
 [DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlSerializer < plexus.core
 [DEBUG]   Imported: org.apache.maven.wagon.authentication < plexus.core
 [DEBUG]   Imported: org.apache.maven.lifecycle < plexus.core
 [DEBUG]   Imported: org.codehaus.plexus.classworlds < plexus.core
  [DEBUG]   Imported: org.sonatype.aether.graph < plexus.core
 [DEBUG]   Imported: org.sonatype.aether.* < plexus.core
 [DEBUG]   Imported: org.apache.maven.settings < plexus.core
 [DEBUG]   Imported: org.codehaus.classworlds < plexus.core
 [DEBUG]   Imported: org.sonatype.aether.impl < plexus.core
  [DEBUG]   Imported: org.apache.maven.wagon.* < plexus.core
  [DEBUG]   Imported: org.apache.maven.toolchain < plexus.core
 [DEBUG]   Imported: org.sonatype.aether.deployment < plexus.core
  DEBUG]   Imported: org.apache.maven.wagon.observers < plexus.core
  [DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlPullParserException < plexus.core
  [DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlPullParser < plexus.core
 [DEBUG]   Imported: org.apache.maven.configuration < plexus.core
  [DEBUG]   Imported: org.apache.maven.cli < plexus.core
  [DEBUG]   Imported: org.sonatype.aether.installation < plexus.core
  [DEBUG]   Imported: org.codehaus.plexus.context < plexus.core
  [DEBUG]   Imported: org.apache.maven.wagon.authorization < plexus.core
 [DEBUG]   Imported: org.apache.maven.project < plexus.core
 [DEBUG]   Imported: org.apache.maven.rtinfo < plexus.core
  [DEBUG]   Imported: org.codehaus.plexus.lifecycle < plexus.core
  [DEBUG]   Imported: org.codehaus.plexus.configuration < plexus.core
  [DEBUG]   Imported: org.apache.maven.artifact < plexus.core
  [DEBUG]   Imported: org.apache.maven.model < plexus.core
   [DEBUG]   Imported: org.apache.maven.* < plexus.core
  [DEBUG]   Imported: org.apache.maven.wagon.proxy < plexus.core
    [DEBUG]   Imported: org.sonatype.aether.resolution < plexus.core
   [DEBUG]   Imported: org.apache.maven.plugin < plexus.core
   [DEBUG]   Imported: org.codehaus.plexus.* < plexus.core
       [DEBUG]   Imported: org.codehaus.plexus.personality < plexus.core
      [DEBUG] Populating class realm maven.api
     [DEBUG] org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1:
      [DEBUG]    org.apache.maven:maven-plugin-api:jar:2.0.6:compile
      [DEBUG]    org.codehaus.plexus:plexus-utils:jar:2.0.5:compile
      [DEBUG] Created new class realm plugin>org.apache.maven.plugins:maven-clean-plugin:2.4.1
      [DEBUG] Importing foreign packages into class realm plugin>org.apache.maven.plugins:maven-clean-plugin:2.4.1
     [DEBUG]   Imported:  < maven.api
     [DEBUG] Populating class realm plugin>org.apache.maven.plugins:maven-clean-plugin:2.4.1
     [DEBUG]   Included: org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1
     [DEBUG]   Included: org.codehaus.plexus:plexus-utils:jar:2.0.5
     [DEBUG]   Excluded: org.apache.maven:maven-plugin-api:jar:2.0.6
       [DEBUG] Configuring mojo org.apache.maven.plugins:maven-clean-plugin:2.4.1:clean from plugin realm ClassRealm[plugin>org.apache.maven.plugins:maven-clean-plugin:2.4.1, parent: sun.misc.Launcher$AppClassLoader@2d8ed284]
   [DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-clean-plugin:2.4.1:clean' with basic configurator -->
   [DEBUG]   (f) directory = C:\Users\Hobbs\git\heroku\reservosity\target
   [DEBUG]   (f) excludeDefaultDirectories = false
   [DEBUG]   (f) failOnError = true
   [DEBUG]   (f) followSymLinks = false
   [DEBUG]   (f) outputDirectory = C:\Users\Hobbs\git\heroku\reservosity\target\classes
   [DEBUG]   (f) reportDirectory = C:\Users\Hobbs\git\heroku\reservosity\target\site
   [DEBUG]   (f) skip = false
   [DEBUG]   (f) testOutputDirectory = C:\Users\Hobbs\git\heroku\reservosity\target\test-classes
   [DEBUG] -- end configuration --
  [INFO] Deleting C:\Users\Hobbs\git\heroku\reservosity\target
   [INFO] Deleting file C:\Users\Hobbs\git\heroku\reservosity\target\tomcat.8080\work\Tomcat\localhost\_\WEB-INF\lib\mysql-connector-java-5.1.20.jar
   [INFO] ------------------------------------------------------------------------
   [INFO] BUILD FAILURE
   [INFO] ------------------------------------------------------------------------
   [INFO] Total time: 0.408s
  [INFO] Finished at: Thu Feb 28 21:21:27 GMT 2013
  [INFO] Final Memory: 4M/121M
    [INFO] ------------------------------------------------------------------------
         [ERROR] Failed to execute goal org.apache.maven.plugins:maven-clean-       plugin:2.4.1:clean (default-clean) on project Reservosity:
  Failed to clean project: Failed to delete C:\Users\Hobbs\git\heroku\reservosity\target\tomcat.8080\work\Tomcat\localhost 
   \_\WEB-INF\lib\mysql-connector-java-5.1.20.jar -> [Help 1]
   org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal   
  org.apache.maven.plugins:maven-clean-plugin:2.4.1:clean (default-clean) on project
  Reservosity: Failed to clean project: Failed to delete C:\Users\Hobbs\git\heroku    \reservosity\target\tomcat.8080\work\Tomcat\localhost\_\WEB-INF\lib\mysql-connector-  java-5.1.20.jar 
```

POM.xml：

```
<modelVersion>4.0.0</modelVersion>
<groupId>com.example</groupId>
<artifactId>Reservosity</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>

<properties>
    <org.springframework.version>3.1.1.RELEASE</org.springframework.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>org.hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>2.2.8</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.20</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency>
    <dependency>
        <groupId>com.github.jsimone</groupId>
        <artifactId>webapp-runner</artifactId>
        <version>7.0.27.1</version>
        <scope>provided</scope>
    </dependency>

    <!-- Tiles dependency -->
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-core</artifactId>
        <version>3.0.1</version>
    </dependency>

    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-jsp</artifactId>
        <version>3.0.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-api</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-servlet</artifactId>
        <version>3.0.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-template</artifactId>
        <version>3.0.1</version>
    </dependency>

    <!-- Security -->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.1.3.RELEASE</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-asm</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.9.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>4.1.9.Final</version>
    </dependency>
    <dependency>
        <groupId>joda-time</groupId>
        <artifactId>joda-time</artifactId>
        <version>2.1</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.11</version>
    </dependency>
    <!-- Junit API -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.9.5</version>
    </dependency>

    <!-- JavaMail API -->
    <dependency>
        <groupId>javamail</groupId>
        <artifactId>javamail</artifactId>
        <version>1.3.3</version>
    </dependency>
    <!-- Java Activation -->
    <dependency>
        <groupId>javax.activation</groupId>
        <artifactId>activation</artifactId>
        <version>1.1.1</version>
    </dependency>
    <!-- JavaMail extension -->
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.6-rc1</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.1</version>
    </dependency>
    <!-- slf4j-bridge for commons-logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>1.7.1</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.7.1</version>
    </dependency>

    <!-- The newrelic-agent.jar dependency. -->
    <dependency>
        <groupId>com.newrelic.agent.java</groupId>
        <artifactId>newrelic-agent</artifactId>
        <version>2.12.0</version>
        <scope>provided</scope>
    </dependency>
    <!-- The newrelic-api.jar dependency. -->
    <dependency>
        <groupId>com.newrelic.agent.java</groupId>
        <artifactId>newrelic-api</artifactId>
        <version>2.12.0</version>
        <scope>compile</scope>
    </dependency>
    <!-- The newrelic-java.zip dependency. -->
    <dependency>
        <groupId>com.newrelic.agent.java</groupId>
        <artifactId>newrelic-java</artifactId>
        <version>2.12.0</version>
        <scope>provided</scope>
        <type>zip</type>
    </dependency>
    <dependency>
        <groupId>aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.5.4</version>
    </dependency>
    <dependency>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.2</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.4</version>
            <executions>
                <execution>
                    <id>unpack-zip</id>
                    <phase>package</phase>
                    <goals>
                        <goal>unpack-dependencies</goal>
                    </goals>
                    <configuration>
                        <artifactItems>
                            <artifactItem>
                                <groupId>com.newrelic.agent.java</groupId>
                                <artifactId>newrelic-java</artifactId>
                                <version>theVersion</version>
                                <type>zip</type>
                                <overWrite>true</overWrite>
                                <outputDirectory>target</outputDirectory>
                                <destFileName>newrelic</destFileName>
                            </artifactItem>
                        </artifactItems>
                        <outputDirectory>/newrelic</outputDirectory>
                    </configuration>
                </execution>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <artifactItems>
                            <artifactItem>
                                <groupId>com.github.jsimone</groupId>
                                <artifactId>webapp-runner</artifactId>
                                <version>7.0.27.1</version>
                                <destFileName>webapp-runner.jar</destFileName>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:51:41.583

如果文件因 Tomcat 仍在运行而被锁定，则可能会发生这种情况。

在尝试清理之前杀死 tomcat 进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:51:18.233

它无法删除文件，具体来说`C:\Users\Hobbs\git\heroku\reservosity\target\tomcat.8080\work\Tomcat\localhost\_\WEB-INF\lib\mysql-connector-java-5.1.20.jar`，该文件是否仍在使用中，或者另一个 maven 或 java 进程正在运行？

# html5-video - 视频标签的 cue.enter 事件不起作用？

> ID：15146230
> 
> 赞同：0
> 
> 时间：2013-02-28T21:45:06.210
> 
> 标签：html5-video

我尝试了以下代码（使用 html5 视频标签的 javascript 命令）但失败了。我想知道是否有一些非常明显的事情我做错了。每当输入提示时，我都会尝试让视频暂停......这是代码：

```
var cue0 = new TextTrackCue(20.200,20.200, ' woman in defensive karate pose');
cue0.id = 'cue0';
cue0.onenter="function() {myPlayer.pause();}"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:05:11.863

您的代码可能存在很多问题。我明白了，startTime 等于 endTime，这意味着你的提示永远不会被输入。

我做了一个简单的[工作示例](http://jsfiddle.net/trixta/WvJ75/)

```
cue = new TextTrackCue(5, 15, "woman in defensive karate pose"); 
```

# objective-c - 在 cancelPreviousPerformRequestsWithTarget 后自行解除分配

> ID：15146235
> 
> 赞同：4
> 
> 时间：2013-02-28T21:45:16.700
> 
> 标签：objective-c, automatic-ref-counting, selector

使用 ARC 和 iOS 6.1，我在这里有一个简单的类来演示我的问题：

```
#import <GHUnitIOS/GHUnit.h>

@interface MyClass : NSObject
@property BOOL cancel;
@property BOOL dead;
-(void)doSomething;
-(void)reset;
-(void)logMe;
@end

@implementation MyClass

-(id)init {
    self = [super init];
    if(self) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reset) name:@"dude" object:nil];
        NSLog(@"I'm alive");
    }
    return self;
}

-(void)dealloc {
    _dead = YES;
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [MyClass cancelPreviousPerformRequestsWithTarget:self];
    NSLog(@"I'm dead");
}

-(void)doSomething {
    NSLog(@"dude:%d", _dead);
    if(!_cancel) {
        [self performSelector:@selector(doSomething) withObject:nil afterDelay:0.2];
        NSLog(@"scheduled");
    }
    [self logMe];
}

-(void)reset {
    NSLog(@"reset");
    [MyClass cancelPreviousPerformRequestsWithTarget:self];
    _cancel = YES;
    [self doSomething];
}

-(void)logMe {
    NSLog(@"logme");
}
@end

@interface ATest : GHTestCase
@end

@implementation ATest

-(BOOL)shouldRunOnMainThread {return YES;}
-(void)setUpClass {}
-(void)tearDownClass {}
-(void)setUp {}
-(void)tearDown {}

-(void)testBlah {
    MyClass* blah = [[MyClass alloc] init];
    [blah doSomething];
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^(void){
        [[NSNotificationCenter defaultCenter] postNotificationName:@"dude" object:nil];
    });
    blah = nil;
}

@end 
```

在测试中，`MyClass`被实例化并启动`doSomething`，它执行一些工作（即日志记录），然后在 0.25 秒后调用自身（如果`_cancel`为假）。同时，我安排在 1.0 秒后触发通知（最终设置`_cancel`为 true）。然后我nil了`blah`。

所以我的期望是由`performSelector:withObject:withDelay`拥有对`MyClass`.

但是，当我在启用僵尸的情况下运行此测试时，我得到以下输出：

> 2013-02-28 15:30:55.518 测试[11946:c07] ATest/testBlah
> 2013-02-28 15:30:56.789 测试[11946:c07] 重新运行：ATest/testBlah
> 2013-02-28 15:30 ：56.790 测试[11946:c07] 我还活着
> 2013-02-28 15:30:56.790 测试[11946:c07] 伙计：0
> 2013-02-28 15:30:56.791 测试[11946:c07] 预定
> 2013- 02-28 15:30:56.791 测试[11946:c07] logme
> 2013-02-28 15:30:56.792 测试[11946:c07] ATest/testBlah ✔ 0.00s
> 2013-02-28 15:30:56.991 测试[11946 ：c07] 伙计：0
> 2013-02-28 15:30:56.992 测试 [11946:c07] 计划于
> 2013-02-28 15:30:56.992 测试 [11946:c07] logme
> 2013-02-28 15:30:57.193测试 [11946:c07] 伙计：0
> 2013-02-28 15:30:57.194 测试 [11946:c07] 已安排
> 2013-02-28 15:30:57.194 测试[11946:c07] logme
> 2013-02-28 15:30:57.395 测试[11946:c07] 老兄：0
> 2013-02-28 15:30:57.395 测试[11946: c07] 预定
> 2013-02-28 15:30:57.396 测试[11946:c07] logme
> 2013-02-28 15:30:57.596 测试[11946:c07] dude:0
> 2013-02-28 15:30:57.597 测试[11946:c07] 预定
> 2013-02-28 15:30:57.597 测试 [11946:c07] logme
> 2013-02-28 15:30:57.792 测试 [11946:c07] 重置
> 2013-02-28 15:30:57.793测试[11946:c07] 我死了
> 2013-02-28 15:30:57.793 测试[11946:c07] *** -[MyClass doSomething]: 消息发送到释放的实例 0xb584880

为什么在`self`我调用方法后被释放？`cancelPreviousPerformRequestsWithTarget:``reset`

这个问题是 ARC 问题还是编码错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:50:23.197

整洁的问题。我将其称为 NSNotificationCenter 中的错误。这是具有相同行为的代码的简化版本。我们所做的只是让自己听一个通知，并通过一个强（静态）引用让自己保持活力。当通知消失时，我们会清除该引用。（在您的情况下，对您的对象的最后一个强引用是在`performSelector:`机器中； a 的目标`performSelector:`被保留，当您取消它时，它释放了对您的引用。）

```
@interface MyClass : NSObject
@end

static MyClass *instance;

@implementation MyClass

-(id)init {
    self = [super init];
    if(self) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(clearReference) name:@"dude" object:nil];
        NSLog(@"I'm alive");
        instance = self;
    }
    return self;
}

- (void)clearReference {
    instance = nil;
    [self logMe];
}

-(void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    NSLog(@"I'm dead");
}

-(void)logMe {
    NSLog(@"logme");
}

@end

// Test case
[[MyClass alloc] init];
[[NSNotificationCenter defaultCenter] postNotificationName:@"dude" object:nil]; 
```

这会导致在`[self logMe]`. 原因是`clearReference`，当我们这样做时`instance = nil;`，这是对我们的最后一个强引用，所以我们在调用之前就被释放了`[self logMe];`。但是，您可能会问，为什么 ARC 不支持我们？

好吧，ARC 从不保留 self，因为*通常*可以安全地假设方法的调用者对 self 有强引用，如果每个方法都必须保留/释放 self，这将增加很多开销。（对于在 ARC 下编译的代码，这个假设实际上总是正确的，因为要在对象上调用方法，您首先需要对它的引用。）不幸的是，NSNotificationCenter 在调用您的方法之前没有保留您的对象。我将其称为错误：在非 ARC 代码中，在调用某个未知回调之前确保您至少有一个对对象的临时强引用通常是礼貌的：

```
id objectToCall = ...;
[objectToCall retain];
[objectToCall performSelector:...]; // the actual callback
[objectToCall release]; 
```

这样的代码将确保您看到的崩溃不会发生。显然，NSNotificationCenter 并没有这样做。您可以通过查看 Zombies 工具中对象的保留历史来验证这一点。

由于您无法更改 NSNotificationCenter，因此当您可能被释放并且您的调用者可能不会对您持有强引用时，我曾经使用过一种公认的丑陋解决方法，如下所示：

```
- (void)clearReference {
    CFRetain((__bridge CFTypeRef)(self));
    instance = nil;
    [self logMe];
    CFRelease((__bridge CFTypeRef)(self));
} 
```

这样，至少，您可以确定在方法结束之前不会被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-07T02:36:13.527

__weak typeof (self) (weakSelf) = self;而不是retain-release之舞：

```
CFRetain((__bridge CFTypeRef)(self));
[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(foo) object:nil];
[self bar];
CFRelease((__bridge CFTypeRef)(self)); 
```

我更喜欢这样的ARC方式：

```
__weak typeof (self) (weakSelf) = self;
[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(foo) object:nil];
[weakSelf bar]; 
```

如果第 2 行进行自我释放，则第 3 行的 weakSelf 将是 nil 而不是僵尸指针，并且 [nil bar] 是安全的。

而weakSelf解决方案有2个优势：

1、在retain-release dance方案中，【self bar】消耗CPU时间，没有任何意义。
2\. 弱点比把一个对象转成CFType，手动调用retain和release看起来漂亮。

ps
像任何其他 xxxxx 舞蹈一样，我想将 weakSelf 解决方案命名为“哲学舞蹈”:)

# ruby-on-rails-3.2 - CKeditor 在 Rails 3.2 中被 Asset Pipeline 破坏（开发和生产）

> ID：15146242
> 
> 赞同：0
> 
> 时间：2013-02-28T21:45:44.677
> 
> 标签：ruby-on-rails-3.2, ckeditor, asset-pipeline

我使用ckeditor gem。在我将 ckeditor-files 复制到公共文件夹之后，上次一切正常。但是在资产预编译之后，ckeditor 突然（再次）在开发和生产中消失了。

带有“CKEDITOR_BASEPATH = '/assets/ckeditor'”的 ckeditor.js 已成功包含在我的 html 输出的标题中，但未显示 textarea。

服务器日志说：

```
 Served asset /ckeditor/skins/kama/editor.css - 404 Not Found (5ms) 
```

但它同时存在于：app/assets/ckeditor/skins 和 app/public/assets/ckeditor/skins 中。

太棒了

我尝试换成月光皮肤，因为那是随宝石一起交付的。但是，我无法编译我的自定义 app/assets/ckeditor/config.js 文件。app/public/assets/ckeditor/config.js 总是看起来不同。我把它删了重新编译，又坏了。有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:36:15.503

我仍然不确定问题的根源。不过解决了。

在将我的 ckeditor 文件从 app/assets/ckeditor 移动到 app/assets/ **javascripts** /ckeditor 之后，它再次开始预编译它们，这很棒，因为之后我就可以使用我的 config.js。我在公共/资产中也有一些奇怪的剩余 ckeditor 文件，我不得不删除它们。我想知道为什么从 Rails 3.2 更新到 3.2.11 似乎让我的资产管道忽略了 app/assets 中的文件夹。

第二件事：然后使用这些预编译文件，似乎在 application.js 清单中提及它们是不够的。相反，我将以下内容放入 application.html.erb 的标头中：

```
<script type="text/javascript">var CKEDITOR_BASEPATH = '/assets/ckeditor';</script>
<% if controller.action_name == 'edit' then %>
    <%= javascript_include_tag  "/assets/ckeditor/config", "/assets/ckeditor/init" %>
<% end %> 
```

所以，现在它可以工作了。祝大家好运！

# ibm-mobilefirst - 正在加载的 url 是 jsp 或服务器端资源的 WL Webview 中是否可用 cordova

> ID：15146243
> 
> 赞同：0
> 
> 时间：2013-02-28T21:46:00.540
> 
> 标签：ibm-mobilefirst

我正在使用 worklight webview (super.loadUrl("hostname:port/Myapplciation",false)) 加载 jsp 或服务器端应用程序。我的问题是，cordova 相关的功能是否会在 WL webview 内部起作用。如果它不起作用，那么真正的原因是什么，因为我已经读过 WL 混合应用程序在 webview 中运行并且cordova 在那里工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:27:33.250

是的，它会工作。

（添加更多文本以使答案至少有 30 个字符长，以便可以提交）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:22:26.080

我没有可以尝试的工作环境，但我怀疑从任一位置获取 JS 文件都应该可行，但最好从设备获取它们，因为这样你就不会出现缓存未命中和远程下载，您无需将它们托管在远程服务器上。

# jquery - 抓取可见的 div 附加图像

> ID：15146246
> 
> 赞同：1
> 
> 时间：2013-02-28T21:46:06.200
> 
> 标签：jquery

我被困在为什么这行不通。`div`用 of 类抓取可见的`.open`，然后`div`用of 类抓取 并在其上`.edititable`附加图像。

请任何帮助都会很棒。

这是我的代码：

```
$('#imagefiles ul li img').click(function() {
    //Get the source of the image that was clicked
    var img = $(this).attr('src');
    //grab the visible div and the div with class edititable within it and append image
    $(".open:visible.edititable").append('<img src="' + img + '" style="width:30%; height:30%;" ">');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:48:59.637

我认为`.open.edititable:visible`可能更正确。我不认为你可以在伪选择器之后上课。

虽然我很困惑：

```
//grab the visible div and the div with class edititable within it and append image 
```

你想要一个`.open:visible`和一个`.edititable`div（2 个 div）还是你想要一个 div 和两个类`.open`，`.edititable`那也是`visible`？或者您是否希望子 div 的类`.editable`位于 div 中的类`.open`也是`visible`.

`.open.edititable:visible`将使用两个类`open`和`edititable`. `.open:visible .edititable`将获取具有类的 div ，该类`edititable`是具有类的可见 div 的子级`open`。

# cakephp - 带有语言、slug、分页的 CakePHP 路由器

> ID：15146247
> 
> 赞同：0
> 
> 时间：2013-02-28T21:46:08.027
> 
> 标签：cakephp, url-rewriting, routing, pagination, cakephp-1.3

使用 CakePHP 1.3 我试图获得具有语言、slug、分页、顺序的路由器。

目前我有这些：

```
Router::connect('/', array('controller' => 'pages', 'action' => 'index'));
Router::connect("/:controller/:slug", array('action' => 'view'), array('pass' => array('slug')));
Router::connect("/:lang", array('controller' => 'pages', 'action' => 'index'), array('lang' => 'fr|en|de'));
Router::connect("/:lang/:controller/:slug", array('action' => 'view'), array('lang' => 'fr|en|de', 'pass' => array('slug'))); 
```

并且那些正在使用 language 和 slug set 或 slug 和 pagination ，但是它们都失败了：

```
OK - /pages/view/page-slug/page:2
OK - /fr/pages/page-slug
FAIL - /pages/view/page-slug/page:2/lang:fr 
```

我努力了

```
<?php $this->Paginator->options(array('url' => $this->passedArgs)); ?> 
```

在分页器之前，但结果仍然相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:51:53.363

试试这段代码

```
Router::connectNamed(array('language','pagination','order','slug'));
    Router::connect('/lang/pagination/:slug:order', array(
        'plugin' => false,
        'controller' => 'pages', 
        'action' => 'index',
        ),array(
            "pass"=>array("lang","pagination","slug","order")
        ),array(
            'pagination' => '[0-9]+',
            'order' => '[0-9]+',
        )
    ); 
```

# android - 图像无法在 Galaxy S3 上加载

> ID：15146250
> 
> 赞同：2
> 
> 时间：2013-02-28T21:46:19.797
> 
> 标签：android, image

我面临一个奇怪的问题，这已经让我发疯了，所以任何帮助都是非常受欢迎和感激的。

我创建了一个 Android 应用程序，它在各种手机和平板电脑上运行良好，但在某些 Galaxy S3 设备上，根本没有加载图像。

以下是我自己的事实和我从应用程序的投诉用户那里收集的信息：

*   所有图像都打包在应用程序的可绘制文件夹中，因此可以从所有分辨率访问
*   图像由`mypackage.R.drawable.image_id`或直接`@drawable/image_id`在 XML中引用
*   图像是半透明的，并以`.gif`格式存储
*   总共有大约 40 张图像，每张是 25x25 像素，“最大”是 1.25Kb
*   目前我只收到来自 S3 所有者的投诉
*   问题发生在标准操作系统上而不是自定义 rom 上（至少我没有关于自定义 rom 的信息）
*   至少一位面临此问题的 S3 所有者声称他的手机已更新到最新的 Android 版本
*   在许多 S3 设备上，该问题不可重现，并且应用程序按设计工作
*   我正在 S2、S3、HTC Desire、索尼平板电脑 S，当然还有模拟器上测试我的应用程序 - 在所有我无法重现该问题的应用程序上
*   我正在使用`FrameLayout`，主绘图区域占据整个空间，控件（使用图像的地方）被打包在 a`LinearLayout`中，它漂浮在上方

这是市场上应用程序的链接：

[https://play.google.com/store/apps/details?id=com.rts.android.spacesim&feature=search_result](https://play.google.com/store/apps/details?id=com.rts.android.spacesim&feature=search_result)

这并不是推广我的应用程序的某种奇怪方式，如果您是 S3 所有者并决定检查问题是否可以在您的设备上重现，请在此处写下评论，如果是，如果不是 - 您观察到什么。

**我的问题是：**

*   有没有人观察到这样的问题？
*   任何想法如何克服它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:06:52.680

以下链接表明 GIF 支持可能会在 4.1 上再次中断，如果我没记错的话，大多数 Galaxy S3 都在运行。我的个人手机目前是 Galaxy S3，上面有 4.1.1

[GIF 在三星 Galaxy Note 2 上不显示](https://stackoverflow.com/questions/14149852/gif-doesnt-display-on-samsung-galaxy-note-2)

[http://code.google.com/p/android/issues/detail?id=3422](http://code.google.com/p/android/issues/detail?id=3422)

为什么不使用png？

# .net - 将单个枚举值传递给 WCF 服务时，protobuf-net 引发有关无效线路类型的异常

> ID：15146256
> 
> 赞同：0
> 
> 时间：2013-02-28T21:46:39.903
> 
> 标签：.net, wcf, c#-4.0, protobuf-net

在我的 wcf 服务上调用以下方法……

```
ObservableCollection<PatientViewModel> Search(List<string> searchTerms, SearchNature nature, SearchMode mode, List<SearchField> fields) 
```

导致以下异常...</p>

```
ProtoBuf.ProtoException, protobuf-net, Version=2.0.0.627, Culture=neutral, PublicKeyToken=75e2634e27c46854

Invalid wire-type; this usually means you have over-written a file without truncating or setting the length; see http://stackoverflow.com/q/2152978/23354

ProtoBuf.ProtoReader.ReadInt32()
proto_4(Object , ProtoReader )
ProtoBuf.ServiceModel.XmlProtoSerializer.ReadObject(XmlDictionaryReader reader, Boolean verifyObjectName)
System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.PartInfo.ReadObject(XmlDictionaryReader reader, XmlObjectSerializer serializer)
System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameterPart(XmlDictionaryReader reader, PartInfo part, Boolean isRequest)
System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameters(XmlDictionaryReader reader, PartInfo[] parts, Object[] parameters, Boolean isRequest)
System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, String action, MessageDescription messageDescription, Object[] parameters, Boolean isRequest)
System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message message, Object[] parameters, Boolean isRequest)
System.ServiceModel.Dispatcher.OperationFormatter.DeserializeRequest(Message message, Object[] parameters)
System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

注意：如果我删除第二个和第三个参数。所以方法是……</p>

```
ObservableCollection<PatientViewModel> Search(List<string> searchTerms, List<SearchField> fields) 
```

这工作正常。

参数字段是一个枚举列表，可以毫无问题地反序列化。

为什么单个枚举值会导致上述异常？

提前致谢。

供你参考...

```
[DataContract]
public enum SearchNature
{
    [EnumMember] None,
    [EnumMember] Letters,
    [EnumMember] Numbers
}

[DataContract]
public enum SearchMode
{
    [EnumMember] None,
    [EnumMember] BeginsWith,
    [EnumMember] Contains
}

[DataContract]
public enum SearchField
{
    [EnumMember] None,
    [EnumMember] FirstName,
    [EnumMember] LastName,
    [EnumMember] PatientId,
    [EnumMember] PriorId,
    [EnumMember] PhoneNumber,
    [EnumMember] DateOfBirth
} 
```

编辑：

此外，如果我在类型是枚举而不是 XmlProtoSerializer 时将 ProtoOperationBehavior 更改为使用默认序列化程序，则服务调用可以正常工作。

```
public override XmlObjectSerializer CreateSerializer(Type type, System.Xml.XmlDictionaryString name, System.Xml.XmlDictionaryString ns, IList<Type> knownTypes)
{
    if (type.IsEnum) return base.CreateSerializer(type, name, ns, knownTypes);
    if (model == null) throw new InvalidOperationException("No Model instance has been assigned to the ProtoOperationBehavior");
    return XmlProtoSerializer.TryCreate(model, type) ?? base.CreateSerializer(type, name, ns, knownTypes);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:14:13.157

枚举、int、double、string 等本身不是有效的协议缓冲区消息。您必须使它们成为对象的字段或属性，然后序列化该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:06:56.590

If you make a class and pass that into your search instead you should get what you need. Hopefully this will help.

If you then have the serializer in place it will give you back an operational class object.

```
[ProtoContract()]
public class PatientSearch
{
    public PatientSearch()
    {
        searchTerms = new List<string>();
        fields = new List<SearchField>();
    }
    [ProtoMember(1)]
    public List<string>searchTerms {get;private set;}

    [ProtoMember(2)]
    public SearchNature Nature {get; set;}
    [ProtoMember(3)]
    public SearchMode Nature {get; set;}
    [ProtoMember(4)]
    public  List<SearchField> fields {get; private set;}

} 
```

# ruby-on-rails - ruby on rails 处理 url 参数

> ID：15146265
> 
> 赞同：0
> 
> 时间：2013-02-28T21:47:00.053
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我来自 PHP 背景，在理解如何处理 rails 处理 post、获取请求数据等方面遇到了很多麻烦。

我有一个超链接，我让它去

```
http:/localhost/clients/1/?office_id=2 
```

在我的控制器中，我尝试了

```
def show
   @office_id=params[:office_id]
end 
```

在我看来，我只是想显示该变量

```
@office_id 
```

但它不显示任何内容。我的超链接不正确还是我遗漏了其他内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:55:39.923

我道歉。在我看来，我将其显示为：

```
- @office_id 
```

我没有意识到上面只是评估它而不是显示它。

将其更改为

```
= @office_id 
```

让它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:57:21.570

你的控制器：

```
def show
  # assuming you have an Office object..
  @office = Office.find(params[:office_id])
end 
```

然后在你看来：

```
= @office.attribute # or if you just want to display its ID then : @office.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:49:59.213

使用 http:/localhost/clients/1?office_id=2，在你的 url 中没有最后一个 /。正如本杰明所说，查看您的日志文件以查看参数是否通过您的控制器方法。如果不是，那么您还有其他事情发生。

# ruby-on-rails - 如何将 select2-rails 与 simple_form 一起使用？

> ID：15146269
> 
> 赞同：15
> 
> 时间：2013-02-28T21:47:10.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form, jquery-select2, select2-rails

[这个](http://ivaynberg.github.com/select2/index.html) `select2`jquery 库看起来很棒。有一个[Rails gem](https://github.com/argerim/select2-rails)，但它在文档上非常简单。我想使用自动完成生成一个简单的多重下拉菜单。我怎么做？

这是我的 simple_form_for 调用：

```
<%= f.input_field :neighborhood_names, url: autocomplete_neighborhood_name_searches_path, as: :autocomplete, data: { delimiter: ',', placeholder: "Where do you want to live?"}, multiple: true, id: "selectWhereToLive", class: "span8" %> 
```

我已经成功安装了`select2-rails`gem，但不太确定如何让它工作。

我将此添加到我的`home.js.coffee`文件中：

```
jQuery ->
    $('#selectWhereToLive').select2() 
```

我收到了这个错误：

```
Uncaught query function not defined for Select2 selectWhereToLive 
```

想法？

**编辑1：**

上面的`simple_form_for`调用正在生成这个 HTML：

```
<input class="autocomplete optional span8" data-autocomplete="/searches/autocomplete_neighborhood_name" data-delimiter="," data-placeholder="Where do you want to live?" id="selectWhereToLive" multiple="multiple" name="search[neighborhood_names][]" size="30" type="text" url="/searches/autocomplete_neighborhood_name" value="" /> 
```

表示`id`属性设置正确。

**编辑 2 - 更新**

正如@moonfly 建议`as: :select`的那样，我尝试添加`f.input_field`-`as: :autocomplete`包括和不包括在内。

没有生成的 HTML`as: :autocomplete`是这样的：

```
<input name="search[neighborhood_names][]" type="hidden" value="" /><select class="select optional span8" data-delimiter="," data-placeholder="Where do you want to live?" id="selectWhereToLive" multiple="multiple" name="search[neighborhood_names][]" url="/searches/autocomplete_neighborhood_name"><option value="true">Yes</option>
<option value="false">No</option></select> 
```

它预填充了 2 个选项值“是”和“否”。不太清楚为什么，但这就是它的作用。

***更新***

所以我将 jquery 选择器更改为查找`input#ID`，然后忘记了。所以我将其设置回来，现在它正在生成选择框 - 但它给了我这两个是和否选项。不太清楚它为什么这样做。它没有从我的`url`属性中返回值。

**编辑 3**

@harish-shetty 的建议似乎奏效了。但是现在，在它通过自动完成并使用 select2 菜单成功找到记录后，它绕过了我在`search.rb`模型上使用的 setter 方法。

基本上，我想要发生的是，一旦用户完成填写表格 - 我拥有他们想要的社区的所有 ID/名称，我想`search_neighborhoods`为这些 ID 创建一个新记录。

所以这些是我有的方法：

```
Search.rb

  def neighborhood_names
    neighborhoods.map(&:name).join(',')
  end

  # we need to put [0] because it returns an array with a single element containing
  # the string of comma separated neighborhoods
  def neighborhood_names=(names)
    names[0].split(',').each do |name|
      next if name.blank?
      if neighborhood = Neighborhood.find_by_name(name)
        search_neighborhoods.build neighborhood_id: neighborhood.id
      end
    end
  end 
```

我的`SearchController.rb`

```
 def autocomplete_neighborhood_name
    @neighborhood = Neighborhood.select("id, name").where("name LIKE ?", "#{params[:name]}%").order(:name).limit(10)

    respond_to do |format|
      format.json { render json: @neighborhood , :only => [:id, :name] }
    end    
  end 
```

这就是请求现在的样子——这表明没有`search_neighborhood`创建记录：

```
Started POST "/searches" for 127.0.0.1 at 2013-03-06 04:09:55 -0500
Processing by SearchesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"7SeA=", "search"=>{"boro_id"=>"", "neighborhood_names"=>"1416,1394", "property_type_id"=>"", "min_price"=>"", "max_price"=>"", "num_bedrooms"=>"", "num_bathrooms"=>""}}
  Neighborhood Load (0.5ms)  SELECT "neighborhoods".* FROM "neighborhoods" WHERE "neighborhoods"."name" = '1' LIMIT 1
   (0.3ms)  BEGIN
  SQL (0.8ms)  INSERT INTO "searches" ("amenity_id", "boro_id", "created_at", "keywords", "listing_type_id", "max_price", "min_price", "neighborhood_id", "num_bathrooms", "num_bedrooms", "property_type_id", "square_footage", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"  [["amenity_id", nil], ["boro_id", nil], ["created_at", Wed, 06 Mar 2013 09:09:55 UTC +00:00], ["keywords", nil], ["listing_type_id", nil], ["max_price", nil], ["min_price", nil], ["neighborhood_id", nil], ["num_bathrooms", nil], ["num_bedrooms", nil], ["property_type_id", nil], ["square_footage", nil], ["updated_at", Wed, 06 Mar 2013 09:09:55 UTC +00:00]]
   (32.2ms)  COMMIT
Redirected to http://localhost:3000/searches/29 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-06T05:58:36.237

select2 插件支持自动完成。您可以按如下方式使用本机自动完成：

```
<%= f.input_field :ac_neighborhood_ids, 
      data: { 
        placeholder: "Where do you want to live?",
        saved: @search.neighborhoods.to_json,
        url: autocomplete_neighborhood_name_searches_path
      }, 
      input_html:  { class: "span8 ac-select2" }
%> 
```

Javascript

```
$(document).ready(function() {  
  $('.ac-select2').each(function() {
    var url = $(this).data('url'); 
    var placeholder = $(this).data('placeholder'); 
    var saved = jQuery.parseJSON($(this).data('saved'));
    $(this).select2({
      minimumInputLength: 2,
      multiple: true,
      placeholder : placeholder,
      allowClear: true,
      ajax: {
        url: url,
        dataType: 'json',
        quietMillis: 500,
        data: function (term) {
          return {
            name: term
          };
        },
        results: function (data) {
          return {results: data};
        }
      },

      formatResult: function (item, page) {
        return item.name; 
      },

      formatSelection: function (item, page) {
        return item.name; 
      },

      initSelection : function (element, callback) {
        if (saved) {
          callback(saved);
        }
      }

    });
  });
}); 
```

确保 at 处的操作`autocomplete_neighborhood_name_searches_path`返回一个 json 哈希数组。每个散列应该包含`id`和`name`字段。自动完成的术语是通过查询参数传递的`name`。

```
 def autocomplete_neighborhood_name
    @neighborhood = Neighborhood.select("id, name").where("name LIKE ?", "#{params[:name]}%").order(:name).limit(10)

    respond_to do |format|
      format.json { render json: @neighborhood , :only => [:id, :name] }
    end    
  end 
```

您的搜索模型：

```
class Search

  attr_accessor :ac_neighborhood_ids

  has_many :search_neighborhoods
  has_many :neighborhoods, through: :search_neighborhoods

  def ac_neighborhood_ids
    neighborhood_ids.join(",")
  end

  def ac_neighborhoods
    neighborhoods.map{|n| {:id => n.id, :name => n.name}}
  end

  def ac_neighborhood_ids=(ids)
    search_neighborhoods.clear # remove the old values
    ids.split(',').select(&:present?).map do |neighborhood_id|
      search_neighborhoods.build neighborhood_id: neighborhood_id
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:01:06.770

我相信您需要附加选择以选择标签（然后它从中读取数据）或输入隐藏标签，然后您需要提供“查询”功能。在您的情况下，它附加到输入标签，因此寻找查询功能。尝试设置`as: :select`您的`f.input_field`通话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T06:35:56.227

用作： :select with collection 是 select2 的常规方式。在 select2 上绑定自动完成是一个 javascript 问题。

这是我的代码示例。但没有自动完成功能。 [https://gist.github.com/kuboon/f692d9a844c0ff5877c8](https://gist.github.com/kuboon/f692d9a844c0ff5877c8)

# java - 如何检测在另一个 bean 中调用的方法？

> ID：15146270
> 
> 赞同：4
> 
> 时间：2013-02-28T21:47:15.613
> 
> 标签：java, jakarta-ee, javabeans

我的 webapp 有两个 Java bean：一个是 userController，另一个是 profileController。它们都是对话范围的。我希望当 userController 中的当前用户更改时，profileController 检测到更改并更改其当前配置文件。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:26:06.830

您可以使用观察者模式来实现这一点。

[观察者模式维基](http://en.wikipedia.org/wiki/Observer_pattern)

ProfilerController 应该订阅 UserController 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:31:20.673

必须有一种相互倾听的机制。您可以使用观察者模式。

# c# - 如何在不使用鼠标的情况下执行虚拟鼠标单击 C#

> ID：15146275
> 
> 赞同：5
> 
> 时间：2013-02-28T21:47:37.697
> 
> 标签：c#, click, mouse, virtual

我想在 Windows 应用程序中单击，而不使用真正的鼠标（所以我可以最小化它）。就像机器人的行为一样。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T22:26:23.590

我认为您正在寻找的功能是`PostMessage`

```
[DllImport("user32.dll", SetLastError = true)]
public static extern bool PostMessage(int hWnd, uint Msg, int wParam, int lParam); 
```

[您可以在 codeproject 上](http://www.codeproject.com/Articles/18366/Sending-Keystrokes-to-another-Application-in-C)阅读更多关于它的信息，并下载一个发送击键的演示项目。

此方法根据您使用的进程句柄 (hWnd) 直接在与程序关联的输入队列上发布消息

您还可以使用此函数通过发布按钮事件来发送鼠标点击，如下所示：

```
PostMessage(hWnd, WM_LBUTTONDBLCLK, 0, l); 
```

有关这些按钮事件的更多信息可以[在 MSDN](http://msdn.microsoft.com/en-us/library/aa926302.aspx)上找到。

我敢肯定，如果您在 Internet 上搜索 PostMessage 鼠标事件的示例，您会发现很多

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-28T14:18:59.373

您可以使用计时器，或处理按键，并在计时器滴答或按键功能中创建模拟鼠标点击，使用 user32.dll 文件（最好是表单形状，以便您可以处理计时器间隔......）：

```
using System;
using System.Windows.Forms;
namespace Clicker
{
    public partial class Form1 : Form
    {
    [System.Runtime.InteropServices.DllImport("user32.dll")]
    public static extern void mouse_event(int dwFlags, int dx, int dy, int cButtons, int dwExtraInfo);

    private const int MOUSEEVENT_LEFTDOWN = 0x02;
    private const int MOUSEEVENT_LEFTUP = 0x04;
    private const int MOUSEEVENT_MIDDLEDOWN = 0x20;
    private const int MOUSEEVENT_MIDDLEUP = 0x40;
    private const int MOUSEEVENT_RIGHTDOWN = 0x08;
    private const int MOUSEEVENT_RIGHTUP = 0x10;

    private int count = 0;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        timer1.Start();
        label2.Text = "Timer is on";
    }

    private void button2_Click(object sender, EventArgs e)
    {
        timer1.Stop();
        label2.Text = "Timer is off";
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        mouse_event(MOUSEEVENT_LEFTDOWN, 0, 0, 0, 0);
        mouse_event(MOUSEEVENT_LEFTUP, 0, 0, 0, 0);
        count++;
        label3.Text = count + " amount of clicks";
    }

} 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T21:49:32.663

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
public static extern void mouse_event(int dwFlags, int dx, int dy, int cButtons, int dwExtraInfo);    
public const int MOUSEEVENTF_LEFTDOWN = 0x02;
public const int MOUSEEVENTF_LEFTUP = 0x04;
public const int MOUSEEVENTF_RIGHTDOWN = 0x08;
public const int MOUSEEVENTF_RIGHTUP = 0x10;

public void MouseClick()
{
   int x = 100;
   int y = 100;
   mouse_event(MOUSEEVENTF_LEFTDOWN, x, y, 0, 0);
   mouse_event(MOUSEEVENTF_LEFTUP, x, y, 0, 0);
} 
```

我在[http://social.msdn.microsoft.com/forums/en-US/winforms/thread/86dcf918-0e48-40c2-88ae-0a09797db1ab/](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/86dcf918-0e48-40c2-88ae-0a09797db1ab/)找到了这个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T21:53:09.630

你需要它所在机器的分辨率，在`System.Windows.Forms.Screen`这里使用类：[SO](https://stackoverflow.com/questions/5082610/get-and-set-screen-resolution)

然后，您需要将鼠标移动到该位置，或者避免该位置，您可能需要挂钩到正在运行的程序，并向其发送一个使其最小化的事件。

很难让这样的东西与 C# 一起使用，因为您需要将该 DLL 注入程序中。像 C 这样的低级语言可能会有所帮助。

[这是一个简短的解释/问题](https://stackoverflow.com/questions/5318037/hook-to-detect-minimize-window-c-sharp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-11T15:46:51.633

您可以使用窗口自动化在窗口中找到最小化按钮并执行单击。我发现它很容易并且经常使用。这是了解整个概念的链接。 [https://msdn.microsoft.com/en-us/library/windows/desktop/ff486375(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ff486375(v=vs.85).aspx)

# ocaml - Ocamlbuild 覆盖默认选项

> ID：15146286
> 
> 赞同：3
> 
> 时间：2013-02-28T21:48:34.197
> 
> 标签：ocaml, ocamlbuild

我安装的 OCaml 无法识别 #!，因此无法独立运行 camlp4o。它必须作为“ocamlrun camlp4o”调用。

我尝试在插件中添加一个标志。但是新标志只是简单地添加到现有标志中。

结果是 ocamlbuild 将调用编译器

“-pp camlp4o ocamlrun camlp4o”。

一个可行的解决方法是引入一个新标签“my_camlp4o”。但是，ocamlbuild 的文档确实提到了“覆盖”默认值的能力。看来ocamlc，ocamlopt可以被覆盖。但是我们可以覆盖camlp4o吗？可以在插件中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:49:37.597

`-ocamlc <command>`支持通过等`-ocamldep <command>`命令行选项更改 Ocamlbuild 中的默认值。不幸的是，camlp4 目前不是可定制命令集的一部分。您能否使用[问题跟踪器](http://caml.inria.fr/mantis/view_all_bug_page.php)请求此功能？

（与此同时，我推荐一种解决方法，例如`ocamlrun`，将 PATH 中的可执行文件替换为执行正确操作的可执行脚本。）

**编辑**

另一种解决方法是通过 进行所有编译`ocamlfind`，它支持覆盖camlp4 命令（请参阅[文档](http://projects.camlcity.org/projects/dl/findlib-1.2.8/doc/guide-html/x412.html)），并且可以用作所有带有`-use-ocamlfind`选项的ocamlbuild 命令的基础。不幸的是，ocamlfind 本身仅支持在编译时（调用实际编译器时）进行预处理，而不支持独立的源到源处理，因此可能无法涵盖您自己的用例。

# python - 使用 django-dilla 排除字段

> ID：15146291
> 
> 赞同：0
> 
> 时间：2013-02-28T21:48:51.237
> 
> 标签：python, django, django-models

我正在尝试找到一种方法来排除具有 django-dilla 元类的模型上的某些字段。以前从未使用过 django-dilla。

我的代码看起来像这样：

```
class DillaController:
    models = ('Model2', 'Model1')

class Model1(models.Model):
    class Dilla:
        field_extras = {
            'field1': {'word_range': (2,5)},
        }
        ## HOW DO I EXCLUDE FIELDS HERE?
    [...]
    field1 = models.CharField(max_length=100, unique=True)
    field2 = models.TextField(blank=True)
    excluded_field = models.CharField(max_length=100)
    model2 = models.ForeignKey('Model2', blank=True, null=True, on_delete=models.SET_NULL)

class Model2(models.Model):
    [...] 
```

我还在四处张望。如果我发现了什么，我会更新。

谢谢。

一个。

编辑：错字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:03:47.607

在这里找到了正确的文档：

[https://pypi.python.org/pypi/django-dilla/r17](https://pypi.python.org/pypi/django-dilla/r17)

简而言之，应在模型的 Dilla 元类中提供排除字段。

```
class Dilla:
    [...]
    skip_fields = ('hash', 'user',) 
```

# android - 无法将 sqlite db 备份到某些 Android 手机上的文件。mkdirs() 有时不工作

> ID：15146295
> 
> 赞同：0
> 
> 时间：2013-02-28T21:48:58.017
> 
> 标签：android, sony, mkdirs

我已经编写了代码来备份我`sqlite db`的`file`Android 手机（Sony Ericsson X-8 w/ 2.1.1 版 Android）。

我将代码放在下面以供参考，但在阅读之前，我强调它在 X-8 上运行良好。[仍然欢迎任何改进建议！] 当我在带有 Android 4.0.4 版的索尼爱立信 Xperia Arc 上运行它时，我遇到了问题。

该文件*未写入*`SD card`. 调试起来非常困难，因为您可能知道，通过 USB 卡将手机连接到计算机可以阻止文件被写入（例如：[Android FileWriter not working on Sony Ericsson Arc but works on another phone](https://stackoverflow.com/questions/11213686/android-filewriter-not-working-on-sony-ericsson-arc-but-works-on-another-phone)）。

在任何情况下，通过调试器中的代码都不会出现问题，并且会让人相信文件已被写入。在我的`manifest`中，我确实有：

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我不知道发生了什么。Android 版本 2 和 4 在文件系统方面是否发生了变化？是手机专用的吗？

任何想法将不胜感激。-戴夫

```
 String packageName = "com.xxx.receiver";
                    String dbName = "Receiver";
                    //File sd = Environment.getExternalStorageDirectory();   
                    File sd = new File(Environment.getExternalStorageDirectory(), "xxx"); // "xxx" is never created on Arc!
                    if (!sd.exists()) { 
                        sd.mkdirs(); 
                    } 
                    File data = Environment.getDataDirectory();     
                    if (sd.canWrite())
                    {                    
                        String currentDBPath = "//data//"+ packageName +"//databases//"+ dbName; 
                        String backupDBPath = dbName;   
                        File currentDB = new File(data, currentDBPath); 
                        File backupDB = new File(sd, backupDBPath);    
                        FileChannel src = new FileInputStream(currentDB).getChannel();  
                        FileChannel dst = new FileOutputStream(backupDB).getChannel();   
                        dst.transferFrom(src, 0, src.size());    
                        src.close();                      
                        dst.close();                  
                        //Toast.makeText(SettingsAdapter.this.getContext(), backupDB.toString(), Toast.LENGTH_LONG).show(); 
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:03:03.910

在从 ICS 开始的 Android 中，USB 连接默认将设备提供为媒体设备，而不是 USB 大容量存储设备。这样做的好处是，当您插入 USB 电缆时，外部存储不会“消失”，这当然使调试更加容易。缺点是您需要让 Android 明确知道您何时添加了一个（或多个文件）。

然而，这并不难：

```
File sd = new File(Environment.getExternalStorageDirectory(), "xxx" );
...
// create your file in xxx
... 
sendBroadcast( 
    new Intent( Intent.ACTION_MEDIA_MOUNTED, 
                Uri.fromFile( sd ) ) 
              ) 
    ); 
```

作为旁注，您可以使用以下命令，而不是对数据库路径进行硬编码：

```
context.getDatabasePath( dbName ); 
```

# filter - Cognos 10.2 中的复合过滤器

> ID：15146299
> 
> 赞同：0
> 
> 时间：2013-02-28T21:49:06.293
> 
> 标签：filter, cognos

我在使用 Cognos Report Studio 10.2 时遇到了一个有趣的情况。我用一个报告页面和一个查询编写了一份简单的员工报告。

*   报告的版本 1 使用八个单独的过滤器（a=1、b=2、c=3、...），输出为**12,869**条记录。
*   版本 2 与版本 1 完全相同，只是八个过滤器通过复合语句（a=1 AND b=2 AND c=3 AND ...）组合为一个，输出为**12,010**条记录。

从逻辑上讲，它们不应该产生相同的输出吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:05:08.827

转到工具 - 从两个报告中显示生成的 SQL。[使用 WinMerge ( http://winmerge.org](http://winmerge.org) )等工具比较生成的 SQL 。这应该使差异明显。

如果在查看查询之间的差异后问题不明显，请在数据库中运行供应商特定的 SQL，并验证您从查询中获得的计数是否与从报告中获得的计数相同。

# javascript - 用Javascript替换所有innerhtml文本

> ID：15146302
> 
> 赞同：0
> 
> 时间：2013-02-28T21:49:21.183
> 
> 标签：javascript, jquery

我已经尝试了几个小时，并且在 StackOverflow 上查看了很多示例，但我无法修复我的简单脚本。

我用 jQuery 抓取了 DOM

```
var color = $('#bscontainer').html(); 
```

现在颜色的内容是：

```
<img src="resources/P/Blue_BG_2Col.png" id="bg">
<img src="resources/P/Blue_Content_2Col.png" id="content">
<img src="resources/P/Blue_Title_ExchangeRate.png" id="title">
<img src="resources/P/Blue_SubTitle_2Col.png" id="subtitle">
<img src="resources/P/Blue_Disclaimer_Disclaimer.png" id="disclaimer"> 
```

我的想法是将所有蓝色更改为绿色，我已经尝试过：

```
curColor="Blue";
newColor="Green";
t=color.replace(curColor,newColor); 
```

它根本行不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:58:44.080

要直接回答您的问题，请在将字符串参数作为指针时在 javascript 中替换，仅替换第一个实例。要替换字符串中的所有实例，请使用全局正则表达式：

```
str.replace(/Blue/g, 'Green'); 
```

你真的应该只修改标签的`src`属性。`img`这是更恰当的攻击方式。像您尝试那样更改 html 将丢失绑定到 DOM 元素的任何事件或数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:52:47.123

所以基本上你想在你的`color`元素中找到每个图像并在属性中`Blue`替换为- 这是你可以做到的一种方法：`Green``src`

```
var color = $('#bscontainer');
color.find('img').each(function(){

    curColor="Blue";
    newColor="Green";
    this.src = this.src.replace(curColor,newColor);

}); 
```

不需要`.html()`你的代码的一部分......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:53:52.847

[使用回调函数](http://api.jquery.com/html/#html2)实际更新 HTML，并使用[正则表达式（对象）](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)一次替换所有实例：

```
$('#bscontainer').html(function (i, str) {
    curColor = new RegExp("Blue","g"); // global replace
    newColor = "Green";
    return str.replace(curColor, newColor);
}); 
```

# html - CSS applies outside of the scope

[问问题](https://stackoverflow.com/questions/ask)问问题 2013-02-28T21:49:39.4104507 次This question shows research effort; it is useful and clear10This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

The most simple example of scoped style doesn't work in Chrome (v 25):

```
<div>
 <h1>Hello 1</h1>
</div>
<div>
 <h1>Hello 2</h1>
 <style scoped> h1 { color: red; } </style>
</div> 
```

Try it: [http://jsfiddle.net/RWW8r/2/](http://jsfiddle.net/RWW8r/2/)

Both `h1` become red:

![enter image description here](https://i.stack.imgur.com/GC7jY.png)

The scope style should only apply to the second `h1`.

I read that the functionality was implemented in Chrome, why doesn't that work? Am I doing something wrong?

[html](/tags/html "show questions tagged 'html'")[css](/tags/css "show questions tagged 'css'")4

## 2 回答 2

This answer is useful11

You are not doing anything wrong. As of this moment, scoped CSS is still an experimental feature which is not supported by any current browser.

However, if you want to play around with it in Chrome you can do the following thing:

*   Go to chrome://flags/ in your Chrome browser;
*   Find "Enable experimental WebKit features." and click enable
*   Restart your browser.
*   Try your code. It should work.

于 2013-02-28T22:06:06.683 回答This answer is useful2

I think when you read that Chrome has implemented it, they meant that it was in the development version, because it certainly isn't in the current release v25.

See the CanIUse site for compatibility charts: [http://caniuse.com/style-scoped](http://caniuse.com/style-scoped)

Same applies to Firefox; it's only in the current alpha.

Given the pace of development, it'll be in the release version of both these browsers in a relatively short space of time, but the short answer is that it's not there now.

于 2013-02-28T22:04:18.343 回答

#### Related

[0](/questions/13269585 "Question score (upvotes - downvotes)")[android - setButtonDrawable 到 ListView 中的自定义单选按钮无法显示正确的结果，直到单击它](/questions/13269585)[2](/questions/13269586 "Question score (upvotes - downvotes)")[sql - SQL 向查询中添加附加列](/questions/13269586)[1](/questions/13269588 "Question score (upvotes - downvotes)")[transactions - membase 支持交易吗？](/questions/13269588)[2](/questions/13269591 "Question score (upvotes - downvotes)")[c# - 使用 epplus 设置单元格宽度会影响整个列](/questions/13269591)[5](/questions/13269600 "Question score (upvotes - downvotes)")[java - 如何在 Java 中获取 HashMap 的多次相同值出现次数？](/questions/13269600)[2](/questions/13269601 "Question score (upvotes - downvotes)")[iphone - 进行3D变换后如何将图像保存在相册中？](/questions/13269601)[1](/questions/13269604 "Question score (upvotes - downvotes)")[rpm-maven-plugin - maven rpm 包失败并显示“错误！！！SGSBASE 值未设置。因此退出”](/questions/13269604)[1](/questions/13269605 "Question score (upvotes - downvotes)")[actionscript-3 - as3中奇怪的事件时间年表](/questions/13269605)[3](/questions/13269606 "Question score (upvotes - downvotes)")[security - 文件完整性验证的签名/哈希选择](/questions/13269606)[1](/questions/13269609 "Question score (upvotes - downvotes)")[c# - 数据表：它是一次检索所有数据还是在需要时检索所有数据](/questions/13269609)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：15146313
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# python - 这个 Python 循环可以更简洁地表达吗？

> ID：15146316
> 
> 赞同：1
> 
> 时间：2013-02-28T21:49:52.807
> 
> 标签：python, python-2.7, for-loop, refactoring

我遇到了一些 Python v2.7 代码，我将这些代码重构为：

```
for ssid in (ssid for ssid in overlaps
             if ssid != subseq_id and ssid not in merged): 
```

但是我觉得应该有一种方法来表达这一点而无需使用两个`for`语句？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T21:51:16.387

你可以使用`filter()`：

```
for ssid in filter(lambda s: s != subseq_id and s not in merged, overlaps):
    # ... 
```

或者你可以*在循环中*测试：

```
for ssid in overlaps:
    if ssid == subseq_id or ssid in merged:
      continue
    # ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:12:34.797

根据您的数据（顺序并不重要，...），您可以使用 sets ：

```
excluded = set(merged)
excluded.add(subseq_id)
ssids = set(overlaps) - excluded
for ssid in ssids:
    ... 
```

# php - MySQL：选择包含 ID 的所有行

> ID：15146318
> 
> 赞同：0
> 
> 时间：2013-02-28T21:49:58.400
> 
> 标签：php, mysql

我正在尝试编写一个 MySQL 查询，它应该从两个不同的表中选择行。我进行了不同数量的查询，但它们都需要很长时间才能返回结果（> 0.6 秒）。我想要更快的响应。

情况是：

```
CREATE TABLE `classes` (
   id int(99) auto_increment primary key,
   status INT(1)
)

CREATE TABLE `classes_names` (
   id int(99) auto_increment primary key,
   class_id int(99),
   name VARCHAR(255)
) 
```

假设您应该获取班级中的所有名字，除了您要搜索的名字。例如，我的名字是“John Doe”，所以我们这样搜索我的名字：

```
SELECT
  classes_names.`id`

FROM
  `classes_names`

INNER JOIN `classes`
  ON `status` = 1

WHERE
  `name`='John Doe' 
```

在此查询中，我的姓名将与我的班级 ID 一起返回。问题是，我希望除了我自己以外的“班级成员”。所以假设我们有这张表：

```
+------+----------+
| id   | status   |
+------+----------+
|    1 | 1        |
|    2 | 1        |
+------+----------+

+------+----------+---------------+----------+
| id   | class_id | name                     |
+------+----------+--------+-----------------+
|    1 | 1        | John Doe                 |
|    2 | 1        | Alexandra Fito           |
|    3 | 2        | Rico Hasti               |
|    4 | 1        | Lady Gaga                |
+------+----------+--------------------------+ 
```

我想用单词“描述”的查询：`SELECT class_names.id WHERE SAME CLASS HAS NAME 'John Doe'.`返回的行应该是类中的所有成员 - 没有搜索的名称......所以我应该期待的结果是：

```
+------+----------+---------------+----------+
| id   | class_id | name                     |
+------+----------+--------+-----------------+
|    2 | 1        | Alexandra Fito           |
|    4 | 1        | Lady Gaga                |
+------+----------+--------------------------+ 
```

太好了……有人想试一试吗？去吧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:58:23.607

这应该有效：

```
SELECT a.name, 
       b.class_id 
FROM   classes_names a 
       INNER JOIN (SELECT id, 
                          class_id 
                   FROM   classes_names 
                   WHERE  name = 'John Doe') b 
               ON b.class_id = a.class_id 
                  AND a.id <> b.id 
```

**结果**

```
| 姓名 | CLASS_ID |
-----------------------------------------
| 亚历山德拉菲托 | 1 |
| 嘎嘎小姐 | 1 |
```

[查看演示](http://sqlfiddle.com/#!2/6f53b/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:57:48.077

```
SELECT * FROM classes_names 
WHERE class_id IN (
     SELECT id FROM classes_names 
     WHERE name = "John Doe")
AND name != "John Doe" 
```

我应该指出我不明白指出这`status`一点，因为那不在您的“英语查询”中。

最好的英文翻译是：

“选择与`class_id`John Doe 所在班级的班级中的任何人，而不是 John Doe。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:55:01.807

```
SELECT
  classes_names.`id`

FROM
  `classes_names`

Left JOIN `classes`
  (SELECT class_id
FROM classes_names
WHERE name LIKE "John Doe"
) the_class ON classes_names.class_id = the_class.class_id

WHERE
  `status`=1 and
  `name`NOT LIKE'John Doe' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T21:55:09.403

```
SELECT classes_names.id
FROM classes_names

INNER JOIN (
    SELECT class_id
    FROM classes_names
    WHERE name LIKE "John Doe"
) class_john_doe 
ON (
    classes_names.class_id = class_john_doe.class_id
    AND class_john_doe.id != classes_names.id
) 
```

为了提高性能，您应该在 classes_names.class_id 和 classes.id 上设置索引

# javascript - 使用 Html 5 绘制圆圈

> ID：15146320
> 
> 赞同：0
> 
> 时间：2013-02-28T21:50:01.167
> 
> 标签：javascript, html, canvas

我正在开发一个简单的绘画程序。我想动态绘制矩形和圆形。我的意思是我想跟踪鼠标。我使用以下代码绘制矩形并且它有效。

```
// The rectangle tool.
tools.rect = function () {
var tool = this;
this.started = false;

this.mousedown = function (ev) {
  tool.started = true;
  tool.x0 = ev._x;
  tool.y0 = ev._y;
};

this.mousemove = function (ev) {
  if (!tool.started) {
    return;
  }

  var x = Math.min(ev._x,  tool.x0),
      y = Math.min(ev._y,  tool.y0),
      w = Math.abs(ev._x - tool.x0),
      h = Math.abs(ev._y - tool.y0);

  context.clearRect(0, 0, canvas.width, canvas.height);

  if (!w || !h) {
    return;
  }

  context.strokeRect(x, y, w, h);
};

this.mouseup = function (ev) {
  if (tool.started) {
    tool.mousemove(ev);
    tool.started = false;
    img_update();
  }
};
}; 
```

我想对圆圈做同样的事情。但是我遇到了麻烦，我使用了以下代码，但它不起作用。

```
// The circle tool.
tools.circle = function () {
var tool = this;
this.started = false;

this.mousedown = function (ev) {
  tool.started = true;
  tool.x0 = ev._x;
  tool.y0 = ev._y;
  tool.z0 = ev._z;
};

this.mousemove = function (ev) {
  if (!tool.started) {
    return;
  }

  var x = Math.min(ev._x,  tool.x0),
      y = Math.min(ev._y,  tool.y0),
      r = Math.min(ev._z,  tool.z0),
      w = Math.abs(ev._x - tool.x0),
      h = Math.abs(ev._y - tool.y0);

  context.clearRect(0, 0, canvas.width, canvas.height);

  context.beginPath();
  context.arc(x, y,r,0, 2*Math.PI,true);
  context.stroke();
  context.closePath();
};

this.mouseup = function (ev) {
  if (tool.started) {
    tool.mousemove(ev);
    tool.started = false;
    img_update();
  }
};
}; 
```

在这种情况下如何画一个圆圈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:38:08.933

您需要计算连接开始拖动和当前鼠标位置的线的中点。

```
var midX=(startingX+currentX)/2;
var midY=(startingY+currentY)/2; 
```

然后，您需要计算适合该线的圆的半径。

```
var dx= Math.abs(startinX-canMouseX);
var dy= Math.abs(startinY-canMouseY);
var r=Math.sqrt( dx*dx + dy*dy )/2; 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/QQPRx/](http://jsfiddle.net/m1erickson/QQPRx/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../excanvas.js"></script><![endif]-->

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var lastX;
    var lastY;
    var strokeColor="red";
    var strokeWidth=2;
    var canMouseX;
    var canMouseY;
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;
    var isMouseDown=false;

    function handleMouseDown(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mousedown stuff here
      lastX=canMouseX;
      lastY=canMouseY;
      isMouseDown=true;
    }

    function handleMouseUp(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mouseup stuff here
      isMouseDown=false;
    }

    function handleMouseOut(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mouseOut stuff here
      isMouseDown=false;
    }

    function handleMouseMove(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mousemove stuff here
      if(isMouseDown){
        var dx= Math.abs(lastX-canMouseX);
        var dy= Math.abs(lastY-canMouseY);
        var midX=(lastX+canMouseX)/2;
        var midY=(lastY+canMouseY)/2;
        var r=Math.sqrt( dx*dx + dy*dy )/2;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.beginPath();
        ctx.arc(midX, midY,r,0, 2*Math.PI,true);
        ctx.stroke();
      }
    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});
    $("#canvas").mousemove(function(e){handleMouseMove(e);});
    $("#canvas").mouseup(function(e){handleMouseUp(e);});
    $("#canvas").mouseout(function(e){handleMouseOut(e);});

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

# javascript - _spBodyOnLoadFunctionNames.push 的问题

> ID：15146321
> 
> 赞同：0
> 
> 时间：2013-02-28T21:50:05.420
> 
> 标签：javascript, jquery, sharepoint, sharepoint-2010, firebug

使用以下内容，我仅在从其前面的字段中选择某个值时才使字段可见。当我将它嵌入到我的页面代码中时，该字段最初是隐藏的，但当我选择要触发它的值时不会出现。

当我在 Firebug 控制台中运行此脚本时，替换 _spBodyOnLoadFunctionNames.push("websiteField"); 只需 websiteField(); 一切都很完美。但它只在控制台中工作，而不是在我嵌入它之后。

有什么语法方面的“关闭”吗？

```
<script type="text/javascript">
    function websiteField() {
        var packageTypeField = $("#formCss select");
        var websiteTR = packageTypeField.closest("tr").next();
        websiteTR.hide();
    $("packageTypeField").change(function(){
        if ($(this).val() == "Comprehensive") {
            websiteTR.slideDown();
        }
        else {
            websiteTR.slideUp();
        }

        });
    }
    _spBodyOnLoadFunctionNames.push("websiteField");

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T19:20:28.387

我想你打算：

```
$("packageTypeField").change(function(){ 
```

成为：

```
$(packageTypeField).change(function(){ 
```

# linq - 多对多表、DbContext 和实体框架以及 Linq 的复杂投影

> ID：15146337
> 
> 赞同：0
> 
> 时间：2013-02-28T21:50:55.687
> 
> 标签：linq, entity-framework, many-to-many

我有一个包含这四个*多对多*相关实体的 DbContext：

```
Classes <-> Students
Classes <-> Assignments
Classes <-> Contents
Classes <-> Announcements 
```

现在我需要一个 Linq 代码（或者……更好！），它将为我们提供**最后 3 个作业**、**最后 3 个内容**、每个班级的**最后 3 个公告**，其中 StudentId = X 的学生在这些班级中。

另一方面，学生登录网站，我们想向他/她展示他/她正在学习的每个班级的最后作业、内容、公告。

此代码不正确，但可以帮助您了解我的需求。此代码也需要多次运行（50ms 不是很多吗？）：

**编辑：**代码几乎是正确的，所以转移到 answer ，看看接受的答案。任何其他（更好，更快）的解决方案表示赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:03:04.827

你最好从学生开始查询：

```
from s in db.Students
where s.StudentId == CurrentUser
from c in s.Classes
from as in c.Assignments.OrderByDescending(As => As.Id).Take(3)
from co in c.Contents.OrderByDescending(Co => Co.Id).Take(3)
from an in c.Announcements.OrderByDescending(An => An.Id).Take(3)
select new { <selected properties> } 
```

最后一部分（选定的属性）很重要。通过仅选择属性的子集，您可以缩小数据库中的结果集。如果没有这个，您将创建一个非常宽且长的结果集，因为 (SQL) 查询中有大量连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:30:05.427

根据**@Gert Arnold**的建议，我对代码做了一些改动：

*   用学生开始查询
*   通过更改选定的属性来缩小结果范围

```
db.Students.Where(st => st.StudentId.Equals(CurrentUser)).SelectMany(S => S.Classes, (S, C) => new
{
    Name = C.Name,
    Assignments = C.Assignments.Select(AS => new { AS.Id, AS.Name }).OrderByDescending(As => As.Id).Take(3),
    Contents = C.Contents.Select(Co => new { Co.Id, Co.Title }).OrderByDescending(Co => Co.Id).Take(3),
    Announcements = C.Announcements.Select(An => new { An.Id, An.Title }).OrderByDescending(An => An.Id).Take(3)
}); 
```

# java - 在 Java 中捕获空指针异常

> ID：15146339
> 
> 赞同：27
> 
> 时间：2013-02-28T21:50:59.927
> 
> 标签：java, nullpointerexception

我尝试使用 try-catch 块来捕捉`NullPointerException` ，但下面的程序仍然给出错误。我做错了什么还是有其他方法可以`NullPointerException`在以下程序中捕获。非常感谢任何帮助。

```
public class Circular_or_not 
{

    /**
     * @param args
     */
    public static void main(String[] args) 
    {
        // TODO Auto-generated method stub
        try
        {
            LinkedListNode[] nodes = new LinkedListNode[10];            
            for (int i = 0; i < 10; i++) 
            {
                nodes[i] = new LinkedListNode(i, null, i > 0 ? nodes[i - 1] : null);
            }

            // Create loop;
            // nodes[9].next = nodes[3];
            Boolean abc= Check_Circular(nodes[0]);
            System.out.print(abc);
        }
        catch(NullPointerException e)
        {
            System.out.print("NullPointerException caught");
        }

    }

    public static boolean Check_Circular(LinkedListNode head) 
    {       
            LinkedListNode n1 = head;
            LinkedListNode n2 = head; 

            // Find meeting point
            while (n2.next != null)
            { 
                n1 = n1.next; 
                n2 = n2.next.next; 
                if (n1 == n2) 
                { 
                    return true;
                }
            }
            return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-28T21:53:56.873

`NullPointerException`是一个运行时异常，不建议捕获它，而是避免它：

```
if(someVariable != null) someVariable.doSomething();
else
{
    // do something else
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-28T22:09:04.417

如另一个答案中所述，**不**建议捕获 NullPointerException。但是，您绝对可以抓住它，如下例所示。

```
public class Testclass{

    public static void main(String[] args) {
        try {
            doSomething();
        } catch (NullPointerException e) {
            System.out.print("Caught the NullPointerException");
        }
    }

    public static void doSomething() {
        String nullString = null;
        nullString.endsWith("test");
    }
} 
```

尽管可以捕获 NPE，但您绝对不应该这样做，但要解决最初的问题，即 Check_Circular 方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T22:05:19.217

您的代码问题出在 Check_Circular 的循环中。您一次通过一个节点使用 n1 在列表中前进。通过将 n2 重新分配给 n2.next.next，您一次可以通过两个。

当你这样做时， n2.next.next 可能为空，因此 n2 在赋值后将为空。当循环重复并检查 n2.next 是否不为空时，它会抛出 NPE，因为它无法进入下一个，因为 n2 已经为空。

您想做一些类似于 Alex 发布的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T22:02:07.143

我认为您的问题在 CheckCircular 内部，在 while 条件下：

假设您有 2 个节点，第一个 N1 和 N2 指向同一个节点，然后 N1 指向第二个节点（最后一个），N2 指向空值（因为它是 N2.next.next）。在下一个循环中，您尝试在 N2 上调用 'next' 方法，但 N2 为空。你有它，NullPointerException

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T21:57:50.357

您应该`NullPointerException`了解上面的代码，但这并不能改变您`Check_Circular`错了的事实。如果您修复`Check_Circular`，您的代码将不会`NullPointerException`首先抛出，并按预期工作。

尝试：

```
public static boolean Check_Circular(LinkedListNode head)
{
    LinkedListNode curNode = head;
    do
    {
        curNode = curNode.next;
        if(curNode == head)
            return true;
    }
    while(curNode != null);

    return false;
} 
```

# asp.net - 如何手动更新通过 NuGet 包安装的 jQuery UI？

> ID：15146340
> 
> 赞同：2
> 
> 时间：2013-02-28T21:51:04.760
> 
> 标签：asp.net, jquery-ui, webforms, nuget, nuget-package

**情况**

我正在处理使用默认 Visual Studio 2012 项目模板生成的 ASP.NET Web 窗体项目。从那时起，我就使用 NuGet 安装 jQuery UI 1.10.0 版。

我需要更新到 jQuery UI 1.10.1，因为我需要修复错误。根据该网站，1.10.1 是当前的稳定版本。但是，此版本*没有*可用的 NuGet 包！

我不知道为什么 NuGet 包会落后于他们网站上 jQuery UI 团队提供的最新可用*稳定*版本。（是的，我意识到可能有一个不同的团队管理 nuget 包本身......但似乎仍然需要保持最新......或者通过 NuGet 安装 jQuery 的价值*非常有限*。）

**问题**

如何在我的项目中手动将 jQuery UI（作为 NuGet 包安装）更新到 1.10.1？

我已经下载了最新的 1.10.1 javascript 文件。现在....当我查看我的 ASP.NET Web 窗体项目时，我在 Scripts 文件夹中看到以下文件：

![现有的 jQuery 文件](../Images/d3780ff7415b13921ee83181501e90ae.png)

那么这里应该怎么办...删除以下两个文件？

*   jquery-ui-1.10.0.js
*   jquery-ui-1.10.0.min.js

...并用这些新文件替换？

*   jquery-ui-1.10.1.js
*   jquery-ui-1.10.1.min.js

**这似乎行不通。**

jQuery 包含在我的母版页中的方式（来自 Visual Studio 2012 生成的默认模板）是这样的：

![MasterPage jQuery 包括](../Images/5303c69b04bec6ba8594696edd00f6b8.png)

您在上面看到的名为“jquery.ui.combined”的 JS 包是由某种隐藏代码自动生成的。继续查看您的项目...您不会发现任何明显定义此捆绑包的地方。因此，如果我添加最新的 JS 文件......似乎我无法定义它们是否被使用或捆绑。它们不是 NuGet 包逻辑/代码所期望的版本！！！

有任何想法吗？

**另一个潜在问题**

当我下载 jQuery UI 1.10.1 时，它还附带了 jQuery Core 1.9.1。正如您将在我的 Scripts 文件夹中看到的那样，jQuery UI 1.10.0 似乎与 jQuery Core 1.9.0 并驾齐驱。如果我更新 jQuery UI .....是否还需要更新到匹配的 jQuery Core？（这些是单独的 NuGet 包）

**请具体回答**

我想得到解释如何手动更新**从 NuGet 包**安装的 jQuery UI 版本的答案……在 ASP.NET **Web 窗体**项目上。

我认为这将很有用，以便将来开发人员可以在将最新的错误修复包含在 jQuery UI 网站上的稳定版本中时立即删除它们......而无需等待包出现NuGet 提要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:02:53.053

jQuery UI 团队尚未为他们的包上传 1.10.1 版本。恐怕你只需要等到他们发布它。

如果迫不及待，可以先卸载当前版本的 jQuery UI，然后手动将 1.10.1 版本的脚本文件添加到项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T13:26:13.130

转到：Visual Studio -> 工具 => 库包 => 包管理器设置窗口打开，具有屏幕截图中的选项![Nuget 手动包添加](../Images/0446c50d72e8da1e4c55c06836ac0030.png)

单击右上角和源浏览器内部的添加 (+) 按钮到您拥有的任何 Nuget 包的文件夹位置。名字就是你想要的，然后按确定

您现在可以看到您的包进入扩展和更新窗口

在当前项目中安装

使用包管理器控制台：安装包和你的包名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T22:22:07.153

**解决方法......虽然这似乎是一个糟糕的方法......**

我刚刚打开了这些文件....

*   jquery-ui-1.10.0.js
*   jquery-ui-1.10.0.min.js

...并将内容替换为这些文件中的内容：

*   jquery-ui-1.10.1.js
*   jquery-ui-1.10.1.min.js

我将文件名保持不变。因此，即使 JavaScript 文件被命名为版本“1.10.0”......它们实际上保存的是版本“1.10.1”的代码。

**我认为这可能是一个糟糕的想法的原因之一**

如果其他一些开发人员试图从源代码管理中提取我的代码会发生什么......并且他们使用 NuGet 包管理器来恢复他们还没有的包。它不会拉 jQuery UI nuget 包并将我修改的 JavaScript 文件替换为 nuget 包中的文件吗？然后页面将再次开始表现出错误行为，没有人知道为什么。

至少....现在我可以继续开发修复了错误！这很烦人......覆盖出现在对话框顶部，我无法与页面交互。这是已修复的错误：http: [//bugs.jqueryui.com/ticket/8984](http://bugs.jqueryui.com/ticket/8984)

# c# - .Net 泛型——从接口实现继承

> ID：15146341
> 
> 赞同：3
> 
> 时间：2013-02-28T21:51:05.333
> 
> 标签：c#, generics, inheritance, interface

我有两个对象序列“A”和“B”。比较序列应产生第三个元素序列“C”，指示是否：

*   对象已从“A”中“删除”或
*   从“B”“插入”。

所有剩余的元素都被认为是“匹配的”。

## 我想做的事：

声明从基类继承其所有属性的泛型`Inserted<T>`类。泛型类必须能够从它继承的对象实例化自己。`Deleted<T>``Matched<T>``T`

## 编码：

```
public interface IInstantiable<T>
{
    void CopyFrom(T o);
}

[Serializable]
public class Inserted<T> : T
    where T : IInstantiable<T>
{
    public Inserted() { }
    public Inserted(T t)
    {
        this.CopyFrom(t);
    }
} 
```

## 错误：

```
'MyNamespace.Inserted<T>' does not contain a definition for 'CopyFrom' and no 
extension method 'CopyFrom' accepting a first argument of type 'MyNamespace.Inserted<T>' 
could be found (are you missing a using directive or an assembly reference?) 
```

## 进一步讨论：

我定义了自己的`IInstantiable`接口来强制方法的存在`CopyFrom`。我不能使用标准`ICloneable`接口，因为它只定义了一个将对象复制到新实例的方法，而我需要对象在构造函数中复制其成员。

如果泛型定义了自己的`CopyFrom`方法实现，错误就会消失；然而，这并没有达到将`CopyFrom`方法专门化以处理基类的特定需求的预期目标。只有基类可以知道应该复制哪些属性。（或者我错过了什么？）

**注意**：最终对象应该具有与其基类相同的公共成员，因为该对象应该能够序列化。

这在.NET中可能吗？

## 答案：

我试图做的是不可能的，仅仅是因为泛型类不能是模板基类的扩展。Visual Studio 抱怨“不能从 'T' 派生，因为它是一个类型参数。” （我还没有注意到这个错误，因为我还没有`CopyFrom`在泛型类中实现该方法。）

如果我要将接口更改为一个类并在该类中提供一个存根实现，我可以从它继承，如下所示；然而，这在我的继承层次结构中引入了一个新的基类。

```
public class IInstantiable<T>
{
    public virtual void CopyFrom(T o) { }
}

[Serializable]
public class Inserted<T> : IInstantiable<T>
    where T : IInstantiable<T>
{
    public Inserted() { }
    public Inserted(T t)
    {
        base.CopyFrom(t);
    }
} 
```

不幸的是，我不能以模板化形式使用这个新的基类，因为我必须在继承层次结构的根部引入它。仅当我删除模板并使其尽可能通用时才有效。

```
public class IInstantiable
{
    public virtual void CopyFrom(Object o) { }
} 
```

但是，这仍然不会使我的`Inserted<T>`泛型看起来像它初始化的对象，并且由于我不能从与类型参数相同的类型继承，所以它不适合我的初始目的。

从基于类型系统的“花式泛型”转向更多（嗯）泛型注释结构可能被证明是最好的解决方案；但是，我选择的序列化方法 (XmlSerialization) 的默认行为不具有使此配置成为可行解决方案的自动支持。泛型将不起作用；改用硬编码的类定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:58:12.910

这间接地是您试图在上面的代码中声明的内容。

```
[Serializable]
public class Inserted<T> : IInstantiable<T>
    where T : IInstantiable<T>
{
    public Inserted() { }
    public Inserted(T t)
    {
        this.CopyFrom(t);
    }
} 
```

这有意义吗？

.NET 不允许您从泛型参数继承。怎么可能？泛型是在运行时评估的，但它需要在编译时知道你的类是什么类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:27:02.313

如果我理解正确，您想用它们的状态（插入、删除或匹配）的概念来注释一系列对象。

你真的不需要花哨的泛型。有什么问题：

```
enum ChangeState { Inserted, Deleted, Matched }
struct<T> Annotated { 
    public T Obj; 
    public ChangeState;
} 
```

您可以根据需要将其标记为序列化（`Annotated`对象可以在没有相同属性/字段的情况下很好地序列化）。

尽管您可以在类型系统中编码更多信息，但我不清楚这里有什么好处。你确定要这样做吗？

# android - 启动新活动时绑定事务失败

> ID：15146343
> 
> 赞同：0
> 
> 时间：2013-02-28T21:51:13.600
> 
> 标签：android

我在一个 Activity 上有一个按钮，它启动另一个 Activity。当我单击它时，我在该线程的底部收到错误。

一个快速的谷歌搜索把我带到了关于这个主题的一个线程。该线程谈论海量图像资源。实际上，在这个屏幕上，我有一个列表，其中每一行都包含一个图像。该图像由 Web 服务检索并显示在列表中。我决定切断执行此操作的代码，这样图像就不会成为问题。错误仍然发生。现在我不知道该怎么办。我没有使用这些 ImageView 中的任何一个，也没有为图像调用 Web 服务。我只是将图像资源设置为空。

ActivityFilter 是我尝试启动的 Activity。ActivitySettings 是此 Activity 的父级的父级。

有任何想法吗？

```
02-28 15:43:58.694: I/ActivityManager(58): Starting activity: Intent { cmp=com.myapp.app/.activity.ActivityFilter (has extras) }
02-28 15:43:58.774: E/JavaBinder(58): !!! FAILED BINDER TRANSACTION !!!
02-28 15:44:03.765: W/ResourceType(58): Skipping entry 0x7f040004 in package table 0 because it is not complex!
02-28 15:44:03.765: W/ResourceType(58): Skipping entry 0x7f040003 in package table 0 because it is not complex!
02-28 15:44:08.726: W/ActivityManager(58): Launch timeout has expired, giving up wake lock!
02-28 15:44:08.783: W/ActivityManager(58): Activity idle timeout for HistoryRecord{451f4ea0 com.myapp.app/.activity.ActivityFilter}
02-28 15:44:11.687: W/WindowManager(58): Key dispatching timed out sending to <null>: no window ready for key dispatch
02-28 15:44:11.687: W/WindowManager(58): Previous dispatch state: {{KeyEvent{action=1 code=4 repeat=0 meta=0 scancode=158 mFlags=8} to Window{451abdd0 com.myapp.app/com.myapp.app.activity.ActivitySettings paused=false} @ 1362086851467 lw=Window{451abdd0 com.myapp.app/com.myapp.app.activity.ActivityAccountSettings paused=false} lb=android.os.BinderProxy@44ebb660 fin=false gfw=true ed=true tts=0 wf=false fp=false mcf=Window{451abdd0 com.myapp.app/com.myapp.app.activity.ActivitySettings paused=false}}}
02-28 15:44:11.687: W/WindowManager(58): Current dispatch state: {{KeyEvent{action=0 code=4 repeat=0 meta=0 scancode=158 mFlags=8} to null @ 1362087851693 lw=null lb=null fin=true gfw=true ed=true tts=0 wf=false fp=false mcf=null}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T18:28:46.920

我的 Parcelable 使用了大量内存。

我的 Parcelable 有两个我不再使用的成员变量（整数）。我删除了它们，因此它们不会被实例化十亿次，现在我的问题“消失了”。我的意思是，问题仍然存在，但在我当前的工作流程中没有发生。

# rally - RallyDev: ConversationPost- 如何查询 RallyDev 故事中的讨论

> ID：15146345
> 
> 赞同：1
> 
> 时间：2013-02-28T21:51:15.837
> 
> 标签：rally, hierarchical

我正在使用以下 RallyApi 服务与 RallyDev 进行通信：

[https://rally1.rallydev.com/slm/webservice/1.40/RallyService](https://rally1.rallydev.com/slm/webservice/1.40/RallyService)

我有以下方法：

```
 public HierarchicalRequirement GetFeedbackById(string usid)
    {
        var query = string.Format("(FormattedID = \"{0}\")", usid);
        const string orderByString = "CreationDate desc";
        var rallyService = GetRallyService();
        var rtnval = rallyService.query(Workspace, Projs["XXX"], true, true,"HierarchicalRequirement", query,
                           orderByString, true, 1, 20).Results[0] as HierarchicalRequirement;
        return rtnval;
    } 
```

虽然我使用“FormattedID”成功检索了“HierarchicalRquirement”对象，但我无法为这个故事加载关联的“ConversationPost”对象，因为“HierarchicalRquirement”的所有嵌套复杂对象都包含“ref”和“ reffield”属性，仅此而已。

请让我知道当我们查询故事时是否有办法主动加载所有相关讨论，或者是否有如下查询：

```
 rallyService.query(Workspace, Projs["XXX"], true, true, "ConversationPost", query, orderByString, true, 1, 20) 
```

使用上述内容，我可以使用 FormattedID 搜索讨论（ConversationPost）吗？

谢谢你的帮助。

问候， 瓦伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:27:36.223

使用 rallyService.read() 是正确的。使用 SOAP，即使使用 fetchFullObjects=true，任何本身就是 Rally 对象的 Artifact 属性都会与这些对象的引用相结合。

特别是如果您刚刚开始构建集成，我强烈建议您使用 REST：

[http://developer.help.rallydev.com/rest-apis](http://developer.help.rallydev.com/rest-apis)

而不是 SOAP。

REST 更健壮、性能更高，而且即将发布的 Webservices API 1.41 将是支持 SOAP 的最终 API 版本。Webservices 2.x 将仅支持 REST，因此对于任何希望推进新的 Web 服务功能的人来说，使用 REST 将是必不可少的。

# android - Android SQLite 数据丢失

> ID：15146350
> 
> 赞同：1
> 
> 时间：2013-02-28T21:51:24.620
> 
> 标签：android, sqlite

我一直`SQLite`在我的应用程序中使用来存储一些要在应用程序中使用的数据。我面临的问题是，如果假设我今天用一些数据填充表格并在应用程序中显示它们，那么数据会很好地保留并且不会丢失。

但是当我第二天进来并*尝试显示我在前一天输入的数据时，数据似乎已经丢失*（或者可能整个`database/tables`重新创建，我不太确定）

我写信的方式`database`如下：

```
public class CustomExercisesDB 
{
    private static final String DB_NAME = "app";
    private static final int DB_VERSION = 15;

    private static final String ChosenExercises = "ChosenCustExs";
    public static final String ChEX_ID = "ChExId";
    public static final String Cust_NAME = "CustomName";
    public static final String ChEx_NAME = "ChExName";
    public static final String ChEx_Weight = "ChExWeight";
    public static final String ChEx_Reps = "ChExReps";
    public static final String ChEx_Sets = "ChExSets";

    private DBHelper helper; 
    private final Context context;
    private SQLiteDatabase database;

    private static class DBHelper extends SQLiteOpenHelper
    {
        public DBHelper(Context context) 
        {
            super(context, DB_NAME, null, DB_VERSION);
            // TODO Auto-generated constructor stub
        }

        public void onCreate(SQLiteDatabase db) 
        {
            String CREATE_TABLE_SITEINFO = "CREATE TABLE ChosenCustExs(ChExId INTEGER PRIMARY KEY AUTOINCREMENT, CustomName TEXT NOT NULL, ChExName TEXT NOT NULL, ChExWeight INTEGER, ChExReps INTEGER, ChExSets INTEGER);";

            db.execSQL(CREATE_TABLE_SITEINFO); 

        }

        public void onUpgrade(SQLiteDatabase db, int arg1, int arg2) 
        {
            db.execSQL("DROP TABLE IF EXISTS " + ChosenExercises);
            onCreate(db);   
        }
    }

    public CustomExercisesDB(Context c)
    {
        context = c;
    }

    public void close()
    {
        helper.close();
    }

    /**opens the database and allows us to write to it**/
    public CustomExercisesDB open()
    {
        helper = new DBHelper(context);

        /**this would allow us to write to the database and insert records**/
        database = helper.getWritableDatabase();
        return this;
    }

    public void populateChosenExs(String custName,String chName,String chWeight,String chReps,String chSets)
    {
        database.beginTransaction();
        try
        {
            ContentValues cv = new ContentValues();
            cv.put(Cust_NAME, custName);
            cv.put(ChEx_NAME , chName);
            cv.put(ChEx_Weight, chWeight);
            cv.put(ChEx_Reps, chReps);
            cv.put(ChEx_Sets, chSets);
            database.insert(ChosenExercises, null, cv); 
            database.setTransactionSuccessful();
        }
        finally
        {
            database.endTransaction();
        }

    }

    public String getChosenExs()
    {
        String[] columns = new String[]{ChEX_ID, Cust_NAME,ChEx_NAME,ChEx_Weight,ChEx_Reps,ChEx_Sets};
        Cursor c = database.query(ChosenExercises, columns, null, null, null, null, null);

        String result = "";

        int id = c.getColumnIndex(ChEX_ID);
        int custName = c.getColumnIndex(Cust_NAME);
        int chEx = c.getColumnIndex(ChEx_NAME);
        int chW = c.getColumnIndex(ChEx_Weight);
        int chR = c.getColumnIndex(ChEx_Reps);
        int chS = c.getColumnIndex(ChEx_Sets);

        for(c.moveToFirst();!c.isAfterLast();c.moveToNext())
        {
            /**gets the value of each column from each row and stores it in the result variable**/
            result = result + c.getString(id)+" "+c.getString(custName)+" "+c.getString(chEx)+" "+c.getString(chW)+" "+c.getString(chR)+" "+c.getString(chS)+"\n";
        }
        return result;
    }

} 
```

任何人都知道为什么数据似乎在第二天消失了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T22:13:36.590

将评论变成答案;-)

好的，您实际上每次使用此类时都会删除数据库，因为您已经实现了该`onUpgrade`方法。

此方法仅适用于您更改数据库并因此需要升级表定义时。删除`onUpgrade`方法的内部，你应该没问题;-)

还在这里阅读`SQLiteOpenHelper`课程：[developer.android.com/reference/android/database/sqlite/…, int, int)](http://developer.android.com/reference/android/database/sqlite/%E2%80%A6,%20int,%20int%29)

# javascript - 极简形式不验证

> ID：15146353
> 
> 赞同：0
> 
> 时间：2013-02-28T21:51:39.393
> 
> 标签：javascript, jquery, forms, email

我正在尝试更新以前创建的表单以使用新字段。目前只有电子邮件正在验证，如果您单击发送，则仅显示电子邮件字段为空（将边框变为红色）。

jsFiddle 的代码位于**[此处](http://jsfiddle.net/DJdTB/3/)**。

我想我忽略了一个明显的错误。

HTML：

```
 <div class="success"> Contact form submitted!<br> <strong>We will be in touch soon.</strong></div>
                <form id="form-1" class="form-1" name="form-1" method="post" action="index.html" enctype="multipart/form-data">
                    <input class="inputbox" name="name" id="name" type="text" value="Your Name:" onFocus="if(this.value=='Your Name:'){this.value=''}" onBlur="if(this.value==''){this.value='Your Name:'}" />
                    <input class="inputbox top-2" name="email" id="email" type="text" value="E-mail:" onFocus="if(this.value=='E-mail:'){this.value=''}" onBlur="if(this.value==''){this.value='E-mail:'}" />
                    <input class="inputbox top-2" name="phone" id="phone" type="text" value="Phone:" onFocus="if(this.value=='Phone:'){this.value=''}" onBlur="if(this.value==''){this.value='Phone:'}" />
                    <div class="select-3 top-2 fleft">
                        <select name="select" name="adults" id="adults" >
                            <option selected disabled>Adults</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9+">9+</option>
                        </select>   
                    </div>
                    <div class="select-3 top-2  fleft">
                        <select name="select" name="children" id="children" >
                            <option selected disabled>Children</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9+">9+</option>
                        </select>   
                    </div> 
                    <div class="select-3 top-2 fleft last-1">
                        <select name="select" name="rooms" id="rooms" >
                            <option selected disabled>Rooms</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9+">9+</option>
                        </select>   
                    </div> 
                    <div class="select-2 top-2 fleft">
                        <input class="inputbox_date" name="checkin" id="checkin" value="Check-In Date:" onFocus="if(this.value=='Check-In Date:'){this.value=''}" onBlur="if(this.value==''){this.value='Check-In Date:'}" /> 
                        <input class="inputbox_date" name="checkout" id="checkout" value="Check-Out Date:" onFocus="if(this.value=='Check-Out Date:'){this.value=''}" onBlur="if(this.value==''){this.value='Check-Out Date:'}" />  
                    </div> 
                    <div class="clear"></div>
                    <div class="height-3 border-2 pad-2">
                        <textarea class="textarea top-2" name="comments" id="comments" onFocus="if(this.value=='ADDITIONAL COMMENTS:'){this.value=''}" onBlur="if(this.value==''){this.value='ADDITIONAL COMMENTS:'}">ADDITIONAL COMMENTS:</textarea>
                    </div>
                    <p class="center"><a href="javascript:void(0);" name="submitlink" id="submitlink" class="button top-1">Send</a></p>
                    <div class="clear"></div>
                </form> 
```

JS：

```
function checkValidEmailAddress(emailAddress) {
    var pattern = new RegExp(/^(("[\w-+\s]+")|([\w-+]+(?:\.[\w-+]+)*)|("[\w-+\s]+")([\w-+]+(?:\.[\w-+]+)*))(@((?:[\w-+]+\.)*\w[\w-+]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][\d]\.|1[\d]{2}\.|[\d]{1,2}\.))((25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\.){2}(25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\]?$)/i);

    return pattern.test(emailAddress);
};

var mailsendstatus;
function userSendMailStatus(uname, uemail, uphone, uadults, uchildren, urooms, ucheckin, ucheckout, umsg) {
    // checking for some valid user name
    if(!uname) {
        $("#name").addClass('formError');
    }
    else if (uname){
        $("#name").removeClass('formError');    
    }

    // checking for valid email
    if(!checkValidEmailAddress(uemail)) {
        $("#email").addClass('formError');
    }
    else if(checkValidEmailAddress(uemail)) {
        $("#email").removeClass('formError');   
    }

    // checking for phone
    if(!uphone) {
        $("#phone").addClass('formError');
    }
    else if (uphone) {
        $("#phone").removeClass('formError');   
    }

    // checking for checkin
    if(!ucheckin){
        $("#checkin").addClass('formError');
    }
    else if(ucheckin){
        $("#checkin").removeClass('formError'); 
    }

    // checking for checkout
    if(!ucheckout) {
        $("#checkout").addClass('formError');
    }
    else if(!ucheckout){
        $("#checkout").removeClass('formError');    
    }

    if(uname && checkValidEmailAddress(uemail) && uphone && ucheckin && ucheckout) {
        // in this case all of our inputs look good
        // so we say true and send the mail
        mailsendstatus = true;

        $.ajax(
            {
                type: 'POST',
                url: 'js/sendmail.php',
                data: $("#form-1").serialize(),
                success: function(data) {
                    if(data == "yes") {
                    $(".success").toggle();
                    $("#form-1").slideUp(650);
                    }
                }
            }
    )};

    return mailsendstatus;
}

$(document).ready(function(){
    $("#form-1").submit(function() { return false; });

    $("#submitlink").bind("click", function(e){
        var subnamevalue  = $("#name").val();
        var emailvalue    = $("#email").val();
        var phonevalue    = $("#phone").val();
        var adultsvalue   = $("#adults").val();
        var childrenvalue = $("#children").val();
        var roomsvalue    = $("#rooms").val();
        var checkinvalue  = $("#checkin").val();
        var checkoutvalue = $("#checkout").val();
        var msgvalue      = $("#comments").val();

        var postchecks = userSendMailStatus(subnamevalue, emailvalue, phonevalue, adultsvalue, childrenvalue, roomsvalue, checkinvalue, checkoutvalue, msgvalue);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:58:56.803

当您的函数运行以检查它们是否为空时，它会看到您的占位符文本。实际上没有一个字段是空的/空白的。该电子邮件有效，因为您还检查它是否是有效的电子邮件地址。

# java - 有人能告诉我为什么我的生命游戏代码不起作用吗？

> ID：15146354
> 
> 赞同：0
> 
> 时间：2013-02-28T21:51:39.760
> 
> 标签：java, conways-game-of-life

eclipse中没有出现错误，但是当我去运行代码时，应用程序没有任何反应。它分为三个等级。第一类包含 if 语句。我想知道我的问题是否在这里。

```
 package course.infsci0017.lab04;

    import java.util.Scanner;
    import javax.swing.JFrame;

    public class GameOfLife {

public static void main(String[] args) {
    int testCase = 1;

    JFrame frame = new JFrame();
    frame.setSize(500, 500);
    frame.setTitle("Conway's Game of Life");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    Cell[][] universe = new Cell[100][100];
    for (int x = 0; x < universe.length-1; x++) {
        for (int y = 0; y < universe[x].length-1; y++) {
            universe[x][y] = new Cell();
        }
    }

    if (testCase == 1) {
        universe[3][2].calculateNext(3);
        universe[3][2].updateCurrent();
        universe[3][3].calculateNext(3);
        universe[3][3].updateCurrent();
        universe[3][4].calculateNext(3);
        universe[3][4].updateCurrent();
    } else if (testCase == 2) {
        universe[49][50].calculateNext(3);
        universe[49][50].updateCurrent();
        universe[49][51].calculateNext(3);
        universe[49][51].updateCurrent();
        universe[50][49].calculateNext(3);
        universe[50][49].updateCurrent();
        universe[50][50].calculateNext(3);
        universe[50][50].updateCurrent();
        universe[51][50].calculateNext(3);
        universe[51][50].updateCurrent();
    } else {
    }

    UniverseComponent component = new UniverseComponent(universe);
    frame.add(component);

    frame.setVisible(true);

    Scanner in = new Scanner(System.in);
    String input = in.nextLine();
    while (input.length() == 0) {
        int neighborCount = 0;
        for (int x=1; x<universe.length-2; x++) {
            for (int y=1; y<universe[x].length-2; y++) {
                neighborCount = 0;
                if (universe[x-1][y-1].isAlive()) {
                    neighborCount++;
                }
                if (universe[x-1][y].isAlive()) {
                    neighborCount++;
                }
                if (universe[x-1][y+1].isAlive()) {
                    neighborCount++;
                }
                if (universe[x][y-1].isAlive()) {
                    neighborCount++;
                }
                if (universe[x][y+1].isAlive()) {
                    neighborCount++;
                }
                if (universe[x+1][y-1].isAlive()) {
                    neighborCount++;
                }
                if (universe[x+1][y].isAlive()) {
                    neighborCount++;
                }
                if (universe[x+1][y+1].isAlive()) {
                    neighborCount++;
                }
                universe[x][y].calculateNext(neighborCount);
            }
        }
        for (int x=1; x<universe.length-2; x++) {
            for (int y=1; y<universe[x].length-2; y++) {
                universe[x][y].updateCurrent();
            }
        }
        component.repaint();
        input = in.nextLine();
    }
    in.close();
}
    } 
```

2 级

```
 import java.awt.Graphics;
    import java.awt.Graphics2D;

    import javax.swing.JComponent;

    public class UniverseComponent extends JComponent {
private Cell[][] universe;
public UniverseComponent(Cell[][] universe) {
    super();
    this.universe = universe;
}

public void paintComponent(Graphics g) {
    Graphics2D g2 = (Graphics2D)g;

    for (int x=0; x<universe.length-1; x++) {
        for (int y=0; y<universe[x].length-1; y++) {
            if (universe[x][y].isAlive()) {
                g2.fillRect(x*5, y*5, 4, 4);
            }
        }
    }
}

    } 
```

3 级

```
 public class Cell {
private boolean current;
private boolean next;

public Cell() {
    current = false;
    next = false;
}

public Cell(int neighborCount) {
    calculateNext(neighborCount);
    updateCurrent();
}

public void calculateNext(int neighborCount) {
    if (current) {
        if ((neighborCount < 2) || (neighborCount > 3)) {
            next = false;
        } else {
            next = true;
        }
    } else {
        if (neighborCount == 3) {
            next = true;
        } else {
            next = false;
        }
    }
}

public void updateCurrent() {
    current = next;
}

public boolean isAlive() {
    return current;
}
    } 
```

如果有人知道如何解决此问题，请告诉我。如有必要，请随意复制和粘贴代码。它不会让我发布图片，因为我没有足够的声誉。道歉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:59:21.740

你的 while 循环说

`while (input.length() == 0)`

但是，如果您在输入中输入任何内容，它不会等于零，因此不会执行循环并且您的程序将退出。

该程序似乎被设计为只允许用户点击“输入”而不在控制台上输入任何单词。也就是说，如果你只输入回车，将执行循环，否则程序将退出。

这显然不是您自己的代码，因为它似乎没有错误，但您对它的使用不正确。请对你的问题更加诚实（我希望你没有抄袭）。

# hibernate - 在 Hibernate 的一对多映射中删除父项和子项

> ID：15146356
> 
> 赞同：1
> 
> 时间：2013-02-28T21:51:45.817
> 
> 标签：hibernate, orm, hibernate-mapping

**父表**

```
 <property name="buyerGroupName"    type="string"        column="BUYER_GROUP_NAME" />
    <property name="description"       type="string"        column="DESCRIPTION" />
    <property name="approvalPathId"    type="int"           column="APPROVAL_PATH_ID" />
    <property name="active"            type="int"           column="ACTIVE" />
    <property name="createdOn"         type="timestamp">
            <column name="CREATED_ON" length="20" not-null="true" />
    </property>

    <set name="buyers" table="buyers" cascade="all" >
        <key>
            <column name="BG_ID" not-null="true" />
        </key>
        <one-to-many class="com.sg.beans.Buyers" />
    </set>

</class>
  </hibernate-mapping> 
```

**子表映射**

```
 <hibernate-mapping>
<class name="com.sg.beans.Buyers" table="buyers" >
    <id  name="id" type="int"  column="ID">
        <generator class="increment" />
    </id>

    <property    name="loginId" type="int" column="LOGIN_ID" />

    <many-to-one name="buyerGroup" class="com.sg.beans.BuyerGroup"    fetch="select" cascade="all"  >
        <column name="BG_ID" not-null="true" />
    </many-to-one> 

</class>
     </hibernate-mapping> 
```

**删除方法..传递父对象删除**

```
 public Boolean deleteBuyerGroup(BuyerGroup bg){

    try {
        session.delete(bg);
        session.getTransaction().commit();
        return true;
    } catch (Exception e) {
        e.printStackTrace();
        return false;
    }
} 
```

**下面是错误**

```
 buyerGroup.getBuyerGroupId()1

   Hibernate: update buyers set BG_ID=null where BG_ID=?
   org.hibernate.exception.ConstraintViolationException: Column 'BG_ID' cannot be null 
```

**我进行了调试并确保将 BG_ID 设置为预期的值...请帮助！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:59:54.580

我认为您必须在父实体的映射`all,delete-orphan`上使用该属性的值。`cascade`您还必须通过设置`inverse="true"`父实体映射来设置双向关系的负责人。

# c - 使用取消链接删除文件

> ID：15146358
> 
> 赞同：-1
> 
> 时间：2013-02-28T21:51:57.120
> 
> 标签：c, linux, binaryfiles, unlink

我想读取命令行参数中给出的文件并在读取后将其删除。这就是我正在做的事情。

```
char *filename = argv[1];
char *outputfile = strcat(argv[1], ".cmp");

fd = open(argv[1], O_RDONLY);
chars = read(fd, buf, BUFFERSIZE);
fd1 = creat(outputfile, 0644);
write(fd1, buf, BUFFERSIZE);
close(fd1);
close(fd);
unlink(argv[1]); 
```

如果我在命令行中给出“mytxt”，代码应该创建“mytxt.cmp”文件并删除“mytxt”，而不是删除“mytxt.cmp”，保持“mytxt”不变。为什么会这样？如何删除命令行参数中给出的文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:52:59.510

```
char *outputfile = strcat(argv[1], ".cmp"); 
```

您正在修改`argv[1]`，并`filename`指向它。您可以尝试创建一个新字符串，`malloc`并在其中添加`sprintf`所需的值。

```
char *newstr = malloc(strlen(argv[1]) + strlen(".cmp") + 1);
sprintf(newstr, "%s.cmp", argv[1]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T21:58:19.837

这不好，是您的问题的原因：

```
char *outputfile = strcat(argv[1], ".cmp"); 
```

这是做什么的：

1) 将“.cmp”附加到 argv[1]。不要这样做！您不知道 argv[1] 指向的缓冲区中有多少空间，因此这可能会覆盖/损坏其他一些数据。2) strcat 返回一个指向连接字符串的指针，它只是 argv[1]，最后危险地添加了“.cmp”。 `strcat` *不*为新字符串分配空间。3）所以你真正做的是将“.cmp”附加到原始文件中，所以两者都`argv[1]`指向`outputfile`同一个字符串，并且可能损坏了一些内存。

您应该做的是为字符串分配空间：

```
char* outputfile = (char*)(malloc(strlen(argv[1]) + strlen(".cmp") + 1));
sprintf(outputfile, "%s.cmp", argv[1]); 
```

然后最后归还记忆。

```
free(outputfile); 
```

# mongodb - MongoDB 提要设计和查询

> ID：15146359
> 
> 赞同：2
> 
> 时间：2013-02-28T21:51:57.917
> 
> 标签：mongodb, collections

我正在为博客网站设计新闻提要。我正在尝试设计提要，以便您朋友最近活动的博客将这些博客保留在提要的顶部，而您没有参与的提要则落在列表的底部。基本上，想想你的 Facebook 提要，但对于博客。

这是我目前的设计，但我愿意接受建议，以便更容易选择：

```
{
_id: 1,
author: {first: "John", last: "Doe", id: 123},
title: "This is a test post.",
body: "This is the body of my post."
date: new Date("Feb 1, 2013"),
edited: new Date("Feb 2, 2013"),
comments: [
    {
        author: {first: "Jane", last: "Doe", id: 124},
        date: new Date("Feb 2, 2013"),
        comment: "Awesome post."
    },
],
likes: [
    {
        who: {first: "Black", last: "Smith", id: 125},
        when: new Date("Feb 3, 2013")
    }
],
tagged: [
    {
        who: {first: "Black", last: "Smith", id: 126},
        when: new Date("Feb 4, 2013")
    }
]} 
```

问题 1：假设我的朋友的 id 为 124 和 125，我如何选择提要，以便此帖子在结果中的顺序是他们，而不是稍后在提要中标记的用户 126。

问题 2：这个单一的博客集合是一个好的设计，还是我应该将操作规范化到一个单独的集合中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:06:02.697

所以你展示的这个文件代表了一篇博客文章，那些是评论、标签、喜欢等？如果是这样的话，这还不算太糟糕。

1.

`db.posts.find({'$or':[{'comments.author.id':{$in:[some list of friends]}}, {'likes.who.id':{$in:[some list of friends]}}, {'tagged.who.id':{$in:[some list of friends]}}]}).sort({date:-1})`

这将为您提供所有您的朋友有活动的帖子，按帖子的日期降序排序。我认为 mongodb 尚不支持高级排序（如评论、喜欢或标签中日期的最小/最大值），因此按评论、喜欢或标签之一进行排序或按发布日期排序是使用此模型的最佳选择。

2.

就个人而言，我会设置一个单独的集合来将用户的提要事件转储到其中。然后当事件发生时，只需将事件推送到文档中的事件数组中。

它们将自动排序，您可以根据需要对数组进行切片和封盖。

但是，对于像这样增长的文档，您需要小心并分配初始相当大的内存量，否则您将遇到磁盘上的文档移动缓慢。

查看[更新的简介](http://docs.mongodb.org/manual/core/write-operations/#updates)

编辑附加评论：

有两种方法可以做到这一点。每个文档都是提要事件的集合，或者每个文档都是用户的整个提要的集合。每个都有优点和缺点。如果您可以将其限制在 1000 个最近的提要事件中，我将使用该文档来表示整个提要方法。

所以我会创建一个文档结构，比如

`{userid:1, feed:[(feed objects)]}`

其中 feed 是一个 feed 事件对象数组。这些应该是子文档，例如

`{id:(a users id), name:(a users name), type:(an int for like/comment/tag), date:(some iso date), postName:(the name of the post acted on), postId:(the id of the post acted on)}`

要更新此提要，您只需在提要事件发生时将新提要文档推送到提要数组中。因此，如果用户 A 喜欢某个帖子，则将提要文档推送到用户 A 的所有朋友提要上。

这适用于小提要。如果您需要一个非常大的提要，我建议您对每个提要条目使用一个文档，并将收件人用户的 ID 分片并索引日期字段。这越来越接近 twitter/fb 上非常大的提要的工作方式，但他们使用 mysql，对于这个特定的用例来说，这可以说比 mongodb 更好。

# c# - Memory Cache absoluteExpiration - 这会影响内存缓存中的所有条目吗？

> ID：15146362
> 
> 赞同：1
> 
> 时间：2013-02-28T21:52:03.487
> 
> 标签：c#, memorycache

我正在使用`MemoryCache.Default`缓存数据一段时间......

我使用[Set 方法做到了](http://msdn.microsoft.com/en-us/library/dd780572.aspx)

```
DateTimeOffset cacheTimeOut = new DateTimeOffset(DateTime.Now.AddSeconds(2));
patientOrderCache.Set("abc", abcData, cacheTimeOut); 
```

如果该`absoluteExpiration`值结束，它会删除 中的所有缓存条目`MemoryCache.Default`吗？

或者，它会删除指定的 ( `abc`) 吗？

我很确定它只会删除指定的条目（`abc`键和相关数据）......但只是想确认一下，因为我没有看到任何与此相关的描述......而且我现有的内存缓存有很多数据我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:31:58.167

> 或者，它会删除指定的 (abc) 吗？

当您将其存储到缓存中时，它将仅删除`abc`您为其指定此过期策略的指定键。

其他缓存条目将遵循您在存储它们时指定的过期策略（如果您没有明确指定，则使用默认策略）。

# javascript - 跨域访问时如何抑制“不安全的 JavaScript 尝试使用 URL 访问框架”

> ID：15146364
> 
> 赞同：1
> 
> 时间：2013-02-28T21:52:05.547
> 
> 标签：javascript, google-chrome-devtools, cross-domain-policy

有没有人知道一个很好的解决方案来抑制 Chrome 开发工具控制台中显示的警告消息“不安全的 JavaScript 尝试使用 URL 访问框架”，当尝试访问来自不同域的框架时会发生这种情况？

现在，我有一个检查窗口是否可访问的功能。每次在来自不同域的窗口对象上执行此函数时，Chrome 开发工具控制台中都会显示一条警告消息。这种情况经常发生，控制台被所有这些警告污染，很难发现真正的 JS 错误。

我在想也许有办法在控制台中抑制这些警告？或者更好的是，有没有更好的方法来编写代码来检查窗口是否可访问？

这就是我所做的：

```
function isWindowAccessible(win) {
    var accessible = null;
    try {
        accessible = win.location.href;
    } catch (e) {}
    return (typeof accessible === 'string');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T05:27:28.143

您可以在禁用安全性的情况下运行 Chrome（命令行标志为 --disable-web-security）。我这样做是为了绕过一些跨域问题，以便在 iframe 中进行自动浏览器测试。它会让你做很多浏览器通常认为是非法的不安全的事情，而不会抱怨。

# c# - 收益回报大脑冻结

> ID：15146366
> 
> 赞同：3
> 
> 时间：2013-02-28T21:52:25.203
> 
> 标签：c#, linq

假设我有这样的方法：

```
IEnumerable<record> GetSomeRecords()
{
  while(...)
  {
    yield return aRecord
  }
} 
```

现在，假设我有一个调用者，它也返回一个相同类型的枚举，像这样

```
IEnumerable<record> ParentGetSomeRecords()
{
  // I want to do this, but for some reason, my brain locks right here
  foreach(item in someItems)
    yield return GetSomeRecords();
} 
```

该代码出现语法错误错误，因为 yield return 需要一个类型记录，而我正在返回一个 IEnumerable 记录

我想要一个“扁平” IEnumerable 来扁平化一个嵌套的枚举循环。这让我发疯，因为我知道我以前做过，但我似乎不记得那是什么了。有任何提示吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T21:58:09.887

这就是你所追求的吗？

```
IEnumerable<record> ParentGetSomeRecords()
{
    foreach(var item in someItems)
        foreach(var record in GetSomeRecords())
            yield return record;
} 
```

如前所述，这仅适用于单个级别的子级，但与您的示例代码最等效。

**更新**

有些人似乎认为您想要扁平化层次结构的能力。这是一个执行广度优先展平的扩展方法（在孩子之前获取兄弟姐妹）：

来自单个项目：

```
[Pure]
public static IEnumerable<T> BreadthFirstFlatten<T>(this T source, Func<T, IEnumerable<T>> selector)
{
    Contract.Requires(!ReferenceEquals(source, null));
    Contract.Requires(selector != null);
    Contract.Ensures(Contract.Result<IEnumerable<T>>() != null);

    var pendingChildren = new List<T> {source};

    while (pendingChildren.Any())
    {
        var localPending = pendingChildren.ToList();
        pendingChildren.Clear();
        foreach (var child in localPending)
        {
            yield return child;
            var results = selector(child);
            if (results != null)
                pendingChildren.AddRange(results);
        }
    }
} 
```

这可以像这样使用：

```
record rec = ...;
IEnumerable<record> flattened = rec.BreadthFirstFlatten(r => r.ChildRecords); 
```

这将导致`IEnumerable<record>`包含`rec`所有 recs 子项、所有子项的子项等。

如果您来自 的集合`records`，请使用以下代码：

```
[Pure]
private static IEnumerable<T> BreadthFirstFlatten<T, TResult>(IEnumerable<T> source, Func<T, TResult> selector, Action<ICollection<T>, TResult> addMethod)
{
    Contract.Requires(source != null);
    Contract.Requires(selector != null);
    Contract.Requires(addMethod != null);
    Contract.Ensures(Contract.Result<IEnumerable<T>>() != null);

    var pendingChildren = new List<T>(source);

    while (pendingChildren.Any())
    {
        var localPending = pendingChildren.ToList();
        pendingChildren.Clear();
        foreach (var child in localPending)
        {
            yield return child;
            var results = selector(child);
            if (!ReferenceEquals(results, null))
                addMethod(pendingChildren, results);
        }
    }
}

[Pure]
public static IEnumerable<T> BreadthFirstFlatten<T>(this IEnumerable<T> source, Func<T, IEnumerable<T>> selector)
{
    Contract.Requires(source != null);
    Contract.Requires(selector != null);
    Contract.Ensures(Contract.Result<IEnumerable<T>>() != null);

    return BreadthFirstFlatten(source, selector, (collection, arg2) => collection.AddRange(arg2));
}

[Pure]
public static IEnumerable<T> BreadthFirstFlatten<T>(this IEnumerable<T> source, Func<T, T> selector)
{
    Contract.Requires(source != null);
    Contract.Requires(selector != null);
    Contract.Ensures(Contract.Result<IEnumerable<T>>() != null);

    return BreadthFirstFlatten(source, selector, (collection, arg2) => collection.Add(arg2));
} 
```

这两种扩展方法可以像这样使用：

```
IEnumerable<records> records = ...;
IEnumerable<record> flattened = records.BreadthFirstFlatten(r => r.ChildRecords); 
```

或者从相反的方向：

```
IEnumerable<record> records = ...;
IEnumerable<record> flattened = records.BreadthFirstFlatten(r => r.ParentRecords); 
```

所有这些扩展方法都是迭代的，因此不受堆栈大小的限制。

我有一大堆这些类型的方法，包括预排序和后排序深度优先遍历，如果你想看到它们，我会做一个 repo 并上传到某个地方:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T21:55:38.200

怎么样：

```
IEnumerable<record> ParentGetSomeRecords()
{
    var nestedEnumerable = <whatever the heck gets your nested set>;
    // SelectMany with an identity flattens 
    // IEnumerable<IEnumerable<T>> to just IEnumerable<T>
    return nestedEnumerable.SelectMany(rec => rec);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:58:01.813

效率低下，但你可以使用这个：

```
List<Record> rcrdList = new List<Record>();
foreach (var item in someItems)
{
    rcrdList.AddRange(item.GetSomeRecords());
}
return rcrdList; 
```

# javascript - 有没有办法格式化查询中字段的日期？

> ID：15146371
> 
> 赞同：0
> 
> 时间：2013-02-28T21:52:42.177
> 
> 标签：javascript, sql, date, format

我收到一个带有不想要的日期格式的字段的查询（2013 年 2 月 21 日星期四 00:00:00 EST 2013）有没有办法将其修改为 mm-dd-yyy？

我正在使用 javascript，我找到了一种 php 方式来执行此操作，但遗憾的是它必须使用 javascript，因此指令必须与 TOAD 中的指令几乎相同。

我尝试了 CONVERT() 方法，但它不起作用。我不确定我是否正确使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:57:13.097

Convert() 函数将起作用，但您需要使用此处的正确格式代码： [SQL Convert() 函数](http://msdn.microsoft.com/en-ca/library/ms187928.aspx)。

```
SELECT Convert(char(10), @date, 110) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:56:10.727

[Date.js](http://www.datejs.com/)对于日期格式非常方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:02:31.947

您可以使用 JS 中的基本 Date 对象函数。

首先，创建日期变量：

```
var date = new Date('your date value'); 
```

然后您可以访问各个日期片段：

```
var month = date.getMonth() + 1;  //gets the month . . . it's 0-based, so add 1
var day = date.getDate();         //gets the day of the month
var year = date.getFullYear();    //gets the 4-digit year 
```

一旦你有了这些值，你就可以将它们以你想要的任何格式连接起来。对于基本的 mm-dd-yyyy，请使用：

```
var formattedDate = month + "-" + day + "-" + year; 
```

那里的时间和时区值也可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T22:09:42.823

您可能可以尝试转换为 unix 时间戳，然后进行格式化。我还没有测试过这个，它可能会抛出一个错误，但你明白了。

```
var input = your date;
input = input.split(" - ").map(function (date){
return Date.parse(date+"-0500")/1000;
}).join(" - ");

var year = input.getYear();
var month = input.getMonth();
var day = input.getDay();
var hours = input.getHours();
var minutes = input.getMinutes();
var seconds = input.getSeconds();
var formatted = month + " " + day + ", " + year + " at " hours + ':' + minutes + ':' +     seconds; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T22:54:14.090

这是一种严重混淆的格式。有两种修改它的基本方法，一种是重新排序您拥有的位，另一种是将其转换为日期对象并使用它来创建新字符串。无论哪种方式，您都没有说如何处理时区偏移量。

使用时区的缩写或名称是模棱两可的，它们没有标准，有些是重复的（EST 用于三个不同的时区）。在任何情况下，一个简单的重新排序可以是：

```
function formatDate(s) {
  var months = {jan:'01', feb:'02', mar:'03', apr:'04',
                may:'05', jun:'06', jul:'07', aug:'08',
                sep:'09', oct:'10', nov:'11', dec:'12'};
  var s = s.split(' ');
  var d = (s[2] < 10? '0' : '') + s[2]; 

  return months[s[1].toLowerCase()] + '-' + d + '-' + s[5];
}

alert(formatDate('Thu Feb 21 00:00:00 EST 2013')); // 02-21-2013 
```

输出格式 (mm-dd-yyyy) 不明确，请考虑使用 21-Feb-2013 之类的格式或 ISO8601 (2013-02-21) 之类的标准格式。

如果您需要考虑时区，创建日期对象，添加偏移量，然后取回新日期会更容易。但是，您还需要弄清楚如何将字符串时区转换为可与日期一起使用的数字（最好是分钟，但小时也可以）。

# linux - Linux 卡在 CPU 软锁定？

> ID：15146372
> 
> 赞同：8
> 
> 时间：2013-02-28T21:52:42.630
> 
> 标签：linux, linux-kernel, centos, driver, kernel-module

我的系统是一个`CentOS 6.3`（运行内核版本`2.6.32-279.el6.x86_64`）。

我有一个可加载的内核模块，它是一个管理 PCIe 卡的驱动程序。`insmod`如果我在操作系统启动并运行时手动插入驱动程序，驱动程序会成功加载并且可以运行。

但是，如果我尝试使用 rpm 安装驱动程序然后重新启动系统，则在启动过程中，操作系统会卡住并为所有 CPU 内核吐出以下“软锁定”消息，除了一个处于“软锁定”状态的内核我的驱动程序创建的线程之一。

```
BUG: soft lockup - CPU#X stuck for 67s! [migration/8:36]
.......(same above message for all cores except one)
BUG: soft lockup - CPU#10 stuck for 67s! [mydriver_thread/8:36]
(one core is locked up in one of the threads in my driver). 
```

我在网上搜索了很多关于这个内核消息/错误的信息，并且有很多关于它的帖子，没有关于它的原因或如何调试的帖子。对于以下问题的任何帮助将不胜感激：

1.  我无法登录系统，我认为这是因为所有内核都处于“软锁定”状态，因此无法从 shell 提示符触发内核转储。我启用了 SysRq，并尝试使用 SysRq 键组合触发内核转储，但没有运气。系统似乎没有响应键盘（甚至没有响应 CapsLock 按钮）。关于在这种情况下如何触发内核转储的任何建议？

2.  我可以想象我的驱动程序线程可能导致“软锁定”。但是，“迁移”线程（内核线程）怎么会因为我的驱动程序而处于“软锁定”状态呢？

3.  通过浏览网络，“迁移”线程用于将任务从一个 cpu 移动到另一个 cpu。有人可以帮我理解这个线程的确切作用吗？以及它如何受到其他线程的影响，如果有的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-14T12:36:12.930

我的桌面上有一个非常相似的问题。它会非常频繁地软锁定 - 大约每天一次左右。

原来是因为我在 Intel Haswell 上运行。似乎 Haswell/Broadwell 系列的 Intel 处理器存在可能导致系统不稳定的错误。此错误已在微码更新中修复。

检查 CentOS 是否提供 intel-microcode 软件包，并安装它。确保在加载 initramfs 之前配置 grub 以将其加载为初始 ramdisk。

就个人而言，我通过启动 Windows 并运行 BIOS 更新来升级我的微码。`grep 'microcode' /proc/cpuinfo`您可以通过比较更新前后的输出来检查微码是否实际更新。

# html - 使用CSS在DIV中图像下的动态高度/渐变

> ID：15146380
> 
> 赞同：1
> 
> 时间：2013-02-28T21:52:58.030
> 
> 标签：html, css, joomla

我正在一家公司实习，老板问是否可以将网站右侧出现的随机图像淡化到页面底部附近（这很乏味，将在下面详细介绍）。

到目前为止，我已经建立了一个测试站点，这是一个页面[示例](http://lsotest.wrldevelopment.com/index.php/lso-musicians)。该网站使用 Joomla CMS（不是我的选择）。如果你看右边有一个音乐家的图像，每次刷新都会拉出一个不同的音乐家/图像。我的老板想让我做的（因为显然自从改造他们的网站后我的任务很少）是在图像下方以黑色开始渐变渐变，使用其余页面高度慢慢过渡到背景颜色或透明（我假设背景颜色会更容易）。到目前为止，我的想法是这几乎是不可能的，但我想我还是会问你们。

我的主要问题是页面的高度右列与页面高度的高度动态匹配......如果可能的话。我知道如何让它渐变，但高度问题困扰着我！

整个右列的 CSS（显然没有渐变）是：

```
#columnrt {
width:200px;
background-color:#673601;
float:right; } 
```

如果检查页面上的源代码，随机图像会显示在一个名为“random-image”的类中，我强烈感觉它是由 Joomla 生成的...示例，因此您可以识别我在说什么图像：

```
<div class="random-image"><img src="/images/stories/sidebar/lubsym_nov11_017-crop.jpg" width="200" height="306"></div> 
```

任何输入都会很好，谢谢大家！

PS：无薪实习……我不想让你们认为我在偷偷摸摸！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:59:46.337

正如您所说，您的主要问题是使右列与页面一样高，即向下延伸至主要内容。这可以通过添加到 CSS 来解决：

```
#columnrt {
width:200px;
background-color:#673601;
position:absolute;
top: 0;
right:0;
bottom:0;
} 
```

这将使右列的高度正确扩展，允许您添加渐变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T07:04:06.807

使用下面的css和一个div，你的作业就完成了

```
td { position: relative; }
.bg-gradient { background: blue; min-height: 100%; width: 200px; position: absolute; z-index:-1; } 
```

将此 div 添加为“.columnrt”下的第一个子项

```
<div class="bg-gradient"></div> 
```

给你想要的背景渐变在css中'.bg-gradient'

# dynamics-crm-2011 - 是否可以在 Dynamics CRM 2011 中的表单上创建选项卡式界面？

> ID：15146383
> 
> 赞同：1
> 
> 时间：2013-02-28T21:52:59.597
> 
> 标签：dynamics-crm-2011, dynamics-crm, microsoft-dynamics

是否可以将选项卡添加到 Dynamics CRM 2011 表单？我不是在谈论表单上基本上是垂直部分的“选项卡”，您可以单击表单导航部分上的链接跳转到。

我想要一个真正的选项卡式界面，如下面的屏幕截图。类似于 jQuery 选项卡插件的东西

![表格上的标签](../Images/349fd9faccfca7d4de2682902a3124c5.png)

如果可能的话，是否可以以编程方式（也许使用 javascript/xrm？）选择要设置为活动/显示的选项卡？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T22:31:36.360

默认情况下，没有办法做到这一点。此选项卡系统在 CRM 2011 中已停用，在 CRM 4 中，所有表单都有这样的选项卡。

唯一的方法是通过 Web 资源（HTML 或 Silverlight），但您还必须手动添加控件和数据绑定。搜索是否存在任何要遵循的样本，我发现这篇[文章](http://madcomputerist.blogspot.pt/2011/10/adding-tabs-in-crm-2011-forms-like-crm.html)看看。

# sql - 查询以提供所有产品的两个最近日期之间的差异

> ID：15146387
> 
> 赞同：0
> 
> 时间：2013-02-28T21:53:12.580
> 
> 标签：sql, postgresql, datetime, union

我有一个如下所示的数据库：

```
person | product    |    purchase_time
-------+------------+---------------------
jim    | football   | 2013-02-28 00:01:00
jane   | basketball | 2013-02-28 01:01:00
ben    | baseball   | 2013-02-28 02:02:00
jim    | basketball | 2013-02-28 00:01:00
jim    | basketball | 2013-02-28 00:03:00
jim    | football   | 2013-02-28 00:04:00
jane   | baseball   | 2013-02-28 00:05:00
jane   | football   | 2013-02-28 00:08:00
jane   | basketball | 2013-02-28 01:03:00
ben    | baseball   | 2013-02-28 03:02:00 
```

我需要一份报告来告诉我“人”购买任何两种产品的最近两个日期之间的差异（以秒为单位）。

因此，例如，如果我使用足球和篮球，我需要知道以下内容：

```
 jim  | 60
 jane | 3180 
```

结果来自以下事实：jim 最近的足球和篮球购买相隔 60 秒（04:00 和 03:00），而 Jane 的足球和篮球购买相隔 3180 秒（08:00 和 01:03） ， 分别）。

我可以通过循环逐人执行此操作，我可以使用如下查询：

```
 SELECT a.person,
       abs(DATE_PART('epoch', a.purchase_time - b.purchase_time)
FROM
  (SELECT *
   FROM mytable
   WHERE person = 'jim'
     AND product = 'football'
   ORDER BY purchase_time LIMIT 1) a,
  (SELECT *
   FROM mytable
   WHERE person = 'jim'
     AND product = 'basketball'
   ORDER BY purchase_time LIMIT 1) b 
```

但为了查看每个人的结果，我必须循环执行此查询。

我确信有一种更聪明的方法可以做到这一点，我只是不知道它是什么。

任何人都可以提供任何建议吗？我正在使用 Postgres 8.1.23。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:03:58.523

这是你想要的吗？

```
select person, abs(DATE_PART('epoch', p1 - p2) 
from (select person,
             MAX(case when product = 'football' then purchase_time end) as p1,
             MAX(case when product = 'basketball' then purchase_time end) as p2
      from mytable
      group by person
     ) p
where p1 is not null and p2 is not null 
```

我将这个问题解释为最近购买的产品 A 和最近的产品 B，而不是两种产品中的最新产品（例如，它们都可能是产品 A）。

# c++ - C ++ builder应用程序设置？

> ID：15146388
> 
> 赞同：3
> 
> 时间：2013-02-28T21:53:12.817
> 
> 标签：c++, xml, c++builder, ini

我想知道如何在 c++ builder 中的 xml 或 ini 文件中保存应用程序的设置。知道 Visual Studio 在“设置”中具有这些功能，我正在 C++ 构建器中搜索相同的功能。

用什么方法来解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-30T18:27:15.960

使用 C++ Builder 创建 VCL 应用程序时，您可以使用 ini 文件保存您希望在下次启动应用程序时恢复的设置和值。

首先，包括 IniFiles.hpp 标头。

```
#include <IniFiles.hpp> 
```

要保存设置和值，请创建一个新的 TINiFile 并在 OnClose 事件中写入它。

```
void __fastcall TForm1::FormClose(TObject *Sender, TCloseAction &Action)
{
    bool booleanValueToSave = true;
    int integerValueToSave = 42;

    TIniFile *ini = new TIniFile(ChangeFileExt(Application->ExeName, ".ini"));

    ini->WriteString("SectionName", "KeyName", "Value to save as KeyName");
    ini->WriteBool("SectionName", "AnotherKeyName", booleanValueToSave);
    ini->WriteInteger("SectionName", "YetAnotherKeyName", integerValueToSave);

    // To save something like the window size and position
    ini->WriteInteger("Settings", "WindowState", Form1->WindowState);
    if (Form1->WindowState == wsNormal)
    {
        ini->WriteInteger("Settings", "MainFrm Top", Form1->Top);
        ini->WriteInteger("Settings", "MainFrm Left", Form1->Left);
        ini->WriteInteger("Settings", "MainFrm Height", Form1->Height);
        ini->WriteInteger("Settings", "MainFrm Width", Form1->Width);
    }

    delete ini;
} 
```

不要忘记删除！！

该代码将创建一个与可执行文件同名但扩展名为 .ini 的 ini 文件。将有两个标题，“SectionName”和“Settings”。在标题下，您将看到键值对，例如“AnotherKeyName=true”和“YetAnotherKeyName=42”。

然后，要在应用程序启动时恢复这些值，请创建一个新的 TIniFile 并在 OnCreate 事件中读取它。

```
void __fastcall TForm1::FormCreate(TObject *Sender)
{
    TWindowState ws;
    int integerValueToRestore;
    bool booleanValueToRestore;
    int someDefaultIntegerValueIfTheKeyDoesntExist = 7;
    bool someDefaultBooleanValueIfTheKeyDoesntExist = false;

    TIniFile *ini = new TIniFile(ChangeFileExt(Application->ExeName, ".ini"));

    integerValueToRestore = ini->ReadInteger("SectionName", "YetAnotherKeyName", someDefaultIntegerValueIfTheKeyDoesntExist);
    booleanValueToRestore = ini->ReadBool("SectionName", "AnotherKeyName", someDefaultBooleanValueIfTheKeyDoesntExist);

    // To restore the window size and position you saved on FormClose
    ws = (TWindowState)ini->ReadInteger("Settings", "WindowState", wsNormal);
    if (ws == wsMinimized)
        ws = wsNormal;
    if (ws == wsNormal)
    {
        Form1->Top = ini->ReadInteger("Settings", "MainFrm Top", 10);
        Form1->Left = ini->ReadInteger("Settings", "MainFrm Left", 10);
        Form1->Height = ini->ReadInteger("Settings", "MainFrm Height", 730);
        Form1->Width = ini->ReadInteger("Settings", "MainFrm Width", 1028);
    }

    Form1->WindowState = ws;

    delete ini;
} 
```

希望有帮助。

# ruby-on-rails-3 - 我的 Salesforce 密码已更改，现在我的 Ruby on Rails 应用程序已损坏

> ID：15146394
> 
> 赞同：1
> 
> 时间：2013-02-28T21:53:43.683
> 
> 标签：ruby-on-rails-3, salesforce, oauth-2.0

我有一个简单的演示应用程序设置为能够从 Ruby on Rails 应用程序访问 Salesforce.com。我的代码非常简单：

```
def sign_in_salesforce
  client = OAuth2::Client.new(ENV['SALESFORCE_CONSUMER_KEY'], ENV['SALESFORCE_CONSUMER_SECRET'], :site => 'https://login.salesforce.com/', :authorize_url => 'services/oauth2/authorize', :token_url => 'services/oauth2/token')
  auth_url = client.auth_code.authorize_url(:redirect_uri => 'https://99.44.242.76:3000/users/oauth_callback')
  redirect_to auth_url
end 
```

然后我有一个方法来处理回调。

```
 def oauth_callback
    db_client = Databasedotcom::Client.new
    db_client.authenticate(:token => params[:code])
    puts db_client.inspect
  end 
```

控制台中的错误是：ArgumentError (ArgumentError): app/controllers/users_controller.rb:60:in `oauth_callback'

导致错误的行是：

```
db_client.authenticate(:token => params[:code]) 
```

就像我得到的令牌是无效的一样。

在我更改我的 Salesforce 密码（他们要求我这样做）之前，它运行良好。我错过了什么？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:21:24.840

如果您收到的响应是您的刷新令牌不再有效，那么您需要从头开始重新启动 OAuth 流程以获取新的刷新令牌；然后，您可以在以后使用该应用程序时使用它来获取新的会话令牌，就像您到现在为止一样。

本质上，就像第一次启动应用程序一样启动该过程。

# python - Pystacia 在 OS X 上找不到 MagickWand

> ID：15146395
> 
> 赞同：0
> 
> 时间：2013-02-28T21:53:43.973
> 
> 标签：python, macos, imagemagick

出于某种奇怪的原因，Pystacia 无法在 OS X 上找到 MagickWand.h。

我试图调整 $DYLD_LIBRARY_PATH 和 $C_INCLUDE_PATH 但没有运气。

我已经启动并运行了 imagemagick。

```
$ mdfind MagickWand.h 
/usr/local/Cellar/imagemagick/6.8.010/share/doc/ImageMagick/www/api/MagickWand/struct__MagickWand.html
/usr/local/Cellar/imagemagick/6.8.0-10/include/ImageMagick/wand/MagickWand.h 
```

并不断收到此错误：

```
>>> import pystacia
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/Library/Python/2.7/site-packages/pystacia/__init__.py", line 193, in <module>
init()
File "/Library/Python/2.7/site-packages/pystacia/__init__.py", line 28, in init
raise TinyException('Could not find or load magickWand')
pystacia.util.TinyException: Could not find or load magickWand 
```

我进一步了解了 pystacia 如何查找 MagickWand.h：

```
from ctypes.util import find_library
resolved_path = find_library('MagickWand')
if not resolved_path:
    raise PystaciaException('Could not find or load magickWand') 
```

还是不走运。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:53:43.973

查看来自 bitbucket 的最新[pystacia](https://bitbucket.org/liquibits/pystacia)代码，我意识到 pip 的版本非常旧（从 2011 年开始），并且从最新代码安装解决了我的问题——因为我可以负担运行未发布的代码。

我还在 bitbucket 上输入了一个问题，因此维护者发布了一个新的代码版本。

# drools - 在规则条件下使用撤回的问题

> ID：15146401
> 
> 赞同：2
> 
> 时间：2013-02-28T21:54:07.723
> 
> 标签：drools, drools-fusion

我正在尝试编写一个规则来检测给定事件是否在最后“m”时间段内发生了“n”次。我正在使用drools 5.4.Final 版。我也试过 5.5.Final 没有效果。

我发现有几个条件元素，正如 Drools 所说的，积累和收集。我在下面的示例规则中使用了收集

```
rule "check-login-attack-rule-1"
dialect "java"
when
    $logMessage: LogMessage()
    $logMessages : ArrayList ( size >= 3 ) 
                    from collect(LogMessage(getAction().equals(Action.Login) 
                    && isProcessed() == false) 
                    over window:time(10s))
then
    LogManager.debug(Poc.class, "!!!!! Login Attack detected. Generating alert.!!!"+$logMessages.size());
    LogManager.debug(Poc.class, "Current Log Message: "+$logMessage.getEventName()+":"+(new Date($logMessage.getTime())));
    int size = $logMessages.size();
    for(int i = 0 ; i < size; i++) {
        Object msgObj = $logMessages.get(i);
        LogMessage msg = (LogMessage) msgObj;
        LogManager.debug(Poc.class, "LogMessage: "+msg.getEventName()+":"+(new Date(msg.getTime())));
        msg.setProcessed(true);
        update(msgObj); // Does not work. Rule execution does not proceed beyond this point.
        // retract(msgObj) // Does not work. Rule execution does not proceed beyond this point.
    }
    // Completed processing the logs over a given window. Now removing the processed logs.
    //retract($logMessages) // Does not work. Rule execution does not proceed beyond this point. 
```

结尾

注入日志的代码如下。该代码每 3 秒注入一次日志并触发规则。

```
 final StatefulKnowledgeSession kSession = kBase.newStatefulKnowledgeSession();
        long msgId = 0;
        while(true) {
            // Generate Log messages every 3 Secs.
            // Every alternate log message will satisfy a rule condition
            LogMessage log = null;
            log = new LogMessage();
            log.setEventName("msg:"+msgId);
            log.setAction(LogMessage.Action.Login);
            LogManager.debug(Poc.class, "PUSHING LOG: "+log.getEventName()+":"+log.getTime());
            kSession.insert(log);
            kSession.fireAllRules();
            LogManager.debug(Poc.class, "PUSHED LOG: "+log.getEventName()+":"+(new Date(log.getTime())));
            // Sleep for 3 secs
            try {
                sleep(3*1000L);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            msgId++;
        } 
```

有了这个，我可以实现的是在最后 10 秒内检查上述 LogMessage 的存在。我还可以找出触发规则的最后 10 秒内发生的确切 LogMessage 集。

问题是，一旦处理了这些消息，它们就不应参与下一个评估周期。这是我无法实现的。我将举例说明这一点。

考虑下面的时间线，时间线显示日志消息的插入和应该发生的警报生成状态。

**预期结果**

**秒**-- **日志** -- **警报**

0 -- LogMessage1 -- 无警报

3 -- LogMessage2 -- 无警报

6 -- LogMessage3 -- Alert1 (LogMessage1, LogMessage2, LogMessage3)

9 -- LogMessage4 -- 无警报

12 -- LogMessage5 -- 无警报

15 -- LogMessage6 -- Alert2 (LogMessage4, LogMessage5, LogMessage6)

但是当前代码发生的事情是

**实际结果**

**秒** -- **日志** -- **警报**

0 -- LogMessage1 -- 无警报

3 -- LogMessage2 -- 无警报

6 -- LogMessage3 -- Alert1 (LogMessage1, LogMessage2, LogMessage3)

9 -- LogMessage4 -- Alert2 (LogMessage2, LogMessage3, LogMessage4)

12 -- LogMessage5 -- Alert3 (LogMessage3, LogMessage4, LogMessage5)

15 -- LogMessage6 -- Alert4 (LogMessage4, LogMessage5, LogMessage6)

本质上，我无法丢弃已处理并参与警报生成的消息。我尝试使用**retract**从其工作记忆中删除已处理的事实。**但是当我在规则的then**部分添加retract 时，规则完全停止触发。我无法弄清楚为什么添加**retract**后规则停止触发。

请让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T16:03:42.850

您似乎忘记将列表中的其他 3 个事实设置为已处理。您需要一个辅助类作为全局来执行此操作，因为它应该在 for 循环中完成。否则，这些消息组也可以触发规则：

1 无触发 1,2 无触发 1,2,3 触发 2,3,4 触发，因为添加了新事实，2 和 3 在列表中 3,4,5 触发，因为添加了新事实，3 和 4在列表中

等等

希望这可以帮助

# sql-server - 在 SQL Server 上加载 20 个过程

> ID：15146402
> 
> 赞同：0
> 
> 时间：2013-02-28T21:54:08.067
> 
> 标签：sql-server, stored-procedures

我有 SQL Server 2008 Express，我需要加载 20 个过程。如果我只是将它们复制并尝试在 SQL Server Management Studio 中运行，我会将它们保存在文本文件中，它会抛出无法读取它们的错误，当我将它们一一插入时，它会完美加载。所以我想知道是否有办法在一个语句中加载所有这些，比如pack？我知道在 Oracle 中可以使用包 SQL Server 怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T22:12:20.193

你需要把

```
GO 
```

在每个存储过程结束时，例如...

```
create stored procedure test1
AS
BEGIN
END
GO
create stored procedure test2
AS 
BEGIN
END
GO 
```

为了澄清这是特定于 SSMS 的语法。

# php - 在 php 中允许某些文件类型

> ID：15146406
> 
> 赞同：0
> 
> 时间：2013-02-28T21:54:16.713
> 
> 标签：php, file, upload

我正在尝试允许用户将图像上传到我的网站。我正在使用的当前 php 代码总是给出一个错误，即上传的文件类型无效。我已经尝试了大量的图像，它们都给出了这个错误。

这是php代码。

```
<?php
   // Configuration - Your Options
      $allowed_filetypes = array('.jpg','.gif','.bmp','.png','.jpeg'); // These will be the types of file that will pass the validation.
      //$max_filesize = 524288; // Maximum filesize in BYTES (currently 0.5MB).
      $upload_path = 'uploads'; // The place the files will be uploaded to (currently a 'files' directory).

   $filename = $_FILES['userfile']['name']; // Get the name of the file (including file extension).
   $ext = substr($filename, strpos($filename,'.'), strlen($filename)-1); // Get the extension from the filename.

   // Check if the filetype is allowed, if not DIE and inform the user.
   if(!in_array($ext,$allowed_filetypes))
      die('The file you attempted to upload is not allowed.');

   // Now check the filesize, if it is too large then DIE and inform the user.
   if(filesize($_FILES['userfile']['tmp_name']) > $max_filesize)
      die('The file you attempted to upload is too large.');

   // Check if we can upload to the specified path, if not DIE and inform the user.
   if(!is_writable($upload_path))
      die('You cannot upload to the specified directory, please CHMOD it to 777.');

   // Upload the file to your specified path.
   if(move_uploaded_file($_FILES['userfile']['tmp_name'],$upload_path . $filename))
         echo 'Your file upload was successful, view the file <a href="' . $upload_path . $filename . '" title="Your File">here</a>'; // It worked.
      else
         echo 'There was an error during the file upload.  Please try again.'; // It failed :(.

?> 
```

这是 HTML 表单代码。

```
<form action="upload.php" method="post" enctype="multipart/form-data">
   <p>
      <label for="file">Select a file:</label> <input type="file" name="userfile" id="file"> <br />
      <button>Upload File</button>
   <p>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:58:56.530

此代码存在一些问题，其中包括获取文件扩展名的代码在一般情况下无法正常工作。用这个替换它，它也应该解决你当前的问题：

```
$ext = pathinfo($_FILES['userfile']['name'], PATHINFO_EXTENSION);
$allowed_filetypes = array('jpg','gif','bmp','png','jpeg'); 
```

您还应该绝对注意上述[Marc](https://stackoverflow.com/questions/15146406/allowing-certain-file-types-in-php/15146488#comment21324329_15146406)的警告。

# c# - Devexpress ASPxGridViewExporter 不会导出前导零

> ID：15146409
> 
> 赞同：1
> 
> 时间：2013-02-28T21:54:23.910
> 
> 标签：c#, asp.net, devexpress, export-to-excel, aspxgridview

我是否需要设置一个属性才能将这个带有前导零的数字导出到 excel 中？或者也许是网格本身的设置？迫使它被视为字符串而不是猜测的东西是数字吗？

我正在使用最新版本的 Devexpress。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:51:05.657

使用[ASPxGridViewExporter.RenderBrickEvent](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewExportASPxGridViewExporter_RenderBricktopic)格式化导出的值。

```
<dx:ASPxGridViewExporter ID="gridExport" runat="server" GridViewID="grid" OnRenderBrick="grid_OnRenderBrickEvent"/> 
```

```
protected void grid_OnRenderBrickEvent(object sender, ASPxGridViewExportRenderingEventArgs e)
{
    if (e.RowType == GridViewRowType.Data && e.Column.FieldName == "yourcolumnfieldname")
    {
        string format = "0000000000.##";
        e.Text = ((decimal)e.Value).ToString(format);
        e.TextValue = ((decimal)e.Value).ToString(format);
} 
```

# regex - 如何替换正则表达式中的字符

> ID：15146411
> 
> 赞同：1
> 
> 时间：2013-02-28T21:54:28.667
> 
> 标签：regex, replace

我有一个函数，它接受一个字符串并检查它是否包含有效的邮政编码列表：

```
function ValidateZipCodeString(listOfZipCodes) {
    // Only 5-digit zip codes are allowed
    //  Zip codes can be separated by a comma, a space, or both
    //  Any other characters will cause the error label to display
    var regex = /^\d{5}(\s*,\s*\d{5})*$/;
    return regex.test(listOfZipCodes);
} 
```

一个“有效”的邮政编码字符串可以是

```
12345,67854
OR
12345 35647, 09873

BUT NOT

1234565
OR
asd45, 12346 
```

这可以正常工作 - 就验证字符串是否正常而言。我现在需要做的是，在任何只有逗号或空格的地方，同时有逗号和空格。所以使用上面的例子，我会得到

```
12345, 67854
OR
12345, 35647, 09873 
```

我怎样才能做到这一点？

**[澄清信息]**

我需要澄清我对现有功能进行更改的意图。正如我所说，它工作得很好，我只需要函数传回一个布尔值来告诉调用函数是否显示警告标签。

我需要添加到 ValidateZipCodeString 函数的功能，这样，当字符串中包含*有效*的邮政编码列表时，我想修改该字符串（确保逗号*和*字符串在每个五位邮政编码之间），然后编写该字符串到邮政编码字符串来自的文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:58:52.163

我会用两个功能来做到这一点：

```
s="12345,ad7854"
t="12345 35647, 09873"
function ReformatZipCodeArray(arrayOfZipCodes) {
    // Only 5-digit zip codes are allowed
    //  Zip codes can be separated by a comma, a space, or both
    //  Any other characters will cause the error label to display
    if (arrayOfZipCodes == null) {
        return null;
    }
    var regex = /^\d{5}$/;
    var areZipsInArrayValid = true;
    var invalidZips = [];
    arrayOfZipCodes.map(function(possibleZipCode) {
        if (regex.test(possibleZipCode) == false) {
            areZipsInArrayValid = false;
            invalidZips.push(possibleZipCode);
        }
    });
    if (areZipsInArrayValid) {
        return arrayOfZipCodes.join(", ");
    } else {
        console.log("ERROR: invalid zips are ", invalidZips);
        return null;
    }
}

function split(listOfZipCodes) {
    // Split by either a space or a comma or any combination of those
    if (listOfZipCodes.trim().length == 0) {
        return null;
    }
    var regex = /[\s,]+/;
    return listOfZipCodes.split(regex);
}

console.log(ReformatZipCodeArray(split(s))) 
```

上述代码的输出将如下所示：

```
ERROR: invalid zips are  ["ad7854"] 
```

有效的 zip 字符串 ("12345 35647, 09873") 的输出如下所示：

```
12345, 35647, 09873 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:26:03.393

我会做：

```
function ValidateZipCodeString(listOfZipCodes) {
    // Only 5-digit zip codes are allowed
    //  Zip codes can be separated by a comma, a space, or both
    //  Any other characters will cause the error label to display
    var regex = /^\d{5}(?:[\s,]+\d{5})*$/;
    see the change here __^^^^^^
    return regex.test(listOfZipCodes);
} 
```

**正则表达式解释：**

```
The regular expression:

(?-imsx:^\d{5}(?:[\s,]+\d{5})*$)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  \d{5}                    digits (0-9) (5 times)
----------------------------------------------------------------------
  (?:                      group, but do not capture (0 or more times
                           (matching the most amount possible)):
----------------------------------------------------------------------
    [\s,]+                   any character of: whitespace (\n, \r,
                             \t, \f, and " "), ',' (1 or more times
                             (matching the most amount possible))
----------------------------------------------------------------------
    \d{5}                    digits (0-9) (5 times)
----------------------------------------------------------------------
  )*                       end of grouping
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:57:46.857

而不是 \s* 您可以使用逗号和空格的字符类

```
var regex = /^\d{5}([\s,]*\d{5})*$/; 
```

# python - 不断收到“IndexError：列表索引超出范围”的想法？

> ID：15146417
> 
> 赞同：0
> 
> 时间：2013-02-28T21:54:59.647
> 
> 标签：python, list

基本上标题解释了这个问题，我正在编写一个基本的解密程序，用户输入一个已经加密的数字（指纹）和解密密钥，然后计算出原始的 3 个字母字符串。我不断收到 IndedxError。关于我哪里出错的任何想法？

```
fingerprint = input("Enter fingerprint: ")
key = input("Enter decryption key: ")

stringList = []

firstchar = (fingerprint - key) % 33
secondchar = fingerprint - ord(stringList[0]) / 33 - key % 33
thirdchar = fingerprint - ord(stringList[1]) / 33 - key % 33

if firstchar == 0 or secondchar == 0 or thirdchar == 0 : #If any of firstchar, secondchar or thirdchar == 0 then add "c" to the list and so on.
stringList.append("c")
elif firstchar == 1 or secondchar == 1 or thirdchar == 1 :
    stringList.append("d")
elif firstchar == 2 or secondchar == 2 or thirdchar == 2 :
    stringList.append("e")
elif firstchar == 3 or secondchar == 3 or thirdchar == 3 :
    stringList.append("f")
elif firstchar == 4 or secondchar == 4 or thirdchar == 4 :
     stringList.append("g")
elif firstchar == 5 or secondchar == 5 or thirdchar == 5 :
     stringList.append("h")
elif firstchar == 6 or secondchar == 6 or thirdchar == 6 :
     stringList.append("i")
elif firstchar == 7 or secondchar == 7 or thirdchar == 7 :
     stringList.append("j")
elif firstchar == 8 or secondchar == 8 or thirdchar == 8 :
     stringList.append("k")
elif firstchar == 9 or secondchar == 9 or thirdchar == 9 :
     stringList.append("l")
elif firstchar == 10 or secondchar == 10 or thirdchar == 10 :
     stringList.append("m")
elif firstchar == 11 or secondchar == 11 or thirdchar == 11 :
     stringList.append("n")
elif firstchar == 12 or secondchar == 12 or thirdchar == 12 :
     stringList.append("o")
elif firstchar == 13 or secondchar == 13 or thirdchar == 13 :
     stringList.append("p")
elif firstchar == 14 or secondchar == 14 or thirdchar == 14 :
     stringList.append("q")
elif firstchar == 15 or secondchar == 15 or thirdchar == 15 :
     stringList.append("r")
elif firstchar == 16 or secondchar == 16 or thirdchar == 16 :
     stringList.append("s")
elif firstchar == 17 or secondchar == 17 or thirdchar == 17 :
     stringList.append("t")
elif firstchar == 18 or secondchar == 18 or thirdchar == 18 :
     stringList.append("u")
elif firstchar == 19 or secondchar == 19 or thirdchar == 19 :
     stringList.append("v")
elif firstchar == 20 or secondchar == 20 or thirdchar == 20 :
     stringList.append("w")
elif firstchar == 21 or secondchar == 21 or thirdchar == 21 :
     stringList.append("x")
elif firstchar == 22 or secondchar == 22 or thirdchar == 22 :
     stringList.append("y")
elif firstchar == 23 or secondchar == 23 or thirdchar == 23 :
     stringList.append("z")
elif firstchar == 31 or secondchar == 31 or thirdchar == 31 :
     stringList.append("a")
elif firstchar == 32 or secondchar == 32 or thirdchar == 32 :
     stringList.append("b")

print join(stringList) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:57:06.553

```
stringList = []                                   # <- stringList is empty

firstchar = (fingerprint - key) % 33
secondchar = fingerprint - ord(stringList[0])...  # <- reference its first item 
```

# sigint - 覆盖 "^c" 或 "ctrl-c" 是 shell 解释器的中断信号

> ID：15146419
> 
> 赞同：2
> 
> 时间：2013-02-28T21:55:08.957
> 
> 标签：sigint, ctrl, stty

我想覆盖 ctrl-c 作为我所有 shell 的信号中断字符，并用其他东西替换它。我查看了 stty 和 xmodmap，但还没有找到任何我理解的东西。

如果有人有一些想法，我将不胜感激。

# 3d - 计算两个网格之间的豪斯多夫距离

> ID：15146423
> 
> 赞同：4
> 
> 时间：2013-02-28T21:55:44.673
> 
> 标签：3d, qt5, mesh, cgal, point-clouds

我试图找到两个网格之间的偏差。例如，在 3d 空间中定义的两组点之间的差异，我计划使用一些 3d 可视化工具来可视化距离，例如 QT3d 或一些基于开放 gl 的库。

我有两组网格，基本上是两个 .stl 文件。我已经编程将它们作为输入读取。现在我需要计算相应网格之间的偏差。为此，我知道豪斯多夫距离是一种可能的数学工具。有没有计算两个网格之间的豪斯多夫距离的库？

我设法找到了一段代码。但它本身或多或少是一个程序。它叫做[MESH](http://mesh.berlios.de/)我不想按原样使用它，因为，1\. 它是用 C 语言编写的，2\. 我想开发自己的应用程序（当然使用库）。

这个论坛上问的其他问题都指向数学算法，我不打算自己实现算法。

我正在使用 QT5 使用 msvc2010（32 位）进行编程。

此致

tdk.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-04-26T04:46:59.080

您可以`igl::hausdorff`在[libigl](http://libigl.github.io)中使用。`VA`如果您的第一个网格在具有面索引的矩阵行中具有顶点，同样`FA`对于您的第二个网格，则`VB``FB`

```
double d;
igl::hausdorff(VA,FA,VB,FB,d); 
```

将计算`d`两个网格之间的 Hausdorff 距离。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T08:04:41.933

实现起来似乎没有那么复杂：http: [//vcg.isti.cnr.it/publications/papers/metro.pdf](http://vcg.isti.cnr.it/publications/papers/metro.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:39:31.810

我不确定它是否有帮助，但看看双二次指标[http://www.computingscience.nl/docs/vakken/ddm/slides/papers/garland2.pdf](http://www.computingscience.nl/docs/vakken/ddm/slides/papers/garland2.pdf)

# drupal-7 - Drupal 7：添加内容时如何只允许将分类项目的子级别选择为类别

> ID：15146424
> 
> 赞同：2
> 
> 时间：2013-02-28T21:55:53.640
> 
> 标签：drupal-7, drupal-taxonomy

我有一个内容类型，它有一个基于分类的类别字段。但我希望编辑只能为每个内容选择子类别，而不是父类别。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T10:44:23.040

我有类似于这种外观的代码，如果可能对您有所帮助...如果您打算通过使用自定义模块来实现它，它会将孩子和父母放在一个数组中...

```
 $tree_type =  taxonomy_get_tree(3);
    $childs["selected"]="All";

    foreach($tree_type as $key =>$value) {
                $temp_ = taxonomy_term_load($value->parents[0]);           //IF parent is set already
            if($value->parents[0]==0) {                             //if no any parent taxonomy
                    if(is_object($temp_)==TRUE) {                 //CHECK IF SINGLE iTEM PARENT
                    if(isset($childs[$temp_->name])) {           //if array key is already set 
                            if(is_array($key)!=FALSE) {         //if value is not an array
                    $childs[$temp_->name][$tree_type[$key]->tid]=array($key=>$value->name);  // set the parent child array
                            }
                    }else {
                            if(is_array($key)!=FALSE) {    //if value is not an array
                    $childs[$temp_->name][$tree_type[$key]->tid]=array($key=>$value->name);  // set the parent child array
                            }
                        }
                    }else
                    {
                        $childs[$value->name]=array();
                        $childs[$value->name][$tree_type[$key]->tid]="-".$value->name;
                        //drupal_set_message("-------<pre>".$value->name."</pre>-------");
                        //drupal_set_message("<pre>".print_r($childs,true)."</pre>");
                        }
                }else {
        $childs[$temp_->name][$tree_type[$key]->tid]=$value->name;          //$childs[$temp_->tid]=$temp_->name;
                }
        } 
```

# asp.net - 使用实体框架在 ASP.Net 中创建报表

> ID：15146425
> 
> 赞同：31
> 
> 时间：2013-02-28T21:55:55.237
> 
> 标签：asp.net, entity-framework, reporting-services

我们希望将 Microsoft Reports - SSRS 添加到我们的内部网站之一。

该数据库已安装所有报告功能。

该网站对所有数据使用 Entity Framework 4。

我已经能够使用创建数据集 (*.XSD) 的老式方法创建报告，并且效果很好。

不过，我的问题是，是否可以利用站点中现有的实体框架来获取报告所需的数据？而不必重新发明轮子并制作整个数据集以及关系等。

这是一个网站而不是应用程序，所以这个（[http://weblogs.asp.net/rajbk/archive/2010/05/09/creating-an-asp-net-report-using-visual-studio-2010-part- 1.aspx](http://weblogs.asp.net/rajbk/archive/2010/05/09/creating-an-asp-net-report-using-visual-studio-2010-part-1.aspx) ) 似乎不适用；我没有看到 DataSource（在教程的第 2 部分）

**更新**

作为旁注，我们希望避开昂贵的第三方控件等。

此外，另一种看待问题的方法可能是从实体框架实体模型生成 *.XSD；这可能吗？这并不理想，但会让我们启动并运行..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T12:03:38.387

下面是我如何在我的一个 .NET winForms 应用程序中设置报表数据源的快速示例。

```
public  void getMyReportData()
    {
        using (myEntityDataModel v = new myEntityDataModel())
        {

            var reportQuery = (from r in v.myTable
                                   select new
                                   {
                                       l.ID,
                                       l.LeaveApplicationDate,
                                       l.EmployeeNumber,
                                       l.EmployeeName,
                                       l.StartDate,
                                       l.EndDate,
                                       l.Supervisor,
                                       l.Department,
                                       l.Col1,
                                       l.Col2,
                                       .......,
                                       .......,
                                       l.Address
                                   }).ToList();

            reportViewer1.LocalReport.DataSources.Clear();
            ReportDataSource datasource = new ReportDataSource("nameOfReportDataset", reportQuery);
            reportViewer1.LocalReport.DataSources.Add(datasource);

            Stream rpt = loadEmbededReportDefinition("Report1.rdlc");
            reportViewer1.LocalReport.LoadReportDefinition(rpt);
            reportViewer1.RefreshReport();

            //Another way of setting the reportViewer report source

            string exeFolder = Path.GetDirectoryName(Application.ExecutablePath);
            string reportPath = Path.Combine(exeFolder, @"rdlcReports\Report1.rdlc");
            reportViewer1.LocalReport.ReportPath = reportPath;

            reportParameter p = new ReportParameter("DeptID", deptID.ToString());
            reportViewer1.LocalReport.SetParameters(new[] { p });

        }
    }

    public static Stream loadEmbededReportDefinition(string reportName)
        {
            Assembly _assembly = Assembly.GetExecutingAssembly();
            Stream _reportStream = _assembly.GetManifestResourceStream("ProjectNamespace.rdlcReportsFolder." + reportName);

            return _reportStream;
        } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-16T17:38:02.047

我的方法一直是使用带有对象数据源的 RDLC 文件并以“本地”模式运行它们。这些数据源是……我的实体！通过这种方式，我使用了与我的 Web 应用程序相同的所有业务逻辑、字符串格式、文化意识等。有一些怪癖，但我已经能够忍受它们：

*   RDLC 文件不喜欢存在于 Web 项目中。我们创建一个单独的虚拟 winform 项目并在其中添加 RDLC 文件。
*   我不在查看器中显示报告。我让用户下载 PDF、Word 或 Excel 文件并选择在本机查看器中保存或打开。这可以省去很多麻烦，但可能会让一些人望而却步，具体取决于要求。对于移动设备，它非常好。
*   由于您没有使用 SSRS，因此您无法获得不错的订阅功能。如果需要，您将构建它。不过，在很多方面，我更喜欢这个。

但是，好处真的很不错：

*   我正在使用我已经为我的观点编写的所有相同的业务逻辑优点。
*   我有一个自定义 ReportActionResult 和 DownloadReport 控制器方法，它允许我通过单个 URL 运行任何报告。这非常方便。它确实使自定义订阅组件更容易。
*   报告开发似乎进展得很快，现在我只需要调整实体部分类即可在此处或那里进行一些调整。另外 - 如果我需要稍微不同地塑造数据，我有 LINQ。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-09T19:00:41.840

我们也将 SSRS 用作“本地”报告。我们在 SQL 服务器中创建视图，然后在我们的应用程序中创建该对象以及其他 EF 域模型，并使用我们的 DbContext 查询该对象。我们使用 ASPX 页面并使用后面的代码 (Page_Load) 来获取传递给报表的数据。

这是我们如何在 Page_Load 事件中查询它的示例：

```
 var person = MyDbContext
            .Query<ReportModel>()
            .Where(x => x.PersonId == personId)
            .Where(x => x.Year == year)
            .Select(x =>
            {
                PersonId = x.PersonId,
                Year = x.Year,
                Name = x.Name
            });

        var datasource = new ReportDataSource("DataSet1", person.ToList());

        if (!Page.IsPostBack)
        {
            myReport.Visible = true;
            myReport.ProcessingMode = ProcessingMode.Local;
            myReport.LocalReport.ReportPath = @"Areas\Person\Reports\PersonReport.rdlc";
        }

        myReport.LocalReport.DataSources.Clear();
        myReport.LocalReport.DataSources.Add(datasource);
        myReport.LocalReport.Refresh(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-29T19:48:19.217

诀窍是创建一个带有空白数据源连接字符串、空白查询块和空白 DataSetInfo 的报告 (.rdlc)（我必须手动修改 xml）。它们必须存在于文件中并且为空，如下所示：

```
SomeReport.rdlc (viewing as xml)
...
<DataSources>
    <DataSource Name="conx">
    <ConnectionProperties>
    <DataProvider />
    <ConnectString />
    </ConnectionProperties>
    <rd:DataSourceID>19f59849-cdff-4f18-8611-3c2d78c44269</rd:DataSourceID>
    </DataSource>
</DataSources>
...
<Query>
    <DataSourceName>conx</DataSourceName>
    <CommandText />
    <rd:UseGenericDesigner>true</rd:UseGenericDesigner>
</Query>
<rd:DataSetInfo>
    <rd:DataSetName>SomeDataSetName</rd:DataSetName>
</rd:DataSetInfo> 
```

现在在页面事件中，我在 DropDownList 上使用 SelectedIndexChanged，将报表数据源绑定如下：

```
protected void theDropDownList_SelectedIndexChanged(object sender, EventArgs e)
{
    if (theDropDownList.SelectedIndex == 0)
        return;

    var ds = DataTranslator.GetRosterReport(Int64.Parse(theDropDownList.SelectedValue));
    _rvReport.LocalReport.ReportPath = "SomePathToThe\\Report.rdlc";
    _rvReport.LocalReport.DataSources.Add(new ReportDataSource("SomeDataSetName", ds));
    _rvReport.Visible = true;
    _rvReport.LocalReport.Refresh();

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T15:55:06.907

您可以将 WCF 服务用作数据源，从而将应用程序数据和逻辑重新用于报表。至少我相信这需要一个 SQL-server 标准版。所以不能使用免费的 SQL-express 版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-01T10:07:00.900

您可以将**LINQ**与**RDLC Report**一起使用，这非常容易使用

```
LinqNewDataContext db = new LinqNewDataContext();
var query = from c in db.tbl_Temperatures
                    where c.Device_Id == "Tlog1"
                    select c;
var datasource = new ReportDataSource("DataSet1", query.ToList());
ReportViewer1.Visible = true;
ReportViewer1.ProcessingMode = ProcessingMode.Local;
ReportViewer1.LocalReport.ReportPath = @"Report6.rdlc";    
ReportViewer1.LocalReport.DataSources.Clear();
ReportViewer1.LocalReport.DataSources.Add(datasource);
ReportViewer1.LocalReport.Refresh(); 
```

# php - 通过 php 驱动程序进行的 MongoDB 查询不返回任何结果

> ID：15146426
> 
> 赞同：0
> 
> 时间：2013-02-28T21:55:55.593
> 
> 标签：php, javascript, mongodb

因此，我在 Web 服务器上有一个 php 脚本，通过 JSON 对象 POST 侦听 mongoDB 查询，并构建另一个页面并将查询发送到 php 服务。我的所有标准查询（例如 `{"field1":"2342342","field2":"234234"}`：）都已发送并返回正确的结果。

但是，当我尝试发送包含一系列值的查询时，它什么也不返回。

```
{"field2":"1234","date" : {$gte : "2013-02-11"},"date" : {$lte : "2013-02-11"}} 
```

我可以进入命令行并调用：

```
db.collection.find({"field2":"1234","date" : {$gte : "2013-02-11"},"date" : {$lte : "2013-02-11"}} ) 
```

它按预期返回结果。显然，发生了一些我不完全理解的事情。

执行搜索的 PHP 命令：

```
$c_collection->find(json_decode($request)); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:05:41.147

您正在尝试使用重复的元素名称搜索数据库。MongoDb 在执行此搜索时会发出这样的错误：

```
Duplicate element name 'date'. 
```

您需要将您的范围放在同一个块内。例如：

```
{
    'date': {
        $gte:"datehere",
        $lte:"datehere"
    }
} 
```

在 PHP 中：

```
$criteria = array('date' => array('$gte' => 'datehere', '$lte' => 'datehere')); 
```

然后使用该 json 作为您的标准。

另外，为什么要在将标准传递给数据库之前对其进行解码？该方法可以接受一个数组就好了。

# django - 在文章的评论页面上使用 django 评论 (/a/2/comments/)

> ID：15146428
> 
> 赞同：2
> 
> 时间：2013-02-28T21:55:58.440
> 
> 标签：django, django-comments

我用 Django 创建了一个博客文章（例如：mysite.com/a/article_id/），并希望用户能够在**文章的评论页面上发表评论**（即：mysite.com/a/article_id/comments/）

到目前为止，我还没有取得太大的成功。似乎 url 中的**article_id**以某种方式阻止了评论应用程序。

这是我的*url.py*：

```
from django.conf.urls import patterns, include, url
from django.contrib.auth.views import login, logout

urlpatterns = patterns('blogengine.views',
    url(r'^$', 'get_posts', name='index'),
    url(r'^write/', 'write_post', name='write'),
    url(r'^a/(?P<post_id>\d+)/$', 'detail'),
    url(r'^a/(?P<post_id>\d+)/comments/$', 'detail_comments'),
    url(r'^a/(?P<post_id>\d+)/comments/', include('django.contrib.comments.urls')),
) 
```

这些是我的观点*——views.py*：

```
def detail_comments(request, post_id):
    p = get_object_or_404(Post, pk=post_id)
    return render_to_response('blogengine/detail_comments.html', {'post': p},
    context_instance=RequestContext(request)) 
```

这是我的模板 detail_comments.html

```
{% block content %}
{% load comments %}
{% get_comment_form for post as form %}

<form action="/a/{{ post.id }}/comments/post/" method="post">
    {% csrf_token %}
{{ form.content_type }}
{{ form.object_pk }}
{{ form.timestamp }}
{{ form.security_hash }}
<p style="display:none"><label for="id_honeypot">Leave blank</label>{{ form.honeypot }}</p>
<p>
    <label for="id_comment">Comment</label>
    {{ form.comment }}
</p>
<p><input type="submit" name="post" value="Post &rarr;" /></p>
</form>
{% endblock %} 
```

（哦，这很明显，但评论应用程序安装在 settings.py 中）

如果表单操作设置为**{% comment_form_target %}**，就像文档中建议的那样，django 会抛出这个错误：

```
NoReverseMatch at /a/2/comments/
Reverse for 'django.contrib.comments.views.comments.post_comment' with arguments '()' and keyword arguments '{}' not found. 
```

**我尝试用/a/{{ post.id }}/comments/post/**替换它来“破解”我的出路，它可以显示页面，但是如果我尝试发表评论，django 会抛出一个不同的错误：

```
TypeError at /a/2/comments/post/
post_comment() got an unexpected keyword argument 'post_id' 
```

有没有办法让评论应用忽略 id_post？或者另一种方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:32:01.170

错误消息非常明确：`django.contrib.comments.views.post_comment`不带`post_id`参数，因此会抛出。

既然`comments`观点不需要也不需要争论，为什么不把它排除在外呢？

您应该能够修改 URL 路由以完全不捕获 post_id（尽管以一致性为代价），如下所示：

```
 url(r'^a/(?:\d+)/comments/', include('django.contrib.comments.urls')), 
```

或者干脆

```
 url(r'^a/\d+/comments/', include('django.contrib.comments.urls')), 
```

请注意，如果它只是被忽略，那么在这一点上进行这种嵌套实际上是没有意义的，所以你可以将它简化为：

```
 url(r'^comments/', include('django.contrib.comments.urls')), 
```

诚然，如果没有残留前缀，这看起来并不漂亮和伪 RESTful，但如果你只是要忽略它，那么将它放在那里真的没有意义。

您可以做的另一件事是包装`comments`应用程序提供的所有视图，以便如果`post_id`无效，它们会抛出 404，但这似乎有点过头了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:36:24.453

好的，所以我通过简单地按照文档所说的方式解决了我的问题。我像这样导入了评论：

```
url(r'^comments/', include('django.contrib.comments.urls')), 
```

并保持此 url 指向我的**detail_comments**视图，该视图显示评论列表和表单：

```
url(r'^a/(?P<post_id>\d+)/comments/$', 'detail_comments'), 
```

所以基本上处理发生在**/comments/**但用户与此页面交互：**/a/post_id/comments/**

我遇到的唯一问题是 Django 评论应用程序在发布评论后自动将用户重定向到成功页面。我通过在指示当前页面的表单中设置“下一个”隐藏字段来解决这个问题。

# encoding - Jenkins 控制台输出具有来自 grunt 命令 [31m[[39m...

> ID：15146432
> 
> 赞同：15
> 
> 时间：2013-02-28T21:56:11.317
> 
> 标签：encoding, console, jenkins, output, gruntjs

我正在使用 jenkins 运行 grunt-contrib-jshint 命令，控制台输出包含如下文本：

```
[31m[[39m[33mL425[39m[31m:[39m[33mC29[39m[31m][39m [33mExpected a conditional expression and instead saw an assignment.[39m 
```

任何想法为什么？以及如何解决它。

直接运行相同的脚本会显示：

```
[L425:C29] Expected a conditional expression and instead saw an assignment. 
```

我检查了设置为 MacRoman 的 file.encoding 设置，设置后`export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8`现在是 UTF-8。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-28T22:00:34.700

这些看起来像颜色转义序列。看看您是否可以将参数传递`--no-color`给命令（如果工具支持它，请查看[此](https://github.com/sindresorhus/grunt-recess/issues/3)内容），或查看[AnsiColor 插件](https://wiki.jenkins-ci.org/display/JENKINS/AnsiColor+Plugin)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-12T08:49:56.690

或者，如果您喜欢颜色，可以使用[Jenkins AnsiColor 插件](https://wiki.jenkins-ci.org/display/JENKINS/AnsiColor+Plugin)在构建日志中正确显示颜色转义序列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T20:08:15.563

对我有用的是...

```
play -Dsbt.log.noformat=true clean compile test dist 
```

-Dsbt.log.noformat=true 抑制了我的 Play 2.1.1 构建中控制台输出的着色，使 Jenkins 上的控制台日志可读。现在，如何以较少 XMLy 的方式获得测试结果？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T21:59:07.160

它看起来像是被你的 shell 忽略的着色控制命令。在修复它方面，它可能涉及更改脚本以使其不产生该输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-17T21:52:44.263

对于整个问题，我有不同的解决方案。事实上，上面列出的建议都没有对我有用。我使用了两种类型的从机：CentOS 和 Ubuntu 机器。由于某种原因，该问题仅影响 CentOS 机器，而不影响 Ubuntu 机器。

我比较了两种从属服务器的“系统信息”，发现 file.encoding 是`ANSI_X3.4-1968`在 CentOS 主机上设置的。这是默认设置。Ubuntu 默认是`UTF-8`.

因此，使用高级 JVM 选项重新启动从服务器就可以`-Dfile.encoding=UTF-8`了，无需抑制 mocha 的颜色。

# ios - 尝试用两个动画为一个 UIImageView 设置动画，只有一个动画有持续时间

> ID：15146436
> 
> 赞同：0
> 
> 时间：2013-02-28T21:56:27.467
> 
> 标签：ios, objective-c, cocoa-touch, cgaffinetransform

我想要做的是`UIImageView`立即翻转它，没有动画，然后我需要它到`float`它在屏幕上的预期位置。两者都在`transformations`工作，但不是我想要的方式。

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];
resultsEnemy.transform = CGAffineTransformMakeTranslation(0, 0);
[UIView commitAnimations];

resultsEnemy.transform = CGAffineTransformMakeScale(-1, 1); 
```

这是我正在使用的代码。尽管比例代码（我用来翻转`UIImageView`）不是 0.5 动画的一部分`duration`，但它遵循这些规则。我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:02:49.617

像这样应用两个转换不会产生您期望的结果。您需要做的是将它们组合成一个单一的变换矩阵。以下应该按预期工作。

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];

// Create two separate transforms and concatenate them together.
// Use that new transform matrix to accomplish both transforms at once.
CGAffineTransform translate = CGAffineTransformMakeTranslation(0, 0);
CGAffineTransform scale = CGAffineTransformMakeScale(-1, 1);
resultsEnemy.transform = CGAffineTransformConcat(translate, scale);

[UIView commitAnimations]; 
```

* * *

编辑：根据您的说明，您似乎想要这样的东西：

```
CGAffineTransform scale = CGAffineTransformMakeScale(-1, 1);
CGAffineTransform translate = CGAffineTransformMakeTranslation(0, 0);

[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];
resultsEnemy.transform = scale;
[CATransaction commit];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];

resultsEnemy.transform = CGAffineTransformConcat(translate, scale);

[UIView commitAnimations]; 
```

# git - 两个 git repos 共存 - 不可能，或者如何？

> ID：15146446
> 
> 赞同：1
> 
> 时间：2013-02-28T21:57:19.393
> 
> 标签：git, github

我们有一个企业应用程序，我们将 git 用于 scm。此外，这个项目的基础是我们的开源工具，一个公共 git repo。

如果您是企业客户，则安装过程 a) 安装开源工具 b)在同一目录结构中的开源工具*之上安装企业功能。*

对于部署，这很好。对于开发来说，这是一场噩梦。

有没有办法让两个复杂的、重叠的项目在同一个结构中？我不明白怎么做，但我想我会问。

现在我已经这样设置了：

*   一个目录中的开源工具
*   企业代码在另一个
*   将企业“安装”（通过符号链接）到开源目录中的脚本，以便我可以开发/运行/测试

这就是问题所在，在我提交开源 repo 更改之前，我必须“卸载”企业，这样我才能清楚地看到更改。（或者管理一个包含数百个条目的 .gitignore）真是太痛苦了。

大型项目也... 25 多个模块，以及与企业版一起复制的一百多个文件。许多软件包甚至在企业中都有额外的模块。

有什么想法，或者我是否已经做到最好了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:49:23.497

Git 子模块允许您保留不相交的 git 项目，但在另一个项目中使用。在您的情况下它可能很方便，因为您可以随意修改开源工具，同时保持企业版本指向开源工具的特定版本。当您想将企业升级到更新的提交时，这也很容易！

这是一个很好的[资源](https://git.wiki.kernel.org/index.php/GitSubmoduleTutorial)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:34:45.837

您可以做的另一件事是将开源项目作为单独的分支添加到您的 git 项目中。

然后，开源项目的开源 git 存储库将在您的 git 项目中显示为一组分支。然后，您可以通过合并将其合并到您的项目中。

由于 git 是一个分布式版本系统，这很容易做到：

```
#Add the open source repo as a remote
git remote add -f open_source_git <url to open source git repo>
#Create a local branch to track the remote branch
git branch open_source_master open_source:master
# Combine the two projects
git merge open_source_master 
```

open_source_master 分支在那里，因此您可以轻松地更新和跟踪开源存储库，使其不使用您自己的存储库。

# jquery - 自定义 CSS 以允许 chrome textarea 调整大小小于初始状态？

> ID：15146449
> 
> 赞同：10
> 
> 时间：2013-02-28T21:57:22.937
> 
> 标签：jquery, css, google-chrome, resize, textarea

我喜欢 Chrome 漂亮的 textarea 调整大小控件。然而，一个例外是 textarea 似乎有一个很难通过自定义 css 更改的最小高度/最小宽度设置，即使使用**!important**限定符也是如此。

```
textarea#myTextArea{min-height:0 !important;min-width:0 !important} 
```

是否可以通过 jQuery 覆盖它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T12:37:42.350

这些“ `min-height`/ `min-width`”依赖`cols`和`rows`属性。例如。如果`cols`缺少或小于 1，则其默认值为 20，因此最小宽度将为 20 个字符宽度。

（参见[http://www.w3.org/TR/html5/forms.html#the-textarea-element](http://www.w3.org/TR/html5/forms.html#the-textarea-element)）

您无法`textarea`在其初始尺寸下调整大小的事实被报告为错误（[https://code.google.com/p/chromium/issues/detail?id=94583](https://code.google.com/p/chromium/issues/detail?id=94583)），尽管

> 用户代理可以将调整大小范围限制在合适的范围内，例如在元素的原始格式化大小之间，并且大到足以包含所有元素的内容。

[http://www.w3.org/TR/css3-ui/#resize](http://www.w3.org/TR/css3-ui/#resize)

不幸的是，现在似乎没有办法改变这种行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-13T13:30:24.453

这是您正在寻找的答案。这是我最初的解决方案，所以你先在这里看到它！

我在下面完成的代码是最基本的形式。我已经对其进行了简化，以删除我通常使用的 Javascript 库以及我必须解释的其他自定义内容。这是不需要任何外部库等的解决方案。

## 这个怎么运作？

它添加了一个间隔，用于检查当鼠标光标悬停在文本区域上时文本区域的大小是否发生了变化。如果它发生变化，我们知道用户拖动了，所以我们强制 textarea 大小为 1px x 1px。这为用户创建了一个非常轻微的闪烁，但因为他们正在拖动大小立即恢复到他们拖动它的大小，只是现在，它会一直缩小到 1px x 1px。

## 编码

**演示**：http: [//jsfiddle.net/greatbigmassive/zJ4z5/5/](http://jsfiddle.net/greatbigmassive/zJ4z5/5/)

```
function TA_start(id){
var ta = document.getElementById(id);
if(typeof(ta.resizeCheckStarted) == "undefined"){
    ta.resizeCheckStarted = true;
    ta.resizeUpdated = false;
    var cs = window.getComputedStyle(ta,null);
    ta.originalH   = cs.getPropertyValue("height");
    ta.originalW   = cs.getPropertyValue("width");
    ta.originalM   = cs.getPropertyValue("margin");
    ta.style.width = ta.originalW;
    ta.style.height= ta.originalH;
    ta.style.margin= ta.originalM;
    ta.resizeCheck = setInterval("TA_checkMe('"+id+"')",100);
 }
 }

function TA_checkMe(id){
 var ta = document.getElementById(id);
 if(ta.originalW != ta.style.width || ta.originalH != ta.style.height){
    ta.resizeUpdated = true;
    ta.originalW = ta.style.width;
    ta.originalH = ta.style.height;
    ta.style.width="1px";
    ta.style.height="1px";
    clearInterval(ta.resizeCheck);
 }
}

function TA_stop(id,init){
 var ta = document.getElementById(id);
 if(typeof(init)=="undefined"){
    if(typeof(ta.stopResizeCheck)=="undefined"){
        ta.stopResizeCheck = setTimeout("TA_stop('"+id+"',true)",500);
    }
 } else {
    clearInterval(ta.resizeCheck);
    if(ta.resizeUpdated != true){
        delete ta.resizeCheckStarted;
    }
 }
} 
```

**修复：**

一个）。它不会第一次收缩 b)。你不需要任何额外的 CSS

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-13T17:17:15.770

另一个javascript解决方案：

**演示**：http: [//jsfiddle.net/nz8ut/2/](http://jsfiddle.net/nz8ut/2/)

```
function resizableStart(e){
    this.originalW = this.clientWidth;
    this.originalH = this.clientHeight;
    this.onmousemove = resizableCheck;
    this.onmouseup = this.onmouseout = resizableEnd;
}
function resizableCheck(e){
    if(this.clientWidth !== this.originalW || this.clientHeight !== this.originalH) {
        this.originalX = e.clientX;
        this.originalY = e.clientY;
        this.onmousemove = resizableMove;
    }
}
function resizableMove(e){
    var newW = this.originalW + e.clientX - this.originalX,
        newH = this.originalH + e.clientY - this.originalY;
    if(newW < this.originalW){
        this.style.width = newW + 'px';
    }
    if(newH < this.originalH){
        this.style.height = newH + 'px';
    }
}
function resizableEnd(){
    this.onmousemove = this.onmouseout = this.onmouseup = null;
}

var els = document.getElementsByClassName('resizable');
for(var i=0, len=els.length; i<len; ++i){
    els[i].onmouseover = resizableStart;
} 
```

* * *

上面的解决方案使用`mouseover`and`mouseout`来触发`resizableStart`and `resizableEnd`。问题是如果要调整大小的元素有子元素，当鼠标放在一个子元素上时，该元素会收到一个`mouseout`事件，然后，它会收到一个`mouserover`从子元素冒泡的事件。

为了避免这些事件，我使用`mouseenter`和`mouseleave`事件实现了另一个解决方案：

**演示**：http: [//jsfiddle.net/nz8ut/3/](http://jsfiddle.net/nz8ut/3/)

# asp.net-mvc-3 - 在使用范围内阻止 asp.net mvc Html 创建

> ID：15146450
> 
> 赞同：0
> 
> 时间：2013-02-28T21:57:23.093
> 
> 标签：asp.net-mvc-3

我使用返回 IDisposable 的 HTML 帮助程序来创建我在应用程序中经常需要的特定 DIV 结构。此类的构造函数创建打开的 div，而 Dispose 方法创建关闭的 div。现在我需要保护我的应用程序，并且我希望在某些情况下不要创建这个结构，但如果它的范围也没有呈现，我还需要在使用和结束之间产生的每种 HTML。

我做的第一件事是将在 ViewContext 中找到的 TextWriter 替换为 dummy ：

```
_helper.ViewContext.Writer = new StringWriter(new StringBuilder()); 
```

它适用于直接使用 ViewContext Writer 呈现 HTML 的每一段代码，但不适用于其他代码（原始 HTML 和其他帮助程序）

所以问题是：我们如何防止 Asp.net 视图在 using 块的范围内呈现 HTML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:29:06.610

恐怕目前没有办法阻止`using`块的内容被渲染。无论如何，这不是这个区块的初衷。如果你想阻止某些东西被渲染，你可以考虑使用一个`if`语句来代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:39:29.473

我没有给你的示例代码，这个想法很老套，但如果你有大量需要保护的东西并且没有时间添加条件逻辑，那么它可能会起作用。

如果您使用应用程序的 Response.Filter 去除 html 会怎样？然后在您的构造函数和 dispose 方法中，如果用户无权查看内容，则输出一些易于查找的元素，您可以使用正则表达式替换或使用 Html Agility Pack 解析/修改 DOM，然后再将流发送到浏览器。

# facebook - Windows Phone 7 Facebook 图片发布问题

> ID：15146451
> 
> 赞同：1
> 
> 时间：2013-02-28T21:57:28.590
> 
> 标签：facebook, image, windows-phone-7

我知道这些 facebook api 的东西真的很让人头疼，在我在互联网上进行了较长时间的搜索之后，我只能找到一个消息 post API 到 facebook。我只想修改它以用于消息和图像发布。这是向facebook发布消息的相关代码。（Windows Phone 7）

```
private void PostToWall_Click(object sender, RoutedEventArgs e)
    {
        if (string.IsNullOrEmpty(txtMessage.Text))
        {
            MessageBox.Show("Enter message.");
            return;
        }

        var fb = new FacebookClient(_accessToken);

        fb.PostCompleted += (o, args) =>
        {
            if (args.Error != null)
            {
                Dispatcher.BeginInvoke(() => MessageBox.Show(args.Error.Message));
                return;
            }

            var result = (IDictionary<string, object>)args.GetResultData();
            _lastMessageId = (string)result["id"];

            Dispatcher.BeginInvoke(() =>
            {
                MessageBox.Show("Message Posted successfully");

                txtMessage.Text = string.Empty;
                btnDeleteLastMessage.IsEnabled = true;
            });
        };

        var parameters = new Dictionary<string, object>();
        parameters["message"] = txtMessage.Text;

        fb.PostAsync("me/feed", parameters);
    } 
```

而且我还找到了一个图像邮政编码，但我无法将它集成到我的代码中。我认为方法彼此不合适。

这是图片邮政编码；

```
 var photo = new WriteableBitmap(0, 0).FromResource("Background200x200.jpg");

  FacebookClient app = new FacebookClient();
  IDictionary<string, object> parameters = new Dictionary<string, object>();
  parameters["access_token"] = _facebookAccessToken; //set in another method where I authenticate...
  parameters["name"] = "my picture";
  parameters["message"] = "this is a picture uploaded from my the facebook sdk";
  var mediaObject = new FacebookMediaObject {
    FileName = "Background200x200.jpg",
    ContentType = "image/jpeg",
  };
  mediaObject.SetValue(photo.ToByteArray());
  parameters["source"] = mediaObject;

  app.ApiAsync(
      UploadComplete,
      null,
      "https://graph.facebook.com/me/feed",
      parameters,
      HttpMethod.Post); 
```

我只想发布带有消息的图像。如果你能给我一个将图像发布到 facebook 的示例链接（我一直在寻找一个现成编码的图像发布应用程序，即 Visual Studio 解决方案文件，我可以编译它并 XAP 它，并在我的手机上运行)

或者如果你能帮助我将我的信息海报演变为形象海报，我会非常高兴。

谢谢

# google-maps-api-3 - 在 google maps api v3 中定义多个标记的大小和锚点

> ID：15146453
> 
> 赞同：0
> 
> 时间：2013-02-28T21:57:29.870
> 
> 标签：google-maps-api-3, google-maps-markers

有几个类似的问题和答案，但我确实无法弄清楚！因此，我使用了两个不同的图标（customIcons），但由于默认设置“锚点位于图像底部的中心点”，它们在地图上的放置略有不正确。（请参阅[https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)）。我知道我必须更改该默认功能，但不知道如何更改。我定义自定义图标

```
var markers = [];
var infoWindow;
var customIcons = {
recent: {icon: 'http://www.herpetofauna-nrw.de/Fundmeldungen/blauer_Punkt.png'},
historisch: {icon: 'http://www.herpetofauna-nrw.de/Fundmeldungen/roter_Punkt.png'}
}; 
```

后来我使用：

```
downloadUrl("auswertung.xml?ienocache="+new Date().getMilliseconds(), function(data){ 
       var xml = data.responseXML; 
      var markers = xml.documentElement.getElementsByTagName("marker");
      var bounds = new google.maps.LatLngBounds();
      for (var i = 0; i < markers.length; i++) {
        var Art = markers[i].getAttribute("Art");
        var type = markers[i].getAttribute("Stichjahr");
        var Jahr = markers[i].getAttribute("Jahr");
        var MTBNr = markers[i].getAttribute("MTBNr");
        var latlng = new google.maps.LatLng(
            parseFloat(markers[i].getAttribute("lat")),
            parseFloat(markers[i].getAttribute("lng")));

       var html = 
         "<b>" + "Art: "  + "</b>" + Art +  " <br/>" +
       "<b>" + "MTB: " +  "</b>" + MTBNr + "<br/>" +
       "<b>" + "Funddatum: " +  "</b>" + Jahr + "<br/>"; 
       var icon = customIcons[type] || {};

       var marker = new google.maps.Marker({
        map: map,
        position: latlng,
        icon: icon.icon
        }); 
```

但是当我使用**“var icon = customIcons[type] || {};”** 我不知道在哪里放置必要的选项**“new google.maps.Point(0,0)”**，例如：

```
var image = new google.maps.MarkerImage('XXX.png', // The image size
    new google.maps.Size(44, 46), // The origin
    new google.maps.Point(0,0),   // The anchor
    new google.maps.Point(22, 23)); 
```

有人可以帮忙吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:07:51.297

MarkerImage 已弃用，取而代之的是[Icon](https://developers.google.com/maps/documentation/javascript/reference#Icon)匿名对象。像这样的东西应该可以工作（未经测试）：

```
var customIcons = {
recent: {icon: {url:'http://www.herpetofauna-nrw.de/Fundmeldungen/blauer_Punkt.png',
                anchor: new google.maps.Point(X1,Y1),
                size: new google.maps.Size(S1,S2)}},
historisch: {icon: {url:'http://www.herpetofauna-nrw.de/Fundmeldungen/roter_Punkt.png',
                    anchor: new google.maps.Point(X2, Y2),
                    size: new google.maps.Size(S2,S2)}}
}; 
```

# c++ - 定义常量时包括算术运算

> ID：15146454
> 
> 赞同：9
> 
> 时间：2013-02-28T21:57:30.703
> 
> 标签：c++, constants, c-preprocessor

所以我经常看到这样的事情：

```
#define gf_PI  f32(3.14159265358979323846264338327950288419716939937510)
#define gf_PIhalf  f32(3.14159265358979323846264338327950288419716939937510 * 0.5) 
```

这意味着每次我在代码中使用 gf_PIhalf 时都会计算一半的 PI 值，对吗？
直接写下半个 PI 的值不是更好吗？

执行以下操作不是更好吗：

```
#define gf_PI f32(3.14159265358979323846264338327950288419716939937510)
const float gf_PIHalf = gf_PI * 0.5f;    // PIHalf is calculated once 
```

最后，这样做不是最好的吗（以及为什么它似乎不是一种常见的做法）：

```
const float gf_PI = 3.14159265358979323846264338327950288419716939937510;
const float gf_PIHalf = gf_PI * 0.5f; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T22:00:16.107

> 这意味着每次我在代码中使用 gf_PIhalf 时都会计算一半的 PI 值，对吗？

不，不太可能。

您可以合理地依靠您的编译器在编译时而不是运行时进行乘法运算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T22:02:12.693

您的结论有些正确，除了该`#define`版本几乎肯定会在编译时解决，并且类型 const 全局变量是不常见的做法。它们是现代优秀代码中的常见做法。`#define`s 对于这种用途几乎已经死了。*最佳*实践是在未命名的命名空间中定义文件范围全局变量：

```
namespace
{
    const float g_SomeGlobal = 123.456f;
} 
```

这可以防止您的翻译单元之外的任何人“看到” `g_SomeGlobal`。

# php - 包含 php 文件 javascript 的结果

> ID：15146455
> 
> 赞同：-2
> 
> 时间：2013-02-28T21:57:33.320
> 
> 标签：php, javascript, web

[解决了]

我正在尝试从头开始构建图片库。我有一个 php 文件目录，每个文件都是专辑的缩略图。每个都具有这种结构：

```
<div class="pic">   
    <img id="albcov" onclick="showAlbum(this)"  src="someimg.jpg"
    Alt="albumtitle"
</div> 
```

相关js：

```
 function showAlbum(img){   
     var albumname=img.alt   
     document.getElementById("albcont").innerHTML = [executed contents of: albumname     serverside php file];  
 } 
```

我怎样才能获取所需的文件？

此 php 文件将生成指定相册的缩略图列表。这反过来将显示所有完整的图像。

据我了解，它将需要某种ajax。

**编辑：这是我现在使用的代码：**

```
function showAlbum(img){
    albumName = img.alt;
    $('#albcont').load("/gallery/"+albumName+".php");
} 
```

其中 albumname.php 包含：

```
<p>
<?php foreach (glob("[albumname]/*.php") as $filename)

{
    include ($filename);
}
?>
</p> 
```

其中包括该专辑中具有以下结构的所有 php 文件：

```
<div class="galpic">
<img onmouseover="displayImage(this)" src="
someimg.jpg
"  alt="
alt
" />
<p>
caption
</p>
</div> 
```

对此的JS是：

```
function displayImage(img) {
    var imgname= img.src
    var albumname= img.alt
    document.getElementById("imgview").innerHTML ='<img src="'+imgname+'"/>';

} 
```

[在lonjaselter.co.nr/gallery2.php](http://lonjaselter.co.nr/gallery2.php "image gallery")上查看的示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:24:54.737

你可以通过使用ajax来做到这一点。通过 jQuery，您可以轻松地完成它，以获取更多您可以[jQuery AJAX Api Doc](http://api.jquery.com/category/ajax/)

通过使用 jQuery Ajax 请求代码是

```
/*i assume that img is id of the element that you are passing as parameter. in jQuery Way*/ 
function showAlbum(img){
   var imgId = '#'+ img, 
       albumName = $(imgId).attr('alt'); 
   $('#albcont').load("http://yourdomainname/path/to/"+albumname+".php");
} 
```

# google-chrome-extension - Chrome 扩展程序中的更改响应

> ID：15146456
> 
> 赞同：5
> 
> 时间：2013-02-28T21:57:37.153
> 
> 标签：google-chrome-extension

我目前正在开发 Chrome 扩展程序。我只是不明白是否/如何更改 Chrome 中的响应正文。

**示例**：网站执行 XMLhttpRequest 到`example.com/is_logged_in.php`. 这返回`0`。我想制作一个自动更改`0`为`1`. 而不是通过更改进行调用的 javascript，而是通过更改响应正文，因此 javascript 认为它收到了一个`1`.

我知道您可以使用[chrome.webRequest](https://developer.chrome.com/extensions/webRequest.html)更改响应标头，但我想更改响应正文，而不是响应标头。

目前可以通过将您`hosts file`的`example.com`“重定向”更改为您自己的主机。然后创建`is_logged_in.php`内容并将其设置为`1`. 然后脚本认为用户已登录。我已经检查过了，这很有效。但现在我想在 Chrome 扩展中使用它，这样它对用户更友好。

Chrome 可以更改响应（正文，而不是其标题）吗？如果可以，如何更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T14:36:15.850

根据这个活跃的铬[问题](https://code.google.com/p/chromium/issues/detail?id=104058 "问题")，您现在无法修改 JavaScript 扩展中的响应正文。

如果您真的想这样做，可能的方法是使用[NPAPI Plugins](http://developer.chrome.com/extensions/npapi.html)，但不幸的是，由于安全问题，这不是我的选择。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-01T06:46:31.877

是的，您可以使用 chrome 扩展来操纵 Body URL 等的响应，看看这些 API。

# 相关 API

*   [网络请求](https://developer.chrome.com/extensions/webRequest.html)
*   [标签](https://developer.chrome.com/extensions/tabs.html)

# php - 如何将数组传递给使用 func_get_args 检索参数的函数

> ID：15146460
> 
> 赞同：5
> 
> 时间：2013-02-28T21:57:46.367
> 
> 标签：php

我正在对一个接受可变数量参数的 API 方法进行编程。API 方法（见下文）使用 func_get_args。我正在包装 API，并且希望能够传递关联数组，而不是将数组的键/值作为参数传递；IE`filter(key1,value1,key2,value2 ...)`

我可以访问 API 的源代码，但遗憾的是我无法更改源代码。
我看过[call_user_func_array](http://www.php.net/manual/en/function.call-user-func-array.php)，我认为应该/将把数组作为一组参数传递（尽管不是关联数组）。 `filter`是对象的方法 - 我不知道如何将方法作为回调传递。我也不知道是否有一种干净的方法来包装这个 API。任何和所有的帮助表示赞赏。

```
<?php

public function &filter() {
        $filter = new QueryFilter($this->queryhandler, $this);
        $args = func_get_args();
        $filter->applyFilter($this->getFilters($args));
        return $filter;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T22:12:28.173

你可以有一个包装器，它接受一个数组并“展平”键和值：

```
function wrapper(array $params) {
    $flat = array();
    foreach ($params as $k => $v) {
        $flat[] = $k;
        $flat[] = $v;
    }

    return call_user_func_array('filter', $flat);
} 
```

上面假设这`filter`是一个自由函数，在你的情况下是不正确的。要将方法指定为回调，请使用 with 语法`array($object, 'filter')`在上`call_user_func_array`调用该方法。`filter``$object`

# mysql - 如何计算 MySQL 中给定字符串的匹配数？

> ID：15146462
> 
> 赞同：3
> 
> 时间：2013-02-28T21:57:47.403
> 
> 标签：mysql, regex

现有数据库包含一个名为“dependent_ages”的字段，一些示例数据看起来像“1,2,5”或“1yo and 3mo”或“4mo”。

要求是将这样的字符串转换成整数，也就是用“，”或“and”分隔的子串的个数。更准确地说，分隔符可以描述为正则表达式“,|\sand\s”。所以对于上面的例子，转换后的整数是 3、2 和 1。基本上，我感兴趣的是存在*多少*匹配，而不是这些匹配的*值*。因此，无论单个值是“14yo”还是“4mo”，都将计为 1。

问题是找到一个可以做到这一点的 MySQL 表达式，例如

```
SELECT REGEXMATCHES(dependent_ages) as dependent_no ... 
```

**更新**

一些答案/评论显示了对这个问题的一些普遍误解，所以我澄清了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:09:00.507

根据 MySQL 的[字符串函数](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html)和[正则表达式](http://dev.mysql.com/doc/refman/5.6/en/regexp.html)的文档，我认为除了使用正则表达式比较返回 true (1) 或 false (0) 之外，不可能做任何事情。您不能返回匹配项，也不能返回匹配项的数量。我认为您甚至不能使用正则表达式来执行替换。

您也许可以使用[存储程序](http://dev.mysql.com/doc/refman/5.6/en/stored-programs-defining.html)：

*   从...开始：`'son: 10yr * daughter: 5yr * son:6mo'`
*   第一遍：用==>替换`"*"`字符串中的所有内容`""``'son: 10yr daughter: 5yr son:6mo'`
*   第二遍：用a替换数字序列`"*"`（所以`"15"`变成`"*"`）==>`'son: *yr daughter: *yr son:*mo'`
*   第三遍：将 non- 替换`"*"`为`""`==>`'***'`
*   第四遍：返回字符串（3）的长度。

对于大量记录来说，这将是缓慢而繁琐的，但它会让你留在 MySQL 中。您可能还想考虑使用其他工具来下载行，进行处理，然后上传结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:09:55.333

如果我理解正确，这就是你所需要的。

```
select count(*) from `table` where `dependent_ages` rlike 'HERE-REGEX' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:17:50.763

我认为你需要这样的东西：

```
SELECT
  col,
  CASE WHEN COALESCE(col, '')='' THEN 0
  ELSE
    length(col)-length(replace(col, ',', ''))+
    (length(col)-length(replace(col, ' and ', ''))) DIV 5
    +1
  END
FROM
  yourtable 
```

请[在此处](http://sqlfiddle.com/#!2/5e186/1)查看小提琴。

# java - Guice、设置和样板代码

> ID：15146467
> 
> 赞同：4
> 
> 时间：2013-02-28T21:57:57.533
> 
> 标签：java, guice, named-parameters

我有一个使用 Guice 并从配置文件中读取一些配置设置的应用程序。我像这样加载它：

```
@Provides @Singleton
Settings provideSettings() {
    // code that loads the settings
} 
```

某些对象需要某些设置，其他对象需要其他设置。在我看来，在构造函数中传递这些东西是有意义的，但是我最终得到了很多样板代码，比如：

```
@Provides @Named("integerValueSetting1")
int provideIntegerValueSetting1(Settings settings) {
    return settings.getInteger("integerValueSetting1");
} 
```

而且我必须`@Provides`为每一种设置类型制作这样的方法，而且我必须在构造函数中注释适当的设置。像这样：

```
@Inject
public MyClass(@Assisted String objectName, @Named("integerValueSetting1") myValue) {
    // blah blah constructor
} 
```

这似乎并没有为我节省多少！更糟糕的是，如果我为每个设置参数创建了一个自定义注释类。一定有更好的方法，对吧？

一种解决方案可能是直接传递 Settings 对象，但这违反了[最佳实践：仅注入直接依赖项](http://code.google.com/p/google-guice/wiki/InjectOnlyDirectDependencies)......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:12:41.213

如果您有大量设置，并且希望避免为每个设置创建新的绑定注释，您可以尝试将它们放在一个枚举中并在一个通用绑定注释中使用该枚举。这可能是一个有点复杂的解决方案，但它也可以节省您试图避免的样板文件。

通过这种方式，您可以匹配对象引用（IDE 友好）而不是字符串（缓慢而脆弱），并且仍然只创建一个绑定注释。

```
public enum Config {
  DB_NAME("db_name"),
  DB_HOST("db_host_name_specified_in_file"),
  SOME_NUMBER("some_number"),
  ;

  private final String propertyName;

  private Config(String propertyName) {
    this.propertyName = propertyName;
  }

  public String getPropertyName() {
    return propertyName;
  }

  public InjectConfig annotation() {
    // Create an implementation of InjectConfig for ease of binding.
    return new InjectConfig() {
      @Override public Class<? extends Annotation> annotationType() {
        return InjectConfig.class;
      }

      @Override public Config value() {
        return Config.this;
      }

      @Override public boolean equals(Object obj) {
        if (obj == this) {
          return true;
        } else if (!(obj instanceof InjectConfig)) {
          return false;
        }
        return value() == ((InjectConfig) obj).value();
      }

      /** @see Annotation#hashCode */
      @Override public int hashCode() {
        return (127 * "value".hashCode()) ^ value().hashCode();
      }
    };
  }

  @Retention(RetentionPolicy.RUNTIME)
  @BindingAnnotation
  public static @interface InjectConfig {
    Config value();
  }
} 
```

现在您可以遍历并在循环中绑定每个：

```
public class YourModule extend AbstractModule {
  @Override public void configure() {
    // You can get a Provider in a Module as long as you
    // don't call get() before the injector exists.
    Provider<Settings> settingsProvider = binder().getProvider(Settings.class);
    for (Config config : Config.values()) {
      String propertyName = config.getPropertyName();
      // Guice's TypeConverter will convert Strings to the right type.
      bind(String.class).annotatedWith(config.annotation()).toProvider(
          new GetValueFromSettingsProvider(settingsProvider, propertyName));
    }
  }
} 
```

并且只注入你需要的东西，直接：

```
/** Your constructor */
YourClass(@InjectConfig(DB_USER) String user,
    @InjectConfig(SOME_NUMBER) int number) { } 
```

我没有机会对此进行测试，但据我所知，它*应该可以*工作。鉴于您的特定设置用例，您可能需要`GetValueFromSettingsProvider`修改您编写的内容，或`getConfigValueFromSettings`在枚举中编写一个可覆盖的方法。但是请记住，您仍然需要以一种或另一种方式存储 (enum key, property name in file, property type) 元组，并且 Enum 似乎是以编程方式管理它的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:27:53.487

查看[Tadeon](http://code.google.com/p/tadedon/)项目，尤其是它的*配置*功能。

使用以下`.properties`文件：

```
foo=foo
list=1, 2, 3 
```

和组件：

```
public class PropertyInjectedComponent {

    private final String foo;
    private final List<String> list;

    @Inject
    public PropertyInjectedComponent(
        @Named("foo") String foo,
        @Named("list") List<String> list) {
    this.foo = foo;
    this.list = list;
    }
    ...
} 
```

您可以简单地配置 guice 模块来扫描命名值的属性：

```
Injector injector = Guice.createInjector(new AbstractModule() {
        protected void configure() {
            GuiceConfigurations.bindProperties(binder(), new File("src/test/data"), "conf1.properties");
        }
    }); 
```

这是[测试](http://code.google.com/p/tadedon/source/browse/tadedon#tadedon/tadedon-guice-configuration/src/test/java/com/xemantic/tadedon/guice/configuration)文件。

您可以`Settings`用 apache `Configuration`、 JDK替换您的课程，`Properties`或者只是`Map<String, String>`或[调查 Tadeon 源代码](http://code.google.com/p/tadedon/source/browse/tadedon/tadedon-guice-configuration/src/main/java/com/xemantic/tadedon/guice/configuration/GuiceConfigurations.java)为您的`Settings`课程创建类似的解决方案。

# sql-server-2008 - 仅在最后一行显示汇总

> ID：15146468
> 
> 赞同：0
> 
> 时间：2013-02-28T21:57:59.057
> 
> 标签：sql-server-2008, sql-server-2005, rollup

这需要在 SQL Server 2005 和 2008 中工作，而无需调整兼容性级别（如果可以的话）

```
Select 
    CASE GROUPING([Store ID]) WHEN 1 THEN '[Store ID]' ELSE [Store ID] END [Store ID],
    CASE GROUPING([Cashier]) WHEN 1 THEN '[Cashier]' ELSE [Cashier] END [Cashier],
    CASE GROUPING([Register]) WHEN 1 THEN '[Register]' ELSE [Register] END [Register],
    sum([Amex]) AS [Amex],
    sum([C.Card]) AS [C.Card],
    sum([Cash]) AS [Cash],
    sum([House Acct]) AS [House Acct],
    sum([MasterCard]) AS [MasterCard],
    sum([Str Cr]) AS [Str Cr],
    sum([Visa/MC]) AS [Visa/MC] 
from 
    #a13 
group by 
    [Store ID],
    [Cashier],
    [Register] 
with rollup 
```

这返回： ![在此处输入图像描述](../Images/e0b6e0227852e9f53af6a6237502d873.png)

我如何调整代码以不实际显示卷起的行？意思是删除最后 3 行或其中带有 [ ] 的任何内容。我需要`Rollup`在 SQL 2005 中使用，所以我可以使用`case grouping`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:46:32.450

现在我对这个问题有了更好的理解，我的第一个建议是让你的表示层更聪明一点，而不是只管数据库发送给它的任何东西。

但是我不确定为什么你不能做这样的事情，而不是你用临时表描述的混乱：

```
SELECT * FROM 
(
  ...your query above...
) AS x
WHERE Register <> '[Register]'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:57:26.647

为什么不使用 CTE 代替？如果您不想要汇总生成的所有行，请返回到基本组 - 但在 CTE 内执行，例如使用 CTE 作为 ( <> ) select * from cte union all select sum(of each field) from CTE——即总计

您可能必须在 CTE 输出中引入一个常量（例如 1）并在最后一行中引入输出 2 以确保其正确排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:14:49.093

没关系，我只是将这些结果放入临时表中，删除了这些行，然后从临时表中进行选择。

# c# - Azure 辅助角色无法启动

> ID：15146470
> 
> 赞同：4
> 
> 时间：2013-02-28T21:58:07.870
> 
> 标签：c#, azure, azure-worker-roles

我在使用后端工作者角色的产品中处于 alpha 阶段。工人角色大约在 2 周前工作，但最近我拒绝了一些新的东西，一切似乎都很好，除了工人角色没有做它的工作（监控消息队列）......

我 RDP'ed 进入工作角色实例，并在机器的事件日志中发现以下事件：

> 会话“MA_ETWSESSION_RD00155D47CFD4_QueueWorkerRole_IN_0”无法启动，出现以下错误：0xC0000035

但除此之外一切都很好（似乎）。

AppAgentRuntime 日志甚至说一切正常：

> [00001320:00000896, 2013/02/28, 21:05:21.743, 00040000] 角色 847e925f39f044759cbcdb162c818553.QueueWorkerRole_IN_0 已稳定。

我已经用异常处理包装了工人角色的主要部分，试图抓住一些神秘的错误，但我不知道这是怎么回事......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T21:19:35.853

*   尝试在启用 IntelliTrace 的情况下重新部署您的服务。
*   不要只记录您的 Run 方法，还要跟踪从您的 OnStart 和 OnStop 方法抛出的任何内容。
*   请注意您可能已添加到类中的静态成员或构造函数 - 即使在您接触 OnStart 方法之前，它们也可能无法创建您的对象实例。

其他可能会扰乱您的启动的事情： * 您是否拥有将程序集加载到角色实例所需的所有依赖项？* 您是否在您的开发机器上禁用了强名称验证并在发布时忘记签署您的程序集？

# scala - JADE/SCALATE 模板错误 - InvalidSyntaxException

> ID：15146471
> 
> 赞同：3
> 
> 时间：2013-02-28T21:58:09.650
> 
> 标签：scala, pug, scalatra, scalate

我正在尝试 Jade（通过 Scalate）并且遇到了一个我找不到答案的错误。（或者，至少没有看到。）我使用 BlueGriffon 模拟了一个表单（我已经编写 HTML 代码已经有好几年了……）并将生成的 HTML 放入 Aarron Powel 的 HTML-JADE 转换器中。这是我的 .jade 模板文件中的顶部或翻译：

> br
> 表单（方法='POST'，操作='/account/create'，名称='userAccountDetails'）
>   | 用户名：
>   input(required='required', name='username', type='text')
> 
> etc., etc.,

尝试运行嵌套的 scala 应用程序会生成此错误：

> org.fusesource.scalate.InvalidSyntaxException: `)' expected but`,' 在 org.fusesource.scalate.scaml.ScamlParser.parse(ScamlParser.scala:375) 的 org.fusesource.scalate.jade.JadeCodeGenerator.generate(JadeCodeGenerator.scala:38) 的 5.19 发现)

它似乎不喜欢命令分隔的属性，但我不知道为什么。此外，在堆栈跟踪剪辑中，它似乎正在拉入一个 Scaml 解析器，即使该文件具有 .jade 扩展名。

有人可以指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T00:06:36.790

对于发现自己的人来说，这个问题（至少对我来说）似乎是由于 JADE 的 Scala/Scalatra 和 JavaScript/NodeJS 实现之间的语法差异造成的。幸运的是，我对 JADE 示例的搜索出现了后者——无论是在实用程序方面，还是在论坛问答方面——都表明逗号的必要性。

解决方案：删除逗号，一切正常：

！！！
h2 新帐户设置
br
form(method='PUT' action='/account/create')
...

编辑：更准确地说，差异实际上在于由 Scalatra 集成的 Scalate（Scala 模板引擎）。（可能还有一些其他基于 JADE 的 scala 库遵循原始语法。）

# powershell - 您可以声明一个参数，将值分配给具有不同名称的变量吗？

> ID：15146474
> 
> 赞同：1
> 
> 时间：2013-02-28T21:58:10.977
> 
> 标签：powershell

当您声明一个参数时，您提供一个变量的名称，该名称用作命令行上的参数名称。但是，我并不总是希望对脚本变量使用与命令行参数名称相同的命名约定。

例如：

```
function Some-Function {
  param (
    $some_variable
  )
  ...
} 
```

调用`Some-Function -some_variable <value>`分配给 $some_variable。如果我希望调用函数时使用的参数名称与函数主体中使用的变量名称不同怎么办？例如，调用`Some-Function -ElegantName <value>`将分配给一个名为 $some_variable?

当然，我可以这样做：

```
Some-Function {
  param (
    $ElegantName
  )
  $some_variable = $ElegantName
} 
```

但这看起来很丑陋，在参数声明中声明一组变量，然后将它们重新分配给新变量，因此脚本中的变量不必与参数具有相同的名称。有没有办法在声明中做到这一点？

请注意，这`[alias('ElegantName')]$some_variable`不是一个好的解决方案，因为“some_variable”仍然是选项卡完成中显示的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-09T11:44:23.840

好的，我决定用它的别名替换实际的变量名，并且不要触及现有的代码。例如它是：

```
[Parameter(Mandatory=$false)][alias("ServiceAccount")][string]$svc_user='somedata' 
```

它变成了：

```
[Parameter(Mandatory=$false)][alias("svc_user")][string]$ServiceAccount='somedata' 
```

UPD。不幸的是，这不起作用 - 代码中无法识别别名。我必须添加更多代码来自动创建具有别名的变量并为其分配原始值：

```
$standardparameters = @("Verbose", "Debug", "ErrorAction", "WarningAction", "ErrorVariable", "WarningVariable","OutVariable","OutBuffer","PipelineVariable")
$allparameters = ((Get-Command -Name $MyInvocation.InvocationName).Parameters).values  
$customparameters = @()
 ForEach ($par in $allparameters) { if ($par.name -notin $standardparameters) {$customparameters += $par}}
ForEach ($par in $customparameters) { foreach ($al in $par.Aliases) {try{Set-Variable -Name $al -Value $(Get-Variable $par.Name -ValueOnly) -ErrorAction stop} Catch {new-Variable -Name $al -Value $(Get-Variable $par.Name -ValueOnly)}}} 
```

请注意，代码只能在启动脚本或函数本身时执行。如果您尝试选择代码并启动选择，您将收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:25:14.743

您可以使用高级参数，这是一个示例，我将法语参数名称命名为 "file" ：

```
Function TestAdvParam
{
  Param ([Alias("Fichier")]
         [string]
         [ValidateNotNullOrEmpty()]
         $file)
  Write-Host $file
}

TestAdvParam -file "coucou 1"
TestAdvParam -fichier "coucou 2" 
```

看看[about_functions_advanced_pa​​rameters](http://technet.microsoft.com/en-us/library/hh847743.aspx) (get-help)

**注意：**别名的目标是为开发者提供一个易于记忆或使用的名称，因此它们不会出现在自动完成中并不奇怪。

# sql - 具有计算表达式的子查询的条件表达式中的数据类型不匹配

> ID：15146476
> 
> 赞同：1
> 
> 时间：2013-02-28T21:58:13.100
> 
> 标签：sql, ms-access

我正在尝试在 MS Access 中创建一个 SQL 子查询。获取“表达式
标准中的类型不匹配”错误消息。

子查询是

```
SELECT *
  (SELECT Locs_Eq.Locs_Eq 
   FROM Locs_Eq 
   WHERE Query6.StDeExtrREF=CStr(Locs_Eq.Full_VendSN)
  ) AS Loc_1
FROM Query6 
```

变量`DeExtrREF`from`Query6`如下：

```
 IIF(PDetail.VeName="Siem" AND [DeExtr1]="Contr REF#",
     TRIM(MID (PDetail.Desc, (InStr([PDetail.Desc],":")+1), LEN(PDetail.Desc))),
     TRIM(MID (PDetail.Desc, (InStr([PDetail.Desc],":")+1), LEN(PDetail.Desc))) 
    ) AS DeExtrREF 
```

我尝试将 CStr 添加到变量中，仍然收到错误消息。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:20:43.817

我假设您在第一行的 SELECT * 之后有一个逗号。如果没有，请先更改此设置，看看是否有帮助。

我不确定，但这可能是与 null 相关的错误；将此添加到您的访问应用程序中的模块：

```
public function is_null(val as variant, rplc as string) as string
    if isnull(val) then
        is_null = rplc
    else
        is_null = cstr(val)
    end if
end function 
```

然后更改您的查询以使用它，如下所示：

```
SELECT q.*,
  (SELECT l.Locs_Eq 
   FROM Locs_Eq l 
   WHERE is_null(q.StDeExtrREF, "") = CStr(is_null(l.Full_VendSN, ""))
  ) AS Loc_1
FROM Query6 q 
```

希望这可以帮助。我自动为表和查询设置别名，但作为一般规则，如果您的查询不太难理解，您更有可能在这里获得帮助。

# ruby-on-rails - 您如何在 Rails 中编写一个不捕获特定记录但捕获所有其他记录的范围

> ID：15146483
> 
> 赞同：0
> 
> 时间：2013-02-28T21:58:40.007
> 
> 标签：ruby-on-rails

我有这个范围，效果很好：

```
scope :concurrent, lambda{ |a,r,e| where(application_id: a, role_id: r, environment_id: e) } 
```

它是这样使用的：

```
l = Deployment.last
concurrent_deployments = Deployment.concurrent(l.application_id, l.role_id, l.environment_id) 
```

我需要对其进行修改，使其不会捕获所有并发并发的 Deployment。所以我可以添加一个参数*i*，它是目标的 id。

我重写：

```
scope :concurrent, lambda{ |a,r,e,i| where(application_id: a, role_id: r, environment_id: e, id: !i) } 
```

这行不通。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:26:11.803

你能有两个范围吗？

```
scope :concurrent, lambda{ |a,r,e| where(application_id: a, role_id: r, environment_id: e) }
scope :concurrentx, lambda{ |a,r,e,i| where('application_id = ? AND role_id = ? AND environment_id = ? AND id <> ?',a,r,e,i) } 
```

# jsp - 从 log4j 中查找实际日志

> ID：15146494
> 
> 赞同：1
> 
> 时间：2013-02-28T21:59:22.730
> 
> 标签：jsp, logging, intellij-idea, log4j

我看过类似的帖子，但在使用 log4j 时遇到了麻烦。我只是想知道我需要去哪里查看从我的日志中创建的实际文件。我成功地在我的项目中添加了正确的 JAR 文件作为依赖项（我使用的是 IDEA 12）。我已经导入并设置了我的记录器，例如：

```
import org.apache.log4j.Logger;

private static Logger logger = Logger.getLogger(ClassDAO.class.getName()); 
```

然后像这样使用它：

```
//Log the search
logger.info("Request successful. Size of result set: " + resultSet.size()); 
```

我还像这样设置了我的属性文件（根据另一篇文章的建议）：

```
# Set root logger level and appender name.
log4j.rootLogger = INFO, file

# Specify appenders.
log4j.appender.console = org.apache.log4j.ConsoleAppender
log4j.appender.file = org.apache.log4j.DailyRollingFileAppender

# Configure console appender.
log4j.appender.console.layout = org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern = %d{ABSOLUTE} [%t] %-5p %m%n

# Configure file appender.
log4j.appender.file.File = /ClassMonitor/logs/web.log
log4j.appender.file.DatePattern = '.'yyyy-MM-dd
log4j.appender.file.layout = org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern = %d{ABSOLUTE} [%t] %-5p %m%n 
```

本来我有

```
log4j.appender.file.File = /webapp/logs.web.log 
```

但我不确定如果这应该是项目名称是否暗示这是已经为我设置的实际文件路径。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:22:54.947

这是一个非常难的问题！实际使用的日志文件取决于您在运行时和实例化时使用的框架的顺序。

I.e.: Log4j or even slf4j can override your apache-log4j-handler at any part of runtime.

I fear: you must try and err for that issue.

# c# - 为 Doxygen 提供库类的文档存根

> ID：15146496
> 
> 赞同：0
> 
> 时间：2013-02-28T21:59:36.773
> 
> 标签：c#, doxygen, inotifypropertychanged

我的项目中有许多实现 INotifyPropertyChanged 的​​类。我希望每个事件中的所有 PropertyChanged 事件都能够从接口继承文档，但由于接口不是我项目的一部分，它没有 Doxygen 页面。

我可以通过此文档获得接口的部分文档，出现类页面，并且继承图显示了实现它的所有类。但我无法宣布事件。我是否缺少添加事件的关键字？

```
namespace MyNamespace
{
    /**
     * @class INotifyPropertyChanged
     * @brief Interface to allow subscribers to know when the object has been updated.  See <a href="http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx">MSDN Doc</a>
     * @fn void INotifyPropertyChanged::PropertyChanged(sender, e)
     * @memberof INotifyPropertyChanged
     * @brief Notification that a property of the object has changed.
     * @details the name of the property is in the event arguments
     * Still having trouble documenting the parameters correctly, but this doesn't inherit anyway because it's a function, not an event
     */
} 
```

还是我完全错过了这条船，并且有一些方法可以导入 Intellisense 文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:56:58.680

尝试创建 INotifyPropertyChanged.cs 文件，将文档化的接口声明放在那里，但不要包含在任何项目中进行编译，它只能由 doxygen 选择。

根据[doxygen 文档](http://www.doxygen.nl/manual/xmlcmds.html)，它支持标准的 ECMA-334 XML 标签，这些标签通常用于注释 C# 代码，因此不需要使用@class、@brief 标签等。

# c# - RNG隐藏字段参数

> ID：15146497
> 
> 赞同：1
> 
> 时间：2013-02-28T21:59:40.120
> 
> 标签：c#, asp.net

我有一个注册表单，我正在接受用户输入并将信息传递到支付网站。支付网站有几个隐藏字段，因此它可以将每个单独的用户区分为唯一的，而不是依赖用户提供的唯一名称。这就是“unique_id”字段，我想要一个随机数作为参数。我将如何进行这项工作，以便每次用户单击附加此代码的按钮时，它都会执行 RNG 并将该号码传递给外部支付网站？

...

```
 protected void submitButton_Click(object sender, EventArgs e)
    {
Random randnum = new Random();
int num = randnum.Next();
        {
            NameValueCollection PostFields = new NameValueCollection();
            PostFields.Add("LMID", "345573");
            PostFields.Add("unique_id", RANDOM NUMBER HEEDS TO GO HERE);
            PostFields.Add("sTotal", "150.00");
            PostFields.Add("webTitle", "Conference");
            PostFields.Add("Trans_Desc", "Conference Registration");
            PostFields.Add("contact_info", "Contact admin");
            PostFields.Add("BILL_CUSTOMER_FIRSTNAME", labelFirstName.Text);
            PostFields.Add("BILL_CUSTOMER_LASTNAME", labelLastName.Text);
            PostFields.Add("BILL_ADDRESS1", labelAddress.Text);
            PostFields.Add("BILL_CITY", labelCity.Text);
            PostFields.Add("BILL_STATE", labelState.Text);
            PostFields.Add("BILL_ZIP", labelZip.Text);
            PostFields.Add("BILL_CUSTOMER_PHONE", labelTelephone.Text);
            PostFields.Add("BILL_CUSTOMER_EMAIL", labelEmail.Text);
            RedirectAndPOST(this.Page, "payment website url", PostFields);
        } 
```

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:19:42.807

这对我来说很好：

```
 Random random = new Random(); int num = random.Next();

    NameValueCollection PostFields = new NameValueCollection();
    PostFields.Add("LMID", "093204"); 
    PostFields.Add("unique_id", num.ToString()); 
```

# java - “应用程序限制器”的一些想法

> ID：15146502
> 
> 赞同：1
> 
> 时间：2013-02-28T21:59:49.217
> 
> 标签：java

使用 Java 我想创建一个应用程序来计算某个应用程序（某些游戏或其他 .exe 文件）已运行的次数。基本上我想要的是限制一些游戏可以运行多少次。

我不需要代码，我只是希望有人指导我必须采取哪些步骤才能做到这一点。

我有一些想法，所以他们在这里。首先，这个应用程序需要在启动时运行。我不知道的部分是如何制作一个记录器，其中包含基于有人双击它的次数而运行了多少次应用程序。所以有了这些信息，我可以设置一个限制或类似的东西。告诉我这是否没有任何意义，但我真的很想有人可以帮助我解决这个问题。谢谢伊万。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:06:26.470

最简单的方法是轮询正在运行的进程。但是，这可以通过重命名进程或更改您使用的任何标识符来规避。据我所知，您无法在 Java 中获得“进程启动”事件。

你可以玩这个游戏吗？（这可以在游戏中实现吗？）或者这是任意可执行文件的使用计数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:10:41.727

根据您的评论

*   不要直接运行程序。使用以您喜欢的编程语言编写的启动器
*   启动器保留一个小型执行数据库，并根据此信息应用策略

# php - mysql php查询有时很快，有时很慢

> ID：15146503
> 
> 赞同：0
> 
> 时间：2013-02-28T21:59:51.443
> 
> 标签：php, mysql, sql

我有一个我认为是复杂的 php mysql 查询，它从各种 drupal 表中提取数据，并允许我通过 php 以 json 格式输出结果。有时这个查询很快，有时又很慢。如果您[访问 http://www.serviidb.com/content/data/view/api_access](http://www.serviidb.com/content/data/view/api_access)，您可以看到实际的 API 响应时间。数据库中的内容一直在增长，而且随着数据库变得越来越大，这个问题只会变得更糟。

抱歉忘记添加服务器信息：

```
Server: Localhost via UNIX socket
Server version: 5.5.29-0ubuntu0.12.04.1-log
Protocol version: 10 
```

我如何调用查询的示例。

```
mysql_query($sqlApiAccess) or die('Error, insert query failed'); 
```

如果有人想查看我正在使用的 PHP，请询问，我会发布它。我已经编程多年，但对 PHP 很陌生，所以我可能正在做所有事情。

我感谢任何人能给我的任何帮助、指导或建议。

这是查询：

```
SELECT DISTINCT
   node.title AS "name",
   regions.region AS region,
   field_data_field_media_url.field_media_url_value AS url,
   media_type.media_type AS mediaType,
   repositoryType.repositoryType AS resourceType,
   plugins.plugin,
   media_resource_language.language,
   node.nid,
   resolution.resolution,
   (field_data_field_quality.field_quality_rating / 20) AS quality,
   (field_data_field_reliability.field_reliability_rating / 20)
      AS reliability,
   field_data_field_installs.field_installs_value AS installCount
FROM node
   LEFT JOIN field_data_field_region
      ON field_data_field_region.revision_id = node.vid
   LEFT JOIN regions
      ON regions.tid = field_data_field_region.field_region_tid
   LEFT JOIN field_data_field_media_url
      ON field_data_field_media_url.revision_id = node.vid
   LEFT JOIN field_data_field_required_plugin
      ON field_data_field_required_plugin.revision_id = node.vid
   LEFT JOIN field_data_field_source
      ON field_data_field_source.revision_id = node.vid
   LEFT JOIN repositoryType
      ON repositoryType.tid = field_data_field_source.field_source_tid
   LEFT JOIN plugins
      ON plugins.tid =
            field_data_field_required_plugin.field_required_plugin_tid
   LEFT JOIN field_data_field_media_type
      ON field_data_field_media_type.revision_id = node.vid
   LEFT JOIN media_type
      ON media_type.tid =
            field_data_field_media_type.field_media_type_tid
   LEFT JOIN field_data_field_language
      ON field_data_field_language.revision_id = node.vid
   LEFT JOIN media_resource_language
      ON media_resource_language.tid =
            field_data_field_language.field_language_tid
   LEFT JOIN field_data_field_resolution
      ON field_data_field_resolution.revision_id = node.vid
   LEFT JOIN resolution
      ON resolution.tid =
            field_data_field_resolution.field_resolution_tid
   LEFT JOIN field_data_field_quality
      ON field_data_field_quality.revision_id = node.vid
   LEFT JOIN field_data_field_reliability
      ON field_data_field_reliability.revision_id = node.vid
   LEFT JOIN field_data_field_installs
      ON field_data_field_installs.revision_id = node.vid
WHERE     node.status <> 0
   AND node.type = "media"
   AND (node.title LIKE '%%' OR plugins.plugin LIKE '%%')
   AND node.title LIKE '%%'
   AND plugins.plugin LIKE '%%'
   AND media_resource_language.language LIKE '%%'
   AND (regions.region = "worldwide" OR regions.region LIKE '%%')
   AND media_type.media_type = "video" 
```

我读到如果使用“Like”，它会导致查询运行缓慢，所以我正在寻找几种方法来删除**Like**部分，除非实际变量中有信息。以下是我目前正在开发 where 部分的方式。

```
/** setups up sql variable for searches.
     *
     */
    $sqlregion        = "";
    $sqltitle         = "";

            $sqlregion        = 'and (regions.region = "worldwide" or ';
            $sqlregion        = $sqlregion . 'regions.region like ';
            $sqlregion        = $sqlregion . "'%";
            $sqlregion        = $sqlregion . $region;
            $sqlregion        = $sqlregion . "%')";

    $slqLanguage      = "and media_resource_language.language like '%" . $language . "%'";
    $sqltitleOrPlugin = "and (node.title like '%" . $titleOrPlugin . "%' or plugins.plugin like '%" . $titleOrPlugin . "%')";

    $sqlPlugin        = "and plugins.plugin like '%" . $plugin . "%'";

    $sqltitle         = "and node.title like '%" . $title . "%'"; 
```

Where 语句是这样设置的。

```
WHERE node.status<>0 and node.type="media" . $sqltitleOrPlugin . $sqltitle .$sqlPlugin . $slqLanguage . $sqlregion; 
```

where 变量实际上是第三方应用程序填充以缩小数据范围的参数。就像这样 language=en®ion=us&title=the&client=test

```
WHERE node.status<>0 
    and node.type="media"
    and (node.title like '%%' or plugins.plugin  like '%%')
    and node.title like '%%'
    and plugins.plugin like '%%'
    and media_resource_language.language like '%%'
    and (regions.region = "worldwide" or regions.region like '%us%') 
    and media_type.media_type ="video" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:27:26.990

MySQL 完全有可能缓存您的查询结果。首先，有通用的[MySQL 查询缓存](http://dev.mysql.com/doc/refman/5.5/en/query-cache.html)。使用 InnoDB 存储引擎时，还有[InnoDB 缓冲池](https://dev.mysql.com/doc/refman/5.5/en/innodb-buffer-pool.html)。两个缓存都能够将 SELECT 查询**及其结果**存储在内存中，从而实现非常快速的响应。

但是，这些缓存通常会在其中一个受影响的表中的数据被更新时被刷新（这样做是为了确保 MySQL 不会提供过时的结果）。此外，当达到最大缓存大小时，通常会从缓存中清除不常用的结果。

您的查询连接了很多表并包含一条`DISTINCT`语句，因此可能会导致大量 IO；此外，MySQL 可能需要使用临时表来构建结果（这些可能会偶尔写入磁盘，从而导致更多的 IO）。因此构建第一个结果集可能需要相当长的时间，而后续请求可以从查询缓存中快速得到响应。当数据发生变化或缓冲区大小耗尽时，缓存结果会从缓存中刷新，下次调用会再次变慢。

您可以尝试调整缓冲池配置参数（例如通过增加`innodb_buffer_pool_size`，尽管我不是这方面的专家），以便将您的结果保留在缓存中更长的时间。

# javascript - onsubmit 使使用 innerHTML 打印的文本消失

> ID：15146506
> 
> 赞同：0
> 
> 时间：2013-02-28T22:00:03.217
> 
> 标签：javascript, onclick

```
submit.form.onsubmit = function print() {
    div.innerHTML = sum;
} 
```

所以当我点击按钮提交时，我在 div 上写了一些东西；然而，一切在它出现后立即消失。为什么会这样，是否有快速解决该问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:09:52.567

表单正在提交，因此页面正在重新加载。最简单的方法是：

```
submit.form.onsubmit = function () {
    div.innerHTML = sum;
    return false;
} 
```

但是，这会阻止表单实际提交，这是您可能想要做的事情。也许您可以在更新前端的 div 时使用 ajax 提交表单。

或者（并且最好）使用：

```
submit.form.addEventListener('submit', function (e) {
    div.innerHTML = sum;
    e.preventDefault();
}); 
```

绑定事件。

# c# - 如何在 Enumerable 方法中添加条件语句？

> ID：15146508
> 
> 赞同：0
> 
> 时间：2013-02-28T22:00:04.900
> 
> 标签：c#, linq, lambda

我可能正在尝试在这里做一些不可能的事情。`SingleOrDefault`是否可以在我正在构建的表达式的可枚举方法中注入一些逻辑。

交易是我将有 (2) 相同的查询结果，除了用于提取结果的参数。

交易是`ID`和`ID2`价值观并非在所有条件下都存在。我正在尝试创建一个表达式，该表达式将根据条件缩小结果。这是我*要*完成的工作：

```
//'ID' and 'ID2' sre parameters passed into method
var query = Repository.GetQuery<Person>()
                      .Include(x => x.PersonDetail)
                      .SingleOrDefault(
                                       if (String.IsNullOrWhiteSpace(ID))
                                       {
                                         x => x.PersonDetail.ID2 == ID2;
                                       }
                                       else
                                       {
                                         x => x.PersonDetail.ID == ID;
                                       }
                                       ); 
```

现在它不会构建并产生以下错误：

> 无法解析符号 PersonDetail

好的，所以我可能已经完全解释了实现，但基本上我可以做我上面尝试过的事情，还是我必须编写（2）提取相同数据的单独查询，并将“决定逻辑”保留在外部表达？

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T22:07:28.093

您的分支条件是已知的，因此您可以（并且应该）将分支从 lambda 中拉出：

```
var query = Repository.GetQuery<Person>()
                      .Include(x => x.PersonDetail);

if (String.IsNullOrWhiteSpace(ID))
{
    query = query.Where(x => x.PersonDetail.ID2 == ID2);
}
else
{
    query = query.Where(x => x.PersonDetail.ID == ID);
}

var result = query.SingleOrDefault(); 
```

还有很多其他的写法，但重要的是你根本不需要`ID`用 lambda 进行检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:09:30.450

这就是你想要的：

```
var query = Repository.GetQuery<Person>()
                  .Include(x => x.PersonDetail)
                  .SingleOrDefault(String.IsNullOrWhiteSpace(ID) ?
                          x => x.PersonDetail.ID2 == ID2 :
                          x => x.PersonDetail.ID == ID); 
```

尽管不容易阅读，但它可以在单行中完成您想要的。

**编辑**修正语法错误。

# c# - 手动按钮单击有效，但 Form1_Load 无效

> ID：15146513
> 
> 赞同：0
> 
> 时间：2013-02-28T22:00:29.760
> 
> 标签：c#, .net, visual-studio-2010

如果我手动单击按钮，它工作正常。如果我尝试通过 加载它`Form1_Load`，一切正常，但只有一行。

代码：

```
public Form1()
        {
            InitializeComponent();
        }
private void Form1_Load(object sender, EventArgs e)
        {
            playTrend_Click(sender, e);
        }

private void playTrend_Click(object sender, EventArgs e)
        {
            aaTrendControl1.FileOpenEx("\\\\path\\tochart\\e_chart.aaTrend");
            aaTrendControl1.ToolBarVisible = true;
            aaTrendControl1.TimeBarVisible = false;                  
            aaTrendControl1.TagPickerVisible = false; 
            aaTrendControl1.RealTimeMode = true;
            aaTrendControl1.GridVisible = false;
        }
private void aaTrendControl1_Load(object sender, EventArgs e)
        {

        } 
```

如果我手动单击`playTrend`按钮，一切正常。但是，在运行该`Form1_Load`过程时，一切都按原样执行，除了`aaTrendControl1.GridVisible = false;`

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:09:13.787

使用`Shown`事件而不是`Load`.. 在第一次显示表单之前引发 Load 事件，在第一次显示表单后引发 Shown 事件。因此您`aaTrendControl1`的未显示，您无法在 Load 事件中隐藏/显示它

# c# - 如何更新扩展方法中的字典元素？

> ID：15146514
> 
> 赞同：1
> 
> 时间：2013-02-28T22:00:31.690
> 
> 标签：c#, dictionary, merge, updates

我正在尝试为我的字典编写一个合并扩展方法。

我真的很喜欢[在 C# 中合并字典的](https://stackoverflow.com/questions/294138/merging-dictionaries-in-c-sharp/15144598#15144598)[解决方案](https://stackoverflow.com/questions/294138/merging-dictionaries-in-c-sharp/15144598#15144598)

如果密钥退出，我正在尝试修改上述解决方案以更新字典项。我不想使用并发字典。有任何想法吗 ？

```
public static void Merge<TKey, TValue>(this IDictionary<TKey, TValue> first, IDictionary<TKey, TValue> second)
        {
            if (second == null) return;
            if (first == null) first = new Dictionary<TKey, TValue>();
            foreach (var item in second)
            {
                if (!first.ContainsKey(item.Key))
                {
                    first.Add(item.Key, item.Value);
                }
                else
                {
                    **//I Need to perform following update . Please Help
                   //first[item.Key] = first[item.key] + item.Value**
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T22:05:24.007

好吧，如果您希望结果包含两个值，则需要一些组合它们的方法。如果您想“添加”这些值，那么您需要定义一些组合两个项目的方法，因为您不知道是否`TValue`定义了 + 运算符。一种选择是将其作为委托传递：

```
public static void Merge<TKey, TValue>(this IDictionary<TKey, TValue> first
    , IDictionary<TKey, TValue> second
    , Func<TValue, TValue, TValue> aggregator)
{
    if (second == null) return;
    if (first == null) throw new ArgumentNullException("first");
    foreach (var item in second)
    {
        if (!first.ContainsKey(item.Key))
        {
            first.Add(item.Key, item.Value);
        }
        else
        {
           first[item.Key] = aggregator(first[item.key], item.Value);
        }
    }
} 
```

调用它看起来像：

```
firstDictionary.Merge(secondDictionary, (a, b) => a + b); 
```

尽管像这样的 Merge 操作也很常见选择要保留的两个项目中的一个，第一个或第二个（请注意，您可以使用上述函数，通过使用适当的`aggregator`实现来完成）。

例如，要始终将项目保留在第一个字典中，您可以使用：

```
firstDictionary.Merge(secondDictionary, (a, b) => a); 
```

总是用第二个替换它：

```
firstDictionary.Merge(secondDictionary, (a, b) => b); 
```

# php - 支付页面中的 CURL

> ID：15146517
> 
> 赞同：1
> 
> 时间：2013-02-28T22:00:38.290
> 
> 标签：php, curl, google-analytics

在我的安全支付页面中，我调用控制器中的回调函数，然后调用 Google Adsense 代码来跟踪付款。

因此，在静态中，当我使用下面的代码（例如[http://www.mywebsite.com/mycurlcode.php](http://www.mywebsite.com/mycurlcode.php)）时，我会在 Google Analytics 的“实时”部分看到一位访问者。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.mywebsite.com/analyticcode.php/");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch); 
```

但是当我将此代码放入安全支付函数回调（）中时，我从来没有任何访客在 GA 的“实时”部分...

# java - 如何用 Enums 的简单性设计一个易于扩展的 API？

> ID：15146523
> 
> 赞同：7
> 
> 时间：2013-02-28T22:01:00.763
> 
> 标签：java, api, frameworks, exif

抱歉标题含糊；想不出如何更清楚地表达它。以下是问题的重点：

**强调**

*   询问有关[ExifTool for Java](http://www.thebuzzmedia.com/software/exiftool-enhanced-java-integration-for-exiftool/)库的 API 设计问题。
*   这是当前 API 外观[的示例。](https://stackoverflow.com/questions/3021420/java-api-to-exiftool/7139392#7139392)
*   作为*USER*，该 API 使用起来非常简单，因为您只需传入 Enums 即可获取您想要返回的图像元数据。
*   作为*DEV*，API 有点糟糕，因为您无法轻松地使用更多 Enum 类型扩展基类以支持可能不直接在 lib 中支持的其他元数据。
*   简单地预先定义和支持“*所有元数据*”并[非易事](http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/)。

**问题**

鉴于这些设置信息，我想要找到一种方法来预定义人们通常希望从图像中获得的 30 或 40 个最常见的元数据标志；现在一切都被[定义为 Enum](http://www.thebuzzmedia.com/downloads/software/exiftool/javadoc/com/thebuzzmedia/exiftool/ExifTool.Tag.html)，但该类不能以这种方式扩展。

如果我采用“Class-per-Metadata-flag”路线，可扩展性会很简单，但开箱即用的 API 会不太友好。

如果闭包提供了一个非常漂亮和简单的解决方案，我将考虑制作这个库的 v2.0 Java 8+，但否则我显然更愿意让它与更多系统（Java 6/7）兼容而不是更少。

**概括**

我对该库的目标是“易于使用和扩展”——我觉得我已经在 1.x 版本中确定了“易于使用”的方面，但该库不容易扩展，我想在2.x 系列。

我已经在 2.x 版本上等待了一年多的时间来等待灵感来袭，但它却让我望而却步；我希望有人能发现我的错误，并且我可以以一种非常优雅的方式向前推进 lib。

谢谢你们的时间！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T23:02:23.650

Java 枚举不可扩展，但它们可以实现接口。

您通常可以通过定义提供者可以实现的接口和实现它并包含用户可以直接使用的常用实例的枚举来获得两全其美：

```
public interface Pet {
    public String talk();
} 
```

```
public enum CommonPet implements Pet {
    CAT("Meow!"),
    DOG("Woof! Woof!");

    private final String cry;

    CommonPet(String cry) {
        this.cry = cry;
    }

    @Override
    public String talk() {
        return cry;
    }
} 
```

用于接受原始枚举实例的 API 现在应该采用接口的任何实例。

用户可以使用相同的模式提供自己的实现：

```
public enum UncommonPet implements Pet {
    LION;

    @Override
    public String talk() {
        return "Roar!";
    }
} 
```

最后，没有要求所有实现都应该是枚举，因此在更复杂的情况下，用户可以选择将接口实现为一个成熟的类：

```
public class Parrot implements Pet {
    private String phrase = "Pieces of eight!";

    @Override
    public String talk() {
        return phrase;
    }

    public void teach(String phrase) {
        this.phrase = phrase;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:12:03.410

这里有几个想法：

1.  创建一个新接口来表示一个标签并改造你的枚举来实现它。或者也许调用新接口`Tag`，并将枚举重命名为`Tags`or `CommonTags`。然后创建另一个实现接口的类，允许使用不太常见的标签。

    这种方法的好处是它不需要对您进行大量更改，但它破坏了与旧版本库的源代码兼容性，并且稍微复杂一些。

    ```
    public interface Tag {
        String getName();
        Class<?> getType();
    }

    public enum Tags implements Tag {
        // mostly same as before
    }

    public class OtherTag implements Tag {
        private String name;
        private Class<?> type;
        public OtherTag(String name, Class<?> type) {
            this.name = name;
            this.type = type;
        }
        @Override
        public String getName() {
            return name;
        }
        @Override
        public Class<?> getType() {
            return type;
        }
    } 
    ```

    在您的方法中，您必须事先构建标签名称到对象的映射`getImageMeta`，而不仅仅是调用：`Tag.forName``Tag`

    ```
    ...
    Map<String, Tag> tagMap = new HashMap<String, Tag>();
    for (Tag tag: tags)
        tagMap.put(tag.getName(), tag);

    ...

    while ((line = streams.reader.readLine()) != null) {
        String[] pair = TAG_VALUE_PATTERN.split(line);

            if (pair != null && pair.length == 2) {
                // Determine the tag represented by this value.
                Tag tag = tagMap.get(pair[0]);
    ... 
    ```

2.  或者将`Tag`枚举转换为具有大量`public static final`字段的简单类：

    ```
    public class Tag {
        public static final Tag ISO = new Tag("ISO", Integer.class);
        public static final Tag APERTURE = new Tag("ApertureValue", Double.class);
        public static final Tag WHITE_BALANCE = new Tag("WhiteBalance", Integer.class);
        ...

        // almost everything else the same
        // Tag constructor should now be public
    } 
    ```

    `TAG_LOOKUP_MAP`除了初始化的部分之外，这将起作用。在那里，您要么需要再次列出所有标签，要么可能使用反射来获取所有字段`Tag`：

    ```
    private static final Map<String, Tag> TAG_LOOKUP_MAP;
    static {
        for (Field field: Tag.class.getFields()) {
            if (Modifier.isPublic(field.getModifiers()) &&
                    Modifier.isStatic(field.getModifiers()) &&
                    Modifier.isFinal(field.getModifiers()) {
                Tag tag = (Tag) field.get(null);
                TAG_LOOKUP_MAP.put(tag.getName(), tag);
            }
        }
    } 
    ```

    但是，您甚至可能不需要这样做，因为您仍然需要对`getImageMeta`我之前提到的进行相同的更改，因此您的代码实际上不需要调用`Tag.forName`. 该库的用户可能一直在使用它。

    这种方法的好处是它保持了源代码兼容性，从外部看起来几乎相同（`Tag.ISO`例如，用户仍然使用`new Tag("ColorMode", Integer.class)`. 缺点是它仍然破坏了二进制兼容性，并且在开发方面维护起来有点混乱。

我敢肯定还有其他选择，但我想到了两个。

# c# - Yahoo & Gmail smtp 服务器是否使用隐式或显式 SSL？

> ID：15146530
> 
> 赞同：1
> 
> 时间：2013-02-28T22:01:16.990
> 
> 标签：c#, ssl, smtp

我正在尝试使用 System.Net.Mail 编写发送邮件程序，这是 C# 中用于发送电子邮件的最新版本。不幸的是，这只支持显式（TLS/SSL）而不支持隐式（SSL），另一方面，谓词库 System.Web.Mail 支持隐式 SSL。

谷歌搜索并在 StackOverflow 上搜索后，我在[这里找到了一个非常有用的答案](https://stackoverflow.com/questions/1082216/gmail-smtp-via-c-sharp-net-errors-on-all-ports/3845907#3845907)

所以现在我可以使用下面的 smtp 服务器将我的测试电子邮件发送到 yahoo 和 gmail。但是，我无法确认 Yahoo 是否使用隐式 SSL 而 Gmail 是否使用显式，请帮助：

雅虎：smtp 服务器：smtp.mail.yahoo.com 端口：465

Gmail：smtp 服务器：smtp.gmail.com 端口 465 或 587

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:08:57.780

这篇文章包含你的答案：

[http://blog.falafel.com/blogs/john-waters/2011/03/15/the_different_flavors_of_secure_smtp_and_ssl](http://blog.falafel.com/blogs/john-waters/2011/03/15/the_different_flavors_of_secure_smtp_and_ssl)

两种服务都支持隐式和显式 SSL：

“即使隐式 SSL 没有标准化，你也可以习惯它。雅虎邮件在端口 465 上使用它，谷歌 gmail 也是如此。但是这两个服务器都在端口 587 上提供显式 SSL 支持，所以你可以选择适合的您的需求。”

# codeigniter - 通过会话的 CodeIgniter 用户权限

> ID：15146534
> 
> 赞同：0
> 
> 时间：2013-02-28T22:01:27.450
> 
> 标签：codeigniter, session, rights

所以我在 CodeIgniter 中创建了我的第一个项目，我想知道是否有一种有效的方法可以根据用户所属的用户组来强制用户限制。

此应用程序中有 3 个用户组（管理员、教师和学生），每个用户组都有自己的权限。实现这一点的最佳方法是什么？

目前我只是将它放入会话变量中，并在几乎每一页上阅读它。有些东西告诉我必须有一种更简单的方法来做到这一点？

提前致谢。

亲切的问候

格伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:43:03.873

在数据库表中使用组 ID。并将其存储到会话中。并使用此组 ID 检查授权和身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:05:41.010

如果将它放入控制器的构造函数中，它将在每个页面上被调用，但您不必在使用的每个方法中都调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T05:53:15.370

users 表中的简单组 ID 听起来对您的应用程序来说很好。然后，您可以像 catfish 所说的那样在控制器构造函数或特定方法本身中进行检查。

将来实现另一个表，如“权限”或“角色”或“范围”，将允许您在应用程序中创建细粒度权限。查看像 oauth 服务器的实现（[https://github.com/alexbilbie/CodeIgniter-OAuth-2.0-Server](https://github.com/alexbilbie/CodeIgniter-OAuth-2.0-Server)）

```
function user_get($id)
{
    $this->load->library('oauth_resource_server');
    if ( ! $this->oauth_resource_server->has_scope(array('user.details', 'another.scope')))
    {
        // Error logic here - "access token does not have correct permission to user this API method"
    }

    // API code here
} 
```

当您需要实际微调权限或在创建 RESTful API 时需要更灵活的权限时，这可能更适用。对于您当前的情况，可以在构造函数或方法中进行通用检查。

# javascript - javascript查找和列出网站的图像？

> ID：15146537
> 
> 赞同：0
> 
> 时间：2013-02-28T22:01:51.140
> 
> 标签：javascript, image, url, scraper

我想对我的网站的臃肿图像文件夹/目录进行一些卫生处理。我是使用 javascript 的新手以上的等级，似乎可以使用 javascript 实现解决方案......</p>

我正在寻找的解决方案本质上是抓取 html/asp/css 文件的整个目录（全部在一个目录中）并抓取所有图像文件名。然后将这些文件名输出到分层列表（或传真）中，以便我可以将该“抓取”列表与图像目录列表进行比较——从而通过消除过程识别未使用图像的列表。

这是一个粗略的脚本（显然缺少很多代码）我使用 // 来标记我认为可行但显然是伪代码的逻辑。

```
 var URL_LENGTH = document.SITEMAP.getElementsByName("URL").length;
    vari=1;
    varz=1;
    var list = [];

    var URLX = 'P' + NUMBER;
    var NUMBER = 1;
    var PAGE;
    var MINE;
    var PAT1 = /(.gif|.jpg|.png)/g;
    var IMGNAME;

    for (i=1;i<=URL_LENGTH;i++)
        {
        PAGE = document.SITEMAP.getElementById(URLX).innerHTML;
        MINE = document.[PAGE].match(PAT1).length;
        for (z=1;z<=MINE;z++)
            {
            //global for string ending with (.gif|.jpg|.png)
            //find begining of the image name string by looking for /( |'|"|/)/ that come before (.gif|.jpg|.png)
            //inserting image name string into value for var IMGNAME
            list.push(IMGNAME);
            }
        NUMBER=NUMBER+1;
        } 
```

SITEMAP 看起来像这样

```
 <div name="URL" id="P1">page1</div>
    <div name="URL" id="P2">page2</div>
    <div name="URL" id="P3">page3</div> 
```

# python - python中的IOEerror“没有这样的文件或目录”

> ID：15146545
> 
> 赞同：4
> 
> 时间：2013-02-28T22:02:34.843
> 
> 标签：python, django, file

我正在编写一个涉及从表中检索数据的 django 项目。我有一个模块，它有一行来检索一些数据（snp_data.txt 是模块同一目录下的文件）：</p>

```
 data = file("snp_data.txt") 
```

当我在 django 项目之外单独调用该模块时，该模块运行良好；当我使用 django 应用程序中的其他模块调用时，我不断收到以下错误。

```
 no such file or directory as 'snp_data.txt' 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T22:05:11.307

您正在尝试在*当前*工作目录中打开文件，因为您没有指定路径。您需要改用绝对路径：

```
import os.path
BASE = os.path.dirname(os.path.abspath(__file__))

data = open(os.path.join(BASE, "snp_data.txt")) 
```

因为当前工作目录很少与模块目录相同。

请注意，我使用`open()`而不是`file()`; 前者是推荐的方法。

# java - 将 PDF 文件更新为 mysql BLOB 您的 SQL 语法有错误；

> ID：15146546
> 
> 赞同：1
> 
> 时间：2013-02-28T22:02:36.013
> 
> 标签：java, mysql, sql

我将文件 PDF 上传到 MySQL 数据库，但更新方法 donc 工作它一直给我一个错误，我试图修复它但无法工作，这就是方法，

```
public void updateProjet(String location,String img) throws Exception
              {
                   // Créer une connexion JDBC Oracle sur la Base de Données 
       .. ici connection ..

           String cad = "update  projet set NomProjet='"+this.getnom_projet()+
             "', DateDeb='"+this.getdd()+ "', DateFin='"+this.getdf()+
             "', iduser='"+this.getid()+ "',IdProjet='"+this.getnprojet()+
           "',?,? where idpro='"+this.getidpro()+"'";
        PreparedStatement pStmt = conn.prepareStatement(cad);
        pStmt.setString(1, img);

        File fichier = new File(location);
        FileInputStream io = new FileInputStream(fichier);
        pStmt.setBinaryStream(2,  (InputStream)io,(int)fichier.length());

        pStmt.executeUpdate();
              } 
```

错误是：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''Exercices2_corrige_2.pdf',_binary'%PDF-1.4
%Çì�¢
5 0 obj
<</Length 6 0 R/Filter' at line 1 
```

请帮助，非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:08:53.943

您似乎没有为语句的参数化值设置列名。你将不得不使用类似 : `columnName=?` 的东西，你`?`单独使用。

正如评论中所述，对所有参数请求使用参数化参数以防止 SQL 注入漏洞是一种更好的做法。

# fix-protocol - 是否有可以更改每个交易对手使用的 FIX SPEC 的开源 FIX 模拟器？

> ID：15146550
> 
> 赞同：-1
> 
> 时间：2013-02-28T22:02:44.877
> 
> 标签：fix-protocol

是否有可以更改每个交易对手使用的 FIX SPEC 的开源 FIX 模拟器？

例如，我可能是一端使用带有一些自定义标签的 FIX 4.2 的用户，并且我想模拟与我和另一个使用带有一些自定义标签的 FIX 4.4 的用户的会话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:57:19.763

这个答案比你的问题更广泛，但它旨在找出我认为你的问题所基于的一些误解的根源。

两个交易对手必须使用相同的 FIX 版本。例如，4.2 方无法与 4.4 方通话。

此外，FIX 版本之间的自动转换，例如，将 4.4 消息转换为 4.2 并再次转换回来，实际上是不可能的。4.4 具有 4.2 没有的功能字段。

此外*，*您甚至不能相信两个 4.4 交换会以相同的方式解释任何给定的消息。这两个交易所可能以完全不同的方式使用某些字段，并且发送给例如 ICE 的给定 4.4 消息的解释可能与发送给 BARX 的相同消息不同。ICE 将需要不同的字段，或以不同的方式处理这些字段，或已将自定义字段添加到 BARX 不使用的规范中，反之亦然。 **根据我的经验，每个商业 FIX 界面都使用与所有其他供应商不同的自定义消息/字段字典。** 他们只是不关心彼此的互操作性。

最好将 FIX 视为带有*建议*的字段和消息字典的传输协议。我从未与任何使用未更改默认字典的交易对手合作过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T11:38:51.703

只是认为一些澄清是为了那些不熟悉 FIX 的人。FIX 集线器可以（轻松）在各种 FIX 协议之间无缝转换和规范化 FIX 消息，因此 FIX 4.0 上的客户端可以毫无问题地向 FIX 4.2 上的卖方发送订单。Grant所指的所有应用层问题都是通过认证来解决的。FIX 协议不仅仅是一个指南，但肯定有解释的空间（这就是您在启用实时交易连接之前进行认证的原因）。该协议不仅仅是一个建议，尽管与任何协议一样，只要双方都知道自定义项，您就可以对其进行自定义（因此您基本上将使用基于 FIX 的新协议）。

同意其中大部分是应用程序层，因此您需要就双方将如何解释业务级别的信息达成一致。

You definitely can take a higher protocol version (ex FIX 4.4) and send them to a lower protocol version (ex FIX 4.0). You can either lose fidelity of the information or you can pass the 4.4 tags along on the 4.0 message. This is all part of FIX message normalization, one of the main reasons you'd use a FIX hub.

# android - 触发方法在内部类的片段中创建ListView，但ListView的内容有时会消失

> ID：15146560
> 
> 赞同：0
> 
> 时间：2013-02-28T22:03:10.210
> 
> 标签：android, android-listview, android-fragments, android-gridview

我的代码中有一个错误，但我不知道**为什么**，因为有时它会起作用，有时却不起作用。希望你能帮我指出问题。这是问题：

在一个片段中，我设置了一个`Gridview`+ `ListView`。当用户单击网格单元（突出显示的单元格）时，我会显示该单元格的信息`ListView`（如果用户执行物理单击操作，此工作就很好）。我也有按钮来为 重新生成数据，`GridView`并将执行一次点击**AUTOMATICALLY**。正确生成的数据`GridView`和一个单元格按预期突出显示（这是在内部类中执行的），但`ListView`没有渲染（这是在片段中执行的）。**我进行了调试，并且按预期执行了行，但什么也没发生。但是有时，我单击具有不同输入数据的相同按钮并且它可以工作。**

以下是单击工具栏按钮时我的班级的示例流程：

1.  工具栏按钮操作（方法 1）

2.  内部类

    *   生成数据
    *   执行自动点击：在fragment中触发方法2刷新`ListView`
3.  该`refreshListView`方法被调用，每一行代码都按预期执行。

    public class GridListViewFragment extends Fragment { @Override public void onActivityCreated(Bundle savedInstanceState) { //一般生命周期设置。//太多了，这里就不一一列举了.....

    ```
    m_listView = (ListView)getView().findViewById(R.id.eventsList);

    }

    //Method 1
    View.OnClickListener toolbarButtonsAction = new View.OnClickListener() 
    {
        // Each view will return different input data each time clicked
        // This will call the inner class GridCellAdapter
        // The inner class will generate data to display on grid cell
        // If necessary, performClick() automatically 

    }

    //Method 2
    public void refreshListView()
    {
        //This method will be triggered from ome method in the inner class

        // I'm sure the Arraylist is valid
        if (anArrayList.size() == 0)
    {
        String[] notAvail = new String[]{"NotAvail String."};
        ArrayAdapter<String> nullAdapter = new ArrayAdapter<String>
        (getActivity(),android.R.layout.simple_list_item_2, android.R.id.text2, notAvail);          
        m_listView.setClickable(false);
        m_listView.setEnabled(false);
        m_listView.setAdapter(nullAdapter);

    }else{

        ListViewAdapter lviewAdapter = new ListViewAdapter(getActivity(),anArrayList);
        lviewAdapter.notifyDataSetChanged();
        // Set adapter for ListView
        m_listView.setClickable(true);
        m_listView.setEnabled(true);
        m_listView.setAdapter(lviewAdapter);

    }

    }

    //This is inner class

    public class GridCellAdapter extends BaseAdapter implements OnClickListener
    {

    //Other methods....

     @Override
     public void onClick(View view)
      {
          //Generate data for the anArrayList
          //Call the refreshListView in the fragment.
          refreshListView();
      }
    } 
    ```

**更新**：看起来 ListView 的内容消失了，但 ListView 仍在显示。我通过将颜色设置为 ListView 的背景来检查。

***Update2*****：在某些情况下，ListViewAdapter 中的 getView() 不会被调用。这是问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:57:09.410

在进行了聊天讨论后，我们得出了一个解决方案。让我引用：

> 问题是由于 listView 及其活动 TabHost 布局，有时不会调用 listViewAdapter 中的 getView()。现在我将 main_activity 和列表​​视图布局中的 android:layout_height="fill_parent" 更改为 android:layout_height="wrap_content"

所以一直以来都有一个布局错误，有时确实很难找到，而且可能非常卑鄙。

# python - 从 Web 界面控制基于 Twisted 的服务器？

> ID：15146564
> 
> 赞同：3
> 
> 时间：2013-02-28T22:03:28.547
> 
> 标签：python, twisted, twisted.web, twisted.internet

我使用 Twisted 创建了一个具有自定义协议的服务器，并且我有客户端连接到特定端口（例如端口 1234）上的服务器。我正在寻找基于某种网页的服务器控制界面。到目前为止，我的研究表明 Nevow 是流行的选择，但我只需要一些非常简单的东西。

例如，每次浏览器访问端口 8080 上的 hello world 页面时，我都会向连接在 1234 上的客户端发送一条消息。

我对如何将这两个连接在一起有点困惑。我假设我需要从 HelloResource.render_GET 调用 Server.message ？

```
from twisted.internet import protocol, reactor
from twisted.web.resource import Resource

    class Server(protocol.Protocol):
        def dataReceived(self, data):
            #do something on the server side

        def message(self)
            #send message to clients

    class HelloResource(Resource):
        isLeaf = True

        def render_GET(self,request):
            return "<html>Hello, world!</html>"

factory = protocol.Factory()
factory.protocol = Server
reactor.listenTCP(1234, factory)

reactor.listenTCP(8080, server.Site(HelloResource()))

reactor.run() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T22:53:12.713

[这与 Twisted FAQ 中回答的问题](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother)非常相似。

本质上，您需要使您的工厂创建的协议实例可以访问构成您的 Web 服务器的资源。

一个简单的方法是让你的工厂保留一个协议实例列表（`buildProtocol`如果你还没有的话，请阅读），然后将工厂实例传递给你的`HelloResource`初始化器，然后让初始化器将工厂保存为`HelloResource`实例的属性.

这将`HelloResource`访问协议实例列表——通过它现在引用的工厂对象——然后它可以对其进行迭代，例如，在每个协议实例上调用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:03:56.423

如果你想以这种方式做事，你`Server.message`显然必须是 a `@classmethod`，并且它必须有权访问客户列表，并将消息发送给每个客户。

像这样的东西：

```
class Server(protocol.Protocol):
    clients = set()

    def dataReceived(self, data):
        #do something on the server side
        pass

    def connectionMade(self):
        Server.clients.add(self)

    def connectionLost(self):
        Server.clients.remove(self)

    @classmethod
    def message(cls):
        for client in cls.clients:
            client.transport.write('got GET request\n') 
```

现在您可以`Server.message()`从您的`render_GET`方法中调用。

我不确定这是不是最好的设计——实际上，有各种比协议类更好的对象可以挂载客户端列表——但它应该可以工作。

# codenameone - 代号One NetworkOperator

> ID：15146565
> 
> 赞同：1
> 
> 时间：2013-02-28T22:03:29.797
> 
> 标签：codenameone

我怎样才能得到有关`netWorkOperator`信息`CodeNameOne`？我需要从android获取`mcc`和获取。`mnc`我发现这段代码可以在android上得到它。

```
TelephonyManager tel = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String networkOperator = tel.getNetworkOperator();

if (networkOperator != null) {
    int mcc = Integer.parseInt(networkOperator.substring(0, 3));
    int mnc = Integer.parseInt(networkOperator.substring(3));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:16:11.153

您可以使用本机接口来调用此代码。您需要在 init() 方法期间保留传递给您的对象，这是您可以用来调用 getSystemService() 的 Android 活动。查看 Zxing 演示，其中演示了本机接口调用。

您可能还需要添加清单权限，您可以使用 build 参数来完成 `android.xpermissions`。

# robots.txt - 如何阻止选择包含的链接？

> ID：15146568
> 
> 赞同：0
> 
> 时间：2013-02-28T22:03:45.263
> 
> 标签：robots.txt, invision-power-board

我将哪些代码添加到 Robots.txt 以允许：

?app=core&module=global§ion=**站点地图**&sitemap=sitemap_core_topics_4.xml.gz

但阻止所有其他包含**?**

当前代码：不允许：/*？阻止包含关键字站点地图的上述链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:19:49.550

```
User-agent: *
Allow: /*?app=core&module=global&section=sitemap&sitemap=sitemap_core_topics_4.xml.gz
Disallow: /*? 
```

# c# - 具有聚合函数和连接条件的 LINQ 查询

> ID：15146570
> 
> 赞同：0
> 
> 时间：2013-02-28T22:03:52.380
> 
> 标签：c#, sql, linq-to-entities

我在 SQL 中有以下非常简单的查询：

```
select Sum(m.unitPrice * mtp.units) charges 
from tbl_Medicines m, tbl_MedicineToPatient mtp 
where m.medicineId = mtp.medicineId and mtp.patientId = 1001 
```

我需要将此查询转换为 Linq to Entities 查询。我尝试了以下方法（我知道这是错误的）：

```
var varQuery = (from med in hmsdatabase.TblMedicines
              join medtopat in hmsdatabase.TblMedicineToPatients
              on med.MedicineId equals medtopat.MedicineId
              let jjj = new { med, medtopat}
              where medtopat.PatientId == 1001
              select jjj.Sum(med.UnitPrice * medtopat.Units)
              ).First(); 
```

我知道这没有意义。任何形式的帮助表示赞赏。我无法找到具有 LINQ 格式的查询、包含聚合函数、连接条件和两个不同表的字段的（乘法）操作的帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:07:54.380

应该只是

```
var total = (from med in hmsdatabase.TblMedicines
                join medtopat in hmsdatabase.TblMedicineToPatients
                    on med.MedicineId equals medtopat.MedicineId
                where medtopat.PatientId == 1001
                select med.UnitPrice * medtopat.Units
                ).Sum(); 
```

请注意，这将返回单个值，而不是集合。

# php - 使用 Sockets 函数发送/接收数据

> ID：15146577
> 
> 赞同：0
> 
> 时间：2013-02-28T22:04:20.180
> 
> 标签：php, sockets, port

如何将数据从 PHP 页面发送到 TCP 端口？

```
<?php 
// parameters to connect to server
$ip = "192.168.1.3";
$port = "59995";
$data = "Hello";
$output = "";

// Create a TCP Stream Socket
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);

// Connect to the server.
$result = socket_connect($socket, $ip, $port);

// Write to socket!
socket_write($socket, $data, strlen($data));

// Read from server
do 
{
  $line =@socket_read($socket,2048);
  echo $line. "\n";
} 
while ($data != "0");

// Close and return.
socket_close($socket);
?> 
```

我正在使用它，但我无法接收任何数据！另外，您知道我如何为此设置超时吗？

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T09:12:23.773

你的程序有效。如果它没有收到数据，可能是服务器的问题。当然，你想要

```
while ($line); 
```

代替

```
while ($data != "0"); 
```

如果服务器已关闭连接，则让它停止。对于接收超时（例如 7 秒），您可以使用

```
socket_set_option($socket, SOL_SOCKET, SO_RCVTIMEO, array("sec"=>7, "usec"=>0)); 
```

# php - 替代 iFrame 从外部网站或表单中提取实际数据

> ID：15146578
> 
> 赞同：1
> 
> 时间：2013-02-28T22:04:22.627
> 
> 标签：php, html, iframe

好的...我会尝试完成我的问题（所以，很抱歉冗长）...我一直在尝试在整个网络上搜索一个理想的解决方案。我建立了我们公司的网站（自学），并且开始为我的页眉和页脚包含一些不错的 css 和 php，并准备在我的 CSS 中使用不同浏览器大小/分辨率的一些媒体查询并获得一些很好的响应式网页设计。作为我们行业的产品供应商，我们将产品数据上传到名为 Sage 的服务中。他们为我们提供了一个我们可以使用的个人网站，该网站可以提取我们提供给他们的产品数据。但是，他们的网站设计不是很好，我们只想将产品数据提取到我们自己现有的网站中。

目前，我们每个产品类别的网站页面只使用一个 iframe，其 src URL 指向他们提供给我们的 Sage 网站上[的搜索表单结果生成的链接。](http://www.promoplace.com/ws/ws.dll/StartSrch?DistID=36182)显然这不是很好，因为拉入数据的速度很慢，而且我的 iframe 的大小必须始终适合最大高度，因为我不希望 iframe 有滚动条。

同样，我是自学网络开发的，我唯一的工具是大量的谷歌......并且只是阅读源代码，所以如果您有任何建议，请具体详细。

我在这个网站上发现了一些由其他人发布的东西，实际上几乎可以使用以下代码为我工作（我正在[这个 URL](http://promo-central.com/pens2)上进行测试（如果你想看看发生了什么）。

它使用以下代码：

```
<?php $ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.promoplace.com/ws/ws.dll/StartSrchDistID=36182&ProdSelect=&Srching=1&CatName=Pens&catmoveto=Pens&category=221&keywords=&itemnum=&LoP=&HiP=&Qty=&Search.x=44&Search.y=22&Search=submit&GlobalSearch=");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); ?>
<?php $result = curl_exec($ch);
curl_close($ch); ?>
<?php $result = preg_replace("#(<\s*a\s+[^>]*href\s*=\s*[\"'])(?!http)([^\"'>]+([\"'>]+)#",'$1http://www.promoplace.com/$2$3', $result);
echo $result ?> 
```

如果您查看我的测试页面......数据已经足够好，但外部图像不显示，当您单击查看“更多详细信息”时，它会附加正确的实际链接数据，应该在外部域到我的域，它指向外部存在的目录，而不是我的域。这显然是因为图像使用的是为本地目录编写的链接。我假设 $results = preg_replace..... ... 上面的命令以某种方式纠正了这个问题，所以也许我做错了，我已经快到了。

如果有人有任何想法或更好、更清洁的方法来实现这一点，我们将非常感谢您的帮助。我真的学到了很多东西，并且很享受这一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:33:38.137

如果您不想使用 iframe 并且正在使用 jQuery，则可以执行以下操作。试试下面的代码：

使用 div 标签代替 iframe 标签

```
<div id="divId"></div> 
```

将此代码放在您的`<head>`标签中

```
<head>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js?ver=1.4'></script>

<script type='text/javascript'>
$(document).ready(function (){
$('#divId').load(url of target website what you must load);     
});
</script>
</head> 
```

来自目标站点或页面（指定 url）的所有内容都将插入到`#divID`div 标签内。希望这可以帮助。一切顺利！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-22T16:32:36.220

您可以尝试使用 object 元素，该元素将允许您单击以子页面为目标的链接。尝试这个：

```
<object height="100%" width="100%" data="http://foo.com"> 
```

将您的样式设置为：

```
html, body{height: 100%;min-height: 100%;} 
```

如果子页面与父页面不在同一个域中，请确保设置 CORS。

# android - 如何在android启动时启动两个服务

> ID：15146580
> 
> 赞同：0
> 
> 时间：2013-02-28T22:04:37.363
> 
> 标签：android, service

现在我有一项服务在启动时运行。以类似的方式，我尝试创建另一个服务类和接收器类。

我没有共享我的代码，因为我的一项服务在启动时以正确的方式运行，因此尝试以相同的方式实现

这是正确的做法还是我需要为运行两项服务做任何额外的事情？

# sql - 选择在同一列（未知）值上相等的所有行

> ID：15146591
> 
> 赞同：1
> 
> 时间：2013-02-28T22:05:35.283
> 
> 标签：sql

我的表格列出了 x 个用户之间的线程。每个用户可以在 y 个线程中。

下面，`user_id` `1`在线程`1`中`2`，等等......

现在，假设`user_id` `1`仅给出，我怎样才能获得与具有相同`thread_id`的行的所有行`user_id` `1`？

```
 id   user_id  thread_id
        1     1        1    
        2     1        2    
        3     2        1    
        4     3        2 
```

没有线索...

* * *

编辑

给定的是`user_uid`s 1 和 2。现在给我只有他们两个共享的 thread_id。我不想要 1 和 2 的所有线程，而只想要它们一起共享的线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:11:34.767

如果要查找具有完全相同线程集的用户对，则以下查询将起作用：

```
select t.user_id, t2.user_id
from (select t.*, count(*) over (partition by t.user_id) as NumThreads
      from t
     ) t left outer join
     t t2
     on t.thread_id = t2.thread_id and t.user_id <> t2.user_id
group by t.user_id, t2.user_id
having SUM(case when t.user_id is null then 1 else 0 end) = 0 and
       SUM(case when t2.user_id is null then 1 else 0 end) = 0 and
       count(*) = max(t.NumThreads) 
```

在这个查询中，无论它说“来自 t t2”，你都会输入“来自 t2”。行是“来自 t”的地方，你会放“来自 t”。

此查询的结构是带有聚合的自联接。意图找到每一对匹配的线程。然后按两个 user_id 对它们进行分组。如果匹配线程数是用户的线程数（第三个条件）*并且*没有线程匹配失败（前两个条件），则两个用户在所有线程上都匹配。

您在评论中关于所有用户线程的问题更容易。

```
select thread_id
from t cross join
     (select count(distinct user_id) as NumUsers from t) const
group by thread_id
having count(*) = max(const.NumUsers) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:07:44.317

```
declare @id int
set @id = (select thread_id from threads where user_id = 1)

select * from threads where thread_id = @id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T22:12:51.913

```
SELECT * FROM table
WHERE user_id!=1 AND
      thread_id IN (SELECT thread_id FROM table WHERE user_id=1); 
```

基于印第安人编辑的问题描述的新答案：

```
SELECT * FROM table t1
JOIN table t2 ON t1.thread_id=t2.thread_id AND t1.user_id!=t2.user_id
WHERE t1.user_id IN (1,2) AND t2.user_id IN (1,2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T22:13:04.600

```
select distinct thread_id from tableX
where thread_id in (select thread_id from tableX where user_id=1)
and thread_id in (select thread_id from tableX where user_id=2) 
```

我已修改我的答案以适合您的评论说明。试一试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T22:28:28.013

您可以使用`EXISTS`：

```
DECLARE @userID INT 
SET @userID = 1 

SELECT u1.id, u1.user_id, u1.thread_id 
FROM   userthreads u1 
WHERE  u1.userid <> @userId 
       AND EXISTS(SELECT 1 
                  FROM   userthreads u2 
                  WHERE  u2.userid <> u1.userid 
                         AND u2.threadid = u1.threadid) 
```

[**演示**](http://sqlfiddle.com/#!3/d5270/3/0)

如果要包含具有给定 userID 的用户，请省略`WHERE u2.userid <> u1.userid`.

# ruby-on-rails - 在 Rails 中检测到我的网站之前访问的 url 用户

> ID：15146597
> 
> 赞同：1
> 
> 时间：2013-02-28T22:05:56.097
> 
> 标签：ruby-on-rails, http-referer

我想保存用户在登陆我的网站之前访问的网址。我应该如何在 Rails 中做到这一点？我试过 `request.env["HTTP_REFERER"]`但无法检索以前的网址。

可能这是测试它的错误方法，但这是我所做的：

1.  我去一个页面，比如说，google.com
2.  然后我输入：localhost:3000。然后让调试器捕获 request.env["HTTP_REFERER"]。但它产生零

HTTP_REFERER 是否仅在用户通过重定向访问我的网站时可用，而不是手动输入地址？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:20:36.427

如果您在其中键入新 URL，您将看不到用户所在的最后一页。 `HTTP_REFERER`仅在您单击链接时设置。如果您可以看到用户之前查看的任意 URL，这将是一个相当大的隐私侵犯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:10:21.167

这在 HTTP 标头中作为“referer”发送。因此，如果用户的浏览器和/或任何代理没有过滤掉它，request.referer 应该有你需要的东西。

# ios - uiviews 的网格视图

> ID：15146603
> 
> 赞同：1
> 
> 时间：2013-02-28T22:06:16.823
> 
> 标签：ios, gridview

我的应用程序中有大约 30 个视图，通过导航栏，我可以从第一个移动到欲望一个，然后返回。

1.  我想在 NavigationBar 中添加一个按钮，该按钮将弹出一个带有所有视图预览的网格视图，让用户选择任何视图并移动到所选视图。

2.  我还想让用户更改该网格视图中视图的顺序。并让用户将某些视图标记为看不见，以便将它们从原始视图序列中移走，而不是从网格视图中移走。

3.  还让用户将 gridview 更改为 2x2、3x3 或 4x4。

使它成为可能的最佳方法是什么？

事先谢谢你。对不起我的英语不好...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:20:42.037

您希望 UICollectionView 具有网格布局。有关示例实现，请参见[http://www.appcoda.com/ios-programming-uicollectionview-tutorial/ 。](http://www.appcoda.com/ios-programming-uicollectionview-tutorial/)

# iphone - 当wifi源失去连接时如何检测互联网可达性的损失？

> ID：15146607
> 
> 赞同：8
> 
> 时间：2013-02-28T22:06:31.337
> 
> 标签：iphone, ios, objective-c, reachability

我正在努力获得真实的互联网连接状态。我使用了 Apple 的 Reachability，但它只给了我 wifi 连接的状态，即不包括设备通过 wifi 连接（到路由器或热点）的情况，但 wifi 路由器或热点本身没有连接到互联网。通过从 wifi 路由器拉出互联网输入电缆，可以重现这种情况。可达性的通知器`ReachableViaWiFi`同时返回`reachabilityForInternetConnection`和`ReachabilityWithHostName`。我非常愿意解决这个问题。我也尝试`NSURLConnection`过，但这太耗电了，而且我个人不喜欢那种继续发出 URL 请求的解决方案，尽管是在后台线程中。

这是我正在使用的代码（由 SO 研究员提供，但不记得确切的链接）

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkNetworkStatus:) name:kReachabilityChangedNotification object:nil];

    internetReachable = [[Reachability reachabilityForInternetConnection] retain];
    [internetReachable startNotifier];

    // check if a pathway to a random host exists
    hostReachable = [[Reachability reachabilityWithHostName: @"www.google.com"] retain];
    [hostReachable startNotifier]; 
```

然后在观察者方法中：

```
 - (void) checkNetworkStatus:(NSNotification *)notice{

    // called after network status changes

    NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
    switch (internetStatus)

    {
        case NotReachable:
        {
            NSLog(@"The internet is down.");
            self.isInternetReachable = NO;

            break;

        }
        case ReachableViaWiFi:
        {
            NSLog(@"The internet is working via WIFI.");
            self.isInternetReachable = YES;

            break;

        }
        case ReachableViaWWAN:
        {
            NSLog(@"The internet is working via WWAN.");
            self.isInternetReachable = YES;

            break;

        }
    }
    NetworkStatus hostStatus = [hostReachable currentReachabilityStatus];
    switch (hostStatus)

    {
        case NotReachable:
        {
            NSLog(@"A gateway to the host server is down.");
            self.isHostReachable = NO;

            break;

        }
        case ReachableViaWiFi:
        {
            NSLog(@"A gateway to the host server is working via WIFI.");
            self.isHostReachable = YES;

            break;

        }
        case ReachableViaWWAN:
        {
            NSLog(@"A gateway to the host server is working via WWAN.");
            self.isHostReachable = YES;

            break;

        }
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T22:09:22.337

根据[Reachability](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007324-Intro-DontLinkElementID_2)，它不仅检查 wifi，还检查 WWAN/3G 和没有互联网访问，为什么你认为它除了 WIFI 不检查？

```
 typedef enum {

    NotReachable = 0,

    ReachableViaWiFi,

    ReachableViaWWAN

} NetworkStatus; 
```

如果您想检查对特定主机的可达性，那么您可以像这样自己设置主机

```
Reachability *hostReach = [Reachability reachabilityWithHostName: @"www.google.com"];

NetworkStatus netStatus = [hostReach currentReachabilityStatus];

 switch (netStatus)
    {
        case ReachableViaWWAN:
        {
            NSLog(@"WWAN/3G");
            break;
        }
        case ReachableViaWiFi:
        {
            NSLog(@"WIFI");
            break;
        }
        case NotReachable:
        { 
            NSLog(@"NO Internet");
            break;
        }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-28T00:48:02.800

见乔丹的回答。Apple 官方的 Reachability.m 中有一个愚蠢的错误。returnValue 的类型应该是“NetworkStatus”而不是“BOOL”：

```
- (NetworkStatus)networkStatusForFlags:(SCNetworkReachabilityFlags)flags
{
    ...
    NetworkStatus returnValue = NotReachable;
    ...
} 
```

否则，您最终会遭受以下可怕的后果：

1.  即使蜂窝连接可用，也会报告为不可用。
2.  如果 Wifi 不可用，如果蜂窝连接可用，则会报告 Wifi 可用。

不敢相信苹果从来没有费心解决这个问题。

（PS新手堆栈溢出并且没有代表支持乔丹）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T15:24:45.863

即使断开连接，我也收到了 Wifi 标志。Reachability.m 方法中有一个错误：

```
- (NetworkStatus)networkStatusForFlags:(SCNetworkReachabilityFlags)flags 
```

它使用 BOOL 作为返回值，但它为它分配了具有 3 个值的结构的值：

```
typedef enum : NSInteger {
    NotReachable = 0,
    ReachableViaWiFi,
    ReachableViaWWAN
} NetworkStatus; 
```

因此，如果 Wifi 或 Cellular 可用，它将 ReachableViaWiFi（因为 BOOL 可以是 0 或 1，但不能是两个）

要修复它，只需更改上面的方法：

```
BOOL returnValue = NotReachable; 
```

为了这：

```
int returnValue = NotReachable; 
```

你可以走了。希望能帮助到你。

# debugging - Wordpress unzip_file() 用于大文件停止脚本，仅在在线服务器上没有错误

> ID：15146611
> 
> 赞同：1
> 
> 时间：2013-02-28T22:06:44.940
> 
> 标签：debugging, zip, wordpress

我正在开发一个 wordpress 插件，它解压缩一个 ~4mB 的文件。

它在我的本地服务器上运行良好，但在我的在线服务器上，即使在 wp-config.php 中将调试模式设置为 true，解压缩文件也会停止 php 脚本而没有错误。wordpress 不生成调试日志。更奇怪的是，它适用于小型 zip 文件（~30kB），但不适用于大型 zip 文件。

我更改了本地服务器上的一些 php.ini 配置，以尝试查看是否不是由于内存限制较低，但事实并非如此。

我还尝试将 wordpress 自己的 unzip_file 替换为 ZipArchive 类，但我的主机不支持它。

这是我的代码：

```
WP_Filesystem();
global $wp_filesystem;

unzip_file(ABSPATH.KMZ_DIR.$filename.$ext, ABSPATH.KMZ_DIR.$filename.'/'); 
```

我该如何调试呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:52:53.583

我使用 pclzip 库而不是 Wordpress 自己的 unzip_file() 函数对这个问题进行了排序。

# ember.js - 将子记录渲染到特定的出口

> ID：15146630
> 
> 赞同：3
> 
> 时间：2013-02-28T22:08:10.550
> 
> 标签：ember.js

[我在jsfiddle](http://jsfiddle.net/bazzel/SM5VM/)上有这个工作示例，其中显示了**Posts**列表。选择**帖子后**，我会在帖子模板的出口中显示详细信息。到目前为止没有问题。

由于每个**Post** *都有很多* **Comments**并且*有很多* **Trackbacks**，我希望**post/show**模板显示两个选项卡，这样我就可以在详细信息下方显示评论或引用。

为此，帖子/节目模板如下所示：

```
<script type="text/x-handlebars" data-template-name="post/show">
    <h3>{{controllers.post.title}}</h3>
    <p>{{controllers.post.description}}</p>
    <hr/>
    <ul>
        {{#linkTo comments tagName="li"}}<a {{bindAttr href="view.href"}}>Comments</a>{{/linkTo}}
        {{#linkTo trackbacks tagName="li"}}<a {{bindAttr href="view.href"}}>Trackbacks</a>{{/linkTo}}
    </ul>
    {{outlet}}
</script> 
```

评论和引用路线基本相同：

```
App.CommentsRoute = Em.Route.extend({
    setupController: function (controller, model) {
        comments = this.controllerFor('post').get('comments');
        controller.set('content', comments);
    },
    renderTemplate: function () {
        this.render({
            into: 'post/show'
        });
    }
}); 
```

我的问题是关于**renderTemplate**：我想将**评论**模板渲染到帖子**/显示模板的****出口**，但这不起作用。当我用另一个现有模板（例如**application**、**posts**、**post ）替换****into**值时，我确实看到了**评论**。

 ******我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:37:09.967

帮助调试路由器问题的一种好方法是打开路由器日志记录：

```
window.App = Em.Application.create({
    LOG_TRANSITIONS: true
}); 
```

这可以让您看到您正在过渡到哪条路线。在您的情况下，当导航到评论部分时，它会显示：

```
Transitioned into 'posts.index'
Transitioned into 'posts.post.show'
Transitioned into 'posts.post.comments' 
```

这意味着`post.show`当您过渡到该路线时，您的路线未激活`comments`，这就是您无法渲染到其`{{outlet}}`.

由于您没有将`post`模板用于任何实际内容，因此您可以将`post/show`模板重命名为`post`并摆脱`show`路由。这可以确保当您要插入`comment`or`trackback`模板时该模板仍然存在。

```
App.Router.map(function () {
    this.resource('posts', function () {
        this.resource('post', {
            'path': '/:post_id'
        }, function () {
            this.resource('comments');
            this.resource('trackbacks');
        });
    });
}); 
```

由于您将模板从 更改`post/show`为`post`将`postController`包含从 传递的帖子`posts`，因此您可以删除`controllers.post`并直接访问帖子的属性：

```
<script type="text/x-handlebars" data-template-name="post">
...
<h3>{{title}}</h3>
<p>{{description}}</p>
....
</script> 
```

现在您所要做的就是更新要渲染的目标路由，现在只需`post`：

```
renderTemplate: function () {
    this.render({
        into: 'post'
    });
} 
```

[工作 JSFiddle](http://jsfiddle.net/SM5VM/21/)

**更新**

您可以将`show`路由渲染到`posts`路由中，该路由将`post`用您的模板替换`post/edit`模板：

[更新了 JSFiddle](http://jsfiddle.net/SM5VM/25/)

```
App.Router.map(function () {
    this.resource('posts', function () {
        this.resource('post', {
            'path': '/:post_id'
        }, function () {
            this.route('edit');
            this.resource('comments');
            this.resource('trackbacks');
        });
    });
});

App.PostEditRoute = Ember.Route.extend({
    renderTemplate: function() {
        this.render({into: 'posts'});   
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:38:09.300

这有点奇怪，但你必须告诉路由`post/show`再次渲染。

这是一个[jsfiddle](http://jsfiddle.net/ryanjm/bfXUJ/1/)。

```
renderTemplate: function () {
    this.render('post/show');
    this.render({
        into: 'post/show'
    });
} 
```

* * *

**更新：**修复链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T11:07:48.260

如果要将模板渲染到不同的命名插座

```
App.PostsRoute = Ember.Route.extend({
  renderTemplate: function() {
    this.render({ outlet: 'posts' });
  }
}); 
```

参考：[Ember 文档](http://emberjs.com/guides/routing/rendering-a-template/)******

# html - 后台 div 中的视频在 IE 上不起作用

> ID：15146632
> 
> 赞同：2
> 
> 时间：2013-02-28T22:08:16.223
> 
> 标签：html, internet-explorer, css, video, html5-video

所以我试图在我的投资组合网站上实现这个非常酷的效果，它是一个在背景 div 中播放的循环视频（无音频）。我从这个网站得到了这个想法：http: [//www.eclarify.com](http://www.eclarify.com)

我能够让它在**除 IE 之外的**所有浏览器中运行（以及 iOS/Nexus，但我会为它们找出一个静态图像后备）。

但是，我可以在我的 IE 上看到在[eclarify](http://www.eclarify.com/)上播放的视频，但我找不到他们使用什么来启用跨浏览器功能。

**这是我的网站： http:** [//leongaban.com](http://leongaban.com) | **我的 CodePen：** [http ://codepen.io/leongaban/pen/IBpyb](http://codepen.io/leongaban/pen/IBpyb)

**HTML：**

```
<div class="clouds">
    <video width="1920" height="1080" autoplay="autoplay" loop="loop" preload>
        <source src="videos/clouds.mp4" type="video/mp4" >
        <source src="videos/clouds.ogg" type="video/ogg" >
        <source src="videos/clouds.webm" type="video/webm" >
        <object data="videos/clouds.mp4" width="1920" height="1080">
            <param name="wmode" value="transparent">
            <param name="autoplay" value="true" >
            <param name="loop" value="true" >
            <embed src="videos/clouds.swf" width="1920" height="1080" wmode="transparent" >
        </object>
    </video> 
</div>

<header>
    <div id="main-nav">
        <ul>
            <li><a href="#content">Portfolio</a></li>
            <li><a href="#footer">Contact</a></li>
            <li><a href="#">Resume</a></li>
         </ul>
    </div>

    <div id="logo-title">
        <img src="images/leon_gaban.png" width="256" height="256" class="avatar" />

        <h1>Hello, I'm Leon Gaban</h1>
        <h2>Web Designer &amp; Developer</h2>
        <h3>I believe that successful design succeeds in telling the best story</h3>
    </div>
</header> 
```

**CSS：**

```
div.clouds {
    position:absolute;
    z-index:1;
    margin:0 auto;
    width:100%;
    overflow: hidden;
}
div.clouds video, div.clouds object, div.clouds embed {
    /*width: 100%;*/
    width: 2000px;
    height: auto;
    min-width: 720px;
    margin: 0 auto;  
}

header {
    width: 100%;
    height: 650px;
    margin: 0 auto;
    position:relative;
    z-index:2;
    /*background: #ededed;*/
    /*border-bottom: 1px solid #ccc;*/
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:49:20.380

我分叉了你的 CodePen 并用 eClarify 资产替换了你的视频资产，这证实了我怀疑你的视频资产给我们带来的问题。请参阅[http://codepen.io/Lafinboy/pen/AhFlt](http://codepen.io/Lafinboy/pen/AhFlt)。

我建议减小视频资产的大小（文件和物理）并再次导出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:05:11.363

Internet Explorer 无法将视频格式识别为可以在`<video>`-tag 中播放的内容。如果您尝试直接打开视频，例如“ [/videos/clouds.mp4”，IE](http://leongaban.com/videos/clouds.mp4)会显示一个对话框以使用 Windows Media Player 播放它。因此，您可以尝试并且最有可能帮助的是在您的`.htaccess`-file 中明确添加视频格式，如下所示：

```
AddType video/mp4 .mp4
AddType video/webm .webm
AddType video/ogg .ogv 
```

# asp.net - 从 javascript/html 调用和解释 ASP webservice

> ID：15146633
> 
> 赞同：0
> 
> 时间：2013-02-28T22:08:17.070
> 
> 标签：asp.net, web-services, xml-parsing

所以我想在非 ASP 站点上调用 ASP.net 网络服务......我以前从未做过这样的事情（我唯一一次调用 ASP 网络服务是来自一个 ASP 应用程序，它有一个 .config我不知道如何在直接的 hmtl/javascript 站点中复制的文件）。有人可以指出我正确的方向吗？老实说，我不知道从哪里开始寻找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:15:27.390

如果您搜索“javascript SOAP 客户端”，您会发现一些实现。就个人而言，我不会那样做，对我来说似乎是错误的。

我建议编写一个 ASP.NET WebAPI（或常规 MVC）服务，作为 SOAP 服务的代理。您的 javascript 将对 WebAPI 服务进行 JSON 调用，进而对实际服务进行 SOAP 调用。

这样，您可以使用 Visual Studio 或 SDK 工具从 WSDL 构建代理类，并使用常规方法进行 Web 服务调用。您需要构建的唯一真实代码是控制器中的代理方法。

如果这样做，您需要确保将服务放在与现有网站相同的域中，以便 AJAX 调用成功，因为跨域 AJAX 并非在所有情况下都有效。

# matlab - 可以通过脚本中的语句停止 Matlab M 脚本吗？

> ID：15146643
> 
> 赞同：22
> 
> 时间：2013-02-28T22:08:59.387
> 
> 标签：matlab

一个非常简单，也许很明显的问题：如何使用脚本中的语句中止执行 Matlab M 脚本？

这类似于`return`在函数中间调用以立即结束它。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-01T00:17:56.900

如果[`return`](http://www.mathworks.com/help/matlab/ref/return.html)不是你想要的，我想你想用[`break`](http://www.mathworks.com/help/matlab/ref/break.html)

break 终止 Matlab 代码的执行。例如，循环中出现在 break 语句之后的语句不会被执行。

在嵌套循环中，break 仅从它发生的循环中退出。控制传递到该循环结束之后的语句。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-01T15:08:56.343

从 Matlab R2015b 开始`break`，不能再使用预终止脚本。A`break`现在只能用于 for 循环。代码将不会运行，并且会引发错误。这在技术上总是正确的，但现在已经强制执行。

正确的方法是使用`return`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-10T09:28:20.660

是的，您可以在

> 返回;

Return 像在函数中一样在 Matlab 脚本中工作。

例如

```
 function [ point ] = PointDoubling( x,y,p,a )
    %UNTITLED2 Summary of this function goes here
    %   Detailed explanation goes here
    if y==0
        point='Not calculated';
        return;
    end
    a2=(3*(x^2))+a;
    b2=(2*y);
    i=1;
    while 1
        if mod(b2*i,p)==1
        break;
    end
        i=i+1;
    end
    s=mod(a2*i,p);
    x1=mod(((s^2)-(2*x)),p);
    y1=mod(((-y)+(s*(x-x1))),p);
    point=[x1,y1];
    end 
```

# c# - LightSwitch RIA 服务：当实体字段的类型在单独的程序集中定义时，更新数据源屏幕中出现错误“无法加载类型”

> ID：15146650
> 
> 赞同：0
> 
> 时间：2013-02-28T22:09:35.020
> 
> 标签：c#, ria, visual-studio-lightswitch

我在 VS 2012 中有一个 LightSwitch 项目，该项目具有对程序集的 RIA 数据源引用`Pbs.OpportunityTracker.Ria`。该程序集的域服务中的一个实体具有枚举类型的属性，该属性`AppointmentStatus`在另一个程序集中定义，名为`Pbs.Crm`。 `Pbs.OpportunityTracker.Ria`引用该程序集并构建良好。但是，当我去 LightSwitch 项目更新数据源时，对话框出现错误：`Could not load type 'Pbs.Crm.Repository.AppointmentStatus' from assembly 'Pbs.Crm, ...'`.

似乎 LightSwitch 设计器只能处理直接在 RIA 程序集中定义的类型。移动枚举类型不是一种选择，定义第二个枚举类型需要对自定义 QueryProvider 进行一些相当棘手的修改，尽管它是可行的。不过，这并不理想。任何人都知道此限制背后的原因以及是否有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:41:44.230

这似乎是 LightSwitch 设计器中的一个错误。由于不支持枚举以及其他非内置类型，LightSwitch 设计器的创建者没有考虑到实体字段可以在另一个程序集中定义的可能性。尽管如此，这个错误消息还是令人困惑和误导，掩盖了真正的错误，即不支持枚举类型。

# jquery - Kendo Dropdownlist 没有在第一条记录上更新 Kendo Grid 数据源？

> ID：15146653
> 
> 赞同：3
> 
> 时间：2013-02-28T22:09:43.120
> 
> 标签：jquery, drop-down-menu, kendo-ui, datasource, kendo-grid

这是我的问题...

我希望有一个下拉列表绑定到我的网格，如下所示：

* * *

```
{
     field: "ContactTypeId",
     hidden: true
},
{
     field: "ContactTypeName",
     title: "Type",
     editor: ContactTypeAddressCombo
} 
```

* * *

```
function ContactTypeAddressCombo(container, options) {
                $('<input placeholder="A" data-bind="value:ContactTypeId"/>')
                .appendTo(container)
                .kendoDropDownList({
                    autoBind: false,
                    dataTextField: "Name",
                    dataValueField: "ContactTypeId",
                    dataSource: {
                        type: "json",
                        serverFiltering: true,
                        transport: {
                            read: {
                                contentType: "application/json; charset=utf-8",
                                type: "POST",
                                url: "../Services/svcContact_Type.asmx/Search",
                                dataType: "json",
                                cache: false
                            },
                            parameterMap: function(options, operation) {
                                options.AddressFlag = 1;
                                options.PhoneFlag = 1;
                                options.EmailFlag = 1;
                                return kendo.stringify(options);
                            }
                        },
                        schema: {
                            data: "d"
                        }
                    },
                    index: 0
                });
            } 
```

* * *

一切正常，**除了**当我向网格添加新行时。下拉列表加载正常并选择了一个项目，但除非我更改为另一个项目，否则网格将无法识别所选项目（即使选择了一个项目，网格的数据源也会发送 0）。

一种解决方案是让第一个项目始终为“选择一个”，值为 0，这将强制用户选择一个项目。但这远非理想。所以……还有其他建议吗？下拉列表是否有某种占位符？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T22:00:21.097

这个问题在互联网上被多次讨论，每个用户都以不同的方式描述它。创建新项目时，您应该设置默认值，以便 MVVM 框架可以正确分配 DropDownList 的选定值，或者您应该在编辑事件的帮助下手动完成。

换句话说 - 您的模型属性不应为空 - 它应该是字符串或数字，否则当您使用 DropDownList 更改值时它不会正确更新（用于 DropDownList 的整个 dataItem 将被分配为值）。

**[这里](http://www.kendoui.com/forums/mvc/grid/in-an-editable-grid-picking-the-first-value-in-a-foreignkey-column-shows-a-blank-cell.aspx)**有更多信息。

# objective-c - Core-Plot 中 y 轴标签的四舍五入数字

> ID：15146658
> 
> 赞同：4
> 
> 时间：2013-02-28T22:09:57.970
> 
> 标签：objective-c, core-plot

我有一个图表区域，我可以选择在其中绘制不同的属性。每个属性都定义了自己的 y 轴范围。下图显示了四舍五入到最近单位的 y 轴标签（看起来不干净）。

![情节](../Images/d417809689831cf206e6004ce37b1091.png)

我该怎么做才能根据所绘制的数据将 y 轴标签四舍五入到最接近的百万分之一、千分之一或百分之一？

我还认为我可以将 y 轴的下限和上限设置为那些四舍五入的数字，这样我以后就可以设置一个偶数增量，从而为我提供那些更好看的标签。我怎样才能得到这些四舍五入的限制？

我现在正在做的设置这些限制如下：

```
 //Look up the absolute minimum and absolute maximum values
    NSNumber * min = [allArraysDrawn valueForKeyPath:@"@min.intValue"];
    NSNumber * max = [allArraysDrawn valueForKeyPath:@"@max.intValue"];
    //Define the limits of the plot area with a cushion both above the max value and below the min value
    float yAxisMin = [min floatValue] - (([max floatValue] - [min floatValue]) * 0.05);
    float yAxisMax = [max floatValue] + (([max floatValue] - [min floatValue]) * 0.05); 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:27:49.363

尝试`CPTAxisLabelingPolicyAutomatic`轴标签策略。它将计算刻度线和网格线的“好”间隔。如果这不令人满意，请使用默认`CPTAxisLabelingPolicyFixedInterval`标签策略并选择`majorIntervalLength`所需的 10 次幂。

# jquery - 向 1 方向滚动时的回调函数

> ID：15146659
> 
> 赞同：0
> 
> 时间：2013-02-28T22:09:58.450
> 
> 标签：jquery

当我向右滚动 300 像素时如何获得回调？

```
<div id="container">

    <div class="scrollable">
        this will be 6000px wide
    </div>

</div> 
```

css

```
#container {width: 900px; overflow: hidden;}
.scrollable {width: 6000px; overflow-x: scroll;} 
```

js（随意重写，我只是尝试这个作为例子）

```
$('#container').scroll(function (evt) {
    var target = $(evt.currentTarget);
    horizontal_scroll = target.scrollLeft();
    if (previous_scroll < horizontal_scroll && horizontal_scroll % 100 == 0) {
        previous_scroll = horizontal_scroll;
        alert("You've scrolled 300px to the right");
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:23:10.757

您可以使用 jQuery 的[$.offset()](http://api.jquery.com/offset/)方法来确定内部移动了多远，`div`并在它超过 -300px（负）时触发警报，如下所示：

```
var alerted = false; // prevents unlimited alerts
$('#container').on('scroll', function(e){
    var el = $(this),
        os = $('.scrollable',this).offset();

    if (os.left <= -300 && alerted !== true){
        alert('Scrolled 300px');
        alerted = true; // prevent unlimited alerts
    }
}); 
```

在这里更新小提琴：http: [//jsfiddle.net/4upYj/](http://jsfiddle.net/4upYj/)

我希望这有帮助！

# glassfish-3 - Spring Web 服务是否支持 Java7？

> ID：15146665
> 
> 赞同：2
> 
> 时间：2013-02-28T22:10:24.370
> 
> 标签：glassfish-3, java-7, spring-ws, xerces, xalan

我们正在将 Java EE 系统的 Java 版本从 1.6 升级到 1.7。我们广泛使用spring webservice（服务器端为1.5.8，客户端为2.0.4）。

初始测试（使用 java7）显示 Web 服务调用出现间歇性问题，如下所示（我们在客户端和服务器上都使用 GlassFish 3.1.2.2，最近升级了）

*   失败1（下面的服务器端日志）

服务器端间歇性故障（服务器 springws-1.5.8 和客户端 spring-ws-2.0.4 - Java 从 1.6 升级到 1.7）

```
java.lang.IllegalStateException: Could not find SAAJ on the classpath
at org.springframework.ws.soap.saaj.SaajSoapMessage.getImplementation(SaajSoapMessage.java:261)
at org.springframework.ws.soap.saaj.SaajSoapMessage.<init>(SaajSoapMessage.java:84)
at org.springframework.ws.soap.saaj.SaajSoapMessage.<init>(SaajSoapMessage.java:70)
at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.createWebServiceMessage(SaajSoapMessageFactory.java:168)
at org.springframework.ws.transport.AbstractWebServiceConnection.receive(AbstractWebServiceConnection.java:86)
at org.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:86)
at org.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:57) 
```

根据我的分析，上述问题似乎是由于 spring ws 1.5.8 版的已知问题引起的 - [https://jira.springsource.org/browse/SWS-750](https://jira.springsource.org/browse/SWS-750)已在 2.0.4 中修复。但是在做版本升级之前，我想确定一下spring ws 是否正式支持Java7。任何想法？无论如何，如果我们将客户端的 java 版本恢复到 1.6，这个问题似乎得到了解决——怀疑这与 jdk7 中打包的 xerces/xalan 版本有关

*   失败2（下面的服务器端日志）

我们在另一个子系统上有类似的错误，其中服务器是 springws-2.0.4，客户端是 spring-ws-1.5.8 - Java 从 1.6 升级到 1.7。

```
org.springframework.ws.transport.http.MessageDispatcherServlet: Could not complete request
org.springframework.ws.soap.saaj.SaajSoapEnvelopeException: Could not access envelope: Unable to create envelope from given source: ; nested exception is com.sun.xml.messaging.saaj.SOAPExceptionImpl: Unable to create envelope from given source:
at org.springframework.ws.soap.saaj.SaajSoapMessage.getSaajVersion(SaajSoapMessage.java:260)
at org.springframework.ws.soap.saaj.SaajSoapMessage.getImplementation(SaajSoapMessage.java:342)
at org.springframework.ws.soap.saaj.SaajSoapMessage.<init>(SaajSoapMessage.java:117)
at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.createWebServiceMessage(SaajSoapMessageFactory.java:184)
at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.createWebServiceMessage(SaajSoapMessageFactory.java:58)
at org.springframework.ws.transport.AbstractWebServiceConnection.receive(AbstractWebServiceConnection.java:90) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:30:01.373

我们正在使用 Tomcat7、JDK7 和 Spring-WS 2.1.2，它可以工作。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-02T09:34:31.893

我们在 WebLogic 上部署的生产系统中使用 Spring-WS 2.2.3 和 Java 8，我们没有任何问题。所以，我想说 Java 7 得到了很好的支持！

# git - Maven SCM 插件无法在 scm:checkout 后执行 scm:update 并带有模糊的错误消息

> ID：15146666
> 
> 赞同：1
> 
> 时间：2013-02-28T22:10:36.230
> 
> 标签：git, maven, version-control, maven-scm-plugin

我已经配置了一个 Maven 项目以使用以下方式签出一个项目：

```
<scm>
    <developerConnection>scm:git:git@git.github.com:example/myproject.git</developerConnection>
</scm> 
```

使用： mvn scm:checkout

该项目检查良好。

我希望如果 scm:checkout 有效， scm:update 也应该有效。但事实并非如此。通过使用“-e”选项 (mvn -e scm:update) 运行以获取完整的堆栈跟踪，它将显示一些模糊的错误消息：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-scm-plugin:1.8.1:update (default-cli) on project mysampleproject: Command failed.The git-log command failed. -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-scm-plugin:1.8.1:update (default-cli) on project mysampleproject: Command failed.The git-log command failed.
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Command failed.The git-log command failed.
    at org.apache.maven.scm.plugin.AbstractScmMojo.checkResult(AbstractScmMojo.java:439)
    at org.apache.maven.scm.plugin.UpdateMojo.execute(UpdateMojo.java:93)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

现在这个错误应该告诉我什么？这可能是 Maven-scm-Plugin 中的错误吗？因为“git-log”当然不存在，它的“git log”会给你 Git 日志历史。

此外，给定的帮助链接也无济于事（从我的角度来看）。

# fonts - 我的终端里有啤酒：怎么样？

> ID：15146668
> 
> 赞同：40
> 
> 时间：2013-02-28T22:10:41.690
> 
> 标签：fonts, console, homebrew

Brew 在我的终端中放了一张小啤酒的照片？！？！![在我的终端中酿造](../Images/67adbc0952d813247f64e668812ab0e0.png)

它是如何做到的？我什至没有。但我需要知道，因为我未来所有的命令行应用程序也必须在它们的输出中放入小图片。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-28T22:23:57.977

它可能只是一个Unicode字符。在我的终端中，这有效：

```
$ echo -e "Hello, \xF0\x9F\x8D\xBA"
Hello, 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T22:24:07.993

它输出 Unicode 字符 U+1F37A (BEER MUG)，它在“杂项符号和象形文字”（*又名*.Emoji）范围内。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T22:35:56.667

不幸的是，正如在[这篇博客](http://www.kirsle.net/blog/kirsle/please-don-t-use-emoji)中所讨论的那样，我们 Linux 用户将无法像那些运行 OSX 的人一样欣赏这个问题的幽默......

要查看您的操作系统支持哪些表情符号，请查看[维基百科](http://en.wikipedia.org/wiki/Emoji)关于该主题的文章。

# java - byte[] 到 String 再到 byte[]

> ID：15146670
> 
> 赞同：1
> 
> 时间：2013-02-28T22:10:50.453
> 
> 标签：java, bytearray

这是我想要做的。我有一个 byte[] 需要用键（比如 key1）存储在 Redis 中，Redis 会将其存储为字符串。我需要在通过 key1 检索值时重建 byte[]

```
 //here is a byte array
    byte[] bArr = new byte[] {83, 71, 86, 115, 98, 71, 56, 103, 84, 88, 73, 117, 73, 69, 104, 118, 100, 121, 66, 107, 98, 121, 66, 53, 98, 51, 85, 103, 90, 71, 56, 47}; //"Hello World"; 

    // I will have to store this as a byte string into redis
    //Base64 encoding
    bArr = Base64.encodeBase64(bArr);
    String storeStr = Arrays.toString(bArr) ;
    // storeStr is what gets stored in redis
    System.out.println("storeStr>>" + storeStr+ "<<");
    // I will get this string back from redis
    // now trying to reconstruct the byte[]
    byte[] aArr = Base64.decodeBase64(storeStr); 
    System.out.println("readStr>>" + Arrays.toString(aArr)+ "<<"); 
```

但我得到以下输出：

> storeStr>>[85, 48, 100, 87, 99, 50, 74, 72, 79, 71, 100, 85, 87, 69, 108, 49, 83, 85, 86, 111, 100, 109, 82, 53、81、109、116、105、101、85、73、49、89、106、78、86、90、49、112、72、79、67、56、61]<< readStr>>[-13 , -98, 60, -41, 77, 60, -17, -33, 121, -45, -66, 59, -37, -65, 123, -41, 93, 52, -13, -97, 59、-21、-35、116、-13、-113、124、-33、-50、124、-21、93、117、-41、77、53、-45、-33、54、-25 , 127, 53, -41, 79, 117, -41, -83, 116, -25, 93, 53, -13, -98, -9, -29, -33, 61, -41, 78, - 69、-13、-50、-67、-45、-113、117、-41、110、-10、-17、-34、-69、-25、-82、-75]<<

我究竟做错了什么？有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T22:22:46.840

`Arrays.toString()`不会将字节数组转换为字符串。它提供了一个字节数组的字符串表示，用于调试目的，就像`List<Byte>.toString()`这样做一样。

`Base64.encode()`应该将字节数组转换为字符串。并且`Base64.decode()`应该将 base64 字符串转换为相应的字节数组。我见过的所有 Base64 库都内置了这样的方法。你的可能也有一个。如果没有，Base64 包含 ASCII 字符，您可以简单地使用

```
String storeStr = new String(base64Array, "ASCII"); 
```

和

```
byte[] bytes = storeStr.getBytes("ASCII"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:19:55.573

我不知道您使用的是什么 base64 编码器，但是使用 base64 对字节数组进行编码的结果应该*已经*是 a `String`... 同样，当您解码时，它应该将 a 转换`String`为 a `byte[]`。不幸的是，一些 base64 API 在这方面设计得不是很好——

我建议你看看这个[公共领域库](http://iharder.net/base64)，它有一个更明智的 API：

```
byte[] binary = ...;
String encoded = Base64.encodeBytes(binary);

// Send encoded to Redis...

byte[] decoded = Base64.decode(encoded); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-25T16:01:08.387

Remember, base 64 is called that because it has a radix of 64 (64 possible values). That means each character is 2^6, or 6 bits. **Redis supports binary safe strings**, so it can take even non-printing characters. There is no reason to limit ourselves to 64 pretty printing, websafe characters (why people use B64).

The other problem is ASCII is `0-127`, but byte is `-128 to 127`, so we can't map directly, we lose half the range (2^8 vs 2^7). If we use UTF-8, we get all those bits, so 2^8 or radix 256\. The result is we can stuff one byte into 1.25 B64 characters, or a single UTF-8 character. Thus, UTF-8 encoding will use ~75% of the space as the B64 encoded data. Below we get better than that because of all the extra padding `=` characters B64 uses.

Example, encoding 19 bytes:

**B64** String: **28** characters

**UTF8** String: **19** characters (32% savings!)

```
// setup
byte[] bytes = new byte[]{-10, 1, 3, 85, 48, 100, 87, 99, 050, 74, 79, 71, 100, 85, 87, -120, 108, -128, 30};

// full UTF-8 range
String outFullRange = new String(bytes, "UTF-8");
System.out.println(outFullRange); // prints �U0dWc(JOGdUW�l�

// just Base64
String outB64 = Base64.encode(bytes);
System.out.println(outB64);// 9gEDVTBkV2MoSk9HZFVXiGyAHg== 
```

Remember, since Redis is in memory, and memory is precious, you might want to switch binary data to UTF-8 encoding once you app starts to fill up for some quick space savings. The downside is that it's not as human readable as B64.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T22:49:02.777

您可以使用构造函数从 byte[] 创建字符串：

```
//assuming you have a byte[] bytes
String string = new String(bytes); 
```

然后将其写回：

```
byte[] bytes = string.getBytes(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-31T05:27:23.173

使用这2个函数进行转换和转换回

```
Convert.ToBase64String(en)

Convert.FromBase64String(input) 
```

它桥接了字节和字符串之间的链接。并确保没有数据添加或丢失。这是一个特殊的字符串。

[https://en.wikipedia.org/wiki/Base64](https://en.wikipedia.org/wiki/Base64)

# c - 在 C 中，每次使用 scanf 清除缓冲区时都应该使用 FLUSH 吗？

> ID：15146672
> 
> 赞同：0
> 
> 时间：2013-02-28T22:10:58.677
> 
> 标签：c, while-loop, buffer, scanf

正如标题所说，我应该使用

```
while(getchar() != '\n'); 
```

每次我使用scanf？有人可以解释背后的逻辑吗

```
while(getchar() != '\n'); 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T22:16:30.560

不，您通常不需要这样做。您发布的循环读取字符，`stdin`直到遇到不是`\n`. 你写它的方式，最后一个非换行符就像换行符一样**丢失了。**

可以通过以下方式避免典型问题或“冲洗”需求：

*   不`scanf`与其他输入法混合使用。例如，不要将其与`fgets`
*   前面带有空格的格式说明符，其中空格不会被忽略并且您希望它被忽略

例如，忽略空格，而不是`scanf("%c"...)`使用`scanf(" %c"..)`.

* * *

除此之外，当您有复杂的输入要读入时，您可能希望：

*   使用 读取整个字符串`fgets`，然后您可以使用`sscanf`等进行解析`strtok`。它可能看起来很矛盾，建议`sscanf`哪里`scanf`不足。关键是一旦你使用 安全地存储了完整的字符串`fgets`，你就有更多的自由来分析它，抛出不匹配的部分，在`strchr`这里和那里做一个等等

*   使用更适合该工作的语言（带有库），如 python 或 perl 将任务简化为更简单的问题

*   使用成熟的词法分析器

# rest - 在 GWT 上从客户端调用 REST 并避免跨域限制

> ID：15146678
> 
> 赞同：0
> 
> 时间：2013-02-28T22:11:20.180
> 
> 标签：rest, google-app-engine, gwt

我使用 Google App Engine 和 GWT 开发了一个 WEB 应用程序，它对我公司内部的一个内部[RT](http://requesttracker.wikia.com/wiki/REST)服务进行 REST 调用。我使用[RT-Rest](https://github.com/bboksa/RT-REST) API 从服务器端进行调用。

问题来了，出于内部安全原因，我们必须使用 VPN 访问此 RT 服务，因此不允许来自 App Engine Server 的调用。我决定移动这个逻辑并从客户端拨打电话，只要每个人都应该在他们的计算机上安装 VPN。但是当我们在不同的域中工作时，我发现了不允许跨域调用（CORS）的问题。

此时我被卡住了，我无法从服务器拨打电话，因为 VPN 不便，也不能从客户端拨打电话，因为 CORS。而且我无权修改 REST 服务以`Access-Control-Allow-Origin`在响应中添加标头。

一切都说我能做的事情并不多，但也许我错过了一些东西，或者有人有一个好主意来解决不便并拨打 RT 服务。

任何建议都会非常有用。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:15:03.390

您可以使用安全数据连接器将 AppEngine 连接到防火墙后面的服务：

[https://developers.google.com/secure-data-connector/](https://developers.google.com/secure-data-connector/)

# python - collide.rect 在 pygame 中是如何工作的

> ID：15146679
> 
> 赞同：2
> 
> 时间：2013-02-28T22:11:31.693
> 
> 标签：python, pygame, collision-detection

我在理解colliderect如何与精灵一起工作时遇到了一些麻烦。我对此有一个好主意，但是每当我尝试将其实现到我的游戏中时，我都会收到错误消息“attributeError:'pygame.surface' object has no attribute 'rect'”

```
ufo_lvl_1 = pygame.image.load("ufo1.png") 
bullet = pygame.image.load("bullet.png")

class Bullet(pygame.sprite.Sprite):

    def __init__(self):
    # Call the parent class (Sprite) constructor
        pygame.sprite.Sprite.__init__(self) 

        self.image = bullet
        self.damage = 5
        self.rect = self.image.get_rect()

    def update(self):
        if 1 == 1:
            self.rect.x += 15
        if self.rect.x >1360:
            self.kill()

class ufo1(pygame.sprite.Sprite):

    def __init__(self):

        pygame.sprite.Sprite.__init__(self)

        self.image = ufo_lvl_1
        self.health = 10
        self.rect = self.image.get_rect()
    def update(self):
        if 1==1:
            self.rect.x  -= 10
            if self.rect.colliderect(bullet.rect):
                self.health -= bullet.damage
                if self.health >= 0:
                    self.kill()
                bullet.kill() 
```

基本上我所有的精灵都可以工作（不包括 ufo1），但是当我创建一个 ufo1 精灵时它崩溃了，我不知道如何修复它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:11:09.227

你调用了你的类 Bullet 和你的 Surface 类的子弹。当您调用 colliderect 时，您正在检查项目符号而不是 Bullet 或任何您命名的类 Bullet 对象

# php - 我的 php 脚本被操作系统自动杀死（DEBIAN）

> ID：15146687
> 
> 赞同：0
> 
> 时间：2013-02-28T22:11:54.733
> 
> 标签：php, debian, system-administration

我有一个 php 脚本在 10 分钟后被操作系统（debian）杀死

我不希望它被杀死

有人告诉我，我的服务器可能有一个任务监视器，它可以杀死长时间运行的进程以防止锁定。

我不知道如何访问任务监视器以及如何禁用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:16:49.190

Apache 错误日志说什么？

如果您有错误：

```
Fatal error: Maximum execution time of ... 
```

那么你必须关闭 PHP 脚本执行时间的限制，可以这样设置：

```
set_time_limit(0); // limit in seconds, 0 for unlimited

while (1)// test loop
{
    $a = 0; 
} 
```

您可以在`php.ini`文件中将此选项设置为`max_execution_time`.

# c# - 将我当前的光标位置显示为当前行和当前列？

> ID：15146693
> 
> 赞同：1
> 
> 时间：2013-02-28T22:12:15.203
> 
> 标签：c#, winforms, cursor

我正在开发使用 以及更多控件的 Windows 窗体应用`RichtextBox`程序`Menustrip`。

我做了一些工作，但无法让它工作。当我的鼠标光标在 RichTextBox 中移动时，我想自动更改位置，就像在简单的记事本上一样。

我的位编码是....

**我想要它，所以当我的鼠标光标移动时，它会改变状态栏上的动态位置**

```
private void sizeToolStripMenuItem_Click(object sender, EventArgs e)
{        
    int line = richTextBox1.GetLineFromCharIndex(richTextBox1.SelectionStart);
    int column = richTextBox1.SelectionStart - richTextBox1.GetFirstCharIndexFromLine(line);
    toolStripStatusLabel5.Text ="Line"+" "+ line.ToString();
    toolStripStatusLabel6.Text = " Column" + " " + line.ToString();
    toolStripStatusLabel3.Text= Cursor.Position.ToString(); // where is my mouse cursor at this Time like that x and y cordinate 330,334
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:10:29.847

每次按回车键时显示您的线路。代码在下面提到:::----

```
private void Key_Down(object sender, KeyEventArgs e)
{
    if (e.KeyData == Keys.Enter)
    {
        int line = richTextBox1.GetLineFromCharIndex(richTextBox1.SelectionStart);
        int column = richTextBox1.SelectionStart - richTextBox1.GetFirstCharIndexFromLine(line);

        toolStripStatusLabel5.Text = "Line" + " " + line.ToString();
        toolStripStatusLabel6.Text = " Column" + " " + column.ToString();
        toolStripStatusLabel3.Text = Cursor.Position.ToString(); // where is my mouse cursor at this Time like that x and y cordinate 330,334
        Update();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:19:59.297

您可以订阅`RichTextBox` `MouseMove`事件以`ToolStrip`使用当前鼠标位置更新标签

例子：

```
private void richTextBox1_MouseMove(object sender, MouseEventArgs e)
{
    toolStripStatusLabel3.Text = string.Format("X={0}, Y={1}", e.X, e.Y);
} 
```

或者，如果您希望它显示相对于您的位置，`RichTextBox`您可以使用`Location`from `MouseEventArgs`，这将返回`RichTextBox`（文本框的左上角 = 0,0）内的位置

```
private void richTextBox1_MouseMove(object sender, MouseEventArgs e)
{
    toolStripStatusLabel3.Text = string.Format("X={0}, Y={1}", e.Location.X, e.Location.Y);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T22:21:41.873

如果你想自动更新位置，你应该使用来自 Richtextbox 的 MouseMove 事件。当您移动鼠标时，它总是在更新。此外，MouseMove 调用中的“MouseEventArgs e”可以为您提供富文本框中的光标位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T23:03:45.193

我在 StackoverFlow 和可爱的用户（程序员）的帮助下完成了。谢谢您的回复。我的代码是

```
private void richTextBox1_MouseDown(object sender, MouseEventArgs e)
    {

        if (e.Button == MouseButtons.Left)
        {
            int line = richTextBox1.GetLineFromCharIndex(richTextBox1.SelectionStart);
            int column = richTextBox1.SelectionStart - richTextBox1.GetFirstCharIndexFromLine(line);

            toolStripStatusLabel5.Text = "Line" + " " + line.ToString();
            toolStripStatusLabel6.Text = " Column" + " " + line.ToString();
            toolStripStatusLabel3.Text = Cursor.Position.ToString(); // where is my mouse cursor at this Time like that x and y cordinate 330,334
            Update();

        }

    } 
```

# c++ - 通过 out 参数处理错误会导致内存泄漏吗？

> ID：15146696
> 
> 赞同：0
> 
> 时间：2013-02-28T22:12:24.063
> 
> 标签：c++, memory-leaks, error-handling

我目前正在学习/使用 c++，但我来自 Java 背景，所以如果这是一个愚蠢的问题，我深表歉意。下面是一些代码，表示我处理由外部 API 生成的错误的方式。但是，我不确定当我为我的错误处理输出参数赋值时是否会导致内存泄漏。

```
class ExceptionHandler {

private:
    std::string _msg;
    int _code;

public:
    ExceptionHandler(std::string msg = "", int code = 0) : 
         _msg(msg),
         _code(code)
    {
    }

    int code() {
        return _code;
    }
    std::string msg() {
        return _msg;
    }

}

 //This method returns true if it was executed with no errors
 //It returns false if an error occurred

    bool foo(ExceptionHandler * errHandler = NULL) {

        int sts; 

        //The API functions return 0 if completed successfully
        //else they returns some error code

        sts = some_api_func1();

        if(sts != 0) { //An error occurred!
            if(errHandler) {
                ExceptionHandler handler("Error from func1",sts);
                *errHandler = handler; //<--- Will this cause a memory leak since I would be losing errHandler's original value??
            }
            return false;
        }

        //My motivation for using exception handling this way is that I can 
        //set the handler's message based on what part it failed at and the 
        //code associated with it, like below:

        sts = some_api_func2();

        if(sts != 0) { //An error occurred!
            if(errHandler) {
                ExceptionHandler handler("Error from func2",sts); //<--- Different err message
                *errHandler = handler; //<--- But does this cause a memory leak?
            }
            return false;
        }

        return true;
    }

//Main method

int main() {
    ExceptionHandler handler;

    if(!foo(&handler)) {

        std::cout << "An exception occurred: (" << handler.code() << ") " << handler.msg() << std::endl;

    } else {

        std::cout << "Success!" << std::endl;

    }

} 
```

*   如果发生错误，方法 'foo()' 会导致内存泄漏吗？

*   如果是这样，我该如何解决？如果没有，怎么没有？

*   这是处理错误的好方法吗？

先感谢您！

**编辑**

我了解到上面的代码不会产生内存泄漏，但下面的代码是处理错误的更好方法（谢谢大家！）：

```
void foo() {

    int sts;

    sts = some_api_func1();

    if(sts != 0) 
        throw ExceptionHandler("Error at func1",sts);

    sts = some_api_func2();

    if(sts != 0)
        throw ExceptionHandler("Error at func2",sts);
}

int main() {

    try {
        foo();
        std::cout << "Success!";
    } catch(ExceptionHandler &e) { //<--- Catch by reference
        std::cout << "Exception: (" << e.code() << ") " << e.msg();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:43:19.823

```
ExceptionHandler handler;
if (!foo(&handler)) {
    //...
} 
```

定义一个具有自动存储持续时间的对象，其地址被传递到`foo`函数中。顺便说一句，如果你知道你总是将参数传递给函数，那么通过引用而不是指针传递它。

```
bool foo(ExceptionHandler * errHandler = NULL) {
    ExceptionHandler handler("Error in foo", 1);
    *errHandler = handler;
} 
```

还会创建另一个`ExceptionHandler`具有自动存储持续时间的实例，因此一旦执行超出范围，该对象就会被销毁。但没关系，因为使用了默认赋值运算符，它将's 数据成员`*errHandler = handler;`的值复制到指向的对象中，因此在这种情况下**没有内存泄漏。**`handler``errHandler`

 **> *“这是处理错误的好方法吗？”*

不，这不是处理错误的正确方法。改用*异常*。只要确保您最终不会滥用异常作为通过程序传递数据的另一种方式。所以我建议你也看看：[为什么要保守地使用异常？](https://stackoverflow.com/q/1744070/1168156)

其他相关问题：
[C++ 社区是否就何时应使用异常达成共识？](https://stackoverflow.com/q/5609503/1168156)
[“我们不使用 C++ 异常”——还有什么选择？让它崩溃？](https://stackoverflow.com/q/3490106/1168156)

* * *

一旦决定使用异常，请确保***按值抛出并按引用捕获***：

```
if (...)
    throw MyException(...); 
```

在某处：

```
try {
    ...
} catch (MyException& e) {
    ...
} 
```**

# jquery - 'data' 变量未定义 JSTree .bind("hover_node.jstree", function (e, data) event

> ID：15146698
> 
> 赞同：1
> 
> 时间：2013-02-28T22:12:32.527
> 
> 标签：jquery, jstree

`data`变量 in`function (e, data)`总是返回 undefined 。IIRC 它应该是悬停的节点。

```
$("#search").bind("hover_node.jstree", function (e, data) {

    console.log(data); //always 'undefined'

    //This is what I wish would work:
    var node = data.rslt.obj, // the hovered node 
     tree_instance = data.inst; // tree instance

    tree_instance.open_node(node);

}).jstree({
    "core": {
        ...
}); 
```

关于这里有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:38:27.410

我创建了一个解决方法，因为`hover_node`充其量是零星的。我正在使用 json_data 插件，因此节点是动态创建的。所以每次打开一个节点时，检查其子节点是否为叶子节点，然后添加适当的 CSS。在这种情况下，我想在悬停的叶节点上添加一个“开始”按钮。

```
.bind("after_open.jstree", function (data) {

    refreshGoButtonHover();

}); 
```

...

```
function refreshGoButtonHover() {

    $('.jstree-leaf').mouseover(function () {
        $(this).find('.go_button').addClass('visible');
    });

    $('.jstree-leaf').mouseout(function () {
        $(this).find('.go_button').removeClass('visible');
    });
} 
```

# php - 验证插件 - ajax 调用消息

> ID：15146700
> 
> 赞同：0
> 
> 时间：2013-02-28T22:12:35.820
> 
> 标签：php, jquery, jquery-validate

我使用的是 1.9.0 jquery 版本，以及这个验证插件：

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

我想从 PHP 文件中下载 JSON 格式的消息，如下所示：

```
 messages: {
        remote: function() {
            return $.ajax({
                url: 'http://localhost/My/index.php/form/validate/messages',
                type: "POST",
                }).done(function(messages) {
                    return messages;
                }
            );
         }
    } 
```

但是，它根本不起作用，不显示消息，进行 ajax 调用，什么都没有。你能帮我做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:39:10.580

使用`remote`规则时，请参阅文档以获取示例：

[http://docs.jquery.com/Plugins/Validation/Methods/remote#options](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)

该`remote`规则用于将特定字段的内容与您的数据库进行比较……例如检查名称或密码是否已经存在。它**不能**用于简单地将错误消息列表转储回插件。就插件而言，您只是为一条规则设置一条错误消息。见：http: [//jsfiddle.net/zga8y/](http://jsfiddle.net/zga8y/)

我真的不明白你想要做什么的目的。通常，每个规则的错误消息设置一次并且不会更改。

要*动态*更改特定字段上的消息，您可以[使用`rules('add')`方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules). 您甚至不必触碰规则即可覆盖消息。

```
$("#myinput").rules("add", {
    messages: {
        required: "Required input",
        minlength: jQuery.format("Please, at least {0} characters are necessary")
    }
}); 
```

或者，您可以覆盖任何或所有消息，如下所示：

```
jQuery.extend(jQuery.validator.messages, {
    required: "This field is required.",
    remote: "Please fix this field.",
    email: "Please enter a valid email address.",
    url: "Please enter a valid URL.",
    date: "Please enter a valid date.",
    dateISO: "Please enter a valid date (ISO).",
    number: "Please enter a valid number.",
    digits: "Please enter only digits.",
    creditcard: "Please enter a valid credit card number.",
    equalTo: "Please enter the same value again.",
    accept: "Please enter a value with a valid extension.",
    maxlength: jQuery.validator.format("Please enter no more than {0} characters."),
    minlength: jQuery.validator.format("Please enter at least {0} characters."),
    rangelength: jQuery.validator.format("Please enter a value between {0} and {1} characters long."),
    range: jQuery.validator.format("Please enter a value between {0} and {1}."),
    max: jQuery.validator.format("Please enter a value less than or equal to {0}."),
    min: jQuery.validator.format("Please enter a value greater than or equal to {0}.")
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:33:48.367

试试这样：

```
$.ajax({
        url: 'http://localhost/My/index.php/form/validate/messages',
        type: 'POST',
        dataType: 'json',
        success: function (results) {
            //your data here in results
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
         alert("error");
        }
    }); 
```

当显示“错误”时，ServerSide 出现问题。你需要调试它。您可以使用 Firebug 网络控制台检查结果或在浏览器中使用网络控制台。

# android - 如何使自定义方案 url 在电子邮件中可点击？

> ID：15146702
> 
> 赞同：7
> 
> 时间：2013-02-28T22:12:42.590
> 
> 标签：android

如何使自定义方案 url 在电子邮件中可点击？现在只有 http url 是可点击的。

例如：如果我将此链接发送到我的电子邮件，client://blahblahblah 将不会显示为可点击。我想让这个链接在电子邮件中可点击。

谢谢您的帮助。

# sass - @each 带索引的循环

> ID：15146706
> 
> 赞同：76
> 
> 时间：2013-02-28T22:13:02.633
> 
> 标签：sass, each

我想知道您是否可以获得@each 循环的元素索引。

我有以下代码，但我想知道`$i`变量是否是最好的方法。

当前代码：

```
$i: 0;
$refcolors: #55A46A, #9BD385, #D9EA79, #E4EE77, #F2E975, #F2D368, #F0AB55, #ED7943, #EA4E38, #E80D19;

@each $c in $refcolors {
    $i: $i + 1;
    #cr-#{$i} strong {
        background:$c;
    }   
} 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-02-28T22:23:55.160

首先，`@each`函数不是来自 Compass，而是来自 Sass。

* * *

要回答您的问题，这不能通过 each 循环来完成，但很容易将其转换为[`@for`](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#id11)循环，可以执行以下操作：

```
@for $i from 1 through length($refcolors) {
    $c: nth($refcolors, $i);

    // ... do something fancy with $c
} 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2014-06-16T12:31:01.087

要更新此答案：是的，您可以使用`@each`循环实现此目的：

```
$colors-list: #111 #222 #333 #444 #555;

@each $current-color in $colors-list {
    $i: index($colors-list, $current-color);
    .stuff-#{$i} { 
        color: $current-color;
    }
} 
```

资料来源：http: [//12devs.co.uk/articles/handy-advanced-sass/](http://12devs.co.uk/articles/handy-advanced-sass/)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-08-06T15:49:43.293

有时您可能需要使用数组或地图。我有一个数组数组，即：

```
$list = (('sub1item1', 'sub1item2'), ('sub2item1', 'sub2item2')); 
```

我发现将其转换为对象是最简单的：

```
$list: (
    'name': 'thao',
    'age': 25,
    'gender': 'f'
); 
```

并使用以下内容获得`$i`：

```
@each $property, $value in $list {
    $i: index(($list), ($property $value)); 
```

sass 团队还推荐了以下内容，尽管我不太喜欢：

> [...] 上面的代码是我想解决的问题。通过添加像 range($n) 这样的 Sass 函数可以提高效率。所以 range(10) => (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)。那么枚举可以变成：

```
@function enumerate($list-or-map) {
    @return zip($list-or-map, range(length($list-or-map));
} 
```

[关联。](https://github.com/sass/sass/issues/996#issuecomment-32000596)

# maven - Maven 依赖插件 appendOutput 参数失败？

> ID：15146709
> 
> 赞同：0
> 
> 时间：2013-02-28T22:13:06.697
> 
> 标签：maven, maven-dependency-plugin

更新：这个问题似乎已经解决了。我仍然可以在源代码的副本上生成它，但它是一个临时副本，我在意识到我需要它来解决这个问题之前删除了它。我将继续跟踪这一点，看看我是否能找出根本原因。如果没有，我会关闭这个问题。

当我`mvn dependency:list -DoutputFile=/path/to/file.txt -DappendOutput=true`从多模块 Maven 项目的根目录运行时，生成的输出文件仅包含在根 pom.xml 文件的模块部分中声明的最后一个模块的依赖项。为了让每个子模块的输出附加到输出文件，我需要做些什么不同的事情吗？

配置：Maven 3.0.3 maven-dependency-plugin 2.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:10:02.840

当我使用以下命令时： -

```
mvn dependency:list -DoutputFile=/path/to/file.txt -DappendOutput=true 
```

结果无效，Maven 告诉我

```
[INFO] --- maven-dependency-plugin:2.1:list (default-cli) @ ... 
```

然后我更改以指定版本

```
mvn org.apache.maven.plugins:maven-dependency-plugin:2.6:list -DoutputFile=/path/to/file.txt -DappendOutput=true 
```

结果是有效的，Maven 告诉我

```
[INFO] --- maven-dependency-plugin:2.6:list (default-cli) @ ... 
```

我建议您确保执行的是***2.6 版本***。无论如何，我总是使用以下命令作为

```
mvn dependency:list > /path/to/file.txt 
```

恕我直言，每个模块的结果更好，更清晰，如下例所示： -

```
 [INFO] Scanning for projects...
    [INFO] -------------------------------------------------------------------
    [INFO] Reactor Build Order:
    [INFO] 
    [INFO] my-parent
    [INFO] my-sub1
    [INFO] my-sub2
    [INFO]
    [INFO] -------------------------------------------------------------------
    [INFO] Building my-parent
    [INFO] -------------------------------------------------------------------
    [INFO] 
    [INFO] --- maven-dependency-plugin:2.1:list (default-cli) @ my-parent  ---
    [INFO] 
    [INFO] The following files have been resolved:
            ...
    [INFO] -------------------------------------------------------------------
    [INFO] Building my-sub1
    [INFO] -------------------------------------------------------------------
    [INFO] 
    [INFO] --- maven-dependency-plugin:2.1:list (default-cli) @ my-sub1   ---
    [INFO] 
    [INFO] The following files have been resolved:
            ...
    [INFO] -------------------------------------------------------------------
    [INFO] Building my-sub2
    [INFO] -------------------------------------------------------------------
    [INFO] 
    [INFO] --- maven-dependency-plugin:2.1:list (default-cli) @ my-sub2    ---
    [INFO] 
    [INFO] The following files have been resolved:
            ...
    [INFO] 
    [INFO] -------------------------------------------------------------------
    [INFO] Reactor Summary:
    [INFO] 
    [INFO] my-parent ........................................ SUCCESS [0.745s]
    [INFO] my-sub1 .......................................... SUCCESS [0.675s]
    [INFO] my-sub2 .......................................... SUCCESS [0.671s]
    [INFO] -------------------------------------------------------------------
    [INFO] BUILD SUCCESS
    [INFO] -------------------------------------------------------------------
    [INFO] Total time: 2.938s
    [INFO] Finished at: Fri Mar 01 17:01:39 ICT 2013
    [INFO] Final Memory: 17M/218M
    [INFO] ------------------------------------------------------------------- 
```

我希望这可能会有所帮助。

问候，

查理·Ch。

# jdo - JDO 共享连接表外键无效

> ID：15146710
> 
> 赞同：0
> 
> 时间：2013-02-28T22:13:10.410
> 
> 标签：jdo, datanucleus

请假设以下映射

```
Class PieChart{
    @Persistent(defaultFetchGroup = "true", table = "chart_metrics_rel")
        @Join(column = "chart_fk")
        @Order(column = "order")
        @Element(dependent = "true", column = "chart_metric_fk")
        @Extensions({ @Extension(vendorName = "datanucleus", key = "relation-discriminator-column", value = "chart_type"),
                @Extension(vendorName = "datanucleus", key = "relation-discriminator-pk", value = "true"),
                @Extension(vendorName = "datanucleus", key = "relation-discriminator-value", value = "pie") })
        private List<ChartMetric> metrics;
} 
```

这可以按预期工作，但问题是我与另一个名为的类具有相同的精确映射，该类`TimeseriesChart`具有另一个具有不同`id`'s 的表。所以`chart_fk`上面显示的映射中的列有时会指向 ，有时会`PieChart`指向`TimeseriesChart`。因此，共享连接表是在`chart_fk`列上使用 2 个外键创建的，一次指向`pie_charts`（即`PieChart`当前类），一次指向`timeseries_chart`（即`TimeseriesChart`）。

`chart_fk`除非该值同时存在于**饼图**和时间序列表中，否则这不允许我将元素添加到连接表中！

我检查了文档并使用了`generateForeignKey`注释属性，`@Join`但它不起作用。

这是属性的描述：

```
generateForeignKey  (String)    ORM:Whether to generate a FK constraint on the join table (when not specifying the name) 
```

那么为什么该属性没有影响，因为仍然生成了外键？

什么名字是`when not specifying the name`指？连接表的还是 FK 的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:34:06.097

由于该供应商扩展显然适用于在同一类型的关系之间共享连接表（根据 DN 文档显示的内容），因此您试图将其应用到不打算使用的地方，因此会出现用户错误。

如果您有两个`List<Chart>`字段，一个有一个子类（PieChart），另一个有不同的子类（TimeseriesChart），那么它可能适用于那里（我们所有的测试都基于相同元素类型的集合），但您没有提供这样的信息。

# xml - 这是什么类型的数据交换格式？

> ID：15146712
> 
> 赞同：0
> 
> 时间：2013-02-28T22:13:12.750
> 
> 标签：xml, json

这是什么类型的数据交换格式？它的使用方式类似于 json 或 xml。

请注意，这是不完整的，但最后每个方括号都整齐地闭合。

```
[
    [
        [
            "a",
            "b",
        ]
    ],
    [
        [
            "xxxxx",
                [
                    "df",
                    "fg"
                ],
                [
                    [
                        "gh", 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:14:25.043

这看起来像 JSON。虽然可能很难使用，因为它看起来不像每个数组元素都是一致的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:15:03.653

这只是[JSON](http://json.org/)。看*第二张*图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T22:17:34.837

据我所知，这是 json，只是很多嵌套数组。

# ruby-on-rails - 在设备中的两个 Web 应用程序之间共享会话

> ID：15146716
> 
> 赞同：1
> 
> 时间：2013-02-28T22:13:22.653
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我有不止一个应用程序。我希望能够使用 cookie_store 在他们之间共享会话。

应用一：

```
before_filter :authenticate_from!

def authenticate_from!
    unless session['warden.user.user.key'].nil?
        @user=User.find_or_initialize_by_id(ky[1])
        sign_in @user
    end
end 
```

它可以工作，但无法识别应用程序 B 会话。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:32:29.700

这可以做到，但是这两个应用程序都需要有一个公共子域，并且`secret_token`您的配置中的值必须相同。

例如，`app1.example.com`只要`app2.example.com`将 cookie 分配给`.example.com`.

用于此的选项存储在`config/initializers/session_store.rb`和中`config/initializers/secret_token.rb`。

请注意，请确保您的秘密令牌值与默认安装一样长且随机。不要只是切换到简短而方便的东西。

# mysql - 如何使用 Play 2.x 对 MySQL 数据库进行单元测试？

> ID：15146723
> 
> 赞同：3
> 
> 时间：2013-02-28T22:13:43.370
> 
> 标签：mysql, database, unit-testing, playframework-2.0, playframework-2.1

我需要测试我的代码是否创建了正确的数据库语句。我知道我可以使用内存数据库运行我的应用程序。它并不完美，但对于这个项目来说已经足够了。我的 SQL 包含 MySQL 特定的东西。

当我运行我的测试时，它会中断包含以下内容的演变：

```
CREATE TABLE `Beaches` (
  `id` INT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`id`)
)
ENGINE=InnoDB;
COLLATE='utf8_general_ci' 
```

如何解决 MySQL 特定语法的问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T22:13:43.370

我找到了一种解决（大多数）MySQL特定内容的方法（问题1。）

```
running(FakeApplication(additionalConfiguration = 
  inMemoryDatabase(options=Map("MODE" -> "MySQL")))) {

  DB.withConnection { implicit c =>
    SQL("""
        CREATE TABLE `Beaches` (
          `id` INT(10) NOT NULL AUTO_INCREMENT,
          `name` VARCHAR(255) NOT NULL,
          PRIMARY KEY (`id`)
        )
        /*! ENGINE=InnoDB; */
        /*! COLLATE='utf8_general_ci' */
        """
    ).execute()
    ok
  }
} 
```

请注意，H2 具有Play 文档[的使用内存 H2 数据库](http://www.playframework.com/documentation/2.1.0/Developing-with-the-H2-Database)部分中所述的一个`MODE=MySQL`。

另一部分是MySQL 文档的[注释语法](http://dev.mysql.com/doc/refman/5.1/en/comments.html)部分中描述的 c 样式注释。

# cloudbees - 在 cloudbees 中部署

> ID：15146728
> 
> 赞同：2
> 
> 时间：2013-02-28T22:14:04.180
> 
> 标签：cloudbees

***我在 cloudbees 的 jboss 中有这个踪迹：***

```
21:29:57,462 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC00001: Failed to start service jboss.deployment.subunit."app.ear"."webapp.war".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.subunit."app.ear"."webapp.war".INSTALL: Failed to process phase INSTALL of subdeployment "webapp.war" of deployment "app.ear"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:121) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [:1.6.0_35]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [:1.6.0_35]
    at java.lang.Thread.run(Thread.java:662) [:1.6.0_35]

Caused by: java.lang.RuntimeException: Could not get class configuration for 
    br.com.mystudies.service.persistence.BackLogDAOBean due to the following errors: 
    Can't find a deployment unit named mystudies-persistence at subdeployment 
    "webapp.war" of deployment "app.ear" 
```

***但我在jenkins中下载了war文件并部署在本地环境中：***

```
18:19:51,614 INFO  [org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator] (MSC service thread 1-6) HHH00130:Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider
18:19:52,104 INFO  [org.hibernate.dialect.Dialect] (MSC service thread 1-6) HHH00400:Using dialect: org.hibernate.dialect.MySQLDialect 
```

更多日志...

```
18:19:54,399 INFO  [org.hibernate.tool.hbm2ddl.SchemaUpdate] (MSC service thread 1-6) HHH00232:Schema update complete
18:19:56,371 INFO  [org.jboss.web] (MSC service thread 1-3) registering web context: /mystudies-web-1.0.0
18:19:56,432 INFO  [org.jboss.as.server.controller] (DeploymentScanner-threads - 1) Deployed "mystudies-web-1.0.0.war" 
```

部署没有问题。

我在谷歌搜索了这个问题，但没有答案。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:15:03.713

您需要确保尽可能在本地运行相同的版本。很难知道它可能是什么。目前仅支持 Web 配置文件。

# git - 在当前目录之外获取 GIT 构建哈希

> ID：15146731
> 
> 赞同：3
> 
> 时间：2013-02-28T22:14:25.707
> 
> 标签：git, cmake

我正在使用 CMake 对我的项目进行核外/源外构建，并希望将“git describe --tags --dirty”的结果作为版本号包含在项目中（仅供参考错误）。但是，任何尝试告诉 git 代码仓库在哪里的尝试都会导致错误，例如“致命：不是 git 存储库（或任何父目录）：.git”。

除了当前工作目录之外，有没有办法指定 git 应该在哪里寻找 repo？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T22:15:52.713

您可以`git`与`--git-dir`-argument 一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T22:16:46.970

您可以`--git-dir`在命令行中指定，或者`GIT_DIR`在环境中设置，或者将路径写入名为`.git`:的文件中，或者`echo gitdir: /path/to/.git > .git`对 repo: 进行软链接`ln -s /path/to/.git`。

（最后两个选项可能是最不可取的，这里只是为了完整起见。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T22:18:52.823

或者您可以使用`WORKING_DIRECTORY`-argument`execute_process()`从 cmake。这就是我所做的：

```
execute_process(COMMAND "${GIT_EXECUTABLE}" describe --tags --dirty
    WORKING_DIRECTORY "${CMAKE_SOURCE_DIR}"
    RESULT_VARIABLE res
    OUTPUT_VARIABLE out
    ERROR_QUIET
    OUTPUT_STRIP_TRAILING_WHITESPACE) 
```

然后我有`${out}`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-09T23:24:44.270

> 您可以在命令行上指定 --git-dir

注意：这在 Git 2.21（2019 年 2 月）之前无法完全正常工作：
“ `git --work-tree=$there --git-dir=$here describe --dirty`”没有正常工作，因为它没有注意用户错误指定的工作树的位置，已更正。

请参阅[Sebastian Staudt ( ) 的](https://github.com/koraktor)[commit c801170](https://github.com/git/git/commit/c801170b0cbc3fdd44331a53c2b7649687625680)和[commit 2ed5c8e](https://github.com/git/git/commit/2ed5c8e174dae73459df11386dc83e8ef4154e3f)（2019 年 2 月 3 日[）](https://github.com/koraktor)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 a1e1900](https://github.com/git/git/commit/a1e19004e11dcbc0ceebd92c425ceb1770e52d0b))^(中，2019 年 2 月 7 日）)[`koraktor`](https://github.com/koraktor)
^([`gitster`](https://github.com/gitster))

> ## `describe`: 设置工作树`--dirty`
> 
> `NEED_WORK_TREE`我们在运行内置时不使用`git-describe`，因为即使在裸存储库中您也应该能够描述提交。但是，该`--dirty`标志确实需要一个工作树。由于我们不调用 `setup_work_tree()`，它使用我们碰巧所在的任何目录。这不太可能与我们的索引匹配，这意味着即使真正的工作树是干净的，我们也会说“脏”。
> 
> 一旦我们`setup_work_tree()`知道用户请求了`--dirty`.
> 
> 该`--broken`选项还需要一个工作树。但是因为它的实现调用`git-diff-index`我们不必在`git-describe`过程中设置工作树。

# c++ - 获取“分段错误：尝试将字符串写入设置器时核心转储

> ID：15146732
> 
> 赞同：0
> 
> 时间：2013-02-28T22:14:37.660
> 
> 标签：c++, core

我有一个我调整大小的动态对象数组。调整大小后，我可以调用 int 和 double 对象的 set 方法，但不能调用任何带有字符串对象的 setter。每当我尝试在调整大小的数组中调用新索引的设置器时，我都会得到一个核心转储。

这是生成错误的代码的主要部分。

```
void resizeAccounts(int newSize, Account *accounts, int acctNum, std::string fName,     :string lName, std::string acctP, double balance)
{       
Account* newArr = new Account[newSize];

for (int i=0; i<newSize-1; i++)
    newArr[i]=accounts[i];

delete [] accounts;
accounts = newArr;
accounts[newSize].setAccountNum(acctNum);
accounts[newSize].setFirstName(fName);
accounts[newSize].setLastName(lName);
accounts[newSize].setAccountPassword(acctP);
accounts[newSize].setBalance(balance);

for(int i=0; i<newSize; i++)
    std::cout << accounts[i].getAccountNum() << std::endl; 
```

我正在使用的二传手

```
void Account::setFirstName( std::string fName) 
{ firstName = fName; }
void Account::setLastName( std::string lName )
{ lastName = lName; }
void Account::setAccountPassword( std::string acctPass)
{ accountPassword = acctPass; }
void Account::setAccountNum( int acctNum)
{ accountNum = acctNum; }
void Account::setBalance( double bal)
{ balance = bal; }` 
```

这是作业，我不允许使用向量或大多数 STL 库。谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T22:16:34.410

数组索引从`0`to运行，`N - 1`因此：

```
accounts[newSize].setAccountNum(acctNum);
      //^^^^^^^^^ 
```

正在访问数组末尾的一个，导致未定义的行为。因此，有效索引`accounts`是`0`to `newSize - 1`。

由于`std::vector`不允许，我不会提及它。完全没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:18:13.853

C++ 使用基于 0 的数组。这意味着当您分配大小数组时，`10`第一个元素位于 index 处`0`，最后一个元素位于 index 处`9`。在这种情况下，您要分配一个大小数组，`newSize`然后访问该`newSize`元素。这不是数组的一部分，因为最后一个元素是`newSize - 1`. 这就是为什么你会崩溃。

# ios - 如何用双指针声明 NSString 的变量

> ID：15146733
> 
> 赞同：6
> 
> 时间：2013-02-28T22:14:39.437
> 
> 标签：ios, objective-c, variables, automatic-ref-counting, double-pointer

我想使用双指针，我试图这样声明。

```
NSString **a; 
```

但是，Xcode 向我显示了错误“指向非常量类型 'NSString *' 的指针没有明确的所有权”并且无法编译。

最后我想做这样的事。

```
NSString **a;
NSString *b = @"b";
NSString *c = @"c";
a = &b;
*a = c;

NSLog(@"%@",b);//I wanna see "c" 
```

请让我知道任何建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T22:24:15.223

更改为此，以便您可以显式指定所有权：

```
NSString *__strong *a;
NSString *b = @"b";
NSString *c = @"c";
a = &b;
*a = c;

NSLog(@"%@",b);//I wanna see "c" 
```

输出：

```
 c 
```

[这是](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#arc-ownership-inference-template-arguments)关于 __strong 的文档。

# autocad - 绘图到 PDF 创建空白白页

> ID：15146734
> 
> 赞同：-3
> 
> 时间：2013-02-28T22:14:40.940
> 
> 标签：autocad

使用 Auto Cad 2012 我正在尝试将布局导出为 PDF，但我得到的是白色 PDF！你能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:31:43.400

您可能遇到此问题的原因有一百万个 (+-)。您提供的信息将其缩小到 1/2 百万。这是其中之一：一切都在不打印的层上。

# php - 使用php返回信息时出错

> ID：15146737
> 
> 赞同：0
> 
> 时间：2013-02-28T22:14:49.393
> 
> 标签：php

我距离完成这个项目只有几步之遥，我的 fetchMessage() 函数中的逻辑似乎有问题，我正在传递 session_id 但是我没有得到任何返回这里是我的函数代码

```
function fetchMessages($session)
{
    $get = ("SELECT * FROM chatRoom WHERE session_id = '$session'");
    $hold = mysql_query($get, $con);

    if($hold)
    {
        return mysql_fetch_array($hold);
    }
} 
```

调用此函数的代码是

```
<?php
include 'core/conection.php';
include 'function.php';

if(isset($_POST['method']) === true && empty($_POST['method']) === false)
{
    $method = trim($_POST['method']);
    $session = trim($_POST['session']);

    if($method === 'fetch')
    {
        $messages = fetchMessages($session);

        if(empty($messages) === true)
        {
            echo 'A representative will be with you shortly';
            echo '<br />';
            echo $session;
        }else
        {
            foreach($messages as $message)
            {
                $ts = $message['timestamp'];
                ?>
                <div class = "message">
                <?php echo date('n-j-Y h:i:s a', $ts); ?>
                <a href = "#"><?php echo $message['username']; ?></a>
                says:<p><?php echo nl2br($message['message']); ?></p>
                </div>
                <?php
            }
        }
    }
}
?> 
```

我知道它至少能做到这一点，因为在这条线上

```
if(empty($messages) === true)
{
    echo 'A representative will be with you shortly';
    echo '<br />';
    echo $session;
} 
```

它显示正确的 session_id 我有一个错误，要么是我的 fetchMessages 函数错误，要么是用于显示错误结果的 html 代码。

# javascript - jquery点击在IE上没有被触发

> ID：15146739
> 
> 赞同：0
> 
> 时间：2013-02-28T22:14:52.883
> 
> 标签：javascript, jquery

我看过很多关于这个问题的帖子，但没有一个解决方案有效。以下..

```
<script type="text/javascript">

$(document).ready(function() {
  $("a.login_linkedinbutton").click(function(){
    $("#signup-form").submit();
    return false;
  });
});

</script> 
```

是我在页面的正文标签中的内容。正文中还有表单，它在 IE 中的 html 显示如下..

```
<form accept-charset="UTF-8" action="/auth/linkedin" class="well form-inline" id="signup-form" method="post">
  <a class="login_linkedinbutton" href="#">Login using Linkedin</a>
</form> 
```

在 IE8 中，单击表单中的链接时，不会触发 jquery。它适用于 Chrome 和 Firefox。我试过了：

1) 使用 live 事件绑定点击动作 2) 将 jquery 移出页面并放入 rails assets

有什么想法可以尝试吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T22:21:21.387

使用`<input type="submit" value="Login using Linkedin">` 为什么要通过使用非标准元素然后尝试从中恢复来制造问题？

如果你想让它看起来像一个链接，只需设置按钮的样式。但为什么要这样做？建议用户在提交表单时转到另一个页面是很差的用户体验。大多数用户在填写表格时避免单击链接，因为他们害怕丢失刚刚输入的内容。

如果你坚持使用该链接，你可以试试这个：

```
var onLinkedInLogin = function(e){
    e.preventDefault(); // stops the link processing
    $("#signup-form").submit();
    // add return false; if you want to stop event propagation also
    // equivalent to calling both, e.preventDefault() and e.stopPropagation().
};

$(document).on('click', 'a.login_linkedinbutton', onLinkedInLogin); 
```

我建议使用`.on()`on的原因`.click()`是我猜在 IE 上，`a.login_linkedinbutton`当您调用`.click()`.

# php - 通过 jQuery 检索 PHP 变量

> ID：15146743
> 
> 赞同：0
> 
> 时间：2013-02-28T22:15:15.230
> 
> 标签：php, jquery, ajax

我知道已经以各种形式提出了这个问题，但我一直无法找到与我想要完成的目标相符的回答。完全是业余爱好者，所以任何额外的指针都值得赞赏。

**任务：**
使用 page1 上的表单将数据发布到 PHP 文件，然后在 MySQL 表中搜索与`$_POST[]`. 然后，PHP 文件将结果回显为`JSON_encode($variable)`. 从那里，PHP 文件将用户重定向回 page1，该页面（理论上）有一个 JQuery 脚本，该脚本`$variable`从 PHP 文件调用并使用数据创建 html。

代码：
PHP

```
<?php
ob_start();
session_start();
session_save_path('path');
mysql_connect("", "", "")or die(); mysql_select_db("db")or die();
$pname = $_POST['country'];
$result = mysql_query("SELECT * FROM project WHERE name = '$pname'");      
$array = mysql_fetch_row($result);  
echo json_encode($array);
header("page1.html");
?> 
```

html/jquery/ajax

```
<script type="text/javascript">// <![CDATA[
$(document).ready( function() {
    $.ajax({
        type: 'POST',
        url: 'page.php',
        data: '',
        dataType: 'json',
        cache: false,
        success: function(result) {
            $('#content1').html(data);
        },
    });
});
// ]]></script>
<div id="content1"></div> 
```

php 脚本工作并回显 JSON 编码变量，但 #content1 上没有任何内容...我感觉我的代码错误，或者在发布到 PHP 文件然后重定向时数据丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:19:08.160

您正在尝试将变量附加`data`到内容中，但该变量被称为`result`. 尝试这个：

```
<script type="text/javascript">// <![CDATA[
$(document).ready( function() {
$.ajax({
type: 'POST',
url: 'page.php',
data: '',
dataType: 'json',
cache: false,
success: function(result) {
$('#content1').html(result);//<- this used to be $('#content1').html(data);
},
});
});
// ]]></script>
<div id="content1"></div> 
```

此外，正如许多人指出的那样，您目前只是在输出 json - 没有任何东西可以生成表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:20:56.953

将 $('#content1').html(data) 更改为 $('#content1').html(result);

# ms-access - 参数查询不返回自动编号控件的值

> ID：15146748
> 
> 赞同：0
> 
> 时间：2013-02-28T22:15:34.960
> 
> 标签：ms-access

我有一个链接到表格的表格。该表单有 4 个文本框：一个链接到自动编号字段，另外三个链接到文本字段。

还有一个子表单，我希望从中启动一个查询（通过按钮和宏），结合子表单的结果和主表单上的控件。当我在参数查询中指定三个基于文本的控件中的任何一个时，这可以正常工作，但是要求第一个（自动编号）控件的值会导致显示符号而不是值。

我不确定哪些具体信息/图像会有所帮助。如果您觉得有帮助，请询问具体信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:56:56.670

我已经在别处得到了答案。我不得不将批处理字段的结果隐式转换为 int。INSERT INTO heat_treat_jobs (card_id, batch) SELECT atheattreat.id, CInt([Forms]![heat_treat_loads]![batch]) AS Expr1 FROM atheattreat WHERE ((((atheattreat.index)=[Forms]![heat_treat_loads]![atheattreat] subform].[Form]![index]));

# mysql - LEFT JOIN MYSQL全文搜索——跨表搜索多列

> ID：15146753
> 
> 赞同：0
> 
> 时间：2013-02-28T22:16:26.393
> 
> 标签：mysql, search

我有两张桌子：

表 1：内容 [title、description、url、genre_id] 表 2：流派 [genre_id、genre_name]

我正在尝试运行 FULL SEARCH 查询，以便如果有人搜索流派，则将返回 Content 的详细信息。同样，如果有人搜索标题，则内容将正常返回。请注意，某些内容没有分配流派，因此需要在这种情况下工作。

这是我的查询 - 我只是不知道如何让它工作......

```
"SELECT content.*, genre.* FROM content LEFT OUTER JOIN genre 
ON (genre.genre_id=content.genre_id) 
WHERE MATCH (content.title, content.description) 
AGAINST ('$query') 
OR MATCH (genre.genre_name) 
AGAINST ('$query') 
AND content.url IS NOT NULL AND content.url <> '' LIMIT $lowerlimit, 10"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:24:16.140

我不熟悉`WHERE MATCH ** AGAINST **`，但我相信它可以重写为：

```
SELECT content.*, genre.*
FROM content
LEFT OUTER JOIN genre 
    ON genre.genre_id = content.genre_id
WHERE (content.title LIKE '%' + '$query' + '%'
    OR content.description LIKE '%' + '$query' + '%'
    OR genre.genre_name LIKE '%' + '$query' + '%')
AND content.url IS NOT NULL
AND content.url <> ''
LIMIT $lowerlimit, 10; 
```

我还在您的查询中注意到，在分号之前的末尾还有一个额外的双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:23:08.937

如果您有没有genre_id 的内容项目，那么INNER JOIN 不是要走的路。这将排除任何没有流派 ID 的内容项目。请改用 LEFT OUTER JOIN。这假设没有流派的流派 ID 没有相应的内容项。如果是后者，您需要在 Content 表中创建某种虚拟行来处理此问题。如果这没有意义，请告诉我，我会给你更多细节。

# batch-file - 创建一个调用 exe 的 bat 文件，该 exe 调用一个调用参数的 php 文件

> ID：15146757
> 
> 赞同：0
> 
> 时间：2013-02-28T22:16:38.553
> 
> 标签：batch-file, command

好吧，我正在尝试创建一个调用 php-cgi.exe 的 bat 文件，其中包含它必须调用的文件以及文件需要的参数：

```
start "C:\Program Files (x86)\php\php-cgi.exe" \\\10.101.3.21\wiki\maintenance\importimages.php C:\wikimages jpg bmp 
```

但我无法让它工作，它会尝试打开 importimages 文件而不是运行它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:35:58.070

首先，检查您使用的操作系统。'start' 命令的语法随着时间的推移而改变。

你曾经能够做到

```
start "iexplore.exe" 
```

现在，您必须在开始的命令之前提供窗口标题：

```
start "Title Goes Here" "iexplore.exe" 
```

此更改是围绕 Windows XP 进行的，因此如果您使用的是 Vista、7 或 8，请记住这一点。

我认为你正在寻找的是这样的：

```
start "" "C:\Program Files (x86)\php\php-cgi.exe \\\10.101.3.21\wiki\maintenance\importimages.php C:\wikimages jpg bmp" 
```

# php - 没有文件扩展名的 Scandir

> ID：15146758
> 
> 赞同：1
> 
> 时间：2013-02-28T22:16:42.183
> 
> 标签：php, scandir

如何在没有文件扩展名的情况下显示文件？目前我得到一个文件，`logo.png`但我只需要文件名`logo`。

```
if (is_dir($dir_path)) {

    $files = scandir($dir_path);

    foreach($files as $file) {

        if ( !in_array( $file, $exclude_all ) ) {

            $path_to_file = $dir_path . $file;
            $extension = pathinfo ( $path_to_file, PATHINFO_EXTENSION );
            $file_url = $dir_url . $file;

            echo 'Path to file: ' . $path_to_file . '<br />';
            echo 'Extension: ' . $extension . '<br />';         
            echo 'URL: ' . $file_url . '<br />';

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:22:42.340

由于 PHP 5.2.0`pathinfo`也可以做到这一点：

```
$bareName = pathinfo($path_to_file, PATHINFO_FILENAME); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:29:41.477

```
$text = "filename.test.php";

echo substr($text, 0, strrpos($text, ".")); //filename.test 
```

# javascript - 从带有命名空间的哈希值调用 Javascript 函数

> ID：15146765
> 
> 赞同：3
> 
> 时间：2013-02-28T22:17:16.240
> 
> 标签：javascript, javascript-namespaces

我目前有这段代码可以在页面加载时从哈希值调用函数：

```
$(function() {
    var hash = window.location.hash.substring(1);
    window[hash]();
}); 
```

这很好用。

但是，我在命名空间中的 Javascript 如下所示：

```
 var help = {
            faq: function () {
                //do stuff
            },

            newFeatures: function () {
                //do stuff
            }
    } 
```

我在顶部列出的函数不适用于命名空间的 javascript。我尝试手动将命名空间添加到前面（so `var hash = "help." + window.location.hash.substring(1);`），但这没有用。

如何在不从命名空间中删除我的 Javascript 的情况下解决此问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T22:19:17.017

这应该有效：

```
$(function() {
    var hash = window.location.hash.substring(1);
    window.help[hash]();
}); 
```

在 JavaScript 中，点表示法和方括号可以互换，只要键是有效的 JavaScript 标识符。（否则，您必须使用方括号。）

所以你也可以这样做（虽然点符号更具可读性）：

```
$(function() {
    var hash = window.location.hash.substring(1);
    window["help"][hash]();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:06:35.780

我正在使用类似的方法，将对象值存储在哈希中。

我的技术：

*   在散列中使用一个点来显示层次结构 - 在您的情况下：#help.faq
*   运行脚本以转换点符号并检索实际值

现场演示：http: [//jsfiddle.net/Kn4w2/1/](http://jsfiddle.net/Kn4w2/1/)

代码示例：

```
var hashArray=hash.split("."),
    myMethod=window;
for (var i=0;i<hashArray.length;i++){
        myMethod=myMethod[hashArray[i]];
} 
```

唯一的限制是您的方法名称当然不应包含点。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-28T22:25:30.633

我不是真正的粉丝，但 'eval' 可能会起作用：

```
eval(hash + "()"); 
```

示例：http: [//jsfiddle.net/pGktd/](http://jsfiddle.net/pGktd/)

# ruby-on-rails - Twitter“无法对您进行身份验证”错误

> ID：15146767
> 
> 赞同：2
> 
> 时间：2013-02-28T22:17:22.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, twitter

我正在将 twitter gem 用于 Rails 应用程序，以便我可以将我的博客文章自动更新到我的 twitter 提要中。

我按照[gem 自述文件的说明](https://github.com/sferik/twitter)，将其放入 config/initializers/twitter.rb 文件中

```
Twitter.configure do |config|
  config.consumer_key = YOUR_CONSUMER_KEY
  config.consumer_secret = YOUR_CONSUMER_SECRET
  config.oauth_token = YOUR_OAUTH_TOKEN
  config.oauth_token_secret = YOUR_OAUTH_TOKEN_SECRET
end 
```

将这些变量更新到 Heroku，在我的 twitter 帐户下注册我的应用程序，为该帐户提供读取、写入和直接访问权限，然后尝试通过 heroku 控制台进行更新，如下所示：

```
Twitter.update("Testing Twitter integration") 
```

不幸的是，我收到此错误：

```
Twitter::Error::Unauthorized: Could not authenticate you 
```

（其次是这些可能无用的细节）：

```
from /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/response/raise_error.rb:21:in `on_complete'
    from /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.6/lib/faraday/response.rb:9:in `block in call'
    from /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.6/lib/faraday/response.rb:63:in `on_complete'
    from /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.6/lib/faraday/response.rb:8:in `call'
    from /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.6/lib/faraday/request/url_encoded.rb:14:in `call'
    from /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.6/lib/faraday/request/multipart.rb:13:in `call'
    from /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/request/multipart_with_file.rb:14:in `call'
    from /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.6/lib/faraday/connection.rb:247:in `run_request'
    from /app/vendor/bundle/ruby/1.9.1/gems/faraday-0.8.6/lib/faraday/connection.rb:112:in `post'
    from /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/client.rb:81:in `request'
    from /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/client.rb:70:in `post'
    from /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/api/utils.rb:82:in `object_from_response'
    from /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter/api/tweets.rb:129:in `update'
    from /app/vendor/bundle/ruby/1.9.1/gems/twitter-4.5.0/lib/twitter.rb:52:in `method_missing'
    from (irb):2
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/console.rb:47:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/console.rb:8:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'irb(main):003:0> 
```

Twitter 肯定至少部分地对我进行了身份验证，因为早些时候，当我没有切换到读/写时，它抱怨说

```
Twitter::Error::Unauthorized: Error processing your OAuth request: Read-only application cannot POST 
```

（为了解决这个问题，我编辑了我的设置并重置了我的 OAuth 密钥）。

我用谷歌搜索过，但我没有找到其他处于相同情况的人。想知道我是否做错了什么，或者我是否只需要等待一下。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:17:12.503

您是否提供了回调网址？

twitter的新更新发生在我身上，即使我没有使用应用程序配置中的回调url，我也遇到了同样的问题，直到我更新它，我结束了添加

[http://www.my-website.com/auth/twitter/callback](http://www.my-website.com/auth/twitter/callback)

我什至没有将其用于本地主机开发，但之后它开始工作。

否则，请使用您的 twitter auth 代码/宝石以及您在 twitter 上的设置更新问题，因为我们可以查看代码并让您知道是否有问题

# css - 我可以使用cubic-bezier() 时间来进行3D 变换反弹吗

> ID：15146773
> 
> 赞同：2
> 
> 时间：2013-02-28T22:17:53.850
> 
> 标签：css, transform, bezier

我正在尝试创建一个子菜单动画，让它从它的父菜单后面放入，就像它在铰链上一样。我希望它稍微超过它的最终静止位置，然后再回来。根据我对`cubic-bezier()`功能符号的理解，这应该是可能的。我不确定这是一个错误还是只是我的误解，但我似乎无法让它工作。我删除了所有供应商前缀（它们在演示中），但这是我正在使用的代码：

## HTML

```
<ul class="nav">
    <li>
        <a href="index.html">Home</a>
    </li>
    <li>
        <a href="about.html">About</a>
        <ul>
            <li>
                <a href="about.html#company">Company</a>
            </li>
            <li>
                <a href="about.html#team">Team</a>
            </li>
        </ul>
    </li>
    <li>
     <a href="contact.html">Contact</a>
    </li>
</ul> 
```

## CSS

```
ul {
    background-color:#99f;
    border-radius:10px;
    list-style:none;
    margin:0;
    padding:0;
}

ul:after {
    clear:both;
    content:'';
    display:block;
    height:0;
    margin:0;
    padding:0;
    width:100%;
}

.nav > li {
    display:block;
    float:left;
    perspective:600px;
    perspective-origin:100% 100%;
    transition:background-color .2s .4s;
}

.nav li a {
    color:#fff;
    display:block;
    padding:20px;
    text-decoration:none;
}

.nav li ul {
    background-color:#bbf;
    border-radius:0 0 10px 10px;
    position:absolute;
    transform:rotateX(-90deg);
    transform-origin:0 0 0;
    transition:transform .4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.nav li:hover {
    background-color:#bbf;
    -webkit-transition-delay:0;
}

.nav li:hover ul {
    transform:rotateX(0);
    transition-delay:.2s;
}

.nav li li {
    white-space:nowrap;
} 
```

[现场演示](http://jsbin.com/ajasax/9/edit)

因此，根据[这篇 MDN 文章](https://developer.mozilla.org/en-US/docs/CSS/timing-function#The_cubic-bezier%28%29_class_of_timing-functions)中的信息，Y 轴上的值`cubic-bezier()` *可以*大于 1，从而产生反弹效果。从理论上讲，这意味着`cubic-bezier()`我正在使用的子菜单应该从 -90 度摆动到大约 15 度，然后回到 0 度。

不幸的是，我没有看到这种行为。我确实看到`cubic-bezier()`影响动画的时间与根本不使用时间功能，但它没有提供我期望的反弹效果。

我打赌这与从 -90 度到 0 度及过去有关，但在这一点上我非常迷茫。到目前为止，我一直无法找到任何关于使用`cubic-bezier()`带有函数的曲线`rotateX()`来产生这种效果的文档，甚至找不到说明是否`rotateX()`支持这种旋转或世界上正在发生什么的文档......帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:35:19.990

转换属性中的第三个数据是一个计时函数（正如您已经说过的）。以任何方式都可以改变过渡中发生的事情（例如，转到另一个坐标）

我猜你唯一的选择是使用关键帧。（毕竟没那么糟糕）

当然你不会得到贝塞尔插值，但我认为指定 3 或 4 个关键帧会使其足够好

**更正**

我错了。

是的，弹跳效果可以用三次贝塞尔曲线来完成。

你可以在这里得到一个很酷的页面

[缓动过渡演示](http://matthewlein.com/ceaser/)

我想您的问题是并非所有属性都可以“反弹”，或者更准确地说，并非所有属性都可以扩展到过渡的 100% 限制之外。

对不起 ！

# image - 比图片长的链接

> ID：15146775
> 
> 赞同：0
> 
> 时间：2013-02-28T22:17:54.913
> 
> 标签：image, html, hyperlink, overlap

所以，我正在我的网站上制作一个“链接”div。（[参考这里）](http://music.papkeeproductions.com)链接都是图像，但由于某种原因，它们包含的 div 不必要地长。图像应该是现在的三倍左右，但是每当我调整 div 的大小以使其更大时，它都会与视频重叠并将其向下推。

代码如下所示：

```
<div class="links">
    <ul>
        <li><a href="http://music.papkeeproductions.com"><img src="Images/button_home.png" width="52%" height="69" style="width:15%;height:auto;" /></a></li>
        <li><a href="http://papkee.bandcamp.com"><img src="Images/button_music.png" style="width:15%;height:auto;" /></a></li>
        <li><a href="http://papkeeproductions.com"><img src="Images/button_films.png" style="width:15%;height:auto;" /></a></li>
    </ul>
</div>
<div class="player">
    <iframe src="http://www.youtube.com/embed/MTmUnOHs5Xs"></iframe>
</div> 
```

和CSS

```
.links {
float:left;
width:100%;
margin-left:0;
height:auto;
}
.links ul {
list-style-type:none;
margin:0;
padding:0;
}
.links img {
width:180px;
height:auto;
}
.player {
float:right;
padding:8px;
border-style:solid;
border-radius:31px 31px;
border-color:rgb(45,25,11);
border-width:2px;
margin-right:0;
width:45%;
height:45%;
}
.player iframe {
width:100%;
height:100%;
border:none;
} 
```

那怎么办？我的吉米一整天都在沙沙作响，我似乎找不到问题所在。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:24:20.020

为什么 .links 的宽度为 100%，将其更改为 30% 可防止视频下推。这是更改[http://codepen.io/hwatkins/pen/qmzEB的示例](http://codepen.io/hwatkins/pen/qmzEB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:25:45.330

位于标签中的样式属性将覆盖样式表：

```
style="width:15%;height:auto;" 
```

优先于：

```
.links img {
    width:180px;
    height:auto;
} 
```

# javascript - jquery 抛出“未捕获的 RangeError：超出最大调用堆栈大小”

> ID：15146777
> 
> 赞同：3
> 
> 时间：2013-02-28T22:18:29.173
> 
> 标签：javascript, ruby-on-rails, fancybox-2

当有人点击我网站上的某个链接时，我`FancyBox2-Rails`会打开一个小窗口/对话框。

这是简单的视图：

```
:javascript
$(document).ready(function() {
  $("a.iframe").fancybox();
});

...

%li
  = User_name
  = link_to 'Click me', "http://www.google.com", :class => "iframe"

... 
```

但我不断收到此错误：

```
Uncaught RangeError: Maximum call stack size exceeded jquery.js:2868
jQuery.event.remove jquery.js:2868
jQuery.event.remove ....
....... 
```

谁能告诉我发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:12:54.987

最近经常发生这种情况，你在使用 twitter bootstrap 吗？

[https://github.com/twitter/bootstrap/issues/6862](https://github.com/twitter/bootstrap/issues/6862)

Twitter Bootstrap 3.2 打破了 Fancybox 和 fancybox 支持已经表示他们不会修复它，所以它主要是一个 javascript 问题而不是 rails

在这种情况下，您使用的是 Twitter Bootstrap 3.2 或类似的东西

* * *

按照[github链接](https://github.com/twitter/bootstrap/issues/6862)上的问题，似乎有一个修复

更改第 794 行中的代码（bootstrap.js）

```
.on('.dropdown-menu', function (e) { e.stopPropagation() }) 
```

为了这

```
.on('touchstart.dropdown.data-api', '.dropdown-menu', function (e) { e.stopPropagation() }) 
```

# python - 如何使用模拟库修补方法''.join

> ID：15146778
> 
> 赞同：4
> 
> 时间：2013-02-28T22:18:31.513
> 
> 标签：python, mocking

要创建给定函数的单元测试，我需要修补`''.join(...)`.

我已经尝试了很多方法来做到这一点（使用[模拟](https://pypi.python.org/pypi/mock)库），但即使我有一些使用该库创建单元测试的经验，我也无法让它工作。

出现的第一个问题是它`str`是一个内置类，因此它不能被模拟。[William John Bert](http://williamjohnbert.com/2011/07/how-to-unit-testing-in-django-with-mocking-and-patching/)的一篇文章展示了如何处理这个问题（`datetime.date`在他的案例中）。图书馆官方文档的[“部分模拟”部分](http://docs.python.org/dev/library/unittest.mock-examples.html#partial-mocking)也有一个可能的解决方案。

第二个问题是`str`没有真正直接使用。而是调用`join`文字方法。`''`那么，补丁的路径应该是什么？

这些选项都不起作用：

*   `patch('__builtin__.str', 'join')`
*   `patch('string.join')`
*   `patch('__builtin__.str', FakeStr)`（哪里`FakeStr`是 的子类`str`）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T22:21:42.137

您不能，因为无法在内置类上设置属性：

```
>>> str.join = lambda x: None
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can't set attributes of built-in/extension type 'str' 
```

并且您无法修补`str`，因为`''.join`使用文字，因此无论您如何尝试替换in ，解释器都会**始终**创建.`str``str``__builtin__`

如果您阅读生成的字节码，您可以看到这一点：

```
>>> import dis
>>> def test():
...     ''.join([1,2,3])
... 
>>> dis.dis(test)
  2           0 LOAD_CONST               1 ('')
              3 LOAD_ATTR                0 (join)
              6 LOAD_CONST               2 (1)
              9 LOAD_CONST               3 (2)
             12 LOAD_CONST               4 (3)
             15 BUILD_LIST               3
             18 CALL_FUNCTION            1
             21 POP_TOP             
             22 LOAD_CONST               0 (None)
             25 RETURN_VALUE 
```

字节码是在*编译*时生成的，如您所见，无论您在运行时如何更改值，首先`LOAD_CONST`加载`''`的是 a 。`str``str`

您*可以*做的是使用可以模拟的包装函数，或者避免使用文字。例如，使用`str()`而不是`''`允许您使用具有实现您想要`mock`的方法`str`的子类的类`join`（即使这可能会影响太多代码并且根据您使用的模块可能不可行）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T22:42:58.840

如果您感到非常幸运，您可以检查并修补代码对象中的字符串常量：

```
def patch_strings(fun, cls):
    new_consts = tuple(
                  cls(c) if type(c) is str else c
                  for c in fun.func_code.co_consts)

    code = type(fun.func_code)

    fun.func_code = code(
           fun.func_code.co_argcount,
           fun.func_code.co_nlocals, 
           fun.func_code.co_stacksize,
           fun.func_code.co_flags,
           fun.func_code.co_code,
           new_consts,
           fun.func_code.co_names,
           fun.func_code.co_varnames,
           fun.func_code.co_filename,
           fun.func_code.co_name,
           fun.func_code.co_firstlineno,
           fun.func_code.co_lnotab,
           fun.func_code.co_freevars,
           fun.func_code.co_cellvars)

def a():
    return ''.join(['a', 'b'])

class mystr(str):
    def join(self, s):
        print 'join called!'
        return super(mystr, self).join(s)

patch_strings(a, mystr)
print a()      # prints "join called!\nab" 
```

Python3版本：

```
def patch_strings(fun, cls):
    new_consts = tuple(
                   cls(c) if type(c) is str else c
                   for c in fun.__code__.co_consts)

    code = type(fun.__code__)

    fun.__code__ = code(
           fun.__code__.co_argcount,
           fun.__code__.co_kwonlyargcount,
           fun.__code__.co_nlocals, 
           fun.__code__.co_stacksize,
           fun.__code__.co_flags,
           fun.__code__.co_code,
           new_consts,
           fun.__code__.co_names,
           fun.__code__.co_varnames,
           fun.__code__.co_filename,
           fun.__code__.co_name,
           fun.__code__.co_firstlineno,
           fun.__code__.co_lnotab,
           fun.__code__.co_freevars,
           fun.__code__.co_cellvars) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:26:55.440

确实没有办法使用字符串文字来执行此操作，因为它们始终使用内置`str`类，正如您所发现的那样，它不能以这种方式修补。

当然，您可以编写一个函数`join(seq, sep='')`来代替`''.join()`和修补它，或者您总是使用一个`str`子类`Separator`来显式地构造将用于`join`操作的字符串（例如`Separator('').join(....)`）。这些变通办法有点难看，但您不能以其他方式修补该方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T23:08:55.013

在这里，我正在修补我正在测试的模块中的变量。我不喜欢这个想法，因为我正在更改我的代码以适应测试，但它确实有效。

# 测试.py

```
import mock

from main import func

@mock.patch('main.patched_str')
def test(patched_str):
    patched_str.join.return_value = "hello"

    result = func('1', '2')

    assert patched_str.join.called_with('1', '2')
    assert result == "hello" 

if __name__ == '__main__':
    test() 
```

# 主文件

```
patched_str = ''

def func(*args):
    return patched_str.join(args) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-22T11:42:02.237

我的解决方案有点棘手，但它适用于大多数情况。它不使用模拟库，顺便说一句。我的解决方案的优点是您可以继续使用`''.join`而无需进行丑陋的修改。

当我不得不在 Python3.2 中运行为 Python3.3 编写的代码时，我发现了这种方法（它替换`str(...).casefold`为`str(...).lower`）

假设你有这个模块：

```
# my_module.py

def my_func():
    """Print some joined text"""
    print('_'.join(str(n) for n in range(5))) 
```

有一个用于测试它的单元测试示例。请注意，它是为 Python 2.7 编写的，但可以很容易地针对 Python 3 进行修改（请参阅注释）：

```
import re
from imp import reload  # for Python 3

import my_module

class CustomJoinTets(unittest.TestCase):
    """Test case using custom str(...).join method"""
    def setUp(self):
        """Replace the join method with a custom function"""
        with open(my_module.__file__.replace('.pyc', '.py')) as f:
            # Replace `separator.join(` with `custom_join(separator)(`
            contents = re.sub(r"""(?P<q>["'])(?P<sep>.*?)(?P=q)[.]join\(""",
                              r"custom_join(\g<q>\g<sep>\g<q>)(",
                              f.read())

        # Replace the code in the module
        # For Python 3 do `exec(contents, my_module.__dict__)`
        exec contents in my_module.__dict__

        # Create `custom_join` object in the module
        my_module.custom_join = self._custom_join

    def tearDown(self):
        """Reload the module"""
        reload(my_module)

    def _custom_join(self, separator):
        """A factory for a custom join"""
        separator = '+{}+'.format(separator)
        return separator.join

    def test_smoke(self):
        """Do something"""
        my_module.my_func()

if __name__ == '__main__':
    unittest.main() 
```

如果你真的想要`mock`库，你可以让`_custom_join`方法返回 MagicMock 对象：

```
 def _custom_join(self, separator):
        """A factory for a custom join"""
        import mock

        return mock.MagicMock(name="{!r}.join".format(separator)) 
```

# c# - 如何用鼠标移动 C# 表单图例？

> ID：15146779
> 
> 赞同：0
> 
> 时间：2013-02-28T22:18:33.000
> 
> 标签：c#, winforms, charts, customization

我正在创建一个绘图程序，我想知道如何用鼠标移动图表的图例？因此，您可以单击图例，然后可以将其移动到图表区域内的任何位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:23:13.933

使用图表的手动双缓冲，在将后台缓冲区绘制到屏幕之前，在后台缓冲区的当前鼠标位置（可能 + (15,15)）绘制图例。您还可以设置 Alpha 以使图例半透明，直到用户放下它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:26:47.697

您可以创建一个没有边框的小表单来构建您的图例或使用工具提示项。然后你可以用 mouseMove 事件移动：

```
 private void frmMain_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.Button = System.Windows.Forms.MouseButtons.Left)
            ChangeLegendPosition(e.X, e.Y);
    } 
```

其中 ChangeLegendPosition 是您更新表单/工具提示位置的函数。

# c# - 为什么在调整用户控制图的大小时它并没有真正调整大小？

> ID：15146780
> 
> 赞同：1
> 
> 时间：2013-02-28T22:18:40.093
> 
> 标签：c#

我的 Form1 设计器中有一个用户控制图，这是调整它大小的代码：

```
private void graphChart1_MouseEnter(object sender, EventArgs e)
        {
            graphChart1.Size = new Size(600, 600);
        } 
```

当我将鼠标移动到控制区域时，它并没有调整它的大小使其变大，而是删除了一些其他控件。

这是我将鼠标移到控件上之前的图像：

![在此处输入图像描述](../Images/7b5c2351fffd935d5d6a32f86e3768f2.png)

这是我将鼠标移到控件上时的图像：

![在此处输入图像描述](../Images/da054931d55a296f96843131427e2051.png)

这是图表所在的用户控件的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Web;
using System.Windows.Forms.DataVisualization.Charting;

namespace GatherLinks
{

    public partial class GraphChart : UserControl
    {
        public GraphChart()
        {
            InitializeComponent();
        }

        private double f(int i)
        {
            var f1 = 59894 - (8128 * i) + (262 * i * i) - (1.6 * i * i * i);
            return f1;
        }

        private void GraphChart_Load(object sender, EventArgs e)
        {
            chart1.Series.Clear();
            var series1 = new System.Windows.Forms.DataVisualization.Charting.Series
            {
                Name = "Series1",
                Color = System.Drawing.Color.Green,
                IsVisibleInLegend = false,
                IsXValueIndexed = true,
                ChartType = SeriesChartType.Line
            };

            this.chart1.Series.Add(series1);

            for (int i = 0; i < 100; i++)
            {
                series1.Points.AddXY(i, f(i));
            }
            chart1.Invalidate();
        }
    }
} 
```

编辑：

我在用户控件类代码中这样做了：

```
public void ChangeChartSize(int width, int height)
{
            chart1.Size = new Size(width, height);
            chart1.Invalidate();
} 
```

我必须添加`chart1.Invalidate();`以使其生效，但随后它会在用户控件中自行调整图表的大小。用户控件未更改。

所以在 Form1 鼠标输入中我也改变了 graphChart1 的控件大小：

```
private void graphChart1_MouseEnter(object sender, EventArgs e)
{
            graphChart1.ChangeChartSize(600, 600);
            graphChart1.Size = new Size(600, 600);
} 
```

问题是，当我将鼠标移到控件上时，它需要花费将近 20 秒左右的时间才能生效。如果我将删除第二行：

```
graphChart1.Size = new Size(600, 600); 
```

它会工作得很快，但它只会改变控件内部的图表，但不会改变控件的大小。

也尝试过无效：

```
private void graphChart1_MouseEnter(object sender, EventArgs e)
{
            graphChart1.ChangeChartSize(600, 600);
            graphChart1.Size = new Size(600, 600);
            graphChart1.Invalidate();
} 
```

但是还是很慢。也许我还需要在用户控件类代码中而不是在 Form1 中更改控件的自身大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:22:25.470

问题是您正在调整 GraphicChart（您的用户控件）而不是 Chart 本身的大小。为此，您可以在 GraphChart 类中添加该方法。这是将更改图表大小的方法：

```
public void ChangeChartSize(int width, int height)
{
     chart1.Size = new Size(width, height);
} 
```

在您的鼠标输入事件处理程序中，您可以调用如下内容：

```
void graphicChart1_MouseEnter(object sender, EventArgs e)
{
     graphChart1.ChangeChartSize(600, 600);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:30:47.777

随着`graphChart1.Size =`您调整容器的大小，而不是其中的图表。

最简单的解决方法可能是`chart1`在控件中公开并`graphChart1.chart1.Size =`改为执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:03:41.610

在我做的用户控制类代码中：

```
public void ChangeChartSize(int width, int height)
        {
            this.Size = new Size(width, height);
            chart1.Size = new Size(width, height);
            chart1.Invalidate();
        } 
```

在 Form1 中，我做了：

```
private void graphChart1_MouseEnter(object sender, EventArgs e)
        {
            graphChart1.ChangeChartSize(600, 600);
        } 
```

工作顺利。

# ruby-on-rails-3 - 可以禁用 Rails 3 资产管道错误吗？

> ID：15146782
> 
> 赞同：2
> 
> 时间：2013-02-28T22:18:54.397
> 
> 标签：ruby-on-rails-3, asset-pipeline

有时我会忘记编译一个很小的新图像图标或其他东西，而不是仅仅向浏览器发送一个错误的 URL，以便它可以显示带有 ? 的小框，资产管道使我的整个应用程序崩溃。我认为这有点矫枉过正。如果可能的话，我宁愿让资产管道“优雅地失败”。是否有一个设置可以禁用在生产中引发错误？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T04:55:07.333

嗨，您可以通过设置禁用资产管道

**config/application.rb** 来自

```
config.assets.enabled = true 
```

至

```
config.assets.enabled = false 
```

您也可以参考本指南：

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

# clojure - clojure：子集的排列？

> ID：15146784
> 
> 赞同：4
> 
> 时间：2013-02-28T22:19:05.070
> 
> 标签：clojure, set

我是clojure的新手，正在寻找一个生成子集排列的函数：

```
=> (find-subsets 1 #{1 2 3 4})
(#{1} #{2} #{3} #{4})

=> (find-subsets 2 #{1 2 3 4})
(#{1 2} #{1 3} #{1 4} #{2 3} #{2 4} #{3 4})

=> (find-subsets 3 #{1 2 3 4})
(#{1 2 3} #{1 3 4} #{2 3 4}) 
```

这样的事情存在吗？如果没有，是否有一种很好、干净、惯用的方法来编写函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T22:28:44.390

看看[组合](https://github.com/clojure/math.combinatorics)学。它可以满足您的需要：

```
; all the unique ways of taking n different elements from items
(clojure.math.combinatorics/combinations [1 2 3] 2)
;;=> ((1 2) (1 3) (2 3)) 
```

如果它因为您使用集合而不是向量而抱怨，只需在调用之前使用 vec 转换为向量`combinations`。

# ios - 将 JSON 字符串解析为三个数组 Objective C

> ID：15146785
> 
> 赞同：0
> 
> 时间：2013-02-28T22:19:07.393
> 
> 标签：ios, objective-c, json

我正在尝试使用从目标 c 中的文本文件中读取的数据。我从文本文件中读取的数据是：

```
{"aps":{"alert":"Test 1!","sound":"beep.wav","badge":5,"Type":"Banking"},"acme1":"bar","acme2":42}|{"aps":{"alert":"Test 2!","sound":"beep.wav","badge":5,"Type":"Banking"},"acme1":"bar","acme2":42}|{"aps":{"alert":"Test 3!","sound":"beep.wav","badge":5,"Type":"Banking"},"acme1":"bar","acme2":42}|{"aps":{"alert":"Test 4!","sound":"beep.wav","badge":5,"Type":"Banking"},"acme1":"bar","acme2":42}|{"aps":{"alert":"Test 5!","sound":"beep.wav","badge":5,"Type":"Banking"},"acme1":"bar","acme2":42} 
```

读取后，我将文件拆分为一个带有“|”分隔符的数组。然后，我想进一步将其分为 3 个不同的数组：基于“类型”键的银行业务、欺诈和投资。但是，一旦将 JSON 字符串拆分为数组，我似乎无法解析它。我的观点确实加载方法如下：

```
- (void)viewDidLoad {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fileName = [NSString stringWithFormat:@"%@/AccountNotifications.txt", documentsDirectory];
    NSString *fileContents = [[NSString alloc]  initWithContentsOfFile:fileName usedEncoding:nil error:nil];
    NSArray *fileData = [fileContents componentsSeparatedByString:@"|"];

    if (fileContents != NULL)
    {
        bankingNotifications =  [[NSMutableArray alloc] init];
        fraudNotifications =  [[NSMutableArray alloc] init];
        investmentNotifications = [[NSMutableArray alloc] init];        

        for (i = 0; i < [fileData count]; i++)
        {
            NSString *notification = fileData[i];
            NSDictionary *json = [notification JSONValue];
            NSArray *items = [json valueForKeyPath:@"aps"];

            if ([[[items objectAtIndex:i] objectForKey:@"Type"] isEqual: @"Banking"])
            {
                [bankingNotifications addObject:fileData[i]];
                NSLog(@"Added object to banking array");
            }

            if ([[[items objectAtIndex:i] objectForKey:@"Type"] isEqual: @"Fraud"])
            {
                [fraudNotifications addObject:fileData[i]];
                NSLog(@"Added object to fraud array");

            }

            if ([[[items objectAtIndex:i] objectForKey:@"Type"] isEqual: @"Investment"])
            {
                [investmentNotifications addObject:fileData[i]];
                NSLog(@"Added object to investment array");

            }
        } } 
```

这三行有错误：

```
 NSString *notification = fileData[i];
    NSDictionary *json = [notification JSONValue];
    NSArray *items = [json valueForKeyPath:@"aps"]; 
```

你能帮我把 JSON 字符串解析成三个可变数组吗？我得到的错误是：

`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSDictionaryM objectAtIndex:]: unrecognized selector sent to instance 0x1d59db30'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:24:41.400

如果您自己创建文本文件，我建议您创建一个有效的 json 对象（因为您的数据看起来应该是 json）以保持数据整洁。与此类似：

```
{"aps":[{"type":"Banking","badge":5},{"Type":"Fraud","badge":12}]} 
```

然后您可以执行以下操作（此代码未经测试，可能是您必须对其进行一些修改），但我希望您能有所了解:)

```
NSError*    error       = nil;
NSDictionary*    dict = nil;
//serialising the jsonobject to a dictionary
dict  = [NSJSONSerialization JSONObjectWithData:fileContents
                                              options:kNilOptions
                                                error:&error];
bankingNotifications =  [[NSMutableArray alloc] init];
fraudNotifications =  [[NSMutableArray alloc] init];
investmentNotifications = [[NSMutableArray alloc] init];

if (dict) {
    NSArray *dataArray = [dict objectForKey:@"aps"];
    NSDictionary* siteData    = nil;
    NSEnumerator* resultsEnum   = [dataArray objectEnumerator];
    while (siteData = [resultsEnum nextObject])
    {
        //
        if( [[siteData objectForKey:@"Type"] isEqualToString: @"Banking"]) {
            [bankingNotifications addObject:notification];
            NSLog(@"Added object to banking array");
        } else if ([[siteData objectForKey:@"Type"] isEqualToString: @"Fraud"])
        {
            [fraudNotifications addObject:notification];
            NSLog(@"Added object to fraud array");
        }
        else if ([[siteData objectForKey:@"Type"] isEqualToString: @"Investment"])
        {
            [investmentNotifications addObject:notification];
            NSLog(@"Added object to investment array");
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:44:25.950

键“aps”的值是一个字典。

```
 NSDictionary *item = [json valueForKeyPath:@"aps"];

    if ([[item objectForKey:@"Type"] isEqualToString: @"Banking"])
    {
        [bankingNotifications addObject:notification];
        NSLog(@"Added object to banking array");
    } 
    else if ([[item objectForKey:@"Type"] isEqualToString: @"Fraud"])
    {
        [fraudNotifications addObject:notification];
        NSLog(@"Added object to fraud array");
    }
    else if ([[item objectForKey:@"Type"] isEqualToString: @"Investment"])
    {
        [investmentNotifications addObject:notification];
        NSLog(@"Added object to investment array");
    } 
```

# android - 设置 Window Dim 仅在 onCreate() 中起作用

> ID：15146787
> 
> 赞同：1
> 
> 时间：2013-02-28T22:19:08.490
> 
> 标签：android, window, frame, android-windowmanager

我的 Window 调光有一点问题。基本上，我想将我的 Activity 的 dimAmount 设置为零，只要我向一个方向滑动它。

请注意，我的活动显示为对话框，并且可以向左或向右滑动。这工作得很好。但是 setWindowDim() 方法在滑动后调用时无效。

如果我在我的 onCreate 方法中调用 setWindowDim，它工作得非常好。我不知道为什么它在其他任何地方都不起作用。

```
public class FinishDialog extends Activity {

private FrameLayout frame = null;
private GestureDetector gd = null;
private int displaywidth = 0;

private int original_x = 0;
private int dialog_width = 0;

private final int POS_LEFT = -1;
private final int POS_MID = 0;
private final int POS_RIGHT = 1;

/** the dialogs current position, POS_MID on startup */
private int current_pos = POS_MID;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    //this.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);

    frame = new FrameLayout(this);
    gd = new GestureDetector(this, new TouchManager(this));

    // fill the challenge layout into the framelayout
    frame.addView(LayoutInflater.from(getBaseContext()).inflate(R.layout.finishdialog, null));

    setContentView(frame);      

    FrameLayout.LayoutParams lp = (FrameLayout.LayoutParams) frame.getLayoutParams();

    GameLogic g = new GameLogic();

    displaywidth = g.getDisplayWidth(this);

    lp.width = displaywidth - displaywidth / 6;
    lp.gravity = Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL;

    LinearLayout llFinish = (LinearLayout) findViewById(R.id.llFinishDialog);

    LinearLayout.LayoutParams lpLL = (LinearLayout.LayoutParams) llFinish.getLayoutParams();
    lp.height = lpLL.height;

    frame.setLayoutParams(lp);

    // setWindowDim(0.0f); ---> if i set the dim here, it works perfectly fine

    original_x = (int) frame.getX();
    dialog_width = lp.width;
}   

private void setWindowDim(float dim) {

    Log.i("FinishDialog", "Setting window dim to " + dim + ".");

    WindowManager.LayoutParams lpWin = getWindow().getAttributes();
    lpWin.dimAmount = dim;
    getWindow().setAttributes(lpWin);
}

/**
 * move the dialog, depending on the swipe direction and the
 * current position of the dialog
 * @param action
 */
public void interpretTouch(int action) {

    switch(action) {
    case TouchManager.MOVE_DIALOG_RIGHT:

        if(frame != null) {

            if(current_pos == POS_MID) {

                swipeDialog(600, frame, 0, dialog_width, 0, 0);
                current_pos = POS_RIGHT;
                setWindowDim(0.0f); // here setting the dim has no effect

            } else if (current_pos == POS_LEFT) {

                swipeDialog(600, frame, - dialog_width, original_x, 0, 0);
                current_pos = POS_MID;
                setWindowDim(0.9f); // here setting the dim has no effect

            } else if (current_pos == POS_RIGHT) {
                // if we are on the right and swipe right, nothing happens
            }
        }

        Log.i("Challenge", "Moving dialog to the right.");
        break;
    case TouchManager.MOVE_DIALOG_LEFT:

        if(frame != null) {

            if(current_pos == POS_MID) {

                swipeDialog(600, frame, 0, -dialog_width, 0, 0);
                current_pos = POS_LEFT;
                setWindowDim(0.0f); // here setting the dim has no effect

            } else if (current_pos == POS_LEFT) {

                // if we are on the left and swipe left, nothing happens
            } else if (current_pos == POS_RIGHT) {

                swipeDialog(600, frame, dialog_width, original_x, 0, 0);
                current_pos = POS_MID;
                setWindowDim(0.9f); // here setting the dim has no effect
            }
        }

        Log.i("Challenge", "Moving dialog to the left.");
        break;
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {    

    return gd.onTouchEvent(event);
}

private void swipeDialog(int time, View framelayout, int fromDeltaX, int toDeltaX, int fromDeltaY, int toDeltaY) {

    Log.i("FinishDialog", "Dialog swiped.");

    TranslateAnimation trans = new TranslateAnimation(fromDeltaX, toDeltaX,
            fromDeltaY, toDeltaY);

    trans.setFillAfter(true);
    trans.setFillEnabled(true);
    trans.setDuration(time);
    framelayout.startAnimation(trans);  
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:34:25.163

在我更改 Window dim 后立即开始此活动终于完成了这项工作。不幸的是，现在屏幕在 RefreshActivity 启动时闪烁得非常“丑陋”，有没有人有解决方案？

```
import android.app.Activity;
import android.os.Bundle;

public class RefreshActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        finish();
    }
} 
```

# codeblocks - 在代码块中链接头文件

> ID：15146788
> 
> 赞同：1
> 
> 时间：2013-02-28T22:19:11.573
> 
> 标签：codeblocks

所以我在 OpenCV 中编写了代码，其中包含 2 个使用 Code::Blocks 的头文件。当我编译文件时，除了两个“未定义的引用......”错误之外没有错误，因为我使用了我在头文件中声明的函数。我假设代码块自动链接头文件？我已经使用“#include..”在程序顶部包含头文件，所以不确定问题可能是什么。有人知道吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-18T23:42:10.170

我遇到了类似的问题，但我遇到了一个解决方案

1）单击“项目”选项卡，它位于右上角。

2）在“项目”选项卡中应该有一个名为“添加文件...”的选项，单击此选项

3）突出显示您的头文件和与您的头文件关联的任何其他文件，就像您将头文件定义放在 .cpp 文件中一样

4) 编译运行

让我知道这是否有帮助，它对我有用，但我们可能会遇到不同的编译问题。

# javascript - 谷歌地图 v3 在点击外部 html 链接时打开信息窗口

> ID：15146789
> 
> 赞同：0
> 
> 时间：2013-02-28T22:19:16.977
> 
> 标签：javascript, google-maps-api-3, infowindow

想知道是否有人可以帮助我，我已经设置了一个谷歌地图，一切都很好。我唯一不知道怎么做的是从不在 JS 中的外部 html 链接中打开一个基于 ID 的信息窗口。

```
function initialize() {
// Create the map 
// No need to specify zoom and center as we fit the map further down.
var map = new google.maps.Map(document.getElementById("map"), {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    disableDefaultUI: true
});
infowindow = new google.maps.InfoWindow();
// Custom markers
var icon = "img/marker.png";

// Define the list of markers.
// This could be generated server-side with a script creating the array.
var markers = [
    { val:0, lat: -40.149049, lng: 172.033095, title: "Title", html: "<div style='text-align:left'><h4 style='color:#0068a6;font-size:16px;margin:0px 0px 10px 0px;'>Title</h4><strong>Telephone</strong><br /><br />Address</div>" },
    { val:1, lat: -41.185765, lng: 174.827516, title: "Title", html: "<div style='text-align:left'><h4 style='color:#0068a6;font-size:16px;margin:0px 0px 10px 0px;'>Title</h4><strong>Telephone</strong><br /><br />Address</div>" },
];
// Create the markers ad infowindows.
for (index in markers) addMarker(markers[index]);
function addMarker(data) {
  // Create the marker
    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(data.lat, data.lng),
        map: map,
        title: data.title,
        icon: icon,
        id: data.val
    });

    // Create the infowindow with two DIV placeholders
    // One for a text string, the other for the StreetView panorama.
    var content = document.createElement("DIV");
    var title = document.createElement("DIV");
    title.innerHTML = data.html;
    content.appendChild(title);
    // Open the infowindow on marker click
    google.maps.event.addListener(marker, "click", function() {
        infowindow.setContent(content);
        infowindow.open(map, this);
        map.setCenter(this.position);
        console.log(this.id);
    });
}

// Zoom and center the map to fit the markers
// This logic could be conbined with the marker creation.
// Just keeping it separate for code clarity.
var bounds = new google.maps.LatLngBounds();
for (index in markers) {
    var data = markers[index];
    bounds.extend(new google.maps.LatLng(data.lat, data.lng));
}
map.fitBounds(bounds);
}

<p id="1">link to open marker</p> 
```

任何帮助将不胜感激

理查德:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T03:34:58.897

```
<a href="javascript:show(7)">The Golden Goose</a> 
```

然后在你的 js 中有一个函数来打开信息窗口（例如 show()），它从该链接获取属性（打开 id 7）。

* * *

```
function show(id){
  myid = id;
  if(markers[myid]){
    map.panTo(markers[myid].getPoint());
    setTimeout('GEvent.trigger(markers[myid], "click")',500);
    map.hideControls();
  }
} 
```

这就是我之前与 v2 中的一个标记管理器一起使用的功能。您必须确保在设置时为每个标记设置一个 id，然后才能调用它。

我确定的一件事（为了简化问题）是确保地图标记集/数组与我在页面上使用的 sql 结果完全相同。那样的话，使用 id 就是小菜一碟。

# c# - 从 C# 服务器将 MP3 流式传输到 Android

> ID：15146799
> 
> 赞同：0
> 
> 时间：2013-02-28T22:20:06.427
> 
> 标签：c#, java, android, tcp

我已经建立了一个 C# 服务器，它目前通过 TCP 提供一个测试 mp3 文件。发送文件的代码如下

```
 public void RunStreamer()
    {
        log.MakeLog("Starting streamer");
        Run = true;
        //Need to look into how to thread this to not block the main window
        TcpListener listen = new TcpListener(localAddr, _port);
        listen.Start(); //startlistening to client requests

            //blocks until a client request comes in
        for (; ; )
        {
            Socket socket = listen.AcceptSocket();
            if (socket.Connected)
            {

                SendFileToClient(socket);
                socket.Disconnect(false);
            }
        }

    }

    void SendFileToClient(Socket socket)
    {
        log.MakeLog("Connection made");
        NetworkStream netStream = new NetworkStream(socket);
        StreamWriter writer = new StreamWriter(netStream);
        //Todo - set specfified file - this file just for test
        FileStream filestream = File.Open(@"C:\MusicTest\Test.mp3", FileMode.Open, FileAccess.Read, FileShare.Read);
        filestream.CopyTo(netStream);
        netStream.Flush();
        netStream.Close();

    } 
```

在我的测试 android 设置中，我通过单击按钮调用服务器：

```
 public void btngo_click(View v)
{
    final TcpClient client = new TcpClient();

    new Thread(new Runnable(){
        @Override
        public void run() {
            final MediaPlayer mediaPlayer = new MediaPlayer();
            client.GetStream();
            runOnUiThread(new Runnable(){
                public void run()
                {
                     int length = client.GetLength();
                     if(length > 0)
                     {
                        byte[] result = client.GetResult();
                        try {
                            // create temp file that will hold byte array
                            File tempMp3 = File.createTempFile("test", "mp3", getCacheDir());
                            tempMp3.deleteOnExit();
                            FileOutputStream fos = new FileOutputStream(tempMp3);
                            fos.write(result);
                            fos.close();

                            mediaPlayer.reset();

                            FileInputStream fis = new FileInputStream(tempMp3);
                            mediaPlayer.setDataSource(fis.getFD());

                            mediaPlayer.prepare();
                            mediaPlayer.start();
                        } catch (IOException ex) {
                            String s = ex.toString();
                            ex.printStackTrace();
                        }

                     }
                }
            });

        }
    }).start();

} 
```

流在 TcpClient 类中接收，如下所示：

```
public class TcpClient {

public final static String SERVER_ADDRESS = "127.0.0.1";
public final static int SERVER_PORT = 65000;
public String TotalResult;
public int Length;
byte[] result = new byte[21000000];

public TcpClient()
{

}

public int GetLength()
{
    return Length;  

}

public byte[] GetResult()
{

    return result;

}

public void GetStream()
{
    try
    {

        final Socket socket = new Socket("192.0.0.5", 85000);
        final InputStream input = new BufferedInputStream(socket.getInputStream());
        ByteArrayOutputStream buffer = new ByteArrayOutputStream();

        int nread;

        while((nread = input.read(result, 0, result.length)) != -1)
        {

            buffer.write(result, 0, nread);
        }
        buffer.flush();

        //input.read(result);
        Length = result.length;

        input.close();
        socket.close();

    } catch (UnknownHostException e) {
        String exc = e.getMessage();
        e.printStackTrace();
    } catch (IOException e) {
        String exc2 = e.getMessage();
        e.printStackTrace();
    }

} 
```

}

对这里的所有代码表示歉意，这是我的问题。

我正在接收流。创建临时 MP3 文件并启动媒体播放器。然后我只得到一小段测试 MP3 文件（这是一首完整的歌曲）。它也跳了一下。长度不一样，每次播放的歌曲部分也不一样。

我如何以有序的方式接收完整的文件，以便提供歌曲的完整播放。

我试图为此进行路由，并有一个想法，我需要告诉我的客户它应该怀疑什么文件大小，然后执行一些循环，直到收到所有数据，尽管我不知道如何成功实现这一点，如果这是正确的解决方案。

任何关于我哪里出错或我可以做些什么来纠正的指示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:07:43.650

在没有收到任何答案后，我又挖了一点。有两件事是错误的：首先，我没有将流的大小作为 int 大小的标题包含在我的流中。我知道对于较小的文件，这不是问题，但随着文件大小的增长，有必要确保已收到整个流。

这反过来又引发了另一个问题。我作为 byte[] form c# 发送的 int 没有在 Java 中返回正确的值。原来Java使用sbytes -128到127范围而不是字节。然后，这涉及到一些代码来转换为 int。然后我可以指示读者以预期流的实际大小读取 byte[] 缓冲区 = 瞧，它起作用了。MP3 文件被接收并播放得很好。

# css - 浮动 div 内输入元素的填充宽度

> ID：15146801
> 
> 赞同：1
> 
> 时间：2013-02-28T22:20:24.270
> 
> 标签：css, html, css-float, width

我正在尝试使用**float**在容器中组织宽度为**40% - 30% - 30%**的 div 的水平布局。

 **在每个 div 中，我想插入**纯文本**，后跟一个**填充**其 div 水平其余部分的**输入**字段。

 **作为问题的简化再现，只需在 CSS 上使用：

```
.r {background-color: pink;}
.g {background-color: lightgreen;}
.b {background-color: lightblue;}
.w40 {width: 40%;}
.w30 {width: 30%;}
.w100 {width: 100%;}
.fl {float: left;}
.fr {float: right;}
.cb {clear: both;} 
```

这在 HTML 上：

```
<div class="r w40 fl">
    <div class="g fl">Aaaaaa:</div>
    <input class="b" value="Bbbbbb" />
</div>
<div class="r w30 fl">
    <div class="g fl">Cccccc:</div>
    <div class="b">Dddddd</div>
</div>
<div class="r w30 fl">
    <div class="g fl">Eeeeee:</div>
    <div class="b">Ffffff</div>
</div> 
```

我怎样才能让**Bbbbbb**占据其 div 右侧的所有空间，就像**Dddddd**和**Ffffff 一样**？

这就是我所期待的： ![目标](../Images/9dd98a50a6d0d52bc1400fe2c04a6a92.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:26:11.780

[从这个答案：](https://stackoverflow.com/a/11815907/1869316)我只是将输入包装在一个样式为`overflow: hidden`.

CSS：

```
.r {background-color: pink;}
.g {background-color: lightgreen;}
.b {background-color: lightblue;}
.w40 {width: 40%;}
.w30 {width: 30%;}
.w100 {width: 100%;}
.fl {float: left;}
.filler {overflow: hidden; padding-right: 4px;} 
```

HTML：

```
<div class="r w40 fl">
    <div class="g fl">Aaaaaa:</div>
    <div class="filler"><input class="b w100" value="Bbbbbb" /></div>
</div>
<div class="r w30 fl">
    <div class="g fl">Cccccc:</div>
    <div class="b">Dddddd</div>
</div>
<div class="r w30 fl">
    <div class="g fl">Eeeeee:</div>
    <div class="b">Ffffff</div>
</div> 
```

[就是这个。完美的结果！](http://jsfiddle.net/xLLmr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:37:54.383

如果没有为输入声明 size 属性，则它的默认大小为 20，但即使该大小在不同浏览器中的呈现方式也不同。

一种解决方案是使用 JQuery 计算您为输入留下的空间，然后动态添加 CSS 以修改输入的宽度。

缺点是输入将首先以默认宽度呈现，然后调整大小，可能导致布局“跳舞”。为此，您可以使用 display: none 隐藏输入并仅在调整大小后显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T23:23:01.937

在您的标记中，将**输入**包装在**div中** ![在此处输入图像描述](../Images/e5c814656040da769b9aa3fb11962fd3.png)

```
<div class="r w40 fl">
    <div class="g fl">Aaaaaa:</div>
    <div id="inp"><input class="b" value="Bbbbbb" /></div>
</div> 
```

使用此规则为您的**输入**设置块显示。100% 的宽度将完成剩下的工作

```
input {
    display:block;
    width:100%;
} 
```

您仍然必须检查一些有关您的第一个粉红色 div 高度的化妆品（由输入推动）[在此处查看 fsFiddle](http://jsfiddle.net/Fico/p4Ymv/1/)

**固定高度差**

使用以下规则修改边框和高度属性。

```
input {
    display:block;
    width :100%; 
    border:none;
    height:18px;

} 
```

Finel小提琴[在这里](http://jsfiddle.net/Fico/XNWQu/)****

# php - 使用可变数量的变量更新 PDO/SQL :)

> ID：15146802
> 
> 赞同：0
> 
> 时间：2013-02-28T22:20:24.647
> 
> 标签：php, sql, variables, pdo

我有一个代码可以检索表单中发送的所有输入数据。如果表单仅填写了 2 个字段，则 PHP 仅获取这 2 个字段的值（表单中未更改的字段不会提交）。

然后我想为我用我的 PHP 代码检索到的那些字段更新一个 SQL 表。这是我迷路的地方。我只需要在 SQL 中指定从表单收到的字段，但这是可变的。也许我只收到了 1 个字段，也许我收到了 7 个字段......

这是我的代码：

```
if (isset($_POST) && !empty($_POST))  {
echo $internalImage;

foreach ($_POST as $key => $value) 
    {
 echo "Field Name: ".htmlspecialchars($key)." | Value: ".htmlspecialchars($value)."<br>";
    }
} 
```

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:37:27.893

您可以像这样构建您的查询：

```
$values=array();

//this will be an array of possible fields that are in your table
$possible=array('field1', 'field2', 'field3');

$i=0;
$len=count($_POST);
$query='update table_name set ';
foreach($_POST as $key => $value){
  $k=htmlspecialchars($key);
  $v=htmlspecialchars($value);
  if(in_array($k, $possible)){
    $query .= $k .' = ?'; //placeholder for a value
    $values[]=$v;  //append values to an array for later use
    if($i < ($len-1)) $query .= ', ';
    $i++;
  }
}
$query .= 'where table_id = ?';
$values[]=$table_id; //forgot that, append id of a row you are to update. 
```

然后准备并执行查询：

```
$db->prepare($query);
$db->execute($query, $values); 
```

# jquery - UIWebView 的 loadHTMLString：偶尔需要 10+ 秒才能加载

> ID：15146803
> 
> 赞同：0
> 
> 时间：2013-02-28T22:20:30.923
> 
> 标签：jquery, objective-c, uiwebview, uiwebviewdelegate

我有一个 UIWebView，它通过 loadHTMLString 加载一个页面（包括几个外部 css 和 js 文件）。当我不在 wifi 上时，有时需要 10 多秒才能呈现 html 页面。我不知道是什么原因导致它需要这么长时间，因为 95% 的时间它会在半秒内呈现，即使它包含与更持久的页面加载相同的外部资源。

对于需要很长时间加载的请求，我在 javascript 文件中 document.ready 的末尾记录了一条消息，以查看它何时发生。它总是立即记录消息，即使 webview 尚未呈现。所以我不知道是什么导致了这个问题，而且我不能始终如一地重现它，所以任何关于我可能想把注意力放在哪里的想法都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:30:05.997

有时，某些外部资源可能会花费异常长的时间。

您可以通过使用 HTTP 嗅探器（如[Charles HTTP 代理](http://www.charlesproxy.com/)）或在手机或模拟器中使用[Safari 网络检查器来获取有关正在发生的事情的信息。](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html)

您还可以打开[网络链接调节](http://www.neglectedpotential.com/2012/09/ios6-network-link-conditioner/)器以尝试更频繁地重现它。

# windows-8 - XAudio2 和 *.wav 加载，HRESULT 0x88960001

> ID：15146804
> 
> 赞同：0
> 
> 时间：2013-02-28T22:20:33.783
> 
> 标签：windows-8, windows-runtime, xaudio2

我正在尝试加载一个 *.wav 文件，它是一个 microsoft wav/8bit pcm 文件。我正在使用以下代码加载数据：

```
class WavFile : public AudioSource, public LoadableObject
{
public:
    WavFile( void )
        : AudioSource()
        , LoadableObject()
    { }

    virtual concurrency::task<void> Load( Platform::String^ path )
    {
        buffer = nullptr;

        BasicReaderWriter^ rw = ref new BasicReaderWriter();
        return rw->ReadDataAsync( path ).then([this, path]( const Platform::Array<byte>^ arr ){

            DWORD chunkId = 0, fileSize = 0, chunkSize = 0, extra = 0;

            ByteStream stream( arr );

            stream.ReadData( &chunkId, sizeof( chunkId ) );
            //chunkId = stream.ReadDWORD();
            char test[4];
            for(unsigned int i=0; i <4; i++)
                test[i] = ((char *)&chunkId)[i];
            if ( chunkId != 'FFIR' ) throw ref new Platform::FailureException( L"Could not get RIFF chunk in file " + path + L", chunkId=" + chunkId.ToString() );

            fileSize = stream.ReadDWORD();
            if ( fileSize <= 16 ) throw ref new Platform::FailureException( L"Wave file size is too small; " + path );

            extra = stream.ReadDWORD();
            for(unsigned int i=0; i <4; i++)
                test[i] = ((char *)&extra)[i];
            if ( extra != 'EVAW' ) throw ref new Platform::FailureException( L"Could not get WAVE chunk in file " + path + L", chunkId=" + chunkId.ToString() );

            bool formatChunk = false;
            for(unsigned int i = 12; i < fileSize; )
            {
                stream.Seek( i, true );
                chunkId = stream.ReadDWORD();
                stream.Seek( i + 4, true );
                chunkSize = stream.ReadDWORD();
                if ( chunkId = ' tmf' )
                {
                    stream.Seek( i + 8, true );
                    stream.ReadData( &waveFormat, sizeof( WAVEFORMATEX ) );
                    formatChunk = true;
                    break;
                }

                chunkSize += 8 + 1;
                chunkSize &= 0xfffffffe;
                stream.Seek( chunkSize, false );
                i += chunkSize;
            }
            if ( !formatChunk ) throw ref new Platform::FailureException( L"Could not get fmt chunk in file " + path );

            bool filledData = false;
            for(unsigned int j=12; j < fileSize; )
            {
                stream.Seek( j, true );
                chunkId = stream.ReadDWORD();
                for(unsigned int i=0; i <4; i++)
                    test[i] = ((char *)&chunkId)[i];
                stream.Seek( j + 4, true );
                chunkSize = stream.ReadDWORD();
                if ( chunkId == 'atad' )
                {
                    byte *bufferData = new byte[chunkSize];
                    stream.Seek( j + 8, true );
                    stream.ReadData( bufferData, chunkSize );
                    buffer = ref new Platform::Array<byte>( bufferData, (unsigned int)chunkSize );
                    delete bufferData;

                    xbuffer.AudioBytes = chunkSize;
                    xbuffer.pAudioData = buffer->Data;
                    xbuffer.PlayBegin = 0;
                    xbuffer.PlayLength = 0;

                    filledData = true;
                    break;
                }
                chunkSize += 8 + 1;
                chunkSize &= 0xfffffffe;
                j += chunkSize;
            }
            if ( !filledData ) throw ref new Platform::FailureException( L"Could not find data chunk in file " + path );

        });
    }
}; 
```

它正确解析 wav 文件，WAVEFORMATEX 数据如下所示：

`{ wFormatTag=1, nChannels=2, nSamplesPerSec=22050, nAvgBytesPerSec=44100, nBlockAlign=2, wBitsPerSample=8, cbSize=24932 }`

当我调用时`instance->CreateSourceVoice( &voice, wave->GetWaveFormat(), 0, XAUDIO2_DEFAULT_FREQ_RATIO, reinterpret_cast<IXAudio2VoiceCallback*>( &voiceIn[id]->callbacks ) )`，我得到 HRESULT=0x88960001，其中`instance`类型为`IXAudio2*`，我包含在一个类中，它在类中静态共享并使用我的类构造函数/析构函数初始化/销毁：

```
AudioManager::AudioManager(void)
{
    instance_count++;
    if ( instance == nullptr )
    {
        DX::ThrowIfFailed( XAudio2Create( &instance, 0 ) );
    }
}

AudioManager::~AudioManager(void)
{
    /* Remove all the voices that were added in this audio manager */

    instance_count--;
    if ( instance_count == 0 )
    {
        HaltAudio();
        instance->Release();
        instance = nullptr;
    }
} 
```

我在多个地方读到这个 ​​HRESULT 是某种 Windows 8 错误，一年多没有修复。我不能接受这是一个持续存在的错误，更倾向于认为这是我的代码的问题。你可以在这个 gist 中查看[我对 XAudio2 的完整实现](https://gist.github.com/mrozbarry/5060629)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:35:07.767

将 XAudio2SourceVoice* 的 sendList 设置为 NULL 时，IXAudio2 接口必须至少已设置一个主控声音。

# bit-manipulation - 无分支按位运算

> ID：15146806
> 
> 赞同：0
> 
> 时间：2013-02-28T22:20:39.433
> 
> 标签：bit-manipulation, bitwise-operators, bitmask

我正在寻找可以使用给定掩码确定的无分支按位运算：

> 掩码：0xFF0000 值：0xAA0000 返回：真
> 
> 掩码：0xFF0000 值：0xAA00AA 返回：假
> 
> 掩码：0xFF00FF 值：0xBB00AA 返回：真
> 
> 掩码：0xFF00FF 值：0x0000AA 返回：假
> 
> 掩码：0xFF00FF 值：0xAA0000 返回：假
> 
> 掩码：0xFF00FF 值：0x0A00AA 返回：真

那就是：它必须返回 true 如果：

*   掩码有一个字节设置为 0，该值必须具有与 0 相同的字节。
*   掩码的字节设置为 > 0，该值必须具有相同的字节，但不为 0。

编辑 ：

0xFFFF00 和 0x00AA00 不应该匹配。如果掩码的字节 > 0，则值必须具有相同的字节 > 0。

那就是：如果掩码具有这种模式[XX][00][XX]，则该值必须相同。其中 XX 可以是从 01 到 FF 的值。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:39:33.157

根据问题，我假设我们只处理低位三个字节。

一个简单的解决方案（17 次操作）：

```
((mask & 0x0000FF) == 0) == ((value & 0x0000FF) == 0) &&
((mask & 0x00FF00) == 0) == ((value & 0x00FF00) == 0) &&
((mask & 0xFF0000) == 0) == ((value & 0xFF0000) == 0) 
```

更好的解决方案（9 次操作）：

```
(((mask & 0x7F7F7F) + 0x7F7F7F | mask) & 0x808080) ==
(((value & 0x7F7F7F) + 0x7F7F7F | value) & 0x808080) 
```

第三种解决方案（9 次操作）：

```
!((((mask & 0x7F7F7F) + 0x7F7F7F | mask) ^
((value & 0x7F7F7F) + 0x7F7F7F | value)) & 0x808080) 
```

`!`如果您的代码准备将零作为通过，将非零作为失败，则第三种解决方案可以通过删除整个表达式的周围来减少到 8 个操作。

# prolog - 从左到右获取列表的乘积

> ID：15146810
> 
> 赞同：2
> 
> 时间：2013-02-28T22:20:43.400
> 
> 标签：prolog

如何从左到右获取列表的乘积？例如：

```
?- product([1,2,3,4], P).
P = [1, 2, 6, 24] . 
```

我认为一种方法是重载仿函数并使用 3 个参数：

`product([H|T], Lst) :- product(T, H, Lst).`

我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:22:30.993

您可以使用此处找到的库（lambda）： http : [//www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)

```
:- use_module(library(lambda)).
:- use_module(library(clpfd)).

product(L, R) :-
    foldl(\X^Y^Z^(Y = [] 
             -> Z = [X, [X]]
             ;   Y = [M, Lst],
                 T #= X * M,
                 append(Lst, [T], Lst1),
                 Z = [T, Lst1]),
          L, [], [_, R]). 
```

感谢@Mike_Hartl 的建议，代码非常简单：

```
product([], []).

product([H | T], R) :-
    scanl(\X^Y^Z^( Z #= X * Y), T, H, R). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:06:38.490

看起来像一个列表副本，只是乘以处理的最后一个元素。让我们从最左边的元素 1 开始：

```
product(L, P) :-
    product(L, 1, P).

product([X|Xs], A, [Y|Ys]) :-
    Y is X * A,
    product(Xs, Y, Ys).
product([], _, []). 
```

如果我们使用库（clpfd）：

```
:- [library(clpfd)].

product([X|Xs], A, [Y|Ys]) :-
    Y #= X * A,
    product(Xs, Y, Ys).
product([], _, []). 
```

它有效（仅适用于整数）“向后”

```
?- product(L, [1,2,6,24]).
L = [1, 2, 3, 4]. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T22:55:59.917

可能非常肮脏的解决方案（我是 Prolog 的新手）：

```
product([ListHead|ListTail], Answer) :- 
  product_acc(ListTail, [ListHead], Answer).

product_acc([ListHead|ListTail], [AccHead|AccTail], Answer) :-
  Product is ListHead * AccHead,
  append([Product, AccHead], AccTail, TempList),
  product_acc(ListTail, TempList, Answer).

product_acc([], ReversedList, Answer) :- 
  reverse(ReversedList, Answer). 
```

*   所以基本上在一开始我们调用另一个谓词，它有额外的“变量”Acc，它是累加器列表。

*   所以我们从原始列表中取出头（第一个数字）并将其放入累加器列表中。

*   然后我们总是从原始列表中获取头（第一个数字）并将其与累加器列表中的头（第一个数字）相乘。

*   然后我们必须附加我们通过与累加器的头部相乘然后与尾部相乘得到的新数字

*   然后我们再次调用相同的谓词，直到原始列表变为空，最后显然我们需要反转它。

它似乎工作

```
?- product([1,2,3,4], L).
L = [1, 2, 6, 24].

?- product([5], L).
L = [5].

?- product([5,4,3], L).
L = [5, 20, 60]. 
```

对不起，如果我的解释不是很清楚。随意发表评论。

# php - 如何从 24 个字符的字符串中获取唯一的 8 个字符的字符串？

> ID：15146811
> 
> 赞同：2
> 
> 时间：2013-02-28T22:20:43.913
> 
> 标签：php, string, mongodb, unique

我想从一个唯一的 24 个字符的字符串中获取一个 8 个字符的字符串，以便制作一个缩短的 URL。8 个字符的字符串必须基于唯一的 24 个字符的字符串。如果我创建一个随机的 8 个字符串，那么必须进行数据库查找才能看到它还没有被占用。另外我不想使用 24 个字符串的前 8 个字符或后 8 个字符。这 24 个字符是一个 MongoDB 对象 ID。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:26:47.350

8 太少了。

以下是如何从 24 中获得 16：

```
$id = '507f191e810c19729de860ea';

$str = base64_encode(implode('', array_map(function($c) { return chr(hexdec($c)); }, str_split($id, 2))));

var_dump($str); // UH8ZHoEMGXKd6GDq 
```

对于更少的字符，您需要更大的字符库，但问题是 - 没有安全的 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:34:33.300

假设你的 24 char 字符串是大写+小写字母数字，那就是

```
26+26+10 chars = 62 chars = 6 bits required to present them, and
24 * 6 = 144 bits to store them. 
```

144 位/8 位/字节 = 18 字节。您不能将 24 个字符压缩为 8 个字符而不会发生潜在冲突。8 个字符，8 位/字符 = 最大 64 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:24:25.787

我认为没有办法做到这一点，除非您确定 24 个字符的字符串具有某种模式，并且从该模式中您可能可以制作一个 8 个字符的唯一字符串。您可以使用 md5 创建 32 个字符的唯一字符串，例如取中间 8 个字符，但这只会减少冲突的机会，并且不能保证它是唯一的

# javascript - Chrome 不会从 javascript 预加载图像。适用于 IE、FF

> ID：15146812
> 
> 赞同：0
> 
> 时间：2013-02-28T22:20:47.797
> 
> 标签：javascript, image, preload

我正在尝试预加载 onClick 图像，并且该脚本在 Google Chrome （我想是 Safari）中除外......不知道发生了什么。有人有想法么？

```
<div style="display:hidden">
    <script type="text/javascript">
        <!--//--><![CDATA[//><!--
            var images = new Array()
            function preload() {
                for (i = 0; i < preload.arguments.length; i++) {
                    images[i] = new Image()
                    images[i].src = preload.arguments[i]
                }
            }
            preload(

            <?php
                for ($i = 0; $i < 6; $i++) {
                    if (!empty($imgs[$i])) {
                        $comma = $i == 0? '' : ',';
                        echo $comma."'http://www.htpcusa.com/drcom/ebay/image.php?img_source_url=" . $imgs[$i] . "&img_resize_to=500'";
                    }
                }
            ?>

            )
        //--><!]]>
    </script>
</div> 
```

稍后将通过此代码调用图像。

```
 <?php
            for ($i = 0; $i < 6; $i++) {
                if (!empty($imgs[$i])) {
                    echo "<div class=\"htpc_picturebox\">";
                    echo "<img id=\"imgs$i\" src=\"http://www.htpcusa.com/drcom/ebay/image.php?img_source_url=" . $imgs[$i] . "&img_resize_to=157\" alt=\"\"";
                    echo " onClick=\"javascript:document.getElementById('detailed_image').src='http://www.htpcusa.com/drcom/ebay/image.php?img_source_url=" . $imgs[$i] . "&img_resize_to=500';\" />";
                    echo "</div>";
                }
            }
        ?> 
```

那么 Chrome 没有做什么，IE 和 FF 都不能识别！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:34:06.280

它的`arguments.length`而不是`functionname.arguments.length`
和数组语法是`var images = []`但除此之外它看起来像它的[工作jsfiddle](http://jsfiddle.net/UyheK/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T22:25:36.220

`preload`函数在定义中不接受任何参数，但您正在尝试发送参数。`preload`您可以通过 php 输出初始化`images`数组，而不是通过 php 输出向函数发送参数。例如;

```
<?
$i=0;
while (something) {
echo "images[{$i}] = {$img}";
$i++;
?> 
```

# java - 在自定义评分脚本中找出与哪个字段匹配的术语

> ID：15146815
> 
> 赞同：0
> 
> 时间：2013-02-28T22:20:55.967
> 
> 标签：java, scala, elasticsearch

我正在使用带有 multiMatchQuery 的自定义分数查询。最终我想要的很简单，几乎不需要解释。在我的 Java 自定义分数脚本中，我希望能够找出结果与哪个字段匹配。

例子：

如果我搜索 Starbucks 并返回一个名为 Starbucks 的结果，那么我希望能够知道 name.basic 是与我的查询匹配的字段。如果我搜索咖啡并且星巴克回来了，我希望能够知道标签是匹配的字段。

有没有办法做到这一点？

搜索查询代码：

```
def basicSearchableSearch(t: String, lat: Double, lon: Double, r: Double, z: Int, bb: BoundingBox, max: Int): SearchResponse = {
    val multiQuery = filteredQuery(
      multiMatchQuery(t)
        //Matches businesses and POIs
        .field("name.basic").operator(Operator.OR)
                .field("name.no_space")
                //Businesses only
        .field("tags").boost(6f), 
      geoBoundingBoxFilter("location")
        .bottomRight(bb.botRight.y,bb.botRight.x)
        .topLeft(bb.topLeft.y,bb.topLeft.x)
    )

    val customQuery = customScoreQuery(
      multiQuery
    )
    .script("customJavaScript")
    .lang("native")
    .param("lat",lat)
    .param("lon",lon)
    .param("zoom",z)

    global.Global.getClient().prepareSearch("searchable")
      .setSearchType(SearchType.DFS_QUERY_THEN_FETCH)
      .setQuery(customQuery)
      .setFrom(0).setSize(max)
      .execute()
      .actionGet();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:04:34.160

它只对简单的查询很简单。在复杂的查询中，哪个字段匹配的问题实际上是非常重要的。所以，我想不出任何有效的方法来做到这一点。

也许，您可以考虑将自定义分数计算移到更接近匹配的位置。[multi_match](http://www.elasticsearch.org/guide/reference/query-dsl/multi-match-query.html)查询基本上是由 dis_max 查询组合的同一查询字符串上的一组匹配[查询](http://www.elasticsearch.org/guide/reference/query-dsl/dis-max-query.html)的[快捷](http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html)方式。所以，你目前正在构建这样的东西：

```
custom_score(
    filtered(
        dis_max(match_1, match_2, match_3)
    )
) 
```

您可以做的是将您的 custom_score 移动到 dis_max 下并构建如下内容：

```
filtered(
    dis_max(
        custom_score_1(match_1),
        custom_score_2(match_2),
        custom_score_3(match_3)
    )
) 
```

显然，这将是一个稍微不同的查询，因为`dis_max`它将根据自定义分数而不是原始分数进行操作。

# javascript - (NS_ERROR_FAILURE) Mozilla 浏览器

> ID：15146819
> 
> 赞同：4
> 
> 时间：2013-02-28T22:21:13.403
> 
> 标签：javascript, firefox, dom

我添加了一个事件处理程序来处理 firefox 中的 mousedown 事件，但是`NS_error failure`当遇到此事件时我收到一条消息，错误消息显示在 firefox 上，但 chrome 正确处理了该事件。

这是代码部分

```
document.getElementById("fancybox-close")
.addEventListener("mousedown", function () {
    c.video.currentTime = "00:00";
    document.getElementById("playr_video_curpos_" + c.video_id).innerHTML = c.parseTimeCode(c.video.currentTime);
}, false); 
```

我将事件侦听器附加到视频播放器上的关闭按钮，因此当您单击关闭按钮时，视频将被重置为`00:00`（注：）`c = this`。

如前所述，这适用于 chrome 但在 Firefox 上我收到此错误消息

```
NS_ERROR_FAILURE: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIDOMHTMLVideoElement.currentTime] 
```

知道为什么我会收到此消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-23T03:52:15.390

该`currentTime`属性接受一个数字，而不是一个字符串。在这种情况下，Chrome 必须进行类型强制，而 Firefox 则不需要。例如：

```
c.video.currentTime = 0.0; // Seek to zero seconds 
```

**参考**

*   [Mozilla 来源：nsIDOMHTMLMediaElement.idl](https://dxr.mozilla.org/mozilla-central/source/dom/interfaces/html/nsIDOMHTMLMediaElement.idl)

*   [闪烁来源：HTMLMediaElement.idl](http://src.chromium.org/viewvc/blink/trunk/Source/core/html/HTMLMediaElement.idl)

*   [intermittent failure in test_timeupdate_seek.html](https://bugzilla.mozilla.org/show_bug.cgi?id=596947)

*   [HTML5 Audio and Video: Seeking through Media](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_HTML5_audio_and_video#Seeking_through_media)

# javascript - 获取attr href时如何在jquery中进行回调？

> ID：15146823
> 
> 赞同：-1
> 
> 时间：2013-02-28T22:21:26.843
> 
> 标签：javascript, jquery, callback

我有这个代码：

```
$("#downloadPopup").attr("href") 
```

这给了我一个链接，但我想要一个回调以使链接被收集，例如：

```
 $("#downloadPopup").attr("href", function(){
        console.log($(this)); 
       // i need make sure the link value is available (promise).
    }); 
```

我试过了，但它不起作用，我不确定我是否必须将参数传递给回调。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T22:24:25.170

获取属性的值不是异步操作，因为信息在 DOM 中，您只需获取它即可。您不需要使用回调。

```
var pop = $("#downloadPopup")
var href = pop.attr("href");
doSomethingWith(pop, href); 
```

当您无法立即执行操作时，您需要使用回调。例如，当 HTTP 请求得到响应时，当用户单击链接时或当 a`setTimeout`达到 0 时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:28:57.747

这可以像这样简单地完成

```
// Here we save a reference to the orginal method
$.fn._attr = $.fn.attr;

// We can now define our own version
$.fn.attr = function ( attr, callback ) {

    // Now we test to make sure that the arguments are provided in the way you want
    if ( typeof attr === 'string' && typeof callback === 'function' ) {

        // Save the result of the callback
        var result = callback.call( this, attr );

        // If the callback returns a valid "value" we assign that as the new attribute
        if ( typeof result === 'string' ) {
            return $.fn._attr( attr, result );
        }

    }

    // If the arguments, or return of our function, are not what we expected, we execute the normal method here
    return $.fn._attr.apply( this, arguments );

}; 
```

要使用这个新`attr`功能，我们可以这样做

```
// Here prop is the name of the attribute you passed in
$( 'div' ).attr( 'foo', function ( prop ) {
    return prop + 'bar';
}); 
```

结果是

```
<div foo="foobar"></div> 
```

# magento - Magento - 谷歌浏览器设置新会话 - 无法以客户身份登录

> ID：15146837
> 
> 赞同：1
> 
> 时间：2013-02-28T22:22:34.523
> 
> 标签：magento, google-chrome

我还没到头发开始变白的地步。。

magento 创建了两个会话，这似乎是正确的，适用于 IE/FF：

```
PHPSESSID
hqndmkildduflb04lpgohu6pk5
www.domain.com
/
Tue, 12 Mar 2013 11:31:57 GMT
35
PHPSESSID
hqndmkildduflb04lpgohu6pk5
.www.domain.com
/
Tue, 12 Mar 2013 11:31:56 GMT 
```

奇怪的是，当注销并关闭浏览器时，重新打开并再次进入登录站点，现在创建了另一个会话，我现在无法登录：

```
PHPSESSID
ru9lvno0mt8kpj6lhb2g3vmlq3
.domain.com
/
Tue, 12 Mar 2013 11:42:51 GMT
35 
```

删除 3 个会话时，我可以再次登录，创建两个新会话。这只发生在 Chrome 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T04:47:11.993

我猜它实际上与cookie有关。在 System->Config->Web->SessionCookieManagement 中尝试将路径设置为“”（空），将域设置为“domain.com”，将仅使用 HTTP 设置为“YES”，将 Cookie 限制模式设置为“NO”。

# php - Wordpress If Parent { } else if child { }

> ID：15146842
> 
> 赞同：-6
> 
> 时间：2013-02-28T22:23:06.163
> 
> 标签：php, wordpress, parent, categories

我会说我是 php 的菜鸟，但我觉得我至少对它有点了解。

好的，所以我在 wordpress 中制作主题，但 category.php 有问题。当 wordpress 在 category.php 中读取时，我想要一个看起来像这样的 if 语句。

```
<?php
$cate = get_category($cat);

if ($cate->category_parent == 1) { 
     require_once ( get_template_directory() . '/category-parent.php' ); } 
else if($cate->category_parent == 0) { 
     require_once ( get_template_directory() . '/category-child.php' ) } 
endif; ?> 
```

是的，所以如果父母使用这个模板，如果孩子使用这个模板，我所说的模板是指 page.php 模板。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:27:13.147

```
$sep = '»';
$parents = get_category_parents( $cat, TRUE, $sep );
$parents = explode( $sep, trim( $parents, $sep ) );
if( 1 === count( $parents ) ) {
    /* No category parents. */
    require_once ( get_template_directory() . '/category-parent.php' );
}
else {
    /* One or more parent categories. */
    require_once ( get_template_directory() . '/category-child.php' );
} 
```

# android - SimpleCursorAdapter 内的按钮

> ID：15146846
> 
> 赞同：2
> 
> 时间：2013-02-28T22:23:34.793
> 
> 标签：android, android-layout, simplecursoradapter

我有一个使用 SimpleCursorAdapter 填充的 ListView。对于我列表中的每个项目，按以下顺序：TextView > RatingBar > TextView > ImageView。我想在 ImageView 上添加一个按钮，但我不知道如何...

我在哪里填充 ListView：

```
adapter = new SimpleCursorAdapter(this, R.layout.beerdrunk, cursor,
            new String[] { "beers", "notes", "numbers" }, new int[] {
                    R.id.champName, R.id.champNote, R.id.champDrunk });
    adapter.setViewBinder(binder);
    list = (ListView) findViewById(R.id.listMyBeers);
    list.setItemsCanFocus(true);
    list.setOnItemClickListener(onClickBeer);
    list.setAdapter(adapter); 
```

OnItemClickListener：

```
private OnItemClickListener onClickBeer = new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        System.out.println(""+ arg0);
        System.out.println(""+ arg1);
        System.out.println(""+arg2);
        Intent newActivity = new Intent(MyBeers.this, DetailsBeer.class);
        newActivity.putExtra("com.example.checkmybeer.DetailsBeer", ""
                + arg3);
        startActivityForResult(newActivity, 0);
    }
}; 
```

以及 beerdrunk 的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content">

<TextView
    android:id="@+id/champName"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="130"
    android:gravity="center_vertical"
    android:layout_gravity="center_vertical"
    android:maxLines="3"
    android:padding="5dp"
    android:paddingRight="20dp"
    android:singleLine="false"
    android:text="@string/beerBook"
    android:textColor="@color/black1"
    android:textSize="20sp"
    android:textStyle="bold" >
</TextView>

<View
    android:layout_width="1.5dip"
    android:layout_height="fill_parent" />

<RatingBar
    android:id="@+id/champNote"
    style="@style/beerRatingSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:isIndicator="true"        
    android:numStars="5"
    android:layout_margin="1.5dp"
    android:rating="5"
    android:stepSize="0.10" >
</RatingBar>

<View
    android:layout_width="1.5dip"
    android:layout_height="fill_parent" />

<TextView
    android:id="@+id/champDrunk"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_weight="30"
    android:gravity="right|center_vertical"
    android:padding="5dp"
    android:layout_marginLeft="5dp"
    android:text="200"
    android:textColor="@color/black1"
    android:textSize="20sp"
    android:textStyle="bold" />

<View
    android:layout_width="1.5dip"
    android:layout_height="fill_parent" />

<ImageView
    android:id="@+id/champPlusone"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical|right"
    android:layout_margin="5dp"
    android:layout_weight="30"
    android:gravity="right|center_vertical"
    android:clickable="false"
    android:src="@drawable/plus2" />
</LinearLayout> 
```

我试过类似的东西：

```
 if(arg2 instanceof ImageView){
     //do some stuff
    } 
```

但它不起作用......我怎样才能知道在我的“行”内点击了哪个视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:31:09.620

如果要单击图像，请使用[ImageButton](http://developer.android.com/reference/android/widget/ImageButton.html)而不是 ImageView。
然后，您可以`onClick`在调用 Activity 中的方法的按钮上设置属性。

扩展一个[SimpleCursorAdapter](http://developer.android.com/reference/android/widget/ListAdapter.html)并在该方法中为每个按钮`bindView`添加侦听器。`onClick`（也许让它在你的活动中调用一个方法......`public void buttonClicked(int position, View v)...`这样你就知道点击了哪一行和哪个视图。

这是您可以使用的[CursorAdapter](http://developer.android.com/reference/android/widget/CursorAdapter.html)的示例实现。

```
class CustomCursorAdapter extends CursorAdapter{
    LayoutInflater inflater;

    public CustomCursorAdapter(Context context, Cursor c, int flags){
        super(context,c,flags);
        inflater = LayoutInflater.from(context);
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor){
        int row_id = cursor.get('_id');  //Your row id (might need to replace)
        ImageButton button = (ImageButton) view.findViewById(R.id.champPlusone);
        button.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v){
                //ADD STUFF HERE you know which row is clicked. and which button
            }
        });
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent){
        LayoutInflater inflater = LayoutInflater.from(context);
        View v = inflater.inflate(R.layout.beerdrunk, parent, false);
        bindView(v,context,cursor);
        return v;
    }

} 
```

;)

# java - 线程“main”java.lang.ClassCastException 中的异常：hello 无法转换为 java.awt.event.ActionListener

> ID：15146851
> 
> 赞同：0
> 
> 时间：2013-02-28T22:23:57.673
> 
> 标签：java, swing, user-interface, actionlistener

好像我在我的代码中发现了一个新问题。我的代码没有（可见的）错误，但我仍然没有框架。请帮忙

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
public class hello{
//Int's and things
static JButton Play = new JButton("<PLAY>");
static JFrame pane = new JFrame("CIrCUT 0.0.2");
static JLabel Title = new JLabel("CIrCUT");
static JLabel none = new JLabel(" ");
static JPanel panel = new JPanel(new GridLayout(10,10,10,10));
static JButton Options = new JButton("<OPTIONS>");
static JPanel panel2 = new JPanel(new GridLayout(10,10,10,10));
static String b[]  = new String[3];
static int panelLoct =1;
JComboBox optionlist = new JComboBox();

    void initialize(){
    b[0] = "High";
    b[1] = "Medium";
    b[2] = "Low";

    //title
    pane.setTitle("CIrCUT 0.0.2");
    //drop down

    optionlist .setModel(new DefaultComboBoxModel(new String[] {"Option", "High", "Medium",  "Low"}));
    optionlist.setSelectedIndex(3);
    optionlist.addActionListener((ActionListener) this);
    //other pane-related things
    if(panelLoct==1){
    pane.setLayout(new GridLayout(10,10));
    panel.setMaximumSize(new Dimension(500,500));
    pane.setSize(500,500);
    pane.setMaximumSize(new Dimension(500,500));
    panel.add(Title);
    panel.add(none);
    panel.add(Play);
    panel.add(Options);
    panel2.add(optionlist);
    Play.setSize(new Dimension(500,450));
    pane.setLocation(500,50);
    pane.setBackground(Color.lightGray);
    pane.setContentPane(panel);
    pane.pack();
    pane.setMinimumSize(new Dimension(500,500));
    pane.setContentPane(panel);
    OptionButtonHandler cbHandler = new OptionButtonHandler();
    Options.addActionListener(cbHandler);
    pane.setVisible(true);
    }
}
    public void windowClosing(WindowEvent e)
    {
    System.exit(0);
    }
     private static class OptionButtonHandler implements ActionListener

         {
             public void actionPerformed(ActionEvent e){
                 pane.remove(panel);
                 pane.add(panel2);
             }
         }
     public void actionPerformed(ActionEvent e) {
            JComboBox cb = (JComboBox)e.getSource();
            cb.getSelectedItem();
     }

public static void main(String args[])
{
    hello a = new hello();
    a.initialize();
}
} 
```

任何帮助都将不胜感激。这是我尝试运行它时遇到的错误

```
Exception in thread "main" java.lang.ClassCastException: hello cannot be cast to java.awt.event.ActionListener
    at hello.initialize(hello.java:39)
    at hello.main(hello.java:83) 
```

这可能是一个新手错误，但找不到如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:26:06.687

您的程序*确实*有一个明显的错误，正是它失败的地方：

```
optionlist.addActionListener((ActionListener) this); 
```

`this`是对 的实例的引用`hello`。该类`hello`未实现`ActionListener`- 那么您如何期望该演员成功？

`ActionListener`你给出的唯一实现是`OptionButtonHandler`. 也许你的意思是：

```
optionlist.addActionListener(new OptionButtonHandler()); 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:26:16.897

```
 optionlist.addActionListener((ActionListener) this); 
```

仅仅因为你会做某事并不意味着它是可能的。在这种情况下，`hello`不是一个`ActionListener`，所以这将失败。

如果你发现自己在铸造，你可能会遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:28:55.357

您必须实现 ActionListener。

```
public class Hello implements ActionListener{ 

} 
```

# android - 使用 PhoneGap 2.4 的 WebIntent 错误。参考错误：未定义WebIntent？

> ID：15146858
> 
> 赞同：1
> 
> 时间：2013-02-28T22:24:22.843
> 
> 标签：android, cordova, webintents

我正在尝试在我的 phonegap 应用程序中打开 pdf 和 ppt 文件。我正在使用 phonegap 2.4 和最新版本的 WebIntent 插件。我按照 [Webintent上的说明做了](https://github.com/phonegap/phonegap-plugins/tree/master/Android/WebIntent)

但我仍然收到此错误：

*参考错误：未定义 WebIntent*

这是我的 html 头部分的一部分：

```
 <script type="text/javascript" src="js/cordova-2.4.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script> 
    <script type="text/javascript" src="js/webintent.js"></script> 
```

这是我的 config.xml 文件的一部分

```
 <cordova>
     ...
   <plugins>
     ...
    <plugin name="Globalization" value="org.apache.cordova.Globalization"/>
    <plugin name="InAppBrowser" value="org.apache.cordova.InAppBrowser"/>
    <plugin name="WebIntent" value="com.borismus.webintent.WebIntent"/>
   </plugins>
 </cordova> 
```

这是我使用插件的代码的js部分

```
 function openFile(filePath){
    window.plugins.webintent.StartActivity({
    action: WebIntent.ACTION_VIEW,
    url: filePath},
    function(){},
    function(){alert("failed to open file")} 
    );
    } 
```

其中 filePath 类似于“file:///mnt/sdcard/file.pdf”

请有人告诉我我做错了什么。PS：我对phonegap和eclipse很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T18:42:52.823

即使有修改操作的评论：WebIntent.ACTION_VIEW with window.plugins.webintent.ACTION_VIEW 对我来说也失败了。

我所做的是直接把 WebIntent.ACTION_VIEW 的值

在 webintent.js 中是：

`WebIntent.ACTION_VIEW= "android.intent.action.VIEW";`

我的代码示例：

```
window.plugins.webintent.startActivity({
        action: 'android.intent.action.VIEW',
        type: "application/pdf",
        url: "file:///storage/sdcard0/Mapfre/Documentos/readme.pdf"},
          function() {WL.Logger.debug(">> OK");},
          function() {WL.Logger.debug(">> ERROR");}
          ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:10:41.193

问题出在：`action: WebIntent.ACTION_VIEW,`

`WebIntent`曾经是一个全局的 (yuck)，但现在被包裹在一个闭包中。

由于您正在使用`window.plugins.webintent`，您将希望将其更改为：

```
function openFile(filePath){
  window.plugins.webintent.StartActivity({
    action: window.plugins.webintent.ACTION_VIEW,
    url: filePath},
    function(){},
    function(){alert("failed to open file")} 
  );
} 
```

我已经修改了插件的文档示例。

# python - Python & Sqlite：由于语法错误而无法执行查询

> ID：15146871
> 
> 赞同：1
> 
> 时间：2013-02-28T22:25:35.907
> 
> 标签：python, sql, sqlite

我有一个装满东西的 sqlite 数据库，我目前正在编写代码来搜索和提取我想要的数据。这是我遇到麻烦的地方：

```
conn = sqlite3.connect("ensembl.db")
cur = conn.cursor()
...
cur.execute('SELECT b.chr,(b.start-e.start) as StartD, (b.end-e.end) as EndD,b.tcon,b.tname,b.gname FROM ensembl e blast b WHERE b.tcon=? AND b.tname=e.tname AND b.gname=e.gname AND b.chr=e.chr',tcon)
        print cur.fetchone() 
```

这将返回错误：

```
File "data.py", line 12, in <module>
    cur.execute('SELECT b.chr,(b.start-e.start) as StartD, (b.end-e.end) as EndD,b.tcon,b.tname,b.gname FROM ensembl e blast b WHERE b.tcon=? AND b.tname=e.tname AND b.gname=e.gname AND b.chr=e.chr',tcon)
sqlite3.OperationalError: near "blast": syntax error 
```

我不知道这个语法错误是什么，python 指的是——我之前在 sqlite&python 中做过与此类似的查询（当然，不是那么复杂），它们已经奏效了。我尝试了各种其他方法，但似乎都没有奏效......我错过了一些非常简单的东西吗？

另外，另一个问题 - 一旦我得到这个工作，从结果中单独提取列的最佳方法是什么？我之前使用过 cur.fetchone() 并将其分配给单个变量以用于仅返回一件事的查询，但不确定它是否适用于返回多个事物的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:27:00.283

您需要用逗号分隔 - 部分中的表格`FROM`：

```
[..] FROM ensembl e, blast b [..] 
```

.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:31:01.567

要提取列，您可以将 lambda 函数映射到列表列表，即第一列的 map(lamda x: x[0], listoflist)，第二列的 map(lambda x: x[1], listoflists) 等。

您甚至可以创建一个执行此操作的 lambda 函数，即

```
extractor = lambda i,l : map(lambda x: x[i],l) 
```

并使用

```
extractor(i,listofLists) 
```

获取第 i 列的列表。

# cakephp - cakephp $this->redirect 在函数中不起作用

> ID：15146874
> 
> 赞同：1
> 
> 时间：2013-02-28T22:25:48.130
> 
> 标签：cakephp, cakephp-2.3

我是蛋糕新手，我正试图在保存事件后让函数重定向..它适用于其他代码，例如用户，但不适用于事件之一..

该功能确实保存了事件，只是它不会重定向或使用 SETFLASH

这是我的事件控制器添加功能的代码：

```
public function add() {
        if ($this->request->is('post')) {
            $this->Event->create();
            if ($this->Event->save($this->request->data)) {
                $this->Session->setFlash(__('The event has been saved'));
                $this->redirect(array('action' => 'eventmanage'));
            } else {
                $this->Session->setFlash(__('The event could not be saved. Please, contact the administrator.'));
            }
        }
    } 
```

任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T21:08:41.690

最可能的原因是您的应用程序在发送重定向标头之前输出了一些数据。

`<?php`检查您的标签之前或结束标签之后是否有空格`?>`（您应该在仅限 php 的文件中删除这些空格），或者您的文件是否包含 utf-8 BOM 等。

您可以通过检查 firebug 或 Chrome webinspector 中的响应来检查这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T07:39:00.420

我只是想添加评论，但还不能。

如果您想知道哪个文件正在输出阻止重定向的数据，您必须非常彻底。

在我的情况下，就像我在**模型**中放置的评论（html 评论）一样无辜，我想从该视图中重定向（不是很明显找到）。这个没有被重定向的空白页面可以像**换行**一样简单，或者在两者之前的**空格**`<?php ?>`都很难找到，并且两者都会阻止重定向。

如果您遇到此问题，希望我的提示对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T11:11:15.630

在过滤功能之前使用这个

```
 header("Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0"); // // HTTP/1.1
    header("Pragma: no-cache"); 
```

# linux - 检查静态链接的可执行文件中的文本段

> ID：15146879
> 
> 赞同：1
> 
> 时间：2013-02-28T22:26:09.490
> 
> 标签：linux, ld, elf

我有一个静态链接的应用程序二进制文件，它链接到多个用户库和 pthread 库。该应用程序仅使用这些库中的一组有限的函数。从上一篇文章[库和可执行文件的大小](https://stackoverflow.com/questions/370549/size-of-a-library-and-the-executable)以及我的实验中，我意识到链接器仅包含使用/需要的函数（在可执行文件中），而不是库的全部内容。

我想找出每个库中的哪些函数链接到可执行文件及其地址（VMA）。最终，我想编译一个列表，其中包含基于映射到文本段的函数（在库中）的每个库的开始和结束虚拟内存地址 (VMA)。

一种方法是在库中创建一个函数列表，然后在可执行文件中查找每个函数以及它映射到的相应虚拟内存地址。但这对我来说似乎相当乏味。有没有更简单的方法来实现这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:30:25.543

> 我想找出每个库中的哪些函数链接到可执行文件及其地址（VMA）。

将`-Wl,-Map=foo.map`参数添加到您的链接行。生成的`foo.map`文件将告诉您以上所有内容。

> 最终我想编译一个列表，其中包含每个库的开始和结束虚拟内存地址 (VMA)

这假设链接器不会重新排序函数（因此来自单个库的所有函数都占用连续的文本地址范围）。这个假设在简单的情况下可能是正确的，但不能保证。参见例如这个[补丁](http://gcc.gnu.org/ml/gcc-patches/2011-09/msg01440.html)。

# neo4j - 优化 Neo4j Cypher 查询

> ID：15146883
> 
> 赞同：1
> 
> 时间：2013-02-28T22:26:19.077
> 
> 标签：neo4j, cypher

我正在做的是获取所有*个人资料*与**用户个人资料*有特定直接关系的人*，如果这些个人资料有*备用个人资料**获取那些以防*用户备用个人资料**与它有关系。我还需要关系的方向。

我的问题是，大约 10000 个节点需要大约 5 秒才能获取数据。我对节点和关系有自动索引。

这就是我的节点的关联方式：

> 用户-[:profile]->ProfileA-[:related]->ProfileB<-[?:me]->ProfileB2<-[?:related]-ProfileA2<-[:profile]-User

我的查询如下所示：

```
START User=node({source}) 
MATCH User-[:profile]->ProfileA-[rel:related]->ProfileB 
WHERE User-->ProfileA-->ProfileB 
WITH ProfileA, rel, ProfileB 
MATCH ProfileB<-[?:me]->ProfileB2<-[relB?:related]-ProfileA2<-[:profile]-User 
WHERE relB IS NULL OR User-->ProfileA-->ProfileB<-->ProfileB2<--ProfileA2<--User
RETURN ProfileB, COLLECT(ProfileB2), rel, relB
LIMIT 25 
```

知道如何优化查询吗？

* * *

*   [个人资料：个人资料B]
*   [用户个人资料： ProfileA]
*   [备用配置文件：ProfileB2]
*   [用户备用个人资料： ProfileA2]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T01:38:13.150

您正在使用`WHERE`不需要的子句。我们以第一个为例：

```
WHERE User-->ProfileA-->ProfileB 
```

该子句说“仅将结果限制给与 ProfileA 有关系的用户，而 ProfileA 本身与 ProfileB 有关系”。但是，您的 match 子句已经保证了这一点。您正在浪费 CPU 周期来重新验证已经正确的事情。

```
WITH ProfileA, rel, ProfileB 
```

您没有进行任何类型的聚合、计算或重新分配，因此不需要此`WITH`子句。没有它你可以继续。

```
WHERE relB IS NULL OR User-->ProfileA-->ProfileB<-->ProfileB2<--ProfileA2<--User 
```

同样，您没有从该`WHERE`条款中获得任何价值。这句话说“将结果限制为未找到 relB 的路径或找到以下路径的路径...”，然后列出与`MATCH`.

所以，删除所有那些无关的子句，你会得到：

```
START User=node({source}) 
MATCH User-[:profile]->ProfileA-[rel:related]->ProfileB<-[?:me]->ProfileB2<-[relB?:related]-ProfileA2<-[:profile]-User 
RETURN ProfileB, COLLECT(ProfileB2), rel, relB
LIMIT 25 
```

尝试一下，看看性能是否更好。如果这还不够，那么您可能需要在您的问题中添加更多信息——就我自己而言，我并不完全理解您的关系的实际*含义*（例如，“我”关系是什么？它象征什么？ )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:12:21.077

这就是我解决它的方法：

```
START User=node({source}) 
MATCH User-[:profile]->ProfileA-[rel:related]->ProfileB<-[?:me]->ProfileB2-[relB?:related]-ProfileA2
WHERE relB IS NULL OR User-[:profile]->ProfileA2
RETURN ProfileB, COLLECT(ProfileB2), rel, relB
LIMIT 25 
```

`ProfileA2<-[:profile]-User`似乎产生了一个无限循环。

仍然欢迎提出建议。

# cuda - 条件同步线程和死锁（或不）

> ID：15146886
> 
> 赞同：6
> 
> 时间：2013-02-28T22:26:30.493
> 
> 标签：cuda

跟进 Q：[EarlyExit](https://stackoverflow.com/questions/11654171/does-early-exiting-a-thread-disrupt-synchronization-among-cuda-threads-in-a-bloc?rq=1)和[DroppedThreads](https://stackoverflow.com/questions/6666382/can-i-use-syncthreads-after-having-dropped-threads)

根据上面的链接，下面的代码应该是死锁的。
请解释为什么这不会死锁。（费米上的 Cuda 5）

```
__device__ int add[144];
__device__ int result;

add<<<1,96>>>();  // the calling 

__global__ void add() {
 for(idx=72>>1; idx>0; idx>>=1) {
  if(thrdIdx < idx) 
   add[thrdIdx]+= add[thrdIdx+idx];
  else
   return;
  __syncthreads();
 }

 if(thrdIdx == 0)
  result= add[0];
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T02:41:28.143

从技术上讲，这是一个定义不明确的程序。

大多数但不是全部（例如 G80 不支持）NVIDIA GPU 以这种方式支持提前退出，因为硬件为每个块维护一个活动线程计数，并且该计数用于屏障同步而不是块的初始线程计数.

因此，当`__syncthreads()`你的代码到达时，硬件不会等待任何已经返回的线程，并且程序运行没有死锁。

这种风格更常见的用法是：

```
__global__ void foo(int n, ...) {
  int idx = threadIdx.x + blockIdx.x * blockDim.x;
  if (idx >= n) return;
  ... // do some computation with remaining threads
} 
```

重要提示：屏障计数是按经纱更新的（请参阅[此处](https://stackoverflow.com/questions/6666382/can-i-use-syncthreads-after-having-dropped-threads)），而不是按线程更新。因此，您可能会遇到这样的情况，例如，只有少数（或零个）线程提前返回。这意味着屏障计数不会减少。但是，只要每个 warp 中至少有一个线程到达屏障，它就不会死锁。

所以一般来说，你需要谨慎使用屏障。但具体来说，像这样的（简单）提前退出模式确实有效。

编辑：针对您的具体情况。

迭代Idx == 36：2个活动warp，因此屏障退出计数为64。来自warp 0的所有线程都到达屏障，将计数从0增加到32。来自warp 1的4个线程到达屏障，将计数从32增加到64，并且warp 0和1 从屏障中释放出来。阅读上面的链接以了解为什么会发生这种情况。

迭代 Idx==18：1 个活动 warp，因此屏障退出计数为 32。来自 warp 0 的 18 个线程到达屏障，计数从 0 增加到 32。满足屏障并释放 warp 0。

ETC...

# macos - performSelectorInBackground：在 mac os x 10.6.3 上立即崩溃

> ID：15146888
> 
> 赞同：0
> 
> 时间：2013-02-28T22:26:44.597
> 
> 标签：macos, cocoa, crash-reports, performselector

我正在尝试测试我的 Mac os 应用程序，它在 10.8 上运行良好，但是当我开始在 mac 10.6.3 (iatkos s3) 上测试它时，我遇到了一些问题。

首先，我必须使用单独的计算机来安装 10.6.3，因为我的 macbook air 不允许我安装 10.6.3（硬件比软件更新）。我所做的是，在 xcode 中运行它，获取 .app 文件，将其放入我的 10.6.3 应用程序文件夹，然后运行它。

我在那里放了一些跟踪日志，这是我的代码：

```
- (void) startMethodInBackground: (id) sender {
    NSLog(@"line 101"); //this shows
    [self performSelectorInBackground:@selector(myOtherMethod:) withObject:sender];
    NSLog(@"line 102"); //not showing
}

- (void) myOtherMethod: (id) sender {
    NSLog(@"line 201"); //not showing 
    @autoreleasepool {
        NSLog(@"line 202"); //again not showing
        @synchronized (self) {
            NSLog(@"line 203"); //not showing
            ... ...
        }
    }
}

Version:         1.0 (1)
Code Type:       X86-64 (Native)
Parent Process:  launchd [1126]

Date/Time:       2013-02-28 16:53:10.668 -0500
OS Version:      Mac OS X 10.6.3 (10D573)
Report Version:  6

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000000
Crashed Thread:  2
... (too long so I trimmed it)
...
    Thread 2 Crashed:
0   ???                             000000000000000000 0 + 0
1   com.apple.Foundation            0x00007fff814e4ead __NSThread__main__ + 1429
2   libSystem.B.dylib               0x00007fff86db38b6 _pthread_start + 331
3   libSystem.B.dylib               0x00007fff86db3769 thread_start + 13

Thread 2 crashed with X86 Thread State (64-bit):
  rax: 0x0000000000000000  rbx: 0x0000000100863400  rcx: 0x0000000000000000  rdx: 0x00000001001417b0
  rdi: 0x00000001001417b0  rsi: 0x0000000000000000  rbp: 0x0000000100480c90  rsp: 0x0000000100480b08
   r8: 0x0000000000000000   r9: 0x0000000100201530  r10: 0x0000000100210870  r11: 0x0000000100002120
  r12: 0x00007fff5fbfe800  r13: 0x0000000000001b07  r14: 0x00007fff814e4918  r15: 0x0000000102e0ec20
  rip: 0x0000000000000000  rfl: 0x0000000000010202  cr2: 0x0000000000000000 
```

正如您在我的代码中看到的那样，只要我使用 performSelectorInBackground: 调用 myOtherMethod:，它就崩溃了！！

所以我的问题是：

1.  调用 performSelectorInBackground 崩溃的任何原因？我检查了 performSelectorInBackground 方法，它在 10.6 上应该可以正常工作（苹果文档说 10.5 或更高版本），所以我真的要知道发生了什么！！！

2.  崩溃报告对我来说真的没有意义，所以在现实生活中你怎么能用这样的报告进行调试呢？在 xcode 中，如果有任何问题，它会崩溃，并会告诉我是哪个方法导致了问题以及问题出在哪里，但是正如您所看到的，崩溃报告并没有告诉我太多！

任何帮助表示赞赏。乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:37:34.437

它看起来像一个损坏的堆栈。

您是否可能在 中分配大量内存`myOtherMethod`，例如大型 C 数组？当你调用`myOtherMethod`主线程时会发生什么？

# c# - 每小时在 Excel 插件中自动运行一个方法（不是通过 VBA）

> ID：15146894
> 
> 赞同：0
> 
> 时间：2013-02-28T22:27:04.127
> 
> 标签：c#, excel, add-in

我的 Excel 插件是用 C#、ExcelDNA、NetOffice 编写的。有一种方法可以从服务器检索每小时数据并在 Excel 中显示。

我想要一种每小时从服务器检索数据的方法。我们不想使用 VBA，因为它会给最终用户带来麻烦。

有人可以指出我正确的链接或路径吗？

谢谢

编辑

我的方法不是 UDF，假设用户在公式栏中输入 =MyMethod(sym1, other params) 他必须单击“GetData”按钮才能从 Web 服务获取数据。这是一个手动过程。现在我想要的是，一旦输入公式 MyMethod 并手动“GetData”一次，我想要一种方法来每隔一小时“GetData”，这样用户就不必手动进行。我想到了一个计时器，但如果一个小时后调用该过程并尝试将数据绘制到 Excel 但 Excel 正忙于做某事，则绘图将失败。所以也许还有其他方法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-25T03:24:08.377

运行计划任务，该任务执行 Excel 并打开在 Workbook_Open 事件上调用了附加 VBA 宏的文件。

# grails - Grails 2.2.0，Spring Security - 注销功能不起作用

> ID：15146897
> 
> 赞同：1
> 
> 时间：2013-02-28T22:27:25.313
> 
> 标签：grails, spring-security, basic-authentication, grails-2.0

我正在使用 GGTS 和 Grails 2.2.0 并且已经实现了 Spring Security 和 Basic Auth 以及以下选项

**配置文件**

```
grails.plugins.springsecurity.useBasicAuth = true
grails.plugins.springsecurity.digest.realmName = 'someval' 
```

**注销控制器**{

```
def index = {
    redirect uri: SpringSecurityUtils.securityConfig.logout.filterProcessesUrl  
} 
```

当我点击注销时——它不会将用户注销，而是将我带回主页。我查看了论坛，但没有找到任何有效的方法。

我想确保无论实施何种解决方案，都完全注销使用，并且用户在不重新登录的情况下无法返回原始页面。

任何指针/建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:57:43.177

问题是 HTTP 基本身份验证。它没有指定注销的方式。我相信有一些“非官方”方法有效（请参阅[如何使用 BASIC 身份验证从网站注销用户？](https://stackoverflow.com/questions/233507/how-to-log-out-user-from-web-site-using-basic-authentication)），但 Spring Security 似乎没有使用它们。

最好的解决方案是完全避免基本身份验证。如果这不是一个选项，您将不得不编写一个自定义 LogoutController，例如发送回 401 错误代码。

# json - OSX 上 MonoDevelop 中的 System.Json 在哪里？

> ID：15146900
> 
> 赞同：0
> 
> 时间：2013-02-28T22:27:27.980
> 
> 标签：json, macos, mono

我在 OSX 上运行了 MonoDevelop 3.1.1。我想使用 System.Json 但我在任何地方都找不到它。编辑引用时，我看不到任何看起来像 System.Json 的东西。如何在我的项目中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:49:50.330

根据[MSDN](http://msdn.microsoft.com/en-gb/library/system.json.jsonobject.aspx)，它应该在 System.Runtime.Serialization 程序集中。而且您应该针对 4.5 配置文件。

顺便说一句，强烈建议升级到 Xamarin Studio (MonoDevelop 4.0)。

# compare - 在 NASM 中，我想根据其 ASCII 值比较输入击键

> ID：15146903
> 
> 赞同：-1
> 
> 时间：2013-02-28T22:27:42.393
> 
> 标签：compare, ascii, nasm

我正在处理的一个简单程序（用于家庭作业）要求我将击键作为输入并返回它所属的类别（它是可打印的字符、小数等）

我正在使用 cmp 将击键与其类别中的最大值和/或最小值进行比较（例如，如果击键的 ASCII 代码高于 0x7F，则它是可打印字符）

但是，在我的比较中显然有些东西不起作用，因为无论如何，即当我使用退出按钮作为输入时，它不会打印“控制键”。

是不是密钥需要更多处理才能根据 ASCII 值进行比较？

这是我的代码

```
 segment .data
    controlKey: db "Control Key", 10
    controlLen: equ $-controlKey

    printableKey: db "Printable", 10
    printableLen: equ $-printableKey

    decimalKey: db "Decimal", 10
    decimalLen: equ $-decimalKey

segment .bss

    key resb 2

segment .text

    global main
main:
    mov eax, 3  ; system call 3 to get input
    mov ebx, 0  ; standart input device
    mov ecx, key    ; pointer to id
    mov edx, 2  ; take in this many bytes
    int 0x80    

control:        ; check if it's a control key
    mov ebx, 31 ; highest control key
    mov edx, key
    cmp edx, ebx
    jg  printable
    mov eax, 4
    mov ebx, 1
    mov ecx, controlKey
    mov edx, controlLen
    int 0x80
    ; jmp exit  ; It's obviously not any of the other categories

printable:  ; Tell that it's a printable symbol
    mov eax, 4
    mov ebx, 1
    mov ecx, printableKey
    mov edx, printableLen
    int 0x80
decimal: 
    mov ebx, 30h    ; smallest decimal ASCII 
    mov edx, key
    cmp edx, ebx
    jl  uppercase
    mov ebx, 39h    ; test against 9
    cmp edx, ebx
    jg  uppercase
    mov eax, 4
    mov ebx, 1
    mov ecx, decimalKey
    mov edx, decimalLen
    int 0x80

uppercase:  
lowercase:

    mov eax, 4  ; system call 4 for output
    mov ebx, 1  ; standard output device
    mov ecx, key    ; move the content into ecx
    mov edx, 1  ; tell edx how many bytes
    int 0x80    ;

exit:
    mov eax, 1
    xor ebx, ebx
    int 0x80 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:05:25.863

The Escape key won't be read by your application, since it is - most probably - caught by the terminal that your application runs in. I can see that you're using the `read` syscall in your code, which is, of course, fine, but you should remember that this function only provides reading from a file descriptor, which doesn't necessarily have to contain all the control signals sent from the keyboard. The file descriptor (`stdin`) doesn't even have to *come* from the keyboard, since a file might be redirected to your process as standard input.

I don't know if there's a good way of achieving (capturing **keystrokes**, not the **data** that they represent - and this is what you're doing now) what you're trying to do just with system calls in Linux. You could try using some terminal controlling library, for example `ncurses` or `termios`, but I guess that isn't a part of your assignment.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:18:23.307

我已经这样做了一段时间，这里有一个示例来展示如何打开/关闭字符回显，以及打开/关闭规范模式。运行时，按一个键，屏幕上会显示keycode，按shift+q后程序退出：

终端.asm

```
ICANON      equ 1<<1
ECHO        equ 1<<3

sys_exit    equ 1
sys_read    equ 3
sys_write   equ 4
stdin       equ 0
stdout      equ 1

global _start

SECTION     .bss
lpBufIn     resb    2
lpBufOut    resb    2
termios     resb 36 

section .text
_start:
    call    echo_off
    call    canonical_off 

.GetCode:    
    call    GetKeyCode
    movzx   esi, byte[lpBufIn]
    push    esi
    call    PrintNum
    pop     esi
    cmp     esi, 81
    jne     .GetCode

    call    echo_on
    call    canonical_on

    mov     eax, sys_exit
    xor     ebx, ebx
    int     80H

;~ #########################################
GetKeyCode: 
    mov     eax, sys_read
    mov     ebx, stdin
    mov     ecx, lpBufIn
    mov     edx, 1
    int     80h
    ret

;~ #########################################
canonical_off:
        call read_stdin_termios

        ; clear canonical bit in local mode flags
        mov eax, ICANON
        not eax
        and [termios+12], eax

        call write_stdin_termios
        ret

;~ #########################################
echo_off:
        call read_stdin_termios

        ; clear echo bit in local mode flags
        mov eax, ECHO
        not eax
        and [termios+12], eax

        call write_stdin_termios
        ret

;~ #########################################
canonical_on:
        call read_stdin_termios

        ; set canonical bit in local mode flags
        or dword [termios+12], ICANON

        call write_stdin_termios
        ret

;~ #########################################
echo_on:
        call read_stdin_termios

        ; set echo bit in local mode flags
        or dword [termios+12], ECHO

        call write_stdin_termios
        ret

;~ #########################################
read_stdin_termios:
        mov eax, 36h
        mov ebx, stdin
        mov ecx, 5401h
        mov edx, termios
        int 80h
        ret

;~ #########################################
write_stdin_termios:
        mov eax, 36h
        mov ebx, stdin
        mov ecx, 5402h
        mov edx, termios
        int 80h
        ret

PrintNum:   
    push    lpBufOut
    push    esi 
    call    dwtoa

    mov     edi, lpBufOut
    call    GetStrlen
    inc     edx
    mov     ecx, lpBufOut
    mov     eax, sys_write
    mov     ebx, stdout
    int     80H     
    ret     

;~ #########################################  
GetStrlen:
    push    ebx
    xor     ecx, ecx
    not     ecx
    xor     eax, eax
    cld
    repne   scasb
    mov     byte [edi - 1], 10
    not     ecx
    pop     ebx
    lea     edx, [ecx - 1]
    ret

;~ #########################################      
dwtoa:
;~ number to convert = [ebp+8]
;~ pointer to buffer that receives number = [ebp+12]
    push    ebp
    mov     ebp, esp

    push    ebx
    push    esi
    push    edi

    mov     eax, [ebp + 8]
    mov     edi, [ebp + 12]

    test    eax, eax
    jnz     .sign

.zero:
    mov     word [edi], 30H
    jmp     .done

.sign:
    jns     .pos
    mov     byte [edi], "-"
    neg     eax
    add     edi, 1

.pos:
    mov     ecx, 3435973837
    mov     esi, edi

.doit:
    mov     ebx, eax
    mul     ecx
    shr     edx, 3
    mov     eax, edx
    lea     edx, [edx * 4 + edx]
    add     edx, edx
    sub     ebx, edx
    add     bl, "0"
    mov     [edi], bl
    add     edi, 1
    cmp     eax, 0
    jg      .doit

    mov     byte [edi], 0

.fixit:
    sub     edi, 1
    mov     al, [esi]
    mov     ah, [edi]
    mov     [edi], al
    mov     [esi], ah
    add     esi, 1
    cmp     esi, edi
    jl      .fixit

.done:    
    pop     edi
    pop     esi
    pop     ebx

    mov     esp, ebp
    pop     ebp
    ret     4 * 2 
```

生成文件

```
APP = terminos
$(APP): $(APP).o
    ld -o $(APP) $(APP).o
$(APP).o: $(APP).asm
    nasm -f elf $(APP).asm 
```

# arduino - Arduino 和通过串行处理之间的通信已损坏

> ID：15146909
> 
> 赞同：2
> 
> 时间：2013-02-28T22:28:14.247
> 
> 标签：arduino, processing

我将以下草图上传到我的 Arduino Uno Rev3：

```
void setup() {
    Serial.begin(9600);
}

void loop() {
    Serial.println("Hello, World!");
    delay(10);
} 
```

当我运行它时，你好，世界！按预期连续打印到串行监视器。

我有以下处理草图：

```
import processing.serial.*;

Serial port;

void setup() {
    port = new Serial(this, "/dev/cu.usbmodem1421", 9600);
}

void draw() {
} 
```

当我运行处理草图时，串行监视器输出被损坏。Hello, World! 的简洁线条 最终看起来像这样：

```
Hello, Wold!
Hell, Wrld!
He
Hello, o, Worlorld!
H
Hello,World!
ello World!
Hell, World!
Helo, orld
Hello,Worl!
Hello World!
d!
HellHello, W, World! 
```

我想通过串行在处理和 Arduino 之间进行通信，但如果输出损坏，我就不能。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:48:05.807

你是说你在运行处理草图的同时打开了 Arduino 串行监视器吗？如果是这样，你不能这样做：你不能让两个应用程序同时尝试通过同一个端口与 Arduino 通信。

此外，增加延迟（尝试 100） - 您正在淹没缓冲区。您没有显示从串口读取的处理代码；哪里是？

# php - php ajax 下拉列表

> ID：15146918
> 
> 赞同：1
> 
> 时间：2013-02-28T22:29:00.727
> 
> 标签：php, mysql, ajax, drop-down-menu, dreamweaver

我正在创建 2 个下拉列表，第二个是基于第一个下拉列表的选择。数据是从mysql数据库中检索的

# 索引.php

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <title>Playing With Select list</title>
        <link rel="stylesheet" type="text/css" href="css/demo.css" />
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,700' rel='stylesheet' type='text/css' />
        <!--[if lte IE 8]><style>.main{display:none;} .support-note .note-ie{display:block;}</style><![endif]-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function()
        {
        $(".country").change(function()
        {
        var id=$(this).val();
        var dataString = 'id='+ id;

        $.ajax
        ({
        type: "POST",
        url: "ajax_category.php",
        data: dataString,
        cache: false,
        success: function(html)
        {
        $(".governorate").html(html);
        } 
        });

        });
        });
    </script>

    </head>
    <body>
        <div class="container">
            <header>
                <h1><strong>Playing With Select List</strong></h1>
                <h2>Select One List To see Output On Other</h2>
            </header>
        </div>
    <span style="margin-left:22%">
            <label>country :</label> <select name="country" class="category">
<option selected="selected">--Select Country--</option>
<?php
include('db.php');
$sql=mysql_query("select country_id,country_name from country");
while($row=mysql_fetch_array($sql))
{
$id=$row['country_id'];
$data=$row['country_name'];
echo '<option value="'.$id.'">'.$data.'</option>';
 } ?>
</select> &nbsp;&nbsp;&nbsp;
<label>Governorate :</label> <select name="governorate" class="subcategory">
<option selected="selected">--Select governorate--</option>

</select>
</span>
<br><br><br>
                <h1><center><strong>Go To-:<a href="www.tricktodesign.com">TrickToDesign</a></strong></center></h1>
    </body>
</html> 
```

# ajax_category.php

```
<?php
include('db.php');
if($_POST['governorate_id'])
{
$id=$_POST['governorate_id'];
$sql=mysql_query("select b.governorate_id,b.governorate_name from governorate a,contry_id b where b.country_id=a.country_id and parent='$id'");

while($row=mysql_fetch_array($sql))
{
$id=$row['governorate_id'];
$data=$row['governorate_name'];
echo '<option value="'.$id.'">'.$data.'</option>';
}
}

?> 
```

如何使第二个下拉列表出现其中的数据，这是我面临的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:30:57.930

将 $(".governorate").html(html) 更改为 $(".subcategory").html(html)

# php - Apache Url 重写查询字符串 SEO

> ID：15146922
> 
> 赞同：0
> 
> 时间：2013-02-28T22:29:34.487
> 
> 标签：php, apache, url-rewriting, query-string, iirf

我有以下重写。

```
RewriteRule ^/news/([a-z0-9\-]+)/([a-z0-9\-]+)/?$ /pagebase.php?pbid=3656&nid=$1&title=$2 [QSA,L,I] 
```

[http://www.domain.com/news/1/new-event/](http://www.domain.com/news/1/new-event/)

这样上面的url就会被改写为：

[http://www.domain.com/pagebase.php?pbid=3656&nid=1&title=new-event](http://www.domain.com/pagebase.php?pbid=3656&nid=1&title=new-event)

这完美地工作。但是我希望人们能够输入：

[http://www.domain.com/news](http://www.domain.com/news)没有任何查询字符串并将其重写为：

[http://www.domain.com/pagebase.php?pbid=3656&nid=&title=](http://www.domain.com/pagebase.php?pbid=3656&nid=&title=)

但是匹配失败，所以我收到 404 错误。无论如何我可以重写我的规则以使最后 2 个查询字符串选项成为可选的。我能够使用多个重写规则并将它们按正确的顺序放置，但我想得到它，这样我就可以让它与一个规则一起工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:06:55.163

使用两个重写规则：

```
RewriteRule ^/news/([a-z0-9\-]+)/([a-z0-9\-]+)/?$ /pagebase.php?pbid=3656&nid=$1&title=$2 [QSA,L,I]
RewriteRule ^/news$ /pagebase.php?pbid=3656&nid=&title= [QSA,L,I] 
```

# mysql - Zend DB 使用 Where 和 Order 子句的列

> ID：15146924
> 
> 赞同：1
> 
> 时间：2013-02-28T22:29:38.463
> 
> 标签：mysql, sql, zend-framework

我喜欢在 Zend 中的 Where 子句和 Order 中使用一个列：

```
$select = $this->select();
$select = $select->where('year = ?', $year)
                 ->where('order != ?', 0)
                 ->order('order');
$rows = $this->fetchAll($select); 
```

但是当我这样做时，我收到以下错误：

> SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`order`在第 1 行的 'order != 0) ORDER BY ASC'附近使用正确的语法

为什么？？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:34:44.653

您必须将列名`order`放入刻度，因为它是 SQL 语法的保留字。最好不要将列命名为 SQL 中的关键字，因此请将列重命名`order`为其他名称。

# php - 如何修改SQL文件的每一行

> ID：15146930
> 
> 赞同：0
> 
> 时间：2013-02-28T22:29:56.727
> 
> 标签：php, mysql, foreach, mysqli

我需要修改许多 SQL 语句以包含递增的数字以跟踪“段落”列中的每个单词。抱歉，我的 PHP 技能有限。阅读文件后，我正在考虑一个 foreach 循环，但无法提出任何实际修改行以包含每个单词的值的方法。

当前 SQL：

```
INSERT INTO `book` VALUES(1, 1, 1, 'These are the words in a sentence in a chapter in a book.');
INSERT INTO `book` VALUES(1, 1, 2, 'These are the words in the second sentence in a chapter in a book.');
INSERT INTO `book` VALUES(1, 1, 3, 'These are the words in the third sentence in a chapter in a book.');
...and so on. 
```

当前的 VALUES 是“书”、“章”、“段落编号”、“段落”。

目标：

```
INSERT INTO `book` VALUES(1, 1, 1, 1,'These');
INSERT INTO `book` VALUES(1, 1, 1, 2,'are');
INSERT INTO `book` VALUES(1, 1, 1, 3,'the');
INSERT INTO `book` VALUES(1, 1, 1, 4,'words'); 
```

-new- VALUES 是 'book'、'chapter、'paragraph_number'、'paragraph'、'word_number'。

我已经有了书、章和段号。

例如：

```
INSERT INTO `book` VALUES(1, 5, 16, 'This is a sentence from book 1, chapter 5, paragraph 16.'); 
```

将转换为：

```
INSERT INTO `book` VALUES(1, 5, 16, 1,'This');
INSERT INTO `book` VALUES(1, 5, 16, 2,'is');
INSERT INTO `book` VALUES(1, 5, 16, 3,'a');
INSERT INTO `book` VALUES(1, 5, 16, 4,'sentence');
INSERT INTO `book` VALUES(1, 5, 16, 5,'from');
INSERT INTO `book` VALUES(1, 5, 16, 6,'book');
INSERT INTO `book` VALUES(1, 5, 16, 7,'1,');
INSERT INTO `book` VALUES(1, 5, 16, 8,'chapter');
INSERT INTO `book` VALUES(1, 5, 16, 9,'5,');
INSERT INTO `book` VALUES(1, 5, 16, 10,'paragraph');
INSERT INTO `book` VALUES(1, 5, 16, 11,'16.'); 
```

任何帮助将不胜感激......谢谢！

编辑：下面是有效的代码……基于 Akam 的回答……我更改了 SQL 语句。添加了 [SEP] 以将文本与允许我处理文本的其他数据分开。此外，添加了 $x 以增加字数。

SQL：

```
1, 1, 1,[SEP]These are the words in sentence 1 in chapter 1 in a book.
1, 1, 2,[SEP]These are the words in sentence 2 in chapter 1 in a book. 
```

PHP：

```
$lines = file('my-book.sql');
$query = "INSERT INTO `book` VALUES \n";

foreach ($lines as $line)
{
    $part = preg_split("/\[SEP\]/", $line);
    $part[1] = preg_replace('~[\r\n]+~', '', $part[1]);
    $words = preg_split("/\s+/", $part[1]);

    $x = 1;
    foreach($words as $word)
    {
        $values[] = "(".$part[0]." ".$x.", '".$word."')";
        $x++;
    }

}

$new_lines = implode(",\n", $values);
$new_lines = $query.$new_lines.";";
echo $new_lines; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:40:25.287

```
<?php
$text = 'This is a sentence from book 1, chapter 5, paragraph 16.';
$words = preg_split("/\s+/", $text);
$query = "INSERT INTO `book` VALUES \n";
foreach($words as $word){
 $values[] = "(1, 5, 16, 1,'$word')";
}
$finalquery = $query.implode(",\n", $values);
echo $finalquery.";";
?> 
```

输出：

```
INSERT INTO `book` VALUES 
(1, 5, 16, 1,'This'),
(1, 5, 16, 1,'is'),
(1, 5, 16, 1,'a'),
(1, 5, 16, 1,'sentence'),
(1, 5, 16, 1,'from'),
(1, 5, 16, 1,'book'),
(1, 5, 16, 1,'1,'),
(1, 5, 16, 1,'chapter'),
(1, 5, 16, 1,'5,'),
(1, 5, 16, 1,'paragraph'),
(1, 5, 16, 1,'16.'); 
```

# knockout.js - 如何从存储在 html5 本地存储中的模型应用 knockoutjs 绑定？使用 jStorage

> ID：15146931
> 
> 赞同：1
> 
> 时间：2013-02-28T22:29:58.630
> 
> 标签：knockout.js, local-storage, amplifyjs, jstorage

我需要来自服务器的数据可以离线用于我的 KnockOut.js ViewModel。我正在使用 jStorage 来帮助解决我对 HTML5 localStorage 缺乏了解的问题。这是我尝试过的：

```
var localModel = $.jStorage.get("model");
if(!localModel){//No local data found
    $.post("server/data.php",function(data){
        model = ko.mapping.toJS(data);
        $.jStorage.set("model",model);
        ko.applyBindings(new LightsViewModel(model));
    },"json");
} else {//Local data found
    ko.applyBindings(new LightsViewModel(localModel));
} 
```

当我比较本地对象和发布数据时，它们都完全相同。我能够在实际的 post 函数中应用绑定，但之后不能。请帮帮我，我难住了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:09:01.513

我找到了使用 localStorage 的不同插件的解决方案。[http://amplifyjs.com/api/request/](http://amplifyjs.com/api/request/)我特别使用了他们的请求方法。这是解决方案：

```
amplify.request.define("model","ajax",{
    url:"server/data.php",
    dataType:"json",
    type:"POST",
    cache:"persist"
});

amplify.request("model",function(data){
    model = ko.mapping.toJS(data);
    ko.applyBindings(new LightsViewModel(model));
}); 
```

虽然它使初始请求稍微慢了一点，但之后页面加载速度非常快。

# android - 使用 Maven 将依赖的 JAR 打包到 apklib 中

> ID：15146932
> 
> 赞同：2
> 
> 时间：2013-02-28T22:30:02.600
> 
> 标签：android, maven, maven-assembly-plugin, android-maven-plugin, apklib

我正在开发一个使用 Maven 编译为 apklib 的 Android 类库。但是，当我构建库项目（mvn clean install）时，我的依赖 JAR（其中大约 12 个）不包含在 apklib 中。我知道可以使用 Assembly 插件来完成此操作，但不确定能够使用依赖 JAR 打包 apklib 的适当步骤是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:02:23.500

apklib 格式不应包含依赖项。它们只是在它的 pom 中声明。

然后，当您在实际应用程序中使用 apklib 并在 pom 中向其添加依赖项时，Android Maven 插件会将 apklib 及其所有依赖项包含到您的应用程序中。

# r - 缺少观察的逐行算术

> ID：15146933
> 
> 赞同：0
> 
> 时间：2013-02-28T22:30:03.597
> 
> 标签：r

我试图按行对数据集执行算术运算，但由于缺少观察结果而无法得到我想要的答案。例如，当我使用时，`apply`我得到了缺失的观察结果。最终，我`rowSums`通过首先将某些列乘以 -1（而不是减去它们）得到了所需的答案。我还使用循环获得了所需的答案。这三种方法以及另一种方法如下所示。

是否有可能获得所需的答案`apply`？有没有更简单的方法可以让我忽略？我的问题与此类似：[Handling missing/incomplete data in R-is there function to mask but not remove NAs?](https://stackoverflow.com/questions/2613420/handling-missing-incomplete-data-in-r-is-there-function-to-mask-but-not-remove) 那里的一个答案建议查看 zoo 包，尽管我真的更喜欢 base R。谢谢您的任何建议。这似乎是一个基本问题。抱歉，如果我忽略了一个明显的解决方案。（我刚刚注意到没有标记缺失的观察结果。）

```
df.1 <- read.table(text='
AA   BB   CC   DD   EE   FF   GG   HH   II   JJ
100   2    3    4    5    6    7    8    9   10
200  12   13   14   15   16   17   18   19   20
300  NA   23   24   25   26   NA   28   29   30
400  32   33   34   35   36   37   38   NA   40
500  42   43   44   45   46   47   48   49   50
', header=T, na.strings = "NA")

# this does not work

apply(df.1[,c("AA","BB", "CC", "DD", "FF", "GG", "II", "JJ")], 1, 
             function(x) {x[1] - (x[2] + x[3] + x[4]) - (x[5] + x[6] + x[7]) + x[8]})

# [1]  79 129  NA  NA 279

df.2 <- data.frame(df.1$AA, df.1$BB, df.1$CC, df.1$DD, df.1$FF, df.1$GG, df.1$II, df.1$JJ)
colnames(df.2) <- c('AA', 'BB', 'CC', 'DD', 'FF', 'GG', 'II', 'JJ')

# this does not work

df.2$AA - (df.2$BB + df.2$CC + df.2$DD) - (df.2$FF + df.2$GG + df.2$II) + df.2$JJ
# [1]  79 129  NA  NA 279

# this works

df.3 <- data.frame(df.2$AA, -1 * df.2$BB, -1 * df.2$CC, -1 * df.2$DD, -1 * df.2$FF, -1 * df.2$GG, -1 * df.2$II, df.2$JJ)

rowSums(df.3, na.rm = TRUE)
# [1]  79 129 228 268 279

# this works

my.sum <- rep(NA, nrow(df.2))

for (i in 1:nrow(df.2)) {
  my.sum[i] <- sum(df.2$AA[i], -1 * df.2$BB[i], -1 * df.2$CC[i], -1 * df.2$DD[i], -1 * df.2$FF[i], -1 * df.2$GG[i], -1 * df.2$II[i], df.2$JJ[i], na.rm = TRUE)
}

my.sum
# [1]  79 129 228 268 279 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:16:22.750

您可以`sum`在`apply`调用中使用并相应地加权每个向量。

```
weights <- c(1,rep(-1,3),0,rep(-1,2),0,-1,1)

apply(df.1,1,function(x) sum(x*weights,na.rm=T))
[1]  79 129 228 268 279 
```

尽管`colSums`在转置矩阵乘以这些权重可能更快：

```
colSums(t(df.1)*weights,na.rm=T)
[1]  79 129 228 268 279 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:38:52.393

如何在运行中用 0 替换 NA，例如：

```
apply(df.1[,c("AA","BB", "CC", "DD", "FF", "GG", "II", "JJ")], 1, 
             function(x) {x[is.na(x)]=0; x[1] - (x[2] + x[3] + x[4]) - (x[5] + x[6] + x[7]) + x[8]}) 
```

# r - 在 R 中，如何使分类树的分支在图中不重叠？

> ID：15146940
> 
> 赞同：4
> 
> 时间：2013-02-28T22:30:41.773
> 
> 标签：r, tree, plot

我有一棵有很多树枝的树。这是我绘制树的代码。问题是标签相互重叠，特别是在树的底部。有没有办法绘制树以使标签不重叠？

```
par(mfrow=c(1,1))
plot(prunedTree, type=c("uniform"))
text(prunedTree) 
```

注意——我使用了“type=c("uniform"))”，因为它有助于较低分支的可读性。此外，prunedTree 是树包中的“树”类。

这是当前正在生产的产品的示例。

![在此处输入图像描述](../Images/c1aefcbfe982fecc1080a74eb7016855.png)

编辑：完全重现问题的代码。

```
load(url("https://spark-public.s3.amazonaws.com/dataanalysis/samsungData.rda"))
samsungData$subject <- factor(samsungData$subject)
samsungData$activity <- factor(samsungData$activity)
samsungData <- samsungData[, !c(duplicated(names(samsungData)))]
names(samsungData) <- gsub("[.]", "", names(samsungData))
samsungData <- data.frame(samsungData)
trainDF <- samsungData[samsungData$subject %in% c(1,3,5,6),]
tree1 <- tree(activity ~ ., data=trainDF)
plot(tree1)
text(tree1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T22:58:20.353

您有几个通用选项：

1.  使用更宽的图形设备。（即`png(...,width = 1200,height = ...)`）
2.  `cex = 0.5`使用（或更小）缩小文本
3.  使用更简洁的列（即变量）名称
4.  前三者的某种组合。

我以为我可以`text.tree`在标记拆分时使用更少的有效数字，但我似乎无法做到这一点。**默认情况下， rpart**似乎只使用 4 位数字，这样也可以为您节省一些空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T00:13:50.850

除了上面列出的 joran 指示之外，您还可以使用参数：

*   `srt`旋转您的文本。
*   为文本赋予不同的颜色

例如 ：

```
plot(tree1)
text(tree1,col=rainbow(5)[1:25],srt=85,cex=0.8) 
```

![在此处输入图像描述](../Images/3102589a70528c57e03222f8dc51942f.png)

# java - 从 Oracle ReturnCursor 检索值（很少有参数是 ComplexTypes）

> ID：15146941
> 
> 赞同：0
> 
> 时间：2013-02-28T22:30:46.490
> 
> 标签：java, oracle, stored-procedures

我是java和SQL的初学者。请求帮助，了解如何从 Oracle 游标类型结果集中检索值。

我正在尝试从 Java 调用存储过程并检索结果集值以进行进一步处理。

存储过程的 IN 参数很少，比如 Input_1 和 Input_2。OUT 参数定义为 cursorType 定义为，OUT_1 NUMBER(10), OUT_2 VARCHAR 2 (30 BYTE), "OUT_3" AS VARRAY (750) OF Output3_OBJ。其中输出 3_OBJ 定义为

```
CREATE OR REPLACE TYPE schema."Output 3_OBJ" AS OBJECT
    (
      ATTRIBUTE_C               VARCHAR2(30),
      VALUE_X                   VARCHAR2(2000 BYTE),
      VALUE_TS                  TIMESTAMP(6),
      VALUE_I                   NUMBER(10),
      OPERAND_C                 VARCHAR2(10)
    ) 
```

我能够检索 OUT_1 和 OUT_2。为了获取 OUT_3 下的每个子元素，请您帮帮我。我对另一个存储过程有相同的结构，我使用数组描述符、数组列表和数组将这些对象类型传递给 Oracle。但是在从 Oracle 检索数据时，我厌倦了各种混合和匹配，但没有工作。感谢有人可以通过示例代码帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:51:07.317

你可以通过这种方式获得

```
stmt.registerOutParameter(3, Types.ARRAY, "Output 3_OBJ");
stmt.execute();
Array array = stmt.getArray(3); 
```

# html - 使用“clear:both”清除浮动 div 的缺点是什么？

> ID：15146945
> 
> 赞同：0
> 
> 时间：2013-02-28T22:30:59.710
> 
> 标签：html, css, css-float, clearfix

这里的社区似乎同意旧的“clearfix”黑客现在已被[贬值和](https://stackoverflow.com/questions/5565668/is-clearfix-deprecated)取代`overflow:hidden`。不幸的是，在某些情况下，即使使用这种方法也会导致问题。（例如：如果它工作正常，它[看起来](http://jsfiddle.net/thirtydot/je8aS/6/)像[这样。）](http://jsfiddle.net/D9U9N/)

使用老式的主要问题`<div class="clear">`似乎是它创建了一个`div`仅用于改变表示的元素——这似乎混淆了纯语义标记与表示的理想。

但除此之外，它似乎适用于所有浏览器和所有情况（不能说“clearfix”或`overflow:hidden`）。

使用还有其他缺点`clear:both`吗？用起来真的有那么差吗？还是只是个人喜好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:54:56.460

## 有副作用

`clear: both`有一个副作用，如果在同一块格式化上下文中存在任何其他浮点数，则该`clear: both`元素将被强制低于它们。有时这就是你想要的。有时不是。这个[jsbin](http://jsbin.com/eladob/4/edit)演示了它会吃掉你的午餐的例子：

![<code>clear: both</code> 导致问题的示例。](../Images/988775064afe16514d88f6a100f5367a.png)

诀窍在于控制清除元素应与哪些浮动进行交互。您可以使用块格式化上下文来执行此操作，这是一个绝缘矩形，所有浮动和清除元素在其中交互。块格式化上下文之外的浮动和清除元素不能与内部的浮动或清除元素交互。

这是使用时要牢记的一个重要缺点`clear: both`。用起来真的有那么差吗？不，您只需要了解浮动和清除如何交互，以及如何在需要时阻止它们这样做。在许多情况下，这些问题不会出现，因此选择清除浮动的方法可能是个人喜好问题。但有些情况需要更深入地考虑浮动和清算的运作方式。每种清除方法都有副作用，因此您必须根据自己的情况选择正确的方法。哪种“ clearfix [”方法最好？](https://stackoverflow.com/q/211383/101869)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T23:31:58.503

没关系。不如纯 CSS 方法好，不，但有时 overflow:hidden / auto 无法正常工作（例如，当您希望将绝对定位的元素“弹出”出其容器时）。

是的，它增加了可维护性成本，是的，理论上它对于 SEO 来说不是最理想的，但这并不是一个主要的罪过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:35:30.770

`clear:both`只是意味着不允许向左或向右浮动。确实存在另一种方法，但对于旧浏览器来说并不安全。

```
.element:after { content:""; clear:both; } 
```

我很确定：是标准的，如果您不完全理解浮点数（我花了一段时间），浮点数就很棘手。

空白存在的原因是浮动元素实际上并不“存在”，因为它们没有为容器提供确定的尺寸来环绕。您可以在浮动后的项目上使用`clear:left` `clear:right`或`clear:both`，它会创建一个硬线，与使用该`<div class="clear"></div>`方法相同。

就个人而言，我使用久经考验的 hack 并添加伪元素，以便（希望）全面支持它。

# c# - TraceListener，它在失败的断言上引发异常

> ID：15146950
> 
> 赞同：2
> 
> 时间：2013-02-28T22:31:21.397
> 
> 标签：c#, .net, review, design-by-contract, trace-listener

我的问题`DefaultTraceListener`（这是唯一的跟踪侦听器，如果在 app.config 中没有被覆盖）是，如果`AssertUiEnabled`是`false`（即在 ASP.NET 中）它会`OutputDebugString`在失败的断言（调用）时写入一条消息`Trace.Assert(false)`，**但会继续执行**。

所以我正在使用以下子类`TraceListener`，它会引发异常。我使用激活它

```
TraceListenerWhichThrowsExceptionOnFail.InsertAsFirstTraceListener(Trace.Listeners); 
```

在`Application_Init`.

现在，`Application_Error`如果我可以使用完整的堆栈跟踪记录异常（作为任何异常），包括对`Trace.Assert(false)`.

```
public class TraceListenerWhichThrowsExceptionOnFail : TraceListener
{
    public static void InsertAsFirstTraceListener(TraceListenerCollection traceListeners)
    {
        traceListeners.Insert(0, new TraceListenerWhichThrowsExceptionOnFail());
    }

    public override void Fail(string message, string detailMessage)
    {
        message = string.IsNullOrEmpty(detailMessage) ? message : message + ", Detail message: " + detailMessage;

        throw new ApplicationException("Trace assertion failed" + 
            (string.IsNullOrEmpty(message) ? "" : ": " + message) + ".");
    }

     public override void Write(string message)
     {
        // NOP
     }

     public override void WriteLine(string message)
     {
        // NOP
     }
} 
```

现在我的问题是：有人认为这种方法有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:08:38.367

这取决于。

我不确定这在 ASP.NET 场景中是否有用。在调试期间，您希望断言正常运行。抛出异常可能会有点混乱。在生产中，您将使用发布版本，因此这些`Trace.Assert`语句无论如何都不会做任何事情。

但是，我们使用类似的技术进行单元测试。您真的不想让构建服务器挂起并显示“断言失败”消息框。相反，您希望您的断言导致测试失败。因此，我们使用 App.config 文件进行单元测试（并且仅用于软管！），它安装了一个与您的类似的跟踪侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:53:56.773

我会说 Trace.Assert 中的异常是个坏主意（不查看您的代码）。

Trace.XXXX 方法通常用于跟踪内容。将来的读者（包括您）得知`Trace.Assert`实际上会引发异常，这将是非常令人惊讶的。

看到 Trace.Assert（甚至是 Fail）抛出异常更令人惊讶。Assert 的目的是帮助提前发现问题，而不是杀死应用程序。

我建议提出您的自定义方法，在名称中清楚地显示其行为，而不是提出现有方法的意外行为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-02T07:30:41.347

在 Fail() 中抛出异常可能会导致： 1\. 调用堆栈会令人困惑，因为异常不会在条件失败的地方抛出。

通常你应该在条件失败的地方抛出异常。

# php - 如何在编写 PHP 代码（用于调试）时找出变量的值？

> ID：15146951
> 
> 赞同：2
> 
> 时间：2013-02-28T22:31:23.053
> 
> 标签：php, debugging, symfony-1.4

我正在用 symfony 写，我在其中一个`actions.class.php`文件中。

通常我只是`echo`变量的值，但因为这是一个动作类模块，我不能这样做，因为我不能输出到页面。

我正在考虑使用 FirePHP，但它涉及在服务器端安装它，我想知道一个更简单或内置的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:20:19.420

通过电子邮件发送日志确实有效，但有一些更好、更简单、更快捷的方法可以做到这一点；）

在 symfony 中，您可以访问 Logger，它允许您记录任何内容。在 prod 环境中，默认情况下它是禁用的（当然你可以打开它），但在 dev 中，它不仅在日志文件中可用，而且在 Sf Web 调试栏中打印。

在动作内部使用：

```
$this->getLogger()->debug('My $variable value is now: '.$variable); 
```

您还可以使用其他级别的日志记录（`->warning('')`、`->err('')`、`->crit('')`等）。当然，如果它是数组或对象，则需要将变量更改为字符串。

事实上你可以在行动的同时`echo`和`var_dump`事情发生。它们将显示在您的页面中（尽管在实际模板之前显示内容时布局很混乱）。

请记住，`echo`仅适用于字符串和数字。如果您尝试回显布尔值或数组，您将什么也看不到。如果您尝试回显一个对象，它将`__toString()`使用它的方法或引发错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:41:15.817

如果您有权访问服务器的日志文件，您可能需要查看 PHP 的[error_log](http://php.net/manual/en/function.error-log.php)函数。它将在 PHP 的错误日志中打印一个字符串，然后您可以检查日志文件。

-edit-: error_log 还允许您通过电子邮件向自己发送消息。但这很愚蠢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T22:41:38.137

在整个代码中给自己发电子邮件。您可以在脚本末尾或整个过程中发送一个。两者都有好处。如果您没有收到电子邮件并且在最后发送电子邮件可以节省开销，那么整个发送电子邮件将很容易让您知道哪里出了问题（虽然这似乎不是问题）。

# mysql - 如何在 mysql perl 中使用变量创建子例程

> ID：15146952
> 
> 赞同：1
> 
> 时间：2013-02-28T22:31:27.090
> 
> 标签：mysql, perl, hash, subroutine

我有两个 mysql 命令。我想用这两个 mysql 命令为我必须搜索的其余数据创建一个子例程。我有很多条目。有没有办法创建一个子例程，以便代替我在两个 mysql 命令中输入的实际数字和字符，我输入可以替换的变量，这样我就可以复制并粘贴这些变量和命令的实际值对剩余的条目执行？

例如，我有一个命令说

```
$sth = $dbh->prepare ("select name from table1 where number > 5");
$sth->execute();
@row;
while (@row = $sth->fetchrow_array) {
print "$row[0]\tquestion1\n"; 
```

代替 select 命令中列出的“5”和 print 命令中列出的“question1”，我想用“变量”之类的东西代替它，这样我就可以创建一个包含这些命令的子例程，但是你执行并可以通过为这些变量插入不同的值来一遍又一遍地运行子例程。

像这样： $dbh = DBI->connect($dsn, $user, $password); 不确定如何为 mysql perl 执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:37:11.847

您可以在查询中使用[占位符](http://search.cpan.org/perldoc?DBI#Placeholders_and_Bind_Values)在搜索中使用不同的值。

```
$sth = $dbh->prepare ("select name from table1 where number > ?");
$sth->execute(5); 
```

之后，为您的打印创建一个子程序应该很简单。

例如：

```
my @values = qw(5 10 15 20);
my @fields = qw(question1 question2);
# ... other code..
my $sth = $dbh->prepare ("select name from table1 where number > ?");

for my $field (@fields) {
    for my $value (@values) {
        printfields($sth, $value, $field);
    }
}

sub printfields {
    my ($sth, $value, $field) = @_;
    $sth->execute($value);
    while (my @row = $sth->fetchrow_array) {
        print "$row[0]\t$field\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:21:33.447

我更喜欢在运行 prepare() 之前构建选择查询。然后将其作为标量传递给 prepare()。您还可以在标量中添加占位符（如果您不想简单地为每个查询重建它），可以通过调用 s///; 轻松替换它们，也可以轻松命名/识别。这将使代码比将裸值传递给 execute() 更容易阅读。

# java - javasocketbridge - 客户端不读取/java.net.SocketPermission

> ID：15146953
> 
> 赞同：3
> 
> 时间：2013-02-28T22:31:29.600
> 
> 标签：java, websocket

我正在尝试在 JavaScript 客户端和 Java 服务器之间实现 TCP 连接。（实现必须是这种方式，例如我不能交换到服务器的节点）。

Java 中的 Web 套接字实现看起来非常复杂。我看了一下 Jetty 和 JWebSocket，很快就被吓跑了。我不知道他们的源代码中发生了什么。– 所以我在使用它们实现服务器时运气不佳。

因此，我寻找 websocket 替代品。

我注意到[SocketBridge](http://stephengware.com/proj/javasocketbridge)，它看起来非常简单，并且提供了我项目所需的东西，所以我下载了它。

我创建了一个简单的 java 服务器，它只打印我收到的内容并将字符串作为字节发送回来。我使用了预构建的 JavaSocketBridge 并修改了 index.html 以指向我的服务器。我的服务器收到了消息，但客户端上没有任何显示。

```
function run(){
        socket_connect('localhost', 31113);
        socket_send("Hello from JavaSocketBridge applet");
    } 
```

然后我决定构建 JavaSocketBridge 以查看是否可以调试读取方法。但是我构建的 JavaSocketBridge 拒绝连接错误。

```
Java Socket Bridge ERROR: Could not connect to localhost on port 31113 
Access denied (“java.net.SocketPermission” “127.0.0.1:31113” “connect,resolve” )
(This was in chrome but it happens in firefox too) 
```

所以我的问题：

**为什么我的构建会出现套接字权限错误？**

**为什么即使示例来自 google.com:80，客户端也没有收到任何内容？**

笔记。

我的[服务器](https://dl.dropbox.com/u/15586644/javaweb/server/Server.java)似乎工作正常。（我用一个简单的java[客户端](https://dl.dropbox.com/u/15586644/javaweb/client/Client.java)测试过，我用java 1.6和1.7搭建了JavaSocketBridge）

我已包含 C:\Program Files\Java\jre7\lib\plugin.jar 我的系统是 Win7 64 并且 java SDK / JRE 是最新的

**编辑。我已经回到码头并让客户端/服务器正常工作，但是我会监控这个问题。**

# mysql - Left Join And 几个 LIKE 让我的查询很慢

> ID：15146955
> 
> 赞同：1
> 
> 时间：2013-02-28T22:31:33.523
> 
> 标签：mysql, join, search, sql-like

我正在制作字典，我有两张桌子

```
word (word, description, ext)
translate (id, word_translate, description_tranlate, org_word, language_id) 
```

所有单词都没有翻译。我只想搜索“word”和“word_translated”。搜索结果应始终显示单词 + 翻译（如果存在）。我的搜索查询看起来像这样。

```
SELECT * FROM word
LEFT JOIN translate ON (word=org_word AND language_id=?)
WHERE (word LIKE "%something%" OR translated_word LIKE "%something%") 
```

**查询时间：9.3350 sek**

但是，如果我只使用一个 Like ex。像“%something%”这样的词

```
 SELECT * FROM word
    LEFT JOIN translate ON (word=org_word AND language_id=?)
    WHERE (word LIKE "%somethin%") 
```

**查询时间：0.0451 sek**

只有 *word_traslate LIKE* "%somethin%"

```
SELECT * FROM word
LEFT JOIN translate ON (word=org_word AND language_id=?)
WHERE (translated_word LIKE "%somethin%") 
```

**查询时间：0.0037 sek**

为什么使用两个 LIKE 的查询需要更长的时间。有没有更好的方法来做这个查询。难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:35:49.257

将 WHERE .. 中的条件移动到 ON( .. )

```
SELECT * FROM word
LEFT JOIN translate ON (word=org_word AND language_id=?  
AND (word LIKE "%somethin%" OR translated_word LIKE "%somethin%") ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:35:14.350

请注意，任何短语（例如`LIKE '%something%'`必要时）都会进行表扫描（因为前导`%`）。在执行此操作之前尽可能多地进行过滤，并在执行此操作后尽可能多地进行连接，以减少表扫描对性能的影响。如果您需要控制排序，请使用子查询。优化器会接受其中的一些，但帮助它永远不会有坏处。

# c - 使用 C30 和 MPLAB X 的 switch 语句的奇怪行为

> ID：15146959
> 
> 赞同：0
> 
> 时间：2013-02-28T22:31:43.407
> 
> 标签：c, switch-statement, microchip, mplab

我正在用 C30 和 MPLAB X 试验一个奇怪的问题，我有这段代码：

```
unsigned char mode;
switch(mode){                       // Eligo el modo que se envio a traves del UART
        case FRECUENCIMETER:
            vFrecuencimetro();
            break;

        case LC_METER:
            vLC_Meter();
            break;

        case VOLTMETER:
            break;

        case 'L':
            vLogicAnalizer();
            break;
    }
    if(mode == 'L'){
        vLogicAnalizer();
    } 
```

当 mode 等于 'L' 字符时，开关不会按应有的方式进入“case 'L'”，而是进入 if 语句。但是当我以这种方式更改我的代码时：

```
unsigned char mode;
    switch(mode){                     
        case 'L':
            vLogicAnalizer();
            break;
    }
    if(mode == 'L'){
        vLogicAnalizer();
    } 
```

它完美地输入了 switch 语句。其他情况的定义如下：

```
#define FRECUENCIMETER      0
#define LC_METER            1
#define VOLTMETER           3 
```

我正在使用 C30 编译器 v3.31 和 MPLAB X v1.41。希望您能够帮助我。

谢谢

* * *

**编辑：**

好的，根据答案和评论，我以这种方式更改了我的代码：

```
char mode;

#define FRECUENCIMETER      0
#define LC_METER            1
#define LOGIC_ANALIZER      76    // 'L'
#define VOLTMETER           3
#define NO_MODE             4

switch(mode){                       // Eligo el modo que se envio a traves del UART
            case FRECUENCIMETER:
            vFrecuencimetro();
            break;

        case LC_METER:
            vLC_Meter();
            break;

        case VOLTMETER:
            break;

        case LOGIC_ANALIZER:
            vLogicAnalizer();
            break;
    } 
```

如果在 switch 语句之前我写：

```
mode = 'L'; 
```

switch 语句工作得很好，但是当我从 UART 得到一个“L”时，函数 ReadUART1() 返回和 unsigned int：

```
unsigned int ReadUART1(void); 
```

它根据我的调试器返回“L”，它对应于 unsigned int 中的数字 76，switch 语句不起作用，但模式仍然是“L”。即使我将模式更改为 unsigned int 以与功能相同，它也不起作用。我想我将不得不使用 if() 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:39:08.960

解决了。我变了：

```
unsigned int mode; 
```

到：

```
volatile unsigned int mode; 
```

或与编译器优化级别 0 一起使用：

```
unsigned int mode; 
```

感谢您的帮助。

# git - 让 grunt.js 在一个预先存在的 yeoman 项目上工作

> ID：15146960
> 
> 赞同：5
> 
> 时间：2013-02-28T22:31:46.660
> 
> 标签：git, yeoman, gruntjs

我有一个工作的 yeoman 项目，我用它运行服务器`grunt server`，它工作正常。

我把整个东西放到了一个 git repo 中，然后把它签到了一个新文件夹中......

当我尝试做“咕噜服务器”时，它说：

> 致命错误：无法找到本地咕噜声。
> 
> 如果您看到此消息，则说明未找到 Gruntfile 或未将 grunt 安装到您的项目本地。

我无法将 grunt 本地安装到该目录，并且无法找到和使用 GruntFile。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T08:33:30.850

签出 Yeoman 项目后，您需要像在初始脚手架过程之后那样安装 npm 模块和 bower 组件，因为它们不是 git 存储库的一部分：

```
npm install & bower install 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T19:20:07.640

我今天才遇到这个！

默认情况下，您的 .gitignore 将忽略 /bower_components、node_modules、dist 文件夹等。

当您从 git 拉取项目时，请确保运行 npm install 和 bower install，然后您就可以继续使用了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:59:32.477

你需要安装一些[https://github.com/gruntjs/grunt-contrib](https://github.com/gruntjs/grunt-contrib)包。gruntserver 输出（作为 Scott 的回答安装）会告诉你缺少什么

# breeze - Breeze BeforeSaveEntityonly 只允许更新添加的实体

> ID：15146964
> 
> 赞同：9
> 
> 时间：2013-02-28T22:32:02.957
> 
> 标签：breeze

不知道这是有意的还是错误的，但是下面使用 BeforeSaveEntity 的以下代码只会修改新创建记录的实体（EntityState = added），并且对修改无效，这是正确的吗？

```
 protected override bool BeforeSaveEntity(EntityInfo entityInfo)
    {
        var entity = entityInfo.Entity;
        if (entity is User)
        {
            var user = entity as User;
            user.ModifiedDate = DateTime.Now;
            user.ModifiedBy = 1;
        }
... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T17:50:25.620

这个问题的根源在于，在微风服务器上，我们没有任何内置的更改跟踪机制来跟踪服务器上所做的更改。服务器实体可以是纯 poco。微风客户端对任何客户端更改都具有丰富的更改跟踪功能，但是当您到达服务器时，您需要自己管理它。

问题的发生是因为我们在服务器上执行了优化，因此我们只更新那些更改的属性。即，任何 SQL 更新语句只对更改的列进行。显然，对于添加或删除或我们更新已在客户端更新的列的情况，这不是问题。但是，如果您更新服务器上未在客户端更新的字段，那么微风对此一无所知。

理论上，我们可以对进入服务器的每个实体进行快照，然后遍历实体上的每个字段，以确定在保存拦截期间是否进行了任何更改，但我们真的很讨厌性能影响，特别是因为这种情况很少发生。

因此，在另一个答案中提出的更新服务器端 OriginalValuesMap 的建议是正确的，并且会完全满足您的需要。

此外，从版本 1.1.3 开始，您可以设置一个额外的**EntityInfo.ForceUpdate**标志，它会告诉微风更新指定实体中的每一列。这不如上面的建议那么高效，但它更简单，并且在任何一种情况下效果都是一样的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T23:00:47.757

我有同样的问题，我解决了这个问题：

```
protected override bool BeforeSaveEntity(EntityInfo entityInfo)
{
  if(entityInfo.EntityState== EntityState.Modified)
  {
     var entity = entityInfo.Entity;
     entityInfo.OriginalValuesMap.Add("ModificationDate", entity.ModificationDate);
     entity.ModificationDate = DateTime.Now;
  }
} 
```

我认为您可以轻松地将其应用于您的案例。

# wpf - 获取 TextInput，同时防止 KeyDown 和 Keyup 事件传播到父控件

> ID：15146965
> 
> 赞同：0
> 
> 时间：2013-02-28T22:32:15.313
> 
> 标签：wpf, custom-controls

我有一个自定义 WPF 控件，它想要处理按键按下和按下事件以及文本输入。例如，如果用户在键盘上点击 Home，我想在我的自定义控件中处理它并防止它冒泡到其他控件。

现在，我可以通过处理自定义控件中的按键向下和向上事件`KeyEventArgs.Handled`并将`true`. 然而，这有一个不幸的副作用是文本输入事件不会被生成。

如何在不让事件传播到父控件的情况下同时处理按键和按键事件以及文本输入（与文本框控件差不多）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:18:09.820

您可以尝试仅为您有兴趣处理的键设置 KeyEventArgs.Handled 为 true，例如示例中的 Home 键，并允许其余键冒泡。

# python - ValueError - 无法分配“u”

> ID：15146970
> 
> 赞同：0
> 
> 时间：2013-02-28T22:32:27.820
> 
> 标签：python, django

我正在尝试编辑另一个开发人员的一些代码。一切顺利，直到我收到此错误：

> /berichten/registreren/ 处的 ValueError 无法分配“u''”：“Bericht.beller”必须是“Beller”实例。

我将从追溯开始：

```
Environment:
Request Method: POST
Request URL: http://127.0.0.1:8000/berichten/registreren/

Django Version: 1.4.3
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
'django.contrib.contenttypes',

'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'south',
 'mm')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'mm.middleware.LoginRequiredMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/views/generic/base.py" in view
  48\.             return self.dispatch(request, *args, **kwargs)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/views/generic/base.py" in dispatch
  69\.         return handler(request, *args, **kwargs)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/views/generic/edit.py" in post
  172\.         return super(BaseCreateView, self).post(request, *args, **kwargs)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/views/generic/edit.py" in post
  137\.         if form.is_valid():
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/forms.py" in is_valid
  124\.         return self.is_bound and not bool(self.errors)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/forms.py" in _get_errors
  115\.             self.full_clean()
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/forms.py" in full_clean
  272\.         self._post_clean()
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/models.py" in _post_clean
  309\.         self.instance = construct_instance(self, self.instance, opts.fields, opts.exclude)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/models.py" in construct_instance
  51\.             f.save_form_data(instance, cleaned_data[f.name])
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/models/fields/__init__.py" in save_form_data
  454\.         setattr(instance, self.name, data)
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/models/fields/related.py" in __set__
  366\.                                  self.field.name, self.field.rel.to._meta.object_name))

Exception Type: ValueError at /berichten/registreren/
Exception Value: Cannot assign "u''": "Bericht.beller" must be a "Beller" instance. 
```

**模型.py**

```
class Beller(models.Model):
    titel = models.CharField(max_length=10, blank=True)
    naam = models.CharField(max_length=30)
    voornaam = models.CharField(max_length=30)
    bedrijf = models.CharField(max_length=50, blank=True, null=True)
    adres = models.CharField(max_length=50)
    plaats = models.ForeignKey(Plaats, blank=True, null=True)
    telefoon = models.CharField(max_length=20, blank=True)
    email = models.EmailField(blank=True)
    taal = models.CharField(max_length=1, choices=TAAL)

    class Meta:
        ordering = ['naam', 'voornaam']

    def __unicode__(self):
        return u"{0} {1}".format(self.naam, self.voornaam)

class Bericht(models.Model):
    klant = models.ForeignKey(Klant)
    lijn = models.ForeignKey(Lijn)
    contact = models.ForeignKey(Contact)
    beller = models.ForeignKey(Beller)

    tijdstip = models.DateTimeField(auto_now_add=True)
    bericht = models.TextField(blank=True)
    status = models.CharField(max_length=1, choices=BERICHT_STATUS)
    gebruiker = models.ForeignKey(User) 
```

**表格.py**

```
class BerichtForm(forms.ModelForm):
    lijn = forms.ModelChoiceField(queryset=Lijn.objects.filter(datum_tot__exact=None))
    contact_naam = forms.CharField(required=True, max_length=50)
    contact_pk = forms.CharField(required=True, widget=forms.HiddenInput())
    beller = forms.CharField(required=False, max_length=50, widget=forms.HiddenInput())
    titel = forms.CharField(required=False, max_length=10)
    naam = forms.CharField(required=True, max_length=50)
    voornaam = forms.CharField(required=False, max_length=50)
    bedrijf = forms.CharField(required=False, max_length=50)
    adres = forms.CharField(required=False)
    plaats_pk = forms.CharField(required=False, widget=forms.HiddenInput())
    plaats = forms.CharField(required=False, max_length=50)
    email = forms.EmailField(required=False)
    telefoon = forms.CharField(required=False)
    taal = forms.CharField(widget=forms.Select(choices=TAAL))

    class Meta:
        model = Bericht
        fields = ('lijn', 'contact_naam', 'beller', 'naam', 'titel', 'voornaam', 'bedrijf', 'adres', 'plaats', 'email', 'telefoon', 'taal', 'bericht',) 
```

**视图.py**

```
class BerichtCreateView(CreateView):
    model = Bericht
    template_name = "mm/bericht/form.html"
    form_class = BerichtForm
    context_object_name = "bericht"
    success_url = reverse_lazy('mm-berichten-registreren')

    def get_context_data(self, **kwargs):
        context = super(BerichtCreateView, self).get_context_data(**kwargs)
        cb = self.request.GET.get('cb', None)
        if cb:
            context['cb'] = cb
        return context

    def get_success_url(self):
        if self.cb:
            return self.success_url + "?cb=" + self.cb
        else:
            return self.success_url

    def form_valid(self, form):
        """Valideer het formulier, maar voeg eerst de klant toe aan de instance """
        self.cb = None
        self.object = form.save(commit=False)
        self.object.klant = self.object.lijn.klant

        # Verwerk contact info
        contact_pk = form.cleaned_data['contact_pk']
        try:
            contact = int(contact_pk)
        except:
            contact = None
        if contact:
            self.object.contact = Contact.objects.get(pk=contact)
        else:
            self.object.contact = Contact()

        # Verwerk beller info
        beller = form.cleaned_data['beller']
        if beller:
            try:
                beller = Beller.objects.get(pk=beller)
            except Beller.DoesNotExist:
                beller = Beller()
        else:
            beller = Beller()

        beller.titel = form.cleaned_data['titel']
        beller.naam = form.cleaned_data['naam']
        beller.voornaam = form.cleaned_data['voornaam']
        beller.bedrijf = form.cleaned_data['bedrijf']
        beller.adres = form.cleaned_data['adres']
        if form.cleaned_data['plaats_pk']:
            beller.plaats = Plaats.objects.get(pk=form.cleaned_data['plaats_pk'])
        else:
            beller.plaats = None
        beller.email = form.cleaned_data['email']
        beller.telefoon = form.cleaned_data['telefoon']
        beller.taal = form.cleaned_data['taal']
        beller.save()
        #self.object.beller = beller
        self.object.gebruiker = self.request.user
        self.object.save()

        if self.request.POST.get('versturen', None):
            self.cb = None

            # Verwerk e-mail communicatie
            if self.object.contact.contact_medium == 'E':
                self.object.send_email()

                if self.object.status == "N":
                    messages.add_message(self.request, messages.WARNING, 'Het bericht kon niet via e-mail worden verstuurd.')
                else:
                    messages.add_message(self.request, messages.SUCCESS, 'Het bericht is verstuurd naar de contactpersoon.')

            else:
                # Add a callback for print to success url
                self.cb = reverse('mm-bericht-afdrukken', args=[self.object.id])
                self.object.status = 'P'

        else:
            self.object.status = 'D'
            messages.add_message(self.request, messages.INFO, 'Het bericht is opgeslagen maar is nog niet verstuurd.')

        self.object.save()

        return super(BerichtCreateView, self).form_valid(form) 
```

如您所见，我正在尝试发送一个 Beller() 实例，但它没有。

已经感谢你试图帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:16:06.740

该错误发生在验证期间，而不是您的`form_valid()`方法中。它试图验证对象上“ `beller`”字段的字符串`Bericht`。Django 这样做是因为它被告知这是应该与模型一起自动保存的字段之一。

在 的 meta 中的字段中`BerichtForm`，仅包含`Bericht`您要使用直接从 HTML 获得的数据填充的字段。就像是：

```
class Meta:
    model = Bericht
    fields = ('lijn', 'tijdstip', 'bericht') 
```

PS：这里可能有帮助的另一条信息是请求的 POST 正文的内容。

# java - 第一个 Java 程序 - 线程“主”java.lang.NoClassDefFoundError 中的异常

> ID：15146974
> 
> 赞同：0
> 
> 时间：2013-02-28T22:32:33.103
> 
> 标签：java, eclipse

在 Eclipse 中使用 Java 创建了许多 Android 应用程序之后。我现在需要创建一个独立的 Java 程序，以便我可以创建一个 sqlite 数据库 - 最终将在未来的 Android 应用程序中使用。

我正在使用来自[http://sqljet.com](http://sqljet.com)的 SQLJet 库并复制了他们的示例代码。

当我尝试使用 Eclipse 中的“运行”按钮运行代码时，出现以下错误。

```
Exception in thread "main" java.lang.NoClassDefFoundError:        org/antlr/runtime/RecognitionException
at org.tmatesoft.sqljet.core.table.engine.SqlJetEngine$2.runSynchronized(SqlJetEngine.java:282)
at org.tmatesoft.sqljet.core.table.engine.SqlJetEngine.runSynchronized(SqlJetEngine.java:217)
at org.tmatesoft.sqljet.core.table.engine.SqlJetEngine.readSchema(SqlJetEngine.java:276)
at org.tmatesoft.sqljet.core.table.engine.SqlJetEngine.getOptions(SqlJetEngine.java:299)
at nlmc.loader.apps4care.com.Test.main(Test.java:36)
Caused by: java.lang.ClassNotFoundException: org.antlr.runtime.RecognitionException
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 5 more 
```

现在由于代码已被复制而没有更改，我猜这没有什么问题，我怀疑我的环境设置不正确。作为一名新手 Java 开发人员（通常是 C#），我正在努力弄清问题所在。别介意解决方案。

代码现在可以工作并创建数据库。不幸的是，它看起来与 Android 使用的版本 sqlite3 不兼容。回到绘图板...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:36:55.267

该程序需要类 org.antlr.runtime.RecognitionException。有关可以在其中找到它的 jar 列表，请参见此处：[http ://www.jarfinder.com/index.php/java/info/org.antlr.runtime.RecognitionException](http://www.jarfinder.com/index.php/java/info/org.antlr.runtime.RecognitionException)

编辑：在这里您可以看到 SQLJet 的所有依赖项：http: [//mvnrepository.com/artifact/org.tmatesoft.sqljet/sqljet/1.1.1](http://mvnrepository.com/artifact/org.tmatesoft.sqljet/sqljet/1.1.1)

# google-apps-script - getFiles() 上的 Google AppsScript 服务器错误

> ID：15146975
> 
> 赞同：1
> 
> 时间：2013-02-28T22:32:39.987
> 
> 标签：google-apps-script, runtime-error

出现服务器错误

var 内容 = 文件夹.getFiles(1501,500);

前三个迭代运行良好，0,500 和 501,500 和 1001,500。文件夹中有超过 3,000 个文件。在过去的几个小时里多次点击它。还有什么会导致错误吗？

以及如何将文件添加到文件夹中。如果我添加文件，是否可以通过查看列表末尾或开头来获得增量？

刚玩了 500，减少它，我让它运行了几次，总共 1900 个文件，它又停止了。最大数量是否有限制。看起来不超过 1999 个文件。这是真的？猜猜我必须拆分目录。

# java - 在 grails 的引导带中加载应用程序启动时的资源包

> ID：15146977
> 
> 赞同：1
> 
> 时间：2013-02-28T22:32:43.603
> 
> 标签：java, grails, grails-2.0, resourcebundle

`src/java`我在 Grails 应用程序中为我想要使用的特定资源包创建了一个新包，例如`src/java/resourcebundle/abc.properties`. 当我从`src/java`. 我想在应用程序加载时加载这个文件。所以我试图将它添加到`bootstrap.groovy`：

```
def init = { -> def myProperties =  ResourceBundle.getBundle("src/java/resourcebundle.abc")}. 
```

我遇到了一个例外

```
Error executing bootstraps: Can't find bundle for base name src/java/resourcebundle.abc, locale en_US 
```

关于如何在引导程序中加载资源包的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T11:01:24.567

删除 src/java？还是使用 ClasspathResource？

# sql - 在 Where 子句中选择许多离散值

> ID：15146978
> 
> 赞同：2
> 
> 时间：2013-02-28T22:32:56.650
> 
> 标签：sql, sql-server

给定一张像

```
CREATE TABLE [dbo].[Article](
    [Id] [int] NOT NULL,
    [CategoryId] [int] NOT NULL,
    [Text] [nchar](10) NOT NULL) 
```

允许用户选择他们想要查看数据的一个或多个类别。通常他们会选择 1-20 个类别。为了适应这种情况，我生成类似于以下内容的参数化查询：

```
SELECT * FROM Article
WHERE CategoryId IN (@c1, @c2, @c3, @c4, @c5) 
```

但是，在一些罕见的用例中，用户可以合法地选择数百个类别。这使我发现了 Linq-to-Entities 的局限性，我通过形成[类别代码范围来](https://stackoverflow.com/q/14945983/141172)解决这个问题。不幸的是，这只会解决问题，因为可以传递给 SQL Server 的查询的大小是有限制的。

我想重构这个查询以避免任何硬限制。我的第一个想法是创建一个包含所请求类别的临时表，并对该临时表执行内部连接来代替`IN(...)`子句。但是，我知道临时表可能会很慢。

有没有更优雅和/或性能更好的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:38:40.027

您的第一直觉是正确的，尽管您可能会发现一个足以代替临时表的表值变量。不要担心这种情况下的性能；这不会很重要。如果需要，总是可以在临时表上创建索引，但这似乎不太可能。CategoryId 字段是否有索引？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:42:06.247

编辑：

哎呀。我错过了 Linq 部分。

这是一种可能值得一试的替代语法（出于性能原因，而不是出于字符串长度原因）

```
Select * from dbo.Article art where exists ( select null from ( select 0 as MyV union all select 2 as MyV union all select 3 as MyV ) as derived1 where derived1.MyV = art.CategoryId ) 
```

……………………………………………………………………………………………………………………

这就是我的处理方式。

有时我的变量表更改为#temp 表。我测试了两种不同的性能场景。

您可以通过 xml 传递尽可能多或尽可能少的值。

```
DECLARE @input XML = '<root>
  <category myvalue="1" />
  <category myvalue="2" />
  <category myvalue="3" />
</root>'

declare @holder table ( CatID int )
Insert into @holder (CatID)
SELECT
    myvalue = MyXmlTable.value('(@myvalue)', 'int')
FROM
    @input.nodes('/root/category') AS Tbl(MyXmlTable)

select * from @holder    

SELECT * FROM Article art
where exists (select null from @holder hold where hold.CatID = art.CategoryId 
```

更大的写在这里：

[http://www.sqlservercentral.com/articles/Stored+Procedures/thezerotonparameterproblem/2283/](http://www.sqlservercentral.com/articles/Stored+Procedures/thezerotonparameterproblem/2283/)

# android - Android：消息框不工作

> ID：15146986
> 
> 赞同：0
> 
> 时间：2013-02-28T22:33:52.710
> 
> 标签：android

我正在尝试进行一些数据验证。简而言之，当按下添加按钮时，如果某些字段未填写，那么我想显示一个消息框并从进一步处理中返回。

这是我的代码流程，没有 messageBox 代码：

```
 Button add = (Button) findViewById(R.id.addButton);
    add.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            //local vars
            String access;
            String gender;
            String avail;
            String availCode;

            // getting values from selected editItems
            String name = textName.getText().toString();                
            String street = textStreet.getText().toString();                
            String city = textCity.getText().toString();                
            String state = textState.getText().toString();              
            String postal = textPostal.getText().toString();
            String country = textCountry.getText().toString();
            String directions = textDirections.getText().toString();
            String comments = textComments.getText().toString();

            //verify miniminal data
            if((name.equals("")) || (street.equals(""))|| (city.equals("")) || (state.equals("")) || (postal.equals("")) || (country.equals("")))
            {

            } 
```

我尝试粘贴此代码：

```
 //verify miniminal data
        if((name.equals("")) || (street.equals(""))|| (city.equals("")) || (state.equals("")) || (postal.equals("")) || (country.equals("")))
        {
            AlertDialog.Builder builder = new AlertDialog.Builder(context);
            builder.setCancelable(false);
            builder.setTitle("Title");
            builder.setInverseBackgroundForced(true);
            builder.setMessage("Must enter minimal data.");
            builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
              @Override
              public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
                return;
              }
            });
            AlertDialog alert = builder.create();
            alert.show();

        } 
```

但是......我无法建立这条线：

```
AlertDialog.Builder builder = new AlertDialog.Builder(context); 
```

Eclipse 说上下文不能解析为变量。

我对该怎么做感到困惑。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:36:42.653

我在上面的代码中的任何地方都没有看到`context`变量，并且`AlertDialog.Builder`' 的构造函数需要一个`Context`传递给它的实例。

但是，由于您是从`OnClickListener`'s执行此操作的`onClick()`，因此您可以使用它[`View#getContext()`](http://developer.android.com/reference/android/view/View.html#getContext%28%29)来获取`Context`实例。

```
AlertDialog.Builder builder = new AlertDialog.Builder(view.getContext()); 
```

# php - 使用 JavaScript 在 XML 文件之间切换

> ID：15146988
> 
> 赞同：0
> 
> 时间：2013-02-28T22:34:01.120
> 
> 标签：php, javascript, html, xml, xmlhttprequest

我使用 XML 文件作为我的 html 页面的布局，并使用 javascript 来加载它们，如下所示：

```
if (window.XMLHttpRequest)
  {
  xmlhttp=new XMLHttpRequest();
  }
else
  {
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

xmlhttp.open("GET","default.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 
```

如何在 2 个或更多布局之间切换？

我正在使用 javascript/xml 将 xml 加载到 html 中，如下所示：

```
document.write('<ul id="horizontal-list">');
var x=xmlDoc.getElementsByTagName("APP");
for (i=0;i<x.length;i++)
  { 
  document.write('<li><a class="app_link" href="depiction.php?app=');
  document.write(x[i].getElementsByTagName("NAME")[0].childNodes[0].nodeValue);
  document.write('&dl=');
  document.write(x[i].getElementsByTagName("DOWNLOAD")[0].childNodes[0].nodeValue);
  document.write('&install=');
  document.write(x[i].getElementsByTagName("INSTALL")[0].childNodes[0].nodeValue);
  document.write('">');
  document.write('<label class="app_label">');
  document.write(x[i].getElementsByTagName("NAME")[0].childNodes[0].nodeValue);
  document.write('</label><img class="applicationIcon" src="');
    document.write(x[i].getElementsByTagName("ICON")[0].childNodes[0].nodeValue);
  document.write('"/></a></li>');
  }
document.write('</ul>'); 
```

*注意：我也在使用 css 样式表。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:37:58.217

使 ajax 成为如下所示的函数，并使用 xml 文件的路径调用该函数：

```
function getXml($file){
if (window.XMLHttpRequest)
  {
  xmlhttp=new XMLHttpRequest();
  }
else
  {
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

xmlhttp.open("GET",$file,false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 
} 
```

你也可以发送你的css文件（添加第二个参数到函数并使用jquery append函数来附加样式表）

# javascript - 如何防止表单提交或页面刷新后取消选中复选框？

> ID：15146992
> 
> 赞同：0
> 
> 时间：2013-02-28T22:34:32.457
> 
> 标签：javascript, jquery, ruby-on-rails-3.2

我在使用 Ruby on Rails 3.2 时遇到了复选框问题。复选框值通常保存到数据库中，但是当我刷新页面或单击表单上的提交按钮时，复选框不会保持选中状态，我不知道我在这里缺少什么。每次刷新或提交时，它都会被取消选中。我会很感激你的帮助。复选框 has_available_space 是一个布尔数据库值。

数据库（复选框值）

```
 create_table :user_location do |t|
      t.boolean :has_available_space
    end 
```

路线

```
 namespace :users do
       match 'update_location' => 'location#update', :via => [:post]
    end 
```

模型用户

```
 has_one :user_location 
```

模型用户位置

```
 belongs_to :user 
```

控制器

```
 def update 
     @user = User.find(params[:id])
     if @user.user_location.nil?
         @user.user_location = UserLocation.new
     end
     @user.user_location.has_available_space = params[:checkbox_has_available_space]
     @user.save!
     @user.user_location.save!
     redirect_to '/users/location'
    end 
```

看法

```
 <form id = 'location_form' action="/users/update_location" method="post">
       <input type="hidden" name="id" value="<%= @user.id %>" />
       <input id = 'has_available_space' type="checkbox" name="checkbox_has_available_space" value = '<%= @user.user_location.has_available_space %>' >I have available space
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:39:27.883

您需要将选中的属性添加到您的复选框元素：

```
`<input type="checkbox" checked />` 
```

# ios - iOS 图像 startAnimating 没有动画（大部分时间）

> ID：15146994
> 
> 赞同：0
> 
> 时间：2013-02-28T22:34:41.440
> 
> 标签：ios, uiimageview

我有一个由于某种原因没有动画的动画。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationController.navigationBar.hidden = YES;
    self.nameLabel.text = [self.name uppercaseString];
    self.gradient1.alpha = .9;
    self.gradient1.image = [UIImage imageNamed:@"heart.png"];
    self.gradient1.animationImages = [[NSArray alloc] initWithObjects:
                                      [UIImage imageNamed:@"gradiant1.png"],
                                      [UIImage imageNamed:@"gradiant2.png"],
                                      ...
                                      [UIImage imageNamed:@"gradiant26.png"], nil];
    self.gradient1.animationDuration = .5;
    self.gradient1.animationRepeatCount = 1;

    [self updateStats:nil];

}

-(void)updateStats:(NSTimer*)timer{
Utilities *utility = [[Utilities alloc] init];
[utility getDataWithSSID:self.ssID completion:^(bool *finished, NSArray *objects) {
    if (finished){
        ...
        [self.gradient1 startAnimating];
    }
    self.twoSecTimer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self
                                                      selector:@selector(updateStats:)
                                                      userInfo:nil
                                                       repeats:NO];

}]; 
```

}

有时它会动画一次或两次然后停止，即使计时器继续一遍又一遍地敲击。其他时候它根本没有动画。但是，我有几个占位符按钮，我把它们放在情节提要上，它们没有与任何东西绑定，每当我按下其中一个按钮时，它就会在下次计时器按下时动画（实际上每当我按下屏幕时，即使我没有有任何类型的手势识别器..)。另外，当我在这个 ViewController 中添加我想要做的所有其他垃圾时，它每隔一次被调用时就会动画。所以我认为这比我忘记的更深，所以设置一些属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:23:54.527

将动画触发器移动到该视图实际可见的时刻可能是一个更好的主意 - 因此移动到`viewDidAppear:`.

您创建递归计时器调度的方式也让我不寒而栗。我想它对你来说很好，但我肯定会建议使用`repeats`设置为的标志`YES`。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationController.navigationBar.hidden = YES;
    self.nameLabel.text = [self.name uppercaseString];
    self.gradient1.alpha = .9;
    self.gradient1.image = [UIImage imageNamed:@"heart.png"];
    self.gradient1.animationImages = [[NSArray alloc] initWithObjects:
                                      [UIImage imageNamed:@"gradiant1.png"],
                                      [UIImage imageNamed:@"gradiant2.png"],
                                      ...
                                      [UIImage imageNamed:@"gradiant26.png"], nil];
    self.gradient1.animationDuration = .5;
    self.gradient1.animationRepeatCount = 1;
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    //animate right away...
    [self updateStats:nil];
    //trigger new animations every two seconds
    self.twoSecTimer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self
                                                      selector:@selector(updateStats:)
                                                      userInfo:nil
                                                       repeats:YES];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [self stopUpdatingStats];
}

-(void)stopUpdatingStats
{
    [self.twoSecTimer invalidate];
}

-(void)updateStats:(NSTimer*)timer
{
    NSLog(@"updating");
    [self.gradient1 startAnimating];
} 
```